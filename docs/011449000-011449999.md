# StackOverflow 问答 11449000-11449999

# python - 在 Python 中安装 3rd 方包

> ID：11449001
> 
> 赞同：0
> 
> 时间：2012-07-12T09:38:02.257
> 
> 标签：python

我如何在 python 中安装 3rd 方包。？我在 3rd 方包中有 setup.py 文件。

我需要知道所涉及的步骤以及如何做？在哪里编写命令以及如何实际执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:41:08.277

“python setup.py 安装” - [http://docs.python.org/install/index.html](http://docs.python.org/install/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:41:03.903

我认为这样的事情会起作用：

```
pip install <path to folder> 
```

也强烈推荐使用virutalenv 或/和zc.buildout

# javascript - jQuery - 有什么区别

> ID：11449002
> 
> 赞同：2
> 
> 时间：2012-07-12T09:38:02.620
> 
> 标签：javascript, jquery, jquery-events

我正在检查我客户的一个代码并遇到了这个问题。

```
$(document).ready(function() {
    function foo1() {
        $("#id1").bind('click', function() {});
    }
    foo1();

    function foo2() {
        $("#id2").bind('click', function() {});
    }
    foo2();
}); 
```

他们正在做的是，在函数内部附加事件处理程序，然后调用该函数。

它与以下有何不同？

```
$(document).ready(function() {
    $("#id1").bind('click', function() {});
    $("#id2").bind('click', function() {});
}); 
```

`$(document).ready()`那就是直接在函数中附加事件处理程序。

它在这两种情况下都可以正常工作，我只是想知道是否存在一些与性能相关的问题或其他问题。就像一个工作更快或更慢。或者这是一种我不知道的标准做事方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:39:43.987

不同之处在于，您可以重新使用代码的该部分在代码中的任何位置再次调用 foo2() 而不是复制整个代码。

编辑：

**让我给你举个例子**

失败时，它需要显示“你好，出错了！”的警报。你可以做这两件事：

```
alert('Hello, that was going wrong!'); 
```

或者

```
function showError() {
alert('Hello, that was going wrong!');
} 
showError(); 
```

解决方案 1 似乎是最简单的。

*但是.....*想象一下，您正在处理一个非常大的项目，其中有 1000 个位置显示该错误。现在您需要在 1000 个位置编辑您的消息，而不仅仅是一个位置。

或者当你想显示一个 HTML 弹出窗口而不是一个警报时，想象一下改变它。

希望解释有意义，如果没有请告诉我。

# c++ - 提升线程 notify_all() 和 sleep()

> ID：11449004
> 
> 赞同：2
> 
> 时间：2012-07-12T09:38:05.683
> 
> 标签：c++, multithreading

```
boost::condition_variable cond;
boost::mutex mut;
bool ready = false;

void consumer() {
    boost::mutex::scoped_lock lock(mut);
    while (!ready) {
         cond.wait(lock);
    }
}

void producer() {
    boost::mutex::scoped_lock lock(mut);
    ready = true;
    cond.notify_all();
    boost::this_thread::sleep(boost::posix_time::seconds(4));
} 
```

参考上面的代码，我在调用 notify_all() 后，实际上让生产者线程休眠了 4 秒。然而，消费者线程实际上在 4 秒后被唤醒。那么，尽管有 4 秒的睡眠，我如何才能解决这个问题并在调用 notify_all() 后立即唤醒消费者线程。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:40:24.457

它与 boost::mutex::scoped_lock lock(mut); 有关。在生产者。由于作用域在睡眠后结束，互斥锁仅在它之后被释放。

如果您想保留 scoped_lock，请尝试这样做。

```
void producer() {
  {
    boost::mutex::scoped_lock lock(mut);
    ready = true;
    cond.notify_all();
  }
  boost::this_thread::sleep(boost::posix_time::seconds(4));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:43:39.567

作用域锁只有在函数作用域结束时才会被释放。由于您的消费者实际上需要重新获取锁才能继续执行，因此即使您通知他们唤醒，他们也会被阻塞，直到生产者释放锁。

Either use the solution proposed by @Clement to reduce the lock scope, or use a different type of lock that you can unlock manually.

# android - 使用 Android SDK 中的 ic_menu* 图标

> ID：11449005
> 
> 赞同：0
> 
> 时间：2012-07-12T09:38:10.187
> 
> 标签：android, android-layout

我已经能够使用 Android SDK 中的几乎所有图标，但我无法为 ic_menu_refresh 做到这一点。

我知道我可以将drawable复制到我的本地项目并以这种方式使用它......但这就是我现在想要的，因为在不同的版本和尺寸上它会使用相同的......这不是我想要的。

为什么现在可以访问了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:20:38.530

因为此图标并非在所有 SDK 版本中都可用。要根据 SDK 添加不同的刷新图标，请将您的图标移动到具有 API 级别的 drawable 文件夹中：

```
drawable-v7
drawable-v8
drawable-v10
drawable-v14
... 
```

在我的示例中，您显示 api lvl7,8,10,14 的不同图标

# ios - 在同一个动画中使用两个不同的 UIViewAnimationCurve

> ID：11449008
> 
> 赞同：5
> 
> 时间：2012-07-12T09:38:20.880
> 
> 标签：ios, uiviewanimation, uiviewanimation-curve

我希望能够使用一个 UIViewAnimationCurve 进行旋转，另一个用于位置变化。这可能吗？

例如（在伪代码中）；

```
// Begin animations

// Set rotation animation curve to EaseInOut

// Set position animation curve to Linear

// Make some changes to position

// Make some change to the angle of rotation

// Commit the animations 
```

编辑：（下面建议的 CAAnimationGroup 方法） - 创建了 2 个单独的 CABasicAnimations 和一个 CAAnimationGroup 但是动画没有开始。有任何想法吗？

```
CABasicAnimation *postionAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
postionAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
postionAnimation.toValue = [NSValue valueWithCGPoint:[self transformPointToWorldSpaceFromViewSpace:self.spriteView.position]];
postionAnimation.delegate = self;

CABasicAnimation *rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.z"];
rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
rotationAnimation.toValue = [NSNumber numberWithFloat:self.spriteView.angle -= M_PI_2];
rotationAnimation.delegate = self;

CAAnimationGroup *animationsGroup = [CAAnimationGroup animation];
animationsGroup.duration = self.clockSpeed;
animationsGroup.animations = [NSArray arrayWithObjects:postionAnimation, rotationAnimation, nil];

// Perform the animation
[self.spriteView.layer addAnimation:animationsGroup forKey:nil]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:41:59.660

尝试创建两个不同的动画。使用 UIView 的方法，您不能为动画的不同属性设置不同的动画曲线。或者你可以玩 CAAnimations 并创建一个 CAAnimationGroup 来设置你的两个 CABasicAnimation

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T01:41:09.187

最好的办法是多次调用 animateWithDuration:delay:options:animations:completion:。在每次调用中使用不同的动画曲线，它们将并行运行。或者，使用不同的延迟值，您可以让它们按顺序运行。

代码可能如下所示：

```
[UIView animateWithDuration: .5 
  delay: 0
  options: UIViewAnimationOptionCurveEaseInOut 
  animations: ^{
    view1.center = CGPointMake(x, y);
  }
  completion:  ^{
    //code that runs when this animation finishes
  }
];

[UIView animateWithDuration: .5 
  delay: .5
  options: UIViewAnimationOptionCurveLinear
  animations: ^{
    view2.center = CGPointMake(x2, y2);
  }
  completion:  ^{
    //code that runs when this animation finishes
  }
]; 
```

如果你使用 CAAnimationGroups，会有几个问题。

首先，动画组决定了整个组的动画曲线。我认为您不能为每个子动画指定不同的曲线（尽管我承认我没有尝试过。）

其次，如果您将动画添加到组中，则不会调用各个动画的代理。只有动画组的委托方法被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:12:44.707

好的，终于解决了。感谢 iSofTom 的指导（对您的答案投了赞成票）。我设置了单个动画的代表，但没有设置组。

```
CABasicAnimation *postionAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
postionAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
postionAnimation.fromValue = [NSValue valueWithCGPoint:self.spriteView.center];
postionAnimation.toValue = [NSValue valueWithCGPoint:[self transformPointToViewSpaceFromWorldSpace:self.spriteView.position]];

CABasicAnimation *rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
rotationAnimation.fromValue = [NSNumber numberWithFloat:self.spriteView.angle];
rotationAnimation.toValue = [NSNumber numberWithFloat:self.spriteView.rotation];

CAAnimationGroup *animationsGroup = [CAAnimationGroup animation];
animationsGroup.duration = self.clockSpeed;
animationsGroup.animations = [NSArray arrayWithObjects:postionAnimation, rotationAnimation, nil];
animationsGroup.delegate = self;
// Perform the animation
[self.spriteView.layer addAnimation:animationsGroup forKey:nil]; 
```

和

```
- (void)animationDidStart:(CAAnimation *)theAnimation {
radiansToDegrees(self.spriteView.rotation));
    self.spriteView.angle = self.spriteView.rotation;

NSStringFromCGPoint(self.spriteView.position));
    self.spriteView.center = [self transformPointToViewSpaceFromWorldSpace:self.spriteView.position];
} 
```

# c# - 通过动态方法获取静态字段的值

> ID：11449014
> 
> 赞同：2
> 
> 时间：2012-07-12T09:38:45.360
> 
> 标签：c#, windows-phone-7, reflection, static, dynamicmethod

我有以下课程：

```
public class TestClass
{   
    public static readonly string HELLO = "Hello, ";

    public static string SayHello(string name)
    {
        return HELLO + name;
    } 
} 
```

我想通过 DynamicMethod 访问 HELLO 的静态字段。GetValue 的标准反射有效：

```
public static string GetViaInvoke()
    {
        Type tcType = typeof(TestClass);
        FieldInfo fi = tcType.GetField("HELLO");
        string result = fi.GetValue(null) as string;
        return result;
    } 
```

但我需要类似的东西（OpCodes 来自类似方法的 ILDasm）：

```
public static string GetViaDynamicMethod()
    {
        Type tcType = typeof(TestClass);
        FieldInfo fi = tcType.GetField("HELLO");

        DynamicMethod dm = new DynamicMethod("getHello", typeof(string), Type.EmptyTypes);            
        ILGenerator iL = dm.GetILGenerator();

        iL.DeclareLocal(typeof(string));
        iL.Emit(OpCodes.Nop);
        iL.Emit(OpCodes.Ldsfld, fi);
        iL.Emit(OpCodes.Stloc_0);
        iL.Emit(OpCodes.Br_S, 0x09);
        iL.Emit(OpCodes.Ldloc_0);
        iL.Emit(OpCodes.Ret);

        Func<string> fun = dm.CreateDelegate(typeof(Func<string>)) as Func<string>;
        string result = fun();
        return result;
    } 
```

这个想法非常简单，动态方法适用于非静态字段（ldfld 操作码和*此*对象），但是当我尝试访问静态字段时，我收到异常：

```
System.InvalidProgramException was unhandled
  Message=InvalidProgramException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:18:10.037

将您编写的 IL 代码基于执行相同操作的反编译代码是一个好主意，但您仍然需要了解自己在做什么。

如果您查看[的文档`Br_S`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.br_s.aspx)，您会发现您应该将它与 a 一起使用`Label`，而不是`int`. 我认为`Br_S`你的代码分支到字节偏移量 9 处的指令，但我不知道那是哪条指令，你不应该写这样的代码。

如果只想加载静态字段的值并返回，则不需要任何局部变量或分支。以下内容就足够了：

```
iL.Emit(OpCodes.Ldsfld, fi);
iL.Emit(OpCodes.Ret); 
```

它的作用是将值加载到评估堆栈上，然后立即返回。它有效，因为当您从确实返回值的方法返回时，评估堆栈上的单个值将用作该返回值。

# android - 相对布局避免图像上的文字

> ID：11449017
> 
> 赞同：2
> 
> 时间：2012-07-12T09:38:49.473
> 
> 标签：android, android-layout

我正在尝试设置一个布局，该布局将用于`ListActivity`. 每行在左侧包含一个灯泡图标，在中间包含一个文本，然后在右侧包含一个钢笔图标。

我找不到解决方案来避免中心的文本部分在 2 幅图像变大的情况下越过它。

这是我在屏幕上看到的：

![实际显示](../Images/c04a11a711de6d9bb3bd76e7b61e18c4.png)

当文本过长时，它会显示在*灯泡图标*和*笔图标上*

我如何需要修改我的布局以避免它？

**XML:**

```
<RelativeLayout
    android:id="@+id/linearLayoutEquipementInfo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="20sp"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/equipementImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_margin="10sp"
        android:contentDescription="@string/status" />

    <TextView
        android:id="@+id/equipementName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_margin="10sp"
        android:gravity="center"
        android:text="title"
        android:textSize="22sp" />

    <ImageView
        android:id="@+id/equipementEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_margin="1sp"
        android:background="@null"
        android:contentDescription="@string/editEquipmentName"
        android:src="@android:drawable/ic_menu_edit" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:43:18.743

您可以为 TextView 添加 2 个参数：

```
android:layout_toRightOf="@id/equipementImage"
android:layout_toLeftOf="@id/equipementEdit" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:43:08.023

使用以下`RelativeLayout`属性`android:layout_below`：

> 将此视图的顶部边缘定位在给定的锚视图 ID 下方。

所以在你的情况下，你将不得不`android:layout_below="@id/equipementImage"`在你的`TextView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:53:05.557

我认为您可以在布局 xml中使用**权重总和。**

像这样。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayoutEquipementInfo"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="20sp"
    android:weightSum="1.0"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.1"
        android:orientation="horizontal"
        android:weightSum="1.0" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="0.15"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="0.70"
            android:gravity="center"
            android:text="TextView" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="0.15"
            android:src="@drawable/ic_launcher" />

    </LinearLayout>

</LinearLayout> 
```

这可能会解决您的问题。

# jquery - 用户点击后突出显示链接

> ID：11449019
> 
> 赞同：0
> 
> 时间：2012-07-12T09:38:56.047
> 
> 标签：jquery

我想在用户单击链接时突出​​显示该链接，并在用户访问该链接时保持突出显示。我已经尝试使用 jquery 但无济于事。所以任何帮助/建议。提前谢谢。我当前的代码：

```
<script type="text/javascript" src=<?php echo BASE_URL?>/js/jquery.js></script>
<div class="menu_short">
    <a href="<?php echo BASE_URL?>/index.html">Home</a>  
    <a href="<?php echo BASE_URL?>/1.html">1</a> 
    <a href="<?php echo BASE_URL?>/2.html">2</a>
    <a href="<?php echo BASE_URL?>/3.html">3</a>

</div>
<script type="text/javascript">
    $(document).ready(function(){
        $(".menu_short a").click(function(){
            $(".menu_short a").removeClass("active");
            $(this).addClass("active");
        })
    })
</script>

css:
.menu_short{

    float:left;
    clear:both;
    }
.menu_short a, .menu_short a:link,  .menu_short a:visited {
    font:bold 13px Arial, Helvetica, sans-serif;
    text-transform:uppercase;
    color:#fff;
    padding:0 15px;
    }

.menu_short a:hover{
    color: #ffd634;
    text-decoration:none;
    }
.menu_short a:active {
    color:#ffd634;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T04:58:25.993

为了突出显示链接并在用户单击后使其处于活动状态，我将其编码为代码：

```
<script type="text/javascript" src=<?php echo BASE_URL?>/js/jquery.js></script>
<div class="menu_short">
    <a class="<?php echo $page_code=='1'?"current":"";?>" href="<?php echo BASE_URL?>/index.html">Home</a>  
    <a class="<?php echo $page_code=='2'?"current":"";?>" href="<?php echo BASE_URL?>/1.html">1</a> 
    <a class="<?php echo $page_code=='3'?"current":"";?>" href="<?php echo BASE_URL?>/2.html">2</a>
    <a class="<?php echo $page_code=='4'?"current":"";?>" href="<?php echo BASE_URL?>/3.html">3</a>
</div> 
```

CSS：

```
.menu_short a{
color: #E26EFF;
}
.menu_short a:hover{
background: #FF6ADA;
color:#2362A5;
}
.menu_short a.current {
background:#FF6ADA;
color:#2362A5;
} 
```

其中 $page_code 是为每个页面提供的数字代码，就像索引页面一样

```
function index(){
$data['page_code']=1;
} 
```

# javascript - 无法在“新”JSP 页面上加载脚本和图像

> ID：11449021
> 
> 赞同：0
> 
> 时间：2012-07-12T09:38:57.913
> 
> 标签：javascript, jquery, html, jsp, jquery-mobile

加载新的 .jsp 页面时出现问题。正如主题所说，问题在于它没有加载脚本或图片。

我的 index.jsp

```
<html>
<head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="js/jquery.mobile-1.1.0.css" />
    <script type="text/javascript" src="js/dataManager.js"></script>
    <script type="text/javascript" src="js/MenuLoader.js"></script>
    <script type="text/javascript" src="js/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.1.0.js"></script>
</head> 
<body> 

    <!-- Start of first page -->
    <div data-role="page" id="first">

        <div data-role="header">
            <a href="#" data-rel="back" data-role="button" ><img align="middle"src="images/back.png" alt="beskeder" vspace="2"/></a> 
            <h1><img onclick="getStuff('/product/5')" align="middle"src="images/main_header.png" alt="beskeder" vspace="2"/></h1>
        </div><!-- /header -->

        <div data-role="content" id="firstPageContent"> 
            <p>I'm first in the source order so I'm shown as the page.</p>      
            <p>View internal page called <a href="#second">second</a></p>
            <a href="pages/mapMode.jsp" id="mapLink" name="mapLink"><img id="mapLinkImage" alt="a map which links to the mapPage" src="images/beskeder.png"/></a>
            <Button text="menuLoader.load" id="loadButton" name="loadButton" onClick="load()">menuLoader.load</button>
            <Button text="dataManager.addPicture" name="addPictureButton" id="addPictureButton" onClick="addPicture('firstPageContent')">dataManager.addPicture</button>
            <Button text="dataManager.reset" name="reset" id="reset" onClick="resetPageContent('firstPageContent')">dataManager.resetPageContent</button>
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>

        </div><!-- /footer -->
    </div><!-- /page -->
</body>
</html> 
```

当我按下 mapLink 按钮时，我点击了所需的 jsp 页面，但它只是不加载任何图片，并且按钮 onclick 功能不起作用。

这是 mapMode.jsp 的代码（几乎与 index.jsp 相同）：

```
<html>
    <head> 
        <title>My Page</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="js/jquery.mobile-1.1.0.css" />
        <script type="text/javascript" src="js/dataManager.js"></script>
        <script type="text/javascript" src="js/MenuLoader.js"></script>
        <script type="text/javascript" src="js/jquery-1.7.2.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.1.0.js"></script>
    </head> 
    <body> 

        <!-- Start of first page -->
        <div data-role="page" id="mapmode">

            <div data-role="header">
                <a href="#" data-rel="back" data-role="button" ><img align="middle"src="images/back.png" alt="back" vspace="2"/></a> 
                <h1><img onclick="getStuff('/product/5')" align="middle"src="images/main_header.png" alt="logo" vspace="2"/></h1>
            </div><!-- /header -->

            <div data-role="content" id="mapmodePageContent">   
                <p>I'm the first page in mapMode!.</p>      
                <Button text="dataManager.addPicture" name="addPictureButton" id="addPictureButton" onClick="addPicture('mapmodePageContent')">dataManager.addPicture</button>
                <Button text="dataManager.reset" name="reset" id="reset" onClick="resetPageContent('firstPageContent')">dataManager.resetPageContent</button>
            </div><!-- /content -->

            <div data-role="footer">
                <h4>Page Footer</h4>

            </div><!-- /footer -->
        </div><!-- /page -->
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:24:10.193

如果你把你的 js 放在一个子文件夹中，记得在你的图片位置前面添加“../”......愚蠢的我

# iphone - 如何保留iphone中的数据？

> ID：11449024
> 
> 赞同：0
> 
> 时间：2012-07-12T09:39:09.080
> 
> 标签：iphone, ios

在我的应用程序中，我有第一个 viewController，用户在其中输入一些输入来搜索地址并在下一个 viewController 中找到相关地址。我想要的是，当用户回到第一个 viewController 时，他输入的数据应该保留在各个字段中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:29:17.143

如果您正在制作基于导航的应用程序，则默认情况下会保留数据。请确保您没有在任何方法（如 viewWillAppear 或 viewDidAppear 或其他方法）中将其设置为 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:26:56.987

可能您在 viewDidAppear 或 viewWillAppear 中有视图控制器的设置代码。如果是这种情况，请尝试将其更改为 viewDidLoad 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:29:15.690

只要当您返回第一个控制器时对象仍然存在，用户输入的数据应该仍然在各个字段中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T13:14:17.693

你是如何呈现下一个 viewController 的？以及你是如何从下一个 viewController 回到第一个 viewController 的？如果您通过创建第一个 viewController 的新瞬间（从下一个 viewController）返回到第一个 viewController，那么以前的数据将不存在。

# c# - 传递到 Web 服务 (.asmx) 时的 Wcf 安全性

> ID：11449029
> 
> 赞同：0
> 
> 时间：2012-07-12T09:39:25.467
> 
> 标签：c#, .net, wcf, security

场景是我们有一个 WCF 服务，它使用我们构建的内部 Web 服务中的方法。

WCF 服务非常轻量级。

我们希望保护此 WCF 服务，以便只有某些客户端可以使用它（它当前位于面向公众的服务器上）。

我们没有能力在这个面向公众的服务器上安装证书，所以我们想知道最好使用的安全模型。

理想的想法是可以通过某种方式对其进行配置，以便客户端使用 WCF 服务简单地“传递”到内部 Web 服务的证书，因为这是在我们控制的服务器上，然后发生证书身份验证。

这可能吗..？如果没有，我们可以采用任何其他安全选项..？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:54:26.653

使用消息头并检查其中客户端的凭据的解决方法。也就是说，您可以在消息头中传递用户名和密码，如果精细处理请求，则在 wcf 服务上检查它，否则丢弃它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:50:51.060

我认为您必须详细说明自己的自定义安全模型。

要解决的主要问题是如何在您和客户之间共享“密钥”。您无法安装证书，因此您必须将密钥存储在其他地方，例如 web.config 内部部分......并以安全的方式将其分发给客户端。

您可以使用此密钥对消息进行签名或加密；您还可以使用加密密码的标准模式。

还要检查您是否可以使用某些 WS-Security 功能！！！

此外，检查 .Net Framework 提供的绑定身份验证和保护模式。

# web-services - Netbeans 构建配置

> ID：11449034
> 
> 赞同：0
> 
> 时间：2012-07-12T09:39:57.077
> 
> 标签：web-services, netbeans, build

是否可以在 Netbeans 中创建多个构建配置/配置文件，类似于在 Visual Studio 中可以执行的操作？

我正在尝试提供不同的配置，具体取决于我是为调试还是部署而构建。

我真正想要的主要是能够在调试时使用测试 Web 服务引用，在部署到生产环境时能够使用生产 Web 服务引用。

有没有办法做到这一点，或者是否有人对他们如何完成类似任务有任何提示或技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:34:16.577

你当然可以。如果您有一个 Java 项目（只要它是使用 Netbeans 创建的，这不适用于自由形式的项目），以下是步骤：

1.）右键单击项目->属性
2.）导航到“运行”属性
3.）其中显示“配置”并且有一个下拉框，右侧是“新建”按钮和“删除”。使用这些，可以创建可以运行应用程序的不同上下文。

如果您使用的是 C/C++，则过程类似：

1.) 右键单击​​项目-> 属性
2.) 单击“管理配置”

从那里你可以创建你想要的所有配置（很像 VS）。使用可以使用其他属性页来设置你的编译器标志等...

希望这可以帮助！

# javascript - JS 文件系统访问状态的更新

> ID：11449036
> 
> 赞同：0
> 
> 时间：2012-07-12T09:39:57.830
> 
> 标签：javascript, html, tiddlywiki, filesystem-access

对于新实现和/或提议的 HTML5 API，这个问题的答案是否会[发生](https://stackoverflow.com/questions/1087246/can-javascript-access-a-filesystem)变化？

我想如果我的问题需要是独立的，那么它是这样的：现在，或者在不久的将来，是否有可能在一个纯的、无插件的 HTML 文件中制作诸如 TiddlyWiki 之类的东西。在拇指驱动器上从一个地方带到另一个地方，并在不同浏览器的不同实例中打开，但仍会写回自身并保留在它提供的 UI 内所做的更改？

IE，TiddlyWiki 的拇指驱动器用例是否必须永远求助于非标准和/或 java/flash 小程序来保持持久性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:43:02.883

否。用于访问文件系统的 HTML 5 API 取决于通过文件输入选择的文件。用于本地存储的 HTML 5 API 将数据存储在文件外部（但与其 URI 关联）的沙箱中，并且不能在浏览器/系统之间移植。

# c++ - 尝试在单独的线程中创建 IWebBrowser2 控件时未创建

> ID：11449037
> 
> 赞同：0
> 
> 时间：2012-07-12T09:40:01.713
> 
> 标签：c++, multithreading, visual-c++, win32gui, iwebbrowser2

```
 void CUIPopupWnd::ieThreadProc(MSG* msg, LPVOID lpParameter){

    CUIPopupWnd *ptrPopUpWndCtrl = (CUIPopupWnd*)GetWindowLongPtr((HWND)msg->wParam , GWLP_USERDATA);
    switch(msg->message)
    {
    case WM_IECREATE:
        {
            REPORT_INTERNAL_SW_ERROR_EXT(L"HTML frame is going to be created.");        
            ptrPopUpWndCtrl->m_htmlAttributes.pBrowser = new (nothrow)CUIHTMLFrameWnd((HWND)msg->wParam,ptrPopUpWndCtrl->m_ulPresentWidth,ptrPopUpWndCtrl->m_ulPresentHeight);              

            if( NULL == ptrPopUpWndCtrl->m_htmlAttributes.pBrowser )
            {
                REPORT_INTERNAL_SW_ERROR_EXT(L"EmbeddedBrowser failed");
            }
            else
            {
                //m_htmlAttributes.pBrowser->createControl(this->m_hWnd,this->m_ulPresentWidth,this->m_ulPresentHeight);
                ptrPopUpWndCtrl->m_htmlAttributes.pBrowser->m_currentURL = ptrPopUpWndCtrl->m_htmlAttributes.m_szHTMLPath;
                ptrPopUpWndCtrl->m_htmlAttributes.pBrowser->RepaintBrowser();
                ptrPopUpWndCtrl->m_htmlWindowsList.push_front(ptrPopUpWndCtrl);
                ptrPopUpWndCtrl->m_htmlAttributes.pBrowser->Navigate(ptrPopUpWndCtrl->m_htmlAttributes.pBrowser->m_currentURL);
            }           
        }
        break;
    case WM_IEREFRESH:
        {           
            ptrPopUpWndCtrl->m_htmlAttributes.pBrowser->Navigate(ptrPopUpWndCtrl->m_htmlAttributes.pBrowser->m_currentURL);
            ptrPopUpWndCtrl->m_htmlAttributes.m_fReloadRequired = false;

        }
        break;  
    default:
        return;
    }

    CThreadController::getThreadController().createUIThread( ieThreadProc, IEThread,NULL );
            CThreadController::getThreadController().postThreadMessage(IEThread,WM_IECREATE,(_wparam)this->m_hWnd,0);

CThreadController::getThreadController().postThreadMessage(IEThread,WM_IEREFRESH,(_wparam)this->m_hWnd,0); 
```

在这里，ieThreadProc 是一个静态线程 proc。我有 Win32 窗口（this->m_hWnd），它应该是这个 IWebBrowser2 com 控件的父级。由于跨线程问题，我将消息发布到 IE 控件所在的线程创建并使用它。在调试时它没有显示任何破损。但是，IE 控件只是显示空白，没有显示页面。请帮助我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:32:22.450

The browser operates asynchronously via window messages. Make sure that the message loop of the thread that owns the browser window is processing messages that are destined for the browser's window, such as by passing them to `TranslateMessage()` and `DispatchMessage()` after retreiving them from the thread's message queue (if it is not already doing so - it is hard to say since you do not show what `createUIThread()` does outside of `ieThreadPorc()`).

# github - 是否有任何链接可以显示 GitHub 中的所有公共存储库？

> ID：11449038
> 
> 赞同：5
> 
> 时间：2012-07-12T09:40:08.763
> 
> 标签：github, search-engine, repository

昨天，我试图获取 GitHub 中所有公共存储库的列表，但我没有找到任何链接。

例如，在 Sourceforge 中，您可以按类别列出所有项目，或者在 Google 代码中，您可以搜索所有项目。

是的，我尝试使用诸如“*”或“%”之类的关键字或空字符串进行搜索，但您只能看到此页面[https://github.com/search?q=&type=Everything&repo=&langOverride=&start_value=1](https://github.com/search?q=&type=Everything&repo=&langOverride=&start_value=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-08T14:26:43.853

您可以使用以下请求列出 github 中的所有存储库：

[https://api.github.com/repositories?since=0](https://api.github.com/repositories?since=0)

它将返回 id>0 的前“n”个存储库作为 JSON 数组。您应该处理这个“n”，存储“id”。当您到达“页面”的末尾时，您只需再次点击 since=lastId: 例如：

[https://api.github.com/repositories?since=300](https://api.github.com/repositories?since=300)

这是我发现列出所有存储库的唯一方法，因为 SEARCH api 的每次搜索限制为 1000 个存储库。如果您打算处理所有回购，您应该准备好应对速率限制：

[https://developer.github.com/v3/rate_limit/](https://developer.github.com/v3/rate_limit/)

经过身份验证的用户可以获得更好的限制，您可以使用 access_token （查看文档）。小心，不要提出太多要求。如果您需要过滤存储库，则需要为每个存储库执行额外的查询（搜索 API）。准备好处理超过一千万个存储库。Java 示例：（使用 javax.json.Json）

```
int id=0;
do {
    URL url = new URL("https://api.github.com/repositories?since="+id+"&access_token="+oauth);
    // implement callApi such as Json.createReader(url.openStream()), but please make it sleep for a minute if the limit got reached        
    try (JsonReader rdr = callApi(url)) {
        JsonArray results = rdr.readArray();
        for (JsonObject result : results.getValuesAs(JsonObject.class)) {
            id = result.getInt("id");
            String name = result.getString("name");
            boolean priv = result.getBoolean("private");
            ... do whatever you want...
        }
    }
} while (some stop condition); 
```

祝你好运，我失去了一些时间来发现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T22:14:07.373

看看[这个搜索](https://github.com/search?langOverride=&language=&q=a%20OR%20b%20OR%20c%20OR%20d%20OR%20e%20OR%20f%20OR%20g%20OR%20h%20OR%20i%20OR%20j%20OR%20l%20OR%20m%20OR%20n%20OR%20o%20OR%20p%20OR%20q%20OR%20r%20OR%20s%20OR%20t%20OR%20u%20OR%20v%20OR%20x%20OR%20w%20OR%20y%20OR%20z%20OR%20k%20OR%201%20OR%202%20OR%203%20OR%204%20OR%205%20OR%206%20OR%207%20OR%208%20OR%209%20OR%200&repo=&start_value=1&type=Repositories&x=0&y=0)。我不确定这是否列出了所有公共回购，但我敢打赌这是一个好的开始。（搜索可能需要几秒钟，所以请耐心等待）

# c# - 删除重复数据 C# 到 SQL 转换

> ID：11449039
> 
> 赞同：1
> 
> 时间：2012-07-12T09:40:12.480
> 
> 标签：c#, sql-server

我只需要从数据库中删除重复的用户信息。我的 c# 代码如下，但我只是想知道如何在 SQL 中实现这一点，而不是使用游标。我认为诀窍始于获取由电子邮件分隔的整个重复数据集的第一行或剩余行。

在 C# 中，我以 1000 封为一组收集重复的电子邮件，并在跳过第一封后删除剩余的行。

```
List<string> top1000_emails;
do
{
  top1000_emails = sql.dbCommand.GetFirstColumn<string>(@"select top 1000 email
      from UserBase
      group by email
      having COUNT(email) > 1");

  for (int i = 0; i < top1000_emails.Count; i++)
  {
     var tmpids = sql.dbCommand.GetFirstColumn<long>("select [Id] from UserBase where email = {0}", top1000_emails[i]).Skip(1);
     sql.dbCommand.DeleteByIds<UserBase>(tmpids);
   }
} while (top1000_emails.Count > 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:55:57.467

你可以简单地通过 SQL 来做 ti，像这样（如果你有 SQL Server 2005 或更高版本）：

```
;WITH a AS (
    SELECT  *,
            ROW_NUMBER() OVER (PARTITION BY email ORDER BY Id) RowNum
    FROM    UserBase
)
-- deleted rows will be:
SELECT  *
--DELETE 
FROM    a
WHERE   a.RowNum <> 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:54:04.750

像这样的东西...

```
 --delete userbase 
 select * 
 from userbase
    left join (select email, MIN(id) minid from userbase group by email) mins
    on userbase.id = mins.minid
    and userbase.email = mins.email
 where mins.email is null 
```

先把你的数据备份一下，以防万一 然后把select换成delete

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:46:27.267

假设您的 UserBase 表中有主键 ID。创建 UserBase_Unique Table 精确结构为 UserBase Table 并运行以下命令。UserBase_Unique 表将具有您正在寻找的结果。

```
INSERT INTO UserBase_Unique (ID,Email)

SELECT Min(ID)
FROM UserBase AS U
WHERE Exists (SELECT email, Count(ID)
FROM UserBase U2
WHERE U2.email= U2.email
GROUP BY email
HAVING Count(U2.ID) > 1)
GROUP BY email; 
```

# jquery - 确定 jQuery 切换状态

> ID：11449041
> 
> 赞同：0
> 
> 时间：2012-07-12T09:40:15.957
> 
> 标签：jquery, toggle

我`toggle()`在按钮上使用该方法，以便它们可以具有`do something`/`revert changes`行为。例如：

```
$('button').toggle(function() {
  // case 1: maximize
  // ...
  another_function($(this));
  }, function() {
   // case 2: minimize
   // ...
  another_function($(this));
}); 
```

在这两种`toggle`情况下，最后都会调用相同的函数 ( `another_function()`)。我想从那个函数中找出我们是否在里面`case 1`，`case 2`而不必自己操作按钮（例如添加一个类，在调用函数之前设置一个自定义属性，并检查函数内部的这些更改）。

**有没有办法从元素状态数据本身中找出我们所处的切换情况（当然，jQuery 必须在某处设置一个状态才能知道要执行切换的哪一部分）？**

PS：已经有很多与该主题相关的帖子，但它们是关于`hide/show`案例和他们的建议（检查它是否可见，隐藏......）不适用于这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:44:37.060

您已经知道自己处于什么状态（最大化/最小化），因为该特定状态的代码正在执行。因此，您可以简单地将这些信息`another_function`作为参数传递给：

```
$('button').toggle(function() {
  // case 1: maximize
  // ...
  another_function($(this), 'maximize');
  }, function() {
   // case 2: minimize
   // ...
  another_function($(this), 'minimize');
}); 
```

### 更新：Groveling jQuery 的内部状态

jQuery 当前（1.7.2）在机制中使用了一个私有后门`.data()`来存储其切换的状态。这个后门在 jQuery 源代码中被明确标记为不止一个私有，不用说，后面的任何部分都可能在没有任何通知的情况下发生更改。因此**我强烈建议不要走这条路**。

也就是说，这就是发生的事情：

jQuery 使用通过访问的私有数据空间`$._data()`来存储切换的当前点击次数。此点击计数模 2 用于决定执行哪个函数，并在每次点击时递增。

当前用于存储此数据的键是 string `"lastToggle" + guid`，其中`guid`通常也是由 jQuery 自动生成的值（使用全局递增计数器）。的值`guid`在切换处理函数上设置，您可以在设置切换后检索它，如下所示：

```
var f1 = function() {
  // case 1: maximize
  // ...
  another_function($(this), 'maximize');
},  f2 = function() {
  // case 2: minimize
  // ...
  another_function($(this), 'minimize');
};

$('button').toggle(f1, f2);

// guid is now available on both handlers:
console.log(f1.guid, f2.guid); 
```

您还可以`guid`通过在调用之前将其设置在第一个处理程序上来修复 的值`toggle`：

```
var f1 = function() {
  // case 1: maximize
  // ...
  another_function($(this), 'maximize');
},  f2 = function() {
  // case 2: minimize
  // ...
  another_function($(this), 'minimize');
};

f1.guid = "foo";
$('button').toggle(f1, f2);

// guid is now fixed to "foo" and available on both handlers:
console.log(f1.guid, f2.guid); 
```

给定这个句柄，您可以检索到目前为止的点击次数（从而预测下一个将调用哪个处理程序）

```
$._data($('button'), "lastToggle" + guid); 
```

# javascript - 谷歌浏览器远程调试 - 添加断点

> ID：11449045
> 
> 赞同：4
> 
> 时间：2012-07-12T09:40:28.683
> 
> 标签：javascript, google-chrome-extension, remote-debugging, google-chrome-devtools

我正在尝试使用 chrome 扩展自动添加断点

首先，我在特定 scriptId 中搜索特定内容，然后在搜索结果的同一位置添加断点

这是我使用的代码：

```
chrome.debugger.sendCommand(debuggeeId,"Debugger.searchInContent",
{scriptId:scriptId,query:"function"},function(result){
    for(x in result.result){
        var lineNumber = result.result[x].lineNumber+1;
        chrome.debugger.sendCommand(debuggeeId,"Debugger.setBreakpoint",{location:{scriptId:scriptId,lineNumber:lineNumber }});
    }
}); 
```

总而言之，我在错误的地方得到断点我什至不知道如何检查断点在哪里，但它肯定不会停在正确的线上......

我做错了什么？

# java - 有什么办法可以防止 Java 将我的 double 变成指数值？

> ID：11449050
> 
> 赞同：1
> 
> 时间：2012-07-12T09:40:44.130
> 
> 标签：java, jdbc

有没有办法阻止Java把我的双倍变成指数值？我无法将其保存到我的数据库中。它一直告诉我它无法将我的 VarChar 转换为数字。

我愿意;

```
amt = oldAmt - amt;
amt = Math.abs(amt); 
```

并使用 setter将值放入**amt中；**

```
jvd.setDr_amt(amt); 
```

然后使用一个函数生成一个查询字符串，它给了我；

```
INSERT INTO jv ( id, dr_amt) VALUES (1, 1.595545786E7); 
```

dr_amt 的数据库中的数据类型是**numeric(15, 2)**

任何人？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T09:47:31.063

我非常猜测你会做这样的事情：

```
connection.createStatement().executeUpdate(
  "INSERT INTO my_table VALUES('" + myDouble + "')"); 
```

不要这样做，原因如下：

*   连接字符串会导致语法错误
*   连接字符串会导致 SQL 注入

以让 JDBC 处理数据类型的方式编写语句：

```
PreparedStatement stmt = connection.prepareStatement(
  "INSERT INTO my_table VALUES(?)");
stmt.setDouble(1, myDouble);
stmt.executeUpdate(); 
```

如果您绝对*必须*在 SQL 字符串中内联您的双精度值而不是使用绑定值，请尝试使用`BigDecimal`来序列化您的双精度值，而不是：

```
new BigDecimal(myDouble).toString(); 
```

由于您似乎在操作货币值，因此您应该将所有双打都更改为`BigDecimal`无论如何， Java 与 SQL数据类型`BigDecimal`的最佳匹配也是如此`DECIMAL`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T09:47:07.293

您应该使用带有*绑定参数的 JDBC**准备语句*，例如

 *```
PreparedStatement s = c.prepareStatement(
        "INSERT INTO mytable (myfield) VALUES (?)");
s.setDouble(1, n);
s.executeUpdate(); 
```

[省略异常处理代码]

JDBC 层将确保您的双变量正确地发送到数据库服务器而不会被破坏。*

# php - 在帖子中阅读更多（按钮）并显示帖子直到阅读更多标签的概念

> ID：11449051
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:40:52.080
> 
> 标签：php

有人可以在博客文章中解释 PHP 概念，用于在插入阅读更多之前显示文本，以及一些可以识别阅读更多标签（如 wordpress） `<!--more-->`并显示文本直到插入阅读更多标签的功能。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:43:12.403

您可以只使用围绕阅读更多标签拆分的字符串，它之前的任何内容本质上都是您的摘要，之前和之后的连接是您的全文。

当按下更多/更少按钮时，您可以在前端使用 javascript 在摘要和全文之间切换。

# r - 错误：order.by 需要适当的基于时间的对象 PerformanceAnalytics

> ID：11449052
> 
> 赞同：4
> 
> 时间：2012-07-12T09:40:52.610
> 
> 标签：r, time-series, xts

's我是 R 的新手，对 ts 对象更是陌生。我尝试在来自数据框（df）的向量上使用包 PerformanceAnalytics。

我有以下数据框：

```
 row.names   Date    PnL
1   22  1992-01-02  -1.751133e-02
2   23  1992-01-03  -1.586737e-02
3   24  1992-01-06  -2.898982e-02 
```

我试过：

```
 TestS=SharpeRatio.annualized(df[,"PnL"],Rf=0,scale=252)
  TestS=SharpeRatio.annualized(as.ts(df[,"PnL"]),Rf=0,scale=252) 
```

它分别返回对象中的错误和：

> checkData(R, method = "xts") 中的错误：数据无法转换为时间序列。如果您尝试从具有一列的数据对象中传递名称，则应使用“data[rows, columns, drop = FALSE]”形式。行名应该有标准的日期格式，例如 '1985-03-15'

```
dput(df[,"PnL")=0.00994504296273811, 0.00156467225423175, 0.00976137048829638, etc.
dputdf[,"Date")=8036, 8037, 8040, 8041,etc. 
```

该软件包的帮助说该功能适用​​于矢量。我没有任何 NA，因此我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T10:03:42.863

首先，您需要将数据框转换为`xts`对象：

```
dfx = xts(df$PnL, order.by=as.Date(df$Date)) 
```

然后你可以这样做：

```
TestS = SharpeRatio.annualized(dfx, Rf=0, scale=252) 
```

或者你需要做的任何其他事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T13:12:58.053

PerformanceAnalytics 尝试将您的数据转换为更易于在内部使用的形式。要使其与 a 一起使用`data.frame`，`data.frame`必须具有`rownames`像`Date`s 一样的格式。所以，这会工作

```
rownames(df) <- df[, 2]
(TestS=SharpeRatio.annualized(df[, "PnL", drop=FALSE], Rf=0, scale=252))
#                                      PnL
#Annualized Sharpe Ratio (Rf=0%) -8.767439 
```

尽管 PerformanceAnalytics 声称可以处理许多数据类型，但作者`xts`广泛使用。因此，他们可能遗漏了一些代码在不使用的情况下无法正常工作的地方`xts`，例如将 a 传递`vector`给此函数。

我认为问题`SharpeRatio.annualized`在于它调用`Return.excess`并`Return.excess`尝试将您的向量变成`xts`带有这条线的向量

```
xR = coredata(as.xts(R) - as.xts(Rf)) 
```

`xts`但是，如果不添加时间索引，则无法转换矢量。（另外，下一行使用`apply`，这不适用于向量）

# c# - ASP.NET C# RDLC IFF 条件给出错误

> ID：11449053
> 
> 赞同：0
> 
> 时间：2012-07-12T09:40:53.080
> 
> 标签：c#, asp.net, report, rdlc

我需要将注释打印到 rdlc 报告中。由于注释很长，我编写了一个子字符串函数来减小注释的大小。它适用于长度超过 30 的笔记。但它显示长度小于 30 的笔记的错误。所以我决定为 rdlc 报告字段提供 IFF 条件。但它再次显示错误（对于长度小于 30 的音符）。请建议我在这种 IFF 条件下是否有任何问题，否则请建议我为这个问题提供一些替代解决方案。这是我的代码。

```
=IIF(Fields!Notes.Value.ToString().Length() >30,(Fields!Notes.Value.ToString().Substring(0,30)),Fields!Notes.Value) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:52:45.443

你为什么不试试这个：

```
=iif(Len(Fields!Notes.Value)>30,Left(Fields!Notes.Value,30), Fields!Notes.Value) 
```

如果您不确定 Fields!Notes.Value 的数据类型是否为字符串，则只需替换`'Fields!Notes.Value'`为`CStr(Fields!Notes.Value)`到处

# ajax - jQuery UI 对话框不会在 Internet Explorer 中打开

> ID：11449056
> 
> 赞同：0
> 
> 时间：2012-07-12T09:40:58.643
> 
> 标签：ajax, jquery-ui, internet-explorer, dialog

我有一个 jQuery UI 对话框：

```
$("#dialog").dialog({
    modal: true,
    closeOnEscape: false,
    resizable: false,
    autoOpen: false,
    open: function() {
        $(".ui-dialog-titlebar").hide();
    }
}); 
```

我试图在 AJAX 调用之前打开此对话框。它可以在 Firefox 中使用，但在 IE 中它不会打开，除非我`alert`在打开对话框之后放一个 , 。谁能告诉我可能是什么问题？我正在使用以下代码：

```
$("button").click(function() {
    $("#dialog").dialog('open');
    //alert('test'); //if I put this alert, the dialog will open
    $.ajax({
        type: "POST",
        url: "testing.txt",
        async: false,
        dataType: "text",
        success: function(returnText) {
            $("#dialog").dialog('close');
            $("#textarea").text(returnText);
        },
        error: function() {
            $("#dialog").dialog('close');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:28:09.563

由于`open`潜在的动画，事件异步完成，因此可能发生的情况是由于 IE 的 JavaScript 解释缓慢，关闭`success`或`error`回调（也是异步的）中的对话框的代码执行得足够接近 `open`你没有通知对话框曾经被打开。我猜你的 AJAX 调用很快就会完成。

解决此问题的一种方法是将您的 AJAX 调用放在一个`setTimeout`块中。

```
$("button").click(function() {
    $("#dialog").dialog('open');

    setTimeout(function() {
        $.ajax({
            type: "POST",
            url: "testing.txt",
            async: false,
            dataType: "text",
            success: function(returnText) {
                $("#dialog").dialog('close');
                $("#textarea").text(returnText);
            },
            error: function() {
                $("#dialog").dialog('close');
            }
        });
    }, 1);
}); 
```

`$.ajax`这将简单地将允许`open`事件完成的呼叫排队。John Resig 写了一篇很好的文章，说明了为什么这种事情在这里有效 - [http://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T17:42:34.643

解决此问题的另一种方法是将“dialog.open”部分放在 mousedown 事件中，而不是单击。这样，当您将其放入 setTimeout 时，您仍然可以执行 IE(8) 不喜欢的操作，例如下载文件。

# visual-c++ - 可视化控制点 mfc

> ID：11449061
> 
> 赞同：0
> 
> 时间：2012-07-12T09:41:15.110
> 
> 标签：visual-c++, mfc, visualization

我想在我的 mfc 应用程序中显示一条带有一些控制点的曲线，用户可以在其中使用控制点调整曲线。你能给我推荐一些好的图书馆吗？我正在使用 Visual c++ 2008。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:18:08.217

如果您使用 GDI+，您可以只使用[DrawCurve()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms536070%28v=vs.85%29.aspx)函数。

# ruby-on-rails - Rails 自定义控制器动作不保存

> ID：11449073
> 
> 赞同：0
> 
> 时间：2012-07-12T09:41:44.710
> 
> 标签：ruby-on-rails, controller, updates

我有用于在网上商店激活新客户帐户的自定义控制器操作。我有一个模型叫`customer.rb`. 该模型生成一个密钥并向客户发送一个激活链接。该链接被路由到`customers_controller.rb`以下操作：

```
def activate_customer
  @customer = Customer.find(params[:customer_id])
    if @customer.present?
     if @customer.activation_key == params[:activation_key]
       @customer.activated = true
       @customer.save
       redirect_to :cart
     else
       redirect_to :root
     end
    else
     redirect_to :root
    end
end 
```

我第一次尝试没有`@customer.save`但记录没有更新。我之前和之后都提出过，`@customer.activated = true`这一切似乎都很好。唯一的问题是记录没有更新。我还检查了一个可能的`attar_accessible`问题，但不是这样（我`attr_accessible`完全关闭检查）。有任何想法吗？提前谢谢！

*编辑：检查值`@customer.save`，返回`false`...

*编辑：

问题似乎是客户模型上的密码验证。验证如下所示：

```
# Validations
validates_presence_of :title, :country, :zipcode, :city, :street, :number, :first name, :lastname
validates :email, :presence => true, :uniqueness => true, :email => true
validates_confirmation_of :password, :unless => :validate?
validates_presence_of :password 
```

任何想法如何跳过此特定控制器操作的验证？感谢您和我一起思考！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:33:08.543

您可以使用条件验证，这是在这种情况下的最佳做法。

这是关于[http://railscasts.com/episodes/41-conditional-validations的 railscast](http://railscasts.com/episodes/41-conditional-validations)

然后，您可以使用如下代码：

```
attr_accessor :updating_password

validates_confirmation_of :password, :if => should_validate_password?

def should_validate_password?
  updating_password
end 
```

然后，如果您想跳过验证，则需要将 updates_password 设置为 false。

```
@customer.updating_password = false
@customer.save 
```

# iphone - 如何根据触摸创建的形状裁剪图像？

> ID：11449074
> 
> 赞同：1
> 
> 时间：2012-07-12T09:41:47.930
> 
> 标签：iphone, image, image-processing, uiimageview, crop

当用户通过触摸屏幕创建特定形状时，我想裁剪图像。

例如在下图中，当用户触摸并绘制形状（此处为绿色）时，形状内部的图像将被剪切并显示为新的 UIImage ：

![在此处输入图像描述](../Images/bafa80388e9ba9dae66f43fb920cfe83.png)

我知道如何屏蔽图像，也知道如何将图像剪切成矩形，但对此一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:14:28.733

尝试这样的事情，这不是完全相同的问题，但是对这个算法稍作改变应该对你有用！！！

[在图像的不透明部分内绘制边框](https://stackoverflow.com/questions/10820802/draw-border-just-inside-non-transparent-portion-of-image/10820915#10820915)

它没有给出任何平台的确切代码，但给出了如何完成此类任务的数学几何和通用循环算法。

在 iOS 中，您需要使用 CoreGraphics 执行新的图像创建（实际上是像素复制）。

您必须注意的事项。屏幕分辨率到实际图像分辨率。如果图像分辨率不同，那么当您执行数学计算裁剪区域时，从屏幕转换为正在显示的实际背景图像时，裁剪区域可能会增大或缩小。

# javascript - 如何使用 jQuery Validate 插件验证电子邮件

> ID：11449077
> 
> 赞同：1
> 
> 时间：2012-07-12T09:41:52.853
> 
> 标签：javascript, jquery, jquery-validate

在某些情况下，jQuery [Validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)并不适合电子邮件验证。“abc@test.c”（单字母后缀）和“중국어@test.com”（非字母数字）作为有效的电子邮件地址传递。

如何使用 jQuery Validate 插件过滤这两个无效的电子邮件地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:24:33.843

[根据文档](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)，您需要构建自己的自定义方法。

> 添加自定义验证方法。它必须由名称（必须是合法的 javascript 标识符）、基于 javascript 的函数和默认字符串消息组成。
> 
> **论据：**
> 
> **姓名;** String 方法的名称，用于识别和引用它，必须是有效的 javascript 标识符
> 
> **方法;** Callback 实际的方法实现，如果元素有效则返回 true。第一个参数：当前值。第二个参数：经过验证的元素。第三个参数：参数。
> 
> **消息（可选）；**String, Function 要为此方法显示的默认消息。可以是 jQuery.validator.format(value) 创建的函数。如果未定义，则使用已经存在的消息（便于本地化），否则必须定义字段特定的消息。

* * *

以下是`method`我命名的一个习惯`newemail`。现在，它只是使用“电子邮件”验证的默认功能。只需在此函数中编辑正则表达式以满足您的特定需求。

```
jQuery.validator.addMethod("newemail", function(value, element) {
            // contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
            return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value); 
}, "Please enter a valid email address"); 
```

然后`.validate()`像使用任何其他规则一样在内部使用它。

```
rules: {
    InputName: {
        required: true,
        newemail: true
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:33:52.170

这是我使用的解决方案`remote:`：

```
$("#myForm").validate({
    rules: {
        femail: {
            required: true,
            email: true,
            remote: "lib/ajax/checkEmail.php"
        }
    },
    messages: {
        femail: {
            required: 'Please input email',
            email: 'Please input valid email',
            remote: 'This email is duplicated/invalid, please re-input an email'
        }
    },
    submitHandler: function(form) {
        form.submit();
    }
}); 
```

在`checkEmail.php`中，它实现了额外的逻辑来验证特殊情况，然后至少回显`true`或者`false`作为回报。

希望能帮助到你。

# javascript - 选择框：捕获由外部 JavaScript 触发的 onchange 事件？

> ID：11449078
> 
> 赞同：4
> 
> 时间：2012-07-12T09:41:52.967
> 
> 标签：javascript, onchange, drop-down-menu

请仔细阅读标题 - 这不是常见的 onchange 事情。

*网页上有一个选择框。选择框其 selectedIndex 可以通过 javascript、**外部**js 以编程方式更改。*

我希望在索引更改时收到通知（跨浏览器解决方案）。这可能吗？

[考虑 jsfiddle 示例](http://jsfiddle.net/yxmV2/6/)

或 HTML：

```
<select id="mySelect">
    <option>opt 1</option>
    <option>opt 2</option>
    <option>opt 3</option>
</select>​ 
```

JavaScript：

```
// Code I cannot manipulate
var select = document.getElementById("mySelect");
select.selectedIndex = 2; // I would like to be notified now 
```

等待您的见解:-)

更新：

这并没有回答我最初的问题，但使用它我设法完成了我最初想要的（不是帖子的一部分）：

```
select.selectedIndex = 2;
select.onchange(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:07:40.053

Javascript 更改事件需要用户发起的浏览器事件。当 JavaScript 本身触发更改时，它们不起作用。

如果你**真的**想这样做，你应该编写一个函数，`<select>`使用 , 定期轮询 , 的值`setInterval`并进行比较。

```
var selectold =  select.selectedIndex;
setInterval(function(){
    if(selectold != select.selectedIndex)
       {
           console.log("there was a change");
           selectold = select.selectedIndex;

       }
},500); 
```

编辑[小提琴](http://jsfiddle.net/yxmV2/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:13:06.157

我意识到我间接触发了选择框的变化。这使我能够在那之后进行检查.. 不仅和听众一样好，而且它会起作用并且不会那么脏:-)

至少我得到确认没有这样的事件可以听。谢谢你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T10:30:58.773

如果您控制更新 selectedIndex 的代码，您可以向其中注入一个回调，这将为您提供类似事件的行为。

```
/* code that I do not wish/'cannot' change: */
function startSelectScroll(indexChangeCallback) {
    var select = document.getElementById("mySelect");

    var index = 0;
    var myInterval = setInterval( function() { // Change index every 500ms

        index++;
        select.selectedIndex = index % 3;

        indexChangeCallback.call(select);
    }, 500 );

    setTimeout( function() { // Remove automatic change after 3000ms
        clearInterval( myInterval );
        alert(callCount);
    }, 3000 );
}
/* end unmodifiable code */

startSelectScroll(function() {
    callCount++;
});

var callCount = 0; 
```

如果您不控制它，那么您使用的任何框架都应该以相同的方式支持回调。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-12T11:02:04.110

我首先想到的是；

```
function alertMe(theSelect) {
    var mySelectList = document.getElementById(theSelect);  
    var result = mySelectList.options[mySelectList.selectedIndex].value;
    alert(result); // Alerts selected option
} 
```

html:

```
<select id="mySelect" onchange="javascript:alertMe("mySelect")">
    <option value="A"> A text </option>
    <option value="B"> B text </option>
    <option value="C"> C text </option>
<select> 
```

这给出了选定的选项值字段，您还可以获得文本字段，最后将“.value”替换为“.text”..

# c# - 如何发送 midi 控制更改消息

> ID：11449082
> 
> 赞同：2
> 
> 时间：2012-07-12T09:41:58.283
> 
> 标签：c#, midi

我正在尝试向 MIDI 音序器发送控制更改消息。但我真的不明白它是如何工作的。例如，我应该怎么做才能使用连奏踏板（n°68）？或者如果我想使用控制器 n°72 更改声音释放时间？

我试图这样做：

```
MidiTimedMessage msg = new MidiTimedMessage();
uint releaseTimeMessage = (uint)MidiReleaseTime << 16 | (uint)72 << 8 | 0xB0;
msg.Msg = (int)releaseTimeMessage;
msg.SystemTime = sequencerService.Now;
sequencerService.PostMidiMessage(midiOutDevice, msg); 
```

但它不起作用。然而，当尝试使用这个来启用延音踏板时，同样的事情会起作用：

```
uint sustainPedalOn = (uint)127 << 16 | (uint)64 << 8 | 0xB0; 
```

所以我想知道是否有特定的方式来发送和使用控制器，例如声音释放时间？我应该发送一个 noteOn 消息，然后发送我的 CC 消息吗？对面？我都试过了......也许我应该使用除了我的 CC 消息之外的其他东西以使其正常工作？

编辑：好的，我解决了这个问题。它不能工作，因为默认的 windows 合成器 (Microsoft GS Wavetable Synth) 不处理 CC 消息的主要部分。我尝试过使用外部 MIDI 接口，效果很好。

# pygtk - 通过 gtk.Container.add_with_properties 和 gtk.Container.child_set_property 创建/更新标签

> ID：11449087
> 
> 赞同：0
> 
> 时间：2012-07-12T09:42:00.907
> 
> 标签：pygtk

我正在使用 python 制作一个**gtk.window** ，上面放置了大约 50 个**gtk.label**，这些标签需要每 10/15 分钟更新一次。我选择使用单个固定容器来打包它们，为了缩短编码，我将标签的数据分组到一个列表中（列表的每个项目都是一个包含标签文本、x 和 y、字体系列和前景色的子列表）。好吧，我可以使用以下代码轻松放置标签：

```
fix = gtk.Fixed()

for i in range(48):
    lbl = gtk.Label(data[i][0])
    lbl.modify_fg(gtk.STATE_NORMAL, gtk.gdk.color_parse(data[i][1]))    
    lbl.modify_font(pango.FontDescription(data[i][2]))
    fix.put(lbl, data[i][3], data[i][4])

win.add(fix) 
```

但是当我需要更新标签的文本时，问题就出现了，如果我写的话：

```
for i in range(48):
    lbl.set_text(data[i][0]) 
```

什么都没有发生，因为不清楚哪些 data[i][0] 必须写入哪个标签。**所以我认为我可以通过使用gtk.Container.add_with_properties**将标签放入容器和**gtk.Container.child_set_property**进行更新来克服这个问题，但我被卡住了，因为我没有清除它们的用法和我通过谷歌搜索找到的文档很穷。如果我编写以下代码，我已经尝试过：

```
fix = gtk.Fixed()

for i in range(48):
    fix.add_with_properties(gtk.Label(), 'text', data[i][0] , "x", str(data[i][3]), "y", str(data[i][3])) 
```

结果是**“TypeError：容器不支持属性‘text’”** ......所以如果我正在操作容器或其子小部件，我会感到困惑？！？谁能让我清楚**gtk.Container.add_with_properties**和**gtk.Container.child_set_property**的用法？！？**此外，我想知道是否可以通过使用gtk.Container.add_with_properties**为每个标签赋予一种“ID”，以便我以后可以轻松识别和更新，或者还有其他我不知道的方法可以做到这一点？谢谢。

# java - Android Java 修改键盘按键

> ID：11449088
> 
> 赞同：2
> 
> 时间：2012-07-12T09:42:03.250
> 
> 标签：java, android, math, keyboard, key

经过大量搜索后，我找不到有关修改 Android 上某个键给出的值的任何信息。我的应用程序的字段只能是有效的数字值（例如 -1.9）。因此，我没有将其限制为仅用于输入的整数，而是对其进行了更改，以便出现电话键盘，因此用户将无法输入无效字符。

该应用程序需要允许用户为大/小值（例如 5.9E-10）输入“E”。

是否可以修改`space`电话键盘上的按钮以将“E”输出到文本字段并仅禁用该特定页面的符号部分按钮？

这将使输入非常大/小的值并获得更准确的答案变得容易，因为我使用`bigDecimal`. `mathContext`小数位数由近似值自动确定。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:34:45.173

> 是否可以修改电话键盘上的“空格”按钮以将“E”输出到文本字段并仅针对该特定页面禁用符号部分按钮？

仅当您编写自己的输入法编辑器时，并且仅当用户选择切换到您的输入法编辑器时。

或者，不要使用`EditText`，而是将您自己的计算器按钮作为您自己 UI 的一部分。

# jquery - 从 scriptalicious 到 jquery，在 asp.net 中继器中显示/隐藏链接效果

> ID：11449089
> 
> 赞同：0
> 
> 时间：2012-07-12T09:42:03.483
> 
> 标签：jquery, asp.net

在我的博客中，我有一个转发器，包含实际的博客和对该博客的评论。我现在使用 Scriptalicious 对评论使用显示/隐藏效果。但现在我想将其更改为 Jquery。但我遇到了一些麻烦。似乎我必须为每个会产生这种效果的 div 清除一个 jquery 脚本？

这是今天显示/隐藏评论的链接所在的 html（带有 scriptalicious）：

```
<a href="#" onclick="new Effect.Appear('i<%# Eval("id") %>', {duration: 1});return false;">Show comments (<%# CountComments (DataBinder.Eval(Container, "DataItem.id")) %>)</a> | <a href="#" onclick="new Effect.Fade('i<%# Eval("id") %>', {duration: 0.5});return false;">Hide comments</a> 
```

如您所见，我正在使用：`onclick="new Effect.Fade('i<%# Eval("id") %>'`新的 Effect.Fade，传入 id。有人可以给我一个提示，告诉我如何用 Jquery 做到这一点吗？

**更新** 现在它正在工作。我使用了接受的答案中的代码，并做了一些小的调整。我现在使用的链接如下所示：

```
<a href="javascript:void(0);" title="i<%# Eval("id") %>">Vis kommentarer (<%# CountComments (DataBinder.Eval(Container, "DataItem.id")) %>)</a> 
```

还有一个包含评论的 div，如下所示：

```
<div id="i<%# Eval("id") %>" style="display: none;"><%# GetComments (DataBinder.Eval(Container, "DataItem.id")) %></div> 
```

和 Jquery 函数来做魔术：

```
<script type="text/javascript">
$(document).ready(function () {
    $("a:contains('Vis kommentarer')").click(function () {
        $id = $(this).attr('title');
        $('#' + $id + '').show();
        return false;
    })
}); 
```

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:17:35.790

你的意思是这样的吗？

```
$("a:contains('Show comments')").click(function() {
  $id = $(this).attr('id');
  $('#' + id + '').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:58:57.497

函数呢？

```
<a href="#" onclick="show(this,'i<%# Eval("id") %>');">Show comments (<%# CountComments (DataBinder.Eval(Container, "DataItem.id")) %>)</a> | <a href="#" onclick="show(this,'i<%# Eval("id") %>');">Hide comments</a>  
  function show(this, val)
    {
        new Effect.Fade(val, {duration: 0.5});return false;
    } 
```

# javascript - 检查布尔值并将它们转换为对象中的数字

> ID：11449091
> 
> 赞同：1
> 
> 时间：2012-07-12T09:42:05.157
> 
> 标签：javascript

我有一个对象，它对某些键具有**true**和**false**值。我需要找到哪些键具有布尔值并将它们分别转换为 1 和 0，我该怎么做？非常感谢任何帮助或建议。

```
var obj ={
    "serviceid": 123,
    "accountid": 456,
    "name": "Test in progress",
    "number": [
      {'setNumber':true},
      {'setNumber':false},
    ],
    "settings": {
      "playback": false,
      "attachfile": true,
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:43:39.400

`Number`您可以使用或转换布尔值`+ operator`。

```
Number(true);  //=> 1
Number(false); //=> 0
+(true);       //=> 1
+(false);      //=> 0 
```

[基于评论**编辑**
] 您可以`typeof`用来检查一个值是否计算为布尔值：

```
var somebool = true
   ,sombool_isBoolean = /^boolean$/i.test(typeof somebool) //=>true
   ,nobool = 'true'
   ,nobool_isBoolean = /^boolean$/i.test(typeof nobool)    //=>false
; 
```

因此，对于您的反对，您可以执行以下操作：

```
var objnr0 = obj.number[0].setNumber;
obj.number[0].setNumber = /^boolean$/i.test(objnr0) ? +(objnr0) : objnr0; 
```

[**根据**评论编辑2]

在不循环对象的情况下替换对象中的真/假布尔值有点“肮脏的技巧”：

```
var obj2 = JSON.parse(
              JSON.stringify(obj)
                .replace(/:true/gi,':1')
                .replace(/:false/gi,':0')
            ); 
```

# java - GWT 中 flexTable 中的行数

> ID：11449092
> 
> 赞同：1
> 
> 时间：2012-07-12T09:42:05.790
> 
> 标签：java, gwt, gwt2, flextable

我正在学习 GWT

在 flexTable 的第一行中，我添加了组合框、组合框、文本框、添加按钮、删除按钮。

在 addButton 2 行的单击事件时，将使用与第一行相同的组件将其添加到 flexTable。（组合框、组合框、文本框、添加按钮、删除按钮。）

```
private Button getAddbutton() {

        addbutton = new Button("");
        addbutton.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
                int i = flexTable.getRowCount();
                System.out.println(" i " + i);
                i++;
                flexTable.setWidget(i, 0, getPropertyList());
                flexTable.setWidget(i, 1, getConditionList());
                flexTable.setWidget(i, 2, getKeyWord());
                flexTable.setWidget(i, 3, getAddbutton());

                flexTable.setWidget(i, 4, getRemove());
                remove.setStyleName("cmis-Button-removeOn");
                remove.setTitle(""+i);
            }
        });
        addbutton.setSize("25px", "25px");
        addbutton.setStyleName("cmis-Button-Add");

    return addbutton;
} 
```

i 的输出是

```
 i 1
 i 3
 i 5
 i 7 
```

为什么 rowCount 增加了 2，尽管我在 coloumn 中只添加了 4 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:54:33.820

这是因为 flexTable 索引从 0 开始，但是您正在增加行数。所以只需删除 i++。

# .net - .NET 应用程序内存使用情况涉及私有字节与峰值私有字节

> ID：11449093
> 
> 赞同：1
> 
> 时间：2012-07-12T09:42:10.847
> 
> 标签：.net, memory-leaks

我正在测试一个长时间运行的 .NET 应用程序，它与非托管 DLL 交互，并使用 ProcessExplorer 来监视其内存使用情况。

Private Bytes 没有增加并保持在 21-25MB 左右，但我的 Peak Private Bytes 大幅增加 ~ 242MB

峰值私有字节表示什么？应用程序在处理过程中的某个时候需要该数量的内存以满足自己的要求，或者我是否遇到内存泄漏？

我还应该提到虚拟大小约为 160MB

# qt - 堆栈 2 QTableWidgets

> ID：11449099
> 
> 赞同：0
> 
> 时间：2012-07-12T09:42:25.633
> 
> 标签：qt, widget, tabwidget

我目前正在为我创建的游戏做地图编辑器，我对 Qt 有一个小问题。这是我第一次使用它，但我喜欢挑战，我认为这将是一次很棒的体验。

我目前正在使用 Qt Designer 构建我的界面，但我被困在地图部分。事实上，我的地图由 2 层组成：地形和单位/障碍物/植被。

我正在使用 QTableWidget 来包含地形信息，但现在我想在它**上面**堆叠另一个 QTableWidget ，大小完全相同，所以我可以放置我的单位等。但是，我没有找到如何实现这一点在 Qt 设计器上。一旦我创建了一个新的 QTableWidget，它就会在第一个的一侧，而不是在它之上。

我考虑过使用 QStackedWidget，但由于它一次只允许 1 个 Widget 可见，所以它不符合我的希望。

如果有人有一个想法，尽管它可能很小，我将非常感激。

祝大家拥有美好的一天 ！

编辑：以上，我不是指一边……我知道这有点难以解释。如果我们认为我们查看屏幕的轴是 Z，我希望这两个表都是： - 在 X 轴上等效（相同的列数） - 在 Y 轴上等效（相同的行数） - 在不同的Z 轴（一张桌子“更深”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:52:01.683

**注意：这个答案是题外话，因为我误解了这个问题。问题是关于*堆叠小部件但绘制所有小部件*。但是，如果未来的读者想要将 widges 放在*另一个下方*，我将它留在那里。**（有关详细信息，请参阅问题的评论。）

* * *

您可以使用[`QVBoxLayout`](http://qt-project.org/doc/QVBoxLayout.html). 只需选择两个表格小部件，然后在上下文菜单中选择“布局”>“垂直布局”。然后，您应该使用[行延伸](http://qt-project.org/doc/qboxlayout.html#setStretch)来告诉布局小部件应该具有相同的大小。据我所知，只能使用 C++ 代码设置拉伸，而不是从您的 .ui 设计器文件中设置。这可以通过将这两行放在小部件类的构造函数中来完成，就在`ui->setup(this);`：

```
ui->verticalLayout->setStretch(0, 50); //  50%, but the number doesn't have to be
ui->verticalLayout->setStretch(1, 50); //  in percent, so 1 / 1 is the same. 
```

如果我理解正确，您想要一个大的小部件，您的地图编辑器的主小部件，以及下方或侧面的另外两个小部件。如果它们在下面，您可以将它们合二为一`QVBoxLayout`并设置拉伸，例如，设置为 3:1:1，这使得主小部件占据可用高度的 60%，而您的两个表格小部件各占 20%：

```
ui->verticalLayout->setStretch(0, 3);
ui->verticalLayout->setStretch(1, 1);
ui->verticalLayout->setStretch(2, 1); 
```

# java - 两个war文件之间的通信，无需对上下文根进行硬编码

> ID：11449100
> 
> 赞同：2
> 
> 时间：2012-07-12T09:42:37.147
> 
> 标签：java, jakarta-ee, communication-protocol

我有一个耳朵应用程序，它有两个战争文件。

在单击超链接的应用程序中，流程从一个war 文件转到另一个war 文件。在这种情况下，我正在对春季战争的 URL 进行硬编码。有什么办法可以将它定义为变量。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:56:20.180

您可以使用 HttpClient 或 AsyncHttpCLient 库将请求从一个 Web 应用程序发送到另一个 Web 应用程序。关于 AsyncHttpClient 的参考在[http://www.ning.com/code/2010/03/introducing-nings-asynchronous-http-client-library/](http://www.ning.com/code/2010/03/introducing-nings-asynchronous-http-client-library/)中给出。它将使用给定的 URL 参数将请求从一个 WAR 文件发送到另一个文件。

# c++ - 在 Shutting Yard 中处理带括号的表达式

> ID：11449107
> 
> 赞同：1
> 
> 时间：2012-07-12T09:43:05.297
> 
> 标签：c++, loops, code-readability, stl-algorithm, shunting-yard

我有以下手写循环来处理带括号的表达式：

```
while (!punctuators.empty() && punctuators.back().kind != '(')
{
    output.push_back(punctuators.back());
    punctuators.pop_back();
}
if (punctuators.empty())
    throw invalid_expression(") without matching matching (");
punctuators.pop_back(); 
```

（`output`并且`punctuators`都是 type `std::vector<token>`，其中`token`是一个非常简单`struct`的，由 a`char kind`和一个`unsigned value`数据成员组成。）

我想知道从手写循环切换到算法是否会提高可读性：

```
auto p = std::find_if(punctuators.rbegin(), punctuators.rend(),
                      [](token t){ return t.kind == '('; });
if (p == punctuators.rend())
    throw invalid_expression(") without matching matching (");
output.insert(output.end(), punctuators.rbegin(), p);
punctuators.erase(std::prev(p.base()), punctuators.end()); 
```

但不知何故，我觉得这段代码的可读性差了很多，可能是由于使用了反向迭代器，尤其是转换为普通迭代器。有更好的解决方案吗？您是否同意手写循环更具可读性，或者我只是在算法方面还没有看到光明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:06:21.710

你只需要正确的算法。

（未经测试的代码）

```
boost::algorithm::copy_while ( 
    punctuators.rbegin (), punctuators.rend (), 
    std::back_inserter ( output ),
    [](token t){ return t.kind != '('; }); 
```

如果您不使用 boost，则可以`copy_while`相当轻松地编写自己的代码。

算法没有什么神奇之处。你应该养成自己写的习惯。

# android - 刷新 ListView 时的 ProgressDialog

> ID：11449112
> 
> 赞同：0
> 
> 时间：2012-07-12T09:43:14.870
> 
> 标签：android

我有一个由 SimpleAdapter 填充的 ListView，它从 HashMaps 的 ArrayList 中获取值。arraylist 是由一种`load()`从我的站点获取数据的方法构建的。我有一个菜单选项，允许通过再次获取数据并调用来刷新数据，`adapter.notifyDataSetChanged()`它实际上工作正常，更新数组列表并刷新 ListView。现在，建立 http 连接并获取数据需要几秒钟，`load()`所以我想设置一个 ProgressDialog 来通知用户正在进行的过程。我知道我不能将 ProgressDialog 放在 ui 线程上`load()`有效，所以我尝试使用 AsyncTask。它工作正常，在获取新数据并将其传递给适配器时显示对话框，但它也增加了一个问题：ListView 不再刷新显示的项目，除非我将修改后的列表项目滚动到屏幕之外并且返回，然后它会显示新的内容。我该怎么做才能同时拥有 ProgressDialog 和列表内容的刷新？
这是 AsyncTask 中带有 ProgressDialog 的代码（编辑数据但不触发屏幕上的列表刷新）：

```
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.update: {         
        loading.show();  //the ProgressDialog
        AsyncTask<Void, Void, Void> loadingTask = new AsyncTask<Void, Void, Void>() {

            @Override
            protected Void doInBackground(Void... params) {                 
                load(); //fetching data, takes a while
                return null;
            }
            @Override
            protected void onPostExecute(Void result) {                                     
                loading.dismiss();
            }

        };          
        loadingTask.execute();
        adapter.notifyDataSetChanged();         
        return true;
    }
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

这是刷新 ListView 以及后面的数据的代码（但不会让我设置 ProgressDialog）：

```
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.update: {                                                         
        load();
        adapter.notifyDataSetChanged();                     
        return true;
    }
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:44:57.353

只需添加**AsycTask**并从中添加`onPreExecute()`。并 放入**AsyncTask**。_**`show()` `ProgressDialog``adapter.notifyDataSetChanged();``onPostExecute()`**

 ****像，

```
 AsyncTask<Void, Void, Void> loadingTask = new AsyncTask<Void, Void, Void>() {
        @Override
        protected void onPreExecute() {                                     
            loading.show();  //the ProgressDialog
        }

        @Override
        protected Void doInBackground(Void... params) {                 
            load(); //fetching data, takes a while
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {  
          adapter.notifyDataSetChanged();                                        
            loading.dismiss();
        }

    };          
    loadingTask.execute();      
    return true; 
```****

# c# - 如何在 C# 中访问动态对象时向其添加属性

> ID：11449113
> 
> 赞同：1
> 
> 时间：2012-07-12T09:43:16.087
> 
> 标签：c#, dynamic

我想在访问它之前将属性创建到动态对象中。例如，假设有一个对象 X。在 X 上访问一个不存在的属性“SomeProperty”，如下所示，

```
var testProperty = X.SomeProperty; 
```

我想在访问时创建 X.SomeProperty。在 C# 动力学中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:46:58.800

```
public class X : DynamicObject
{
    Dictionary<string, object> dictionary = new Dictionary<string, object>();

    public override bool TryGetMember(
        GetMemberBinder binder, out object result)
    {
        string name = binder.Name.ToLower();

        return dictionary.TryGetValue(name, out result);
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        dictionary[binder.Name.ToLower()] = value;
        return true;
    }
}

dynamic obj = new X();
obj.SomeProperty = "Test";
Console.WriteLine(obj.SomeProperty); 
```

# sql - 计算Oracle中的日期差异

> ID：11449114
> 
> 赞同：0
> 
> 时间：2012-07-12T09:43:18.447
> 
> 标签：sql, oracle, date

我需要计算 Oracle 中两个日期的差异。这不是问题，但有一个条件。我在创建任务时创建了一个时间戳，然后在任务完成时创建了新的时间戳。我需要计算差异，但是：

当任务在同一天创建并完成时，我需要得到差值 = 1（因为他们工作了一天），而当任务昨天开始并在今天完成时，我需要差值 = 2。我希望你了解，如果不向我询问更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:27:08.753

我在这里假设您的日期保存在 DATE 类型的列中。如果是这样，以下应该做你想要的：

```
SELECT TRUNC(END_DATE) - TRUNC(START_DATE) + 1 AS ELAPSED_DAYS
  FROM A_TABLE 
```

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:53:41.490

```
select date2 - date1 + 1 from <tablename> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:55:45.737

```
select MOD(24 * (to_date('2009-07-08 23:00', 'YYYY-MM-DD hh24:mi') 
         - to_date('2009-07-07 22:00', 'YYYY-MM-DD hh24:mi')), 24)+1 diff_days 
   from dual; 
```

## [演示](http://sqlfiddle.com/#!4/c8089/18)

# algorithm - 预测自动完成背后的算法/理论？

> ID：11449115
> 
> 赞同：13
> 
> 时间：2012-07-12T09:43:18.203
> 
> 标签：algorithm, text, autocomplete, nlp, probability

简单的单词自动完成只显示与已经输入的字符匹配的单词列表。但是我想根据单词出现的概率对自动完成列表中的单词进行排序，这取决于之前输入的单词，依赖于文本语料库的统计模型。为此我需要什么算法和数据结构？你能给我一些好的教程的链接吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T10:03:05.587

您不需要自动完成的概率。相反，构建一个[前缀树](https://en.wikipedia.org/wiki/Trie)（又名*trie*），将语料库中的单词作为键，将它们的频率作为值。当你遇到一个部分字符串时，尽可能走远，然后从你到达的点生成所有后缀，并按频率对它们进行排序。

当用户输入一个以前看不见的字符串时，只需将其添加到频率为 1 的 trie 中即可；当用户输入您已经看到的字符串时（可能通过从候选列表中选择它），增加它的频率。

[请注意，您不能使用概率模型进行简单的增量；在最坏的情况下，您必须重新计算模型中的所有概率。]

如果您想深入研究这种算法，我强烈建议您阅读Jurafsky 和 ​​Martin的[*语音和语言处理（第一章）。*](http://www.cs.colorado.edu/~martin/slp.html)它非常详细地处理了语言处理的离散概率。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T09:48:24.433

Peter norvig 有一篇文章[How to Write a Spelling Corrector](http://norvig.com/spell-correct.html)解释了 Google 的*您的意思是...？*使用贝叶斯推理使其有效的功能作品。这是一本很好的读物，应该可以适应自动完成功能。

# python - 如何在cmake的当前目录的所有子目录中生成__init__.py？

> ID：11449117
> 
> 赞同：5
> 
> 时间：2012-07-12T09:43:19.983
> 
> 标签：python, cmake, protocol-buffers

我使用 CMake 的树外构建。我有一个 CMake 自定义命令，可以从原始文件生成 *_pb2.py 文件。由于 proto-files 可能驻留在未知数量的子目录（包命名空间）中，例如`$SRC/package1/package2/file.proto`.，因此构建目录将包含类似`$BLD/package1/package2/file_pb2.py`.

我想从自动生成的 *_pb2.py 文件中隐式地制作包，因此，我想在所有子文件夹（ , 等）中自动生成 __init__.py 文件`$BLD/package1`，`$BLD/package1/package2`然后安装它们。

我怎样才能做到这一点？

*PS*我尝试过[CMake 中的宏：如何获取目录的所有子目录的名称？](https://stackoverflow.com/questions/7787823/cmake-how-to-get-the-name-of-all-subdirectories-of-a-directory)（将**GLOB**更改为**GLOB_RECURSE**）但它只返回包含文件的子目录。我无法`package1`从上面的示例中获取 subdir。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T09:53:55.583

如果您在 *NIX 操作系统（包括 mac）下工作，您可以使用 shell find 命令，例如：

```
ROOT="./"
for DIR in $(find $ROOT -type d); do
    touch $DIR/__init__.py
done 
```

或使用 python 脚本：

```
from os.path import isdir, walk, join

root = "/path/to/project"
finit = '__init__.py'
def visitor(arg, dirname, fnames):
    fnames = [fname for fname in fnames if isdir(fname)]
    # here you could do some additional checks ...
    print "adding %s to : %s" %(finit, dirname)
    with open(join(dirname, finit), 'w') as file_: file_.write('')

walk(root, visitor, None) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:18:01.633

以下内容应为您提供变量中所需的目录列表`AllPaths`：

```
# Get paths to all .py files (relative to build dir)
file(GLOB_RECURSE SubDirs RELATIVE ${CMAKE_BINARY_DIR} "${CMAKE_BINARY_DIR}/*.py")
# Clear the variable AllPaths ready to take the list of results
set(AllPaths)
foreach(SubDir ${SubDirs})
  # Strip the filename from the path
  get_filename_component(SubDir ${SubDir} PATH)
  # Change the path to a semi-colon separated list
  string(REPLACE "/" ";" PathParts ${SubDir})
  # Incrementally rebuild path, appending each partial path to list of results
  set(RebuiltPath ${CMAKE_BINARY_DIR})
  foreach(PathPart ${PathParts})
    set(RebuiltPath "${RebuiltPath}/${PathPart}")
    set(AllPaths ${AllPaths} ${RebuiltPath})
  endforeach()
endforeach()
# Remove duplicates
list(REMOVE_DUPLICATES AllPaths) 
```

# c++ - 用于操作字符串以在 vba 中使用的 c++ dll

> ID：11449121
> 
> 赞同：0
> 
> 时间：2012-07-12T09:43:36.327
> 
> 标签：c++, vba, dll

我是 c++ 的新手，想用 c++ 创建一个 dll，该 dll 将从 excel vba 访问，在 dll 内部我有一个函数，它将字符串作为参数并修改字符串，最后修改后的字符串将用于vba。

再次执行以下步骤：

1.一个带有字符串指针作为参数的函数的dll。

2.vba将空字符串传递给函数。

3.dll会修改或操作字符串。

4.finally修改后的字符串将在vba中使用。

dll里面的函数有点像：

extern "C"_declspec(dllexport) void WINAPI ModifyStr(char* str) { Str = "Hello" } 编译器抛出以下错误“不推荐使用从字符串常量到 char* 的转换”

我通过编写修改了函数

_declspec(dllexport) void WINAPI ModifyStr(string** Str) { *Str = new string("hello"); 这段代码编译得很好，但是当我尝试从 vba 调用函数时导致程序崩溃。请帮助我摆脱这个问题并构建我的 dll 没有任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:07:34.390

From [MSDN](http://msdn.microsoft.com/en-us/library/bb687915.aspx)

> A VBA String is passed as a pointer to a byte-string BSTR structure when passed ByVal, and as a pointer to a pointer when passed ByRef

In your dll you should use `BSTR str = SysAllocString(L"Hello World!");` to allocate the string. COM memory mangement should handle deallocation.

# magento - Magento 中使用 SagePay 的多个送货地址

> ID：11449125
> 
> 赞同：0
> 
> 时间：2012-07-12T09:43:49.280
> 
> 标签：magento, shipping, opayo

我找到了这个解决方案：[http](http://ebizmarts.com/sage-pay) ://ebizmarts.com/sage-pay 然而，多重运输支持是“有限的”，它说“仅支持直接协议（没有 3DS）和服务器（inFrame）协议。” 我不知道这意味着什么，或者问我的开发人员什么！

版本：Magento 1.5.1（下个月将升级到 1.7.1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:50:46.727

Magento 的多地址结账 (MAC) 为每个送货地址创建一个订单，这使得与需要重定向到 3rd 的支付方式集成有点困难。派对网站。这就是对 MAC 的支持有限的原因。

*   Sage Pay Direct 没有 3DS 支票。仅支持“直接”交易，因为无法为 Magento 创建的每个订单重定向到银行网站。您可以使用直接集成，但 Sage Pay SUite Pro 将强制 3D 安全检查为“否”。

*   Sage 支付服务器（inFrame）。此处提供全面支持，包括 3DS 支票，因为付款表格在结帐页面（在 iFrame 中）内打开，所有付款流程均由 Sage Pay 处理。

我希望这有帮助。

伊格纳西奥@ebizmarts。

# hibernate - 在 JPA 中使用 CURRENT_DATE 和 Hibernate 作为 JPA-Provider

> ID：11449127
> 
> 赞同：1
> 
> 时间：2012-07-12T09:43:53.227
> 
> 标签：hibernate, jpa, jpql

JPA 将 CURRENT_DATE 定义为函数。当我在 JPQL 语句中使用 CURRENT_DATE 时，底层的 JPA-Provider Hibernate 不会解析这个，只接受 current_date() 以独立于 DBMS。

在我看来，CURRENT_DATE 应该在每个 JPA-Provider 中实现，因为这是 JPA 中的一个基本功能。我认为这是 Hibernate 中的一个错误。

例子：

```
SELECT o FROM Objects o WHERE o.validFrom < CURRENT_DATE 
```

此语句与 MySQL 作为 DBMS 一起使用，但在 MSSQL 中失败，因为 CURRENT_DATE 未被 Hibernate 解析，并且 CURRENT_DATE 被发送到 MSSQL 无法理解的 DBMS。使用 current_date() 一切正常，但这不是普通的 JPQL。

请给我一些提示，如果这是一个休眠错误或其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T18:57:24.957

SELECT o FROM Objects o WHERE o.validFrom < ?

并设置初始化为当前日期的 java.util.Date 参数？

# c# - C# CRM m:n 关系

> ID：11449130
> 
> 赞同：2
> 
> 时间：2012-07-12T09:43:59.253
> 
> 标签：c#, many-to-many, dynamics-crm, crm

在我的 CRM 数据库中，我有两个实体组 A 和 B，它们通过 m:n 关系链接。实体 A 有很多实例，每个实例都链接到实体 B 的多个实例。对于特定实体，假设是实体 A 的一个实例，我如何获取实体 B 的所有链接实例？

```
var service = new OrganizationService(_connection);

var retrieveRequest = new RetrieveMultipleRequest();

retrieveRequest.Query = new QueryExpression
    {
        EntityName = "new_A",
        ColumnSet = new ColumnSet(true)
    }; 

var crmReponse = (RetrieveMultipleResponse)service.Execute(retrieveRequest); 
```

在调试模式下查看 crmResponse 时，我看到了实体 A 的所有实例，但在 RelatedInstances 属性中看不到任何内容。我究竟做错了什么？

编辑：得到第一个答案后，我修改了我的代码如下：

```
var linkEntities = new LinkEntity { 

    LinkFromEntityName = "new_A",
    LinkToEntityName = "new_B"

};

var retrieveRequest = new RetrieveMultipleRequest();

var query = new QueryExpression
{
    EntityName = "new_A",
    ColumnSet = new ColumnSet(true)
};

query.LinkEntities.Add(linkEntities);

retrieveRequest.Query = query;

var crmReponse = (RetrieveMultipleResponse)service.Execute(retrieveRequest); 
```

不过，现在我得到一个错误：

> new_customer_system_machine_type 和 new_customer_system_machine_check 之间不存在系统多对多关系。如果尝试通过自定义多对多关系进行链接，请确保提供 from 和 to 属性。

但是，当我创建多对多关系时，我没有指定任何属性名称，它只是实体之间的。我究竟做错了什么？

另外，我的`RetrieveMultipleRequest`班级没有财产`ReturnDynamicEntities`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:01:58.510

您需要指定 LinkFromAttributeName 和 LinkToAttributeName。这些将是包含匹配键值的 from 和 to 实体的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:42:33.453

[你可以在这篇博文](http://andreaswijayablog.blogspot.com/2011/02/crm-entity-relationship-many-to-many-nn.html)中找到答案。其中描述了两种方法：
- [RetrieveMultipleRequest](http://msdn.microsoft.com/en-us/library/bb929303.aspx)与[LinkEntity](http://msdn.microsoft.com/en-us/library/bb890621.aspx)类；
-[获取](http://msdn.microsoft.com/en-us/library/bb928434.aspx)

# android - Android扩展列表项

> ID：11449131
> 
> 赞同：0
> 
> 时间：2012-07-12T09:44:02.123
> 
> 标签：android

ExpandableListView中groupItem展开时如何改变其颜色？并在不展开时变为白色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:56:15.043

在您的可扩展列表适配器中，您有一个名为 getGroupView() 的方法，通过使用该方法您可以做到这一点。

```
 public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
                ViewGroup parent) {

      //Here you can initialize your view
      if(isExpanded){
        // set color for expanded item.
      }else{
       // set color for non expanded item.
      }
  } 
```

# visual-studio-2010 - 如何在代理后面克隆 codeplex mercurial 存储库？

> ID：11449133
> 
> 赞同：2
> 
> 时间：2012-07-12T09:44:08.503
> 
> 标签：visual-studio-2010, mercurial, proxy, tortoisehg, codeplex

我正在使用 TortoiseHG 2.4.2 版，并且使用 firefox 或 Internet Explorer 我可以很好地浏览以下 codeplex 项目。

[https://hg.codeplex.com/oxyplot](https://hg.codeplex.com/oxyplot)

问题是我无法在本地计算机上克隆存储库。最初，我曾经遇到过这样的错误，

> URLError: [Errno 10061] 由于目标机器主动拒绝，无法建立连接

一些 google-fu 之后（几个小时后），我发现我需要为 tortoiseHg 设置代理设置，这很烦人，它不使用默认的 Windows 设置。[这个问题帮助](https://stackoverflow.com/questions/8161815/when-trying-to-connect-through-a-proxy-server-tortoisehg-for-windows-says-ssl-e)我指出了正确的方向。这是我遵循的步骤，

1.  打开 TortoiseHg 工作台
2.  选择文件 > 设置
3.  按右上角附近的“编辑文件”按钮打开文件编辑器

在文件中我添加了这些行，

```
[http_proxy]
host = 111.11.11.11:80
user = xxxxxxx
passwd = xxxxxxx 
```

（由于显而易见的原因，未显示实际值）

现在，当我尝试使用上述链接克隆存储库时，出现此错误，

> SSL 错误：未知协议

我现在开始沮丧地撕扯头发！有谁知道我接下来应该做什么？谷歌搜索这个问题会产生关于 bitbucket、超时......等的链接——对我来说是希腊语和拉丁语。

编辑 1：我睡在这个问题上，我唯一意识到的是代理是非常定制的东西。不过，如果有人有任何我可以尝试的提示/方向，将不胜感激。对于它的价值，我使用 Visual Studio 2010 作为我的 IDE。有什么我可以从那里尝试的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T04:56:17.870

令人惊讶的是，Visual Studio 2010 Professional 正是我正在寻找的答案。或者更确切地说，VS2010 + [HgSccPackage](http://visualstudiogallery.msdn.microsoft.com/9bc074fa-9e1f-4ce2-a75d-b90e65f7475a/)扩展。对于那些不知道 HgScc 是 VS 的扩展，它提供了原生 Mercurial 支持。

一直困扰着我的是我可以使用我的网络浏览器浏览 mercurial 存储库，但不能用 TortoiseHG 克隆它。在我发布了我之前对该问题的更新后，我一时兴起尝试从 VS2010 浏览 repo。令人惊讶的是，我能够做到！那么，为什么不尝试直接从 IDE 克隆 repo 呢？所以我做到了，奇迹般的奇迹，它奏效了！:)

没有麻烦的代理设置或任何废话。安装扩展后，从菜单栏中选择，

Mercurial > 克隆

在选项中，我刚刚粘贴了 Codeplex 所描述的项目的源路径，填写了我的 Codeplex 授权信息，最后是我希望将项目复制到的目标。

有效！

事后看来，我确信这行得通的原因是 hgscc 扩展使用默认的 VS2010（或者更确切地说是 Internet Explorer）连接选项，而不是它自己的 TortoiseHg。这意味着 VisualHG 扩展将失败，因为它只是一个围绕 tortoiseHg 的包装器。我还没有测试过，但如果有人这样做，你能发表评论吗？

# perl - POD：如何插入标签？

> ID：11449134
> 
> 赞同：0
> 
> 时间：2012-07-12T09:44:16.267
> 
> 标签：perl, perl-pod

如何在每个选项卡之前插入两个选项卡，`Description`以便选项卡显示在`html`-output 中？

```
=pod

=head2 Head 2

My list:

=over

=item 

First Description A

=item 

Second Description B

=item 

Third Description C

=back

=cut 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:04:45.150

你的意思是如何制作定义列表？

尝试：

```
=over

=item First

Description A

=item Second

Description B

=item Third

Description C

=back 
```

这将格式化定义列表，其中“First”、“Second”和“Third”作为术语，“Description A”、“Description B”和“Description C”作为您的描述。

如果您需要更改 search.cpan.org 或 metacpan.org 上定义列表的格式，则不能。POD 是一种语义文档语言，并没有让模块作者对布局和排版进行太多控制。网站所有者是有权通过 CSS 调整排版等的人。

# php - curl的并行任务

> ID：11449147
> 
> 赞同：1
> 
> 时间：2012-07-12T09:45:01.977
> 
> 标签：php

```
$nodes = array($url1, $url2, $url3);
$node_count = count($nodes);

$curl_arr = array();
$master = curl_multi_init();

for ($i = 0; $i < $node_count; $i++) {
    $url = $nodes[$i];
    $curl_arr[$i] = curl_init($url);
    curl_setopt($curl_arr[$i], CURLOPT_RETURNTRANSFER, true);
    curl_multi_add_handle($master, $curl_arr[$i]);
}
do {
    curl_multi_exec($master, $running);
} while ($running > 0);

for ($i = 0; $i < $node_count; $i++) {
    $results[] = curl_multi_getcontent($curl_arr[$i]);
}
print_r($results);
//Is this part really parallel ?

for ($i = 0; $i < $node_count; $i++) {

    $results[] = curl_multi_getcontent($curl_arr[$i]);
    #now i want to perform one task again parallely with all url .

    $var = 1; # it will increase till condition is satisfied
    #in task lets say i want to to change all url to  $url1%20something$var
    #parallely with  others url also $url2%20something$var , $url3%20something$var

    # lets say for $var=6
    #when condition after fetching for $res=curl_multi_get_content($url1%20something$var), $res==true is satisfied , it will stop for one url .
    //till for others it will continue .
    #insort task is loop with parallel . possible ? how ?

} 
```

insort 任务是并行的循环。可能的 ？如何 ？我在代码中解释了我想要的。. 在为每个 url 获取内容后的最后一个 for 循环中，我想再次为所有 url 并行执行一些任务？

那可能吗 ？请问谁能告诉我如何使用 curl ？我尝试了一些，但失败了。

# javascript - 如何在 Windows 上离线使用 JSHint？

> ID：11449148
> 
> 赞同：-4
> 
> 时间：2012-07-12T09:45:12.840
> 
> 标签：javascript, windows, jshint

JSHint 内置在 PHPStorm 中，但我正在寻找一个独立版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:59:51.563

Phpstorm 有一个内置的 JSHint 版本：

```
Settings ¬ Javascript ¬ Code Quality Tools ¬ JSHINT ¬ Enable 
```

# python - Kubuntu 12.04 上的 Visual Python 2.7 分段故障核心转储

> ID：11449152
> 
> 赞同：1
> 
> 时间：2012-07-12T09:45:25.977
> 
> 标签：python, segmentation-fault, coredump, kubuntu, vpython

我在使用 vpython 时遇到了一些麻烦。我以前在 Ubuntu 10.4 上使用过它，但我将它更新到 Kubuntu 12.4。在 Ubuntu 10.4 上 vPython 运行良好，但现在在 Kubuntu 12.4 上我遇到了一些麻烦..

我用 Moun 包管理器安装了包 python-visual，当我尝试运行一个简单的代码时，我得到了这个：

```
Python 2.7.3 (default, Apr 20 2012, 22:44:07)  [GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from visual import *
>>> sphere() 
Segmentation fault (core dumped) 
```

在使用 Ubuntu 10.4 的同一台计算机上，我从来没有遇到过 vpython 的任何问题。

我做了：

1) [http://ubuntuforums.org/showthread.php?t=1386688](http://ubuntuforums.org/showthread.php?t=1386688) 2) sudo apt-get install libgtkglextmm-x11-1.2-dev

但它没有帮助......

# android - iOS 和 android 使用相同的编程语言

> ID：11449155
> 
> 赞同：0
> 
> 时间：2012-07-12T09:45:38.410
> 
> 标签：android, ios

我想知道我是否可以使用相同的编程语言同时为 android、IOS、Linux 编写代码。也许C？我正在做一个项目，有人可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:52:28.827

C 由两者共享，但它非常复杂，需要对平台和 API 的大量深入了解，而且 UI 不能用 C 创建，因为它们在如何显示数据/控件方面存在巨大差异。结果将是一个用于前端的 C 库和 java/objective-c。

如果您必须使用 1 个代码库，我建议您使用第三方混合解决方案，例如 phonegap，它本质上是一个包含在本机 webview 中的网站，其中包含一些本机功能的挂钩。或 Appcelerators Titan，您使用 javascript 编写应用程序，允许您使用那里的库来访问本机控件/API。

我以前用过Titanium，感觉还不错，android 时不时会出问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:58:44.263

您可以使用一些基于单声道的解决方案。[以Xamarin](http://xamarin.com/)为例。或者您可以自己将 Mono 嵌入到您的应用程序中。您将无法创建接口或访问某些特定于设备的功能，但您可以在 c# 中编写业务逻辑并在任何地方使用它。

# html - 如何使用 html5 在 ipad 上播放流媒体视频

> ID：11449156
> 
> 赞同：0
> 
> 时间：2012-07-12T09:45:38.887
> 
> 标签：html, video, streaming

我想在我的 ipad 上播放流媒体视频，为此我编写了这段代码，但这不起作用。

请建议我缺少什么

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
    <video id="my_video_1" controls>
         <source src="http://vimeo.com/45578271" type='video/mp4'>
    </video>

</body>
</html> 
```

我为它创建了一个示例页面 os jsbin [http://jsbin.com/anevug](http://jsbin.com/anevug)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:59:11.987

您提供的链接返回一个`html`文件，而不是视频文件。
该`src`属性需要视频文件的直接链接，例如：

```
<source src="http://example.com/video.mp4" type='video/mp4'> 
```

当我打开你的 Vimeo 链接时：

```
http://vimeo.com/45578271 
```

实际视频下载自：

```
http://player.vimeo.com/play_redirect?clip_id=45578271&sig=ce8ba1a31d3d05b9f1df5672eab81d5f&time=1342087202&quality=sd&codecs=H264,VP8,VP6&type=moogaloop_local&embed_location= 
```

但是，每次访问 Vimeo 时，此地址都会更改。
Vimeo 不允许[热链接](http://en.wikipedia.org/wiki/Inline_linking)他们的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:04:54.623

首先， http: [//vimeo.com/45578271](http://vimeo.com/45578271)不是视频文件，它是指向另一个网站的链接。

其次，HTML5 本身不支持流式传输。您必须使用流协议（例如 RTP/RTSP/RTCP）或外部应用程序来支持它，例如某种流媒体服务器。

一种猜测是使用 Flash Streaming Server。 [http://www.adobe.com/products/flashmediastreaming/](http://www.adobe.com/products/flashmediastreaming/)

我自己对此不太了解，但是对于您最有可能的需求以及我对这些服务器的了解，这将是一个很好的查看和用作比较产品之一的产品（您应该正在研究其他人）。

*“Adobe® Flash® Media Streaming Server 3 软件是使用渐进式下载交付视频的经济实惠的下一步。它提供了显着改进的性能、更安全的流媒体、实时流媒体增强、行业标准 H.264 和 HE-AAC 支持，以及使用 Adob​​e Flash Lite™ 3 和 Adob​​e Media Player 软件将流传输到手机。”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-09T08:29:30.277

刚刚提到...与这里所说的相反，如果您使用其中一个高级帐户，vimeo 允许盗链自己的视频。但是如果你这样做，你必须运行你自己的响应脚本来选择最好的视频源（网络速度，视口大小）。

[![在此处输入图像描述](../Images/e497aed216cb0740258266c579902d0a.png)](https://i.stack.imgur.com/cTTxf.jpg)

# web-services - 使用 wso2 esb 调用安全的 Web 服务

> ID：11449159
> 
> 赞同：0
> 
> 时间：2012-07-12T09:46:00.497
> 
> 标签：web-services, wso2, ws-security, wso2esb

我正在尝试通过 WSO2 ESB 访问安全的 Web 服务。

我收到来自 Web 服务的请求，使用序列，应用 XSLT 中介，根据需要构造请求以到达端点。我可以通过创建对不安全端点的请求来成功地做到这一点。

当使用各种安全策略（例如：X509 用户名令牌等）保护端点时如何构造请求

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:15:28.547

看看这个样本。您需要在端点级别保护传出请求消息。请看这里[1]。

[1] [http://wso2.org/project/esb/java/4.0.3/docs/samples/qos_mediation_samples.html#Sample100](http://wso2.org/project/esb/java/4.0.3/docs/samples/qos_mediation_samples.html#Sample100)

# php - 无限数量的表获得生产

> ID：11449160
> 
> 赞同：3
> 
> 时间：2012-07-12T09:46:02.193
> 
> 标签：php

我有这个代码：

```
for ($i = 0; $i <= 47; $i++)
{
    echo "<tr>";
    for ($i = 0; $i <= 11; $i++)
    {
        echo "<td class=\"tableContents color3\"></td>";
    }
    echo "</tr>";
} 
```

当我执行它时，它只是继续执行，而它应该在 47 个循环后停止执行。关于什么是错的以及实现相同目标的更好方法的任何想法？

谢谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T09:47:29.500

`$i`是的-您在内部循环中覆盖。改为使用`$j`或其他不同的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:47:58.300

```
<?php 

for ($i=0;$i<=47;$i++) {
    echo "<tr>";
    for ($j=0;$j<=11;$j++) {
        echo "<td class=\"tableContents color3\"></td>";
    }
    echo "</tr>";
}

?> 
```

使用 2 个不同的索引变量（在本例中为 i 和 j）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:47:50.280

`$i`您每次都在内部循环中重置。
在外循环中它永远不会增加到 47。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T09:49:27.673

您在两个循环中使用相同的变量，所以它永远不会是 47。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T09:54:56.327

```
<? for($i=0;$i<=47;$i++):?>
    <tr>
    <? for ($j=0;$j<=11;$j++):?>
        <td class="tableContents color3"></td>
    <? endfor;?>
    </tr>
<? endfor;?> 
```

# javascript - 使用javascript在div中的多行字符串

> ID：11449161
> 
> 赞同：6
> 
> 时间：2012-07-12T09:46:07.827
> 
> 标签：javascript, html

我创建了一个多行字符串，如下所示“

```
var str1 = document.getElementById('text1');
var str2 = document.getElementById('text2');
var str = str1.value + "\n" + str2.value; 
```

我现在想将此字符串添加到我在弹出窗口中创建的 div 中，如下所示：

```
myWindow=window.open('','Full_text','width=600,height=600');
myWindow.document.write('<div id="div1" style="position: absolute; left: 10px; width: 580px; top: 30px; height: 550px; overflow: auto;">' + str + '</div>'); 
```

但是我在 div 中没有得到多行字符串。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T09:48:29.393

如果没有此 CSS 属性，则不会在 HTML 中呈现换行符：

```
white-space: pre; 
```

您可以尝试替换`str`为：

```
var str = str1.value + "<br/>\n" + str2.value; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T09:50:04.003

在 HTML 中渲染时不会出现换行符，如果你只需要换行符，请使用`<br>`而不是`\n`如果你想保留空格、制表符，你应该尝试用`<pre>string goes here.</pre>`标签包裹字符串。

# java-me - LWUIT 标签的点击事件

> ID：11449170
> 
> 赞同：2
> 
> 时间：2012-07-12T09:46:23.183
> 
> 标签：java-me, lwuit

我是 LWUIT 平台的新手。我正在开发一个应用程序，我想将点击事件添加到标签和容器中。

有没有可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T12:10:20.253

不，`Label`不适用于可点击事件。将 a`Button`与 a 的一个方面一起使用`Label`。这对你来说会更容易。`Containers`可能有点击事件，但会更难。

# html - 在中绘制 SVG : 最简单的方法是什么？

> ID：11449174
> 
> 赞同：2
> 
> 时间：2012-07-12T09:46:31.047
> 
> 标签：html, canvas, svg, drawimage

我正在尝试在画布元素上绘制 SVG 图像。我发现的一些来源建议我应该使用一个特殊的库来将 SVG 数据转换为`<canvas>`笔画，而另一些来源则说我可以使用`drawImage()`带有 SVG 图像的画布上的调用来绘制它。

首先，我使用该`canvg`库在画布上绘制我的 SVG，但我认为它功能太丰富，对于我的简单需求来说太重了。但是，在我的应用程序中使用简单的`drawImage`调用似乎不起作用：什么都没有显示。如果我用 PNG 图像切换 SVG 的资源 URL，它会显示得很好。怎么了？我是否做错了什么，或者不再支持在画布上绘制 SVG？

我已经在 Chrome 21、22-canary 和 Opera 中尝试过。

我的代码（在 CoffeeScript 中）：

```
ctx = @canvas.getContext '2d'
ctx.clearRect 0, 0, @canvas.width, @canvas.height
ctx.drawImg @image, 0, 0, @canvas.width, @canvas.height 
```

如果`@image`指向 PNG，而不是 SVG，则有效。

# jquery - 如何访问由 jquery 创建的 ul 元素

> ID：11449175
> 
> 赞同：1
> 
> 时间：2012-07-12T09:46:33.450
> 
> 标签：jquery, jquery-selectors

我有一些 jquery 逻辑，下面是代码

```
$(document).ready(function() {
    $('<ul class="className"><\/ul>').insertBefore('.divClassName');
    $.each(jsArray, function(key, value) {
        $('<li><input class="dynamicFilterInput" type="checkbox" checked="checked" value="' + key + '" id="filterID' + key + '" /><label for="filterID' + key + '"> ' + value + ' <\/label><\/li>').appendTo('ul.afilters');
    });
}); 
```

上面的代码是动态的`<ul><li></li>...</ul>`，然后我有ajax调用，完成后我需要更新该`ul`列表，

我有`ul`如下定义的功能

```
$('.ULclassName input').click(function() {
    alert("aaaaaaaaaaa");
}); 
```

页面加载时可以访问此功能，但是在我更新 ul 列表并单击复选框时我的 ajax 调用之后，没有任何反应，我看不到任何警报，

如何访问`$('.ULclassName input').click( function() {});`？

**编辑：**这是`complete`我的 ajax 调用中的回调逻辑

```
complete: function(){
$('ul.className').hide();

$('<ul class="className"><\/ul>').insertBefore('.divClassName');
    $.each(jsArray, function(key, value) {
        $('<li><input class="dynamicFilterInput" type="checkbox" checked="checked" value="' + key + '" id="filterID' + key + '" /><label for="filterID' + key + '"> ' + value + ' <\/label><\/li>').appendTo('ul.afilters');
    });

} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:50:18.390

您将需要使用 jQuery`.on()`功能。

可以在此处的 jQuery 手册中找到更具体的信息：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

它可以通过多种方式调用，具体取决于您使用的是绑定、委托还是实时。

```
// Bind
$('.ULclassName input').on( "click", function(){
    alert("aaaaaaaaaaa");
});

//Delegate
$(".ULclassName").on("click", "input", function(){
    alert("aaaaaaaaaaa");
});

//Live
$( document ).on( "click", ".ULclassName input", function() {
    alert("aaaaaaaaaaa");
} ); 
```

在 jQuery < 1.7 中，这些以前是这样使用的：

```
// Bind
$( ".ULclassName input" ).bind( "click", function( e ) {} ); 

// Live 
$( ".ULclassName input" ).live( "click", function( e ) {} );

// Delegate
$( ".ULclassName" ).delegate( "input", "click", function( e ) {} ); 
```

我想你可能想把它用于 LIVE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:50:35.687

您需要使用 live Try 进行绑定：

```
$('.ULclassName input').live("click", function() {
    alert("aaaaaaaaaaa");
}); 
```

与`.on`：

```
$(document).on("click", '.ULclassName input', function() {
    alert("aaaaaaaaaaa");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:52:04.180

使用委托怎么样？

```
$('body').delegate('.ULclassName input', 'click', function(){
    alert("aaaaaaaaaaa");
}); 
```

# android - SherlockListFragment 缓存颜色提示

> ID：11449178
> 
> 赞同：2
> 
> 时间：2012-07-12T09:46:39.970
> 
> 标签：android, actionbarsherlock

我使用 FragmentTabsPager 示例在我的应用程序上实现视图寻呼机。我正在使用 SherlockListFragment 和 asynctask 来获取数据并设置适配器。列表出现在片段上，但问题是我无法设置列表 android:cachecolorhint，它是白色的（我想是因为主题）。我怎样才能改变这个？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T17:03:25.687

排序后，刚刚使用 getListView().setCacheColorHint(0); 在我的 onactivitycreated 方法中

# java - 如何使用 Selenium WebDriver 和 Java 关闭特定窗口？

> ID：11449179
> 
> 赞同：25
> 
> 时间：2012-07-12T09:46:40.127
> 
> 标签：java, selenium, selenium-webdriver, webdriver, window

我使用 Selenium WebDriver。我打开第一页然后打开第二页 - 执行一些操作并返回第一页。在我想关闭第二页之前，我使用 command `driver.close();`，但它关闭了第一页而不是第二页。如何让 Selenium 关闭特定窗口？

部分代码

```
String HandleBefore = driver.getWindowHandle();

 driver.findElement(By.xpath("...")).click();
 for (String twohandle : driver.getWindowHandles()) {
        driver.switchTo().window(twohandle);
    }       
 driver.findElement(By.linkText("001")).click();
 driver.close(); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-12T10:13:56.297

```
 String base = driver.getWindowHandle();

    Set <String> set = driver.getWindowHandles();

    set.remove(base);
    assert set.size()==1;

    driver.switchTo().window(set.toArray(new String[0]));

    driver.close();
    driver.switchTo().window(base); 
```

这对我有用...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-01T09:33:12.460

在 Python 中

```
default_handle = driver.current_window_handle
handles = list(driver.window_handles)
assert len(handles) > 1

handles.remove(default_handle)
assert len(handles) > 0

driver.switch_to_window(handles[0])
# do your stuffs
driver.close()
driver.switch_to_window(default_handle) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-15T14:24:14.880

您可以通过标题或标识该窗口的特定唯一元素来关闭特定窗口。

```
private void SwitchTabandClose()
{
    Set <String> windows = driver.getWindowHandles();
    String mainwindow = driver.getWindowHandle();

    for (String handle: windows)
    {
        driver.switchTo().window(handle);
        System.out.println("switched to "+driver.getTitle()+"  Window");
        String pagetitle = driver.getTitle();
        if(pagetitle.equalsIgnoreCase("XYZ Title"))
        {
            driver.close();
            System.out.println("Closed the  '"+pagetitle+"' Tab now ...");
        }
    }

    driver.switchTo().window(mainwindow);
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-21T17:38:20.237

Ramnarayan 的解决方案效果很好。对其进行了一些修改以实现可重用性：

```
public static String switchToWindowByTitle(WebDriver driver, String windowTitle) {
  Set<String> handles = driver.getWindowHandles();
  String currentHandle = driver.getWindowHandle();
  for (String handle : handles) {
    driver.switchTo().window(handle);
    if (windowTitle.equalsIgnoreCase(driver.getTitle())) {
      break;
    }
  }

  return currentHandle;
}

// How to use method
String currentHandle = SeleniumUtil.switchToWindowByTitle(driver, WINDOW_TITLE);
driver.close(); // Close WINDOW_TITLE page or do other things
driver.switchTo().window(currentHandle); // Return to current page 
```

# sql - 事务性 DDL 选项

> ID：11449180
> 
> 赞同：0
> 
> 时间：2012-07-12T09:46:44.633
> 
> 标签：sql, database

我只使用过 MySQL，自从发现 DDL 执行隐式提交后，我正在寻找一种在 MySQL 中遵守它的解决方案。

万一 MySQL 使用一些 hacky 方法也无法管理它，一个可行的选择是切换 SQL 系统。是否有任何允许开箱即用的事务 DDL 或者至少比 MySQL 更易于设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:50:13.520

我认为没有任何方法可以使 MySQL 中的 DDL 事务。

PostgreSQL 具有完全事务性 DDL，我个人发现它的设置和运行与 MySQL 一样简单（实际上我发现 MySQL 使用起来更复杂，因为它的 SQL 方言具有所有限制）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:00:33.950

根据[此文档](http://wiki.postgresql.org/wiki/Transactional_DDL_in_PostgreSQL%3a_A_Competitive_Analysis)，PostgreSQL、DB2、Sybase、Informix 和 Firebird 支持事务 DDL，在某些情况下支持 SQL Server。Oracle 自动提交每个 DDL 语句，但有一些额外的“版本控制”机制。

你到底想达到什么目的？可能有比事务 DDL 更好的方法。

# xml - XSL：使用模板匹配的虚假输出

> ID：11449183
> 
> 赞同：1
> 
> 时间：2012-07-12T09:46:56.420
> 
> 标签：xml, xslt, transform

我有一个用于创建 xHTML 片段的 XSL 样式表。XML 包含大量信息，我只想转换一个特定的部分，我这样匹配（注意这是我的顶级/第一个匹配）：

```
<xsl:template match="root/SystemInfo/Errors"> 
```

但是，在我看到预期的输出`1001`被写出之前，这很有效。经过进一步检查，这是我匹配的 xpath 之前的各种标签的数据`"root/SystemInfo/Errors"`。我能做些什么来防止这种情况发生？

示例 xml：

```
<?xml version="1.0"?>
<root>
    <Settings>
        <Enabled>1</Enabled>
        <Mode1>0</Mode1>
        <Mode2>0</Mode2>
        <Limit>1</Limit>
    </Settings>
    <SystemInfo>
        <Errors>
            <NOCONNECTION>1</NOCONNECTION>
        </Errors>
    </SystemInfo>
</root> 
```

[此处设置](http://www.xmlplayground.com/7u8bns)XML Playground以显示效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:17:56.347

添加

```
<xsl:template match="text()"/> 
```

覆盖默认模板输出文本节点或确保只处理您感兴趣的内容

```
<xsl:template match="/">
  <xsl:apply-templates select="root/SystemInfo/Errors"/>
</xsl:template> 
```

# ios - UIScrollView 上的 UIView 菜单

> ID：11449186
> 
> 赞同：0
> 
> 时间：2012-07-12T09:46:59.817
> 
> 标签：ios, uiview, uiscrollview

好的，这应该是一个简单的任务，但它一直让我发疯。

我想要实现的只是一个 UIScrollView 显示在屏幕侧面和底部的静态透明工具栏后面。该结构当前设置为滚动视图（UIScrollView 的子类）和叠加层（UIView 的子类）都是 RootViewController 的子视图。

```
scrollView = [[EMDrawScrollView alloc]initWithFrame:CGRectMake(0, 0, winSize.width, winSize.height)];
scrollView.userInteractionEnabled = YES;
[self.view addSubview:scrollView]; 

overlay = [[EMDrawOverlayView alloc]initWithFrame:CGRectMake(0, 0, winSize.width, winSize.height)];
overlay.userInteractionEnabled = NO;
[self.view addSubview:overlay]; 
```

问题是如果我启用overlay.userInteractionEnabled，所有的触摸都会进入图层并且无法进入scrollView。但是，如果我关闭用户交互，scrollView 可以正常工作，但我无法与叠加层进行交互。

关于处理触摸，我使用 RootViewController 收集它们并将它们发送到正确的对象，如下所示：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *t1 = [[[event allTouches]allObjects]objectAtIndex:0];
    CGPoint loc = [t1 locationInView:self.view];
    if (CGRectContainsPoint(overlay.rightToolbar.frame, loc)) {
        overlayTouched = YES;
        [overlay touchesBegan:touches withEvent:event];  
    }  else {
        overlayTouched = NO;
        [scrollView touchesBegan:touches withEvent:event];
    }
} 
```

我有一种感觉，一个解决方法是将工具栏设置为单独的 UIView，并将它们作为子视图添加到视图控制器，这样覆盖就不会占据整个屏幕，但如果有另一种方法，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:04:33.943

好的....看起来这个问题没有一个简单的答案，所以我已经解决了这个问题，按照我在问题中所说的做，并将每个覆盖添加为 UIView，其帧大小仅为其超级视图的大小。

这最终效果很好，因为我能够根据它所在的视图检测 touchesBegan 触摸，并且 touchesMoved 和 touchesEnd 保留在该视图中，这让我对用户交互有很大的控制权。

# wpf - 将列表（结构）链接到 DataGrid

> ID：11449188
> 
> 赞同：0
> 
> 时间：2012-07-12T09:47:02.590
> 
> 标签：wpf, vb.net, datagrid

我有以下结构

```
Public Structure matrixblock
  Public name As String
  Public firstReference As List
  Public secondReference As List
End Structure 
```

我将一堆这些结构保存在另一个列表中：

```
dim result as List(of matrixblock) 
```

我想将此列表绑定到 DataGrid，列中应为：

*   第一栏：名称
*   第二列：firstReference.Count
*   第三列：secondReference.Count

有人可以帮我设置吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:55:13.740

如果直接绑定 matrixblock 结构，如果将任何项目添加到内部列表，绑定的计数属性将不会更新。您最好将其设为一个类，并实现 INotifyPropertyChanged 接口，并向您的类添加两个新属性，它们代表您列表的计数属性。

但是，如果您这样做了，仍然需要处理了解列表计数何时更改、何时将项目添加或删除到列表中的逻辑。你可以利用 ObservableCollections 来解决这个问题。

实际上，无论如何您都不应该直接绑定结构或类，而应该使用 MVVM 模式，并拥有一个 ViewModel 来公开您希望绑定到数据网格的属性。在 google 上进行快速搜索将为您指明 MVVM 模式的正确方向。

# arrays - 从 JSON 数组中取出对象

> ID：11449191
> 
> 赞同：0
> 
> 时间：2012-07-12T09:47:08.660
> 
> 标签：arrays, json, oauth, fetch, tumblr

我正在尝试在 JSON 查询中选择特定对象。我已经对其进行了解码，尽管我花了几个小时寻找答案，但我无法为这种特定情况确定一个答案。我想从博客响应中选择 URL，但是我无法通过数组。

```
 $oauth->fetch("http://api.tumblr.com/v2/user/info");                                                                                                                   
 $json = json_decode($oauth->getLastResponse());                                                                                                                                               
 $url = $json->response->user->blogs;                                                        
 $url1 = array($url->url);    //This line doesn't give me the URL- I'm getting Array ( [0] => )                                                              
 print_r($url1); 
```

当我没有数组部分时的输出给了我：

```
Array ( [0] => stdClass Object ( [name] => 12748784 [url] => http://12748784.tumblr.com/ [followers] => 0 [primary] => 1 [title] => Untitled [description] => [admin] => 1 [updated] => 1341883193 [posts] => 1 [drafts] => 0 [messages] => 4 [queue] => 0 [ask] => 1 [ask_anon] => [tweet] => N [facebook] => N [facebook_opengraph_enabled] => N [type] => public ) ) ) ) ) 
```

感谢你给与我的帮助。我因搜索而筋疲力尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:44:12.960

根据 Tumblr 文档，`blogs`是一个对象数组。因此，`array($url->url)`没有任何意义。它应该`$url1 = $url[0]->url`在你的代码中，对我来说，这看起来很可怕。

我会做更多这样的事情。

```
$blogs = $json->response->user->blogs;
$urls = array();
foreach ($blogs as $object) {
    $urls[] = $object->url;
} 
```

这样您就可以从对象数组中获取所有博客网址。这有意义吗？

# java - 在按钮按下时定义 listModel

> ID：11449193
> 
> 赞同：0
> 
> 时间：2012-07-12T09:47:10.623
> 
> 标签：java, swing, jdbc, jlist

所以我正在制作一个包含这段代码的程序

```
final ListModel listModel = new DefaultListModel();
JButton btnBuscar = new JButton("Buscar");
btnBuscar.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        listModel = MySQL("SELECT * FROM catalogos WHERE id = '" +
                           searchField.getText() +
                           "' OR name LIKE '%" +
                           searchField.getText() +
                            "%' OR keywords LIKE '%" +
                           searchField.getText() + "%'", "SELECT");             
    }
});

btnBuscar.setBounds(336, 11, 89, 23);
searchPanel.add(btnBuscar);

JScrollPane scrollPane = new JScrollPane();
scrollPane.setBounds(10, 44, 316, 185);
searchPanel.add(scrollPane);
JList list = new JList(listModel);
scrollPane.setViewportView(list); 
```

如您所见，我创建了一个 ListModel 变量，然后想在按下按钮时使用它。MySQL 函数返回一个 listModel。

然后我想创建一个列表并将列表模型中的元素提供给它。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:33:32.813

*   请阅读[JDBC(TM) 数据库访问](http://docs.oracle.com/javase/tutorial/jdbc/index.html)

*   尝试[示例](http://java2s.com/Code/SQL/CatalogSQL.htm)

例如快捷方式

```
 try {
        String sqlSyntax = "SELECT * FROM ........";
        Statement stmt = myDbConnection.createStatement();
        ResultSet rsts = stmt.executeQuery(sqlSyntax);
        while (rsts.next()) {
            final String str = rsts.getString(1); // or another data types
            SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                    listModel.add(str.trim());
                }
            });
        }
    } catch (SQLException ex) {
        // exeption handling
    } finally {
        try {
            rsts.close();
            stmt.close();
        } catch (SQLException ex) {
            // not important  
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:40:02.143

除了 SQL 问题之外，您还试图重新分配一个`final`变量。您应该创建`listModel`一个字段（实例变量）而不是最终局部变量，以便您的 actionListener 可以访问*和*更改它。

代替

```
public class YourClassName {
  public ? yourMethodName() {
    final ListModel listModel = new DefaultListMode();
    JButton btnBuscar = new JButton("Buscar");
    ... 
```

你会写

```
public class YourClassName {
  private ListModel listModel = new DefaultListModel();
  public ? yourMethodName() {
    JButton btnBuscar = ... 
```

# ios - 如何用 ARC 制作 UIBlockButton 套装？

> ID：11449194
> 
> 赞同：0
> 
> 时间：2012-07-12T09:47:12.387
> 
> 标签：ios, uibutton, objective-c-blocks

我正在使用[这篇文章](https://stackoverflow.com/questions/3908003/uibutton-block-equivalent-to-addtargetactionforcontrolevents-method)`UIBlockButton`中的代码：

```
typedef void (^ActionBlock)();

@interface UIBlockButton : UIButton {
  ActionBlock _actionBlock;
}

-(void) handleControlEvent:(UIControlEvents)event 
                 withBlock:(ActionBlock) action;

@implementation UIBlockButton

-(void) handleControlEvent:(UIControlEvents)event 
                 withBlock:(ActionBlock) action
{
  _actionBlock = Block_copy(action);
  [self addTarget:self action:@selector(callActionBlock:) forControlEvents:event];
}

-(void) callActionBlock:(id)sender{
  _actionBlock();
}

-(void) dealloc{
  Block_release(_actionBlock);
  [super dealloc];
}
@end 
```

但是我将代码更改为 ARC 下，如何更改代码以确保一切正常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:58:13.177

标题：

```
@interface UIBlockButton : UIButton

- (void) handleControlEvent: (UIControlEvents) event withBlock: (dispatch_block_t) action;

@end 
```

执行：

```
@interface UIBlockButton ()
@property(copy) dispatch_block_t actionBlock;
@end

@implementation UIBlockButton
@synthesize actionBlock;

- (void) handleControlEvent: (UIControlEvents) event withBlock: (dispatch_block_t) action
{
    [self setActionBlock:action];
    [self addTarget:self action:@selector(callActionBlock:) forControlEvents:event];
}

- (void) callActionBlock: (id) sender
{
    if (actionBlock) actionBlock();
}

@end 
```

但请注意，多次调用`handleControlEvent:withBlock:`将覆盖您的块，使用此实现，您不能对不同的事件有不同的操作。此外，您可能应该为该类使用不同的前缀，而不是`UI`防止与 Apple 代码的潜在冲突。

# orbeon - Orbeon 4.0.0.m6：如何为表单生成器设置默认语言？

> ID：11449195
> 
> 赞同：0
> 
> 时间：2012-07-12T09:47:15.693
> 
> 标签：orbeon

我正在将我的代码从 Orbeon 3.9 升级到 4.0.0.m6 。默认情况下，我想成为德语的表单构建器，对于 3.9，我删除了所有翻译，`src/resources/apps/fr/i18n/resources.xml`并`src/resources/forms/orbeon/builder/form/resources.xml`添加了德语翻译。这似乎不再适用于 4.0，它抱怨缺少翻译（我看到类似的错误消息`empty sequence is not allowed for format-message`）。

我尝试将以下行添加到我的属性中，但这也无济于事：

```
<property as="xs:string" name="oxf.fr.default-language.*.*" value="de"/>
<property as="xs:string" name="oxf.fr.available-languages.*.*" value="de"/> 
```

据我所知，表单构建器仍在尝试寻找英文翻译，尽管只有德文翻译存在。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T16:55:49.363

我找到了解决方案！您需要设置此属性：

```
<property
    as="xs:string"
    name="oxf.fr.available-languages.orbeon.builder"
    value="de"/> 
```

用通配符设置是不够的：

```
<property
    as="xs:string"
    name="oxf.fr.available-languages.*.*"
    value="de"/> 
```

因为 Orbeon Forms 已经为此属性提供了默认值：

```
<property
    as="xs:string"
    name="oxf.fr.available-languages.orbeon.builder"
    value="en fr"/> 
```

因为通配符比更具体的属性弱，`oxf.fr.available-languages.orbeon.builder`所以需要明确指定。

有了这个，您甚至可能不需要以下属性：

```
<property
     as="xs:string"
     name="oxf.fr.default-language.orbeon.builder"
     value="de"/> 
```

另一方面，它不疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:57:24.360

恕我直言，问题是由 Iacco 的 src/resources/forms/orbeon/builder/form/resources.xml 中的一些冒犯性字符代码引起的。我已经在 git://gist.github.com/3304742 上上传了一个修改后的版本，它对我来说很好（使用 Orbeon 4.0.0.m7）。

谢谢你，Iacco，分享你的翻译！我添加了一些（也做了一些修改）。

# ios - UITextView 和 UIView 的相对定位

> ID：11449199
> 
> 赞同：1
> 
> 时间：2012-07-12T09:47:21.757
> 
> 标签：ios, xcode, uiview, storyboard, uitextview

我有一个带有静态文本的 UITextView 和一个带有其他内容的 UIView，它们在情节提要中的边距约为 10px。

当方向改变时，它们都会水平调整自己的大小，但是由于 UIView 不会向上移动，所以边距会变得更宽。

我尝试了不同的自动调整大小设置，但无法正确定位它们。这可能是菜鸟问题，但有没有办法让它们在 html 中表现得像“div”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:41:16.633

不确定你想要什么，但你可以创建一个设置标签和视图框架的方法，并从 willAutorotate 调用它。您必须找到纵向和横向所需的帧，并在旋转时调用该方法。此外，从 ViewDidLoad 调用相同的方法来进行标签和视图的初始设置。希望这可以帮助！

# android - 如何在 AndEngine 中的两个活动之间将多个精灵作为单个精灵传递

> ID：11449205
> 
> 赞同：0
> 
> 时间：2012-07-12T09:47:50.220
> 
> 标签：android, andengine

我有一个背景图像，上面放置了一张桌子（精灵）。在桌面精灵上放置了鲜花。我想让所有这些精灵成为一个单一的精灵，然后传递给下一个活动。可能吗？如果是这样，如何/？> 如果不是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:49:36.460

将您要发送的所有精灵存储在 Sprite 数组 (Sprite[]) 中，如果您愿意，也可以存储在列表中。然后通过在意图上调用 putExtra(String name, Object object) 将结果数组添加到用于启动下一个活动的意图中。然后你可以在下一个活动中抓住它。

有关更多信息，请参阅：[如何在 Android 上将对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

# c++ - c++11统一初始化不适用于clang++

> ID：11449210
> 
> 赞同：4
> 
> 时间：2012-07-12T09:47:58.627
> 
> 标签：c++, c++11, clang

[我从这个维基百科页面](http://en.wikipedia.org/wiki/C++11#Uniform_initialization)复制了以下示例：

```
struct BasicStruct {
    int x;
    double y;
};

struct AltStruct {
    AltStruct(int x, double y) : x_{x}, y_{y} {}

private:
    int x_;
    double y_;
};

BasicStruct var1{5, 3.2};
AltStruct var2{2, 4.3};

int main (int argc, char const *argv[])
{
    return 0;
} 
```

然后我尝试用

```
clang++ -Wall -std=c++11 test.cpp 
```

但我收到此错误：

```
test.cpp:17:11: error: non-aggregate type 'AltStruct' cannot be initialized with
      an initializer list
AltStruct var2{2, 4.3};
          ^   ~~~~~~~~
1 error generated. 
```

我的clang版本`clang++ --version`是

```
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix 
```

这个例子不应该工作吗？也许clang还不是完全兼容c++11？

这是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T12:02:33.760

提示实际上在这里：

```
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn)
                                                                   ^~~~~~ 
```

这意味着它不是正确的 3.1 版本，而是介于 3.0 和 3.1 之间。

对统一初始化的支持是在这两个版本之间的某个地方实现的，因此 Apple 的版本可能完全不支持或仅部分支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:12:41.817

> 错误：非聚合类型“AltStruct”不能用初始化列表初始化

这绝对是错误的，请参阅 8.5.4 列表初始化 [dcl.init.list] §3：

> 类型 T 的对象或引用的列表初始化定义如下：
> 
> *   如果 T 是聚合，则执行聚合初始化
> *   [...]
> *   否则，**如果 T 是类类型，则考虑构造函数**

并且由于`AltStruct`有一个构造函数采用`int`and `double`，因此应该编译并具有与（直接初始化）`AltStruct var2{2, 4.3};`相同的语义。`AltStruct var2(2, 4.3);`

# java - 如何防止 Map 中的空值和 bean 中的空字段通过 Jackson 序列化

> ID：11449211
> 
> 赞同：59
> 
> 时间：2012-07-12T09:47:59.563
> 
> 标签：java, json, jackson

我有`Map<String,Foo> foosMap`一个我想通过 Jackson 序列化的 aa。现在我想在序列化过程中进行以下两个设置：

1.  Map 可以有很多空值和空键，我不希望空值被序列化。
2.  对于所有正在序列化的 Foo，我不想序列化 Foo 中引用的空对象。

实现这一目标的最佳方法是什么？我在我的项目中使用 jackson-core1.9 和 jackson-mapper1.9 jars。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-07-13T06:04:05.933

如果更改要序列化的原始`Map`数据结构以更好地表示要序列化的实际值是合理的，那可能是一种不错的方法，这可能会减少必要的 Jackson 配置量。例如`null`，如果可能，请在调用 Jackson 之前删除关键条目。那就是说...

* * *

要禁止序列化`Map`具有空值的条目：

**杰克逊 2.9 之前**

您仍然可以使用`WRITE_NULL_MAP_VALUES`，但请注意它已移至[`SerializationFeature`](http://fasterxml.github.com/jackson-databind/javadoc/2.5/com/fasterxml/jackson/databind/SerializationFeature.html)：

```
mapper.configure(SerializationFeature.WRITE_NULL_MAP_VALUES, false); 
```

**自从杰克逊 2.9**

已`WRITE_NULL_MAP_VALUES`弃用，您可以使用以下等效项：

```
mapper.setDefaultPropertyInclusion(
   JsonInclude.Value.construct(Include.ALWAYS, Include.NON_NULL)) 
```

* * *

要禁止序列化具有空值的属性，您可以[直接](http://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonInclude.html)[配置`ObjectMapper`](http://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonInclude.html)，或使用[`@JsonInclude`](http://fasterxml.github.com/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonInclude.html)注解：

```
mapper.setSerializationInclusion(Include.NON_NULL); 
```

或者：

```
@JsonInclude(Include.NON_NULL)
class Foo
{
  public String bar;

  Foo(String bar)
  {
    this.bar = bar;
  }
} 
```

* * *

据我所知，为了处理空`Map`键，一些自定义序列化是必要的。

将键序列化为空字符串的简单方法`null`（包括前面提到的两个配置的完整示例）：

```
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import com.fasterxml.jackson.annotation.JsonInclude.Include;
import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonSerializer;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.SerializerProvider;

public class JacksonFoo
{
  public static void main(String[] args) throws Exception
  {
    Map<String, Foo> foos = new HashMap<String, Foo>();
    foos.put("foo1", new Foo("foo1"));
    foos.put("foo2", new Foo(null));
    foos.put("foo3", null);
    foos.put(null, new Foo("foo4"));

    // System.out.println(new ObjectMapper().writeValueAsString(foos));
    // Exception: Null key for a Map not allowed in JSON (use a converting NullKeySerializer?)

    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.WRITE_NULL_MAP_VALUES, false);
    mapper.setSerializationInclusion(Include.NON_NULL);
    mapper.getSerializerProvider().setNullKeySerializer(new MyNullKeySerializer());
    System.out.println(mapper.writeValueAsString(foos));
    // output: 
    // {"":{"bar":"foo4"},"foo2":{},"foo1":{"bar":"foo1"}}
  }
}

class MyNullKeySerializer extends JsonSerializer<Object>
{
  @Override
  public void serialize(Object nullKey, JsonGenerator jsonGenerator, SerializerProvider unused) 
      throws IOException, JsonProcessingException
  {
    jsonGenerator.writeFieldName("");
  }
}

class Foo
{
  public String bar;

  Foo(String bar)
  {
    this.bar = bar;
  }
} 
```

要禁止`Map`使用键序列化条目`null`，需要进一步的自定义序列化处理。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-20T14:10:25.100

对于 Jackson 版本 < 2.0，在被序列化的类上使用这个注解：

```
@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-04T07:57:35.037

答案似乎有点老了，我所做的是使用这个映射器来转换`MAP`

> ```
>  ObjectMapper mapper = new ObjectMapper().configure(SerializationConfig.Feature.WRITE_NULL_MAP_VALUES, false); 
> ```

一个简单的`Map`：

> ```
>  Map<String, Object> user = new HashMap<String,Object>();
>             user.put( "id",  teklif.getAccount().getId() );
>             user.put( "fname", teklif.getAccount().getFname());
>             user.put( "lname", teklif.getAccount().getLname());
>             user.put( "email", teklif.getAccount().getEmail());
>             user.put( "test", null); 
> ```

例如像这样使用它：

> ```
>  String json = mapper.writeValueAsString(user); 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T07:20:08.160

我的解决方案，希望帮助
自定义 ObjectMapper 和配置到 spring xml（注册消息转换器）

```
public class PyResponseConfigObjectMapper extends ObjectMapper {
public PyResponseConfigObjectMapper() {
    disable(SerializationFeature.WRITE_NULL_MAP_VALUES); //map no_null
    setSerializationInclusion(JsonInclude.Include.NON_NULL); // bean no_null
} 
```

}

# java - android.database.CursorIndexOutOfBoundsException：请求索引-1，在android中的sqlitedatabse中大小为1

> ID：11449212
> 
> 赞同：0
> 
> 时间：2012-07-12T09:48:03.783
> 
> 标签：java, android

我的数据库中有这样的查询：

```
Cursor c= ourDB.rawQuery("SELECT SUM(odometer) AS odometer FROM tripmileagetable WHERE car='abdul' AND date LIKE '2012-07%'", null);
        if(c.getCount()<=0){
            return 0;

        }else{

            int sum= c.getInt(0);
            Log.i("Sum of odometer", ""+sum);
            return sum;

        } 
```

它给了我这个例外。如果我在其他部分写这个：

```
int sum= c.getColumnIndex("odometer");
            Log.i("Sum of odometer", ""+sum);
            return sum; 
```

然后返回 0，但是当我输入 0 时，它给了我异常，我无法找出我的错。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:50:02.573

您错过了`c.moveToFirst();`这就是您的光标给出异常的原因，因为默认情况下它指向索引-1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:54:16.457

一些建议但很方便：

1.  在开始使用光标之前，我会检查它是否为空
2.  将光标移动到第一个索引
3.  而不是提到 c.getInt(0); ，我会使用 c.getInt(c.getColumnIndex("FirstColumnName")));

例如：

```
if (cursor != null) {
    if (cur.moveToFirst()) {
        do {
            temp.add(cur.getString(cur.getColumnIndex("FirstColumnName"))); // "FirstColumnName" is the field name(column) of the Table                 
        } while (cur.moveToNext());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:49:49.390

您应该首先检查光标是否有任何元素并将其移动到第一个索引。在这种情况下，您的数据库没有返回任何结果。

```
if (cursor.moveToFirst()) {
 int sum= c.getInt(0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T10:03:34.357

你可以试试这个

```
cursor.moveToFirst();

while(cursor.moveToNext() )
{
   // YOUR CODE HERE
} 
```

# numpy - 为等高线图 sagemath 创建网格和插值 (x,y,z)

> ID：11449214
> 
> 赞同：1
> 
> 时间：2012-07-12T09:48:17.637
> 
> 标签：numpy, scipy, interpolation, contour, sage

!我有 (x,y,z) 形式的值。通过创建一个 list_plot3d 图，我可以清楚地看到它们的间距不是很均匀。它们通常在 xy 平面上形成 3 到 5 个点的小“斑点”。因此，为了使插值和最终的“轮廓”图更好，或者我应该说更平滑（？），我是否必须创建一个矩形网格（如棋盘上的正方形），以便数据块以某种方式“平滑”？我知道这对某些人来说可能是微不足道的，但我是第一次尝试这个，我有点挣扎。我一直在查看像 scipy.interplate.interp2d 这样的 scipy 包，但最后生成的图表非常糟糕。对于像我这样的业余爱好者来说，也许是一个关于 sagemath 中 2d 插值的简短教程？一些忠告？谢谢你。

**编辑：**

[https://docs.google.com/file/d/0Bxv8ab9PeMQVUFhBYWlldU9ib0E/edit?pli=1](https://docs.google.com/file/d/0Bxv8ab9PeMQVUFhBYWlldU9ib0E/edit?pli=1)

这主要是它与此消息一起生成的图表类型：

```
Warning:     No more knots can be added because the number of B-spline
coefficients
    already exceeds the number of data points m. Probably causes:
either
    s or m too small. (fp>s)
    kx,ky=3,3 nx,ny=17,20 m=200 fp=4696.972223 s=0.000000 
```

要获取此图，我只需运行以下命令：

```
f_interpolation = scipy.interpolate.interp2d(*zip(*matrix(C)),kind='cubic')
               plot_interpolation = contour_plot(lambda x,y:
                   f_interpolation(x,y)[0], (22.419,22.439),(37.06,37.08) ,cmap='jet', contours=numpy.arange(0,1400,100), colorbar=True)

               plot_all = plot_interpolation

               plot_all.show(axes_labels=["m", "m"]) 
```

矩阵（c）可以是一个巨大的矩阵，如 10000 X 3 甚至更像 1000000 x 3。即使数据较少，如我现在附上的图片，矩阵（C）只有 200 x 3 的情况下，坏图的问题仍然存在. 这就是为什么我开始认为除了程序可能出现故障之外，我使用此命令的方法可能完全错误，因此我有理由寻求有关使用网格的建议，而不仅仅是“将我的数据投入到命令中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T15:17:51.470

我在使用 scipy.interpolate.interp2d 函数时遇到了类似的问题。我的理解是，问题的出现是因为 interp1d/interp2d 和相关函数使用旧的 FITPACK 包装进行基础计算。我能够使用样条函数解决与您类似的问题，该函数依赖于更新的 FITPACK 包装。可以识别样条函数，因为它们的名称中似乎都有大写字母[http://docs.scipy.org/doc/scipy/reference/interpolate.html](http://docs.scipy.org/doc/scipy/reference/interpolate.html)。在 scipy 安装中，这些较新的函数似乎位于 scipy/interpolate/fitpack2.py 中，而使用旧包装的函数位于 fitpack.py 中。

出于您的目的， RectBivariateSpline 是我相信您想要的。下面是一些用于实现 RectBivariateSpline 的示例代码：

```
import numpy as np
from scipy import interpolate

# Generate unevenly spaced x/y data for axes
npoints = 25
maxaxis = 100
x = (np.random.rand(npoints)*maxaxis) - maxaxis/2.
y = (np.random.rand(npoints)*maxaxis) - maxaxis/2.
xsort = np.sort(x)
ysort = np.sort(y)

# Generate the z-data, which first requires converting
# x/y data into grids
xg, yg = np.meshgrid(xsort,ysort)
z = xg**2 - yg**2

# Generate the interpolated, evenly spaced data
# Note that the min/max of x/y isn't necessarily 0 and 100 since
# randomly chosen points were used. If we want to avoid extrapolation,
# the explicit min/max must be found
interppoints = 100
xinterp = np.linspace(xsort[0],xsort[-1],interppoints)
yinterp = np.linspace(ysort[0],ysort[-1],interppoints)

# Generate the kernel that will be used for interpolation
# Note that the default version uses three coefficients for
# interpolation (i.e. parabolic, a*x**2 + b*x +c). Higher order
# interpolation can be used by setting kx and ky to larger 
# integers, i.e. interpolate.RectBivariateSpline(xsort,ysort,z,kx=5,ky=5)
kernel = interpolate.RectBivariateSpline(xsort,ysort,z)

# Now calculate the linear, interpolated data
zinterp = kernel(xinterp, yinterp) 
```

# java - 生成 json 时可以让 MOXy 重命名元素吗？

> ID：11449219
> 
> 赞同：1
> 
> 时间：2012-07-12T09:48:37.967
> 
> 标签：java, json, jaxb, eclipselink, moxy

从通用 JAXB 模型生成的 xml 可以是以下形式

```
<ipi-list><ipi>1001</ipi><ipi>1002</ipi></ipi-list> 
```

因为在 json 中我们有数组，我们不需要两个元素，所以通过使用 MOXy 的 oxml 扩展，我可以展平输出以给出

```
"ipi" : [ "1001", "1002" ], 
```

但是因为 ipi 现在指的是一系列事物，所以我希望将其称为**ipis**而不是**ipi**

```
"ipis" : [ "1001", "1002" ], 
```

有没有办法让 MOXy 重命名一个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:40:05.367

您可以使用[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的外部映射文档来调整 XML 或 JSON 表示的映射。

**IPIList**

下面是一个带有 JAXB 注释的域类，它与您问题中的 XML 表示相匹配：

```
package forum11449219;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="ipi-list")
public class IPIList {

    private List<String> list = new ArrayList<String>();

    @XmlElement(name="ipi")
    public List<String> getList() {
        return list;
    }

    public void setList(List<String> list) {
        this.list = list;
    }

} 
```

**oxm.xml**

我们可以使用 MOXy 的外部映射文档来修改`list`属性映射到 JSON 的方式。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11449219">
    <java-types>
        <java-type name="IPIList">
            <java-attributes>
                <xml-element java-attribute="list" name="ipis"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供者，您需要包含一个`jaxb.properties`在与您的域模型相同的包中调用的文件，其中包含以下条目（请参阅 参考资料）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

以下演示代码显示了如何在创建`JAXBContext`.

```
package forum11449219;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        IPIList ipiList = new IPIList();
        ipiList.getList().add("1001");
        ipiList.getList().add("1002");

        // XML
        JAXBContext jc = JAXBContext.newInstance(IPIList.class);
        Marshaller xmkMarshaller = jc.createMarshaller();
        xmkMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        xmkMarshaller.marshal(ipiList, System.out);

        // JSON
        Map<String, Object> properties = new HashMap<String, Object>(3);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum11449219/oxm.xml");
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jsonJC = JAXBContext.newInstance(new Class[] {IPIList.class}, properties);
        Marshaller jsonMarshaller = jsonJC.createMarshaller();
        jsonMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        jsonMarshaller.marshal(ipiList, System.out);
    }

} 
```

**输出**

这是运行演示代码的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<ipi-list>
   <ipi>1001</ipi>
   <ipi>1002</ipi>
</ipi-list>
{
   "ipis" : [ "1001", "1002" ]
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)
*   [http://blog.bdoughan.com/2012/04/extending-jaxb-representing-metadata-as.html](http://blog.bdoughan.com/2012/04/extending-jaxb-representing-metadata-as.html)
*   [http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html](http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html)

# sql-server-2008 - 如何检查 mssql 中的日期范围以获取纪元日期时间

> ID：11449222
> 
> 赞同：0
> 
> 时间：2012-07-12T09:48:53.620
> 
> 标签：sql-server-2008, sql-server-2005

在其中一张表中，日期列值如下所示

```
 date
25052008112228
26052008062717 
```

表名是事务

我尝试使用下面的查询，但它的抛出错误

```
select * from transaction where date between '2012-01-06' and '2012-06-30'

select * from transaction where date between '2012/01/06' and '2012/06/30' 
```

给我一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:30:36.793

问题是 [date] 列不包含将自动转换为适当`datetime`值的格式的日期 - 它甚至不包含*受支持*的格式值。因此，您只能使用字符串操作来切碎文本：

```
declare @Transactions table (TDate char(14))
insert into @Transactions (TDate) values
('25052008112228'),
('26052008062717')

select CONVERT(datetime,
    SUBSTRING(TDate,5,4) + '-' +
    SUBSTRING(TDate,3,2) + '-' +
    SUBSTRING(TDate,1,2) + 'T' +
    SUBSTRING(TDate,9,2) + ':' +
    SUBSTRING(TDate,11,2) + ':' +
    SUBSTRING(TDate,13,2))
from
    @Transactions 
```

结果：

```
2008-05-25 11:22:28.000
2008-05-26 06:27:17.000 
```

`CONVERT/SUBSTRING`如果您需要经常执行这种转换，您可以将这些操作包装到 UDF 中。当然，理想的做法是更改列定义以存储真正的`datetime`值——当人们将它们视为文本时，几乎所有`datetime`问题都会出现。

（注意，我已经重命名了表和列，因为使用保留字通常是个坏主意）

* * *

您的查询可能类似于：

```
;with converted as (
     select *,CONVERT(datetime,
            SUBSTRING([Date],5,4) + '-' +
            SUBSTRING([Date],3,2) + '-' +
        SUBSTRING([Date],1,2) + 'T' +
        SUBSTRING([Date],9,2) + ':' +
        SUBSTRING([Date],11,2) + ':' +
        SUBSTRING([Date],13,2)) as GenuineDate
     from [Transaction]
)
select * from converted where GenuineDate between '20120106' and '20120630' 
```

（请注意，我还将最终查询中的日期文字也更改为安全格式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:09:47.217

-- asp时间戳

```
 select  * from [transaction] where 
    cast(SUBSTRING([date],5,4) + '-' + SUBSTRING([date],3,2) + '-' +
    SUBSTRING([date],1,2) + ' ' + SUBSTRING([date],9,2) + 
    ':' + SUBSTRING([date],11,2) + ':' +
    SUBSTRING([date],13,2) as datetime)
between '2008-05-26' and  '2012-01-06' 
```

--unix 纪元时间

```
 select * from [transaction] where  [date] 
 between DATEDIFF( SECOND, '01-01-1970 00:00:00', '2012-01-06' ) 
 and DATEDIFF( SECOND, '01-01-1970 00:00:00', '2012-06-30') 
```

# ajax - DotNetOpenAuth - 如何添加 AJAX 样式的 OpenID 选择器控件

> ID：11449224
> 
> 赞同：2
> 
> 时间：2012-07-12T09:49:09.323
> 
> 标签：ajax, asp.net-mvc-3, openid, dotnetopenauth

我在 C# 中有一个 MVC 3 Web 应用程序，我从 NuGet 安装了 DotNetOpenAuth 库

```
PM> Install-Package DotNetOpenAuth 
```

[下载页面](http://www.dotnetopenauth.net/)显示的是`AJAX-style OpenID Selector control is included`，但我找不到关于它在哪里以及如何在视图上安装它的说明。

你能指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:40:15.223

我认为这意味着 Webforms 控件……与 MVC 无关。

稍微窥探了一下，我发现了这个例子：[https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Creating-an-openid-relying-party-（以编程方式）](https://github.com/DotNetOpenAuth/DotNetOpenAuth/wiki/Creating-an-openid-relying-party-(programatically)) （向下滚动到 MVC 标头）。

*更新：*更新了断开的链接。

# python - 每个值多个键

> ID：11449232
> 
> 赞同：37
> 
> 时间：2012-07-12T09:49:37.983
> 
> 标签：python, python-3.x, python-2.7

是否可以在 Python 字典中为每个值分配多个键。一种可能的解决方案是为每个键分配值：

```
dict = {'k1':'v1', 'k2':'v1', 'k3':'v1', 'k4':'v2'} 
```

但这不是内存效率，因为我的数据文件大于 2 GB。否则，您可以制作字典键的字典：

```
key_dic = {'k1':'k1', 'k2':'k1', 'k3':'k1', 'k4':'k4'}
dict = {'k1':'v1', 'k4':'v2'}
main_key = key_dict['k2']
value = dict[main_key] 
```

这也非常耗费时间和精力，因为我必须浏览整个字典/文件两次。还有其他简单且内置的 Python 解决方案吗？

注意：我的字典值不是简单的字符串（如问题'v1'，'v2'）而是复杂的对象（包含不同的其他字典/列表等，无法腌制它们）

注意：问题似乎类似于[如何可以我对同一个字典值同时使用键和索引？](https://stackoverflow.com/questions/6164973/how-can-i-use-both-a-key-and-an-index-for-the-same-dictionary-value#comment15078538_6164973) 但我不是在寻找有序/索引字典，而是在寻找除此问题中提到的两个之外的其他有效解决方案（如果有的话）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-12T09:55:28.603

值是什么类型？

```
dict = {'k1':MyClass(1), 'k2':MyClass(1)} 
```

会给出重复的值对象，但是

```
v1 = MyClass(1)
dict = {'k1':v1, 'k2':v1} 
```

导致两个键都指向同一个实际对象。

在最初的问题中，您的值是字符串：即使您两次声明相同的字符串，我认为在这种情况下它们将被实习到同一个对象

* * *

注意。如果你不确定你是否有重复，你可以像这样找到：

```
if dict['k1'] is dict['k2']:
    print("good: k1 and k2 refer to the same instance")
else:
    print("bad: k1 and k2 refer to different instances") 
```

（`is`感谢 JFSebastian，替换`id()`）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-06T16:10:17.947

看看这个 - 它正是你所要求的实现：multi_key_dict(ionary)

[https://pypi.python.org/pypi/multi_key_dict](https://pypi.python.org/pypi/multi_key_dict) （来源[https://github.com/formiaczek/python_data_structures/tree/master/multi_key_dict](https://github.com/formiaczek/python_data_structures/tree/master/multi_key_dict)）

（在 Unix 平台上，它可能作为一个包提供，您可以尝试使用以下方式安装它：

```
sudo apt-get install python-multi-key-dict 
```

对于 Debian，或您的发行版的等价物）

您可以使用不同类型的键，但也可以使用相同类型的键。您还可以使用您选择的键类型迭代项目，例如：

```
m = multi_key_dict()
m['aa', 12] = 12
m['bb', 1] = 'cc and 1'
m['cc', 13] = 'something else'

print m['aa']   # will print '12'
print m[12]     # will also print '12'

# but also:
for key, value in m.iteritems(int):
    print key, ':', value
# will print:1
# 1 : cc and 1
# 12 : 12
# 13 : something else

# and iterating by string keys:
for key, value in m.iteritems(str):
    print key, ':', value
# will print:
# aa : 12
# cc : something else
# bb : cc and 1

m[12] = 20 # now update the value
print m[12]   # will print '20' (updated value)
print m['aa']   # will also print '20' (it maps to the same element) 
```

键的数量没有限制，所以代码如下：

```
m['a', 3, 5, 'bb', 33] = 'something' 
```

是有效的，任何一个键都可以用来引用这样创建的值（读/写或删除它）。

编辑：从 2.0 版开始，它也应该适用于 python3。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-15T14:12:24.377

最直接的方法是使用 dict.fromkeys() 方法构建字典。它将一系列键和一个值作为输入，然后将值分配给每个键。
您的代码将是：

```
dict = dict.fromkeys(['k1', 'k2', 'k3'], 'v1')
dict.update(dict.fromkeys(['k4'], 'v2')) 
```

输出是：

```
print(dict)
{'k1': 'v1', 'k2': 'v1', 'k3': 'v1', 'k4': 'v2'} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-26T22:30:13.473

使用 python 2.7/3，您可以将元组、值对与字典理解结合起来。

```
keys_values = ( (('k1','k2'), 0), (('k3','k4','k5'), 1) )

d = { key : value for keys, value in keys_values for key in keys } 
```

您也可以类似地更新字典。

```
keys_values = ( (('k1',), int), (('k3','k4','k6'), int) )

d.update({ key : value for keys, value in keys_values for key in keys }) 
```

我认为这并没有真正触及您问题的核心，但鉴于标题，我认为这属于这里。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T14:25:27.610

您可以构建已从解析数据创建的对象的辅助字典。键是解析的数据，值是你构造的对象——比如字符串值应该被转换为某个特定的对象。这样您就可以控制何时构造新对象：

```
existing = {}   # auxiliary dictionary for making the duplicates shared
result = {}
for k, v in parsed_data_generator():
    obj = existing.setdefault(v, MyClass(v))  # could be made more efficient
    result[k] = obj 
```

然后所有`result`字典重复值对象将由`MyClass`该类的单个对象表示。构建结果后，`existing`可以删除辅助字典。

这里`dict.setdefault()`可能是优雅而简短的。但是您应该稍后测试更健谈的解决方案是否效率更高——见下文。原因是它`MyClass(v)`总是被创建（在上面的例子中）然后如果它的重复存在则被丢弃：

```
existing = {}   # auxiliary dictionary for making the duplicates shared
result = {}
for k, v in parsed_data_generator():
    if v in existing:
        obj = existing[v]
    else:
        obj = MyClass(v)
        existing[v] = obj

    result[k] = obj 
```

`v`当没有转换为任何特殊时，也可以使用此技术。例如，如果`v`是字符串，则辅助字典中的键和值将具有相同的值。但是，字典的存在确保了对象将被共享（Python 并不总是确保这一点）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-06T20:29:18.167

我很惊讶没有人提到将元组与字典一起使用。这工作得很好：

```
my_dictionary = {}
my_dictionary[('k1', 'k2', 'k3')] = 'v1'
my_dictionary[('k4')] = 'v2' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-20T11:37:00.227

我能够使用 pandas [MultiIndex](http://pandas.pydata.org/pandas-docs/stable/advanced.html)实现类似的功能，尽管在我的情况下这些值是标量：

```
>>> import numpy
>>> import pandas
>>> keys = [numpy.array(['a', 'b', 'c']), numpy.array([1, 2, 3])]
>>> df = pandas.DataFrame(['val1', 'val2', 'val3'], index=keys)
>>> df.index.names = ['str', 'int']
>>> df.xs('b', axis=0, level='str')
        0
int      
2    val2

>>> df.xs(3, axis=0, level='int')
        0
str      
c    val3 
```

# android - 从数据库中删除数据会影响存储数据的游标吗？

> ID：11449239
> 
> 赞同：1
> 
> 时间：2012-07-12T09:50:14.940
> 
> 标签：android, database, cursor

我必须将一些文件从数据库 A 移动到数据库 B。

因此，我从数据库 A 中将数据查询到游标中，然后删除数据库 A 中的数据。

之后，我使用游标将数据行插入数据库B。这个过程有什么问题吗？

因为有人告诉我，游标可能只是一个引用，并没有真正将数据存储在游标对象中。所以，如果我在将数据插入数据库B之前删除了数据库A，可能会出现异常！

有谁知道游标是对数据库的引用还是真的将数据保存在对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:51:15.347

你的案子是行不通的。光标是对部分内存的引用。如果删除数据库，这部分内存中的数据也会被删除。

您可以使用游标，但仅应在迁移后删除旧数据库。为什么要在将结果插入新数据库之前删除旧数据库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:54:45.880

A`Cursor`只能作为**参考**，如果您在插入数据库 B 之前从数据库 A 中删除数据，您将完全丢失数据。

更好、更合乎逻辑的方法是从数据库 A 中查询数据，将其插入数据库 B，然后从数据库 A 中删除数据。

# bash - 为什么 awk 在使用 eval 时会打印整行？

> ID：11449240
> 
> 赞同：4
> 
> 时间：2012-07-12T09:50:17.217
> 
> 标签：bash, awk, eval, dpkg

我目前正在修改一个大型 BASH 脚本，该脚本在几个不同的发行版（主要是基于 Redhat 和 Debian）中安装/检查一系列包。

为了处理发行版之间的一些差异（例如 rpm 与 dpkg、yum 与 apt 等），我尝试使用各种命令字符串加载一些变量，以使脚本中不包含`if debian then this, otherwise this`语句。但是，它似乎`awk`不喜欢放在 eval 语句中，我不知道为什么。

**例子**

```
# Example dpkg --list output
# ii  bash       4.1-2ubuntu3    The GNU Bourne Again SHell

dpkg --list | grep 'bash'
# Outputs bash entries in dpkg.

cmd="dpkg --list | grep 'bash'"
eval $cmd                                       
# Outputs as expected, same as above.

dpkg --list | awk '/^.i/ { print $2 }'
# Outputs as expected, a list of package names.

cmd="dpkg --list | awk '/^.i/ { print $2 }'"
eval $cmd
# Awk prints full output from dpkg for every line matching the regex. 
```

在上面的代码中，简单地对给定的包进行 grepping 可以正常工作，并且可以按预期打印，但是当尝试使用 awk 生成包名的完整列表时，`print $2`似乎会被忽略并简单地打印整行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T09:58:38.403

这是原因：

```
cmd="dpkg --list | awk '/^.i/ { print $2 }'"
echo $cmd

Output:
dpkg --list | awk '/^.i/ { print }' 
```

转义 $ 符号：

```
cmd="dpkg --list | awk '/^.i/ { print \$2 }'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:57:56.667

eval 可以评估 $2 并用它的值替换它试试这个（转义 $ char）。

```
cmd="dpkg --list | awk '/^.i/ { print \$2 }'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:09:19.133

你想要这个（必须在 awk 脚本中转义 $）：

```
cmd="dpkg --list | awk '/^.i.+bash/{ print \$2 }'"
eval $cmd 
```

我仍然不明白你为什么`eval`在这种情况下使用它，它会导致几个问题，（其中一个是你显然不能使用`/^.i.*bash/`正则表达式（shell 扩展 glob 或`\`在正则表达式内部传递）并且必须解析为`/^.i.+bash/`.

# jquery - jQuery CSS 宽度属性在 Safari 上返回不一致

> ID：11449242
> 
> 赞同：1
> 
> 时间：2012-07-12T09:50:20.187
> 
> 标签：jquery, html, css, markup

下面是我的 jQuery 片段，我在其中抓取一个下拉列表并尝试从中获取内联宽度样式。我的问题是，在 Safari II 上*没有*得到`newWidth`225。

targetSelect 是`r_select`这样的，例如，我不明白为什么我的 Safari 会返回与 Firefox 不同的宽度。

```
// get the current select box
targetSelect = $(this);
newWidth = parseInt(targetSelect.css('width')); 
```

我的标记：

```
<select name="r_select" id="r_select" style="width: 225px; height: 50px; float: left;">
    <option>Mickelson</option>
    <option>Montgomerie</option>
    <option>Watson</option>
    <option>Casey</option>
</select> 
```

我应该补充一点，我对这个下拉菜单没有同样的问题：

```
<select id="r_select_overlay" class="r_select_overlay_test no_style" name="r_select_overlay" style="width: 145px; height: 50px; float:left;">
        <option>Mickelson</option>
        <option>Montgomerie</option>
        <option>Watson</option>
        <option>Casey</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:58:36.370

尝试获取 outerWidth 而不是简单的宽度，看看是否可行。

[http://api.jquery.com/outerWidth/](http://api.jquery.com/outerWidth/)

# java - NullPointerException 试图加载文件

> ID：11449246
> 
> 赞同：0
> 
> 时间：2012-07-12T09:50:26.477
> 
> 标签：java, json, weblogic, jdeveloper

场景如下：

*   使用 jdeveloper 开发 jsp 应用程序
*   部署到 Oracle Weblogic
*   所有文件都在同一个项目中
*   `src`源文件位于文件夹内的包中
*   文件夹内`Resources`有两个文件：`menu.json`和`TestWS.properties`

因此，我创建了一个 java 类，它应该`menu.json`根据其结构读取并返回一个菜单（在 html 中）。

当，在课堂上，我这样做

```
InputStream i =
    Thread.currentThread().getContextClassLoader().
        getResourceAsStream("Resources/menu.json");
BufferedReader r = new BufferedReader(new InputStreamReader(i)); 
```

构造`InputStreamReader`函数抛出一个`NullPointerException`，我想是因为它找不到文件。

有趣的是，如果我尝试加载`TestWS.properties`，它加载得很好。

我尝试检查项目的属性，手动添加两个文件`Project Source Path -> Resources`，添加`.json`扩展名`Compiler -> Copy file types to output directory`，重命名，删除，重新创建，更改扩展名到 json 文件，部署到 WAR 并将项目加载到另一台运行 weblogic 的机器上，但无济于事。

还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:23:44.973

[本文](http://tompeez.wordpress.com/2012/05/13/jdeveloper-controlling-which-resources-files-are-copied-into-the-projects-output-directory/)对此进行了解释。

简而言之，您必须更改编译器设置“将文件类型复制到输出目录”以包含您希望在运行时可用的资源的扩展。

# mysql - MySQL从多个表中查找缺失值的最有效方法

> ID：11449247
> 
> 赞同：0
> 
> 时间：2012-07-12T09:50:30.937
> 
> 标签：mysql

我有三个表，第一个是电子邮件地址列表：

```
addresses:
id - integer, this is the primary key<br>
email - varchar(255) field holding the address

sent:
sid - integer, foreign key references id in addresses table

received:
rid - integer, foreign key references id in addresses table 
```

显然“已发送”和“已接收”表还有其他列，但它们对于这个问题并不重要。每次发送或接收电子邮件时都会填充已发送和已接收表，如果地址不在“地址”表中，则会添加该地址。表格可以变得非常大（100,000+）。

“sent”和“received”表的条目会定期清除，并且出于各种原因删除条目，在“addresses”表中留下孤立的条目。

我正在寻找 MySQL 中最有效的方法来清除“地址”表中的孤立条目。到目前为止我的查询是：

```
delete 
from addresses 
where id not in 
         (select rid from received) 
  and id not in 
         (select sid from sent); 
```

这行得通，但它可能需要很长时间才能运行，而且绝对不是最有效的方法！我也试过这个：

```
delete 
from addresses 
where not exists 
      (select 'x' from sent where sent.sid=addresses.id) 
  and not exists 
      (select 'x' from rceieved where recieved.rid=addresses.id); 
```

这有点快，但仍然需要很长时间，我怀疑我需要使用 JOIN 语法，但此时我的 sql 知识已经用完了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:21:28.257

这应该可以解决问题

```
DELETE adresses.* FROM adresses 
LEFT JOIN sent ON sent.sid=adresses.id
LEFT JOIN received ON received.rid=adresses.id
WHERE sent.sid IS NULL AND received.rid IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:17:53.933

Try this: delete from adresses a left join sent s on (a.sentid=s.id) where s.id is null

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T09:11:41.347

对不起，我真的不能给出肯定的答案。但是我遇到了类似的问题，环顾四周后似乎只有两个主要选择：

1.  使用`WHERE x NOT IN y`
2.  使用`LEFT JOIN x ON y WHERE z IS NULL`

我通过比较两个表（分别为 2822291 和 916626 条记录）尝试了这两种方法。

性能结论如下：

*   类型 1**明显快**于类型 2。（600 秒对 6000 秒）
*   索引或键对这两种类型的此操作的性能都有合理的影响。
*   性能几乎与实际 DISTINCT 值的数量无关。因此，比较两个表的 2000 个不同的值或仅 15 个需要大约相同的时间。

因此，结论是，截至目前（08-2013），选项 1 似乎仍然是更快的方法。使用`NOT EXISTS`可能会更快，但与类型 1 相比，性能变化并不显着。

我希望这最终能帮助任何人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-18T15:47:15.390

使用包含 2 个 id 列（以及其他几个不同的列）的 2 300k myisam 表进行了一些测试。除了一张表中有 2 条记录外，ID 相同。尝试了提到的 3 种方法来查找这些 id：

不存在的地方

左连接

在 （）

确保使用 SQL_NO_CACHE 并且所有查询执行相同，服务器在约 14.6 秒内返回了两个结果。

上面提到的差异必须是缓存、不同版本的 mysql 和/或通用服务器配置。

# c# - selenium webdriver .Net chrome上传文件

> ID：11449248
> 
> 赞同：3
> 
> 时间：2012-07-12T09:50:32.777
> 
> 标签：c#, selenium, upload, webdriver, selenium-chromedriver

**如何在 Chrome .NET 中使用 Selenium WebDriver 上传文件**。

版本 Chrome (20.0.1132.57)。版本 chromedriver 22.0.1203.0b

代码：

```
driver.GetElement(someXpath).SendKeys(filePath) 
```

抛出异常：

`Element is not clickable at point (144, 90.5). Other element would receive the click: <h2>...</h2>`

HTML代码：

```
<a class="button addfile"> Upload <input class="fileupload" type="file" multiple="" name="files[]"/> </a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T18:18:30.610

您可以使用 JavaScript 强制元素可见。对于输入元素，使用 IJavaScriptExecutor 执行 JavaScript，并将元素的可见性设置为可见，并且为了更好地衡量，给它一些维度。

```
 ((JavascriptExecutor)driver).ExecuteScript("arguments[0].style.visibility = 'visible';
arguments[0].style.height = '1px'; arguments[0].style.width = '1px'; 
arguments[0].style.opacity = 1", fileUploadElement); 
```

# php - 在 Android 设备上强制下载时“无法下载。内容不受支持”

> ID：11449250
> 
> 赞同：0
> 
> 时间：2012-07-12T09:50:34.370
> 
> 标签：php, android

我正在编写一个网站，当有人访问链接“http://www.sample-link.com/download/downloadApp 这是我在 PHP 网站上的代码”时自动提供 APK 下载。

```
 $fileName = "./uploads/MyAPK.apk";                           
    header('Content-type: application/download');
    header('Content-Disposition: attachment; fileName="' . basename($fileName) . '"');
    header('Content-Transfer-Encoding: binary');
    readfile($fileName); 
```

**当我在 PC 上访问该链接时，它可以工作。当我在 Android 设备上执行此操作时，无法完成下载。它卡在下载队列中，出现错误“无法下载。内容不受支持”**。我试图重新启动设备，但它不起作用。怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:21:21.890

`application/vnd.android.package-archive`用作 apk 的内容类型。

参考：[维基百科](http://en.wikipedia.org/wiki/APK_%28file_format%29)

# android - 如何使用最终用户设备中的新 Apk 更新完全安装的 Apk

> ID：11449254
> 
> 赞同：0
> 
> 时间：2012-07-12T09:50:41.063
> 
> 标签：android, apk

Any1请帮助我......在android中

如何更新已安装在最终用户设备中的完整 apk....

例如：安装在设备中的 Android 市场应用程序已完全更改为 googleplay apk...

怎么做....

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:03:57.137

如果您想上传一个完全新的 apk（如全新的项目），只需在签名时保持相同的密钥和相同的包名称（例如 com.example.App），它会像魔术一样更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:11:31.230

您可以执行 NStorm 提到的操作，但如果您安装了[Android Debug Bridge](http://developer.android.com/tools/help/adb.html)，您可以打开命令提示符并执行 adb install，如下所示：

```
 adb install -r file.apk 
```

只要它具有相同的签名密钥和相同的包名称，您就可以通过这种方式安装它。如果您有不同的签名密钥，则必须先在手机上卸载该应用程序才能安装它。-r 标志意味着重新安装并保留该应用程序的所有先前数据。这当然只有在你安装了 adb 并且你手里拿着电话和电线的情况下才有效。

另一个选择是将应用程序通过电子邮件发送给手机，或者将其托管在 URL 页面上，让最终用户访问并以这种方式安装它。您可以轻松地将其上传到服务器，然后通过文本或电子邮件将链接发送给最终用户，他们可以通过这种方式重新安装它。您仍然需要拥有相同的签名密钥，否则他们将不得不卸载应用程序。

总之，您可以通过三种方式在不通过 Google Play 市场的情况下进行操作。

1.  上传到服务器，然后通过文本/电子邮件发送到 apk 的链接。
2.  通过电子邮件将 apk 作为附件发送，让用户下载并安装。
3.  使用亚行。

# html - CSS：显示子菜单项时如何在菜单项上设置悬停效果

> ID：11449255
> 
> 赞同：0
> 
> 时间：2012-07-12T09:50:44.710
> 
> 标签：html, css

抱歉，标题看起来不错，我不知道如何为我的问题写标题。

所以我有一个带有一些菜单项和子菜单项的菜单栏：

```
<div id="mainmenu">
<ul id="menu">
    <li><a class="current" href="">Menu1</a></li>
    <li><a href="#">Menu2</a>
        <ul>
            <li><a href="">Submenu1</a></li>
            <li><a href="">Submenu2</a></li>
        </ul>
    </li>
    <li><a href="">Menu3</a></li>
    <li><a href="">Menu4</a></li>
</ul>
</div> 
```

这是我[到目前为止](http://jsfiddle.net/bk2HA/)所做的事情。

我想要的是保持*菜单项在其**子菜单项*悬停时也处于`:hover`状态，例如 If my mouse is on or the should also be *darkened*。我怎样才能用 CSS 做到这一点？*`submenu``submenu2``Menu2`*

 **我希望我的问题很清楚。

编辑：

Wooo 非常感谢大家。

得到它：`#menu li:hover`

```
#menu li:hover,#menu a:hover,#menu > li a.current{

} ​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:56:02.520

在 CSS 的最后一行，添加`#menu li:hover`到目标选择器

此处更新示例：http: [//jsfiddle.net/7UaNn/](http://jsfiddle.net/7UaNn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:00:24.263

`#menu li:hover > a`在下面的css中添加这个

```
#menu a:hover, #menu > li a.current {
  // your Style
} 
```

所以它应该是这样的：

```
 #menu a:hover, #menu > li a.current, #menu li:hover > a {
  // your Style
} 
```

见演示：http: [//jsfiddle.net/akhurshid/bk2HA/7/](http://jsfiddle.net/akhurshid/bk2HA/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:56:44.113

您可以通过连接到`:hover`父`li`元素的状态而不是锚元素来实现这一点 - 这是实际悬停的列表项的子元素 - 如下所示：

```
li a:hover,
li:hover > a {
    color: #fff;
} 
```

您可能需要使用[:nth-child()](http://reference.sitepoint.com/css/pseudoclass-nthchild)来绕过处于悬停状态的每个子​​链接。没有测试这个。

/edit：更新了选择器，现在使用 > a 只选择悬停列表元素的直接子锚元素，不需要 :nth-child 等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T09:57:07.717

目前，列表项的所有悬停样式都应用于`a`- 元素。

但是，您需要将它们应用到`li`-Element 以保持悬停状态处于活动状态。

有时这可能会变得棘手，但在您的情况下这很容易，只需添加：

```
#menu > li:hover{
 background:#474747;   
} 
```

到你的风格。

查看**[您修改后的小提琴](http://jsfiddle.net/bk2HA/8/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T10:05:01.397

除了 "a" 还为 "li" 添加悬停：

```
#menu > li:hover{
background:#474747;   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T09:55:33.060

使悬停时更改的内容成为 LI 的背景，而不是“a”的背景。

```
ul#menu li:hover { background:#000; } 
```**

# android - 如何使用自定义适配器在 listView 中排序

> ID：11449256
> 
> 赞同：2
> 
> 时间：2012-07-12T09:50:44.350
> 
> 标签：android, sorting, android-listview

我正在制作一个应用程序，其中我显示的人的状态为在线和离线。目前 ListView 是根据 api 设置的。我想根据此人的在线状态对 listView 进行排序。

例如。如果没有。的人在线，然后列表视图首先显示他们。

我在我的项目中实现了延迟加载图像。

这是我的 MainActivity.class

```
public class MainActivity extends Activity {

ProgressDialog dialog;

static final String URL = "Some_URL";
// XML node keys
static final String KEY_RESPONSE = "Response"; // parent node
static final String KEY_NAME = "Name";
static final String KEY_DESCRIPTION = "Description";
static final String KEY_ID = "ConsultantID";
static final String KEY_OFFLINE = "OnlineStatus";
static final String KEY_THUMB_URL = "ProfilePicture";

ListView lv;
LazyAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lv=(ListView)findViewById(R.id.list);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLfunctions parser = new XMLfunctions();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_RESPONSE);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_OFFLINE, parser.getValue(e, KEY_OFFLINE));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);
    }

     adapter=new LazyAdapter(this, songsList);
       lv.setAdapter(adapter);

       lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> Parent, View view, int Position,
                long Id) {
            // TODO Auto-generated method stub
            @SuppressWarnings("unchecked")
            HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(Position);
            Intent i = new Intent ("com.fedorvlasov.lazylist.SHOWLARGE");
            i.putExtra("ID",o.get(KEY_ID));
            i.putExtra("NAME", o.get(KEY_NAME));
            i.putExtra("DESCRIPTION",o.get(KEY_DESCRIPTION));
            i.putExtra("STATUS", o.get(KEY_OFFLINE));
            i.putExtra("IMAGE",o.get(KEY_THUMB_URL));
            startActivity(i);

            //Toast.makeText(LazyAdapter2.this, "position '" + adapter.getItem(Position) + "' was clicked.", Toast.LENGTH_LONG).show();

        }

    });

} 
```

}

这是我的适配器类，名为 LazyAdater

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return data.get(position);

}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title name
    TextView description = (TextView)vi.findViewById(R.id.artist); // descriptiom
    TextView duration = (TextView)vi.findViewById(R.id.duration); // id
    TextView Status = (TextView)vi.findViewById(R.id.status); //status
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position); 

    // Setting all values in listview
    title.setText(song.get(MainActivity.KEY_NAME));
    description.setText(song.get(MainActivity.KEY_DESCRIPTION));
    Status.setText(song.get(MainActivity.KEY_OFFLINE));
    duration.setText(song.get(MainActivity.KEY_ID));
    imageLoader.DisplayImage(song.get(MainActivity.KEY_THUMB_URL), thumb_image);
    return vi;

}} 
```

我已经通过一些比较器进行了审查.. 但我不了解如何实现它.. 在此先感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:33:53.500

尝试这个

```
Collections.sort(songsList, new MyCustomComparator()); 
```

和

```
public static class MyCustomComparator implements Comparator<HashMap<String, String>> {

    @Override
    public int compare(HashMap<String, String> lhs,
            HashMap<String, String> rhs) {
        if(lhs.get("onLineCheck") is true)
            return 1;
        else
            return -1;

        return 0;
    }

} 
```

在这条线之前

```
adapter=new LazyAdapter(this, songsList); 
```

# python - 如何在 Ubuntu 中使用 Python UFW（简单防火墙）API？

> ID：11449257
> 
> 赞同：2
> 
> 时间：2012-07-12T09:50:47.223
> 
> 标签：python, firewall, iptables

我在 Ubuntu 12.04 上使用 UFW 从命令行允许和拒绝端口的 IP 地址。

如何使用 API 在 Python 中执行以下操作？

```
$ sudo ufw status 
$ sudo ufw allow from 207.46.232.182 
```

目前我只是从 Python 进行系统调用。

是否有任何网页或博客描述了如何使用 API？我找不到任何东西。

默认情况下，我可以使用：

```
import ufw 
```

# c# - 为什么主线程每次都停止

> ID：11449258
> 
> 赞同：0
> 
> 时间：2012-07-12T09:50:47.377
> 
> 标签：c#, multithreading, visual-studio

我对我使用 Visual Studio 调试的应用程序中的主线程有疑问。当应用程序运行时，我在输入窗口中看到的是主线程每次都停止。

所以我的问题是：为什么主线程每次都停止而应用程序继续运行

输入窗口给了我以下信息：

```
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\mscorlib.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'c:\documents and settings\administrateur\bureau\gestiondesimmobilisations machi howa hada\gestiondesimmobilisations\bin\debug\GestionDesImmobilisations.exe' chargé, symboles chargés.
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.Windows.Forms.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.Drawing.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.Data.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.Xml.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.Core.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.Xml.Linq.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'c:\program files\microsoft sql server compact edition\v3.5\devices\System.Data.SqlServerCe.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'System.SR.dll' chargé
'GestionDesImmobilisations.exe' (Managé) : 'System.SR.resources.dll' chargé
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
'GestionDesImmobilisations.exe' (Managé) : 'C:\Program Files\Microsoft.NET\SDK\CompactFramework\v3.5\Debugger\BCL\System.Data.DataSetExtensions.dll' chargé

Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0).
Le thread 0xf7137ee6 s'est arrêté avec le code 0 (0x0). 
```

# android - 更新 ADT 后无法在 AVD（模拟器）中从键盘（硬件）键入

> ID：11449259
> 
> 赞同：8
> 
> 时间：2012-07-12T09:50:48.777
> 
> 标签：android, android-emulator

我刚刚更新到 ADT 20 和最新的 SDK，但从那以后我不知道为什么我不能在 AVD（模拟器）中从键盘（硬件）输入。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-12T09:58:37.480

在您的 Eclipse IDE 中，转到**AVD 管理器**并选择您的仿真器设备。

单击**编辑**以编辑此设备的属性。

在**硬件**部分，单击**新建**。

在**属性**下拉列表中，选择**键盘支持**并按**OK**。

这会将属性添加到您的硬件列表中，但默认值为“no”。

单击 value 列并将其更改为**"yes"**。

再次单击**“编辑 AVD”以保存您的更改。**

这将在 config.ini 文件中为 AVD 添加一个属性**hw.keyboard=yes**，现在您的模拟器将支持键盘输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T09:55:22.377

编辑设备并添加键盘支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T16:33:37.677

如果您有皮肤，请检查是否`hardware.ini`有`hw.keyboard = yes`

# excel - SSRS 导出到 Excel 结果 #####

> ID：11449260
> 
> 赞同：0
> 
> 时间：2012-07-12T09:50:50.617
> 
> 标签：excel, reporting-services

当我将报告从 SSRS 导出到 Excel 时，某些列的格式为 #####。当我从 Internet Explorer 中的 ReportServer 导出时，它也会给我这些结果。

它不是 Excel 中列的宽度。这些字段是数字字段或百分比字段。当我双击 Excel 中的单元格时，将显示结果。但我必须双击所有字段才能显示结果。

我还尝试更改 SSRS 中列的格式，但我找不到导致没有 ###### 的 Excel 文件的设置。

# uri - CRM 2011：使用组织服务返回元数据参考问题

> ID：11449262
> 
> 赞同：0
> 
> 时间：2012-07-12T09:50:56.983
> 
> 标签：uri, dynamics-crm-2011

我正在使用组织服务 URI 将文档从注释和附件上传到我们的 SharePoint 网站。我正在使用[此处](http://charlesemes.blogspot.co.uk/2011/02/create-sharepoint-document-locations-in_19.html)找到的代码，除了我设置组织URI 的位置之外，所有代码都在工作。我收到“*元数据包含无法解析的引用*”的错误。我尝试重新输入链接以及我能想到的所有内容，但我总是收到此错误。

奇怪的是，这在几天前工作得很好，但是当我第二天早上尝试它时，它拒绝工作，现在什么也做不了。在此错误之前，我现在收到一条错误消息，指出 URI 方案无效。我不知道是什么导致它停止工作，但我已经尝试了所有我能想到的并需要一些帮助。

谢谢

编辑：错误消息已更改为“名称为帐户的代理类型已由另一个程序集定义”。仍然不确定这意味着什么，但我希望这可能更容易解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:11:37.293

我不确定这是否是这个问题的实际解决方案，但我尝试了这个，它似乎有效。所以要么是答案，要么我很幸运，其他事情也发生了变化，但无论如何......

我所做的是改变我连接到组织服务的方式。在我使用用户凭据之前，组织 URI 和家庭领域 uri 一起以`OrganizationServiceProxy orgService = new OrganizationServiceProxy(organizationUri, homeRealmUri, cred, null);`.

现在我正在使用一种更长的方法，首先使用用户凭据设置发现服务。然后与他们一起设置发现服务代理，然后对其进行身份验证。然后我只需使用 RetrueveOrganizationRequest / Response 来获取组织服务，然后我可以使用它来代替原始服务。

希望这对人们有意义，但如果有人愿意，我可以放一些代码来显示我做了什么。

# android - ActionBar 分隔线样式

> ID：11449265
> 
> 赞同：8
> 
> 时间：2012-07-12T09:51:16.003
> 
> 标签：android, android-actionbar, actionbarsherlock

![四方印刷屏](../Images/77f8afed9f7bcf830e293ef932bdc9d4.png)

我有两个问题。在详细说明这些问题之前，我想补充一下我正在使用`ActionBarSherlock`.

第一个问题是我`ActionItems`在`ActionBar`. 在打印屏幕中，有 3 个分隔符，例如第一个分隔符位于**后退按钮**和**Check In**之间。

我使用下面的样式自定义了我的 ActionBar。但是，调用的drawable`small_detail_divider`没有显示出来。我还尝试使用`setBackgroundSplitDrawable()`. 那也没有帮助。`ActionItem`我应该怎么做才能在这些s之间添加分隔符？

```
<style name="Theme.Example" parent="Theme.Sherlock">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="absForceOverflow">true</item>       
</style>

<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.ActionBar.Solid">
    <item name="background">@drawable/top_panel_background</item>
    <item name="icon">@drawable/application_logo</item>
    <item name="backgroundSplit">@drawable/small_detail_divider</item>

    <item name="android:background">@drawable/top_panel_background</item>
    <item name="android:icon">@drawable/application_logo</item>
    <item name="android:backgroundSplit">@drawable/small_detail_divider</item>
</style> 
```

另一个问题是：我想以与在打印屏幕中添加操作项相同的方式添加操作项。当我添加操作项时，它们总是添加到`ActionBar`. 如何`ActionBar`在打印屏幕中的“后退”按钮等左侧添加操作项？任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T10:27:38.807

您正在寻找的属性是：

```
<style name="Theme.Example" parent="Theme.Sherlock">
    <item name="actionBarDivider">@drawable/small_detail_divider</item>
    ....
    <item name="android:actionBarDivider">@drawable/small_detail_divider</item>
    ...
</style> 
```

只是为了给你一些更多的信息。

拆分 ActionBar 应设置为：

```
<style name="Theme.Example" parent="Theme.Sherlock">
    <item name="actionBarSplitStyle">@style/Widget.Styled.ActionBarSplit</item>
    <item name="android:actionBarSplitStyle">@style/Widget.Styled.ActionBarSplit</item>
    ... 
```

然后为拆分操作栏提供您的自定义样式..

第三题：按顺序添加：

当您实用地添加菜单项时，请使用：[Menu](http://developer.android.com/reference/android/view/Menu.html#add%28int,%20int,%20int,%20java.lang.CharSequence%29)

`menu.add (0, R.id.menu_new_ab_item, 0, "Item");`

顺序决定了您如何订购菜单项。

您可以更具体地在您的 menu.xml 文件`android:orderInCategory="1..n"`中使用任何 int。我通常从 10 点左右开始，所以我可以在标准项目前给项目充气。

# android - Android：无法加载我的 XML 文件并且应用程序崩溃

> ID：11449266
> 
> 赞同：0
> 
> 时间：2012-07-12T09:51:20.507
> 
> 标签：android, xml

所以我只是创建了一个解析器和一个处理程序来解析一个 XML 文件。它在我的 Java 测试项目中运行良好，但在我的 Android 项目中却不行。这是抱怨日志：

> 07-12 09:44:59.586: E/AndroidRuntime(1164): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.ec.ec/com.ec.ec.ListeOffresActivity}: android.os.NetworkOnMainThreadException 07- 12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app。 ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.ActivityThread.access$600(ActivityThread.java:130) 07-12 09:44:59.586 : E/AndroidRuntime(1164): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.os.Handler.dispatchMessage( Handler.java:99) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.os.Looper。循环(Looper.java:137) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.ActivityThread.main(ActivityThread.java:4745) 07-12 09:44:59.586: E/ AndroidRuntime(1164): at java.lang.reflect.Method.invokeNative(Native Method) 07-12 09:44:59.586: E/AndroidRuntime(1164): at java.lang.reflect.Method.invoke(Method.java: 511) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 07-12 09:44:59.586: E/ AndroidRuntime(1164): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 dalvik.system.NativeStart.main(Native方法）07-12 09:44:59.586：E/AndroidRuntime（1164）：由：android.os.NetworkOnMainThreadException 07-12 09:44:59.586：E/AndroidRuntime（1164）：在 android.os。StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 07-12 09:44:59.586: E/AndroidRuntime(1164): at java.net.InetAddress.lookupHostByName(InetAddress.java:385) 07-12 09:44: 59.586: E/AndroidRuntime(1164): 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java:236) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 java.net.InetAddress.getAllByName(InetAddress .java:214) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 libcore.net.http.HttpConnection.(HttpConnection.java:70) 07-12 09:44:59.586: E/AndroidRuntime( 1164): 在 libcore.net.http.HttpConnection.(HttpConnection.java:50) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 libcore.net.http.HttpConnection$Address.connect(HttpConnection. java:341) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 libcore.net.http.HttpConnection.connect(HttpConnection.java:128) 07-12 09:44:59.586: E/AndroidRuntime(1164) : 在 libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 libcore.net.http.HttpEngine.connect(HttpEngine.java:310 ) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289) 07-12 09:44:59.586: E/AndroidRuntime(1164):在 libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 java.net.URL.openStream(URL.java:462) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在com.ec.ec.ListeOffresActivity.onCreate(ListeOffresActivity.java:31) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.Activity.performCreate(Activity.java:5008) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.ActivityThread .performLaunchActivity(ActivityThread.java:2023) 07-12 09:44:59.586: E/AndroidRuntime(1164): ... 11 更多E/AndroidRuntime(1164): 在 android.app.Activity.performCreate(Activity.java:5008) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java :1079) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 07-12 09:44:59.586: E/AndroidRuntime(1164): ... 11 更多E/AndroidRuntime(1164): 在 android.app.Activity.performCreate(Activity.java:5008) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java :1079) 07-12 09:44:59.586: E/AndroidRuntime(1164): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 07-12 09:44:59.586: E/AndroidRuntime(1164): ... 11 更多

看来我的模拟器没有连接到互联网，对吧？我应该怎么办 ？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:55:04.907

您正在运行您`Network request`的主 UI 线程。使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)执行网络请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:02:31.190

日志不是很清楚。但我可以看到以下错误 -

07-12 09:44:59.586: E/AndroidRuntime(1164): 在 java.net.URL.openStream(URL.java:462)

因此，很可能该 URL 无法从模拟器访问，因为您可以从您的 java 代码中访问和解析 XMl。

您可以从模拟器启动浏览器并查看 URL 甚至 Internet 是否可访问？

-数据托盘。

# security - NodeJS API - 安全问题

> ID：11449268
> 
> 赞同：0
> 
> 时间：2012-07-12T09:51:26.473
> 
> 标签：security, api, node.js

我正在 NodeJS 中制作一个 API，它将同时被网站和 iPhone 原生应用程序使用。

在网站的 javascript 中使用时，API URL 有可能会暴露给用户。我只想要对 API 的授权访问。不希望任何人通过控制台调用 API。比如`user/delete/[user-id]`，任何人都可以使用此 URL 删除用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:30:50.820

查看[http://passportjs.org/](http://passportjs.org/)

有很多身份验证策略可供使用。不要在这里重新发明轮子。;)

# javascript - 循环并获取href链接信息

> ID：11449272
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:51:35.283
> 
> 标签：javascript, jquery, jsp

```
 <p class="page" id="datapage">
 <strong>1</strong> 
 <a class="pag-curr" href="blahblah;page_num=2">
 2
 </a> 
 <a class="pag-curr" href="blahblah;page_num=3">
 3
 </a> 
 ...
 till page number 10
 <a class="pag-next" href="blahblah;page_num=2">
 <strong>next&nbsp;»</strong>
 </a>
 </p> 
```

我想循环 href class="pag-curr" 以获取计数并希望获取它们的相对 href 信息（例如.blahblah;page_num=2.. 等），如何使用 javascript 或 jquery 实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:56:51.783

```
$(".pag-curr").each(function(){
   var hrf = $(this).attr("href");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:58:24.387

使用 jQuery，您可以使用选择器来做到这一点：

```
// Retrieve all links with class pag-curr
var links = $("a.pag-curr");

// Count links
console.log(links.length);

// Print all href attributes
links.each(function() {
  console.log($(this).attr("href"));
} 
```

# android - 如何在android中的xml解析中获取属性和值？

> ID：11449275
> 
> 赞同：0
> 
> 时间：2012-07-12T09:51:49.963
> 
> 标签：android, xml-parsing

我有一个格式为的 xml 文件

```
<question_choices>
<question id="499">What do you call a chicken with bad sunburn</question>
<choices1 id="2231">Burned Chicken</choices1>
<choices2 id="2230">Fried Chicken</choices2>
<choices3 id="2232">Dead Chicken</choices3>
<choices_answer>Fried Chicken</choices_answer>
</question_choices> 
```

我必须在解析过程中同时获取 id 和值。此外，我在 3 个不同的按钮中设置了这些选项。所以当我单击这些选项时，我必须获取值并且还必须保存相应的 id。我尝试使用 getAttributes () 但我不知道在哪里以及如何使用。所以它没有成功。

```
 final XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element
    final NodeList nl = doc.getElementsByTagName(KEY_QUESTION);         
        // looping through all item nodes <item>
         for(int j=0;j<nl.getLength();j++)
         {
            Element e = (Element) nl.item(j);
            listnew[j]=parser.getValue(e,KEY_QUEST); 
            options1[j]= parser.getValue(e, KEY_CHOICE1);
                        options2[j]= parser.getValue(e, KEY_CHOICE2);
                        options3[j]= parser.getValue(e, KEY_CHOICE3);
        }
      TextView question = (TextView)findViewById(R.id.question);
      question.setText(listnew[x]);

      opt1 = (Button)findViewById(R.id.opt1);
      opt1.setText(options1[x]);
      opt1.setOnClickListener(myOptionOnClickListener);

      opt2 = (Button)findViewById(R.id.opt2);
      opt2.setText(options2[x]);
      opt2.setOnClickListener(myOptionOnClickListener);

      opt3 = (Button)findViewById(R.id.opt3);
      opt3.setText(options3[x]);
      opt3.setOnClickListener(myOptionOnClickListener);

      x++; 
     } 
```

我正在使用DOM解析器进行解析。单击的选项必须保存。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:44:53.353

试试这个：

```
 Document doc = parser.getDomElement(xml);
 String idQuestion = doc.getElementsByTagName("question").item(0)
                      .getAttributes().getNamedItem("id").getNodeValue();
 String idChoise1 = doc.getElementsByTagName("choices1 ").item(0)
                      .getAttributes().getNamedItem("id").getNodeValue();
 ... 
```

# integration - 设计：将用户界面行为暴露给外部系统

> ID：11449278
> 
> 赞同：1
> 
> 时间：2012-07-12T09:52:03.410
> 
> 标签：integration

我正在开发一个包含相当复杂的输入模式的 Web 应用程序（Java EE 后端）。这种输入模式允许用户捕获数据，但它有一堆 (JavaScript) 限制，例如必填字段、只有在输入特定值时才可用的字段等。

我必须将此功能公开给外部系统，并允许他们将此数据提交给我的服务器。这些外部系统既可以基于 Web 也可​​以基于客户端（但我可以假设客户端可以访问 Internet）。我的第一个想法是通过服务为这些系统提供某种字段和诸如强制性的定义，并让它们呈现他们想要的输入模式。但是，这遇到了阻力，因为在接下来的几个月的开发过程中，字段类型和限制可能会发生很大变化。这些外部系统有不同的部署时间表，为此我们必须首先在所有系统中复制处理这些限制的所有逻辑，然后同步我们的部署。

已经提出的一种替代方法是让外部系统通过标准 HTTP 调用我的模式，并将其呈现在 iframe 或嵌入式呈现中。这解决了之前所有的抱怨，但它让我感到有点不安。

有没有我们没有想到的替代方案？也许某种 UI 模式与不同平台的现有渲染库？你对第二个提案有什么看法，有什么主要问题，还是这是“最好的”解决方案？

编辑：澄清一下，不管前端的决定如何，我当然仍会执行后端验证，因为我不能只信任传入的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:39:17.103

您提到的约束（必填字段等）实际上与用户界面无关。您也说得对，让您的后端呈现 Web 内容不是一个好主意。

您的第一个建议听起来是个好主意，以下是我将如何解决您提到的问题：

*   在后端进行所有验证并将模型对象发送到客户端，代表 UI 的当前状态（字段名称、类型、启用/禁用、错误消息等）。
*   尽可能让客户保持沉默。它应该只负责在窗口/网页上渲染模型。每当更改字段并需要验证时，将模型提交到后端进行验证并取回要显示的新模型。（您可以通过仅返回更改的字段来优化它。）

这样做会将您的验证逻辑保留在一个地方（后端），并且客户端很少需要修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:49:55.463

我在之前的几个项目中都遇到过同样的问题。基于这个经验，我可以诚实地说，服务器端验证是您可能必须实施的事情，以避免从客户端提交垃圾，无论它来自 GUI 还是通过 API 来自其他第三方系统。您可以选择一种可用的验证框架，我使用[Apache Commons Validator](http://commons.apache.org/validator/)并认为它很好，或者您可以实现自己的。另一方面，客户端预验证、自动完成和数据查找是让人类用户满意的解决方案。不要考虑代码重复，只需从业务角度使您的系统正确。

# java - 如何在 Android 应用程序中使用 Skype Java API？

> ID：11449282
> 
> 赞同：0
> 
> 时间：2012-07-12T09:52:19.713
> 
> 标签：java, android, skype4java

我想制作一个应用程序来监控手机中其他 IM 的聊天历史记录。

尽管我从网上找到了 Skype4Java API，但我找不到任何适用于 Android 的 Skype API。我希望在 Android 应用程序中使用它。我已将该 API 的 .jar 文件导入到我的 Java 构建路径中。当我运行我的代码时，我收到 libskype.jnilib 和 libskype.so 文件的错误。我也无法删除该文件，因为当我尝试删除该文件时出现错误。请告诉如何做到这一点？

如何在 Android 应用程序中使用 Skype 的 Java API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:11:14.897

截至目前撰写此答案时，还没有 Skype 的 Android 实现。有许多第三方聊天 API，虽然我个人不能说出其中一个，因为我没有使用过任何一个。

Skype4Java API 向您抛出错误的原因是它不是为与 Android 一起使用而设计的。要删除 .jar 文件，您必须删除对其的所有引用并将其从构建路径中删除以尝试删除。

# c++ - 证书错误打开 ssl C

> ID：11449284
> 
> 赞同：1
> 
> 时间：2012-07-12T09:52:22.090
> 
> 标签：c++, openssl, x509certificate

我在 c 中使用 openssl 来验证证书。有什么办法可以跳过自签名证书错误？对于所有具有无效/过期/不匹配 url 证书的站点，我都会收到该错误，并且我无法检测到任何其他错误。

我使用该函数 `SSL_CTX_load_verify_locations(ctx,0,CA_LIST))`加载 CA_LIST。它究竟是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:40:54.133

当对等方发送的证书列表中存在根证书或自签名证书时，证书链中的错误自签名证书就会出现，但是相同的证书未加载到您的信任库中。

将`SSL_CTX_load_verify_locations(ctx,0,CA_LIST))`尝试加载 CA_LIST 中提到的路径中存在的 CA。

函数原型是 int`SSL_CTX_load_verify_locations(SSL_CTX *ctx, const char *CAfile, const char *CApath);`

OpenSSL 帮助页面说：

“如果 CApath 不为 NULL，它指向包含 PEM 格式的 CA 证书的目录。每个文件都包含一个 CA 证书。文件通过 CA 主题名称哈希值查找，因此必须可用。如果多个存在同名哈希值的 CA 证书，扩展名必须不同（例如 9d66eef0.0、9d66eef0.1 等）。按照扩展名的顺序进行搜索，与证书的其他属性无关。使用 c_rehash实用程序来创建必要的链接。CApath 中的证书仅在需要时查找，例如在构建证书链或实际执行对等证书验证时。

[您可以从此处](http://www.openssl.org/docs/ssl/SSL_CTX_load_verify_locations.html)的 OpenSSL 页面获取更多信息。

# unit-testing - Grails Unit Testing: Json-Codec missing / How to mock Json-Codec?

> ID：11449300
> 
> 赞同：0
> 
> 时间：2012-07-12T09:53:04.003
> 
> 标签：unit-testing, grails, codec

I'm unit testing a controller and currently I'm stuck with the method-call of "encodeAsJSON()" in a service (called by the controller).

I get the MissingMethodException, which I would expect as encodeAsJSON() is a Grails-Codec.

After a bit of searching the `loadCodec`-Method should do what I want.

But I can't import it, because my IDE (SpringSource-ToolSuite) can't find it.

Error:

```
import org.codehaus.groovy.grails.plugins.codecs.JSONCodec 
```

Everything works:

```
import org.codehaus.groovy.grails.plugins.codecs.HTMLCodec 
```

But I don't need the HTMLCodec and the [documentation](http://grails.org/doc/latest/ref/Plug-ins/codecs.html) doesn't list the JSONCodec.

The method itself is still working (running the application), but I don't know how to unit test it. Any ideas? Am I missing something obvious?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:39:41.123

Well, further searching and trying got me the answer:

```
Map.metaClass.encodeAsJSON = { -> delegate } 
```

The example I used was

```
String.metaClass.encodeAsSha1 = { -> delegate } 
```

([Source](http://blogs.bytecode.com.au/glen/2008/03/12/mockfor-march-unit-testing-grails-controllers.html))

String didn't work - of course as I'm using a Map, which should be converted to JSON.

I think you have to "mock" (is this real mocking?) it on the Groovy-Interface of the corresponding datatype.

Hope this helps somebody else

# php - Azure 云服务中的 PHP

> ID：11449301
> 
> 赞同：0
> 
> 时间：2012-07-12T09:53:04.477
> 
> 标签：php, azure, cloud

任何人都可以建议在 Azure 云服务中运行一个简单的 php 文件需要做什么配置。

我可以在 Azure 网站中查看我的简单 php 文件，但我无法在 Azure 云服务中查看相同的文件。

有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T22:37:40.377

当您说“我可以在 Azure 网站中查看我的简单 php 文件，但我无法在 Azure 云服务中查看相同的文件。”时，我相信您的意思是您可以在 Windows Azure 网站中浏览您的 PHP 站点，但不能使用 Windows Azure 服务配置为 something.cloudapp.net。不是吗？

当您在此处寻求建议时，您可以使用一些步骤来解决您的问题：

1.  当您访问您的 PHP 文件，即 servicename.cloudapp.net/phpinfo.php 时，它会显示文件未找到错误还是返回与 PHP 运行时相关的错误？这是因为在部署之前，您需要将 PHP 运行时以及包中的所有 PHP 文件放在一起。如果您错过任何重要内容，您的网站将无法运行。因此，您必须确保特定于您的应用程序的所有内容都在您部署到 Windows Azure 云服务的包中。

2.  要验证您的包中是否包含所有内容，您可以将 cspkg 重命名为 zip，然后将其解压缩。之后，您可以再次将 cssx 文件重命名为 zip 并解压缩以查看是否所有内容都在那里。

3.  您可以启用对 Azure VM 的 RDP 访问并登录以检查一致性

对于 Azure 云服务，您还可以使用以下文档：[http ://azurephp.interoperabilitybridges.com/articles/packaging-applications](http://azurephp.interoperabilitybridges.com/articles/packaging-applications)

# java - 使用 WebDriver 在 Android 上测试 Google Chrome

> ID：11449303
> 
> 赞同：1
> 
> 时间：2012-07-12T09:53:05.763
> 
> 标签：java, android, selenium, webdriver

我们需要使用 WebDriver 在 Android Emulator 上测试 Google Chrome。我正在使用 WebDriver，并且可以通过在 Android Emulator 上安装 Selenium Server 在默认浏览器上进行测试。但是，当我使用 RemoteWebDriver 将所需功能设置为 chrome 和平台 Android 时，我可以开始测试，但它会打开默认浏览器而不是 chrome。有任何想法吗！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:57:48.477

这在 Android 上尚无法实现。

目前您只能针对 Selenium 构建的 apk 运行 webdriver 测试，这不是 Google Chrome 浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T12:06:36.870

在 GTAC 2013 上，Ken Kania（一位 Google 工程师）在他的演讲中宣布了适用于 Android 的 Chrome 驱动程序的 alpha 版本。[https://docs.google.com/presentation/d/14xU207jL1aepO_8-WrkEcSIPUscUjak5jtxMaUoMegg/pub?start=false&loop=false#slide=id.gbe6ac7bc_0129](https://docs.google.com/presentation/d/14xU207jL1aepO_8-WrkEcSIPUscUjak5jtxMaUoMegg/pub?start=false&loop=false#slide=id.gbe6ac7bc_0129)

该文档最近已移至以下站点，它仍然很简陋 [https://sites.google.com/a/chromium.org/chromedriver/getting-started/getting-started---android](https://sites.google.com/a/chromium.org/chromedriver/getting-started/getting-started---android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T14:36:20.563

我可以使用 Chrome 驱动程序在 Android 设备上的 Chrome 上运行测试。我正在使用[QAF（以前称为 ISFW）- Selenium 框架](http://qmetry.github.io/qaf)，我提供了以下配置：

selenium.defaultBrowser=chromeDriver

chrome.aditional.capabilities={"chromeOptions":{"androidPackage":"com.android.chrome"}}

[对于非 ISFW 用户， Chrome 驱动程序 wiki 页面](https://sites.google.com/a/chromium.org/chromedriver/getting-started/getting-started---android)上提供了详细信息。

# android - 无法在 JellyBeans 和新 Eclipse 中的几个项目的新设置中找到应用程序类

> ID：11449304
> 
> 赞同：0
> 
> 时间：2012-07-12T09:53:14.887
> 
> 标签：android

我已经有了带有 android 插件和 ICS 的 Eclipse。有时我在更新到新版本的 ADT 插件后会遇到问题。因此，为了使用 jellybeans (4.1)，我在 programFile 文件夹的不同文件夹中下载并安装了新的 android，并在不同的文件夹中安装了新的 eclipse（Juno Classic 版本：4.2.0）。在配置两者之后，我为旧 Eclipse 使用的新 Eclipse 使用了相同的工作区。现在我的两个具有外部 jar 的项目在这个 Eclipse 中不起作用。即使我从 cvs 创建了新项目，它也无法正常工作。在新的 Eclipse 中创建项目之后，即使我进入旧的 Eclipse，我也无法运行它。它显示以下异常。问题是它无法找到我的应用程序类，它说无法启动应用程序类，因为它找不到它，但它已经在清单文件中定义。其他小型示例项目没有自己的应用程序类，这可能是它们工作正常的原因之一。例外情况如下。欢迎任何建议或帮助。

```
java.lang.RuntimeException: Unable to instantiate application com.muvee.vea.MveaApplication: ****java.lang.ClassNotFoundException**: com.kartik.MveaApplication**
07-12 09:43:01.100: E/AndroidRuntime(6012): Caused by: **java.lang.ClassNotFoundException: com.kartik.vea.MveaApplication**
07-12 09:43:01.100: E/AndroidRuntime(6012):     at android.app.LoadedApk.mak 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:17:15.500

答案在以下链接中。我们需要在 Order and Import 选项卡中指定外部 jar。您可以参考[此链接](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:06:53.930

Start your old eclipse with a new workspace, checkout your project into your new workspace and try to run it. Does it work?

Start your new eclipse with a new workspace, checkout your project into your new workspace and try to run it. Does it work?

Also did you say you installed the Android SDK twice? No need for that though.

# sql - SQL 关系数据库 - 表中的表名

> ID：11449306
> 
> 赞同：0
> 
> 时间：2012-07-12T09:53:20.310
> 
> 标签：sql

我有这些桌子

**数据类型**

```
Name     TableName
-------------------
Animal   dataAnimal
Vehicle  dataVehicle 
```

**数据车辆**

```
ID      Name       Speed
-------------------
1       Car        10
2       Bike       2
3       Horse      4 
```

**数据动物**

```
ID      Name       ImageFile
-----------------------------
1       Cow        cow.jpg
2       Sheep      sheep.jpg
3       Pig        pig.jpg 
```

是否可以与数据类型列`TableName`和具有该名称的所有表建立关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:55:40.003

*不，这在几乎任何*SQL 数据库中都是不可能的。

关系、表名和列名不是动态的——基于这种结构进行查询的唯一方法是使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)，这很复杂，并且带有[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)等危险。

您需要重新考虑您的设计或持久性技术的选择。

# c# - MySqlDataReader 必须关闭

> ID：11449307
> 
> 赞同：1
> 
> 时间：2012-07-12T09:53:22.397
> 
> 标签：c#, mysql

```
MySqlCommand status =
    new MySqlCommand("select name_ru from request_status where id = '50'", conn);
MySqlDataReader dr_status = status.ExecuteReader();
dr_status.Read();
MySqlCommand cmd = new MySqlCommand(query, conn);
dt.Load(cmd.ExecuteReader());
MySqlDataReader dr = cmd.ExecuteReader(); 
```

错误：

> MySqlDataReader 必须先关闭

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:09:48.460

您只需同时使用一个阅读器。您正在使用三个。将所有阅读器包装在 using-block 中，以确保它们在所有情况下都被处理掉。

`ExecuteReader`是执行您的 SQL 的内容。在您的示例代码中，您执行相同的 SQL 三次，这可能不是您想要的。

# asp.net-mvc-3 - MVC3 测试 ModelState 排除视图中的属性错误

> ID：11449309
> 
> 赞同：2
> 
> 时间：2012-07-12T09:53:30.743
> 
> 标签：asp.net-mvc-3, modelstate, validationsummary

我在 Google 和 Stack Overflow 上进行了一些搜索，但找不到这个问题的答案。

我认为有以下几点

```
@if (!Html.ViewData.ModelState.IsValid)
{
    @Html.ValidationSummary(true)<br />
} 
```

我只对模型错误感兴趣，但如果发现属性错误，测试将返回 true。如何仅测试模型错误？

`<br />`我可能需要在这里澄清一下，当有属性错误但没有模型错误时，我想做测试以停止被写出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:07:40.520

如果你去 ValidationSummary 的来源，你可以找到

```
IEnumerable<ModelState> modelStates = null;
if (excludePropertyErrors) { 
    ModelState ms;
    htmlHelper.ViewData.ModelState.TryGetValue(htmlHelper.ViewData.TemplateInfo.HtmlFieldPrefix, out ms);
    if (ms != null) {
        modelStates = new ModelState[] { ms }; 
    }
} 
else { 
    modelStates = htmlHelper.ViewData.ModelState.Values;
} 
```

所以我认为你可以制作这样的方法

```
public static bool ModelStateHasModelErrors(this HtmlHelper htmlHelper) {
   ModelState ms;
   htmlHelper.ViewData.ModelState.TryGetValue(htmlHelper.ViewData.TemplateInfo.HtmlFieldPrefix, out ms);
   return ms != null;
} 
```

# tabs - how to change gtk tab height in gtkrc file?

> ID：11449317
> 
> 赞同：1
> 
> 时间：2012-07-12T09:53:56.407
> 
> 标签：tabs, gtk

I want to change GTK tab (something like terminal tab or Firfox tab) height. I know that `TKNotebook` can do this but I do not know which property is the height. `GTKNotebook::height=xxx` does not work. By the way, can GTK change the height of the Firefox tab?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:04:12.723

我不认为 GTK 可以改变 Firefox 的外观，因为 Firefox 使用它自己的 UI/widget 系统。可能有允许更改它的扩展或主题。

# jquery - Jquery 改变 div/img 的位置

> ID：11449318
> 
> 赞同：0
> 
> 时间：2012-07-12T09:54:00.553
> 
> 标签：jquery, image, html, positioning

我找到了一种解决方法，可以在较小的 div 中将大图像（无背景）居中。

```
#pic {
 width: 60%;
 height: 349px;
 float:right;
 overflow:hidden;
 position:relative;
}

#pic img {
 left:50%;
 margin-left: -100%;
 position:relative;
} 
```

我对这个定位很满意。

但是，一旦我使用了 Jquery 循环插件，它就会完全打乱图像的位置和大小。

当我检查元素（使用 DOM 检查器）时，它会删除以下值：

~~左：50%；~~

~~左边距：-100%；~~

这导致了重新定位。

为什么在使用 Jquery 后它们突然不再有效，我该如何解决这个问题？

感谢您的任何帮助！

斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:15:37.710

您可以尝试在 css 中添加 !important

```
 #pic {
 width: 60% !important;
 height: 349px;
 float:right;
 overflow:hidden;
 position:relative;
}
#pic img { 
left:50%;
 margin-left: -100% !important;
 position:relative;
} 
```

# .net - 快速可视化大量数据的方法

> ID：11449325
> 
> 赞同：1
> 
> 时间：2012-07-12T09:54:23.373
> 
> 标签：.net, performance, algorithm, compression, plot

我正在寻找一些方法来压缩大量（并且动态增长的）数据以在图形视图中进行可视化。

假设我有一个由时间戳值对组成的二进制文件。该文件实时增长，很容易超过几千兆字节。

现在有多个视图将这些数据显示为图形/绘图。由于在大多数情况下，x 轴上的数据远多于像素，因此我们需要以某种方式将这些数据压缩到所需的分辨率。每个视图可能需要不同的分辨率，具体取决于其在屏幕上的大小。放大和缩小也会导致该分辨率的快速变化。

当前算法将数据分成等长的部分并计算最小值和最大值。现在，对于 x 轴上的每个像素，我们绘制一条从最小值到最大值的垂直线。这样我们就可以确保不会错过异常值。（这是一个要求）

每次需要新的分辨率时，我们都必须选择另一个部分长度并遍历整个文件，这会很慢。

一个解决方案是创建某种缓存层，允许我们对不同分辨率的数据进行（恒定时间）调用。不幸的是，我不知道如何以仍然向我们展示异常值的方式实现这样的缓存。

您是否有任何提示或知道文献显示解决此类问题的方法？

环境是 Microsoft .net，但这不应该有所作为，因为这是关于一般的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:39:36.310

我的方法是将数据存储在几个文件中，如下所示：

*   将 {timestamp, value} 附加到 FILE[0]。
*   对于 i = 0 ... MAX_REASONABLE：
    *   如果 FILE[i] 的样本计数模 ZOOM 不为零，则退出。
    *   从 FILE[i] 获取最后的 ZOOM 样本。
    *   将它们压缩成单个样本（例如平均时间戳？获取最小值？）和平均样本数据。
    *   如果 FILE[i+1] 不存在，则创建它。
    *   将新创建的样本写入 FILE[i+1]

数据总量收敛到 SIZE * (1/(1-(1/ZOOM))) - 如果 ZOOM=2，则需要 100% 的额外空间，如果 ZOOM=4，则仅需要 33%，依此类推。

可视化时，您可以快速选择要显示的最接近的级别。假设您需要可视化包含 600.000 个样本的范围中的 800 个像素，ZOOM=2；那么 600.000/800 的对数除以 ZOOM 的对数得到 9.55，这意味着您需要访问缩放级别 9。

该文件被缩放 ZOOM^9 = 512 倍，即您将读取 600.000/512 = 1171 个样本并将 1171 x H 图像重新采样为 800 像素宽度。

总写入成本平均最多增加 300%；总存储需求最多将增加 100%；要生成图像，您的成本或多或少会保持不变，具体取决于您生成的屏幕图像的宽度。

我曾在这样的地图渲染系统上工作过，它可以通过实时平移和缩放从太像素地图中显示一个矩形区域（网络吞吐量和延迟除外，也就是说：在那里，我们使用 JPEG 质量）。

# ms-access - 将 MS Project 2010 导出到 MS Access .mdb 文件

> ID：11449326
> 
> 赞同：0
> 
> 时间：2012-07-12T09:54:24.517
> 
> 标签：ms-access, export, ms-project

我编写了一个 C# 应用程序，它与 MS Project 2003 导出的 .mdb 一起使用。现在我的公司已经升级到 MS Project 2010，我找不到任何机会将整个数据导出到 .mdb 文件。

您能帮我导出所有数据还是有其他解决方案。我将非常感谢任何解决方法提示！

这些是我无条件需要的表：MSP_ASSIGNMENTS、MSP_CALENDAR_DATA、MSP_CALENDARS、MSP_PROJECTS、MSP_RESOURCES、MSP_TASKS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:50:50.257

如果您不介意自己编写代码来填充数据库，您可以使用 Project SDK ( [http://msdn.microsoft.com/en-us/library/ee758031](http://msdn.microsoft.com/en-us/library/ee758031) ) 或类似 MPXJ ( [http:// /mpxj.sf.net](http://mpxj.sf.net)）。您甚至可以使用 Project 本身中的 VBA 宏来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T23:43:40.620

转到“项目”选项卡，单击“可视报告”，然后单击“保存数据”按钮（朝向底部），然后单击“保存数据库”。

# jquery - 如何在淡入淡出效果中显示背景颜色并使用 jQuery 删除样式属性

> ID：11449329
> 
> 赞同：0
> 
> 时间：2012-07-12T09:54:32.350
> 
> 标签：jquery

我想更改悬停功能的背景颜色，但我想以慢动作显示。我还在悬停时添加了一些 CSS 属性，并希望删除并悬停。但我的功能不符合我的要求。

```
$(function (){

      $('.box').hover(function (){

          $('body').css({'background-color':'black'})

          $(this).css('-moz-transition', 'opacity .3s')
          $(this).css('-webkit-transition', 'opacity .3s')
          $(this).css('-o-transition', 'opacity .3s')
          $(this).css('-ms-transition', 'opacity .3s')

          }, function () {

              $('body').css({'background-color':'black'})

              $(this).remove('-moz-transition','none')

              })

      }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:27:49.700

我还不知道这个功能，但你的悬停功能有一些错误。摆脱：

```
 $(this).css('-moz-transition', 'opacity .3s')
  $(this).css('-webkit-transition', 'opacity .3s')
  $(this).css('-o-transition', 'opacity .3s')
  $(this).css('-ms-transition', 'opacity .3s') 
```

他们不应该被这样分配。而是在您的 css 中为`.box`.

当您添加过渡属性时，摆脱不透明度并添加`-duration`到末尾，`transition`因此最终添加看起来像这样：`-moz-transition-duration: 3s`

您要更改文档`body` `background-color`属性还是`.box background-color`悬停时的属性？我有点困惑。

如果更改是在身体背景上，这里是一个[小提琴](http://jsfiddle.net/B5GpK/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:57:32.053

可以使用 Jquery UI 完成颜色转换。[这是演示。](http://jqueryui.com/demos/animate/)

# c# - 命名空间规范

> ID：11449347
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:55:35.043
> 
> 标签：c#, .net, visual-studio

我想在我的控制台程序中使用最简单的消息框（选择了空的 C# 项目类型）。

```
using System;
using System.IO;
using System.Text;
using System.Collections.Generic;
using System.Windows.Forms;

namespace roughDraft
{
    class Program
    {
        public static void Main()
        {
            MessageBox.Show("Hello :)");

            Console.ReadKey();           
        }
    }
} 
```

> 命名空间“System.Windows”中不存在类型或命名空间名称“Forms”（您是否缺少程序集引用？）

正如您在这种情况下看到的那样，程序不起作用，尽管我使用了与[官方文档](http://msdn.microsoft.com/en-us/library/519bytz3.aspx)中指定的完全相同的命名空间。

为什么使用较少指定的命名空间，即 System.Windows 时没有问题？如何决定要不要“砍”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:58:14.110

命名空间不是“就在那里”。您需要包含对 .NET DLL 的引用才能访问命名空间。例如，命名空间是在dll`System.Windows.Forms`中定义的。`System.Windows.Forms.dll`创建控制台应用程序时，未引用此 DLL。所以要使用它，你需要引用它。

如果您已创建 WPF 应用程序，则默认情况下不能使用`System.Windows.Forms`命名空间。您需要添加对`System.Windows.Forms`and的引用`System.Drawing`，或者使用`System.Windows.MessageBox`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:57:30.897

编译器会告诉您问题所在：您缺少对`System.Windows.Forms.dll`. 一旦你[添加了引用](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx)，就不会有问题了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T09:57:44.420

您需要添加引用`System.Windows.Forms.dll` 才能使用它。要添加引用，请按照以下步骤操作：

1.  在解决方案资源管理器中，右键单击项目节点，然后单击添加引用。

2.  在“添加引用”对话框中，选择`.NET`选项卡并选择`System.Windows.Forms`并单击“确定”。

# c# - 如何在浏览器和目标服务器中间使用透明代理（本地主机）？

> ID：11449356
> 
> 赞同：0
> 
> 时间：2012-07-12T09:55:58.557
> 
> 标签：c#

“我们要求浏览器将所有流量发送到本地主机，然后流量可以发送到我们的服务器

否则浏览器将直接向目标服务器发出请求（例如 google ）..”

透明代理可以在不破坏 http 和 https 流量的任何地方使用。

```
Browser -> lcoal host(create ssl) -> our server -> google 
```

那么，如何在浏览器和目标服务器中间使用透明代理（本地主机）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:17:47.930

I would start by looking at [Fiddler](http://www.fiddler2.com/fiddler2/)'s quickstart videos. This is a tool used as a proxy for web debugging, and is used as a transparent proxy as you describe. The basic idea is the same, you have to configure your browser to point at the proxy and then the proxy has to 'forward' the traffic on.

# php - 无法创建forloop数组php

> ID：11449362
> 
> 赞同：1
> 
> 时间：2012-07-12T09:56:18.837
> 
> 标签：php, arrays

```
<ul class="selectplanparagraph">
<li>
    <h3><?php echo $comparetxt[0][0]; ?></h3>
    <img width="280" height="80" src="<?php echo $comparetxt[0][1]; ?>" alt="">
    <p><?php echo $comparetxt[0][2]; ?></p>
</li>
<li>
    <h3><?php echo $comparetxt[1][0]; ?></h3>
    <img width="280" height="80" src="<?php echo $comparetxt[1][1]; ?>" alt="">
    <p><?php echo $comparetxt[1][2]; ?></p>
</li>
<li>
    <h3><?php echo $comparetxt[2][0]; ?></h3>
    <img width="280" height="80" src="<?php echo $comparetxt[2][1]; ?>" alt="">
    <p><?php echo $comparetxt[2][2]; ?></p>
</li>
<!-- End .selectplanparagraph --></ul> 
```

我想循环这个而不是在数组中有 3 个带有硬编码位置的 LI，我更愿意做一个简单的循环。我试过但我失败了。这个带有数组的循环比我想象的要复杂:) 至少对我来说是初学者:)

数组看起来像这样：

```
$comparetxt = [ 
    [ "Title 1", "url 1", "text 1" ],
    [ "Title 2", "url 2", "text 2" ],
    [ "Title 3", "url 3", "text 3" ]
]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:59:24.910

试试这个

```
foreach ($a as $v1) {
    foreach ($v1 as $v2) {
        echo "$v2\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:01:02.313

首先，您的数组表示法似乎是错误的。试试这个

```
<?php
$comparetxt = array(
    array('title' => 'Title 1', 'url' => 'www.google.com', 'text' => 'text 1'),
    array('title' => 'Title 2', 'url' => 'www.google.com', 'text' => 'text 2'),
    array('title' => 'Title 3', 'url' => 'www.google.com', 'text' => 'text 3')
);
?>
<ul class="selectplanparagraph">
<?php foreach($comparetxt as $compare) { ?>
<li>
<h3><?php echo $compare['title']; ?></h3>
<img width="280" height="80" src="<?php echo $compare['url']; ?>" alt="">
<p><?php echo $compare['text']; ?></p>
</li>
<?php } ?>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:03:33.497

这就是你所追求的吗？

```
foreach($comparetxt as $compareitem) {
    ?>
    <li>
    <h3><?php echo $compareitem[0]; ?></h3>
    <img width="280" height="80" src="<?php echo $compareitem[1]; ?>" alt="">
    <p><?php echo $compareitem[2]; ?></p>
    </li>
    <?php
} 
```

# jquery-mobile - 防止表单元素水平跨越

> ID：11449363
> 
> 赞同：0
> 
> 时间：2012-07-12T09:56:19.853
> 
> 标签：jquery-mobile

默认情况下，jQuery Mobile 中的表单元素（输入）跨越屏幕的整个宽度。

如何使它们适合其内容的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:16:09.410

您可以使用`data-inline="true"`按钮和选择使它们跨越其内容的宽度。

# opencv - 如何使用opencv检测蓝色对象

> ID：11449364
> 
> 赞同：3
> 
> 时间：2012-07-12T09:56:19.853
> 
> 标签：opencv, colors, blob, detect

我正在使用该[指南](http://ipr10.wikidot.com/blob-detection)来检测某种颜色的斑点。在该指南中，它检查橙色的 blob 并使用以下值：

```
int orange[3] = {200, 250, 10}; 
```

在指南上它说这个值代表 HSV 中的橙色。

我不知道他们如何计算这些值，但我尝试检查从 rgb 转换为 hsv 的蓝色值，但它不起作用。我必须检测的是这种颜色：

![这个颜色](../Images/4c93640ed1c4d4c6652cb4f5e83a26ce.png)

关于如何确定 HSV 值以检测颜色的任何想法？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:00:02.347

对于`blue`，它可以用作 HSV 值：`[120,255,255]`

`GIMP`我是通过Photoshop 等开源图像处理工具计算得出的。同样，您可以使用任何工具来执行此操作。

但请记住，在 OpenCV 中，**色调范围为 0-180，S = 0-255，V = 0-255**

但在 GIMP 中，**它是 H = 0-360, S = 0-100, V = 0-100**。所以你必须根据它应用缩放。

谷歌搜索有很多互动网站。你可以试试。

*   要了解他们如何转换这些值，请查看其[维基百科页面。](http://en.wikipedia.org/wiki/HSL_and_HSV)
*   或者您可以查看 OpenCV 文档以了解它在 OpenCV 中的工作原理： [cvtColor()](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=cvtcolor#cvtcolor)

我刚刚在这里为你粘贴了关系：

![在此处输入图像描述](../Images/f0ba4c1f98b65bb6a42ae19e5adba36e.png)

![在此处输入图像描述](../Images/0276de9284ad4054f4b77dc47a73ff59.png)

![在此处输入图像描述](../Images/906b2bf9bac225a8535194370b52d7cc.png)

# openmp - 使用 OpenMP 的 C/C 科学库

> ID：11449366
> 
> 赞同：0
> 
> 时间：2012-07-12T09:56:23.330
> 
> 标签：openmp

我必须在某些算法中利用 PpenMP，为此我需要一些数学函数，例如MATLAB 中可用的`eig`或者`svd`它在 MATLAB 中非常快。我已经使用 OpenMP 尝试了以下库

1.  [GSL - GNU 科学图书馆](http://www.gnu.org/software/gsl/)

2.  [Eigen C++ 模板库](http://eigen.tuxfamily.org/index.php?title=Main_Page)

但我不知道为什么我的 OpenMP 并行代码比串行代码慢得多，可能是库中有问题，或者函数`random`，`eig`或者`svd`阻塞？我不知道如何弄清楚，有人可以建议我哪个与 OpenMP 最兼容的数学库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:05:10.380

I can recommend Intel's [MKL](http://software.intel.com/en-us/articles/intel-mkl/); note that it costs money which may affect your decision. I neither know nor care what language(s) it is written in, just so long as it provides APIs callable from my chosen language. Mine is Fortran, but it has bindings for C too

If you look around SO you'll find many questions from people whose first (or second or third) OpenMP programs were actually slower than their serial versions. Look at some of the answers. Don't conclude that there is a magic bullet, in the shape of a library, to make your code faster. Instead, realise that it is most likely that you've written a poorly-parallelised program and fix that.

Finally, if you have an installation of Matlab, don't expect to be able to write your own routines to outperform Matlab's. I won't say it can't be done, but I think you'll find it very difficult.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T14:30:12.127

我认为您只想找到已经线程化的 lapack （或相关例程）的快速实现，但是从您的问题中很难分辨。High Performance Mark 建议使用 MKL，这是一个很好的例子；其他包括[ATLAS](http://math-atlas.sourceforge.net/)或[FLAME](http://z.cs.utexas.edu/wiki/flame.wiki/FrontPage)，它们是开源的，但需要做一些工作才能构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:07:59.843

GSL 与 OpenMP 兼容。您可以试用免费试用版的英特尔数学内核库。如果加速不是那么快，那么代码可能无法并行化。您可能希望在英特尔线程检查器中调试并查看正在运行的线程的详细信息，这可能有助于了解瓶颈所在。

# delphi - 向 TMS 控件“TAdvSmoothDock”添加新属性，但它没有出现在对象检查器中

> ID：11449368
> 
> 赞同：-1
> 
> 时间：2012-07-12T09:56:33.320
> 
> 标签：delphi, tms

我正在尝试向 TMS 控件“TAdvSmoothDock”添加一个新属性（图像：TImageList），但该属性未出现在对象检查器中

我在“已发布”下将其定义如下：

```
Published
  property Images: TImageList read GetImages write SetImages; 
```

我可以编译它，但该属性没有出现在对象检查器中。在代码中使用控件时，它确实出现在 delphi IDE 中：

喜欢 ：

```
AdvSmoothDock1.Images := ImageList1; 
```

目前我正在使用 Delphi XE2 VCL。

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T11:01:28.073

您需要重新构建包含该组件的 TMS 包，而不仅仅是更改源代码。

对象检查器不使用代码源来确定要显示的内容。它使用从包含组件的运行时包中的编译版本获得的 RTTI（运行时类型信息）（如果没有可用的运行时包，则使用设计时包。

找出 TMS 组件所在的包，在 IDE 中打开该包的源代码（包的 .dproj 文件），然后构建该包。确保它看到的是您的源版本而不是正常的 TMS 版本，以便使用您的更改。

（当然，**正确的**做法是创建您自己的 TAdvSmoothDock 后代，添加属性，将其放入您自己的使用 TMS 的包中，并且永远不要接触 TMS 源代码。）

# ios - 在 NSDictionary 中知道其中一个键值时获取其他键值

> ID：11449369
> 
> 赞同：1
> 
> 时间：2012-07-12T09:56:35.353
> 
> 标签：ios, nsdictionary

```
<array>
<array>
    <dict>
        <key>UserName</key>
        <string>BMWM6</string>
        <key>Engine</key>
        <string>4.0</string>
        <key>Image</key>
        <string>bmwM6.png</string>
        <key>Dealers</key>
        <string>USA</string>
        <key>Phone</key>
        <string>10000</string>
        <key>Price</key>
        <string>68</string>
        <key>Category</key>
        <string>BMW</string>
    </dict>
    <dict>
        <key>UserName</key>
        <string>BMWi740</string>
        <key>Engine</key>
        <string>4.0</string>
        <key>Image</key>
        <string>bmwM6.png</string>
        <key>Dealers</key>
        <string>NewYork</string>
        <key>Phone</key>
        <string>13800138000</string>
        <key>Price</key>
        <string>235</string>
        <key>Category</key>
        <string>BMW</string>
    </dict>
    <dict>
        <key>UserName</key>
        <string>BMWX6</string>
        <key>Engine</key>
        <string>3.0</string>
        <key>Image</key>
        <string>bmwM6.png</string>
        <key>Dealers</key>
        <string>NewYork</string>
        <key>Phone</key>
        <string>13800138000</string>
        <key>Price</key>
        <string>231</string>
        <key>Category</key>
        <string>BMW</string>
    </dict>
</array>
<array>
    <dict>
        <key>UserName</key>
        <string>E60</string>
        <key>Engine</key>
        <string>3.5</string>
        <key>Image</key>
        <string>BenzE60.png</string>
        <key>Dealers</key>
        <string>NewYork</string>
        <key>Phone</key>
        <string>13800138000</string>
        <key>Price</key>
        <string>180</string>
        <key>Category</key>
        <string>BENZ</string>
    </dict>
</array>
<array>
    <dict>
        <key>UserName</key>
        <string>R8</string>
        <key>Engine</key>
        <string>4.5</string>
        <key>Image</key>
        <string>audiR8.png</string>
        <key>Dealers</key>
        <string>NewYork</string>
        <key>Phone</key>
        <string>13800138000</string>
        <key>Price</key>
        <string>220</string>
        <key>Category</key>
        <string>AUDI</string>
    </dict>
</array> 
```

我有这个列表。一旦我得到“BMWM6”的值，我如何知道数组中同一个字典中的另一个值？你能给我一些帮助吗？提前致谢。就是这样：我知道 BMWM6 这个值，所以我想知道其他关键值，如 Engine/Dealers/Phone 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:07:14.657

假设 plistArray 是您的 plist 内容：

```
NSString *username = @"BMWM6";
NSPredicate *pre = [NSPredicate predicateWithFormat:@"UserName = %@", username];
NSDictionary *resultDict = [[plistArray filteredArrayUsingPredicate:pre] lastObject];

// now you have the dictionary
// dealer:
NSString *dealers = [resultDict objectForKey:@"Dealers"];
NSLog(@"dealers: %@", dealers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:50:51.737

```
NSArray *carArray = [plistArray objectAtIndex:0];
    NSDictionary *resultDict;
    for (NSDictionary *dictionary in carArray) {
        NSString *userName = [dictionary objectForKey:@"UserName"];
        if ([userName isEqualToString:carName]) {
            resultDict = dictionary;
            break;
        }
    } 
```

从harakiri，我使用它并得到答案。

# c - 将西里尔字符写入 xml 文件

> ID：11449373
> 
> 赞同：1
> 
> 时间：2012-07-12T09:57:00.910
> 
> 标签：c, libxml2, xmltextwriter

我正在使用`xmlTextWriter`from`libxml2`来编写一些 xml 文件。我需要在其中写入西里尔字符。我这样做：

```
xmlTextWriterStartDocument(writer, NULL, "utf-8", NULL);
...
snprintf(buf, sizeof(buf), "%s", "тест");
xmlTextWriterWriteAttribute(writer, 
                            (const xmlChar*)"test_attribute", 
                            (const xmlChar*)buf); 
```

但是当我打开生成的 xml 文件时，我会看到我的文本的 html 表示，就像这样：`test_attribute="&#x442;&#x435;&#x441;&#x442;"`

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:54:55.780

您需要使用单独的 utf-8 编码器。

在 snprintf() 中，您的文本采用 CP-1251（单字节 ASCII 时代编码），而不是 UTF-8（可变宽度编码）。

请参阅此链接以获取参考实现：http: [//7maze.ru/node/29](http://7maze.ru/node/29)

评论是俄语的，但您只需要一个转换表和

```
string convertToUtf8(const char* chars, int len) 
```

最后发挥作用。

您使用的“тест”字符串在编码时应该看起来像“РўРчС_С'”（绝对没有意义）。

来自一个旧项目的旧 C 代码。它使用 CP-866 编码（MS-DOS 的另一种“流行”编码），但从 CP-1251 转换很简单。

```
/// CP866 to UTF-8
char *dosstrtou(char *buffer,const char *dosstr)
{
    char *buf1=buffer;
    while (*dosstr)
    {
        if ( (*dosstr>127)&&(*dosstr<176) )
        {
            *buf1=208;
            buf1++;
            *buf1 = (char)(*dosstr+16);
            dosstr++;
            buf1++;
            continue;
        }       
        if ( (*dosstr>223)&&(*dosstr<240) )
        {
            *buf1=209;
            buf1++;
            *buf1 = (char)(*dosstr-96);
            dosstr++;
            buf1++;
            continue;
        }       
        if (*dosstr==240)
        {
            *buf1=208;
            buf1++;
            *buf1=129;
            dosstr++;
            buf1++;
            continue;
        }       
        if (*dosstr==241)
        {
            *buf1=209;
            buf1++;
            *buf1=145;
            dosstr++;
            buf1++;
        }
        *buf1=*dosstr;
        buf1++;
        dosstr++;
    }
    *buf1='\0';
    return (buffer);
}

/// CP1251 to CP866
char *winstrtodos(char *buffer){
    char *ptr=buffer;
    while (*ptr!='\0')
    {
        if ( (*ptr>=0x80+0x40)&&(*ptr<=0xAF+0x40) )
            *ptr =(char)(*ptr-0x40);
        if ( (*ptr>=0xE0+0x10)&&(*ptr<=0xEF+0x10) )
            *ptr = (char)(*ptr-0x10);
        if (*ptr==0xA8) *ptr=0xF0;  
        if (*ptr==0xB8) *ptr=0xF1;
        ptr++;
    }
    return (buffer);
} 
```

只是要小心内存。

# css - 跨浏览器兼容的 CSS 液体布局，具有 3 列 100% 宽度/高度

> ID：11449374
> 
> 赞同：0
> 
> 时间：2012-07-12T09:57:04.763
> 
> 标签：css, layout, html

我开始根据[这篇](http://matthewjamestaylor.com/blog/perfect-3-column.htm)文章创建我的 HTML/CSS 布局，并且或多/少成功。但是，我认为我的 css 在某个地方搞砸了，因为这个页面在 IE 或 Chrome/Firefox 中的显示方式不同......

基本上，我的想法是拥有 3 个等宽的列，高度为 100%。每列的内容应在左侧、顶部和右侧有一些填充，并且“主”链接应位于每列的底部，与其列的中心对齐。

这是我的布局草图

![在此处输入图像描述](../Images/81a3cbc139992f552b364ed9dcd5bd23.png)

[你可以在这里](http://www.krlja-ustvari.hr/test)看到我目前的结果。如果您在 Chrome/Firefox 中查看此页面，您可以看到内容`divs`正在从我的页面中“流出”，但是，在 IE 中的内容`divs`非常适合（我在内容上设置边框`divs`仅用于测试目的）。我不相信 IE 正确地呈现我的 CSS，而是我相信我的 CSS 做错了什么，但真的不确定是什么。感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:01:54.280

您将高度设置为 100%，但还设置了填充/边距等，高度是内部高度，填充/边距/边框将添加到此，从而导致溢出。

编辑：将填充/边距/边框设置为百分比，以便它们 + 高度加起来为 100%，或者使用 javascript 适当地计算像素来告诉您以像素为单位的窗口高度，从而允许您确定每列的正确高度。您始终可以在调整窗口大小时触发它，以像 CSS 中的 100% 规则一样。

# richfaces - 如何在 RichFaces 中的 event="uploadcomplete" 之后执行操作

> ID：11449376
> 
> 赞同：0
> 
> 时间：2012-07-12T09:57:17.107
> 
> 标签：richfaces

我需要`checker()`在`fileUpload` `event="uploadcomplete"`.

```
public void checker()
{fileProcessingEJB.checkInventoryToResolveAll();} 
```

以下代码执行文件上传，我需要在所有文件上传后执行某些操作。在这之后我会这样做`<rich:fileUpload> </rich:fileUpload>`吗？或者我可以调用`execute`属性中的方法`<a4j:ajax>`？

```
<rich:fileUpload 
    fileUploadListener="#{fileUploadBean.listener}"
    id="upload" acceptedTypes="xml"
    ontyperejected="alert('Only XML files are accepted');"
    maxFilesQuantity="50">
<a4j:ajax event="uploadcomplete" execute="#@none" render="info" />
</rich:fileUpload> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:42:57.960

看看这个[线程](https://community.jboss.org/thread/10910)

您可以使用如下监听器。

```
<rich:fileUpload id="generic_data_file" fileUploadListener="#{controller_bean.uploadFile}"
     <a4j:support event="onuploadcomplete" actionListener="#{controller_bean.loadInfoFileHook}"/>
</rich:fileUpload> 
```

如果你想做任何你可以做的动作`actionListener`。

**或者**

如果您想显示一条消息，请查看此[问题线程](https://issues.jboss.org/browse/RF-3566)（可能取决于您的版本）

# c# - 如何从 xml 结构中访问子元素？

> ID：11449379
> 
> 赞同：3
> 
> 时间：2012-07-12T09:57:23.127
> 
> 标签：c#, xml, linq-to-xml

我有以下不同的基本 svg 文档，其中包含 1 个流文本和 1 个文本元素：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="744.09448819"
   height="1052.3622047"
   id="svg2"
   version="1.1"
   inkscape:version="0.48.2 r9819"
   sodipodi:docname="New document 1">
  <defs
     id="defs4" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.35"
     inkscape:cx="375"
     inkscape:cy="520"
     inkscape:document-units="px"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1366"
     inkscape:window-height="706"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <flowRoot
       xml:space="preserve"
       id="flowRoot2985"
       style="fill:black;stroke:none;stroke-opacity:1;stroke-width:1px;stroke-linejoin:miter;stroke-linecap:butt;fill-opacity:1;font-family:Arial;font-style:normal;font-weight:normal;font-size:40px;line-height:125%;letter-spacing:0px;word-spacing:0px;-inkscape-font-specification:Arial;font-stretch:normal;font-variant:normal;text-anchor:middle;text-align:center;writing-mode:lr">
      <flowRegion
         id="flowRegion2987">
         <rect
           id="rect2989"
           width="600"
           height="162.85715"
           x="97.14286"
           y="89.505043"
           style="-inkscape-font-specification:Arial;font-family:Arial;font-weight:normal;font-style:normal;font-stretch:normal;font-variant:normal;font-size:40px;text-anchor:middle;text-align:center;writing-mode:lr;line-height:125%" />
       </flowRegion>
      <flowPara
         id="flowPara2993">Yahoo</flowPara>
    </flowRoot> 

    <text
       xml:space="preserve"
       style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"
       x="197.14285"
       y="352.36218"
       id="text3003"
       sodipodi:linespacing="125%">
      <tspan
         sodipodi:role="line"
         id="tspan3005"
         x="197.14285"
         y="352.36218">Gmail</tspan>
    </text>
  </g>
</svg> 
```

我只想获取元素内部的`g`元素（.ie `flowRoot & text`），

为此，我尝试了：

```
XElement svg = XElement.Load("path to svg file");
IEnumerable<XElement> elements = svg.Element("g").Elements(); 
```

但这不起作用。请帮帮我好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:23:59.087

试试这个，你的 XML 使用命名空间：

```
 XDocument doc = XDocument.Load(<path to file>);
        XNamespace ns1 = "http://www.w3.org/2000/svg";
        //Namespace of a root element can also be retrieved like this:
        //XNamespace ns1 = doc.Root.GetDefaultNamespace();
        var g = doc.Descendants(ns1 + "g").FirstOrDefault();
        if (g != null)
        {
            var flowroot = g.Element(ns1 + "flowRoot");
            var text = g.Element(ns1 + "text");
        } 
```

您应该在名称前加上命名空间：

```
 IEnumerable<XElement> elements = svg.Element(ns1 + "g").Elements(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:03:28.753

如果您不在 Linq2Xml 上，您可以使用`XmlDocument`and `XPath`：

```
var doc = new XmlDocument();
doc.Load(fileName);

var nodeList = doc.SelectNodes("//g");
if(nodeList != null)
    foreach (XmlNode node in nodeList)
    {
        // do anything you like
    } 
```

解释：

`SelectNodes(String)` 选择与 XPath 表达式匹配的[节点列表。](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.selectnodes.aspx)

`//g`在 XPath 中选择文档中的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:11:52.687

您可以通过以下方式将 XPath 与 xdoc 一起使用。

```
var nodes = svg.XPathSelectElements(path); 
```

这将为您提供 g 节点，然后您可以使用 .Element("") 或 .Elements("") 查询这些节点的子节点，具体取决于您期望多个或单个子节点的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:39:17.947

在这里，（使用这个[Xml 库](https://github.com/ChuckSavage/XmlLib)）

```
IEnumerable<XElement> elements = svg.XPath("//g/*"); 
```

这将返回两个 XElement 的内部。但是如果有超过 1 个`g`并且您只想要第一个，请使用`"//g[1]/*"`.

[看到这个例子](http://www.xpathtester.com/saved/30edfb9d-b6e0-4416-8efd-f8c36314dab0)，点击测试运行测试。测试完后，删除`[1]`以查看结果是否包含 next `g`，这样您就可以看到是否有超过 1`g`以获得您想要的结果的重要性。

# android - 如何为 android 制作更长的 facebook Graph API 会话

> ID：11449380
> 
> 赞同：0
> 
> 时间：2012-07-12T09:57:25.200
> 
> 标签：android, facebook, facebook-graph-api

我看到了这个问题：[会话已失效，因为用户更改了密码](https://stackoverflow.com/questions/8494049/the-session-has-been-invalidated-because-the-user-has-changed-the-password/11449321#11449321)，而我正在寻找相同问题的答案，但我不知道如何使 android 的会话更长所以有人可以告诉我如何. 我认为只有这两行必须更改：

```
String access_token = mPrefs.getString("access_token", null);
long expires = mPrefs.getLong("access_expires", 0); 
```

但我不知道他们必须如何改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:09:32.147

正如参考文献中提到[的](http://developers.facebook.com/docs/mobile/android/build/#extend_token)：

> 第 8 步：扩展访问令牌
> 
> 随着offline_access 的弃用，您需要在每次用户打开您的应用程序时扩展您的access_token。为此，请在应用程序的 onResume() 函数中调用 facebook 方法 extendAccessTokenIfNeeded：
> 
> 公共无效 onResume() {
> super.onResume(); facebook.extendAccessTokenIfNeeded(this, null); }
> 
> 注意：确保您在 [https://github.com/facebook/facebook-android-sdk/上拥有最新的 android SDK](https://github.com/facebook/facebook-android-sdk/)

# c# - 自定义先决条件

> ID：11449381
> 
> 赞同：1
> 
> 时间：2012-07-12T09:57:26.563
> 
> 标签：c#, winforms

我使用 Visual Studio 2010 成功创建了安装文件，但现在我需要包含第三方软件，并且该软件应该与我的安装文件一起安装，并且还需要在安装前检查它是否已经存在于供应商机器上，如果不存在，则执行安装。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:17:46.673

这可能是一个好的开始：引导程序 [链接](http://archive.msdn.microsoft.com/bmg)。另请参阅this，了解如何创建引导程序包[链接2](http://msdn.microsoft.com/en-us/library/ms165429.aspx)

[编辑]

[您可以在此处](http://archive.msdn.microsoft.com/bmg/Release/ProjectReleases.aspx?ReleaseId=1567)下载引导程序表单。它适用于 VS 2010，但您需要手动将生成的文件移动到新的引导程序位置（在我的情况下，64 位 Windows 7，C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A \引导程序\包）。

如果您打开了 VS，则必须重新启动它才能使您的先决条件显示在列表中。

# google-maps-api-3 - 谷歌地图上的可搜索标记

> ID：11449383
> 
> 赞同：0
> 
> 时间：2012-07-12T09:57:31.663
> 
> 标签：google-maps-api-3, maps

我正在尝试设置在 Google 地图上发布 5 个不同标记的情况。地图旁边是一个搜索栏，当我搜索其中一个标记的标题时，它会出现在地图上，而其他四个则消失。

有没有人碰巧有这样的例子？抱歉，缺乏技术性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:22:42.280

我有一个类似的要求，我通过在地图顶部添加一个下拉列表来解决这个问题，用户可以在其中选择一个要平移的标记。

这是一种快速而肮脏的方法：http: [//jsfiddle.net/gTnCU/2/](http://jsfiddle.net/gTnCU/2/)

# vb.net - vb6 函数到 vb.net

> ID：11449384
> 
> 赞同：0
> 
> 时间：2012-07-12T09:57:31.977
> 
> 标签：vb.net, vb6-migration

我在vb6中得到了这个代码

```
Private Sub pause(ByVal interval As Variant)
    Dim Current As Variant

    Current = Timer
    Do While Timer - Current < Val(interval)
        DoEvents
    Loop
End Sub 
```

如何在 vb.net 中转换？我已经尝试过这种方式，但它不起作用。

错误在哪里？

```
Private Sub pause(ByVal interval As Single)            
      Dim newDate As Date    
      newDate = DateAndTime.Now.AddSeconds(interval)

      While DateAndTime.Now.Second <> newDate.Second                
          Application.DoEvents()           
      End While    
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:17:00.673

`While`如果`Now`秒数等于秒，它只会转义`newDate`。试试这个：

```
 Private Sub pause(ByVal interval As Single)
       Dim waitUntil As Date = DateAndTime.Now.AddSeconds(interval)
       While DateAndTime.Now < waitUntil
           Application.DoEvents()
       End While
    End Sub 
```

我也可以建议您使用 PascalCase 命名您的方法（方法名称的第一个字母大写）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:06:17.083

我认为以下是原始代码的最佳转换（与 andygrips 答案略有不同）：

```
Private Sub Pause(ByVal seconds As Integer)
    Dim current As Date

    current = DateTime.Now
    Do While (DateTime.Now - current).TotalSeconds < seconds
        Application.DoEvents()
    Loop
End Sub 
```

但是请注意，最好完全避免在 .NET 中使用 DoEvents

# javascript - 删除 JSON 的一部分

> ID：11449387
> 
> 赞同：1
> 
> 时间：2012-07-12T09:57:45.590
> 
> 标签：javascript, json

将 json 数据发送到客户端时，我得到这样的数据。

```
{"Data":{"rows":[{"id":1,"cell":["1","amila","amila","False"]},{"id":2,"cell":["2","rakhitha","rakhitha","False"]},{"id":3,"cell":["3","Chathura","Chathura","False"]},{"id":4,"cell":["4","Geethaga","Geethaga","False"]}]},"JsonRequestBehavior":0} 
```

但我想获取没有“数据”属性的数据。像这样，

```
{"rows":[{"id":1,"cell":["1","amila","amila","False"]},{"id":2,"cell":["2","rakhitha","rakhitha","False"]},{"id":3,"cell":["3","Chathura","Chathura","False"]},{"id":4,"cell":["4","Geethaga","Geethaga","False"]}]} 
```

如何从 json 对象中删除此“数据”部分？是否可以？

我从这个 URL 访问这些数据。api/matchingservicewebapi/GetUser

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:00:16.527

做这个 ：

```
var json = {"Data":{"rows":[{"id":1,"cell":["1","amila","amila","False"]},{"id":2,"cell":["2","rakhitha","rakhitha","False"]},{"id":3,"cell":["3","Chathura","Chathura","False"]},{"id":4,"cell":["4","Geethaga","Geethaga","False"]}]},"JsonRequestBehavior":0};

​json = json.Data; 
```

[这里的工作示例](http://jsfiddle.net/manseuk/vWPWt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:00:36.167

采用

```
<script >
var data = yourJson.data
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:00:39.800

如果您管理服务器（在 url：api/matchingservicewebapi/GetUser 上），您需要更改那里的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T10:01:04.513

`results`例如，如果您在变量中获取 JSON 结果，则可以执行`results = results.Data`.

# javascript - 从数组执行页面模块

> ID：11449389
> 
> 赞同：2
> 
> 时间：2012-07-12T09:57:48.637
> 
> 标签：javascript, jquery, module

我有这个示例模块，我想在不进行单独调用的情况下进行初始化，而是在消费者页面中有一个数组，这样每个页面都可以有一个带有所需模块名称的小数组。

我已经这样做了，但它没有调用模块：

```
var navModule = (function() {
    var nav = {};
    var navHTMLobjs = {
        navList: $('#nav'),
        listItems: $('#nav').find('li'),
        listLinks: $('#nav').find('a')
    };
    nav.bindOver = function() {
        navHTMLobjs.navList.on('mouseover mouseout', 'li a', function(e) {
            if (e.type == 'mouseover') {
                $(this).addClass('over');
            }
            if (e.type == 'mouseout') {
                $(this).removeClass('over');
            }
        });
    };
    nav.isOverBinded = function() {
        return navHTMLobjs.navList.data('events').hasOwnProperty('mouseover') && navHTMLobjs.navList.data('events').hasOwnProperty('mouseout');
    };
    nav.turnOff = function() {
        navHTMLobjs.navList.off('mouseover mouseout');
    };
    nav.isNavTurnedOff = function() {
        return !navHTMLobjs.navList.data.hasOwnProperty('events');
    };
    nav.init = function() {
        this.bindOver();
    };
    return nav;
});
//var myNav = new navModule($('#nav'));
//myNav.init();
// So I want to only include this array which will be written by 
//back end and each page will only have its required bits.
var pageModules = ['navModule'];
for (var m in pageModules) {
    var fn = window[pageModules[m]];
    //var fn = Function(pageModules[m]); This says navModule is not defined :(
    if (typeof fn === 'function') {
        var inner = new fn();
        inner.init();
    }
} 
```

当前返回 fn 为未定义

也让我知道这是否是解决此问题的正确方法，如果不是，也许是一个建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:58:29.000

将代码与复制粘贴一起使用并`console.log(fn);`在 if 段之前添加可以正常工作，将函数显示为`fn`.

你得到的 undefined 可能来自于`inner.init()`什么都不返回的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:40:52.240

*可能是我不明白这一点*，但是如果您删除了覆盖匿名函数的括号，那么它将不会立即被调用，并且可以通过以下方式**调用**`window[pageModules[m]]`

在您的情况下，当函数立即调用 nav.init -> nav.bindOver 时，它没有任何返回语句，因此结果未定义

```
var navModule = function() {
                var nav = {};
                var navHTMLobjs = {
                    navList: $('#nav'),
                    listItems: $('#nav').find('li'),
                    listLinks: $('#nav').find('a')
                };
                nav.bindOver = function() {
                    navHTMLobjs.navList.on('mouseover mouseout', 'li a', function(e) {
                        if (e.type == 'mouseover') {
                            $(this).addClass('over');
                        }
                        if (e.type == 'mouseout') {
                            $(this).removeClass('over');
                        }
                    });
                };
                nav.isOverBinded = function() {
                    return navHTMLobjs.navList.data('events').hasOwnProperty('mouseover') && navHTMLobjs.navList.data('events').hasOwnProperty('mouseout');
                };
                nav.turnOff = function() {
                    navHTMLobjs.navList.off('mouseover mouseout');
                };
                nav.isNavTurnedOff = function() {
                    return !navHTMLobjs.navList.data.hasOwnProperty('events');
                };
                nav.init = function() {
        console.log('i am called');
                    this.bindOver();
                };
                return nav;
            }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:07:25.023

看一下这个。这对我来说似乎工作得很好。 [http://jsfiddle.net/sujay/ec8bU/](http://jsfiddle.net/sujay/ec8bU/)

您会注意到的唯一区别是我在定义`var`之前删除了关键字。`navModule`

我建议您宁愿使用[RequireJS 之类的东西](http://requirejs.org/)

# ireport - JRSwapFile Virtualizer 交换文件大小保持 0kb

> ID：11449390
> 
> 赞同：1
> 
> 时间：2012-07-12T09:57:50.160
> 
> 标签：ireport

我正在使用 JRSwapFileVirtualizer 来优化内存。它在特定位置创建一个交换文件，但交换文件的大小从获取到填充过程保持 0 KB。我无法判断数据是否真的被缓存了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:18:15.993

您需要明确设置`IS_IGNORE_PAGINATION`为`false`。

之后该文件将开始增长。

```
parametersMap.put(JRParameter.IS_IGNORE_PAGINATION, false); 
```

# ms-access - 将记录添加到 Recordset 后，子过程中不可用的新记录

> ID：11449391
> 
> 赞同：0
> 
> 时间：2012-07-12T09:57:55.577
> 
> 标签：ms-access, vba, excel

我有一个向记录集添加新记录的子过程。

```
Dim RS As Recordset
Set RS = getRSObject("Tickets")
RS.AddNew
RS.Fields("subject").Value = Me.txtSubject.Text
RS.Fields("detail").Value = Me.txtDetail.Text
RS.Fields("dateopen").Value = Format(Now, "mm/dd/yy hh:nn")
RS.Fields("status").Value = "Open"
RS.Fields("user").Value = Me.ComboUser.Text
RS.Fields("assignedto").Value = Me.comboAssignedTo.Text
RS.Fields("priority").Value = Me.ComboPriority.Text
RS.Fields("category").Value = Me.comboCategory.Text
RS.Fields("unplanned").Value = Me.cbUnplannedWork.Value
RS.Save

RS.Close
doEvents 
```

我的问题是在同一个模块中再往下几行，我通过查询同一个访问表来更新票证列表。但是这个新记录不在这个记录集中。就好像在子过程完成之前不会写入记录以进行访问。

完成上述过程后，我手动刷新了我的工单列表，我看到了我插入的记录。

如果我将插入作为完整的 sql 语句运行，如“插入票据（......”），这工作正常，我在列表中看到记录，但如果用户将连字符等字符放入其中，则容易出现问题文本字段。

谁能给我一个命令，强制将数据写入 Access 数据库并在子完成之前提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:10:25.847

尝试使用`RS.Update`而不是`RS.Save`

```
Dim RS As Recordset
Set RS = getRSObject("Tickets")
RS.AddNew
RS.Fields("subject").Value = Me.txtSubject.Text
RS.Fields("detail").Value = Me.txtDetail.Text
RS.Fields("dateopen").Value = Format(Now, "mm/dd/yy hh:nn")
RS.Fields("status").Value = "Open"
RS.Fields("user").Value = Me.ComboUser.Text
RS.Fields("assignedto").Value = Me.comboAssignedTo.Text
RS.Fields("priority").Value = Me.ComboPriority.Text
RS.Fields("category").Value = Me.comboCategory.Text
RS.Fields("unplanned").Value = Me.cbUnplannedWork.Value

RS.Update

RS.Close
doEvents 
```

# java - 无法通过 Java 中的套接字发送大文件

> ID：11449398
> 
> 赞同：3
> 
> 时间：2012-07-12T09:58:27.213
> 
> 标签：java, sockets

我有工作的服务器和客户端应用程序，它们在发送小文件时工作得很好，但是当我尝试通过套接字发送例如 700mb 的电影文件时，它给了我

```
Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space 
```

我在网上搜索了一些关于发送大文件的教程，但不太明白，但我认为我的问题是在写文件。

这是服务器用来编写我的文件的代码：

```
output = new FileOutputStream(directory + "/" + fileName);
            long size = clientData.readLong();
            byte[] buffer = new byte[1024];

            while (size > 0 && (bytesRead = clientData.read(buffer, 0, (int) Math.min(buffer.length, size))) != -1) {
                output.write(buffer, 0, bytesRead);
                size -= bytesRead;
            }
            output.close(); 
```

这是我的客户用来发送文件的代码：

```
byte[] fileLength = new byte[(int) file.length()];  

        FileInputStream fis = new FileInputStream(file);  
        BufferedInputStream bis = new BufferedInputStream(fis);

        DataInputStream dis = new DataInputStream(bis);     
        dis.readFully(fileLength, 0, fileLength.length);  

        OutputStream os = socket.getOutputStream();  

        //Sending size of file.
        DataOutputStream dos = new DataOutputStream(os);   
        dos.writeLong(fileLength.length);
        dos.write(fileLength, 0, fileLength.length);     
        dos.flush();  

        socket.close(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T10:02:48.567

它给你`OutOfMemoryError`是因为你试图在发送之前将整个文件读入内存。这是 100% 完全没有必要的。只需读写块，就像您在接收代码中所做的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T10:03:12.607

问题是您试图一次将整个文件加载到内存中（通过`readFully`），这超出了您的堆空间（我认为默认情况下为 256mb）。

你有两个选择：

1.  不错的选择：以块的形式加载文件（例如，一次 1024 个字节）并像这样发送它。需要更多的努力来实现。
2.  不好的选择：通过 -Xmx 选项增加你的堆空间。不推荐，我主要提到这一点，以防您需要更多的程序堆空间，但在这种情况下，这是一个非常糟糕的主意。

对于选项一，您可以尝试以下操作：

```
DataInputStream in = new DataInputStream(new FileInputStream("file.txt"));
byte[] arr = new byte[1024];
try {
    int len = 0;
    while((len = in.read(arr)) != -1)
    {
        // send the first len bytes of arr over socket.
    } 
} catch(IOException ex) {
    ex.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T10:10:42.417

`OutOfMemoryError`当您的程序达到堆大小限制时抛出。您将整个文件加载到 RAM 中。默认堆大小是物理内存大小的 1/4 或 1GB，所以你的程序达到了限制（你可能有 2GB RAM，所以堆大小是 512MB）。

您应该以块的形式读取文件（例如 10MB），这样您就不会达到堆大小限制，并且您可以在出现错误的情况下重新发送块，而不是重新发送整个文件。您甚至可以在不同的线程中读取块，因此当您发送 1 个块时，您可以加载第二个块，当您发送第一个块时，您可以立即开始发送第二个块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T10:04:15.277

问题是在您的客户端中，您为整个文件创建了一个字节数组。

```
byte[] fileLength = new byte[(int) file.length()];  //potentially huge buffer allocated here 
```

您应该在服务器端执行相同的操作，并将文件块逐块读取到固定大小的缓冲区中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T10:05:44.637

就像您在服务器端使用缓冲区发送数据一样，在您的小程序/客户端中使用缓冲区来读取它。如果你正在传输一个大文件，当你使用`readFully()`. 此方法仅适用于您知道数据***非常非常***小的情况。

# ios - 在编辑器中在前一个文件和当前文件之间切换的键盘快捷键

> ID：11449399
> 
> 赞同：4
> 
> 时间：2012-07-12T09:58:30.833
> 
> 标签：ios, xcode, keyboard-shortcuts, xcode4.3

我通常使用`ctrl`+`tab`在其他编辑器（如 VS 或 Netbeans 甚至浏览器）中在上次查看的选项卡或文件与当前选项卡或文件之间切换。但是使用 xcode 我找不到键盘组合。我用谷歌搜索无济于事。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T10:04:53.860

`ctrl`您可以使用+ `cmd`+`left`或`ctrl`+ `cmd`+前后导航`right`

# php - 如果键包含（匹配）一个或多个子字符串，如何从 PHP 数组中删除键值对

> ID：11449403
> 
> 赞同：3
> 
> 时间：2012-07-12T09:58:41.427
> 
> 标签：php, regex, arrays, filter

我有一个大数组（为方便起见而简化）：

```
Array
(
    [last_name] => Ricardo 
    [first_name] => Montalban
    [sex] => Yes please
    [uploader_0_tmpname] => p171t8kao6qhj1132l14upe14rh1.jpg
    [uploader_0_name] => IMAG0114-1.jpg
    [uploader_0_status] => done
    [uploader_count] => 1
    [captcha_uid] => 155
) 
```

并希望删除键以开头的所有键值对`uploader_`（这可以是一系列）以及每次出现的`captcha_uid`.

我在这里看到了一个有用的示例： [如果值与模式匹配，则删除键？](https://stackoverflow.com/questions/2304470/remove-a-key-if-value-matches-a-pattern) 但我不擅长正则表达式。如何以最佳方式做到这一点？非常感谢您的意见。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T10:02:15.873

在这种简单的情况下，您不需要正则表达式。在另一个问题中应用已[接受的答案](https://stackoverflow.com/a/2304474/502381)：

```
foreach( $array as $key => $value ) {
    if( strpos( $key, 'uploader_' ) === 0 ) {
        unset( $array[ $key ] );
    }
}

unset( $array[ 'captcha_uid' ] ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:02:13.080

试试这个：

```
$data = array(
    'last_name' => 'Ricardo',
    'first_name' => 'Montalban',
    'sex' => 'Yes please',
    'uploader_0_tmpname' => 'p171t8kao6qhj1132l14upe14rh1.jpg',
    'uploader_0_name' => 'IMAG0114-1.jpg',
    'uploader_0_status' => 'done',
    'uploader_count' => '1',
    'captcha_uid' => '155',
);

foreach($data as $key => $value) {
    if(preg_match('/uploader_(.*)/s', $key)) {
        unset($data[$key]);
    }
}
unset($data['captcha_uid']);
print_r($data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:03:50.040

您可以使用`foreach`带有 PHP 函数的 a `preg_match`。类似的东西。

```
foreach($array as $key => $value) {
  if(!preg_match("#^uploader_#", $key)) {
    unset($array[$key]);  
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-31T10:08:02.540

从 PHP 5.6.0 ( `ARRAY_FILTER_USE_KEY`) 开始，您也可以这样做：

```
$myarray = array_filter( $myarray, function ( $key ) {
    return 0 !== strpos( $key, 'uploader_' ) && 'captcha_uid' != $key;
} , ARRAY_FILTER_USE_KEY ); 
```

参考：[array_filter](http://php.net/manual/en/function.array-filter.php)

# c++ - Qt 程序部署

> ID：11449412
> 
> 赞同：0
> 
> 时间：2012-07-12T09:59:16.027
> 
> 标签：c++, qt, deployment

我刚刚写了一个Qt程序，并在Release类型下构建它，它在QtCreator中工作正常，但是如果我在windows中双击exe，它说它无法在QtCore4.dll中找到某些东西，所以我应该使用哪个QtCore4.dll实际上添加到它的文件夹？我正在使用 Qt4.7.3

顺便说一句，是因为我安装了 TortoiseHg 吗？它搞砸了环境变量。但我确实从我的 QtSDK 文件夹中复制了 QtCore4.dll。它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:10:24.583

您需要在程序所在的同一文件夹中使用过的 Qt 和 mingw dll。您需要将这些与程序打包在一起。

# .htaccess - Htaccess 规则冲突

> ID：11449414
> 
> 赞同：0
> 
> 时间：2012-07-12T09:59:31.210
> 
> 标签：.htaccess, rewrite, conflict

我写了一些htaccess规则。但存在冲突。我无法解决问题。

```
RewriteRule ([a-z]+)/(.+).php /$2.php?lang=$1 [QSA,L] 
```

此规则适用于语言 /en/login.php = > /login.php?lang=en 等。

此外我还有另一条规则

```
RewriteRule ^album/([0-9]+)/playlist\.xml$ includes/xml/mediaxml.php?album=$1 
```

此规则适用于演示音乐专辑。专辑/ID/playlist.xml = > 包括/xml/mediaxml.php?album=$1

我们的客户可以使用此播放列表收听音乐。我之前写过 playlist.xml 规则。

当我添加语言支持时。我注意到了这个问题。我该如何解决？

你有什么主意吗 ？

编辑：

所有 .htaccess 代码

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^dunyaturizm\.com\.tr$
RewriteRule (.*) http://www.dunyaturizm.com.tr/$1 [R=301,L]

#php scriptleri languagelere dönderiyor
RewriteRule ^album/([0-9]+)/playlist\.xml$ includes/xml/mediaxml.php?album=$1 [QSA,L]
RewriteRule ([a-z]+)/(.+).php /$2.php?lang=$1 [QSA,L]
RewriteRule ^en/$ http://www.dunyaturizm.com.tr/?lang=en

#Ürün Detay Sayfası
RewriteRule ^([a-zA-Z0-9_-]+)-([0-9]+)\.html$ product.php?pid=$2&lang=tr
RewriteRule ^en/([a-zA-Z0-9_-]+)-([0-9]+)\.html$ product.php?pid=$2&lang=en

#Kategori Sayfası
RewriteRule ^([a-zA-Z0-9_-]+)-([0-9]+)$ product.php?cid=$2

RewriteRule ^sitemap\.xml$ sitemap.php [L]

ErrorDocument 404 /404.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:03:14.430

重新排序规则（首先制作专辑规则）并为其添加`L`标志，这样规则执行将在匹配时立即停止：

```
RewriteEngine on

RewriteRule ^album/([0-9]+)/playlist\.xml$ includes/xml/mediaxml.php?album=$1 [L]

RewriteCond %{REQUEST_URI} !^includes/xml/mediaxml\.php$
RewriteRule ([a-z]+)/(.+).php /$2.php?lang=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T17:57:43.547

好吧，我不太确定，但我认为如果您将专辑向上移动并带有 L 标志应该可以。

# php - Yii 和 Knockout 在一起？

> ID：11449417
> 
> 赞同：3
> 
> 时间：2012-07-12T09:59:45.003
> 
> 标签：php, javascript, jquery, yii, knockout.js

我正在尝试决定一组用于我要构建的新 Web 应用程序的工具。

我希望它真正具有交互性并使用 Ajax 工作（即不刷新页面等）。它还将具有适用于 iPhone 等移动设备的用户界面

我想使用 PHP、MySQL 和 JavaScript 来实现它，主要是因为它是我所知道的，我可以轻松地将它托管在某个地方

有人对我应该使用哪些工具有任何看法吗？

目前我在想： - 用于 PHP - Yii - 用于 Javascript - Knockout.js 和 jQuery - 用于移动设备 - 用于移动设备的 jQuery

我唯一担心的是同时使用 Yii 和 Knockout，这两个 MVC 框架是否有点矫枉过正？

我还应该更多地关注 HTML5 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:38:21.033

Knockout 是客户端，它是 MVVM - Model-View-View-Model。您可以通过 Yii 控制器中的 AJAX json 更新 Knockout 模型，并且 Knockout 将相应地更新用户界面。

# ruby-on-rails - Active Record - 仅当它存在于子表中时才删除所有依赖值

> ID：11449419
> 
> 赞同：1
> 
> 时间：2012-07-12T09:59:56.370
> 
> 标签：ruby-on-rails, activerecord

我正在使用 Rails 应用程序，我知道`:dependent => delete_all`模型中的功能。

考虑下面的例子

```
class TableA < ActiveRecord::Base 

    has_many :tablebs, :dependent => :delete_all

end

class TableB < ActiveRecord::Base 

    belongs_to :tablea

end 
```

如果 TableB 中存在对应的外键引用，代表 TableA，那么使用 Active Record 删除 TableA 中的记录将删除 TableB 中所有对应的行。

但是当TableB中没有对应的值时，它显示为

`uninitialized constant TableA::TableB`

我想要实现的是，如果 Active Record 存在，则应该删除依赖值，如果没有依赖值，则忽略该步骤。

这可能吗？

谢谢，巴兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:25:52.867

我认为问题在于`belongs_to`必须与单数表相关。因此，将`tableas`for更改`tablea`如下：

我还建议您查看[此](https://stackoverflow.com/questions/2797339/rails-dependent-destroy-vs-dependent-delete-all)`:delete_all`链接以了解和之间的区别`:destroy`。

```
class TableA < ActiveRecord::Base 
    has_many :tablebs, :dependent => :delete_all
end

class TableB < ActiveRecord::Base 
    belongs_to :tablea
end 
```

# ruby-on-rails - 设计应用程序时 REST 总是可行的吗？如果没有，那怎么办？

> ID：11449421
> 
> 赞同：1
> 
> 时间：2012-07-12T10:00:11.550
> 
> 标签：ruby-on-rails, rest

我一直在研究一个网站，但似乎无法为其实施提出一个好的设计。这是流程：

用户选择一件衬衫。用户选择什么尺寸的衬衫。用户在上面说出他们想要的东西，然后将其添加到他们的购物车中。他们可以重复或去结帐。

我遇到的问题是将 line_item 添加到购物车中，它需要一个 sku 和一个设计记录。设计记录是在他们将其添加到购物车时创建的。

现在，我在 store_controller 中拥有一切。

所以我有诸如 prepare_for_cart、add_shirt_to_cart、confirm_order、add_design、show_receipt 之类的方法……我不知道我怎么可能把这些东西分解成安静的东西。

那么它是否总是可以用 REST 解决，还是真的有一些情况下它不起作用？怎么做才能尝试使它更易于维护和理解？还有其他适用的设计模式需要考虑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:11:46.403

## 考虑资源，而不是您在商店中执行的操作。

创建控制器：订单、付款、衬衫、结帐等

而不是商店/结帐：

*   订单/1/结帐 (POST)

您正在创建一个新的结帐资源，指的是一个订单。

而不是 store/attempt_order_payment：

*   订单/1/付款 (POST)

您正在创建一个新的支付资源，指的是一个订单。

而不是 show_receipt：

*   订单/1/付款/2/收据

您正在访问与付款对应的收据。

而不是 confirm_cart_not_empty：

*   订单/1/衬衫 (GET)

订单有衬衫。如果衬衫在订单中，则表示购物车不是空的。

而不是 add_shirt_to_cart：

*   订单/1/衬衫 (POST)

您正在订单中创建新的衬衫资源。

而不是 remove_from_cart：

*   订单/1/衬衫/3（删除）

您正在从订单中删除衬衫资源。

等等...

PS - 有不止一种可能的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:15:34.003

在几乎所有情况下，REST 都是可能的，但它并不总是最好的选择。例如，如果您有一个应该发送电子邮件的端点，您可以为这些创建唯一的 url：

```
POST emails/  (which creates)
GET emails/12345 
```

与您的设计类似，可能会有如下网址：

```
cart/1234 (GET for the current cart contents, POST to add a new product to the cart)
cart/12345/shirt (1 specific item in the cart, which can be deleted) 
```

可以帮助您考虑这一点的一件事是停止考虑 url 和最重要的方法。*只*考虑您来回发送的文件。REST 中的“RE”代表表示，GET、PUT、DELETE 方法只是将表示从客户端传输到服务器的简单方法。

**编辑**

嗯，REST 是一个非常好的设计。它的设计不是为了易于实施，甚至是消耗......但它的设计是为了稳健，可以持续 10 年并保持向后兼容。就像网络本身一样。

这项投资对您来说可能不值得，您可能只是想使用一种更易于实施的方法。当然，您不会符合 REST-compliant™。这并不适合所有人，只要看看任何大供应商的平均 api 是如何工作的，就会意识到许多人已经决定*不*应用 RESTful 设计。

因此，请自己弄清楚利弊；技术优势是最终唯一重要的东西。

你必须问“我如何制作这个 RESTful”这一事实告诉我，你需要先做更多的研究，并弄清楚一般 REST 的内容和原因。

# html - 在没有 JavaScript 的情况下使表格 row() 链接

> ID：11449422
> 
> 赞同：1
> 
> 时间：2012-07-12T10:00:12.287
> 
> 标签：html

我目前正在向我的网站添加非 js 功能，因为某些设备仍然无法处理 js 或者有些人将其关闭以更快地加载页面（例如慢速连接，慢速设备，如旧计算机）。

所以，现在我有一个问题：我有一个页面，其中列出了个人资料，`<table>`希望每个`<tr>`人都链接到某个个人资料。将链接放入`<td>`like`<tr><td><a>Name</a></td><td><a>Address</a></td></tr>`不是一个好的解决方案，因为我将有很多代码，只有文本是可点击的。

还

```
<a><tr><td>Text</td></tr></a> 
```

不工作。

有没有没有 Javascript 的解决方案来实现这一点？

在此先感谢 Naymecliff

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:25:50.263

恐怕这是不可能的。您可以将`td`元素的内容设为链接，并且通过 HTML5 规则（以及浏览器实践），您可以将整个表格设为链接。但是中间级别，表格行元素`tr`，不能转换为 HTML 中的链接。

如果你把每个内容都`td`做成一个链接，让一行的单元格指向同一个目的地，那么事情在某种意义上是可行的，但它的可用性并不好。用户看不到发生了什么，因为外观中没有任何内容表明一行的单元格实际上是*一个*链接。此外，由于它们是单独的链接，因此标签变得尴尬。

根据表格的内容和性质，也许您可​​以在某种意义上选择一列作为“主要”列（可能带有标题或标题等数据，可能被视为行标题），并使用 ` ...仅适用于该列中的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:08:10.310

听起来您需要创建一个 html 锚点？

```
<a href="#BLA">BBBB</a>

<a name="BLA"></a> 
```

内容在这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T16:17:22.157

您实际上**可以**在没有 javascript 的情况下执行此操作，并且无需不必要地重复链接数十/数百或数千次。这在一定程度上取决于您支持的浏览器，特别是它们支持的 CSS，但如果像大多数现代浏览器一样，它们可以处理 position:absolute 和 td:first-child，那么这就是我为类似问题提出的建议：

将链接放在第一列：

```
<table class="search_results">
    <tr>
        <td><a href="#">Some text</a></td>
        <td>more text</td>
        <td>more text</td>
    </tr>
</table> 
```

这是非常好的标记，因此您唯一真正的问题是让该链接跨越表格的宽度。我使用非常标准的 CSS 做到了这一点：

```
table.search_results a {position:absolute;display:block;width:98%;} 
```

将宽度更改为您想要的任何宽度，原则上您已完成并撒满灰尘。所以这一切都相对容易，但是如果你像我一样有一个流畅/响应式布局，并且你的链接上有一些标准样式以及表格上的一些填充，你将需要这些规则（从上面复制并添加额外的）。

```
table.search_results td:first-child {padding:0;}
table.search_results a {position:absolute;display:block;width:98%;max-width:1272px;font-weight:normal;color:#000;padding:.5em;}
table.search_results a:hover {background:none;}
table.search_results tr:hover {border-color:#25505b;background:#b5d6dd;} 
```

解释一下：第一条规则仅删除我的第一个 td 上的所有填充。默认情况下，我的 td 上的填充是 0.5em。第二条规则在链接上添加相同的填充，否则最终会出现未对齐的单元格内容。它还纠正了我在 a 上的一些标准样式，以确保所有列看起来都一样。你也可以反过来做（将链接样式添加到你的 td）。通过最后两条规则，我摆脱了链接上的默认悬停效果，然后将其放在任何具有正确类的表的 tr 上。

这适用于我关心的浏览器，但您当然应该在您关心的浏览器中进行测试:) 希望我能帮助某人节省几分钟的这篇文章！

# wicket - 从 1.5 开始，Wicket 是否支持嵌套外壳？

> ID：11449427
> 
> 赞同：2
> 
> 时间：2012-07-12T10:00:30.393
> 
> 标签：wicket, wicket-1.5

我在使用嵌套外壳时遇到了一些问题，我想知道这是否是我的编码中的一个错误，或者我正在尝试的用法是否不受本机支持。

像这样的东西：

```
<wicket:enclosure child="primary">
    <wicket:message key="primary.select">Primary Server</wicket:message>
    <select id="primary" wicket:id="primary"></select>
    <wicket:enclosure child="backup">
        <wicket:message key="backup.label"/>
        <span id="backup" wicket:id="backup"></span>
    </wicket:enclosure>
</wicket:enclosure> 
```

问题很简单，是否可以像这样使用 HTML，我想在开始寻找可见性控制器上的问题之前确保这一点。

我已经研究了一些文档和搜索引擎一段时间，但没有发现任何关于支持或不支持嵌套外壳的提及。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:42:19.037

抱歉这么晚才回复，我没有看到你的评论。

我不认为有任何与嵌套 <wicket:enclosure> 标签相关的记录限制；但是，已记录的标签还有一些其他限制。

第一个限制记录在[Wicket 标签文档](https://cwiki.apache.org/WICKET/wickets-xhtml-tags.html#Wicket%2527sXHTMLtags-Elementwicket%253Aenclosure)中：

> 在 Ajax 回调方法中更改子组件的可见性不会影响整个外壳，只会影响子组件本身。这是因为只有子组件被添加到 AjaxRequestTarget。

和

> 如果外壳正下方有多个检票口组件，则必须通过在外壳的子属性中提供其 id 来指定哪一个控制可见性：

其次，关于使用 <wicket:enclosure> 标签隐藏 FormComponents存在一个已解决的[问题。](https://issues.apache.org/jira/browse/WICKET-2541)基本上任何被标签隐藏的 FormComponent 仍然会在表单提交时得到验证。如果您查看日志，则会针对此问题给出警告消息。

**注意：** Wicket 的“已记录”一词有些含糊。我想您只需要习惯于将各种来源的信息拼凑在一起，就可以找到问题的答案。如有疑问，请尝试查找源代码的 javadoc 或内联注释。这些通常是最好的记录来源。

# android - Android：无法获取列表视图中项目的 ID

> ID：11449435
> 
> 赞同：0
> 
> 时间：2012-07-12T10:00:43.403
> 
> 标签：android, json, android-listview, httpclient

我正在尝试将单击的项目的 ID 传递`listview`给下一个活动，但是每当我单击该项目时，它总是会得到最后一个项目的 ID`listview`这是我的代码

```
String src = a.getText().toString();

            ListView srceve  = (ListView)findViewById(R.id.list_scr_planner);
            ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
            if(src.length()>0)
            try{

            HttpGet post=new HttpGet("xxxxxxxxxxxxxxxxxxxxxxxxxxxx");
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("eventname", src));
            HttpResponse resp = login.client.execute(post);
            String re = EntityUtils.toString(resp.getEntity());

            Log.i("loggg", "error" + re);

            re= "{\"root\": " + re + "}";
            JSONObject root = new JSONObject(re);  
            JSONArray sessions = root.getJSONArray("root");
            Log.i("loggg", "error" + sessions);
            for(int i=0;i<sessions.length();i++){
                HashMap<String, String> map2 = new HashMap<String, String>();
                JSONObject e = sessions.getJSONObject(i);
                map2.put("event_name", e.getString("name"));
                map2.put("event_date", e.getString("eventdate"));
                mylist.add(map2);
                id = e.getString("id");

            }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        SimpleAdapter adapt= new SimpleAdapter(searchevent.this,mylist, R.layout.list_custom ,new String[]{"event_name","event_date"},new int []{R.id.textnam,R.id.textdate});
        srceve.setAdapter(adapt);

        srceve.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View arg1,
                    int pos, long arg3) {
                // TODO Auto-generated method stub
                parent.getItemAtPosition(pos);
                Toast.makeText(getApplicationContext(), ""+ id + evename, 0).show();
                Intent i = new Intent(searchevent.this, eventDetails.class);
                i.putExtra("ar", id);
                startActivity(i);
            }
        }); 
```

请告诉我我哪里错了，我正在检索来自服务器的项目的 ID。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:06:48.907

在循环：

```
for(int i=0;i<sessions.length();i++){
            HashMap<String, String> map2 = new HashMap<String, String>();
            JSONObject e = sessions.getJSONObject(i);
            map2.put("event_name", e.getString("name"));
            map2.put("event_date", e.getString("eventdate"));
            mylist.add(map2);
            id = e.getString("id");

        } 
```

每次你覆盖 的值时`id`，这就是为什么它总是最后一个......你应该将它保存在一个数组中，比如......

```
String[] ids = new String[sessions.length()];
for(int i=0;i<sessions.length();i++){
            HashMap<String, String> map2 = new HashMap<String, String>();
            JSONObject e = sessions.getJSONObject(i);
            map2.put("event_name", e.getString("name"));
            map2.put("event_date", e.getString("eventdate"));
            mylist.add(map2);
            ids[i] = e.getString("id");

        } 
```

然后在 中`onItemClick`，根据选中项的位置获取：

```
public void onItemClick(AdapterView<?> parent, View arg1,
                int pos, long arg3) {
            // TODO Auto-generated method stub
            parent.getItemAtPosition(pos);

            String id = ids[pos];

            Toast.makeText(getApplicationContext(), ""+ id + evename, 0).show();
            Intent i = new Intent(searchevent.this, eventDetails.class);
            i.putExtra("ar", id);
            startActivity(i);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:11:15.740

```
 srceve.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View arg1,
                int pos, long arg3) {
        // TODO Auto-generated method stub
        String id=parent.getId();//this will give you the id of the selected item View
        parent.getItemAtPosition(pos);
        Toast.makeText(getApplicationContext(), ""+ id + evename, 0).show();
        Intent i = new Intent(searchevent.this, eventDetails.class);
        i.putExtra("ar", id);
        startActivity(i);
      }
    }); 
```

# php - 如何使用php重复读取本地端口？

> ID：11449439
> 
> 赞同：1
> 
> 时间：2012-07-12T10:00:59.677
> 
> 标签：php, sockets, amazon-ec2, instance

我已经在这个主题上进行了很多搜索并尝试了很多东西，但我仍然被卡住了。

我有一个 ec2 实例，另一个实例通过特定端口上的 tcp 发送一些数据。我正在使用以下代码..

```
 $host = "x.x.x.x";
    $port = 2048;

    $socket = socket_create(AF_INET, SOCK_STREAM, 0)  ;

if (!socket_setopt($socket, SOL_SOCKET, SO_REUSEADDR, 1)) 
{
        echo socket_strerror(socket_last_error($socket));
        exit;
} 
    $result=socket_bind($socket, $host, $port);
    $result = socket_listen($socket, 3);

    $spawn = socket_accept($socket);

    $input = socket_read($spawn, 84);

echo $input;

    socket_close($spawn);
    socket_close($socket); 
```

有时它运行，有时它不运行，它在 socket_bind() 处给出错误：

```
"socket_bind(): unable to bind address [98]: Address already in use" 
```

我看了很多关于这个但没有任何工作......

如果有人提出一些问题..请帮助..！

谢谢马尤尔

# php - 如何在PHP中的字符串中减去数字？

> ID：11449452
> 
> 赞同：1
> 
> 时间：2012-07-12T10:01:43.857
> 
> 标签：php

有一个包含数字数据的字符串变量，比如说`$x = "OP/12/DIR";`。数字数据的位置可以在任何情况下根据用户的需要在应用程序中修改，斜线可以被任何其他字符改变；但数字数据是强制性的。那么如何从字符串中提取数字数据呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:03:24.563

用空字符串替换不是数字的所有内容。

```
 $numbers = preg_replace('/[^0-9]*/','',$x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:05:36.077

替换所有不是数字的内容：

```
 $numbers = preg_replace( '/[^\d\.]/', '', $input ); 
```

或者如果你有小数：

```
$numbers = preg_replace ( '#\D*?(\d+(\.\d+)?)\D*#', '$1', $input ); 
```

# jsp - 如何从 JSP 重定向到 Struts 中的 Action 类

> ID：11449455
> 
> 赞同：0
> 
> 时间：2012-07-12T10:01:53.923
> 
> 标签：jsp, struts

JSP文件--->

```
<html:form method="post" action="/createEmployee">
    <p><font color="red">*</font>First Name</p>
    <p><html:text property="firstName" /></p>

    <p><font color="red">*</font>Last Name</p>
    <p><html:text property="lastName" /></p>

    <p><font color="red">*</font>Birth Date</p>
    <p><html:text property="birthDate" value="" /></p>

    <p><font color="red">*</font>Salary</p>
    <p><html:text property="salary" /></p>

    <p><font color="red">*</font>Organization</p>
    <p><html:text property="organization" /></p>

    <p><input type="submit" value="Save" name="submitBtn" /></p>
    <p><input type="reset" value="Cancel" name="cancelBtn" /></p>
</html:form> 
```

动作类--->

```
public ActionForward excute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception
{
    System.out.println(request.getParameter("msg"));

    EmployeeForm employeeForm = (EmployeeForm)form;

    OrganizationServiceImpl organizationService = new OrganizationServiceImpl();
    long organizationId = organizationService.getOrganizationByName(employeeForm.getOrganization());
    employeeForm.setOrganization_id(organizationId);

    EmployeeServiceImpl employeeService = new EmployeeServiceImpl();
    long employeeId = employeeService.creatEmployee(employeeForm);

    request.setAttribute("employeeId", employeeId);

    return mapping.findForward("createEmployee");
} 
```

我想知道我是否在我的 jsp 文件中正确地给出了动作路径？？我的动作课在“com.hr.action”下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T14:55:10.573

您需要将您的操作映射到 struts config xml 中的 URL。检查 struts config xml 以获得正确的映射

# virtual-machine - Arista EOS VM 在启动期间卡住

> ID：11449463
> 
> 赞同：1
> 
> 时间：2012-07-12T10:02:21.130
> 
> 标签：virtual-machine, qemu, kvm

我正在尝试在 Ubuntu 12.04 上启动 Arista EOS 映像。已安装 Qemu-kvm 软件包。但是没有像这样的命令，`qemu-kvm`所以我正在使用`kvm`命令。

虚拟机被创建，开始启动，但卡在启动阶段

```
root@addanother-dr:~/qemu# kvm -nographic -vga std -cdrom Aboot-veos-qemu-serial-2.0.6.iso -boot d -hda EOS-4.9.0-veos.vmdk -usb -m 1024 -net nic,macaddr=52:54:00:01:02:03,model=e1000 -net nic,macaddr=52:54:00:01:02:04,model=e1000 -net nic,macaddr=52:54:00:01:02:05,model=e1000 -net nic,macaddr=52:54:00:01:02:06,model=e1000 -net nic,macaddr=52:54:00:01:02:07,model=e1000
Warning: vlan 0 is not connected to host network

ISOLINUX 4.02 2010-07-21  Copyright (C) 1994-2010 H. Peter Anvin et al
Loading linux....
Loading initrd....ready.

Aboot 2.0.6-689124

Press Control-C now to enter Aboot shell
Booting flash:EOS-veos.swi
Starting new kernel 
```

如果有人可以请告诉我可能出了什么问题。我正在运行 32 位 Ubuntu 系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:16:42.853

这表示 VM 无法找到虚拟硬盘 (.vmdk) 文件。检查您的存储设置并确保该 VM 的 .vmdk 存在。

您的命令行显示在哪里可以找到 Aboot，它是 vEOS 的引导加载程序。您还需要为 vEOS 硬盘指定一个 vdmk 文件。来自 vEOS 自述文件：

```
qemu-kvm \
   -nographic \
   -vga std \
   -cdrom Aboot-qemu-serial-2.0.6.iso \
   -boot d \
   -hda EOS-4.10.2-veos.vmdk \
   -usb \
   -m 1024 \
   -net 
```

如果您决定使用 VirtualBox，这会有所帮助。在 vEOS 中，症状是相同的：

[http://www.gad.net/Blog/2012/10/27/building-a-virtual-lab-with-arista-veos-and-virtualbox/](http://www.gad.net/Blog/2012/10/27/building-a-virtual-lab-with-arista-veos-and-virtualbox/)

# ruby-on-rails - Rails 3.2 引擎怪异与 before_filter

> ID：11449464
> 
> 赞同：0
> 
> 时间：2012-07-12T10:02:24.140
> 
> 标签：ruby-on-rails, ruby, rails-engines, before-filter

我有一个 Rails 3.2.6 应用程序，需要您登录才能使用它。它还安装了一个 Rails 引擎`/api`，为某些部分提供 JSON API，无需身份验证。

当我启动 Rails 服务器并发出以下请求时：

```
GET /api/something
GET /
GET /api/something 
```

一切都按预期工作，API 请求按原样返回 JSON，主页呈现 html 页面。

这是奇怪的部分。如果我在启动 Rails 服务器后立即按此顺序发出请求：

```
GET /
GET /api/something
GET /api/something 
```

然后 API 请求失败。来自根 Rails 应用程序的 before 过滤器为 API 引擎触发，导致重定向到`UserSessionsController#new`API 引擎中不存在的 ，并且失败。如果先向 API 引擎而不是根 Rails 应用程序发出请求，则 API 引擎不会在过滤器之前继承。任何关于这种怪异的启示都会很棒:)

虽然我目前的计划是将 API 引擎变成一个适当的独立 Rack 应用程序。在这一点上，它是引擎的唯一原因似乎是因为在我之前有人真的很喜欢引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:25:06.883

经过一堆挖掘后，我发现了问题。它与引擎本身有关。我应该指出，我不负责项目的创建，只是现在负责使用它。

假设我们的主机 Rails 应用程序具有...

`app/controllers/application_controller.rb`：

```
class ApplicationController < ActionController::Base
  before_filter :foo_bar
  layout :application
end 
```

我们的引擎被称为 api_engine 并且被隔离在`ApiEngine`模块下并且具有......

`app/controllers/api_engine/application_controller.rb`：

```
module ApiEngine
  class ApplicationController < ActionController::Base
    layout false
  end
end 
```

`app/controllers/api_engine/post_controller.rb`：

```
module ApiEngine
  class PostController < ApplicationController
    # code goes here...
  end
end 
```

你已经知道我要去哪里了吗？问题是 Rails 的动态加载和愚蠢地构建引擎的组合。

当向服务器发出的第一个请求是引擎的`PostController`时，该`post_controller.rb`文件是必需的，该文件遇到模块`ApplicationController`内的常量。`ApiEngine`但是`::ApiEngine::ApplicationController`没有定义，所以它检查是否`::ApplicationController`是，这不是，导致`application_controller.rb`在引擎中寻找。

但是，如果第一个请求发送到最终定义的主机应用程序，那么`ApplicationController`当引擎接收到请求时，它只是最终`ApplicationController`从根应用程序使用，从不需要它自己的类版本。

解决方案非常简单，在引擎`lib/api_engine/engine.rb`文件中，需要一个`config.after_initialize`块中正确的应用程序控制器文件：

```
module ApiEngine
  class Engine < Rails::Engine
    isolate_namespace ApiEngine
    config.after_initialize do
      require "api_engine/application_controller"
    end
  end
end 
```

追踪起来有点棘手，特别是处理别人的代码，你倾向于假设某些“基本”的东西正在按他们应该的方式工作。如果其他人发现自己处于类似奇怪的情况，希望这个答案可能有用:)

# c# - 我怎样才能设计一个看起来像 Windows 7 任务栏中的弹出窗口一样的窗口？

> ID：11449466
> 
> 赞同：0
> 
> 时间：2012-07-12T10:02:35.027
> 
> 标签：c#, visual-studio, forms

我需要一个圆形的粗边框和相同的颜色。这在 Visual Studio Forms 的某处可用吗？

![在此处输入图像描述](../Images/fe2c4d71404c1bddea466d9aa29ec12a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:15:25.263

这是一个：

![示例](../Images/ce3bb99987ee0843cbfb699dfd0fe1ee.png)

1.  添加一个新表格。
2.  设置控制框 = 假。
3.  显示图标 = 假。
4.  SetGripStyle = 隐藏。
5.  使用停靠功能添加三个必需的按钮。

我希望这有帮助。

笔记。当你运行它时，它看起来就像你需要的那样。那么你将不得不担心定位，但这是另一个问题......

# html - 使用 CSS 以 270 度垂直书写文本

> ID：11449467
> 
> 赞同：0
> 
> 时间：2012-07-12T10:02:40.673
> 
> 标签：html, css, vertical-text

我正在研究一个示例，我想以 90 度和 270 度垂直书写文本。

[JSFiddlle](http://jsfiddle.net/D9LGX/31/)上的示例

它似乎在 FF 中工作，但根本没有出现在 IE 中。

我试图更改某些属性，但没有运气。

如果有人可以帮助我解决这个问题，我将不胜感激，以便它适用于所有浏览器。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:03:42.657

IE 不支持此功能以及大多数其他 CSS3 功能。

虽然你可以试试这个家伙的解决方案：

[http://scottgale.com/blog/css-vertical-text/2010/03/01/](http://scottgale.com/blog/css-vertical-text/2010/03/01/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:04:16.077

因为它使用 webkit、moz 和 o css3 属性来旋转它。IE 不支持这些 css 属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:24:48.737

这很奇怪，但是当我`Helvetica`从您的 CSS 中删除时，它似乎一切正常。您确定删除旋转时会显示文本吗？

此外，这`height: -150px`可能会导致问题。尝试改用边距。

您可能想要添加

```
-ms-transform: rotate(270deg); 
```

对于现代 IE。

[这篇文章中的演示](http://css-tricks.com/examples/SidewaysHeaders/)在 IE9 中运行良好： [css-tricks.com/sideways-headers](http://css-tricks.com/sideways-headers/)

这个也不错：[css-tricks.com/snippets/css/text-rotation](http://css-tricks.com/snippets/css/text-rotation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T12:06:24.277

我认为我与 Jquery 一起完成的方式要好得多，并且有助于解决我在其他示例中遇到的浏览器问题

查看[http://jsfiddle.net/RwEme/1865/](http://jsfiddle.net/RwEme/1865/)

我认为这最适合我的示例并且在 IE 中运行良好，字体也没有任何问题。我在 div 中编写文本并使用 jQuery 插件对其进行旋转。

IE 8 及以下版本有问题

# javascript - 在 JSP 中包含 java 脚本路径

> ID：11449470
> 
> 赞同：0
> 
> 时间：2012-07-12T10:02:56.547
> 
> 标签：javascript, jsp, inclusion

我在以下结构中有一个 Web 应用程序 WAR

转换.战争 | Conversion.War\ index.html

```
Conversion.War\META-INF

Conversion.War\WEB-INF\web.xml

Conversion.War\WEB-INF\actual.jsp

Conversion.War\WEB-INF\js\convertmap.js 
```

当我访问我正在重定向到的应用程序时`actual.jsp`，`actual.jsp`我需要包含这个`convertmap.js`不起作用的应用程序。

我试过下面的代码

```
<script type="text/javascript" src="/js/ConvertMap.js"></script> 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:16:17.683

尝试移动

```
Conversion.War\WEB-INF\js\convertmap.js 
```

到

```
Conversion.War\js\convertmap.js 
```

这*应该*与上下文相匹配

```
<script type="text/javascript" src="/js/ConvertMap.js"></script> 
```

# sql - 无法使用 select 语句更新表中的行

> ID：11449474
> 
> 赞同：0
> 
> 时间：2012-07-12T10:03:02.267
> 
> 标签：sql, oracle

我在一个表中创建了一个列，我想用从另一个 select 语句中检索到的数据填充该表。

这是我试图用来填充这一列的语句：

```
update cc_file
set sd_file_name = (select c1.name sd_file_name
                    from cc_file f, cvs3 c1 
                    where f.sd_file_id = c1.file_id 
                     and (c1.file_id, c1.type) in (select file_id, 
                                                          max(type) 
                                                   from cvs3 
                                                   where type1='PP' 
                                                     and type2='XHMTML' 
                                                   group by file_id) 
```

当我在 Oracle 中运行此语句时，它显示此错误`ORA-01427: single-row subquery returns more than one row`

请有人让我知道我可以如何做到这一点，以便更新专栏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:15:38.763

试试这个

```
update cc_file 
  set xml_file_name = (select c1.name sd_file_name
                         from cvs3 c
                         where f.sd_file_id = cc_file.file_id and 
                               (c.file_id, c.type) in (select file_id, max(type)
                                                         from cvs3
                                                         where type1='PP' and 
                                                               type2='XHMTML'
                                                         group by file_id )) 
```

# extjs - 调试EXTJS 4时确保清除浏览器缓存的最简单方法

> ID：11449475
> 
> 赞同：3
> 
> 时间：2012-07-12T10:03:02.793
> 
> 标签：extjs, extjs4

这让我发疯了。

每次我进行更改时，我都必须确保浏览器加载最新的 javascript 包含（相同的行为 chrome 和 FF）...

ctrl + f5 没有效果，我必须手动清除浏览器缓存 - 这是一场噩梦

我的 app.js 中有这段代码：

```
Ext.Loader.setConfig({
  enabled: true,
  disableCaching: false
}); 
```

**编辑：鸡和蛋场景：**

*   为了能够在 FF 或 chrome 中设置断点，您需要打开缓存（参见上面的代码），以便不会将“_dc”查询字符串参数添加到脚本文件中
*   但是你总是得到一个缓存的副本，所以无论如何你都看不到你的更改
*   如果关闭缓存，则无法设置断点，因为浏览器将其视为新 url

反正圆了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T11:45:08.893

出于同样的原因，我关闭了缓存断路器。我的解决方案是也完全关闭 Firefox 的缓存。（这是一台开发机器，所以我真的根本不需要它）

1.  在 Firefox 中转到“ `about:config`”并搜索“ `cache`”。
2.  设置`browser.cache.offline.enable`为`false`（双击它）
3.  设置`network.http.use-cache`为`false`
4.  如果您使用`ext-all-dev.js`，请设置`extensions.firebug.cache.responseLimit`高于它以确保您可以在 Firebug 中看到所有源代码。

执行此操作后，您可能需要重新启动并清除缓存。但是，Firefox 会在您每次加载页面时拉取最新的源代码 ( `F5`)，并且在 Firebug 中会遇到断点。

如果这不可接受，您还可以临时将`debugger;`语句插入代码中，这将充当断点。将它们放在`if`s 中以充当条件断点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:35:10.483

使用铬。按 F12 调出开发者工具窗口。然后右键单击浏览器刷新图标。您现在应该有以下选项：

*   正常重载
*   硬重装
*   空缓存和硬重载

单击“空缓存和硬重新加载”，应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T11:01:23.713

你可以做几件事：

*   用于`console.log()`调试您需要的信息，而不是在断点处停止。

*   添加`alert()`应用程序的开头，以及何时暂停 - 将断点设置为已加载的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:29:32.430

我正在使用FireFox 和 Chrome 的[Web Developer](http://chrispederick.com/work/web-developer/)扩展来快速启用/禁用/清除缓存。

# html - 使用 KineticJS 在 Google Chrome 中居中画布元素

> ID：11449480
> 
> 赞同：1
> 
> 时间：2012-07-12T10:03:24.050
> 
> 标签：html, google-chrome, canvas, kineticjs

在以下代码示例中，我使用了一个绘制到 HTML5-canvas 元素上的图像。但是，在 Chrome 中测试时，它不会立即将图像居中。IE 对此没有问题（使用 IE9）。当您使用 Chrome 中的开发人员窗口选择 DOM 中的一个元素时，不知何故它突然居中！！！很难调试，因为您看不到发生了什么变化：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 2</title>

    <script type="text/javascript" src="http://www.html5canvastutorials.com/libraries/kinetic-v3.10.2.js"></script>
    <script type="text/javascript">

        window.onload = function () {
            var stage = new Kinetic.Stage({
                container: "container",
                width: 578,
                height: 200
            });
            var layer = new Kinetic.Layer();

            var imageObj = new Image();
            imageObj.onload = function () {
                var image = new Kinetic.Image({
                    x: stage.getWidth() / 2 - 53,
                    y: stage.getHeight() / 2 - 59,
                    image: imageObj,
                    width: 106,
                    height: 118
                });

                // add the shape to the layer
                layer.add(image);

                // add the layer to the stage
                stage.add(layer);
                stage.draw();
            };
            imageObj.src = "http://www.html5canvastutorials.com/demos/assets/yoda.jpg";
        };

    </script>

</head>

<body>

    <h1>Page 3</h1>
    <div style="text-align: center">
        <div id="container"></div>
    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:09:28.937

我按如下方式解决了这个问题。使用 Chrome Canary，我能够单击 DOM-canvas-elements 而无需重新定位元素（这似乎是 Chrome 中的一个错误）。添加的最后一个画布元素未定位 css-position "relative"。这样做可以确保我在画布顶部绘制的选择居中，从而确保整个“画布”元素（使用 KineticJS）。我需要使用 jQuery 动态设置 css-position-property，如下所示：

```
$("#myContainerId canvas:last").css( "position", "relative" ); 
```

# html - 如何在浏览器中垂直居中标记

> ID：11449483
> 
> 赞同：2
> 
> 时间：2012-07-12T10:03:30.313
> 
> 标签：html, css

我在让一段 html 垂直居中时遇到了可怕的麻烦。代码如下。超链接中的内容需要垂直对齐，但我不知道如何。请问有什么帮助吗？！非常感谢

```
<a class="x" href="#">

    <span class="time">xxxx</span>
    <span class="time">yyyy</span>
    <span class="time">zzzz</span>

    <table>
    <tr>
      <td>
         <span class="Test">
           <span>HELLO</span>
         </span>
      </td>
    </tr>
    </table>

</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:24:28.510

您可以使用纯 css2 执行此操作，它适用于所有浏览器。

[这是 jsFiddle 示例，尝试更改浏览器的高度，您将检查它始终垂直居中于窗口。](http://jsfiddle.net/dwJFw/)

我假设您的 .x 容器的高度为 100px：

```
.x { position:fixed; top:50%; height:100px; margin-top:-50px; } 
```

顶部 css 应该是 50% 并且 margin-top 必须是垂直对齐中心方法高度的一半。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:07:52.323

You can't nest block-level elements inside of inline elements and expect to get proper results . Remove table from a and then use.

```
a{vertical-align:middle;} 
```

**[DEMO](http://jsfiddle.net/gqwSX/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:16:22.023

从顶部`display:block`和`padding`底部开始，你可以做到这一点。

见演示：http: [//jsfiddle.net/akhurshid/gqwSX/4/](http://jsfiddle.net/akhurshid/gqwSX/4/)

**CSS：**

```
a {    
    display:block;
    padding: 50px;    
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T10:08:36.807

嘿，现在习惯了`display:table-cell`，给`vertical-align middle`

像这样

```
.x{
border:solid 10px red;
  display:table-cell;
  height:200px;
  width:300px;
  vertical-align:middle;
  text-align:center;
} 
```

**现场演示** [http://tinkerbin.com/XIT6R38u](http://tinkerbin.com/XIT6R38u)

更多信息[http://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)

# date - 更改 Joomla 中的日期格式！2.5 文章

> ID：11449495
> 
> 赞同：1
> 
> 时间：2012-07-12T10:03:46.530
> 
> 标签：date, joomla, styles, joomla2.5

我正在尝试更改 Joomla 上“文章发布日期”的格式！基于 2.5 的网页。我根据一篇文章对代码进行了一些更改： http: [//magazine.joomla.org/topics/item/455-How-to-put-more-love-into-your-Joomla-dates ?tmpl=component&print =1](http://magazine.joomla.org/topics/item/455-How-to-put-more-love-into-your-Joomla-dates?tmpl=component&print=1)但它不适用于 2.5 版本。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T13:16:32.213

Joomla！2.5 使用语言键来检索日期格式 - 您可以使用语言管理器覆盖这些。

选择`Extensions`-> `Language Manager`->`Overrides`然后您可以创建标准日期字符串的新版本。

标准日期键及其格式字符串是：

```
DATE_FORMAT_LC="l, d F Y"
DATE_FORMAT_LC1="l, d F Y"
DATE_FORMAT_LC2="l, d F Y H:i"
DATE_FORMAT_LC3="d F Y"
DATE_FORMAT_LC4="Y-m-d"
DATE_FORMAT_JS1="y-m-d" 
```

最常用的格式`com_content`是`DATE_FORMAT_LC2`，因此如果您为其创建覆盖，您将更改文章日期的格式。

格式字符串是[标准的 PHP 日期格式](http://php.net/manual/en/function.date.php)。

# cmake - CMake 命令 find_package 如何与变量一起使用 _目录

> ID：11449499
> 
> 赞同：2
> 
> 时间：2012-07-12T10:03:57.443
> 
> 标签：cmake

我对 CMake 命令有疑问`find_package`。

例如，当我想使用 OpenCV 时，我可以设置变量`OpenCV_DIR`. `OpenCV_DIR`也有一个默认值。但是哪个命令生成这个变量`OpenCV_DIR`，什么时候生成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:28:08.267

在幕后，find_package 命令正在运行一个 CMake 文件。当您的 CMake 文件调用它们时，该文件在您的 CMake 文件运行时执行。这些文件（例如 FindOpenCV.cmake）设置有问题的变量。

当我遇到 find_package 命令的问题时，我通常会通过阅读相应的 FindWhateverPackage.cmake 文件来获得一些清晰的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T14:02:52.437

find_package 在“模块”或“配置”模式下运行。默认情况下，它会尝试第一种模式，如果找不到请求的包，它会尝试第二种模式。在这种模式下，它会创建缓存变量 _DIR。[链接到文档](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3afind_package)

FindOpenCV 也会设置这个变量，如果它找到 OpenCVConfig.cmake，更多信息[请看这里](http://opencv.willowgarage.com/wiki/FindOpenCV.cmake)

# google-chrome - WebKit 浏览器中的 CSS 定位错误

> ID：11449500
> 
> 赞同：0
> 
> 时间：2012-07-12T10:04:02.053
> 
> 标签：google-chrome, webkit, css-float, positioning

我已经尝试了一切，但我无法让这个覆盖在 Chrome 或 Safari 中工作......有什么想法吗？箭头应该像在 Firefox 和 IE 中一样在拇指上方。

**在 Chrome 中：**
![铬和野生动物园](../Images/a0822d458da7081f044d40411146b866.png)

**在火狐中：**
![火狐](../Images/67b4837c7145d2c6048a36f3e79a2b13.png)

**我的代码：**

```
.hm_tst_dv_img {
    height: 80px;
    width: 131px;
    display: block;
    float: left;
    margin: 0 3px 20px 0;
    position: relative;
    overflow: hidden;
}

.hm_tst_dv_img_thumb {
    height: 80px;
    width: 131px;
    display: block;
    float: left;
    clear: both;
    position: relative;
    top: 0;
    z-index: 90;
}

.hm_tst_dv_img_overlay {
    height: 80px;
    width: 131px;
    display: block;
    float: left;
    margin: 0;
    position: relative;
    top: -80px;
    z-index: 100;
} 
```

```
<div class="hm_tst_dv_img">
    <div class="hm_tst_dv_img_thumb">
        <img alt="" src="<?php echo base_url(); ?>
            uploads/testimonials/thumb_
            <?php echo $testimonial->image; ?>"
            width="131" height="80" />
    </div>
    <div class="hm_tst_dv_img_overlay">
        <a href="javascript:void(0);" onclick="PlayTestmoinalVideo(<?=$i;?>)">
            <img src="<?php echo base_url(); ?>images/testimonial_overlay.png" />
        </a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:50:16.770

尝试这个：

```
.hm_tst_dv_img_overlay {
    height: 80px;
    width: 131px;
    display: block;
    margin: 0;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 100;
} 
```

如果可以避免的话，我不会混合定位和浮动。

# node.js - 从助手内部调用助手

> ID：11449501
> 
> 赞同：0
> 
> 时间：2012-07-12T10:04:14.077
> 
> 标签：node.js, helper, express

我正在使用 Expressjs 开发这个 Web 应用程序，我觉得需要 Microsoft 的 Razor 视图引擎提供的功能。

Razor 允许从其他助手中调用助手。在 Expressjs 中，当从视图调用助手时，助手的范围不会扩展到助手本身。

有解决方案吗？我不想将助手作为参数传递给视图，或者必须要求助手的文件。

提前致谢

例子：

我有

```
app.helpers({ TextBoxHelper: require('./TextBox.js') });
app.helpers({ CharCounter  : require('./CharCounter.js'  ) }); 
```

在我的服务器中。当我渲染视图时，我使用 jshtml 视图引擎并调用助手，我只需要执行以下操作：

```
@TextBoxHelper()    //I can do this because all helpers are present in this scope 
```

调用助手时，它会退出视图范围，并且将无法访问那里的其他助手。

现在，我希望这个助手“TextBox”调用“CharCounter”。第二个助手应该由其他几个助手调用，所以，如果我可以从助手的“.js”文件中调用它，而不需要脚本，或者将它作为参数发送，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:07:30.220

我只是将所有助手捆绑到一个对象中。这样你就可以使用`this.someHelper()`.

```
var helpers = {
  first: function () {
    console.log('first');
    helpers.second();
  },

  second: function () {
    console.log('second');
  }
};

helpers.first(); 
```

如果`this`不是您想要的，您可以随时在 Javascript 中轻松更改它。

# sql - Oracle SQL 查询调优

> ID：11449505
> 
> 赞同：-1
> 
> 时间：2012-07-12T10:04:19.770
> 
> 标签：sql, oracle

我们可以调整下面的 oracle sql 查询吗？此查询需要大量时间从数据库中获取行。

```
SELECT T.ACCUMULATORS_INFO ACCU_INFO, T.SUBSCR_NO service_internal_id, 
T.SUBSCR_NO_RESETS service_internal_id_resets, T.*,T.MTR_TYPE_ID MTR_TYPE, 
T.ACCOUNT_NO account_internal_id, T.MTR_SUB_TYPE_ID MTR_SUB_TYPE, 
T.FILE_ID EXTRACT_FILE_ID, T.UNIT_TYPE_ID unit_type, RCV2.ISO_CODE PREV_SUBSCRIBER_CURRENCY, 
T.MTR_SOURCE_ID MTR_SOURCE, RCV1.ISO_CODE SUBSCRIBER_CURRENCY 
FROM  MTR T 
LEFT OUTER JOIN RATE_CURRENCY_REF RCV1 ON (T.CURRENCY_CODE = RCV1.CURRENCY_CODE) 
LEFT OUTER JOIN RATE_CURRENCY_REF RCV2 ON (T.PREV_CURRENCY_CODE = RCV2.CURRENCY_CODE) 
WHERE (T.CURRENCY_CODE IS NULL OR RCV1.service_version_id = ?) AND 
(T.PREV_CURRENCY_CODE IS NULL OR RCV2.service_version_id = ?) AND 
T.mod_date BETWEEN ? AND ? AND T.subscr_no = ? AND 
T.subscr_no_resets = ? 
ORDER BY T.mod_date DESC 
```

问候，钱德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:12:31.090

在不知道模型和数据的情况下优化查询总是很困难，但这是我会尝试的。

您至少应该有一个索引 on
`rate_currency_ref (currency_code, service_version_id )`
，也许还有一个 on
`mtr (mod_date, subscr_no, subscr_no_resets)`。

我还将调整查询以将附加条件放入`LEFT JOIN`s 以获得更好的可读性（也许更好的优化）。

```
SELECT T.ACCUMULATORS_INFO ACCU_INFO, T.SUBSCR_NO service_internal_id, 
  T.SUBSCR_NO_RESETS service_internal_id_resets, T.*,T.MTR_TYPE_ID MTR_TYPE, 
  T.ACCOUNT_NO account_internal_id, T.MTR_SUB_TYPE_ID MTR_SUB_TYPE, 
  T.FILE_ID EXTRACT_FILE_ID, T.UNIT_TYPE_ID unit_type, RCV2.ISO_CODE PREV_SUBSCRIBER_CURRENCY, 
  T.MTR_SOURCE_ID MTR_SOURCE, RCV1.ISO_CODE SUBSCRIBER_CURRENCY 
FROM MTR T 
LEFT OUTER JOIN RATE_CURRENCY_REF RCV1
     ON (T.CURRENCY_CODE = RCV1.CURRENCY_CODE AND RCV1.service_version_id = ?)
LEFT OUTER JOIN RATE_CURRENCY_REF RCV2
     ON (T.PREV_CURRENCY_CODE = RCV2.CURRENCY_CODE AND RCV2.service_version_id = ?)
WHERE
  T.mod_date BETWEEN ? AND ? AND T.subscr_no = ? AND 
  T.subscr_no_resets = ? 
ORDER BY T.mod_date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T20:59:32.963

SQl 看起来很奇怪 `...(CURRENCY_CODE IS NULL OR service_version_id_RCV1 = ?)`

无论如何，假设 SQL 在功能上是正确的并且尽管 'Peter' 建议了索引但性能不佳，我会调整和重写 SQL（使用子查询）以允许优化器选择更好的计划：-

```
SELECT tmp.*
FROM
  (SELECT T.ACCUMULATORS_INFO ACCU_INFO,
    T.SUBSCR_NO service_internal_id,
    T.SUBSCR_NO_RESETS service_internal_id_resets,
    T.*,
    T.MTR_TYPE_ID MTR_TYPE,
    T.ACCOUNT_NO account_internal_id,
    T.MTR_SUB_TYPE_ID MTR_SUB_TYPE,
    T.FILE_ID EXTRACT_FILE_ID,
    T.UNIT_TYPE_ID unit_type,
    RCV2.ISO_CODE PREV_SUBSCRIBER_CURRENCY,
    RCV2.service_version_id_RCV2,
    T.MTR_SOURCE_ID MTR_SOURCE,
    RCV1.ISO_CODE SUBSCRIBER_CURRENCY,
    RCV1.service_version_id_RCV1
  FROM MTR T
  LEFT OUTER JOIN RATE_CURRENCY_REF RCV1
  ON (T.CURRENCY_CODE = RCV1.CURRENCY_CODE)
  LEFT OUTER JOIN RATE_CURRENCY_REF RCV2
  ON (T.PREV_CURRENCY_CODE = RCV2.CURRENCY_CODE)
  WHERE T.mod_date BETWEEN ? AND ?
  AND T.subscr_no        = ?
  AND T.subscr_no_resets = ?
  ) tmp
WHERE (CURRENCY_CODE      IS NULL OR service_version_id_RCV1 = ?)
AND (PREV_CURRENCY_CODE   IS NULL OR service_version_id_RCV2 = ?)
ORDER BY mod_date DESC 
```

我建议在 MTR 和 RATE_CURRENCY_REF 上保持以下索引：

1.  mtr (mod_date, subscr_no, subscr_no_resets)
2.  地铁 (CURRENCY_CODE)
3.  地铁 (PREV_CURRENCY_CODE)
4.  rate_currency_ref (currency_code)

# cassandra - 如何在本地 Ubuntu 系统中安装 Cassandra

> ID：11449507
> 
> 赞同：-1
> 
> 时间：2012-07-12T10:04:25.827
> 
> 标签：cassandra, cassandra-0.7

如何在我的本地 ubuntu 机器上安装 cassandra，我使用 sudo apt-get cassandra 在本地机器上安装了 cassandra，但是当我启动 cassandra 时系统冻结。我也设置了128M堆内存，但是不行

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:26:15.787

Apache Cassandra 有一个最新的官方软件包。[http://wiki.apache.org/cassandra/DebianPackaging](http://wiki.apache.org/cassandra/DebianPackaging)。然后你必须小心你的系统，Cassandra 需要最少的内存和 cpu。我建议您阅读以下页面：

[http://wiki.apache.org/cassandra/Cas​​sandraHardware](http://wiki.apache.org/cassandra/CassandraHardware)

[http://wiki.apache.org/cassandra/PerformanceTuning](http://wiki.apache.org/cassandra/PerformanceTuning)

# android - android.content.ContextWrapper 的 NullPointerException

> ID：11449508
> 
> 赞同：5
> 
> 时间：2012-07-12T10:04:28.193
> 
> 标签：android, nullpointerexception, android-resources, android-context

当我尝试`getResources().getColor(R.color.yellow)`在正常活动中获取颜色时，我得到了这个异常：

```
07-12 11:58:38.019: E/AndroidRuntime(3233): FATAL EXCEPTION: main
07-12 11:58:38.019: E/AndroidRuntime(3233): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.moveinblue.planner/com.moveinblue.planner.controller.plan.PlanDayScreen}: java.lang.NullPointerException
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1993)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.app.ActivityThread.access$600(ActivityThread.java:132)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.os.Looper.loop(Looper.java:137)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.app.ActivityThread.main(ActivityThread.java:4575)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at java.lang.reflect.Method.invokeNative(Native Method)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at java.lang.reflect.Method.invoke(Method.java:511)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at dalvik.system.NativeStart.main(Native Method)
07-12 11:58:38.019: E/AndroidRuntime(3233): Caused by: java.lang.NullPointerException
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at com.moveinblue.planner.controller.plan.PlanDayScreen$4.<init>(PlanDayScreen.java:408)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at com.moveinblue.planner.controller.plan.PlanDayScreen.<init>(PlanDayScreen.java:406)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at java.lang.Class.newInstanceImpl(Native Method)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at java.lang.Class.newInstance(Class.java:1319)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
07-12 11:58:38.019: E/AndroidRuntime(3233):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1984)
07-12 11:58:38.019: E/AndroidRuntime(3233):     ... 11 more 
```

有人可以在这里给我一些后见之明吗？我完全迷路了。

活动中的代码：

```
package com.moveinblue.planner.controller.plan;

import java.text.SimpleDateFormat;
import java.util.BitSet;
import java.util.Calendar;

import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.AsyncTask;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.Toast;

import com.moveinblue.api.Login;
import com.moveinblue.api.Planner;
import com.moveinblue.api.UnauthorizedException;
import com.moveinblue.api.io.InvalidURLException;
import com.moveinblue.api.io.OfflineException;
import com.moveinblue.api.model.ModelObject;
import com.moveinblue.api.model.Plan;
import com.moveinblue.api.model.time.Day;
import com.moveinblue.api.model.time.ScheduledThingToDo;
import com.moveinblue.api.model.time.ScheduledTime;
import com.moveinblue.api.model.time.ScheduledTime.TimeOfDay;
import com.moveinblue.planner.R;
import com.moveinblue.planner.controller.GenericPlannerScreen;
import com.moveinblue.planner.controller.thingtodo.ThingsToDoListScreen;
import com.moveinblue.planner.controller.user.LoginScreen;
import com.moveinblue.planner.ui.actionbar.ActionBar;
import com.moveinblue.planner.ui.draganddroplist.DragListener;
import com.moveinblue.planner.ui.draganddroplist.DragNDropListView;
import com.moveinblue.planner.ui.draganddroplist.DropListener;
import com.moveinblue.planner.ui.draganddroplist.RemoveListener;
import com.moveinblue.planner.utils.CommonActionStorage;
import com.moveinblue.planner.utils.CurrentItemsStorage;
import com.moveinblue.planner.utils.adapter.DragNDropAdapter;
import com.moveinblue.planner.utils.adapter.listeners.OnCheckListener;

public class PlanDayScreen extends GenericPlannerScreen {

DragNDropListView lista;
AutoCompleteTextView actv;
String[] dests;
DragNDropAdapter adapter;
private Boolean idDroppedOrDeleted = false;
private BitSet checkedBoxes = new BitSet();
private boolean firstLoad = true;
Day day;
@SuppressWarnings("unused")
private static final String LOG_TAG = PlanDayScreen.class
        .getCanonicalName();

@Override
public void load() {
    setContentView(R.layout.plan_day_list);
    setUpList();
    setUpBottomLayout(false);
    lista.requestFocus();
}

@Override
protected void loadActionBar() {
    Plan p = CurrentItemsStorage.currentPlan;
    Calendar c = CurrentItemsStorage.currentDay;
    ab = new ActionBar(this, ActionBar.TYPE_LIST);
    String date = new SimpleDateFormat("MMM dd, yyyy").format(c.getTime());
    date = Character.toUpperCase(date.charAt(0)) + date.substring(1);
    date = "(" + date + ")";
    String title;

    title = (p != null) ? p.name + " " + date : "Draft plan";

    ab.setTitle(title);
    ab.setBackAction(R.drawable.back, new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Intent intent = new Intent(PlanDayScreen.this,
                    PlanTabsScreen.class);
            intent.putExtra("tab", 2);
            startActivity(intent);
            overridePendingTransition(android.R.anim.slide_in_left,
                    android.R.anim.fade_out);

        }
    });
    CommonActionStorage.setUpActionBar(ab);
}

private void addNewTTD() {
    if (getIntent().getBooleanExtra("schedule", false) && firstLoad) {
        try {
            Calendar c = CurrentItemsStorage.currentDay;
            TimeOfDay tod = CurrentItemsStorage.currentTimeOfDaySelectedOption;
            Planner.schedule(
                    CurrentItemsStorage.getCurrentThingToDo().ttdId,
                    new ScheduledTime(c, tod));
        } catch (Exception ex) {
            ex.getStackTrace();
        }
    }
    firstLoad = false;
}

/**
 * Sets up a bottom bar button
 * 
 * @param id
 *            The bottom bar button id you want to set
 */
private void setUpBottomButton(int id) {
    ImageButton b = (ImageButton) findViewById(id);
    switch (id) {
    case R.id.buttonBottom1:
        if (!areThereCheckedBoxes()) {
            b.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // Add TTD to plan
                    Intent intent = new Intent(PlanDayScreen.this,
                            ThingsToDoListScreen.class);
                    startActivity(intent);
                }
            });
        } else {
            b.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // Date
                }
            });
        }
        break;
    case R.id.buttonBottom2:
        if (!areThereCheckedBoxes()) {
            b.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // Map
                    if (day != null) {
                        CurrentItemsStorage.mapModelObjects = new ModelObject[0];
                        CurrentItemsStorage.mapModelObjects[1] = day;
                        Intent intent = new Intent(PlanDayScreen.this,
                                PlanTabsScreen.class);
                        startActivity(intent);
                    }

                }
            });
        } else {
            b.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // Confirm
                    new AlertDialog.Builder(PlanDayScreen.this)
                            .setIcon(android.R.drawable.ic_dialog_alert)
                            .setTitle(
                                    "Remove " + checkedCount()
                                            + " things to do")
                            .setMessage(
                                    "Do you really wish to remove "
                                            + checkedCount()
                                            + " things to do from your plan?")
                            .setPositiveButton("Yes",
                                    new DialogInterface.OnClickListener() {

                                        @Override
                                        public void onClick(
                                                DialogInterface dialog,
                                                int which) {
                                            // Remove
                                            for (int i = 0; i < lista
                                                    .getCount(); i++) {
                                                if (checkedBoxes.get(i)) {
                                                    // Get checked item
                                                    Object ttd = adapter
                                                            .getItem(i);
                                                    if (ttd instanceof ScheduledThingToDo) {
                                                        try {
                                                            // Remove it
                                                            ScheduledThingToDo tTD = (ScheduledThingToDo) ttd;
                                                            Planner.unschedule(
                                                                    tTD.ttdId,
                                                                    tTD.time);
                                                        } catch (OfflineException ex) {
                                                            Toast.makeText(
                                                                    PlanDayScreen.this,
                                                                    getResources()
                                                                            .getString(
                                                                                    R.string.unschedule_error),
                                                                    Toast.LENGTH_SHORT)
                                                                    .show();
                                                        } catch (InvalidURLException e) {
                                                        }
                                                    }
                                                }
                                            }
                                            // Reset checkedBoxes and
                                            // BottomLayout
                                            checkedBoxes = new BitSet();
                                            setUpBottomLayout(false);
                                            // Redraws the list
                                            setUpList();
                                        }
                                    }).setNegativeButton("No", null).show();
                }
            });
        }
        break;
    case R.id.buttonBottom3:
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // Update

            }

        });
        break;
    }
}

/**
 * Sets up the list
 */
private void setUpList() {
    lista = (DragNDropListView) findViewById(R.id.listViewAgenda);
    new LoadList();
}

/**
 * Counts the number of checked boxes
 * 
 * @return the number of checked boxes
 */
private int checkedCount() {
    int x = 0;
    for (int i = 0; i < checkedBoxes.length(); i++) {
        x += checkedBoxes.get(i) ? 1 : 0;
    }
    return x;
}

/**
 * Changes the buttoms on the bottom action bar. If you pass true, you get
 * the "delete items" action bar. Else, you get the "add items" action bar.
 * 
 * @param isAnythingMarked
 *            True if you want to delete items, false if you want to add
 *            them.
 */
private void setUpBottomLayout(boolean isAnythingMarked) {
    ImageButton b1 = (ImageButton) findViewById(R.id.buttonBottom1);
    ImageButton b2 = (ImageButton) findViewById(R.id.buttonBottom2);
    ImageButton b3 = (ImageButton) findViewById(R.id.buttonBottom3);
    b1.setImageDrawable(getResources().getDrawable(
            isAnythingMarked ? R.drawable.action_plans
                    : R.drawable.action_add));
    b2.setImageDrawable(getResources().getDrawable(
            isAnythingMarked ? R.drawable.action_delete
                    : R.drawable.action_map));
    b3.setImageDrawable(getResources()
            .getDrawable(R.drawable.action_reload));
    setUpBottomButton(R.id.buttonBottom1);
    setUpBottomButton(R.id.buttonBottom2);
    setUpBottomButton(R.id.buttonBottom3);
}

private boolean areThereCheckedBoxes() {
    for (int i = 0; i < checkedBoxes.length(); i++) {
        if (checkedBoxes.get(i)) {
            return true;
        }
    }
    return false;
}

public void clickControlRowHandler(View v) {
    Intent intent = new Intent(PlanDayScreen.this,
            ThingsToDoListScreen.class);
    startActivity(intent);
}

/**
 * Drop Listener for the DragNDropListView
 */
private DropListener mDropListener = new DropListener() {
    public void onDrop(final int from, int to) {
        if (to == 0)
            to = 1;
        // If initial position is the same as final position, do nothing.
        if (to != from) {
            if (adapter instanceof DragNDropAdapter) {
                if (adapter.getItem(from) instanceof ScheduledThingToDo) {
                    new DropCall(from, to);
                    ((DragNDropAdapter) adapter).onDrop(from, to);
                }
            }
        }
    }
};

public OnClickListener onClickSave = new OnClickListener() {

    public void onClick(View v) {
        try {
            if (Login.isRegistered()) {
                if (Planner.loadPlan().name == null) {
                    CurrentItemsStorage.shallGoAfterCreatePlan = PlanDayScreen.class;
                    if (idDroppedOrDeleted) {
                        manageListChanges();
                    }
                    Intent intent = new Intent(PlanDayScreen.this,
                            SavePlanScreen.class);
                    startActivity(intent);
                    return;
                }
            } else {
                CurrentItemsStorage.currentPlan = Planner.loadPlan();
                CurrentItemsStorage.shallGoAfterLogin = PlanDayScreen.class;
                Intent intent = new Intent(PlanDayScreen.this,
                        LoginScreen.class);
                startActivity(intent);
            }

        } catch (OfflineException e) {
            Toast.makeText(PlanDayScreen.this,
                    getResources().getString(R.string.plan_error),
                    Toast.LENGTH_SHORT).show();
        }
        if (idDroppedOrDeleted) {
            manageListChanges();
        }
    }
};

/**
 * Unschedules every TTD, then schedules it again.
 */
private void manageListChanges() {

    for (int i = 0; i < adapter.getCount(); i++) {
        Object item = adapter.getItem(i);
        if (item instanceof ScheduledThingToDo) {
            try {
                ScheduledThingToDo scheduled = (ScheduledThingToDo) item;
                Planner.unschedule(scheduled.getId(), scheduled.time);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
    int state = 0;
    for (int it = 0; it < adapter.getCount(); it++) {
        Object item = adapter.getItem(it);
        TimeOfDay tod = TimeOfDay.morning;
        if (item instanceof ScheduledThingToDo) {
            switch (state) {
            case 1:
                tod = TimeOfDay.morning;
                break;
            case 2:
                tod = TimeOfDay.afternoon;
                break;
            case 3:
                tod = TimeOfDay.evening;
                break;
            }
            try {
                Planner.schedule(((ScheduledThingToDo) item).ttdId,
                        new ScheduledTime(CurrentItemsStorage.currentDay,
                                tod));
            } catch (OfflineException e) {
                Toast.makeText(PlanDayScreen.this, "No connection",
                        Toast.LENGTH_SHORT).show();
            }
        } else {
            state++;
        }
    }
}

/**
 * RemoveListener for the DragNDropListView
 */
private RemoveListener mRemoveListener = new RemoveListener() {
    public void onRemove(int which) {
        // ListAdapter adapter = getListAdapter();
        if (adapter instanceof DragNDropAdapter) {
            ((DragNDropAdapter) adapter).onRemove(which);
            lista.invalidateViews();
        }
    }
};

/**
 * DragListener for the DragNDropListView
 */
private DragListener mDragListener = new DragListener() {

    int backgroundColor = getResources().getColor(R.color.yellow);
    int defaultBackgroundColor = getResources().getColor(R.color.blue_bg);

    public void onDrag(int x, int y, ListView listView) {
        // TODO Auto-generated method stub
    }

    public void onStartDrag(View itemView) {
        itemView.setVisibility(View.INVISIBLE);
        itemView.setBackgroundColor(backgroundColor);
        ImageView iv = (ImageView) itemView.findViewById(R.id.imageView1);
        if (iv != null)
            iv.setVisibility(View.INVISIBLE);
    }

    public void onStopDrag(View itemView) {
        itemView.setVisibility(View.VISIBLE);
        itemView.setBackgroundColor(defaultBackgroundColor);
        ImageView iv = (ImageView) itemView.findViewById(R.id.imageView1);
        if (iv != null)
            iv.setVisibility(View.VISIBLE);
    }
};

private class LoadList extends AsyncTask<Void, Void, Void> {

    public LoadList() {
        execute();
    }

    @Override
    protected void onPreExecute() {
        String[] x = { "Loading..." };
        addNewTTD();
        ArrayAdapter<String> asdf = new ArrayAdapter<String>(
                PlanDayScreen.this, R.layout.add_more, x);
        lista.setAdapter(asdf);
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        ScheduledThingToDo[] ttds;
        try {
            try {
                // Loads current day
                day = Planner.loadDay(CurrentItemsStorage.currentDay);
                ttds = day.ttds;
            } catch (NullPointerException ex) {
                // No current day: Loads today
                Day day = Planner.loadDay(Calendar.getInstance());
                ttds = day.ttds;
            }
        } catch (OfflineException e) {
            // Offline
            Toast.makeText(PlanDayScreen.this,
                    getResources().getString(R.string.day_error),
                    Toast.LENGTH_SHORT).show();
            ttds = new ScheduledThingToDo[0];
        } catch (UnauthorizedException e) {
            // Something strange happened
            ttds = new ScheduledThingToDo[0];
        } catch (Exception e) {
            // Something even more strange happened
            ttds = new ScheduledThingToDo[0];
        }

        adapter = new DragNDropAdapter(PlanDayScreen.this,
                new int[] { R.layout.dragitemttd }, ttds);

        adapter.setOnCheckListener(new OnCheckListener() {

            @Override
            public void onCheck(boolean isChecked, int position) {
                checkedBoxes.set(position, isChecked);
                setUpBottomLayout(areThereCheckedBoxes());
            }
        });
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        lista.setAdapter(adapter);
        lista.setDropListener(mDropListener);
        lista.setRemoveListener(mRemoveListener);
        lista.setDragListener(mDragListener);

    }

}

private class DropCall extends AsyncTask<Void, Void, Void> {

    private int from, to;

    public DropCall(int from, int to) {
        this.from = from;
        this.to = to;
        execute();
        lista.invalidateViews();
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        changeScheduledTTD(from, to);
        return null;
    }

    /**
     * Unschedules a TTD and then re-schedules it in its proper place
     * 
     * @param from
     *            The position the TTD came from
     * @param to
     *            The position the TTD has been dragged to
     */
    protected void changeScheduledTTD(int from, int to) {
        ScheduledThingToDo currentTTD;
        if (adapter.getItem(to) instanceof ScheduledThingToDo)
            currentTTD = (ScheduledThingToDo) adapter.getItem(to);
        else
            return;

        int indexMorning = 0;
        int indexAfternoon = 0;
        int indexEvening = 0;
        Object item = null;
        String currentTime = null;
        // Gets the indexes for Morning, Afternoon and Evening
        for (int i = 0; i < adapter.getCount(); i++) {
            item = adapter.getItem(i);
            if (item instanceof String) {
                currentTime = (String) item;
                if (currentTime.equals("MORNING")) {
                    indexMorning = i;
                }
                if (currentTime.equals("AFTERNOON")) {
                    indexAfternoon = i;
                }
                if (currentTime.equals("EVENING")) {
                    indexEvening = i;
                }
            }
        }

        TimeOfDay tod = null;
        if (to >= indexEvening) {
            tod = TimeOfDay.evening;
        } else if (to >= indexAfternoon) {
            tod = TimeOfDay.afternoon;
        } else if (to >= indexMorning) {
            tod = TimeOfDay.morning;
        }
        if (!currentTTD.time.getTimeOfDay().equals(tod)) {

            try {
                Planner.unschedule(currentTTD.ttdId, currentTTD.time);
                Planner.schedule(currentTTD.ttdId, new ScheduledTime(
                        CurrentItemsStorage.currentDay, tod));
            } catch (OfflineException e) {
                e.printStackTrace();
            }

        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T10:18:37.260

你`mDragListener`是一个成员变量。在初始化 Activity 对象/实例时可能还没有准备好。所以调用`getResource()`Activity 会失败。

```
// inner class or normal class ... change scope if needed
private class DragListener {
    int color = 0;
    public DragListener(Context context) {
        color = context.getResource().getColor(R.color.yellow);
    }
}

// activity
private DragListener mDragListener;
public void onCreate(...) {
    mDragListener = new DragListener(this);
    // more code
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-12T10:16:29.763

```
int backgroundColor = Color.YELLOW; 
```

代替

```
int backgroundColor = getResources().getColor(R.color.yellow); 
```

# ubuntu - 如何通过 sshfs 将文件夹树放入缓存中

> ID：11449510
> 
> 赞同：4
> 
> 时间：2012-07-12T10:04:47.117
> 
> 标签：ubuntu, sshfs

我想通过 SSH 在家工作。

我运行 Ubuntu。我已经安装了 sshfs 并在本地安装了我的文件。但是，处理本地文件太慢了，因为 sshfs 每次要读取文件时都会获取文件。

如何将所有内容放入缓存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T10:04:47.663

使用缓存超时参数并将其设置为较大的值（几个小时）：

```
sshfs -C -o cache_timeout=80000 myself@work:~/files_at_work ~/my_home 
```

然后，使用此脚本获取所有文件并将它们放入缓存中：

```
#!/bin/bash
for file in `find .`  
do
    echo "$file"
    cat $file > /dev/null
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-25T19:56:19.030

我正在开发一个名为[catfs](https://github.com/kahing/catfs/ "猫")的通用熔断器缓存文件系统，它可用于缓存 sshfs 数据。很高兴听到更多反馈！

# ssas - 在参差不齐/父子维度内具有父成员的计算成员？

> ID：11449514
> 
> 赞同：1
> 
> 时间：2012-07-12T10:04:50.957
> 
> 标签：ssas, mdx, cube, dimensional-modeling

我有一个参差不齐的帐户层次结构`[Data Type].[Data Type Hierarchy]`（简单键、名称、父键表）。

根

*   账户 1

    1.  子账户 1A

    2.  子账户 1B

    3.  帐户 2（帐户 1 的子帐户）

*   账户 3

    1.  子账户 3A

现在，我想将计算成员添加`[Data Type].[Data Type Hierarchy]`为父层次结构和`[account 2]`父成员。

在事实表中没有 的数据`[account 2]`，因为它应该是几个计算成员的简单占位符。

**问题 #1：**当我在 BIDS 中单击“选择父成员”时，我看不到该成员。我可以将其添加到 [All] 级别或其他帐户之一（具有数据）

**问题#2：**如果我使用脚本视图，我可以手动设置正确的父成员，但它不会聚合计算的成员，因此被隐藏，除非选中“显示空单元格”。如果我向下钻取，我的计算成员将显示，但具有预期值。

# javascript - 使用 jQuery 提交表单时的竞争条件

> ID：11449515
> 
> 赞同：1
> 
> 时间：2012-07-12T10:04:52.363
> 
> 标签：javascript, jquery, html, json, forms

为了能够使用 jQuery 提交表单（非 ajax），我必须进行 hack。

如果我不做`if`声明，表格将不会提交：

### 这有效（表单被提交）

```
$("#myHiddenFieldID").val(JSON.stringify(jsObject));
var x = $("#myHiddenFieldID").val();
if (x) {
    $("#myHiddenForm").submit();
} 
```

### 这不起作用（表单未提交字段保持为空）

```
$("#myHiddenFieldID").val(JSON.stringify(jsObject));
var x = $("#myHiddenFieldID").val();
// I used to put an alert here, which was shown __before__ the text appeared in the text field???!!! 
$("#myHiddenForm").submit(); 
```

我不明白，为什么我必须在这里阅读文本字段的内容......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:35:25.863

由于[提升](https://stackoverflow.com/questions/8597501/)，赋值语句在值传递到文本字段之前执行：

```
var x = $("#myHiddenFieldID").val();
$("#myHiddenFieldID").val(JSON.stringify(jsObject));
$("#myHiddenForm").submit(); 
```

# java - 如何在 Java 中将动态 PDF 文件与 iText 库合并？

> ID：11449516
> 
> 赞同：-1
> 
> 时间：2012-07-12T10:04:53.713
> 
> 标签：java, adobe, itext, livecycle

使用 iText 库，我可以合并静态 PDF 文件，但不能合并动态文件。

我怎样才能完成这项任务？

**编辑**：（从下面的评论中收集）：
很抱歉没有解释清楚动态pdf的意思。我现在正在写。
动态 pdf 文件由 adobe livecycle Designer 创建。它叫“ `XFA pdf files`”。
Ravinder 的代码非常适用于静态 pdf。但不适用于 XFA pdf 文件。
它们在合并（合并）时不可读。

我使用了这个动态的pdf文件。

1.  Pdf --> turbobit.net/9rn2r3quw5gx.html
2.  PDF --> turbobit.net/4e6q7a1ts4jw.html

如何将它们合并到一个 pdf 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:43:37.633

**更新答案**：

您拥有的 PDF 文件是使用`XFA (XML Forms Architecture)`.
iText 仅部分支持 XFA，但完全支持 AcroForms。

您需要展平 XFA 表单，然后根据需要使用。

您可以在以下位置参考有关处理 XFA 表格的各种讨论：

1.  [动态 XFA 表格；使用 Adob​​e LiveCycle Designer 创建的表单](http://itext-general.2136553.n4.nabble.com/dynamic-XFA-forms-forms-created-with-Adobe-LiveCycle-Designer-td4239465.html)
2.  [如何展平动态 XFA 表单？](http://support.itextpdf.com/node/134)
3.  [iText 演示：PDF 中的动态 XFA 表单](http://demo.itextsupport.com/xfademo/uploadpdf.jsp)
4.  ~~演示：XFA 到 PDF（Bruno Lowagie 的在线公报）~~
5.  [XfaMovie Java 示例](http://itextpdf.com/examples/iia.php?id=164)
6.  [XFA 到 PDF：itextpdf.com 上的文章/示例](http://itextpdf.com/itext-search?keys=xfa%20to%20pdf)

并且可能更多...

该`XfaMovie`示例将更有助于解决您的要求。

* * *

**原答案**：

您可以使用所有动态 pdf 文件的`byte[]`或`InputStream`形式来构建相关`PdfReader`对象并将它们组合生成单个 PDF 文件。

在示例中，我使用的是实例，但您可以从动态 PDF 内容`FileInputStream`生成实例并使用它。`ByteArrayInputStream`

**示例**：

```
import com.itextpdf.text.pdf.PdfCopyFields;
import com.itextpdf.text.pdf.PdfReader;
//import com.lowagie.text.pdf.PdfCopyFields;
//import com.lowagie.text.pdf.PdfReader;

public class CombineDynamicPdfContents
{
    // throws FileNotFoundException, IOException, DocumentException
    public static void main( String ... a ) throws Exception
    {
        String fileHome = System.getProperty( "user.home" ) + "/Desktop/";

        System.out.println( "Start combine PDF files" );
        FileInputStream fis1 = new FileInputStream( fileHome + "pdf-file-1.pdf" );
        FileInputStream fis2 = new FileInputStream( fileHome + "pdf-file-2.pdf" );

        // now create pdfreaders using inputstreams of pdf contents
        PdfReader file1 = new PdfReader( fis1 );
        PdfReader file2 = new PdfReader( fis2 );

        FileOutputStream fos = new FileOutputStream( fileHome + "Pdf-Combined.pdf" );
        PdfCopyFields copy = new PdfCopyFields( fos );

        copy.addDocument( file1 );
        copy.addDocument( file2 );
        copy.close();

        System.out.println( "Done ..." );
    } // psvm( .. )
} // class CombineDynamicPdfContents 
```

# .net - NHibernate 简单事务至少需要 10 秒

> ID：11449521
> 
> 赞同：0
> 
> 时间：2012-07-12T10:04:57.870
> 
> 标签：.net, wpf, hibernate, nhibernate, sql-server-ce

我在 wpf 应用程序上使用 NHibernate 和 SqlCe 数据库。我创建了一个父行并在父行上添加了大约 10K 条子项记录。在任何简单的事务（例如在任何表上插入单行）之后，至少需要 10 秒。

当我重新启动应用程序并加载父行和 10K 子行时，任何事务都像往常一样快。

可能是什么原因？

## 试课

```
public class Trial : JobsBase, INotifyPropertyChanged, ISoftDelete, IUniqueName, IDataErrorInfo, IFilter
{
    private int newrows;
    private int rows;
    private string name;
    private int cols;
    private int newcols;
    private string description;

    public Trial()
    {
        TrialId = new Guid();

    }

    public virtual Guid TrialId { get;  set; }

    public virtual string Name
    {
        get
        {
            return name;
        }
        set
        {

            if (name == value) return;
            name = value;
            FirePropertyChangedEvent("Name");
        }
    }
    public virtual int Rows
    {
        get
        {
            return rows;
        }
        set
        {

            newrows = value;
            if (newrows * cols > 10000) { return; }
            if (rows == value) return;
            BuildCells(rows, cols, value, cols);
            rows = value;
            FirePropertyChangedEvent("Rows");
        }
    }
    public virtual int Cols
    {
        get
        {

            return cols;
        }
        set
        {
            newcols = value;
            if (newcols * rows > 10000) { return; }
            if (value == cols) return;
            BuildCells(rows, cols, rows, value);
            cols = value;
            FirePropertyChangedEvent("Cols");
        }
    }

    public virtual string Description
    {
        get
        {
            return description;
        }
        set
        {
            if (description == value) return;
            description = value;
            FirePropertyChangedEvent("Description");
        }
    }

    public virtual void CleanUpRows(int oldrows, int newrows)
    {
        for (int r = newrows; r < oldrows; r++)
        {
            for (int c = 0; c < cols; c++)
            {
                //cell to delete
                var delCell = new Cell() { X = c, Y = r };
                int index;
                if ((index = cells.IndexOf(delCell)) > -1)
                {
                    cells.RemoveAt(index);
                }
            }
        }
    }
    public virtual void CleanUpColumns(int oldcols, int newcols)
    {
        for (int c = newcols; c < oldcols; c++)
        {
            for (int r = 0; r < rows; r++)
            {
                //cell to delete
                var delCell = new Cell() { X = c, Y = r };
                int index;
                if ((index = cells.IndexOf(delCell)) > -1)
                {
                    cells.RemoveAt(index);
                }
            }
        }
    }
    public virtual void BuildCells(int oldrows, int oldcols, int newrows, int newcols)
    {

        //remove cells if rows cols size decreases
        if (oldrows > newrows) CleanUpRows(oldrows, newrows);
        if (oldcols > newcols) CleanUpColumns(oldcols, newcols);
        Debug.WriteLine("build cells: " +DateTime.Now.ToLongTimeString() );
        for (int i = 0; i < newcols; i++)
        {

            for (int j = 0; j < newrows; j++)
            {
                AddCell(new Cell { X = i, Y = j, Active = true });
            }
        }
        Debug.WriteLine("end build cells: " + DateTime.Now.ToLongTimeString());

    }
    private IList<Cell> cells = new List<Cell>();

    public virtual IList<Cell> Cells
    {
        get { return cells; }
        set { cells = value; }
    }

    public virtual void AddCell(Cell cell)
    {

        if (!HasCell(cell))
        {
            cell.Trial = this;
            cells.Add(cell);
        }
    }
    public virtual void RemoveCell(Cell cell)
    {
        cells.Remove(cell);
    }
    public virtual bool HasCell(Cell cell)
    {
        return cells.Contains(cell);
    }
    public virtual bool HasCell(int x, int y)
    {
        return HasCell(new Cell() { X = x, Y = y });
    }
    public virtual Cell SetCellActive(int x, int y, bool active)
    {
        int i = Cells.IndexOf(new Cell() { X = x, Y = y });
        Cells[i].Active = active;
        FireCellChanged(new CellEventArgs() { X = x, Y = y });
        return Cells[i];

    }
    public virtual Cell GetCell(int x, int y)
    {
        int i = Cells.IndexOf(new Cell() { X = x, Y = y });
        return i >= 0 ? Cells[i] : null;
    }

    public virtual event PropertyChangedEventHandler PropertyChanged;
    public virtual event EventHandler<CellEventArgs> CellChanged;

    private void FireCellChanged(CellEventArgs e)
    {
        EventHandler<CellEventArgs> changed = CellChanged;
        if (changed != null) changed(this, e);
    }

    private void FirePropertyChangedEvent(string propertName)
    {
        if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs(propertName));
    }

    public override string ToString()
    {
        return TrialId.ToString();
    }

    public override bool Equals(object obj)
    {
        if (this == obj) return true;

        var other = obj as Trial;
        if (other == null) return false;

        return TrialId.Equals(other.TrialId);

    }

    public override int GetHashCode()
    {
        return TrialId.GetHashCode();
    }

    public virtual string this[string columnName]
    {
        get
        {
            string result = null;
            if (columnName == "Cols" || columnName == "Rows")
            {
                if (this.newcols * this.newrows > 10000)
                {
                    result = "No of cells must not exceed 10000";
                }
            }

            return result;
        }
    }

    public virtual string Error
    {
        get { return null; }
    }

    }

}
public class CellEventArgs : EventArgs
{
    public int X { get; set; }
    public int Y { get; set; }
} 
```

## 细胞

```
 public class Cell : INotifyPropertyChanged
    {
        public Cell()
        {
            CellId = Guid.NewGuid();
        }
        public virtual Guid CellId { get; set; }
        public virtual int MagazinNumber { get; set; } 
        public virtual int X { get; set; }
        public virtual int Y { get; set; }
        public virtual Trial Trial { get; set; }
        public virtual bool Active { get; set; }

        public virtual string CustomId { get; set; }

        public override string ToString()
        {
            return CellId.ToString();
        }

        public virtual bool EqualsById { get; set; }
        public override bool Equals(object obj)
        {
            if (this == obj) return true;

            var other = obj as Cell;
            if (other == null) return false;
            return other.EqualsById ? CellId.Equals(other.CellId) : X.Equals(other.X) && Y.Equals(other.Y);
        }

        public override int GetHashCode()
        {
            return CellId.GetHashCode();
        }

        private IDictionary<string, float> _datalist;
        public virtual IDictionary<string, float> Datalist
        {
            get
            {
                if(_datalist==null)
                {
                    _datalist= new Dictionary<string, float>();
                    if (data != null)
                    {
                        var document = new XmlDocument();
                        document.LoadXml(data);
                        foreach (XmlNode childNode in document.FirstChild.ChildNodes)
                        {
                            if (childNode.Attributes == null) continue;

                            string key = childNode.Attributes["key"].Value;
                            float val = float.Parse(childNode.Attributes["value"].Value);
                            SetExtraField(key, val);
                        }
                    }

                }
                return _datalist;
            }

        }

        private void SetExtraField(string key, float value)
        {
            if (Datalist.ContainsKey(key))
            {
                Datalist[key] = value;
            }
            else
            {
                Datalist.Add(key, value);
            }
        }

        private float? GetExtraField(string key)
        {
            float value;
            return Datalist.TryGetValue(key, out value) ? (float?)value : null;
        }

        private int? GetExtraFieldInt(string key)
        {
            float value;
            return Datalist.TryGetValue(key, out value) ? (int?)value : null;
        }
        private string data;
        public virtual string Data
        {
            get
            {
                string xml = @"<datas>";
                foreach (var f in Datalist)
                {
                    xml += string.Format("<data key='{0}' value='{1}' />", f.Key, f.Value);
                }
                xml += "</datas>";
                return xml;
            }
            set
            {
                data = value;
            }
        } 
```

* * *

## 将试用版添加到 db

变种试用=新试用{“tset1”}；

```
 trial.Rows = 10;
        trial.Cols = 1000;

        trial.Deleted = false;
        trial.BuildCells(10, 1000, 10, 1000);
        TrialDAO.Instance().Add(trial); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:38:47.287

就这样。

应用程序生命周期中的单个会话是您的原因。请参阅有关如何管理会话的 nhibernate 文档。

请参阅[NHibernate 会话管理](https://stackoverflow.com/questions/1150207/nhibernate-session-management)和[如何在 WPF 应用程序中确定 NHibernate 会话和事务的范围](https://stackoverflow.com/questions/2253025/how-to-scope-nhibernate-sessions-and-transactions-in-a-wpf-application)。

来自[文章](http://msdn.microsoft.com/en-us/magazine/ee819139.aspx)：

> NHibernate 桌面应用程序的一个常见不良做法是为整个应用程序设置一个全局会话。这是一个问题，原因有很多，...

# ios - UIDocument 从不调用 dealloc

> ID：11449530
> 
> 赞同：3
> 
> 时间：2012-07-12T10:05:46.270
> 
> 标签：ios, icloud, retain, dealloc, uidocument

我有一个问题，我似乎无法解除 UIDocument（在 iCloud 中使用）

运行 NSMetaDataQuery 以查找文档后，如下所示..

```
NSMetadataQuery *query = [[NSMetadataQuery alloc] init];
_query = query;
[query setSearchScopes:[NSArray arrayWithObject:
                        NSMetadataQueryUbiquitousDocumentsScope]];
NSPredicate *pred = [NSPredicate predicateWithFormat: 
                     @"%K == %@", NSMetadataItemFSNameKey, kFILENAME];
[query setPredicate:pred];
[[NSNotificationCenter defaultCenter] 
 addObserver:self 
 selector:@selector(queryDidFinishGathering:) 
 name:NSMetadataQueryDidFinishGatheringNotification 
 object:query];

[query startQuery]; 
```

我处理我的查询

```
- (void)queryDidFinishGathering:(NSNotification *)notification {

NSMetadataQuery *query = [notification object];
[query disableUpdates];
[query stopQuery];

[[NSNotificationCenter defaultCenter] removeObserver:self 
                                                name:NSMetadataQueryDidFinishGatheringNotification
                                              object:query];

_query = nil;

[self loadData:query];

} 
```

然后加载或创建一个新文档。

```
- (void)loadData:(NSMetadataQuery *)query {

if ([query resultCount] == 1) {

    NSMetadataItem *item = [query resultAtIndex:0];
    NSURL *url = [item valueForAttribute:NSMetadataItemURLKey];
    MyDocument *doc = [[[MyDocument alloc] initWithFileURL:url] autorelease];

    [doc openWithCompletionHandler:^(BOOL success) {
        if (success) {                
            NSLog(@"iCloud document opened %@", doc);
            [doc updateChangeCount:UIDocumentChangeDone];
        } else {                
            NSLog(@"failed opening document from iCloud");                
        }
    }];
} else {

    NSURL *ubiq = [[NSFileManager defaultManager] 
                   URLForUbiquityContainerIdentifier:nil];
    NSURL *ubiquitousPackage = [[ubiq URLByAppendingPathComponent:
                                 @"Documents"] URLByAppendingPathComponent:kFILENAME];

    MyDocument *doc = [[[MyDocument alloc] initWithFileURL:ubiquitousPackage] autorelease];

    [doc saveToURL:[doc fileURL] 
  forSaveOperation:UIDocumentSaveForCreating 
 completionHandler:^(BOOL success) {            
     if (success) {
         [doc openWithCompletionHandler:^(BOOL success) {                
             NSLog(@"new document opened from iCloud");
             [doc updateChangeCount:UIDocumentChangeDone];
         }];                
     }
 }];
}
} 
```

显示`NSLog(@"iCloud document opened %@", doc);`每个 UIDocument 的不同内存地址。

我的 UIDocument 子类中有一个 NSLog，它永远不会被调用。我看不到它被保留在哪里，我没有释放它。每当我想同步我的云数据时，都会运行此查询，这种情况经常发生。数据同步正确。

我遇到了奇怪的崩溃，我的应用程序将简单地靠近仪表板，调试中没有任何内容（根据以前的经验，我知道这通常是应用程序消耗太多内存并被终止。）

我认为我的 UIDocument 正在泄漏，我的假设是否正确，这是我第一次与 iCloud 搏斗，所以我仍然对一些事情一无所知。

我的子类具有以下属性：

```
@property (copy, nonatomic) NSData *infoData;
@property (copy, nonatomic) NSMutableArray *firstArray;
@property (copy, nonatomic) NSMutableArray *secondArray;
@property (copy, nonatomic) NSMutableArray *thirdArray; 
```

我没有使用 ARC。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T16:04:05.393

我没有意识到我必须这样做：

```
 [doc updateChangeCount:UIDocumentChangeDone];
        [doc closeWithCompletionHandler:nil]; 
```

显然，如果一个文件已打开以供写入，那么允许它被释放是不明智的！

嗬！希望这可以为将来节省一些时间。

# asp.net - c# asp.net 等待 db 中的状态改变

> ID：11449532
> 
> 赞同：0
> 
> 时间：2012-07-12T10:05:58.673
> 
> 标签：asp.net, database, asynchronous

我正在构建一个 Web 应用程序，其中用户提交的作业由后台服务处理，并且 Web 应用程序和后台服务之间的通信是在数据库上完成的。因此，当搜索开始时，Web 应用程序会在 db 中插入一条记录，并等待记录的状态字段发生变化。据我了解，如果我在请求线程上实现此功能，我会不必要地阻塞其中一个池线程，但无法让我的头脑异步执行此操作。在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:43:25.227

SQLDependency 非常有用，但在服务器端它只提供了一半的解决方案。我通过使用 SignalR 向客户端发出查询结束的信号来克服了另一半。最后，这是一个非常有效和优雅的解决方案。谢谢（你的）信息！

```
 public class KYHub : Hub
{
    void OnChange(object sender, SqlNotificationEventArgs e)
    {
        SqlDependency dependency = sender as SqlDependency;
        dependency.OnChange -= OnChange;
        if (e.Info != SqlNotificationInfo.Error && e.Info != SqlNotificationInfo.Delete)
        {
            string connstr = System.Configuration.ConfigurationManager.ConnectionStrings["cnnStr"].ConnectionString;
            SqlConnection conn = new SqlConnection(connstr);
            conn.Open();
            SearchResult result= SearchResult.Parse(conn, Caller.TaskID);
            conn.Close();
            Caller.endsearch(result);
        }
    }

    public void Search(SearchParam search)
    {
        string connstr = System.Configuration.ConfigurationManager.ConnectionStrings["cnnStr"].ConnectionString;
        SqlConnection conn = new SqlConnection(connstr);
        conn.Open();
        search.ClientID = Caller.id;
        int QueryID = search.Save(conn);
        Caller.TaskID = QueryID;
        SqlCommand cmd = new SqlCommand(String.Format("SELECT Completed FROM dbo.Tasks WHERE TaskID={0}", QueryID), conn);
        SqlDependency dep = new SqlDependency(cmd);
        dep.OnChange += OnChange;
        cmd.ExecuteReader();
        conn.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:15:23.033

如果您使用 SQL Server 作为数据库，那么您可以使用名为 SQLDependency 的 ADO.NET 功能，

正确设置时的剂量是什么，当表（您将配置）发生更改时，将引发 C# 事件。这是一篇解释它的文章

注意：您必须设置 SQL 服务器才能启用此功能。

[http://www.codeproject.com/Articles/12335/Using-SqlDependency-for-data-change-events](http://www.codeproject.com/Articles/12335/Using-SqlDependency-for-data-change-events)

这个解释了如何在表中的数据发生变化后刷新页面

[http://msdn.microsoft.com/en-us/library/e3w8402y%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/e3w8402y%28v=vs.80%29.aspx)

# svn - svn checkout http:// not working

> ID：11449533
> 
> 赞同：1
> 
> 时间：2012-07-12T10:06:13.237
> 
> 标签：svn, svn-checkout

The svn server is behind a proxy server which itself is behind a firewall. `svn co http://*/*` doesnt work returns: `repository permanently moved; please relocate` while svn co `svn+ssh://*/*` works well within the local domain of the proxy server.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:00:06.420

您确定您使用正确的 URL 和 http 协议吗？请注意，**Web**访问（例如由 ViewVC 提供）与**svn**访问不同...

如果可以，您还应该验证网络服务器上的配置。

ServerFault 上的这个问题也很有帮助：[Subversion 错误：存储库已永久移动到请重新定位](https://serverfault.com/questions/128242/subversion-error-repository-moved-permanently-to-please-relocate)

# algorithm - Least common ancestor of multiple nodes in DAG

> ID：11449534
> 
> 赞同：4
> 
> 时间：2012-07-12T10:06:22.107
> 
> 标签：algorithm, graph-algorithm, directed-acyclic-graphs, least-common-ancestor

How can I find a least common ancestors of **multiple nodes** in a directed acyclic graph?

I've found quite a few papers on the topic but they all seem to find LCAs in DAG for **two** nodes.

Are there good algorithms for multiple nodes?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:33:39.343

也许您可以修改用于树的算法，使其也适用于 DAG。

如您所知，有一种算法可以在树中找到 LCA，每个查询的预处理为*O(nlgn)*，过程为*O(1) ，因此找到**k*个节点的 LCA 需要*O(k)*。可以在[此处](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Range_Minimum_Query_%28RMQ%29)找到有关此算法的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-31T08:57:47.373

正如@DennisMeng、@vzn 和@user824425 已经在评论中指出的那样，在某些情况下（！）可以通过**（二进制）LCA 运算符的成对递归应用**来计算两个以上节点的 LCA ，例如：

```
lca(A, B, C, D) = lca(A, lca(B, lca(C, D))) 
```

在函数式编程中，这基本上等同于*reduce*（或[fold](https://en.wikipedia.org/wiki/Fold_(higher-order_function))）操作。

但是，这仅适用于作为[Multitrees](https://en.wikipedia.org/wiki/Multitree)的 DAG （或者，或者，无菱形组合[）](https://en.wikipedia.org/wiki/Partially_ordered_set)。对于不具有多树/无菱形 poset 属性的一般 DAG，不幸的是，这种方法*不起作用*。

考虑以下表示具有多重继承特征的类层次结构的 DAG（所有边都从底部指向顶部；`X`表示两个有向边的交叉）：

```
 Any
       /   \
  Boolean Value 
      |  X  |  \
    False True Unknown 
```

值得注意的是，`True`和`False`节点都有两个直系祖先，`Boolean`和`Value`。这里的第一个问题是这需要一个可以返回多个节点的 LCA 运算符，例如[JGraphT](https://jgrapht.org/)的[`getLCASet`](https://jgrapht.org/javadoc/org/jgrapht/alg/interfaces/LowestCommonAncestorAlgorithm.html#getLCASet(V,V))。现在，假设我们要计算 { `False`, `True`, `Unknown`} 的 LCA：通过简单地查看图形，很明显它`Value`是所有三个节点的直接祖先。直接成对归约不再适用，因为二元`getLCASet`运算符可以返回多个节点，但可以想象，可以使用类似堆栈的方法，将计算的祖先推回节点列表。但是，这不会产生正确的结果，例如：

```
 True, False, Unknown
     \   /
     (LCA)
     /   \
Boolean, Value, Unknown
     \   /
     (LCA)
       |
      Any, Unknown
        \   /
        (LCA)
          |
         Any 
```

# batch-file - 合并来自多个文件的行

> ID：11449537
> 
> 赞同：0
> 
> 时间：2012-07-12T10:06:33.137
> 
> 标签：batch-file, sed, grep

我有 3 个这样的文本文件

**文件1.txt**

```
AAA1
AAA2
AAA3
...
... 
```

**文件2.txt**

```
BBB1
BBB2
BBB3
..
.. 
```

**文件 3.txt**

```
CCC1
CCC2
CCC3
..
.. 
```

我想要这样的**output.txt**

```
AAA1:BBB1:CCC1
AAA2:BBB2:CCC2
..
... 
```

现在我可以通过循环从每个文件中读取一行来做到这一点，但我想使用 sed 、 grep 或任何类似工具来做到这一点，但我不知道怎么做。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:38:51.240

使用[粘贴](http://www.manpagez.com/man/1/paste/)：

```
paste -d ':' file1.txt file2.txt file3.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:41:53.277

`paste`非常适合这项任务。尝试：

```
paste -d ":" file1.txt file2.txt file3.txt > output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T02:53:32.023

粘贴答案听起来像是一个完美的解决方案。

但是有人（不是 OP）可能想要一个不需要下载可执行文件的本机解决方案。像这样的事情真的应该用更强大的脚本语言来完成，比如 VBScript 或 JScrpt。

但是，由于我喜欢用批处理解决问题的挑战，我想我会尝试使用原生批处理解决方案，只是为了好玩。

OP 说*“现在我可以通过循环从每个文件中读取一行来做到这一点”*。使用批处理说起来容易做起来难！

通常使用 FOR /F 读取文件，但没有好的方法可以使用 FOR /F 交叉读取多个文件。唯一的其他本机替代方法是将 SET /P 与重定向输入一起使用。这种技术有以下限制：

*   输入文件必须使用 Windows 样式的行终止符：`<carriage return><line feed>`
*   输入行的长度不能超过 1021 字节（不考虑行终止符）
*   从每个输入行中去除尾随控制字符

此外，每个最终合并的行不得超过 ~8k 字节的批处理可变长度限制。

最后一个限制 - 脚本最多只能处理 7 个输入文件。如果指定超过 7 个文件，脚本将失败 - 我没有包含任何错误检查。

所以这是一个工作批处理脚本 - 称之为“merge.bat”。*注意 - 此批处理解决方案比其他解决方案慢得多，例如粘贴或用 VBScript 或 JScript 编写的脚本。但它确实有效:-)*

```
@echo off
setlocal disableDelayedExpansion

::Initialization
set "inputRedirection="
set "files=2"
set "lines=0"
for %%F in (%*) do call :setInputRedirection
setlocal enableDelayedExpansion
set "inputRedirection=!inputRedirection:::=<!"

::Merge the files
%inputRedirection% (
  for /l %%N in (1 1 %lines%) do (
    set "ln="
    for /l %%I in (3 1 %files%) do (
      call :readLine %%I
      if %%I neq %files% (
          set "ln=!ln!!input!:"
      ) else (
          echo(!ln!!input!
      )
    )
  )
)
exit /b

:setInputRedirection
set /a "files+=1"
for %%A in (1) do (
  set inputRedirection=%files%::"%%~F" %inputRedirection%
  for /f %%N in ('find /c /v "" ^<"%%~F"') do if %%N gtr %lines% set "lines=%%N"
)
exit /b

:readLine  fileHandle
set "input="
<&%1 set /p "input="
exit /b 
```

要合并您的文件，您将执行以下操作：

```
merge.bat file1.txt file2.txt file3.txt >output.txt 
```

# javascript - jQuery插件模板

> ID：11449538
> 
> 赞同：1
> 
> 时间：2012-07-12T10:06:33.340
> 
> 标签：javascript, jquery, jquery-plugins

我发现这个模板用于创建 jQuery 插件[http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/](http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/)

但是我在代码中不明白，为什么我们将 pluginName 声明为 jQuery 对象的方法，然后我们将 pluginName 声明为对象 $.fn 的方法，为什么要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:10:55.267

添加插件以`$`使您能够编写：

```
var $el = $(".myselector");
$.myplugin($el, {
  some: "option",
  another: "one"
}); 
```

添加插件以`$.fn`使您能够编写：

```
$(".myselector").myplugin({
  some: "option",
  another: "one"
}); 
```

# python - Python List：如何在函数使用时附加对象？

> ID：11449540
> 
> 赞同：1
> 
> 时间：2012-07-12T10:06:41.780
> 
> 标签：python, list

> **可能重复：**
> [迭代时修改列表](https://stackoverflow.com/questions/1637807/modifying-list-while-iterating)

我正在编写一个 python 脚本，我试图从方法内部将对象附加到在类的主体中创建的 List 中。

到目前为止，我的代码是这样的：

```
class Worker:

    myList = ['one item', 'second item']

    def itter_List_Func(self, list_param):
       for item in list_param:
           more_items = item.split()
           self.myList[:] = [self.myList + item for item in more_items] 
```

但是对于一种奇怪的时尚，我遇到了一些“迭代错误时无法修改列表”。我是否应该保留原地更改并尝试使用新项目创建一个新的 List 对象？或者这会由于失去对 list_param 或其他东西的引用而产生更多问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:18:05.343

好的，从 avasal 提供给我的链接以及关于堆栈溢出的进一步阅读中，我了解到我正在尝试做的是一个坏主意。也许我应该尝试迭代原始列表的副本，或者对原始列表的副本进行分配，因为如果我在迭代时对列表进行更改，迭代器将不会被告知这一点，从而导致非常奇怪的行为或运行时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:44:42.593

要明确“直接创建新列表”的想法，您需要以下内容：

```
myList = sum((item.split() for item in myList), []) 
```

这是简单编写的方式，不幸的是，如果您有很多项目，它会变得很慢（因为`sum`依赖于加法，而加法不是`list`在 Python 中加入 s 的有效方法）。使用显式循环：

```
result = []
for item in myList:
    result.extend(item.split())
myList = result 
```

即：我们不创建列表的副本并尝试对其进行修改；我们创建一个空白列表并迭代地将其转换为我们想要的，使用原始列表作为流程的输入。

顺便说一句，您在这里有两个可能的设计问题：您似乎希望函数在每次调用时都被传递一个特定的值，并且您已经定义了一个类属性，您可能想要一个实例属性来代替。

# php - 我们如何从 mysql 数据库中的表中获取不匹配的值

> ID：11449543
> 
> 赞同：1
> 
> 时间：2012-07-12T10:06:54.843
> 
> 标签：php, mysql, join

我在从 mysql 数据库表中获取数据时遇到问题。我在下图中有两个表，例如 table-1 和 table-2。表 1 中 Pilotid 不等于 1 时如何从表 2 中获取数据。

![Mysql数据库表](../Images/819342e483f1301e5d8218027bb51bde.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:09:17.343

我不确定，如果我理解正确，但这会返回 table-1 的所有行，这些行在 table-2 中没有匹配的条目。`NOT EXISTS` [您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)找到相应的文档。

```
SELECT * 
  FROM table-1 t1
  WHERE NOT EXISTS( SELECT * FROM table-2 t2 WHERE t1.`Venueid` = t2.`Venueid` ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:09:58.517

```
select a.venueid, a.name 
from table2 a, table-1 b 
where b.pilotid <> 1 and b.venueid = a.venueid; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:11:15.497

```
SELECT        Table_2.*
    FROM      Table_2
    LEFT JOIN Table_1
        ON    Table_2.Venueid = Table_1.Venueid
    WHERE     Table_1.Venueid != 1
        OR    Table_1.Venueid NOT IN(1, 13, 15); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T10:14:55.680

```
$sql = "select Venueid from Table1 where pilotid <> 1";
$data = mysql_query($sql);
while($row = mysql_fetch_assoc($data))
{
 $ids[] = $row['Venueid'];
}
$sql2 = "select * from Table2 where venueid IN(".implode(',', $ids).")";
$data2 = mysql_query(sql2);

//$data2 contains the result-set resource; 
```

# php - Submit a form inside colorbox with ajax

> ID：11449544
> 
> 赞同：0
> 
> 时间：2012-07-12T10:06:58.037
> 
> 标签：php, ajax, colorbox

Until now I was using this code to post data from within a colorbox window until I ran into encoding errors, data being submitted as "ΞΞΞ§Ξ‘Ξ©ΞΞ" instead of 'ΔΙΧΡΩΜΟ':

```
$("#productadd").submit(function(){
  $.post(
  $(this).attr('action'),
  $(this).serialize(),
  function(data){
    alert('Product added to cart!');  
    $().colorbox.close();
  }
); 
```

After some searching I decided to change my code to this so I can set the encoding when posting but I need some help to complete it:

```
$.ajax({
    type: "POST",
    url: $(this).attr('action'),
    contentType: "application/json; charset=iso-8859-7",
    dataType: "json",
    data: "{id: '" + someId + "'}",
    success: function(json) {
        alert('Product added to cart!'),  
        $().colorbox.close(),
        $("#success").html("json.length=" + json.length);
        itemAddCallback(json);
    },
    error: function (xhr, textStatus, errorThrown) {
        $("#error").html(xhr.responseText);
    }
}); 
```

but none of the calls inside success: are made, with the page being redirected to the url in form action and neither the alert or $().colorbox.close() are being called whereas, with the previous code, it used to submit in the same window (without redirectiong to the action url) and showing the alert and finally, closing the colorbox window. Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:11:40.457

您必须通过阻止它执行默认操作来阻止正常的表单提交，否则它将作为正常的表单提交执行重定向到表单的 url。

```
$("#productadd").submit(function(e){
e.preventDefault();
$.ajax({
    type: "POST",
    url: $(this).attr('action'),
    contentType: "application/json; charset=iso-8859-7",
    dataType: "json",
    data: "{id: '" + someId + "'}",
    success: function(json) {
        alert('Product added to cart!'),  
        $().colorbox.close(),
        $("#success").html("json.length=" + json.length);
        itemAddCallback(json);
    },
    error: function (xhr, textStatus, errorThrown) {
        $("#error").html(xhr.responseText);
    }
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:14:35.890

我相信这可以解决您提交表单的问题

```
$("#productadd").submit(function(event){
event.preventDefault(); // prevent submission of the form and send ajax
  $.post(
  $(this).attr('action'),
  $(this).serialize(),
  function(data){
    alert('Product added to cart!');  
    $().colorbox.close();
  }
); 
```

至于编码，它可能取决于您获得该结果的浏览器编码，请尝试更改为其他希腊编码或 UTF-8。

# vb.net - 其根节点的 TreeView 父节点和叶节点

> ID：11449545
> 
> 赞同：1
> 
> 时间：2012-07-12T10:07:00.070
> 
> 标签：vb.net, treeview

我有一个遵循层次结构的树视图

```
 Season 1
        Farm 1
              Field 1
              Field 2
                     Crop 1
                     Crop 2
        Farms 2  
              Field 1
              Field 2
                     Crop 1
                     Crop 2 
```

和一个显示数据的 GridView 与 treeview 选择的节点值。我已经使用 sqldatasource 在 gridview 中显示数据，并使用以下代码和查询

```
 Dim cmd As OleDbCommand = New OleDbCommand()
        If TreeView1.SelectedNode.Depth = 0 Then
            SqlDataSource1.SelectCommand = ("SELECT * FROM V_FARMS where SSN_id='" & TreeView1.SelectedNode.Value & "'")

        ElseIf TreeView1.SelectedNode.Depth = 1 Then
            SqlDataSource1.SelectCommand = ("SELECT * FROM V_FARMS where FRM_id='" & TreeView1.SelectedNode.Value & "'")

        ElseIf TreeView1.SelectedNode.Depth = 2 Then
            SqlDataSource1.SelectCommand = ("SELECT * FROM V_FARMS where FLD_id='" & TreeView1.SelectedNode.Value & "'")

        ElseIf TreeView1.SelectedNode.Depth > 2 Then
            SqlDataSource1.SelectCommand = ("SELECT * FROM V_FARMS where CRP_id='" & TreeView1.SelectedNode.Value & "'")
        End If 
```

现在的问题是，当我选择第 1 季时，它会显示针对第 1 季的数据 OK。但是，当我选择 Farm1 时，它会显示针对 Farm 1 的所有数据，而不是针对 Farm 1 的第 1 季的所有数据，并且字段值的行为相同。如何针对其上面的父节点和根节点等显示每个节点的数据.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:04:59.447

我怀疑您没有正确使用 .Depth 属性。尝试将每个节点的 ID 设置为不同的值，或者在尝试时将 SQL 语句写入每个节点的标记中。

# ruby-on-rails-3 - simple html value for nested form

> ID：11449546
> 
> 赞同：0
> 
> 时间：2012-07-12T10:07:00.640
> 
> 标签：ruby-on-rails-3, backbone.js, nested-forms, nested-attributes

I'm using rails, and backbone with handlebars, and I have a nested form.

I am trying to create a user, and the user can supply a url. So I have a user model and a url model

I thought I could do something like this

```
<form id="new_user">
     <label name="username" >username</label>
     <input type="text" name="username" />

     <label name="url" >url</label>
     <input type="text" class="nested urls_attributes" name="url" />

</form>

```

----------------------update -----------------------------------------

as this is something that will be seldomly used, I've updated my backbone view to create the correct json when I submit the form, so now on submit form, I create the first json, then add the nested object.

```
var form_json = MyApp.Helpers.Serialize_Form($('form#user_form inputs').not('.nested'));
     form_json['urls_attributes']=MyApp.Helpers.Serialze_Form($('form#user_form inputs.nested'));

```

this creates the json in the format of

```
{username: "test", urls_attributes: {url:"http://test"}}

```

So when I pass that to my controller, I expected that the url would be created when the user is created.

Unfortunately, that doesn't seem to be happening, and I have no errors. The user gets created, but not the nested model of urls.

Any idea why this is happening?

-----------how I make the json----------------------

I convert my form into a json object with

```
    serialize_objects: function(inputs){
        //this takes form inputs and creates a json string of them
    var o = {};

    $.map(inputs, function(t) {

        if (o[t.name] !== undefined) {
            if (!o[t.name].push) {
                o[t.name] = [o[t.name]];
            }
            o[t.name].push(t.value || '');
        } else {
            o[t.name] = t.value || '';
        }
    });

    return o;

    }

```

I can't use jquery serializeArray because I'm using jqMobi which doesn't implement serializeArray. But that shouldn't matter for this question.

# php - UPDATE data in the database

> ID：11449550
> 
> 赞同：2
> 
> 时间：2012-07-12T10:07:14.797
> 
> 标签：php, mysql, database, sql-update

I want to show the selected ID data in the form and EDIT it and UPDATE in the database. I selected the data from the database and put it in the input tag but it doesn't work. Please help!

```
<html>
<body>
<?
$db = mysql_connect("localhost", "root","");
mysql_select_db("db_ncs",$db);
$id = $_GET['s_id'];
if($id)
{
    $result=mysql_query("SELECT * FROM tbl_student WHERE s_id=$id");
    $row = mysql_fetch_assoc($result);
}
?>

<form method="post" action="update.php">
    Name:<input type="Text" name="name" value="<?php echo $row['s_name'];?>" /><br>
    Contact:<input type="Text" name="contact" value="<?php echo $row['s_contact'];?>" /><br>
    Address:<input type="Text" name="address" value="<?php echo $row['s_address'];?>" /><br>
    E-mail:<input type="Text" name="email" value="<?php echo $row['s_email'];?>" /><br>
    <input type="submit" name="update" value="Update">
</form>

<?
if(isset($_POST['update']))
    {
    $name = $_POST['s_name'];
    $contact = $_POST['s_contact'];
    $address = $_POST['s_address'];
    $email = $_POST['s_email'];
    $sql = "UPDATE tbl_student
            SET (s_name='$name', s_contact='$contact', s_address='$address', s_email='$email')
            WHERE s_id=$id";
    $res = mysql_query($sql);       
    if($res)
        {
            echo "Upadate Successfull!";
        }
        else
        {
            echo "Sorry!";
        }
    }

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:13:13.673

你忘了传递身份证。

`<form>`在标签之间添加这个。

```
<input type="hidden" name="s_id" value="<?php echo $id;?>" /> 
```

您还需要使您的方法保持一致。表单通过提交数据，`method="get"`但您通过`$_POST`. 您还需要通过在适当的位置添加或删除“s_”来使输入名称与您要求的名称一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:21:33.333

不是您问题的真正答案，但我必须指出您的代码中的一些遗漏：

*   如果`$_POST['update']`已设置，这并不意味着其他变量也已设置。如果用户未在字段中输入任何内容，则它们可以为空。您应该检查是否使用or设置了每个`$_POST`or`$_GET`变量。[`isset`](http://php.net/manual/en/function.isset.php)[`empty`](http://php.net/manual/en/function.empty.php)

*   你的代码太不安全了！在查询中使用它之前，您应该转义每个变量。为此使用[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php)。我还建议您[`strip_tags()`](http://www.php.net/manual/en/function.strip-tags.php)与转义一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:22:39.983

他不是必须使用`$row = mysql_fetch_assoc($result)`来获得结果吗？

```
// Perform Query
$result = mysql_query($query);

// Check result
// This shows the actual query sent to MySQL, and the error. Useful for debugging.
if (!$result) {
    $message  = 'Invalid query: ' . mysql_error() . "\n";
    $message .= 'Whole query: ' . $query;
    die($message);
}

// Use result
// Attempting to print $result won't allow access to information in the resource
// One of the mysql result functions must be used
// See also mysql_result(), mysql_fetch_array(), mysql_fetch_row(), etc.
while ($row = mysql_fetch_assoc($result)) {
    echo $row['firstname'];
    echo $row['lastname'];
    echo $row['address'];
    echo $row['age'];
} 
```

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

以上只是一个例子。

* * *

更新：

```
$result=mysql_query("SELECT * FROM tbl_student WHERE s_id=$id");

$row = mysql_fetch_assoc($result); //  I think you have to add this line here, don't you?
?>

<form method="post" action="update.php">
    <input type="hidden" name="s_id" value="<?php echo $id;?>" />
    Name:<input type="Text" name="name" value="<?php echo $row['s_name'];?>" /><br>
    Contact:<input type="Text" name="contact" value="<?php echo $row['s_contact'];?>" /><br>
    Address:<input type="Text" name="address" value="<?php echo $row['s_address'];?>" /><br>
    E-mail:<input type="Text" name="email" value="<?php echo $row['s_email'];?>" /><br>
    <input type="submit" name="update" value="Update">
</form> 
```

* * *

更新2：

当你要更新时，上面的方法`$id = $_GET['s_id'];`仍然在寻找一个名为“s_id”的参数，它将通过 HTTP GET 来，但它没有！

一个快速的解决方法可能是这样， `<form method="post" action="update.php?<?php echo $id;?>">`

并且不要忘记添加，

`$id= $_POST['s_id'];`之后`$email = $_POST['s_email'];`！

* * *

更新 3：

嗯，你仍然需要这个`<input type="hidden" name="s_id" value="<?php echo $id;?>" />`，别忘了添加，

`$id= $_POST['s_id'];`之后`$email = $_POST['s_email'];`！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T12:09:50.587

您的表单具有类似的字段`name="contact"`，但是当您尝试获取您使用的值时`$_POST['s_contact']`。这些需要匹配。

您需要表单中隐藏的 s_id 字段的原因是您将更新已编辑的同一行。您的 UPDATE 语句包含`WHERE s_id=$id`，因此您需要以这种方式获取原始 id。它是隐藏的，因为您不希望用户在编辑时能够更改 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T10:16:41.930

以您拥有`method="get"`但您`$_POST`在 PHP 代码中使用的形式。尝试如下定义您的表单：

```
<form method="post" action="update.php"> 
```

* * *

您的 SQL 查询应该是（添加引号）：

```
$sql = "UPDATE tbl_student
        SET (s_name='$name', s_contact='$contact', s_address='$address', s_email='$email')
        WHERE s_id=$id"; 
```

尝试在之后添加`mysql_query`：

```
 $result = mysql_query($sql) or die(mysql_error()); 
```

不要使用`mysql_*`函数，它们不再被维护：使用[MySQLi](http://fr.php.net/manual/en/book.mysqli.php)的[PDO](http://php.net/manual/en/book.pdo.php)。

# events - ActionScript 模拟键盘按下

> ID：11449555
> 
> 赞同：2
> 
> 时间：2012-07-12T10:07:31.847
> 
> 标签：events, actionscript, keyboard, simulate

我正在尝试模拟 TAB 键的按下。我已经搜索了很长时间，但没有找到答案。

我试过：

```
dispatchEvent(new KeyboardEvent(KeyboardEvent.KEY_DOWN, true, false, Keyboard.TAB, 0, 0, false, false, false); 
```

但什么也没发生..

关于我做错了什么的任何提示？如何模拟键盘按下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:29:19.717

> 您无法完全重新创建被按下的键，因为这是所有用户输入而不是编程。但是，程序（主要）通过事件对用户输入做出反应。通过 dispatchEvent 调用事件，您（主要）重新创建如果该事件源自用户输入会发生什么。

[来源](http://www.kirupa.com/forum/showthread.php?271862-Simulate-Key-Press)。

你想达到什么目的？将焦点转移到 UI 元素上？[然后检查这个](https://stackoverflow.com/questions/9026720/simulate-tab-key-pressed-on-flex)。

插入制表符空间？[然后检查一下](http://www.java2s.com/Code/Flash-Flex-ActionScript/String/InsertingSpecialWhitespaceCharactersTabt.htm)。

# php - DataTransformer - split DateTime into two fields

> ID：11449556
> 
> 赞同：3
> 
> 时间：2012-07-12T10:07:34.280
> 
> 标签：php, forms, symfony

I recently build a `DataTransformer` that will accept a variety of different date formats in the end (like 12/12/2012 or 12.12.2012 or 2012-12-12).

**My question is**: before I had the date and time split up into two different fields:

```
$builder->add('date_end', 'datetime', array(
        'label' => 'Date/Time',
        'date_widget' => 'single_text',
        'time_widget' => 'single_text',
        'date_format' => 'dd.MM.yyyy',
        'with_seconds' => false,
        'required' => false,
    ) ) 
```

Which worked fine. How can I accomplish this with the new `DataTransformer`?

### Within my entity-type:

```
public function buildForm(FormBuilder $builder, array $options) {

    builder->add('date_end', 'dateTime', array(
        'label' => 'Date/Time',
        'required' => false,
    ) )
} 
```

### The corresponding DateTimeType I created:

```
class DateTimeType extends AbstractType {
    private $om;

    public function __construct(ObjectManager $om) {
        $this->om = $om;
    }

    public function buildForm(FormBuilder $builder, array $options) {
        $transformer = new DateTimeTransformer($this->om);
        $builder->appendClientTransformer($transformer);
    }

    public function getDefaultOptions(array $options) {
        return array(
            'invalid_message' => 'TODO INVALID',
        );
    }

    public function getParent(array $options) {
        return 'text';
    }

    public function getName(){
        return 'dateTime';
    }
} 
```

### My transformer so far:

```
/**
 * @param  \DateTime|null $dateTime
 * @return string|null
 */
public function transform($dateTime) {
    if (null === $dateTime) {
        return null;
    }

    return $dateTime->format('Y-m-d H:i');
}

/**
 * @param  string $value
 * @return string|null
 */
public function reverseTransform($value)
{
    if ( (null === $value) || empty($value) ) {
        return null;
    }
    return new \DateTime( $value );

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:42:32.707

我假设您使用的是 Symfony 2.0。我读过表单组件在 2.1 中有所改变。

我有一个类似的问题 - 我想要一个日期时间字段，它使用单独的小部件进行日期和时间（小时）输入。

首先，您必须为此字段创建一个单独的表单类型（实际上它本身就是一个表单）。

我的代码看起来与此类似（针对此示例进行了更改）：

```
class MyDateTimeType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
        ->add('date', 'date', array(
            'label'  => 'label.form.date',
            'input'  => 'datetime',
            'widget' => 'single_text',
            'format' => 'yyyy-MM-dd',
            'error_bubbling' => true
        ))
        ->add('time', 'time', array(
            'label'  => 'label.form.time',
            'input'  => 'datetime',
            'widget' => 'choice',
            'error_bubbling' => true
        ));

        $builder->appendClientTransformer(new DateTimeToDateTimeArrayTransformer());
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'label' => 'label.form.date',
            'error_bubbling' => false
        );
    }

    public function getParent(array $options)
    {
        return 'form';
    }

    public function getName()
    {
        return 'my_datetime';
    }
} 
```

如您所见，它是一个表单（不要让您感到困惑），但我们会将其用作单个逻辑字段。这就是数据转换器的用武之地。它必须将单个`DateTime`实例拆分为日期和时间，以便在显示表单时获取两个子字段的数据，反之亦然。

error_bubbling 设置确保子字段生成的错误附加到我们的新子字段并且不会传播到顶级表单，但您可能有不同的目标。

我的数据转换器如下所示：

```
class DateTimeToDateTimeArrayTransformer implements DataTransformerInterface
{
    public function transform($datetime)
    {
        if(null !== $datetime)
        {
            $date = clone $datetime;
            $date->setTime(12, 0, 0);

            $time = clone $datetime;
            $time->setDate(1970, 1, 1);
        }
        else
        {
            $date = null;
            $time = null;
        }

        $result = array(
            'date' => $date,
            'time' => $time
        );

        return $result;
    }

    public function reverseTransform($array)
    {
        $date = $array['date'];
        $time = $array['time'];

        if(null == $date || null == $time)
            return null;

        $date->setTime($time->format('G'), $time->format('i'));

        return $date;
    }
} 
```

最后你可以这样使用它：

```
$builder->add('startDate', 'my_datetime', array(
       'label' => 'label.form.date'
)); 
```

您必须将其[注册为服务](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html#creating-your-field-type-as-a-service)才能通过别名使用它，否则直接实例化它（`new MyDateTimeType()`）。

这可能不是最漂亮的解决方案，但 Symfony 2.0 中的表单组件也是如此。

# c# - Monotouch 应用程序在设备中崩溃，但在模拟器中运行良好

> ID：11449560
> 
> 赞同：0
> 
> 时间：2012-07-12T10:07:45.013
> 
> 标签：c#, iphone, xamarin.ios

我在 monotouch 中绑定了第三方（red park sdk）。我通过使用monotouch绑定项目为red park dll创建了包装器，并在简单的应用程序中实现了dll。在分配委托时，应用程序崩溃。这是我分配代表的代码

```
rsc=new RscMgr();
            RscMgrDelegate del=new MyRedParkDelegate();

            System.Diagnostics.Debug.WriteLine("this"+del);
            rsc.SetDelegate(del); 
```

我遇到的崩溃是

```
Incident Identifier: D4781D02-9D0A-427B-BD33-D867720E9CB6
CrashReporter Key:   ecaef65d635cbb77be4760eebfa4b05b6be49112
Hardware Model:      iPhone3,1
Process:         TestRedParkSDK [498]
Path:            /var/mobile/Applications/5574681C-8028-474D-B0AA-3C71B3C7EA39/TestRedParkSDK.app/TestRedParkSDK
Identifier:      TestRedParkSDK
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-12 15:09:48.635 +0530
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_PROTECTION_FAILURE at 0x2fd00ff8
Crashed Thread:  0

    Thread 0 name:  Dispatch queue: com.apple.main-thread
    Thread 0 Crashed:

0   CoreFoundation                  0x37391ca0 0x3737b000 + 93344
1   CoreFoundation                  0x373f99c8 0x3737b000 + 518600
2   CoreFoundation                  0x3737c848 0x3737b000 + 6216
3   CoreFoundation                  0x3737c13e 0x3737b000 + 4414
4   CoreFoundation                  0x37391792 0x3737b000 + 92050

362 TestRedParkSDK                  0x00020278 0x1000 + 127608

371 TestRedParkSDK                  0x00263da8 0x1000 + 2502056
372 TestRedParkSDK                  0x00020278 0x1000 + 127608
373 TestRedParkSDK                  0x000fd04c 0x1000 + 1032268
...

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x315db3a8 0x315da000 + 5032
1   libdispatch.dylib               0x30560ea4 0x30554000 + 52900
2   libdispatch.dylib               0x30560bc2 0x30554000 + 52162

Thread 2:
0   libsystem_kernel.dylib          0x315ebcd4 0x315da000 + 72916
1   libsystem_c.dylib               0x33ca3f36 0x33c9b000 + 36662
2   libsystem_c.dylib               0x33ca3cc8 0x33c9b000 + 36040

Thread 3:
0   libsystem_kernel.dylib          0x315eb470 0x315da000 + 70768
1   libsystem_c.dylib               0x33ca66d0 0x33c9b000 + 46800
2   TestRedParkSDK                  0x001ad9a4 0x1000 + 1755556
3   TestRedParkSDK                  0x001aeaec 0x1000 + 1759980
4   TestRedParkSDK                  0x001ae918 0x1000 + 1759512
5   TestRedParkSDK                  0x001ad71c 0x1000 + 1754908
6   TestRedParkSDK                  0x001b07e8 0x1000 + 1767400
7   Foundation                      0x37c1aa7a 0x37c0a000 + 68218
8   Foundation                      0x37cae58a 0x37c0a000 + 673162
9   libsystem_c.dylib               0x33ca972e 0x33c9b000 + 59182
10  libsystem_c.dylib               0x33ca95e8 0x33c9b000 + 58856

Thread 4:
0   libsystem_kernel.dylib          0x315ebcd4 0x315da000 + 72916
1   libsystem_c.dylib               0x33ca3f36 0x33c9b000 + 36662
2   libsystem_c.dylib               0x33ca3cc8 0x33c9b000 + 36040

Thread 5:
0   libsystem_kernel.dylib          0x315db054 0x315da000 + 4180
1   TestRedParkSDK                  0x00250590 0x1000 + 2422160
2   TestRedParkSDK                  0x001f3a72 0x1000 + 2042482
3   TestRedParkSDK                  0x0023ae72 0x1000 + 2334322
4   TestRedParkSDK                  0x0024bf8a 0x1000 + 2404234
5   TestRedParkSDK                  0x0025dd74 0x1000 + 2477428
6   libsystem_c.dylib               0x33ca972e 0x33c9b000 + 59182
7   libsystem_c.dylib               0x33ca95e8 0x33c9b000 + 58856

Thread 6 name:  WebThread
Thread 6:
0   libsystem_kernel.dylib          0x315db004 0x315da000 + 4100
1   libsystem_kernel.dylib          0x315db1fa 0x315da000 + 4602
2   CoreFoundation                  0x374083ec 0x3737b000 + 578540
3   CoreFoundation                  0x37407124 0x3737b000 + 573732
4   CoreFoundation                  0x3738a49e 0x3737b000 + 62622
5   CoreFoundation                  0x3738a366 0x3737b000 + 62310
6   WebCore                         0x32d33c9c 0x32c8a000 + 695452
7   libsystem_c.dylib               0x33ca972e 0x33c9b000 + 59182
8   libsystem_c.dylib               0x33ca95e8 0x33c9b000 + 58856

Thread 0 crashed with ARM Thread State:
    r0: 0x00627970    r1: 0x00000004      r2: 0x00000000      r3: 0xfefefeff
    r4: 0x00627970    r5: 0x00000002      r6: 0x3fa4bc60      r7: 0x2fd01010
    r8: 0x3fa4cc58    r9: 0x00000002     r10: 0x006555a0     r11: 0x2fd014c0
    ip: 0x00627970    sp: 0x2fd01004      lr: 0x373f99cf      pc: 0x37391ca0
  cpsr: 0x40000030

Kindly help me.Thanks in advance 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:16:19.773

保存`RscMgrDelegate`在类的成员变量中。

如果垃圾收集器能够收集它（它没有保存在一个一直存在的变量中），那么当它试图调用它时，Objective-C 将会崩溃。这更有可能发生在设备上，因为垃圾收集器运行得更加积极。

# inno-setup - 如何检测安装程序是否以非常安静的模式运行？

> ID：11449561
> 
> 赞同：15
> 
> 时间：2012-07-12T10:07:49.530
> 
> 标签：inno-setup

我知道有[`WizardSilent`](http://www.jrsoftware.org/ishelp/index.php?topic=isxfunc_wizardsilent)检查设置是否在静默模式下运行的功能，但我找不到非常静默模式的等效功能（当使用[`/VERYSILENT`](http://www.jrsoftware.org/ishelp/index.php?topic=setupcmdline&anchor=VERYSILENT)命令行参数执行设置时）。

有没有办法检测设置是否在非常安静的模式下运行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T11:28:45.250

`WizardSilent``/Silent`和`/VerySilent`安装都将是正确的。这两个参数之间的区别在于是否显示进度条（`/Silent`）或不显示（`/VerySilent`）。

根据您的评论，我能建议的最好方法是检查命令行并查找`/VerySilent`并设置一个全局变量。就像是：

```
[Code]
var 
  isVerySilent: Boolean;

function InitializeSetup(): Boolean;
var
  j: Integer;
begin
  isVerySilent := False;
  for j := 1 to ParamCount do
    if CompareText(ParamStr(j), '/verysilent') = 0 then
    begin
      isVerySilent := True;
      Break;
    end; 

  if isVerySilent then
    Log ('VerySilent')
  else
    Log ('not VerySilent');
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T08:35:30.970

这个效果更好......它与命令行中的多个参数兼容

```
var
j: Cardinal;
begin

isVerySilent := false;   
begin
  for j := 0 to ParamCount do
    begin
    MsgBox('param'+ParamStr(j), mbInformation, MB_OK);
      if ParamStr(j)='/verysilent'   then
        isVerySilent := true;

    end; 
  if isVerySilent then begin
    Log ('VerySilent')
  end else
    Log ('not VerySilent');
end; 
```

# .net - Why is a field in an auto-generated class serialized into an element when defined as an attribute in the XSD?

> ID：11449564
> 
> 赞同：1
> 
> 时间：2012-07-12T10:07:52.167
> 
> 标签：.net, xml-serialization, xmlserializer, xsd.exe, auto-generate

I'm trying to expose a fairly complex object as XML through a REST API (using WCF).

However, the object is defined by an XSD file so I've generated classes using the xsd.exe tool. The problem is that it seems that when my object is serialized to XML, an attribute (defined in the xsd) is serialized into an element. And I don't get why. Currently, I'm assuming that my xsd somehow allows that, but I can't tell why. I don't do any custom serialization, I let the framework handle it.

**Can someone explain why this is happening and how do I control the behavior?**

Here the part from the xsd containing the element and attribute. **Edit:** the attribute in question is *version*

```
<xs:schema xmlns:b="http://some.namespace.com/" xmlns="http://someothernamespace.com/" elementFormDefault="qualified" targetNamespace="http://someothernamespace.com/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:include schemaLocation="JobPositionPosting.xsd" />
  <xs:element name="Envelope">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="Sender" />
        <xs:element minOccurs="0" ref="TransactInfo" />
        <xs:element maxOccurs="unbounded" ref="Packet" />
      </xs:sequence>
      <xs:attribute fixed="0.52" name="version" type="xs:string" use="required" />
    </xs:complexType>
  </xs:element> 
```

And here's the generated code.

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "<removed>")]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "http://somenamespace.com", IsNullable = false)]
public partial class Envelope
{

    /// <remarks/>
    public Sender Sender;

    /// <remarks/>
    public TransactInfo TransactInfo;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Packet")]
    public Packet[] Packet;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute("version")]
    public string version;

    public Envelope()
    {
        this.version = "0.52";
    }
} 
```

And here's the xml returned from the REST service, i.e. the serialized object.

```
<!-- (the rest o the xml is left out on purpose) -->
<Envelope>
    <senderField i:nil="true"/>
    <transactInfoField i:nil="true"/>
    <versionField>0.52</versionField>
</Envelope> 
```

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:53:22.413

`xsd.exe`生成要由 使用的类[`System.Xml.Serialization.XmlSerializer`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer)，而您的 REST 服务正在使用[`System.Runtime.Serialization.DataContractSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer).

对于`DataContractSerializer`，您应该[`svcutil.exe`](http://msdn.microsoft.com/en-us/library/aa347733.aspx)改用。

```
svcutil.exe /help
svcutil.exe schema.xsd /dconly 
```

# c# - 调用库的VS2010参考应用程序

> ID：11449565
> 
> 赞同：0
> 
> 时间：2012-07-12T10:07:53.750
> 
> 标签：c#, visual-studio-2010, dependencies

我正在编写一个引用内部库的应用程序，我需要从库中调用方法，返回到应用程序中。我不能“添加引用”，因为这将以循环依赖结束。因此，我如何从库中引用此方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:56:21.847

这是 .NET 编程中非常常见的场景。例如，按钮控件不知道当用户单击它时应该运行什么代码。

使用委托或事件。

# php - 为什么 base64_encode() 在结果中添加斜杠“/”？

> ID：11449577
> 
> 赞同：54
> 
> 时间：2012-07-12T10:08:53.150
> 
> 标签：php, encoding, base64

我正在编码我的应用程序的 URL 后缀：

```
$url = 'subjects?_d=1';
echo base64_encode($url);

// Outputs
c3ViamVjdHM/X2Q9MQ== 
```

注意“X2”之前的斜线。

为什么会这样？我以为base64只输出AZ、0-9和'='作为填充？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-07-12T10:11:36.437

不会。Base64 字母表包括 AZ、az、0-9 和`+`and `/`。

如果您不关心对其他应用程序的可移植性，您可以替换它们。

见：[http ://en.wikipedia.org/wiki/Base64#Variants_summary_table](http://en.wikipedia.org/wiki/Base64#Variants_summary_table)

您可以使用类似的东西来使用您自己的符号（当然，只要它不在 base64 基本字母表中，就可以替换`-`和任何您想要的东西！）。`_`

以下示例将普通的 base64 转换[为 RFC 4648 中指定的](https://www.rfc-editor.org/rfc/rfc4648#page-7)base64url ：

```
function base64url_encode($s) {
    return str_replace(array('+', '/'), array('-', '_'), base64_encode($s));
}

function base64url_decode($s) {
    return base64_decode(str_replace(array('-', '_'), array('+', '/'), $s));
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-04-29T15:00:14.887

除了上面的所有答案之外，指出这`/`是预期`base64`字母表的一部分，应该注意的是`/`，您在编码字符串中看到 a 的特殊原因是因为在`base64`编码`ASCII`文本时，生成 a 的唯一方法`/`是在可被三整除的位置上的问号。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-12T10:11:44.170

对不起，你想错了。A-Za-z0-9 只能得到 62 个字符。Base64 使用两个额外的字符，在 PHP 的情况下`/`和`+`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-12T10:12:13.007

没有什么特别的。

基数为 64 的“字母”或“数字”是 AZ、az、0-9 加上两个额外的字符 +（加号）和 /（斜杠）。

如果需要，您可以稍后使用 %2f 对 / 进行编码。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-28T13:08:11.353

没有直接关系，上面有足够多的人很好地回答和解释了解决方案。

但是，有点超出了事情的范围。如果您想要可读的基本文本，请尝试查看**Base58**。如果您只需要字母数字字符，则值得考虑。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-12T10:11:47.643

AZ 是 26 个字符。0-9 是 10 个字符。= 是一个字符。总共有 37 个字符，比 64 个要少一些。

`/`是 64 个字符之一。[您可以在 wikipedia 页面](http://en.wikipedia.org/wiki/Base64)上查看完整列表。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-12T10:12:38.463

对于 base64，有效的字符集是：ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/

= 用作最后一个字节的填充符

M。

# range - Kinect SimpleOpenNI 和处理范围

> ID：11449583
> 
> 赞同：0
> 
> 时间：2012-07-12T10:09:24.263
> 
> 标签：range, kinect, processing, openni

我需要找到一种方法让 kinect 只识别特定范围内的对象。问题是在我们的设置中，场景周围会有可能干扰跟踪的观众。因此，我需要将 kinect 设置为几米的范围，这样它就不会受到超出该范围的物体的干扰。我们使用 SimpleOpenNI 库进行处理。

有没有可能以任何方式实现这样的目标？

非常感谢您提前。

马泰奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:13:38.897

您可以获得用户的质心 (CoM)，它可以在没有骨架检测的情况下为用户检索 ax,y,z 位置：

![OpenNI 用户 CoM](../Images/a85bba1ea217a6a2664d6e4b6b2b9d3d.png)

根据 z 位置，您应该能够为您的范围/阈值使用基本的 if 语句。

```
import SimpleOpenNI.*;

SimpleOpenNI context;//OpenNI context
PVector pos = new PVector();//this will store the position of the user
ArrayList<Integer> users = new ArrayList<Integer>();//this will keep track of the most recent user added
float minZ = 1000;
float maxZ = 1700;

void setup(){
  size(640,480);
  context = new SimpleOpenNI(this);//initialize
  context.enableScene();//enable features we want to use
  context.enableUser(SimpleOpenNI.SKEL_PROFILE_NONE);//enable user events, but no skeleton tracking, needed for the CoM functionality
}
void draw(){
  context.update();//update openni
  image(context.sceneImage(),0,0);
  if(users.size() > 0){//if we have at least a user
    for(int user : users){//loop through each one and process
      context.getCoM(user,pos);//store that user's position
      println("user " + user + " is at: " + pos);//print it in the console
      if(pos.z > minZ && pos.z < maxZ){//if the user is within a certain range
        //do something cool 
      }
    }
  }
}
//OpenNI basic user events
void onNewUser(int userId){
  println("detected" + userId);
  users.add(userId);
}
void onLostUser(int userId){
  println("lost: " + userId);
  users.remove(userId);
} 
```

您可以在我发布的这些[研讨会笔记](http://ruairiglynn.co.uk/teaching/index.php?title=Kinect_Workshop_2012_Tutorial3)中找到更多解释和有用的提示。

# r - ctree（包方）的终端节点如何添加标签？

> ID：11449584
> 
> 赞同：3
> 
> 时间：2012-04-23T14:56:32.167
> 
> 标签：r, decision-tree, party

我使用 ctree 创建了一个二叉分类树。我希望每个终端节点都包含与该节点关联的行名。我怎样才能做到这一点？

例如，对于下面的数据集，我希望最左边的节点分别列出所有年龄 <23 岁的人（Abner 到 Abudemio）和最右边的 Abundiantus 到 Acelin 的姓名。

```
 names       age height young   
1     Abner       18   76.1   yes
2     Abraham     19   77.0   yes
3     Abram       20   78.1   yes
4     Abrasha     21   78.2   yes
5     Absalom     22   78.8   yes
6     Abudemio    23   79.7   yes
7     Abundiantus 24   79.9    no
8     Acacio      25   81.1    no
9     Acario      26   81.2    no
10    Accursius   27   81.8    no
11    Ace         28   82.8    no
12    Acelin      29   83.5    no 
```

.![在此处输入图像描述](../Images/af9751fb1d729b78d34e15d1af5f4f80.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:11:05.107

这是一个 hacky 解决方案。`party`它只需要对包中绘图函数的原始源代码进行很少的修改。通过阅读源代码，我注意到有一个`terminal_panel`which 正在调用`node_barplot`，以防结果是一个因素。（如果你安装了源码包，一切都在`R/plot.R`函数中。）我们可以修改后面的内容，在默认的条形图中显示自定义标签。

只需在 R 提示符下发出以下命令：

```
fixInNamespace("node_barplot", pos="package:party") 
```

然后，开始添加我们想要的内容：

1.  添加`labels = NULL, gp = NULL`到该函数的现有参数列表中。
2.  在函数体的末尾附近，在 之后`grid.rect(gp = gpar(fill = "transparent"))`添加以下行：

    ```
    if (!is.null(labels)) {
      labs <- as.character(labels[ctreeobj@where==node$nodeID])
      len <- length(labs)
      x <- unit(rep(0.5, len), "npc")
      y <- unit(0.5:len/len, "npc")
      for (i in 1:len) 
        grid.text(labs[i], x=x[i], y=y[i], just="center", gp=gp)
    } 
    ```

    `node$nodeID`这里的关键思想是选择与所选节点对应的`where`标签`ctree`（测试`if`只是为了确保我们可以使用最初编写的功能。该`gp`参数可用于更改字体大小或颜色。

现在对该函数的典型调用是：

```
plot(cfit, tp_pars=list(labels=dfrm$names)) 
```

其中`dfrm$names`是来自名为 的数据框中的一列标签`dfrm`。这是您的数据的插图：

```
cfit <- ctree(young ~ age, data=a, 
              controls=ctree_control(minsplit=2, minbucket=2))
plot(cfit, tp_args=list(labels=a$names, gp=gpar(fontsize=8, col="darkgrey"))) 
```

![在此处输入图像描述](../Images/f372ce3aa49d39e5d9b2b665198b819a.png)

[（我还使用`iris`数据集的在线示例对此进行了测试。）]

# objective-c - NSDictionary 文字，所有值方法的异常

> ID：11449585
> 
> 赞同：1
> 
> 时间：2012-07-12T10:09:26.637
> 
> 标签：objective-c, ios, literals

给定以下界面：

```
@interface DetailViewController ()
@property (nonatomic, strong) NSDictionary *contentTypeToString;
@property (nonatomic, strong) NSDictionary *contentTypeToContent;
@property (nonatomic, strong) NSArray *contentDestcriptors;
@property (nonatomic, strong) NSArray *content;
@end 
```

以及以下方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //dumb data

    self.contentTypeToString  =@{
    [NSNumber numberWithInt:ContextTypePlace]   : @"Place",
    [NSNumber numberWithInt:ContextTypeDate]    : @"Date",
    [NSNumber numberWithInt:ContextTypeTime]    : @"Time",
    [NSNumber numberWithInt:ContextTypeWeather] : @"Weather",
    [NSNumber numberWithInt:ContextTypeSeason]  : @"Season",
    [NSNumber numberWithInt:ContextTypeTimeOfDay] : @"Time of Day",
    [NSNumber numberWithInt:ContextTypePlace]   : @"Place",
    };

    self.contentTypeToContent = @{
    [NSNumber numberWithInt:ContextTypePlace]   : @"Dublin",
    [NSNumber numberWithInt:ContextTypeDate]    : @"21.12.2012",
    [NSNumber numberWithInt:ContextTypeTime]    : @"21:32",
    [NSNumber numberWithInt:ContextTypeWeather] : @"Cloudy",
    [NSNumber numberWithInt:ContextTypeSeason]  : @"Winter",
    [NSNumber numberWithInt:ContextTypeTimeOfDay] : @"Evening",
    [NSNumber numberWithInt:ContextTypePerson]  : @"John, Ann",
    };

    self.contentDestcriptors = [self.contentTypeToString allValues];
    self.content = [self.contentTypeToContent allValues];
} 
```

我得到：

由于未捕获的异常而终止应用程序`NSRangeException`，原因：`*** -[__NSArrayI objectAtIndex:]: index 6 beyond bounds [0 .. 5]`

Tf 我注释掉我使用 allValues 方法的地方，代码工作正常。文字中的错误，还是我的错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:16:43.253

You specified `ContextTypePlace` twice

That would create a dictionary with 6 items, not 7.

# android - java.lang.NullPointerException: println 需要一条消息

> ID：11449589
> 
> 赞同：24
> 
> 时间：2012-07-12T10:09:42.683
> 
> 标签：android, nullpointerexception, hashmap, println

我得到错误： java.lang.NullPointerException: println 调用此方法时需要一条消息：

```
lst_info = new HashMap<String, String>();
SystemDatabaseHandler db = new SystemDatabaseHandler(getApplicationContext());
lst_info = db.getLstInfo(sql_id); 
```

系统数据库处理程序：

```
public HashMap<String , String> getLstInfo(int id){
    HashMap<String , String> lst_temp;
    lst_temp = new HashMap<String , String>();

    String selectQuery = "SELECT * FROM dkr_lst_lst WHERE lst_id = " + id;
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    if (cursor.moveToFirst()) {
        do {
            Log.d("sql_id", cursor.getString(0));
            lst_temp.put("sql_id", cursor.getString(0));
        }while (cursor.moveToNext());
    } 
    cursor.close();
    db.close();
    return lst_temp;
} 
```

Log.d("sql_id", cursor.getString(0)); 返回：

> 07-12 11:56:05.603: D/sql_id(13783): 1

原木猫：

```
07-12 11:56:05.613: D/Database(13783): dbclose(): path = /data/data/de.bodprod.dkr/databases/dkr, handle = 0x4301a8
07-12 11:56:05.613: D/AndroidRuntime(13783): Shutting down VM
07-12 11:56:05.613: W/dalvikvm(13783): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
07-12 11:56:05.623: E/AndroidRuntime(13783): FATAL EXCEPTION: main
07-12 11:56:05.623: E/AndroidRuntime(13783): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.bodprod.dkr/de.bodprod.dkr.BosLstDetailMap}: java.lang.NullPointerException: println needs a message
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.os.Looper.loop(Looper.java:150)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.app.ActivityThread.main(ActivityThread.java:4385)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at java.lang.reflect.Method.invokeNative(Native Method)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at java.lang.reflect.Method.invoke(Method.java:507)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at dalvik.system.NativeStart.main(Native Method)
07-12 11:56:05.623: E/AndroidRuntime(13783): Caused by: java.lang.NullPointerException: println needs a message
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.util.Log.println_native(Native Method)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.util.Log.d(Log.java:137)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at de.bodprod.dkr.BosLstDetailMap.onCreate(BosLstDetailMap.java:43)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
07-12 11:56:05.623: E/AndroidRuntime(13783):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
07-12 11:56:05.623: E/AndroidRuntime(13783):    ... 11 more
07-12 11:56:07.495: D/Process(13783): killProcess, pid=13783 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-12T10:14:17.320

也许当你打电话

```
Log.d("sql_id", cursor.getString(0)); 
```

`cursor.getString(0)`返回null，然后崩溃。

尝试 ：

```
if(cursor.getString(0) != null) {
    Log.d("sql_id", cursor.getString(0)); 
} 
```

否则，请向我们展示：`de.bodprod.dkr.BosLstDetailMap.onCreate(BosLstDetailMap.java:43)`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-12T10:12:41.767

尝试：

```
Log.d("sql_id"," " + cursor.getString(0)); 
```

代替

```
Log.d("sql_id", cursor.getString(0)); 
```

因为也许你在 Log.d 中传递第二个参数为空或空

# algorithm - 找一个不。在包含 O(n) 中所有不同元素的 nxn 数组中

> ID：11449591
> 
> 赞同：0
> 
> 时间：2012-07-12T10:09:48.230
> 
> 标签：algorithm

给定一个 nxn 元素数组，使得每行按升序排列，每列按升序排列，设计一个 O(n) 算法来确定给定元素 x 是否在数组中。您可以假设 nxn 数组中的所有元素都是不同的。

请告诉我是否有人知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:25:43.777

从第一行最后一列开始，即 i=0, j = n-1

```
while true {
if (j< 0 || i > (n-1) )
 break; // element not found
if (array[i][j] == x)
 return i,j
else if (x < array[i][j])
 j = j -1; // and repeat
else 
 i = i+1; // and repeat
} 
```

这是 O(n)。解释：

从第一行和最后一列开始。i=0;j=n-1 每次 x 小于 currElement 递减 j 否则递增 i。

# java - 比较存储在字符串中的时间

> ID：11449593
> 
> 赞同：1
> 
> 时间：2012-07-12T10:09:54.300
> 
> 标签：java, swing, datetime

我在 24 小时内有一个字符串格式的时间，例如“02:00”，我想在另外两个时间之间检查它，例如“07:00”和“15:oo”。我该如何检查这个，因为时间是字符串格式吗？

我使用以下代码：

```
SimpleDateFormat simpDate = new SimpleDateFormat("kk:mm");
String s2=simpDate.format(date);
JLabel1.setText(s2); 
```

现在我想检查字符串 s2 是否介于“7:00”和“15:00”之间，然后将值设置为另一个名为 JLabel2 的 JLabel：“First Shift”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:22:28.643

首先，您需要将字符串解析为`Date`对象实例。您可以使用`DateFormat`派生类来执行此操作（即`SimpleDateFormat`）。

然后，您可以使用两个日期的毫秒表示（通过 获得`getTime()`）进行比较，或者仅使用 或 比较`after(Date date)`它们`before(Date date)`。

如果您需要更复杂的操作，您应该使用`Calendar`该类。

此外，如果您的项目在日期方面很有效，我建议您使用[Joda Time](http://joda-time.sourceforge.net/)

**编辑（回应评论）：**

使用`Calendar`类就是这样。首先，您需要一个 7:00 日期的日历实例：

```
Calendar cal1 = Calendar.getInstance();
cal1.set(Calendar.DATE, 12);       // The day of month you are working with
cal1.set(Calendar.MONTH, 7);       // The month of the year
cal1.set(Calendar.YEAR, 2012);     // The year
cal1.set(Calendar.HOUR_OF_DAY, 7); // Hour in 24-hours fashion
cal1.set(Calendar.MINUTE, 0);      // self-explanatory
cal1.set(Calendar.SECOND, 0);

Date shiftStart = cal1.getTime(); 
```

然后在班次结束时做同样的事情：

```
Calendar cal2 = Calendar.getInstance();
cal2.set( ... );       // Repeat almost every field from previous snippet
cal2.set(Calendar.HOUR_OF_DAY, 15); // Hour in 24-hours fashion

Date shiftEnd = cal2.getTime(); 
```

然后，您只需要检查要比较的日期是否在这些日期之间：

```
Date myDate = ...   // the date you want to compare
boolean checkShift = myDate.after(shiftStart) && myDate.before(shiftEnd); 
```

无论如何，正如我已经说过的，如果您在项目中经常使用日期，我会使用 Joda Time，因为它可以简化很多日期处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:12:04.013

您使用 a`SimpleDateFormat`将 转换`String`为`Date`。然后你可以比较日期。

在此处阅读有关[SimpleDateFormat 的](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)更多信息。

# imagemagick - 如何在 Ubuntu 中启用对 ImageMagick 的 HDRI 支持？

> ID：11449595
> 
> 赞同：0
> 
> 时间：2012-07-12T10:09:55.190
> 
> 标签：imagemagick

我已经`apt-get`在 Ubuntu 12.04 中安装了 ImageMagick。现在我需要为我的 ImageMagick 脚本启用 HDRI 支持。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:45:27.487

你应该跑

```
convert -list configure | grep FEATURES 
```

如果结果没有列出 HDRI，那么您需要获取不同的 ImageMagick 版本。您当前的将不支持它（它不能通过简单更改本地配置设置来“添加”）。

要么从源代码自己构建它，要么以最友好的方式询问您的 Ubuntu 软件包维护者，以提供替代构建。

它可能仍然在 Ubuntu 中被禁用，因为 ImageMagick 开发人员自己称它为“实验性功能”。

# javascript - 删除重复的 div 样式标签

> ID：11449597
> 
> 赞同：1
> 
> 时间：2012-07-12T10:09:59.013
> 
> 标签：javascript, regex

我想清理我的代码。我想删除重复的 -tags

一个例子：

```
var testString = '<div style="text-align: right;">text1</div><div style="text-align: right;">text2</div>', str;

str = testString.replace(/<div style="(.*?)">(.*?)<\/div><div style="$1">/g, '<div style="$1">$2<br>'); 
```

在我的脑海中 str 现在应该包含`'<div style="text-align: right;">text1<br>text2</div>'`.

我知道我错了，但在哪里？

希望大家理解我：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:24:51.043

您必须对反向引用变量使用不同的样式，`\1`而不是`$1`在正则表达式中。试试这个：

```
str = testString.replace(/<div style="(.*?)">(.*?)<\/div><div style="\1">/g, '<div style="$1">$2<br>'); 
```

# php - join() 函数 php 到数组

> ID：11449599
> 
> 赞同：0
> 
> 时间：2012-07-12T10:10:15.457
> 
> 标签：php, xml, arrays, join

我需要将 xml 放入数组中，然后使用 join 函数来显示 xml 文件我已经提取了 xml 但不知道如何使用 join 函数来处理这段代码。请帮我弄清楚这一点。这是xml代码：

```
<ValCurs Date="06.07.2012" name="Ratele oficiale de schimb">
<Valute ID="47">
<NumCode>978</NumCode>
<CharCode>EUR</CharCode>
<Nominal>1</Nominal>
<Name>Euro</Name>
<Value>15.3051</Value>
</Valute>
<Valute ID="44">
<NumCode>840</NumCode>
<CharCode>USD</CharCode>
<Nominal>1</Nominal>
<Name>Dolar S.U.A.</Name>
<Value>12.2343</Value> 
```

提取xml的功能：

```
function curs() {
  $date = date("d.m.Y");  
  $link = 'http://bnm.md/md/official_exchange_rates?get_xml=1&date='.$date; 
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $link);
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  $xml_array = curl_exec($ch);
  curl_close($ch);
  $xml_array = file_get_contents($link);

    $values = array();

 $curs = new SimpleXMLElement($xml_array);

 foreach($curs as $key => $value) {

    if (($value->CharCode) == 'USD') {

    $values .= $value->Name." - ".$value->Value.", ";
    }

    if (($value->CharCode) == 'EUR') {

        $values .= $value->Name." - ".$value->Value.", ";
    }
  }

  $value = str_replace(',', '.', $values);

   return $value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:23:30.637

目前还不太清楚你在问什么，但如果我正确收集它，你想做这样的事情。请注意，您正在为变量 $values 混合数组和字符串逻辑。

```
$values = array();
$curs = new SimpleXMLElement($xml_array);

foreach($curs as $key => $value) {

    if (($value->CharCode) == 'USD') {

        $values[] = $value->Name." - ".$value->Value;
    }

    if (($value->CharCode) == 'EUR') {

        $values[] = $value->Name." - ".$value->Value;
    }
}

$value = implode('.', $values);

return $value; 
```

注意：我不确定将这些字符串与“。”合并的有用性。我希望你会追求像 \n 这样的东西。

# windows-phone-7 - Windows Phone 中本地化应用程序的 ArgumentException？

> ID：11449600
> 
> 赞同：1
> 
> 时间：2012-07-12T10:10:16.590
> 
> 标签：windows-phone-7, resx, app.xaml

我将我的应用程序翻译成 12 种语言。但是现在我注意到在设置为简体中文 (zh-CN) 的模拟器中进行测试时，它显示了`ArgumentException - Value does not fall within the expected range`. 此错误发生在`InitializeComponent();`App.xaml.cs。仅在调试模式下，仅中文会出现此错误，其他语言不会出现此错误。该应用程序不会终止，但如果我继续，它将按预期工作。

这对任何人来说似乎都很熟悉吗？这个错误可以忽略吗？我已经包含了屏幕截图。

阿尔法

![截屏](../Images/ca216815938c9c16d241bd2462cd190d.png)

# android - 自定义 CAB 背景 android

> ID：11449601
> 
> 赞同：1
> 
> 时间：2012-07-12T10:10:18.483
> 
> 标签：android, background, android-actionbar

可以更改android中CAB（上下文操作栏）的背景吗？我在我的应用程序中使用它，当应用程序安装在平板电脑（3.0 - 3.2 API）上时，CAB 具有黄色和外观，当应用程序安装在具有 4.0+ API 的手机上时，它具有某种蓝色背景和另一种外观。我可以为此做某事并且到处都有相同的外观吗？

注意：我的应用程序打算在 3.0+ api 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:58:31.647

您可以通过定义自己的主题来做到这一点。使用标准主题之一（在您的情况下，您可以使用 Theme.Holo，因为您的目标是 Honeycomb+）作为起点并自定义（即覆盖）您想要更改的那些部分。在您的情况下，您将只自定义 CAB 的样式。

Android 开发网站的[样式和主题](http://developer.android.com/guide/topics/ui/themes.html)部分简要介绍了这一点。寻找如何做到这一点的真实世界示例的另外两个地方是：

1.  [动作条夏洛克](http://actionbarsherlock.com/)。查看实际的库源（而不是示例）。
2.  [谷歌 IO 2012 应用程序](http://code.google.com/p/iosched/source/checkout)。

# jquery - 如何区分“使用鼠标右键单击”和“在物理键盘上按下上下文菜单键”

> ID：11449606
> 
> 赞同：2
> 
> 时间：2012-07-12T10:10:39.863
> 
> 标签：jquery, contextmenu, keypress, right-click

如何区分使用鼠标右键单击和在物理键盘上按下上下文菜单键？

使用此代码，我尝试在控制台中打印事件

```
$('#'+inputId).bind('contextmenu', function(e) {
    console.log(e);
}); 
```

我为上面的代码获取了一些输出-

**对于使用鼠标右键单击它是 -**

1.  按钮：2
2.  原始事件：鼠标事件
3.  类型：“上下文菜单”
4.  其中：3

**对于键盘上的上下文菜单键，它是-**

1.  按钮：2
2.  原始事件：鼠标事件
3.  类型：“上下文菜单”
4.  其中：3

我只想在物理键盘上按下“上下文菜单键”时执行一些操作。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:23:46.623

您好，这将帮助您捕捉差异：**工作演示** [http://jsfiddle.net/pPnME/1/](http://jsfiddle.net/pPnME/1/)

我已经在 Alienware - Chrome 上对此进行了测试，当您右键单击时，您将看到右键单击警报，否则在键盘上您将看到键盘警报。

请注意：您可以根据`which`属性识别点击：http: [//api.jquery.com/event.which/](http://api.jquery.com/event.which/)

> 对于键或鼠标事件，此属性指示按下的特定键或按钮。

希望这符合原因。`:)`

另请注意，可用于获取快捷方式的插件很少，但我建议坚持基本并使用我提供的演示，如果它只是分别捕获两个事件，其余演示就是你玩的全部:)

**代码**

```
/*
  1 = Left   Mousebutton
  2 = Centre Mousebutton
  3 = Right  Mousebutton
*/
$('input').mousedown(function(e) {
    if (e.which === 3) {
        alert('rightclick'); /* Right Mousebutton was clicked! */
    }
});
$('input').bind('contextmenu', function(e) {
    alert('keyboard yeah');
    //console.log(e);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:16:13.347

您还可以检查是否按下键`keyPressed`是事件。

如果不是，是鼠标事件，如果是，是上下文菜单键

编辑： contextMenu 的键码是 93

# java - 如何不使用 Hibernate Envers 审计连接表和相关实体？

> ID：11449611
> 
> 赞同：28
> 
> 时间：2012-07-12T10:10:48.967
> 
> 标签：java, hibernate, hibernate-envers

我使用 Hibernate Envers 来审计我的实体。

我有一个经过审计的实体 ，`Foo`它具有`List<Bar>`as 属性。但是，我不想审计`Bar`实体。因此，我写道：

```
@Entity
@Audited
public class Foo {

    @JoinTable(name = "T_FOO_BAR", joinColumns = @JoinColumn(name = "FOO_ID"), inverseJoinColumns = @JoinColumn(name = "BAR_ID"))
    @ManyToMany(cascade = PERSIST)
    @Audited(targetAuditMode = RelationTargetAuditMode.NOT_AUDITED)
    public List<Bar> getBars() {
        return bars;
    }

} 
```

现在，我想检索以下版本`Foo`：

```
 AuditReader reader = AuditReaderFactory.get(getEntityManager());
    Foo revision = (Foo) reader.createQuery().forEntitiesAtRevision(Foo.class, 42).getSingleResult(); 
```

不幸的是，当我想检索所有数据时（即当它延迟加载时`bars`），我得到错误`ORA-00942: table or view does not exist`，因为它试图查询：

```
select ... from T_FOO_BAR_AUD x, T_BAR y where ... 
```

我虽然使用`@Audited(targetAuditMode = RelationTargetAuditMode.NOT_AUDITED)`，Hibernate Envers 会保持与*当前*实体的`Bar`项目的链接。

 *那么我怎样才能解决我的问题，而不必明确审计表`T_BAR`和`T_FOO_BAR`（连接表）？换句话说，当我`bars`从我的修订实体中检索列表时，我会`bars`从我当前的实体中获取列表（因为和之间的链接`Foo`没有`Bar`被审计）。

谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-12T13:38:25.060

看起来`@Audited(targetAuditMode = RelationTargetAuditMode.NOT_AUDITED)`您应该`@NotAudited`在您的情况下使用时使用。

`RelationTargetAuditMode.NOT_AUDITED`根本不会审计**目标实体**。它仍然会尝试审计 的`List<Bar>`属性`Foo`，从而审计连接表。

从文档：

> 如果您要审核未审核目标实体的关系（例如类似字典的实体，它们不会更改且无需审核），只需使用`@Audited(targetAuditMode = RelationTargetAuditMode.NOT_AUDITED)`. 然后，在读取实体的历史版本时，关系将始终指向“当前”相关实体。*

# blackberry - 如何在黑莓高级用户界面示例中使用位图按钮字段禁用按钮

> ID：11449613
> 
> 赞同：1
> 
> 时间：2012-07-12T10:10:54.423
> 
> 标签：blackberry, java-me

我在高级 ui 示例中使用位图按钮字段。默认情况下，没有任何方法可用于禁用 5.0 jre 中的按钮，因此我添加了以下代码以禁用然后禁用按钮的功能正在工作，但 setchangelistener 不起作用这是我的问题.. 这是我添加的代码禁用按钮..请检查。我需要更改调用操作方法中的任何内容吗？

```
 public boolean isDisable() {
   return isDisable;
 }

 public void setDisable(boolean isDisable) {
   this.isDisable = isDisable;
 invalidate();
 }

 public boolean isFocusable() {
   return isFocusable && !isDisable;
 }

 public void setFocusable(boolean isFocusable) {
 this.isFocusable = isFocusable;
 }

 protected boolean invokeAction(int action) {
   if (!isDisable){
    fieldChangeNotify(0);
   }

       return true;
 }

 public boolean setEnabled() {
   return false;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:16:12.943

Here is a [discussion on the BlackBerry forums about this](http://supportforums.blackberry.com/t5/Java-Development/how-to-enable-disable-some-fields-based-on-checkbox-value/td-p/552247).

What I've sometimes done is actually make use of the `isEditable()` property on `Field` objects, since editability and being enabled are somewhat similar concepts. If you really want to keep the separate `isDisabled()` code, that's fine. Just substitute that below where I use `isEditable()` (remembering to reverse the boolean ... that's one reason to always program in the affirmative ... make your method `isEnabled()` instead of `isDisabled()`).

So, instead of any of the code you posted above, I would just add this code to either `BitmapButtonField`, or `BaseButtonField`:

```
public boolean isFocusable() {
   return isEditable() && super.isFocusable();
} 
```

and this in `BitmapButtonField`:

```
protected void paint( Graphics g ) {
   int oldAlpha = g.getGlobalAlpha();
   int index = g.isDrawingStyleSet( Graphics.DRAWSTYLE_FOCUS ) ? FOCUS : NORMAL;
   if (!isEditable()) {
      g.setGlobalAlpha(100);  // alpha is 0 to 255, so this is 100/255
   }
   g.drawBitmap( 0, 0, _bitmaps[index].getWidth(), _bitmaps[index].getHeight(), _bitmaps[index], 0, 0 );
   g.setGlobalAlpha(oldAlpha);
} 
```

And then, I can setup a change listener, or disable the button, like this in my manager class:

```
 BitmapButtonField btn = 
     new BitmapButtonField(Bitmap.getBitmapResource("button.png"),
                           Bitmap.getBitmapResource("button-lit.png"));

  btn.setChangeListener(new FieldChangeListener() {
     public void fieldChanged(Field field, int context) {
        Dialog.alert("Button clicked!");
     }         
  });
  btn.setEditable(false);   // this disables the button
  add(btn); 
```

But, understand, that if you **disable** a button, that means your change listener won't get called. That's kind of how it's supposed to work. The change listener is only called if the button's enabled and therefore clickable.

Also, note that in order to make the button look different when disabled (not *editable*), I override `paint()` to set a different alpha value when the button is disabled. You didn't mention that, so if you don't like it, you can certainly take it out.

# c++ - 如何用 C++ 的线条拟合 2D 散点图数据

> ID：11449617
> 
> 赞同：8
> 
> 时间：2012-07-12T10:11:08.170
> 
> 标签：c++, algorithm, matlab, curve-fitting, linear-regression

我曾经使用 MATLAB，对于我提出的问题，我可以使用 p = polyfit(x,y,1) 来估计板中散点数据的最佳拟合线。我想知道我可以依靠哪些资源来使用 C++ 实现线拟合算法。我知道这个主题有很多算法，对我来说，我希望算法应该很快，同时它可以在 MATLAB 中获得与 polyfit 函数相当的精度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-25T09:03:56.520

此页面描述的算法比维基百科更容易，无需额外的步骤来计算平均值等：[http](https://web.archive.org/web/20150715022401/http://faculty.cs.niu.edu/~hutchins/csci230/best-fit.htm) ://faculty.cs.niu.edu/~hutchins/csci230/best-fit.htm 。几乎从那里引用，在 C++ 中它是：

```
#include <vector>
#include <cmath>

struct Point {
  double _x, _y;
};
struct Line {
  double _slope, _yInt;
  double getYforX(double x) {
    return _slope*x + _yInt;
  }
  // Construct line from points
  bool fitPoints(const std::vector<Point> &pts) {
    int nPoints = pts.size();
    if( nPoints < 2 ) {
      // Fail: infinitely many lines passing through this single point
      return false;
    }
    double sumX=0, sumY=0, sumXY=0, sumX2=0;
    for(int i=0; i<nPoints; i++) {
      sumX += pts[i]._x;
      sumY += pts[i]._y;
      sumXY += pts[i]._x * pts[i]._y;
      sumX2 += pts[i]._x * pts[i]._x;
    }
    double xMean = sumX / nPoints;
    double yMean = sumY / nPoints;
    double denominator = sumX2 - sumX * xMean;
    // You can tune the eps (1e-7) below for your specific task
    if( std::fabs(denominator) < 1e-7 ) {
      // Fail: it seems a vertical line
      return false;
    }
    _slope = (sumXY - sumX * yMean) / denominator;
    _yInt = yMean - _slope * xMean;
    return true;
  }
}; 
```

请注意，如果点的“最佳”描述是垂直线，则此算法和来自 Wikipedia ( [http://en.wikipedia.org/wiki/Simple_linear_regression#Fitting_the_regression_line ) 的算法都会失败。](http://en.wikipedia.org/wiki/Simple_linear_regression#Fitting_the_regression_line)他们失败是因为他们使用

```
y = k*x + b 
```

线方程本质上不能描述垂直线。如果您还想涵盖数据点由垂直线描述为“最佳”的情况，则需要一种线拟合算法，该算法使用

```
A*x + B*y + C = 0 
```

线方程。您仍然可以修改当前算法以生成该等式：

```
y = k*x + b <=>
y - k*x - b = 0 <=>
B=1, A=-k, C=-b 
```

就上面的代码而言：

```
B=1, A=-_slope, C=-_yInt 
```

并且在`if`检查分母是否等于 0 的“then”块中，而不是`// Fail: it seems a vertical line`，产生以下直线方程：

```
x = xMean <=>
x - xMean = 0 <=>
A=1, B=0, C=-xMean 
```

我刚刚注意到我所指的原始文章已被删除。这个网页提出了一些不同的线拟合公式：http: [//hotmath.com/hotmath_help/topics/line-of-best-fit.html](http://hotmath.com/hotmath_help/topics/line-of-best-fit.html)

```
double denominator = sumX2 - 2 * sumX * xMean + nPoints * xMean * xMean;
...
_slope = (sumXY - sumY*xMean - sumX * yMean + nPoints * xMean * yMean) / denominator; 
```

公式是相同的，因为`nPoints*xMean == sumX`和`nPoints*xMean*yMean == sumX * yMean == sumY * xMean`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T10:14:39.460

我建议从头开始编码。这是一个非常简单的 C++ 实现。`polyfit`您可以直接从此处的公式中从数据中编写最小二乘拟合的截距和梯度（与 相同的方法）

[http://en.wikipedia.org/wiki/Simple_linear_regression#Fitting_the_regression_line](http://en.wikipedia.org/wiki/Simple_linear_regression#Fitting_the_regression_line)

这些是封闭形式的公式，您可以使用循环轻松评估自己。如果您使用更高程度的拟合，那么我建议您使用矩阵库或更复杂的算法，但是对于您上面描述的简单线性回归，这就是您所需要的。对于这样的问题（在我看来），矩阵和线性代数例程将是多余的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-01T08:38:31.907

直线方程为 A *x + B* y + C=0。

所以它可以很容易（当 B 不是那么接近零时）转换为 y = (-A/B)*x + (-C/B)

```
typedef double scalar_type;
typedef std::array< scalar_type, 2 > point_type;
typedef std::vector< point_type > cloud_type;

bool fit( scalar_type & A, scalar_type & B, scalar_type & C, cloud_type const& cloud )
{
    if( cloud.size() < 2 ){ return false; }

    scalar_type X=0, Y=0, XY=0, X2=0, Y2=0;

    for( auto const& point: cloud )
    { // Do all calculation symmetric regarding X and Y
        X  += point[0];
        Y  += point[1];
        XY += point[0] * point[1];
        X2 += point[0] * point[0];
        Y2 += point[1] * point[1];
    }

    X  /= cloud.size();
    Y  /= cloud.size();
    XY /= cloud.size();
    X2 /= cloud.size();
    Y2 /= cloud.size();

    A = - ( XY - X * Y ); //!< Common for both solution

    scalar_type Bx = X2 - X * X;
    scalar_type By = Y2 - Y * Y;

    if( fabs( Bx ) < fabs( By ) ) //!< Test verticality/horizontality
    { // Line is more Vertical.
        B = By;
        std::swap(A,B);
    }
    else
    {   // Line is more Horizontal.
        // Classical solution, when we expect more horizontal-like line
        B = Bx;
    }
    C = - ( A * X + B * Y );

    //Optional normalization:
    // scalar_type  D = sqrt( A*A + B*B );
    // A /= D;
    // B /= D;
    // C /= D;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T10:31:14.830

您还可以使用或查看[此实现](http://w3.impa.br/~dimasmm/r3d/projetos_1/ives/)，这里也有[文档](http://w3.impa.br/~dimasmm/r3d/projetos_1/ives/doc/latex/polyfit_doc.pdf)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-21T17:17:59.903

拟合线可以通过不同的方式完成。最小二乘意味着最小化距离的平方和。但是您可以将另一个成本函数作为（非平方）距离的示例。但通常你使用平方距离（最小二乘）。也有可能以不同的方式定义距离。通常，您只需使用“y”轴作为距离。但您也可以使用总/正交距离。那里的距离是在 x 和 y 方向计算的。如果您在 x 方向上也有错误（假设它是测量时间）并且您没有在保存在数据中的确切时间开始测量，这可能会更合适。对于最小二乘法和总最小二乘法线拟合存在封闭形式的算法。因此，如果您安装其中之一，您将获得与数据点的距离平方和最小的线。就你的辩护而言，你再合适不过了。您可以将定义更改为采用另一个成本函数或以另一种方式定义距离的示例。

有很多关于将模型拟合到您能想到的数据中的东西，但通常它们都使用“最小二乘法拟合”，而且您在大多数情况下应该没问题。但是，如果您有特殊情况，则可能有必要考虑您在做什么。可能在几分钟内完成最小二乘。考虑哪种方法最适合您解决问题涉及理解数学，这可能需要无限时间:-)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-11T21:04:45.627

注意：这个答案不是这个问题的答案，而是这个“[最接近一组点的线](https://stackoverflow.com/questions/18679838/line-closest-to-a-set-of-points)”被标记为这个“重复”的“线”（我认为不正确），无法添加新的答案.

问题要求：

> 找到与所有点的距离最小的线？我所说的距离是指点和线之间的最短距离。

“点和线之间”距离的最常见解释是欧几里德距离，“从所有点”最常见的解释是距离之和（绝对值或平方值）。

当目标是最小化欧式距离平方和时，线性回归 (LST) 不是要使用的算法。此外，线性回归不能产生垂直线。要使用的算法是“总最小二乘法”。有关问题描述的示例[维基百科和数学堆栈交换中的](https://en.wikipedia.org/wiki/Total_least_squares)[此答案](https://math.stackexchange.com/questions/3109123/line-nearest-to-a-set-of-points?noredirect=1#3109142)有关公式的详细信息，请参见示例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T17:31:28.693

要适合一条线，`y=param[0]x+param[1]`只需执行以下操作：

```
// loop over data:
{               
sum_x += x[i];
sum_y += y[i];
sum_xy += x[i] * y[i];
sum_x2 += x[i] * x[i];
}

// means
double mean_x = sum_x / ninliers;
double mean_y = sum_y / ninliers;

float varx = sum_x2 - sum_x * mean_x;
float cov = sum_xy - sum_x * mean_y; 
```

// 检查零 varx

```
param[0] = cov / varx;
param[1] = mean_y - param[0] * mean_x; 
```

有关该主题的更多信息[http://easycalculation.com/statistics/learn-regression.php](http://easycalculation.com/statistics/learn-regression.php) （公式相同，它们只是乘以并除以 N，样本 sz。）。如果您想将平面拟合到 3D 数据，请使用类似的方法 - [http://www.mymathforum.com/viewtopic.php?f=13&t=8793](http://www.mymathforum.com/viewtopic.php?f=13&t=8793)

免责声明：从某种意义上说，所有二次拟合都是线性的并且是最优的，因为它们可以减少参数中的噪声。但是，您可能对减少数据中的噪声感兴趣。您可能还想忽略异常值，因为它们会极大地影响您的解决方案。这两个问题都可以通过 RANSAC 解决。请参阅我的帖子：

# javascript - 查找ckeditor实例

> ID：11449619
> 
> 赞同：2
> 
> 时间：2012-07-12T10:11:10.060
> 
> 标签：javascript, jquery, ckeditor

我想访问和操作使用 ckeditor 的文本区域的内容。在我开始使用编辑器之前，我的原始代码是：

```
(function ($) {
    "use strict";
    $(document).ready(function () {

         for(var i=0; i<=10; i++) {

                $('#edit-button'+i).click(function(){

                        var tag = $(this).attr("value");
                        var id ="edit-body-und-0-value"; /* id of textarea */

                        var element  = document.getElementById(id);
                        var start    = element.selectionStart;
                        var end      = element.selectionEnd;
                        var text     = element.value;
                var prefix   = text.substring(0, start);
                        var selected = text.substring(start, end);
                        var suffix   = text.substring(end);
                        selected     = "["+tag+"]" + selected + "[/"+tag+"]";
                        element.value      = prefix + selected + suffix;

                        element.selectionStart = start;
                        element.selectionEnd   = start + selected.length;

                        return false;

                        });
            }
        });

})(jQuery); 
```

启用编辑器后，这将停止工作。

我猜我需要使用一些不同的对象，然后是“元素”对象、ckeditor 对象，然后我可以使用这里描述的函数：http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR [。编辑器.html](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html)

但是我如何获得 ckeditor 对象呢？

ckeditor 是在 drupal 中添加的，所以我对它知之甚少，我非常不确定如何访问它或查找哪些信息才能知道该做什么。

在这个页面上：[http ://ckeditor.com/blog/CKEditor_for_jQuery](http://ckeditor.com/blog/CKEditor_for_jQuery)

```
$( 'textarea.editor' ).ckeditor(); 
```

用于创建对象（？）。但是我已经有一个需要查找的 ckeditor 实例。我可以如何为给定的文本区域选择编辑器吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-07T21:15:44.390

使用 jquery 适配器，您可以获得 ckeditor “对象”，如下所示：

```
$('textarea.editor').ckeditorGet() 
```

所以要摧毁它，你会做

```
$('textarea.editor').ckeditorGet().destroy() 
```

这是使用 ckeditor 的 4.x 版本。

# iphone - UITableView - didSelectRowAtIndexPath 中的代码不起作用

> ID：11449620
> 
> 赞同：-3
> 
> 时间：2012-07-12T10:11:13.643
> 
> 标签：iphone, objective-c, ios, uitableview

我正在开发一个通用应用程序。因为我使用的是`UITableView`.I 动态创建的。我写了下面的代码。`didSelectRowAtIndexPath`但它没有移动到下一页。请告诉我如何做到这一点。

```
FirstViewController *fst =[[FirstViewController alloc]init]; 
[self.navigationController pushViewController:fst animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:16:20.710

您需要在此处提供 nil 文件的参考。

```
FirstViewController *fst =[[FirstViewController alloc]initWithNibName:@"abc.xib"]; 
[self.navigationController pushViewController:fst animated:YES]; 
```

# c++ - 提升 asio 读取缓冲区

> ID：11449623
> 
> 赞同：2
> 
> 时间：2012-07-12T10:11:15.880
> 
> 标签：c++, sockets, boost, boost-asio

我的问题是当您不知道消息大小时，读取 boost tcp 套接字的最佳方法是什么？这是一个样本。我只是把大小设置为 10。代码在不同的标题中，但我觉得不需要全部包含在内

/////////////hpp

```
typedef boost::asio::ip::tcp::resolver TResolver;
typedef boost::asio::ip::tcp::resolver::query TResolverQuery;
typedef boost::asio::ip::tcp::endpoint Tendpoint;
typedef boost::asio::ip::tcp::socket Tsocket;
typedef boost::asio::ip::tcp::acceptor Tacceptor;
#define Tsize 10 
```

////////////cpp

```
while(true)
{
    cout<<"recieve"<<endl;
    boost::shared_ptr< Tacceptor > acceptor(new boost::asio::ip::tcp::acceptor(*m_io_service));
    boost::system::error_code ec;
    TResolverQuery query(this->getHost(), boost::lexical_cast< std::string >( this->getPort() ));
    TResolver resolver( *m_io_service );
    Tendpoint endpoint = *resolver.resolve( query );
    acceptor->open( endpoint.protocol() );
    acceptor->set_option( boost::asio::ip::tcp::acceptor::reuse_address( true ) );
    acceptor->bind( endpoint );
    acceptor->listen();
    boost::shared_ptr< Tsocket > socknew(new Tsocket( *m_io_service ));
    acceptor->accept( *socknew,endpoint);
    boost::array<char, Tsize> buf;
    boost::asio::read(*socknew,boost::asio::buffer(buf), ec);
    cout.write(buf.data(),Tsize);cout << std::endl;
    socknew->shutdown( boost::asio::ip::tcp::socket::shutdown_both, ec );
    cout<<"threadId "<< boost::this_thread::get_id()<<endl;        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:15:21.587

两种最常见的方法是使用包含消息长度或具有消息结束标记的协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:38:21.487

我找到了一个解决我的问题的方法，即我可以使用一段时间而不是 eof 来读取套接字并 push_back 在一个可以工作的向量上。我可以在这里创建一个 wiki 作为参考点。

# eclipse - 在 Eclipse 中为标准流和错误流打开单独的控制台

> ID：11449624
> 
> 赞同：1
> 
> 时间：2012-07-12T10:11:21.117
> 
> 标签：eclipse, console

我想在 Eclipse 中有 2 个控制台窗口：1 个只有我的进程的错误流，1 个只有我的进程的 std-stream

我搜索了一个选项或插件来执行此操作，但找不到任何内容。因此，在 Eclipse 中实现应该很容易。谁熟悉 Eclipse PDE。

有什么想法如何做到这一点，或者有人愿意构建这个插件吗？

# c - 在编译时检查宏参数的类型

> ID：11449632
> 
> 赞同：2
> 
> 时间：2012-07-12T10:11:48.440
> 
> 标签：c

要检查两个变量是否具有相同的结构类型，我使用宏

```
#define assert_same_struct_types(a, b)    ((void) (sizeof((a)=(b)))) 
```

如果一些类似函数的宏

```
#define m(a,b) blablabla 
```

假设 a 和 b 应该是相同的结构类型，我添加了一个编译时检查：

```
#define m(a,b) (assert_same_struct_types(a, b), blablabla) 
```

如果 m(a,b) 的调用者意外传递给 m 个不同类型的结构，则会引发编译器错误。

但是，由于它们之间的隐式转换，这种方法并不总是适用于内置和指针类型。

那么，是否有可能为任意类型解决这个问题，不一定是结构？

我需要 C89 的解决方案，但是，听到 C99 或 C11 的可能性会很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:20:23.263

```
#define ASSERT_SAME_TYPE(a, b)  ((void) (&(a) == &(b))) 
```

将为您提供编译诊断和错误`-Werror`（`gcc`对于其他编译器或类似选项）。

请注意，许多编译器都有一个非标准的扩展[`typeof`](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html)运算符来获取对象的类型，这可用于检查两种类型是否相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T02:06:48.203

这个问题询问了一个 C89 解决方案，到目前为止我还没有找到一个好的方法来做到这一点，所以你可以检查编译器是否支持`typeof`并在可用时使用它，而不是依赖 C89。它并不理想，但意味着只要一些开发人员使用 GCC/Clang/IntelC，错误就会被捕获。*当然，如果您告诉您的编译器只支持 C89，这将无济于事。*

它提供了更好的类型检查，但显然在不受支持时根本没有任何用处。

```
#ifdef __GNUC__
#define CHECK_TYPE(var, type)  {  \
    typeof(var) *__tmp;           \
    __tmp = (type *)NULL;         \
    (void)__tmp;                  \
} (void)0

#define CHECK_TYPE_PAIR(var_a, var_b)  {  \
    typeof(var_a) *__tmp;                 \
    __tmp = (typeof(var_b) *)NULL;        \
    (void)__tmp;                          \
} (void)0

#define CHECK_TYPE_PAIR_INLINE(var_a, var_b)  ((void)({  \
    typeof(var_a) *__tmp;                                \
    __tmp = (typeof(var_b) *)NULL;                       \
    (void)__tmp;                                         \
}))

#else
#  define CHECK_TYPE(var, type)
#  define CHECK_TYPE_PAIR(var_a, var_b)
#  define CHECK_TYPE_PAIR_INLINE(var_a, var_b) (void)0
#endif

/* inline type checking - can mix in with other macros more easily using the comma operator,
 * C11 gives best results here */
#if defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 201112L)
#  define CHECK_TYPE_INLINE(val, type) \
    (void)((void)(((type)0) != (0 ? (val) : ((type)0))), \
           _Generic((val), type: 0, const type: 0))
#else
#  define CHECK_TYPE_INLINE(val, type) \
    ((void)(((type)0) != (0 ? (val) : ((type)0))))
#endif 
```

# cookies - 如何正确删除cookies？

> ID：11449635
> 
> 赞同：1
> 
> 时间：2012-07-12T10:11:53.430
> 
> 标签：cookies, selenium, webdriver

我使用`Selenium Webdriver`，我想在执行测试之前清除 cookie。我使用来自官方“Selenium”网站的代码。这是代码：

```
Cookie cookie = new Cookie("key", "value");
driver.manage().addCookie(cookie);
Set<Cookie> allCookies = driver.manage().getCookies();
for (Cookie loadedCookie : allCookies) {
    System.out.println(String.format("%s -> %s", loadedCookie.getName(), loadedCookie.getValue()));
}
driver.manage().deleteAllCookies(); 
```

但我收到通知：`- Cookie cannot be resolved to a type, Set cannot be resolved to a type`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:44:31.620

是包装[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)。`java.util`

是包装[`Cookie`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Cookie.html)。`org.openqa.selenium`

您需要导入这两个类以使您的代码工作：

```
import java.util.Set;
import org.openqa.selenium.Cookie; 
```

为了减轻痛苦，每个现代 Java IDE 都有一个自动功能：

*   在 Eclipse 中，它被称为“组织导入”，位于`Ctrl`++`Shift`下`O`。
*   在 IntelliJ 中，它被称为“优化导入”，位于`Ctrl`++`Alt`之下`O`。
*   在 NetBeans 中，它也以某种方式被调用并且位于`Ctrl`++`Shift`之下`I`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:40:46.537

我会检查你的进口。我怀疑您在需要 selenium 时正在使用 javax cookie。

```
javax.servlet.http.Cookie

org.openqa.selenium.Cookie 
```

# javascript - 我如何使用 javascript 解析 json 对象..？

> ID：11449636
> 
> 赞同：2
> 
> 时间：2012-07-12T10:11:53.603
> 
> 标签：javascript, json

```
var Response = $.parseJSON(data.d); 
```

此代码不起作用..
我的 json 对象是

```
[{"ItemId":1,"ItemName":"Sizzler"},{"ItemId":2,"ItemName":"Starter"},{"ItemId":3,"ItemName":"Salad"}] 
```

我该如何解析这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:32:15.800

得到了解决方案。我已经包含了 2 个 jquery，由于它们的冲突，我的代码无法正常工作。我的工作代码是：var jsonp = data.d;

```
var lang = '';

var obj = $.parseJSON(jsonp);

$.each(obj, function() {

    lang += this['ItemId'] + " ";

});
alert(lang); 
```

# html - 自动生成的 Symfony2 表单中的 HTML5 验证字段我在必需的选择上有以下代码： <select required="required"><option value="1">01</option> <option value="2">02</option> ... <option value="31">31</option></select> 在我的 (HTML5 / symfony

> ID：11449637
> 
> 赞同：3
> 
> 时间：2012-07-12T10:11:59.460
> 
> 标签：html, symfony, w3c

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T10:56:40.050

带`require`属性：

```
<select required="required">
<option value=""></option><!-- added empty value -->
<option value="1">01</option>
<option value="2">02</option>
...
<option value="31">31</option>
</select> 
```

没有 - 只需删除`require`属性：

```
<select>
<option value="1">01</option>
<option value="2">02</option>
...
<option value="31">31</option>
</select> 
```

# javascript - 字符串中棘手的多次替换

> ID：11449638
> 
> 赞同：3
> 
> 时间：2012-07-12T10:12:01.450
> 
> 标签：javascript, regex, string

我的字符串类似于

```
var query = "@id >= 4 OR @id2 < 6 AND @id3 >= 5 AND @name = foo " 
```

现在我想用这个字符串做的是反转每个“平等”测试。将 ' >=' 替换为 ' <' ， ' <' 替换为 ' >=' 和 ' =' 替换为 ' !=' 。

我想要的结果：

```
var reverseQuery = "@id < 4 OR @id2 >= 6 AND @id3 < 5 AND @name != foo " 
```

我们不能使用：

```
reverseQuery = query.replace(/>=/g, "<").replace(/</g, ">=").etc 
```

因为这样做的结果是

```
@id >= 4 OR @id2 >= 6 AND @id3 >= 5 AND @name != foo 
```

正确的 ？那么如何很好地做到这一点呢？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T10:15:28.110

将单个替换与确定替换的回调函数一起使用。

```
query = query.replace(/(<=?|>=?|=|<>|!=)/g, function(m){
  switch(m) {
    case '<': return '>=';
    case '>': return '<=';
    case '<=': return '>';
    case '>=':return '<';
    case '=': return '!=';
    case '<>': return '=';
    case '!=': return '=';
  }
}); 
```

演示：http: [//jsfiddle.net/Guffa/s2xj5/](http://jsfiddle.net/Guffa/s2xj5/)

# android - 在列表视图中添加项目和项目移动的动画

> ID：11449640
> 
> 赞同：3
> 
> 时间：2012-07-12T10:12:04.997
> 
> 标签：android, listview, animation

如何在列表视图中动画添加新项目或将项目从一个位置移动到另一个位置？我想制作动画效果，就像在这个应用程序中一样：[any.do](http://www.youtube.com/watch?v=-UbMmqBa7HQ&feature=player_detailpage#t=171s) (youtube)。我正在使用从 ResourceCursorAdapter 扩展的适配器。我应该如何使用 newView 和 bindView 函数来实现这个效果？还是有其他方法可以做到这一点，比如扩展 ListView 类？我怀疑 any.do 应用程序中有一个 ScrollView 而不是 Listview。但我认为这是错误的方式，如果列表中有很多项目。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T16:14:08.853

要做到这一点，您需要： 1\. “关闭”项目所在的插槽。2.在列表中“打开”一个插槽，该项目将“降落”。3\. 在插槽之间移动项目。

要实现第一个动画，您需要为列表项视图本身设置动画。要使其消失，您可以为其底部边距的值设置动画。我写了一篇关于我在 Any.DO 中所做的其他动画的博客文章，我在其中动画了这个值 - [http://udinic.wordpress.com/2011/09/03/expanding-listview-items/](http://udinic.wordpress.com/2011/09/03/expanding-listview-items/)。您可以使用相同的动画来为列表项的视图设置动画。

“打开”动画与关闭动画相同，但方向相反。您将列表项放置在“着陆点”之前，并将其底部边缘向外设置动画，为新项目的到来留出空白空间。

在位置之间移动项目相当容易。您需要使用与列表项相同的布局来扩展视图，使用当前项的数据填充它，将其添加到 WindowManager：

```
WindowManager winManager = (WindowManager) Context.getSystemService(Context.WINDOW_SERVICE);
winManager.addView(..) 
```

并通过使用动画它的坐标：

```
winManager.updateViewLayout(..); 
```

动画完成后 - 您可以删除此视图并刷新列表。

添加项目动画使用相同的概念完成。

抱歉，我没有在这里提供完整的资源。在我的博客文章中，您可以找到展开/关闭动画的代码。

希望这可以帮助！

# .net - DotNetZip 使用提供的代码示例提取流问题

> ID：11449641
> 
> 赞同：1
> 
> 时间：2012-07-12T10:12:05.220
> 
> 标签：.net, vb.net-2010, dotnetzip

我正在尝试打开一个 zip 文件并将密码和 256 AES 加密文本文件提取到一个流中，无需将文本副本放入驱动器即可读取。如果我理解我想要正确做的事情，使用流就可以完成。我对代码不是很熟悉，所以我使用了我在下面的 DontNetZip 网站上找到的示例。问题是 2 倍，处理时会引发 2 个错误，我希望有人可以帮助解决这些问题。

1 第一个错误发生在第 3 行 - “Using s As CrcCalculatorStream = e1.OpenReader”，错误是“对象引用未设置为对象的实例。' 我试过去清除和新的，但它仍然在那条线上崩溃。

2 第二个错误在循环之后的一行 - "If (s.Crc32 <> e1.Crc32) Then" 并且错误是 s.Crc32 下的一条波浪线，它表示 Crc32 不是 CrcCalculatorStream 的成员，a e1.Crc32 下的类似错误不是 Ionic.zip.zipEntry 的成员

代码复制自此链接[http://cheeso.members.winisp.net/DotNetZipHelp/html/4ef6405c-33ff-a8aa-1731-def3ec5cac24.htm](http://cheeso.members.winisp.net/DotNetZipHelp/html/4ef6405c-33ff-a8aa-1731-def3ec5cac24.htm)

有人可以帮我查看代码，看看我是否可以得到我之后的结果，即将文本文件的内容放在一个字符串中，以便我可以阅读它

PS 我在我的真实程序中编辑了对文件的引用和正确的 zip 名称，唯一的补充是密码。

谢谢

```
Using zip As New ZipFile(ZipFileToRead)
Dim e1 As ZipEntry = zip.Item("Elevation.mp3")
Using s As Ionic.Zlib.CrcCalculatorStream = e1.OpenReader(password)
    Dim n As Integer
    Dim buffer As Byte() = New Byte(4096) {}
    Dim totalBytesRead As Integer = 0
    Do
        n = s.Read(buffer, 0, buffer.Length)
        totalBytesRead = (totalBytesRead + n)
    Loop While (n > 0)
    If (s.Crc32 <> e1.Crc32) Then
        Throw New Exception(String.Format("The Zip Entry failed the CRC Check. (0x{0:X8}!=0x{1:X8})", s.Crc32, e1.Crc32))
    End If
    If (totalBytesRead <> e1.UncompressedSize) Then
        Throw New Exception(String.Format("We read an unexpected number of bytes. ({0}!={1})", totalBytesRead, e1.UncompressedSize))
    End If
End Using 
```

结束使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:44:52.883

我也设法解决了这个问题，我只是觉得它可能对某人有用。

将 str 调暗为字符串

```
 Using s As Ionic.Crc.CrcCalculatorStream = e.OpenReader(Password)
                        Dim sr As StreamReader = New StreamReader(s)
                        str = sr.ReadToEnd()
                    End Using 
```

# c++ - 将 double* 存储在 long (C++) 中

> ID：11449644
> 
> 赞同：1
> 
> 时间：2012-07-12T10:12:16.187
> 
> 标签：c++, winapi, pointers, long-integer, win64

因此，当目标平台为 32 位时，我拥有可以在 Visual Studio 2005 中完美编译的现有代码。但是，它不适用于 64 位。我不明白为什么；事实上，我从来没有见过一个指针被转换为很久以前。它甚至是正确的 C++ 吗？

```
#define REAL double
typedef REAL* point; 
point *ptary; //(so it's basically double** ptary?)
long arylen = (long) ptary[0]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T10:16:50.083

它似乎在 32 位系统上工作，因为指针和 long 都是 32 位宽。它无法在 64 位系统上工作，因为指针是 64 位宽的，但 long（可能）仍然只有 32 位宽。

您可以通过打印`sizeof(double*)`和轻松检查这一点`sizeof(long)`。我的猜测是，在 64 位系统上，输出将分别为 8 和 4。

如果您需要能够保存指针的整数类型，请使用`intptr_t`from `<stdint.h>`。

# linq-to-sql - 如何有效地填充数据访问层模型？

> ID：11449645
> 
> 赞同：0
> 
> 时间：2012-07-12T10:12:16.337
> 
> 标签：linq-to-sql, dependency-injection

我正在使用 ASP.net 中的依赖注入开发我的第一个数据驱动域。

如果在我的数据访问层中创建了一些域数据模型，例如：

```
public class Company {
   public Guid CompanyId { get; set; }
   public string Name { get; set; }
}

public class Employee {
   public Guid EmployeeId { get; set; }
   public Guid CompanyId { get; set; }
   public string Name { get; set; }
} 
```

然后我开发了一个界面，例如：

```
public interface ICompanyService {
   IEnumerable<Model.Company> GetCompanies();
   IEnumerable<Model.Employee> GetEmployees();
   IEnumerable<Model.Employee> GetEmployees(Guid companyId);
} 
```

在一个单独的模块中，我使用 Linq to Sql 实现了这个接口：

```
public class CompanyService : ICompanyService {

    public IEnumerable<Model.Employee> GetEmployees();
    {
        return EmployeeDb
            .OrderBy(e => e.Name)
            .Select(e => e.ToDomainEntity())
            .AsEnumerable();
    }
} 
```

其中 ToDomainEntity() 在员工存储库类中实现为基实体类的扩展方法：

```
public Model.EmployeeToDomainEntity()
{
     return new  Model.Employee {
         EmployeeId = this.EmployeeId,
         CompanyId = this.CompanyId,
         Name = this.Name
     };
} 
```

到目前为止，我或多或少地遵循了 Mark Seeman 的优秀著作“.NET 中的依赖注入”中描述的模式——并且一切都很好。

但是，我想扩展我的基本模型以包括关键参考模型，因此域 Employee 类将变为：

```
public class Employee {
   public Guid EmployeeId { get; set; }
   public Guid CompanyId { get; set; }
   public Company { get; set; }
   public string Name { get; set; }
} 
```

并且 ToDomainEntity() 函数将扩展为：

```
public Model.Employee ToDomainEntity()
{
     return new  Model.Employee {
         EmployeeId = this.EmployeeId,
         CompanyId = this.CompanyId,
         Company = (this.Company == null) ? null : this.Company.ToDomainEntity()
         Name = this.Name
     };
} 
```

我怀疑从领域建模的角度来看这可能是“不好的做法”，但我认为，如果我要开发一个特定的视图模型来实现相同的目的，我遇到的问题也会成立。

从本质上讲，我遇到的问题是填充数据模型的速度/效率。如果我使用上述 ToDomainEntity() 方法，Linq to Sql 会创建一个单独的 SQL 调用来检索每个员工的公司记录的数据。正如您所料，这会显着增加评估 SQL 表达式所需的时间（在我们的测试数据库上从大约 100 毫秒到 7 秒），特别是在数据树很复杂的情况下（因为单独的 SQL 调用来填充每个节点/树的子节点）。

如果我创建数据模型'内联......

```
public IEnumerable<Model.Employee> GetEmployees();
{
    return EmployeeDb
        .OrderBy(e => e.Name)
        .Select(e => new Model.Employee {
            EmployeeId = e.EmployeeId,
            /* Other field mappings */
            Company = new Model.Company {
               CompanyId = e.Company.CompanyId,
               /* Other field mappings */
            }
        }).AsEnumerable();
} 
```

Linq to SQL 产生了一个很好的、紧凑的 SQL 语句，它本机使用“内部连接”方法将公司与员工关联起来。

我有两个问题：

1）从域类对象中引用关联的数据类是否被认为是“不好的做法”？

2）如果是这种情况，并且为此目的创建了一个特定的视图模型，那么在不必求助于创建内联赋值块来构建表达式树的情况下，填充模型的正确方法是什么？

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:14:25.967

该问题是由于同时具有数据层实体和域层实体并且需要在两者之间进行映射而引起的。虽然你可以让它发挥作用，但这会使一切变得非常复杂，正如你已经经历的那样。由于性能原因以及其他业务逻辑和表示逻辑将需要不同的数据，您正在数据和域之间进行映射，并且很快将为这些相同的实体添加更多映射。

唯一真正的解决方案是放弃您的数据实体并创建可以直接序列化到您的后端存储（SQL 服务器）的 POCO 模型对象。

[POCO 实体从一开始就在 LINQ to SQL 中得到支持，但我认为迁移到Entity Framework Code First](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)会更好。

这样做时，您可以从存储库中公开`IQueryable<T>`接口（您当前称为存储库`ICompanyService`，但更好的名称应该是`ICompanyRepository`）。这使您可以执行高效的 LINQ 查询。直接通过查询提供程序查询时，您可以阻止加载完整的实体。例如：

```
from employee in this.repository.GetEmployees()
where employee.Company.Name.StartWith(searchString)
select new 
{
    employee.Name, 
    employee.Company.Location 
}; 
```

使用 时`IQueryable<T>`，LINQ to SQL 和 Entity Framework 会将其转换为非常有效的 SQL 查询，该查询仅从数据库中返回员工姓名和公司位置，并在数据库内部进行过滤（与`GetEmployees()`返回.NET 应用程序时在您的 .NET 应用程序中进行过滤相比`IEnumerable<T>`） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:03:37.303

您可以使用方法让 Linq2Sql 预加载某些实体（而不是延迟加载它们） ：http `DataLoadOptions.LoadWith`: [//msdn.microsoft.com/en-us/library/bb534268.aspx](http://msdn.microsoft.com/en-us/library/bb534268.aspx)。如果您对`Company`实体执行此操作，那么我认为 Linq2Sql 不必访问数据库来再次获取它。

# mysql - 准备好的语句和存储过程

> ID：11449647
> 
> 赞同：2
> 
> 时间：2012-07-12T10:12:27.260
> 
> 标签：mysql, qt, stored-procedures, prepared-statement

我目前必须面对[这个](http://www.archivum.info/qt-interest@trolltech.com/2008-12/00296/%28Qt-interest%29-Problem-with-QSqlQuery-prepare-with-a-stored-procedure-%28MySql%29.html)问题。由于帖子已经将近4年了，现在有解决方案吗？

简短的摘要：

在 Qt 中，您可以为 MySQL 准备和执行一条语句，该语句调用带有一些占位符的存储过程，但您无法以任何方式获取结果。此外，您只能执行一次这样的语句，第二次您将收到“命令不同步”错误，这表明有结果，但据我了解，尚未获取。

# matrix - 用 common lisp 写一个简单的矩阵类进行练习

> ID：11449657
> 
> 赞同：3
> 
> 时间：2012-07-12T10:12:56.690
> 
> 标签：matrix, lisp, elisp, common-lisp

普通的 lisp 新手。编写 lisp 代码与编写 c++/java 完全不同，正如我之前编写的那样。

我正在尝试在 common lisp 中编写一个简单的矩阵类进行练习。像这样的一些代码：

```
(defun make-matrix (row col)
  (make-list row :initial-element (make-list col :initial-element nil)))

(defun init-matrix (matrix init-value)
  (labels ((set-element-value (lst)
                              (if (and lst
                                       (listp lst))
                                  (mapcar #'set-element-value lst)
                                (setf lst init-value))))
    (set-element-value matrix)))

(defun matrix+ (&rest matrices)
  (apply #'mapcar (lambda (&rest rows)
                    (apply #'mapcar #'+ rows)) matrices)) 
```

我的问题是我可以编写一个矩阵+，在没有“应用”的情况下接受不同数量的参数，还是以更好的方式？在某种程度上，lisp 应该是？

矩阵*怎么样，有人可以给我看一些很棒的代码，接受矩阵*中的任意数量的参数吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T10:48:54.523

Common Lisp 有 n 维数组。我会将它们用于矩阵运算。

见：`MAKE-ARRAY`, `AREF`, ...

通常我还会编写一个二进制（带两个参数）矩阵运算。使用 then`REDUCE`对矩阵列表进行操作。

```
CL-USER > (make-array '(3 5) :initial-element 0)
#2A((0 0 0 0 0) (0 0 0 0 0) (0 0 0 0 0)) 
```

上面创建了一个大小为 3x5 的二​​维数组，初始内容为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T16:23:17.223

矩阵乘法。我不能保证这是最好的例子，但它真的很简单。这是因为您使用数组而不是列表。此外，当然，您可以优化方阵或特殊情况，如单位矩阵等。但这只是为了简单，而不是高效等。

```
(defun matrix* (&rest matrices)
  (assert (cdr matrices) nil
          "You will achieve nothing by multiplying a single matrix.")
  (reduce
   #'(lambda (a b)
       (assert (= (array-dimension a 0) (array-dimension b 1)) nil
               "The number of rows in the first matrix should be the number ~
                of columns in the second matrix")
       (let ((result
              (make-array
               (list (array-dimension a 1) (array-dimension b 0))
               :initial-element 0)))
         (dotimes (i (array-dimension a 1) result)
           (dotimes (j (array-dimension b 0))
             (dotimes (k (array-dimension a 0))
               (incf (aref result i j) (* (aref a k i) (aref b j k))))))))
   matrices))

(format t "result: ~s~&" (matrix* #2A((1 2) (3 4)) #2A((5 6) (7 8))))
;; #2A((23 31) (34 46)) =
;; (1 * 5 + 3 * 6 = 23) (1 * 7 + 3 * 8 = 31)
;; (2 * 5 + 4 * 6 = 34) (2 * 7 + 4 * 8 = 46) 
```

# java - AbstractList.java中RandomAccess的操作

> ID：11449658
> 
> 赞同：5
> 
> 时间：2012-07-12T10:13:01.693
> 
> 标签：java, collections, random-access

在 RandomAccess 类的 java doc 中写到“List 实现使用的标记接口来指示它们支持快速（通常是恒定时间）随机访问。这个接口的主要目的是允许通用算法改变它们的行为以提供良好的性能时适用于随机或顺序访问列表。”

但我发现了一些奇怪的东西

这是 java.util 包中 AbstractList.java 中的 subList 方法

```
public List<E> subList(int fromIndex, int toIndex) {
    return (this instanceof RandomAccess ?
            new RandomAccessSubList<>(this, fromIndex, toIndex) :
            new SubList<>(this, fromIndex, toIndex));
} 
```

RandomAccessSubList 类的实现：

```
class RandomAccessSubList<E> extends SubList<E> implements RandomAccess {
    RandomAccessSubList(AbstractList<E> list, int fromIndex, int toIndex) {
        super(list, fromIndex, toIndex);
    }

    public List<E> subList(int fromIndex, int toIndex) {
        return new RandomAccessSubList<>(this, fromIndex, toIndex);
    }
} 
```

SubList 类实现：

```
SubList(AbstractList<E> list, int fromIndex, int toIndex) {
    if (fromIndex < 0)
        throw new IndexOutOfBoundsException("fromIndex = " + fromIndex);
    if (toIndex > list.size())
        throw new IndexOutOfBoundsException("toIndex = " + toIndex);
    if (fromIndex > toIndex)
        throw new IllegalArgumentException("fromIndex(" + fromIndex +
                                           ") > toIndex(" + toIndex + ")");
    l = list;
    offset = fromIndex;
    size = toIndex - fromIndex;
    this.modCount = l.modCount;
} 
```

我认为在 AbstractList 类中， RandomAccessSubList 是没用的，因为它将数据传递给 SubList 类，它的操作就像

```
new SubList<>(this, fromIndex, toIndex)); 
```

在 subList 方法中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T10:21:52.587

由于根列表访问随机索引的速度很快，因此子列表的访问速度也很快，因此将子列表也标记为 RandomAccess 是有意义的。

SubList 和 RandomAccessSubList 通过继承共享相同的实现，但一个没有标记为 RandomAccess，另一个是。这就是子类有用的原因。

# python - 如何使用动态输入务实地安排 Celery 任务？

> ID：11449661
> 
> 赞同：3
> 
> 时间：2012-07-12T10:13:18.437
> 
> 标签：python, django, celery, django-celery

我有这种情况，我需要务实地调度一个任务，而任务定义每次需要执行时都需要一定的输入参数。考虑以下任务函数：

```
@task
def add_numbers(a, b):
   sum = a + b
   return sum 
```

现在，如果我需要在两个不同的时间实例使用不同的输入参数 ex T1->add_numbers(4,5) 和 T2->add_numbers(2,2) 运行上述任务，我该怎么做。谢谢您的帮助。

环境：Django 1.4，芹菜 3.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-05T08:11:20.870

我也遇到了这个问题，我想还有另一种方法可以帮助你。@narced133 的答案只有在参数的变化有限的情况下才有效，那么如果我们有数千种参数怎么办？

解决方案：重构您`celery task`以接受一个函数作为参数，该函数将生成或获取作为您的真正参数的参数`celery task`: `add_numbers`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:51:04.470

有关如何以指定间隔调用带有参数的任务的示例，请参阅有关周期性任务的 Celery 文档。[http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html#entries](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html#entries)

在您的示例中，您可以使用以下内容：

```
from celery.schedules import crontab

CELERYBEAT_SCHEDULE = {
    'T1': {
        'task': 'tasks.add_numbers',
        'schedule': crontab(hour=7, minute=30, day_of_week=1),,
        'args': (4, 5)
    },
    'T2': {
        'task': 'tasks.add_numbers',
        'schedule': crontab(hour=16, minute=0),,
        'args': (2, 2)
    },
} 
```

# android - 如何将图像存储在 android 的资产/子文件夹中？资产文件夹大小有最大限制吗？

> ID：11449664
> 
> 赞同：0
> 
> 时间：2012-07-12T10:13:33.420
> 
> 标签：android

> **可能重复：**
> [如何将文件写入 android 中的资产文件夹或原始文件夹？](https://stackoverflow.com/questions/3760626/how-to-write-files-to-assets-folder-or-raw-folder-in-android)

如何将图像存储在 android 的资产/子文件夹中？资产文件夹大小有最大限制吗？实际上，我从网络上获取了一堆图像并尝试将所有图像下载到资产的子文件夹中？有可能吗？怎么做？实际上我的代码如下，它将图像保存在 sdcard 中：-

```
String filepath=null;
      try {
       //set the download URL, a url that points to a file on the internet
       //this is the file to be downloaded
       URL url = new URL(Url);
       //create the new connection
       HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

       //set up some things on the connection
       urlConnection.setRequestMethod("GET");
       urlConnection.setDoOutput(true); 
        //and connect!
       urlConnection.connect();
       //set the path where we want to save the file
       //in this case, going to save it on the root directory of the
       //sd card.
     File SDCardRoot = Environment.getExternalStorageDirectory();
       //create a new file, specifying the path, and the filename
       //which we want to save the file as.

       String filename= "downloadedFile.png";   // you can download to any type of file ex:.jpeg (image) ,.txt(text file),.mp3 (audio file)
       Log.i("Local filename:",""+filename);
       file = new File(SDCardRoot,filename);
       if(file.createNewFile())
       {
        file.createNewFile();
       }

       //this will be used to write the downloaded data into the file we created
       FileOutputStream fileOutput = new FileOutputStream(file);

       //this will be used in reading the data from the internet
       InputStream inputStream = urlConnection.getInputStream();

       //this is the total size of the file
       int totalSize = urlConnection.getContentLength();
       //variable to store total downloaded bytes
       int downloadedSize = 0;

       //create a buffer...
       byte[] buffer = new byte[1024];
       int bufferLength = 0; //used to store a temporary size of the buffer

       //now, read through the input buffer and write the contents to the file
       while ( (bufferLength = inputStream.read(buffer)) > 0 ) {
        //add the data in the buffer to the file in the file output stream (the file on the sd card
        fileOutput.write(buffer, 0, bufferLength);
        //add up the size so we know how much is downloaded
        downloadedSize += bufferLength;
        //this is where you would do something to report the prgress, like this maybe
        Log.i("Progress:","downloadedSize:"+downloadedSize+"totalSize:"+ totalSize) ;

       }
       //close the output stream when done
       fileOutput.close();
       if(downloadedSize==totalSize)   filepath=file.getPath();

      //catch some possible errors...
      } catch (MalformedURLException e) {
       e.printStackTrace();
      } catch (IOException e) {
       filepath=null;
       e.printStackTrace();
      }
      Log.i("filepath:"," "+filepath) ; 
```

请为此提供一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:18:14.657

You could not store images in asset folder problematically

it's **READ-ONLY**

And generally MAX size for asset folder is **1 MB for each file**

You can save image in sdcard.

# iphone - 用于手指触摸绘图的 UIBezierPath 平滑曲线

> ID：11449677
> 
> 赞同：3
> 
> 时间：2012-07-12T10:14:40.400
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想平滑手指触摸画线上的曲线，我想要 UIBezierPath 中的解决方案，只有我的代码不能完全平滑线。我的代码在这里

```
@implementation MyLineDrawingView
@synthesize undoSteps;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        [super setBackgroundColor:[UIColor whiteColor]];

        pathArray=[[NSMutableArray alloc]init];
        bufferArray=[[NSMutableArray alloc]init];

    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{

    [[UIColor blackColor] setStroke];
    for (UIBezierPath *_path in pathArray) 
    [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];    
}
#pragma mark - Touch Methods
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [bufferArray removeAllObjects];
    myPath=[[UIBezierPath alloc]init];
    myPath.lineWidth=5;
    myPath.miterLimit=-10;
    myPath.lineCapStyle = kCGLineCapRound;
    myPath.flatness = 0.0;

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath moveToPoint:[mytouch locationInView:self]];
    [pathArray addObject:myPath];

}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath addLineToPoint:[mytouch locationInView:self]];
    [self setNeedsDisplay];

}

-(void)undoButtonClicked
{
    if([pathArray count]>0)
    {
    UIBezierPath *_path=[pathArray lastObject];
    [bufferArray addObject:_path];
    [pathArray removeLastObject];
    [self setNeedsDisplay];
    }

}
-(void)redoButtonClicked
{
    if([bufferArray count]>0){
        UIBezierPath *_path=[bufferArray lastObject];
        [pathArray addObject:_path];
        [bufferArray removeLastObject];
        [self setNeedsDisplay];
    }   
}
- (void)dealloc
{
    [pathArray release];
    [bufferArray release];
    [super dealloc];
}

@end 
```

我正在使用我的代码获取输出，如下面的屏幕截图：

![在此处输入图像描述](../Images/17a026b5ec2cd91b4cfccba1cd459c77.png)

我想要平滑曲线输出，如下面的屏幕截图：

![在此处输入图像描述](../Images/e7caf3d5c9ff172cc506ddccc55799af.png)

任何人都可以帮助我不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T12:23:37.543

问题是您只是使用`addLineToPoint:`. 这相当于创建一系列直线。您确实需要添加控制点，例如在 Illustrator 或 Sketch 中绘制曲线路径时可能拖动的手柄。

您可以使用`addCurveToPoint:controlPoint1:controlPoint2:`添加这些；诀窍是确定控制点的放置位置，相对于您从`touches*`事件中实际获得的点。

为了更好地讨论可能的技术，我推荐以下问题：[绘制平滑曲线 - 需要的方法](https://stackoverflow.com/questions/8702696/drawing-smooth-curves-methods-needed)。

# javascript - 黑莓浏览器中的Window.Opener

> ID：11449680
> 
> 赞同：0
> 
> 时间：2012-07-12T10:14:50.737
> 
> 标签：javascript, mobile, blackberry, cross-browser

似乎黑莓浏览器（5.0）似乎不喜欢javascript window.opener 功能。谷歌没有太大帮助。

我们有一个现有的网站，它用来自子窗口的数据填充父窗口表单字段。我们正在尝试在我们的 Blackberry 网站中模仿相同的功能。但是，window.opener 函数在黑莓浏览器中返回 null

我有以下问题

1）这是一个已知问题吗？

2) 如果这是一个已知问题，是否是所有黑莓操作系统版本的问题？

3) 如果 BB 不支持 window.opener ，还有哪些其他选项可以将数据从子窗口传递到父窗口？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:36:06.253

BB OS5.0 中的浏览器对 javascript 的支持很差，所以这可能是它失败的原因。尝试在 BB OS 6.0 中加载相同的功能。设备模拟器应该让您对它在实际设备上的加载方式有一个很好的印象。

请说明您指的是移动网站还是使用 html、css 和 javascript（PhoneGap 或 WebWorks）制作的移动应用程序

# android - Android：更改位图的颜色

> ID：11449687
> 
> 赞同：1
> 
> 时间：2012-07-12T10:15:19.447
> 
> 标签：android, colors, bitmap, draw, paint

假设我有这个位图，它是一个全黑的随机形状，并说我想改变它的颜色，我的位图必须先全部涂成白色还是有别的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:53:36.550

如果您使用 Canvas 更改位图颜色的方法是更改​​位图本身。涉及的步骤如下：

假设您想加载您在某处拥有的现有位图，并且您想以某种方式将其染成红色。

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.bitmap); 
```

之后，您要在将其绘制到画布上之前修改位图的像素。您创建一个包含所有像素的 int 数组。

```
int[] pixels;
bitmap.getPixels(pixels, 0, 0, 0, 0, width, height); 
```

之后，您需要修改数组（例如，添加到红色组件）。但是，现在我们所拥有的只是像素数组中的 int 值。R，G和B都装在里面。如何找回它们？

```
int red = Color.red(pixels[n]);
int green = Color.green(pixels[n]);
int blue= Color.blue(pixels[n]); 
```

然后你可以随意修改像素的值，你可以把它放在一个循环中或者你喜欢的任何东西，然后把它放回像素数组。此外，RGB 值的范围是 0-255，因为它们是 8 位值。

之后，您将使用完全相反的功能将它们放回原处。

```
bitmap.setPixels(pixels, 0, 0, 0, 0, width, height); 
```

然后你就可以调用 Canvas.drawBitmap();

请记住，如果您经常这样做，这个过程应该会很慢，此外，如果您对游戏等实时应用程序感兴趣，Canvas 是一种缓慢的做事方式。

希望它有所帮助！

# c++ - STL 列表访问倒数第二个元素

> ID：11449690
> 
> 赞同：0
> 
> 时间：2012-07-12T10:15:25.640
> 
> 标签：c++, list, stl

如何在不创建临时列表和修改列表的情况下获取 STL 列表中倒数第二个元素的迭代器？是否可以只说：`--(--mylist.end())`？或者这会`end`由于前缀递减而改变列表的迭代器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:24:45.670

请注意，一般来说，`--mylist.end()`不保证为每个容器编译。

例如，如果您在释放模式下使用`std::vector`或，则可能是原始指针，并且您不能递减由函数返回的值的指针。`std::array``mylist.end()`

C++11 中这个问题的一个通用解决方案是`std::prev(std::prev(mylist.end()))`，当然，在检查列表是否足够长之后。你需要`#include <iterator>`为此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:44:48.767

您可以使用[std::advance](http://en.cppreference.com/w/cpp/iterator/advance)和 reverse_iterator：

```
SomeContainerType::reverse_iterator it = myList.rbegin();
std::advance(it, 1); // next to last element 
```

即使有问题的迭代器类型不支持，这也有效`operator+`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T10:17:42.130

如果可以接受 a `reverse_iterator`，那么：`some_list.rbegin() + 1;`

# c# - 如何按模式重写字符串

> ID：11449691
> 
> 赞同：1
> 
> 时间：2012-07-12T10:15:27.090
> 
> 标签：c#, string, iterator, string-formatting

我有一个字符串，其中“特殊区域”用花括号括起来：

```
{intIncG}/{intIncD}/02-{yy} 
```

我需要遍历 {} 之间的所有这些元素并根据它们的内容替换它们。在 C# 中执行此操作的最佳代码结构是什么？

我不能只做一个替换，因为我需要知道每个“特殊区域{}”的索引才能用正确的值替换它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:16:57.700

`string.Replace`会做得很好。

```
var updatedString = myString.Replace("{intIncG}", "something"); 
```

对每个不同的字符串执行一次。

* * *

更新：

由于您需要索引`{`来生成替换字符串（正如您[评论](https://stackoverflow.com/questions/11449691/how-to-split-a-string-by-pattern/11449720#comment15109837_11449720)的那样），您可以使用`Regex.Matches`来*查找*索引`{`- 集合中的每个[`Match`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)对象`Matches`都将包含字符串中的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:33:53.207

```
Regex rgx = new Regex( @"\({[^\}]*\})");
string output = rgx.Replace(input, new MatchEvaluator(DoStuff));

static string DoStuff(Match match)
{
//Here you have access to match.Index, and match.Value so can do something different for Match1, Match2, etc.
//You can easily strip the {'s off the value by 

   string value = match.Value.Substring(1, match.Value.Length-2);

//Then call a function which takes value and index to get the string to pass back to be susbstituted

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:19:22.950

使用[Regex.Replace](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace%28v=vs.71%29.aspx)：

> 用指定的替换字符串替换所有出现的由正则表达式定义的字符模式。

来自 msdn

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T10:22:03.813

你可以定义一个函数并加入它的输出——所以你只需要遍历一次而不是每个替换规则。

```
private IEnumerable<string> Traverse(string input)
{
  int index = 0;
  string[] parts = input.Split(new[] {'/'});
  foreach(var part in parts)
  {
    index++;
    string retVal = string.Empty;
    switch(part)
    {
      case "{intIncG}":
        retVal = "a"; // or something based on index!
        break;
      case "{intIncD}":
        retVal = "b"; // or something based on index!
        break;

      ...
    }
    yield return retVal;
  }
}

string replaced = string.Join("/", Traverse(inputString)); 
```

# jquery - 停止在子元素上运行的 jQuery 切换功能

> ID：11449698
> 
> 赞同：0
> 
> 时间：2012-07-12T10:15:46.933
> 
> 标签：jquery, inheritance

在网站设计中，我有一个最近的新闻部分，其中显示了最近新帖子的缩略图 + 标题。总共显示了 12 个新闻报道（3 行，每行 4 个）。通过 CSS，“最近新闻” div 设置了一个高度，默认情况下只显示第一行。这是创建切换高度的 jQuery

```
$(document).ready(function() {

    $("#recentnews").toggle(function(){
        // Show two rows (8)
        $(this).animate({height:387},200);
        $("html, body").animate({ scrollTop: $(document).height() }, "slow");
        return false;
    }
    ,function(){
        // Show three rows (12)
        $(this).animate({height:565},200);
        $("html, body").animate({ scrollTop: $(document).height() }, "slow");
        return false;
    },function(){
        // Show one row (4)
        $(this).animate({height:211},200);
    });
}); 
```

这很好用，但我遇到的问题是最近新闻 div 中的任何内容都将运行此切换功能。这是一个问题，因为现在任何最近的新闻报道都不能通过物理点击进入报道。

有没有办法删除切换继承？还是我以错误的方式使用切换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:01:48.020

您可以`e.stopImmediatePropagation()`在单击事件上使用，这将阻止单击事件通过 div 传播（这可能会根据您的代码触发其他切换）。

# ruby-on-rails - 建筑有许多来自现有记录的直通关系轨道

> ID：11449700
> 
> 赞同：0
> 
> 时间：2012-07-12T10:15:59.803
> 
> 标签：ruby-on-rails, ruby

我有点坚持为一个有很多关系的表格创建一个表格。目前我的模型是歌曲可以有很多 Setlists，反之亦然，通过 Allocations。

我目前正在编辑页面上，用户可以在其中将歌曲添加到设置列表中。视图当前如下所示：

```
<h1>Edit a Setlist</h1>
<div class="row">
   <div class="span8">
      <%=form_for(@setlist) do|f|%>

         <%=f.label :date, "Set a date" %>
         <span><%=f.date_select :date%><span>

        <div>
          <div id="library">
          <%= render 'library' %>
          </div>

          <%= render 'songs_in_set' %> 

        </div>

         <%=f.submit "Save", class: "btn btn-large btn-primary" %>
      <% end %>
   </div>
</div> 
```

上面提到的库部分：

```
<table class= "table table-striped table-bordered">
        <thead>
            <th>Title</th>
            <th>Artist</th>
            <th>Add to Set</th>
        </thead>
        <tbody>
          <% @songs.each do |song| %>
            <tr>
               <td><%= song.title %></td>
               <td><%= song.artist %></td>
               <td><%= link_to "ADD", '#' %></td>
            </tr>
          <% end %>
        </tbody>
</table> 
```

我想将该库中的链接部分转换为用于创建新分配的表单，从而将歌曲添加到设置列表中。

我的控制器中的相关位： setlist 控制器：

```
def edit
    @songs = Song.all(order: 'title')
    @setlist = Setlist.find(params[:id])
    @allocations = @setlist.allocations
  end

  def update

    @setlist = Setlist.find(params[:id])
    if @setlist.update_attributes(params[:setlist])

      flash[:success] = "SAVED!"
      redirect_to setlist_path(@setlist)
    else
      render 'edit'
    end
  end 
```

和分配控制器：

def new @allocation = Allocation.new 结束

定义创建

```
@allocation = Allocation.new(params[:allocation])

if @allocation.save
 flash[:success] = "Songs added"
 redirect_to edit_setlist_path(@allocation.setlist_id)
else
     flash[:fail] = "Error"
 redirect_to edit_setlist_path(@allocation.setlist_id)
end 
```

结尾

我知道我必须按照 setlist.allocations.build 的方式做一些事情，但我无法获得正确的参数（获取每个单独的歌曲 ID 和设置列表 ID）。我尝试在歌曲中放置一个助手表格。每个都循环，但这似乎不起作用。我有点迷茫，所以任何正确方向的指针都将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:33:37.430

尝试将此添加到`Setlist`：

```
accepts_nested_attributes_for :allocations, :dependent => :destroy 
```

然后您可以在您的设置列表表单中嵌套关联字段集。在图书馆部分：

```
<td>
  <%= f.fields_for :allocations do |ff| %>
    <%= f.hidden_field :song_id, song.id %>
    ...
  <% end %>
</td> 
```

如果您想为已经存在的歌曲创建分配，这应该可以工作，但是当您也在以相同的形式创建歌曲时，您可能需要一些不同的方案。不久前我遇到了这样的问题，并且无法找到干净的解决方案，但请告诉我，我也可以分享...

# php - Mysql不插入记录

> ID：11449705
> 
> 赞同：2
> 
> 时间：2012-07-12T10:16:22.290
> 
> 标签：php, mysql

我有两张桌子：`employee`和`employee_group`。插入第一个表后，我将从该表中获取最后插入的 id。接下来我需要插入表格`employee_group`。SQL：

```
INSERT INTO employee_group (employee_id, group_id) 
  SELECT {$currentEmpId}, group_id 
  FROM employee_group 
  WHERE employee_id = {$anyId} 
```

MySQL 已返回 TRUE。但是没有插入记录。

我注意到如果尝试为以前插入的员工插入记录，那么查询将成功。例子：

1.  插入员工，将`$currentEmpId`作为最后插入的 id返回
2.  `INSERT INTO employee_group (employee_id, group_id) SELECT {$currentEmpId - 1}, group_id FROM employee_group WHERE employee_id = {$anyEmpId}`

或者，如果我尝试同时插入当前员工和上一个员工的记录，那么第一次查询将不成功，但第二次查询正常。

数据库没有触发器、外键或函数。没什么，只是数据。

我陷入了僵局。

UPD：如果我将记录保存到 php 变量然后 foreach 它并将每条记录作为一个项目插入，就像`INSERT INTO employee_group (employee_id, group_id) VALUES (xxx, yyy)`我也会遇到这个问题一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:34:31.100

```
INSERT INTO employee_group (employee_id, group_id) 
  VALUES({$toEmpId},{SELECT group_id FROM employee_group WHERE employee_id = {$fromEmpId}}) 
```

一探究竟 ..

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-12T10:19:57.443

尝试这个

```
INSERT INTO employee_group (employee_id, group_id) 
  VALUES({$toEmpId},{SELECT {$toEmpId}, group_id FROM employee_group WHERE employee_id = {$fromEmpId}}) 
```

# c++ - 找不到标识符错误 C++

> ID：11449706
> 
> 赞同：0
> 
> 时间：2012-07-12T10:16:23.983
> 
> 标签：c++, initialization

我的 C++ 代码出现错误。我通常是一名 Java 开发人员，但我正在学习 C++ 课程，以便在我的编程能力方面更加广泛。无论如何，当我尝试构建此解决方案时，我得到了错误

> 1>c:\users\westlakes\documents\visual studio 2010\projects\blackjack\blackjack\playblackjack.cpp(81): error C3861: 'initializeGame': identifier not found
> 1>c:\users\westlakes\documents\visual工作室 2010\projects\blackjack\blackjack\playblackjack.cpp(82): error C3861: 'deal': identifier not found
> 1>c:\users\westlakes\documents\visual studio 2010\projects\blackjack\blackjack\playblackjack.cpp (83): 错误 C3861: 'playGame': 未找到标识符

谁能帮我吗？

```
// Programmer:  Matt Westlake

// Course:  COMP220

// Assignment:  Two-Dimensional Arrays

// Description:  The program will use a 2D array and a random-number
// generation to play Blackjack and keep track of a playing-card deck.

// Input:  User data entry and a playing-card deck represented as a two-
// dimensional array

// Output:  A screen display showing the current card hands of each player
// and the dealer, their score, win and lose status, and a final representation
// of the card deck after the game is over

#include <iostream>
#include <iomanip>
#include <windows.h>

using namespace std;

char cPlay = 'Y';       //Character variable for play game input
char tempDealerHand;
char cCardDeck[4][13];  //Character array representing the card deck
char output[5][8];
char card[1][1];
int iCard;              //Card array index
char cardName;
//0 = 2 card                                                              
//1 = 3 card
//2 = 4 card
//3 = 5 card
//4 = 6 card
//5 = 7 card                                                           
//6 = 8 card                                                        
//7 = 9 card                                     
//8 = 10 card                                                       
//9 = jack card
//10 = queen card
//11 = king card
//12 = ace card
int iNumberOfDraws = 0; //Number of rounds of card draws
int iSuit;//Suit array index
char Suit [4]; 

 //0 = diamonds
//1 = hearts
//2 = clubs
//3 = spades

// ASCII character display reference for display card suit symbols
//3 = heart symbol
//4 = diamond symbol
//5 = club symbol
//6 = spade symbol

int iNumberOfPlayers = 0;//Number of players in current game
int iPlayerCount[5];      //Integer array to holder each player's count
                                   //iPlayer[0] is always the dealer
int iHighestCount = 0;  //Highest count for a single game
int k, m;//integer loop counters

void initializeGame();
void deal();
void playGame();
char generateCard();
void generateDisplay();

void initializeGame()
{
if (iNumberOfPlayers == 0)
{
    cout << "No players in game, exiting program";
    Sleep(3000);
    exit(0);
}

cout << iNumberOfPlayers + "Joining the game with the dealer" << endl;
output[0][0] = 'Deal';
char name;
for (int i = 1; i <= iNumberOfPlayers; i++)
{
    output[i][0] = 'P ' + i;
}
for (int i = 0; i < 4; i++)
{
    for (int j = 0; j < 13; j++)
    {
        cCardDeck[i][j] = ' ';
    }
}

srand(GetTickCount());  //Seed the random-number generator
}

void deal()
{
for (k = 0; k <= iNumberOfPlayers; k++)
{
    for (m = 1; m <= 2; m++)
    {
        output[k][m] =  generateCard();
    }
}
tempDealerHand = output[0][0];
// output[0][0] = ? // to set dealer first hand to unknown
generateDisplay();
}

void playGame()
{
char HorS;
for (k = 1; k <= iNumberOfPlayers; k++)
{
    for (m = 3; m <= 5; m++)
    {
        cout << "Player " << k << " Would you like to Hit or Stay? Type H for Hit or anything else for Stay: ";
        cin >> HorS;
        if (HorS == 'H' || HorS == 'h')
        {
            output[k][m] = generateCard();
            generateDisplay();
        }
        else
        {
            break;
        }
    }
}
int dealerDraw = rand() % 3; // dealer will draw 0 to 3 cards;
for (int i = 0; i < dealerDraw; i++)
{
    output[0][i+3] = generateCard();
    generateDisplay();
}
}

char generateCard()
{
iSuit = rand() % 4;
iCard = rand() % 13;
if (iCard <= 8)
{
    cardName = iCard + 2;
}
else if (iCard == 9)
{
    cardName = 'J';
}
else if (iCard == 10)
{
    cardName = 'Q';
}
else if (iCard == 11)
{
    cardName = 'K';
}
else if (iCard == 12)
{
    cardName = 'A';
}
card[0][0] = Suit[iSuit],cardName;
return card[0][0];
}

void generateDisplay()
{ 
for (int i = 0; i < iNumberOfPlayers; i++)
{

    for (int j = 0; j < 8; j++)
    {
    cout << output[i][j];
    }
    cout << endl;
}
}

void main (void)
{

cout << "Do you want to play blackjack?";
cin >> cPlay;
Suit [0] = '0x03';
Suit [1] = '0x04';
Suit [2] = '0x05';
Suit [3] = '0x06';

cout << "Enter number of players: ";
cin >> iNumberOfPlayers;

while (true)
{
    initializeGame();
    deal();
    playGame();
}
} 
```

编辑已更改，因此 main 位于底部，但仍然出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:26:25.830

您可以在 main 函数之前进行前向声明：

```
void initializeGame();
void deal();
void playGame();

void main (void)
{
  ...
}

void initializeGame()
{
  ...
}

void deal()
{
  ...
}

void playGame()
{
  ...
} 
```

或将主函数定义放在文件底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:23:34.293

您更新的代码似乎对我很好。这是屏幕截图。![截屏](../Images/c90bc7dacce82156344a1daf46540e59.png)

我在您的代码中找不到问题所在。看来您正在使用 Visual Studio。尝试清理您的解决方案（构建-> 清理解决方案），然后尝试重建您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:19:16.110

通常，您需要按照调用它们的顺序放置标识符（即函数定义）：如果您调用某物，则需要首先定义该物。在这种情况下，基本上把你的程序颠倒过来会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T10:20:25.277

在 main() 之前复制所有函数，或者通常总是在 .h 文件中声明函数并在 .cpp 文件中定义它。

# ms-access - 为什么 DLookup 返回 Empty？

> ID：11449707
> 
> 赞同：0
> 
> 时间：2012-07-12T10:16:27.190
> 
> 标签：ms-access, vba, ms-access-2007

我有从中检索数据的文本框。它们具有数字数据类型和双倍字段大小，并且格式是固定的。

```
Summ = DLookup("Summ", "tblPlatej", "ID= " & Form_frmPlatej!ID)
Deposit = DLookup("Deposit_before", "tblPlatej", "ID= " & Form_frmPlatej!ID) 
```

第一个返回真值，第二个总是空的。为什么会发生这种情况？有人能把我引向正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:37:31.730

问题出在列名中。正好在单词 [Deposit before] 之间的空格中。

```
Summ = DLookup("Summ", "tblPlatej", "ID= " & Form_frmPlatej!ID)
Deposit = DLookup("Depositbefore", "tblPlatej", "ID= " & Form_frmPlatej!ID) 
```

这很奇怪，但现在可以了。

# php - simple_html_dom.php 解析器不工作

> ID：11449708
> 
> 赞同：0
> 
> 时间：2012-07-12T10:16:29.113
> 
> 标签：php, simple-html-dom, dom

我下载了 simple_html_dom.php 文件并将其上传到我的网络服务器，然后我立即用一个简单的脚本对其进行了测试，但它不起作用，或者至少我认为它不起作用，因为它不输出任何内容。

这是脚本：

```
<?php
require('simple_html_dom.php');

// Retrieve the DOM from a given URL
$html = file_get_html('http://davidwalsh.name/');

// Find all "A" tags and print their HREFs
foreach($html->find('a') as $e) {
    echo $e->innertext . '<br>';
}
?> 
```

我从这个网站[http://davidwalsh.name/php-notifications](http://davidwalsh.name/php-notifications)得到了脚本，并且在其他网站上也有同样的内容，所以我不明白为什么它不会输出任何东西。

我的猜测是脚本无法从其他网站检索任何数据，就像我在这里遇到的问题：[检索跨域数据 php](https://stackoverflow.com/questions/11281904/retrieving-cross-domain-data-php)。

如果是这样，有什么办法可以避免这个问题吗？

在 BIno Carlos 对我之前链接的问题的回答中，他说“这不是真正的跨域问题，因为您是从服务器而不是浏览器加载数据”，所以是否有例如从浏览器加载数据的方法?

因此，正如 user868766 在他的回答中所建议的那样，我尝试了两种没有报告任何错误的 ini_set 方法，所以看起来脚本显然工作得很好。当我在 $html 上尝试 print_r() 方法时，它输出以下内容：

```
simple_html_dom Object ( [root] => simple_html_dom_node Object ( [nodetype] => 5 [tag] => root [attr] => Array ( ) [children] => Array ( ) [nodes] => Array ( ) [parent] => [_] => Array ( [0] => -1 [1] => 1 ) [dom:simple_html_dom_node:private] => simple_html_dom Object *RECURSION* ) [nodes] => Array ( [0] => simple_html_dom_node Object ( [nodetype] => 5 [tag] => root [attr] => Array ( ) [children] => Array ( ) [nodes] => Array ( ) [parent] => [_] => Array ( [0] => -1 [1] => 1 ) [dom:simple_html_dom_node:private] => simple_html_dom Object *RECURSION* ) ) [callback] => [lowercase] => 1 [pos:protected] => 0 [char:protected] => [size:protected] => 0 [cursor:protected] => 1 [parent:protected] => simple_html_dom_node Object ( [nodetype] => 5 [tag] => root [attr] => Array ( ) [children] => Array ( ) [nodes] => Array ( ) [parent] => [_] => Array ( [0] => -1 [1] => 1 ) [dom:simple_html_dom_node:private] => simple_html_dom Object *RECURSION* ) [token_blank:protected] => [token_equal:protected] => =/> [token_slash:protected] => /> [token_attr:protected] => > [self_closing_tags:protected] => Array ( [img] => 1 [br] => 1 [input] => 1 [meta] => 1 [link] => 1 [hr] => 1 [base] => 1 [embed] => 1 [spacer] => 1 ) [block_tags:protected] => Array ( [root] => 1 [body] => 1 [form] => 1 [div] => 1 [span] => 1 [table] => 1 ) [optional_closing_tags:protected] => Array ( [tr] => Array ( [tr] => 1 [td] => 1 [th] => 1 ) [th] => Array ( [th] => 1 ) [td] => Array ( [td] => 1 ) [li] => Array ( [li] => 1 ) [dt] => Array ( [dt] => 1 [dd] => 1 ) [dd] => Array ( [dd] => 1 [dt] => 1 ) [dl] => Array ( [dd] => 1 [dt] => 1 ) [p] => Array ( [p] => 1 ) [nobr] => Array ( [nobr] => 1 ) ) [doc:protected] => [noise:protected] => Array ( ) ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:41:22.717

您发布的代码对我来说很好用。

认为您可以尝试这些，将以下几行放在脚本顶部：

```
 ini_set('error_reporting', E_ALL);
    ini_set('display_errors', 1); 
```

还要检查 $html 的 print_r

```
 print_r($html); 
```

希望这有帮助。

# javascript - 使 Highcharts.js 图表在移动和桌面上看起来不错

> ID：11449710
> 
> 赞同：15
> 
> 时间：2012-07-12T10:16:30.113
> 
> 标签：javascript, jquery, svg, highcharts, responsive-design

我想知道是否有人成功地使用 Highcharts 实现了响应式设计，以使他们的图表在移动和桌面上看起来都很好。

默认情况下，当您调整浏览器屏幕的大小时，Highcharts 会重新缩放，只是 X 轴被刻度标记文本弄乱了，条形图看起来又高又瘦（太压缩）。要了解我的意思，您可以转到[此页面](http://www.highcharts.com/demo/column-basic)并调整浏览器的大小。

我认为这些问题可以通过将数据点的数量减少到原始数量的 1/3 来解决，尽管我想知道如何使用 Highcharts 的 API 以编程方式完成。如果这听起来不是一个好主意，我也对人们可能提出的其他想法或解决方案感兴趣，以便在移动设备上使用 Highcharts（或者甚至可能更容易实现多设备解决方案的不同 JS 图表库） ？）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-03T16:43:41.760

解决方案似乎相当简单。

只是不要给图表一个固定的宽度，即不要定义宽度或设置`width:100%`，并且与我提到的演示不同，条形图宽度和伴随的条形将随着浏览器宽度的减小而缩小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T19:39:49.467

这可能取决于您显示的图表类型。在移动设备上，如果您要显示柱形图，您可能需要旋转图表以使其变为条形图。

如果您要显示折线图，则可以“确定”数据范围，以便仅显示获得该点所需的最少点数。放大时，重新调整数据范围以适合当前视图。这可以使用一些事件结合一些手卷js来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-09T07:36:21.833

您可以设置图表容器 div `width:100%`。然后只需删除 highchart 宽度属性。我为迷你图解决了这个问题。现在它是移动响应的。

```
Highcharts.chart('my-sparkline-chart, {
        chart: {
            type: 'areaspline',
            height: '70',
            //width: '189', //comment width property.
            spacing: [0, 0, 0, 0],
            backgroundColor: "transparent"
        }
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-11T17:58:59.580

带引导程序的示例

```
 <!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Highcharts data from JSON Response</title>
        <style>
        body{
            margin-top: 30px;
            margin-left:40px;
        }
        .col-md-4{
        padding-left:5px !important;
        padding-right:5px !important;
        }
        </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 
    <script src="http://code.highcharts.com/highcharts.js"></script>    
<script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script type="text/javascript">
       // Data gathered from http://populationpyramid.net/germany/2015/

// Age categories
var categories = ['0-4', '5-9', '10-14', '15-19',
        '20-24', '25-29', '30-34', '35-39', '40-44',
        '45-49', '50-54', '55-59', '60-64', '65-69',
        '70-74', '75-79', '80-84', '85-89', '90-94',
        '95-99', '100 + '];
$(document).ready(function () {
    Highcharts.chart('container', {
        chart: {
            type: 'bar'
        },

        xAxis: [{
            categories: categories,
            reversed: false,
            labels: {
                step: 1
            }
        }, { // mirror axis on right side
            opposite: true,
            reversed: false,
            categories: categories,
            linkedTo: 0,
            labels: {
                step: 1
            }
        }],
        yAxis: {
            title: {
                text: null
            },
            labels: {
                formatter: function () {
                    return Math.abs(this.value) + '%';
                }
            }
        },

        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },

        tooltip: {
            formatter: function () {
                return '<b>' + this.series.name + ', age ' + this.point.category + '</b><br/>' +
                    'Population: ' + Highcharts.numberFormat(Math.abs(this.point.y), 0);
            }
        },

        series: [{
            name: 'Male',
            data: [-2.2, -2.2, -2.3, -2.5, -2.7, -3.1, -3.2,
                -3.0, -3.2, -4.3, -4.4, -3.6, -3.1, -2.4,
                -2.5, -2.3, -1.2, -0.6, -0.2, -0.0, -0.0]
        }, {
            name: 'Female',
            data: [2.1, 2.0, 2.2, 2.4, 2.6, 3.0, 3.1, 2.9,
                3.1, 4.1, 4.3, 3.6, 3.4, 2.6, 2.9, 2.9,
                1.8, 1.2, 0.6, 0.1, 0.0]
        }]
    });
     Highcharts.chart('container2', {
        chart: {
            type: 'bar'
        },
        title: {
            text: 'Population pyramid for Germany, 2015'
        },
        subtitle: {
            text: 'Source: <a href="http://populationpyramid.net/germany/2015/">Population Pyramids of the World from 1950 to 2100</a>'
        },
        xAxis: [{
            categories: categories,
            reversed: false,
            labels: {
                step: 1
            }
        }, { // mirror axis on right side
            opposite: true,
            reversed: false,
            categories: categories,
            linkedTo: 0,
            labels: {
                step: 1
            }
        }],
        yAxis: {
            title: {
                text: null
            },
            labels: {
                formatter: function () {
                    return Math.abs(this.value) + '%';
                }
            }
        },

        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },

        tooltip: {
            formatter: function () {
                return '<b>' + this.series.name + ', age ' + this.point.category + '</b><br/>' +
                    'Population: ' + Highcharts.numberFormat(Math.abs(this.point.y), 0);
            }
        },

        series: [{
            name: 'Male',
            data: [-2.2, -2.2, -2.3, -2.5, -2.7, -3.1, -3.2,
                -3.0, -3.2, -4.3, -4.4, -3.6, -3.1, -2.4,
                -2.5, -2.3, -1.2, -0.6, -0.2, -0.0, -0.0]
        }, {
            name: 'Female',
            data: [2.1, 2.0, 2.2, 2.4, 2.6, 3.0, 3.1, 2.9,
                3.1, 4.1, 4.3, 3.6, 3.4, 2.6, 2.9, 2.9,
                1.8, 1.2, 0.6, 0.1, 0.0]
        }]
    });
     Highcharts.chart('container3', {
        chart: {
            type: 'bar'
        },
        title: {
            text: 'Population pyramid for Germany, 2015'
        },
        subtitle: {
            text: 'Source: <a href="http://populationpyramid.net/germany/2015/">Population Pyramids of the World from 1950 to 2100</a>'
        },
        xAxis: [{
            categories: categories,
            reversed: false,
            labels: {
                step: 1
            }
        }, { // mirror axis on right side
            opposite: true,
            reversed: false,
            categories: categories,
            linkedTo: 0,
            labels: {
                step: 1
            }
        }],
        yAxis: {
            title: {
                text: null
            },
            labels: {
                formatter: function () {
                    return Math.abs(this.value) + '%';
                }
            }
        },

        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },

        tooltip: {
            formatter: function () {
                return '<b>' + this.series.name + ', age ' + this.point.category + '</b><br/>' +
                    'Population: ' + Highcharts.numberFormat(Math.abs(this.point.y), 0);
            }
        },

        series: [{
            name: 'Male',
            data: [-2.2, -2.2, -2.3, -2.5, -2.7, -3.1, -3.2,
                -3.0, -3.2, -4.3, -4.4, -3.6, -3.1, -2.4,
                -2.5, -2.3, -1.2, -0.6, -0.2, -0.0, -0.0]
        }, {
            name: 'Female',
            data: [2.1, 2.0, 2.2, 2.4, 2.6, 3.0, 3.1, 2.9,
                3.1, 4.1, 4.3, 3.6, 3.4, 2.6, 2.9, 2.9,
                1.8, 1.2, 0.6, 0.1, 0.0]
        }]
    });
})

    </script>
</head>
<body>
<div class="col-md-12 row">
<div class="col-md-4">
hello
</div>
  <div class="col-md-8 row">
  <div class="col-md-4"><div id="container" style="height: 400px;border:1px solid;"></div></div> <div class="col-md-4"><div id="container2" style="height: 400px;border:1px solid;"></div></div> 
  <div class="col-md-4"><div id="container3" style="height: 400px;border:1px solid;"></div></div>
  </div>
  </div>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-29T05:07:03.067

尝试将其添加到`<head></head>`

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head> 
```

# javascript - 在 MVC 3 中生成淘汰标记

> ID：11449711
> 
> 赞同：2
> 
> 时间：2012-07-12T10:16:32.367
> 
> 标签：javascript, asp.net, asp.net-mvc-3, knockout.js

我们目前正在为我们的 MVC 客户端编写一个新的基础架构，我们正在努力做到这一点，这样开发人员就不需要太多的 Javascript（当前的开发池主要是基于桌面的）

到目前为止，我为我们的剔除脚本所做的是创建一个扩展方法，该方法基本上使用反射基于模型生成所有剔除内容。这对于没有计算值的简单模型非常有效，而且效果很好。

例如，假设我们有这门课

```
public class AppViewModel
  {
     public string FirstName {get; set;}
     public string LastName {get; set;}
  } 
```

将生成以下内容并将其添加到视图中

```
 function AppViewModel() {
    this.firstName = ko.observable('Bob');
    this.lastName = ko.observable('Smith');
   } 
```

我真正喜欢做的是支持模型中的计算值..但我只是想不出一种方法来做到这一点

所以

```
 public FullName()
{
return this.FirstName + " " + this.LastNAme
} 
```

会产生类似的东西

```
 this.fullName = ko.computed(function() {
        return this.firstName() + " " + this.lastName();
    }, this); 
```

所以只是为了说清楚 - 我想做的是根据我的模型生成计算值。

谢谢你的帮助

干杯。圣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:22:33.800

也许它会帮助[http://knockoutmvc.com/](http://knockoutmvc.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T11:46:19.613

除了上面提到的 Pavel 之外，还有一个很好的示例将您的场景显示为“T”：

[http://knockoutmvc.com/HelloWorld](http://knockoutmvc.com/HelloWorld)

这是页面的转录：

**模型：**

```
public class HelloWorldModel
{
  public string FirstName { get; set; }
  public string LastName { get; set; }

  public Expression<Func<string>> FullName()
  {
    return () => FirstName + " " + LastName;
  }
} 
```

**剃刀：**

```
@using PerpetuumSoft.Knockout
@model KnockoutMvcDemo.Models.HelloWorldModel           
@{
  var ko = Html.CreateKnockoutContext();
}
<p>First name: @ko.Html.TextBox(m => m.FirstName)</p>
<p>Last name: @ko.Html.TextBox(m => m.LastName)</p>
<h2>Hello, @ko.Html.Span(m => m.FullName())!</h2>

@ko.Apply(Model) 
```

**控制器：**

```
public class HelloWorldController : BaseController
{
  public ActionResult Index()
  {
    InitializeViewBag("Hello world");
    return View(new HelloWorldModel
    {
      FirstName = "Steve",
      LastName = "Sanderson"
    });
  }
} 
```

**自动生成的 HTML：**

```
<p>
    First name:
    <input data-bind="value : FirstName" /></p>
<p>
    Last name:
    <input data-bind="value : LastName" /></p>
<h2>
    Hello, <span data-bind="text : FullName"></span>!</h2>

<script type="text/javascript">
    var viewModelJs = { "FirstName": "Steve", "LastName": "Sanderson" };
    var viewModel = ko.mapping.fromJS(viewModelJs);
    viewModel.FullName = ko.computed(function () {
        try {
            return this.FirstName() + ' ' + this.LastName();
        } 
        catch (e) { return null; };
    }, viewModel);
    ko.applyBindings(viewModel);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:28:26.767

试试knockout JS官方例子： http: [//knockoutjs.com/examples/](http://knockoutjs.com/examples/)

淘汰赛 JS 教程：[http ://learn.knockoutjs.com/](http://learn.knockoutjs.com/)

以上链接将帮助您学习淘汰赛 JS。

谢谢，-纳伦

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:51:29.163

看看脚本#

[http://projects.nikhilk.net/ScriptSharp/](http://projects.nikhilk.net/ScriptSharp/)

# php - Assigning multiple classes to a tag using PHPTAL

> ID：11449716
> 
> 赞同：1
> 
> 时间：2012-07-12T10:16:44.573
> 
> 标签：php, templates, template-tal, phptal

I have an array of data I want to output as a UL using PHPTAL (easy) with class attributes supplied by the array (easy), a class attribute for first and for the last element (easy)... all at the same time (hard).

Ie. I want to combine:

```
<ul tal:repeat="item items">
    <li class="${item/class}">${item/text}</li>
</ul> 
```

with this

```
<ul tal:repeat="item items">
    <li tal:attributes="class repeat/item/first 'first'">${item/text}</li>
</ul> 
```

and this

```
<ul tal:repeat="item items">
    <li tal:attributes="class repeat/item/last 'last'">${item/text}</li>
</ul> 
```

This is purely presentational stuff, so I'd rather do it purely in PHPTAL. Is this possible? How?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:02:40.747

不，这没有纯粹的故事。

```
<li tal:attributes="class php:repeat.item.last ? 'last' 
                          : (repeat.item.first ? 'first' : NULL)"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-18T17:22:08.817

这是一个相当古老的线程，但因为没有人提到它：“更清洁”的方式可能是通过自定义修饰符。（[http://phptal.org/manual/en/split/custom-modifiers.html](http://phptal.org/manual/en/split/custom-modifiers.html)）。然后你可以有：

```
<li tal:attributes="class css-ordinal:repeat.item"> 
```

作为一个好处，您可以在其他元素中重用它，因为这似乎是一个非常普遍的习语。

# hadoop - How to config and use multi master nodes in a Hadoop cluster?

> ID：11449719
> 
> 赞同：1
> 
> 时间：2012-07-12T10:16:53.060
> 
> 标签：hadoop

Could anyone please tell us how to config and use multi master nodes in a Hadoop cluster?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:25:35.790

如果您正在寻找多个 NameNode，请检查[HDFS 高可用性](http://www.cloudera.com/blog/2012/03/high-availability-for-the-hadoop-distributed-file-system-hdfs/)和[HDFS 联合](http://hortonworks.com/blog/an-introduction-to-hdfs-federation/)。两者都应该在[2x Hadoop 版本](http://hadoop.apache.org/common/releases.html)中可用。

JobTracker 中的 1x Hadoop 版本中多了一个 master，集群中只能有一个 JobTracker。顺便说一句，JobTracker 功能已在 2x Hadoop 版本中拆分。检查[此](http://www.cloudera.com/blog/2012/02/mapreduce-2-0-in-hadoop-0-23/)以获取更多详细信息。

可能还有其他一些替代选项，但取决于拥有多个主控的要求。是可用性、可扩展性还是其他？

# tableview - javafx 2 TableView. Convert x,y into row and col indexes

> ID：11449721
> 
> 赞同：1
> 
> 时间：2012-07-12T10:16:59.213
> 
> 标签：tableview, javafx-2

I want to display in a Tooltip some row-specific information when the user moves the mouse over a table row. I need a way to convert x,y coordinates into row (and col) indexes.

# android - android dispatchTouchEvent get tapped view

> ID：11449723
> 
> 赞同：6
> 
> 时间：2012-07-12T10:17:02.980
> 
> 标签：android, events

I call this function in my activity :

```
@Override
public boolean dispatchTouchEvent(MotionEvent touchEvent) 
```

That allows me to process action before any components get focused or even deny the focus to these elements.

**PROBLEM** : I was wondering how I could know what component (View) has been touched in this function, then I could choose if I want to consumme the event or not.

**UGLY SOLUTION** : I'm currently having an ugly solution which is : I know the position of the component that is allowed to get the event, and I do a plenty of condition to approximately decide if the user clicked on this component.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:24:01.457

您可能想使用`OnTouchListener`

```
private OnTouchListener mOnTouchListener= new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {

          switch(v.getId()){

              case R.id.id1): 
              // Do stuff
              break;

              case R.id.id2: 
              // Do stuff
              break;
              }    

        return false/true;
    }
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T11:49:06.263

view.getid==R.id.//布局中的id//条件可以检查需要的视图被点击

# payment - Authorize.net 非美国客户的信用卡支付

> ID：11449725
> 
> 赞同：0
> 
> 时间：2012-07-12T10:17:08.687
> 
> 标签：payment, authorize.net, payment-processing

我有一个网站，可以让我们的客户在上面发布一些添加内容。添加首先由添加编辑器在内部接收和检查。然后，我们要求客户付款，当收到付款时，添加被发布。

我的目标是让我们的客户可以用他们的信用卡付款。例如，通过电子邮件向他们发送带有链接（或按钮）的发票到他们可以介绍他们的信用卡号等的网页。

该公司位于瑞士和我们的银行。

我实际上阅读了很多关于 Authorize.net 的内容，但显然，我们应该在美国有一家银行吗？我们的客户遍布全球，这可能是一个问题和额外费用的原因。

我们可以通过电子邮件轻松发送带有信用卡付款链接的发票吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:45:48.437

> 我实际上阅读了很多关于 Authorize.net 的信息，但显然，我们应该在美国有一家银行吗？我们的客户遍布全球，这可能是一个问题和额外费用的原因。

Authorize.Net 目前仅在美国可用，因此您必须拥有美国商家帐户才能使用他们的服务。

> 我们可以通过电子邮件轻松发送带有信用卡付款链接的发票吗？

是的。

# scala - akka actor testing using play

> ID：11449726
> 
> 赞同：4
> 
> 时间：2012-07-12T10:17:09.217
> 
> 标签：scala, playframework, akka

I want to test my akka actor. Is it possible to test every case of receive function?

```
def receive = {

  case msg: String =>
    println("SUCCESS" + msg)

  case user: VerifyIfUserExistActor =>
    implicit val timeout = Timeout(30 seconds)
    val future = platActor ? user
    val result = Await.result(future, timeout.duration).asInstanceOf[Users]
    sender ! result

  case ottDetails: OttDetails =>
    println("SUCCESS" + ottDetails)

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:59:23.417

是的，如果您想测试您是否发送了成功的消息并且只想查看您的参与者系统是否正常工作。您可以使用

```
case _ => println("sending message success") 
```

# macos - Keyboard mapping for chorded keyboard

> ID：11449731
> 
> 赞同：2
> 
> 时间：2012-07-12T10:17:30.417
> 
> 标签：macos, keyboard, driver, keymapping

I want to create a new keymapping on macosx, so I can create advanced multi-key commands. Basically, I want to create a a keymapping for transforming a normal keyboard into a chorded keyboard, optimized for writing code in c-like languages.

What I am wondering, is it possible to create that general keymaps, or is it possible to create a layer in the OS, intercepting the keyboard input at a low level and implementing the transform there.

If not, does anybody know where I can find sourcecode for a driver for a general HID-keyboard, that I can use as a base for a keyboard driver doing this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:04:10.037

我认为这是您要开始的地方： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingKeyEvents/HandlingKeyEvents.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingKeyEvents/HandlingKeyEvents.html)

实际上我有兴趣尝试同样的事情，我真的不喜欢我看到的大多数和弦键盘，并且更喜欢在不构建硬件的情况下进行原型设计。

# ios - 在ARC下，使用ARC后不断获取EXC_BAD_ACCESS，是因为使用了Block？

> ID：11449734
> 
> 赞同：0
> 
> 时间：2012-07-12T10:17:39.990
> 
> 标签：ios, objective-c-blocks

问题：我不断收到 EXC_BAD_ACCESS。在我打开 NSZombieEnabled 之后，我看到了这个 [FeatureCommentListViewController respondsToSelector:]: message sent to deallocated instance 0x7c1dc30

1.  在我把项目改成ARC之前没有这个错误，但是我改成ARC之后就出现了这个错误。

2.  我在 Block 中声明了一个 ViewController 并将其推送到导航控制器中。这个原因会导致它的寿命更短吗？

    UIBlockButton 来自[这篇文章](https://stackoverflow.com/questions/11449194/how-to-make-uiblockbutton-suit-with-arc/11449394#11449394)

    ```
    UIBlockButton *lbGood3 = [[UIBlockButton alloc] initWithFrame:CGRectMake(0, 0, First_Button_Width, [self getGoodRow2Height:productDetail]) ];
    [lbGood3 handleControlEvent:UIControlEventTouchUpInside withBlock:^ { 
    NSLog(@"%@", Label.text); 

    ProductDetail *productDetail = [productDetailDict objectForKey:@"product"];
    NSString *dp_id = [NSString stringWithFormat:@"%@-%@",productDetail.url_crc,productDetail.site_id];

    FeatureCommentListViewController *cmtListController = [[FeatureCommentListViewController alloc] initWithNibName:@"FeatureCommentListViewController" bundle:nil];
    cmtListController.title = Label.text;
    cmtListController.isReviewed=isReviewed;
    cmtListController.productDetail=productDetail;
    cmtListController.dp_id=dp_id;
    cmtListController.feature_name = @"&feature_good_id=2";

    [self.navigationController pushViewController:cmtListController animated:YES];

    }]; 
    ```

我应该将控制器声明为这个 viewController 的成员还是只声明出块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:00:58.347

我通过在 viewDidLoad 函数中分配 FeatureCommentListViewController 并在块中使用它来解决这个问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-12T15:15:11.360

**第一个**。我想知道为什么要将视图控制器推送到块中而不是主线程中？对触摸动作做出快速响应不是很重要吗？

**第二**。`[self.navigationController pushViewController:cmtListController animated:YES];`在你的街区。每当你离开当前`navigationController`将`self.navigationController`代表什么？

**第三**。如果您声明`viewController`块外，您可以`__block`按照 Hermann Klecker 的说明在其前面添加。

# javascript - Get row data in extjs on cell edit

> ID：11449738
> 
> 赞同：3
> 
> 时间：2012-07-12T10:17:46.117
> 
> 标签：javascript, extjs

I am creating a Extjs grid. In which most of the column is editable. what i need is if user change any column value on blur of that i will call my method do some calculation based on other column value.and replace the column value with calculated values.code is here.

```
var incomeTaxOverrideModel = new Ext.grid.ColumnModel([{
    id : 'fromDate',
    header : "From Date",
    dataIndex : 'fromDate',
    width : 80,
    renderer : drenderer,
    editor : this.fromDateEditor
}, {
    id : 'toDate',
    header : "To Date",
    dataIndex : 'toDate',
    width : 80,
    renderer : drenderer,
    editor : this.toDateEditor
}, {
    id : 'rawTax',
    header : "Raw Tax",
    dataIndex : 'rawTax',
    width : 80,
    align : 'right',
    selectOnFocus : true,
    editor : new Ext.form.NumberField({"blur":this.calculateTaxForword}),
    renderer : Gts.payItemRenderer()
}, {
    id : 'surcharge',
    header : "Surcharge",
    dataIndex : 'surcharge',
    width : 80,
    align : 'right',
    selectOnFocus : true,
    editor : new Ext.form.NumberField({}),
    renderer : Gts.payItemRenderer()
}, {
    id : 'cess',
    header : "Cess",
    dataIndex : 'cess',
    width : 80,
    align : 'right',
    selectOnFocus : true,
    editor : new Ext.form.NumberField({}),
    renderer : Gts.payItemRenderer()
}, {
    id : 'totalTax',
    header : "Total Tax",
    dataIndex : 'totalTax',
    width : 80,
    align : 'right',
    selectOnFocus : true,
    editor : new Ext.form.NumberField({}),
    renderer : Gts.payItemRenderer()
}, {
    id : 'taxAmount',
    header : "Taxable Income",
    dataIndex : 'taxAmount',
    width : 100,
    align : 'right',
    selectOnFocus : true,
    editor : new Ext.form.NumberField({}),
    renderer : Gts.payItemRenderer()
}, {
    id : 'remarks',
    header : "Remarks",
    dataIndex : 'remarks',
    width : 250,
    editor : new Ext.form.TextField({})
}, {
    id : 'modifiedDate',
    header : "Modified On",
    dataIndex : 'modifiedDate',
    width : 100,
    renderer : Ext.util.Format.dateRenderer('d M Y h:i:s A'),
    width : 150
}

]);

this.itoGrid = new Ext.grid.EditorGridPanel({
    store : this.itoStore,
    cm : incomeTaxOverrideModel,
    autoExpandColumn : 'remarks',
    autoScroll : true,
    containerScroll : true,
    frame : false,
    stripeRows : true,
    width : 830,
    height : 233,
    clicksToEdit : 1,
    layout : 'fit',
    loadMask : true,
    tbar : [this.addAction, this.deleteAction],
    trackMouseOver : true
}); 
```

i created on method

```
calculateTaxForword :function(){
    console.log(this.itoGrid) 
    //console.log(this.itoGrid.getStore().getModifiedRecords())
} 
```

but its not coming anything.i have to calculate value based on raw tax.surcharge and cess so i need all the value in my method.how to do this any one please help

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T03:38:55.697

该`CellEditing`插件有一个`beforeedit`您可以收听的事件： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing-event-beforeedit](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing-event-beforeedit)

这将使您可以访问以下内容：

```
Parameters
editor : Ext.grid.plugin.CellEditing
e : Object
An edit event with the following properties:

grid - The grid
record - The record being edited
field - The field name being edited
value - The value for the field being edited.
row - The grid table row
column - The grid Column defining the column that is being edited.
rowIdx - The row index that is being edited
colIdx - The column index that is being edited
cancel - Set this to true to cancel the edit or return false from your handler.
eOpts : Object - The options object passed to Ext.util.Observable.addListener. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-17T11:52:42.540

每个列对象都`editingPlugin.activeRecord`具有记录本身的属性。

# c# - How to make a form ShowDialog() itself in C#

> ID：11449745
> 
> 赞同：0
> 
> 时间：2012-07-12T10:18:00.330
> 
> 标签：c#, .net, winforms

How would you make an instance of a form open itself in a `Modal` way?

I tried `this.ShowDialog()` but it doesn't make the form appear modal (you can still access other forms). I guess this is because it is it's own parent form in if it shows itself, but I'm not sure.

My problem:

I have an application made of 2 forms:

1.  `MainForm`
2.  `LoginForm`

`MainForm` creates an instance of and opens `LoginForm` to ask the user to authenticate. `LoginForm` has a timer to regularly check and log the user in - I want this timer to open `LoginForm` modally. I know this could be achieved by putting the timer in `MainForm` but I would like to know how to make a form `ShowDialog()` an instance of itself.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:28:01.977

确保您`ShowDialog`在以下时间致电`InitializeComponent`：

```
public newForm()
{
    InitializeComponent();
    this.ShowDialog();
} 
```

**我的测试**

我创建了一个名为`Form2`：

```
public partial class Form2 : Form
{
    public Form2()
    {
        //this may not call in constractor 
        //InitializeComponent();
    }

    public void ShowModalForm()
    {
        InitializeComponent();
        ShowDialog();
    }
} 
```

并在没有任何父级的情况下在 main 上启动它，它以模态方式启动：

```
static class Program
{
    [STAThread]
    static void Main()
    {
        new Form2().ShowModalForm();
        //Application.Run(new Form1());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:29:24.723

如果表单是顶级窗口（没有父窗口），则表单不会是模态的。另一方面，如果您的表单将有其他表单作为父表单，那么它将以模态方式打开（阻止父表单）`.ShowDialog()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:41:32.937

这是您的选项 -`LoginExpired`在您的`LoginForm`. 在计时器滴答事件处理程序上引发此事件：

```
public partial class LoginForm : Form
{
    public event EventHandler LoginExpired;

    public LoginForm()
    {
        InitializeComponent();
        timer.Start();
    }

    private void timer_Tick(object sender, EventArgs e)
    {
        OnLoginExpired();
    }

    protected virtual void OnLoginExpired()
    {
        if (Visible)
            return; // if this form visible, then user didn't authenticate yet

        if (LoginExpired != null)
            LoginExpired(this, EventArgs.Empty);
    }        
} 
```

`Main`然后在您的方法上订阅此事件：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);

    using (LoginForm loginForm = new LoginForm())
    {
        if (loginForm.ShowDialog() != DialogResult.OK)
            return;

        loginForm.LoginExpired += new EventHandler(loginForm_LoginExpired);
        Application.Run(new MainForm());
    }
}

static void loginForm_LoginExpired(object sender, EventArgs e)
{
    LoginForm loginForm = (LoginForm)sender;
    if (loginForm.ShowDialog() != DialogResult.OK)
        throw new NotAuthenticatedException();
} 
```

# scala - Scala implicit conversion called twice

> ID：11449749
> 
> 赞同：1
> 
> 时间：2012-07-12T10:18:08.480
> 
> 标签：scala, implicit-conversion

I'm trying to instantiate classes from Maps[String, Any], receiving through some json-rpc. So I end up with following problem:

```
val mpa:Map[String, Any] = Map("key"->0.0)

implicit def anyToInt(a:Any):Int = a.asInstanceOf[Double].toInt 
```

When key exists all is OK.

```
val i:Int = mpa.getOrElse("key", 0.0)
i: Int = 0 
```

But when key is missing ...:

```
scala> val i:Int = mpa.getOrElse("val", 0.0)
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Double
at scala.runtime.BoxesRunTime.unboxToDouble(Unknown Source)
at .anyToInt(<console>:13 
```

Now, if we're add some verbosity as:

```
implicit def anyToInt(a:Any):Int = {
  println(a)
  val b = a.asInstanceOf[Double].toInt
  println("converted")
  b
} 
```

We got:

```
val i:Int = mpa.getOrElse("val", 0.0)
0.0
converted
0
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Double
     ..... 
```

So i came to the conclusion that anyToInt is called twice. And the second time it received Int as Any.

Questions:

1.  Why ?!

2.  What should I do to avoid this ?

P.S.: Sorry if it's newbie question. I'm new in scala.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:37:53.267

隐藏直接转换，尤其`Any`是在您的情况下，这是一个非常糟糕的主意，您已经发现了原因。我建议您只需将输入映射转换为`Map[String, Int]`. 您在这里不需要隐式，但如果您仍然想使用隐式，您应该使用包装器方法：

```
implicit def anyExtender (x: Any) = new {
  def toInt = x match {
    case x: Double => x.toInt
  }
} 
```

并像这样使用它：

```
mpa.getOrElse("val", 0.0).toInt 
```

自 scala 2.10 以来，首选隐式包装器的以下实现：

```
implicit class AnyExtender (x: Any) {
  def toInt = x match {
    case x: Double => x.toInt
  }
} 
```

此外，由于您的转换函数不适用于`Any`它的所有子类型，使用这样的函数进行扩展是不正确的，`Any`使用这样的函数进行扩展是正确的，`Double`但它已经有了它。因此，在您的场景中，使用地图的唯一正确方法如下：

```
map.getOrElse("val", 0.0).asInstanceOf[Double].toInt 
```

# 更新

`Map[String, Int]`如果您像这样移动要放置在隐式中的逻辑，则转换为将为您工作：

```
val resultMapOfStringToIntType = 
  inputMapOfStringToAnyType.mapValues {
    case x: Double => x.toInt
    case x: String => x.toInt
    case x: Timestamp => //...
    // and so on
  } 
```

# ruby-on-rails-3 - 如何获取深度嵌套的错误以访问我的 REST API？

> ID：11449755
> 
> 赞同：0
> 
> 时间：2012-07-12T10:18:44.870
> 
> 标签：ruby-on-rails-3, validation, rest

**首先，一些背景：**

我有一个`Company`模型，一个`Project`模型和一个`Task`模型。一个项目属于一个公司，一个任务属于一个项目。

该`Project`模型具有几个属性：`company_id, date`. **这些属性唯一标识一个项目**

我让用户通过发布到包含识别项目所需详细信息的 URL 来通过 API 创建任务。例如：

```
POST /projects/<comnpany_name>/<date>/tasks/ 
```

为了让用户的生活更轻松，如果没有具有给定详细信息的项目，我想通过给定的详细信息动态创建项目，然后创建任务并将其分配给项目。

**...我的问题是：**

当创建项目出现问题时，假设公司名称无效，返回错误信息并与用户沟通的正确方法是什么？

我将解释我的意思：我添加了一个`create_by_name_and_company_name`方法`Project`：

```
 def self.create_by_name_and_company_name(name, company_name)
    if company = Company.find_by_name(company_name)
      project = Project.create(company_id: company.id,
                               name: name)      
    else # cannot create this project, trying to communicate the error
      project = Project.new(name: name)
      project.errors.add(:company, 'must have a valid name')
    end
    company
  end 
```

我希望通过返回一个未保存的 Company 对象并设置错误，这将是一种传达错误的好方法（这类似于出现验证错误时 rails 的工作方式）。

问题是在调用`valid?`公司对象时，它删除了我在那里写的错误并添加了常规验证错误（在这种情况下，公司不能为空）。

**还有一个额外的问题......**

还有一个概念问题：因为我通过提供用于创建实际属性的参数来创建模型，所以它们并不总是很好地映射到 errors[:attr] 哈希。在这种情况下，它并没有那么糟糕，我使用 company 字段作为`company name`参数，但我想当提供给 create 方法的参数与模型属性不太相似时，这会变得更加混乱。

那么解决这个问题的首选方法是什么？这种方法基本上有问题吗？如果是这样，首选方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:08:45.937

关于覆盖默认的 rails 验证错误消息，您需要像这样编写验证约束：

```
validates_presence_of :name, :message => "must be a valid name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:08:46.843

我认为最好避免这种嵌套并坚持使用较浅的 API。

# javascript - Sending Data from HTML to Servlet by two different methods

> ID：11449756
> 
> 赞同：0
> 
> 时间：2012-07-12T10:18:46.143
> 
> 标签：javascript, jquery, html, servlets

I've been sending data from HTML to my servlet like this :

```
<form Action="http://caregap2.appspot.com/src.main.java.org.deri.hcls.caregap2.client" Method="GET">
Username: <input type="text" name="username" size="20" value="@gmail">
<BR>
<input type="submit" VALUE="submit">
<input type="reset" value="reset">
</form> 
```

which sends the variable Username to the servlet. But I don't want to have click submit to send the data, I would like to just post the data and load the servlet without clicking anything. I've tried this :

```
$(document).ready(function() {
var username = "matthewgortnalon@gmail.com";
$.ajax({
      type: "POST",
      url: "http://caregap2.appspot.com/src.main.java.org.deri.hcls.caregap2.client",
      data: { username: "username" }
    }).done(function( msg ) {
     // alert( "Data Saved: " + username );
      window.location = "http://caregap2.appspot.com/src.main.java.org.deri.hcls.caregap2.client?q=" + username;
    });
}); 
```

But it doesn't work, can anyone see what I'm doing wrong?? Or if I should use a different method? Help would be really appreciated!! :)

Here's my servlet method :

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("text/html");{
        ServletOutputStream  out = response.getOutputStream();
        try {
            out.println("<html><head><title>" +  "</title></head>");
            out.println("<body><h1>" +  "</h1>");
            String  name = request.getParameter("username" );
            //String  comment = request.getParameter( "comment" );
            out.println("Name:" + name + "<BR>");
            //out.println("Comment: " + comment + "<BR>");
        }
        catch(Throwable  t ) {
            out.println("<P><pre>");
            t.printStackTrace( new PrintStream(out) );
            out.println ("</pre><P>");
        }
        out.println ("</body></html>");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:41:27.320

您的 JSON 数据错误：

```
data: { "username": username } 
```

首先是键，然后是值（变量）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:55:05.247

好的，我想我知道您要做什么。AJAX 请求不是您想要的。据我了解，您正在尝试加载一个 servlet 并显示它，而根本没有与您的页面进行交互。

您需要做的就是在 javascript 中执行以下操作

```
var username = "you username here";
window.location = "http://caregap2.appspot.com/src.main.java.org.deri.hcls.caregap2.client?username=" + username; 
```

使用 ajax 请求会将 servlet 主体返回到 done 方法，这对于在当前页面上显示信息而无需重新加载很有用。

您当前正在做的是将 servlet 响应正文附加到查询的末尾，并因此重定向到错误的位置。

**额外信息：** 使用 Ajax 的替代方法是让您的 servlet 返回一些 html 但不一定返回完整页面，然后使用此响应填充当前页面的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T10:24:08.653

您的表单似乎正在使用`GET`请求，而您的 ajax 正在执行`POST`请求。您的服务很可能正在寻找`GET`参数。将 ajax 请求更改为使用`GET`而不是`POST`

# c# - 没有外键的NHibernate地图集合？

> ID：11449761
> 
> 赞同：2
> 
> 时间：2012-07-12T10:19:14.713
> 
> 标签：c#, nhibernate

我一直无法找到这个问题的答案。

说你有`ClassA`：

```
public class ClassA {
    public Guid Id { get; set; }
    public IList<ClassB> { get; set; }
} 
```

并`ClassA`嵌套了一组`ClassB`对象：

```
public class ClassB {
    public Guid Id { get; set; }
    public string SomeProperty { get; set;}  
} 
```

有没有办法使用 NHibernate 将这些对象映射到表，生成模式但没有为`ClassB`表创建外键关系？

**更新**

想出解决方案 - 通过代码映射时：

```
Bag<ClassA>(x => x.ClassB, 
            collectionMapping => {
                collectionMapping.Table("ClassB");
                collectionMapping.Cascade(Cascade.All);
                collectionMapping.Key(key => { 
                      key.Column("ClassAId");
                      key.ForeignKey("none");
                 });
                collectionMapping.Lazy(CollectionLazy.NoLazy);
           },
           mapping => mapping.OneToMany(x => {
                 x.Class(typeof(ClassB));
           })
      ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:39:32.623

我认为如果将集合映射设置为`inverse="true"`模式生成工具不会创建 FK。

编辑：正如评论指出的那样（不知道！）使用 xml 映射也许这有效：

```
<many-to-one name="Bar" foreign-key="none" /> 
```

# macros - SAS：宏：子字符串和替换

> ID：11449763
> 
> 赞同：1
> 
> 时间：2012-07-12T10:19:16.890
> 
> 标签：macros, sas, substr

我有两个简单的宏：

```
%macro One(mvStr);
      /*some code here to replace varOne -> stringOne*/     

%mend One;

%macro Two;
    %local mvStr;
    %let mvStr = "String varOne StringvarOneString";
    %One(&mvStr);
%mend Two; 
```

那么，如何用 替换所有子`varOne`字符串`stringOne`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:38:58.630

这应该做你想要的......

```
%macro One(mvStr);
  /*some code here to replace varOne -> stringOne*/     
  %Sysfunc(tranwrd(&mvStr, varOne, StringOne));
%mend One;

%macro Two;
    %local mvStr;
    %let mvStr = "String varOne StringvarOneString";
    %let mvStr = %One(&mvStr);

    %put &mvStr; 
%mend Two;

%two; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:36:45.503

```
Did not know if you have to have two macros, but would the following suffice?

%macro one(mvStr, From, To);
  %local mvStr From To;
  %let &mvStr. = "String &From. String&From.String";
  %put  %Qsysfunc(prxchange(s/&From./&To./,-1,&mvStr.));
  %*put &mvStr.; 
%mend;

options mprint;
%one(mvStr,varOne,StringOne) 
```

# asp.net-mvc-3 - how to register onclick event to @Html.RadioButtonForSelectList in asp.net mvc 3.0

> ID：11449764
> 
> 赞同：0
> 
> 时间：2012-07-12T10:19:20.090
> 
> 标签：asp.net-mvc-3

My Model

```
 public class IndexViewModel
{
    public IEnumerable<SelectListItem> TestRadioList { get; set; }

    [Required(ErrorMessage = "You must select an option for TestRadio")]
    public String TestRadio { get; set; }

    [Required(ErrorMessage = "You must select an option for TestRadio2")]
    public String TestRadio2 { get; set; }
}

public class aTest
{
    public Int32 ID { get; set; }
    public String Name { get; set; }
} 
```

My Controller

```
 public ActionResult Index()
    {
        List<aTest> list = new List<aTest>();
        list.Add(new aTest() { ID = 1, Name = "Yes" });
        list.Add(new aTest() { ID = 2, Name = "No" });
        list.Add(new aTest() { ID = 3, Name = "Not applicable" });
        list.Add(new aTest() { ID = 3, Name = "Muttu" });
        SelectList sl = new SelectList(list, "ID", "Name");
        var model = new IndexViewModel();
        model.TestRadioList = sl;
        return View(model);
    } 
```

My View

```
@using (Html.BeginForm()) {
 <div>
    @Html.RadioButtonForSelectList(m => m.TestRadio, Model.TestRadioList)
</div> 
```

}

Helper method

```
public static class HtmlExtensions
{
    public static MvcHtmlString RadioButtonForSelectList<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, TProperty>> expression,
        IEnumerable<SelectListItem> listOfValues)
    {
        var metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
        var sb = new StringBuilder();

        if (listOfValues != null)
        {
            // Create a radio button for each item in the list
            foreach (SelectListItem item in listOfValues)
            {
                // Generate an id to be given to the radio button field
                var id = string.Format("{0}_{1}", metaData.PropertyName, item.Value);

                // Create and populate a radio button using the existing html helpers
                var label = htmlHelper.Label(id, HttpUtility.HtmlEncode(item.Text));
                var radio = htmlHelper.RadioButtonFor(expression, item.Value, new { id = id }).ToHtmlString();

                // Create the html string that will be returned to the client
                // e.g. <input data-val="true" data-val-required="You must select an option" id="TestRadio_1" name="TestRadio" type="radio" value="1" /><label for="TestRadio_1">Line1</label>
                sb.AppendFormat("<div class=\"RadioButton\">{0}{1}</div>", radio, label);
            }
        }

        return MvcHtmlString.Create(sb.ToString());
    }
} 
```

Here is the code i'm using... not sure how to give a onclick event for the control. In the helper method i could not find any appropriate htmlattributes parameter. as per my requirement. on click of any radiobutton in the list i need to call a js function with few parameters. which i'm not able to do. Someonce please help. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:57:29.087

目前我还没有办法对此进行测试，但一个粗略的想法是将 IDictionary htmlAttributes 添加到方法中并将其传递到那里。如果视图中没有所需的 onClick 代码，则可以省略参数并在扩展方法中执行

```
 public static class HtmlExtensions
    {
        public static MvcHtmlString RadioButtonForSelectList<TModel, TProperty>(
            this HtmlHelper<TModel> htmlHelper,
            Expression<Func<TModel, TProperty>> expression,
            IEnumerable<SelectListItem> listOfValues,
            IDictionary<string, Object> htmlAttributes)
        {
            var metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
            var sb = new StringBuilder();

            if (listOfValues != null)
            {
                // Create a radio button for each item in the list
                foreach (SelectListItem item in listOfValues)
                {
                    // Generate an id to be given to the radio button field
                    var id = string.Format("{0}_{1}", metaData.PropertyName, item.Value);

                    // Create and populate a radio button using the existing html helpers
                    var label = htmlHelper.Label(id, HttpUtility.HtmlEncode(item.Text));

                    htmlAttributes["id"] = id;
                    var radio = htmlHelper.RadioButtonFor(expression, item.Value, htmlAttributes).ToHtmlString();

                    // Create the html string that will be returned to the client
                    // e.g. <input data-val="true" data-val-required="You must select an option" id="TestRadio_1" name="TestRadio" type="radio" value="1" /><label for="TestRadio_1">Line1</label>
                    sb.AppendFormat("<div class=\"RadioButton\">{0}{1}</div>", radio, label);
                }
            }

            return MvcHtmlString.Create(sb.ToString());
        }
    } 
```

然后使用以下方式调用它：

```
@Html.RadioButtonForSelectList(m => m.TestRadio, Model.TestRadioList, new { onclick="someFunction();" }) 
```

或者，您可以设置一个 css 类并绑定到 click 事件。例如，

```
<script type="text/javascript>
    $('.someClassName').click( function() {
    alert('clicked');
});
</script>

@Html.RadioButtonForSelectList(m => m.TestRadio, Model.TestRadioList, new { @class="someClassName" }) 
```

# c# - 如何比较两个 X509Certificate2 c#

> ID：11449767
> 
> 赞同：9
> 
> 时间：2012-07-12T10:19:26.190
> 
> 标签：c#, .net, winforms

如何比较两个 X509Certificate2 对象？

我需要找出两个证书是否相同。这是出于用户身份验证的目的，我需要确定两个证书是否属于同一个人。

我可以使用它的序列号或指纹属性吗？还是有其他方法？

我也是新手，想知道使用 X509Certificate 进行用户身份验证是否安全？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T10:24:50.357

**指纹**是证书的唯一值，通常用于在证书存储中查找特定证书。[更多的...](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx)

**序列号**是证书颁发者颁发的唯一编号。[更多的...](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.serialNumber.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-26T06:30:53.843

正如@Rattle 指出的那样：

> 出于安全目的比较证书时，不应使用 Equals 方法。而是使用**RawData**属性或 **Thumbprint**属性的哈希值。

* * *

晚会（最近需要自己比较两个 X509 证书）。

[X509Certificate](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509certificate)类有一个[Equals()](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509certificate.equals)方法：

> 如果两个对象是 X509Certificate 对象并且它们具有相同的颁发者和序列号，则认为它们是相等的。

```
using System;
using System.Security.Cryptography.X509Certificates;

public class X509
{

    public static void Main()
    {
        // The paths to the certificate signed files
        string Certificate =  @"Signed1.exe";
        string OtherCertificate = @"Signed2.exe";

        // Starting with .NET Framework 4.6, the X509Certificate type implements the IDisposable interface...
        using (X509Certificate certOne = X509Certificate.CreateFromCertFile(Certificate))
        using (X509Certificate certTwo = X509Certificate.CreateFromCertFile(OtherCertificate))
        {
            bool result = certOne.Equals(certTwo);

            Console.WriteLine(result);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-20T10:59:09.053

晚了，但是...

请注意，X509 证书本质上是身份（专有名称，证书所有者的“名称”）和公钥之间的绑定，使用第三方（称为证书颁发机构或加利福尼亚州）。

X509 证书是公开的，可以克隆、复制等。仅凭证书不足以验证其所有者。

身份验证方案通常必须确保所有者拥有与证书中的公钥相关联的私钥，通常通过执行私钥操作，如签署质询（随机数或随机位序列）。然后接收方验证操作是使用正确的私钥（使用证书中的公钥）执行的。只有当两个密钥都来自同一对时，验证才会成功（这是公钥密码学的本质）。

此外，接收方必须验证证书：查看颁发者和所有者身份，检查颁发者是否是经批准的 CA，证书是否适合预期用途（有效期、策略和密钥使用），证书是否签名通过使用 CA 证书中的公钥有效 - 直接受信任，或由受信任的更高级别 CA 签名 - 证书仍然有效（证书过期，没有什么是永恒的！），并且颁发证书的 CA 不会撤销证书。

@Rattle 指出的重要一点是，为了比较证书（例如，将代码签名者的证书与一组批准的证书进行比较时），您不应该使用[X509Certificate.Equals() 方法](https://posts.specterops.io/subverting-x509certificate-equals-in-net-92b97d1ae59b)。而是比较指纹。

# objective-c - 如何确定 iOS 上是否存在 DropBox 应用程序文件夹

> ID：11449768
> 
> 赞同：1
> 
> 时间：2012-07-12T10:19:28.363
> 
> 标签：objective-c, ios, dropbox-api

我在我的应用程序中使用 DropboxSDK。在那使用 kDBRootAppFolder 所以如果我第一次使用它，它将创建带有应用程序名称的文件夹。所以我想查找该文件夹是否存在，我该怎么办？有什么方法存在吗？如果有人有想法，请告诉我。

实际上我得到这样的警告：

> [警告] DropboxSDK：向 /1/metadata/sandbox 发出请求时出错 - 尝试使用：[[self dbClient] loadMetadata:@"/"] 加载数据时令牌被禁用或无效；陈述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T18:06:08.120

您无需担心您的应用程序文件夹是否存在，确切地说。如您所述，当用户第一次链接时，将创建该文件夹。如果文件夹被删除或用户取消链接应用程序（例如通过[https://www.dropbox.com/account/applications](https://www.dropbox.com/account/applications)），您将收到 401 错误（根据文档[https://www.dropbox.com/developers /reference/api](https://www.dropbox.com/developers/reference/api)）你应该捕获然后提示用户重新链接你的应用程序。

# c++ - C++ - 释放在 main 中分配但在单独的类中指向的内存

> ID：11449772
> 
> 赞同：0
> 
> 时间：2012-07-12T10:19:59.787
> 
> 标签：c++, memory-management

我想知道，如果我在 main 中使用 new 关键字创建一个对象，然后将该对象（指针）设置为由另一个类的成员指向，将原始指针设置为 null，我将在哪里删除分配的内存？我可以在第二个类的析构函数中做到这一点，但如果该对象不是动态分配的呢？

一些代码作为例子：

```
World world;
Player* newPlayer = new Player("Ted");
world.setPlayer(newPlayer);
newPlayer = 0; 
```

所以现在 World 中的 'player' 成员变量指向 newPlayer 分配的内存，而 newPlayer 指向 null。使用完 World 对象后，我应该如何释放此内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:22:35.700

这种复杂性是您应该尽量避免在 C++ 中使用原始指针的原因。 [存在智能指针](http://en.wikipedia.org/wiki/Smart_pointer)来解决此类问题，并省去手动跟踪谁拥有对象以及何时删除它的麻烦。

例如：

```
typedef boost::shared_ptr<Player> sp_Player;

struct World {
    sp_Player player;
    World(sp_Player p) : player(p) {}
};

sp_Player newPlayer = new Player("Ted");

World world;
world.setPlayer(newPlayer);

// Object is now automatically deleted at the correct time! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:26:30.170

如其他答案所述，使用智能指针更容易，但是在这种情况下，您可以将删除放在其他地方。

如果所有玩家都传递给 a`World`然后`World`可以处理内存 - 每次 a`World`被破坏或设置不同的玩家时`Player`，`World`必须删除持有的。此外，任何玩家都不应该在其他任何地方被摧毁，否则它可能会被摧毁两次。但是在这种情况下，我会让所有 Players 都由一个方法构造，`World`以明确谁拥有内存管理并保持同一个类创建和销毁 Player 对象

一些非常不完整的代码是（注意智能指针代码要少得多，我认为涵盖了所有情况 - 这不是）

```
class World
{
   Player *p;
 ...
}

World() : p(nullptr) {
  ...
}

~World() {
    delete p;
}

void World setPlayer( Palyer *aP ) {
    if ( p != aP) {
         delete p;
    }
    p = aP;
    ....
}

Player* World::createPlayer(std::string const& name){ 
  return new Player(name); 
} 
```

注意`= Player(name)`在堆栈上创建了一个 Playeobject，并且不在您的代码中由 new 和 delete 管理 - 这可能是这里最好的解决方案。

还需要处理 operator= 和复制构造函数（后者最好阻止它被调用，否则它将需要复制 Player 对象，因此删除原始世界和副本不会尝试删除同一个 Player）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:39:06.910

没有绝对的答案。问题是：为什么要动态分配对象？一旦你回答了这个问题，通常很明显应该删除它。

例如，从您的对象的名称来看，我猜它`world`拥有一切；它决定了玩家的寿命等。在这种情况下，它应该负责`delete`。至于`Person`在堆栈上分配 a 的可能性：不要那样做。鉴于它 `Person`可能有一个明确的生命周期，它与函数中的块*不*对应（否则，为什么要动态分配它开始），声明该类型的局部变量是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T10:22:54.217

完成后只需要调用 delete 即可。为了避免这样做的需要，请考虑使用共享指针，因为它们将使您不再需要这样做。

编辑：要回答您的评论，您拨打的电话`delete`取决于您的应用程序，但请确保您

1.  `delete`在分配之前不要这样做。
2.  `delete`在您确定没有其他东西需要访问它之前不要这样做。

一个可能的位置是在 World 对象的析构函数中，但如果不知道应用程序其余部分的详细信息，就不可能说出来。这就是为什么`boost::shared_ptr`更可取。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-12T10:21:25.417

新的应该总是跟在删除之后。如果将指针设置为指向其他对象而不释放内存，则会导致[指针悬空](http://en.wikipedia.org/wiki/Dangling_pointer)

# c# - CLR 元数据类型定义表计数

> ID：11449773
> 
> 赞同：2
> 
> 时间：2012-07-12T10:20:10.670
> 
> 标签：c#, clr, ildasm

考虑以下代码：

```
公共密封类程序
{
    公共静态无效 Main()
    {
        System.Console.WriteLine("嗨");
    }
}

```

用 csc.exe 编译后，我使用 ILDasm 打开程序集，发现了一些我无法弄清楚的东西：

ILDasm“表演！” 命令仅显示单个 TypeDef（“程序”类），但在统计视图中我可以看到 TypeDef 计数为 2。

知道第二种类型是从哪里来的吗？

资料来源：Jeffrey Richter 的书“CLR via C#”第 3 版第 39 页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:50:32.803

使用 View + MetaInfo + Raw:Header,Schema,Rows。您将在节目中获得更多详细信息！倾倒。您现在将看到：

```
 1 == 0:00000000, 1:string#1, 2:string#0, 3:TypeDefOrRef[02000000], 4:Field[4000001], 5:Method[6000001]
   2 == 0:00100000, 1:string#22, 2:string#2a, 3:TypeDefOrRef[01000001], 4:Field[4000001], 5:Method[6000001] 
```

注意第一个，令牌值 0。只是一个虚拟条目，它的意思是“不是类型”。这样做会使元数据解析器更容易，这样任何 typeref 令牌值在表中都有一个条目，并且不需要为 0 添加测试。

# c - 在c中添加整数的套接字程序

> ID：11449776
> 
> 赞同：-3
> 
> 时间：2012-07-12T10:20:21.097
> 
> 标签：c, sockets

谁能告诉我如何将整数从客户端发送到服务器并将它们添加到c中。

我能够成功发送字符串，但我无法弄清楚如何发送整数。

请帮帮我！！下面编写的代码用于读取字符串。我怎样才能改变它来读取和添加整数。

```
#define SOCK_PATH "echo_socket"

int main(void)
{

 int s, t, len;
 struct sockaddr_un remote;
 char str[100];
 if ((s = socket(AF_UNIX, SOCK_STREAM, 0)) == -1) {
 perror("socket");
 exit(1);
}

 printf("Trying to connect...\n");
 remote.sun_family = AF_UNIX;
 strcpy(remote.sun_path, SOCK_PATH);
 len = strlen(remote.sun_path) + sizeof(remote.sun_family);

 int val=connect(s, (struct sockaddr *)&remote, len);

 if ( val< 0) {
 perror("connect");
 exit(1);
 }

 printf("Connected.\n");

 printf("ENTER THE NUMBERS:");

while(printf("> "), fgets(str, 100, stdin), !feof(stdin)) {

if (send(s, str, strlen(str), 0) == -1) {
perror("send");
exit(1);
}
if ((t=recv(s, str, 100, 0)) > 0) {
str[t] = '\0';
 printf("echo> %s", str);
} else 
{
  if (t < 0) perror("recv");
  else printf("Server closed connection\n");
  exit(1);
 } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:23:43.700

简单的：

```
int my_int = 1234;
send(socket, &my_int, sizeof(my_int), 0); 
```

*上面的*代码通过套接字发送整数。要在另一端接收它：

```
int my_int;
recv(socket, &my_int, sizeof(my_int), 0); 
```

但是，如果这两个程序在具有不同字节顺序的系统上运行，请小心。

**编辑：**如果您担心平台兼容性、字节顺序等，那么在一端将所有数据转换为字符串，然后在另一端将其转换回，可能是最佳选择。参见例如来自 cnicutar 的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:21:59.700

您可以使用`sprintf`将它们转换为字符串，然后`strtoul`将它们转换回整数。或者你可以只是`memcpy`整数进出一个 char 数组。

# search - 是否可以更改 delta import 命令以根据条件删除不需要的文档？每次运行增量导入时

> ID：11449780
> 
> 赞同：0
> 
> 时间：2012-07-12T10:20:26.190
> 
> 标签：search, solr

我有 dataImportScheduler 配置了哪些帖子和 HTTP 请求将增量或更改导入索引。我想要做的是每次运行增量导入时，它也应该运行一个删除查询，该查询有一些标准，例如`documenttype:deleted`删除索引中不需要的数据。

我正在使用的增量导入查询是

```
http://address:8080/solr-multicore/dataimport?command=delta-import&clean=false&commit=true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:17:11.337

您可以使用 deletedPkQuery 清理已删除的记录。

[deletedPkQuery ：仅用于增量导入](http://wiki.apache.org/solr/DataImportHandler)

[示例](http://solr.pl/en/2011/01/03/data-import-handler-%E2%80%93-removing-data-from-index/)-

```
<entity name="album" query="SELECT * from albums" deletedPkQuery="SELECT deleted_id as id FROM deletes WHERE deleted_at > '${dataimporter.last_index_time}'"> 
```

这将帮助您在没有时间戳的情况下删除记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-08T07:28:48.680

对的，这是可能的。如果您只想删除，您可以同时删除**deltaQuery**和**deltaImportQuery**并将唯一的**deletedPkQuery**用作：

```
SELECT  id FROM db WHERE deletion = 1  AND solrsync_date > '${dataimporter.db.last_index_time}'" 
```

注意：- 删除条件可以是任何东西。

然后运行： [http://host:8983/solr/core/dataimport?command=delta-import](http://host:8983/solr/core/dataimport?command=delta-import)

# javascript - 如何在 razor 中创建一个 javascript 字符串

> ID：11449782
> 
> 赞同：18
> 
> 时间：2012-07-12T10:20:33.807
> 
> 标签：javascript, asp.net-mvc-3, razor

我看过一些关于这个主题的帖子和一些博客，但似乎没有人提到我得到的输出。

我想要的是生成一个带有信息的谷歌地图地图。手动输入信息会产生正确的信息。所以那部分有效。

我被卡住的地方是当我要动态创建带有字符串的javascript数组时，该数组包含我想要在我的地图上的信息。

我想得到的html代码是：

```
<script type="text/javascript">     
    var projects = [
         ['Kantoor 4.1 bestaande bouw', 52.25446, 6.16024700000003, 'Deventer', '', 'adviseurs', 'rating30'],
         ['School nieuw 4.0', 52.243161, 4.43677860000003, 'Noordwijk', '', 'adviseurs', 'rating30'],   
    ]; 
```

非常简单的javascript数组，我想用它来创建：

```
<script type="text/javascript">
var projects = [
    @foreach (var item in Model)
    {
        @HttpUtility.JavaScriptStringEncode("['" + item.Gebouwnaam + "', " + item.LocatieLatitude.ToString().Replace(",", ".") + ", " + item.LocatieLongitude.ToString().Replace(",", ".") + ", '" + item.Plaats + "', '" + item.Gebruiksfunctie + "', '" + item.Licentiehouder + "', '" + item.rating + "'],");
     }
];
</script> 
```

然而，这给了我：

```
<script type="text/javascript">
var projects = [
    [\u0027Kantoor 4.1 bestaande bouw\u0027, 52.25446, 6.16024700000003, \u0027Deventer\u0027, \u0027\u0027, \u0027adviseurs\u0027, \u0027rating30\u0027],
    [\u0027School nieuw 4.0\u0027, 52.243161, 4.43677860000003, \u0027Noordwijk\u0027, \u0027\u0027, \u0027adviseurs\u0027, \u0027rating30\u0027],
];  
</script> 
```

转义单引号不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T10:35:00.633

刚试过

```
 <script type="text/javascript">
 var projects = [

   @Html.Raw("['" + "aaa" + "', '" + "bbb" + "'],")

 ];
 </script> 
```

它工作并显示...

```
<script type="text/javascript">
var projects = [

       ['aaa', 'bbb'],

];
</script> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T10:46:53.023

您不想在整个字符串上调用 JavaScriptStringEncode，这也会对您的文字指示符进行编码（在您的示例中将转换为 \u0027 ）。相反，像这样在数组中的每个项目上调用它：

```
<script type="text/javascript">
var projects = [
    @foreach (var item in Model)
    {
        String.Format("['{0}',{1},{2},'{3}','{4}','{5}','{6}']",
                      HttpUtility.JavaScriptStringEncode(item.Gebouwnaam),
                      HttpUtility.JavaScriptStringEncode(item.LocatieLatitude.ToString().Replace(",", ".")),
                      HttpUtility.JavaScriptStringEncode(item.LocatieLongitude.ToString().Replace(",", ".")),
                      HttpUtility.JavaScriptStringEncode(item.Plaats),
                      HttpUtility.JavaScriptStringEncode(item.Gebruiksfunctie),
                      HttpUtility.JavaScriptStringEncode(item.Licentiehouder),
                      HttpUtility.JavaScriptStringEncode(item.rating)
         )
     }
];
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-05T22:58:21.953

我相信您可以在 .net 中完成大部分繁重的工作并利用 Html.Raw 为您转换对象：

```
@{
    var myObj = Model.Select(i => new {
        item.Gebouwnaam,
        item.LocatieLatitude.ToString().Replace(",", "."),
        item.LocatieLongitude.ToString().Replace(",", "."),
        item.Plaats,
        item.Gebruiksfunctie,
        item.Licentiehouder,
        item.rating }).ToArray();
}

<script type="text/javascript">
    var jsObj = @Html.Raw(Json.Encode(myObj));
</script> 
```

由于在这个问题中涉及到， HttpUtility.JavaScriptStringEncode() 对于包含换行符的字符串非常方便：

```
@{ var myNetString = "Hi,\r\nMy name is Joe\r\nAnd I work in a button factory"; }

<script type='text/javascript'>
    var myJsString = '@HttpUtility.JavaScriptStringEncode(myNetString)';
</script> 
```

# jquery - iframe 重叠 Jquery fancybox

> ID：11449788
> 
> 赞同：1
> 
> 时间：2012-07-12T10:20:49.157
> 
> 标签：jquery, iframe, mobile, fancybox

我正在使用 Jquery 显示图像弹出窗口，`fancybox`并且在网页中`VIMEO`嵌入了一个使用`iframe`. 该图像在大多数浏览器中都能正确显示，但是当我在 iPhone 4 和三星 Galaxy S2 中进行测试时，视频会覆盖弹出图像。

我尝试使用“wmode = transperant”。

我在谷歌搜索了很多，但没有正确的答案。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:39:00.647

我尝试了很多东西，但没有解决方案。然后我用其他方法解决我的问题，即Jquery Fancybox“onStart”和“onClose”。这是我的解决方案...

$(文档).ready(函数() {

$("#elementToBePopup").fancybox({

```
 'autoDimensions':true,
        'scrolling': 'no',
        'onStart':
            function(){
                $("#vimeo-video").css('display', 'none');
            },
        'onClosed' : 
            function() {
                $("#vimeo-video").css('display', 'block');
            }
    }).trigger('click');
}); 
```

其中“elementToBePopup”是要弹出的元素，“vimeo-video”是与弹出窗口重叠的视频的 ID。

希望对其他人有所帮助。

# iframe - Salesforce 中基于 iframe 的集成

> ID：11449791
> 
> 赞同：2
> 
> 时间：2012-07-12T10:21:00.743
> 
> 标签：iframe, salesforce, force.com

我想在 Salesforce iFrame 中显示我的网站，当有人在 iFrame 中的我的网站上进行任何活动时，我是否也想更新 Salesforce 页面？

我可以这样做吗，请建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T08:53:34.720

一种更新的方法，现在是 GA，是[Force.com Canvas](http://wiki.developerforce.com/page/Force.com_Canvas) - 这是基于 iframe 的，具有额外的安全性和功能，包括将 Salesforce 字段等上下文传递到 iframe。它还使 iframed Web 应用程序能够基于该身份验证调用 Salesforce API，通过 JavaScript 或您的后端 Web 应用程序（Python、Java 等）使用 Canvas 框架中的凭据。

您还可以使用 Canvas 中的新事件功能将消息发送到框架 Salesforce 页面。

关于身份验证选项：建议使用 Canvas 签名请求身份验证且简单，但请注意，它不会为您提供 OAuth2 的刷新令牌 - 因此，如果您需要根据用户的身份验证进行持续的后台处理，您应该使用 Canvas OAuth2而是进行身份验证，这确实为您提供了刷新令牌。

总体而言，Canvas 比使用原始 iframe 更干净，并且应该简化开发。它确实需要对 iframed Web 应用程序中的身份验证进行一些更改，但它们相对简单（大约 10 行 Python 代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T13:37:17.267

您可以使用 Javascript 和页面刷新将信息发送到父窗口，但这不在我推荐的书籍中。出于安全原因，iFrame 并不意味着与其父站点进行通信。

您可能想研究使用 API 在两个站点之间进行通信。

# combobox - 将 DropDownList ComboBox 的 Text 属性设置为无效值不会引发异常？

> ID：11449792
> 
> 赞同：0
> 
> 时间：2012-07-12T10:21:09.537
> 
> 标签：combobox

我正在寻找解决使用 ComboBox 控件的 Winforms 应用程序问题的方法。具体来说，ComboBox *(Style=DropDownList)*绑定到一个数据源，并且当用户浏览其他一些数据时，设置了 ComboBox 属性的“Text”属性 - 并且用户可以选择其他一些值。

当我将“文本”属性设置为的值不在可用项目列表中时，问题就开始了。似乎什么都没有发生。举个简单的例子：

```
public partial class Form1 : Form
{
  public Form1()
  {
      InitializeComponent();

      myComboBox1.DropDownStyle = ComboBoxStyle.DropDownList;
      //myComboBox1.Items.AddRange(new[] { "One", "Two", "Three" });

      List<KeyValuePair<Int32, String>> values = new List<KeyValuePair<Int32, String>>();
      values.Add(new KeyValuePair<Int32, String>(1, "One"));
      values.Add(new KeyValuePair<Int32, String>(2, "Two"));
      values.Add(new KeyValuePair<Int32, String>(3, "Three"));

      myComboBox1.DataSource = values;
      myComboBox1.ValueMember = "Key";
      myComboBox1.DisplayMember = "Value";

      button1.Click += (s, e) => { myComboBox1.Text = "Four"; };
      button2.Click += (s, e) => { myComboBox1.SelectedIndex -= 1; };
   }
}

public class MyComboBox : System.Windows.Forms.ComboBox
{
   public override string Text
   {
      get { return base.Text; }
      set { MessageBox.Show(value); base.Text = value; }
   }
} 
```

这种技术在整个大型应用程序中使用，所以当注意到*（在上面的示例中）*将“文本”设置为“四”时，我想也许我可以捕获它并抛出异常。实际上，应用程序中充斥着这样的代码：

```
if (myDataRow.IsBlahNull())
    myComboBox1.Text = "";
else
    myComboBox1.Text = myDataRow.Blah; 
```

现在，虽然我很欣赏设置“SelectedIndex = -1”对于“IsNull”情况会更好，但事实仍然是 myDataRow.Blah 可能不是有效值。此外，应用程序是编写的*（并且是实时的）*，因此更改越少越好。

因此，我的直接想法是*“让我们重写 Text 属性设置器并检查该值是否在列表中”*。事实证明，这并不像看起来那么简单。问题在于“文本”属性在各种场景中设置为各种事物。例如，它在分配 DataSource 属性时设置，或者在 SelectedIndex 设置为 -1 时设置。此外，它被设置为所选项目的字符串表示形式 - 因此，如果您碰巧有一个绑定到 KeyValue 对列表的 ComboBox 控件，您可以将“Text”属性设置为“[Key,Value]”之类的东西。如果它绑定到 DataTable/DataView，您将获得 DataRow 的字符串表示形式，这将变得更难检测。

正是在这一点上，我认为可能有另一种方法来实现所需的结果*（即检测 Text 属性的设置为某个无效值——它什么都不做）*。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:46:08.273

经过反思，这是一个合理的解决方法吗？

```
/// <summary>
/// Gets or sets the text associated with this control.
/// </summary>
public override string Text
{
   get { return base.Text; }
   set
   {
      base.Text = value;

      if ((value != null) && (base.Text != value))
         if (value == "")
            this.SelectedIndex = -1;
         else
            throw new ArgumentException(String.Format("Cannot set Text property of {0} to \"{1}\".", this.Name, value));
   }
} 
```

# xml - 替换缺失元素的默认值

> ID：11449798
> 
> 赞同：1
> 
> 时间：2012-07-12T10:21:32.803
> 
> 标签：xml, xsd

我的架构的摘录：

```
<xs:complexType name="foo">
    <xs:sequence>
        <xs:element name="bar" type="xs:positiveInteger"/>
        <xs:element name="baz" type="bax_type" minOccurs="0"/>
    </xs:sequence>
</xs:complexType>

<xs:simpleType name="baz_type">
    <xs:restriction base="xs:NMTOKEN">
        <xs:enumeration value="none"/>
        <xs:enumeration value="wombat"/>
    </xs:restriction>
</xs:simpleType> 
```

也就是说，我有一个可能缺少的枚举类型的元素。是否有可能获得以下行为：

1.  在以下 XML 中，它给出了默认值，`none`而不是`null`- 即`foo.getBaz() == BazType.NONE`

此 XML 应该有效以实现向后兼容性。

```
 <foo>
        <bar>1</bar>
    </foo> 
```

1.  这个解析正确：

    ```
    <foo>
        <bar>1</bar>
        <baz>wombat</baz>
    </foo> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:57:46.337

使用选择指标，请参考本[教程](http://www.w3schools.com/schema/schema_complex_indicators.asp)

# android - Android将Json对象添加到数组中

> ID：11449803
> 
> 赞同：2
> 
> 时间：2012-07-12T10:21:45.117
> 
> 标签：android, json

我要做的是创建一个 JSONObject，其中包含由字符串组织的其他 JSONObjects 数组？例如，我想创建一个 JSONObject，其中包含一组对象，这些对象包含同样按匹配日期组织的夹具

给你一个我想要达到的目标的视觉参考

```
JSONObject (JSONArray("Object 10/10/12" {(fixtures content)(fixtures content)}")
                     ("Object 11/10/12" {(fixtures content)(fixtures content)}")) 
```

这是我迄今为止尝试过的，但无法让它工作

```
 String matchDate1 = null;
        JSONArray datesArray = null;
        JSONObject fixturesInfo = null;
        JSONArray fixturesInfoArray = null;
        String matchDateTemp = null;

        for(int f = 0; f < fixturesArray.length(); f++){

            JSONObject matchDateDict = fixturesArray.getJSONObject(f);
            matchDate1 = matchDateDict.getString("matchdate");
            JSONArray fixturesInfoDict = fixturesInfo.getJSONArray(matchDate1);

           if(fixturesInfoDict == null){
               tempArray = null;
           } else {
               tempArray = fixturesInfoDict;
           }

           if(matchDateTemp != matchDate1){
              fixturesInfoArray.put(matchDate1);
           }

          matchDateTemp = matchDate1;

          tempArray.put(fixturesArray.getJSONObject(f));
          fixturesInfo.put(matchDate1, tempArray);

        }

            Log.v("MyFix", "fixturesInfo = " + fixturesInfo);

        }catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

这是 json 提要

```
{
    "code": 200,
    "error": null,
    "data": {
        "fixtures": [{
            "kickoff": "15:00:00",
            "matchdate": "2012-07-14",
            "homescore": null,
            "awayscore": null,
            "attendance": null,
            "homepens": null,
            "awaypens": null,
            "division_id": "5059",
            "division": "Testing 1",
            "comp": "LGE",
            "location": null,
            "fixture_note": null,
            "hometeam_id": "64930",
            "hometeam": "Team 1",
            "awayteam_id": "64933",
            "awayteam": "Team 4"
        }, {
            "kickoff": "15:00:00",
            "matchdate": "2012-07-14",
            "homescore": null,
            "awayscore": null,
            "attendance": null,
            "homepens": null,
            "awaypens": null,
            "division_id": "5059",
            "division": "Testing 1",
            "comp": "LGE",
            "location": null,
            "fixture_note": null,
            "hometeam_id": "64935",
            "hometeam": "Team 6",
            "awayteam_id": "64937",
            "awayteam": "Team 8"
        }, {
            "kickoff": "15:00:00",
            "matchdate": "2012-07-28",
            "homescore": null,
            "awayscore": null,
            "attendance": null,
            "homepens": null,
            "awaypens": null,
            "division_id": "5059",
            "division": "Testing 1",
            "comp": "LGE",
            "location": null,
            "fixture_note": null,
            "hometeam_id": "64930",
            "hometeam": "Team 1",
            "awayteam_id": "64931",
            "awayteam": "Team 2"
        }, {
            "kickoff": "15:00:00",
            "matchdate": "2012-07-28",
            "homescore": null,
            "awayscore": null,
            "attendance": null,
            "homepens": null,
            "awaypens": null,
            "division_id": "5059",
            "division": "Testing 1",
            "comp": "LGE",
            "location": null,
            "fixture_note": null,
            "hometeam_id": "64930",
            "hometeam": "Team 1",
            "awayteam_id": "64931",
            "awayteam": "Team 2"
        }]
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T10:31:26.983

从你所说的来看，你似乎想`JSONArray`从一些`JSONObjects`. 这可能会有所帮助：

```
public void writeJSON() {
    JSONObject user = new JSONObject();
    JSONObject user2;
    user2 = new JSONObject();
    try {
        user.put("dish_id", "1");
        user.put("dish_custom", "2");
        user.put("quantity", "2");
        user.put("shared", "2");

        user2.put("dish_id", "2");
        user2.put("dish_custom", "2");
        user2.put("quantity", "4");
        user2.put("shared", "3");
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    JSONArray notebookUsers = new JSONArray();
    notebookUsers.put(user);
    notebookUsers.put(user2);
    System.out.println("the JSON ARRAY is"+notebookUsers); 
```

这里将 2 个 json 对象添加到 1 个 JSONArray。

的输出`System.out.println`将如下所示：

```
the JSON ARRAY is[{"shared":"2","dish_custom":"2","dish_id":"1","quantity":"2"},{"shared":"3","dish_custom":"2","dish_id":"2","quantity":"4"}] 
```

而且您使用的字符串比较不正确。

```
if(matchDateTemp != matchDate1) 
```

你不能像那样比较字符串。你可以使用类似的东西：

```
if(!(matchDateTemp.equals(matchDate1))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:54:43.047

解析 JSON 的最佳方法是使用[GSON](http://code.google.com/p/google-gson/downloads/list)。你要做的是

*   下载 GSON jar 并添加到您的构建路径
*   现在创建代表 JSON 数据结构的类
*   仅在一行中解析数据。GSON 会为您做到这一点

只解析一行

```
String json = "{\"code\":200,\"error\":null,\"data\":{\"fixtures\":[{\"kickoff\":\"15:00:00\",\"matchdate\":\"2012-07-14\",\"homescore\":null,\"awayscore\":null,\"attendance\":null,\"homepens\":null,\"awaypens\":null,\"division_id\":\"5059\",\"division\":\"Testing 1\",\"comp\":\"LGE\",\"location\":null,\"fixture_note\":null,\"hometeam_id\":\"64930\",\"hometeam\":\"Team 1\",\"awayteam_id\":\"64933\",\"awayteam\":\"Team 4\"},{\"kickoff\":\"15:00:00\",\"matchdate\":\"2012-07-14\",\"homescore\":null,\"awayscore\":null,\"attendance\":null,\"homepens\":null,\"awaypens\":null,\"division_id\":\"5059\",\"division\":\"Testing 1\",\"comp\":\"LGE\",\"location\":null,\"fixture_note\":null,\"hometeam_id\":\"64935\",\"hometeam\":\"Team 6\",\"awayteam_id\":\"64937\",\"awayteam\":\"Team 8\"},{\"kickoff\":\"15:00:00\",\"matchdate\":\"2012-07-28\",\"homescore\":null,\"awayscore\":null,\"attendance\":null,\"homepens\":null,\"awaypens\":null,\"division_id\":\"5059\",\"division\":\"Testing 1\",\"comp\":\"LGE\",\"location\":null,\"fixture_note\":null,\"hometeam_id\":\"64930\",\"hometeam\":\"Team 1\",\"awayteam_id\":\"64931\",\"awayteam\":\"Team 2\"},{\"kickoff\":\"15:00:00\",\"matchdate\":\"2012-07-28\",\"homescore\":null,\"awayscore\":null,\"attendance\":null,\"homepens\":null,\"awaypens\":null,\"division_id\":\"5059\",\"division\":\"Testing 1\",\"comp\":\"LGE\",\"location\":null,\"fixture_note\":null,\"hometeam_id\":\"64930\",\"hometeam\":\"Team 1\",\"awayteam_id\":\"64931\",\"awayteam\":\"Team 2\"}]}}";

MatchDetails matchDetails=new Gson().fromJson(json,MatchDetails.class);
System.out.println(matchDetails); 
```

*   现在这`MatchDetails`门课有`Fixture` `Lists`你需要的一切
*   通过访问夹具阵列`matchDetails.getData().getFixtures();`

`MatchDetails`班级_

```
public class MatchDetails {

    //"code":200,"error":null

    private String code;
    private String error;
    private Fixtures data;
    /**
     * Gets the code.
     * 
     * @return <tt> the code.</tt>
     */
    public String getCode() {
        return code;
    }
    /**
     * Sets the code.
     *
     * @param code <tt> the code to set.</tt>
     */
    public void setCode(String code) {
        this.code = code;
    }
    /**
     * Gets the error.
     * 
     * @return <tt> the error.</tt>
     */
    public String getError() {
        return error;
    }
    /**
     * Sets the error.
     *
     * @param error <tt> the error to set.</tt>
     */
    public void setError(String error) {
        this.error = error;
    }
    /**
     * Gets the data.
     * 
     * @return <tt> the data.</tt>
     */
    public Fixtures getData() {
        return data;
    }
    /**
     * Sets the data.
     *
     * @param data <tt> the data to set.</tt>
     */
    public void setData(Fixtures data) {
        this.data = data;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "MatchDetails [code=" + code + ", error=" + error + ", data="
                + data + "]";
    }

} 
```

**编辑**具有功能的 编辑`Fixtures`类。`sortFixtures`如下使用它

```
String json = "{\"code\":200,\"error\":null,\"data\":{\"fixtures\":[{\"kickoff\":\"15:00:00\",\"matchdate\":\"2012-05-14\",\"homescore\":null,\"awayscore\":null,\"attendance\":null,\"homepens\":null,\"awaypens\":null,\"division_id\":\"5059\",\"division\":\"Testing 1\",\"comp\":\"LGE\",\"location\":null,\"fixture_note\":null,\"hometeam_id\":\"64930\",\"hometeam\":\"Team 1\",\"awayteam_id\":\"64933\",\"awayteam\":\"Team 4\"},{\"kickoff\":\"15:00:00\",\"matchdate\":\"2012-07-14\",\"homescore\":null,\"awayscore\":null,\"attendance\":null,\"homepens\":null,\"awaypens\":null,\"division_id\":\"5059\",\"division\":\"Testing 1\",\"comp\":\"LGE\",\"location\":null,\"fixture_note\":null,\"hometeam_id\":\"64935\",\"hometeam\":\"Team 6\",\"awayteam_id\":\"64937\",\"awayteam\":\"Team 8\"},{\"kickoff\":\"15:00:00\",\"matchdate\":\"2012-12-28\",\"homescore\":null,\"awayscore\":null,\"attendance\":null,\"homepens\":null,\"awaypens\":null,\"division_id\":\"5059\",\"division\":\"Testing 1\",\"comp\":\"LGE\",\"location\":null,\"fixture_note\":null,\"hometeam_id\":\"64930\",\"hometeam\":\"Team 1\",\"awayteam_id\":\"64931\",\"awayteam\":\"Team 2\"},{\"kickoff\":\"15:00:00\",\"matchdate\":\"2012-01-28\",\"homescore\":null,\"awayscore\":null,\"attendance\":null,\"homepens\":null,\"awaypens\":null,\"division_id\":\"5059\",\"division\":\"Testing 1\",\"comp\":\"LGE\",\"location\":null,\"fixture_note\":null,\"hometeam_id\":\"64930\",\"hometeam\":\"Team 1\",\"awayteam_id\":\"64931\",\"awayteam\":\"Team 2\"}]}}";

MatchDetails matchDetails=new Gson().fromJson(json,MatchDetails.class);
System.out.println(matchDetails);

System.out.println("Unsorted");

Fixtures fixturesObj = matchDetails.getData(); 
List<Fixture> fixtures = fixturesObj.getFixtures();
for (Fixture fixture : fixtures) {
    System.out.println(fixture);
}

System.out.println("Sorted");

fixtures = fixturesObj.sortFixtures();
for (Fixture fixture : fixtures) {
    System.out.println(fixture);
} 
```

`Fixtures`班级_

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.List;

/**
 * <br>
 * <div style="width:600px;text-align:justify;">
 *
 * TODO: Class comment.
 *
 * </div>
 * <br>
 * @author Sunil Kumar E
 *
 */
public class Fixtures {

    private List<Fixture> fixtures;

    /**
     * Gets the fixtures.
     * 
     * @return <tt> the fixtures.</tt>
     */
    public List<Fixture> getFixtures() {
        return fixtures;
    }

    /**
     * Sets the fixtures.
     *
     * @param fixtures <tt> the fixtures to set.</tt>
     */
    public void setFixtures(List<Fixture> fixtures) {
        this.fixtures = fixtures;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Fixtures [fixtures=" + fixtures + "]";
    }

    public List<Fixture> sortFixtures()
    {
        Collections.sort(getFixtures(), new Comparator<Fixture>() {

            @Override
            public int compare(Fixture o1, Fixture o2) {
                SimpleDateFormat df1 = new SimpleDateFormat("yyyy-MM-dd");

                Date date1 = null;
                Date date2 = null;

                try {
                    date1 = df1 .parse(o1.getMatchdate());
                    date2 = df1 .parse(o2.getMatchdate());
                } catch (ParseException e) {
                    e.printStackTrace();
                }
                if(date1==null || date2==null) return 0;

                if (date1.after(date2))
                    return 1;
                else if(date1.before(date2)) 
                    return -1;
                return 0;
            }
        });

        return getFixtures();
    }
} 
```

`Fixture`班级_

```
public class Fixture {
//"kickoff":"15:00:00","matchdate":"2012-07-14","homescore":null,
//  "awayscore":null,"attendance":null,"homepens":null,"awaypens":null,
//  "division_id":"5059","division":"Testing 1","comp":"LGE","location":null,
//  "fixture_note":null,"hometeam_id":"64930","hometeam":"Team 1",
//  "awayteam_id":"64933","awayteam":"Team 4"

    private String kickoff;
    private String matchdate;
    private String homescore;
    private String awayscore;
    private String attendance;
    private String homepens;
    private String awaypens;
    private String division_id;
    private String division;
    private String comp;
    private String location;
    private String fixture_note;
    private String hometeam_id;
    private String hometeam;
    private String awayteam_id;
    private String awayteam;
    /**
     * Gets the kickoff.
     * 
     * @return <tt> the kickoff.</tt>
     */
    public String getKickoff() {
        return kickoff;
    }
    /**
     * Sets the kickoff.
     *
     * @param kickoff <tt> the kickoff to set.</tt>
     */
    public void setKickoff(String kickoff) {
        this.kickoff = kickoff;
    }
    /**
     * Gets the matchdate.
     * 
     * @return <tt> the matchdate.</tt>
     */
    public String getMatchdate() {
        return matchdate;
    }
    /**
     * Sets the matchdate.
     *
     * @param matchdate <tt> the matchdate to set.</tt>
     */
    public void setMatchdate(String matchdate) {
        this.matchdate = matchdate;
    }
    /**
     * Gets the homescore.
     * 
     * @return <tt> the homescore.</tt>
     */
    public String getHomescore() {
        return homescore;
    }
    /**
     * Sets the homescore.
     *
     * @param homescore <tt> the homescore to set.</tt>
     */
    public void setHomescore(String homescore) {
        this.homescore = homescore;
    }
    /**
     * Gets the awayscore.
     * 
     * @return <tt> the awayscore.</tt>
     */
    public String getAwayscore() {
        return awayscore;
    }
    /**
     * Sets the awayscore.
     *
     * @param awayscore <tt> the awayscore to set.</tt>
     */
    public void setAwayscore(String awayscore) {
        this.awayscore = awayscore;
    }
    /**
     * Gets the attendance.
     * 
     * @return <tt> the attendance.</tt>
     */
    public String getAttendance() {
        return attendance;
    }
    /**
     * Sets the attendance.
     *
     * @param attendance <tt> the attendance to set.</tt>
     */
    public void setAttendance(String attendance) {
        this.attendance = attendance;
    }
    /**
     * Gets the homepens.
     * 
     * @return <tt> the homepens.</tt>
     */
    public String getHomepens() {
        return homepens;
    }
    /**
     * Sets the homepens.
     *
     * @param homepens <tt> the homepens to set.</tt>
     */
    public void setHomepens(String homepens) {
        this.homepens = homepens;
    }
    /**
     * Gets the awaypens.
     * 
     * @return <tt> the awaypens.</tt>
     */
    public String getAwaypens() {
        return awaypens;
    }
    /**
     * Sets the awaypens.
     *
     * @param awaypens <tt> the awaypens to set.</tt>
     */
    public void setAwaypens(String awaypens) {
        this.awaypens = awaypens;
    }
    /**
     * Gets the division_id.
     * 
     * @return <tt> the division_id.</tt>
     */
    public String getDivision_id() {
        return division_id;
    }
    /**
     * Sets the division_id.
     *
     * @param division_id <tt> the division_id to set.</tt>
     */
    public void setDivision_id(String division_id) {
        this.division_id = division_id;
    }
    /**
     * Gets the division.
     * 
     * @return <tt> the division.</tt>
     */
    public String getDivision() {
        return division;
    }
    /**
     * Sets the division.
     *
     * @param division <tt> the division to set.</tt>
     */
    public void setDivision(String division) {
        this.division = division;
    }
    /**
     * Gets the comp.
     * 
     * @return <tt> the comp.</tt>
     */
    public String getComp() {
        return comp;
    }
    /**
     * Sets the comp.
     *
     * @param comp <tt> the comp to set.</tt>
     */
    public void setComp(String comp) {
        this.comp = comp;
    }
    /**
     * Gets the location.
     * 
     * @return <tt> the location.</tt>
     */
    public String getLocation() {
        return location;
    }
    /**
     * Sets the location.
     *
     * @param location <tt> the location to set.</tt>
     */
    public void setLocation(String location) {
        this.location = location;
    }
    /**
     * Gets the fixture_note.
     * 
     * @return <tt> the fixture_note.</tt>
     */
    public String getFixture_note() {
        return fixture_note;
    }
    /**
     * Sets the fixture_note.
     *
     * @param fixture_note <tt> the fixture_note to set.</tt>
     */
    public void setFixture_note(String fixture_note) {
        this.fixture_note = fixture_note;
    }
    /**
     * Gets the hometeam_id.
     * 
     * @return <tt> the hometeam_id.</tt>
     */
    public String getHometeam_id() {
        return hometeam_id;
    }
    /**
     * Sets the hometeam_id.
     *
     * @param hometeam_id <tt> the hometeam_id to set.</tt>
     */
    public void setHometeam_id(String hometeam_id) {
        this.hometeam_id = hometeam_id;
    }
    /**
     * Gets the hometeam.
     * 
     * @return <tt> the hometeam.</tt>
     */
    public String getHometeam() {
        return hometeam;
    }
    /**
     * Sets the hometeam.
     *
     * @param hometeam <tt> the hometeam to set.</tt>
     */
    public void setHometeam(String hometeam) {
        this.hometeam = hometeam;
    }
    /**
     * Gets the awayteam_id.
     * 
     * @return <tt> the awayteam_id.</tt>
     */
    public String getAwayteam_id() {
        return awayteam_id;
    }
    /**
     * Sets the awayteam_id.
     *
     * @param awayteam_id <tt> the awayteam_id to set.</tt>
     */
    public void setAwayteam_id(String awayteam_id) {
        this.awayteam_id = awayteam_id;
    }
    /**
     * Gets the awayteam.
     * 
     * @return <tt> the awayteam.</tt>
     */
    public String getAwayteam() {
        return awayteam;
    }
    /**
     * Sets the awayteam.
     *
     * @param awayteam <tt> the awayteam to set.</tt>
     */
    public void setAwayteam(String awayteam) {
        this.awayteam = awayteam;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Fixture [kickoff=" + kickoff + ", matchdate=" + matchdate
                + ", homescore=" + homescore + ", awayscore=" + awayscore
                + ", attendance=" + attendance + ", homepens=" + homepens
                + ", awaypens=" + awaypens + ", division_id=" + division_id
                + ", division=" + division + ", comp=" + comp + ", location="
                + location + ", fixture_note=" + fixture_note
                + ", hometeam_id=" + hometeam_id + ", hometeam=" + hometeam
                + ", awayteam_id=" + awayteam_id + ", awayteam=" + awayteam
                + "]";
    }
} 
```

# android - 手机重启后小部件按钮不起作用

> ID：11449806
> 
> 赞同：2
> 
> 时间：2012-07-12T10:21:54.223
> 
> 标签：android, android-widget, widget, boot

好吧，我有一个桌面小部件，里面有几个按钮。每个按钮都应该启动一个活动。一切都很顺利，但是当我重新启动手机时，小部件按钮不再起作用。当然，当我删除小部件并再次添加它时，一切都会恢复正常。有什么问题？我是这样实现的：

显现

```
<receiver android:name=".MyWidget">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        ...
    </intent-filter>
    ...
</receiver> 
```

接收者

```
@Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        // TODO Auto-generated method stub
        super.onUpdate(context, appWidgetManager, appWidgetIds);

        // in service, due to possible ANR erors
        Intent newIntent = new Intent(context, UpdateService.class);
        newIntent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
        context.startService(newIntent);
        return;
    } 
```

UPDATESERVICE（其意图服务不是标准服务）

```
 private boolean update() {
                    ...

            popup.showShort("whoaaa - onUpdate");

            i = new Intent(this, SettingsActivity.class);
            pi = PendingIntent.getActivity(context, 2, i, PendingIntent.FLAG_CANCEL_CURRENT);
            updateViews.setOnClickPendingIntent(R.id.btnSettings, pi);

            i = new Intent(this, AboutActivity.class);
            pi = PendingIntent.getActivity(context, 3, i, PendingIntent.FLAG_UPDATE_CURRENT);
            updateViews.setOnClickPendingIntent(R.id.btnAbout, pi);

                   ...
        } 
```

最好的是，即使在手机重新启动后，我也可以在每次更新时看到弹出窗口。所以它 100% 确定在重新启动后我`receiver`运行它的`onUpdate`方法，它会触发我的`UpdateService`（它的意图服务）并且它的`update`方法运行正确。那么，重新启动后，我的小部件中的任何按钮都不会对点击做出反应，这怎么可能呢？就像没有注册（或交付）意图一样。

PS：也许你会说，我需要注册接收器`BOOT_COMPLETED`，但我知道只有当你需要做一些特殊工作时才有必要（例如重新启动后重新注册警报 - 这不是我的情况）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:48:56.137

绝对无法理解，但是当我从`onUpdate`方法（在接收器中）添加代码时：

```
Intent newIntent = new Intent(context, UpdateService.class);
newIntent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
context.startService(newIntent); 
```

它的`onEnabled`工作原理......但它真的很难理解，因为我的更新方法（在UpdateService中）总是被正确触发，我看到了弹出......

现在它被触发了两次（从 onEnabled 触发，然后立即从 onUpdate 触发）并且它可以工作......请谁能解释一下？我可能错过了文档中非常重要的东西。

编辑：更正，它只在某些时候有效....奇怪

# javascript - Javascript 旋转横幅 - 初始 BG 颜色更改

> ID：11449808
> 
> 赞同：0
> 
> 时间：2012-07-12T10:22:00.867
> 
> 标签：javascript, banner, rotation

我目前在我们公司的一个网站上使用动态驱动 Java 脚本代码来旋转横幅。

我遇到的问题是加载到页面时横幅的初始背景颜色是纯黑色，我正在努力寻找可以更改的地方。

示例网站： http: [//www.sakawater.com](http://www.sakawater.com)

你会注意到最初的 BG 是黑色的，然后变成白色 - 这看起来不太好。

javascript来自：[http ://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm](http://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm)

除了横幅的比例和淡入淡出速度之外，我没有做太多修改，有人可以指出我如何修复/更改初始加载背景颜色的正确方向吗？或者如何完全消除具有 BG 的问题。

谢谢，

纳夫森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:30:12.947

在`fadeslideshow.js`尝试搜索`gallerylayer`，你会看到这一行：

```
setting.$gallerylayers=$('<div class="gallerylayer"></div><div class="gallerylayer"></div>') //two stacked DIVs to display the actual slide 
        .css({position:'absolute', left:0, top:0, width:'100%', height:'100%', background:'black'}) 
```

在这里你会看到黑色，相应地改变它。

# c# - 泛型：不能隐式转换类型

> ID：11449815
> 
> 赞同：0
> 
> 时间：2012-07-12T10:22:13.090
> 
> 标签：c#, generics

我有以下课程：

```
 public interface IWaybillDocument
    {
        long DocumentId { get; set; }
        long BillingDocumentId { get; set; }

        string ShipToName { get; set; }
        byte AddressType { get; set; }
        string City { get; set; }
        string Country { get; set; }
        string PostCode { get; set; }
        string StateRegion { get; set; }
        string Street1 { get; set; }
        string Street2 { get; set; }
        string Suburb { get; set; }

        void MergeAddressing(Address address);
    }
}

    public class WaybillDocumentList : ERPListBase<IWaybillDocument>
    {
        public WaybillDocumentList() : base() { }
    }

 public partial class WaybillDocument : IWaybillDocument, INonrepudiable
    {

        public void MergeAddressing(Address address)
        {
            address.Street1 = this.Street1;
            address.Street2 = this.Street2;
            address.Suburb = this.Suburb;
            address.City = this.City;
            address.ZipCode = this.PostCode;
            address.StateRegion = this.StateRegion;
            address.Country = this.Country;
            address.AddressKind = (AddressKind)this.AddressType;
        }
    } 
```

它们都编译得很好，但是在尝试应用此扩展方法时：

```
 public static EntitySet<T> ToEntitySetFromInterface<T, U>(this IList<U> source)
            where T : class, U
        {
            var es = new EntitySet<T>();
            IEnumerator<U> ie = source.GetEnumerator();
            while (ie.MoveNext())
            {
                es.Add((T)ie.Current);
            }
            return es;
        } 
```

像这样：

```
public void InsertWaybills(WaybillDocumentList waybills)
        {
            try
            {
                ;
                this.Context.WaybillDocuments.InsertAllOnSubmit(waybills.ToEntitySetFromInterface<WaybillDocument, IWaybillDocument>());
                this.Context.SubmitChanges();
            }
            catch (Exception ex)
            {
                throw new DALException("void InsertWaybills(WaybillList waybills) failed : " + ex.Message, ex);
            }
        } 
```

我收到编译错误

> 类型“WaybillDocument”不能用作泛型类型或方法“LinqExtensions.ToEntitySetFromInterface(System.Collections.Generic.IList)”中的类型参数“T”。没有从“WaybillDocument”到“IWaybillDocument”的隐式引用转换

和

```
waybills.ToEntitySetFromInterface<WaybillDocument, IWaybillDocument>() 
```

下划线。为什么它清楚地继承了接口？

更新：ERPListBase（删除细节）

```
public class ERPListBase<T> : List<T>
{
    public ERPListBase()
        : base() {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:35:51.487

我已将您的代码粘贴到新项目中，并进行了一些小的修改，例如 ERPListBase -> List 并且它可以编译。所以我的猜测是你有两个名为 IWaybillDocument 的接口，你在某处引用了错误的其中一个。

# java - 小程序显示灰度图变黑

> ID：11449816
> 
> 赞同：0
> 
> 时间：2012-07-12T10:22:16.827
> 
> 标签：java, image, applet, grayscale

IBM 内容管理器以灰度存储我所有的图像，但是当我检索它并在小程序中显示时，灰度不会转换为二进制或保持原样，但它会变成全黑。

可能是什么问题？

我应该在小程序上呈现灰度图像之前将其转换为二进制吗？

编辑：我从这里使用 TViewerApplet.java [http://publib.boulder.ibm.com/infocenter/cmgmt/v8r4m0/index.jsp?topic=%2Fcom.ibm.samples.doc%2Fsamples%2Fjava%2Fviewer%2Freadme .html](http://publib.boulder.ibm.com/infocenter/cmgmt/v8r4m0/index.jsp?topic=%2Fcom.ibm.samples.doc%2Fsamples%2Fjava%2Fviewer%2Freadme.html)

并从下面的代码中调用它

```
<BODY>
<table width="100%" border="1">
<tr>
<td width="100%">
<applet name="viewerApplet" id="TViewerApplet" width="100%" height="500" align="baseline" code="com.bsli.applet.TViewerApplet.class" codebase="./classes" mayscript="mayscript" archive="cmbview81.jar">    
</applet>
</td>
</tr>
</table>

<script type="text/javascript">
    var name = '<%=request.getParameter("name")%>';
    alert('name..' + name);
    var host = '<%=request.getLocalName()%>';
    var port = '<%=request.getLocalPort()%>';
    var contextPath = '<%=request.getContextPath()%>';

    var url = "http://"+host+":"+port+contextPath+"/CMServlet.jsp?pid="+pid;
    alert('url..'+url);
    url = encodeURI(url);   
    window.document.viewerApplet.check_setInfo_openDocument(pid,url,name,'<%=request.getParameter("userid")%>');

</script>
</BODY> 
```

# c# - 尝试从目录打开文件时出错

> ID：11449817
> 
> 赞同：0
> 
> 时间：2012-07-12T10:22:26.613
> 
> 标签：c#

我正在尝试打开文件，但收到：

> 该进程无法访问文件“X:\SubGraph\Prozess A.1.1.wkd”，因为它正被另一个进程使用。

任何人都可以帮忙吗？

```
string activeDirectory = @"X:\SubGraph\";
string[] files = Directory.GetFiles(activeDirectory);
foreach (string fileName in files){
    FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read);
    ....
    ....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:28:56.877

请尝试通过提供 FileShare.Read 来打开它

```
FileStream s2 = new FileStream(name, FileMode.Open, FileAccess.Read, FileShare.Read); 
```

> **从 MSDN 获取 FileShare.Read**允许随后打开文件进行读取。如果未指定此标志，则任何打开文件进行读取的请求（由该进程或其他进程）都将失败，直到文件关闭。但是，即使指定了此标志，仍可能需要其他权限才能访问该文件。

# hadoop - 为什么 Hadoop shuffle 不能按预期工作

> ID：11449819
> 
> 赞同：0
> 
> 时间：2012-07-12T10:22:31.540
> 
> 标签：hadoop, mapreduce

我有这个 hadoop map reduce 代码，它适用于图形数据（以邻接表形式），有点类似于邻接表到邻接表转换算法。主要的 MapReduce 任务代码如下：

```
public class TestTask extends Configured
implements Tool {

public static class TTMapper extends MapReduceBase
    implements Mapper<Text, TextArrayWritable, Text, NeighborWritable> {

    @Override
    public void map(Text key, 
            TextArrayWritable value,
            OutputCollector<Text, NeighborWritable> output, 
            Reporter reporter) throws IOException {

        int numNeighbors = value.get().length;
        double weight = (double)1 / numNeighbors;

        Text[] neighbors = (Text[]) value.toArray();

        NeighborWritable me = new NeighborWritable(key, new DoubleWritable(weight));

        for (int i = 0; i < neighbors.length; i++) {
            output.collect(neighbors[i], me);
        }   
    }       
}

public static class TTReducer extends MapReduceBase
    implements Reducer<Text, NeighborWritable, Text, Text> {

    @Override
    public void reduce(Text key, 
                        Iterator<NeighborWritable> values,
                        OutputCollector<Text, Text> output, 
                        Reporter arg3)
            throws IOException {

        ArrayList<NeighborWritable> neighborList = new ArrayList<NeighborWritable>();

        while(values.hasNext()) {
            neighborList.add(values.next());
        }

        NeighborArrayWritable neighbors = new NeighborArrayWritable
                            (neighborList.toArray(new NeighborWritable[0]));

        Text out = new Text(neighbors.toString());

        output.collect(key, out);

    }

}

@Override
public int run(String[] arg0) throws Exception {
    JobConf conf = Util.getMapRedJobConf("testJob",
                                         SequenceFileInputFormat.class, 
                                         TTMapper.class, 
                                         Text.class, 
                                         NeighborWritable.class, 
                                         1, 
                                         TTReducer.class, 
                                         Text.class, 
                                         Text.class, 
                                         TextOutputFormat.class, 
                                         "test/in", 
                                         "test/out");
    JobClient.runJob(conf);
    return 0;
}

public static void main(String[] args) throws Exception {
    int res = ToolRunner.run(new TestTask(), args);
    System.exit(res);
}

} 
```

辅助代码如下：TextArrayWritable：

```
public class TextArrayWritable extends ArrayWritable {
public TextArrayWritable() {
    super(Text.class);
}

public TextArrayWritable(Text[] values) {
    super(Text.class, values);
}

} 
```

邻居可写：

```
public class NeighborWritable implements Writable {

private Text nodeId;
private DoubleWritable weight;

public NeighborWritable(Text nodeId, DoubleWritable weight) {
    this.nodeId = nodeId;
    this.weight = weight;
}

public NeighborWritable () { }

public Text getNodeId() {
    return nodeId;
}

public DoubleWritable getWeight() {
    return weight;
}

public void setNodeId(Text nodeId) {
    this.nodeId = nodeId;
}

public void setWeight(DoubleWritable weight) {
    this.weight = weight;
}

@Override
public void readFields(DataInput in) throws IOException {
    nodeId = new Text();
    nodeId.readFields(in);

    weight = new DoubleWritable();
    weight.readFields(in);
}

@Override
public void write(DataOutput out) throws IOException {
    nodeId.write(out);
    weight.write(out);
}

public String toString() {
    return "NW[nodeId=" + (nodeId != null ? nodeId.toString() : "(null)") +
        ",weight=" + (weight != null ? weight.toString() : "(null)") + "]";
}

public boolean equals(Object o) {
    if (!(o instanceof NeighborWritable)) {
        return false;
    }

    NeighborWritable that = (NeighborWritable)o;

    return (nodeId.equals(that.getNodeId()) && (weight.equals(that.getWeight())));
}

} 
```

和 Util 类：

```
public class Util {

public static JobConf getMapRedJobConf(String jobName,
                                              Class<? extends InputFormat> inputFormatClass,
                                              Class<? extends Mapper> mapperClass,
                                              Class<?> mapOutputKeyClass,
                                              Class<?> mapOutputValueClass,
                                              int numReducer,
                                              Class<? extends Reducer> reducerClass,
                                              Class<?> outputKeyClass,
                                              Class<?> outputValueClass,
                                              Class<? extends OutputFormat> outputFormatClass,
                                              String inputDir,
                                              String outputDir) throws IOException {

    JobConf conf = new JobConf();

    if (jobName != null)
        conf.setJobName(jobName);

    conf.setInputFormat(inputFormatClass);

    conf.setMapperClass(mapperClass);

    if (numReducer == 0) {
        conf.setNumReduceTasks(0);

        conf.setOutputKeyClass(outputKeyClass);
        conf.setOutputValueClass(outputValueClass);

        conf.setOutputFormat(outputFormatClass);

    } else {
        // may set actual number of reducers
        // conf.setNumReduceTasks(numReducer);

        conf.setMapOutputKeyClass(mapOutputKeyClass);
        conf.setMapOutputValueClass(mapOutputValueClass);

        conf.setReducerClass(reducerClass);

        conf.setOutputKeyClass(outputKeyClass);
        conf.setOutputValueClass(outputValueClass);

        conf.setOutputFormat(outputFormatClass);

    }

    // delete the existing target output folder
    FileSystem fs = FileSystem.get(conf);
    fs.delete(new Path(outputDir), true);

    // specify input and output DIRECTORIES (not files)
    FileInputFormat.addInputPath(conf, new Path(inputDir));
    FileOutputFormat.setOutputPath(conf, new Path(outputDir));

    return conf;        

}

} 
```

我的输入如下图：（二进制格式，这里我给出文本格式）

```
1   2
2   1,3,5
3   2,4
4   3,5
5   2,4 
```

根据代码的逻辑，输出应该是：

```
1   NWArray[size=1,{NW[nodeId=2,weight=0.3333333333333333],}]
2   NWArray[size=3,{NW[nodeId=5,weight=0.5],NW[nodeId=3,weight=0.5],NW[nodeId=1,weight=1.0],}]
3   NWArray[size=2,{NW[nodeId=2,weight=0.3333333333333333],NW[nodeId=4,weight=0.5],}]
4   NWArray[size=2,{NW[nodeId=5,weight=0.5],NW[nodeId=3,weight=0.5],}]
5   NWArray[size=2,{NW[nodeId=2,weight=0.3333333333333333],NW[nodeId=4,weight=0.5],}] 
```

但输出如下：

```
1   NWArray[size=1,{NW[nodeId=2,weight=0.3333333333333333],}]
2   NWArray[size=3,{NW[nodeId=5,weight=0.5],NW[nodeId=5,weight=0.5],NW[nodeId=5,weight=0.5],}]
3   NWArray[size=2,{NW[nodeId=2,weight=0.3333333333333333],NW[nodeId=2,weight=0.3333333333333333],}]
4   NWArray[size=2,{NW[nodeId=5,weight=0.5],NW[nodeId=5,weight=0.5],}]
5   NWArray[size=2,{NW[nodeId=2,weight=0.3333333333333333],NW[nodeId=2,weight=0.3333333333333333],}] 
```

我无法理解预期输出没有出现的原因。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:32:37.390

你正在犯规对象重用

```
while(values.hasNext()) {
    neighborList.add(values.next());
} 
```

`values.next()`将返回相同的对象引用，但该对象的基础内容将在每次迭代时发生变化（`readFields`调用该方法以重新填充内容）

建议您修改（您需要`conf`从设置方法获取配置变量，除非您可以从 Reporter 或 OutputCollector 获取它 - 抱歉，我不使用旧 API）

```
while(values.hasNext()) {
    neighborList.add(
        ReflectionUtils.copy(conf, values.next(), new NeighborWritable());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:17:52.323

但是我仍然不明白为什么我的单元测试通过了。这是代码 -

```
public class UWLTInitReducerTest {

private Text key;
private Iterator<NeighborWritable> values;
private NeighborArrayWritable nodeData;
private TTReducer reducer;

/**
 * Set up the states for calling the map function
 */
@Before
public void setUp() throws Exception {
    key = new Text("1001");
    NeighborWritable[] neighbors = new NeighborWritable[4];
    for (int i = 0; i < 4; i++) {
        neighbors[i] = new NeighborWritable(new Text("300" + i), new DoubleWritable((double) 1 / (1 + i)));
    }

    values = Arrays.asList(neighbors).iterator();

    nodeData = new NeighborArrayWritable(neighbors);

    reducer = new TTReducer();

}

/**
 * Test method for InitModelMapper#map - valid input
 */
@Test
public void testMapValid() {

    // mock the output object
    OutputCollector<Text, UWLTNodeData> output = mock(OutputCollector.class);

    try {
        // call the API
        reducer.reduce(key, values, output, null);

        // in order (sequential) verification of the calls to output.collect()
        verify(output).collect(key, nodeData);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

} 
```

为什么这段代码没有捕捉到错误？

# css - iframe 高度但不是宽度

> ID：11449822
> 
> 赞同：0
> 
> 时间：2012-07-12T10:22:38.857
> 
> 标签：css, facebook-javascript-sdk, facebook-iframe, autogrow

在我的 facebook 页面中，我添加了我的 iframe 应用程序设置：画布宽度固定（760 像素）和高度固定 800 像素；

我打电话给 FB.Canvas.setAutoGrow(90); 它适用于高度但不适用于宽度。正常吗？我希望我的 iframe 宽度约为 740px。 [https://www.facebook.com/pages/Camping-Demonstration/167138953341219?sk=app_191265277583854](https://www.facebook.com/pages/Camping-Demonstration/167138953341219?sk=app_191265277583854)

我尝试使用 setSize ，它也适用于高度。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:46:25.927

这是一个页面选项卡应用程序，您刚才提到的设置适用于画布应用程序 - 页面选项卡的设置位于应用程序设置的主页上，在同一部分中您输入页面选项卡 URL 和安全页面选项卡 URL 值

# c# - 创建具有唯一排列的所有二叉树

> ID：11449825
> 
> 赞同：3
> 
> 时间：2012-07-12T10:22:47.090
> 
> 标签：c#, binary-tree

我有一个相当愚蠢的问题，我发誓这不是家庭作业。对于我的一生，我不记得我是否曾经研究过一种算法来做到这一点，而且我的头脑/创造力让我失望了。

我有一个唯一节点列表。我需要生成包含这些节点的二叉树的所有唯一排列。如果您想知道，手性很重要；在其轴（左/右）上翻转的二叉树是不一样的。

一些背景信息，如果您想知道：它是用于进化程序的种子创建算法，所以大量的小种子是可以的。

**编辑：澄清唯一性**

```
Examples:

This:
  1
 / \
2   3

Is not the same as this:
  1
 / \
3   2

Nor is it the same as this:

    1
   /
  3
 /
2   

Nor this:

1
 \
  2
   \
    3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:41:08.167

Eric Lippert 在[这里](http://blogs.msdn.com/b/ericlippert/archive/2010/04/19/every-binary-tree-there-is.aspx)有一篇相关的帖子（实际上是一系列帖子的开始）。关键位是这种递归 LINQ 方法：

```
static IEnumerable<Node> AllBinaryTrees(int size)
{
    if (size == 0)
        return new Node[] { null };
    return from i in Enumerable.Range(0, size)
           from left in AllBinaryTrees(i)
           from right in AllBinaryTrees(size - 1 - i)
           select new Node(left, right);
} 
```

这将获得给定大小的所有可能的二叉树*结构*。

我认为，如果您采用（a）节点列表的所有排列，以及（b）Eric 的所有树结构列表，并执行两者的“叉积”（您将排列的节点分配给 a以某种一致~~的顺序从左到右~~构建结构）你应该得到你想要的所有树。

例如 3 个项目

```
Permutations                        Tree structures
123  132                                 .   .    .    .    .        
213  231                               ./  ./   ./ \.   \.   \.
312  321                             ./     \.         ./      \.

Result
:      1   1    1    1    1             1   1    1    1    1      
:    2/  2/   2/ \3   \2   \2         3/  3/   3/ \2   \3   \3
:  3/     \3         3/      \3     2/     \2         2/      \2

:      2   2    2    2    2             2   2    2    2    2      
:    1/  1/   1/ \3   \1   \1         3/  3/   3/ \1   \3   \3
:  3/     \3         3/      \3     1/     \1         1/      \1

:      3   3    3    3    3             3   3    3    3    3      
:    1/  1/   1/ \2   \1   \1         2/  2/   2/ \1   \2   \2
:  2/     \2         2/      \2     1/     \1         1/      \1 
```

如果您不关心手性，这将更加困难。

（生成输入节点的排列，并将排列分配给 Eric 的结构之一，应该是相当简单的......对吗？）

# c# - 解压文件时指定顺序

> ID：11449826
> 
> 赞同：1
> 
> 时间：2012-07-12T10:22:49.667
> 
> 标签：c#, dotnetzip

我正在使用 DotNetZip 库以编程方式压缩我的文件。然后使用 SFTP 将生成的 zip 文件上传到服务器。

我的问题是，是否有办法指定在服务器上解压缩文件的顺序。

我不确定执行解压缩任务的工作。

编辑：zip 包含 100 个文档（通常是 PDF）和每个文档的 100 个元数据文件。元数据文件以 .metadata 结尾。具有此类扩展名的文件会触发服务器上的作业以查找元数据引用的文档。我希望在提取所有其他普通文件后从 zip 中提取这些 .metadata 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:46:00.207

我刚刚在我的 LAMP 服务器上测试了这个。在我的情况下，减压发生在以下情况。您需要在您的服务器上对此进行测试以在您的情况下找到它。

```
firstly
    Folders a,A,b,B....--->z (alphabetically)
secondly
    Files a,A,b,B....--->z (alphabetically) 
```

根据您的情况测试解压缩顺序并命名元数据文件，以便它们在必要时位于列表的开头或结尾。

或者正如**@Onkelborg**所说，在您的情况下，解压缩操作可以在提取过程中遵循压缩顺序。如果不先测试，就没有明确的方法来判断。

即使这样，也可能有多个线程执行该操作，您可能会遇到问题，因此最安全的方法是将文件+元数据解压缩到临时位置，然后以正确的顺序移动它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:53:14.093

此类事情的常见方法通常是提取到一个临时位置，然后将东西移动到拾取位置。

这样你就不应该有关于半写文件或排序的问题，并且任何解压缩失败都不会给消费者留下半个数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:40:17.010

虽然您无法使用`ExtractAll`方法设置提取顺序，但您可以获取存档中的文件列表，`Entries`并使用`ExtractSelectedEntries`它来按您需要的顺序处理它们。
更新：

> 不，我对服务器和解压机制没有任何控制权

所以这不是 DotNetZip 使用的问题吗？.. 好的，计划 B：在另一个存档中发送元数据。但是可能存在解包不同步的问题。

# junit - JUnit NoSuchMethodError: CompilationResult.getErrors() 与 Play 测试

> ID：11449828
> 
> 赞同：0
> 
> 时间：2012-07-12T10:22:53.553
> 
> 标签：junit, playframework, playframework-1.x

我正在尝试从命令行运行 Play 1.2.3 测试并收到此错误：

```
[junit] Testcase: initializationError(com.package.MyTest):  Caused an ERROR
[junit] org.eclipse.jdt.internal.compiler.CompilationResult.getErrors()[Lorg/eclipse/jdt/core/compiler/CategorizedProblem;
[junit] java.lang.NoSuchMethodError: org.eclipse.jdt.internal.compiler.CompilationResult.getErrors()[Lorg/eclipse/jdt/core/compiler/CategorizedProblem; 
```

我尝试添加几个 Eclipse 和 Jasper 罐子，但到目前为止没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:22:55.660

通过将[gwt-dev-2.1.1.jar](http://www.java2s.com/Code/Jar/g/Downloadgwtdev211jar.htm)添加到类路径来修复。

# iphone - 音频压缩不适用于 iTunes 歌曲

> ID：11449831
> 
> 赞同：5
> 
> 时间：2012-07-12T10:22:56.640
> 
> 标签：iphone, objective-c, itunes, audio-converter

我正在研究从媒体选择器中选择一首歌曲并将数据发送到服务器的项目。我正在转换挑选的歌曲。它适用于普通歌曲（即不属于购买的 iTunes 的歌曲），对于购买的歌曲，我收到错误消息。我集成了苹果（iPhoneExtAudioFileConvertTest）提供的这个示例。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:03:37.630

Apple will reject it if they found anything like sending copyrighted content to some server . [Guidelines for Using Apple Trademarks and Copyrights](http://www.apple.com/legal/trademark/guidelinesfor3rdparties.html)

**How to Avoid Getting Your iPad App Rejected**

To avoid having your iPad app rejected by Apple, read the documentation, steer away from Apple trademarks and images, and stay away from content that's questionable in any legal sense. These kinds of things will get your app rejected before it ever has a chance to shine in the App Store:

**Linking to private frameworks:** Apple rejects apps that call external frameworks or libraries that contain non-Apple code. In addition, you can't download interpreted code to use in an app except for code that's interpreted and run by Apple's published APIs and built-in interpreters.

Private frameworks and interpreted code may hide functions that Apple would want to know about. (Some private frameworks have been found to mine personal information from iPhone users without their knowledge.) Apple already knows about most of the private frameworks, so don't bother with them.

**Straying too far from Apple's guidelines:** Be sure to follow these guidelines, which are published in the iPhone Developer Center.

**Copying existing functionality:** Although you should use the functionality provided for developers, you shouldn't simply copy something that Apple already does. Mini Web browsers — apps that essentially show Web pages and do little else — are particularly vulnerable. For example, a simple iPhone app that duplicated the functionality of Safari's bookmark button was rejected.

Using an inappropriate keyboard type: If your app needs a phone number or other numeral-only input, and it presents a keyboard that also includes the possibility of entering standard alphanumeric input, it will most likely be rejected.

Being oblivious about whether your user lost connection: The iPad is all about using the Internet. If your app uses a network connection, it's your app's responsibility to tell the user if and when his or her iPad loses its network connection while using your app.

Although no one knows the true figure, the vast majority of submitted apps are accepted into the App Store. Besides the typical rejections (mostly for bugs or for improper use of artwork or trademarks in the app), some apps were rejected for pornographic images, some were rejected for being too similar to Apple's own apps, and others fell into some gray area that Apple hadn't anticipated — for instance, apps that are intended to help people cheat at gambling in casinos.

Before you upload your app and its data, make sure you haven't run afoul of any of Apple's rules about trademarks, copyrights, and artwork. Be sure to peruse Apple's posted Guidelines for Using Apple's Trademarks and Copyrights. Here are some tips:

Use the same icon for the app (the bundle icon) and the App Store page icon.

Icons must be different for lite and pro versions (such as free and paid versions).

Don't use any part of an Apple image and certainly none of the company's trademark images or names (including photos or illustrations of the iPad, or even the word iPad).

If you use any of Apple's user interface graphics, you must use them in the way they were intended. For example, the blue + button should be used only to add an item to a list.

Don't infringe on other trademarks, either. Your app's title, description, and content must not infringe upon other non-Apple trademarks or product likenesses.

Keyword terms must be related to your app's content. You can't use offensive terms, and it's a big no-no to refer to other apps, competitive or not.

Don't include pricing information in your app's description and release notes, mostly because it would cause confusion in other countries due to pricing differences.

Don't mention Steve. Apple will reject any app that mentions Steve Jobs in any context, even as a clue in a puzzle — it doesn't matter how trivial the reference; just the name is enough.

Don't try to fool the ratings. Apps are rated accordingly for the highest (meaning most adult) level of content that the user is able to access. If you hide it, they will find it!

# html - 根据Phonegap android应用程序中的要求显示不同的登录页面？

> ID：11449832
> 
> 赞同：1
> 
> 时间：2012-07-12T10:23:01.190
> 
> 标签：html, jquery-mobile, cordova

My Phonegap 应用程序登录页面包含一些输入字段，例如用户名、密码、url、设备类型等……用户在第一次登录时必须输入这些字段才能激活应用程序。下次用户只需输入用户名和密码，因为应用程序已经激活。所以我想在第二次登录时只显示用户名和密码字段。

我有一个 phonegap 插件来检查应用程序是否被激活。我想调用这个插件，根据回调响应，我将在登录页面上只显示必要的字段。那么最简单的方法是什么？

我试过这个..

```
$("#loginPage").live('pagebeforeshow',function(event, ui){
window.plugins.AuthPlugin.appIsActive(appIsActiveCallBack);
});
function appIsActiveCallBack(result){//Show only relative fields...} 
```

但是我收到了这个错误：Uncaught TypeError: Cannot call method 'appIsActive' of undefined

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:26:57.453

你得到`Uncaught TypeError`是因为你试图在设备准备好之前调用插件......只有在设备准备好时才调用插件......

**更新**

您需要做的是确定您只需要在本机端显示的所有字段......之后将一个变量（标志）从 java 传递到 JavaScript，该变量可以在**pagebeforeshow访问**

所以你的活动看起来像这样

```
/*
 * Some database operations which you need to check 
 *  so that you can determine what to show
 */
this.setIntegerProperty("loadUrlTimeoutValue", 70000);
super.loadUrl("file:///android_asset/www/index.html", 20000);
super.loadUrl("javascript: { var pageFlag = '" + flag + "';}"); 
```

在你的**index.html**中像这样显示

```
$("#loginPage").live('pagebeforeshow',function(event, ui){
alert(pageFlag);
}); 
```

之后使用标志，您可以确定要显示的内容和不显示的内容...

希望能帮助到你...

# javascript - 如何让标记和 google-code-prettify 一起工作？

> ID：11449837
> 
> 赞同：2
> 
> 时间：2012-07-12T10:23:39.347
> 
> 标签：javascript, codehighlighter

我正在使用[标记](https://github.com/chjj/marked)将一些降价代码转换为具有一些代码块的 html。所以我想使用[google-code-prettify](http://code.google.com/p/google-code-prettify)来突出显示代码。

Marked 为代码提供了回调，如文档所述：

```
marked.setOptions({
  gfm: true,
  pedantic: false,
  sanitize: true,
  // callback for code highlighter
  highlight: function(code, lang) {
    if (lang === 'js') {
      return javascriptHighlighter(code);
    }
    return code;
  }
}); 
```

但我没有找到像`javascritHighlighter(..)`google-code-prettify 这样的方法。如何让他们一起工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T03:14:06.030

这是我自己做的。您正在寻找的功能是：

```
/**
 * @param sourceCodeHtml {string} The HTML to pretty print.
 * @param opt_langExtension {string} The language name to use.
 *     Typically, a filename extension like 'cpp' or 'java'.
 * @param opt_numberLines {number|boolean} True to number lines,
 *     or the 1-indexed number of the first line in sourceCodeHtml.
 */
function prettyPrintOne(sourceCodeHtml, opt_langExtension, opt_numberLines) 
```

所以你会想要这样的东西：

```
prettyPrintOne(code, 'js', false) 
```

# php - 如何使用 Symfony2 实现搜索过滤器表单

> ID：11449840
> 
> 赞同：6
> 
> 时间：2012-07-12T10:23:46.313
> 
> 标签：php, doctrine-orm, symfony-2.1

我有一个要在页面上显示的项目列表，上面有一个搜索表单来过滤这些项目，就像在任何常见的后端一样。问题是我不知道如何将搜索条件添加到带有连接的现有查询中......这就是我所拥有的：

我在与实体关联的存储库上使用特定方法在查询中添加连接（以避免许多查询）。控制器如下所示：

```
class ModelController extends Controller
{
    public function indexAction(Request $request)
    {
        // ...
        $em = $this->getDoctrine()->getManager();
        $query = $em->getRepository('AcmeDemoBundle:Item')->getList();
    }
} 
```

存储库上的`getList`方法如下所示：

```
use Doctrine\ORM\EntityRepository;

// ...

class ItemRepository extends EntityRepository
{
    public function getList()
    {
        $queryBuilder = $this
            ->createQueryBuilder('i')
            ->innerJoin('i.brand', 'b');

        return $queryBuilder->getQuery();
    }
} 
```

我创建了一个`ItemSearchType`包含多个字段的表单对象来搜索项目。

如何从搜索表单中提供的数据中轻松添加搜索条件以显示过滤的项目？

这是我的控制器中关于搜索表单的内容：

```
class ModelController extends Controller
{
    public function indexAction(Request $request)
    {

        // ...
        if ($request->getMethod() === 'POST') {
           $searchForm->bindRequest($request);

           if ($searchForm->isValid()) {
               $searchCriteria = $searchForm->getData();

              // Do something with this data! ...but I don't know how
           }
     }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T22:09:01.047

这是我会尝试的：

```
public function getListBy($criteria)
{
    $qb = $this->createQueryBuilder('i');

    $qb->innerJoin('i.brand', 'b');

    foreach ($criteria as $field => $value) {
        if (!$this->getClassMetadata()->hasField($field)) {
            // Make sure we only use existing fields (avoid any injection)
            continue;
        }

        $qb ->andWhere($qb->expr()->eq('i.'.$field, ':i_'.$field))
            ->setParameter('i_'.$field, $value);
    }

    return $qb->getQuery()->getResult();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T20:42:27.323

Here I posted an [answer](https://stackoverflow.com/questions/22196006/filter-a-listing-in-symfony2/22998341#22998341) for this, I use [LexikFormFilterBundle](https://github.com/lexik/LexikFormFilterBundle) filterTypes and QueryBuilder, plus a TypeGuesser I made that abstracts the filterForm creation process.

you can install both services as separate Bundles with Composer. The resulting code is cleaner

From the README, in case you don't want to navigate to github :P

```
/**
 * Creates a Filter form to search for Entities.
 *
 * @param AbstractType|string $formType The `generate:doctrine:form` generated Type or its FQCN.
 *
 * @return \Symfony\Component\Form\Form The filter Form
 */
private function createFilterForm($formType)
{
    $adapter = $this->get('dd_form.form_adapter');
    $form = $adapter->adaptForm(
        $formType,
        $this->generateUrl('document_search'),
        array('fieldToRemove1', 'fieldToRemove2')
    );
    return $form;
} 
```

**It's broken for SF >= 2.8** Need a fix [here](https://github.com/juanmf/FilterTypeGuesserBundle/commit/21b8a7cc01f26df69561a33f7984efa3eb85a2eb#commitcomment-16801346)

# .net - 如何将 stylecop 4.7 与 TeamCity 7.0.3 集成

> ID：11449847
> 
> 赞同：0
> 
> 时间：2012-07-12T10:24:26.440
> 
> 标签：.net, build, teamcity, stylecop

我已经从[https://bitbucket.org/metaman/teamcitydotnetcontrib/overview下载了](https://bitbucket.org/metaman/teamcitydotnetcontrib/overview)**stylecop** teamcity 插件

我已将其添加为构建步骤，并试图让它扫描我的`cs. proj`文件。你能帮我解决文件包含模式吗？我什么都试过了。

我使用了相对于结帐文件夹路径，使用带有或不带有`ant`通配符的绝对路径，将其指向`sln`文件或`csproj`文件，没有任何作用。

我已经下载了插件的源代码，它确实允许使用绝对或相对文件路径。

**我的最终目标是如果stylecop**发现代码中的任何错误级别问题，构建失败，这是否可能？

问候，

彼得

作为备份，我正在考虑从那里使用 msbuild 和 hook stylecop

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T14:33:39.087

尝试;

```
**\*.csproj 
```

在`Files or wildcards`输入。

（是的，我知道这已经晚了一年，但以防万一它对其他人有帮助）

# r - 计算 sapply 中的迭代次数

> ID：11449855
> 
> 赞同：0
> 
> 时间：2012-07-12T10:24:57.550
> 
> 标签：r

我正在使用 sapply 和绘图。但是我无法为我使用 sapply 绘制的每条线赋予不同的颜色。有没有一种方法可以在每次调用 sapply 时增加一个变量，并使用该变量（VARIABLE）使用 plot_colors[VARIABLE] 更改颜色

```
 plot_colors <- c("blue","red","forestgreen","black")
    sapply(unique(ab$region[ab$region]), FUN=graphplot, REG=ab, tl=z, num=num+1)
    graphplot <- function(l, REG, tl, num) {
            dl <- REG[REG$region == l, tl]
            datel <- REG[REG$region == l, "date"]
            dl <- cbind(as.numeric(rownames(REG[REG$region == l, ])), REG[REG$region == l, tl])
            lines(dl, type="l", pch=2, col=plot_colors[num])
            num <- num + 1
    } 
```

这是完整的代码。

```
 avg_data <- read.table("qes.tbl", header=T, sep=",")
    avg_data
    #        dl <- avg_data[avg_data$region == "prod", "AveElapsedTime"]
            #datel <- avg_data[avg_data$region == "prod", "date"]
    #Creating the graph pdf in the below path to give as a link in the mail
    FL <- 20120631
    file <- paste("graph", FL, "pdf", sep=".")
    plot_colors <- c("blue","red","forestgreen","black")
    pdf(file, height=4.5, width=9.5, onefile=TRUE)
    graphplot <- function(l, REG, tl, num) {
            dl <- REG[REG$region == l, tl]
            datel <- REG[REG$region == l, "date"]
            dl <- cbind(as.numeric(rownames(REG[REG$region == l, ])), REG[REG$region == l, tl])
            lines(dl, type="l", pch=2, col=plot_colors[num])
            num <- num + 1
    }
    drawGraph <- function(ab, y, z, s) {
            #Creating X axis
            x <- ab[ab$region == "Beta", z]
            y <- ab[,1]
            g_range <- range(0,x[!is.na(x)])
            plot(NA, type="l", col="orange", xlim= c(1, length(y)),  ylim=g_range,axes=FALSE, ann=FALSE)
            num=1
            sapply(unique(ab$region[ab$region]), FUN=graphplot, REG=ab, tl=z, num)
            box()
            axis(1, at=1:length(y), lab=FALSE)
            text(1:length(y), par("usr")[3] - 2, srt=45, adj=1.2, labels=y, xpd=T, cex=0.3)
            scale <- s
            axis(2, las=1, at=scale*0:g_range[2], cex.axis=0.3)
            main_title<-as.expression(z)
            #Caculationg Mean, Upper limit and lower limit using the below commands
            MEANLIMIT <- seq(length=length(y), from=mean(x), by=0)
            ULIMIT <- seq(length=length(y), from=mean(x) + 2.66*sum(abs(diff(x)))/length(x), by=0)
            LLIMIT <- seq(length=length(y), from=mean(x) - 2.66*sum(abs(diff(x)))/length(x), by=0)
            lines(MEANLIMIT, type="l", col="black")
            lines(ULIMIT, type="l", pch=2, lty=2, col="grey")
            lines(LLIMIT, type="l", pch=2, lty=2, col="black")
            title(main=main_title, col.main="red", font.main=4)
            title(xlab="Test Execution Date", col.lab=rgb(0,0.5,0))
            title(ylab="Millisecond", col.lab=rgb(0,0.5,0))
            legend("topright", g_range[2], main_title, cex=0.4, col=c("blue"), lty=1);
    }
    lab<-as.character(avg_data$date)
    AET <- avg_data$AveElapsedTime
    MTitle <- "AveElapsedTime"
    #Creating graph for Average Elapsed time
            drawGraph(avg_data, lab, MTitle, 5) 
```

这是qes.tbl ..

```
 date,region,AveElapsedTime
    5/1/2012,preprod,23
    5/2/2012,prod,76
    5/3/2012,Beta,34
    5/4/2012,prod,30
    5/5/2012,Beta,22
    5/6/2012,preprod,32
    5/7/2012,Beta,21
    5/8/2012,prod,44
    5/9/2012,preprod,45
    5/10/2012,Beta,23
    5/11/2012,prod,50
    5/13/2012,Beta,26
    5/14/2012,preprod,33
    5/15/2012,Beta,75
    5/16/2012,preprod,56
    5/17/2012,Beta,32
    5/18/2012,preprod,67
    5/19/2012,prod,40

    structure(list(date = structure(c(3, 11, 12, 13, 14, 15, 16, 17, 18, 1, 2, 4, 5, 6, 7, 8, 9, 10), .Label = c("5/10/2012", "5/11/2012", "5/1/2012", "5/13/2012", "5/14/2012", "5/15/2012", "5/16/2012", "5/17/2012", "5/18/2012", "5/19/2012", "5/2/2012", "5/3/2012", "5/4/2012", "5/5/2012", "5/6/2012", "5/7/2012", "5/8/2012", "5/9/2012"), class = "factor"), region = structure(c(2, 3, 1, 3, 1, 2, 1, 3, 2, 1, 3, 1, 2, 1, 2, 1, 2, 3), .Label = c("Beta", "preprod", "prod"), class = "factor"), AveElapsedTime = c(23, 76, 34, 30, 22, 32, 21, 44, 45, 23, 50, 26, 33, 75, 56, 32, 67, 40)), .Names = c("date", "region", "AveElapsedTime"), class = "data.frame", row.names = c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:30:37.933

可以使用以下思路

```
sapply(as.list(rep("w",20)),function(x){gsub("[^0-9]","",deparse(substitute(x)))}) 
```

获取索引

或者您可以使用 mapply

另一个例子

```
sapply(as.list(letters[1:20]),function(x){index<-gsub("[^0-9]","",deparse(substitute(x)));paste("i am index",index,"for letter",x)}) 
```

# language-agnostic - 给定中心画一个等边三角形

> ID：11449856
> 
> 赞同：11
> 
> 时间：2012-07-12T10:25:00.590
> 
> 标签：language-agnostic, drawing, shape

`cx`给定圆心和`cy` 圆心圆的半径，如何绘制等边三角形？

我如何找到一个点是否在三角形内？

![在此处输入图像描述](../Images/a0d67ba935d0c984776ed3832ea30f98.png)

PS：我正在为 构建这个`android`，但这个问题与语言无关。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T23:38:11.757

### 对于你的第一个问题

上图中的 C 点很简单，就是 (cx, cy + r)。

我可以想到两种相当简单的方法来获得点 a 和 b：

**第一种方法**：假设 (cx,cy) 是原点，将点 C 旋转 60 度和 120 度以获得 a 和 b。这可以通过以下公式来完成：

*   bx = cx * cos( 120 度 ) - ( cy * sin( 120 度 ) )
*   by = cx * sin( 120 度 ) + ( cy * cos( 120 度 ) )
*   ax = cx * cos( 240 度 ) - ( cy * sin( 240 度 ) )
*   ay = cx * sin( 240 度) + ( cy * cos( 240 度))

另请查看[wikipedia 上的这篇文章](http://en.wikipedia.org/wiki/Rotation_(mathematics))。

**第二种方法**：画一条穿过 (cx, cy) 且斜率为 -30 度的线。该线与圆相交的地方将是点b。圆由以下等式定义：

```
 ( x - c.x )^2 + ( y - c.y )^2 = r^2 
```

（注意，会有两个交点，所以选择正确的一个）。

然后对通过 (cx, cy) 的正 30 度角线执行相同操作，得到点 a。

你的线会有斜率：1 / sqrt(3) 和 -1 / sqrt(3)

### 对于你的第二个问题

一旦有了形成等边三角形的点 A、B 和 C，检测点 (x,y) 是否位于三角形中的最快和最简单的方法之一就是基于叉积和向量。

基本上，看看 (x,y) 是否在“向量”A->B 的左侧。然后看看它是否在B->C的左边。然后检查它是否在 C->A 的左侧。

[此处](https://stackoverflow.com/questions/3461453/determine-which-side-of-a-line-a-point-lies)引用的以下方法可让您检查点是否在向量的左侧。

```
public bool isLeft(Point A, Point B, Point C){
    return ((B.x - A.x)*(C.y - A.y) - (B.y - A.y)*( C.x - A.x)) > 0;
} 
```

在方法 A = line point1、b = line point2 和 c = 要检查的点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-07-31T08:24:12.080

对于任何只想在单位圆上获得等边三角形坐标的懒惰人（比如我）：

```
A: (-0.866, -0.5)
B: (0.866, -0.5)
C: (0.0, 1.0) 
```

对于不同的位置和/或半径，将所有值乘以`r`，然后添加`cx`到`x`坐标和`cy`s `y`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:35:26.113

此刻，我只能回答你的第二个问题。只要您存储了定义三角形的点，就可以进行**点线相交测试。**您可以在计算机图形书籍中找到许多相关的算法。

**编辑**：我想了一种方法来解决您的基本问题（找到定义等边三角形的 3 个点，其中 cx、cy 和半径作为给定数据）。它依赖于任何三角形的 3 个角之和为 180 度的性质。我需要一些时间做进一步的检查，以确保它是正确的。然后，我将编辑我的答案以发布它。

**编辑完整答案**：此算法草图的实现依赖于您选择的编程语言和图形 API：

*   将 2D 坐标系的中心（假设它是顺时针方向）平移到质心圆的中心。
*   存储定义 2 条直线段的 2 个点以及圆的中心。这些段的联合可能会给你圆的直径。两个段都将圆心作为它们的 1 个定义点。其他 2 个定义点（您需要存储）在圆的圆周上（使用圆的半径长度来找到它们）。
*   将圆周上的 2 个点旋转 60 度，其中一个顺时针，另一个逆时针。存储他们的新坐标。画出连接它们的线。您有 3 个三角形顶点中的 2 个。
*   对坐标系的中心进行反向平移。
*   三角形的剩余顶点是圆半径和两条线段的交点，每条线段都从其各自已知的三角形顶点开始。
*   最后，存储顶点并绘​​制三角形。

希望有帮助。我将尝试添加一些图纸以进一步阐明此方法的步骤。此外，我将对这些步骤进行编程和测试，以确保正确解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-17T01:33:50.327

**我需要使用 SVG 和 Javascript 绘制一个等边三角形...**

我尝试了 Xantix 对第一个问题的回答，以便在给定中心点 (cx,cy) 和外接圆半径 (r) 的情况下绘制等边三角形，正如所指出的，这很容易解决点 C 的坐标 (cx, cy + r)。

但是，我无法弄清楚如何获得旋转方程来求解点 A 和 B 的任一坐标，因此我的解决方案如下。

**数学时间 - 求解 x**

假设 cx = 9, cy = 9, r = 6, 水平底。

首先，求三角形 (a,b,c) 的边长：

```
9r^2 = a^2 + b^2 + c^2

r^2 = 36, 9r^2 = 324, 324/3 = 108, sqrt(432) = 10.39 
```

一旦我们知道三角形每一边的长度（s = 10.39），我们就可以计算 x 坐标。Bx (14.2) 将 s/2 (5.2) 加到 cx 中，Ax (3.8) 从 cx 中减去 s/2。

**x 解决了现在需要 y**

说到 s/2，如果我们将三角形垂直分成两半（从点 C 到点 A 和 B 之间的中点），我们可以求解 y（最终给我们 Ay 和 By）：

```
a^2 + b^2 = c^2

a^2 + 27.04 (1/2 s squared) = 107.95 (length s squared)

a^2 = 80.91

sqrt(80.91) = 8.99 
```

从 cy + r (15 - 8.99 = 6.01) 中减去这个 y 值，我们就得到了点 A 和 B 的新 y 图。

```
Center ( 9.00, 9.00)
C      ( 9.00,15.00)
B      (14.20, 6.01)
A      ( 3.80, 6.01) 
```

**结论**

一旦我们知道等边三角形的边长，就可以在给定中心点、外接圆半径和水平底边的情况下计算点坐标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-27T19:50:58.073

这是我在java（android）上绘制三角形的方法：

```
mA = new PointD();
mB = new PointD();
mC = new PointD();
mCos120 = Math.cos(AppHelper.toRadians(120));
mSin120 = Math.sin(AppHelper.toRadians(120));
mCos240 = Math.cos(AppHelper.toRadians(240));
mSin240 = Math.sin(AppHelper.toRadians(240));

double r = 30; // this is distance from the center to one of triangle's point.
mA.set(0 + r, 0);
mB.x = mA.x * mCos120 - mA.y  * mSin120;
mB.y = mA.x * mSin120 + mA.y * mCos120;
mC.x = mA.x * mCos240 - mA.y * mSin240;
mC.y = mA.x * mSin240 + mA.y * mCos240;

mA = AppHelper.toScreenCoordinates(mCenterPoint, mA);
mB = AppHelper.toScreenCoordinates(mCenterPoint, mB);
mC = AppHelper.toScreenCoordinates(mCenterPoint, mC);

mPlayPath.reset();
mPlayPath.moveTo(mA.getX(), mA.getY());
mPlayPath.lineTo(mB.getX(), mB.getY());
mPlayPath.lineTo(mC.getX(), mC.getY());
mPlayPath.lineTo(mA.getX(), mA.getY());
mPlayPath.close();

public static PointD toScreenCoordinates(PointD center, PointD point) {
    return new PointD(point.x + center.x, center.y - point.y);
} 
```

其中 PointD 与 PointF 类似，但具有 double 类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-02T21:42:44.013

这是我的Python实现，希望对您有所帮助：

```
def construct_eq_triangle(centroid, radius):
    side_length = radius * math.sqrt(3)
    # Calculate three vertices of the triangle
    a = [centroid[0], centroid[1] + (math.sqrt(3) / 3) * side_length]  # Top vertex
    b = [centroid[0] - (side_length / 2), centroid[1] - (math.sqrt(3) / 6) * side_length]  # Bottom left vertex
    c = [centroid[0] + (side_length / 2), centroid[1] - (math.sqrt(3) / 6) * side_length]  # Bottom right vertex

    return a, b, c 
```

您可以`side_length`用任意值替换，也`centroid`可以是带有 2 个元素的 a`tuple`或 a `list`，第一个是 the `x`，第二个是`y`。

# symfony1 - embedForm 额外字段隐藏

> ID：11449857
> 
> 赞同：0
> 
> 时间：2012-07-12T10:25:14.710
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我在 listForm.class.php 中的部分代码：

```
public function configure() {
    $list_id = $this->getOption('list_id');
    $endkunde_id = $this->getOption('endkunde_id');
    $shopname_id = 1;

    $todoWrapperForm = new sfForm();
    $todoWrapperForm = new sfForm();
    //$todos = Doctrine_Core::getTable('Todo')->findAll();

    //$todos = Doctrine_Core::getTable('EinkaufslisteElemente')->findAll();
    $todos = Doctrine_Core::getTable('EinkaufslisteElemente')
            ->createQuery('ee')
            ->where('ee.einkaufsliste_id = ?', $list_id)
            ->innerJoin('ee.Einkaufsliste e')

            ->andWhere('e.shopname_id = ?', $shopname_id)
           ->innerJoin('e.EinkaufslisteEndkunde ek')
            ->execute();

    foreach ($todos as $todo) {
        $todoWrapperForm->embedForm($todo->getId(), new EinkaufslisteElementeForm($todo));
    }
    $todoWrapperForm->embedForm('new_1', new EinkaufslisteElementeForm());  // add one blank todo to start
    $this->embedForm('todos', $todoWrapperForm);

        $this->list =  new sfWidgetFormTextarea(array(), array('rows' => '10', 'cols' => '35'));

    $this->mergePostValidator(new sfValidatorDoctrineUnique(array('model'=>'todo', 'column'=>'task'), array('required' => false)))               ;
    $this->widgetSchema->setNameFormat('todo_list[%s]');
} 
```

我想从“客户”创建一个额外的字段，他的名字没有隐藏，我想创建一个输入字段，用表“列表”中的 list_id 隐藏。如何使用 embedForm 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:31:13.127

在您的内部`listForm`，只需在您的配置底部添加：

```
$this->widgetSchema['list_id']    = new sfWidgetFormInputHidden();
// do not forget to add the propel validator (ie: the one that can check if `list_id` is ok - like in the database)
$this->validatorSchema['list_id'] = new sfValidatorPass(); 
```

然后，在您的操作中，不要忘记将默认设置为`list_id`：

```
$form = new listForm();
$form->setDefault('list_id', $list_id); 
```

# vba - VBA 兼容性问题：64 位 Windows7（缺少 MSINET）和 Trim 函数兼容性问题

> ID：11449858
> 
> 赞同：0
> 
> 时间：2012-07-12T10:25:19.810
> 
> 标签：vba, excel, msinet

我正在尝试将在 Windows XP 32 位上运行的 VB Excel 应用程序升级到 Windows 7 64 位操作系统。有两个问题会影响这种操作。我发现这些话题并不少见。

1.  VBA 脚本必须连接到需要 Microsoft Internet 传输协议 6.0 (SP 6.0) 的服务器 - 在 System32 目录中注册的 MSINET。不幸的是，上述库仅适用于 32 位操作系统，并且没有可用于 64 位的版本。我尝试导入参考列表：这似乎可行，但是一旦我重新启动应用程序，就找不到 dll（只是一个 ocx 文件 - Active X）。显然 dll 无法通过 regsvr32 应用程序注册。在 64 位版本的 Windows 上是否有类似于 MSINET 的东西？

2.  我发现的第二个问题与前一个问题无关。应用程序需要解析删除空格的输入字符串。旧的 VBA 使用 TRIM，我想我不必对其进行任何更改。但是编译操作会导致以下错误：“编译错误：找不到项目或库”。没有缺少参考（MSINET 除外）。

我在 64 位 Windows 7、Office 2010、microsoft.office.interop.excel.dll 14 上安装。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:38:24.260

1.  32 位软件在 64 位系统上运行良好。你不想要一个 64 位的 ocx，无论如何你都无法使用它。Google 上有很多关于如何在 64 位 Windows 7 上注册 32 位 ocx 的手册，例如[这个](http://devonenote.com/2010/02/register-comdlg32-ocx-on-x64-win7/)。
2.  修复丢失的 ocx 引用后，丢失的 trim 函数将自行修复。同样，您可以通过搜索[自己找到这一点](https://stackoverflow.com/questions/3610934/accesss-trim-function-not-recognized-on-another-machine)。

但是，如果您有 64 位的 office，您将根本无法使用 msinet 控件，并且在您删除对 msinet 的引用之前，trim 功能将不会重新出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-18T14:58:04.153

在某些 Windows 安装中，我无法在 System32 下注册 OCX。由于这已成为我公司的正常问题，我解决此问题的方法是：

*   在驱动器中创建一个名为 OCX 的文件夹（它可以在任何你想要的地方）
*   将 OCX 放在那里
*   以管理员身份启动 cmd.exe
*   在该文件夹中注册 OCX：

    ```
    C:\Windows\System32> regsvr32.exe C:\OCX\mscomctl.ocx 
    ```

这每次都有效。

不要删除 OCX 文件夹。

* * *

**编辑：**

在全新的 Windows 7 / 8 安装中，通过运行具有管理权限的 Office 应用程序（即 Access），我无需注册 OCX 即可运行相同的应用程序。发现它是因为打印服务器给出了相同的 OCX 问题。可能这可以通过编辑 OCX 权限而不是以管理员身份运行来解决。

# node.js - 从数据库加载dustjs

> ID：11449859
> 
> 赞同：0
> 
> 时间：2012-07-12T10:25:24.020
> 
> 标签：node.js, mongodb, mongoose, dust.js

我是使用dustjs的新手，我想用它来使用mongoose渲染一个带有来自mongo的信息的模板。

所以我有：

*   一个模板：

    ```
     {"This object property {object1} is loaded from db"} 
    ```

*   object1 是一个从 mongodb 加载了 mongoose 的字符串

我需要一个在上下文中带有一些参数的通用函数来进行查询。就像是

```
{
   object1: function(objectid){
               Object.findOne({_id: objectid},function(err,ob){
                              return ob.property;
                              })
                              }
} 
```

用dustjs可以吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:51:40.617

我不确定我是否理解您想要做什么，但是如果您想传入一个参数，您可能正在考虑定义一个部分而不仅仅是一个上下文。

你可以这样做：

```
{"This object property {object1 objectid="1"}{.}{/object1} is loaded from db"} 
```

并且您在上下文中的方法必须具有以下参数：

```
object1: function(chunk, context, bodies, params){
  var objectid = params.objectid;
  <the rest of your code>
  return chunk.write(ob.property)
} 
```

如果您要查找参数，则灰尘仅允许部分参数。你可以做到这一点没问题。祝你好运。

# c++ - Premake4 实用程序和应用程序入口点

> ID：11449860
> 
> 赞同：3
> 
> 时间：2012-07-12T10:25:27.767
> 
> 标签：c++, visual-studio-2010, lua, premake

我使用 premake4.exe 实用程序为不同平台生成项目文件。问题是我找不到如何在 lua-config 文件中指定自定义应用程序入口点。

我应该使用哪个选项？例如，在 Visual Studio 中，我可以去

```
Project Properties->Linker->Advanced
Entry Point  = name_of_my_entry_point_function 
```

在 premake4 手册（[http://industriousone.com/flags](http://industriousone.com/flags)）中，我发现只有**WinMain()**标志将 WinMain 函数确定为应用程序入口点，但我需要自定义入口点，例如**wmain()**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T15:53:59.547

Premake4 中没有指定自定义入口点的字段。事实上，我不确定 GCC 是否允许自定义入口点，所以它是特定于平台的。

但是，由于您是特定于平台的，因此您始终可以只指定其他命令行参数。例如：

```
configuration { "vc2008" }
  linkoptions { "/ENTRY:<function name here>" } 
```

顺便说一句，应该注意[的是，MSDN 文档](http://msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.100%29.aspx)似乎暗示使用它*不会*正确初始化全局静态对象。所以请谨慎使用。有关详细信息，请参阅[main 和 mainCRTStartup 有什么区别？](https://stackoverflow.com/questions/22934206/what-is-the-difference-between-main-and-maincrtstartup)

# c# - 渲染（重绘）不可见的画布

> ID：11449862
> 
> 赞同：3
> 
> 时间：2012-07-12T10:25:30.567
> 
> 标签：c#, wpf

我在每个页面上都有一个带有单独画布（上面有不同的用户控件）的选项卡式应用程序，[就像这样](http://svetiksch.spb.ru/tmp/stack01.png)。现在我需要将所有页面（画布）保存到图像。代码是这样的：

```
public static System.Drawing.Bitmap ExportToImage(Canvas canvas)
{
    // Save old background
    Brush background = canvas.Background;
    // Clear background to make images free of it
    canvas.Background = null;

    //canvas.UpdateLayout();
    //canvas.InvalidateVisual();

    // Create a render bitmap and push the surface to it
    RenderTargetBitmap renderBitmap =
        new RenderTargetBitmap(
            (int)canvas.Width,
            (int)canvas.Height,
            96d,
            96d,
            PixelFormats.Pbgra32);
    renderBitmap.Render(canvas);

    MemoryStream picStream = new MemoryStream();
    PngBitmapEncoder encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(renderBitmap));
    encoder.Save(picStream);

    canvas.Background = background;

    return new System.Drawing.Bitmap(picStream);
} 
```

我进行了额外的转换，例如更改边距和大小，但这并不重要。

对于活动页面上的画布（当前在屏幕上），我得到正常的渲染图像：没有背景、排列的位置和大小等）。

但是对于非活动页面上的画布，我会得到具有原始画布外观的图像（带有背景且未排列）。如何强制画布应用我的修改并使用它们进行渲染？我尝试在画布上使用 UpdateLayout 和 InvalidateVisual，但没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:19:37.797

WPF 会卸载不可见的对象，这意味着当您离开 Tab 时，它将卸载其上的 UI 控件并加载一组新控件。

为了避免这种行为，我通常使用 的扩展版本，当您离开它时`TabControl`存储`ContentPresenter`每个的，当您返回该选项卡时，它会重新加载而不是重绘所有内容。它占用了更多内存，但是我发现它的性能更好，因为 TabItem 不再需要在切换选项卡时重新创建其上的所有控件。`TabItem``ContentPresenter`

您应该能够使用它并将您的图像`ContentPresenter`基于每个存储的图像`TabItem`

原始代码来自[这里](http://www.pluralsight-training.net/community/blogs/eburke/archive/2009/04/30/keeping-the-wpf-tab-control-from-destroying-its-children.aspx)，尽管该网站已经关闭了几个月，我不知道它搬到了哪里。我对其进行了一些更改，因为我需要允许拖放选项卡项目以重新排列它们而不重绘它们，但这不应该影响任何事情。

```
// Extended TabControl which saves the displayed item so you don't get the performance hit of 
// unloading and reloading the VisualTree when switching tabs

// Obtained from http://www.pluralsight-training.net/community/blogs/eburke/archive/2009/04/30/keeping-the-wpf-tab-control-from-destroying-its-children.aspx
// and made a some modifications so it reuses a TabItem's ContentPresenter when doing drag/drop operations

[TemplatePart(Name = "PART_ItemsHolder", Type = typeof(Panel))]
public class TabControlEx : System.Windows.Controls.TabControl
{
    // Holds all items, but only marks the current tab's item as visible
    private Panel _itemsHolder = null;

    // Temporaily holds deleted item in case this was a drag/drop operation
    private object _deletedObject = null;

    public TabControlEx()
        : base()
    {
        // this is necessary so that we get the initial databound selected item
        this.ItemContainerGenerator.StatusChanged += ItemContainerGenerator_StatusChanged;
    }

    /// <summary>
    /// if containers are done, generate the selected item
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
    {
        if (this.ItemContainerGenerator.Status == GeneratorStatus.ContainersGenerated)
        {
            this.ItemContainerGenerator.StatusChanged -= ItemContainerGenerator_StatusChanged;
            UpdateSelectedItem();
        }
    }

    /// <summary>
    /// get the ItemsHolder and generate any children
    /// </summary>
    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        _itemsHolder = GetTemplateChild("PART_ItemsHolder") as Panel;
        UpdateSelectedItem();
    }

    /// <summary>
    /// when the items change we remove any generated panel children and add any new ones as necessary
    /// </summary>
    /// <param name="e"></param>
    protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e)
    {
        base.OnItemsChanged(e);

        if (_itemsHolder == null)
        {
            return;
        }

        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Reset:
                _itemsHolder.Children.Clear();

                if (base.Items.Count > 0)
                {
                    base.SelectedItem = base.Items[0];
                    UpdateSelectedItem();
                }

                break;

            case NotifyCollectionChangedAction.Add:
            case NotifyCollectionChangedAction.Remove:

                // Search for recently deleted items caused by a Drag/Drop operation
                if (e.NewItems != null && _deletedObject != null)
                {
                    foreach (var item in e.NewItems)
                    {
                        if (_deletedObject == item)
                        {
                            // If the new item is the same as the recently deleted one (i.e. a drag/drop event)
                            // then cancel the deletion and reuse the ContentPresenter so it doesn't have to be 
                            // redrawn. We do need to link the presenter to the new item though (using the Tag)
                            ContentPresenter cp = FindChildContentPresenter(_deletedObject);
                            if (cp != null)
                            {
                                int index = _itemsHolder.Children.IndexOf(cp);

                                (_itemsHolder.Children[index] as ContentPresenter).Tag =
                                    (item is TabItem) ? item : (this.ItemContainerGenerator.ContainerFromItem(item));
                            }
                            _deletedObject = null;
                        }
                    }
                }

                if (e.OldItems != null)
                {
                    foreach (var item in e.OldItems)
                    {

                        _deletedObject = item;

                        // We want to run this at a slightly later priority in case this
                        // is a drag/drop operation so that we can reuse the template
                        this.Dispatcher.BeginInvoke(DispatcherPriority.DataBind,
                            new Action(delegate()
                        {
                            if (_deletedObject != null)
                            {
                                ContentPresenter cp = FindChildContentPresenter(_deletedObject);
                                if (cp != null)
                                {
                                    this._itemsHolder.Children.Remove(cp);
                                }
                            }
                        }
                        ));
                    }
                }

                UpdateSelectedItem();
                break;

            case NotifyCollectionChangedAction.Replace:
                throw new NotImplementedException("Replace not implemented yet");
        }
    }

    /// <summary>
    /// update the visible child in the ItemsHolder
    /// </summary>
    /// <param name="e"></param>
    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        base.OnSelectionChanged(e);
        UpdateSelectedItem();
    }

    /// <summary>
    /// generate a ContentPresenter for the selected item
    /// </summary>
    void UpdateSelectedItem()
    {
        if (_itemsHolder == null)
        {
            return;
        }

        // generate a ContentPresenter if necessary
        TabItem item = GetSelectedTabItem();
        if (item != null)
        {
            CreateChildContentPresenter(item);
        }

        // show the right child
        foreach (ContentPresenter child in _itemsHolder.Children)
        {
            child.Visibility = ((child.Tag as TabItem).IsSelected) ? Visibility.Visible : Visibility.Collapsed;
        }
    }

    /// <summary>
    /// create the child ContentPresenter for the given item (could be data or a TabItem)
    /// </summary>
    /// <param name="item"></param>
    /// <returns></returns>
    ContentPresenter CreateChildContentPresenter(object item)
    {
        if (item == null)
        {
            return null;
        }

        ContentPresenter cp = FindChildContentPresenter(item);

        if (cp != null)
        {
            return cp;
        }

        // the actual child to be added.  cp.Tag is a reference to the TabItem
        cp = new ContentPresenter();
        cp.Content = (item is TabItem) ? (item as TabItem).Content : item;
        cp.ContentTemplate = this.SelectedContentTemplate;
        cp.ContentTemplateSelector = this.SelectedContentTemplateSelector;
        cp.ContentStringFormat = this.SelectedContentStringFormat;
        cp.Visibility = Visibility.Collapsed;
        cp.Tag = (item is TabItem) ? item : (this.ItemContainerGenerator.ContainerFromItem(item));
        _itemsHolder.Children.Add(cp);
        return cp;
    }

    /// <summary>
    /// Find the CP for the given object.  data could be a TabItem or a piece of data
    /// </summary>
    /// <param name="data"></param>
    /// <returns></returns>
    ContentPresenter FindChildContentPresenter(object data)
    {
        if (data is TabItem)
        {
            data = (data as TabItem).Content;
        }

        if (data == null)
        {
            return null;
        }

        if (_itemsHolder == null)
        {
            return null;
        }

        foreach (ContentPresenter cp in _itemsHolder.Children)
        {
            if (cp.Content == data)
            {
                return cp;
            }
        }

        return null;
    }

    /// <summary>
    /// copied from TabControl; wish it were protected in that class instead of private
    /// </summary>
    /// <returns></returns>
    protected TabItem GetSelectedTabItem()
    {
        object selectedItem = base.SelectedItem;
        if (selectedItem == null)
        {
            return null;
        }

        if (_deletedObject == selectedItem)
        { 

        }

        TabItem item = selectedItem as TabItem;
        if (item == null)
        {
            item = base.ItemContainerGenerator.ContainerFromIndex(base.SelectedIndex) as TabItem;
        }
        return item;
    }
} 
```

**根据下面的评论进行编辑**

如果这对您不起作用，您可以尝试像平常一样渲染您的 Canvas，然后以低于所有渲染完成后打印的[DispatcherPriority打印它。](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)`DispatcherPriority.Render`

像这样的东西：

```
public static void ExportToImage(Canvas canvas, System.Drawing.Bitmap bmp)
{
    // Save old background
    Brush background = canvas.Background;
    // Clear background to make images free of it
    canvas.Background = null;

    // Create a render bitmap and push the surface to it
    RenderTargetBitmap renderBitmap =
        new RenderTargetBitmap(
            (int)canvas.Width,
            (int)canvas.Height,
            96d,
            96d,
            PixelFormats.Pbgra32);
    renderBitmap.Render(canvas);

    Application.Current.Dispatcher.BeginInvoke(DispatcherPriority.Background, 
    new Action(delegate() 
    {
        MemoryStream picStream = new MemoryStream();
        PngBitmapEncoder encoder = new PngBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(renderBitmap));
        encoder.Save(picStream);

        canvas.Background = background;

        // I don't think you can simply return your value here, 
        // so you'll probably need to setup something else to 
        // return your bitmap to your calling code
        bmp = new System.Drawing.Bitmap(picStream);
    }));
} 
```

# java - RestEasy - ClientResponse.ReleaseConnection()

> ID：11449863
> 
> 赞同：3
> 
> 时间：2012-07-12T10:25:34.460
> 
> 标签：java, rest, response, resteasy

为什么我需要通过以下方式发布 ClientResponse：

```
 response.releaseConnection(); 
```

有优势吗？为什么 RestEasy 不处理这个？

有时我必须释放它，有时我havnt - 条件是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:25:07.573

> Resteasy 将释放被盖下的连接。唯一的反例是响应是 InputStream 实例的情况，它必须显式关闭。

[您可以在RESTEasy 文档](http://docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html_single/index.html#transport_layer)中阅读更多相关信息。

# visual-studio-2010 - VS2010 高亮问题

> ID：11449865
> 
> 赞同：0
> 
> 时间：2012-07-12T10:25:42.853
> 
> 标签：visual-studio-2010, syntax-highlighting

我喜欢 VS2010 的深色主题。当调试并回到我进入一个方法的地方时，我几乎看不懂代码。

有谁知道我需要更改哪种字体/颜色设置以使其更具可读性？

![在此处输入图像描述](../Images/27267f7fe8b74fb9f87d9ac7df3c5c16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:28:26.160

尝试*工具 - 选项 - 环境 - 字体和颜色*然后找到*当前语句*显示项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:32:55.267

如果您指的是当前声明，则可以将其更改如下

工具->选项->环境->字体和颜色->当前语句。

如果您指的是断点行，则使用颜色设置下的断点（启用）选项进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:29:17.123

转到`Tools-> Options-> Environment-> Fonts and Colors -> DisplayItems -> Current Statement`并更改项目背景颜色....

# iphone - iPhone SDK：内存警告后 UIBarButtonItem 不刷新

> ID：11449867
> 
> 赞同：2
> 
> 时间：2012-07-12T10:25:45.380
> 
> 标签：iphone, uinavigationcontroller, uibarbuttonitem, memory-warning

我正面临着一个非常奇怪的行为`UIBarButtonItem`。

我已经能够在下面粘贴代码的测试应用程序中重现该错误。

在我的第一个视图中，我有一个显示 GUID 的标签、一个转到空的第二个视图的按钮和一个`UIBarButtonItem`. 如果我单击它，它的颜色会从绿色变为红色，反之亦然，并且 GUID 会更新。

以下是如何重现它：

*   转到第二个视图
*   发出内存警告（在模拟器硬件菜单中，但与设备上的真实内存警告相同）
*   回到第一个
*   点击`UIBarButtonItem`

`UIBarButtonItem`即使是以前也不会令人耳目一新，并且日志显示一切似乎都是正确的。

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    @private
    BOOL _isGreenNotRed;
}

@property (weak, nonatomic) IBOutlet UIBarButtonItem *aButton;
@property (weak, nonatomic) IBOutlet UILabel *aGUID;
@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "AFHTTPClient.h"
#import "AFHTTPRequestOperation.h"

@interface ViewController ()
- (NSString *)generateUUID;
- (void)refreshView;
@end

@implementation ViewController
@synthesize aButton;
@synthesize aGUID;

- (NSString *)generateUUID
{
    CFUUIDRef theUUID = CFUUIDCreate(NULL);
    CFStringRef string = CFUUIDCreateString(NULL, theUUID);
    CFRelease(theUUID);
    return (__bridge_transfer NSString *)string;
}

-(void)refreshView {
    NSLog(@"Refreshing first view");

    if(self->_isGreenNotRed) {
        [self.aButton setTintColor:[UIColor colorWithRed:0\. green:0.8 blue:0\. alpha:1.]];
        NSLog(@"Button should be green");
    }
    else {
        [self.aButton setTintColor:[UIColor colorWithRed:0.8 green:0\. blue:0\. alpha:1.]];
        NSLog(@"Button should be red");
    }

    self->_isGreenNotRed = !self->_isGreenNotRed;

    NSString *guid = [self generateUUID];

    [self.aGUID setText:guid];
    NSLog(@"GUID should be %@", guid);
}

- (IBAction)aButtonClick:(id)sender {
    [self refreshView];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self->_isGreenNotRed = YES;
    [self refreshView];
}

- (void)viewDidUnload
{
    [self setAButton:nil];
    [self setAGUID:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSLog(@"Going to second view");
}

@end 
```

和故事板：

![故事板](../Images/988ee15d2c4c9fab3238027d294fb031.png)

它影响 Simulator 5.0 和 5.1，以及 5.1.1 上的设备

编辑：通过记录 self.aButton 的值，我看到它`nil`在内存警告之后，由于`weak`关键字。但我怎样才能重新分配它？SDK不应该自己做吗？为什么`aGUID`仍然可用？

编辑：这是一个日志。我们可以看到 aButton 变为 nil。

```
2012-07-19 14:39:14.716 test[934:f803] Refreshing first view
2012-07-19 14:39:14.718 test[934:f803] Button <UIBarButtonItem: 0x68b89d0> should be green
2012-07-19 14:39:14.719 test[934:f803] GUID label <UILabel: 0x6dbe580; frame = (49 291; 222 48); text = '08960AFD-F98A-4FBA-9A6E-C...'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x6dbe5f0>> should be 08960AFD-F98A-4FBA-9A6E-C548E753F259
2012-07-19 14:39:18.690 test[934:f803] Refreshing first view
2012-07-19 14:39:18.692 test[934:f803] Button <UIBarButtonItem: 0x68b89d0> should be red
2012-07-19 14:39:18.692 test[934:f803] GUID label <UILabel: 0x6dbe580; frame = (49 291; 222 48); text = 'EBB41B52-46D1-4CAE-BF0E-B...'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x6dbe5f0>> should be EBB41B52-46D1-4CAE-BF0E-B0679BC1F0EE
2012-07-19 14:39:19.946 test[934:f803] Refreshing first view
2012-07-19 14:39:19.949 test[934:f803] Button <UIBarButtonItem: 0x68b89d0> should be green
2012-07-19 14:39:19.949 test[934:f803] GUID label <UILabel: 0x6dbe580; frame = (49 291; 222 48); text = '8E802026-E825-4219-9CCA-5...'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x6dbe5f0>> should be 8E802026-E825-4219-9CCA-5106BF65BDA0
2012-07-19 14:39:33.353 test[934:f803] Going to second view
2012-07-19 14:39:40.811 test[934:f803] Received memory warning.
2012-07-19 14:39:43.471 test[934:f803] Refreshing first view
2012-07-19 14:39:43.472 test[934:f803] Button (null) should be green
2012-07-19 14:39:43.473 test[934:f803] GUID label <UILabel: 0x6896570; frame = (49 291; 222 48); text = '3D4933A8-908B-4570-BD55-6...'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x68b0130>> should be 3D4933A8-908B-4570-BD55-68C298F6E621
2012-07-19 14:39:48.649 test[934:f803] Refreshing first view
2012-07-19 14:39:48.650 test[934:f803] Button (null) should be red
2012-07-19 14:39:48.651 test[934:f803] GUID label <UILabel: 0x6896570; frame = (49 291; 222 48); text = '9CDCF065-12C2-4F16-9464-A...'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x68b0130>> should be 9CDCF065-12C2-4F16-9464-A5CE202BE7CA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:48:49.580

`refreshView`在内存警告之后被调用？

尝试删除将视图设置为 nil 的代码`viewDidUnload`？它解决了问题吗？

# visual-studio-2010 - Visual Web Developer 2010 Express 中 VbScript 的块选择注释

> ID：11449875
> 
> 赞同：0
> 
> 时间：2012-07-12T10:26:28.650
> 
> 标签：visual-studio-2010, visual-web-developer-2010

如何使用 Visual Web Developer 2010 Express 在 vbscript 中注释选定的块？

**更新：**我的意思是选择一个块并评论每一行。如果我在 Visual Studio Web Developer 2010 中执行此操作，则创建的评论是针对 html，而不是针对 vbscript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:05:04.663

我`<% %>`只在两者之间使用我的代码，VS 将我的选择注释为 html，但如果我在两者之间使用我的代码`<script language="vbscript"> </script>`并且注释选择它可以工作，它注释为 vbscript 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:56:52.270

VBScript 仅支持单行注释。

例子：

```
Dim myMessage
'myMessage = "I am having a great day!"
myMessage = "I could use a nap..."

'This will print out myMessage to the visitor
document.write(myMessage) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:28:52.627

利用`'`

```
 <script type="text/vbscript">
    Dim myMessage
    'myMessage = "I am having a great day!"
    myMessage = "I could use a nap..."

    'This will print out myMessage to the visitor
    document.write(myMessage)

    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-24T08:22:36.213

将其复制到记事本++`Ctrl+H`以打开替换。在所有行中替换`\r\n`为将用单行注释 char 进行注释。`\r\n'``Extended Search Mode``'`

# c - 如何以编程方式调整 ext4 分区的大小？

> ID：11449877
> 
> 赞同：0
> 
> 时间：2012-07-12T10:26:38.703
> 
> 标签：c, ext4

我想在 C 中以编程方式调整 ext4 分区的大小。我相信我可以使用[libparted](http://www.gnu.org/software/parted/api/)来调整分区的大小，但不能调整文件系统的大小？谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:31:56.173

使用`resize_fs()`.

看看这里的用法示例：

[http://fossies.org/dox/e2fsprogs-1.42.4/resize2fs_8c_source.html#l00072](http://fossies.org/dox/e2fsprogs-1.42.4/resize2fs_8c_source.html#l00072)

# php - 在刷新之前将数据从 jquery 检索到 php

> ID：11449890
> 
> 赞同：0
> 
> 时间：2012-07-12T10:27:46.270
> 
> 标签：php, jquery, arrays, forms

如何从 jquery 生成的输入中检索数据以使用 php $_POST 处理它们？

```
(function($){

         $countForms = 1;

              $.fn.addForms = function(idform){

                            var myform = "<table>"+
                             "  <tr>"+
                             "     <td>Field A ("+$countForms+"):</td>"+
                             "     <td><input type='text' name='field["+$countForms+"][a]'></td>"+
                             "     <td>Field B ("+$countForms+"):</td>"+
                             "     <td><textarea name='field["+$countForms+"][b]'></textarea></td>"+
                             "     <td><button>remove</button></td>"+
                             "  </tr>"+
                             "</table>";

                            if(idform=='mybutton'){

                                myform = $("<div>"+myform+"</div>");
                                $("button", $(myform)).click(function(){ $(this).parent().parent().remove(); });
                                $(this).append(myform);
                                $countForms++;
                            }

              };
        })(jQuery);         

        $(function(){
            $("#mybutton").bind("click", function(e){
            e.preventDefault();
            var idform=this.id;

                if($countForms<3){
                    $("#container").addForms(idform);
                }       
            });
        }); 
```

html/php 代码：

```
if ( isset( $_POST['field'] ) )
{
    echo '<table>';
    foreach ( $_POST['field'] as $diam )
    {
        // here you have access to $diam['top'] and $diam['bottom']
        echo '<tr>';
        echo '  <td>', $diam['a'], '</td>';
        echo '  <td>', $diam['b'], '</td>';
        echo '</tr>';
    }
    echo '</table>';
    }

?>

<body>

<div>
<form method="post" name="b" >
<table>
    <tr>
        <td>Field A</td>
        <td><input type='text' name='field[0][a]'></td>
        <td>Field B</td>
        <td><textarea name="field[0][b]"></textarea></td>
        <td><button>remove</button></td>
    </tr>
</table>
</div>
<div id="container"></div>
<button id="mybutton">add form</button>

<div align="center">
<p><input type="submit" value="Registar" name="registar"></p>
</div>
</form> 
```

我无法从 jquery 在加载页面后生成的重复输入中检索数据。我知道，因为 foreach 只是回显 html 部分中存在的输入值。有什么建议我可以获取 jquery 输入的值以用 php 处理它们吗？

# c# - 动态 GridView PageIndexChanging 没有触发？

> ID：11449893
> 
> 赞同：1
> 
> 时间：2012-07-12T10:27:51.430
> 
> 标签：c#, asp.net, delegates, event-handling, page-index-changed

我有两个动态网格视图，一个在左侧，另一个在右侧，并且在单击提交按钮时绑定这两个网格。

我的问题是PageIndexChanging 适用于我首先单击的网格，而第二个不起作用即）如果我先单击左侧网格，PageIndexChanging 仅适用于该网格而不适用于右侧网格，反之亦然。这是我的代码

```
 protected void lnkBTNSubmit_Click(object sender, EventArgs e)
        {
          pnlLeft.Controls.Add(grdATASalesTrendleft);
          dataResult = ObjAnalyzeTrendAnalysis.AnalyzeSalesTrendTables(requestID, "ATAT_1");
          dataResult = ObjCommon.GetColumnAliasReportDetails(dataResult, "ATAT_1");
          ObjSharedEntities.LeftTableData = dataResult;
          BindGridDataLeft(grdATASalesTrendleft, ObjSharedEntities.LeftTableData);
          grdATASalesTrendleft.Visible = true;

          pnlRight.Controls.Add(grdATASalesTrendright);
          dataResult = ObjAnalyzeTrendAnalysis.AnalyzeSalesTrendTables(requestID, "ATAT_5");
          dataResult = ObjCommon.GetColumnAliasReportDetails(dataResult, "ATAT_5");
          ObjSharedEntities.RightTableData = dataResult;
          BindGridDataRight(grdATASalesTrendright, ObjSharedEntities.RightTableData);
          grdATASalesTrendright.Visible = true;
       }

  protected void Page_Load(object sender, EventArgs e)
       {
          GridLoad();
       }

  private void GridLoad()
       {
          Leftgrid();
          Rightgrid();
          BindGridDataLeft(grdATASalesTrendleft, dataResult);
          BindGridDataRight(grdATASalesTrendright, dataResult);
       }

 private void Leftgrid()
       {
          grdATASalesTrendleft = new GridView();
          grdATASalesTrendleft.ID = "grdATASalesTrendleft";
          grdATASalesTrendleft.AutoGenerateColumns = true;
          grdATASalesTrendleft.EmptyDataText = "No data available.";
          grdATASalesTrendleft.AllowPaging = true;
          grdATASalesTrendleft.PagerSettings.Mode = PagerButtons.Numeric;
          grdATASalesTrendleft.PagerSettings.Position = PagerPosition.Bottom;
          grdATASalesTrendleft.PageSize = 15;
          grdATASalesTrendleft.PagerStyle.BackColor = System.Drawing.Color.FromArgb(80, 124, 209);
          ObjCommon.ApplyStylesForGridView(grdATASalesTrendleft);
          grdATASalesTrendleft.PageIndexChanging += new GridViewPageEventHandler(grdATASalesTrendleft_PageIndexChanging);
       }

  private void BindGridDataLeft(GridView e, DataTable dataResult)
       {
          GridView grdATASalesTrend = (GridView)e;
          grdATASalesTrend.DataSource = dataResult;
          grdATASalesTrend.DataBind();
          pnlLeft.Controls.Add(grdATASalesTrend);
       }

  void grdATASalesTrendleft_PageIndexChanging(object sender, GridViewPageEventArgs e)
       {
        GridView grdATASalesTrendleft = (GridView)sender;
        grdATASalesTrendleft.PageIndex = e.NewPageIndex;
        BindGridDataLeft(grdATASalesTrendleft, ObjSharedEntities.LeftTableData);
       }

  private void Rightgrid()
       {
        grdATASalesTrendright = new GridView();
        grdATASalesTrendright.ID = "grdATASalesTrendright";
        grdATASalesTrendright.AutoGenerateColumns = true;
        grdATASalesTrendright.EmptyDataText = "No data available.";
        grdATASalesTrendright.AllowPaging = true;
        grdATASalesTrendright.PagerSettings.Mode = PagerButtons.Numeric;
        grdATASalesTrendright.PagerSettings.Position = PagerPosition.Bottom;
        grdATASalesTrendright.PageSize = 15;
        grdATASalesTrendright.PagerStyle.BackColor = System.Drawing.Color.FromArgb(80, 124, 209);
        ObjCommon.ApplyStylesForGridView(grdATASalesTrendright);
        grdATASalesTrendright.PageIndexChanging += new GridViewPageEventHandler(grdATASalesTrendright_PageIndexChanging);
      }

  private void BindGridDataRight(GridView e, DataTable dataResult)
       {
          GridView grdATASalesTrend = (GridView)e;
          grdATASalesTrend.DataSource = dataResult;
          grdATASalesTrend.DataBind();
          pnlRight.Controls.Add(grdATASalesTrend);
       }

  void grdATASalesTrendright_PageIndexChanging(object sender, GridViewPageEventArgs e)
      {
        GridView grdATASalesTrendright = (GridView)sender;
        grdATASalesTrendright.PageIndex = e.NewPageIndex;
        BindGridDataRight(grdATASalesTrendright, ObjSharedEntities.RightTableData);
       } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:56:46.083

您想要一个 pageindex 事件来绑定您的网格吗？我的意思是一个寻呼机点击两个网格。如果是这样，您必须将您的两个网格与新的 pageIndex 绑定。

```
void grdATASalesTrendleft_PageIndexChanging(object sender, GridViewPageEventArgs e)
       {
        GridView grdATASalesTrendleft = (GridView)sender;
        grdATASalesTrendleft.PageIndex = e.NewPageIndex;
        BindGridDataLeft(grdATASalesTrendleft, ObjSharedEntities.LeftTableData);
        // add
        grdATASalesTrendright.PageIndex = e.NewPageIndex;
        BindGridDataRight(grdATASalesTrendright, ObjSharedEntities.RightTableData);
       } 
```

# javascript - 如何使用 Javascript 手动显示 Windows 8 Metro 加载轮/加载点

> ID：11449894
> 
> 赞同：3
> 
> 时间：2012-07-12T10:27:52.057
> 
> 标签：javascript, microsoft-metro, winjs

在 ListViews 或类似上使用数据源时，会出现 Windows 8 加载轮。这很好，但我仍然想在我选择的容器中手动启动和停止这个装载轮。我也想知道如何使用加载点。我怎么能做到这一点？

![Windows 8 Metro 加载轮](../Images/0b861ce189c676af015fbd5ac489f7e1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T13:53:44.283

感谢 Jevar 的建议，我设法找到了添加进度控件的[快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/hh465487.aspx)指南。我想要的确实是一个 ProgressRing，更特别是一个不确定的进度环。这是在 HTML/JS 中的完成方式

**HTML**：

```
<label class="progressRingText">
    <progress class="win-ring withText"></progress>Processing</label> 
```

**CSS**

```
progress.withText
{
    color: inherit; /* Uses the same text color as the page */
    vertical-align: text-bottom; /* Makes the bottom of the control align with the bottom of its label */
}

/* Text style for a label for the progress ring */
.progressRingText
{
    font-family: "Segoe UI";
}

/* Text style for a label for a default size progress ring */
.progressRingText
{
    font-size: 11pt;
    line-height: 15pt;
}

/* The margin to separate the ring and its label */
.progressRingText progress
{
    margin-right: 5px;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T15:23:16.167

使用相同的宽度和高度

> 进步

例如

```
<progress style="width:50px;height:50px;"> 
```

元素，你会得到那个效果。

# asp.net - 使用全局日志记录时，MVC [HandleError] HandleErrorAttribute 调用了两次

> ID：11449895
> 
> 赞同：10
> 
> 时间：2012-07-12T10:27:55.893
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, error-handling

在我使用的 MVC3 Web 应用程序中

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
} 
```

如果发生未处理的异常，则在向用户显示“错误”视图的地方应用全局错误处理。

对于一个特定的视图，我还希望通过使用 `[HandleError(View = "SpecialError")]`. 这工作得很好。

然后我想添加未处理异常的全局*日志记录。*我使用日志记录代码创建了一个自定义 HandleError 属性：

```
public class MyHandleErrorAttribute : HandleErrorAttribute
    {
        public override void OnException(ExceptionContext context)
        {
            // Write to log code
            base.OnException(context);
        }
    } 
```

并更新了 RegisterGlobalFilters 和方法装饰以改用此属性名称。这通常有效，但是当使用 OnException 方法修饰的方法中发生异常时，`MyHandleError(View = "SpecialError")]`会调用*两次*。我最初假设用这个属性装饰方法取代了全局处理程序，但似乎它只是简单地添加到（这更有意义，但这不是我想要的）。通过调用 OnException 两次，相同的异常会被记录两次，这是绝对不能发生的。我不认为 OnException 被调用了两次*，因为*它是一个自定义属性——我相信标准的 HandleError 属性也会发生这种情况，它现在在我创建它的记录时是可见的。

最终，我想记录所有未处理的异常（一次），同时保留 [HandleError] 提供的功能，特别是为特定方法异常设置不同的视图。有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T00:24:39.460

我相信我自己找到了一个干净的解决方案。扩展 HandleError 似乎是个好主意，但现在我认为这是朝着错误方向迈出的一步。我不想以不同的方式处理任何错误，只需在 HandleError 拾取异常之前将异常写入日志一次。因此，默认的 HandleError 可以保持原样。尽管 OnException 可以被多次调用，但在 HandleErrorAttribute 的标准实现中似乎完全是良性的。

相反，我创建了一个异常日志过滤器：

```
public class LoggedExceptionFilter : IExceptionFilter
    {
        public void OnException(ExceptionContext filterContext)
        {
            // logging code
        }
    } 
```

它不需要太继承，`FilterAttribute`因为它只是在 RegisterGlobalFilters 和 HandleErrorAttribute 中注册一次。

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new LoggedExceptionFilter());
        filters.Add(new HandleErrorAttribute());
    } 
```

`[HandleError]`这允许在不更改标准功能的情况下整齐地记录异常

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T11:41:38.943

尝试这个，

```
public class MyHandleErrorAttribute : HandleErrorAttribute
{
    public override void OnException(ExceptionContext context)
    {
         var exceptionHandled = context.ExceptionHandled;

         base.OnException(context);                          

         if(!exceptionHandled && context.ExceptionHandled)
           // log the error.
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T11:41:29.223

您可以创建一个自定义`IFilterProvider`来检查过滤器是否已应用于该操作：

```
public class MyFilterProvider : IFilterProvider
{
    public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        if (!actionDescriptor.GetFilterAttributes(true).Any(a => a.GetType() == typeof(MyHandleErrorAttribute)))
        {
            yield return new Filter(new MyHandleErrorAttribute(), FilterScope.Global, null);
        }
    }
} 
```

然后，您无需在 中注册您的过滤器，而是`GlobalFilterCollection`在 `Application_Start()`

```
FilterProviders.Providers.Add(new MyFilterProvider()); 
```

**或者**（类似于@Mark 建议的）您可以显式`ExceptionHandled`设置`ExceptionContext`

```
public class MyHandleErrorAttribute : HandleErrorAttribute
{
    public override void OnException(ExceptionContext context)
    {
        if(context.ExceptionHandled) return;

        // Write to log code
        base.OnException(context);
        context.ExceptionHandled = true;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-23T23:35:08.780

我实际上找到了防止 OnException 方法触发两次的解决方案。如果你使用 FilterConfig.RegisterGlobalFilters() 方法中，注释掉 HandleErrorAttribute 的注册：

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        //filters.Add(new HandleErrorAttribute());
    }
} 
```

其实我也用了自带的HandleErrorAttribute，没有注册，效果很好。我只需要打开自定义错误：

```
 <system.web>
    <customErrors mode="On" />
 </system.web> 
```

# javascript - 触发器导致覆盖意味着错误的数字显示在文本框中

> ID：11449896
> 
> 赞同：4
> 
> 时间：2012-07-12T10:27:59.320
> 
> 标签：javascript, jquery

我已经为这个问题设置了一个演示，您可以通过单击 [DEMO来访问它](http://helios.hud.ac.uk/u0867587/Mobile_app/Text14.php)

*   第 1 步：打开演示时，单击“打开网格”链接并选择按钮“7”。这将在下面显示一个文本框和 7 个字母按钮。
*   第 2 步：选择您选择的下方的 2 个字母按钮。（变成绿色时选择一个按钮）
*   第3步：现在在左侧你会看到一个绿色的加号按钮，点击它，它会打开一个模态窗口。
*   第4步：在模态窗口有一个搜索栏，输入“AAA”并提交搜索，你会看到一堆行出现。
*   第 5 步：在第一行中，您在“答案数”列下看到它包含数字 1，单击该行内的“添加”按钮，模态窗口将关闭，但存在问题，因为“答案数”答案”文本框不显示“1”。它显示“2”，原因如下：

问题：

在“答案数量”文本框中，它应该显示数字 1，因为添加的行中的“答案数量”列下是否显示数字“1”，但文本框中不显示 1，它显示数字 2 以及它显示这个数字的原因是因为我在下面有这行代码。

现在发生这种情况是因为这段代码：

```
$('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : '');, 
```

但`$('.gridBtns').on('click', function()`我确实需要这段代码。

我需要此代码的原因是因为假设有 7 个字母按钮“AG”并且您打开所有字母按钮，文本框将显示数字“7”，但如果我改变主意并且只想显示 5 个字母按钮“AE”，然后文本框将从“7”变为“5”，因为现在只打开了 5 个按钮。这就是我需要这段代码的原因。

所以我的问题是，如果用户点击了“添加”按钮，我怎样才能从添加的行中的“答案数量”列中获取数字并显示在文本框中？

下面是我的代码，当单击“添加”按钮时，它应该在文本框中显示数字......

```
 function addwindow(numberAnswer, gridValues, btn) { 

            $('#mainNumberAnswerTxt').val(numberAnswer);
            $('#btn'+gridValues).trigger('click');

    } 
```

但是因为 这行代码触发了这个函数而`$('#mainNumberAnswerTxt').val(numberAnswer);`被覆盖了，并且在那个函数中是下面的代码，它检查用户单击网格按钮后当前打开了多少按钮：`"$('#btn'+gridValues).trigger('click');"``$('.gridBtns').on('click', function()`

```
$('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : '');, 
```

# ios - IOS TableViewCell exc_bad_access 自动释放错误

> ID：11449906
> 
> 赞同：1
> 
> 时间：2012-07-12T10:28:17.627
> 
> 标签：ios, memory-management, uitableview, exc-bad-access

我对 tableviewcell ( **exc_bad_access** ) 的内存管理有疑问。
我的一个**tableviewcell**包括一个加载异步 html 数据（**loadHTMLString**方法）的 uiwebview ，并且当前控制器被设置为其委托。
当我从导航控制器弹出 tableviewcontroller 太快时，应用程序崩溃。

在我看来，这就是它失败的原因：
- 如果在控制器之前单元释放 => 一切正常，委托仍然有效，我什至可以在其自己的 dealloc 方法中将其委托设置为 nil
- 如果在控制器之后单元释放（我猜测是因为表视图单元格是自动释放的）=> 应用程序崩溃是因为它的委托仍然设置为已释放的控制器

知道如何正确解决这个问题吗？谢谢..

cellForRowAtIndexPath 中的代码：

```
...
CustomTableViewCell * cCell = (CustomTableViewCell*)cell; 
cCell.myWebView.delegate = self; 
[[cCell myWebView] loadHTMLString:html baseURL:baseURL];
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:26:50.453

在释放 Web 视图之前，尝试在单元释放时添加[stopLoading 。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/stopLoading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T23:46:28.980

这是一个较老的问题，但它从未真正得到解决，我自己也遇到了。

这发生在我身上：当一个单元格加载了一个将单元格作为其委托的 Web 视图时，视图控制器会崩溃。UIWebView 的文档指出，Web 视图的委托在释放之前应设置为 nil。这似乎也适用于重用的表格视图单元格。

我的解决方案：在您的自定义单元格中覆盖这些：

```
- (void)prepareForReuse
    {
    [super prepareForReuse];
    self.myWebView.delegate = nil;
    [self.myWebView stopLoading];
    }

- (void)dealloc
    {
    self.myWebView.delegate = nil;
    [self.myWebView stopLoading];
    } 
```

这为我修好了。

# c# - 重命名 OpenOffice Calc 工作表

> ID：11449916
> 
> 赞同：1
> 
> 时间：2012-07-12T10:29:12.183
> 
> 标签：c#, openoffice-calc

我创建了一个程序，它从许多不同的文件中读取数据并在 OpenOffice Calc 中存储不同的信息。我用来创建电子表格的以下代码：

```
public XSpreadsheet getSpreadsheet(int nIndex, XComponent xComp)
{
    // Collection of sheets
    XSpreadsheets xSheets = ((XSpreadsheetDocument)xComp).getSheets();
    XIndexAccess xSheetsIA = (XIndexAccess)xSheets;
    XSpreadsheet xSheet =(XSpreadsheet)xSheetsIA.getByIndex(nIndex).Value;

    return xSheet;
} 
```

该方法调用如下：

```
XSpreadsheet newSheet = getSpreadsheet(sheetIndex, xComp); 
```

我知道如何在表格等中输入数据，但是我不知道如何重命名 OpenOffice 应用程序的工作表。通过互联网，我只找到了不适用于 OO 的 Excel 应用程序的信息。

有人对这怎么可能有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:24:26.853

我从未编写过 OpenOffice，所以我假设您正在使用[这个 api](http://www.openoffice.org/api/)。在文档中，我发现[XSpreadsheet](http://www.openoffice.org/api/docs/common/ref/com/sun/star/sheet/Spreadsheet.html)实现[`XNamed`](http://www.openoffice.org/api/docs/common/ref/com/sun/star/container/XNamed.html)了，它导出了方法`setName`和`getName`. 这似乎是你想要的。如果我弄错了，请告诉我——正如我所说，我从未使用过这个。

# c# - C# 或 SQL Server - 如何从多个日期表中获取最早或最晚日期？

> ID：11449923
> 
> 赞同：1
> 
> 时间：2012-07-12T10:29:23.117
> 
> 标签：c#, asp.net, sql-server, datetime

我不确定标题是否完全解释了我在这里所追求的，所以让我尝试更详细地解释一下......

我需要能够创建一个显示这个的表......

![日期示例](../Images/50c08a25bbf02f4d60e512f1abc8e642.png) [放大图片](https://i.stack.imgur.com/CTs9J.png)

表：

1.  项目（每次安装和删除此项目时）
2.  供应商（每次供应商与项目一起使用时）
3.  费率（供应商的费率）

它需要能够：

1.  获取所选期间的范围
2.  从表格中获取最早的日期作为开始日期
3.  获取最新日期

如果开始日期都在开始期间之前并且所有结束日期都在结束期间之后，那么它将是一个简单的单行。但是任何在该期间开始或结束的日期都会为该行设置相关日期，并在上一行结束之后获取下一个开始日期。

除此之外，我已经使用 Linq 完成了整个程序，并且我有一些看起来可以工作的东西，但我真的对 Iv 完成它的方式不满意。

我的问题是......处理这些日期的优雅方式是什么？我应该使用 C# 还是 SQL Server 以获得最佳结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:42:52.323

首先很高兴看到有人在能源管理行业工作。

不幸的是，我不太明白你的问题，但是，我的建议是：

“将生成/检索数据逻辑下移一层”

表现：SQL Server > .Net > LINQ

LINQ 的功能非常有限，不容易处理。

您是否尝试过使用 SQL 存储过程带回一组数据？

SQL Query 中的函数`case statement`可以`min group by`轻松解决您的问题。

在这种情况下，SQL Server 会将预期的数据带回 C#，然后 C# 只需要一种方式来呈现这些数据。

# google-app-engine - 有没有办法根据 JDO (DataNucleus) 中的子实体属性进行排序？

> ID：11449925
> 
> 赞同：0
> 
> 时间：2012-07-12T10:29:28.280
> 
> 标签：google-app-engine, datanucleus

我们有一个父子实体模型，其中包含以下内容：

```
 @PersistenceCapable(detachable = "true")
    public class Area implements Serializable {  
       @PrimaryKey
       private String name;

      @Persistent(mappedBy = "area")
      @Element(dependent = "true")
      private List<Category> categories;
    }

     @PersistenceCapable(detachable = "true")
     public class Category implements Serializable {

      @PrimaryKey
      @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
      @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
      private String key; 

      @Persistent
      private Area area;
     } 
```

当我们检索所有区域及其类别时，我们可以按类别名称对结果进行排序吗？

我看到 JDO Query 有一个 setOrdering 方法，尽管它似乎应用于您查询的实体的属性，而不是它的子实体。

我们目前使用 TreeMap 进行排序，尽管使用 JDO/GSQL 会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:49:50.043

否 - App Engine 不支持联接查询，因此您无法使用子实体的属性来查询父实体。（[https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Owned_One_to_Many_Relationships](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Owned_One_to_Many_Relationships)）。
您可以查询[嵌入式类](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses#Embedded_Classes)的属性，因此您可以考虑这是否适合您的用例。

如果您的类别具有唯一名称，您可以考虑使用不同的设计，将类别名称用作类别实体键名称字符串。然后，您可以在每个 Area 实体中存储类别名称字符串列表（作为索引的多值属性）。
使用这样的设计，您将通过子键名列表而不是通过 JDO 对拥有关系的支持来管理父子关系。

# blackberry - 在 BlackBerry 的 GridView 上应用 onclickListener

> ID：11449929
> 
> 赞同：0
> 
> 时间：2012-07-12T10:29:50.980
> 
> 标签：blackberry

我已经拍摄了一个网格并在其中添加了 9 个图像，并单击了我试图在某个页面上导航的任何图像。但我无法在 GridField 管理器上设置侦听器。我尝试了以下代码：

```
 grid.add(bmp1);
    grid.add(bmp2);
    grid.add(bmp3);
    grid.add(bmp4);
    grid.add(bmp5);

    grid.setChangeListener(new fieldChangeListener());
    add(grid);
}
class fieldChangeListener implements FieldChangeListener{

    public void fieldChanged(Field field, int arg1) {
        // TODO Auto-generated method stub
        System.out.println("Inside Method : "+field.getAccessibleContext());
        if(field==bmp1){
            Dialog.alert("1 is clicked");
        }
        if(field==bmp2){
            Dialog.alert("2 is clicked");
        }
        if(field==bmp3){
            Dialog.alert("3 is clicked");
        }
        if(field==bmp4){
            Dialog.alert("4 is clicked");
        }
        if(field==bmp5){
            Dialog.alert("5 is clicked");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:06:29.373

A`Manager`用于排列字段，它不接收自己的焦点和点击（通常）。使用`Fields`接收焦点和点击，除非你有充分的理由改变行为。

如果您想制作`Manager`点击效果，那么您将创建一个自定义管理器并覆盖`navigationClick`Methode。

# internationalization - PO 文件，交换 msgid 和 msgstr

> ID：11449931
> 
> 赞同：1
> 
> 时间：2012-07-12T10:30:01.947
> 
> 标签：internationalization, gettext, po

有什么工具可以让我在 po 文件中交换 msgid 和 msgstr 吗？我找不到它。

请注意，我真的不需要保留生成的 msgstrs：简而言之，我需要获取第二个 po 文件，并将第一个文件的 msgstrs 作为 msgids。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:30:32.043

为此，我找到了两个有用的工具：

*   [http://mola.io/2013/09/17/swapping-languages-in-gettext-po-file/](http://mola.io/2013/09/17/swapping-languages-in-gettext-po-file/)
*   [http://docs.translatehouse.org/projects/translate-toolkit/en/latest/commands/poswap.html](http://docs.translatehouse.org/projects/translate-toolkit/en/latest/commands/poswap.html)

下线了：

*   [http://dybdahl.dk/dxgettext/docs/online/msghack.html](http://dybdahl.dk/dxgettext/docs/online/msghack.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:33:29.800

我只看到 reg exp 和交换表达式。

# php - 根据复选框显示下拉菜单

> ID：11449932
> 
> 赞同：0
> 
> 时间：2012-07-12T10:30:07.313
> 
> 标签：php, javascript, html

我有一组复选框“框”，现在我希望我的下拉列表根据从数据库中检索单击的复选框显示名称。

代码：

```
$sql = "Select distinct empname from mstEmp where teamtype='$d' order by empname";
$objDB->SetQuery($sql);

$res = $objDB->GetQueryReference();

if(!$res)
    exit("Error in SQL : $sql");

if($objDB->GetNumRows($res) > 0)
{
    while($row = mysql_fetch_row($res))
    {
        print("<option value='{$row[0]}'>{$row[0]}</option>");
    }
}

mysql_free_result($res); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:38:16.013

1.select.jsp

```
<%@page import ="java.sql.*" %>
<html>
 <head>
 <script type="text/javascript">
 function showData(){ 
 if (document.form.check.checked==true){

xmlHttp=GetXmlHttpObject()
var url="select2.jsp";
xmlHttp.onreadystatechange=stateChanged 
xmlHttp.open("GET",url,true)
xmlHttp.send(null)
}
}
function stateChanged(){ 
if(xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){ 
 document.getElementById("name").innerHTML=xmlHttp.responseText;   

} 
}
function GetXmlHttpObject(){
var xmlHttp=null;
try{
  xmlHttp=new XMLHttpRequest();
}
catch (e){
 try  {
 xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
 }
 catch (e){
 xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
 }
 return xmlHttp;
 }
 </script>
 </head>
<body>
<form name="form">
<br><br>

  <input type="checkbox" id="check"  onclick="showData();">

<div id='name'>
<b>Select Data</b>  
<select name='name' >
<option value='-1'></option>
</select>
</div> 
</form>    
</body>
</html> 
```

# .net - 在 .net 中的 oracle Internet 目录 (OID) 中插入和更新用户

> ID：11449935
> 
> 赞同：0
> 
> 时间：2012-07-12T10:30:19.327
> 
> 标签：.net, active-directory, ldap, oid

我在使用 OID 方面经验很少，对于初学者来说，我设法连接到 OID 并在论坛的帮助下从 .net 找到 OID 中的用户。我仍在努力从 .Net 获取对 OID 的插入和更新。有没有人有我可以研究的想法/例子。

非常感谢您的帮助！！！！提前感谢拉玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:23:18.497

你读过这个吗：[System.DirectoryServices.Protocols (S.DS.P) 简介](http://msdn.microsoft.com/en-us/library/bb332056.aspx)

如果是这样，您需要更具体地了解问题所在。

# datatable - 左/右键单击primefaces的数据表后如何保存多选？

> ID：11449936
> 
> 赞同：0
> 
> 时间：2012-07-12T10:30:31.770
> 
> 标签：datatable, primefaces, selection, multi-select

我查看了此[示例](http://www.primefaces.org/showcase/ui/datatableRowSelectionMultiple.jsf)，但不明白在用户单击已选择的行之一后如何保存选择。因此，例如，当用户选择 3 行并单击其中之一时，它将仅显示有关所选行的信息。

现在我有了带有延迟加载和上下文菜单的 DataTable，如下所示：

```
 <p:dataTable id="al_table" value="#{alarmTable.alarms}"
                    selection="#{alarmTable.selectedAlarm}" selectionMode="multiple"
                    var="alarm" resizableColumns="true" paginator="true" rows="50"
                    sortBy="#{alarm.alarmTimestamp}" sortOrder="descending"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    rowsPerPageTemplate="25, 50, 75, 100" lazy="true"
                    style="table-layout: auto">

                    <p:ajax event="rowDblselect" update=":form:display"
                        oncomplete="alarmDialog.show()" /> 
```

除了选择之外，所有的工作都很好。像现在这样的行为，我不能同时对多行执行任何操作，因为它总是会丢失选择。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:03:14.347

在当前的实现中是不可能的。您应该使用不在上下文菜单中的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:30:54.057

您必须使用 DataModel 来管理您的选择。请参阅适用于所有单击和双击事件的此[示例。](http://www.primefaces.org/showcase/ui/data/datatable/selection.xhtml)

# javascript - 照片滑动jQuery

> ID：11449940
> 
> 赞同：-2
> 
> 时间：2012-07-12T10:30:38.350
> 
> 标签：javascript, jquery, photoswipe

如何调用 next/prev 方法？我需要将按钮分开，并且无法保留工具栏中的所有按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:39:40.893

看看[Guthub 上的源代码](https://github.com/codecomputerlove/PhotoSwipe/blob/master/src/photoswipe.class.js)，我不知道 Photoswipe 但我看了一眼源代码，发现如下：

```
 /*
     * Function: previous
     */
    previous: function(){

        if (this.isZoomActive()){
            return;
        }

        if (!Util.isNothing(this.carousel)){
            this.carousel.previous();
        }

    },

    /*
     * Function: next
     */
    next: function(){

        if (this.isZoomActive()){
            return;
        }

        if (!Util.isNothing(this.carousel)){
            this.carousel.next();
        }

    } 
```

您可能想查看上面代码中引用的各个轮播函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T23:40:22.400

PhotoSwipe 文档向您展示了如何实例化代码：

```
// Set up PhotoSwipe with all anchor tags in the Gallery container 
$(document).ready(function(){

    var myPhotoSwipe = $("#Gallery a").photoSwipe({ enableMouseWheel: false , enableKeyboard: false });

}); 
```

要转到下一张图片，只需在您的 photoSwipe 实例上调用“next”，如下所示：

```
myPhotoSwipe.next(); 
```

或“以前”返回

```
myPhotoSwipe.previous(); 
```

正如Denoir所提到的（谢谢！）。

希望这可以帮助。干杯。

# c# - 3层拱门。在差异项目中

> ID：11449949
> 
> 赞同：0
> 
> 时间：2012-07-12T10:31:41.223
> 
> 标签：c#

就目前而言，这是解决方案。

![在此处输入图像描述](../Images/29d849d80ccb66c85eed78a822931a16.png)

波尔。业务对象层。BL。业务层。达尔。数据层。（解决方案中没有网页，因为它将是在以后的过程中开发的 php）

**BOL**引用**BL**，然后**BL**引用**DAL**。

我几乎猜你知道每个 .cs 文件的内容。所以我真的很喜欢这种 3 层架构并将事物分开（第一次以这种方式工作）。现在，当涉及到通过层发送和获取数据时，我遇到了一些问题。

例如：BL（methods.cs）

```
 public class Methods
    {
        LineaDAL obj = new LineaDAL();
        public DataSet GetLinea()
        {
            var ds = new DataSet();
            ds = obj.GetLineaDAL();
            return ds;
        }
     ////more code
     } 
```

这很好用，从 DAL（被引用）创建一个对象，然后调用 DAL 并通过`DataSet`. 这很酷，它非常适合从 DAL/SQL 中获取一些东西。

但现在我正在进行更新，我希望 BL 调用一个 DAL 函数，向它发送一个参数。我尝试使用该参数的第一件事当然是来自 BOL 的对象。由于明显的原因不可能，BL 不知道 BOL。

发生这种情况时，我开始阅读并找到了一些好的方法。其中之一，是创建一个 DTO……我不太喜欢这个，因为我真的很喜欢层层叠叠的自上而下的分离环境。所以我一直在寻找和发现一些相关的东西`EventArgs`，`Interfaces`但我仍然在摸索，看看我是否走在正确的道路上。

我通过 DAL、DataSets 和其他东西工作 BL 很酷。但是有没有办法在顶层使用**BOL对象？**如果无法保存自上而下的引用，我是否也应该使用`DataSets`BOL <-> BL？是`EventArgs`要走的路吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:39:42.847

我需要一堆可以在层之间引用和共享的实体，然后这些实体应该存在于一个独立的项目中，所有其他项目都可以引用。

如果你的不同应用层分布在不同的机器上，实体库可以分布在每一层上。EventArgs 绝对不是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:33:17.560

如果您跨机器拆分，那么您将有某种数据合约通过网络发送。因此，此时您很可能需要引入 DTO。

当您进行选择（读取）时，DL 层将返回什么？由于您陈述的原因，您不能为选择返回 BOL 对象（BL 没有对 BOL 的引用）。

将 DataSet（这是一种数据层概念）返回给 BL 对我来说似乎有点混乱。因此，我建议创建一个从 DataSet 映射到的 BL 对象 (DTO)，然后将该对象公开给 BOL。这会整理出您的参考资料，并更清楚地调整每一层的职责。

# jquery - 使用 jquery 清除表单中启用的文本框

> ID：11449950
> 
> 赞同：1
> 
> 时间：2012-07-12T10:31:45.113
> 
> 标签：jquery, asp.net, textbox, reset

当设置为 read only = true 或 Enabled = false 时，我需要清除/重置文本框值。我在我的代码中使用了重置功能，但这不起作用。我的代码为

```
function resetForm($form) {
    $form.find('input:text, input:password, input:file, select').val('');   
    $("input[type='hidden']", this).each(function () {
        this.value = '';
    });    
    $form.find('input:checkbox')
         .removeAttr('checked').removeAttr('selected');

}

 <asp:TextBox ID="txteventid" runat="server" ReadOnly="true"/> 
```

有什么建议么 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:45:35.677

我不确定你的重置功能在做什么，因为我看不到`if condition`检查`read only`，但你可以试试这个：<从你的代码中给出：>`:)`

即使用 API；`.prop` [http://api.jquery.com/prop/](http://api.jquery.com/prop/)并检查属性或属性的状态：

休息希望这对您的目的有所帮助`:)`

如果你热衷：[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

**这可能会**派上用场：[按属性选择元素](https://stackoverflow.com/questions/1097522/check-existence-of-an-attribute-with-jquery)

```
 function resetForm($form) {
    $form.find('input:text, input:password, input:file, select').val('');   
    $("input[type='hidden']", this).each(function () {
        if($(this).prop('readonly')){ // you could check with string i.e. $(this).prop('readonly') === "true"
         this.value = '';
        }
    });    
    $form.find('input:checkbox')
         .removeAttr('checked').removeAttr('selected');

}

 <asp:TextBox ID="txteventid" runat="server" ReadOnly="true"/> 
```

# button - 在gridview中处理按钮单击事件

> ID：11449958
> 
> 赞同：0
> 
> 时间：2012-07-12T10:32:09.433
> 
> 标签：button, gridview, click, handle

我正在用 C# 编写 asp.net 项目。

该页面由gridview组成，最初是从数据库中填充的。按钮、文本框和下拉列表位于 gridview 中，如图所示。

![网格视图](../Images/ea5b257b2b5b941ce2d17f28e34966c0.png)

我想处理按钮（сообщить）单击事件，以便我知道单击了哪一行gridview，以便从该行获取dropdowlnist的选定值和文本框的值以更新数据库。

有人知道该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:28:50.697

我的第一个想法是，如果您`<asp:TemplateField>`在 gridview 页面中使用标签，那么您应该能够在按钮代码中注册一个事件，如下所示`<asp:Button runat="server" OnClick="MyOnClickEvent" />`：如果您以编程方式添加它们，您应该能够使用按钮的 onClientClick 属性。

尝试阅读[http://www.codeproject.com/Articles/50540/GridView-Event-Handling](http://www.codeproject.com/Articles/50540/GridView-Event-Handling)。它可能会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T18:34:37.993

您可以通过两种方式处理 gridview 中任何按钮类型控件的单击事件。第一种是通过事件冒泡，第二种是直接（在这种类型的事件处理中，我们需要访问当前的 girdviewrow 容器）。

我认为您应该查看这篇文章以获取更多知识。

[如何处理gridview中linkbutton的点击事件](http://www.dotnetbull.com/2013/05/how-to-handle-click-event-of-linkbutton.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T18:52:57.367

您可以在 btnсобщить_Click 事件上尝试 e.RowIndex

# database - 如何在 SQL 中将一列附加到另一列的末尾

> ID：11449960
> 
> 赞同：1
> 
> 时间：2012-07-12T10:32:17.610
> 
> 标签：database, sqlite

我需要使用 SQL 命令将一列中的值附加到另一列，并且需要一些语法帮助。

我有一个带有“http://i2.ytimg.com/vi/”的图像列作为表中所有字段的值。我需要将来自另一个名为“url”的列的值附加到该字符串的末尾。每个条目的 url 字段具有不同的值。

我在想类似的事情：

```
SELECT image + url FROM 'films'; 
```

谢谢你的帮助。

另外，我需要对另一列执行相反的操作，我需要将一列中的值添加到另一列的开头。

:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:35:14.813

试试这个：

对于 mysql ：

```
select CONCAT(column1,column2) from table 
```

或者当您更新它时使用：

```
update table set column1= CONCAT(column1,column2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:35:46.210

您正在寻找的是[`CONCAT`](http://www.tutorialspoint.com/mysql/mysql-concat-function.htm).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:41:58.240

```
SELECT image || url as imageUrl FROM 'films'; 
```

# asp.net - ASP.NET 如何分配给 CalendarExtender 属性 SelectedDate = CalendarTextBox.Text

> ID：11449961
> 
> 赞同：1
> 
> 时间：2012-07-12T10:32:32.503
> 
> 标签：asp.net, ajaxcontroltoolkit, usability

带有 AjaxContolToolkit 的 ASP.NET。

我有一个`CalendarExtender`内部可编辑`GridView`控件。

我想做一件简单的事情：将现有日期值`TextBox.Text`或属性赋值`Label.Text`给`SelectedDate`属性，以使编辑更加用户友好。任务很简单，不是吗？！

```
...
<ItemTemplate>
<asp:Label ID="accdateLbl" runat="server" Text='<%# Bind("totalaccdate") %>'></asp:Label> 
</ItemTemplate>
<EditItemTemplate>
<asp:TextBox ID="accdateEditTxtBox" runat="server" Text='<%# Eval("totalaccdate") %>' ReadOnly="True" />
<asp:CalendarExtender ID="accdateEditTxtBoxCalendarExtender" runat="server" TargetControlID="accdateEditTxtBox" Format="dd-MM-yyyy" PopupButtonID="accdateEditCalImage" 
StartDate="01-01-2011" EndDate='<%# DateTime.Now %>' SelectedDate='???'/>
<asp:Image ID="accdateEditCalImage" runat="server" ImageUrl="~/images/calendar.gif" />
</EditItemTemplate>
... 
```

我尝试了很多片段，没有任何帮助！

而且，拜托，它可以在**没有**额外的 JavaScript 的情况下完成吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:41:40.063

您不需要指定，`SelectedDate`因为它是文本框中已经存在的日期。所以你可以设置`TextBox.Text`属性，它会被`SelectedDate`自动作为。

但是您需要使用与用途**相同的**格式`CalendarExtender`。

在您的情况下（例如在 GridView 的`RowDataBound`事件中）：

```
accdateEditTxtBox.Text = theDate.ToString("dd-MM-yyyy"); 
```

# php - 使用 PHP 正则表达式提取 TLD

> ID：11449963
> 
> 赞同：2
> 
> 时间：2012-07-12T10:32:34.490
> 
> 标签：php, regex, text-parsing

我有一个域名数组，格式如下：

```
www.example.com
www.example.co.uk 
```

我想从中提取顶级 TLD，这将导致（分别）：

```
com
uk 
```

要在 PHP 中执行此操作，我使用的是正则表达式：

```
preg_match("`(?<=\.)\w+$`", $cc, $tld_array); 
```

这意味着匹配`.`域中的最后一个直到字符串的末尾。我希望这能给我

```
com
uk 
```

如上，但只收到

```
NULL
uk 
```

谁能明白为什么二级 TLD 有效而一级 TLD 无效？

RegExr 建议他们也应该这样做：[http ://regexr.com?31gsg](http://regexr.com?31gsg)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T10:56:31.433

您不必对所有内容都使用正则表达式:-) 一个不错的选择：

```
echo substr($domain, strrpos($domain, ".")+1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T15:52:46.130

如果您想在没有正则表达式的情况下执行此操作，我建议在[http://php.net/manual/en/function.parse-url.php使用 php 的 parse_url 函数](http://php.net/manual/en/function.parse-url.php)

示例（您也可以在 php.net 上找到它）：

```
$url = 'http://username:password@hostname:9090/path?arg=value#anchor';
var_dump(parse_url($url, PHP_URL_HOST)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T10:07:42.530

如果您只需要从“www.example.co.uk”中提取“uk”，则使用字符串函数的解决方案非常好。但是，这不是提取真实 TLD 的正确方法，例如，“www.example.co.uk”的 TLD 是“co.uk”，而不是“uk”。

您需要使用[Public Suffix List](https://publicsuffix.org/)的软件包，只有这样您才能正确提取具有二级、三级 TLD（co.uk、a.bg、b.bg 等）的域。我建议使用[TLD Extract](https://github.com/layershifter/TLDExtract)。

这里的代码示例：

```
$extract = new LayerShifter\TLDExtract\Extract();

$result = $extract->parse('www.example.co.uk');
$result->getSuffix(); // will return (string) 'co.uk' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T10:38:39.007

由于评论不适用于此，因此在此处发布：

```
php > $cc = 'www.example.com';
php > preg_match("`(?<=\.)\w+$`", $cc, $tld_array);
php > print_r($tld_array);
Array
(
    [0] => com
) 
```

如果这对您不起作用，请确保您的 example.com 字符串中没有隐藏一些不可打印的字符。

# php - 在指数管理中重新编制指数价格后，仅在指数价格表中自定义产品类型

> ID：11449964
> 
> 赞同：1
> 
> 时间：2012-07-12T10:32:38.897
> 
> 标签：php, magento

我创建了自己的产品类型并希望对价格进行索引，但这仅在我从索引管理运行重新索引后才会发生。

我添加了一个索引器（我的产品类似于一个分组的）。文件看起来像这样

```
 <?php

    class Mymodule_Model_Resource_Product_Indexer_Price_Mymodule extends Mage_Catalog_Model_Resource_Product_Indexer_Price_Default {
        /*
          /**
         * Reindex temporary (price result data) for all products
         *
         * @return Mage_Catalog_Model_Resource_Product_Indexer_Price_Grouped
         */

        public function reindexAll() {
            $this->useIdxTable(true);
            $this->beginTransaction();
            try {
                $this->_prepareMymodulePriceData();
                $this->commit();
            } catch (Exception $e) {
                $this->rollBack();
                throw $e;
            }
            return $this;
        }

        /**
         * Reindex temporary (price result data) for defined product(s)
         *
         * @param int|array $entityIds
         * @return Mage_Catalog_Model_Resource_Product_Indexer_Price_Grouped
         */
        public function reindexEntity($entityIds) {
            $this->_prepareMymoduleData($entityIds);
            return $this;
        }

        /**
         * Calculate minimal and maximal prices for Grouped products
         * Use calculated price for relation products
         *
         * @param int|array $entityIds  the parent entity ids limitation
         * @return Mage_Catalog_Model_Resource_Product_Indexer_Price_Grouped
         */
        protected function _prepareMymodulePriceData($entityIds = null) {
            $write = $this->_getWriteAdapter();
            $table = $this->getIdxTable();

            $select = $write->select()
                    ->from(array('e' => $this->getTable('catalog/product')), 'entity_id')
                    ->joinLeft(
                            array('l' => $this->getTable('catalog/product_link')), 'e.entity_id = l.product_id AND l.link_type_id=' . Mymodule_Model_Product_Type_Link::LINK_TYPE_Mymodule, array())
                    ->join(
                    array('cg' => $this->getTable('customer/customer_group')), '', array('customer_group_id'));
            $this->_addWebsiteJoinToSelect($select, true);
            $this->_addProductWebsiteJoinToSelect($select, 'cw.website_id', 'e.entity_id');
            $maxCheckSql = $write->getCheckSql('le.required_options = 0', 'i.max_price', 0);
            $select->columns('website_id', 'cw')
                    ->joinLeft(
                            array('le' => $this->getTable('catalog/product')), 'le.entity_id = l.linked_product_id', array())
                    ->joinLeft(
                            array('i' => $table), 'i.entity_id = l.linked_product_id AND i.website_id = cw.website_id'
                            . ' AND i.customer_group_id = cg.customer_group_id', array(
                        'tax_class_id' => $this->_getReadAdapter()
                        ->getCheckSql('MIN(i.tax_class_id) IS NULL', '0', 'MIN(i.tax_class_id)'),
                        'price' => new Zend_Db_Expr('NULL'),
                        'final_price' => new Zend_Db_Expr('NULL'),
                        'min_price' => new Zend_Db_Expr('SUM(' . $maxCheckSql . ')'),
                        'max_price' => new Zend_Db_Expr('SUM(' . $maxCheckSql . ')'),
                        'tier_price' => new Zend_Db_Expr('NULL')
                    ))
                    ->group(array('e.entity_id', 'cg.customer_group_id', 'cw.website_id'))
                    ->where('e.type_id=?', $this->getTypeId());
            if (!is_null($entityIds)) {
                $select->where('l.product_id IN(?)', $entityIds);
            }

            /**
             * Add additional external limitation
             */
            Mage::dispatchEvent('catalog_product_prepare_index_select', array(
                'select' => $select,
                'entity_field' => new Zend_Db_Expr('e.entity_id'),
                'website_field' => new Zend_Db_Expr('cw.website_id'),
                'store_field' => new Zend_Db_Expr('cs.store_id')
            ));
            $query = $select->insertFromSelect($table);
            $write->query($query);
            return $this;

        }

} 
```

我的配置如下所示：

```
 <product>
        <type>
            <Mymoduletranslate="label" module="Mymodule">
                <label>Mymodule</label>
                <model>Mymodule/product_type_Mymodule</model>
                <price_model>Mymodule/product_price</price_model>
                <composite>1</composite>
                <index_priority>15</index_priority>
                <allow_product_types>
                    <simple/>
                    <virtual/>
                </allow_product_types>
                <price_indexer>Mymodule/product_indexer_price_Mymodule</price_indexer>
            </Mymodule>
        </type>
    </product> 
```

当我记录该文件时，它也会在我保存产品时运行。我的猜测是我错过了一些重要的部分来使整个事情正常工作:(

欢迎对此提供任何帮助。

# java - 如何分析 ~13GB 的数据？

> ID：11449965
> 
> 赞同：17
> 
> 时间：2012-07-12T10:32:45.643
> 
> 标签：java, database, matlab, large-data

我有大约 300 个文本文件，其中包含有关跟踪器、种子和对等点的数据。每个文件的组织方式如下：

**跟踪器.txt**

```
time torrent
    time peer
    time peer
    ...
time torrent
... 
```

每个跟踪器有几个文件，并且大部分信息都是重复的（相同的信息，不同的时间）。

我希望能够分析我所拥有的并报告诸如此类的统计数据

*   每个跟踪器上有多少种子
*   列出了多少个跟踪器
*   种子有多少个同行
*   同行有多少洪流

庞大的数据量让我很难做到这一点。这是我尝试过的。

**MySQL**

我将所有内容都放入数据库；每个实体类型一个表和保存关系的表（例如这个种子在这个跟踪器上）。

将信息添加到数据库很慢（当我尝试这样做时，我没有 13GB 的数据），但事后分析关系是不行的。每个稍微复杂的查询都需要超过 24 小时才能完成（如果有的话）。

一个示例查询是：

```
SELECT COUNT(DISTINCT torrent) 
    FROM TorrentAtPeer, Peer 
    WHERE TorrentAtPeer.peer = Peer.id 
    GROUP BY Peer.ip; 
```

我尝试增加`my.cnf`文件中的内存分配，但似乎没有帮助。我使用了`my-innodb-heavy-4G.cnf`设置文件。

编辑：添加表详细信息

这是我使用的：

```
Peer         Torrent                  Tracker        
-----------  -----------------------  ------------------  
id (bigint)  id (bigint)              id (bigint)
ip* (int)    infohash* (varchar(40))  url (varchar(255))
port (int)

TorrentAtPeer      TorrentAtTracker
-----------------  ----------------
id (bigint)        id (bigint)
torrent* (bigint)  torrent* (bigint)
peer* (bigint)     tracker* (bigint)
time (int)         time (int)

*indexed field. Navicat reports them as being of normal type and Btree method.
id - Always the primary key 
```

没有外键。我对仅使用与现有实体相对应的 ID 的能力充满信心，添加外键检查似乎是不必要的延迟。这是幼稚的吗？

**MATLAB**

这似乎是一个为一些繁重的工作而设计的应用程序，但我无法分配足够的内存来一次性保存所有数据。

我没有数字数据，所以我使用单元格数组，我从这些数组中转移到尝试以减少占用空间。我无法让它工作。

**爪哇**

迄今为止我最成功的尝试。我找到了 Limewire 人员提供的 Patricia Tries 的实现。使用它，我能够读取数据并计算我拥有的唯一实体的数量：

*   13 个追踪器
*   170 万个种子
*   3200 万同行

我仍然发现很难计算出同龄人的种子数量的频率。我试图通过构建这样的尝试来做到这一点：

```
Trie<String, Trie<String, Object>> peers = new Trie<String, Trie<String, Object>>(...);
for (String line : file) {
    if (containsTorrent(line)) {
        infohash = getInfohash(line);
    }
    else if (containsPeer(line)) {
        Trie<String, Object> torrents = peers.get(getPeer(line));
        torrents.put(infohash, null);
    }
} 
```

从我到目前为止所做的事情来看，如果我能`peers`建立这个 trie，那么我可以很容易地找出每个对等点有多少种子。我昨天运行了它，当我回来时，我注意到日志文件没有被写入，我`^Z`应用程序并`time`报告了以下内容：

```
real 565m41.479s
user 0m0.001s
sys  0m0.019s 
```

这对我来说看起来不对，用户和系统应该这么低吗？我应该提一下，我还将 JVM 的堆大小增加到 7GB（最大和启动），否则我很快就会遇到内存不足的错误。

我不介意等待几个小时/几天，但看起来事情在大约 10 小时后就停止了。

我想我的问题是，我该如何分析这些数据？我尝试过的事情是正确的吗？有什么我想念的吗？Java 解决方案似乎是迄今为止最好的，我能做些什么来让它工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:37:23.233

您说您的 MySQL 查询花费了太长时间。您是否确保有适当的索引来支持您提交的请求类型？在您的示例中，这将是`Peer.ip`（甚至是嵌套索引`(Peer.ip,Peer.id)`）的索引和`TorrentAtPeer.peer`.

据我了解您的 Java 结果，您有很多数据，但没有那么多不同的字符串。因此，您或许可以通过为每个跟踪器、种子和对等点分配一个唯一编号来节省一些时间。每个表使用一个表，一些索引值保存字符串和一个数字主键作为 id。这样，与这些实体相关的所有表只需要处理这些数字，这可以节省大量空间并使您的操作更快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T11:50:00.240

我会再试一次 MySQL，但使用不同的模式：

*   不要在此处使用 id 列
*   在这里使用自然主键：

    **Peer** : ip, port
    **Torrent** : infohash
    **Tracker** : url
    **TorrentPeer** : peer_ip, torrent_infohash, peer_port, time
    **TorrentTracker** : tracker_url, torrent_infohash, time

*   对所有表使用 innoDB 引擎

这有几个优点：

*   InnoDB 使用聚集索引作为主键。意味着当您只从主键列请求数据时，可以直接从索引中检索所有数据，而无需额外查找。所以 InnoDB 表在某种程度上是索引组织的表。
*   尺寸更小，因为您不必存储代理键。-> 速度，因为相同结果的 IO 更少。
*   您现在可以在不使用（昂贵的）连接的情况下进行一些查询，因为您使用自然主键和外键。例如，链接表`TorrentAtPeer`直接包含`peer ip`对等表的外键。如果您需要查询子网中的对等方使用的种子，您现在可以在不使用连接的情况下执行此操作，因为所有相关数据都在链接表中。

如果您想要每个对等点的洪流计数，并且您也希望对等点的 ip 在结果中，那么我们在这里使用自然主/外键时再次具有优势。

使用您的架构，您必须加入以检索 IP：

```
SELECT Peer.ip, COUNT(DISTINCT torrent) 
    FROM TorrentAtPeer, Peer 
    WHERE TorrentAtPeer.peer = Peer.id 
    GROUP BY Peer.ip; 
```

使用自然主键/外键：

```
SELECT peer_ip, COUNT(DISTINCT torrent) 
    FROM TorrentAtPeer 
    GROUP BY peer_ip; 
```

**编辑** 好吧，原始发布的架构不是真实的。现在`Peer`表格有一个`port`字段。我建议在这里使用主键（ip、端口）并仍然删除 id 列。这也意味着链接表需要有多列外键。调整答案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T17:53:25.763

You most likely have a problem that can be solved by NOSQL and distributed technologies.

i) I would write a distributed system using Hadoop/HBase.

ii) Rent several tens / hundred AWS machines, but only for a few seconds (It'll still cost you less than a $0.50)

iii) Profit!!!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:20:23.073

如果你可以使用 C++，你应该看看[Boost flyweight](http://www.boost.org/doc/libs/1_50_0/libs/flyweight/doc/index.html)。

使用flyweight，您可以像编写字符串一样编写代码，但字符串的每个实例（您的跟踪器名称等）仅使用指针的大小。

不管是哪种语言，您都应该将 IP 地址转换为 int（看看[这个问题](https://stackoverflow.com/questions/1680365/integer-to-ip-address-c)）以节省更多内存。

# android - Android - 发布内容为空

> ID：11449967
> 
> 赞同：2
> 
> 时间：2012-07-12T10:32:47.250
> 
> 标签：android, json, post

我正在获取用户插入的联系人并将其发布到数据库中。当我发布时，有时内容是空的，有时不是。为什么？

此代码使用 post 上传姓名联系人和电话联系人，我还发送 id、令牌。当我在数据库上上传时，内容给我 null。有时我得到内容：null，有时它是正确的......

```
public void upload(JSONObject jobject, int id, Context c) {

    ArrayList<NameValuePair> nvp = new ArrayList<NameValuePair>();
    DBupload upload = new DBupload();
    Database db = new Database(c);
    DatosRegistro dr = new DatosRegistro(c);

    nvp.add(new BasicNameValuePair("content", new String().valueOf(jobject)));
    nvp.add(new BasicNameValuePair("token", dr.hash_final(
            dr.token_secret(dr.mail(), "mail"), jobject.toString())));
    nvp.add(new BasicNameValuePair("id", id + ""));

    JSONObject json2 = upload.UploaData(nvp,
            "url");

    try {
        if (json2.getInt("error") == 1) {

        } else {
            db.open();
            db.contact_table(name, phoneNumber);
            db.close();
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

# gwt - 如何使用 Kaazing Websockets 在 GWT 应用程序中接收消息 代理 配置？

> ID：11449969
> 
> 赞同：0
> 
> 时间：2012-07-12T10:32:50.277
> 
> 标签：gwt, websocket, kaazing

我正在尝试构建一个 GWT (2.4.0) 应用程序，该应用程序可以使用基于文本的协议与服务器进行通信（全双工）。为此，我使用 Kaazing Websocket Gateway 版本 3.3.2 作为代理。

***GWT App** <-----[websocket]-----> **Kaazing** <-----[tcp]----->**后端服务器***

这是我的 Kaazing 配置：

```
<service>
  <accept>ws://127.0.0.1:9444/foobar</accept>
  <connect>tcp://localhost:50189</connect>
  <type>proxy</type>
  <cross-site-constraint>
    <allow-origin>http://127.0.0.1:8888</allow-origin>
  </cross-site-constraint>  
</service> 
```

此设置适用于 Kaazing 客户端的 Java 实现。现在我想在 GWT 应用程序中使用这个服务。

这是我的 GWT 客户端实现代码：

```
 WebSocket ws;
    try {
        ws = new WebSocket("ws://127.0.0.1:9444/foobar");
        ws.addCloseHandler(new CloseHandler() {
            @Override
            public void onClose(CloseEvent ev) {
            }
        });
        ws.addMessageHandler(new MessageHandler() {
            @Override
            public void onMessage(MessageEvent ev) {
                System.out.println(ev.getData());
            }
        });
        ws.addOpenHandler(new OpenHandler() {
            @Override
            public void onOpen(OpenEvent ev) {
            }
        });
    } catch (WebSocketException e) {
        e.printStackTrace();
    } 
```

GWT 客户端可以成功地将文本发送到后端服务器。它只是无法处理来自服务器的任何响应。只要调用*ev.getData()* ，就会抛出 JavaScript 异常。

```
Uncaught JavaScript exception [Uncaught java.lang.ClassCastException: com.google.gwt.core.client.JavaScriptObject$ cannot be cast to java.lang.String] 
```

如果我将上面代码中的 WebSocket 地址更改为*ws://127.0.0.1:9444/echo*以使用 Kaazing echo 服务，我发送的任何文本都会被 GWT 应用程序成功接收。如果我将服务改回*代理*（或*广播*），则每次收到来自服务器的消息时都会引发上述 JavaScript 异常。

Java 程序中的相同代码（使用 Kaazing java 客户端）工作得很好。

由于我不是 GWT 专家，有什么方法可以进一步调试问题，还是有一个我看不到的简单解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:17:24.483

我相信我以前见过这个问题，你介意分享你的 gwtclient.gwt.xml 文件内容吗？或者，根据您在 GWT 客户端的“gwtclient.gwt.xml”中使用的是 ByteSocket 还是 WebSocket，尝试添加 '' 或 ''。

希望这可以帮助，

-马塞洛

# ruby - 从不同数据库中总结 2 组不相交的 Mongo 文档的最简单方法是什么？

> ID：11449970
> 
> 赞同：0
> 
> 时间：2012-07-12T10:32:54.283
> 
> 标签：ruby, mongodb, mongoid

我有相同的文档集合，在两个不同的数据库中找到。我想总结两个数据库的文件。怎么做最容易？我需要这些集合的总和，这些集合是不相交的。

我假设通过使用 mongoimport、mongorestore 但您建议如何处理该问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:39:03.620

我会用 mongodump 来做，是的。

```
mongodump -d dbA 
```

这将在`dump/dbA`. 现在运行此命令将它们导入另一个数据库。

```
mongorestore -d dbB dump/dbA 
```

您可以运行`mongorestore --help`以获取有关其参数的更多信息。

# java - 异步函数 - 错误状态 0

> ID：11449976
> 
> 赞同：0
> 
> 时间：2012-07-12T10:33:11.507
> 
> 标签：java, gwt

我执行我的异步函数，结果在我重新加载浏览器之前出现错误 - OnFailure(Throwable) 被执行。状态错误代码为 0。

这个问题出现在 FireFox 和 Chrome 上。

你能告诉我这个状态码是什么意思吗？

```
do(new AsyncCallback<Boolean>() {
    @Override
    public void onSuccess(Boolean result) {}

    @Override
    public void onFailure(Throwable throw) {
        do_sth();
    }
});

Boolean do() { while(true); } 
```

这也返回状态错误 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:08:18.707

此处的`0`状态码表示请求已中止（也可能表示网络错误或请求超时）。

请参阅[http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute](http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute)和[http://www.w3.org/TR/XMLHttpRequest/#error-flag](http://www.w3.org/TR/XMLHttpRequest/#error-flag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:33:19.110

您总是可以这样定义`onFailure()`（改编自[GWT API](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/rpc/AsyncCallback.html)），以便能够很好地处理不同类型的故障：

```
public void onFailure(Throwable caught) {
  try {
    throw caught;
  } catch (IncompatibleRemoteServiceException e) {
    // this client is not compatible with the server; cleanup and refresh the 
    // browser
  } catch (InvocationException e) {
    // the call didn't complete cleanly
  } catch (YourOwnException e) {
    // take appropriate action
  } catch (Throwable e) {
    // last resort -- a very unexpected exception
  }
} 
```

# jquery - 单击时触发 jQuery 函数

> ID：11449977
> 
> 赞同：0
> 
> 时间：2012-07-12T10:33:11.883
> 
> 标签：jquery, ajax, onclick

这很简单，但我对 jQuery 的效率不是很高，发现很难让它工作......

我希望显示一个通知弹出窗口（就像 facebook 一样），告诉用户他已经获得了一些积分。

我正在使用 WordPress，弹出窗口的代码工作正常，如下所示。

```
jQuery.noticeAdd({
    text: " Congratulations! You Have Just Earned 5 More Points",
    stay: false
}); 
```

但是，我希望在单击特定按钮后显示弹出窗口。该按钮的类是**comment-reply-link**。

所以我写了这段代码

```
$(".comment-reply-link").click(function() {
    jQuery.noticeAdd({
        text: " Congratulations! You Have Just Earned 5 More Points",
        stay: false
    });
}); 
```

但是这段代码不起作用..我犯了什么错误吗？如何使通知弹出窗口仅在单击具有特定类的按钮时才出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:36:46.980

如果可行，请一一尝试这两个代码

## 第一个代码

```
$(".comment-reply-link").click(function() {
    $.noticeAdd({ text: " Congratulations! You Have Just Earned 5 More Points",stay: false}); 
}); 
```

## 第二个代码

```
jQuery(".comment-reply-link").click(function() {
    jQuery.noticeAdd({ text: " Congratulations! You Have Just Earned 5 More Points",stay: false}); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:36:53.857

尝试

```
$(document).on( "click", ".comment-reply-link", function() {
    jQuery.noticeAdd({
        text: " Congratulations! You Have Just Earned 5 More Points",
        stay: false
    });
}); 
```

`$(".comment-reply-link").click(`在选择器运行**时**`"click"`在匹配的元素上附加一个处理程序。`".comment-reply-link"`

# c# - WPF中的动态屏幕设计

> ID：11449983
> 
> 赞同：0
> 
> 时间：2012-07-12T10:33:34.600
> 
> 标签：c#, wpf, drag-and-drop

我想实现一个屏幕设计和功能，用户可以动态重新排列控件并将布局保存到数据库中。

在开始之前，我正在寻找一些有用的提示/输入/建议的技术专业知识，以决定如何成功实施。

假设我有一个带有 2 列和 10 行的网格面板的屏幕。每个单元格都有一个网格面板，其中包含标签、文本框、组合框、复选框等控件。

但总的来说，每个单元格都包含一个子网格面板。

要求：

在运行期间，用户应该能够根据自己的意愿重新排列（拖放）这些子网格面板，并且还应该能够将布局保存到数据库中。

如果用户下次打开相同的屏幕，则必须显示修改后的布局。

欢迎提出建议

# iphone - Iphone 3g 示例应用程序

> ID：11449987
> 
> 赞同：-1
> 
> 时间：2012-07-12T10:34:06.027
> 
> 标签：iphone, 3g

我是一名 android 开发人员。我的兄弟收到了一部旧的 iphone 3g，我想为此设备创建一个示例应用程序。我有一个带有 OSX 10.5.1 的 imac 21" ...我需要什么才能从我的 mac 制作应用程序？谢谢男孩们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:35:34.667

要开发 iPhone 应用程序，您需要运行 Xcode 工具的 Mac OS X 计算机和具有良好 Objective C 知识的开发人员。Xcode 是 Apple 的开发工具套件，为项目管理、源代码级调试、代码编辑、代码构建、性能调整提供支持等等

**Xcode**：Xcode 是一个集成开发环境 (IDE)，它提供了创建和管理 iPhone 项目和源文件、将代码构建成可执行文件以及在 iPhone 模拟器或在设备。

**Instruments**： Instruments 需要确保您提供最佳的用户体验，并让您在设备上运行时分析 iphone 应用程序的性能。Instrument 将帮助您从正在运行的应用程序中收集数据，并将该数据显示在称为时间线的图形显示中。

**Interface Builder**：Interface Builder 是您用来可视化组装应用程序用户界面的工具。使用 Interface Builder，您可以通过将预先配置的组件拖放到应用程序窗口上来组装应用程序的窗口。

（[参考](http://www.eltalearning.com/iphone-application-development-tools-and-requirement/2009/02/23/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:12:03.800

好的，我得到了链接，但是您需要一个 appleid 才能下载它，链接是[这个](https://developer.apple.com/downloads/index.action)

[你可以在这里](https://connect.apple.com/cgi-bin/WebObjects/register.woa/wa/default?userAction=createAccount&mode=register&successURL=https://developer.apple.com/membercenter/login.action&cancelURL=https://developer.apple.com/programs)免费获得一个ID

# php - PHP 导出到 Excel，在 iPad 上

> ID：11449989
> 
> 赞同：1
> 
> 时间：2012-07-12T10:34:09.193
> 
> 标签：php, ios5

我有一个脚本可以将 mysql 结果输出到 excel，它在所有浏览器中都可以正常工作。但是，我需要脚本也可以在 iPad 上工作，在 Safari 中打开 excel。此时，脚本只是“挂起”在 iPad 上，它一直在加载。这是标题问题吗？此时的代码头：

```
header( 'Content-Transfer-Encoding: binary' );
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header('Content-Type: application/vnd.ms-excel');
//header("Content-Type: application/octet-stream");
header('Content-Disposition: attachment;filename="' . $_POST['Client_FirstName'] . ' ' .     $_POST['Client_LastName'] . ' ' . $_POST['month'] . '-' . $_POST['year'] . '.xlsx"');
header('Cache-Control: max-age=0');
header("Pragma: public");
header("Expires: 0"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:01:13.240

显然是导致问题的 application/vnd.ms-excel 标头。将其设置为 octet-stream 解决了该问题，但随后导致 IE8 出现问题。所以我用这段代码完全解决了这个问题：

```
if(stristr($_SERVER['HTTP_USER_AGENT'], 'ipad') OR stristr($_SERVER['HTTP_USER_AGENT'],     'iphone') OR stristr($_SERVER['HTTP_USER_AGENT'], 'ipod')) 
{ 
  header("Content-Type: application/octet-stream"); 
}else{ 
  header('Content-Type: application/vnd.ms-excel'); 
} 
```

# wcf - 如果 WCF 服务有多个名称的端点，如何在服务参考中使用 WCF 服务

> ID：11449995
> 
> 赞同：1
> 
> 时间：2012-07-12T10:34:28.943
> 
> 标签：wcf, wcf-endpoint

我有一个非常具体的问题.. 如果我创建一个 WCF 服务并且它有多个端点名称，我如何使用浏览器访问它？另外，我如何通过添加服务参考在我的客户端应用程序中访问它？

像我的配置代码：

```
<services>
  <service name="MultipleEndpoint.SampleService" behaviorConfiguration="MultipleEndpoint.SampleService">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:55052/SampleService.svc"/>
      </baseAddresses>
    </host>
    <endpoint address="/basic" binding="basicHttpBinding" contract="MultipleEndpoint.ISampleService" bindingConfiguration="basicBinding" >
    </endpoint>
    <endpoint address="/wsHttp" binding="wsHttpBinding" contract="MultipleEndpoint.ISampleService" bindingConfiguration="wsBinding" >          
    </endpoint>
    <endpoint address="/webHttp" binding="webHttpBinding" contract="MultipleEndpoint.ISampleService" behaviorConfiguration="REST">
    </endpoint>        
  </service>
</services> 
```

现在，当我尝试使用

```
http://localhost:55052/SampleService.svc/basic or 
http://localhost:55052/SampleService.svc/wsHttp 
```

它给了我页面/资源未找到 IE 标准错误消息...同时我想知道如何在我的客户端应用程序中添加这种类型的 url 作为服务引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:53:55.667

这些服务地址是不同的，它们并不严格需要是可浏览的，这意味着您无法浏览服务以查找类似*http://localhost:55052/SampleService.svc/basic*的端点。**这些地址用于区分通信中的端点**。

如果您看到服务的 wsdl，那么所有这些端点的地址都在此处指定。

如果您通过“添加服务引用”创建服务代理，则所有端点都在配置中单独创建，例如..

```
<client>
    <endpoint address="http://localhost:54671/Service1.svc/basic"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService1"
            contract="ServiceReference1.IService1" name="BasicHttpBinding_IService1" />

    <endpoint address="http://localhost:54671/Service1.svc/ws" binding="wsHttpBinding"
            bindingConfiguration="WSHttpBinding_IService1" contract="ServiceReference1.IService1"
            name="WSHttpBinding_IService1">
    </endpoint>
    ...
</client> 
```

假设您想使用基本的 http 端点与服务通信，那么您可以通过`name`在 ctor 中传递相应的端点配置来为其创建代理。

前任。

```
// this will uses the basic http endpoint.
Service1Client client = new Service1Client("BasicHttpBinding_IService1"); 
```