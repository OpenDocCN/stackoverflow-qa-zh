# StackOverflow 问答 12047000-12047999

# java - 如何使用 Java（或其他语言）以编程方式使用密码打开 RAR 文件

> ID：12047003
> 
> 赞同：1
> 
> 时间：2012-08-21T00:29:17.880
> 
> 标签：java, python, passwords, rar, unrar

如何以编程方式打开 RAR 文件并输入密码？如果可能的话，我想使用 Java 或 Python，但任何编程语言都应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:31:43.947

对于 Python，您需要：[“Python 的 RAR 存档阅读器”](http://pypi.python.org/pypi/rarfile/2.5)

# c# - 如何恢复未正确释放的 COM 对象？

> ID：12047005
> 
> 赞同：3
> 
> 时间：2012-08-21T00:30:03.553
> 
> 标签：c#, .net, windows, com-interop, taskmanager

当有人使用任务管理器结束实例化 COM 对象的 .NET 进程时，AFAIK 无法调用`Marshal.FinalReleaseComObject`,或事件处理块。`try {} finally {}``using {}`

下次我启动应用程序时，COM 对象处于不可用状态，我需要重新启动机器以使其再次工作。

我`Marshal.BindToMoniker`用来实例化对象。

我做错了什么，我错过了什么吗？

* * *

我尝试了 Saeed 的建议，但没有奏效

```
private const int WM_CLOSE = 0x0010;

protected override void WndProc(ref Message m)
{
    if (m.Msg == WM_CLOSE)
    {
        logger.Info("WM_CLOSE");
        Marshal.FinalReleaseComObject(comObject);
    }

    base.WndProc(ref m);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:24:49.097

你可能不需要。当垃圾收集器开始释放内存时，它会检查对象是否具有尚未调用的 Dispose() 方法。如果尚未调用 Dispose() 方法，它将调用它。

我在控制台应用程序中对此进行了测试，并且在我的 Dispose 功能中发出了 3 次扬声器哔声。退出应用程序后，没有在对象上调用 Dispose，大约需要 30 秒才能听到 3 声哔哔声。时间是不确定的。

当然，对象必须已正确编码。

您是否尝试在关闭后立即运行应用程序？为什么不等几分钟，看看它是否有效？

编辑：我假设您的 Dispose 函数中有 Marshal.FinalReleaseComObject 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:23:21.880

任务管理器正在使用本机等价物[`Process.Kill`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)（或者可能更强大）。请注意文档中的此叙述：

> **`Kill`**强制终止进程，而[`CloseMainWindow`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow.aspx)仅请求终止。
> 
> ...
> 
> 调用`CloseMainWindow`发送关闭主窗口的请求，在格式良好的应用程序中...

和，

> 如果您调用**`Kill`**. **`Kill`**导致进程异常终止，仅在必要时使用。

简而言之，您实际上无法从程序代码内部做任何事情来防止这种情况发生 - 插头已被拔掉。不会发送任何窗口消息。

# r - 按向量 R 中的维度名称对矩阵进行子集

> ID：12047007
> 
> 赞同：4
> 
> 时间：2012-08-21T00:31:02.447
> 
> 标签：r, matrix, sparse-matrix

我有一个向量节点名作为

```
nodenames <- c("A","B","C","T","N","Z") 
```

我有一个带有暗名的方形稀疏矩阵

```
Formal class 'dgCMatrix' [package "Matrix"] with 6 slots
  ..@ i       : int [1:4149962] 1 2 3 4 5 9 11 12 13 14 ...
  ..@ p       : int [1:3417] 0 1702 2710 3935 5411 6719 8141 9822 9822 11515 ...
  ..@ Dim     : int [1:2] 3416 3416
  ..@ Dimnames:List of 2
  .. ..$ : chr [1:3416] "A" "B" "AAL" "T" ...
  .. ..$ : chr [1:3416] "A" "B" "AAL" "T" ...
  ..@ x       : num [1:4149962] 2 1 1 3 1 1 2 19 3 2 ...
  ..@ factors : list() 
```

如何在节点名中生成带有暗名的该矩阵的子集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T00:49:56.123

您可以根据索引号、维度名称（通过字符向量，例如 your `nodenames`）、逻辑向量以及可能超出我范围的其他内容来对矩阵进行子集化。

```
mat1[nodenames, nodenames]
  A  B  C  T  N  Z
A 12 22 42 62 72 82
B 13 23 43 63 73 83
C 15 25 45 65 75 85
T 17 27 47 67 77 87
N 18 28 48 68 78 88
Z 19 29 49 69 79 89 
```

或者：

```
mat1[which(rownames(mat1)%in% nodenames), which(colnames(mat1) %in% nodenames)]
mat1[rownames(mat1)%in% nodenames, colnames(mat1) %in% nodenames] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T00:43:47.900

我认为 Tim Riffe 的回答是最直接的。如果用户不确定 'nodenames' 向量是否是 rownames() 和 colnames() 值的子集，那么这可能更安全一些：

```
nodenames <- c("A","ZZ","C","T","N","Z")

seq1 <- seq(1:100)
mat1 <- matrix(seq1, 10)
rownames(mat1)<-c("G","A","B","F","C","D","T","N","Z","J")
colnames(mat1)<-c("G","A","B","F","C","D","T","N","Z","J")
mat1[rownames(mat1) %in% nodenames, colnames(mat1) %in% nodenames]
#----------
   A  C  T  N  Z
A 12 42 62 72 82
C 15 45 65 75 85
T 17 47 67 77 87
N 18 48 68 78 88
Z 19 49 69 79 89 
```

对于类-dgCMatrix 对象的修正问题，我使用相同的方法得到了合理的结果：

```
(m <- Matrix(c(0,0,2:0), 3,5))
3 x 5 sparse Matrix of class "dgCMatrix"

[1,] . 1 . . 2
[2,] . . 2 . 1
[3,] 2 . 1 . .

 m@Dimnames <- list(X=letters[1:3], Y=LETTERS[1:5])
 m["a", "B"]
# [1] 1
 m["a", c("A","B")]
# A B 
# 0 1 
```

# php - 如何将 php 数组传递给 postgres 函数

> ID：12047009
> 
> 赞同：5
> 
> 时间：2012-08-21T00:31:09.550
> 
> 标签：php, postgresql, postgresql-9.1

我试图将 PHP 数组传递给以下函数，但收效甚微。

```
$recipients = array();
$recipients['6c2f7451-bac8-4cdd-87ce-45d55d152078'] = 5.00;
$recipients['8c2f3421-bac8-4cdd-87ce-45d55d152074'] = 10.00;

$originator = '5630cc6d-f994-43ff-abec-1ebb74d39a3f';
$params = array($originator, $recipients);

pg_query_params(_conn, 'SELECT widgetallocationrequest($1, $2)', $params);

$results = pg_fetch_all(pg_query_params);
... 
```

该函数接受一个自定义类型的数组：

```
CREATE TYPE widgetallocationrequest AS (id uuid, amount numeric(13,4)); 
```

并枚举每个项目并执行操作：

```
CREATE FUNCTION distributeWidgets(pid uuid, precipients widgetallocationrequest[])
 RETURNS BOOLEAN AS
 $BODY$
{
FOREACH v_recipient IN ARRAY precipients
LOOP
    ...do something
END LOOP;
}
  RETURN TRUE;
END;
$BODY$
LANGUAGE plpgsql VOLATILE STRICT
COST 100;

***(if the specific code sample contains errors it's only pseudocode, i'm really just looking for the best way to pass a php array to a postgres custom type array as a parameter so it can be enumerated in the postgres function)*** 
```

更新：我可以直接从 postgres（而不是 PHP）成功调用函数，方法如下：

```
SELECT distributeWidgets('5630cc6d-f994-43ff-abec-1ebb74d39a3f',
ARRAY[('ac747f0e-93d4-43a9-bc5b-09df06593239', '5.00'), ('8c2f3421-bac8-4cdd-87ce-45d55d152074', '10.00')]::widgetallocationrequest[]); 
```

但仍然不确定如何从这个 postgres 示例转换回 PHP

我尝试了以下建议，并且引用函数的输出产生以下错误：

![在此处输入图像描述](../Images/15b09648ab6657bd2ea3fac18fd92ace.png)

函数中的字符串如下：

```
'SELECT account.hldtoexpalloc('0d6311cc-0d74-4a32-8cf9-87835651e1ee', '0124a045-b2e8-4a9f-b8c4-43b1e4cf638d', '{{\"6c2f7451-bac8-4cdd-87ce-45d55d152078\",5.00},{\"8c2f3421-bac8-4cdd-87ce-45d55d152074\",10.00}}')' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T02:19:46.067

**更新**：我刚刚注意到您不仅需要数组，还需要使用复合类型的数组。伊克。我从来不需要和他们一起工作，所以我不得不做一些检查。

一个数组的正确 PostgreSQL 语法似乎`widgetallocationrequest`是：

```
'{"(8c2f3421-bac8-4cdd-87ce-45d55d152074,10.0000)","(6c2f7451-bac8-4cdd-87ce-45d55d152078,5.0000)"}'::widgetallocationrequest[] 
```

看看每个复合类型的行是如何包含在`"(col1,col2)"`数组`{a,b,c}`容器中的？

这是我如何创建值的 PostgreSQL SQL 示例：

```
-- Create the array of composites from a VALUES() statement
--
SELECT array_agg(x::widgetallocationrequest) 
FROM (VALUES 
    ('8c2f3421-bac8-4cdd-87ce-45d55d152074',10.00),
    ('6c2f7451-bac8-4cdd-87ce-45d55d152078',5.00)
) x; 
```

...以及我如何验证它是有效的：

```
-- Unpack it back into a row-set of columns
SELECT * FROM unnest('{"(8c2f3421-bac8-4cdd-87ce-45d55d152074,10.0000)","(6c2f7451-bac8-4cdd-87ce-45d55d152078,5.0000)"}'::widgetallocationrequest[]); 
```

现在，PHP 的 Pg 驱动程序甚至不支持数组，更不用说复合类型的数组了，所以你将不得不找其他人来写你想要的或者自己写。编写一个可靠的解析器将是“有趣的”，而不是有效地利用时间。

让我们采用另一种方法：生成一个查询，让您通过转换为`widgetallocationrequest[]`内部 PostgreSQL 来合理地调用该函数。

这是一个虚拟函数，其参数与您的真实函数相同，我们将用作调用目标：

```
CREATE OR REPLACE FUNCTION distributeWidgets(pid uuid, precipients widgetallocationrequest[]) RETURNS boolean AS $$
SELECT 't'::boolean;
$$ LANGUAGE 'sql'; 
```

你可以看到它可以用复合数组语法来调用，这给你带来了很多麻烦：

```
SELECT distributewidgets(null, '{"(8c2f3421-bac8-4cdd-87ce-45d55d152074,10.0000)","(6c2f7451-bac8-4cdd-87ce-45d55d152078,5.0000)"}'); 
```

...但理想情况下，您希望避免从 PHP 产生任何可怕的东西，并且驱动程序缺少重要功能，因此无法为您完成。

相反，您可以使用一个`TEMPORARY`表来生成参数，将`INSERT`每个参数行放入带有常规参数化`INSERT`的表中，然后执行查询以执行函数。

```
BEGIN;

CREATE TEMPORARY TABLE dw_args ( id uuid, amount numeric(13,4) );

-- Use proper parameterized INSERTs from PHP, this is just an example
INSERT INTO dw_args(id,amount) VALUES ('8c2f3421-bac8-4cdd-87ce-45d55d152074',10.00);
INSERT INTO dw_args(id,amount) VALUES ('6c2f7451-bac8-4cdd-87ce-45d55d152078',5.00);

SELECT distributewidgets(null, array_agg(ROW(x.*)::widgetallocationrequest)) 
FROM dw_args x;

DROP TABLE dw_args;

COMMIT; 
```

**警告**：如果不小心处理，以下内容很容易受到[SQL 注入的影响。](http://en.wikipedia.org/wiki/SQL_injection)如果可能，请使用上述临时表方法。不要成为[鲍比](http://xkcd.com/327/)的下一个受害者；阅读[有关 SQL 注入的 PHP 文档](http://php.net/manual/en/security.database.sql-injection.php)。

如果由于某种原因绝对有必要在一个语句中运行它，您可以改为使用`VALUES`PHP 的集合生成查询，并将其转换为`widgetallocationrequest[]`使用 PostgreSQL 查询的查询。我在上面演示了它，但这里是如何将它与调用结合起来 `distributeWidgets(...)`：

```
SELECT distributewidgets(null, array_agg(x::widgetallocationrequest)) 
FROM (VALUES 
        ('8c2f3421-bac8-4cdd-87ce-45d55d152074',10.00),
        ('6c2f7451-bac8-4cdd-87ce-45d55d152078',5.00)
) x; 
```

只要您对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)非常小心，您就可以使用字符串操作在 PHP 中轻松构建。

如果可能，请使用临时表方法。

另请参见[PHP 数组到 postgres 数组](https://stackoverflow.com/questions/5631387/php-array-to-postgres-array)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T07:52:48.643

«*现在，PHP 的 Pg 驱动程序甚至不支持数组，更不用说复合类型的数组了，所以你将不得不找其他人写你想要的东西或者自己写。编写一个可靠的解析器将是“有趣的”，而不是有效地利用时间。*»

你可以使用[Pomm 的转换器系统](https://github.com/chanmix51/Pomm)，它解析数组和 HStore，你甚至可以定义自己的类型转换器，它会处理它的数组。

希望有帮助。

# android - android，eclipse以非当前项目打开

> ID：12047011
> 
> 赞同：0
> 
> 时间：2012-08-21T00:31:32.400
> 
> 标签：android, eclipse, project

我正在使用 eclipse 来开发我的 android 应用程序，

我一直在做一些项目，我打开了标签并一直在运行项目 X。

但是如果我关闭 eclipse，然后再打开它，

Eclipse 使用我之前打开的选项卡打开，但在“包资源管理器”上，打开了一个不同的项目

不是我关闭 Eclipse 时正在处理的那个，

不是什么大事，就是烦人再全部打开，

有没有办法在我为 Eclipse 加注星标时打开我的项目，而不是一些旧项目？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:37:01.240

似乎是默认目录设置问题，您可以将工作区目录设置为您的项目所在的目录：请参阅[此](https://stackoverflow.com/a/9519549/824345)链接。

# batch-file - Sharepoint 批量删除

> ID：12047014
> 
> 赞同：0
> 
> 时间：2012-08-21T00:31:52.560
> 
> 标签：batch-file, sharepoint

我正在尝试在 SharePoint 2007/2010 上执行批量删除操作。

当我使用 List.asmx -> UpdateListItems 执行以下操作时，我得到了混合行为：

```
`<Batch OnError="Return" PreCalc="TRUE">
  <Method ID="87c970a3000c4e789a9c49ed43768865" Cmd="Delete">
    <Field Name="ID">18</Field>
    <Field Name="FileRef">
    http://vs-dev-sp2010/list1/DocLib/New
    Document-2.docx</Field>
  </Method>
  <Method ID="46e335183be64367a34c178772a86d92" Cmd="Delete">
    <Field Name="ID">6</Field>
    <Field Name="FileRef">
    http://vs-dev-sp2010/ list1/DocLib /New
    Document.docx</Field>
  </Method>
</Batch>` 
```

第一项的操作成功（被删除），第二项失败（被检出给另一个用户）。这使得回滚事务变得非常困难（不可能？），因为已删除的项目会将版本历史、作者和创建日期/时间带入坟墓。由于 SharePoint 允许您“关闭”回收站，因此已删除的项目可能会永远消失。我希望 SharePoint 回滚失败的操作并返回整个批次的成功或失败；但是我观察到的行为是事务部分成功。

我还观察到，如果上述项目位于容器（文件夹）中，则整个批次都会失败（这是我所期待的行为）。

强制执行悲观并发不是一个选项，因为签出文件无法批处理（批处理中可能有数千个文件）。即使可以批量结帐，结帐操作本身也可能触发自定义工作流程。

有谁知道在 SharePoint 上强制执行批量删除操作的原子行为的属性，看到我发送的请求中的缺陷，或者有更好的批量删除项目解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T15:27:02.397

不幸的是[，Sharepoint 列表不支持](http://social.technet.microsoft.com/wiki/contents/articles/5546.transactions-in-sharepoint.aspx)交易，根据我的经验，没有简单、通用的方法来实现这种行为。

据我了解，您的问题归结为类似的问题，[丢失交易的解决方法是什么](https://stackoverflow.com/questions/6079728/what-are-the-workarounds-for-missing-transactions-rollback-and-commit-support)。对于在这里寻找答案的开发人员来说，这可能是一个很好的起点。

# javascript - HTML5 Canvas 撤消在 IE 或 Firefox 中无法正常工作

> ID：12047018
> 
> 赞同：0
> 
> 时间：2012-08-21T00:32:15.320
> 
> 标签：javascript, canvas, html5-canvas

我已经开始为画布元素创建撤消脚本。它远未完成，但基础已经到位。该代码在 Chrome、Safari 和 Opera 中运行良好，但在 IE 和 Firefox 中抛出错误。Firefox`NS_ERROR_XPC_BAD_OP_ON_WN_PROTO: Illegal operation on WrappedNative prototype object`的错误是 IE 的错误是`Invalid calling object`.

这两个错误都与以下行有关：`var original = context[p];`在`bind()`函数中。

**这是我的代码：http: [//jsfiddle.net/evnkennedy/cDdJd/](http://jsfiddle.net/evankennedy/cDdJd/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:46:45.133

当您尝试在自己的代码中包装本机对象的方法时，某些浏览器不喜欢它。这是一个安全“功能”。

您最好创建一个全新的对象类来包装上下文，然后代理其方法（和属性）。

这也将避免对您的`history.write`状态的需要，因为`undo`and`redo`方法仍然可以访问原始方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:18:46.793

因为您的脚本缺少注释并且问题没有详细解释它，所以很难弄清楚您在做什么。

但是，如果您需要存储状态，则`<canvas>`需要将其所有像素复制到内存缓冲区。无法克隆画布或上下文对象，因为它们绑定到当前 UI 状态。

要访问画布数据，请使用 getImageData()

*https://developer.mozilla.org/en-US/docs/DOM/CanvasRenderingContext2D#getImageData%28%29

并用相应的 put 像素调用来恢复它。

# visual-studio-2010 - 如何将我的 WIX 项目链接器链接到包含空格的资源路径？

> ID：12047019
> 
> 赞同：1
> 
> 时间：2012-08-21T00:32:24.760
> 
> 标签：visual-studio-2010, linker, installation, wix, wix3.6

[其他帖子](https://stackoverflow.com/questions/1811035/spaces-in-my-wix-source-path)指向答案，但没有一个答案在 Visual Studio 2010 中有效。

最新版本的 WIX 不能像连接到项目（特别是 Web 项目）时那样开箱即用。因此，我想像这样链接到 $(SolutionDir) 宏：

```
-b $(SolutionDir)\ChildPath\ 
```

但是，解决方案目录中有一个空间。例如：

```
C:\Some Path\ChildPath\ 
```

这会引发错误：

```
The system cannot find the file 'Path\ChildPath\' with type 'Source'. 
```

请注意空格之后的所有内容都是错误中出现的内容。显然是在命令行命令中使用路径而不用引号引起来的特征。但是，如果您用引号括起来，链接器将无法解释第二个引号并给出另一个详细错误（它太蹩脚了，我不会发布）。你甚至不能这样做，否则 light.exe 会转储：

```
-b "C:\Some Path\ChildPath\" 
```

基本上，如果路径中的任何地方都有空格，则没有直观的方法可以在链接器中连接 a -b 开关。light.exe 既不能从命令行也不能从其他任何地方处理它。还有一件事：它确实说你应该能够在空格后双击路径，但这也不起作用：

```
-b C:\Some Path\\ChildPath\ 
```

我错过了什么？

# jquery - jquery 在显示 :last 时显示 div

> ID：12047024
> 
> 赞同：1
> 
> 时间：2012-08-21T00:33:06.907
> 
> 标签：jquery

正如标题所说，我正在尝试让一个 div 来显示何时`:last`显示，这就是我到目前为止所拥有的

```
$(function() {
    $('#d').hide();
    var $images = $('#d1 > .c1 > a').clone(),
        $imgShow = 0;
    $('#d1 > .c1').html($('#d1 > .c1 > a:first'));
    $('#d1 > .c1 > a').click(function(e) {
        var $n = $('img', $images).eq(++$imgShow).attr('src');
        $(this).children().attr('src', $n);
        e.preventDefault();
    });
}); 
```

​</p>

[见 jfiddle 的演示](http://jsfiddle.net/EjGnK/3/)

我尝试了`:last`点击，但这似乎不起作用（因此它在 jfiddle 中被注释掉）加上让它`:last`在视图中显示是一个更好的选择，如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:40:07.603

`last`不起作用，因为您正在`DOM`使用`html()`呼叫来操纵。更好的方法是存储图像总数，然后显示`div`到达最后一张图像的时间（即`totalImages == imgShow`）：

```
var $images  = $('#d1 > .c1 > a').clone(),
    $imgShow = 0,
    totalImages = $images.length;

// ...

$('#d1 > .c1 > a').click(function(e) {
  var $n = $('img', $images).eq(++$imgShow).attr('src');
  $(this).children().attr('src', $n);
  e.preventDefault();

  if ($imgShow == totalImages) {
    $("#d").show();   
  }
}); 
```

[小提琴](http://jsfiddle.net/EjGnK/4/)。

# magento - Magento：如何让产品“最小销售数量”显示

> ID：12047030
> 
> 赞同：1
> 
> 时间：2012-08-21T00:33:26.570
> 
> 标签：magento

下面代码中的 Magento 1.7 我试图让产品属性“购物车中允许的最小数量”显示到前端。我错过了什么？谢谢

```
<dl class="product-sku">
                    <dt><?php echo $this->__('Product SKU') ?>:</dt>
                    <dd><?php echo $_helper->productAttribute($_product, $_product->getSKU(), 'sku') ?></dd>

                    <dt><?php echo $this->__('Dimensions') ?>:</dt>
                    <dd><?php echo $_helper->productAttribute($_product, $_product->getDimensions(), 'dimensions') ?></dd>

                    <dt><?php echo $this->__('Configuration') ?>:</dt>
                    <dd><?php echo $_helper->productAttribute($_product, $_product->getConfiguration(), 'configuration') ?></dd>

                    <dt><?php echo $this->__('Minimum Purchase Quantity') ?>:</dt>
                    <dd><?php echo $_helper->productAttribute($_product, $_product->getMinSaleQty(), 'min_sale_qty') ?></dd>
                </dl> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T02:26:36.820

这应该有效：

```
$productQuantity = Mage::getModel("cataloginventory/stock_item")
->loadByProduct($_product->getId()); 
```

你的最低数量在这里....

```
$productQuantity->getMinSaleQty(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-31T14:57:06.293

加载的产品模型包含`Mage_CatalogInventory_Model_Stock_Item Object`处理库存和库存信息。我喜欢处理这个问题的方式是：

```
$minsale = $_product->getStockItem()->getMinSaleQty(); 
```

# image - TCPDF 可以将文本本地输出为图像吗

> ID：12047031
> 
> 赞同：1
> 
> 时间：2012-08-21T00:33:26.890
> 
> 标签：image, text, tcpdf, spam-prevention

生成 PDF 时，TCPDF 似乎非常强大。由于很多事情都可以直接在TCPDF中完成，我想知道是否可以直接在TCPDF中将文本转换为图像。（或以某种方式保存 PDF，使机器无法轻松读取某些文本部分）

目标是提供一种垃圾邮件保护，使爬虫很难在不使用 OCR 技术的情况下从 PDF 文件中提取某些数据。

我能够从 PHP 中的文本创建图像并将它们插入到 TCPDF 中，但是直接在 TCPDF 中进行这种转换会更容易处理字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-24T02:58:24.640

不，据我所知。我正在回答这个问题，因为 tcpdf 文档目前还不清楚，我也想知道。仅供参考，我所做的是使用 imagick （安装正确后直接）将 tcpdf pdf 输出转换为图像：

```
// from tcpdf...
$pdf_out = $pdf->Output($pdf_filename, 'S'); // returns pdf string
$imagick = new Imagick();
$imagick->setResolution($dpi,$dpi); // eg 300, 300
$imagick->readImageBlob($pdf_out);
$imagick->setImageFormat('pdf');    // for pdf use 'pdf'
$imagick->setImageCompressionQuality(60);
header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="' . $pdf_filename . '"');
echo $imagick; // put to broswer 
```

# php - 将嵌套数组编码为没有数组索引的正确 json

> ID：12047033
> 
> 赞同：3
> 
> 时间：2012-08-21T00:33:57.863
> 
> 标签：php, arrays, json

我有一个`$tasks`描述嵌套结构的示例二维数组：

```
Array
(
    [14] => Array
        (
            [Id] => 14
            [parentId] => null
            [Name] => T1
        )

    [40] => Array
        (
            [Id] => 40
            [parentId] => null
            [Name] => T5
        )

    [41] => Array
        (
            [Id] => 41
            [parentId] => null
            [Name] => T4
        )

    [22] => Array
        (
            [Id] => 22
            [parentId] => 14
            [Name] => T2
        )

    [43] => Array
        (
            [Id] => 43
            [parentId] => 22
            [Name] => T2 child
        )

    [42] => Array
        (
            [Id] => 42
            [parentId] => 14
            [Name] => T3
        )

) 
```

使用下面的代码，我将其转换为适当的树结构：

```
$sortedArray = array();
// get first level
foreach($tasks as $k => $v){
    if($v['parentId'] == 'null'){
        $sortedArray[$k] = $v;
        unset($tasks[$k]);
    }
}
// sort parents
asort($sortedArray);

function getChildren(array & $a1, array & $a2){
    foreach($a1 as $k => $v){
        findChildren($v, $a2, $k);      
    }
}

function findChildren($rec1, array & $a2, $key){

    foreach($a2 as $k => $v){
        if($rec1['parentId'] == $v['Id']){
            $a2[$k]['children'][$rec1['Id']] = $rec1;
            unset($tasks[$key]);
        } else {
            if (isset($v['children'])){
                findChildren($rec1, $a2[$k]['children'], $key);
            }
        }
    }
}

findChildren($tasks, $sortedArray); 
```

运行此代码后的输出`$sortedArray`如下所示：

```
Array
(
    [14] => Array
        (
            [Id] => 14
            [parentId] => null
            [Name] => T1
            [children] => Array
                (
                    [22] => Array
                        (
                            [Id] => 22
                            [parentId] => 14
                            [Name] => T2
                            [children] => Array
                                (
                                    [43] => Array
                                        (
                                            [Id] => 43
                                            [parentId] => 22
                                            [Name] => T2 child
                                        )

                                )

                        )

                    [42] => Array
                        (
                            [Id] => 42
                            [parentId] => 14
                            [Name] => T3
                        )

                )

        )

    [40] => Array
        (
            [Id] => 40
            [parentId] => null
            [Name] => T5
        )

    [41] => Array
        (
            [Id] => 41
            [parentId] => null
            [Name] => T4
        )

) 
```

问题是，在当前状态下对该输出数组调用 json_encode 后，我得到：

```
{"14":{"Id":"14","parentId":"null"... 
```

所以所有嵌套数组都插入了它们的索引。我知道我可以使用`array_values`. 但是有没有任何简单的方法可以为所有级别做到这一点？没有它，我最终会发现“孩子”不是一个数组，而是一个令我不满意的对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T00:51:53.533

该代码不在您的帖子中，而是`$tasks`作为关联数组创建的。`$tasks`在您的示例中，您还可以像关联数组一样遍历：

```
foreach($tasks as $k => $v){
    ...
} 
```

您需要`$tasks`像使用数字数组一样添加子项；不同之处在于：

```
//associative array
$test = array();
$test["43"] = "hello";
$test["40"] = "hello1";
$test["23"] = "hello2";
print_r($test);

//numeric array
$testb = array(); 
$testb[] = "hello";
$testb[] = "hello1";
$testb[] = "hello2";
print_r($testb); 
```

现场示例：[http ://codepad.org/tsOhX88h](http://codepad.org/tsOhX88h)

使用数字数组，您作为问题引用的顶级索引（例如，14）`{"14":{"Id":"14","parentId":"null"...`不再存在。

作为一个简单的最后一步，使用以下代码将关联数组中的项推送到新的数值数组中：

```
$finalArray = array();
foreach ($sortedArray as $key=>$val ){
    $finalArray[] = $sortedArray[$key];
}
print_r($finalArray); 
```

实时示例：[http ://codepad.org/uSGSr1DC](http://codepad.org/uSGSr1DC)

或者你可以一次性完成`array_values`：

```
$finalArray = array();
$finalArray = array_values($sortedArray);
print_r($finalArray); 
```

现场示例：[http ://codepad.org/D7uBSRr8](http://codepad.org/D7uBSRr8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-22T01:53:02.060

你没有包括你的 json_encode 调用，如果你碰巧这样做......

`json_encode(array_values($sortedArray), JSON_FORCE_OBJECT);`

那么部队无论如何都会把数字索引放进去。不确定这是否会对您有所帮助，但它可能会帮助遇到同样问题的其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:35:14.473

好的，所以我能够想出这样的东西：

```
function makeIndexed(array & $arr, array & $par = null){
    if(is_null($par)){
        $arr = array_values($arr);
    } else {
        $par['children'] = array_values($arr);
    }

    for($i=0; $i<count($arr); $i++) {   
        $temp = @$arr[$i]['children'];
        if(isset($temp)) {
            makeIndexed($arr[$i]['children'], $arr[$i]);
        }       
    }
} 
```

现在调用`makeIndexed($sortedArray);`给了我一个有效的 JSON，其中“孩子”是一个节点数组，而不是一个对象。我知道这段代码可能很丑陋并且缺乏性能，但至少会产生正确的结果。如果有人可以创造出更简洁/更短的东西，我很乐意将其标记为正确答案。

# java - 正则表达式 - 为什么这允许空格？

> ID：12047045
> 
> 赞同：0
> 
> 时间：2012-08-21T00:35:33.550
> 
> 标签：java, regex

只是一个简单的问题，我正在编写一个正则表达式，只允许字母（所以只是一个单词），下面的正则表达式允许空格，虽然我没有包含它们，为什么要包含它们？

```
([a-zA-Z])+ 
```

我不得不把它改成这个（从Java粘贴）：

```
([a-zA-Z]&&[^\\s])+ 
```

为了提供上下文 - 我已经尝试过这个并输入带有空格的单词，它仍然打印为 true：

```
public static void main(String[] args) {

        Scanner in = new Scanner(System.in);
        System.out.print("Enter: ");
        String s = in.next();

        if (s.matches("[a-zA-Z]+")) {
            System.out.println("TRUE");
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:44:59.520

这将始终打印 TRUE 为

```
String s = in.next(); 
```

使用用户输入的第一个令牌（由 Scanner 用空格分隔）。

更好地使用：

```
String s = in.nextLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:45:13.717

Scanner 很可能会将您的输入拆分为空格，因此您匹配的是部分字符串。您可以通过打印 的值来确认这一点`s`。正如其他人所提到的，您很可能需要该`Scanner.nextLine()`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T00:46:23.143

该`Scanner` `.next()`方法将获取下一个令牌，默认情况下将按空格分割。改为使用`.nextLine()`。

# php - 允许表单中的字段接受多个值

> ID：12047048
> 
> 赞同：0
> 
> 时间：2012-08-21T00:35:47.037
> 
> 标签：php, sql

我有一个具有多对多关系的数据库。其中三个表是：

-播放器

-PlayerPreviousClubs ***（查找表）***

-以前的俱乐部

然后我有一个表格。以下是摘录：

```
<form action="?<?php htmlout($action); ?>" method="post">

<div>
<label for="previousclubs">Previous Clubs: <input type="text" name="previousclubs"
id="previousclubs" value="<?php htmlout($previousclubs); ?>"></label>
</div>

</form> 
```

我不知道每个个人资料会创建多少个以前的俱乐部。范围从 0 到 x。

我可以为以前的俱乐部条目设置 5 个单独的字段，但这有点混乱。可能太多，也可能不够，这不是一个“干净”的解决方案。

如何在我的表单中满足此功能？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:44:04.390

输入每个先前的俱乐部并用逗号或分号分隔，然后在您提交使用时

```
$previousclubsArray = explode(','$_POST['previousclubs']);// if you used comma to seperate the items 
```

所以你有每个以前的俱乐部记录作为 $previousclubArray 的元素，你可以保存在适当的表中。

# servlet-3.0 - Servlet 3.0，将 WebServlet 注释的扫描限制到给定的包

> ID：12047050
> 
> 赞同：3
> 
> 时间：2012-08-21T00:36:17.730
> 
> 标签：servlet-3.0

使用 Servlet 3.0， [http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html)

我们可以定义一个带有 WebServlet 注解的类：

```
package com.example;

import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;

@WebServlet({"/hello"})
public class HelloServlet extends HttpServlet {
  @Override
  protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    response.getWriter().println("hello world");
  }
} 
```

并定义一个 web.xml 文件而不映射 servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
</web-app> 
```

[因此，对http://test.com/hello](http://test.com/hello)的请求将正确打印“hello world”。

这是可行的，因为 Servlet 3.0 会扫描所有类以查找 WebServlet 注释。

有没有办法将此扫描限制在给定包中的类（例如，com.example.*）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:30:57.237

这取决于您的 Web 容器。例如，在 Tomcat 中，您可以在 catalina.properties 中使用以下设置（我从 catalina.properties 复制了注释）：

```
# List of JAR files that should not be scanned using the JarScanner
# functionality. This is typically used to scan JARs for configuration
# information. JARs that do not contain such information may be excluded from
# the scan to speed up the scanning process. This is the default list. JARs on
# this list are excluded from all scans. Scan specific lists (to exclude JARs
# from individual scans) follow this. The list must be a comma separated list of
# JAR file names.
# The JARs listed below include:
# - Tomcat Bootstrap JARs
# - Tomcat API JARs
# - Catalina JARs
# - Jasper JARs
# - Tomcat JARs
# - Common non-Tomcat JARs
tomcat.util.scan.DefaultJarScanner.jarsToSkip=\
bootstrap.jar,commons-daemon.jar,tomcat-juli.jar,\
annotations-api.jar,el-api.jar,jsp-api.jar,servlet-api.jar

# Additional JARs (over and above the default JARs listed above) to skip when
# scanning for Servlet 3.0 pluggability features. These features include web
# fragments, annotations, SCIs and classes that match @HandlesTypes. The list
# must be a comma separated list of JAR file names.
org.apache.catalina.startup.ContextConfig.jarsToSkip=

# Additional JARs (over and above the default JARs listed above) to skip when
# scanning for TLDs. The list must be a comma separated list of JAR file names.
org.apache.catalina.startup.TldConfig.jarsToSkip= 
```

# python - raw_input 中的命令 def 函数？

> ID：12047051
> 
> 赞同：0
> 
> 时间：2012-08-21T00:36:19.317
> 
> 标签：python, csv

我有一个 def 函数，如下所示：

```
def update(marks, num, mark, column):
    lines = [l for l in marks]
    for row in range(len(all_marks)):
        if all_marks[row][0] == num:
            lines[row][column] = mark
        elif lines[row][column] != '':
            print num + ' already has a value in column - update ignored.' 
```

另一个 def 函数中的 raw_input 函数如下所示：

```
result1 = raw_input('Enter results file: ')
num = raw_input('Student number (empty to finish): ')

if len(snumber) == 0:
    print
    print
    print 'finished'
    print
    print
    return interact()

 else:
    pass

 column2 = raw_input('Enter column: ')
 newresult1 = raw_input('New result: ')

 try:
     print update(result1, snumber, newresult1, column2)

 except IOError:
    print 'Try again' 
```

从底部算起的第三行应该打印 def update(marks, num, mark, column) 但它一直没有返回。

抱歉，代码有点乱。谁能让我知道我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:42:16.970

您的`update`函数看起来没有返回任何内容。您需要显式返回某些内容，否则将没有返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:41:59.193

`raw_input()`提示用户并将用户的响应作为*字符串*返回。您可能希望将字符串转换为整数。

此代码将唠叨用户，直到给出正确的响应：

```
while True:
  try:
    column2 = int(raw_input('Enter column: '))
    break
  except ValueError:
    print 'You did not supply an integer!' 
```

# sql - 将嵌套的“select in”语句转换为 LINQ lambda

> ID：12047053
> 
> 赞同：0
> 
> 时间：2012-08-21T00:36:22.220
> 
> 标签：sql, linq, select, lambda, nested

我正在使用 vs2010 并有一个如下所示的 sql 语句

```
select deptId, deptName, Detail from lkDept where deptId in (select deptId from lkDeptLinks where userRef in (select ref from lkUsers where userId = @userId)) order by deptName 
```

我需要将上述转换为 linq 语句，lambda 会很好

所有表都在 dbml

这是我到目前为止的烂摊子，显然它不会起作用

```
var queryUsers = dc.lkUsers.Where(p => p.UserID == userId);
var queryLinks = dc.lkDeptLinks.Where(p => queryUsers.ref.contains(p.ref));
var queryDept = dc.lkDepts.Where(p => queryLinks.deptid.contains(p.deptid)); 
```

任何帮助将不胜感激，并在此先感谢

* * *

好的，谢谢大家的帮助，我最终得到了这样的东西

```
 using (var dc = new myDataContext(DB.GetConnectionString()))
  {
      var queryUsers = dc.lkUsers.Where(p => p.UserID == userId).Select(p => p.@ref); 
      var queryLinks = dc.lkDeptLinks.Where(p => queryUsers.Any(x => p.UserRef  == x )).Select(p => p.DeptId);
      var queryDept = dc.lkDepts.Where(p => queryLinks.Any(x => p.DeptID == x)).OrderBy(p => p.deptName).Select(p => new SLDepartment(p));

      if (queryDept.Any())
        return new SLDepartments(queryDept);

  } 
```

注意构造函数 SlDepartment(lkDept dept) 和 SlDepartments(IEnumerable collection) 这是使用 LINQ 的合适方式吗？

我可能遗漏的任何问题，即上述或整个解决方案的异常或性能问题的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:51:32.410

您的尝试似乎是正确的，但应该更改 contains -> Any 并且也不完整：

```
var queryUsers = dc.lkUsers.Where(p => p.UserID == userId);
var queryLinks = dc.lkDeptLinks.Where(p => queryUsers.ref.Any(x=>x== p));
var queryDept = dc.lkDepts.Where(p => queryLinks.deptid.Any(x=> x == p.deptid));
return  queryDept
        .Select(x=>new {ID = x.deptId, Name = x.deptName, Detail = x.Detail})
        .ToList(); 
```

# jquery - 扩展 jQuery UI 小部件时，如何扩展多个功能？

> ID：12047057
> 
> 赞同：2
> 
> 时间：2012-08-21T00:37:06.357
> 
> 标签：jquery, jquery-ui, autocomplete

我目前正在扩展 jQuery UI 小部件，如下所示：

```
$.widget( "custom.autocompleteCategorized", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var self = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            self._renderItem( ul, item );
        });
    }    
}); 
```

这很好用，但我现在想扩展另一个函数，如下所示：

```
$.widget( "custom.autocompleteCategorized", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var self = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            self._renderItem( ul, item );
        });
    }

    _response: function(contents){
        $.ui.autocomplete.prototype._response.apply(this, arguments);
        $(this.element).trigger("autocompletesearchcomplete", [contents]);
    }

}); 
```

不幸的是，这个错误，如上所示扩展多个功能的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:42:24.140

我认为缺少逗号

```
$.widget( "custom.autocompleteCategorized", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var self = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            self._renderItem( ul, item );
        });

    }, // <--- you're missing this comma

    _response: function(contents){
        $.ui.autocomplete.prototype._response.apply(this, arguments);
        $(this.element).trigger("autocompletesearchcomplete", [contents]);
    }

}); 
```

# jquery - 如何在 jQuery Mobile 中制作可折叠的控件组

> ID：12047058
> 
> 赞同：1
> 
> 时间：2012-08-21T00:37:06.613
> 
> 标签：jquery, jquery-mobile

我需要制作一个可折叠的集合，其中每个面板都包含一个复选框控件组（非插入）。

任何想法如何在没有脏 CSS hack 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:35:24.930

抱歉刚刚注意到非插入部分！这不是一些`*margin`ie7 hacking！但是要使它们全部为 100% 宽度等，您需要违背它们在创建元素后提供的原始填充/边距。为可折叠区域及其下方复选框的字段集设置这些规则，您将全部设置好。

[**jsFiddle 演示**](http://jsfiddle.net/eFHNU/1/)

```
.ui-collapsible-contain {
    margin : 8px -15px;
}

.ui-collapsible-contain fieldset { 
    margin: 0 -15px 0;
}
.ui-collapsible-heading a span.ui-btn { 
    margin-left:6px;
}
.ui-collapsible-heading a .ui-btn-inner {
    padding-left: 46px;
}
​ 
```

# java - 如何使用 DataNucleus 查询/保留 joda-time DateTime 字段

> ID：12047061
> 
> 赞同：1
> 
> 时间：2012-08-21T00:37:44.240
> 
> 标签：java, jpa, jodatime, datanucleus

我最近切换到 DataNucleus 并注意到在实体中声明的 joda-time DateTime 字段没有被持久化。我收到以下错误：

```
Field 'time' is not marked as persistent so cannot be queried. 
```

从文档中不清楚我是否需​​要对该字段进行注释或做其他事情来将其标记为持久性。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:04:41.490

[DN 文档](http://www.datanucleus.org/products/accessplatform_3_1/jpa/types.html)说 JPA 规范中未指定的类型（例如 org.joda.*）默认情况下不是持久的。所以用@Basic 之类的注释它们，它们应该被选中。如有疑问，请参阅我们的[测试](http://datanucleus.svn.sourceforge.net/viewvc/datanucleus/test/accessplatform/trunk/test.jpa.general/src/test/org/datanucleus/tests/types/JodaTimeTest.java?revision=15445&view=markup)和[样品](http://datanucleus.svn.sourceforge.net/viewvc/datanucleus/test/accessplatform/trunk/test.jpa.general/src/java/org/datanucleus/samples/types/jodatime/)

# python - Django - 获取存储在外键中的对象

> ID：12047064
> 
> 赞同：1
> 
> 时间：2012-08-21T00:37:51.983
> 
> 标签：python, django, model, foreign-keys, foreign-key-relationship

> **可能重复：**
> [在运行时确定的带有 upload_to 的 Django FileField](https://stackoverflow.com/questions/1190697/django-filefield-with-upload-to-determined-at-runtime)

我正在创建一个允许用户在线存储文件的 Web 应用程序，例如 Dropbox。用户的文件由模型 Item 建模：

```
from django.db import models
from django.contrib.auth.models import User

class Item(models.Model):
    # Name of file
    name = models.CharField(max_length=200)

    # Site user who owns the file
    user = models.ForeignKey(User)

    # Path to file in database
    # Python complains here since "username" is an attribute of the User class, not
    # an attribute of ForeignKey.
    file = models.FileField(upload_to=(user.username + '/' + name)) 
```

现在，如果您查看 FileField 的 upload_to 参数，我想指定文件在我的数据库中的存储位置。如果我有一个带有文件“myfile”的用户“bill”，他的文件应该在路径“bill/myfile”下。

为了得到这个字符串，我尝试了“user.username + '/' + name”，但是python抱怨用户没有属性用户名，因为用户不是用户对象：它是一个存储用户的外键。所以问题是，如何在代码中从 ForeignKey 获取用户对象？

现在关于 Django 的数据库 API 不起作用，因为在我可以使用 API 之前必须将对象保存到数据库中。情况并非如此，因为我在构建 Item 对象期间需要数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:56:31.700

使用 FileField 您可以将 [function on upload_to][1]

[https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T04:09:41.933

无论哪种方式，您的方法都有缺陷，因为您传入的任何内容`upload_to`都将被调用*一次*。即使`user.username`有效，您也必须记住它仅在定义类时计算。

您需要定义一个自定义`upload_to`函数以传递给该字段。

```
def custom_upload_to(instance, filename):
     return '{instance.user.username}/'.format(instance=instance)

myfield = models.FileField(upload_to=custom_upload_to) 
```

# wordpress - WordPress if the_title == null { 隐藏

> ID：12047066
> 
> 赞同：0
> 
> 时间：2012-08-21T00:38:24.737
> 
> 标签：wordpress

如果标题留空，我试图隐藏 WordPress 的`the_title`h2 标签，否则将显示标题或正常顺序。这是对此进行编码的第一次尝试：

```
<?php if '' == the_title() {'test'}

    else {

        '<h2><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>'
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T15:19:31.533

除了[我的评论之外](https://stackoverflow.com/questions/12047066/wordpress-if-the-title-null-hide-h2-h2-else-display-regular-formattin#comment32385108_12047106)，我认为这需要一个完整的代码片段作为示例，因为在原始代码和 OP 关于如何开始/结束 if 语句和 PHP 代码块的评论中存在一些混淆。

这应该有效：

```
<?php
    if (get_the_title()) {
?>
        <h2><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>
<?php
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:44:38.227

我只会测试标题，只有在它存在时才写一些东西。所以：

```
<?php if (the_title()){ // do some stuff with php and the_title() }; ?> 
```

# perl - cd 和函数 chdir 的区别

> ID：12047070
> 
> 赞同：10
> 
> 时间：2012-08-21T00:38:41.923
> 
> 标签：perl, cd, chdir

`cd`shell 命令和 Perl 函数有什么区别`chdir`？请你举个例子解释一下吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T00:48:15.777

该`cd`命令改变一个shell进程的当前目录；Perl`chdir`函数更改 Perl 进程的当前目录。它们完全一样，只是拼写不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-01T10:17:01.823

本质上它们都做同样的事情，但`chdir`它是一个 POSIX 系统调用，而`cd`它是一个程序中使用的普通函数，在这种情况下是 shell。

在实践中，由于程序没有内核权限来自行更改目录，`chdir`因此调用它来更改目录。`cd`

# css - 链接和格式，HTTP 有什么不同？

> ID：12047071
> 
> 赞同：0
> 
> 时间：2012-08-21T00:38:51.957
> 
> 标签：css, html, hyperlink, anchor, href

所以这就是我希望所有链接出现在页面上的方式：

```
a:link, a:visited {
    text-decoration: none;
    color: blue;
    font-weight: bold;
}

a:hover, a:active {
    text-decoration: underline;
    color: blue;
} 
```

除了 DIV 中的垂直导航菜单，其链接为白色和绿色背景（悬停时为蓝色）。注意：此 navMenu 仅链接到我网站上的其他页面（“home.html”、“contact.html”等）并使用相对路径（即 - 仅文件名）。

```
#navMenu {
    width: 105px;
    float: left;
    background-color: green;
    margin: 0px;
    padding: 0px;
}

#navMenu > ul {
    list-style-type: none;
    margin: 0px;
    padding: 0px;
    overflow: hidden;
}

#navMenu > ul li {
    display: inline;
    float: left;
    font-size: small;
}

#navMenu > ul li a:link, a:visited {
  display: block;
  width: 130px;
  font-weight: bold;
  color: white;
  background-color: #999900;
  text-align: left;
  padding: 4px;
  text-decoration: none;
  text-transform: uppercase;
}

#navMenu > ul li a:hover, a:active {
    background-color: blue;
} 
```

因此，当我查看 navMenu DIV 之外的页面中的链接时，它们中的大多数都是外部的（到另一个站点）并且看起来像这样：

```
<a href="http://somewhere.com">Link</a> 
```

并且正在使用蓝色，例如由默认的“a”选择器定义。

但是（得到这个） - 任何链接（即使它在 navMenu DIV 之外）指向网站上具有相对路径的另一个页面：

```
<a href="page2.html">Page 2</a> 
```

正在使用 navManu 格式处理（因此文本为白色）。

但是得到这个 - 如果我在 navMenu DIV 之外获取任何这些链接（到内部页面）并且只是将“http://”添加到 HREF，它会从“a”选择器中获取并且链接变为蓝色。

什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T00:48:57.230

那是因为您已经访问了该链接。您的 CSS 表示已访问的*任何链接都应显示为白色。*第一个声明它应该是蓝色的声明被覆盖了，我认为这是你的问题。尝试将最后两个声明更改为以下内容：

```
#navMenu > ul li a:link, #navMenu > ul li a:visited {
  display: block;
  width: 130px;
  font-weight: bold;
  color: white;
  background-color: #999900;
  text-align: left;
  padding: 4px;
  text-decoration: none;
  text-transform: uppercase;
}

#navMenu > ul li a:hover, #navMenu > ul li a:active {
  background-color: blue;
} 
```

注意选择器的特殊性。

# perl - perl oneliners 和 shell 脚本的参数值

> ID：12047073
> 
> 赞同：0
> 
> 时间：2012-08-21T00:39:12.823
> 
> 标签：perl, shell, command-line-arguments

我有一个带有几个 Perl 脚本和几个 Perl oneliners 的 shell 脚本。shell 脚本中很少有 Perl 脚本在开始时有我使用过的单行符`system`。这些脚本和 oneliners 必须接受一个共同的输入。那么有没有办法在shell脚本的命令行中给出参数值？？？

```
#!/bin/sh
perl test.pl
perl -ne 'print if/XXXX/ig../ZZZZZ/ig' abc.l > def.l
perl trial.pl
perl qwerty.pl 
```

例如，如果`abc.l`oneliner 中使用的文件是 and 的公共输入`test.pl`，`trial.pl`我可以使用参数值，以便我可以在命令行中将其提供给 shell 脚本中所需的代码使用吗？？？？

我曾尝试为 Perl oneliner 分配参数，但输入未被接受。

我的`test.pl`代码如下

```
system( q( perl -ne '/^.QQQ/ig && print' abc.l > data1.l) );
system( q( perl -ne '/.SSS/ig && print' data1.l > data2.l) );
open(fh,"<data3.l");
open(fh1,">>data31.l");

while (my $string =<fh>)
{
...
..
.. 
```

我的 test.pl 也采用相同的输入`abc.l`。

谁可以帮我这个事？

1.  如何在 Perl oneliners 中使用 ARGV ？？？
2.  如何在运行 shell 脚本时在命令行中提供输入？？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:04:17.627

Perl 使用`@ARGV`包含每个 shell 参数值的数组：

```
$ perl -e 'print join (":", @ARGV) . "\n" ;' this is a test
this:is:a:test 
```

如您所见，命令行上的所有参数都是在`@ARGV`.

```
$ perl -e 'print "$ARGV[2]\n" ;' one two three four
three 
```

这打印出第三个参数（因为`@ARGV`计数从 开始`0`）。

这回答了你的问题了吗？

* * *

### 附录

> 编辑：我的 test.pl 代码如下

```
system( q( perl -ne '/^.QQQ/ig && print' abc.l > data1.l) );
system( q( perl -ne '/.SSS/ig && print' data1.l > data2.l) );
open(fh,"<data3.l");
open(fh1,">>data31.l");

while (my $string =<fh>) {
... 
```

为什么不简单地省略这些`system`语句，并且只处理一次您的数据：

```
use strict;
use warnings;
use autodie;

open my $input_file, "<", "abc.1";
open my $output_file ">>", "data31.l"
while ( my $string = <$input_file> ) {
    chomp $string;

    # These skip over the lines you don't want
    # No need to "prep" your input first

    next unless $string =~ /^.QQQ/i;
    next unless $string =~ /.SSS/ig;
    # Here be dragons
    say $ouput_file "$something";
}
close $input_file;
close $output_file; 
```

这更容易理解。您不再依赖于`system`命令，您不会创建一堆临时文件，而且效率更高，因为您只遍历每一行一次。

* * *

附录二

> 这是个好主意，但我有很多这样的单行器，我不确定我的代码在将单行器转换为代码后是否可以工作。那么他们有没有机会按照我问的方式做到这一点？？？？？？

如果我对您的理解正确，您想要一种使用那些标准*内联*程序的方法，您显然在脚本中剪切和粘贴，然后以某种方式将第四个参数传递到您的主 Perl 程序中。

答案是*否定*的。*system*命令生成一个 shell 以在分叉的进程中运行该命令。父进程无法访问该分叉进程中的任何 Perl 变量。您可以在内*联*程序中使用 Perl 变量，这些变量可以在主程序中设置。

```
my $file1 = "data1.1";
my $file2 = "data2.1"
system qq( perl -ne '/^.QQQ/ig && print' abc.l > $file1 );
system qq( perl -ne '/.SSS/ig && print' $file1 >$file2; ); 
```

但是，如果这是您经常做的事情，那么我强烈建议您创建自己的包：

```
use local::fix_files qw(fix_QQQ fix_SSS);

fix_QQQ ( "abc.1", "data1.1" );
fix_SSS ( "data1.1", "data2.1 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:07:51.653

shell 脚本的参数是 $1、$2 等。您可以按原样使用它们或将它们分配给变量，如下所示：

```
FILE=$1
perl trial.pl $FILE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:27:37.390

我相信您正在寻找`$@`传递参数：

## 设置：

### run_me

```
#!/bin/sh
perl test.pl $@
perl test2.pl $@ 
```

* * *

### 测试.pl

```
#!/usr/bin/perl
print "test.pl: @ARGV\n\n"; 
```

* * *

### 测试2.pl

```
#!/usr/bin/perl
print "test2.pl: @ARGV\n\n"; 
```

* * *

## 示例运行：

```
%> ./run_me foo bar foobar
test.pl: foo bar foobar

test2.pl: foo bar foobar 
```

* * *

# 编辑/更新

> 例如，如果 oneliner 中使用的文件“abc.l”是 test.pl 和 trial.pl 的公共输入，我可以使用一个参数值，以便我可以在命令行中提供它以供所需shell脚本中的代码？？？

我想你不明白上面发生了什么。“run_me”是您的 shell 脚本，我们将三个值（“foo”、“bar”、“foobar”）传递给它。然后我们将这些值传递给 perl 脚本，使用`$@`. 如果您想指定要传递的参数，而不是将所有值传递给 perl 脚本，您可以使用`$n`，其中`n`是一个整数。因此，要将“bar”传递给您将使用的 perl 脚本`$2`。

鉴于你的例子：

```
#!/bin/sh
perl test.pl $1
perl -ne 'print if/XXXX/ig../ZZZZZ/ig' $1 > def.l
perl trial.pl
perl qwerty.pl 
```

调用你的脚本：`./shell_script abc.1`
`abc.1`应该传递给 test.pl 和你*的单行*

# erlang - Erlang：对数组进行排序

> ID：12047074
> 
> 赞同：3
> 
> 时间：2012-08-21T00:39:36.417
> 
> 标签：erlang

我是函数式编程语言的新手，我不明白为什么在 Erlang 中，如果我采用 BubbleSort、QuickSort 或任何其他排序算法并尝试排序 [8]，它将返回“\b”。或者 [12,10,11] 将返回 "\n\v\f"。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T00:57:40.640

这是因为它们的含义相同：ASCII 中的 8 是“\b”。见“清单！” 部分[在这里](http://learnyousomeerlang.com/starting-out-for-real)。

> 仅当其中至少一个不能代表字母时，Erlang 才会将数字列表打印为数字！

因此，erlang shell 试图通过对您想看到的内容做出最好的猜测来帮助您。有时，当您打算查看可能令人困惑的整数列表时，您会得到一个字符串。下面说明了这一点：

```
1> [104, 101, 108, 108, 111].
"hello"
2> [104, 101, 108, 108, 111, -1].
[104,101,108,108,111,-1]
3> [104, 101, 108, 108, 111] =:= "hello".
true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T00:54:30.907

这是因为 Erlang 将字符串表示为数字列表。当打印这样一个列表时，Erlang 输出函数将查看您的列表是否包含所有对应于 ASCII 字符值的数字。如果是这样，那么它将您的列表打印为字符串。

听起来您的代码工作正常。尝试使用现有代码进行排序`[12345, 29348, 978]`，看看会发生什么。

有关这方面的信息，请参阅[参考手册第 2.11 节字符串](http://www.erlang.org/doc/reference_manual/data_types.html#id73373)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T11:17:56.060

主要原因是因为 Erlang 基本上将这些作为正在打印的字符的相应 ASCII 值。我想发布一段以erlang排序的代码：

```
 -module(solution).
    -import(lists,[delete/2,max/1]).
    -compile(export_all).
    selection_sort([],Sort)-> Sort;
    selection_sort(Ar,Sort)->
        M=max(Ar),
        Ad=delete(M,Ar),
        selection_sort(Ad,[M|Sort]).
    print_array([])->ok;
    print_array([H|T])->
        io:format("~p~n",[H]),
        print_array(T). 

   main()->
        Ans=selection_sort([1,5,7,8,4,10],[]),
        print_array(Ans). 
```

希望以上代码可以解决您的问题

# c# - 这种将字符串拆分为数组的扩展方法还能如何参数化？

> ID：12047075
> 
> 赞同：1
> 
> 时间：2012-08-21T00:39:41.860
> 
> 标签：c#, extension-methods

这是我编写的将逗号列表转换为 T 数组的片段：

```
public static T[] ToArray<T>(this string s, params char[] seps)
{
    if (typeof(T) == typeof(int))
    {
        return s.Split(seps.Length > 0 ? seps : new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
                    .Select(id => int.Parse(id))
                    .Cast<T>()
                    .ToArray();
    }
    else throw new Exception("cannot convert to " + typeof(T).Name);
} 
```

我需要为我想要支持的每种类型设置一个案例。

有没有更好的方法来编码这种东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T00:44:30.370

你总是可以做这样的事情：

```
public static T[] ToArray<T>(this string s, Func<string, T> converter, params char[] seps)
{
    return s.Split(seps.Length > 0 ? seps : new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
            .Select(converter)
            .ToArray();
} 
```

你可以这样称呼：

```
"1,2,3".ToArray(int.Parse, ',', ';'); 
```

我同意 .Parse 有点难看，但它为您提供了您想要的任何数据类型的灵活性......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T00:45:45.080

如果你限制`T`到`IConvertible`，你可以使用[ToType](http://msdn.microsoft.com/en-us/library/system.iconvertible.totype.aspx)：

```
public static T[] ToArray<T>(this string s, params char[] seps)
   where T : IConvertible
{
    Type targetType = typeof(T);
    return s.Split(seps.Length > 0 ? seps : new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
                    .Cast<IConvertible>()
                    .Select(ic => ic.ToType(targetType, CultureInfo.InvariantCulture))
                    .Cast<T>()
                    .ToArray();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T00:52:13.597

你可以试试：

```
public static T[] ToArray<T>(this string s, Func<string, T> convert, char[] seps)
{
  char[] separators = seps != null && seps.Length > 0 ? seps : new[] { ',' };
  T[]    values     = s.Split(separators, StringSplitOptions.RemoveEmptyEntries)
                       .Select(x => convert(x))
                       .ToArray()
                       ;
  return values;
} 
```

只需传入一个委托来进行转换：

```
int[] Xs = "1,2,3".ToArray<int>(int.Parse , ',' , '-' , '/' , '|'); 
```

# php - NetBeans 自定义脚本

> ID：12047080
> 
> 赞同：2
> 
> 时间：2012-08-21T00:41:15.667
> 
> 标签：php, netbeans, phpunit

我想在 NetBeans 项目导航器中选择多个文件之一并执行单个 shell 脚本，因此如果我选择它`MyClass.php`，`MyOtherClass.php`它将运行类似的脚本（并在控制台中显示输出）：

```
myscript.sh /project/path/MyClass.php /project/path/MyOtherClass.php 
```

这可能吗？我试过搜索谷歌，但 NetBeans 中似乎没有任何功能。这是因为 NetBeans 中对 PHPUnit 的支持很糟糕，即使我让 NetBeans 创建 PHPUnit 文件，我也无法让它找到测试文件。

# architecture - 有没有更好的方法来使用具有第三方库对象作为方法参数的通用 DAO 的依赖注入

> ID：12047081
> 
> 赞同：0
> 
> 时间：2012-08-21T00:41:36.043
> 
> 标签：architecture, dependency-injection, inversion-of-control, dao

我认为这是我第一次无法仅通过搜索找到问题的答案。

我正在为我们公司系统的改造做一些原型，但我遇到了一个我似乎无法理解的问题。

我正在尝试使用合理通用的 DAO 耦合依赖注入。我遇到的问题是我想在接口的方法中使用第三方库进行查询定义。

一个例子

```
public interface TestDAO<TEntity>
{
    /// <summary>
    /// get ALL the things
    /// </summary>
    /// <returns></returns>
    IEnumerable<TEntity> GetAll();

    /// <summary>
    /// Runs a supplied "where" clause and returns ALL the matched results
    /// </summary>
    IEnumerable<TEntity> FindAll(Specification<TEntity> specification);
} 
```

在这种情况下，规范是来自名为 LinqSpecs 的第三方库的对象。

据我了解，通过这样做，我实质上是在强制依赖第三方库来实现接口的任何实现。

我知道我可以放弃使用该库，但如果可能的话，我想保留它，至少在我们评估它的有用性之前。

我的问题是，有没有一种方法可以做到这一点（或类似的事情）而不用拖第三方依赖。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:27:27.530

你可以添加扩展方法，如果有人要使用`Specification`，他会`LinqSpec`额外获得依赖

```
namespace Dao
{
    public interface TestDAO<TEntity>
    {
        /// <summary>
        /// get ALL the things
        /// </summary>
        /// <returns></returns>
        IEnumerable<TEntity> GetAll();
    }

namespace DaoExtensions
{
    public static class TestDAOExtensions
    {
        /// <summary>
        /// Runs a supplied "where" clause and returns ALL the matched results
        /// </summary>
        publicc static IEnumerable<TEntity> FindAll(this TestDAO<TEntity> dao, 
                                                    Specification<TEntity> specification);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T05:05:07.043

您实际上希望为您的界面 TestDAO 提供一个可以隐藏在您自己的界面后面的搜索过滤器

```
 public interface TestDAO<TEntity>
    {
        IEnumerable<TEntity> FindAll(ISearchFilter<TEntity> specification);
    }

    public interface ISearchFilter<TEntity>
    {
    } 
```

searchfilter 实现包含实际数据

```
 public class LinqSpecsSearchFilter : ISearchFilter<TEntity>
    {
        Specification<TEntity> specification;
    } 
```

这种方法的缺点是您的 TestDAO 实现必须进行一些丑陋的转换才能获得 LinqSpecs.Specification

# html - 删除滚动条但仍有可控内容

> ID：12047083
> 
> 赞同：1
> 
> 时间：2012-08-21T00:41:42.813
> 
> 标签：html, css

好的，所以我希望左侧 div 具有可滚动的内容，我尝试了溢出：隐藏和自动，但它们并没有完全做到这一点。仍然有一个滚动条显示。

这是带有 HTML 和 CSS 的 JSFiddle：http: [//jsfiddle.net/yukimura/Sgq4j/](http://jsfiddle.net/yukimura/Sgq4j/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:08:24.973

你的意思是只有垂直滚动的内容，同时避免水平滚动条？

```
 #pageleft {overflow-x:hidden;overflow-y: auto;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:14:31.427

对于 webkit 浏览器，您可以执行以下操作：

```
::-webkit-scrollbar {
    display:none;
} 
```

这将完全隐藏基于 webkit 的 Chrome/Safari/Anything 中的滚动条。

我当然意识到这不是一个可移植的答案，但它会给你一种尝试和匹配的效果。

另一件事当然是捕获滚轮的鼠标事件并使用javascript自己移动div。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:50:02.563

您可以将其包装在第二个 div 中，该 div 比滚动条的大小更窄，并将该 div 的溢出设置为隐藏。

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

</head>

<body>

<div id="wrapper">
<div id="scrollWrap">            
     <div id="pageleft">
          <div id="leftheader"></div>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>
          <a href="javascript:;">
              <img src="http://i.imgur.com/4rwe1s.jpg" width="46" height="46" alt="*" style="margin:10px 10px;"/>
          </a>

     </div>
    </div>
</div>

</body>
</html>
​ 
```

**CSS**

```
#wrapper { width:980px;margin:0px auto; }
#scrollWrap { width:220px; height:500px; overflow:hidden; }
#pageleft { float:left;margin:10px 10px;width:228px;height:500px;border:1px solid #313131;overflow:scroll; }

#pageleft > #leftheader { width:228px;height:48px;background-image:url(http://i48.tinypic.com/2ecnjx2.png);border-bottom:1px solid #313131;display:block;position:absolute; }

#pageleft a { width:220px;height:66px;display:block;border-bottom:1px solid #313131;transition: all 400ms linear; }

#pageleft a:hover { background-color:#5ca0d1; }​ 
```

[http://jsfiddle.net/Sgq4j/3/](http://jsfiddle.net/Sgq4j/3/)

参考了这个解决方案：[删除 HTML 滚动条但允许鼠标滚轮滚动](https://stackoverflow.com/questions/3253199/remove-html-scrollbars-but-allow-mousewheel-scrolling)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-15T16:23:34.547

```
::-webkit-scrollbar{ 

    display: none;
}

::-moz-scrollbar{ 

    display: none;
}

::scrollbar{ 

    display: none;
} 
```

这里是 webkit，moz 和 normal

# linux - 如何从目录中删除除少数文件之外的所有文件？

> ID：12047086
> 
> 赞同：2
> 
> 时间：2012-08-21T00:41:48.123
> 
> 标签：linux, shell, delete-file, rm

我有一个类似的目录结构：

```
/var/www/html/pictures/media0/01/test_01.jpg
/var/www/html/pictures/media0/01/test_02.jpg
/var/www/html/pictures/media0/01/test_03.jpg
/var/www/html/pictures/media0/01/test_04.jpg
/var/www/html/pictures/media0/01/test_05.jpg 
```

我想从`01`except中删除所有文件，`test_03.jpg`并`test_05.jpg`使用 linux 命令，也许`rm`？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T00:48:46.043

最简单的方法是将要保留的文件移动到其他位置，然后删除其余文件并将它们移回。

如果这是一个脚本并且你需要一些更高级的东西，我可以用它来写一些东西`find`。让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:51:12.060

你可以使用这个：

```
rm !(path_to_file/test_0{3,5}.jpg) 
```

这将排除除**test_03.jpg**和**test_05.jpg之外的所有文件**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:07:08.043

```
shopt -s extglob
echo !(/var/www/html/pictures/media0/test_0[3,5].jpg) 
```

如果输出是您要删除的文件，请将“echo”替换为“rm”并再次运行。

# bash - svn 无法识别符号链接

> ID：12047089
> 
> 赞同：1
> 
> 时间：2012-08-21T00:42:03.593
> 
> 标签：bash, svn, symlink

我的开发服务器将我的项目托管在`/path/to/project/version_number`，路径`/path/to/project/Live`符号链接到最新版本号。

在工作目录中，`svn update .`按预期工作，但`svn update /path/to/project/Live`结果是

```
Skipped '/path/to/project/Live' 
```

这是 CentOS 6.2 机器上的 subversion v1.6.11 (r934486)。

这是预期的行为吗？我认为这可能与带有符号链接的 bash 行为有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:19:25.383

您使用的是什么操作系统？实际的命令和输出是什么？您如何访问您的存储库？你是在用`http://`，`svn://`还是只是`file://`？

很少有版本控制系统处理符号链接。在为各种操作系统制作的系统上尤其如此，因为并非所有操作系统都以完全相同的方式处理链接或符号链接。事实上，有些甚至没有符号链接的概念。

Subversion 不*遵循*符号链接。事实上，它真的不存储符号链接。在 Subversion 数据库中，它们被标记为属性`svn:special`，并且可能与数据一起存储以重建它们。由客户来创建和处理它们。

我的建议是不要在版本控制系统中使用符号链接。创建这样的生物应该是部署或构建脚本的一部分。这样，您可以更好地控制它们。您可以检查操作系统，确保它可以在创建这些类型的链接之前处理它们，然后以操作系统可以处理它们的方式创建它们。

# javascript - 不同文档类型中的相对维度

> ID：12047092
> 
> 赞同：1
> 
> 时间：2012-08-21T00:42:21.050
> 
> 标签：javascript, html, css

我在搞乱布局，从来没有在我的文件中添加过文档类型。添加文档类型后：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

我的内容 div`height:100%`溢出页面而不是增长到浏览器窗口的大小。为了在添加文档类型之前获得功能，我必须添加这个 java 脚本。

```
wHeight = $(window).height();
$('#content').height(wHeight); 
```

为什么 doc 类型会以这种方式影响布局，我可以在不使用 java 脚本的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:59:22.280

正如 darksky 提到的，您的 div 必须包含在另一个 % 中才能生效。HTML 几乎只是一堆相互堆叠的容器。首先我们有容器，然后是里面的容器，最后是容器。如果你告诉你的容器是 100%，它不知道 100% 是什么，所以正确的方法是：

```
html,
body {
   margin:0;
   padding:0;
   height:100%;
}
#container {
   min-height:100%;
} 
```

# string - 删除R中字符串中位置的字符？

> ID：12047096
> 
> 赞同：5
> 
> 时间：2012-08-21T00:42:51.933
> 
> 标签：string, r, character

我正在寻找一种方法来删除 R 中字符串中某些位置的字符。例如，如果我们有一个 string `"1,2,1,1,2,1,1,1,1,2,1,1"`，我想删除第三、第四、第七和第八个位置。该操作将使字符串：`"1,1,2,1,1,1,1,2,1,1"`。

不幸的是，使用 strsplit 将字符串分解为列表不是一种选择，因为我正在使用的字符串长度超过 100 万个字符。考虑到我有大约 2,500 个字符串，这需要相当长的时间。

或者，找到一种用空字符串替换字符的方法`""`可以达到同样的目的——我认为。考虑到这一思路，我发现了这篇 StackOverflow 帖子：

[R：我该如何替换字符串中的第 5 个元素？](https://stackoverflow.com/questions/6819573/r-how-can-i-replace-lets-say-the-5th-element-within-a-string)

不幸的是，建议的解决方案很难有效地概括，对于要删除的 2000 个位置的列表，每个输入字符串大约需要 60 秒：

```
subchar2 = function(inputstring, pos){
string = ""
memory = 0
for(num in pos){
    string = paste(string, substr(inputstring, (memory+1), (num-1)), sep = "")
    memory = num
}
string = paste(string, substr(inputstring,(memory+1), nchar(inputstring)),sep = "")
return(string)
} 
```

调查这个问题，我发现了一段代码，它似乎将某些位置的字符替换为`"-"`：

```
subchar <- function(string, pos) {
        for(i in pos) {
            string <- gsub(paste("^(.{", i-1, "}).", sep=""), "\\1-", string)
        }
        return(string)
} 
```

我不太了解正则表达式（还），但我强烈怀疑这些方面的某些东西在时间上比第一个代码解决方案要好得多。不幸的是，当 pos 中的值变高时，这个 subchar 函数似乎会中断：

```
> test = subchar(data[1], 257)
Error in gsub(paste("^(.{", i - 1, "}).", sep = ""), "\\1-", string) :
invalid regular expression '^(.{256}).', reason 'Invalid contents of {}' 
```

我也在考虑尝试使用 SQL 将字符串数据读入表中，但我希望会有一个优雅的字符串解决方案。在 R 中执行此操作的 SQL 实现似乎相当复杂。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T01:39:16.467

`strsplit`如果您使用`fixed = TRUE`. 粗略推断，处理 2,500 个由 1,000,000 个逗号分隔的整数组成的字符串需要 2 分钟多一点的时间。

```
N <- 1000000
x <- sample(0:1, N, replace = TRUE)
s <- paste(x, collapse = ",")

# this is a vector of 10 strings
M <- 10
S <- rep(s, M)

system.time(y <- strsplit(S, split = ","))
# user  system elapsed 
# 6.57    0.00    6.56 
system.time(y <- strsplit(S, split = ",", fixed = TRUE))
# user  system elapsed 
# 0.46    0.03    0.50 
```

这几乎比使用扫描快 3 倍：

```
system.time(scan(textConnection(S), sep=",", what="a"))
# Read 10000000 items
# user  system elapsed 
# 1.21    0.09    1.42 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T01:23:05.167

在使用中阅读它们`scan()`。您可以将分隔符设置为 "," 和 what="a"。您可以`scan`一次使用一条“线”，`nlines=1`如果它是`textConnection`，则“管道”将“记住”上次阅读时的位置。

```
x <- paste( sample(0:1, 1000, rep=T), sep=",")
xin <- textConnection(x)

x995 <- scan(xin, sep=",", what="a", nmax=995)
# Read 995 items
x5 <- scan(xin, sep=",", what="a", nmax=995)
# Read 5 items 
```

这是一个带有 5 条“线”的插图

```
> x <- paste( rep( paste(sample(0:1, 50, rep=T), collapse=","),  5),  collapse="\n")
> str(x)
 chr "1,0,0,0,0,1,0,0,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,1,0,1,0,1,0,0,1,0,0,0,1,0,1,0,0,1,1,1,1,1,0,0,0,1,0,0\n1,0,0,0,0,1,0,0,1,1,1,0,1,"| __truncated__
> xin <- textConnection(x)
> x1 <- scan(xin, sep=",", what="a", nlines=1)
Read 50 items
> x2 <- scan(xin, sep=",", what="a", nlines=1)
Read 50 items
> x3 <- scan(xin, sep=",", what="a", nlines=1)
Read 50 items
> x4 <- scan(xin, sep=",", what="a", nlines=1)
Read 50 items
> x5 <- scan(xin, sep=",", what="a", nlines=1)
Read 50 items
> x6 <- scan(xin, sep=",", what="a", nlines=1)
Read 0 items
> length(x1)
[1] 50
> length(x1[-c(3,4,7,8)])
[1] 46
> paste(x1, collapse=",")
[1] "1,0,0,0,0,1,0,0,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,1,0,1,0,1,0,0,1,0,0,0,1,0,1,0,0,1,1,1,1,1,0,0,0,1,0,0"
> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T01:15:06.823

一种快速修复方法是删除 for 循环中的粘贴

```
subchar3<-function(inputstring, pos){
string = ""
memory = 0
for(num in pos){
    string = c(string,substr(inputstring, (memory+1), (num-1)))
    memory = num
}
string = paste(c(string, substr(inputstring,(memory+1), nchar(inputstring))),collapse = "")
return(string)
}
data<-paste(sample(letters,100000,replace=T),collapse='')
remove<-sample(1:nchar(data),200)
remove<-remove[order(remove)]
s2<-subchar2(data,remove)
s3<-subchar3(data,remove)
identical(s2,s3)
#[1] TRUE

> library(rbenchmark)
> benchmark(subchar2(data,remove),subchar3(data,remove),replications=10)
                    test replications elapsed relative user.self sys.self
1 subchar2(data, remove)           10   43.64 40.78505     39.97      1.9
2 subchar3(data, remove)           10    1.07  1.00000      1.01      0.0
  user.child sys.child
1         NA        NA
2         NA        NA 
```

# haskell - haskell中的相互递归类型

> ID：12047097
> 
> 赞同：2
> 
> 时间：2012-08-21T00:43:22.440
> 
> 标签：haskell, recursion

我是 Haskell 的新手，相互递归类型的概念让我很困惑。

这是一个例子：

```
data BoolExpr
     = BoolConst Bool
     | BoolOp BoolOp BoolExpr BoolExpr
     | ConpOp CompOp IntExpr IntExpr 
```

为什么这里有两个`BoolOp`和`CompOp`？

我知道第一个`BoolOp`是数据构造函数，但是第二个`BoolOp`呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T01:04:34.057

没错，第一个`BoolOp`是[构造函数](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#algebraic-data-types)；第二个说构造函数采用 type 的值`:: BoolOp`。完整类型是：

```
BoolOp :: BoolOp -> BoolExpr -> BoolExpr -> BoolExpr 
```

所以我希望周围有这样的代码：

```
data BoolOp = BoolAnd  |  BoolOr  |  BoolXor 
```

所以要使用这个构造函数，你需要给它一个`BoolOp`和两个`BoolExpr`s：

```
myBoolExpr :: BoolExpr
myBoolExpr = BoolOp  BoolOr  (BoolConst True)  (BoolConst False) 
```

# ruby - Ruby Mechanize、Nokogiri 和 Net::HTTP

> ID：12047100
> 
> 赞同：3
> 
> 时间：2012-08-21T00:43:41.600
> 
> 标签：ruby, nokogiri, mechanize, eventmachine, net-http

我正在使用 Net::HTTP 处理 HTTP 请求并得到响应：

```
uri = URI("http://www.example.com")
http = Net::HTTP.start(uri.host, uri.port, proxy_host, proxy_port)
request = Net::HTTP::Get.new uri.request_uri
response = http.request request # Net::HTTPResponse object
body = response.body 
```

如果我必须使用 Nokogiri gem 来解析这个 HTML 响应，我会这样做：

```
nokogiri_obj = Nokogiri::HTML(body) 
```

但如果我想使用 Mechanize gem，我需要这样做：

```
agent = Mechanize.new
mechanize_obj = agent.get("http://www.example.com") 
```

我是否可以使用 Net::Http 获取 HTML 响应，然后使用 Mechanize gem 将其转换为 Mechanize 对象而不是使用 `agent.get()`？

* * *

编辑：

绕过该`agent.get()`方法的原因是因为我试图用来`EventMachine::Iterator`发出并发`EM-HTTP`请求。

```
EventMachine.run do
  EM::Iterator.new(urls, 3).each do |url,iter|
    puts "giving   #{url}   to httprequest now"
    http = EM::HttpRequest.new(url).get
    http.callback { |resp|
      uri = resp.send(:URI, url)
      puts "inside callback of #{url}"
      body = resp.response
      page = agent.parse(uri, resp, body)
    }
    iter.next
  end
end 
```

但它不起作用。我收到一个错误：

```
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/mechanize-2.5.1/lib/mechanize.rb:1165:in`parse': undefined method `[]' for #<EventMachine::HttpClient:0x0000001c18eb30> (NoMethodError) 
```

当我使用该`parse`方法时，`Net::HTTP`它工作正常，我得到了 Mechanize 对象：

```
 uri = URI("http://www.example.com")
 http = Net::HTTP.start(uri.host, uri.port, proxy_host, proxy_port)
 request = Net::HTTP::Get.new uri.request_uri
 response = http.request request # Net::HTTPResponse object
 body = response.body
 agent = Mechanize.new
 page = agent.parse(uri, response, body) 
```

我`parse`在使用 em-http 时是否为该方法传递了错误的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:24:49.187

我不确定您为什么认为使用 Net::HTTP 会更好。Mechanize 将处理重定向和 cookie，并提供对 Nokogiri 已解析文档的随时访问。

```
require 'mechanize'

agent = Mechanize.new
page = agent.get('http://www.example.com')

# Use Nokogiri to find the content of the <h1> tag...
puts page.at('h1').content # => "Example Domains" 
```

请注意，`user_agent`无需设置 即可访问 example.com。

* * *

如果您想使用线程引擎来检索页面，请查看[Typhoeous 和 Hydra](http://typhoeus.github.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:20:08.710

看起来`Mechanize`有一个[`parse`方法](http://mechanize.rubyforge.org/Mechanize.html#method-i-parse)，所以这可以工作：

```
mechanize_obj = Mechanize.parse(uri, response, body) 
```

# iphone - Google 地图如何确定用户在地图上的位置？

> ID：12047104
> 
> 赞同：0
> 
> 时间：2012-08-21T00:44:24.380
> 
> 标签：iphone, ios, google-maps, maps, location

我想做一个 iPhone 地图应用程序。我知道iPhone可以给出用户具体位置的详细经纬度坐标。谷歌地图和其他地图应用程序如何将用户的位置转换为地图上的位置？似乎有很多事情要考虑。例如，如果地图是旋转的，在我看来，它有很多缩放和需要考虑的东西。谷歌地图如何将用户的当前位置翻译成地图上的特定点，并使其如此准确（在 2 到 3 米内）。我真的很感激答案或任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:20:09.180

Google 地图应用程序知道：

*   Google Maps 服务将地图划分为图块的方式
*   每个地图图块的大小和位置（纬度/经度）
*   用户选择的缩放级别
*   设备屏幕的大小
*   设备上报的位置经纬度

有了这些信息，地图应用程序可以做一些简单的线性算法来找出哪些图块需要显示在屏幕上，以便用户的位置显示在屏幕中间（或任何需要的地方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:24:21.250

谷歌地图使用几种不同的方法来获取用户的位置，包括用户连接到的移动网络塔的位置（有时谷歌使用 2 个或更多塔的三角测量来使这个更准确[http://techcrunch.com/ 2007/11/28/google-mobile-maps-pinpoints-your-location-without-gps/](http://techcrunch.com/2007/11/28/google-mobile-maps-pinpoints-your-location-without-gps/)），如果用户连接到 WiFi 和 GPS，则为 ISP 的位置。

最准确的是 GPS，它为 Google 提供精确到（如果我没记错的话）10 米以内的纬度和经度坐标。Google 地图系统中的所有图像都存储了 GPS 坐标，因此 Google 所要做的就是检索正确的地图图像并在图像上绘制用户的位置。

我认为这就是您所追求的，但是如果您需要有关某事的更多详细信息，或者我误解了，请发表评论，我将修改此答案。

**编辑**

请参阅此页面，它很好地介绍了在 iPhone 上使用 Google 地图[https://developers.google.com/maps/articles/tutorial-iphone](https://developers.google.com/maps/articles/tutorial-iphone)

您无需编写用于在地图上放置标记以显示用户位置的算法，只需在 Google Maps API 中调用函数/方法即可，它会为您完成所有工作。我建议彻底查看 Google Maps API 文档以找到您需要的内容（也可以在上一个链接中找到）。

我认为这可能是您所追求的精确代码片段： [https ://developers.google.com/maps/documentation/javascript/overlays#Markers](https://developers.google.com/maps/documentation/javascript/overlays#Markers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:26:56.793

在确定您的位置时，您的航向/旋转是无关紧要的。您的位置基于从 GPS 卫星接收到的数据。有多个卫星，根据您与每个卫星的距离，您的位置会缩小到一个点。这个点有一对非常详细的坐标（想想小数点后 10 位）。Google 提供的地图上的每个点都与一对坐标相关联。因此，当您的手机计算出您的坐标时，它会检查它在地图上对应的位置，并将您放置在地图上。所有其他位置也基于坐标。

现在，地图还有一个设置，地图会根据您的航向旋转。该功能使用手机内置的指南针。我相信，自 3GS 以来，iPhone 就有内置指南针。

简而言之，将谷歌提供的地图想象成谷歌提供的一张巨大的、分辨率极高的图像，该图像上的每个像素（或更少）都对应一对坐标。确定坐标后，无论缩放级别如何，都将放置在该图像上的相应点上。

# android - Android调试器怪异

> ID：12047110
> 
> 赞同：3
> 
> 时间：2012-08-21T00:44:54.127
> 
> 标签：android, debugging

我一直在使用 Android 调试器时遇到令人沮丧的问题。我有时可以调试和单步调试代码，然后在代码的其他部分（最近在 try/catch 情况下），它下降到 catch {} 块，没有关于异常的信息，甚至没有记录。 e 它来安慰。请注意在屏幕截图中我如何进入 catch 块，但没有实时变量上下文，就好像它处于正常的内容辅助模式一样。观察表达式显示**<error(s)_during_the_evaluation>。**

![例外](../Images/5a9949dbdc4044de0ec5faec27d85330.png)

任何人都可以阐明我遇到的这些令人沮丧的问题吗？调试器在代码的其他部分正常工作的奇怪之处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:40:57.900

Eclipse + ADT 因行为[不一致](http://code.google.com/p/android/issues/detail?id=27940#c25)而臭名昭著，这经常导致我只是确保`Project > Build Automatically`已检查，然后简单地启动`Project > Clean...`.

有时即使这样也无济于事。所以我只是关闭 Eclipse 并重新启动它。大部分时间都在工作。

即使这样也无济于事，我会关闭 Eclipse，运行`CCleaner`并重新启动。**每次都有效**。

奇怪但真实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:48:47.667

你不能*总是*相信你的调试器；这是一门不精确的科学。当有多个代码构建步骤（JVM 字节码、Dalvik 代码等）时尤其如此。调试器通常没有 100% 的必要信息来将代码中的位置反向工程回源代码行。

在上面的例子中，你的代码是否*真的*抛出了异常？听起来好像没有，调试器在突出显示的行上显示执行，即使它不会真正执行它。

我更倾向于相信代码的执行——如果`Log.e()`从未调用过，那么你根本就不会真正得到任何异常。

# javascript - Jquery AutoComplete 被 Jquery Slider 隐藏 - JQuery 等效于 wmode？

> ID：12047120
> 
> 赞同：4
> 
> 时间：2012-08-21T00:46:29.647
> 
> 标签：javascript, jquery, css, autocomplete, nivo-slider

我在我的网站上使用 Jquery UI 的自动完成功能（[在此处找到](http://jqueryui.com/demos/autocomplete/)）和 Nivo 滑块（[在此处找到](http://nivo.dev7studios.com/)）。自动完成位于 nivo 滑块上方。发生的事情是在我的 nivo 滑块的第一张幻灯片上，当我为自动完成输入内容时，会出现建议，而下面的横幅却没有覆盖它。但是当第二张幻灯片出现时，建议隐藏在横幅下方。我基本上使用 jquery ui 自动完成和 nivo 滑块的默认设置。

这是一个图形：

![在此处输入图像描述](../Images/42b5f6edb670c75321e38b7d8e49a1b7.png)

我读到了 wmode，如果横幅在 flash 中，这基本上是一个修复，但在 jquery 中挖掘。我认为这与z-index有关。我对么？我应该如何解决这个问题？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T00:49:40.800

来自文本框的下拉列表（自动完成），作为 jQuery UI 自动完成的一部分：`z-index: 1`在其包装器中动态创建一个，`<ul class="ui-autocomplete" style="z-index: 1; ...etc">`

您只需要确保所有自动完成的东西（甚至只是那个特定的）都比 nivo 滑块高得多。

[**jsFiddle DEMO**](http://jsfiddle.net/cW4Nr/1/)（让它出现，然后检查，你会看到`style="z-index: 99999;"`

```
$( ".autocompleteThis" ).autocomplete({
    source: availableTags,
    open: function (event, ui) {
        $('.ui-autocomplete').css('z-index', '99999');
    }
});​ 
```

[使用 在**`open: function (event, ui) {}`**](http://jqueryui.com/demos/autocomplete/#event-open)那里设置自动完成 z-index。

# wpf - 在显示时修改 ObservableCollection

> ID：12047121
> 
> 赞同：2
> 
> 时间：2012-08-21T00:46:30.863
> 
> 标签：wpf, treeview, observablecollection

我有一个树视图，其中 ItemsSource 是 ObservableCollection。每次用户通过使用后台工作者扩展子树并修改与子节点对应的底层 ObservableCollection 时，我都会动态加载子内容。但是，当我尝试在该线程中修改此 ObservableCollection 时，如果且仅当树已经展开时，它将失败（这意味着如果孩子的数量很少，那么它将正确填充）。

我希望实现的是，一旦我展开树，我可以看到孩子在处理时被动态填充。如何使用 ObservableCollection 实现该行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T00:50:04.407

> 如何使用 ObservableCollection 实现该行为？

问题是您不允许在 WPF 的后台线程上更新集合。绑定系统会自动将最简单的绑定编组到 UI 线程，而不是集合。你有两个选择。

*   `Dispatcher.Invoke`您可以使用或编组调用以将数据添加回 UI 线程`Dispatcher.BeginInvoke`。这将允许添加数据，但不会在 WPF 更新绑定时导致跨线程异常。

*   （如果您使用的是 .NET 4.5）您可以在绑定上使用新的[EnableCollectionSynchronization](http://msdn.microsoft.com/en-us/library/hh140164)以允许跨线程访问集合。

# templates - 用于创建类似于 StackOverflow 的分页 UI/链接的 Knockout 模板

> ID：12047128
> 
> 赞同：7
> 
> 时间：2012-08-21T00:48:27.200
> 
> 标签：templates, mvvm, knockout.js, paging

我有一个用于某些分页 UI 的功能性 Knockout 模板，该模板与基于 Knockout 的共享数据网格一起使用。此模板为网格中的每个“页面”数据呈现一个 HREF。

该模板有效，但它很笨拙，因为如果我获取大量数据，那么我最终会在网格下方出现数十个导航页面链接。这是当前模板：

```
<div class="idTemplate_ko_simpleGrid_pageLinks">
    <p>
        <span>Go to page:</span>
        <!-- ko foreach: ko.utils.range(0, maxPageIndex) -->
            <a href="javascript:void(0);"
               class="grid-pagination" 
               data-bind="text: $data + 1, click: function() { $root.currentPageIndex($data) }, css: { selected: $data == $root.currentPageIndex() }"></a>
        <!-- /ko -->
    </p>
</div> 
```

'currentPageIndex' 值只是模型中可观察到的简单 ko：

```
this.currentPageIndex = ko.observable(0); 
```

而 'maxPageIndex' 是模型中的计算 observable：

```
this.maxPageIndex = ko.computed(function () {
    return Math.ceil(ko.utils.unwrapObservable(this.filteredItems()).length / this.pageSize()) - 1;
}, this); 
```

如何修改模板和模型以启用类似于 StackOverflow 的分页 UI？

例如：

**上一页 1 ... 3 4 5 6 7 ... 69 下一页**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T20:59:07.187

这正是我使用了一段时间的寻呼机样式。

我刚刚完成了将我在几个项目中使用的寻呼机功能提取到淘汰赛和示例模板的扩展。

有关源代码，请参阅[https://github.com/remcoros/ko.pager ，有关工作示例，请参阅](https://github.com/remcoros/ko.pager)[http://remcoros.github.com/ko.pager/example.html](http://remcoros.github.com/ko.pager/example.html)。

所有计算和一些方便的属性都由“Pager”类提供，您可以创建和绑定到该类。但包括一个示例工作模板。

有关用法，请参见源代码 example.html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:26:56.397

我要做的第一件事是查看是否有任何自定义绑定或库可以执行此操作。如果有，请创建一个使用该库的自定义绑定。

备份计划 - 制作您自己的自定义绑定。我会做类似的事情：

```
<div data-bind="pagination: { maxIndex: maxPageIndex(), numToShow: 7 }">
...
</div> 
```

然后在我的自定义绑定中，执行以下操作：

```
ko.bindingHandlers.pagination = {
    update: function(element, valueAccessor) {
        if (valueAccessor().maxPageIndex > valueAccessor().numToShow) {
            // use jquery to loop and append new $("<a>") tags to $(element), using "1", then ... and a segment in the middle, followed by ... and the last index.
        }
        else {
            // loop over the regular amount.
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:20:20.853

我太好了，所以我在两分钟内为你做了一个：P（所以它可能有错误）它基于我发现的第一个寻呼机，它是 jQuery 分页

[http://jsfiddle.net/tymTz/2/](http://jsfiddle.net/tymTz/2/)

# asp.net-web-api - 反序列化 HttpError 模型状态

> ID：12047136
> 
> 赞同：4
> 
> 时间：2012-08-21T00:49:00.163
> 
> 标签：asp.net-web-api

了解我现在拥有的最新 webapi 位

```
return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState); 
```

我的客户是一个从响应中读取值的 MVC 网站。我终于让它从响应中读取 HttpError 对象，但是加载 ModelState 是......至少可以说不直观。

有没有更干净的方法来写这个？

```
var httpError = response.Read<HttpError>();
 var errors = httpError["ModelState"] as JObject;

 foreach (var error in errors)
 foreach (var message in error.Value.Values<string>())
 {
     modelState.AddModelError(error.Key, message);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T06:39:59.567

正如您所确定的，虽然错误响应可以很容易地反序列化为 HttpError，但其中的 ModelState 值仅以 JObject 的形式结束。

您可能已经尝试过类似的方法：

```
var errors = ((JObject)errorMsg["ModelState"])
             .ToObject<ModelStateDictionary>(); 
```

或者可能：

```
var errors = ((JObject)errorMsg["ModelState"])
             .ToObject<Dictionary<string, ICollection<ModelError>>>(); 
```

并发现它不会转换。我能找到的最好的选择是：

```
var errors = ((JObject)errorMsg["ModelState"])
             .ToObject<Dictionary<string, IList<string>>>(); 
```

这使您的迭代更加*整洁*：

```
foreach (var err in errors)
foreach (var msg in err.Value)
{
    modelStateDictionary.AddModelError(err.Key, msg);
} 
```

正如我所看到的，问题是一个字符串不会反序列化为 ModelError 实例，并且由于 ModelErrorCollection 不幸隐藏了它的基类构造函数而进一步复杂化`Collection(IList list)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:22:24.890

您如何进行 API 调用？客户端？如果是这样，我注意到 Brad Wilson 在最近的演示中使用以下格式通过 jQuery 接收 AJAX 响应。这可能不是您想要的，但对我来说效果很好：

```
$.ajax({
    url: "/apicontorller/action/",
    contentType: "application/json",
    type: "POST",
    data: jsonData,
    statusCode: {
        200: function (data) {

        },
        404: function () {
            alert('404');
        },
        400: function () {
            alert('invalid');
        },
        500: function () {
            alert('error');
        },
        // ...
    }
}); 
```

这样做的好处是您可以处理实际的 HTTP 状态代码。根据我的经验，可以通过向谓词函数提供参数来访问错误消息/数据。我还在学习 REST 和 WebAPI 平台，所以如果有人能提供更好的实现，我当然欢迎！

# c++ - OpenGL 3.x 核心 sampler2DRect (GL_TEXTURE_RECTANGLE) 示例

> ID：12047138
> 
> 赞同：2
> 
> 时间：2012-08-21T00:49:44.510
> 
> 标签：c++, opengl, sfml, opengl-3

我试图弄清楚如何在我的 3D 场景上制作半透明的 2D 叠加层，阅读 OpenGL SuperBible 第 5 版以供参考。

它有一个例子，它使用纹理目标 GL_TEXTURE_RECTANGLE 和一个名为 sampler2DRect 的 GLSL 统一类型将 OpenGL 徽标覆盖在场景上（在第 7 章）。纹理应该使用 texture() 命令显示在片段着色器中。

本书中的示例使用了许多源文件，我很难在一个简单的程序中实现它，所以我想知道是否有人可以指出一个更简单的 sampler2DRect 示例。

我对切换到正交投影的部分没有任何问题，而是当我尝试加载纹理时，它只是将表面显示为白色。在这一点上，我的代码变得非常混乱，而且我似乎无法确定问题所在，所以如果可以在任何地方使用一个更简单的示例，我宁愿从头开始。

PS 我正在使用 SFML 2.0rc 来加载图像文件，以防万一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T03:07:37.477

```
error C1101: ambiguous overloaded function reference "mul(mat4, vec3)" 
     (0) : mat3x4 mul(mat3x1, mat1x4)
     (0) : mat3 mul(mat3x1, mat1x3) 
     (0) : mat3x2 mul(mat3x1, mat1x2) 
     (0) : mat3x1 mul(mat3x1, mat1) 
     (0) : mat2x4 mul(mat2x1, mat1x4) 
     ..... 
```

这是一种非常冗长的方式来告诉您没有将 a`mat4`与 a相乘的函数`vec3`。然后列出`mul`.

当您将矩阵相乘时，您的尺寸必须匹配，您可能想要的是将 a`mat4`与 a相乘**`vec4`**。如果这是您的位置坐标，则添加 a`1.0`作为向量的最终值：

```
uniform mat4 mvpMatrix;
in vec3 position;

main()
   gl_Position = mvpMatrix * vec4(position, 1.0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T16:35:17.827

除了蒂姆的回答，请确保：

*   您的纹理已绑定： glBindTexture(GL_TEXTURE_2D, textureID);
*   顶点着色器输出 UV 坐标：out vec2 UV；
*   顶点着色器获取 UV 坐标：在 vec2 UV 中；
*   具有 UV 的 VBO 存在、启用、绑定和设置 (glEnableVertexAttribArray, glBindBuffer, glVertexAttribPointer)
*   glEnable(GL_TEXTURE_2D)

以及矩形纹理的特殊项目：

*   UV 坐标位于 [0,width]x[0,height] （矩形纹理的特殊情况）。
*   确保你的四边形有大约。与纹理大小相同（rect.tex 没有 mipmap）
*   请改用标准纹理。它们可以是 NPOT。

另外：使用 gDebugger。

# php - 使用 PayPal API 促进用户对用户的交易

> ID：12047143
> 
> 赞同：1
> 
> 时间：2012-08-21T00:50:21.593
> 
> 标签：php, paypal

PayPal Adaptive Payments API 是否允许连接到应用程序的两个用户在彼此之间发送资金？

我想知道，通过 API，我是否可以仅通过访问令牌促进用户 A 和用户 B 之间的交易。

我的应用程序能否让用户 A 向用户 B 汇款？

额外问题：是否也可以使用 Google Checkout 和 Money Bookers 帐户来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:52:29.837

PayPal Adaptive Payments 将允许这种情况发生（两个用户互相发送资金）。您还可以向最多 5 人（包括您自己在内的 6 人）付款。自适应支付对于处理给定交易中的多个用户非常强大。

此外，PayPal 必须通过他们的审查流程批准任何使用自适应支付的应用程序（我相信您通过阅读他们的大量文档知道这一点）。

# objective-c - 为什么对我的 CCSequence 实施回调（通过目标/选择器或块）会使我的应用程序崩溃？

> ID：12047147
> 
> 赞同：0
> 
> 时间：2012-08-21T00:51:23.517
> 
> 标签：objective-c, cocos2d-iphone

在精灵本身完成动画后，我试图从我的主游戏层中删除一个精灵......为了实现这一点，我首先尝试将一个块传递给精灵对象的 CCSequence，如下所示：

```
#Game.m
// some method
    [self.spriteMan zoomAwayWithBlock:{[self destroySpriteMan];}];
    [self createNewSpriteMan];
}

-(void)destroySpriteMan {
    [self removeChild:self.spriteMan cleanup:YES];
}

#SpriteMan.m
-(void)zoomAwayWithBlock:(void(^)())block {
    [self runAction:[CCSequence actions: [CCScaleTo actionWithDuration:2.0f scale:1.0f],
                     [CCCallFuncN actionWithBlock:block],
                     nil]];
} 
```

我想知道 self.spriteMan 的绑定是否在动画完成之前被调用 [self createNewSpriteMan] 搞砸了……所以我在调用它之前将 spriteMan 存储在 tempSpriteMan 变量中，并尝试在 tempSpriteMan 上删除Child .....两者都立即导致崩溃。

然后我重写了它以使用选择器和目标：

```
#game.m
[self.spriteMan zoomAwayWithSelector:@selector(destroySpriteMan:) target:self];

-(void)destroySpriteMan:(SpriteMan *)spriteMan {
    [self removeChild:spriteMan cleanup:YES];
}

#SpriteMan.m
-(void)zoomAwayWithSelector:(SEL)sel target:(id)target {
    [self runAction:[CCSequence actions: [CCScaleTo actionWithDuration:2.0f scale:1.0f],
                     [CCCallFuncN actionWithTarget:target selector:sel],
                     nil]];
} 
```

同样的结果..每次都崩溃......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:19:17.427

正如Aroth所指出的，答案在于这个话题： [http ://cocos2d-iphone.org/forum/topic/6818](http://cocos2d-iphone.org/forum/topic/6818)

它显示了问题的解决方案，将其放入一系列操作中，为我解决了问题：

```
[CCCallFuncO actionWithTarget:self selector:@selector(removeFromParentAndCleanup:) object:[CCNode node]]. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:51:40.160

您可以尝试使用方法将类别添加到 CCNode

```
- (void) removeFromParentWithCleanupYes
{
    [self removeFromParentWithCleanup:YES];
} 
```

然后像这样制作序列

```
id sequence = [CCSequence actions: action1, 
                                   action2, 
                                   ..., 
                                   [CCCallFunc actionWithTarget: target selector:@selector(removeFromParentWithCleanupYes)], 
                                   nil];
[target runAction: sequence]; 
```

它不是很优雅，但它应该可以工作。

或者您可以创建自己的简单操作，这将从父级中删除它的目标。

# zombie.js - 让客户端脚本在zombie.js中运行

> ID：12047151
> 
> 赞同：2
> 
> 时间：2012-08-21T00:52:20.190
> 
> 标签：zombie.js

我正在使用 Zombie.js 来测试 Cucumber-js，但我似乎无法让我的客户端脚本运行。

访问页面：

```
this.browser.visit("http://localhost/boic",function(e, browser,status,errors){

        console.log('status',status);
        console.log('error',errors);
        console.log('console',browser.text("H1"));
}); 
```

返回状态 200，无错误，并正确显示 H1 文本。但是，如果我包含一个脚本来更改页面中的 H1 代码：

```
<script>
$('H1').html('hello world');
</script> 
```

H1 文本保持不变，并且无法通过 browser.window 访问全局变量...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T13:56:51.507

我同意 Jon Biz。僵尸很难使用。许多使用可能包含小错误的 JS 库的站点在僵尸浏览器遇到它们时会导致它崩溃（我认为节点失败） - 如果您设置了 runScripts 选项。这使得它很难用于任何需要外部 JS 的应用程序/站点 - 即它们中的大多数。

我还建议切换到 Phantomjs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:20:25.663

在调用脚本之前，您是否在页面中加载了 jQuery？

还有 runScripts 浏览器选项，但默认为 true。

但我会建议运行一个外部 phantom.js 进程并通过 webdriver 界面。仅仅因为我花了 6 个月的时间试图让僵尸做我想做的事，而 phantomjs 让这一切变得简单。 [http://phantomjs.org/release-1.8.html](http://phantomjs.org/release-1.8.html) https://github.com/LearnBoost/soda

# nginx - 乘客/nginx 未加载 Sinatra 应用程序

> ID：12047158
> 
> 赞同：2
> 
> 时间：2012-08-21T00:54:17.760
> 
> 标签：nginx, sinatra, passenger, rack

我正在尝试在 sub-uri 下运行一些 Sinatra 应用程序，但似乎Passenger 没有将它们作为 Rack 应用程序来使用。

从 nginx 错误日志：403 错误，`directory index of "/web/archive/sites/archive/app1/" is forbidden`. 如果我放置`index.html`在该目录中，该 HTML 文件就会呈现。

这些应用程序在我的本地机器上运行良好`rackup`，所以我觉得应用程序代码无关紧要。我还以 nginx 用户（`user nginx`在 nginx 配置的顶部）和用户身份登录，该`archive`用户是用于部署所有这些应用程序的用户，并且拥有所有目录和文件。使用任一用户导航到这些文件中的任何一个都没有问题。

此外，如果我将其移至子域（例如 ），则此设置可以正常工作`archive.domain.com`，然后将应用程序符号链接直接保存在`/web/archive/sites`（而不是`/web/archive/sites/archive`）中，否则使用几乎相同的 nginx 配置，这就是为什么我不相信这一点是权限问题。

**nginx 配置**

```
server {
    listen 80;
    server_name domain.com;

    location /archive {
        root /web/archive/sites;
        passenger_enabled on;
        passenger_base_uri /app1;
        passenger_base_uri /app2
    }
} 
```

**目录结构**

```
/web
  |
  +-- archive/
       |
       +-- sites/
       |    |
       |    +-- archive/
       |         |
       |         +-- app1 -> /web/archive/apps/app1/current/public
       |         |
       |         +-- app2 -> /web/archive/apps/app2/current/public 
       |
       +-- apps/
            |
            +-- app1/
            |    |
            |    +-- current/
            |    |
            |    +-- public/
            |    |
            |    +-- config.ru
            |
            +-- app2/
                 |
                 +-- (same as app1/) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:28:56.283

`passenger_base_uri`与您的配置示例中的一起与目录结构（例如vs ）`root`不匹配。据我了解，Passenger 不考虑位置，而只考虑和。`/web/archive/sites/app1``/web/archive/sites/archive/app1``root``passenger_base_uri`

尝试将配置更改为

```
server {
    listen 80;
    server_name domain.com;

    location /archive {
        root /web/archive/sites/archive;
        passenger_enabled on;
        passenger_base_uri /app1;
        passenger_base_uri /app2
    }
} 
```

# database - 在不知道数据细节的情况下设计数据库？

> ID：12047163
> 
> 赞同：0
> 
> 时间：2012-08-21T00:55:40.800
> 
> 标签：database, database-design, data-modeling

是否存在不允许数据库设计人员了解数据细节的情况？我正在寻找现实世界的例子来学习——拜托。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:08:10.607

我忍不住要讲一个关于数据库噩梦的故事。最糟糕的情况之一是亚马逊刚开始发展的时候。最初他们只卖书，然后扩展到音乐，然后是许多其他东西。

在大约两年的时间里，亚马逊每两三个月就会宣布一个新市场——童装、家居用品、园艺用品、食品等等。数据库人员的任务是开发和支持产品线的系统。然而，亚马逊认为新产品的发布是高度机密的。

特别是，数据仓库人员将远离循环。有时，他们会通过阅读新闻来了解新的业务线——然后必须在数据仓库中支持它。

因此，他们必须开发一个灵活的数据库来满足未宣布的业务需求。

在任何商业环境中，都会出现新的需求。我建议阅读 Ralph Kimball 的“Data Warehouse Toolkit”之类的书，了解有关如何开发一个相当健壮的系统的更多背景知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:13:21.683

我目前在一家存储非常私密的个人信息的公司工作。我不允许访问生产数据库。对于我们的开发和测试环境，我们将所有姓名、地​​址和其他个人信息替换为随机生成的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:26:11.000

是的，我经常看到数据库允许用户定义自定义数据。基本方法是为您的数据库设计一个元数据系统。然后允许实体与自定义字段关联。您不希望对所有数据都这样做，否则您最终只会在数据库中得到一个数据库，但是对于动态添加许多自定义字段，这种方法效果很好。

# continuous-integration - 将生成的私有 ssh 密钥复制到 Jenkins 下的 .ssh 文件夹中

> ID：12047164
> 
> 赞同：1
> 
> 时间：2012-08-21T00:55:47.563
> 
> 标签：continuous-integration, jenkins

我在将 Jenkins 链接到 github 时遇到问题。我生成了 ssh-public 密钥，然后将其添加到 github。

然后我尝试将生成的私有 ssh 密钥复制到 jenkins 下的 .ssh 文件夹中，但我无法在硬盘驱动器上的任何位置找到它。（Mac OS Mountain Lion）

Jenkins 的主目录是 /Shared/Jenkins/Home

当我进入时`cd /var/lib/`，我能看到的唯一文件夹是 postfix ......不明白为什么我下面没有 Jenkins`/var/lib/`

我通过从官方网站下载 .pkg 文件安装了 Jenkins。

关于如何将私有 ssh 密钥添加到 Jenkins 下的 .ssh 文件夹中的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:03:21.137

这应该对您有所帮助：[http ://colonelpanic.net/2011/06/jenkins-on-mac-os-x-git-w-ssh-public-key/](http://colonelpanic.net/2011/06/jenkins-on-mac-os-x-git-w-ssh-public-key/)

# .htaccess - 转换为 SEO 友好的 URL

> ID：12047165
> 
> 赞同：1
> 
> 时间：2012-08-21T00:55:57.417
> 
> 标签：.htaccess, seo

我正在尝试使我的网站 URL 对 SEO 友好，但我遇到了问题......

如何更改此 URL：

[http://www.example.com/media.php?album=Album_1&page=1](http://www.example.com/media.php?album=Album_1&page=1)

对于这种 URL：

[http://www.example.com/media/Album_1/1](http://www.example.com/media/Album_1/1)

我已经尝试过这个有效的代码，但我的 CSS 似乎很成功......

```
RewriteEngine On
RewriteRule ^media/(.*?)/([0-9]+)$ media.php?album=$1&amp;page=$2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:03:09.373

您的规则的目标不需要`&amp;`，它应该只是`&`。Apache 将根据需要对其进行适当编码（例如在重定向中返回的 HTML 中的锚链接中）。您的 css 无法正常工作的原因听起来像是相对 URL 与绝对 URL 的问题。如果你的 css 是这样链接的`<link rel=stylesheet href="something.css">`，那么相对 URL 解析最终会是`/media/Album_1/something.css`.

尝试将其添加到页面的标题中：

```
<base href="/"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:59:48.840

尝试阅读 mod_rewrite apache 文档或仅搜索“mod_rewrite”这个特定问题被问了很多次

# jquery - jQuery动态表单删除最后一个标签

> ID：12047168
> 
> 赞同：3
> 
> 时间：2012-08-21T00:56:27.487
> 
> 标签：jquery, forms, document

我刚开始学习 JS 和 jQuery 并且有一个问题。我想制作一个动态表单，可以使用多个选择器进行复杂化。问题是当我打开 Option1 然后用 option6 和 7 按下另一个选择器时，它会消失，但我希望它可见。我知道问题出在 $('label').hide(); 但我对 jQuery 和 Jscript 很不擅长，以至于我不知道如何进行这项工作。我将不胜感激。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
    $('label').hide();
    $('#sel').change(function() {

        var val = $(this).val();

        $('label').hide();

        switch (val){
            case 'option1':
                $('#label1').show();
                break;
            case 'option2':
                $('#label2').show();
                break;
            case 'option3':
                $('#label3').show();
                break;
            case 'option4':
                $('#label4').show();
                break;
            case 'option5':
                $('#label5').show();
                break;

        }
    });

    $('#sel2').change(function() {

        var val = $(this).val();

        $('label').hide();

        switch (val){
            case 'option6':
                $('#label6').show();
                break;
            case 'option7':
                $('#label7').show();
                break;        
        }
    });

    $("input")
        .focus(function () {
            $(this).next("span").fadeIn(1000);
        })
        .blur(function () {
             $(this).next("span").fadeOut(1000);
        });
});
</script>

<style>
label {
    display:block;
}
</style>
</head>

<body>

<form>
    <select id="sel">
        <option value="">- select -</option>
        <option value="option1">Option 1</option>
        <option value="option2">Option 2</option>
        <option value="option3">Option 3</option>
        <option value="option4">Option 4</option>
        <option value="option5">Other</option>
    </select>

    <label id="label1">
        <select id="sel2">
            <option value="">- select -</option>
            <option value="option6">Option 6</option>
            <option value="option7">Option 7</option>
        </select>
    </label>

    <label id="label2" for="option2">Text box label 2
        <input type="text" id="option2" />
    </label>
    <label id="label3" for="option3">Text box label 3
        <input type="text" id="option3" />
    </label>
    <label id="label4" for="option4">Text box label 4
        <input type="text" id="option4" />
    </label>
    <label id="label5" for="option5">Other
        <input type="text" id="option5" />
    </label>

    <label id="label6" for="option6">Text box label 6
        <input type="text" id="option6" />
    </label>
    <label id="label7" for="option8">Text box label 7
        <input type="text" id="option7" />
    </label>

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:03:22.553

您可以使用该`slice()`方法尝试以下操作：

```
$('#sel').change(function() {
    var val = this.value.slice(-1); // 1,2,3..
    $('label').slice(0, 4).hide();
    $('#label'+val).show()
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:08:14.490

当你调用#sel2 时，你每次都隐藏“标签”（包括它自己）。我会将其更改为：

```
$('#sel2').change(function() {

    var val = $(this).val();

    $('#label6').hide();
    $('#label7').hide();

    switch (val){
        case 'option6':
            $('#label6').show();
            break;
        case 'option7':
            $('#label7').show();
            break;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T01:21:27.510

您只需一个更改功能就可以做到这一点

```
$('#sel,#sel2').change(function() {
    var $selIndex = $('#sel > option:selected').index(); // <-- store index of first select
    var val = $(this).val().replace('option', ''); // <-- remove options from id
    var $label = $('#label' + val); // <-- use number from options to get correct label
    $('label').not($label).hide(); // <-- hide all labels but current selected
    $('#label1').toggle($selIndex == 1); // <-- show if first select = option1
    $label.show(); // <-- show current selected 
}); 
```

[http://jsfiddle.net/wirey00/FqX8k/](http://jsfiddle.net/wirey00/FqX8k/)

# gwt - 尝试使用 gwt-cal 和 gwt-dnd 时出错

> ID：12047173
> 
> 赞同：3
> 
> 时间：2012-08-21T00:57:43.867
> 
> 标签：gwt

我有一个简单的 GWT 项目，我试图使用[gwt-cal](http://code.google.com/p/gwt-cal/)小部件，但是当我尝试加载使用该小部件的页面时出现错误。

我按照[此处](http://code.google.com/p/gwt-cal/wiki/GettingStarted)的说明使用 gwt-cal 小部件，但它不起作用。我有 gwt-cal 的 0.9.3 版，gwt-dnd 的 3.1.2 版，我正在使用 GWT 2.4。

这是我使用 gwt-cal 小部件的页面：

```
public class ClientCalendarPage extends Composite {

private VerticalPanel mainPanel = new VerticalPanel();
private Calendar calendar;

public ClientCalendarPage() {
    CalendarSettings settings = new CalendarSettings();
    settings.setEnableDragDropCreation(false);
    settings.setEnableDragDrop(false);

    calendar = new Calendar();
    calendar.setSettings(settings);
    calendar.setDate(new Date()); // calendar date, not required
    calendar.setDays(3); // number of days displayed at a time, not required
    calendar.setWidth("500px");
    calendar.setHeight("400px");

    Appointment appt = new Appointment();
    appt.setStart(new Date(System.currentTimeMillis() + 86400000));
    appt.setEnd(new Date(System.currentTimeMillis() + 90000000));
    appt.setTitle("Test");
    appt.setStyle(AppointmentStyle.BLUE);
    calendar.addAppointment(appt);

    mainPanel.add(calendar);

    initWidget(mainPanel);
}
 } 
```

这是我的 app.gwt.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='minoscrossfit'>
 <inherits name='com.google.gwt.user.User'/>
 <inherits name='com.google.gwt.user.theme.clean.Clean'/>                                   
 <inherits name='com.bradrydzewski.gwt.calendar.Calendar' />
 <inherits name='com.bradrydzewski.gwt.calendar.theme.google.Google' />
 <inherits name='com.allen_sauer.gwt.dnd.gwt-dnd'/>
 <entry-point class='com.afrsoftware.minoscrossfit.client.MinosCrossfit'/>
 <source path='client'/>
 <source path='shared'/>
</module> 
```

最后，这是我得到的堆栈跟踪：

```
20:38:43.735 [ERROR] [minoscrossfit] Error while executing the JavaScript provider for property 'locale'

com.google.gwt.core.client.JavaScriptException: (TypeError): Property 'locale' of object  is not a function
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:248)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
at com.google.gwt.dev.shell.ModuleSpacePropertyOracle.computePropertyValue(ModuleSpacePropertyOracle.java:193)
at com.google.gwt.dev.shell.ModuleSpacePropertyOracle.getSelectionProperty(ModuleSpacePropertyOracle.java:130)
at com.google.gwt.resources.ext.ResourceGeneratorUtil.getLocale(ResourceGeneratorUtil.java:543)
at com.google.gwt.resources.ext.ResourceGeneratorUtil.findResources(ResourceGeneratorUtil.java:435)
at com.google.gwt.resources.ext.ResourceGeneratorUtil.findResources(ResourceGeneratorUtil.java:290)
at com.google.gwt.resources.ext.ResourceGeneratorUtil.findResources(ResourceGeneratorUtil.java:254)
at com.google.gwt.resources.rg.CssResourceGenerator.getResources(CssResourceGenerator.java:564)
at com.google.gwt.resources.rg.CssResourceGenerator.prepare(CssResourceGenerator.java:506)
at com.google.gwt.resources.rebind.context.AbstractClientBundleGenerator.initAndPrepare(AbstractClientBundleGenerator.java:1043)
at com.google.gwt.resources.rebind.context.AbstractClientBundleGenerator.initAndPrepare(AbstractClientBundleGenerator.java:1069)
at com.google.gwt.resources.rebind.context.AbstractClientBundleGenerator.generateIncrementally(AbstractClientBundleGenerator.java:412)
at com.google.gwt.dev.javac.StandardGeneratorContext.runGeneratorIncrementally(StandardGeneratorContext.java:647)
at com.google.gwt.dev.cfg.RuleGenerateWith.realize(RuleGenerateWith.java:41)
at com.google.gwt.dev.shell.StandardRebindOracle$Rebinder.rebind(StandardRebindOracle.java:78)
at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:268)
at com.google.gwt.dev.shell.ShellModuleSpaceHost.rebind(ShellModuleSpaceHost.java:141)
at com.google.gwt.dev.shell.ModuleSpace.rebind(ModuleSpace.java:585)
at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:455)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
at com.google.gwt.core.client.GWT.create(GWT.java:97)
at com.allen_sauer.gwt.dnd.client.util.DragClientBundle.&lt;clinit&gt;(DragClientBundle.java:72)
at com.allen_sauer.gwt.dnd.client.util.DragEntryPoint.onModuleLoad(DragEntryPoint.java:32)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Unknown Source) 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:22:08.747

我发现了问题。我的项目中缺少一些语言环境。我改变了我的 app.gwt.xml 并且它起作用了。我使用[这里](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale#LocaleModule)的文档来解决这个问题。

这是我的 app.gwt.xml 现在的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
 <module rename-to='minoscrossfit'>
  <inherits name='com.google.gwt.user.User'/>
  <inherits name="com.google.gwt.i18n.I18N"/>
  <extend-property name="locale" values="fr"/>
  <extend-property name="locale" values="fr_CA"/>
  <extend-property name="locale" values="en"/>
  <inherits name='com.google.gwt.user.theme.clean.Clean'/>                                     
  <inherits name='com.bradrydzewski.gwt.calendar.Calendar' />
  <inherits name='com.bradrydzewski.gwt.calendar.theme.google.Google' />
  <inherits name='com.allen_sauer.gwt.dnd.gwt-dnd'/>
  <entry-point class='com.afrsoftware.minoscrossfit.client.MinosCrossfit'/>
  <source path='client'/>
  <source path='shared'/>
 </module> 
```

eclipse 中的一个小项目->clean 似乎有助于解决我的问题。

我在更改 app.gwt.xml 后添加了一个类似的问题，这是因为我的团队中的某个人（可能是我）提交了一个不应该提交的文件（nocache.js），因此项目中使用了新的 jar不在此文件中。更改 app.gwt.xml 引发了应用程序的重新编译，并生成了一个新的 nocache.js 文件（包含来自 jar 的所有需要​​的函数）。

# c++ - 为什么 operator< 应该是非成员函数？

> ID：12047174
> 
> 赞同：0
> 
> 时间：2012-08-21T00:58:15.817
> 
> 标签：c++, operator-overloading

我记得`C++ Primer`告诉我们`operator<`应该这样做`non-member function`，而且我总是遵守规则。但现在我想知道原因。

我写了以下代码：

```
#include <iostream>
using std::cout;
using std::endl;

struct Point1
{
  int x, y;
  Point1(const int a, const int b): x(a), y(b) { }
};
inline bool operator<(const Point1& lhs, const Point1& rhs)
{
  return lhs.x < rhs.x || (lhs.x == rhs.x && lhs.y < rhs.y);
}

struct Point2
{
  int x, y;
  Point2(const int a, const int b): x(a), y(b) { }
  bool operator<(const Point2& rhs)
  {
    return x < rhs.x || (x == rhs.x && y < rhs.y);
  }
};

int main()
{
  Point1 a(1, 2), b(1, 3);
  cout << (a < b) << " " << (b < a) << endl;
  Point2 c(2, 3), d(2, 4);
  cout << (c < d) << " " << (d < c) << endl;
} 
```

在这种情况下，它们似乎没有什么区别，`member`功能似乎更简单。

但在这种情况下：

```
#include <iostream>
using std::cout;
using std::endl;

 // Usually I write it for comparing floats
class Float1
{
  long double _value;
public:
  static const long double EPS = 1e-8;
  Float1(const long double value): _value(value) { }
  const long double Get() const { return _value; }
};
inline bool operator<(const Float1& lhs, const Float1& rhs)
{
  return rhs.Get() - lhs.Get() > Float1::EPS;
}
inline bool operator<(const Float1& lhs, const long double rhs)
{
  return rhs - lhs.Get() > Float1::EPS;
}

class Float2
{
  long double _value;
public:
  static const long double EPS = 1e-8;
  Float2(const long double value): _value(value) { }
  const long double Get() const { return _value; }
  bool operator<(const Float2& rhs)
  {
    return rhs._value - _value > Float2::EPS;
  }
  bool operator<(const long double rhs)
  {
    return rhs - _value > Float2::EPS;
  }
};

int main()
{
  Float1 x(3.14);
  Float2 y(2.17);
  long double zero = .0;
  cout << (x < zero) << " " << (zero < x) << endl;
  //cout << (y < zero) << " " << (zero < y) << endl; Compile Error!
} 
```

(x < zero) 和 (zero < x) 都有效！（`long double`转换为`Float`？）

但是 (zero < y) 不会，因为零不是 a `Float`。

您会看到，在第一种情况下，`member function`代码长度更少，而在第二种情况下，`non-member function`比较更容易。所以我想知道

*   在第一种情况下，我应该使用`member function`而不是`non-member function`？
*   为什么`C++ Primer`建议`binary operator`s be `non-member function`？
*   还有其他情况会`member function`有所作为`non-member function`吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T01:01:03.053

我认为基本答案是非成员函数在隐式转换中表现更好。因此，如果您可以将二元运算符编写为非成员函数，那么您应该这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T02:19:24.687

这个问题可以在不同的层次上回答。从设计的角度来看，最高级别`operator<`是二元运算符。它在右侧不再是左侧的操作。另一方面，成员函数绑定到第一个参数，它们是*对*第一种类型的操作。

从技术的角度来看，直接使用 C++ 语言，这归结为您已经注意到的：成员函数在类型方面不是对称的。缺乏对称性意味着`operator<`声明为成员函数只能在左侧*属于*包含该成员的类型时应用。在调用成员运算符之前不能应用任何转换。另一方面，因为自由函数与第一个参数的绑定并不比第二个参数更多，所以只要两个参数中的*任何*`operator<`一个属于适当的类型，自由函数就会被 ADL 拾取，从而允许对第一个参数进行相同的转换。第一个和第二个参数。

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T01:01:27.607

作为非成员，比较运算符也适用于派生类（左侧）参数。

* * *

*编辑*：正如@jonathan 在评论中指出的那样，它还允许值转换，例如`int`左侧参数。

如果构造函数和转换运算符 not `explicit`，则此类转换可能允许无意义且可能是非预期代码，例如将`T`实例与 5 进行比较。*

# .net - 超时后如何取消异步 WebApi 操作？

> ID：12047176
> 
> 赞同：3
> 
> 时间：2012-08-21T00:59:02.023
> 
> 标签：.net, asp.net-web-api, .net-4.5, async-await, asp.net-4.5

使用 ASP.Net WebAPI，我有一个具有类似于以下异步操作的控制器：

```
[HttpPost]
public async Task<string> DoSomething(string foo)
{
  var result = await MyAsynchronousTask(foo);
  return result;
} 
```

这个控制器做什么并不重要。重要的是它正在等待使用新的 .net 4.5 async/await 支持的异步任务。

**问题：**如何告诉它在指定的持续时间后超时？我不一定要取消任务，我只是想防止调用者永远挂断。（虽然，我有兴趣从这两种方式看到它。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T01:05:06.180

我在 LINQPad 中使用“C# 程序”选项制作了一个版本 - 它编译并运行时输出 2 行，显示超时和成功案例：

> 00:00:05 的超时已过期
> 
> 成功得到 foo 的结果

这是片段：

```
void Main()
{
    CallGetStringWithTimeout(TimeSpan.FromSeconds(5), TimeSpan.FromSeconds(10)).Wait();
    CallGetStringWithTimeout(TimeSpan.FromSeconds(5), TimeSpan.FromSeconds(0)).Wait();
}

public async Task CallGetStringWithTimeout(TimeSpan callTimeout, TimeSpan callAddedDelay)
{
    var myTask = GetStringAsync(callAddedDelay);
    await Task.WhenAny(Task.Delay(callTimeout), myTask);
    if (myTask.Status == TaskStatus.RanToCompletion)
    {
        Console.WriteLine ("Successfully got result of {0}", await myTask);
    }
    else
    {
        Console.WriteLine ("Timeout of {0} expired", callTimeout);
    }
}

public async Task<string> GetStringAsync(TimeSpan addedDelay)
{
    await Task.Delay(addedDelay);
    return "foo";
} 
```

但是，“正常”方式是使用[CancellationTokenSource](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.aspx)并将超时指定为[ctor param](http://msdn.microsoft.com/en-us/library/hh139229.aspx)。如果你已经有一个 CancellationTokenSource，你可以调用它[的 CancelAfter 方法](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.cancelafter.aspx)，它会在指定的超时时间内安排取消。

# windows - DOS 批处理文件和变量扩展

> ID：12047177
> 
> 赞同：1
> 
> 时间：2012-08-21T00:59:16.657
> 
> 标签：windows, batch-file

我需要编写一个 DOS 批处理文件，它在概念上是这样做的：

```
SETLOCAL ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION
SET TARGET=c:\Temp\directory name with spaces\
FOR %%C IN (A B C D ) DO (
   copy "Setups\%%C\Release\%%C%Setup.msi"  "%%TARGET%\%%C"
   echo Similar commands ...
) 
```

例如，在哪里，

> Setups\A\Release\ASetup.msi 将被复制到 c:\temp\directory name with spaces\A\ASetup.msi

我遇到的问题是命令处理器非常反直觉地解析它并且不会产生预期的（甚至是有用的）结果。这可能在单个命令文件中吗？

（我可以使用辅助批处理文件来做到这一点 - 但这似乎不优雅）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:07:13.027

`call copy "Setups\%%C\Release\%%CSetup.msi" "%TARGET%\%%CSetup.msi"`

1.  你有一个杂散的百分比登录`%%C%Setup.msi`

2.  然后是双倍的百分比`%%TARGET%`——你只需要一个。

3.  您在目标文件名的末尾缺少 Setup.msi。

注意：我也习惯性地使用了 call，尽管在这个例子中你并不严格需要它。

# opengl-es - Opengl 使用屏幕坐标渲染纹理

> ID：12047178
> 
> 赞同：0
> 
> 时间：2012-08-21T00:59:29.237
> 
> 标签：opengl-es

我想移动一个设置屏幕坐标的纹理，如 270,320 。现在我像这样渲染纹理设置opengl坐标（0到1）：

```
private final float[] mVerticesData =
        { 
            -1f, 1f, 0.0f, // Position 0
            0.0f, 1.0f, // TexCoord 0
            -1f, -1f, 0.0f, // Position 1
            0.0f, 0.0f, // TexCoord 1
            1f, -1f, 0.0f, // Position 2
            1.0f, 0.0f, // TexCoord 2
            1f, 1f, 0.0f, // Position 3
            1.0f, 1.0f // TexCoord 3
        };
mVertices = ByteBuffer.allocateDirect(mVerticesData.length * 4)
                    .order(ByteOrder.nativeOrder()).asFloatBuffer();
            mVertices.put(mVerticesData).position(0); 
```

并使用以下代码进行渲染。我没有设置任何矩阵或任何东西......

```
// Set the viewport
        GLES20.glViewport(0, 0, SimpleTexture2D.screenSize.x, finalHeight);

    //GLES20.glViewport(0, 0, mWidth, mHeight);

    // Clear the color buffer
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    if(useProgram2 == true)
    // Use the program object
    GLES20.glUseProgram(mProgramObject2);
    else
        GLES20.glUseProgram(currentFilter.mProgramObject);

    // Load the vertex position
    mVertices.position(0);
    GLES20.glVertexAttribPointer ( mPositionLoc, 3, GLES20.GL_FLOAT, 
                                   false, 
                                   5 * 4, mVertices );

    // Load the texture coordinate
    mVertices.position(3);
    GLES20.glVertexAttribPointer ( mTexCoordLoc, 2, GLES20.GL_FLOAT,
                                   false, 
                                   5 * 4, 
                                   mVertices );

 // Load the texture coordinate
//        mVertices.position(3);
//        GLES20.glVertexAttribPointer ( mTexCoordLoc2, 2, GLES20.GL_FLOAT,
//                                       false, 
//                                       5 * 4, 
//                                       mVertices );

        GLES20.glEnableVertexAttribArray ( mPositionLoc );
        GLES20.glEnableVertexAttribArray ( mTexCoordLoc );

    // Bind the texture
    //GLES20.glActiveTexture ( GLES20.GL_TEXTURE0 );

    //if(drawOld == true)

        GLES20.glActiveTexture ( GLES20.GL_TEXTURE0 );
        GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, mTextureId);

        GLES20.glUniform1i ( mTextureIdLoc, 0 );

    currentFilter.onDrawFrame();

    // Set the color matrix uniform unit to 1

    GLES20.glDrawElements ( GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, mIndices ); 
```

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:11:55.477

您可能正在寻找 glOrthof(.0, .0, screenWidt, screenHeight...) 而不是视口。视口通常设置为绘制整个缓冲区，并设置为从 0 到缓冲区尺寸。另一方面，“Ortho”将告诉您要渲染到的视图边界的坐标。

# java - java 正则表达式检测\n

> ID：12047179
> 
> 赞同：2
> 
> 时间：2012-08-21T00:59:31.857
> 
> 标签：java, regex, latex, newline, replaceall

我正在尝试删除字符串中的 LaTeX 注释：

输入字符串：

> \begin{comment}inside \n comment 1 \end{comment} 评论外的东西 \begin{comment} inside comment 2 \end{comment} 在评论 2 之后

输出：

> \begin{comment}inside comment 1 \end{comment} 在评论 2 之后的一些外部评论

理想的输出：

```
something outside comments after comment 2 
```

示例代码：

```
public static void main(String[] args) {
    String input = "\\begin{comment}inside \n comment 1  \\end{comment}  something outside comments \\begin{comment} inside comment 2\\end{comment} after comment 2";
    System.out.println(input.replaceAll("\\\\begin\\{comment\\}(.*|[\\s]*|\\n*)\\\\end\\{comment\\}", ""));
    } 
```

所以问题是这个正则表达式没有检测到`\n`.

我使用以下链接来形成正则表达式：

[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T01:02:22.977

`Pattern`使用该选项编译您的[`Pattern.DOTALL`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)，或者将等效的标志表达式添加`(?s)`到您的正则表达式中，以便`.`匹配`\n`. 另外，您的正则表达式似乎不起作用，请尝试以下操作：

```
System.out.println(input.replaceAll("(?s)\\\\begin\\{comment\\}.*?\\\\end\\{comment\\}", "")); 
```

# vb.net - vb.net my.settings arraylist 不是对象的实例

> ID：12047181
> 
> 赞同：1
> 
> 时间：2012-08-21T01:00:06.563
> 
> 标签：vb.net, arraylist

```
If My.Settings.Sup1 Is Nothing Then
        My.Settings.Sup1 = New Collections.ArrayList
        My.Settings.Sup1.Add(0)' array index can't be negative or less than 0
        My.Settings.Sup1.Add(0)
        My.Settings.Sup1.Add(0)
        My.Settings.Sup1.Add(0)
    End If 
```

为什么我什至会在注释行中得到这个异常，上面的代码有什么问题吗

我尝试插入并为当前索引分配一个值，但我仍然收到异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:49:08.223

我在项目属性 → 类型的设置选项卡上添加了一个用户设置`System.Collections.ArrayList`，它按预期工作。不确定你的问题是什么你的代码看起来不错，我会仔细检查你的`Type`并确保它是正确的。

![在此处输入图像描述](../Images/a74ec36ba44af26c426b50372a252b0f.png)

* * *

![在此处输入图像描述](../Images/40d6967c477081f67c06c52949b7bf46.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:16:37.070

在 WPF 项目中运行它。我无法弄清楚你是如何在我的应用程序设置下获得一个数组列表的，所以我使用了 System.Collection.Specialized.StringCollection。[鼠标右键]“我的项目”，转到设置，并在那里添加 Sup1 作为 System.Collection.Specialized.StringCollection。将值留空。

在调试器中，它可以很好地遍历下面的所有行，没有例外。

```
 Public Sub New()
    'assuming sup1 is supposed to be an System.Collection.Specialized.StringCollection as set in Project Properties
            If My.Settings.Sup1 Is Nothing Then
                ' -- replaced w string collection -- My.Settings.Sup1 = New Collections.ArrayList
                My.Settings.Sup1 = New System.Collections.Specialized.StringCollection
                My.Settings.Sup1.Add(0) ' array index can't be negative or less than 0
                My.Settings.Sup1.Add(0)
                My.Settings.Sup1.Add(0)
                My.Settings.Sup1.Add(0)
            End If
    End Sub 
```

# java - 消息框不会停止出现

> ID：12047182
> 
> 赞同：5
> 
> 时间：2012-08-21T01:00:08.607
> 
> 标签：java, swing, graphics2d, paintcomponent

老实说，我不确定标题是否完全符合问题，但无论如何。我正在用java制作一个简单的游戏，外星飞船从屏幕顶部掉下来，如果你不杀死它们并且它们到达屏幕底部，空间站就会受到伤害。但是每当空间站被摧毁时，应该告诉玩家他们死了的消息框不会停止出现，它只会一遍又一遍地弹出。在控制台中，我收到一条不会停止变大的错误消息！这是我对空间站健康的代码：

```
public class SpaceStation extends Entity {
public static int stationHealth = 100;

public SpaceStation(int x, int y) {
    super(x, y);
}

public void update() {
}

public void draw(Graphics2D g2d) {
    g2d.drawImage(ImageLocator.getSpaceStation(), 0, 595, null);

    // HEALTH BAR
    g2d.fillRect(5, 25, stationHealth, 10);

    if(stationHealth <= 0) {
        try{
            JOptionPane.showMessageDialog(null, "You died on level "
                    + GameFrame.level + ". Better luck next time!");
            GameFrame.mainTimer.stop();
            System.exit(0);
        }
        catch(Exception e){
            JOptionPane.showMessageDialog(null, e.getMessage());
            System.exit(0);
        } 
    }
}

public Rectangle getBounds() {
    return new Rectangle(x, y, 600, 200);
} 
```

}

显然错误所在的行是 JOptionPane.showMessageDialog(null, "You dead on level " 这是错误消息：

```
at java.lang.Thread.run(Unknown Source)
Exception in thread "AWT-EventQueue-0" java.lang.InternalError: The current process has         used all of its system allowance of handles for Window Manager objects.

at sun.awt.windows.WToolkit.eventLoop(Native Method)
at sun.awt.windows.WToolkit.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Exception in thread "AWT-EventQueue-0" java.lang.InternalError: The current process has used all of its system allowance of handles for Window Manager objects. 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T01:38:45.437

不要从paint方法中打开对话框！或者也许更具体的领域，不要在可能从另一个类的paint方法调用的方法中这样做，如`draw(Graphics2D)`建议的那样。

我只能假设您的代码有一个调用的计时器`repaint()`，这反过来可能会导致调用`paint(Graphics)`or `paintComponent(Graphics)`。但是，每当 JRE 知道组件可能有一个元素出现在顶部时，这也由 JRE 自己完成，..like a `JOptionPane`. 因此“无限循环”。

# javascript - 在 for 循环内使用 for 循环

> ID：12047183
> 
> 赞同：0
> 
> 时间：2012-08-21T01:00:22.433
> 
> 标签：javascript, arrays, loops

我正在为 proboards.com 编写代码。该代码将用于为类别提供单独的样式。

在数组中： `catEdit[0]`是类别名称， `catEdit[1]`是用户希望为该类别提供的 id，以便他们可以使用 CSS 对其应用样式。

在下面的脚本中，我首先遍历了数组，然后遍历了用户论坛上的类别，陈述了一个论点，并基于该论点给了类别一个 id。

有什么不对劲。有人可以告诉我我做错了什么吗？

先感谢您。

```
<script type= "text/javascript">
//Individual Category Styles
var catEdit=[
   ["General", "general"],
   ["Tester", "tester"],
   ["New Category", "newcat"]
];

var td= document.getElementsByTagName("td"),i;
  for(i=0; i<catEdit.length;i++){
    for(i=0; i<td.length;i++){
      if(td[i].className== "catbg" && td[i].innerHTML.match(catEdit[i][0])) {
        td[i].id=catEdit[i][1]
      }
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T01:02:28.873

您绝对不应将`i`其用作两个循环的循环变量。考虑为内部循环使用不同的变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T01:03:51.523

您的两个循环都具有相同的索引变量 ，`i`这根本无法正常工作。考虑使用`i`and`j`作为循环的索引变量：

```
for (var i = 0; i < catEdit.length; i++) {
  for (var j = 0; j < td.length; j++) {
    ... 
```

# rtmp - Vbulletin 自定义 BBcode、Flowplayer 和 RTMP

> ID：12047187
> 
> 赞同：0
> 
> 时间：2012-08-21T01:01:13.920
> 
> 标签：rtmp, flowplayer, vbulletin

我正在尝试将 flowplayer 嵌入到我的客户 vbulletin 论坛中，并在 s3 存储桶中成功处理了基本视频，但在尝试实现 rtmp 时遇到了麻烦。我已经设置好分发，并且可以流式传输到 vbulletin 之外的纯 html 页面，但我试图编写自定义 bbcode 以嵌入帖子中遇到了困难。

我的基本嵌入代码在我的自定义 bbcode 中看起来像这样......

```
<object id="flowplayer" width="624" height="352" data="http://www.MY_DOMAIN.com/forums /flowplayer/flowplayer-3.2.14.swf" type="application/x-shockwave-flash">  
<param name="movie" value="http://www.MY_DOMAIN.com/forums/flowplayer/flowplayer-3.2.14.swf" />  
<param name="allowfullscreen" value="true" />  
<param name="allowscriptaccess" value="always" /> 
<param name="quality" value="autohigh" />  
<param name="flashvars" value='config={"clip":{"autoPlay":false,"accelerated":true,"url":"{param}"}}' />  
</object> 
```

我的工作 rmtp 流看起来像这样......

```
<HTML>
<HEAD>
<TITLE>
Streaming Video with Flowplayer
</TITLE>
</HEAD>
<BODY>
<H1>HSL501 Observation Video</H1>
<script type="text/javascript" src="http://www.MY_DOMAIN.com/forums/flowplayer/flowplayer-3.2.11.min.js"></script>
<div id="page">
<div id="rtmpPlayer" style="display:block;width:1000px;height:500px;"></div>
<script language="javascript">
// our custom configuration is given in third argument
flowplayer("rtmpPlayer", "http://www.MY_DOMAIN.com/forums/flowplayer/flowplayer-3.2.14.swf",{
plugins: {
  rtmp: {
    url: 'http://www.MY_DOMAIN.com/forums/flowplayer/flowplayer.rtmp-3.2.11.swf',
    netConnectionUrl: 'rtmp://XXXX.cloudfront.net/cfx/st'
  }
},
clip: {
  url: 'mp4:entries%207.mp4'',
  provider: 'rtmp'
}
});
</script>
</div>
</html> 
```

任何帮助将非常感激

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:09:24.063

Finally figured it out and hopefully this will help somebody else and save them having to search for hours like I did.

```
<object width="656" height="420" data="http://www.MY_DOMAIN.com/forums/flowplayer/flowplayer-3.2.14.swf" type="application/x-shockwave-flash">
<param name="movie" value="http://www.MY_DOMAIN.com/forums/flowplayer/flowplayer-3.2.14.swf" />
<param name="allowfullscreen" value="true" />
<param name="allowscriptaccess" value="always" /><param name="flashvars" value='config={"clip":{"url":"mp4:{param}","bufferLength":1,"provider":"dtfl"},"plugins":{"dtfl":{"url":"http://www.MY_DOMAIN.com/forums/flowplayer/flowplayer.rtmp-3.2.11.swf","netConnectionUrl":"rtmp://XXXXX.cloudfront.net/cfx/st"},"controls":{"backgroundGradient":[0.1,0.3,0,0,0],"bufferGradient":"none","sliderColor":"#272727","backgroundColor":"#000","sliderGradient":"small","buttonOverColor":"#272727","borderRadius":"0px","buttonColor":"#565656","timeColor":"#CCCCCC","progressColor":"#565656","durationColor":"#ffffff","bufferColor":"#CCCCCC","progressGradient":"medium","opacity":1}}}' />
</object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:19:08.393

Steve，在 Clip --> url 中，您提供的是 My_Domain，而它应该是 S3 中存在的文件的 URI。让我确切地知道当您加载页面和播放视频时发生了什么，因为我们在使其工作时也遇到了问题，但在经过几次修复后终于做到了。

# python - 如何将 SQL 查询结果转换为 PANDAS 数据结构？

> ID：12047193
> 
> 赞同：149
> 
> 时间：2012-08-21T01:02:02.380
> 
> 标签：python, mysql, data-structures, pandas

对此问题的任何帮助将不胜感激。

所以基本上我想对我的 SQL 数据库运行一个查询，并将返回的数据存储为 Pandas 数据结构。

我附上了查询代码。

我正在阅读关于 Pandas 的文档，但我无法识别查询的返回类型。

我试图打印查询结果，但它没有提供任何有用的信息。

谢谢！！！！

```
from sqlalchemy import create_engine

engine2 = create_engine('mysql://THE DATABASE I AM ACCESSING')
connection2 = engine2.connect()
dataid = 1022
resoverall = connection2.execute("
    SELECT 
       sum(BLABLA) AS BLA,
       sum(BLABLABLA2) AS BLABLABLA2,
       sum(SOME_INT) AS SOME_INT,
       sum(SOME_INT2) AS SOME_INT2,
       100*sum(SOME_INT2)/sum(SOME_INT) AS ctr,
       sum(SOME_INT2)/sum(SOME_INT) AS cpc
    FROM daily_report_cooked
    WHERE campaign_id = '%s'",
    %dataid
) 
```

所以我有点想了解我的变量“resoverall”的格式/数据类型是什么，以及如何将它与 PANDAS 数据结构一起使用。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-08-21T18:28:30.690

这是完成这项工作的最短代码：

```
from pandas import DataFrame
df = DataFrame(resoverall.fetchall())
df.columns = resoverall.keys() 
```

您可以像 Paul 的回答那样去花哨地解析类型。

* * *

## 回答 #2

> 赞同：160
> 
> 时间：2013-01-23T19:38:02.580

**编辑：2015 年 3 月**

如下所述，pandas 现在使用[SQLAlchemy](http://www.sqlalchemy.org/)从 ( [read_sql](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_sql.html) ) 读取和插入 ( [to_sql](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html) ) 数据库。以下应该工作

```
import pandas as pd

df = pd.read_sql(sql, cnxn) 
```

**上一个答案：通过来自**[类似问题](https://stackoverflow.com/a/13570851/386279) 的 mikebmassey

```
import pyodbc
import pandas.io.sql as psql

cnxn = pyodbc.connect(connection_info) 
cursor = cnxn.cursor()
sql = "SELECT * FROM TABLE"

df = psql.frame_query(sql, cnxn)
cnxn.close() 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2013-09-26T14:56:11.163

如果您使用 SQLAlchemy 的 ORM 而不是表达式语言，您可能会发现自己想要将类型对象转换为`sqlalchemy.orm.query.Query`Pandas 数据框。

最干净的方法是从查询的statement属性中获取生成的SQL，然后用pandas的`read_sql()`方法执行。例如，从一个名为 Query 的对象开始`query`：

```
df = pd.read_sql(query.statement, query.session.bind) 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-08-21T14:20:22.593

### 编辑 2014-09-30：

pandas 现在有了一个`read_sql`功能。你肯定想用它来代替。

### 原答案：

我无法帮助您使用 SQLAlchemy——我总是根据需要使用 pyodbc、MySQLdb 或 Psychopg2。但是这样做时，像下面这样简单的功能往往会满足我的需求：

```
import decimal

import pyodbc #just corrected a typo here
import numpy as np
import pandas

cnn, cur = myConnectToDBfunction()
cmd = "SELECT * FROM myTable"
cur.execute(cmd)
dataframe = __processCursor(cur, dataframe=True)

def __processCursor(cur, dataframe=False, index=None):
    '''
    Processes a database cursor with data on it into either
    a structured numpy array or a pandas dataframe.

    input:
    cur - a pyodbc cursor that has just received data
    dataframe - bool. if false, a numpy record array is returned
                if true, return a pandas dataframe
    index - list of column(s) to use as index in a pandas dataframe
    '''
    datatypes = []
    colinfo = cur.description
    for col in colinfo:
        if col[1] == unicode:
            datatypes.append((col[0], 'U%d' % col[3]))
        elif col[1] == str:
            datatypes.append((col[0], 'S%d' % col[3]))
        elif col[1] in [float, decimal.Decimal]:
            datatypes.append((col[0], 'f4'))
        elif col[1] == datetime.datetime:
            datatypes.append((col[0], 'O4'))
        elif col[1] == int:
            datatypes.append((col[0], 'i4'))

    data = []
    for row in cur:
        data.append(tuple(row))

    array = np.array(data, dtype=datatypes)
    if dataframe:
        output = pandas.DataFrame.from_records(array)

        if index is not None:
            output = output.set_index(index)

    else:
        output = array

    return output 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2017-09-06T09:06:28.973

# MySQL 连接器

对于那些使用 mysql 连接器的人，您可以使用此代码作为开始。（感谢@Daniel Velkov）

使用的参考：

*   [使用连接器/Python 查询数据](https://dev.mysql.com/doc/connector-python/en/connector-python-example-cursor-select.html)
*   [使用 Python 连接到 MYSQL 只需 3 个步骤](https://stackoverflow.com/questions/372885/how-do-i-connect-to-a-mysql-database-in-python)

* * *

```
import pandas as pd
import mysql.connector

# Setup MySQL connection
db = mysql.connector.connect(
    host="<IP>",              # your host, usually localhost
    user="<USER>",            # your username
    password="<PASS>",        # your password
    database="<DATABASE>"     # name of the data base
)   

# You must create a Cursor object. It will let you execute all the queries you need
cur = db.cursor()

# Use all the SQL you like
cur.execute("SELECT * FROM <TABLE>")

# Put it all to a data frame
sql_data = pd.DataFrame(cur.fetchall())
sql_data.columns = cur.column_names

# Close the session
db.close()

# Show the data
print(sql_data.head()) 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2019-06-14T04:06:01.387

# 1\. 使用 MySQL-connector-python

```
# pip install mysql-connector-python

import mysql.connector
import pandas as pd

mydb = mysql.connector.connect(
    host = 'host',
    user = 'username',
    passwd = 'pass',
    database = 'db_name'
)
query = 'select * from table_name'
df = pd.read_sql(query, con = mydb)
print(df) 
```

# 2\. 使用 SQLAlchemy

```
# pip install pymysql
# pip install sqlalchemy

import pandas as pd
import sqlalchemy

engine = sqlalchemy.create_engine('mysql+pymysql://username:password@localhost:3306/db_name')

query = '''
select * from table_name
'''
df = pd.read_sql_query(query, engine)
print(df) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-12-06T16:01:00.937

这是我使用的代码。希望这可以帮助。

```
import pandas as pd
from sqlalchemy import create_engine

def getData():
  # Parameters
  ServerName = "my_server"
  Database = "my_db"
  UserPwd = "user:pwd"
  Driver = "driver=SQL Server Native Client 11.0"

  # Create the connection
  engine = create_engine('mssql+pyodbc://' + UserPwd + '@' + ServerName + '/' + Database + "?" + Driver)

  sql = "select * from mytable"
  df = pd.read_sql(sql, engine)
  return df

df2 = getData()
print(df2) 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2018-07-12T14:55:47.953

这是对您的问题的简短而清晰的答案：

```
from __future__ import print_function
import MySQLdb
import numpy as np
import pandas as pd
import xlrd

# Connecting to MySQL Database
connection = MySQLdb.connect(
             host="hostname",
             port=0000,
             user="userID",
             passwd="password",
             db="table_documents",
             charset='utf8'
           )
print(connection)
#getting data from database into a dataframe
sql_for_df = 'select * from tabledata'
df_from_database = pd.read_sql(sql_for_df , connection) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-09-30T19:42:03.630

像 Nathan 一样，我经常想将 sqlalchemy 或 sqlsoup 查询的结果转储到 Pandas 数据框中。我自己的解决方案是：

```
query = session.query(tbl.Field1, tbl.Field2)
DataFrame(query.all(), columns=[column['name'] for column in query.column_descriptions]) 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-08-21T12:36:18.620

`resoverall`是一个 sqlalchemy ResultProxy 对象。您可以在[sqlalchemy 文档](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html?highlight=execute%20examples#basic-usage)中阅读更多相关信息，后者解释了使用引擎和连接的基本用法。这里重要的是，`resoverall`就像 dict 一样。

Pandas 喜欢 dict 之类的对象来创建其数据结构，请参阅[在线文档](http://pandas.pydata.org/pandas-docs/stable/)

祝 sqlalchemy 和 pandas 好运。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-08-16T15:59:21.740

简单地使用`pandas`和`pyodbc`一起。您必须`connstr`根据您的数据库规范修改您的连接字符串 ( )。

```
import pyodbc
import pandas as pd

# MSSQL Connection String Example
connstr = "Server=myServerAddress;Database=myDB;User Id=myUsername;Password=myPass;"

# Query Database and Create DataFrame Using Results
df = pd.read_sql("select * from myTable", pyodbc.connect(connstr)) 
```

我用过`pyodbc`几个企业数据库（例如 SQL Server、MySQL、MariaDB、IBM）。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-07-31T18:55:22.767

这个问题很老，但我想加上我的两分钱。我将问题读作“我想对我的 [my]SQL 数据库运行查询并将返回的数据存储为 Pandas 数据结构 [DataFrame]。”

从代码看来，您的意思是 mysql 数据库，并假设您的意思是 pandas DataFrame。

```
import MySQLdb as mdb
import pandas.io.sql as sql
from pandas import *

conn = mdb.connect('<server>','<user>','<pass>','<db>');
df = sql.read_frame('<query>', conn) 
```

例如，

```
conn = mdb.connect('localhost','myname','mypass','testdb');
df = sql.read_frame('select * from testTable', conn) 
```

这会将 testTable 的所有行导入 DataFrame。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-07-21T17:23:19.303

上一篇文章已经很久了，但也许它可以帮助某人......

比 Paul H 短：

```
my_dic = session.query(query.all())
my_df = pandas.DataFrame.from_dict(my_dic) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-06-05T15:57:02.833

这是我的。以防万一您使用的是“pymysql”：

```
import pymysql
from pandas import DataFrame

host   = 'localhost'
port   = 3306
user   = 'yourUserName'
passwd = 'yourPassword'
db     = 'yourDatabase'

cnx    = pymysql.connect(host=host, port=port, user=user, passwd=passwd, db=db)
cur    = cnx.cursor()

query  = """ SELECT * FROM yourTable LIMIT 10"""
cur.execute(query)

field_names = [i[0] for i in cur.description]
get_data = [xx for xx in cur]

cur.close()
cnx.close()

df = DataFrame(get_data)
df.columns = field_names 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-07-26T03:22:38.577

pandas.io.sql.write_frame 已弃用。 [https://pandas.pydata.org/pandas-docs/version/0.15.2/generated/pandas.io.sql.write_frame.html](https://pandas.pydata.org/pandas-docs/version/0.15.2/generated/pandas.io.sql.write_frame.html)

应该改为使用 pandas.DataFrame.to_sql [https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html)

还有另一种解决方案。 [PYODBC 到 Pandas - DataFrame 不起作用 - 传递值的形状是（x，y），索引暗示（w，z）](https://stackoverflow.com/questions/20055257/pyodbc-to-pandas-dataframe-not-working-shape-of-passed-values-is-x-y-indi)

从 Pandas 0.12 开始（我相信）你可以这样做：

```
import pandas
import pyodbc

sql = 'select * from table'
cnn = pyodbc.connect(...)

data = pandas.read_sql(sql, cnn) 
```

在 0.12 之前，您可以执行以下操作：

```
import pandas
from pandas.io.sql import read_frame
import pyodbc

sql = 'select * from table'
cnn = pyodbc.connect(...)

data = read_frame(sql, cnn) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-09T08:26:28.880

我这样做的最好方法

```
db.execute(query) where db=db_class() #database class
    mydata=[x for x in db.fetchall()]
    df=pd.DataFrame(data=mydata) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-14T06:43:07.713

如果结果类型是**ResultSet**，则应先将其转换为字典。然后会自动收集**DataFrame 列。**

这适用于我的情况：

```
df = pd.DataFrame([dict(r) for r in resoverall]) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-02-12T20:34:38.923

这是我喜欢的一个简单的解决方案：

将您的数据库连接信息放在一个安全位置的 YAML 文件中（不要在代码仓库中对其进行版本化）。

```
---
host: 'hostname'
port: port_number_integer
database: 'databasename'
user: 'username'
password: 'password' 
```

然后在字典中加载 conf，打开 db 连接并在数据框中加载 SQL 查询的结果集：

```
import yaml
import pymysql
import pandas as pd

db_conf_path = '/path/to/db-conf.yaml'

# Load DB conf
with open(db_conf_path) as db_conf_file:
    db_conf = yaml.safe_load(db_conf_file)

# Connect to the DB
db_connection = pymysql.connect(**db_conf)

# Load the data into a DF
query = '''
SELECT *
FROM my_table
LIMIT 10
'''

df = pd.read_sql(query, con=db_connection) 
```

# google-app-engine - 在自定义域上托管 appengine 应用程序是否会迫使我成为 Google Apps 客户？

> ID：12047196
> 
> 赞同：0
> 
> 时间：2012-08-21T01:02:59.263
> 
> 标签：google-app-engine

*   我有一个我购买的域名（通过 godaddy.com）——我们称之为 xyz.com
*   我有一个 gae 应用程序 - 我们称之为 xyzweb.appspot.com
*   我在 godaddy dns 管理控制台添加了一个屏蔽重定向，现在 xyz.com 被重定向到 xyzweb.appspot.com（即使地址栏显示 xyz.com）

这在某些情况下无法正常工作，例如当我提供直接 url 重定向（如 href='/static/url/tohelppage.html' 或当我尝试重定向 OAuth 授权时）。所以我阅读了其他关于我需要做什么的帖子，其中提到最多的是[https://developers.google.com/appengine/docs/domain](https://developers.google.com/appengine/docs/domain)。

根据该页面，似乎有必要使用新域名注册一个新的 Google Apps 帐户？

*   因此，除了为 Google AppEngine 支付的费用外，我还必须单独为 Google Apps 支付费用吗？
*   并且还管理一个单独的应用程序域及其服务？我已经有谷歌应用程序域，这似乎在 gae 上运行一个小应用程序的开销更大。

如果我理解这一点，你能帮我理解吗？如果有办法避免额外的谷歌应用程序帐户的额外开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:11:25.660

我这样做的方式是设置一个基本的 google 应用程序帐户（免费），并将 GAE 应用程序链接到我的 google 应用程序帐户。然后您可以将 google 应用程序设置为 appengine 应用程序的别名“www”，现在您的 appengine 应用程序可以在 www.yourdomain.tld 上运行

[这里](https://developers.google.com/appengine/docs/domain)有更多解释，我知道你已经看过了，但它解释得很好。试着再读一遍。

# ruby-on-rails - PostageApp 是否支持标准 ActionMailer 模板？

> ID：12047204
> 
> 赞同：1
> 
> 时间：2012-08-21T01:03:53.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, postageapp

我以前有一个测试邮件工作（基于 RailsGuides 教程）。当我集成 PostageApp gem 并从 PostageApp 继承时，我得到了这个：

```
@message="Message layout Provided Message Template is not found., Content can't be blank" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:01:30.423

似乎您没有发送任何内容。由于某种原因，您还指定了`postageapp_template`PostageApp 项目中不存在的一个。

试着弄清楚到底发送了什么。在你的测试中（你有测试，对吧？）有这样的东西：

```
email = ActionMailer::Base.deliveries.last
raise email.arguments_to_send.to_yaml 
```

您将看到实际的有效载荷。这应该让您很好地了解缺少的内容。

# c# - 如何比较两个十六进制数

> ID：12047210
> 
> 赞同：3
> 
> 时间：2012-08-21T01:05:39.143
> 
> 标签：c#, .net, string, hex, compare

比较两个十六进制数字（即字符串）的最佳方法是什么？例如，

```
string a = "3F";
string b = "32";

if (a > b)
   MessageBox.Show("a is greater"); 
```

应该管用。（假设 > 已正确重载）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T01:09:05.407

您始终可以将它们转换为整数并以这种方式进行比较：

```
int a = int.Parse("3E", System.Globalization.NumberStyles.HexNumber);
int b = int.Parse("32", System.Globalization.NumberStyles.HexNumber);

if (a > b)
    MessageBox.Show("a is greater"); 
```

似乎更安全:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T01:07:15.523

将它们转换为整数并比较整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T16:47:10.177

还有一个基于字符串比较的简单算法：假设您的数字具有独特的格式：总是小写或大写字母。是否前导 0x，没有前导零。然后你可以这样做：如果数字 a 的位数比数字 b 多： a > b

如果位数相等，您可以使用 String.Compare。

该算法的优点是不限于 32 位或 64 位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T13:32:52.693

这是亨德里克建议的一个相当强大的实现。如果您的输入字符串具有已知属性，则可以通过多种方式对其进行优化，但它应该能够比较任何大小和/或混合格式的有效十六进制字符串。

```
public int HexStringCompare(string value1, string value2)
{
    string InvalidHexExp = @"[^\dabcdef]";
    string HexPaddingExp = @"^(0x)?0*";
    //Remove whitespace, "0x" prefix if present, and leading zeros.  
    //Also make all characters lower case.
    string Value1 = Regex.Replace(value1.Trim().ToLower(), HexPaddingExp, "");
    string Value2 = Regex.Replace(value2.Trim().ToLower(), HexPaddingExp, "");

    //validate that values contain only hex characters
    if (Regex.IsMatch(Value1, InvalidHexExp))
    {
        throw new ArgumentOutOfRangeException("Value1 is not a hex string");
    }
    if (Regex.IsMatch(Value2, InvalidHexExp))
    {
        throw new ArgumentOutOfRangeException("Value2 is not a hex string");
    }

    int Result = Value1.Length.CompareTo(Value2.Length);
    if (Result == 0)
    {
        Result = Value1.CompareTo(Value2);
    }

    return Result;
} 
```

用它来回答OP的问题：

```
if (HexStringCompare(a, b) > 0)
   MessageBox.Show("a is greater"); 
```

# java - DataOutputStream 出错

> ID：12047212
> 
> 赞同：0
> 
> 时间：2012-08-21T01:05:43.833
> 
> 标签：java, sql-server, swing, user-interface, serversocket

我不断收到 NullPointerException，我不知道为什么。该类应该做的是将我在 jtextfield 中写入的任何内容作为 writeUTF 发送，但我不断收到 NullPointerException

```
dos = new DataOutputStream(socket.getOutputStream()); 
```

图形用户界面代码：

```
public class GUI {

private JFrame frame = new JFrame("Dryck & Ingrediens"); // GUI
private JTextField jtf = new JTextField();// GUI
private JTextArea jl1 = new JTextArea();// GUI
private JList jl = new JList();// GUI
private JScrollPane js = new JScrollPane(jl);// GUI
private DataOutputStream dos;// ServerHandler
private JLabel lab = new JLabel("Ange dryck");//GUI
private JLabel lab1 = new JLabel("Walid Shams");
private JLabel lab2 = new JLabel("Kushtrim Brahimi");
private HashMap<String, ArrayList<String>> drinkar = null;//Controller
private DataInputStream dis;
private Socket socket;
private ServerHandler serverH;

public GUI() {

    frame.getContentPane().setLayout(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(50, 300, 420, 400);
    frame.setResizable(false);
    frame.setVisible(true);
    js.add(jl);
    js.add(jl1);
    jl1.setEditable(false);
    lab.setBounds(170, 20, 130, 20);
    lab1.setBounds(300, 310, 130, 20);
    lab2.setBounds(300, 330, 130,20);
    jtf.setBounds(130, 40, 150, 40);
    jl.setBounds(50, 90, 150, 200);
    jl1.setBounds(210, 90, 150, 200);
    Container con = frame.getContentPane();
    con.setBackground(Color.cyan); 
```

这是错误发生的地方，也是每次我在 jtextfield 中键入内容时都会得到 nullpointerexception 的地方。

```
 jtf.addKeyListener(new KeyListener() {

        public void keyTyped(KeyEvent e) {
        }

        public void keyPressed(KeyEvent e) {
        }

        public void keyReleased(KeyEvent e) {

            if (dos == null) {
                if (jtf.getText().length() > 0) {
                    try {
                        dos = new DataOutputStream(socket.getOutputStream());
                        dos.writeUTF(jtf.getText());
                    } catch (IOException ex) {
                        Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
                    }
                } else {
                    String[] empty = new String[]{""};
                    jl.setListData(empty);
                }
            }

        }
    }
);

    jl.addListSelectionListener(new ListSelectionListener() {

        public void valueChanged(ListSelectionEvent e) {
             if (jl.getSelectedIndex() != -1) {
                 String item = (String) jl.getSelectedValue();
                 jl1.setText("");
                 for (String ingrediens : drinkar.get(item)) {
                     jl1.append(ingrediens + "\n");
                 }
             }else{
                 jl1.setText("");
             }
        }
    });
    frame.add(jtf);
    frame.add(jl);
    frame.add(jl1);
    frame.add(lab);
    frame.add(lab1);
    frame.add(lab2);
    frame.add(js);
}

// tar emot arrayen, lagrar i ny array och visar i JList
public void getArrayList() {

    String[] arr = null;
    for(int i = 0; i < arr.length; i++){
        arr = serverH.setList();
    }
    jl.setListData(arr);

}

public static void main(String[] args) {
    GUI g = new GUI();

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:07:57.327

关于：

```
dos = new DataOutputStream(socket.getOutputStream()); 
```

唯一可以在这一行抛出 NPE 的变量是 socket，它引出了一个问题：你在哪里初始化 socket？

回答：你没有。

解决方案：解决这个问题。

请始终检查引发 NPE 的行上的变量，因为这将在 99% 的情况下向您显示错误的原因。你似乎还没有尝试过这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:37:11.910

您定义一个实例变量 »serverH«

```
private ServerHandler serverH; 
```

但不要为其分配任何对象。因此，您应该面对 NullPointerException。您应该为其分配一个对象，例如

```
serverH = new ServerHandler(); 
```

这应该可以解决您关于 NullPointerException 的问题。

# java - 同步块内部运行方法

> ID：12047218
> 
> 赞同：4
> 
> 时间：2012-08-21T01:07:13.927
> 
> 标签：java, multithreading

如果我有类似下面的东西，那里面是什么意思`synchronized block`

```
synchronised (syncObject) { 
```

基本上，这意味着只有一个线程可以在上述块内，一旦一个线程完成执行，第二个线程将进入该同步块**synchronized (syncObject)**。正确的？谁能用外行语言向我解释，以便我能得到更好的画面？

```
private static final class Task implements Runnable {
{
  private static Object syncObject = new Object();

    public Task(Command command, BlockingQueue<Integer> pool1, BlockingQueue<Integer> pool2) {
    this.command = command;
    this.existPool = pool1;
    this.newPool = pool2;
}

  public void run()
  {
    synchronised (syncObject) {
      if() {
        existId = existPool.take();
        attributeMethod(existId);
        } else if() {
            newId = newPool.take();
            attributeMethod(newId);
        }
    }
  }
}

// So I need to make this method synchronized or not? Currently I have made this synchronized
private synchronized void attributeMethod(int range) {
    // And suppose If I am calling any other method here-

 sampleMethod();
}

// What about this method, I need to make this synchronized as well? or not?
private synchronized void sampleMethod() {

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T01:28:23.013

> 基本上，这意味着只有一个线程可以在上述块内，一旦一个线程完成执行，第二个线程将进入该同步块同步（syncObject）。正确的？

正确的！

> 所以我需要让这个方法同步还是不同步？

不，你没有。假设该方法只会从方法中的同步块中调用`run()`，该块将已经阻止多个线程同时执行该方法。所以声明该方法`synchronized`是多余的。

但是，我应该指出一些事情：

*   当您将实例方法声明为`synchronized`时，它将同步`this`；即在`Task`物体上。但是您的`synchronized`块正在另一个对象上同步…… `syncObject`. 在这种情况下，这无关紧要。但是，如果方法中的`synchronized`块`run()`不存在，您会发现线程正在尝试在不同的对象上同步……并且您不会得到互斥。

*   通过在方法的顶层进行同步`run()`......对执行该任务的所有线程使用一个共享`syncObject`......您可以有效地使任务一次运行一个。这完全否定了使用线程的任何好处。

*   最好将包含私有锁对象（例如`syncObject`）的变量声明为`final`。这避免了某些东西可能覆盖它的可能性......导致同步失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:09:23.847

不，`attributeMethod`已经在一个`synchronized`块的范围内运行；无需将其标记为这样，除非您打算在此块之外同时调用它。

# ruby-on-rails - Rails 布局继承文档错误？

> ID：12047229
> 
> 赞同：0
> 
> 时间：2012-08-21T01:08:37.630
> 
> 标签：ruby-on-rails, ruby

在 Rails 3.2 发行说明页面 (http://guides.rubyonrails.org/3_2_release_notes.html) 上，它说：

```
Deprecated implied layout lookup in controllers whose parent had a explicit layout set 
```

但我在我的 rails 3.2.6 应用程序中尝试了以下操作：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  layout "application_main"
end

class HomeController < ApplicationController
  def index
    @slideshow_pics = Event.get_intro_slide_photos
  end
end 
```

使用布局`application_main.html.haml`并`home.html.haml`定义，当我转到主页#index 页面时，我得到了`home.html.haml`呈现的布局而不是其他布局。

这似乎与弃用背道而驰，所以我想知道，自 3.2.6 以来的版本之一是否回归了弃用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:20:57.460

为了比上面的 Dave 更清楚，“弃用”的意思是：**注意，我们将来会删除这个功能！我们发出这个警告，所以你要注意，你最好尽快改变它，因为我们改变了事情的工作方式！**

这并不意味着功能已经改变。

# android - Android WebView：防止双击缩放

> ID：12047234
> 
> 赞同：2
> 
> 时间：2012-08-21T01:09:16.967
> 
> 标签：android, webview, zooming

我希望能够覆盖 doubleTap 运动事件，而不是缩放和取消缩放。我在另一篇文章中读到有人能够通过创建自定义 WebView 类并覆盖其中的内容来使其工作，但无论如何我似乎都无法让 onDoubleTap 触发，并且双击缩放仍然会发生这个。

到目前为止，我的进展是我可以正确触发 onDown 事件（我在调试输出窗口中看到了 msg）。

这是我的代码，在我的帖子的最底部是我的演示项目版本的链接，该版本目前有问题。

(main.xml)

```
<?xml version="1.0" encoding="utf-8"?>
<xonmp.hellowwebview.MyWebView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     /> 
```

(helloWebViewActivity.java)

```
package xonmp.hellowwebview;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import xonmp.cannedwebview.R;
import xonmp.hellowwebview.MyWebView;

public class HelloWebViewActivity extends Activity {
    //private WebView mWebView;
    private MyWebView mWebView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.d("We Got Here", "By here I mean onCreate");

        //mWebView = (WebView) findViewById(R.id.webview);
        mWebView = (MyWebView) findViewById(R.id.webview);

        WebSettings config = mWebView.getSettings();
        config.setJavaScriptEnabled(true);
        config.setLoadWithOverviewMode(true);
        config.setUseWideViewPort(true);
        config.setBuiltInZoomControls(false);
        config.setSupportZoom(false); 
        // config.setUserAgentString("android-client"); 

        mWebView.loadUrl("http://www.google.com");
        mWebView.setWebViewClient(new HelloWebViewClient());
    }

    private class HelloWebViewClient extends WebViewClient{
        @Override
        public boolean shouldOverrideUrlLoading(WebView webview, String url){
            webview.loadUrl(url);
            return true;
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event){
        if ((keyCode == KeyEvent.KEYCODE_BACK)&& mWebView.canGoBack()){
            mWebView.goBack();
            return true;
        }
        return super.onKeyDown(keyCode,  event);
    }
} 
```

但是我自己的 MyWebView.java 类仍然不让我挂钩 onDoubleTab 方法

(MyWebView.java)

```
package xonmp.hellowwebview;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.webkit.WebView;
import android.widget.Toast;

class MyWebView extends WebView { 
    boolean doubleTap = false;

    public MyWebView(Context context) {
        super(context);
    }

    public MyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        Log.d("113133", "onTouchEvent Fired!");
        if(true){
            GestureDetector gd = new GestureDetector(sogl);
            gd.onTouchEvent(event);

            // disable double tap zooming
            if(doubleTap){
                doubleTap = false;
                return false;
            }
                return super.onTouchEvent(event);
        }

        return super.onTouchEvent(event);
    }/**/

    GestureDetector.SimpleOnGestureListener sogl = new GestureDetector.SimpleOnGestureListener() { 
        public boolean onDown(MotionEvent e){
            Log.d("ohmygosh", "ohmygosh - onDown");
            return false;
        }
        public boolean onDoubleTap(MotionEvent e) {
            doubleTap = true;
            Log.d("ohmygosh", "ohmygosh - onDoubleTap");
            return false;
        }
    };/**/

    /*
    @Override
    public boolean onTouchEvent(MotionEvent event){
        Log.d("113133", "onTouchEvent Fired!");
        //float myF = 9/0;

        return true;
    }/**/
} 
```

这是一个[github 链接](https://github.com/TheNotary/cannedwebview/tree/v0.1)（您可能需要将加载 url 更改为类似 google 的内容）。

如果您能提供帮助，非常感谢！

**编辑：** 我决定再次开始摆弄配置设置，我想出了一个可行的解决方案：

```
 WebSettings config = mWebView.getSettings();
    config.setJavaScriptEnabled(true);
    //config.setLoadWithOverviewMode(true);
    //config.setUseWideViewPort(true);
    config.setBuiltInZoomControls(false);
    config.setSupportZoom(false); 
    // config.setUserAgentString("android-client");

    mWebView.setInitialScale(80); 
```

我不确切知道 setInitialScale 是如何工作的......我有一种不好的感觉，如果在另一个页面上的宽度与我在这里所做的不完全相同，它将被放大错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:28:24.530

您可以尝试[禁用对放大](http://developer.android.com/reference/android/webkit/WebSettings.html#setSupportZoom%28boolean%29)Webview 的支持吗？

如果这不起作用，请检查其他[StackOverflow](https://stackoverflow.com/q/9018714/1525801)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T12:44:21.167

如果可能，请替换 html 中的静态元标记：

```
<script>
 var meta = document.createElement("meta");
 meta.setAttribute('name','viewport');
 meta.setAttribute('content','width=device-width, user-scalable=no');
 document.getElementsByTagName('head')[0].appendChild(meta); 
</script> 
```

此外，您可以使用一个不错的脚本：[FastClick](https://github.com/ftlabs/fastclick)
它不会等待点击事件，因此它更快。

```
<script type="application/javascript" src="fastclick.js"></script>

    <script language="javascript">

        window.addEventListener('load', function() {
            FastClick.attach(document.body);
        }, false);

</script> 
```

然后为您的手势检测器设置一个双击监听器。（在自定义 WebView 中）

```
gestureDetector.setOnDoubleTapListener(new OnDoubleTapListener() {

    @Override
    public boolean onSingleTapConfirmed( MotionEvent e ) {
        return false;
    }

    @Override
    public boolean onDoubleTapEvent( MotionEvent e ) {

        return true;
    }

    @Override
    public boolean onDoubleTap( MotionEvent e ) {

        return true;
    }
}); 
```

覆盖 onTouchEvent 方法（在自定义 WebView 中）：

```
@Override
public boolean onTouchEvent( MotionEvent event ) {

    boolean gestureHandled = gestureDetector.onTouchEvent(event);
    int actionMask = event.getActionMasked() & MotionEvent.ACTION_MASK;
    int index = ( event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    int pointId = event.getPointerId(index);

    // ignore move events
    if (actionMask == MotionEvent.ACTION_MOVE) {

        return super.onTouchEvent(event);
    }

    // cancel detected double taps
    if (gestureDetector.onTouchEvent(event)) {
        event.setAction(MotionEvent.ACTION_CANCEL);
        super.onTouchEvent(event);
        return true;
    }

    // if you want to ignore multi touch events/taps
    if (pointId != 0) {

        System.out.println("KEY multiple points detected");
        return true;
    }

    // use single taps
    if (event.getAction() == MotionEvent.ACTION_UP) {

        event.setAction(MotionEvent.ACTION_CANCEL);
        super.onTouchEvent(event);
        event.setAction(MotionEvent.ACTION_DOWN);
        super.onTouchEvent(event);
        event.setAction(MotionEvent.ACTION_UP);
        return true;
    }

return super.onTouchEvent(event);
} 
```

# internet-explorer - 浏览器历史记录中出现IE“无法显示网页”

> ID：12047236
> 
> 赞同：13
> 
> 时间：2012-08-21T01:09:26.957
> 
> 标签：internet-explorer, webpage, linkedin

我开发了一个网站，在使用 IE 时，“返回”按钮并不总是返回上一页 - Firefox 或 Chrome 没有问题。似乎对于某些页面更改，IE无法初始显示页面，然后成功加载它，但初始失败出现在历史记录中。

然后，当您点击“返回”时，它首先会返回到错误条目（尽管屏幕上没有任何变化），然后再次点击该按钮会将您带回一页。

![无法显示网页](../Images/6aa5d0f01349c39eb1cd593919396d62.png)

我在 firefox 上看不到相同的行为，并且我没有在页面转换中进行任何重定向，`.htaccess`我唯一的规则是 FURL，这是直接重写，没有重定向：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

任何人都可以提出一种方法来找出 IE 在页面上不喜欢什么，这会导致这种情况发生吗？

同样的行为也发生在 IE7 和 IE9 中。

**更新：** 我想我已经把它隔离到linkedin插件了。这些在整个站点中使用。没有任何插件的页面按预期工作，历史上没有什么奇怪的。在某些页面上，我有“关注我们”插件：

```
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/FollowCompany" data-id="568783" data-counter="none"></script> 
```

一旦您转到该页面，这些在历史记录中就会有一个“无法显示页面”。在另一个页面上，我调用了 6 个插件，用来自linkedin 的 5 个配置文件和一个`Follow Us`插件填充团队页面。每次调用 linkedin 都会导致历史记录中出现“无法显示此页面”：

![在此处输入图像描述](../Images/76fa188047b2540667706bc269d5aa31.png)

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:41:08.130

这个答案没有解决正在发生的事情，但我会把它留在这里，直到发现真正的答案（这个问题可能需要由 LinkedIn 自己解决）。

LinkedIn 喜欢你使用他们的插件来提取内容，但是他们通过奇怪的重定向和历史记录中出现的错误导致了这个问题，打破了后退按钮。javascript 在页面中插入了两级 iframe，但是您可以获取第二级框架并将其直接放入您的 html 中。这样做的好处是速度更快，但缺点是需要维护，以防 LinkedIn 后端发生任何变化。

例如，这个 iframe 将拉入特定公司的 Follow Us 插件：

```
<iframe id="easyXDM_IN_Lib_li_gen_1346300675316_0_provider" frameborder="0"
  src="http://www.linkedin.com/cws/followcompany?companyIdentifier=568783&counterPosition=none&original_referer=http%3A%2F%2Fwww.marshallmcadam.com.au%2Four-team.html&token=&isFramed=false&lang=en_US&_ts=1346111060041.3884" 
  style="width: 83px; height: 20px; display: inline-block;"
  name="easyXDM_IN_Lib_li_gen_1346300675316_0_provider">
</iframe> 
```

这是重要的部分：

```
src="http://www.linkedin.com/cws/followcompany?companyIdentifier=568783" 
```

该标识符应与您要为其提供关注按钮的标识符相匹配。其余选项是直接从生成的 iframe 代码中提取的，因此几乎没有必要。

# php - 如何解析包含嵌入页面/ iframe 的页面？

> ID：12047237
> 
> 赞同：0
> 
> 时间：2012-08-21T01:09:27.217
> 
> 标签：php, parsing, curl

我想用 PHP 解析一个流媒体网站以找到流媒体链接和代码。

流媒体页面即 index.htm 看起来像

```
<html>
<iframe> something something src= xyz.aspx?id=abc <iframe>
<\html> 
```

当我解析主页时，我可以看到这些代码..但是我需要解析 xyz.asx?id.... 如果我直接解析该页面，它不会显示流代码...主页和iframe 页面以某种方式连接...有什么方法可以同时解析两者..也许是引用或其他东西..所以第二个页面认为它好像加载在流页面上。有什么线索吗？卷曲？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:28:45.403

由于您似乎只是在搜索几个代码，因此您可能想编写一个正则表达式（GASP！我知道，正则表达式 + HTML = 不好，听我说）。我会找到一个捕获所有`<iframe>`标签的正则表达式。然后解析这些`src`属性，然后获取您需要的信息。

编辑：我不认为我完全理解你的问题，你还想嵌入 iframe 页面，就好像它是在浏览器中查看的一样？

如果是这样，请继续阅读！

好的，现在您有了 的`src`属性`<iframe>`，只需下载链接页面（我对 PHP 有点生疏，我相信您可以找到*数千个*可行的函数之一）和带有下载代码`str_replace()`的标签`<iframe>`

# php - 在表中显示mysql数据

> ID：12047238
> 
> 赞同：-1
> 
> 时间：2012-08-21T01:09:39.640
> 
> 标签：php, mysql

我有一个表格，包括我的广播电台的数据，如下所示：

```
[id]-[date]-[code]-[song]

1- 12-08-21 03:20:01 - 23 - Bla Bla
2- 12-08-21 03:23:01 - 23 - Other Bla
3- 12-08-21 03:25:01 - 12 - Another Bla
4- 12-08-21 03:27:01 - 12 - Song 
```

id 是自动递增的。code 是每个 dj 的唯一 id。

我想将 1-2 一起显示，从第一首歌曲连续到最后一首歌曲。它应该以可折叠视图提供已播放的歌曲 23。或者至少这种只给出开始和结束时间的输出对我来说是可以的

```
23 - 12-08-21 03:20-03:23
12 - 12-08-21 03:23-03:27 
```

任何人都可以在这个问题上帮助我，或者至少给我一个想法如何完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:17:00.500

```
SELECT song,
    substr(code, 14),
    " - ",
    (select substr(ref_tbl.code, 10, 5) 
        from tbl as ref_tbl
        where ref_tbl.code = tbl.code
        order by id
        limit 1)
    from tbl where code = "23" 
```

像这样的东西应该工作

# windows - Grails less-resources 插件在编译较少文件时出错

> ID：12047243
> 
> 赞同：0
> 
> 时间：2012-08-21T01:10:15.087
> 
> 标签：windows, exception, grails, path, less

我正在使用`Grails 2.1.0`并尝试安装插件`twitter-bootstrap 2.0.4`和`less-resources 1.3.0.2`. 我`app-run`收到以下错误：

```
C:\Java\jdk1.7.0_05\bin\java "-Dgrails.home=C:\Grails 2.1.0" -Dbase.dir=D:\Projects\russiansphere -Dtools.jar=C:\Java\jdk1.7.0_05\lib\tools.jar "-Dgroovy.starter.conf=C:\Grails 2.1.0/conf/groovy-starter.conf" -Xmx512M -XX:MaxPermSize=192m -Djline.WindowsTerminal.directConsole=false "-javaagent:C:\Grails 2.1.0\lib\com.springsource.springloaded\springloaded-core\jars\springloaded-core-1.0.6.jar" -noverify -Dspringloaded=profile=grails -Didea.launcher.port=7533 "-Didea.launcher.bin.path=C:\Program Files\JetBrains\IntelliJ IDEA 11.1.3\bin" -Dfile.encoding=UTF-8 -classpath "C:\Grails 2.1.0\lib\org.codehaus.groovy\groovy-all\jars\groovy-all-1.8.6.jar;C:\Grails 2.1.0\dist\grails-bootstrap-2.1.0.jar;C:\Program Files\JetBrains\IntelliJ IDEA 11.1.3\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain org.codehaus.groovy.grails.cli.support.GrailsStarter --main org.codehaus.groovy.grails.cli.GrailsScriptRunner --conf "C:\Grails 2.1.0/conf/groovy-starter.conf" run-app

| Loading Grails 2.1.0
| Configuring classpath
| Configuring classpath.
| Environment set to development
| Environment set to development.
| Environment set to development..
| Environment set to development...
| Environment set to development....
| Environment set to development.....
| Packaging Grails application
| Packaging Grails application.
| Packaging Grails application..
| Packaging Grails application...
| Packaging Grails application....
| Compiling 79 source files
| Compiling 79 source files.
| Compiling 79 source files..
| Compiling 9 source files
| Compiling 9 source files.
| Compiling 9 source files..
| Compiling 9 source files...
| Compiling 9 source files....
| Compiling 9 source files.....
| Running Grails application
| Error 2012-08-21 01:54:09,741 [pool-7-thread-1] ERROR resourceMappers.LessResourceMapper  - Error compiling less file: C:\Users\Edward\.grails\2.1.0\projects\russiansphere\tomcat\work\Tomcat\localhost\russiansphere\grails-resources\plugins\twitter-bootstrap-2.0.4\less\bootstrap.less
Message: unterminated string literal (<script>#17749)
    Line | Method
->>  109 | runtimeError                  in org.mozilla.javascript.DefaultErrorReporter
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     96 | error                         in     ''
|    146 | addError . . . . . . . . . .  in org.mozilla.javascript.Parser
|    532 | getToken                      in org.mozilla.javascript.TokenStream
|    172 | peekToken . . . . . . . . . . in org.mozilla.javascript.Parser
|   2245 | primaryExpr                   in     ''
|   1955 | memberExpr . . . . . . . . .  in     ''
|   1813 | unaryExpr                     in     ''
|   1742 | mulExpr . . . . . . . . . . . in     ''
|   1723 | addExpr                       in     ''
|   1703 | shiftExpr . . . . . . . . . . in     ''
|   1677 | relExpr                       in     ''
|   1633 | eqExpr . . . . . . . . . . .  in     ''
|   1622 | bitAndExpr                    in     ''
|   1611 | bitXorExpr . . . . . . . . .  in     ''
|   1600 | bitOrExpr                     in     ''
|   1588 | andExpr . . . . . . . . . . . in     ''
|   1576 | orExpr                        in     ''
|   1559 | condExpr . . . . . . . . . .  in     ''
|   1544 | assignExpr                    in     ''
|   1910 | argumentList . . . . . . . .  in     ''
|   2050 | memberExprTail                in     ''
|   1958 | memberExpr . . . . . . . . .  in     ''
|   1813 | unaryExpr                     in     ''
|   1742 | mulExpr . . . . . . . . . . . in     ''
|   1723 | addExpr                       in     ''
|   1703 | shiftExpr . . . . . . . . . . in     ''
|   1677 | relExpr                       in     ''
|   1633 | eqExpr . . . . . . . . . . .  in     ''
|   1622 | bitAndExpr                    in     ''
|   1611 | bitXorExpr . . . . . . . . .  in     ''
|   1600 | bitOrExpr                     in     ''
|   1588 | andExpr . . . . . . . . . . . in     ''
|   1576 | orExpr                        in     ''
|   1559 | condExpr . . . . . . . . . .  in     ''
|   1544 | assignExpr                    in     ''
|   1523 | expr . . . . . . . . . . . .  in     ''
|   1202 | statementHelper               in     ''
|    707 | statement . . . . . . . . . . in     ''
|    401 | parse                         in     ''
|    338 | parse . . . . . . . . . . . . in     ''
|   2368 | compileImpl                   in org.mozilla.javascript.Context
|   1359 | compileString . . . . . . . . in     ''
|   1348 | compileString                 in     ''
|   1101 | evaluateString . . . . . . .  in     ''
|     42 | compile                       in com.groovydev.LessCompilerService
|     34 | map . . . . . . . . . . . . . in LessResourceMapper
|    139 | invoke                        in org.grails.plugin.resource.mapper.ResourceMapper
|    128 | invokeIfNotExcluded . . . . . in     ''
|    589 | applyMappers                  in org.grails.plugin.resource.ResourceProcessor
|    535 | prepareResource . . . . . . . in     ''
|    604 | doCall                        in org.grails.plugin.resource.ResourceProcessor$_prepareSingleDeclaredResource_closure12
|     29 | addDeclaredResource . . . . . in org.grails.plugin.resource.util.ResourceMetaStore
|    602 | prepareSingleDeclaredResource in org.grails.plugin.resource.ResourceProcessor
|    627 | doCall . . . . . . . . . . .  in org.grails.plugin.resource.ResourceProcessor$_prepareResourceBatch_closure14
|      8 | each                          in org.grails.plugin.resource.ResourceProcessorBatch
|    623 | prepareResourceBatch . . . .  in org.grails.plugin.resource.ResourceProcessor
|    806 | resourcesChanged              in     ''
|    802 | loadModules . . . . . . . . . in     ''
|   1071 | reloadAll                     in     ''
|    172 | doCall . . . . . . . . . . .  in ResourcesGrailsPlugin$_closure3
|    334 | innerRun                      in java.util.concurrent.FutureTask$Sync
|    166 | run . . . . . . . . . . . . . in java.util.concurrent.FutureTask
|   1110 | runWorker                     in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . . . . . . . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run                           in java.lang.Thread
| Error 2012-08-21 01:54:10,016 [pool-7-thread-1] ERROR resourceMappers.LessResourceMapper  - Error compiling less file: C:\Users\Edward\.grails\2.1.0\projects\russiansphere\tomcat\work\Tomcat\localhost\russiansphere\grails-resources\less\custom-bootstrap.less
Message: missing ] after element list (<script>#17749)
    Line | Method
->>  109 | runtimeError                  in org.mozilla.javascript.DefaultErrorReporter
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     96 | error                         in     ''
|    146 | addError . . . . . . . . . .  in org.mozilla.javascript.Parser
|    160 | reportError                   in     ''
|   2294 | primaryExpr . . . . . . . . . in     ''
|   1955 | memberExpr                    in     ''
|   1813 | unaryExpr . . . . . . . . . . in     ''
|   1742 | mulExpr                       in     ''
|   1723 | addExpr . . . . . . . . . . . in     ''
|   1703 | shiftExpr                     in     ''
|   1677 | relExpr . . . . . . . . . . . in     ''
|   1633 | eqExpr                        in     ''
|   1622 | bitAndExpr . . . . . . . . .  in     ''
|   1611 | bitXorExpr                    in     ''
|   1600 | bitOrExpr . . . . . . . . . . in     ''
|   1588 | andExpr                       in     ''
|   1576 | orExpr . . . . . . . . . . .  in     ''
|   1559 | condExpr                      in     ''
|   1544 | assignExpr . . . . . . . . .  in     ''
|   1910 | argumentList                  in     ''
|   2050 | memberExprTail . . . . . . .  in     ''
|   1958 | memberExpr                    in     ''
|   1813 | unaryExpr . . . . . . . . . . in     ''
|   1742 | mulExpr                       in     ''
|   1723 | addExpr . . . . . . . . . . . in     ''
|   1703 | shiftExpr                     in     ''
|   1677 | relExpr . . . . . . . . . . . in     ''
|   1633 | eqExpr                        in     ''
|   1622 | bitAndExpr . . . . . . . . .  in     ''
|   1611 | bitXorExpr                    in     ''
|   1600 | bitOrExpr . . . . . . . . . . in     ''
|   1588 | andExpr                       in     ''
|   1576 | orExpr . . . . . . . . . . .  in     ''
|   1559 | condExpr                      in     ''
|   1544 | assignExpr . . . . . . . . .  in     ''
|   1523 | expr                          in     ''
|   1202 | statementHelper . . . . . . . in     ''
|    707 | statement                     in     ''
|    401 | parse . . . . . . . . . . . . in     ''
|    338 | parse                         in     ''
|   2368 | compileImpl . . . . . . . . . in org.mozilla.javascript.Context
|   1359 | compileString                 in     ''
|   1348 | compileString . . . . . . . . in     ''
|   1101 | evaluateString                in     ''
|     42 | compile . . . . . . . . . . . in com.groovydev.LessCompilerService
|     34 | map                           in LessResourceMapper
|    139 | invoke . . . . . . . . . . .  in org.grails.plugin.resource.mapper.ResourceMapper
|    128 | invokeIfNotExcluded           in     ''
|    589 | applyMappers . . . . . . . .  in org.grails.plugin.resource.ResourceProcessor
|    535 | prepareResource               in     ''
|    604 | doCall . . . . . . . . . . .  in org.grails.plugin.resource.ResourceProcessor$_prepareSingleDeclaredResource_closure12
|     29 | addDeclaredResource           in org.grails.plugin.resource.util.ResourceMetaStore
|    602 | prepareSingleDeclaredResource in org.grails.plugin.resource.ResourceProcessor
|    627 | doCall                        in org.grails.plugin.resource.ResourceProcessor$_prepareResourceBatch_closure14
|      8 | each . . . . . . . . . . . .  in org.grails.plugin.resource.ResourceProcessorBatch
|    623 | prepareResourceBatch          in org.grails.plugin.resource.ResourceProcessor
|    806 | resourcesChanged . . . . . .  in     ''
|    802 | loadModules                   in     ''
|   1071 | reloadAll . . . . . . . . . . in     ''
|    172 | doCall                        in ResourcesGrailsPlugin$_closure3
|    334 | innerRun . . . . . . . . . .  in java.util.concurrent.FutureTask$Sync
|    166 | run                           in java.util.concurrent.FutureTask
|   1110 | runWorker . . . . . . . . . . in java.util.concurrent.ThreadPoolExecutor
|    603 | run                           in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . . . . . . . . . . . in java.lang.Thread
| Server running. Browse to http://localhost:8080/russiansphere 
```

我很确定，这是路径处理的 Windows 问题，可能我必须在某处转义斜杠。但具体在哪里？

*操作系统：Windows 7 Ultimate*

* * *

**更新：** Arch Linux 似乎一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:16:03.020

我通过将`less-resources 1.3.0.2`插件更改为`lesscss-resources 1.3.0.3`. 它似乎*少*了一些错误**的**插件。:D

# python - Python：在 raw_function 中只打印一次

> ID：12047244
> 
> 赞同：0
> 
> 时间：2012-08-21T01:10:36.800
> 
> 标签：python

```
result = raw_input("Enter results file: ")

while True:
    try:
        result = get_marks_from_file(result)
        break
    except IOError:
        print 'Please supply correct file. ' 
```

以上是`raw_input`我用来带文件的功能。当我输入正确的文件名时，它运行良好。但是，当我输入其他内容时，例如`'asdsada'`，句子`'please supply correct file. '`被打印并且不会停止。有什么方法可以只打印一次并返回问题吗？

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T01:13:06.843

移动`raw_input`循环内部：

```
while True:
     result = raw_input("Enter results file: ")

     try:
         result = get_marks_from_file(result)
         break
     except IOError:
         print 'Please supply correct file. ' 
```

# php - MySQLi 性能，多个（单独）查询与子查询

> ID：12047245
> 
> 赞同：0
> 
> 时间：2012-08-21T01:11:09.967
> 
> 标签：php, sql, performance, mysqli, subquery

我需要计算来自不同（！）表的行数并将结果保存为某种统计信息。该脚本非常简单并且按预期工作，但我想知道是否最好使用带有（在这种情况下）8个子查询的单个查询，或者我是否应该使用单独的8个查询，或者是否有更好、更快和更多的查询先进的解决方案...

我将 MySQLi 与准备好的语句一起使用，因此单个查询可能如下所示：

```
$sql = 'SELECT
            (SELECT COUNT(cat1_id) FROM `cat1`),
            (SELECT COUNT(cat2_id) FROM `cat2`),
            (SELECT COUNT(cat2_id) FROM `cat2` WHERE `date` >= DATE(NOW())),
            (SELECT COUNT(cat3_id) FROM `cat3`),
            (SELECT COUNT(cat4_id) FROM `cat4`),
            (SELECT COUNT(cat5_id) FROM `cat5`),
            (SELECT COUNT(cat6_id) FROM `cat6`),
            (SELECT COUNT(cat7_id) FROM `cat7`)';

$stmt = $db->prepare($sql);
$stmt->execute();
$stmt->bind_result($var1, $var2, $var3, $var4, $var5, $var6, $var7, $var8);
$stmt->fetch();
$stmt->free_result();
$stmt->close(); 
```

而单独的查询看起来像这样（x 8）：

```
$sql = 'SELECT
            COUNT(cat1_id)
        FROM
            `cat1`';

$stmt = $db->prepare($sql);
$stmt->execute();
$stmt->bind_result($var1);
$stmt->fetch();
$stmt->free_result();
$stmt->close(); 
```

所以，与这种查询相关的更快或“更好的风格”（例如统计信息，计数器..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:33:33.140

我的倾向是尽可能将查询放入 FROM 而不是 SELECT 中。在此示例中，它需要表之间的交叉连接：

```
select c1.val, c2.val . . .
from (select count(cat1_id) as val from cat1) c1 cross join
     (select count(cat2_id as val from cat2) c2 cross join
     . . . 
```

性能应该是一样的。但是，优势出现在您的 cat2 表中：

```
select c1.val, c2.val, c2.valnow, . . .
from (select count(cat1_id) as val from cat1) c1 cross join
     (select count(cat2_id) as val
             count(case when date >= date(now()) then cat2_id end)
      from cat2
     ) c2 cross join
     . . . 
```

您无需扫描表两次即可获得两个值，从而真正节省了成本。当您意识到您可能想要修改查询以返回多个值时，这也很有帮助。

我相信交叉连接和 select-within-select 将具有相同的性能特征。真正确定的唯一方法是测试不同的版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T15:32:32.387

只是为了跟进您的评论，这里是使用我的一个数据库的示例。在这里使用准备好的声明不会给你带来任何好处。这个多重查询实际上只对 D/B 引擎执行一次 RPC。所有其他调用都是 PHP 运行时系统的本地调用。

```
$db = new mysqli('localhost', 'user', 'password', 'blog');
$table  = explode( ' ', 'articles banned comments config language members messages photo_albums photos');
foreach( $table as $t ) {
   $sql[] = "select count(*) as count from blog_$t";
}
if ($db->multi_query( implode(';',$sql) )) {
  foreach( $table as $t ) {
    if  ( ($rs  = $db->store_result() ) &&
          ($row = $rs->fetch_row()    ) ) {
       $result[$t] = $row[0];
       $rs->free();
       $db->next_result(); // you must execute one per result set
    }
  }
}
$db->close();
var_dump( $result ); 
```

只是出于兴趣，我对此做了一个`strace`相关的四行是

```
16:54:09.894296 write(4, "\211\1\0\0\3select count(*) as count fr"..., 397) = 397
16:54:09.895264 read(4, "\1\0\0\1\1\33\0\0\2\3def\0\0\0\5count\0\f?\0\25\0\0\0\10\201"..., 16384) = 544
16:54:09.896090 write(4, "\1\0\0\0\1", 5) = 5
16:54:09.896192 shutdown(4, 2 /* send and receive */) = 0 
```

查询和来自 MySQLd 进程的响应之间大约有 1 毫秒（这是因为这是在本地主机上，并且结果在它的查询缓存中，顺便说一句）......并且 0.8 毫秒后执行了数据库关闭。那是在我用了 4 年的旧笔记本电脑上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T01:18:49.243

更好的方法是只使用一个查询，因为只有一个与数据库的连接，而不是，如果您使用多个查询，那么与数据库的连接也很多，这个过程涉及：连接和断开连接，这样比较慢。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-22T04:53:56.180

关于 TerryE 的示例和使用 multi_query(!) 的建议，我检查了手册并更改了脚本以满足我的需要。最后我得到了一个如下所示的解决方案：

```
$sql  = 'SELECT COUNT(cat1_id) as `cat1` FROM `cat1`;';
$sql .= 'SELECT COUNT(cat2_id) as `cat2` FROM `cat2`;';
$sql .= 'SELECT COUNT(cat2_id) as `cat2_b` FROM `cat2` WHERE `date` >= DATE(NOW());';
$sql .= 'SELECT COUNT(cat3_id) as `cat3` FROM `cat3`;';
$sql .= 'SELECT COUNT(cat4_id) as `cat4` FROM `cat4`;';
$sql .= 'SELECT COUNT(cat5_id) as `cat5` FROM `cat5`;';
$sql .= 'SELECT COUNT(cat6_id) as `cat6` FROM `cat6`;';
$sql .= 'SELECT COUNT(cat7_id) as `cat7` FROM `cat7`;';

if ($db->multi_query($sql))
{ 
    do
    {
        if ($stmt = $db->store_result())
        {
            while ($row = $stmt->fetch_assoc())
            {
                foreach ($row as $key => $value)
                {
                    $count[$key] = $value;
                }
            }
            $stmt->free_result();
        }
    } while ($db->more_results() && $db->next_result());
} 
```

与 TerryE 的示例存在一些差异，但结果是相同的。我知道开头有 7 行几乎相同，但只要我需要 WHERE 子句或其他内容，我更喜欢这个解决方案而不是需要手动添加查询或使用异常的 foreach 循环与`if { ... }`...

据我所知，我的解决方案应该没有问题，还是我错过了什么？

# xml - 如何提取 XML 数据并将其反映在另一个网页上？

> ID：12047247
> 
> 赞同：0
> 
> 时间：2012-08-21T01:11:33.210
> 
> 标签：xml, jsp, coordinates

我希望能够从 XML 文件中提取数据并将其反映在另一个网页上。数据的位置应该正是它保存的位置。

```
<%
    FileWriter      fw = new FileWriter     ( request.getRealPath("/") + "conf/taskcard2.xml", false);
    BufferedWriter  br = new BufferedWriter ( fw);
    PrintWriter     pw = new PrintWriter    ( br);

    pw.println      ( "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>" );
    pw.println      ( "<TemplateEditor>");

    String value = request.getParameter("movableItems");
    String[] items = value.split("\\|");
    int size = items.length;
    for (int i=0; i<size; i++) {
        String[] data = items[i].split(",");
        pw.println      ( "\t<Logo>");
        pw.print        ( "\t\t<Number>");              pw.print (Integer.valueOf(data[0])+1);          pw.println ( "</Number>");
        pw.print        ( "\t\t<X_Coord>");             pw.print (data[1]);             pw.println ( "</X_Coord>");
        pw.print        ( "\t\t<Y_Coord>");             pw.print (data[2]);             pw.println ( "</Y_Coord>");
        pw.print        ( "\t\t<Width>");               pw.print (data[3]);             pw.println ( "</Width>");
        pw.print        ( "\t\t<Height>");              pw.print (data[4]);             pw.println ( "</Height>");
        pw.println      ( "\t</Logo>");
    }

    pw.println      ( "</TemplateEditor>");
    pw.flush(); 
    pw.close();
    br.close();
    fw.close();

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:53:57.107

我想建议[SAX](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)或[StAX](http://docs.oracle.com/javaee/5/tutorial/doc/bnbem.html)解析`XML`文档并尽量[避免 JSPs 中的 Java 代码](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)。

# android - PowerVR SGX540 Android 纹理问题

> ID：12047253
> 
> 赞同：2
> 
> 时间：2012-08-21T01:12:05.983
> 
> 标签：android, opengl-es, opengl-es-2.0, powervr-sgx

我正在尝试在我的 android 应用程序中加载一些纹理。

它适用于三星 Galaxy ace、s2 等所有设备，但任何使用 PowerVR SGX540 gpu 的设备，例如三星 Galaxy S-gti9000
都会有一些奇怪的伪影......

一些纹理加载正确......但其他纹理完全黑色......

我确保我所有的纹理都是二次方的，但它们不是正方形的，可以是矩形的，例如 64*128。

我正在使用以下纹理参数设置....

```
gl.glActiveTexture(GL10.GL_TEXTURE0);               
gl.glBindTexture(GL10.GL_TEXTURE_2D, glTextureId);
gl.glTexParameterf(gl.GL_TEXTURE_2D, gl.GL_TEXTURE_MIN_FILTER, gl.GL_LINEAR);
gl.glTexParameterf(gl.GL_TEXTURE_2D, gl.GL_TEXTURE_MAG_FILTER, gl.GL_LINEAR); 
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:26:18.293

正如蒂姆建议的那样，它可能是 android 有助于调整图像大小以匹配不同设备的 dpi。

加载后检查图像的大小，以确保它们仍然是二次方。将资源文件放入`res/drawable-nodpi`应该让 android 知道您不希望它们调整大小。

# c# - 数据损坏：使用 ado.net 选择进入以创建重复表作为 excel 的更改表的替代方法

> ID：12047255
> 
> 赞同：0
> 
> 时间：2012-08-21T01:13:01.773
> 
> 标签：c#, ado.net, excel-2007, export-to-excel

我曾尝试在 excel 电子表格上使用 Alter table 向现有电子表格添加新列，但发现我无法在 excel 上使用 alter table。

通过浏览网络，我发现我可以使用 select into 创建一个包含新列的重复工作表。这是此代码。

```
static private bool CopyAndCreateNewSheet()
        {
            try
            {
                DataTable dataTable = new DataTable();
                using (OleDbConnection conn = new OleDbConnection(ConfigHelper.ConnectionStringReadWriteWorkBook))
                {
                    conn.Open();
                    //string selectQuery = "SELECT 0 As IsProcessed, * INTO [Copy] FROM [" + ConfigHelper.WorkSheetName + "$]";
                    string selectQuery = "SELECT 0 As IsProcessed, * INTO [Excel 12.0;HDR= Yes;DATABASE=c:\\data\\Apr12.xlsx].[copyd]  FROM [" + ConfigHelper.WorkSheetName + "$]";

                    OleDbCommand cmd = new OleDbCommand(selectQuery, conn);
                    int count = cmd.ExecuteNonQuery();

                    MessageBox.Show(count.ToString());

                    conn.Close();
                }

            }
            catch (OleDbException e)
            {
                MessageBox.Show(e.Message.ToString());

            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
            }

            return true;
        } 
```

我的连接字符串配置如下。

```
<add name="ReadWriteWorkBook" connectionString='Provider = Microsoft.ACE.OLEDB.12.0; Data Source="c:\data\Apr12.xlsx"; Extended Properties="Excel 12.0;HDR=Yes;READONLY=FALSE"'/> 
```

我已经尝试使用注释查询和未注释查询来运行选择，但没有运气......

当我在上述方法调用后打开我的工作簿时，出现以下错误。“Excel 在文件中发现无法读取的连接。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击是。”

当我单击“是”时，我的新选项卡在那里，并且新标题也在那里，但没有数据，因为 excel 已从中删除数据。

非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:03:21.367

天，

我能够复制它并让它完美地工作。我使用的代码如下所示：

```
 public static void Main(string[] Arguments)
    {
        try
        {
            string sConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=\"Test.xlsx\";Extended Properties=\"Excel 12.0;HDR=Yes;READONLY=FALSE\"";

            DataTable dataTable = new DataTable();
            using (OleDbConnection conn = new OleDbConnection(sConnectionString))
            {
                conn.Open();

                string selectQuery = "SELECT 0 As IsProcessed, * INTO [Excel 12.0;HDR= Yes;DATABASE=Test.xlsx].[copyd]  FROM [TestWorkSheet1$]";

                OleDbCommand cmd = new OleDbCommand(selectQuery, conn);
                int count = cmd.ExecuteNonQuery();

                Console.WriteLine(count.ToString());

                conn.Close();
            }

        }
        catch (OleDbException e)
        {
            Console.WriteLine(e.Message.ToString());

        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    } 
```

请注意，此代码稍作修改以在控制台应用程序中运行。然而，这并不能真正帮助你。有时使用 Excel 可能会很痛苦，您是否考虑过以下调查：

*   权限
*   原始文件在 Excel 中打开时是否没有问题（即，该文件首先是否可由 Excel 读取？）
*   Excel 是否以某种方式 TSR 并以某种方式干扰您的项目？我以前见过这种情况，通常是在 Excel 未正确关闭时

祝你好运。

干杯!

# excel - Microsoft Excel 中的日期比较

> ID：12047257
> 
> 赞同：-1
> 
> 时间：2012-08-21T01:13:09.423
> 
> 标签：excel, excel, vba

我有一个[excel](/questions/tagged/excel "显示标记为“excel”的问题")表（2003 和 2007），其中有两列`FromDate`，`ToDate`类型为 DateTime，格式为 mm/dd/yyyy。

excel表格中可以有“n”条记录。

我想应用验证，这样当保存文件时，列的`ToDate`值应该总是大于等于列的值。`FromDate`如果不是这种情况，则应提示错误消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:55:59.893

**编辑：** @brettdj 提出了一个很好的观点——这可能已经存在。如果是这样，以下将显示每个错误的消息（如果有很多，这将是非常烦人的）以及`debug.print`它。请注意，我在此处的设置与下面的屏幕截图中的相同。这将需要进入`ThisWorkbook`VBA 编辑器，并将代码放入`BeforeSave`事件中（这只是显示错误，然后继续到保存提示）：

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

Dim FromDate As Range
' Note that this assumes that the ToDate column has all values
' filled out. Otherwise it will stop short.
Set FromDate = Range("B2:B" & Range("A2").End(xlDown).Row)

' Iterate each cell, checking the value next to it and showing
' an error if the ToDate is > FromDate (ignore blank FromDates)
ErrorCount = 0
For Each Cell In FromDate
  If Cell.Value < Cell.Offset(0, -1) And Cell.Value <> "" Then
    ' Handle your error however you want - this just prints
    MsgBox "Error in row " & Cell.Row
    Debug.Print Cell.Row
    ErrorCount = ErrorCount + 1
  End If
Next Cell

' If we found any errors, cancel the save event
If ErrorCount > 0 Then
  Cancel = True
End If

End Sub 
```

* * *

如果输入数据...

你需要它使用VBA吗？我只是问，因为您可以在没有使用数据验证的 VBA 的情况下执行此操作：

1.）设置您的数据，选择`ToDate`列（不包括列标题）并单击`Data->Data Validation`功能区（我使用的是 Excel 2007），将`Allow`下拉列表更改为，`Date`将`Data`字段更改为`greater than or equal to`并输入字段.`=A2``Start Date`

![在此处输入图像描述](../Images/cdf43b189b6f55887ccb87fcf914ad62.png)

现在在 column 中输入一些值`B`，包括那些不“正确”的值（这包括任何非日期 [在我的情况下由单元格格式定义的日期`mm/dd/yyyy`] 以及之前的一个`ToDate`）。您将收到一条错误消息（您也可以根据需要进行调整）。如果您确实需要/更喜欢使用 VBA，很高兴修改答案。

![在此处输入图像描述](../Images/959c055b646ca1e5a240c3ce4d0066bd.png)

# android - android 在 facebook 墙上仅发布消息

> ID：12047259
> 
> 赞同：0
> 
> 时间：2012-08-21T01:14:03.003
> 
> 标签：android, facebook

现在，我知道这是一个常见问题，但由于“消息”参数无效，我想知道如何将消息发布到我的 Facebook 墙上？我用这个：

```
public void postOnWall(Facebook mFacebook) {
try{
    Bundle parameters = new Bundle();
    parameters.putString("caption", "Caption");
    parameters.putString("description", "Description");

    mFacebook.dialog(this, "feed", params, new PostDialogListener());
}
catch(Exception e){}
} 
```

我总是得到没有任何标题或内容的空表单。我尝试了[facebook sdk 文档](https://developers.facebook.com/docs/reference/dialogs/feed/)中的所有参数，但仍然没有结果。

UPD：当我说空时，我的意思是： ![在此处输入图像描述](../Images/8663593d79cca08be1e9d97e4be78800.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:59:27.600

为什么消息参数无效？如果您只想在墙上发布消息，则只需执行以下操作：

```
Bundle params = new Bundle();
params.putString("message", "test message on my wall");
mAsyncRunner.request("feed", params, "POST", new PostDialogListener(), null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T05:06:35.560

请参阅下面的 Stack Overflow 答案链接，了解如何将 facebook 集成到您的 android 应用程序中，如果您对此有任何疑问，请告诉我。

[在 Facebook 上发布状态](https://stackoverflow.com/questions/10736205/share-text-on-facebook-without-using-android-intent-in-apps-background/10736377#10736377)

# php - 将 mysql_query 多表选择命令转换为 PDO

> ID：12047266
> 
> 赞同：1
> 
> 时间：2012-08-21T01:15:39.603
> 
> 标签：php, mysql, pdo, sql-injection

我有几个问题都与同一个问题有关。我正在尝试将我的一些 MySQL 连接/命令更新到 PDO 以减轻 SQL 注入。我正在尝试转换此代码：

```
$ulog = $_POST['driver'];
$_SESSION['user_id'] = $ulog;
$tablename_cc = "cc_".$ulog;
$tablename_db = "db_".$ulog;
$tablename_misc = "misc_".$ulog;
$tablename_cash = "cash_".$ulog;

$sql_cc = "SELECT * FROM " .$tablename_cc;
$sql_db = "SELECT * FROM " .$tablename_db;
$sql_misc = "SELECT * FROM " .$tablename_misc;
$sql_cash = "SELECT * FROM " .$tablename_cash;

$result_cc = mysql_query($sql_cc);
$result_db = mysql_query($sql_db);
$result_misc = mysql_query($sql_misc);
$result_cash = mysql_query($sql_cash); 
```

到以下代码：

```
$tables = array($tablename_cc, $tablename_db, $tablename_misc, $tablename_cash);

$A = count($tables);
$result = array();

try {
    $STH = $DBH->prepare('SELECT * FROM :table');
    $i = 0;
    while($i < $A) {
        $STH->bindParam(':table', $tables[$i]);
        $STH->execute();
        $result[$i] = $STH->fetchAll();
        $i++;
    }
}
catch(PDOException $e) {  
    echo $e->getMessage();
} 
```

但是，我不断收到语法错误。如果我按以下方式尝试，错误就会消失，但这种方式对我来说不是很有用，因为它不能避免 SQL 注入。

```
try {
    $i = 0;
    while($i < $A) {
        $STH = $DBH->query('SELECT * FROM ' .$tables[$i]);
        $result[$i] = $STH->fetchAll();
        $i++;
    }
}
catch(PDOException $e) {  
    echo $e->getMessage();
} 
```

尽管最后一种方法有效，但据我了解，它对减轻 SQL 注入没有帮助。我遇到的第二个问题是有时这些表不存在，我在旧方法中解决这些问题的方法是做一个小检查：

```
$result_cc = mysql_query($sql_cc);
if(mysql_num_rows($result_cc) != 0){} 
```

但是，这个中间步骤似乎在 PDO 中消失了，所以我仍然需要弄清楚如何检查这个。

# c++ - 了解浮点精度

> ID：12047270
> 
> 赞同：5
> 
> 时间：2012-08-21T01:16:06.307
> 
> 标签：c++, floating-point, floating-point-precision

是不是这样：

1.  可表示的浮点值在接近零的实数线上最密集？
2.  随着数轴远离零，可表示的浮点值变得越来越稀疏（指数？）？
3.  如果以上两个都是真的，那是否意味着离零更远的*精度更低？*

总体问题：精度是否以某种方式指代或取决于您可以（准确地）表示的数字*密度？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T01:22:30.647

术语精度通常是指表示值中有效数字（位）的数量。因此精度随表示的尾数中的位数（或位数）而变化。与原点的距离没有任何作用。

你所说的关于实线上的浮动密度*是正确的。*但在这种情况下，正确的术语是准确度，而不是精确度。小幅度的 FP 数字比大的要准确得多。这与整数形成对比，整数在其范围内具有统一的精度。

我*强烈*推荐这篇论文[What Every Computer Scientist Should Know About Floating Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，它涵盖了这一点以及更多内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T01:20:29.880

浮点数基本上以科学计数法存储。只要它们被标准化，它们就始终具有相同数量的有效数字，无论您在数轴上的哪个位置。

如果您以线性方式考虑密度，那么当您接近 0 时，浮点数的密度会呈指数级增长。

当您非常接近 0，并且指数达到最低点时，浮点数变得非规范化。此时，它们有 1 个额外的有效数字，因此更精确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T05:08:15.597

答案：

1.  可表示的浮点值在接近零的实数线上最密集？ **是的**
2.  随着数轴远离零，可 表示的浮点值变得越来越稀疏（指数？**是的）？****是的**
3.  如果以上两个都是真的，那是否意味着离零更远的 *精度更低？***是的**

总体问题：精度是否以某种方式指代或取决于您可以（准确地）表示的数字*密度？*

见[https://stackoverflow.com/a/24179424](https://stackoverflow.com/a/24179424)

我还推荐 [了每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-17T07:13:06.720

> 可表示的浮点值在接近零的实数线上最密集？

在 IEEE 754 浮点的完整实现中是的。

但是，在不支持次正规的系统中，零附近存在一个间隙，该间隙远大于最小非零值和第二小的非零值之间的差值。

> 随着数轴远离零，可表示的浮点值变得越来越稀疏（指数？）？

是的，每次该值通过 2 的幂时，相邻值之间的差距就会加倍。

> 如果以上两个都是真的，那是否意味着离零更远的精度更低？

这取决于您如何准确定义“精度”，可以从相对意义上（“重要数字”）或绝对意义上（“小数位”）谈论精度。

哪个更合适取决于这些数字的确切用途。如果浮点数用于坐标或时间戳等内容，则远离零时的精度损失往往会成为一个真正的问题。

# c - Bluez C RFCOMM 蓝牙服务器没有路由到主机

> ID：12047276
> 
> 赞同：0
> 
> 时间：2012-08-21T01:17:32.620
> 
> 标签：c, bluetooth, rfcomm

我正在使用以下链接中的代码：http: [//people.csail.mit.edu/albert/bluez-intro/x502.html](http://people.csail.mit.edu/albert/bluez-intro/x502.html)

我运行服务器，当我使用我的 mac 地址运行客户端时（服务器在端口 0x1001 上侦听，这是客户端连接的地方），我无法托管。我已经用我的蓝牙设备的 MAC 地址替换了 MAC 地址。

如果我输入一个伪造的 MAC，它会花费更长的时间并且会超时，因此对于我的真实 MAC 地址来说，它的行为至少会有所不同。我正在运行 Ubuntu 12.04 并且可以通过 GNOME 与我的手机通信，所以我知道该功能有效。

# xml - Solr 多核 UpdateXML

> ID：12047280
> 
> 赞同：0
> 
> 时间：2012-08-21T01:18:13.293
> 
> 标签：xml, solr

我的服务器上有两个核心，我已将其作为请求 xml *：* 我运行
`java -Durl=http:/localhost:8983/solr/multimedia/update -jar post.jar deleteSites.xml` 我得到

```
SimplePostTool version 1.5 
```

`Posting files to base url http://localhost:8983/solr/multimedia/update using content-type application/xml.. POSTing file deleteSites.xml 1 files indexed. COMMITting Solr index changes to http://localhost:8983/solr/multimedia/update..`

我运行 java -jar post.jar deleteSites.xml 我得到 `SimplePostTool version 1.5` `Posting files to base url http://localhost:8983/solr/update using content-type application/xml..` `POSTing file deleteSites.xml 1 files indexed. COMMITting Solr index changes to http://localhost:8983/solr/update..`

我有一个名为多媒体的核心，我想使用 XML 来更新其中一个核心。即使没有 -Durl，这两个核心在它们包含的结果数量上也没有任何差异（应该删除它们）

删除站点 xml 如下：`<delete><query>*:*</query></delete>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:29:02.997

我认为您不能利用 post.jar 文件向 Solr 发出删除查询。虽然它使用相同的更新处理程序，该处理程序专门编码用于将文档发布（添加）到索引。从您收到的回复中可以看出。

> ... POSTing 文件 deleteSites.xml 1 个文件被索引 ...

为了发出删除查询，我建议使用以下[curl](http://curl.haxx.se/)命令：

```
 curl http://localhost:8983/solr/multimedia/update?commit=true -H 
   "Content-Type: text/xml" --data-binary '<delete><query>*:*</query></delete>' 
```

您可以在 Solr Wiki 上获取有关使用[删除命令和其他 UpdateXMLMessages的更多详细信息。](http://wiki.apache.org/solr/UpdateXmlMessages#A.22delete.22_documents_by_ID_and_by_Query)

# r - searchTwitter 返回一个“空”列表

> ID：12047293
> 
> 赞同：0
> 
> 时间：2012-08-21T01:20:23.183
> 
> 标签：r, twitter

我很感激一些帮助。我正在尝试`searchTwitter`从`twitteR`包中使用，我输入了以下命令

```
> tws<-searchTwitter('#NASCAR',n=10) 
#when i tried to inspect the content of tws, i get the following:
> tws 
[[1]] 
character(0) 
```

我是新手，我不确定这是否与身份验证或 RCurl 包有关。有人可以告诉我如何解决这个问题吗？我搜索了论坛，但找不到直接相关的内容。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:26:34.233

我运行了你的代码，我也收到了 10 条推文。

你有安装 bitops 和 rjson 吗？

# image - matlab的imshow中的输入参数太多

> ID：12047295
> 
> 赞同：0
> 
> 时间：2012-08-21T01:20:26.957
> 
> 标签：image, matlab, arguments

当我打电话

```
imshow('test.png') 
```

它返回以下错误：

```
??? Error using ==> newplot
Too many input arguments.

Error in ==> basicImageDisplay at 9
hh = image(xdata,ydata,cdata, ...

Error in ==> imshow at 246
hh = basicImageDisplay(fig_handle,ax_handle,... 
```

我不知道为什么，请帮助我。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T00:42:42.670

我已经解决了这个问题。看起来我在其他项目中有另一个名为 newplot 的函数，其路径在工具箱中的图像函数之前。直到重新安装matlab才意识到。对不起这个愚蠢的错误。

# java - 打印字符串到某个单词 - Java

> ID：12047297
> 
> 赞同：1
> 
> 时间：2012-08-21T01:20:29.923
> 
> 标签：java, string, printing

我想知道在 Java 中如何打印一个字符串，直到它到达该字符串中的“退出”一词，然后立即停止打印。例如，如果字符串值为：

“嗨，这是一个随机字符串退出，不应打印”

应该打印的只是“嗨，这是一个随机字符串”。

我正在尝试这样的事情，但我认为这是错误的。

```
if ( input.indexOf( "quit" ) > -1 ) 

    {

    //code to stop printing here
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T01:24:14.060

不要将问题视为“如何*停止*打印”（因为一旦您开始在 Java 中打印某些内容，就很难停止），而是从“我如何才能只打印到某个点的单词？ " 例如：

```
int quit_position = input.indexOf("quit");
if (quit_position >= 0) {
    System.out.println(input.substring(0, quit_position));
} else {
    System.out.println(input);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T01:23:47.727

*看起来像家庭作业，所以这个答案是家庭作业式的。:-)*

你在正确的轨道上。

将该 indexOf 的值保存为整数。

然后就像你有一个手指指向正确的位置 - 即，在你真正想要打印的子字符串的末尾。

反正就是个暗示……

编辑：看起来人们还是把它给了你。但这里还有一些想法：

1.  您可能还想考虑大写和小写。
2.  还要考虑如果不存在“退出”，您将要做什么。
3.  此外，这里的解决方案并不能严格解决您的问题 - 它们也会在最后一个单词结束后、“退出”开始之前打印不必要的空格。如果这是一个问题，您可以考虑[字符串标记化](http://www.java-samples.com/showtutorial.php?tutorialid=236)或上述`replaceAll`解决方案的改编，以涵盖将空格引导到“退出”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T01:26:11.457

这有一个单行解决方案：

```
System.out.println(input.replaceAll("quit.*", "")); 
```

[`String.replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)需要一个正则表达式来匹配，我已将其指定为“文字'退出'和后面的所有内容”，它将被`""`返回的字符串中的空白（即有效删除）替换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T01:23:11.703

如果您不介意字符串中的尾随空格

```
int index = input.indexOf("quit");
if (index == -1) index = input.length();
return input.substring(0, index); 
```

# ios - iOS、AFNetworking 和 Rails/Devise

> ID：12047298
> 
> 赞同：4
> 
> 时间：2012-08-21T01:20:38.467
> 
> 标签：ios, ruby-on-rails, devise, afnetworking

我尝试搜索有关此主题的示例和答案，但似乎都更具体或与我的问题不完全相关。我是 Rails 的新手，也是一名中级 iOS 开发人员。我希望使用 Rails 作为后端来驱动基于用户登录的应用程序。我试图找到如何使用 AFHTTPClient 对设计进行身份验证的示例代码，但没有成功。我正在使用的 iOS 代码是：

```
- (IBAction)submitLogin:(id)sender {
    NSString *username = usernameField.text;
    NSString *password = passwordField.text;
    [[AFTestClient sharedClient] setAuthorizationHeaderWithUsername:username password:password];
    [[AFTestClient sharedClient] postPath:@"login/" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
     NSLog(@"Success");

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Failure");
}];
} 
```

这是我在 Rails 中设置的控制器，其中 /login 与活动#login 匹配：

```
class ActivitiesController < ApplicationController
before_filter :authenticate_user!, :only => [:login, :index]

def login
  @user = current_user
  respond_to do |format|
    format.html {render :text => "#{@user.id}"} 
    format.xml {render :text => "#{@user.id}" }   
  end
end

def index
    @user = current_user
    respond_to do |format|
    format.html {render :text => "Current user is logged in."} 
    format.xml {render :text => "#{@user.id}" }   
    format.json
  end
end
end 
```

我知道我不需要身份验证的标准请求正在通过，但我假设身份验证标头没有被 Devise 或类似的东西识别。

任何响应将不胜感激，尤其是完成相同任务的类似代码的示例。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T12:24:44.857

尝试在 Rails 应用程序的 config/initializers/devise.rb 中启用基本的 http 身份验证：

```
config.http_authenticatable = true 
```

有关[https://github.com/plataformatec/devise/wiki/How-To:-Use-HTTP-Basic-Authentication](https://github.com/plataformatec/devise/wiki/How-To:-Use-HTTP-Basic-Authentication)的更多信息。

# android - 单击时Android TextView链接不突出显示

> ID：12047300
> 
> 赞同：4
> 
> 时间：2012-08-21T01:20:59.927
> 
> 标签：android, textview

我有一个 android TextView，里面有一个链接。当用户点击它时，链接看起来很好并且执行正确的操作，但是当用户的手指向下时，链接根本不会改变颜色。这是正常的Android行为吗？似乎某种突出显示或指示会有所帮助，特别是如果我有小文本和一堆彼此相邻的链接。这是其他人看到的吗，有没有简单的解决方法？

URL 末尾的斜线也不是链接的一部分。闻起来像他们的 RegEx 中的错误。

这是我正在使用的代码：

```
 textView.setAutoLinkMask(Linkify.WEB_URLS);
    textView.setText("Hi welcome to http://www.plopfizz.com/ please enjoy."); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-21T01:32:05.247

您可以创建具有差异状态的项目选择器，例如...

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#FEFEFE" /> <!-- highlight -->
    <item android:state_focused="true" android:color="#000000" />
    <item android:color="#FFFFFF" /> <!-- default -->
</selector> 
```

然后在你的布局中......

```
<TextView 
  ...
  android:textColor="@color/above_selector"/> 
```

# python - 未找到 Dotcloud CLI 部署

> ID：12047301
> 
> 赞同：0
> 
> 时间：2012-08-21T01:21:03.717
> 
> 标签：python, django, command-line-interface, dotcloud

谁能告诉我 Dotcloud CLI 的当前版本？我在我的机器上使用 0.4.7，似乎无法在 pip/easy_install 或在线找到新版本。

但是，在部署 django 的教程中，它说要运行 dotcloud deploy 命令，而我的版本中似乎没有这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:25:02.320

您正在查看当前版本的 Python/Django 教程吗？ [http://docs.dotcloud.com/tutorials/python/django/](http://docs.dotcloud.com/tutorials/python/django/)

CLI 版本 0.4.7 是最新的官方版本，在那个版本中你应该使用`dotcloud push`

/一种

# iphone - IOS Facebook sdk登录对话框出现两次（2个登录对话框）

> ID：12047303
> 
> 赞同：0
> 
> 时间：2012-08-21T01:21:50.987
> 
> 标签：iphone, ios, facebook, sdk

我的问题与此非常相似： [Facebook SDK 登录对话框出现两次](https://stackoverflow.com/questions/6235879/facebook-sdk-login-dialog-appears-twice)

" 登录对话框出现两次。我该如何解决这个问题？"

除了，我使用这个单例与 Facebook sdk 进行通信： http: [//matt-swain.com/post/21160566904/facebook-ios-sdk-singleton](http://matt-swain.com/post/21160566904/facebook-ios-sdk-singleton)（这就是我正在使用的代码） [http://barrycenter。 com/BAM!coding/2011/07/simplifying-facebook-ios-sdk/](http://barrycenter.com/BAM!coding/2011/07/simplifying-facebook-ios-sdk/)（旧版本包括解释）

我的代码和原始单例代码之间的唯一区别是我有一个方法：

```
-(void) postToWallWithDialog:(int)count2 {

    NSMutableDictionary* params = [self buildPostParams:count2];
    [self dialog:@"feed" andParams:params andDelegate:self]; //post 

} //buildPostParams just makes a dictionary, nothing else. 
```

我不想从 fbDidLogin 中调用我的方法，因为它需要从视图控制器中调用。

如何消除第二个登录对话框？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:13:24.867

我最终使用 FBNotifications 来检查用户是否真的登录以及是否有有效的会话。知道了这一点，我贴在墙上，它消除了第二个对话框。

# asp.net - 将文档扫描到 Web 应用程序中

> ID：12047304
> 
> 赞同：2
> 
> 时间：2012-08-21T01:22:10.420
> 
> 标签：asp.net, .net, web, image-scanner

我需要扫描 Web 应用程序（最初是 .NET）中的文档。

是否有免费的替代方法来检测连接到客户端计算机的扫描仪并将图像直接扫描到浏览器？

我知道 Atalasoft 的 WingScan 做了类似的事情，但它是一个相对较新且昂贵的工具。

想法？

# sql - 我的视图应该比我的存储过程慢得多吗？

> ID：12047309
> 
> 赞同：1
> 
> 时间：2012-08-21T01:22:51.023
> 
> 标签：sql, sql-server, performance, stored-procedures, sqlperformance

我有一个似乎无法完全调整的观点，因此我尝试将其转换为 proc，将查询时使用的 WHERE 条件之一移动到参数中并在派生表中使用该参数。

*看法*

```
CREATE VIEW myView
AS
SELECT     i.ItemCode
           , s.StoreID
           , ISNULL(SUM(s.TotalSales)) AS Sales
FROM       Item i
LEFT JOIN  Balance b ON i.ItemCode = b.ItemCode
LEFT JOIN  (SELECT    SUM(Quantity)
                      , StoreID
                      , ItemCode
                      , Date
            FROM      Sales
            GROUP BY  StoreID
                      , ItemCode
                      , Date) AS s    ON i.ItemCode = s.ItemCode
                                      AND s.Data >= COALESCE(b.Date, '01-01-1900)
JOIN
GROUP BY    i.ItemCode
            , s.StoreID 
```

*存储过程*

```
CREATE PROCEDURE myProc(@StoreID INT)
AS
SELECT     i.ItemCode
           , s.StoreID
           , ISNULL(SUM(s.TotalSales)) AS Sales
FROM       Item i
LEFT JOIN  Balance b ON i.ItemCode = b.ItemCode
LEFT JOIN  (SELECT    SUM(Quantity)
                      , StoreID
                      , ItemCode
                      , Date
            FROM      Sales
            WHERE     StoreID = @StoreID
            GROUP BY  StoreID
                      , ItemCode
                      , Date) AS s    ON i.ItemCode = s.ItemCode
                                      AND s.Data >= COALESCE(b.Date, '01-01-1900)
JOIN
GROUP BY    i.ItemCode
            , s.StoreID 
```

EXEC myProc(100)比 SELECT * FROM myView WHERE StoreID = 100*快得多*。应该是这样吗？

**注意**：我知道这段代码可能没有完美的意义或运行——我试图通过删除其他一些 JOIN 来简化它。实际代码中唯一的实质性区别是将 WHERE 移到派生表中，我在这里已经完成了。

在执行派生表查询时视图不应该考虑我的 WHERE 并且与 proc 一样快吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:37:37.070

这两个查询完全不同。差异非常微妙，但这是行：

```
 WHERE     StoreID = @StoreID 
```

该视图计算所有商店的所有数据。然后它过滤特定商店的结果。

存储过程版本只查看特定存储；它甚至可以有效地利用 StoreId 上的索引（如果有的话）。

# mysql-python - 在 mysqldb 中添加条目后递增 id

> ID：12047310
> 
> 赞同：0
> 
> 时间：2012-08-21T01:23:02.033
> 
> 标签：mysql-python

我正在尝试编写一个添加条目方法，但我可以让 id 的递增工作。它正在影响我拥有的其他方法，因为当我执行删除时，它会删除所有条目而不是删除特定行。你们能帮忙吗？

```
def addEntry () :

    #define cursor
    c=db.cursor()

    #execute cursor
    id=c.execute("select max(id)+1 from phones")

    # digs deep to get next id
    id = c.fetchall()[0].values()[0]

    #dosql 
    dosql("insert into phones values (%d,'%s','%s')" % (id,nameVar.get(), phoneVar.get())) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:14:18.910

在不了解确切问题的更多信息并且仅查看您发布的代码的情况下，我看到了一些东西。

1.  为什么不使用 MySQL 中的 auto_increment 列作为您要实现的功能的“id”？

2.  在检索行时，我从未见过以下语法：

    id = c.fetchall()[0].values()[0]

那条线对我不起作用，因为 c.fetchall()[0] 返回一个没有 values 方法的元组。由于您知道查询只会返回一行，因此您可以简单地执行以下操作：

```
id = c.fetchone()[0]

or

id, = c.fetchone() 
```

3.您没有锁定表格，因此一次多次运行该代码可能不会给您所需的结果，并且您最终可能会得到 2 行的相同 id。

# c# - 更新数据源后列表框不显示新行

> ID：12047318
> 
> 赞同：0
> 
> 时间：2012-08-21T01:23:49.580
> 
> 标签：c#, winforms, listbox

首先，我使用 C# 并使用 Visual Studio 2010，并且仍然是这方面的学生。

我有一个列表框，显示我的数据库中管理员的名称。当我将另一个管理员添加到数据库时，更新在数据库中完成，但名称未添加到列表框中。

我试过阅读很多关于这个问题的帖子，但没有一个答案对我有用。预先感谢您的帮助。所以这是我的代码的错误部分：

```
class adminDAO
    {
        public static Administration admin;
        private static Connexion connect;
        private static OleDbDataReader reader;
        private static OleDbCommandBuilder cmdBuilder;
        private static OleDbDataAdapter da_Admin;
        private static DataSet ds_Admin;
        private static DataTable tableAdmin = new DataTable("Administrateurs");

        private static int nbLignes = 0;

        public static void getListAdmin()
        {
            string req = "SELECT * FROM Administrateurs";
            da_Admin = new OleDbDataAdapter(req, connect.dbconnect);
            ds_Admin = new DataSet();
            da_Admin.Fill(ds_Admin, "Administrateurs");
            tableAdmin = new DataTable("Administrateurs");

            da_Admin.Fill(tableAdmin);

            admin.bS_Admin.DataSource = tableAdmin;
            admin.lb_admin.DataSource = admin.bS_Admin;
            admin.lb_admin.DataBindings.Add("Text", admin.bS_Admin, "nomAdmin");

            nbLignes = ds_Admin.Tables["Administrateurs"].Rows.Count;
        }

        public static void setAdmin(string nomAdmin, string username, string password)
        {
            connect = Connexion.getConnexion();

            try
            {
                nbLignes = nbLignes + 1;
                cmdBuilder = new OleDbCommandBuilder(da_Admin);

                string req = "INSERT INTO Administrateurs VALUES(@noAdmin, @nomAdmin, @username, @password)";
                OleDbCommand insertCommand = new OleDbCommand(req, connect.dbconnect);
                insertCommand.Parameters.AddWithValue("@noAdmin", nbLignes);
                insertCommand.Parameters.AddWithValue("@nomAdmin", nomAdmin);
                insertCommand.Parameters.AddWithValue("@username", username);
                insertCommand.Parameters.AddWithValue("@password", password);

                insertCommand.ExecuteNonQuery();

                da_Admin.Update(tableAdmin);

            }
            catch(OleDbException ex)
            {
                MessageBox.Show("Erreur de mise à jour : " + ex.Message);
            }
            connect.exitConnexion();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:02:03.650

请在 getListAdmin() 中删除静态数据表对象的实例化后尝试一下

即`tableAdmin = new DataTable("Administrateurs");`在 getListAdmin() 方法中删除

# php - 循环遍历数组php中的每三个值

> ID：12047319
> 
> 赞同：2
> 
> 时间：2012-08-21T01:23:52.653
> 
> 标签：php, loops, for-loop

我确信我让这种方式比它更复杂......

我有一个值数组，让我们说它们现在是数字。我想将它们显示在 3 列的页面上。所以我做了3个循环，每列一个。第一个循环我想每第三个值循环一次，从索引 0 开始。第二个循环应该从索引 1 开始，每三次循环一次。第三个循环应该从索引 2 开始，每隔三分之一循环一次。

这是我写的，如果数组中只有 3 个东西，这似乎可行，而且我敢肯定它过于复杂。

谢谢

```
 <div class="span4 column">
        <?php for ($i = 0; $i <= count($articles_for_board)/3; $i = $i+2):?>
            stuff in here
            </div>
        <?php endfor; ?>
    </div>
    <div class="span4 column">
        <?php for ($i = 1; $i <= (count($all_boards)/3)+1; $i = $i+2):?>
            stuff in here
            </div>
        <?php endfor; ?>
    </div>
    <div class="span4 column">
        <?php for ($i = 2; $i <= (count($all_boards)/3)+2; $i = $i+2):?>
            stuff in here
            </div>
        <?php endfor; ?>
    </div> 
```

所以基本上，第一列将保存数组索引 0、3、6... 第二列将保存 1、4.. 等第三列将保存 2、5、8...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T01:29:04.337

使用 for 循环，您无需担心所有边界检查。它比你想象的要简单得多：

```
for ($i = 0; $i < count($all_boards); $i += 3) 
```

这个循环每次迭代都会增加三——也就是说，它每三个成员获得一次——一旦超过`$all_boards`.

# javascript - 使用 jQuery 加载页面时自动滚动顶部

> ID：12047323
> 
> 赞同：6
> 
> 时间：2012-08-21T01:24:13.827
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 在页面加载时自动将页面滚动回顶部。这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function () {

        $(window).scrollTop(0);
        return false;

    });
</script> 
```

但是，代码不起作用。我也尝试替换`$(window)`为`$('html, body')`，遗憾的是它仍然不起作用。

那么有人可以就此提出建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T01:36:22.107

试试这个

```
<script type="text/javascript">
    $(document).ready(function () {
        window.scrollTo(0,0);
    });
</script> 
```

参数 0,0 是 x 和 y 坐标。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T04:12:33.470

上述解决方案在 Chrome 中对我不起作用。这是我最成功的地方：

```
$(window).on('beforeunload', function() {
  $('body').fadeOut(225);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T13:47:45.070

如果您使用此解决方案，则更容易、更可靠：

```
<script type="text/javascript">
   $('html,body').animate({scrollTop:0},800);
</script> 
```

事实上，有些浏览器会响应，`'html'`有些会响应`'body'`.

PS。“800”是动画的持续时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-14T06:51:40.380

这是 jQuery 安全的：

```
< script type="text/javascript">
  $(window).scrollTop(0); 
</script>
```

# android - Android NDK 插件无法读取 OpenGL 标头

> ID：12047328
> 
> 赞同：1
> 
> 时间：2012-08-21T01:25:12.797
> 
> 标签：android, windows, eclipse, android-ndk, adt

我正在尝试使用 ADT 附带的新 android NDK 插件来编写 OpenGL ES 应用程序。尽管我已在 NDK 下添加了正确的路径并在项目属性中`Preferences -> Android -> NDK`设置了正确的路径，但我的所有 gl 函数都得到了未定义的引用。`Paths and Symbols`我正在使用 Windows。

![路径和设置](../Images/8687202c3f88bcbdd80af700e6610a2e.png)

但我仍然得到未定义的引用，如下所示：

![代码](../Images/36c1a892fd47458c9865cf461d35b166.png)

![错误](../Images/3c676c306d2be62ee06d937bbc57d806.png)

我正在使用`CDT 8.0.2`，因为显然较新的版本打破了 NDK 插件查找路径的方式。我正在使用`ADT 20.0.3`. 我的 Eclipse 版本是`Juno 4.2.0`. 有谁知道为什么它找不到明显存在的标题？

**安卓.mk**

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := libgweng
LOCAL_SRC_FILES := game.cpp

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T02:06:17.147

您无需使用 NDK 执行此操作，只需为 Android 构建编写适当的 makefile。

查看`hello-gl2`NDK 自带的示例中的源代码；注意`Android.mk`这个例子。

# c# - 比较 2 个字符串数组

> ID：12047329
> 
> 赞同：2
> 
> 时间：2012-08-21T01:25:18.743
> 
> 标签：c#, data-structures, collections

我想以最快的方式**比较 2 个字符串数组** 。
我得到了类似下面的东西。

这会是正确的做法吗。或者有没有更好的办法

```
 bool matching=false;
            //say templateArr is the template array and dataArr as array to be compared
            string[] templateArr = {"Dictionary_type","Translation_EN" };
            string[] dataArr = { "Dictionary_type", "Translation_EN" };

            if (templateArr.Union(dataArr).Distinct().Count() == templateArr.Count())
                matching = true; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T01:46:12.207

要测试集合相等性，您可以使用[`Enumerable.SequenceEquals`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)如下。

```
using System.Linq;

bool AreEqual()
{
    string[] templateArr = { "Dictionary_type", "Translation_EN" };
    string[] dataArr = { "Dictionary_type", "Translation_EN" };

    return templateArr.SequenceEquals(dataArr);
} 
```

如果要测试集合等价性（元素的顺序无关紧要），则可以使用[set-equality](http://msdn.microsoft.com/en-us/library/bb346516.aspx)如下。

```
bool AreEquivalent()
{
    string[] templateArr = { "Dictionary_type", "Translation_EN" };
    string[] dataArr = { "Dictionary_type", "Translation_EN" };

    return new HashSet<string>(templateArr).SetEquals(dataArr);
} 
```

根据 MSDN 文档，这两种情况都是在线性时间内实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:51:28.697

假设如果它们具有相同的元素但顺序不同，则它们应被视为不相等，您可以只使用[SequenceEqual](http://msdn.microsoft.com/en-us/library/bb348567%28v=vs.100%29.aspx)：

```
if (templateArr.SequenceEqual(dataArr))
    matching = true; 
```

如果要忽略顺序，请先对数组进行排序：

```
if (templateArr.OrderBy(x => x).SequenceEqual(dataArr.OrderBy(x => x)))
    matching = true; 
```

如果您还想忽略重复项：

```
if (templateArr.Distinct().OrderBy(x => x).SequenceEqual(dataArr.Distinct().OrderBy(x => x)))
    matching = true; 
```

或者（更简洁，并且可能更快）：

```
if (new HashSet<string>(templateArr).SetEquals(dataArr))
    matching = true; 
```

* * *

顺便说一句，您的代码不正确 - 在这种情况下，它将得出数组匹配的结论：

```
string[] templateArr = { "Dictionary_type", "Translation_EN", "abc" };
string[] dataArr = { "Translation_EN", "Dictionary_type", "Translation_EN" };

if (templateArr.Union(dataArr).Distinct().Count() == templateArr.Count())
    matching = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:38:05.443

你正在制作 a`union`然后只用其中一个来计算总元素。`Union`消除了重复，但我不确定这是否是最好的方法，因为它是一个相对昂贵的操作。

看看这个替代方案：

```
 string[] templateArr = { "Dictionary_type", "Translation_EN" };
        string[] dataArr = { "Dictionary_type", "Translation_EN" };

        bool matching = templateArr.Length == dataArr.Length ? !templateArr.Any<string>(x => !dataArr.Contains(x)) : false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T01:58:45.177

根据之前的评论 - 这个问题有点模棱两可，因为你没有澄清什么构成等效数组，但假设你将数组视为等价，如果它们包含相同数量的相同字符串（以任何顺序），然​​后我会求助到 HashSet(array1).SetEquals(array2);

我会尝试使用以下简单技术来确定数组是否相等：

1.  比较长度，如果长度不同 - 返回错误的排序数组，将计数器设置为 0
2.  比较数组 [0] 元素 - 如果不同则返回 false
3.  对下一个重复该过程，使用索引，而不是 foreach
4.  返回真

使用这种用于大型数组的方法 - 您可能会发现差异，而不是实际将数组加载到内存中或依赖散列设置整个数组，从而获得更有效的性能/内存消耗

# joomla - Web 服务器移动后 Joomla 前端没有内容

> ID：12047340
> 
> 赞同：1
> 
> 时间：2012-08-21T01:27:07.490
> 
> 标签：joomla

我对此感到很困惑，我需要社区的一些帮助。我将我的 joomla 网站移到了新服务器上，现在内容已经从前端消失了，我没有收到错误....有人可以就在哪里寻找问题提供任何建议吗？我的配置很好，我很确定我的数据库也很好，因为我所有的原始文章都在那里。

我正在运行 Joomla 1.5

网址：[http ://www.davidjamesmedia.ca](http://www.davidjamesmedia.ca)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:39:55.540

确保你的错误报告在你的服务器的 php.ini 文件中，这样你就可以看到 php 给出的错误，即`error_reporting = E_ALL & ~E_DEPRECATED`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:58:17.207

这真的很奇怪。

数据库凭据显然是正确的，否则站点将根本无法加载并导致 MySQL 错误。尝试将新的临时文章重新分配到主页，否则下载[K2](http://getk2.org/)组件，导入您的文章并将 K2 文章分配到主页。

**更新：**

如果您有正在使用的模板的演示包，请执行以下步骤：

1.  创建子域
2.  使用示例数据安装演示包
3.  `#__content`从主网站导出数据库表
4.  将`#__content`表格替换为您导出的表格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:45:27.827

如果您搬到另一家托管公司的新服务器，Joomla 可能是

*   没有在正确的位置查找数据库，或者
*   没有为数据库使用正确的凭据（主机、端口、用户名、密码等）。

如果您移至同一托管公司的不同服务器，这也可能是正确的，尽管可能性较小*。*查看 configuration.php 文件。

假设您具有 shell 访问权限，请确保您可以通过其命令行实用程序访问数据库。然后确保 Joomla 使用相同的凭据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T22:30:14.547

在管理面板中，您可以在内容菜单中看到文章吗？

如果是这样，请输入每篇文章并按“保存”按钮。
保存文章后，它应该会再次出现在首页（对我有用）。

# c++ - SQLite3 多进程性能测试

> ID：12047343
> 
> 赞同：0
> 
> 时间：2012-08-21T01:27:37.697
> 
> 标签：c++, dll, sqlite, stress-testing

我编写了一个使用 sqlite3 的 .dll。它有一个插入函数，可以在数据库上执行插入。

我还有一个使用 dll 执行插入的测试可执行文件。现在我正在测试 sqlite 及其管理多个连接的能力。测试程序插入一个无限循环，伪代码如下：

```
 while(1) {
      openDb();
      doInsert();
      closeDb();
     } 
```

基本上我已经设置了它，以便我运行 4 个版本的测试应用程序，每个版本都在数据库中插入一个字母（a、b、c 或 d）。

现在，这不起作用，因为数据库几乎总是被锁定。它适用于一两个程序，但如果我运行所有 4 个程序就不行，就像我创建了一个大的竞争条件一样。

我查看了文档，并且遇到了此处指定的 SQLITE_OPEN_FULLMUTEX 之类的内容：[http ://www.sqlite.org/c3ref/open.html](http://www.sqlite.org/c3ref/open.html)

sqlite3 是否提供了一种机制来处理多个 exe 尝试一次写入同一个数据库？还是我只是在负载测试中过于努力地推动 sqlite？我需要编写自己的连接池吗？

在这个问题上的任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:47:28.353

如果您关心您获得的分布，那么您需要编写不会添加十亿 a 而不添加任何 b 的代码。您正在编写不符合您要求的代码。这不是 sqlite 的错。如果您不想写 1,000 个 a 而没有 b，那么就不要这样做。

唯一可以保证的是数据库将取得进展。由您的代码决定不要要求数据库做您绝对不希望它做的事情。

Sqlite 正在尽可能快地取得尽可能多的进步。这就是它的工作，而且 99.99% 的时间，这就是每个人都想要的。进程切换很昂贵，因此 sqlite 正在最小化它。不要求它做你不希望它做的事情是*你的工作。*编写您的代码，以便只要求数据库执行您*希望*它执行的操作。然后，当数据库尽可能快地运行时，你会得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:39:55.477

我想我已经在此处指定的文档中找到了解决方案：

[http://www.sqlite.org/faq.html#q5](http://www.sqlite.org/faq.html#q5)

如果有人要添加任何内容或遇到相同的问题，我将保留此问题:)

# php - PHPUnit - 命令行测试无缘无故掉线？

> ID：12047345
> 
> 赞同：0
> 
> 时间：2012-08-21T01:27:54.250
> 
> 标签：php, phpunit

通常 PHPUnit 命令行运行器会提供类似于以下的输出：

```
PHPUnit 3.6.12 by Sebastian Bergmann.

....

Time: 26 seconds, Memory: 10.00Mb

OK (4 tests, 84 assertions) 
```

但是，在我的一项测试中，发生了以下情况：

```
PHPUnit 3.6.12 by Sebastian Bergmann.

.
...

Time: 26 seconds, Memory: 10.00Mb

OK (4 tests, 84 assertions) 
```

它与包含的其中一个固定装置有关。如果我注释掉正确的夹具，这个奇怪的东西就不会出现。但是，我已经尝试删除夹具文件本身中代码的每一部分，但仍然会发生这种情况。与第一次测试无关。无论哪个测试被移动到测试文件的顶部，都会发生这种情况。所以它必须与夹具本身的模型有关。然而，在我看来，没有什么是罪魁祸首。无论如何，它实际上似乎并没有影响测试，但让我感到困扰的是，无论如何这种情况正在发生。有人有任何建议/以前看过吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T03:26:28.070

您的第二次测试中的某些内容会输出回车。我可以用这个简单的文件重现你的输出：

```
<?php
class EchoTest extends PHPUnit_Framework_TestCase{

function test1(){ $this->assertEquals(3,1+2); }
function test2(){ echo "\n";$this->assertEquals(3,1+2); }
function test3(){ $this->assertEquals(8,3+5); }
function test4(){ $this->assertEquals(11,5+6); }
} 
```

If you don't see any obvious echos, and your tests are in multiple files, the classic cause would be a stray blank line before `<?php` or after the closing `?>`.

# python - 在 HTML 中使用嵌入式 Python 代码平均数字

> ID：12047348
> 
> 赞同：2
> 
> 时间：2012-08-21T01:28:05.370
> 
> 标签：python, html, google-app-engine, jinja2

这不会是一个冗长或复杂的问题。我只是想知道是否有任何简单的方法来完成计算从数据存储中提取的数字的平均值。

目前，我的 HTML 中有这个 for 循环：

```
{% for rating_tmp in ratings %}

  {{rating_tmp.rating}}

{% endfor %} 
```

...而且效果很好。每次我添加一个值时，for 循环都会将它连续放置在页面上：

2.5 4.5 2.5 3.5 等等...

平均数字显然是数字之和超过值的数量。我可以在那里扔更多的 python 并在 HTML 中完成这一切吗？或者这是应该进入 main.py 的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T01:40:50.490

绝对地！只需计算 HTML 文件中 python 的平均值。这样做并没有错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:41:38.627

您可能可以在 Jinja 模板中执行此操作，但我不推荐它。您在这里所做的是非常清楚的逻辑，而不是布局，因此您应该在代码中进行，并将其作为变量或属性传递。例如，如果你改变未来的平均方式，你应该改变生成它的代码，而不是显示它的模板。

# c# - 正则表达式查找以特定字符开头的特定单词

> ID：12047355
> 
> 赞同：0
> 
> 时间：2012-08-21T01:29:09.537
> 
> 标签：c#, regex, asp.net-mvc

使用正则表达式，我需要在以特定字符开头的字符串中找到一个单词。单词必须是字母数字，但可以在单词中包含下划线 (_)。单词开头和结尾的下划线是不可接受的。

例如，我有以下字符串。

> @word1 消息@@ 消息@ 消息@word2_ 消息@word#3 @_word4 消息@word_5

结果应该是：

> @word1 @word_5

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:32:19.380

使用正则表达式模式

```
(?:^|(?<=\s))@(?!_)\w+(?<!_)(?:(?=\s)|$) 
```

或者

```
(?:^|(?<=\W))@(?!_)\w+(?<!_)(?:(?=\W)|$) 
```

取决于你需要/想要在前面/后面有什么...

例如，如果`@word1`in`@word_5 @word1\. @word#2 @word*3`应该匹配，考虑将点`.`作为分隔符或句尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:14:48.393

这将起作用 - 边界（第 1 行和第 3 行）相当重`\b`，因为单词边界在这里不起作用，因为您不想匹配“@word#3”和“d”之后的“#”字符" 触发单词边界。

```
(?<=\s|^)
    @(?!_)\w+(?<!_)
(?=\s|$) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T03:57:12.720

这个正则表达式会做到的！

```
(?<=(^|\s))@([a-zA-Z0-9]{1}\w*[a-zA-Z0-9]|[a-zA-Z0-9]{1})(?=(\s|$)) 
```

它也匹配单个字母

# php - 输入过滤器/验证代码属于控制器还是域模型？

> ID：12047360
> 
> 赞同：4
> 
> 时间：2012-08-21T01:29:29.877
> 
> 标签：php, model-view-controller, validation, input-filtering

我一直在使用 php，但对 OO php 还是陌生的。作为我自己的练习，我正在构建一个小型 MVC 框架。

我意识到对此可能没有明确的答案，但我想知道：输入过滤器/验证代码属于哪里？

它应该是解析请求的控制器的一部分吗？

还是在域模型中有过滤器/验证代码更合适，以便每个域对象负责验证自己的信息。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T05:06:46.480

控制器不负责以任何方式、形状或形式进行验证。控制器是表示层中负责对用户输入做出反应的部分。不质疑它。

验证主要是[领域对象](http://c2.com/cgi/wiki?DomainObject)的责任，这是大多数领域业务逻辑在模型层中结束的地方。一些验证就是所谓的*“数据完整性检查”*（例如确保用户名是唯一的）。这些约束由数据库结构强制执行（如`UNIQUE`给定示例或`NOT NULL`其他一些示例中的约束）。当您使用[数据映射器](http://c2.com/cgi/wiki?DomainObject)（或其他一些存储模式）保存域对象时，它可能会引发一些`exceptions`. 这些异常也可能用于在特定域对象上设置错误状态。

如果您有一个表单，它将绑定到一个或多个域对象，当表单发布时，它会验证它。然后，当前视图从模型层请求信息，如果设置了错误状态，则显示相应的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:56:47.910

控制器通常会处理请求数据（GET / POST）并检测模型不应该关注的无效表单提交、CSRF、缺失字段等。这是您编写大部分过滤代码的最有可能的地方；验证应该只针对早期失败进行完整性检查（例如，如果电子邮件地址不是有效的电子邮件地址，请不要费心向模型发送电子邮件地址）。

您的域对象还可能提供验证钩子（甚至过滤），这将减少控制器的责任，但在大多数情况下，我个人发现使用基于合同的模型更容易（该模型假设您正在传递合法值），因为它更容易直接将验证问题转换为特定的表单字段。

模型本身也可以进行验证，尽管与前面提到的输入过滤（和内容类型验证）不同；例如，它可能会检查数据库中是否存在电子邮件，而不是确保它是有效的电子邮件地址。

# javascript - Instagram API - 翻阅“新”帖子

> ID：12047361
> 
> 赞同：1
> 
> 时间：2012-08-21T01:30:07.430
> 
> 标签：javascript, api, node.js, instagram

所以我使用 node.js 和模块 instagram-node-lib 来下载 Instagram 帖子的元数据。我有几个要搜索的主题标签，我想下载所有现有帖子（在分页期间处理请求失败）以及监控所有新帖子。

我设法破解了第一部分 - 下载所有现有帖子并处理失败（我注意到有时 Instagram API 会在我身上失败，所以我添加了冗余以记住我下载的最后一个成功页面并从那时起再次尝试）。对于任何有兴趣的人，这是我的代码（注意，我使用 Postgres 来保存帖子，并且为了便于阅读和商业目的，我对一些代码进行了缩写/混淆）**抱歉代码长度，但我认为这对某人有用：

```
var db = new (require('./postgres'))
    ,api = require("instagram-node-lib")
;

var HASHTAGS = ["fluffy", "kittens"] //this is just an example!
    ,CLIENT_ID = "YOUR_CLIENT_ID"
    ,CLIENT_SECRET = "YOUR_CLIENT_SECRET"
    ,HOST = "https://api.instagram.com"
    ,PORT = 443
    ,PATH = "/v1/media/popular?client_id=" + CLIENT_ID
;

var hashtagIndex = 0
    ,settings
;

/**
 * Initialise the module for use
 */
exports.initialise = function(){
    api.set("client_id", CLIENT_ID);
    api.set("client_secret", CLIENT_SECRET);

    if( !settings){
        settings = {
            hashtags: [] 
        }

        for( var i in HASHTAGS){
            settings.hashtags[i] = {
                name: HASHTAGS[i],
                maxTagId: null,
                minTagId: null,
                nextMaxTagId: null,
            }
        }
    }
    // console.log(settings);

    db.initialiseSettings(); //I haven't included the code for this - basically just loads settings from the database, overwriting the defaults above if they exist, otherwise it creates them using the above object. I store the settings as a JSON object in the DB and parse them on load

    execute();    
}

function execute(){
    var params = {
        name: HASHTAGS[hashtagIndex],
        complete: function(data, pagination){
            var hashtag = settings.hashtags[hashtagIndex];

            //from scratch
            if( !hashtag.maxTagId){
                console.log('Downloading old posts from scratch');

                getOldPosts();
            }
            //still loading old (previously failed)
            else if( hashtag.nextMaxTagId){
                console.log('Downloading old posts from last saved position');

                getOldPosts(hashtag.nextMaxTagId);
            }
            //new posts only
            else {
                console.log('Downloading new posts only');

                getNewPosts(hashtag.minTagId);
            }
        },
        error: function(msg, obj, caller){
            apiError(msg, obj, caller);
        }
    }

    api.tags.info(params);    
}

function getOldPosts(maxTagId){
    console.log();

    var params = {
        name: HASHTAGS[hashtagIndex],
        count: 100,
        max_tag_id: maxTagId || undefined,
        complete: function(data, pagination){
            console.log(pagination); 

            var hashtag = settings.hashtags[hashtagIndex];

            //reached the end
            if( pagination.next_max_tag_id == hashtag.maxTagId){
                console.log('Downloaded all posts for #' + HASHTAGS[hashtagIndex]);

                hashtag.nextMaxTagId = null; //reset nextMaxTagId - that way next time we execute the script we know to just look for new posts
                saveSettings(function(){
                    next();
                }); //Another function I haven't include - just saves the settings object, overwriting what is in the database. Once saved, executes the next() function
            }
            else {
                //from scratch
                if( !hashtag.maxTagId){
                    //these values will be saved once all posts in this batch have been saved. We set these only once, meaning that we have a baseline to compare to - enabling us to determine if we have reached the end of pagination
                    hashtag.maxTagId = pagination.next_max_tag_id;
                    hashtag.minTagId = pagination.min_tag_id;                    
                }

                //if there is a failure then we know where to start from - this is only saved to the database once the posts are successfully saved to database
                hashtag.nextMaxTagId = pagination.next_max_tag_id;   

                //again, another function not included. saves the posts to database, then updates the settings. Once they have completed we get the next page of data
                db.savePosts(data, function(){
                    saveSettings(function(){
                        getOldPosts(hashtag.nextMaxTagId);         
                    });
                });
            }                        
        },
        error: function(msg, obj, caller){
            apiError(msg, obj, caller);
            //keep calm and try again - this is our failure redundancy
            execute();    
        }
    }

    var posts = api.tags.recent(params);
}

/**
 * Still to be completed!
 */
function getNewPosts(minTagId){

}

function next(){
    if( hashtagIndex < HASHTAGS.length - 1){
        console.log("Moving onto the next hashtag...");

        hashtagIndex++;

        execute(); 
    }   
    else {
        console.log("All hashtags processed...");
    } 
} 
```

好的，这是我解决下一个难题的难题 - 下载新帖子（换句话说，只有自我上次下载所有帖子以来已经存在的那些新帖子）。我应该使用[Instagram 订阅](http://instagram.com/developer/realtime/)还是有办法实现类似于我已经使用过的分页？我担心如果我使用以前的解决方案，那么如果我的服务器出现问题并且它会停机一段时间，那么我会错过一些帖子。我担心如果我使用后一种解决方案，那么可能无法对记录进行分页，因为 Instagram API 是否设置为启用前向分页而不是后向分页？

我曾多次尝试在 Google Instagram API 开发人员组中发布问题，但我的消息似乎都没有出现在论坛中，所以我想我会求助于可信赖的 stackoverflow

# android - 如何根据用户偏好将应用程序锁定为纵向模式

> ID：12047368
> 
> 赞同：3
> 
> 时间：2012-08-21T01:31:10.953
> 
> 标签：android, autorotate

我知道如何将应用程序[永远](https://stackoverflow.com/q/6581120)锁定为纵向模式：

```
<activity
android:screenOrientation="portrait"
android:name=".MyActivity"></activity> 
```

我现在想将此作为用户偏好。也就是说，我不想让用户检查/取消选中`Settings > Display > Auto-rotate screen`整个**手机**，我只想为我的应用程序设置一个类似的复选框。

我如何以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:19:07.767

感谢[这个答案](https://stackoverflow.com/a/5584244)，我想出了以下内容：

```
 private void doLock(boolean locked) {
        if (locked) {
            int o = getResources().getConfiguration().orientation;
            if (o == Configuration.ORIENTATION_LANDSCAPE)
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);             
            else if (o == Configuration.ORIENTATION_PORTRAIT)
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);              
        } 
        else {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
        }
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T01:58:30.533

您还可以在 AndroidManifest.xml 中将其指定为：

```
 <activity 
        android:name=".activityName" 
        android:label="@string/app_name" 
        android:screenOrientation="portrait"> 
```

# android - 如何在Android上设置GridView的边框

> ID：12047369
> 
> 赞同：11
> 
> 时间：2012-08-21T01:31:26.457
> 
> 标签：android, gridview

如何设置 GridView 的边框。
比如ListView的Divider和DividerHeight。
或者如何显示边框。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-21T02:36:02.243

以下是 GridView 中的一些边框示例。

![GridView 边框](../Images/2b3790f45e2c21c8fd2553834736cc6c.png)

您可以看到我在 XML 中定义红色和蓝色边框的位置。

这是我的 main.xml 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/red" >

    <GridView
        android:id="@+id/gridview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="10dp"
        android:background="@color/blue"
        android:columnWidth="90dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp"
         />

</RelativeLayout> 
```

红色边框的粗细由 GridView 的`layout_margin`属性控制，蓝色边框由`horizontalSpacing`和控制`verticalSpacing`。

为了制作黑色单元格背景，我使用了这个布局并将其保存为 list_item.xml：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/black"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:paddingLeft="6dip"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

我的活动：

```
public class Example extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String[] array = new String[] {"one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten"};
        List<String> list = new ArrayList<String>(Arrays.asList(array));
        GridView grid = (GridView) findViewById(R.id.gridview);
        grid.setAdapter(new ArrayAdapter<String>(this, R.layout.list_item, list));
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-09-27T06:39:09.040

使用下面的 xml 文件作为网格项 xml 文件中的背景。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@android:color/transparent" />
    <corners
        android:bottomRightRadius="12dp"
        android:bottomLeftRadius="12dp"
        android:topLeftRadius="12dp"
        android:topRightRadius="12dp" />
    <stroke
        android:color="@android:color/white"
        android:width="1dp" />
</shape> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-10T11:45:00.593

在 res/drawable 文件夹中创建 grid_row_border.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@android:color/transparent" />
    <corners
        android:bottomRightRadius="5dp"
        android:bottomLeftRadius="5dp"
        android:topLeftRadius="5dp"
        android:topRightRadius="5dp" />
    <stroke
        android:color="@color/material_grey_600"
        android:width="1dp" />
</shape> 
```

现在在您的网格布局 xml 中使用它，如下所示

```
android:background="@drawable/grid_row_border" 
```

提供 padding [android:padding="5dp"] 和 margin [android:layout_margin="5dp"] 看起来更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T19:56:15.400

我在图像行 xml 中围绕我的画廊图像添加这些视图：

```
<View
    android:layout_width="@dimen/listGalleryItemWidthLarge"
    android:layout_height="2dip"
    android:layout_above="@+id/gallery_row_iv"
    android:layout_centerHorizontal="true"
    android:background="#FFFFFF" />

<View
    android:layout_width="@dimen/listGalleryItemWidthLarge"
    android:layout_height="2dip"
    android:layout_below="@+id/gallery_row_iv"
    android:layout_centerHorizontal="true"
    android:background="#FFFFFF" />

<View
    android:layout_width="2dip"
    android:layout_height="@dimen/listGalleryItemHeightLarge"
    android:layout_centerVertical="true"
    android:layout_toRightOf="@+id/gallery_row_iv"
    android:background="#FFFFFF" />

<View
    android:layout_width="2dip"
    android:layout_height="@dimen/listGalleryItemHeightLarge"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@+id/gallery_row_iv"
    android:background="#FFFFFF" /> 
```

*   请注意，我正在为我的 GridView 使用自定义布局和适配器

# scala - 存在类型和类型成员

> ID：12047370
> 
> 赞同：12
> 
> 时间：2012-08-21T01:31:47.837
> 
> 标签：scala, generics, types, existential-type, type-members

## 什么有效（A部分​​）

假设我有一个带有类型参数的特征：

```
trait A[T] 
```

我可以使用存在类型来编写一个方法，该方法将采用`A`所有具有相同的 s的集合`T`：

```
def foo(as: Seq[A[X]] forSome { type X }) = true 
```

请注意，这与以下内容不同：

```
def otherFoo(as: Seq[A[X] forSome { type X }]) = true 
```

或等价物：

```
def otherFoo(as: Seq[A[_]]) = true 
```

在这些情况下，存在的范围在 内`Seq`，所以`A`s 可以有不同`T`的 s。使用我的原件`foo`（在 上存在存在范围`Seq`），以下内容很好：

```
foo(Seq(new A[Int] {}, new A[Int] {})) 
```

但是使类型参数不同，它不会编译：

```
scala> foo(Seq(new A[Int] {}, new A[String] {}))
<console>:10: error: type mismatch;
 found   : Seq[A[_ >: java.lang.String with Int]]
 required: Seq[A[X]] forSome { type X }

              foo(Seq(new A[Int] {}, new A[String] {}))
                     ^ 
```

这一切都很简单。

## 什么有效（B部分）

现在假设我有一个类型成员而不是类型参数的类似特征：

```
trait B { type T } 
```

我可以编写一个只需要`B`一些指定的方法`T`：

```
scala> def bar[X](b: B { type T = X }) = true
bar: [X](b: B{type T = X})Boolean

scala> bar[Int](new B { type T = Int })
res5: Boolean = true

scala> bar[String](new B { type T = Int })
<console>:10: error: type mismatch;
 found   : java.lang.Object with B
 required: B{type T = String}
              bar[String](new B { type T = Int })
                          ^ 
```

同样，这完全符合您的预期。

## 什么不起作用

当我们尝试编写`foo`上面的等价物时，但对于类型成员，事情变得很奇怪。

```
scala> def baz(bs: Seq[B { type T = X }] forSome { type X }) = true
baz: (as: Seq[B{type T = X}] forSome { type X })Boolean

scala> baz(Seq(new B { type T = Int }, new B { type T = String }))
res7: Boolean = true 
```

最后一行编译对我来说毫无意义。我已经告诉它我希望所有类型成员都相同。我`foo`表明我可以对类型参数执行此操作，并`bar`表明我可以根据类型成员约束类型。但我不能将两者结合起来。

我在 2.9.2 和 2.10.0-M5 上试过这个。

## 动机

这个问题的灵感来自这个问题[，](https://stackoverflow.com/q/12046974/334519)我的第一个想法是，哦，只需使用存在类型（暂时搁置一个问题，[即似乎不可能将存在类型应用于重复参数类型的范围](https://stackoverflow.com/q/11540687/334519)，这在这里很方便）：

```
def accept(rs: Seq[RList[Int] { type S = X }] forSome { type X }) = true 
```

但这实际上不起作用——你会得到与上面简化示例相同的奇怪结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:31:36.393

我终于解决了（至少我希望如此）。让我们换一种方式。我们建立我们的特质：

```
scala> trait B {type T}
defined trait B 
```

我们尝试构建一个序列`B`：

```
scala> Seq(new B {type T = Int}, new B {type T = String})
res0: Seq[B{type T >: String with Int}] = List($anon$1@592b12d, $anon$2@61ae0436) 
```

该死的，它有效！好的，我们没有等式，`type T`但让我们玩一下：

```
scala> res0 : (Seq[B {type T = X}] forSome {type X >: String with Int})
res1: Seq[B{type T = X}] forSome { type X >: String with Int } = List($anon$1@592b12d, $anon$2@61ae0436) 
```

它更近了。不用等，它不是更接近，它比你提出的作为参数的**更好**`baz`，我们不仅提供原始类型，我们还有一个上限！因此，我们可以清楚地将其传递给`baz`. 这就是为什么它不能按预期工作的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T02:59:33.387

在您的示例中：

```
scala> def baz(bs: Seq[B { type T = X }] forSome { type X }) = true 
```

告诉编译器函数 baz 采用特征 B 的 Seq。特征 B 恰好采用类型成员 T，但就编译器而言，即使 B 的类型成员 T 的类型不同，函数 baz 也可以采用特征 B 的 Seq。如果您希望函数 baz 采用具有相同类型成员的特征 B 的 Seq，您需要告诉编译器如下：

```
scala> def baz[X](bs: Seq[B { type T = X }]) = true
baz: [X](bs: Seq[B{type T = X}])Boolean

scala> baz[Int](Seq(new B { type T = Int }, new B { type T = String }))
    <console>:10: error: type mismatch;
    found   : java.lang.Object with B
    required: B{type T = Int}
              baz[Int](Seq(new B { type T = Int }, new B { type T = String }))
                                               ^

scala> baz[Int](Seq(new B { type T = Int }, new B { type T = Int }))
res10: Boolean = true 
```

# c# - 对抽象类中的对象集合使用排序方法

> ID：12047373
> 
> 赞同：0
> 
> 时间：2012-08-21T01:32:13.883
> 
> 标签：c#, inheritance, abstract-class

我有一个抽象类，它定义了许多可以投票然后排序的类。由于这些类都共享它们排序的属性，我想在抽象级别包含一个方法，让我可以按这些属性对它们进行排序，但是我遇到了“不可分配给参数”错误的麻烦.

我应该如何处理以下情况：

```
internal abstract class ESCO
{
    public double HotScore { get; set; }
    public double VoteTotal { get; set; }
    public DateTime Created { get; set; }

    protected static List<ESCO> SortedItems(List<ESCO> escoList, ListSortType sortType)
    {
        switch (sortType)
        {
            case ListSortType.Hot:
                escoList.Sort(delegate(ESCO p1, ESCO p2) { return p2.HotScore.CompareTo(p1.HotScore); });
                return escoList;
            case ListSortType.Top:
                escoList.Sort(delegate(ESCO p1, ESCO p2) { return p2.VoteTotal.CompareTo(p1.VoteTotal); });
                return escoList;
            case ListSortType.Recent:
                escoList.Sort(delegate(ESCO p1, ESCO p2) { return p2.Created.CompareTo(p1.Created); });
                return escoList;
            default:
                throw new ArgumentOutOfRangeException("sortType");
        }
    }
    private SPUser GetCreatorFromListValue(SPListItem item)
    {
        var user = new SPFieldUserValue(SPContext.Current.Web, (string)item["Author"]);
        return user.User;
    }
    private static VoteMeta InformationForThisVote(List<Vote> votes, int itemId)
    {} // There are more methods not being shown with code to show why I used
       // abstract instead of something else
} 
```

尝试这样实现：

```
class Post : ESCO
{
    public string Summary { get; set; } // Properties in addition to abstract
    public Uri Link { get; set; } // Properties in addition to abstract 

    public static List<Post> Posts(SPListItemCollection items, ListSortType sortType, List<Vote> votes)
    {
        var returnlist = new List<Post>();
        for (int i = 0; i < items.Count; i++) { returnlist.Add(new Post(items[i], votes)); }
        return SortedItems(returnlist, sortType);
    } 
```

我对“你做错了”完全持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:03:14.493

我无法重现相同的错误消息，但我认为您收到的错误是因为

```
return SortedItems(returnlist, sortType); 
```

正在尝试返回抽象基类的列表。尝试将其更改为

```
return SortedItems(returnlist, sortType).Cast<Post>().ToList(); 
```

如果您还没有包含*System.Linq*命名空间，则需要包含该名称空间。

仅供参考，我得到的错误（在简化的测试用例中）是

`Cannot implicitly convert type System.Collections.Generic.List<MyNamespace.ESCO>' to 'System.Collections.Generic.List<MyNamespace.Post>'`

# google-apps-script - 有条件地将行从一张纸移动到另一张纸

> ID：12047375
> 
> 赞同：3
> 
> 时间：2012-08-21T01:32:37.573
> 
> 标签：google-apps-script, google-sheets

如果某个值在is中，我正在尝试将一行从 to`Sheet1`移动。例如：`Sheet2``Sheet1``true`

如果 B12=8/12/2012 in ，则将第 12 行从to`Sheet1`复制到第 15 行（这将是一个命名范围）下添加一个新行，然后从中删除原始第 12 行。`Sheet1``Sheet2``Sheet1`

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-28T14:01:47.343

希望这会成功...

```
function copyRowtoDiffSheet(){
var ss = SpreadsheetApp.getActiveSpreadsheet();

 var sheet1 = ss.getSheetByName('Sheet1');
 var sheet2 = ss.getSheetByName('Sheet2');

 var cell = sheet1.getRange("B12").getCell(1, 1);//Get the B12 cell from sheet1
 var rowtoInsert = "15"; //Enter in which row you want to insert in sheet2

 if(cell.getValue() == "compareString") //compare cell.getValue() =="8/12/2012" 
 {

  sheet2.insertRows(rowtoInsert); //Insert a empty row in sheet2 at R15, It will be doing insert before operation. Successive rows will be moved below.
  var range2 = sheet2.getRange(rowtoInsert ,1,1,sheet1.getLastColumn()); // Select sheet2 row15 as a range
  sheet1.getRange(cell.getRow(),1, 1, sheet1.getLastColumn()).copyTo(range2); // copy the selected sheet1 range into sheet2 range
  sheet1.deleteRow(cell.getRow()); //delete the R15 in sheet1
 }
} 
```

# java - 在android中打开pdf文件时出错，

> ID：12047378
> 
> 赞同：0
> 
> 时间：2012-08-21T01:33:22.683
> 
> 标签：java, android, html, pdf

我在 android 中的项目使用 html 文件来导航页面，并且有一个链接可以打开一个 pdf 文件。

这是 html 的 html 代码：

```
<a href="#" onClick="window.jsinterface.pdf1Click();" style="font-size: 0.9em; padding: 3px 7px 2px 7px; font-family:serif; color:white; text-decoration: none;">My PDF</a> 
```

这是我的 src 中的代码。

```
public void pdf1Click() {
                    handler.post(new Runnable() {
                        public void run() {

                        ReadWriteDisplayPDFFile(getResources().openRawResource(R.raw.pdf1),"pdf1.pdf");
                        }
                    });
                } 
```

但是当我运行我的项目并单击链接以打开 pdf 文件时，它无法打开 pdf 文件，并且出现此错误：

```
Error Writting on /sdcard/myproj/pdf1.pdf
Please Inserd SD Card 
```

和

```
No Application available to view pdf 
```

有人对我的案子有想法吗？提前致谢

日志猫：

```
Error writing /sdcard/myproj/pdf1.pdf 
java.io.FileNotFoundException: /sdcard/myproj/pdf1.pdf : open failed: EACCES (Permission denied)
    at libcore.io.IoBridge.open(IoBridge.java:416)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
    at com.sample.AppActivity$JSInterface.ReadWriteDisplayPDFFile(AppActivity.java:146)

    START {act=android.intent.action.VIEW dat=file:///sdcard/myproj/pdf1.pdf typ=application/pdf flg=0x4000000 u=0} from pid 626 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T04:53:13.003

请参阅下面的 Stack Overflow 使用 pdfviewer 库阅读 pdf 的答案，它可能会对您有所帮助，如果您对此有任何疑问，请告诉我。

[实现 PDF 阅读器的代码示例](https://stackoverflow.com/questions/11152956/example-of-code-to-implement-a-pdf-reader/11153601#11153601)

# c# - 有没有办法设置不区分大小写以突出显示richtextbox中具有大小写的单词？

> ID：12047381
> 
> 赞同：0
> 
> 时间：2012-08-21T01:34:06.680
> 
> 标签：c#, winforms

真实作者姓名是：PolarBear。

我的功能 searched `PolarBear`，结果`PolarBear`如我所愿突出显示。

我搜索了`Polarbear`，`polarbear`并且确实出现在结果中`poLarbear`，`PolarBear`但没有如我所愿突出显示。

如何像搜索一样使突出显示不区分大小写？谢谢你。

高亮代码：

```
 private void searchComByAuthor()
    {
        // Process the list of files found in the directory. 
        string[] fileEntries = Directory.GetFiles(sourceDirXML);
        foreach (string fileName in fileEntries)
        {
            XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.

            string docPath = fileName;

            xmlDoc.Load(docPath); //* load the XML document from the specified file.

            XmlNodeList nodeList = xmlDoc.GetElementsByTagName("item");

            foreach (XmlNode node in nodeList)
            {

                XmlElement itemElement = (XmlElement)node;

                string itemAuthor = itemElement.GetElementsByTagName("author")[0].InnerText;

                if (itemAuthor.ToLower() == txtComAuthor.Text.ToString().ToLower())
                {
                    string itemTitle = itemElement.GetElementsByTagName("title")[0].InnerText;
                    string itemDate = itemElement.GetElementsByTagName("pubDate")[0].InnerText;
                    string itemDescription = itemElement.GetElementsByTagName("description")[0].InnerText;
                    string itemXMLFile = Path.GetFileNameWithoutExtension(fileName);

                    richComByTemplate.AppendText("SYMBOL: " + itemXMLFile + "\nAUTHOR: " + itemAuthor + "\nDATE: " + itemDate +
                                                "\nTITLE: " + itemTitle + "\nDESCRIPTION: " + itemDescription + "\n\n--------\n\n");
                }
            }
        }

        int pointer = 0;
        int index = 0;
        string keyword = txtComAuthor.Text;
        string shadow = richComByTemplate.Text;

        while (true)
        {
            //Searching in the copy/shadow
            index = shadow.IndexOf(keyword, pointer);
            //if keyword not found then the loop will break
            if ((index == -1) || (String.IsNullOrEmpty(keyword)))
            {
                break;
            }
            richComByTemplate.Select(index, keyword.Length);
            richComByTemplate.SelectionColor = Color.Red;
            richComByTemplate.SelectionFont = new System.Drawing.Font(richComByTemplate.Font, FontStyle.Bold);
            pointer = index + keyword.Length;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:02:58.267

`.ToLower()`在设置`keyword`和`shadow`变量时添加。然后突出显示应该按您的预期工作：

```
string keyword = txtComAuthor.Text.ToLower();
string shadow = richComByTemplate.Text.ToLower(); 
```

或者，您可以告诉`IndexOf`不区分大小写：

```
index = shadow.IndexOf(keyword, pointer, StringComparison.OrdinalIgnoreCase); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:04:10.310

您可以尝试使用使用[StringComparison](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)枚举的[IndexOf](http://msdn.microsoft.com/en-us/library/ms224424)方法的重载。

```
index = shadow.IndexOf(keyword, pointer,StringComparison.InvariantCultureIgnoreCase); 
```

从第二个 MSDN 链接：

> 调用字符串比较方法（如 String.Compare、String.Equals 或 String.IndexOf）时，应始终调用包含 StringComparison 类型参数的重载，以便指定该方法执行的比较类型。有关详细信息，请参阅在 .NET Framework 中使用字符串的最佳实践。

小型工作测试示例：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int pointer = 0;
        int index = 0;
        string keyword = txtComAuthor.Text;
        string shadow = richComByTemplate.Text;

        while (true)
        {
            //Searching in the copy/shadow 
            index = shadow.IndexOf(keyword, pointer, StringComparison.InvariantCultureIgnoreCase);
            //if keyword not found then the loop will break 
            if ((index == -1) || (String.IsNullOrEmpty(keyword)))
            {
                break;
            }
            richComByTemplate.Select(index, keyword.Length);
            richComByTemplate.SelectionColor = Color.Red;
            richComByTemplate.SelectionFont = new System.Drawing.Font(richComByTemplate.Font, FontStyle.Bold);
            pointer = index + keyword.Length;
        } 

    }
} 
```

# ios5 - 调用 WCF 服务后重新加载 tableview

> ID：12047383
> 
> 赞同：0
> 
> 时间：2012-08-21T01:34:23.603
> 
> 标签：ios5, uitableview, xcode4.3, sudzc

我正在调用 WCF 服务以在 UITableViewController 中显示数据。.m 文件中的代码是：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  [docTable setDataSource:self];
  [docTable setDelegate:self];
}

-(void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    EDViPadDocSyncService *service = [[EDViPadDocSyncService alloc]init];
    EDVCategory *cat = [EDVCategory alloc];
    cat.categoryId = [catId intValue];
    [service getDocsByCatId:self action:@selector(getDocsByCatIdHandler:) category:cat];
    [docTable reloadData];
}

- (void) getDocsByCatIdHandler: (id)value 
{
if([value isKindOfClass:[NSError class]]) 
    {
    NSLog(@"%@", value);
    return;
}
if([value isKindOfClass:[SoapFault class]]) 
    {
    NSLog(@"%@", value);
    return;
    }               
    NSMutableArray* result = (NSMutableArray*)value;
    NSMutableArray *documentList = [[NSMutableArray alloc] init];
    self.myDocList = [[NSMutableArray array] init];
    for (int i = 0; i < [result count]; i++)
    {
       EDVDocument *docObj = [[EDVDocument alloc]init];
       docObj = [result objectAtIndex:i];
       [documentList addObject:[docObj docName]];        
    }
    self.myDocList = documentList;
    [docTable reloadData];
}

- (void)viewDidUnload
{  
   [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
  return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int cnt = [self.myDocList count];
    NSLog(@"ABC=%@",cnt);
    return [self.myDocList count];
    //return 1;
 }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   DocumentCell *cell = [tableView dequeueReusableCellWithIdentifier:@"DocumentCell"];
   if (cell == nil)
   {
      cell = [[[DocumentCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"DocumentCell"] autorelease];
   }
   NSLog(@"cell text=%@",[self.myDocList objectAtIndex:indexPath.row]);
   cell.lblDocName.text = [self.myDocList objectAtIndex:indexPath.row];
   return cell;
} 
```

我正在使用情节提要。我已经挂钩了“docTable”，为“docTable”设置了数据源和委托。问题是，在调用**“numberOfRowsInSection”**之后调用了该服务。所以，**'return [self.myDocList count] '**是 0。我已将**[docTable reloadData]**放入**viewWillAppear**以及服务处理程序中，即**“getDocsByCatIdHandler”**。但它没有像预期的那样重新加载。还有什么我可以尝试的吗？**编辑**:- 这是一个主从应用程序。我使用相同的代码在“MasterViewController”UITableViewController 中加载数据并且它可以工作。当用户选择此表中的单元格时，我需要通过调用在第二个表视图中填充数据WCF 服务。第二个表视图不显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:21:33.100

当我进行异步 webService 调用时，我遇到了同样的问题。我正在使用私有库来调用 web 服务，因此我的控制权转到了库，并且在响应到来之后，Appdelegate 中的一个方法被设置为处理程序。所以你需要做的是在调用Webservice之前将tableview的状态保存在一个共享变量中，在你收到响应后将它设置回tableView，然后调用reload方法。如下所示：

```
SharedView.tblView = self.tableView; 
[webservice Call];

After Response:
 self.tableView = SharedView.tblView;
[self.tableView reloadData]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:58:34.023

一切看起来都很好，这让我相信你没有从你期望的 web 服务中得到结果。

一件小事首先不是你的问题。如果结果实际上是一个数组并且其中有一个对象，则不需要分配新的 EDVDocument。

```
EDVDocument *docObj = [result objectAtIndex:i]; 
```

您可以记录 (id)value 参数以查看我们正在处理的内容吗？

```
NSLog(@"%@", value); 
```

如果 value 不是一个数组，演员不会抱怨，它只会通过不工作来工作。但是，如果它是一个数组，您可能会在将您的属性（我不知道它是如何声明的）分配给本地数组时遇到麻烦。您可以使用以下函数使用临时数组的元素创建一个新数组；

```
self.myDocList = [[NSArray alloc] initWithArray:documentList];
[docTable reloadData]; 
```

我希望这有帮助。

# sql - SQL Server 查询编译 - 将 VarChar 转换为 Float

> ID：12047391
> 
> 赞同：2
> 
> 时间：2012-08-21T01:37:01.650
> 
> 标签：sql, sql-server

我从 SQL Server 得到一些奇怪的行为。我有一个返回金额字段的基础视图。该金额字段正在从 VARCHAR(50) 转换为 FLOAT。

我可以**成功**运行以下查询：

```
SELECT AMOUNT
FROM vReturnDetails 
```

我还可以**成功**运行以下查询：

```
SELECT AMOUNT
FROM vReturnDetails v 
    INNER JOIN MyTable t 
        ON t.LicenceNumber = v.LicenceNumber
        AND t.ReturnYear = v.ReturnYear 
WHERE t.ReturnYear = 2012 
```

同样，我**可以**运行此查询：

```
SELECT AMOUNT
FROM vReturnDetails v 
    INNER JOIN MyTable t 
        ON t.LicenceNumber = v.LicenceNumber
        AND t.ReturnYear = v.ReturnYear 
WHERE t.ReturnYear <> 2012 
```

这是它变得奇怪的地方，我**不能**运行以下任何一个：

```
SELECT AMOUNT
FROM vReturnDetails v 
    INNER JOIN MyTable t 
        ON t.LicenceNumber = v.LicenceNumber
        AND t.ReturnYear = v.ReturnYear 
WHERE t.ReturnYear = 2012 OR t.ReturnYear <> 2012

SELECT AMOUNT
FROM vReturnDetails v 
    INNER JOIN MyTable t 
        ON t.LicenceNumber = v.LicenceNumber
        AND t.ReturnYear = v.ReturnYear 
```

我可以**成功**运行这个查询：

```
SELECT AMOUNT
FROM vReturnDetails v 
    INNER JOIN MyTable t 
        ON t.LicenceNumber = v.LicenceNumber
        AND t.ReturnYear = v.ReturnYear 
WHERE t.ReturnYear <> 2013 --2013 is a dummy value that doesn't exist 
```

任何人都可以阐明这里的幕后发生的事情。这对我来说毫无意义，所以我不确定从哪里开始寻找解决问题的方法。

我收到的错误是

*将数据类型 varchar 转换为浮点数时出错。*

这是在 Sql Server 2008 SP2 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:01:18.617

SQL Server 很复杂。SQL引擎中的处理顺序不一定与查询中的顺序相同。例如，WHERE 子句中的过滤器可以在读取数据时应用，也可以在处理数据之后应用。

显然，您在 AMOUNT 字段中有一些不是有效浮点数的值。最简单的解释是当你运行时：

```
SELECT AMOUNT
FROM vReturnDetails 
```

您没有返回所有行。. . 数据不良的行在后面。

或者，vReturnDetails 是基于基础数据的视图，其中一些数据很糟糕。编译查询时，它可能会影响过滤发生的位置。在某些情况下，引擎可能决定读取所有数据，进行转换，然后继续——但它在转换过程中出现错误，从而中断了进程。

您可以通过将视图更改为以下内容来解决此问题：

```
select (case when isnumeric(amountstr) = 1 then cast(amountstr as float) end) as Amount 
```

SQL Server*确实*保证了 case 语句中的计算顺序。所以，这不应该返回错误。

ISNUMERIC() 和 CONVERT to FLOAT 并不完全一致。我知道 ISNUMERIC 接受逗号和美元符号（可能还有其他字符）。您也可以试试这个（假设您使用美国风格的数字格式）：

```
select (case when isnumeric(amountstr) = 1
             then cast(replace(replace(amountstr, ',', ''), '$', '') as float) end) as Amount 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:44:45.503

在您的查询中调用 CONVERT 的位置令人困惑。从您上面的评论中，我了解到 AMOUNT 是 VARCHAR(50)。您在哪里将其转换为 FLOAT？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-19T19:11:55.580

如果您在前面提到的基础视图中进行转换，则只有错误数据导致查询失败的可能性。你有空值吗？您是否尝试过对金额使用 IsNull() 函数，以便将任何空/坏数据清零？

# php - 匹配输入到掩码

> ID：12047392
> 
> 赞同：2
> 
> 时间：2012-08-21T01:37:22.347
> 
> 标签：php, input, preg-match, mask

我需要一点帮助我想检查输入是否与掩码匹配

掩码是这样的：12.345.678/9012-34 (xx.xxx.xxx/xxxx-xx)

到目前为止我尝试过的是这个

```
$string = '12.345.678/9012-34';

if(!preg_match('/^[0-9]{2}.[0-9]{3}.[0-9]{3}/[0-9]{4}-[0-9]{2}$/', $string)) {
     echo 'Doesnt match the mask!';
} 
```

它没有成功。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T01:39:56.170

您需要转义要匹配的`/`and`.`文字，因为您使用前者作为正则表达式分隔符，并且在正则表达式中`.`具有特殊含义（通常匹配除 之外的所有字符`\n`）。

```
if(!preg_match('/^\d{2}.\d{3}\.\d{3}\/\d{4}-\d{2}$/', $string)) {
     echo 'Doesnt match the mask!';
} 
```

我也使用了，`\d`而不是`[0-9]`因为它不太容易阅读和理解，它们的意思是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:42:39.887

这是我将如何改变它：

```
/^[0-9]{2}.[0-9]{3}.[0-9]{3}/[0-9]{4}-[0-9]{2}$/ 
```

1）您可以使用`\d`数字的快捷方式：

```
/^\d{2}.\d{3}.\d{3}/\d{4}-\d{2}$/ 
```

2）点（句号）是一个特殊字符，可以匹配任何字符，所以需要转义。

```
/^\d{2}\.\d{3}\.\d{3}/\d{4}-\d{2}$/ 
```

3）正斜杠是你的分隔符，所以应该在里面转义；或者，使用不同的分隔符：

```
/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/

#^\d{2}\.\d{3}\.\d{3}/\d{4}-\d{2}$# 
```

# position - 如何为同位素项目中的元素启用“位置：固定”？

> ID：12047398
> 
> 赞同：-1
> 
> 时间：2012-08-21T01:37:54.693
> 
> 标签：position, z-index, fixed, jquery-isotope

我目前正在使用*同位素*来组织我的投资组合。我发现如果我决定将元素放置在同位素项目中并使这些元素的位置固定，它们将不会在屏幕上固定移动。相反，这些元素将使用同位素项目的 x 和 y 位置作为初始屏幕位置。例如，如果我将元素放置为 position:fixed 和 left:0; 顶部：0；此元素不会显示在屏幕的左上角。相反，它将显示在同位素项目的左上角。

我遇到的另一个问题是同位素项内部元素的 z-index 不是独立的。如果我给元素一个比其他同位素项目更大的 z-index，假设元素的 z-index 为 100，并且所有同位素项目的 z-index 为 10，“portfolio_display”仍将显示在所有同位素项目的后面.

解释我想要实现的目标：

我想让同位素项目变得可点击，当它被激活时，一个全屏的投资组合显示将出现并接管屏幕。

我知道像 lightbox 2 这样的插件会起作用。但是，我希望我的作品集展示功能比灯箱 2 丰富得多。我想将案例研究、图像、视频置于全屏模式，并且每个屏幕都可以像网页一样格式。所以我的方法是将多个格式化的div放入一个同位素项中，并使用javescript（我自己写的）来控制它们的可见性和滚动。这种方法一直有效，直到我开始将同位素整合到我的投资组合中。

我想同位素在更大的“网页”内创建了一个小“网页”，因此它决定了 z-index 和它自己的内部位置。我想知道我是否可以在不破坏其强大功能的情况下禁用同位素对其子元素的听写。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:56:29.787

为了您的全窗口显示目的，您可以[将此演示中的模态叠加技术](http://www.hopfnordin.se/demo.html)更改为您的目的。不需要插件，你可以把你想展示的任何东西放在那里，而不仅仅是将它用作一个简单的自制模态。

# java - 如何允许用户自动将一组文件下载到特定目录？

> ID：12047400
> 
> 赞同：0
> 
> 时间：2012-08-21T01:38:32.750
> 
> 标签：java, flash

我有一个创建一组文件的内部应用程序，然后将它们用 php 压缩并通过下载标题呈现给用户。用户然后下载 zip 文件，必须解压缩文件夹并将文件复制到他们计算机上的特定目录中。

我需要一些关于如何允许用户预设此文件夹的指导，以便当他们单击下载按钮时，集合中的所有文件都将下载到他们硬盘上的特定文件夹中。

我意识到除了让用户设置浏览器的下载目录之外，这通常是不可能的。但我知道它可以用 java applet 或 flash 来完成。有人可以为我指出如何创建这样的小应用程序的正确方向。我假设用户必须下载该应用程序并在他们第一次使用该网站时允许它访问，然后，我希望他们能够只需单击一个按钮并下载文件。

我很确定这是可以做到的，正如我之前看到的那样。但我再也找不到那个网站了。即使应用程序至少弹出一个文件浏览器窗口来选择要下载到的文件夹，并且预先选择了首选文件夹，这也足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:47:43.803

- 在您的服务器上创建一个文件，其中包含要下载的文件列表作为它的相对路径。

- 将此列表作为数组/字符串列表检索

- 为列表中的每个文件（字符串）创建一个`ThreadPoolExecutor`并提交一个`Runnable`。Runnable 应该可以工作`SERVER_URL + RELATIVE_LINK`

这应该让你开始......

哦，顺便说一句，您的小程序需要签名才能访问磁盘驱动器。

如果是一个选项，请创建一个可运行的 jar 并让用户下载它。

# ios - CAEmitterLayer 负 beginTime 可能吗？

> ID：12047402
> 
> 赞同：7
> 
> 时间：2012-08-21T01:39:13.283
> 
> 标签：ios, core-animation, caemitterlayer

我试图让`CAEmitterLayer`s 和`CAEmitterCell`s 从他们父母持续时间中间的某个地方开始他们的动画。这可能吗？我尝试使用`beginTime`and`timeOffset`属性，但似乎无法正常工作。

为后代添加了一些代码：（假设我希望发射器在第 5 秒开始）

```
 CAEmitterLayer *emitter = [CAEmitterLayer new];
    // emitter.beginTime = -5.0f; // I tried this
    // emitter.timeOffset = 5.0f; // I also tried this, with beginTime = 0.0, and with beginTime = AVCoreAnimationBeginTimeAtZero
    /* set some other CAEmitterLayer properties */

    CAEmitterCell *cell = [CAEmitterCell new];
    // cell.beginTime = -5.0f; // Then I saw that CAEmitterCell implements CAMediaTiming protocol so I tried this
    // cell.timeOffset = 5.0f; // and this
    /* set some other CAEmitterCell properties */

    emitter.emitterCells = @[cell];
    [viewLayer addSubLayer:emitter]; 
```

但动画仍然从发射器生成粒子的位置开始。

再次编辑以解释我正在尝试做的事情：

假设我有一个`CAEmitterLayer`动画雨，所以我设置单元格做一个从屏幕顶部开始的“下降”动画。在开始渲染期间，我不想在“还没有下雨”的状态下开始。我想从屏幕已经被雨覆盖的地方开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T03:50:27.027

与`beginTime`现在无关。需要抓取当前时间相对于当前图层时间空间，可以通过`CACurrentMediaTime()`函数获取。所以在你的情况下，你会做这样的事情：

```
emitter.beginTime = CACurrentMediaTime() + 5.f; 
```

# php - 使用 jquery 和 javascript 从 PHP 显示变量

> ID：12047405
> 
> 赞同：1
> 
> 时间：2012-08-21T01:39:36.250
> 
> 标签：php, javascript, jquery, mysql

我正在尝试使用 javascript/jquery 显示 PHP 变量，但它显示的是“null”。

```
if(mysql_num_rows($checkBan) > 0){
            $bannedDate = $checkBan['banLength'];
            if(preg_match('/[0-9]/',$bannedDate)){      
                list($yyyy,$mm,$dd) = explode('-',$bannedDate);
                 $date = $mm."-".$dd."-".$yyyy;
            }

            //$date = "test"; when this is uncommented it appears in the alert so I know the json_encode is working fine

            ?>
            <script type ="text/javascript">
               var bannedUntil= <?php echo json_encode($date); ?>;
               alert('Your account has been banned until ' + bannedUntil +'. Please contant an administrator if you believe this is an error');
            </script>
            <?

        } 
```

警报看起来很好，但bannedUntil 变量为空。但是，当取消注释第二个日期变量时，它会出现在警报中。它不是一个单独的函数，所以我不明白为什么范围会成为问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:42:11.090

我看到您使用`$checkBan`中的结果资源`mysql_num_rows()`，然后尝试从中访问数组键而不获取。您似乎错过了以下电话`mysql_fetch_assoc()`：

```
if(mysql_num_rows($checkBan) > 0){
        // Fetch a row from the result resource $checkBan
        $row = mysql_fetch_assoc($checkBan);
        $bannedDate = $row['banLength'];
        // etc...
} 
```

另一个提示：看起来您正在获取标准 MySQL 日期格式，`YYYY-MM-DD`并使用 PHP 中的字符串操作将其转换为`MM-DD-YYYY`. 只需在查询中以该格式检索它即可开始并避免PHP 应用程序代码中的`explode()`and调用。`list()`

```
SELECT DATE_FORMAT(banLength, '%m-%d-%Y') FROM yourtable 
```

# php - jquery .post ajax 函数在 IE + FF 中不起作用

> ID：12047408
> 
> 赞同：0
> 
> 时间：2012-08-21T01:40:03.097
> 
> 标签：php, jquery, ajax

我正在为我的运动队开发一个网站。它通过 PHP 显示来自 MySQL 数据库中数据的下一个训练和匹配日期。我想让用户在这些约会中添加他们的存在，并通过 AJAX 用已确认的用户更新 div。

我为它调用下一个函数：

```
function swapContent(div, status, soort, itemid, userid) {
$("#"+div).html('<p>loading ...</p>').show();
    var url = "training.php";
    $.post(url, {status: status, soort: soort, itemid: itemid, userid: userid} ,function(data) {
    $("#"+div).html(data).show();
    });
} 
```

问题是它在 Chrome 中就像一个魅力，但不是在最新版本的 FF 和 IE 上......

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:12:59.180

他们可能对您使用的命名有问题，即：

```
status: status 
```

尝试更改函数的参数名称，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:36:24.547

我已经解决了。如您所见，我将 var $userid 与 .post 一起传递。问题是在 IE 和 FF 中我没有登录，所以 $userid 为空并且 php-page 无法运行，所以没有输出。当我登录时，一切正常...

```
/me feels stupid 
```

无论如何，谢谢您的帮助！

# matlab - 具有大量项的双精度乘积中正确小数位数

> ID：12047410
> 
> 赞同：1
> 
> 时间：2012-08-21T01:40:49.637
> 
> 标签：matlab, floating-point, numerical

*无理数集N*的大小的严格下限是多少，在 64 位机器上的 Matlab 中表示为双精度数，我在对乘积的*k*个十进制数字有信心的情况下将其相乘？例如，在将编码不同随机 pi 块的 ~10^12 双打相乘后，我可以期望什么精度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:54:11.537

如果您要求严格限制，如果所有操作都以 IEEE 754 双精度执行，则@EricPostpischil 的响应是绝对误差限制。

如果您要求信心，我将其理解为错误的统计分布。假设 [-e/2,e/2] 中的误差分布均匀，您可以尝试在数学堆栈交换的 M 次操作之后询问误差的理论分布......我猜这个紧密的界限在某种程度上非常保守。

让我们用一些 Smalltalk 代码来说明这些统计数据的实验估计（任何具有大整数/小数运算的语言都可以）：

```
nOp := 500.
relativeErrorBound := ((1 + (Float epsilon asFraction / 2)) raisedTo: nOp * 2 - 1) - 1.0.
nToss := 1000.
stats := (1 to: nToss)
    collect: [:void |
        | fractions exactProduct floatProduct relativeError  |
        fractions := (1 to: nOp) collect: [:e | 10000 atRandom / 3137].
        exactProduct := fractions inject: 1 into: [:prod :element | prod * element].
        floatProduct := fractions inject: 1.0 into: [:prod :element | prod * element].
        relativeError := (floatProduct asFraction - exactProduct) / exactProduct.
        relativeError].
s1 := stats detectSum: [:each | each].
s2 := stats detectSum: [:each | each squared].
maxEncounteredError  := (stats detectMax: [:each | each abs]) abs asFloat.
estimatedMean := (s1 /nToss) asFloat.
estimatedStd := (s2 / (nToss-1) - (s1/nToss) squared) sqrt. 
```

我得到了 nOp=20 双倍乘法的这些结果：

```
relativeErrorBound -> 4.440892098500626e-15
maxEncounteredError -> 1.250926201710214e-15
estimatedMean -> -1.0984634797115124e-18
estimatedStd -> 2.9607828266493842e-16 
```

对于 nOp=100：

```
relativeErrorBound -> 2.220446049250313e-14
maxEncounteredError -> 2.1454964094158273e-15
estimatedMean -> -1.8768492273800676e-17
estimatedStd -> 6.529482793500846e-16 
```

对于 nOp=500：

```
relativeErrorBound -> 1.1102230246251565e-13
maxEncounteredError -> 4.550696454362764e-15
estimatedMean -> 9.51007740905571e-17
estimatedStd -> 1.4766176010100097e-15 
```

您可以观察到标准偏差的增长比误差范围的增长要慢得多。

**更新：**首先近似`(1+e)^m = 1+m*e+O((m*e)^2)`，所以只要 m*e 足够小，分布大约是 m 在 [-e,e] 中均匀分布的总和，并且这个总和非常接近方差的正态分布（高斯）`m*(2e)^2/12`。您可以在 Matlab中检查`std(sum(rand(100,5000)))`附近。`sqrt(100/12)`

我们可以认为对于 仍然是正确的`m=2*10^12-1`，即大约`m=2^41`，`m*e=2^-12`。在这种情况下，全局误差为准正态分布，全局误差的标准差为`sigma=(2^-52*sqrt(2^41/12))`或近似`sigma=10^-10`

请参阅[http://en.wikipedia.org/wiki/Normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution)以计算 P(abs(error)>k*sigma)

*   在 68% 的情况下（1 sigma），您将拥有 10 位或更多位的精度。
*   `erfc(10/sqrt(2))`给你**小于 9 位精度的概率，大约 6*10^22 中的 1 个案例**，所以我让你计算只有 4 位精度的概率（你不能用双精度来评估它，它下溢）！！！

我的实验标准偏差比理论偏差小一点（2e-15 9e-16 4e-16 for 20 100 & 500 double）但这一定是由于我的输入错误 i/3137 i=1..10000 的偏差分布...

这是提醒结果将由输入中的错误分布主导的好方法，如果它们是由诸如 M_PI*num/den 之类的浮点运算产生的，则可能会超过 e

此外，正如 Eric 所说，仅使用 * 是一个非常理想的情况，如果混合 +，事情可能会退化得更快。

最后一点：我们可以制作一个达到最大误差界限的输入列表，将所有元素设置为 (1+e) 将四舍五入为 1.0，我们得到最大理论误差界限，但我们的输入分布有很大偏差！***HEM 错误***，因为所有乘法都是精确的，我们只得到 (1+e)^n，而不是 (1+e)^(2n-1)，所以大约只有一半的错误......

**更新2：逆问题**

既然你想要倒数，那么序列的长度 n 是多少，这样我就可以得到 k 位精度并具有一定的置信度 10^-c

我将只回答`k>=8`，因为`(m*e) << 1`在上述近似值中是必需的。

假设`c=7`，您得到 k 位，置信度为 10^ -7`5.3*sigma < 10^-k.`
`sigma = 2*e*sqrt((2*n-1)/12)`意味着`n=0.5+1.5*(sigma/e)^2`。 因此 n ~ 3*2^105*sigma^2，因为 sigma^2 < 10^-2k/5.3^2，我们可以写`e=2^-53`
`n < 3*2^105*10^-(2*k)/5.3^2`

AN 对于长度 n=4.3e12，少于 k=9 位的概率小于 10^-7，对于 10 位，n=4.3e10 左右。

对于 15 位，我们将达到 n=4 的数字，但这里我们的正态分布假设非常粗略且不成立，尤其是 5 sigma 处的分布尾部，因此请谨慎使用（Berry-Esseen theorem bounds how far from normal is such distribution [http ://en.wikipedia.org/wiki/Berry-Esseen_theorem](http://en.wikipedia.org/wiki/Berry-Esseen_theorem)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T03:28:43.083

假设所有输入值、中间值和最终值都没有下溢或上溢，所描述的*M*操作中的相对误差最多为 (1+2 ^(-53) ) ^(*M -1。*)

考虑将实数*a0*转换为双精度。结果是某个数字*a0* •(1+ *e* )，其中 -2 ^(-53) ≤ *e* ≤ 2 ^(-53) （因为转换为双精度应该总是产生最接近的可表示值，并且双精度值的量程是 2 ^(-53)最高位，最接近的值总是在半个量程内）。为了进一步分析，我们将考虑*e*的最坏情况值2 ^(-53)。

当我们将一个（先前转换的）值乘以另一个时，数学上精确的结果是*a0* •(1+ *e* ) • *a1* •(1+ *e* )。计算结果有另一个舍入误差，所以计算结果为*a0* •(1+ *e* ) • *a1* •(1+ *e* ) • (1+ *e* ) = *a0* • *a1* • (1+ *e* ) ³。显然，这是 (1+ *e* ) ³的相对误差。我们可以看到误差累积为 (1+ *e* ) ^(*M*)对于这些操作：每个操作将所有先前的错误项乘以 1+ *e*。

给定*N*个输入，将有*N*次转换和*N* -1 次乘法，因此最严重的错误将是 (1+ *e* ) ^(2 *N* - 1)。

*仅当N* ≤ 1时才能实现该误差的相等性。否则，误差必须小于这个界限。

请注意，这种简单的错误界限仅在一个简单的问题中才有可能，例如这个具有同质操作的问题。在典型的浮点算术中，混合了加法、减法、乘法和其他运算，因此简单地计算边界通常是不可能的。

对于*N* =10 ^(12) ( *M* =2•10 ^(12) -1)，上界小于 2.000222062•10 ^(12 个)单位的 2 ^(-53)，并且小于 0.0002220693。所以计算结果对四位小数以下的东西是好的。（但请记住，您需要避免上溢和下溢。）

（注意上述计算的严格性：我使用 Maple 精确计算了二项式 (1+2 ^(-53) ) ^(2•10 ^(12) -1)的 1000 项（已删除最初的 1 项）并添加一个可证明的值大于所有剩余项的总和。然后我让 Maple 将该精确结果评估为 1000 个十进制数字，它小于我上面报告的界限。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T02:07:00.620

对于 64 位浮点数，假设标准 IEEE 754，具有 52+1 位尾数。

这意味着相对精度在 1.0000...0 和 1.0000...1 之间，其中小数点后的二进制位数为 52。（您可以将 1.000...0 视为以二进制形式存储在尾数 AKA 有效位）。

误差是 1/2 的 52 次方除以 2（分辨率的一半）。注意我选择的相对精度尽可能接近 1.0，因为它是最坏的情况（否则在 1.111..11 和 1.111..01 之间，它更精确）。

在十进制中，双精度的最坏情况相对精度是 1.11E-16。

如果将 N 个双精度与此精度相乘，则新的相对精度（假设由于中间舍入没有额外误差）为：

```
1 - (1 - 1.11E-16)^N 
```

因此，如果您将 pi（或任何双倍 10^12）乘以，则错误的上限为：

```
1.1102e-004 
```

这意味着您可以对大约 4-5 位数有信心。

如果您的 CPU 支持中间结果的扩展精度浮点数，您可以忽略中间舍入误差。

如果没有使用扩展精度 FPU（浮点单元），则中间步骤中的舍入会引入额外的误差（与乘法相同）。这意味着严格的下限计算为：

```
1 -
((1 - 1.11E-16) * (1 - 1.11E-16) * (1 - 1.11E-16)
                * (1 - 1.11E-16) * (1 - 1.11E-16) % for multiplication, then rounding

               ... (another N-4 lines here) ...

                * (1 - 1.11E-16) * (1 - 1.11E-16))

= 1-(1-1.11E-16)^(N*2-1) 
```

如果 N 太大，则运行时间太长。`1-(1 - 1.11E-16)^N`可能的误差（中间舍入）为 2.2204e-012，与没有中间舍入= 1.1102e-012相比是两倍。

大约，我们可以说中间舍入使误差加倍。

如果将 pi 乘以 10^12 次，并且没有扩展精度 FPU。这可能是因为您在继续之前将中间步骤写入内存（并且可能执行其他操作）（只需确保编译器没有重新排序您的指令，以便没有 FPU 结果累积），然后对您的亲戚有一个严格的上限错误是：

```
2.22e-004 
```

请注意，对小数位的信心并不意味着它有时会完全是小数位。

例如，如果答案是：

1.999999999999，错误是1E-5，实际答案可能是2.000001234。

在这种情况下，即使是第一个十进制数字也是错误的。但这真的取决于你有多幸运（答案是否落在这样的边界上）。

* * *

该解决方案假定双打（包括答案​​）都已标准化。对于非规范化的结果，显然，对其进行非规范化的二进制数字会使精度降低那么多位数。

# java - 抛出 MyException 返回 NULL

> ID：12047412
> 
> 赞同：-5
> 
> 时间：2012-08-21T01:40:56.453
> 
> 标签：java, exception

我有下一个问题。

```
public Validator {

    ....

    public boolean validate() throws MyException
    ....
        if (!model.hasSomeCondition()) {
            throw getException(model);
        }
    ....
    return true;
}

....

public MyException getException (MyModel aModel) {
    MyException exception = new MyException(aModel.getFirstName());
    return exception;
}

....

public static class MyException extends Exception {
 ...
}

....

} 
```

当我捕获异常时，对象始终为空！

怎么了？我无法理解。

PS。感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T01:45:36.373

关于这段代码：

```
public boolean validate() throws MyException
    ....
        if (!model.hasFirstName()) {
            throw getException(model);
        }
    ....
    return true;
}

....

public MyException getException (MyModel aModel) {
    MyException exception = new MyException(aModel.getFirstName());
    return exception;
} 
```

返回 null 是有意义的，`aModel.getFirstName()`因为如果 aModel*没有*名字，则会引发异常。

如果这不是您遇到的问题，请澄清您的问题。***很多***。_

# actionscript-3 - Flash AS3如何设置舞台上一个按钮的索引？

> ID：12047414
> 
> 赞同：0
> 
> 时间：2012-08-21T01:40:57.263
> 
> 标签：actionscript-3, flash

我在时间线上手动添加了大约 60 个按钮。我需要指定每个的索引，但索引的给出取决于我从库中将对象放在舞台上的顺序。我不想通过名称以编程方式指定每个按钮的索引，因为没有简单的模式可以遵循。

```
private function buttonHandler(event:MouseEvent):void
        {
            event.target.parent.getChildIndex(event.target));
} 
```

我可以得到所有这样的索引，但它们不是我想要的顺序。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:10:42.697

要手动更改索引的顺序，请使用`addChildAt (DisplayObject, index)` 两个显示对象索引开关。请使用以下内容。`swapChildren(DisplayObject1,DisplayObject2)` `swapChildrenAt(index1,index2)`

如果您看下图，舞台中有实例 MovieClip 6。但索引是任意的。取决于真正从库中创建订单或拖放订单。所以我根据顺序按名称重新排序索引。

![在此处输入图像描述](../Images/b5a90acff1d4fdaecf0d1ddab9ea7d5a.png)

```
import flash.display.MovieClip;

var mc:MovieClip;
for(var i:int = 0; i<this.numChildren; i++)
{
    mc = this.getChildAt(i) as MovieClip;
    trace("before clipName: " + mc.name);
}

//re-ordering
for(i = 0; i<this.numChildren; i++)
{
    mc = this.getChildByName("mc"+i) as MovieClip;
    addChildAt(mc,i);
}

for(i = 0; i<this.numChildren; i++)
{
    mc = this.getChildAt(i) as MovieClip;
    trace("after clipName: " + mc.name);
} 
```

* * *

```
console:

before clipName: mc1
before clipName: mc4
before clipName: mc3
before clipName: mc5
before clipName: mc2
before clipName: mc0

after clipName: mc0
after clipName: mc1
after clipName: mc2
after clipName: mc3
after clipName: mc4
after clipName: mc5 
```

# git - 如何在 Git 的当前分支中获取最新的头部名称？

> ID：12047417
> 
> 赞同：2
> 
> 时间：2012-08-21T01:41:23.327
> 
> 标签：git

例如，在 Linux Kernel 的 git 工作树中。

```
$ git checkout v2.6.6
$ git checkout v3.3 
```

如何在当前分支 v3.3 中找到最后一个头名或 HASHID？在上面的示例中，它应该获得 v2.6.6 或 v2.6.6 的 HASHID。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T01:51:34.117

每次移动头部时，git 都会将其记录在`reflog`.

```
$ git reflog 
```

如果您要在问题中的命令之后运行此命令，则旧的提交哈希将位于第二行，并将引用您要移动到的标签。

例如

```
ff06760 HEAD@{0}: checkout: moving from 9b49c22462f5dd73ff18eacff5983f141f98cb82 to v3.3
9b49c22 HEAD@{1}: checkout: moving from ff06760cd0db8cef49915e68886c66c09b1cade1 to v2.6.6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T03:36:24.897

扩展 Blake Taylor 的答案，最后一个`HEAD`位置总是`HEAD@{1}`，但这种类型的修订规范比这强大得多：

```
git checkout HEAD@{n} ;# checkout the nth prior position of HEAD
git checkout HEAD@{"1 hour ago"} ;# checkout HEAD an hour back
git checkout master@{"yesterday"} ;# checkout yesterday's master
git checkout master@{"1 week ago"} ;# checkout last week's
git checkout @{-1} ;# checkout the last branch checked out
git checkout @{-n} ;# checkout the nth last branch 
```

和我个人最喜欢的：

```
git checkout :/"<regex>" ;# checkout the youngest commit matching <regex> 
```

……等等什么？这个语法*很棒：*

```
git checkout :/"Case 959" ;# see the state when we fixed case 959
git checkout :/"ct/topic" ;# checkout the state when 'ct/topic' was merged
git checkout :/"^Hotfix" ;# checkout the most recent commit that started 'Hotfix' 
```

了解这些 refspecs 可以轻松浏览您的历史记录。

# python - 我如何真正使用 pandas DataFrame 的 `ix` 方法？

> ID：12047418
> 
> 赞同：3
> 
> 时间：2012-08-21T01:41:25.277
> 
> 标签：python, pandas

注意：因为我问了这个问题，`.ix`仍然存在，但或多或​​少已被`.loc`基于标签的索引和`.iloc`位置索引所取代。

* * *

[阅读了`ix`DataFrames 方法的](http://pandas.pydata.org/pandas-docs/stable/indexing.html#advanced-indexing-with-hierarchical-index)文档后，我对 MultiIndexed DataFrame 的以下行为（指定索引的选择列）感到有些困惑。

```
In [57]: metals
Out[57]: 
<class 'pandas.core.frame.DataFrame'>
MultiIndex: 24245 entries, (u'BI', u'Arsenic, Dissolved', -2083768576.0, 1.0) 
                        to (u'WC', u'Zinc, Total',         1661183104.0, 114.0)
Data columns:
Inflow_val      20648  non-null values
Outflow_val     20590  non-null values
Inflow_qual     20648  non-null values
Outflow_qual    20590  non-null values
dtypes: float64(2), object(2)

In [58]: metals.ix['BI'].shape  # first column in the index, ok
Out[58]: (3368, 4)

In [59]: metals.ix['BI', :, :, :].shape  # first + other columns, ok
Out[59]: (3368, 4)

In [60]: metals.ix['BI', 'Arsenic, Dissolved'].shape # first two cols
Out[60]: (225, 4)

In [61]: metals.ix['BI', 'Arsenic, Dissolved', :, :].shape # first two + all others
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
<ipython-input-62-1fb577ec32fa> in <module>()
----> 1 metals.ix['BI', 'Arsenic, Dissolved', :, :].shape                              
# traceback spaghetti snipped
KeyError: 'no item named Arsenic, Dissolved'

In [62]: metals.ix['BI', 'Arsenic, Dissolved', :, 1.0].shape # also fails 
```

我花了很长时间才意识到我一直在努力实现的目标`In [61]`可以通过`In [60]`. 为什么该`ix`方法的行为是这样的？我真正想要了解的是`In [62]`.

我的猜测是我需要重新定义索引层次结构，但我很好奇是否有更简单的方法。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T12:18:26.090

如果您想根据 MultiIndex 级别值选择行/列，我建议使用[“.xs()”](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.xs.html?highlight=xs#pandas.DataFrame.xs)方法。另请参阅[使用复合（分层）索引从 Pandas 数据框中选择行](https://stackoverflow.com/questions/11941492/selecting-rows-from-a-pandas-dataframe-with-a-compound-hierarchical-index)

对于此示例，您可以使用：

```
#short hand:
metals.xs('BI', level=0).xs('Arsenic, Dissolved', level=0).xs(1, level=1)

# more verbose
metals.xs('BI', level='bmp_category').xs('Arsenic, Dissolved', level='parameter').xs(1, level='storm')

# two chained `ix` calls:
metals.ix['BI', 'Arsenic, Dissolved'].ix[:, 1] 
```

# mysql - 选择具有最大字符串长度的结果

> ID：12047425
> 
> 赞同：3
> 
> 时间：2012-08-21T01:42:40.247
> 
> 标签：mysql, sql

我有一个看起来像这样的表：

```
+-------+------------------+------+-----+---------+----------------+
| Field | Type             | Null | Key | Default | Extra          |
+-------+------------------+------+-----+---------+----------------+
| id    | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| name  | varchar(30)      | NO   |     |         |                |
+-------+------------------+------+-----+---------+----------------+ 
```

很简单的表。出于以下几个原因，我正在尝试找到一种仅选择最大长度为 8 个字符的结果的方法：

1) 为记录集创建的 HTML 表太窄，无法处理超过 8 个字符的内容。

2) 我们不能在显示名称时截断名称。

我正在查看 MySQL 手册，但找不到任何可靠的结果。我将尝试在 where 子句中使用 char_length ，看看我能想出什么并将我发现的东西发回，但我希望有人以前做过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T01:45:32.533

您需要使用`CHAR_LENGTH`来获取字符的长度。尝试：

```
SELECT *
FROM tableName
WHERE CHAR_LENGTH(name) <= 8       -- selects 8 characters or below
-- WHERE CHAR_LENGTH(name) = 8     -- selects exactly 8 characters 
```

附加信息：

`LENGTH()`返回以字节为单位的字符串长度。
`CHAR_LENGTH()`返回以字符为单位的字符串长度。

```
select length(_utf8 '€') as ByteCount, char_length(_utf8 '€') LengthCount

--  Result
--  ============+==============
--  ByteCount   +   LengthCount
--  ============+==============
--         3    +           1
--  ============+============== 
```

# sql-server - 调试临时存储过程

> ID：12047427
> 
> 赞同：0
> 
> 时间：2012-08-21T01:42:52.647
> 
> 标签：sql-server, visual-studio, debugging

在 SQL Server 中，我可以调试 SP，但我想调试本地临时 SP（#SP）。谁能告诉我这是否可能以及我该怎么做？

如果我可以从 Visual Studio 2010 调试它，那就太好了。

请注意，我使用的是 SQL2008 速成版，但如果它在其他版本中工作，我可以在我的工作地点调试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:53:17.433

您可以运行 2 个 Visual Studio 实例，其中一个正在调试并在创建临时 SP 后在断点处停止，然后从另一个 Visual Studio 实例刷新应显示新临时 SP 的 SP 列表。然后你就可以开始调试了。

# php - 如何处理外部 API 延迟

> ID：12047429
> 
> 赞同：2
> 
> 时间：2012-08-21T01:42:58.967
> 
> 标签：php, web-services, curl, memcached, latency

我有一个应用程序正在使用 Curl 获取多个电子商务网站，寻找最优惠的价格。此过程返回一个表格，比较所有搜索网站的价格。

但是现在我们有一个问题，商店的数量开始增加，而加载时间实际上在用户体验方面是无法接受的。（实际上是 10 秒页面加载）

因此，我们决定创建一个数据库，并开始将所有 Curl 过滤结果注入到该数据库中，以减少 DNS 调用，并增加 Pageload。

我想知道，尽管我们付出了所有努力，实现 Memcache 模块仍然是一个优势吗？我的意思是，它会更有帮助还是只是浪费时间？

Memcache 的想法是受到这个主题的启发，一个人有类似的问题：[Memcache 处理高延迟 Web 服务 API - 好主意吗？](https://stackoverflow.com/questions/1911081/memcache-to-deal-with-high-latency-web-services-apis-good-idea)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:35:17.897

Memcache 可能会有所帮助，但（在我看来）这是一种解决问题的奇怪方式。如果是我，我会这样做：

首先，我确实会在我的数据库中缓存我可以缓存的所有内容。当用户搜索或任何触发此操作的交互时，我会向他们显示一个“搜索”页面，其中包含服务器当前具有的任何结果，以及一个在异步搜索完成时填满的进度条。

当它们可用时，我会使用 AJAX 添加其他结果。我想象搜索大约需要十秒钟 - 它可能需要更长的时间，这很好。只要您有进度条，您的用户就会欣赏并理解 Stuff Is Going On。

显然，通过系统进行的搜索越多，数据库中的最新数据就越多。我会使用不到半小时的缓存结果，我还会记录搜索词并确保始终缓存前 100 个（左右）搜索。

了解您的客户并拥有他们想要的东西。这与任何特定技术没有太大关系，但这完全取决于您预测他们想要什么的能力（或编写为您预测的软件！）

哦，PHP 完全没有理由不能胜任这项工作。将一堆不相关的接口捆绑在一起是 PHP 最擅长的事情之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:26:54.783

您的结果超出了*PHP*的范围。当一个 cronjob 可以很容易地用于填充您的数据库并且您的 PHP 脚本可以简单地查询您的数据库时，不要费心在 PHP 中破解一个结果。

如果您打算只坚持使用 PHP，那么我建议您更改脚本以根据您填充的结果索引您的数据库。要填充结果，请让一个 cronjob ping 一个用户无法访问的 PHP 脚本，该脚本将执行您的所有 curl 功能。

# c# - NamedPipeServerStream 和 await 关键字

> ID：12047430
> 
> 赞同：3
> 
> 时间：2012-08-21T01:43:03.330
> 
> 标签：c#, .net-4.5, async-ctp

文章[C# Named Pipes with Async](http://www.codeproject.com/Tips/441841/Csharp-Named-Pipes-with-Async)是为 Async CTP 库 v3.0 编写的，它使用的代码不能与 .NET 4.5 一起编译。具体来说

```
await pipe.WaitForConnectionAsync();

var message = await streamReader.ReadToEndAsync(); 
```

失败，因为没有[NamedPipeClientStream](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeclientstream.aspx)这样的方法。

CTP 和 .NET 4.5 中的包含在这方面有什么变化吗？我错过了完成这项工作的步骤吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T02:47:05.800

Async CTP 中实现的`*Async`方法是临时扩展方法（即它们是未添加到所涉及的实际类的扩展方法）。RTM 将这些`Async`方法“移动”到适用类的实例方法中。我认为“移动”并不像复制扩展方法那么容易，并且涉及到一些工作/测试/验收。我收集到有些人由于各种原因无法被感动。 `NamedPipeServerStream.WaitForConnectionAsync`似乎是其中一种方法。您必须使用该`TaskFactory.FromAsync`方法创建一个`Task`从`BeginWaitForConnection`/`EndWaitForConnection`对到`await`on 的对象。就像是：

```
 await Task.Factory.FromAsync(pipe.BeginWaitForConnection,
        pipe.EndWaitForConnection, null);
    StreamReader reader = new StreamReader(pipe);
    await reader.ReadToEndAsync(); 
```

# ruby-on-rails - 我应该如何在 Redis 中构建这个逻辑？

> ID：12047434
> 
> 赞同：1
> 
> 时间：2012-08-21T01:44:32.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redis

我想跟踪用户在过去 24 小时内观看视频的次数。我说“视频”，因为用户可以观看多个视频。

这也意味着密钥将在 24 小时后过期。认为我的钥匙应该是这样的：

```
users/1/videos/4/count/12 
```

该结构应包含用户 ID、视频 ID 和计数。随意提出更好的密钥结构。

我正在考虑使用[set](http://redis.io/commands#set)。还是我应该考虑一个更好的选择？也许是一个清单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:12:50.243

为什么要在 24 小时后使密钥过期？您是只从午夜计算到午夜，还是从*现在开始*计算 24 小时的观看次数？在第二种情况下，使密钥过期是错误的，因为如果您在 16:00 查看结果，您将只能获得最近 16 小时的结果，而不是您想要的 24 小时的结果。

我会`Strings`用钥匙保存：`video:ID:user:ID:hour`

示例：`video:31245:user:15:16`有值`2`

这告诉您具有 ID 的用户已经`15`多次观看具有 ID`31245`的视频。`16:00 to 16:59``2`

如果您想要 24 小时的结果，您将获得当前小时并获取前 24 小时的所有键并对值求和。

然后最后每个密钥都应该在 24 小时内过期。

˙

希望这对您有所帮助！:)

# asp.net-mvc-3 - asp.net mvc 3：我怎样才能为我的整个解决方案只使用 1 个配置文件？

> ID：12047439
> 
> 赞同：0
> 
> 时间：2012-08-21T01:45:24.313
> 
> 标签：asp.net-mvc-3, c#-4.0

我有一个带有几个项目（WCF、DAL UI 等）的 asp.net mvc 3 解决方案。是否可以将所有配置设置粘贴在 1 个 web.config 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:42:20.563

是的你可以。其他网络配置（不是根配置）只是覆盖了一些特定于该文件夹（视图）设置，仅此而已。

*   [ASP.NET MVC——我们如何进行配置](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/ASPNET-MVC-e28093-how-we-do-configuration.aspx)
*   [ASP.NET 开发人员应该了解的关于 Web.config 继承和覆盖的 10 件事](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)

# ruby - 制作环境变量的索引哈希

> ID：12047443
> 
> 赞同：2
> 
> 时间：2012-08-21T01:46:01.900
> 
> 标签：ruby, rhomobile

我有一个小的 ruby​​ 函数来返回查询结果。我想检查我服务器上的环境变量，所以我写了这个函数。但它没有像我预期的那样根据 puts 输出和代码返回 @result 。我究竟做错了什么？

```
 def query(params=nil)
    @result = {}
    count = 1
    ENV.each do |k,v|
     @result[count.to_s] = { "name" => k, "company" => v }
     puts "[#{count.to_s}] = { 'name' => #{k}, 'company' => #{v} }"
     count += 1
    end
  end 
```

输出：

```
irb(main):070:0> query
[1] = { 'name' => ALLUSERSPROFILE, 'company' => C:\ProgramData }
[2] = { 'name' => APPDATA, 'company' => C:\Users\xxxx\AppData\Roaming }
[3] = { 'name' => CLIENTNAME, 'company' => xxxx }
[4] = { 'name' => COLUMNS, 'company' => 160 }
[5] = { 'name' => CommonProgramFiles, 'company' => C:\Program Files (x86)\Common Files }
[6] = { 'name' => CommonProgramFiles(x86), 'company' => C:\Program Files (x86)\Common Files }
[7] = { 'name' => CommonProgramW6432, 'company' => C:\Program Files\Common Files }
.... 
```

@结果

```
irb(main):075:0> @result
=> {"ALLUSERSPROFILE"=>"C:\\ProgramData", "APPDATA"=>"C:\\Users\\xxxx\\AppData\\Roaming", "CLIENTNAME"=>"wxxxx", "COLUMNS"=>"160", "CommonProgramFiles"=>"C:
\\Program Files (x86)\\Common Files", "CommonProgramFiles(x86)"=>"C:\\Program Files (x86)\\Common Files", "CommonProgramW6432"=>"C:\\Program Files\\Common Files ..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:21:27.943

将数组用于列表：

```
def query
  ENV.map {|k,v|  { "name" => k, "company" => v } }
end

@result = query 
```

然后根据需要打印。

如果您真的想要索引哈希，请使用：

```
def query
  result = []
  ENV.each_with_index {|v,i|  result.push(i, { "name" => v[0], "company" => v[1] }) }
  Hash[*result]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:18:08.053

嗯，这很奇怪。我在本地运行了代码，它可以按您的预期工作，设置`@result`为以下内容...

```
 > @result
 => {"1"=>{"name"=>"jabjab", "company"=>"jibjib"}, "2"=>{"name"=>"blabla"... 
```

但是，我确实注意到它`query`返回了 environment 的内容，这就是 value 的`@result`样子。您是否有可能按如下方式调用查询，覆盖 的值`@result`？这很容易被忽视。

```
> @result = query 
```

# ruby - 获取给定键的哈希键值对，在 ruby 中

> ID：12047447
> 
> 赞同：12
> 
> 时间：2012-08-21T01:46:58.683
> 
> 标签：ruby

我有一个哈希 h1 和密钥 k1。我需要为哈希中的给定键返回完整的键值对。

就像关键的“鱼”一样，我需要打印“鱼”=>“水生动物”

@h1，打印所有键值对。我需要打印给定键的键值对的方法

我对 ruby​​ 很陌生，所以很抱歉这个菜鸟问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T02:45:20.197

有一种方法，Hash#assoc 可以做类似的事情。但它返回数组中的键和值，您可以轻松地将其更改为哈希。另一种方法是使用 Hash#select，它会根据给定的块返回一个哈希值。

```
h1 = { "fish" => "aquatic animal", "tiger" => "big cat" }
h1.assoc "fish"                       # ["fish", "aquatic animal"]
h1.select { |k,v| k == "fish" }       # {"fish"=>"aquatic animal"} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-21T05:01:35.620

在红宝石中 >= 1.9

```
value_hash = Hash[*h1.assoc(k1)]
p value_hash                 # {"fish"=>"aquatic animal"} 
```

在红宝石中 < 1.9

```
value_hash = Hash[k1, h1[k1]]
p value_hash                 # {"fish"=>"aquatic animal"} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T20:20:34.043

最简单的答案：

```
def find(k1)
  {k1 => h1[k1]}
end 
```

这将返回您需要的 {'fish' => 'aquatic animal'}。

因为您已经拥有了它，所以无需费力地获得钥匙！:-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-06T13:52:42.777

最简单和本地的方式是使用方法`slice`。

```
h1 = { fish: 'aquatic animal', tiger: 'big cat', dog:  'best human friend' }
k1 = :fish 
```

去做就对了：

```
h1.slice(k1)
# => {:fish=>"aquatic animal"} 
```

更好的是，您可以为此使用多个键，例如，k1 和 k3

```
k1 = :fish
k3 = :dog

h1.slice(k1, k3)
# => {:fish=>"aquatic animal", :dog=>"best human friend"} 
```

清晰、简单、高效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T02:44:02.867

我得到了一个解决方法，通过从键值对创建一个新的哈希，然后使用 puts h1 输出它的值

# iphone - 将多个图像附加到电子邮件

> ID：12047448
> 
> 赞同：0
> 
> 时间：2012-08-21T01:47:02.133
> 
> 标签：iphone, ios, image, email, attachment

我正在使用`ELCimagepicker`将多个图像附加到电子邮件中，但我不确定如何使每个图像都`NSData`独一无二，因此我可以将它们附加到我的电子邮件中。

>

```
- (void)launchController {
  ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc] initWithNibName:@"ELCAlbumPickerController" bundle:[NSBundle mainBundle]];
  ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];
  [albumController setParent:elcPicker];
  [elcPicker setDelegate:self];
  [self presentModalViewController:elcPicker animated:YES];
 }

- (void)elcImagePickerController:(ELCImagePickerController *)picker     didFinishPickingMediaWithInfo:(NSArray *)info {

  [self dismissModalViewControllerAnimated:YES];
  int i = 0;
  for(NSDictionary *dict in info) {
     i++;
     UIImageView *imageview = [[UIImageView alloc] initWithImage:[dict     objectForKey:UIImagePickerControllerOriginalImage]];
     NSData *name = UIImageJPEGRepresentation(imageview, 1.0);
   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:49:12.707

从此链接获取应用程序 [https://github.com/elc/ELCImagePickerController](https://github.com/elc/ELCImagePickerController)

并遵循代码的更改

使用 for 循环

```
-(IBAction)launchController 

{

ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc] initWithNibName:@"ELCAlbumPickerController" bundle:[NSBundle mainBundle]];    
ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];
[albumController setParent:elcPicker];
[elcPicker setDelegate:self];

ELCImagePickerDemoAppDelegate *app = (ELCImagePickerDemoAppDelegate *)[[UIApplication sharedApplication] delegate];
[app.viewController presentModalViewController:elcPicker animated:YES];
[elcPicker release];
[albumController release];

[self buttonPressed];

}

- (void)buttonPressed
{
    // Create image picker controller
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

    // Set source to the camera
    imagePicker.sourceType =  UIImagePickerControllerSourceTypeSavedPhotosAlbum;

    // Delegate is self
    imagePicker.delegate = self;

    // Allow editing of image ?
    imagePicker.allowsImageEditing = NO;

    // Show image picker
    [self presentModalViewController:imagePicker animated:YES]; 
}

- (void)emailImage:(UIImage *)image
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    // Set the subject of email
    [picker setSubject:@"Picture from my iPhone!"];

    // Add email addresses
    // Notice three sections: "to" "cc" and "bcc"   
    [picker setToRecipients:[NSArray arrayWithObjects:@"emailaddress1@domainName.com", @"emailaddress2@domainName.com", nil]];
    [picker setCcRecipients:[NSArray arrayWithObject:@"emailaddress3@domainName.com"]]; 
    [picker setBccRecipients:[NSArray arrayWithObject:@"emailaddress4@domainName.com"]];

    // Fill out the email body text
    NSString *emailBody = @"I just took this picture, check it out.";

    for (int i=0; i<[imagedelegate.imgarray count]; i++) 
    {

        UIImageView *image=[[UIImageView alloc] init];
        image=[imagedelegate.imgarray objectAtIndex:i];

    // This is not an HTML formatted email
    [picker setMessageBody:emailBody isHTML:NO];

    // Create NSData object as PNG image data from camera image
    NSData *data = UIImagePNGRepresentation(image);

    // Attach image data to the email
    // 'CameraImage.png' is the file name that will be attached to the email
    [picker addAttachmentData:data mimeType:@"image/png" fileName:@"CameraImage"];

    // Show email view  
    [self presentModalViewController:picker animated:YES];

    // Release picker
    [picker release];
    }
}

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // Access the uncropped image from info dictionary
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    // Dismiss the camera
    [self dismissModalViewControllerAnimated:YES];

    // Pass the image from camera to method that will email the same
    // A delay is needed so camera view can be dismissed
    [self performSelector:@selector(emailImage:) withObject:image afterDelay:1.0];

    // Release picker
    [picker release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:00:46.633

下载并将 Objective-Zip、MiniZip 和 ZLib 拖放到您的项目中，从此链接[http://code.google.com/p/objective-zip/downloads/list](http://code.google.com/p/objective-zip/downloads/list) (Objective-zip).. 导入文件：ZipFile .h、ZipException.h、FileInZipInfo.h、ZipWriteStream.h、ZipReadStream.h、zlib.h

使用以下代码：

```
NSString *stringPath1 = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0]];
    NSString *FileName=[stringPath1 stringByAppendingPathComponent:@"Your file name"];

    NSString *stringPath=[stringPath1 stringByAppendingPathComponent:[@"Your file name" stringByAppendingFormat:@".zip"]];
    NSArray *files = [[NSFileManager defaultManager]contentsOfDirectoryAtPath:FileName error:&error];
    ZipFile *zipFile = [[ZipFile alloc]initWithFileName:stringPath mode:ZipFileModeCreate];

    for(int i = 0;i<files.count;i++){

        id myArrayElement = [files  objectAtIndex:i];
        NSLog(@"add %@", myArrayElement);

        NSString *path = [FileName stringByAppendingPathComponent:myArrayElement];
        NSDictionary *attributes = [[NSFileManager defaultManager]attributesOfItemAtPath:path error:&error];
        NSDate *Date = [attributes objectForKey:NSFileCreationDate];

        ZipWriteStream *streem = [zipFile writeFileInZipWithName:myArrayElement fileDate:Date compressionLevel:ZipCompressionLevelBest];
        NSData *data = [NSData dataWithContentsOfFile:path];
        [streem writeData:data];
        [streem finishedWriting];
    }

    [zipFile close]; 
```

# ios - Facebook 返回 ID 但不存在帖子。iOS sharekit 视频上传

> ID：12047452
> 
> 赞同：1
> 
> 时间：2012-08-21T01:47:42.523
> 
> 标签：ios, facebook, video, sharekit

我正在从我的 iOS 应用程序将视频上​​传到 Facebook。它似乎可以正确上传，但我的墙上没有显示任何帖子。

我阅读了 API 文档，它说在成功的情况下它会返回一个视频 ID，这正是正在发生的事情 - 只是该 ID 似乎没有指向任何东西，并且用户的个人资料上没有任何内容.

照片上传工作正常，只是视频失败。

注意：这在几天前确实有效，然后在我开始压缩要上传的视频之前。我试图恢复到非压缩视频，但没有运气，它们现在也不起作用。

有没有人有类似的问题？

谢谢。

# c++ - 这两个错误的原因是什么：未生成赋值运算符和未引用的形参？

> ID：12047454
> 
> 赞同：1
> 
> 时间：2012-08-21T01:47:45.453
> 
> 标签：c++, error-handling

我有一段代码和一些错误和警告，我不明白它们为什么会发生。你能给我你的建议吗？

首先：

```
#pragma once

#include "Vector3.h"
#include <vector>

#include <GL/glew.h>

class BoundingSphere
{
public:
    float radius;
    Vector3 center;
    BoundingSphere(float radius, Vector3 center) : radius(radius),center(center) {};
    BoundingSphere() {};
};

class TriangleFace;

class MeshVertex
{

private:
    Vector3 position; 
    std::vector<TriangleFace *> faces;
    Vector3 normal;
    bool normalUpdateNeeded;

public:

    unsigned int index;

    MeshVertex(void);
    MeshVertex(Vector3 position);
    ~MeshVertex(void);

    Vector3 &getPos() {return position;};
    void addFace(TriangleFace *face);
    const std::vector<TriangleFace*>& getFaces() {return faces;  };
    Vector3 getNormal();

    void setPos(Vector3 & pos) {position = pos; }
    bool isSurfaceParticle() {return faces.size()>0;}
    void updateNormal();
};

class TriangleFace
{
private:
    Vector3 normal;
    bool normalUpdateNeeded;

public:
    MeshVertex* particles[3];
    TriangleFace(void);
    TriangleFace(MeshVertex *p1, MeshVertex *p2, MeshVertex *p3);
    MeshVertex& operator[](int i) {  return *(particles[i]); }
    Vector3 getNormal();
    ~TriangleFace(void);
    void updateNormal();
};

class TriangleMesh
{
protected:
    std::vector<MeshVertex> particles;
    std::vector<TriangleFace> faces;

public:
    TriangleMesh(string filename);
    ~TriangleMesh(void);

    void reserveNumberOfFaces(unsigned int n) { faces.reserve(n); };
    void addFace(TriangleFace &f) {faces.push_back(f);};
    void addFace(MeshVertex *p1, MeshVertex *p2, MeshVertex *p3) {faces.push_back(TriangleFace(p1,p2,p3));};

    std::vector<TriangleFace>& getFaces() {return faces;};
    std::vector<MeshVertex>& getParticles() { return particles; };

    void updateNormals();

    BoundingSphere getBoundingSphere();
};

class RenderTriangleMesh
{
private: 
    TriangleMesh &m;

    GLuint vboid[2];

    GLfloat *vertices;
    GLfloat *normals;

public:
    RenderTriangleMesh(TriangleMesh &m);
    void draw();

private:
    void generateVBOs();
    void updateVBOs();

}; 
```

错误：

> 错误 C2220：警告视为错误 - 未生成“对象”文件
> 
> 警告 C4512：“RenderTriangleMesh”：无法生成赋值运算符

和另外一个：

```
 virtual short SimpleAddOK(const GeneralMatrix* gm) { return 0; } 
```

错误 ：

> 错误 C2220：警告视为错误 - 未生成“对象”文件
> 
> 警告 C4100：“gm”：未引用的形式参数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T02:32:14.667

首先是说编译器无法生成赋值运算符。发生这种情况是因为您的参考成员，因为参考不能被重新定位：

```
struct foo
{
    int& i;
};

int x, y;
foo f = { x };
foo g = { y };

f = g; // ??? 
```

您可以通过自己明确禁用警告来使警告静音：

```
struct foo
{
    int& i;

private:
    foo& operator=(const foo&); // declared but never defined
}; 
```

这是使赋值运算符不可用的老技巧，但会阻止编译器生成它。

在 C++11 中，您可以这样做：

```
struct foo
{
    int& i;

private:
    foo& operator=(const foo&) = delete;
}; 
```

这是更明确和更少的hacky。

* * *

另一个是因为您从未使用过您的论点，这通常是程序逻辑中的错误。如果您不使用它，您可能应该删除它的名称：

```
virtual short SimpleAddOK(const GeneralMatrix* /* gm */) { return 0; } 
```

我个人将其完全删除。其他人这样做：

```
virtual short SimpleAddOK(const GeneralMatrix* gm)
{
    (void)gm; // this "uses" gm

    return 0;
} 
```

它有时包含在一个名为的宏中`USE`：

```
#define USE(x) (void)x

virtual short SimpleAddOK(const GeneralMatrix* gm)
{
    USE(gm);

    return 0;
} 
```

我认为这些不如简单地删除名称，因为如果警告实际上是正确的（也就是说，您的程序*确实*存在缺陷并且没有看到它），那么您就是在掩盖警告，违背了目的。

警告应始终固定，而不是静音。

# java - 为什么从Fragment跳转到新Activity时overridePendingTransition不生效？

> ID：12047456
> 
> 赞同：8
> 
> 时间：2012-08-21T01:48:11.820
> 
> 标签：java, android, android-fragments, android-activity, android-animation

第一个活动包含一个片段，片段内有一个按钮，当我点击这个按钮时，我希望跳转到一个具有不同动画的新活动。所以我在片段中这样做：

```
 mButton.setOnClickListener(new OnClickListener() {
               @Override
               public void onClick(View v) {
                     Intent intent = new Intent(getActivity(), NewActivity.class);
                     getActivity().startActivity(intent);
                     getActivity().overridePendingTransition(
                           R.anim.forward_activity_move_in,
                           R.anim.forward_activity_move_out);
               }); 
```

然而，当移动到新的 Activity 时，新的动画不会生效，所以我想知道我做错了。我希望有人可以帮助我，谢谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:09:40.780

谢谢，我解决了这个问题，您可以在[TabHost 内的更改活动转换中找到解决方案](https://stackoverflow.com/questions/7759314/change-activity-transition-when-inside-a-tabhost)

那么问题不是 Fragment 的情况，而是 TabActivity 导致了问题。

# java - Java String getBytes ISO_8859_1 的 Node.js 等效项

> ID：12047458
> 
> 赞同：2
> 
> 时间：2012-08-21T01:48:44.957
> 
> 标签：java, node.js, character-encoding, iso-8859-1

我正在尝试将一些代码从 Java 移植到 Node.js，但遇到了一些麻烦。

`"645553dd"`给定Java 中的字符串，我可以使用`.getBytes("ISO_8859_1")`看起来像`{ 54, 52, 53, 53, 53, 51, 100, 100 }`. 但是，我很难在 Node.js 中做同样的事情。我尝试使用缓冲区，转换为类似的 ASCII 字符集，但没有运气。我尝试使用[node-iconv](https://github.com/bnoordhuis/node-iconv)，但它一直抛出错误`EILSEQ, Illegal character sequence`。如何在 Node.js 中获得相同的字节集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:27:21.370

您应该能够从 Buffer 的[默认编码](http://nodejs.org/api/buffer.html#buffer_new_buffer_str_encoding)`UTF-8`转换为`ISO-8859-1`with `iconv`：

```
var Iconv  = require('iconv').Iconv;
var ic8859 = new Iconv('UTF-8', 'ISO-8859-1');

console.log( ic8859.convert(new Buffer('645553dd')) ); 
```

请注意，这些值是以 base-16 输出的 -- `0x64 == 100`：

```
<SlowBuffer 36 34 35 35 35 33 64 64> 
```

* * *

如果您仍然收到`EILSEQ`错误，则您的字符串包含不支持的字符代码`ISO-8859-1`。您必须[翻译或忽略](https://github.com/bnoordhuis/node-iconv#dealing-with-untranslatable-characters)这些字符：

```
var ic8859 = new Iconv('UTF-8', 'ISO-8859-1//IGNORE'); 
```

或者尝试不同的编码，例如[UTF-8](http://en.wikipedia.org/wiki/UTF-8)：

```
console.log(new Buffer('645553dd'));
// <Buffer 36 34 35 35 35 33 64 64> 
```

# version-control - perforce：同步到较早的版本

> ID：12047460
> 
> 赞同：27
> 
> 时间：2012-08-21T01:48:58.060
> 
> 标签：version-control, perforce

我想测试修复并比较修复之前与现在的行为；我需要同步到早期版本。因此，如果修复是在修订版 x 中提交的；我怎样才能同步到之前的一个版本，比如 x0？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-06-22T08:59:16.147

假设您想从修订版“n+1”（回滚）返回修订版“n”。您可以采取以下步骤：

1.  p4 同步 ...@n

    这会将您的文件同步到您想要的旧版本

2.  p4编辑...

    打开所有文件进行编辑或执行“p4 编辑文件名”以仅打开特定文件进行编辑。

3.  p4 同步 ...@n+1

    在提交之前，您需要将文件同步到存储库中的最新版本。

4.  p4 解决 -ay

    这将接受您所做的更改，即恢复您从修订版“n”移动到“n-1”时所做的所有更改。如此有效，您的所有文件都已回滚到本地存储库中的修订版“n”。

5.  p4 提交...

    继续并提交更改。这会将所有主存储库回滚到修订版“n”。实际上，修订版“n”和“n+2”（当前）将是相同的。

6.  p4 diff2 -q 存储库@n 存储库@n+2

    这只是为了验证是否已回滚文件。这应该表明您在两个修订版中没有不同的文件。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-21T01:51:21.897

我在写我的问题时找到了答案。我已经试了：

```
p4 sync ...@x0 
```

其中 x0 是包含修复的更改之前的更改列表。但只有一小部分文件被还原。我发现当我们指定时......只有该文件夹和子文件夹中的文件才能同步。所以上面的命令应该从工作空间的根目录执行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-03T00:02:46.583

如果要同步特定文件的特定版本号（不是更改列表号）。这对我有用：

```
p4 sync //your/depot/path/and/file.name#1 
```

要验证您是否拥有所需的版本，您可以使用`have`cmd

```
p4 have //your/depot/path/and/file.name 
```

# struts - 我是否编写了适当的 strut-config.xml 文件？

> ID：12047461
> 
> 赞同：1
> 
> 时间：2012-08-21T01:49:03.833
> 
> 标签：struts

我正在尝试学习 struts 并遇到了问题。所以这里是它的长短：

1.  我遇到的问题是我单击 JSP 提交按钮
2.  调用适当的操作。
3.  该操作会跳转到 java 类并创建适当的响应。
4.  响应返回给操作。
5.  当响应最初不是 null 时，该操作将 ActionForm 结果设置为 null。

所以到目前为止我最好的猜测是，当我创建第二个动作类型或 web xml 动作映射不正确时，我以某种方式弄乱了配置。那么谁能告诉我什么是不正确的？

## struts-config.xml

```
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd">
<struts-config>
    <form-beans>
        <form-bean name="searchForm" type="com.agreen.struts.test.SearchForm" />
        <form-bean name="addForm" type="com.agreen.struts.test.AddEmployeeForm" />
    </form-beans>
    <global-forwards>
        <forward name="search" path="/search.jsp" redirect="false" />
        <forward name="addEmployee" path="/addEmployee.jsp" redirect="false" />
    </global-forwards>
    <action-mappings>
        <action path="/search"
            type="com.agreen.struts.test.SearchAction"
            name="searchForm"
            scope="request"
            validate="true"
            input="/search.jsp"></action>

        <action path="/addEmployee"
            type="com.agreen.struts.test.AddEmployeeAction"
            name="addForm"
            scope="request"
            validate="true"
            input="/addEmployee.jsp"></action>
    </action-mappings>
    <message-resources parameter="MessageResources" />
</struts-config> 
```

## 网页.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app>
    <!-- Action Servlet Configuration-->
    <servlet>
        <servlet-name>action</servlet-name>
        <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
        <init-param>
            <param-name>config</param-name>
            <param-value>/WEB-INF/struts-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <!-- Action Servlet Mapping -->
    <servlet-mapping>
        <servlet-name>action</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
    <!-- The Welcome File List -->
    <welcome-file-list>
        <welcome-file>/index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

# java - run 方法之外的同步方法

> ID：12047464
> 
> 赞同：0
> 
> 时间：2012-08-21T01:49:23.893
> 
> 标签：java, multithreading

[这个问题是对这个问题](https://stackoverflow.com/questions/12047218/synchronized-block-inside-run-method)的跟进，类似的问题，但执行不同，在下面的代码中，我对对象没有任何锁定。所以试图清楚地理解，我是对的还是不对的。

**到目前为止，我通过阅读书籍和文章所了解的内容：-**

每个 Thread 都会进入`run method`，并且会得到`id from the various pool (existPool or newPool)`依赖`if, else if block`，那么它会进入`attributeMethod`哪个必须是`synchronized`正确的？还有另一种`attributeMethod`不需要同步的方法吗？

所以假设如果第二个线程也同时启动，那么我会对下面的示例有任何问题吗？

```
private static final class Task implements Runnable {

    private BlockingQueue<Integer> existPool;
    private BlockingQueue<Integer> newPool;
    private int existId;
    private int newId;
    private Service service;

    public Task(Service service, BlockingQueue<Integer> pool1, BlockingQueue<Integer> pool2) {
        this.service = service;
        this.existPool = pool1;
        this.newPool = pool2;
    }
    public void run()  {
      if(service.getCriteria.equals("Previous")) {
          existId = existPool.take();
          attributeMethod(existId);
        } else if(service.getCriteria.equals("New")) {
            newId = newPool.take();
            attributeMethod(newId);
        }
    }
}

    // So I need to make this method synchronized or not? Currently I have made this synchronized
    private synchronized void attributeMethod(int range) {
        // And suppose If I am calling any other method here-

         sampleMethod();
    }

    // What about this method, I don't thinkg so, it will be synchronized as well as it will be in the scope of previous synchronized method whoever is calling, Right? or not?
    private void sampleMethod() {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:56:24.300

> 所以假设如果第二个线程也同时启动，那么我会对下面的示例有任何问题吗？

有可能，是的，你会的。重新阅读我对上一个问题的回答中的第二个要点。

基本上，问题在于线程将在类的*不同*实例上同步`Task`......并且不会提供任何互斥。

这是否*真的是*一个问题将取决于线程是否*需要*同步。在这种情况下，线程似乎将共享`Service`和`BlockingQueue`实例。如果这是它们共享的范围，并且您正在使用线程安全的实现类，则*可能*不需要同步。

* * *

我对您的建议是回到您的 Java 教科书/教程，并查看他们所说的关于`synchronized`原始互斥锁的*实际*作用的内容。它们真的很简单……但是您需要完全理解这些原语，然后才能正确地将它们组合在一起以实现您想要实现的目标。

# .net - 如果我修改基础表，LINQ-to-SQL 会中断吗？

> ID：12047466
> 
> 赞同：3
> 
> 时间：2012-08-21T01:49:43.070
> 
> 标签：.net, sql-server, linq, linq-to-sql

我们假设删除基础表 LINQ-to-SQL 将导致引发异常。

我们假设删除预期的列也会导致它中断——它将无法插入或更新该列。但这个假设正确吗？如果我们从不尝试插入或更新该列怎么办——它会愉快地`SELECT`成为该列数据类型的默认值吗？

我们可以对破坏 LINQ-to-SQL 的基础表进行哪些更改？我们可以进行哪些更改使其忽略？它是否在运行时验证数据库模式，如果是，何时验证？

删除诸如主键或外键之类的约束怎么样？我们可以在不破坏 LINQ-to-SQL 的情况下添加、删除或更改它们吗？

* * *

我知道一些我可以对基础表做的事情，我知道一些我不能做的事情。我正在考虑的具体情况是我是否可以在`nullable`不破坏 dbml 的情况下向表中添加列。我不记得了，所以我想在这里记录一下。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T05:30:59.063

在 LINQ-to-SQL 生成 select 语句并从服务器接收响应之前，不会引发异常。即使服务器响应了一些意想不到的事情（例如，字段上的不同数据类型），它也可能不会导致异常，直到您在代码中主动使用该字段。

所以是的，您可以毫无问题地添加列，因为生成的查询不会引用它，因为您的 DBML 不知道它们。Linq-To-SQL 从不发送`SELECT * FROM TABLE`，而是`SELECT [ID], [COL1], [COL2] FROM TABLE`在运行时发送也不用 SQL Server 验证数据库模式。因此，是否存在某个 [COL3] 不会对结果产生影响。

* * *

只是为了进一步试验——这当然不是可取的做法——让我们尝试删除和修改作为 DBML 一部分的列，看看哪些有效或无效。

如果您删除 [Col2]，这将生成“无效的列名”错误，因为服务器将尝试检索每一行的所有字段，包括 [col2]：

```
var q = from row in table
        select row;
int id = q.First().id; 
```

但是，如果您计划在开发期间定期进行更改，则仅检索您需要的字段将防止此类错误发生。因为我们不是指 [Col2]，所以这**有效：**

```
var q = from row in table
        select new { row.id, row.Col1 };
int id = q.First().id; 
```

有点令人惊讶的是，如果你离开 Col2 但将它的数据类型更改为完全不同的东西，比如 datetime，这甚至会**起作用：**

```
var q = from row in table
        select new { row.id, row.Col1, row.Col2 };
int id = q.First().id; 
```

只有在积极使用该字段时它**才会起作用：（**我得到“Nullable object must have a value。”）

```
var q = from row in table
        select row;
var col2 = q.First().Col2; 
```

只要您的新未知列可以为空，您甚至可以插入行。假设您创建了一个新的 Col4，这仍然有效！

```
table.InsertOnSubmit(new table() { id = 1, col1 = 'A' };
table.SubmitChanges(); 
```

但是，如果您更改列的数据类型，请注意，即使您只是传递空值，您也无法插入行。如果 Col1 是 DBML 中的字符串，但您在数据库中将其更改为 datetime，因为 Linq-To-SQL 为所有字段生成正确的插入语句，这**不起作用**：（'不允许隐式数据类型转换'）

```
table.InsertOnSubmit(new table() { id = 2 };
table.SubmitChanges(); 
```

总之，只要直接在数据库上运行 SQL 语句 LINQ-To-SQL 仍然有效，并且接收到的数据不与您的 DBML 相矛盾，它就不会破坏您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T01:58:53.883

我认为，如果您使用的是 LINQ TO SQL，并且您只修改了数据库端的表而没有更新 LINQ TO SQL 模型，那么我相信您会没事的，因为模型对象没有改变并且结构仍然相同，所以什么都不会破坏尽管如果您决定更新 LINQ TO SQL 或选择数据库上不存在的实体，它很可能会引发内部异常。当然，最正确的方法是不断保持 LINQ TO SQL 模型和数据库相同，这样可以避免很多未来的问题。如果您向 dbml 添加了一个可空列但您没有在项目中使用它，只要您没有将它从 Linq 更新到 sql 就应该没问题，因为如果您这样做，您必须将它包含在您的模型中

# ms-access - 后端路径长度会影响前端速度吗？

> ID：12047467
> 
> 赞同：1
> 
> 时间：2012-08-21T01:50:02.897
> 
> 标签：ms-access

我们都在美国多个城市的 WAN 上运行 Access 2010（例如，前端位于凤凰城、芝加哥、波士顿和纽约奥尔巴尼，后端位于凤凰城）

可能有 10 到 15 个用户同时从不同的城市连接到后端。

前端是相同的，都有相同的 15 个链接表，都指向相同的 UNC 后端。

UNC 看起来像“\fs1-xxx1\projectname\xxx2\xxx-15257\0600-design_discipline\0612-architectural\xxxx xxxx Database\Backend Database\xx-xx xxxx xxxx.accdb”

显然，在 wan 上运行它不是一个好主意，但生活就是这样。那里没有选择。

UNC 路径的长度是否会影响整体访问性能，因此最好大大缩短它？

映射驱动器与 UNC 在这里有帮助吗？

对此方案还有其他意见或建议吗？

我已经知道不建议这样做，但无法更改。

谢谢您的帮助。

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:44:29.050

db 文件的路径长度会影响性能，标准建议是尽可能短。有关更多详细信息，请参阅 Tony Towes 的[Microsoft Access 性能常见问题解答](http://www.granite.ab.ca/access/performancefaq.htm)，标题为“将后端 MDB 放在网络共享的根目录而不是几个文件夹下”。

据我了解，问题主要是由于每个连续文件夹级别所需的访问权限检查。所以，如果我的理解是正确的，你不能通过将共享映射到驱动器号来回避问题......因为安全检查仍然必须在文件服务器上进行。

关于其他建议，请确保您有可靠且经过测试的备份策略，因为此用例会增加数据库损坏的风险。听起来您已经意识到跨 WAN 运行 Access db 的陷阱；其他读者可能会从阅读 Albert Kallal 的页面中受益：[使用带有 ms-access 的 wan](http://www.kallal.ca/Wan/Wans.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:40:29.427

首先，我希望各个地点不要设置为非军事区 (DMZ)，因为它们非常不安全！

其次，要回答你的问题，我没有看到影响速度的路径长度，除非它可能非常长。

# database-backups - 如何忽略使用 innobackupex 备份某些表

> ID：12047468
> 
> 赞同：1
> 
> 时间：2012-08-21T01:50:44.050
> 
> 标签：database-backups, percona

我正在使用 innobackupex 备份我的数据库，但我需要忽略一些表。是否有 --ignore-tables 选项？我似乎找不到任何例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:54:38.937

更新（感谢 Shlomi 的评论）：XtraBackup 2.3 中的 Percona，有一个选项`--tables-exclude`

[https://www.percona.com/doc/percona-xtrabackup/2.3/xtrabackup_bin/xbk_option_reference.html](https://www.percona.com/doc/percona-xtrabackup/2.3/xtrabackup_bin/xbk_option_reference.html)说：

> **--tables-exclude=名称**
> 
> 通过正则表达式过滤表名。操作方式与 xtrabackup --tables 相同，但匹配的名称会从备份中排除。请注意，此选项的优先级高于 xtrabackup --tables。

* * *

在 XtraBackup 2.3 版之前，xtrabackup 或 innobackupex 中没有选项可以在备份其余表时忽略某些表。

您可以使用`--include`并给出一个匹配所有表的正则表达式，除了您要忽略的表。

例如，您可以将要忽略的表放入单独的数据库中，然后备份除该数据库之外的所有数据库。

# ruby - 有理数在 Ruby 代数中的表现不像分数

> ID：12047470
> 
> 赞同：0
> 
> 时间：2012-08-21T01:51:11.303
> 
> 标签：ruby, math, rational-number

有人可以向我解释一下吗？

```
x = Rational(3/4) * 8
 => (0/1) # I Expected it to return 6
x.to_i
 => 0 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T02:08:16.817

您正在创建一个作为唯一参数的`Rational`数字。是，所以，你的代码相当于`3/4``3/4``0`

```
Rational(0) * 8 
```

这显然是`0`。

将此与

```
Rational(3, 4) * 8
# => (6/1) 
```

您在其中显式传递分子和分母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T17:22:25.003

如果您更喜欢在分数中使用斜线，您可以使用字符串作为参数：

```
x = Rational('3/4') * 8 
```

或者

```
x = ('3/4'.to_r) * 8 
```

# azure - 如何将 Azure WebRole 作为 NTP 服务器？

> ID：12047471
> 
> 赞同：0
> 
> 时间：2012-08-21T01:51:12.270
> 
> 标签：azure, udp, ntp

**你知道如何将 azure webrole 设置为 NTP 服务器吗？**

我想将我的计算机时间与我的 azure webrole 时间完全同步，而不是“time.windows.com”或其他 ntp 服务器。

因为我需要尽可能准确地将我的计算机时间与我的 webrole 的时间同步，并且我正在考虑唯一的方法是将我的 azure webrole 设置为我本地计算机的 NTP 服务器。

我试图在我的 azure webrole 上命令（如'w32/tm ...~~~' 等）以使其成为 NTP 服务器，但它没有工作，尽管它在我的不同计算机上工作我的办公室。

我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:01:54.420

Windows Azure 角色（Web、Worker 等）目前不支持托管 UDP 端点，所以我不确定您尝试做的事情是否可行。Windows Azure 虚拟机（预览版）可以托管 UDP 端点，因此这可能是一种解决方法（尽管价格昂贵）。

查看这篇精彩的博客文章，详细了解 Azure VM 和 NTP 服务器的详细信息。

我的 Windows Azure VM 上的时钟多久同步一次？： http: [//blog.codingoutloud.com/2011/08/25/azure-faq-how-frequently-is-the-clock-on-my-windows-azure-vm-synchronized/](http://blog.codingoutloud.com/2011/08/25/azure-faq-how-frequently-is-the-clock-on-my-windows-azure-vm-synchronized/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:17:10.067

最好知道为什么要直接与 web/worker 角色同步，而不是与 time.windows.com 同步。默认情况下，Web/worker 角色 VM 与 time.windows.com 同步。此外，Windows Azure 在 2012 年 6 月的最新更新中确实支持 UDP 协议。

# xml - Solr 4.0 XML 查询全部删除

> ID：12047473
> 
> 赞同：2
> 
> 时间：2012-08-21T01:51:22.677
> 
> 标签：xml, solr

什么是 solr XML Query 来删除我尝试过的核心中的所有数据， `curl http://localhost:8983/solr/core0/update?commit=true -H "Content-Type: text/xml" --data-binary '<delete><query>id:*</query></delete>'`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T08:05:55.640

你可以试试 ：-

卷曲 -

```
curl -H 'Content-Type: text/xml' http://localhost:8983/solr/update --data-binary '<delete><query>*:*</query></delete>' 
```

请务必使用 commit=true 来反映这些更改。

或从浏览 -

```
http://localhost:8983/solr/update?stream.body=<delete><query>*:*</query></delete>&commit=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:11:15.540

在 cmd 中使用 java 的另一个选项： java -Durl=http://localhost:8983/solr/update -Ddata=args -Dcommit=yes -jar post.jar " *:* " 所有这些都在 post 目录中。

# c# - 如何在不将页面加载到浏览器的情况下刷新页面？

> ID：12047474
> 
> 赞同：3
> 
> 时间：2012-08-21T01:51:24.923
> 
> 标签：c#, asp.net, .net

有没有办法在 ASP.NET 中刷新/重新加载页面而不实际加载页面？我需要每 5 分钟重新加载一次页面，但这不会被任何用户加载。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T01:57:35.143

最简单的方法是使用[html 元标记](http://www.w3schools.com/tags/tag_meta.asp)，指示页面在给定时间间隔（以秒为单位）后刷新：

```
<meta http-equiv="refresh" content="30" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:56:45.327

听起来您想使用 ASP.Net 缓存。使用带有持续时间的 @OutputCache 指令。

[设置页面的可缓存性](http://msdn.microsoft.com/en-us/library/w9s3a17d%28v=vs.100%29.aspx)

# css - CSS，不需要的空间

> ID：12047476
> 
> 赞同：0
> 
> 时间：2012-08-21T01:51:32.037
> 
> 标签：css

我正在开发一个响应式网站。在手机分辨率内查看此页面时，我有 4 个主要链接。边框的顶部和底部没有一直延伸到左右两侧，有1px的间隙。我实际上认为整体有 1px 不需要的边距。我能说的一切都设置为 100%，我看不到任何边距。

[html页面在这里](http://www.kimwilddesigns.com/index_new.htm)

[CSS 在这里](http://www.kimwilddesigns.com/css/kw_styles2.css)

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:03:13.473

你在 nav#mobile 上有一个 left: 1px。

```
nav#mobile {
height: auto;
width: 100%;
text-transform: uppercase;
font-size: 0.9em;/*-webkit-border-top-right-radius: 10px;
-webkit-border-top-left-radius: 0px;
-webkit-border-bottom-left-radius: 0px;
-webkit-border-bottom-right-radius: 10px;
-moz-border-radius-topright: 10px;
-moz-border-radius-topleft: 0px;
-moz-border-radius-bottomleft: 0px;
-moz-border-radius-bottomright: 10px;
border-top-right-radius: 10px;
border-top-left-radius: 0px;
border-bottom-left-radius: 0px;
border-bottom-right-radius: 10px;*/
position: relative;
/* [disabled]z-index: 1; */
left: 1px;
/* [disabled]top: 41px; */
border-top-width: 1px;
border-bottom-width: 1px;
border-top-style: solid;
border-bottom-style: solid;
border-top-color: #333;
border-bottom-color: #333;
border-right-width: 0px;
border-left-width: 0px;
border-right-style: solid;
border-left-style: solid;
border-right-color: #333;
border-left-color: #333;
margin-top: 25px;
float: right;
padding: 0px;
margin-left: 0px;
margin-bottom: 25px;
display: block;
} 
```

摆脱那一条线，你就是金色的。

# c# - XML : 将 xml 文件合并到另一个 xml 文件的节点中

> ID：12047478
> 
> 赞同：0
> 
> 时间：2012-08-21T01:51:41.680
> 
> 标签：c#, xml, file, merge

我有两个 XML 文件要合并到第一个文件的节点中

第一个文件 Toc.xml

```
<toc>
<item id ="c12">
<english>book1</english>
<french>book1</french>
</title>
</item>
<item id = "part1"/>
<item id = "part2"/>
<item id = "part3"/>
</toc> 
```

每次使用 XML 文件运行转换后都会更新第二个文件（第 1、2、3 部分） 第二个文件：使用 part1.xml 运行转换时

```
<item id = “part 1”&gt;
<title>
<english>part1</english>
<french>part1</french>
</title></item> 
```

第二个文件：使用 part2.xml 运行转换时

```
<item id = “part 2”&gt;
<title>
<english>part2</english>
<french>part2</french>
</title>
</item> 
```

结果在 Toc 文件中

```
 <toc>
  <item id ="c12">
  <english>book1</english>
  <french>book1</french>
  </title>
  </item>
  <item id = "part1">
  <title>
  <english>part1</english>
  <french>part1</french>
  </title>
  </item>
  <item id = "part2">
  <title>
  <english>part2</english>
  <french>part2</french>
  </title>
  </item>
  <item id = "part3">
  <title>
  <english>part3</english>
  <french>part3</french>
  </title>
  </item>
  </toc> 
```

我尝试使用导入节点，但它给了我错误（缺少根元素）和其他错误“要插入的节点来自不同的文档上下文”

这是我尝试过的代码

```
 XmlDocument temp = new XmlDocument();
    temp.Load("secondfile.xml");
    XmlDocument toc = new XmlDocument();
    toc.Load(toc.xml);
    XmlNodeList toclist = toc.SelectNodes("/toc/item");
    foreach (XmlNode tocnode in toclist) 
    {XmlNodeList tempnodelist = temp.SelectNodes("/item");
    foreach (XmlNode tempnode in tempnodelist)
    { XmlNode importnode = toc.ImportNode(tempnode, true);
    toc.appendNode(importnode, tocnode);
    }} 
```

你说的对。我的问题不清楚。我把 que 改得更具体。我希望这次你会发现它更干净。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:47:24.077

```
<item id = “part 1”&gt;
  <title>
    <english>part1</english>
    <french>part1</french>
  </title>
</item>

<toc>
  <item id ="c12">
    <english>book1</english>
    <french>book1</french>  
  </item>
  <item id = "part1"/>
  <item id = "part2"/>
  <item id = "part3"/>
</toc> 
```

答案可能是：

```
XmlDocument mainDocument = new XmlDocument();
mainDocument.Load("toc.xml");
XmlDocument tempDocument = new XmlDocument();
tempDocument.Load("part1.xml");

XmlNodeList tempList = tempDocument.GetElementsByTagName("item");
string id=tempList[0].GetAttribute("id");//gets the id attribute value

XmlNode mainRoot = mainDocument.DocumentElement; //gets the root node of the main document toc.xml
XmlNodeList mainList = mainRoot.SelectNodes("/toc");
XmlNode itemNode = mainList.Item(0).SelectSingleNode(string.Format("/toc/item[@id=\"" + id + "\"]")); //select the item node according to the id attribute value

XmlNode tempitemNode = tempList.Item(0).SelectSingleNode(string.Format("/toc/item[@id=\"" + id + "\"]/title")); //select the title node of the part1, part2 or part3 files

itemNode.AppendChild(tempitemNode.FirstChild);
itemNode.AppendChild(tempitemNode.LastChild);

mainDocument.Save("toc.xml"); 
```

类似的东西

# android - 从android应用程序通过jsonrpc访问数据库是个好主意吗？

> ID：12047480
> 
> 赞同：0
> 
> 时间：2012-08-21T01:51:56.543
> 
> 标签：android, python, json, json-rpc

或者通过 POST/GET 传递命令并将响应格式化为 json 来做到这一点更安全/更好？乍一看，jsonrpc 看起来就像是完成这项工作的工具。但这对我来说听起来并不安全 - 将应用程序方法暴露给互联网等。将在未经授权的情况下进行读/写访问 - 我不想强迫所有应用程序用户注册。计划在 python、tornado 或 django 中实现它。

PS 可以通过 https 做 jsonrpc 吗？（如果它是特定于应用程序的凭据是有意义的）

# haskell - 无法理解 Haskell 的类型系统

> ID：12047481
> 
> 赞同：8
> 
> 时间：2012-08-21T01:52:25.267
> 
> 标签：haskell, types, constructor, overloading, algebraic-data-types

我目前正在尝试做[20 个中级 Haskell 练习](http://blog.tmorris.net/20-intermediate-haskell-exercises/)。我能够完成第 3 次练习（但这是因为`furry`==`fmap`和[Learn You a Haskell](http://learnyouahaskell.com/chapters)已经有了这些实现）。我目前被困在说：

```
instance Fluffy (EitherLeft t) where                                        
  furry = error "todo" 
```

我真的不明白该怎么做。在 Learn You Haskell 中，他们有一个`newtype`名为的变量`Pair`，它接受一个元组。然后他们可以像这样进行模式匹配：

```
 fmap f (Pair (x,y)) = Pair (f x, y) 
```

我在想也许你可以在我的情况下做类似的事情：

```
 furry f (EitherLeft (Either a b)) = EitherLeft (Either (f a) b) 
```

但是，这不起作用：

```
Not in scope: data constructor `Either' 
```

我在想也许我会`import Data.Either`，因为他有一些我没有的进口东西。但这没关系。

我也试图让这个工作：

```
 furry f (EitherLeft a b) = error "todo" 
```

但这也不起作用：

```
Constructor `EitherLeft' should have 1 argument, but has been given 2 
```

我也无法让它工作：

```
 furry f (Right x) = (Right f x)
  furry f (Left x) = Left x 
```

这给出了错误：

```
Couldn't match expected type `EitherLeft t a'
            with actual type `Either t0 t1' 
```

我只能得到：

```
 furry f (EitherLeft t) = error "todo" 
```

去工作。但我不知道该怎么办`t`。

我不一定想要答案。我只需要一个关于该做什么的提示，因为我正在阅读并且我可以理解这些示例，但我无法真正开始自己编写这些东西。

谢谢丹，这就是我想出的解决方案：

```
instance Fluffy (EitherLeft t) where                     
  furry f (EitherLeft (Left x)) = EitherLeft $ Left  (f x)                   
  furry f (EitherLeft (Right x)) = EitherLeft $ Right x 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T02:31:31.377

您遇到的问题是 Either 数据类型没有名为 Either 的数据构造函数，基本上 Either 类型看起来像这样

```
data Either a b = Left a
                | Right b 
```

所以一个值可以有 type `Either a b`，但没​​有类似`Either "one" 1`或类似的值，而是`Left "one"`, or `Right 1`。

因此，在 的情况下`EitherLeft`，类似地，它的值看起来像`EitherLeft (Left a)`or `EitherLeft (Right b)`，并且需要像这样进行模式匹配。

# django - 推送到 EC2 服务器的 SQLite 数据库出现问题

> ID：12047483
> 
> 赞同：2
> 
> 时间：2012-08-21T01:53:12.350
> 
> 标签：django, git, amazon-ec2

我有一个使用 SQLite 数据库的 django 应用程序。我使用 git 将更改推送到我的 EC2 实例，该实例在弹性 IP 上运行网站。该站点本身可以​​运行，但是当我尝试登录到管理界面时，我从 django 收到两个错误之一：

```
attempt to write a readonly database 
```

或者

```
unable to open database file 
```

似乎 chmod u+rw 导致第一个错误， a+rw 导致第二个错误，但我不确定发生了什么。我本地机器上的测试服务器按预期工作。

我意识到 SQLite 对于生产来说可能是一个糟糕的选择，但该站点不会有太多流量，而且我将是唯一一个使用管理界面或写入数据库的人。如果有人有设置 MySQL 或 Postgres 并以某种方式同步数据库内容的解决方案，我也会接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:13:31.763

经过大量研究，我找到了解决方案。我只在我的 EC2 服务器中定义了一个用户，但显然 Apache 需要以用户身份访问`www-data`。

```
sudo chown www-data /projectdir
sudo chown www-data /projectdir/sqlite.db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:49:34.650

您的应用程序是否在多个线程中运行？

问题是 sqlite3 数据库不能在 Django 应用程序的多个线程之间共享。我不确定这是一般的 sqlite3 错误、Django 错误还是只是故意的。也许其他用户想出了处理它的方法。我没有在生产服务器上使用 PostgreSQL 或 MySQL。

如果您的网站流量非常低，您可以将您的网络服务器配置设置为单线程（并在单个进程中）运行您的应用程序。这将具有与在本地运行 Django 测试服务器类似的行为（和限制）。

# vba - 将字段值复制到文本文件并另存为 .sql

> ID：12047484
> 
> 赞同：2
> 
> 时间：2012-08-21T01:53:19.417
> 
> 标签：vba, ms-access, vbscript

在 MS Access 中，我有一个存储用于项目的 SQL 的字段。sql 字段是启用了“富文本”属性的备注字段。这意味着下面的代码

```
CREATE TABLE NR_TMP_1_104 AS
     SELECT DISTINCT tmp.otherid
                    ,tmp.groupno
       FROM NR_tmp_1_900 tmp
           ,NR_TMP_1_103 vp
      WHERE tmp.otherid = vp.otherid;

      SELECT groupno, COUNT(otherid) Counts
      FROM NR_TMP_1_104
      GROUP BY groupno;

     SELECT otherid, actualvpchoice FROM NR_TMP_2_102 
```

看起来真的很像下面（我很抱歉这个大块）。所以这意味着我不能做docmd.transfertext，获得正常文本的唯一方法是复制和粘贴。

我需要能够将此字段导出到文本文件并以 .sql 的扩展名保存。

这是我到目前为止所拥有的））））

```
Forms!freports!sql.SetFocus
DoCmd.RunCommand acCmdCopy 
```

如何打开文本文件，粘贴剪贴板上的内容并将其另存为 .sql。

非常感谢您

```
"<div>&nbsp;</div>

<div><font size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">CREATE</font><font
size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF""> </font><font size=3
color=blue style=""BACKGROUND-COLOR:#FFFFFF"">TABLE</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> </font><font size=3 color=olive
style=""BACKGROUND-COLOR:#FFFFFF"">NR_TMP_1_104</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF""> </font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">AS</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">SELECT</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> </font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">DISTINCT</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF""> tmp</font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">.</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF"">otherid</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">,</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF"">tmp</font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">.</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF"">groupno</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">FROM</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> NR_tmp_1_900 tmp</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">,</font><font size=3
color=olive style=""BACKGROUND-COLOR:#FFFFFF"">NR_TMP_1_103</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> vp</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">WHERE</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> tmp</font><font size=3
color=blue style=""BACKGROUND-COLOR:#FFFFFF"">.</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF"">otherid </font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">=</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF""> vp</font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">.</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF"">otherid</font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">;</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">SELECT</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> groupno</font><font size=3
color=blue style=""BACKGROUND-COLOR:#FFFFFF"">,</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF""> </font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">COUNT(</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF"">otherid</font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">)</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF""> Counts</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">FROM</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> </font><font size=3 color=olive
style=""BACKGROUND-COLOR:#FFFFFF"">NR_TMP_1_104</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">GROUP</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> </font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">BY</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF""> groupno</font><font size=3 color=blue
style=""BACKGROUND-COLOR:#FFFFFF"">;</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font></div>

<div><font size=3 color=black style=""BACKGROUND-COLOR:#FFFFFF"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font
size=3 color=blue style=""BACKGROUND-COLOR:#FFFFFF"">SELECT</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> otherid</font><font size=3
color=blue style=""BACKGROUND-COLOR:#FFFFFF"">,</font><font size=3 color=black
style=""BACKGROUND-COLOR:#FFFFFF""> actualvpchoice </font><font size=3
color=blue style=""BACKGROUND-COLOR:#FFFFFF"">FROM</font><font size=3
color=black style=""BACKGROUND-COLOR:#FFFFFF""> NR_TMP_2_102</font></div>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:13:30.063

您可以使用该`PlainText()`函数从备注字段的富文本中获取纯文本。这是立即窗口中的一个示例。

```
? DLookup("memo_field", "tblFoo", "id=1")
<div>a <strong>b </strong>c</div>

? PlainText(DLookup("memo_field", "tblFoo", "id=1"))
a b c 
```

获得纯文本后，您无需通过记事本将其写入文件。您可以使用 VBA 文件函数或通过方法直接写入文件`Scripting.FileSystemObject`。这是第一种方法的示例。（我假设`Forms!freports!sql`包含富文本。）

```
Dim FileNum As Integer
FileNum = FreeFile()
Open "C:\SomeFolder\your.sql" For Output As #FileNum
Write #FileNum, PlainText(Forms!freports!sql)
Close #FileNum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:40:28.333

仅供参考，如果有人需要的话。HansUp 的代码工作正常，不使用任何引用（下面的代码需要 MS Forms 引用），总体上是一个更好的编码示例。

但是，如果有人需要删除引号，那么这是一种方法。

```
Dim objFSO
Dim objFile
Dim ClipboardText

Me.sql.SetFocus
DoCmd.RunCommand acCmdCopy

Dim DataObj As New MSForms.DataObject

 DataObj.GetFromClipboard
 ClipboardText = DataObj.GetText

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("C:\mysql.sql", 2, True)
objFile.WriteLine ClipboardText
objFile.Close 
```

# javascript - 在javascript中转换对象类型？

> ID：12047486
> 
> 赞同：0
> 
> 时间：2012-08-21T01:53:35.810
> 
> 标签：javascript, function, google-chrome, angularjs

我正在将新的（ish）[chrome.storage.sync](http://developer.chrome.com/extensions/storage.html) API 用于 chrome 扩展，并且在保存对象时，它完全忽略了函数。

这意味着当我从存储中检索对象时，我有对象中的数据，但没有函数。

有没有办法将对象的数据重新连接到它的功能？

注意：我没有在函数中做任何奇怪的事情（比如向它添加变量或更改它的闭包）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:22:06.787

您基本上需要在数据存储对象出现后通过构造函数运行您的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:12:14.567

我认为没有办法持久保存函数。

您可以使用 like.. self.fns=['fn1','fn2']; 保存对象 并在重新加载时，基于此添加功能。

但是，如果您正在向事物动态添加功能并且需要以这种方式保存它们，您可能应该更改您的设计。

# android - 从 FFMPEG for android 的命令行版本访问网络摄像头麦克风

> ID：12047493
> 
> 赞同：2
> 
> 时间：2012-08-21T01:56:00.657
> 
> 标签：android, command-line, ffmpeg, webcam, audio-streaming

我目前正在使用**android box 上的命令行版本的 FFMPEG测试来自****网络摄像头**的音频和视频流。我在访问网络摄像头麦克风时遇到问题使用 Ubuntu 作为参考，确定可用录音设备的正确命令是 **arecord -L**。不幸的是， **arecord -L**在 Android 机器上不起作用 当前用于访问网络摄像头麦克风的 命令选项**alsa是****ffmpeg -f alsa -alsa_device_name..**而之前的**oss**选项也不起作用，即**ffmpeg -f -oss..**可以也不行。**/dev/snd**中列出的音频设备 ****************将网络摄像头的麦克风部分显示为**pcmC3D0c**和 **controlC3**。我知道这是因为如果我拔下网络摄像头，这些值就会从目录列表中消失。

有没有人尝试在 android 盒子上使用 ffmpeg 成功访问网络摄像头的麦克风部分？
您如何制定访问**网络摄像头**麦克风的命令的正确格式。

请注意，我可以使用 ffmpeg 在我的 Ubuntu PC 上访问音频和视频，因此我知道这两个设备都可以工作****************

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:57:21.033

我终于弄清楚我做错了什么。问题在于我构建的 FFMpeg

要使用网络摄像头的摄像头或麦克风部分，需要使用 FFMPEG 中的适当格式调用设备。摄像头部分由**video4linux2**控制，而网络摄像头的麦克风部分由**alsa**控制。

我应该检查并确保我的 FFMPEG 版本具有两种格式 - **alsa**和**video4linux**在我的 FFMPEG 版本中可用。

要使用的命令是**./ffmpeg -formats**输出将在输出列表中的某处显示为**DE alsa** for sound，这意味着**alsa**可用于解码和编码。同样对于视频部分，**D video4linux** - 这意味着**video4linux**可用于解码来自网络摄像头的摄像头部分的视频。

. 因为**alsa**不可用，所以命令**./ffmpeg -f alsa...** 总是给出语法错误

我想教训是检查你的 ffmpeg 构建的所有你需要的特性，以确保它们在你尝试使用它之前就在那里。

“谢谢”所有看过这个问题的人！****

# unity3d - 如何在 Unity 中将 Skybox 设置为我的背景？

> ID：12047501
> 
> 赞同：4
> 
> 时间：2012-08-21T01:56:47.990
> 
> 标签：unity3d

我有一个想要使用的 Skybox，并正在尝试将它应用到我的场景中。当我尝试将其拖到`Hierarchy`框中时，它不起作用。我尝试将其应用于[此处描述](http://docs.unity3d.com/Documentation/Components/class-Skybox.html)的相机，但没有成功。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T01:56:47.990

您似乎错过了该页面上的某些内容，它说

您有两种实现 Skybox 的选项。您可以将它们添加到单个相机（通常是主相机）**，也可以在渲染设置的天空盒材质属性中设置默认天空盒。如果您希望场景中的所有摄像机共享同一个天空盒，则渲染设置最有用。**

所以基本上你只需去**Edit->Render Settings->Skybox Material->(Whatever skybox you want)**。如果您想创建自己的 Skybox，请参见[此处](http://docs.unity3d.com/Documentation/Manual/HOWTO-UseSkybox.html)。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:13:31.177

可以通过在**“渲染设置”** 中进行设置来完成，该设置将在所有相机中使用，或者将相机设置用于特定相机...

在相机中，您可以通过**将 Skybox 组件添加到相机**来覆盖默认渲染设置。天空盒材质有一个**立方体贴图**。并将其**清除标志**设置 为**SkyBox**

# java - 不明白为什么重绘这么慢

> ID：12047506
> 
> 赞同：-3
> 
> 时间：2012-08-21T01:57:35.337
> 
> 标签：java, eclipse, performance, jpanel, repaint

编辑：

我在这里做同样的事情，但没有出现问题。

```
 import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.border.Border;

public class MainFrame extends JFrame implements KeyListener {
static long start;
MyPanel right, left;
    public MainFrame() {

    }

    public void go(){
        setUndecorated(true);
        setLocation(0, 0);
        Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setSize(screenSize);
        addKeyListener(this);
        setLayout(new GridLayout(1,0));

        Border b = BorderFactory.createLineBorder(Color.black, 4);
        Border b1 = BorderFactory.createLineBorder(Color.blue, 4);
        right = new MyPanel();
        left = new MyPanel();
        right.setBorder(b); left.setBorder(b1);

        add(left);add(right);

        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void update() {
        left.update();
        right.update();
}

    @Override
    public void keyPressed(KeyEvent arg0) {
        if (arg0.getKeyCode() == KeyEvent.VK_ESCAPE)
            System.exit(1);
        else if (arg0.getKeyCode() == KeyEvent.VK_RIGHT){
            start = System.currentTimeMillis();
            update();
        }

    }

    @Override
    public void keyReleased(KeyEvent arg0) {}

    @Override
    public void keyTyped(KeyEvent arg0) {}

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new MainFrame().go();
            }
        });

    }

}
import java.awt.Graphics;

import javax.swing.JPanel;

public class MyPanel extends JPanel {
    MyPanel(){
        super();
    }
    public void update(){
        repaint();
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        System.out.println(System.currentTimeMillis() -  MainFrame.start);
    }

} 
```

首先我想说我准备了一个小例子来说明我的问题，但是这个例子代码中没有出现问题，它只是在原始程序中。我知道阅读起来很糟糕，但它会有很大帮助，因为问题出在特定的地方，你不需要理解其余的代码，甚至只需要润色几行。

1.  GlowneOkno 是一个主类，它有一个启动它的主方法。
2.  Glowne okno 是 KeyListener 和 Extends JFrame，它包含 3 个扩展的 JPanel：MapaPanel、InfoLiniaPanel、KursPanel。
3.  当您按下键盘上的“右箭头”时，它假设运行 akutalizuj（它意味着更新）方法，该方法在这 3 个扩展的 JPanel 中调用 akutalizuj 方法（更新方法）。在这些方法中，调用了 repaint()。
4.  我在 GlowneOkno 类中使用静态长启动来查看何时调用 GlowneOkno:Aktualizuj 方法，然后我在 InfoLiniaKurs 的绘制方法（）中 println（currentTime - GlowneOkno.start）（这是显示时间的那个 -> 你会看）。**而且这个时间间隔太慢了，我不知道为什么，如果我在方法 akutalizuj Mapa Panel 中阻塞**

我知道这是我要问的一件大事，但这是我找不到理由的**第五天**，我无法提出问题并将您应该知道的所有内容放在那里，而无需在 Eclipse 中提供所有项目，而我还有 5 个多小时的时间。

**程序工作在 1680 x 1050**

罗伯特·基拉尔 2012 年版权所有；) 但如果你想以某种方式使用它，就问我。我很乐意提供帮助。

主要主要在 GlowneOkno 类。

ESC 关闭应用程序。

![在此处输入图像描述](../Images/4d2e587ac0a9eab9fc83628ad8dbdc5d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:09:43.780

仔细查看重新绘制所需的每个单独步骤。

1.  `InfoLinePane`需要渲染文本和时间。虽然这本身并不是一个困难的过程，但您可以考虑将其中的一些卸载到缓冲图像中，因为让我们面对现实吧，只是时间会发生变化。当其他细节发生变化时，您可以使缓冲区无效并重新绘制它。
2.  您再次更新 InfoLinePane...？
3.  您将地图名称分配给 ，`mapaPanel`而无需考虑是否需要更改
4.  你加载地图。你缩放所说的地图。您更改地图面板的首选大小以匹配缩放图像的大小
5.  你缩放地图（再次）
6.  你画车站。我很确定止损不会改变匹配，你应该考虑缓冲这个结果。除非时间实际上已经改变，否则更新进度条可能没有意义。

图像加载和缩放是昂贵的。如果内存允许，您应该考虑缓存这些结果。缩放最好在后台实现。使用低质量进行扩展，然后将高质量的规模卸载到单独的`thread`

考虑实际发生的变化。将所有不会（经常）更改的内容渲染到缓冲区。

# java - 从 Android 上的 LocationManager 获取城市的简单方法？

> ID：12047507
> 
> 赞同：1
> 
> 时间：2012-08-21T01:57:40.580
> 
> 标签：java, android, geolocation

我试图找出用户使用其位置的城市。使用 LocationManager 和 Geocoder 我从经度和纬度中获得了一些不错的数据，但我什么也得不到。subAdminArea 又名城市。它总是为我返回**null**，即使收到了包括邮政编码在内的所有其他内容。有什么我想念的吗？

基本上这是我用来获取数据的一种方法。

```
public String getLocation(Locale locale, Context context, boolean city, boolean postal, boolean state_prov) throws IOException{
    LocationManager locMan = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
    LocationListener locList = new MyLocList();
    Geocoder gC = new Geocoder(context,locale);
    Location gpsLocation = locMan.getLastKnownLocation(locMan.GPS_PROVIDER);
    locMan.requestLocationUpdates(locMan.NETWORK_PROVIDER, 500, 200, locList);
    Location networkLocation = locMan.getLastKnownLocation(locMan.NETWORK_PROVIDER);
    if (city)
        return (gC.getFromLocation(networkLocation.getLatitude(), networkLocation.getLongitude(), 1).get(0).getSubAdminArea());
    else if (postal)
        return (gC.getFromLocation(networkLocation.getLatitude(), networkLocation.getLongitude(), 1).get(0).getPostalCode());
    else if (state_prov)
        return (gC.getFromLocation(networkLocation.getLatitude(), networkLocation.getLongitude(), 1).get(0).getAdminArea());
    else
        return "";
} 
```

并且通过以下方式调用此方法：

```
String city = getLocation(Locale.getDefault(),getBaseContext(),true,false,false); 
```

我通过一些研究发现的唯一其他选择是将请求发送到

```
http://maps.googleapis.com/maps/api/geocode/json?address=POSTALCODE&sensor=true 
```

它根据邮政编码为我提供了该位置的 JSON，然后我可以对其进行解析，但要找到这座城市似乎需要做很多工作。

有什么我想念的吗？还是我做错了什么？我是安卓定位服务的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:24:14.117

试试这个：

```
 Geocoder gc = new Geocoder(context, Locale.getDefault());
    List<Address> addresses = gc.getFromLocation(latitude, longitude, maxResults);

StringBuilder sb = new StringBuilder();
for (int i = 0; i < addresses.getMaxAddressLineIndex(); i++)
 Log.d("=Adress=",addresses.getAddressLine(i));
} 
```

您将获得邮政编码、城市、国家/地区......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T22:21:43.860

我使用[了这个答案](https://stackoverflow.com/a/12081733/1061177)，它工作得很好。尽管我最初在这个问题中遇到了问题，但它还是能够获得该位置。

# java - 指定上传文件的实际内容类型

> ID：12047508
> 
> 赞同：0
> 
> 时间：2012-08-21T01:57:55.530
> 
> 标签：java, google-app-engine, http, rest

我正在开发一个 blob 上传服务，我有这段[代码](http://pastebin.com/Un4Pb4XL)可以将上传的元数据保存在数据存储区中，并将实际字节保存到 Blob 存储区中。

我遇到了 REST 客户端提供的 Mime-Type 的问题（我使用的是 Rest Console Chrome 插件）

这是从客户端传递到服务器的 mime 类型：

```
Mime type:  multipart/form-data; boundary=----WebKitFormBoundarytxCVEFIRjPB7YIq7 
```

然而，服务器需要获取“实际的 mime 类型”，例如 image/jpeg、image/jpeg、text/plain 等。

使用 App Engine API，我需要像这样显式提供 mime 类型：

```
AppEngineFile file = fileService.createNewBlobFile(entity.getMimeType()); 
```

我该如何指定？我需要放另一个标题吗？将要上传的文件会有所不同，文件的大小可以达到 50MB（如果我没记错的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:37:09.603

“多部分”意味着发送的数据可以有多个部分，每个部分都有自己的 MIME 类型。阅读有关在 GAE[上处理多部分表单上传的信息。](https://developers.google.com/appengine/kb/java#fileforms)

您可以使用[`FileItemStream.getContentType()`](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItemStream.html#getContentType%28%29) 获取每个部分的 mime 类型。

# php - Javascript：使用 javascript 检查多个复选框

> ID：12047509
> 
> 赞同：0
> 
> 时间：2012-08-21T01:58:03.197
> 
> 标签：php, javascript, html

我正在尝试使此示例中的第二个 javascript 行正常工作（能够从 javascript 中选择复选框）：http: [//jsfiddle.net/eTvDB/](http://jsfiddle.net/eTvDB/)

本质上，如果我不使用 xxx[] 形式作为名称，我将无法在 PHP 中获取数组。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:00:37.630

采用：

```
document.myForm['select2[]'][0].checked = true; 
```

或者

```
document.getElementsByName('select2[]')[0].checked = true; 
```

***[演示。](http://jsfiddle.net/eTvDB/1/)***

# excel - excel vba - msgbox 是/否回复

> ID：12047520
> 
> 赞同：1
> 
> 时间：2012-08-21T01:59:09.797
> 
> 标签：excel, vba

我正在验证用户在用户表单中的输入。我有一个 msgbox 提示，是 yesNo。

如果单击是，则继续，如果单击否，我希望用户能够返回到用户表单以更改输入/选择。

我使用的代码是

```
 iReply = MsgBox(Prompt:="You have selected a month which is not next month. Do you want to continue? ", _
     Buttons:=vbYesNo, Title:="")
     If iReply = vbNo Then
        UserForm.Show
     End If 
```

对于 UserForm.Show，我收到“已显示的表单无法以模态方式显示”的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:14:48.620

用户窗体必须在再次加载之前卸载或隐藏。尝试使用卸载：

```
Unload UserForm 
```

或使用隐藏它

```
UserForm.Hide 
```

# simperium - Simperium 和 Core Data 的关系

> ID：12047521
> 
> 赞同：1
> 
> 时间：2012-08-21T01:59:17.860
> 
> 标签：simperium

Simperium 可以原生地处理核心数据关系吗？是否有不支持的配置？

是否可以在 Python 或 JavaScript 中定义关系并将其作为正确的关系下载到 Core Data？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T03:09:08.007

是的，Simperium 原生地处理核心数据关系。它不支持多对多关系，但您可以根据 Apple 的指南将它们改造成两个一对多关系，一切都会正常工作。

关系也可以映射到 Simperium Python 和 JavaScript 库，并双向同步。您将处理`simperiumKey`映射到相应对象的外键列表（Core Data 中的）。您可以根据自己的意愿处理这些问题；例如，有些人将关系映射到 JavaScript 中的 Backbone.js 模型，以实现看起来和感觉有点像 Core Data 的东西，但在网络上。

# python - 正则表达式查找字符的第一次出现，除非它在某个字符集中

> ID：12047525
> 
> 赞同：1
> 
> 时间：2012-08-21T01:59:36.050
> 
> 标签：python, regex

我正在尝试匹配这样的字符串：

```
key:value 
```

但不匹配这样的字符串：

```
"has: stuff"
("or: that") 
```

到目前为止，我有一个看起来像这样的正则表达式：

```
^(.*?): 
```

这与所有这些示例相匹配。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:14:08.753

要查找您可能想要使用正则表达式`^\w+(?=:)`或`^(\w+):`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T21:34:58.413

这是一个简单的正则表达式模式：

```
^(\w+)\:(\w+)$ 
```

`\w`: 集合中的一个字符 [0-9a-zA-Z]

`\w+`: 一个或多个 \w 字符

`^`: 第一个之前没有其他工作人员 (\w+)

`$`: 第二次之后没有其他工作人员 (\w+)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:10:32.917

在您的反例中，是什么因素使它们在本次比赛中“无效”？是不是开头的标点符号？冒号后面的空格？

听起来你应该只包含你想要的东西，而不是试图排除你不想要的东西。如果您的键/值对总是由字母数字键组成（即没有标点符号），那么您可以使用简单地查找它的正则表达式。

```
/^([[:alnum:]]+):/ 
```

# php - MYSQL PHP插入表

> ID：12047536
> 
> 赞同：1
> 
> 时间：2012-08-21T02:01:33.993
> 
> 标签：php, mysql, html

```
<?php
$conn= new mysqli("localhost", "my_user", "my_password", "world"); //changed for the sake of this question

$username = $_POST['Username'];
$password = sha1($_POST['Password']);
$email = $_POST['Email'];
$firstname = $_POST['FirstName'];
$lastname = $_POST['LastName'];

$insert = 'INSERT INTO User(FirstName, LastName, Email, Username, Password, Type) VALUES ("'.$firstname.'", "'.$lastname.'", "'.$email.'", "'.$username.'", "'.$password.'", 'User');';

$result = $conn->query($insert);

?>
<form method='post' action='regprocess.php'>
<fieldset class="register">
<h2>Register</h2>
<ul>
    <li><label for="FirstName">First Name: </label> <input type="text" name="FirstName" id="FirstName"></li>
    <li><label for="LastName">Last Name: </label> <input type="text" name="LastName" id="LastName"></li>
    <li><label for="Email">Email: </label><input type="email" name="Email" id="Email"></li>
    <li><label for="Username">Username: </label><input type="text" name="Username" id="Username"></li>
    <li><label for="Password">Password: </label><input type="password" name="Password" id="Password"></li>
    <li><input type="submit" value="Register"></li>
</ul>
</fieldset></form> 
```

表单和顶部 sql 代码位于单独的文件中。

大家好，我正在尝试插入 mysql 表，但它不会插入到我的表中。我试图让它通过注册表插入。而且我不太确定为什么它不起作用。一些见解会很棒。如果您需要我提供表格，我会提供，但我认为这不是它不起作用的部分原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:17:12.910

It's a good thing you're using `mysqli`, but you're using it incorrectly and are exposing yourself to a number of very serious SQL injection bugs, the consequences of which could be severe.

This is what you should be doing to actually fix the numerous problems present in your example:

```
$stmt = $conn->prepare('INSERT INTO User(FirstName, LastName, Email, Username, Password, Type) VALUES (?,?,?,?,?,?)');

$stmt->bind_param($firstname, $lastname, $email, $username, $password, 'User');
$stmt->execute();

$result = $stmt->get_result(); 
```

The primary advantage of placeholders is not having to worry about how to properly quote data, it's done for you automatically. It also largely avoids having to use two different kinds of quotes within your statement.

If you do not use placeholders for **ANY** and **ALL** data being put into your SQL you may end up in serious trouble. You must be vigilant about this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:29:08.443

您的最后一个参数值是单引号。替换为双引号，使其显示为 ..."'.$password.'", "User");';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:30:39.583

我不知道PHP。不过，我会尝试帮助您使用 MySQL。

我认为插入查询中的引号有问题。

尝试从值子句中删除单引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T06:24:20.560

As an advice, always use " from the start to the end of the sql query text;

```
$insert = 'INSERT INTO User(FirstName, LastName, Email, Username, Password, Type) VALUES ("'.$firstname.'", "'.$lastname.'", "'.$email.'", "'.$username.'", "'.$password.'", 'User');'; 
```

put it like:

```
$insert = "INSERT INTO User(`FirstName`, `LastName`, `Email`, `Username`, `Password`, `Type`) VALUES ('$firstname', '$lastname', '$email', '$username', '$password', 'User');"; 
```

In your query, you had 'User' and you need to escape the ' as \'

And dont forget to always sanitize your content before adding it to the database

# php - 包括相同的文件但来自不同的目录

> ID：12047537
> 
> 赞同：0
> 
> 时间：2012-08-21T02:01:33.710
> 
> 标签：php

我有个问题; 实际上我找不到任何解决方案。

我有一个名为 cron_hourly.php 的文件

该文件执行一些任务，应该由 cronjob 运行；我拥有 4 个站点，其中包含 4 个具有相同架构和结构的不同数据库；（4个站点几乎相同）；这 4 个数据库只是它们持有的数据不同；

我需要为 4 个数据库运行这个文件；它对数据库进行一些查询，然后通过电子邮件发送一些信息。由于一些托管限制；我只能使用 1 个 cronjob；所以我在 4 个不同的目录中有 4 个 cron_hourly，它们执行相同的任务但在不同的数据库上！所以它们有一些函数和变量；实际上它们是相同的，只是它们连接到不同的数据库！问题是; 当我尝试使用下面的代码时

```
 include 'path1/cron_hourly.php';
     include 'path2/cron_hourly.php';
     include 'path3/cron_hourly.php';
     include 'path4/cron_hourly.php'; 
```

我收到错误“无法重新声明 someFunction()（之前在 '

相反; 如果我使用 include_once 只有要包含的第一个文件运行，而其他文件不运行！有什么我可以解决的吗？我想运行这四个文件而不会出现此错误！顺便一提; if(function_exists()) 无济于事！因为正如我之前所说，我需要为每个文件一遍又一遍地重新声明函数..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:25:06.153

您需要做的是使用命名空间，在此处查看更多信息：

[http://php.net/manual/en/language.namespaces.rationale.php](http://php.net/manual/en/language.namespaces.rationale.php)

# ibm-mq - 如何确定安装的 WebSphere MQ 是 32 位还是 64 位？

> ID：12047541
> 
> 赞同：2
> 
> 时间：2012-08-21T02:02:44.370
> 
> 标签：ibm-mq

您能告诉我如何识别已安装的 IBM WebSphere MQ 的版本位，32 还是 64？分别在 Windows、Linux 和 UNIX 上。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T02:27:08.980

`dspmqver -a`像这样使用：

```
bash-3.2$ dspmqver -a
Name:        WebSphere MQ
Version:     7.0.1.4
CMVC level:  p701-104-110114
BuildType:   IKAP - (Production)
Platform:    WebSphere MQ for Linux (x86-64 platform)
Mode:        64-bit
O/S:         Linux 2.6.18-194.17.4.el5
bash-3.2$ 
```

或在 Windows 上：

```
C:\>dspmqver
Name:        WebSphere MQ
Version:     7.5.0.0
Level:       p000-L120604
BuildType:   IKAP - (Production)
Platform:    WebSphere MQ for Windows
Mode:        32-bit
O/S:         Windows 7 Ultimate x64 Edition, Build 7601: SP1
InstName:    WMQ75
InstDesc:
InstPath:    C:\Program Files (x86)\IBM\WebSphere MQ
DataPath:    C:\Program Files (x86)\IBM\WebSphere MQ
Primary:     Yes
MaxCmdLevel: 750

C:\> 
```

这是[V7.1](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/fa15760_.htm)和[V7.5](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa15760_.htm)`dspmqver`的信息中心页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:26:33.437

```
dspmqver -f 96 
```

[http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp?topic=%2Fcom.ibm.mq.doc%2Ffa15760_.htm](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp?topic=%2Fcom.ibm.mq.doc%2Ffa15760_.htm)

# ruby-on-rails - Rails 中的 Web 服务和端点

> ID：12047546
> 
> 赞同：1
> 
> 时间：2012-08-21T02:03:37.127
> 
> 标签：ruby-on-rails

我是 Rails 的新手，我正在创建一个 RoR Web 应用程序，它们是一个移动组件，它将连接（CRUD）到我正在创建的默认数据库。我需要一些指导来编写 Web 服务组件以及此类应用程序中的有效端点应该是什么样的。任何方向都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:23:42.677

Ruby on Rails 提供开箱即用的 RESTful Web 服务开发，即在 RoR 上开发的任何应用程序本质上都是 RESTful Web 服务。要回答您的问题的具体细节，请考虑查看此[SO 线程](https://stackoverflow.com/questions/6099305/tutorials-or-screencasts-on-building-a-rest-web-service-on-rails)

# php - 在 Wordpress 中切换两种语言

> ID：12047550
> 
> 赞同：0
> 
> 时间：2012-08-21T02:04:29.130
> 
> 标签：php, html, css, wordpress, content-management-system

现在我正在做一个 Wordpress 项目。我的问题是在我的项目网站必须使用两种语言![看起来像这样](../Images/8231933d3fad0a7a188f46e5001ee9db.png)像这样如果我选择其中一种语言网站必须更改我选择的语言请帮助我找到解决方案:'(（我不需要插件，因为它不会改变它正确）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:07:54.247

你说你不需要插件，但到目前为止， [WPML](http://wpml.org/)很便宜，而且在这方面做得最好。我个人用它来做客户工作，它是我用过的最好的 WordPress 多语言插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:22:01.857

我只使用[**gtranslate 插件**](http://gtranslate.net/features)，它工作得很好。它具有支持标志的 58 种语言之间的翻译。

在这个插件的设置面板中，将翻译“on fly”。然后它不会重新加载页面进行翻译。

就试一试吧。干杯！！！

# javascript - 如何在 HTML 中使用单选按钮切换多个图像？

> ID：12047551
> 
> 赞同：0
> 
> 时间：2012-08-21T02:04:52.380
> 
> 标签：javascript, html, button, radio-button, dreamweaver

我正在尝试创建一个具有表单的 HTML 页面。我正在尝试这样做，以便当您单击以下单选按钮时：

（单选按钮） 红色
（单选按钮） 蓝色
（单选按钮） 绿色
（单选按钮） 白色
（单选按钮） 黑色

他们加载以下图像

```
Red.png  
Blue.png  
Green.png   
White.png  
Black.png 
```

我在其他网站上找了将近 3 个小时，非常感谢我能得到的任何帮助！我知道这需要 HTML 和 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:09:03.933

JavaScript，不是 Java :)

我会通过向这些标签添加一个`onclick`属性来做到这一点，该属性的值将是一些 JavaScript 代码，它会改变该图像的 （可能使用 获取图像的 DOM 节点）`<input>``onclick``src``document.getElementById("ID");`

另外，学习 JavaScript 的好地方是[w3schools](http://w3schools.com/js/default.asp)！

# jquery - 如何在jquery中选择孩子有特定班级的班级

> ID：12047566
> 
> 赞同：0
> 
> 时间：2012-08-21T02:07:18.313
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap, jquery-validate

我正在使用 twitter bootstrap 和 jquery validate 插件

我有一个看起来像这样的表单行：

```
<div class="form_row" >
<div class="control-group">
<label class="control-label" for="input01">home phone</label>
      <div class="controls">
        <input type="number" class="span4" class="input-xlarge"    id="home_phone"          name="home_phone" value="<?php echo $this->property->home_phone   ?>" rel="popover" data-content="Re-enter your home phone." data-original-title="homephone" >
    <input type="number" class="span4" class="input-xlarge" id="cell_phone" name="cell_phone" value="<?php echo $this->property->cell_phone ?>"  rel="popover" data-content="Re-enter your cell_phone." data-original-title="cell_phone" >
  </div> 
```

验证后，当我在 firebug 中查看它时，有错误的输入后面是 span.error。我想选择具有子项的 .control-group div，这些子项是 span.error

```
 $(".control-group").filter(function() { return !($(this).children().('span.error'))}) 
```

这似乎不起作用。谁能得到这个工作？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:16:32.113

```
$('span.error').parents('.control-group') 
```

这将选择页面上具有“控制组”类的任何项目，该项目在其内部的任何地方都有一个“错误”类。

# lua - Corona 中的 iPad 式惯性滚动

> ID：12047567
> 
> 赞同：0
> 
> 时间：2012-08-21T02:07:20.627
> 
> 标签：lua, coronasdk

`touch`我正在尝试使用事件和事件来模仿 Corona 中的 iPad 式惯性滚动`enterFrame`。简而言之，我应该能够在一定程度上拖动和“扔”一个对象，类似于 iPad 上的滚动。我对 Corona 还很陌生，但我以前用过其他语言。（这是我的第二天。）

这是我到目前为止的代码：

```
local bg = display.newImage("cloud.jpg");
bg:setReferencePoint(bg.TopLeftReferencePoint);
bg.x = 0;
bg.y = 0;

function bg:touch (event)
    print("event", event)
    for i,v in pairs(event) do
        print("**: ",i,v)
    end

    bg.x = event.x;
    bg.y = event.y;

    bg.xStart = event.xStart;
    bg.yStart = event.yStart;

    if (event.phase == "ended")
    then
        bg.xdelta = bg.xStart + bg.x;
        bg.ydelta = bg.yStart + bg.y;
        Runtime.addEventListener("enterFrame", bg);
    end 
end

function bg:enterFrame(event)
    bg.x = bg.x + bg.xdelta;
    bg.y = bg.y + bg.ydelta;
    // TODO: Add code to decrease delta so that object gradually stops.
end

bg:addEventListener("touch"); 
```

这会在编译器中引发错误。我究竟做错了什么？我尝试使 enterFrame 函数成为本地函数而不是表函数，但我遇到了同样的问题。我确信答案非常简单，但我对 Corona 还不够熟悉，无法立即看到它。

编辑：我做了一些阅读，我意识到这更接近我想要的：

```
local bg = display.newImage("cloud.jpg");
bg:setReferencePoint(bg.TopLeftReferencePoint);
bg.x = 0;
bg.y = 0;
bg.xdelta = 0;
bg.ydelta = 0;

local function onEveryFrame(event)
    bg.x = bg.x + (bg.oldx - bg.x);
    bg.y = bg.y + (bg.oldy - bg.y);
end

function bg:touch (event)
    if (event.phase == "ended")
    then
        print("ended")
        bg.oldx = bg.x;
        bg.oldy = bg.y;

        bg.x = event.x;
        bg.y = event.y;
        Runtime.addEventListener("enterFrame", onEveryFrame)
    end 

    print("event", event)
    for i,v in pairs(event) do
        print("**: ",i,v)
    end

    bg.oldx = bg.x;
    bg.oldy = bg.y;

    bg.x = event.x;
    bg.y = event.y;

    print("bg.x:", bg.x)
    print("bg.oldx:", bg.oldx)
    print("bg.y:", bg.y)
    print("bg.oldy:", bg.oldy)
end

bg:addEventListener("touch"); 
```

这不再出错，但我也没有得到想要的结果......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:13:06.850

我没有尝试在 Corona 中解决这个问题，但是在 Director 中实现平滑滚动时遇到了很多。

拖动时，捕获测量多个触摸事件速度的速度，将位置差异与时间戳差异进行比较。对各个测量点使用表格或链接列表，并在存储的值上平均速度。

然后与最后一个“移动”事件处于相同位置的“结束”事件只会稍微降低速度，保持惯性。在没有拖动事件的情况下，从摩擦速度中减去一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:37:42.057

实际上，您有语法错误。

它是 Runtime:AddEventListener （注意 : 而不是 .）

编辑：

现在关于你的数学：

您的逻辑是：在移动事件期间，它将 bg.p（p 表示位置，x 和 y）设置为 event.p

在结束事件期间，您将 bg.olp 设置为 bg.p，然后将 bg.p 设置为 event.p，然后您尝试对每一帧执行 bg.p+=(bg.oldp-bg.p)

如果您在“已移动”上执行 olp 逻辑，这可能会起作用，因为结果是这样的：

用户移动手指：移动了事件触发器，并且 bg.p 发生了变化（因此您看到它在移动）。用户尝试移除手指：这会触发“结束”事件，该事件具有非常高的变化，它将在与上次“移动”事件相同的位置触发（您需要非常、非常、非常快地移动手指触发远离上次“移动”的“结束”）。这将使您的 bg.oldp 与 bg.p 相同，因此您执行 bg.p+=(bg.olp-bg.p) 结果为 bg.p+=0

# java - 序列化二叉搜索树

> ID：12047568
> 
> 赞同：0
> 
> 时间：2012-08-21T02:07:26.663
> 
> 标签：java, c++, serialization, data-structures, binary-search-tree

究竟如何序列化 BST？以最有效的方式做到这一点的正确方法是什么？现在，这太笼统了，所以让我解释一下我的意思。

这是一些伪伪代码：

```
public int[] serialize(root){
    preorder traversal 
    convert node to binary representation
    add the binary representation to an array
    send array via stream
} 
```

或者

```
public int serialize(root){
    preorder traversal 
    convert node to binary representation
    send the binary representation via stream
} 
```

我的问题是——创建一个数组并发送它充满位，这有效吗？或者我应该跳过整个数组的想法，每次转换一个节点时，将其发送出去以反序列化它？也许这两种实现都是愚蠢的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:24:52.577

我建议你也看看谷歌协议缓冲区 [https://developers.google.com/protocol-buffers/docs/overview](https://developers.google.com/protocol-buffers/docs/overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:46:51.620

如果您所说的“流”是指 C++ iostream，它们已经以合理的大小缓冲，并且插入该缓冲区的成本非常低。标准库成熟；在自己的游戏中击败它非常困难。你需要可利用的细节来获得任何有价值的东西。那说：

您的输出缓冲区应该有多大（退化的情况是单元素缓冲区，即没有缓冲）取决于缓冲区刷新的开销。该开销将具有固定成本和与大小相关的成本——而不是给定缓存效应的简单线性成本。对于更昂贵的固定开销，更大的缓冲区有助于摊销固定费用。例如，如果缓冲区刷新可以触发零拷贝 I/O，那么缓冲所有较大的序列化可能会大大降低成本，但如果输出操作要复制源缓冲区，则缓冲区大小会减少大约四分之一当刷新的固定成本较低时，L1 缓存大小是一个不错的选择。

除非序列化所花费的时间将其置于关键路径上，否则这些都不重要，即使其成为用户正在等待的东西——对于这样的事情，除非您谈论数百万个以上的项目，否则很难产生。即使那样，如果您还没有研究过它，几乎可以肯定，您如何生成单个序列化比您选择的缓冲方案中的浪费更多——即使*那样*，也永远不要忘记您正在比赛的内容。是 I/O 带宽吗？通过低级压缩器发送您的序列化流可以比您预先做的任何事情轻松节省更多时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:23:57.550

BST 只能在后序中序列化，因为前序和中序不是唯一的。

1) 预购中非唯一

```
 root                     root
    /     \                   / 
  left    right             left
                               \
                               right 
```

2）按顺序不唯一

```
 1                 1
    /                   \    
   2                     2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T02:24:58.267

这取决于树和数据类型。如果树中节点的顺序很重要，您需要存储足够的信息来重新创建它。如果它在数组中，您可以使用数组中的位置来重新创建结构

# jquery - 更改链接ID

> ID：12047570
> 
> 赞同：0
> 
> 时间：2012-08-21T02:07:32.480
> 
> 标签：jquery

我很难使用 jquery 即时更改此链接的 ID。我可以更改链接文本，但不能更改 ID。有任何想法吗？

```
<a href="#" id="follow-5">follow</a> 
```

当您单击链接时，我希望它看起来像：

```
<a href="#" id="following-5">following</a> 
```

这是我的jQuery代码

```
$("a[id^='follow']").live('click', function(e) {
    e.preventDefault();
    var aid = $(this).attr('id').substring(7);
    $.ajax({
        type: "POST", url: "/artist/", data: "command=becomeFan&aid=" + aid,
        dataType: "html",
        success: function(data){
            $("#follow-" + aid).text("Following");
            $("#follow-" + aid).prev("a").attr("id","following-" + aid);
        }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:11:00.587

那么问题是您的代码不会尝试更改该元素的 id *，*它会尝试更改`.prev()`元素的 id。所以改变：

```
$("#follow-" + aid).prev("a").attr("id","following-" + aid); 
```

到：

```
$("#follow-" + aid).attr("id","following-" + aid); 
```

它应该工作。但是鉴于您已经在该行上选择了相同的元素，然后才应该链接`.attr`调用：

```
 $("#follow-" + aid).text("Following")
                           .attr("id","following-" + aid); 
```

或者不是通过 id 重新选择元素，而是在进行 Ajax 调用之前保存对它的引用：

```
$("a[id^='follow']").live('click', function(e) {
    e.preventDefault();
    var $this = $(this),
        aid = $this.attr('id').substring(7);
    $.ajax({
        type: "POST", url: "/artist/", data: "command=becomeFan&aid=" + aid,
        dataType: "html",
        success: function(data){
            $this.text("Following").attr("id","following-" + aid);
        }
    });
    return false;
}); 
```

另请注意，您对属性的使用以 selector with 开头，`$("a[id^='follow']")`即使在它们的 id 更改后也会继续选择这些元素，但是在您更改 id 后，使用`.substring(7)`从末尾获取 id 将*不起作用。*您可能希望将其更改为，`$("a[id^='follow-']")`以便单击处理程序仅适用于尚未单击的链接。

# google-apps-script - 如何在单击按钮时从 Google App Script 中的 TextArea 获取信息？

> ID：12047576
> 
> 赞同：0
> 
> 时间：2012-08-21T02:08:08.393
> 
> 标签：google-apps-script

我正在尝试在 Google App Script 中制作一个简单的脚本，该脚本从文本区域中提取信息并在单击按钮时对其进行解析。我能够创建文本区域，但无法从中提取文本。

如何在单击按钮时从 Google App Script 中的 TextArea 获取信息？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:40:58.230

TextArea 与任何其他小部件一样工作；

在 do Get 函数（或您创建小部件的任何其他函数）中，您具有例如：

```
 var Mtext = app.createTextArea().setPixelSize(340,400).setName('Mtext').setId('Mtext'); 
```

在处理函数中：

```
 var bodytext = e.parameter.Mtext; 
```

如果您需要从外部函数修改其内容，您可以使用：

```
var Mtext = app.getElementById('Mtext');
Mtext.setText('New text content...'); 
```

# php - 循环中带有输入选择器的jquery数据属性

> ID：12047577
> 
> 赞同：0
> 
> 时间：2012-08-21T02:08:14.600
> 
> 标签：php, jquery, html

我有一个从数据库查询构建的 html 表，该表循环并为找到的每个相机名称创建一个按钮并将它们放在一个表中：

```
<?php
for($i=0;$i<$num_rows;$i++)
{

?>
<tr>
<td>
    <input type="submit" class="play" data-hash="<?php echo $result_cameras[$i]["camera_hash"]; ?>" value="<?php echo $result_cameras[$i]["camera_name"]; ?>">
</td>
</tr>

<?php
}
?> 
```

这解决了这样的问题：

```
<tr>
<td>
    <input type="submit" class="play" data-hash="0d3d0ac6e54a640c73f1149d4d0bbc38e99d10f5" value="Office Window">
</td>
</tr>
<tr>
<td>
    <input type="submit" class="play" data-hash="b824cba374c3d5ab7806ad8260c939323c03147b" value="aaa">
</td>
</tr>
<tr>
<td>
    <input type="submit" class="play" data-hash="ec9658f0c1855e2e2ac09ae284f5e6990dbf445d" value="laptop">
</td>
</tr> 
```

请注意，每个按钮的数据哈希属性都不同。我想用我的 jquery 代码处理这个按钮：

```
$(".play").click(function(){
    var camerahash = $('input').data('hash');
    console.log($('input').data('hash'));
}); 
```

无论我点击哪个按钮，我总是会从我点击的第一个按钮获得哈希值：`0d3d0ac6e54a640c73f1149d4d0bbc38e99d10f5`. 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:13:26.487

`$('input').data('hash')`为您提供选择中第一个输入的`$(this).data('hash')`数据属性，用于获取当前单击的输入的数据属性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T02:13:40.530

您需要指定要读取的输入元素。尝试类似：

```
$(".play").click(function(){
    $this = $(this);
    var camerahash = $this.data('hash');
    console.log($this.data('hash'));
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T02:13:20.840

您总是调用 .play 的第一个对象。这将是一个正确的方法：

```
$('.play').on('click', function(){

  var camerahash = $(this).data('hash');

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T02:19:12.740

您总是可以使用`.attr(data-hash)`html5 属性来获取它们。

尝试：

```
$('.play').on('click', function() {
      var _hash = $(this).attr('data-hash');
      console.log(_hash);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T02:20:37.990

您的选择器将返回它涉及的第一个。改用这个

```
<script>
    $("input.play").click(function() {
        alert($(this).data('hash'));
    });
</script> 
```

# javascript - 如果内部有块元素，如何使用javascript拆分html内联元素

> ID：12047581
> 
> 赞同：1
> 
> 时间：2012-08-21T02:08:29.690
> 
> 标签：javascript, html, split, inline

首先原谅我的英语不好。我会尽力解释我的问题！

所以我的问题是我需要拆分 span html 元素，如果它里面有任何这样的元素

```
<span>
  bla-bla \r\n
    <div>hello</div> 
  world:)
</span> 
```

进入

```
<span>
  bla-bla \r\n
</span>
<div>
  hello
</div>
<span>
  world:)
</span> 
```

如果 span 有多个 div 或者有多个 span 像

```
<span class="bold">
  bla 
  <span class="anyclass">
    bla 
    <div>
      Hello
    </div> 
    bla 
    <span class="anyclass#2"> 
      bla-bla 
    </span> 
    <h1>
      amigo
    </h1> 
    <span class="anyclass#3">
      <h2>
        :)
      </h2>
      world
    </span>
  </span> 
  la-la
</span> 
```

它应该分为

```
<span class="bold">
  bla 
  <span class="anyclass">
    bla 
  </span>
</span>
<div>
  Hello
</div>
<span class="bold">
  <span class="anyclass">
    bla 
    <span class="anyclass#2"> 
      bla-bla 
    </span> 
  </span>
</span>
<h1>
  amigo 
</h1>
<span class="bold">
  <span class="anyclass">
    <span class="anyclass#3">
    </span>
  </span>
</span>
<h2>
  :)
</h2>
<span class="bold">
  <span class="anyclass">
    <span class="anyclass#3">
      world
    </span>
  </span> 
  la-la
</span> 
```

好吧，可能有多个 div 和 h1 或它们中的任何一个在 span 内，或者可能有多个插入的 span 和 div 在其中，我真的陷入了困境。

我知道它看起来令人毛骨悚然，但我需要对它做点什么！

如果任何人都知道如何解决这个拼图或知道一些事情或已经遇到过类似的事情，请帮助我！

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:36:33.133

这比看起来要复杂得多。这是我的解决方案：

### [jsfiddle](http://jsfiddle.net/yZXHF/1/)

```
function removeSiblings(el, before) {
    var parent = el.parentNode;
    var children = [].slice.call(parent.childNodes);
    var active = !!before;
    for (var i = 0; i < children.length; i++) {
        if (children[i] == el) {
            active = !active;
        } else if (active) {
            parent.removeChild(children[i]);
        }
    }
}

function removeBeforeOrAfter(top, path, before) {
    var els = [];
    for (var i = 0; i < path.length; i++) {
        els.push(restorePath(top, path.slice(0, i + 1)));
    }
    for (var i = 0; i < els.length; i++) {
        removeSiblings(els[i], before);
    }
}

var indexPath = [];
function walkPath(el, condition) {
    if (el.nodeType !== Node.ELEMENT_NODE) {
        return null;
    }
    if (!condition(el)) {
        return el;
    }
    var children = [].slice.call(el.childNodes);
    for (var i = 0; i < children.length; i++) {
        indexPath.push(i);
        var result = walkPath(children[i], condition);
        if (result) {
            return result;
        }
        indexPath.pop();
    }
    return null;
}

function restorePath(el, path) {
    for (var i = 0; i < path.length; i++) {
        el = el.childNodes.item(path[i]);
    }
    return el;
}

function isInlineElement(el) {
    return /^(A|B|BR|CODE|I|IMG|SPAN|STRONG)$/.test(el.tagName); // list not complete
}

function split(wrongNode, topNode, indexPath) {
    var clone = topNode.cloneNode(true);
    var wrongClone = restorePath(clone, indexPath);
    if (topNode.nextSibling) {
        topNode.parentNode.insertBefore(clone, topNode.nextSibling);
    } else {
        topNode.parentNode.appendChild(clone);
    }
    removeBeforeOrAfter(topNode, indexPath, false);
    topNode.parentNode.insertBefore(wrongNode, topNode.nextSibling);
    removeBeforeOrAfter(clone, indexPath, true);
    wrongClone.parentNode.removeChild(wrongClone);
}

$(document).ready(function() {
    var nodes = document.body.childNodes; // live nodeList!
    for (var i = 0; i < nodes.length; i++) {
        var wrongNode = walkPath(nodes[i], isInlineElement);
        if (wrongNode) {
            split(wrongNode, nodes[i], indexPath);
        }
        indexPath = [];
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:14:22.580

**编辑：**注意，您可以使用以下 Jquery 代码获得您喜欢的结构

```
 $(document).ready(function(){

$('span').each(function(){

    $(this).children(':not("span")').before('</span').after('<span>');

});

}); 
```

虽然，这是一种**肮脏**的做事方式，考虑到这种不寻常的期望，我认为这就是方式。缺点是您必须手动检查类或任何属性，并且必须将其添加到要附加的 span 元素中（此处未完成；只是重新排列了 span 元素）。. . .

**[这是小提琴](http://jsfiddle.net/th7VR/)...**

上面的小提琴使用所有非跨度子项，可以根据您的需要过滤到特定标签，如 div h1 h2 等。. . .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:21:39.180

跨度是通用的内联文本元素，内联元素不会创建中断。

div 是除法元素的缩写，它是一个通用的块级元素，它创建中断（默认情况下）。

块元素允许包含其他块元素和内联元素。

内联元素允许包含其他内联元素，但禁止包含块级元素。

换句话说，您不能将 div 元素放在 span 元素中。

如果您希望创建一个换行符，您可以在 span 元素上使用 CSS clear 属性，尽管您不能有效地将除法元素保留在其他 span 元素中，因此请在您遇到糟糕的代码之前修复它。

CSS clean 属性具有以下值：left、right、both、inherit、none。

您可以使用以下任何一种...

```
span.clear {clear: both;}
span.clear_left {clear: left;}
span.clear_right {clear: right;} 
```

还要从内联元素中删除标题，这只是......不是你的 HTML 的方式。

我强烈建议您进行研究，以极大地提高您对从这里开始的元素上下文的理解......

[http://www.w3.org/TR/xhtml11/doctype.html#s_doctype](http://www.w3.org/TR/xhtml11/doctype.html#s_doctype)

请记住，您的代码越符合标准，就越容易使用您的代码，因为它降低了任何给定情况的主观性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T16:52:07.207

多谢你们！我在想一切，但不是像**Pumbaa80**那样！

我花了一天时间试图了解它是如何工作的，这似乎是根据需要拆分内联元素的唯一也是最简单的方法！

顺便说一句，它有一个错误 - 在此示例中它不会拆分 span#span2 ：

```
<span id="span1">
  <div id="div1">
    <span id="span2">
      <div id="div2">
        Hello!
      </div>
    </span>
  </div>
</span> 
```

我希望几天后我能完成我的**Pumbaa80**脚本版本并将其添加到这篇文章中！

# cakephp - 分页和排序 - 插件不起作用 - CakePHP 2.0

> ID：12047584
> 
> 赞同：1
> 
> 时间：2012-08-21T02:09:05.287
> 
> 标签：cakephp, sorting, plugins, pagination, cakephp-2.0

我创建了一个名为电影的插件，我使用了自定义路线。我已将分页限制用作“5”。

第一页很好，但是当我点击下一页或数字时。那些东西是行不通的。

网址：`something.com/movieslist/2`

`my Plugin/Movies/Config/routes.php`

```
Router::connect('/movieslist', array('plugin' => 'Movies', 'controller' => 'Movies', 'action' => 'index'));
Router::connect('/movieslist/:page', array('plugin' => 'Movies', 'controller' => 'Movies', 'action' => 'index')); 
```

`my action code: Plugin/Movies/Controller/MoviesController.php`

```
public function index() {
        $this->Movie->recursive = 0;
        $this->paginate = array('limit'=>5);
        $this->set('movies', $this->paginate());
    } 
```

`my view file code: Plugin/Movies/View/Movies/index.ctp`

来自 cakebake 控制台的相同。此处未进行任何更改。

甚至排序也不起作用:(我已经在很多地方搜索我的问题了:(

我以前在链接本身中遇到错误，我在看到这个页面后修复了这个问题： [CakePHP custom route pagination](https://stackoverflow.com/questions/5033633/cakephp-custom-route-pagination)

链接是固定的，但链接不起作用。请不要投票，我很长一段时间都在挣扎。

我正在使用`cakephp 2.0`版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T10:57:48.440

作为第一步，我将交换路由器规则的顺序，因为 cakephp 在找到第一个匹配项后停止。虽然 "/movieslist/:page" 会将 url 与页面匹配，但它只对命名参数这样做`page`。如果没有它，“/movielist/2”形式的 url 可能会被解释为带有普通参数“2”的“/movielist”链接，因此会触发第一个路由器规则。

如果这不起作用，您总是可以手动设置命名`page`参数。`paginate`只是查看它是否已设置，但不关心 cakephp 是自动从 url 中找出来的，还是您自己做的。

```
public function index($myPage=1) {
    $this->Movie->recursive = 0;
    $this->paginate = array('limit'=>5);
    $this->params["page"] = $myPage;
    $this->set('movies', $this->paginate());
} 
```

# php - 如何引导客户到 PayPal 付款

> ID：12047585
> 
> 赞同：1
> 
> 时间：2012-08-21T02:09:14.897
> 
> 标签：php, html

我开发了一个购物车。客户选择项目，“display.htm”页面显示项目名称、总数量和他必须支付的总付款。所以我想知道当客户点击“点击这里付款”按钮时，如何让他通过 PayPal 付款。

```
display.html:

<body>
<body onLoad="getDoc()">
<div id="display"> </div>
</body>

display.php:

     <?php
                     $xml = new DOMDocument;
                     $xml->load("cart.xml");
                     $book = $xml->getElementsByTagName("book"); 
                     echo "<table border=1><tr><th>Title</th><th>Quantity</th><th>Total Price</th></tr>";   
                    $total_pay=0;
                      foreach($book as $node) 
                     { 
                    $title = $node->getElementsByTagName("title");
                    $title = $title->item(0)->nodeValue;  
                    $quantity = $node->getElementsByTagName("quantity");
                    $quantity = $quantity->item(0)->nodeValue;
                    $totalprice = $node->getElementsByTagName("totalprice");
                    $totalprice = $totalprice->item(0)->nodeValue;
                    $total_pay=$total_pay+$totalprice;
                    echo" <tr><td>{$title}</td><td>{$quantity}</td><td>{$totalprice}</td></tr>";
                    }
                   echo "</table>";
                   echo "<br />";
                   echo "Your total payment is: $total_pay  <br/>";

                   echo "<form><input type='button' name='submit'  value='Click Here to Proceed For Payment' onClick='window.location.href=   '/></form>";

                ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:23:02.133

访问 www.paypal.com 并查看 Web Pro Payment API。他们提供足够的 PHP API 文档，包括特定于您的 Paypal 帐户的 HTML，以便正确结帐。

# c++ - 检测应用程序 C++ 的双重执行

> ID：12047589
> 
> 赞同：2
> 
> 时间：2012-08-21T02:09:52.013
> 
> 标签：c++, execution

有什么方法可以停止 C++ 中应用程序的双重执行，以便一次只运行一个应用程序实例？

* * *

编辑：Windows 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:16:24.637

在 C++ 标准中没有办法做到这一点。您需要的是使用底层平台提供的机制。例如，以下是[您在 Windows 上的操作方式](http://support.microsoft.com/kb/243953)。

[以下是您在 Mac OS X 上的操作方法](https://stackoverflow.com/questions/684911/how-to-detect-whether-an-os-x-application-is-already-launched)。如您所见，方法可能不同，取决于您想要什么。

它归结为检查您的应用程序是否正在运行，然后退出。

[这里有更多方法](http://nsis.sourceforge.net/Check_whether_your_application_is_running)可以检查您的应用程序是否在 Windows 上运行（代码使用不同的语言，但概念相同）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:29:29.927

如果您需要跨平台解决方案，可以使用[Boost.Interprocess](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess.html)：

```
#include <iostream>
#include <boost\interprocess\sync\named_mutex.hpp>

int main(int, char **argv) {
    using namespace boost::interprocess;
    using namespace std;
    static const char *unique_name = "xyzzy";
    try {
        named_mutex justonce(create_only, unique_name);
        cout << "running..." << endl;

        char c;
        cin >> c;

        named_mutex::remove(unique_name);
    } catch (interprocess_exception) {
        cout << "already running..." << endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T14:35:59.830

您可以按照 Singelton 类设计模式来解决您的问题。在任何时候，它都会创建最多一个对象。

# python - Python记录显示问题

> ID：12047590
> 
> 赞同：0
> 
> 时间：2012-08-21T02:09:53.663
> 
> 标签：python, logging, scipy, io-redirection

我正在尝试记录由包含 Scipy 优化例程的脚本生成的终端显示。我尝试了三种不同的方法，结果都令人失望。

open() 和 cmd-prompt 重定向 (">") 没有记录警告，也没有记录我想要跟踪的每次迭代信息；它只记录了参数解决方案。

logging.basicConfig() 生成一个空白文件。

如果可能的话，我希望能够记录脚本文件的确切终端显示。我已经开始研究使用日志记录模块，但对于我认为是一项非常基本的任务（我来自 Matlab 背景）来说，这似乎相当复杂。

环境：

. Python 2.7.3

. 操作系统：Windows Vista 和 XP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:27:37.630

可能您感兴趣的内容被发送到 stderr 而不是 stdout。尝试将两者都重定向到文件。你可以在 Python 中做到这一点：

```
import sys

with open("log.txt", "w") as logfile:
    sys.stdout, sys.stderr = logfile, logfile

    # do your stuff here, e.g. import the module that you want to log 
```

或者从命令行：

```
python myscript.py > log.txt 2>&1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:26:25.627

看一下 linux[脚本](http://linux.about.com/library/cmd/blcmdl1_script.htm)命令。它保存打印在终端中的所有内容。

```
user@host:~ $ script
Script started, file is typescript
user@host:~ $ ls
bin  Documents  Pictures  Videos
user@host:~ $ exit # ^D stops script
Script done, file is typescript 
```

然后，结果在一个名为`typescript`.

# php - PHP/MySQL 从数据库中取出一个表但从表中排除一个字段？

> ID：12047596
> 
> 赞同：0
> 
> 时间：2012-08-21T02:11:18.047
> 
> 标签：php, mysql, sql, database, html-table

我有一个表格，允许用户设置表格中数据的排序方式以及它是增加还是减少顺序

[http://damiensplace.co.uk/test/requestTableDisplay.htm](http://damiensplace.co.uk/test/requestTableDisplay.htm)

但是我希望用户选择排除字段（年龄等级）表单设置变量，但一直在绞尽脑汁思考如何做到这一点，但我想出的唯一方法并不整洁，因为我基本上需要编写两段代码我错过了一个技巧？

```
<html><head><title>MySQL Table Viewer</title></head><body>
<?php
$db_host = '****';
$db_user = '***';
$db_pwd = '***';

$sortOn = $_POST['SortOn'];
$sortIn = $_POST['SortIn'];

$database = '****';
$table = '***';

if (!mysql_connect($db_host, $db_user, $db_pwd))
    die("Can't connect to database");

if (!mysql_select_db($database))
    die("Can't select database");

// sending query
$result = mysql_query("SELECT * FROM {$table} order by {$sortOn} {$sortIn}");
if (!$result) {
    die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

echo "<h1>Table: {$table}</h1>";
echo "<table border='1'><tr>";
// printing table headers
for($i=0; $i<$fields_num; $i++)
{
    $field = mysql_fetch_field($result);
    echo "<td>{$field->name}</td>";
}
echo "</tr>\n";
// printing table rows
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable
    foreach($row as $cell)
        echo "<td>$cell</td>";

    echo "</tr>\n";
}
mysql_free_result($result);
?>
</body></html> 
```

如果有人能指出我正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:19:21.853

您应该有如下查询：

```
SELECT (columns) FROM (table) 
```

不要全选，看来您只想要特定的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:19:24.827

很简单。而不是运行此查询：

`SELECT * FROM {$table} order by {$sortOn} {$sortIn}`

运行这个：

`"SELECT hats, cats, margarine FROM {$table} order by {$sortOn} {$sortIn}`

...where `hats`，`cats`并且`margarine`将被表中的字段替换。您可以通过这种方式指定任意数量的字段，甚至可以只抓取一个字段。

# eclipse - 使用 Eclipse CDT 和 Clearcase

> ID：12047597
> 
> 赞同：1
> 
> 时间：2012-08-21T02:11:22.747
> 
> 标签：eclipse, clearcase, eclipse-cdt

我最近加入了一个大型 C++ 项目，该项目的代码库位于 Clearcase 中。主要的构建系统是 make，它也在 Clearcase 中。构建笨重且冗长，因此我想使用 Eclipse 的 Clearcase 插件为 Eclipse CDT 项目选择一小部分文件，我可以将其用作主动开发和调试的替代构建系统。

有没有一种强大的方法来做到这一点？Eclipse 设置是在 Linux 上运行的 Helios SR2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T04:08:28.103

首先，一般建议：在编译时使用快照视图，而不是动态视图，特别是如果您需要访问（例如用于链接目的）大型二进制文件：编译会更快。

此外，在快照视图中，您将根据其加载规则选择实际需要查看和处理的文件子集。

另一种加快编译的方法（如果您不需要访问大型二进制文件），这次是使用*动态视图*`clearmake`，但使用而不是`make`，允许 ClearCase 记录**DO**（派生对象）：请参阅“ [ClearCase Build概念](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.books.cc_build_windows.doc/clearcase_build_concepts.htm)"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:51:18.657

在回答我自己的问题时，可以通过 File > New > “Makefile Project with Existing Code”来创建一个项目。将出现“导入现有代码”对话框，可以在其中输入根文件夹路径。

# winforms - windows窗体本地化，文字会消失

> ID：12047600
> 
> 赞同：0
> 
> 时间：2012-08-21T02:11:34.973
> 
> 标签：winforms, visual-c++, localization

我用c++ windows form写了一个window UI。我想创建一个字符串表来本地化表单。我的步骤是：
1\. 我设置表单localizable=true。
2\. 添加一个名为（项目名称）.en-US.resx 的新 .resx 文件并编辑字符串表。
3\. 使用类似代码设置组件的
`this->button1->Text = resources->GetString("CLOSE");`
文本设置完文本后，我构建项目并执行它，按钮真正显示文本。但是如果我修改 UI（如添加组件或更改按钮的位置），文本将在我再次构建后消失。代码有什么问题？文字怎么总能显示出来？否则修改表格需要重新设置><. 感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:29:49.427

不要更改设计器生成的代码。InitializeComponent() 方法中的任何内容。当您在设计器中进行另一项更改并重新生成方法时，此类更改将消失。构造函数中的代码是可以的，放在 InitializeComponent() 调用之后。

本地化表单的更好过程是让设计人员生成 .resx 文件*和*代码。将表单的 Language 属性更改为所需的语言，然后在属性网格中更改 Text 属性。不需要额外的代码。

# android - 如何将背景设置为黑色

> ID：12047607
> 
> 赞同：1
> 
> 时间：2012-08-21T02:13:25.017
> 
> 标签：android, themes

我将活动主题设置为浅色。

```
android:theme="@android:style/Theme.Light.NoTitleBar" 
```

我将布局背景设置为 0x000000。
它将显示为灰色。
怎么让它变黑？　

我将下面的行设置为 color.xml。
#000000 并设置如下：

```
ll.setBackgroundColor(R.color.black); 
```

ll 是线性布局。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T02:38:32.403

您应该使用`#ff000000`而不是`#000000`. 试试这个：

```
//Try one of these lines:
ll.setBackgroundColor(Color.parseColor("ff000000"));
ll.setBackgroundColor(Color.BLACK);

//Or change your color.xml value to #ff000000 and use
ll.setBackgroundColor(R.color.black); 
```

# string - 是否可以在 awk 中使用两个不同的字段分隔符并将两者的值存储在变量中？

> ID：12047613
> 
> 赞同：4
> 
> 时间：2012-08-21T02:14:02.357
> 
> 标签：string, bash, parsing, awk

我想我的一般问题是，是否可以给 awk 一个字段分隔符，将其中一个标记存储在一个变量中，然后给 awk 另一个字段分隔符，并将其中一个标记存储在第二个变量中，然后打印出来变量值？似乎变量存储了对 $nth 标记的引用，而不是值本身。

我想到的具体例子或多或少遵循这种形式：*{An​​imal}, {species} class*

```
Cat, Felis catus MAMMAL
Dog, Canis lupus familiaris MAMMAL
Peregrine Falcon, Falco peregrinus AVIAN
... 
```

并且您希望它输出如下内容：

```
Cat MAMMAL
Dog MAMMAL
Peregrine Falcon AVIAN
... 
```

你想要的是符合以下形式的东西：*{Animal} 类*

用 {} 括起来的东西意味着它可以有任意数量的空格。

我最初的想法是我会有这样的事情：

```
cat test.txt | awk '{FS=","}; {animal=$1}; {FS=" "}; {class=$NF}; {print animal, class}; > animals.txt 
```

我希望变量“动物”存储逗号左侧的内容，而“类”具有该动物的类类型，例如 MAMMAL 等。但最终发生的是只有最后使用的字段分隔符是已应用，因此对于名称中包含空格的事物（例如 Peregrine Falcon 等），这将中断。

所以它看起来像

```
Cat, MAMMAL
Dog, MAMMAL
Peregrine AVIAN 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T02:27:05.930

一种使用方式`awk`：

```
awk -F, '{ n = split($2,array," "); printf "%s, %s\n", $1, array[n] }' file.txt 
```

结果：

```
Cat, MAMMAL
Dog, MAMMAL
Peregrine Falcon, AVIAN 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T02:30:06.200

你总是可以`split()`在你的 awk 脚本中。您还可以操作导致整行被重新解析的字段。例如，这会在您的问题中得到结果：

```
awk '{cl=$NF; split($0,a,", "); printf("%s, %s\n", a[1], cl)}' test.txt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T08:14:11.280

字段分隔符`awk`可以是任何正则表达式，但在这种情况下，使用记录分隔符可能更容易，将其设置为`[,\n]`将在您想要的字段之间交替：

```
awk -v RS='[,\n]' 'NR % 2 { printf("%s, ", $0) } NR % 2 == 0 { print $NF }' 
```

因此偶数字段完整输出，奇数字段仅输出最后一个字段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T02:33:57.463

```
paste -d, <(cut -d, -f1 input.txt) <(awk '{print $NF}' input.txt) 
```

*   `cut`第一列
*   `awk`获取最后一列
*   `paste`他们在一起

### 输出：

```
Cat,MAMMAL
Dog,MAMMAL
Peregrine Falcon,AVIAN 
```

# codeigniter - codeiginter HMVC 中的子模块？

> ID：12047614
> 
> 赞同：1
> 
> 时间：2012-08-21T02:14:06.347
> 
> 标签：codeigniter, hmvc

我正在构建一个购物车系统，作为使用 HMVC 的 CodeIgniter 2 站点的一部分。

我希望可以将模块分解为子模块，而不是拥有一个大的“购物车”模块。

例如

```
/modules/cart
/modules/cart/config
/modules/cart/controllers
/modules/cart/models
/modules/cart/views
/modules/cart/modules

/modules/cart/modules/categories
/modules/cart/modules/categories/config
/modules/cart/modules/categories/controllers
/modules/cart/modules/categories/models
/modules/cart/modules/categories/views

/modules/cart/modules/products
/modules/cart/modules/products/config
/modules/cart/modules/products/controllers
/modules/cart/modules/products/models
/modules/cart/modules/products/views 
```

是否可以这样做或类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:31:46.773

我在`codeigniter`4-5个月前工作。据我记得在应用程序文件夹中，我们可以制作`modules`.

在`modules`包下，我们可以使用我们需要的名称创建包。我们可以称它为`cart`。

下`cart`，据我所知，我们不能在它下创建模块。但是像每个文件夹一样，我们可以创建特定的子文件夹，这也可以解决您的问题。

您的文件夹结构将如下所示

```
/modules/cart
/modules/cart/config
/modules/cart/controllers
/modules/cart/controllers/categories
/modules/cart/controllers/product
/modules/cart/models
/modules/cart/models/categories
/modules/cart/models/product
/modules/cart/views
/modules/cart/views/categories
/modules/cart/views/product 
```

我可能错了。在此链接[https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)上描述得很好。

# c# - 将参数从一个 XAML 页面传递到另一个

> ID：12047616
> 
> 赞同：0
> 
> 时间：2012-08-21T02:14:23.943
> 
> 标签：c#, wpf

我有一个 Tile Layout Control，其中当然包含 Tiles，我用它来让用户浏览页面，我只是想在我的页面之间传递一些参数，如字符串或整数……怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:17:06.857

您可以尝试这种方法或仅通过在类之间传递数据

[http://msmvps.com/blogs/siva/archive/2007/05/11/storing-application-wide-data-the-wpf-way.aspx](http://msmvps.com/blogs/siva/archive/2007/05/11/storing-application-wide-data-the-wpf-way.aspx)

```
 Application.Current.Properties["youvalueindex"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:52:57.200

通常，您将有某种管理器来控制您的窗口。该经理将处理在窗口之间传递数据。窗口通常不应该相互了解任何信息。

**简单的例子**

```
class Manager
{
   ...
   void DoSomething()
   {
      ViewModelA vma = new ViewModelA();
      WindowA wa = new WindowA();
      wa.DataContext = vma;
      wa.ShowDialog();
      ViewModelB vmb = new ViewModelB();
      vmb.SharedData = vma.SharedData;
      WindowB wb = new WindowB();
      wb.DataContext = vmb;
      wb.ShowDialog();
   }
   ...
} 
```

# objective-c - 在objective-c中自动延迟创建自动属性

> ID：12047617
> 
> 赞同：0
> 
> 时间：2012-08-21T02:14:30.023
> 
> 标签：objective-c, properties

我有财产

```
@property (strong, nonatomic, readonly) NSMutableArray*     myArray; 
```

我想在 getter 中懒惰地创建数组

```
- (NSMutableArray*)myArray
{
    if(_myArray == nil)
    {
        _myArray = [NSMutableArray arrayWithCapacity:4];
    }
    return _myArray;
} 
```

但这打破了 iVar (`_myArray) 的自动合成，否定了自动合成的一些好处，这意味着您必须以旧方式做事。

这是一种非常常见的模式，如果能自动合成一个惰性创建的 getter 版本会很好。我想这需要对 Objective-C 语言和编译器进行扩展，例如使用这样的附加属性：

```
@property (strong, nonatomic, readonly, lazycreate) NSMutableArray*     myArray; 
```

任何实现预定义类方法的类（以类似于[此处描述的对象下标的](http://clang.llvm.org/docs/ObjectiveCLiterals.html)方式），例如`+ (ClassType*)defaultConstructor`可以支持`lazycreate`属性属性和自动合成，然后可以在我的示例中合成 getter，如下所示：

```
- (NSMutableArray*)myArray
{
    if(_myArray == nil)
    {
        _myArray = [NSMutableArray defaultConstructor];
    }
    return _myArray;
} 
```

我对这需要语言扩展是对的，还是现在有一个聪明的方法来实现它？

这个想法有什么问题或陷阱吗？它们是什么？

我如何在 Objective-C 语言中提出这个想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:08:23.343

添加新的属性属性`lazycreate`需要修改编译器。[您可以通过在http://bugreport.apple.com](http://bugreport.apple.com)上打开一个新问题来要求 Apple 添加它。产品为“开发者工具”，分类为“功能（新）”。

你可以像这样定义一个宏：

```
#define synthesizeLazy(Type, Property) \
    synthesize Property = _##Property; \
    - (Type *)property { \
        if (_##Property == nil) { _##Property = [[Type alloc] init]; } \
        return _##Property; \
    } 
```

然后用它来合成你的惰性属性，如下所示：

```
@synthesizeLazy(NSMutableArray, myArray); 
```

完全自动合成没有很好的方法来伪造它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:15:08.280

您应该查看 NSObject 上可用的元编程方法，例如`-implementationForMethod`. 这允许您在运行时提供缺失方法的实现。

您可以使用它为任何声明的属性动态地提供 getter/setter。

然后，您可以从默认值字典中读取..

您也可以尝试覆盖`-valueForUndefinedKey:`

这可能会有所帮助：[https ://gist.github.com/2370784](https://gist.github.com/2370784)

# sql-server - '800a0e78' - 对象已关闭 - 以前工作过

> ID：12047621
> 
> 赞同：0
> 
> 时间：2012-08-21T02:15:45.900
> 
> 标签：sql-server, asp-classic

我已经搜索了高低以解决这个问题，但似乎无法自行解决。我是经典 ASP 的新手，但我是很长时间的 PhP 开发人员。

我越来越

> > ADODB.Recordset 错误 '800a0e78'
> > 对象关闭时不允许操作。
> > /sdd/fx_mlogin.asp，第 54 行

在登录我正在处理的网站时。其引用的行是：

```
Set rs = cmd.Execute
If RS.BOF or RS.EOF then 
```

更多相关代码：

```
Set cn = Server.CreateObject("ADODB.Connection")
cn.Open MM_ap_connect_STRING
Set cmd = Server.CreateObject("ADODB.Command")
Set cmd.ActiveConnection = cn
cmd.CommandText = "sd_member_login " & "'" & guid & "', " & """" & trim(user) & """, " & "'" & trim(pw) & "', " & "'" & uip & "', " & "'" & uagent & "', " & "'" & logintrack & "'"
Set rs = cmd.Execute
If rs.BOF or rs.EOF then 
```

令人惊讶的是，该网站以前工作过，我们正在移动主机。连接显然有效，但我怀疑它仍然是问题。我的连接字符串是

```
MM_ap_connect_STRING =  "Provider=SQLOLEDB;Data source=sql2103.shared-servers.com,1087;Initial catalog=database;User Id=username;Password=password;" 
```

但很明显，填写了用户名、密码和数据库字段。我还连接到 SQL 2005 数据库。任何帮助，将不胜感激！如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:56:06.053

尝试添加 T-SQL 行：

```
 SET NOCOUNT ON 
```

到正在执行的 SQL 的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:10:52.113

我有这个确切的问题。对我来说，答案是我的存储过程有一个 DBO 的所有者。我以前数据库的用户设置为 DBO。在我们的目标数据库上，有一个不同的 DBO，这导致了执行权限问题。刚刚将我的数据库用户更改为 DBO，它现在正在工作。希望有帮助。

# windows-8 - Windows 8 应用程序中设置面板的建议宽度是多少？

> ID：12047625
> 
> 赞同：0
> 
> 时间：2012-08-21T02:16:38.637
> 
> 标签：windows-8

根据这个博客，我正在我的应用程序中实现一个设置面板。该博客指出，设置面板的首选宽度有指导方针。这些指南在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:40:55.830

您用于设置的浮出控件可以是 346 像素或 646 像素宽，并根据系统显示在屏幕的任一侧。

记录在这里... [http://msdn.microsoft.com/en-us/library/windows/apps/hh770544.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh770544.aspx)

# facebook - 显示 CSS 的 Facebook 分享预览

> ID：12047626
> 
> 赞同：0
> 
> 时间：2012-08-21T02:16:49.060
> 
> 标签：facebook, wordpress

大家好，我在开发环境中的 Wordpress 网站上工作，当我在 Facebook 上分享一个页面时，我会看到一个漂亮的预览图像和一些文本。当我现在将站点移至生产环境时，我看不到图像，并且预览文本是一堆 CSS 代码。

这里有两个测试链接

开发 - [http://www.facebook.com/share.php?u=http%3A%2F%2Fssb.thejspot.ws&title=Sunset+Beach+Golf+Company](http://www.facebook.com/share.php?u=http%3A%2F%2Fssb.thejspot.ws&title=Sunset+Beach+Golf+Company) Live - [http://www.facebook.com/share .php?u=http%3A%2F%2Fssbeachgolf.com&title=日落+海滩+高尔夫+公司](http://www.facebook.com/share.php?u=http%3A%2F%2Fssbeachgolf.com&title=Sunset+Beach+Golf+Company)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:18:26.047

您没有为任何一个站点定义任何打开的图形标签。你很幸运在开发网站上得到了你想要的东西。

要么将开放图形标签编码到您的主题中，要么获取一个为您添加标签的插件（我喜欢 Wordpress SEO）。

此外，请查看[Facebook 调试器](https://developers.facebook.com/tools/debug)针对您的每个 URL 的输出。当你没有得到你想要的结果时，这是你应该开始的第一个地方。

# eclipse - Eclipse CTRL+A, CTRL+E 转到开头 转到行尾

> ID：12047627
> 
> 赞同：9
> 
> 时间：2012-08-21T02:17:04.157
> 
> 标签：eclipse, macos, shortcut

我搜索并非常惊讶我找不到使`CTRL`+ `A`, `CTRL`+`E`工作的可能性。所以我可以跳到行的开头或结尾。`Home`我正在使用 Mac 并且键盘上没有 Pos1 或Button。

我已经习惯了，因为在我需要它的任何地方，它都存在，而不是在 Eclipse 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:13:56.617

当您在 Eclipse 中设置自定义键时 - 只需确保您分配的键尚未分配给不同的操作。例如

1.  在过滤器字段中输入“ctrl+a”并“取消绑定”所有不需要的操作的快捷方式
2.  选择您想要的操作（“行开始”），将光标放在“绑定”字段中，然后单击`Ctrl`+`A`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-31T09:10:27.790

输入`command`+ `-->`)。这会奏效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-12T17:17:15.803

我发现的另一个选择是：

1.  去偏好
2.  到一般 -> 编辑器 -> 键
3.  从 Scheme 中选择 Emacs
4.  抱歉，我试图发布图片，但显然我需要更多积分...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T04:38:01.843

Home（到行首），End（到行尾）为我工作）

# php - 搜索一个单词中的字母是否在另一个单词中找到 PHP 字符串

> ID：12047631
> 
> 赞同：0
> 
> 时间：2012-08-21T02:17:26.757
> 
> 标签：php

就像这篇文章的标题所说，我将能够检查一个单词的每个字母是否在另一个单词中找到。到目前为止，这些是我能够想出的代码行：

```
<?php   
        $DBword = $_POST['DBword'];
        $inputWords = $_POST['inputWords'];

        $inputCount = str_word_count($inputWords,1);

        echo "<b>THE WORD:</b>"."<br/>".$DBword."<br/><br/>";
        echo "<b>WORDS ENTERED:</b><br/>";

            foreach($inputCount as $outputWords)
            {
                echo $outputWords."<br/>";
            }

            foreach($inputCount as $countWords)
            {
                for($i=0; $i<strlen($countWords); $i++)
                {$count = strpos( "$DBword", $countWords[$i]);}

                if($count === false)
                {
                    $score++;
                }

            }

            echo "<b><br/>TOTAL SCORE: </b>";
            echo $score;

        ?> 
```

我`foreach`的意思`$outputWords`是只输出输入的字母。至于另一个`foreach`，`$countWords`我用它来真正检查输入的单词中的所有字母是否都在`$DBword`. 我正在使用`for`循环来检查每个字母。

到目前为止，我没有得到我想要的输出，我只是没有想法。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:52:08.660

```
function contains_letters($word1, $word2) {
  for ($i = 0; $i < strlen($word1); $i++)
    if (strpos($word2, $word1{$i}) === false)
      return false;
  return true;
}

//example usage
if (contains_letters($_POST['inputWords'], $_POST['DBword']))
  echo "All the letters were found."; 
```

如果此检查不区分大小写（即“A”算作“a”的用法），请更改`strpos`为`stripos`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:03:07.943

由于您在循环中覆盖`$count`中的`for`每个字母`$countWords`，`$count`因此将仅包含最后一个字母的位置`$countWord`。另外，我不确定为什么在找不到信的情况下会增加*分数*。

无论如何，你让你的生活变得比必要的更困难。
PHP 有一个[计算字符串中字符的函数](http://php.net/manual/en/function.count-chars.php)：

```
return count_chars($dbWord, 3) === count_chars($inputWord, 3); 
```

如果在两个字符串中找到相同的字母，将返回 true。

查找具有完全相同字母的所有单词的示例：

```
$dbWord = count_chars('foobar', 3);
$inputWords = 'barf boo oof raboof boarfo xyz';
print_r(
    array_filter(
        str_word_count($inputWords, 1),
        function($inputWord) use ($dbWord) {
            return count_chars($inputWord, 3) === $dbWord;
        }
    )
); 
```

只会输出“raboof”和“boarfo”。

# eclipse - 如何使用 Eclipse 远程调试 Google App Engine (GAE) 应用程序

> ID：12047632
> 
> 赞同：4
> 
> 时间：2012-08-21T02:17:37.900
> 
> 标签：eclipse, google-app-engine, remote-debugging

有没有办法调试（特别是逐步）已部署到云的 Google 应用引擎应用程序。我问的原因是有些东西要么不能在本地调试，要么需要变通方法才能在本地测试（例如 CRON 作业）。

具体来说，我想使用 Eclipse 来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T09:04:35.037

**更新：**截至 2015 年，如果 AppEngine Java 应用程序在托管 VM 上运行，则可以调试它们。此外，调试器是基于 Web 的托管调试器 - 尚不支持您流行的 IDE。请参阅[云调试器](https://cloud.google.com/tools/cloud-debugger/)。

不，这是不可能的。

这很可能永远不可用的原因之一是 GAE 是一个分布式云系统，其中一个“应用程序”可以有多个并行运行的实例，并且不能保证随后的请求（例如用户会话）会得到服务同一个例子。所以没有办法知道调试器连接到哪个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T03:07:51.140

您可能想为这个[公认的错误加注星标](http://code.google.com/p/googleappengine/issues/detail?id=2292)

# javascript - 使用 RequireJS 从数组中动态加载模块

> ID：12047637
> 
> 赞同：12
> 
> 时间：2012-08-21T02:18:42.793
> 
> 标签：javascript, requirejs

我正在使用 RequireJS AMD 加载方法开发应用程序。

我有我的模块从配置文件动态拾取到一个数组中

```
var amd_modules = ["module1", "module2","module3"] 
```

现在我有我的requireJS代码

```
require(amd_modules, function(result) {
console.log("All modules loaded");
} 
```

现在，结果变量显示了第一个模块，即“module1”。如何将其他模块也放入 function() 括号内的变量中。

例如，

```
require(amd_modules, function(module1, module2, module3) { //
} 
```

我无法编写上述硬编码，因为动态变量的数量直到运行时才知道。请让我知道如何在函数内动态捕获对象。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T02:40:48.837

只需使用[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)：

```
require(amd_modules, function() {
    console.log("All modules loaded");
    // arguments should now be an array of your required modules
    // in the same order you required them
}); 
```

但是，除非您有充分的理由这样做，否则您可能需要重新考虑设计应用程序的方式——即使在最顶层，您的模块也应该简单且可测试。具有广泛不同数量的依赖项表明您可能正在尝试在回调函数中做很多事情。将每个代码路径分解成自己的模块，然后只切换到您的顶级依赖项。在代码中：

```
// Instead of this:
require(amd_modules, function() {
    console.log("All modules loaded");
    if (complex_condition_A) {
        var x = arguments[0],
                y = arguments[1],
                z = arguments[2];
        // Do things with x, y and z
    }
    else if (complex_condition_B) {
        var a = arguments[0],
                b = arguments[1];
        // Do things with a and b
    }
    else {
        // et cetera, et cetera, et cetera
    }
});

// Do this instead
var rootModule;
if (complex_condition_A) rootModule = "A";
else if (complex_condition_B) rootModule = "B";
else rootModule = "C";
require(rootModule, function(root) {
    // Root has the same API, regardless of which implementation it is
    // This might be as simple as an `init` method that does everything
    // or as complex as, say Facebook's API, but with different libraries
    // loaded depending on the platform the page is loaded on
    // (IE vs. Android for example).
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T11:02:46.793

尝试这样的事情：

```
define(function () {
    var ClassLoader = function () {
        var _construct = function () {
                return _public;
            },
            _loadClass = function (className, callback) {
                //
                require([className],
                    function (LoadedClass) {
                        callback(LoadedClass);
                    });
            },

            _public = {
                loadClass: _loadClass
            };
        return _construct();
    }
    return ClassLoader;
}); 
```

# r - 带有多个孔的 geom_polygon

> ID：12047643
> 
> 赞同：2
> 
> 时间：2012-08-21T02:19:26.600
> 
> 标签：r, ggplot2, polygon

我参考了[这个问题](https://stackoverflow.com/questions/12033560/use-ggplot-to-plot-polygon-with-holes-in-a-city-map)的答案并有其他问题。

我已将代码修改如下：

```
library(ggplot2)

ids <- letters[1:2]

# IDs and values to use for fill colour
values <- data.frame(
  id = ids,
  value = c(4,5)
)

# Polygon position
positions <- data.frame(
  id = c(rep(ids, each = 10),rep("b",5)),
  #     shape      hole         shape        hole
  x = c(1,4,4,1,1, 2,2,3,3,2,   5,10,10,5,5, 6,6,7,7,6, 8,8,9,9,8),
  y = c(1,1,4,4,1, 2,3,3,2,2,   5,5,10,10,5, 6,7,7,6,6, 8,9,9,8,8)
)

# Merge positions and values
datapoly <- merge(values, positions, by=c("id"))

chart <- ggplot(datapoly, aes(x=x, y=y)) + 
  geom_polygon(aes(group=id, fill=factor(value)),colour="grey") +
  scale_fill_discrete("Key") 
```

并给出以下输出：

![在此处输入图像描述](../Images/96609882446e35b042c3133de3c6d8f8.png)

有一条线穿过两个彩色框，我不太喜欢它，我该如何删除它？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T08:50:59.277

我多年前提出的用于绘制孔的解决方案是确保在每个孔之后您的 x,y 坐标返回到同一个位置。这会阻止线在周围嗡嗡作响并穿过其他多边形并留下绕组数算法不填充（或不应该填充时填充）的开放区域。

因此，如果您有一个数据集，其中前 27 个点是您的外部点，然后您有 5、6 和 7 个点的三个孔，请构建一个新数据集：

```
newdata = data[c(1:27,28:32,27,33:38,27,39:45,27),] # untested 
```

注意它是如何在每个洞后跳回第 27 点的。确保你的洞顺时针方向（我认为）。

然后使用 newdata 绘制，但只填充，不绘制轮廓。如果您需要轮廓，请稍后添加（使用按环 id 分组的原始数据）

您有时会得到非常非常薄的伪影，其中孔的出线与入线的绘制不太一样，但它们几乎不引人注意。怪布雷森汉姆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T02:36:47.933

试试这个

```
ggplot(datapoly, aes(x=x, y=y)) +
  geom_polygon(aes(group=id, fill=factor(value))) +
  scale_fill_discrete("Key") 
```

![在此处输入图像描述](../Images/6850f14cc7a87b57b185ac8e68b5a6ae.png)

# javascript - setSelectionRange 在 chrome 中单击时不会在第二次单击时选择

> ID：12047648
> 
> 赞同：3
> 
> 时间：2012-08-21T02:19:49.707
> 
> 标签：javascript, google-chrome

我有一个函数可以选择输入 onclick 的前 5 个字符。这适用于第一次点击。当输入框仍然具有焦点时，在 chrome 中，前 5 个字符内的第二次单击会删除选择，并且插入符号在单击的位置闪烁。

我希望前 5 个字符仍然/保持选中状态。

这似乎是一个 chrome 问题，因为它在 Firefox 中运行良好。

这是我的小提琴：http: [//jsfiddle.net/valamas/3eaYq/2/](http://jsfiddle.net/valamas/3eaYq/2/)

我怎样才能让它与 chrome 一起使用？

我尝试使用重置选择

```
sender.setSelectionRange(0, 1);
sender.setSelectionRange(0, 5); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T02:36:50.510

这确实[是 Chromium 的一个问题](http://code.google.com/p/chromium/issues/detail?id=32865)（以及一个两年前的问题）。要使 Chrome 的行为与 Firefox 相同，只需将 的内容包装`doSelect`在一个`setTimeout`调用中：

```
function doSelect(sender, e) {
    setTimeout(function(){
        sender.setSelectionRange(0, 5);
    }, 0);
} 
```

另请参阅：[更新的 JS Fiddle](http://jsfiddle.net/3eaYq/3/)

* * *

**更新**：该错误现在被标记为`FIXED`并将在 Chrome 39 中提供。

# words - 拼写校正器

> ID：12047649
> 
> 赞同：2
> 
> 时间：2012-08-21T02:19:51.250
> 
> 标签：words, spelling, sentence

我的问题是是否有一些拼写纠正工具。我见过基于训练文档 (python) 的二元组分析、Jaccard 系数和字典。他们的结果非常准确（80-90%），但他们无法纠正句子，例如“welcometo”->“welcome to”。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T07:47:51.570

请尝试使用 Hunspell。它是 Mozilla、MacOS 的默认拼写检查器。如果你使用 python 试试[pyhunspell](https://code.google.com/p/pyhunspell/)

# ruby - 用英语连接一个数组

> ID：12047650
> 
> 赞同：3
> 
> 时间：2012-08-21T02:19:58.990
> 
> 标签：ruby, arrays, string

是否有现成的库/方法可以将数组序列化为字符串，如下所示？

```
[] #=> ""
["Peter"] #=> "Peter"
["Peter", "Paul"] #=> "Peter and Paul"
["Peter", "Paul", "Mary"] #=> "Peter, Paul, and Mary" (with Oxford comma)
["Peter", "Paul", "Mary"] #=> "Peter, Paul and Mary" (without Oxford comma) 
```

如果不是，那么最短的方法是什么？我想要这种形式：

```
class Array
    def conjoin oxford_comma = true
        ...
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T02:37:14.673

是的。

```
require 'active_support/core_ext/array/conversions'

["Peter", "Paul", "Mary"].to_sentence
=> "Peter, Paul, and Mary" 
```

或没有牛津逗号。

```
["Peter", "Paul", "Mary"].to_sentence(:last_word_connector => ' and ')
=> "Peter, Paul and Mary" 
```

[这是来自apidock](http://apidock.com/rails/ActiveSupport/CoreExtensions/Array/Conversions/to_sentence)的更多信息

另请注意，如果您使用 Rails，至少，您可以使用[i18n从](http://guides.rubyonrails.org/i18n.html)[语言文件](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/locale/en.yml#L30)中控制它，以避免重复或增加此逻辑的复杂性。

# arrays - 如何将列文件插入带有键作为数组的哈希中？

> ID：12047655
> 
> 赞同：0
> 
> 时间：2012-08-21T02:20:42.780
> 
> 标签：arrays, perl, hash, comparison

我有下一个文件：

```
-38     miRNA18 8       44      dvex109349      6618    6580
35      miRNA5  21      57      dvex110330      1917    1952
26      miRNA2  27      54      dvex110362      1092    1118
-30     miRNA43 60      90      dvex110558      464     434
30      miRNA2  31      63      dvex111097      1359    1389
-30     miRNA31 43      73      dvex111146      4337    4307
-29     miRNA32 32      63      dvex111322      5680    5651
35      miRNA43 60      95      dvex111435      5612    5647
-26     miRNA43 55      80      dvex111770      723     697
-39     miRNA43 21      58      dvex112127      4928    4889
-32     miRNA2  70      102     dvex112254      1554    1522
33      miRNA17 56      89      dvex113799      2985    3018
38      miRNA17 26      64      dvex113799      2985    3023
40      miRNA17 30      70      dvex113799      2985    3025 
```

我需要将它插入到哈希中，但使用这些参数：第 5 列 (dvex####) 必须是键，而其他列将是此键的值。这个想法是用相等的键对其进行分组，并获得第 6 列的较低值和第 7 列的最大值。我认为用键作为数组创建散列，然后用该参数组织它很方便。

输出应该是：

```
-38     miRNA18 8       44      dvex109349      6618    6618
35      miRNA5  21      57      dvex110330      1917    1952
-38     miRNA18 8       44      dvex109349      6618    6580
35      miRNA5  21      57      dvex110330      1917    1952
26      miRNA2  27      54      dvex110362      1092    1118
-30     miRNA43 60      90      dvex110558      464     434
30      miRNA2  31      63      dvex111097      1359    1389
-30     miRNA31 43      73      dvex111146      4337    4307
-29     miRNA32 32      63      dvex111322      5680    5651
35      miRNA43 60      95      dvex111435      5612    5647
-26     miRNA43 55      80      dvex111770      723     697
-39     miRNA43 21      58      dvex112127      4928    4889
-32     miRNA2  70      102     dvex112254      1554    1522
33      miRNA17 26      70      dvex113799      2985    3025 #note this result is a group. 
```

我很有趣，因为该解决方案基于具有不同列的文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T04:08:55.763

使用正则表达式或拆分提取列 6（可能还有 6,7）到标量。

将该行存储到嵌套哈希中。

```
$data1{$v5}{$v6}=$_;
$data2{$v5}{$v7}=$_; 
```

List::Util 将有助于最大/最小

```
use List::Util qw[min max];
foreach $v5 (sort keys %data) {
     $val6=min(keys $data1{$v5});
     $val7=max(keys $data2{$v5});
 now generate your output line as you desire.
} 
```

# authentication - 会话 cookie 是否足以进行身份 验证？

> ID：12047656
> 
> 赞同：0
> 
> 时间：2012-08-21T02:20:56.853
> 
> 标签：authentication, web-applications, session-cookies, happstack

我正在尝试为使用 Happstack 框架编写的 Web 应用程序实现简单的基于密码的身份验证。我的用户提供了一个 ID 和密码，我使用 bcrypt 对其进行哈希处理并通过数据库进行检查。如果散列密码在该 ID 的数据库中，则用户因此被认证。

一旦我验证了好用户的身份，我想发出一个会话 cookie，标记该用户在会话期间已登录。（我*不是*在尝试实现“持久”、“记住我”之类的 cookie；我只是想了解用户是否已登录会话。）

会话 cookie 的存在是否足以对用户进行身份验证？如果不是，还需要什么其他信息？我可以将 cookie 的（散列）值存储在我的数据库中，但在这一点上，我看不出我将做什么与持久登录 cookie 有什么不同。

简而言之，**我是否可以使用会话 cookie 来识别经过身份验证的用户**，如果可以，应该怎么做？

（我已经能够了解如何以及为什么将会话 cookie 标记为“安全”和“仅限 HTTP”，但我不知道该*怎么*处理这该死的东西！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:55:08.240

您可以将[happstack-authenticate](http://hackage.haskell.org/package/happstack-authenticate)用于现有的密码登录解决方案。如果您仍然想自己推出，但是您需要[happstack-clientsession](http://hackage.haskell.org/package/happstack-clientsession)包用于用户无法读取或写入的会话 cookie。标记为“安全”的普通 cookie 仅意味着它只能通过 HTTPS 工作，但用户仍然可以读取和写入 cookie。使用 clientsession cookie 将使用服务器端密钥进行加密。您可以将 clientsession 用于“记住我”和会话登录；它仅取决于您设置的内容`sessionCookieLife`。如果您使用`mkSessionConf`的是默认值`Session`，那就是您想要的。

# c# - 使用 GestureServices 在列表框中获取文本块值

> ID：12047658
> 
> 赞同：0
> 
> 时间：2012-08-21T02:21:03.890
> 
> 标签：c#, windows-phone-7, xaml

对不起，伙计们，我之前问过这个问题，但无法弄清楚答案。进行了编辑以查看是否会碰到它，但这似乎不起作用。所以这是这个问题的最后一次尝试

我似乎无法弄清楚如何获得列表框中特定文本块的值。首先，代码如下：

```
<ListBox HorizontalAlignment="Left" Name="listItems" VerticalAlignment="Top" >
   <ListBox.ItemTemplate>
      <DataTemplate>
         <StackPanel Orientation="Horizontal" Height="210" >
            <Grid Height="210" Background="#75FFF8DC">

               <toolkit:GestureService.GestureListener>
                  <toolkit:GestureListener Tap="GestureListener_Tap"
                     DoubleTap="GestureListener_DoubleTap"
                     Hold="GestureListener_Hold"
                     Flick="GestureListener_Flick"/>
               </toolkit:GestureService.GestureListener> 

                     ...CODE... 
</></></>... 
```

代码区包含一堆其他网格、分区（列和行）和文本块。这是一个例子：

```
<Image Name="XXX" Source="{Binding XXXPath}" Stretch="Fill" 
   Grid.Column="0"/>
<TextBlock Name="YYY" Grid.Column="1" Grid.Row="0"  
   Text="{Binding YYYPath}" Foreground="Black"/>
<TextBlock Name="ZZZ" Grid.Column="2" Grid.Row="0"  
   Text="{Binding ZZZPath}" Foreground="Black"/> 
```

所以我想要的是，如果有人点击网格（这意味着网格中的任何内容，包括这些文本块和图像），我想首先获取文本块“YYY”的文本。

我可以将该代码插入文本块并将发送者用作文本块，但我不想将我的手势限制在一个文本块上，也不想对网格中的每个元素重复这一点（很多问题，似乎没有必要）。

编辑：如果这不起作用，我也可以只实现一个点击手势（但同样，对于整个网格）并使用它来获取文本块的值。没有办法吗？否则我将不得不这样做：为文本块添加点击并将发件人用作文本块，然后获取文本的值。但是我真的**不想**用这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:16:44.963

我看到您对文本块和图像使用绑定。那么你为什么不使用（如果你还没有这样做的话）一个`IList`包含关于它们的信息的类的实例呢？然后将此实例设置`ItemSource`为您的列表框。这样，当用户点击列表框上的某个位置时，您可以捕获列表框项目的`SelectedIndex`or `SelectedItem`。这将帮助您确定要提取 IList 集合的哪个元素，以便您可以获取文本或图像或任何您需要的内容。

而且您不需要使用Mango从外部使用**GestureServices**`Silverlight Toolkit`。`Tap`等`DoubleTap`是内置的。

# grails - 使用 Spring Security 限制对 grails 中域类 gorm 方法的访问

> ID：12047664
> 
> 赞同：1
> 
> 时间：2012-08-21T02:21:59.363
> 
> 标签：grails, spring-security, grails-orm, acl

有没有办法使用 Spring Security 定义对 GORM 方法的访问（例如：保存、删除、更新）？

我看过 ACL 的插件文档，但是，虽然我认为插件允许我定义访问权限，但我看不清楚如何做到这一点。

ACL 的文档：[http ://burtbeckwith.github.com/grails-spring-security-acl/docs/manual/guide/single.pdf](http://burtbeckwith.github.com/grails-spring-security-acl/docs/manual/guide/single.pdf)

注意：文档中的示例分别定义了对类实例的访问。我想在类级别定义它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:26:54.240

不确定如何使用 grails，但您应该为域对象的安全性编写切入点

```
 <global-method-security pre-post-annotations="enabled">
     <!-- Block anything ending with the word 'Controller'-->
     <protect-pointcut expression="execution(* my.pkg.*Domain.*(..))" access="NON_EXISTANT_ROLE"/>
 </global-method-security> 
```

# class - Why create an instance of a class within its own definition?

> ID：12047668
> 
> 赞同：1
> 
> 时间：2012-08-21T02:22:39.647
> 
> 标签：class, recursion

I've been looking into the topic of creating instances of a class within its own definition. Something like this:

```
public class myClass
{
    public static myClass aObject = new myClass();
    public static myClass bObject = new myClass();
} 
```

I kind-of understand how this is possible, but I'm confused as to why it would be useful.

Also, my logic says that it should be possible to do something like this:

```
aObject.bObject.someMethod(); 
```

aObject is an instance of myClass, so it should contain bObject, right? I feel like I'm missing some fundamental understanding of how classes work, so I would really like to know what's going on here, and why someone would want to do this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:33:34.073

`aObject.bObject.someMethod()` would definitely work if someMethod() was defined as a part of myClass. As to why something like that would be done, I'll give an example that is used in java.

Say you have a class called Color that represents colors. You can make a new color of of its RGB value with the constructor `Color(byte r, byte g, byte b)`. There are also constants in the Color class that represent commonly used colors, like red or green or pink. You can quickly access the pink color just by saying Color.PINK, since PINK is a Color variable that is inside the Color class. That way you don't have to construct a new color object each time you want to use pink in a method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:40:09.567

```
aObject.bObject.someMethod(); 
```

This is like saying "of object a's object b... do something." So its like a ball (called A) has a ball inside it (called B) which has a ball inside it (called C).. ect.

A linked list is a list does something like this, in that:

```
class Link {

public long data;                        // data item
public Link next;                        // next link in list
// =============================================================
    public Link(long value){             // constructor
        data = value;                    // assign parameter to data's data field   
    }
} 
```

Link has inside of it a pointer to another link which does the same until you make a null object.

I think this is what you were asking...

# java - 使用 JSTL 编写静态内容

> ID：12047672
> 
> 赞同：1
> 
> 时间：2012-08-21T02:23:12.943
> 
> 标签：java, jstl, scriptlet

处理程序并尝试从另一个类打印静态整数。奇怪的是我可以用 scriptlet 来做，但不能用 JSTL。查看我刚刚编写的错误检查代码。

```
Comments: <%=Comments.getCommentCount() %> <br />
Comments: ${Comments.getCommentCount()} <br />
Comments: <c:out value="${Comments.getCommentCount()}" /> <br />
Comments: <c:out value="1" /> 
```

这给了我一个 HTML 输出

```
Comments: 5 <br />
Comments:  <br />
Comments:  <br />
Comments: 1 
```

所以你可以看到只有第一行和最后一行代码有效。如何在没有 scriptlet 的情况下打印出这个静态变量？

在我的标题中，我有

```
import="org.test.Comments" 
```

评论.java

```
package org.test;

import java.util.ArrayList;
import java.util.Collections;

public class Comments 
{
    private String name = "";
    private String comment = "";
    private static ArrayList<String> allComments = new ArrayList<String>();

    public void setNewComment(String name, String comment)
    {
        this.name = name;
        this.comment = comment;
        allComments.add(getComment());
    }

    public static ArrayList<String> getCommentList()
    {
        Collections.reverse(allComments);
        return allComments;
    }

    public static int getCommentCount()
    {
        return allComments.size();
    }

    public String getComment()
    {
        return String.format("Name:   %s <br />Comment:  %s <p><hr /></p>", name, comment);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T02:38:44.240

您无需在 jstl 中调用 getter。就这样做

```
<c:out value="${Comments.commentCount}" /> 
```

假设您的变量名是`commentCount`而不是`CommentCount`.

即使没有它也能工作`<c:out>`

```
Comments: ${Comments.commentCount} <br /> 
```

但使用`<c:out>`会更好，以避免跨站点脚本，如此[处所述](https://stackoverflow.com/questions/291031/jsp-cout-tag)

**更新**

在您提到的课程中，没有名称为commentCount 的字段。所以它不会工作。您可以使用 jsp fn 标签直接在 jsp 中获取集合的大小。

将此包含在标题中

```
 <%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %> 
```

然后这样做：

```
 <c:out value="${fn:length(allComments)}" /> 
```

或者

```
 Comments: ${fn:length(allComments)} <br /> 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:16:39.263

如果要使用静态方法，则可以使用自定义 EL 函数。查看 页面底部附近的[https://stackoverflow.com/tags/el/info 。](https://stackoverflow.com/tags/el/info)

# c# - 在 C# 中使用 xsd 验证 xml 并将无效数据替换为空值

> ID：12047673
> 
> 赞同：1
> 
> 时间：2012-08-21T02:23:38.883
> 
> 标签：c#, silverlight, xsd

如何使用 C# 使用 .xsd 文件验证 .xml 文件中的数据并将无效数据替换为空值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:50:43.777

查看[XmlSchemaValidator 类](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidator.aspx)。虽然它不容易使用，但它*非常*强大。

它通过“推”模型工作。API 会通知您在验证的当前点哪种 XML 是有效的。然后，您提供一段有效的 XML（元素、属性等），并再次询问，什么是有效的*now*。我已经使用它来创建符合一组模式的示例 XML。

虽然我没有尝试过，但我想您可以将输入 XML 提供给验证器，然后在解析中到达无效点时传递一些“空”XML。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T03:44:37.517

在 .NET 3.5 中验证只需使用以下代码

```
 public bool Validate(XmlReader xmlInput, XmlReader schemaDocument)
    {
        var xmlSchemaSet = new XmlSchemaSet();
        xmlSchemaSet.Add("", schemaDocument);
        try
        {
            var doc = XDocument.Load(xmlInput);
            bool valid = true;
            doc.Validate(xmlSchemaSet, (o, e) =>
            {
                valid = false;
            });
            return valid;
        }
        catch (Exception e)
        {
            return false;
        }
    } 
```

但我认为，要更正您的文档，您应该使用 XmlReader 的方法和自定义验证。

# c++ - 给定一个数字长整数，如何访问它的部分？

> ID：12047675
> 
> 赞同：0
> 
> 时间：2012-08-21T02:23:59.897
> 
> 标签：c++, integer

> **可能重复：**
> [将整数拆分为其数字c ++](https://stackoverflow.com/questions/4207696/split-an-integer-into-its-digits-c)

给定一个数字`4567`。

在 C++ 中，如何分别访问`4`、`5`和？`6``7`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:26:03.873

个位为`n % 10`，十位为`(n / 10) % 10`，以此类推。注意负数，规则略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:56:20.423

只是为了增加已经在这里的答案......你做长除法。这首先为您提供最低有效数字。

```
n = abs(n);
while( n != 0 ) {
    int r = n % 10;
    n = n / 10;
    cout << r << endl;
} 
```

输出：

```
7
6
5
4 
```

显然，此方法首先为您提供最低有效数字。您当然可以将其生成到一个数组中，以便您可以通过其幂访问每个数字（元素 0 是 10^0，1 是 10^1，等等...）

反过来，将数字转换为字符串。这种方法比长除法效率稍低。我知道这个问题说的是 C++，但是使用 C 函数并没有错`itoa`。

```
char s[33];
itoa(abs(n), s, 10);
for( char *d = s; d != 0; d++ ) {
    int r = *d - '0';
    cout << r << endl;
} 
```

输出：

```
4
5
6
7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:29:39.773

我不完全确定 C++，但我知道 python 至少会一直向下舍入，所以要得到最后一个数字，你可以使用 mod 10，然后将最后一个数字除以 10，所以，在 sudo 代码中

```
 int num_to_test = 1234;
 for (int i = 0; i < num_to_test.length; i++ ) {
      print num_to_test % 10;
      num_to_test = num_to_test / 10;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T02:30:08.303

做一些数学运算并减少数字。像这样：

```
int thousands = floor(num / 1000);
num = num - thousands * 1000;

int hundreds = floor(num / 100);
num = num - hundreds * 100; 
```

此外，我希望你能看到它的发展方向。

# java - 小程序中的 start() 方法删除面板

> ID：12047677
> 
> 赞同：2
> 
> 时间：2012-08-21T02:24:19.670
> 
> 标签：java, swing, user-interface, applet, event-dispatch-thread

我做了一个小程序。我曾经`JPanel`设置小程序的内容，我在`init()`方法中做，在`start()`我做其他事情。当我在不包含所有内容的情况下运行小程序时，`start()`一切正常并显示内容，但如果我添加了该`start()`方法，小程序不会显示内容。

这是为什么？

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

import javax.swing.JApplet;
import javax.swing.JEditorPane;
import javax.swing.JPanel;

public class Server extends JApplet {

final static int port = 4444;
ServerSocket listen;
JEditorPane message;
JPanel content;

    public void init(){
        message = new JEditorPane();
        message.setText("Listening...");
        message.setEditable(false);
        message.setVisible(true);

        content = new JPanel();
        content.setLayout(new BorderLayout());
        content.add(message, BorderLayout.NORTH);

        setContentPane(content);
    }

    public void start(){    
         try {
             listen = new ServerSocket(port);
             while(true){   
                Socket client = listen.accept();    
                HandleConnection hc= new HandleConnection(client);
            }

            } catch (IOException e) {
              System.out.println("Couldn't listen on port "+port);
        }
        }

    public void stop(){}
    public void destroy(){}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T02:25:36.587

`while (true)`您正在用您的块踩踏 Swing 事件线程。因为这个线程，也称为事件调度线程，或 EDT，负责您的 GUI 的所有图形和用户交互，在其上运行长时间运行的代码将有效地完全冻结您的 GUI。解决方案：不要在事件线程上执行此操作，而是在后台线程中执行此操作，例如 SwingWorker 对象提供的线程。有关这方面的更多信息，请阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

# arguments - 如何将任意大小的列表传递给 OpenCL 内核

> ID：12047678
> 
> 赞同：1
> 
> 时间：2012-08-21T02:24:46.170
> 
> 标签：arguments, opencl

我最近一直在摆弄 OpenCL，我遇到了一个严重的限制：你不能将指针数组传递给内核。这使得将任意大小的图像列表传递给内核变得很困难。我对此有一些想法，我想知道是否有人可以确定他们是否会工作，或者提供更好的建议。

假设您有 x 个想要传递给内核的图像对象。如果它们都是 2D 的，一种解决方案可能是将它们全部打包成 3D 图像，然后只索引切片。这样做的问题是，如果图像大小不同，则会浪费空间，因为 3D 图像必须具有最宽图像的宽度、最高图像的高度，而深度将是图像的数量。

但是，我也在想，当您将缓冲区对象传递给内核时，它会作为指针出现在内核中。如果您有一个内核采用任意数据缓冲区，并且指定一个缓冲区仅用于存储指针，然后将指向第一个缓冲区的指针附加到第二个缓冲区的末尾，（当然前提是有足够的分配空间）那么也许您可以保留指向设备上其他缓冲区的指针缓冲区。然后可以将此缓冲区传递给其他内核，然后通过一些有趣的转换，这些内核将能够访问设备上的这些任意缓冲区。唯一的问题是给定的缓冲区指针在缓冲区的整个生命周期中是否保持不变。此外，当您传递图像时，您会得到一个结构作为参数。现在，这个结构实际上在设备内存中有一个家吗？或者它是否足够长以传递给内核？这些事情很重要，因为它们将确定指针缓冲区技巧是否也适用于图像，假设它完全可以工作。

有人知道缓冲技巧是否有效吗？有没有其他人可以想到将任意大小的列表传递给内核的方法？

编辑：缓冲技巧不起作用。我已经测试过了。我不确定为什么，但设备上的指针似乎从一次调用到另一次调用并不相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:30:13.553

将指针数组传递给内核没有意义，因为指针将指向主机内存，而 OpenCL 设备对此一无所知。您必须将数据传输到设备缓冲区，然后将缓冲区指针传递给内核。（映射/固定内存有一些更复杂的选项，尤其是在 APU 的情况下，但它们不会改变主要事实，即主机指针在设备上无效）。

我可以建议一种方法，尽管我自己从未真正使用过它。如果您预先分配了一个大的设备缓冲区，您可以用主机背靠背的图像填充它。然后使用缓冲区和偏移列表作为参数调用内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:58:17.513

这很容易，我已经做到了。您不使用指针，而是使用引用，并且您这样做。在您的内核中，您可以提供两个参数：

```
kernel void(
   global float *rowoffsets,
   global float *data
) { 
```

现在，在您的主机中，您只需获取 2d 数据，将其复制到 1d 数组中，然后将每行开头的索引放入`rowoffsets`

对于最后一行，您添加了一个额外的行偏移，指向数据末尾之后的一个。

然后在您的内核中，要从一行中读取数据，您可以执行以下操作：

```
kernel void(
   global float *rowoffsets,
   global float *data,
   const int N
) {
    for( int n = 0; n < N; n++ ) {
        const int rowoffset = rowoffsets[n];
        const int rowlen = rowoffsets[n+1] - rowoffset;
        for( int col = 0; col < rowlen; col++ ) {
            // do stuff with data[rowoffset + col] here
        }
    }
} 
```

显然，如何将数据实际分配给每个工作项取决于您，因此无论您是使用实际循环，还是为每个工作项提供单行和列，都是您自己的应用程序设计的一部分。

# python - 复制大文件夹时打印字符

> ID：12047684
> 
> 赞同：3
> 
> 时间：2012-08-21T02:25:16.347
> 
> 标签：python, shutil

我有这个功能试图打印额外的'。' 每秒将一个大文件夹（~3GB）从一个地方复制到另一个地方：

```
def copy_folder(source, destination):
    print 'copying',
    while shutil.copytree(src=source, dst=destination):
        print '.',
        time.sleep(1) 
```

但是当我调用函数时：

```
source = 'source_folder'
destination = 'destination_folder'
copy_folder(source=source, destination=destination) 
```

它可以很好地复制整个文件夹，但不会打印“。” 一点也不。

我需要使用线程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T02:42:57.483

Python中的线程非常简单：

```
import sys, shutil, time, threading

class CopyThread(threading.Thread):
    def __init__(self, source, destination):
        super(CopyThread, self).__init__()

        self.source = source
        self.destination = destination

    def run(self):
        time.sleep(5)  # Delete me later on, I'm just here to slow things down
        return shutil.copytree(src=self.source, dst=self.destination)

if __name__ == '__main__':
    thread = CopyThread('source_folder', 'destination_folder')
    thread.start()

    while thread.is_alive():
        sys.stdout.write('.')
        sys.stdout.flush()

        time.sleep(1)

    thread.join() 
```

只是子类`threading.Thread`和覆盖`run()`。之后，调用`.start()`该类的一个实例，你就有了一个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:28:27.700

copytree 将复制整个树，因此在复制完成并且可以评估返回值之前，while 循环不会运行。

我的 python 生锈了，但我会给出一个如何实现线程的想法（受[此处](https://stackoverflow.com/q/9096685/591801)找到的代码的启发）。

```
def copy_folder(source, destination):
    self.iscopying = True        
    self.thread = threading.Thread(name="GPS Data", target=self.thread_run)
    self.thread.setDaemon(True)
    self.thread.start()
    shutil.copytree(src=source, dst=destination)
    self.iscopying = false

def thread_run(self):
    while self.iscopying:
        print '.'
        time.sleep(1) 
```

本质上，创建一个标志，告诉线程何时发生复制，然后在复制完成时将其设置为 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T02:47:47.707

看copytree[源码](http://hg.python.org/cpython/file/2.7/Lib/shutil.py#l145)，核心就是这个循环：

```
for name in names:
   if name in ignored_names:
       continue
   srcname = os.path.join(src, name)
   dstname = os.path.join(dst, name)
   try:
       if symlinks and os.path.islink(srcname):
           linkto = os.readlink(srcname)
           os.symlink(linkto, dstname)
       elif os.path.isdir(srcname):
           copytree(srcname, dstname, symlinks, ignore)
       else:
           # Will raise a SpecialFileError for unsupported file types
           copy2(srcname, dstname)
   # catch the Error from the recursive copytree so that we can
   # continue with other files
   except Error, err:
       errors.extend(err.args[0])
   except EnvironmentError, why:
       errors.append((srcname, dstname, str(why))) 
```

如果您`yield`在最后添加一个权利，您的循环将起作用 - 但您将在复制每个文件或目录后打印，而不是按时间间隔打印（您`time.sleep`会在副本之间发生，只是让整个事情花费更长的时间；因为每个时间间隔，是的，您将需要线程）。但是，如果您愿意，这也将允许您提供更详细的反馈 - 例如，您可以`yield name`（或，`yield (srcname, destname)`）能够打印有关*已*复制文件的反馈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T02:36:10.197

我不知道有一个模块可以异步执行此操作...并不是说没有...但是您可以递归地浏览文件夹并打印“。” 在每个文件/文件夹之后

# xcode - OSX 10.7.4 w/XCode 4.4.1 & GCC（编译直接 C/C++ 的问题）

> ID：12047685
> 
> 赞同：1
> 
> 时间：2012-08-21T02:25:29.857
> 
> 标签：xcode, macos, gcc

我遇到的问题是 gcc（和家庭）似乎没有正确设置。我有一台刚刚安装 Xcode 的 10.7.4 机器（来自应用商店）。我之前没有在这台机器上做过任何开发。

在 Xcode 中工作似乎工作正常。我可以构建和编译没有问题。但是，尝试执行 gcc 命令行失败。

首先，我的 gcc 不在我的路上……没什么大不了的。我找到它并运行为：

```
/Applications/Xcode.app/Contents/Developer/usr/bin/gcc -dynamiclib -fno-common -o s.dylib s.c 
```

（我正在开发一个带有一些功能的库......）。无论如何，它失败了。

```
s.c:1:19: error: stdio.h: No such file or directory
s.c:2:20: error: stdlib.h: No such file or directory
s.c:3:20: error: string.h: No such file or directory 
```

惊喜！哈，好吧，我在我的机器上搜索了 stdio.h，但在任何地方都找不到。由于我已经离开 OSX 游戏一段时间了，我假设我错过了一些东西 -

基本上我希望能够继续使用 Xcode，但我希望能够在命令行上构建 C/C++/etc，并将所有依赖项 (.h) 放在正确的位置。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T03:02:42.127

从命令行运行编译器的主要方法有两种：命令行工具包和 xcrun。

`xcrun`如果您只是偶尔需要它，则特别好。只需在开始时粘贴“xcrun”，就像使用 sudo 一样：

```
xcrun gcc -dynamiclib -fno-common -o s.dylib s.c 
```

这将找到正确版本的 gcc 并设置所需的目录等。您可以使用`--sdk`.

如果您经常这样做，请下载并安装命令行工具包（Xcode>Open Developer Tool>More Tools...；它也可能在 Preferences>Downloads 中可用）。这会在 /usr 中安装所有内容的完整副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T07:41:47.060

如果您使用的是 10.8，xcrun 可能还不够。查看 clang 文档，我发现您需要包含系统根目录，因为您的库不在标准位置，而是在 Xcode 中。

使用：

```
xcrun gcc -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk 
```

或者：

```
xcrun clang -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk 
```

# php - 执行多个 PHP 脚本

> ID：12047688
> 
> 赞同：0
> 
> 时间：2012-08-21T02:25:48.943
> 
> 标签：php

我对正在开发的应用程序有一个想法，我需要知道这是否可行。

我有一个使用 eBay API 搜索项目的脚本。它将一直从 eBay 请求信息，直到返回符合条件的项目或运行 240 秒，在这种情况下，它会将 false 发送回客户端，然后自行重新启动。发回的数据将通过 websocket 完成。

我需要同时运行大约 100 个该脚本的实例。

我将使用一个 PHP for 循环启动它们，使用 cURL 和`curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 1);`.

我不确定 PHP 如何在服务器上执行。它会在启动下一个脚本之前等待一个脚本实例完成执行吗？还是会一次启动该脚本的所有 100 个实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:28:50.460

这取决于 .. 如果您从 shell 脚本启动它们，例如：

```
./run.sh 
```

其中包含 PHP 的单次执行，它将在执行时阻塞，并且在 PHP 进程完成之前不会返回。

但是，如果您运行与以下相同的脚本：

```
./run.sh & 
```

它会立即返回......您可以通过以这种方式启动来运行许多 php 实例。

有无数种方法可以解决这个问题……您将遇到的问题是从先前的进程中获取数据-它们是写入失败还是数据库？他们如何让您知道该项目已找到或尚未找到？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T02:27:14.327

它将一次运行它们。（只要它们不在 shell 脚本中并且同步运行，就是这样。）

# batch-file - 在批处理中重命名和移动文件

> ID：12047690
> 
> 赞同：1
> 
> 时间：2012-08-21T02:26:04.560
> 
> 标签：batch-file, dos, file-rename

我想通过以下方式使用批处理文件重命名文件并将它们传输到库中：

```
c:\jg_Folder_xy>
blabla01_000.bla --> blabla01_001.bla
blabla02_000.bla --> blabla02_001.bla
blabla03_000.bla --> blabla03_001.bla

c:\sj_Folder_mx>
blabla01_000.bla --> blabla01_002.bla
blabla02_000.bla --> blabla02_002.bla
blabla03_000.bla --> blabla03_002.bla

c:\an_Folder_kj>
blabla01_000.bla --> blabla01_003.bla
blabla02_000.bla --> blabla02_003.bla
blabla03_000.bla --> blabla03_003.bla 
```

然后将所有内容转移到一个新文件夹中

```
c:\New_Folder>
blabla01_001.bla
blabla01_002.bla
blabla01_003.bla
blabla02_001.bla
blabla02_002.bla
blabla02_003.bla
blabla03_001.bla
blabla03_002.bla
blabla03_003.bla 
```

有谁知道最有效的方法是什么？

注意：文件夹名称只有一个共同的子字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:05:14.223

## 怎么做

这是一个简单的批量解决方案：

```
@echo off
setlocal enabledelayedexpansion
set "SRC_PATH=c:\jg_Folder_xy"
set "DEST_PATH=c:\New_Folder"
for %%f in ("%SRC_PATH%"\*.bla) do (
    set fname=%%~nf
    set fbase=!fname:~0,-4!
    set findex=!fbase:~-2!
    move %%f "%DEST_PATH%"\!fbase!_0!findex!%%~xf
) 
```

**注意：**此脚本必须分别在每个源文件夹上运行（每次都更改`SRC_PATH`）。或者，您可以将`for`循环修改为双循环，如下所示：

```
for /d %%d in (*_Folder_*) do for %%f in ("%%d"\*.bla) do ( 
```

这样它将自动遍历所有所需文件夹中的所有文件（`SRC_PATH`不需要该行）。

## 这个怎么运作

`for`循环遍历源文件夹中的文件，并在每次迭代中分配文件名（带有完整路径）`%%f`。

`set fname=%%~nf`提取文件名并删除扩展名。

`set fbase=!fname:~0,-4!`获取除最后 4 个字符之外的所有字符（*即*删除“_000”）。
这实质上提取了基本文件名，在您的示例中为“blabla01”、“blabla02”...。

`set findex=!fbase:~-2!`从 中提取最后 2 个字符`fbase`，即运行索引。
假设运行索引正好是两个字符。

该`move`命令重命名文件并将它们移动到目标文件夹中。

希望这可以帮助。

# shell - 如何在unix中执行下一条语句之前在语句之后添加等待时间

> ID：12047691
> 
> 赞同：0
> 
> 时间：2012-08-21T02:26:13.313
> 
> 标签：shell, unix, scripting, wait

在 Unix 中，我有一个类似于以下的代码

```
find /dir -name "filename*" -type f -print | xargs rm

case "$?" in
     "0") status="SUCCESS";;
      *) status=FAILED";;
esac 
```

它一直在返回 FAILED，我认为这是因为在删除文件完成之前执行了 case 语句。也许如果我在第一条语句之后添加一些等待时间，我可以确定该文件已被完全删除。如果是这样，那么如何在脚本中添加一些等待时间，例如 60 秒？

编辑：我应该提到文件正在被删除，但退出状态不为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T04:37:20.717

如果有与您的文件规范匹配的奇怪命名的文件，那么您正在做的事情是有问题的。如果将 find 的输出通过管道传输到 xargs，您将遇到由来已久的[Parsing LS](http://mywiki.wooledge.org/ParsingLs)问题

```
[ghoti@pc ~/tmp2]$ touch $'one\ntwo.txt' "three four.txt"
[ghoti@pc ~/tmp2]$ find . -name "*txt" -type f -print | xargs rm
rm: ./three: No such file or directory
rm: four.txt: No such file or directory
rm: ./one: No such file or directory
rm: two.txt: No such file or directory 
```

为什么不直接处理你的`rm`inside `find`？

```
find /dir -name "filename*" -type f -exec rm {} \; 
```

要测试您的结果，您可以抓取`$?`：

```
find /dir -name "filename*" -type f -exec rm {} \;
result=$?
case "$result" in
etc, etc 
```

（我放入`$?`了一个变量，以防以后重新使用它会很有用，或者如果其他命令需要`find`在其返回值被评估的位置之间运行。）

或者您可以直接测试是否成功：

```
if find /dir -name "filename*" -type f -exec rm {} \;
then
    echo "SUCCESS!"
else
    echo "FAIL!"
fi 
```

**更新：**

根据评论...如果您不必通过子目录递归，那么 for 循环可能就足够了。

```
for file in *.txt; do
  if ! rm "$file"; then
    echo "ERROR: failed to remove $file" >&2
  fi
done 
```

或者，如果您不需要在单个文件上生成错误的粒度：

```
rm *.txt || echo "ERROR" >&2 
```

我不认为我可以让它变得更小。:-P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:47:29.640

首先，我假设“类似于以下内容”包括在字符串文字周围使用*两个*引号。`FAILED`如果没有，您可能应该先解决这个问题。

在前面的过程完成之前开始的可能性很小*。*`case`没有使用`&`在后台运行某些东西，这不是 UNIX 方式:-)

您应该做的第一件事是将`case`语句替换为：

```
rc=$?
case $rc in
    0) status="SUCCESS";;
    *) status="FAILED"; echo rc=$rc;;
esac 
```

看看返回码实际上是什么。然后查找`man xargs`（`$?`始终是管道中最后一件事的退出代码），它显示了可能的值及其可能的原因。例如：

```
EXIT STATUS
    xargs exits with the following status:
         0 if it succeeds
       123 if any invocation of the command exited with status 1-125
       124 if the command exited with status 255
       125 if the command is killed by a signal
       126 if the command cannot be run
       127 if the command is not found
         1 if some other error occurred.
    Exit codes greater than 128 are used by the shell to indicate
    that a program died due to a fatal signal. 
```

# android - android:tabStripEnabled="false" 不起作用

> ID：12047693
> 
> 赞同：4
> 
> 时间：2012-08-21T02:26:19.337
> 
> 标签：android, android-layout

我正在使用 tabhost 并试图禁用选项卡边框线。我在我的 XML 中使用了这个 android:tabStripEnabled="false" 但它似乎没有工作，这条线仍然存在，我尝试了其他方式，比如在 style.xml 中进行更改（我从 stackoverflow 中找到）但是它也不起作用。任何的想法？

我的标签 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabHost
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_above="@android:id/tabs" />

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:background="#FFFFFF"
                android:tabStripEnabled="false"
                android:layout_gravity="bottom" />
        </RelativeLayout>
    </TabHost>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T04:19:41.633

您可以使用以下语句删除选项卡的底部条和选项卡之间的分隔线。

```
 TabHost t;
    t.getTabWidget().setStripEnabled(false);
    t.getTabWidget().setDividerDrawable(R.drawable.ic_launcher); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:33:21.187

它至少需要 minSDK 8 (2.2)...查看您的清单。

确保在您的代码中没有一行设置选项卡的背景（我遇到了这个问题......）；）

# vim - Vim：用 cabbrev 执行两个命令

> ID：12047694
> 
> 赞同：1
> 
> 时间：2012-08-21T02:26:20.443
> 
> 标签：vim

我想知道是否可以用一个 cabbrev 执行两个命令。我想执行：

```
:set columns=170
:wincmd = 
```

我试过了

```
cnoreabbrev c2 :set columns=170 | :wincmd = 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:42:40.040

尝试这个：

```
cnoreabbrev c2 :set columns=170 <BAR> :wincmd = 
```

# sql - 带有条件和唯一名称的 SQL SELECT

> ID：12047696
> 
> 赞同：1
> 
> 时间：2012-08-21T02:26:23.047
> 
> 标签：sql, sql-server, select

假设我有下表。如果我只想返回非活动行（活动 = 0）但忽略具有相同文件名的字段。例如，查询应该只返回 Helper0990329，因为它处于非活动状态并且在另一行中没有其他相同的文件名。VinnyVincenzo1345090457296 不应包含在结果中。

```
PATH          |         FileName         |   Active                       
C:\Vinny\     VinnyVincenzo1345090457296.mp3    0
C:\Vinny\     VinnyVincenzo1345090457296.mp3    1
C:\Vinny\     VinnyVincenzo1345137702505.mp3    1
C:\Helper\    Helper0990329.mp3                 0 
```

我尝试了以下操作，但最终停用了（然后删除了）我不应该拥有的文件：

```
SELECT 

      [Path],
      [FileName]

  FROM [Flows].[dbo].[Flows_Flows]
  Where [Active] = '0' AND [Created] > '8/18/2012'
  Group By Path, FileName
  Having count(FileName) = 1
  GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:34:49.053

假设您使用的是 SQL 2005 或更高版本，您可以使用排名函数来解决此问题：

```
select *
from (SELECT [Path], [FileName],
             count(*) over (partition by path, filename) as numFiles
      FROM [Flows].[dbo].[Flows_Flows]
      Where [Created] > '8/18/2012'
     ) t
where active = 0 and numfiles = 1 
```

我们查询的问题是 WHERE 子句在 HAVING 子句之前被评估。因此，从未见过活动行。

或者，您可以使用简单的 group by 但更复杂的 HAVING 子句来做到这一点：

```
SELECT [Path], [FileName]
FROM [Flows].[dbo].[Flows_Flows]
Where [Created] > '8/18/2012'
Group By Path, FileName
Having count(FileName) = 1 and
       sum(case when Active = '0' then 1 else 0 end) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:34:55.067

通过计算其内部实例的数量来尝试它`SubQuery`

```
SELECT  [Path], [FileName]
FROM    Flows_Flows a 
            INNER JOIN 
            (
                SELECT  [FileName],
                        COUNT([FileName]) TotalCount
                FROM    Flows_Flows
                GROUP BY [FileName]
            ) b ON a.[FileName] = b.[FileName]
WHERE   a.[Active] = 0 AND
        a.[Created] > '8/18/2012' AND
        b.TotalCount = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:39:22.310

我猜你也有一个 id 字段，对吧？我还假设您不一定只想要那些不重复的用户，而是那些没有任何活动条目的用户。

您可以`IN`在 WHERE 子句中使用。

例子：

```
SELECT Path, FileName FROM Flows_Flows WHERE Active = 0 AND id NOT IN
( SELECT id FROM Flows_Flows WHERE Active = 1 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T02:58:48.473

You can use a `LEFT OUTER JOIN` and when the join finds a duplicate row, exclude it (`dup.path is null`).

```
SELECT 
      f.[Path],
      f.[FileName]
FROM [Flows].[dbo].[Flows_Flows] f
LEFT OUTER JOIN [Flows].[dbo].[Flows_Flows] dup on f.Path = dup.Path and dup.Active = '1' --Active must be set otherwise, we found ourselves
Where f.[Active] = '0' AND f.[Created] > '8/18/2012'
  AND dup.Path is null -- here we exculde all rows that have a duplicate 
```

The advantage being that this solution has no sub query nor aggregate. That being said, not having looked at the query plan, I cannot say if it is indeed faster. (I also just prefer this syntax, I suppose.)

# eclipse - 如何使 Eclipse (C++) 自动切换到调试透视图？

> ID：12047703
> 
> 赞同：1
> 
> 时间：2012-08-21T02:27:00.253
> 
> 标签：eclipse, eclipse-cdt

如何让 Eclipse CDT在我开始调试时**自动**切换到 Debug 透视图，并在调试对象终止时**自动切换回之前的透视图？**

**注意：**如果不清楚：我正在寻找切换到 Debug***和 back***的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T03:11:26.103

我自己一直在追求这个（因为它会非常方便），但到目前为止，我的搜索中我一无所获。

如果没有编写 Eclipse 插件来切换到调试器断开连接的先前视角，则没有“自动”解决方案。

但是，我已经习惯了`CTRL`++这是默认快捷方式（在 Windows 上`SHIFT`）`F8`切换回“Previous Perspective”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:45:59.273

[Perspective Switcher](http://www.richinternet.de/blog/indexa36f.html?entry=1758AACF-910C-DE52-368E1421BEFDA19B)具有可配置的功能，可在调试器终止时自动切换回先前的透视图。它还可以配置为根据您指定的文件扩展名自动切换到任何透视图。当编辑器被激活（即打开一个文件或切换到另一个文件）时，透视图会自动改变。这使得使用多种语言变得容易。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-21T02:34:25.667

当您在调试时第一次手动切换到调试模式时，它将显示一个带有“将来自动切换到调试”的复选框。

# perl - perl 中的 file::find 是否有返回值？如何判断查找是否失败？

> ID：12047706
> 
> 赞同：0
> 
> 时间：2012-08-21T02:27:11.593
> 
> 标签：perl, file, find

我正在尝试学习 perl，特别是使用 File::Find 模块来搜索图片目录树，以查看是否有任何已经存在的文件名与相机上的文件名匹配。如果文件名在那里，我会假设该文件已经从这台相机传输，不会进一步处理它。如果找不到文件名，我想对该文件采取某种措施。

我使用 find2perl 创建了一个基本结构，它可以用于查找文件。但我似乎无法找到一种方法来判断查找是否失败。File::Find::find 似乎没有返回任何值来采取行动，我不确定如何采取行动，或者使用它正在使用的“&wanted”子目录中的任何返回值。

确定 File::Find::find 是否未能成功找到任何匹配文件的最佳方法是什么？我是否应该使用在程序顶部设置为某个值并且仅在查找成功时才更改的全局标志变量？我想我可以在找到后检查该值，看看它是否已更改（成功）或未更改（未找到）。

有什么想法或建议吗？

这是基本结构：

```
 # Traverse desired filesystems
  File::Find::find({wanted => \&wanted}, '/files/multimedia/pictures/');
  exit;

  sub wanted {
      my ($dev,$ino,$mode,$nlink,$uid,$gid);

     if ( (($dev,$ino,$mode,$nlink,$uid,$gid) = lstat($_)) && /^$ARGV[0]\z/si ) {
        print("found: $name\n");
        }
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T02:37:40.800

如果没有找到所需的文件，`wanted`则不会调用子程序。

我通常所做的正是您建议的 - 在调用之前将标志设置为 false `find`，并将其`wanted`设置为 true。

那是在我实际上*需要*知道这些信息的情况下——我实际上已经有一段时间不需要它了。

事实上，计数可能比标志更好，因为它提供了更多信息。以下代码：

```
use File::Find;

sub wanted {
    my ($dev,$ino,$mode,$nlink,$uid,$gid);
    $quant += 1;
    if ( (($dev,$ino,$mode,$nlink,$uid,$gid) = lstat($_)) && /^$ARGV[0]\z/si ) {
        print("found: $name\n");
    }
}

$quant = 0;
File::Find::find({wanted => \&wanted}, '/nosuchdir');
print ("Found $quant files in /nosuchdir\n");

$quant = 0;
File::Find::find({wanted => \&wanted}, '/tmp');
print ("Found $quant files in /tmp\n"); 
```

在我的系统上生成以下输出：

```
Found 0 files in /nosuchdir
Found 39 files in /tmp 
```

那样的话，a`$count`为零意味着没有找到文件，其他任何东西都告诉你有*文件*（也告诉你有多少）。

# php - 我可以从基本工厂方法调用私有子构造函数吗？

> ID：12047713
> 
> 赞同：1
> 
> 时间：2012-08-21T02:28:02.077
> 
> 标签：php, factory

我想使用私有构造函数实现以下内容。

问题是`get_class()`返回`ParentBase`；虽然; `get_called_class()`返回`ChildClass`。

如何从调用类上下文而不是基类上下文中调用 __construct()？

会有很多子类，所以我只想要一个共享工厂方法，而且我还想确保一个子类不能被扩展（这样就不能用 new 关键字创建它）。

似乎应该有一种方法可以`ChildClass::createObject()`使用私有`ChildClass`构造函数和公共`ParentBase`工厂方法。

```
<?php
class ParentBase 
{
    public static function createObject() 
    {
        echo get_class() . "<br/>";        // prints ParentBase
        echo get_called_class() . "<br/>"; // prints ChildClass
        return new static();
    }
}

class ChildClass extends ParentBase
{
    private $greeting = "bye";

    private function __construct()
    {
        $this->greeting = "hi";
    }

    public function greet()
    {
        echo $this->greeting;
    }
}

$child = ChildClass::createObject();
$child->greet(); 
```

上面的输出是：

```
ParentBase
ChildClass
Fatal error: Call to private ChildClass::__construct() from context 'ParentBase' 
```

受保护的构造函数工作： [http ://codepad.viper-7.com/sCgJwA](http://codepad.viper-7.com/sCgJwA)

私有构造函数没有： [http ://codepad.viper-7.com/YBs7Iz](http://codepad.viper-7.com/YBs7Iz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:40:28.993

那是一个预期的行为`createObject();`是一个函数`ParentBase`，所以它会从返回`ParentBase`，`get_class()`但是，它是从调用的，所以它会从`ChildClass`返回。`ChildClass``get_called_class()`

关于构造函数，由于构造函数被指定为私有的，因此您只能在类中限制对象的创建。通过使其受到保护，现在父类可以创建对象`ChildClass`

可能的解决方案是覆盖本身的`createObject()`类。`ChildClass`

```
class ChildClass extends ParentBase
{
    public static function createObject() 
    {
        echo get_class() . "<br/>";
        echo get_called_class() . "<br/>";
        return new static();
    }
} 
```

或者，您可以使构造函数受保护，然后您将使构造函数可被父类访问，并限制子类的任何子类使其成为最终的，从而使其只能从父类访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:18:28.280

如果这是 PHP 5.4……

在玩了一些其他的东西并阅读了 PHP OOP 之后。看起来 Traits 可以做到这一点。

我喜欢这种`use Trait`表示法，在这种情况下，很明显你应该使用工厂来实例化类。

使用 Trait 是有利的，因为 Factory Trait 可以在多个没有共同血统的 Class 层次结构中共享：

```
<?php

// NOTE: traits are only avaialable in ** PHP 5.4 **
trait Factory 
{
    public static function createObject() 
    {
        echo get_class() . "<br/>";        // prints ChildClass
        echo get_called_class() . "<br/>"; // prints ChildClass
        return new static();
    }
}

class ChildClass
{
    use Factory;

    private $greeting = "bye";

    private function __construct()
    {
        $this->greeting = "hi";
    }

    public function greet()
    {
        echo $this->greeting;
    }
}

$child = ChildClass::createObject();
$child->greet(); 
```

**[工作代码示例](http://codepad.viper-7.com/kXvrNb)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:30:28.837

据我所知，子构造函数必须受到保护或公开。我遇到了一个不同的问题，我试图访问一个私有财产。

但是由于某种原因，您的问题“我可以从基本工厂方法调用私有子构造函数吗？” 不反映您的代码，因此我建议您对其进行编辑，因为我正在为如何回答这个问题而烦恼。

# jquery - 为什么 CSS3 过渡只用一次

> ID：12047714
> 
> 赞同：3
> 
> 时间：2012-08-21T02:28:20.427
> 
> 标签：jquery, css, css-transitions, transition

我试图找出并修复为什么 css3 转换只能正常工作一次，然后转换不能工作，这是与 jQuery 不同的动画。有人见过吗？请告诉我原因并提前谢谢！

[这是我的代码。](http://jsfiddle.net/4TxqZ/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T17:21:08.360

我不认为 .localize 元素的 css 转换在元素未显示时被激活。如果您删除“显示：无！重要；” 从“.ui-tabs .ui-tabs-hide”，它可以正常工作（尽管您看到两个选项卡）。

```
.ui-tabs .ui-tabs-hide
{
    display: none !important; // remove this line to see what I'm talking about
} 
```

localize() 立即将底部值设置为0，并且由于选项卡被隐藏，因此没有css过渡动画。没有过渡意味着条形图在没有动画的情况下直接跳到“底部：0”。

我已经成功地结合了 localize() 和 resetLocalize()，并在选项卡再次可见后使用短暂的超时设置底部 css，如下所示：

```
function localize() {
    $(".bar1.localize").css({ bottom: -180 });
    $(".bar2.localize").css({ bottom: -215 });
    $(".bar3.localize").css({ bottom: -225 });

    setInterval(function(){
         $(".bar1.localize, .bar2.localize, .bar3.localize").css({ bottom: 0 });
    },1);
   ;
} 
```

看我的小提琴：http: [//jsfiddle.net/jtlowe/4TxqZ/11/](http://jsfiddle.net/jtlowe/4TxqZ/11/)

# ios - IOS如何发布GET DELETE PUT Rest Api

> ID：12047717
> 
> 赞同：3
> 
> 时间：2012-08-21T02:28:34.860
> 
> 标签：ios, api, rest

我正在构建连接到 Rest API 的应用程序，直到现在我只使用以下代码发出 GET 请求：

```
//Start login process
NSString *emailstring = email.text;
NSString *passstring = pass.text;

// Create the URL from a string.
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.myserver.com/Rest/API/users?format=json&email=%@&password=%@",emailstring,passstring]];
NSLog(@"%@",url);

// Create a request object using the URL.
NSURLRequest *request = [NSURLRequest requestWithURL:url];

// Prepare for the response back from the server    
NSHTTPURLResponse *response = nil;
NSError *error = nil;

// Send a synchronous request to the server (i.e. sit and wait for the response)
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSLog(@"Reponse from web:%@", response);

// Check if an error occurred    
if (error != nil) {
    NSLog(@"%@", [error localizedDescription]);
    // Do something to handle/advise user.

    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Login error"
                                                      message:@""
                                                     delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];
    [message show];

}

else {

    // Convert the response data to a string.
    NSString *responseString = [[NSString alloc] initWithData:responseData  encoding:NSUTF8StringEncoding];

    // View the data returned - should be ready for parsing.
    NSLog(@"%@", responseString);

    // Add data to a Plist file for next time
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"login.plist"];

    NSArray *values = [[NSArray alloc] initWithObjects:emailstring,passstring,@"IDtest",nil];
    [values writeToFile:path atomically:YES];
    [values release];

    [self dismissModalViewControllerAnimated:YES];
} 
```

此代码仅适用于 GET 请求。我看到它有很多框架（例如RestKit，....）。但是我对其他要求有点迷失了！那么对 IOS App 发出 POST DELETE PUT 请求的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:31:00.867

它是类似的代码，但使用了 NSMutableRequest 类。您可以设置 httpbody 和其他参数来与服务器通信。

检查文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)

要发布内容，只需输入 setHTTPMethod:@"POST" 并使用 setHTTPBody 分配要发布的数据：

# php - 通过在一个实例中不起作用的 php 站点将值从一个数据库字段传输到另一个

> ID：12047719
> 
> 赞同：0
> 
> 时间：2012-08-21T02:28:42.830
> 
> 标签：php, mysql

我们的网站上有一个系统，您可以在其中拥有多个帐户并在每个帐户上赚取积分。您可以在我发现错误的此网页上的帐户之间转移的那些积分。基本上，如果我有一定的账户组合，即第一和第二，它不会让我转账，它只会说“请填写一个数字。”。如果我有第一个和第三个或所有三个，它工作正常。我已经浏览了大约两个小时，但找不到什么不起作用......任何帮助都将不胜感激：D

```
 <?php if($a == "exchange")

  {
  $GetUserInfo = mysql_query("SELECT * FROM members WHERE id = '$userid'") or die(mysql_error());

    $GetUserInfo = mysql_fetch_object($GetUserInfo);

    $cols = 1; //determines colspan
    $status = 1;

    $GetMultipleInfo = mysql_query("SELECT * FROM members WHERE id = '".$GetUserInfo->mult_uid."'") or die(mysql_error());  
      if(mysql_num_rows($GetMultipleInfo) != 0)
      {
        ++$cols;
        ++$status;
      }
      $GetMultipleInfo = mysql_fetch_object($GetMultipleInfo);

    $GetAdMultipleInfo = mysql_query("SELECT * FROM members WHERE id = '".$GetUserInfo->mult_admin."'") or die(mysql_error());
      if(mysql_num_rows($GetAdMultipleInfo) != 0)
      {
        ++$cols;
        $status = ($status == 2 ? 4 : 3);
      }
      $GetAdMultipleInfo = mysql_fetch_object($GetAdMultipleInfo);

// Sparks Transfer
if (isset($_POST['spartrans']))
{
  $order = $_POST['sparrecipients'];

if ($order == 'first')
{
  $tpoints2 = $_POST['tpoints2'];
  $tpoints3 = $_POST['tpoints3'];
  $tpoints = $tpoints2 + $tpoints3;

   if ($status == 2)
      if ((!is_numeric($tpoints1)) || (!is_numeric($tpoints2)) || empty($tpoints1) ||  empty($tpoints2))
        message("Please fill in with a number.","Enchanted Hogwarts","$PHP_SELF?a=exchange");
  elseif ($status == 3)
      if ((!is_numeric($tpoints1)) || (!is_numeric($tpoints3)) || empty($tpoints1) || empty($tpoints3))
        message("Please fill in with a number.","Enchanted Hogwarts","$PHP_SELF?a=exchange");
  elseif ($status == 4)
      if ((!is_numeric($tpoints1)) || (!is_numeric($tpoints2)) || (!is_numeric($tpoints3)) || empty($tpoints1)  ||  empty($tpoints2) || empty($tpoints3))
        message("Please fill in with a number.","Enchanted Hogwarts","$PHP_SELF?a=exchange");

  if ($tpoints2 > $GetMultipleInfo->tpoints)
    message("" . getName($GetMultipleInfo->id) . " does not have enough sparks.","Enchanted Hogwarts","$PHP_SELF?a=exchange");

  if ($tpoints3 > $GetAdMultipleInfo->tpoints)
    message("" . getName($GetAdMultipleInfo->id) . " does not have enough sparks.","Enchanted Hogwarts","$PHP_SELF?a=exchange");

  if ($GetUserInfo->mult_uid != 0)
    mysql_query("UPDATE members SET tpoints = GREATEST(tpoints - $tpoints2,0) WHERE id = '".$GetMultipleInfo->id."'") or die(mysql_error());
  if ($GetUserInfo->mult_admin != 0)
    mysql_query("UPDATE members SET tpoints = GREATEST(tpoints - $tpoints3,0) WHERE id = '".$GetAdMultipleInfo->id."'") or die(mysql_error());
  mysql_query("UPDATE members SET tpoints = GREATEST(tpoints + $tpoints,0) WHERE id = '$userid'") or die(mysql_error());

  message("Successfully transferred $tpoints Sparks to ".getName($userid).".","Enchanted Hogwarts","$PHP_SELF?a=exchange");
}

}

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:45:53.833

在您的代码中，您正在建立几个变量。

```
if ($order == 'first')
{
    $tpoints2 = $_POST['tpoints2'];
    $tpoints3 = $_POST['tpoints3'];
    $tpoints = $tpoints2 + $tpoints3; 
```

但是在这里你正在检查不同变量的值。 **$tpoints1**从未建立。

```
if ((!is_numeric($tpoints1)) || (!is_numeric($tpoints2)) || empty($tpoints1) ||  empty($tpoints2))
          message("Please fill in with a number.","Enchanted Hogwarts","$PHP_SELF?a=exchange"); 
```

编辑：这可能是不正确的。您可能有 register_globals 将自动设置该变量。不推荐，但不是你问的问题。

最重要的是，您需要确定正在执行代码的哪个分支。根据您的描述，我的猜测是它是**$order == 第一个**分支，然后是**$status == 3**。但是，如果没有实际提交表格并且不知道做出了哪些选择，我就不可能说出来。而且所有的错误信息都是一样的“请填写一个数字”。不是很有帮助。

我个人会花时间重构你的一些代码。如果我不理解某些内容，我会将其分解成更小的块，直到我理解为止。否则，每次尝试找出问题时，您将始终在此页面中进行筛选。

$order 的每个选择都以完全相同的方式验证 $tpoints1、$tpoints2 和 $tpoints3 的值。首先将其移动到一个函数中，然后从那里开始。

# api - 彭博 API 企业行动

> ID：12047722
> 
> 赞同：4
> 
> 时间：2012-08-21T02:29:20.850
> 
> 标签：api, action, bloomberg, corporate

在bloomberg API中，使用.net，有人知道如何获得股权的公司行为吗？我试图通过使用订阅获得股权的所有领域，但我找不到任何与公司行为相关的内容。我也尝试使用 Field Search Request 但不成功，链接是： [bloomberg API - Field Search Request](https://stackoverflow.com/questions/11899919/bloomberg-api-field-search-request)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:11:22.067

您可以获得诸如股息、权利、分拆拆分和不交付等公司行为。例如 DVD_EX_DATE。为此使用 Equity 上的静态请求。

查看公司行为相关字段的最简单方法是使用 excel 插件。打开 import data -> Market Reference,Analytical,Data Sets 插入一只股票并查看公司行为（我无法上传截图）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:58:51.827

企业行为数据无法通过 API 获取，您需要使用数据许可产品。

`DLSD <GO>`在终端有文档。

# javascript - 使用 javascript/jquery 添加值时，文本输入的 html 表无法正确显示

> ID：12047726
> 
> 赞同：0
> 
> 时间：2012-08-21T02:29:39.350
> 
> 标签：javascript, jquery, html, css

我有一个 html 表格，其中 ( `td`) 单元格包含文本输入 ( `<input type="text"/>`)。一切都很好（用户可以在输入中输入 OK），除了当我`.append()`输入单元格具有值的行时，当输入上方似乎添加了额外的边距时，破坏了表格行的对齐方式（这发生在 chrome 和野生动物园，但火狐是好的）。

```
$('.myTable').append('<tr><td><input type="text" value="product code 1"/></td>'+
     '<td><input type="text" disabled="disabled"/></td></tr>'); 
```

我在css中找不到任何东西。有人遇到/解决了这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T04:50:40.093

疯狂的笑声！好的，我明白了！我有以下css浏览器重置代码：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu,nav, output, ruby, section, summary,
time, mark, audio, video {
    margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;
} 
```

删除`vertical-align:baseline;`位解决了问题！或者，删除`tbody`,`tr`并且`td`也有效。非常感谢人们试图提供帮助。

# jquery-ui - 如何在 jQuerymobile 中制作范围滑块？

> ID：12047730
> 
> 赞同：0
> 
> 时间：2012-08-21T02:30:12.643
> 
> 标签：jquery-ui, jquery-mobile

有没有办法在 jQuerymobile 中制作一个带有两个选择点的滑块，中间有一个突出显示？我正在寻找这样的东西：http: [//jqueryui.com/demos/slider/#range](http://jqueryui.com/demos/slider/#range)但对于移动框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:39:36.483

目前似乎没有内置的方法可以这样做，但是您可能想看看这个 SO question [jQuery](https://github.com/jquery/jquery-mobile/pull/2401) [Mobile Dual Range slider](https://stackoverflow.com/questions/8895748/jquery-mobile-dual-range-slider)

# ruby-on-rails - EmberJS 使用 Rails 路由

> ID：12047734
> 
> 赞同：3
> 
> 时间：2012-08-21T02:30:34.027
> 
> 标签：ruby-on-rails, ember.js, ember-old-router

从 rails .erb 我可以调用 Emberjs 视图，它渲染得很好：

```
<script type="text/x-handlebars">
  {{ view App.ListUsers }}
</script> 
```

现在，如果我要使用核心 statemanager，我会做这样的事情：

```
App.Router = Ember.Router.extend({
    index: Ember.State.extend({
      route: '/'
}); 
```

如何直接从 .erb 调用索引路由？就像启动 emberjs 应用程序的引导程序一样。

我希望将 Ember 用于管理仪表板，因此我将在管理员登录到 rails 应用程序后启动 emberjs 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:56:14.293

你有没有尝试过：

```
Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/'
      // connectOutlets and such...
    })
  }), 
```

来自 Ember.Router 文档 http://emberjs.com/api/classes/Ember.Router.html：

> 实例的 initialState 属性`Ember.Router`名为`root`。

# deployment - 通过 Microsoft Web Deploy V2 同步 iis6

> ID：12047742
> 
> 赞同：2
> 
> 时间：2012-08-21T02:32:03.637
> 
> 标签：deployment, web

**我得到了**
信息：使用 ID '05fd773b-ed96-44ca-a51f-9733acc80e10' 连接到远程服务器。错误代码：ERROR_DESTINATION_NOT_REACHABLE 更多信息：无法连接到目标计算机（“saminsite65m”）。在目标计算机上，确保安装了 Web Deploy 并启动了所需的进程（“Web 部署代理服务”）。错误：无法创建类型为“webServer60”和路径“”的对象。错误：远程服务器返回错误：（404）未找到。错误计数：1.
**当我运行命令时**
msdeploy.exe -verb:sync -disableLink:ContentExtension -enableLink:AppPool -enableLink:AppPoolExtension -enableLink:CertificateExtension -enableLink:FrameworkConfigExtension -enableLink:HttpCertConfigExtension -source:webserver60,computername=SAMINSITE65M -dest:package="J:\Backup\ Backup_20120821095049\IIS\IIS.zip",encryptPassword=rwxsb3mo.ql5 -disableRule:IISConfigFrom64To32
在cmd中。
**我不知道为什么。谢谢你的帮助。**

# wordpress - woocommerce for wordpress 删除添加到购物车按钮

> ID：12047745
> 
> 赞同：0
> 
> 时间：2012-08-21T02:32:44.010
> 
> 标签：wordpress, woocommerce

是否有任何 woocommerce 专家知道如何从商店页面删除添加到购物车按钮？我只希望该按钮显示在单个项目页面上。

另外，我想更改标题和价格的顺序。我希望价格直接显示在图像下方，标题显示在价格下方。我在模板中的哪个位置进行更改？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:26:36.863

请在woocommerce插件目录中找到以下文件

wp-content/plugins/woocommerce/templates/content-product.php

并删除如下所示的行

它将删除商店页面中每个产品的添加到购物车按钮，保留单个产品页面中的按钮。

# java - Java 同时使用“-cp”和“-jar”

> ID：12047758
> 
> 赞同：9
> 
> 时间：2012-08-21T02:35:41.030
> 
> 标签：java

早些时候，我只有一个 jar 文件，并且设置了清单，以便我可以简单地运行我的程序：

```
 java -jar MyApp.jar 
```

现在，我已将我的功能分成两个 jar 文件 - MyCore.jar 和 MyApp.jar。

以下命令有效：

```
java -cp "*" com.mycompany.mypackage.App 
```

但我无法让以下工作

```
java -cp "*" -jar MyApp.jar 
```

我得到一个 ClassNotFoundException。

我更喜欢使用“-jar”开关。有没有办法让它工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T02:43:38.080

根据 Java cli[文档](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/java.html#jar)，您不能在同一命令中组合 -cp 和 -jar

> -jar 执行封装在 JAR 档案中的程序。第一个参数是 JAR 文件的名称，而不是启动类名称。为了使该选项起作用，JAR 文件的清单必须包含格式为 Main-Class:classname 的行。在这里，classname 标识具有用作应用程序起点的 public static void main(String[] args) 方法的类。有关使用 Jar 文件和 Jar 文件清单的信息，请参阅 Jar 工具参考页面和 Java 教程的 Jar 跟踪。使用此选项时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。请注意，可以使用“java -jar”选项运行的 JAR 文件可以设置其执行权限，这样它们就可以在不使用“

为了解决这个问题，您需要确保应用程序 jar 中的清单引用包含主文件的类和类路径。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T02:43:31.820

我有一个像这样的 Manifest.mf 文件。

```
Manifest-Version: 1.0
Main-Class: com.mycompany.mypackage.App
Class-Path: MyApp.jar MyCore.jar log4j.jar 
```

您可以将所需的任何 jar 文件添加到 Class-Path 行。然后只要 jar 在类路径中，您就可以在没有 -cp 的情况下运行 java -jar 命令。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-21T05:15:04.223

假设两个 jar 文件都在同一个文件夹中并且`com.mycompany.mypackage.App`是主应用程序类，请尝试以下命令：

```
java -cp MyCore.jar;MyApp.jar com.mycompany.mypackage.App 
```

它应该适合你。

如果您坚持使用`-jar`开关（*为什么？*），那么您需要修改清单文件，添加`Class-Path`密钥并指定所有相关 jar 文件的路径。如果 jar 文件未与您的主应用程序 jar 文件打包，它会使您的应用程序不太灵活。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T02:40:27.497

添加一个既指定包含的类又指定`main()`类路径的清单。有关更多详细信息，请参阅[使用清单文件：将类添加到 JAR 文件的类路径](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)。

然后是整个应用程序。可以使用 启动`-jar`，而不需要`-cp`.

# spring - 如何使用spring ehcache抽象动态创建缓存

> ID：12047759
> 
> 赞同：4
> 
> 时间：2012-08-21T02:35:50.180
> 
> 标签：spring, ehcache, ehcache-2

在 google 代码上可用的 ehcache-spring-annotations 库中，配置选项“create-missing-caches”可用于动态创建动态缓存（ehcache.xml 中未定义缓存）。纯 spring ehcache 抽象（Spring 3.1.1）中是否有类似的配置可用？或者有没有其他方法可以使用 spring ehcache 抽象创建动态缓存？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T04:45:08.423

我可以通过扩展 org.springframework.cache.ehcache.EhCacheCacheManager 并覆盖 getCache(String name) 方法来做到这一点。下面是代码片段：

```
public class CustomEhCacheCacheManager extends EhCacheCacheManager {

private static final Logger logger = LoggerFactory
        .getLogger(CustomEhCacheCacheManager.class);

private static final String NO_CACHE_ERROR_MSG = "loadCaches must not return an empty Collection";

@Override
public void afterPropertiesSet() {
    try {
        super.afterPropertiesSet();
    } catch (IllegalArgumentException e) {
        if (NO_CACHE_ERROR_MSG.equals(e.getMessage())) {
            logger.debug("No cache was defined in ehcache.xml. The error "
                    + "thrown by spring because of this was suppressed.");
        } else {
            throw e;
        }
    }
}

@Override
public Cache getCache(String name) {
    Cache cache = super.getCache(name);
    if (cache == null) {
        logger.debug("No cache with name '"
                + name
                + "' is defined in encache.xml. Hence creating the cache dynamically...");
        getCacheManager().addCache(name);
        cache = new EhCacheCache(getCacheManager().getCache(name));
        addCache(cache);
        logger.debug("Cache with name '" + name
                + "' is created dynamically...");
    }
    return cache;
} 
```

}

如果有人有其他更好的方法，请告诉我。

# php - PHP 向多个收件人发送电子邮件，即使其中一个收件人无效

> ID：12047762
> 
> 赞同：1
> 
> 时间：2012-08-21T02:36:44.767
> 
> 标签：php, email

我可以使用 PHP 中的 mail() 函数向多个收件人发送电子邮件，电子邮件地址用 (,) 分隔。

但是，如果列表中的任何电子邮件无效，则此功能将失败。所以我唯一的选择是循环并多次调用 mail() 函数，导致响应延迟。

非常感谢您帮助解决此问题。

* * *

伙计们，这仍然是一个问题。问题是如果电子邮件不是合法的，尽管格式是正确的。例如：如果 'google@yahoo.com' 是邮件列表的一部分，则邮件功能失败，甚至没有向列表中的其他人发送邮件。

问题在于所提供电子邮件的有效性，而不是语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:48:30.997

一个简单的过滤器就足够了：

```
function MYFILTERS_emails($val){
    return !!(filter_var($val, FILTER_VALIDATE_EMAIL));
}

$emails = implode(', ', array_filter($emails, 'MYFILTERS_emails')); 
```

[工作示例](http://ideone.com/OrJgAC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T03:19:14.400

只有当您的服务器（邮件程序，即 sendmail、postfix 等，查看您的 PHP 配置）有一个不存在的邮件地址（或类似的东西）的黑名单时，才会发生这种情况。

PHP mail() 函数的正常行为是将邮件和收件人列表委托给邮件程序，并报告数据是否被接受。mail() 的返回值并没有说明传递是否成功。

知道了这一点，有两种可能的解决方案：

1.  重新配置邮件程序以接受这些地址。或者，

2.  通过检查收件人地址的 MX 记录，在调用 mail() 之前检查邮件地址是否存在。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T02:48:52.897

您将不得不使用任何解决方案遍历电子邮件地址，但是您不必每次都使用邮件。

遍历电子邮件列表并检查有效性或每个，并相应地删除，然后将原始 mail() fx 与清除列表一起使用。

PHP：（电子邮件列表作为数组 - $emails）

```
$cleanList = '';
foreach($emails as $email){

    //REGEX email verify
if (eregi("^[a-z0-9._-]+@[a-z0-9._-]+.[a-z]{2,6}$", $email)) {
    $cleanList .= $email.',';
}

//Remove last comma
$cleanList = substr($cleanList,0,-1); 
```

主要的（）....

# objective-c - 隐藏然后重新显示 UINavigationBar 会导致问题

> ID：12047767
> 
> 赞同：2
> 
> 时间：2012-08-21T02:37:22.097
> 
> 标签：objective-c, ios, cocoa-touch, uinavigationcontroller

我在 viewDidLoad 中隐藏了状态栏和导航栏

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [self.navigationController setNavigationBarHidden:YES animated:YES];
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
} 
```

一切正常。但是，当我关闭视图控制器时，在 viewWillDisappear: 我做：

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [self.navigationController setNavigationBarHidden:NO animated:YES];
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
} 
```

这导致我的所有观点都处于不利地位： ![在此处输入图像描述](../Images/f223e3c95fe3672a91c3728716f4f276.png)

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:03:49.673

我没有尝试过，所以我只是猜测。您的导航栏设置了一个框架，就好像没有`Status bar`. 有些事情是以错误的顺序完成的。
因此，在您的代码中，我看到当导航栏被要求在没有状态栏的情况下可见时。

```
[self.navigationController setNavigationBarHidden:NO animated:YES];    
[[UIApplication sharedApplication] setStatusBarHidden:NO]; 
```

您是否尝试过反转这两条线？（我只是猜测）

我的另一个测试是设置 viewDidAppear 中可见的导航栏。
那时 applicationFrame 应该已经更新为状态栏再次可见的事实。

* * *

我已经对其进行了测试，并反转调用使其工作。但是你不会得到导航栏和状态栏的动画。如果你想要他们，我建议你把那些电话打进来`viewWillAppear`或打进来`viewDidAppear`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:01:19.273

我认为，当显示导航栏时，应用程序状态栏仍然隐藏，因此导航栏 offsetY 为 0。您应该更改两种调用方法的顺序。

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
    [self.navigationController setNavigationBarHidden:NO animated:YES];
} 
```

# ruby-on-rails - 不区分大小写的 default_scope ：顺序？

> ID：12047768
> 
> 赞同：0
> 
> 时间：2012-08-21T02:37:23.160
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord, rails-activerecord

我在mysql下通过了以下测试（使用FactoryGirl）：

```
 test "order by title" do
    @library = create(:drawing_library, title: 'Accessories')
    @drawing = create(:drawing, drawing_library: @library, title: 'Test Drawing')
    create(:drawing, drawing_library: @library, title: 'z')
    create(:drawing, drawing_library: @library, title: 'm')
    create(:drawing, drawing_library: @library, title: 'b')

    str = ''
    @library.drawings.each do |dwg|
      str += dwg.title
    end

    assert_equal 'bmTest Drawingz', str
  end 
```

绘图模型为：

```
class Drawing < ActiveRecord::Base
  belongs_to :drawing_library
  default_scope order: :title
  ..
end 
```

在 postgresql 下，这个测试现在失败了：

```
<"bmTest Drawingz"> expected but was
<"Test Drawingbmz">. 
```

这似乎是因为“测试绘图”中的 T 是大写的。如果我将其更改为“测试绘图”，则测试通过。

有没有办法让`default_scope order`大小写不敏感？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:04:54.533

您可以将默认范围更改为按小写标题排序：

```
default_scope order: 'lower(title)' 
```

或者，如果你喜欢大喊大叫，你可以改用大写：

```
default_scope order: 'upper(title)' 
```

无论您使用哪个数据库或它具有什么配置设置，这应该几乎相同（当然，除非您的数据库配置为使用有趣的排序规则）。

如果您希望此默认范围参与连接，则可能需要包含表名。

# android - Android - 如何在按下默认后退按钮时为活动过渡设置动画

> ID：12047770
> 
> 赞同：46
> 
> 时间：2012-08-21T02:37:50.007
> 
> 标签：android, animation, button, transition, back

在我的活动中，我有一个带有以下点击监听器的按钮，效果很好：

```
final ImageButton startOverButton = (ImageButton) findViewById(R.id.start_over_button);
startOverButton.setOnClickListener(new View.OnClickListener(){

    @Override
    public void onClick(final View v) {

        finish();//go back to the previous Activity
        overridePendingTransition(R.anim.comming_in, R.anim.comming_out);
    }
}); 
```

它以我想要的方式动画返回上一个活动。但是，当用户按下 Android 默认的后退按钮时，不会触发动画。我的问题是：我应该把动画代码放在哪里*overridePendingTransition(R.anim.comming_in, R.anim.comming_out);* 这样当用户单击我的按钮和默认的 Android 后退按钮时都会触发此动画？

作为一个天真的尝试，我试图把*overridePendingTransition(R.anim.comming_in, R.anim.comming_out);* *onDestroy()*方法中的代码行，但它不起作用。

先感谢您！

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-08-21T03:04:22.227

也许您可以在活动中的 onBackPressed() 方法中完成这项工作。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    overridePendingTransition(R.anim.comming_in, R.anim.comming_out);   
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-09-13T14:19:21.397

基本上覆盖 onBackPressed 是一种正确的方法，但与其调用 finish() 我会说最好调用 super.onBackPressed() 然后添加 overridePendingTransition 这样我们就更符合继承规则。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    overridePendingTransition(R.anim.comming_in, R.anim.comming_out);   
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-01T19:31:35.680

尽管覆盖`onBackPressed()`是一个不错的选择，但我建议覆盖该`finish()`方法，以防活动以其他方式完成，例如导航操作或“破坏”活动的任何其他视图操作：

```
@Override public void finish() {
   super.finish();
   overridePendingTransition(0,0);
} 
```

我们需要考虑到此方法将在按下后退按钮后触发，所以我们很高兴:-)

**更新**：此外，`onBackPressed()`如果我们在其中使用片段，覆盖可能会弄乱 Activity，因为我们可能不希望每次按下后都覆盖转换。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-19T23:02:01.293

如果你使用片段，你可以这样进行：

```
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.setCustomAnimations(R.anim.anim_slide_in_left, R.anim.anim_slide_out_left, R.anim.anim_slide_out_right, R.anim.anim_slide_in_right);
transaction.replace(R.id.fragment_container, new YourClassFragment);
transaction.addToBackStack(null);
transaction.commit(); 
```

anim_slide_in_left

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android" >
  <translate
    android:duration="500"
    android:interpolator="@android:interpolator/decelerate_quint"
    android:fromXDelta="100%p"
    android:toXDelta="0%p" >
  </translate>
 </set> 
```

anim_slide_out_left

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android" >
  <translate
    android:duration="500"
    android:interpolator="@android:interpolator/decelerate_quint"
    android:fromXDelta="0%p"
    android:toXDelta="-100%p" >
  </translate>
 </set> 
```

anim_slide_out_right

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
 <translate
    android:duration="@android:integer/config_mediumAnimTime"
    android:interpolator="@android:interpolator/decelerate_quint"
    android:fromXDelta="-100%p"
    android:toXDelta="0%p" >
 </translate>
</set> 
```

anim_slide_in_right

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android" >
  <translate
    android:duration="@android:integer/config_mediumAnimTime"
    android:interpolator="@android:interpolator/decelerate_quint"
    android:fromXDelta="0%p"
    android:toXDelta="100%p" >
  </translate>
 </set> 
```

# c# - 触发 popup.isopen = 从不同的视图关闭？

> ID：12047772
> 
> 赞同：1
> 
> 时间：2012-08-21T02:38:01.150
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在寻找一种方法来从我创建的用户控件中的按钮关闭在 MainPage 中创建的弹出窗口。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:41:11.257

在 Microsoft 的 ApplicationSettings 示例中找到了一个好方法。

```
 Popup parent = this.Parent as Popup;
        if (parent != null)
        {
            parent.IsOpen = false;
        } 
```

# java - 如何从 Android Java 中的另一个类访问 ArrayList？

> ID：12047775
> 
> 赞同：1
> 
> 时间：2012-08-21T02:38:21.250
> 
> 标签：java, android, arraylist

我是 Android 和 Java 的新手，但在 Objective C 和 iPhone 编程方面确实有一些经验。我正在尝试重新创建一个我已经为 iPhone 设计的应用程序，并且被困在应该是一个简单的概念上。

在我的 ParserHandler 类中，我从服务器解析 XML 并将数据放入三个单独的 ArrayList 中。解析似乎工作正常。当我记录并遍历 ParserHandler.java 类中的 ArrayList 时，一切正常。（List1.java 类有一些字符串变量，我已经在 ParserHandler 中声明了它`private List1 theList = new List1();`：）

```
for(int i = 0; i<dogArray.size(); i++){
        theList = dogArray.get(i);
        Log.i(TAG, "looping " + i + " " + theList.Name);
        Log.i(TAG, "looping " + i + " " + theList.PhotoUrl);
        Log.i(TAG, "looping " + i + " " + theList.Type);

        }//this loops fine and has all the data 
```

dogArray 是这样声明的：`public ArrayList<List1> dogArray = new ArrayList<List1>();` 现在我想从类 DogListView.java 访问 dogArray，所以在 onCreate 方法中我尝试执行以下操作：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dog_list_view);
        ParserHandler ph = new ParserHandler();
        int d = ph.getNumberofDogs();
        int m = ph.dogArray.size();
        Log.i(TAG, "dog size is:" + d + "and:" + m);} 
```

我尝试了两种不同的方法，并且都总是在日志中返回“0”。但是，当日志来自 ParserHandler.java 类时，始终会记录正确的大小并且所有数据都在那里。

这是 ParserHandler.java 中的访问器方法。

```
 public int getNumberofDogs(){
            return dogArray.size();
        } 
```

我更喜欢通过访问器方法访问 dogArray（因为这似乎是我收集到的最佳实践）但是我愿意接受所有建议。

提前致谢！！

**编辑 2012 年 8 月 23 日**

我最终通过声明我的`ArrayLists Static`. 我知道这种（和`public`）方法对于 OOP 来说并不理想，但我会接受它。在我的 ParserHandler.java 我声明

```
public static ArrayList<List1> dogArray = null; 
public static ArrayList<List1> otherArray = null;
public static ArrayList<List1> catArray = null; 
```

然后开始我的 SAX 解析器：

```
@Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub
        super.startElement(uri, localName, qName, attributes);
        if (qName.equalsIgnoreCase("ArrayOfDataFeedAnimal")){
            catArray = new ArrayList<List1>();
            dogArray = new ArrayList<List1>();
            otherArray = new ArrayList<List1>();
        }else if(qName.equalsIgnoreCase("DataFeedAnimal")){
            theList = new List1();
        } 
```

然后我的 SAX 解析的其余部分发生。最后，从我想要访问数组的任何类中，我只需以静态方式执行此操作`ParserHandler.dogArray.size()`即可获取数组的大小。我现在可以从我需要的任何类中以任何我认为合适的方式操作数组。

我仍然不清楚为什么使用我解析的 ArrayLists 创建 ParserHandler 类的实例对我不起作用，因为当我使用简单的`int[]`.

希望这可以在将来对其他人有所帮助。

再次感谢大家的反馈！

干杯!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T02:44:59.840

你可以通过两种方式做到这一点，

1.  创建一个 setter/getter 类
2.  创建一个返回 ArrayList 的公共静态方法

第一种方法：

类名：myDataObject.java

```
private ArrayList myArrayList;

// setting the ArrayList Value 
public void setArrayList ( ArrayList myArrayList )
{
     this.myArrayList = myArrayList;
}

// getting the ArrayList value 
public ArrayList getArrayList() 
{
     return myArrayList;
} 
```

第二种方法：

在 ArrayList 文件中，（假设类名是 class A.java ）

```
private static ArrayList myArrayList = null; 

... 
// assign arraylist 

public static ArrayList getArrayList()
{
      return myArrayList;
} 
```

在调用活动/类中，您可以使用以下代码调用它，

```
private ArrayList newArrayList = null;

newArrayList = A.getArrayList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T05:11:48.480

您不应该将方法设为静态。因为那不是 OOP 设计。

有2种方式：

1）。要么公开属性。（也不是一个好习惯）

2）。`ParserHandler`为类添加 getter 和 setter

```
class ParserHandler {

  private  List<List1> dogArray = new ArrayList<List1>();

  public List<List1> getDogArray() {
   return this.dogArray;
  }

  public void setDogArray(List<List1> dogArray) {
    this.dogArray = dogArray;
  }

} 
```

现在像这样访问 dogArray

```
ph.getDogArray();
 int m = ph.getDogArray().size(); 
```

最初它将为 0，因为它是一个空列表。先使用setter方法设置数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T03:24:23.833

请注意，在您的 oncreate 中，您正在 ParserHandler 中执行文件操作，它将 xml 文件解析为您的数据。如果 ParserHandler 没有在单独的线程中处理，这可能会阻塞 UI 线程。但是，如果您在单独的线程中处理，那么您的 int d = ph.getNumberofDogs(); 由于 UI 线程和处理解析的单独线程之间的竞争条件，即使您的 xml 中有数据也可能返回 0。

我认为最好的解决方案是在解析完成时创建一个侦听器，这样您就可以确定在访问列表大小之前处理已经完成。

将此添加到您的 ParserHandler 类中

```
class ParserHandler {

       ...... your original codes here

       private OnParsingDoneListener mListener;
       public void setOnParsingDoneListener (OnParsingDoneListener listener){
             mListener = listener;
       }

      public static interface OnParsingDoneListener {
            public void onParsingDone (List dogList);
      }

} 
```

解析完 xml 数据后，请务必调用 mListener.onParsingDone。

在你的 onCreate()...

```
ParserHandler ph = new ParserHandler();
ph.setOnParsingDoneListener (new ParserHandler.OnParsingDoneListener(){
     public void onParsingDone(List dogList){
         // do whatever you want to the doglist
         // at this point all parsing is done and dogList contains the data from xml
     }
}); 
```

# r - ggplot2 相当于 matplot() ：按列绘制矩阵/数组？

> ID：12047787
> 
> 赞同：19
> 
> 时间：2012-08-21T02:40:08.607
> 
> 标签：r, matrix, plot, ggplot2

`matplot()`可以很容易地按列绘制矩阵/二维数组（也适用于数据帧）：

```
a <- matrix (rnorm(100), c(10,10))
matplot(a, type='l') 
```

使用 ggplot2 是否有类似的东西，或者 ggplot2 是否需要先将数据`melted`放入数据框中？

此外，有没有办法使用单独的向量（的`length=ncol(a)`）任意颜色/样式矩阵列的子集？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T21:43:02.343

对于这个特定的示例，可能会更容易一些：

```
library(ggplot2)
a <- matrix (rnorm(100), c(10,10))
sa <- stack(as.data.frame(a))
sa$x <- rep(seq_len(nrow(a)), ncol(a))
qplot(x, values, data = sa, group = ind, colour = ind, geom = "line") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T04:51:04.107

过去提出的问题的答案一般都在指定组参数之前建议了熔解策略：

```
require(reshape2); require(ggplot2)
dataL = melt(a, id="x")
 qplot(a, x=Var1, y=value, data=dataL, group=Var2)

p  <- ggplot(dataL, aes_string(x="Var1", y="value", colour="Var2", group="Var2"))
p <- p + geom_line() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-03T13:46:41.637

只是稍微简化了之前所说的（矩阵被包裹在 c() 中以使其成为向量）：

```
 require(ggplot2)
    a <- matrix(rnorm(200), 20, 10)
    qplot(c(row(a)), c(a), group = c(col(a)), colour = c(col(a)), geom = "line") 
```

# delphi - 使用 TClientDataSet 在 ApplyUpdates 之后获取触发器生成的值

> ID：12047797
> 
> 赞同：4
> 
> 时间：2012-08-21T02:41:23.760
> 
> 标签：delphi, delphi-xe2, firebird, datasnap, tclientdataset

我有一个（火鸟）数据库。对于我的大多数表，我都有一个触发器，它在插入之前触发，它将通过生成器为我创建主键 (PK)，并向新插入的记录写入 Created Date 值和 Created By 值。我还有一个更新触发器，它写入更新日期字段和更新者字段。

例如（客户端是我数据库中的一个表）：

```
create trigger t_client_id for client
active before insert
as begin
  new.client_id = gen_id(gen_client_id, 1);
  new.created = current_timestamp;
  new.created_by = current_user;
  new.lock_vn = 1;
end ^

create trigger t_client_update for client
active before update
as begin
  new.updated = current_timestamp;
  new.updated_by = current_user;
end ^ 
```

当我通过我的 ClientDataSet (CDS) 应用更新时 - 通过 TDSProviderConnection 附加到远程 TDataSetProviders，我如何“检索”这些生成的值？如果我编辑一个现有的（这又会调用 t_client_update 触发器，调用 RefreshRecord 将获得 updated 和 updated_by 字段。但是，Doco 说要谨慎使用该方法，因此这可能不是实现此目的的正确方法。我在我调用 ApplyUpdates(-1) 之后直接调用它。

我使用的 CDS 仅包含我尝试编辑的一条记录。对于新记录，CDS 处于 dsInsert 模式。一切都已写入数据库，所以我只需要再次获取这些新数据。我也尝试过使用包含表中所有记录的 CDS 来查看它是否更简单但没有任何区别 - 不足为奇。我需要这些信息的原因只是为了在 DB Aware 控件中向用户显示这些值。它们是只读的。

我猜想在使用 PK 编辑现有记录时，我可以在记录上调用 Get，但这对插入没有帮助，因为我不知道新的 PK 是什么。

我尝试将更新应用到我的 CDS 的示例（actDSSave 是一个 TDataSetPost 操作）

```
 dsState := actDSSave.DataSource.DataSet.State;
  DoApplyUpdates(-1);
  if dsState = dsEdit then
    TClientDataSet(actDSSave.DataSource.DataSet).RefreshRecord; 
```

我正在为附加到远程 DataSetProvider 的数据集使用 TIBQuery。此查询 SQL 是一个简单的**select * from client where client_id = :client_id**。我也尝试将此查询与 TIBUpdateSQL 相关联，并尝试在 DataSetProvider 中将 poAutoRefresh 设置为 true。

那么是否有可能以这种方式获得这些触发器生成的值，还是我需要以不同的方式来处理它？我能想到的另一种方法是创建存储过程，对每个表执行 CRUD 并使用它（使用适当的输入/输出参数来返回这些新数据），但希望我不必走这条路。希望我在这里提供了足够的信息来解释和复制这个问题。

谢谢

**编辑** 在上面实现，DoApplyUpdates(-1) 是我自己的方法。目前它的实现很简单：

```
FdatCommon.cdsClient.ApplyUpdates(MaxErrorCount); 
```

FdatCommon 是一个包含我的 CDS 的 TDataModule。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:47:03.557

如果在 Post 之后没有新的数据重新查询 (RefreshRecord)，您根本无法获得“生成的”值。

这是因为当您调用 ApplyUpdates 时触发器在服务器端运行，但 TClientDataSet 默认情况下不会刷新发布的记录。例如，其他库 FIBPlus 可以选择自动执行此操作。

关于插入，TIBDataSet 具有 GeneratorField 属性。使用它，在插入之前分别查询和增加生成器值。因此，即使在插入后，您也会有 PK 值。但避免在触发器中再次使用它。

MIDAS (TClientDataSet) 是一个很棒的库，但与特定 DBMS 的专用库（例如 FibPlus）相比，他的通用/通用架构松散了 DB 特定功能（例如从插入中检索值）。顺便说一句，我看到了 TpFIBClientDataSet。它与 TpFibDataSet 一起工作。

# jquery - 使用 dataType:html 的 jQuery .ajax 调用失败，但 Fiddler 显示出良好的响应

> ID：12047802
> 
> 赞同：2
> 
> 时间：2012-08-21T02:42:38.893
> 
> 标签：jquery

我认为这可能是一个跨域错误。Firefox 14.0.1 版、jQuery 1.5.1 正在发送请求并获得响应，但会抛出错误回调。

ajax 调用如下所示：

```
$.ajax("http://theotherdomain.com/get.php", {
data: { parm : 1 },
dataType: "html",
success: handleit,
error: handleErr
}); 
```

调用错误函数。除了“错误”之外没有其他信息

但是，Fiddler 跟踪显示了这一点：

```
GET /get.php?parm=1 HTTP/1.1
Host: theotherdomain.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html, */*; q=0.01
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://localhost:5195/Play.htm
Origin: http://localhost:5195 
```

根据提琴手的回应：

```
HTTP/1.1 200 OK
...
Content-Type: text/html
Content-Encoding: gzip
Transfer-Encoding: chunked
... 
```

因此，看来我可以通过 jQuery $.ajax 调用此服务器 - 将数据传递给它，它会发送响应，但数据没有通过成功回调传回给我。

1.  这可能是一个跨域问题吗？

如果是这样，如果目标是防止数据从主机服务器以外的页面传递到另一个 Web 服务器，这似乎不是很安全。我也会对这一点的评论感兴趣。

1.  如果不是跨域问题，那么在上述情况下我哪里出错了？

# c# - XNA 矩形如何工作？

> ID：12047807
> 
> 赞同：0
> 
> 时间：2012-08-21T02:43:06.430
> 
> 标签：c#, xna, xna-4.0

所以当我越来越多地使用 XNA 时，有一件事真的让我很困扰。X 和 Y 只能是整数，当您想使用向量作为字符位置时，这很糟糕，但想要矩形的交集方法。

所以我的问题是 Rectangle 结构中到底发生了什么？

我可能想太多了，但提前感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:49:35.683

XNA 缺少**2D Axis-Aligned Bounding Box**结构（使用浮点，不像`Rectangle`）有点烦人。它有一个 3D 的，`BoundingBox`如果您只是忽略 Z 轴，您可以重复使用它。

我个人编写自己的`AABB`结构并使用它。或者，更确切地说，我写过一次，它只是在项目之间复制。这不是一个难写的结构。

我会在这里为您发布它，只是您已经特别询问了它是如何`Rectangle`工作的（我自己的结构的运作方式完全不同）。所以这是我刚刚放在一起的一个，应该类似于`Rectangle`：

```
public struct AABB
{
    public float X, Y, Width, Height;

    public static AABB Intersect(AABB a, AABB b)
    {
        AABB result;
        result.X = Math.Max(a.X, b.X);
        result.Y = Math.Max(a.Y, b.Y);
        result.Width = Math.Min(a.X + a.Width, b.X + b.Width) - result.X;
        result.Height = Math.Min(a.Y + a.Height, b.Y + b.Height) - result.Y;

        if(result.Width < 0 || result.Height < 0)
            return default(AABB);
        else
            return result;
    }
} 
```

作为我刚刚拼凑起来的东西，它并没有经过很好的测试。而且我不确定它会以与`Rectangle`给定负宽度/高度时相同的方式响应。但是，正如您所看到的，它的代码并不多——所以它应该很容易修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:39:33.540

通常碰撞和物理在单独的层上处理。他们定义的“矩形”将与这个不同。

XNA 矩形可能可用于 UI 内容和视口。

如果您想重新使用此矩形，则将您的字符数据存储为两个向量（x，y 和 w，h），并像 Lee Taylor 建议的那样提供到 Rectangle 的转换

# android - 应用程序无法在设备上运行

> ID：12047810
> 
> 赞同：1
> 
> 时间：2012-08-21T02:43:52.767
> 
> 标签：android, web-services, debugging

我创建了一个从 Web 服务读取数据的应用程序。但是当我试图在真实设备上运行它时。这没用。它只是停在第一个屏幕上，除了应用程序的标题之外什么都不显示。似乎可以从网络服务加载数据。我需要配置什么？

该应用程序具有互联网权限，但现在不需要，因为该服务正在本地运行。有什么想法或类似的经历吗？

**主要类：**

```
public class Dashboard extends FragmentActivity implements OnClickListener, ClientDetailActivity.OnHeadlineSelectedListener {

Button btnConociendoAlCliente, btnMaterialDeApoyo, btnMaterialPromocional;

LinearLayout panelConociendoAlCliente, panelMaterialDeApoyo,
        panelMaterialPromocional, panelFragment;
Fragment listFragment;
ClientDetailActivity clientDetailActivity;

private ListView list;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_dashboard);

    initComponents();
}

public void initComponents() {

    panelFragment = (LinearLayout) findViewById(R.id.panelFragment);
    panelMaterialDeApoyo = (LinearLayout) findViewById(R.id.panelMaterialDeApoyo);
    panelMaterialPromocional = (LinearLayout) findViewById(R.id.panelMaterialPromocional);

    panelFragment.setVisibility(View.GONE);
    panelMaterialDeApoyo.setVisibility(View.GONE);
    panelMaterialPromocional.setVisibility(View.GONE);

    btnMaterialDeApoyo = (Button) findViewById(R.id.btnMaterialDeApoyo);
    btnMaterialPromocional = (Button) findViewById(R.id.btnMaterialPromocional);
    btnConociendoAlCliente = (Button) findViewById(R.id.btnConociendoAlCliente);

    btnConociendoAlCliente.setOnClickListener(this);
    btnMaterialDeApoyo.setOnClickListener(this);
    btnMaterialPromocional.setOnClickListener(this);

    clientDetailActivity = new ClientDetailActivity();
    FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
    fragmentTransaction.add(R.id.listFragment, clientDetailActivity);
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.commit();

} 
```

我的网络服务只是从关于客户端的数据库日期收集的。这是代码：

```
HttpClient httpClient = new DefaultHttpClient();
        HttpGet del = new HttpGet(ruta + "s");
        del.setHeader("content-type", "application/json");

        try {
            HttpResponse resp = httpClient.execute(del);
            String respStr = EntityUtils.toString(resp.getEntity());
            JSONArray respJSON = new JSONArray(respStr);
            clientes = new String[respJSON.length()];

            for (int i = 0; i < respJSON.length(); i++) {

                JSONObject obj = respJSON.getJSONObject(i);

                // Log.e("nombre", idCli);
                ClienteDetallado clienteDetallado = new ClienteDetallado();

                try {
                    clienteDetallado.setCod_Medico(obj.getString("Cod_Medico"));
                } catch (Exception e) {
                    clienteDetallado.setCod_Medico("N/A");
                }

                try {
                    clienteDetallado.setNombre(obj.getString("Nombre"));
                } catch (Exception e) {
                    clienteDetallado.setNombre("N/A");
                }

                try {
                    clienteDetallado.setApellido(obj.getString("Apellido"));
                } catch (Exception e) {
                    clienteDetallado.setApellido("N/A");
                }

                clienteDetallados.add(clienteDetallado);
            }

            MyOwnArrayAdapter myOwnArrayAdapter = new MyOwnArrayAdapter(getActivity(), clienteDetallados);
            list.setAdapter(myOwnArrayAdapter);

        } catch (Exception ex) {
            Log.e("ServicioRest", "Error en listar!", ex);
        }

        return view;
    } 
```

它位于上面片段的 getView() 方法中。有 HttpClient 类使用的 URL。在模拟器中，一切正常。但不在设备中。

谢谢！

# ruby-on-rails - 如何在没有模型的情况下使用 date_select？

> ID：12047814
> 
> 赞同：1
> 
> 时间：2012-08-21T02:44:05.187
> 
> 标签：ruby-on-rails, forms, date

我有一个表格，我想要一个日期。控制器定义的日期是@date_end。我想要这个日期，但如果没有 AR 模型，这似乎真的很难。我以前用这个：

```
 = date_select :date_end_, nil, :default => @date_end 
```

但这仅在您的“名称”与实例变量不同时才有效。如果它们相同，则会出现“interning string”错误。

我发现解决这个问题的唯一方法是向 Object 添加一个方法以返回 self

```
class Object
  def get_self 
    self 
  end
end 
```

然后我可以这样做：

```
 = date_select :date_end, :get_self 
```

但我们都知道这是愚蠢的。但是好像没有别的办法了……

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:54:54.563

像这样的东西可以解决问题吗：

```
= select_date Date.today, :prefix => :date_end 
```

根据[此文档](http://guides.rubyonrails.org/form_helpers.html)，在“4.1 准系统助手”部分下，使用此特定助手将为日、月、年创建一系列选择标签。这些名称最终应该看起来像“date_end[day]”、“date_end[month]”...等。让我知道这是否有帮助。

# amazon-s3 - 存储和检索文件的最佳方式 - BaaS 或 S3

> ID：12047815
> 
> 赞同：0
> 
> 时间：2012-08-21T02:44:14.783
> 
> 标签：amazon-s3, amazon-web-services, data-storage, parse-platform

我们面临以下困境：

我们的移动客户端应用程序将通过 BaaS（后端即服务）进行用户身份验证，然后需要将文件发送到云 - 特别是主要处理将发生的 Amazon EC2 服务器。由于文件的处理时间可能会在以后发生，因此需要存储文件（并且还可能保留文件的存档以供用户将来使用）。问题是您建议以下哪种方式作为首选方式：
a) 将文件直接发送到 EC2 服务器，然后该服务器将发出 Amazon S3 请求以将文件保存在那里
或
b) 将文件存储到 BaaS（其中我们的案例是 parse.com，它使用 S3 作为其数据存储）并稍后由 EC2 服务器检索它

将文件从 EC2 传输到 S3 和反向的成本为 0，只要两者都在同一区域上，这在 a) 和 b) 情况下都是正确的。问题是需要将每个用户映射到他有权访问的文件，并且 a) 和 b) 在这种情况下差别很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:53:56.720

所以基本上你将文件发送到 EC2 - EC2 正在处理它并将它保存到 S3 或者它只是将它保存到 S3 ??。我使用了一种非常简单的方法将数据从 Ec2 传输到 S3。即 s3fuse :- 你基本上可以用 S3 安装 EC2 驱动器，所以当你在 EC2 上存储东西时，它也会自动存储在 S3 中。可能对你很方便。

# android - Listview 视图和图像

> ID：12047817
> 
> 赞同：0
> 
> 时间：2012-08-21T02:44:50.113
> 
> 标签：android, image, listview, lag

大家。我尝试使用 a `viewholder adapter`，但我无法理解并且我的应用程序停止工作。我需要一些帮助。我读了一些解释这一点的博客。没有成功。

这是我下面的代码，我只想如何使用`viewholder adapter`我的列表视图中的 a 或其他东西来修改它，它可以正常工作，没有延迟。我更具视觉效果，如果有人使用我的代码举例，我将不胜感激。PS：我的 Listview 有 100 多个项目，但我只是在此处进行了缩减，以澄清和方便查看我的代码。

```
public class Listagem extends Activity {

    EditText edittext;
    ListView listview;

    String[] text;  
    String[] text2;

    int[] image = {
        R.drawable.wolf;
        R.drawable.cat;
    };

    int textlength = 0;
    ArrayList<String> text_sort = new ArrayList<String>();
    ArrayList<String> text2_sort = new ArrayList<String>();
    ArrayList<Integer> image_sort = new ArrayList<Integer>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        text =  getResources().getStringArray(R.array.text);
        text2 = getResources().getStringArray(R.array.text2);

        edittext = (EditText) findViewById(R.id.EditText01);
        listview = (ListView) findViewById(R.id.ListView01);

        listview.setOnItemClickListener(new OnItemClickListener() { 

                public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
                    if ("Howl".equals(text[position])) {
                        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
                        player.start();
                    }

                    if ("Meow".equals(text[position])) {
                        MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
                        player.start();
                    }
                }          
        });

        listview.setAdapter(new MyCustomAdapter(text, text2, image));
        edittext.addTextChangedListener(new TextWatcher() {

            public void afterTextChanged(Editable s) {

            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                textlength = edittext.getText().length();
                text_sort.clear();
                text2_sort.clear();
                image_sort.clear();

                for (int i = 0; i < text.length; i++) {
                    if (textlength <= text[i].length()) {
                        if (edittext.getText().toString().equalsIgnoreCase((String) text[i].subSequence(0, textlength))) {
                            text_sort.add(text[i]);
                            text2_sort.add(text2[i]);
                            image_sort.add(image[i]);
                        }
                    }
                }

                listview.setOnItemClickListener(new OnItemClickListener() {

                    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
                        if ("Howl".equals(text_sort.get(position))) {
                            MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
                            player.start();
                        }

                        if ("Meow".equals(text_sort.get(position))) {
                            MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
                            player.start();
                        }
                    }
                });
                listview.setAdapter(new MyCustomAdapter(text_sort, text2_sort, image_sort));
            }
        });
    }

    class MyCustomAdapter extends BaseAdapter {
        String[] data_text;
        String[] data_text2;
        int[] data_image;

        MyCustomAdapter() {

        }

        MyCustomAdapter(String[] text, String[] text2, int[] image) {
            data_text = text;
            data_text2 = text2;
            data_image = image;
        }

        MyCustomAdapter(ArrayList<String> text, ArrayList<String> text2, ArrayList<Integer> image) {
            data_text = new String[text.size()];
            data_text2 = new String[text2.size()];
            data_image = new int[image.size()];

            for(int i=0;i<text.size();i++) {
                data_text[i] = text.get(i);
                data_text2[i] = text2.get(i);
                data_image[i] = image.get(i);
            }
        }

        public int getCount() {
            return data_text.length;
        }

        public String getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = getLayoutInflater();
            View row;

            row = inflater.inflate(R.layout.listview, parent, false);

            listview.setCacheColorHint(Color.TRANSPARENT);
            listview.setFastScrollEnabled(true);
            listview.setScrollingCacheEnabled(false);

            TextView textview = (TextView) row.findViewById(R.id.TextView01);
            TextView textview2 = (TextView) row.findViewById(R.id.TextView02);

            Typeface font1 = Typeface.createFromAsset(getAssets(), "arial.ttf");  
            textview2.setTypeface(font1);
            ImageView imageview = (ImageView) row.findViewById(R.id.ImageView01);

            textview.setText(data_text[position]);
            textview2.setText(data_text2[position]);
            imageview.setImageResource(data_image[position]);

            return row;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:31:55.343

你的`getView()`方法不对。它不回收视图。这是你必须解决的第一个问题。然后，如果您想通过使用 ViewHolder 设计模式来提高该方法的性能，请查看本[教程](http://developer.android.com/training/improving-layouts/smooth-scrolling.html#ViewHolder)

请遵循上述评论中给您的建议。

# python - 使用 Python 进行平台无关的文本散列

> ID：12047824
> 
> 赞同：2
> 
> 时间：2012-08-21T02:45:44.523
> 
> 标签：python, hash

Python 的 stdlib 或额外包中是否有任何函数可以从独立于平台和架构的文本生成一致的哈希？

我一直在使用这段代码：

```
import hashlib

def get_text_hash(text):
    h = hashlib.sha512()
    if not isinstance(text, unicode):
        text = unicode(text, encoding='utf-8', errors='replace')
    h.update(text.encode('utf-8', 'replace'))
    return h.hexdigest() 
```

但我发现它在 Fedora 16 和 Ubuntu 12 上为相同的文本返回完全不同的哈希值。

编辑：这是重现问题的代码：

```
#!/usr/bin/python

import hashlib

def get_file_hash(fin):
    """
    Iteratively builds a file hash without loading the entire file into memory.
    """
    if isinstance(fin, basestring):
        fin = open(fin)
    h = hashlib.sha512()
    for text in fin.readlines():
        if not isinstance(text, unicode):
            text = unicode(text, encoding='utf-8', errors='replace')
        h.update(text.encode('utf-8', 'replace'))
    return h.hexdigest()

def get_text_hash(text):
    """
    Returns the hash of the given text.
    """
    h = hashlib.sha512()
    if not isinstance(text, unicode):
        text = unicode(text, encoding='utf-8', errors='replace')
    h.update(text.encode('utf-8', 'replace'))
    return h.hexdigest()

image_content = '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x002\x00\x00\x009\x08\x06\x00\x00\x00t\xf8xr\x00\x00\x00\x01sRGB\x00\xae\xce\x1c\xe9\x00\x00\x00\x06bKGD\x00\xff\x00\xff\x00\xff\xa0\xbd\xa7\x93\x00\x00\x00\tpHYs\x00\x00\x1e\xc2\x00\x00\x1e\xc2\x01n\xd0u>\x00\x00\x00\x07tIME\x07\xdc\x08\x15\r0\x02\xc7\x0f^\x14\x00\x00\x0eNIDATh\xde\xd5\x9aytTU\x9e\xc7?\xf7\xbdWkRd\x0f\x01\x12\x02!\xc8\x120,\r6\xb2#\x10\xa2(\xeeK\xdb:n\xd3\xca\xd0\xb46\x8b\xf6\xc09=\xd3v\xdb\xa7\x91\xb8\xb5L\xab\xe3\xb8\xb5\x8c\xbd\x88\x83\xda-\x84\xc4\xb84\x13\x10F\x01\r\xb2%\x01C \tY\x8a$UIj{\xef\xce\x1f\xaf\xaa\x92\x90\x80@\xc0\xa6\xef9uRU\xa9\xba\xf7\xf7\xbd\xdf\xdf\xfe+\xb8Xk\xc1\x8aD\xe6/K\x03 \x7f%\x17{)\x17kcUU/s%\xa6\xbce[\xf8h6\x9b\xd7B\xfe\x8a\x7fL \xe9)I\t\xd3\'O\x9c-\xe2\x07\xfc\x89\x9c\xd9N6\x17\\Tf.\x1a\x90\xe1\x19\xa9\xa3\xe6\x8d\x19\x84\x96>f\x02#\xe6l\x02`\xf3ZX\xb0\xe2\x1f\x08\xc8\x84\xfb\xfb\xa5\xc6\xc7.\x9c;&\x1d\xabE\x95d\x8c\x9f\xc1\r\xbfx\x95\xf4\\\x85\xc2\x82\x8b\x02F\xb9\x80\xc6M\xcc\xf5\xab\x01p\x0eI\x9f1kl\xd6\xeca)\xfd\xb0)\x8a@\xb3\n\x06\xe4\xdc\xcb\x15\xb7\xad\xe1\xca\x1f:L0\xcb\xb9\xf4V\xd7\x1b\xce\xbec\xfe\xea7\x8bO\x18R\xca\x0f\xcb\xdd\x86kU\x89d\xd9\x16\x83\xe5E\x92%\xefHnyr#\xdf\xbb%\xbd\xf3\xbb\x17\x06\x90\xda\xe7\x1d\xf2W@a\x81\xf9|\xe6OV\xad\x7fz\xc9\xb3?\xbe\xe6\xfbI\xfb\x1b\xda\xe5\xafK\xbe\x11_\xd7y\x91\x08\x01H4\x9b\xc0\x95<\x12W\xf2\x1d$\x0fm\xe6\xc8\xce\xddTl7/\xa2b[\x9f\xc4\x10\xe7\xcd@D\xf8\xa1\xb7*\xd6\x9c\xac\x01\xb9C\x07\xbc\xf8\xdc\xe2E\x0bs\xb2\xd2)>\xe4f\xcb\xc1&^\xdfy\x8c\xa0n`\xe2\x08/)%B\x08:Z\xe1D\xf9\x0e\x02\xde\xd5H\xb6q\xb2\xdaO\xe9\xef\x8d\xef\x96\x91\xc8\xed\r\xbfcX\xde\xeds\xef\xbf\xe1\xca\xb1\x7f~n\xf1\xf5cGe\xa4\xcaV\x7f\x88=5mB\x02\xfb\xeb\xdb\xf0\xfaC\xdd\x81\x880;\x16\xbb ~`:V\xe7\xdd(\xea-\xc4$\xda\xc9\xc8m\xa1b[C\xf4\xb2\xce\x81%q.*\xe4Tm\xb4\xff\xf5\t`J\xf2e\xf7\xdf\xf0\xf0\xe2k\xa7\xdc>m\xf4\x90\xec\xef\rO\x07\x90\x80\x08\xea\x06\xaf}QGY\x8d\x87\xff\xfa\xec\x18\xbe\xa0\xde\x1dH\'3 \x84\x0c\x8b \xf0{\xc1\xd7Z\x83\xbbz\x03u\x07\xd6\xb2m\xfd1~\xf0[p\x1f\xedd\xbf\xcf@\xf2W\x9a1\x00`\xd2\x8f\xee[ro\xfe\x13\x8f\xdd<+e@\xa2K\xd5T5\n\x02\xe0\xbd\xaf\x1b\xa9h\xea\xe0\xc5\xd2\xa3T4\xb4\x99\xef\x8a3\x1c\x13\x05\x84@J0t\x89\xbb\xba\x9e\xe3e\x8fQ\xb2\xee\r\xf3\xfc\xe5\xb0\xf9\xa9>\x00\xe9\n`\xce\xc3\xc9C3\x07\xbc\xf9\xc6\xb2[\x17L\x1f3T\x86\xd5]tj\x0b|\\\xd9\xcc\xd7\'\xdax\xb7\xac\x8e\x92\xfd\x8d\xa0\x9d\x87w7\x81A[3\xd4\xee[G[\xd3c|\xf8|;\xf9\x8f\xc2\xe6\'\xcf\xc3F\xba\x80p,Z5\xfb\x9f\x17^\xf9\xde\x7f?z\xc7\xe4Q\x83S\x91R\n\x11\x96^\x08AP\x97|v\xb4\x95/k\xbd|x\xa8\x91\xc2\xb2z\xb0\x9c\xa7C\x8c\xb0gs\x803~20\x82\xd4\xecR\x8a\x9f\xf5\x90\xff(T\x94\x9e\x03\x90\xaeL,X\xb1d\xdd\x92\x1b^\\~\xe3\x8cA\t\xb1\x0e\xd9\x95E!\x04\xed\x01\x9d\x8f\x0f7SV\xd7\xc6\xa6\x03\rl\xda\xd7\x00\xea\x05\x88\xb3RJ\xacvp\xb8r\xd0\xacS\x89M\xfa\x94\x8f_p\x9f\xce\t\xa8\xbd\xc6\x85\xcda\xe3\x9a\xb1\xf4\xf1\xa2\xb5K~y\xf3\xb4\xb1\xb16\x8b&\xc3L\x10yT7\xfb\xd8t\xc0MM\xab\x9f\xff\xf9\xea\x04\x1f\x957u\xbf\xd5>\x05\x06a\xda\x8cj\x01g|\x06\xd6\x98\xd98b?\xe0\xd3\x97[X\xb0\x1c*\xb6\x7f\x0b\x90\x08\xda\xbc\xe5K\x8b\n\x96<>o|\xb6\x85\x88\xc9\x86=g\xc8\x80]\xc7\xbd|\\\xd9\x8c\xc7\xa7\xf3\xf2\xf6j>\xafj\x06E\\\x18\x10\xdd]\xb5\x00!q\xc6\xf5\xc7\xea\x1cMB\xfa\x07|\xf4\x1f\xbeS\xc1\xa8=\x02]\xc56\x1c\x8bV\xcd}\xe6\xa1\xeb_\xbcm\xfa\xe51\x11\x00B\x08tCR\xe7\t\xf0Ie3\xbbk\xbcT6\xb5\xf3\xfc\xd6*\xaa\xdd\x1d\x17F\x9d\xce\x04HQA\xb3g#uH\xc9,\xc1\xea\xeaf/j7\xbb(,@,X\x9e\xb4h\xfa\xc4\xf7V\xdf6{\x80\xd3\xa6\xc9\x88Q\xd7\xb4\xf8\xf9\xbfc\x1evV{\xa8hj\xa7p\x7f\x03\x1b\xbf:A{P\x07\xe5"\x82\xe8b5Xl\x02_\xcb4B\xa1=\x14\xae=\xc0\x82\x95Q\r\xd2\xba~\x0e\xc0\xe9\x8a{\xfd\xba9S\x86%\xc4\xd8$ \xaaN\xfa\xf8\xaa\xd6K\xbd7H\xc8\x90\x94\x947Rt\xb0\x89\x96\x8eP\xf4;\xdf\xd1\x12\x08Eb\x8b\x15\xd8b~\xcfU\xff\x92I\xe1\xda\x93\x91t\xa9\xbbB\xcfX|\xfd\xac\xebn\xda\xf8\x83\xe99RS\xa4\xe8\x08\x1a\x84\x0cS\xd8\xc3M\xed\xbc\xf5E\r\r\xde\xc0\x85\xb5\x83s\x89/\x8a\nMU\x12_\xb3\xa0\xa5\xfe\x1d6\xad\xb9\xd94\x89\x95(]\xd2h\x8d\xb4\xe1\x05\xce\x84\x14\xfc\xc1\x90hj\x0bR\xef\r\xf0u\xad\x97u[\xabx\xee\xa3\xc34x\xfeN \xa2\x9eP\x824L\xe3w\xc4/`\xfe#SM\x90\x06\x1a"\xac\xdfW?v\x1f\xfd\xb32>)o\x94\r\x1e\x9f\xf0\xeb\x065->\x1a[\xfcf\xf9\xa5*\x7f?\x10\x91e\x18 u\x90R`\xb1\xc4`s=H\xca\x88mly\xcaL1\x18\xb70\x86\xb1W\xbfM\xf2\xd0|\x84\xd2\xa9\xfa\x82\x0b\x17\x17.\xc4\n\x05\xa0\xe9\x1b\x08\xf9\xcd\xd7A\xdfQ<\x8d\x0b)z\xa6\xcc\xa4\xa3\xff\x8818\xe2\'\xa1\xa8\xa6\xd0\x8a\xe8\x8c\t\x97\n\x08\x80\x90\x0f\x8c`\xe7\xe5*\xea`l\xb1S\x99\xf6O(dM\x82\xf8\x81\x13\xd0\xac\xc9\\\xaaKJ\xf3\xe1o\x03#Z\x16HT\x0b(\xcau8\x13\x1d\nC&\xd9\xd1,Wa\x8b\xe5\xbb\xf6\xa7\xe7d\xe8z\x10\xda\x9b;\xf5]J\x11f\xe5*\xac\x0e\xa7B\xbf\xfe6T\xeb,T\x15$\xe2\x92d\x03\x01\xdeFS\xad"\xaa\x1eaE\xb3X\x91r\xa2\x82\xaa%a\xb1\'\xf5\xa1\x82\xbf\xf8l\xf8\xbd\xe0m \xeaa\xbb\x06I\xd5\x02\xd2\x98\xa1\xa0\x07Ga\x8b\x01y\x89\xa9\x95\x0c\x8b\xa3\x07\xc0]\xd5\x1b\x88p\x11\xa6\x82\xa2\xe6*\x18F&\x16; \xc5%i\x17\xee\xea\xae\x06\xde{\x11\xa6hY\nR&\xa3Z/AOe@s\r\x04\xda\xbf5\x97DQ\x924\x90j\x9fc\x85\x94=\xf6\xeefo\xe7\xb2\x7f\xa4f?Y\r\xbe\x96p9"z\xdf7\x9a\xc3k\x0e\xed\xbc-\xdc\x90(\xaa`p\x82\x9d\x1bF\xa72wD"\xd9\xc9N\x12\x9d\x164E\xe1PC\x1b\x7f\xfd\xba\x9e\re\r|s\xb2\x83\x0e\x9fn\xa6:\xa7o\ru2\xe1>\n\x1d\x9e\xce\xf2 |Qi\t1\xf4\xb3\xdbh\x0f\x049\xd1\xd2N0\xa8\x9b\x81\x1bEj\x08\xbc\xe8!P\xb5\xb3\x07\xa1\x1b$\xbbl,\x9d\x96\xc1\xe2\xa9\x19\xa4\xc4\xf4T\xcd\xc9\x83\xe3\x98<8\x8eU\xf3\x86\xf1\xa7\xdd\xb5\xbc\xbc\xa3\x86\xd2\n\xb7Y\x01\x9d\n&\xf2:\xe8\x83\xe6\xe3\x10h\xeb\x04\xe1\x0f\x92\x96\x1a\xc7\x8f\xe6\x8c\xe5\xa6+\x863b`"\xc7\xdc^6|v\x88\x7f\xdb\xb0\x1d\x7f0\x04\xe0S\x199{(\xae\x94\x1b\xd1\xac\xf2\xac\x1c\xb0\x94\x0cJp\xb0\xf1\x9e\\~8q 1V5\xda\x05\xed\xad\x7f`Q\x15\xc6\r\xea\xc7\xa2\x9cT\xfa\xc7\xd9()w#u#|\x93\x116\x14\xf0yLu\n\xf9\xcd\xd7R\x82?\xc8M\xd3G\xf3\xdaCy\xdc:e\x04\xfd\xe3b\xd0\x14\x85\xc4\x18;S/\x1bHK{\x80\xed\xfb\x8e\x81\xe0\x1b\x05E\xad4\rJ\x9c\x15\x08!\x04\x1f\xdc?\x9e)C\xe2\xbb\xb5rO_r\x9b+)\xc6\xc2\xb2\x99\x99\x1c^5\x9d\t\x83\xe3 \x14n\xf3*\nxN\x98\xc9\xa0\x1e\x0exRb\xb7j\xac{(\x8f?,\xbd\x9a\x9c\xf4\xa4\xe8Y]\xcf\xbcf\xc2\x10\x12R\xe2!\xd0Q\xa9\xa0h&\x90\xf0\x06g4\xc2\x90\xc1\xbf\xe7e\x91;\xd0\x15\xddT\x9c\x83!K)\x19\x9c`\xe7\x8b\x9f~\x9f\x9f\xe7g\x13g\x05\xea\x8f@Km\xd4\xee\xac\x9a\xc2\x15\xc3\x07\xf0\xf9\x13w\xb2d\xfe8,\x9a\xda\xe3\xac\xc8\xdf\xf4\x04\x97L\x8dsA\xc8\xbfK\xa3\xbd\xb9\x03G\xdc\x1e\xa41\xee\xcc\xadMHK\xb0\xb3\xfa\xaa\xacs\x06\xd0\xbd\xc3c\xde\xe6/\xf2\x861g\xb0\x9d\x17\x8a\xfcl\xaf\x80@\xc8`tz\x12\xb7^q\x19\x0f\xce\xbd\xbc\xdb\xcd\x9f\xee,\x87U\xc5*$\xa8\x96\x8f5\xbc\x8d>\xe2\x07}H\xd0?\x0e\x8b\xed\xf4v\x122\xb8}|\x1a\xaa"\xce\xa8N\xe7\x02f\xe6\xa8AL\xcaJ\xe5h\xa3\x07\xdd0\x18\x98\x10KB\xac\xfd[U6\xb2\xdauEH#\xd4\x82\xa1\xeeU\xd8\xfaj\x08\xbfg+\x81\xb63g[\x86d\xea\xd0\x84\xf3f\xa370\x00N\x9b\x85\x91\x83\x12\xc9\xc9H\x8e\x828\xcb3\xe4\t\x8f\x1f\x9f\xaf\xa3\x98\xc6\xea\x0e\xd3\xe76T\x96\x91\x90\xbe\x17)\xc7\x9c6\x80II\xb2\xd3\xd2\xe7.hDH\xdd\x90\x1c\xacu\xf3R\xc9Wl\xd8q\x08\xab\xaa\xf2\x93\x05\xe3\xb9gf\x0e\x89\xb1\xf6\xb3aD\x1c\xabk\xa0\xaa\xee\xe4\xfb\xecx\xc5g\x02\xd9\xfa\xda\x11R\x87\x97\xe0J\x19\x8d\xa2\x89^\x99\x11\x82\x86\xb6`\x9f@D\x04\xab\xa8;\xc9K%e\xfc\xae\xf8K\xda=\x1d\xa0\x99\xed\xb5\xe5/\x17\xb3i\xcf\x11\xd6\xdd;\x87\x91\x03\x13M\xe0B\xf4\x10FJI dp\xa4\xaei\x7fp\xfb\xe7\xa5\x00Jt\x90\xd9P\xf1\x9fx\x1a\xda\xa2>\xbcG\x1a \xf80\xdc\xdb\x95R\x9e\xb7:\xfdj\xe3\x0e\xf2\xd7\xbcK\xc1{;i\xef\x08\x98 "\x91\xddi\xa3d\xcf\x11\xae]\xfb.\xa5\x07\x8f\x9b\xc0Os\x96\xd7\x170\xde(\xdaQD\xf5\xdb\x87\xcdNc\xa4\xd7[\xb5\xbb\x81\x01\xa3\xd2I\xcc\x98\x8c\xa2\xc8h\x05\x16Y\x8a`\xd7\xb1VV\xce\x1e\x82US\xce\xca\x18\xbb~\xa6\xf4`\r\xf9\xbf\xd9\xc8\x86\x9d\x87h\xf2t\x80\x94\xb8\x9c6r\x87\xa4\x90\xd9?\x0e_ \x14\x05\xe6\xf6\xfa\xd8\xf2\xd5Q\xa6\x8d\x18Dz\x92\xab\xdb>\xe1\xe7\xf2\x95\xe2]-\xeb\xd7\xac_L\xfb\xc1F\xf2V\x9c\xc2\xda\xe5\xf3,\x0c\x9bYK\xc6\xe5Ih\xb6\x9e\x92\xea\x06\xf3F&\xf3\xee}\xe3p\xf62\xff8\x15\\ \xa4Ss\xb2\x8d_\xbe\xb3\x9dW\x8b\xf6\x80U\x03!\xc8\xee\x1f\xcf3w\xcfb\xe1\x84\xacn\xdf\x7ff\xd3.\xfe\xf5\x8f\xff\x8b?\xa4\x83n02#\x89w\x1e\xb9\x96\xd1\xe1\x80\x18I\x1b\xf7V70\xf6\xfe\'\xd7P\\\xf03\xf2V\xc2\x96\xb5]{\xbf+\xa0t\xbdA\xe6\xb8]\xf8=w!\x10\x18\xba\xc4\xd0\x05F\x08\xf4\x10\xc8\x10\x87k\xdc\x94\xec?N\xbaK%#\xc9\x85\xd6\xa5y\x1d\x01\xd1\xd0\xda\xce\xd6\x03\xc7y~\xcb\x1e\xee{\xa9\x88\xcf\x0f\x1c\x07\x9b\x05$\xdc~\xe5H6\xfd\xecFl\x16\x957\xff\xb6\x8f?\x94\x1e\xa0\xb8\xac\n\xb7\xd7\xc7=3G\xb3\xb7\xba\x89}\xc7\xdd\xa0\x08\x1a\x1b=\xfc\xad\xbc\x961\xe9Id\xa6\xf4\x03\xe0\xa3\x83\'\xc4\xddk\xff\xf8I\xd3\x9f\x7f~\x17\x00\xc3\xa7@\xc5\xf6S\x18\x89\xccF\x16\xaeZ\x8d\xc3\xf5+4\x9b\x99\xf7D\xab\xb3p7C\xd7M\xb5\x18\x9c\xcc\x98A\x89$\xba\x1ch\x9a\x8a\xdf\x1f\xa4\xb2\xbe\x85\xc3\r\xad\x94\xd7\x9d\xc4\xe3\xf1\x99\xe37! \xa43/w\x08E\xabo\xe6\xad\xd2\x03,_\xff)u\x8d\xad\x9d\x9ak\xd5x\xfb\xe1\x85\xe8Rr\xebs\x1ft\x89_:\xa9\x89\xb1\x8c\xcfL\x95zL\xb2\xd8{\xa0\xfcH\xdd\xde=3\xd8\xba\xeeX\xd71yw a\x9a\x98\xbb\xd4\x89#\xeeu\x9c\xf1\xb7D\x07\x95g0\xe2Nu\x92\x18\x86\xec=\xb35$)qN&g\xf5\xa7\xb0\xac\n]7:\xff\x1f6\xe8\xf4\xc4X\xfc\xbaNC\xab\xafg\x91\xd5/\r\xf4\x90\x87\xda\x03\xd7\xb2\xe97\x9f\x92\xb7\x02\xb6\x14\x9ca\x18\x1a\x19\xbbM\xbd\xd7E\xd2\xc0\xcd8\x13\xa6\x86=\x99\t\xe8l\x83\xa1\x94\x9d\x85\x90\xe8\x92\xe9\x1a\xf2\xf4\xb3\x94\x88\x87\x92\xd2L&#\x13_W\xaa@\xb5z8\xb2\xf3\xa7\x14\x16\xbc\xd2\xdbW{\xee\xb8y-\xe4\xad\x80\xd2\xd7<4\x1e\xcf\xa7\xad\xf9/\xe1\xacT\x84\xd99+\x10\x0e\xab\x85I\xc3\xd3\xb0j*\x04\xf5N\x17\xdb\x15DW\xc1u\x03\x02!\x92\\\x0e\xee\x9c>\n\x0cC\xa2j\x92\xb8\x01\x02\xc3h\xe1\xc8\x8eeQ\x10\xbd\xfc\xee\xab\xf7ah\xe56\xc8[\x0e\x9f\xbc\x10`p\xee\xfb\xe6\xcd\x8a\xe9\xa8\x96\xb3\xa3C\xc2\xfc\xdc!lxd!\xb3G\xa5S\xef\xf5QY{\x12:\xfc\xa6\xc0\xba\x0e!\xddL\xe5\x03A\xd0%\x99\x03\x13y`n.O\xdf5\x93E\x13\x87\xf1\xf4\xa62A|\x9a\xa0\xad\xe9\x10\xf5\xe5w\xb2\xb9`cd\x84@\xe1\xda^\x86\'gZ\x11c\x9a\xbfTA\xb1/\xc2\xee|\x1dG\\?\xa0g\x9c9\x85\x91\xac\xfe\xf1\xbc\xbfb\x119\xe9I\xf8\x02!Z;\x02\xec?\xee\xa6\xba\xa9\x15\xb7\xc7\x87aH\xfa\xc5X\xc9L\x89#;-\x9e\xfeqN\xec\x16\x8d\x17\x8bw\xcbU\x9b\xca\xc5I\xbf\x02\xf5\xe5\xef\xe3mZ\xcc\x96\xa7j\xba\xc9\xd3\xeb\x14\xe8\xdbV\xfe\n\x90\n\x14>\t\xb3\x7f\x9c\x8c3\xf65\x1cqW\xa1Y\x1d\xdd:~\xa7\x023\x0c\x84\x10\xac\xbcv\x12\x0f\xcc\x19K\x8a\xcb\x81USP\x15%j\xdf\xbaa\x10\xd4\r\xdcm~\xde\xff\xe20\xcf\x17\xef\xa5\xd2c\t\xe1on\xa2v\xdf\xe3\x14\xff\xf6w\xe1\xc1,l\xe9\xcb/\x1f\xba\xb1\xd3\x85\xd2\xf9\xcb\xe6a\x8fy\x00\x8bc\x06\x8a\x9a\x86\xaau\x02\xea\xda\x97\x95\x12\x02!\x90\x92!\xe9I\x0cK\x8d\'\xc6n&\x9e\x1d\x81\xa0lm\x0f\x88\x1ao\x90\xea\x9a\x16\xd3\xb8m\xf6]\xb4T\x7f\xc07\xbb\x9f\xe5\xcb\xbf\xb8\xcf\xa4J\xe7\x0f\x04\xe8\xe6\xf2.\x9b\xa90db.\xf6\x98\x19\x08\xe5\x1aTm\x0e\x8aEE\xb3t\x8f;]\xca\x80hW]\xb3\x85\xdf\x0b\x814\xaa\x11\xca\x16\x8c\xc0fj\x0el\xa7\xf4\xf5\xda\x1eg\x9d\xd5\x80\xf1|\xd6\xfceP\xf4\xb4\xf9|\xd6\x83\x02\xab\xd3\x81\xd5\x11\x83\x94\x93\x90\xc6,T\xcb8\x145\x1bEI\x02\xe1D\x08\x15)C\x08\xc5\x83P\xeb\x08u\xec#\x14\xdc\x89\xc5\xbe\x05\xa8\xa2\xb9\xa6\x83O^\n\xf4\xa5D\xf8\x7fM\xdd#\x1d\xf5i\xe0U\x00\x00\x00\x00IEND\xaeB`\x82'

fn = 'image.png'
open(fn, 'wb').write(image_content)

print get_text_hash(image_content)
print get_file_hash(fn)
print get_text_hash(open(fn, 'rb').read())
print get_text_hash(open(fn, 'r').read()) 
```

这是我在 Ubuntu 上的输出：

```
[user@ubuntu:~]# python --version
Python 2.7.3
[user@ubuntu:~]# lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.1 LTS
Release:    12.04
Codename:   precise
[user@ubuntu:~]# python test_hash.py
86f43abba8d46fe17cfb6dd1a986b1d086e81a5ad6e3d5c518dc10e8c7229dc366a4129275a609cda7b87cf0afaf82295421098159327e46b7541e2063341eb2
86f43abba8d46fe17cfb6dd1a986b1d086e81a5ad6e3d5c518dc10e8c7229dc366a4129275a609cda7b87cf0afaf82295421098159327e46b7541e2063341eb2
86f43abba8d46fe17cfb6dd1a986b1d086e81a5ad6e3d5c518dc10e8c7229dc366a4129275a609cda7b87cf0afaf82295421098159327e46b7541e2063341eb2
86f43abba8d46fe17cfb6dd1a986b1d086e81a5ad6e3d5c518dc10e8c7229dc366a4129275a609cda7b87cf0afaf82295421098159327e46b7541e2063341eb2 
```

这是我在 Fedora 13 上的输出：

```
[user@fedora:~]# python --version
Python 2.6.4
[user@fedora:~]# cat /etc/fedora-release 
Fedora release 13 (Goddard)
[user@fedora:~]# python test_hash.py
3d29b0b5ebf500f22b459e1888508d194ffd20707413b69730228e1bd124698f5596a6ef9aadf593b216dba3603e8e2a6871e49a23aadc1b4985bbba92275975
1f0afa06c96447bb15a0389c738e14faa2156bc4a71f03d0300eab6e4386b46cfc7ea3514c6160a2be4213dc1fff80a7aac7e726f01807badd3b3d7edc4f8410
3d29b0b5ebf500f22b459e1888508d194ffd20707413b69730228e1bd124698f5596a6ef9aadf593b216dba3603e8e2a6871e49a23aadc1b4985bbba92275975
3d29b0b5ebf500f22b459e1888508d194ffd20707413b69730228e1bd124698f5596a6ef9aadf593b216dba3603e8e2a6871e49a23aadc1b4985bbba92275975 
```

这是我在 Fedora 16 上的输出：

```
[user@fedora:~]# python --version
Python 2.7.3
[user@fedora:~]# cat /etc/fedora-release 
Fedora release 16 (Verne)
[user@fedora:~]# python test_hash.py
86f43abba8d46fe17cfb6dd1a986b1d086e81a5ad6e3d5c518dc10e8c7229dc366a4129275a609cda7b87cf0afaf82295421098159327e46b7541e2063341eb2
86f43abba8d46fe17cfb6dd1a986b1d086e81a5ad6e3d5c518dc10e8c7229dc366a4129275a609cda7b87cf0afaf82295421098159327e46b7541e2063341eb2
86f43abba8d46fe17cfb6dd1a986b1d086e81a5ad6e3d5c518dc10e8c7229dc366a4129275a609cda7b87cf0afaf82295421098159327e46b7541e2063341eb2
86f43abba8d46fe17cfb6dd1a986b1d086e81a5ad6e3d5c518dc10e8c7229dc366a4129275a609cda7b87cf0afaf82295421098159327e46b7541e2063341eb2 
```

请注意，该问题似乎仅限于 Fedora 13 或 Python 2.6。什么会导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:00:08.423

我不明白你在这里试图用 unicode 做什么，为什么你使用`readlines()`二进制文件，甚至你的文件在你阅读它时是否会被刷新（你打开一个文件并写入它，但在读取之前您既不会关闭也不会刷新它）。您的哈希值都不正确，或者在我看来是这样。

```
~/coding$ sha512sum image.png 
fc704b0cbc532793ba727df9520e8046adf079a80faaffc2d4741ea61a7a506cb79e31ee4338c17d0acf77a9290a969ac63c0e672be09e5c8fc4dcd32c8b62ee  image.png
~/coding$ python
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import hashlib
>>> hashlib.sha512(open("image.png").read()).hexdigest()
'fc704b0cbc532793ba727df9520e8046adf079a80faaffc2d4741ea61a7a506cb79e31ee4338c17d0acf77a9290a969ac63c0e672be09e5c8fc4dcd32c8b62ee' 
```

这甚至适用于 2.5.6：

```
Python 2.5.6 (r256:88840, Jul 12 2012, 12:21:58) 
[GCC 4.6.3] on linux3
Type "help", "copyright", "credits" or "license" for more information.
>>> import hashlib
>>> hashlib.sha512(open("image.png").read()).hexdigest()
'fc704b0cbc532793ba727df9520e8046adf079a80faaffc2d4741ea61a7a506cb79e31ee4338c17d0acf77a9290a969ac63c0e672be09e5c8fc4dcd32c8b62ee' 
```

如果您甚至将前几个字节`image_content`与您在 (say) 中实际编码的内容进行比较`get_text_hash`，您就会看到不同之处：

```
>>> image_content[:6]
'\x89PNG\r\n' 
```

现在您将其解释为 unicode 字符串并丢弃任何您不理解的内容：

```
>>> unicode(image_content[:6], errors='replace', encoding='utf-8')
u'\ufffdPNG\r\n' 
```

然后你再次编码：

```
>>> unicode(image_content[:6], errors='replace', encoding='utf-8').encode('utf-8')
'\xef\xbf\xbdPNG\r\n' 
```

这是您要获取的最后一个哈希值，这显然是与原始字节串不同的字节串。

为了解决问题的细节（上面的评论太长了）：正如@gnibbler 立即指出的那样，您询问的最终字符串更有可能是不同的哈希值。只需输入一些打印语句来比较不同版本的操作，您就会很快发现问题。（我的猜测是 unicode 编码的不同结果，因为它的价值。）

# java - Java - 极小极大算法问题

> ID：12047835
> 
> 赞同：1
> 
> 时间：2012-08-21T02:48:10.013
> 
> 标签：java, minimax

我正在制作一个用于练习制作课程的 tictactoe 板，但我的算法遇到了问题。它似乎在返回最好的移动进攻，但它并没有起到防守作用。我不知道我在哪里搞砸了，似乎找不到它。我在这里查看了很多关于它的东西，并将它与类似的项目进行了比较，但似乎仍然无法理解。这是我的代码。

```
package TicTacToe;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.Scanner;

public class Solution {

private static GameBoard currentBoard; 
private static Player botPlayer; 

public static void main(String[] args) {

    Scanner in = new Scanner(System.in);
    String player;
    System.out.println("ENTER bot: ");
    player = in.next();

    if(player.equalsIgnoreCase("X")) {
        botPlayer = Player.X;}
    else {botPlayer = Player.O;}

    String board[] = new String[3];
    for(int i = 0; i < 3; i++) {
        System.out.println("ENTER board: ");
        board[i] = in.next();
    }

        currentBoard = new GameBoard(3,3, board);
        List<Space> OpenSpaces = getOpenSquares(currentBoard);
        MakeMove(OpenSpaces);

    System.exit(-1);
}

public static List<Space> getOpenSquares(GameBoard GB) {
    List<Space> OpenSpaces = new ArrayList<Space>();
    for(int r = 0; r < 3; r++) {
        for(int c = 0; c < 3; c++) {
            if(GB.squares[r][c] == Player.Open) {
                OpenSpaces.add(new Space(r,c));
            }
        }
    }
    return OpenSpaces;
}

private static Space bestMove;
private static Space currentMove;
private static Space previousMove;

private static void MakeMove(List<Space> OpenSpaces) {
    if(OpenSpaces.size() == currentBoard.Size) {
        Random random = new Random();
        bestMove = new Space(random.nextInt(2),2);
    } else {
        for(Space child: OpenSpaces) {
            currentMove = GetBestMove(currentBoard,botPlayer);
            if (currentMove != null){

            }else{
                continue;}
            if(previousMove != null && previousMove.Rank < currentMove.Rank ||
                    previousMove == null && currentMove != null) {
                bestMove = currentMove;
            }
            previousMove = currentMove;
        }   
    }
    if (bestMove != null) {
        currentBoard.squares[bestMove.X][bestMove.Y] = botPlayer;
        System.out.println("the best move is: " + currentMove.X + " " + currentMove.Y);
    } 
}

private static Space GetBestMove(GameBoard gb, Player p) {
    Space bestSpace = null;
    List<Space> cloneOpenSpaces = getOpenSquares(gb);
    GameBoard cloneBoard = null;
    cloneBoard = gb.Clone();
        for(Space Open: cloneOpenSpaces) {
            cloneBoard = gb.Clone();
            Space newSpace = Open;
            cloneBoard.squares[newSpace.X][newSpace.Y] = p;
            if(cloneBoard.Winner == Player.Open && cloneOpenSpaces.size() > 0) {
                Player InP;
                if(p == Player.X) {
                    InP = Player.O;
                }else {
                    InP = Player.X;
                    }

                Space tempMove = GetBestMove(cloneBoard, InP);
                if(tempMove != null){
                    newSpace.Rank = tempMove.Rank;
                }

            } else {
                if(cloneBoard.Winner == Player.Open) {
                    newSpace.Rank = 0;
                }else if(cloneBoard.Winner == Player.O) {
                    newSpace.Rank = -1;
                }else if(cloneBoard.Winner == Player.X) {
                    newSpace.Rank = 1;
                }

            }
            System.out.println(newSpace.Rank);
            if(bestSpace == null || 
                    (p == Player.X && newSpace.Rank < ((Space)bestSpace).Rank)||
                    (p == Player.O && newSpace.Rank > ((Space)bestSpace).Rank)) {
                bestSpace = newSpace;
            }               
        }
    return (Space)bestSpace;
}

public static enum Player {
    X (1),
    O (-1),
    Open (0);

    private final double value;
    Player(double value){
        this.value = value;
    }
}

public static class Space {
    public int X;
    public int Y;
    public double Rank;

    public Space(int x, int y) {
        this.X = x;
        this.Y = y;
        Rank = 0;
    }

    public Space() {
    }
}

public static class GameBoard {

    public int Rows;
    public int getRows() {
        return this.Rows;
    }
    public void setRows(int rows) {
        Rows = rows;
    }

    public int Columns;
    public int getColumns() {
        return this.Columns;
    }
    public void setColumns(int columns) {
        Columns = columns;
    }

    public Player[][] squares;

    //public Player[x][y] 
    public Player getPlayer(int x, int y) {
        return this.squares[x][y];
    }

    public void setPlayer(int x, int y, Player player) {
        squares[x][y] = player;
    }

    public boolean Full;

    public boolean isFull() {
        for(int r = 0; r < 2; r++) {
            for(int c = 0; c < 2; c++) {
                if (squares[r][c] != Player.Open) {return false;}
            }
        }
        return true;
    }

    public int Size;
    public int getSize() {
        return this.Size;
    }
    public void setSize(int size) {
        Size = size;
    }

    public List<Space> OpenSquares;
    public List<Space> getOpenSquares() {
        List<Space> OpenSquares = new ArrayList<Space>();
        for(int r = 0; r < Rows; r++) {
            for(int c = 0; c < Columns; c++) {
                if(squares[r][c] == Player.Open) {
                    OpenSquares.add(new Space(r,c));
                }
            }
        }
        return this.OpenSquares;
    }

    public Player Winner;
    public Player getWinner() {
        int count = 0; 

        //columns 
        for (int x = 0; x < Rows; x++) 
        { 
            count = 0;
            for (int y = 0; y < Columns; y++) {
                count += squares[x][y].value;
            }
            if (count == 3) {
                return Player.X; 
            }else if (count == -3) {
                return Player.O; 
            }
        } 

        //rows 
        for (int x = 0; x < Rows; x++) { 
            count = 0; 
            for (int y = 0; y < Columns; y++) {
                count += squares[y][x].value; 
            }
            if (count == 3) {
                return Player.X; 
            }else if (count == -3) {
                return Player.O; 
            }
        } 

        // Diagonals right to left 
        count = 0; 
        count += squares[0][0].value; 
        count += squares[1][1].value; 
        count += squares[2][2].value; 
        if (count == 3) {
            return Player.X; 
        }else if (count == -3) {
            return Player.O; 
        } 

        // Diagonals left to right 
        count = 0; 
        count += squares[0][2].value; 
        count += squares[1][1].value; 
        count += squares[2][0].value; 
        if (count == 3) {
            return Player.X; 
        }else if (count == -3) {
            return Player.O; 
        }
        return Player.Open; 
    }

    public GameBoard Clone() {
        GameBoard b = new GameBoard(Rows,Columns);
        b.squares = (Player[][])this.squares.clone();
        b.Winner = getWinner();
        return b;
    }

    // Class initializer 
    public GameBoard(int boardRows, int boardColumns, String[] board) {

        // Set the dimensions 
        Rows = boardRows;
        Columns = boardColumns;

        // Create game spaces 
        squares = new Player[Rows][Columns];
        for(int r = 0; r < Rows; r++) {
            for(int c = 0; c < Columns; c++) {
                //squares[i][n] = Player.Open;
                if(board[r].charAt(c) == 'X') {
                    squares[r][c] = Player.X;
                }
                if(board[r].charAt(c) == 'O') {
                    squares[r][c] = Player.O;
                }
                if(board[r].charAt(c) == '_') {
                    squares[r][c] = Player.Open;
                }
            }
        }
        this.Winner = getWinner();
        this.OpenSquares = getOpenSquares();
        //Size of the board
        this.Size = Rows * Columns;
    }

    // clone Class initializer
    public GameBoard(int boardRows, int boardColumns) {
        // Set the dimensions 
        Rows = boardRows;
        Columns = boardColumns;

        // Create game spaces 
        squares = new Player[Rows][Columns];
        for(int r = 0; r < Rows; r++) {
            for(int c = 0; c < Columns; c++) {
                squares[r][c] = Player.Open;
            }   
        }
        this.Winner = getWinner();
        this.OpenSquares = getOpenSquares();
        //Size of the board
        Size = Rows * Columns;
    }
}
} 
```

所有的类都在底部。提前感谢您的任何帮助和更正。:)

我在下面的代码中使它递归，虽然我仍然无法计算得分.. 如果值为 1、0 或 -1，那么如果有多个具有相同值的移动，它将只取第一个可能不是最好的举动“阻止。

```
private static Space GetBestMove(GameBoard gb, Player p) {
Space bestSpace = null;
List<Space> cloneOpenSpaces = getOpenSquares(gb);
GameBoard cloneBoard = null;
cloneBoard = gb.Clone();
    for(Space Open: cloneOpenSpaces) {
        cloneBoard = gb.Clone();
        Space newSpace = Open;
        cloneBoard.squares[newSpace.X][newSpace.Y] = p;
        if(cloneBoard.Winner == Player.Open && cloneOpenSpaces.size() > 0) {
            Player InP;
            if(p == Player.X) {
                InP = Player.O;
            }else {
                InP = Player.X;
                }

            ***Space tempMove = GetBestMove(cloneBoard, InP);***
            if(tempMove != null){
                newSpace.Rank = tempMove.Rank;
            } 
```

测试结果如下

### 测试 1

```
ENTER bot: 
O

ENTER board: 
[ ][O][ ]

ENTER board: 
[ ][ ][ ]

ENTER board: 
[ ][X][X]

-1.0
-1.0
-1.0
-1.0
-1.0
-1.0
-1.0
-1.0
-1.0

the best move is: 0 2 
```

### 测试 2

```
ENTER bot: 
O

ENTER board: 
[ ][X][X]

ENTER board: 
[ ][ ][ ]

ENTER board: 
[ ][O][ ]

1.0
1.0
1.0
1.0
1.0
-1.0
1.0
-1.0
-1.0
1.0
-1.0
1.0
1.0
-1.0
-1.0
the best move is: 1 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T04:31:34.267

我没有运行你的代码，但我想我可能知道你为什么会遇到问题。极小极大算法本质上是递归的。您查看每个开放空间，并为每个空间确定某种分数。我在你的代码中看到了这一点。但是，我没有看到等同于逻辑的递归“如果我移到这里，那么我的对手在下一轮会有什么选择”。请注意，您可以继续调用相同的评分函数，但对两个玩家的选项进行评分。这是计算变得密集的地方，也是剪枝之类的东西发挥作用的地方。假设我想向前看 3 步。假设最初有 5 个开放空间。对于 5 个开放空间中的每一个，我都会检查我的选项并给每个选项打分。然后我假装移动到那里，通过计分功能发送新的棋盘，并假设我的对手将采取剩余 4 个可能的移动中得分最高的移动。然后我假装他移动到那里，然后我再次通过计分功能运行棋盘，现在上面有 2 个假设的移动。你继续这个设定的“深度”，或潜在移动的数量，并选择产生最高价值的移动，假设对手会按照你计算的那样做。

我意识到这是冗长的，但我希望在某个地方埋藏一点价值。看看你的代码，找出你在哪里得分（如果你看到胜利，接受它；如果你能阻止胜利，接受它；等等）。然后继续调用此函数，在其中不断添加虚假/潜在动作（得分函数中具有最高价值的动作），一旦达到深度，您就可以简单地选择可能给您带来最有价值结果的动作。

基本上，在您的代码中，您应该`GetBestMove(...)`从`MakeMove(...)`. 但是，`GetBestMove(...)`应该反复调用自己，每次都用修改板；每次，它都会返回给定假设（或真实）棋盘的最佳棋步。我在您的代码中没有看到的是对 的递归调用`GetBestMove(...)`，以及随之而来的必要维护。这就解释了为什么你只会出现攻击性行为；它只看最好的立即行动是什么，而不考虑如果你采取行动你的对手可能会做什么！

如果我的假设是错误的，请提供一个测试用例，您期望在其中出现一些行为，但会得到不同的结果。

# html - MVC - 单击一个特定按钮时覆盖验证

> ID：12047836
> 
> 赞同：0
> 
> 时间：2012-08-21T02:48:28.050
> 
> 标签：html, asp.net-mvc-3

我有一个列出项目的表。我有一个围绕此表的表单标签。在此表中，我有向数据库添加新行的 ADD 按钮。我也有编辑一行的 EDIT 按钮。表单发布到控制器上的相同操作。

现在我需要在第一行添加一个过滤器行，这意味着我需要添加一个过滤器按钮来提交带有过滤器参数的表单。由于这仍然在主窗体中，我现在遇到以下问题：当我单击过滤器按钮时，用于添加按钮的输入在发布任何内容之前都经过验证。当用户单击过滤器按钮时，如何防止发生验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:21:09.383

确保过滤器按钮的类型是“按钮”而不是“提交”，并使用 ajax 进行过滤

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:38:04.040

如我所见，简单的方法是通过 js 触发提交：

```
.submit(); 
```

另一种方法是禁用该表单的验证：

```
$('#form').validate({
   onsubmit : false
}); 
```

或者

```
 $('#form').unbind('submit') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:07:45.287

我有一个建议。名称以不同的方式添加按钮输入并使用 javascript/ajax 添加行。发布时，添加按钮输入将不会被验证，因为它们具有不同的名称

# node.js - 当我尝试从 Mongoose 访问 MongoDB 数据库时，Node.js Express 应用程序冻结

> ID：12047838
> 
> 赞同：1
> 
> 时间：2012-08-21T02:48:35.267
> 
> 标签：node.js, mongodb, express, mongoose

我是 Mongoose 的新手，我正在尝试做一个简单的测试应用程序，其中涉及使用 Mongoose 以熟悉它。我可以很好地加载“/”页面，但是当我提交表单时，它会停留在“/”页面上，直到我终止进程。console.logs “之前”和“之后”打印，但期间从来没有。怎么了？

```
var express = require('express');
var mongoose = require('mongoose')
  , db = mongoose.createConnection('localhost', 'testmongoose');

var connectdb = function(execute) {
    db.on('error', console.error.bind(console, 'connection error:'));
    db.once('open', function () {
        execute();
    });
};

connectdb(function () {
    var postSchema = new mongoose.Schema({
        body: String
    });

    var Post = db.model('Post', postSchema);
});

var app = express();

app.configure(function () {
    //app.use(express.logger());
    app.use(express.bodyParser());
    app.use(express.static(__dirname + '/static'));
});

app.set('views', __dirname + '/views');
app.set('view engine','jade');

app.get('/', function(request, response) {
    response.render('index');
});

app.post('/result', function(request, response) {
    var text = request.body.text;
    console.log("before!");
    connectdb(function () {
        console.log("during!");
        var post = "test";
        post = new Post({body: text});
        response.render('result', {text: post.body});
    });
    console.log("after!");
});

app.listen(4000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T03:50:41.503

首先，由于`connectdb`是一个异步函数，它立即返回并稍后运行它的回调——这意味着你`console.log`的 s 的顺序将是“之前！” 然后！” 然后是“期间！” 一段时间以后。

也就是说，`connectdb`并没有真正为您服务。Mongoose 自动缓冲命令直到它连接，所以你可以把它当作一个同步接口：

```
var express = require('express');
var mongoose = require('mongoose');

mongoose.connect('mongodb://localhost', 'testmongoose');
mongoose.connection.on('error', console.error.bind(console, 'connection error:'));

var postSchema = new mongoose.Schema({
    body: String
});

var Post = mongoose.model('Post', postSchema);

var app = express();

app.configure(function () {
    //app.use(express.logger());
    app.use(express.bodyParser());
    app.use(express.static(__dirname + '/static'));
});

app.set('views', __dirname + '/views');
app.set('view engine','jade');

app.get('/', function(request, response) {
    response.render('index');
});

app.post('/result', function(request, response) {
    var text = request.body.text;
    var post = new Post({body: text});
    response.render('result', {text: post.body});
});

app.listen(4000); 
```

# javascript - 移动登录应用程序？

> ID：12047842
> 
> 赞同：0
> 
> 时间：2012-08-21T02:49:55.147
> 
> 标签：javascript, html, authentication, mobile

我需要创建一个适用于计算机和移动设备的网络应用程序。该应用程序将需要登录。我的理解是，如果我只创建网站的移动版本，那么我就失去了拥有手机图标的能力，并且用户每次都必须手动登录。

为了避免这种情况，我可以创建简单的 iPhone/android 应用程序，其唯一功能是存储登录信息并为用户提供一个图标以轻松访问该站点？那会是我最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:15:46.883

对于图标本身，对于 iPhone 有一种方法可以实现这一点，您必须在页面头部设置链接标签

# iPhone（和 Android 根据此[链接](http://webcache.googleusercontent.com/search?q=cache%3aFfz4TSa8qqIJ%3awww.mollerus.net/tom/blog/2010/06/web_app_homescreen_icons_in_android.html%20&cd=1&hl=en&ct=clnk&gl=us)）

第一种是按原样使用图标，添加的都是圆角。为此，我们使用此链接标签：

```
<link rel="apple-touch-icon-precomposed" href="img/icon.png"/> 
```

第二个选项使图标具有标准的 Apple 光泽：

```
<link rel="apple-touch-icon" href="img/icon.png"/> 
```

启动画面图像

```
<link rel="apple-touch-startup-image" href="img/splash.png" /> 
```

让应用全屏

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

# 黑莓

...不确定如何使用 html，但如果想为它制作本机应用程序... [检查此链接](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800440/How_To_-_Create_a_web_icon.html?nodeid=1487655&vernum=0)

# 一次性登录

您可以使用持久性 cookie 来实现此目的。只需在遥远的将来某个地方设置 cookie 过期时间，用户将在下次访问您的页面时登录。

# vim - 更正所有出现的拼写错误的单词

> ID：12047846
> 
> 赞同：11
> 
> 时间：2012-08-21T02:50:26.300
> 
> 标签：vim, spell-checking

有没有快速重复拼写更正的方法？

例如，在使用,后将每次出现的`teh`更改为更正第一次出现？`the``:set spell``z=`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T02:59:10.190

在使用 进行第一次更正后，`z=`例如使用 、使用*或更短**的*`:spellrepall`：`:spellr`。

# python - “超级”对象不调用 __getattr__

> ID：12047847
> 
> 赞同：19
> 
> 时间：2012-08-21T02:50:39.327
> 
> 标签：python, getattr

我将一个对象包裹在另一个对象中。“Wrapper”通过覆盖来访问“Wrapped”对象的属性`__getattr__`。这很好用，直到我需要覆盖子类的属性，然后使用`super()`.

我仍然可以直接访问该属性，`__getattr__`但为什么不起作用`super()`？

```
class Wrapped(object):
    def __init__(self, value):
        self.value = value

    def hello_world(self):
        print 'hello world', self.value

class Wrapper(object):
    def __init__(self, obj):
        self.wrapped_obj = obj

    def __getattr__(self, name):
        if name in self.__dict__:
            return getattr(self, name)
        else:
            return getattr(self.wrapped_obj, name)

class Subclass(Wrapper):
    def __init__(self, obj):
        super(Subclass, self).__init__(obj)

    def hello_world(self):
        # this works
        func = super(Subclass, self).__getattr__('hello_world')()
        # this doesn't
        super(Subclass, self).hello_world()

a = Wrapped(2)
b = Subclass(a)
b.hello_world() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T03:31:14.487

[据此，](https://lists.archive.carbon60.com/python/python/159397?do=post_view_threaded) super 不允许隐式调用“钩子”函数，例如`__getattr__`. 我不确定为什么要以这种方式实现（可能有一个很好的理由，而且事情已经很混乱了，因为超级对象有自定义`__getattribute__`和`__get__`方法），但看起来事情就是这样。

编辑：[这篇文章似乎把事情弄清楚了一点。](https://web.archive.org/web/20151123075156/http://www.gossamer-threads.com:80/lists/python/python/159393)看起来问题是`__getattribute__`隐式调用函数时忽略了额外的间接层。做`foo.x`相当于

```
foo.__getattr__(x) 
```

（假设没有`__getattribute__`定义方法并且 x 不在 中`foo.__dict__`）但是，它不等同于

```
foo.__getattribute__('__getattr__')(x) 
```

由于 super 返回一个代理对象，它有一个额外的间接层，这会导致事情失败。

PS`self.__dict__`检查你的`__getattr__`功能是完全没有必要的。`__getattr__`仅当您的字典中不存在该属性时才调用。（`__getattribute__`如果您希望它始终被调用，请使用它，但是您必须非常小心，因为即使是简单的事情`if name in self.__dict__`也会导致无限递归。

# android - Android：开发在“后台”运行的应用程序，如何？

> ID：12047848
> 
> 赞同：0
> 
> 时间：2012-08-21T02:51:00.283
> 
> 标签：android

我习惯于开发独立的应用程序，你点击，它运行，当你完成后，你退出。

我现在对处理一种新型（不确定这是否是正确的词）应用程序很感兴趣，并且想知道我应该如何去做。我不确定要研究什么，并希望您的建议能帮助我顺利进行。我会告诉你我的想法。

我的应用程序需要在拨号器中执行特殊操作。当用户拨打一个号码并且正在通话时，我希望用户能够按菜单键，并找到一个选项来滚动浏览他们的所有联系人（股票应用程序或我自己的列表我从手机中存储的联系人中抓取），然后选择一个。选择后，该联系人的号码将粘贴到拨号器中（请记住，在通话过程中）。

我当然不希望有一个答案告诉我如何准确地做到这一点，我只需要一些指导，因为我以前从未编写过这种性质的应用程序。最重要的是，是否有可能做我想做的事？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T03:19:57.153

您需要通过 Android [Service](http://developer.android.com/reference/android/app/Service.html)或[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。[服务](http://developer.android.com/guide/components/services.html)是一个应用程序组件，可以在后台执行长时间运行的操作，并且不提供用户界面（UI）。

以下示例取自 android 博客，它是[Service](http://developer.android.com/guide/components/services.html)类的实现

```
public class HelloService extends Service {
  private Looper mServiceLooper;
  private ServiceHandler mServiceHandler;

  // Handler that receives messages from the thread
  private final class ServiceHandler extends Handler {
      public ServiceHandler(Looper looper) {
          super(looper);
      }
      @Override
      public void handleMessage(Message msg) {
          // Normally we would do some work here, like download a file.
          // For our sample, we just sleep for 5 seconds.
          long endTime = System.currentTimeMillis() + 5*1000;
          while (System.currentTimeMillis() < endTime) {
              synchronized (this) {
                  try {
                      wait(endTime - System.currentTimeMillis());
                  } catch (Exception e) {
                  }
              }
          }
          // Stop the service using the startId, so that we don't stop
          // the service in the middle of handling another job
          stopSelf(msg.arg1);
      }
  }

  @Override
  public void onCreate() {
    // Start up the thread running the service.  Note that we create a
    // separate thread because the service normally runs in the process's
    // main thread, which we don't want to block.  We also make it
    // background priority so CPU-intensive work will not disrupt our UI.
    HandlerThread thread = new HandlerThread("ServiceStartArguments",
            Process.THREAD_PRIORITY_BACKGROUND);
    thread.start();

    // Get the HandlerThread's Looper and use it for our Handler 
    mServiceLooper = thread.getLooper();
    mServiceHandler = new ServiceHandler(mServiceLooper);
  }

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {
      Toast.makeText(this, "service starting", Toast.LENGTH_SHORT).show();

      // For each start request, send a message to start a job and deliver the
      // start ID so we know which request we're stopping when we finish the job
      Message msg = mServiceHandler.obtainMessage();
      msg.arg1 = startId;
      mServiceHandler.sendMessage(msg);

      // If we get killed, after returning from here, restart
      return START_STICKY;
  }

  @Override
  public IBinder onBind(Intent intent) {
      // We don't provide binding, so return null
      return null;
  }

  @Override
  public void onDestroy() {
    Toast.makeText(this, "service done", Toast.LENGTH_SHORT).show(); 
  }
} 
```

另一方面，同样的事情可以使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)来实现，IntentService 是按需处理异步请求的[服务](http://developer.android.com/reference/android/app/Service.html)的基类。

```
public class HelloIntentService extends IntentService {

  /** 
   * A constructor is required, and must call the super IntentService(String)
   * constructor with a name for the worker thread.
   */
  public HelloIntentService() {
      super("HelloIntentService");
  }

  /**
   * The IntentService calls this method from the default worker thread with
   * the intent that started the service. When this method returns, IntentService
   * stops the service, as appropriate.
   */
  @Override
  protected void onHandleIntent(Intent intent) {
      // Normally we would do some work here, like download a file.
      // For our sample, we just sleep for 5 seconds.
      long endTime = System.currentTimeMillis() + 5*1000;
      while (System.currentTimeMillis() < endTime) {
          synchronized (this) {
              try {
                  wait(endTime - System.currentTimeMillis());
              } catch (Exception e) {
              }
          }
      }
  }
} 
```

You can also go through SO post [https://stackoverflow.com/a/4353653/432903](https://stackoverflow.com/a/4353653/432903)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T03:03:22.023

如果您的应用程序主要不是用 javascript/webview/phonegap 编写的，那么您所要做的就是查看 Service 类。该课程和链接的文档会告诉您您需要知道的一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T03:22:03.237

maybe you can use an IntentFilter so you can get a system notify when the user uses a dialer. and you should learn the Service component which can work in background in android.

# spring - Spring DefaultMessageListenerContainer 和 ActiveMQ

> ID：12047849
> 
> 赞同：6
> 
> 时间：2012-08-21T02:51:05.083
> 
> 标签：spring, activemq

我已将 Spring DefaultMessageListenerContainer 配置为 ActiveMQ 消费者，从队列中消费消息。我们称它为“Test.Queue” 我将此代码部署在 4 台不同的机器上，并且所有机器都配置到同一个 ActiveMQ 实例以处理来自同一个“Test.Queue”队列的消息。

一旦所有 4 台机器都启动并运行，我将最大消费者大小设置为 20，我看到队列中的消费者数量为 80（4 * 最大消费者大小 = 80）

当生成并发送到队列的消息变高时，一切都很好。

当有 1000 条消息并且在 80 个消费者中，假设其中一个被卡住了，它会冻结 Active MQ 以停止向其他消费者发送消息。

所有消息都永远卡在 ActiveMQ 中。

由于我有 4 台机器，最多有 80 个消费者，我不知道哪个消费者没有确认。

我停止并重新启动所有 4 台机器，当我停止有坏消费者卡住的机器时，消息再次开始流动。

我不知道如何配置 DefaultMessageListenerContainer 以放弃不良消费者并立即向 ActiveMQ 发出信号以开始发送消息。

即使没有 Spring，我也能够创建场景，如下所示：

1.  我产生了多达 5000 条消息并将它们发送到“Test.Queue”队列
2.  我创建了 2 个消费者（消费者 A，B），在一个消费者 B 的 onMessage() 方法中，我让线程长时间休眠（Thread.sleep(Long.MAX_VALUE)），其条件类似于当前时间 % 13 时0 然后让线程休眠。

3.  跑这两个消费者。

4.  去Active MQ，发现队列有2个消费者。
5.  A 和 B 都在处理消息
6.  在某个时间点，消费者 B 的 onMessage() 被调用，当当前时间 % 13 为 0 的条件得到满足时，它使线程进入睡眠状态。
7.  消费者 B 卡住了，无法向代理确认
8.  我回到 Active MQ Web 控制台，仍然看到消费者为 2，但没有消息出列。
9.  现在我创建了另一个消费者 C 并运行它来消费。
10.  只有 ActiveMQ 中的消费者数量从 2 上升到 3。
11.  但是消费者 C 没有消费任何东西，因为代理未能发送任何包含它们的消息，因为它仍在等待消费者 B 确认它。
12.  我还注意到消费者 A 没有消费任何东西
13.  我去杀死消费者 B ，现在所有消息都已耗尽。

假设 A、B、C 由 Spring 的 DefaultMessageListenerContainer 管理，我如何调整 Spring DefaultMessageListenerContainer 以在 X 秒内未能确认后立即将不良消费者（在我的情况下为消费者 B）从池中取出，立即确认代理代理不会永远持有消息。

谢谢你的时间。

感谢我是否能解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:01:49.880

这里有几个选项可以尝试...

1.  将队列预取设置为 0 以促进更好地分布在消费者之间并减少特定消费者的“卡住”消息。见[http://activemq.apache.org/what-is-the-prefetch-limit-for.html](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)

2.  在连接上设置 "?useKeepAlive=false&wireFormat.maxInactivityDuration=20000" 以在指定的非活动时间后使慢速消费者超时

3.  设置队列策略“slowConsumerStrategy->abortSlowConsumer”...再次超时慢消费者

    ```
    <policyEntry ...
      ...
      <slowConsumerStrategy>
          <abortSlowConsumerStrategy />
      </slowConsumerStrategy>
      ...
    </policyEntry> 
    ```

# php - 如何在php中回显正斜杠

> ID：12047850
> 
> 赞同：-1
> 
> 时间：2012-08-21T02:51:08.733
> 
> 标签：php, codeigniter

我想在php中回显正斜杠如下

```
<a class="submenu" href="<?php echo base_url('products').'/'.rawurlencode('Agarbatte/Candle');?>" 
```

`Agarbatte/Candle`不是目录，但是当我这样做时，`href`将其作为目录并给我找不到错误页面。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:53:42.020

URL 中的斜杠将**始终**被视为目录分隔符。如果你用其他东西替换它，你就不会再有斜线了。但这很可能是最简单的解决方案..

如果 URL 中的路径和文件系统之间存在 1:1 映射，那么你就不走运了。但是，如果您的应用程序使用“路由层”，则可以将其修改`/`为在满足某些标准时不将其视为分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:53:54.787

只需在“Agarbatte/Candle”上使用“urlencode”。我没有看到对“rawurlencode”的特殊需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T03:06:48.360

尽管您可以`urlencode()`像其他人所说的那样使用该功能，但我建议您不要养成这种习惯。假设您在数据库中有这些产品，使用`id`并且您将永远不会遇到这些问题。

例如，如果 Candle 产品`id`在数据库中有 6...PHP 应解析为：`<a class="submenu" href='products/6'>`

此外，您可以在此处采取一些捷径，从长远来看对您有所帮助。

1.  而不是`<?php echo "something" ?>`在 php.ini 中打开 php 短标签并使用`<?= "something" ?>`
2.  您无需在`base_url`每次编写链接时都调用。适当地使用`<base>`HTML 标签：`<base href="http://localhost/yourapp/">`在`<head>`

所以......在使用1和2之后说：

`<a href='products/<?= $id;?>'><?= $name_of_product ?></a>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T03:06:48.490

如何在 url 中使用“Agarbatte-Candle”然后在输出页面上

```
$url_bit=string_replace('-','/',$url_bit); 
```

# facebook - 第一次授权时如何让omniauth-facebook在Facebook chrome中加载

> ID：12047853
> 
> 赞同：1
> 
> 时间：2012-08-21T02:51:32.910
> 
> 标签：facebook, omniauth

我正在尝试将我的网站作为 Facebook 画布应用程序访问。我在授权后第一次尝试访问我的网站（单击“玩游戏”按钮）时，它会将我重定向到我的网站 - 它不会让我留在 Facebook chrome 中。

我第二次尝试访问我的网站时，现在我不必再授权它了，它可以很好地加载到 facebook chrome 中。

我在这个问题上花了几个小时没有进展。

当我尝试设置时：

OmniAuth.config.full_host = 'http://apps.facebook.com/xxxxxx'

单击“玩游戏”按钮后，它会尝试点击错误的 URL。错误的网址是：

/身份验证/脸书/身份验证/脸书

为什么要附加？

# perl - dbix::class 为非催化剂应用程序生成模式

> ID：12047855
> 
> 赞同：0
> 
> 时间：2012-08-21T02:51:44.617
> 
> 标签：perl, schema, catalyst, dbix-class

我最近一直在构建 Catalyst 应用程序，我喜欢的一件事是使用 Catalyst 的创建脚本轻松地为[DBIx::Class](https://metacpan.org/module/DBIx::Class)生成表模式。我希望能够使用 DBIX::Class 而不必手动为我的表编写模式。有没有办法做到这一点而不用手做？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T02:55:33.787

[`DBIx::Class::Schema::Loader`](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aSchema%3a%3aLoader)的`dbicdump`脚本可用于转储模式。文档中的一个示例：

```
dbicdump -o dump_directory=./lib \
         -o components='["InflateColumn::DateTime"]' \
         -o debug=1 \
         My::Schema \
         'dbi:Pg:dbname=foo' \
         myuser \
         mypassword 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:33:21.817

另一个支持它的更通用的模块是[SQL::Translator](https://metacpan.org/release/SQL-Translator)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:50:38.153

```
#!/usr/bin/env perl

use Modern::Perl;
use DBIx::Class::Schema::Loader 'make_schema_at';

my $DEBUG = @ARGV and $ARGV[0] =~ /^\-[\-]*v/;

say $DBIx::Class::Schema::Loader::VERSION if $DEBUG;
my @dsn = 'dbi:Pg:dbname=yourDB.db';

my $options = {
debug          => $DEBUG,
dump_directory => 'lib',
components     => [qw/ InflateColumn::DateTime /],
generate_pod   => 0,
};

make_schema_at(Schema => $options, \@dsn);

=head1 NAME

generate_dbic_schema

=head1 USAGE

perl generate_dbic_schema

=cut 
```

# android - 如何在android中的活动中连接长按图像

> ID：12047856
> 
> 赞同：0
> 
> 时间：2012-08-21T02:51:44.447
> 
> 标签：android, layout, android-activity

使用这段代码，我可以在我的活动中显示图库中的图像

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.message_main);

        Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
        photoPickerIntent.setType("image/*");
        startActivityForResult(photoPickerIntent, 1);
    } 
```

布局看起来像这样

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

</RelativeLayout> 
```

我不知道该怎么做是将长按连接到图像？因此，当用户在我的活动中长按图像时，我想捕获单击的图像并对其进行处理。找到它的路径、图像类型等。根据我的布局，我不确定我会连接什么来捕捉这个长按？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:40:57.220

您需要使用上下文菜单来查看画廊。

有关上下文菜单的更多信息：http: [//developer.android.com/reference/android/view/ContextMenu.html](http://developer.android.com/reference/android/view/ContextMenu.html)

[Android - Gallery 中的 EditTexts 在被（长）点击时显示奇怪的行为](https://stackoverflow.com/questions/7051034/android-edittexts-in-gallery-show-strange-behaviour-when-being-long-clicked)

希望这可以帮助

# javascript - jQuery .toggle() 和媒体查询

> ID：12047858
> 
> 赞同：8
> 
> 时间：2012-08-21T02:52:06.957
> 
> 标签：javascript, jquery

我`.toggle()`在一个`button`元素上使用：

```
$("header button").click(function(event){
    $(".site-nav-wrapper").toggle();
    event.preventDefault();
}); 
```

这很好用。问题是如果`button`切换到`display:none`然后我更改设备方向，触发我的桌面媒体查询，尽管我重新强制`display:block;`桌面媒体查询，但`button`仍然切换到`display:none`：

（萨斯）：

```
.site-nav-wrapper{

            //Mobile First
            display:none;

            @include breakpoint($breakpoint-lg) {
                display:block;
            }
} 
```

有没有办法重置`toggle()`函数存储的任何内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T02:58:17.840

`toggle`使用内联样式，它会覆盖您在样式表中所做的任何事情。

为了得到想要的结果，你应该使用一个特殊的`hidden`类来隐藏元素，并使用它[`toggleClass`](http://api.jquery.com/toggleClass/)来代替。

**萨斯：**

```
.site-nav-wrapper.hidden {

    display: none;

    @include breakpoint($breakpoint-lg) {
        display: block;
    }
} 
```

**JS：**

```
$("header button").click(function(event){
    $(".site-nav-wrapper").toggleClass('hidden');
    event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:00:36.040

如果我记得正确地`toggle`将`display`属性设置`none`为元素的`style`属性。如果您想*强制*按钮以“桌面”方向显示，那么您需要`!important`在桌面断点中包含一个声明。

或者，您可以收听[`onorientationchanged`](http://www.quirksmode.org/dom/events/resize_mobile.html)并切换到该站点的桌面版本（取消切换/激活需要激活的所有内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:58:44.063

为什么不避免切换，这样媒体查询就没有问题了。

```
$("header button").click(function(event){
    $(".site-nav-wrapper:visible").hide();
    $(".site-nav-wrapper:hidden").show();
    event.preventDefault();
}); 
```

# javascript - 在 jquery 中从同一对象的属性设置输入字段和标签的正确方法是什么？

> ID：12047860
> 
> 赞同：0
> 
> 时间：2012-08-21T02:52:22.183
> 
> 标签：javascript, jquery

我有一个带有一堆属性的对象。有些属性将显示在输入元素中，有些则显示在标签中。

所以，我的代码如下所示：

```
 var data = getMyData();
  var propNames = Object.keys(data);
  var i, propName, elem;
  for (i = 0; i < propNames.length; ++i) {
    propName = propNames[i];
    elem = $("#" + propName);
    if (elem.is('input')) {
      elem.val(data[propName]);
    } else {
      elem.html(data[propName]);
    }
  } 
```

这是在jquery中做的正确方法吗？因为它看起来有点丑...

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T03:12:13.780

`text`我发现将方法名称存储在变量（ / ）中更容易`val`，这样我们就没有太多的代码重复（代码中的条件会导致不必要的重复）。

此外，既然您无论如何都在使用 jQuery，那么您不妨使用[`each`](http://api.jquery.com/jQuery.each/). 它将所有内容简化为：

```
$.each(getMyData(), function (key, val)
{
    var el = $("#" + key),
        method = el.is('input') ? 'val' : 'text';

    el[method](val);
}); 
```

这是小提琴：http: [//jsfiddle.net/pFbSf/](http://jsfiddle.net/pFbSf/)

* * *

如果您不喜欢将方法名称存储在变量中，请改用：

```
$.each(getMyData(), function (key, val)
{
    var el = $("#" + key);

    el.is('input') ? el.val(val) : el.text(val);
}); 
```

这是小提琴：http: [//jsfiddle.net/GQTZv/](http://jsfiddle.net/GQTZv/)

* * *

如果您担心[jQuery 不使用`hasOwnProperty`](http://bugs.jquery.com/ticket/5499)，您可以自己运行检查：

```
var data = getMyData();

$.each(data, function (key, val)
{
    if ( ! data.hasOwnProperty(key) ) return;

    var el = $("#" + key);

    el.is('input') ? el.val(val) : el.text(val);
}); 
```

这是小提琴：http: [//jsfiddle.net/GQTZv/1/](http://jsfiddle.net/GQTZv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:00:43.387

我认为您可以使用 jQuery .each() 函数重写该 for 循环，该函数可以迭代任何数组或对象。它需要一个回调函数，该函数给出索引（或键）和每个项目的值。

在您的示例中，它将类似于：

```
jQuery.each(data, function(key, value) {
   elem = jQuery("#" + value);
   if (elem.is('input')) {... 
```

查看[jQuery.each()的文档](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T03:00:58.223

假设您尝试填写 an`input`或 a `textarea`，您应该能够将其替换为：

```
var data = getMyData();
var propNames = Object.keys(data);

for (i = 0; i < propNames.length; ++i) {
  $("input#"+propNames[i]).val(data[propNames[i]);
  $("textarea#"+propNames[i]).html(data[propNames[i]);
} 
```

您甚至可以将两个 jQuery 选择器替换为：

```
 $("input#"+propNames[i]).val(data[propNames[i]).html(data[propNames[i]); 
```

由于`input`元素没有`innerHTML`和`textarea`元素没有`val`，这应该按原样工作。哈克，但它很简洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T03:01:18.897

在我看来一切都很好，马克。我强烈反对的一件事是使用新的 Object 原型方法，例如`Object.keys`，它仅在 IE9+ 和其他较新的浏览器中可用。相反，要么在你的所有 JS 之前为它创建原型（我实际上不喜欢这样做），要么有一个副本解决方法全局函数/命名空间方法，就像`function getkeys()`在底部一样照顾它。

[http://jsfiddle.net/WJ24q/1/](http://jsfiddle.net/WJ24q/1/)

```
for (i = 0; i < propNames.length; ++i) {
    var el = $("#" + propNames[i]),
        _d = data[propNames[i]];

    // you could also use a simple ternary instead of the if/else
    el.is('input') ? el.val(_d) : el.html(_d);
} 
```

函数而不是 Object.keys：

```
function getKeys (obj){
   var keys = [];
   for(var key in obj){
      keys.push(key);
   }
   return keys;
}
​    ​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T03:07:44.447

我看不出这看起来有多难看，但我不明白你为什么需要`Object.keys`......你可以用一个普通的来简化它`for...in`：

```
var data = getMyData(), 
    d, $el;
for (d in data) {
  $el = $('#'+ d);
  if ($el.is('input')) {
    $el.val(data[d]);
  } else {
    $el.html(data[d]);
  }
} 
```

# mercurial - 从 Windows 推送到 Bitbucket，然后拉到 Linux 服务器后权限太开放？

> ID：12047865
> 
> 赞同：3
> 
> 时间：2012-08-21T02:53:04.953
> 
> 标签：mercurial, file-permissions, post-update

我在本地机器上编写代码。我将代码推送到 Bitbucket 中的 Mercurial 存储库。然后，我登录到客户端的网络服务器并从 Bitbucket 存储库“拉/更新”到服务器。

问题是他们的帐户在共享服务器上，运行 suphp，并且安全设置只允许 suphp 提供文件 chmod'ed 644 (-rw-r--r--)。但是每次我从 Bitbucket 存储库中提取时，文件权限都会更改为 664 (-rw-rw-r--)。

这不是权限过于严格的问题，因为其他人曾尝试同步 Hg 存储库。Mercurial 不复制文件权限也不是问题。（Hg 过去只复制 eXecute 位，但现在复制所有权限。）

我怀疑我可以以某种方式将我的 Windows 机器上的权限更改为更具限制性并且可以修复它，但我不确定 Windows 权限如何转换为 Linux“所有者/组/世界”设置。（我的 Windows 机器上的文件允许“完全控制”我的帐户、“管理员”组和“系统”，它们从包含文件夹继承的所有权限，该文件夹位于我的文档中。）

有没有人可以解决这个问题？我可以在 Linux 机器上对 chmod 644 做一个更新后挂钩`find . -type f`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:00:11.467

在您的登录配置文件中设置 umask，例如 ~/.bash_profile

```
umask 033 
```

man umask 了解详情。

# c - 如何将端口设置为C中按钮的输入？

> ID：12047866
> 
> 赞同：1
> 
> 时间：2012-08-21T02:53:19.560
> 
> 标签：c, input, embedded, microcontroller, pic

我正在使用 MikroC 尝试对我的 PIC16f62 微控制器进行编程。我已经设法让我的输出工作（我可以打开 LED 等），但我似乎无法让输入工作。

这是我当前的代码：

```
void main() {
    TRISB.RB0 = 0; //set Port RB0 as output
    PORTB.RB0 = 1; //set Port RB0 to high (turn on LED)
    TRISA = 1; //Set PORTA as inputs 

    for(;;){  //endless loop
            if(PORTA.RA0 == 1){  //if push button is pressed
                         PORTB.RB0 = !PORTB.RB0;  \\toggle LED
            }
    }
} 
```

我不知道问题是我没有正确配置 PORT 还是我正在检查按钮是否按下不正确。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T04:57:08.910

此更改可能会对您有所帮助。

```
for(;;){  //endless loop
        if(PORTA.RA0 == 1){  //if push button is pressed
                     PORTB.RB0 = !PORTB.RB0;  \\toggle LED
          while(PORTA.RA0 == 1);
       /*wait till button released as press of a buttons take time  and processor is too fast */
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:37:32.153

您可能正在正确读取端口引脚，但是因为当您检测到按压时您正在打开和关闭 LED，您的眼睛看不到结果。

例如，1Mhz 的时钟频率将使开/关切换大约每秒 150,000 次（1,000,000 个周期/每个循环约 3 个 ASM 指令/2 个循环打开然后关闭）。

I would suggest taking the approach of having the LED match the state of the input pin.

```
for(;;)
{
  if(PORTA.RA0 == 1) //if button is pressed
  {
    PORTB.RB0 = 1;   //turn on LED
  }
  else
  {
    PORTB.RB0 = 0;   //turn off LED
  }
} 
```

This technique is similar to what Rajesh suggested, but provides a bit more direct feedback on whether the input pin is set or not.

If that doesn't work, then something with your setup of the TRISA is not correct. You may want to try this:

```
TRISA.RB0 = 1; 
```

# nasm - 如何使用 linux 将引导扇区添加到 CD？

> ID：12047869
> 
> 赞同：0
> 
> 时间：2012-08-21T02:53:55.297
> 
> 标签：nasm, bootstrapping

如何使用 linux 将引导扇区写入 cd？我在 nasm 中创建了引导扇区，并编译了二进制文件。我曾尝试从 linux 使用 dd 并尝试了 partcopy 但没有任何效果，甚至 masteriso 也没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:04:38.703

你想用`dd`. 尝试这个：

```
dd status=noxfer conv=notrunc bs=512 count=1 if=mybootloader.bin of=/dev/cddevice 
```

替换`cddevice`为您`/dev`对 CD 的条目，或替换为磁盘映像文件的名称。

# c++ - 使用 Boost 库时如何在 C++ 中覆盖 new？

> ID：12047871
> 
> 赞同：2
> 
> 时间：2012-08-21T02:54:03.817
> 
> 标签：c++, boost, operator-overloading, new-operator, delete-operator

我已经为我的项目覆盖了全局 new 和 delete 运算符，但是我无法让它与 Boost 库一起使用。我在这里实现了解决方案：[Macro to replace C++ operator new](https://stackoverflow.com/questions/619467/macro-to-replace-c-operator-new)以解决我遇到的多个重载问题。但是，Boost 库有一个恼人的习惯，即使用`operator new`而不是简单地使用`new`离开预处理器进行扩展：

`::operator new(n);`

至：

`::operator (__file__ = "someFile.cpp", __line__ = 123) && 0 ? NULL : new(n);`

是否可以编写另一个宏来删除这些“不需要的”扩展？例如，我尝试编写：

`#define (operator (file, line) && 0 ? NULL :) operator new`

但显然宏的标识符部分不允许使用括号。如何使用 Boost 库，但仍能获得内存分配跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:56:15.213

一个好的答案取决于你需要它来做什么*，*但显然它是为了减少调试所花费的时间（通过了解哪些块被分配到哪里的信息）。

然后，首先，减少调试分配和释放所花费时间的最佳通用方法是使用*智能指针*，例如`std::shared_ptr`. 让智能指针自动正确地管理您的释放。这可以真正减少调试所花费的时间。

也就是说，获取所需信息的一种方法*是明确*说明。在您的代码中，编写 eg`TRACKING_NEW`而不是仅仅`new`, in`new`表达式。然后`TRACKING_NEW`相应地定义。

不要定义一个名为`new`.

除了形式上的问题（如果你在此之后包含任何标准标题，你就有 UB），几乎可以保证你会陷入困境。`TRACKING_NEW`因此，如果您发现在更改代码以使用智能指针后仍然需要它，请进行定义。但不要定义一个名为`new`.

# ms-access - Access 2010：计算多值字段中项目数的表达式

> ID：12047872
> 
> 赞同：1
> 
> 时间：2012-08-21T02:54:10.613
> 
> 标签：ms-access, count, multivalue

在 Access 2010 中，我有一个包含多值字段的表。在我的表单上，该字段表示为一个列表，我可以在其中检查任意数量的值。我想显示所选项目的数量。我尝试使用

```
=Count([MyField]) 
```

但它给出了所有记录中选定项目的总数。如何仅获取当前记录中选定项目的计数？

# php - PHP 5 soapClient 结果为空 __getLastResponse 显示正确的 XML

> ID：12047882
> 
> 赞同：4
> 
> 时间：2012-08-21T02:56:47.170
> 
> 标签：php, xml, web-services, soap, wsdl

使用 Soap 服务时，结果为空，为什么在 getLastResponse 中填充 XML。这是 WSDL：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://schema.XXX.com/WebAPI/1.0/Search" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:s1="http://schema.XXX.com/WebAPI/1.0/Common" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://schema.XXX.com/WebAPI/1.0/Search" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">A web service used to perform searches on an instance's data.</wsdl:documentation>
  <wsdl:types>
    <s:schema elementFormDefault="qualified" targetNamespace="http://schema.XXX.com/WebAPI/1.0/Search">
      <s:import namespace="http://schema.XXX.com/WebAPI/1.0/Common" schemaLocation="http://localhost:8090/Services/Common.xsd" />
      <s:element name="SearchRequest" type="tns:SearchRequest" />
      <s:complexType name="SearchRequest">
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="unbounded" name="Contexts" type="s1:FilterContext" />
        </s:sequence>
      </s:complexType>
      <s:element name="SearchResponse" type="tns:SearchResponse" />
      <s:complexType name="SearchResponse">
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="unbounded" name="Items" type="tns:SearchResultItem" />
          <s:element minOccurs="0" maxOccurs="1" name="Status" type="s1:SoapResponseStatus" />
        </s:sequence>
      </s:complexType>
      <s:complexType name="SearchResultItem">
        <s:complexContent mixed="false">
          <s:extension base="s1:ItemKey">
            <s:sequence>
              <s:element minOccurs="0" maxOccurs="1" name="DisplayName" type="s:string" />
              <s:element minOccurs="1" maxOccurs="1" name="ResultType" type="s1:FilterContextType" />
            </s:sequence>
          </s:extension>
        </s:complexContent>
      </s:complexType>
    </s:schema>
  </wsdl:types>
  <wsdl:message name="SearchSoapIn">
    <wsdl:part name="Request" element="tns:SearchRequest" />
  </wsdl:message>
  <wsdl:message name="SearchSoapOut">
    <wsdl:part name="SearchResult" element="tns:SearchResponse" />
  </wsdl:message>
  <wsdl:portType name="SearchWebServiceSoap">
    <wsdl:operation name="Search">
      <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">Performs a search based on requested contexts and filters.</wsdl:documentation>
      <wsdl:input message="tns:SearchSoapIn" />
      <wsdl:output message="tns:SearchSoapOut" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="SearchWebServiceSoap" type="tns:SearchWebServiceSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="Search">
      <soap:operation soapAction="http://schema.XXX.com/WebAPI/1.0/Search/Search" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="SearchWebServiceSoap12" type="tns:SearchWebServiceSoap">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="Search">
      <soap12:operation soapAction="http://schema.XXX.com/WebAPI/1.0/Search/Search" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="SearchWebService">
    <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">A web service used to perform searches on an instance's data.</wsdl:documentation>
    <wsdl:port name="SearchWebServiceSoap" binding="tns:SearchWebServiceSoap">
      <soap:address location="http://localhost:50295/Services/SearchWebService.asmx" />
    </wsdl:port>
    <wsdl:port name="SearchWebServiceSoap12" binding="tns:SearchWebServiceSoap12">
      <soap12:address location="http://localhost:50295/Services/SearchWebService.asmx" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>

<?xml version="1.0" encoding="utf-8"?>
<s:schema xmlns="http://schema.XXX.com/WebAPI/1.0/Common"
          xmlns:s="http://www.w3.org/2001/XMLSchema"
          elementFormDefault="qualified"
          targetNamespace="http://schema.XXX.com/WebAPI/1.0/Common">
  <s:complexType name="ItemKey">
    <s:sequence>
      <s:element minOccurs="0" maxOccurs="1" name="SiteId" type="s:string" />
      <s:element minOccurs="1" maxOccurs="1" name="ItemId" type="s:int" />
    </s:sequence>
  </s:complexType>
  <s:complexType name="SoapResponseStatus">
    <s:sequence>
      <s:element minOccurs="1" maxOccurs="1" name="Succeeded" type="s:boolean" />
      <s:element minOccurs="1" maxOccurs="1" name="ErrorCode" type="s:int" />
    </s:sequence>
  </s:complexType>
  <s:complexType name="ItemKeyRequest">
    <s:sequence>
      <s:element minOccurs="0" maxOccurs="1" name="Key" type="ItemKey" />
    </s:sequence>
  </s:complexType>
  <s:complexType name="FilterContext">
    <s:complexContent mixed="false">
      <s:extension base="IFilter">
        <s:sequence>
          <s:element minOccurs="1" maxOccurs="1" name="ContextType" type="FilterContextType" />
          <s:element minOccurs="0" maxOccurs="1" name="FilterGroup" type="FilterGroup" />
        </s:sequence>
      </s:extension>
    </s:complexContent>
  </s:complexType>
  <s:complexType name="IFilter" abstract="true" />
  <s:complexType name="FilterValue">
    <s:complexContent mixed="false">
      <s:extension base="IFilter">
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="1" name="Name" type="s:string" />
          <s:element minOccurs="0" maxOccurs="1" name="Key" type="s:string" />
          <s:element minOccurs="1" maxOccurs="1" name="OperatorType" type="OperatorType" />
          <s:element minOccurs="0" maxOccurs="1" name="Value" type="s:string" />
          <s:element minOccurs="0" maxOccurs="1" name="SchemaTypeName" type="s:string" />
          <s:element minOccurs="0" maxOccurs="1" name="SchemaTypeNamespace" type="s:string" />
        </s:sequence>
      </s:extension>
    </s:complexContent>
  </s:complexType>
  <s:simpleType name="OperatorType">
    <s:restriction base="s:string">
      <s:enumeration value="NotSet" />
      <s:enumeration value="Equal" />
      <s:enumeration value="GreaterThan" />
      <s:enumeration value="LessThan" />
      <s:enumeration value="GreaterThanEqual" />
      <s:enumeration value="LessThanEqual" />
      <s:enumeration value="Contains" />
      <s:enumeration value="StartsWith" />
      <s:enumeration value="EndsWith" />
    </s:restriction>
  </s:simpleType>
  <s:complexType name="FilterContainer">
    <s:complexContent mixed="false">
      <s:extension base="IFilter">
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="1" name="FilterValue" type="FilterValue" />
          <s:element minOccurs="0" maxOccurs="1" name="FilterGroup" type="FilterGroup" />
        </s:sequence>
      </s:extension>
    </s:complexContent>
  </s:complexType>
  <s:complexType name="FilterGroup">
    <s:complexContent mixed="false">
      <s:extension base="IFilter">
        <s:sequence>
          <s:element minOccurs="1" maxOccurs="1" name="GroupType" type="FilterGroupType" />
          <s:element minOccurs="0" maxOccurs="unbounded" name="Filters" type="FilterContainer" />
        </s:sequence>
      </s:extension>
    </s:complexContent>
  </s:complexType>
  <s:simpleType name="FilterGroupType">
    <s:restriction base="s:string">
      <s:enumeration value="And" />
      <s:enumeration value="Or" />
    </s:restriction>
  </s:simpleType>
  <s:simpleType name="FilterContextType">
    <s:restriction base="s:string">
      <s:enumeration value="Hierarchy" />
      <s:enumeration value="ReportDefinition" />
      <s:enumeration value="GeneratedReport" />
      <s:enumeration value="Role" />
      <s:enumeration value="User" />
    </s:restriction>
  </s:simpleType>
</s:schema> 
```

PHP代码：

```
$client = new SoapClient("SearchWebService.wsdl", array('location' => "$usingSSL://$hostname/axis2/services/SearchWebService", 'trace' => 1, 'exceptions' => 1));
$data = json_decode(stripslashes($_POST["data"]));
$result = $client->Search($data); 
```

__getLastResponse：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <n:SearchResponse xmlns:n="http://schema.XXX.com/WebAPI/1.0/Search" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:n0="http://schema.XXX.com/WebAPI/1.0/Common">
            <n:Responses>
                <n:Items>
                    <n0:SiteId/>
                    <n0:ItemId>22</n0:ItemId>
                    <n:DisplayName>Floor 1</n:DisplayName>
                    <n:ResultType>Hierarchy</n:ResultType>
                </n:Items>
                <n:Items>
                    <n0:SiteId/>
                    <n0:ItemId>196</n0:ItemId>
                    <n:DisplayName>Floor 1</n:DisplayName>
                    <n:ResultType>Hierarchy</n:ResultType>
                </n:Items>
                <n:Status>
                    <n0:Succeeded>true</n0:Succeeded>
                    <n0:ErrorCode>0</n0:ErrorCode>
                </n:Status>
            </n:Responses>
        </n:SearchResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

$result 始终为空。没有错误。我尝试了类图和相同的结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:21:17.977

在结果上尝试 var_dump() ......你看到了什么？

另外，你也可以试试这个，把它包裹在 Search 调用中：

```
try {
  $result = $client->Search($data);
} catch (SoapFault $exception) {
  //We errored 
  echo $exception;
} 
```

# r - 为什么我在 R 中对这两种算法得到不同的答案？

> ID：12047883
> 
> 赞同：0
> 
> 时间：2012-08-21T02:57:15.730
> 
> 标签：r

这确实是 Project Euler 中的第一个问题。我创建了这两种算法来解决它，但它们各自产生不同的答案。基本上，工作是编写一个程序，将 3 和 5 的所有小于 1000 的乘积相加。

这是正确的：

```
divisors<-0

for (i in 1:999){
    if ((i %% 3 == 0) || (i %% 5 == 0)){
        divisors <- divisors+i 
        }
    } 
```

它产生的答案是 233168

这是错误的：

```
divisors<-0

for (i in 1:999){
    if (i %% 3 == 0){
        divisors <- divisors + i
        }
    if (i %% 5 == 0){
        divisors <- divisors + i 
        }
    } 
```

这给出了答案 266333

谁能告诉我为什么这两个给出不同的答案？第一个是正确的，显然是更简单的解决方案。但我想知道为什么第二个不正确。

编辑：在事故中捏造了第二个答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T03:01:08.807

因为 multiples`15`将在第一个代码示例中添加`i`一次，在第二个代码示例中添加*两次*。的倍数是*和*`15`的倍数。`3` *`5`*

 *为了使它们在功能上相同，第二个必须是这样的：

```
divisors<-0
for (i in 1:999) {
    if (i %% 3 == 0) {
        divisors <- divisors + i
    } else {
        if (i %% 5 == 0) {
            divisors <- divisors + i 
        }
    }
} 
```

但是，老实说，你的第一个样本对我来说似乎更合乎逻辑。

> 顺便说一句（现在你已经编辑过它了），我还猜测你的第二个输出值 26633 是一个错字。除非 R 在某个时候包含整数，否则我希望它*比*第一个示例更多（例如我从类似的 C 程序中获得的值 266333，所以我假设你不小心离开了 3）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:01:55.433

我不太了解 R，但马上，我看到了一个潜在的问题。

在您的第一个代码块中，如果*任*一条件为真，则该`if`语句为真。如果两个条件都满足，您的第二个块将运行该语句两次。*`if`*

 *考虑数字`15`。在您的第一个代码块中，该`if`语句将触发一次，但在第二个代码块中，两个`if`语句都将触发，这可能不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:34:34.247

从概念上讲，我可以确切地告诉你为什么这是不正确的。

将所有整数的总和乘以 333 并乘以 3，您将得到 x 将所有整数的总和乘以 200 并乘以 5，您将得到 y 将所有整数的总和乘以 66 并乘以15，你会得到 z

x + y = 266333 x + y - z = 233168

15 可以被 3 和 5 整除。你已经数过所有 15 的倍数两次。**

# php - 如何强制下载图像？

> ID：12047884
> 
> 赞同：3
> 
> 时间：2012-08-21T02:57:20.380
> 
> 标签：php, javascript, jquery, base64

我的页面上有一个动态生成的图像，如下所示：

```
<img id="my_image" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEA/gD+AAD/etc............" /> 
```

而不是告诉我的用户右键单击图像并点击保存，我想公开一个下载链接，单击该链接将提示下载图像。如何做到这一点？

最初我在js中的尝试：

```
var path = $('#my_image').attr('src');
window.open('./download.php?file=' + path); 
```

在download.php中：

```
<?php
    header('Content-Description: File Transfer');
    header("Content-type: application/octet-stream");
    header("Content-disposition: attachment; filename= " . $_GET['file'] . "");
?>

<img src="<?= $_GET['file'] ?>" /> 
```

但问题是，Base64 url​​ 搅拌量太大，超过了 GET 请求字节限制。

我对 JavaScript 或 PHP 的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T03:14:17.253

在 download.php 中试试这个：

```
<?php
    header('Content-Description: File Transfer');
    header("Content-type: application/octet-stream");
    header("Content-disposition: attachment; filename= Image.jpg");
    exit(base64_decode($_POST['data'])); //url length is limited, use post instead
?> 
```

并将其用于表单：

```
<form method="post" action="./download.php">
  <input type="hidden" name="data" value="/9j/4AAQSkZJRgABAgEA/gD+AAD/etc............" />
  <a href="#" onclick="this.parentNode.submit();return false;">Download</a>
</form> 
```

就像 Dagon 说的那样，这不是最好的方法，因为提交表单就像上传整个图像一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T01:46:02.397

事实证明，其他问题之一确实有答案：

[浏览器/HTML 强制从 src="data:image/jpeg;base64..." 下载图像](https://stackoverflow.com/questions/10473932/browser-html-force-download-of-image-from-src-dataimage-jpegbase64)

我在客户端 sde 上严格执行此操作，如下所示：

```
$('a#download_image').on('click', function() {
    var url = $('#my_image').attr('src').replace(/^data:image\/[^;]/, 'data:application/octet-stream');
    location.href = url;
}); 
```

# ruby-on-rails - 在作为嵌套表单的一部分创建集合后，如何获取集合中模型的 ID？

> ID：12047895
> 
> 赞同：1
> 
> 时间：2012-08-21T02:59:08.393
> 
> 标签：ruby-on-rails

我有一个`User`模型，它`:has_many :widgets`

这是“编辑”方法：

```
 def edit
    @user = current_user
    @user.widgets.build   
  end 
```

我有一个编辑视图，其中包含一个用户表单和一个嵌套在其中的小部件表单

在我的`UserController#update`方法中，我保存了数据……一切都按设计工作。

保存后，我想用刚刚添加到 User.widgets 的小部件的 ID 将用户发送到 Widget#show

我如何获得该 ID？

这是我的更新方法：

```
 def update
    @user = User.find(params[:user][:id], :include => [:widgets])
    if @user.update_attributes(params[:user])
       redirect_to widget_path(????), notice: 'Your new Widget is ready' }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:50:29.213

您不能确定`@user.widgets.last.id`请求的范围，以便确保获得他们的最后一个小部件，例如：`@user.widgets.created_by(@user).last.id`

# php - PHP中的多个SQL语句

> ID：12047898
> 
> 赞同：0
> 
> 时间：2012-08-21T02:59:37.967
> 
> 标签：php, sql

只是问是否有可能在 php 中执行 sql 语句的 1 个函数。

我的 sql 真正做的是从我的数据库中的三个表中获取数据。我目前不确定使用什么方法。内部连接会弹出，但我忘记了正确的语法。所以我在想这个。

```
$qry_display = "SELECT student_id,
section_id,level,photo,address,father_occupation,father_phone,father_company,mother_occupation,
mother_phone,mother_company 
from tbl_er 
where student_id='$id' AND level="3rd Year""; 
```

上面的语句将从 tbl_er 中检索信息，这些信息将是学生的历史。

```
$qry_display = "SELECT fname,
sex,
lname,
mname,
birth_date,
birth_place,
address,
father,
father_degree,
mother,
mother_degree,
from tbl_enroll where student_id='$id'"; 
```

上述语句将从 tbl_enroll 中检索部分信息，这些将是学生的核心不可更改数据。第一条语句还有要检索的“section_id”。所以我的想法是检索该值，以便将其用于最后一个 sql。

```
$qry_display = "SELECT section_name,adviser_id,schoolyr 
from tbl_section 
where student_id='$id' AND section_id='$sid'"; 
```

我对如何获取 section_id 的想法是在我要发表的最后一条语句之前。

```
 $sid= section_id  (I am unsure if this will work.) 
```

该语句还会触发一个函数中的所有三个语句吗？

```
 $sql_display = mysql_query($qry_display) or die (mysql_error()); 
```

谢谢，感谢任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:03:39.610

我似乎记得`MySQL`函数族不能在单个`mysql_query`操作中处理多个语句。它会执行第一条语句，然后默默地丢弃以下语句，即使您将它们包装在事务中也是如此。

也就是说，不推荐使用 MySQL 系列 -[您应该](http://us2.php.net/mysqli_query)在 2012 年将 MySQLi 用于新项目。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:12:05.833

这有很多问题，即使您解决了错误，您也可能不会得到您正在寻找的东西，所以让我们开始将其编写为带有左连接的 1 个连贯查询（顺便说一句很好）。

```
$qry_display = "SELECT
            a.student_id, a.section_id, a.level, a.photo, a.address, a.father_occupation, a.father_phone, a.father_company, a.mother_occupation, a.mother_phone, a.mother_company,
            b.fname, b.sex, b.lname, b.mname, b.birth_date, b.birth_place, b.address, b.father, b.father_degree, b.mother, b.mother_degree,
            c.section_name, c.adviser_id, c.schoolyr
            FROM tbl_er AS a
            LEFT OUTER JOIN tbl_enroll AS b ON a.student_id = b.student_id
            LEFT OUTER JOIN tbl_section AS c ON a.section_id = c.section_id
            WHERE a.student_id=".$id." AND a.level='3rd Year'"; 
```

最后一次加入不关心 student_id，因为 section/advisor 关系不依赖于学生。

# python - pygame中基于屏幕坐标的对象位置

> ID：12047899
> 
> 赞同：1
> 
> 时间：2012-08-21T02:59:42.033
> 
> 标签：python, pygame, game-engine

我是一名业余程序员，试图用 python 和 pygame 制作游戏（我知道，不是最好的，但我知道如何比 Java 和 C++ 更好地使用它）。我遇到了一个有趣的问题：使用屏幕坐标在屏幕上定位特定的精灵，然后将该精灵移动到不同的位置。
例如，我有一个物品栏，我正在编写某种方式让玩家将物品从物品栏中放下，然后放回二维游戏场，以便玩家稍后可以捡起它。
由于项目的数量会有所不同，因此将它们的*所有*坐标添加到一个列表并尝试以这种方式管理它是效率低下的。试图将不断变化的项目列表连接到现场的对象变得太混乱了。

我已经附上了我到目前为止的代码，以防万一。我在网上查看过，但没有找到有关如何执行此操作的任何建议，我发现的唯一其他解决方案是以某种方式找到使用的对象`spritecollide()`和一个不可见的精灵，但我需要帮助。

drop 功能是我现在正在研究的部分。`pos()`是 2 个项目的列表，`x`和`y`是您在屏幕上单击的鼠标坐标。

创建库存的类：

```
import pygame
from testRect import *

class Inventory(pygame.sprite.Sprite):
    # Define colors
    white = (255,255,255)
    dgreen = (0,154,0)#useables
    dblue = (0,0,154)#throwables
    dred = (154,0,0)#holdables

    def __init__(self,surface,pos,grid,gridItems,handsUsed):
        for row in range(4):
        # Add an empty array that will hold each cell
        # in this row
        grid.append([])
        for column in range(4):
            grid[row].append(0) # Append a cell
        gridItems.append([])
        for column in range(4):
            gridItems[row].append(0) # Append a cell
        self.update(surface,pos,grid,gridItems,handsUsed)

    def update(self,surface,pos,grid,gridItems,handsUsed):
        width=40
        height=40
        margin=2
        #convert click location to grid squares
        column=pos[0] // (width+margin)-20
        row=pos[1] // (height+margin)-7
        #make grid selection (toggle if selected or not)
        if row >-1 and row <4 and column >-1 and column < 4:
            if grid[row][column] == 0 and handsUsed < 2:
                grid[row][column] = 1
                handsUsed += 1
            elif grid[row][column] == 1 and handsUsed > 0:
            grid[row][column] = 0
            handsUsed -= 1
        # Draw the grid and determine type of object
        for row in range(4):
            for column in range(4):
                color = self.white
                if grid[row][column] == 1 and gridItems[row][column] == 1:
                    color = self.dgreen
                elif grid[row][column] == 1 and gridItems[row][column] == 2:
                    color = self.dblue
                elif grid[row][column] == 1 and gridItems[row][column] == 3:
                    color = self.dred
                pygame.draw.rect(surface,color,[((margin+width)*column+margin)+840,((margin+height)*row+margin)+295,width,height])

        return handsUsed#return the variable so that the master handsUsed var will also update

    def drop(self,pos,handsUsed,grid,staticsprites):
        moved = False
        if pos[0] > 838 and pos[0] < 1011 and pos[1] > 491 and pos[1] < 538 and handsUsed > 0:
            width=40
            height=40
            margin=2
            row = 0
            column = 0
            while row < 4 and moved == False:
                if grid[row][column] == 1:
                    #items selected will set their coordinates to a space near the player.
                    #Will check to see if spot is open in this priority (high to low): below, above, left, right
                    #finds the item to be moved
                    itemSelectRow = row * (((height + margin)-7))+299
                    itemSelectColumn = (column * ((width + margin)+20))+845
                    collideList = pygame.sprite.spritecollide(testRect, staticsprites, False)
                    if collideList != None:
                        #will move the item to the location since nothing is in the way
                        print collideList
                    moved = True
                    break
                elif row < 4 and column < 3:
                    print "hi"
                    column += 1
                elif row < 4 and column >= 3:
                    column = 0
                    row += 1
                else:
                    break
        return handsUsed#return the variable so that the master handsUsed var will also update 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:16:57.697

I think you just need someway to put the Item to the ground and as close to player as possible, and you need some way to try out possible positions to do the item dropping. Am I right?

I've one year python exp and a few exp in game programming.

Here is the thing:

game programming is not science, you might find an easier way to do this at first, and do it better when the game shapes up. I don't know how your game looks like, but I think how items scattered (may be you are thinking about Diablo2 Item dropping or something?) on the ground is not the sweet-spot of most games. you can just do collision tests with logical map matrix with simple x, y grid, instead of some compute-intense sprite collision test.

Make it simple enough so that you can handle it, you can remember what the code does after a few weeks(or years), too complex stuff hurts.

good luck and make a great game :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T16:30:51.983

好的，我以为您将物品拖到库存窗口之外，例如我的世界，但 nvm。

他们单击“放置”按钮，获取 player.position 并测试播放器周围的 8 个字段，如果您真的可以放入其中一个字段，当您找到一个空的地方时，您放置并添加项目及其位置到丢弃物品的列表。

```
class DroppedItem:
    def __init__(item_type,x,y):
        self.itype = item_type
        self.pos = [x,y]

#you have one list with all dropped items in the map
DROPPED = []
#Them, inside your function code when you drop the item:
DROPPED.append(DroppedItem(itype,x,y))
#itype is the type of item, best use IDs #1=swordx,2=bow of death,....33=holy arrow
#x and y is the position in the ground. 
```

我建议您熟悉类和面向对象的编程 (OOP)，因为它可以让您编写更清洁、更高效的代码。对不起我的英语不好。

# android - Android 在 Google Play 中更新应用

> ID：12047904
> 
> 赞同：2
> 
> 时间：2012-08-21T03:00:20.083
> 
> 标签：android, google-play

有谁知道 Google Play 更新应用程序的新版本通常需要多长时间？它应该是瞬时的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:19:35.257

取决于，我在商店里有 3 个应用程序，有时它会在 30 分钟内更新，有时会在 2 小时内更新。在那之后再也没有过，所以请耐心等待，看电影，一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T18:12:25.327

我昨天刚刚更新了我的应用程序，它在 Play 中反映大约需要 4-5 个小时。但是我的开发者控制台中的统计数据变化非常缓慢，如果有的话。不幸的是，Google Play 很慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T07:44:24.807

您应该为新应用程序或更新的应用程序提供一个小时到甚至一天之间的任何时间。

统计数据不会立即反映。很可能有夜间任务每天只更新一次您的统计数据。

# python - 如何在python中创建相同元组的列表

> ID：12047915
> 
> 赞同：1
> 
> 时间：2012-08-21T03:01:46.570
> 
> 标签：python, list, tuples

伙计们，

我想创建以下列表，但不是 3 次重复，而是 12 次重复。有没有办法在不明确输入 12 次的情况下做到这一点？非常感谢您的帮助。

```
[(0,pi), (0,pi), (0,pi)] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T03:03:28.030

您可以使用列表推导：

```
l = [(0, pi) for i in range(12)] 
```

替代方案（乘以列表）可能适用于`tuple`对象，因为它们是不可变的，但是当你在对象上尝试它时你会扯掉头发`list`：

```
>>> pi = 3
>>> l = [[0, pi]] * 4
>>> l
[[0, 3], [0, 3], [0, 3], [0, 3]]
>>> l[0][1] = 4
>>> l
[[0, 4], [0, 4], [0, 4], [0, 4]]  # Wat 
```

我个人远离字符串以外的任何方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T03:04:14.297

这将适用于元组（但不推荐用于列表）：

```
 myl=[(0,pi)] * 12 
```

给`myl`

```
[(0, 3.14), (0, 3.14), (0, 3.14), (0, 3.14), (0, 3.14), (0, 3.14),
 (0, 3.14), (0, 3.14), (0, 3.14), (0, 3.14), (0, 3.14), (0, 3.14)] 
```

正如@senderle 在下面的有用评论中提到的那样，这是一种很好的方法，因为元组是*不可变*的。这对于列表来说*不是*一种安全的方法，因为它可能会产生意想不到的结果，如下面的示例所示。

**元组与列表：**

*使用元组：*

```
In [69]: myl=[(0,pi)] * 3
In [70]: myl
Out[70]: [(0, 3.14), (0, 3.14), (0, 3.14)]

In [71]: myl[0][0] = 55
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
----> 1 myl[0][0] = 55
TypeError: 'tuple' object does not support item assignment 
```

*使用列表：*

```
In [72]: myl=[[0,pi]] * 3
In [73]: myl
Out[73]: [[0, 3.14], [0, 3.14], [0, 3.14]]

In [74]: myl[0][0] = 55
In [75]: myl
Out[75]: [[55, 3.14], [55, 3.14], [55, 3.14]]  # every list element changes! 
```

# r - 使用 ggplot2 绘制带孔的土地

> ID：12047919
> 
> 赞同：3
> 
> 时间：2012-08-21T03:02:01.237
> 
> 标签：r, ggplot2, polygon

我从[这里](https://stackoverflow.com/questions/12047643/geom-polygon-with-multiple-hole)和[这里](https://stackoverflow.com/questions/12033560/use-ggplot-to-plot-polygon-with-holes-in-a-city-map)问过同样的问题，但仍然无法解决我的问题。我认为我需要提出整个问题并寻求帮助，而不是把它分解成小部分。

我有一个数据框，我将它导出到 csv，可以在[http://pastebin.com/SNT9Ykt7](http://pastebin.com/SNT9Ykt7)找到。

```
chart <- ggplot(data=map.shp,aes(x=long,y=lat))

### PART1 START ###
chart <- chart + geom_polygon(data=map.shp,aes(x=long,y=lat,group=id),colour=rgb(162,159,140,maxColorValue=255),fill=rgb(233,235,232,maxColorValue=255),size=0.1)
### PART1 END ###

### PART2 START ###    
map.group <- unique(map.shp[,"group"])
for (loop in (1:length(map.group))) {
  temp.shp <- map.shp[map.shp[,"group"]==map.group[loop],]
  temp.colour <- "red"
  if (unique(temp.shp[,"hole"])=="TRUE") {
    temp.colour <- "blue"
  }
  chart <- chart + geom_polygon(data=temp.shp,aes(x=long,y=lat,group=id,order=group),colour=rgb(162,159,140,maxColorValue=255),fill=temp.colour,size=0.1)
}
### PART2 END ###

chart <- chart + opts(panel.background=theme_rect(colour=rgb(190,225,247,maxColorValue=255),fill=rgb(190,225,247,maxColorValue=255)),                      
                      panel.grid.major=theme_blank(),
                      panel.grid.minor=theme_blank(),
                      panel.border=theme_blank(),
                      plot.background = theme_blank(),
                      axis.line=theme_blank(),
                      axis.text.x=theme_blank(),
                      axis.title.x=theme_blank(),
                      axis.text.y=theme_blank(),
                      axis.title.y=theme_blank(),
                      axis.ticks=theme_blank())
chart <- chart + coord_cartesian(xlim = range(map.shp[,"long"]), ylim = range(map.shp[,"lat"])) 
```

PART1 脚本给了我这个输出：

![在此处输入图像描述](../Images/120a2084bb524c2a0a8c470e80606d8e.png)

PART2 脚本给了我这个输出：

![在此处输入图像描述](../Images/898ce8634dc573623b78e3ca3474b66c.png)

实际上这是一块带有一些洞的土地，我将在该层下显示其他内容，因此我必须将洞显示为“洞”，因此无法使用 PART2 脚本显示。但是 PART2 脚本正确地绘制了地图（红色为土地，蓝色为洞）。

我需要修复的 PART1 输出中的一些问题：

*   孔的某些部分未显示为孔
*   多边形外的线绘制错误

我不知道我在 PART1 中做错了什么。任何人都可以帮忙吗？

### 更新01

txt 文件是使用以下代码创建的：

```
map.shp.raw <- readShapeSpatial("shp_files/map.shp")
map.shp <- fortify(map.shp.raw) 
```

附加的 txt 文件可以保存为 txt 并使用 read.table 命令导入为 data.frame。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T09:32:56.870

向@spacedman 点头，他说：

> 我多年前提出的用于绘制孔的解决方案是确保在每个孔之后您的 x,y 坐标返回到同一个位置。这会阻止线在周围嗡嗡作响并穿过其他多边形并留下绕组数算法不填充（或不应该填充时填充）的开放区域。

（在[https://stackoverflow.com/a/12051278/602276](https://stackoverflow.com/a/12051278/602276)中）

所以，让我们听从他的建议：

```
library(plyr2)
map.shp2 <- ddply(map.shp, .(piece), function(x)rbind(x, map.shp[1, ]))
ggplot(data=map.shp2) + geom_polygon(aes(x=long,y=lat)) 
```

![在此处输入图像描述](../Images/3e422209486c045a5adad0f459af7e1e.png)

# php - PHP文件上传无法以相同的形式发送POST数据

> ID：12047920
> 
> 赞同：2
> 
> 时间：2012-08-21T03:02:04.260
> 
> 标签：php, file, post, upload, get

我有一个基本的用户名和密码表单，它还允许您使用它上传图像。有一个创建按钮，它将用户带到uploader.php，它既上传图像又将用户名和密码输入数据库。

**在表单标签内：**

<form enctype="multipart/form-data" method="POST" action="uploader.php?uploader=avatar&username=< ?php echo $_POST['username']; ?>" >

**问题：**

用户名不会发布，也不会发布任何其他帖子。所有字段都在表单内。我检查了[PHP 文件上传表单不能提交 POST 变量？](https://stackoverflow.com/questions/3280849/php-file-upload-form-cannot-submit-a-post-variable)并在 php.ini post_max_size = 8M，upload_max_filesize = 2M

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:05:19.240

用于`<input type="hidden"/>`发布`username`和其他信息。

```
<form enctype="multipart/form-data" method="POST" action="uploader.php">
    <input type="hidden" name="uploader" value="avatar"/>
    <input type="hidden" name="username" value="<?php echo $_POST['username']; ?>" />
    ...
</form> 
```

示例.php

```
<form enctype="multipart/form-data" method="POST" action="uploader.php">
  <br/>Username : <input type="text" name="username"/>
  <br/>Password : <input type="password" name="password"/>
    <input type="hidden" name="uploader" value="avatar"/>
   <br/>File : <input type="file" name="file"/>
   <br/><input type="submit"/>
</form> 
```

上传者.php

```
<?php
  print_r($_POST)  // debug  $_POST
  print_r($_FILES) // file

  //OR
  echo $_POST["username"];
  $file=$_FILES["file"];
  print_r(file);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T03:24:53.457

听起来您想提交用户名和密码*并*在一次提交中上传文件。

如果这是您想要的，则需要以下内容：

```
<form enctype="multipart/form-data" method="POST" action="uploader.php">
<input type="text" name="username" value="" />
<input type="password" name="password" value="" />
<input type="file" name="uploaded" />
...
</form> 
```

用户名和密码将在 中可用，`$_POST[]`文件将在`$_FILES[]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-05T15:51:03.553

当我尝试上传的文件大于 PHP 接受的最大文件大小时，我遇到了这个问题。看着：

`ini_get('post_max_size')`

和

`ini_get('upload_max_filesize')`

看看你的文件是否太大。我的解决方案是使用 empty($_POST) 来确定文件是否太大（或发生其他一些发布问题）并抛出异常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-04T09:49:18.347

奇怪的是我遇到了同样的问题，直到我添加了 enctype="multipart/form-data" 属性.. 之后，一切正常

# haskell - 可以捕捉主机 CGI 应用程序吗？

> ID：12047921
> 
> 赞同：0
> 
> 时间：2012-08-21T03:02:29.577
> 
> 标签：haskell, haskell-snap-framework

一个旧的 python CGI 应用程序在 ocsigen 下运行，带有 cgi 扩展名。我们只需要如下配置它：

```
<site path="qachina" charset="utf-8">                                           
    <cgi regexp="cgi-bin/([^/]*)" dir="/media/D/www/qachina/cgi-bin/" script="\1" />
    <static dir="/media/D/www/qachina" />
</site> 
```

然后CGI应用程序就可以在ocsigen下正常运行了。现在我们想开发基于 Snap 的新应用程序，但旧的 CGI 应用程序仍然需要运行很长时间。那么我们如何配置 snap 来运行这个 CGI 应用程序。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:02:28.070

Snap 旨在让您在 Haskell 中构建 Web 应用程序。我们对提供传统 CGI 应用程序并不是很感兴趣。我建议您只使用现有服务器运行它，并可能通过反向代理服务它。如果你真的想通过 Snap 提供它，我相信你可以通过一些工作来做到这一点。我们只是不开箱即用。

# c# - 突出显示richtextBox中的字符串

> ID：12047924
> 
> 赞同：0
> 
> 时间：2012-08-21T03:02:54.133
> 
> 标签：c#, .net, regex, string, richtextbox

我需要突出显示 .xls 文件中列出的richtextBox 中的所有单词，这是我的代码的一部分：

```
public void HighlightWords(RichTextBox rtb1, DataTable dtXLS)
{
    for (int i = 0; i < dtXLS.Rows.Count; i++)
    {
        string[] wordsToRedact = new string[dtXLS.Rows.Count];

        wordsToRedact[i] = dtXLS.Rows[i][0].ToString();

        Regex test = new Regex(@"[\p{P}|\s](" + wordsToRedact[i] + @")[\p{P}|\s]", RegexOptions.Singleline | RegexOptions.Compiled);
        MatchCollection matchlist = test.Matches(rtb1.Text);

        if (matchlist.Count > 0)
        {
            for (int j = 0; j < matchlist.Count; j++)
            {
                WordsToRedact words = new WordsToRedact(matchlist[j]);
                HighLighting highLight = new HighLighting();
                highLight.Highlight_Words(rtb1, words);
            }
        }
    }
}

class HighLighting
{
    public void Highlight_Words(RichTextBox rtb, WordsToRedact e)
    {
        rtb.SelectionBackColor = Color.LightSkyBlue;
        rtb.SelectionStart = e.index;
        rtb.SelectionLength = e.length;

        rtb.ScrollToCaret();
    }
}

class WordsToRedact
{
    public int index;
    public int length;
    public string value;

    public WordsToRedact(Match m)
    {
        this.index = m.Groups[1].Index;
        this.length = m.Groups[1].Length;
        this.value = m.Groups[1].Value;
    }   
} 
```

问题是，它没有突出显示一些也与正则表达式匹配的单词。有些被突出显示，但有些没有。准确性是我的问题，我不知道我哪里错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T04:32:59.253

我检查了您的代码，其中有一些问题，我将它们列在下面：
首先：

```
for (int i = 0; i < dtXLS.Rows.Count; i++)
{
    string[] wordsToRedact = new string[dtXLS.Rows.Count];
    ... 
```

是错误的，你应该在 for 循环之前初始化你的字符串数组，否则它会在每次循环迭代中被更新，这样做：

```
string[] wordsToRedact = new string[listBox1.Items.Count];
for (int i = 0; i < dtXLS.Rows.Count; i++)
{
   ... 
```

第二：（您的主要问题）
您应该在选择后而不是之前为所选部分着色，这就是您的代码不选择最后一个匹配项的原因，您应该这样做：

```
rtb.SelectionStart = e.index;
rtb.SelectionLength = e.length;
rtb.SelectionBackColor = Color.LightSkyBlue; 
```

最后：（有疑问）我想，但我不确定你应该使用索引零 [0] 而不是 [1]

```
public WordsToRedact(Match m)
{
    this.index = m.Groups[0].Index;
    this.length = m.Groups[0].Length;
    this.value = m.Groups[0].Value; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:01:25.460

这将起作用：

```
Regex test = new Regex(@"\b(" + wordsToRedact[i] + @")\b", 
RegexOptions.Singleline | RegexOptions.Compiled); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T05:20:07.127

mahdi-tahsildari 的回答确实回答了我的问题！但除了他的回答之外，我还想发布我尝试过的另一个选项，它也解决了这个问题。

我将 HighLighting 类更改为以下代码：

```
class HighLighting
{
    public void HighlightText(RichTextBox rtb, string word)
    {
        int s_start = rtb.SelectionStart, startIndex = 0, index;

        while ((index = rtb.Text.IndexOf(word, startIndex)) != -1)
        {
            rtb.Select(index, word.Length);
            rtb.SelectionBackColor = Color.Yellow;

            startIndex = index + word.Length;
        }

        rtb.SelectionStart = s_start;
        rtb.SelectionLength = 0;
        rtb.SelectionColor = Color.Black;
        rtb.ScrollToCaret();
    }
} 
```

一切顺利。这段代码和 mahdi-tahsildari 的回答做了同样的事情！感谢你的帮助！:))

# c - 为什么 GNU Readline 这么慢？

> ID：12047925
> 
> 赞同：0
> 
> 时间：2012-08-21T03:02:55.867
> 
> 标签：c, libreadline

我写了一个加密程序。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <readline/readline.h>

int main(void) {
    char * plain;
    char letter;
    int value;
    int index;

    plain = readline("Please input your plain text: ");
    printf("Please input your key (included negatives): ");
    scanf("%i", &value);

    for (index = 0; index < strlen(plain); index++) {
        letter = plain[index];

        if (letter >= 'A' && letter <= 'Z') {
            fprintf(stderr, "%c", (letter - 'A' + value) % 26 + 'A');
        }

        else if (letter >= 'a' && letter <= 'z') {
            fprintf(stderr, "%c", (letter - 'a' + value) % 26 + 'a');
        }
        else {
            fprintf(stderr, "%c", letter);
        }
    }
    fprintf(stderr, "\n");
    free(plain);
} 
```

我做了一些基准测试：

```
biergaizi@localhost ~/learning_c/test $ time ./caesar_readline < lots_of_letters 2> c_readline_result > /dev/null

real    2m31.212s
user    2m30.776s
sys     0m0.165s 
```

程序花费太多时间从标准输入读取文本。如果我删除`> /dev/null`，我可以看到程序正在从标准输入读取，太慢了！

我也写了没有 GNU Readline 的版本，它非常快。

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:21:03.500

因为它提供的功能。

> 提供一组供应用程序使用的功能，允许用户在键入命令行时对其进行编辑。Emacs 和 vi 编辑模式均可用。

我认为您可以使用 open 功能

```
if (!strcmp(*argv, "-"))
  fd = fileno(stdin);
else fd = open(*argv, O_RDONLY|O_NONBLOCK, 0); 
```

并提供 - 作为文件名，如果你想从标准输入读取

# django - Django：文件权限媒体和静态文件

> ID：12047927
> 
> 赞同：1
> 
> 时间：2012-08-21T03:03:09.790
> 
> 标签：django, deployment, file-permissions, static-files, supervisord

我将 Django 与主管一起使用。我的项目文件夹位于`foouser`目录中，但是在主管中，我选择使用不同的用户运行部署过程，该用户由

```
$ adduser --disabled-login www 
```

因此，用户 www 无权访问 django 项目的媒体和静态文件夹，因为它们位于不同的用户目录下。我觉得仅授予文件权限`0777`并不是允许用户`www`访问静态和媒体文件的正确方法。我也觉得运行`foouser`与 user 相比具有更多权限的部署过程可能存在安全风险`www`。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:59:44.183

您可以将媒体目录/文件的所有者组更改为`www`' 组并授予其完全权限。

另一种选择是将您的媒体文件放在用户可以访问的目录下，（也许您可以使用符号链接/硬链接将您的 django 项目媒体路径下`www`拥有的目录带入）。`www`

# matlab - 使用 sub2ind 在 MatLab 中分配索引

> ID：12047928
> 
> 赞同：1
> 
> 时间：2012-08-21T03:03:14.237
> 
> 标签：matlab, indexing

我有 3 个数据集，两个带有坐标，一个带有长度为 n 的数据，带有循环我会以这种方式分配数据

```
MAT = zeros(m, n);  
for i = 1:n
    MAT(Z(i), X(i)) = MAT(Z(i), X(i)) + DATA(i);
end 
```

我想在没有循环的情况下做到这一点，因为我想做的是：

```
MAT = zeros(m, n);
mn = size(MAT);
MAT(sub2ind(mn, Z, X)) = MAT(sub2ind(mn, Z, X)) + DATA; 
```

任何人都知道如何正确有效地制作它？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T03:44:37.317

您应该使用函数 accumarray，例如： 让：

```
>> Z = [ 1 2 4 3 1];
>> X = [3 2 1 4 3];
>> D = [5 6 7 8 -10];
>> m = 4;n = 4; 
```

然后我们有：

```
>> MAT = accumarray([Z(:),X(:)],D(:),[m,n])
MAT =
     0     0    -5     0
     0     6     0     0
     0     0     0     8
     7     0     0     0 
```

# android - 无法使用 adb 连接 Android 设备

> ID：12047936
> 
> 赞同：0
> 
> 时间：2012-08-21T03:04:07.157
> 
> 标签：android, adb

我正在通过 USB 将我的三星 Galaxy Tab 连接到我的 macbook。

我曾经能够使用 adb 从我的 Galaxy Tab 中提取文件，但突然之间我不能这样做了。

我可以看到我的设备正在使用，`adb devices` 但是在使用时`adb -e shell`，它提示**错误：找不到设备**

设备已开启 USB 调试模式。

怎么了？任何人都可以帮忙吗？

PS我的galaxy Tab之前没电了，如果它与它有什么关系（？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T04:12:58.120

您可以尝试的几件事：

1.  在您的设备上转到设置 > 存储 > USB 计算机连接 > 选择相机 (PTP) 模式。

2.  如果您使用的是 eclipse，请将 Base 本地调试器端口更改为 8601 之类的端口。增加 ADB 连接时间。还要勾选使用 ABDHOST 的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:08:56.947

我有同样的问题，并修复它：在 Manifest.xml 中有

```
 android:minSdkVersion="11"
  android:targetSdkVersion="16" 
```

并将其更改为

```
 android:minSdkVersion="10"
  android:targetSdkVersion="15" 
```

现在我可以在我的 Samsung Ace 和其他设备上进行调试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T03:30:57.510

我认为只有在没有模拟器或设备实例运行并与 adb 交谈时，您才应该收到这些消息。即使连接了设备/模拟器，adb 也有可能失去与它们的连接。通常，我会做其中一项`adb reset/Kill-server/start-server`来恢复正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-30T22:51:24.350

问题是由于连接了多个设备/仿真器。

检查`adb devices`它是否显示多个设备，然后它可能无法连接到模拟器；运行`adb usb`它将重新启动其他设备，然后断开/重新连接 USB 电缆，现在运行`adb devices`它应该只显示一个设备，现在执行：

`adb backup -apk -noshared -all -f Backup_11_30_2014.ab <------(WORKED FOR ME)`

或者

`adb backup -apk -shared -all -f C:\Users\NAME\backup.ab <---(THIS ONE HANGS)`

[我找到的教程](http://www.howtogeek.com/125375/how-to-create-a-full-android-phone-or-tablet-backup-without-rooting-or-unlocking-your-device/)。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2015-04-03T23:38:37.857

解决

错误：未找到设备！：或 adb：无法连接以进行备份

1）通过点击“关于手机”下的“构建无”字段 7 次在设备设置中启用“开发人员选项”

2）在现在可用的“开发人员选项”中 - 启用“USB调试”

3) 转到[http://clockworkmod.com/carbon/drivers](http://clockworkmod.com/carbon/drivers)并为您的设备下载驱动程序，解压缩存档并转到“您的操作系统上的设备管理器，您将在其中找到（无法识别或识别的）设备名称（Nexus 5在我的情况下）

右键单击并更新驱动程序。

4) 运行 ADB 工具或它的 HOLO BACKUP mod 来备份您的设备。

！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！ ！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！ ！！！！！！

# android - DCIM文件夹中的Android Webview全屏图像

> ID：12047937
> 
> 赞同：2
> 
> 时间：2012-08-21T03:04:07.453
> 
> 标签：android, webview

我找到了几个例子，但似乎没有一个适合我的情况。我想显示 SD 卡上 DCIM 文件夹中图像文件的全屏视图。这是我的代码中不太有效的关键元素。我得到一个白屏但没有图像：

webkit 在我的布局中定义为 WebView。IMAG0013.jpg 位于 SD 卡上的 DCIM 文件夹中。

```
String html = ("<html><center><img src=\"IMAG0013.jpg\"></html>");
String path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/DCIM/";

browser=(WebView)findViewById(R.id.webkit);

browser.loadDataWithBaseURL(path, html, "text/html", "utf-8", ""); 
```

我想以原始尺寸比呈现图像，使其尽可能地填充屏幕，而不会拉伸或挤压透视，以保持图像的原始高宽比。

建议？

# c# - 输入字符串的格式不正确

> ID：12047940
> 
> 赞同：2
> 
> 时间：2012-08-21T03:04:18.007
> 
> 标签：c#, .net, asp.net-mvc, linq, entity-framework

当我在我的项目中运行这个函数时，我得到了一个 FormatException。

但我*可以*在“LinqPad”中运行相同的 LINQ 表达式

```
 private List<TNews> GetPagedEntities(int pagenum, int pagesize, IQueryable<TNews> query)
  {
            var totalCnt = query.Count();
            int recordsCount = (totalCnt < CONST_QUERY_COUNT) ? totalCnt : CONST_QUERY_COUNT;

            SetPagerValues(pagenum, pagesize, recordsCount);

            var newsRslt = (from m in query
                            orderby m.PnacDT descending
                            select m).Take(recordsCount).Skip(pagenum * pagesize).Take(pagesize).ToList();
            return newsRslt;
   } 
```

ps：`CONST_QUERY_COUNT==10000`

这个例外是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T03:36:38.467

可能是你的实体模型和数据库有一些区别。它可能是列的数据类型不匹配。

# macos - 为什么我的内核扩展没有写入 kernel.log

> ID：12047943
> 
> 赞同：0
> 
> 时间：2012-08-21T03:04:27.810
> 
> 标签：macos, kernel, kernel-extension, xnu

我有一个简单的内核扩展：

```
kern_return_t HelloWorld_start (kmod_info_t *ki, void * d) {
    printf("Hello World\n");
    return KERN_SUCCESS;
}

kern_return_t HelloWorld_stop (kmod_info_t * kid, void * d) {
    printf("Goodbye World\n");
    return KERN_SUCCESS;
} 
```

我正在通过以下方式编译和加载：

```
sudo kextload HelloWorld.kext 
```

它出现在 kextstat 列表中：

```
...
  129    0 0xffffff7f80fac000 0x4000     0x4000     com.apple.driver.AppleProfileThreadInfoAction (85.2) <123 6 4 3 1>
  130    0 0xffffff7f80fb0000 0x4000     0x4000     com.apple.driver.AppleProfileTimestampAction (85.2) <123 5 4 3 1>
  132    0 0xffffff7f807c6000 0x2000     0x2000     sk-r-d.HelloWorld (1) <4> 
```

但是，我在 kernel.log（或 system.log）中什么都没有——我应该看到我的 printf() 语句。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-19T14:20:15.893

出于某种原因，控制台应用程序似乎没有显示来自 kexts 的 printf 消息，但日志控制台程序会显示。

我用以下神奇的词取得了成功......

`log stream --predicate 'eventMessage contains "YourMatchingPatternHere"'`

这将生成一个过滤流，仅显示与您的预定义模式匹配的消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-01T19:48:16.840

```
sudo nvram boot-args="kext-dev-mode=1 debug=0x22" 
```

# php - 我可以使用 Ruby On Rails 抓取 URL 的源代码，还是应该使用 PHP？

> ID：12047944
> 
> 赞同：0
> 
> 时间：2012-08-21T03:04:40.780
> 
> 标签：php, javascript, jquery, ruby-on-rails

> **可能重复：**
> [如何在 Ruby 中编写网络爬虫？](https://stackoverflow.com/questions/5947096/how-do-i-write-a-web-scraper-in-ruby)

我需要抓取我的应用程序数据库中列出的许多网站的源代码。我正在检查他们是否链接回我的网站。

是否可以使用 Ruby on Rails，还是应该使用 PHP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T03:25:25.313

您可以只获取网站列表，然后`curl`浏览每个网站。

编辑：或者，你可以试试这个很棒的库，简单的 dom 解析器（http://simplehtmldom.sourceforge.net）：

```
<?php

require 'simple_html_dom.php';

define(MYWEBSITE, "google.com");
$html = file_get_html('http://www.google.com/');

foreach($html->find('a') as $link) {
  $url =  $link->href;
  if (!strpos($url, MYWEBSITE)) {
    // Do whatever you need to do here, we'll just simply echo out
    // the website URL that has your site URL in it.
    echo $url . " contains " . MYWEBSITE ."\n";
  }
}

?> 
```

只是一个简单的技巧，但它可以完成工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T05:13:54.933

用 ruby​​ 刮擦真的很简单。有很多图书馆，但我发现最好的是[机械化](http://mechanize.rubyforge.org/)（它使用 nokogiri 进行解析）。然而，它对 cookie 很聪明，可以轻松地操作表单，并且具有易于使用/灵活的 API。

此外，如果您不想使用 css 选择器，您可以下载文件并自己解析数据（如查找某些字符或其他字符）。

我广泛使用了 PHP 和 Ruby，我个人更喜欢 Ruby，因为它的代码更优雅，而且您的代码通常更短。话虽如此，如果您是编程新手，那么对于编程经验有限的人来说，PHP 可能会稍微容易一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T05:13:54.340

我已经使用 Ruby 和 PHP 来抓取网站。

我真正喜欢 Ruby 的一件事是您可以轻松地使您的抓取成为多线程的。这样，您可以同时运行脚本并抓取 10 - 100 个网站（PHP 使其成为多线程非常痛苦）。

我在 Ruby 中发现了很多很棒的抓取工具，而 PHP 也有其他工具。

我的投票是 Ruby，因为线程易于使用，您可以快速填充数据库并很快发现代码问题，而不必等待 PHP 的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T03:08:51.623

Ruby on Rails 是一个用于构建 Web 应用程序的框架，而不是抓取它们。PHP 是一种通常用于构建网站/应用程序的语言。

两者都可能有网络抓取模块，谷歌会告诉你它们是什么......

这看起来像是一篇关于使用 Ruby 进行抓取的体面的分步帖子：[http ://www.andrewsturges.com/2011/09/how-to-harvest-web-data-using-ruby-and.html](http://www.andrewsturges.com/2011/09/how-to-harvest-web-data-using-ruby-and.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T05:09:59.027

PHP 将使这非常容易，因为 curl 的使用非常简单： [http ://www.php.net/manual/en/function.curl-exec.php](http://www.php.net/manual/en/function.curl-exec.php)

并且已经有一些库支持高级用法：
[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)
[http://electrokami.com/coding/simple-html-dom-baked-cakephp-component/](http://electrokami.com/coding/simple-html-dom-baked-cakephp-component/)

```
<?php
$mySite = "http://www.mysite.com";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_RETURNTRANSFER , true);

// grab URL and save data into variable
$response = curl_exec($ch);
if(stripos($response,$mySite) !== false){
    echo "site still linked";   
}

// close cURL resource
curl_close($ch);
?> 
```

# c - 从用户空间 C 调用 ioctl 时遇到问题

> ID：12047946
> 
> 赞同：3
> 
> 时间：2012-08-21T03:05:08.897
> 
> 标签：c, linux-kernel, ioctl

我正在尝试实现一个程序来访问嵌入式系统上的内存。我需要访问一些控制寄存器，所以我认为 ioctl 是最好的方法。我已将 ioctl 添加到 fops：

```
struct file_operations aes_fops = {
  read: aes_read,
  write: aes_write,
  unlocked_ioctl: aes_ioctl,
  open: aes_open,
  release: aes_release
}; 
```

并设置了功能：

```
int aes_ioctl(struct inode *inode,  
     struct file *file, 
     unsigned int ioctl_num,    
     unsigned long ioctl_param){

     printk(KERN_INFO "in ioctl\n");
....
} 
```

但我没有进入这个功能。这是我的用户空间代码。如果我这样做完全错误，请帮助我理解。

```
int main(int argc, char* argv[]){
    int fd = fopen("/dev/aes", "r+");
    ioctl(fd, 0, 1);
    fclose(fd);
} 
```

一些代码显然是针对旧内核的，因为我正在为一个修改了旧版本 Linux 的嵌入式系统进行编译。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T04:10:27.323

您的代码的问题是您使用的请求号 - `0`。内核保留了一些请求号供内部使用。内核将请求号视为一个结构，将其分离为字段并为其调用正确的子系统。

请参阅 Documentation/ioctl/ioctl-number.txt（来自 Linux 3.4.6）：

```
Code  Seq#(hex) Include File            Comments
========================================================
0x00    00-1F   linux/fs.h              conflict!
0x00    00-1F   scsi/scsi_ioctl.h       conflict!
0x00    00-1F   linux/fb.h              conflict!
0x00    00-1F   linux/wavefront.h       conflict!
0x02    all     linux/fd.h
0x03    all     linux/hdreg.h
... 
```

根据您所处的环境，您必须遵循内核指南来添加新的 ioctls()：

```
If you are adding new ioctl's to the kernel, you should use the _IO
macros defined in <linux/ioctl.h>:

    _IO    an ioctl with no parameters
    _IOW   an ioctl with write parameters (copy_from_user)
    _IOR   an ioctl with read parameters  (copy_to_user)
    _IOWR  an ioctl with both write and read parameters. 
```

`Documentation/ioctl/ioctl-decoding.txt`有关这些数字的结构的更多详细信息，请参阅内核自己的文档。

在实践中，如果您选择 Code 1，这意味着从`0x100`直到开始`0x1ff`，您就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T03:19:29.797

你的`aes_fops`结构设置正确吗？我从来没有见过这样做的。我所有的代码是：

```
.unlocked_ioctl = aes_ioctl, 
```

而不是：

```
unlocked_ioctl: aes_ioctl, 
```

据我所知（以及在定义期间），结构中的冒号（如您在设置中所使用的）字段用于*位字段，而不是初始化各个字段。*

换句话说，尝试：

```
struct file_operations aes_fops = {
    .read            = aes_read,
    .write           = aes_write,
    .unlocked_ioctl  = aes_ioctl,
    .open            = aes_open,
    .release         = aes_release
}; 
```

* * *

注意：似乎 gcc 曾经允许结构字段初始化的这种变体，但自 gcc 2.5 以来它已经过时（参见[此处](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Designated-Inits.html)，直接来自 GCC 文档）。您确实应该使用正确的方法（即受 ISO 标准支持的方法）来执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T14:45:19.607

在不知道返回的错误的情况下，很难说...我的第一个问题是您对文件描述符的权限。我以前见过类似的问题。首先，如果您查看 ioctl 的返回，您可以获得有关失败的更多信息：

```
#include <errno.h>
int main(int argc, char* argv[])
{
    long ret;     
    int fd = fopen("/dev/aes", "r+");
    ret = ioctl(fd, 0, 1);
    if (ret < 0)
        printf("ioctl failed. Return code: %d, meaning: %s\n", ret, strerror(errno));
    fclose(fd); 
} 
```

检查返回值，这应该有助于您搜索。**为什么要检查？请参阅帖子的底部...** 接下来要检查是否是权限问题，请运行以下命令：

```
ls -l /dev/aes 
```

如果你看到类似的东西：

```
crw------- 1 root root 10, 57 Aug 21 10:24 /dev/aes 
```

然后只需发出一个：

```
sudo chmod 777 /dev/aes 
```

再试一次。我敢打赌它会为你工作。（请注意，我使用 root 权限运行它，因为 root 是我的 mod 版本的所有者）

如果权限已经OK，那么我还有一些建议：

1) 对我来说，fopen/fclose 的使用很奇怪。你真的只需要这样做：

```
int fd = open("/dev/aes");
close(fd); 
```

我的系统甚至不允许您的代码按原样编译。

2）您的 IOCTL 参数列表很旧，我不知道您编译的内核版本是什么，但最近的内核使用这种格式：

```
long aes_ioctl(struct file *file, unsigned int ioctl_num, unsigned long ioctl_param){ 
```

注意 inode 的移除和返回类型的改变。当我在我的系统上运行您的代码时，我进行了这些更改。

祝你好运！

**注意：**当我们“没有进入 ioctl”时，为什么要检查返回？让我给你举个例子：

```
//Kernel Code:
//assume include files, other fops, exit, miscdev struct, etc. are present

long hello_ioctl(struct file *file, unsigned long ioctl_num, unsigned long ioctl_param) {
    long ret = 0;
    printk("in ioctl");
    return ret;
}

static const struct file_operations hello_fops = {
    owner: THIS_MODULE,
    read: hello_read,
    unlocked_ioctl: hello_ioctl,
};

static int __init hello_init(void) {
    int ret;
    printk("hello!\n");
    ret = misc_register(&hello_dev); //assume it worked...
    return ret;
} 
```

用户空间代码：

```
//assume includes

void main() {
  int fd;
  long ret;
  fd = open("/dev/hello");
  if(fd) {
    c = ioctl(fd, 0, 1);
    if (c < 0)
      printf("error: %d, errno: %d, meaning: %s\n", c, errno, strerror(errno));
    close(fd);
  }
  return;
} 
```

那么输出是什么？让我们假设 /dev/hello 上有错误的文件权限（这意味着我们的用户空间程序无法访问 /dev/hello）。

dmesg | 尾部显示：

```
[ 2388.051660] Hello! 
```

所以看起来我们没有“进入”ioctl。程序的输出是什么？

```
error: -1, errno: 9, meaning: Bad file descriptor 
```

很多有用的输出。显然 ioctl 调用做了一些事情，只是不是我们想要的。现在更改权限并重新运行，我们可以看到新的 dmesg：

```
[ 2388.051660] Hello!
[ 2625.025339] in ioctl 
```

# knockout.js - 具有多个函数调用的 KnockoutJS 和级联下拉菜单

> ID：12047948
> 
> 赞同：0
> 
> 时间：2012-08-21T03:05:25.643
> 
> 标签：knockout.js

我是新来的 KnockoutJS 并使用 SPServices 与 SharePoint 列表交互。我正在尝试创建一个级联下拉菜单并且有点卡住了。本质上，我有一个位置列表和该位置的建筑物列表。选择位置后，我构建了一个 CAML 查询来过滤掉建筑物下拉菜单中显示的数据库。真的很感谢大家在这个网站上的工作。在过去的几个月里，对我的帮助很大，但似乎在这个问题上找不到任何东西。下面代码上的结束状态是一个适用于位置的下拉菜单，但一旦显示建筑物，它是一个空的下拉菜单。

**Javascript：**

```
var bm = new BuildingModel();
var lm = new LocationModel();

var ViewModel = function(){        

var vm  = this;

vm.locationID = ko.observable();
vm.buildingID = ko.observable(); 
vm.locations = lm.getLocationsAsJSON();

  vm.buildings = ko.computed(function(){

        if(vm.locationID() === undefined){              
        return bm.getBuildingsAsJSON();
        } else {
            return bm.getBuildingsAsJSON(vm.locationID().id());
    }

  }); 
```

本质上，getXXXXAsJSON 从两个不同的 SharePoint 列表返回建筑物/位置对象的 observableArray。请注意，对象中的每个属性都定义为 ko.observable()。我所看到的所有内容都显示了基于单个文件的链接，该文件试图使用 AJAX 调用自动填充选择框，因为另一个下拉变量（在本例中为 locationID）已更新。这些功能可以正常工作，因为以下工作（只是没有链接两个下拉菜单）：

```
vm.locations = lm.getLocationsAsJSON();
vm.buildings = bm.getBuildingsAsJSON(); 
```

**HTML：**

```
<select data-bind="options: locations,  optionsText: function(location){return location.longName}, value: locationID, optionsCaption:'Choose...'"></select>
<select data-bind="options: buildings, optionsText: 'number', value: buildingID, optionsCaption: 'Choose...'"></select> 
```

我认为很简单的事情并没有发生。我感觉很近，只需要一脚。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:06:32.390

如果要将此计算绑定到选择控件，则不应在计算中返回可观察数组。Computed is function and observable array is function too when options binding tries to parse you computed value it uses `ko.utils.unwrapObservable()`function to get real value but it returns another function (observable Array) instead of real data.

有 3 种可能的修复方法：

第一个选项：调用`ko.utils.unwrapObservable()`你的`bm.getBuildingsAsJSON()`函数。您计算的结果如下：

```
 vm.buildings = ko.computed(function(){

        if(vm.locationID() === undefined){              
        return ko.utils.unwrapObservable(bm.getBuildingsAsJSON());
        } else {
            return ko.utils.unwrapObservable(bm.getBuildingsAsJSON(vm.locationID().id()));
    } 
```

第二个选项：在调用`bm.getBuildingsAsJSON()`函数后添加（）。您计算的结果如下：

```
 vm.buildings = ko.computed(function(){

        if(vm.locationID() === undefined){              
        return bm.getBuildingsAsJSON()();
        } else {
            return bm.getBuildingsAsJSON(vm.locationID().id())();
    } 
```

第三个选项：不要在`bm.getBuildingsAsJSON`函数中返回可观察数组。

# json - 遍历并打印嵌套的 JSON 数据

> ID：12047950
> 
> 赞同：0
> 
> 时间：2012-08-21T03:05:54.450
> 
> 标签：json

我有一个包含嵌套格式的 JSON 数据的文件。我想遍历这些数据并以 JQuery 列表视图的形式输出它，但我无法这样做。

JSON 数据采用以下格式：

```
{
  "Name":"A",
  "Company": "B",
  "Address": {
    "Street":"ABC",
    "City":"XYZ"
  }
} 
```

我尝试了以下方法：

```
$.each(data, function(key,value) {
   $('#companyDetails').append('<li>'+key+'<span class="ui-li-aside">'+value+'</span></li>');
}); 
```

但这不会正确输出“地址”块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T05:30:05.407

使用**value.Address.City**和**value.Address.Street**怎么样？访问 JSON 数据的最常见方法是通过点表示法。这只是对象名称后跟一个句点，然后是您要访问的名称/属性。[http://www.hunlock.com/blogs/Mastering_JSON_%28_JavaScript_Object_Notation_%29](http://www.hunlock.com/blogs/Mastering_JSON_%28_JavaScript_Object_Notation_%29)

例如，

```
$.each(data, function(key,value) {
    $('#companyDetails').append('<li>'+key+'<span class="ui-li-aside">'+ value.Address.Street + "," + value.Address.City +'</span></li>');
}); 
```

对于详细编码，

```
<html>
<head>
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        function display(data) {
            $.each(data, function(key,value) {
                $('#companyDetails').append('<li>'+key+'<span class="ui-li-aside">'+ value.Address.Street + "," + value.Address.City +'</span></li>');
            });
        }
        $(document).ready(function() {
            var data = [
                {
                    "Name" : "ABC",
                    "Company" : "AA Company",
                    "Address" : {
                        "Street" : "123 Main Street",
                        "City" : "Yangon"
                    }
                },
                {
                    "Name" : "DEF",
                    "Company" : "BB Company",
                    "Address" : {
                        "Street" : "8941 Mandalay",
                        "City" : "NaypiDaw"
                    }
                }           
            ];
        display(data);
        });
    </script>
</head>
<body>
<div id="companyDetails"></div>
</body>
</html> 
```

对于您不知道 json 文件中有哪些数据的情况，

```
function display(data,flag) {
    $.each(data, function(key,value) {
    if ($.isPlainObject(value)) {
        if(flag == true)
        {
            $('#companyDetails').append('<b>' + "Company " + (key + 1) + '</b>');
        }
        display(value,false);
    }
    else
        $('#companyDetails').append('<li>' + key +  " : " +'<span class="ui-li-aside">'+ value +'</span></li>');
    });
} 
```

在调用显示函数时，

```
var flag = true;
display(data,flag); 
```

您的输出将是 ![在此处输入图像描述](../Images/dc04e8ac8d52464b2117263ffed7ed7f.png)我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T03:56:50.233

我不知道这是否是最有效的方法，但我认为它可以满足您的需求。

假设：数据是一个数组，每个数组元素都是一个对象（散列）。仅在 Windows 上的 Chrome 中测试。

```
<html>
<head>
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        function read_record(data) {
            $.each(data, function(key,value) {
                if ($.isPlainObject(value))
                    read_record(value);
                else
                    $('#details').append('<li>' + key + ' = ' + value + '</li>');
            });
        }

        $(document).ready(function() {
            var data = [
                {
                    "Name" : "John",
                    "Company" : "Doe",
                    "Address" : {
                        "Street" : "123 Main Street",
                        "City" : "San Francisco"
                    }
                },
                {
                    "Name" : "Jane",
                    "Company" : "Johnson",
                    "Address" : {
                        "Street" : "57 Heinz Lane",
                        "City" : "Dallas"
                    }
                }           
            ];

            read_record(data);
        });
    </script>
</head>
<body>
<ul id="details"></ul>
</body>
</html> 
```

产生：

*   姓名 = 约翰
*   公司 = 能源部
*   街道 = 123 大街
*   城市 = 旧金山
*   姓名 = 简
*   公司 = 约翰逊
*   街 = 57 亨氏巷
*   城市 = 达拉斯

# android - Android中使用AudioTrack类连续合成静态波形

> ID：12047954
> 
> 赞同：0
> 
> 时间：2012-08-21T03:06:20.340
> 
> 标签：android, audio, audiotrack

下面是我的`play()`方法的代码，它简单地生成一组任意频率并将它们混合成一个音调。

问题是它只播放一瞬间 - 我需要连续播放它。我将不胜感激有关如何使用 Android 中的 AudioTrack 类不断生成声音的建议。我相信它与`MODE_STREAM`常数有关，但我不太清楚如何。

这是 AudioTrack 类文档的链接：

[http://developer.android.com/reference/android/media/AudioTrack.html](http://developer.android.com/reference/android/media/AudioTrack.html)

编辑：我忘了提到一个重要方面，它不能循环。由于有时会混合多达 50 多个频率，因此听起来会很不稳定，因为所有频率峰值都没有最小的公分母 - 或者它离波形太远而无法存储为一个声音。

```
/**
 * play - begins playing the sound
 */
public void play() {
    // Get array of frequencies with their relative strengths
    double[][] soundData = getData();

    // Track samples array
    final double samples[] = new double[1024];

    // Calculate the average sum in the array and write it to sample
    for (int i = 0; i < samples.length; ++i) {
            double valueSum = 0;

            for (int j = 0; j < soundData.length; j++) {
                valueSum += Math.sin(2 * Math.PI * i / (SAMPLE_RATE / soundData[j][0]));
            }

            samples[i] = valueSum / soundData.length;
    }

    // Obtain a minimum buffer size
    int minBuffer = AudioTrack.getMinBufferSize(SAMPLE_RATE, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT);

    if (minBuffer > 0) {

        // Create an AudioTrack
        mTrack = new AudioTrack(AudioManager.STREAM_MUSIC, SAMPLE_RATE, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
                AudioFormat.ENCODING_PCM_16BIT, minBuffer, AudioTrack.MODE_STREAM);

        // Begin playing track
        mTrack.play();

        // Fill the buffer
        if (mBuffer.length < samples.length) {
             mBuffer = new short[samples.length];
        }

        for (int k = 0; k < samples.length; k++) {
            mBuffer[k] = (short) (samples[k] * Short.MAX_VALUE);
        }

        // Write audio data to track for real-time audio sythesis
        mTrack.write(mBuffer, 0, samples.length);

    }

    // Once everything has successfully begun, indicate such.
    isPlaying = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:31:35.993

看起来代码几乎就在那里。它只需要一个循环来不断生成样本，将它们放入缓冲区，然后将它们写入 AudioTrack。现在只有一个完整的缓冲区在退出之前被写入，这就是它停止如此迅速的原因。

```
void getSamples(double[] samples) {
    // Get array of frequencies with their relative strengths
    double[][] soundData = getData();

    // Calculate the average sum in the array and write it to sample
    for (int i = 0; i < samples.length; ++i) {
            double valueSum = 0;

            for (int j = 0; j < soundData.length; j++) {
                valueSum += Math.sin(2 * Math.PI * i / (SAMPLE_RATE / soundData[j][0]));
            }

            samples[i] = valueSum / soundData.length;
    }
}

public void endPlay() {
    done = true;
}

/**
 * play - begins playing the sound
 */
public void play() {
    // Obtain a minimum buffer size
    int minBuffer = AudioTrack.getMinBufferSize(SAMPLE_RATE, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT);

    if (minBuffer > 0) {

        // Create an AudioTrack
        mTrack = new AudioTrack(AudioManager.STREAM_MUSIC, SAMPLE_RATE, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
            AudioFormat.ENCODING_PCM_16BIT, minBuffer, AudioTrack.MODE_STREAM);

        // Begin playing track
        mTrack.play();

        // Track samples array
        final double samples[] = new double[1024];

        while (!done) {
            // Fill the buffer
            if (mBuffer.length < samples.length) {
                 mBuffer = new short[samples.length];
            }

            getSamples(samples);

            for (int k = 0; k < samples.length; k++) {
                mBuffer[k] = (short) (samples[k] * Short.MAX_VALUE);
            }

            // Write audio data to track for real-time audio sythesis
            mTrack.write(mBuffer, 0, samples.length);

            // Once everything has successfully begun, indicate such.
            isPlaying = true;
        }
    }

    // Once everything is done, indicate such.
    isPlaying = false;
} 
```

# c++ - 如果最初发出 IO 的线程在 Windows 8 下的 ReadFile 中阻塞，则 GetQueuedCompletionStatus 无法从 IOCP 出列 IO

> ID：12047960
> 
> 赞同：12
> 
> 时间：2012-08-21T03:06:52.027
> 
> 标签：c++, sockets, windows-8, winsock, iocp

我的应用程序在切换到 Windows 8 后停止工作。我花了几个小时来调试问题，发现 IOCP 在 Windows 8 和以前的版本之间的行为不同。我提取了必要的代码来演示和重现问题。

```
SOCKET sListen;

DWORD WINAPI WorkerProc(LPVOID lpParam)
{
    ULONG_PTR dwKey;
    DWORD dwTrans;
    LPOVERLAPPED lpol;
    while(true)
    {
        GetQueuedCompletionStatus((HANDLE)lpParam, &dwTrans, &dwKey, (LPOVERLAPPED*)&lpol, WSA_INFINITE);
        printf("dequeued an IO\n");
    }
}
DWORD WINAPI StartProc(LPVOID lpParam)
{
    WSADATA WsaData;
    if (WSAStartup(0x202,&WsaData)!=0) return 1;
    sListen = WSASocket(AF_INET, SOCK_STREAM, 0, NULL, 0, WSA_FLAG_OVERLAPPED);
    SOCKADDR_IN si;
    ZeroMemory(&si,sizeof(si));
    si.sin_family = AF_INET;
    si.sin_port = ntohs(1999);
    si.sin_addr.S_un.S_addr = INADDR_ANY;
    if(bind(sListen, (sockaddr*)&si, sizeof(si)) == SOCKET_ERROR) return 1;
    listen(sListen, SOMAXCONN);
    HANDLE hCompletion = CreateIoCompletionPort(INVALID_HANDLE_VALUE, 0, 0, 0);
    CreateIoCompletionPort((HANDLE)sListen, hCompletion, (DWORD)0, 0);
    CreateThread(NULL, 0, WorkerProc, hCompletion, 0, NULL);
    return 0;
}
DWORD WINAPI AcceptProc(LPVOID lpParam)
{
    DWORD dwBytes;
    LPOVERLAPPED pol=(LPOVERLAPPED)malloc(sizeof(OVERLAPPED));
    ZeroMemory(pol,sizeof(OVERLAPPED));
    SOCKET sClient = WSASocket(AF_INET, SOCK_STREAM, 0, NULL, 0, WSA_FLAG_OVERLAPPED);
    BOOL b = AcceptEx(sListen, 
        sClient,
        malloc ((sizeof(sockaddr_in) + 16) * 2), 
        0,
        sizeof(sockaddr_in) + 16, 
        sizeof(sockaddr_in) + 16, 
        &dwBytes, 
        pol);
    if(!b && WSAGetLastError() != WSA_IO_PENDING)   return 1;
    HANDLE hPipe=CreateNamedPipeA("\\\\.\\pipe\\testpipe",PIPE_ACCESS_DUPLEX,PIPE_TYPE_BYTE | PIPE_READMODE_BYTE | PIPE_WAIT,PIPE_UNLIMITED_INSTANCES,4096,4096,999999999,NULL);
    BYTE chBuf[1024]; 
    DWORD  cbRead; 
    CreateFileA("\\\\.\\pipe\\testpipe", GENERIC_READ |GENERIC_WRITE,  0,NULL, OPEN_EXISTING, 0, NULL);
    ReadFile(hPipe,chBuf,1024, &cbRead,NULL);
    return 0;
}

int main()
{
    printf ("Starting server on port 1999...");
    WaitForSingleObject(CreateThread(NULL, 0, StartProc, NULL, 0, NULL),INFINITE);
    CreateThread(NULL, 0,AcceptProc, NULL, 0, NULL);
    printf ("done\n");
    Sleep(10000000);
    return 0;
} 
```

该程序在端口 1999 上侦听并发出 async accpet 然后读取阻塞管道。我已经在 Windows 7、8、XP、2003、2008 上测试了这个程序，在“telnet 127.0.0.1 1999”之后，“dequeued an IO\n”将打印在除 Windows 8 之外的控制台上。

关键是最初发出异步操作的线程不能在 ReadFile 中阻塞，否则 GetQueuedCompletionStatus 永远不会使该 IO 出队，直到 ReadFile 在 Windows 8 上返回。

我还使用“scanf”而不是读取管道进行了测试，结果是相同的，因为“scanf”最终会调用 ReadFile 来读取控制台。我不知道 ReadFile 是唯一受影响的功能还是可能有其他功能。

我能想到的是使用专用线程来发出异步操作，并且所有业务逻辑都与该专用线程通信以执行接受/发送/接收。但是额外的层意味着额外的开销，有什么方法可以在 windows 8 上实现与以前版本的 windows 相同的性能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T15:59:11.000

请参阅[https://connect.microsoft.com/WindowsServer/feedback/details/760161/break-change-to-acceptex-and-iocp-in-server-2012-and-windows-8](https://connect.microsoft.com/WindowsServer/feedback/details/760161/breaking-change-to-acceptex-and-iocp-in-server-2012-and-windows-8)

这是一个错误，MS 的官方回应是*“我们已将此消息传递给基础操作系统团队，他们将在未来更新时考虑此问题。我正在解决这个被推迟的问题。”*

**注意：**我今天（2013 年 9 月 12 日）在完全修补的 Windows 8 版本上运行了此测试，以准备测试 Windows 8.1，发现问题现在似乎已在 Windows 8 上得到修复。我不知道它什么时候修好的。

# cuda - CUDA推力：如何实现支持“stencil”的“partition”？

> ID：12047961
> 
> 赞同：3
> 
> 时间：2012-08-21T03:07:26.783
> 
> 标签：cuda, thrust

假设有一个整数数组：

```
A[]={2, 2, 9, 8, 5, 7, 0, 6} 
```

和模板：

```
B[]={1, 0, 0, 1, 1, 1, 0, 1} 
```

我的问题是我们如何根据 B[] 重新排列 A[] 使得如果 B[i]==1，B[j]==0，那么 A[i] 将保证在 A[j] 之前新数组，应如下所示：

```
C[]={2, 8, 5, 7, 6, 2, 9, 0} 
```

PS：我发现[“分区”](http://thrust.github.com/doc/group__partitioning.html)功能几乎是答案，只是它只支持谓词。有什么解决方法吗？

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T04:41:35.333

既然已经实现了 stencil （可能需要从官方 Thrust 存储库获取源代码`thrust::partition`）[，](https://github.com/thrust/thrust)这可以通过以下方式实现：`thrust::stable_partition`

```
#include <thrust/partition.h>

struct is_one
{
  __host__ __device__
  bool operator()(const int &x)
  {
    return x == 1;
  }
};

// Partition values on device thanks to stencil
thrust::stable_partition(d_A.begin(),
                         d_A.end(),
                         d_B.begin(),
                         is_one()); 
```

这导致：

```
    A = 0   1   2   3 4   5   6 7   8   9
    B = 0   1   1   0 0   1   0 0   1   0
    C =    1   2   5   8   0 3 4 6 7 9

```

此实现更有效，因为我们不对两个分区中的值进行排序。[**此处**](https://stackoverflow.com/a/16602201/1043187)提供了一个类似且更复杂的示例（答案中有更多详细信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:52:10.930

这可以使用[`thrust::stable_sort_by_key()`](http://thrust.github.com/doc/group__sorting.html).

# android - 如何为每个 android 项目设置 debug.keystore？

> ID：12047962
> 
> 赞同：5
> 
> 时间：2012-08-21T03:07:29.783
> 
> 标签：android, adt, android-sdk-tools

我正在开发一些需要系统 UID 的应用程序。所以我用AOSP的platform.pk8和platform.x509.pem制作了一个特殊的keystore文件“PFDe​​bug.keystore”。

我在 Eclipse >window >preferences >android >build >cutstom 调试密钥库中设置它。这很好用。

但我也在开发使用我自己的 debug.keystore 文件的非特权应用程序。所以我必须为每个构建更改密钥库文件。我知道当我设置空白时使用默认的 debug.keystore 。

如何为每个 android 项目绑定调试密钥库文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T08:06:26.190

使用gradle是可行的。对于每个项目，您都有一个 build.gradle，您可以在其中指定signingConfig。像那样 ：

```
 signingConfigs {
        debug {
            storeFile file("../debug.keystore")
        }

        release {
            storeFile file("../prod.keystore")
            storePassword 'prod'
            keyAlias 'prod'
            keyPassword 'prod'
        }
    } 
```

# javascript - 构建 HTML5 Canvas/JS 游戏

> ID：12047969
> 
> 赞同：9
> 
> 时间：2012-08-21T03:08:16.790
> 
> 标签：javascript, html, canvas, scroll

我是 HTML5/Canvas/Game 编程的新手，但在阅读了几本书后一直在修改它。我认为我对事情的发展有相当好的了解。这个问题提出了几个较小的问题，但总的来说基本上是一个“结构方法”的问题。我不期待冗长的回应，但希望这里和那里的小指针:) 这是一个非滚动的链接，目前相当无聊的超级马里奥世界。

[超级马里奥世界测试](http://jsfiddle.net/Crusader12/m6ur3/9/)

**注意：控件是左/右和空格键跳跃。这只是我现在正在学习的 Firefox 的设置。**

* * *

## 我在这一点上做错了吗？

目前我只关注马里奥如何跑和跳，并认为我已经把它搞定了。硬币盒没有任何作用，背景只是为了外观而加载的图像。这是我的方法，如果有什么完全错误的，请告诉我：

*   允许马里奥通过 2 Y 速度（重力和跳跃变量）进行跳跃
*   允许马里奥以 1 速度运行（左或右“摩擦”+ 加速度）
*   根据 keypress/keydown 使用和定位精灵
*   我不确定这是否正确，但我正在使用构造函数来构建一个对象，然后在主动画循环中我调用该对象的原型函数来更新所有变量并重绘对象。
*   我每帧都清理整个画布
*   我是否应该将其拆分为不仅仅是一个绘图函数，比如 Mario.move()？
*   我设置了一个 GroundLevel 和一个 JumpLevel 变量来创建 2 个游戏平面。JumpLevel 设置为允许控制马里奥在飞行中可以跳多高。这两个地方可以让地面像一座小山一样上升 - 保持重力超过马里奥的跳跃力的点与地面的距离相同。
*   为清楚起见，所有内容都被分成不同的 JS 文件，但显然会合并。

* * *

## 向前进：

现在我已经完成了马里奥如何移动的设置（我认为我可能会做一些其他的小事情，比如蘑菇向上/向下和射击火球）。我想我可以弄清楚，但是在可视化以下内容以及 HTML5/Canvas 如何轻松处理这一点时，我真的迷失了：

*   滚动背景（我尝试设置地面瓷砖并使用屏幕环绕，但这似乎会导致很多不均匀的问题，因为我正在向相反方向移动瓷砖。不幸的是，由于我试图考虑加速，这扔掉计数并在地面上造成间隙。我放弃了这个想法。画布下方带有大背景图像的 DIV 会是最好的解决方案吗？

*   敌人：我会以同样的方式创建敌人并在每一帧中对每个敌人运行一个循环来检测碰撞吗？

*   背景框：我试图让马里奥站在背景中的框上，但不确定如何处理。我目前为马里奥设置了边界以留在画布上，我是否继续扩展这些条件以根据框设置不同的边界？我可以看到在屏幕上显示几个框并以这种方式进行操作会有点疯狂，尤其是如果我要对敌人进行相同的命中测试？我知道我在这里遗漏了一些东西......

*   水平运动：这有点相关。当按下 Right 键时，基本上关卡中的所有内容都需要向左移动。我是否需要在每个动画帧中追踪所有可能触及马里奥的物体的所有位置（让他站立的盒子和让他碰撞的敌人）？这似乎会变得效率低下？

谢谢大家！我会用结果/解决方案来更新这个:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T03:21:08.167

哇，好吧。我真的很喜欢你的问题，因为你显然已经对此做了很多思考，但部分*原因*是它非常广泛和对话。你最好找个论坛问这个问题。

...话虽如此，我将回答我有资格回答的少数几个点，没有特别的顺序。:)

*   水平移动：这是一种奇怪（阅读：低效）的方式。我不会根据屏幕上的位置进行任何计算：为关卡中的所有内容跟踪一组规范的、与相机无关的坐标，并更新视觉效果以匹配。这将阻止您遇到奇怪的琐碎问题，其中帧速率会影响您可以通过和不能通过的东西，或者导致速度较慢的计算机让马里奥有时会穿过敌人而不会受到损坏。以这种方式跟踪位置将顺便解决您的许多其他问题。

*   您绝对应该将其拆分为多个功能。将移动代码和渲染代码放在同一个地方会让你感到厌烦，特别是通过与你的更新/刷新率进行恶意交互。这基本上意味着每次玩家进行棘手的跳跃时，游戏都会进行比平时更多的更新，这将使动画/命中检测/等变得更不可能均匀。

*   敌人：我建议将其与其他所有内容一起使用。对所有东西进行一次命中检测传递，如果你击中某物，请检查它是什么。您可以尝试通过仅针对自身 100 像素内的对象检查任何给定实体来优化这一点，但如果您这样做，您将需要为每个敌人运行单独的碰撞检测事件。让敌人互相夹击在计算上会更便宜。

编辑：我想澄清我关于“水平运动”的第一点。本质上，您**不想**做的是每次相机移动屏幕上的每个实体，**或者**将所有实体位置存储为与相机位置的偏移量（在这种情况下，您仍然必须有效地移动所有内容，每次相机移动。）

您理想的方法是使用从关卡的绝对左上角偏移的 X/Y 坐标存储您的敌人、方块、地形位置（在开始时）。为了渲染帧，您基本上会这样做: （伪代码，因为我们在谈论一种假设的级别格式！）

```
function GetVisible(x,width,level_entities_array) {
  for (i = 0; i < count(level_array); i++){
    if (level_entities_array[i][x] > x && level_entities_array[i][x] < x+width) {
      visible_elements[] = level_entities_array[i][x];
    }
  }
return visible_elements;
} 
```

繁荣，你已经拥有了应该在窗户内的一切。现在你从实体的位置和 ZAP 中减去相机的`x`偏移量`x`，你就得到了它在画布上的位置。摆成一个团队，因为事情变得真实了。

你会注意到我没有在 Y 轴上进行剔除。这可以通过外推来纠正，我猜你可以处理，因为你已经做到了这一点。如果您想进行任何马里奥风格的垂直探索，这将是必要的。

是的，我知道我的伪代码看起来像 C# 和 JavaScript 的邪恶之子。对不起，这就是我在晚上 11:30 滚动的方式。;)

# multithreading - 用于在 SWF 中播放外部 SWF 的线程模型？

> ID：12047972
> 
> 赞同：0
> 
> 时间：2012-08-21T03:08:44.777
> 
> 标签：multithreading, flash, animation

我正在设计一个允许用户使用动画表情符号（使用外部 SWF 文件定义）并将它们显示在另一个 SWF 文件中的应用程序。只要一次只有非常小的 # 个表情符号，此方法就可以工作，但如果数量显着增加，性能就会开始缓慢爬行......瓶颈不是网络，因为只有几个表情符号可供选择，我们只是在同时显示它们时遇到了问题。

Flash 线程模型如何处理播放外部 SWF？我们可以尝试在单独的线程上播放它们，还是会导致问题（就像在 Swing 和 Cocoa 等中一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:43:43.463

很难说，当您的意思是加载多个小型 swf 时，它们是复制还是您正在创建新实例，具有新属性等...

我已经设法制作了一个 20 线扑克机，它使用 swf 来处理所有图像、动画。这些文件每个大约 600Kb，屏幕上一次有 12 个动画（取决于获胜者）；

但是我是如何做到的，每次我需要它时将它们加载到一个数组中。并从那里访问它。我似乎没有任何问题。

它不是一个答案，但你能解释一下你的加载方法，或者放一个示例 html 服务器，我可以看到你的问题到底是什么

# ruby-on-rails - 使用 spork 运行 rspec 时未修改 Carrierwave store_dir

> ID：12047973
> 
> 赞同：3
> 
> 时间：2012-08-21T03:08:46.277
> 
> 标签：ruby-on-rails, rspec, carrierwave, spork

我已经按照[说明如何为 carrierwave uploads 定义特定于测试的存储目录](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Cleanup-after-your-Rspec-tests)，这建议打开`CarrierWave::Uploader::Base`类并重新定义`store_dir`，`cache_dir`如下所示：

```
if defined?(CarrierWave)
  CarrierWave::Uploader::Base.descendants.each do |klass|
    next if klass.anonymous?
    klass.class_eval do
      def cache_dir
        "#{Rails.root}/spec/support/uploads/tmp"
      end 

      def store_dir
        "#{Rails.root}/spec/support/uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
      end 
    end 
  end
end 
```

这就像一个魅力，除了当我用 spork 运行 rspec 时，它无法修改类并且上传存储在默认位置。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T02:55:10.363

`AvatarUploader`在我们的项目中工作的其他人通过在行前添加一行来解决这个问题`CarrierWave::Uploader::Base.descendants.each`，如下所示：

```
if defined?(CarrierWave)
  AvatarUploader # load AvatarUploader class 
  CarrierWave::Uploader::Base.descendants.each do |klass|
  #... 
```

不完全确定为什么会这样，但确实如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T17:00:32.320

对于任何来到这里的人来说，除了接受的答案之外几乎没有什么：

如果在调用 CarrierWave::Uploader::Base.descendants 之前未加载上传器类，它将返回空数组，因此要么在接受的答案中指定每个上传器，要么你可以做这样的事情来要求所有上传器，比如说 rails上传者文件夹

```
Dir["#{Rails.root}/app/uploaders/*.rb"].each {|file| require file}
CarrierWave::Uploader::Base.descendants.each do |klass|
#... 
```

# php - 从 MySQL 获取 JSON 到 Google Charts

> ID：12047980
> 
> 赞同：0
> 
> 时间：2012-08-21T03:09:56.807
> 
> 标签：php, javascript, google-visualization

我正在尝试使用他们的示例和 MySQL 表中的一些数据来填充基本的 Google 面积图。这是我所拥有的：

```
 <?php 
    include("inc/DBConn.php");
    $link = connectToDB();

    $query = "SELECT MONTH(checkout) as Checkout, COUNT(item_id) as BookCount FROM C_books WHERE YEAR(checkout) = 2012 GROUP BY MONTH(created) ASC";
    $result = mysql_query($query) or die(mysql_error());
    while ($row = mysql_fetch_assoc($result)) {
        $numBooks[] = $row;
        };
    $chartData = json_encode($numBooks,JSON_NUMERIC_CHECK);
?>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable(<?php echo $chartData; ?>,false);

    var options = {
      title: 'Total Books',
      hAxis: {title: 'Month',  titleTextStyle: {color: 'red'}}
    };

    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script> 
```

这是我的回声结果：

```
 [{"Checkout":"3","BookCount":"19"},{"Checkout":"4","BookCount":"157"},{"Checkout":"5","BookCount":"30"},{"Checkout":"6","BookCount":"45"},{"Checkout":"7","BookCount":"688"},{"Checkout":"8","BookCount":"391"}] 
```

我知道谷歌不喜欢这样，但我无法理解如何格式化它以便它这样做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:13:35.987

以下是我使用 SQL -> Array -> Google DataTable JSON String 的方法（我没有参考其他人是如何做到的，所以可能有更好的编码方法）。请注意，$task_submissions_arr 是一个数组，其中填充了来自数据库查询的行和列（但未在下面显示）

```
<?php
    // array to be converted to json string and used in google chart's bar chart
    $bar_chart_cols_arr = array( 
                                array('id' => 'Name', 'label' => 'Name', 'type' => 'string'), 
                                array('id' => 'Auto Grading Marks', 'label' => 'Auto Grading Marks', 'type' => 'number'), 
                                array('id' => 'Manual Grading Marks', 'label' => 'Manual Grading Marks', 'type' => 'number'));
    // array to be converted to json string and used in google chart's bar chart
    $bar_chart_rows_arr = array(); 
    for($i=0; $i<count($task_submissions_arr); $i++){
        // array nesting is complex owing to to google charts api
        array_push($bar_chart_rows_arr, array('c' => array(
                                                            array('v' => $task_submissions_arr[$i]['name']), 
                                                            array('v' => $task_submissions_arr[$i]['auto_grading_marks']), 
                                                            array('v' => $task_submissions_arr[$i]['manual_grading_marks'])))  );
    }
?>

<script type="text/javascript">
        google.setOnLoadCallback(draw_bar_chart);
        function draw_bar_chart() {
            var bar_chart_data = new google.visualization.DataTable(
            {
                cols: <?php echo json_encode($bar_chart_cols_arr); ?>, 
                rows: <?php echo json_encode($bar_chart_rows_arr); ?>
            });
// to be continued...
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T04:50:35.397

```
$numBooks[] = array("Checkout", "BookCount");
while ($row = mysql_fetch_array($result)) {
        $numBooks[] = $row;
}; 
```

以所需格式呈现数据

# azure - 如何将捆绑和缩小的文件上传到 Windows Azure CDN

> ID：12047981
> 
> 赞同：27
> 
> 时间：2012-08-21T03:10:34.077
> 
> 标签：azure, asp.net-mvc-4, cdn, bundling-and-minification, asp.net-optimization

我在[`Microsoft.AspNet.Web.Optimization`](https://www.nuget.org/packages/Microsoft.AspNet.Web.Optimization)命名空间中使用 ASP.NET MVC 4 捆绑和缩小功能（例如`@Styles.Render("~/content/static/css")`）。

我想将它与 Windows Azure CDN 结合使用。

我考虑编写自定义`BundleTransform`内容，但内容尚未优化。

我还研究了在运行时解析和上传优化的流，但这对我来说就像是一种黑客行为，我不太喜欢它：

```
@StylesCdn.Render(Url.AbsoluteContent(
    Styles.Url("~/content/static/css").ToString()
    ));

public static IHtmlString Render(string absolutePath)
{
    // get the version hash
    string versionHash = HttpUtility.ParseQueryString(
        new Uri(absolutePath).Query
        ).Get("v");

    // only parse and upload to CDN if version hash is different
    if (versionHash != _versionHash)
    {
        _versionHash = versionHash;

        WebClient client = new WebClient();
        Stream stream = client.OpenRead(absolutePath);

        UploadStreamToAzureCdn(stream);
    }

    var styleSheetLink = String.Format(
        "<link href=\"{0}://{1}/{2}/{3}?v={4}\" rel=\"stylesheet\" type=\"text/css\" />",
        cdnEndpointProtocol, cdnEndpointUrl, cdnContainer, cdnCssFileName, versionHash
        );

    return new HtmlString(styleSheetLink);
} 
```

如何将捆绑和缩小的版本自动上传到我的 Windows Azure CDN？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T03:22:09.690

按照 Hao 的建议，我扩展了 Bundle 和 IBundleTransform。

将 AzureScriptBundle 或 AzureStyleBundle 添加到包中；

```
bundles.Add(new AzureScriptBundle("~/bundles/modernizr.js", "cdn").Include("~/Scripts/vendor/modernizr.custom.68789.js")); 
```

结果是;

```
<script src="//127.0.0.1:10000/devstoreaccount1/cdn/modernizr.js?v=g-XPguHFgwIb6tGNcnvnI_VY_ljCYf2BDp_NS5X7sAo1"></script> 
```

如果未设置 CdnHost，它将使用 blob 的 Uri 而不是 CDN。

班级

```
using System;
using System.Text;
using System.Web;
using System.Web.Optimization;
using System.Security.Cryptography;
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.ServiceRuntime;
using Microsoft.WindowsAzure.StorageClient;

namespace SiegeEngineWebRole.BundleExtentions
{
    public class AzureScriptBundle : Bundle
    {
        public AzureScriptBundle(string virtualPath, string containerName, string cdnHost = "")
            : base(virtualPath, null, new IBundleTransform[] { new JsMinify(), new AzureBlobUpload { ContainerName = containerName, CdnHost = cdnHost } })
        {
            ConcatenationToken = ";";
        }
    }

    public class AzureStyleBundle : Bundle
    {
        public AzureStyleBundle(string virtualPath, string containerName, string cdnHost = "")
            : base(virtualPath, null, new IBundleTransform[] { new CssMinify(), new AzureBlobUpload { ContainerName = containerName, CdnHost = cdnHost } })
        {
        }
    }

    public class AzureBlobUpload : IBundleTransform
    {
        public string ContainerName { get; set; }
        public string CdnHost { get; set; }

        static AzureBlobUpload()
        {
        }

        public virtual void Process(BundleContext context, BundleResponse response)
        {
            var file = VirtualPathUtility.GetFileName(context.BundleVirtualPath);

            if (!context.BundleCollection.UseCdn)
            {
                return;
            }
            if (string.IsNullOrWhiteSpace(ContainerName))
            {
                throw new Exception("ContainerName Not Set");
            }

            var conn = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("DataConnectionString"));
            var blob = conn.CreateCloudBlobClient()
                .GetContainerReference(ContainerName)
                .GetBlobReference(file);

            blob.Properties.ContentType = response.ContentType;
            blob.UploadText(response.Content);

            var uri = string.IsNullOrWhiteSpace(CdnHost) ? blob.Uri.AbsoluteUri.Replace("http:", "").Replace("https:", "") : string.Format("//{0}/{1}/{2}", CdnHost, ContainerName, file);

            using (var hashAlgorithm = CreateHashAlgorithm())
            {
                var hash = HttpServerUtility.UrlTokenEncode(hashAlgorithm.ComputeHash(Encoding.Unicode.GetBytes(response.Content)));
                context.BundleCollection.GetBundleFor(context.BundleVirtualPath).CdnPath = string.Format("{0}?v={1}", uri, hash);
            }
        }

        private static SHA256 CreateHashAlgorithm()
        {
            if (CryptoConfig.AllowOnlyFipsAlgorithms)
            {
                return new SHA256CryptoServiceProvider();
            }

            return new SHA256Managed();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-24T19:19:05.053

所以目前没有很好的方法来做到这一点。我们设想的长期工作流程是添加构建时捆绑支持。然后，您将运行构建任务（如果您愿意，也可以运行 exe）来生成捆绑包，然后能够将它们上传到 AzureCDN。最后，您只需在 BundleCollection 上打开 UseCDN，脚本/样式助手就会自动切换到渲染出指向您的 AzureCDN 的链接，并适当地回退到您的本地包。

就短期而言，我认为您要做的是在首次构建捆绑包时将捆绑包上传到 AzureCDN？

我猜 BundleTransform 是一种方法，它有点像 hack，但你可以在你的包中最后添加一个 BundleTransform。自上次以来，BundleResponse.Content 实际上是最终的捆绑响应。届时，您可以将其上传到您的 CDN。那有意义吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-01T14:20:07.583

您可以将[源域定义为 Azure 的网站](http://i.stack.imgur.com/xoRW4.png)（这可能是在原始问题之后很久才添加的）。

一旦你有了 CDN 端点，你需要允许它的查询字符串，然后你可以通过 CDN 直接引用包：

```
<link href="//az888888.vo.msecnd.net/Content/css-common?v=ioYVnAg-Q3qYl3Pmki-qdKwT20ESkdREhi4DsEehwCY1" rel="stylesheet"/> 
```

我还创建了这个助手来附加 CDN 主机名：

```
public static IHtmlString RenderScript(string virtualPath)
{
    if (HttpContext.Current.IsDebuggingEnabled)
        return Scripts.Render(virtualPath);
    else
        return new HtmlString(String.Format(
            CultureInfo.InvariantCulture, 
            Scripts.DefaultTagFormat, 
            "//CDN_HOST" + Scripts.Url(virtualPath).ToHtmlString()));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-25T14:02:37.643

对于先前评论中要求的@manishKungwani。只需设置 UseCdn 然后使用 cdnHost 重载来创建包。我用它来放入一个 AWS CloudFront 域 (xxx.cloudfront.net)，但事后看来，它应该被命名为更通用的名称，以便与任何其他 CDN 提供商一起使用。

```
public class CloudFrontScriptBundle : Bundle
{
    public CloudFrontScriptBundle(string virtualPath, string cdnHost = "")
        : base(virtualPath, null, new IBundleTransform[] { new JsMinify(), new CloudFrontBundleTransformer { CdnHost = cdnHost } })
    {
        ConcatenationToken = ";";
    }
}

public class CloudFrontStyleBundle : Bundle
{
    public CloudFrontStyleBundle(string virtualPath, string cdnHost = "")
        : base(virtualPath, null, new IBundleTransform[] { new CssMinify(), new CloudFrontBundleTransformer { CdnHost = cdnHost } })
    {
    }
}

public class CloudFrontBundleTransformer : IBundleTransform
{
    public string CdnHost { get; set; }

    static CloudFrontBundleTransformer()
    {
    }

    public virtual void Process(BundleContext context, BundleResponse response)
    {
        if (context.BundleCollection.UseCdn && !String.IsNullOrWhiteSpace(CdnHost))
        {
            var virtualFileName = VirtualPathUtility.GetFileName(context.BundleVirtualPath);
            var virtualDirectory = VirtualPathUtility.GetDirectory(context.BundleVirtualPath);

            if (!String.IsNullOrEmpty(virtualDirectory))
                virtualDirectory = virtualDirectory.Trim('~');

            var uri = string.Format("//{0}{1}{2}", CdnHost, virtualDirectory, virtualFileName);
            using (var hashAlgorithm = CreateHashAlgorithm())
            {
                var hash = HttpServerUtility.UrlTokenEncode(hashAlgorithm.ComputeHash(Encoding.Unicode.GetBytes(response.Content)));
                context.BundleCollection.GetBundleFor(context.BundleVirtualPath).CdnPath = string.Format("{0}?v={1}", uri, hash);
            }
        }
    }

    private static SHA256 CreateHashAlgorithm()
    {
        if (CryptoConfig.AllowOnlyFipsAlgorithms)
        {
            return new SHA256CryptoServiceProvider();
        }

        return new SHA256Managed();
    }
} 
```

# jquery - 如何在无序列表中隐藏/显示 div 容器，以便替换内联列表元素

> ID：12047984
> 
> 赞同：1
> 
> 时间：2012-08-21T03:11:14.653
> 
> 标签：jquery, list, html, hide, show

**在我开始之前，您应该知道这里有很多信息。这个是因为我还不能发布 pix，还有两个是为了不浪费彼此的时间。非常感谢我在这篇文章中获得的所有帮助！**

所以我正在使用一个无序列表，其中列表元素在大文本中显示为内联。列表本身占据了大约 80% 的页面。

当您单击列表元素时，应该会弹出一个 div 来替换列表元素，解释列表元素的含义，如果您单击 div，则 div 会消失，而列表元素会重新出现。

我遇到的问题是我希望 div 元素完全替换列表元素在无序列表中的放置方式（边距和所有内容）。相反，发生的事情是 div 每次都出现在左侧，而无序列表元素在右侧重新排列。

**这是html：**

```
 <div id="bottom">
    <h1 class="issue_line">So what's the issue in Niagara Falls?</h1>
    <ul class="issue_headings">
    <li class="issue1">Education</li>
 <div class="quarter-box1">
  <p>The members of NOAH recognize that <strong>quality education</strong> is      
      necessary for any community to thrive...<br/>
  <a href="issues_taskforces.html">Read more.</a></p>
 </div>

    <li class="issue2">Local Hiring</li>
 <div class="quarter-box2">
  <p>The need for jobs in Niagara County is overwhelming, and NOAH is working to 
      create more local jobs through the policy level...<br/>
  <a href="issues_taskforces.html">Read more.</a></p>
 </div>

    <li class="issue3">Economic Development</li>
 <div class="quarter-box3">
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse et   
      facilisis risus. Quisque a gravida urna. Ut leo ligula...<br/>
 <a href="issues_taskforces.html">Read more.</a></p>
 </div>

    <li class="issue4">Trasnportation</li>
 <div class="quarter-box4">
 <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse et 
     facilisis risus. Quisque a gravida urna. Ut leo ligula...<br/>
 <a href="issues_taskforces.html">Read more.</a></p>
</div>

    </ul>
    </div> 
```

**这是CSS**

```
 #bottom {
      position: relative;
      width: 100%;
      margin: 0 auto; 
      clear: both;
      padding-top: 5px;
      padding-bottom: 5px;
     }

     ul.issue_headings {
      width: 1498px;
      float: left;
      margin-top: 50px;
      margin-bottom: 50px;
      padding: 0;
      list-style-type: none;
      display: none;
      text-align: center;
     }

     ul.issue_headings li {
      display: inline;
      margin-left: 2%;
      padding: 0;
      font-size: 3em;
      color: #9ac0e2;
     }

     ul.issue_headings li:hover {
      color: #FF9933;
     }

     .quarter-box1 { 
      float: left;
      margin-left: 50px;
      background-color: rgba(255, 255, 255, .9);
      border: 3px solid #0c69bf;
      box-shadow: 5px 5px 20px black;
      width: 280px;
      height: 150px;
      overflow: hidden;
      display: none;
     }

     .quarter-box2 { 
      float: left;
      margin-left: 100px;
      background-color: rgba(255, 255, 255, .9);
      border: 3px solid #0c69bf;
      box-shadow: 5px 5px 20px black;
      width: 280px;
      height: 150px;
      overflow: hidden;
      display: none;
     }

     .quarter-box3 {
      float: left;
      margin-left: 150px;
      background-color: rgba(255, 255, 255, .9);
      border: 3px solid #0c69bf;
      box-shadow: 5px 5px 20px black;
      width: 280px;
      height: 150px;
      overflow: hidden;
      display: none;
     } 

     .quarter-box4 {
      float: left;
      margin-left: 200px;
      background-color: rgba(255, 255, 255, .9);
      border: 3px solid #0c69bf;
      box-shadow: 5px 5px 20px black;
      width: 280px;
      height: 150px;
      overflow: hidden;
      display: none;
     }

     .quarter-box1:hover, .quarter-box2:hover,.quarter-box3:hover, .quarter-box4:hover { 
      border: 3px solid #FF9933;
     } 
```

**这是 jQuery**

```
 $('h1.issue_line').click(function(){
          $('h1.issue_line').hide("slow");
          $('ul.issue_headings').show("slow");
          $('div.quarter-box1,div.quarter-box2,div.quarter-box3,div.quarter-                 
     box4').hide("slow");
        });
        $('ul.issue_headings li.issue1').click(function(){
          $('ul.issue_headings li.issue1,div.quarter-box2,div.quarter-box3,div.quarter-

     box4').hide("slow");
          $('div.quarter-box1,ul.issue_headings li.issue2,ul.issue_headings 
     li.issue3,ul.issue_headings li.issue4').show("slow");
        });
        $('ul.issue_headings li.issue2').click(function(){
          $('ul.issue_headings li.issue2,div.quarter-box1,div.quarter-box3,div.quarter-
     box4').hide("slow");
          $('div.quarter-box2,ul.issue_headings li.issue1,ul.issue_headings 
     li.issue3,ul.issue_headings li.issue4').show("slow");
        });
        $('ul.issue_headings li.issue3').click(function(){
        $('ul.issue_headings li.issue3,div.quarter-box1,div.quarter-box2,div.quarter-          
     box4').hide("slow");
          $('div.quarter-box3,ul.issue_headings li.issue1,ul.issue_headings          
     li.issue2,ul.issue_headings li.issue4').show("slow");
        });
        $('ul.issue_headings li.issue4').click(function(){
          $('ul.issue_headings li.issue4,div.quarter-box1,div.quarter-box2,div.quarter-
     box3').hide("slow");
          $('div.quarter-box4,ul.issue_headings li.issue1,ul.issue_headings          
     li.issue2,ul.issue_headings li.issue3').show("slow");
        });
        $('div.quarter-box1').click(function(){
          $('div.quarter-box1').hide("slow");
          $('ul.issue_headings li.issue1').show("slow");
        });
      $('div.quarter-box2').click(function(){
          $('div.quarter-box2').hide("slow");
          $('ul.issue_headings li.issue2').show("slow");
        });
      $('div.quarter-box3').click(function(){
          $('div.quarter-box3').hide("slow");
          $('ul.issue_headings li.issue3').show("slow");
        });
      $('div.quarter-box4').click(function(){
          $('div.quarter-box4').hide("slow");
          $('ul.issue_headings li.issue4').show("slow");
        }); 
```

**让我知道你在想什么！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:04:28.187

...所以基于@nnnnnn 和@aug 的一些建议，我能够弄清楚这一点。通过确保 HTML 代码有效，可以修复 ul + div 组合（简单的错误，我完全错过了！）。此外，我在 div 之外添加了一个单独的 h4，但仍在列表元素内。

```
<div id="bottom">
<h1 class="issue_line">So what's the issue in Niagara Falls?</h1>
<ul class="issue_headings">
<li class="issue1">
    <h4>Education</h4>
    <div class="quarter-box1">
     <p>The members of NOAH recognize that <strong>quality education</strong> is necessary for any community to thrive...<br/>
     <a href="issues_taskforces.html">Read more.</a></p>
    </div>
</li>   
<li class="issue2">
    <h4>Local Hiring</h4>
    <div class="quarter-box2">
     <p>The <strong>need for jobs</strong> in Niagara County is overwhelming, and NOAH is working to create more local jobs through the policy level...<br/>
     <a href="issues_taskforces.html">Read more.</a></p>
    </div>
</li>
<li class="issue3">
    <h4>Economic Development</h4>
    <div class="quarter-box3">
     <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse et facilisis risus. Quisque a gravida urna. Ut leo ligula...<br/>
     <a href="issues_taskforces.html">Read more.</a></p>
    </div>
</li>   
<li class="issue4">
    <h4 style="margin-left:20px;">Transportation</h4>
    <div class="quarter-box4">
     <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse et facilisis risus. Quisque a gravida urna. Ut leo ligula...<br/>
     <a href="issues_taskforces.html">Read more.</a></p>
    </div>
</li>   
</ul>
</div> 
```

...然后要求在 JQ 中进行一些编辑：

```
$('h1.issue_line').click(function(){
     $('h1.issue_line').hide("slow");
     $('li.issue1 h4,li.issue2 h4,li.issue3 h4,li.issue4 h4').show("slow");
     $('div.quarter-box1,div.quarter-box2,div.quarter-box3,div.quarter-box4').hide("slow");
   });
   $('li.issue1 h4').click(function(){
     $('li.issue1 h4,div.quarter-box2,div.quarter-box3,div.quarter-box4').hide("slow");
     $('div.quarter-box1,li.issue2 h4,li.issue3 h4,li.issue4 h4').show("slow");
   });
   $('li.issue2 h4').click(function(){
     $('li.issue2 h4,div.quarter-box1,div.quarter-box3,div.quarter-box4').hide("slow");
     $('div.quarter-box2,li.issue1 h4,li.issue3 h4,li.issue4 h4').show("slow");
   });
   $('li.issue3 h4').click(function(){
     $('li.issue3 h4,div.quarter-box1,div.quarter-box2,div.quarter-box4').hide("slow");
     $('div.quarter-box3,li.issue1 h4,li.issue2 h4,li.issue4 h4').show("slow");
   });
   $('li.issue4 h4').click(function(){
     $('li.issue4 h4,div.quarter-box1,div.quarter-box2,div.quarter-box3').hide("slow");
     $('div.quarter-box4,li.issue1 h4,li.issue2 h4,li.issue3 h4').show("slow");
   });
   $('div.quarter-box1').click(function(){
     $('div.quarter-box1').hide("slow");
     $('li.issue1 h4').show("slow");
   });
 $('div.quarter-box2').click(function(){
     $('div.quarter-box2').hide("slow");
     $('li.issue2 h4').show("slow");
   });
 $('div.quarter-box3').click(function(){
     $('div.quarter-box3').hide("slow");
     $('li.issue3 h4').show("slow");
   });
 $('div.quarter-box4').click(function(){
     $('div.quarter-box4').hide("slow");
     $('li.issue4 h4').show("slow");
   }); 
```

...最后，在 CSS 中进行一些调整以对齐列表：

```
#bottom {
 position: relative;
 width: 100%;
 margin: 0 auto; 
 clear: both;
 padding-top: 5px;
 padding-bottom: 5px;
}

ul.issue_headings {
 width: 1498px;
 float: left;
 margin-top: 20px;
 margin-bottom: 20px;
 padding: 0;
 list-style-type: none;
 text-align: center;
}

ul.issue_headings li h4 {
 display: inline;
 margin-top: 20px;
 margin-left: 0;
 padding: 0;
 font-size: 3em;
 color: #9ac0e2;
 display:none;
 width: 350px;
 cursor: pointer;
}

ul.issue_headings li h4:hover {
 color: #FF9933;
}

.quarter-box1, .quarter-box2, .quarter-box3, .quarter-box4 { 
 float: left;
 margin: 0 auto;
 background-color: rgba(255, 255, 255, .9);
 border: 3px solid #0c69bf;
 box-shadow: 5px 5px 20px black;
 width: 280px;
 height: 200px;
 overflow: hidden;
 display: none;
} 
```

**In conclusion, I now have a 3 stringed JQ event that can be toggled at the last phase.**

Thanks again everyone for helping to point me in the right direction!

# database - 如何获取最后一个日期表已修改

> ID：12047987
> 
> 赞同：0
> 
> 时间：2012-08-21T03:11:29.003
> 
> 标签：database, ruby-on-rails-3

我需要提供一个应用程序检查更新的日期。为此，我需要获取数据库中某些表被修改的最后日期。

我正在检查表中的最后更新记录，如下所示：

```
MyTable.find(:first, :order => "updated_at DESC") 
```

但后来我注意到，如果我删除一条记录，我会得到以前更新的记录，这将是“过时的”，我需要得到最后一条记录被删除或修改的日期。

有没有办法在没有某种全局变量来保持所有正在进行的更改的情况下获得它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T04:58:50.710

也许您需要像[Audited](https://github.com/collectiveidea/audited) gem 这样的东西。

# jquery-mobile - 使用 $.mobile.changePage 应用 jquery 移动页面转换

> ID：12047993
> 
> 赞同：1
> 
> 时间：2012-08-21T03:12:42.423
> 
> 标签：jquery-mobile

所以我想要实现的是，在手动创建页面更改时应用任何页面转换。

例如，在我的网页上说，我这样做是为了当用户向右滑动时，网站会转到第二页....就像这样

```
$('#firstPage').bind("swiperight", function(){
            //alert("swiped right on the body element");
            $.mobile.changePage('#secondPage'); 

        }); 
```

现在我想为这个函数附加一个页面转换。如果它在一个实际的链接上，那么一个人会应用一个`data-transition`，但由于这个页面更改是手动创建的，我想知道如何向它附加一个过渡。

我试过例如

```
 $('#firstPage').bind("swiperight", function(){
        //alert("swiped right on the body element");
        $.mobile.changePage('#secondPage','flip');  

    }); 
```

等但无济于事，任何想法我将如何实施？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T03:19:19.773

尝试替换`bind`为`on`：

```
$('#firstPage').on("swiperight", function(){
        //alert("swiped right on the body element");
        $.mobile.changePage('#secondPage','flip');  
 }); 
```

我有类似的问题，这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T23:11:10.720

你几乎明白了，你只需要在`{}`括号内声明函数的第二个参数（你的选项）：

```
$('#firstPage').bind("swiperight", function(){

    //alert("swiped right on the body element");
    $.mobile.changePage( "#secondPage", { transition: "flip"} );

}); 
```

# iphone - 带有不同大小项目的标签栏

> ID：12047996
> 
> 赞同：1
> 
> 时间：2012-08-21T03:13:36.617
> 
> 标签：iphone, ios, uitabbarcontroller, customization, uitabbar

我正在构建一个标签栏，其中每个标签栏项目都有不同的大小。有没有办法对 UITabBar 进行子类化？我阅读了文档，似乎 UITabBars 总是具有相同大小的 UITabBarItems。

谁能证实这一点？自定义 UITabBar 的最简洁的实现是什么？

# php - PHP：默认情况切换中断？

> ID：12047999
> 
> 赞同：22
> 
> 时间：2012-08-21T03:13:58.383
> 
> 标签：php, switch-statement, case, break

```
switch ($var) {
    case 0:
        // Do something...
        break;
    case 1:
        // Do something...
        break;
    default:
        // Do something...
        break;
} 
```

我见过有些人在默认情况下使用 break 。由于默认情况是触发时执行的最后一个情况，因此需要在那里休息吗？我猜这只是出于惯例还是有其他原因？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-21T03:18:19.860

只要默认值位于 switch 语句的末尾，就没有理由需要它。请注意，默认不需要是最后一种情况：[http ://codepad.viper-7.com/BISiiD](http://codepad.viper-7.com/BISiiD)

```
<?php
$var = 4;
switch($var)
{
    default:
        echo "default";
        break;
    case 4:
        echo "this will be executed";
        break;
} 
```