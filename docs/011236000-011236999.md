# StackOverflow 问答 11236000-11236999

# java - java permgen out of memory for a swing application on linux但不是在windows上

> ID：11236001
> 
> 赞同：2
> 
> 时间：2012-06-27T23:07:00.707
> 
> 标签：java, swing, exception, out-of-memory

我有一个 Swing 应用程序，当我在 Windows 上运行它时我没有问题，但是当我在 linux 上运行它时，我在使用它几次后出现内存不足 permgen 异常。

在 Windows 上我使用 jdk6 更新 32 32 位，在 linux 上我使用相同的 jdk 6，相同的更新版本但 64 位。

当我在 windows/linux 上运行应用程序时，唯一改变的是外观，当我在 windows 上运行它时，我使用一个，当我在 linux 上运行它时，我使用另一个，但它们都来自 jgoodies 站点。

这个问题的原因是什么？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T23:18:54.170

虽然您认为这是 Windows 与 Linux 的区别，但我认为这两个系统之间更显着的区别是 32 位与 64 位。

在 64 位 JVM 上，引用和引用值字段占用两倍的字节数，并且在其他情况下填充会增加。由于 String 对象包含引用字段等，这足以使对象变大。如果您有大量字符串文字或手动实习字符串，这可能会导致更多的 PermGen 使用。

无论哪种方式，显而易见的解决方案是通过 JVM 命令行选项增加 Permgen 大小。实际上，除了想办法减少应用程序的 Permgen 使用（这可能不切实际）之外，这可能是唯一的解决方案。

# events - C# ComVisible DLL 未注册

> ID：11236003
> 
> 赞同：0
> 
> 时间：2012-06-27T23:07:19.037
> 
> 标签：events, com, interface, smtp, windows-server-2003

我正在为运行 Windows 2003 服务器的人工作。他们希望我制作一个 SMTP 接收器，它可以对我们要将消息发送到的数据库和表进行分类。他们在此服务器上没有交换，只有默认的虚拟 SMTP 服务器。

我做了一个类，我认为当 SMTP 服务器 onarrival 事件发生时应该触发它。我在注册课程时遇到问题，但是，当我运行 RegAsm /regfile 时，我收到“警告，RA0000：不会发生注册，没有要注册的类型”。如果我使用 /TLB 运行 RegAsm，它会告诉我类型已注册，但按类不会显示在全局注册表中，并且当邮件发送到服务器时不会调用我的类。我对自己做错了什么有点不知所措。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace SMTPSink
{
    [Guid("????-????-?????-????")]
    [ComVisible(true)]
    [ProgId("SMTPSINK")]
    public class SMTPSink : CDO.ISMTPOnArrival
    {
        SMTPSink()
        { }

        void CDO.ISMTPOnArrival.OnArrival(CDO.Message Message, ref CDO.CdoEventStatus EStatus)
        {
            //Simple test to see if this fires on mail arrival
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:56:11.337

您忘记将构造函数公开。导出没有 [noncreatable] 类型库属性的 ​​coclass 时需要。使固定：

```
 public SMTPSink()
    { } 
```

或者如果它没有做任何有用的事情，就省略它。

# python - 在 Python 中识别列表中的重复值

> ID：11236006
> 
> 赞同：45
> 
> 时间：2012-06-27T23:07:35.460
> 
> 标签：python, arrays, list

是否可以使用 python 获取列表中重复的值？

我有一个项目清单：

```
 mylist = [20, 30, 25, 20] 
```

我知道删除重复项的最佳方法是`set(mylist)`，但是否有可能知道哪些值被重复？如您所见，在此列表中，重复项是第一个和最后一个值。`[0, 3]`.

是否有可能在 python 中得到这个结果或类似的东西？我试图避免做出一个可笑的大`if elif`条件语句。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-27T23:11:21.200

这些答案是 O(n)，所以比使用的代码多一点，但随着时间的推移`mylist.count()`效率更高`mylist`

如果您只想知道重复项，请使用 collections.Counter

```
from collections import Counter
mylist = [20, 30, 25, 20]
[k for k,v in Counter(mylist).items() if v>1] 
```

如果您需要了解指数，

```
from collections import defaultdict
D = defaultdict(list)
for i,item in enumerate(mylist):
    D[item].append(i)
D = {k:v for k,v in D.items() if len(v)>1} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-27T23:11:35.793

这是一个列表理解，可以满足您的需求。正如@Codemonkey 所说，列表从索引 0 开始，因此重复项的索引是 0 和 3。

```
>>> [i for i, x in enumerate(mylist) if mylist.count(x) > 1]
[0, 3] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T23:13:03.467

以下列表推导将产生重复值：

```
[x for x in mylist if mylist.count(x) >= 2] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-07T17:52:19.813

您可以使用列表压缩和设置来降低复杂性。

```
my_list = [3, 5, 2, 1, 4, 4, 1]
opt = [item for item in set(my_list) if my_list.count(item) > 1] 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-21T13:01:38.783

使用 list.index() 没有任何中间列表的最简单方法：

```
z = ['a', 'b', 'a', 'c', 'b', 'a', ]
[z[i] for i in range(len(z)) if i == z.index(z[i])]
>>>['a', 'b', 'c'] 
```

并且您还可以列出重复项本身（可能再次包含重复项，如示例中所示）：

```
[z[i] for i in range(len(z)) if not i == z.index(z[i])]
>>>['a', 'b', 'a'] 
```

或他们的索引：

```
[i for i in range(len(z)) if not i == z.index(z[i])]
>>>[2, 4, 5] 
```

或作为索引的 2 元组列表的重复项（仅引用它们的第一次出现），**原始问题的答案是什么！！！**：

```
[(i,z.index(z[i])) for i in range(len(z)) if not i == z.index(z[i])]
>>>[(2, 0), (4, 1), (5, 0)] 
```

或与项目本身一起：

```
[(i,z.index(z[i]),z[i]) for i in range(len(z)) if not i == z.index(z[i])]
>>>[(2, 0, 'a'), (4, 1, 'b'), (5, 0, 'a')] 
```

或元素和索引的任何其他组合....

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-01-03T10:30:57.173

我尝试下面的代码从列表中查找重复值

1）创建一组重复列表

2）通过查看重复列表迭代集合。

```
glist=[1, 2, 3, "one", 5, 6, 1, "one"]
x=set(glist)
dup=[]
for c in x:
    if(glist.count(c)>1):
        dup.append(c)
print(dup) 
```

**输出**

> [1, '一个']

现在获取重复元素的所有索引

```
glist=[1, 2, 3, "one", 5, 6, 1, "one"]
x=set(glist)
dup=[]
for c in x:
    if(glist.count(c)>1):
        indices = [i for i, x in enumerate(glist) if x == c]
        dup.append((c,indices))
print(dup) 
```

**输出**

> [(1, [0, 6]), ('一', [3, 7])]

希望这可以帮助某人

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-13T15:37:10.680

这是我能想到的在列表中查找重复项的最简单方法：

```
my_list = [3, 5, 2, 1, 4, 4, 1]

my_list.sort()
for i in range(0,len(my_list)-1):
               if my_list[i] == my_list[i+1]:
                   print str(my_list[i]) + ' is a duplicate' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-29T22:05:28.467

以下代码将使用重复项及其索引值获取您想要的结果。

```
 for i in set(mylist):
    if mylist.count(i) > 1:
         print(i, mylist.index(i)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-27T23:13:52.627

您应该对列表进行排序：

```
mylist.sort() 
```

在此之后，像这样遍历它：

```
doubles = []
for i, elem in enumerate(mylist):
    if i != 0:
        if elem == old:
            doubles.append(elem)
            old = None
            continue
    old = elem 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-06T22:25:37.127

您可以使用以下逻辑使用列表打印重复和 Unqiue。

```
def dup(x):
    duplicate = []
    unique = []
    for i in x:
        if i in unique:
            duplicate.append(i)
        else:
            unique.append(i)
    print("Duplicate values: ",duplicate)
    print("Unique Values: ",unique)

list1 = [1, 2, 1, 3, 2, 5]
dup(list1) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-21T06:27:51.883

```
mylist = [20, 30, 25, 20]

kl = {i: mylist.count(i) for i in mylist if mylist.count(i) > 1 }

print(kl) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-25T06:53:22.510

看起来您想要重复项的索引。这是一些短代码，可以在 O(n) 时间内找到它们，而不使用任何包：

```
dups = {}
[dups.setdefault(v, []).append(i) for i, v in enumerate(mylist)]
dups = {k: v for k, v in dups.items() if len(v) > 1}
# dups now has keys for all the duplicate values
# and a list of matching indices for each

# The second line produces an unused list. 
# It could be replaced with this:
for i, v in enumerate(mylist):
    dups.setdefault(v, []).append(i) 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2014-04-09T07:53:15.657

```
m = len(mylist)
for index,value in enumerate(mylist):
        for i in xrange(1,m):
                if(index != i):
                    if (L[i] == L[index]):
                        print "Location %d and location %d has same list-entry:  %r" % (index,i,value) 
```

然而，这有一些可以改进的冗余。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2021-02-25T06:36:20.300

```
def checkduplicate(lists): 
 a = []
 for i in lists:
    if  i in a:
        pass   
    else:
        a.append(i)
 return i          

print(checkduplicate([1,9,78,989,2,2,3,6,8])) 
```

# ruby-on-rails - Ruby on Rails - 无法在模型中存储哈希数组

> ID：11236007
> 
> 赞同：0
> 
> 时间：2012-06-27T23:07:36.030
> 
> 标签：ruby-on-rails, ruby, json

我正在创建一个哈希数组并通过 json 将其传递给控制器​​。这是我发送的数据和之前的一些服务器输出：

```
Started POST "/api/user.json" for 127.0.0.1 at Wed Jun 27 18:52:32 -0400 2012
  Processing by Api::UsersController#create as JSON
  Parameters: {"accept"=>"json", "content_type"=>"json", "users"=>"[{\"email\":\"kirsten_gronberg@yahoo.com\"},{\"email\":\"dtsheahan@msn.com\"},{\"email\":\"clayton19361@hotmail.com\"},{\"email\":\"kumar.alka92@yahoo.com\"},{\"email\":\"j.eromes.n.d.c@gmail.com\\r\"},{\"email\":\"0\"},{\"email\":\"christine@colormepink.com\"},{\"email\":\"janabouc@gmail.com\"},{\"email\":\"carin@inkfoundry.com\"},{\"email\":\"jon.neiditz@nelsonmullins.com\"}]"} 
```

这是我的控制器代码：

参数[“用户”].each { |user_params| 用户创建！（用户参数）}

这是错误：

```
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `keys' for #<String:0x10662d660>):
  app/controllers/api/users_controller.rb:6:in `create'
  app/controllers/api/users_controller.rb:5:in `each'
  app/controllers/api/users_controller.rb:5:in `create' 
```

有人知道我在这里可能会发生什么错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:18:17.230

当您收到 时`params[:users]`，您实际上收到的是字符串而不是哈希。这个字符串恰好是用 JSON 编码的（即以一种类似于 Ruby 散列的样式。）您必须通过诸如`hash = JSON.parse(params[:users])`.

# c# - 在 C# 中启动许多异步任务的语法

> ID：11236009
> 
> 赞同：15
> 
> 时间：2012-06-27T23:07:39.087
> 
> 标签：c#, task-parallel-library, async-await

我在 c# 中使用新的 async/await 工具时遇到问题。这是我的场景：

```
static async Task<bool> ManageSomeRemoteTask(int Id, bool flag)
{
    var result = await serviceClient.AuthenticateIdAsync(Id);
    [... Setup Some Data ...]
    await serviceClient.LongAndSlowRemoteCallAsync(Data);
}

static void SendATonOfJunkToSomeWebServiceThatDoesntSupportBatches
{
    var myTasks = Dictionary<int, Task<bool>>();
    while(IdsLeftToProcess > 0 )
    {
      Task<bool> t = ManageSomeRemoteTask(Id, true);
      myTasks.Add(IdsLeftToProcess ,t);
      myTasks[IdsLeftToProcess].Start();
      IdsLeftToProcess --;
    }

    Task.WaitAll(myTasks.Values.ToArray()); //Wait until they are all done
    [... Report statistics ...]
} 
```

我有一个问题，当我尝试运行它时，我在 Start() 上收到一个 InvalidOperationException 错误消息“ *Start may not be called on a promise-style task.* ” 这个错误消息似乎没有出现谷歌或必应所以我不确定它是什么意思。这是我的第一个问题，如何让它运行。我也尝试过 TaskFactory.StartNew() 但不明白如何以这种方式将参数传递给我的方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-27T23:11:27.290

异步方法返回的任务总是*热*的，即它们是在运行状态下创建的。尝试从您的代码中删除 task.Start() - 它应该修复它。

引用[Stephen Toub 的 Async/Await 常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)：

> 我是否需要“启动”由标记为“异步”的方法创建的任务？
> 
> > 不会。从 TAP 方法返回的任务是“热的”，这意味着这些任务代表已经在进行的操作。您不仅不需要在此类任务上调用“.Start()”，而且如果您尝试这样做会失败。有关更多详细信息，请参阅 Task.Start 的常见问题解答。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T23:09:41.567

您不需要启动异步方法调用返回的任务。它们是默认启动的。

# sql - UTF-8 应该使用 CHAR 或 NCHAR

> ID：11236015
> 
> 赞同：1
> 
> 时间：2012-06-27T23:08:12.237
> 
> 标签：sql, sql-server, character-encoding

如果我对将使用非西里尔欧洲语言字符集的字符集使用 utf-8 编码，我可以使用 varchar/char，还是应该使用 nvarchar/nchar？

使用 nvarchar 是否存在巨大的 sql 处理时间损失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:19:26.540

MSSQL 本身不支持 UTF-8，所以使用 nchar。您必须确保您的代码与其插入的字符集一致，因为这意味着 RDBMS 不会。MSSQL*确实*支持 UTF-16，因此您可以考虑在您的应用程序中使用该字符集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T23:19:52.217

nvarchar 的内部数据表示为 UTF-16。AFAIK 你不能改变它，所以你最好使用 nvarchar 作为参数。

# c++ - Qt Creator/qmake - 从源目录加载资产文件夹，而不是构建目录

> ID：11236023
> 
> 赞同：0
> 
> 时间：2012-06-27T23:08:35.773
> 
> 标签：c++, directory, qt-creator, assets, qmake

有没有办法在程序执行时在运行时指定根目录？我问的原因是因为我希望能够拥有一个资产文件夹，我可以通过`"assets/"`相对简单地在代码中访问它，而不是必须键入`"absolute/path/to/assets"`. 在最坏的情况下，我可以创建一个宏或 const std::string/QString 来附加到所有内容，但我发现只允许项目能够从源目录访问所有内容会更干净，而不是实际的构建目录。

如果有的话，如何才能做到这一点？

*编辑*

我还应该声明我在 Linux 中操作，目前没有任何多平台使用计划，主要是因为我只是在创建学习项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:55:03.733

将您的工作目录切换到应用程序可执行文件的目录，如下所示：

```
if (QDir::setCurrent(QCoreApplication::applicationDirPath())) {
  // success!
  ...
} 
```

这*是*跨平台的。

# javascript - getElementById 中的变量

> ID：11236025
> 
> 赞同：-1
> 
> 时间：2012-06-27T23:08:50.770
> 
> 标签：javascript

我需要检查表单的所有单选按钮并绘制包含选中的 td 的 td。不能在循环（aca）中传递TD id的变量：

```
function veamos() {

    var allElems = document.getElementsByTagName('input');

        for (i = 0; i < allElems.length; i++) {

           if (allElems[i].type === 'radio' && allElems[i].checked) {

           var aca="pinta"+i;

                document.getElementById(aca).style.backgroundcolor = '#9e0000';

           } else {
            //document.getElementById(estetd).style.backgroundColor = '#ffffff';
           }        
        }       
} 
```

document.getElementById('pinta1').style.backgroundColor = '#9e0000'，似乎有效......无法构建变量以循环所有表单

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:14:31.023

你有一个错字。Javascript 区分大小写。改变

```
document.getElementById(aca).style.backgroundcolor = '#9e0000'; 
```

到

```
document.getElementById(aca).style.backgroundColor = '#9e0000'; 
```

...

**更新**查看一个[工作示例](http://jsfiddle.net/ZPy9f/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T23:34:18.887

如果我正确理解您的问题，我认为您有两个选择。

```
function veamos () {
  var allElems = document.getElementsByTagName('input');
  for (var i = 0, len = allElems.length; i<len; i++) { /* do not use .length in the loop condition, that will have very bad performance on element arrays returned by getElementsByTagName. */
    var elem = allElems[i];
    if (elem.type==='radio') {
       /* Option 1: This depends on the HTML structure, where is the TD in relation to the input? */
       var td = elem.parentNode; /* if it is 2 levels up then use elem.parentNode.parentNode */
       /* Option 2: This depends on having an ID on the <input> and <td> that are similar, like this <input id="r1"> <td id="r1TD"> */
       var td = document.getElementById(elem.id + 'TD');
       td.style.backgroundColor = elem.checked ? '#9e0000' : '#ffffff';
       /* I would recommend using a class name (CSS) instead of using a hard coded color! */
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T23:14:41.347

反而

```
document.getElementById(aca).style.backgroundcolor = '#9e0000'; 
```

应该

```
allElems[i].style.backgroundcolor = '#9e0000'; 
```

# html - 分析多框架页面时如何在 IE 开发人员工具栏中定位或选择框架？

> ID：11236028
> 
> 赞同：4
> 
> 时间：2012-06-27T23:09:36.677
> 
> 标签：html, web-developer-toolbar

如果一个页面有multiframes并且加载了多个页面，如何选择一个特定的frame页面进行调试或通过IE Developer工具查看html源代码。

我需要它来使用控制台选项卡运行 jquery 脚本，针对框架中的特定页面如何在 IE 开发人员工具栏中执行此操作。

问候， Umesh V

# java - 令牌解析错误 .. 在 Beanshell 中遇到 \' ..？

> ID：11236032
> 
> 赞同：3
> 
> 时间：2012-06-27T23:10:07.993
> 
> 标签：java, beanshell

我正在尝试运行以下 Beanshell 代码——

```
assignee.toString()!='' 
```

这里 'assignee' 是 Beanshell 上下文中的一个变量。

但我收到以下错误 -

```
Caused by: Sourced file: inline evaluation of: ``assignee.toString()!='';'' Token Parsing Error: Lexical error at line 1, column 23\.  Encountered: "\'" (39), after : "\'": <at unknown location>

at bsh.Interpreter.eval(Unknown Source)
at bsh.Interpreter.eval(Unknown Source)
at bsh.Interpreter.eval(Unknown Source)
at org.webharvest.runtime.scripting.BeanShellScriptEngine.eval(BeanShellScriptEngine.java:104) 
```

我在这里做错了什么？我想检查变量'assignee'是否具有空值......完成此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:17:08.137

问题是这`'c'`是一个字符文字，但是`''`（“无字符”的字符文字？）是*无效的 Java 语法*。（即使它确实解析了，也会出现类型错误`String == char`。）

也许`""`（一个空的字符串）文字是用来代替的？

**重要说明：**即使这没有语法错误*，通常也不应该*将字符串与`==`(or `!=`) 进行比较，因为结果可能出乎意料。关于 SO 有*很多*关于为什么以及如何正确比较 Java 中的 String 对象的问题: 例如见`String.equals(..)`和`String.isEmpty()`。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:14:47.510

直接与 null 比较：

```
if(assignee.toString() != null)
{
   do.something();
} 
```

# android - 简单的原生游戏 - Android

> ID：11236033
> 
> 赞同：0
> 
> 时间：2012-06-27T23:10:11.520
> 
> 标签：android, mobile, accelerometer

对于我的移动编程课程，我们终于可以自由地设计和开发我们自己的应用程序。我们唯一的要求是我们必须以某种方式实现地理位置或传感器。我选择尝试制作一个非常简单的游戏来实现加速度计。基本思想是形状会从天上掉下来（屏幕顶部），你必须倾斜手机才能让“家伙”移动并在形状落地之前抓住它们。我对游戏风味有一些想法，但我的老师建议我放弃它，只玩基本的游戏（我们只有 10 天）。

所以我要问你的问题——有人对我要处理的这个应用程序有任何高层次的建议吗？是否有适用于本机 android 的好的游戏/物理库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:35:50.850

本地我假设你的意思是 SDK，而不是 NDK，因为你没有添加`android-ndk`标签。

最适合您需求的两个游戏引擎是[AndEngine](http://www.andengine.org/)和[Libgdx](http://code.google.com/p/libgdx/)。他们都有 Box2D 物理引擎。AndEngine 附带了几个示例，将其中的几个结合起来可以满足您的需求。这两个引擎也有很好的社区支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:34:51.407

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

[http://www.andengine.org/](http://www.andengine.org/)

谷歌是你的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-09T18:32:33.520

嘿，朋友， [Libgdx](http://libgdx.badlogicgames.com/)是我为此推荐的

谢谢你

# ruby-on-rails-3 - routes.rb 和链接到页面的“路径”之间的关系？

> ID：11236034
> 
> 赞同：1
> 
> 时间：2012-06-27T23:10:16.747
> 
> 标签：ruby-on-rails-3, routes, railstutorial.org

这个问题源于 Hartl 的 Rails 教程（在第 9 章中进行了改进） - 抱歉，如果它看起来特别笨拙......

目前，我了解在`routes.rb`文件中，当使用例如定义页面时：

```
match '/help', to: 'static_pages#help' 
```

在嵌入式红宝石中生成的链接：

```
<li><%= link_to "Help", help_path %></li> 
```

会起作用。，`help_path`特别是“路径”这个词，将对应于路由中定义的“#help”。

但是，路由文件没有定义项目的链接，例如`users_path`（用于显示所有用户）或`edit_user_path(current user)`（用于编辑当前用户的设置） - 我对它们的定义位置以及它们如何正确定义感到困惑功能并将我链接到所需的地方。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:23:40.067

实际上，路由文件确实获得了一个确定用户行为的条目（[如清单 2.2 所示](http://ruby.railstutorial.org/chapters/a-demo-app#code%3arails_routes)）。[它是通过此处](http://ruby.railstutorial.org/chapters/a-demo-app#sec%3ademo_users_resource)描述的脚手架创建的。

```
resources :users 
```

按照惯例，`routes.rb`文件中的“资源”条目设置了许多将与用户关联的路径。请参阅 Rails 指南以获得[良好的概述](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)。

# google-maps - GMaps v3 Markers AddListener 始终获取 for 循环中的最后一个变量索引

> ID：11236052
> 
> 赞同：5
> 
> 时间：2012-06-27T23:12:33.997
> 
> 标签：google-maps, google-maps-markers

GMaps v3 Markers AddListener 问题

我正在尝试将 mouseover/mouseout 事件侦听器添加到我的标记中，但我总是得到 for 循环的最后一个值 在所有事件中，它似乎得到了 for 的最后一个值而不是当前值。这是我的代码

```
for( mark in data ) {
    markers[mark] = new google.maps.Marker({
              position: new google.maps.LatLng(data[mark].lat,data[mark].lng), map: map,
            });
google.maps.event.addListener(markers[mark], "mouseover", function() {
                alert(mark);
            });
            google.maps.event.addListener(markers[mark], "mouseout", function() {
                alert(mark);
            });
        } 
```

结果是鼠标悬停/移出警报，所有 10 个标记的值都相同，我期待每个警报都有标记 ID。

感谢和问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T23:54:32.003

您遇到的问题是 mark 的值是全局的，并且设置为循环中的最后一个值。这个问题可以通过函数闭包来解决。我认为这会起作用（未经测试）：

```
 function createMarker(latlng, id)
 {
    var marker= new google.maps.Marker({
          position: latlng, map: map,
          });
    google.maps.event.addListener(marker, "mouseover", function() {
            alert(id);
          });
    google.maps.event.addListener(marker, "mouseout", function() {
            alert(id);
          });
    return marker;
 }
 for( mark in data ) {
   markers[mark] = createMarker(new google.maps.LatLng(data[mark].lat,data[mark].lng),
                                mark);
 } 
```

# file - 使用 illustrator 调整多个文件的大小

> ID：11236056
> 
> 赞同：0
> 
> 时间：2012-06-27T23:13:12.127
> 
> 标签：file, adobe-illustrator

我有一个问题，我有 30 天的插画师 cs6，我想将很多文件的大小从 30x40 调整为 200x400（这是一个示例），有一种方法可以自动完成吗？用脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T05:45:17.063

这是简单的解决方案

1.  打开你的文件
2.  转到文件-> 导出
3.  选中“使用画板”并保存
4.  在分辨率中使用“自定义”并插入值 720。

最后点击确定，享受 300X400

# php - 仅发布图像文件或允许发布无文件

> ID：11236059
> 
> 赞同：0
> 
> 时间：2012-06-27T23:13:38.257
> 
> 标签：php, javascript, html

如果应该发布的文件不是图像，**或者**在没有选择文件时返回 true，javascript 中是否有办法发布警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:22:16.253

以下工作正常。在表单上提交 php 代码

```
<?php

$fileType = $_FILES['avatarfile']['type'];
if(isset($_POST['submit']) && (($_FILES['avatarfile']['type'] == "image/gif")
|| ($_FILES['avatarfile']['type'] == "image/jpeg")
|| ($_FILES['avatarfile']['type'] == "image/pjpeg") || ($_FILES['avatarfile']['type'] == "image/bmp") || ($_FILES['avatarfile']['type'] == "image/png") || $fileType == NULL))
{

$query="insert into ...)";
header('Location:something.php');
}
else { 
echo "The file you tried to upload is not an image";
}
?> 
```

# c++ - 初始化在类的私有成员中声明的静态容器数据

> ID：11236065
> 
> 赞同：0
> 
> 时间：2012-06-27T23:14:02.010
> 
> 标签：c++, vector, static, containers

我有一个带有私有成员（`struct`）的类，如下所示：

```
enum indices {
   zero,
   one, 
   two,
   ...,
   N
};

class myclass {
  ...
  ...
private: 
  struct impl;
  impl* p_impl;
}; 
```

然后，在实现中，我在结构中定义了一个静态容器（向量），如下所示：

```
struct myclass::impl {
   impl() : ... {
      ...
      do_something;
      ...
   }
   ...
   ...
   static std::vector<std::string> v;
   ...
};

std::vector<std::string> myclass::impl::v = std::vector<std::string>(N); //-N is defined by an enum, say.

myclass::myclass() {
    p_impl = new impl();
    //-Is this where I should populate the static container?
    impl::v[zero] = str0;
    impl::v[one] = str1;
    ...
    impl::v[N] = strN;
}

... 
```

**我的问题是：*我初始化静态容器的地方是否合适？`v`如果我在分配之前移动了初始化`p_impl`，会导致运行时错误吗？换句话说，内存分配给静态成员是否有顺序？另外，我怎样才能让我的容器`static const`不会遇到下面描述的错误？***

附加信息：

当我尝试在实现中但在结构和任何类成员之外（以及在设置向量大小的赋值之后）初始化它时，如下所示：

```
std::vector<std::string> myclass::impl::v = std::vector<std::string>(N); //-N is defined by an enum, say.
myclass::impl::v[zero] = str0;
myclass::impl::v[one] = str1;
...
myclass::impl::v[N] = strN; 
```

然后我在 Windows (VC++ 2008) 上得到一个构建错误：

```
error C2466: cannot allocate an array of constant size 0 
```

这导致我将初始化放在`myclass`（似乎是一个自然的地方）的构造函数中。此外，如果我尝试将容器制作成 a `static const`，那么一切都会出现错误，如下所示。

```
 error C2678: binary '=' : no operator found which takes a left-hand operand of type 'const std::basic_string<_Elem,_Traits,_Ax>' (or there is no acceptable conversion)
        with
        [
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]
        c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xstring(914): could be 'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(const std::basic_string<_Elem,_Traits,_Ax> &)'
        with
        [
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]
        c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xstring(919): or       'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(const _Elem *)'
        with
        [
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]
        c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\xstring(924): or       'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(_Elem)'
        with
        [
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]
        while trying to match the argument list '(const std::basic_string<_Elem,_Traits,_Ax>, const std::string)'
        with
        [
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ] 
```

有没有人有一个用`static const`容器做同样事情的例子？一如既往地欣赏任何想法和想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:21:27.650

> 我初始化静态容器的地方合适吗？

是的，类的静态数据成员需要在命名空间范围内进行定义。但是这些

```
myclass::impl::v[zero] = str0;
myclass::impl::v[one] = str1;
...
myclass::impl::v[N] = strN; 
```

是表达式，它们在全局范围内是不允许的。编译器试图将它们解析为声明，因此出现错误：“无法分配常量大小为 0 的数组”。您需要在成员函数中移动此逻辑。

> 如果我在分配 p_impl 之前移动了 v 的初始化，会导致运行时错误吗？换句话说，内存分配给静态成员是否有顺序？

静态成员具有外部链接，因此可以保证在 main() 开始之前完全构造它们。

> 另外，如何使我的容器成为静态 const 而不会遇到下面描述的错误？

您只能初始化一个`const`变量，以后不能更改它。在 C++11 中你可以做

```
std::vector<std::string> myclass::impl::v = { str0, str1, str2, ... }; 
```

# css - 结合 :hover 和 :nth-child(n4+4)?

> ID：11236073
> 
> 赞同：1
> 
> 时间：2012-06-27T23:14:59.690
> 
> 标签：css, css-selectors, pseudo-class

我被困住了，无法解决我当前的问题，希望能得到一些帮助和/或指导。

我想知道是否有一种方法可以结合 :hover 和 :nth-child(4n+4) 伪类。如果您访问[我的沙盒页面](http://inexxus.com/dev/ttt/template/mytiks.php)，则会有一个无序列表（交易宝丽来），其中我让每个第 4 个列表项显示零边距。问题是 :hover 添加了一个 10px 的填充，会中断每个第 4 个列表项的流。我似乎无法弄清楚如何防止由于将鼠标悬停在这些列表项上而导致的闪烁。我尝试将事情结合起来无济于事并使用“！important”（我尝试避免使用）。任何人都可以帮忙吗？我认为我正在俯瞰某些东西，第二双眼睛会有所帮助。

这是 CSS/HTML：

CSS：

```
ul#myTiks li {
    float: left;
    width: 230px;
    display: block;
    margin-right: 35px;
    list-style-type: none;
    margin-bottom: 35px;
    color: #333;
}

ul#myTiks li:hover {
    padding: 10px;
    background-image: url(../img/dwt/white_bgd_30.png);
    margin: -10px 25px 25px -10px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
}

ul#myTiks li:nth-child(4n+4) {
    margin-right: 0 !important;
} 
```

HTML：

```
<li>
<div class="polaroid">
            <div class="title">Title Of Deal</div>
            <div class="category">Deal Category</div>
            <div class="tik"><a href="#"></a></div>
            <div class="img"><img src="../img/dwt/myTik_placeholder_img.png" width="197" height="197"></div>
            <div class="soc" style="display:none;">
                <a href="#"><img src="../img/dwt/tweet_btn_x20h.png" width="55" height="20"></a>
                <a href="#"><img src="../img/dwt/fb_like_btn_x20h.png" width="46" height="20"></a>
                <a href="#"><img src="../img/dwt/pin_btn_x20h.png" width="55" height="20"></a>
            </div>
        </div>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:21:04.623

Just change your right margin to `-10px`, no need for important:

```
ul#myTiks li:nth-child(4n+4) {
    margin-right: -10px;
} 
```

# java - 带有 ArrayList 参数的复制构造函数

> ID：11236074
> 
> 赞同：6
> 
> 时间：2012-06-27T23:15:23.780
> 
> 标签：java

我正在尝试为一个对象创建一个复制构造函数，其中一个参数是一个 ArrayList。

在创建 ArrayList 对象时，我想到使用 ArrayList 构造函数，您可以在其中将集合作为参数传递，但我不确定这是否可以作为指向 ArrayList 的“指针”，或者这是否会创建一个整体新的数组列表对象

这是我的代码

```
public MyObject(MyObject other)
{
    this.brands= other.brands;
    this.count = other.count;
    this.list = new ArrayList<Integer>(other.list); // will this create a new array list with no pointers to other.list's elements?

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T23:29:39.523

> 我不确定这是否可以作为指向数组列表的“指针”，或者这是否会创建一个全新的数组列表对象

当您使用`new`时，它将*创建*一个全新的实例`ArrayList`（这是您所要求的）。但它也**不会**自动创建其元素的副本（我认为这是您正在寻找的）。这意味着，如果您在新 List 中更改了一个可变对象，那么它也会在原始 List 中更改，如果它仍然存在的话。这是因为 List 仅包含对其中 s 的引用（有点类但不完全是指针）`Object`，而不是实际`Object`的 s 本身。

例如：

```
Person person = new Person("Rob"); // create a new Object

List<Person> myList = new ArrayList<Person>();
myList.add(person);

// Create another list accepting the first one
List<Person> myList2 = new ArrayList<Person>(myList);

for(Person p : myList2) {
    p.setName("John"); // Update mutable object in myList2
}

person = new Person("Mary"); // stick another object into myList2
myList2.add(person);

for(Person p : myList2) {
    System.out.println(p.getName()); // prints John and Mary as expected
}

for(Person p : myList) {
    System.out.println(p.getName()); // prints only one result, John.
} 
```

所以可以看到两个List本身是可以独立修改的，但是当你使用构造函数接受另一个`List`时，两者都会包含对相同`Person`实例的引用，当这些对象在一个List中的状态发生变化时，它们也会在一个List中发生变化。其他（有点像指针）。

# winforms - 在winforms中的菜单条上更改工具提示超时？

> ID：11236079
> 
> 赞同：2
> 
> 时间：2012-06-27T23:16:38.710
> 
> 标签：winforms, timeout, tooltip, menustrip

将鼠标悬停在菜单条（在winforms中）中的菜单项上时如何延长工具提示超时？

我这样设置：

```
toolStripMenuItem1.ToolTipText = "foo"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:50:22.187

有一篇关于 CodeProject 的文章实现了具有自定义工具提示支持的 ToolStrip 的派生版本。这可能被用来做你想做的事。 [http://www.codeproject.com/Tips/376643/ToolStrip-with-custom-ToolTip](http://www.codeproject.com/Tips/376643/ToolStrip-with-custom-ToolTip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:22:28.360

如果您使用[`Tooltip`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx)该类，则可以通过将`AutoPopDelay`属性设置为更高的值来做到这一点（MSDN：[更改 Windows 窗体工具提示组件的延迟](http://msdn.microsoft.com/en-us/library/ba01s7kc.aspx)）。

但是，如果您尝试使用`Tooltip`该类来设置工具提示，`ToolStripMenuItem`如下所示：

```
ToolTip1.SetToolTip(toolStripMenuItem1, "check it yo!") 
```

您将收到以下错误：

```
'System.Windows.Forms.ToolStripMenuItem' cannot be 
 converted to 'System.Windows.Forms.Control'. 
```

查看这个[StackOverflow 问题](https://stackoverflow.com/q/58245/945456)以了解解决方法。

# ruby - Ruby 线程不能在写入时发生冲突吗？

> ID：11236080
> 
> 赞同：7
> 
> 时间：2012-06-27T23:16:43.617
> 
> 标签：ruby, multithreading, concurrency

从过去的 C# 和 Java 工作中，我习惯于这样的声明不是线程安全的：

```
x += y; 
```

但是，当与 Ruby 并行运行上述代码时，我无法观察到线程之间的任何冲突。

我读过[Ruby 会自动阻止多个线程同时写入相同的数据](http://merbist.com/2011/02/22/concurrency-in-ruby-explained/)。这是真的？因此运算符在 Ruby 中是`+=`线程安全的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:23:53.503

好吧，这取决于您的实施和很多事情。在 MRI 中，有一个诸如 GVL（Giant VM Lock）之类的东西，它控制一次实际执行代码的线程。你看，在 MRI 中，一次只有一个线程可以执行*Ruby*代码。因此，虽然下面的 C 库可以让另一个线程运行，同时它们在*C*代码中使用 CPU 来乘以巨大的数字，但代码本身不能同时执行。这意味着，诸如赋值之类的语句可能不会与另一个赋值同时运行（尽管添加可能并行运行）。可能发生的另一件事是：我想我听说`int`s 的分配在 Linux 上是原子的，所以如果你在 Linux 上，那也可能是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:10:49.297

```
x += 1 
```

在各方面都等价于

```
x = x + 1 
```

（如果你重新定义`+`，你也会自动重新定义 的结果`+=`）

在这种表示法中，更清楚的是这不是原子操作，因此不能保证线程安全。

# coldfusion - ColdFusion 10 application.cfc 错误：计算活动会话数

> ID：11236083
> 
> 赞同：3
> 
> 时间：2012-06-27T23:17:19.067
> 
> 标签：coldfusion, coldfusion-10, application.cfc

在 adobe Coldfusion 10 文档中，[在 Application.cfc 中定义应用程序及其事件处理程序](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7d39.html#WSc3ff6d0ea77859461172e0811cbec0b63c-7ff1)，有一个示例 Application.cfc 包含以下函数。查看代码后，我想知道以下代码中是否存在拼写错误/错误：

```
<cffunction name="onSessionStart"> 
    ...
    <cflock timeout="5" throwontimeout="No" type="EXCLUSIVE" scope="SESSION"> 
        <cfset Application.sessions = Application.sessions + 1> 
    </cflock> 
    ...
</cffunction> 
```

应该是：

*   (A) cflock ... scope="SESSION"
    或
*   (B) cflock ... scope="APPLICATION"

?

如果是（A）那么我很困惑。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:13:16.723

这是[我对 Adob​​e 论坛上提出的相同问题的回答](http://forums.adobe.com/message/4524996#4524996)的副本：

> 不要混淆......这是文档中的错误。您可以通过在页面底部发表评论来帮助 Adob​​e：他们会监控这些评论（他们并不总是做出反应，但会监控它们）。
> onSessionStart() 就会话范围而言本质上是单线程的：它在每个会话中只运行一次（当会话开始时......）。另一方面，有问题的代码 def 想要单线程访问该应用程序范围的变量，因为我们不希望两个同时会话针对它的任何给定单个值访问它（如果这有意义的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:24:28.240

You always lock the SCOPE that you are writing to. In this case it would be APPLICATION.

# svg - 使用 SVG、HTML/CSS、ImageMap 创建带有可点击省份/州的地图

> ID：11236085
> 
> 赞同：33
> 
> 时间：2012-06-27T23:17:41.647
> 
> 标签：svg, mapping, imagemap, jquery-svg

我正在尝试创建一个交互式地图，用户可以在其中单击地图中的不同省份以获取特定于该省份的信息。

例子：

*   存档：[http ://www.todospelaeducacao.org.br/](https://web.archive.org/web/20120615063214/http://www.todospelaeducacao.org.br/)

*   存档：[http ://code.google.com/p/svg2imap/](https://web.archive.org/web/20120619042924/http://code.google.com/p/svg2imap//)

到目前为止，我只找到了功能有限的解决方案。我只是使用 SVG 文件真正搜索过这个，但如果可能的话，我会向其他文件类型开放。

如果有人知道执行此操作的完整方法（jQuery 插件、PHP 脚本、矢量图像）或有关如何手动执行此操作的教程，请分享。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-29T19:49:08.893

用于装饰图像地图的 jQuery 插件（亮点、选择区域、工具提示）：

[http://www.outsharked.com/imagemapster/](http://www.outsharked.com/imagemapster/)

披露：我写的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-28T08:55:55.267

Sounds like you want a simple imagemap, I'd recommend to not make it more complex than it needs to be. Here's an article on [how to improve imagemaps with svg](http://web.archive.org/web/20131128162342/http://dev.opera.com/articles/view/improving-image-maps-with-svg-and-xslt/). It's very easy to do clickable regions in svg itself, just add some <a> elements around the shapes you want to have clickable.

A couple of options if you need something more advanced:

*   [http://jqvmap.com/](http://jqvmap.com/)
*   [http://jvectormap.com/](http://jvectormap.com/)
*   [http://polymaps.org/](http://polymaps.org/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-02T10:40:14.183

我认为最好将我的答案分为两部分：

* * *

**A -**从头开始​​创建所有内容（使用 SVG、JavaScript 和 HTML5）：

1.  创建一个新的 HTML5 页面
2.  创建一个新的 SVG 文件，每个可点击区域（省）应该是 SVG 文件中的一个单独的 SVG 多边形，（我使用 Adob​​e Illustrator 创建 SVG 文件，但您也可以找到许多替代软件产品，例如[Inkscape](http://www.inkscape.org/)）
3.  将鼠标悬停和单击事件一一添加到您的多边形

    ```
    <polygon points="200,10 250,190 160,210" style="fill:lime;stroke:purple;stroke-width:1" 
        onmouseover="mouseOverHandler(evt)"
        onclick="clickHandler(evt)" /> 
    ```

4.  为 JavaScript 代码中的每个事件添加一个处理程序，并将所需的代码添加到处理程序

    ```
    function mouseOverHandler(evt) {};
    function clickHandler(evt) {}; 
    ```

5.  将 SVG 文件添加到您的 HTML 页面（我更喜欢内联 SVG，但您也可以使用链接的 SVG 文件）
6.  将文件上传到您的服务器

* * *

**B - 使用**[FLDraw Interactive Image Creator 之](http://www.fldraw.com/)类的软件（仅当您有地图图像并希望使其具有交互性时）：

1.  创建一个空项目并在创建新项目时选择您的地图图像作为您的基础图像
2.  为每个省份添加一个多边形元素（来自形状菜单）
3.  对于每个多边形，双击它以打开“属性”窗口，您可以在其中选择鼠标悬停的事件类型并单击，还将形状不透明度更改为 0 使其不可见
4.  保存您的项目并将其发布到 HTML5，FLDraw 将创建一个新文件夹，其中包含您可以上传到服务器的项目所需的所有文件。

* * *

如果您是程序员或有人为您创建所需的代码和 SVG 文件，选项 (A) 非常好，如果您不想雇用某人或花费自己的时间从刮

您还有其他一些选择，例如使用 HTML5 Canvas 而不是 SVG，但使用 HTML5 Canvas 创建可缩放地图并不容易，也许还有其他一些我不知道的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-15T17:50:38.027

以防万一有人会搜索它——我在几个网站上使用过它，定制和 RD 的可能性总是非常适合我需要的东西。简单且免费使用：

[可点击的 CSS 地图](http://winstonwolf.pl/clickable-maps/europe.html)

关于站点上更多脚本的一个注释：我在 Drupal 7 中使用地图（用作图形菜单）时遇到了一些烦人的问题。那里使用了许多其他脚本，在处理它们之后，我被地图卡住了- 它仍然没有工作，虽然 jquery.cssmap.js、CSS（都是本地的）和脚本在正确的位置。Firebug 向我显示了一个错误，我突然发现了 - 一个简单的疏忽，我将脚本代码保留在示例中，并且发生了冲突。只需将前面的函数“$”更改为“jQuery”（或其他处理程序），它就可以完美运行。:]

这就是我的意思（当然你可以把它放在前面而不是 ）：

```
<script type="text/javascript">
      jQuery(function($){
        $('#map-country').cssMap({'size' : 810});
       });
    </script>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-10T08:29:46.017

一段时间以来，我一直在为我的省份地图使用[makeaclickablemap](http://www.makeaclickablemap.com)，结果证明它非常适合。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T23:59:58.893

使用您的 SVG转到[SVG to Script](http://www.irunmywebsite.com/raphael/SVGTOHTML_LIVE.php) 默认输出是 SVG 代码中的地图，它也添加了添加事件，但很容易识别并且可以根据需要进行更改。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-27T17:24:08.317

我有同样的要求，最后这个[地图转换器](https://github.com/datag/jvectormap/wiki/Map-converter-notes)对我有用。它是任何地图生成的最佳插件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-20T10:11:56.487

这是我为增强图像地图而编写的另一个图像地图插件：[https ://github.com/gestixi/pictarea](https://github.com/gestixi/pictarea)

它可以轻松突出显示所有区域，并让您根据区域的状态指定不同的样式：正常、悬停、活动、禁用。

您还可以指定可以同时选择多少个区域。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-29T15:05:13.950

以下代码可能对您有所帮助：

```
$("#svgEuropa [id='stallwanger.it.dev_shape_DEU']").on("click",function(){
    alert($(this).attr("id"));
}); 
```

[资源](https://www.maps4office.com/create-clickable-map-use-jquery-and-svg/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-10-06T16:10:28.573

你有很多选择：

1 - 如果你能找到你想要的地图的 SVG 文件，你可以使用[RaphaelJS](http://raphaeljs.com/)或[SnapSVG](http://snapsvg.io/)为你的州/地区添加点击监听器，这个解决方案是最可定制的......

2 - 您可以使用专用工具，例如[clickablemapbuilder（免费）](http://clickablemapbuilder.com/)或[makeaclickablemap（我认为也是免费的）](http://www.makeaclickablemap.com/)。

[免责声明] 我是[clickablemapbuilder.com](http://clickablemapbuilder.com)的作者:)

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-05-10T05:24:39.547

```
<script type="text/javascript">
      jQuery(function($){
        $('#map-country').cssMap({'size' : 810});
       });
    </script>
```

强文本

# javascript - 用于从变换矩阵中选择元素的正则表达式

> ID：11236090
> 
> 赞同：6
> 
> 时间：2012-06-27T23:18:11.093
> 
> 标签：javascript, regex, arrays, css

我有以下方式给出的样式转换字符串：

`matrix(0.312321, -0.949977, 0.949977, 0.312321, 0, 0)`

如何形成包含该矩阵元素的数组？任何提示如何为此编写正则表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T23:24:24.883

我会这样做...

```
// original string follows exactly this pattern (no spaces at front or back for example)
var string = "matrix(0.312321, -0.949977, 0.949977, 0.312321, 0, 0)";

// firstly replace one or more (+) word characters (\w) followed by `(` at the start (^) with a `[`
// then replace the `)` at the end with `]`
var modified = string.replace(/^\w+\(/,"[").replace(/\)$/,"]");
// this will leave you with a string: "[0.312321, -0.949977, 0.949977, 0.312321, 0, 0]"

// then parse the new string (in the JSON encoded form of an array) as JSON into a variable
var array = JSON.parse(modified)

// check it is correct
console.log(array) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T01:07:10.723

这是一种方法。用正则表达式解析出数字部分，然后使用`split()`方法：

```
var s = "matrix(0.312321, -0.949977, 0.949977, 0.312321, 0, 0)";
s.match(/[0-9., -]+/)[0].split(", "); // results in ["0.312321", "-0.949977", "0.949977", "0.312321", "0", "0"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T23:23:20.307

试试这个：

```
/^matrix\(([+\-\d.]+), ([+\-\d.]+), ([+\-\d.]+), ([+\-\d.]+), ([+\-\d.]+), ([+\-\d.]+)\)$/
    .exec(str).slice(1); 
```

## [演示](http://jsfiddle.net/AtasB/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T00:17:55.260

可能是这样的：

```
var string = "matrix(0.312321, -0.949977, 0.949977, 0.312321, 0, 0)";

var array = string.replace(/^.*\((.*)\)$/g, "$1").split(/, +/); 
```

请注意，通过这种方式，数组将包含字符串。如果你想要实数，一个简单的方法是：

```
array = array.map(Number); 
```

你的 js 引擎需要支持[map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)或者有一个 shim （当然你也可以手动转换）。

# android - Android 应用内演练

> ID：11236097
> 
> 赞同：0
> 
> 时间：2012-06-27T23:18:50.017
> 
> 标签：android

如何创建应用内分步说明？
[像这样](http://i.stack.imgur.com/ROF16.png)（[首次启动 android ics](http://www.youtube.com/watch?v=9ZZQrm07s4A&feature=player_detailpage#t=222s)，新的 google play 应用程序等）
它是公共 android sdk 的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:44:07.330

必须有人对所有这些进行编程。我不知道还能说什么，你需要做两件事：

1.  对您想要执行的所有操作进行排序，并以编程方式执行按钮按下的操作。（显示其他屏幕，启动其他活动等）

2.  画出代表手指/手等的形状。

# authentication - Request.LogonUserIdentity 和 WindowsIdentity.GetCurrent()

> ID：11236099
> 
> 赞同：-1
> 
> 时间：2012-06-27T23:19:07.267
> 
> 标签：authentication, iis, identity

```
 Response.Write("Request.LogonUserIdentity.Name:" +Request.LogonUserIdentity.Name);
 Response.Write("<br/>");            
 Response.Write("WindowsIdentity.GetCurrent().Name:" + WindowsIdentity.GetCurrent().Name);
 Response.Write("<br/>"); 
```

如上所述，如果我使用匿名凭据，它将是：

`Request.LogonUserIdentity.Name`**:NT AUTHORITY\IUSR**

`WindowsIdentity.GetCurrent().Name`**:IIS APPPOOL\TestSite**

但在模仿者之后，`LoginUserIdentity`将是一样的

`Request.LogonUserIdentity.Name`**:NT AUTHORITY\IUSR**

`WindowsIdentity.GetCurrent().Name`**:模仿者身份**

**MSDN**说

> LogonUserIdentity 属性向 Microsoft Internet Information Services (IIS) 公开当前连接用户的 WindowsIdentity 对象的属性和方法。

为什么`loginUserIdentity`总是使用匿名身份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:42:00.123

You misunderstand authentication and impersonation,

```
Property Value

Type: System.Security.Principal.WindowsIdentity
A WindowsIdentity object for the current Microsoft Internet Information Services (IIS) authentication settings. 
```

Whether you enable impersonation or not, the logon user remains the same, so Request.LogonUserIdentity should remain the same, which obviously is correct and meet expectation.

The change of WindowsIdentity.GetCurrent is also expected, as that's just caused by impersonation.

Reference:

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.logonuseridentity.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.logonuseridentity.aspx)

[http://msdn.microsoft.com/en-us/library/ms998351.aspx](http://msdn.microsoft.com/en-us/library/ms998351.aspx)

# php - 使用数据库记录填充 span/div

> ID：11236101
> 
> 赞同：0
> 
> 时间：2012-06-27T23:19:23.513
> 
> 标签：php, jquery, mysql

如果这真的很愚蠢，我很抱歉。我已经搜索但似乎无法找到答案。我希望我能解释我想要做什么。

我希望能够查询数据库以及其中是否有记录以显示 span/div 中的记录，或者如果没有则显示未找到的错误消息。

我有一个 jquery 检查并运行以检查用户名是否在数据库中，我想知道的是修改它以提取所有数据并将其显示在原始页面的 span/div 中是多么容易。

这是我的jQuery：

```
$(document).ready(function () {
    $('#username').keyup(username_check);
});

function username_check() {
    var username = $('#username').val();
    if (username == "" || username.length < 2) {
        $('#username').css('border', '1px #D5D5D5');
        $('#cross').hide();
        $('#tick').hide();
    } else {

        jQuery.ajax({
            type: "POST",
            url: "check.php",
            data: 'username=' + username,
            cache: false,
            success: function (response) {
                if (response == 1) {
                    $('#username').css('border', '2px #C33 solid');
                    $('#tick').hide();
                    $('#cross').fadeIn();
                } else {
                    $('#username').css('border', '2px #090 solid');
                    $('#cross').hide();
                    $('#tick').fadeIn();
                }

            }
        });
    }
} 
```

我可以在一个页面上完成所有这些并从同一页面查询数据库，而不是将其发布到另一个页面，因为我不知道如何将结果返回到调用页面？

我希望我已经解释了我想要做什么。抱歉，如果我没有

这是PHP代码：

```
$username = trim(strtolower($_POST['username'])); $username = mysql_escape_string($username); $query = "SELECT adbkid FROM person WHERE adbkid = '$username' LIMIT 1"; $result = mysql_query($query); $num = mysql_num_rows($result); echo $num; mysql_close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:37:19.923

而不是发回“1”，而是发回一个 json 响应，例如：

```
 /* record exists */
   {status:1, html:'server generated message about record'} 
   /* doesn't exist */
    {status:0} 
```

这将允许您仍然根据响应数据`status`值更改 css

可以使用`$.post`ajax速记方法：

```
$.post('check.php',{username: username},  function(response){
    var upDateElement=$('#spanID');

    if(response.status && response.status== 1){
        $('#username').css('border', '2px #C33 solid'); 
        $('#tick').hide();
        $('#cross').fadeIn();

        upDateElement.html( response.html)

    }else{
        $('#username').css('border', '2px #090 solid');
        $('#cross').hide();
        $('#tick').fadeIn();

        upDateElement.html('Message html for no record found')

    }
},'json') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:24:01.487

您可以在 PHP 中输​​出一个字符串，然后使用 jQuery 将该文本值设置为一个元素（`$('#element').val(responseFromServer);` 或`$('#element').html(responseFromServer);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T23:24:20.577

您通常会向服务器上托管的页面发送 ajax 请求。所以你不能直接访问你的数据库而不通过你的服务器。您需要在服务器上编写一个查询数据库的函数，然后使用 ajax 从 javascript 调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T23:30:40.683

检查.php

```
$data = array();
$data['exists'] = false;

if(!isset($_POST['username'])) {
    echo json_encode($data);
    exit();
}

$username = mysql_escape_string($_POST['username']);
$query = "SELECT adbkid FROM person WHERE adbkid = '$username' LIMIT 1";
$result = mysql_query($query);
$row = mysql_fetch_assoc($result);

if(count($row) == 1) {
    $data = $row;
    $data['exists'] = true;
}

return json_encode($data); 
```

从你的 jQuery 中：

```
success: function(response) {
    /**
     * For instance, for a table with id, username, password and email you have 
     * data.exists = true/false;
     * data.id = 1;
     * data.username = 'foo';
     * data.password = 'sample data password';
     * data.email = 'foo@bar.com';
     */
    if(response.exists === true) {
        $('#username').val(response.username);
        $('#email').val(response.email);
    }
} 
```

# facebook - 如何获取登录用户的 Facebook ID？

> ID：11236105
> 
> 赞同：0
> 
> 时间：2012-06-27T23:20:10.640
> 
> 标签：facebook, login, callback, facebook-javascript-sdk, fbconnect

我正在使用 facebook connect 来允许用户使用 facebook 登录到我的网站。我在经典 ASP、vbscript 中使用 OAuth 使用服务器端身份验证。我想知道以下其中一项是否可行：

1) 我是否可以在不重定向到 Auth 对话框的情况下识别用户是否授权了我的应用程序？即，即使在用户单击 facebook 登录按钮登录到我的网站之前，有没有办法可以找出当前登录到 facebook 的用户是否已授权我的应用程序？

2) 如何获取当前登录 facebook 的用户的 facebook 用户 ID？这在 facebook 身份验证过程之外。facebook 是否提供一些 api，我可以使用它来读取用户登录 facebook 时设置的 fb cookie 并获取登录用户的 facebook 用户 ID？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:35:16.540

1)`FB.getLoginStatus`从 JavaScript SDK 使用。

2）如果他还没有连接到你的应用程序，那么根本就没有。否则，请参见 1)

# jquery - iPhone 网络应用程序中的 jPlayer

> ID：11236107
> 
> 赞同：3
> 
> 时间：2012-06-27T23:20:19.537
> 
> 标签：jquery, streaming, jplayer

我需要为 iPhone 做一个简单的流音频播放器。我怎么能用 jPlayer 做到这一点？

我在官方网站上没有找到任何教程来解决我的问题或简单的流音频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T11:06:38.883

jPlayer 实际上在[http://www.jplayer.org/latest/quick-start-guide/step-1/上有一个非常好的快速入门指南](http://www.jplayer.org/latest/quick-start-guide/step-1/)

在您的情况下，在步骤 5 中选择“音频的下一步”。

为了使它几乎可以在任何地方工作，您必须向 jPlayer 提供音频的 mp3 和 m4a 文件。

# c# - 如何对绑定到自定义对象集合的 DataGridView 进行排序？

> ID：11236109
> 
> 赞同：5
> 
> 时间：2012-06-27T23:20:34.963
> 
> 标签：c#, winforms, datagridview, bindingsource

因此，我一直在关注[本指南以在 Windows 窗体控件上进行数据绑定](http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial)（作者的疯狂道具，本指南很棒），并且我已经使用它来创建自定义类并将 a 绑定`DataGridView`到此类的集合：

```
class CompleteJobListEntry
{
    private string _jobName;
    private Image _jobStatus;
    private DateTime _jobAddedDate;
    private string _jobAddedScanner;
    private string _jobAddedUser;
    private string _jobLastActivity;
    private DateTime _jobActivityDate;
    private string _jobActivityUser;

    public string JobName { get { return _jobName; } set { this._jobName = value; } }
    public Image JobStatus { get { return _jobStatus; } set { this._jobStatus = value; } }
    public DateTime JobAddedDate { get { return _jobAddedDate; } set { this._jobAddedDate = value; } }
    public string JobAddedScanner { get { return _jobAddedScanner; } set { this._jobAddedScanner = value; } }
    public string JobAddedUser { get { return _jobAddedUser; } set { this._jobAddedUser = value; } }
    public string JobLastActivity { get { return _jobLastActivity; } set { this._jobLastActivity = value; } }
    public DateTime JobActivityDate { get { return _jobActivityDate; } set { this._jobActivityDate = value; } }
    public string JobActivityUser { get { return _jobActivityUser; } set { this._jobActivityUser = value; } }
} 
```

此时，我从各种 SQL 数据库中导入了一堆数据来填充表，结果非常好。该指南甚至为添加过滤器提供了一个很好的起点，我打算稍后再跟进。不过，就目前而言，我坚持对新生成的`DataGridView`. 环顾四周，我发现它`DataGridView`有自己的 Sort 方法，可用如下：

```
completeJobListGridView.Sort(completeJobListGridView.Columns["JobName"], ListSortDirection.Ascending); 
```

但是，当我尝试执行此操作时，我收到一条`InvalidOperationException`消息，告诉我“如果 DataGridView 控件绑定到不支持排序的 IBindingList，则无法对其进行排序。” 我找到了 IBindingList 和 IBindingListView 接口，但是让我的类继承这些接口中的任何一个都不能解决问题。

我该怎么做呢？我完全被困在这里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T16:46:49.380

如果您的数据在一个集合中，您应该能够使用该[`BindingListView`库](http://blw.sourceforge.net/)轻松地将排序功能添加到您的 DGV。请参阅[如何实现 DataGridView 的自动排序？](https://stackoverflow.com/questions/3770857/how-do-i-implement-automatic-sorting-of-datagridview)[以及我对如何对绑定到 EF EntityCollection<T> 的 WinForms DataGridView 进行排序以](https://stackoverflow.com/questions/5903196/how-to-sort-winforms-datagridview-bound-to-ef-entitycollectiont)获取更多信息和代码片段的回答。

# html - 表单下拉时向下推页面的其余部分

> ID：11236114
> 
> 赞同：-2
> 
> 时间：2012-06-27T23:21:07.820
> 
> 标签：html, css, css-float

当我单击应该下拉表单的标题按钮时，如何下推页面的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:37:04.620

如果我理解正确，你可以这样做：http: [//jsfiddle.net/9rCcn/](http://jsfiddle.net/9rCcn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:26:23.020

如果你的 DOM 位置很好，它应该会自动下推。请检查您的内容的浮动样式，以确保它们处于相同的浮动级别；然后将 overlow:auto 添加到您刚刚下拉的 from 中，以确保表单的容器达到其内容的高度。它应该可以正常工作。

# jquery - 下拉菜单中的工具提示导致菜单在鼠标悬停时隐藏

> ID：11236118
> 
> 赞同：0
> 
> 时间：2012-06-27T23:21:51.533
> 
> 标签：jquery, css, drop-down-menu, menu, tooltip

我有一个下拉菜单，在那个下拉菜单中我有带有 jQ​​uery 工具提示的图像 (http://tooltipsy.com/)。当您将鼠标悬停在图像上时，工具提示显示正常。如果您将鼠标悬停在图像上，工具提示就会消失，而菜单仍然存在。但是，如果您按下鼠标并将光标悬停在工具提示上，则菜单和工具提示都会消失。

我查看了工具提示 JS，并没有看到与实际将鼠标悬停在工具提示上相关的任何内容。

请参阅此处的菜单：http: [//www.dotatryhards.com/](http://www.dotatryhards.com/) mouseover 导航菜单中的“GUIDES”，然后将鼠标悬停在图像上。现在您将看到工具提示正常工作，向下移动鼠标（使其点击工具提示），现在整个菜单和工具提示将消失。（但是，如果您将鼠标悬停在带有工具提示的图像上并将鼠标从工具提示上移开（因此您的光标不会碰到实际的工具提示），菜单将保留并且工具提示将很好地隐藏））

工具提示 JS： http: [//www.dotatryhards.com/js/tt.js](http://www.dotatryhards.com/js/tt.js)

任何建议都会很好地让这些工具提示在我的下拉菜单中正常工作。现在它对任何使用菜单的人来说都是一个障碍，因为当他们将鼠标放在菜单上时它会消失（它一定会点击工具提示）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:54:31.500

我不知道为什么会这样，但这就是我所理解的。

（“工具提示1389”）

似乎上面的 div 集在 ("dropdown_5columns menul2") 和 BODY 之外，当你 mouseOn $(#tooltipsy1389) 时，它被认为是 $(".dropdown_5columns,.menul2") 的 mouseOut。

# scala - Scala：根据另一个参数的类型成员约束参数的类型

> ID：11236122
> 
> 赞同：3
> 
> 时间：2012-06-27T23:22:18.943
> 
> 标签：scala

我有两个特征，每个特征都有一个为其成员之一的类型参数。在第一个特征中，我有一个函数，它采用第二个特征的实例和第二个特征的类型成员的实例。此函数调用第二个特征中的函数，该函数期望其类型成员的该实例。但是，我无法弄清楚如何正确参数化调用以使其真正起作用。这是一个失败的简化示例：

```
trait Garage {
  type CarType <: Car
  def Cars: Seq[CarType]

  def copy(Cars: Seq[CarType]): Garage

  def Refuel(car: CarType, fuel: CarType#FuelType): Garage = {
    val car_index = Cars.zipWithIndex.find(_._1 == car).get._2

    copy(Cars.updated(car_index, car.Refuel(fuel)))
  }
}

trait Car {
  type FuelType <: Fuel
  def Fuel: FuelType

  def copy(Fuel: FuelType): Car

  def Refuel(fuel: FuelType): Car = {
    copy(fuel)
  }
}

trait Fuel 
```

这失败并出现以下错误：

```
error: type mismatch;
 found   : fuel.type (with underlying type Garage.this.CarType#FuelType)
 required: car.FuelType
    copy(Cars.updated(car_index, car.Refuel(fuel)))
                                            ^ 
```

如何约束`Garage.Refuel`函数以使其接受 a`Car`以及`Fuel`该类型可接受的任何`Car`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T00:26:15.647

尝试：

```
def Refuel(car: CarType)(fuel: car.FuelType): Garage = { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T01:40:52.390

尽管丹尼尔的回答有效，但我想指出一个替代方案，这是我自己的灵丹妙药。我一直在努力使路径依赖类型正确，并最终采用了以下策略。这有点“丑陋”，因为您现在需要编写一个额外的类型参数，但这种方法从未让我失望：

```
trait Garage {
  type CarType <: Car[CarType]  // CarType appears as representation type on the right
  def cars: Seq[CarType]

  def copy(Cars: Seq[CarType]): Garage

  def refuel(car: CarType, fuel: CarType#FuelType): Garage = copy(
    cars.map {  // map is more concise for what you try to achieve
      case `car` => car.refuel(fuel)  // backticks to find the particular car
      case other => other
    })
}

trait Car[C <: Car[C]] {  // add a 'representation type'
  type FuelType <: Fuel
  def fuel: FuelType

  // use 'C' instead of 'Car' everywhere, and qualify the type member with 'C#'
  def copy(fuel: C#FuelType): C

  def refuel(fuel: C#FuelType): C = copy(fuel)
}

trait Fuel 
```

我不知道这个“表示类型”概念是否有正式名称（我很想知道）。我试图查找是谁教我的，但没有找到（至少在 stackoverflow 中）。

# asp.net-mvc - 如何将 CSS 应用于 EditorFor 字段？

> ID：11236123
> 
> 赞同：2
> 
> 时间：2012-06-27T23:22:32.527
> 
> 标签：asp.net-mvc

在我看来，我有以下`EditorFor<>`显示数字属性。我想控制在结果标记中创建的文本框的宽度。

渲染视图时，文本框不是 50px。它是 300 像素。CSHTML 中指定的类`editor-field-score`, 似乎未应用。我使用开发人员工具检查了 Chrome，并且该类未添加到生成的标记中。

这是来自我的 CSHTML：

```
<div class="editor-field">
   @Html.EditorFor(model => model.Animal, new { @class = "editor-field-score" })
   @Html.ValidationMessageFor(model => model.Animal)
</div> 
```

这是来自我的 CSS：

```
fieldset input[type="text"].editor-field-score { width : 50px; } 
```

此标记是从 Chrome 复制的：

```
<div class="editor-field">
   <input class="text-box single-line" data-val="true" data-val-number="The field XXX must be a number." id="Animal" name="Animal" type="text" value="">
   <span class="field-validation-valid" data-valmsg-for="Animal" data-valmsg-replace="true"></span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:29:07.493

好吧，你可以这样做：

```
.editor-field input {
} 
```

作为您的选择器。

否则，您可以使用 TextBoxFor ，它允许像这样设置 HTML 属性：

```
@Html.TextBoxFor(model => model.Animal, new { @class = "editor-field-score" }) 
```

# delphi - 如何检查StringGrid中的单元格是否被修改

> ID：11236128
> 
> 赞同：1
> 
> 时间：2012-06-27T23:22:56.750
> 
> 标签：delphi, delphi-7, tstringgrid

我想知道如何以编程方式确定字符串网格单元格中的数据是否已修改？

我有一个表格中的字符串网格。stringgrid 的数据正在从数据库中加载。如果用户修改数据，我想更改数据库中的数据。

请分享代码。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T23:39:02.967

TStringGrid 类有一个事件`OnSetEditText`，当用户更改单元格中的数据时会触发该事件。在事件处理程序的参数中使用`ACol`and`ARow`来识别哪个单元格已被修改...

```
procedure TForm1.StringGrid1SetEditText(Sender: TObject; ACol, ARow: Integer;
  const Value: string);
begin
  //Use ACol/ARow to know what has changed, and Value to know what the new data is.

end; 
```

# javascript - 从列表中自动创建单选按钮

> ID：11236131
> 
> 赞同：0
> 
> 时间：2012-06-27T23:23:12.747
> 
> 标签：javascript, jquery, python, html, css

我正在使用 jinja2 为谷歌应用程序引擎编写一个 python 网络应用程序，尽管我的问题与 HTML/javascript 相关（jquery 很好）。

我有一个由单选按钮引导的菜单。我有两列我想永久保留在那里，我希望根据用户从前两列中选择的内容生成接下来的三列。

我有点了解如何使用 JQuery 自动生成单选按钮（尽管任何建议的资源都会很棒，但我可能会弄清楚），但我的主要问题围绕着这样一个事实，即我的最终单选按钮有大约 100 种可能性，具体取决于以前的可能性已选中（请注意，一次只会显示 3-5 个）。

所以我的主要问题。我应该在哪里存储它们将指向的单选按钮和 URL 的名称？以及如何在创建它们时将它们放入单选按钮中？

这是我希望最终产品看起来像的图像：

![图片](../Images/30fdb95b04d25738c4c3823b9c3a3221.png)

非常感谢，出于某种原因，这让我心烦意乱！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:28:58.367

您的 100 个选项现在存储在 javascript（前端）中的什么位置？

如果您的所有选项都存储在前端，您可以在前端实现您的逻辑（根据先前的选择显示哪些按钮）。这可能包括一系列单选按钮。如您所见，这可能会开始变得难以维护。每次要更新 yoru 逻辑时，都必须手动更新 js 文件。

如果所有选项都存储在 python/backend 中，则需要从前端向后端发出 AJAX 请求。这可以使用 jquery 框架轻松完成。

该请求将包括用户做出的选择。它会返回正确的单选按钮来显示。

# java - JAVA AWT如何通过按下按钮关闭对话框

> ID：11236133
> 
> 赞同：2
> 
> 时间：2012-06-27T23:23:23.700
> 
> 标签：java, swing, awt, modal-dialog, windowlistener

我有一个 AWT 模式对话框

```
public class d extends java.awt.Dialog {... 
```

在对话框框架上，使用 netbeans gui 设计器我将对话框然后面板然后按钮。我试图通过按下按钮关闭对话框。我对 System.exit(0) 不感兴趣。

创建的 netbeans 生成器

```
private void jButtonCloseActionPerformed(java.awt.event.ActionEvent evt){ 
```

我认为我应该在该函数中调用 dispose，但是当调用它时，它会释放对话框，但对话线程永远不会结束。

当窗口默认关闭时，我有以下处理程序工作对话框关闭按钮

```
 dialog.addWindowListener(new java.awt.event.WindowAdapter() {
       @Override
        public void windowClosing(java.awt.event.WindowEvent e) {
           Window window = SwingUtilities.getWindowAncestor(e.getComponent());
           window.dispose();
        }
     }); 
```

以上工作正常，即线程结束。

我可以在 jButtonCloseActionPerformed 中使用相同的方法，但我不知道如何获取窗口对象。

我怎样才能做到这一点？任何其他好的解决方案也非常受欢迎。

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:18:30.963

我认为最好的答案（简而言之）是使用以下代码

```
Window window = SwingUtilities.getWindowAncestor(this);
window.dispose(); 
```

*这*在这里很重要。我试图通过从事件等中获取父对象来以某种方式获取窗口对象。在 WindowClosing 的情况下，我确实可以以这种方式获取窗口对象引用，但如果是按钮，它不起作用......然后我意识到我可以简单参考*这个*。互联网上的大多数示例调用 System.Exit(0) 但恕我直言，调用 System.Exit(0)**仅**在示例的情况下是可以的，而不是在实际应用程序中。

# ssl - 带有客户端证书的 TLS（/ 由负载均衡器处理）是否提供不可否认性和消息完整性？

> ID：11236135
> 
> 赞同：0
> 
> 时间：2012-06-27T23:23:30.300
> 
> 标签：ssl, certificate

所以，有几个问题：

1) 在 TLS 期间使用客户端证书是否提供不可否认性？

1a) 跟进：如果是这样，让负载均衡器处理事务是否仍能在终端服务器/服务级别提供这种保证？

2/2a) 与上述相同的问题，但针对消息完整性。

我知道 MLS 的答案，但我不确定 TLS。如果我理解正确，TLS 涉及建立共享秘密的握手，并且用于保护管道 - 所以这些都不成立，因为每条消息只使用共享秘密。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:39:21.127

> 在 TLS 期间使用客户端证书是否提供不可否认性？

不，这是不幸的，因为它参与了实现它所需的一切，*除了*使数字签名可用。有可能作为专家证人在法庭上站起来，并提出一个案例，因为这一切都发生在幕后，交易无论如何都应该是不可否认的，但我更愿意能够产生一个实际的数字签名法庭。那么就没有什么好争论的了。

> 2/2a) 与上述相同的问题，但针对消息完整性。

TLS 提供消息隐私、消息完整性和至少一个对等点的身份验证（除非您破坏了它）。它不提供授权，也不提供上述不可否认性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:18:08.967

> > 1.  在 TLS 期间使用客户端证书是否提供不可否认性？
> > 
> > 1a) 跟进：如果是这样，让负载均衡器处理事务是否仍能在终端服务器/服务级别提供这种保证？

TLS 是关于*传输*层安全性的（因此称为*传输层安全*性）。[根据规范](https://www.rfc-editor.org/rfc/rfc4346#section-2)，它旨在保护客户端和服务器（可能是负载平衡器）之间的通信：

> TLS 协议的主要目标是在两个通信应用程序之间提供隐私和数据完整性。

原则上，您可以保留整个 TLS 交换，特别是保留握手以证明客户端证书签署了证书验证消息的内容。您还必须保留各种生成/计算的中间值（特别是主密钥，以及随后的共享密钥）。这样做有一个问题：TLS 规范[要求（仅使用“应该”）要删除的预主密钥](https://www.rfc-editor.org/rfc/rfc5246#section-8.1)。这可能会使证明从数据返回到客户端证书的路径相当困难。（您当然也必须调整 SSL/TLS 堆栈来记录所有这些。）

此外，记录所有这些将在应用程序协议下（假设这里是 HTTPS，但同样适用于其他协议）。在您获得不希望被否定的实际数据之前，这肯定是另一层。（问题是您可能必须记录整个会话以供证明，而无法选择请求/响应来隔离。）

当涉及到会话恢复（例如）和通常的并行请求时，您可能还会遇到更多问题。这肯定会增加混乱。

总的来说，这不是 TLS 的设计目的。不可否认性是关于能够保留交换证明，可能能够在法庭或类似场所展示它。向人们（可能没有技术背景）解释如何在有趣的数据和客户证书之间建立联系可能具有挑战性。

> > 2/2a) 与上述相同的问题，但针对消息完整性。

TLS 保证了通信的完整性（参见[规范介绍](https://www.rfc-editor.org/rfc/rfc4346#section-2)）。（当然，所有这一切，前提是客户端正确验证了服务器证书，尽管如果您仍然使用客户端证书，您应该能够检测到 MITM。）

只有在 TLS 连接结束时才能保证完整性。如果您使用的是负载均衡器，这将是负载均衡器本身。（当然，最好通过可信任的网络将负载均衡器链接到其工作节点。）

如果您正在使用客户端可以发送不可否认消息的系统，并且可以在以后进行审核，那么您应该研究*消息*级别的解决方案。

# php - 关联数组：如何摆脱重复？

> ID：11236137
> 
> 赞同：0
> 
> 时间：2012-06-27T23:23:31.593
> 
> 标签：php

我有一个数组：

```
Array
(
    [0] => Array
        (
            [attribute_name] => Appliances
            [attribute_value] => Washer
        )

    [1] => Array
        (
            [attribute_name] => Appliances
            [attribute_value] => Dryer
        )

    [2] => Array
        (
            [attribute_name] => Appliances
            [attribute_value] => Dishwasher
        )

    [3] => Array
        (
            [attribute_name] => Appliances
            [attribute_value] => Microwave
        )

    [4] => Array
        (
            [attribute_name] => Console
            [attribute_value] => Xbox360
        )

    [5] => Array
        (
            [attribute_name] => Console
            [attribute_value] => PS3
        )
) 
```

我想生产：

```
Array
(
    [0] => Array
        (
            [attribute_name] => Appliances
            [attribute_value] => Washer, Dryer, Dishwasher, Microwave
        )

    [1] => Array
        (
            [attribute_name] => Console
            [attribute_value] => Xbox360, PS3
        )
) 
```

这是如何在 PHP 中实现的？

这是我基于@andrewtweber 的原始解决方案的最终代码：

[http://codepad.org/E4WFnkbc](http://codepad.org/E4WFnkbc)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T23:40:45.320

```
$new_arr = array();

foreach( $arr as $data ) {
    if( !isset($new_arr[$data['attribute_name']]) ) {
        $new_arr[$data['attribute_name']] = array();
    }
    $new_arr[$data['attribute_name']][] = $data['attribute_value'];
} 
```

这会给你

```
array( 'Appliances' => array( 'Washer', 'Dryer', 'Dishwasher' ) ); 
```

[http://codepad.org/m6l3je0H](http://codepad.org/m6l3je0H)

# git - 正确地重新合并合并

> ID：11236138
> 
> 赞同：3
> 
> 时间：2012-06-27T23:23:38.043
> 
> 标签：git, git-merge, git-rebase

另一个git问题......我处于以下情况：

```
A1 ---- B1 ---- C1
                   \
                    > D ---- E ---- F
                   /
A2 ---- B2 ---- C2 
```

其中 {A1,B1,C1} 和 {A2,B2,C2}*没有*共同的文件（这是合并两个不同存储库的结果，所以我目前有两个根）

我希望历史看起来像这样

```
A1 ---- B1 ---- C1 ---- A2 ---- B2 ---- C2 ---- D ---- E --- F 
```

但是我无法弄清楚如何使用 git-rebase 来做到这一点，知道吗？

奖励：如果我可以保留标签（我在所有三个分支上都有）而不必手动进行......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:22:32.323

我设法按顺序使用以下两个命令来做到这一点：

```
git filter-branch -f --parent-filter 'test $GIT_COMMIT = <a2> && echo "-p <c1>" || cat'
git filter-branch -f --parent-filter 'test $GIT_COMMIT = <new head> && echo "-p <c2>" || cat' 
```

当然，您必须用相应的提交哈希替换`<a2>`,`<c1>`等。`<new head>`请注意，在第一个命令之后头部的哈希值发生了变化，这就是为什么我调用它`<new head>`而不是`<d>`.

这实际上非常简单：第一个命令将 C1 设置为 A2 的父级。第二个命令通过将 C2 设置为 D 的唯一父级来修复图形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:07:28.163

好的，我想出了一个方法来做到这一点。由于它大大降低了对git内部的理解，我在这里给出一个详细的答案：

首先，你必须给 A2 一个新的父母，因为它以前没有：

```
git cat-file commit A2 
```

产生一个没有“父母出现”的摘要。所以创建该行，并创建一个新的哈希：

```
git cat-file commit A2 | sed -e '2aparent C1' | git hash-object -t commit -w --stdin 
```

这将给出一个哈希 {H1} 作为输出，我们用它来用这个新的哈希替换 A2：

```
git replace A2 H1 
```

瞧，A2 现在有 C1 作为父级。但现在历史看起来是这样的：

```
A1 ---- B1 ---- C1 --------------------- D ----- E ----- F
                  \                     /
                     A2 ---- B2 ---- C2 
```

所以对 D 做同样的事情，它有两个父母（C1 和 C2）：

```
git cat-file commit D 
```

删除C1对应的“父”行，并散列，替换为：

```
H2=`git cat-file commit D | sed -e '/parent C1/d' | git hash-object -t commit -w --stdin`
git replace D H2 
```

看起来它对我有用。如果我很好地理解了我所做的事情，那么这很有效，因为我在两个存储库上都有不同的文件。我认为如果我在两个存储库中都有共同的文件并以某种方式在 D 中合并，事情可能会出错。

# c++ - MinGW 编译失败：我创建的头文件没有这样的文件或目录

> ID：11236152
> 
> 赞同：-2
> 
> 时间：2012-06-27T23:25:28.683
> 
> 标签：c++, g++, mingw

我开始学习 MinGW 来编译 C++ 程序。我有一个示例 C++ 文件，包括 test.cpp（主程序）和 srfft.h（我添加的额外头文件，而不是来自 libray）。该过程执行如下步骤：

**g++ test.cpp -o test.exe**

**测试程序**

```
#include <iostream>
using namespace std;
int main()
{
  cout<< "Hello World!\n";
  return 0;
} 
```

我得到了正确的答案，但是当我在 C++ 代码中添加#include 时，如下所示：

```
#include <iostream>
#include <srfft.h>
using namespace std;
int main()
{
  cout<< "Hello World!\n";
  return 0;
} 
```

CMD 显示“致命错误：srfft.h:No such file or directory”

如何使用 MinGW 执行我的代码？问题出在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T23:30:31.120

尝试

```
#include "srfft.h" 
```

注意`""`而不是`<`and `>`。使用`"srfft.h"`，相对于当前目录搜索文件，而使用`<srfft.h>`搜索仅在系统和指定的包含目录中进行，通常不包括当前目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T10:12:52.190

```
#include <iostream>
int main()

{
    std::cout<<"Hello World!\n";
    return 0;
} 
```

# c# - 如果绘制区域太大，则向面板添加垂直滚动条

> ID：11236154
> 
> 赞同：0
> 
> 时间：2012-06-27T23:25:36.053
> 
> 标签：c#, winforms, panel, system.graphics

我正在使用 WinForms 和 C#。

我正在开发的应用程序在面板内绘制矩形行（使用 g.DrawRectangle()）。面板可以容纳 6 个宽度的矩形（我不想水平滚动）。我在应用程序中通过计算行中的矩形来控制它，然后`y`在第六个矩形之后添加值。

在垂直方向上，我希望能够添加无限矩形并向下滚动以查看它们。现在，正在添加矩形，但面板不滚动（它们只是添加到屏幕外）。

有没有办法添加垂直滚动条？我尝试将`AutoScroll`属性设置为 true，但这并没有做任何事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T00:52:21.510

问题是您正在使用图形在面板上绘制。这些不是控件，因此它们不会导致面板增长。您应该创建两个面板 - PanelA 包含 PanelB。PanelA 有`AutoScroll=true`，但您在 PanelB 上绘图。绘制时，您还设置了 PanelB 的高度，这样当它比 PanelA 大时，PanelA 会得到一个滚动条。

# css - Css 过渡在尚未完成时不会顺利过渡回来

> ID：11236159
> 
> 赞同：0
> 
> 时间：2012-06-27T23:26:35.857
> 
> 标签：css, hover, css-transitions

1.  我有一个背景图像，当 :hover 时会变成另一个图像。
2.  我使用过渡来展示这种效果。
3.  当转换完成时，我的旧图像在失去焦点（非悬停）时使用相同的转换重新出现。

请看一个工作示例（使用 chrome）：http: [//jsfiddle.net/WZqrY/3/](http://jsfiddle.net/WZqrY/3/)

我的问题：当我将鼠标取出到第一个过渡的一半时，第二个过渡效果没有出现。您可以尝试将鼠标移入图像一秒钟，然后将其移出图像。我怎样才能使这一切顺利进行？

注意：当我使用颜色而不是图像时，这种效果确实以我假装的方式起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:08:54.207

背景图像过渡似乎是一种计划外的“副作用”，它的功能不完全，并且在浏览器中的支持非常有限

*“这只适用于 Chrome 18+ 和 2012 年以后构建的 Webkit Nightlies。这似乎是 CSS4 交叉淡入淡出工作的副作用”* -[来源](http://css3.bradshawenterprises.com/cfimg5/)

现在，您最好的选择是“容器中的 2 个图像”解决方案 - [http://jsfiddle.net/WZqrY/4/](http://jsfiddle.net/WZqrY/4/)

这适用于所有支持转换的浏览器。

# regex - Apache RewriteRule 正则表达式问题

> ID：11236161
> 
> 赞同：0
> 
> 时间：2012-06-27T23:26:45.650
> 
> 标签：regex, apache, mod-rewrite

[http://httpd.apache.org/docs/2.2/rewrite/intro.html](http://httpd.apache.org/docs/2.2/rewrite/intro.html)说：

在 mod_rewrite 中，`!`可以在正则表达式之前使用该字符来否定它。也就是说，只有当一个字符串与表达式的其余部分不匹配时，它才会被认为是匹配的。

但是，我的配置仅适用于第一条规则，而不适用于第二条。有人能告诉我为什么吗？

```
RewriteCond %{HTTP_HOST} !^static\.example\.com
RewriteCond %{HTTP_HOST} ^host\.example\.com
RewriteRule ^(/global/.*)$ /dir1
RewriteRule !^(/global/.*)$ /dir2    #this rule doesn't work. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:02:59.903

实际上，我通过将规则分成两部分来解决这个问题。host.example.com 和 example.com 都可以正常工作。

```
RewriteCond %{HTTP_HOST} !^static\.example\.com
RewriteCond %{HTTP_HOST} ^host\.example\.com
RewriteRule ^(/global/.*)$ /dir1 [L]

RewriteCond %{HTTP_HOST} !^static\.example\.com
RewriteCond %{HTTP_HOST} ^host\.example\.com
RewriteRule ^(.*)$ /dir2 [L] 
```

**但是我仍然想知道我们如何使用“！” 在重写规则中。**

# magento - Magento 添加产品尺寸和属性库存

> ID：11236162
> 
> 赞同：4
> 
> 时间：2012-06-27T23:27:05.230
> 
> 标签：magento, configurable-product

我认为这是一种常见的情况，我在卖衣服和鞋子，**我需要有一个尺寸选项，并为每个**. 我怎么能那样做？

这是一个例子，我卖的是 41 到 45 号的鞋子。我有 5 双，除了 45 号我只有 2 对。（请记住，衣服和鞋子没有相同的测量选项）。

如果我能同时为一个类别中的所有产品做这件事，那就太棒了，即使这意味着必须通过数据库。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T07:22:47.113

## 创建可配置产品

涉及几个步骤：

*   创建可由用户配置的属性 - 对于我们的示例，它们将是大小和颜色
*   创建将分配给变体产品的属性集 - 在我们的示例中，我们将其称为“T 恤”</li>
*   创建单个变体产品
*   创建可配置产品，并添加“T-shirt”属性集
*   将单个变体添加到此可配置产品

[http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/)

向表中添加新属性并不难，但您需要找到一种确保它不脏的好方法。您不想添加空属性以确保您有足够的空间容纳足够的产品并且您不想拥有太少的产品。有人建议我在数组上使用 implode 将其放入一个变量中，在该变量中存储原始射线的每个元素并由一个字符分隔。然后，您可以将其放入一列。您可以在此处找到一些有关更新 magento 表的有用信息：http: [//www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources/](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources/)

# matlab - 将矩阵拆分为列

> ID：11236163
> 
> 赞同：0
> 
> 时间：2012-06-27T23:27:09.380
> 
> 标签：matlab, split

我有一个矩阵，我想在列向量中拆分。我想将上述向量 [abcdefghklmnopqrstu] 作为输出，并将矩阵 A 作为输入。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T00:00:12.540

您可以通过将矩阵转换为元胞数组来执行此操作，如下所示：

```
M = rand(4);            % create a 4x4 random example matrix
C = num2cell(M,1);      % convert every column to a cell
[a,b,c,d] = deal(C{:}); % assign to variables a...d 
```

这会产生四个列向量`a, b, c, d`。根据需要添加更多字母。

我不太确定你为什么要这样做，我认为用你需要的列号索引你的原始矩阵可能更有效。

# ios - OpenGLES上的方向图

> ID：11236170
> 
> 赞同：1
> 
> 时间：2012-06-27T23:28:13.947
> 
> 标签：ios, opengl-es

我正在创建一个 ios 绘图应用程序，并想了解如何旋转我用于绘图的纹理以使纹理跟随我的笔划方向。

iOS 版 Sketchbook 和画笔是我见过的两个应用程序。

有谁知道如何实现这一目标？

这是我试图捕捉的概念的一个例子：http: [//drawsketch.about.com/od/learntodraw/ss/pencilshading_5.htm](http://drawsketch.about.com/od/learntodraw/ss/pencilshading_5.htm)

附件是此实践中的速写本应用程序的屏幕截图。![在此处输入图像描述](../Images/c3e04b5902bb833a4b34c92186a479fb.png)

更新：

我能够弄清楚这一点（感谢 SO 社区的帮助！）并在此处发布了我的答案：[https ://stackoverflow.com/a/11298219/111856](https://stackoverflow.com/a/11298219/111856)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:31:17.100

您可以在绘制时旋转画笔纹理。您可以通过将 y 增量的反正切除以每个笔划段的 x 增量来获得角度：

```
atan2(newY - prevY, newX - prevX); 
```

然后将画笔纹理旋转该数量，然后在沿线的每个点将其混合。

# c# - Richtextbox 到 iTextSharp

> ID：11236175
> 
> 赞同：2
> 
> 时间：2012-06-27T23:28:41.690
> 
> 标签：c#, wpf, pdf-generation, itextsharp, formatter

**语境**

我们需要的是从 WPF 应用程序中捕获一些用户输入（格式化的文本），并输出带有一些存储图像的 PDF 和最后一页上的用户输入。

**我们尝试过的**

我们创建 WPF 应用程序，添加 iTextSharp 库，从数据库中恢复图像并将其添加到 PDF。那行得通。现在，对于用户输入，我们从 Extended WPF Toolkit添加了一个[RichTextBox控件。](http://wpftoolkit.codeplex.com/wikipage?title=RichTextBox&referringTitle=Home)我们添加这个控件主要是因为它的绑定属性和[格式化程序](http://wpftoolkit.codeplex.com/wikipage?title=RichTextBox&referringTitle=Home#formatters)。基本上我们可以将控件的丰富内容绑定到一个属性上。该绑定正在工作。我们已经有了 RTF 格式，例如（例如）：

```
"{\rtf1\ansi\ansicpg1252\uc1\htmautsp\deff2{\fonttbl{\f0\fcharset0 Times New Roman;}{\f2\fcharset0 Segoe UI;}}{\colortbl\red0\green0\blue0;\red255\green255\blue255;}\loch\hich\dbch\pard\plain\ltrpar\itap0{\lang1033\fs18\f2\cf0 \cf0\ql{\f2 {\ltrch This is the }{\b\ltrch RichTextBox}\li0\ri0\sa0\sb0\fi0\ql\par}}}" 
```

**问题**

问题是，PDF 的实际输出正是之前显示的 RTF，但预期输出（例如）必须是：

```
"This is the **RichTextBox**\r\n" 
```

这显然是因为我们从控件中插入绑定的 RTF，因为它涉及到 PDF，问题是：**我们如何添加该内容并指定它的 RTF？**

PS。如果您有其他可行的想法或解决方案（不使用richtextbox 或类似的东西），欢迎您。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T11:11:27.340

不幸的是，iTextSharp 不再直接支持 RTF 格式[。](https://stackoverflow.com/questions/3076718/where-did-itextsharps-rtf-support-go)我建议先将 RTF 片段转换为 XHTML，然后将生成的 XHTML 导入最终文档（似乎官方的 HTML 支持[已经消失](https://stackoverflow.com/questions/2822843/itextsharp-html-to-pdf)，所以在这种情况下 XHTML 是唯一的选择）。

简而言之，我建议：

1.  将 RTF 片段转换为 XHTML；
2.  将 XHTML 流放入一个新的 iTextSharp 文档（或直接放入最终文档，如果您愿意）；
3.  将上述文档的内容添加到您要导出为 PDF 的目标文档中。

### 更新

没有将 RTF 转换为 XHTML 的内置机制，但存在许多开源项目；我将开始将此[RTF 到 HTML](http://blogs.msdn.com/b/matt/archive/2009/09/28/converting-rtf-to-html.aspx)转换器与[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)结合起来（这反过来会将您的 HTML 转换为 XHTML）。

然而，坦率地说，整个流程有点复杂，我可能会选择一个更简单的解决方案，可能是直接在您的项目中使用[HTML 编辑器](http://winformhtmltextbox.codeplex.com/)（[替代](http://www.codeproject.com/Articles/15559/A-Windows-Forms-based-text-editor-with-HTML-output)），或者按照其他人的建议恢复到 FlowDocument。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T11:49:30.113

WPF 已经有一个很好的 FlowDocument 并且它的渲染效果很好。所以我们创建了 Xaml 到 PDF 转换器，它处于测试阶段，但大多数字符串、表格和图像都成功转换为 PDF，它是一个开源项目，可在[http://xamltopdf.codeplex.com/](http://xamltopdf.codeplex.com/)获得，RTF 可以为您提供 FlowDocument 和您可以将其转换为 XAML 并将其传递给 XamlToPDF 转换器。

# amazon-ec2 - 亚马逊 EC2 负载平衡 - 如何部署 Web 应用程序？

> ID：11236177
> 
> 赞同：0
> 
> 时间：2012-06-27T23:28:51.097
> 
> 标签：amazon-ec2, amazon-web-services

我们希望使用 EC2 和 RDS 迁移到亚马逊云。

我正在研究我想做的负载平衡，两台服务器，每台服务器都位于不同的可用区，以防止停机。

我的问题是如何部署 Web 应用程序并对其进行更新？我认为有比单独更新每个 EC2 服务器上的文件更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:04:29.437

在过去的系统中，除了使用 puppet 为我正在使用的 apache/nginx 服务器构建配置文件之外，我还使用[vcs](https://github.com/bruce/puppet-vcsrepo/) puppet 模块来确保在我的系统上安装了适当的源代码。另一种可能性是将您的应用程序以可部署状态（如果您不使用脚本语言）推送到 Amazon S3，并让您的运行时脚本从您的 S3 存储桶中提取最新构建。

# python - 在 sqlalchemy 中清理对象的优雅方式？

> ID：11236178
> 
> 赞同：0
> 
> 时间：2012-06-27T23:28:55.503
> 
> 标签：python, sqlalchemy

目前我正在开发一个抽象 SQLAlchemy 的类。此类将充当帮助工具来验证数据库中的值。此类将用于回归/负载测试。测试用例将进行数十万次数据库查询。我的班级布局如下。

```
class MyDBClass:
    def __init__(self, dbName)
         self.dbName = dbName
         self.dbEngines[dbName] = create_engine()
         self.dbMetaData[dbName] = MetaData()
         self.dbMetaData[dbName].reflect(bind=self.dbEngines[dbName])
         self.dbSession[dbName] = sessionmaker(bind=self.dbEngines[dbName])

    def QueryFunction(self,dbName, tablename, some arguments):
          session = self.dbSession[dbName]()
          query = session.query(requiredTable)
          result = query.filter().all()
          session.close()
    def updateFunction(self, dbName, talbeName, some arguments):
          session = self.dbSession[dbName]()
          session.query(requiredTable).filter().update()
          session.commit()
          session.close()
    def insertFunction(self, dbName, tableName, some arguments):
          connection = self.dbEngines[dbName].connect()
          requiredTable = self.dbMetaData[dbName].tables[tableName]
          connection.execute(requiredTable.insert(values=columnValuePair))
          connection.close()
    def cleanClose(self):
          # Code which will remove the connection/session/object from memory.
          # do some graceful work to clean close. 
```

我想编写 cleanClose() 方法，该方法应该删除可能由此类创建的对象。此方法应从内存中删除所有这些对象并提供干净的关闭。这也可以避免内存泄漏。我无法弄清楚应该从内存中删除哪些所有对象。有人可以建议我在这里需要做什么方法调用吗？

## 编辑1：

有什么方法可以衡量不同方法及其变体的性能吗？
我在[这里浏览了文档，](http://sqlalchemy-stage.readthedocs.org/en/latest/orm/session.html?highlight=session#sqlalchemy.orm.session)并意识到我不应该在每种方法中都创建会话，而应该创建单个会话实例并在整个过程中使用。请提供您对此的反馈。让我知道在这里做事的最佳方式是什么。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:11:17.293

要在 Python 中从内存中删除对象，您只需要停止引用它们即可。通常不需要显式编写或调用任何方法来销毁或清理对象。因此，当一个实例`MyDBClass`超出范围时将自动清理它。

如果您正在谈论关闭 SQLAlchemy 会话，那么您只需要在其上调用 close() 方法。

SQLAlchemy 会话是为多个事务设计的。您通常不需要多次创建和销毁它。在函数中创建一个会话，`__init__`然后在 、 等中使用`QueryFunction`它`updateFunction`。

# android - Android 加速模拟器不断重启

> ID：11236183
> 
> 赞同：8
> 
> 时间：2012-06-27T23:29:09.967
> 
> 标签：android, android-emulator, android-4.0-ice-cream-sandwich

我习惯于在真实设备和 AVD 上测试应用程序。由于 ICS 虚拟设备非常慢，我决定尝试**加速模拟器**。我按照[说明](http://developer.android.com/tools/devices/emulator.html)使用英特尔虚拟化技术（x86 系统映像目标）成功设置了加速虚拟机。

模拟器可以工作，而且速度非常快。但是在第二次应用程序上传/安装时，它突然重启。**它在第一次启动/上传**时总是可以正常工作，但是当我编辑某些内容并再次测试应用程序时，它会“从头开始”重新启动（显示 android 徽标）。

我没有使用快照保存/恢复。LogCat**不报错**，我使用的是 Android SDK 工具 Rev.20 和 platform-tools rev。12，在Win7上。

`Intelhaxm`似乎工作正常，报告“正在运行”状态。重新启动后，我必须再次上传应用程序，这很烦人。

有没有人遇到过同样的问题，也许已经解决了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:48:36.037

最新版本的 SDK 工具，修订版 20.0.1，声称已修复与使用 GPU 加速的模拟器相关的错误。升级到最新版本的 SDK 工具和 ADT 后尝试。

从[修订历史](http://developer.android.com/tools/sdk/tools-notes.html)：

> 修复了运行多个模拟器和运行多个具有 GPU 加速的模拟器的问题。

# c# - 从 JavaScript 将项目添加到 C# 字典

> ID：11236188
> 
> 赞同：0
> 
> 时间：2012-06-27T23:30:19.747
> 
> 标签：c#, javascript, asp.net

如果有的话，将 ASP.NET/JavaScript 代码中的键值对添加到 C# 字典的公认方法是什么？TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:25:47.407

我如何处理这个要求是在 javascript 中获取名称值对中的所有数据，然后通过 ajax 将其发布到服务器......

例如 loc 是您的页面，methodName 是页面后面代码中的 WebMethod，您可以填充为

```
var arguments = '"data":"name1=value1&name2=value2"';

$.ajax({
    type: "POST",
    url: loc + "/" + methodName,
    data: "{" + arguments + "}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: onSuccess,
    fail: onFail
}); 
```

在您的代码后面，创建一个网络方法，例如

```
[System.Web.Services.WebMethod(EnableSession = true)]
public static string ItemsForDictionary(string data)
{
    Dictionary<String, String> newDict = ConvertDataToDictionary(data);
} 
```

我使用通用方法将代码隐藏中的此数据参数转换为字典。

```
private static System.Collections.Generic.Dictionary<String, String> ConvertDataToDictionary(string data)
    {

        char amp = '&';
        string[] nameValuePairs = data.Split(amp);

        System.Collections.Generic.Dictionary<String, String> dict = new System.Collections.Generic.Dictionary<string, string>();

        char eq = '=';

        for (int x = 0; x < nameValuePairs.Length; x++)
        {
            string[] tmp = nameValuePairs[x].Split(eq);
            dict.Add(tmp[0], HttpUtility.UrlDecode(tmp[1]));

        }

        return dict;
    } 
```

无论如何..希望这能给你这个想法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:33:19.933

你不能直接做。您必须使用 post-back 或 ajax 调用将数据发送回服务器，然后将数据添加到服务器端处理程序中的 Dictionary 中。

如果您发布一些代码以显示您实际尝试做的事情，我们可能会更有帮助。

# sqlite - 从 sqlite 表中填充列表的动作脚本

> ID：11236196
> 
> 赞同：0
> 
> 时间：2012-06-27T23:31:03.883
> 
> 标签：sqlite, adobe, flash-builder

使用 Adob​​e Flash Builder 4.6

下面的代码是我用来尝试让 actionscript 从 sqlite 表中填充列表的代码。它带回了正确数量的记录，但结果显示为：[object Object] [object Object] [object Object]

有人可以告诉我我可能做错了什么吗？

```
 private var strGetDBName:String = "CPRInstr.db";
        private var strGetCurrentTableName:String = "lkStates";

        import flash.data.SQLConnection;
        import flash.data.SQLResult;
        import flash.data.SQLStatement;
        import flash.filesystem.File;
        import mx.collections.ArrayCollection;

        private var conn:SQLConnection;

        private function init():void
        {
            conn = new SQLConnection();
            conn.addEventListener(SQLEvent.OPEN, openSuccess);
            //conn.addEventListener(SQLErrorEvent.ERROR, openFailure);
            var dbFile:File = File.applicationDirectory.resolvePath(strGetDBName);
            conn.openAsync(dbFile);
        }

        private function openSuccess(event:SQLEvent):void
        {
            conn.removeEventListener(SQLEvent.OPEN, openSuccess);
            //conn.removeEventListener(SQLErrorEvent.ERROR, openFailure);
            getData();
        }

        private function getData():void
        {
            var select:SQLStatement = new SQLStatement();
            select.sqlConnection = conn;
            //select.text = "SELECT id, txtState, txtAbbrev FROM " + strGetCurrentTableName;
            select.text = "SELECT id, txtState FROM lkStates";
            select.addEventListener(SQLEvent.RESULT, selectResult);
            //select.addEventListener(SQLErrorEvent.ERROR, selectError);
            select.execute();
        }

        private function selectResult(event:SQLEvent):void
        {
            var result:SQLResult = null;
            result = event.currentTarget.getResult(); 

            if(result.data)
            {
                list.dataProvider = new ArrayCollection(result.data);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T17:55:04.507

您需要将 labelField 设置为您的列表中的一个字段名称，以便它可以出现在列表中。在列表类型的声明中：labelField = "txtState"，您将从该字段中获取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:56:32.443

这对我有用，例如，我尝试匹配您的变量。

```
var result:SQLResult = select.getResult();
list.dataProvider = new DataProvider(result.data);

if(result.data)
{
   for(var i:int = 0; i < result.data.length; i++)
    {
      var tState:Object = result.data[i];
      trace("var1 "+tState.var1+"var2 "+tState.var2...etc)
    }
} 
```

# asp.net-mvc-3 - 谷歌地图未在部分视图中显示

> ID：11236197
> 
> 赞同：0
> 
> 时间：2012-06-27T23:31:06.403
> 
> 标签：asp.net-mvc-3, google-maps-api-3, partial-views

我正在开发一个 asp.net mvc3 应用程序。

我正在尝试在局部视图中加载谷歌地图，但它不起作用：

我的局部视图_Map.cshtml

```
<style type="text/css">  
    #map_canvas 
    {
        position:absolute;
        top:40px;
        left:12px;
        width:576px;
        height: 450px;
    }

</style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<div class="sTitle">Name</div>

<div id="map_canvas"></div>

<script type="text/javascript">
var map;
$(document).ready(function () {
    var map;
    var myOptions = {
        zoom: 8,
        center: new google.maps.LatLng(-34.397, 150.644),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);

    google.maps.event.addDomListener(window, 'load', initialize);
});

</script> 
```

地图通过 AJAX 调用加载：

```
 $.ajax({
                type: 'GET',
                url: '@Url.Action("GetMapById", "Map")',
                data: { 'id': sId },
                success: function (html) {
                    $("#content").html(html);
                },
                complete: function () {
                },
                error: function () {
                    alert("There was an error opening the Map. Please try again or contact an administrator");
                }
            }); 
```

部分加载在名为 Content 的 div 中

在控制器中，我只返回部分视图

```
 return PartialView("_Map"); 
```

视图正在加载，但地图不可见。

我使用 Firebug 来跟踪问题，我得到了这个错误：

```
“google is not defined” 
```

关于这个问题的任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:57:55.813

我解决了这个问题

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

在布局页面中而不是在子视图中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:37:50.267

您必须以这种方式加载谷歌地图：

```
<script type="text/javascript">
   var map;
   google.load("maps", "3", { other_params:"sensor=false" });
   $(document).ready(function () { 
```

你重新初始化“var map”两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T14:39:14.823

我不想在布局页面中加载地图......这样做意味着如果脚本需要很长时间才能加载，它会减慢整个页面，此外，如果那里不需要它，那么为什么要制作浏览器下载吗？

为了解决这个问题，我发现您可以像这样在局部视图中加载地图 API：

```
$.getScript('http://maps.googleapis.com/maps/api/js',function (){
  google.maps.event.addDomListener(window, 'load', initialize);
}); 
```

# java - 为什么我们需要一个静态锁来同步 system.out.println()？

> ID：11236200
> 
> 赞同：0
> 
> 时间：2012-06-27T23:31:15.363
> 
> 标签：java, multithreading, synchronization, scjp

我正在学习java认证，我从莫卧儿的书中看到了这个例子：

```
public class Smiley extends Thread
{
    @Override
    public void run()
    { 
        while(true)
        { 
            synchronized(this)
            {
                try
                { 
                    System.out.print(":"); 
                    Thread.sleep(100); 
                    System.out.print("-"); 
                    Thread.sleep(100); 
                    System.out.println(")"); 
                    Thread.sleep(100); 
                }
                catch(InterruptedException e)
                {
                    e.printStackTrace();
                }
            }
        }
    }

    public static void main(String[] args)
    {
        new Smiley().start();
        new Smiley().start();
    }
} 
```

目的是每行打印一个笑脸:-)。我的问题是为什么在实例（this）上同步不能实现这一点？为什么我们需要在静态级别同步？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T23:33:02.330

因为请注意 main() 函数创建了**两个**笑脸类。他们每个人都在自己的线程上运行。由于它们正在锁定`this`，因此它们都将立即获取锁，而不会与其他线程发生争用。在这种情况下，他们的锁定方案`synchronize(this)`一无所获。

在处理多线程问题时，您必须考虑*“我要保护什么？”* 在这种情况下，您需要保护`System.out`, 以确保您按照您想要的顺序访问它。由于`System.out`是静态的，因此您需要某种外部范围锁， *每个*线程必须先获取该锁，然后才能对其进行写入。

您可以使用[ReentrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)来实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T05:57:21.423

请不要使用同步（this） - 这通常是不好的做法
如上所述 - 锁应该在两个线程之间共享，在这种情况下锁是每个类的实例（即 - 由 new Smiley 创建的对象）。
你应该有一个共享锁，可能是通过使用一个静态变量，它在同一个类的所有实例之间共享，
或者将一个锁作为参数传递给笑脸的 CTOR。
根据@Jonathon Reinhart 的建议，我将举第二个选项的示例，以使用可重入锁

```
public class Smiley extends Thread
{
   private  ReentantLock lock;

   public Smiley(ReentrantLock lock) { 
      this.lock = lock;
   }

   @Override
   public void run()
   { 
     while(true)
     { 
        try {
           lock.lock();
           System.out.print(":"); 
           Thread.sleep(100); 
           System.out.print("-"); 
           Thread.sleep(100); 
           System.out.println(")"); 
           Thread.sleep(100); 
        }
        catch(InterruptedException e) {
                e.printStackTrace();
        }
        finally {  
           lock.unlock();
        }
     } 
  }

}

public static void main(String[] args)
{
    ReentrantLock lock = new ReentantLock();
    new Smiley(lock).start();
    new Smiley(lock).start();
} 
```

一些指针 -
一个。请记住，解锁代码必须在 finally 子句中 - 这是一个很好的做法（您也可以使用 try 块和 finally 块，没有 catch 块）。
湾。您可以考虑用 java.util.concurrent 包中的其他锁替换 ReentrantLock - 根据您的需要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T17:53:37.183

这实际上是您要问的两个问题，答案是：

*   为什么在实例（this）上同步不能实现这一点？

因为你正在获取两个不同的隐式锁，所以同步块内的指令被允许由两个线程并发执行，并且实际上可能是交错的。

*   为什么我们需要在静态级别同步？

您不需要在静态级别上进行同步。您需要在线程共享的对象的同一实例上进行同步。

实现您想要的最简单的方法是通过以下方式在 System.out 上同步：

```
@Override
public void run() {
    while (true) {
        synchronized (System.out) {
            try {
                System.out.print(":");
                Thread.sleep(100);
                System.out.print("-");
                Thread.sleep(100);
                System.out.println(")");
                Thread.sleep(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

# php - 通过下载链接提供下载文件的最佳方法是什么？

> ID：11236201
> 
> 赞同：1
> 
> 时间：2012-06-27T23:31:15.463
> 
> 标签：php, curl, download, fopen, file-get-contents

> **可能重复：**
> [在 PHP 中可靠地发送大文件](https://stackoverflow.com/questions/597159/sending-large-files-reliably-in-php)

我将分发一个 PHP 脚本，它使人们能够通过屏蔽 URL 从他们的服务器向他们的客户提供可下载的产品（不想泄露服务器上的位置）。有些文件可能非常大，所以我需要确保使用能够处理更大文件的方法。

我熟悉如何使用以下每种下载方法，我只是问哪种方法最好使用（最有效、最可靠、普遍支持等）：

流式传输

流式 cURL

文件获取内容

卷曲

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T23:37:30.283

通常最好让网络服务器处理发送静态文件。

将 x-sendfile 用于[apache](https://tn123.org/mod_xsendfile/)、[lighttpd](http://blog.lighttpd.net/articles/2006/07/02/x-sendfile)或[nginx](http://wiki.nginx.org/XSendfile)。您可以使用 php 进行身份验证，发送`X-Sendfile`标头，脚本将终止，Web 服务器将处理文件的发送。最终用户永远不会知道文件在服务器上的位置。

# facebook - Facebook 连接，自动提示登录

> ID：11236202
> 
> 赞同：0
> 
> 时间：2012-06-27T23:31:18.093
> 
> 标签：facebook, login, installation, connect, prompt

我已经在我的网站上添加了一个登录按钮，并根据我在此处找到的指南添加了发布操作的范围：developers.facebook.com/docs/reference/plugins/login/，这很好，但我的问题是：我怎么能拥有相同的功能，但此提示无需单击登录按钮即可显示给用户。

如果用户尚未安装应用程序，系统会自动提示他安装它。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:33:53.577

使用`FB.getLoginStatus`JavaScript SDK 查看是否有用户连接到您的应用访问您的页面。如果没有，请将它们重定向到服务器端身份验证对话框（使用客户端身份验证不是一个好主意，因为大多数浏览器会阻止在没有任何实际用户交互的情况下打开的弹出窗口）。

# c# - 是否应该重用 SqlConnection、SqlDataAdapter 和 SqlCommand 对象？

> ID：11236203
> 
> 赞同：8
> 
> 时间：2012-06-27T23:31:38.200
> 
> 标签：c#, sqlconnection, sqlcommand, sqldataadapter

我正在使用以类似于以下代码的布局编写的 DAL 对象。我简化了很多代码代码只是为了显示设置。

```
public class UserDatabase : IDisposable
{
    private SqlDataAdapter UserDbAdapter;
    private SqlCommand UserSelectCommand;
    private SqlCommand UserInsertCommand;
    private SqlCommand UserUpdateCommand;
    private SqlCommand UserDeleteCommand;

    private System.Data.SqlClient.SqlConnection SQLConnection; 

    public UserDatabase()
    {
        this.SQLConnection = new System.Data.SqlClient.SqlConnection(ConnectionString);
        this.UserDbAdapter= new SqlDataAdapter(); 
        this.UserDbAdapter.DeleteCommand = this.UserDeleteCommand;
        this.UserDbAdapter.InsertCommand = this.UserInsertCommand;
        this.UserDbAdapter.SelectCommand = this.UserSelectCommand;
        this.UserDbAdapter.UpdateCommand = this.UserUpdateCommand;
    }

    private bool FillUsers(DataSet UserDataSet, out int numberOfRecords)
    {
        bool success = true;

        numberOfRecords = 0;
        string errorMsg = null;

        this.UserDbAdapter.SelectCommand = this.GetUsersSelectCommand();

        numberOfRecords = UserDbAdapter.Fill(UserDataSet, UsersTableName);

        return success;
    }

    private SqlCommand GetUserSelectCommand()
    {
        if (this.UserSelectCommand==null)
            this.UserSelectCommand= new System.Data.SqlClient.SqlCommand();
        this.UserSelectCommand.CommandText = "dbo.Users_Select";
        this.UserSelectCommand.CommandType = System.Data.CommandType.StoredProcedure;
        this.UserSelectCommand.Connection = this.SQLConnection;
        this.UserSelectCommand.Parameters.Clear();
        this.UserSelectCommand.Parameters.AddRange(new System.Data.SqlClient.SqlParameter[] {
        new System.Data.SqlClient.SqlParameter("@RETURN_VALUE", System.Data.SqlDbType.Variant, 0, System.Data.ParameterDirection.ReturnValue, false, ((byte)(0)), ((byte)(0)), "", System.Data.DataRowVersion.Current, null)});

        return UserSelectCommand;
    } 
```

有多个其他 Fill 类型函数以相同的方式编写，重用 Connection 对象、SqlCommands 和 SqlDataAdapter。SqlDataAdapter 在内部管理 SqlConnection 的打开和关闭。

所以我的问题是多部分的。这个设计不好吗？如果是这样，为什么？

如果不好，是否应该将其更改为将内容保留在更本地的范围内，如下所示：

```
 public bool FillUsers(DataSet UserDataSet)
    {
        using (SqlConnection conn = new SqlConnection(ConnectionString))
        {
            using (SqlCommand command = GetUsersSelectCommand())
            {
                using (SqlDataAdapter adapter = new SqlDataAdapter(command, conn))
                {
                    adapter.Fill(UserDataSet, UsersTableName);
                }
            }
        }
    } 
```

对于所有看起来像创建、处理和重新制作的功能都必须这样做，这比保留物品更糟糕。然而，这似乎是我在网上随处可见的设置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T23:39:14.230

不，这并没有什么问题。您应该在处理完对象`IDisposable`后立即处理它们。

给定 a `SqlConnection`，当您处理连接时，底层连接将简单地返回到池中。它不一定像您想象的那样“关闭”。最好让连接池完成它的工作。 [这](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)是 MSDN 上指向 ADO.NET 连接池的链接。试图让它做它不是为它设计的事情（有些人称之为优化，令人惊讶的是）通常是在兔子洞里旅行。

此外，在尝试优化问题之前，请确保您已实际测量并观察到问题。（我的意思不是很苛刻，只是为了**节省您的时间**）。

# jquery - POST 调用抛出空异常，而 GET 没有

> ID：11236206
> 
> 赞同：0
> 
> 时间：2012-06-27T23:32:09.520
> 
> 标签：jquery, ajax, asp.net-mvc, post

我正在使用 $.ajax() 向服务器发送 post 调用。如果我使用 POST 作为类型，它会给出一个错误，但如果我使用 GET 它会完美运行。

问题是在做 POST 时，`unitTotal`服务器端的参数为 null。但是在执行 GET 时，该参数被正确传递。

这是ajax代码：

```
 $.ajax({
    type: "POST",

    url: '/Sepet/SepeteTabloEkle',

    data: { "tabloId": tabloId, "en": en, "boy": boy, "accessoryIds": accessoryIds, "miscTypes": miscTypes, "unitTotal": total },

    traditional:true,

    success: function (data) {
    },
}); 
```

这是我的动作定义：

```
[HttpPost]
public void SepeteTabloEkle(int tabloId, int en, int boy, List<int> accessoryIds, List<string> miscTypes, decimal unitTotal ) 
```

如果我使用 POST，这是服务器给出的错误。如果我使用 GET，则不会抛出此错误并`unitTotal`很好地传递。

错误：

> 参数字典包含方法 'Void SepeteTabloEkle(Int32, Int32, Int32, System.Collections.Generic.List `1[System.Int32], System.Collections.Generic.List`1[System.String], System.十进制）”在“RenkliTablo.Controllers.SepetController”中。可选参数必须是引用类型、可空类型或声明为可选参数
> 
> ## 范围。参数名称：参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:13:18.200

这是因为客户端和服务器的文化差异。使用 GET 请求时，默认模型绑定器始终使用`InvariantCulture`将查询字符串参数解析为其基础类型，如此[处所述](https://stackoverflow.com/a/9977290/29407)。使用 POST 时，模型绑定器使用当前区域性。因此，如果您在小数点分隔符所在的服务器上使用文化`,`而不是`.`POST 请求失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:50:40.077

去掉`traditional: true`设置。

> [data is] 附加到 GET 请求的 url。...对象必须是键/值对。如果 value 是一个 Array，jQuery 会根据传统设置的 value 序列化多个具有相同 key 的值

# c# - 共同的墙壁和旁边的房间之间有什么样的关系？

> ID：11236215
> 
> 赞同：6
> 
> 时间：2012-06-27T23:33:29.537
> 
> 标签：c#, relationship, composition, aggregation

我想知道公共墙（位于相邻房间）和房间之间的关系。
据我所知，房间与其墙壁之间的关系是`Composition not Aggregation`（我说得对吗？）

`And according to the definition of` **组合** `the contained object can't be shared between two` `containers, whereas in` **聚合** `it is possible`。

现在我很困惑，什么是表示公共墙壁和旁边房间之间关系的最佳建模方法？

*如果您可以提供一些代码的建议，将不胜感激。*

|--------|--------|

**方法1：**

```
(wall class ---- room class) /Composition 
```

**方法2：**

```
wall class ----- room class /Aggregation 
```

**方法3：**

我们有一个墙类和一个公共墙类，公共墙类继承自墙类

```
adjoining room class ---- (1) Common wall class /Aggregation
adjoining room class ---- (6) wall class / composition 
```

**方法 4：** 我是开发人员而不是设计师 :) 所以这是我的想法：

```
class Room 
{
  private wall _firstwall  ;
  private wall _secondtwall;
  private wall _thirdwall  ; 
  private wall _commonwall ;

public Room( CommonWall commonwall)
 {
 _firstwall=new Wall();
 _secondtwall=new Wall();
 _thirdwall=new Wall();
 _commonwall=commonwall;
 }

}

Class CommonWall:Wall
{
 //...
} 
```

// 在某个地方：

```
 static void main()
{
  Wall _commonWall=new Wall();
  Room room1=new Room(_commonWall);
  Room room2=new Room(_commonWall);
  Room [] adjacentRoom =new Room[2]{room1,room2};
} 
```

**编辑1：** *我认为这是一个明确的问题，但只是为了更清楚：*

**问题的重点是找出对同时是两个其他对象的组件的对象的关系建模的最佳模式或方法**。

关于我的例子：我的意思是“房间”吗？当然，我的意思是一个封闭的方形房间，有 4 面墙和一扇门。但在这种情况下，其中一堵墙是公共墙，由两个相邻的房间共用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T00:33:03.640

你关于房间和墙的问题的答案就是这个问题的答案：“没有房间，墙能存在吗？”

我相信您的方案正在使用聚合。没有房间，墙还能存在吗？当然可以。一个人可以通过摧毁三堵墙来摧毁房间，但剩下的那堵墙是独立的。我认为我们现在只剩下语义了。这个答案可能会根据*您**在*场景中查看墙壁的方式而改变。

此[链接](https://softwareengineering.stackexchange.com/questions/61376/aggregation-vs-composition)显示了一种简洁的思考方式：

1.  A “拥有” B =**组合**：B 在没有 A 的系统中没有任何意义或目的
2.  A “使用” B = **Aggregation**：B 独立于（概念上）存在于 A

同样[在这里](https://stackoverflow.com/questions/1644273/what-is-the-difference-between-aggregation-composition-and-dependency)：

**聚合**意味着子节点可以独立于父节点而存在的关系。示例：班级（父母）和学生（孩子）。删除班级，学生仍然存在。

**组合**意味着孩子不能独立于父母而存在的关系。示例：房屋（父）和房间（子）。房间不存在独立于房屋

来自[维基百科](http://en.wikipedia.org/wiki/Object_composition)：

**聚合**与普通**组合**的不同之处在于它并不意味着所有权。在**组合**中，当拥有对象被销毁时，包含的对象也会被销毁。在**聚合**中，这不一定是真的。例如，一所大学拥有多个系（例如化学），每个系都有许多教授。如果大学关闭，这些系将不复存在，但这些系的教授将继续存在。因此，大学可以看作是系的组合，而系则是教授的集合。此外，教授可以在多个系工作，但一个系不能隶属于多个大学。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:20:35.660

Room 和 Wall 之间存在多对多的关系。（一堵墙可以用在两个房间里，一个房间可以有很多墙。

我建议不要使用像“CommonWall”这样的类，而是使用映射对象和两个一对多关系来解决这个多对多问题。

```
public class Room 
{
public List<Wall> Walls{get;set;}

}

public class Wall
{
decimal length;
decimal width;
public List<Room> Rooms{get;set;}
}

public class RoomWallMapping
{
public int MappingID;
public Wall {get;set;}
public Room{get;set;}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T21:12:28.227

*鲍勃霍恩*在这里提出了一个观点，当一堵墙可以独立于房间存在时，它必须是一个聚合体。

但是请记住，您模拟了您希望如何查看/操作它们，因此您还可以决定您主要关心您的房间并将墙壁视为房间的副作用，那么这就是一个组合。

**聚合模型**

您建造墙壁并定义您的房间，您的房间就是墙壁之间的空间。

这样想，房间不需要有 4 面墙，它只是任意一组墙：开放式房间可以有 3 面墙，而 L 形封闭房间可能有 6 面墙。

这是建筑师或建筑商将采用的表示。

**组合模型**

你想把房间看成一个有墙壁的空间，那么你真正关心的是从房间内侧看到的墙壁。在这种情况下，如果另一个房间有共同的墙壁，您就不会开车，当您摧毁您的房间时，墙壁的内侧也会随之消失。

共享墙变成了两个房间墙的聚合。

如果您正在计划展览并想要定义绘画的放置位置，这可能是正确的表示。

**为最适合您的需求建模**

最后，您对表示进行建模，从而进行简化。同样，在对表示建模时没有*正确*或*最佳*答案，您应该根据需要对表示进行建模。

如果您想购买汽车，您倾向于将书定义为由其页面组成，当您处置它时，您会处置每一页。如果您想打印一本书，您倾向于将您的零件作为由页面组成的聚合对开页，如果一个对开页打印错误，您可以从库存中取出另一个以组装成最终的书。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T22:26:03.543

这取决于。墙总是有两个面。;-)

在这种情况下，我会使用使用属性注入或构造函数注入，例如

```
public class Room
{
    public List<Wall> Walls { get; set; }
    public Room ( IEnumerable<Wall> walls )
    {
        Walls = new List<Wall>(walls);
    }
} 
```

然后使用创建模式（例如[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)）来使用共享墙来构建房间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T06:39:05.147

如果这与真正的问题很接近，我想我不会想用普通的墙壁来组成房间。我更有可能收集 RoomComponents 或 IRoomComponents 将使用构造函数注入或属性注入注入。也有可能使用注入框架来组成房间，以便框架负责对象的生命周期。

如果有一秒钟我会想象问题真的很简单，只有房间和墙壁，那么我猜你的方法 #4 看起来像是要走的路。我不确定什么是合适的名称，因为那里既有聚合又有组合。另一种方法是将公共墙设置为属性（如上所述的属性注入），而不是通过构造函数。

最后，如果我像这个线程中的其他人一样进入幻想世界，那么我很快就会意识到你所有的墙都应该是普通的墙！假设有人在现有房间的一堵墙周围建造了另外三堵墙-> bam 你有一个新的房间和一个新的公共墙。现在要做什么？您可能想将现有墙更改为新的 CommonWall 对吧？因此，在这种情况下，将墙壁作为属性似乎是不可避免的，否则每次您决定建造一个相邻的房间时，您都必须重新创建所有相邻的房间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-03T00:00:14.117

你如何处理房间和墙壁取决于手头的任务。

我将用两个例子来说明这一点，然后我会回过头来回答你问题的实际“要点”。

第一种方法（导航 1 层建筑）：

目标：我想告诉机器人从其当前位置移动到复制室。

我确定建筑物的尺寸，例如 100 英尺乘以 100 英尺。选择一个轴，并制作一个点网格。机器人可以从位置 (50,50) 开始。接下来，我创建一个[图形](http://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29)，其中每条边代表从该节点到相应节点的向北、向东、向南或向西的一步。被墙隔开的节点有无限的重量，即不能通过。

该图在邻接列表中表示。

现在我将 Room 定义为一个多边形并列出它的顶点。要测试机器人是否在房间内，它必须在房间多边形定义的区域内。在这种情况下，房间可能会重叠，尤其是因为在现实生活中站在门口可能意味着您在任一房间。

我的机器人现在可以在建筑物中导航、移动家具以及它想做的任何其他事情。

第二种方法：（面向对象）

*   建造
    *   特性
        *   宽度、长度、高度、地理空间坐标、年龄等。
    *   外墙
        *   可能是从 OuterWall 继承的 BrickWall、GlassWall、ConcreteWall 等
        *   属性：位置、厚度等
        *   方法：DemolishWall()、PaintExterior(Color C)等。
    *   内墙
        *   可能是 NorthSouthWall 或 EastWestWall。
        *   属性：hasDoorway、N/E色、S/W色等。
    *   房间
        *   属性：名称、位置、宽度、长度等。

请注意，在这些示例中，房间都没有直接引用它们的墙壁。

现在到你问题的实际点。如果两个对象具有共享资源，应该如何处理。

并行编程以各种不同的方式处理共享资源。

1.  为每个对象提供对共享资源的引用，确保同步或以其他方式处理共享资源上的并发行为。
2.  使共享资源可作为全局变量或通过单例对象或另一个类中的静态资源，甚至是内存或文件系统中的特定位置对每个对象可用。
3.  以预定义的顺序或在预定义的时间在并发部分之间传递共享资源。

想象一下每两个房间之间有一个共用浴室的酒店：

```
HotelGuest A = new HotelGuest( new BusinessMan() );
HotelGuest B = new HotelGuest( new Programmer() );

A.Room = 101;
A.Bathroom = 7;
A.BathroomKey = getBathroomKey(7);

B.Room = 102;
B.Bathroom = 7;
B.BathroomKey = getBathroomKey(7);

//Asynchronously
A.RunDoBusinessStuff();
B.RunProgrammerStuff();

//but each has to lock bathroom7 when they use it, or it could be embarrassing. 
```

但是在上面的例子中，浴室怎么知道哪两个HotelGuests有它的钥匙呢？

1.  用当前客人和他们拥有的钥匙创建一个数据库，浴室可以查询数据库（或列表）。
2.  在浴室属性中存储对 A 和 B 的引用。（想象一下浴室里的白板列出了它的“租户”）。

# c++ - 将从 SHA1 返回的 unsigned char* 覆盖为字符串

> ID：11236216
> 
> 赞同：1
> 
> 时间：2012-06-27T23:33:31.360
> 
> 标签：c++, hex, sha1, unsigned-char

我使用[此链接](https://stackoverflow.com/questions/918676/generate-sha-hash-in-openssl)为使用 C++ 的任何数据创建 SHA1 哈希。但是 SHA1 调用的输出缓冲区是无符号字符 *。我想存储十六进制值，即消息摘要值，以便我可以将它们用于其他操作。

由于它们是 unsigned char* ，因此将它们转换为字符串然后执行十六进制转换是没有意义的。所以我必须进行十六进制转换，然后将值存储为字符串或 char*。我怎样才能做到这一点？

```
SHA1(ibuf, strlen(ibuf), obuf);
for (i = 0; i < 20; i++) {
        printf("%02x ", obuf[i]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T23:39:11.427

要格式化为 a `char[]`，请使用`snprintf`：

```
char out[61]; //null terminator
for (i = 0; i < 20; i++) {
    snprintf(out+i*3, 4, "%02x ", obuf[i])
} 
```

编辑：我看到你已经标记了你的问题 C++。这是一个纯粹的 C 解决方案，主要是因为我不懂 C++。

我们使用的最大大小为 4，因为我们需要在该计数中包含空终止符（通过函数定义）。我们只向前移动三个，专门覆盖空终止符。

根据我们的格式字符串，末尾的额外空间必然会发生`"%02x "`，但如果我们对最后一个元素进行特殊处理，我们可以使用不同的格式字符串`"%02x"`来避免这种情况。

# java - 无法在 Swing 中将组件添加到 JPanel

> ID：11236220
> 
> 赞同：1
> 
> 时间：2012-06-27T23:34:16.063
> 
> 标签：java, swing, jpanel, jlabel

我想在运行时在紫色窗格下添加一个 JLabel，其中已经包含一些组件，比如在进度条下： ![在此处输入图像描述](../Images/98708066963a43aab18d89bb06a8e7d0.png)

这是元素的结构：

![在此处输入图像描述](../Images/314bff907bd8a721d106e979456aab56.png)

这是我的代码，当事件发生时发出（它到达那里我用调试检查）：

```
 jPanel1.add(new JLabel("Stack Overflow"));
    jPanel1.revalidate();
    jPanel3.revalidate(); 
```

我没有看到任何变化，也不知道从这里去哪里。当我在紫色窗格中放置一个 textarea 然后在同一个地方调用它的 setText() 方法时，我尝试添加它工作的 JLabel 组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:01:13.523

您需要了解有关布局及其工作原理的更多信息。我强烈建议您阅读*整个*布局管理器教程，因为理解布局*是*这里的解决方案，而仅使用 BorderLayout 并不是解决问题的方法。您可能想要嵌套布局，可能对整个 GUI 使用 BorderLayout，并让中央 JPanel 使用 BoxLayout 允许您在其中堆叠组件。然后也许将此 JPanel 添加到在 BorderLayout.CENTER 位置使用 BorderLayout 的主 JPanel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:40:05.713

只是预感，但除了 revalidate() 之外，您可能还需要调用 repaint()

[Java Swing revalidate() 与 repaint()](https://stackoverflow.com/questions/1097366/java-swing-revalidate-vs-repaint)

# php - 找到在 MySQL 中使用索引的需要

> ID：11236229
> 
> 赞同：0
> 
> 时间：2012-06-27T23:35:20.223
> 
> 标签：php, mysql, indexing

我在 MySQL 数据库中有三到四个表，这些表与即将推出的 Android 应用程序相关联，可能会非常快地爆发到数千行。目前，我有大约 6 - 8 个 SELECT 和 2 个 INSERT SQL 命令需要执行。

经过研究，我发现我将不得不使用索引来减少加载时间。我已经在不同的网站上搜索了几个教程，看看我是否可以选择这个——但我没有发现任何东西可以非常清楚地解释什么以及如何做到这一点。

情况如下：

首先，它将使用 Godaddy MySQL 服务器。无限带宽和 150,000 MB。这是一张将得到大量使用的表：

```
items_id (int 11)
项目（100 varchar）
cat_id (int 11)

```

在 PHPMyAdmin 它说索引：

```
键名/PRIMARY 类型/PRIMARY 基数/576 items_id

```

所以似乎建立了一个索引，对吗？

这是与该表 (SELECT) 相关的一个 SQL 查询（通过 PHP）：

```
 "SELECT * FROM items WHERE cat_id = ' ".$_REQUEST['category_id']."' ORDER BY TRIM(LEADING 'The ' FROM item) ASC;" 
```

另一个（插入）：

```
 "INSERT INTO items (item, cat_id) VALUES ('{$newItem}', '{$cat_id}')" 
```

我的主要问题是：通过这些方法，我是否正在利用可能的最佳速度并利用已建立的索引？还是上面写着“慢”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:38:28.583

不能更改简单的**选择**/**插入以利用索引。**

但是可以将索引添加到表中以使查询运行得更快。

好吧，实际上插入不会对索引做任何事情，除非您使用 InnoDB 作为存储引擎和外键约束。

如果您在 select 语句的 where / group by / order by 子句中使用列，则可以考虑在其上添加索引。一个好主意是`EXPLAIN`在查询中使用 Cause 并查看数据库引擎如何使用 where 子句中的列。

如果一列具有一小组非唯一的可能值（性别：男性/女性），则为其添加索引毫无意义，因为您不会搜索所有女性或所有男性（以及半张桌子搜索与全表搜索没有太大区别）。但是，如果您将该列与另一列一起使用来过滤/分组/排序，您可能希望在它们上添加一个复合索引（多列索引）。

MySQL 中的数据库被组织为文件夹。这些文件夹包含每个表的多个文件。

有一个表定义文件、一个表数据文件和一些索引文件。如果您为一列或多列定义索引，则会为该索引创建一个文件。

如果您没有任何索引，甚至没有主键，那么任何**Select**语句都会进行全表搜索，这对于数十万个条目来说会变得非常缓慢。

如果您定义一个索引，它将读取表中该列或一组列的所有唯一值，并写入一个文件，列出该列或这些列的某个值与包含它的记录之间的对应关系。

该文件应该比数据文件小得多，并且通常应该与其他索引文件一起完全放入内存中。MySQL 现在必须与该文件中的匹配记录列表相交以找出哪些记录与选择条件匹配，然后从数据表中挑选所需的数据。

主索引和唯一索引在一个值和一个记录之间具有直接对应关系。所以按唯一值搜索很快。

# coldfusion - cfdump 替代将输出作为字符串传递

> ID：11236234
> 
> 赞同：4
> 
> 时间：2012-06-27T23:36:00.570
> 
> 标签：coldfusion

我想暂时将 cfdump 的输出存储为字符串。我知道有一种方法可以将它存储在一个文件中，但是有没有一种方法可以让我获得相当于`cfdump format='text'`?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T00:00:39.607

使用 cfsavecontent 对您有用吗？

```
<cfsavecontent variable="theDump">
    <cfdump var="#cgi#" expand="yes" format="text">
</cfsavecontent>

<cfoutput>
    #theDump#
</cfoutput> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:15:03.500

shaunw 的想法是对的。为了获得额外的模块化，将其放入您自己的自定义标签或组件函数中，以便您可以在整个应用程序中重复使用它

# perl - Perl SSH 脚本无法加载数学库？

> ID：11236238
> 
> 赞同：0
> 
> 时间：2012-06-27T23:36:36.557
> 
> 标签：perl, module, ssh

我正在尝试运行一个 Perl 脚本，该脚本接受用户、传递、ip 参数并使用它通过 ssh 检查网络交换机的版本。但是，当我在我们的服务器上运行它时，我不断得到：

`Math::BigInt: couldn't load specified math lib(s), fallback to Math::BigInt::FastCalc at /usr/lib/perl5/site_perl/5.10.0/Crypt/DH.pm line 6`

它继续挂起一段时间，然后返回没有输出。是什么导致此失败，我该如何解决？我无权在服务器上安装额外的模块。

* * *

编辑：我检查了当前安装的模块，并且 Net::SSH:Perl、Math::BigInt::FastCalc 和 Math::Pari 都已安装，所以我不知道为什么加载这些模块时出现问题。

* * *

这是我的脚本供参考：

```
#!/usr/bin/perl

# Outputs the name of the Flash File (which denotes the software version) of the switch
#Input: User Pass Host

open(FH, ">>unparsed.txt");
open (FH2, ">>versions.txt");

use strict;
use Net::SSH::Perl;

my $user = $ARGV[0];
my $pass = $ARGV[1];
my $host = $ARGV[2];  #Hostname given as command line argument
my $cmd = "show version";
my $version;

print("\n");
print($ARGV[2]);
print("\n");

my $ssh = Net::SSH::Perl->new($host);
$ssh->login($user, $pass); # login to switch
my($stdout, $stderr, $exit) = $ssh->cmd($cmd);

printf FH ($stdout); #output all test to file

close(FH);

open(FH, "unparsed.txt");

while(<FH>){  #look through file for flash filename
    if($_ =~ /System image file is "(.*)"/){
            $version = $1;
    }
}

print ($version); #output flash filename
print ("\n");

printf FH2 ($ARGV[2]);
printf FH2 ("\n");
printf FH2 ($version);
printf FH2 ("\n");

close(FH2);

close(FH); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:00:50.223

[Crypt::DH](http://search.cpan.org/perldoc/Crypt%3a%3aDH)加载[Math::BigInt](http://search.cpan.org/perldoc/Math%3a%3aBigInt)：

```
use Math::BigInt lib => "GMP,Pari"; 
```

因此，您的系统需要[GMP](http://search.cpan.org/perldoc/Alien%3a%3aGMP)或[Pari](http://pari.math.u-bordeaux.fr/)。

您的发行版的包管理器可能已经提供了安装它们的方法。

您是否尝试过使用[Net::SSH](http://search.cpan.org/perldoc/Net%3a%3aSSH)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T05:51:50.253

尝试使用[Net::OpenSSH](https://metacpan.org/module/Net%3a%3aOpenSSH)而不是 Net::SSH::Perl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:04:29.463

我更喜欢 Net::SSH 和 Net::SFTP::Foreign，当我尝试将它们安装在旧系统上时，数学库通常会给我带来麻烦（特别是一些系统管理员对 Unix 系统上的路径造成的混乱）。大多数系统要么使用 OpenSSH，要么使用它的一些分支（如 Solaris 上的 SunSSH），因此您在使用这些发行版时遇到任何麻烦的可能性较小。

# c# - WPF：在 ListView 中绘制形状

> ID：11236239
> 
> 赞同：0
> 
> 时间：2012-06-27T23:36:37.607
> 
> 标签：c#, .net, wpf

我有一个带有诸如画笔、线条粗细等属性的线条列表，并且我有一个自定义图例，它是 ListView 中的一个 GridView。我想要完成的是在 ListView 中绘制实际的线条（使用 Brush 和粗细属性）来表示每条线。目前我有两列，一列颜色，一列厚度。但是，颜色列是十六进制的，所以它不是很有用。

或者，如果它更简单，在颜色列下绘制一个颜色的正方形而不是线条就足够了。

任何链接或教程表示赞赏。我不熟悉绘制形状/画布/等。一般来说，所以我有点失落。

非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:18:56.237

我会使用 a`Rectangle`来绘制线条并将 绑定`Height`到厚度值和`Fill`颜色值。使用`CellTemplate`并将其设置为`GridViewColumn`.

```
<DataTemplate x:Key="ThicknessTemplate">
  <Rectangle Height="{Binding LineThickness}" Width="10" Fill="{Binding LineColor}"/>
<DataTemplate/>
<DataTemplate x:Key="ColorTemplate">
  <Rectangle Height="10" Width="10" Fill="{Binding LineColor}"/>
<DataTemplate/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:19:46.667

这是几个链接

*   [在控件上绘制形状](https://stackoverflow.com/questions/4109625/how-to-draw-shape-or-lines-within-a-wpf-button-that-size-to-the-control-without)
*   [在列表视图上绘制形状](http://blogs.microsoft.co.il/blogs/tomershamam/archive/2007/12/16/wpf-listview-vertical-lines-horizontal-as-bonus.aspx)
*   [在 WPF 中使用列表视图](http://www.c-sharpcorner.com/uploadfile/mahesh/listview-in-wpf/)

# php - 变量可以使用 jQuery 转到隐藏的 PHP 页面吗？

> ID：11236246
> 
> 赞同：0
> 
> 时间：2012-06-27T23:36:59.347
> 
> 标签：php, jquery, variables

我的 PHP 页面

```
<ul id="upvote-the-image">
<li><a href="javascript:return false;" rel="50" id="upvote">Upvote</a><img src="image.png" /></li>
</ul>​ 
```

当前正在成功将变量发送到 javascript

```
$("#upvote").each(function(index) {
var upthis = $(this).attr("rel");
var plusone = upthis;
$.post("upvote.php", {
    'plusone': plusone
});
alert(plusone);
});​ 
```

（代码中的警报用于测试）我有多个使用 rel 标签的图像。我希望每个人都能够被投票并表明他们在页面上被投票而不加载新页面。

我的问题和问题：我的下一步是什么？我只想知道如何向 upvote.php 发送值。我知道如何使用 mysql 添加赞成票，只是不知道如何向 upvote.php 发送值，或者即使我的 javascript 代码正确打开了页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:36:55.397

一个很好的 JQuery 编程技巧，不要这样做：

```
<a href="javascript:return false;" 
```

相反，请执行以下操作：

```
$(function(){
    $('#upvote').on('click', function(event){
        event.preventDefault();
        $.post('upvote.php', {'plusone': $(this).attr('rel')}, function(data){
          alert('done and upvoted');
        });
    });
}); 
```

这是处理 DOM 文档上的链接的更好方法。

以下是一些文档页面，供您阅读有关我使用的编码的信息：

*   [http://api.jquery.com/on/](http://api.jquery.com/on/)
*   [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

这些将向您解释我的代码。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:53:12.777

我认为你需要这样的东西：

```
<ul id="upvote-the-image">
    <li><span rel="50" id="upvote">Upvote</span><img src="image.png" /></li>
</ul>​
<span id="result"></span>

$("#upvote").click(function(index) {
  var upthis = $(this).attr("rel");
  var oOptions = {
url:    upvote.php, //the receiving data page
    data: upthis, //the data to the server
    complete: function() { $('#result').text('Thanks!') }  //the result on the page
  };
  $.ajax(oOptions);
} 
```

您不需要锚点，我将其更改为跨度，您可以在浏览器中使用 F12 测试 asyc 连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:01:29.833

您的 javascript 永远不会打开 php 页面，它只是向它发送数据，并接收带有响应的 http 标头。您的 php 脚本应该监视`$_POST['plusone']`并相应地处理数据库处理。你的下一步是在你的`$.post`函数中编写一个回调，我建议在学习时将其更改为完整的 ajax 函数，因为它更容易理解和查看正在发生的所有部分。

```
$.ajax({
type: 'POST',
url: "upvote.php",
data: {'plusone': plusone},
success: function(IDofSelectedImg){
    //function to increment the rel value in the image that was clicked
      $(IDofSelectedImg).attr("rel")= upthis +1;
      },

}); 
```

您需要每个 img 元素的唯一标识符才能选择它，并将其 id 发送到 php 脚本。添加一个类而不是 id`upvote`并使 id 成为一个唯一可识别的数字，当您需要增加 rel 值时，您可以使用 jquery 作为目标。（从外观上看，您似乎正在将 rel 属性中的值放入数据库中以代替旧值。）

# jquery - jqueryui标签崩溃IE

> ID：11236247
> 
> 赞同：0
> 
> 时间：2012-06-27T23:37:02.453
> 
> 标签：jquery, jquery-ui, internet-explorer, tabs

我有一个运行 jQuery 和一些 Flash 的站点，一切都很好，直到我添加了一些代码来启用 JQueryUI 选项卡。现在它在 Chrome 和 Firefox 中运行良好，但在 IE 中它崩溃并强制兼容模式，这会破坏页面。

[http://bdindependent.com/oneworld1/solar.html](http://bdindependent.com/oneworld1/solar.html)

如果有人有任何见解，请告诉我。其他一切似乎都工作正常......但是当设置带有选项卡的 div 时，它会使 IE 崩溃。:( 没有看到太多关于这个特定问题的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:57:47.550

我在 Chrome 浏览器上遇到错误， `Uncaught ReferenceError: jQuery is not defined` 我认为 Javascript 将 jQuery 误认为是一个变量。如果您尝试使用 jQuery，我想您可能想要使用 $ 符号。希望我有所帮助。编辑：忘了说行。jquery.colorbox.js:926

# jquery - jQuery。从 live() 更改为 on()

> ID：11236251
> 
> 赞同：1
> 
> 时间：2012-06-27T23:37:37.090
> 
> 标签：jquery

我通过 AJAX 将一些元素拉到我的页面上。这些元素是这样出现的：

```
<div id="offerWrapper7" class="offerWrapper">
    <div class="resultsSummaryBox bevelBox" style="">
        <div class="imgBox">
            <div class="titleBox">Title Title<br>
                    <span class="infoButton" id="info592">i</span>
            <div class="resultsBoxFullText" id="info592">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industrys standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</div>
            </div>
        </div>
    </div>
</div> 
```

我需要绑定一个点击事件，`.infoButton`然后打开一个 jQuery UI 对话，内容为`.resultsBoxFullText`.

我已经设法使用 live() 实现了这一点（如下所示）。

```
$(".infoButton").live('click', function(){
    $( "#info594" ).dialog({
        height:400,
        width:600,
        show: 'fade',
        hide: 'fade'
    });
}); 
```

随着直播被贬值，有人可以告诉我如何使用 on() 来做到这一点。我认为这就像用 on 替换 live 一样简单，但似乎情况并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T23:40:00.610

```
$("an-element-already-on-the-page").on('click', '.infoButton', function(){ 
```

之前的选择器`.on`必须已经在页面上，并且目标元素 ( `.infoButton`) 必须在其中。所以你可以使用文档或正文。

# php - 如何知道点击了哪个按钮？

> ID：11236252
> 
> 赞同：1
> 
> 时间：2012-06-27T23:37:46.693
> 
> 标签：php, javascript, html, forms, submit

我有 html 表单

我正在使用`<a href="#" onclick="document.aa.submit()">`而不是提交按钮

我的代码将更好地解释我的问题..

```
<html>
<form name="aa" action="aa.php" method="post">
<input type="checkbox" name="posts[]" value="1">
<input type="checkbox" name="posts[]" value="2">
<a href="#" onclick="document.aa.submit()">Delete</a>
<a href="#" onclick="document.aa.submit()">Move</a>
</form>
</html> 
```

aa.php

```
<?php
print_r($_POST);
?> 
```

结果

```
Array ( [posts] => Array ( [0] => 1 [1] => 2 ) ) 
```

现在的问题是：

如何知道用户点击了删除或移动？

# 笔记：

我知道如果我使用`<input submit>`它会解决问题

但由于某种原因我不能使用提交按钮

# 笔记2

问题是如何通过php检测它。

例子：

```
 Array ( [posts] => Array ( [0] => 1 [1] => 2 ['submit'=>'delete']) ) 

if('delete'){
mysql_query("delete from...")
}
else{
mysql_query("update/move ....");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:03:08.597

只有PHP？...没有javascript？如果您使用的是 javascript，我会建议使用调用一些 javascript 的按钮而不是链接来提交表单的想法，它可能会给您带来更好的结果，因为您还可以在它之前进行一些调用来设置表单的一些隐藏字段已提交。另外，为什么提交被破坏？

请查看以下页面，了解如何使用隐藏字段。

[http://www.tizag.com/htmlT/htmlhidden.php](http://www.tizag.com/htmlT/htmlhidden.php)

在发布后，您应该能够像用户提交它一样获取隐藏字段，然后在 php 而不是 html 中进行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:22:29.750

干得好：

```
<html>
<form name="aa" action="aa.php" method="post">
<input type="hidden" name="action" value="">
<input type="checkbox" name="posts[]" value="1">
<input type="checkbox" name="posts[]" value="2">
<a href="#" onclick="document.aa.action='delete';document.aa.submit()">Delete</a>
<a href="#" onclick="document.aa.action='move';document.aa.submit()">Move</a>
</form>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:09:40.097

使用 jQuery，您甚至可以摆脱`onclick`标签中的事件，只需添加以下 jQuery。

```
$(document).ready(function() {
    $("a").click(function(event) {
        alert($(this).html()) // Replace this line with the one below for your code
        // document.aa.submit($(this).html())   
    });
});​ 
```

将`$(this).html()`返回 click`a`标记的 innerhtml。例如“删除”或“移动”。然后您可以在您的 php 中使用它来识别点击的链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T00:26:03.663

您需要对表单进行一些调整，以便 Post 值知道您提交的是哪个选项

```
 <form name="aa" action="aa.php" id='aa' method="post">
<input type="checkbox" name="posts[]" value="1">
<input type="checkbox" name="posts[]" value="2">
    <a href="#" onclick="submit_function(this)" rel="delete">Delete</a>
        <a href="#" onclick="submit_function(this)" rel="move">Move</a>
        <input id="submit_type" type="hidden" name="task">
        </form> 
```

在带有 jquery 的 js 中

```
function submit_function( item ){
    if( item.rel == 'move')
    {
    document.getElementById('submit_type').value ='move'
    }
    else if( item.rel == 'delete')
    {
    document.getElementById('submit_type').value ='delete'
    }

    document.getElementById('aa').submit()

    } 
```

在php中

```
 if( $_POST['task'] == 'move' )
{
//do move stuff
}

    if( $_POST['task'] == 'delete' )
{
//do delete stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T00:27:16.410

解决方案：

```
<script>
function createInput(action){
var input = document.createElement("input");
input.setAttribute("type", "hidden");
input.setAttribute("name", "action");
input.setAttribute("value", action);
document.getElementById("forsm").appendChild(input);
document.aa.submit();
}
</script>

<html>
<form name="aa" id="forsm" action="aa.php" method="post">
<input type="checkbox" name="posts[]" value="1">
<input type="checkbox" name="posts[]" value="2">
<a href="#" id="delete" onclick="createInput('delete');">Delete</a>
<a href="#" id="move" onclick="createInput('move');">Move</a>
</form>
</html> 
```

结果

数组（[帖子] => 数组（[0] => 2）[动作] => 移动）

# 非常感谢生锈的韦伯，这给了我这个想法

# jquery - 如果 then 函数，这个 jquery 有什么问题

> ID：11236255
> 
> 赞同：0
> 
> 时间：2012-06-27T23:37:51.333
> 
> 标签：jquery

这是我的功能。

```
<script>
  if( $('#bla').text() > 1 ) {
    alert( "yup!" );
  }else{
    alert( "nope!" );
  }
</script> 
```

我测试了很多次，它没有打开警报。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:43:57.427

`($('#bla').text()>1)`将字符串与数字进行比较，它总是会返回 false。

我假设您希望 #bla 是一个数字，因此您应该告诉 javascript 将其解析为：`parseInt($("#bla").text(),10)`或`parseFloat($("#bla").text())`

ETA：在查看@elclanrs 的小提琴后，javascript 似乎可以很好地处理转换。这里一定有其他事情发生。语法看起来不错；唯一剩下的`$("#bla")`是返回一个空数组......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T23:41:08.370

您需要在函数中指定它。

```
<script>
$(document).ready(function () {
if($('#bla').text()>1){
   alert("yup!");
}else{
   alert("nope!");
}
});
</script> 
```

还要发布您的 HTML 代码，因为我们需要知道您到底要解析什么并找出它是否大于 1。大多数情况下，jquery 代码在解析 html 之前执行，因此这也可能是一个问题，为什么它不给您警报.

# php - Magento：获取礼品卡代码和金额

> ID：11236263
> 
> 赞同：2
> 
> 时间：2012-06-27T23:39:25.290
> 
> 标签：php, magento

我在检索订单中使用的礼品卡代码和金额时遇到了困难。例如，在 中`Mage/Sales/Model/Order/Pdf/Abstract.php`，有一段代码适用于销售/订单模型。IE

```
($order instanceof Mage_Sales_Model_Order) is true in the PDF example 
```

或者

```
$order = Mage::getModel('sales/order')->load($orderID); in another example 
```

在打印的发票 PDF 中，总计部分显示使用的礼品卡以及使用的优惠券代码。优惠券代码可通过 获取`$order->getCouponCode()`。

如何获取礼品卡代码和金额`$order`？我试过了

```
$order->getGiftcertCode();
$order->getGiftcertAmount(); 
```

但这些不会返回任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:07:25.693

可能有几种方法可以做到这一点，但我以前没有这样做过，所以只需查看 Magento 数据库中的 sales_flat_order 表，我可以看到有许多字段可以用来引用不同的礼物卡金额：

```
base_gift_cards_amount
gift_cards_amount
base_gift_cards_invoiced
gift_cards_invoiced
base_gift_cards_refunded
gift_cards_refunded 
```

这些可以通过以下调用访问：

```
$order->getBaseGiftCardsAmount();
$order->getGiftCardsAmount();
$order->getBaseGiftCardsInvoiced();
$order->getGiftCardsInvoiced();
$order->getBaseGiftCardsRefunded();
$order->getGiftCardsRefunded(); 
```

您要使用的可能是`$order->getGiftCardsAmount()`

为了获取礼品卡详细信息，它们以序列化数组的形式存储在上表的“gift_cards”列中。所以要得到那个数组，调用

```
$cards = unserialize($order->getGiftCards()); 
```

print_r $cards 你会看到这样的东西：

```
Array
(
    [0] => Array
         (
             [i] => 1
             [c] => {{Gift Card Code}}
             [a] => {{Gift Card Amount}}
             [ba] => {{Gift Card Base Amount}}
         )

) 
```

所以

```
foreach ($cards as $card) {
    echo "Code: " . $card['c'] . "\n";
    echo "Amount: " . $card['a'] . "\n";
} 
```

应该可以正常工作。

# java - 更改虚拟键盘 Android 上“完成”按钮的操作

> ID：11236264
> 
> 赞同：0
> 
> 时间：2012-06-27T23:39:27.883
> 
> 标签：java, android

所有-我查看了与此主题相关的其他问题，发现根据 android 开发网站：“操作键执行“完成”操作，通常意味着 IME 将关闭。我的问题是**如何编辑完成按钮的操作以使其调用我的方法之一而不是关闭 IME？** 谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T08:43:48.440

**最好的方法**

处理 Enter 键事件的示例

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    txt = (EditText)findViewById(R.id.txt);
    txt.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) 
         {
           if (keyCode == KeyEvent.KEYCODE_ENTER && event.getAction() == KeyEvent.ACTION_DOWN) 
           {
               Log.d(TAG, "enter_key_called");
           }
            return false;
        }
    });
} 
```

# java - 在终端中编译/运行 Java 文件

> ID：11236267
> 
> 赞同：1
> 
> 时间：2012-06-27T23:39:50.537
> 
> 标签：java, macos, command-line, terminal

我正在尝试运行一个调用多个文件的文件，但我遇到了一些错误。

**在名为day4Measurement**的当前目录中，我有 13 个文件：BuggyMeasurement.java、BuggyMeasurement01.java、BuggyMeasurement02.java、BuggyMeasurement03.java、BuggyMeasurement04.java...BuggyMeasurement10.java、MeasurementTest.java 和 Measurement.java。

**Measurement.java**包含*main()*并调用所有其他文件。

这是*main()*：

```
public static void main(String [] args){
    JUnitCore tester = new JUnitCore();
    String s = "Failed to detect: ";
    int count = 0;
    String [] tests = {"toString prints reverse inches then feet", // 01
        "plus modifies this", // 02
        "minus modifies this", // 03
        "multiple modifies this", // 04
        "plus incorrect roll over", // 05
        "minus incorrect roll over", // 06
        "multiple incorrect roll over", // 07
        "plus incorrect non-roll over", // 08
        "minus incorrect non-roll over", // 09
        "multiple incorrect non-roll over", // 10
        "CORRRRECTTT!!!"
    };
    for (int i = 1; i < tests.length + 1; i++){
        testRound = i;
        System.out.println("Running: " + tests[i-1]);
        TestRunner.run(day4Measurement.MeasurementTest.class);
        Result temp = tester.run(day4Measurement.MeasurementTest.class);
        if (temp.wasSuccessful()) {
            s += tests[i-1] + "; ";
            count++;
        }

    }

    System.out.print(10-(count-1)*0.5 + " ");
    System.out.println(s);
} 
```

在 Mac 终端中，我运行

```
javac Measurement.java 
```

我遇到了问题。这是我得到的：

![在此处输入图像描述](../Images/35ca13f578a8b844251c04677c5c5c40.png) ![在此处输入图像描述](../Images/23452913630220675573e95efa3024cc.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:50:47.487

一旦您将所有文件都放在一个目录中（它们可能在子目录中 - 只要它们都在某个共享目录中），我们称之为 dir，使用以下命令：

```
javac -classpath dir Measurement.java 
```

假设您正在从 Measurement.java 所在的同一目录运行命令。如果不是，并且无论哪种方式，您都更安全，请使其成为 dir 和 Measurement.java 的显式路径，例如：

```
javac -classpath /home/yourusername/dir /home/yourusername/dir/Measurement.java 
```

这对 java 编译器说“我想编译 Measurement.java，这就是它所在的位置，在这里您可以找到它需要的所有类和/或源文件。” 然后它将仅编译 Measurement.java 引用的文件，因此您无需担心意外编译所有 java 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:43:51.203

要检查的一件事是确保这些文件的目录结构反映了包结构。例如，如果 ABC 类的包是 com.foo，那么您的 ABC.java 文件应该位于 com/foo 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T23:45:30.550

用 javac *.java 编译所有文件

# vim - Vim + zencoding：选项卡和 展开标签

> ID：11236281
> 
> 赞同：2
> 
> 时间：2012-06-27T23:41:27.573
> 
> 标签：vim, emmet

我有 gVim 7.2，最近添加了 Zencoding 来帮助我进行网络编程。

我将键映射从`<c-y>,`更改`<c-y>`为扩展标签。然后，在 Vim 的插入模式下编辑我的文件时，我注意到我的 tab 键不再起作用。相反，该选项卡现在执行与 完全相同的功能`<c-y>`。我想`<c-y>`继续执行扩展功能，标签应该只插入一个标签。我该怎么做呢？

# msbuild - MSBuild TargetOutputs 缺少程序集

> ID：11236289
> 
> 赞同：1
> 
> 时间：2012-06-27T23:43:22.013
> 
> 标签：msbuild

我正在构建一个解决方案文件，其代码类似于以下内容；

```
<Target Name="Build">
  <MSBuild Projects="$(MySolution)"
           Targets="Build"
           BuildInParallel="false"
           Properties="Configuration=$(Configuration);Platform=$(Platform);">     
    <Output ItemName="MyOutputs" TaskParameter="TargetOutputs"/>
  </MSBuild>

  <Message Importance="High" Text="MyOutputs=@(MyOutputs)" />
</Target> 
```

并且该消息的输出应该显示已构建的程序集列表，但缺少一些项目 - 实际正在构建的项目（因为它们在日志的其余部分中显示为正在构建）。

我在这些项目的解决方案文件中发现了明显的差异：它们每个都有一个“ProjectSection”，而其他项目没有。

例如，这个项目被发送到@(MyOutputs)

```
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Foo", "Foo\Foo.csproj", "{075C4960-951B-43FA-AAC5-99497C9C0EBC}"
EndProject 
```

而这个不是：

```
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Bar", "Bar\Bar.csproj", "{EA7EEBE4-F7DB-4148-8B00-F49D747FA7B1}"
    ProjectSection(ProjectDependencies) = postProject
        {8B31D756-F858-43CA-81A7-5B4797554263} = {8B31D756-F858-43CA-81A7-5B4797554263}
    EndProjectSection
EndProject 
```

有人愿意告诉我为什么会这样，或者删除这些 ProjectSection 的后果是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:43:48.930

我发现我的问题是这个

我正在这样做：

```
msbuild.exe myproject.vbproj /T:Rebuild
msbuild.exe myproject.vbproj /T:Package 
```

VS这个：

```
msbuild.exe myproject.vbproj /T:Rebuild;Package 
```

我不知道为什么这个工作或为什么它没有放在首位。但希望这会有所帮助。

# c - 高级 Sublime Text 2 构建系统

> ID：11236291
> 
> 赞同：2
> 
> 时间：2012-06-27T23:43:50.360
> 
> 标签：c, build, sublimetext2

有没有让 Sublime Text 2 构建项目中的所有文件？我有一个项目，里面只有几个非常简单的 C 文件，但默认情况下，Sublime 一次只能构建一个文件。默认的 C++ 构建规则擅长单文件编译，但仅此而已。

我知道它的构建系统主要是围绕简单地调用另一个构建系统而设计的，例如`make`，但如果我不必处理 makefile，我会很高兴。如果我可以让 Sublime Text 遍历项目中的每个文件并使用一条规则构建它们，我会更喜欢。这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:17:34.103

Makefiles 绝对是这里更好的选择之一，但如果您不想这样做，您可以创建一个执行类似操作的新构建系统。

为了让您开始，请转到**Tools** -> **Build System** -> **New Build System...**，然后添加以下内容：

```
{
"cmd": ["g++", "*.cpp", "-o", "${file_path}/${file_base_name}"],
"file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
"working_dir": "${file_path}",
"selector": "source.c, source.c++"
} 
```

然后将其保存在默认目录中（`Packages/User/`）

这是标准 C++ 构建系统的直接克隆，我刚刚将“单个文件”输入参数修改为“当前目录中的所有 .cpp 文件”。

希望这是一个有用的起点！

# ruby-on-rails - 使用 Omniauth 预防 SQL 注入

> ID：11236295
> 
> 赞同：1
> 
> 时间：2012-06-27T23:44:09.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, security, omniauth

使用 Rails 的omniauth 插件查找用户时，当我在以下代码行上运行brakeman 时收到SQL 注入警告：

```
omniauth = request.env["omniauth.auth"]
user = User.where(omniauth.slice(:provider, :uid)).first 
```

SQL注入警告是：

> 第 15 行附近可能的 SQL 注入：User.where(request.env["omniauth.auth"].slice(:provider, :uid)) /app/controllers/authentications_controller.rb

如何避免这行代码易受攻击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T01:27:01.547

你可以试试这样的

```
User.find_by_provider_and_uid(omniauth[:provider], omniauth[:uid]) 
```

# iphone - 当一个 ivar 时在哪里释放 CGGradientRef

> ID：11236297
> 
> 赞同：0
> 
> 时间：2012-06-27T23:44:17.973
> 
> 标签：iphone, quartz-2d

我正在观看上次有关使用 Quartz 绘图的 Apple 视频。演讲者说您应该将 CGGradientRef 存储在 ivar 中，以便系统可以处理缓存。所以我的第一个问题是，它是如何工作的？是否只是因为渐变为该对象创建了一次，然后除非再次创建该对象，否则永远不会再次创建？

另外，你在哪里释放渐变？你会像 dealloc 中的其他 ivars 一样释放它吗？

```
.h
@property (nonatomic, readonly) CGGradientRef gradient;

.m
- (CGGradientRef)gradient {
    if (NULL == _gradient) {
        CGColorSpaceRef rgb = CGColorSpaceCreateDeviceRGB();
        _gradient = CGGradientCreateWithColors(rgb, (CFArrayRef)[NSArray arrayWithObjects:(id)[[UIColor colorWithRed:28./255 green:160./255 blue:255./255 alpha:1] CGColor], (id)[[UIColor colorWithRed:11./255 green:67./255 blue:107./255 alpha:1] CGColor], nil], nil);
        CGColorSpaceRelease(rgb);
    }
    return _gradient;
} 
```

我在哪里释放 CGGradientRef？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:33:43.733

通过简单的搜索，我发现了这个：

[https://stackoverflow.com/a/8032905](https://stackoverflow.com/a/8032905)

在返回之前添加：

```
[(id)result autorelease]; 
```

# javascript - 获取返回数据表的大小（以像素为单位）

> ID：11236301
> 
> 赞同：0
> 
> 时间：2012-06-27T23:45:15.540
> 
> 标签：javascript, jquery, css

我有一个 jQuery 文件，它使用数据函数从 PHP 页面请求数据。PHP 页面返回一个 HTML 表格。我将其用作弹出窗口，但我想动态更改弹出窗口的大小，以便 HTML 表格适合。

我该怎么做？我给返回的表一个“状态”类，并试图获取状态的宽度和高度，但我意识到这可能会给出 CSS 属性，而不是实际高度。

```
 $(popElement).css({left:leftVal,top:topVal})
    .html("<div id='loading'></div>").load(url);
  var divHeight = $("table.status").width(); //this is the returned table 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:48:24.320

不，`.width`可以很好地测量元素。真的; 尝试一下。或者您可以查看[文档](http://api.jquery.com/width/)。

# eclipse - 从 Eclipse 启动 mapreduce 作业

> ID：11236305
> 
> 赞同：8
> 
> 时间：2012-06-27T23:46:33.697
> 
> 标签：eclipse, hadoop, mapreduce

我用 Java 编写了一个 mapreduce 程序，我可以将它提交到以分布式模式运行的远程集群。目前，我使用以下步骤提交作业：

1.  将 mapreuce 作业导出为 jar（例如`myMRjob.jar`）
2.  使用以下 shell 命令将作业提交到远程集群：`hadoop jar myMRjob.jar`

当我尝试运行程序时，我想直接从 Eclipse 提交作业。我怎样才能做到这一点？

我目前正在使用 CDH3，我的 conf 的精简版是：

```
conf.set("hbase.zookeeper.quorum", getZookeeperServers());
conf.set("fs.default.name","hdfs://namenode/");
conf.set("mapred.job.tracker", "jobtracker:jtPort");
Job job = new Job(conf, "COUNT ROWS");
job.setJarByClass(CountRows.class);

// Set up Mapper
TableMapReduceUtil.initTableMapperJob(inputTable, scan, 
    CountRows.MyMapper.class, ImmutableBytesWritable.class,  
    ImmutableBytesWritable.class, job);  

// Set up Reducer
job.setReducerClass(CountRows.MyReducer.class);
job.setNumReduceTasks(16);

// Setup Overall Output
job.setOutputFormatClass(MultiTableOutputFormat.class);

job.submit(); 
```

当我直接从 Eclipse 运行它时，作业已启动，但 Hadoop 找不到映射器/减速器。我收到以下错误：

```
12/06/27 23:23:29 INFO mapred.JobClient:  map 0% reduce 0%  
12/06/27 23:23:37 INFO mapred.JobClient: Task Id :   attempt_201206152147_0645_m_000000_0, Status : FAILED  
java.lang.RuntimeException: java.lang.ClassNotFoundException:   com.mypkg.mapreduce.CountRows$MyMapper  
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:996)  
    at org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:212)  
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:602)  
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:323)   
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)  
    at java.security.AccessController.doPrivileged(Native Method)  
    at javax.security.auth.Subject.doAs(Subject.java:396)  
    at   org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)  
    at org.apache.hadoop.mapred.Child.main(Child.java:264)  
... 
```

有谁知道如何克服这些错误？如果我能解决这个问题，我可以将更多的 MR 作业集成到我的脚本中，这太棒了！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T16:19:29.170

如果您从定义作业类的 Eclipse 项目中提交 hadoop 作业，那么您很可能遇到类路径问题。

该`job.setjarByClass(CountRows.class)`调用是在构建类路径上查找类文件，而不是在 CountRows.jar 中（可能尚未构建，也可能尚未构建，甚至在类路径上）。

您应该能够通过`job.getJar()`在调用之后打印出结果来断言这是真的`job.setjarByClass(..)`，如果它没有显示 jar 文件路径，那么它找到了构建类，而不是 jar'd 类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-28T08:39:58.303

对我有用的是导出一个可运行的 JAR（它和 JAR 之间的区别在于第一个定义了具有 main 方法的类）并选择“将所需的库打包到 JAR”选项（选择“提取... " 选项会导致重复错误，并且它还必须从 jar 中提取类文件，在我的情况下，这最终导致无法解决未找到类的异常）。

之后，您可以按照 Chris White 的建议设置罐子。对于 Windows，它看起来像这样：`job.setJar("C:\\\MyJar.jar");`

如果它对任何人有帮助，我将介绍我从[创建 MapReduce 项目并在 Windows 7 的 Hadoop 2.2.0 中运行它（在 Eclipse Luna 中）中学到的东西](http://prezi.com/ydwhdzzahx9g/creating-a-mapreduce-project-and-running-it-in-hadoop-220-in-windows-7-in-eclipse-luna/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T04:57:49.937

我已使用以下网站中的此方法配置我的 Map/Reduce 项目以使用 Eclipse 运行项目（不将项目导出为 JAR） [配置 Eclipse 以运行 Hadoop Map/Reduce 项目](http://www.mapr.com/blog/basic-notes-on-configuring-eclipse-as-a-hadoop-development-environment-for-mapr)

注意：如果您决定调试您的程序，您的`Mapper`类和`Reducer`类将无法调试。

希望能帮助到你。:)

# jquery - Jquery text()，语法问题？

> ID：11236306
> 
> 赞同：0
> 
> 时间：2012-06-27T23:46:43.683
> 
> 标签：jquery, ajax, text

我对我的 ajax 请求有一些奇怪的行为。ajax 请求处理正确，回调函数删除了一个 class `'invisible'`，它显示了一个隐藏的 div。在这个 div 中，我定位一个具有“目标”id 的元素。但很奇怪，当我想在 div 中添加文本时，使用`$("#target").text('hello')`; 我的大部分网页都消失了。语法错误？任何想法 ？

最好的，纽本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:47:57.193

尝试`$("#target").html('hello');`

# linux - 通过 perl 脚本在 linux 中登录密码提示

> ID：11236307
> 
> 赞同：2
> 
> 时间：2012-06-27T23:46:50.827
> 
> 标签：linux, perl, scripting, terminal, login-script

我想通过 Perl 脚本传递密码。我基本上是在编写一个脚本来在 Linux 终端上执行命令。

在执行特定命令时，我会收到提示

```
密码：←（我需要通过我的脚本在这里输入密码）
```

但是，我的脚本只是停止工作。

浏览后，我发现`Expect`但我得到一个错误说：`Can't locate Expect.pm in @INC (@INC contains: C:/Perl/site/lib C:/Perl/lib .)`

我以前没有使用`Expect`过，所以不知道我需要安装什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T08:32:20.957

[Expect.pm 应该可以在](https://metacpan.org/module/Expect.pm#Can-I-use-this-module-with-ActivePerl-on-Windows-)带有最新[Cygwin](http://cygwin.com)的 Windows 上运行。

如果我是正确的，您可以使用 PPM 安装期望。但是，在我看来它可能不起作用：[http ://code.activestate.com/ppm/Expect/](http://code.activestate.com/ppm/Expect/)

看起来[IO-Tty](https://metacpan.org/release/IO-Tty)无法在 Windows 上安装。它应该适用于 Cygwin。

# android - 在 Sencha Touch 2 应用程序上隐藏 Android 通知栏

> ID：11236309
> 
> 赞同：0
> 
> 时间：2012-06-27T23:47:10.873
> 
> 标签：android, extjs, hide, android-notification-bar, notification-bar

我已经成功地将我的应用程序编译成一个 apk 文件，并部署到我的 Android 设备上。

但是当我在那里运行它时，通知栏是存在的，我希望它是全屏的，没有通知栏。

这是屏幕顶部的栏，显示电池使用情况、wifi/3G 连接、新电子邮件图标等。

我们如何在使用 Sencha Touch 2 编译的应用程序中隐藏它？

我在加载的第一个视图（登录屏幕）的配置中设置了 fullscreen: true ，并且还设置了：

```
Ext.application({
   viewport: {
      autoMaximize: true
   }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:56:42.163

你可以在你的 AndroidManifest.xml 中改变它：

```
<application>
  <activity
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
  </activity>
  ...
</application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T15:16:50.363

您实际上可以修改 SenchaCmd 中的 AndroidManifest.xml 模板来获取此信息，如[Sencha 论坛](http://www.sencha.com/forum/showthread.php?192523-How-to-create-generate-apk-for-Sencha-Touch-2.0/page2)中所述。

该文件将在`Sencha/Cmd/<CmdVersion>/stbuild/st-res/android/AndroidManifest.xml`. 您需要`application`像这样在标签上设置主题属性：`android:theme="@android:style/Theme.NoTitleBar"`

整个标签看起来像：

```
<application android:icon="@drawable/icon" android:label="%s" android:theme="@android:style/Theme.NoTitleBar"> 
```

然而，这个解决方案仍然非常糟糕，我很想看到在不修补 Sencha 代码的情况下可以工作的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T23:55:51.067

只需添加这个以使屏幕全屏`this.setTheme(android.R.style.Theme_NoTitleBar_Fullscreen);`之前`super.onCreate(savedInstanceState);`

或者

添加`this.requestWindowFeature(Window.FEATURE_NO_TITLE);`和 `this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN)`之前`setContentView`

例如：

```
@Override
public void onCreate(Bundle savedInstanceState){
/**sets Theme and Style (must be set BEFORE super.onCreate)*/
this.setTheme(android.R.style.Theme_NoTitleBar_Fullscreen);
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 
```

或者

```
@Override
public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
/**Changes Window. Removes title and/or notification bar (must be set BEFORE setContentView)*/
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.main); 
```

（或者你可以像 homer_simpson 所说的那样通过 Manifest 来做到这一点。）

# zend-framework - nginx php5-fpm 失败（2：没有这样的文件或目录）

> ID：11236310
> 
> 赞同：14
> 
> 时间：2012-06-27T23:47:20.703
> 
> 标签：zend-framework, ubuntu, nginx, php

**问题：我错过了什么或做错了什么？**

我正在尝试将功能齐全的 Zend Framework 应用程序从带有 mod_php5 的 Apache2 迁移到带有 php5-fpm 的 nginx。我收到这种错误：

`2012/06/27 12:08:04 [error] 1986#0: *1 open() "/var/www/public/sales/live-trials-json" failed (2: No such file or directory), client: *.*.*.*, server: www.mydomain.com, request: "POST /sales/live-trials-json HTTP/1.1", host: "www.mydomain.com", referrer: "https://www.mydomain.com/sales/live-trials"`

这是我的配置文件：

a) /etc/nginx/sites-enabled/www

```
server {
  listen 80;
  listen 443 default ssl;

  server_name www.mydomain.com;
  root /var/www/public;

  ssl_certificate /etc/nginx/ssl/mydomain.crt;
  ssl_certificate_key /etc/nginx/ssl/mydomain.key;

  access_log /var/log/nginx/access.log;
  error_log /var/log/nginx/error.log error;

  index index.php index.phtml index.html;

  location = /(favicon.ico|robots.txt) {
    access_log off;
    log_not_found off;
  }

  location ~* ^.+.(css|js|jpeg|jpg|gif|png|ico|xml) {
    access_log off;
    expires 30d;
  }

  location / {
    try_files $uri $uri/ /index.php;
  }

  location ~ /\.ht {
    deny all;
  }

  location ~ \.php$ {
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_intercept_errors on;
    include /etc/nginx/fastcgi_params;
  }
} 
```

b) /etc/nginx/fastcgi_params

```
fastcgi_param   QUERY_STRING        $query_string;
fastcgi_param   REQUEST_METHOD      $request_method;
fastcgi_param   CONTENT_TYPE        $content_type;
fastcgi_param   CONTENT_LENGTH      $content_length;
fastcgi_param   SCRIPT_FILENAME     $request_filename;
fastcgi_param   SCRIPT_NAME     $fastcgi_script_name;
fastcgi_param   REQUEST_URI     $request_uri;
fastcgi_param   DOCUMENT_URI        $document_uri;
fastcgi_param   DOCUMENT_ROOT       $document_root;
fastcgi_param   SERVER_PROTOCOL     $server_protocol;
fastcgi_param   GATEWAY_INTERFACE   CGI/1.1;
fastcgi_param   SERVER_SOFTWARE     nginx/$nginx_version;
fastcgi_param   REMOTE_ADDR     $remote_addr;
fastcgi_param   REMOTE_PORT     $remote_port;
fastcgi_param   SERVER_ADDR     $server_addr;
fastcgi_param   SERVER_PORT     $server_port;
fastcgi_param   SERVER_NAME     $server_name;
fastcgi_param   HTTPS           $https;
# PHP only, required if PHP was built with --enable-force-cgi-redirect
fastcgi_param   REDIRECT_STATUS     200; 
```

c) /etc/php5/fpm/pool.d/www.conf

```
[www]
user = www-data
group = www-data
listen = 127.0.0.1:9000
pm = dynamic
pm.max_children = 20
pm.start_servers = 4
pm.min_spare_servers = 2
pm.max_spare_servers = 6
chdir = / 
```

d) ls -al /var/www

```
drwxr-xr-x  7 www-data www-data  4096 Jun 27 10:52 application
drwxr-xr-x  5 www-data www-data  4096 Jun 27 10:52 library
drwxr-xr-x 10 www-data www-data  4096 Jun 27 12:05 public 
```

e) nginx -V

```
nginx version: nginx/1.1.19
TLS SNI support enabled
configure arguments:
  --prefix=/etc/nginx
  --conf-path=/etc/nginx/nginx.conf
  --error-log-path=/var/log/nginx/error.log
  --http-client-body-temp-path=/var/lib/nginx/body
  --http-fastcgi-temp-path=/var/lib/nginx/fastcgi
  --http-log-path=/var/log/nginx/access.log
  --http-proxy-temp-path=/var/lib/nginx/proxy
  --http-scgi-temp-path=/var/lib/nginx/scgi
  --http-uwsgi-temp-path=/var/lib/nginx/uwsgi
  --lock-path=/var/lock/nginx.lock
  --pid-path=/var/run/nginx.pid
  --with-debug
  --with-http_addition_module
  --with-http_dav_module
  --with-http_geoip_module
  --with-http_gzip_static_module
  --with-http_image_filter_module
  --with-http_realip_module
  --with-http_stub_status_module
  --with-http_ssl_module
  --with-http_sub_module
  --with-http_xslt_module
  --with-ipv6
  --with-sha1=/usr/include/openssl
  --with-md5=/usr/include/openssl
  --with-mail
  --with-mail_ssl_module
  --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-auth-pam
  --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-echo
  --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-upstream-fair
  --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-dav-ext-module 
```

f) php -v (这是 cli 版本，但我发誓我正在使用 fpm 运行 nginx:)

```
PHP 5.3.10-1ubuntu3 with Suhosin-Patch (cli) (built: Apr 11 2012 17:25:33) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T21:55:35.317

好吧，经过漫长而疲惫的挣扎，我终于弄清楚了这种疯狂。所以，我从头开始一切，这就是我所学到的：

**整个怪异在某处`location ~* ... { ... }`，所以谁有更好的经验，请解释原因:-) 同时我将在应用层管理资产和缓存。**

我的功能配置文件如下所示：

```
server {
  listen 80;
  listen 443 default ssl;

  server_name www.mydomain.com;
  root /var/www/public;

  ssl_certificate /etc/nginx/ssl/mydomain.crt;
  ssl_certificate_key /etc/nginx/ssl/mydomain.key;

  access_log /var/log/nginx/access.log;
  error_log /var/log/nginx/error.log error;

  index index.php index.phtml index.html;

  location / {
    try_files $uri $uri/ /index.php;
  }

  location ~ \.php$ {
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_intercept_errors on;
    include /etc/nginx/fastcgi_params;
  }
} 
```

感谢您的尝试，尤其是@sarnold 和@sergei-lomakov！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-01T19:52:03.400

您的 nginx 配置有点错误。

因为同意你的规则，nginx 会尝试访问不存在的 /var/www/public/sales/live-trials-json 。

因为我不知道你的应用程序使用了哪些端点，所以我建议你做两个 nginx 位置。首先，为所有静态文件（使用正则表达式）创建此位置：

```
location ~* ^.+.(css|js|jpeg|jpg|gif|png|ico|xml) {
    access_log off;
    expires 30d;
  } 
```

所有其他查询都应代理到 apache：

```
 location / {
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_intercept_errors on;
    include /etc/nginx/fastcgi_params;
  } 
```

用这个规则做一点改变：

```
 location ~* ^/(favicon.ico|robots.txt)$ {
    access_log off;
    log_not_found off;
  } 
```

当然，您可以保持“.ht 设置”不变：

```
 location ~ /\.ht {
    deny all;
  } 
```

因此，最终配置将是：

```
server {
  listen 80;
  listen 443 default ssl;

  server_name www.mydomain.com;
  root /var/www/public;

  ssl_certificate /etc/nginx/ssl/mydomain.crt;
  ssl_certificate_key /etc/nginx/ssl/mydomain.key;

  access_log /var/log/nginx/access.log;
  error_log /var/log/nginx/error.log error;

  index index.php index.phtml index.html;

  location ~* ^/(favicon.ico|robots.txt)$ {
    access_log off;
    log_not_found off;
  }

  location ~* ^.+.(css|js|jpeg|jpg|gif|png|ico|xml) {
    access_log off;
    expires 30d;
  }

  location ~ /\.ht {
    deny all;
  }

  location / {
    fastcgi_pass 127.0.0.1:9000;
# I'm not sure that this setting is needed:
#        fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_intercept_errors on;
    include /etc/nginx/fastcgi_params;
  }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T23:46:48.107

如您所述，您的问题在于

```
location ~* ^.+.(css|js|jpeg|jpg|gif|png|ico|xml) {
  access_log off;
  expires 30d;
} 
```

这与 /sales/live-trials-json 的 POST uri 匹配，因为它尚未锚定到 uri 路径的末尾，并且 . 匹配任何字符。这意味着“-js”匹配。要解决这个问题，您只需要添加一个 \（匹配文字 '.'）和一个 $（将匹配锚定在 uri 路径的末尾）：

```
location ~* \.(css|js|jpeg|jpg|gif|png|ico|xml)$ {
  access_log off;
  expires 30d;
} 
```

# php - Symfony2：循环遍历 Twig 中的嵌套实体

> ID：11236311
> 
> 赞同：1
> 
> 时间：2012-06-27T23:47:32.277
> 
> 标签：php, symfony

我需要遍历 Twig 模板中的嵌套实体。

实体 A -> 与实体 B 的 OneToMany 关系
实体 B -> 与实体 C 的 OneToMany 关系

关系设置正确（至少据我所知），并且在控制器中我可以遍历嵌套的 ORM 结果。

但是，当我在 Twig 模板中尝试以下操作时，我收到一条错误消息，指出方法（实体 B 的属性）不存在。

这是我在 Twig 模板中使用的代码：

```
 {% for entityB in entityA.collection %}
        {% for entityC in entityB.collection  %}
            {{ entityC.property }}
        {% endfor %}
    {% endfor %} 
```

抛出的错误表明 entityC.property 不存在。

我错过了什么吗？

谢谢，

JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:28:24.027

简短的回答是你可以。这一定是您的实体的问题。检查 entityC.property 上属性的拼写并尝试打印 entityC.id 或您知道存在的其他属性。你的代码很好。

# php - 在 Symfony2 中，我应该把控制器使用的那个函数放在哪里？

> ID：11236312
> 
> 赞同：2
> 
> 时间：2012-06-27T23:47:48.937
> 
> 标签：php, symfony, controller

假设一个`Human`可以`Item`在他的口袋里有（s）。每种`Item`对`Human`.

当他使用一个项目时，它会转到`ItemController`：

```
class ItemController extends Controller
{
    public function useAction() {
       // Human
        $human = new Human();

       // Item
        $request = Request::createFromGlobals();
        $item_id = $request->request->get('item_id', 0);
        $item = new Item($item_id);

        // Different effects depending on the Item used
        switch($item->getArticleId()) {

            case 1: $this->heal($human, $item, 5); break; // small potion
            case 2: $this->heal($human, $item, 10); break; // medium potion
            case 3: $this->heal($human, $item, 15); break; // big potion

        }

    }

    // The following Heal Function can be placed here ?
    private function heal($human, $item, $life_points) {
        $human->addLife($life_points);
        $item->remove();
        return new Response("You have been healed of $life_points");
    }
} 
```

**`heal function`可以放在这里吗？**我相信它不应该在控制器中。但我也认为它不应该放在里面`Item Entity`（因为 Response，而且因为它使用 $Human）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T07:21:52.980

这取决于。我对这类问题的推理是：如果我只使用控制器中的功能，它可以留在那里。但如果它可能是一个共享功能，我将为它创建一个服务。也许您希望能够通过命令或不同的控制器或其他东西来治愈人类。在这种情况下，为此使用共享代码是有意义的。

[创建服务](http://symfony.com/doc/master/components/dependency_injection/factories.html)非常简单，并且使您能够将逻辑保存在共享位置。在我看来，控制器对于处理请求流更有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T12:37:37.770

我认为你可以这样做：

1：继承

```
 class BaseHumanController extend Controller{

  public function heal($param1, $param2, $param3){

  //put logic here

  }

} 

//Extend from BaseHumanController in any controller for call heal() method
class ItemController extend BaseHumanController{

//....
 $this->heal(...)

} 
```

2：使用您的heal() 方法创建一个类，并将其配置为@Peter Kruithof 的服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T06:19:55.697

我绝对认为它会进入控制器。来自维基百科：

> 控制器调解输入，将其转换为模型或视图的命令。

如果您查看 symfony2 crud 生成器生成的删除函数，它会在实体上调用 remove：

```
/**
 * Deletes a Bar entity.
 *
 * @Route("/{id}/delete", name="bar_delete")
 * @Method("post")
 */
public function deleteAction($id)
{
    $form = $this->createDeleteForm($id);
    $request = $this->getRequest();

    $form->bindRequest($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        $entity = $em->getRepository('FooBundle:Bar')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Bar entity.');
        }

        $em->remove($entity);
        $em->flush();
    }

    return $this->redirect($this->generateUrl('bar_index'));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:20:37.870

我看不出它为什么不应该在控制器中。如果您只想在那里使用它，只需将其设为私有方法。

# java - Servlet eclipse 中无法识别制表符

> ID：11236313
> 
> 赞同：0
> 
> 时间：2012-06-27T23:47:56.790
> 
> 标签：java, eclipse, servlets

我在 Eclipse 中使用 servlet 并尝试检索结果集，并希望使用制表符缩进分隔从结果集中检索到的每一列。我尝试使用 \t、\n。但它在浏览器中显示输出，列之间只有一个空格，即使我使用了任何特殊字符。

```
 while (rs.next())
  {
  out.print(rs.getString(1) + rs.getString(2) + '\t' +rs.getString(3)+'\t'+rs.getString(4)+"<br>");             
   } 
```

我正在使用 Glassfish 服务器和 Eclipse IDE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:53:15.320

制表符在 HTML 中呈现为单个空格。你需要把它放在预先格式化的文本标签中

```
out.print("<pre>");
while (rs.next()) {
    out.print(rs.getString(1) + rs.getString(2) + '\t' +rs.getString(3)+'\t'+rs.getString(4)+'\n');             
}
out.print("</pre>"); 
```

或从中制作 HTML 表格：

```
out.print("<table>");
while (rs.next()) {
    out.print("<tr><td>" + rs.getString(1) + rs.getString(2) + "</td><td>" +rs.getString(3)+"</td><td>"+rs.getString(4)+"</td></tr>");             
}
out.print("</table>"); 
```

# iphone - ios uiscrollview 是否有可能检测用户的单击，同时仍提供其拖动、滚动功能？

> ID：11236315
> 
> 赞同：19
> 
> 时间：2012-06-27T23:47:57.350
> 
> 标签：iphone, ios, uiscrollview, touch, tap

我目前正在使用 UIScrollView 作为滚动/拖动我在我的应用程序上显示的图形的光标/标记的一种方式。我使用scrollViewDidScroll等来检测contentoffset的位置，并根据这个位置操纵我在屏幕上显示的内容。

*我的问题是是否也可以检测到用户在屏幕上的单击并获取此点击的位置（然后将 contentoffset 设置为此位置）？*

我已经阅读了一些描述创建 uiscrollview 子类的教程，但似乎这些子类只考虑单击而不是拖动/滚动。

*有没有人知道我如何能够检测到用户在我的 UIScrollView 上的单击，同时仍然具有其滚动/拖动功能？*
先感谢您！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-28T05:17:18.140

为您的 scrollView 对象使用以下代码：

```
UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTap:)];
singleTapGestureRecognizer.numberOfTapsRequired = 1;
singleTapGestureRecognizer.enabled = YES;
singleTapGestureRecognizer.cancelsTouchesInView = NO;
[scrollView addGestureRecognizer:singleTapGestureRecognizer];
//[singleTapGestureRecognizer release]; Not needed in ARC-enabled Project 
```

}

```
- (void)singleTap:(UITapGestureRecognizer *)gesture {  
//handle taps   
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-01T17:22:56.383

**斯威夫特 5**

```
let scrollViewTapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(scrollViewTapped(_:)))
scrollViewTapGestureRecognizer.numberOfTapsRequired = 1
scrollViewTapGestureRecognizer.isEnabled = true
scrollViewTapGestureRecognizer.cancelsTouchesInView = false
scrollView.addGestureRecognizer(scrollViewTapGestureRecognizer)

@objc func scrollViewTapped(_ sender: UITapGestureRecognizer) {
    print("UIScrollView was tapped.")
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T02:48:24.690

问题的第一部分很容易上手。如果你有一个 UIScrollView 子类，你可以添加一个 touchesEnded 覆盖，如下所示：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    if ([touch tapCount] == 1) {

        CGPoint location = [touch locationInView:self];

        [self setContentOffset:location animated:YES];

    }

} 
```

在滚动视图的情况下，触摸的 -locationInView 实际上已经将 ContentOffset 添加到其中。这段代码要做的是滚动滚动视图，使用户触摸的点位于视图的左上角。这可能不是您想要的，因此如果您希望滚动最终达到 10 个像素，则必须执行诸如添加偏移量之类的操作，或者您将制作另一个只有 x 值的 CGPoint如果您的滚动条不是从左到右，则为位置。

这不会干扰能够实际进行滚动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T01:54:33.010

您是否考虑过将 UITapGestureRecognizer 附加到滚动视图？我已将 UITapGestureRecognizer 附加到 UIScrollView 并在需要触摸时使用`–gestureRecognizerShouldBegin:`和/或`–gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`取消内置平移。

# events - 发布到活动页面？

> ID：11236316
> 
> 赞同：-1
> 
> 时间：2012-06-27T23:48:03.497
> 
> 标签：events, facebook-graph-api, status

我想在我的一个页面中包含一些简单的 PHP，当页面被调用时，它会在我要去的 Facebook 事件页面上写一篇新帖子（数据库驱动在我这边）。

数据库的东西很简单，但我似乎找不到任何自动发布到我的活动的参考。

有没有人做到这一点？Graph API 看起来我可以创建一个事件、邀请人们并检查邀请状态……但不能以编程方式写入事件墙。

很多参考写到某人的墙上，而不是具体的事件。有什么我可以看的例子吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:45:02.193

您可能正在寻找**Event**[文档](https://developers.facebook.com/docs/reference/api/event/)中所述的事件源连接：

> 此连接对应于事件的墙。您可以通过向 EVENT_ID/feed 连接发出 HTTP POST 请求来创建链接、帖子或状态消息。

# linq - RavenDB 查询中的“无法将 Lambda 表达式转换为委托类型”错误

> ID：11236321
> 
> 赞同：1
> 
> 时间：2012-06-27T23:48:30.263
> 
> 标签：linq, ravendb

我有一个像这样的 RavenDb 文档：

```
{
  "ParentId": null,
  "Order": 10,
  "Url": "/sandbox",
  "Rows": 
  [
    {
      "InstanceId": "2771a0d7-7f3f-4854-a3ba-27f25f88a45e",
      "CSSClass": null,
      "Columns": 
      [
        {
          "InstanceId": "b91495f5-b770-4da7-8073-ad3bd8221ca8",
          "CSSClass": null,
          "Span": 3,
          "CMSModuleInstanceSettings": 
          [
            {
              "$type": "ModuleHTML.Models.ModuleHTMLInstanceSettings, ModuleHTML",
              "IsActive": false,
              "ShowAuthor": false,
              "ShowDate": false,
              "ShowCommentsCount": false,
              "ShowLast2Comments": false,
              "CMSModuleInstanceId": 417,
              "ContainerClass": "default",
              "ModuleType": "ModuleHTML",
              "DisplayType": "Summary"
            },
            {
              "$type": "ModuleHTML.Models.ModuleHTMLInstanceSettings, ModuleHTML",
              "IsActive": false,
              "ShowAuthor": false,
              "ShowDate": false,
              "ShowCommentsCount": false,
              "ShowLast2Comments": false,
              "CMSModuleInstanceId": 545,
              "ContainerClass": "default",
              "ModuleType": "ModuleHTML",
              "DisplayType": "Summary"
            }
          ],
          "Id": 0,
          "Name": null,
          "CreatedOn": "0001-01-01T00:00:00.0000000",
          "CreatedBy": 0,
          "LastModifiedOn": "0001-01-01T00:00:00.0000000",
          "LastModifiedBy": 0
        },
        ...
      ],
      ...
    },
    ...
  ],
  ...
} 
```

我想检索页面文档并包含行、列，然后只包含活动的 CMSModuleInstanceSettings。

我努力了：

```
var page = documentSession.Query<CMSPage>()
             .SingleOrDefault(p => p.Id == pageId)
             .Rows
             .Any(x => x.Columns
               .Any(z => z.CMSModuleInstanceSettings
                 .Where(m => m.IsActive == true))); 
```

但它返回：

```
Error 1 Cannot convert lambda expression to delegate type
'System.Func<CMS.Models.CMSColumn,bool>' because some of 
the return types in the block are not implicitly convertible 
to the delegate return type 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:34:29.123

你知道你实际上是在做一个查询然后是一个内存过滤器，对吧？

像这样拆分它：

```
 var page = documentSession.Query<CMSPage>()
         .SingleOrDefault(p => p.Id == pageId); 
```

和：

```
 var rows =             page.Rows
         .Any(x => x.Columns
           .Any(z => z.CMSModuleInstanceSettings
             .Where(m => m.IsActive == true))); 
```

你现在在哪里得到错误？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T21:30:58.217

我确信有更好的方法，但这就是我最终要做的......

```
var page = documentSession.Load<CMSPage>(pageId);

foreach (var row in page.Rows)
            {
                foreach (var column in row.Columns)
                {
                    var settings = column.CMSModuleInstanceSettings.ToList();
                    settings.ForEach(x => settings.Remove(x));
                    column.CMSModuleInstanceSettings = settings;
                }
            } 
```

# css - HTML5 role=main，如何设置样式

> ID：11236324
> 
> 赞同：4
> 
> 时间：2012-06-27T23:49:22.680
> 
> 标签：css, html

如果我有

```
<div role="main">

</div> 
```

如何`main`使用 CSS 设置样式？或者我是否还必须添加一个 ID 或一个类`<div>`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T23:50:34.317

我建议添加一个 ID 或类。这是最跨浏览器和最有效的方式。

如果你不能这样做，那么你需要使用一个属性选择器：

```
div[role="main"] 
```

# javascript - 模态对话框加载 jquery 在控制台中执行但不从 application.js 加载

> ID：11236326
> 
> 赞同：0
> 
> 时间：2012-06-27T23:49:23.590
> 
> 标签：javascript, jquery, ruby-on-rails, twitter-bootstrap, modal-dialog

我有一个使用 twitter-bootstrap 的应用程序，我正在尝试实现一个按钮，该按钮将启动一个模式框加载用户/新路径。我能够做到这一点，但前提是我将代码的 javascript 部分直接输入到控制台中。放入 application.js 什么都不做。

这是它在视图中的设置方式：

```
<a class="btn" id="modal" data-toggle="modal" href="#userModal" >New Reserver</a>

<div class="modal hide" id="userModal">
</div> 
```

如果我按下按钮而不执行任何 javascript，则会按预期加载一个空的模式框。但是，如果我在模式框打开或单击按钮之前在浏览器的 javascript 控制台中运行以下代码，则一切都会正确呈现。在我的 users/new 内部是一个局部表单，它也被渲染并正常运行。为什么它不能在我的 application.js 中正确执行？

```
$('#userModal').load('users/new #content'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:10:28.277

原来代码是在 DOM 正确加载之前执行的。我确信我之前已经检查过了，但显然我的语法是错误的。这修复了它

```
$().ready(function() {
  $('#userModal').load('users/new #content');
}); 
```

# c# - 如何使用 LINQ-to-Entities 将 DateTime 字段划分为多个间隔？

> ID：11236327
> 
> 赞同：0
> 
> 时间：2012-06-27T23:49:37.193
> 
> 标签：c#, linq, entity-framework, sybase

我有以下代码行：

```
group p by new DateTime((p.DateTime.Value.Ticks / interval.Ticks) * interval.Ticks).TimeOfDay 
```

这在 LINQ-to-Objects 中效果很好，但在 LINQ-to-Entities 中不起作用。我有两个问题：

*   为什么它有效？我不明白如何将时间除以一个时间间隔，然后将其乘以相同的时间间隔神奇地将我的 12:37 转换为 12:30。我的基本数学经验表明**(A/B)*B = A**。（由@spencer 在评论中清除。非常感谢！）

*   如何重新格式化这条线以在 LINQ-to-Entities 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:54:29.063

您使用的 DateTime 方法无法被 l2e 翻译。考虑将[`EntityFunctions`](http://msdn.microsoft.com/en-us/library/dd412643)类用于支持的时间操作。

有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/bb738563)。

例如，假设您的时间间隔是 60 秒，我猜您可能会执行以下操作：

```
DateTime? start=new DateTime(2000,1,1); //start of first interval
...group p by 
    EntityFunctions
        .AddSeconds(
            start,
            (EntityFunctions
                .DiffSeconds(p.DateTime,start)/60)*60
         ) 
```

# c# - 如何将值从 HTML 标签/元素传递到 C# 中的代码背后？

> ID：11236329
> 
> 赞同：1
> 
> 时间：2012-06-27T23:50:17.133
> 
> 标签：c#, javascript, asp.net, html

在不使用 runat="server" 的情况下，将值从 HTML 标记/元素传递到代码背后的最佳方法是什么？例子

```
<input id="tags" type="text" /> 
```

现在，我想将标签的值传递给后面的代码。

```
string tagsvalue = this.Request.Form.Get( "tags" ); 
```

我正在尝试使用上面的代码但不工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T23:53:52.210

您使用 name 属性来指定名称/值对中的名称而不是 id

```
<input name="tags" id="tags" type="text" /> 
```

# osx-lion - 无法在 Mac OSX Lion 上为 python 2.7 安装 pyenchant-1.6.5

> ID：11236332
> 
> 赞同：2
> 
> 时间：2012-06-27T23:50:57.473
> 
> 标签：osx-lion, python-2.7, pyenchant

我无法在我的 Max OSX Lion 上安装 pyenchant for python 2.7。使用 dmg 安装程序时出现错误。我收到一条错误消息，指出需要 /opt/local/Library/Frameworks Python 2.7。

我的 python 2.7 安装在 /Library/Frameworks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:15:21.303

您正在使用的安装程序期望安装一个 macports 版本的 python（ /opt 位置）。

只需尝试通过[easy_install](http://pypi.python.org/pypi/setuptools)或 pip安装它

```
easy_install pyenchant 
```

或者

```
pip install pyenchant 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T23:47:03.400

通过使用此过程，我能够使用非 Homebrew Python 在 Mac OS X Maverick 上安装 pyenchant。它也可能适用于 Mac OS X Mountain Lion。

pyenchant Python 库有四个先决条件：gettext、glib、libiconv 和 enchant。

使用 Homebrew 安装前两个：`brew install gettext`和`brew install glib`

使用源代码安装后两个，或者使用 pyenchant-bdist-osx-source tarball 中的源代码 ( [https://github.com/downloads/rfk/pyenchant/pyenchant-bdist-osx-sources-1.6.5.焦油.gz](https://github.com/downloads/rfk/pyenchant/pyenchant-bdist-osx-sources-1.6.5.tar.gz)）：

```
tar xzf libiconv-1.3.1.tar.gz
cd libiconv-1.31.1
。/配置
制作
进行安装
光盘..

```

和

```
tar xzf 附魔-1.6.0.tar.gz
cd 附魔-1.6.0
。/配置
制作
进行安装
光盘..

```

现在你已经具备了所有的先决条件，所以你可以直接使用 setuptools 安装 pyenchant。下载源代码压缩包 ( [http://pypi.python.org/packages/source/p/pyenchant/pyenchant-1.6.5.tar.gz](http://pypi.python.org/packages/source/p/pyenchant/pyenchant-1.6.5.tar.gz) ) 并解压。现在使用 setup.py 构建和安装 pyenchant：

```
tar xzf pyenchant-1.6.5.tar.gz
cd pyenchant-1.6.5
python setup.py 构建
python setup.py 安装
光盘..

```

你应该都完成了！

# ruby-on-rails - form_for 重置按钮在 AJAX 响应后不更新值

> ID：11236333
> 
> 赞同：0
> 
> 时间：2012-06-27T23:51:24.557
> 
> 标签：ruby-on-rails, ajax, forms, reset

我正在尝试使用 form_for 重置按钮：

```
<%= button_tag 'Reset', :type => 'reset' %> 
```

它工作得很好，但是当我通过 AJAX 更新对象时，我怎样才能让新的表单值成为重置的值？现在它会在文档加载时重置为值，这是有道理的。但是有没有办法让重置按钮注册新值？

这是代码： [https ://gist.github.com/3006966](https://gist.github.com/3006966)

希望有一种比遍历表单字段并设置其默认值更简单的方法： [How can I update a default value for a form field after an ajax submit (not a form reset)](https://stackoverflow.com/questions/8767048/how-can-i-update-a-default-value-for-a-form-field-after-an-ajax-submission-not)

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:53:44.390

事实证明，Rails 助手只是在输入标签中添加了一个 'type=reset' 属性。其余的魔法直接来自常规 HTML。

我最终做了这样的事情：

```
$(this)[0].defaultValue = $(this).val(); 
```

希望这可以帮助某人。

# ruby-on-rails-3 - 这个 iptables 日志条目是关于什么的？

> ID：11236334
> 
> 赞同：0
> 
> 时间：2012-06-27T23:51:40.763
> 
> 标签：ruby-on-rails-3, omniauth, iptables

我在服务器上运行了一个 rails 应用程序，我在其中添加了一些 iptables 规则以提高安全性。现在 Omniauth 回调停止工作。每次我尝试使用任何提供商登录时，我都会在我的应用程序日志中收到此错误

```
Errno::ENETUNREACH (Network is unreachable - connect(2)) 
```

这个丢弃的包被记录到系统日志中

```
IN=eth0 OUT= MAC=40:40:ea:31:ac:8d:64:00:f1:cd:1f:7f:08:00 SRC=66.220.147.99 DST=my_ip LEN=56 TOS=0x00 PREC=0x00 TTL=88 ID=0 DF PROTO=TCP SPT=443 DPT=37035 WINDOW=14480 RES=0x00 ACK SYN URGP=0 
```

有人可以告诉我系统日志中的那个条目是关于什么的，以及需要什么样的 iptables 规则来允许它。

如果需要，我还可以添加到目前为止我已应用的规则。

编辑：系统日志行不正确，所以我替换了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:43:23.287

[我从http://lists.debian.org/debian-user/2002/07/msg01187.html](http://lists.debian.org/debian-user/2002/07/msg01187.html)找到的原始问题的答案

```
IN = interface the packet came in
OUT = interface used for sending the packet
MAC = MAC address for source and destination
SRC = IP of the sender
DST = IP of the receiver
LEN = Length of the packet
TOS = ?
PREC = Precedence
TTL = Time to live (hop count of the package)
ID = Packet ID number
DF = Don't fragment bit
PROTO = The protocol
SPT = Sender port
DPT = Receiving port
WINDOW = ?
RES = Received bits
And then some TCP flags in the end of the row. Didn't yet dig the meaning of those.
ACK = ?
SYN = ?
URGP = ? 
```

# android - setVisibility(View.VISIBLE) 并不总是有效。想法？

> ID：11236336
> 
> 赞同：23
> 
> 时间：2012-06-27T23:51:44.487
> 
> 标签：android

我正在尝试显示一对隐藏按钮（`setVisibility(View.VISIBLE)`在 a 中使用 , `RelativeLayout`），但它并不总是有效。该按钮在 Galaxy Tab 10.1" 上显示 OK，但在较小的平板电脑（不确定是哪个型号）和 Android 4.0 模拟器上都没有。

我随机发现，对于某些`TextView t`情况，以下代码会导致按钮变得可见：

```
t.setText(t.getText());
...
button.setVisibility(View.VISIBLE); 
```

`t`位于相同`RelativeLayout`但与按钮无关（它们的位置独立且不重叠）。

**编辑**：如果一些 Android 开发人员想要追踪这个...

我能够将代码简化为以下布局，该布局在 Android 4.0.3 模拟器上出现问题，但在 Galaxy Tab 上没有。发现需要a`SurfaceView`或者问题没有出现（比如改成`TextView`问题就消失了）。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- layout/test.xml -->
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"        
    android:id="@+id/relativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <SurfaceView
        android:id="@+id/mapCtrl"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/bottomPanel"
        android:text="Placeholder"
        android:layout_marginTop="18dip" />
    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/map_mode_title" />

    <!--=================================================-->
    <!-- Bottom bar: current road name and current speed -->
    <LinearLayout
        android:id="@+id/bottomPanel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="#f228"
        android:orientation="horizontal"
        android:textColor="#ffff" >
        <Button
            android:id="@+id/btnNavMode"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginRight="3dip"
            android:textColor="#fff"
            android:text="Switch to\nNav Mode" />
        <RelativeLayout
            android:id="@+id/currentStreetPanel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="onClick"
            android:clickable="true"
            android:orientation="vertical" >
            <TextView
                android:id="@+id/currentStreetHdg"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:text="Current street"
                android:textColor="#fff"
                android:textSize="10dip" />
            <TextView
                android:id="@+id/currentStreet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/currentStreetHdg"
                android:layout_marginTop="-8dip"
                android:singleLine="true"
                android:text="Current street"
                android:textColor="#fff"
                android:textSize="30dip" />
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/RelativeLayout2"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:background="#ff606060"
            android:orientation="vertical" >
            <TextView
                android:id="@+id/yourSpeedHdg"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="3dip"
                android:text="Your speed"
                android:textColor="#fff"
                android:textSize="10dip" />
            <TextView
                android:id="@+id/speed"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_below="@+id/yourSpeedHdg"
                android:layout_marginLeft="3dip"
                android:layout_marginTop="-8dip"
                android:text="0"
                android:textColor="#fff"
                android:textSize="30dip" />
            <TextView
                android:id="@+id/speedUnit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/speed"
                android:layout_marginLeft="5dip"
                android:layout_toRightOf="@+id/speed"
                android:text="kph"
                android:textColor="#fff"
                android:textSize="18dip" />
        </RelativeLayout>
    </LinearLayout>

    <!--================-->
    <!-- On-map buttons -->
    <Button
        android:id="@+id/btnClearRoute"
        android:background="#F00"
        android:textColor="#fff"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Clear\nroute"/>
    <ZoomControls
        android:id="@+id/zoomControls"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/mapCtrl"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="-25dip"
        android:orientation="horizontal" />
    <Button
        android:id="@+id/btnFindRoute"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/mapCtrl"
        android:layout_alignParentRight="true"
        android:layout_marginRight="2dip"
        android:layout_marginBottom="65dip"
        android:text="Route to selected location"
        android:textSize="17dip"/>
    <Button
        android:id="@+id/btnUnselect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/btnFindRoute"
        android:layout_alignTop="@+id/btnFindRoute"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="2dip"
        android:text="Unselect" />
    <LinearLayout
        android:id="@+id/showMePanel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/btnFindRoute"
        android:layout_alignRight="@+id/btnFindRoute"
        android:layout_alignLeft="@+id/btnFindRoute"
        android:padding="4dip"
        android:background="#bbbb"
        android:gravity="center"
        android:orientation="vertical">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Show me..."
            android:textColor="#fff"/>
        <Button
            android:id="@+id/btnShowVehicle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="My car"/>
        <Button
            android:id="@+id/btnShowRoute"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="The route"/>
        <Button
            android:id="@+id/btnShowDestination"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Destination"/>
        <Button
            android:id="@+id/btnShowMap"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="The map"/>
    </LinearLayout>
</RelativeLayout> 
```

Activity 类只是在单击任何按钮时切换两个按钮的可见性。同样，在某些设备上它可以工作，而在其他设备上则不能。

```
package mentor.simplegps;

import android.app.*;
import android.os.Bundle;
import android.view.*;
import android.widget.*;

public class TestActivity extends Activity implements View.OnClickListener
{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.test);
        boilerplate();
        setVisibilities();
    }

    Button _btnShowMap, _btnShowVehicle, _btnShowRoute, _btnShowDestination;
    Button _btnUnselect, _btnFindRoute, _btnNavMode;
    TextView _title;

    void boilerplate()
    {
        _btnUnselect = attachBtn(R.id.btnUnselect);
        _btnShowMap = attachBtn(R.id.btnShowMap);
        _btnShowVehicle = attachBtn(R.id.btnShowVehicle);
        _btnShowRoute = attachBtn(R.id.btnShowRoute);
        _btnShowDestination = attachBtn(R.id.btnShowDestination);
        _btnFindRoute = attachBtn(R.id.btnFindRoute);
        _btnNavMode = attachBtn(R.id.btnNavMode);
        _title = (TextView)findViewById(R.id.title);
    }
    private Button attachBtn(int btnId) {
        Button b = (Button)findViewById(btnId);
        b.setOnClickListener(this);
        return b;
    }

    boolean haveSel;
    public void onClick(View v)
    {
        haveSel = !haveSel;
        setVisibilities();
    }
    void setVisibilities()
    {
        _btnFindRoute.setVisibility(haveSel ? View.VISIBLE : View.INVISIBLE);
        _btnUnselect.setVisibility (haveSel ? View.VISIBLE : View.INVISIBLE);

        // Fixes the problem
        //_title.setText(_title.getText());
    }
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-29T19:17:25.337

SurfaceView 是唯一的罪魁祸首（当然，这也适用于 GLSurfaceView、RSSurfaceView 和 VideoView，它们都继承自 SurfaceView）。在处理其他视图时，它会暴露出许多奇怪的行为。使用 View.setVisibility() 是这些问题之一。显然，SurfaceView 并未设计为与其他视图一起使用（尽管官方文档说它应该如此），而是作为视频、游戏或 OpenGL 内容的独立视图。

对于可见性问题，我发现使用 View.GONE 而不是 View.INVISIBLE 可以解决它。如果您不想使用 GONE，请尝试更改焦点（并返回之前的焦点），或更改其他状态。目标是以某种方式唤醒底层 UI 系统。

简而言之：当您的视图发生奇怪的事情并且您在某处有一个 SurfaceView（或子类）时，请尝试将其替换为其他内容，这样您就不会浪费时间搜索您做错了什么（并且没有错误的信念）。这样一来，你就知道 SurfaceView 是罪魁祸首，你可以用漂亮的评论绕过它，毫不犹豫地对它撒尿。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-18T20:58:45.247

作为记录：我遇到了这个问题，尝试了一堆随机的东西（感谢亚历克斯！），在我的情况下，解决它的方法是在`seekBar.requestLayout()`拒绝显示的搜索栏上的 setVisible 之后直接做的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-14T07:50:52.063

这是我的解决方案

```
setAlpha(0)
btnName.setAlpha(0) 
```

适用于所有视图，例如 => Buttons - Images - Texts and ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-30T20:53:51.087

我（很烦人）在 SurfaceView 预览顶部有一个按钮时遇到了类似的困难，不得不将按钮放在相对布局中并使相对布局可见/不可见。对于遇到同样问题的其他人来说，可能值得一试。

...而且我还必须在 findViewById 之后以编程方式调用要被带到的布局：buttonLayout.bringToFront()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-08T11:26:12.613

在我的情况下`View.VISIBLE/View.GONE`并不总是工作。当我切换到它时，`View.VISIBLE/View.INVISIBLE`它开始按预期工作。

# javascript - 为下一次实例化设置的主干视图属性？

> ID：11236337
> 
> 赞同：3
> 
> 时间：2012-06-27T23:51:53.403
> 
> 标签：javascript, backbone.js, backbone-views

我有一个具有`tooltip`属性的视图。我想在`initialize`or上动态设置该属性`render`。但是，当我设置它时，它会出现在该视图的下一个实例中，而不是当前的：

```
 var WorkoutSectionSlide = Parse.View.extend( {      
        tag : 'div',
        className : 'sectionPreview',
        attributes : {},

        template : _.template(workoutSectionPreviewElement),

        initialize : function() {
//          this.setDetailsTooltip(); // doesn't work if run here either
        },

        setDetailsTooltip : function() {
            // build details
            ...

            // set tooltip
            this.attributes['tooltip'] = details.join(', ');
        },

        render: function() {            
            this.setDetailsTooltip(); // applies to next WorkoutViewSlide

            // build firstExercises images
            var firstExercisesHTML = '';
            for(key in this.model.workoutExerciseList.models) {
                // stop after 3
                if(key == 3)
                    break;
                else
                    firstExercisesHTML += '<img src="' +
                        (this.model.workoutExerciseList.models[key].get("finalThumbnail") ?
                                this.model.workoutExerciseList.models[key].get("finalThumbnail").url : Exercise.SRC_NOIMAGE) + '" />';
            }

            // render the section slide
            $(this.el).html(this.template({
                workoutSection : this.model,
                firstExercisesHTML : firstExercisesHTML,
                WorkoutSection : WorkoutSection,
                Exercise : Exercise
            }));

            return this;
        }
    }); 
```

这是我初始化视图的方式：

```
// section preview
$('#sectionPreviews').append(
    (new WorkoutSectionPreview({
        model: that.workoutSections[that._renderWorkoutSectionIndex]
    })).render().el
); 
```

如何`attribute`在当前视图上动态设置我的（工具提示），为什么它会影响*下一个*视图？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T13:28:17.730

您可以将`attribute`属性定义为返回对象作为结果的函数。因此，您可以动态设置属性。

```
var MyView = Backbone.View.extend({
    model: MyModel,
    tagName: 'article',
    className: 'someClass',
    attributes: function(){
        return {
            id: 'model-'+this.model.id,
            someAttr: Math.random()
        }
    }
}) 
```

我希望它有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T02:34:02.493

我认为你的问题就在这里：

```
var WorkoutSectionSlide = Parse.View.extend( {      
    tag : 'div',
    className : 'sectionPreview',
    attributes : {} // <----------------- This doesn't do what you think it does 
```

`.extend({...})`您最后放入的所有内容`WorkoutSectionSlide.prototype`都不会复制到实例中，而是通过原型由所有实例共享。在您的情况下，结果是您拥有一个`attributes`由所有`WorkoutSectionSlide`s 共享的对象。

此外，视图[`attributes`](http://documentcloud.github.com/backbone/#View-attributes)仅在[构建](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1168)对象时使用：

```
var View = Backbone.View = function(options) {
  this.cid = _.uniqueId('view');
  this._configure(options || {});
  this._ensureElement();
  this.initialize.apply(this, arguments);
  this.delegateEvents();
}; 
```

[`_ensureElement`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1291)调用是使用的东西，你`attributes`会注意到它在`initialize`被调用之前出现。该顺序与原型行为相结合是您的属性出现在视图的*下一个*实例上的原因。这`attributes`实际上适用于静态属性，您的`this.$el.attr('tooltip', ...)`解决方案是处理动态属性的好方法。

# javascript - 有没有办法用 Backbone 捕获所有不匹配的路由？

> ID：11236338
> 
> 赞同：41
> 
> 时间：2012-06-27T23:51:55.120
> 
> 标签：javascript, backbone.js, router

我希望有一个'catch all' 路由，该路由在没有其他定义的路由匹配时运行。一种 404 NotFound 错误处理程序。

我试过添加这个，它可以工作，但会阻止其他路由匹配：

```
this.route(/(.*)/, 'notFound', this.notFound); 
```

以前有人解决过这个问题吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-28T02:17:47.353

为了完整起见，在这里回答。

你可以通过两种方式做到这一点。使用 定义正则表达式`route()`，如问题中所示。但是，由于[这个错误](http://github.com/documentcloud/backbone/issues/1463)，您需要通过该`route()`方法定义所有路由，并且以相反的顺序（顶部的总括）。这会阻止您使用路由哈希，因此（我的）首选方法是：

```
routes: {
  'users/search': 'searchUsers',
  'users/:id': 'loadUser',

  '*notFound': 'notFound'
} 
```

键`'*notFound'`实际上可以是任何以`*`. 您只需要在 之后的字符`*`来防止解析错误。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-13T21:16:35.053

还有另一种可以说更简单/更优雅的方法来解决这个问题。 `Backbone.History.start()`根据是否匹配路由返回真或假。所以，如果你这样做：

```
if (!Backbone.history.start()) router.navigate('404', {trigger:true}); 
```

而不是通常的：

```
Backbone.History.start(); 
```

它将与其他答案具有相同的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-02T19:09:24.913

这个非常小的插件完成了它的工作：[https ://github.com/STRML/backbone.routeNotFound](https://github.com/STRML/backbone.routeNotFound)

这是迄今为止我发现的解决此问题的最优雅和最强大的方法，但是请记住，使用它会弄乱 Backbone 的内部结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T00:04:06.927

如果没有您当前路由代码的示例，我会假设确保您的全部路线是最后一条路线应该适合您

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T23:59:24.667

只需将其添加为列表中的最后一条路线即可。这样它只会被匹配为后备选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-07T21:20:21.883

您可以像这样将其破解到主干：

```
var _loadUrl = Backbone.history.loadUrl;
Backbone.history.loadUrl = function (fragment) {
    var result = _loadUrl.apply(Backbone.history, fragment);
    // the loadUrl returns false if no route was found.
    if(!result){
        // call 404 route on router if it exists.
        var handler = Backbone.history.handlers.filter( o => o.route.test("404") )
        if(handler.length) {
            Backbone.history.navigate("/404")

        }
    }
} 
```

然后在您的路由器中，您可以这样做：

```
var Router = Backbone.Router.extend({
    routes: {
        "404": "pageNotFound"
    },

    pageNotFound: function () {
        alert("trigger pageNotFound route")
    }
}); 
```

* * *

## 回答 #7

> 赞同：-18
> 
> 时间：2012-06-28T00:02:03.513

我觉得这个不应该通过javascript来解决，应该是语言来解决，比如php。在服务器端处理文字，只要有条件就可以响应header错误号404

# ruby-on-rails - 如何从按 ID 的特定顺序排序的记录数组中获取 ActiveRecord::Relation？

> ID：11236339
> 
> 赞同：3
> 
> 时间：2012-06-27T23:52:11.180
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一个 Rails 引擎，它在所选模型上定义了一个类方法`top(count)`。此方法的作用是`count`从 Redis 中的排序集 (ZSET) 中获取 ID。这个想法是这个模型的每个项目都有一个分数，这个方法是返回“最好”的记录。该方法基本上如下所示：

```
def self.top(count = 1)
  ids = redis.zrevrange(self.score_set, 0, count - 1)
  items = self.find ids

  if count == 1
    return items.first
  else
    return items.sort { |x, y| ids.index(x.id) <=> ids.index(y.id) }
  end
end 
```

如您所见，我目前在事后对记录进行排序，因为数据库（或适配器）在通过多个 ID 查找时往往不会保持顺序。例如，`Model.where('ID IN (?)', ids)`将按 ID 升序而不是通过 ID 的顺序进行排序。

对项目进行排序会返回一个`Array`，但我希望这个方法返回一个`ActiveRecord::Relation`，以便我的用户可以将它与其他 ActiveRecord 查询方法链接起来。有没有办法可以使用内置的 ActiveRecord 查询方法来维护我的 ID 数组的顺序？或者，有没有办法`ActiveRecord::Relation`从记录数组构造一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T00:34:15.310

这实际上取决于您使用的底层数据库。我不认为 Rails 有一个很好的方法来做到这一点。

我有一个应用程序，我正在做和你一样的事情。将 id 存储在 Redis ZSET 中，然后需要按该顺序获取它们。由于我们使用的是 MySql，我们可以利用[字段函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)。

```
Model.where('id in (?)', ids).order("field(id, #{order})") 
```

PS：确保您的`order`变量已消毒！

# c++ - 如何对嵌套类型进行部分模板特化？

> ID：11236344
> 
> 赞同：1
> 
> 时间：2012-06-27T23:52:44.620
> 
> 标签：c++, templates, partial-specialization

我有一个模板类`Converter`，我想做一个部分专业化。棘手的部分是我想将它专门化到`MyFoo::Vec`可以`MyFoo`再次专门化为模板参数的地方。如果这听起来令人困惑，也许代码本身使它更清晰：

```
#include <iostream>
#include <vector>

template<class To>
struct Converter {
  Converter(int from, To& to) {
    to = To(from);
  }
};

template<class T>
struct Foo {
  typedef std::vector<T> Vec;
  Vec vec;
};

// Template specialization: Convert from 'From' to 'MyFoo::Vec':                                                                
template<class MyFoo>
struct Converter<typename MyFoo::Vec > { // Error: template parameters not
                                         // used in partial specialization
  Converter(int from, typename MyFoo::Vec& to) {
    to.push_back(typename MyFoo::Vec::value_type(from));
  }
};

int main() {
  Foo<float> myfoo;
  Converter<Foo<float> > converter(2, myfoo.vec);
} 
```

这只是一个源自我的实际代码的迷你示例。这个问题不是关于这种转换器有多有用。鉴于我需要这样的转换器及其专业化，我只是对正确的语法感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:16:42.280

它不能直接完成。考虑从嵌套类型到封闭类型是不可能的，原因有两个：首先，映射可能不是唯一的（多个`Foo`可能具有相同的嵌套`Vec`类型），即使它是编译器也必须测试所有现有类型（即它不能从实例化推断）。

你想要做的实际上可以用 SFINAE 来完成（未经测试的代码，你可以[在这里](http://www.boost.org/doc/libs/1_49_0/libs/utility/enable_if.html)阅读更多）：

```
template <typename T, typename V = void>
struct Converter {};             // Default implementation

template <typename T>
struct Converter<T, T::Vec> {};  // specific if has nested Vec 
```

# ruby-on-rails - ActionMailer 的邮件方法在 Heroku 上有效，但在 localhost 上无效？

> ID：11236353
> 
> 赞同：0
> 
> 时间：2012-06-27T23:54:43.100
> 
> 标签：ruby-on-rails

该错误似乎非常不具描述性：

```
failed with ArgumentError: A sender (Return-Path, Sender or From) required to send a message 
```

我认为这不是真正的问题，因为即使我设置了默认值，我也尝试指定“来自”。此外，localhost 和 Heroku 的代码是相同的...

```
def invite_dealer(auction, name, email, dealer)
  return false if dealer.bids.where("auction_id = ?", auction.id).present?
  @name = name  #used on template
  @email = email  
  @auction = auction  #this too
  mail(:to => @email, :subject => "New Auction - #{auction.car.name}", :from => "realaddressishereonmymachine@ourdomain.com")
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:56:10.553

如果未从方法调用方法，则`failed with ArgumentError: A sender (Return-Path, Sender or From) required to send a message`可能发生错误。`mail``invite_dealer`

因此，在调用方法之前将条件`return`放入方法中是个坏主意。`invite_dealer``mail`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:12:16.787

将此行添加到 development.rb 似乎已修复它 - 奇怪的是所有其他邮件方法都在工作：

```
Rails.application.routes.default_url_options[:host]= 'localhost:3000' 
```

# android - 在 Android 应用程序中使用自定义数据库

> ID：11236354
> 
> 赞同：-4
> 
> 时间：2012-06-27T23:54:57.583
> 
> 标签：android, sqlite

我正在为我大学的 IT 部门制作一个应用程序。我想使用我已经用 SQLite 浏览器创建的数据库（sqlite）。不幸的是，尽管我到处搜索，但我似乎找不到任何好的教程来帮助我。我想做的只是简单地打开我的数据库文件并访问它以根据我每次想要的内容获取数据。有没有办法实现类似的东西，如果是的话，有人可以告诉我一个有效的方法，因为我是 Android 编程的新手。事实上，你总是需要有人教你这样的东西！提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:15:15.837

如果您想在您的应用程序之外创建一个预加载的数据库并稍后在您的应用程序中使用它，您必须将它放在您的`assets`目录中，然后在您的应用程序`databases`第一次启动时将其复制到您的应用程序目录。

这是因为作为一项安全措施，在真实（无根）设备上，除了您自己的应用程序之外，什么都不能访问它们的数据目录（其中包含数据库目录）。

有一个很好的教程，用于在应用程序之外创建/复制您自己的数据库并将其复制到应用程序数据库[目录](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:06:51.743

您可以通过设置扩展类来管理 android 上的数据库，该类`SQLiteOpenHelper`将管理数据库（定义表、每个表的列、创建数据库...），并使用另一个与数据库和您的数据库交互的类数据。

您可以看到该教程比我解释得更好： [http ://www.vogella.com/articles/AndroidSQLite/article.html#overview](http://www.vogella.com/articles/AndroidSQLite/article.html#overview)

玩得开心 ：）

# android-layout - 当 ListView 不填满不同手机上的屏幕时没有背景

> ID：11236357
> 
> 赞同：0
> 
> 时间：2012-06-27T23:55:25.833
> 
> 标签：android-layout, android-listview

我有一个我正在整合的应用程序，并且我有它的背景。顶部有一个标题，中间有一个 ListView。当我在中间有一个至少没有屏幕那么大的列表时，它只会显示灰色而不是父布局的背景。奇怪的是，这不会发生在我的旧手机上，即使列表没有，背景也会填满整个屏幕。这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- This is the xml for HomeActivity, more information in HomeActivity.java -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/common_aboutLayout"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg">

    <!-- This is the header on the top of the home screen -->
    <LinearLayout android:id="@+id/dynamicBanner"
        android:layout_height="wrap_content" 
        android:gravity="center"
        android:background="@drawable/header" 
        android:layout_width="fill_parent">

        <!-- This is the temp pop-up on start -->
        <TextView android:text="@+id/TextView01"
            android:id="@+id/titleText" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:textColor="#FFFFFF" 
            android:visibility="invisible"
            android:textStyle="bold" 
            android:typeface="sans" 
            android:ellipsize="end"
            android:textSize="18sp" 
            android:gravity="center_vertical|center_horizontal">
        </TextView>
    </LinearLayout>

    <!-- This is the layout of the list of ringtones. -->
    <ListView android:id="@+id/homeListView" 
        android:layout_width="fill_parent" 
        android:layout_height="0dp"
        android:layout_weight="1">
    </ListView>

    <LinearLayout android:id="@+id/adLayout"
        android:layout_width="fill_parent" 
        android:layout_height="0dp">
        <com.admob.android.ads.AdView android:id="@+id/ad"
            admob:textColor="#FFFFFF" 
            admob:keywords="Android application"
            android:layout_width="fill_parent" 
            android:layout_gravity="bottom|center"
            admob:backgroundColor="#666666" 
            admob:refreshInterval="30"
            android:layout_height="0dp" />
    </LinearLayout>
</LinearLayout> 
```

当窗口第一次打开时，TextView 只是一个临时的东西。

只是寻求一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:29:54.623

将所有视图放入RelativeLayout。然后将此admob布局并添加一个标签以将其置于布局底部

```
like
        android:layout_alignParentBottom="true"    

<LinearLayout android:id="@+id/adLayout"
    android:layout_width="fill_parent" 
    android:layout_height="0dp">
    <com.admob.android.ads.AdView android:id="@+id/ad"
        admob:textColor="#FFFFFF" 
        admob:keywords="Android application"
        android:layout_width="fill_parent" 
        android:layout_gravity="bottom|center"
        admob:backgroundColor="#666666" 
        admob:refreshInterval="30"
        android:layout_height="0dp" />
</LinearLayout>

 and then Header part inside the relative layout 
```

android:layout_alignParentTop="true"

并把 ListView 和

```
 android:layout_above="@+id/adLayout"
 android:layout_below=HEADERVIEW 
```

# php - 我的 PHP 应用程序的正确设计模式是什么？

> ID：11236358
> 
> 赞同：5
> 
> 时间：2012-06-27T23:55:34.420
> 
> 标签：php, regex, oop, design-patterns

我一直在努力寻找实现我的系统的好方法，该系统基本上与字符串中的节目的季节和剧集编号相匹配，您可以在此处查看当前的工作代码：[https ://github.com/huddy/tvfilename](https://github.com/huddy/tvfilename)

我目前正在重写这个库，并想要一种更好的方式来实现匹配的发生方式，目前它的工作方式基本上是：

有一个包含类的文件夹（称为处理程序），每个处理程序都是一个实现接口以确保调用 match() 方法的类；存在，此匹配方法使用存储在该处理程序类（其中有很多）的属性中的正则表达式来尝试匹配季节和剧集。

该类通过将每个处理程序实例化为存储在属性中的数组来加载所有这些处理程序，当我想尝试匹配一些字符串时，该方法将遍历这些对象调用 match(); 然后返回第一个返回 true 的结果集，其中包含与之匹配的季节和剧集。

我真的不喜欢这种方式，这对我来说有点 hacky，我希望设计模式可以提供帮助，我的最终目标是使用最佳实践来做到这一点，我想知道我应该使用哪一个？

存在的其他问题是：

*   多个处理程序可以匹配一个字符串，因此它们必须是为了防止更贪婪的那些首先匹配，不确定这是否可以解决，因为某些正则表达式模式必须是贪婪的，但可能是一个评分系统，某事这显示了匹配正确可能性的百分比，但我不知道如何实际实现这一点。

*   如果实例化所有这些处理程序是一种好方法，我不是，速度很重要，但使用最佳实践和坚持设计模式来创建好的、可扩展和可维护的代码是我的最终优先事项。值得注意的是，处理程序类有时会做其他事情，而不仅仅是正则表达式匹配，它们有时会通过删除常用词等来准备要匹配的字符串。

为任何帮助而欢呼比利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T18:29:20.370

为每个正则表达式创建一个类非常低效，您在这里将类与数据混淆。您可以将所有正则表达式存储在配置数组或单独的类或 XML 文件中 - 没关系。然后一个方法可以接受所有正则表达式，遍历它们并执行匹配。如果一个季节并不总是匹配[1]，您可以使用命名子模式 - 这将解决该问题。

至于您的模式顺序问题，您可以简单地将所有模式按您喜欢的顺序排列 - 从最具体的模式到更一般的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:25:52.887

您可以调整此模式以实现对 PHP[的复杂案例分析。](http://blogs.southworks.net/dgeffner/2011/09/26/implementing-complex-case-analysis/)这或多或少是你一直在做的事情。您定义所有案例，实现一个条件，说明案例何时适用，以及当您在该案例中时如何解决问题。该模式将允许您决定在多个案例适用时该怎么做（选择一个，优先考虑另一个，或者任何您想要的）。

如果您将格式命名为 S01E01 之类的更好的格式，我也是一个好主意

```
SddEdd
SnnEnn
SDigitDigitEDigitDigit
STwoDigitsETWoDigits 
```

而不是格式1，格式2。您还可以稍微修改模式以针对案例的条件和解决方案使用对象实例，因此您将能够使用单个类 new RegexpCase("S(?:\d{ 2})E(?:\d{2})"); 以及所有其他不只是带有类的正则表达式来解决该案例的案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:18:38.823

我认为您需要根据您想要的参数为您的模式顺序设置一个偏好顺序。我认为第二个答案确实很好地回答了您的问题。而且您的代码似乎做得很好。看起来写得很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:23:00.237

我个人更喜欢在这种情况下使用单独的类，如果您采用这种方法（即，如果您确实需要操作字符串），您的代码库将更加灵活。如果您看一下 Zend 如何实现 Zend_Validate 和 Zend_Filter ，它们与当前实现有一个非常相似的方法（循环在类上运行 ->validate() 和 ->filter() 的属性）。

我会有一个类似于这样的结构：

*   App_Tv_Match
*   App_Tv_Match_Abstract
*   App_Tv_Match_Collection
*   App_Tv_Match_SXXXXX
*   App_Tv_Match_SeasonXEpisodeX

（但是，您的命名可能会激怒这些课程）。

但是，在摘要中，我将有一个类似于此的设置：

```
Abstract Class App_Tv_Match_Abstract
{
     protected $_returnOnMatch = false;
     protected $_priority      = 1;
} 
```

我的 App_Tv_Match_Collection 类将注入匹配类 - 然后集合类将使用匹配类处理排序和匹配。如果 Match 类将“returnOnMatch”标记为 true，那么如果匹配，我将停止尝试并返回这个（即对于非贪婪的），但是如果没有匹配的 returnOnMatch 类，那么我将返回具有最高优先级的那个（或者使用排序，或集合类中的简单循环）。

# ruby-on-rails - 使用 AJAX 调用来更新 Rails 页面而不刷新？

> ID：11236360
> 
> 赞同：0
> 
> 时间：2012-06-27T23:55:45.593
> 
> 标签：ruby-on-rails, jquery

我的网站上有一个页面，用户可以通过接受或拒绝邀请来响应邀请。

他们的响应以布尔值“接受”的形式存储在数据库中，并用于将“选定”或“未选定”类（选定使文本变为橙色）应用于“参加”div 或“未参加”div。

```
<% @going, @not_going = invite.accepted ? ['selected','not_selected'] : ['not_selected','selected'] %>

    <%= link_to(outing_invite_accept_path( { :outing_id => invite.outing_id, :invite_id => invite.user_id } )) do %>
            <div class="attending_div <%= @going %>">
                attending
            </div>
    <%end %>
    <%= link_to(outing_invite_decline_path( { :outing_id => invite.outing_id, :invite_id => invite.user_id } )) do %> 
            <div class="attending_div <%= @not_going %>">
                not attending</div>
            </div>
    <% end %> 
```

当任一 div 被点击时，它被转移到适当的控制器动作：

```
def invite_accept
    @outing = Outing.find(params[:outing_id])
    @invite = OutingGuest.find_by_outing_id_and_user_id(params[:outing_id], params[:invite_id])
    @invite.update_attribute(:accepted, true)
    redirect_to({:action => "index"})
end  

def invite_decline
    @outing = Outing.find(params[:outing_id])
    @invite = OutingGuest.find_by_outing_id_and_user_id(params[:outing_id], params[:invite_id])
    @invite.update_attribute(:accepted, false)
    redirect_to({:action => "index"})
end 
```

和现在一样，这段代码工作得很好。但它需要刷新索引页面才能生效。

我知道可以使用附加到适当 div 上的侦听器的 jQuery ajax 调用来更新页面而无需刷新，但我不知道这样的调用会是什么样子，或者从哪里开始，真的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T00:23:42.163

您想使用铁路的 link_to `:remote => true`。

见[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

为了处理回调，您可以绑定到将触发的某些事件。例如：

```
<%= link_to "Click Me!", some_path, :class => 'ajax', :remote => true %>

<script>
  jQuery(function($) {
    $("a.ajax")
      .bind("ajax:loading", console.log('loading'))
      .bind("ajax:complete", console.log('complete'))
      .bind("ajax:success", function(event, data, status, xhr) {
        console.log(data);
      })
      .bind("ajax:failure", function(xhr, status, error) {
        console.log(error);
      });
  });
</script> 
```

这个页面也写得很好：[http ://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/)

# iphone - 在 UIViewController 上显示 clearColor UIViewController

> ID：11236367
> 
> 赞同：151
> 
> 时间：2012-06-27T23:56:32.970
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, storyboard

我有一个`UIViewController`视图作为另一个视图之上的子视图/模态`UIViewController`，例如子视图/模态应该是透明的，并且添加到子视图的任何组件都应该是可见的。问题是我的子视图显示黑色背景而不是具有clearColor。我正在尝试将`UIView`其设置为 clearColor 而不是黑色背景。有人知道它有什么问题吗？任何建议表示赞赏。

**第一视图控制器.m**

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];

[vc setModalPresentationStyle:UIModalPresentationFullScreen];
[self presentModalViewController:vc animated:NO]; 
```

**第二视图控制器.m**

```
- (void)viewDidLoad 
{
     [super viewDidLoad];
     self.view.opaque = YES;
     self.view.backgroundColor = [UIColor clearColor];
} 
```

* * *

**已解决**：我解决了这些问题。它适用于 iPhone 和 iPad。没有黑色背景的模态视图控制器只是 clearColor/transparent。我唯一需要更改的就是替换`UIModalPresentationFullScreen`为`UIModalPresentationCurrentContext`. 那是多么简单！

**第一视图控制器.m**

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
vc.view.backgroundColor = [UIColor clearColor];
self.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentViewController:vc animated:NO completion:nil]; 
```

* * *

**注意：**如果您使用以下`modalPresentationStyle`属性`navigationController`：

**第一视图控制器.m**

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
vc.view.backgroundColor = [UIColor clearColor];
self.navigationController.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentViewController:vc animated:NO completion:nil]; 
```

* * *

**注意：坏消息是上面的解决方案在 iOS 7 上不起作用。好消息是我修复了 iOS7 的问题！我向某人寻求帮助，他是这样说的：**

*当以模态方式呈现视图控制器时，iOS 会在其呈现期间从视图层次结构中移除其下方的视图控制器。虽然模态显示的视图控制器的视图是透明的，但它下面除了黑色的应用程序窗口之外什么都没有。iOS 7 引入了一种新的模态呈现样式，`UIModalPresentationCustom`这会导致 iOS 不会移除呈现的视图控制器下方的视图。但是，为了使用这种模态演示样式，您必须提供自己的转换委托来处理演示和关闭动画。这在 WWDC 2013 [https://developer.apple.com/wwdc/videos/?id=218](https://developer.apple.com/wwdc/videos/?id=218)的“使用视图控制器的自定义转换”演讲中进行了概述，其中还介绍了如何实现您自己的转换委托。*

您可能会在 iOS7 中看到我对上述问题的解决方案：[https ://github.com/hightech/iOS-7-Custom-ModalViewController-Transitions](https://github.com/hightech/iOS-7-Custom-ModalViewController-Transitions)

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2014-10-15T16:21:28.033

**iOS8+**

在 iOS8+ 中，您现在可以使用新的 modalPresentationStyle UIModalPresentationOverCurrentContext 来呈现具有透明背景的视图控制器：

```
MyModalViewController *modalViewController = [[MyModalViewController alloc] init];
modalViewController.modalPresentationStyle = UIModalPresentationOverCurrentContext;           
[self presentViewController:modalViewController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2012-06-28T21:12:36.147

**已解决**：我解决了这些问题。它适用于 iPhone 和 iPad。没有黑色背景的模态视图控制器只是 clearColor/transparent。我唯一需要更改的是将 UIModalPresentationFullScreen 替换为 UIModalPresentationCurrentContext。那是多么简单！

第一视图控制器.m

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
    vc.view.backgroundColor = [UIColor clearColor];
    self.modalPresentationStyle = UIModalPresentationCurrentContext;
    [self presentViewController:vc animated:NO completion:nil]; 
```

* * *

**注意：**如果您使用的是 navigationController 的 modalPresentationStyle 属性：

第一视图控制器.m

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
    vc.view.backgroundColor = [UIColor clearColor];
    self.navigationController.modalPresentationStyle = UIModalPresentationCurrentContext;
    [self presentViewController:vc animated:NO completion:nil]; 
```

* * *

**注意：坏消息是上面的解决方案在 iOS 7 上不起作用。好消息是我修复了 iOS7 的问题！我向某人寻求帮助，他是这样说的：**

*当以模态方式呈现视图控制器时，iOS 会在其呈现期间从视图层次结构中移除其下方的视图控制器。虽然模态显示的视图控制器的视图是透明的，但它下面除了黑色的应用程序窗口之外什么都没有。iOS 7 引入了一种新的模态呈现样式 UIModalPresentationCustom，它会导致 iOS 不会移除呈现的视图控制器下方的视图。但是，为了使用这种模态演示样式，您必须提供自己的转换委托来处理演示和关闭动画。这在 WWDC 2013 [https://developer.apple.com/wwdc/videos/?id=218](https://developer.apple.com/wwdc/videos/?id=218)的“使用视图控制器的自定义转换”演讲中进行了概述，其中还介绍了如何实现您自己的转换委托。*

您可能会在 iOS7 中看到我对上述问题的解决方案：[https ://github.com/hightech/iOS-7-Custom-ModalViewController-Transitions](https://github.com/hightech/iOS-7-Custom-ModalViewController-Transitions)

* * *

## 回答 #3

> 赞同：114
> 
> 时间：2014-12-15T15:09:56.040

所以对于纯粹的视觉思想家和故事板爱好者，你可以这样做：

**1\. 呈现视图控制器**

![定义上下文](../Images/0794e7dae56ec63308073a4490dcf8f2.png)

**2\. 呈现视图控制器**

![演示文稿：在当前上下文中](../Images/a18100d024d707cac6fbc14b37399670.png)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2016-11-28T10:22:29.747

Swift 3 & iOS10 解决方案：

```
//create view controller
let vc = UIStoryboard(name: "Main", bundle: nil).instantiateViewController(withIdentifier: "RoadTripPreviewViewController")
//remove black screen in background
vc.modalPresentationStyle = .overCurrentContext
//add clear color background
vc.view.backgroundColor = UIColor.clear
//present modal
self.present(vc, animated: true, completion: nil) 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-07-24T14:47:56.803

这是来自使用控制拖动 segue 的 xCode 7 beta 4。只需将目标的背景设置为清除，并将 IB 中的 segue 属性设置为这样（注意。演示文稿也可以是“全屏显示”）：

[![在此处输入图像描述](../Images/8e40f7bce6df1ad30115ac90dec44680.png)](https://i.stack.imgur.com/ll10s.png)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-08-11T11:33:00.023

我发现让它在 iOS7 和 iOS8 上工作的最简单方法是添加将 presentationStyle 设置为 UIModalPresentationOverCurrentContext 在 modallyPresentedVC （您要以模态方式呈现的 ViewController ），因为 iOS8：

```
[modallyPresentedVC setModalPresentationStyle:UIModalPresentationOverCurrentContext];
[modallyPresentedVC.navigationController setModalPresentationStyle:UIModalPresentationOverCurrentContext]; 
```

和 UIModalPresentationCurrentContext on presentingVC（呈现模态呈现的控制器）因为 iOS7：

```
[presentingVC setModalPresentationStyle:UIModalPresentationCurrentContext];
[presentingVC.navigationController setModalPresentationStyle:UIModalPresentationCurrentContext]; 
```

因为 iOS7 和 iOS8 的处理方式不同。当然，如果您不使用navigationController 属性，则不必设置它。希望有帮助。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-01-03T15:49:39.910

Swift2 版本：

```
let vc = self.storyboard!.instantiateViewControllerWithIdentifier("YourViewController") as! YourViewController
vc.view.backgroundColor = UIColor.clearColor()
vc.modalPresentationStyle = UIModalPresentationStyle.OverFullScreen // orOverCurrentContext to place under navigation
self.presentViewController(vc, animated: true, completion: nil) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-12-11T19:12:45.213

另一种方式（无需创建自定义过渡并适用于 iOS 7）

**使用情节提要：**

创建具有自由大小的子视图控制器，将视图宽度设置为 500x500（例如）并添加下一个方法：

```
- (void)viewWillLayoutSubviews{
    [super viewWillLayoutSubviews];
    self.view.superview.bounds = CGRectMake(0, 0, 500, 500);
    self.view.superview.backgroundColor = [UIColor clearColor];
} 
```

然后使用 Form Sheet 创建一个 Modal segue 并对其进行测试。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-08-10T15:40:18.033

带有自定义 segue 的 iOS 7 解决方案：

```
CustomSegue.h
#import <UIKit/UIKit.h>

    @interface CustomSegue : UIStoryboardSegue <UIViewControllerTransitioningDelegate, UIViewControllerAnimatedTransitioning>

    @end

CustomSegue.m
#import "CustomSegue.h"

@implementation CustomSegue

-(void)perform {

    UIViewController* destViewController = (UIViewController*)[self destinationViewController];
    destViewController.view.backgroundColor = [UIColor clearColor];
    [destViewController setTransitioningDelegate:self];
    destViewController.modalPresentationStyle = UIModalPresentationCustom;
    [[self sourceViewController] presentViewController:[self destinationViewController] animated:YES completion:nil];
}

//===================================================================
// - UIViewControllerAnimatedTransitioning
//===================================================================

- (NSTimeInterval)transitionDuration:(id <UIViewControllerContextTransitioning>)transitionContext {
    return 0.25f;
}

- (void)animateTransition:(id <UIViewControllerContextTransitioning>)transitionContext {

    UIView *inView = [transitionContext containerView];
    UIViewController* toVC = (UIViewController*)[transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];
    UIViewController* fromVC = (UIViewController *)[transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];

    [inView addSubview:toVC.view];

    CGRect screenRect = [[UIScreen mainScreen] bounds];
    [toVC.view setFrame:CGRectMake(0, screenRect.size.height, fromVC.view.frame.size.width, fromVC.view.frame.size.height)];

    [UIView animateWithDuration:0.25f
                     animations:^{

                         [toVC.view setFrame:CGRectMake(0, 0, fromVC.view.frame.size.width, fromVC.view.frame.size.height)];
                     }
                     completion:^(BOOL finished) {
                         [transitionContext completeTransition:YES];
                     }];
}

//===================================================================
// - UIViewControllerTransitioningDelegate
//===================================================================

- (id <UIViewControllerAnimatedTransitioning>)animationControllerForPresentedController:(UIViewController *)presented presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source {

    return self;
}

- (id <UIViewControllerAnimatedTransitioning>)animationControllerForDismissedController:(UIViewController *)dismissed {
    //I will fix it later.
    //    AnimatedTransitioning *controller = [[AnimatedTransitioning alloc]init];
    //    controller.isPresenting = NO;
    //    return controller;
    return nil;
}

- (id <UIViewControllerInteractiveTransitioning>)interactionControllerForPresentation:(id <UIViewControllerAnimatedTransitioning>)animator {
    return nil;
}

- (id <UIViewControllerInteractiveTransitioning>)interactionControllerForDismissal:(id <UIViewControllerAnimatedTransitioning>)animator {
    return nil;
}

@end 
```

基于高科技代码的解决方案。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-01-12T14:24:39.710

对我来说这有效：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main_iPhone" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"MMPushNotificationViewController"];

    vc.view.backgroundColor = [UIColor clearColor];
    self.modalPresentationStyle = UIModalPresentationCurrentContext;
#ifdef __IPHONE_8_0
    if(IS_OS_8_OR_LATER)
    {
        self.providesPresentationContextTransitionStyle = YES;
        self.definesPresentationContext = YES;
        [vc setModalPresentationStyle:UIModalPresentationOverCurrentContext];
    }
#endif

    [self presentViewController:vc animated:NO completion:nil]; 
```

`MMPushNotificationViewController`是透明视图控制器，我也将`MMPushNotificationViewController`视图颜色设置为 clearcolor。现在我所做的一切并制作了我的透明视图控制器。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-04-24T18:27:15.247

您还可以将窗口“重新添加”到视图中。

```
OneViewController *vc = [[OneViewController alloc] init];
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]) {
    [self presentViewController:vc animated:YES completion:nil];
} else {
    [self presentModalViewController:vc animated:YES];
}

[[[UIApplication sharedApplication] keyWindow] insertSubview:self.view atIndex:0]; 
```

通过这种方式，演示可以动画化。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-01-17T09:58:58.127

# 对于 iOS7

现在有一种方法可以使用 iOS7 自定义转换来实现这一点，这种方式：

```
MyController * controller = [MyController new];
[controller setTransitioningDelegate:self.transitionController];
controller.modalPresentationStyle = UIModalPresentationCustom;
[self controller animated:YES completion:nil]; 
```

要创建自定义过渡，您需要两件事：

*   一个 TransitionDelegate 对象（实现 `<UIViewControllerTransitionDelegate>`）
*   一个“AnimatedTransitioning”对象（实现`<UIViewControllerAnimatedTransitioning>`）

[您可以在本教程](http://www.doubleencore.com/2013/09/ios-7-custom-transitions/)中找到有关自定义转换的更多信息。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-02-06T12:36:07.157

**在iOS7**和**iOS8**上**运行良好**

 **```
UIViewController* vc=[[UIViewController alloc]initWithNibName:@"VC" bundle:nil];

vc.view.alpha=0.7;
[vc setModalPresentationStyle:UIModalPresentationOverCurrentContext];

self.navigationController.modalPresentationStyle = UIModalPresentationCurrentContext;

[self presentViewController:vc animated:NO completion:nil]; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-02-05T22:32:53.803

对于 iOS 7，并且只能通过使用 Interface Builder，它可以通过在模态演示中涉及的所有视图控制器上将 Presentation 设置为“Over Current Context”来完成。**即使对于导航控制器。**

例如，在所有这些视图控制器上设置它：

NavController -> RootViewController -> ModalViewController

![在此处输入图像描述](../Images/1b6c077ee56501f73dc770a93f9ece42.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-06-28T00:28:00.323

我没有经常玩 Storyboard/Interface builder，但我突然想到的是你告诉视图是清晰的颜色（即 100% alpha/透明）并且还告诉它是不透明的（ 0% α——完全固体）。这两件事似乎并不吻合。我会注释掉这`self.view.opaque = YES;`条线，然后看看它是否有效；）

啊，我刚刚想到的其他事情 - 您的视图控制器完全有可能具有 alpha 背景，但当然 alpha 将显示为程序的基本窗口或根视图控制器的颜色，这是由默认黑色。整个应用程序的基础层不能有透明背景——对什么透明？背后是什么？通过透明度必须有一些东西可以看到。那有意义吗？

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2015-10-14T11:21:33.723

只需在呈现视图中使用“self.modalPresentationStyle = UIModalPresentationCurrentContext;”

会正常工作:)**

# jquery - Webkit 边框半径动画裁剪

> ID：11236375
> 
> 赞同：3
> 
> 时间：2012-06-27T23:58:06.100
> 
> 标签：jquery, webkit, border, mask, css

我正在动画打开一个灯箱（没什么特别或疯狂的），并且在 Chrome、Opera 和 Safari 中遇到边框半径问题。所有其他浏览器（包括我测试过的移动浏览器）都可以正常工作。基本上，单击 DIV 后，灯箱会在打开时从一个边界半径动画到另一个边界半径。DIV 内的内容在动画（剪辑）期间溢出。其他浏览器对此没有问题，根据我所做的研究，Webkit 不尊重溢出：隐藏。

**这是打开灯箱的JS（点击事件内部）：**

```
$('#SC_Lightbox').css({
borderTopLeftRadius:'100px',
borderTopRightRadius:'100px',
borderBottomLeftRadius:'100px',
borderBottomRightRadius:'100px',
WebkitBorderTopLeftRadius:'100px',
WebkitBorderTopRightRadius:'100px',
WebkitBorderBottomLeftRadius:'100px',
WebkitBorderBottomRightRadius:'100px',
MozBorderRadius:'10px',
borderRadius:'10px'})
.animate({
'opacity':1,'width':'300px','height':'500px','top':'120px','left':'200px',
borderTopLeftRadius:'10px',
borderTopRightRadius:'10px',
borderBottomLeftRadius:'10px',
borderBottomRightRadius:'10px',
WebkitBorderTopLeftRadius:'10px',
WebkitBorderTopRightRadius:'10px',
WebkitBorderBottomLeftRadius:'10px',
WebkitBorderBottomRightRadius:'10px',
MozBorderRadius:'10px',
borderRadius:'10px'
},{duration:500,queue:false}); 
```

**这是灯箱的 CSS（加载后应用的所有内容）：**

```
#SC_Lightbox {
    background-color: #333333;
    border-radius: 12px 12px 12px 12px;
    display: block;
    height: 350px;
    left: 500px;
    opacity: 1;
    overflow: hidden;
    top: 20px;
    width: 500px;
    position: absolute;
    z-index: 99999999;
    line-height: 1;} 
```

另一个奇怪的事情是有问题的浏览器似乎也有问题动画/渲染 WebkitBorderBottomRightRadius ？？？

我还尝试了另一个论坛建议并补充说：

```
-webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC); 
```

强制溢出：隐藏在 Webkit 中，但不幸的是，这样做会删除一个盒子阴影，这也是一个非常不稳定的解决方案。

有人有想法么？谢谢！

# webmatrix - 使用 web deploy 在 webmatrix 中发布网站

> ID：11236376
> 
> 赞同：1
> 
> 时间：2012-06-27T23:58:07.697
> 
> 标签：webmatrix, webdeploy

如何使用 Web Deploy 在使用数据库的 Webmatrix 中发布我的网站？

我的连接字符串具有本地数据库的配置。我应该在使用 webmatrix 发布者发布之前更改配置吗？

是否有任何最佳实践可以避免在所有发布时间更改 Web 配置中的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:50:05.593

请关注这篇文章

[http://www.microsoft.com/web/post/web-development-101-part-9-deploying-your-site](http://www.microsoft.com/web/post/web-development-101-part-9-deploying-your-site)

您需要设置服务器数据库的连接字符串，而不是计算机上的本地数据库。

看看[在开发和生产环境中使用不同的 Web.config](https://stackoverflow.com/questions/305447/using-different-web-config-in-development-and-production-environment)来为环境开发和生产设置配置。

# r - R - 同时使用window core + linux core进行并行处理

> ID：11236379
> 
> 赞同：2
> 
> 时间：2012-06-27T23:59:08.010
> 
> 标签：r, parallel-processing

我一直在 linux（8 核）上使用库（多核）进行并行处理，但速度不够快（叹气..），所以我试图利用我的窗口工作站（8 核）。（因此，如果我可以同时使用这两个内核，它将使用 16 个内核）。似乎 foreach、snow、doSMP 用在 Window 上，而 multicore 经常用在 Linux 上。

任何人都可以分享使用这两个系统进行并行处理的经验或指出任何好的例子吗？

我尝试使用 SNOW，但在 Windows 版本 R 上找不到相关软件包（Rmpi）以将窗口连接到 linux 机器，这让我认为这可能是不可能的..

任何建议将不胜感激！

月亮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:35:00.910

我在 windows、linux 和 mac 机器的网络上使用了 doRedis 包和 foreach。它运行良好并且设置起来非常简单。

这应该是您开始所需的全部内容：http: [//cran.r-project.org/web/packages/doRedis/vignettes/doRedis.pdf](http://cran.r-project.org/web/packages/doRedis/vignettes/doRedis.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T05:40:57.400

正如 Joshua 已经评论的那样，SOCK 集群可以包含跨操作系统的节点。我已经看到这为同事工作。`makeSOCKcluster`有关如何执行此操作的示例，请参阅文档。

# c++ - WinRT 等效于 GetThreadLocale 和 GetACP

> ID：11236382
> 
> 赞同：0
> 
> 时间：2012-06-27T23:59:43.967
> 
> 标签：c++, winapi, windows-runtime

我需要使以下代码（来自 ICU）在 WinRT 上工作。失败发生在[GetThreadLocale](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318127%28v=vs.85%29.aspx)和[GetACP](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318070%28v=vs.85%29.aspx)。

```
elif U_PLATFORM_USES_ONLY_WIN32_API
   UErrorCode status = U_ZERO_ERROR;
   LCID id = GetThreadLocale();
   const char* locID = uprv_convertToPosix(id, &status);

   if (U_FAILURE(status)) {
       locID = "en_US";
   }
   return locID; 
```

和

```
#elif U_PLATFORM_USES_ONLY_WIN32_API
    static char codepage[64];
    sprintf(codepage, "windows-%d", GetACP());
    return codepage; 
```

旧的 Win32 函数和 WinRT 之间是否有转换表？

# winforms - 如何检测 Windows 窗体文本框的当前光标位置？

> ID：11236386
> 
> 赞同：0
> 
> 时间：2012-06-28T00:00:09.513
> 
> 标签：winforms, textbox

我正在尝试在 Windows 窗体应用程序中构建一个简单的 HTML 文本编辑器。我希望能够以编程方式检测文本光标在特定时刻的位置，以便我可以在该点以编程方式插入文本。

我原以为这是一件显而易见的事情，就像获取或设置当前文本光标位置的属性一样，但我还没有找到！那么如何找出那个光标在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:07:29.743

使用该`TextBox.SelectionStart`物业。对于最左边的位置，插入符号索引从 0 开始。

# mysql - mysql - 对于每一行

> ID：11236388
> 
> 赞同：3
> 
> 时间：2012-06-28T00:00:20.380
> 
> 标签：mysql, triggers

我写了一个插入触发器。呜。

下一步是我想在触发器运行后运行查询或过程。所以不是针对插入的每条记录，而是在插入之后。

我在哪里打这个电话？

```
DELIMITER $$
DROP TRIGGER /*!50033 IF EXISTS */ triggername $$

CREATE TRIGGER triggername
AFTER INSERT ON tableA
FOR EACH ROW 
BEGIN

/*This runs for each insert - I want it to run at the end of the trigger*/
CALL UpdateOtherStuff(NEW.fieldA, NEW.fieldB);

END$$ 
```

谢谢，

垫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:05:03.387

MySQL 触发器语法是有限的。您不能在同一张表上有多个触发器。您不能拥有数据库级触发器。

简而言之，您不能这样做，因为 MySQL 不知道您是插入 1000 个值还是仅插入一个。即使您从单个语句触发它们，它们也是独立的事件。

`FOR EACH ROW`是`CREATE TRIGGER`语法的固定部分，它不是可选的。

当我遇到同样的问题时，我实现了存储函数并使用这些函数来执行插入和更新代码。

函数和存储过程的限制很多，例如无法向它们传递可变数量的参数（就像您可以传递给插入/更新一样）或无法将 WHERE 子句传递给它们以便它们可以过滤它们正在影响。

但是您可以像这样克服过滤限制：

```
CREATE FUNCTION x(id INTEGER) ...

SELECT x(object_id) FROM objects WHERE ... 
```

我不确定 MySQL 是否会像在现场执行函数并拥有不需要在函数中重新选择它的对象数据一样优化这一点。但我认为它不会......它认为函数内的更新查询照常运行。

# objective-c - 为什么我的 NSAlert 中的 didEndSelector 没有被调用？

> ID：11236398
> 
> 赞同：0
> 
> 时间：2012-06-28T00:02:02.743
> 
> 标签：objective-c, macos, modal-dialog, switch-statement, nsalert

我不知道为什么我的 didEndSelector 没有被调用。有任何想法吗？

```
 - (void) showMonitorAlertIfNeeded {

    if (! self.monitorAlert && [self isHideMonitorAlert]) {

        self.monitorAlert = [MMAlertController monitorAlert];

        [[self.monitorAlert window] setTitle: [self applicationName]];

        [self.monitorAlert beginSheetModalForWindow: [NSApp keyWindow] 
                                    modalDelegate: self 
                                   didEndSelector: @selector(monitorAlertDidEnd:returnCode:contextInfo:) 
                                      contextInfo: nil];

        [[self.monitorAlert window] setLevel: NSScreenSaverWindowLevel];

    }
}

- (void) monitorAlertDidEnd: (NSAlert *) alert returnCode: (NSInteger) code contextInfo: (id) contextInfo {

    switch (code) {
        case NSAlertFirstButtonReturn:{
        }
            NSLog(@"FIRST BUTTON PRESSED");
            break;

        case NSAlertSecondButtonReturn:{ // don't show again.
            NSLog(@"SECOND BUTTON PRESSED");
            [[NSApp delegate]setIsHideMonitorAlert:NO];
        }

        break;

        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:33:40.320

如果`[MMAlertController monitorAlert]`返回一个`NSAlert`创建的，`alertWithMessageText:defaultButton:alternateButton:otherButton:informativeTextW‌​ithFormat:`那么你的开关实际上应该包含`NSAlertDefaultReturn`and `NSAlertAlternateReturn`。（如果它是以任何其他方式创建的，那么您的原始`switch`值是正确的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:12:38.207

尝试在开关之前插入这一行：

```
NSLog(@"code: %ld", code); 
```

# objective-c - AFNetworking 的 UIImageView 类别的预缓存图像

> ID：11236401
> 
> 赞同：8
> 
> 时间：2012-06-28T00:02:41.483
> 
> 标签：objective-c, ios, caching, afnetworking, nsurlcache

当我的应用程序加载时，我拉下 99 个对象的 JSON 表示。

每个对象都有一个“image_url”字段，我将其传递给 AFNetworking 的`setImageWithURLRequest`.

我的图像加载到 tableView 中，因此，只有前几个单元格请求他们的图像。直到我向下滚动，才会发出后续的图像请求。

一旦我拉下初始数据集，我希望能够启动一个后台进程，该进程出去并下载最初不可见的 95 个左右的对象，并以这样的方式缓存它们，当`setImageWithURLRequest`被调用时，它已经有一个缓存的图像可以从中提取。

AFImageCache 虽然是私有的，所以我不确定这是否可能。我知道我可以使用 NSURLCache 进行缓存，但是我会有两个独立的、隔离的缓存，这也不是很理想。

我唯一的选择是不使用 AFNetworking 的 UIImageView 类别吗？

这些答案让我这么想：

[iOS 使用 AFImageCache 缓存图像似乎不起作用](https://stackoverflow.com/questions/10469832/ios-caching-images-with-afimagecache-doesnt-seem-to-work)
[使用 AFNetworking 的 setImageWithURL 时如何配置缓存](https://stackoverflow.com/questions/10433403/how-to-configure-the-cache-when-using-afnetworkings-setimagewithurl)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-03T19:10:31.317

**请，*请*不要这样做。**

当我说这几乎肯定没有必要时，请相信我。

事实上，由于下载可能永远不会被查看的图像的压力增加，它可能会产生与预期相反的效果。

缓存是私有的有一个很好的理由——它只是为了加快滚动视图上的后续请求。只需让表格视图按要求下载图像，就可以了。如果有的话，您可以优化正在下载的图像的大小（确保正确的图像尺寸；智能压缩）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T17:07:35.190

我不会创建一堆 UIImageView 来实现您的目的，那将是一种非常低效的方法。

您可以添加自己的方法`UIImageView+AFNetworking.h`来实现此功能。我认为这将是最好的方法。一个未经测试的例子是：

```
+ (void) cacheImageWithURL:(NSURL *)url 
{
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
    [request setHTTPShouldHandleCookies:NO];
    [request setHTTPShouldUsePipelining:YES];

    AFImageRequestOperation *requestOperation = [[[AFImageRequestOperation alloc] initWithRequest:request] autorelease];
    [requestOperation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        [[[self class] af_sharedImageCache] cacheImage:responseObject forRequest:request];
    } 
    failure:^(AFHTTPRequestOperation *operation, NSError *error) {}];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T20:36:18.050

这是一个解决方案 - 创建一些`UIImageView`对象（但不要将它们添加为子视图），然后使用 AFNetworking 的 UIImageView 类别来获取图像并填充其内部缓存。

示例代码：

```
NSArray *strings = [NSArray arrayWithObjects:
                    @"http://i.imgur.com/IpQzE.png",
                    @"http://i.imgur.com/sDnLs.jpg",
                    nil];

for (NSString *string in strings) {
    UIImageView *imageView = [[[UIImageView alloc] init] autorelease];
    [imageView setImageWithURL:[NSURL URLWithString:string]];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T06:11:56.043

您可能要考虑[满载](https://github.com/foursquare/fully-loaded/)

一个简单的自我维护缓存是下载图像并保存到一个依赖于 url 的文件名。

每当您想从 url 加载图像时，请先尝试从硬盘读取 - 如果返回 nil，请继续使用图像下载器。

请记住清除您的图像缓存。

# ios - 确定用户是否通过广告链接安装了应用

> ID：11236405
> 
> 赞同：1
> 
> 时间：2012-06-28T00:03:36.500
> 
> 标签：ios, app-store, hyperlink, ads

我希望能够在通过另一个 iOS 应用程序或网站查看广告后，将用户是否已安装并随后启动我的应用程序联系起来。

应用商店 URL 是否有任何内容需要指定，该 URL 会延续到应用的启动中？

尝试这样做的一般做法是什么？

适用于 iOS 4.0+

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:50:21.293

尝试[飞天](https://apsalar.com/)。他们使用 UUID、IDFA 跟踪等多种方法来确定应用安装的来源（前提是您在广告系列中使用他们的自定义下载链接）

注意：这需要您在应用程序中安装他们的 SDK 或配置服务器到服务器跟踪。

他们还提供了一些很酷的分析数据。您可以结合您的广告系列来源进行同期群分析，以衡量哪个来源表现最佳。

以上所有内容都需要在应用程序中进行设置。请参阅他们网站上的文档。

我们将 Apsalar 用于我们的[项目管理应用程序](http://www.planningproapp.com/)

# jquery - jQuery：如何选择一个 div 并显示/隐藏它的嵌套 div

> ID：11236409
> 
> 赞同：0
> 
> 时间：2012-06-28T00:04:27.017
> 
> 标签：jquery, html

当用户单击其相应的父 DIV 时，我试图显示/隐藏 DIV。

HTML：

```
<div class="header" id="header_1"> </div>
  <div class="body" id="body_1"> </div>

<div class="header" id="header_2">  </div>
  <div class="body" id="body_2"> </div> 
```

jQuery：

```
$('.body')hide(); <--- hide all on load
$('.header').click(function(){
     var currentHeader = $(this).attr('id');

     //some logic to show the body div below the header that was clicked, and hide all the others 

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:06:26.507

隐藏所有`body`div，然后使用被点击的 div，获取下一个 div 应用了 body 类

[jsFiddle](http://jsfiddle.net/hDzrR/)

```
$('.header').click(function(){
     var currentHeader = $(this);
     // hide all the body divs
     $('.body').hide();
     // show the next body div
     currentHeader.next('.body').show();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:19:08.287

这是单击标题时显示/隐藏子元素的代码。[演示](http://jsfiddle.net/q3Spk/1/)

```
$('.body').hide();
$('.header').click(function() {
    if (!$(this).hasClass('Active')) {
        $(this).find('.body').show();//show child div
        $(this).addClass('Active');
    } else {
        $(this).find('.body').hide();//hide child div
        $(this).removeClass('Active');
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T00:20:30.437

```
$('body').on('click.headerClick', '.header:has(.body)', function (e) {
  $('.header .body').not($(this).find('.body').show()).hide();
}); 
```

*   此代码使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)，在 -element 上仅分配一个侦听器，`<body>`侦听具有 class 的任何元素上的单击事件`header`，并且至少有一个具有 class 的后代`body`。如果单击这样的元素，它会显示被单击的`header`具有 class的任何后代元素`body`，之后，它会隐藏所有具有 class`body`且祖先具有 class 的元素`header`。
*   点击事件是[命名空间](http://docs.jquery.com/Namespaced_Events)的。这使我们可以轻松地取消绑定事件处理程序，而不会与绑定到同一元素的其他事件处理程序发生冲突。

[演示在这里。](http://jsfiddle.net/aeULd/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T00:07:19.353

你的意思是这样的吗？

```
$(".header").on("click", function() {
    $(".body").not($(this).find(".body").show()).hide();
}); 
```

**演示：http:** [//jsfiddle.net/8UCma/](http://jsfiddle.net/8UCma/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T00:29:07.373

最简单的方法是隐藏所有元素，然后只显示当前元素：

```
$('.body').hide();
$('.header').click(function(){
    // hide all other elements        
    $('.body').hide();
    // show the current one
    $(":first-child", $(this)).show();
}); 
```

如果您存储对当前活动元素的引用，则更好的解决方案是。

```
var activeElement = null;

$('.body').hide();
$('.header').click(function(){
    // hide the last one     
    if(activeElement) {
        activeElement.hide();
    }
    // show the current one
    activeElement = $(":first-child", $(this));
    activeElement.show();

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T05:15:33.287

找到了一个聪明的解决方法：（感谢您的帮助！:-)）

HTML：

```
<ul> 
<li class='title' id='title 2> </li> 
<li class='section' id ='section 2'> </li>
</ul> 
```

jQuery：

```
$('.title').click(function(){
    $('.section').slideUp('fast');
    $(this).siblings('.section').slideDown('fast');
}); 
```

# objective-c - 如何从 Cocoa 获取当前在 Spotify Mac 中播放的曲目

> ID：11236413
> 
> 赞同：1
> 
> 时间：2012-06-28T00:04:55.960
> 
> 标签：objective-c, macos, cocoa, spotify

我正在为 Mac 开发一个歌词应用程序，我想为我的应用程序添加 Spotify 支持。我只需要在 Mac 的 spotify 客户端上检索当前正在播放的曲目，并在播放状态发生变化时得到通知。

我的应用程序中是否有任何 API 可用于执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T04:08:01.797

要在播放状态发生变化时获得通知（它会告诉您新曲目），您需要注意一个名为“com.spotify.client.PlaybackStateChanged”的分布式通知。这里至少还有两个其他问题询问如何做到这一点，其中一个有示例代码，因此请尝试搜索。（或者只是启动 Notification Watcher，您可以自己查看它们，并且应该很容易弄清楚如何编写代码来处理它们。）

如果您想手动查看当前曲目（例如，在启动时），您可以使用 Spotify AppleScript 界面（当然您也可以通过 ScriptingBridge、appscript 等方式访问），如下所示：

```
tell application "Spotify"
  name of current track
end tell 
```

艺术家等也有类似的属性。启动 AppleScript 编辑器并打开 Spotify 词典以获取完整详细信息。

# php - 使用带索引的数组值作为变量变量

> ID：11236416
> 
> 赞同：0
> 
> 时间：2012-06-28T00:05:23.803
> 
> 标签：php, variable-variables

标题可能有点混乱。这是我的问题：

我知道你可以在另一个变量中保存一个变量名，然后读取第一个变量的内容。这就是我的意思：

```
$variable = "hello"
$variableholder = 'variable'
echo $$variableholder; 
```

那将打印：“你好”。现在，我遇到了一个问题：

```
$somearray = array("name"=>"hello");
$variableholder = "somearray['name']"; //or $variableholder = 'somearray[\'name\']';
echo $$variableholder; 
```

这给了我一个 PHP 错误（它说 $somearray['name'] 是一个未定义的变量）。你能告诉我这是否可能并且我做错了什么吗？或者如果这显然是不可能的，你能给我另一个解决方案来做类似的事情吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:12:52.073

目前，我只能想到这样的事情：

```
<?php 
    // literal are simple
    $literal = "Hello";
    $vv = "literal";
    echo $$vv . "\n";
    // prints "Hello"

    // for containers it's not so simple anymore
    $container = array("Hello" => "World");
    $vv = "container";

    $reniatnoc = $$vv;
    echo $reniatnoc["Hello"] . "\n";
    // prints "World"
 ?> 
```

这里的问题是（引用[php: access array value on the fly](https://stackoverflow.com/a/31942/89391)）：

> PHP 语言的语法只允许在变量表达式的末尾使用下标符号，而**不是一般的表达式**，这就是它在大多数其他语言中的工作方式。

PHP是否允许在任何地方使用下标符号，可以将其写得更密集

```
echo $$vv["Hello"] 
```

* * *

旁注：我想在生产中使用[可变变量](http://php.net/manual/language.variables.variable.php) [并不是那么明智](https://stackoverflow.com/a/4273378/89391)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:52:54.147

这个怎么样？（注意：变量变量和 goto 一样糟糕）

```
$variablename = 'array';
$key = 'index';

echo $$variablename[$key]; 
```

# php - 适用于 Windows 8 Release Preview 的本地服务器

> ID：11236418
> 
> 赞同：1
> 
> 时间：2012-06-28T00:05:38.110
> 
> 标签：php, phpmyadmin, wampserver

我刚刚安装了 Windows 8 Release Preview，而我现有的 wampserver 无法正常工作。我尝试安装easyphp，服务成功启动后找不到本地主机。

是否有任何修复此或其他本地服务器以轻松运行 php 和 phpmyAdmin 的方法？

提前致谢。

注意：我已经尝试在使用 wamp 时取消注释 127.0.0.1 地址。

# c# - 序列化双精度的最佳方法

> ID：11236420
> 
> 赞同：4
> 
> 时间：2012-06-28T00:06:12.970
> 
> 标签：c#, serialization

我正在将值序列化为 XML 文档。当我序列化 a`double`时，我想确保我不会丢失任何精度，并且文化不会干扰。或者我没有想到的任何其他“陷阱”。

同样对于`DateTime`，我`ToBinary()`用来获取一个序列化非常安全的值。

那么，`double`在 C# 中序列化/反序列化值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T00:22:20.043

为了解析回确切的值，您应该使用`G17`格式说明符，如此[处](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings?redirectedfrom=MSDN#the-round-trip-r-format-specifier)所述：

```
d.ToString("G17") 
```

或者

```
$"{d:G17}" 
```

请注意，这可能无法[在 .NET Core 3.0 以下的版本](https://github.com/dotnet/runtime/issues/28703)上往返。

* * *

**下面的原始答案**; 提到的`"r"`格式说明符实际上有一个错误，因此文档**不正确**。

* * *

[往返格式说明符“r”](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#RFormatString)保证如果你`double.Parse`在字符串上使用，你将得到完全相同的值：

```
d.ToString("r") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T00:20:13.320

结帐[XmlConvert.ToString（双值）](http://msdn.microsoft.com/en-us/library/0618exys%28v=VS.100%29.aspx)

这也处理无穷大：

> 如果 value 是 Double.PositiveInfinity 或 Double.NegativeInfinity，则此方法分别返回字符串 INF 或 -INF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T00:19:57.990

`BitConverter.GetBytes(myValue)`将给出一个字节数组，然后可以在不损失精度的情况下对其进行序列化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-31T11:58:55.887

看起来这应该可行。根据我的测试，它还可以往返于无穷大和 NaN 等特殊值。

```
static string SerializeDouble(double d)
{
    return d.ToString("G17", CultureInfo.InvariantCulture);
}

static double DeserializeDouble(string s)
{
    return double.Parse(s, CultureInfo.InvariantCulture);
} 
```

* * *

# 为什么`"G17"`？

来源：[https ://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings?redirectedfrom=MSDN#GFormatString](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings?redirectedfrom=MSDN#GFormatString)

相关报价（在本文发表时）：

> 请注意，当与 Double 值一起使用时，“G17”格式说明符可确保原始 Double 值成功往返。这是因为 Double 是符合 IEEE 754-2008 的双精度 (binary64) 浮点数，最多可提供 17 位有效数字的精度。我们建议使用它而不是“R”格式说明符，因为在某些情况下，“R”无法成功地往返双精度浮点值。

* * *

# 为什么`CultureInfo.InvariantCulture`？

这会处理任何会破坏您的往返行程的特定于文化的格式。例如，这个代码片段给出了一些非常不受欢迎的结果！

```
double d0 = Math.PI;
Console.WriteLine("d0: " + d0); // prints 3.14159265358979
// Serialize in America
string s = d0.ToString("G17", new CultureInfo("en-us"));
Console.WriteLine("s: " + s); // prints 3.1415926535897931
// Deserialize in Germany
double d1 = double.Parse(s, new CultureInfo("de-de"));
Console.WriteLine("d1: " + d1); // prints 3.14159265358979E+16 
```

# php - 用于日历的mySQL的while循环中的json_encode（）数组

> ID：11236423
> 
> 赞同：1
> 
> 时间：2012-06-28T00:06:39.500
> 
> 标签：php, mysql, arrays, json, loops

当涉及到 JSON 时，我不知道我在做什么。所以这可能是一个愚蠢的问题，我可能试图以一种奇怪的方式来做。任何帮助都会很棒。

我有这个想要放在我的网站上的 Jquery 日历。它允许 json_encode 日期。这是他们给出的例子。

```
 $year = date('Y');
$month = date('m');

echo json_encode(array(

    array(
        'id' => 111,
        'title' => "Event1",
        'start' => "$year-$month-10",
        'url' => "http://yahoo.com/"
    ),

    array(
        'id' => 222,
        'title' => "Event2",
        'start' => "$year-$month-20",
        'end' => "$year-$month-22",
        'url' => "http://yahoo.com/"
    )

)); 
```

我想使用现有的 mySQL 数据库来填充日历。这是我到目前为止所拥有的。它不起作用，我认为我对此并不聪明。

```
$dataSQL ="select *
            FROM events
        ";

$dataResult = mysqli_query($dataBase, $dataSQL);

$encode = array();

$p=0;
    while($allRow = mysqli_fetch_array($dataResult))
        {
            $new = array(
                        'id' => "$allRow['id']",
                        'title' => "$allRow['title']",
                        'start' => "$allRow['date']",
                        'url' => "$allRow['url']"
                    );
            array_splice($encode, ($p), 0, $new);

            $p++;
        }

echo json_encode($encode); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:19:45.363

如果您只是在数组结构方面遇到问题，那么您就有点复杂了。您可以像这样构建一个数组：

```
$encode = array();

while($allRow = mysqli_fetch_array($dataResult))
       {
            $new = array(
                        'id' => $allRow['id'],
                        'title' => $allRow['title'],
                        'start' => $allRow['date'],
                        'url' => $allRow['url']
                    );
            $encode[] = $new;

        }

echo json_encode($encode); 
```

# php - 找出两个人是否拥有相同的IP地址php和sql

> ID：11236426
> 
> 赞同：1
> 
> 时间：2012-06-28T00:06:56.783
> 
> 标签：php, mysql

是的，我已经完成了少量编码，但还没有弄清楚如何执行以下操作。

如果两个用户的IP地址相同，通过echo来标记。

我希望做到这一点`if($user222['current_ip'] (has the same as another user)); { //do action`

但我在任何地方都找不到代码......它存在吗？

我会永远感激任何帮助（如果可以的话）

我的代码如下：

```
`$usersearch = mysql_query ("SELECT * FROM users WHERE online = 'Online'");
$user222 = mysql_fetch_array($usersearch);`

<? if ($user222['reg_ip'] == $user222['current_ip']) {
    echo "<font color='green'><b>".$user222['current_ip']."</b></font>";
    } else if ($user222['reg_ip'] != $user222['current_ip']) {
    echo "<font color='orange'><b>".$user222['current_ip']."</b></font>"; } else     //add new code here ?> 
```

编辑::: 我想知道两个用户是否通过 SQL 注册了相同的 IP 地址。如果有那么要附和原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:10:28.800

这个问题很模糊，但是可以像这样在 PHP 中获取客户端 IP 地址：

```
$client_ip = $_SERVER["REMOTE_ADDR"]; 
```

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:16:33.040

如果您想根据浏览器确定用户是否不同，您可以使用 cookie。不过，一位用户可以使用多个浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:21:03.613

正如anttix所说，您可以使用“$_SERVER['REMOTE_ADDR']”来获取用户IP地址。当然，您必须在 MySQL 数据库中注册所有 IP 地址。

```
$result = mysql_query("
    SELECT *
    FROM users
    WHERE
    ip = '$_SERVER[REMOTE_ADDR]';
");

while ($row = mysql_fetch_array($result)) {
    if ($_SERVER['REMOTE_ADDR'] == $row[ip]) {
        // do something
    }
} 
```

# php - 如何从运行 MAMP 的 php 在 OSX 上启动本地应用程序？

> ID：11236431
> 
> 赞同：2
> 
> 时间：2012-06-28T00:07:39.067
> 
> 标签：php, macos, mamp

我在 mac mini 上运行了一堆本地信息亭，并且一直在使用 Dropbox 来保持所有文件同步。但是 - 由于这些东西所在的防火墙设置，保管箱更新最近很粗略。我发现的一种解决方法是让 dropbox 退出并定期重新启动以强制其更新。

我的问题是——因为所有这些都在 MAMP 上运行 php 应用程序——有没有办法从 php 启动本地应用程序？我可以通过执行以下操作来杀死 Dropbox：

$killit = `killall -KILL Dropbox`;

但是重新启动它并不相同。我试过这样做：

$start_dbox = `open /Applications/Dropbox.app`;

无济于事。有没有更好的方法来自动化关闭和重新打开本地应用程序的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T23:55:20.170

我在尝试远程控制软件时遇到了类似的问题。'open' 命令必须以当前登录的控制台用户身份执行，或者从控制台拥有的终端（例如 Terminal.app）执行。

如果您将 PHP 更改为重定向 STDERR，您应该会看到“打开”返回的错误：

```
$start_dbox = "open /Applications/Dropbox.app 2>&1"; 
```

然后应该从系统调用返回以下文本：

```
LSOpenURLsWithRole() failed with error -10810 for the file /Applications/Dropbox.app. 
```

我过去使用的一种解决方法是在文件系统的某处创建一个锁定文件，您的 PHP 脚本可以写入该文件并且您的控制台用户可以读取该文件。然后，您可以创建一个以控制台用户身份运行的 cron，并定期检查锁定文件以查看它是否需要重新启动 Dropbox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:31:38.280

我实际上能够通过使用以下内容创建一个 shell 脚本来解决这个问题：

```
#!/bin/sh
export DYLD_LIBRARY_PATH=""

osascript -e 'tell application "Dropbox" to activate' 
```

将其保存为 start_db.sh 并将其放在我的 apache 根目录中（因此该用户没有权限问题）。

然后在我的 php 文件中，我能够做到：

```
$start_dbox = exec('/full/path/to/start_db.sh'); 
```

像魅力一样工作。Dropbox 现在退出并重新启动，没有任何问题。

# libvlc - 如何让 libvlc_media_player_get_time() 返回更准确的结果？

> ID：11236432
> 
> 赞同：8
> 
> 时间：2012-06-28T00:07:39.563
> 
> 标签：libvlc

使用 libvlc，如何让 libvlc_media_player_get_time() 返回更准确的结果？对于 60fps 视频，它返回的值每秒最多只更新几次。有没有办法获得帧准确的时间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-07T07:15:26.743

这个[问题](https://github.com/caprica/vlcj/issues/74)说没有办法从 libvlc 获得更准确的结果。

但是您可以对其进行插值：

```
private long lastPlayTime = 0;
private long lastPlayTimeGlobal = 0;

 /**
 * Get current play time (interpolated)
 * @see https://github.com/caprica/vlcj/issues/74
 * @return
 */
public float getCurrentTime(){
    long currentTime = directMediaPlayer.getTime();

    if (lastPlayTime == currentTime && lastPlayTime != 0){
        currentTime += System.currentTimeMillis() - lastPlayTimeGlobal;
    } else {
        lastPlayTime = currentTime;
        lastPlayTimeGlobal = System.currentTimeMillis();
    }

    return currentTime * 0.001f;    //to float
} 
```

# mysql - 无法在我的机器上本地运行的服务器上编译程序

> ID：11236433
> 
> 赞同：2
> 
> 时间：2012-06-28T00:07:39.763
> 
> 标签：mysql, c, database, portability

我有一个可以在我的系统上编译和运行的项目，但是当我尝试在服务器上运行它时，它会给出编译时错误。这是我用来在我的系统上编译它的 Makefile 的一部分：

```
CC =  gcc
CFLAGS = -g -Wall
COMPLILEFLAGS = `mysql_config --include`
LINKERINFO = `mysql_config --cflags --libs`

exec: main.o
    $(CC) $(CFLAGS) -o exec main.o $(LINKERINFO)

main.o: main.c
    $(CC) $(CFLAGS) $(COMPLILEFLAGS) -c main.c 
```

当我在服务器上运行相同的文件时，出现以下错误：

```
gcc -g -Wall -I/usr/include/mysql -c main.c
In file included from main.c:13:
/usr/include/mysql/my_global.h:688: error: redefinition of typedef ‘my_bool’
/usr/include/mysql/mysql.h:55: note: previous declaration of ‘my_bool’ was here
In file included from main.c:13:
/usr/include/mysql/my_global.h:699: error: redefinition of typedef ‘my_socket’
/usr/include/mysql/mysql.h:69: note: previous declaration of ‘my_socket’ was here
In file included from main.c:13:
/usr/include/mysql/my_global.h:1102: error: redefinition of typedef ‘my_ulonglong’
/usr/include/mysql/mysql.h:132: note: previous declaration of ‘my_ulonglong’ was here
In file included from main.c:14:
/usr/include/mysql/my_getopt.h:64: warning: ‘enum loglevel’ declared inside parameter list 
```

main.c 文件是：

```
#include <stdio.h>
#include <mysql.h>
#include <my_global.h>

int main (void)
{
    return 0;
} 
```

任何人都可以建议解决此问题的可能方法。我想要的只是增加这段代码的可移植性。我能想到的一种选择是制作文件`compiler`并`linker`在我的源代码中使用并将它们用于编译和链接。

顺便说一句，我使用的是 mysql-server 5.5 版，服务器有 mysql-server 5.3 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:31:19.533

查看 MySQL 的文档，我发现[旧版本](http://dev.mysql.com/doc/refman/4.1/en/building-clients.html)包含一个警告，指出在 Windows 上编译`my_global.h`之前应该包含该警告。`mysql.h`

尝试颠倒包含的顺序，看看是否能解决问题。如果是这样，将紧急向 MySQL 提交一个错误。

# c - 使用 char** 的项目（在声明后初始化之后）

> ID：11236444
> 
> 赞同：0
> 
> 时间：2012-06-28T00:09:42.777
> 
> 标签：c, arrays, initialization, pipe

正如**caf在**[https://stackoverflow.com/a/1113041/1354779](https://stackoverflow.com/a/1113041/1354779)中谈到的那样，有一种方法可以在声明变量时使用初始化器来初始化已声明的数组。太好了，我现在想知道是否有一种方法可以一个一个地使用数组的每个项目。

我用它通过管道传递命令列表，我知道*这*有效：

```
char* script[]={"report blabla","report bla"};
char line[200];
char** command;
for (command = script ; **command ; **command ? command++ : 0){
    if (**command){
        SendCommand(*command, line, sizeof(line));
    }   
} 
```

但是当我在下面尝试我的代码时，我得到一个“pipe_GWB9.exe 中 0x778915de 处的未处理异常：0xC0000005：访问冲突读取位置 0xcccccccc”：

```
char* request[] = {"report watact"};
char line[200];
// [...] Other code [...]
static const char *tmp[8] = 
  {
  "report molality H+",
  "report molality Cl-",
  "report molality Ca++",
  "report molality Mg++",
  "report molality K+",
  "report molality Fe++",
  "report molality SO4--",
  "report molality Na+"
  }; 
  memcpy(request, tmp, sizeof request);
char** command;
command=request;
SendCommand(*command, line, sizeof(line));
// Until here, everything works great.
**command ? command++ : 0;
SendCommand(*command, line, sizeof(line));
// But THAT doesn't work!! 
```

您能帮我调用数组*请求*的其他项目吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:17:45.773

```
char* request[] = {"report watact"}; 
```

`request`是一个指向 char 的指针数组，其中包含 1 个元素。

```
static const char *tmp[8] = 
  {
  "report molality H+",
  "report molality Cl-",
  "report molality Ca++",
  "report molality Mg++",
  "report molality K+",
  "report molality Fe++",
  "report molality SO4--",
  "report molality Na+"
  }; 
```

`tmp``char`是一个包含 8 个元素的指针数组。

```
memcpy(request, tmp, sizeof request); 
```

您将前四个字节（假设`sizeof request == 4`）从复制`tmp`到`request`，即，您将 的第一个元素复制`tmp`到 的第一个元素中`request`。

```
char** command;
command=request; 
```

很简单；`command`现在指向 . 的第一个（也是唯一一个！）元素`request`。

```
**command ? command++ : 0; 
```

哎呀。您刚刚越过了`command`( `request`) 的边界，因为`request`只包含一个元素。然后在调用下一行时取消引用它`SendCommand`，这会给您带来段错误。请注意，这里可能发生任何事情，因为您正在调用 UB。

例如，如果你剪掉两个数组之间的代码，*可能会*`"report molality H+"`发生字符串被发送两次，因为将指针递增到 的边界之外`request`很可能只会让你跳到开头`tmp`。

如果要将所有内容复制`tmp`到其中，`request`则需要确保两个数组的大小相同（或至少与`request`一样大`tmp`）。

顺便说一句，这个三元表达式有点傻：

```
**command ? command++ : 0; 
```

你只关心一个分支，那么为什么要使用三元呢？更喜欢：

```
if(**command)
    command++; 
```

也就是说，这不是检查数组边界的安全方法（如您所见）。您将指针数组视为指向 char 的指针，即扫描直到找到 NULL 终止符。

数组没有 NULL 终止符，您最终只是越过它的边界并调用未定义的行为，因此您需要单独跟踪大小并对其进行检查。

# javascript - 高级开关盒

> ID：11236446
> 
> 赞同：4
> 
> 时间：2012-06-28T00:09:49.627
> 
> 标签：javascript, switch-statement

我想在开关盒中使用变量。举个例子，做不到。你能帮我吗？

```
switch(basket,pay){
   case true, true:
       blah blah...
   break;
   case false,true:
       blah blah..
   break;
   case false, false:
      blah blah...
   break;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T01:35:58.623

您正在寻找的是[flags 和 bitmasks](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators#Example:_Flags_and_bitmasks)。基本上，您将多个伪布尔值存储在同一个变量中，您可以访问它们的复合条件。这样做的好处是您可以将多个属性组合成一个变量。当您需要跟踪更多布尔属性时，这尤其简洁

```
var FLAG_BASKET = 0x1; // 0001  
var FLAG_PAY = 0x2; // 0010

//set them both to pseudo-true
var flags = FLAG_BASKET | FLAG_PAY;

switch (flags){
  case 0x0://both are false
  case 0x1://basket is true, pay is false
  case 0x2://basket is false, pay is true
  case 0x3://both are true
} 
```

[摆弄](http://jsfiddle.net/ovfiddle/YbPE5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-16T20:04:39.777

原始问题*可以*写成`switch`：

```
switch (true) {
    case basket && pay:
    // both true
    break;
    case basket && !pay: 
    // basket true, pay false
    break;
    case !basket && pay:
    // basket false, pay true
    break;
    case !basket && !pay:
    // basket false, pay false
    break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T00:19:26.167

您编写的是合法的 JavaScript，但它并没有达到您的预期。

在表达式中，逗号计算为最后一个成员。这通常在 for 循环中用于同时初始化两个变量：

```
for(var i = 0, l = myArray.length; i < l; ++i) {
    ...
} 
```

在 switch 和 case 语句中使用逗号运算符时，将丢弃第一个值并使用最后一个值。看这个小提琴的例子：http: [//jsfiddle.net/UG4vf/](http://jsfiddle.net/UG4vf/)

它*不是*比较两个值并找到与它们都匹配的情况。换句话说，您上面的代码简化为：

```
switch(pay){
   case true:
       blah blah...
   break;
   case true:
       blah blah..
   break;
   case false:
      blah blah...
   break;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T00:34:47.073

老实说，您的 switch 语句似乎没有必要。您应该可以接受一些简单`if`的 's：

```
if (basket && pay) {
  // code
} else if (pay) {
  // code
} else {
  // code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-13T15:55:35.270

使用此解决方案，您可以为开关提供多个参数：

```
const a = "foo";
const b = true;
const c = null;

const condition = JSON.stringify({ a, b, c });

function mySwitch(condition) {
  switch (condition) {
    case JSON.stringify({
      a: "foo",
      b: true,
      c: true
    }):
      return 'case { a: "foo", b: true, c: null }';

    case JSON.stringify({
      a: "foo",
      b: true,
      c: null
    }):
      return 'case { a: "foo", b: true, c: null }';

    default:
      return 'default';
  }
}

console.log("condition:", condition);
console.log("result:", mySwitch(condition));
```

除了作为条件的对象外，**这也适用于数组**，但是使用此解决方案的缺点是**您必须将完整的开关条件值传递给开关情况条件**。例如，如果 switch 案例关心属性`a`并且`b`来自示例而不是，`c`那么这个解决方案将不起作用。但是，如果您确定这`c`将始终对您的案例具有特定价值，那么您可以使用此解决方案。

因为 OP 的示例代码在每种情况下都包含重复数量的参数，所以这个解决方案可以帮助您破解为开关提供多个参数的可能性。

# c# - XAML 看不到 IList 的成员 - 可访问性不一致？

> ID：11236448
> 
> 赞同：0
> 
> 时间：2012-06-28T00:09:57.927
> 
> 标签：c#, wpf, xaml

我正在构建一个 WPF 屏幕，其中包含从 C# 类中的 IList 创建的按钮。它构建并显示正确数量的按钮；但是，不显示从列表项构建的按钮上的文本。

我以前在另一个班级/屏幕上做过这个，效果很好。

我在调试时注意到，如果我将鼠标悬停在有效类 (BibList) 中的 List 对象上，我会得到飞越提示“不一致的可访问性：属性类型 'System.Collections.Generic.IList' 的可访问性低于属性 'BurnIn .UI.Modules.Operations.VieModels.OvenViewModel.BibList'

我在有效的类中没有收到该消息，它与我所看到的相匹配（XAML 看不到 SlotInfo 信息）；但是，一切都是公开的，所以我看不出可访问性问题在哪里。

这是声明列表的代码：

```
namespace BurnIn.UI.Modules.Operations.ViewModels
{
    public class SlotInfo
    {
        public int SlotNumber;
        public string BibName;
    }

    public class OvenViewModel : OvenViewModelBase
    {
        private List<SlotInfo> m_BibList = new List<SlotInfo>();
        public IList<SlotInfo> BibList
        {
            get { return m_BibList; }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:36:59.300

它可能与 List 和 IList 之间的转换有关。如果更改类型以匹配会发生什么？

像这样

```
namespace BurnIn.UI.Modules.Operations.ViewModels
{
public class SlotInfo
{
    public int SlotNumber;
    public string BibName;
}

public class OvenViewModel : OvenViewModelBase
{
    var m_BibList = new List<SlotInfo>();
    public IList<SlotInfo> BibList
    {
        get { return m_BibList; }
    } 
```

或这个

```
namespace BurnIn.UI.Modules.Operations.ViewModels
{
public class SlotInfo
{
    public int SlotNumber;
    public string BibName;
}

public class OvenViewModel : OvenViewModelBase
{
    List<SlotInfo> m_BibList = new List<SlotInfo>();
    public List<SlotInfo> BibList
    {
        get { return m_BibList; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:57:26.823

问题是 SlotInfo 元素是成员而不是属性。飞越的“帮助”提示是红鲱鱼。

# svn - SVN post-commit hook bat 文件返回 Basic Auth 错误

> ID：11236450
> 
> 赞同：2
> 
> 时间：2012-06-28T00:11:10.790
> 
> 标签：svn, hook, visualsvn-server, post-commit

我正在尝试让提交后的 svn 挂钩工作。post commit bat 文件有以下内容：

> "c:\program files\visualsvn server\bin\svn.exe" 更新 "存储库本地地址" --non-interactive --trust-server-cert --username user --password pass

当我从 cmd 提示符运行此命令时，它工作正常，并且更新到最新版本没有问题。

但是，当我双击 bat 文件或 visual svn server 运行挂钩时，我收到以下错误：

> 无法连接到 URL 'https://xxxxx/dvn/fff' 上的存储库 'https://xxxxx/dvn/fff' 的选项：授权失败：无法对服务器进行身份验证：拒绝基本质询

我试过设置

```
store-passwords = yes
store-auth-creds = yes 
```

但问题仍然存在

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:42:01.413

过去，我收到了相同的错误消息，有两个不同的原因：

1.  存储库签出中有一个旧`.svn`文件夹，因此干净的签出解决了该问题。
2.  还有一次，删除 Gnome 登录密钥环修复了它：

    `rm ~/.gnome2/keyrings/login.keyring`

否则，您可以在 serverfault 上查看这个[问题](https://serverfault.com/questions/19940/svn-client-authentication-error)。

希望这可以帮助！

# jquery - 如何在 content_tag_for 元素上禁用 jquery 排序

> ID：11236452
> 
> 赞同：0
> 
> 时间：2012-06-28T00:11:15.553
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我正在使用 jquery ui 排序项目列表，如下所示：

```
%ul.nav.nav-tabs.nav-stacked#lineup{"data-update-url" => sort_lineups_url}
  - @pieces.each_with_index do |piece, index|
    = content_tag_for :li, piece do
      = link_to "#{(index + 1).to_s + ' - ' + piece.name}", '#'

jQuery ->
  $('#lineup').sortable(
    axis: 'y'
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize'))
  );
  $( "#not-sortable" ).disableSelection(); 
```

我想要做的是始终禁止对@pieces 中的第一项进行排序。但是，我不知道如何使用 disableSelection() 来做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:18:47.290

`disableSelection`只保留文本不被选中；它不会阻止元素的存在`sortable`。请参阅[https://groups.google.com/forum/?fromgroups#!topic/jquery-ui/B2h_Ea4jo5I](https://groups.google.com/forum/?fromgroups#!topic/jquery-ui/B2h_Ea4jo5I)。

实现此目的的最佳方法是使用[取消选项](http://jqueryui.com/demos/sortable/#option-cancel)。

这是一个例子 - [http://jsfiddle.net/s6XTu/7/](http://jsfiddle.net/s6XTu/7/)

# c# - 银光；从父元素中移除子元素

> ID：11236461
> 
> 赞同：0
> 
> 时间：2012-06-28T00:12:30.163
> 
> 标签：c#, silverlight, xaml, devexpress, tabcontrol

我正在尝试删除一个子元素，但我不知道该怎么做......

```
<Grid x:Name="LayoutRoot">
   <Grid x:Name="ChildPanel">
       <StackPanel Orientation="Vertical" x:Name="StackPanelImplementationSteps">
           <sdk:ValidationSummary x:Name="ValidationSummary"/>
           <dx:DXTabControl x:Name="DXTabControl_ViewTypes">
               <dx:DXTabControl.View>
                   <dx:TabControlScrollView HeaderLocation="Left" HeaderOrientation="Vertical"></dx:TabControlScrollView>
               </dx:DXTabControl.View>
               <dx:DXTabItem x:Name="tabImplementationSteps" Cursor="Hand" Header="Implementation Steps">
                   <Grid x:Name="ImpPanel">
                   </Grid>
              </dx:DXTabItem>
            <dx:DXTabControl>
        </StackPanel>
    </Grid>
</Grid> 
```

知道如何从其父级“tabImplementationSteps”中删除 ImpPanel 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:49:11.107

[DXTabItem](http://help.devexpress.com/#Silverlight/clsDevExpressXpfCoreDXTabItemtopic)内容可通过 DXTabItem.Content 属性获得。因此，您可以随时使用此属性添加或删除删除内容。

可以使用 DXTabControl 嵌入功能从 UI 中隐藏/显示选项卡项：[显示和隐藏选项卡项](http://help.devexpress.com/#Silverlight/CustomDocument5002)。可以通过[DXTabControl.RemoveTabItem](http://help.devexpress.com/#Silverlight/DevExpressXpfCoreDXTabControl_RemoveTabItemtopic)方法在代码中删除选项卡项。

相关帮助文章：[DXTabControl 概述](http://help.devexpress.com/#Silverlight/CustomDocument5001)

# android - android中的字符串格式问题

> ID：11236463
> 
> 赞同：0
> 
> 时间：2012-06-28T00:12:41.390
> 
> 标签：android, localization, internationalization, string-externalization

我在 android 应用程序中遇到了“string.format”的问题。在我的应用程序中，当用户将其语言首选项从默认（英语）更改为任何其他外语（日语、德语等）时，变量字符串定位会导致强制关闭错误。请参考以下代码：

temp = String.format(locale,getResources().getString(R.string.temp_string), value, name);

其中， temp_string = "包裹号 %1$d 属于 %2$s" 用于默认选择（英语），当在其中一些语言中选择其他语言时，%2$s 位于 %1$d 之前。因此，应用力关闭。有没有办法动态处理变量字符串（值，名称）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:15:20.840

我会做类似的事情：

```
temp = getResources().getString(R.string.temp_string, value, name); 
```

如您所见，`getString()`方法也可以接收要格式化的参数。然后，将不同的字符串资源放在不同的文件夹中。例如：

```
res/
   values/
       string.xml <--- here you put "The parcel number %1$d belongs to %2$s"
   values-de/
       string.xml <--- here you put "The parcel number %2$d belongs to %1$s" 
```

我只是给你一个例子；我其实不知道德国的秩序如何。我只是想解释一下你实际上必须尝试什么。

# php - 我可以将所有带有 jquery 文件上传的文件转换为 jpg 吗？

> ID：11236464
> 
> 赞同：3
> 
> 时间：2012-06-28T00:12:47.817
> 
> 标签：php, jquery

我正在使用[jquery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)脚本，到目前为止它运行得非常好。我遇到的最后一个障碍是我只想在我的网站上使用**jpg**图像，但允许用户选择上传 gif、png 或 jpg。

我假设我需要更改或向 upload.class.php 文件添加一些额外的方法来完成此操作。

以前有没有人这样做过，如果是这样，这是要修改的正确文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:40:11.853

如果您想在纯 JavaScript 中实现它，您将需要编写一些非常困难的转换函数，并且您将被限制在支持`FileAPI`和`FileReference`. 此外，您必须编写的转换函数将在二进制级别处理文件，并且必须遵守 GIF/JPEG/PNG 标准规范指定的一些非常严格的文件结构。

我记得`SWFUpload`（Flash - ActionScript - JavaScript 库）嵌入了此功能，您可以指定它将文件发送到服务器的格式，但仅当您希望使用发送调整大小版本的调整大小功能时才适用原始文件到服务器，但它有一些缺点。

# ruby - 如何从 Ruby 中的 € 获得“\u20ac”？

> ID：11236466
> 
> 赞同：1
> 
> 时间：2012-06-28T00:13:11.013
> 
> 标签：ruby, string, encoding

使用utf8编码，我知道

```
a = "\u20ac"

#=> "€" 
```

我想知道是否有反转这个过程以从字符串€中获取“\u20ac”？

像

```
a.get_encoding_method 

#=> "\u20ac" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:23:56.460

```
escaped = '\u' + a.unpack('U')[0].to_s(16) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:31:49.367

试试`'\u%x' % a.ord`。（假设您想以带有文字反斜杠和的字符串结尾`u`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:32:17.800

您可以使用 pack 和 unpack 来回转换。例如：

```
'€'.unpack('U*')
=> [8364]

[8364].pack('U*')
=> "€" 
```

# database - 存储过程性能缓慢

> ID：11236467
> 
> 赞同：0
> 
> 时间：2012-06-28T00:13:17.260
> 
> 标签：database, db2, database-performance

```
select  * from   FOO.MBR_DETAILS where BAR= 'BAZ' and MBR_No = '123' 
```

执行时间 = 0.25 秒

```
CREATE PROCEDURE My.MEMBER_SEARCH
(
        i_BAR varchar(3),
        i_member_surname varchar(50),
        i_member_code varchar(10),
        i_member_given_name varchar(50)
)

    RESULT SETS 1
    LANGUAGE SQL
BEGIN
   DECLARE c1 cursor with return for

          select *
          FROM FOO.MBR_DETAILS m
          WHERE
            BAR= i_BAR
            and  (i_member_code = '' or  m.MBR_No = i_member_code)
            and (i_member_surname = '' or  m.surname = i_member_surname)
            and (i_member_given_name = '' or  m.given_names  LIKE  '%'||i_member_given_name||'%');

    OPEN c1;
END

call My.MEMBER_SEARCH('BAZ','','123','') 
```

执行时间 = 1.9 秒

我认为这两个查询应该有相似的时间，因为 i_member_surname 和 i_member_given_name 都是空的，它们不会被评估。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T03:31:55.003

解决方案是为运行灵活的参数驱动搜索的任何存储过程启用 REOPT ALWAYS。

REOPT ALWAYS 选项将强制优化器在每次执行过程时分析输入参数值并提出新的访问计划，而不是仅在编译过程时一次。尽管 REOPT ALWAYS 为存储过程的每次执行都增加了几毫秒的优化器开销，但这很可能比不断重用优化器在最初编译存储过程时猜测的一刀切访问计划更快.

# ruby-on-rails - ssl_requirement 仅在生产中失败且仅在两页上失败

> ID：11236468
> 
> 赞同：0
> 
> 时间：2012-06-28T00:13:21.340
> 
> 标签：ruby-on-rails, ssl

我有一个 Rails 3.2 应用程序，我正在尝试调试一个奇怪的 ssl 问题。

我在整个应用程序中进行页面缓存并维护动态内容，我正在发出 ajax 请求以更新某些方面。

所有缓存的页面都应该仅由 http 请求。当发出 ssl 请求时，除了其中两个之外，所有这些都重定向到 http。

问题是，这两个页面[艺术家](https://www.artsicle.com/artists)和[博客](https://www.artsicle.com/blog)未能重定向回 http，并且刷新内容的 ajax 请求被取消。据我所知，它被取消了，因为它将普通的 http 视为不同的站点，并且您无法在 ssl 下向不同的站点发出 ajax 请求。

设置本地签名证书没有帮助。在开发中，这两个页面的行为是适当的。我还在使用 AWS ELB，其中 ssl 在负载均衡器处终止并转到端口 80，这似乎也可以正常工作。

我可以强制这两个页面每次都重定向到 http，但我更愿意深入了解这一点。

我正在使用 ssl_requirement 进行应用级重定向。

我正在寻找有关如何发生这种情况的想法。我已经梳理了我的代码库，但在应用程序级别找不到任何会导致这种情况发生的东西。我不认为我的 apache vhost 是完美的，但与这两个页面无关。任何人都知道这可能发生在堆栈中的哪个位置？

编辑：

终于意识到，由于页面已完全缓存，因此请求仅针对 apache，而不会针对将被重定向的应用程序。这让我质疑为什么 Ajax 请求会被取消。Ajax 请求发往同一个域但未加密。这不应该只是显示为“不安全内容”的警告吗？我正在使用 jquery getScript 来加载动态内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:46:23.063

好吧，这将载入愚蠢错误的历史，但我想我会把它留给其他人使用谷歌搜索。

简单的答案是我的 ajax 调用不允许通过 ssl 连接。如果您的 ssl_requirement 具有 ssl_allowed 方法，请确保您调用加载动态内容的 ajax 方法在 ssl 上是允许的。否则请求将被取消或将获得 302 重定向。

# java - 返回文件作为响应的正确方法是什么？

> ID：11236469
> 
> 赞同：2
> 
> 时间：2012-06-28T00:13:27.370
> 
> 标签：java, jax-rs, apache-wink

基本上我需要提供将接收字符串参数的 REST 服务，使用该参数从另一个系统获取文件，然后将获取的文件作为响应返回。

效果应该与用户单击 pdf 或任何其他二进制文件链接并且浏览器提示他保存/下载该文件时相同。

几点：

*   是否可以流式传输文件（在我从源系统接收字节时发送字节）。换句话说，如何处理非常大的文件？
*   也与流式传输有关，当使用常规 HttpServletResponse 时，我是否必须等到一个大文件被完全读取到`return response.build()`？

我如何使用 Apache Wink 来做这件事？

PS 抱歉，这对 Wink 大师来说可能是微不足道的，但我才刚刚开始了解[开发人员指南](https://cwiki.apache.org/WINK/apache-wink-developer-guide.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:23:19.067

你可以`java.io.File`从你的方法中返回。`Response`如果你愿意，你可以把它包起来。Wink 将处理流媒体。流式传输不会在您调用 to 时开始`response.build()`，而是在您的方法完成时开始。

如果你想要一个正确的下载对话框，你应该返回正确的`Content-Disposition`标题。请参阅[如何在 JAX-RS 中设置响应标头以便用户看到 Excel 的下载弹出窗口？](https://stackoverflow.com/q/4621748/547779)

# java - Java版本平台和开发者版本

> ID：11236470
> 
> 赞同：0
> 
> 时间：2012-06-28T00:13:48.370
> 
> 标签：java, api, version, platform

Java 版本：“1.0.”、“1.1”、奇怪的名称为“Java 2”、“Java 2 1.2 版”、“Java 2 1.3 版”、“Java 2 1.4 版”、“Java 2 5.0 版”。等等等等

我的问题是这些是开发者版本还是平台版本？为什么它从 1.4 跃升至 5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:24:59.347

“飞跃”的原因是 Java 5 的“真实”内部版本号是/是 1.5（而 Java 6 是 1.6 等等）。无论出于何种原因，Sun 决定（从 1.5 开始）将其称为 5 而不是 1.5（但它们的含义相同）。最新版本是 1.7，但几乎完全被称为 Java 7。具体版本是 1.7.05（版本 7，更新 5）。

在 Java 5 之前，企业版被称为 Java 2（而 1.x 版本是标准版），从 Java 5 开始，企业版被称为 Java 企业版——通常缩写为 Java EE（你可能还会看到对 J2EE 的旧引用）

# string - Excel 2007 对用户定义的字符串使用“查找”功能，然后将每次出现的整行复制到另一个工作表

> ID：11236471
> 
> 赞同：0
> 
> 时间：2012-06-28T00:13:49.780
> 
> 标签：string, excel, excel-2007, row, vba

我是 Excel VBA 的新手，这是我第一次尝试制作一个有用的宏来加快我的工作进程。

**我正在尝试做的事情**

我有一个大约 15,000 行 x 大约 15 列的数据文件。我希望我的宏做的是，一旦我在单独的工作表上点击了一个按钮，代码将获取我在该工作表上的特定单元格中键入的字符串，转到包含所有数据的工作表，然后使用 find在其中一列上运行以查找我定义的字符串的所有实例。

一旦找到了字符串的所有实例，我想复制相应的行并将它们粘贴到我运行宏的工作表中。

澄清一下，我想在其中找到字符串的列包含人们输入的描述——不只是一个词要看；这就是为什么我一直在尝试使用 Find 功能。

**到目前为止我的尝试：**

```
Sub FindTextBasicData()

'Define variables
Dim sourceSht As Worksheet
Dim outputSht As Worksheet
Dim strSearch As String
Dim searchRange As Range
Dim outputRange As Range

'Set the sheet variables to those present in the workbook
Set sourceSht = Sheets("Basic Data")
Set outputSht = Sheets("Output")

'Set the value of the string variable to the contents of cell C2 in the output sheet
strSearch = outputSht.Range("C2")

'Set the range variable to the range in the data sheet that I want to check    
Set searchRange = sourceSht.Range("C6:C15448")

'Use the Find function to look through the range I defined and select all rows where the
'string variable can be found, setting the second range variable to these values
Set outputRange =searchRange.Find(What:=strSearch, After:=.Cells(3, 6), LookIn:=xlFormulas, _
LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
MatchCase:=False).EntireRow

'Copy the results of the Find function to the clipboard
outputRange.Copy

'Select the 5th row of the output sheet as the location to paste the data, and then paste   
outputSht.Select
Rows(5).Select
ActiveSheet.Paste

End Sub 
```

我知道我肯定在 find 函数上做错了，但我无法解决这个问题 - 我认为我的问题在于 After 参数，因为它没有按照我的想法执行（参考单元格 C6作为开始使用 Find from 的地方？）。我尝试查看 Ozgrid 上的 Find 功能指南，但我想我只是让自己更加困惑。

如果我能让这个宏正常工作，我将能够大量使用它来大大简化我必须为这 15000 条记录执行的数据分析。对此的任何帮助将不胜感激，如果我解释得不够好，我当然很乐意澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:59:00.547

引用`.Cells(3, 6)`需要使用`With`块进行限定，或者直接引用一个`Worksheet`或`Range`对象。这里最简单的解决方案是`sourceSht.Cells...`

此外，`Cells(3, 6)`是单元格 F3，而您想要单元格 C6。把这些放在一起，你应该有`After:=sourceSht.Cells(6, 3)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T05:53:12.897

正如刚才提到的。`.Cells(3, 6)` 您在without前面使用点运算符`With`。`sourceSht`最好的方法是在您的案例中直接将其引用到混凝土板。如果要引用单元格 C6，则可以使用例如：

`sourceSht.Range("C6")`或`sourceSht.Cells(6,3)`或`sourceSht.Cells(3,"C")`等。

但我认为这不应该引起问题（只要参考有效），因为如果您只想在整个范围内搜索， **After**参数不相关（并且是可选的）。实际上只有**What**是必需的参数。

`set outputRange = searchRange.Find(strSearch).EntireRow`应该做的伎俩。此外，如果您指定**After**参数，则搜索不会查看该单元格。

无论如何，这只会为您提供找到字符串的行中的第一个单元格。不是所有的人。您可能希望将搜索代码然后放入与`FindNext`方法组合的循环中，或者仅使用方法的**After**参数`Find`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:25:47.303

而不是该`Range.Find`方法，而是使用该`Range.AutoFilter`方法根据第二张工作表上的值过滤第一张工作表上的行，然后仅复制可见行。恕我直言，这比`Range.Find`方法更好（仍然比循环更好）。

这个网站上有很多关于如何将可见行复制到另一张工作表的示例，这里是一个示例：[Excel 宏 - 复制和粘贴过滤的行](https://stackoverflow.com/q/8829968/190829)

# php - 找不到我的逻辑错误：我正在测试的条件永远不会正确

> ID：11236473
> 
> 赞同：0
> 
> 时间：2012-06-28T00:14:18.603
> 
> 标签：php, mysql, if-statement

这是一个结果页面，它接收有关用户在前一页的表单中选中哪些框的一些信息。它根据用户名的选择获取该信息并更新数据库中的值。我在底部遇到了一个问题，我的 if/else if/else 语句中的一个条件从未被激活，即使我认为应该这样做。你们能帮我找出我的逻辑错误吗？

它发生在底部附近

```
else if($iceli && !$icleiDB){ 
```

这绝不是真的。如果该语句被评估为真，则会在数据库中的表中插入一个新行。相反，如果 $iclei 为真且 $icleiDB 为假（这应该使语句变为真），我会得到“iclei 仍然为真”的结果，这仅应在 $iclei 为真且 $icleiDB 为真时发生.

注意：我正在使用一个名为 MySqlConnection.php 的 PHP 文件，它简化了与数据库的连接，所以每当你看到 $mySqlConnection->doQuery() 或 $mySqlConnection->doNonQuery() 时，这就是对数据库的调用，以及其中的任何内容括号是查询。

这是所有代码：

```
<?php

    require_once 'MySqlConnection.php';

    $server = 'localhost';
    $dataBase = 'ise_programs';
    $userName = 'root';
    $password = 'root';

    $mySqlConnection = new MySqlConnection($server, 
                                           $dataBase, 
                                           $userName, 
                                           $password);

    $townName = $_POST["townName"];
    //$townName = addslashes($townName); //To pevent SQL Injection, but make sure magic quotes are off

    $townidQuery = "SELECT townid 
                    FROM tbltowns   
                    WHERE townname = '$townName'";

    $townidArray = $mySqlConnection->doQuery($townidQuery);
    $townid = $townidArray[0][0];

    //grab values the user selected in the form
    $iclei = $_POST["ICLEI"];
    $ccef = $_POST["CCEF"];
    $ise = $_POST["ISE"];
    $ceef = $_POST["CEEF"];
    $epacc = $_POST["EPACC"];
    $k12ise = $_POST["K12ISE"];
    $kctc = $_POST["KCTC"];
    $mbbpm = $_POST["MBBPM"];
    $n2n = $_POST["N2N"];
    $sbpm = $_POST["SBPM"];

?>

<html>
    <body>

    <p>HTML works.</p>

    <p>
    townName = <?php echo($townName) ?> 
    <br />
    townid = <?php echo($townid) ?>
    </p>

    <p>Values selected by the user: </p>
    <ul>
    <li>ICLEI = <?php echo($iclei) ?></li>
    <li>CCEF = <?php echo($ccef) ?></li>
    <li>ISE = <?php echo($ise) ?></li>
    <li>CEEF = <?php echo($ceef) ?></li>
    <li>EPACC = <?php echo($epacc) ?></li>
    <li>K12ISE = <?php echo($k12ise) ?></li>
    <li>KCTC = <?php echo($kctc) ?></li>
    <li>MBBPM = <?php echo($mbbpm) ?></li>
    <li>N2N = <?php echo($n2n) ?></li>
    <li>SBPM = <?php echo($sbpm) ?></li>
    </ul>

    <p>Values from the database:</p>

    <?php

    $enabledProjectsListQuery = "SELECT projectid
               FROM tblenabledprojects
               WHERE townid = $townid";

    $enabledProjectsList = $mySqlConnection->doQuery($enabledProjectsListQuery);

    //convert enabled projects list into an array of single values
    $enabledProjects = array();
    for($i = 0; $i < count($enabledProjectsList); $i++){
        $enabledProjects[] = $enabledProjectsList[$i][0];
    }

    //print the values in the enabledProjects array
    echo('enabledProjects = ');
    foreach($enabledProjects as $i){
        echo($i . ", ");
    }

    //declare variables outside if statements
    $icleiDB = false;
    $ccefDB = false;
    $iseDB = false;
    $ceefDB = false;
    $epaccDB = false;
    $k12iseDB = false;
    $kctcDB = false;
    $mbbpmDB = false;
    $n2nDB = false;
    $sbpmDB = false;

    //determine whether values were enabled in the database (and print them)
    echo("<p>");

        if(in_array(1, $enabledProjects)){
            echo "in first if 108 ".$icleiDB."<br>";
                echo('iclei is ENABLED. <br />');
                $icleiDB = true;
            }
            else{
                echo "in else 113 ".$icleiDB."<br>";
                echo('iclei is not enabled. <br />');
                $icleiDB = false;
            }
        if(in_array(2, $enabledProjects)){
                echo('ccef is ENABLED. <br />');
                $ccefDB = true;
            }
            else{
                echo('ccef is not enabled. <br />');
                $ccefDB = false;
            }
        if(in_array(3, $enabledProjects)){
                echo('ise is ENABLED. <br />');
                $iseDB = true;
            }
            else{
                echo('ise is not enabled. <br />');
                $iseDB = false;
            }
        if(in_array(4, $enabledProjects)){
                echo('ceef is ENABLED. <br />');
                $ceefDB = true;
            }
            else{
                echo('ceef is not enabled. <br />');
                $ceefDB = false;
            }
        if(in_array(5, $enabledProjects)){
                echo('epacc is ENABLED. <br />');
                $epaccDB = true;
            }
            else{
                echo('epacc is not enabled. <br />');
                $epaccDB = false;
            }
            if(in_array(6, $enabledProjects)){
                echo('k12ise is ENABLED. <br />');
                $k12iseDB = true;
            }
            else{
                echo('k12ise is not enabled. <br />');
                $k12iseDB = false;
            }
        if(in_array(7, $enabledProjects)){
                echo('kctc is ENABLED. <br />');
                $kctcDB = true;
            }
            else{
                echo('kctc is not enabled. <br />');
                $kctcDB = false;
            }
            if(in_array(8, $enabledProjects)){
                echo('mbbpm is ENABLED. <br />');
                $mbbpmDB = true;
            }
            else{
                echo('mbbpm is not enabled. <br />');
                $mbbpmDB = false;
            }
        if(in_array(9, $enabledProjects)){
                echo('n2n is ENABLED. <br />');
                $n2nDB = true;
            }
            else{
                echo('n2n is not enabled. <br />');
                $n2nDB = false;
            }
        if(in_array(10, $enabledProjects)){
                echo('sbpm is ENABLED. <br />');
                $sbpmDB = true;
            }
            else{
                echo('sbpm is not enabled. <br />');
                $sbpmDB = false;
            }

        echo("</p>");

        if($icleiDB){
         echo "determined to be true 193 ".$icleiDB."<br>";
            echo('icleiDB is true.');
        }
        elseif(!$icleiDB){
            echo "determined to be false 197 ".$icleiDB."<br>";
            echo('icleiDB is false.');
        }

    //compare selections with DB values and decide what needs to change
    if(!$iclei && $icleiDB){ //user says iclei = false, DB says true. delete from DB
        $mySqlConnection->doNonQuery(
            "DELETE FROM tblenabledprojects
             WHERE townid = '$townid' AND projectid = '1'"
        );
        echo("Values deleted from database: ICLEI true -> false");
    }
    //echo "******iceli = ".$iceli." and icleiDB = ".$icleiDB."******<br>";
    else if($iceli && !$icleiDB){ //user says iceli = true, DB says false. add to DB
        $mySqlConnection->doNonQuery( 
            "INSERT INTO tblenabledprojects
             VALUES ('$townid', '1')"
        );
        echo("Value added to database: ICLEI false -> true");

    }
    else{
        if($iclei){
            echo("iclei remains true");
        }
        elseif(!$iclei){
            echo('iclei remains false');
        }
        else{
            echo('Who knows?');
        }
    }

    ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:39:44.143

伙计，我试图读这个，但它让我头疼......也许这也是你没有“看到”它的原因......

我没有看到错误，但有些事情应该可以帮助您解决问题：

1.  php 中有 switch，不要做这种疯狂的 if/else/elsefi 事情。
2.  将您的代码封装在方法、类中-> 阅读有关“面向对象编程”的信息-从长远来看，它确实可以节省您的时间……而且如果没有它，您将无法完成……这是意大利面条式代码……如果您得到几周后，您必须重新考虑此代码...
3.  永远不要在你的 sql 查询中使用用户输入！-> 准备好 sql 注入了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:59:30.523

您正在设置的变量被调用`$iclei`，但`if`条件中的变量被调用`$iceli`。注意拼写差异。为了让 PHP 就此类错误向您发出警告，您可能希望查看[此问题](https://stackoverflow.com/questions/3193072/strict-mode-in-php "变量 - PHP 中的严格模式")的答案之一。

# jquery-ui - ajax成功时数据表刷新

> ID：11236474
> 
> 赞同：0
> 
> 时间：2012-06-28T00:14:21.473
> 
> 标签：jquery-ui, jquery, jquery-selectors

我有来自 jquery 插件 dataTables (http://datatables.net/) 的数据表，我想在 ajax 成功后刷新它。我尝试了以下代码，但它不起作用。任何帮助将不胜感激

```
$(document).ready(function() {
    oTable = $('#mytable').dataTable();
    var fa = 0;
    $('#submit tbody td ').click(function() {
    var gCard = $('#mytable tbody').delegate("tr", "click", rowClick);

    });
    function rowClick() {
        fa = this;
        var id  = $("td:eq(1)", this).text();
        cardNumber = $.trim(id);    
        $.ajax({
            url : 'myurltopostto',
            type : 'POST',
            data : {
                id  :   id

            },
            success : function(data) {
                oTable.fnDraw(); //wanted to update here
            },
            error : function() {
                console.log('error');
            }
        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:39:36.653

您可以使用 :`fnDeleteRow`这将负责在内部刷新表格 html 和数据，在此处查找 API 详细信息：

[http://datatables.net/ref](http://datatables.net/ref)

```
 oTable.fnDeleteRow( fa ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T04:47:57.063

你好，亲爱的程序员...对不起...我的英语很糟糕，但我可以帮助你...我的以下内容是：

```
 <script type="text/javascript">

        function Ajax()
        {
            var
                $http,
                $self = arguments.callee;

            if (window.XMLHttpRequest) {
                $http = new XMLHttpRequest();
            } else if (window.ActiveXObject) {
                try {
                    $http = new ActiveXObject('Msxml2.XMLHTTP');
                } catch(e) {
                    $http = new ActiveXObject('Microsoft.XMLHTTP');
                }
            }

            if ($http) {
                $http.onreadystatechange = function()
                {
                    if (/4|^complete$/.test($http.readyState)) {
                        document.getElementById('ReloadThis').innerHTML = $http.responseText;
                        setTimeout(function(){$self();}, 10000);
                        $( this ).hide( "slow" );
                    }
                };
                $http.open('GET', 'cls_Noticias/last_noticias.php', true);
                $http.send(null);
            }

        }

    </script>

</head>
<body>

    <script type="text/javascript">
        setTimeout(function() {Ajax();}, 10000);
    </script>

    <div id="ReloadThis">Espere a que la pagina se actualice!</div>

</body> 
```

美好生活！

# java - 将单个字节与字节数组进行比较

> ID：11236476
> 
> 赞同：2
> 
> 时间：2012-06-28T00:14:35.153
> 
> 标签：java, string, byte

我需要验证在一个类中生成的代码与在另一个类中验证的代码相同。但扭曲的是在其他类中使用的逻辑不同。就像这样。

A类：

String = "0A2D" （假设）我使用了 substring 方法，取出 0A ， 2D 并将它们转换为十进制值并将它们存储为字节。最终结果看起来像这样

int a1 = (byte) Integer.parseInt(s,16); 这里 s= 0A
int a2 = (byte) Integer.parseInt(s,16); 这里 s= 2D

所以 a1 将是 10（1 字节内存）， a2 将是 45（1 字节内存）

B类：

在这个类中，我应该使用 getBytes() 方法。但是当我使用它时，我看到一些奇怪的 o/p 说 [B@...... 首先我需要关于那里实际发生的事情的信息。它是如何编码的。其次这里的o/p应该是与A类的o/p匹配的字节数组。即

byte[] b = {a1a2} (内存 2bytes) b = {1045}

所以最后 A 将有 2 个值，每个值 1 个字节。但是 B 将有一个数组，该数组具有相同的两个值，但内存大小为 2 字节。

我希望我的问题很清楚并且没有混淆。

您的帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:17:55.257

您的语言有点不清楚，但我认为以下内容可以满足您的要求：

```
byte[] b = new byte[] { a1, a2 }; 
```

数组初始化器是该语言的一个非常有用的特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:40:43.643

哪一行代码给出了输出“[B@......”？（我假设这些点意味着您截断了输出。）这个特定的输出看起来好像您正在尝试打印数组*引用*而不是数组的元素。您应该使用 for 循环来打印单个元素或使用 Array.toString() 来获取数组的字符串表示形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T01:10:18.730

打印数组时，您可能只是打印错了使用 Arrays.toString(arr)

我假设当你说 byte[] b = {a1a2} 你的意思是 byte[] b = {a1,a2}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T03:00:59.160

如果要打印出 byte[] 的内容，则需要先将其转换为 String。

这是将字节数组转换为可读字符串的有用方法：

```
public static String toHexString(byte[] data)
{
    if (data == null) return "";

    char[] hexArray = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
    char[] hexChars = new char[data.length * 2];
    int v;

    for ( int j = 0; j < data.length; j++)
    {
        v = data[j] & 0xFF;
        hexChars[j*2] = hexArray[v/16];
        hexChars[j*2 + 1] = hexArray[v%16];
    }

    return new String(hexChars);
} 
```

从那里你应该能够解决剩下的问题。

# vms - 如何使用 DCL 在文件中搜索文本

> ID：11236478
> 
> 赞同：1
> 
> 时间：2012-06-28T00:14:48.627
> 
> 标签：vms, dcl

如何使用 DCL 在文件中搜索文本？是的，我必须使用 DCL。

文件格式很简单：

```
<NUMBER OF ENTRIES>
<ID>  <DIRECTORY>
<ID>  <DIRECTORY>
.
.
.
<ID>  <DIRECTORY> 
```

它们由几个空白字符分隔。我只需要在文件中搜索给定的 ID 并提取 DIRECTORY。

这是一项非常简单的任务，但我似乎在任何地方都找不到任何像样的 DCL 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:25:50.597

```
Edited.... the forum 'eats' strings like <xx> unless marked as code. 
```

数据线上是否有尖括号？请提供一个真实的例子是它还是：XX XXX-DIRECTORY

我假设第一个。

随附的 VMS 没有从记录中选择字段的标准工具。但是有一堆标准工具可用于 OpenVMS 可以做到这一点。最值得注意的是 (g)AWK 和 PERL 所以这就是我要使用的：

```
$ gawk /comm="$1 == ""<xx>"" { print $2 }" tmp.tmp
<xxx-DIRECTORY> 
```

或者

```
$ perl -ne "print $1 if /^\s*<xx>.*?<([^>]*)/" tmp.tmp
xxx-DIRECTORY 
```

可以根据需要增强这些以区分大小写和空格，并根据需要修剪 <>。也许您需要将搜索 ID 作为参数。

无论如何，在纯 DCL 脚本中，它可能看起来像....

```
$ IF p2.eqs."" then exit 16
$ CLOSE/NOLOG file
$ OPEN/READ file 'p1
$loop:
$ READ/END=done file rec
$ id = F$EDIT( F$ELEM(0,">",F$ELEM(1,"<",rec)), "UPCASE")
$ IF id.NES.p2 THEN  GOTO loop
$ dir = F$ELEM(0,">",F$ELEM(2,"<",rec))
$ WRITE SYS$OUTPUT dir
$ GOTO loop
$done:
$CLOSE/NOLOG file 
```

如果 <> 不存在，则将其用于核心...

```
$ rec = F$EDIT(rec,"TRIM,COMPRESS")
$ id = F$EDI(F$ELEM(0," ",rec),"UPCASE")
$ IF id.NES.p2 THEN  GOTO loop
$ dir = F$ELEM(1," ",rec) 
```

perl 将是：

```
$ perl -ne "print $1 if /^\s*<xx>\s+(\S+)/" tmp.tmp 
```

祝海因好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:18:36.883

或者，如果 ID 字段看起来像固定宽度，那么您可以将文件转换为 RMS INDEXED ，键入 ID 字段。然后你可以通过调用来进行查找`READ/KEY='ID'`。

在 CONVERT 、 READ /KEY 和 SEARCH /KEY 上调用 HELP

# php - the_time() 无法正常工作，需要新手帮助

> ID：11236479
> 
> 赞同：2
> 
> 时间：2012-06-28T00:14:57.457
> 
> 标签：php, wordpress, date

我想在 div 中分别包装月、日和年，我尝试这样做

```
function posted_on_main_page() {
    $format= '<div class="posted-date">
                  <div class="posted-month">%1$s</div>
                  <div class="posted-day">%2$s</div>
                  <div class="posted-year">%3$s</div>
              </div>';
    $month = the_time('M');
    $date = the_time('j');
    $year = the_time('Y');
    printf($format, $month, $date, $year);

} 
```

但是由于某些原因，当我检查元素时，它会在所有内容之前显示日期

```
Jun272012<div class="posted-date">
              <div class="posted-month"></div>
              <div class="posted-day"></div>
              <div class="posted-year"></div>
         </div> 
```

如果您有另一种单独包装日期的解决方案，请帮助我。
提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:20:17.563

与其调用**the_time($format)**，不如使用**[get_the_time($format)](http://codex.wordpress.org/Function_Reference/get_the_time)**。这将返回值，而不是立即回显它。

# c# - Java 强制接受 SSL 证书

> ID：11236483
> 
> 赞同：0
> 
> 时间：2012-06-28T00:15:25.480
> 
> 标签：c#, java, ssl, certificate

仅出于开发目的，我试图强制 java 接受来自我们服务器的 SSL 证书。在 c# 中，我能够做到这一点：

```
 public class MyPolicy : ICertificatePolicy
    {
        public bool CheckValidationResult(
          ServicePoint srvPoint
        , X509Certificate certificate
        , WebRequest request
        , int certificateProblem)
        {

        //Return True to force the certificate to be accepted.
        return true;

        } // end CheckValidationResult
    } // class MyPolicy 
```

并在连接到服务器之前实例化它：

```
System.Net.ServicePointManager.CertificatePolicy = new MyPolicy(); 
```

Java中是否有类似的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:35:43.143

> 仅出于开发目的，我试图强制

'仅出于开发目的'，你是非常不明智的尝试任何这样的事情。您的开发在它正常工作之前是毫无价值的，即正确地，即在这种情况下正确地处理证书。构建创可贴只是浪费时间，而在安全问题之上构建创可贴是您甚至不应该考虑的**重大安全风险。**我严重怀疑这些“创可贴”中的许多都是通过委托或遗漏进入生产环境的，因此世界上许多基于 SSL 和 HTTPS 的系统根本不安全。不要加入他们。了解您遇到问题的原因并解决*问题。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:27:57.937

正确的方法是将此证书导入您的信任库中。（我知道......这只是开发代码，但我们都知道，有时我们有时会忘记删除一些不必要的代码，有时会在压力下，一旦它工作。）

不太理想的方法是构建一个不验证任何内容的信任管理器。

如果您以正确的方式进行操作，您可能不必`SSLContext`手动处理（创建`SSLSocketFactory`并使用它配置您的客户端）：默认位置或系统属性可能就足够了。

如果你想要一个自定义的信任管理器，你将不得不创建你自己的（如果你也以正确的方式从特定的信任存储`SSLContext`中初始化一个是有意义的，这绝对没有错。）`SSLContext`

您可以在[此答案](https://stackoverflow.com/a/9003614/372643)中找到有关此的更多详细信息（除了您不需要特定于 Restlet 的内容）。

您如何将它`SSLContext`（或结果`SSLSocketFactory`）传递给您的应用程序取决于您使用的框架。

# python - 如何在 wxpython 中添加指向我的菜单项的链接？

> ID：11236485
> 
> 赞同：1
> 
> 时间：2012-06-28T00:16:00.893
> 
> 标签：python, wxpython

如何在 wxpython 中添加指向我的菜单项的链接？我想要的是当用户单击菜单项时，它将转到我的网站。这甚至可能吗？

提前致谢！！哦，我对编程和 python 还很陌生，所以如果你能把它简化一点，那将不胜感激！谢谢

这是我的代码：

```
 import wx

class MainWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Python Test App',size=(600,400))
        panel=wx.Panel(self)
        wx.Frame.CenterOnScreen(self)
        self.SetBackgroundColour(wx.BLACK)

    ##MENU AND STATUS BAR
        status=self.CreateStatusBar()
        menubar=wx.MenuBar()
        file_menu=wx.Menu()
        help_menu=wx.Menu()

        ID_FILE_NEW = 1
        ID_FILE_EXIT = 2

        ID_HELP_ABOUT = 3
        ID_HELP_WEB = 4

        file_menu.Append(ID_FILE_NEW,"New Window","This will open a new window")
        file_menu.Append(ID_FILE_EXIT,"Exit","This will exit the program")

        help_menu.Append(ID_HELP_ABOUT,"About","This will tell you about %name%")
        help_menu.Append(ID_HELP_WEB,"Visit Website","This will take you to worm-media.host56.com")

        menubar.Append(file_menu,"File")
        menubar.Append(help_menu,"Help")
        self.SetMenuBar(menubar)

        self.Bind(wx.EVT_MENU, self.newWin, None, 1)
        self.Bind(wx.EVT_MENU, self.close, None, 2)
        self.Bind(wx.EVT_MENU, self.about, None, 3)
        ##self.Bind(wx.EVT_MENU, self.web, None, 4)

        heading = wx.StaticText(panel, -1, 'Welcome to My App', (144,10))
        heading.SetForegroundColour(wx.RED)
        font1 = wx.Font(20, wx.DEFAULT, wx.NORMAL, wx.BOLD)
        heading.SetFont(font1)

    def newWin(self, event):
        self.new = NewWindow(parent=None, id=-1)
        self.new.Show()

    def close(self, event):
        box=wx.MessageDialog(None, 'Are you sure you want to exit?', 'Exit program?', wx.YES_NO)
        answer=box.ShowModal()
        if answer==wx.ID_YES:
            self.Destroy()

    def about(self, event):
        self.new = AboutWindow(parent=None, id=-1)
        self.new.Show()

    ##def web(self, event):

class NewWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self, parent, id, 'New Window', size=(400,300))
        wx.Frame.CenterOnScreen(self)
        ##panel2=wx.Panel(self)
        name_text = wx.StaticText(self, -1, 'What is your name?')
        name = wx.TextCtrl(self, -1, '', (100,0))
        font2 = wx.Font(8, wx.DEFAULT, wx.NORMAL, wx.NORMAL)
        name_text.SetFont(font2)

class AboutWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self, parent, id, 'About', size=(300,190))
        wx.Frame.CenterOnScreen(self)
        self.SetBackgroundColour(wx.WHITE)
        about_bg = 'about_bg.jpg'
        bmp1 = wx.Image(about_bg, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
        self.bitmap1 = wx.StaticBitmap(self, -1, bmp1, (0,0))

        ##ABOUT_TEXT
        by_text =  wx.StaticText(self, -1, 'Made By: Worm', (50,70))
        version_text = wx.StaticText(self, -1, 'Version: 1.0', (50,90))
        website_text = wx.StaticText(self, -1, 'Website: worm-media.host56.com', (50,110))

        ##ABOUT_FONTS
        by_font = wx.Font(10, wx.DEFAULT, wx.NORMAL, wx.NORMAL)
        version_font = wx.Font(10, wx.DEFAULT, wx.NORMAL, wx.NORMAL)
        website_font = wx.Font(10, wx.DEFAULT, wx.NORMAL, wx.NORMAL)

        by_text.SetFont(by_font)
        version_text.SetFont(version_font)
        website_text.SetFont(website_font)

        ##ABOUT_COLORS
        by_text.SetBackgroundColour(wx.WHITE)
        version_text.SetBackgroundColour(wx.WHITE)
        website_text.SetBackgroundColour(wx.WHITE)

##RUN##

if __name__=='__main__':
        app=wx.PySimpleApp()
        frame=MainWindow(parent=None,id=-1)
        frame.Show()
        app.MainLoop() 
```

到目前为止，这是我的代码。我真的没有尝试过任何事情，因为我什至不知道从哪里开始。我试着在网上寻找如何做到这一点，结果却是空的。我想我要问的只是如何从 about/Visit Website 下的菜单栏中用 python 链接到我的网站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T01:57:39.387

你想要的功能实际上是内置在 Python 中的。检查[网络浏览器 API](http://docs.python.org/library/webbrowser.html)。具体看`webbrowser.open()`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:04:13.307

在特定菜单的事件处理程序中，您可以使用 Python 自己的 webbrowser,open() 方法。或者您可以使用 subprocess 打开特定的浏览器（假设安装了多个浏览器）。后者会给你更多的控制权。还有 os.startfile()，但我不确定在这种情况下是否可行。

# java - Switch 的效率是否值得将其用于嵌套条件而不是 if，否则？

> ID：11236490
> 
> 赞同：0
> 
> 时间：2012-06-28T00:16:49.710
> 
> 标签：java, if-statement, switch-statement

我用java编写了一个程序，其中一部分必须评估蛋白质序列中的切割。我必须评估分裂是否发生在两端的某些组中，这会导致 if、else/elseif 语句在几个地方带有烦人的逻辑、嵌套或只有几个“if”和/或“else”。我使用 switch 作为每次发生分裂时必须评估几个“if”和逻辑（&&，||）的替代方案（这个循环将逐字迭代数百万次，可能是数千万或数亿次）。

继承人的代码块： -.getSeq() 获取一个表示蛋白质序列的字符串 -startPos 和 endPos 是任一端的切割的索引 - 对不起，如果 if 语句行被分成多行或复杂，但那是我的案例和关于逻辑的观点。

```
/**0: non-tryptic, 1: half-tryptic, 2: fully tryptic**************/
public boolean checkPep(int trypticity){
    boolean evaluator = false;
    int prev = 0;
    if (startPos != 0){
        prev = 1;
    }
    switch(trypticity){
/**do not check cleavage if peptide can be non-tryptic*/
    case 0:
        evaluator = true;
        break;
/***half-tryptic*/
/**check if either the start OR end cleavage is tryptic*/
    case 1:
        switch(protein.getSeq().charAt(startPos-prev)){
        case 'K':
            evaluator = true;
            break;
        case 'R':
            evaluator = true;
            break;
        default :
            switch(protein.getSeq().charAt(endPos)){
            case 'K':
                evaluator = true;
                break;
            case 'R':
                evaluator = true;
                break;
            default:
                evaluator = false;
                break;
            }
            break;
        }
        break;
/**fully tryptic*/
/**if first cleavage is tryptic, check end cleavage*/
/**evaluator = true IFF both cleavages are tryptic*******/
    case 2:
        if(((protein.getSeq().charAt(startPos-1)) == 'K') || ((protein.getSeq().charAt(startPos-1)) == 'R')){
            if(((protein.getSeq().charAt(endPos)) == 'K') || ((protein.getSeq().charAt(endPos)) == 'R')){
                evaluator = true;
            }else{
                evaluator = false;
            }
        }else{
            evaluator = false;
        }
        break;
    }
    return evaluator;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:38:30.763

这种事情就是我们所说的微优化。

使用 a`switch`而不是`if`链可能是有益的……也可能不是。这在很大程度上取决于上下文。

唯一可以确定的方法是仔细地对代码进行基准测试，比较有和没有潜在优化的版本。*首先*进行概要分析也是一个好主意，这样您就不会浪费时间优化无关紧要的代码。

请注意，给定微优化的效果*可能*会因您的实际执行硬件、操作系统和 JVM 版本/风格而异。（可能还有其他事情......比如有多少物理内存可用以及堆有多大。）预测第一原理的好处是困难的，而且平台变化总是有可能否定你所有的手动调整工作.

# php - 如何在同一个文件中分离查询

> ID：11236492
> 
> 赞同：0
> 
> 时间：2012-06-28T00:17:05.120
> 
> 标签：php, mysqli

我真的很挣扎。我有一个 viewdetails.php 页面、addnew.php 页面和一个 php.php。php.php 页面有我对这两个页面的查询。首先，我有在 viewdetails.php 上显示结果的查询，第二个是在 addnew.php 页面上显示结果的查询。我遇到的问题是，当我在浏览器中打开 addnew.php 时，它给了我关于 dbandpassword.php 的路径和 viewdetails.php 查询中的其他项目的错误。

如何将所有这些查询保存在一个页面 (php.php) 中并将它们分开，以免出现错误？我应该将这两个查询组合在一起还是只是其中的一部分？我知道代码需要清理，我现在并不担心。我也知道，如果将查询放在自己的文件（php.php，php2.php）中，它们都可以单独工作。

```
 <?php

 ob_start(); 
 require("../admin/dbandpassword.php");
 ob_end_clean(); 

// FETCH LEAD INFORMATION - this is query for viewdetails.php

 $query = ("SELECT * FROM contacts WHERE contacttype IN ('Buyer','Seller','Buyer / Seller','Investor') AND leadstatus = 'New' ORDER BY date DESC");

$result = $mysqli->query($query) or die ("Error: ".mysqli_error($mysqli,$query));
while ($row = $result->fetch_array()) {

$firstname = $row ['firstname'];     
$lastname = $row['lastname'];
$ID = $row['ID'];   
$partner  = $row['spousefirst'];   
$phonecell = $row['phonecell'];
$email = $row['email'];
$date = $row['date'];
$contacttype = $row['contacttype'];
$agentassigned = $row['agentassigned'];
$leadstatus = $row['leadstatus'];

echo'
     <table>
     <tbody>       
     <tr>
        <td width="10"><input type="checkbox" name="" id="" value="'.$ID.'"></td>
        <td><a href="/backend/leads/view/?ID='.$ID.'"><strong>'.$firstname.' '.$lastname.'</strong></a></td>
        <td><a href="/backend/leads/view/?ID='. $ID.'">'.$partner.'</a></td>
        <td>'.$phonecell.'</td>
        <td><a href="mailto:'. $email.'">'.$email.'</a></td>
        <td>'.date("M jS, g:i A", strtotime($date)).'</td>
        <td>'.$contacttype.'</td>
        <td>'.$agentassigned.'</td>
        <td>'.$leadstatus.'</td>
        <td><a href="/backend/contacts/notes.php?ID='.$ID.'">View </a>+</td>
        <td><a href="/backend/contacts/todo.php?ID='.$ID.'">View </a>+</td>
        <td><a href="/backend/contacts/deletesuccess.php?ID='.$ID.'">D</a></td>
       </tr>
       </tbody>
       </table>';
         }

// ADD LEAD - this would be for addnew.php page

       if (isset($_POST['firstname']))
       {

       require("../../admin/dcandpassword.php"); // NOTE THE DIFFERENT PATH THAN ABOVE BECAUSE addnew.php IS A FOLDER DEEPER

       $ID = $_POST['ID'];
       $date = mysqli_real_escape_string($con,$_POST['NOW()']);
       $firstname = mysqli_real_escape_string($mysqli,$_POST['firstname']);
       $lastname = mysqli_real_escape_string($mysqli,$_POST['lastname']);
       $spousefirst = mysqli_real_escape_string($mysqli,$_POST['spousefirst']);
       $spouselast = mysqli_real_escape_string($mysqli,$_POST['spouselast']);
       $primarybday = mysqli_real_escape_string($mysqli,$_POST['primarybday']);
       $spousebday = mysqli_real_escape_string($mysqli,$_POST['spousebday']);
       $phonecell = mysqli_real_escape_string($mysqli,$_POST['phonecell']);
       $phonehome = mysqli_real_escape_string($mysqli,$_POST['phonehome']);
       $phoneoffice = mysqli_real_escape_string($mysqli,$_POST['phoneoffice']);
       $spousecell = mysqli_real_escape_string($mysqli,$_POST['spousecell']);
       $phoneother = mysqli_real_escape_string($mysqli,$_POST['phoneother']);
       $email = mysqli_real_escape_string($mysqli,$_POST['email']);
       $emailspouse = mysqli_real_escape_string($mysqli,$_POST['emailspouse']);
       $emailother = mysqli_real_escape_string($mysqli,$_POST['emailother']);
       $emailspouseother = mysqli_real_escape_string($mysqli,$_POST['emailspouseother']);
       $address = mysqli_real_escape_string($mysqli,$_POST['address']);
       $suite = mysqli_real_escape_string($mysqli,$_POST['suite']);
       $city = mysqli_real_escape_string($mysqli,$_POST['city']);
       $state = mysqli_real_escape_string($mysqli,$_POST['state']);
       $zipcode = mysqli_real_escape_string($mysqli,$_POST['zipcode']);
       $addressother = mysqli_real_escape_string($mysqli,$_POST['addressother']);
       $suiteother = mysqli_real_escape_string($mysqli,$_POST['suiteother']);
       $cityother = mysqli_real_escape_string($mysqli$_POST['cityother']);
       $stateother = mysqli_real_escape_string($mysqli,$_POST['stateother']);
       $zipcodeother = mysqli_real_escape_string($mysqli,$_POST['zipcodeother']);
       $agentassigned = mysqli_real_escape_string($mysqli,$_POST['agentassigned']);
       $contacttype = mysqli_real_escape_string($mysqli,$_POST['contacttype']);
       $contactstatus = mysqli_real_escape_string($mysqli,$_POST['contactstatus']);
       $leadstatus = mysqli_real_escape_string($mysqli,$_POST['leadstatus']);
       $contactsource = mysqli_real_escape_string($mysqli,$_POST['contactsource']);
       $timing = mysqli_real_escape_string($mysqli,$_POST['timing']);
       $password = mysqli_real_escape_string($mysqli,$_POST['password']);
       $subscribesearches = mysqli_real_escape_string($mysqli,$_POST['subscribesearches']);
       $subscribedrips = mysqli_real_escape_string($mysqli,$_POST['subscribedrips']);

       $query = ("INSERT INTO contacts (date, firstname, lastname, spousefirst, spouselast, primarybday, spousebday, phonecell, phonehome, phoneoffice, spousecell, phoneother, email, emailspouse, emailother, emailspouseother, address, suite, city, state, zipcode, addressother, suiteother, cityother, stateother, zipcodeother, agentassigned, contacttype, contactstatus, leadstatus, contactsource, timing, password, subscribesearches, subscribedrips) VALUES (NOW(), '$firstname', '$lastname', '$spousefirst', '$spouselast', '$primarybday', '$spousebday', '$phonecell', '$phonehome', '$phoneoffice', '$spousecell', '$phoneother', '$email', '$emailspouse', '$emailother', '$emailspouseother', '$address', '$suite', '$city', '$state', '$zipcode', '$addressother', '$suiteother', '$cityother', '$stateother', '$zipcodeother', '$agentassigned', '$contacttype', '$contactstatus', '$leadstatus', '$contactsource', '$timing', '$password', '$subscribesearches', '$subscribedrips')");

       mysqli_query($mysqli,$query) or die ("Error: ".mysqli_error($mysqli));

       header("location: http://www.mydomain.com/backend/leads/edit/?ID=".mysqli_insert_id($mysqli));

  exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:22:12.963

您确实需要担心的不仅仅是分离查询，而是它们似乎彼此独立（一个是 INSERT，一个是 SELECT，它们不是事务的一部分）。

这里真正的错误可能是您在一个页面上需要两次相同的文件，这既不必要又危险。删除第二个 require 语句。

# silverlight - 在silverlight 中使用comboxBox 进行数据绑定

> ID：11236493
> 
> 赞同：0
> 
> 时间：2012-06-28T00:17:24.833
> 
> 标签：silverlight, linq, wcf-ria-services

我正在尝试使用 dataContext 来填充组合框，但总是一无所获：

```
EntityQuery<Tests> testQ = myDomainContext.GetTestQuery().Where(t => t == 5);
LoadOperation<Tests> loadOp = myDomainContext.Load(testQ)
comboxBoxTest.ItemSource = loadOp.Entities.Select(t => t.Name).Distinct().ToList(); 
```

有人可以告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T05:07:21.300

您可能不加载实体。尝试

```
EntityQuery<Tests> testQ = myDomainContext.GetTestQuery().Where(t => t == 5);
LoadOperation<Tests> loadOp = myDomainContext.Load(testQ);
loadOp.Completed += (o, e) =>
    {
        comboxBoxTest.ItemSource = loadOp.Entities.Select(t => t.Name).Distinct().ToList();
    }; 
```

或者

```
myDomainContext.Load(testQ, new Action<LoadOperation<Tests>>(result =>
    {
        comboxBoxTest.ItemSource = result.Entities.Select(t => t.Name).Distinct().ToList();
    }), null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:13:49.860

您可能知道，大多数操作**`RIA`**都是异步的。您应该在执行查询时意识到这一点。
由于这些原因，您必须使用回调方法（@Zabavsky 的答案很好）。另外，我略微建议您使用**`MVVM`**模式而不是代码隐藏混乱。这将使您的代码和*逻辑*更清晰。

# android - 点击发送时强制关闭

> ID：11236495
> 
> 赞同：0
> 
> 时间：2012-06-28T00:17:48.973
> 
> 标签：android, string, methods

我一直在从 android 开发者网站学习我的应用程序。我输入它，然后当我点击发送时它强制关闭。这是我的一些有问题的代码。这是从应用程序首次显示到我点击发送按钮的活动：

```
package gov.gforce.myapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class MyFirstAppActivity extends Activity {
    public final static String EXTRA_MESSAGE = "gov.gforce.myapp.MESSAGE";

    /** Called when the activity is first created */
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void sendMessage(View view) {
        /** Called when the user selects the Send button*/
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById (R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent); 
```

这是按下按钮后显示屏上的活动：

```
public class DisplayMessageActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        Intent intent = getIntent();
        String message = intent.getStringExtra(MyFirstAppActivity.EXTRA_MESSAGE);{

        }

       // Create the text view
       TextView textView = new TextView(this);
       textView.setTextSize(40);
       textView.setText(message);

       setContentView(textView); 
```

这是我的应用清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="gov.gforce.myapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MyFirstAppActivity"
        android:label="@string/app_name" >
        <activity android:name="gov.gforce.myapp.DisplayMessageActivity"/>
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:55:33.420

至少，您的清单对于`<activity>`元素的格式是错误的......

```
<activity
    android:name=".MyFirstAppActivity"
    android:label="@string/app_name" >
    <activity android:name="gov.gforce.myapp.DisplayMessageActivity"/>
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

你已经将你的嵌入`DisplayMessageActivity`到你的`MyFirstAppActivity`块中。改成这个...

```
<activity
    android:name=".MyFirstAppActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity android:name="gov.gforce.myapp.DisplayMessageActivity"/> 
```

我也有点担心您粘贴其他一些代码的方式，但只要那里只是拼写错误，它可能不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T06:02:14.803

你的 AndroidManifest 声明是错误的标签不应该被嵌套，像这样改变你的 AndroidManifest：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="gov.gforce.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MyFirstAppActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".DisplayMessageActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:56:29.317

您已经设法以某种方式嵌套了您的活动……这些活动实际上应该在 xml 清单中的应用程序标记中并排声明。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity android:name=".MyFirstAppActivity">
       <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>

    <activity android:name="gov.gforce.myapp.DisplayMessageActivity"/>

</application> 
```

您需要学习如何阅读 logcat 消息。欲了解更多信息，请访问 developer.android.com

# android - 要在 java 文件中引用自定义视图并将它们全部放在一个 XML 布局中？

> ID：11236499
> 
> 赞同：0
> 
> 时间：2012-06-28T00:17:56.503
> 
> 标签：android, android-layout, android-view, android-custom-view

我想在 main.xml 文件的底部放置一个自定义视图。以下是我的 Activity 类和我的自定义视图类（game.java）：我希望游戏视图出现在 main.xml 文件的底部.请告诉我如何继续使用它....我认为这个想法是在 main.xml 中设置一个布局，然后在布局上设置自定义视图。我的主要目标是让自定义视图出现在底部main.xml 布局的一半。请帮帮我！！！！！！

//学习活动

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //For my button class
    /*
    MyButton myb = (MyButton)findViewById(R.id.mybutton1);
    myb.setText("Hello Students");
    myb.setTextSize(40);
    **/

    //For custom view
    setContentView(R.layout.main);
    RelativeLayout r=(RelativeLayout) findViewById(R.id.relative1);
    g=new game(this,null);
            ViewGroup vgroup=(ViewGroup) findViewById(R.id.main);
     vgroup.addView(g);
    Thread mythread=new Thread(new UpdateThread());
    mythread.start();

} 
```

Game.java（自定义视图）

```
public class game extends View{

private Bitmap image;
    private Paint paint;
    private int x=0;private int baseY = 250;

public game(Context context,AttributeSet attrs) {
    super(context,attrs);

    this.inflate(context, R.layout.example, null);
    image=Bitmap.createBitmap(BitmapFactory.decodeResource(this.getResources(),R.drawable.ic_launcher));
    paint =new Paint();
    paint.setColor(Color.BLUE);

}

public View getlay (RelativeLayout r)
{
    return r;
}

public void onDraw(Canvas canvas)
    {
    super.onDraw(canvas);
    canvas.drawLine(90, baseY,200,baseY, paint);
    canvas.drawLine(125,baseY,125,baseY-100,paint);
    canvas.drawLine(110,baseY,125,baseY-15,paint);
..................

} 
```

)

日志猫：

```
 06-28 22:43:59.757: E/AndroidRuntime(505): FATAL EXCEPTION: main
06-28 22:43:59.757: E/AndroidRuntime(505): java.lang.RuntimeException: Unable to start activity ComponentInfo{your.com.learn/your.com.learn.LearningActivity}: android.view.InflateException: Binary XML file line #9: Error inflating class your.com.learn.game
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.os.Looper.loop(Looper.java:123)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-28 22:43:59.757: E/AndroidRuntime(505):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 22:43:59.757: E/AndroidRuntime(505):  at java.lang.reflect.Method.invoke(Method.java:507)
06-28 22:43:59.757: E/AndroidRuntime(505):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-28 22:43:59.757: E/AndroidRuntime(505):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-28 22:43:59.757: E/AndroidRuntime(505):  at dalvik.system.NativeStart.main(Native Method)
06-28 22:43:59.757: E/AndroidRuntime(505): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class your.com.learn.game
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.view.LayoutInflater.createView(LayoutInflater.java:508)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
06-28 22:43:59.757: E/AndroidRuntime(505):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.app.Activity.setContentView(Activity.java:1657)
06-28 22:43:59.757: E/AndroidRuntime(505):  at your.com.learn.LearningActivity.onCreate(LearningActivity.java:38)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-28 22:43:59.757: E/AndroidRuntime(505):  ... 11 more
06-28 22:43:59.757: E/AndroidRuntime(505): Caused by: java.lang.NoSuchMethodException: game(Context,AttributeSet)
06-28 22:43:59.757: E/AndroidRuntime(505):  at java.lang.Class.getMatchingConstructor(Class.java:643)
06-28 22:43:59.757: E/AndroidRuntime(505):  at java.lang.Class.getConstructor(Class.java:472)
06-28 22:43:59.757: E/AndroidRuntime(505):  at android.view.LayoutInflater.createView(LayoutInflater.java:480)
06-28 22:43:59.757: E/AndroidRuntime(505):  ... 21 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:52:58.907

除了上面的答案，我还必须添加“AttributeSet attr”参数，因此游戏视图构造函数被命名为

> 公共游戏（上下文上下文，AttributeSet attr）

现在视图出现在 XML 布局中。将其放在底部是下一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:35:40.090

使您的 main.xml 布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <!-- Some others widgets here -->

    <yourpackagename.Game
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

并打电话`sentContentView(R.layout.main)`

# ssh - SSH 和 SSHPASS 机器在线或离线的条件

> ID：11236500
> 
> 赞同：1
> 
> 时间：2012-06-28T00:18:01.323
> 
> 标签：ssh

我需要为远程备份制作 bash 文件。如果远程机器出现故障，我想通过电子邮件发送提醒。所以这个脚本需要测试远程机器是否开启了 ssh，如果有，则进行备份，否则发送邮件。

```
sshpass -p pass ssh -l root $host
this give me connection timed out if remote machine is down and ok wheen it is online

1condition, do it when machine is on
.....rsync backup....

2condition, do it wheen machine is down
...sending mail.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:36:58.067

我认为你过于复杂了; 您真正关心的是*备份*——以及备份是成功还是失败。

尝试这个：

```
rsync -avz /local/path root@$host:/remote/path || echo "failed" | mail -s "Backup failed" username@machine 
```

重要的部分是`||`如果命令的退出代码`rsync`指示失败 - 出于任何原因，则执行该行的其余部分。

# windows - C/C++ 中的跨平台 unicode：使用哪种编码？

> ID：11236501
> 
> 赞同：9
> 
> 时间：2012-06-28T00:18:06.537
> 
> 标签：windows, linux, unicode, cross-platform, wchar-t

我目前正在开发一个爱好项目 (C/C++)，它应该可以在 Windows 和 Linux 上运行，并完全支持 Unicode。可悲的是，Windows 和 Linux 使用不同的编码使我们的生活更加困难。

在我的代码中，我试图尽可能通用地使用数据，从而使 Windows 和 Linux 都易于使用。在 Windows 中，wchar_t 默认编码为 UTF-16，在 Linux 中编码为 UCS-4（如果我错了，请纠正我）。

我的软件打开（{_wfopen、UTF-16、Windows}、{fopen、UTF-8、Linux}）并将数据写入 UTF-8 文件。到目前为止，这一切都是可行的。直到我决定使用 SQLite。

SQLite 的 C/C++ 接口允许一个或两个字节的编码字符串（[点击](http://www.sqlite.org/c3ref/column_blob.html)）。当然这不适用于 Linux 中的 wchar_t，因为 Linux 中的 wchar_t 默认为 4 个字节。因此，从 sqlite 写入和读取需要在 Linux 上进行转换。

目前，代码因 Windows/Linux 的异常而杂乱无章。我希望坚持在 wchar_t 中存储数据的标准理念：

*   Windows 中的 wchar_t：文件路径没有问题，读取/写入 sqlite 没有问题。无论如何，都应该以 UTF-8 将数据写入文件。
*   Linux 中的 wchar_t：由于 UTF-8 编码、读取/写入到 sqlite (wchar_t) 之前的转换以及将数据写入文件时的 windows 相同，文件路径例外。

阅读（[此处](https://stackoverflow.com/questions/3298569/difference-between-mbcs-and-utf-8-on-windows)）后，我确信我应该在 Windows 中坚持使用 wchar_t。但在完成所有这些工作之后，麻烦就从移植到 Linux 开始了。

目前我正在考虑重做这一切以坚持使用简单的字符（UTF-8），因为它适用于 Windows 和 Linux，请记住我需要在 Windows 中的每个字符串“WideCharToMultiByte”以实现 UTF-8。使用简单的基于 char* 的字符串将大大减少 Linux/Windows 的异常数量。

你有跨平台使用 unicode 的经验吗？关于简单地将数据存储在 UTF-8 中而不是使用 wchar_t 的想法有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T00:21:37.643

所有平台上的 UTF-8，在 Windows 上即时转换为 UTF-16 是跨平台 Unicode 的常用策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T00:41:46.067

我们的软件也是跨平台的，我们也面临类似的问题。我们决定我们的目标是尽可能减少转化次数。这意味着我们`wchar_t`在 Windows 和`char`Unix/Mac 上使用。

我们通过在 Unix 上支持`_T`和和类似以及通过具有在和`LPCTSTR`之间轻松转换的通用函数来做到这一点。我们还有一个在大多数情况下使用的通用( )。`std::string``std::wstring``std::basic_string<TCHAR>``tstring`

到目前为止，这工作得很好。基本上大多数函数都采用 a`tstring`或 a `LPCTSTR`，而那些没有的函数将从 a 转换它们的参数`tstring`。这意味着大多数时候我们不会转换字符串并传递大多数参数。

# visual-studio-2010 - 使用 NSIS 安装 Visual Studio 扩展 (VSIX)

> ID：11236503
> 
> 赞同：1
> 
> 时间：2012-06-28T00:18:14.820
> 
> 标签：visual-studio-2010, nsis, vsix

我正在为 VS2010 构建自己的扩展，它必须部署在 Visual Studio Gallery 之外。我的 NSIS 安装程序在安装软件的其他部分方面做得很好，但是我不知道如何安装 .vsix 扩展名。

我尝试通过作为 Visual Studio 一部分的 VsixInstaller.exe 执行此操作，但是它不允许为机器上找到的任何 VIsual Studio 静默安装扩展，并在安装程序中获取正确的错误代码。

“VsixInstaller.exe /quiet extension.vsix”无论发生什么都会返回 0 错误代码，并且需要 /skuName 和 /skuVersion 来自动检测。

我可以以某种方式手动执行此操作吗？例如，ReSharper 将所有扩展二进制文件保存在它的“Program Files”文件夹中，并以某种方式使它们可用于 VIsual Studio。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:41:13.890

Registering Visual Studio extensions is complicated process. For **pre** 2010 VS editions you need to copy appropriate files (.dll/.zip template/.regpkg...) into some folder and then write keys into registry with paths, settings, etc. (many, many keys).

These keys/settings are based on extension you are developing (LanguageService, Package, Add-in, ...)

**After** 2010 VS editions have new feature - .vsix extensions which is simple .zip archive containing all required files and registry keys.

You need to copy this .vsix file into some folder (recommended is inside VS install directory or other known folder as %VSInstallDir%\\) and then setup VS to load it (like running devenv.com /setup)

Read this blog for more info about discovering VS extensions: [http://blogs.msdn.com/b/visualstudio/archive/2010/02/19/how-vsix-extensions-are-discovered-and-loaded-in-vs-2010.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/02/19/how-vsix-extensions-are-discovered-and-loaded-in-vs-2010.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:25:52.410

您是否尝试过使用 copy aka：

```
copy xx.vsix "%APPDATA%\Microsoft\VisualStudio\10.0\Extensions" 
```

或者

```
copy xx.vsix %ProgramFiles%\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft" 
```

# java - 如何将输入流的内容复制或存储到字节数组中？

> ID：11236504
> 
> 赞同：2
> 
> 时间：2012-06-28T00:18:38.737
> 
> 标签：java, servlets, file-upload

我正在使用 Apache Commons FileUpload 库来上传文件。我想将 InputStream 的内容复制到一个单字节数组中。我怎么能那样做？

```
try {
    List<FileItem> items = new ServletFileUpload(
            new DiskFileItemFactory()).parseRequest(request);
    for (FileItem item : items) {
        if (item.isFormField()) {
            // Process regular form field (input
            // type="text|radio|checkbox|etc", select, etc).
            String fieldname = item.getFieldName();
            String fieldvalue = item.getString();
            out.println("returned");
        } else {
            // Process form file field (input type="file").
            String fieldname = item.getFieldName();
            String filename = FilenameUtils.getName(item.getName());
            InputStream input = item.getInputStream();
            if (fieldname.equals("file")) {
                // please help me here.
                byte[] allbyte = ???
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:36:05.430

使用[Apache commons-io](http://commons.apache.org/io/)库中的[`IOUtils.toByteArray()`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#toByteArray%28java.io.InputStream%29)实用程序方法：

```
import org.apache.commons.io.IOUtils;

InputStream input;
byte[] bytes = IOUtils.toByteArray(input); 
```

它给你一个单线。一般来说，试着找到一个现有的库来做你想做的事，[Apache commons 库](http://commons.apache.org/)有很多方便的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:38:57.177

使用一个怎么样`ByteArrayOutputStream`？

```
ByteArrayOutputStream out = new ByteArrayOutputStream();

int b = input.read();
while (b != -1) {
    out.write(b);
    b = input.read();
}
allbyte = out.toByteArray(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T01:01:08.403

使用数据输入流。它有一个读取所有字节的 readFully() 方法。

```
DataInputStream dis = new DataInputStream(inputStream);
byte[] allBytes = new byte[inputStream.available()];
dis.readFully(allBytes); 
```

有关详细信息，请参阅

[输入流](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available%28%29%20)

[数据输入流](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html#readFully%28byte%5B%5D%29)

# javascript - Windows脚本调用其他命令？

> ID：11236506
> 
> 赞同：2
> 
> 时间：2012-06-28T00:19:00.653
> 
> 标签：javascript, windows, shell, command-prompt, wsh

我正在尝试使用`cscript`and来编写 Windows shell 脚本`Javascript`。这个想法是采用一个非常长的 Python 命令，我厌倦了一遍又一遍地输入命令行。我想要做的是编写一个更短的脚本，将整个 Python 命令写入 Windows 脚本，然后调用 Windows 脚本，这样输入起来会少很多。如果有意义的话，我只是不知道如何调用“命令中的命令”。

这可能是一件容易的事情，但我是这方面的新手，所以请多多包涵！

想法：

示例原始命令：`python do <something really complicated with a long filepath>`

视窗脚本：`cscript easycommand`

```
 <package id = "easycommand">
      <job id = "main" >
          <script type="text/javascript">
               // WHAT GOES HERE TO CALL python do <something really complicated>
               WScript.Echo("Success!");
          </script>
      </job>
 </package> 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:35:32.477

这是我使用的

```
function logMessage(msg) {
    if (typeof wantLogging != "undefined" && wantLogging) {
        WScript.Echo(msg);
    }
}

// http://msdn.microsoft.com/en-us/library/d5fk67ky(VS.85).aspx
var windowStyle = {
    hidden    : 0,
    minimized : 1,
    maximized : 2
};

// http://msdn.microsoft.com/en-us/library/a72y2t1c(v=VS.85).aspx
var specialFolders = {
    windowsFolder   : 0,
    systemFolder    : 1,
    temporaryFolder : 2
};

function runShellCmd(command, deleteOutput) {
    deleteOutput = deleteOutput || false;
    logMessage("RunAppCmd("+command+") ENTER");
    var shell = new ActiveXObject("WScript.Shell"),
        fso = new ActiveXObject("Scripting.FileSystemObject"),
        tmpdir = fso.GetSpecialFolder(specialFolders.temporaryFolder),
        tmpFileName = fso.BuildPath(tmpdir, fso.GetTempName()),
        rc;

    logMessage("shell.Run("+command+")");

    // use cmd.exe to redirect the output
    rc = shell.Run("%comspec% /c " + command + "> " + tmpFileName,
                       windowStyle.Hidden, true);
    logMessage("shell.Run rc = "  + rc);

    if (deleteOutput) {
        fso.DeleteFile(tmpFileName);
    }
    return {
        rc : rc,
        outputfile : (deleteOutput) ? null : tmpFileName
    };
} 
```

下面是一个示例，说明如何使用上述方法列出在 IIS 中使用 Appcmd.exe 定义的站点：

```
var
fso = new ActiveXObject("Scripting.FileSystemObject"),
windir = fso.GetSpecialFolder(specialFolders.WindowsFolder),
r = runShellCmd("%windir%\\system32\\inetsrv\\appcmd.exe list sites");
if (r.rc !== 0) {
    // 0x80004005 == E_FAIL
    throw {error: "ApplicationException",
           message: "shell.run returned nonzero rc ("+r.rc+")",
           code: 0x80004005};
}

// results are in r.outputfile

var
textStream = fso.OpenTextFile(r.outputfile, OpenMode.ForReading),
sites = [], item, 
re = new RegExp('^SITE "([^"]+)" \\((.+)\\) *$'),
parseOneLine = function(oneLine) {
    // each line is like this:  APP "kjsksj" (dkjsdkjd)
    var tokens = re.exec(oneLine), parts;

    if (tokens === null) {
        return null;
    }
    // return the object describing the website
    return {
        name : tokens[1]
    };
};

// Read from the file and parse the results.
while (!textStream.AtEndOfStream) {
    item = parseOneLine(textStream.ReadLine()); // you create this...
    logMessage("  site: " + item.name);
    sites.push(item);
}
textStream.Close();
fso.DeleteFile(r.outputfile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:41:21.033

好吧，基本上：

1.  获取 shell 的句柄，以便您可以执行脚本
2.  将要执行的命令（参数和所有）创建为字符串
3.  调用`Run`shell 句柄上的方法，并确定您想要哪种窗口模式以及是否要等到生成的进程完成（可能）。
4.  错误处理，因为`Run`抛出异常

在这一点上，如果您需要多次执行此操作，则值得编写大量实用函数：

```
// run a command, call: run('C:\Python27\python.exe', 'path/to/script.py', 'arg1', 'arg2') etc.
function run() {
  try {
    var cmd = "\"" + arguments[0] + "\"";
    var arg;
    for(var i=1; i< arguments.length; ++i) {
      arg = "" + arguments[i];
      if(arg.length > 0) {
    cmd += arg.charAt(0) == "/" ? (" " + arg) : (" \"" + arg + "\"");
      }
    }
    return getShell().Run(cmd, 1, true); // show window, wait until done
  }
  catch(oops) {
    WScript.Echo("Error: unable to execute shell command:\n"+cmd+ 
             "\nInside directory:\n" + pwd()+
         "\nReason:\n"+err_message(oops)+
         "\nThis script will exit.");
    exit(121);
  }
}

// utility which makes an attempt at retrieving error messages from JScript exceptions
function err_message(err_object) {
  if(typeof(err_object.message) != 'undefined') {
    return err_object.message;
  }
  if(typeof(err_object.description) != 'undefined') {
    return err_object.description;
  }
  return err_object.name;
}

// don't create new Shell objects each time you call run()
function getShell() {
  var sh = WScript.CreateObject("WScript.Shell");
  getShell = function() {
    return sh;
  };
  return getShell();
} 
```

对于您的用例，这可能就足够了，但您可能希望使用例程来扩展它以更改工作目录等。

# android - 将 android 库项目添加到 android 项目会阻止 Ant 构建

> ID：11236507
> 
> 赞同：20
> 
> 时间：2012-06-28T00:19:03.560
> 
> 标签：android

我正在向我的 android 应用程序（在本例中为 Beintoo）添加一个 android 库项目。不是我的; 这是一个外部库。但是，它没有附带 build.xml。在 Eclipse 中构建工作正常，但是当我尝试用 ant 构建我的应用程序时，我得到了这个：

```
BUILD FAILED
C:\Sandbox\MyProject\build.xml:110: The following error occurred while executing this line:
C:\Sandbox\MyProject\build.xml:41: The following error occurred while executing this line:
C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:515: Invalid file: C:\Git\Beintoo-Android\beintoo-android-sdk\BeintooSDK\build.xml 
```

这是完全正确的。该文件无效，因为它不存在。我不知道该怎么做才能安全地添加它，也不知道这是否是个好主意。

我了解到我不能简单地将库项目构建到 jar 中。如何使用这个库项目让我的项目在 Ant 中构建？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-02T22:57:28.190

好的，所以，错误 454 的答案很接近，但并不完全正确。从 Android Tools r14 开始，如果要由 Ant 构建，每个库项目都必须有自己的 build.xml，如下所述：

[https://groups.google.com/forum/?fromgroups#!topic/adt-dev/Z2e3dY-3Ma0](https://groups.google.com/forum/?fromgroups#!topic/adt-dev/Z2e3dY-3Ma0)

在库项目上运行`android update lib-project`（如错误 454 所述，位于 android-sdk/tools 文件夹中，应位于 PATH 中）将添加通用 build.xml，并允许构建主项目。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-02T06:12:52.390

对于库项目，您需要浏览到库项目根目录并运行：

```
android update lib-project -p . 
```

*android*可执行文件位于android sdk/tools 文件夹中，应将其添加到操作系统中的路径变量中。运行此命令后，将生成必要的构建文件，并且您的 ant 构建应该会成功。

同样，如果您的根项目没有必要的构建文件，您将需要浏览到主项目根并运行：

```
android update project -p . 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-23T17:10:37.123

除了前两个正确答案之外，我还必须添加 --target android-16 ，因为我收到“错误：该项目没有设置目标或目标无效”。

所以在我的情况下

```
android update lib-project -p . --target android-16 
```

做到了。（根据需要替换 16）

# mysql - 在 mySQL 中选择不同三元组的补集

> ID：11236511
> 
> 赞同：1
> 
> 时间：2012-06-28T00:19:20.997
> 
> 标签：mysql, sql, database

我有这两张这样的桌子

```
test_table
date        student     test
2012-05-31  Alice       Math
2012-05-31  Alice       Math
2012-05-31  Bob         Math
2012-05-31  Bob         Spelling
2012-06-01  Alice       Math
2012-06-01  Alice       Spelling

score_table
date        student     test        best_daily_score
2012-05-31  Alice       Math        90
2012-05-31  Bob         Math        50
2012-05-31  Bob         Spelling    50
2012-06-01  Alice       Math        95 
```

我想检测到 Alice 的`best_daily_score`测试`Spelling`尚未`2012-06-01`被记录。我正在寻找返回的查询

```
2012-06-01  Alice       Spelling 
```

这是唯一的一行

```
SELECT DISTINCT date, student, test FROM test_table 
```

那不在

```
SELECT DISTINCT date, student, test FROM score_table 
```

这不起作用：

```
SELECT DISTINCT date, student, test FROM test_table WHERE date, student, test NOT IN (SELECT DISTINCT date, student, test FROM score_table) 
```

我假设因为左侧`NOT IN`不应该是三件事的列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T00:36:46.080

试试这个：

```
SELECT  a.date,
        a.student,
        a.test
  FROM  test_table a 
          LEFT JOIN score_table b
            ON (a.date = b.date) AND
               (a.student = b.student) AND
               (a.test = b.test)
WHERE   b.best_daily_score IS NULL 
```

由于. `test_table`_ `score_table`_ `LEFT JOIN`它匹配`date`,`student`和`test`. 如果记录上没有找到`score_table`，那么基本上`best_daily_score`就可以了`NULL`。这就是为什么我添加了一个仅显示`NULL`在的条件`best_daily_score`。

**[单击此处获取一些演示（SQLFiddle）](http://sqlfiddle.com/#!2/7f81d/2)**

# php - 将 PDO 连接作为会话变量传递

> ID：11236515
> 
> 赞同：1
> 
> 时间：2012-06-28T00:19:49.937
> 
> 标签：php, pdo

因此，为了不重复自己，我只想创建一个 PDO 连接并使用会话变量在页面之间传递它。但是，当我设置我的 PDO 连接并设置会话 var 时，该 var 又回来了，因为我的下一页上没有设置？

这是我第一页上的代码：

```
session_start();
try
{
    $db = new PDO("mysql:host=".$dbHostname.";dbname=".$dbDatabase, $dbUsername, $dbPassword);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}
catch(PDOException $e)
{
    echo "It seems there was an error.  Please refresh your browser and try again. ".$e->getMessage();
}

$_SESSION['db'] = $db; 
```

然后我下一页上的这个测试代码返回为未设置。

```
session_start();
$db = $_SESSION['db'];

    if(isset($db))echo "set";
    else echo "not set"; 
```

有任何想法吗？？

连接很好，因为如果我从第一页调用一个函数并将 $db 作为参数传递，该函数可以正常工作。那么为什么将数据库变量存储为会话不起作用呢？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T00:25:00.467

`PDO`不允许会话序列化。事实上，您根本不应该能够在会话中序列化数据库连接。如果确实有必要这样做，您可以执行以下操作：

```
class DB {
   private $db;
   private $creds;

   public function __construct($host, $dbname, $user, $pass) {
      $this->creds = compact('host', 'dbname', 'user', 'pass');
      $this->db = self::createLink($host, $dbname, $user, $pass);
   }

   public function __sleep() {
      return array('creds');
   }

   public function __wakeup() {
      $this->db = self::createLink($this->creds['host'] ...
   }

   public static function createLink($host ...
      return new PDO(...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:24:29.157

PHP 在页面完成执行后关闭数据库连接并释放使用的资源。其次，它是一个资源/处理程序，而不是真正的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:25:06.100

您可以使用持久连接。

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass, array(
    PDO::ATTR_PERSISTENT => true
)); 
```

您的应用程序的行为将与正在重建连接一样。因此，您无需序列化连接并传递它。

但是您确实需要小心并在用户会话结束时关闭它，以便可以释放它。

您对持久连接的确切需求是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T00:27:56.300

您可以使用持久连接，但这是一个坏主意。它占用了宝贵的系统资源，实际上可能会让你离开共享主机，但实际上并不是那么有用。只需在每一页的末尾关闭连接并在下一页开始一个新的连接。如果您*真的非常想要它，*那么持久连接的设置是`PDO::ATTR_PERSISTENT`必须`true`在您的 PDO 对象上设置的。

# c# - c# - 如何将集合更改事件添加到 Windows 窗体应用程序

> ID：11236516
> 
> 赞同：0
> 
> 时间：2012-06-28T00:19:55.960
> 
> 标签：c#, windows, forms, datagrid

我正在寻找一个在行数更改时触发的事件，即用户以任何方式添加一行或删除一行。我正在尝试使用此代码，但它不起作用。

设计师.cs

```
this.dataGridView1.Rows.CollectionChanged += new System.Windows.Forms.DataGridViewCollectionChangedEventHandler(this.dataGridView1_CollectionChanged); 
```

form1.cs

```
 private void dataGridView1_CollectionChanged(object sender, DataGridViewRowsAddedEventArgs e)
    {
    } 
```

有没有人看到问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:56:06.300

您是否尝试过查看[DataGridView.UserDeletedRow](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.userdeletedrow)和[DataGridView.UserAddedRow](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.useraddedrow)事件？

通过像这样设置处理程序，我还能够让您的 CollectionChanged 事件触发。

```
public Form1()
{
    InitializeComponent();
    this.dataGridView1.Rows.CollectionChanged += new CollectionChangeEventHandler(Rows_CollectionChanged);
}

void Rows_CollectionChanged(object sender, CollectionChangeEventArgs e)
{
    Debug.Print(e.Action.ToString()); // to use Debug.Print function add a using System.Diagnostics to your program
    Debug.Print(e.Element.ToString());
    DataGridViewRow row = (DataGridViewRow)e.Element;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:00:49.060

DataGridView 上有两个事件直接可用

[`RowsAdded`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowsadded)

[`RowsRemoved`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowsremoved)

但是，这些仅在用户使用 DataGridView 功能添加或删除行时触发。如果您想检测从基础 DataTable（等）中添加或删除的行，那么您需要处理您的集合公开的事件。

`DataTable`s 有两个事件：

[`TableNewRow`](http://msdn.microsoft.com/en-us/library/system.data.datatable.tablenewrow)

[`RowDeleted`](http://msdn.microsoft.com/en-us/library/system.data.datatable.rowdeleted)

如果这些事件不是您想要的，那么您可以在此处找到完整的 DataGridView 事件文档：http: [//msdn.microsoft.com/en-us/library/x4dwfh7x](http://msdn.microsoft.com/en-us/library/x4dwfh7x)

# javascript - 到达某个字符时停止匹配

> ID：11236521
> 
> 赞同：1
> 
> 时间：2012-06-28T00:20:35.350
> 
> 标签：javascript, regex

我有以下正则表达式，它在遇到哈希时需要停止匹配。

## 正则表达式：

`/[?&]+([^=&]+)=([^&]*)/gi`

## 网址示例：

`http://website.com/1068?page=4&taco=cat#tasty`

上面的正则表达式将捕获`cat#tasty`而不是仅`cat`在最后一个捕获组中。我尝试了以下仅在存在哈希时才有效。

## 正则表达式测试：

`/[?&]+([^=&]+)=([^&]*)#/gi`

如果 url 没有哈希，它将不匹配。使哈希成为可选的——`#?`也不起作用，因为`*`最后一个捕获组的贪婪仍然抓住了`cat#tasty`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:38:01.743

在 JavaScript 中解析 URL 的一种鲜为人知的方法是简单地创建一个 a 元素并将 url 作为 href 属性赋予它！

```
var link=document.createElement('a')
link.href="http://website.com/1068?page=4&taco=cat#tasty"
alert(link.search) //?page=4&taco=cat
alert(link.hash) //#tasty 
```

只是把这个扔在那里。如果你只在link.search（或者可能是link.search.substr(1)）上做你的正则表达式，你就不必担心除了参数之外的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:26:18.503

```
/[?&]+([^=&]+)=([^&#]*)/gi 
```

尽管正如 Ray 指出的那样，有许多 url 解析器可用。

# visual-studio-2010 - Qt Moc在msbuild下并行处理多个文件

> ID：11236522
> 
> 赞同：5
> 
> 时间：2012-06-28T00:21:07.157
> 
> 标签：visual-studio-2010, qt, msbuild, moc

使用 Qt Visual Studio 插件，它似乎以一种无缝的方式处理了几乎所有的事情。不幸的是，它使用 msbuild 中的 CustomBuild 步骤进行 moc'ing。这导致了一个接一个的连续嘲弄。有没有办法说服 msbuild 并行执行它们 - 我厌倦了像我一样坐在桂冠上的 7 个内核。

我见过 msbuild 的 BuildInParallel，但我不确定如何在这里应用它。

msbuild 片段：

```
<Project>
...
  <ItemGroup>
    <CustomBuild Include="a_class4.h">
      <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">$(QTDIR)\bin\moc.exe;%(FullPath)</AdditionalInputs>
      <Message Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">Moc%27ing %(Identity)...</Message>
      <Outputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">.\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp</Outputs>
      <Command Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">"$(QTDIR)\bin\moc.exe"  "%(FullPath)" -o ".\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp"  -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_CORE_LIB -DQT_GUI_LIB "-I." "-I.\GeneratedFiles" "-I$(QTDIR)\include" "-I.\GeneratedFiles\$(ConfigurationName)\." "-I$(QTDIR)\include\qtmain" "-I$(QTDIR)\include\QtCore" "-I$(QTDIR)\include\QtGui" "-I." "-I." "-I." "-I."</Command>
    </CustomBuild>
    <CustomBuild Include="a_class3.h">
      <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">$(QTDIR)\bin\moc.exe;%(FullPath)</AdditionalInputs>
      <Message Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">Moc%27ing %(Identity)...</Message>
      <Outputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">.\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp</Outputs>
      <Command Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">"$(QTDIR)\bin\moc.exe"  "%(FullPath)" -o ".\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp"  -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_CORE_LIB -DQT_GUI_LIB "-I." "-I.\GeneratedFiles" "-I$(QTDIR)\include" "-I.\GeneratedFiles\$(ConfigurationName)\." "-I$(QTDIR)\include\qtmain" "-I$(QTDIR)\include\QtCore" "-I$(QTDIR)\include\QtGui" "-I." "-I." "-I." "-I."</Command>
    </CustomBuild>
  </ItemGroup>
 ...
</Project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:01:14.460

您可以使用并行构建：http `jom`:
[//labs.qt.nokia.com/2009/03/27/speeding-up-visual-c-qt-builds/](http://labs.qt.nokia.com/2009/03/27/speeding-up-visual-c-qt-builds/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T16:14:07.833

我对 Visual Studio 项目不是很熟悉……所以不知道“CustomBuild”ItemGroup 名称及其元数据名称是否有意义。如果他们这样做，您可能需要

1.  将 ItemGroup 名称修改为其他名称
2.  识别处理该问题的 msbuild 目标文件并将其修复以进行并行处理

这是一个可以并行执行的独立 msbuild 文件。

笔记：

1.  添加了该`ping -n 30 -w 1000 127.0.0.2>nul`命令，以便我可以启动进程资源管理器并找到足够的时间来计算生成了多少个 ping.exe 实例。
2.  我试图 ping 127.0.0.2 因为我希望 ping 不早点完成。
3.  文件中没有发生任何实际有用的事情……只是回显属性作为概念证明。

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="RunMe">
    <ItemGroup>
        <CustomBuild Include="a_class4.h">
            <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">$(QTDIR)\bin\moc.exe;%(FullPath)</AdditionalInputs>
            <Message Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">Moc%27ing %(Identity)...</Message>
            <Outputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">.\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp</Outputs>
            <Command Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">"$(QTDIR)\bin\moc.exe"  "%(FullPath)" -o ".\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp"  -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_CORE_LIB -DQT_GUI_LIB "-I." "-I.\GeneratedFiles" "-I$(QTDIR)\include" "-I.\GeneratedFiles\$(ConfigurationName)\." "-I$(QTDIR)\include\qtmain" "-I$(QTDIR)\include\QtCore" "-I$(QTDIR)\include\QtGui" "-I." "-I." "-I." "-I."</Command>
        </CustomBuild>
        <CustomBuild Include="a_class3.h">
            <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">$(QTDIR)\bin\moc.exe;%(FullPath)</AdditionalInputs>
            <Message Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">Moc%27ing %(Identity)...</Message>
            <Outputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">.\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp</Outputs>
            <Command Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">"$(QTDIR)\bin\moc.exe"  "%(FullPath)" -o ".\GeneratedFiles\$(ConfigurationName)\moc_%(Filename).cpp"  -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_CORE_LIB -DQT_GUI_LIB "-I." "-I.\GeneratedFiles" "-I$(QTDIR)\include" "-I.\GeneratedFiles\$(ConfigurationName)\." "-I$(QTDIR)\include\qtmain" "-I$(QTDIR)\include\QtCore" "-I$(QTDIR)\include\QtGui" "-I." "-I." "-I." "-I."</Command>
        </CustomBuild>
    </ItemGroup>
    <Target Name="RunMe">
        <Message Text="First populate an ItemGroup such that we can use it for parallel processing"/>
        <ItemGroup>
            <InputForParallelInvoke Include="$(MSBuildThisFileFullPath)">
                <Properties>InputFile=%(CustomBuild.Identity);
                        AdditionalInputs=%(CustomBuild.AdditionalInputs);
                        Message=%(CustomBuild.Message);
                        Outputs=%(CustomBuild.Outputs);
                        Command=%(CustomBuild.Command)</Properties>

            </InputForParallelInvoke>
        </ItemGroup>
        <MSBuild Projects="@(InputForParallelInvoke)" Targets="InvokeInParallel" BuildInParallel="True" />
    </Target>
    <Target Name="InvokeInParallel">
        <Exec Command="ping -n 30 -w 1000 127.0.0.2>nul &amp; echo Properties=$(InputFile) ##### $(AdditionalInputs) ##### $(Message) ##### $(Outputs) ##### $(Command)"/>
    </Target>
</Project> 
```

当我通过 msbuild 调用它时，`msbuild /m \path\to\file /p:Configuration=Debug;Platform=Win32`我看到了 2 个 ping.exe 实例。

希望这有助于解决您的问题。

# c# - C# 三维数组，将行转换为数组

> ID：11236523
> 
> 赞同：-1
> 
> 时间：2012-06-28T00:21:23.787
> 
> 标签：c#, .net, linq, algorithm

```
var examples = new double[1000][][];

 for (int i = 0; i < 1000; i++)
 {
  examples[i]= new double[2][]; //the Set
  examples[i][0] = new double[] { x(i), y(i) }; //the Inputs
  examples[i][1] = new double[] { Math.Sin(x(i) * y(i)), Math.Sin(x(i) / y(i)) }; //the Target
 } 
```

`x(i)`意味着`x`取决于`i`

我需要收集这样的输入，`examples[][0] = new double[1000][]` 因为创建这样的新数组会消耗更多内存

```
for (int i = 0; i < 1000; i++)
{
   input[i][0]=x(i);
   input[i][1]=y(i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:32:29.967

我的第一个想法是重新考虑最终得到一个 [1000][2][2] 数组的设计决策，您希望通过获取特定的中心数组值来拉出一个扁平的 [1000][2] 数组。 ..

至于在不重新分配内存的情况下访问它，抱歉，您不会在不使用更多内存的情况下将其作为数组获取，但是您可以做的是获得一个`IEnumerable<double[]>`可能就足够了，具体取决于您的目的`yield`（这将使它枚举时单独评估每个结果）。

例如：

```
public IEnumerable<double[]> GetResults()
{
  for (int i = 0; i < 1000; x++)
  {
    yield return examples[i][0];
  }
} 
```

这有多有用取决于您计划如何使用结果，但如果不使用更多内存，您将无法获得新数组。

# objective-c - 在 Xcode 中创建动画？

> ID：11236526
> 
> 赞同：1
> 
> 时间：2012-06-28T00:22:04.153
> 
> 标签：objective-c, macos, graphics

我有大约 100 个 PNG（我创建的）我想从中创建动画。然而，我在矢量图形编辑器中创建了动画，因此每个 PNG 都有一个白色背景。如何让 Xcode 不显示白色背景而只显示图像本身？我将在透明窗口中显示动画，所以背景完全破坏了效果。

注意我在 Snow Leopard 上使用 Xcode 3.2.6。我专门询问的是 Mac 应用程序*而不是*iOS 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:24:48.890

我建议使用透明背景再次导出图像。那会为你省去很多麻烦。如果这不是一个选项，请查看[Quartz 2D Masks](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html)。

# javascript - 在复选框的索引中返回 1

> ID：11236531
> 
> 赞同：0
> 
> 时间：2012-06-28T00:22:24.387
> 
> 标签：javascript, jquery

[http://jsfiddle.net/thetylercox/LgxPn/27/](http://jsfiddle.net/thetylercox/LgxPn/27/)

如果我单击 1 然后 2 复选框未选中，并显示警报问题是如果我再次单击 2 没有警报！我确定我将上一次检查的值存储在 2 上，我需要撤消此操作！

```
<script>
        $(function() {
            var lastChecked = [];
            $(':checkbox').change(function() {
                if (this.checked) {
                    if (lastChecked.length && this.value != lastChecked[0].value) {  
   $(this).prop("checked", false)
                        alert("the last box you checked has a different value");
                    }
                    lastChecked.unshift(this);
                }
                else {
                    lastChecked.splice(lastChecked.indexOf(this), 1);
                }
            });
        });
    </script>
  </head>
  <body>
    1
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)"  
  value="1" class="chk" id="chk<?php echo $a++?>"  title="<?php echo 
 $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="
  <?php echo $rspatient['name']?>"/><br/>
    2
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)"  
  value="2" class="chk" id="chk<?php echo $a++?>"  title="<?php echo  
  $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" 
  lang="<?php echo $rspatient['name']?>"/><br/> 
```

[http://jsfiddle.net/thetylercox/LgxPn/27/](http://jsfiddle.net/thetylercox/LgxPn/27/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:40:13.180

由于您取消选中该框，因此不应将该复选框存储在`lastChecked`数组中。只需将其包裹`lastChecked.unshift(this)`在一个`else`块中即可。

[http://jsfiddle.net/LgxPn/28/](http://jsfiddle.net/LgxPn/28/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:59:25.823

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Untitled Document</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        $(function() {
            var lastChecked = [];
            $(':checkbox').change(function() {
                if (this.checked) {
                    if (lastChecked.length && this.value != lastChecked[0].value) {     $(this).prop("checked", false)
                        alert("the last box you checked has a different value");
                    }
                    lastChecked.unshift(this);
                }
                else {
                    lastChecked.splice(lastChecked.indexOf(this), 1);
                }
            });
        });
    </script>
</head>
<body>
    1
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="1" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo $rspatient['name']?>"/><br/>
    2
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="2" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo $rspatient['name']?>"/><br/>
    3
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="3" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo $rspatient['name']?>"/><br/>
    1
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="1" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo $rspatient['name']?>"/><br/>
    2
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="2" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo $rspatient['name']?>"/><br/>
    3
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="3" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo $rspatient['name']?>"/><br/>
    1
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="1" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo $rspatient['name']?>"/><br/>
    2
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="2" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo $rspatient['name']?>"/><br/>
    3
    <input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="3" class="chk" id="chk<?php echo $a++?>"  title="<?php echo $rspatient['first'],' ',$rspatient['frameman'],' ', $rspatient['framemodel']?>" lang="<?php echo        $rspatient['name']?>"/><br/>
</body>
</html>​ 
```

# function - 如何在运行时修改函数然后传播到多个线程？

> ID：11236542
> 
> 赞同：6
> 
> 时间：2012-06-28T00:24:00.743
> 
> 标签：function, concurrency, clojure

使用 Clojure（和其他 Lisp 方言），您可以修改正在运行的代码。那么，在运行时修改函数时，该更改是否可用于多个线程？

我试图弄清楚它在并发设置中的技术工作原理：如果多个线程正在使用函数*foo*，当我重新定义（比如使用*defn*）函数*foo*时会发生什么？

必须进行一些同步：这种同步何时以及如何发生以及它的成本是多少？

比如说在 JVM 上，函数是使用引用来引用的`volatile`吗？如果是这样，这是否意味着每次都有“函数查找”，那么就必须付出`volatile`代价？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T00:31:17.970

在 Clojure 中，函数是`IFn`类的实例，它们[几乎总是存储在`vars`](http://clojure.org/vars). vars 是**线程局部值**的 Clojures 机制。

*   当您定义一个将 var 的“根绑定”设置为引用该函数的函数时
*   线程其他线程获取 var 的根绑定的当前值，但不能更改该值。这可以防止任何两个线程不得不争夺 var 的值，因为只有根线程才能设置该值。
*   如果需要，线程可以选择使用 var 的新值，但是调用`binding`which 会给出它们自己的**线程本地值**，它们可以随意更改，因为没有其他线程可以读取它。

对 vars 的深入了解非常值得研究一下，一旦你习惯了它们，它们就是一个非常有用的并发设备。

ps：根线程通常是 REPL pss：你当然可以自由地将你的函数存储在 vars 以外的东西中，例如，如果你需要原子地更新一组函数，尽管这种情况很少见。

# qunit - 如何使用 node-qunit？

> ID：11236543
> 
> 赞同：9
> 
> 时间：2012-06-28T00:24:16.877
> 
> 标签：qunit

此页面上的信息似乎不太可能出现——https: [//github.com/kof/node-qunit](https://github.com/kof/node-qunit)。我有一个安装 nodejs 并安装了 node-quit 模块的设置。我有测试运行器并执行了命令`node /path/to/runner.js`。下面是我的设置示例。有关如何执行此操作的任何想法或示例，或者我使用错误。我之前使用 Rhino 和 EnvJs 运行 qunit 测试没有任何问题，但我想我尝试使用 nodejs，因为我将它用于其他事情并且打包系统可以在我的构建中编写脚本。也许我错过了一个节点选项来包含 Qunit 或一些未设置的环境变量——这是有道理的。

**文件结构**

```
node/
public/
  js/
    main.js
tests/
  js/
    testrunner.js
    tests.js 
```

**安装**

```
cd node
npm install qunit 
```

这将更新文件结构。

```
node/
  node_modules/
    qunit/ 
```

**测试/js/testrunner.js**

```
var runner = require("../../node/node_modules/qunit");
runner.run({
    code : "/full/path/to/public/js/main.js",
    tests : "/full/path/to/tests/js/tests.js"
}); 
```

**测试/js/tests.js**

```
test("Hello World", function() {
    ok(true);
}); 
```

**命令**

```
node tests/js/testrunner.js 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T12:37:25.893

看来您需要使用`main.js`和`tests.js`文件的完整路径，还需要包含模块的相对路径`qunit`。我更新了上面的代码作为其他人的示例。

# php - PHP代码更正

> ID：11236553
> 
> 赞同：0
> 
> 时间：2012-06-28T00:25:56.737
> 
> 标签：php, html, arrays, foreach, formatting

我有这个代码片段：

```
$num_thumbs = 3;
$thumb_p = "<li>\n<div class=\"row-wrapper\">\n";
$i = 0;
$j = 0;
foreach ($thumbs_array as &$thumb_link) {
if ($i == $num_thumbs) {
  $i = 0;
  $thumb_p .= "<div class=\"some-class-2\">" . $thumb_link . "</div>";
  $thumb_p .= "</div>\n";
  if($j == 3)
  {
      $thumb_p .= "</li>\n<li>";
      $j = 0;
  }
  $thumb_p .= "<div class=\"row-wrapper\">\n";
  $j++;
} else {
  $thumb_p .= "\t\n<div class=\"some-class-1\">" . $thumb_link . "</div>";
  $i++;
}
}
$thumb_p .= "\n</div>\n</li>\n"; 
```

它应该在每三次出现之后换`<div class=\"row-wrapper\">`行`<li></li>`。

问题是我每次都在底部多出一行：

```
<li>
<div class="row-wrapper">
</div>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:31:54.397

考虑这条线

```
$thumb_p .= "</li>\n<li>"; 
```

它不会给你带来麻烦吗？我认为应该是

```
 $thumb_p .= "<li>\n</li>"; 
```

# less - 如何通过 LESS 函数使用 & （AND 选择器）？

> ID：11236558
> 
> 赞同：0
> 
> 时间：2012-06-28T00:26:19.517
> 
> 标签：less

这是输出需要的内容：

```
div.star_mask {
    &.fill-0 {
        width: 0%;
    }
    &.fill-50 {
        width: 50%;
    }
} 
```

我这样做了很多次，所以我做了一个函数来生成它：

```
#star {
    .star-fill(@width) {
        (~"&.fill-@{width}") {
            div { width: ~"@{width}%" }
        }
    }
}

div.star_mask {
    #star > .star-fill(0)
} 
```

这会生成以下 CSS：

`div.star_mask &.fill-0`而不是我需要的：`div.star_mask.fill-0`

那么有没有办法做到这一点？我可以把`&`函数调用的地方放在哪里吗？

我最终通过自己编写选择器来解决问题：`div.star_mask.fill-@{width}`并将函数调用置于上一层。不过，嵌套它们仍然很酷！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:18:34.170

当 less 遇到 (~"") 作为选择器时，它不会解析内容而是逐字接受它，因此您不能在其中使用 &。

我认为目前还没有一种方法可以完全按照您的意愿行事，但请记住您可以在选择器的末尾使用 & ，例如

```
.a {
  div& {
    foo:bar;
  }
} 
```

变成

```
div.a {
  foo: bar;
} 
```

不确定这是否有帮助。

# c# - 在每个类的每个方法中尝试/捕获？

> ID：11236559
> 
> 赞同：5
> 
> 时间：2012-06-28T00:26:36.677
> 
> 标签：c#, exception-handling

当我们将一堆语句包装在 try/catch 中并且其中一个发出异常时，在 catch 中我们无法知道哪些语句导致了异常（ex.stacktrace 显示了我们当前的方法 (doit)，它的调用者，其调用者的调用者等，但既不是 do1 也不是 do2）：

```
function doit() {
   try {
     do1();
     do2();
     [...]
   }
   catch (Exception ex) {
     // what failed?
   }
} 
```

一般来说，我已经开始包装所有语句并重新抛出，有点像：

```
private void do1() {
  try {
     // do whatever
  } catch(Exception e) {
     // write to my error log
     throw new Exception("do1: " + e.Message, e.InnerException);
  }
} 
```

这会在我的日志中留下一条面包屑痕迹，并使该链可用于上游。当然，问题是我必须用这种代码包装我编写的*每个方法。*

有些事情告诉我我对此很愚蠢。什么是正确的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T01:32:50.823

好的，这很难做对，因为异常处理是一个非常敏感的话题，过去人们就如何正确地做这件事进行了宗教战争。

首先：既不使用空的 catch ( `try { ... } catch { ... }`)，也不使用`catch(Exception ex)`. 异常派生类的唯一目的是为您提供有关发生的异常类型的丰富信息，以便您可以在异常处理程序中做一些有意义的事情（如果线程崩溃重新启动它，如果数据库连接失败非永久重试，然后失败，等等）。

人们倾向于在其代码的最外层使用一个包罗万象的处理程序来记录未捕获的异常，这还不错，但无论如何你应该提示用户或重新抛出异常（使用`throw`, 不是`throw ex`- 有很多也对此进行讨论）。

基本上，您根本不会以编程方式关心异常发生**的位置**。你可以处理它，或者你不能。如果你不能处理它，那么你就不会抓住它。

**附录**：“如果你能做点什么，就去做，否则你不敢碰那个异常”的最重要的原因是静默捕获的异常（无论是否记录）会导致非常难以发现的错误. 仅将它们推送到日志文件可能还不够，因为在实时系统中，您可能无法获得完全注释的堆栈跟踪（带有行号和所有内容）。

**附录 2**：以一个需要整数输入的文本框为例。如果用户提供了一个您无法有意义地处理输入的字符串，则可能会引发转换异常，您捕获该特定异常并将文本框重置为其旧值，并可能通知用户错误输入。或者，您的程序可能只是因异常而死（糟糕的设计，您可以从该异常中恢复），或者默默地继续显示错误的输入，但仍然使用旧值（糟糕的设计，程序具有误导性）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T00:57:02.430

如果您真的很喜欢这样做（其他人已经说明了为什么这已经很糟糕了），请使用面向方面的编程方法。这将使您的生活变得更加轻松，并减少您最终编写和维护的代码量。

看看[PostSharp](http://www.sharpcrafters.com/)，它为您提供了一个框架，允许您使用将为您生成此样板错误处理的属性来装饰方法、类或命名空间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T00:35:09.660

@Branko 在评论中指出了这一点：异常的堆栈跟踪显示了引发异常的点，而不是捕获异常的点。

+1 @ChaosPandion 的评论：这是一个非常、非常、非常糟糕的主意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T02:31:02.857

`try`在我看来，`catch`这可能是设计最差的现代编程机制。我们不再有能力随时处理错误；如果发生单个异常，我们*必须使整个过程失败，除非我们做一些可怕的事情，比如单独尝试每个语句。*不再有恢复的选择，只能尽可能优雅地失败。

到目前为止，我发现的最佳模式是将每个用户事件包装在`try`/中`catch`（使用方法，而不是每次都显式尝试）。前任：

```
public static class Defines
{
   public static bool TryAction(Action pAction)
   {
      try { pAction(); return true; }
      catch(Exception exception) { PostException(exception); return false; }
   }
}

...

private void DoSomething(int pValue)
{
   ...
}

private void MyControl_MyEvent(object pSender, MyEventArgs pEventArgs)
{
   Defines.TryAction(() => DoSomething(pEventArgs.Data));
} 
```

除此之外，只需尝试编写无异常代码。`try`仅当您很可能遇到异常并且想要做的不仅仅是优雅地失败时，才使用显式s。

# php - 为什么是我的 Joomla！2.5 扩展从admin目录安装内容到joomla而不是从站点目录？（可下载代码）

> ID：11236561
> 
> 赞同：4
> 
> 时间：2012-06-28T00:27:05.127
> 
> 标签：php, xml, joomla, installation, compression

好的，问题是……我的 joomla 模块安装不正确。autobase.xml 的原始内容基于[HelloWorld 的 joomla 2.5 文档](https://docs.joomla.org/Developing_a_Model-View-Controller_(MVC)_Component_for_Joomla!2.5_-_Part_15)。我在 com_autobase.zip 中有两个名为**admin**和**site**的目录，由于某些未知原因，**站点**中的文件没有被传输到**Joomla/Components/Com_autobase**中。但相反，来自**admin**的文件同时被传输到*Components/com_autobase*和*Administrator/Components/com_autobase*

管理文件夹“com_autobase.zip”

[![管理文件夹安装程序](../Images/064a3193fec80e3a01893a61b7d27363.png)](https://i.stack.imgur.com/lPWJR.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/bf3m5asl.ofm.png)）]

站点文件夹“com_autobase.zip”

[![站点文件夹安装程序](../Images/b071e5e653836350ae85449b0acdcc1f.png)](https://i.stack.imgur.com/h665Q.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/dfn4xw5o.0cv.png)）]

来自“com_autobase”和“com_autobase/admin”的 autobase.xml 内容。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- $Id: helloworld.xml 14 2009-11-02 18:35:20Z chdemko $ -->
<extension type="component" version="1.6.0" method="upgrade">

<name>AutoBase</name>
<!-- The following elements are optional and free of formatting conttraints -->
<creationDate>July 2012</creationDate>
<authorUrl>http://www.triotech.co.nz</authorUrl>
<copyright>Copyright Info</copyright>
<license>License Info</license>
<!--  The version string is recorded in the components table -->
<version>0.0.24</version>
<!-- The description is optional and defaults to the name -->
<description>This application has been built using PHP in house at Trio Technology Ltd as a third party
application for the AutoBase Car Yard</description>

<install> <!-- Runs on install -->
    <sql>
        <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
    </sql>
</install>
<uninstall> <!-- Runs on uninstall -->
    <sql>
        <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
    </sql>
</uninstall>
<update> <!-- Runs on update; New in 1.6 -->
    <schemas>
        <schemapath type="mysql">sql/updates/mysql</schemapath>
    </schemas>
</update>

<!-- Site Main File Copy Section -->
<!-- Note the folder attribute: This attribute describes the folder
    to copy FROM in the package to install therefore files copied
    in this section are copied from /site/ in the package -->
<files folder="site">
    <filename>index.html</filename>
    <filename>autobase.php</filename>
    <filename>controller.php</filename>
    <filename>definitions.php</filename>
    <filename>imageController.php</filename>
    <folder>views</folder>
    <folder>js</folder>
    <folder>css</folder>
    <folder>helpers</folder>
    <folder>models</folder>
    <folder>cache</folder>
    <folder>images</folder>
</files>

<administration>
    <!-- Administration Menu Section -->
    <menu>AutoBase!</menu>
    <!-- Administration Main File Copy Section -->
    <!-- Note the folder attribute: This attribute describes the folder
        to copy FROM in the package to install therefore files copied
        in this section are copied from /admin/ in the package -->
    <files folder="admin">
        <!-- Admin Main File Copy Section -->
        <filename>index.html</filename>
        <filename>autobase.php</filename>
        <filename>controller.php</filename>
        <!-- SQL files section -->
        <folder>sql</folder>
        <!-- tables files section -->
        <folder>tables</folder>
        <!-- models files section -->
        <folder>models</folder>
        <!-- views files section -->
        <folder>views</folder>
        <!-- views helpers section -->
        <folder>helpers</folder>
    </files>
</administration>

</extension> 
```

'com_autobase.zip' INSTALLER 包预览

[![包裹](../Images/5d162d3d4ac01b225d25025bc490df0e.png)](https://i.stack.imgur.com/8pdNQ.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/zcga3oyx.cs2.png)）]

但是当我安装打包的 zip 文件时，我收到了这个错误。“**文件不存在：admin/definitions.php** ”（应该可以预料到，因为该文件位于**站点**目录中，而不是**管理目录**中）。

[![joomla 错误](../Images/949a13e15e08a62b4ac4e96e097eda79.png)](https://i.stack.imgur.com/sMi3X.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/htlotipf.mgk.png)）]

这告诉我它试图找到位于**站点**目录中的文件/文件夹，但使用**admin 目录**。如何将我的扩展文件从站点和管理员转移到正确的位置？在 joomla CMS 上。

站点文件夹“com_autobase.zip”（从 Windows 预览，正如您看到的**定义**。php在那里）。

[![站点窗口安装程序](../Images/32ff290233b9fc5c89ceef46d6441a28.png)](https://i.stack.imgur.com/XGaGl.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/j5coups5.aqo.png)）]

[可在此处](https://rapidshare.com/files/1006577725/com_autobase.zip)下载安装程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:30:24.777

好的，找到了解决您问题的方法。在`admin`文件夹中，删除`autobase.xml`文件并将文件添加到`index.html`文件`cache`夹中。我认为 Joomla 不喜欢安装空文件夹。完成此操作后，它应该可以正常安装。

问候。

# c# - 使用 C#.NET 时如何防止在 MySQL 中插入问号 (???)？

> ID：11236568
> 
> 赞同：2
> 
> 时间：2012-06-28T00:28:05.643
> 
> 标签：c#, php, mysql, unicode, character-encoding

作为一名 PHP 开发人员，每当我想在 Unicode 内容上使用 PHP 和 MySQL 时，我总是使用下面的代码：

```
$link = mysql_connect("localhost","root") or die (mysql_error());
if ($link) {
    mysql_set_charset('utf8',$link);
    $db = mysql_select_db("mydb") or die (mysql_error());
} 
```

在这种情况下，所有内容都将完全存储在 MySQL 数据库中。

现在，我有一个用 C#.NET 编写的 Windows 应用程序，我必须将它与 MySQL 数据库连接，并通过它在数据库中存储一些东西。但所有内容都保存为`???`标记。

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T00:34:32.157

您需要通过在您的连接字符串中包含该信息来告诉您的 C# 代码 MySQL 数据库使用 UTF8 编码，例如：

```
Server=localhost;Database=test;Uid=MyUsername;Pwd=MyPassword;Charset=utf8; 
```

# facebook - Facebook 应用程序上的多语言身份验证对话框

> ID：11236569
> 
> 赞同：1
> 
> 时间：2012-06-28T00:28:17.533
> 
> 标签：facebook, oauth

我在画布/页面选项卡上有一个 Facebook 应用程序。

有什么方法可以用用户语言在 Auth Dialog 页面中显示文本？我指的是*字幕*和*摘要*自定义。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:31:39.973

有一个“翻译你的应用程序”按钮：

![在此处输入图像描述](../Images/397acc5d9a7f6760ef1a907484cfbdad.png)

# android - 将选定的 ListView 项置于顶部

> ID：11236573
> 
> 赞同：0
> 
> 时间：2012-06-28T00:29:15.860
> 
> 标签：android, android-widget, android-listview

我在寻呼机适配器中有列表视图，我正在尝试这样做，所以当我单击列表视图中的一个项目时，它会将该项目滚动到顶部。我有一个关于该项目的 onclicklistener，但我不确定如何根据我所拥有的内容来实现滚动。

```
public Object instantiateItem(ViewGroup container, int position) {
        List<App> app = this.apps.get(position);

        ListView list = new ListView(this.activity);
        list.setAdapter(adapter);

        container.addView(list);

        return list;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:42:32.527

首先，使用ListView 的onItemClickListener。其次，将 setSelected() 方法与项目的位置（您在侦听器上）一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:47:14.430

[平滑滚动到位置](http://developer.android.com/reference/android/widget/ListView.html#smoothScrollToPosition%28int%29)

[设置选定位置](http://developer.android.com/reference/android/widget/AdapterView.html#setSelection%28int%29)

# objective-c - 不允许在具有源列表突出显示的 NSTableView 中进行空选择吗？

> ID：11236576
> 
> 赞同：1
> 
> 时间：2012-06-28T00:29:26.473
> 
> 标签：objective-c, cocoa, nstableview, appkit

我觉得我可能在这里遗漏了一些明显的东西，但是如果我有一个 NSTableView，它的 Highlight 设置为 Source List 并且启用了 Empty 选择，我似乎无法单击表格中的空白行来清除选择。

将 Highlight 更改为常规可以解决问题，但当然不会以我想要的方式绘制。

该表没有绑定并使用自定义数据源。有没有办法解决这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:15:10.027

您可以使用目标操作来完成此操作。在初始化期间执行以下操作：

```
self.tableView.delegate             = self;
self.tableView.dataSource           = self;
self.tableView.target               = self;
self.tableView.action               = @selector(singleClickAction:);
self.tableView.allowsEmptySelection = YES; 
```

然后在你的类中添加一个方法：

```
- (void)singleClickAction:(id)sender
{
    NSInteger clickedRow = [sender clickedRow];
    if (clickedRow < 0) {
        [self.tableView deselectAll:self];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:56:22.837

现在，我最终将以下内容添加到我的 NSTableView 子类中：

```
- (void)mouseDown:(NSEvent *)theEvent
{
    [super mouseDown:theEvent];

    if ( [self allowsEmptySelection] && [self selectionHighlightStyle] == NSTableViewSelectionHighlightStyleSourceList )
    {
        NSInteger row = [self rowAtPoint:[self convertPoint:[theEvent locationInWindow] fromView:nil]];
        if ( row == -1 )
        {
            [self deselectAll:nil];
        }
    }
} 
```

# javascript - Facebook API - 检测会话是否处于活动状态

> ID：11236578
> 
> 赞同：2
> 
> 时间：2012-06-28T00:29:42.427
> 
> 标签：javascript, facebook, facebook-graph-api

我确定我只是忽略了 Facebook API 文档中的某些内容。基本上，在我加载了 FB Graph 之后，我需要知道会话是否处于活动状态......我不能简单地假设他们已经注销并且如果他们在“auth.statusChange”登录后简单地重新渲染事件被触发。我需要马上知道。

下面是我使用的代码。最重要的是 FB.getLoginStatus/getAuthResponse/getAccessToken 不像我期望的那样工作；本质上，当它被调用时，它表明他们是登录还是注销。

```
（函数（d）{

    // 创建 fb-root
    var fb_root = document.createElement('div');
        fb_root.id = "fb-root";
        document.getElementsByTagName('body')[0].appendChild(fb_root);

    // 加载 FB 异步
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('脚本'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);

    // 应用配置数据
    变量配置 = {
        appId : XXXX,
        饼干：真的，
        状态：真实，
        无摩擦请求：真
    };

    window.fbAsyncInit = function() {
        // 这行不通。
        // 我不能假设他们已经注销并依靠这个来告诉我他们已经登录。
        FB.Event.subscribe('auth.statusChange', function(response) {});

        // 在里面
        FB.init（配置）；

        // 这些并不表示用户是否已注销 :(
        FB.getLoginStatus(函数(响应) { });
        FB.getAuthResponse(函数(响应) { });
        FB.getAccessToken(function(response) { });
    };

}（文档））;

```

任何帮助深表感谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:12:38.107

感谢您的帮助，但我在另一篇文章中找到了答案：[https ://stackoverflow.com/a/7765144/560686](https://stackoverflow.com/a/7765144/560686)

显然，当您仍处于沙盒模式`FB.getLoginStatus()`时，只会在他们登录时触发回调，但不会在他们注销时触发。为了让它工作，我必须禁用沙盒模式。:)

# javascript - JavaScript 隔离哈希值

> ID：11236579
> 
> 赞同：0
> 
> 时间：2012-06-28T00:29:43.743
> 
> 标签：javascript, hash

对昨天的一个问题的跟进。我有一个改变值的散列，需要隔离下半部分。下面的代码可以工作，但如果没有值，则需要返回 false，因为我`if (val.length){}`稍后会使用它，并且它目前始终为 true。所以，为了证明：

```
var hash = window.location.hash,
    page = hash.split('=')[0],
    val  = hash.substr(hash.indexOf('=') + 1);

    console.log(hash,page,val);

localhost/#work
console returns: #work, #work, #work

localhost/#work=misery
console returns: #work=misery, #work, misery 
```

我希望它返回：

```
localhost/#work
console returns: #work, #work, (no value for val)

localhost/#work=misery
console returns: #work=misery, #work, misery 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:35:12.563

只需使用与页面相同的方法：

```
var hash = window.location.hash,
    values = hash.split("="),
    page = values[0],
    val  = values[1];

console.log(hash,page,val);

localhost/#work
console returns: #work, #work, undefined

localhost/#work=misery
console returns: #work, #work, misery 
```

PS我会建议你添加JavaScript标签，也许删除jQuery标签，因为这是一个与jQuery完全无关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:49:02.863

只需添加一些逻辑来检查是否有值

```
var hash = window.location.hash,
    values = hash.split("="),
    page = values[0],
    val  = values[1]?values[1]:'';//you can use if (val.length){} to check if ther is a value

console.log(hash,page,val); 
```

# c# - LINQ：字段可以是 int 或 bool - 我如何在没有 InvalidCastException 的情况下使用它？

> ID：11236582
> 
> 赞同：1
> 
> 时间：2012-06-28T00:30:01.023
> 
> 标签：c#, .net, linq

我在 DataTable 上使用 LINQ 查询，其中数据字段可能是`bool`（真/假）或`int`（1/0）。LINQ 查询要求`Field`方法的类型，如果数据字段不同，`InvalidCastException`则抛出一个（无法捕获）。

```
 var query =
   from tbl12 in t12.AsEnumerable()
   where tbl12.Field<int>("theField") == 0
   select new { T12 = tbl12 }; 
```

或者

```
 var query =
   from tbl12 in t12.AsEnumerable()
   where tbl12.Field<bool>("theField") == false
   select new { T12 = tbl12 }; 
```

我怎样才能解决这个问题？我想过滤字段 = false 或 0 的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:34:28.663

我找到了答案：将类型设置为`object`并在字段上使用 ToString() 方法。

IE：

```
 var query =
   from tbl12 in t12.AsEnumerable()
   where tbl12.Field<object>("theField").ToString() == "false" || tbl12.Field<object>("theField").ToString() == "0"
   select new { T12 = tbl12 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:03:24.860

我想不出一个真正干净的版本来解决这个问题，所以可能最好的方法（和相关的事情）是使用这样的`Convert`类：

```
var query =
from tbl12 in t12.AsEnumerable()
where !Convert.ToBoolean(tbl12.Field<object>("theField"))
select new { T12 = tbl12 }; 
```

它并不漂亮，但至少这个变体不依赖字符串转换来获得结果。

# ajax - jQuery Ajax 请求 - 丢失方法

> ID：11236592
> 
> 赞同：0
> 
> 时间：2012-06-28T00:31:42.660
> 
> 标签：ajax, jquery-ui, jquery

我有一个使用模式上传文件的页面 index.php。上传这些后，我使用以下内容更新我的数据库并将新图像加载到列表中。

```
$('#sortableImages').load('../includes/sortImages.php?edit=' + edit); 
```

执行：

```
<script type="text/javascript">
$(document).ready(function(){ 

    $(function() {
        $("#sortableImages ul").sortable({ 
            opacity: 0.6, cursor: 'move', update: function() {
                var order = $(this).sortable("serialize") + '&action=updateRecordsListings';
                $.post("../albumUploader/queries/sort.php", order);
            }
         });
    });

});
</script>
echo "<ul class='revisionList'>";

                while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
                    $sortImageName = $row['OrgImageName']; 
                    $sortPath = "../data/gallery/" . $getGalleryID . "/images/album/" . $sortImageName;
                    echo "<li class='sortPhotos' id='recordsArray_{$row['id']}' >";
                    echo '<img src="'. $sortPath .'"/>';
                    echo "</li>";
                }

                echo "</ul>"; 
```

图像填充在索引页面上的 div #sortableImages 中。但是，似乎我从最初加载在 index.php 中的 js 文件中丢失了我的 sortable() 方法，或者在 ajax 请求之后它没有读取 js。我在这里想念什么？

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:46:54.467

当您使用 ajax 从远程页面加载脚本时，重要的是要意识到在您正在加载的页面中已经发生了 ready 事件。

这意味着包裹在其中的代码将在`$(function(){})`收到后立即触发。如果该代码在它引用的 html 之前，它将找不到该 html，因为它还不存在。

如果您将相同的代码移到它所引用的 html 下方，它将在 html 存在后触发，因此会找到它。

**编辑：我的回答假定 OP 中“执行：”之后显示的所有代码都包含在远程页面中**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:59:05.677

对于 sort.php 的结果，您没有处理程序。调用它只会将数据加载到缓存中。

您需要一个完整的处理函数来刷新数据，更不用说将其添加到 dom 中。您应该澄清您的问题，并明确指出这是两个不同的页面。

$.post("../albumUploader/queries/sort.php", order).complete = func...

# regex - 在 Vim 中突出显示 Javascript 内联块注释

> ID：11236602
> 
> 赞同：3
> 
> 时间：2012-06-28T00:32:32.097
> 
> 标签：regex, vim

## 背景

我使用 JScript（Microsoft 的 ECMAScript 实现）来满足许多 Windows 系统管理需求。这意味着我使用了很多 ActiveX（自动化 COM）对象。这些对象的方法通常需要数字或布尔参数。例如：

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var a = fso.CreateTextFile("c:\\testfile.txt", true);
a.WriteLine("This is a test.");
a.Close(); 
```

[（MSDN 上的 CreateTextFile 方法）](http://msdn.microsoft.com/en-us/library/5t9b5c0c%28v=vs.84%29.aspx)

在第二行，您会看到第二个论点是我正在谈论的论点。“真”的布尔值并不能真正描述方法的行为将如何变化。这对我来说不是问题，但我自动化害羞的同事很容易被吓到。不知道一个论点会吓到他们。不幸的是，一长串常量（当然不是真正的常量，因为当前的 JScript 版本不支持它们）也会吓到它们。因此，我开始使用内联块注释记录其中一些基本函数调用。上面示例中的第二行将这样写：

```
var a = fso.CreateTextFile("c:\\testfile.txt", /*overwrite*/ true, /*unicode*/ false); 
```

不过，这最终会以一个小语法突出显示我的困境。我喜欢我的评论充满活力；块和行注释。然而，就我个人而言，这些微小的内联块注释对我来说意义不大。我想以更柔和的方式突出这些特定的评论（例如，白底浅灰）。这使我陷入困境。

## 困境

当开始和结束标记都在同一行时，我想覆盖块注释的默认语法突出显示。理想情况下，这仅在我的 vimrc 文件中完成，而不是在 javascript.vim 语法的替代个人副本中完成。我最初的尝试是可悲的：

```
hi inlineComment    guifg=#bbbbbb
match inlineComment "\/\*.*\*\/" 
```

您可以立即看到此正则表达式模式的第一个问题是它是一种贪婪搜索。它将匹配行上的第一个“/*”到最后一个“*/”，这意味着两个内联块注释之间的所有内容也将获得这种突出显示样式。我可以解决这个问题，但我真的不确定如何处理我的第二个问题。

不能在 ECMAScript 中的字符串文字内定义注释。所以这个语法高亮也将覆盖字符串高亮。我在系统管理脚本中从来没有遇到过这个问题，但是当我检查许多用于浏览器的 javascript 库（例如[less.js](http://lesscss.org/)）的源代码时，它确实经常咬我。

令人惊叹的 StackOverflow 社区会推荐什么正则表达式模式、语法定义或其他解决方案来恢复我的 vimrc zen？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:59:26.157

我不确定，但从您的描述看来，您不需要新的语法定义。Vim 语法文件通常允许您使用自己选择的突出显示覆盖特定的语法项。在这种情况下，您想要的项目被调用`javaScriptComment`，所以像这样的命令将设置它的突出显示：-

```
hi javaScriptComment guifg=#bbbbbb 
```

但你必须在你的 .vimrc 文件（或从那里获取的某个地方）中执行此操作，因此在语法文件之前对其进行评估。语法文件使用`highlight default`命令，因此语法文件的高亮选择只影响没有高亮集的语法项。有关`:help :hi-default`详细信息，请参阅。顺便说一句，它只适用于 Vim 5.8 及更高版本。

上述命令将更改所有内联`/* */`注释，并保留`//`行注释的默认设置，因为行注释是不同的语法项 ( `javaScriptLineComment`)。您可以通过查看 javascript.vim 文件找到所有这些组的名称。（最简单的方法是`:e $VIMRUNTIME/syntax/javascript.vim`。）

如果您只想更改*一些*内联注释，它会稍微复杂一些，但通过查看 javascript.vim 仍然很容易看到要做什么。如果你这样做，你可以看到块注释是这样定义的：-

```
syn region javaScriptComment start="/\*" end="\*/" contains=@Spell,javaScriptCommentTodo 
```

看到您可以对开始和结束标记使用单独的正则表达式：您不必担心将中间的东西与非贪婪量词或类似的东西相匹配。要使语法项具有类似的作用但仅在一行上，请尝试添加`oneline`选项（`:h :syn-oneline`有关更多详细信息）：-

```
syn region myOnelineComment start="/\*" end="\*/" oneline 
```

我删除了这两个`contains`组，因为 (1) 如果您仅将其用于参数名称，您可能不希望在这些注释中打开拼写检查，并且 (2) 包含不`oneline`覆盖`oneline`in 的部分容器区域，因此您仍然可以将所有 TODO 注释与该区域匹配。

你可以在你的 .vimrc 中定义这种新的注释区域，并设置你喜欢的突出显示：看起来你已经知道如何做到这一点，所以我不会对此进行详细介绍。我还没有尝试过这个特定的例子，所以你可能仍然需要一些摆弄才能让它工作。试一试，让我知道它是怎么回事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T05:54:21.063

为什么不简单地在调用上方添加注释行？

我觉得

```
// fso.CreateTextFile(filename:String, overwrite:Boolean, unicode:Boolean)
var a = fso.CreateTextFile("c:\\testfile.txt", true, false); 
```

比

```
var a = fso.CreateTextFile("c:\\testfile.txt", /*overwrite*/ true, /*unicode*/ false); 
```

# boost - 使用 Spirit.Lex 解析一个特殊的一元减号

> ID：11236604
> 
> 赞同：0
> 
> 时间：2012-06-28T00:32:53.743
> 
> 标签：boost, boost-spirit, boost-spirit-lex

我正在尝试解析一种语言，其中通过符号周围存在的空格将一元减号与二进制减号区分开来。下面是一些伪规则，定义了减号在这种语言中的解释方式：

```
 -x       // unary
 x - y    // binary
 x-y      // binary
 x -y     // unary
 x- y     // binary
 (- y ... // unary 
```

**注意：**最后一条规则中的 open paren 可以替换为语言中的任何标记，除了 'identifier'、'number' 和 'close_paren'。

**注意：**在第 4 种情况下，x 是标识符。标识符可以构成它自己的语句。而 -y 是一个单独的语句。

由于减号类型取决于空格，我想我会从词法分析器返回两个不同的标记，一个用于一元减号，一个用于二进制减号。有什么想法我该怎么做？

**代码：**这里有一些对我有用的代码，但我不太确定它是否足够健壮。我试图通过删除所有不相关的词法分析器规则来简化它：

```
#ifndef LEXER_H
#define LEXER_H

#include <iostream>
#include <algorithm>
#include <string>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <boost/spirit/include/phoenix_function.hpp>
#include <boost/spirit/include/phoenix_algorithm.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_object.hpp>
#include <boost/spirit/include/phoenix_statement.hpp>

#define BOOST_SPIRIT_LEXERTL_DEBUG 1

using std::string;
using std::cerr;

namespace skill {

   namespace lex = boost::spirit::lex;
   namespace phoenix = boost::phoenix;

   // base iterator type
   typedef string::iterator BaseIteratorT;

   // token type
   typedef lex::lexertl::token<BaseIteratorT, boost::mpl::vector<int, string> > TokenT;

   // lexer type
   typedef lex::lexertl::actor_lexer<TokenT> LexerT;

   template <typename LexerT>
   struct Tokens: public lex::lexer<LexerT>
   {
      Tokens(const string& input):
         lineNo_(1)
      {
         using lex::_start;
         using lex::_end;
         using lex::_pass;
         using lex::_state;
         using lex::_tokenid;
         using lex::_val;
         using lex::omit;
         using lex::pass_flags;
         using lex::token_def;
         using phoenix::ref;
         using phoenix::count;
         using phoenix::construct;

         // macros
         this->self.add_pattern
            ("EXP",     "(e|E)(\\+|-)?\\d+")
            ("SUFFIX",  "[yzafpnumkKMGTPEZY]")
            ("INTEGER", "-?\\d+")
            ("FLOAT",   "-?(((\\d+)|(\\d*\\.\\d+)|(\\d+\\.\\d*))({EXP}|{SUFFIX})?)")
            ("SYMBOL",  "[a-zA-Z_?@](\\w|\\?|@)*")
            ("STRING",  "\\\"([^\\\"]|\\\\\\\")*\\\"");

         // whitespaces and comments
         whitespaces_ = "\\s+";
         comments_    = "(;[^\\n]*\\n)|(\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\/)";

         // literals
         float_   = "{FLOAT}";
         integer_ = "{INTEGER}";
         string_  = "{STRING}";
         symbol_  = "{SYMBOL}";

         // operators
         plus_          = '+';
         difference_    = '-';
         minus_         = "-({SYMBOL}|\\()";

         // ... more operators

         // whitespace
         this->self += whitespaces_
            [
               ref(lineNo_) += count(construct<string>(_start, _end), '\n'),
               _pass = pass_flags::pass_ignore
            ];

         // a minus between two identifiers, numbers or close-open parens is a binary minus, so add spaces around it
         this->self += token_def<omit>("[)a-zA-Z?_0-9]-[(a-zA-Z?_0-9]")
            [
               unput(_start, _end, *_start + construct<string>(" ") + *(_start + 1) + " " + *(_start + 2)),
               _pass = pass_flags::pass_ignore
            ];

         // operators (except for close-brackets) cannot be followed by a binary minus
         this->self += token_def<omit>("['`.+*<>/!~&|({\\[=,:@](\\s+-\\s*|\\s*-\\s+)")
            [
               unput(_start, _end, *_start + construct<string>("-")),
               _pass = pass_flags::pass_ignore
            ];

         // a minus directly preceding a symbol or an open paren is a unary minus
         this->self += minus_
            [
               unput(_start, _end, construct<string>(_start + 1, _end)),
               _val = construct<string>("-")
            ];

         // literal rules
         this->self += float_ | integer_ | string_ | symbol_;

         // ... other rules
      }

      ~Tokens() {}

      size_t lineNo() { return lineNo_; }

      // ignored tokens
      token_def<omit> whitespaces_, comments_;

      // literal tokens
      token_def<int> integer_;
      token_def<string>  float_, symbol_, string_;

      // operator tokens
      token_def<> plus_, difference_, minus_; // minus_ is a unary minus
      // ... other tokens

      // current line number
      size_t lineNo_;
   };
}

#endif // LEXER_H 
```

基本上，我将二进制减号（`difference`在代码中称为）定义为两边都有空格的减号，并使用[unput](https://stackoverflow.com/a/11236489/583925)来确保这条规则。我还将一元减号定义为直接位于符号或开放括号之前的减号，并再次使用 unput 来确保维护此规则（对于数字，减号是令牌的一部分）。

# stress-testing - 在openstack中收集压力测试数据

> ID：11236606
> 
> 赞同：0
> 
> 时间：2012-06-28T00:33:13.913
> 
> 标签：stress-testing, openstack

我已经使用 stackops 在单节点中安装了 openstack essex 版本。对于我的论文，我必须对 openstack 的性能进行一些测试。

我需要一个压力测试来测试 openstack 系统和一个可以用一些图形表示这些测试的应用程序......

这是可能的？任何人都可以帮助我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:07:31.293

您可能想查看[OpenStack 集成测试文档](http://qa.openstack.org/integration.html)。特别是，有一个名为[Tempest](https://github.com/openstack/tempest)的测试套件，用于 OpenStack 集成测试，包括[压力测试](https://github.com/openstack/tempest/tree/master/stress)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:17:44.987

对于 swift(storage) 组件，我们使用[Tsung](http://tsung.erlang-projects.org/)进行一些负载和压力测试。Tsung 还提供图形报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T01:59:25.493

[https://github.com/cloudscaling/tarkin](https://github.com/cloudscaling/tarkin) 这是我们过去用来做一些非常基本的负载测试的东西。

# objective-c - UIView 只设置侧边框

> ID：11236607
> 
> 赞同：16
> 
> 时间：2012-06-28T00:33:13.907
> 
> 标签：objective-c, ios, cocoa-touch, uiview

有没有办法将 UIView 边框的两侧设置为一种颜色，并让顶部和底部保持另一种颜色？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-28T00:38:43.027

不——CALayer 边界不支持这种行为。完成您想要的最简单的方法是在视图的每一侧添加一个*n*点宽的不透明子视图，并将所需的边框颜色作为其背景颜色。

例子：

```
CGSize mainViewSize = theView.bounds.size;
CGFloat borderWidth = 2;
UIColor *borderColor = [UIColor redColor];
UIView *leftView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, borderWidth, mainViewSize.height)];
UIView *rightView = [[UIView alloc] initWithFrame:CGRectMake(mainViewSize.width - borderWidth, 0, borderWidth, mainViewSize.height)];
leftView.opaque = YES;
rightView.opaque = YES;
leftView.backgroundColor = borderColor;
rightView.backgroundColor = borderColor;

// for bonus points, set the views' autoresizing mask so they'll stay with the edges:
leftView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleRightMargin;
rightView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin;

[theView addSubview:leftView];
[theView addSubview:rightView];

[leftView release];
[rightView release]; 
```

请注意，这与 CALayer 边框的行为不太匹配——左右边框视图将始终位于其父视图的边界内。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-16T18:29:55.397

像边框一样工作的视图的答案非常好，但请记住，每个视图都是一个消耗大量内存的 UI 对象。

我应该使用 uivew 的图层在已经存在的 UIview 上绘制带有颜色的笔画。

```
-(CAShapeLayer*)drawLineFromPoint:(CGPoint)fromPoint toPoint:(CGPoint) toPoint withColor:(UIColor *)color andLineWidth:(CGFloat)lineWidth{

CAShapeLayer *lineShape = nil;
CGMutablePathRef linePath = nil;

linePath = CGPathCreateMutable();
lineShape = [CAShapeLayer layer];

lineShape.lineWidth = lineWidth;
lineShape.strokeColor = color.CGColor;

NSUInteger x = fromPoint.x;
NSUInteger y = fromPoint.y;

NSUInteger toX = toPoint.x;
NSUInteger toY = toPoint.y;

CGPathMoveToPoint(linePath, nil, x, y);
CGPathAddLineToPoint(linePath, nil, toX, toY);

lineShape.path = linePath;
CGPathRelease(linePath);
return lineShape;} 
```

并将其添加到我们的视图中。

```
CAShapeLayer* borderLine=[self drawLineFromPoint:CGPointMake(0, 0) toPoint:CGPointMake(0,_myView.frame.size.height) withColor:[UIColor lightGrayColor] andLineWidth:1.0f];

[_myView.layer addSublayer:borderLine]; 
```

所以......我们取一个点，实际上从我们视图的顶部到底部绘制一条线。结果是有一条线看起来像一个像素宽度的边框。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-06T19:39:24.457

### 为 Swift 3.0 更新

我编写了一个 Swift 扩展（用于 UIButton），它模拟将 UIView 任意一侧的边框设置为给定的颜色和宽度。它类似于@Noah Witherspoon 的方法，但基于自包含和自动布局约束。

```
 // Swift 3.0
extension UIView {

  enum Border {
    case left
    case right
    case top
    case bottom
  }

  func setBorder(border: UIView.Border, weight: CGFloat, color: UIColor ) {

    let lineView = UIView()
    addSubview(lineView)
    lineView.backgroundColor = color
    lineView.translatesAutoresizingMaskIntoConstraints = false

    switch border {

    case .left:
      lineView.leftAnchor.constraint(equalTo: leftAnchor).isActive = true
      lineView.topAnchor.constraint(equalTo: topAnchor).isActive = true
      lineView.bottomAnchor.constraint(equalTo: bottomAnchor).isActive = true
      lineView.widthAnchor.constraint(equalToConstant: weight).isActive = true

    case .right:
      lineView.rightAnchor.constraint(equalTo: rightAnchor).isActive = true
      lineView.topAnchor.constraint(equalTo: topAnchor).isActive = true
      lineView.bottomAnchor.constraint(equalTo: bottomAnchor).isActive = true
      lineView.widthAnchor.constraint(equalToConstant: weight).isActive = true

    case .top:
      lineView.topAnchor.constraint(equalTo: topAnchor).isActive = true
      lineView.leftAnchor.constraint(equalTo: leftAnchor).isActive = true
      lineView.rightAnchor.constraint(equalTo: rightAnchor).isActive = true
      lineView.heightAnchor.constraint(equalToConstant: weight).isActive = true

    case .bottom:
      lineView.bottomAnchor.constraint(equalTo: bottomAnchor).isActive = true
      lineView.leftAnchor.constraint(equalTo: leftAnchor).isActive = true
      lineView.rightAnchor.constraint(equalTo: rightAnchor).isActive = true
      lineView.heightAnchor.constraint(equalToConstant: weight).isActive = true
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T00:41:29.327

这听起来像是两个答案之一：

如果您的视图是静态尺寸，那么只需在其后面放置一个比您的前视图宽 2 像素和短 2 像素的 UIView。

如果它是非静态大小的，那么您可以执行相同的操作，在调整前景视图大小时调整后备视图的大小，或者实现实现 UIView 的自定义对象，并实现（覆盖）您自己的 drawRect 例程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-08T23:23:57.847

[NAUIViewWithBorders](https://github.com/natrosoft/NAUIViewWithBorders)为我做了诀窍。另请参阅[此处创建者的 SO 帖子](https://stackoverflow.com/a/21242709/2284713)。如果您需要此功能以获得多个视图，则值得一试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-11T23:54:45.937

```
public extension UIView {
// Border type and arbitrary tag values to identify UIView borders as subviews
public enum BorderType: Int {
    case left = 20000
    case right = 20001
    case top = 20002
    case bottom = 20003
}

public func addBorder(borderType: BorderType, width: CGFloat, color: UIColor) {
    // figure out frame and resizing based on border type
    var autoresizingMask: UIViewAutoresizing
    var layerFrame: CGRect
    switch borderType {
    case .left:
        layerFrame = CGRect(x: 0, y: 0, width: width, height: self.bounds.height)
        autoresizingMask = [ .flexibleHeight, .flexibleRightMargin ]
    case .right:
        layerFrame = CGRect(x: self.bounds.width - width, y: 0, width: width, height: self.bounds.height)
        autoresizingMask = [ .flexibleHeight, .flexibleLeftMargin ]
    case .top:
        layerFrame = CGRect(x: 0, y: 0, width: self.bounds.width, height: width)
        autoresizingMask = [ .flexibleWidth, .flexibleBottomMargin ]
    case .bottom:
        layerFrame = CGRect(x: 0, y: self.bounds.height - width, width: self.bounds.width, height: width)
        autoresizingMask = [ .flexibleWidth, .flexibleTopMargin ]
    }

    // look for the existing border in subviews
    var newView: UIView?
    for eachSubview in self.subviews {
        if eachSubview.tag == borderType.rawValue {
            newView = eachSubview
            break
        }
    }

    // set properties on existing view, or create a new one
    if newView == nil {
        newView = UIView(frame: layerFrame)
        newView?.tag = borderType.rawValue
        self.addSubview(newView!)
    } else {
        newView?.frame = layerFrame
    }
    newView?.backgroundColor = color
    newView?.autoresizingMask = autoresizingMask
} 
```

# php - 创建文件并将其保存到另一台服务器

> ID：11236609
> 
> 赞同：0
> 
> 时间：2012-06-28T00:33:42.473
> 
> 标签：php, ftp

我创建一个 json 文件并将其保存在我的脚本保存的服务器中。

```
<?
$format='epub_text';
$ver='1.0.0';

$posts = array('content_id'=> $dir,'content_version'=> $ver,'content_name'=> $title, 'content_format'=> $format);

$response = $posts;
$nama_file= $dir.'.json';
$fp = fopen($nama_file, 'w');
fwrite($fp, json_encode($response));
fclose($fp);
?> 
```

保存后，我需要将文件结果复制到另一台服务器，即 ftp 服务器。有什么建议怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:34:39.170

要在 PHP 中使用 FTP，可以使用 cURL。这是直接来自库开发人员的[教程:)](http://curl.haxx.se/libcurl/php/examples/ftpupload.html)

# java - String replaceAll(,) 方法 Java 的不区分大小写的变量

> ID：11236610
> 
> 赞同：8
> 
> 时间：2012-06-28T00:33:55.420
> 
> 标签：java, regex, string

谁能帮我在java中为变量创建一个正则表达式，这样字符串变量将被认为是不区分大小写的，并用类似的WINDOWS替换每个单词，如Access、access等？

这是代码：

```
$html=html.replaceAll(label, "WINDOWS"); 
```

请注意，标签是一个字符串变量。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-28T02:17:42.850

只需将“不区分大小写”开关添加到正则表达式：

```
html.replaceAll("(?i)"+label, "WINDOWS"); 
```

注意：如果标签可能包含具有特殊正则表达式意义的字符，例如标签是`".*"`，但您希望标签被视为纯文本（即不是正则表达式），请在标签周围添加正则表达式引号，或者

```
html.replaceAll("(?i)\\Q" + label + "\\E", "WINDOWS"); 
```

或者

```
html.replaceAll("(?i)" + Pattern.quote(label), "WINDOWS"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T00:50:00.167

String.replaceAll 相当于创建一个匹配器并调用它的 replaceAll 方法，因此您可以执行以下操作以使其不区分大小写：

```
html = Pattern.compile(label, Pattern.CASE_INSENSITIVE).matcher(html).replaceAll("WINDOWS"); 
```

请参阅：[String.replaceAll](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29 "String.replaceAll")和 [Pattern.compile](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#compile%28java.lang.String,%20int%29 "Pattern.compile") JavaDocs

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T00:48:10.433

只需使用模式和匹配器。这是代码

```
Pattern p = Pattern.compile("Your word", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher("String containing words");
String result = m.replaceAll("Replacement word"); 
```

使用模式很容易，因为它们不区分大小写。

有关详细信息，请参阅

[正则表达式匹配](http://www.javaworld.com/jw-07-2001/jw-0713-regex.html)

[Java：模式和匹配器](http://www.leepoint.net/notes-java/data/strings/40regular_expressions/26pattern-matcher.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T00:59:45.410

我认为但不确定您是否希望标签类似于`[Aa][cC][cC][eE][sS][sS]`

或者做

```
html = Pattern.compile(lable, Pattern.CASE_INSENSITIVE)
        .matcher(html).replaceAll("WINDOWS"); 
```

# mysql - mysql删除触发器

> ID：11236619
> 
> 赞同：1
> 
> 时间：2012-06-28T00:35:00.630
> 
> 标签：mysql, triggers

我想我读到删除触发器不知道删除了哪些数据并循环应用触发器的整个表。真的吗？

这是否意味着在删除数据之前删除前在整个表上循环，在删除发生后删除后在整个表上循环？

有没有办法只遍历已删除的记录？那么如果 10 条记录被删除循环它们呢？

```
DELIMITER $$
DROP TRIGGER  `before_delete_jecki_triggername`$$
CREATE TRIGGER before_delete_triggername
BEFORE DELETE ON table
FOR EACH ROW 
BEGIN
    /*do stuff*/
END$$
DELIMITER ; 
```

谢谢，

垫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:17:28.527

我认为这是由于与`FOR EACH ROW`声明混淆。
它仅适用于“*在调用触发器之前发出的语句的匹配记录。* ”

如果表中存在`N`记录数并且与 的记录匹配`where id=x`，则
假设`x`导致结果少于`N`记录，例如`N-5`，则仅
`FOR EACH ROW`导致循环`N-5`次数。

**更新**：
在受语句影响的行上运行的示例测试`FOR EACH ROW`如下所示。

```
mysql> -- create a test table
mysql> drop table if exists tbl; create table tbl ( i int, v varchar(10) );
Query OK, 0 rows affected (0.01 sec)

Query OK, 0 rows affected (0.06 sec)

mysql> -- set test data
mysql> insert into tbl values(1,'one'),(2,'two' ),(3,'three'),(10,'ten'),(11,'eleven');
Query OK, 5 rows affected (0.02 sec)
Records: 5  Duplicates: 0  Warnings: 0

mysql> select * from tbl;
+------+--------+
| i    | v      |
+------+--------+
|    1 | one    |
|    2 | two    |
|    3 | three  |
|   10 | ten    |
|   11 | eleven |
+------+--------+
5 rows in set (0.02 sec)

mysql> select count(*) row_count from tbl;
+-----------+
| row_count |
+-----------+
|         5 |
+-----------+
1 row in set (0.00 sec)

mysql>
mysql> -- record loop count of trigger in a table
mysql> drop table if exists rows_affected; create table rows_affected( i int );
Query OK, 0 rows affected (0.02 sec)

Query OK, 0 rows affected (0.05 sec)

mysql> select count(*) 'rows_affected' from rows_affected;
+---------------+
| rows_affected |
+---------------+
|             0 |
+---------------+
1 row in set (0.00 sec)

mysql>
mysql> set @cnt=0;
Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> -- drop trigger if exists trig_bef_del_on_tbl;
mysql> delimiter //
mysql> create trigger trig_bef_del_on_tbl before delete on tbl
    ->   for each row begin
    ->     set @cnt = if(@cnt is null, 1, (@cnt+1));
    ->
    ->     /* for cross checking save loop count */
    ->     insert into rows_affected values ( @cnt );
    ->   end;
    -> //
Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> delimiter ;
mysql>
mysql> -- now let us test the delete operation
mysql> delete from tbl where i like '%1%';
Query OK, 3 rows affected (0.02 sec)

mysql>
mysql> -- now let us see what the loop count was
mysql> select @cnt as 'cnt';
+------+
| cnt  |
+------+
| 3    |
+------+
1 row in set (0.00 sec)

mysql>
mysql> -- now let us see the table data
mysql> select * from tbl;
+------+-------+
| i    | v     |
+------+-------+
|    2 | two   |
|    3 | three |
+------+-------+
2 rows in set (0.00 sec)

mysql> select count(*) row_count from tbl;
+-----------+
| row_count |
+-----------+
|         2 |
+-----------+
1 row in set (0.00 sec)

mysql> select count(*) 'rows_affected' from rows_affected;
+---------------+
| rows_affected |
+---------------+
|             3 |
+---------------+
1 row in set (0.00 sec)

mysql> 
```

# sql-server - 从 WebLogic 11g 连接到 SQL Server

> ID：11236620
> 
> 赞同：0
> 
> 时间：2012-06-28T00:35:04.973
> 
> 标签：sql-server, jdbc, weblogic, weblogic11g

我无法为我们的 SQL Server 数据库设置 WebLogic 11g 数据源。你能帮忙诊断一下错误吗

> weblogic.common.ResourceException：无法创建池连接。DBMS 驱动程序异常为：[FMWGEN][SQLServer JDBC Driver][SQLServer]用户“carynt\pos​​app”登录失败

该值`carynt\posapp`是我为用户指定的值。我尝试[了文档中规定的](http://docs.oracle.com/cd/E13222_01/wls/docs103/jdbc_drivers/mssqlserver.html#wp1096945)各种不同的“AuthenticationMethod”设置。

我的单元测试（来自 Eclipse IDE）成功运行。然而，那些使用[IntegratedSecurity 设置](http://msdn.microsoft.com/en-us/library/ms378428.aspx#sectionToggle3)。是否可以以某种方式对 WebLogic 数据源使用类似的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:11:16.763

回答我自己的问题...

我们注意到 WebLogic 控制台日志中出现关于未找到不相关类的错误。我们的 WebLogic 管理员正确地将其诊断为由于进行了调整`java.library.path`（如使用[IntegratedSecurity](http://msdn.microsoft.com/en-us/library/ms378428.aspx#sectionToggle3)的建议）。

我们无法确定无数 WebLogic 的启动脚本中的哪一个正在初始化该*值*`java.library.path`。显然我对这个变量的设置破坏了原始值。通过*撤消*我的更改，我们注意到*默认值* `java.library.path`与 Windows PATH 系统变量值相同。因此我们

1.  `java.library.path`通过调整`startWebLogic.cmd`文件中的 Windows PATH 值自定义
2.  删除了 WebLogic 数据源定义中的用户 ID 和密码设置
3.  `integratedSecurity=true`在数据源定义中添加了设置。
4.  重新启动了服务器

财源！

# jquery - 如何在 prettyPhoto 图像视图（灯箱）中插入跟踪代码？

> ID：11236626
> 
> 赞同：0
> 
> 时间：2012-06-28T00:35:15.883
> 
> 标签：jquery, append, prettyphoto

我知道有人问过关于谷歌分析的类似问题，但在这种情况下，跟踪代码有点复杂。我想将跟踪代码附加到通过 prettyPhoto 查看的每个图像。

在 prettyPhoto 初始化方法中，我定义了 changepicturecallback 来调用一个函数：myCallbaclFunc：

```
$(".gallery:first a[rel^='prettyPhoto']").prettyPhoto({
            animation_speed:'normal',
            theme:'light_square',
            slideshow:3000, 
            autoplay_slideshow: false, 
            show_title: true, 
            overlay_gallery_max: 3000,
            changepicturecallback: myCallbackFunc
            }); 
```

那么，myCallbackFunc 定义为：

```
myCallbackFunc = function() {
//append code to social container div
$('.pp_social').append('<div class="netscope"><script type="text/javascript">var WRP_ID=316817;var WRP_SECTION="COMUNIDADE";var WRP_SUBSECTION="Estudos MensHealth";var WRP_SECTION_GRP="316817 - MensHealth";var WRP_SUBSECTION_GRP= WRP_SECTION;var WRP_CONTENT="Home content";var WRP_CHANNEL;var WRP_ACC;wreport_ok=0;</scr'+'ipt><script type="text/javascript" src="http://www.autohoje.com/inc/netscope2.js"></scr'+'ipt><script type="text/javascript">if(wreport_ok==1){ var w_counter = new wreport_counter(WRP_SECTION, WRP_SUBSECTION, WRP_ID, WRP_ACC, WRP_CHANNEL, WRP_SECTION_GRP, WRP_SUBSECTION_GRP);w_counter.add_content(WRP_CONTENT);w_counter.count();}</scr'+'ipt></div>'); 
```

}

但是当我检查生成的代码时，我得到的只是 emtpy div class="netscope"

除了“追加”我应该使用其他方法吗？我应该以某种方式逃避 javascript 代码吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:15:39.560

[无法附加 <script> 元素](https://stackoverflow.com/questions/610995/jquery-cant-append-script-element)

可能是您在有此问题的浏览器中。

或者它可能是您在 DOM 中看不到它的问题，

请参阅@Hendra Uzia 对这个问题的回答，

> jQuery 的所有插入方法都在内部使用 domManip 函数在元素插入 DOM 之前和之后清理/处理元素。domManip 函数所做的一件事是取出任何将要插入的脚本元素并通过“evalScript 例程”运行它们，而不是将它们与 DOM 片段的其余部分一起注入。它分别插入脚本，评估它们，然后将它们从 DOM 中删除。
> 
> 我相信 jQuery 这样做的原因之一是避免在某些情况下插入脚本时 Internet Explorer 中可能出现的“权限被拒绝”错误。如果它位于您要插入的包含元素内，然后在 DOM 中移动，它还可以避免重复插入/评估相同的脚本（这可能会导致问题）。
> 
> 我对脚本注入错综复杂的理解非常有限，所以如果您想进一步讨论它，也许您可​​以在 jQuery 论坛上发布一个主题。

# mysql - 从 MySQL 到 MS SQL，所有列都无效？

> ID：11236628
> 
> 赞同：0
> 
> 时间：2012-06-28T00:36:03.420
> 
> 标签：mysql, sql, sql-server, sql-server-2000

我有以下在 MySQL 中完美执行的查询，但是当我在 MS SQL Server 上执行它时给我带来了麻烦：

```
SELECT failedlogins.*, siteprofiles.failedLogins AS max,
   COUNT(failedlogins.id) AS total
FROM failedlogins RIGHT JOIN siteprofiles ON failedlogins > 0
WHERE computerName LIKE 'some awesome name' AND timeStamp > 1340752043
GROUP BY computerName 
```

我收到以下错误：

```
Msg 8120, Level 16, State 1, Line 2
Column 'failedlogins.id' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.
Msg 8120, Level 16, State 1, Line 2
Column 'failedlogins.timeStamp' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.
Msg 8120, Level 16, State 1, Line 2
Column 'failedlogins.userName' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.
Msg 8120, Level 16, State 1, Line 2
Column 'siteprofiles.failedLogins' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause. 
```

我认为它与 . 有关系`RIGHT JOIN`，但我不知道如何解决它。

正如旁注一样，如果您不熟悉 MySQL，我将唯一的一行从`siteprofiles`表`failedlogins`中加入。通常，您会看到一个`=`标志，表示喜欢多个表格中的两行。在 MySQL 中，如果您只选择一行来连接表，并且不使用等号运算符将行链接在一起，它将将该行连接到返回的每一行。

有人可以帮我调试上面的语句吗？

* * *

**编辑：**

下面是构造`failedlogins`表的 SQL：

```
CREATE TABLE failedlogins (
  "id" int NOT NULL,
  "timeStamp" int NOT NULL,
  "computerName" NTEXT NOT NULL,
  "userName" NTEXT NOT NULL,
  PRIMARY KEY ("id")
) ; 
```

和`siteprofiles`表格：

```
CREATE TABLE siteprofiles (
  "id" int NOT NULL,
  "siteName" varchar(200) NOT NULL,
  "paddingTop" tinyint NOT NULL,
  "paddingLeft" tinyint NOT NULL,
  "paddingRight" tinyint NOT NULL,
  "paddingBottom" tinyint NOT NULL,
  "width" int NOT NULL,
  "height" int NOT NULL,
  "sideBar" text NOT NULL,
  "auto" text NOT NULL,
  "siteFooter" text NOT NULL,
  "author" varchar(200) NOT NULL,
  "language" varchar(15) NOT NULL,
  "copyright" varchar(200) NOT NULL,
  "description" NTEXT NOT NULL,
  "meta" text NOT NULL,
  "timeZone" varchar(20) NOT NULL,
  "welcome" text NOT NULL,
  "style" varchar(200) NOT NULL,
  "iconType" text NOT NULL,
  "spellCheckerAPI" varchar(50) NOT NULL,
  "saptcha" text NOT NULL,
  "question" NTEXT NOT NULL,
  "answer" NTEXT NOT NULL,
  "failedLogins" int NOT NULL,
  PRIMARY KEY ("siteName")
);

INSERT INTO siteprofiles (id, siteName, paddingTop, paddingLeft, paddingRight, paddingBottom, width, height, sideBar, auto, siteFooter, author, language, copyright, description, meta, timeZone, welcome, style, iconType, spellCheckerAPI, saptcha, question, answer, failedLogins) VALUES
(1, 'The Bell News Magazine', 0, 0, 0, 0, 260, 180, 'Right', '', '<p>&copy; 2011 The Bell News Magazine</p>', 'The Bell News Magazine', 'en-US', '© 2011 The Bell News Magazine', 'The collaborative, innovative Bell News Magazine', 'The Bell News Magazine, The PAVCS Bell News Magazine, The Pennsylvania Virtual Charter School Bell News Magazine, Pennsylvania Virtual Charter School Bell News Magazine, Bell News Magazine, Bell News, Bell Magazine, The Bell Magazine, The Bell News', 'America/New_York', 'Ads', 'onlineUniversity.css', 'gif', 'jmyppg6c5k5ajtqcra7u4eql4l864mps48auuqliy3cccqrb6b', 'auto', '', '', 5); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:00:35.440

自从提供第一个答案以来，您似乎已经编辑了该问题。错误的曲调

> 列 'failedlogins.id' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

...是因为尽管 MySQL（在其默认配置中）对`GROUP BY`. 为了从 中提取所有其他列`failedlogins.*`，您需要`JOIN`针对仅对其相关组列进行计数的子查询。

```
SELECT
  failedlogins.*, 
  siteprofiles.failedlogins AS max,
  logincount
FROM 
  failedlogins RIGHT JOIN siteprofiles ON failedlogins > 0
  /* Join matches remaining columns to the counts of computerName */
  INNER JOIN (
    /* Subquery gets computerName and count to join against */
    SELECT computerName, COUNT(*) logincount FROM failedlogins GROUP BY computerName
  ) logincounter ON failedlogins.computerName LIKE logincounter.computerName
WHERE failedlogins.computerName LIKE 'some awesome name' AND timeStamp > 1340752043 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:38:04.697

如果`failedlogins`是数字，则需要明确指定条件

```
ON failedlogins > 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T00:39:38.643

```
FROM failedlogins RIGHT JOIN siteprofiles ON failedlogins 
```

我认为 ON 需要有条件，例如：

```
failedlogins is not null 
```

# wordpress - Wordpress - 页面别名

> ID：11236629
> 
> 赞同：0
> 
> 时间：2012-06-28T00:36:31.407
> 
> 标签：wordpress

我不知道为什么我很难找到答案，但我是。我希望它快速而无痛。

这是我第一次尝试 WordPress 网站。我创建了许多驻留在标准导航中的页面。目前导航链接如下所示：

?page_id=2

我希望链接友好，例如：

/餐厅/

我进入永久链接并尝试弄乱选项，我得到了要更改的 URL，但单击时我得到 404。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:44:53.850

我能想到的两件事

*   Wordpress 无法写入 .htaccess 文件（应在永久链接页面上显示警告）。在这种情况下，使用网站上显示的代码手动更新它。

*   mod_rewrite 在您的服务器上被禁用[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# ios - 苹果推送通知可以发送比警报和声音更多的参数吗？

> ID：11236630
> 
> 赞同：26
> 
> 时间：2012-06-28T00:36:31.543
> 
> 标签：ios, push-notification

我有几条需要与推送通知相关联的元数据。

例如用户号、消息 ID。

我可以发送比苹果支持的参数更多的参数吗：

```
 {aps =     {
    alert = joetheman;
    sound = default;
};} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-28T00:41:41.323

是的。在推送通知编程指南部分[通知有效负载](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CreatingtheNotificationPayload.html#//apple_ref/doc/uid/TP40008194-CH10-SW1)它指出

> 提供者可以在 Apple 保留的 aps 命名空间之外指定自定义有效负载值。自定义值必须使用 JSON 结构化和原始类型：字典（对象）、数组、字符串、数字和布尔值。您不应将客户信息作为自定义有效负载数据包含在内。相反，将其用于设置上下文（用于用户界面）或内部指标等目的。例如，自定义有效负载值可能是供即时消息客户端应用程序使用的对话标识符，或者是标识提供者何时发送通知的时间戳。与警报消息相关的任何操作都不应具有破坏性——例如，删除设备上的数据。

所以你的有效载荷可能看起来像

```
{
    "aps": {
        "alert": "joetheman",
        "sound": "default"
    },
    "message": "Some custom message for your app",
    "id": 1234
} 
```

在同一页面的下方有许多示例可以证明这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T04:38:18.270

当然。您可以使用苹果推送通知将自定义参数作为有效负载发送。就像凯文巴拉德所说的那样，有效载荷将如上所示。但是请记住，您始终在处理推送通知的一件事，根据苹果对推送通知的限制，通知有效负载允许的最大大小为 256 字节；Apple Push Notification Service 拒绝任何超出此范围的通知。因此，当您要向通知添加更多数据时，请考虑这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-21T09:51:20.860

不允许将自定义标签放在 aps 标签内。以下是文档中的说明：

```
Providers can specify custom payload values outside the Apple-reserved aps namespace. Custom values must use the JSON structured and primitive types: dictionary (object), array, string, number, and Boolean. 
```

因此，在您的情况下，您应该执行以下操作：

```
{
    "aps": {
        "alert": "Hello Push",
        "sound": "default"
    },
    "People": {
        "Address": "Your address here",
        "Name": "Your Name here",
        "Number": "XXXXXXXXXX"
    }
} 
```

因此，您可以通过在主 JSON 中而不是在“aps”中查找它的键来读取您的自定义有效负载：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-02T16:05:02.903

这是我根据[本教程发送自定义键/值的方式](https://www.iosapptemplates.com/blog/swift-programming/device-to-device-push-notifications-swift-firebase)

```
func sendPushNotification(to token: String, title: String, body: String, messageId: String, fromUsername: String, fromUID: String, timeStamp: Double) {

    let urlString = "https://fcm.googleapis.com/fcm/send"
    let url = NSURL(string: urlString)!

    // apple's k/v
    var apsDict = [String: Any]()
    apsDict.updateValue(title, forKey: "title")
    apsDict.updateValue(body, forKey: "body")
    apsDict.updateValue(1, forKey: "badge")
    apsDict.updateValue("default", forKey: "sound")

    // my custom k/v
    var myCustomDataDict = [String: Any]()
    myCustomDataDict.updateValue(messageId, forKey: "messageId")
    myCustomDataDict.updateValue(fromUsername, forKey: "username")
    myCustomDataDict.updateValue(fromUID, forKey: "uid")
    myCustomDataDict.updateValue(timeStamp, forKey: "timeStamp")

    // everything above to get posted
    var paramDict = [String: Any]()
    paramDict.updateValue(token, forKey: "to")
    paramDict.updateValue(apsDict, forKey: "notification")
    paramDict.updateValue(myCustomDataDict, forKey: "data")

    let request = NSMutableURLRequest(url: url as URL)
    request.httpMethod = "POST"
                                                     // ** add the paramDict here **
    request.httpBody = try? JSONSerialization.data(withJSONObject: paramDict, options: [.prettyPrinted])

    // send post ...
} 
```

这是我从 AppDelegate 中的通知中读取所有内容的方法。下面的方法是 AppleDelegate 中的一个委托方法。使用本[教程](https://www.raywenderlich.com/8164-push-notifications-tutorial-getting-started)

```
func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -> Void {

    let userInfo = response.notification.request.content.userInfo

    if let userInfo = userInfo as? [String: Any] {

        readPushNotification(userInfo: userInfo)
    }

    completionHandler()
}

func readPushNotification(userInfo: [String: Any]) {

    for (k,v) in userInfo {
        print(k)
        print(v)
    }

    // my custom k/v
    if let messageId = userInfo["messageId"] as? String {
        print(messageId)
    }

    if let fromUsername = userInfo["username"] as? String {
        print(fromUsername)
    }

    if let fromUID = userInfo["uid"] as? String {
        print(fromUID)
    }

    if let timeStamp = userInfo["timeStamp"] as? String {
        print(timeStamp)
    }

    // apple's k/v
    if let aps = userInfo["aps"] as? NSDictionary {

        if let alert = aps["alert"] as? [String: Any] {

            if let body = alert["body"] as? String {
                print(body)
            }

            if let title = alert["title"] as? String {
                print(title)
            }
        }

        if let badge = aps["badge"] as? Int {
            print(badge)
        }
    }
} 
```

# python - Scrapy FormRequest 发送 JSON

> ID：11236632
> 
> 赞同：12
> 
> 时间：2012-06-28T00:36:46.773
> 
> 标签：python, json, scrapy

我正在尝试创建一个可以发送 content-type:application/json 的 FormRequest。

这是我尝试的：

```
yield FormRequest("abc.someurl.com", formdata=json.dumps({"referenceId":123,"referenceType":456}), headers={'content-type':'application/json'}, callback=self.parseResult2) 
```

如果我使用`json.dumps()`formdata= 处理表单数据，我得到的错误是

> “exceptions.ValueError：需要超过 1 个值才能解压”

我不能只使用列表

```
formdata={"referenceId":123,"referenceType":456} 
```

FormRequest 有效，但不被服务器接受。

```
import requests
import json
result = requests.post(url, json.dumps({"referenceId":123,"referenceType":456}), headers={'content-type':'application/json'}) 
```

它可以在上面的 python 命令提示符下工作。

有任何想法吗？

-公里

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-11T00:42:28.910

FormRequest 用于模拟 HTML 表单（例如 application/x-www-form-urlencoded）。听起来你只是想用你的请求发布数据。由于您提到了“应用程序/json”的内容类型，您可能想要执行以下操作：

```
request = Request( url, method='POST', 
                   body=json.dumps(my_data), 
                   headers={'Content-Type':'application/json'} ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-07-02T04:18:13.757

```
from scrapy.http import JsonRequest

class TestSpider(scrapy.Spider):
    def start_requests(self):
        data = {
            'name1': 'value1',
            'name2': 'value2',
        }
        yield JsonRequest(url='http://www.example.com/post/action', data=data) 
```

查看更多：[docs.scrapy.org#jsonrequest](https://docs.scrapy.org/en/latest/topics/request-response.html#jsonrequest)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-01-02T06:21:04.893

您可以使用以下代码段来获得响应：

> > res =requests.post(url, json=data) print(res.text)

# c# - 创建和覆盖默认的 Outlook 阅读器检查器

> ID：11236633
> 
> 赞同：1
> 
> 时间：2012-06-28T00:36:56.483
> 
> 标签：c#, outlook

我正在尝试创建一个自定义视图来替换默认的 Outlook 邮件阅读器（*阅读器如图所示*）。

![标准 Outlook 邮件阅读器](../Images/167fb1a577e0779c3ca9d66acbd55fe1.png)

我似乎无法找到任何资源，这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:00:05.260

您可能正在寻找**Explorer Folder View**或**Web View Regions**。实现您所追求的唯一方法是[利用低级 Win32 API](http://code.msdn.microsoft.com/OlAdjacentWindows/) - 在 VSTO 提供的范围之外。请参阅[相关的 SO 帖子](https://stackoverflow.com/a/9173004/175679)。

这里有两种方法：

1.  购买[已经处理 Win32 集成的](http://www.add-in-express.com/docs/outlook-folder-view.php)AddIn [Express](http://www.add-in-express.com/add-in-net/index.php)（*[请参见此处的视频](http://www.youtube.com/watch?v=hD4YJSYud9M)*）。
2.  [使用 Win32 API 调用自己](http://code.msdn.microsoft.com/OlAdjacentWindows/)构建[**相邻区域**](http://code.msdn.microsoft.com/OlAdjacentWindows/)。

# tsql - 使用 T-SQL，是否可以在不锁定表的情况下将记录插入表中？

> ID：11236638
> 
> 赞同：0
> 
> 时间：2012-06-28T00:37:31.503
> 
> 标签：tsql

我有一个将数百万条记录插入表的过程。

当它被执行时，没有其他进程可以访问该表。他们必须等待几分钟。对于网络应用程序是不可接受的。

那么，是否可以在两个 sql 表之间使用像 BULK INSERT 这样的东西？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:53:12.873

> 那么，是否可以在两个 sql 表之间使用像 BULK INSERT 这样的东西？

是的……它被称为[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx)但它是从一个表到另一个表的两步过程：

在本地保存数据：

```
execute xp_cmdshell 'bcp Northwind.dbo.Orders out c:\temp\Orders.txt -Sgalser01 -T -n' 
```

然后批量插入保存的文件：

```
select * into Northwind.dbo.Orders2 from Northwind.dbo.Orders where 1=2
bulk insert Northwind.dbo.Orders2 from 'c:\temp\Orders.txt' 
     with (DATAFILETYPE  = 'native') 
```

# c# - 创建网络插件

> ID：11236640
> 
> 赞同：0
> 
> 时间：2012-06-28T00:37:53.530
> 
> 标签：c#, java, google-chrome, plugins

我正在尝试创建一个程序，该程序将从用户从浏览器上的网页触发的事件中传递输入数据。我目前的目标是 google-chrome，程序在 java 或 C# 中。我知道这是可能的，因为 Spotify 会这样做，战地 3 PC gui 也是如此。我该怎么做呢？用户是否需要安装扩展程序，或者我可以直接从 google-chrome 获取该信息吗？注意：该网页未在 localhost 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:59:38.127

您将要研究网络套接字。Web 套接字很酷。第一次进行演示时，我的脸上露出了灿烂的笑容。:D

这是一个帮助我的教程：

[http://www.developerfusion.com/article/143158/an-introduction-to-websockets/](http://www.developerfusion.com/article/143158/an-introduction-to-websockets/)

您可以在您的应用程序中创建一个套接字侦听，然后从 javascript 连接到它，传递您想要的任何数据。它比 ajax 更好，因为它是一个持久的开放连接，并且您没有 http 调用的开销。

# html - Twitter Bootstrap 中 div 元素的偏移垂直位置

> ID：11236645
> 
> 赞同：5
> 
> 时间：2012-06-28T00:38:32.570
> 
> 标签：html, twitter-bootstrap, vertical-alignment, fluid-layout

我正在尝试使用带有流体网格的 Twitter Bootstrap 正确垂直对齐偏移元素。（注：网格自定义为 30 列）

考虑到红色框，这是尝试的 div 放置：http: [//imgur.com/IkB2G](http://imgur.com/IkB2G) 这是我的代码的当前实际放置：http: [//imgur.com/oJ2mG](http://imgur.com/oJ2mG)

这是我正在使用的代码。根据图像，不确定如何让下方的红色框移动到其上方的空白处。

```
<div class="container-fluid nomargin">
<div class="row-fluid span30 nomargin"><div style="height:10px"></div></div>  <!--    Vertical spacing between menu and content-->
<div class="row-fluid">
<div class="span4"></div>
<div class="span16 white-box">
  <!--Body content-->
   <div style="height:100px"></div>
</div>
<div class="span6 white-box">
  <!--Body content-->
   <div style="height:300px"></div>
 </div>

 <div class="span16 white-box">
  <!--Body content-->
   <div style="height:100px"></div>
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:23:01.263

您需要将其视为 2 列，并且在左列中有嵌套的行。我无法从您发布的代码中找出合适的尺寸。但希望这段代码能给你一些启发。

```
<div class="row">
    <div class="span18">
        <div class="row">
            <div class="span18">This is a row on the left side.</div>
        </div>
        <div class="row">
            <div class="span18">This is a row on the left side.</div>
        </div>
    </div>
    <div class="span12">
        This is the content on the right side.
    </div>
</div> 
```

# ruby - 使用 Clang 安装 Ruby 1.9.3 的问题

> ID：11236654
> 
> 赞同：1
> 
> 时间：2012-06-28T00:40:01.403
> 
> 标签：ruby, rvm, clang, readline, bsd

我正在尝试在 Mac OS X Lion 上安装 Ruby 1.9.3，方法与我在[这里](https://stackoverflow.com/questions/10343486/cannot-install-ruby-1-9-3-on-a-clean-lion-install)发现的方法相同：

基本上是：

```
rvm install 1.9.3 --with-gcc=clang --with-readline-dir=$rvm_path/usr 
```

但是，这次 Clang 在`--with-readline-dir`选项上抛出了一个错误：

```
Larson:~ andrewjl$ rvm install 1.9.3 --with-gcc=clang --with-readline-dir=$rvm_path/usr
clang: error: unsupported option '--with-readline'
clang: error: unsupported option '--with-opt-dir=/Users/andrewjl/.rvm/usr' 
```

这是 Clang 的问题吗？有人知道如何解决这个问题吗？

编辑

在尝试了 Shigeya 的回答后，我得到了这个错误：

```
Larson:~ andrewjl$ rvm install 1.9.3-p125 --patch xcode-debugopt-fix-r34840.diff --with-readline-dir=$rvm_path/usr --with-openssl-dir=$rvm_path/usr --with-tcl-lib=/usr --with-tk-lib=/usr
Installing Ruby from source to: /Users/andrewjl/.rvm/rubies/ruby-1.9.3-p125, this may take a while depending on your cpu(s)...

ruby-1.9.3-p125 - #fetching 
ruby-1.9.3-p125 - #downloading ruby-1.9.3-p125, this may take a while depending on your connection...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 9505k  100 9505k    0     0  52267      0  0:03:06  0:03:06 --:--:-- 50727
ruby-1.9.3-p125 - #extracting ruby-1.9.3-p125 to /Users/andrewjl/.rvm/src/ruby-1.9.3-p125
ruby-1.9.3-p125 - #extracted to /Users/andrewjl/.rvm/src/ruby-1.9.3-p125
Applying patch 'xcode-debugopt-fix-r34840.diff' (located at /Users/andrewjl/.rvm/patches/ruby/1.9.3/p125/xcode-debugopt-fix-r34840.diff)
ruby-1.9.3-p125 - #autoreconf
Error running 'autoreconf', please read /Users/andrewjl/.rvm/log/ruby-1.9.3-p125/autoreconf.log
ruby-1.9.3-p125 - #configuring 
Error running ' ./configure --prefix=/Users/andrewjl/.rvm/rubies/ruby-1.9.3-p125 --enable-shared --disable-install-doc --with-readline --with-opt-dir=/Users/andrewjl/.rvm/usr --with-openssl --with-tcl-lib=/usr --with-tk-lib=/usr --with-libyaml --with-gcc=clang ', please read /Users/andrewjl/.rvm/log/ruby-1.9.3-p125/configure.log
There has been an error while running configure. Halting the installation. 
```

这是日志文件错误：

```
/usr/local/include/fuse/fuse_compat.h:69:10: fatal error: 'sys/statfs.h' file not found
#include <sys/statfs.h>
         ^
clang: error: unable to execute command: Broken pipe: 13
clang: error: clang frontend command failed due to signal 2 (use -v to see invocation)
clang: note: diagnostic msg: Please submit a bug report to http://developer.apple.com/bugreporter/ and include command line arguments and all diagnostic information.
clang: note: diagnostic msg: Error generating preprocessed source(s).
yes
checking for strip... strip
checking for prefix of external symbols... _
checking pthread.h usability... yes
checking pthread.h presence... yes
checking for pthread.h... yes
checking for if make is GNU make... yes
checking for nroff... /usr/bin/nroff
.ext/include/x86_64-darwin11.4.0/ruby/config.h updated
ruby library version = 1.9.1
configure: creating ./config.status
config.status: creating Makefile
configure: WARNING: unrecognized options: --with-readline, --with-openssl, --with-tcl-lib, --with-tk-lib, --with-libyaml
In file included from <built-in>:143:
In file included from <command line>:1:
In file included from /usr/local/include/fuse/fuse.h:26:
/usr/local/include/fuse/fuse_common.h:32:2: error: #error Please add -D_FILE_OFFSET_BITS=64 to your compile flags!
#error Please add -D_FILE_OFFSET_BITS=64 to your compile flags!
 ^
In file included from <built-in>:143:
In file included from <command line>:1:
In file included from /usr/local/include/fuse/fuse.h:857:
/usr/local/include/fuse/fuse_compat.h:69:10: fatal error: 'sys/statfs.h' file not found
#include <sys/statfs.h>
         ^
clang: error: unable to execute command: Broken pipe: 13
clang: error: clang frontend command failed due to signal 2 (use -v to see invocation)
clang: note: diagnostic msg: Please submit a bug report to http://developer.apple.com/bugreporter/ and include command line arguments and all diagnostic information.
clang: note: diagnostic msg: Error generating preprocessed source(s).
configure: WARNING: unrecognized options: --with-readline, --with-openssl, --with-tcl-lib, --with-tk-lib, --with-libyaml
config.status: creating ruby-1.9.pc
./configure: line 18932: syntax error near unexpected token `('
./configure: line 18932: `      sed 's/{\$([^(){}]*)[^{}]*}//g' ${srcdir}/common.mk' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:02:15.387

参考[这个](https://stackoverflow.com/questions/9651670/issue-updating-ruby-on-mac-with-xcode-4-3-1/9651747#9651747)答案。

尽管 ruby​​-1.9.3-p125 和 ruby​​-1.9.3-p194 都支持 clang，但通常不建议使用 clang 安装 Ruby。

（注意：我必须先接受编辑建议，然后再编辑。非常感谢您的贡献。）

# iphone - 显示在您的 iPhone 应用程序中的主视图控制器在哪里指定并被告知可见？

> ID：11236658
> 
> 赞同：0
> 
> 时间：2012-06-28T00:40:12.617
> 
> 标签：iphone, objective-c, ios

我正在再次开发 iPhone 应用程序，我想设置一个视图，以便在另一个视图之前看到。我已将视图添加到我的窗口并指定了我想使用的视图控制器代码，但我找不到 xcode 指定首先显示窗口中的哪个视图控制器的位置。我敢肯定它一定是显而易见的。我认为 appdelegate 似乎合乎逻辑，但我没有看到它显示在那里。有什么帮助吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:18:55.543

当您可以打开 MainWindow.xib 文件时，您可以在窗口上看到指定从哪个视图控制器加载的部分。（如“从”RootViewController“加载”）。在窗口的检查器中，有一个名为 NIB Name 的选项，它为您提供项目中可用的视图控制器列表。更改这些将更改您要从哪个视图控制器开始应用程序的设置。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:45:49.687

通常它在 UIApplication 设置代码中。还可以尝试查看您的 xib 文件以了解那里的链接设置！！！

在没有看到更多代码或您的设置的情况下，这是我能做的最好的！

# validation - 我应该为简单的验证逻辑使用规范吗？

> ID：11236660
> 
> 赞同：0
> 
> 时间：2012-06-28T00:40:34.747
> 
> 标签：validation, specifications

我最近一直在阅读规范，我非常热衷于使用它们。但是，我害怕做得过火。

例如，如果我有一个带有电话号码属性的 User 实体，我是否需要将电话号码规范测试放在 setter 中，或者 setter 中的验证逻辑是否足够？

谢谢，菲尔

**更新：** 更多上下文：我想我希望验证在域中，而不是在演示文稿中。我将在演示文稿中实现验证，但这更像是一个 UI 功能。这个想法（我相信）是域不能处于无效状态，也不能依赖于演示文稿。我实际上有一个电话号码实体，并且许多实体都有电话号码，虽然我认为这可能是价值对象，但这是另一个争论:)

我只是想知道在属性设置器中使用规范是否过分。我可以看到的一个优点是规范可以在层之间共享，即表示层，以便您可以共享验证代码。

如您所见，我不确定这是否是正确的方法。

非常感谢，菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:55:18.130

您可能会研究前置条件和后置条件（不变量或合同设计）的概念。前提条件是您的功能正确运行所必须满足的条件。后置条件是当您的功能完成并正常退出时为真的事情。

“用户的电话号码有效”可能是您的 setter 功能的一个很好的发布条件。但是，您有 2 个前置条件选择：(1) 使其成为 setter 函数的前置条件，即传递给它的任何内容都是有效的，或者 (2) 对 setter 函数制定更宽松的前置条件并执行错误检查在你的 setter 函数中。选项 (1) 实质上将验证责任转嫁给了客户端。选项 (2) 赋予您的用户实体处理错误的责任。

我认为您选择的设计将取决于您的特定应用程序的大局。

以下是一些不变量和合同设计的链接： [http://svengrand.blogspot.com/2008/11/preconditions-postconditions-invariants.html](http://svengrand.blogspot.com/2008/11/preconditions-postconditions-invariants.html) [http://en.wikibooks.org/wiki/Computer_Programming/Design_by_Contract](http://en.wikibooks.org/wiki/Computer_Programming/Design_by_Contract)

# memory - 带有 ActiveRecord+MySQL 的 Padrino 应用程序在 nginx 和乘客上运行内存不足

> ID：11236666
> 
> 赞同：0
> 
> 时间：2012-06-28T00:41:29.220
> 
> 标签：memory, nginx, sinatra, padrino

杀死并重新启动nginx解决了这个问题。

我的问题是，我从哪里开始寻找？这种堆栈内存不足的常见原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:07:10.827

奇怪，也许有些地方有“循环”？

# c++ - C++：不能在赋值中将 * 转换为 (*)[]

> ID：11236668
> 
> 赞同：-1
> 
> 时间：2012-06-28T00:41:32.773
> 
> 标签：c++, templates

我正在研究一个代表托管数组的模板类。

```
E (*data)[]; 
```

数据是我的数组。

```
data = new E[size]; 
```

而这，它不喜欢。它把我扔了；

> 无法在分配中将 Component* 转换为 Component (*)[] 给出了什么？

即使我没有将指针类型传递给我的模板类型，任何人也可以解释为什么 E 用 * 表示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:44:10.620

```
E (*data)[]; 
```

`data`是指向 E 数组的指针，而不是指向 E 的指针（不要与指向 E 的指针数组混淆）。有一个非常明显的区别。

编辑：为了帮助您理解...

`new`正在向您返回一个指向 的指针`E`，但您已将其声明`data`为*指向E**数组***的指针。数组是 C 中的一种类型！它不仅仅是变相的指针。在某些情况下，数组可能会*衰减*为指针，但不会双向。

编辑2：

根据您的评论：

> 我的印象是我正在创建一个新的 E 指针数组？

访问[http://cdecl.org/](http://cdecl.org/)

首先，输入：

```
int (*data)[]; 
```

阅读它所说的。现在输入：

```
int *data[]; 
```

再次阅读并注意它不是在说同样的事情。一个是指向 int 数组的指针，一个是指向 int 的指针数组。巨大差距。

如果要动态分配指针数组，`data`则应声明为：

```
E **data; 
```

进而

```
data = new E*[size]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:43:55.843

只需让您的`data`会员成为`E*`. 您仍然可以索引数组样式的 ala `data[i]`（该符号与指针和整数值一起使用时，基本上意味着添加指针和 i 乘以所指向对象的大小）。

编辑：

```
template <typename E>
class X
{
    X(int initial_size) : data_(new E[initial_size]), size_(initial_size) { }
    X(const X& rhs) : data_(new E[rhs.size_]), size_(rhs.size_) { std::copy(...); }
    ~X() { delete[] data_; }
    void capacity(int new_size)
    {
        E* p = new E[new_size];
        std::copy(p, p + new_size, data_);
        delete[] data_;
        data_ = p;
        size_ = size;
    }
    ...
  private:
    E* data_;
    int size_;
}; 
```

# javascript - 如果页面上没有标签，如何获取插入符号位置

> ID：11236674
> 
> 赞同：-2
> 
> 时间：2012-06-28T00:42:15.037
> 
> 标签：javascript, html, internet-explorer, meta-tags, getselection

我有两个测试页面：页面 M 和页面 NM。它们都是相同的，因为它们有一个输入文本框。唯一的区别是 M 有一个元标记，而 NM 没有。

元标记看起来像这样

```
<meta http-equiv="X-UA-Compatible" content="IE=10"/> 
```

当然，IE=9 或 IE=8 也可以。编辑控件可以是文本框、密码、textarea、contenteditable div，你有什么。我总是可以使用任何一个找到当前插入符号的位置

```
document.getElementById('ControlName').selectionStart.toString() 
```

或者

```
window.getSelection().focusOffset.toString() 
```

这在 NM 页面上不起作用。当页面上没有元标记时，如何获取插入符号位置？感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:44:15.927

我相信这种特定方法是一种非标准的、仅限 IE 的获取插入符号位置的机制。请参阅这个[gist](https://gist.github.com/455732)，一个不错的 jQuery 插件，它将完成您在 IE 8、9 或 10 以及任何其他现代浏览器中尝试执行的操作。

# data-structures - 为什么 CouchDB 中的 MapReduce 被称为“增量”？

> ID：11236676
> 
> 赞同：8
> 
> 时间：2012-06-28T00:42:37.877
> 
> 标签：data-structures, couchdb, mapreduce, terminology

我正在阅读 O'Reilly CouchDB 的书。我对第 64 页上的 reduce/re-reduce/incremental-MapReduce 部分感到困惑。O'Reilly 书中的句子中留下了太多的修辞

> 如果您有兴趣推动 CouchDB 的增量减少功能的发展，请查看 Google 关于 Sawzall 的论文，...

如果我正确理解*“增量”*这个词，它指的是 B 树数据结构中的某种加法运算。我还不明白为什么它比典型的 map-reduce 有点特别，可能还不理解它。在 CouchDB 中，它提到 map 函数没有副作用 - reduce 也适用吗？

为什么 CouchDB 中的 MapReduce 被称为“增量”？

### 帮助问题

1.  用 Sawzall 解释关于增量 MapReduce 的引用。
2.  为什么同一事物有两个术语，即减少？减少和重新减少？

### 参考

1.  一篇关于[Sawzall](http://research.google.com/archive/sawzall.html)的 Google 论文。
2.  [CouchDB wiki 中的CouchDB 视图介绍](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views)和许多模糊的博客参考。
3.  [CouchDB O'Reilly 书](http://guide.couchdb.org/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T01:29:42.240

[你链接的这个](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views)页面解释了它。

可以通过仅重新索引**自上次索引更新以来已更改的文档来更新视图（这是 CouchDB 中 map reduce 的全部要点）。**那是增量部分。

这可以通过要求 reduce 函数具有引用透明性来实现，这意味着它总是为给定的输入返回相同的输出。

对于数组值输入，reduce 函数还必须是可交换和关联的，这意味着如果您在同一个 reducer 的输出上运行 reducer，您将收到相同的结果。在该 wiki 页面中，它表示为：

```
f(Key, Values) == f(Key, [ f(Key, Values) ] ) 
```

Rereduce 是您从多个 reducer 调用中获取输出并再次通过 reducer 运行的地方。这有时是必需的，因为 CouchDB 通过 reducer 批量发送内容，因此有时并非所有需要减少的键都会一次性发送。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T05:16:19.170

只是稍微补充一下 user1087981 所说的，reduce 功能是增量的，因为 reduce 过程是由 CouchDB 执行的。

CouchDB 使用它从视图函数创建的 B-Tree，本质上它以值块的形式执行归约计算。[这是O'Reilly 指南](https://guide.couchdb.org/)中一个非常简单的 B-Tree 模型，显示了[您引用的部分中示例](https://guide.couchdb.org/draft/views.html#reduce)的叶节点。

[![减少 B 树](../Images/70511548dfe409df3da63a66dc3fc547.png)](https://i.stack.imgur.com/PHdrb.png)

那么，为什么这是增量的？好吧，最终的reduce只在查询时执行，所有*reduce*计算都存储在B-Tree视图索引中。因此，假设您向数据库添加了一个新值，该值是另一个`"fr"`值。上述第 1、2、4 个节点的计算无需重做。添加新`"fr"`值，并且仅为该第 3 个叶节点重新计算 reduce 函数。

然后在查询时`rereduce=true`对索引值执行最终 ( ) 计算，并返回最终值。您可以看到，reduce 的这种增量性质允许重新计算所花费的时间仅与添加的新值相关，而不是与现有数据集的大小相关。

没有副作用是这个过程的另一个重要部分。例如，如果您的 reduce 函数在遍历所有值时依赖于维护的其他状态，那么这可能适用于第一次运行，但是当添加一个新值并进行增量 reduce 计算时，它会'没有相同的状态可用 - 因此它无法产生正确的结果。这就是为什么 reduce 函数需要无副作用的原因，或者正如 user1087981 所说的那样*“引用透明”*

# android - 具有自定义 toString() 的对象的 TextWatcher 过滤器

> ID：11236677
> 
> 赞同：0
> 
> 时间：2012-06-28T00:42:37.983
> 
> 标签：android, textwatcher

我正在尝试从 ListActivity 过滤自定义 ListView。问题是，当过滤器实际工作时，ListView 没有正确显示。

例如，如果我有 3 个项目，每个项目分别以 a、b、c、da、db 开头，输入 e 将显示 ListView 为空。但是，当我输入b时，它会显示a，当我输入c时，它会显示a。当我输入d时，它会显示a，b。我不完全确定我做错了什么，或者我缺少什么来解决这个问题。似乎该位置没有被传递给过滤器，但我将如何去做呢？

下面是我的 ArrayAdapter：

```
private class SiteAdapter extends ArrayAdapter<Site> {
    private ArrayList<Site> sites;

    public SiteAdapter(Context context, int textViewResourceId, ArrayList<Site> sites) {
        super(context, textViewResourceId, sites);
        this.sites = sites;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.row, null);
        }
        Site s = this.sites.get(position);
        if (s != null) {
            TextView tt = (TextView) v.findViewById(R.id.toptext);
            TextView bt = (TextView) v.findViewById(R.id.bottomtext);
            TextView rt = (TextView) v.findViewById(R.id.statustext);
            if (tt != null) {
                tt.setText("sup2");
            }
            if (bt != null) {
                bt.setText("sup");
            }
            if (rt != null) {
                rt.setText("sup");
            }
        }
        v.setOnClickListener(new OnItemClickListener(position));
        return v;
    }

    private class OnItemClickListener implements OnClickListener{           
        private int mPosition;
        OnItemClickListener(int position){
                mPosition = position;
        }
        @Override
        public void onClick(View arg0) {
            //Log.v("MainActivity", sites.get(mPosition).getURL());
            Intent intent = new Intent(getBaseContext(), Wee.class);
            startActivityForResult(intent,1);
        }               
    }
}

private TextWatcher filterTextWatcher = new TextWatcher() {
    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        site_adapter.getFilter().filter(s);
    }
};

@Override
protected void onDestroy() {
    super.onDestroy();
    filterText.removeTextChangedListener(filterTextWatcher);
} 
```

我的对象等级有：

```
@Override
public String toString() {
    return new StringBuilder()
    .append(this.SEARCHABLE).toString();
} 
```

我把它归结为正确过滤，但现在过滤器在删除或清空文本框时没有将 Listview 返回到其原始状态。我从[ListView 中的 Custom Filtering ArrayAdapter](https://stackoverflow.com/questions/6492214/custom-filtering-arrayadapter-in-listview)获得了示例：

```
private class SiteFilter extends Filter {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();
            String prefix = constraint.toString().toLowerCase();

            if (prefix == null || prefix.length() == 0) {
                ArrayList<Site> list = new ArrayList<Site>(sites);
                results.values = list;
                results.count = list.size();
            } else {
                final ArrayList<Site> list = new ArrayList<Site>(sites);
                final ArrayList<Site> nlist = new ArrayList<Site>();
                int count = list.size();

                for (int i = 0; i < count; i++) {
                    final Site pkmn = list.get(i);
                    final String value = pkmn.getFILTERABLETEXT().toLowerCase();

                    if (value.startsWith(prefix)) {
                        nlist.add(pkmn);
                    }
                }
                results.values = nlist;
                results.count = nlist.size();
            }
            return results;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            filtered_sites = (ArrayList<Site>) results.values;

            clear();
            int count = filtered_sites.size();
            for (int i = 0; i < count; i++) {
                Site pkmn = (Site) filtered_sites.get(i);
                add(pkmn);
            }
        }
    } 
```

钱德拉的建议：

```
@SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            filtered_sites = (ArrayList<Site>) results.values;
            site_adapter.notifyDataSetChanged();
            clear();
            int count = filtered_sites.size();
            for (int i = 0; i < count; i++) {
                Site pkmn = (Site) filtered_sites.get(i);
                add(pkmn);
                Log.d("OMGOMGOMG",pkmn.getURL());
            }
            site_adapter.notifyDataSetInvalidated();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:14:30.970

我认为它没有通知数据的变化。添加`notifyDataSetChanged`方法`onTextChanged`

```
public void onTextChanged(CharSequence s, int start, int before, int count) {
    site_adapter.getFilter().filter(s);
    site_adapter.notifyDataSetChanged(); 
} 
```

# ruby-on-rails - 让协会和自身都可以使用资源的正确方法

> ID：11236680
> 
> 赞同：0
> 
> 时间：2012-06-28T00:43:15.120
> 
> 标签：ruby-on-rails

首先，我为这个糟糕的标题道歉——我正在想一个更好的方法来用几句话来解释它，但想不出一个。

基本上，作为一个例子（注意模型名称只是例子；我知道与许多项目相关联的任务的实际概念并没有太大意义）：

*   项目模型
*   任务模型

*   每个任务可以分配给多个项目

我希望能够在以下位置查看项目的任务：/projects/1/tasks

或查看所有项目中的所有任务：/tasks

但是为此拥有两个控制器似乎不是很干燥，而且看起来不像 Rails 方式。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:16:51.177

您正在寻找的本质上是通往相同资源的两条路线。

```
resources :tasks
resources :projects
match projects/:id/tasks => 'tasks#index' 
```

在您的 TasksController#index 中，检查 params[:id]

```
def index
  if params[:id]
      @tasks = Project.find(params[:id]).tasks
  else
      @tasks = Tasks.all
  end
  respond_with(@tasks)
end 
```

# php - PHP：有什么方法可以保护会话变量/验证码？

> ID：11236683
> 
> 赞同：0
> 
> 时间：2012-06-28T00:43:38.787
> 
> 标签：php, security, session, post, captcha

我做了一些图像验证。用户必须从动态生成的图像中输入代码。

此代码正在主 php 文件中使用：

```
@session_start();
if (isset($_POST['session_pw'])&&$_SESSION['result']==$_POST['security_im']) {
    $_SESSION['pw']=$_POST['session_pw'];
    $_SESSION['ip'] = $_SERVER['REMOTE_ADDR'];
}
if ($_SESSION['pw']=='mypassword'&&$_SESSION['ip'] == $_SERVER['REMOTE_ADDR']){

        // OK we are in.
    // Otherwise display a login form:
}else echo <<<EOD
    <form method="POST">
    <font color="blue"> Authorization is required:</font><br>
    <input type="text" name="security_im" style="text-align:right;padding-right:1px;background-repeat:no-repeat;background-image:url(../imagecheck.php)"><br>
    <input type="password" name="session_pw" style="text-align:right;padding-right:1px"><br>
    <input type="submit" style="margin:0px">
    </form>
EOD; 
```

请注意：

```
background-image:url(../imagecheck.php) 
```

这就是我如何称呼生成的图像。这就是它的内容：

```
<?php
session_start();
create_image();
exit();

function create_image() {
    $md5 = "";
    while (strlen($md5) == 0) {
        $md5 = md5(mt_rand());
        $md5 = preg_replace('/[^0-9]/', '', $md5);
    }
    $pass = substr($md5, 10, 5);
    $_SESSION['result'] = $pass;
    $width = 60;
    $height = 20;
    $image = ImageCreate($width, $height);

    //We are making three colors, white, black and gray
    $clr[1] = ImageColorAllocate($image, 204, 0, 204);
    $clr[2] = ImageColorAllocate($image, 0, 204, 204);
    $clr[3] = ImageColorAllocate($image, 204, 204, 0);

    $R = rand(1, 3);
    $black = ImageColorAllocate($image, 255, 255, 255);
    $grey = ImageColorAllocate($image, 204, 204, 204);

    //Make the background black
    ImageFill($image, 0, 0, $black);

    //Add randomly generated string in white to the image
    ImageString($image, 5, 7, 2, $pass, $clr[$R]);

    //Throw in some lines to make it a little bit harder for any bots to break
    imageline($image, 0, 0, $width - 2, $height - 2, $grey);
    imageline($image, 0, $height - 2, $width - 2, 0, $grey);
    ImageRectangle($image, 0, 0, $width - 1, $height - 1, $grey);

    //Tell the browser what kind of file is come in
    header("Content-Type: image/jpeg");
    //Output the newly created image in jpeg format
    ImageJpeg($image, null, 80);
    //Free up resources
    ImageDestroy($image);
}
?> 
```

笔记：

```
$_SESSION['result'] = $pass; 
```

这就是我在会话中存储密钥的方式。

现在，问题是，图像可能会被阻止，并且会话密钥不会从上次存储的结果中改变。这意味着巨大的威胁。我想知道是否有任何保护或解决方法？

请仅在您了解问题和安全性的情况下回答:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:54:51.110

您应该更关心缓存而不是阻塞的请求。`Cache-Control`在您包含一些标题等之前，背景图像可能不会被刷新。

更重要的是防止重播。为此，您应该：

*   时间戳值。并使验证码验证拒绝接受旧值。

*   一两次成功验证后清除验证码会话状态。

背景图像未加载（“阻止”）只是意味着您在会话存储中将没有有效的令牌开始。这不是问题，除非您的验证逻辑设计不当。

最后，验证码的有效性不会随着图像中的随机线条而增加。它与您的表单结构一样有效。一旦蜘蛛适应了您的自定义变体，就很容易规避。虚假的安全在于它的默默无闻。虽然不是很好的学习体验，但建议使用现成的验证码脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:56:33.007

除了存储结果之外，为什么不存储时间戳。这样，您可以在十分钟内使结果过期。

还要在验证表单提交的部分中添加一些代码，以清除该会话变量，无论它是否成功。这样，如果他们想再次提交，他们将需要输入新的结果。

# php - 推进 1.6 格式化程序

> ID：11236685
> 
> 赞同：0
> 
> 时间：2012-06-28T00:43:58.540
> 
> 标签：php, symfony-1.4, propel

有什么方法可以在模型上设置格式化程序，将模型中所有数字字段的负数转换为正数？我开始尝试制作一个推进格式化程序，但我不确定什么代码应该放在 format 和 formatOne 中。我有以下代码。

```
class NegativeFormatter extends PropelFormatter
{
  public function format(PropelPDO $stmt)
  {
    parent::format($stmt);
  }

  public function formatOne(PropelPDO $stmt)
  {
    parent::formatOne($stmt);
  }

  public function isObjectFormatter()
  {
    return true;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:11:51.103

使用[绝对值](http://php.net/abs)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:59:28.370

在进行计算时，我最终只是手动进行。

# https - OpenLayers 地图控件无法通过 HTTPS 显示

> ID：11236691
> 
> 赞同：0
> 
> 时间：2012-06-28T00:45:05.267
> 
> 标签：https, openlayers

我有一个在 Django 页面上运行的 OpenLayers 地图应用程序。它使用控制面板来允许在地图上绘图。我们最近将网站切换到 HTTPS，现在虽然地图加载，但控件没有显示，也没有 Javascript 错误。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T01:01:09.477

事实证明这是我的配置有问题。为 CSS 文件提供服务的 Apache 服务器配置不正确，因此在没有样式的情况下，控件根本无法显示。

# c - 释放非堆内存

> ID：11236692
> 
> 赞同：3
> 
> 时间：2012-06-28T00:45:05.457
> 
> 标签：c, memory-leaks, linux-kernel, structure, klocwork

```
static struct ipv6_devconf ipv6_devconf_dflt __read_mostly = {
    .forwarding     = 0,
    .hop_limit      = IPV6_DEFAULT_HOPLIMIT,
    .mtu6           = IPV6_MIN_MTU,
};

static int __net_init addrconf_init_net(struct net *net)
{
    struct ipv6_devconf *dflt;
    dflt = &ipv6_devconf_dflt;
    kfree(dflt);
} 
```

`ipv6_devconf_dflt`是一个静态结构变量。的地址`ipv6_devconf_dflt`分配给局部变量。然后使用`kfree()`.

是否允许释放非堆内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T00:50:06.233

不——在堆外释放内存是没有意义的，因为它`kfree()`只能在`kmalloc()`ed 块的上下文中释放内存！

时间线：

*   [2008 年 1 月](https://github.com/torvalds/linux/commit/e0da5a480cafc7ca228d6b5a05dbd77344a6bd29#L1R4177)，命名空间的 IPv6 devconfs 应运而生。
*   [2008 年 8 月在 linux-netdev 上注意到](http://amailbox.org/mailarchive/linux-netdev/2008/6/18/2164014/thread)，没有大张旗鼓。
*   [2010 年在 LKML 上再次指出，](http://readlist.com/lists/vger.kernel.org/linux-kernel/167/837006.html)原作者回复了补丁请求，但从未实现任何补丁。

# iphone - 用新应用更新现有应用是否安全？

> ID：11236703
> 
> 赞同：0
> 
> 时间：2012-06-28T00:47:01.550
> 
> 标签：iphone

我们有一个现有的游戏应用程序现在已经失效，只是坐在那里无所事事。我们正在考虑是否可以将我们发布的新游戏应用程序作为旧游戏应用程序的更新发布。旧的与这个新的完全没有关系。

我个人反对这样做，但是你们中的任何人是否认为发布新游戏应用程序作为旧游戏应用程序的更新可能会导致任何潜在问题？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:51:56.577

我将把道德或商业观点（以及应用商店指南问题）放在一边，只谈技术。

处理应用程序更新的胶水确实不多。您需要做的就是`com.mydomain.myapp`为新版本使用相同的包标识符，并使用比上一个版本更高的版本号，然后上传到门户网站上的相同“应用程序”，它应该可以正常工作。完全不同的新版本应该只是替换旧版本。

它可能不起作用的一种情况是，如果您有很多文档或本地数据库，或存储在手机上的设置，如果新应用程序使用相同的密钥或文件名，则必须考虑其中的一些数据。但如果它是完全不同的应用程序，那可能没什么大不了的。

iPhone 应用商店更新几乎没有什么魔力。一个打包的二进制文件只是替换旧的。更新可能是一个小错误修复，或者是执行类似功能的完整代码库重写，或者是一个全新的应用程序。没有技术限制。

甚至名称、关键字、描述、图标等应用程序元数据都可以随着更新而更改。不过，对于 Apple 来说，将一个应用程序完全更改为另一个应用程序是否很酷，我无法猜测。

# assembly - 如何使用 Visual Studios 2005 Standard 编译、构建和调试 MASM

> ID：11236704
> 
> 赞同：0
> 
> 时间：2012-06-28T00:47:13.190
> 
> 标签：assembly, windows-xp, x86, masm

我正在尝试使用 Visual Studio 2005 Standard 编译、构建和调试 16 位汇编程序，但不知道如何执行此操作。我正在运行 MASM 6.14.8444 版本，我发现了一些有用的链接，这些链接至少对我不起作用（见下文）。我无权访问 Visual Studio 2008/2010 Express Edition。我正在尝试在 VS2005 Standard 中编译完整的汇编程序，而不是使用内联汇编。

这是我发现的一些链接，我已经尝试过，但出现了我无法解决的编译错误。

[http://kipirvine.com/asm/4th/ide/vsnet/index.htm#16-bit](http://kipirvine.com/asm/4th/ide/vsnet/index.htm#16-bit) http://stackoverflow.com/questions/4548763/compiling-assembly-in-windows [http://social.msdn。 microsoft.com/Forums/en/vcgeneral/thread/3e24f203-c516-41e2-a7bf-325452157336](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/3e24f203-c516-41e2-a7bf-325452157336)

提前致谢

胜利者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:20:24.907

为什么不直接下载[MASM32 SDK](http://masm32.com/)，它包含组装和链接 16 位和 32 位程序所需的一切。此外，它还有带有源代码的示例程序、大量带有源代码的宏、一个带有源代码的优秀库等......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:04:46.610

最后一个支持 16 位的 Visual C++ 是 Visual C++ 1.52。它也包含在 Visual C++ 2.0 中，但所有后续版本都只有 32 位。

然而，这不是唯一的可能性。已经提到了 MASM32，但我也推荐 Borland 的 TASM。如果不是为了汇编（它的语法与 MASM 有些不同），那么至少是为了调试——Turbo Debugger 是最好的 DOS 调试器之一。

# javascript - 如果地图超出范围，如何访问诺基亚地图 API 中的现有地图？

> ID：11236706
> 
> 赞同：2
> 
> 时间：2012-06-28T00:47:27.863
> 
> 标签：javascript, here-api

我有一个诺基亚地图实例，我必须在网络应用程序周围的几个不同地方使用它。我认为使用单个地图并在需要时在页面上移动它是有意义的，因此我不必每次都创建一个新实例。

该对象通过以下方式实例化：

```
var map = new nokia.maps.map.Display(mapContainer, [options]) 
```

现在我有一个地图对象，但由于我正在使用的（自定义）框架，我无法从函数中获取该对象，因为它超出了范围。有没有办法访问该对象？

我尝试像这样访问它：

```
var map = nokia.maps.map.Display(mapContainer); 
```

但这似乎并没有产生结果。

我还尝试在同一个容器中创建一个新地图（认为它可能会覆盖或做一些聪明的事情），但它只是创建了第二个地图，这没有帮助。我还尝试将地图设为 jQuery 变量（$.map = new nokia.maps.map.Display(mapContainer [options])，但诺基亚的地图 API 根本不喜欢这样。

我正在浏览文档，但似乎找不到任何东西。除非我能找到一种方法来存储对象并返回它，否则每次用户执行某些操作时，我都必须实例化一个新地图，这不太理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-15T09:19:16.170

产品不再退出。感谢您与我们联系。请参阅[https://developer.here.com/](https://developer.here.com/)了解我们的新 API。

# php - 如何获取当月的时间戳，当月的第一天，零小时

> ID：11236708
> 
> 赞同：26
> 
> 时间：2012-06-28T00:47:50.557
> 
> 标签：php, date, timestamp, strtotime

我试图在 00:00:00 获取每月第一天的时间戳。

例如，2012 年 1 月 1 日 00:00:00 的时间戳

我正在这样做：

```
$test_month = time(); // Seconds
$test_month = date('M', $test_month); // This month
$test_month = strtotime($test_month); // Timestamp of this month
echo $test_month; 
```

这是返回当月当天的零小时，而不是月初。

有什么建议么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-28T00:55:01.983

试试这个：

```
echo date( 'F jS Y h:i:s A', strtotime( 'first day of ' . date( 'F Y'))); 
```

这将输出：

```
June 1st 2012 12:00:00 AM 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-28T00:54:01.703

试试这个

```
$time = strtotime(date('Y-m-01 00:00:00')); // == 1338534000 
```

翻译为：

```
$date = date('Y-m-d H:i:s', $time); // == 2012-06-01 00:00:00 
```

阅读有关[date()](http://php.net/date)和[time()](http://php.net/time)函数的 PHP 手册。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-27T05:39:46.873

```
echo date("Y-m-d 00:00:00", strtotime("first day of this month")); 
```

这输出：

```
2017-05-01 00:00:00 
```

# php - 重置按钮不适用于选择框

> ID：11236709
> 
> 赞同：0
> 
> 时间：2012-06-28T00:47:55.893
> 
> 标签：php, html, reset

我有这样的选择框

```
 <select class="_55" name="call_info[main_service_id]" id="main_service">
    <option value="">Please Select</option>
    <?php
      $main_service_object->get_mainservice_selected_option ( $main_service_id );
    ?>
   </select> 
```

但是当我点击重置按钮列表框没有重置

重置按钮代码：

```
<div class="actions-left">
<input type="reset">
</div> 
```

那么如何使用重置按钮重置选择框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:01:03.173

重置按钮确实即将淘汰，因为它很少有用并且经常令人困惑。

如果您的选择元素具有默认值，则重置按钮会将选择恢复为该默认值。要确认它正在工作，请选择其他内容并点击重置。

# node.js - 如何在 Node.js 中使 ZeroMQ 发布者冗余？

> ID：11236714
> 
> 赞同：1
> 
> 时间：2012-06-28T00:48:43.573
> 
> 标签：node.js, zeromq

是否有一种通用模式用于使 0mq pub/sub 中的发布者在节点中冗余？其动机是能够与可能会失败/定期重新启动的发布者一起运行多个进程。

我最初的想法是在主服务器中创建一个转发器并从工作发布者连接到它：

```
var cluster = require('cluster')
  , zmq = require('zmq')
  , endpointIn = 'ipc:///tmp/cluster_pub_sub'
  , endpointOut = 'tcp://127.0.0.1:7777';

if (cluster.isMaster) {
  for (var i = 0; i < 2; i++) cluster.fork();
  startPubSubForwarder();
} else {
  startPublisher();
}

function startPublisher() {
  var socket = zmq.socket('pub');
  socket.connect(endpointIn);
  setInterval(function () {
    socket.send('pid=' + process.pid);
  }, 1000);
}

function startPubSubForwarder() {
  var sIn = zmq.socket('sub')
    , sOut = zmq.socket('pub');

  // incoming
  sIn.subscribe('');
  sIn.bind(endpointIn, function (err) {
    if (err) throw err;
  });
  sIn.on('message', function (data) {
    sOut.send(data);
  });

  // outgoing
  sOut.bind(endpointOut, function (err) {
    if (err) throw err;
  });
} 
```

还有其他/更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:56:11.873

如果您关心的是消息的持久性，我认为您不太关心拥有多个发布者，而是更关心确保在您的发布者死亡时消息不会丢失。您可以立即重新启动发布者，然后从中断的地方继续。您还需要知道哪些消息已成功发送。

这需要的是 1) 持久存储和 2) 以及一种向发布者确认消息已在接收者端收到（并且可能处理已完成）的方法。此设置应该可以解决您的可靠性需求。

如果您还想实现高规模，那么您需要稍微扩充一下架构。对于发送者和接收者为 1:1 的发送/接收场景，它更直接，而当您需要执行 1:N 循环/负载分配场景时，这可能更复杂一些，这可能是您需要的规模。

我对完成横向扩展方案的投入是进行以下设置：

sender_process--(1:1)-->distributor--(1:N)-->receiver_process(es)

分发者确认收到来自发送者的消息，然后扇出到接收者进程。

您可能希望通过在每个进程前面放置一个队列来完成此操作。因此，您不要发送到流程。您发送到进程从中读取的队列。发件人将东西放在分发者队列中。分发者将东西放在接收者的队列中。在每个点上，每个进程都会尝试处理。如果它在最大重试次数之后失败，它将进入错误队列。

我们使用 rabbitmq / amqp 来完成这一切。我已经开始开源我们用来进行 1:1 和 1:N 发送的总线：[https](https://github.com/mateodelnorte/servicebus) ://github.com/mateodelnorte/servicebus 。在接下来的几天里，我将添加自述文件和更多测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T03:30:20.777

从您的示例代码中，我认为 XPUB/XSUB 0MQ 模式最适合您。这是实现相同“startPubSubForwarder()”块的一种更有效的方法，而且您的订阅者可以直接在发布者后端订阅某些模式。在这里，我留下了一个发布者/xpub-xsub（以代理方式）/订阅者示例的链接：[https](https://github.com/krakatoa/node_zmq_workshop/tree/master/03.3_news_proxy) ://github.com/krakatoa/node_zmq_workshop/tree/master/03.3_news_proxy 。它是 NodeJS 代码（它是我的，不介意询问细节！）。

# jquery - 如何搜索名称中带有点的类？

> ID：11236718
> 
> 赞同：0
> 
> 时间：2012-06-28T00:49:08.307
> 
> 标签：jquery, jquery-selectors

我有一个“4.0.3”类的元素，我该如何搜索它？

ff 12.x 和最新的 chrome 不返回任何内容

```
console.log($('.4\.0\.3').length);
console.log($(".4.0.3").length); 
```

另一方面`.hasClass()`，如果元素有一个包含的类，则正确返回`.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T00:50:55.107

用双反斜杠转义它

```
$('.4\\.0\\.3') 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

> 如果您希望使用任何元字符（例如 !"#$%&'()*+,./:;<=>?@[]^`{|}~ ）作为 a 的文字部分名称，您必须使用两个反斜杠转义字符：\\

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T00:51:05.333

正如 zerkms 建议的那样，你可以逃避它，但你需要双反斜杠：

```
$('.4\\.0\\.3') 
```

或者对于不那么 hacky 的解决方案，请改用属性选择器：

```
$('[class~="4.0.3"]') 
```

# iphone - 为什么我在这个简单的代码上出现 Bad Access 异常？

> ID：11236720
> 
> 赞同：0
> 
> 时间：2012-06-28T00:49:13.053
> 
> 标签：iphone, ios, xcode, ipad

我不明白为什么这段代码会抛出 Bad Access 异常：

```
- (void)viewDidLoad
{

TheUserEntity* userEntity = [TheUserEntity alloc];

TheUserModel* userModel = [TheUserModel alloc];

userEntity = [userModel Read:1];

    [super viewDidLoad];
} 
```

TheUserEntity 和 TheUserModel 是我自己的类，1 只有属性，其他只有 CRUD 方法

有什么帮助吗？我是iOS开发新手，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:53:04.497

你必须调用`init`你的对象：

```
TheUserEntity* userEntity = [[TheUserEntity alloc] init];
TheUserModel* userModel = [[TheUserModel alloc] init]; 
```

您的方法名称应以小写字母开头，这是惯例。

# objective-c - 使用动画顺时针旋转 NSButton

> ID：11236721
> 
> 赞同：2
> 
> 时间：2012-06-28T00:49:22.377
> 
> 标签：objective-c, macos, cocoa, nsbutton

我正在尝试顺时针旋转 NSButton 直到用户手动中断它。这是我用来完成此操作的代码。我知道它曾经在某个时候起作用。知道如何解决吗？提前致谢！

```
 CABasicAnimation *a = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    a.fromValue = [NSNumber numberWithFloat:0];
    a.toValue = [NSNumber numberWithFloat:-M_PI*2];
    [self.reloadButton.layer setAnchorPoint:CGPointMake(0.5, 0.5)];
    a.duration = 2.0; // seconds
    a.repeatCount = HUGE_VAL;
    [self.reloadButton.layer addAnimation:a forKey:nil]; 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T00:19:11.093

只要我设置，您的代码对我来说就可以正常工作`reloadButton.wantsLayer = YES;`

* * *

从[在您的应用程序中启用核心动画支持](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/SettingUpLayerObjects/SettingUpLayerObjects.html)

在 iOS 应用程序中，Core Animation 始终处于启用状态，并且每个视图都由一个层支持。在 OS X 中，应用程序必须通过执行以下操作显式启用 Core Animation 支持：

*   链接到 QuartzCore 框架。（iOS 应用只有在明确使用 Core Animation 接口时才必须链接到这个框架。）
*   为一个或多个 NSView 对象启用层支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T06:29:25.813

尝试这个

```
 CABasicAnimation *rotation;
    rotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotation.fromValue = [NSNumber numberWithFloat:0];
    rotation.toValue = [NSNumber numberWithFloat:(M_PI)];
    rotation.duration = 0.2; // Speed
    rotation.repeatCount = 1; // Repeat forever. Can be a finite number.
    [yourButton.layer addAnimation:rotation forKey:@"Spin"];
    [yourButton.layer setZPosition:100];
    yourButton.transform = CGAffineTransformMakeRotation(M_PI_2); 
```

您可以根据自己的方便更改/设置持续时间、repeatCount 和 toValue。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-28T00:54:34.293

**[编辑1]**

在看到这是针对 NS 与 UI 按钮之后，有几个选项：

1）为您的 OSX 版本使用 NSTimer 和正确的轮换例程（请参见下面的链接）

[http://digerati-illuminatus.blogspot.com/2009/09/how-do-you-rotate-nsbutton-nstextfield.html](http://digerati-illuminatus.blogspot.com/2009/09/how-do-you-rotate-nsbutton-nstextfield.html)

2) 如果您使用的是 OSX 10.5 或更高版本，则支持 CoreAnimation，并且实际上应该支持以下 NSButtons。

维基链接

[http://en.wikipedia.org/wiki/Core_Animation](http://en.wikipedia.org/wiki/Core_Animation)

**[ORIGINAL]** 试试这个代码：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:5000000];
CGAffineTransform rr=CGAffineTransformMakeRotation(5000000);
reloadButton.transform=CGAffineTransformConcat(reloadButton.transform, rr);
[UIView commitAnimations]; 
```

这是一个显示两种方法的 SO 问题的链接

[UIView 旋转](https://stackoverflow.com/questions/5349551/uiview-rotation)

# asp.net-mvc - 使用 ServiceStack.MVC 进行身份验证和授权

> ID：11236728
> 
> 赞同：2
> 
> 时间：2012-06-28T00:50:13.953
> 
> 标签：asp.net-mvc, authentication, authorization, servicestack

使用 ServiceStack.Mvc 时 AuthorizeAttribute 没用

AuthenticateAttribute 用于 DTO 对象。

没有带有 ServiceStack 的 AccountController 示例，Signout 在 SocialBootStrapApi 中不起作用。

使用 ServiceStack.Mvc 的基本 Login、Logout、Authorize with Roles 示例在哪里？（不是单页应用，经典的 Asp.Net Mvc）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T05:53:20.190

ServiceStack 不使用 ASP.NET 或 MVC 的 Authentication 或任何依赖它的东西，例如 MVC 的 AccountController，它使用自己的[Authentication Provider](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)。

AuthenticateAttribute 和任何其他 ServiceStack[请求或响应过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)实际上可以在 DTO 和服务上使用。

如果您从[ServiceStackController继承，那么您可以在](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs)[[ExecuteServiceStackFilters]](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ExecuteServiceStackFiltersAttribute.cs)中使用 ServiceStack 的属性过滤器来执行，例如

*   [认证]
*   [必需角色]
*   [必需权限]

# grails - 测试调用其他标签库的 Grails 标签库

> ID：11236729
> 
> 赞同：1
> 
> 时间：2012-06-28T00:50:20.530
> 
> 标签：grails, gsp, taglib

假设我有两个标记库，`Foo`它们针对我的应用程序的特定部分执行特定的操作，并且`Util`在整个应用程序中共享。我想做这样的事情：

```
class UtilTagLib {
    def utilTag = { attrs -> 
        ...
    }
}

class FooTagLib {
    def fooTag = {
        ...
        out << g.utilTag(att1: "att1", att2: "att2")
        ...
    }
} 
```

但是，当我这样做并尝试运行我的单元测试时`fooTag()`，我得到：

> groovy.lang.MissingMethodException：没有方法签名：org.codehaus.groovy.grails.web.pages.GroovyPage.utilTag() 适用于参数类型：(java.util.LinkedHashMap) 值：[[att1:att1,att2 :att2]]

我试着给`UtilTagLib`它自己的命名空间

```
static namespace = "util" 
```

并将呼叫更改为

```
out << util.utilTag(...) 
```

但这只是让我

> groovy.lang.MissingPropertyException：没有这样的属性：类的实用程序：org.example.FooTagLib

可能还值得注意：在日志中，我看到：

> 警告 - 缺少名为“groovyPagesUriService”的 Bean。

显然，`UtilTagLib`没有正确创建和注入。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T19:21:24.537

解决方法：添加调用

```
mockTagLib UtilTagLib 
```

到测试用例的`setUp()`（或）方法。`@Before`这是[GroovyPageUnitTestMixin](http://grails.org/doc/latest/api/grails/test/mixin/web/GroovyPageUnitTestMixin.html#mockTagLib%28java.lang.Class%29)上的一种方法，有点违反直觉，它实例化指定的标记库——真实的，而不是模拟的——并将其连接到 Grails 应用程序上下文中。它在内部用于设置实际的被测标签库（在本例中`FooTagLib`），但它也可用于设置其他合作者标签库。

请注意，这并不完美，因为它使其更像是集成测试而不是纯单元测试——理想情况下，我们*将*使用模拟`UtilTagLib`并仅测试交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:04:11.983

一种方法是重构该行：

```
out << g.utilTag(att1: "att1", att2: "att2") 
```

在它自己的方法中，说“renderUtilTag(...)”，然后在单元测试中模拟出来，例如：

```
FooTagLib.metaClass.renderUtilTag = { /* something */ } 
```

这样，您仅在单元​​测试中测试 FooTagLib 的功能，而不依赖于 UtilTagLib。

# jquery - jquery如果这个或这个不起作用

> ID：11236731
> 
> 赞同：-1
> 
> 时间：2012-06-28T00:50:53.993
> 
> 标签：jquery, facebook, google-chrome, google-chrome-extension

我尝试为 Google Chrome 做一个扩展，我使用 jQuery 用其他文本替换 Facebook 之类的按钮，但是当我说它`if(this ==='like' || 'like2' || 'like3') else if (this ==='unlike' || 'unlike2' || 'unlike3')`不起作用时。

我的代码：不：我想要这个用于多语言。

```
var like_message = "Sarp!";

$("body").mouseover(function(){
    convertLikes();
});
convertLikes();

function convertLikes(){
    var likes = document.getElementsByClassName('default_message');
    //var butt = like_buttons[0];
    for (var i = 0; i<likes.length; i++){
    like = likes[i];
    //like_message = like.getElementsByClassName('default_message')[0];
    like_message = like.innerHTML;
    if (like_message === 'Like' || like_message === 'E p&#235;lqej' || like_message === ' Be&#287;en'){
        like.innerHTML = like_message;
    }
    if (like_message === 'Unlike' || like_message ===  'Nuk e p&#235;lqej' || like_message === 'Be&#287;enmekten Vazge&#231;'){
        like.innerHTML = "Tam";
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:29:45.153

> 我尝试为 Google Chrome 做一个扩展

伙计，请先了解一些基本的 JavaScript 知识。（如果您正在尝试开发浏览器扩展，您实际上应该已经*拥有*它。）

> 但是当我说它`if(this ==='like' || 'like2' || 'like3') else if (this ==='unlike' || 'unlike2' || 'unlike3')`不起作用时。

您*无法*以这种方式检查变量是否具有三个值之一 - 因为 || 运算符的**优先级**高于 == 运算符。

因此，您的代码实际上所做的是首先对比较值进行逻辑 OR，*然后*进行比较——所以基本上，这与您`if( this === ('like' || 'like2' || 'like3') )`首先编写的代码相同。

由于`'like'`在 JS 中作为非空字符串 eval 为 true，因此表达式的值`('like' || 'like2' || 'like3')`始终是*-* `'like'`所以您只是在比较`this`，而不是与您的条件`'like'`中的以下值之一进行比较。`if`

`if(this === 'like' || this === 'like2' || this === 'like3')`将是做你真正*想要的**正确*方法。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:35:30.187

`like_message = "Sarp!"`您总是用 for 循环中的当前值覆盖。我修复了它并将其重命名为`default_like_message`.

```
var default_like_message = "Sarp!";

convertLikes();

function convertLikes(){
    var likes = document.getElementsByClassName('default_message');

    for (var i = 0; i<likes.length; i++){

        var like = likes[i];
        var like_message = like.innerHTML;

        if (like_message === 'Like' || like_message === 'E p&#235;lqej' || like_message === ' Be&#287;en'){
            like.innerHTML = default_like_message;
        } else if (like_message === 'Unlike' || like_message ===  'Nuk e p&#235;lqej' || like_message === 'Be&#287;enmekten Vazge&#231;'){
            like.innerHTML = "Tam";
        }

    }
} 
```

我将您的第二个`if`案例更改为您之前`else if`忘记输入。`var``like`

* * *

这里是相同的代码，但`jQuery`风格相同：

```
var default_like_message = "Sarp!";

convertLikes();

function convertLikes() {

    $('.default_message').each(function() {

        var like_message = $(this).text();

        if (like_message === 'Like' || like_message === 'E p&#235;lqej' || like_message === ' Be&#287;en'){
            $(this).text(default_like_message);
        } else if (like_message === 'Unlike' || like_message ===  'Nuk e p&#235;lqej' || like_message === 'Be&#287;enmekten Vazge&#231;'){
            $(this).text("Tam");
        }

    });

} 
```*

# html - css3 for this tooltip

> ID：11236734
> 
> 赞同：1
> 
> 时间：2012-06-28T00:51:14.830
> 
> 标签：html, css

[http://shuffler.fm/trending](http://shuffler.fm/trending) mouse over the star to add it as a favorite

I'm trying to figure it out, the most i gather is css3 animation. i looked at their minified css though and I can't figure it out

Maybe a jsfiddle with the most basic form of this animation would be sweet

```
fmtooltip
{-webkit-perspective:1000;
    -webkit-backface-visibility:hidden;
position:relative}
a.fmtooltip span,div.fmtooltip span
{-webkit-transform:translate3d(0, 0, 0);
    -webkit-perspective:1000;
    -webkit-backface-visibility:hidden;
    width:auto;
    min-width:110px;
    height:auto;
    line-height:22px;
    padding:.3em .5em;
    left:50%;
    margin-left:-59px;
    font-size:11px;
    font-weight:700;
    color:#393939;
    text-shadow:none;
    text-align:center;
    background:#ffe6b0;
    -webkit-border-radius:1px;
    border-radius:1px;
    position:absolute;
    pointer-events:none;
    bottom:34px;
    opacity:0;
    z-index:9991 !important;
    -webkit-box-shadow:0px 1px 1px rgba(0,0,0,0.2);
    -moz-box-shadow:0px 1px 1px rgba(0,0,0,0.2);
    box-shadow:0px 1px 1px rgba(0,0,0,0.2);
    -webkit-transition:all 0.2s ease-in-out;
    -moz-transition:all 0.2s ease-in-out;
    -ms-transition:all 0.2s ease-in-out;
    -o-transition:all 0.2s ease-in-out;
transition:all 0.2s ease-in-out}
a.fmtooltip span.lefted,div.fmtooltip span.lefted
{margin-left:-110px;
    padding:.3em 1em;
    bottom:30px;
text-align:left}
a.fmtooltip span.lefted:before,a.fmtooltip span.lefted:after,div.fmtooltip span.lefted:before,div.fmtooltip span.lefted:after
{left:20%}
a.fmtooltip span.favo,div.fmtooltip span.favo
{text-transform:uppercase;
    line-height:23px;
    padding:.3em .9em;
    margin-left:-62px;
    font-family:'brandon-grotesque', Arial, sans-serif;
    bottom:22px;
text-indent:0}
a.fmtooltip span.playertooltip,div.fmtooltip span.playertooltip
{text-transform:uppercase;
    line-height:23px;
    padding:.3em .9em;
    margin-left:10px;
    left:411px;
    bottom:-16px;
text-indent:0}
a.fmtooltip span.playertooltip:nth-child(1),div.fmtooltip span.playertooltip:nth-child(1)
{left:449px;
width:140px}
a.fmtooltip span.playertooltip:before,a.fmtooltip span.playertooltip:after,div.fmtooltip span.playertooltip:before,div.fmtooltip span.playertooltip:after
{content:'';
    position:absolute;
    top:-5px;
    left:54%;
    margin-left:-12px;
    width:0;
    height:0;
    border-top:none;
    border-left:5px solid transparent;
    border-right:5px solid transparent;
border-bottom:5px solid #ffedb0}
a.fmtooltip span.playertooltip:after,div.fmtooltip span.playertooltip:after
{display:none}
a.fmtooltip span:before,a.fmtooltip span:after,div.fmtooltip span:before,div.fmtooltip span:after
{content:'';
    position:absolute;
    bottom:-6px;
    left:54%;
    margin-left:-12px;
    width:0;
    height:0;
    border-left:5px solid transparent;
    border-right:5px solid transparent;
border-top:5px solid rgba(130,130,130,0.3)}
a.fmtooltip span:after,div.fmtooltip span:after
{bottom:-4px;
border-top:5px solid #ffedb0}
a:hover.fmtooltip span,.tooltipshow
{opacity:.9 !important;
bottom:44px !important}
.tooltipshow.playertooltip
{opacity:.9 !important;
bottom:-24px !important}
div:hover.fmtooltip span
{opacity:.9 !important;
bottom:-24px !important}
a:hover.fmtooltip span.favo
{bottom:32px !important}
a:hover.fmtooltip span.lefted
{bottom:52px  !important}
figure.box.large:nth-child(4n+4) a.blogsubscription.fmtooltip span,figure.box.medium:nth-child(4n+4) a.fmtooltip span,figure.box.small:nth-child(5n+5) a.fmtooltip span
{margin-left:-119px}
figure.box.large:nth-child(4n+4) a.blogsubscription.fmtooltip span:before,figure.box.large:nth-child(4n+4) a.blogsubscription.fmtooltip span:after,figure.box.medium:nth-child(4n+4) a.fmtooltip span:before,figure.box.medium:nth-child(4n+4) a.fmtooltip span:after,figure.box.small:nth-child(5n+5) a.fmtooltip span:before,figure.box.small:nth-child(5n+5) a.fmtooltip span:after
{left:98%}
figure.box.large a.blogsubscription.fmtooltip span
{margin-left:-57px}
figure.box.large:nth-child(4n+4) a.blogsubscription.fmtooltip span
{margin-left:-110px}
figure.box.large:nth-child(4n+4) a.blogsubscription.fmtooltip span:before,figure.box.large:nth-child(4n+4) a.blogsubscription.fmtooltip span:after
{left:98%}
#favorite.fmtooltip span
{left:0;
    left:50%;
    margin-bottom:-0.5em;
    margin-left:-58px;
width:100px} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:58:51.090

Try this - [http://jsfiddle.net/cTUgH/5/](http://jsfiddle.net/cTUgH/5/)

**HTML**

```
<a href="#"> 
    i 
    <span> Add To Favorites </span>
</a> 
```

**CSS**

```
a {
    display: block;
    margin: 100px;
    height: 30px;
    width: 30px;
    border: 2px solid #aaa;
    background: #eee;
    color: #888;
    line-height: 30px;
    border-radius: 20px;
    text-align: center;
    font: italic bold 16px/30px Georgia;
    text-decoration: none;
    position: relative;
    transition: all .5s ease-in-out;
}

span {
    display: block;
    height: 35px;
    width: 200px;
    border: 2px solid #aaa;
    background: #ffa;
    color: #888;
    position: absolute;
    top: -35px;
    left: -85px;
    border-radius: 20px;
    -webkit-transition: all .5s ease-in-out;
       -moz-transition: all .5s ease-in-out;
         -o-transition: all .5s ease-in-out;
            transition: all .5s ease-in-out;
    opacity: 0;
}

a:hover span {
    opacity: 1;
    top: -50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-08T06:47:07.447

Why use animation in tooltip make it simple just use simple css have a look here

```
.tooltip
{
 display: inline;
 position: relative;
}
.tooltip:hover:after
{
 background: #333;
 background: rgba(0,0,0,.8);
 border-radius: 5px;
 bottom: 26px;
 color: #fff;
 content: attr(title);
 left: 20%;
 padding: 5px 15px;
 position: absolute;
 z-index: 98;
 width: 220px;
 max-width: 220px;
} 
```

code credit to [Talkerscode](http://talkerscode.com) and full tutorial with demo here [css3 tooltip](http://talkerscode.com/webtricks/create-simple-tooltip-using-css3.php)

# iphone - 在文本点击上显示弹出框

> ID：11236737
> 
> 赞同：0
> 
> 时间：2012-06-28T00:51:47.427
> 
> 标签：iphone, objective-c, uipopover

我正在尝试创建一种 wiki 风格的应用程序，当您单击 UITextView 中显示的一段文本时，该应用程序会显示一个带有单词定义的弹出框。我一直在四处寻找，我最好的主意就是跟踪屏幕上所有可能出现弹出窗口的文本的位置，然后跟踪手指敲击发生的确切位置并在它们重合时显示弹出窗口。有没有更好的解决方案？

谢谢，皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:28:28.980

我想出的最简单的方法是逐行粘贴一个 UIButton，其文本与原始文本上的链接相同。这意味着我必须为每一行使用 UILabels，然后将它们添加到整个视图中。您可以获得与 UITextView 相同的效果，但您可以精确定位文本出现在一行中的 CGPoint。

有点hacky，但这是我能找到的最佳解决方案！

# c++ - 使用 std::remove_pointer 之类的操作在模板中构建派生类型

> ID：11236742
> 
> 赞同：2
> 
> 时间：2012-06-28T00:52:22.977
> 
> 标签：c++, templates, c++11, typetraits, typename

所以当我有这样的代码时：

```
shared_ptr<Foo> bar (my_normal_operator<Foo>(mumble)); 
```

即使该类型`Foo`来自左侧字段，它也可以作为返回类型仅通过给定内容的“加法”模式产生：

```
template <typename Target, typename Source>
shared_ptr<Target> my_normal_operator(Source src)
{
    /* ... whatever ... */
} 
```

但是，如果情况看起来像这样：

```
shared_ptr<Foo> bar (my_pointer_operator<Foo*>(mumble)); 
```

它需要某种方法将指针从类型中拉出。我四处挖掘并找到了[std::remove_pointer](http://en.cppreference.com/w/cpp/types/remove_pointer)，但是一个天真的应用程序给出了“类型/值不匹配”：

```
template <typename Target, typename Source>
shared_ptr< std::remove_pointer<Target>::type > my_pointer_operator(Source src)
{
    /* ... whatever ... */
} 
```

我实际上没想到它会起作用......但我把它放在这里是为了表达我正在寻找的意图！

*叹。每次我踏入任何带有模板和特征的新领域时，我都会觉得自己是那些[“我不知道自己在做什么”](http://knowyourmeme.com/memes/i-have-no-idea-what-im-doing)的模因动物之一。：-/*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:59:09.767

你需要`typename`：

```
template <typename Target, typename Source>
shared_ptr< typename std::remove_pointer<Target>::type >
    my_pointer_operator(Source src)
{
    /* ... whatever ... */
} 
```

因为类型`std::remove_pointer<Target>::type`取决于模板参数。

就个人而言，我会保留`Target`as`Foo`和`my_pointer_operator`use的定义`typename std::add_pointer<Target>::type`，因此调用者可以更直接地指定返回值。函数名称给出了实现上的差异。

# ruby-on-rails-3 - Rails 3 序列化属性验证错误：nil:NilClass 的未定义方法“read_attribute_for_validation”

> ID：11236746
> 
> 赞同：1
> 
> 时间：2012-06-28T00:53:03.587
> 
> 标签：ruby-on-rails-3, validation, serialization, ruby-on-rails-3.2

当尝试使用序列化属性（带有定义的类）时，Rails 很高兴，直到对象被保存。我的 ActiveRecord 模型和序列化对象（使用 ActiveModel::Validations）都有验证。作为我验证的一部分，父模型会检查以确保序列化对象是`valid?`. 我相信这是问题的核心，但我（a）不确定它*为什么*会导致问题或（b）解决问题的最佳方法。

我已将问题简化为一个最小的 rails 项目：

## 代码

创建一个新的 rails 项目（版本 3.2.6）并创建一个`A`模型，`rails g model a data:text`我定义：

**应用程序/模型/a.rb**

```
class A < ActiveRecord::Base
  attr_accessible :data
  serialize :data, B

  validate :custom

  def custom
    errors.add :data, "whoopsies!" unless data.valid?
  end
end 
```

**应用程序/模型/b.rb**

```
class B
  include ActiveModel::Validations
  attr_accessor :foo
  validates_presence_of :foo
end 
```

**测试/单元/a_test.rb**

```
require 'test_helper'

class ATest < ActiveSupport::TestCase
  test "weird failure" do
    a = A.new
    b = B.new
    b.foo = 'bar'
    a.data = b

    assert a.valid?
    assert b.valid?
    assert a.save

    assert a.valid? # -> throws exception
  end
end 
```

## 例外

运行此测试会引发以下异常：

```
NoMethodError: undefined method `read_attribute_for_validation' for nil:NilClass
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/errors.rb:254:in `block in add_on_blank'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/errors.rb:253:in `each'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/errors.rb:253:in `add_on_blank'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/validations/presence.rb:8:in `validate'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:310:in `_callback_before_7'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:407:in `_run__2107971919899649095__validate__2662006763039653414__callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_validate_callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/validations.rb:226:in `run_validations!'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/validations.rb:193:in `valid?'
    /Users/gbelote/tmp/serialize-fail/app/models/a.rb:8:in `custom'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:407:in `_run__3204678033069886840__validate__2662006763039653414__callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_validate_callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/validations.rb:226:in `run_validations!'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/validations/callbacks.rb:53:in `block in run_validations!'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:403:in `_run__3204678033069886840__validation__2662006763039653414__callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_validation_callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/validations/callbacks.rb:53:in `run_validations!'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activemodel-3.2.6/lib/active_model/validations.rb:193:in `valid?'
    /Users/gbelote/.rvm/gems/ruby-1.9.2-p290@serialize-fail/gems/activerecord-3.2.6/lib/active_record/validations.rb:69:in `valid?'
    /Users/gbelote/tmp/serialize-fail/test/unit/a_test.rb:14:in `block in <class:ATest>' 
```

## 另一个线索

运行时，`puts a.data.inspect`我在之前和之后得到不同的结果`a.save`：

```
before: #<B:0x0000010327e710 @foo="bar", @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000010321b7a0 @base=#<B:0x0000010327e710 ...>, @messages={}>>
after:  #<B:0x00000103197158 @foo="bar", @validation_context=nil, @errors=#<ActiveModel::Errors:0x000001031965f0 @base=nil, @messages={}>> 
```

所以inside`@base`是`@errors`nil，这就是nil:NilClass``nil`的异常`undefined method`read_attribute_for_validation' 中提到的。

* * *

有谁知道发生了什么？这是 Rails 的错误吗？难道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:09:54.047

升级到 ruby​​ 1.9.3-p194 解决了这个问题，我之前使用的是 1.9.2-p290。相关github问题：[https ://github.com/rails/rails/issues/6889](https://github.com/rails/rails/issues/6889)

# php - 自动更新一个 如果添加了新的数据库记录，则为 HTML 的一部分

> ID：11236751
> 
> 赞同：0
> 
> 时间：2012-06-28T00:53:43.683
> 
> 标签：php, javascript, html, ajax

我有一个简单的页面，其中包含数据库中的一些产品。我想要的是创建某种更新程序，如果用户添加产品，那么页面中的特定 div 将显示自动添加的最新产品。

我试图查看此链接，但它根本没有帮助我们有不同的问题。

无论如何继承我在 php.ini 中的功能。

```
function recentlyAddeditems() {
echo '<h3>Recently Added Products</h3> <hr/>';
echo '<div id="main_section_widget">';

$sql = mysql_query("SELECT * FROM products ORDER BY id DESC LIMIT 20") or die(mysql_error());

if ($sql) {
    while ($row = mysql_fetch_array($sql)) {
        $name = $row['name'];
        $id = $row['id'];
        $category = $row['category'];

        echo "<a href=\"product.php?pid=$id\">$name | $category<br/></a>
                <hr/>
                ";
    }
    echo '</div>';
    echo '
        <p><br/><a href="recentitems.php">More items...</a></p>

    ';
}
} 
```

和 html 页面

```
<div id="main_section_widget_cover" class="dates">
            <?php recentlyAddedItems(); ?>
        </div> 
```

有没有更简单的方法来做到这一点？我试图在 jquery 中阅读有关 ajax 的信息，但没有具体示例仍然感到困惑。

请帮助堆栈向导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:49:32.920

如果你想要一个 jquery 中的 ajax 示例，这里是一个非常简单的示例

```
<div id="main_section_widget_cover" class="dates"><div>

<script>
    $('#main_section_widget_cover').load('recentitems.php');
</script> 
```

在recentitems.php

```
<?php recentlyAddedItems(); ?> 
```

就是这样，这就是你需要做的所有事情来做一个基本的 ajax 调用

# php - 仅在带有 PDO 的服务器上出错：“只能通过引用传递变量”/“不能通过引用 pdo 传递参数 2”

> ID：11236753
> 
> 赞同：1
> 
> 时间：2012-06-28T00:53:55.097
> 
> 标签：php, pdo

尝试遍历服务器上的数组以将语句与 PDO 绑定时出现以下错误：

“只能通过引用传递变量”或“不能通过引用pdo传递参数2”

在我本地的 XAMPP 上运行良好。

代码：

```
$sql = rest of sql query etc.

$loop = 1;
foreach ($animal_array $ani)
{
    if ($loop == 1) {$sql .= " WHERE animal.id= :animal_id".$loop; }
    else            {$sql .= " OR animal.id= :animal_id".$loop;}
    $loop++;
}   

$stmt = $crud->db->prepare($sql);

$loop = 1;
foreach ($animal_array as $ani)
{   
    $stmt->bindParam(':animal_id'.$loop, $ani['animal_id'], PDO::PARAM_STR);
    $loop++;
} 
```

最后也尝试了这个，因为我在某处读到有时不喜欢连接：

```
foreach ($animal_array as $ani)
{   
    $ref = ":animal_id".$loop;
    $stmt->bindParam($ref, $ani['animal_id'], PDO::PARAM_STR);
    $loop++;
} 
```

.

**编辑：** 该数组包含其他值，有点像这样：

```
$animal_array['animal_id'];
$animal_array['name'];
$animal_array['colour'];
$animal_array['quantity']; etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:02:00.130

您应该使用[`bindValue`](http://www.php.net/manual/en/pdostatement.bindvalue.php)纯输入参数。该[`bindParam`](http://php.net/manual/en/pdostatement.bindparam.php)方法保留用于绑定变量，这些变量可用作输入*但也可*返回查询结果（输出）。

虽然这并不能解释你的问题。但是我们不知道您的数组包含什么。
这肯定不是密钥生成/连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:03:13.520

感觉就像你把事情复杂化了......为什么不直接将数组传递给[`execute`](http://php.net/manual/en/pdostatement.execute.php)：

```
$sql .= 'WHERE animal.id IN ('
     .     '?'.str_repeat(',?', count($animal_array['animal_id'])-1)
     .  ')';

$qry = $crud->db->prepare($sql);
$qry->execute($animal_array['animal_id']); 
```

# c++ - Miller-Rabin Primality 测试 FIPS 186-3 实施

> ID：11236757
> 
> 赞同：6
> 
> 时间：2012-06-28T00:54:09.873
> 
> 标签：c++, math, implementation, primality-test

我试图根据[FIPS 186-3](http://csrc.nist.gov/publications/fips/fips186-3/fips_186-3.pdf) C.3.1 中的描述实施 Miller-Rabin 素数测试。无论我做什么，我都无法让它发挥作用。说明非常具体，我认为我没有遗漏任何内容，但我得到`true`了非主要价值。

我做错什么了？

```
template <typename R, typename S, typename T>
T POW(R base, S exponent, const T mod){
    T result = 1;
    while (exponent){
        if (exponent & 1)
            result = (result * base) % mod;
        exponent >>= 1;
        base = (base * base) % mod;
    }
    return result;
}

// used uint64_t to prevent overflow, but only testing with small numbers for now
bool MillerRabin_FIPS186(uint64_t w, unsigned int iterations = 50){
    srand(time(0));
    unsigned int a = 0;
    uint64_t W = w - 1; // dont want to keep calculating w - 1
    uint64_t m = W;
    while (!(m & 1)){
        m >>= 1;
        a++;
    }

    // skipped getting wlen
    // when i had this function using my custom arbitrary precision integer class,
    // and could get len(w), getting it and using it in an actual RBG 
    // made no difference 

    for(unsigned int i = 0; i < iterations; i++){
        uint64_t b = (rand() % (W - 3)) + 2; // 2 <= b <= w - 2
        uint64_t z = POW(b, m, w);
        if ((z == 1) || (z == W))
            continue;
        else
            for(unsigned int j = 1; j < a; j++){
                z = POW(z, 2, w);
                if (z == W)
                    continue;
                if (z == 1)
                    return 0;// Composite
            }
    }
    return 1;// Probably Prime
} 
```

这：

```
std::cout << MillerRabin_FIPS186(33) << std::endl;
std::cout << MillerRabin_FIPS186(35) << std::endl;
std::cout << MillerRabin_FIPS186(37) << std::endl;
std::cout << MillerRabin_FIPS186(39) << std::endl;
std::cout << MillerRabin_FIPS186(45) << std::endl;
std::cout << MillerRabin_FIPS186(49) << std::endl; 
```

给我：

```
0
1
1
1
0
1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T01:10:55.140

您的实现与 Wikipedia 的唯一区别是您忘记了第二个返回复合语句。您应该在循环结束时返回 0。

编辑：正如丹尼尔所指出的，还有第二个区别。continue 是继续内循环，而不是像它应该的外循环。

```
for(unsigned int i = 0; i < iterations; i++){
    uint64_t b = (rand() % (W - 3)) + 2; // 2 <= b <= w - 2
    uint64_t z = POW(b, m, w);
    if ((z == 1) || (z == W))
        continue;
    else{
        int continueOuter = 0;
        for(unsigned int j = 1; j < a; j++){
            z = POW(z, 2, w);
            if (z == W)
                continueOuter = 1;
                break;
            if (z == 1)
                return 0;// Composite
        }
        if (continueOuter) {continue;}
    }
    return 0; //This is the line you're missing.
}
return 1;// Probably Prime 
```

此外，如果输入是偶数，它可能总是返回素数，因为 a 为 0。您应该在开始时添加一个额外的检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T01:31:02.917

在内循环中，

```
 for(unsigned int j = 1; j < a; j++){
            z = POW(z, 2, w);
            if (z == W)
                continue;
            if (z == 1)
                return 0;// Composite
        } 
```

你应该`break;`代替`continue;`when `z == W`。通过`continue`ing，在该循环的下一次迭代中，如果有一个，`z`将变为 1，并且候选者可能被错误地声明为复合。在这里，这发生在小于 100 的素数中的 17、41、73、89 和 97。

# android - 更改模拟时钟小部件 Android 的表盘图像

> ID：11236758
> 
> 赞同：0
> 
> 时间：2012-06-28T00:54:10.113
> 
> 标签：android, widget, clock

我正在为 android 创建一个主屏幕小部件（学习目的）并使用 AnalogClock 小部件，一旦用户单击屏幕上的按钮，我想更改该小部件的表盘和指针。

关于如何实现它的任何想法（这是一种改变时钟的主题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:02:27.460

不可以。您不能在 AppWidget 设计中使用自定义小部件。你可以参考我的博文来了解原因。 [http://yenliangl.blogspot.tw/2010/06/appwidget-design-can-i-use-my-own.html](http://yenliangl.blogspot.tw/2010/06/appwidget-design-can-i-use-my-own.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T21:40:02.900

你可以很容易地改变它们..

只需遵循此代码

```
<AnalogClock
    android:layout_width="250dp"
    android:layout_height="250dp"
    android:dial="@drawable/clockface"
    android:hand_minute="@drawable/minuteImage"
    android:hand_hour="@drawable/hourImage"/> 
```

# c++ - 将字符显示为整数而不显式转换

> ID：11236759
> 
> 赞同：4
> 
> 时间：2012-06-28T00:54:10.220
> 
> 标签：c++, casting, char, cout

每次我将 char 发送到 cout 对象时，它都会以 ASCII 字符显示，除非我将其转换为 int。

**问：**有没有办法在不显式转换的情况下显示 char 的数值？

我在某处读到，在您的代码中进行过多的强制转换可能会导致（您的程序）失去完整性。我猜测字符以 ASCII 显示是出于特定原因，但我不确定为什么。

我本质上是在创造一个游戏。我正在使用我计划显示到控制台的小数字（无符号字符）。`static_cast<int>`我可能是偏执狂，但每当我在代码中到处发送垃圾邮件时，我都会感到不安。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T01:07:04.297

不过，类型转换并没有错，特别是如果你习惯`static_cast`这样做的话。这就是你应该使用的。它允许编译器验证类型转换并确保它是安全的。

要更改`<<`运算符的行为，您必须覆盖值的默认`<<`运算符`char`，例如：

```
std::ostream& operator <<(std::ostream &os, char c)
{
    os << static_cast<int>(c);
    return os;
}

char c = ...;
std::cout << c; 
```

您可以创建一个以 a`char`作为输入的自定义类型，然后`<<`为该类型实现运算符，例如：

```
struct CharToInt
{
    int val;
    CharToInt(char c) : val(static_cast<int>(c)) {}
};

std::ostream& operator <<(std::ostream &os, const CharToInt &c)
{
    os << c.val;
    return os;
}

char c = ...;
std::cout << CharToInt(c); 
```

您可以创建一个执行类似操作的函数，然后您不必重写`<<`运算符，例如：

```
int CharToInt(char c)
{
    return c;
}

char c = ...;
std::cout << CharToInt(c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:01:46.720

随着事情的发展，这是对演员表的合理使用，但是是的，它可以改进。所涉及的“完整性丧失”只是如果其中一种数据类型从 char 更改为 double ，则强制转换将继续编译，但可能不会执行您想要的操作。您可以创建一个辅助函数：

```
inline int to_int(char c) { return static_cast<int>(c); } 
```

与 static_cast 不同，这只会在原始类型为 时启动`char`，因此如果您更改为类似的内容，`double`您会收到编译器警告 - 实际上是提醒您查看代码。

# android - ActionBarSherlock + ViewPager 缓存更多然后只是上一个/下一个视图

> ID：11236760
> 
> 赞同：6
> 
> 时间：2012-06-28T00:54:26.627
> 
> 标签：android, android-viewpager

在页面上： [每次选择一个选项卡时都会调用两个选项卡的 onCreate](https://stackoverflow.com/questions/9610495/oncreate-called-for-two-tabs-each-time-one-tab-is-selected)

解释了 ABS（实际上是 ViewPager）是如何工作的，以便 ViewPager 能够进行滚动。很明显，至少需要同时创建一个上一页/下一页。

是否有可能以某种方式“缓存”不仅仅是上一个/下一个视图（片段）：

1.  我在第 1 页，我有一个网络调用来获取一些数据（在 Activity 中执行此操作，而不是在 Fragment 中执行此操作 - 顺便说一句。可以吗？）

2.  切换到第 2 页，然后

3.  切换到第 3 页，然后

4.  切换到第 1 页 = 在这里重新创建了我的页面（虽然使用了一些缓存，但是，如果可能的话，我不需要任何娱乐）

因此，缓存所有页面会很好。如何在当前版本（4）中实现这一点，或者这将是一些新功能？

或者更好的问题，如何推迟/禁用视图的破坏？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-28T09:03:12.877

我想它可能对其他人有用，正如网站 [http://storkme.org/2011/12/tabs-done-right-viewpager-and-fragments/所指出的那样](http://storkme.org/2011/12/tabs-done-right-viewpager-and-fragments/)

已经有一种方法允许您预定义 ViewPager 将从重新创建中保存的“缓存”页面的数量。

```
mViewPager.setOffscreenPageLimit(3); 
```

感谢 Jake 提醒我进行不同的 G 搜索 :)

# android - 当我在 Eclipse for Android 4.1 中将“纯文本”字段拖到我的 WYSIWYG 编辑器时，出现 Java 崩溃 - 如何解决此问题？

> ID：11236765
> 
> 赞同：5
> 
> 时间：2012-06-28T00:54:58.117
> 
> 标签：android, eclipse, android-4.2-jelly-bean

我在安装了最新 Java 的 Mac 上。我安装了 Eclipse 4.2.0 并且刚刚下载了 Jelly Bean 4.1 (API 16) SDK。一切都是最新的。

我开始一个新项目并使用所有默认模板和值。我只是将我的应用称为“MyApp”之类的简单应用。

当我将按钮从工具箱拖到所见即所得编辑器时，按钮显示正常，我可以编辑 XML，一切都很好，等等。

但是当我拖动纯文本框时，我收到以下 Java 错误，并且我的整个 WYSIWYG 编辑器变为灰色。唯一能让它恢复原状的方法是从 XML 中删除代码并重新启动 Eclipse。如果我将代码粘贴回去，错误就会回来。

这是错误：

```
java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;
Exception details are logged in Window > Show View > Error Log 
```

这是导致它的代码：

```
<EditText
    android:id="@+id/editText1"
    android:inputType="text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/button1"
    android:layout_marginLeft="55dp"
    android:ems="10"
    android:hint="@string/hello_world" >

    <requestFocus />
</EditText> 
```

我知道今天果冻豆是全新的，但有人对这里可能发生的事情有任何想法吗？

其他人可以重现这个问题吗？

顺便说一句，我**不会**因为其他文本字段类型（如密码、人名等）而崩溃。只有纯文本。

**编辑：**

这是来自 Eclipse 的堆栈跟踪：

```
java.lang.NoSuchMethodError: java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;
at android.util.LruCache.trimToSize(LruCache.java:206)
at android.util.LruCache.evictAll(LruCache.java:306)
at android.widget.SpellChecker.resetSession(SpellChecker.java:141)
at android.widget.SpellChecker.setLocale(SpellChecker.java:147)
at android.widget.SpellChecker.<init>(SpellChecker.java:112)
at android.widget.Editor.updateSpellCheckSpans(Editor.java:461)
at android.widget.Editor.onAttachedToWindow(Editor.java:212)
at android.widget.TextView.onAttachedToWindow(TextView.java:4455)
at android.view.View.dispatchAttachedToWindow(View.java:11755)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:2424)
at android.view.AttachInfo_Accessor.setAttachInfo(AttachInfo_Accessor.java:37)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:329)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:331)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1640)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1391)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.onXmlModelChanged(GraphicalEditorPart.java:1353)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegateXmlModelChanged(LayoutEditorDelegate.java:395)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.xmlModelChanged(CommonXmlEditor.java:328)
at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor$XmlModelStateListener.modelChanged(AndroidXmlEditor.java:1610)
at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.wrapEditXmlModel(AndroidXmlEditor.java:1084)
at com.android.ide.eclipse.adt.internal.editors.AndroidXmlEditor.wrapUndoEditXmlModel(AndroidXmlEditor.java:1160)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.MoveGesture.drop(MoveGesture.java:393)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GestureManager$CanvasDropListener.drop(GestureManager.java:652)
at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:90)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4134)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)
at org.eclipse.swt.dnd.DropTarget.drop(DropTarget.java:726)
at org.eclipse.swt.dnd.DropTarget.performDragOperation(DropTarget.java:740)
at org.eclipse.swt.dnd.DropTarget.dropTargetProc(DropTarget.java:454)
at org.eclipse.swt.internal.cocoa.OS.objc_msgSend(Native Method)
at org.eclipse.swt.internal.cocoa.NSView.dragImage(NSView.java:150)
at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:397)
at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:218)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4134)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3980)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3619)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

这是我的会话信息：

```
eclipse.buildId=I20120608-1400
java.version=1.6.0_33
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -keyring /Users/ethanallen/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -keyring /Users/ethanallen/.eclipse_keyring -showlocation 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T18:46:12.700

我认为您可能需要将以下内容添加到您的 EditText 中（直到工具更新为最新的 API 以解决此错误）。

```
 android:inputType="textNoSuggestions" 
```

在这里查看我的回复：[https ://stackoverflow.com/a/11276651/1449799](https://stackoverflow.com/a/11276651/1449799)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T00:46:57.717

确认的错误：[http ://code.google.com/p/android/issues/detail?id=33789](http://code.google.com/p/android/issues/detail?id=33789)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T13:24:56.913

我测试了`textNoSuggestions`但它不起作用。

但是，当我设置：

```
android:inputType = "textPersonName" 
```

它运作良好！请尝试一下。

# python - 如何使用 Python 阻止特定的域/IP 地址？

> ID：11236767
> 
> 赞同：1
> 
> 时间：2012-06-28T00:55:13.373
> 
> 标签：python, dns, ip, block, ip-address

浏览了几个小时后，我完全不知道如何防止 Windows 7 访问特定地址。这基本上是一个黑名单程序。我是否需要使用用于数据包或其他东西的模块？

**编辑：**我的目标是在所有浏览器和任何其他访问互联网的应用程序中阻止某些域/ips。因此，最好使用系统范围的块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:23:31.740

[Windows 防火墙设置](http://www.speakcomputers.com/windows7/firewall.aspx)

它没有提到阻止该页面上的特定地址，但您可以创建自定义规则并在“范围”步骤下，将其应用于某些远程 IP 地址。这并不能真正解决您对特定域名的问题（因为它们可能有多个 IP），但这是一个开始。

如果您想将其与您的 python 程序联系起来，我相信相关命令与名为“netsh”的系统命令类似。特别是“netsh advfirewall firewall add”，我不知道它的论据。

# r - 如果状态空间大小超过 27，R 封装 VLMC 就会死掉

> ID：11236776
> 
> 赞同：1
> 
> 时间：2012-06-28T00:56:10.237
> 
> 标签：r, markov-chains

我正在使用 VLMC 来拟合一些马尔可夫模型，一旦字母大小达到 28，它就会消失。我认为这是由于默认情况下在字母表中使用了一个字母，但它与“code1char = FALSE”具有相同的行为。这对我来说是真实的数据以及这个假的例子。

```
library(VLMC)

# works fine
ins <- sample(seq(1,27,1),50000,replace=T)
vlmc(ins, dump = 1,threshold.gen = 2, debug = TRUE)

#core dump
ins <- sample(seq(1,28,1),50000,replace=T)
vlmc(ins, dump = 1,threshold.gen = 2, debug = TRUE) 
```

有任何想法吗？

段错误看起来像这样 BTW。在我看来，z 映射到 NA 后的字母表会导致数组绑定问题。

```
library(VLMC)

sc <- 10
amp <- 13
x <- round(amp*sin(seq(0,2*sc*pi,0.01)))
x <- amp + x + rpois(NROW(x),1)
length(table(x))
length(x)

vlmc(x, dump = 1,threshold.gen = 2, debug = TRUE)

vlmc: Alpha = 'abcdefghijklmnopqrstuvwxyzNANANANANA' ; |X| = 31
vlmc: ctl.dump =  4 11 
vlmc: n = |data| = 6284, cutoff{prune} = 21.8865, threshold{gen} = 2
vlmc: |alphabet| = 31, alphabet = abcdefghijklmnopqrstuvwxyzNA
generating... 
*** caught segfault ***
  address 0x0, cause 'memory not mapped'

Traceback:
  1: .C("vlmc_p", data = Data, n = n, threshold.gen = as.integer(threshold.gen),     cutoff.prune = as.double(cutoff.prune), alpha.len = as.integer(alpha.len),     alpha = as.character(Alpha), debug = as.integer(as.logical(debug)),     dump.flags = as.integer(c(dump, ctl.dump)), size = integer(4),     PACKAGE = "VLMC")
2: vlmc(x, dump = 1, threshold.gen = 2, debug = TRUE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:58:28.977

作为 VLMC 的维护者，我可以告诉你，VLMC 最长的 TODO 条目之一是提高当前*内置*的 26 限制，以便提高最大字母大小。

当然，这是一个错误，在较大字母表的情况下我不会给出错误消息，而是将内容传递给 C 并且不在那里检查。下一版本的 VLMC 将不再为此设置 seg.fault。

但是，我还不确定是否有时间允许使用更大的字母表……当然，我很乐意接受补丁……它是免费的开源软件。

最好的问候，Martin Maechler，苏黎世联邦理工学院

# django - 以编程方式为非管理员用户创建 django zinnia 博客条目

> ID：11236777
> 
> 赞同：1
> 
> 时间：2012-06-28T00:56:20.603
> 
> 标签：django, blogs

对于使用 django zinnia 博客的网站，除了使用管理员创建文章的作者之外，我还需要为非管理员用户提供有限的方式在他们自己的特定区域创建博客条目，但功能有限（例如预设类别，所有条目都以草稿开头等..）

现在我想知道我是否可以为它创建一个自己的小 ui 并在 django 视图中以编程方式创建条目（而不是在管理员中）......（在这些情况下，作者是非管理员用户）......

有什么理由说这是一个非常糟糕的主意，或者这真的会破坏 Zinnia 的东西吗？

提前致谢

干杯

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:12:40.843

几个月前我已经完成了其中的一部分。客户发现管理界面太复杂，想要更简单的东西。我创建了允许用户添加/编辑博客条目的视图/模板 - 没有重大问题。

也就是说，这仍然适用于管理员用户 - 在 zinnia 中可能存在权限问题或隐藏的假设，即用户是管理员。我怀疑克服它们会有很多麻烦 - 这是一个写得很好的应用程序，具有不错的界面。

如果你有兴趣，我可以给你看一些代码。

# javascript - 为什么 Object.create 使我的私有变量变为静态？

> ID：11236781
> 
> 赞同：4
> 
> 时间：2012-06-28T00:56:30.213
> 
> 标签：javascript, prototype, object-create

代码可在此处使用 - [http://jsfiddle.net/dsjbirch/zgweW/14/](http://jsfiddle.net/dsjbirch/zgweW/14/)

这基本上是对私有变量的 crockfords 解释的直接复制和粘贴。

我已经添加`Object.create()`了一些跟踪。

为什么第二个对象共享第一个对象的私有成员？如何避免这种情况但继续使用`Object.create()`

```
function Container(param) {

    function dec() {
        if (secret > 0) {
            secret -= 1;
            return true;
        } else {
            return false;
        }
    }

    this.member = param;
    var secret = 3;
    var that = this;

    this.service = function () {
        return dec() ? that.member : null;
    };
}

var first = new Container("private");

var second = Object.create(first);

document.write(first.service() + "<br/>");
document.write(first.service() + "<br/>");
document.write(first.service() + "<br/>");
document.write(first.service() + "<br/>");

document.write(second.service() + "<br/>");
document.write(second.service() + "<br/>");
document.write(second.service() + "<br/>");
document.write(second.service() + "<br/>"); 
```

[http://jsfiddle.net/dsjbirch/zgweW/14/](http://jsfiddle.net/dsjbirch/zgweW/14/)

我希望看到

```
private
private
private
null

private
private
private
null 
```

但实际上第二个对象的输出都是空的。

```
private
private
private
null

null
null
null
null 
```

我的结论`second`是因此共享`first`对象的`secret`成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:09:22.180

`Object.create()`并`new`用于不同的目的。

您可以从现有对象中使用`Object.create()`to 。 用于创建新对象的位置。`inherit`
`new``instance`

有关详细信息，请参阅以下问题和答案：

[了解 Object.create() 和 new SomeFunction() 之间的区别](https://stackoverflow.com/questions/4166616/understanding-the-difference-between-object-create-and-new-somefunction-in-j)

[使用“Object.create”而不是“new”](https://stackoverflow.com/questions/2709612/using-object-create-instead-of-new)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:12:53.127

`Object.create()`不会运行构造函数。但是在您的示例中，构造函数是您的私有魔法发生的地方。相反，`Object.create()`将简单地创建一个新对象，并将属性复制到它。

所以接下来发生的是构造函数创建了一个作用域，该作用域是共享的，因为在该作用域中创建的函数会被复制。当实例被克隆时，对该范围的访问也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-17T02:56:56.760

它们不是静态的，它们是“第一个”对象的实例成员。您从未为“第二个”对象创建任何新的实例成员，因为您从未调用过它的构造函数。相反，您将“second”的原型设置为“first”，这意味着每当在“second”上访问缺少的属性时，您都会从“first”获得值。

您可以在使用 Object.create 之后调用构造函数，例如

```
Container.call(second, param); 
```

# objective-c - iOS每毫秒计时

> ID：11236785
> 
> 赞同：1
> 
> 时间：2012-06-28T00:56:48.513
> 
> 标签：objective-c, ios, timer, clock

我正在尝试通过 iPhone 上的麦克风插孔进行连接。

我需要不断更新 15 位，我想知道最好的方法是否如下：

我有一个 16 毫秒的“帧”。前 1ms 是 START 位，为 500mV。接下来的 15ms 是 0V 或 250mV。然后它将与 START 位一起重复。

我可以在 iOS 上快速准确地扫描吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:07:10.680

一句话，[没有](http://atastypixel.com/blog/experiments-with-precise-timing-in-ios/)。你能得到的最好的结果是大约每 5 毫秒，但这还远远不够稳定，无法围绕它编写应用程序。安全边距是 30 毫秒左右（每“帧”一次，类似于 30 fps 的视频帧率）。

# visual-c++ - _imp 和 __imp 有什么区别？

> ID：11236789
> 
> 赞同：9
> 
> 时间：2012-06-28T00:58:04.503
> 
> 标签：visual-c++, dll, linker, mingw

当我在 Qt Creator 中工作时尝试使用 MinGW 链接到 MSVC 编译的库时遇到了一个有趣的错误。链接器抱怨缺少符号，就像`_imp_FunctionName`. 当我意识到这是由于缺少外部“C”并修复它时，我还使用 /FAcs 运行了 MSVC 编译器以查看符号是什么。事实证明，它是`__imp_FunctionName`（这也是我在 MSDN 和不少大师博客作者的网站上阅读的方式）。

我对 MinGW 链接器如何抱怨以 . 开头的符号感到非常困惑`_imp`，但尽管它以`__imp`. 一位深度编译器魔术师能否对此有所了解？我使用了 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-28T12:02:25.567

这是在工作中相当直接的标识符装饰。前缀由`imp_`编译器自动生成，它导出一个函数指针，允许优化绑定到 DLL 导出。根据语言规则，imp_ 以前导下划线为前缀，这是必需的，因为它位于全局命名空间中，由实现生成，不会出现在源代码中。所以你得到`_imp_`.

接下来发生的事情是编译器*修饰*标识符以允许链接器捕获声明不匹配。非常重要，因为编译器无法诊断跨模块的声明不匹配，并且在运行时自己诊断它们*非常*痛苦。

首先是 C++ 装饰，这是一个非常复杂的方案，支持函数重载。它会生成看起来很奇怪的名字，通常包括很多？和 @ 带有额外字符的参数和返回类型的字符，以便重载是明确的。然后是 C 标识符的修饰，它们基于调用约定。cdecl 函数有一个前导下划线，一个 stdcall 函数有一个前导下划线和一个尾随 @n，它允许在参数声明不匹配之前诊断它们不匹配堆栈。64 位代码中没有 C 装饰，（幸运的是）只有一种调用约定。

所以你得到了链接器错误，因为你忘记指定 C 链接，链接器被要求将重修饰的 C++ 名称与轻度修饰的 C 名称相匹配。然后`extern "C"`你`_imp_`用`__imp_`.

# security - 软件模糊器

> ID：11236790
> 
> 赞同：3
> 
> 时间：2012-06-28T00:58:24.787
> 
> 标签：security, inputstream, fuzzer

我想做一个软件模糊器。

我想要做的是打开一个程序，模糊器应该找到应用程序上所有接受输入的函数，然后尝试编写一个字符串，我在开始时提供给模糊器。

fuzzer 应该在程序的所有输入函数中写入该字符串，并且它应该在程序由于函数中的特定输入而崩溃时通知我。例如，当模糊器将一长串 A 注入一个名为艺术家姓名的字段中，并且程序崩溃时，我想得到一个输出，其中包含字段名称和导致崩溃的值以及 windows 的报告，如果假如。

我非常了解这个应用程序，只是给了我一些我应该阅读的主要步骤或一些我应该使用的 API。我将用 C# 编写程序。我也可以用 C++ 和 Python 编写它，但我认为在 C# 上会更容易。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:58:42.563

欢迎来到堆栈溢出。[fuzzdb](http://code.google.com/p/fuzzdb/)可能是您正在寻找的最酷的东西。Fuzzing 不是一个确定的事情，你必须处理很多不是错误的虚假数据。我更喜欢使用应用程序模板。
您应该考虑其他模糊器/模糊测试技术，因为您正在构建一个。

# php - 为什么尝试搜索词条时没有出现记录？

> ID：11236792
> 
> 赞同：-1
> 
> 时间：2012-06-28T00:58:28.217
> 
> 标签：php, mysqli

好的，这很奇怪，但我会解释发生了什么。

在 SQL 中，假设我想使用 LIKE 语句在数据库中查找 2 个术语（AAA、AAB），能够找到这些术语结果的查询如下：

```
SELECT q.QuestionContent
FROM Question q
WHERE q.QuestionContent LIKE '%AAA%'
OR q.QuestionContent LIKE '%AAB%'
GROUP BY q.QuestionId, q.SessionId
ORDER BY IF( q.QuestionContent LIKE '%AAA%', 1, 0 ) , IF( q.QuestionContent LIKE '%AAB%', 1, 0 ) 
```

所以我知道 SQL 有效。所以我想做的是在 MYSQLi 中包含这个查询。唯一的区别是用户可以在搜索框中输入他们的术语，然后提交搜索框。因此，用户可以输入 1 个术语、2 个术语、3 个术语等，可以是任意数量的术语。

所以下面是我创建的能够做到这一点的MYSQLi代码：

```
 <form action="previousquestions.php" method="get">
              <p>Search: <input type="text" name="questioncontent" value="<?php echo $questioncontent; ?>" onchange="return trim(this)" /></p>
              <p><input id="searchquestion" name="searchQuestion" type="submit" value="Search" /></p>
              </form>

        <?php 

        if (isset($_GET['searchQuestion'])) {

        $searchquestion = $questioncontent;
        $terms = explode(" ", $searchquestion);

        $questionquery = "SELECT q.QuestionContent FROM Question q WHERE ";

        $i=0;

        $whereArray = array();
        $orderByArray = array();
        $orderBySQL = "";
        $paramString = "";

        //loop through each term
        foreach ($terms as &$each) {
            $i++;
            //if only 1 term entered then perform this LIKE statement
            if ($i == 1){
                $questionquery .= "q.QuestionContent LIKE ? ";
            } else {
                //If more than 1 term then add an OR statement
                $questionquery .= "OR q.QuestionContent LIKE ? ";
                $orderBySQL .= ",";
            }

            $orderBySQL .= "IF(q.QuestionContent LIKE ? ,1,0)"; 

            $whereArray[] = "%" . $each . "%";
            $orderByArray[] = "%" . $each . "%"; 

            $paramString .= "ss";
        }  

        $questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY " . $orderBySQL; 
        $stmt=$mysqli->prepare($questionquery)or die($mysqli->error); 
function makeValuesReferenced(&$arr){ 
    $refs = array(); 
    foreach($arr as $key => $value) 
        $refs[$key] = &$arr[$key]; 
    return $refs; 

}

call_user_func_array(array($stmt, 'bind_param'), makeValuesReferenced(array_merge((array)$paramString,$whereArray, $orderByArray)));

    $stmt->execute();
    $stmt->bind_result($dbQuestionContent); 
    $questionnum = $stmt->num_rows();
    echo $questionquery;
    echo $paramString;

//OUTPUT RECORDS

        if (empty($questioncontent)){
    echo "Please enter in a phrase in the text box in able to search for a question";
}

        else if($questionnum ==0){
    echo "<p>Sorry, No Questions were found from this Search</p>";
    }
    else{

            $output = "";
    $output .= "
        <table border='1' id='resulttbl'>
          <tr>
          <th class='questionth'>Question</th>
          </tr>
    ";
            while ($stmt->fetch()) {
    $output .= "
          <tr>
          <td class='questiontd'>{$dbQuestionContent['QuestionContent']}</td>
          </tr>";
            }
            $output .= "        </table>";

            echo $output;

      }
}
            ?> 
```

问题是如果用户输入了正确的术语，它不会显示数据库中包含这些术语的记录。它不输出任何东西。这没有任何意义，因为假设我在搜索框“AAA AAB”中输入了 2 个字词，当我回显查询和参数时，它似乎是正确的，因为它输出了这个：

查询输出：

```
SELECT q.QuestionContent FROM Question q WHERE q.QuestionContent LIKE ? OR q.QuestionContent LIKE ? GROUP BY q.QuestionId, q.SessionId ORDER BY IF(q.QuestionContent LIKE ? ,1,0),IF(q.QuestionContent LIKE ? ,1,0) 
```

参数输出：

```
ssss 
```

所以我的问题是，如果查询是正确的并且参数的数量是正确的，发生了什么导致没有记录出现以进行成功的搜索？

目前我收到一个警告，这里是：

警告：mysqli_stmt::bind_param() [mysqli-stmt.bind-param]：类型定义字符串中的元素数与第 87 行中的绑定变量数不匹配

需要做什么来解决这个警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:59:57.103

您收到此错误的原因是因为您只传入 1 个元素.. 一个数组。

```
$stmt->bind_param($paramString, array_merge($whereArray, $orderByArray)); 
```

它需要看起来像这样

```
$stmt->bind_param($paramString, $param1, $param2, $param3 ...); 
```

$paramString 中的每个 s 都需要有一个单独的参数。现在显然这有点困难，因为它可以是可变的数量。所以更换

```
$stmt->bind_param($paramString, ); 
```

和

```
$ref = array_merge((array)$paramString, $whereArray, $orderByArray);
call_user_func_array(array($stmt, 'bind_param'), makeValuesReferenced($ref));

function makeValuesReferenced(&$arr){ 
    $refs = array(); 
    foreach($arr as $key => $value) 
        $refs[$key] = &$arr[$key]; 
    return $refs; 

} 
```

我还没有测试过，所以不确定它是否有效。我从 [PHP 5.3.1 的引用传递问题中得到了解决方案](https://stackoverflow.com/questions/2045875/pass-by-reference-problem-with-php-5-3-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:44:37.933

还要查看您的代码，您有一些逻辑错误。

1)

```
$searchquestion = $questioncontent; 
```

应该

```
$searchquestion = $_GET['questioncontent']; 
```

2)

```
if (empty($questioncontent)){ 
```

应该

```
if (empty($searchquestion)){ 
```

3)

```
<td class='questiontd'>{$dbQuestionContent['QuestionContent']}</td> 
```

应该

```
<td class='questiontd'>$dbQuestionContent</td> 
```

# ruby - 当哈希值是数组本身时搜索哈希

> ID：11236804
> 
> 赞同：0
> 
> 时间：2012-06-28T00:59:38.687
> 
> 标签：ruby, hash

我有一个散列，我的每个项目都标有各种代码。

```
@projects =
{
    "Project A" => ["2","4","11"],
    "Project B" => ["2","3","4"],
    "Project C" => ["2","5","11"]
} 
```

如何搜索附加到特定标签的项目，即输入`"4"`，我们得到`["Project A","Project B"]`.
我已经尝试过标准值搜索方法，但它仅在输入整个数组而不是任何数组中的任何元素时才有效。

这不那么重要，但是否可以通过多个标签进行搜索，即 input `["2","11"]`，我们得到了`["Project A","Project C"]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T01:04:34.600

尝试：

```
def search array, elem
  array.select{|key, value| value.include? elem}
end 
```

和：

```
def search_many array, *elems
  elems.map{|elem| search array, elem}.flatten.uniq
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:04:33.863

第一部分的解决方案：

```
code_2s = @projects.collect{|k,v| (v.include? "2") ? k : nil }.compact 
```

# playframework - Ebean如何排除字符串作为列

> ID：11236806
> 
> 赞同：5
> 
> 时间：2012-06-28T00:59:53.473
> 
> 标签：playframework, playframework-2.0, ebean

所以我有下面的代码。我正在尝试创建一个名为 SecurityType 的表，其中包含值 ID 和描述。我想添加两个字符串“管理员”和“用户”。有没有办法可以将这两个排除在 ebean 表中的列之外？还是我需要搬到另一个班级？

```
@Entity
public class SecurityType extends Model {
    public static final String ADMIN = "Administrator";
    public static final String USER = "User";
    @Id
    public Long id;

    public String description;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T09:33:03.173

使它们瞬态：

```
@Entity
public class SecurityType extends Model {
    @Transient
    public static final transient String ADMIN = "Administrator";
    @Transient
    public static final transient String USER = "User";
    @Id
    public Long id;

    public String description;
} 
```

# performance - 列表理解中的性能（处理时间）影响因素是什么？

> ID：11236820
> 
> 赞同：2
> 
> 时间：2012-06-28T01:02:39.140
> 
> 标签：performance, haskell, functional-programming

在从 learn-you-a-haskell 中学习示例时，“哪个直角三角形的所有边都具有整数且所有边都等于或小于 10，其周长为 24？”

> rightTrianglesOriginal = [ (a,b,c) | c <- [1..10], b <- [1..10], a <- [1..10], a^2 + b^2 == c^2, a+b+c == 24]

我更改了原始示例的部分内容，并想了解下面的过程（在极端条件下）。

*   谓词的顺序会影响性能吗？

*   添加谓词（其他谓词暗示）会影响性能吗？（例如，a > b，c > a，c > b？）？

*   根据谓词 (1) a > b 和 (2) c > a 制作元组列表，然后进一步应用 a^2 + b^2 = c^2 是否会提高整体性能？

*   如果我们改变参数位置，例如（a，b，c）或（c，b，a），会对性能产生影响吗？

*   如果需要如此重的排列和组合，在现实生活应用中的可取策略是什么——我们是否应该（尽可能）存储预先计算的答案以供下次使用以提高性能或其他任何用途？

> 右三角形 = [ (a,b,c) | c <- [1..10], b <- [1..10], a <- [1..10], a^2 + b^2 == c^2]

几乎立即给出结果。

> rightTriangles10 = [ (a,b,c) | c <- [1..10], b <- [1..10], a <- [1..10], a^2 + b^2 == c^2, a > b , c > a ]

几乎立即给出结果。

> rightTriangles100 = [ (a,b,c) | c <- [1..100], b <- [1..100], a <- [1..100], a^2 + b^2 == c^2, a > b , c > a ]

在几秒钟内给出结果。

> rightTriangles1000 = [ (a,b,c) | c <- [1..1000], b <- [1..1000], a <- [1..1000], a^2 + b^2 == c^2, a > b , c > a ]

我在 30 分钟后停止了进程。结果尚未完成。

请注意，作为初学者，我缺乏检查处理单个函数所需的确切时间的知识。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T02:15:17.077

```
rightTrianglesOriginal = [ (a,b,c) | c <- [1..10], b <- [1..10], a <- [1..10], a^2 + b^2 == c^2, a+b+c == 24] 
```

*   谓词的顺序会影响性能吗？

那要看。在这种情况下，更改谓词的顺序不会改变任何实质性的东西，因此差异（如果有的话）将非常小。由于`a^2 + b^2 == c^2`检查比 贵一点`a + b + c == 24`，并且两个测试都过滤掉了许多值，我希望通过交换两个测试来加快速度

```
rightTrianglesSwapped = [ (a,b,c) | c <- [1..10], b <- [1..10], a <- [1..10], a+b+c == 24, a^2 + b^2 == c^2] 
```

但是整个计算是如此之小，以至于很难可靠地测量。一般来说，您可以通过重新排序测试和生成器来获得很大的差异，特别是交叉测试和生成器到捷径死胡同会产生巨大的影响。在这里，您可以在和生成器之间添加一个`b < c`测试到快捷方式。当然，将生成器更改为更有效。`b``a``b <- [1 .. c-1]`

*   添加谓词（其他谓词暗示）会影响性能吗？（例如`a > b, c > a, c > b`？）？

是的，但通常很少，除非谓词的评估成本异常昂贵。在上面，如果谓词成立，您将对隐含的第三个谓词进行不必要的评估。在这里，谓词对于标准数字类型的计算成本很低，并且不经常评估（大多数候选三元组较早失败），因此几乎无法衡量影响。但这是额外的工作——编译器不够聪明，无法消除它——因此需要额外的时间。

*   根据谓词 (1)`a > b`和 (2)制作元组列表，`c > a`然后进一步应用 a^2 + b^2 = c^2 是否会提高整体性能？

那要看。如果你把一个谓词放在一个可以捷径的地方，那将提高性能。使用这些谓词需要重新排序生成器（获取`a`before `b`，因此您可以在 上捷径`c > a`）。比较的计算成本也比 低一些`a^2 + b^2 == c^2`，所以即使测试的总数增加（后一种条件比前一种情况淘汰了更多的三倍），它仍然可以提高性能先进行更便宜的测试（但做最有区别的先测试也可能是更好的策略，即使它们更昂贵，也取决于成本和功耗之间的关系）。

*   `(a,b,c)`如果我们更改参数位置，例如或，会对性能产生影响`(c, b, a)`吗？

基本上，这不会产生任何可衡量的影响。

*   如果需要如此重的排列和组合，在现实生活应用中的可取策略是什么——我们是否应该（尽可能）存储预先计算的答案以供下次使用以提高性能或其他？

那要看。如果计算复杂并且结果很小，最好将结果存储起来以供重用。如果计算成本低且结果大，则最好重新计算。在这种情况下，毕达哥拉斯三元组的数量很少，计算也不是很便宜，因此存储以供重用可能是有益的。

```
rightTriangles10 = [ (a,b,c) | c <- [1..10], b <- [1..10], a <- [1..10], a^2 + b^2 == c^2, a > b , c > a] 
```

几乎立即给出结果。

```
rightTriangles100 = [ (a,b,c) | c <- [1..100], b <- [1..100], a <- [1..100], a^2 + b^2 == c^2, a > b , c > a] 
```

在几分钟内给出结果。

```
rightTriangles1000 = [ (a,b,c) | c <- [1..1000], b <- [1..1000], a <- [1..1000], a^2 + b^2 == c^2, a > b , c > a] 
```

好吧，要检查的三元组的数量在限制中是三次方，因此将限制增加 10 倍会使要检查的三元组数量增加 1000 倍，运行时间的因素大致相同，可能是由于更大的内存要求，略大。因此，甚至没有编译，更不用说优化的代码，

```
ghci> [ (a,b,c) | c <- [1..100], b <- [1..100], a <- [1..100], a^2 + b^2 == c^2, a > b , c > a]
[(4,3,5),(8,6,10),(12,5,13),(12,9,15),(15,8,17),(16,12,20),(24,7,25),(20,15,25),(24,10,26)
,(21,20,29),(24,18,30),(30,16,34),(28,21,35),(35,12,37),(36,15,39),(32,24,40),(40,9,41)
,(36,27,45),(48,14,50),(40,30,50),(45,24,51),(48,20,52),(45,28,53),(44,33,55),(42,40,58)
,(48,36,60),(60,11,61),(63,16,65),(60,25,65),(56,33,65),(52,39,65),(60,32,68),(56,42,70)
,(55,48,73),(70,24,74),(72,21,75),(60,45,75),(72,30,78),(64,48,80),(80,18,82),(84,13,85)
,(77,36,85),(75,40,85),(68,51,85),(63,60,87),(80,39,89),(72,54,90),(84,35,91),(76,57,95)
,(72,65,97),(96,28,100),(80,60,100)]
(2.64 secs, 2012018624 bytes) 
```

限制 1000 的预期时间约为 45 分钟。对数据使用一些约束，我们可以做得更快：

```
ghci> length [(a,b,c) | c <- [2 .. 1000], b <- [1 .. c-1], a <- [c-b+1 .. b], a*a + b*b == c*c]
881
(87.28 secs, 26144152480 bytes) 
```

# php - 当用户访问指定类型的文件时执行 PHP 脚本

> ID：11236824
> 
> 赞同：0
> 
> 时间：2012-06-28T01:03:20.480
> 
> 标签：php

> **可能重复：**
> [.htaccess 将图像文件重写为 php 脚本](https://stackoverflow.com/questions/9703862/htaccess-rewrite-image-file-to-php-script)

当用户访问不是 PHP 文件的页面/文件时，如何执行 PHP 脚本？

例如，如果他们访问了一个 .css 文件，我将如何制作它以便我可以在他们访问它之前执行 php 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:05:57.187

这是一种更简单的方法，但您可以让 PHP 输出 CSS 并将服务器配置为将 CSS 文件解析为 PHP 文件：

所以，如果你使用的是 Apache，你会做这样的事情：

```
AddType application/x-httpd-php .css 
```

然后，在您的 CSS 文件中，执行以下操作：

```
<?php
// Code to execute because user is accessing CSS file

// Output CSS below here
header("Content-type: text/css"); 
?>
body {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:13:17.640

您可以执行以下操作，而不是将处理程序添加到您的非 php 文件，这意味着 apache 会尝试将它们解析为 php 并可能会发现错误（例如具有`<?xml?>`声明的 XML 文件）：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]        # if URI is not index
    RewriteCond %{REQUEST_FILENAME} !-f   # and URI is not file on disk
    RewriteCond %{REQUEST_FILENAME} !-d   # and URI is not directory on disk
    RewriteRule . /index.php [L]          # redirect to index
</IfModule> 
```

通常将不存在的 URI 的所有流量重定向到您的主应用程序引导程序`index.php`。

并通过仅针对要重定向的特定（一组）文件添加规则来调整上述内容，即使它们确实存在。重定向后，您检查 $_SERVER['REQUEST_URI'] 并找出请求最初来自哪里，如果它是您的 css 文件，则打开文件，读取它处理它，然后将其处理后的内容回显给用户。

这种方法可以保护文件不被下载。

# sql-server - 安装 SQL Server Express（免费版）和公司客户端版本已经在机器上

> ID：11236828
> 
> 赞同：0
> 
> 时间：2012-06-28T01:03:46.713
> 
> 标签：sql-server

在我公司的计算机上，我们有 Microsoft SQL Server 2008 R2 客户端版本的许可证。安装 SQL Server 2008 R2 Express 组件（我会下载一个免费组件，以便创建自己的本地数据库）会导致兼容性问题吗？这个试用版将在我假设的指定时间后被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:11:42.647

您可以在一台计算机上安装多个 SQL Server 实例。您现在拥有的任何安装都不应该有任何兼容性问题，只需注意一台机器上只能有一个默认实例（无论版本或版本）。

# c# - 为什么以下无法编译？

> ID：11236839
> 
> 赞同：1
> 
> 时间：2012-06-28T01:06:14.940
> 
> 标签：c#, c#-4.0

```
String s = new String({'h','e','l','l','o'}); 
```

我收到错误：

> 1 无效的表达式术语“{”

我以为`{'h','e','l','l','o'}`应该是字符数组，为什么编译失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T01:08:05.297

我想你的意思是：

```
String s = new String(new[] {'h','e','l','l','o'}); 
```

您之前的代码没有正确初始化数组。查看有关[隐式类型数组](http://msdn.microsoft.com/en-us/library/bb384090.aspx)的 MSDN 文章以获取更多信息。

您还可以显式指定数组的类型：

```
String s = new String(new char[] {'h','e','l','l','o'}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T01:09:37.780

尝试这样的事情：

```
String s = new String(new char [] {'h','e','l','l','o'}); 
```

# c# - 如何加快任务 使用 httpclient

> ID：11236844
> 
> 赞同：4
> 
> 时间：2012-06-28T01:07:24.577
> 
> 标签：c#, optimization, task-parallel-library, asp.net-web-api

我有一个流程，我需要对服务器进行约 100 次 http api 调用并处理结果。我已经把这个命令执行器放在一起，它构建了一个命令列表，然后异步运行它们。进行大约 100 次调用并解析结果需要超过 1 分钟。使用浏览器的 1 个请求会在大约 100 毫秒内给我一个响应。你会认为大约 100 次调用大约需要 10 秒。我相信我做错了什么，这应该会更快。

```
 public static class CommandExecutor
 {
    private static readonly ThreadLocal<List<Command>> CommandsToExecute =
        new ThreadLocal<List<Command>>(() => new List<Command>());
    private static readonly ThreadLocal<List<Task<List<Candidate>>>> Tasks =
        new ThreadLocal<List<Task<List<Candidate>>>>(() => new List<Task<List<Candidate>>>());

    public static void ExecuteLater(Command command)
    {
        CommandsToExecute.Value.Add(command);
    }

    public static void StartExecuting()
    {
        foreach (var command in CommandsToExecute.Value)
        {
            Tasks.Value.Add(Task.Factory.StartNew<List<Candidate>>(command.GetResult));
        }

        Task.WaitAll(Tasks.Value.ToArray());
    }

    public static List<Candidate> Result()
    {
        return Tasks.Value.Where(x => x.Result != null)
                          .SelectMany(x => x.Result)
                          .ToList();
    }
} 
```

我传递到此列表的命令创建了一个新的 httpclient，使用 url 在该客户端上调用 getasync，将字符串响应转换为对象，然后对字段进行水合。

```
 protected void Initialize()
    {
        _httpClient = new HttpClient();
        _httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("text/plain"));
    }

    protected override void Execute()
    {
        Initialize();

        var task = _httpClient.GetAsync(string.Format(Url, Input));
        Result = ConvertResponseToObjectAsync(task).Result;
        Result.ForEach(x => x.prop = value);
    }

    private static Task<Model> ConvertResponseToObjectAsync(Task<HttpResponseMessage> task)
    {
        return task.Result.Content.ReadAsAsync<Model>(
           new MediaTypeFormatter[]
           {
                 new Formatter()
           });
    } 
```

您能否了解我的瓶颈或对如何加快速度有任何建议。

**编辑** 进行这些更改使其缩短到 4 秒。

```
protected override void Execute()
    {
        Initialize();

        _httpClient.GetAsync(string.Format(Url, Input))
        .ContinueWith(httpResponse => ConvertResponseToObjectAsync(httpResponse)
        .ContinueWith(ProcessResult));
    }

    protected void ProcessResult(Task<Model> model)
    {
        Result = model.Result;
        Result.ForEach(x => x.prop = value);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-08T02:45:36.503

停止创建新的 HttpClient 实例。每次您处理 HttpClient 实例时，它都会关闭 TCP/IP 连接。创建一个 HttpClient 实例并为每个请求重新使用它。HttpClient 可以同时在多个不同的线程上发出多个请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T02:27:09.023

避免`task.Result`在 ConvertResponseToObjectAsync 中使用，然后在`Execute`. 而是将这些链接到原始`GetAsync`任务`ContinueWith`。

就目前而言，`Result`将阻止当前线程的执行，直到其他任务完成。但是，您的线程池将很快得到等待其他无处运行的任务的任务的支持。最终（等待一秒钟后），线程池将添加一个额外的线程来运行，因此这最终会完成，但这几乎没有效率。

作为一般原则，您应该避免`Task.Result`在任务继续时访问。

作为奖励，您可能不想使用`ThreadLocalStorage`. `ThreadLocalStorage`将存储在其中的项目的实例存储在访问它*的每个线程*上。在这种情况下，您似乎想要一种线程安全但共享的存储形式。我会推荐`ConcurrentQueue`这种事情。

# ruby-on-rails - Rails 3.2.5 中的 Paperclip/S3 问题“无法加载此类文件——aws-sdk”

> ID：11236847
> 
> 赞同：2
> 
> 时间：2012-06-28T01:08:09.240
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, amazon-web-services, paperclip

图片上传工作正常，但是当我尝试将其切换到 S3 时，它开始抛出错误。当我尝试创建新的图像上传时出现以下错误：

```
cannot load such file -- aws-sdk (You may need to install the aws-sdk gem) 
```

相关宝石：

```
gem 'rails', '3.2.5'
gem 'paperclip'
gem 'aws-sdk' 
```

配置/s3.yml：

```
development:
    bucket: bucketname
    access_key_id: #
    secret_access_key: #

test:
    bucket: bucketname
    access_key_id: #
    secret_access_key: # 
```

image_upload.rb：

```
 has_attached_file :image,
    :styles => {
      :normal => "1680x6000",
      :result => "560x3000",
      :thumb => "140x500" },
    :path => ":attachment/:style/:normalized_file_name.:extension",
    :storage => :s3,
    :s3_credentials => "#{Rails.root}/config/s3.yml" 
```

我尝试过的事情：

*   捆绑安装
*   将 aws-sdk 的版本更改为 1.3.4
*   宝石安装 aws-sdk
*   将 s3_credentials "Rails.root" 部分更改为一些不同的东西。

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:46:21.293

有点尴尬...我只需要重新启动 Rails 服务器。不敢相信我忘了这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:15:37.077

如果添加`require 'rubygems'`到需要 aws-sdk 的文件顶部会发生什么？

# java - 我可以在不使用 Java 的 .length 的情况下找出数组的长度吗

> ID：11236848
> 
> 赞同：3
> 
> 时间：2012-06-28T01:08:31.877
> 
> 标签：java

我有以下内容：

```
int count = args.length; 
```

奇怪的是，我想在不使用长度字段的情况下找出数组长度。还有其他方法吗？

这是我已经尝试过的（没有成功）：

```
int count=0; while (args [count] !=null) count ++;
int count=0; while (!(args[count].equals(""))) count ++;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T01:19:01.330

我认为没有必要这样做。但是，最简单的方法是使用`enhanced for loop`

```
 int count=0;
 for(int i:array)
 {
   count++;
 }

 System.out.println(count); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T01:16:37.390

我不确定你为什么想做其他任何事情，但这只是我想出的，看看什么会起作用。这对我有用：

```
 int count = 0;
    int[] someArray = new int[5];  
    int temp;
    try
    {
        while(true)
        {
            temp = someArray[count];
            count++;
        }
    }
    catch(Exception ex)
    {
           System.out.println(count); 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T01:18:32.347

如果索引超出范围，则不能使用 [] 访问数组。

您可以使用 for-each 循环

```
for (String s: args){
    count++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-13T06:33:54.070

```
public class ArrayLength {
    static int number[] = { 1, 5, 8, 5, 6, 2, 4, 5, 1, 8, 9, 6, 4, 7, 4, 7, 5, 1, 3, 55, 74, 47, 98, 282, 584, 258, 548,
            56 };

    public static void main(String[] args) {
        calculatingLength();
    System.out.println(number.length);
    }

    public static void calculatingLength() {
        int i = 0;
        for (int num : number) {

            i++;

        }
        System.out.println("Total Size Of Array :" + i);

    }

} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-28T01:16:46.860

怎么样`Arrays.asList(yourArray).size();`？

# mysql - MySQL 限制 OR

> ID：11236850
> 
> 赞同：0
> 
> 时间：2012-06-28T01:08:58.467
> 
> 标签：mysql

我想知道 MySQL 中是否有一种方法可以为每个 OR 限制 1。例如，如果我有一个 MySQL 语句`SELECT * FROM posts WHERE username = 'Johnny' OR username = 'Matthew' OR username = 'Andy' OR username = 'Sandra' ORDER BY date DESC`，但我只想从每个用户名返回一个结果（或者，在这种情况下，每个人的最新帖子）。我已经尝试过`SELECT * FROM posts WHERE (username = 'Johnny' LIMIT 1) OR (username = 'Matthew' LIMIT 1) OR (username = 'Andy' LIMIT 1) OR (username = 'Sandra' LIMIT 1) ORDER BY date DESC`了，但这就是我能想到的（但它没有用）。在此先感谢，马修

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:11:27.697

您可以使用[`UNION`](http://dev.mysql.com/doc/en/union.html)组合单独的查询：

```
(SELECT * FROM posts WHERE username = 'Johnny'  LIMIT 1)
UNION ALL
(SELECT * FROM posts WHERE username = 'Matthew' LIMIT 1)
UNION ALL
(SELECT * FROM posts WHERE username = 'Andy'    LIMIT 1)
UNION ALL
(SELECT * FROM posts WHERE username = 'Sandra'  LIMIT 1) 
```

或者，您可以按用户名对结果进行分组：

```
SELECT   *
FROM     posts
WHERE    username IN ('Johnny','Matthew','Andy','Sandra')
GROUP BY username 
```

上面给出的这两个查询都将为每个用户返回不确定的行（这可能是您需要的，也可能不是您需要的）。要获取特定行，请指定 MySQL 如何确定您想要的行。

* * *

**更新**

要获取每个用户的最新帖子并将结果集从最新到最旧排序：

```
(SELECT * FROM posts WHERE username = 'Johnny'  ORDER BY date DESC LIMIT 1)
UNION ALL
(SELECT * FROM posts WHERE username = 'Matthew' ORDER BY date DESC LIMIT 1)
UNION ALL
(SELECT * FROM posts WHERE username = 'Andy'    ORDER BY date DESC LIMIT 1)
UNION ALL
(SELECT * FROM posts WHERE username = 'Sandra'  ORDER BY date DESC LIMIT 1)
ORDER BY date DESC 
```

和：

```
SELECT   *
FROM     posts NATURAL JOIN (
           SELECT   username, MAX(date) AS date
           FROM     posts
           WHERE    username IN ('Johnny','Matthew','Andy','Sandra')
           GROUP BY username
         ) AS t
GROUP BY username -- only required if multiple posts might have the same date
ORDER BY date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:11:18.777

如何使用联合？

感谢@eggyal更正编辑：

```
(SELECT * FROM posts WHERE username = 'Johnny' LIMIT 1)
UNION
(SELECT * FROM posts WHERE username = 'Matthew' LIMIT 1)
UNION
(SELECT * FROM posts WHERE username = 'Andy' LIMIT 1) 
```

# xml - 如何添加两个 XMLNS 代码？

> ID：11236853
> 
> 赞同：1
> 
> 时间：2012-06-28T01:09:27.100
> 
> 标签：xml, xml-namespaces

我已经添加了一个 fb xmlnx 代码，如下所示，现在我想再添加一个。

```
<html xmlns:fb='http://www.facebook.com/2008/fbml'> 
```

当我像下面添加时，它显示错误，

```
 <html 
xmlns:fb='http://www.facebook.com/2008/fbml'
xmlns:fb='http://ogp.me/ns/fb#'> 
```

谁能告诉我如何添加两个代码？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T01:13:16.703

一般回答：

没有办法“连接”命名空间，但你可以给它们不同的前缀

```
 <html 
          xmlns:fb='http://www.facebook.com/2008/fbml'
          xmlns:og='http://ogp.me/ns/fb#'> 
```

然后使用 fb:tag 为 facebook 标签和 og:tag 为 ogp.me 标签

具体答案：

Open Graph 协议的推荐使用不是通过 xmlns 属性，而是通过前缀属性 ( [http://ogp.me/](http://ogp.me/) ) 所以使用两者的代码将如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
      xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# [YOUR_APP_NAMESPACE]: 
                  http://ogp.me/ns/apps/[YOUR_APP_NAMESPACE]#">
  <meta property="fb:app_id" content="[YOUR_APP_ID]" /> 
  <meta property="og:type" content="[YOUR_APP_NAMESPACE]:recipe" /> 
  ... 
```

示例由[https://developers.facebook.com/docs/opengraph/tutorial/提供](https://developers.facebook.com/docs/opengraph/tutorial/)

# c# - 正在使用懒惰 对性能不利？

> ID：11236855
> 
> 赞同：11
> 
> 时间：2012-06-28T01:10:01.737
> 
> 标签：c#, .net-4.0, lazy-initialization

最近，我遇到了一个 singelton 类的问题，该类懒惰地初始化一个字典，第二个线程会在它实际被填充之前尝试使用它。所以我通过[`Lazy<T>`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28%22SYSTEM.LAZY%601%22%29;k%28LAZY%29;k%28SOLUTIONITEMSPROJECT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)类实现了变量初始化。

这是我的代码：

```
private static Dictionary<string, string> GroupDefaults
{
    get { return mGroupDefaults.Value; }
}
private static Lazy<Dictionary<string, string>> mGroupDefaults =
    new Lazy<Dictionary<string,string>>(delegate
    {
        Dictionary<string, string> defaults = new Dictionary<string, string>();
        foreach (KeyValuePair<string, UnitGroup> groupDef in Groups)
            defaults.Add(groupDef.Key, groupDef.Value.First().Key);
        return defaults;
    }); 
```

这解决了问题，现在我正在考虑将此作为我的常规做法，以便`Lazy<T>`在我进行延迟初始化的任何地方使用该类以避免任何可能的线程问题。所以基本上我想知道这是否是好的/常见的做法？还是会影响性能或其他什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T01:15:28.360

如果不知道您有什么类型的性能限制，很难说，但根据我的经验，一次性初始化很少是瓶颈（因为根据定义，它只发生一次。）`Lazy<T>`是为了为您提供这种确切的服务而编写的，所以我会推荐使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T01:31:37.863

从文档中，我发现以下内容：

> 如果 Lazy 构造函数中没有传递委托，则在首次访问 value 属性时使用 Activator.CreateInstance 创建包装类型。如果该类型没有默认构造函数，则会引发运行时异常。

`Activator.CreateInstance`是一种众所周知的不利于性能的方法。但是，在您的情况下，这似乎不是问题，并且无论如何，正如 dlev 所说，调用该方法一次不会成为问题。我没有看到`Lazy<T>`经常使用它，但我看不出有任何理由在你的情况下不使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T01:27:00.070

如果这是针对单例的，那么[静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)可能就是您想要的。就像是：

```
class MySingleton
{
    static MySingleton()
    {
         Instance().InitDict();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T01:17:21.363

我认为您可能将 Lazy 用于非预期用途。Lazy 用于某些初始化成本很大的情况，但很可能在对象的生命周期内它可能不会被使用。

如果您总是`GroupDefaults`在其生命周期中至少调用一次，那么更好的方法是`GroupDefaults`在容器生命周期开始时在后台线程中进行初始化，并希望在完成初始化之前完成（我知道有一个类，但我需要深入MSDN才能找到）

# c# - 对于返回不同类型的存储库和 EF 数据上下文，什么是好的模式？

> ID：11236861
> 
> 赞同：0
> 
> 时间：2012-06-28T01:11:20.767
> 
> 标签：c#, design-patterns, ef-code-first, repository-pattern, automapper

我的应用程序中有一个干净的域层，它是以 DDD 方式开发的。开发领域时根本没有考虑数据库。属性名称有意义，不是全部大写，并且与我的应用程序相关。

今天，我正在实现一个存储库以从现有的 EF DbContext 中提取。开发 DbContext 是为了（基本上）匹配设计不佳的 Oracle 数据库。

理想情况下，我想实现这样的存储库：

```
public interface IRepository {
    IQueryable<T> Find<T>(Expression<Func<T, bool>> query) where T : IMyDomainEntity;
} 
```

`T`是我的域实体。但是，`Find`在我的存储库中的方法中，我必须...

1.  以某种方式将表达式转换为与 DbContext 一起使用

    > 我还不确定该怎么做。

2.  查询 DbContext

    > 一旦表达式被“映射”，这很简单

3.  以某种方式映射到我的域对象

    > 我确信我可以使用 AutoMapper 或实现我自己的映射器。

4.  返回一个尚未访问数据库的 IQueryable。

    > 在 # 的 1 - 3 中完成所有干预之后，不确定这是否可能

**那么，过去这个问题是如何解决的呢？这里有可重用的模式吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:19:37.527

好吧，您已经走在正确的轨道上，只需实现您想要的内容即可:)

1.您将表达式传递到您的 find 方法中，因此只需在 Where 子句中使用该表达式

2.你只需要从你的 DbContext 中获取正确的 DbSet 来查询，DbContext 有一个方法来获取给定类型的 DbContext，使用它，你可以像这样查询

```
public IQueryable<T> Find<T>(Expression<Func<T, bool>> query) where T : IMyDomainEntity
{
   var dbSet = context.Set<T>();
   return dbSet.Where(query);
} 
```

3.如果您的域对象不是 EF 映射到数据库的对象，您需要根据 DbContext 类中的数据库中的内容自定义映射（不需要自动映射器），所以您会有这样的东西在您的 DbContext 类中

```
public class MyContext : DbContext 
{
   ...
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<User>()
                .Map(a => a.ToTable("DB_USERS"))
                .Property(a => a.Email).HasColumnName("MAIL");

            base.OnModelCreating(modelBuilder);
        }
} 
```

要从数据库中的表 DB_USERS 映射到用户类，字段具有不同的名称等，这里有一篇文章

[http://www.codeproject.com/Articles/165720/Using-the-Code-First-Model-Configuration-Classes](http://www.codeproject.com/Articles/165720/Using-the-Code-First-Model-Configuration-Classes)

如果您不想/不能更改 DbContext 类，也可以使用属性将属性映射到正确的表列

[http://msdn.microsoft.com/en-us/data/gg193958](http://msdn.microsoft.com/en-us/data/gg193958)

或者您可以将一组不同的实体映射到您的数据库并使用自动映射器将它们转换为您的域对象，但您不会丢失。4 bellos，因为您需要具体化查询以将其自动映射到您的域模型。

4.不需要做任何特别的事情，EF会照顾

**更新：没有访问 DbContext 的解决方案（不是完全通用的版本，但有效）**

这个想法是为每个域类创建存储库的映射部分，以便正确绑定所有内容。继续`User`域模型和`DBUser`表模型：

```
public class User : IDomainModelEntity
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
}

public class DBUser
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int USER_ID { get; set; }

    [Required]
    [MaxLength(150)]
    public string USER_NAME { get; set; }

    [Required]
    [MaxLength(260)]
    public string USER_MAIL { get; set; }
} 
```

然后，您将拥有一个抽象存储库和一个具体的存储库，每个域类实现基本的 GetAll 查询映射：

```
public abstract class Repository<T>  where T : IDomainModelEntity
{
    protected readonly DbContext _context;

    public Repository(DbContext context)
    {
        _context = context;
    }

    public abstract IQueryable<T> GetAll();

    public IQueryable<T> Find(Expression<Func<T, bool>> predicate)
    {
        return GetAll().Where(predicate);
    }

}

public class UserRepository : Repository<User>
{
    public UserRepository(DbContext context)
        : base(context)
    {
    }

    public override IQueryable<User> GetAll()
    {
        return _context.Set<DBUser>()
            .Select(u => new User
                {
                    Id = u.USER_ID,
                    Name = u.USER_NAME,
                    Email = u.USER_MAIL
                });
    }
} 
```

现在要使用它，您只需调用 find 或 get all on the repository ...

```
 using (var context = new CompanyDbContext())
        {
            var repo = new UserRepository(context);
            var list = repo.Find(a=>a.Id >= 2).ToList();

            list.ForEach(a => Console.WriteLine("Id: {0}, Name {1}, email {2}", a.Id, a.Name, a.Email));
        } 
```

它不是完全通用的，因为您需要为需要使用的每个域类传递一个存储库，但这可能是一个可以接受的折衷方案

希望这可以帮助

# jquery - jQuery中的类交换

> ID：11236865
> 
> 赞同：1
> 
> 时间：2012-06-28T01:11:45.963
> 
> 标签：jquery, html

我想`class`在点击标签时进行更改。

要求是当我们单击标签时，无论哪个 div 都`active`应该替换为`second`，然后在下一个 li div 中，其类名`second`应该替换为`active`。我做了一个小功能，但它不能正常工作。

```
<div class="wrap">
    <ul>
        <li>
            <div class="first">
                <div class="second"></div>
            </div>
        </li>
        <li>
            <div class="first">
                <div class="active"></div>
            </div>
        </li>
        <li>
            <div class="first">
                <div class="second"></div>
            </div>
        </li>
    </ul>
    <a href="#" id="next">Next</a>
</div>

$(function(){
    $('#next').click(function (){
        $('ul').find('li').each(function (){
            if($(this).find('div').hasClass('active')){
                $(this).removeClass('active');
                $(this).addClass('second');  
                $(this).next().closest('div').next().attr('class','active');
            }
        })
    })
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:30:53.443

这应该适合你：

```
$('#next').click(function (){
    $active = $('.active');

    $active.toggleClass('active second');
    $active.closest('li').next().find('.second').toggleClass('second active');
}); 
```

[现场演示](http://jsfiddle.net/CgDS6/6/)

如果您想在到达底部后从第一个 li 重新开始，这应该适合您：

```
var $firstSecond = $('.second').eq(0);

$('#next').click(function (){
    var $active = $('.active');
    var $nextSecond = $active.closest('li').next().find('.second');

    $active.toggleClass('active second');

    if($nextSecond.size() != 0)
        $nextSecond.toggleClass('second active');
    else
        $firstSecond.toggleClass('second active');
}); 
```

[现场演示](http://jsfiddle.net/CgDS6/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:54:52.313

我对你的标记做了一点改动：

```
<div id="wrap"> 
```

那是一个`id`。这允许我将它的引用缓存在一个闭包中，因为它指向一个特定的元素。如果您实际上是在系列中使用它而不是作为`id`，则以下内容会有所不同。但我想我会向您展示这将如何与缓存和遍历一起工作。

```
$(function(){
    var $ul = $('#wrap ul');

    $('#next').click(function (){
        var $active = $ul.find('.active'),
            $new = $active.parents('li').next();

        $active.toggleClass('active second');

        if ($new.size() < 1) {
            $new = $active.parents('li').siblings().first();
        }

        $new.find('.second').toggleClass('second active');
    });
}); 
```

[http://jsfiddle.net/userdude/y29uJ/](http://jsfiddle.net/userdude/y29uJ/)

因此，如果您要运行一系列这些...

```
$(function(){
    $('.next').click(function (){
        var $active = $(this).parent().find('.active'),
            $new = $active.parents('li').next();

        $active.toggleClass('active second');

        if ($new.size() < 1) {
            $new = $active.parents('li').siblings().first();
        }

        $new.find('.second').toggleClass('second active');
    });
}); 
```

[http://jsfiddle.net/userdude/y29uJ/5](http://jsfiddle.net/userdude/y29uJ/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T01:19:43.340

`toggleClass`[是您在 jQuery文档/示例](http://api.jquery.com/toggleClass/)中寻找的内容

# wcftestclient - WCFTestClient 不会启动

> ID：11236867
> 
> 赞同：0
> 
> 时间：2012-06-28T01:11:58.803
> 
> 标签：wcftestclient

我在 Win7 上运行 VS2010。由于某种原因，WCFTestClient.exe 不会执行。如果我从命令行运行它，它会在任务管理器中显示一秒钟然后死掉。它也不会从 VS 运行。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:31:14.647

我有同样的问题，现在已经解决了，因为我在 App.Config 文件中遇到了问题，我重命名了一个服务但没有更新配置文件

# vb.net - 可访问父属性的私有子类型

> ID：11236869
> 
> 赞同：0
> 
> 时间：2012-06-28T01:12:41.707
> 
> 标签：vb.net, class, types, user-controls, encapsulation

我正在尝试创建一个使用自定义网格（子类）的控件（父类）。网格有一系列构造函数和方法，用于根据 [父] 控件中的属性值填充自身。

我发现使这些属性值可用于网格的唯一方法是使它们成为可能，`Shared`但这会给我带来各种问题。

**要求**

*   控件（父）中的属性必须可供网格（子）访问。
*   控件中的属性必须在设计时属性资源管理器中可见。
*   网格类只能由父类实例化。

*作为旁注：请说明您的回答是否允许我在孩子和父母之间来回分享属性/方法。那会很好，但只是奖金。*

谢谢 ;）

编辑 - 基于我的情况的一个非常简单的例子：

```
Partial Public Class catContent
    Inherits System.Web.UI.UserControl

    Protected Sub Page_Load(sender, e) Handles Me.Load
        Page.Controls.Add(New CategoryResultGrid(category))
    End Sub

    Private Shared _product As String = String.Empty

    Shared Property Product() As String
        Get
            Return _product
        End Get
        Set(ByVal value As String)
            _product = value.Trim()
        End Set
    End Property

    Private Class CategoryResultGrid
        Inherits GridView

        Sub New(ByVal category As String)
            'How do I access "Product" here without sharing it?
        End Sub
    End Class
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:43:14.177

不要使用共享，一旦你在你的应用程序中放置了多个自定义控件，它就会破坏你的应用程序。

如果您只希望 Grid 存在于 Parent 控件的上下文中，请考虑将其公开，类似于 ListView 控件公开其 Items 集合的方式。

如果您希望您的 Grid 访问（父）控件中的字段，有几种方法可以做到这一点。您可以将 Parent 的实例传递给 Grid，您可以让 Grid 使用标准的 Control 方法来获取其父引用，或者您可以将 Grid 实现为 Parent 的内部类。

# android - 我需要记录和循环声音池输出

> ID：11236878
> 
> 赞同：2
> 
> 时间：2012-06-28T01:14:04.767
> 
> 标签：android, media-player, recording, soundpool, audiotrack

intertubes 并没有提供太多关于此的信息。我有一个标准的声音池来播放各种样本。低延迟是必不可少的（对于任何提出不同方式的人来说）

我怎样才能开始录制声音池播放的内容，以便循环播放？

看来这可能是不可能的（根据[Android：Recording SoundPool output](https://stackoverflow.com/questions/3269854/android-recording-soundpool-output)），所以我会接受任何具有相同效果但低延迟是必须的答案。将同时播放多个流。

有什么建议么？

# c# - 如何使用我的 C# 应用程序重置我的 Arduino Mega2560？

> ID：11236884
> 
> 赞同：2
> 
> 时间：2012-06-28T01:14:59.790
> 
> 标签：c#, serial-port, arduino, reset

我注意到 Arduino IDE 在启动/退出时由内置的串行应用程序自动重置，原因是

> FT232RL 的其中一条硬件流控制线 (DTR) 通过 100 纳法电容连接到 ATmega1280 的复位线。当这条线被置位（拉低）时，复位线下降到足以复位芯片。

我注意到我的串行 C# 应用程序不会发生这种行为。我希望重置功能与我的 C# 应用程序一起使用。我没有做什么让我的 Arduino Mega 被我的 C# 应用程序重置？

**Arduino 和 C# 的工作代码：**

通过将一根电线从 PWM 端口 12 连接到 RESET 端口，我在大约 5 分钟内就让它工作了。在 Arduino 上，我检查了传入的 SerialEvent3 上的文本 RESET。找到 RESET 时，请执行以下操作：

```
pinMode(7, OUTPUT);  
digitalWrite(7, LOW); 
```

至于 C#，它很简单：

```
if (serialPort1.IsOpen)
{ 
    serialPort1.Write("RESET"); 
} 
```

重置似乎按预期工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T07:07:43.530

DTR 从 .NET SerialPort 类对我来说很好用。

只需设置属性：

```
port.DtrEnable = true; 
```

如果您在 WinForms 设计器中使用 SerialPort，我注意到不同的默认值，但`DtrEnable`实际上`true`（默认情况下）是从控制台应用程序使用它时。

# asp.net - 会话状态阻止并发处理的异步 ajax 调用

> ID：11236885
> 
> 赞同：4
> 
> 时间：2012-06-28T01:15:22.290
> 
> 标签：asp.net, session, jquery, pagemethods

我正在尝试在 document.ready 上一次对我的 .NET 页面方法进行 6 次异步 jQuery ajax 调用，以从数据库中请求不同的数据集，并以图表形式返回给用户。

问题是当一个图表需要很长时间生成时，它会锁定接下来 5 个图表的生成，例如，当每个图表需要 1 分钟生成时，用户将等待大约 6 分钟，而不是 1 - 2我认为在使用异步 ajax 调用和页面方法时会并行处理的分钟。

在阅读了这个论坛的很多有用的帖子后，我发现这是因为我必须在页面方法中读取和写入会话对象，而 asp.net 会锁定整个请求，从而使它们按顺序运行。

我看到有人建议在@Page 标签中将会话状态设置为只读，但这不会解决我的问题，因为我也需要写入会话。我考虑过从 inProc 会话转移到 sql 数据库会话，但是我的会话对象不可序列化并且在整个项目中使用。我也不能改为使用缓存，因为会话包含用户特定的详细信息。

任何人都可以帮助并指出正确的方向吗？我花了几天的时间来调查这个页面效率低下，但还没有找到一个好的方法。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:21:08.803

根据我的个人经验，切换到 SQL 会话不会解决这个问题，因为所有并发线程都会阻塞在 SQL 中，因为第一个线程将在数据库中的一个或多个行上持有排他锁。

我很好奇为什么您的会话对象不可序列化。我能想到的唯一解决方案是使用数据库表来存储您在会话中保持的用户特定数据，然后只要您需要更新用户数据，就只持有数据库锁。

您可以使用 ASP.NET 会话 ID 或其他唯一的 cookie 值作为数据库键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:59:07.457

问题可能根本不是服务器端。

浏览器对它们将发出多少并发 HTTP 请求有一个内置限制 - 这是 HTTP/1.1 规范的一部分，该规范建议限制为 2。

在 IE7 中限制为 2。在 IE8 中为 6。但是当页面加载时，由于对 CSS、JS、图像等的并发请求，您很容易达到 6。

关于这些限制的一个很好的信息来源是[BrowserScope](http://www.browserscope.org/?category=network)（请参阅每个主机名列的连接数）。

将这 6 个请求合并为 1 个请求怎么样？这也会加载得更快一些。

# c++ - 使用 g++ 编译时如何禁用候选信息？

> ID：11236890
> 
> 赞同：1
> 
> 时间：2012-06-28T01:15:53.047
> 
> 标签：c++, g++, candidate

我的编译器错误非常长，因为 g++ 告诉我我使用错误的函数的许多“候选人”。我能做些什么？

```
server.cpp:78:51: note: candidates are:
/usr/include/boost/asio/buffer.hpp:599:26: note: boost::asio::mutable_buffers_1  boost::asio::buffer(const boost::asio::mutable_buffer&)
/usr/include/boost/asio/buffer.hpp:599:26: note:   candidate expects 1 argument, 2 provided
... 30 lines of error for one wrong line of code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T01:37:15.443

C++ 是一种优秀的重量级编程语言，但没有人想出如何让它发出可读的错误消息。恐怕您提到的错误消息很复杂，因为从编译器的角度来看，*错误*很复杂。如果您花时间仔细阅读该信息，并想一想，您可能会开始理解为什么必须如此。

让我们分解您的错误消息：

```
server.cpp:78:51: note: candidates are: 
```

这意味着错误似乎起源于*server.cpp 的第 78 行（或者是第 51 行？）。* 但是，编译器认为这是错误的原因是在 Boost 标头*asio/buffer.hpp 中找到的。* 检查该标头可能是徒劳的，因为标头可能既复杂又正确。尽管如此，错误消息的下一行从 Boost 标头中提取了您需要的信息：

```
note: boost::asio::mutable_buffers_1  boost::asio::buffer(const boost::asio::mutable_buffer&) 
```

所以，回到*server.cpp 的第 78 行，*你调用了`boost::asio::buffer()`，对吗？作为括号之间的参数，该函数需要一个类型为 的对象`boost::asio::mutable_buffer`。你给了一个吗？如果是，你确定吗？显然，出于某种原因，编译器不会将您的参数识别为具有正确的类型。

现在让我们看一下错误的第三行：

```
note:   candidate expects 1 argument, 2 provided 
```

所以，实际上，回到*server.cpp 的第 78 行，*你给`boost::asio::buffer()`. 也就是说，你调用`boost::asio::buffer(x, y)`了而不是`boost::asio::buffer(x)`-- 或者，如果你没有调用，编译器会认为你调用了。

跟踪这些步骤。他们应该解决你的问题。

有关信息，我经常收到占满一半或更多屏幕的 C++ 错误消息。我不像你那样喜欢它们，但我确实理解编译器为什么会发出它们。当库功能被滥用时，C++ 强大的模板工具尤其会产生一些相当严重的错误消息。这是语言的本质。如果一个人会用 C++ 编程，那么除了让自己适应这种性质外，几乎什么都做不了。

# javascript - 从站点根目录之外的目录动态加载图片

> ID：11236899
> 
> 赞同：1
> 
> 时间：2012-06-28T01:17:20.450
> 
> 标签：javascript, jquery

我将所有用户上传的图片都放在我网站公共根目录之外的目录中。我需要使用javascript从这个目录中动态提取图片，但显然我不能，因为用户只能看到公共目录。我已经坚持了一段时间，我想不出解决方案。我听说 jQuery.load() 可能会开始使用，但我不确定如何使用它。任何提示都会很棒。

~谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:26:38.957

这样做的唯一方法是使用服务器端代码。Javascript 是客户端代码，不能访问服务器的 html 根目录之外的任何内容。

# certificate - 如何解码自签名证书

> ID：11236903
> 
> 赞同：2
> 
> 时间：2012-06-28T01:17:46.840
> 
> 标签：certificate, public-key

在创建公私钥对和证书时，通常我们看到的证书是这样的：

```
 -----BEGIN CERTIFICATE-----
        XXX
        XXX
        ...
        XXX
        -----END CERTIFICATE----- 
```

如果我理解正确，证书应该包含很多信息，如颁发者、时间、算法、公钥等。

谁能告诉我浏览器如何解码这个证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:30:42.040

大多数编程语言都具有执行此操作的功能，或者您可以使用 OpenSSL 命令行实用程序。

例如，在 PHP 中，您可以使用[openssl_x509_parse()](http://www.php.net/manual/en/function.openssl-x509-parse.php)函数，

这是用于获取证书信息[的 OpenSSL 命令列表。](http://www.madboa.com/geek/openssl/#cert-exam)大多数编程语言都允许您调用系统命令，例如 openssl。

这是删除页面时的链接信息：

```
# Using the -text option will give you the full breadth of information.
openssl x509 -text -in cert.pem

# who issued the cert?
openssl x509 -noout -in cert.pem -issuer

# to whom was it issued?
openssl x509 -noout -in cert.pem -subject

# for what dates is it valid?
openssl x509 -noout -in cert.pem -dates

# the above, all at once
openssl x509 -noout -in cert.pem -issuer -subject -dates

# what is its hash value?
openssl x509 -noout -in cert.pem -hash

# what is its MD5 fingerprint?
openssl x509 -noout -in cert.pem -fingerprint 
```

这是在 PayPal API 公钥上运行时 -text full info 选项的输出：

```
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 0 (0x0)
        Signature Algorithm: sha1WithRSAEncryption
        Issuer: C=US, ST=CA, L=Mountain View, O=PayPal Inc., OU=live_certs, CN=live_api/emailAddress=re@paypal.com
        Validity
            Not Before: Feb 13 10:13:15 2004 GMT
            Not After : Feb 13 10:13:15 2035 GMT
        Subject: C=US, ST=CA, L=Mountain View, O=PayPal Inc., OU=live_certs, CN=live_api/emailAddress=re@paypal.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            RSA Public Key: (1024 bit)
                Modulus (1024 bit):
                    00:c1:47:4e:dd:fc:44:cc:4b:5c:9c:8e:d9:29:92:
                    f8:d7:65:ef:64:fb:a0:a2:78:bb:8b:b0:fb:a6:b0:
                    9e:d0:0b:5a:1d:37:3d:ec:26:20:9b:b3:6c:02:d2:
                    72:c4:d2:e2:c6:68:4b:57:ca:72:20:46:a2:1d:75:
                    80:87:c7:cf:29:6f:91:d3:5e:fe:12:65:eb:af:d1:
                    1a:aa:e3:e6:b1:5b:d3:cb:00:00:13:53:cc:34:e2:
                    aa:a3:69:25:e0:6c:62:cf:dc:d9:a8:86:a3:3a:6d:
                    5f:64:65:9c:19:2d:1f:e4:94:36:90:1a:8d:6e:f6:
                    e0:db:f6:5a:f8:62:7f:ab:05
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Subject Key Identifier:
                96:9F:7C:BB:C6:6F:17:BD:59:3F:52:D7:0A:1B:EC:10:D6:64:94:6B
            X509v3 Authority Key Identifier:
                keyid:96:9F:7C:BB:C6:6F:17:BD:59:3F:52:D7:0A:1B:EC:10:D6:64:94:6B
                DirName:/C=US/ST=CA/L=Mountain View/O=PayPal Inc./OU=live_certs/CN=live_api/emailAddress=re@paypal.com
                serial:00

            X509v3 Basic Constraints:
                CA:TRUE
    Signature Algorithm: sha1WithRSAEncryption
        81:5f:3a:56:9a:80:5a:e5:ef:5f:a3:ab:a3:8a:89:d6:d6:15:
        21:3e:43:81:6a:44:eb:dd:80:83:8d:b6:1f:bc:91:22:bf:fd:
        8f:f8:8a:1b:84:e1:89:af:ce:7e:5c:78:4d:d2:fe:20:52:41:
        03:23:ca:f6:fe:b3:64:d6:6d:06:03:c1:ca:75:db:d3:8f:21:
        b0:fd:7a:97:6b:e2:d2:4e:50:d8:92:a2:3c:3b:04:7c:18:46:
        23:e1:e7:c4:b5:c4:69:45:80:71:57:c2:b1:01:6f:77:60:35:
        b3:14:6b:eb:b8:a9:e7:2d:b0:c0:17:a5:51:e7:0f:dc:08:c9:
        f9:87
-----BEGIN CERTIFICATE-----
MIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMx
CzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQ
YXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9h
cGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1
WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYw
FAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEG
A1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0B
CQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFH
Tt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZo
S1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c
2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0O
BBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9
WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0Ex
FjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMw
EQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3
DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEB
BQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE
4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwY
RiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmH
-----END CERTIFICATE----- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:15:39.870

回答我自己的问题：它只是一个 Base64 编码。

# php - 从 mysql 查询中回显字符串 - PHP

> ID：11236905
> 
> 赞同：0
> 
> 时间：2012-06-28T01:17:57.873
> 
> 标签：php, mysql

如何从 MySQL 查询中回显一个简单的字符串？

我正在尝试使用以下代码来完成此操作，但它不起作用......我提取的数据很好，所以我知道我的 mysql_query 正在工作（我已经通过不同的 URL GET 方法进行了检查。

```
<?php
$myQuery = mysql_query("fetch some stuff....");
$myResult = mysql_fetch_object($myQuery);
echo $myResult; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:19:36.250

首先`var_dump($myResult)`用于查看数据及其结构。

由于它是一个对象，它将具有命名为`SELECT`您使用的语句返回的列的属性。

```
echo $myResult->column_name; // Should work fine 
```

通常，如果`echo $variable;`不起作用，则意味着该变量要么是空字符串`''`，要么是空值`NULL`或假值`FALSE`，在回显时都显示“无”。

但是`var_dump()`在它们上使用时，您会得到一份关于数据类型和大小的报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T03:56:13.360

您需要知道返回的类型。在您所做的事情中，您假设它是可打印的，但大多数 db 查询返回的都是对象形式或数组

尝试做一个

```
echo "<pre>" ,print_r($myResult, TRUE),"</pre>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T01:20:16.593

如果您的查询是正确的，看起来您的 php 标签不正确：

```
<?php  ?> 
```

PS如果您发布实际查询可能会有所帮助，以便可以在此处进行故障排除。如果您不显示任何内容，很难问为什么某些东西不起作用并得到答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T02:52:22.653

首先，`var_dump($myResult);`。如果您看到`NULL`，则您的查询失败。如果您看到一大块乱七八糟的文本，则查询实际上是有效的。由于您正在回显`$myResult`，因此没有任何内容被输出也就不足为奇了，因为您正试图直接回显对象而不是您想要的属性。尝试回显`$myResult->myColumn;`

另外，请使用 MySQLi 或 PDO，因为不推荐使用 php_mysql。

# ios - iOS 应用程序和数据库服务器之间有哪些不同的通信方式？

> ID：11236906
> 
> 赞同：1
> 
> 时间：2012-06-28T01:18:09.117
> 
> 标签：ios, xml, database, json, web-services

我刚开始玩 iOS 和 Web 服务。我正在编写一个测试应用程序（我的图书收藏），用户应该能够在其中注册、登录然后添加图书（姓名、作者、价格、版本等），并且所有数据都应该存储在数据库服务器中。我有什么选择来实现这个功能？

我有编程经验，但我对 iOS 和 Web 服务非常陌生。谢谢！

![在此处输入图像描述](../Images/dfed6b074b32fb798571b99c451ebcd5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:23:33.940

最佳实践是拥有一个 Web 应用程序中介。我们使用 php 来处理来自 ios 应用程序的查询并管理数据库。我们使用轻量级的 xml 进行 ios - php 通信，有时还会添加加密。您还可以添加数据压缩以保持较低的数据使用率。

# c# - C# 将不同类型的数据保存在列表中

> ID：11236907
> 
> 赞同：1
> 
> 时间：2012-06-28T01:18:15.713
> 
> 标签：c#, printing

我有几个数据，如姓名、身份证、年龄、地址、电话。每次用户输入数据时，它都会保存到`List<>`. 我正在使用`List<>`每个数据。有没有其他选项我只能使用一个`List<>`. 哪个可以保存所有数据？

这是我的代码。

```
List<String> list1 = new List<String>();
                list1.Add(name);
List<String> list2 = new List<String>();
                list2.Add(ID);
List<String> list3 = new List<String>();
                list3.Add(age);
List<String> list4 = new List<String>();
                list4.Add(address);
List<String> list5 = new List<String>();
                list5.Add(phone);

for (int a = 0; a < list.Count; a++) // Loop through List with for
{                        
    listBox1.Items.Add(list1[i]);
}
for (int a = 0; a < list.Count; a++) // Loop through List with for
{                        
    listBox2.Items.Add(list2[i]);
}
for (int a = 0; a < list.Count; a++) // Loop through List with for
{                        
    listBox3.Items.Add(list3[i]);
}
for (int a = 0; a < list.Count; a++) // Loop through List with for
{                        
    listBox4.Items.Add(list4[i]);
}
for (int a = 0; a < list.Count; a++) // Loop through List with for
{                        
    listBox5.Items.Add(list5[i]);
} 
```

我还想过使用列表框来打印数据。我的另一种选择是仅在一个列表框中打印出所有数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T01:24:46.843

当然，声明一个这样的类......

```
public class Person
{
    public Guid   ID      { get; set; }
    public string Name    { get; set; }
    public int    Age     { get; set; }
    public string Address { get; set; }
    public string Phone   { get; set; }
} 
```

并像这样使用它..

```
List<Person> personList = new List<Person>();
personList.Add(new Person { Name    = "Max", 
                            ID      = Guid.NewGuid, 
                            Address = "Unicorn Lane, Unicorn World", 
                            Age     = 26, 
                            Phone   = "123456" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:21:54.517

为什么不使用这些字段创建一个对象（类）。然后你可以创建一个“用户”对象数组。

每当传递数据时，您只需创建对象的新实例，然后将其添加到数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:40:12.710

There is one other option that you can use with the latest versions of C# if you hate to create a class for it. Use a Tuple.

```
var mylist = new List<Tuple<Guid,string,int,string, string>>();
myList.Add(new Tuple<Guid,string,int, string, string>(Guid.New(), "name", 18, "123    street", "1231231234")); 
```

Later on, you can access it as

```
var firstId = myList[0].Item1;
var firstName = myList[0].Item2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T01:23:39.677

您可以使用人员对象，设置人员的属性并将人员添加到列表中

```
List<Person> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T01:28:22.860

创建一个**类**是您问题的最佳解决方案，使用`List<YourClass>`.

# c++ - 将 curses 库添加到 Visual Studio C++？

> ID：11236908
> 
> 赞同：4
> 
> 时间：2012-06-28T01:18:25.463
> 
> 标签：c++, visual-studio-2010, ncurses

我正在尝试在 Microsoft 的 Visual Studio C++ 上使用 curses 库。[我从http://www.gnu.org/software/ncurses/](http://www.gnu.org/software/ncurses/)下载了 ncurses-5.9.tar.gz ，然后解压缩了文件。但是，我在包中找不到 .lib 或 .dll 文件。如果没有 .lib 文件，我不知道如何将 Visual Studio 中的代码链接到 ncurses 包中的头文件。我是否需要将头文件移动到项目中的某个位置？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T01:48:03.830

简而言之：您想要 Bill Gray 的[PDCurses](https://github.com/Bill-Gray/PDCurses)。那个叉子很活跃。“原始”实现在 [Bill McBrine 的 repo](https://github.com/wmcbrine/PDCurses)中，正在进行一些活动。遗憾的是，这两个项目似乎出现了分歧。前者实现了原生的 Win32a GDI 终端窗口，而后者只支持原生的 Windows 控制台。

你所做的根本不是如何使用诅咒。您下载的是源代码，那里根本没有二进制文件——任何架构都没有 .lib 或 .dll 文件。不仅如此，源代码也不能直接编译——如果你将它添加到 C/C++ 项目中，即使在 Unix 机器上，它也不会编译。

为了编译，curses 需要`configure`运行一个脚本，它会生成一些文件，可能是`config.h`，可能是其他源文件和 makefile。

唉，所有这些都是一个有争议的问题，因为 curses 是 AFAIK 一个真正依赖于 Unix API 存在的 Unix 库。任何 Windows 端口都是完全独立的工作。

另请参阅[ncurses 是否可用于 Windows？](https://stackoverflow.com/questions/138153/is-ncurses-available-for-windows).

# coldfusion - 在 ColdFusion 中使用 QoQ 按长度对查询对象中的列进行排序？

> ID：11236921
> 
> 赞同：4
> 
> 时间：2012-06-28T01:19:46.933
> 
> 标签：coldfusion, qoq

是否可以使用 ColdFusion 中的查询查询按 varchar 列的长度对查询对象进行排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T01:47:41.097

没有办法完全用 QoQ 做到这一点，不：[QoQ 实现](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0e4fd-7ff0.html)不提供`len()`函数。相反，您可以让数据库为您提供长度数据。

在原始查询中添加：

```
len(fieldYouNed) as fieldYouNedLen 
```

然后在 QoQ 中使用：

```
SELECT * FROM query ORDER BY fieldYouNedLen 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T03:48:51.830

在 Coldfusion 10 中，您可以像这样使用 Underscore.cfc[库](http://russplaysguitar.github.com/UnderscoreCF/#sortBy)的 sortBy() 函数：

```
sortedQuery = _.sortBy(queryObject, function(row) {
   return len(row.column);
}); 
```

（免责声明：我创建了这个库）

# variables - Date 变量类型的默认值是否有 const，字符串类型是否有 la vbNullString？

> ID：11236929
> 
> 赞同：2
> 
> 时间：2012-06-28T01:21:10.973
> 
> 标签：variables, date, excel, default-value, vba

我有一列日期。这些将与行中的其他数据一起合并到对象中，每行一个。

但是，日期列中的某些单元格是空的。在测试时，我创建了一个日期变量并将其值设置为空单元格的值。我将日期的新值添加到 msgbox 中，发现它是“12:00 AM”。VBA 中是否有一个常量来表示这个值，所以我可以做类似的测试：

```
If myDate = vbNullDate Then 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T11:50:29.527

我不时遇到这个问题。我通常执行以下操作：

```
dim d as date
if d = cdate(0) then msgbox "Default value" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:19:08.880

本地 Date 变量的默认值似乎是：

`Saturday, December 30, 1899 12:00:00 AM`

基于此程序：

```
Sub testdate()

Dim d As Date

Debug.Print Format$(d, "Long Date") & " " & Format$(d, "Long Time")

End Sub 
```

要检查任何变量类型的默认值，只需声明该类型的变量，然后打印它的值。

```
Sub testint()

Dim d As Integer

Debug.Print d

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T06:02:19.577

正如 andy holaday 在问题下方的评论中所说，日期的默认值只是 0。愚蠢的我：/

# php - 使用基于 PHP XML 的 Web API 的 iOS 应用程序

> ID：11236934
> 
> 赞同：1
> 
> 时间：2012-06-28T01:22:42.237
> 
> 标签：php, objective-c, ios, xml, xcode

我对 iOS 开发相当陌生，并尝试制作一个与 PHP API 通信的简单应用程序。数据请求和响应将仅采用 XML 格式。

这是我的 php 登录方法，

```
function login()
{
    $mainframe = JFactory::getApplication();

    $xmlcnt = array();

    if (!isset($HTTP_RAW_POST_DATA))
    {
        $HTTP_RAW_POST_DATA = file_get_contents("php://input");
    }

    if(empty($HTTP_RAW_POST_DATA))
    {
        $xmlcnt['code'] = "2";
        return $xmlcnt;
    }

    $doc = new DOMDocument();

    $doc->loadXML( $HTTP_RAW_POST_DATA);

    $login_data = $doc->getElementsByTagName( "data" );

    foreach( $login_data as $login )
    {
        $user_nm = $login->getElementsByTagName( "username" );
        $user_nm = $user_nm->item(0)->nodeValue;

        $password = $login->getElementsByTagName( "password" );
        $password = $password->item(0)->nodeValue;

    } ...... 
```

和 xmldata 看起来像这样“ `<data><username>testuser</username><password>password</password></data>`”

我想了解我应该如何/应该在 xcode Objective-c 中使用什么来有效地发送和接收 XML。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:57:25.597

你可以检查一个 XML 解析器，这里有一些例子：[http ://cocoawithlove.com/2011/05/classes-for-fetching-and-parsing-xml-or.html](http://cocoawithlove.com/2011/05/classes-for-fetching-and-parsing-xml-or.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:28:53.817

如果您询问要使用哪个 xml 解析器，编写自己的解析器应该对性能有很大帮助。我们通常会添加数据压缩以保持较低的数据传输大小。我们使用简单的 zip 库，也需要加密。如果数据量很大，压缩将有很大帮助

# typo3 - TYPO3 - 服务器重启后的 PHP 错误

> ID：11236938
> 
> 赞同：0
> 
> 时间：2012-06-28T01:23:15.510
> 
> 标签：typo3, restart, php

我们不得不重新启动一个有 TYPO3 站点的服务器。我们没有对任何 TYPO3 文件本身的数据库进行任何更改，只是标准的重新启动。问题是现在服务器正在喷出 php 错误。我想强调的是，没有进行任何服务器配置更改。

我们的错误日志示例：

```
[Wed Jun 27 23:55:19 2012] [error] [client ****************] PHP Strict Standards:  
Declaration of tx_commerce_db_article::get_attributes() should be compatible with tx_commerce_db_alib::get_attributes($uid, $attribute_corelation_type_list = '') 
in /var/www/html/***********/class.tx_commerce_db_article.php on line 63 
```

任何人都知道什么可能导致 typ03 在客厅地毯上存钱？

服务器将接受请求，但不会显示管理页面和主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:28:25.310

有人在服务器上将 PHP 更新到 5.4 版。只有 git 存储库中的最新开发版本包含对显式排除的显示错误模式的修复`E_STRICT`。

看看这个问题和相应的补丁： http: [//forge.typo3.org/issues/35154](http://forge.typo3.org/issues/35154)

# linux - Bash Loops：如何执行一次，然后移动到下一次迭代

> ID：11236941
> 
> 赞同：0
> 
> 时间：2012-06-28T01:23:34.283
> 
> 标签：linux, bash

我从来没有真正需要这样做的实例，但我在这里......

我（不幸的是）得到的是 netstat -nr 的输出（几乎 6000 个单独的静态路由）。

我需要获取该文件，并在完成此操作后最终将每一行转换为新的“ip route add”命令。

这是我的失败代码（底部的回声用于测试->一旦可行，我想将它们替换为 ip route add ）：

```
num=`cat $logfile | wc -l`
echo $num
echo " "
for ((i=0; i<=$num; i++))
do

dst=$(awk '{print$1}' $logfile)
gw=$(awk '{print$2}' $logfile)
mask=$(awk '{print$3}' $logfile)
echo $dst
echo $gw
echo $mask
echo " "
done 
```

输出，而不是看起来像：目标网关网络掩码看起来像：

目的地 目的地 目的地

网关 网关 网关

网络掩码 网络掩码 网络掩码 网络掩码

如何使它每次运行时，每个输出都是一个可以输入命令的 DST/GW/网络掩码？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T01:34:43.307

你的循环是由内而外的。您的 awk 命令每次都处理整个文件，然后就完成了。

如果您需要变量中的值，请将几乎所有脚本替换为：

```
#!/bin/bash
while read -r dst gw mask _
do
    echo "$dst $gw $mask"    # substitute your command here
done < "$logfile" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:29:44.953

答案在于 AWK：

```
awk '{print "echo",$1,$2,$3}' $logfile | sh -x 
```

现在将 echo 替换为您需要运行的任何命令

# asp.net-mvc-3 - MVC3 MapRoute 将 aspx 查询参数转换为路由

> ID：11236944
> 
> 赞同：1
> 
> 时间：2012-06-28T01:24:15.653
> 
> 标签：asp.net-mvc-3, url-rewriting, url-routing, asp.net-mvc-routing

我正在开发一个将 aspx 网站重写为 MVC3 的项目。我想让旧网址在新网站上工作。我已经命名了我的控制器和操作，以便 URL 实际上在查询字符串中包含足够的信息以正确路由，但我无法让路由正常工作，因为它不喜欢 ? 在网址中。

基本上我有这样的旧网址：

```
www.example.com/Something/SomethingElse/MyPage.aspx?Section=DetailSection&TaskId=abcdef 
```

我尝试使用以下方法创建路线：

```
routes.MapRoute(
    "OldSite",
    "Something/SomethingElse/MyPage.aspx?Section={action}Section&Id={id}", 
    new { controller = "Task", action = "Index", id = UrlParameter.Optional }
); 
```

我希望它路由到正确的新 URL，即：

```
www.example.com/Task/Detail/abcdef 
```

我知道 MyPage.aspx 页面的所有流量都应该流向我的新任务控制器，并且 Section 参数的开头始终与该控制器上的几个相应操作之一匹配。

不幸的是，我发现我收到一条路线不能包含问号的错误。我该如何处理？使用 URL 重写会更好吗？因为这是一个私人网站，所以我不关心返回永久重定向或任何东西 - 无论如何，没有搜索引擎会链接到该网站。我只是想确保在旧电子邮件中有 URL 的客户能够访问新站点中的正确页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T05:58:46.227

在这种情况下，我认为最简单的方法是将旧页面映射到路由：

```
routes.MapRoute(
    "MyPage",
    "Something/SomethingElse/MyPage.aspx", 
    new { controller = "Task", action = "MyPageHandler" }
); 
```

并将此路由映射到 TaskController 中的操作方法：

```
public ActionResult MyPageHandler(string section, string taskId)
{
    if (section.Contains("Detail"))
    {
        // execute section
    }
} 
```

这样，您就可以处理旧站点的查询字符串：查询字符串。将这些参数直接传递给操作方法是解释旧站点的最符合 MVC 的方式。

# android - 与片段通信的视图

> ID：11236946
> 
> 赞同：0
> 
> 时间：2012-06-28T01:24:45.377
> 
> 标签：android, android-fragments, android-view

我正在尝试制作数独应用程序。这是一个基于片段的设计，其中一个片段承载了一个自定义视图，它是一个板。我正在尝试学习如何在 FragmentActivity、Fragment 和 View 中建立有效的沟通

虽然视图是使用 FragmentActivity 上下文创建的，并且我可以在当前视图中捕获对该上下文的引用，然后在 FragmentActivity 中调用方法，但我不想将视图直接绑定到片段活动。相反，我想绑定视图以使用片段内的方法。我该怎么做，我可以捕获对片段的引用并从视图中调用该片段内的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:55:33.657

首先，我*强烈*建议您通读有关[`Fragment`s](http://developer.android.com/guide/components/fragments.html)的文档，因为您显然一开始并不了解使用`Fragment`s 的整个概念/目的（这没关系，因为在您第一次学习它们时会感到困惑：P）。

你的很多问题对我来说没有多大意义，因为我不确定`View`你所说的指的是什么。我可以告诉你的是，`Fragment`s 有自己的 UI/布局，以及自己独立的生命周期。所以听起来您根本不希望您`FragmentActivity`与`Fragment`s 布局/方法进行交互......相反，您应该在其内部实现 UI 的行为和布局`Fragment`。也就是说，`Fragment`将负责更新 UI、接收点击/触摸事件、在屏幕上显示信息等。`FragmentActivity`将简单地持有对当前的引用`Fragment`，并将负责显示/切换和根据需要输出 new `Fragment`（通过活动的`FragmentManager`）。

希望能在某种程度上回答这个问题......通读文档几次，听起来你只是误解了`Fragment`s 背后的理论/目的。

# android - Android：Sqlite - 将值从一个表移动到另一个表

> ID：11236947
> 
> 赞同：1
> 
> 时间：2012-06-28T01:24:46.353
> 
> 标签：android, sqlite

我正在尝试根据一个值在一个表 (DATABASE_FAV_EQUIP_TABLE) 中搜索信息，提取该信息，然后将其放入另一个表 (DATABASE_EQUIP_TABLE) - 首先检查它是否不存在。我的代码如下。什么都没有崩溃，我也没有收到任何错误，但是没有信息被放入第二个表（DATABASE_EQUIP_TABLE）。我已经检查了好几次，无法弄清楚为什么这不起作用。

```
//takes all equip data from saved equip set, and puts into equip table
public String AddSavedEquipToEquipTable(String name) {

    String[] columns = new String[]{KEY_EQUIP};
    Cursor c = ourDatabase.query(DATABASE_FAV_EQUIP_TABLE, columns, KEY_FAVNAME + "='" + name + "'", null, null, null, null);

    if (c == null){
        return null;
    }
    else if(c != null && c.moveToFirst()) {
        do {

            int iEquip = c.getColumnIndex(KEY_EQUIP);
            String equip = c.getString(iEquip);

            CheckEquipTable(equip);

            c.moveToNext();

            } while (KEY_FAVNAME == name);
        }

    return null;
}

public void CheckEquipTable(String equip){

    String[] columns = new String[]{KEY_EQUIP};
    ContentValues cv = new ContentValues();
    Cursor check = ourDatabase.query(DATABASE_EQUIP_TABLE, columns, KEY_EQUIP + "='" + equip + "'", null, null, null, null);

    if(check == null){              
        cv.put(KEY_EQUIP, equip);
        ourDatabase.insert(DATABASE_EQUIP_TABLE, null, cv);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:46:03.937

尝试这个：

```
public void AddSavedEquipToEquipTable(String name) {
    String[] columns = new String[]{KEY_EQUIP};
    Cursor c = ourDatabase.query(DATABASE_FAV_EQUIP_TABLE, columns, KEY_FAVNAME + "='" + name + "'", null, null, null, null);

    int iEquip = c.getColumnIndex(KEY_EQUIP);
    while(c.moveToNext())
        CheckEquipTable(c.getString(iEquip));
} 
```

我将解释一些变化：

*   的列索引`KEY_EQUIP`不会改变，所以我们只需要检索一次索引
*   在 Java 中，您**必须**将 Strings 与`if(name.equals(KEY_FAVNAME))`not进行比较`==`，`(KEY_FAVNAME == name)`这可能是错误的。
*   `ourDatabase.query()`永远不会返回 null，最小的结果将是一个空的 Cursor（如`cursor.getCount() == 0`）
*   `cursor.moveToNext()`返回 true / false，并且当索引为 -1 时 moveToNext() 与 moveToFirst() 相同。此外，如果 Cursor 为空，则 moveToNext() 返回 false。

对于我的建议，请不要犹豫任何其他问题。希望有帮助！

**添加**

我没有注意到 CheckEquipTable() 第一次检查 Cursor 是否为空：

```
if(check == null){ 
```

像这样改变它：

```
if(check.getCount() == 0){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:12:43.800

Um, you should be able to do this solely in sqlite. I can help more if I had the table names / columns, but you would basically do a query like this.

```
INSERT INTO SomeTable(C, D)
SELECT A, B
FROM OtherTable
WHERE NOT EXISTS (
    SELECT 1
    FROM SomeTable 
    WHERE A = C AND B = D 
) 
```

# python - R和Python之间的输出值不同？

> ID：11236951
> 
> 赞同：7
> 
> 时间：2012-06-28T01:25:03.983
> 
> 标签：python, r, debugging, numpy, statistics

也许我在对数组进行[z 归一化](http://en.wikipedia.org/wiki/Standard_score)时做错了。有人可以看看这个并建议发生了什么吗？

**在 R 中：**

```
> data <- c(2.02, 2.33, 2.99, 6.85, 9.20, 8.80, 7.50, 6.00, 5.85, 3.85, 4.85, 3.85, 2.22, 1.45, 1.34)
> data.mean <- mean(data)
> data.sd <- sqrt(var(data))
> data.norm <- (data - data.mean) / data.sd
> print(data.norm)
 [1] -0.9796808 -0.8622706 -0.6123005  0.8496459  1.7396910  1.5881940  1.0958286  0.5277147  0.4709033 -0.2865819
[11]  0.0921607 -0.2865819 -0.9039323 -1.1955641 -1.2372258 
```

**在 Python 中使用 numpy：**

```
>>> import string
>>> import numpy as np
>>> from scipy.stats import norm
>>> data = np.array([np.array([2.02, 2.33, 2.99, 6.85, 9.20, 8.80, 7.50, 6.00, 5.85, 3.85, 4.85, 3.85, 2.22, 1.45, 1.34])])
>>> data -= np.split(np.mean(data, axis=1), data.shape[0])
>>> data *= np.split(1.0/data.std(axis=1), data.shape[0])
>>> print data

[[-1.01406602 -0.89253491 -0.63379126  0.87946705  1.80075126  1.64393692
   1.13429034  0.54623659  0.48743122 -0.29664045  0.09539539 -0.29664045
  -0.93565885 -1.23752644 -1.28065039]] 
```

我使用`numpy`不正确吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T01:42:09.120

您得到不同结果的原因与标准差/方差的计算方式有关。R 使用 denominator 计算`N-1`，而 numpy 使用 denominator 计算`N`。您可以通过 using 得到一个等于 R 结果的 numpy 结果`data.std(ddof=1)`，它告诉 numpy`N-1`在计算方差时用作分母。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-28T01:31:49.347

我相信你的 NumPy 结果是正确的。不过，我会以更简单的方式进行标准化：

```
>>> data = np.array([2.02, 2.33, 2.99, 6.85, 9.20, 8.80, 7.50, 6.00, 5.85, 3.85, 4.85, 3.85, 2.22, 1.45, 1.34])
>>> data -= data.mean()
>>> data /= data.std()
>>> data
array([-1.01406602, -0.89253491, -0.63379126,  0.87946705,  1.80075126,
        1.64393692,  1.13429034,  0.54623659,  0.48743122, -0.29664045,
        0.09539539, -0.29664045, -0.93565885, -1.23752644, -1.28065039]) 
```

您的两个结果之间的区别在于标准化：`r`作为 R 结果：

```
>>> r / data
array([ 0.96609173,  0.96609173,  0.96609173,  0.96609179,  0.96609179, 0.96609181,  0.9660918 ,  0.96609181,
        0.96609179,  0.96609179,        0.9660918 ,  0.96609179,  0.96609175,  0.96609176,  0.96609177]) 
```

因此，您的两个结果大多只是彼此成比例。因此，您可能想要比较使用 R 和 Python 获得的标准偏差。

**PS**：现在我正在考虑它，可能是 NumPy 和 R 中的方差没有以相同的方式定义：对于`N`元素，一些工具在计算方差时使用`N-1`而不是 进行归一化。`N`你可能想检查一下。

**PPS**：**这是差异的原因**：因子的差异来自两个不同的归一化约定：观察到的因子只是 sqrt(14/15) = 0.9660917…（因为数据有 15 个元素）。因此，为了在 R 中获得与在 Python 中相同的结果，您需要将 R 结果除以该因子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-11T03:45:14.157

除以 N-1，如在 R 中，给出方差的[无偏估计](https://en.wikipedia.org/wiki/Unbiased_estimation_of_standard_deviation)；一般来说，人们需要一个无偏的估计。Numpy 实现不正确。

# python - python多线程ssh应用程序

> ID：11236952
> 
> 赞同：0
> 
> 时间：2012-06-28T01:25:06.310
> 
> 标签：python, multithreading, python-multithreading, command-line-tool

我有一个应用程序，我拼凑在一起尝试生成 3 个线程并同时通过 ssh 进入服务器。我写了一个明显带有冒犯性的编码应用程序，我知道这是错误的，我正在寻找一些指导，以完成我上面提到的最初的最终目标。

对于参数传递，我知道我需要稍后使用 cmd 或 cmd2 之类的东西来处理它，但现在这不是我主要关心的问题。

我知道现在我正在生成一个子进程并连续做事。我期待着您的回复。

```
#!/usr/bin/python
import sys, os
import subprocess

if (len(sys.argv) > 1):
    if( sys.argv[1] == 'start' ):
        print "starting jboss"
    arg = str(sys.argv[1])
    elif( sys.argv[1] == 'stop' ):
        print "stopping"
    elif( sys.argv[1] == 'status' ):
        print "getting status"
    arg = str(sys.argv[1])
    print arg
    else:
        print "start or stop?"
    exit(1)
else:
    print "unexpected error"

host = "10.24.14.10 "
command = "sudo /etc/init.d/jbossas " + arg 
fullcommand = "ssh " + " " +  host + " " + " " + command  + " "+ arg 

print "full command: ", fullcommand

process = subprocess.Popen(fullcommand, shell=True,
    stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
output,stderr = process.communicate()
status = process.poll()
print output

host = "10.24.14.20 "
fullcommand = "ssh " + " " +  host + " " + " " + command  + " "+ arg 

process = subprocess.Popen(fullcommand, shell=True,
    stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
output,stderr = process.communicate()
status = process.poll()
print output

host = "10.30.1.1 "
fullcommand = "ssh " + " " +  host + " " + " " + command  + " "+ arg 

process = subprocess.Popen(fullcommand, shell=True,
    stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
output,stderr = process.communicate()
status = process.poll()
print output 
```

# iphone - 搜索城市列表

> ID：11236954
> 
> 赞同：5
> 
> 时间：2012-06-28T01:25:29.477
> 
> 标签：iphone, ios, database, uitableview

谁能给我指出我应该如何做到这一点的正确方向：

![在此处输入图像描述](../Images/408e9a809e0305122e8e1cb3f433f4d7.png)

这个来自天气频道的示例显示了我想做的事情。我只想有一个表格视图，有人可以在其中搜索一个城市。我不确定从哪里获得这些资源以及如何获得这些资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:31:45.943

[您可以从MaxMind](http://www.maxmind.com/app/worldcities)找到世界城市列表。

是你要找的资源吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:40:26.830

创建表格视图和搜索栏。你必须实现他们的代表`UISearchBarDelegate,UITableViewDataSource,UITableViewDelegate`。

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar1
{

    searchBar.showsSearchResultsButton = YES;
    searchBar.showsCancelButton = YES;
    searchBar.autocorrectionType = UITextAutocorrectionTypeNo;
    // flush the previous search content
    //Implement some code
 }
- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar1
{

     searchBar.showsCancelButton = NO;
    searchBar.showsSearchResultsButton = NO;
}
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{

    if([searchText isEqualToString:@""]||searchText==nil){
        [yourTable reloadData];
        return;
    }
    NSInteger counter = 0;
    for(NSString *name in yourArray)
    {
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];
        NSRange r = [name rangeOfString:searchText options:NSCaseInsensitiveSearch];
      //  NSRange r = [name rangeOfString:searchText];
      //  NSRange r = [name  ];
        if(r.location != NSNotFound)
        {
           //Implement the code.
        }
        counter++;
        [pool release];
    }
    [yourTable reloadData];
}
- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar1
{

    // if a valid search was entered but the user wanted to cancel, bring back the main list content
    // Implement some code
    @try{
        [yourTable reloadData];
    }
    @catch(NSException *e){
    }
    [searchBar resignFirstResponder];
    searchBar.text = @"";
}
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar1
{

    [searchBar1 resignFirstResponder];
} 
```

我给了你不完整的方法，你可以实现你想做的事情。

我想这会对你有所帮助。

# java - 使用 Jar 文件关闭 Jar 文件

> ID：11236955
> 
> 赞同：0
> 
> 时间：2012-06-28T01:25:48.683
> 
> 标签：java, jar

在为程序编写更新程序时，我很快意识到必须关闭程序才能使更新程序正常工作。我记得很久以前，作为一个新程序员，我看到一段奇怪的代码可以编辑变量值或调用第二个 jar 文件中的类的方法。我想知道是否有人知道这样的代码。如果没有，我可以想出别的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:57:55.533

[这是我找到的代码](http://abondar-howto.blogspot.com/2010/06/howto-unload-jar-files-loaded-by.html)。它实现了相同的目标，只是目的不同。

# ruby - ruby 在哪里定义结构

> ID：11236957
> 
> 赞同：4
> 
> 时间：2012-06-28T01:26:55.900
> 
> 标签：ruby, struct, idioms

我知道我可以在 ruby​​ 中定义新结构

```
Person = Struct.new(:first_name, :last_name) 
```

我想知道定义这个结构（以及我将使用的其他结构）的合适位置是什么。`Person`将在整个系统中使用。在其他语言（如 Java）中，我通常会定义`Person`为另一个类，但是使用 Ruby 中的这个内联定义，在哪里定义它以便整个系统都可以使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T01:32:02.453

你真的可以在任何地方定义它。只要确保在需要的地方需要文件

**编辑** 如果你想要一些结构，最好有一个文件夹来定义你需要的结构和类，并在你的应用程序中需要该文件夹中的所有文件

# jquery - 单击关闭图像时获取jquery中的复选框值

> ID：11236961
> 
> 赞同：0
> 
> 时间：2012-06-28T01:27:17.700
> 
> 标签：jquery, jquery-ui

我知道这个问题很基础，但我是 JQuery 新手，无法解决这个问题。

当单击关闭按钮（即作为图像的“x”按钮）时，我想从模式窗口中获取复选框值。

任何帮助表示赞赏。谢谢..

我在 $(document).ready(function() 之后添加了以下代码，

```
$('img#closeImg').on('click', function(){
alert($('.popupContact input[type=checkbox]').val()); 
```

下面是html代码

```
 <div id="popupScreen">
    <div id="popupContact">  
    <form name="ReportParametersForm" name="ProcessActionForm" action="<portlet:actionURL>
            <portlet:param name='generateReportAction' value='generateReportAction'/>
            </portlet:actionURL>" method="post" onSubmit="return sendUserFeedback(doNotAsk)"> 
        <img src="<%= renderRequest.getContextPath() %>/NavigationClose.gif" id="closeImg" align="right" onclick="disablePopup()">
        <br/> 
        <p id="contactArea">  
            To help us improve our intranet pages, can you please tell us in about 12 words, what you are accessing this area of the intranet for?  
            <br/><br/>

            <table>
            <tr> 
            <td><input type="text" name="userInput" id="userInput" size="60" onfocus="this.value='';" value="I am trying to find..."/></td>
            <td><input type="submit" name="submitFeedback" value="Send feedback"> </td>
            </tr>
            </table>
            <br/><input type="checkbox" name="doNotAsk" class=""> Please do not ask me for this feedback again
            </form>
    </div>
    <div id="thankYou">  
     <img src="<%= renderRequest.getContextPath() %>/NavigationClose.gif" align="right" onclick="disableNow()">
     <form name="closingForm" name="closingForm"> 
            <h5>Thank you for providing feedback to help us improve Exchange</h5>
            <br/>
            <br/>
            <input type="button" name="Close" value="Close" onClick="disableNow()">
            </form>
    </div>
    <div id="backgroundPopup"></div> 
    <div id="mask"></div> 
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:31:49.763

```
$('img#x').on('click', function(){
    alert($('.modal input[type=checkbox]').first().val());
}); 
```

*   将事件附加到 id 的图像元素`x`。
*   单击时，处理程序会警告一段 HTML 中的复选框的值，其中包含一个名为 的类`modal`。

# algorithm - 查找所有形式的单词的最佳方法是什么？

> ID：11236962
> 
> 赞同：2
> 
> 时间：2012-06-28T01:27:50.743
> 
> 标签：algorithm, modifier

如果用户输入“look”一词的形式，例如“looked”或“looking”，我如何将其识别为动词 look 的修改版本？我想其他人之前已经遇到并解决了这个问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T01:53:41.330

这是一个相当复杂的问题的一部分，称为[Stemming](http://en.wikipedia.org/wiki/Stemming)

但是，如果您只想处理动词，那就更容易了。首先，您可以尝试简单的查找表方法，因为英语词汇量并不大。

如果您想要更高级的东西，请查看上面的 wiki 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:46:38.307

如果您正在寻找一个正则表达式，那么您正在寻找这样的东西`look.*?\b`来匹配外观、外观和外观

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T21:17:43.650

根据您的任务，WordNet 可以成为您此类事情的朋友。它不是词干分析器，但大多数词干词会返回您正在寻找的内容。如果您关心“外观”这个概念而不是词本身，它还提供同义词和许多其他信息。

# c++ - 内存管理的 C++ 单例

> ID：11236967
> 
> 赞同：1
> 
> 时间：2012-06-28T01:28:43.497
> 
> 标签：c++, memory, memory-management

我现在正在编写游戏引擎。对我来说最难的部分是内存管理。我一直在进行尽可能多的优化（因为每一帧都很重要，对吗？）并意识到解决这个问题的最佳方法是使用堆栈和池分配器进行资源管理。问题是，我不知道如何创建一个由这些分配器管理的内存的单例类。

我的单例是管理器，所以它们实际上相当大，它们的内存管理对于我的游戏的启动速度很重要。我基本上希望能够调用我的分配器的`alloc()`函数，它返回 type `void*`，并在这个分配的空间中创建我的单例。

我一直在考虑在每个单例类中`static boolean`调用一个，如果为真则让构造函数返回。这行得通吗？`instantiated``NULL``instantiated`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T01:37:57.073

这就是为什么每个人都认为单身人士很烂的原因。他们糟透了。这只是他们糟糕的一个方面，它会影响你的整个应用程序。

为了解决您的问题：不要使用 Suckleton。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:41:16.660

好的，所以我将通过分享我自己的经验来回答这个问题。通常我希望一个类拥有它自己的所有功能，然后意识到这可能需要一个工厂方法来为其他代码提供我的对象的一个​​实例，该实例是单数的。实例实际上应该只定义一次以维护状态等。因此，这就是我为没有将所有初始化包装到构造中的类所做的。我不想让我现有的类因单例而混乱，所以我创建了一个工厂包装类来帮助我解决这个问题。您可以使用 Myer 的单例模式，它很优雅，并通过让静态局部变量的实现（依赖于静态局部初始化的编译器实现，这并不总是一个好主意）来处理锁定，但如果你喜欢，问题就来了我，

```
class X
{
  public:

  bool isInitialized () { return _isInitialized; } ;  // or some method like 
                                                      // establishCxn to have it
                                                      // bootstrapped 
  void initialize();
  X() {} // constructor default, not initialized, light weight object

  private:
    bool _isInitialzied;

};

// set initialization to false 
X::X(): _isInitialized(false) {}

void X::intialize()
{
  if (isInitiazlied()) { return; }

   .... init code ....

  _isInitialized = true
}

// now we go ahead and put a factory wrapper on top of this to help manage the 
// singletoness nature.  This could be templatized but we don't as we want the 
// flexibility to override our own getinstance to call a specific initialize for the 
// object it is holding

class XFactory
{
public:

static X* getInstance();

private:
static boost::mutex _lock;

// light weight static object of yourself ( early instantiation ) to put on the stack 
// to avoid thread issues, static method member thread saftey, and DCLP pattern 
// threading races that can stem from compiling re-ordering of items

static XFactory _instance; 

// making this pointer volatile so that the compiler knows not to reorder our
// instructions for it ( depends on compiler implementation but it is a safe guard )
X* volatile _Xitem;  
X* getXitem () { return _Xitem; }

void createInstance();
void doCleanUp();

// stop instantiation or unwanted copies
XClientFactory();
~XClientFactory();
XClientFactory(XClientFactory const&);
XClientFactory& operator=(XClientFactory const&);

};

// on construction we create and set the pointer to a new light weight version of the 
// object we are interested in construction
XFactory::XFactory() : _Xitem( new X; )
{
}

// note our factory method is returning a pointer to X not itself (XFactory)
X* XFactory::getInstance()
{
// DCLP pattern, first thread might have initialized X while others
// were waiting for the lock in this way your double check locking is 
// on initializing the X container in the factory and not the factory object itself.  
// Worst case your initialization could happen more than once but it should check the 
// boolean before it starts (see initialization method above) and sets the boolean at 
// the end of it. Also your init should be such that a re-initialization will not put 
// the object in a bad state.  The most important thing to note is that we
// moved the double check locking to the contained object's initialization method
// instead of the factory object

  if (! XFactory::_instance.getXitem()->isInitialized() )
  {
    boost::unique_lock<boost::mutex> guard(XFactory::_lock);
    if (! XFactory::_instance.getXitem()->isInitialized() )
    {
      XFactory::_instance.getXitem()->initialize();
    }
  }
  return XFactory::_instance.getXitem();
}

// XFactory private static instance on the stack will get cleaned up and we need to 
// call the delete on the pointer we created for the _Xitem

XFactory::~XFactory()
{
  doCleanUp();
}
XFactory::doCleanUp()
{
  delete _Xitem; // 
} 
```

就是这样，让我知道你的想法。我最近还与单身人士摔跤，所有的坑都掉了。此外，我们还没有使用 0x 编译器，这将确保 Myers 单例将以线程安全的方式实现，只需使用局部静态变量

# javascript - qtScript 上 JavaScript 的 setTimeout 等价物是什么？

> ID：11236970
> 
> 赞同：11
> 
> 时间：2012-06-28T01:29:32.037
> 
> 标签：javascript, timer, settimeout, qtscript

没什么可补充的；什么是 qtScript 上 JavaScript 的 setTimeout 的等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-30T12:56:37.813

您可以将`QTimer`作为可实例化的类公开给脚本引擎。然后，您可以通过`new QTimer()`.

这在[使应用程序可编写脚本](http://doc.qt.io/qt-4.8/scripting.html)中有记录。

下面是一个完整的例子。评估脚本后，计时器会触发一秒钟，`timeout`在控制台上打印并退出应用程序。

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/script-timer-11236970
#include <QtScript>

template <typename T> void addType(QScriptEngine * engine) {
   auto constructor = engine->newFunction([](QScriptContext*, QScriptEngine* engine){
      return engine->newQObject(new T());
   });
   auto value = engine->newQMetaObject(&T::staticMetaObject, constructor);
   engine->globalObject().setProperty(T::staticMetaObject.className(), value);
}

int main(int argc, char ** argv) {
   QCoreApplication app{argc, argv};

   QScriptEngine engine;
   addType<QTimer>(&engine);
   engine.globalObject().setProperty("qApp", engine.newQObject(&app));

   auto script =
         "var timer = new QTimer(); \n"
         "timer.interval = 1000; \n"
         "timer.singleShot = true; \n"
         "var conn = timer.timeout.connect(function(){ \n"
         "  print(\"timeout\"); \n"
         "  qApp.quit(); \n"
         "}); \n"
         "timer.start();\n";

   engine.evaluate(script);
   return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-11T15:39:00.090

通过提供自包含的 C++ 方法（无需记账计时器 ID 等），您可以通过以下方式扩展脚本语言。只需创建以下名为“setTimeout”的插槽：

```
void ScriptGlobalObject::setTimeout(QScriptValue fn, int milliseconds)
{
  if (fn.isFunction())
  {
    QTimer *timer = new QTimer(0);
    qScriptConnect(timer, SIGNAL(timeout()), QScriptValue(), fn);
    connect(timer, SIGNAL(timeout()), timer, SLOT(deleteLater()));
    timer->setSingleShot(true);
    timer->start(milliseconds);
  } else
    context()->throwError(tr("Passed parameter '%1' is not a function.").arg(fn.toString()));
} 
```

并将该插槽作为函数引入脚本引擎的全局对象。这可以通过不同的方式完成，例如通过 QScriptEngine 实例创建一个 QScriptValue 函数，并在引擎的现有全局对象上设置一个相应命名的属性。然而，在我的情况下，整个 ScriptGlobalObject 实例被设置为新的全局对象，如下所示：

```
mScriptGlobalObject = new ScriptGlobalObject(this);
engine->setGlobalObject(engine->newQObject(mScriptGlobalObject)); 
```

请注意，如果您想使用上面 setTimeout 代码中所示的“context()”，您的 ScriptGlobalObject 也应该从 QScriptable 派生，如下所示：

```
class ScriptGlobalObject : public QObject, protected QScriptable 
```

* * *

在脚本中，您现在可以使用 setTimeout 稍后调用一个方法（只要同时不删除它所源自的 QScriptEngine 实例）：

```
setTimeout(function() {
  // do something in three seconds
}, 3000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T21:14:25.933

setTimeout 和 setInterval 在 ECMAScript 规范中没有定义，因为它们不是 JavaScript 特性。这些功能是浏览器环境的一部分。所以，QTscript 没有它们。

您可以使用[QTimer](https://doc.qt.io/qt-5/qtimer.html)来实现此功能。这是如何在 QTScript 中使用它的快速代码。

```
var timer = new QTimer();
timer.interval = 100; // set the time in milliseconds
timer.singleShot = true; // in-case if setTimout and false in-case of setInterval 
timer.timeout.connect(this, function(){console("in setTimout")});
timer.start(); 
```

注意任何错误，我只是在这里编码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-21T06:11:30.920

Qt 在“context2d”项目中提供了一个示例，一种从脚本访问 setInterval/clearInterval setTimeout/clearTimeout 功能的方法。

在该项目的“环境”类中，每次脚本调用 setInterval/setTimeout 时都会调用 QObject 的 startTimer 函数。然后将计时器标识符添加到 QHash 中，并带有对 javascript 回调的引用。当计时器（c++部分）倒计时结束时，调用'Environment'类的timerEvent，然后调用javascript回调..

请注意，为了清理上下文，所有计时器都在 Environment::reset() 中被杀死。

见：[https ://doc.qt.io/archives/qt-4.7/script-context2d.html](https://doc.qt.io/archives/qt-4.7/script-context2d.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-02T13:15:29.530

这是我为“年度最佳组合”提交的内容……但这有效，并且不需要重新编译 C++ 后端，在这种情况下参与的工作量太大了！我不确定你们其他人如何使用现在的 defunk Qt 脚本，但我需要的是**Qt Installer Framework**，我想开箱即用 - 而不是通过整个工具的自定义分支设置，然后让我尝试维护（因为 QtIFW 本身仍在积极更新），或者必须移植，在替代平台上编译，与合作者共享......

那么我的解决方案是什么？好吧，没有`QTimer`暴露于标准脚本引擎，但您可以定义自己的自定义（即“动态”）安装程序向导页面，通过 Qt 表单（.ui 文件）定义接口。有了它，您可以放入任何 QWidget，然后在 Qt 脚本端为信号和插槽添加连接......所以，我只使用了我看到的第一组，也许是最简单的小部件信号和插槽集有某种内置的计时器机制，我可以利用它。

在自定义表单中，将其放在某个地方，添加一个**隐藏的 QPushButton**：

```
<widget class="QPushButton" name="timerKludgeButton">
 <property name="visible">
  <bool>false</bool>
 </property>     
</widget> 
```

然后，当您加载包含 .ui（表单）的组件时，将按钮的“释放”信号连接到自定义“插槽”（即 Qt 脚本函数）：

```
Component.prototype.componentLoaded = function(){   
    var page = gui.pageWidgetByObjectName("DynamicMyTimerKludgePage");
    page.timerKludgeButton.released.connect(this, this.onTimeOut);
} 
```

接下来，定义插槽：

```
Component.prototype.onTimeOut = function(){
    console.log("Asynchronous time out!");
} 
```

最后，在适用的情况下，使用 QPushButton 的**“animateClick”**功能，使用此处的核心技巧启动您的“计时器”：

```
var page = gui.pageWidgetByObjectName("DynamicMyTimerKludgePage");
page.timerKludgeButton.animateClick(2000); 
```

# php - PHP将多个脚本调用排队

> ID：11236973
> 
> 赞同：1
> 
> 时间：2012-06-28T01:29:39.027
> 
> 标签：php

我有一个 PHP 脚本，它打开一个 XML 文档，获取 DOM 并修改它，然后覆盖原始文档。
据我了解，PHP 调用是异步进行的，因此多个用户可以同时访问文档，然后保存到该文档，第二个保存覆盖第一个。
我需要这不是这种情况。我不能使用`flock()`，因为这只适用于当前流程，那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:38:16.317

Actually, flock() *doesn't* only apply to the current process:

```
http://php.net/manual/en/function.flock.php 
```

It *does* use the local filesystem, though, which may become an issue if you're using load-balanced webservers. Also, in order for flock to work you have to make sure that any other processes which may be "competing" for the file are also using flock, otherwise the processes will "step" on each other.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T02:14:57.810

Lock the file.

Create an empty file (e.g. xml.lock) to indicate that the xml is being opened by other process. Remove the empty file after finish modifying the xml.

# c# - 比 String.Replace() 更快

> ID：11236976
> 
> 赞同：8
> 
> 时间：2012-06-28T01:30:11.440
> 
> 标签：c#, performance

有没有比这样更快的方法？

```
private void EscapeStringSequence(ref string data)
{
    data = data.Replace("\\", "\\\\"); // Backslash
    data = data.Replace("\r", "\\r");  // Carriage return
    data = data.Replace("\n", "\\n");  // New Line
    data = data.Replace("\a", "\\a");  // Vertical tab
    data = data.Replace("\b", "\\b");  // Backspace
    data = data.Replace("\f", "\\f");  // Formfeed
    data = data.Replace("\t", "\\t");  // Horizontal tab
    data = data.Replace("\v", "\\v");  // Vertical tab
    data = data.Replace("\"", "\\\""); // Double quotation mark
    data = data.Replace("'", "\\'");   // Single quotation mark
} 
```

-- 已编辑（添加说明） --
*Q1：您是否有理由需要加快速度？会不会造成很大的问题？*
这部分在这个项目中使用：http: [//mysqlbackuprestore.codeplex.com/](http://mysqlbackuprestore.codeplex.com/)
我将重复循环大量不同长度的字符串到这个函数中。完成数百万行的整个过程大约需要 6-15 秒。还有其他部分也参与其中。我正在努力加快每个部分。

*Q2：现在有多慢？*
好的，我会记录所用的确切时间并在此处发布。我稍后再来。（明天会公布结果）

**2012 年 6 月 29 日更新**
我已经运行测试。结果如下：

**速度测试：String.Replace()** - 以毫秒为单位
测试 1：26749.7531 毫秒
测试 2：27063.438 毫秒
测试 3：27753.8884 毫秒
平均：27189.0265 毫秒
速度：100%

**速度测试：Foreach Char 和追加**- 以毫秒
测试 1：8468.4547 毫秒
测试 2：8348.8527 毫秒
测试 3：8353.6476 毫秒
平均：8390.3183 毫秒
**速度：224% < 更快**
======================== ===========
**更新 - 下一次测试（另一轮）**
=============================== ====
------
测试替换字符串速度。
测试 1：26535.6466
测试 2：26379.6464
测试 3：26379.6463
平均：26431.6464333333
速度：100%
------
测试 Foreach Char String Append。
测试 1：8502.015
测试 2：8517.6149
测试 3：8595.6151
平均：8538.415
速度：309.56%
------
测试 Foreach Char String Append（修复 StringBuilder 长度）。
测试 1：8314.8146
测试 2：8330.4147
测试 3：8346.0146
平均：8330.41463333333
速度：317.29%

结论：
使用 Foreach Char Loop 和 Append 比 String.Replace() 更快。

非常感谢你们。

--------
以下是我用来运行测试的代码：（已编辑）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.Write("Press any key to continue...");
            Console.ReadKey();
            Console.Write("\r\nProcess started.");
            Test();
            Console.WriteLine("Done.");
            Console.Read();
        }

        public static Random random = new Random((int)DateTime.Now.Ticks);

        public static string RandomString(int size)
        {
            StringBuilder sb = new StringBuilder();
            char ch;
            for (int i = 0; i < size; i++)
            {
                ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
                sb.Append(ch);
            }
            return sb.ToString();
        }

        public static void Test()
        {
            string text = "\\_\r\n\a\b\f\t\v\"'" + RandomString(2000) + "\\_\r\n\a\b\f\t\v\"'" + RandomString(2000);

            List<TimeSpan> lstTimeUsed = new List<TimeSpan>();

            int target = 100000;

            for (int i = 0; i < 3; i++)
            {
                DateTime startTime = DateTime.Now;
                for (int j = 0; j < target; j++)
                {
                    if (j.ToString().EndsWith("000"))
                    {
                        Console.Clear();
                        Console.WriteLine("Test " + i.ToString());
                        Console.WriteLine(j.ToString() + " of " + target.ToString());
                    }

                    string data = text;

                    data = data.Replace("\\", "\\\\"); // Backslash
                    data = data.Replace("\r", "\\r");  // Carriage return
                    data = data.Replace("\n", "\\n");  // New Line
                    data = data.Replace("\a", "\\a");  // Vertical tab
                    data = data.Replace("\b", "\\b");  // Backspace
                    data = data.Replace("\f", "\\f");  // Formfeed
                    data = data.Replace("\t", "\\t");  // Horizontal tab
                    data = data.Replace("\v", "\\v");  // Vertical tab
                    data = data.Replace("\"", "\\\""); // Double quotation mark
                    data = data.Replace("'", "\\'");   // Single quotation mark

                }
                DateTime endTime = DateTime.Now;
                TimeSpan ts = endTime - startTime;
                lstTimeUsed.Add(ts);
            }

            double t1 = lstTimeUsed[0].TotalMilliseconds;
            double t2 = lstTimeUsed[1].TotalMilliseconds;
            double t3 = lstTimeUsed[2].TotalMilliseconds;
            double tOri = (t1 + t2 + t3) / 3;

            System.IO.TextWriter tw = new System.IO.StreamWriter("D:\\test.txt", true);
            tw.WriteLine("------");
            tw.WriteLine("Test Replace String Speed. Test Time: " + DateTime.Now.ToString());
            tw.WriteLine("Test 1: " + t1.ToString());
            tw.WriteLine("Test 2: " + t2.ToString());
            tw.WriteLine("Test 3: " + t3.ToString());
            tw.WriteLine("Average: " + tOri.ToString());
            tw.WriteLine("Speed: 100%");
            tw.Close();

            lstTimeUsed = new List<TimeSpan>();

            for (int i = 0; i < 3; i++)
            {
                DateTime startTime = DateTime.Now;
                for (int j = 0; j < target; j++)
                {
                    if (j.ToString().EndsWith("000"))
                    {
                        Console.Clear();
                        Console.WriteLine("Test " + i.ToString());
                        Console.WriteLine(j.ToString() + " of " + target.ToString());
                    }

                    string data = text;

                    var builder = new StringBuilder();
                    foreach (var ch in data)
                    {
                        switch (ch)
                        {
                            case '\\':
                            case '\r':
                            case '\n':
                            case '\a':
                            case '\b':
                            case '\f':
                            case '\t':
                            case '\v':
                            case '\"':
                            case '\'':
                                builder.Append('\\');
                                break;
                            default:
                                break;
                        }
                        builder.Append(ch);
                    }

                }
                DateTime endTime = DateTime.Now;
                TimeSpan ts = endTime - startTime;
                lstTimeUsed.Add(ts);
            }

            t1 = lstTimeUsed[0].TotalMilliseconds;
            t2 = lstTimeUsed[1].TotalMilliseconds;
            t3 = lstTimeUsed[2].TotalMilliseconds;

            tw = new System.IO.StreamWriter("D:\\test.txt", true);
            tw.WriteLine("------");
            tw.WriteLine("Test Foreach Char String Append. Test Time: " + DateTime.Now.ToString());
            tw.WriteLine("Test 1: " + t1.ToString());
            tw.WriteLine("Test 2: " + t2.ToString());
            tw.WriteLine("Test 3: " + t3.ToString());
            tw.WriteLine("Average: " + ((t1 + t2 + t3) / 3).ToString());
            tw.WriteLine("Speed: " + ((tOri) / ((t1 + t2 + t3) / 3) * 100).ToString("0.00") + "%");
            tw.Close();

            lstTimeUsed = new List<TimeSpan>();

            for (int i = 0; i < 3; i++)
            {
                DateTime startTime = DateTime.Now;
                for (int j = 0; j < target; j++)
                {
                    if (j.ToString().EndsWith("000"))
                    {
                        Console.Clear();
                        Console.WriteLine("Test " + i.ToString());
                        Console.WriteLine(j.ToString() + " of " + target.ToString());
                    }

                    string data = text;

                    var builder = new StringBuilder(data.Length + 20);
                    foreach (var ch in data)
                    {
                        switch (ch)
                        {
                            case '\\':
                            case '\r':
                            case '\n':
                            case '\a':
                            case '\b':
                            case '\f':
                            case '\t':
                            case '\v':
                            case '\"':
                            case '\'':
                                builder.Append('\\');
                                break;
                            default:
                                break;
                        }
                        builder.Append(ch);
                    }

                }
                DateTime endTime = DateTime.Now;
                TimeSpan ts = endTime - startTime;
                lstTimeUsed.Add(ts);
            }

            t1 = lstTimeUsed[0].TotalMilliseconds;
            t2 = lstTimeUsed[1].TotalMilliseconds;
            t3 = lstTimeUsed[2].TotalMilliseconds;

            tw = new System.IO.StreamWriter("D:\\test.txt", true);
            tw.WriteLine("------");
            tw.WriteLine("Test Foreach Char String Append (Fix StringBuilder Length). Test Time: " + DateTime.Now.ToString());
            tw.WriteLine("Test 1: " + t1.ToString());
            tw.WriteLine("Test 2: " + t2.ToString());
            tw.WriteLine("Test 3: " + t3.ToString());
            tw.WriteLine("Average: " + ((t1 + t2 + t3) / 3).ToString());
            tw.WriteLine("Speed: " + ((tOri) / ((t1 + t2 + t3) / 3) * 100).ToString("0.00") + "%");
            tw.Close();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T01:36:17.227

```
 var builder = new StringBuilder(data.Length + 20);
    foreach (var ch in data)
    {
      switch (ch)
      {
        case '\\':
        case '\r':
        ...
          builder.Append('\\');
          break;
      }
      builder.Append(ch);
    }
    return builder.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:35:26.450

尝试使用一系列 StringBuilder 调用。

# android - 为 Android 添加收藏夹/书签图标

> ID：11236977
> 
> 赞同：1
> 
> 时间：2012-06-28T01:30:24.220
> 
> 标签：android, web-applications, favicon

有没有办法为 Android 自定义收藏夹或书签图标？

我知道它是 Apple`<link rel="apple-touch-icon" href="favIcon.jpg">`或普通网站`<link rel="icon" type="image/png" href="favIcon.jpg">`

但对于 Android，我仍然在跳板上留下这张图片![在此处输入图像描述](../Images/0f5b4408c087b92bcf0b53fdb84a5d28.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:43:15.750

要让 Android 拾取图标，您需要一个预先组合的图标

```
<link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png"/> 
```

有关更多详细信息，请参阅以下链接：

1.  [Android 书签图标](https://stackoverflow.com/questions/4215047/android-bookmark-icons-on-homescreen)
2.  [配置 Android Web 应用程序](https://stackoverflow.com/questions/1951381/configuring-android-web-applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:58:19.003

在我的三星 SII 上，apple-touch-icon-precomposed 也显示在书签标志中。太丑了 几周前它已升级到 Android 4.0 ICS，我认为这是问题所在。在之前的 Android 版本 (3.xx) 中，该图标是预期的。

# ios - 如何以编程方式为 iPhone 配置加速度计？

> ID：11236981
> 
> 赞同：1
> 
> 时间：2012-06-28T01:30:55.790
> 
> 标签：ios, xcode, accelerometer

我不确定如何在 Xcode 中设置 iPhone 的空点。我有一个应用程序，[`UIimage`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)它可以在屏幕上移动并且运行良好。

我想要做的是无限期地设置它，这样当 iPhone 像阅读文本时一样（即 45 度角）时它是水平的（例如，图像不会移动）。我不需要用户设置[校准](http://en.wikipedia.org/wiki/Calibration)选项我只需要在代码中设置它。

# google-apps-script - url 中带有特殊字符的 UrlFetchApp

> ID：11236982
> 
> 赞同：3
> 
> 时间：2012-06-28T01:31:02.157
> 
> 标签：google-apps-script

我的脚本：

```
var Url = 'http://readonline.egscans.com/Remnant/Chapter_036_[END]';
var response = UrlFetchApp.fetch(Url).getContentText(); 
```

运行脚本时出现此错误。

> **“无效参数：[http://readonline.egscans.com/Remnant/Chapter_036_[END]](http://readonline.egscans.com/Remnant/Chapter_036_[END]) ”**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T01:41:09.837

您可以使用 encodeURIComponent 对 URL 进行编码，如下所示：

```
var Url = encodeURIComponent('http://readonline.egscans.com/Remnant/Chapter_036_[END]'); 
```

参考：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)

# java - Maven 构建失败，无法启动 Flash Player。可能java找不到flashplayer

> ID：11236986
> 
> 赞同：0
> 
> 时间：2012-06-28T01:31:23.027
> 
> 标签：java, maven, flash

我正在尝试在 Ubuntu 12.04 上构建我的 maven 项目，它返回了以下错误：

[错误] 无法在项目 as3-remote 上执行目标 org.sonatype.flexmojos:flexmojos-maven-plugin:3.8:test-run (default-test-run)：无法启动 Flash Player。可能java找不到flashplayer。
[错误] 确保 flashplayer 在 PATH
[错误] 上可用或使用 -DflashPlayer.command=${flashplayer 可执行文件}
[错误] 阅读更多：[https ://docs.sonatype.org/display/FLEXMOJOS/Running+unit+测试](https://docs.sonatype.org/display/FLEXMOJOS/Running+unit+tests)：无法运行程序“/home/rams/dev/trex-new/as3-remote/target/lib/flashplayer”：错误=2，没有这样的文件或目录
[错误] - > [帮助1]
[错误]
[ ERROR] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。
[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。
[ERROR]
[ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章：
[ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException](http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException)
[ERROR]
[ ERROR] 纠正问题后，您可以使用命令
[ERROR] mvn -rf :as3-remote恢复构建

* * *

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T10:32:18.930

尝试在 shell 中运行 flashplayer。就我而言， ld-linux.so 库丢失了。如果是这样，您需要安装 glibc。“sudo yum install glibc.i686”适用于 CentOS 64 位。

# mysql - CONCAT 行并在 GROUP 内返回

> ID：11236990
> 
> 赞同：2
> 
> 时间：2012-06-28T01:31:39.773
> 
> 标签：mysql, group-by, concat

我有以下[SQLFiddle](http://sqlfiddle.com/#!2/4c5e4/13)，我可以按时间、计数和名称对结果进行分组，但我也想在同一行中返回 error_strings。

有什么建议么？组 concat 并没有真正做我需要的。

我希望输出看起来像：

```
NAME | TIME | TODAYSCOUNT  | ERRORS
------------------------------------
A     1111           2000  error1,erro2
B     1111             20  error1,erro2
C     1111             10  error1,erro2
D     1111              3  error1,erro2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:06:29.927

下面怎么样：-

[http://sqlfiddle.com/#!2/4c5e4/20](http://sqlfiddle.com/#!2/4c5e4/20)

```
SELECT name,time,count(*) as todaycount, group_concat(error_str) as errors  
FROM test 
GROUP BY Name,time 
```

你可以改为

```
group_concat(distinct error_str) 
```

对于不同的错误字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T01:57:03.203

看看这个：

[http://sqlfiddle.com/#!2/d6929/2](http://sqlfiddle.com/#!2/d6929/2)

我向前迈了一步，因为看起来您可能会走到这一步：

```
SELECT Name, FROM_UNIXTIME('%m-%d-%Y', SUM(TodaysDate)),FROM_UNIXTIME('%m-%d-%Y',SUM(YesterdaysDate)), sum(TodaysCount),Sum(YesterdaysCount),CONCAT(String),CONCAT(String2)
FROM (
    SELECT Name,Time as TodaysDate,0 as YesterdaysDate,COUNT(*) as TodaysCount, 0 as YesterdaysCount,GROUP_CONCAT(error_str) as String, '' as String2
    FROM Test
    WHERE Time = 3111
    GROUP BY Name
  UNION ALL
    SELECT Name,0 as TodaysDate,Time as YesterdaysDate,0 as TodaysCount, COUNT(*)  as YesterdaysCount, '' as String, GROUP_CONCAT(error_str) as String2
    FROM Test
    WHERE Time = 1111
    GROUP BY Name
  ) as t
GROUP BY Name 
```

上面使用的工会

# ios - 在 iOS 上使用 OpenGL ES 2.0 创建 FBO 的最小示例

> ID：11236991
> 
> 赞同：7
> 
> 时间：2012-06-28T01:31:40.740
> 
> 标签：ios, opengl-es

我无法创建 FBO，然后在我的 iOS 应用程序中将其用作纹理。我已经在 github 上上传了我的应用程序的精简版本，这显示了问题。我得到的只是一个空白屏幕，颜色很奇怪，我从未设置过。检查状态表明 FBO 已成功创建。

[https://github.com/glman74/simpleFBO](https://github.com/glman74/simpleFBO)

我已经查看了相关的 stackoverflow 问题，特别是以下来自[datenwolf](https://stackoverflow.com/users/524368/datenwolf)的链接，它显示了如何使用 GLUT 设置 FBO，但不使用着色器。我仍然不确定我做错了什么。

[https://github.com/datenwolf/codesamples/blob/master/samples/OpenGL/minimalfbo/](https://github.com/datenwolf/codesamples/blob/master/samples/OpenGL/minimalfbo/)

我还在此处附加了代码的相关部分。在renderFBO方法中，我只是在做一个明确的。我原以为在主渲染中渲染多边形时会使用这种纯色（绿色）纹理。

FBO设置：

```
// intialize FBO
- (void)setupFBO
{
    fbo_width = 512;
    fbo_height = 512;

    glGenFramebuffers(1, &fboHandle);
    glGenTextures(1, &fboTex);
    glGenRenderbuffers(1, &depthBuffer);

    glBindFramebuffer(GL_FRAMEBUFFER, fboHandle);

    glBindTexture(GL_TEXTURE_2D, fboTex);
    glTexImage2D( GL_TEXTURE_2D,
                 0,
                 GL_RGBA,
                 fbo_width, fbo_height,
                 0,
                 GL_RGBA,
                 GL_UNSIGNED_BYTE,
                 NULL);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER_APPLE, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, fboTex, 0);

    glBindRenderbuffer(GL_RENDERBUFFER, depthBuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24_OES, fbo_width, fbo_height);
    glFramebufferRenderbuffer(GL_DRAW_FRAMEBUFFER_APPLE, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthBuffer);

    // FBO status check
    GLenum status;
    status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
    switch(status) {
        case GL_FRAMEBUFFER_COMPLETE:
            NSLog(@"fbo complete");
            break;

        case GL_FRAMEBUFFER_UNSUPPORTED:
            NSLog(@"fbo unsupported");
            break;

        default:
            /* programming error; will fail on all hardware */
            NSLog(@"Framebuffer Error");
            break;
    }

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
} 
```

FBO 渲染：

```
// render FBO 
- (void)renderFBO
{
    glBindTexture(GL_TEXTURE_2D, 0);
    glEnable(GL_TEXTURE_2D);
    glBindFramebuffer(GL_FRAMEBUFFER, fboHandle);

    glViewport(0,0, fbo_width, fbo_height);
    glClearColor(0.0f, 1.0f, 0.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
} 
```

主要渲染：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    // render FBO tex
    [self renderFBO];

    glViewport(0, 0, self.view.bounds.size.width, self.view.bounds.size.height);
    // render main
    glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glEnable(GL_TEXTURE_2D);
    glActiveTexture(GL_TEXTURE0);

    glUniform1i(uSamplerLoc, 0);     
    // Render 
    glUseProgram(_program);

    glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
    glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

    glDisable(GL_TEXTURE_2D);
} 
```

关于我可能做错了什么的想法？

编辑＃1：

我在 github 上对我的代码做了一些小改动。尝试使用 GL_FRAMEBUFFER 而不是上面的 GL_DRAW_FRAMEBUFFER_APPLE。还添加了一个绑定纹理调用，这是缺失的。还是不行。

编辑#2：

我找到了解决方案。我需要调用主渲染：

```
// reset to main framebuffer
[((GLKView *) self.view) bindDrawable]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T12:33:03.293

找到了一个解决方案，我已经更新了下面的代码，以防它对某人有用。

[https://github.com/glman74/simpleFBO/](https://github.com/glman74/simpleFBO/)

主要问题是我需要调用主渲染：

```
// reset to main framebuffer
[((GLKView *) self.view) bindDrawable]; 
```

这是因为我使用的是 GLKView。这种情况与 CAEAGLLayer 示例不同。

# crystal-reports - Crystal Reports 2011 报表打开缓慢

> ID：11236996
> 
> 赞同：0
> 
> 时间：2012-06-28T01:32:38.447
> 
> 标签：crystal-reports

我有一个从 C# 程序运行数百次的水晶报告。每次运行大约需要 2 分钟。我发现它运行时间不到一秒钟，但打开报告需要 2 分钟。该报告使用 SQL Server 2008，并且报告文件位于本地计算机上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:31:59.720

请执行以下步骤，它将为您工作

1）首先检查您的查询在 sql 结束时花费了多少，因为我认为 2 分钟需要很多时间，而且我们也在使用水晶报告，他们第一次需要一些时间，但不是 2 分钟。

2) 其次，水晶报表在您第一次调用报表时需要花费一些时间来加载其 DLL。SAP 建议在第一个应用程序执行时使用线程或后台工作程序加载虚拟报告，以便在调用生产报告时准备好 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:38:15.387

看起来问题在于报告中嵌入了一台打印机，该打印机未在运行报告的机器上定义。移除打印机后，报告运行速度更快。

# java - Java Breakout 游戏弹跳球

> ID：11236997
> 
> 赞同：-1
> 
> 时间：2012-06-28T01:32:42.520
> 
> 标签：java, 2d, game-engine, breakout

我正在尝试用java制作一个突破性的游戏。球击中石头和球棒时会反弹，但击中墙壁后不会反弹。请参阅此粘贴了解我使用的内容。

[http://pastebin.com/pkGsCBMa](http://pastebin.com/pkGsCBMa)

任何人都可以发现代码中的错误...

谢谢

编辑：打印速度时，我得到这个输出。

```
vx 0.0     vy  0.0
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.0     vy  0.0
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02
vx 0.02    vy -0.02 
```

## 编辑

这就是解决方案。我已将bounce() 方法更改为此。

```
/**
 * This object bounces back from the other object in a natural way. Please
 * realize that the bounce is not completely accurate because this depends
 * on many properties. But in many situations the effect is good enough. Had
 * some bugs in pixel perfect detection mode if the image has a larger area
 * of complete alpha. If using PPCD, make the object fit the image size by
 * removing the alpha and resizing the image.
 */
public void bounce(GObject other){
    int xd = (int) ((other.x + other.getWidth() / 2) - (x + getWidth() / 2));
    int yd = (int) ((other.y + other.getHeight() / 2) - (y + getHeight() / 2));
    if (xd < 0) {
        xd = -xd;
    }
    if (yd < 0) {
        yd = -yd;
    }
    if (xd > yd) {
        dx = -dx;
    } else {
        dy = -dy;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T01:44:40.647

此问题的一个常见原因是碰撞对象重叠并陷入连续碰撞状态。

所以球移动得相对较快，并与一个块相撞。然而，由于模拟是离散的，所以球实际上会稍微**进入块中。**然后，您可以正确检测到碰撞并反转速度。然而，在下一个更新周期，无论出于何种原因，球可能仍然在块内。因此，程序检测到另一个“碰撞”并再次反转速度。

结果是你的球在街区边缘抖动，不断反转速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T01:54:20.020

在`bounce`函数中，`if`and`else if`并没有涵盖每个值。我建议你`>`用`>=`或`<`替换`<=`。