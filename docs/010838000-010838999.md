# StackOverflow 问答 10838000-10838999

# ios - IOS中设置字符串的本地化

> ID：10838001
> 
> 赞同：1
> 
> 时间：2012-05-31T16:59:43.480
> 
> 标签：ios, localization

通过创建位于相应 xx.proj 组中的 Localizable.strings 文件，我已成功本地化了我的代码 .m 文件中的字符串。Localizable.strings 文件还包含 Settings.bundle 中使用的字符串的本地化

当我在 IOS 模拟器中运行我的 iPad 应用程序时，本地化工作正常，但设置中的字符串本地化除外，这些字符串在 Settings.bundle / Root.plist 中定义。设置中的字符串仍为英文。我一直无法在 Settings.bundle 中找到处理字符串本地化的 Apple 文档。

显然，成千上万的开发人员之前已经这样做了，但我被困住了。

* * *

问题解决了。我如何将本地化文件添加到 Settings.bundle。

1.  在 Xcode 中，在 Finder 中显示了 Settings.bundle。
2.  在 Finder 中选择 Settings.bundle，然后选择 Show Package Contents。
3.  在 Finder 中创建了一个 xx.lproj 文件夹
4.  使用设置本地化（xx 国家）创建 UTF-16 文件。将其保存为 xx.lproj 文件夹中的 Root.strings。
5.  将现有的 .storyboard 文件（xx 国家）复制到 xx.lproj 文件夹中。
6.  将现有的 Localizable.strings 文件（xx 国家）复制到 Xx.lproj 文件夹中。
7.  检查 Root.plist 包含的字符串文件名 == Root.strings。

对其他国家/地区本地化重复 1-6。

# java - 基于模型的 UI 生成（运行时或构建时）

> ID：10838004
> 
> 赞同：2
> 
> 时间：2012-05-31T16:59:52.290
> 
> 标签：java, eclipse, eclipse-emf-ecore, mdd, emf

我们有一个基于 EMF 的元模型，用于配置我们的应用程序。到目前为止，我们使用 EMF 编辑器（基于 eclipse）来创建我们产品的各种配置实例。到目前为止，这运行良好，但我们现在希望支持从 Web UI 创建配置。

在 Java 平台上从元模型创建丰富的 UI 有哪些选择？我知道 Naked Objects、Roo 等，但它们会生成专注于持久性的端到端应用程序。我只需要可以填充模型的漂亮 UI。

编辑其中一条评论建议将 Magritte + Glamour 结合起来。但那些是针对小谈话的。Java中是否有任何等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T07:19:42.700

对于其他来这里的人：

[Metawidget](http://metawidget.org)是一种旨在从元模型生成 UI 的工具。它支持 Java 平台，以及专门的 SWT（因此也支持 Eclipse）。它的元模型检查层是可插拔的，因此您可以为 EMF 编写检查器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:50:00.123

如果您想基于元模型为模型创建用户界面，可以查看 Eclipse 基金会的[EEF 项目](http://www.eclipse.org/modeling/emft/?project=eef)。它允许人们自定义和生成用户界面来创建和编辑模型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T12:35:57.000

查看[EMF Forms](http://www.eclipse.org/ecp/emfforms/)，它具有基于您的数据模型默认生成的 GUI。它还支持多种 UI 技术：Swing、SWT、JavaFX 或 Web。

# javascript - 如何在 JavaScript 中声明公共方法和私有方法

> ID：10838005
> 
> 赞同：3
> 
> 时间：2012-05-31T16:59:57.030
> 
> 标签：javascript

我想知道我是否需要公共方法，我需要使用这个

```
var TestClass = function() {

    this.pub = function() {
              blahblah;
        }; 
```

如果需要私有方法（内部方法），我需要使用

```
var TestClass = function() {

    var pri = function() {
              blahblah;
        }; 
```

这是真的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:01:58.260

不，这不是真的。内部函数 ( `pri`) 是一个函数，而不是一个方法。尽管 javascript 中的差异可以忽略不计（因为每个函数都可以用作方法，反之亦然），但您仍然不能将其称为`this.pri()`，这对于真正的私有方法是可能的。

附带说明一下，尽管其语法与 Java 相似，但 Javascript，尤其是其对象模型，与 Java/C++/C# 有很大不同。特别是，*类*和*封装*等概念在 Javascript 中是不存在的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T09:51:37.567

我通常使用这种模式，我没有看到很多人这样做。我这样做是为了避免必须以任何特殊方式订购我的方法。如果一切都是公共的，那么通常必须确保调用的方法在方法调用之前声明

```
var person = new Person("Mo", "Yo");
person.getFullname();
person.getFirstname();
person.getLastname();           

function Person(firstname, lastname) {
    var firstname, lastname;

    (function constructor(){
        setFirstname(firstname);
        setLastname(lastname)
    })();

    this.getFullname = getFullname;   // Makes getFullName() public 
    function getFullname() {
        // Will allow you to order method in whatever order you want. 
        // If we where to have it as just this.getFullname = function () {...} and same for firstname 
        // as it is normally done, then this.getFirstname would have to be placed before this method. 
        // A common pain in the ass, that you cannot order methods as you want!    
        return getFirstname() + ", " + getLastname();   
    }               

    this.getFirstname = getFirstname;
    function getFirstname() {
        return firstname;
    }

    function setFirstname(name){
        firstname = name;
    }

    this.getLastname = getLastname;
    function getLastname() {
        return lastname;
    }
    function setLastname(name) {
        lastname = name;
    }    
} 
```

# jquery - 跨域 AJAX 发布 - WCF

> ID：10838006
> 
> 赞同：1
> 
> 时间：2012-05-31T16:59:58.140
> 
> 标签：jquery, ajax, json, cross-domain, jsonp

我创建了以下 Web 服务，并使用了我需要发布到 Web 服务的最新版本的 jquery。

我想不通。我读过 JSONP 不适用于 POST。我怎样才能让它工作？

我需要使用 jQuery 到 WCF 进行跨域发布。

服务.cs：

```
namespace AjaxPost
{
    [DataContractAttribute]
    public class Message
    {
      [DataMemberAttribute]
      public string success;

      public Message(string success)
        this.success = success;
    }

    [ServiceContract(Namespace="JsonpAjaxService")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class User
    {
        [WebInvoke(ResponseFormat = WebMessageFormat.Json, Method="POST")]
        public Message CreateUser(string email, string username, string password, string phone, string image)
        {
           Message msg = new Message("true");
           return msg;
        }
    }
} 
```

服务.svc：

```
<%@ServiceHost 
  language="c#"
  Debug="true"
  Service="Microsoft.Samples.Jsonp.CustomerService"
  Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory" 
%> 
```

服务 Web.Config：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"/>
  <httpProtocol>
      <customHeaders>
          <add name="Access-Control-Allow-Origin" value="*" />
          <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE" />
      </customHeaders>
  </httpProtocol>
</system.webServer>

<system.serviceModel>        
    <behaviors>
        <serviceBehaviors>
            <behavior name="MetadataBehavior">
                <serviceDebug includeExceptionDetailInFaults="True" httpHelpPageEnabled="True" />
                <serviceMetadata httpGetEnabled="True"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <standardEndpoints>
        <webScriptEndpoint>
            <standardEndpoint name="" crossDomainScriptAccessEnabled="true"/>
        </webScriptEndpoint>
    </standardEndpoints>
</system.serviceModel> 
```

索引.html

```
 wcfServiceUrl = "http://localhost:33695/Service.svc/CreateUser";

    $.ajax({
        crossDomain: true,
        cache: true,
        url: wcfServiceUrl,
        data: "{}",
        type: "POST",
        jsonpCallback: "Message",
        contentType: "application/json",
        dataType: "json",
        data: "{ \"myusername\": \"mypassword\" }",
        error: function (request, status, error) {
            //error loading data
            alert("error");
        },
        success: function (menu) {
            alert('success');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:51:56.977

我在没有 CORS 的情况下做到了这一点。我所要做的就是让服务器接收来自任何地方的呼叫。这是用 apache 完成的，但我看到你的网络服务器有类似的东西。我遇到的问题是我需要指定允许的域，* 不起作用。此外，它必须用[http://site.example指定](http://site.example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:02:17.033

如果它位于另一台服务器上，您别无选择，只能使用服务器端应用程序连接您的网络服务。或者只使用 JSONP（获取请求）。没有其他解决方法。CORS 不适用于旧版浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:25:38.627

由于 http 标准，同源策略可能会受到影响。您请求的网站是否位于不同的应用程序或端口下？

看：

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T15:40:44.803

我找到了一个使用 CORS（HTML 5 解决方案）的解决方案 [http://code.msdn.microsoft.com/windowsdesktop/Implementing-CORS-support-c1f9cd4b](http://code.msdn.microsoft.com/windowsdesktop/Implementing-CORS-support-c1f9cd4b)

如果有人知道不使用 CORS (HTML 5) 的有效解决方案，那就太棒了。如果我错了，请纠正我，但是 CORS 需要支持 HTML 5 的浏览器，我更喜欢不依赖于 HTML 5 浏览器的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-24T19:34:37.673

我有一个简单的解决方案。要解决此问题，请执行以下操作：

创建 Global.asax 和以下代码以启用 Ajax 跨域 POST

```
 public void Application_BeginRequest(object sender, EventArgs e)
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST,OPTIONS");

            if ((HttpContext.Current.Request.HttpMethod == "OPTIONS"))
            {

                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
                HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
                HttpContext.Current.Response.End();
            }
        }
    } 
```

# javascript - 在javascript中获取视频的帧速率

> ID：10838009
> 
> 赞同：2
> 
> 时间：2012-05-31T17:00:05.323
> 
> 标签：javascript, html, html5-video

如何使用 HTML5 视频播放器获取视频的帧速率或当前帧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:28:56.603

为此，您需要一个服务器端脚本，`<video>`对象中的元数据支持有限 - 而且大多数是特定于浏览器的。

```
var xhr = new XMLHttpRequest();
var q = "?file=http://mediafiles.tld/playme.avi";
xhr.open("GET", "/path/to/identify.php" + q, true);
xhr.send();
var videodata = eval("("+xhr.responseText+")"); 
```

然后在服务器端创建一个播放器，像这里的第一帧一样触发 - 不显示任何内容，也不播放音频。下面的功能将简单地启动相关的编解码器并通过“-identify”检索信息。通过使用 mplayer，服务器必须拥有这个存在并且能够解码电影/音频以提供有效数据。

```
<?php

ob_start();
system('mplayer -identify -frames 1 -vo null -ao null '.$_GET['file'].' 2>/dev/null|egrep "[A-Z_]+="');
$out = ob_get_clean();
$data = array();
foreach(explode("\n", $out) as $line) {
    list($k, $v) = explode("=", trim($line));
    $data[trim($k)] = trim($v);
}
header("Content-Type: application/x-json");
header("E-Tag: " . substr(0,16,md5($_GET['file']));
print json_encode($data);

?> 
```

# .net - Webconfig 与 db4o

> ID：10838010
> 
> 赞同：1
> 
> 时间：2012-05-31T17:00:09.217
> 
> 标签：.net, web-config, db4o

有没有人使用 db4o 来存储污染 WebConfig 中配置的 adhoc 或键值对？我已经看到许多 Web 配置文件的大小变得非常大，因为它有大量的键和有点咳咳……全局变量。有没有人这样做或使用 db4o 在富客户端场景中保存客户端的查找数据？

好主意？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:05:59.580

你在网络配置中存储了什么。是的，由于新图书馆等的新部分，它有变大的趋势。但是那么大吗？

反正。我不确定这是否是个好主意。这是我的推理：

*   通常配置是人类可读的，因此您可以查看、更改它等。db4o 文件不是人类可读的。您总是需要通过 db4o API。
*   db4o 太过分了，可能会带来新的问题。例如，对于 db4o，您必须处理激活等问题。这对于配置文件之类的东西来说太过分了。b

你不能分割网络配置文件吗？或者寻找一个更具体的配置相关数据的小型库。（如[Nini](http://nini.sourceforge.net/)。从未使用过自己，可能存在其他替代方案）

# qt - 大量使用信号和插槽会影响应用程序性能吗？

> ID：10838013
> 
> 赞同：36
> 
> 时间：2012-05-31T17:00:40.300
> 
> 标签：qt, signals-slots

这个问题只是出于教育目的：

在两个对象（例如两个线程）之间使用 30-50 对或更多对信号和插槽是否会影响应用程序性能、运行时或响应时间？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-31T18:41:57.333

首先，您可能*不*应该在 QThreads 中放置任何插槽。`run`除了重新实现方法和私有方法（不是信号！）之外，QThreads 并不是真的要派生自其他方法。

QThread 在概念上是一个线程控制器，而不是线程本身。在大多数情况下，您应该处理 QObjects。启动一个线程，然后将对象实例移动到该线程。这是使插槽在线程中正常工作的唯一方法。将线程实例（它*是*QObject 派生的！）移动到线程是一种 hack 和糟糕的风格。尽管不知情的论坛帖子另有说明，但不要这样做。

至于你的问题的其余部分：信号槽调用不必定位任何东西，也不必验证太多。“定位”和“验证”在连接建立时完成。通话时完成的主要步骤是：

1.  锁定池中的信号槽互斥锁。

2.  遍历连接列表。

3.  使用直接呼叫或排队呼叫执行呼叫。

**共同成本**

任何信号槽调用总是从 moc 生成的信号实现中的直接调用开始。在堆栈上构造一个指向信号参数的指针数组。参数不会被复制。

然后信号调用[`QMetaObject::activate`](http://code.woboq.org/qt5/qtbase/src/corelib/kernel/qobject.cpp.html#_ZN11QMetaObject8activateEP7QObjectiiPPv)，其中获取连接列表互斥体，并迭代连接的插槽列表，为每个插槽发出调用。

**直接连接**

那里没有做太多，通过直接调用`QObject::qt_static_metacall`在建立连接时获得的调用，或者`QObject::qt_metacall`如果`QMetaObject::connect`用于设置连接，则调用插槽。后者允许[动态创建信号和槽](http://doc.qt.digia.com/qq/qq16-dynamicqobject.html)。

**排队连接**

参数必须编组和复制，因为调用必须存储在事件队列中并且信号必须返回。这是通过分配一个指向副本的指针数组并复制堆上的每个参数来完成的。执行此操作的代码实际上是简洁的旧 C。

呼叫的排队是在 内完成的[`queued_activate`](http://code.woboq.org/qt5/qtbase/src/corelib/kernel/qobject.cpp.html#_ZL15queued_activateP7QObjectiPN14QObjectPrivate10ConnectionEPPv)。这是复制构造完成的地方。

排队调用的开销总是至少有一个`QMetaCallEvent`. 如果调用有任何参数，则分配一个指向参数的数组，并为每个参数进行额外的分配。对于带`n`参数的调用，作为 C 表达式给出的成本是`(n ? 2+n : 1)`分配。阻塞调用的返回值是作为参数的计数器。可以说，Qt 的这一方面可以优化为对所有内容进行一次分配，但在现实生活中，只有调用普通方法才重要。

**基准测试结果**

即使是直接（非排队）信号槽调用也有可衡量的开销，但你必须选择你的战斗。易于构建代码与性能。您确实测量了最终应用程序的性能并确定了瓶颈，对吗？如果这样做，您可能会发现在实际应用中，信号槽开销不起作用。

唯一具有显着开销的时间信号槽机制是如果您正在调用琐碎的函数。说，如果你`trivial`在下面的代码中调用插槽。这是一个完整的、独立的基准测试，所以请随意运行它并亲自查看。我机器上的结果是：

```
Warming up the caches...
trivial direct call took 3ms
nonTrivial direct call took 376ms
trivial direct signal-slot call took 158ms, 5166% longer than direct call.
nonTrivial direct signal-slot call took 548ms, 45% longer than direct call.
trivial queued signal-slot call took 2474ms, 1465% longer than direct signal-slot and 82366% longer than direct call.
nonTrivial queued signal-slot call took 2474ms, 416% longer than direct signal-slot and 653% longer than direct call. 
```

也许应该注意的是，连接字符串非常快:)

请注意，我通过函数指针进行调用，这是为了防止编译器优化对加法函数的直接调用。

```
//main.cpp
#include <cstdio>
#include <QCoreApplication>
#include <QObject>
#include <QTimer>
#include <QElapsedTimer>
#include <QTextStream>

static const int n = 1000000;

class Test : public QObject
{
    Q_OBJECT
public slots:
    void trivial(int*, int, int);
    void nonTrivial(QString*, const QString&, const QString&);
signals:
    void trivialSignalD(int*, int, int);
    void nonTrivialSignalD(QString*, const QString&, const QString &);
    void trivialSignalQ(int*, int, int);
    void nonTrivialSignalQ(QString*, const QString&, const QString &);
private slots:
    void run();
private:
    void benchmark(bool timed);
    void testTrivial(void (Test::*)(int*,int,int));
    void testNonTrivial(void (Test::*)(QString*,const QString&, const QString&));
public:
    Test();
};

Test::Test()
{
    connect(this, SIGNAL(trivialSignalD(int*,int,int)),
            SLOT(trivial(int*,int,int)), Qt::DirectConnection);
    connect(this, SIGNAL(nonTrivialSignalD(QString*,QString,QString)),
            SLOT(nonTrivial(QString*,QString,QString)), Qt::DirectConnection);
    connect(this, SIGNAL(trivialSignalQ(int*,int,int)),
            SLOT(trivial(int*,int,int)), Qt::QueuedConnection);
    connect(this, SIGNAL(nonTrivialSignalQ(QString*,QString,QString)),
            SLOT(nonTrivial(QString*,QString,QString)), Qt::QueuedConnection);
    QTimer::singleShot(100, this, SLOT(run()));
}

void Test::run()
{
    // warm up the caches
    benchmark(false);
    // do the benchmark
    benchmark(true);
}

void Test::trivial(int * c, int a, int b)
{
    *c = a + b;
}

void Test::nonTrivial(QString * c, const QString & a, const QString & b)
{
    *c = a + b;
}

void Test::testTrivial(void (Test::* method)(int*,int,int))
{
    static int c;
    int a = 1, b = 2;
    for (int i = 0; i < n; ++i) {
        (this->*method)(&c, a, b);
    }
}

void Test::testNonTrivial(void (Test::* method)(QString*, const QString&, const QString&))
{
    static QString c;
    QString a(500, 'a');
    QString b(500, 'b');
    for (int i = 0; i < n; ++i) {
        (this->*method)(&c, a, b);
    }
}

static int pct(int a, int b)
{
    return (100.0*a/b) - 100.0;
}

void Test::benchmark(bool timed)
{
    const QEventLoop::ProcessEventsFlags evFlags =
            QEventLoop::ExcludeUserInputEvents | QEventLoop::ExcludeSocketNotifiers;
    QTextStream out(stdout);
    QElapsedTimer timer;
    quint64 t, nt, td, ntd, ts, nts;

    if (!timed) out << "Warming up the caches..." << endl;

    timer.start();
    testTrivial(&Test::trivial);
    t = timer.elapsed();
    if (timed) out << "trivial direct call took " << t << "ms" << endl;

    timer.start();
    testNonTrivial(&Test::nonTrivial);
    nt = timer.elapsed();
    if (timed) out << "nonTrivial direct call took " << nt << "ms" << endl;

    QCoreApplication::processEvents(evFlags);

    timer.start();
    testTrivial(&Test::trivialSignalD);
    QCoreApplication::processEvents(evFlags);
    td = timer.elapsed();
    if (timed) {
        out << "trivial direct signal-slot call took " << td << "ms, "
               << pct(td, t) << "% longer than direct call." << endl;
    }

    timer.start();
    testNonTrivial(&Test::nonTrivialSignalD);
    QCoreApplication::processEvents(evFlags);
    ntd = timer.elapsed();
    if (timed) {
        out << "nonTrivial direct signal-slot call took " << ntd << "ms, "
               << pct(ntd, nt) << "% longer than direct call." << endl;
    }

    timer.start();
    testTrivial(&Test::trivialSignalQ);
    QCoreApplication::processEvents(evFlags);
    ts = timer.elapsed();
    if (timed) {
        out << "trivial queued signal-slot call took " << ts << "ms, "
               << pct(ts, td) << "% longer than direct signal-slot and "
               << pct(ts, t) << "% longer than direct call." << endl;
    }

    timer.start();
    testNonTrivial(&Test::nonTrivialSignalQ);
    QCoreApplication::processEvents(evFlags);
    nts = timer.elapsed();
    if (timed) {
        out << "nonTrivial queued signal-slot call took " << nts << "ms, "
               << pct(nts, ntd) << "% longer than direct signal-slot and "
               << pct(nts, nt) << "% longer than direct call." << endl;
    }
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    Test t;
    return a.exec();
}

#include "main.moc" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T17:29:45.990

当然，它们会影响应用程序的性能，主要是因为定位连接对象+验证槽对象状态 n 所花费的时间。但是信号和槽机制的简单性和灵活性非常值得开销。`Plus one of the major advantage of signal-slot mechanism is they are type=safe allowing communication between objects, irrespective of type of object unlike callbacks.`

与回调相比，信号和槽的速度稍慢，因为它们提供了更高的灵活性，尽管对于实际应用程序的差异并不显着。一般来说，发出一个连接到某些槽的信号，比直接调用接收器慢大约十倍，使用非虚拟函数调用。这是定位连接对象、安全地迭代所有连接（即检查后续接收器在发射期间是否被破坏）以及以通用方式编组任何参数所需的开销。虽然十个非虚拟函数调用听起来很多，但它比任何新操作或删除操作的开销要少得多。只要您执行了一个字符串、向量或列表操作，在幕后需要新建或删除，

来源：[信号和插槽](http://doc.trolltech.com/4.5/signalsandslots.html)

# xml - 需要在递归 xsl 函数中使用 xpath 按 xml 节点子集的顺序进行过滤

> ID：10838015
> 
> 赞同：1
> 
> 时间：2012-05-31T17:00:42.547
> 
> 标签：xml, xslt, xpath

我有一组 xml 节点，它们具有相同的节点名称，但有一个区分它们的属性和一个数量属性：

```
<exampleNode typeOfnode="1" amount="100"/>
<exampleNode typeOfnode="1" amount="540"/>
<exampleNode typeOfnode="2" amount="200"/>
<exampleNode typeOfnode="2" amount="200"/>
<exampleNode typeOfnode="3" amount="10"/>
<exampleNode typeOfnode="3" amount="1"/>
<exampleNode typeOfnode="3" amount="110"/>
<exampleNode typeOfnode="3" amount="110"/>
<exampleNode typeOfnode="4" amount="110"/> 
```

我正在使用递归模板来计算金额的总和，但只想为特定的 typeOfNode 执行此操作。这是我用来调用模板的代码：

```
<xsl:call-template name="addition">
    <xsl:with-param name="currentValue">0</xsl:with-param>
    <xsl:with-param name="counter"><xsl:value-of select="count(//exampleNode[@typeOfnode= '1'])"/></xsl:with-param>
    <xsl:with-param name="typeOfnode">1</xsl:with-param>
</xsl:call-template>

<xsl:template name="addition">
    <xsl:param name="currentValue"/>
    <xsl:param name="counter"/>
    <xsl:param name="typeOfNode"/>
    <xsl:variable name="amount" select="//exampleNode[@typeOfNode = '$typeOfnode' and $counter]/@amount"/>
    <xsl:variable name="recursiveValue" select="number($recursiveValue + $amount)"/>
    <xsl:choose>
        <xsl:when test="number($counter - 1) > 0">
            <xsl:call-template name="addition">
                <xsl:with-param name="currentValue">
                    <xsl:value-of select="$recursiveValue"/>
                </xsl:with-param>
                <xsl:with-param name="counter">
                    <xsl:value-of select="number($counter - 1)"/>
                </xsl:with-param>
                <xsl:with-param name="agreementType">
                    <xsl:value-of select="$agreementType"/>
                </xsl:with-param>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$recursiveValue"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

通过使用 XMLspy 进行调试后，未设置数量变量，我认为这是因为我搞砸了查询。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:12:36.883

我没有看你的代码细节，你为什么不简单地定义一个键

```
<xsl:key name="k1" match="exampleNode" use="@typeOfNode"/> 
```

然后计算你使用的“1”类型节点的总和，例如

```
<xsl:value-of select="sum(key('k1', '1')/@amount)"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:28:28.070

如需快速回答，请参阅最后一个代码块。有关代码的一些评论，请从此处阅读。

1.  如何通过使用 currentValue iso recursiveValue 为 recursiveValue 播种来修复递归循环：

    ```
    <xsl:variable name="recursiveValue" select="number($currentValue + $amount)"/> 
    ```

2.  这里有一些 XSLT 错误，例如，这看起来不起作用：

    ```
    <xsl:variable name="amount" select="//exampleNode[@typeOfNode = '$typeOfnode' and $counter]/@amount"/> 
    ```

    如果你的意思是说“数量是@typeOfNode=$typeofnode 的$counter-th /exampleNode 的@amount，这不是办法。

    *   “转义”变量将不起作用，它将与文字值“$typeOfnode”进行比较。
    *   "and $counter" 总是计算为真，除非 $counter 没有设置。尝试“position()=$typeOfnode”，但要注意 position 将是当前 exampleNode 在整个 exampleNode 兄弟姐妹集中的位置。这可以通过使用中间变量来解决，在该变量中“复制”通过过滤器的 exampleNodes，您可以使用 $counter 变量在其中测试索引。
3.  你的片段

    ```
     <xsl:with-param name="agreementType">
          <xsl:value-of select="$agreementType"/>
        </xsl:with-param> 
    ```

    可能缺少一些混淆，您的意思是 typeOfnode iso 协议类型吗？:D

除此之外，还有更简单的解决方案。例如一个非常直接的：

```
<xsl:value-of select="sum(exampleNode[@typeOfnode='1']/@amount)"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:11:17.207

**如果您真的非常想要一个递归解决方案**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:template match="/">
        <xsl:call-template name="recurse">
            <xsl:with-param name="nodes_to_sum" select="//exampleNode[@typeOfnode='1']"/>
            <xsl:with-param name="sum" select="0"/>
        </xsl:call-template> 
    </xsl:template>

    <xsl:template name="recurse">
        <xsl:param name="nodes_to_sum"/>
        <xsl:param name="sum"/>
        <xsl:choose>
            <xsl:when test="count($nodes_to_sum)=0">
                <sum>
                <xsl:value-of select="$sum"/>        
                </sum>
            </xsl:when>
            <xsl:otherwise>

                <xsl:call-template name="recurse">
                    <xsl:with-param name="nodes_to_sum" select="$nodes_to_sum[position()>1]"/>
                    <xsl:with-param name="sum" select="$sum + $nodes_to_sum[1]/@amount"/>
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>

    </xsl:template>
</xsl:stylesheet> 
```

**关于递归**

在第一次调用中，我们初始化数据；整个集合 - 已过滤 - 计算总和和初始总和 (0)。

在递归“函数”中，我们首先测试终端条件，在我们的例子中，“不再累加”。如果是这种情况，返回结果...

...否则，也就是说，如果有更多工作要做，请使用较小的待办事项列表和较高的累加器调用递归部分，这可以保证递归将在某个点停止。

但请参阅我的其他答案以获得更简单的解决方案...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T04:00:17.623

这里不需要递归！

**事实上，想要的总和可以通过一个单行 XPath 表达式返回**：

```
sum(/*/*[@typeOfnode = $pType]/@amount) 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pType" select="3"/>

 <xsl:template match="/">
  <xsl:value-of select="sum(/*/*[@typeOfnode = $pType]/@amount)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（提供的片段，包装在单个顶部元素中）时：

```
<t>
    <exampleNode typeOfnode="1" amount="100"/>
    <exampleNode typeOfnode="1" amount="540"/>
    <exampleNode typeOfnode="2" amount="200"/>
    <exampleNode typeOfnode="2" amount="200"/>
    <exampleNode typeOfnode="3" amount="10"/>
    <exampleNode typeOfnode="3" amount="1"/>
    <exampleNode typeOfnode="3" amount="110"/>
    <exampleNode typeOfnode="3" amount="110"/>
    <exampleNode typeOfnode="4" amount="110"/>
</t> 
```

**产生了想要的正确结果**：

```
231 
```

# python - UnicodeDecodeError：“utf8”编解码器无法解码字节

> ID：10838016
> 
> 赞同：6
> 
> 时间：2012-05-31T17:01:15.447
> 
> 标签：python, google-app-engine

当我启动我的应用程序时，我收到此错误 UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 2566: invalid continuation byte。我在我的 HTML 文件中使用 UTF8

```
<meta charset="utf-8" /> 
```

在我的 Python 文件中

```
# -*- coding: utf-8 -*-
self.response.headers['Content-Type'] = 'text/html; charset=UTF-8' 
```

我在网上看到了一些使用 encode() 函数的解决方案，但我不想在 Python 文件中插入文本，而是在 HTML 文件中插入文本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T19:18:04.757

如果您使用的是 Notepad++，请确保所有文件的“编码”（在菜单中）都设置为“UTF-8”。

我不知道其他编辑，但这可能是问题所在。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-31T17:35:29.330

改成

```
# -*- coding: latin1 -*- 
```

`0xe9`是 latin1 字符集的一部分。

# ruby-on-rails - 将 ActiveRecord 对象分组并输出到 JSON

> ID：10838018
> 
> 赞同：2
> 
> 时间：2012-05-31T17:01:38.113
> 
> 标签：ruby-on-rails, json, activerecord

我想知道如何才能使这项工作。假设我有一个属于客户的项目模型。我想将这些特定项目输出到 JSON，但它们需要按客户分组。我认为这会起作用：

```
@projects.group_by(&:client).to_json 
```

这几乎可以工作，除了 to_json 方法没有在客户端上调用 .to_json ，因此对于客户端，您可以在 JSON 中得到它：

```
"#<Client:0x1051d4fb0>":[{ "project":{"name":"My Only Project", "client_id":1}}] 
```

但我真的需要这样：

```
{"client":{"name":"Home Workers Unite", "id":1, "projects":[{"name":"My Only Project","client_id":1}]}} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:00:32.523

正如@LarryK 所说，您想要输出的json 不是有效的json。在 json 中，键只能是字符串，而 ruby​​ 可以将对象作为键。另外，我建议 json 响应更像以下内容：

```
{clients: [
    {
      "name":"Home Workers Unite", 
      "id":1,
      "projects": [
        {"name":"My First Project", "id":1},
        {"name":"My Second Project", "id":2}
      ]
    }
  ]
} 
```

您已经有可用的项目。您还拥有按客户端对它们进行分组的代码，但`to_json`对生成的哈希进行简单的处理并不适合这里。您需要进一步操作分组响应才能直接使用`to_json`：

```
results = {clients: []}
@projects.group_by(&:client).each do |client, projects|
  results[:clients] << {
    id: client.id,
    name: client.name
    projects: projects
  } 
end
results.to_json 
```

这是解决方案的 ruby​​/rails 版本。但是，如果您有一个 json 繁重的应用程序，我建议您使用一些 gem（[jbuilder](https://github.com/rails/jbuilder)、[rabl](https://github.com/nesquena/rabl)或任何其他）来创建所需的响应。

PS：代码未经测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:09:22.447

我建议您看一下 gem **act_as_api**。它使将对象作为 JSON 操作变得非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:18:10.357

您的原始帖子中的 json 不是有效的 json，因为您没有项目数组的属性名称。

查看来自 Murifox 的acts_as_api 建议和来自 railscasts 的其他 api 技术——他最近刚刚做了一个。

如果您的 api 用户一次只需要一个客户端，您可以使用 json 结构，例如：

```
{client: {"name":"Home Workers Unite", "id":1},
 projects: [
      {"name":"My Only Project", "client_id":1}
           ]
} 
```

或者您可以发送所需客户和项目信息的子集（或全部）：

```
{clients: [
   {"name":"Home Workers Unite", "id":1},
   {"name":"Factory Workers Unite", "id":2},
          ],
 projects: [
      {"name":"My Only Project", "client_id":1},
      {"name":"Project 2", "client_id":2},
      {"name":"Project 3", "client_id":2}
           ]
} 
```

好处：从服务器到 api 客户端的往返次数更少。

# java - 在哪里可以找到 Java 的 com.drew jar？

> ID：10838020
> 
> 赞同：0
> 
> 时间：2012-05-31T17:01:42.950
> 
> 标签：java

我找不到任何可以到达的地方

```
com.drew.* 
```

我搜索了它的罐子，但实际上并没有成功。因此，我无法解决错误：

```
The import com.drew cannot be resolved 
```

有什么建议么？

提前致谢..

**编辑：**

我的应用程序存在 jar 依赖版本不匹配问题。关于获取与此类对应的 jar 版本的整个列表有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:05:13.400

您可以随时使用[findjar.com](http://findjar.com/index.x)来处理此类事情。

com.drew 的示例结果： [http ://www.findjar.com/class/com/drew/lang/Rational.html](http://www.findjar.com/class/com/drew/lang/Rational.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:05:13.120

也许在这里？[http://www.findjar.com/jar/com/drewnoakes/metadata-extractor/2.4.0-beta-1/metadata-extractor-2.4.0-beta-1.jar.html?all=true](http://www.findjar.com/jar/com/drewnoakes/metadata-extractor/2.4.0-beta-1/metadata-extractor-2.4.0-beta-1.jar.html?all=true)

# php - 为 iOS 打包网络应用程序 - 全屏 iframe？

> ID：10838022
> 
> 赞同：4
> 
> 时间：2012-05-31T17:01:55.837
> 
> 标签：php, ios, ajax, web-applications, cordova

我们已经构建了一个在线网络应用程序，现在想将它打包用于 ipad 和 iPhone。理想情况下，我们只需要一个像 iframe 这样的全屏浏览器窗口，它可以从 Web 加载完整的应用程序。显然我们可以在浏览器中执行此操作，但我们需要在桌面上拥有自己的启动图标以及删除浏览器地址栏。我听说过 phoneGap 和 Appcelerator，但我不确定是否可以使用这些平台进行此设置？

有没有一种简单的方法可以实现这一目标？

我需要注意 iOS 上的任何问题或安全问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T17:26:35.220

很多网络应用程序都在应用商店。他们只是将 UIWebView 放在一个空的应用程序中并将其指向网络应用程序。一切都将像在 Safari 中一样运行，但不会有工具栏等。这需要您拥有 Xcode 和开发人员计划的成员资格。

如果你不想通过应用商店，你仍然可以设置你的应用，这样你就可以将它保存到你的设备上，它就会像原生一样运行。这是一个示例的链接：

[http://sixrevisions.com/web-development/html5-iphone-app/](http://sixrevisions.com/web-development/html5-iphone-app/)

所以你必须决定哪个最适合你。

**带有 UIWebView 的原生 iOS 应用**

*   在应用商店曝光
*   如果您愿意，可以将您的应用与原生 iOS UI 元素结合起来
*   可以使用加速度计、蓝牙、游戏中心和其他原生应用程序功能

**“离线”HTML5 应用程序**

*   无需会员资格或 Xcode
*   完全控制您的应用程序（无管理）
*   轻松适应在其他设备上工作
*   如果你卖东西，你不必支付 30% 的折扣

在许多情况下，一旦应用在设备上，每个选项的用户体验都是相同的。权衡选项并找出最适合您的选项。

**使用 UIWebView 设置原生 iOS 应用程序的说明**

1.  打开 Xcode 并选择 File > New > Project...
2.  输入产品名称并选择设备系列。选中“使用自动引用计数”并取消选中“使用情节提要”和“包含单元测试”
3.  选择项目的放置位置
4.  打开 ViewController.m 并将下面的代码插入到`viewDidLoad`该行的正下方`[super viewDidLoad]`。
5.  将网址“http://www.google.com”更改为您的网络应用程序的地址。

> ```
> UIWebView *webView = [[UIWebView alloc] initWithFrame:self.view.frame];
> NSString *urlAddress = @"http://www.google.com";
> NSURL *url = [NSURL URLWithString:urlAddress];
> NSURLRequest *request = [NSURLRequest requestWithURL:url];
> [webView loadRequest:request];
> [self.view addSubview:webView]; 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:28:51.300

您可以要求用户将网站添加到他们的主屏幕，使用类似[这样](http://cubiq.org/add-to-home-screen)的东西。

如果他们这样做了，您可以使用 `<meta name="apple-mobile-web-app-capable" content="yes" />`它来删除标准的 Safari UI，它不会显示标准的 Safari UI。

要指定主屏幕的图标，请使用`<link rel="apple-touch-icon" href="/custom_icon.png"/>`。

您可以[在此处](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)查找有关 iOS 上的 Web 应用程序的更多信息，包括如何设置多个图标大小以及如何设置启动图像。

# java - GAE/J：将 PDF 数据写入 Google Doc

> ID：10838026
> 
> 赞同：0
> 
> 时间：2012-05-31T17:02:07.757
> 
> 标签：java, google-app-engine

在 GAE/J 中，我需要生成 PDF 并以某种方式将其放入 ResumableGDataFileUploader 以上传到 Google Docs。我无法将数据转储到文件中，因为 GAE/J 不支持任何可以读取或写入文件的类。

有谁知道填写其余代码的好方法？

```
DocsService docsService = ...
Asset asset = new Asset("text/html", getHTML().getBytes(), "");
Document document = new Document(asset);
Conversion conversion = new Conversion(document, "application/pdf");
ConversionService service = ConversionServiceFactory.getConversionService();
ConversionResult result = service.convert(conversion);
for (Asset assetIter : result.getOutputDoc().getAssets()) {
    byte[] data = assetIter.getData();
    //How do I get the generated PDF into the ResumableGDataFileUploader?
    ...
    ResumableGDataFileUploader.Builder builder = new ResumableGDataFileUploader.Builder(...);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:40:50.420

您可以使用 blobstore 中的文件 API 读取、写入和创建文件。

# c++ - Winsock C++ 应用程序无法在某些网络上运行

> ID：10838028
> 
> 赞同：0
> 
> 时间：2012-05-31T17:02:16.590
> 
> 标签：c++, winapi, network-programming, winsock

此代码在我的网络上运行良好，但在我朋友的网络上运行良好。客户端无法连接到我朋友的主机。我网络上的默认网关是 10.0.1.1，子网掩码是 255.255.255.0。我朋友的默认网关是192.168.1.1，子网掩码也是一样的。顺便说一下，这些是无线网络连接上无线 LAN 适配器的 IP。在我朋友的网络上，客户端套接字和服务器套接字都初始化良好，但它们没有相互连接。如果您在同一台计算机上运行主机和客户端，它们将连接，但不会在不同的计算机上。一台我的网络，两台电脑都运行windows 7，他的一台运行win7，一台运行win Vista

```
//Socket.h
#pragma once
#include <iostream>
#include "WinSock2.h"

 using namespace std;

 const int STRLEN = 256;

 class Socket
 {
     protected:
         WSADATA wsaData;
         SOCKET mySocket;
         SOCKET myBackup;
         SOCKET acceptSocket;
         sockaddr_in myAddress;
     public:
         Socket();
         ~Socket();
         bool SendData( char* );
         bool RecvData( char*, int );
         void CloseConnection();
         void GetAndSendMessage();
 };

 class ServerSocket : public Socket
 {
     public:
         void Listen();
         void Bind( int port );
         void StartHosting( int port );
 };

 class ClientSocket : public Socket
 {
     public:
         void ConnectToServer( const char *ipAddress, int port );
 };

//Socket.cpp
#include "Socket.h"

    Socket::Socket()
{
    if( WSAStartup( MAKEWORD(2, 2), &wsaData ) != NO_ERROR )
    {
        cerr<<"Socket Initialization: Error with WSAStartup\n";
        system("pause");
        WSACleanup();
        exit(10);
    }

    //Create a socket
    mySocket = socket( AF_INET, SOCK_STREAM, IPPROTO_TCP );

    if ( mySocket == INVALID_SOCKET )
    {
        cerr<<"Socket Initialization: Error creating socket"<<endl;
        system("pause");
        WSACleanup();
        exit(11);
    }

    myBackup = mySocket;
}

Socket::~Socket()
{
    WSACleanup();
}

bool Socket::SendData( char *buffer )
{
    send( mySocket, buffer, strlen( buffer ), 0 );
    return true;
}

bool Socket::RecvData( char *buffer, int size )
{
    int i = recv( mySocket, buffer, size, 0 );
    buffer[i] = '\0';
    return true;
}

void Socket::CloseConnection()
{
    //cout<<"CLOSE CONNECTION"<<endl;
    closesocket( mySocket );
    mySocket = myBackup;
}

void Socket::GetAndSendMessage()
{
    char message[STRLEN];
    cin.ignore();
    cout<<"Send > ";
    cin.get( message, STRLEN );
    SendData( message );
}

void ServerSocket::StartHosting( int port )
{
     Bind( port );
        Listen();
}

void ServerSocket::Listen()
{
    //cout<<"LISTEN FOR CLIENT..."<<endl;

    if ( listen ( mySocket, 1 ) == SOCKET_ERROR )
    {
        cerr<<"ServerSocket: Error listening on socket\n";
        system("pause");
        WSACleanup();
        exit(15);
    }

    //cout<<"ACCEPT CONNECTION..."<<endl;

    acceptSocket = accept( myBackup, NULL, NULL );
    while ( acceptSocket == SOCKET_ERROR )
    {
        acceptSocket = accept( myBackup, NULL, NULL );
    }
    mySocket = acceptSocket;
}

void ServerSocket::Bind( int port )
{
    myAddress.sin_family = AF_INET;
    myAddress.sin_addr.s_addr = inet_addr( "0.0.0.0" );
    myAddress.sin_port = htons( port );

    //cout<<"BIND TO PORT "<<port<<endl;

    if ( bind ( mySocket, (SOCKADDR*) &myAddress, sizeof( myAddress) ) == SOCKET_ERROR )
    {
        cerr<<"ServerSocket: Failed to connect\n";
        system("pause");
        WSACleanup();
        exit(14);
      }
}
void ClientSocket::ConnectToServer( const char *ipAddress, int port )
{
    myAddress.sin_family = AF_INET;
    myAddress.sin_addr.s_addr = inet_addr( ipAddress );
    myAddress.sin_port = htons( port );

    //cout<<"CONNECTED"<<endl;

    if ( connect( mySocket, (SOCKADDR*) &myAddress, sizeof( myAddress ) ) == SOCKET_ERROR )
    {
        cerr<<"ClientSocket: Failed to connect\n";
        system("pause");
        WSACleanup();
        exit(13);
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:26:56.900

大多数现代无线接入点都提供“无线隔离”功能，可防止无线主机看到网络上的另一台主机（除了热点本身）。这是默认情况下大部分启用的安全功能。据我所知，这是您问题的最可能原因。只需检查您的无线 AP 设置并禁用隔离。

# javascript - javascript获取父对象/变量的名称

> ID：10838032
> 
> 赞同：7
> 
> 时间：2012-05-31T17:02:30.290
> 
> 标签：javascript, object

可以说我有

```
var myObject = {

  'myFunction' : function () {
    // something here that lets me get 'myObject'
  }

} 
```

我已经尝试过在这里找到的各种函数和类似的东西，`this.constructor.name`但我总是得到“对象”作为返回的值。在这种情况下，有什么方法可以获取变量的实际名称吗？

编辑解释*为什么*，也许人们会更好地理解......我希望能够制作一个使用 setInterval 连续调用的函数。像这样的东西：

```
var myObject = {
  'intval' : '',
  'timeout' : 500,

  'start' : function () {
    this.objectName = 'myObject'; // <--I want this to be dynamically popped
    this.intval=window.setInterval("window['"+this.objectName+"'].myFunction()",this.timeout);
  },

  'stop' : function () {
    window.clearInterval(this.intval);
    this.intval='';
  },

  'myFunction' : function () {
    // do something
  }
} 
```

如果我将 'myObject' 硬编码到 this.objectName，这很好用，但我不希望它被硬编码。问题是我不只是这样做`setInterval("window[this.objectName]",100) because`setInterval``is not in the right context when`运行，我不想让对象名硬编码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:12:39.840

不，你不能在 JavaScript 中做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T17:21:31.347

单程;

```
var myObject = {
    'myFunction' : function () {
        for (var name in window) {
            if (window[name] === this) { 
                alert(name);
                break;
            }
        }
     }
} 
```

不是很好的 IMO，如果你将它包装在你自己的命名空间中会稍微好一点。

你也可以一直

```
var myObject = {
    moniker: "myObject",
    ... 
```

根据您的更新，您根本不需要解析对象；

```
var myObject = {
    'intval' : '',
    'timeout' : 1500,
    'start' : function () {
        var self = this;
        this.intval = window.setInterval(function() {
            self.myFunction()
        }, this.timeout);
    },
    'myFunction' : function() {
        alert(this.intval);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:19:56.457

```
for (var name in this.global)
      if (this.global[name] == this) 
        return name 
```

[如何在Javascript中将类对象的名称作为字符串获取？](https://stackoverflow.com/questions/789675/how-to-get-class-objects-name-as-a-string-in-javascript)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T17:37:09.220

简而言之，不。

您创建对象的方式`myObject`只不过是与对象文字（相对松散）从属关系的标签。在 Java 或 C++ 术语中，`myObject`它更像是一个指针而不是类名。如果您想在标签`myObject`和它引用的对象之间建立更牢固的联系，则需要使用构造函数或子类模式。请参阅golimojo.com 上的[这篇文章](http://www.golimojo.com/etc/js-subclass.html)以获得相当可靠的概述。

# cloud - 标准字段，如何以及是否访问它们？

> ID：10838037
> 
> 赞同：0
> 
> 时间：2012-05-31T17:02:48.637
> 
> 标签：cloud, salesforce, apex-code

我有几个对象，其中我定义了一些自定义字段和一个字段作为标准字段。

首先，我将尝试解释我将一个字段定义为标准字段的原因。

我定义的这对对象代表记录，如果记录已经在系统中，我必须在我的应用程序中更新它的值。对于每个对象，我都被赋予了一个键，例如对于“联系”对象，我被赋予了“联系电子邮件”作为键。因此，我将联系人电子邮件作为标准字段，而将联系人姓名作为客户字段。

所以，我的问题是，

1：如果键是自定义字段还是标准字段，这是否重要？

2 : 为什么标准字段没有 API 名称。如果没有 API 名称，如何从顶点代码访问标准字段？

也是最后但并非最不重要的

3：拥有一个键的意义是什么，我的意思是如果一个字段是键，那么它以什么方式与其他字段分开。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:20:15.623

1）假设您希望您的密钥是唯一的，您是否考虑过如何使用标准字段来处理这个问题？没有开箱即用的方法来强制使用标准字段的唯一性。有这样一个功能的[想法交换请求](http://success.salesforce.com/ideaView?id=08730000000Bqct)。

也就是说，您可以创建一个自定义字段，该字段接受来自标准字段的值（通过工作流或触发器），并强制自定义字段是唯一的。

您也可以只使用自定义字段而不使用等效的标准字段：根据您的示例。您可以轻松地创建一个带有“电子邮件”标签的自定义字段，并简单地从页面布局和/或配置文件中隐藏标准电子邮件字段。

2) 标准字段肯定有[API 名称](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_contact.htm#topic-title)。

3）您是否要求定义[关键字段](http://en.wikipedia.org/wiki/Key_field)？

# c++ - 将数组传递给 C++ 中的函数会更改它的值，而无需我在函数内部执行任何更改

> ID：10838041
> 
> 赞同：1
> 
> 时间：2012-05-31T17:03:15.483
> 
> 标签：c++, arrays, pointers

我对 C++ 数组有一个非常奇怪的问题。一切都很好，直到我将它传递给一个函数以将其写入磁盘，之后，阵列被更改而我没有对其执行任何操作。

```
 int saveMatrix(Long64_t*, unsigned int, const char*);

    void resetArray(Long64_t* array, unsigned int size)
    {
        for (unsigned long int i = 0; i < size; i++)
            array[i] = 0;
    }

    int saveMatrix(Long64_t* array, unsigned int size, const char* filename)
    {
        // Returns:
        //  0 - Exit
        //  1 - Error

        ofstream out(filename, ios::out);
        if (!out) {
            cout << "Cannot open file.";
            return 1;
        }

        for (unsigned long int i = 0; i < size; i++) {
            out << array[i] << " ";
        }

        out.close();

        return 0;
    }

int main(int argc, char** argv) {
    if (argc != 2) {
        cout << "The program needs the name of the ROOT file to analyse." << endl;
        return 1;
    }
    else
        return gf_partial(argv[1]);
}
#endif

#include "../include/ROOT_Tree.hh"
#include "jbmArray.hh"

int gf_partial(const char* name) {
    // init macro
    gROOT->Reset();

    unsigned long int i, j;

    const unsigned int DetectorNumber = 4;
    /* Detectors are:
     0 lefs60Foil
     1 lefs60Fl
     2 lefs60Ml
     3 lefs150Foil
     4 lefs150F
     5 lefs150M
     6 ca60D
     7 ca60C
     8 ca60B
    */
    const double sourceRadius = 20.; // LAN2B In cm
    // const double sourceRadius = 11.; // LAN2A In cm
    const Int_t numberOfChannels = 4;
    // Float_t energyChannels[numberOfChannels] = {52., 85., 141., 227.}; // LAN2A F electron
    Float_t energyChannels[numberOfChannels] = {51., 80., 135., 218.}; // LAN2B F electron
    // Float_t energyChannels[numberOfChannels] = {42., 55., 130., 220.}; // LAN2B B electron
    // Float_t energyChannels[numberOfChannels] = {66., 101., 167., 269., 447., 798., 1391., 2926.}; // LAN2B M proton
    const Int_t numberOfDetectors = 9;
    Float_t energyChannelsError[numberOfChannels] = {0., 0., 0., 0.};
    // Float_t energyChannelsError[numberOfChannels] = {0., 0., 0., 0., 0., 0., 0., 0.};

    Float_t vGeometryFactors[numberOfChannels];
    Float_t vError[numberOfChannels]; // the error amount
    Float_t vRealError[numberOfChannels]; // the calculated error

    Long64_t nHitsInDetector[numberOfChannels];
    resetArray(nHitsInDetector, numberOfChannels);

    Long64_t nHitsInDetectorNoSecondaries[numberOfChannels];
    resetArray(nHitsInDetectorNoSecondaries, numberOfChannels);

    double nEmitedParticlesPerChannel[numberOfChannels];
    resetArray(nEmitedParticlesPerChannel, numberOfChannels);

    //exclusiongraph()->Update();

    if (!TClassTable::GetDict("Event")) {
        gSystem->Load("../lib/libROOT_Tree.so");
    }

    // read the tree file generated in GEANT4
    TFile* treeFile = new TFile(name);
    treeFile->ls();
    TTree *myTree = (TTree*) treeFile->Get("hiscaleSim");

    // Create pointer to an event object for reading the branch values.
    Event* myEvent = new Event();
    TBranch* bEvent = myTree->GetBranch("EventBranch");
    bEvent->SetAddress(&myEvent);

    TClonesArray* hits = myEvent->GetHits();
    Hit* myHit;

    unsigned long int nEvents = myTree->GetEntries();
    cout << endl << "Number of Total Events = " << nEvents << endl << endl;

    Float_t sourceEnergy = 0.0;
    Float_t depositedEnergy = 0.0;
    Float_t sourceTime = 0.0;
    UInt_t parentID = 0;
    UInt_t trackID = 0;

    std::vector<float> fSourcePosition(3);
    std::vector<float> minSourcePosition(3);
    std::vector<float> maxSourcePosition(3);

    std::vector<float> fSourceMomentumDirection(3);
    std::vector<float> minSourceMomentumDirection(3);
    std::vector<float> maxSourceMomentumDirection(3);

    std::vector<float> totalDepositedEnergy(numberOfDetectors);
    //std::vector<unsigned long int> nHitsInDetector(numberOfDetectors);

    // std::vector<unsigned long int> nHitsInDetectorNoSecondaries(numberOfChannels);

    Float_t fParticlePDGMass = 0.0;
    Float_t fParticlePDGCharge = 0.0;
    //fParticleAtomicNumber = 0;
    //fParticleAtomicMass = 0;

    for (i = 0; i < nEvents; i++) {
        myTree->GetEntry(i);

        depositedEnergy = 0;
        sourceEnergy = myEvent->GetSourceEnergy();
        for (j = 0; j < myEvent->GetNHit(); j++) {
            myHit = (Hit*)hits->UncheckedAt(j);
            if (myHit->GetDetectorN() == DetectorNumber)
                depositedEnergy = myHit->GetTotalDepositedEnergy();
        }

        parentID = myEvent->GetParentID();
        trackID = myEvent->GetTrackID();

        for (j = 0; j < numberOfChannels; j++) {
            if (sourceEnergy == energyChannels[j]) {
                nEmitedParticlesPerChannel[j]++;
                if (depositedEnergy != 0) {
                    if (parentID == 0)
                        nHitsInDetectorNoSecondaries[j]++;
                    nHitsInDetector[j]++;
                }
            }
        }
    }

    char strnHitsInDetector[80];
    strcpy (strnHitsInDetector, name);
    strcat (strnHitsInDetector, ".nHitsInDetector");
    saveMatrix(nHitsInDetector, numberOfChannels, strnHitsInDetector);

    //char strnHitsInDetector[80];
    strcpy (strnHitsInDetector, name);
    strcat (strnHitsInDetector, ".nHitsInDetectorNoSecondaries");
    saveMatrix(nHitsInDetectorNoSecondaries, numberOfChannels, strnHitsInDetector);

    char strnEmitedParticlesPerChannel[80];
    strcpy (strnEmitedParticlesPerChannel, name);
    strcat (strnEmitedParticlesPerChannel, ".nEmitedParticlesPerChannel");
    saveMatrix(nEmitedParticlesPerChannel, numberOfChannels, strnEmitedParticlesPerChannel);

// from now on nEmitedParticlesPerChannel changes it's value and it's not ok anymore. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T17:08:13.197

我认为问题在于这些代码行：

```
const Int_t numberOfChannels = 2;

Long64_t nEmitedParticlesPerChannel[numberOfChannels];
resetArray(nEmitedParticlesPerChannel, numberOfChannels);

nEmitedParticlesPerChannel[1] = 10;
nEmitedParticlesPerChannel[2] = 20; 
```

请注意，您已将数组`nEmittedParticlesPerChannel`的大小调整为其中包含两个元素，然后写入索引 1 和 2。由于 C++ 数组是零索引的，这意味着您正在注销数组的末尾并破坏内存中的任何值恰好在它之后。这可能会破坏您作为参数传入的数组的内容，因为这会导致未定义的行为。

要解决此问题，请尝试将最后两行重写为

```
nEmitedParticlesPerChannel[0] = 10;
nEmitedParticlesPerChannel[1] = 20; 
```

希望这可以帮助！

# c# - 将 WPF 样式应用于用户控件中的边框

> ID：10838042
> 
> 赞同：4
> 
> 时间：2012-05-31T17:03:35.617
> 
> 标签：c#, wpf, silverlight, styles

我有一个非常简单的 UserControl，它只包含一个包含在 Border 元素中的 TextBlock。

有没有办法从包含窗口将样式应用于 UserControl 中的 TextBlock。

我知道我可以用..

```
<Style TargetType='TextBlock'> 
```

但这适用于我的窗口中的所有 TextBlocks，而不仅仅是我的 UserControl 中的那些

所以我希望能够说类似的话...

```
<Style TargetType='MyUserControl.TextBlock'> 
```

谢谢，

富有的。

PS。这是我正在尝试做的一个简化示例！

## 附加说明

当我今晚开车回家时，这在我的脑海里嗡嗡作响，我想到了一个可能的解决方案..那就是创建 TextBlock 控件的基本子类，并将其命名为 MyTextBlock.. 所以只要有一个定义喜欢

```
public class MyTextBlock : TextBlock { } 
```

然后，在用户控件中，使用“MyTextBlock”而不是“TextBlock”。这将允许我将样式应用于“MyTextBlock”类型。答对了 ！！！

也许这不是最整洁的方法，但它的代码很少，而且可以工作。

但是，由于我对 WPF 还很陌生，所以我对实现这一目标的更标准的方式非常感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T20:20:52.703

如果您想将 a`Style`应用于所有`TextBlocks`内部，一个选项`MyUserControl`是这个

```
<Style TargetType="{x:Type my:MyUserControl}">
    <Style.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="Blue"/>
        </Style>
    </Style.Resources>
</Style> 
```

如果您想`Style`为`MyUserControl`您添加另一个，只需将其基于默认值`Style`

```
<Style x:Key="myStyle" TargetType="{x:Type my:MyUserControl}"
       BasedOn="{StaticResource {x:Type my:MyUserControl}}">
    <!-- ... -->
</Style> 
```

* * *

否则，如果您希望能够为`Style`MyUserControl 中的某些控件设置 a，您可以使用 DependencyProperties。例如，`TextBlock`您可以拥有一种名为的样式`TextBlockStyle`。将`TextBlock`绑定到这个`Style`，你可以`Style`从你的窗口（或任何你使用它的地方）设置。这也可以在框架中的一些控件中看到，`AutoCompleteBox`例如在工具包中

```
<toolkit:AutoCompleteBox>
    <toolkit:AutoCompleteBox.TextBoxStyle>
        <Style TargetType="TextBox">
            <Setter Property="MaxLength" Value="10"/>
        </Style>
    </toolkit:AutoCompleteBox.TextBoxStyle>
</toolkit:AutoCompleteBox> 
```

*MyUserControl.xaml*

```
<Border BorderThickness="1">
    <TextBlock Style="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}},
                               Path=TextBlockStyle}"
               Text="Test"/>
</Border> 
```

*MyUserControl.xaml.cs*

```
public partial class MyUserControl : UserControl
{
    public static DependencyProperty TextBlockStyleProperty =
        DependencyProperty.Register("TextBlockStyle",
                                    typeof(Style),
                                    typeof(MyUserControl));
    public MyUserControl()
    {
        InitializeComponent();
    }

    public Style TextBlockStyle
    {
        get { return (Style)GetValue(TextBlockStyleProperty); }
        set { SetValue(TextBlockStyleProperty, value); }
    }
} 
```

然后你设置`Style`当你在标记中声明你的实例时，例如

```
<my:MyUserControl>
    <my:MyUserControl.TextBlockStyle>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="Green"/>
        </Style>
    </my:MyUserControl.TextBlockStyle>
</my:MyUserControl> 
```

**更新**

要在资源级别设置它，您可以`MyUserControl`在窗口资源或 App.xaml 中添加默认样式

```
<Window.Resources>
    <Style TargetType="{x:Type my:MyUserControl}">
        <Setter Property="TextBlockStyle">
            <Setter.Value>
                <Style TargetType="TextBlock">
                    <Setter Property="Foreground" Value="Green"/>
                </Style>
            </Setter.Value>                
        </Setter>
    </Style>
</Window.Resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:19:09.060

您可以更改一些内容。

首先，您可以将 Styles 与资源键一起使用。所以你会写：

```
<Style x:Key="myTextStyle" TargetType="{x:Type TextBlock"> 
```

然后为了让 TextBox 应用这种样式，它需要指定：

```
<TextBlock Style="{StaticResource myTextStyle" /> 
```

如果您不想修改 UserControl 并且只想在将 UserControl 嵌套在其中的元素中应用样式，请记住您可以在嵌套元素的资源字典中声明样式。当您放置 UserControl 时，请考虑这样做：

```
<local:UserControl>
    <local:UserControl.Resources>
        <Style TargetType="{x:Type TextBlock}">
            ...
        </Style>
    </local:UserControl.Resources>
</local:UserControl> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:20:34.770

我可以想到两种方法：

一种是通过显式设置样式在包含窗口中的代码中

`MyUserControl.TextBlockName.Style = FindResource("TextBlockStyle") as Style;`

另一种方法是创建一个[DependencyProperty](http://msdn.microsoft.com/en-us/library/ms752914.aspx)来保存 Textblock 样式，并在更改时将样式应用于 TextBlock 元素`DependencyProperty`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T17:18:56.533

如果您的 xaml 中有类似的内容：

```
 <xmlns:local = "myCustonUserControl"> 
```

您可以将其用作样式定义：

```
 <Style TargetType="{x:Type local:MyUserControl}"> 
```

希望有帮助！

# javascript - 如何根据值的长度使用 querySelectorAll

> ID：10838050
> 
> 赞同：0
> 
> 时间：2012-05-31T17:04:12.260
> 
> 标签：javascript, css-selectors, selectors-api

这是一个相当具体的问题，但我正在尝试对所有具有特定长度的“href”值且在该值末尾不包含“html”的“a”标签使用 querySelectorAll。

我了解 querySelectorAll 的基础知识，但不了解如何完成这样的事情......

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:05:59.017

目前，不可能使用选择器对属性值施加任何长度限制。

你能得到的最接近的是这个，没有长度限制：

```
document.querySelectorAll('a[href]:not([href$="html"])'); 
```

# javascript - Javascript中的Ajax类不起作用

> ID：10838051
> 
> 赞同：1
> 
> 时间：2012-05-31T17:04:13.167
> 
> 标签：javascript

我正在尝试在 Jquery 中创建自己的 ajax 方法版本，以查看它是如何工作的：

```
function ajax(url, method) {
    var self = this;
    this.xhr = new XMLHttpRequest();
    this.xhr.onreadystate = function() {
        self.xhrHandler();
    }
    this.xhr.open(method, url, true);
    this.xhr.send();
}

ajax.prototype.xhrHandler = function() {
    if (this.xhr.readyState == 4) {
        console.log(this.xhr.responseText);
    }
    console.log("test");
} 
```

但是，它永远不会进入 xhrHandler 函数，因为它永远不会打印出“test”。到底是怎么回事？

编辑：这是一个使用示例：`var ex = new ajax("www.fake.com/api/item/1/", "GET");`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:10:10.300

处理程序被调用`onreadystatechange`，而不仅仅是`onreadystate`.

而且（这是一个细节），您还应该测试`status`.

# entity-framework - ef-code-first 的数据库连接错误

> ID：10838054
> 
> 赞同：0
> 
> 时间：2012-05-31T17:04:23.400
> 
> 标签：entity-framework, ef-code-first, code-first

我是 ef 代码的新手，刚刚使用逆向工程代码在 Microsoft SQL Server 2008 上创建现有数据库的模型。

我遇到的问题是，即使我在连接字符串中提供了用户 ID 和密码，它也会给我一个身份验证错误，同时抱怨我的计算机名称，就好像我使用的是集成安全性（我不是。）

我得到的错误是这样的：

无法打开登录请求的数据库“edmTestDBContext”。登录失败。\r\n用户“jwelty-thinkpad\jwelty”登录失败。

我的连接字符串是这样的：

数据源=srv-123；初始目录=edmTestDB；持久安全信息=True；用户ID=user；密码=userpass；MultipleActiveResultSets=True

它对我来说就像它忽略了我的用户 ID 并使用我的机器名称一样。

有趣的是，连接字符串是由实体框架工具自动生成的，它可以用于构建模型，但不能用于将模型实际连接回源数据库。

有什么想法吗？

我确实拥有我的用户名/密码的完全权限，因为这是我在 Sql Server Management Studio 中使用的，这也是我最初创建数据库的方式。

我尝试添加“集成安全=假；” 这无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:51:29.937

EF Code-first 中有一些内置约定，例如使用 DbContext 派生上下文类的名称在 .config 文件中查找相关连接字符串。因此，如果您的上下文类名为`BlogContext`，它将首先查找以下 connectionString：

```
<connectionStrings>
    <clear />
    <add
      name="BlogContext"
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:56:00.363

看来 EF 没有找到您的连接字符串。确保它在正在使用的配置文件中（您可能需要将它从类库配置复制到应用程序配置）并且它与上下文类具有相同的名称，或者您通过调用为 DbContext 提供名称适当的基础构造函数。例如：

```
public EdmTestDBContext()
 : base("name=MyConnectionStringName")
{
} 
```

# codeigniter - 如何获取主路由，如果它不存在并且我们被发送到 404 页面

> ID：10838056
> 
> 赞同：1
> 
> 时间：2012-05-31T17:04:28.157
> 
> 标签：codeigniter

所以基本上我正在尝试调试我的路由，因为它们没有按预期工作，但是当使用分析器时，我可以看到 URI 字符串，它基本上是浏览器地址栏中 URL 的第二部分和 CLASS/METHOD 是总是我被重定向到的 404 页面。那么如何获取在发送到 404 之前尝试运行的主要路由类、方法和参数/参数？

例如

```
$route['en/catalog/(.+)/(.+)'] = "ccatalog/index/$1/$2"; 
```

出了点问题，我被重定向到 404，但我想查看哪个类（这里最有可能是“ **ccatalog** ”）、哪个方法（希望是“ **index** ”）和参数（**$1**、**$2**）。

提前感谢任何可以帮助我解决问题的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:05:21.353

我看不出你的路线不起作用的原因。

直接`your_path/ccatalog/index/whatever/whatever`在浏览器中打开即可查看。

如果它给你一个 404，这意味着问题出在你的控制器上，可能是控制器或函数命名。

如果它工作正常，那么您可以使用`pre_system` [钩子](http://codeigniter.com/user_guide/general/hooks.html)来计算参数值。

您也可以考虑修改核心中的路由文件（确保将它们改回来），以找出真正的问题是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:21:49.060

实际上，这很容易做到：

```
$this->uri->rsegment(1); 
```

# windows-7 - 当 Win7 和 Win7 SP1 上的 Enabled=false 时，VB6 DTPicker 控件日期不显示

> ID：10838060
> 
> 赞同：0
> 
> 时间：2012-05-31T17:04:56.203
> 
> 标签：windows-7, vb6

使用 DTPicker 日期控件时，我的一台 Win7 机器上出现了奇怪的行为。当控件未启用（myDTPicker.Enabled=false）时，日期文本不显示，为空白。

当 (myDTPicker.Enabled=false) 日期文本可见且控件显示为灰色时，我的另一台 Win7 SP1 机器上的相同程序按预期工作；这很好。

原来日期文本为空白的Win7机器没有SP1，所以我认为可能是问题所在。我升级到 SP1，但问题并没有消失。也重新启动只是为了确保。

您是否碰巧知道当 DTPicker.Enabled=false 在一个 Win7 框与另一个框上时可能导致日期文本为空白的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:19:11.333

VB6 中的 DTP 从系统的“已禁用项目”字体颜色中获取其前景文本颜色 - 因此，如果将其设置为浅灰色而不是更常见的深灰色，它将具有使 DTP 在禁用时看起来空白的效果。您需要转到“[高级窗口颜色和外观](http://www.sevenforums.com/tutorials/282-window-color-appearance-change.html)设置”对话框进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:47:35.583

不确定这是否是您的问题，但在这里我是在黑暗中拍摄的。我以前在 Windows 7 上看到过这个问题，当时 DPI 不是默认值。如今，一些笔记本电脑的默认 DPI 为 125%。尝试将其重置为 100% 并查看是否可以修复它。

# java - 在python中对javax.crypto编码的字符串进行Blowfish解密

> ID：10838061
> 
> 赞同：3
> 
> 时间：2012-05-31T17:04:57.533
> 
> 标签：java, python, encryption, pycrypto, javax.crypto

使用在[https://raw.github.com/usefulfor/usefulfor/master/security/JBoss.java](https://raw.github.com/usefulfor/usefulfor/master/security/JBoss.java)找到的代码，我做了以下事情：

```
bash-3.2$ java -cp . JBoss -e testpython
-27038292d345798947e2852756afcf0a
bash-3.2$ java -cp . JBoss -d -27038292d345798947e2852756afcf0a
testpython 
```

但是，我一辈子都无法弄清楚如何在 python 中使用 pycrypto 解密字符串 '27038292d345798947e2852756afcf0a'。我的理解是 Java 代码使用 Blowfish，而短语“jaas is the way”作为密码的关键。但我无法理解如何在 python 中执行此操作。以下结果大多是不可打印的垃圾：

```
import Crypto
from Crypto.Cipher import Blowfish
from base64 import b64encode, b64decode

bs        = Blowfish.block_size
key       = 'jaas is the way'
plaintext = b'27038292d345798947e2852756afcf0a'
iv        = '\0' * 8

c1 = Blowfish.new(key, Blowfish.MODE_ECB)
c2 = Blowfish.new(key, Blowfish.MODE_CBC, iv)
c3 = Blowfish.new(key, Blowfish.MODE_CFB, iv)
c4 = Blowfish.new(key, Blowfish.MODE_OFB, iv)

msg1 = c1.decrypt(plaintext)
msg2 = c2.decrypt(plaintext)
msg3 = c3.decrypt(plaintext)
msg4 = c4.decrypt(plaintext)

print "msg1 = %s\n" % msg1
print "msg2 = %s\n" % msg2 
print "msg3 = %s\n" % msg3 
print "msg4 = %s\n" % msg4 
```

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T08:22:27.437

首先，Java 示例代码非常糟糕。它将密文输出为整数，而密文应保留为二进制字符串。原因是一个整数可以用无数种二进制编码来表示。例如，数字 1 可以是“0x01”（1 个字节）、“0x0001”（2 个字节）等等。当您处理加密函数时，您必须非常精确地处理表示。

此外，该示例使用`javax.crypto`API 的默认值，在任何地方都没有描述。所以这真的是反复试验。

对于解决方案，您必须知道[如何在 Python 中将负整数转换为十六进制字符串](https://stackoverflow.com/questions/7822956/how-to-convert-negative-integer-value-to-hex-in-python)。在这种情况下，您不需要十六进制字符串，而是它的字节表示。不过这个概念是一样的。我使用 PyCrypto`long_to_bytes`将正整数（任意长度）转换为字节字符串。

```
from Crypto.Cipher import Blowfish
from Crypto.Util.number import long_to_bytes

def tobytestring(val, nbits):
    """Convert an integer (val, even negative) to its byte string representation.
    Parameter nbits is the length of the desired byte string (in bits).
    """
    return long_to_bytes((val + (1 << nbits)) % (1 << nbits), nbits/8)

key = b'jaas is the way'
c1  = Blowfish.new(key, Blowfish.MODE_ECB)

fromjava = b"-27038292d345798947e2852756afcf0a"
# We don't know the real length of the ciphertext, assume it is 16 bytes
ciphertext = tobytestring(int(fromjava, 16), 16*8)
print c1.decrypt(ciphertext) 
```

输出是：

```
'testpython\x06\x06\x06\x06\x06\x06' 
```

从中您可以看到，`javax.crypto`它还添加了 PKCS#5 填充，您需要自行删除。不过，这是微不足道的。

但是，解决问题的**真正**方法是以更好的方式进行 Java 加密。Python 代码将大大简化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T13:20:05.293

这对我有帮助

```
private byte[] encrypt(String key, String plainText) throws GeneralSecurityException {

    SecretKey secret_key = new SecretKeySpec(key.getBytes(), ALGORITM);

    Cipher cipher = Cipher.getInstance(ALGORITM);
    cipher.init(Cipher.ENCRYPT_MODE, secret_key);

    return cipher.doFinal(plainText.getBytes());
} 
```

希望这对你有用，更多[http://dexxtr.com/post/57145943236/blowfish-encrypt-and-decrypt-in-java-android](http://dexxtr.com/post/57145943236/blowfish-encrypt-and-decrypt-in-java-android)

# c# - 非常慢的正则表达式性能？

> ID：10838065
> 
> 赞同：0
> 
> 时间：2012-05-31T17:05:19.743
> 
> 标签：c#, .net, performance

我的应用程序很慢，有时需要几个小时才能恢复正常。当我使用分析器时，我发现代码花费了大量时间，这只不过是发生正则表达式匹配的地方。任何机构都可以指导我如何提高性能。代码片段如下所示

```
Regex rx = new Regex(@"^[A-Za-z0-9]([_\.\-]?[A-Za-z0-9]+)*\@[A-Za-z0-9]([_\.\-]?[A-Za-z0-9]+)*\.[A-Za-z0-9]([_\.\-]?[A-Za-z0-9]+)*$|^$");
rx.IsMatch("john.gilbert.stu.seattle.washington.us"); 
```

有什么办法可以缓存模式并重用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:16:47.093

您可以通过编译和缓存它们来加快 RegEx，但它不太可能解决您所拥有的规模的性能问题。即，由于缓存/编译或任何其他类型的自动处理，一些需要 O(n^2) 的慢 RegEx 不会神奇地变成 O(n)。

您需要检查正则表达式并验证每个表达式的执行次数。最快的代码是根本不需要运行的代码——所以如果你有任何第一个，就消除浪费的匹配。您可能需要切换到更合适的文本解析方式（即，HTML 的 RegEx 解析很可能是错误的方式 - 一些好的 HTML 解析器，如 HtmlAgilityPack 结合目标查询可能更合适）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:25:29.470

如果字符串解析起来并不复杂，我只需将它们转换为字符数组并自己解析它们。它将显着提高性能。RegEx 的性能很差。

```
for (int i = 0; i < string.Length; i++)
{
     if (string[i] has some defining quality)
         if (string[i] meets second requirement)
         // break, change flag, ect.
} 
```

# windows - 使用“IF”命令创建批处理文件

> ID：10838066
> 
> 赞同：6
> 
> 时间：2012-05-31T17:05:30.637
> 
> 标签：windows, command-line, batch-file, command

我创建了一个小批处理文件，用于帮助人们使用 FFMPEG 将 MP4 视频转换为 FLV。一种让我认识的每个人都能轻松使用它的方法。我在想我输入的行对于每种情况都是完美的（将 MP4 文件转换为 FLV），但几天前，它不适用于文件。（对于 FLV 格式的音频样本到高）

我在人们的帮助下找到了另一个代码行来转换它，但我不知道如何在我的批处理文件中正确集成它。

我现在使用的是：

> echo "输入文件名，不带扩展名" : set /p namefile=
> 
> echo "输入你要给目标文件的名称" : set /p destinationfile=
> 
> ffmpeg -i %namefile%.mp4 -c:v libx264 -crf 19 %destinationfile%.flv

我想添加一个“IF”。因为如果这不适用于这一行，请使用该行：

> ffmpeg -i %namefile%.mp4 -c:v libx264 -ar 22050 -crf 28 %destinationfile%.flv

我怎样才能做到这一点 ？

非常感谢您的帮助，如果我对某些事情不清楚，请告诉我，我会尽力说清楚。

谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T17:41:14.337

我不确定 FFMPEG 是否会在失败时返回标准错误代码，但如果确实如此，您可以使用以下内容：

```
ffmpeg -i %namefile%.mp4 -c:v libx264 -crf 19 %destinationfile%.flv
if not errorlevel 1 goto Done
ffmpeg -i %namefile%.mp4 -c:v libx264 -ar 22050 -crf 28 %destinationfile%.flv
:Done 
```

如果此方法不起作用，您可以检查目标文件的存在以确定进一步的操作：

```
ffmpeg -i %namefile%.mp4 -c:v libx264 -crf 19 %destinationfile%.flv
if exist %destinationfile%.flv goto Done
ffmpeg -i %namefile%.mp4 -c:v libx264 -ar 22050 -crf 28 %destinationfile%.flv
:Done 
```

希望这些作品之一。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T18:06:11.570

类似于 EitanT 的第一个解决方案，但没有使用 GOTO。

```
ffmpeg -i %namefile%.mp4 -c:v libx264 -crf 19 %destinationfile%.flv
if errorlevel 1 ffmpeg -i %namefile%.mp4 -c:v libx264 -ar 22050 -crf 28 %destinationfile%.flv 
```

或已
***编辑***-*代码已被截断，现已全部修复*

```
ffmpeg -i %namefile%.mp4 -c:v libx264 -crf 19 %destinationfile%.flv||ffmpeg -i %namefile%.mp4 -c:v libx264 -ar 22050 -crf 28 %destinationfile%.flv 
```

类似于 EitanT 的第二种解决方案，但不使用 GOTO

```
ffmpeg -i %namefile%.mp4 -c:v libx264 -crf 19 %destinationfile%.flv
if not exist %destinationfile%.flv ffmpeg -i %namefile%.mp4 -c:v libx264 -ar 22050 -crf 28 %destinationfile%.flv 
```

# javascript - 将javascript变量发送到经典asp

> ID：10838067
> 
> 赞同：1
> 
> 时间：2012-05-31T17:05:31.047
> 
> 标签：javascript, variables, asp-classic, calculator

我有一个 jQuery 驱动的成本计算器，我想让网页在电子邮件中发送计算器值的摘要。服务器在经典 ASP 上运行。

如何使用 ASP 检索 javascript 变量？

我知道 ASP 代码在页面加载之前运行，而 javascript 代码仅在页面加载后运行，因为 javascript 不是 runat="server"。

如何存储 javascript 变量，以便我可以在处理页面上使用 ASP 代码检索它们？

带有 Javascript 的计算器 --> form action = "process.asp" --> ASP 来获取 javascript 值

[大学成本计算器](http://media.briercrest.ca/calculators/collegecalculator-test-may31.asp)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:19:41.477

另一种解决方案是将 javascript 变量的值设置为隐藏的表单字段。提交表单并在服务器端读取表单值。读取值后，创建并发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:35:31.187

使用[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)或[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)将信息发送到 process.asp

# java - 测试 ANTLR 语法

> ID：10838068
> 
> 赞同：7
> 
> 时间：2012-05-31T17:05:31.943
> 
> 标签：java, grammar, antlr3

所以我一直在使用 ANTLR v3.4 在 Eclipse 中制作语法，并且我已经制作了一个有效的语法，我想确保当我编辑它时一切仍然有效。我每次都可以进入口译员，但这似乎是在浪费时间。

问题：我已经阅读了有关 gunit 的信息，但它提供的下载 gUnit 的链接：（[http://antlr.org/hudson/job/gUnit/org.antlr](http://antlr.org/hudson/job/gUnit/org.antlr) $gunit/lastSuccessfulBuild/ ）不起作用。我怎样才能得到 gUnit。测试语法的最佳方法是什么？它实际上是 gUnit 还是我应该像 jUnit 测试那样做 java 测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:08:36.663

我最近使用 Eclipse 完成了两项 ANTLR3 作业（我正在攻读计算机科学硕士学位）。我发现没有一个文档包含在 Eclipse 中安装、配置、编写和调试语法的过程。因此，在解决了各种问题之后，我发现最简单的方法就是留在 Eclipse 中进行测试。

要使用我开始使用的过程（如下所述），您必须首先安装 ANTLR IDE v2.1.2。直接从 Eclipse Indigo 中添加它：http: [//antlrv3ide.sourceforge.net/updates](http://antlrv3ide.sourceforge.net/updates)。这个站点也有一些关于使用 ANTLR IDE 的有用文档。安装后，必须配置 IDE。视频教程有点过时，但很有帮助。[请参阅如何在 Eclipse](https://stackoverflow.com/questions/8343488/antlr-ide-in-eclipse-doesnt-work/10887515#10887515)中配置 ANTLR IDE 的详细指南。主要配置项是java输出文件夹。在 Eclipse 中通过转到 Windows、首选项、ANTLR、代码生成器，检查项目相关文件夹并在输出文件夹名称框中键入文件夹名称（我的称为“antlr-java”，其他使用“生成”）。

**使用 ANTLR IDE 在 Eclipse Indigo 中测试/调试 ANTLR**

1.  创建新项目后，右键单击它，选择配置，转换为 ANTLR 项目...
2.  在 .g 文件中创建语法并保存。注意：文件名必须与语法名称匹配。
3.  如果有重大错误，请调试语法。Eclipse 显示 ANTLR 错误以及受影响的行。起初，这些错误似乎难以理解，但可以通过使用各种资源来解决它们： - 编写 ANTLR 的人 Terence Parr 的权威 ANTLR 参考 - ANTLR 参考手册 - 谷歌错误；很多时候你会在 stackoverflow 结束；特别是，Bart Kiers 知识渊博，乐于助人（Bart：谢谢你不知道你给了我的帮助）
4.  在解决严重的 ANTLR 错误后的第一次保存时，您在 Eclipse 中配置的 java 输出文件夹将被创建，并且该文件夹中的 java 文件也将被创建。
5.  右键单击 java 输出文件夹，选择 Build Path，Use As a Source Folder。这告诉 Eclipse 在哪里寻找项目的 java 源代码。
6.  新的 java 文件中可能有错误。选择它，然后搜索查找 java 错误。返回您的语法或 java 文件，更正错误，然后重新保存语法，直到语法和 java 文件都没有错误，然后运行它。
7.  从这一点开始，这是通常的修改-运行-调试周期。
8.  我需要的唯一其他 Eclipse 更改是创建一些运行配置来测试命令行参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-21T12:39:20.680

这个问题很老，但我留下一个完整的参考：

对我来说，gUnit 没用。所以我设法找到了如何只测试 Lexer，然后只测试解析器。

> 我在这里回答：[https ://stackoverflow.com/a/53884851/976948](https://stackoverflow.com/a/53884851/976948)

基本上，有两篇关于如何测试它的文章的链接：

*   [词法分析器的单元测试](https://ssricardo.github.io/2018/junit-antlr-lexer/)
*   [解析器的单元测试](https://ssricardo.github.io/2018/junit-antlr-parser/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:18:55.077

您可以在那里下载 gUnit [，](http://www.antlr.org/wiki/pages/viewpageattachments.action?pageId=3244061)但我认为没有最新版本...

试试[Jarvana](http://www.jarvana.com/jarvana/search?search_type=project&project=gUnit) ... 最新版本是 3.4：[http ://repo1.maven.org/maven2/org/antlr/gunit/3.4/gunit-3.4.jar](http://repo1.maven.org/maven2/org/antlr/gunit/3.4/gunit-3.4.jar)

@Dave Newton 是对的。从 ANTLR v3.1 开始，gUnit 包含在主 ANTLR 工具 jar 中，如[该处](http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing)所述。

* * *

直到现在我才知道 gUnit。它看起来很适合语法测试，但我认为 JUnit 测试将完成他们的工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:06:43.373

这是我第一次听说 gUinit 并阅读了它。（我很少使用 ANTLR。）这听起来很有趣，但有一半没用。

我验证语法的方法是使用“正常”单元测试来实际验证整个解析器。问题是，无论如何你都应该有单元测试，而检查语法回归的测试你只需将它添加到那里。根据我的经验，大多数错误来自语义分析和还原，而不是语法。

# oracle - 如何将 sqlplus 中受影响的行数返回给 shell 脚本？

> ID：10838070
> 
> 赞同：0
> 
> 时间：2012-05-31T17:05:38.340
> 
> 标签：oracle, bash, sqlplus

这是我的shell脚本：

```
# Deletes data from the 'sample' table starting August 30, 2011.
# This is done in stages with a 7 second break every 
# 2 seconds or so to free up the database for other users. 
# The message "Done." will be printed when there are 
# no database entries left to delete.

user="*****"
pass="*****"
while(true); do
    starttime=`date +%s`
    while [[ $((`date +%s` - $starttime)) -lt 2 ]]; do
        sqlplus $user/$pass@//blabla <<EOF
            whenever sqlerror exit 1
            delete from 
                sample
            where
                sampletime >= to_date('08-30-2011','mm-dd-yyyy') and
                rownum <= 2;
            commit;
EOF
        rows = ???
        if [ $rows -eq 0 ] ; then
        echo "Done."
        exit 0;
    fi
    done
    sleep 7
done 
```

如果无法获取行数，也许我可以使用 sqlplus 返回的错误代码来确定何时结束脚本？有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:36:35.190

我会使用`sql%rowcount`which 告诉您最后一个 DML 语句影响了多少行。

```
delete from                  
sample             
where                 
sampletime >= to_date('08-30-2011','mm-dd-yyyy') and                 
rownum <= 2;             

if sql%rowcount = 0 then
   dbms_output.put_line('Free');
end if;

commit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T05:53:12.547

请试试这个：

```
 rows=`sqlplus -s ${DB_USER}/${DB_PASSWD}@${DB_SID} <<EOF
                    delete from sample where sampletime >= to_date('08-30-2011','mm-dd-yyyy') and rownum <= 2;
                    commit;
                    exit; 
```

EOF`fi

```
 echo rows = $rows 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:10:27.360

请使用以下注意事项：-未经测试

```
user="*****" 
pass="*****" 
while(true); 
do     
starttime=`date +%s`     
while [[ $((`date +%s` - $starttime)) -lt 2 ]]; 
do         
  rows=`sqlplus -silent $user/$pass@//blabla << EOF             
  whenever sqlerror exit 1 
  SET PAGESIZE 0 FEEDBACK OFF VERIFY OFF HEADING OFF ECHO OFF            
    select count(1) from                  
    sample             
    where                 
    sampletime >= to_date('08-30-2011','mm-dd-yyyy') and                 
    rownum <= 2;             

EOF`         

if [ $rows -neq 0] ; 
then 
    sqlplus $user/$pass@//blabla << EOF1  
    delete  from                  
    sample             
    where                 
    sampletime >= to_date('08-30-2011','mm-dd-yyyy') and                 
    rownum <= 2;             
    commit;
EOF1
else        
echo "Done."         
exit 0;     
fi     
done     
sleep 7 
done 
```

# handlebars.js - 如何在 DUST JS 中用空格编译数据？

> ID：10838071
> 
> 赞同：1
> 
> 时间：2012-05-31T17:05:42.657
> 
> 标签：handlebars.js, dust.js

有人对 Dust JS 有经验吗？我在使用某些键中有空格的数据编译模板时遇到问题

JSON数据：

```
{"Street Address": "12 Coventry Road"} 
```

灰尘模板{街道地址}

街道地址永远不会被解析:(

在 Handlebars JS 中，您只需将带有空格的键包裹在方括号中，但这似乎在 Dust JS 中不起作用

```
Eg {{[Street Address]}} 
```

无论如何希望有人可以提供帮助，因为我更喜欢 Dust over Handlebars 的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:44:44.710

来自 Dust.js 主页：

> Dust 解析器经过微调，可以最大限度地减少静态文本中需要进行的转义量。任何与 Dust 标签不太相似的文本都被认为是静态的，并且会原封不动地传递到模板的输出中。这使得 Dust 适用于模板化许多不同的格式。为了被识别，**Dust 标签不应包含无关的空格和换行符**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:23:31.330

灰尘不允许这样做，因为它不是有效的 json。您应该删除 WS。

模板

```
{StreetAddress} 
```

语境

```
{"StreetAddress": "12 Coventry Road"} 
```

输出

```
12 Coventry Road 
```

无论如何，灰尘回购没有得到维护。我们已经分叉了它，我们正在开发许多新功能。看一看：

[https://github.com/linkedin/dustjs](https://github.com/linkedin/dustjs)

# c# - 在运行时添加时如何将 UserControl 定位在 Panel 内？

> ID：10838073
> 
> 赞同：1
> 
> 时间：2012-05-31T17:06:00.250
> 
> 标签：c#, winforms, layout, panel

我有一个对话框表单，其中混合了设计时和运行时添加的控件。这些控件中的每一个都托管在面板中。每个面板都有 FillStyle.Top 集。

在运行时，我将 UserControl 添加到面板：

```
public NetworkDiscoveryDialog(CSNetworkDiscovery networkDiscovery) : this()
{
    NetworkDiscovery = networkDiscovery;
    SnmpCommunitiesUserControl = new SnmpCommunitiesUserControl(NetworkDiscovery.SnmpCommunitiesSetting);
    panel2.Controls.Add(SnmpCommunitiesUserControl);
}

public partial class SnmpCommunitiesUserControl : UserControl
{
    public SnmpSetting SnmpSetting { get; set; }

    public SnmpCommunitiesUserControl()
    {
        InitializeComponent();
        Anchor = (AnchorStyles.Top | AnchorStyles.Left);
        Dock = DockStyle.Fill;
    }

    public SnmpCommunitiesUserControl(SnmpSetting snmpSetting)
        : this()
    {
        SnmpSetting = snmpSetting;
    }
} 
```

不幸的是，SnmpCommunitiesUserControl 与在设计时添加的控件的位置不同。

我试过了：

*   设置面板的边距以及填充。
*   设置 UserControl 的边距和填充。
*   锚点和 Dock 设置。

这些似乎都对运行时添加的 UserControl 没有任何影响。

以前，我将“Location”参数传递给我的 UserControl 的构造函数。这允许我设置 UserControl 的位置，但不是一个可维护的解决方案。

我应该怎么做？

编辑：

我目前的解决方案是在第一个面板内嵌套第二个面板。我清除了两个面板的所有边距和填充。父面板具有 Dock.Top，其子面板具有 Dock.Fill。然后，我将孩子的左/右填充设置为 10。这会导致运行时添加的控件出现在正确的位置。不过，我对这个解决方案不满意。

![在此处输入图像描述](../Images/c0279495c357bc80d312e6337d59d613.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:11:34.037

您应该自己设置位置和大小属性，或者您可以设置新控件的 Dock 属性。另一种方法是将主机面板更改为 StackLayoutPanel 或 TableLayoutPanel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:49:24.020

如果你想设置绝对位置，你应该将 Location 属性设置为你的位置并将停靠设置为无。
`control.Location = new Point(x, y);
control.Dock = DockStyle.None;`

# c# - Asp.Net MVC 3（Razor）中复选框的奇怪行为

> ID：10838074
> 
> 赞同：0
> 
> 时间：2012-05-31T17:06:02.720
> 
> 标签：c#, asp.net-mvc-3, razor

我在使用复选框助手（剃刀语法）时遇到了一个非常奇怪的行为。步骤顺序是：

在 Index ActionResult 中，我构建了将在 Web 中显示的 ViewModel：

```
var viewModel = new MyViewModel
{ 
    Field1 = service.GetField(),
    Field2 = otherService.GetField()
    Field3 = otherService.Class.BooleanField
}; 
```

Field3 被“渲染”为：

```
@Html.CheckBoxFor(model => model.Field3, new { @class = "something" }) 
```

加载页面时，我可以看到处于选中状态的复选框（当布尔值肯定为真时）。

加载页面时，将启动“OnReady”Jquery 事件。在这个方法中，我调用（通过 AJAX）一个 ActionResult，它根据他从 ViewModel 收到的参数计算价格。

不知道为什么，但是Field3参数虽然值为true，但为'false'，并且复选框处于选中状态。之后，如果我更改任何触发此计算的控件，接收该方法的 ViewModel 将包含此 Field3，但具有正确的值 (true)。

我一直在寻找与此值的可能交互，但我什么也没找到，正如我所说，在进行 AJAX 调用时正确检查了该字段。

谢谢！

Ps：使用 FireBug 检索的 HTML：

```
<input id="Field_Field" class="canRequestCalculation" type="checkbox" value="true" name="Field.Field" data-val-required="Mandatory field" data-val="true" checked="checked">
<input type="hidden" value="false" name="Field.Field"> 
```

如您所见，已检查状态，但隐藏中的值为 false。

通过 AJAX jQuery 调用检索信息：

```
$.ajax({
    type: "POST",
    url: "/Controller/PerformCalculation",
    data: $("#form").serialize(),
    success: function (data) {
        //UI Work
    },
    beforeSend: function (data) {
        //UI Work
    }
}); 
```

正如我所说，第二次执行调用时，表单被正确发送，值为 true。如果我使用**Fiddle**或**HttpFox**之类的软件来检查 HTTP 调用，**“Field.Field”是错误的，尽管在浏览器中检查了检查！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:18:42.893

您如何确定 jQuery 中复选框的状态？我目前使用 $("#checkboxId").attr("checked") 来获得它的价值。

# c# - 使用 C# DirectoryServices 在 AD 中复制用户模板

> ID：10838076
> 
> 赞同：3
> 
> 时间：2012-05-31T17:06:10.407
> 
> 标签：c#, active-directory

我正在使用 system.directoryservices.accountmanagement 来管理我的 AD 用户。我的 AD 中有几个具有不同类型用户的组。在这些组中的每一个中，我都有一个用作模板的用户。通常我进入 AD 并复制这个用户并从那里创建一个用户。有没有办法复制这个用户并从 c# 创建一个新用户？或者类似的方式来完成这个？我不介意在powershell中运行它。

谢谢，

# ruby-on-rails - Rails，Spreadsheet gem：如何将电子表格数据直接输出到客户端？

> ID：10838077
> 
> 赞同：2
> 
> 时间：2012-05-31T17:06:15.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, spreadsheet

这可能很简单：我正在使用[Spreadsheet gem](http://spreadsheet.rubyforge.org/)创建一个工作簿（即电子表格） ，并且只想将 Excel 数据直接发送到客户端，而无需先写入文件。

现在，我正在将工作簿写入`tmp`目录中的一个文件，然后使用 发送它`send_file`，但这似乎非常不雅，因为一旦发送它我就不需要该文件（甚至不用于缓存目的）。

最理想的情况是，我只想在一个块中调用`send_data`工作簿数据。`respond_to :xls`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:19:29.677

工作簿的`write`方法采用任何路径或 IO 对象，因此您可以将 StringIO 传递给它，而不是传递一个文件或文件路径。

```
require 'stringio'
class MyController < ApplicationController
  def someaction
    ...
    buffer = StringIO.new
    book.write(buffer)
    buffer.rewind
    send_data buffer.read
  end
end 
```

# java - 数组索引越界异常，这是要发生的吗？

> ID：10838078
> 
> 赞同：2
> 
> 时间：2012-05-31T17:06:21.107
> 
> 标签：java, indexoutofboundsexception

我试图在 java 中测试一个程序，我得到一个数组索引越界异常，我认为不应该抛出该异常。看看这段代码，告诉我我是否遗漏了什么？eclipse 告诉我错误被抛出在我添加评论以显示它的位置

```
class maze{

private int cols; // number of columns in maze  
private int rows; // number of rows in maze
private String name;
private weightedGraph<Integer> graph;
private dijkstra solution;
public char[][] mazeStore;

public maze(String filename){

    try{

        FileReader r = new FileReader(filename);
        Scanner s = new Scanner(r);
        this.rows = s.nextInt();
        this.cols = s.nextInt();
        this.name = filename;

        this.mazeStore = new char[(2*rows)+1][(2*cols)+1];
        String line = s.nextLine();
        for(int k = 0; k < ((2*rows)+1); k++){

            char[] temp = line.toCharArray();

            for(int i = 0; i < temp.length; i++){
                mazeStore[k][i] = temp[i];
                line = s.nextLine();
            }
        }

        graph = new weightedGraph<Integer>(rows*cols); 

        for(int y = 1; y < 2*rows; y++){
            for(int x = 1; x < 2*cols; x++){
                if((x % 2 == 1) && (y % 2 == 0)){
                    if(mazeStore[x][y] != '-'){ // <<<<<<<<<<<<<<THIS IS WHERE THE ERROR IS THROWN 
                        int label = (x - 1) + (x / 2);
                        graph.addEdge(label, label+cols, 1);
                        graph.addEdge(label+cols, label, 1);
                    }
                }

                if((x % 2 == 0) && (y % 2 == 1)){
                    if(mazeStore[x][y] != '|'){
                        int label = ((x - 1) + (x / 2)) + (y / 2);
                        graph.addEdge(label, label+1, 1);
                        graph.addEdge(label+1, label, 1);
                    }
                }
            }
        }

        this.solution = new dijkstra(graph, 0); 

    }
    catch(FileNotFoundException e){
        System.err.println("FileNotFoundException: " + e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:12:47.420

你初始化了数组

```
new char[(2*rows)+1][(2*cols)+1] 
```

但迭代它

```
for(int y = 1; y < 2*rows; y++){//y row iterator
    for(int x = 1; x < 2*cols; x++){//x col iterator 
```

所以应该 `mazeStore[y][x]`不是`mazeStore[x][y]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:11:56.147

你的变量有问题。你最外面的循环是基于行的，但是你在你初始化为列大小的数组中使用它

# c++ - IHostAssemblyStore::ProvideAssembly - 文件夹中程序集的实现

> ID：10838079
> 
> 赞同：0
> 
> 时间：2012-05-31T17:06:22.333
> 
> 标签：c++, .net, clr4.0, clr-hosting

我试图弄清楚如何在托管 clr 托管方案中从与本机 .exe 文件不同的文件夹加载 AppDomainManager 程序集。

有没有人做过 IHostAssemblyStore::ProvideAssembly 实现，它将从文件夹加载 AppDomainManager 程序集，并希望共享它？

我是这个 WinApi/OLE/whatever 编程的新手，我不知道如何从 C++ 中的磁盘上的文件中获取 IStream*。

或者是否有另一种方法从任意文件夹加载 DefaultDomain 的 AppDomainManager？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:15:27.473

[SHCreateStreamOnFile](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759864%28v=vs.85%29.aspx)会将程序集从光盘加载到 IStream 中，例如：

```
HRESULT hr = SHCreateStreamOnFile(assemblyPath, STGM_READWRITE, ppStmAssemblyImage); 
```

**陷阱：**

CLR 将为一个程序集多次调用您的 ProvideAssembly 实现。

考虑到处理器架构，请务必使用 AssemblyBindInfo 中的 postPolicyIdentity 在正确调用时返回“正确”位：

如果您的程序集是构建的`"Any CPU"`，但您在 postPolicyIdentity 包含例如`"processorarchitecture=amd64"`结尾时返回它，则`runtimeHost->Start()`调用将失败。

相反，您必须返回`COR_E_FILENOTFOUND (0x80070002)`直到处理器架构匹配。

# symfony - Symfony2 树枝扩展获取调用者模板

> ID：10838080
> 
> 赞同：0
> 
> 时间：2012-05-31T17:06:22.807
> 
> 标签：symfony, twig

有谁知道获取调用 Twig 扩展的模板（或其名称）的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:50:20.037

You could pass the referrer into the twig template...

```
class DefaultController extends Controller
{
    public function indexAction(Request $request)
    {
        return $this->render('DefaultBundle:Default:index.html.twig', array('referrer', $request->getRequestUri()));
    }

} 
```

# linux - 如果我中断 Linux 内核的 make 过程会发生什么？

> ID：10838082
> 
> 赞同：5
> 
> 时间：2012-05-31T17:06:26.520
> 
> 标签：linux, makefile, kernel

我下载了 Linux 内核并开始编译它，所以问题出现了，因为我是在一台旧笔记本电脑上构建的。

如果我在`make`-ing时按 Ctrl-C 然后`make`稍后再运行会怎样？它是否从头开始构建？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T17:14:38.600

简单的答案是，只要创建创建的所有目标文件仍然存在并且具有比它们所依赖的文件更新的时间戳，它们就不会被重建。通常，为了让您尝试避免的行为发生，您必须发出`make clean`命令或类似的东西。

# android - 滚动时listview行内textview的文本颜色发生变化

> ID：10838085
> 
> 赞同：0
> 
> 时间：2012-05-31T17:06:34.250
> 
> 标签：android, colors, scroll, textview

我有一个通过自定义光标适配器生成的列表视图

一切正常，除了当我在列表中上下滚动时，一些文本视图随机变为绿色。

这是我生成列表视图的代码：

```
private class AchievementAdapter extends CursorAdapter {
    public AchievementAdapter(Context context, Cursor c) {
        super(context, c);
    }

    @Override
    public void bindView(View v, Context context, Cursor cursor) {
        TextView tv = (TextView) v.findViewById(R.id.achView1);

        if(cursor.getString(cursor.getColumnIndex("completed")).equals("yes")) {
            tv.setText(cursor.getString(cursor.getColumnIndex("name"))+" (completed)");
            tv.setTextColor(Color.GREEN);
        }
        else {
            tv.setText(cursor.getString(cursor.getColumnIndex("name")));
        }
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(R.layout.achievements_item, parent, false);
        return v;
    }
} 
```

我读了一些关于 setcachecolorhint 的内容，但该方法不适用于 textview。我该如何解决这个问题，以便在我滚动时停止随机更改 textview 颜色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:04:31.143

您应该在`else`语句中将 textView 颜色设置为正常，例如：

```
@Override
public void bindView(View v, Context context, Cursor cursor) {
    TextView tv = (TextView) v.findViewById(R.id.achView1);

    if(cursor.getString(cursor.getColumnIndex("completed")).equals("yes")) {
        tv.setText(cursor.getString(cursor.getColumnIndex("name"))+" (completed)");
        tv.setTextColor(Color.GREEN);
    }
    else {
        tv.setText(cursor.getString(cursor.getColumnIndex("name")));
        tv.setTextColor(Color.BLACK); // Set your textview color as you need
    }
} 
```

希望这可以帮助

# android - 添加片段时的TextView焦点

> ID：10838087
> 
> 赞同：0
> 
> 时间：2012-05-31T17:06:43.800
> 
> 标签：android, focus, android-fragments, android-dialogfragment

我有一个带有单个 TextView (tv1) 的活动和一个按钮，当单击该按钮时，会显示一个带有另一个 TextView tv2 的 DialogFragment。tv1 在活动开始时具有焦点，而 tv2 在显示 DialogFragment 时具有焦点。

问题是 tv1 似乎并没有失去焦点——它的 onFocusChangedListener 永远不会被调用。是否有其他信号可以用来指示 tv1 实际上不再具有焦点？（请注意，在这里监视 tv2 并不是一个好的解决方案——我还有其他几种方式可以让对话获得焦点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:00:46.573

您可以很好地覆盖`onWindowFocusChanged()`活动的回调方法，因为显示对话框会导致活动本身失去焦点。提到的方法可能是 TextView ( `tv1`) 失去焦点的信号。

# opengl - 哪个版本的 GLSL 支持 Fragment Shader 中的索引？

> ID：10838089
> 
> 赞同：2
> 
> 时间：2012-05-31T17:06:50.967
> 
> 标签：opengl, glsl

我有一个片段着色器，它迭代一些输入数据和我得到的旧硬件：

> 错误 C6013：只有 texcoords 的数组可以在此配置文件中被索引，并且只能使用循环索引变量

谷歌搜索我看到了很多东西，比如“XX 之前的硬件不支持片段着色器上的索引”。

我想知道这种行为是否在 GLSL 版本中标准化，例如“glsl pior to XX doesn't support indexing on fragment shader”之类的东西。如果是这样，哪个版本开始支持它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:28:02.403

您的确切硬件是什么？

旧的 ATI 卡（X1600 以下）及其驱动程序存在此类问题。可以肯定的是，并非英特尔最新的显卡也受此影响。

> > “您对如何检测我的硬件是否能够在片段着色器中进行索引有任何建议吗？”

唯一可靠但不那么漂亮的方法是获取渲染器信息：

```
glGetString(GL_RENDERER) 
```

并检查此渲染器是否出现在不受支持的列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:50:40.860

该特定错误来自 nv4x（GeForce 6/7 卡）的 Nvidia 编译器，是硬件的限制。任何解决方法都需要完全禁用硬件并使用纯软件渲染。

所有版本的 GLSL 都支持该语言的索引——此错误属于超出硬件资源限制的全部内容。

# python - EOFError in python

> ID：10838090
> 
> 赞同：0
> 
> 时间：2012-05-31T17:06:52.153
> 
> 标签：python, eoferror

I got an EOFError at line 87 of the following code:

```
import random
def printDice(diceList):
    upperLine=" _____     _____     _____     _____     _____"
    line1="|" 
    line2="|"
    line3="|"
    lowerLine=" -----    -----    -----    -----    -----"
    for i in range(len(diceList)):
        if(diceList[i]==1):
            line1+="     "
        elif(diceList[i]==2):
            line1+="*    "
        elif(diceList[i]==3):
            line1+="*    "
        elif(diceList[i]==4):
            line1+="*   *"
        elif(diceList[i]==5):
            line1+="*   *"
        else:
            line1+="*   *"
        if(i==4):
            line1+="|"
        else:
            line1+="|  |"
    for i in range(len(diceList)):
        if(diceList[i]==1):
            line2+="  *  "
        elif(diceList[i]==2):
            line2+="     "
        elif(diceList[i]==3):
            line2+="  *  "
        elif(diceList[i]==4):
            line2+="     "
        elif(diceList[i]==5):
            line2+="  *  "
        else:
            line2+="*   *"
        if(i==4):
            line2+="|"
        else:
            line2+="|  |"
    for i in range(len(diceList)):
        if(diceList[i]==1):
            line3+="     "
        elif(diceList[i]==2):
            line3+="    *"
        elif(diceList[i]==3):
            line3+="    *"
        elif(diceList[i]==4):
            line3+="*   *"
        elif(diceList[i]==5):
            line3+="*   *"
        else:
            line3+="*   *"
        if(i==4):
            line3+="|"
        else:
            line3+="|  |"
    print upperLine
    print line1
    print line2
    print line3
    print lowerLine

tellMe="N"
print

print "The purpose of the game is to figure out the rule."
print "I can tell you three things:\n1\. The name of the game is petals around a rose,  the name is important.\n2\. I can tell you whether or not your guess is right and the score of the dice.\n3\. I can tell you that the score is always even or 0"
print
print "At any time you can quit by typing an odd number"
go="Y"
wrongGuesses=0
while(go=="Y"):
    diceList=[]
    score=0
    rightWrong="N"
    for i in range(5):
         diceList.append(random.randrange(1,7))
    for i in range(5):
        if(diceList[i]==3):
            score+=2
        elif(diceList[i]==5):
            score+=4
    printDice(diceList)
    print
    while(rightWrong=="N"):
        guess=input("What is your guess? ")
        if(guess%2==1):
            break
        if(guess!=score):
            print "Wrong"
            wrongGuesses+=1
            tellMe=raw_input("Tell you (Y or N)? ")
            tellMe=tellMe.upper()
            if(tellMe=="Y"):
                print "The score was "+str(score)+"."
                rightWrong="Y"
            else:
                rightWrong="Y"
            print "Right"
    if(wrongGuesses%13==0 and wrongGuesses!=0):
        print"The name is very important."
    if((wrongGuesses==30) and (wrongGuesses!=0)):
        print "The maximum score is 20."
    print 
```

I was using the site codepad.org to run this program. I have actually run this program in an IDE but when I use this site this error pops up:

What is your guess?

```
Traceback (most recent call last):
  Line 88, in <module>
    guess=input("What is your guess? ")
EOFError 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:15:26.000

Your program reads user input from standard input. When running it on codepad.org, there is no user input and attempting to read from standard input will result in an `EOFError`.

If you use the site ideone.com instead, it allows you to specify the user input. However, you will have to provide the entire input ahead of time rather than interactively. If your program tries to read past the end of the provided input, you will get `EOFError` again.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:09:29.070

Assuming you are using Python 2.x, it should be:

`raw_input`

and not `input`.

`raw_input` was changed to `input` in Python 3.x

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-17T05:43:25.080

Technically it is not an error, rather an exception. This exception is raised when one of the built-in function, most commonly

```
input() 
```

returns **End-Of-File(EOF)** without reading any data. Sometimes all our program tries to do is to fetch something and modify it. But ***when it is unable to fetch, it will raise this exception.***

# async-ctp - 异步 CTP 安装失败

> ID：10838092
> 
> 赞同：2
> 
> 时间：2012-05-31T17:07:09.110
> 
> 标签：async-ctp

我已经卸载了 KB2635973、KB2549864 并且没有 KB2615527。我仍然收到此错误：

```
Patch (C:\Users\Administrator\Downloads\Async-CTP-v3\VS10-KB0000001.msp) Install failed on product (Microsoft Visual Studio 2010 Ultimate - ENU). Msi Log: 
Final Result: Installation failed with error code: (0x80070643), "Fatal error during installation. " (Elapsed time: 0 00:03:15). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:53:56.573

通过卸载 KB2645410 解决

# objective-c - Asyncsocket：没有本地或远程地址

> ID：10838094
> 
> 赞同：0
> 
> 时间：2012-05-31T17:07:14.820
> 
> 标签：objective-c, ios, cocoaasyncsocket

我正在尝试建立到本地服务器的 TCP 连接，并且由于几乎每个人都同意 Asyncsocket 是要走的路，所以我也去了。但是，我遇到了最基本的问题：Asyncsocket 实例没有本地或远程地址。我没有太多代码，但这就是我所拥有的：

```
- (void)viewDidLoad {

    [super viewDidLoad];

    AsyncSocket *socket = [[AsyncSocket alloc] initWithDelegate:self];

    [socket connectToHost:@"www.google.com" onPort:80 error:nil];
}

- (BOOL)onSocketWillConnect:(AsyncSocket *)sock {

    NSLog(@"%@", sock);
    return YES;
}

- (void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port {

    NSLog(@"%@", host);
} 
```

以下显示在控制台中（来自 onSocketWillConnect 中的 NSLog）：

AsyncSocket 0x298de0 local nowhere remote nowhere has queued 0 reads 0 writes, no current read, no current write, read stream 0x299720 not open, write stream 0x299aa0 not open, not connected

在它说“无处”的地方，它当然应该有 IP 地址，但它没有。从网上的例子看，我的代码很好，但是当我在两台电脑和我的手机上运行时，我得到了这个“无处”的东西，所以我可能做错了什么。有人有想法吗？

谢谢！

编辑：为了澄清：如果我使用错误报告（通过将 NSError 实例传递给“connectToHost:onPort:error”和 NSLogging ），我得到的只是`(null)`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T01:40:31.450

哇，好尴尬 我需要制作一个 ivar 来存储 AsyncSocket，因为没有它，它会在 viewDidLoad 完成后超出范围，这就是我的 onSocket:didConnectToHost:port 没有被调用的原因。

# disqus - 使用 Disqus，我如何从帖子中获取最近评论的列表，并将它们链接回原始帖子？

> ID：10838100
> 
> 赞同：12
> 
> 时间：2012-05-31T17:07:54.787
> 
> 标签：disqus

我想显示所有使用 Disqus 的博客帖子中最近发表的 10 条评论，并将它们显示在侧边栏中，然后能够单击评论并转到原始帖子。

一个优点是能够从列表中省略我们自己的评论。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-23T17:36:37.343

这是一个可以完成您的工作的脚本

```
<script type="text/javascript" src="https://funbutlearn.disqus.com/recent_comments_widget.js?num_items=10&hide_avatars=0&avatar_size=40&excerpt_length=200"></script> 
```

如果您想嵌入一个组合（多合一）插件，请复制以下脚本

```
<script type="text/javascript" src="https://funbutlearn.disqus.com/combination_widget.js?num_items=10&hide_mods=0&color=grey&default_tab=recent&excerpt_length=70"></script> 
```

您甚至可以应用 CSS 来使这些更具吸引力。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T16:45:05.150

[使用这个怎么样](http://yourblog.disqus.com/latest.rss)，然后使用 Yahoo Pipes 排除您自己的评论（即基于作者姓名的过滤器），然后使用 RSS 解析器（如 RSSDisplay）在您的侧边栏上显示评论？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T19:05:28.680

Disqus 的人告诉我们，我们需要为此制作一个自定义脚本，但事实证明，您可以在 /admin/tools/widgets/ 下找到一个准备就绪的小部件，然后选择最近的评论。

还没有开始修改它，但你可以在那里获得最新的评论。它有一个指向评论者的链接，一个指向原始线程的链接和“时间前”。这是一个开始。

我还找到了这个链接：[http](http://aaronjwhite.org/index.php/component/content/article/5-php/8-creating-a-recent-comments-widget-with-disquss-api-and-php) : //aaronjwhite.org/index.php/component/content/article/5-php/8-creating-a-recent-comments-widget-with-disquss-api-and-php带有 Disqus 的 API 和 PHP 的最新评论小部件

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-24T08:27:35.490

您可以在[http://[your_qisqus_shortname].disqus.com/latest.rss](http://[your_qisqus_shortname].disqus.com/latest.rss)获得它们:)

# java - 国际化 - 列出和添加语言

> ID：10838101
> 
> 赞同：3
> 
> 时间：2012-05-31T17:07:57.223
> 
> 标签：java, resources, internationalization, resourcebundle

我正在用Java制作一个应用程序。此应用程序可以使用`ResourceBundle`s 进行国际化。我想让用户选择他想要应用程序拥有的语言。还有一个问题：如何列出程序可用的语言？我不想使用`Locale.getAvailableLocales()`，因为我不知道应用程序是否有所选语言的 .properties 文件。还有第二个问题：我可以添加在 .jar 文件之外添加其他语言文件的功能吗？最后一个问题：有没有更好的国际化解决方案？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:50:45.483

您可以只在应用程序的某个常量中存储支持的语言环境的固定列表。如果你需要使这个动态，我看到两个解决方案：

*   使用列出支持的语言环境的属性文件，并在启动时从该属性文件加载它们。
*   遍历可用的语言环境（或语言），尝试加载相应的捆绑属性文件（使用`Class.getResourceAsStream()`），并考虑如果您获得 InputStream 则支持该语言环境，如果您获得 null 则不支持。

除了您的 jar 之外，您还可以通过在类路径中放置一些目录来让用户添加一个包。删除此目录中的属性文件（尊重包层次结构），等等。

# ios - 在 TableView iOS 中添加一行

> ID：10838108
> 
> 赞同：8
> 
> 时间：2012-05-31T17:08:20.883
> 
> 标签：ios, tableview

我对 iOS 开发很陌生，尝试一些应该很容易的事情让我度过了一段糟糕的时光；每次用户单击现有行之一时，在 TableView 中添加额外的行。该操作没有真正的目的，我只是想了解 TableView 的行为。

所以我做了以下事情：

我使用了基于拆分视图的模板，并将 RootViewController 中的行数更改为 30。

```
- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section {
   // Return the number of rows in the section.
   return 30;
} 
```

方法 tableView:didSelectRowAtIndexPath 看起来如下：

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    /*
    When a row is selected, set the detail view controller's detail item to the item associated with the selected row.
    */
   NSMutableArray* paths = [[NSMutableArray alloc] init];
   NSIndexPath *indice = [NSIndexPath indexPathForRow:30 inSection:0];
   [paths addObject:indice];
   detailViewController.detailItem = [NSString stringWithFormat:@"Second Story Element %d with all its information and bla bla bla", indexPath.row];
   [[self tableView] beginUpdates];
   [self.tableView insertRowsAtIndexPaths:(NSArray *) paths withRowAnimation:UITableViewRowAnimationNone];
   [[self tableView] endUpdates];
} 
```

当我执行程序并单击其中一个元素时，我收到以下错误：

> > *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (30) 必须等于行数更新前包含在该节中 (30)，加上或减去从该节插入或删除的行数（插入 1，删除 0）。

我没有更改模板提供的代码的任何其他部分。

我非常广泛地阅读了 Apple 的文档以及对以下问题的回答： [在 iphone 的 TableView 中动态添加一行](https://stackoverflow.com/questions/1623278/add-a-row-dynamically-in-tableview-of-iphone) 以及 [如何正确使用 insertRowsAtIndexPaths？](https://stackoverflow.com/questions/6943470/how-to-properly-use-insertrowsatindexpaths)

第二个问题似乎解决了同样的问题，但我无法理解发生了什么。它们对数据源意味着什么？我更好理解的回应如下：

> > 这是一个两步过程：首先更新您的数据源，以便 numberOfRowsInSection 和 cellForRowAtIndexPath 将为您的插入后数据返回正确的值。您必须在插入或删除行之前执行此操作，否则您将看到“无效的行数”错误。

数据源的这种更新意味着什么？

示例代码将不胜感激，因为我非常沮丧。

顺便说一句，我正在尝试的所有内容都与进入编辑模式无关，不是吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T17:12:15.317

您需要保持`tableView:numberOfRowsInSection:`同步返回的计数！

因此，当您有 30 行然后告诉 tableview 插入新行时，您需要确保`tableView:numberOfRowsInSection:`现在返回 31。

```
- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section
{
   return self.rowCount;
}

- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   self.rowCount++;

   [self.tableView beginUpdates];
   [self.tableView insertRowsAtIndexPaths:(NSArray *) paths withRowAnimation:UITableViewRowAnimationNone];
   [self.tableView endUpdates];
} 
```

在实践中，您可能会使用数组来跟踪您的行`return [self.rows count];`等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T17:26:51.670

答案很简单。当您想要修改表格视图时，您需要执行两个简单的步骤：

1.  处理模型
2.  处理表格动画

您已经执行了第二步。但是你错过了第一个。通常，当您处理一个表时，您会将一个数据源传递给它。换句话说，要在其中显示一些数据。

一个简单的示例是使用`NSMutableArray`包含虚拟数据的（顾名思义是动态的）。

例如，在 .h 中创建如下所示的属性

```
@property (nonatomic, strong) NSMutableArray* myDataSource; 
```

并在 .m 中将其合成为：

```
@synthesize myDataSource; 
```

现在，您可以`alloc-init`使用该数组并将其填充如下（例如在`viewDidLoad`控制器的方法中）。

```
self.myDataSource = [[NSMutableArray alloc] init];
[self.myDataSource addObject:@"First"];
[self.myDataSource addObject:@"Second"]; 
```

然后，您可以执行以下操作，而不是硬编码您将显示的行数（在您的情况下为 30）：

```
- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section    {

   return [self.myDataSource count];
} 
```

现在，在您的`didSelectRowAtIndexPath`委托中，您可以添加第三个元素。

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

   [self.myDataSource addObject:@"Third"];

   [[self tableView] beginUpdates];
   [self.tableView insertRowsAtIndexPaths:(NSArray *) paths withRowAnimation:UITableViewRowAnimationNone];
   [[self tableView] endUpdates];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T17:12:28.067

看起来一个大问题是`tableView:numberOfRowsInSection:`. 您需要在该方法中返回正确的行数。

为此，通常最好为表格视图维护一个`NSArray`或`NSMutableArray`多个项目，因此在该函数中，您可以说：`return [arrayOfValues count];`. 将数组保留为视图控制器类的属性，以便在所有方法中都可以轻松访问它。

该数组也可以用于`cellForRowAtIndexPath:`. 如果你有一个数组`NSString`，你可以说`cell.text = [arrayOfValues objectAtRow:indexPath.row];`。

然后，当您想将项目添加到表格视图时，您可以将其添加到数组并重新加载表格，例如`[tableView reloadData];`.

尝试实现这个概念，让我知道它是如何进行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T15:05:11.843

您也可以对 dayanamic 表格单元格执行此操作

```
 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
        {
            return [arrayStationStore count];
        }
        -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
        {
            static NSString *cellIndentyfire;
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIndentyfire];
            if (cell ==  nil)
            {
                cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIndentyfire];

            }

            cell.textLabel.text = [arrayStationStore objectAtIndex:indexPath.row];
            return cell;
        }

-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Check if current row is selected
    BOOL isSelected = NO;
    if([tblStationName cellForRowAtIndexPath:indexPath].accessoryType == UITableViewCellAccessoryCheckmark)
    {
        isSelected = YES;
    }

    if(isSelected)
    {
        [tblStationName cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryNone;
        [arrayReplace removeObject:indexPath];
        NSLog(@"array replace remove is %@ ",arrayReplace);
    }
    else
    {
        [tblStationName cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryCheckmark;
        [arrayReplace addObject:indexPath];
         NSLog(@"array replace add is %@ ",arrayReplace);
    }
    return indexPath;
} 
```

# java - Eclipse 构建路径嵌套错误

> ID：10838109
> 
> 赞同：138
> 
> 时间：2012-05-31T17:08:24.140
> 
> 标签：java, eclipse, tomcat, servlets

我正在为我的班级开发一个简单的 JSP/Servlet/Tomcat webapp。教授要求我们使用与默认动态 Web 项目结构略有不同的文件夹结构。他不想使用 webcontent 文件夹，而是希望我们在 src/main/java 和 src/main/webapp 下的所有源代码。

当我运行应用程序时，我的欢迎文件显示正常，但是当我尝试访问我的 servlet 时，我得到：

```
 Http 500 SEVERE: Allocate exception for servlet InitDb 
```

java.lang.ClassNotFoundException。我很确定这是构建路径错误。我在构建路径上有 final/src 但我收到了警告

```
"Cannot nest 'final/src/main/webapp/WEB-INF/classes' inside 'final/src'. To enable the    nesting exclude 'main/' from 'final/src' 
```

![在此处输入图像描述](../Images/1acb1027a03aa9d80f3f2c58bbe616f3.png)

我的部署程序集中有这个：

```
<wb-resource deploy-path="/" source-path="/src/main/webapp" tag="defaultRootSource"/> 
```

当我排除 main/ 时，警告消失了，但它并不能解决问题。我会很感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2013-03-14T13:49:19.047

即使我创建了一个新项目，我也遇到了同样的问题。我在 Eclipse 中创建 Java 项目，然后对其进行 mavenize，然后进入 java 构建路径属性，删除和`src/`添加. 当我运行 Maven 更新时，它曾经给出嵌套路径错误。 然后我终于意识到——因为我之前没有见过那个条目——当我对它进行 mavenize 时，pom 文件中有一行。删除后就解决了。`src/main/java``src/test/java`
`<sourceDirectory>src</sourceDirectory>`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-02-22T15:00:07.420

我想对这个线程给出一个非专家的答案。

由于版本控制和严格的目录结构原因，我无法遵循 Acheron 的答案（最佳答案），即执行类似于删除`src/`和添加`src/main/java`以及`src/test/java`构建路径的操作。

实际上，我已经断断续续地与这个嵌套构建路径问题作斗争了几个星期。错误消息中提示了问题的答案：

`To enable the nesting exclude 'main/' from 'final/src'`

**使固定**

在您的构建路径中，您需要`Inclusion and Exclusion Patterns`通过单击`Excluded: (None)`然后编辑您的`Edit...`：

1.  转到导航器并右键单击项目
2.  构建路径
3.  配置构建路径
4.  来源（标签）

[![排除模式](../Images/124152a702c62b7fadc20d4c1ce41b69.png)](https://i.stack.imgur.com/UekJ7.png)

在那里您可以添加`main/webapp/WEB-INF/classes`为`Exclusion Pattern`. 然后它应该允许您将`main/webapp/WEB-INF/classes`构建路径添加为单独的源文件夹。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-05-23T21:04:46.733

试试这个：

从库选项卡：

```
Eclipse -> right click on project name in sidebar -> configure build path -> Libraries 
```

删除您的网络应用程序库：

```
click on "Web App Libraries" -> click "remove" 
```

将它们重新添加：

```
click "Add Library" -> click to highlight "Web App Libraries" -> click "next" -> confirm your desired project is the selected option -> click "Finish" 
```

突出显示“Web 应用程序库”：

![突出显示](../Images/5c73cc273c3fc064b1e6fde4c6e7d2ae.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-04-11T12:02:33.920

这是一个简单的解决方案：

1.  右键项目>>属性>>构建路径；
2.  在源选项卡中，选择所有源文件夹；
3.  删除它们；
4.  右键单击项目，Maven >> 更新项目。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-04T15:06:45.327

我有同样的问题，上面的正确答案对我不起作用。我为解决它所做的就是转到`Build Path->Configure Build Path`源选项卡并在源选项卡下删除所有源（只有一个源）并从那里重新配置它们。我最终从 eclipse 中删除了项目并再次导入了 maven 项目以清除错误。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-03-08T15:52:19.453

就我而言，我在*eclipse*中有一个 gradle 自然项目，问题出在 a 中`build.gradle`，其中`sourceSets`指定了：

```
sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
 } 
```

这似乎与*intelliJ*配合得很好，但似乎*eclipse*不喜欢嵌套`src`，，`src/java`。`src/resources`在*日食*中，我必须将其更改为：

```
sourceSets {
    main {
        java {
            srcDir 'src/main/java'
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-31T17:42:48.770

您必须将构建输出所在的源和目标目录分开。同样重要的是要注意，任何类文件都不能最终出现在源目录中。这并不违反你教授的建议——实际上他正在推广适用于 ./src/main/java 和 ./src/main/webapp 的 maven 标准源代码结构。第二个应该持有例如。强制性的 WEB-INF/web.xml 文件，但你永远不会把实际的类放在那里。

您需要更改的是您的目标目录。我建议使用相同的标准并为此选择名称“./target”。所有构建的文件都将放在此处，并将其打包将产生正确的可部署工件。如果您稍后迁移到使用 maven，它也将有助于以脚本化、可重复的方式执行此操作。

希望能解决您的问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-05T07:24:03.113

接受的解决方案对我不起作用，但我对项目设置进行了一些挖掘。

如果您使用的是动态 Web 项目，则以下解决方案至少为我修复了它：

1.  右键单击项目，然后单击属性。（或在项目上按 alt-enter）
2.  在部署程序集下删除“src”。

您应该能够添加 src/main/java. 它还会自动将其添加到部署程序集。

警告：如果您添加了 src/test/java 请注意，它还会将其添加到部署程序集。一般来说，你不需要这个。你可以删除它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-25T14:50:34.067

这开始让我陷入一个用 Eclipse 修复故障的巨大兔子洞，但是我只是从 Eclipse 中删除了该项目并重新导入它来修复它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-10T01:54:27.820

有类似的问题。做了以下步骤，问题解决：

1.  在eclipse中删除项目。
2.  删除 .Project 文件和 . 设置文件夹。
3.  再次将项目作为现有的 Maven 项目导入到 Eclipse。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-01T01:48:10.853

要使 Eclipse 编译器正常工作，您需要从源路径中删除 final/src 并添加 final/src/main/java。这也可以解决您的问题，因为现在构建目录将不在 Java 源文件夹中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-24T17:22:38.140

[![STS IDE](../Images/5496f2db2e6671dc3d3bc8b61be3614c.png)](https://i.stack.imgur.com/r6H7O.png)

这取决于告诉哪个文件夹“用作源文件夹”。在图片的结构中，如果对文件夹“目标”或“生成”说，他会得到“嵌套”错误。但是在 pom.xml 的“插件”部分中提到的最后一个“cxf”文件夹以及包结构的开始位置（如 .wsdl 文件所示），即 - 正确的文件夹“源”一个，则没有错误

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2012-05-31T17:30:14.127

创建两个文件夹：`final/src/`存储源 java 代码，和 `final/WebRoot/`.

您不能将源代码和 webroot 放在一起。我想你可能误解了你的老师。

# android - 顶部的搜索框，如浏览器

> ID：10838112
> 
> 赞同：-5
> 
> 时间：2012-05-31T17:08:46.533
> 
> 标签：android

如何将搜索框放置在顶部，就像在 android 的默认浏览器中一样？我不是指搜索小部件，我指的是在活动顶部持续存在的搜索对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:49:06.283

您可以设置不同的布局，在最上面的布局中，您可以使用和设置一个 LinearLayout`android:height="wrap_content"`并`android:width="fill_parent"` 设置一个权重和为 10 的父 LinearLayout 并且 Searchbar LinearLayout 将具有`android:weight="1"` 第二个布局的权重为 9

所以例如：

```
Linearlayout (weightsum=10)
LinearLayout (with searchbar) weight=1
LinearLayout (with the other content) weight = 9 
```

# c# - 解锁屏幕效果

> ID：10838115
> 
> 赞同：0
> 
> 时间：2012-05-31T17:08:52.067
> 
> 标签：c#, silverlight, windows-phone-7

我正在为 windows phone 7 设备开发一个应用程序，我想制作一个带有背景图像的窗口。要进入应用程序，用户必须向上滑动图像。就像解锁屏幕一样。

有没有办法做出这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:08:54.673

Stack Overflow 上已经有一个类似的问题（和答案）：[模仿 WP7 解锁页面动画](https://stackoverflow.com/questions/7513776/mimicking-wp7-unlock-page-animation)

如果没有别的，它应该给你一个起点。你只需要添加你的手势代码。

*注意：通过谷歌搜索“wp7 滑动解锁控件”在大约 10 秒内找到......谷歌是你的朋友！*

# .net - NLog 配置 - 登录到 xml - 将自定义值传递给 Log4JXmlEventLayout

> ID：10838118
> 
> 赞同：0
> 
> 时间：2012-05-31T17:09:09.093
> 
> 标签：.net, nlog

我正在尝试使用 NLog 2.0 将日志写入 xml 文件。在 .net 框架 3.5 中。

这是我正在使用的布局。

layout="${log4jxmlevent:includelongdate=true:includeexception=true:includeSourceInfo=true:includeCallSite=true:appInfo=true:includeNLogData=true:includestacktrace=true:throwExceptions=true:includeerror=true:indentXml=true:includeNLogData=true }" >

但这并没有像数据库配置 layout="${logger:shortName=true}" 那样给我正确的模块或类名或记录器。

是否有更多关于 xml 配置中的模块/类/记录器名称的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:42:15.397

我可以通过使用 NLog.MappedDiagnosticsContext 来解决我的问题

NLog.MappedDiagnosticsContext.Set("程序", ex.Source); NLog.MappedDiagnosticsContext.Set("Alert", "High");

# scheme - 使用 let/set “记住”值的方案函数

> ID：10838122
> 
> 赞同：5
> 
> 时间：2012-05-31T17:09:24.403
> 
> 标签：scheme, closures, mutators, lexical-scope

我是 Scheme 的新手，并试图了解函数中出现的某些值如何在多种用途中持续存在。采取以下柜台：

```
(define count
   (let ((next 0))
     (lambda ()
       (let ((v next))
         (set! next (+ next 1))
         v)))) 
```

我无法弄清楚（并且在任何地方都没有找到解释），是为什么`next`每次使用时都不会重置为 0 `count`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T17:17:36.850

这称为*闭包*。`next`整个程序 只有一个版本。

为了使这一点更清楚，请考虑以下程序：

```
(define next 0)

(define count
  (lambda ()
    (let ((v next))
      (set! next (+ next 1))
      v)))) 
```

现在很明显只有一个`next`。

你写的版本是不同的，因为你曾经`let`确保只有`lambda`表达式可以看到`next`。但仍然只有一个`next`。如果您将其更改为此，请改为：

```
(define count
  (lambda ()
    (let ((next 0))
      (let ((v next))
       (set! next (+ next 1))
       v)))) 
```

然后你会创建一个新版本的`next`每次，因为声明`next`是*在里面*，`lambda`这意味着它每次`lambda`被调用时都会发生。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T19:39:55.423

我有一件事要补充到 Sam 的出色回答：您的问题表明这种行为可能与“让”有关。它不是。这是一个没有“let”的例子，它做了类似的事情：

```
#lang racket

(define (make-counter-from counter)
  (lambda ()
    (set! counter (+ counter 1))
    counter))

(define count (make-counter-from 9))

(count)
(count) 
```

道德（如果有的话）：是的！突变令人困惑！

编辑：根据您在下面的评论，听起来您确实在寻找一些洞察力，以了解您可以将哪种心理模型用于具有突变的语言。

在具有局部变量变异的语言中，您不能使用将参数替换为值的简单“替换”模型。相反，对函数的每次调用都会创建一个新的“绑定”，以后可以对其进行更新（也称为“变异”）。

因此，在我上面的代码中，使用 9 调用“make-counter-from”会创建一个新绑定，该绑定将“counter”变量与值 9 相关联。然后附加/替换该绑定以用于“counter”变量的所有使用在函数体中，包括那些在 lambda 内部的。该函数的结果是一个 lambda（一个函数），它“关闭”了对这个新创建的绑定的两个引用。如果您愿意，可以将它们视为对堆分配对象的两个引用。这意味着对结果函数的每次调用都会导致对该对象/堆事物的两次访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T01:10:48.237

我不完全同意你的解释。你是对的，函数的定义只被评估一次，但函数本身每次被调用时都会被评估。

我不同意的一点是“......重写定义......”，因为该函数只定义一次（并且没有明确覆盖）。

我想象它是这样的：由于scheme中所谓的变量词法绑定，scheme解释器在函数定义的评估过程中注意到在函数定义的环境中定义了一个变量——变量“next”。因此，它不仅记住函数定义，还记住变量“next”的值（这意味着它存储了两件事——函数定义和封闭环境）。当第一次调用该函数时，它的定义由存储环境中的方案解释器评估（其中变量“next”的值为 0，并且该值是递增的）。第二次调用该函数时，完全相同的事情发生 - 在其封闭环境中评估相同的函数定义。然而，这一次，环境为变量“next”提供了值 1，函数调用的结果为 1。

简而言之：功能（定义）保持不变，只是评估环境发生了变化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-27T16:51:35.433

要直接回答您的问题，“每次使用时`next`都不会重置” *，因为*您的代码`0``count`

 *```
(define count (let ((next 0))
                 (lambda ()
                    (let ((v next))
                       (set! next (+ next 1))
                       v)))) 
```

相当于*_* _

```
(define count #f)

(set! count ( (lambda (next)              ; close over `next`
                 (lambda ()                  ; and then return lambda which _will_
                    (let ((v next))          ;   read from `next`,
                       (set! next (+ v 1))   ;   write new value to `next`,
                       v)))                  ;   and then return the previous value;
              0 ))                        ; `next` is initially 0 
```

（这是*“let-over-lambda”*模式；甚至还有一本同名的 Lisp 书）。

要分配的值`count` 仅“计算”一次。这个值是一个引用绑定的*闭包*`next`，它（绑定）在它的外部（闭包）。然后每次 `count`“使用”，即调用它所引用的过程，它（过程）引用该绑定：首先它从它读取，然后它改变它的内容。但它不会将其重新设置为初始值；绑定只启动一次，作为其创建的一部分，这发生在创建闭包时。

此绑定仅在此过程中可见。闭包是这个过程和持有这个绑定的环境框架的捆绑。这个闭包是在`(lambda () ...)`表达式的*词法范围内*计算`next`表达式的结果`(lambda (next) ...)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T19:20:45.353

好吧，我有一些顿悟。我*相信*我的困惑与定义和过程（ ）之间的区别有关`lambda`：定义发生一次，而过程每次运行时都会进行评估。在原始函数中，`let`定义了一个`next`设置为零的过程。该定义只发生一次，但`set!`在过程中使用会重写定义*，就好像追溯性一样。*因此，每次使用 都会`count`产生一个新版本的函数，其中`next`已递增。

如果这完全偏离基础，请纠正我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T02:32:57.190

这是一个完全相同的程序。

```
(define count
  (local ((define next 0)          
          (define (inc)
            (local ((define v next))
                    (begin 
                      (set! next (+ next 1))
                      v))))
    inc))

 (count)   0
 (count)   1
 (count)   2 ......... 
```

也许您的 let/set 序列遵循相同的机制。您实际调用的**过程是 inc，而不是 count**。inc 过程每次都递增**next 。**一个等价的定义可以是

```
 (define next 0)

 (define (inc)
  (begin
    (set! next (+ next 1))
    (- next 1)))

 (define count inc)

 (count)  0
 (count)  1
 (count)  2...... 
```

所以，我猜想在第一个程序中调用 count 就像运行整个第二个程序一样。我不知道。我也是新来的计划。谢谢，有用的帖子。*

# jquery - 使用 JQuery .serialize() 组合同名的表单元素？

> ID：10838125
> 
> 赞同：4
> 
> 时间：2012-05-31T17:09:32.480
> 
> 标签：jquery, serialization

我有以下表单输入元素，每个元素都具有相同的“评级”名称，如下所示。

```
<input type="checkbox" checked="checked" value="5" id="rating5_2053" name="rating">
<input type="checkbox" checked="checked" value="4" id="rating4_2053" name="rating">
<input type="checkbox" checked="checked" value="3" id="rating3_2053" name="rating">

<input type="checkbox" checked="checked" value="2" id="rating2_2053" name="rating">
<input type="checkbox" checked="checked" value="1" id="rating1_2053" name="rating">
<input type="checkbox" checked="checked" value="0" id="rating0_2053" name="rating"> 
```

使用时

```
$form.serialize(); 
```

并提交表格，

编辑：使用 JQuery Serialize() 结果并为 GET 请求操作查询字符串，结果如下：

```
&rating=5&rating=4&rating=3&rating=2&rating=1&rating=0 
```

它有充分的理由这样做，但就我而言，我不需要这样做。

我想知道是否有一种方法可以将其配置为执行以下操作？

```
&rating=5,4,3,2,1,0 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T17:19:29.893

干得好

```
var ratingData = [],
    data = $('form').find('input:not([name="rating"])').serialize();
$('form').find('input[name="rating"]').each(function(){
    ratingData.push(this.value);
});
data += '&rating='+ratingData.join(',');
console.log(data); 
```

[http://jsfiddle.net/Ejf45/1/](http://jsfiddle.net/Ejf45/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:33:08.223

**你可以试试这样的:)**

```
var ratings="rating=";

$('input[name="rating"]:checked').each(function(){ 

    var temp = $(this).val();

    ratings = ratings+ temp +",";

});

alert(ratings);​ 
```

[Jsfiddle 链接](http://jsfiddle.net/kabichill/k7G64/)

# asp.net-mvc-4 - WebAPI 只绑定第一个参数

> ID：10838126
> 
> 赞同：2
> 
> 时间：2012-05-31T17:09:32.493
> 
> 标签：asp.net-mvc-4, asp.net-web-api

死简单的问题，可能不是那么简单的答案。发布 JSON。

```
public void Post(Model1 model1, Model2 model2)
{} 
```

已填充模型 1，但未填充模型 2（空）。

```
public void Post(Model2 model2, Model1 model1)
{} 
```

现在，模型 2 已填充，但未填充模型 1（空）。

为什么？

**编辑**

两个参数的原因？Model2 曾经是从 Model1 中引用的，但这不起作用。那是我把它们分开的时候。

**编辑**

对。感谢 marcind 对上述问题的回答。现在由于原始设置不起作用的原因。我不再是形式宇宙了。我发布Json。如果您的模型中有子对象，则在您的 json 中发布子对象。

给定

```
class ProductEditModel {
      public string Name {get; set;}
}

class UserEditModel {
      public string User {get; set;}
      public ProductEditModel Product {get; set;}
} 
```

以下

```
{"user": "philip", "product.name": "barbie"} 
```

不会工作。如果您在 js 中尝试设置语义等效项，您甚至会收到错误

```
{user: "philip", product.name: "barbie"} 
```

以下都不起作用，我不知道他们为什么会这样做：

```
{"user": "philip", "productname": "barbie"}

{"user": "philip", "product_name": "barbie"} 
```

什么有效，什么应该是显而易见的，我的职业是

```
{"user": "philip", "product": {"name": "barbie"}} 
```

请踢我。

谨防！鉴于对上述模型的相应编辑，以下内容将不起作用。

```
{"user": "philip", "ProductEditModel": {"name": "barbie"}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:04:01.213

不确定您使用的是哪个版本，但我们确定的一般规则是，当绑定复杂类型时，Web API 将请求的整个主体视为表示单个实体，从而表示单个操作参数。在您的情况下，如果您想绑定多个`Model`s ，您可以引入自定义绑定对象，或者您可以绑定到一个`Model[]`或其他一些集合类型。

# javascript - 如何在不重新加载的情况下将单个元素从浏览器发送到服务器

> ID：10838127
> 
> 赞同：0
> 
> 时间：2012-05-31T17:09:34.003
> 
> 标签：javascript, jquery, html, ajax, vxworks

如何在不重新加载浏览器页面的情况下快速将一个元素从浏览器发送到服务器？

是否有 AJAX 方法可以做到这一点，即 NON-FILE 方法？“.load”的反义词？

.load 可以很好地将单个元素从服务器发送到浏览器，而无需重新加载页面。反方向怎么办？

浏览器是 JavaScript。服务器是带有风印的 vxworks。

可行但重新加载页面的当前方法：目前，浏览器元素是，我使用提交将其发送到服务器，但这需要太长时间并重新加载浏览器页面。

元素的 innerHTML 包含格式化为 vxworks WINDMARK 的数据。（当 vxworks 服务器收到此提交时，它会读取风印并将其复制到“C”字符串以供后端软件处理。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:12:24.223

如果您使用的是 jQuery 和 PHP，那么这样的东西应该可以工作：

JS：

```
$.ajax('doServerSuff.php?action1=saveLog', function() { 
    // do stuff after server received the data
}); 
```

PHP (doServerStuff.php):

```
<?php
    if ($_GET['action1'] == 'saveLog') {
        //do stuff
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:23:47.060

**您可以像这样简单地使用 ajax 调用**

```
$.ajax({
                type: "POST",
                url: "yourpage.php?id=someValue",
               success:function(data){
               //do some stuff here
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:28:02.767

您可以使用`jQuery`. 使用这样的东西：

```
$.post('urlfromserver',browserdata,function(datafromserver){
    //do stuff
}) 
```

如果你让我多说一点，最好使用[JSON](http://es.wikipedia.org/wiki/JSON)向服务器发送/接收数据。考虑到这一点，您可以执行以下操作：

```
$.post('urlfromserver',{browserdata: JSON.stringify(browserdata)},function(datafromserver){
    javascriptObject = jQuery.parseJSON(datafromserver)
    //do stuff
}) 
```

在你的 PHP 代码中，它就像使用[json_encode](http://php.net/manual/es/function.json-encode.php)发送数据`javascript`和`json_decode`接收数据一样简单`javascript`

**更新**

获取服务器中的数据应该像根据您的发送方法通过 post 或 get 请求对象并解析 JSON 一样简单。

中`PHP`，这是使用上述代码获取数据的示例：

```
 $dataFromBrowser = json_decode($_POST['browserdata']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T17:11:31.510

在 jQuery 中使用`$.post`来发送数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T17:20:02.743

加载指令也可用于向服务器传输数据：

```
$().load("url", {limit: 25}, function(){
    //transmission finished
}); 
```

在本例中，值为 25 的参数限制将被传输到服务器。取自：http://api.jquery.com/load/

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T19:44:31.803

我让它工作了。这是来自上述答案的更正后的 JavaScript。

以下是如何在服务器上更改单个元素。

这也是如何在 vxworks web 服务器上写入 vxworks windmark 字符串而不重新加载页面的示例。

注意：没有指定 URL，因此使用相同的页面。

```
$.ajax({ 
        type: "POST", 
        url: "?general_page_to_MM_data_1_windmark=CCCCCCCCCCCCCC", 
        success:function(data_from_server){ 
    }}); 
```

# doctrine - 教义 2.2 Bisna CLI

> ID：10838136
> 
> 赞同：0
> 
> 时间：2012-05-31T17:10:45.987
> 
> 标签：doctrine, doctrine-orm

我无法让 Bisna 学说 cli 工作。它抱怨找不到 Symfony 控制台应用程序。请注意，它试图在 Doctrine/Symfony/Console/Symfony/Component/Console 的嵌套目录中查找它。有人见过这个吗？

```
PHP Warning:  require(/Users/jhicks/workspace/production/application/../library/Doctrine/Symfony/Console/Symfony/Component/Console/Application.php): failed to open stream: No such file or directory in /Users/jhicks/workspace/production/library/Doctrine/Common/ClassLoader.php on line 163
PHP Fatal error:  require(): Failed opening required '/Users/jhicks/workspace/production/application/../library/Doctrine/Symfony/Console/Symfony/Component/Console/Application.php' (include_path='/Users/jhicks/workspace/production/library:.:/opt/local/lib/php') in /Users/jhicks/workspace/production/library/Doctrine/Common/ClassLoader.php on line 163 
```

这是 Bisna 的学说 cli 的 Github 页面：[https ://github.com/guilhermeblanco/ZendFramework1-Doctrine2/blob/master/bin/doctrine.php](https://github.com/guilhermeblanco/ZendFramework1-Doctrine2/blob/master/bin/doctrine.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:12:50.770

看起来我需要将这两行添加到我现有的自动加载器引导方法中：

```
$symfonyAutoloader = new \Doctrine\Common\ClassLoader('Symfony', 'Doctrine');   
$autoloader->pushAutoloader(array($symfonyAutoloader, 'loadClass'), 'Symfony'); 
```

我不认为这是必要的，因为我在 application.ini 文件的 autoloaderNamespaces 数组中包含了 Symfony。

```
autoloaderNamespaces[] = "Symfony" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T03:03:15.043

Github中有许多将它们称为 Bisna 的存储库，*如果*没有更多信息，很难找到您正在使用的存储库。

*最初*的一个是由 Guilherme Blanco（*Bisna*曾经是他的昵称）创建的，称为**Zend Framework 1 + Doctrine** 2，它的工作原理就像一个魅力，但它没有捆绑运行 CLI 工具所需的 Symfony 组件。

您需要做的是从 GitHub 下载它们（搜索“Symfony”，您会在组织存储库中找到组件）并将它们放在项目的*库*文件夹中，注意[PSR #0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)命名约定。

如果您提供生成此错误的代码段以及您正在使用的存储库和版本，将更容易检测到错误并给出更好的答案。尝试猜测错误的类型是幼稚的，但您可能在命名空间和/或如何调用 Symfony 的控制台组件方面存在问题。

如果您需要有关如何实现这种集成的一些指导，您可以查看Blanco 存储库中的[教义.php。](https://github.com/guilhermeblanco/ZendFramework1-Doctrine2/blob/master/bin/doctrine.php)

# php - 如何将数组加载到 php 页面？

> ID：10838137
> 
> 赞同：1
> 
> 时间：2012-05-31T17:10:47.877
> 
> 标签：php, javascript, jquery

我怎样才能将数组 titolari 发送到 php 页面？

```
var titolari = $('#titolari').sortable('toArray');
$("#formazione-realtime").load('formazione-realtime.inc.php', {
    "$titolari[]" : titolari
}); 
```

php 页面加载正确，但 php 页面似乎没有接收到数组...如何将其放入我的 php 脚本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:13:09.793

正如您在[jQuery 文档](http://api.jquery.com/load/)中看到的那样，如果将数据作为对象添加，则调用将使用 POST 方法。

在客户端：

```
var titolari = $('#titolari').sortable('toArray');
$("#formazione-realtime").load('formazione-realtime.inc.php', {
    "titolari" : titolari
}); 
```

在服务器上：

```
$titolari = $_POST['titolari']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:53:13.543

Javascript

```
$.ajax({
    url:'formazione-realtime.inc.php',
    data:{
        'titolari':['ti','to','la','ri']
    },
    context:{},
    type:'POST',
    contentType:'json',
    success:function(data) {
        console.log(data);
        $("#formazione-realtime").html(data);
    },
    error:function() {
        //Handle this
    }
}; 
```

PHP

```
try{
    $vars = json_decode(file_get_contents('php://input'), 1);
catch(Exception $e) {
    //Handle this
}
print_r($vars);
exit; 
```

# android - 如何从 Android 库中的图像中检索路径？

> ID：10838138
> 
> 赞同：5
> 
> 时间：2012-05-31T17:10:57.530
> 
> 标签：android, image, path, camera, gallery

我有一个应用程序，可让您单击 ImageButton，然后将您带到 Android 图库或相机。我正在寻找的是一个 onActivityResult 方法，它从单击/拍摄的图像中检索图像路径并将其存储在一个字符串中。

有人能帮我吗？这是打开画廊/相机的 onClick 方法：

```
private void showImageDialog() {
    final String [] items = new String [] {"From Camera", "From SD Card"};
    ArrayAdapter<String> adapter = new ArrayAdapter<String> (this, android.R.layout.select_dialog_item,items);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    builder.setTitle("Select Image");
    builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
        public void onClick( DialogInterface dialog, int item ) {
            if (item == 0) {
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                File file = new File(Environment.getExternalStorageDirectory(),
                                    "tmp_avatar_" + String.valueOf(System.currentTimeMillis()) + ".jpg");
                mImageCaptureUri = Uri.fromFile(file);

                try {
                    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
                    intent.putExtra("return-data", true);

                    startActivityForResult(intent, PICK_FROM_CAMERA);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                dialog.cancel();
            } else {
                Intent intent = new Intent();

                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);

                startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
            }
        }
    } );

    final AlertDialog dialog = builder.create();
    dialog.show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:20:15.290

使用此代码，

```
 ((Button) findViewById(R.id.Button01))
                .setOnClickListener(new OnClickListener() {

                    public void onClick(View arg0) {

                        // in onCreate or any event where your want the user to
                        // select a file
                        Intent intent = new Intent();
                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);
                        startActivityForResult(Intent.createChooser(intent,
                                "Select Picture"), SELECT_PICTURE);
                    }
                });

 public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);

                Log.v("IMAGE PATH====>>>> ",selectedImagePath);
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
} 
```

`selectedImagePath`是图像的路径。

# php - 文本输入（以逗号分隔） mysql 输入为数组

> ID：10838149
> 
> 赞同：0
> 
> 时间：2012-05-31T17:11:42.140
> 
> 标签：php, mysql, arrays, search, tags

我有一个表单，我正在尝试实现标签系统。

它只是一个：

```
<input type="text"/> 
```

用逗号分隔的值。

```
e.g. "John,Mary,Ben,Steven,George" 
```

（列表可以是用户想要的长度。）

我想获取该列表并将其作为数组插入到我的数据库中（如果需要，用户可以稍后在其中添加更多标签）。我想它不一定是一个数组，这似乎是最好的。

所以，我的问题是如何获取该列表，将其转换为数组，回显该数组（以逗号分隔的值），稍后添加更多值，并使该数组可供其他用户搜索。我知道这个问题看起来很简单，但无论我读了多少书，我似乎都无法理解这一切是如何运作的。一旦我认为我已经弄清楚了，就会出现问题。一个简单的例子将不胜感激。谢谢！

这是我到目前为止得到的：

```
$DBCONNECT
$artisttags = $info['artisttags'];
$full_name = $info['full_name'];
$tel = $info['tel'];
$mainint = $info['maininst'];
if(isset($_POST['submit'])) {
  $tags = $_POST['tags'];
  if($artisttags == NULL) {
    $artisttagsarray = array($full_name, $tel, $maininst);
    array_push($artisttagsarray,$tags);
    mysql_query("UPDATE users SET artisttags='$artisttagsarray' WHERE id='$id'");
    print_r($artisttagsarray); //to see if I did it right
    die();
  } else {
    array_push($artisttags,$tags);  
    mysql_query("UPDATE users SET artisttags='$artisttags' WHERE id='$id'");
    echo $tags;
    echo " <br/>";
    echo $artisttags;
    die();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:32:47.990

创建一个新表，我们称之为“标签”：

```
tags
- userid
- artisttag 
```

每个用户在此表中可能有多行（每行有一个不同的标签）。查询时，您使用`JOIN`操作来组合两个表。例如：

```
SELECT username, artisttag
FROM users, tags
WHERE users.userid = tags.userid
AND   users.userid = 4711 
```

这将为您提供有关 id 用户的所有信息`4711`。

关系数据库系统专为此类工作而构建，因此不会浪费空间和性能。事实上，如果您希望能够搜索标签，这是执行此操作的最佳方式。

# java - 我可以使用 spring DI 将会话属性注入到我的 web 应用程序的 POJO 中吗

> ID：10838151
> 
> 赞同：0
> 
> 时间：2012-05-31T17:11:47.720
> 
> 标签：java, spring, struts2

我正在使用 Struts2 框架并在 POJO 类中有以下方法。

```
public String execute() {
    setUserPrincipal();
    //do something
    someMethod(getUserPrincipal().getLoggedInUserId());
    return SUCCESS;
} 
```

该`setUserPrincipal()`方法看起来像这样

```
public void setUserPrincipal() {
    this.principal = (UserPrincipal) getServletRequest().getSession().getAttribute("principal");
} 
```

基本上，它只是获取一个名为“principal”的会话属性并设置它，以便我可以找出登录用户是谁。执行此操作的调用`setUserPrincipal()`在我的大多数 POJO 中很常见，并且在测试方法时也很麻烦，因为我必须设置会话属性。

有没有办法使用 Spring 或其他方法将会话属性自动注入 POJO？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:09:27.407

我只使用了一点 Struts2，但它们有一个拦截器堆栈，您可以将其绑定到特定操作。您可以创建自己的拦截器来注入会话变量。

```
public interface UserAware 
{
   void setUserPrincipal(String principal);
}

// Make your actions implement UserAware

public class MyInterceptor implements Interceptor
{
   public String intercept(ActionInvocation inv) throws Exception
   {
      UserAware action = (UserAware) inv.getAction();
      String principal = inv.getInvocationContext().getSession().get("principal");
      action.setUserPrincipal(principal);

      return inv.invoke();
   }
} 
```

就像我说的，没有太多的 Struts2 经验，所以这是未经测试的，但我认为这个想法是存在的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:00:38.370

不知道注入会话，但可能有一段 AOP 代码在执行之前设置主体。

这是一些文档：

[http://static.springsource.org/spring/docs/2.5.x/reference/aop.html](http://static.springsource.org/spring/docs/2.5.x/reference/aop.html)

# c# - 如何在 Winforms Pivot Grid 控件中获取列总数

> ID：10838155
> 
> 赞同：0
> 
> 时间：2012-05-31T17:12:00.447
> 
> 标签：c#, winforms, devexpress

我需要显示每个单元格、枢轴网格、列相对于其列总数的百分比。

到目前为止，我一直在检查可能的方法来获取 PivotGrid 显示的列总数（因为我已经知道[如何使用表达式插入计算列](http://documentation.devexpress.com/#WindowsForms/CustomDocument6230)）但到目前为止我还没有找到这些值可用的地方。

我还考虑过处理 PivotGrid 的 CustomSummary 或 CustomUnboundFieldData 事件，但我不清楚如何从那里获取列总数。

我想到的另一种方法是尝试使用[PivotCellBaseEventArgs.CreateDrillDownDataSource](http://documentation.devexpress.com/#WindowsForms/CustomDocument1884)来获取单元格的基础记录，但是我将无法获取列总数，因为该方法返回的记录仅适用于特定单元格，而不是整个列。

如果您能指出处理单元格百分比与列总要求的最佳方法，我将不胜感激，包括以前的任何方法或我没有想到的另一种方法。

另外，如果您向我展示一种从枢轴网格控件获取列总数的方法，我将很高兴（如果有的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:17:07.460

我终于找到了这样做的方法，所以我发布它以防其他人需要它......

PivotGridField 上有一个属性，允许您控制数据“汇总”（即聚合）的方式。通常这设置为“原样”或默认值，但您可以更改它以支持所谓的[百分比模式](http://documentation.devexpress.com/#WindowsForms/CustomDocument10914)。

因此，我只需将要显示为百分比的字段的 PivotSummaryDisplayType 更改为 PivotSummaryDisplayType.PercentOfColumnGrandTotal 即可。

# udp - winsock - 发送方 UDP 套接字未绑定到所需端口

> ID：10838156
> 
> 赞同：1
> 
> 时间：2012-05-31T17:12:01.493
> 
> 标签：udp, winsock

下面你可以看到我的代码，它使用 Winsock 在 C++ 中实现了一个非常基本的 UDP 发送器。问题是，无论我运行多少次代码，套接字（listenSocket）都会绑定到不同的 UDP 端口。这有什么具体原因吗？我在我的代码中犯了一些错误吗？

谢谢

```
#include <cstdlib>
#include <iostream>
#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>

using namespace std;

int main(int argc, char *argv[])
{
    WSADATA wsaData;    
    SOCKADDR_IN myAddress;
    SOCKADDR_IN targetAddress;

    int myPort = 60888;
    const char *myIP = "192.168.0.1";
    int remotePort = 2048;
    const char *remoteIP = "192.168.0.2";

    SOCKET ListenSocket = INVALID_SOCKET;
    SOCKET SendSocket = INVALID_SOCKET;
    SOCKET acceptSocket;

    char cBuffer[1024] = "Test Buffer";
    int nBytesSent = 0;
    int nBufSize = strlen(cBuffer);
    int iResult;

    // Initialize Winsock
    if( WSAStartup( MAKEWORD(2, 2), &wsaData ) != NO_ERROR )
    {
        cerr<<"Socket Initialization: Error with WSAStartup\n";
        system("pause");
        WSACleanup();
        exit(10);
    }

    ListenSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
    SendSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);

    if (ListenSocket == INVALID_SOCKET or SendSocket == INVALID_SOCKET)
    {
        cerr<<"Socket Initialization: Error creating socket"<<endl;
        system("pause");
        WSACleanup();
        exit(11);
    }

    //bind
    myAddress.sin_family = AF_INET;
    myAddress.sin_addr.s_addr = inet_addr(myIP);
    myAddress.sin_port = htons(myPort);

    targetAddress.sin_family = AF_INET;
    targetAddress.sin_addr.s_addr = inet_addr(remoteIP);
    targetAddress.sin_port = htons(remotePort);

    if(bind(ListenSocket, (SOCKADDR*) &myAddress, sizeof(myAddress)) == SOCKET_ERROR)
    {
        cerr<<"ServerSocket: Failed to connect\n";
        system("pause");
        WSACleanup();
        exit(14);
    }
    else
        printf("Server: bind() is OK.\n");

    nBytesSent = sendto(SendSocket, cBuffer, nBufSize, 0,
                 (SOCKADDR *) &targetAddress,
                 sizeof(SOCKADDR_IN));    

    printf("Everything is ok\n");

    system("PAUSE");

    closesocket(ListenSocket);
    closesocket(SendSocket);

    return EXIT_SUCCESS;
} 
```

编辑：也许我不太清楚。我使用此代码所做的是将一些数据发送到远程 PC。但需要的是 UDP 段应该看起来来自特定端口。如何才能做到这一点？我在这里做错了吗？现在回想起来，我想这确实是错误的。SendSocket 和 ListenSocket 没有任何连接，对吗？那么，如何使 UDP 段看起来来自特定的 UDP 端口？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:08:16.317

`bind()`在用它发送数据之前你不会调用`SendSocket`它，所以 WinSock 可以自由地将那个套接字绑定到它需要的任何随机本地 IP/端口。如果您每次都必须使用特定的源 IP/端口发送数据，则必须先发送`bind()`到该 IP/端口。如果该本地 IP/端口与您绑定的同一对`ListenSocket`，那么您不需要使用两个单独的套接字开始。您可以使用正在侦听传入数据的同一个套接字发送数据。

# xcode - Xcode 4.3.2 在构建时崩溃

> ID：10838157
> 
> 赞同：0
> 
> 时间：2012-05-31T17:12:01.717
> 
> 标签：xcode, build, crash, osx-lion, quit

我正在运行 Lion (10.7.4) 并运行 Xcode 4.3.2，当我构建任何应用程序时，它会在构建时崩溃。以下是报告。有什么建议么？

```
 Application Specific Information:
   ProductBuildVersion: 4E2002
   UNCAUGHT EXCEPTION (NSInternalInconsistencyException): Couldn't load plug-in 'com.apple.dt.dbg.DebuggerLLDB' while firing fault for extension 'Xcode.DebuggerFoundation.Debugger.LLDB'
    UserInfo: {
    NSUnderlyingError = "Error Domain=DVTPlugInErrorDomain Code=2 \"Loading a plug-in failed.\" UserInfo=0x402919560 {DVTPlugInIdentifierErrorKey=com.apple.dt.dbg.DebuggerLLDB, DVTPlugInExecutablePathErrorKey=/Applications/Xcode.app/Contents/PlugIns/DebuggerLLDB.ideplugin/Contents/MacOS/DebuggerLLDB, NSLocalizedRecoverySuggestion=The plug-in or one of its prerequisite plug-ins may be missing or damaged and may need to be reinstalled., NSLocalizedDescription=Loading a plug-in failed., NSFilePath=/Applications/Xcode.app/Contents/PlugIns/DebuggerLLDB.ideplugin, NSLocalizedFailureReason=The plug-in \U201ccom.apple.dt.dbg.DebuggerLLDB\U201d at path \U201c/Applications/Xcode.app/Contents/PlugIns/DebuggerLLDB.ideplugin\U201d could not be loaded.  The plug-in or one of its prerequisite plug-ins may be missing or damaged., NSUnderlyingError=0x4014c5d00 \"The bundle \U201cDebuggerLLDB\U201d couldn\U2019t be loaded because it is damaged or missing necessary resources.\"}";
}
Hints: None 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T18:03:52.660

我发现了问题。LLVM 编译器有一个错误，据推测 Apple 根据最近的一个论坛知道它。因此，通过 GDB 构建您的应用程序，方法是转到“编辑项目方案”并选择 GDB 而不是 LLVM 作为构建顺序。

# ruby - ruby 中是否有一种简单的方法来调用字符串中的下一个单词？

> ID：10838159
> 
> 赞同：1
> 
> 时间：2012-05-31T17:12:06.487
> 
> 标签：ruby, string, parsing, sinatra, loops

长话短说，我正在检查一个相当长的错误日志。我想查找并解析与每个错误相关的 IP 地址。

我要解析的示例

客户：12.345.678.910

```
def check_file( file, string )
  File.open( file ) do |io|
    io.each do |line|
      result << parse_ip( line ) if line.include? string
    end
  end
  result
end

def parse_ip( flag )
  flag = flag.split.find_all{|word| /^client:.+/.match word}
  ip = flag. # need to grab ip here
  ip
end 
```

有没有一种简单的方法来获取下一个单词？

我只是不确定如何抓住“客户：”之后的字符

任何帮助表示赞赏。

编辑：语法错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:46:23.463

有几种方法可以做到这一点。对于您的示例，您可以使用单个正则表达式捕获来提取 ip：

```
def parse_ip( flag )
  m = /\bclient:\s*([\d\.]+)/.match flag
  m && m[1]
end 
```

如果您出于其他原因确实更喜欢使用 split 进行标记化，您可以使用[Enumerable#drop_while](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-drop_while)扫描到键，然后索引到下一个标记：

```
def parse_ip( flag )
  flag.split.drop_while{|token| token !~ /^client:/}[1]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:06:34.220

```
"client: 12.345.678.910"[/client:\s*(.*?)\s*$/, 1]
 => "12.345.678.910" 
```

# macos - 如何找到 libxxx.a 的版本号

> ID：10838161
> 
> 赞同：5
> 
> 时间：2012-05-31T17:12:13.770
> 
> 标签：macos, unix, static-libraries

我可能找不到正确的搜索词，但我不知道如何在不编写程序的情况下获取静态（或动态）库的版本号。当然必须有一个 unix 应用程序来执行此操作（在 os x 上具有等效项）。（我尝试了查找器信息，它告诉我 .a 文件是要由文本管理员打开的文件！）。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:05:54.530

静态库只是目标文件的存档；它没有隐式版本号。许多库都会有一个明确的版本号，一些符号，如 FOO_VERSION_，内容为“1.2.3”，但显然没有通用方法可以找到任何此类符号。

动态库是另一回事。它们有两个版本号，“当前”和“兼容性”。请参阅 otool 的手册页，但您可以轻松地从 -l（在 LC_ID_DYLIB 命令中）或 -L 输出（查找库自己的名称）中解析出您想要的任何一个。

# php - 以“错误”的方式呈现表格：转置列和行？

> ID：10838162
> 
> 赞同：3
> 
> 时间：2012-05-31T17:12:13.723
> 
> 标签：php, mysql, html-table

我想知道是否有一种简单的方法可以使用标准 while(mysql_fetch_assoc) 绘制表格，其中最左边的列是这样的标题：

```
姓名      | 彼得杰克逊 | 史蒂文斯皮尔伯格 | 马丁斯科塞斯 |
生日| 1961 | 1946 | 1942 |
电影     | 指环王 | 侏罗纪公园 | 恐惧角 |

```

（老鼠！所以不支持表格标签）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T17:19:05.407

我会通过将元素添加到数组结构然后打印该结构来做到这一点：

```
$data = array('name' => array(), 'birth' => array(), 'movie' => array());
while($r = mysql_fetch_assoc(...)) {
  $data['name'][] = $r['name'];
  ...
}

echo '<th>Name</th>';
foreach($data['name'] as $n) {
  printf('<td>%s</td>', htmlspecialchars($n));
}
... 
```

# mysql - 使用查询避免 MySql 循环

> ID：10838168
> 
> 赞同：0
> 
> 时间：2012-05-31T17:12:39.673
> 
> 标签：mysql, sql

我有三张桌子。

表 1 是包装。表 2 是 package_to_keyword。表 3 是关键字。

包可以连接到多个关键字。因此，如果我查询 package_to_keyword 加入关键字和包，我可以搜索与某个关键字相关的所有包。这是我理解的部分。 ![在此处输入图像描述](../Images/a1c52d75614427993df04960add21d9a.png)

现在...我的问题是，如何检索与关键字列表匹配的包？现在，在 php 中，我循环一个 sql 语句，然后循环遍历每个关键字的所有结果，并执行 array_intersect() 以过滤到所有结果集中显示的包。但是，我确信这很糟糕，因为当我确定 SQL 是为处理这种类型的关系而构建时，我正在为每个关键字运行一个查询，我只是不确定要执行哪种类型的查询。

关键是关键字列表可以是任意数量的单词。如果我使用 IN ('keyword','array','returns','all','results') 之类的东西，当我只想要包时，我只会得到与 *任何*关键字有关系的所有包的列表与*所有*关键字都有关系。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:21:33.507

```
select title
from packages p
inner join pack_to_tag pt on p.index = pt.pIndex
inner join keyworks w on w.index = pt.kindex
where word in ('keyword','array','returns','all','results')
group by title
having count(*) = 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:29:00.620

首先，“PreQuery”（合格产品结果）仅查看与您正在寻找的任何关键字的关键字相连的产品，并最终返回 1 个或多个条目。GROUP BY 然后确认您期望的数量...然后加入产品以获得最终结果。

```
select
      p.*
   from
      ( select ptt.pIndex
           from pack_to_tag ptt
                   join keywords k
                      on ptt.kindex = k.index
                     and k.word in ( 'word1', 'word2', 'word3' )
           group by 
              ptt.pIndex
           having 
              count(*) = 3 ) QualifiedProducts
      join Products p
         on QualifiedProducts.pIndex = p.index 
```

# java - 停止意图时 AsyncTasks 是否终止？

> ID：10838185
> 
> 赞同：0
> 
> 时间：2012-05-31T17:14:03.157
> 
> 标签：java, android, android-intent, android-asynctask

如果我调用`intent.stopActivity()`，并且在该 Activity 内部，我在实例化时调用了 AsyncTask：在停止 Activity 时任务是否被取消，还是会保留在后台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:47:15.123

我不知道 中的`stopActivity`方法[`Intent`](http://developer.android.com/reference/android/content/Intent.html)，但是`AsyncTask`当它的调用`Activity`被“停止”时，无论是真正处于停止状态还是完成，都不会自动取消。如果您希望发生这种情况，请在 like 中调用[`cancel`](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)适当的`AsyncTask`生命周期方法。`Activity`[`onStop`](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)

# javascript - nodejs 错误：在 Socket.ondata 处解析错误

> ID：10838186
> 
> 赞同：6
> 
> 时间：2012-05-31T17:14:08.477
> 
> 标签：javascript, http, sockets, node.js

使用 http.request 发出客户端请求时出现一些错误（节点 v0.6.18，v0.6.3），以下代码会产生错误，我有一些问题。

```
var http = require('http');
var url = require('url');

http.createServer(function(req, res) {
    var data = '多情自古空余恨';
    res.writeHead(200, {
        'Content-Type': 'text/plain',
        'Content-Length': 1 //ERROR
    });
    res.end(data);
}).listen(3000);

function request(options, callback) {
    var req = http.request(options, function(res) {
        var data = '';
        res.setEncoding = 'utf8';
        res.on('data', function(chunk) {
            data += chunk;
        });
        res.on('error', function(err) {
            callback(new Error('res error: ' + err));
        });
        res.on('end', function() {
            console.log('res on end');
            callback(null, data);
        });
    });
    req.on('socket', function(socket) {
        socket.on('error', function(err) {
            console.log('socket on error');
            callback('socket error: ' + err);
            req.abort();
        });
    });
    req.end();
}

request({
    host: 'localhost',
    port: 3000,
    method: 'GET'
}, function(err, data) {
    console.log('result, err: ' + err + ', data: ' + data);
}); 
```

输出：

```
res on end
result, err: null, data: �
socket on error
result, err: socket error: Error: Parse Error, data: undefined 
```

以下是我的问题：

1.  为什么 res 的 'end' 事件发生在 socket 的 'error' 事件之前？
2.  如果我确实想在“在 Socket.ondata 处解析错误”发生时像上面的代码或在任何其他情况下回调一个错误，如何回调一次而不是两次以上的输出（如果 res 的“结束”事件确实发生在早于套接字的“错误”事件）？

我需要你的帮助！谢谢。

================================

我发现相同的代码输出：

```
res on end
result, err: null, data: � 
```

在节点 v0.6.6 和 v0.6.11 中。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:40:04.533

因为有一个内容长度为 1 的标头，所以当`request`接收到正好 1 个八位字节的数据时，它会假定这就是全部并触发`end`回调。之后，接收到更多数据，套接字不知道如何处理，因此它会触发错误。

要解决此问题，您可能会在触发回调成功之前等待一小段时间并跟踪它是否已被触发。例如：

```
var req = http.request(options, function(res) {

    var data = '';
    res.setEncoding = 'utf8';
    res.on('data', function(chunk) {
        data += chunk;
    });
    res.on('error', function(err) {
        if(!callback.called) { // check before firing the callback
          callback(new Error('res error: ' + err));
          callback.called = true; // set after firing the callback
        } // ..
    });
    res.on('end', function() {
        process.nextTick(function() { // use setTimeout if nextTick is too short
          if(!callback.called) { //..
            console.log('res on end');
            callback(null, data);
            callback.called = true; // ..
          } // ..
        }); // ..
    });
});
req.on('socket', function(socket) {
    socket.on('error', function(err) {
        if(!callback.called) { // ..
          console.log('socket on error');
          callback('socket error: ' + err);
          callback.called = true; // ..
        } // ..
        req.abort();
    });
});
req.end(); 
```

（我尝试在所有新行之后添加注释以使它们突出一点。）

# ruby-on-rails - Ruby - 如果请求是以 JSON 格式发送的帖子，如何获取参数

> ID：10838189
> 
> 赞同：1
> 
> 时间：2012-05-31T17:14:23.583
> 
> 标签：ruby-on-rails, ruby, json

我有这样的请求：

```
Parameters: {"kpi"=>{"action"=>"create", "users"=>[{"las_name"=>"Doe", "user_id"=>"123", "first_name"=>"John"}, {"las_name"=>"Smith", "user_id"=>"456", "first_name"=>"Anna"}, {"user_id"=>"789", "last_name"=>"Jones", "first_name"=>"Peter"}], "controller"=>"api/kpis"}, "users"=>[{"las_name"=>"Doe", "user_id"=>"123", "first_name"=>"John"}, {"las_name"=>"Smith", "user_id"=>"456", "first_name"=>"Anna"}, {"user_id"=>"789", "last_name"=>"Jones", "first_name"=>"Peter"}]} 
```

但它在 POST 请求中以 JSON 形式出现，因此我不确定如何将其放入局部变量中。

知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:56:29.537

参数显示的事实意味着您的创建操作已正确设置为将 JSON 作为传输机制进行处理。基于该片段，您可以通过`params`哈希访问这些参数。

```
kpi = params[:kpi]
@users = kpi["users"] 
```

# c++ - 直接从 COleDateTime 获取年份和月份或先转换为 SYSTEMTIME 是否更快？

> ID：10838193
> 
> 赞同：1
> 
> 时间：2012-05-31T17:14:53.553
> 
> 标签：c++, optimization, systemtime, coledatetime

我想从 COleDateTime 对象中获取年份和月份，并且希望它尽可能快。我有两个选择；

```
COleDateTime my_date_time;
int year = my_date_time.GetYear();
int month = my_date_time.GetMonth(); 
```

或者

```
COleDateTime my_date_time;
SYSTEMTIME mydt_as_systemtime;
my_date_time.GetAsSystemTime(mydt_as_systemtime);
int year = mydt_as_systemtime.wYear;
int month = mydt_as_systemtime.wMonth; 
```

问题是，哪个更快？

`COleDateTime`将其内部日期表示存储为`DATE`typedef，因此当您调用时`GetYear()`，`GetMonth()`它必须每次都计算这些。在这种`SYSTEMTIME`情况下，`wYear`and的值`wMonth`存储为`DWORD`s ，因此这只是检索值的一种情况，但是将 a 转换`COleDateTime`为 a会产生开销`SYSTEMTIME`。

谢谢，

斯特伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:42:59.177

感谢@MarkRansom 的正确方向，我找到了COleDateTime 的源代码。这是功能；

```
ATLCOMTIME_INLINE int COleDateTime::GetYear() const throw()
{
    SYSTEMTIME st;
    return GetAsSystemTime(st) ? st.wYear : error;
}

ATLCOMTIME_INLINE int COleDateTime::GetMonth() const throw()
{
    SYSTEMTIME st;
    return GetAsSystemTime(st) ? st.wMonth : error;
} 
```

所以`COleDateTime::GetYear()`无论如何`::GetMonth()`都要转换`SYSTEMTIME`！

由于这些是内联函数，因此将在调用站点放置这些函数。由于`GetAsSystemTime(st)`这些函数之间是通用的，编译器优化应该将其分解为一个临时变量，因此我的问题中的两个代码片段是等效的。由于选项 1 更简单，因此没有理由不使用它。

* * *

**更新：**

一旦有机会，我就对代码进行了基准测试。看起来我所说的编译器优化不适用于上述代码。两种方法的 100 万次操作的时间如下：

直接调用：154ms
SYSTEMTIME 方法：75ms

好吧，这就解决了。转换为`SYSTEMTIME`它。

# ruby - 忽略 cane 中的日志消息的方法（rubygem）

> ID：10838197
> 
> 赞同：1
> 
> 时间：2012-05-31T17:15:03.617
> 
> 标签：ruby

有没有办法让 cane 忽略日志消息？

例如，我们有如下所示的日志消息：

```
logger.debug { "something happened that you should know about" } 
```

这增加了方法的复杂性，但它是必要的复杂性，所以我不希望它计入 ABC 复杂性测量。

删除调试语句周围的块将降低复杂性，但也会减慢代码速度，因为必须在方法运行时评估字符串。我们需要速度增益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:37:36.980

没有开箱即用的方法，但您可以自定义`AbcCheck`为某些 AST 节点添加异常：[https ://github.com/square/cane/blob/master/lib/cane/abc_check.rb #L51](https://github.com/square/cane/blob/master/lib/cane/abc_check.rb#L51)

在实践中，我发现如果一个方法的日志记录增加了如此多的复杂性以至于成为一个问题，那么分解该方法通常是有意义的。如果不是，请记住，较低并不总是更好。cane 的目的是防止你不小心使用复杂的方法，而不是奖励你得分最低。

现在还有排除某些文件的功能，这不能直接解决您的问题，但可能会有所帮助。请参阅自述文件的“定义排除”部分。

# nhibernate - nHibernate abstractCriterion 并进行动态查询

> ID：10838198
> 
> 赞同：0
> 
> 时间：2012-05-31T17:15:03.747
> 
> 标签：nhibernate, c#-4.0, dynamic

我需要做的是在 nHibernate 中进行查询（完全动态地我不知道我将拥有多少个对象）。

这个查询应该返回的是特定 ID 的对象（我得到了`List<int>`）。

有什么办法可以限制

```
Restrictions.Eq("Id",first item from my list of ints).Or("Id",second item) .... and so on. 
```

我知道我可以做到，`AbstractCriterion`但不知道如何检查我的对象`List<int>`是否是第一个。

那我该怎么做呢？

感谢提前:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:26:41.273

您需要以下`In`标准：

```
session.CreateCriteria(typeof(XYZ))
.Add(Expression.In("Id", values)) 
```

# windows - 如何在matlab中杀死孤立的winword.exe

> ID：10838203
> 
> 赞同：2
> 
> 时间：2012-05-31T17:15:26.810
> 
> 标签：windows, matlab, ms-word, process, office-interop

在 Windows 7 企业版上运行 matlab R2010B

在 matlab 脚本中，我将一堆结果保存到一个 word 文件中，然后在最后关闭并退出 word。我使用的代码是：

```
WordFname = ['BatInfoDoc' sprintf('%0.3f',now) '.doc']; % serialnumbered filenames
WordFile = fullfile(pwd,WordFname);
WordApp = actxserver('Word.Application');
WordDoc = WordApp.Documents.Add;
WordDoc.SaveAs2(WordFile);
....
WordApp.Selection.TypeText([title2 title3 title4 title5 title6]);
WordApp.Selection.TypeParagraph; 
```

然后终于在脚本的结尾

```
WordDoc.Close;
WordApp.Quit; 
```

我遇到的问题是，在我的开发过程中，我经常使 matlab 脚本崩溃并最终留下孤立的 WINWORD.EXE 进程，每个进程都锁定它正在编写的文件。

到目前为止，我一直在使用 TaskManager 手动杀死这些进程。整个上午都在开发，我发现自己有大约 20 个无法删除的文件，因为它们被大约 11 个孤立的 WINWORD.EXE 进程锁定！

我的问题： 1) 是否有一种优雅的方式来处理文件写入、保存和关闭等等，所以当我的脚本在我到达关闭的部分之前崩溃时，我不会锁定文件和进程文件和退出词？2）是否有一种优雅的方法可以从 matlab 脚本中确定不良进程并从 matlab 脚本中删除它们？也就是说，我可以编写我的 matlab 代码以便它自行清理吗？

几分钟后添加：顺便说一下，我不希望将我的所有代码都包含在一个大的 try-catch 中，然后在我发现我的错误后关闭窗口。问题是我确实喜欢在出错时进入调试模式，并且捕获的错误不会让我进入调试模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:52:15.733

使用句柄类自动删除它们。

```
classdef SafeWord < handle 

  properties(Access=public)
       WordApp;
  end

  methods(Access=public)
    function this = SafeWord(WordApp)
        this.WordApp= WordApp;
    end

   function delete(this)
      this.WordDoc.Close;
      this.WordApp.Quit;
   end
 end
end 
```

和用例：

```
 sw = SafeWord(Word.Application());
  WordApplication = sw.WordApp;
 % Do something here

 % When sw ends its lifecycle, it calls delete. 
```

这是一个[相关](https://stackoverflow.com/questions/8847866/how-can-i-close-files-that-are-left-open-after-an-error/8847870#8847870)的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T20:09:47.530

创建后直接`Wordapp`使用`c = onCleanup(@()Wordapp.Quit)`. 当您的函数自然退出或崩溃退出时，`c`将被删除并执行其函数，退出 Word。如果这是脚本而不是函数的一部分，您可以手动删除`c`以退出。

另外 - 在开发/调试时，我会设置`Wordapp.Visible`为，`true`以便您可以在必要时手动关闭 word。回到`false`生产。

# javascript - 优化 JavaScript setTimeout

> ID：10838208
> 
> 赞同：0
> 
> 时间：2012-05-31T17:15:52.510
> 
> 标签：javascript, jquery, optimization

写这个更好的方法是什么：

```
setTimeout(function() {
    $('#clock').animate({
        'marginTop': '-20px'
    }, 'slow', $.bez(bezierEasing));
}, 100);
setTimeout(function() {
    $('#submit').animate({
        'top': '-5px'
    }, 500, $.bez(bezierEasing));
}, 200);
setTimeout(function() {
    $('#details').animate({
        'top': '-200px'
    }, 500, $.bez(bezierEasing));
}, 300);
setTimeout(function() {
    $('#details').animate({
        'top': '19px'
    }, 100, $.bez(bezierEasing));
}, 600); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:19:17.060

创建一个函数：

```
// adjust your function accordingly...
function animateIt(selector, speed, top) {
   setTimeout(function() {
    $(selector).animate({
     'top': top
    },   speed, $.bez(bezierEasing));
   }, 600);    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:29:10.410

只是扔掉我的版本...

```
function animateEl(selector, css, speed, timer) {
   var tmp = parseInt(speed, 10);
   if (!isNaN(tmp)) {
      speed = tmp;
   }
   return setTimeout(function () {
      $(selector).animate(css, speed, $.bez(bezierEasing) 
   }, timer);
}

animateEl('#clock', {'marginTop': '-20px' }, 'slow',  100);
animateEl('#submit', { 'top': '-5px' }, 500, , 200);
animateEl('#details', { 'top': '-200px' }, 500, 300);
animateEl('#details', { 'top': '19px' }, 100,  600); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:21:23.753

为什么不使用greensock.com 的[TimelineMax ，而不是使用一些奇怪的 timeOut 链。](http://www.greensock.com/v12/)

它更先进，更易于使用。

# c++ - 为什么派生类不使用基类 operator=（赋值运算符）？

> ID：10838211
> 
> 赞同：14
> 
> 时间：2012-05-31T17:16:12.413
> 
> 标签：c++, operator-overloading, assignment-operator

以下是实际问题的简化版本。`Base::operator=(int)`代码似乎生成了一个临时`Derived`对象并复制它，而不是 call 。为什么不使用基本赋值运算符，因为函数签名似乎完美匹配？这个简化的示例没有显示任何不良影响，但原始代码在析构函数中有一个副作用，会导致各种破坏。

```
#include <iostream>
using namespace std;

class Base
{
public:
   Base()
   {
      cout << "Base()\n";
   }

   Base(int)
   {
      cout << "Base(int)\n";
   }

   ~Base()
   {
      cout << "~Base()\n";
   }

   Base& operator=(int)
   {
      cout << "Base::operator=(int)\n";
      return *this;
   }
};

class Derived : public Base
{
public:
   Derived()
   {
      cout << "Derived()\n";
   }

   explicit Derived(int n) : Base(n)
   {
      cout << "Derived(int)\n";
   }

   ~Derived()
   {
      cout << "~Derived()\n";
   }
};

class Holder
{
public:
   Holder(int n)
   {
      member = n;
   }

   Derived member;
};

int main(int argc, char* argv[])
{
   cout << "Start\n";
   Holder obj(1);
   cout << "Finish\n";

   return 0;
} 
```

输出是：

```
Start
Base()
Derived()
Base(int)
Derived(int)
~Derived()
~Base()
Finish
~Derived()
~Base() 
```

[http://ideone.com/TAR2S](http://ideone.com/TAR2S)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T17:16:12.633

这是编译器生成的`operator=`方法和[成员函数隐藏](http://www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.9)之间的微妙交互。由于 Derived 类没有声明任何 operator= 成员，因此编译器隐式生成了一个：`Derived& operator=(const Derived& source)`. 此 operator= 将 operator=*隐藏*在基类中，因此无法使用。编译器仍然能够通过使用`Derived(int)`构造函数创建一个临时对象并使用隐式生成的赋值运算符复制它来完成赋值。

因为进行隐藏的函数是隐式生成的，并且不是源代码的一部分，所以很难发现。

这可以通过`explicit`在构造函数上使用关键字来发现`int`- 编译器会发出错误而不是自动生成临时对象。在原始代码中，隐式转换是一个很好用的特性，所以`explicit`没有使用。

解决方案相当简单，Derived 类可以显式地从 Base 类中提取定义：

```
using Base::operator=; 
```

[http://ideone.com/6nWmx](http://ideone.com/6nWmx)

# facebook-graph-api - Facebook 喜欢（带有评论）在受密码/登录保护的网站上无法正常工作

> ID：10838214
> 
> 赞同：0
> 
> 时间：2012-05-31T17:16:21.417
> 
> 标签：facebook-graph-api, passwords, facebook-like

我正在与我们的网络开发人员合作，将 Facebook 喜欢（带有评论）集成到我们的网站上。但是，他遇到了问题，因为 FB 在需要登录的网站上不能很好地工作。目前，当您单击“喜欢”按钮时，“喜欢”会变成“确认”。然后，您必须点击“确认”，然后会出现另一个框，显示类似将如何出现在您的 FB 页面上，并显示“点击喜欢以将其发布到您的个人资料”，并选择“喜欢”或取消。如果您单击“喜欢”，则它会弹出评论框，然后您可以添加评论并发布到FB。

当前点击次数过多，无法正常工作。有人有建议吗？直接使用数字可能会更好，或者这是需要登录的网站的常见问题。我们只希望用户能够单击一次，添加他们的评论并将其发布到 FB。

任何帮助都会非常感激。如果它是技术性的，那很好，因为我会将回复传递给我的开发人员。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:52:45.777

这通常会发生在 Facebook 抓取工具的新 URL 和网站上。这是一种安全措施，可以防止某些网站过去曾做过类似劫持。您应该确保使用[调试工具](https://developers.facebook.com/tools/debug)对您的网站进行全面测试，并且在一些确认“喜欢”之后，该步骤将被自动删除，未来的用户只需点击一次。

如果您在登录后门控内容，我还建议您为使用 Facebook 刮板用户代理检测到的任何内容显示不同的 HTML（包括 OG 标签）（请参阅[*Facebook 何时刮取我的页面？*](https://developers.facebook.com/docs/reference/plugins/like/#faq)在[Like Button FAQ](https://developers.facebook.com/docs/reference/plugins/like/#faq)上），以便，例如，即使刮板在技术上未登录，也会正确提取产品详细信息页面的 OG 标签。

# box-api - 在 iPad 上使用 Box 进行身份验证

> ID：10838221
> 
> 赞同：1
> 
> 时间：2012-05-31T17:17:08.290
> 
> 标签：box-api

我正在向 iPad 应用程序添加 Box 支持。我尝试了官方的SDK，但我不想使用它，原因如下：

1.  `UIModalPresentationFormSheet`登录页面对于iPad 上具有样式的模态控制器来说太宽了。[加载https://m.box.net/api/1.0/auth/](https://m.box.net/api/1.0/auth/)`UIWebView`内容的 SDK 托管，它可能返回最小宽度设置为 768px 的 HTML（尽管我没有检查 HTML，在这里推测）。

2.  登录页面中的 HTML 不显示 Google Apps 身份验证选项。该页面的完整桌面版本可以。

3.  由于登录页面托管在`UIWebView`用户中，因此无法确定他将凭据提供给 Box，而不是应用程序作者。

4.  我不需要整个 SDK 功能，只需要身份验证、文件夹/文件列表和内容下载。由于我的应用程序还使用其他云存储提供商，我更愿意提供统一的文件浏览体验。

这是我要做的：

1.  为我的应用添加自定义 URL 方案，比如“myapp”。

2.  在我的应用程序的 Box 应用程序设置中，将重定向 URL 设置为`myapp://RedirFromBoxAuth`.

当用户选择从我的应用程序中浏览 Box 时，我将：

1.  打电话买票`GET https://www.box.com/api/1.0/rest?action=get_ticket&api_key={API_KEY}`

2.  提取票证，然后调用`openUrl`这`https://www.box.com/api/1.0/auth/{TICKET}`将打开 Safari 并让用户输入他的凭据。这是登录页面的完整桌面版本。

3.  成功登录后，Box 的服务器会告诉 Safari 重定向到`myapp://RedirFromBoxAuth?ticket={TICKET}&auth_token={TOKEN}`，这反过来又会告诉 iOS 将控制权交给我的应用程序。

4.  我的应用收到`handleOpenURL`通知，我可以提取身份验证令牌并从现在开始使用 REST API。

请评论，这是一个好计划吗？我创建了一个快速原型，它似乎可以工作，但也许我遗漏了什么？

Box 团队，您能否告诉我们使用此身份验证模型的应用程序是否有资格包含在 OneCloud 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:23:57.900

这似乎是一个很好的策略，并且可能会比普通重定向提供更好的用户体验/更简单的实现。如果您通过这种方式实施遇到任何奇怪的边缘情况，请告诉我们。

# c# - 渲染前从 WebBrowser 控件中删除标记

> ID：10838222
> 
> 赞同：5
> 
> 时间：2012-05-31T17:17:09.697
> 
> 标签：c#, .net, webbrowser-control

**问题：**

我正在运行一个带有嵌入式 WebBrowser 控件的 winforms 应用程序。我已经使用魔法注册表设置将此控件切换到 IE 8 模式（如此处回答[的 IE9 WebBrowser 控件是否支持 IE9 的所有功能，包括 SVG？](https://stackoverflow.com/questions/4612255/regarding-ie9-webbrowser-control)）。

但是现在，如果我导航到包含 Meta 标签 X-UA-Compatible IE=9 的网站（截至[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx) ) 我的浏览器控件切换到 IE9 模式并忽略注册表设置。

我希望我的控件保持在 IE8 模式...

**我的解决方案尝试**

在使用 IHTMLDOMNode.removeChild 加载控件（Document_complete）后，我尝试删除元标记，但控件不会重新呈现页面。

我尝试手动加载 HTML 内容（使用 WebClient），删除元标记并将其提供给 webbrowser 控件（使用 Document.Write 或 DocumentText），但这样控件拒绝加载任何其他内容（如图像） .

**帮助**

现在，我没有编写自己的 HTTPProxy 并在途中修改响应的想法（我不想这样做）。

有人有什么想法吗？

我正在使用 .Net 4，我无法更改将显示的网站，并且无论 X-UA-Compatible 标签如何，我都需要它以 IE8 模式呈现...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T09:48:14.340

我也有问题`DocumentText`——我放弃了。

我的解决方案是编写一个进程内 HTTP 服务器并指向`WebBrowser`它。

我在这里写了一篇关于它的文章：http: [//SimplyGenius.net/Article/WebBrowserEx](http://simplygenius.net/Article/WebBrowserEx)

就我而言，我是从文件系统中获取内容的。
您必须更改它才能调用您的目标网站，但这不应该是太多的工作。
然后您可以根据需要修改 HTML，链接仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T09:18:29.327

不知道如何使 WebBrowser 控件忽略该标记并且不覆盖您的注册表设置。对于快速（肮脏）的解决方法，您可以执行以下操作。

为要在 WebBrowser 控件中显示的站点创建一个请求。

```
var requestUri = new Uri("http://stackoverflow.com/");
var request = (HttpWebRequest) WebRequest.Create(requestUri); 
```

得到回应。

```
var response = request.GetResponse();
using (var stream = response.GetResponseStream())
using (var reader = new StreamReader(stream))
{
    var html = reader.ReadToEnd();
    //...
} 
```

使用 NuGet 安装 HTMLAgilityPack。

[http://nuget.org/packages/HtmlAgilityPack](http://nuget.org/packages/HtmlAgilityPack)

在 HtmlDocument 实例中加载您刚刚检索到的 HTML。

```
var document = new HtmlAgilityPack.HtmlDocument();
document.LoadHtml(html); 
```

选择标签。这里我以 StackOverflow.com 为例，选择它的样式表节点。找到后，只需删除该节点。

```
var nodes = document.DocumentNode.SelectNodes("//link[@rel=\"stylesheet\"]");
foreach(var node in nodes)
{
    node.ParentNode.RemoveChild(node);
} 
```

剩下的就是检索修改后的 HTML 并将其直接提供给 WebBrowser 控件。

```
html = document.DocumentNode.OuterHtml;
webBrowser.DocumentText = html; 
```

它无法解释不存在的东西。

你也可以这样做来解决你的问题。发出请求，获取响应，修改 HTML 并将其提供给 WebBrowser 控件。测试了一下，好像加载文档的其余部分OK。

# css - webkit 渲染边框的最后一个像素：1px dotted；奇怪

> ID：10838223
> 
> 赞同：0
> 
> 时间：2012-05-31T17:17:19.187
> 
> 标签：css, border, pixel, dotted-line

在 webkit safari 和 chrome 中，我发现他们渲染了 css 规则的最后一个像素，`border:1px dotted;`奇怪的是它把最后 2 个像素合并为 1，所以你在行尾得到一个黑色标记..？

有其他人遇到过这个/有工作吗？请看下面的附图

![在此处输入图像描述](../Images/eb8923549cb824421c52fd9c3f455bf8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:22:27.853

给它一个`border-right: 1px solid transparent;`风格：http: [//jsfiddle.net/4CktD/](http://jsfiddle.net/4CktD/)

这很奇怪，但是，嘿，它有效。

# android - 如何在 facebook 应用程序上共享 URL，允许用户在 facebook 上共享它（在 Web 上）

> ID：10838224
> 
> 赞同：0
> 
> 时间：2012-05-31T17:17:31.837
> 
> 标签：android, facebook, android-intent

在我的应用程序中，我首先使用 Facebook URL 实现了一个 facebook 分享按钮来分享我想要的链接。它出现在我的墙上，我的朋友可以与其他朋友分享。全部正确。

现在我已经实现了 ACTION_SEND 意图：

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(Intent.EXTRA_TEXT, messageText + " " + mUrl + " vía @MyApp");
startActivity(Intent.createChooser(i, getString(R.string.select_app))); 
```

使用此代码，链接作为状态更新发布在我的 Facebook 墙上，因此可以与任何人共享，仅“喜欢”和“评论”。

有什么解决办法吗？也许我必须使用其他 mimetype？我在网上找不到任何解决方案...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:40:09.203

根据[http://developers.facebook.com/bugs/332619626816423/](http://developers.facebook.com/bugs/332619626816423/)你不能创建预填充的帖子。但是...如果您的 EXTRA_TEXT 包含有效的 URL，那么 facebook 客户端会找到该 url 并准备它。用户所要做的就是说出他自己的话。

# line - 确定 xy 平面中直线的交点

> ID：10838230
> 
> 赞同：1
> 
> 时间：2012-05-31T17:18:02.550
> 
> 标签：line, linear-algebra, point

这是一个线性代数问题，在我开始处理 2D 和 3D 编程之前，我应该理解它。我是一名商业应用程序程序员，但我正在探索对游戏编程的兴趣。我意识到这对某些人来说可能是一个简单的问题，所以请多多包涵。

直线 L 穿过点 P1 (3, -1, 2) 和 P2 (1, -2, -1)。确定 L 在 xy 平面上的交点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:20:15.020

好的，使用这两个点，您可以从该点找到一条线的方程（谷歌在 3d 中找到一条线的方程），您可以将一条线的方程和 xy 平面的方程等同起来，以找出它们的交点（谷歌在 3D 中找到两个平面的交点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T21:00:50.927

您可以使用线的 z 坐标作为自变量，并使用这两个点来获得 x 和 y 坐标以 z 表示的公式。

首先，我们定义斜率：

```
x_slope=(x2-x1)/(z2-z1);
y_slope=(y2-y1)/(z2-z1); 
```

然后我们有：

x-x1=x_slope*(z-z1)

和

y-y1=y_slope*(z-z1)

设置`z`为 0 并求解 x 和 y，我们得到

```
x_plane_coord=x1-(x_slope*z1);
y_plane_coord=y1-(y_slope*z1); 
```

# c# - 如何检查 SQL Server CE 数据库中是否已存在值

> ID：10838231
> 
> 赞同：-1
> 
> 时间：2012-05-31T17:18:04.767
> 
> 标签：c#, sql-server-ce

我正在使用 SQL Server Compact 数据库在 C# 中开发应用程序

我的问题是如何避免表中的重复条目。例如，一个学生的名字是“Praveen”，它不应该接受另一个同名的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:22:19.690

简短的回答是：让学生姓名成为唯一键。

# emacs - emacs - 仅在主要模式下设置快捷键？

> ID：10838235
> 
> 赞同：1
> 
> 时间：2012-05-31T17:18:26.633
> 
> 标签：emacs

我想覆盖`C-l`并使用它来`M-x erase-buffer`模拟击球`RET`，只有当我在`m-shell-mode`. `C-l`应该是它的默认值`recenter-top-bottom`，否则。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:29:25.503

不知道是什么`m-shell-mode`，但如果它是一个定义明确的[主要模式](http://www.gnu.org/software/emacs/manual/html_node/emacs/Major-Modes.html)，那么以下应该可以解决问题：

```
(require 'm-shell-mode)
(define-key m-shell-mode-map (kbd "C-l") 'erase-buffer) 
```

我是否可以建议一个替代绑定，它具有相同的视觉效果，但保留缓冲区内容（这很方便）。

```
(defun shell-clear-command (&optional a)
  "\"clear\" the screen"
  (interactive "P")
  (recenter (or a 0)))
(define-key m-shell-mode-map (kbd "C-l") 'shell-clear-command) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T21:32:37.993

如果`m-shell-mode`基于`comint-mode`，这对于提供 shell 与另一个进程交互的许多模式都是如此，那么您可以将`return`按键传递给 matlab 函数`comint-send-input`。在这种情况下，下面的代码应该做你想做的事：

```
(defun clear-and-return () 
  "Erases the buffer, and then passes a return to the buffer process.
Assumes the buffer is attached to a comint process."
  (interactive)
  (erase-buffer) 
  (comint-send-input))

(defun my-m-shell-mode-hook ()
  (local-set-key (kbd "C-l") 'clear-and-return))

(add-hook 'm-shell-mode-hook 'my-m-shell-mode-hook) 
```

第一个 defun 创建了一个函数，可以做你想做的事。第二个是一个钩子函数，它将绑定`C-l`到函数调用时处于活动状态的缓冲区的该函数。告诉 emacs在`add-hook`你启动时运行第二个函数`m-shell-mode`。您可以在 的主体中添加更多 m-shell-mode 自定义`my-m-shell-mode`，每次启动该模式时，Emacs 都会运行所有这些自定义。

如果`m-shell-mode`不是基于`comint-mode`，则需要了解按下时会发生什么`return`。从运行该模式的缓冲区中，键入`C-h k RET`以查找绑定到返回键的函数。使用该函数而不是`comint-send-input`上面的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:34:44.767

您可以将`m-shell-mode`以下代码添加到您的钩子中：

```
(local-set-key (kbd "C-l") 'erase-buffer) 
```

# collections - 如何防止marklogic触发器中的死锁

> ID：10838236
> 
> 赞同：-1
> 
> 时间：2012-05-31T17:18:32.760
> 
> 标签：collections, triggers, marklogic

如何防止 marklogic 触发器中的死锁。触发器正在使用集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:51:18.247

mblakele 是对的，

但是，死锁通常会发生，因为您正在写入需要读取的文件或正在读取具有写入锁的文件。

因此，我将从查看您如何保存文件开始。您可能希望将您的储蓄与您的阅读分开。

# entity-framework-4 - 实体框架通过 .Include 字段选择父/子排序

> ID：10838243
> 
> 赞同：0
> 
> 时间：2012-05-31T17:19:02.560
> 
> 标签：entity-framework-4

我有一个简单的父/子表，我想使用实体框架填充一个 SQL 语句。像这样的东西：

```
public class Parent
{
    public long ParentId { get; set; }
    public virtual List<Child> Children { get; set; }
}

public class Child
{
    public long ChildId { get; set; }
    public long ParentId { get; set; }
    public DateTime DateCreated { get; set; }
}

public Parent GetParent (long parentId)
{
    IQueryable<Parent> query =
            (from a in db.Parents.Include("Children")
             where a.ParentId == parentId
             select a);
    return query.FirstOrDefault();
} 
```

这似乎适用于在一个 SQL 语句中获取父级和所有子级。我现在要做的是按 DateCreated 字段对子列表进行排序，但我不知道该怎么做。我看过有关使用 ThenBy() 的帖子，但看不到如何在上面的 Linq 中注入。有没有更好的方法来制定 Linq？

-shnar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:23:19.483

不幸的是，这不受支持。您不能按 Linq-to-entities 订购包含的记录。只能订购父记录。但是您仍然可以执行以下操作：

```
var parent = GetParent(id);
var orderedChildren = parent.Children.OrderBy(c => c.DateCreated); 
```

# c# - 当一个构造函数实现另一个构造函数时有好处还是坏处？

> ID：10838251
> 
> 赞同：18
> 
> 时间：2012-05-31T17:19:29.260
> 
> 标签：c#, constructor

如果我有这样的课程：

```
public class Foo
{
    public IEnumerable<Bar> Bars { get; set; }

    public Foo()
    {
        Bars = new List<Bar>();
    }
} 
```

在某个阶段，我重构了类并添加了一个辅助构造函数，它实现了第一个构造函数，如下所示：

```
public class Foo
{
    public IEnumerable<Bar> Bars { get; set; }

    // some more properties were added

    public Foo()
    {
        Bars = new List<Bar>();
    }

    public Foo(string parameter): this()
    {
        .... some code here
    }
} 
```

我也可以这样写：

```
public class Foo
{
    public IEnumerable<Bar> Bars { get; set; }

    // some more properties were added too

    public Foo()
    {
        InitilizeFoo();
    }

    public Foo(string parameter)
    {
        InitilizeFoo();
        .... some code here
    }

    private void InitializeFoo()
    {
        Bars = new List<Bar>();
    }
} 
```

看到这两种方法在这种情况下都有效，使用其中一种方法有好处还是坏处？

是继承构造函数更高效并使代码执行得更快，还是有一个我不知道的缺点是让第二个实现更高效？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-31T17:21:56.303

让一个构造函数调用另一个构造函数的主要好处之一是您可以通过这种方式设置只读字段，而不能通过调用非构造函数方法来做到这一点。

例如：

```
public class Foo
{
    private readonly int myNumber;

    public Foo() : this(42)
    {
    }

    public Foo(int num)
    {
        myNumber = num;
    }
} 
```

性能方面，调用另一个构造函数可能不会比调用另一个方法更有效率，但在我看来，构造函数调用另一个构造函数比调用一个单独的私有方法更具可读性，该方法的唯一目的是由构造函数调用。

当然，在某些情况下，有一个单独的方法是有意义的，而且它本身肯定不是“错误的”。在大多数情况下，链式构造函数对许多人来说读起来更好，并且不会对性能产生负面影响。

**更新**：我对每种方式执行了 10,000,000 次迭代（链式与私有初始化方法），结果非常接近，几乎无法区分：

```
Initializer Method took: 84 ms for 10,000,000 iterations, 8.4E-06 ms/each.
Chained Constructors took: 81 ms for 10,000,000 iterations, 8.1E-06 ms/each. 
```

所以真的，在性能方面，这两种方式几乎没有任何好处。主要好处是使用链式构造函数可以设置`readonly`字段，并且在大多数情况下它更具可读性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T17:23:21.043

链接构造函数是强制执行 SRP 和程序流的好方法。`Initialize()`如果在对象生命周期中有其他情况您可能还想“初始化”它，那么将初始化代码隐藏在独立函数中可能是有意义的；也许如果您希望能够快速实例化和延迟初始化它。但是，如果在生命周期中执行该功能的唯一有效时间是在实例化期间，并且初始化是一组明确定义的离散步骤，需要按顺序执行，那么链接有助于实现这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T17:22:15.493

关键是减少重复代码的数量。在这种情况下，从参数化构造函数调用基本构造函数可以减少在忘记更新它们之后添加错误的机会。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T17:23:22.730

拥有 Initialise() 函数的一个好处是，如果您想重置对象 - 您可以简单地再次调用 init 函数，而不是删除并重新创建对象。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-31T17:26:10.567

我可能会因为这样说而被烧死，但在这种情况下我更喜欢使用默认参数：

```
public Foo(string parameter = null)
{

} 
```

在我看来，我有 10 到 15 个可选参数并且有 15 个不同的构造函数并不是一个优雅的解决方案。我认为默认参数只是在 4.0 框架中重新引入。

# php - PHP 中内置了哪些异常子类？

> ID：10838257
> 
> 赞同：54
> 
> 时间：2012-05-31T17:19:58.463
> 
> 标签：php, class, exception, exception-handling

我还没有找到 PHP 中所有内置 Exception 子类的列表。在创建自己的异常子类之前，我宁愿在有意义的时候使用内置的。

例如，我知道 InvalidArgumentException 存在，但似乎没有任何东西可以与 Java 的 NullPointerException 相比。

是否有人拥有或可以链接到 PHP 中可用的异常子类列表？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-31T17:22:02.683

PHP 5 有两个内置异常

*   [`Exception`](https://php.net/manual/en/class.exception.php)
*   [`ErrorException`](https://php.net/manual/en/class.errorexception.php)

PHP 中的库有自己的内置异常

*   [`DOMException`](https://www.php.net/manual/en/class.domexception.php)DOM 操作在特定情况下会引发异常，例如，当某个操作由于逻辑原因而无法执行时。
*   [`IntlException`](https://www.php.net/manual/en/class.intlexception.php)他的类用于在 intl 函数内部发生错误时生成异常。仅当启用 intl.use_exceptions 时才会生成此类异常。
*   [`PharException`](https://www.php.net/manual/en/class.pharexception.php)使用 Phar 类时抛出
*   [`ReflectionException`](https://www.php.net/manual/en/class.reflectionexception.php)使用反射类时抛出

[SPL 包含一些自己的内置异常](http://www.php.net/manual/en/spl.exceptions.php)：

*   [`BadFunctionCallException`](http://www.php.net/manual/en/class.badfunctioncallexception.php)回调是指未定义的函数或缺少某些参数。
*   [`BadMethodCallException`](http://www.php.net/manual/en/class.badmethodcallexception.php)回调是指未定义的方法或缺少某些参数。
*   [`DomainException`](http://www.php.net/manual/en/class.domainexception.php)值不符合定义的有效数据域。
*   [`InvalidArgumentException`](http://www.php.net/manual/en/class.invalidargumentexception.php)传递的参数无效。
*   [`LengthException`](http://www.php.net/manual/en/class.lengthexception.php)参数超过允许的长度（用于字符串、数组、文件大小等）。
*   [`LogicException`](http://www.php.net/manual/en/class.logicexception.php)程序逻辑中发生一般错误。
*   [`OutOfBoundsException`](http://www.php.net/manual/en/class.outofboundsexception.php)请求了非法索引。
*   [`OutOfRangeException`](http://www.php.net/manual/en/class.outofrangeexception.php)请求了非法索引。这表示应在编译时检测到的错误。
*   [`OverflowException`](http://www.php.net/manual/en/class.overflowexception.php)将元素添加到完整容器中。
*   [`RangeException`](http://www.php.net/manual/en/class.rangeexception.php)指示程序执行期间的范围错误。通常这意味着存在除下溢/溢出之外的算术错误。
*   [`RuntimeException`](http://www.php.net/manual/en/class.runtimeexception.php)发生只能在运行时发现的错误。
*   [`UnderflowException`](http://www.php.net/manual/en/class.underflowexception.php)对空容器执行无效操作，例如删除元素。
*   [`UnexpectedValueException`](http://www.php.net/manual/en/class.unexpectedvalueexception.php)接收到意外值（即作为方法调用返回值的结果）。

PHP 7 引入了新的异常，包括可捕获的错误。新的例外包括：

*   [`Throwable`](https://php.net/manual/en/class.throwable.php)是可以通过 PHP 7 中的 throw 语句抛出的任何对象的基本接口，包括 Error 和 Exception。
*   [`Error`](https://php.net/manual/en/class.error.php)是所有内部 PHP 错误的基类。
*   [`AssertionError`](https://php.net/manual/en/class.assertionerror.php)当通过 assert() 做出的断言失败时抛出。
*   [`ParseError`](https://php.net/manual/en/class.parseerror.php)在解析 PHP 代码时发生错误时抛出，例如调用 eval() 时。
*   [`TypeError`](https://php.net/manual/en/class.typeerror.php)在三种情况下可能会抛出 TypeError。第一个是传递给函数的参数类型与其相应的声明参数类型不匹配。第二个是从函数返回的值与声明的函数返回类型不匹配。第三个是将无效数量的参数传递给内置 PHP 函数（仅限严格模式）。
*   [`ArithmeticError`](https://php.net/manual/en/class.arithmeticerror.php)在执行数学运算时发生错误时抛出。在 PHP 7.0 中，这些错误包括尝试执行负数移位，以及任何调用 intdiv() 会导致值超出整数可能范围的情况。
*   [`DivisionByZeroError`](https://php.net/manual/en/class.divisionbyzeroerror.php)当试图将一个数字除以零时抛出。
*   [`ArgumentCountError`](https://php.net/manual/en/class.argumentcounterror.php)当传递给用户定义的函数或方法的参数太少时抛出。

PHP 7.3 引入了 JSON 异常：

*   [`JsonException`](https://php.net/manual/en/class.jsonexception.php)在遇到错误`json_encode()`时抛出。`json_decode()`

PHP 8 引入了一个新的例外：

*   [`ValueError`](https://php.net/manual/en/class.valueerror.php)当您将值传递给具有有效类型但不能用于操作的函数时抛出。

下面的图表展示了 PHP 7 中引入的新层次结构：

```
\Throwable
├── \Exception (implements \Throwable)
|   |── \DOMException (extends \Exception)
|   ├── \IntlException (extends \Exception)
|   ├── \JsonException (extends \Exception)
|   |── \PharException (extends \Exception)
|   |── \ReflectionException (extends \Exception)
|   |── \ValueError (extends \Exception)
│   ├── \LogicException (extends \Exception)
│   │   ├── \BadFunctionCallException (extends \LogicException)
│   │   │   └── \BadMethodCallException (extends \BadFunctionCallException)
│   │   ├── \DomainException (extends \LogicException)
│   │   ├── \InvalidArgumentException (extends \LogicException)
│   │   ├── \LengthException (extends \LogicException)
│   │   └── \OutOfRangeException (extends \LogicException)
│   └── \RuntimeException (extends \Exception)
│       ├── \OutOfBoundsException (extends \RuntimeException)
│       ├── \OverflowException (extends \RuntimeException)
│       ├── \RangeException (extends \RuntimeException)
│       ├── \UnderflowException (extends \RuntimeException)
│       └── \UnexpectedValueException (extends \RuntimeException)
└── \Error (implements \Throwable)
    ├── \AssertionError (extends \Error)
    ├── \ParseError (extends \Error)
    └── \TypeError (extends \Error)
        └── \ArgumentCountError (extends \TypeError)
    └── \ArithmeticError (extends \Error)
        └── \DivisionByZeroError extends \ArithmeticError) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-31T17:23:29.617

实际上，我现在终于找到了他们，我崩溃了，问了。

从技术上讲，PHP 似乎只有 2 个内置异常： [http ://www.php.net/manual/en/reserved.exceptions.php](http://www.php.net/manual/en/reserved.exceptions.php)

SPL 定义了更多： [http ://www.php.net/manual/en/spl.exceptions.php](http://www.php.net/manual/en/spl.exceptions.php)

解释他们的层次结构： ~~http ://www.php.net/~helly/php/ext/spl/classException.html~~ [http://web.archive.org/web/20130829124146/http://www.php .net/~helly/php/ext/spl/classException.html](http://web.archive.org/web/20130829124146/http://www.php.net/%7Ehelly/php/ext/spl/classException.html)（2013 年 8 月 29 日存档）

**更新**

上面的链接已经失效，它是基本的 PHP 异常层次结构图。我找不到原件，但这里有一个替代品：

![PHP 异常层次结构](../Images/4f9a4caa736c8f32fab804f457794c0e.png)

最初在[http://fossies.org/dox/php-5.2.17/classException.html](http://fossies.org/dox/php-5.2.17/classException.html)找到，现在存档在[http://web.archive.org/web/20151002165210/https://fossies.org/dox/ php-5.2.17/classException.html](http://web.archive.org/web/20151002165210/https://fossies.org/dox/php-5.2.17/classException.html)（存档于 2015 年 10 月 2 日）

# java - System.out 超链接？

> ID：10838259
> 
> 赞同：4
> 
> 时间：2012-05-31T17:20:07.487
> 
> 标签：java, hyperlink

所以如果我打电话

```
public void throwException throws Exception {     
  throw new Exception("foo") ; 
} 
```

输出将如下所示：

```
java.lang.Exception: foo
      at SomeClass.throwException(SomeClass.java:5) 
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
      ... 
```

现在如果我单击`(SomeClass.java:5)`，IDE 会跳转到 SomeClass.java 中的第 5 行。

是否可以在使用 System.out 或抛出异常时手动生成这些超链接？我已经尝试通过更改 StackTraceElement 来操作异常，但它似乎只适用于有效的 Java 类。

我正在做一个项目，我必须解析一个唯一定义的文件并希望打印超链接，这将直接导致该文件，而不是出现问题的解析方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:26:42.023

是的。如果您有一个名为 MyClass 的类，并且希望 IDE 提供指向该类第 10 行的链接，则可以执行以下操作：

```
System.out.println("(MyClass.java:10)"); 
```

注意：这篇文章专门针对 Eclipse IDE，它可能也适用于其他人。

编辑：我刚刚看到这篇文章，可能值得一看：[Eclipse 控制台 - 使堆栈跟踪可点击的规则是什么？](https://stackoverflow.com/questions/5232925/eclipse-console-what-are-the-rules-that-make-stack-traces-clickable)

# algorithm - as3中的益智游戏算法

> ID：10838264
> 
> 赞同：1
> 
> 时间：2012-05-31T17:20:17.673
> 
> 标签：algorithm, actionscript-3, flash, puzzle

我正在创建类似[http://www.puzzlegames.org/814games-Connect-2-Game-game.html](http://www.puzzlegames.org/814games-Connect-2-Game-game.html)的游戏。那么我应该在`connected()`功能中添加什么？ `fB`并且`sB`选择了第一个和第二个按钮。 `fBN`并且`sBN`是这些按钮的名称。 `allNull()`使`fB`, `sB`, `fBN`, 为`sBN`空。

```
function onClick(e:MouseEvent):void {
if (! another) {
    another = true;
    fB = e.target;
    fBN = e.target.name;
}
else {
    sB = e.target;
    sBN = e.target.name;
    if (fBN == sBN)
    {
        allNull();
    }
    else if (connected())
    {
        fB.removeEventListener(MouseEvent.MOUSE_DOWN, onClick);
        sB.removeEventListener(MouseEvent.MOUSE_DOWN, onClick);
        fB.alpha = 0;
        sB.alpha = 0;
        pairCount++;
        allNull();
        if (pairCount == 25)
        {
            gameOver = false;
            showScore();
            endGame();
        }
    }
    another = false;
} 
```

}

请帮忙。自 15 天以来，我一直在尝试解决此问题。提前致谢。

# jquery - 鼠标悬停取消了 JQuery 动画

> ID：10838267
> 
> 赞同：1
> 
> 时间：2012-05-31T17:20:35.427
> 
> 标签：jquery, animation, mouseover

我有一个简单的 JQuery 动画，可以在鼠标悬停时降低 div 的不透明度，在鼠标悬停时恢复到 100%，在单击时将 div 向下移动几百像素。够简单吧？

问题是：用户单击并开始移动 div，但如果用户在动画时移动鼠标，则会检测到 mouseout 事件并取消动画。

```
<!--MOUSEOVER ANIMATION-->

$(".roll").hover(function(){
    var rollid = $(this).attr('id');
    $("#h" + rollid).stop().animate({
    opacity: ".7"
    }, 400 );
});

$(".roll").mouseout(function(){
    var rollid = $(this).attr('id');
    $("#h" + rollid).stop().animate({
    opacity: "1"
    }, 400 );
});

<!--BUTTON CLICK-->
$(".roll").click(function(){
    $(".roll").removeClass("roll");
    var rollid = $(this).attr('id');
    $(".tbox").stop().animate({
    top: "540"
    }, 400,function(){
        $("#p1").fadeIn();
    });
}); 
```

页面链接是[http://www.megadyne.com/safezone/index2.php](http://www.megadyne.com/safezone/index2.php)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:23:52.153

悬停功能可用于悬停进出，如下所示：

```
$(".roll").hover(function(){
    var rollid = $(this).attr('id');
    $("#h" + rollid).stop().animate({
        opacity: ".7"
    }, 400 );
}, function(){
    var rollid = $(this).attr('id');
    $("#h" + rollid).stop().animate({
        opacity: "1"
    }, 400 );
}); 
```

顺便说一句，您可能想更改`.stop()`为`.stop(true, true)`：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

还有动画`fadeIn`& `fadeOut`：[http ://api.jquery.com/fadein/](http://api.jquery.com/fadein/)

# objective-c - Objective-C 游乐场？

> ID：10838271
> 
> 赞同：6
> 
> 时间：2012-05-31T17:20:55.417
> 
> 标签：objective-c, cocoa

是否有任何类型的 Mac 应用程序、Web 应用程序或其他类似[JSFiddle](http://www.jsfiddle.net)的用于 Objective-C/Cocoa 目的的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:29:27.320

不完全一样，但看看 F-Script：[http ://www.fscript.org/](http://www.fscript.org/)

它可以让您快速制作原型和进行实验。您还可以非常轻松地将其连接到现有应用程序中。对于某些类型的 UI 调试，它对我来说非常宝贵。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-25T15:18:53.887

我还发现[CodeRunner](http://krillapps.com/coderunner/)对于样板应用程序生成和一键式控制台运行以尝试语言片段非常方便。可在 AppStore 上以一定价格购买。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-23T23:08:46.290

我在代码注入之上为 Objective-C 创建了 Playground，所以你可以用普通的 iOS 模拟器进行试验，它[在 GitHub 上是开源的](https://github.com/krzysztofzablocki/KZPlayground)

[视频展示他们的行动](https://vimeo.com/109757619)

# android - Android 平板电脑应用程序从 USB 发送接收数据

> ID：10838275
> 
> 赞同：1
> 
> 时间：2012-05-31T17:21:28.057
> 
> 标签：android, usb, tablet

我想为我的 android 平板电脑构建一个应用程序，它将接收数据并将数据发送到不同端口上的两个 USB 设备。在我开始之前，我想知道这样的事情是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:08:00.960

绝对有可能。
我目前正在为 USB 数据采集设备开发东芝 Thrive，我可以通过 USB 集线器进行路由以访问多个设备。

您应该确保您在支持 USB 主机模式的设备上进行开发（已知 Galaxy 存在 USB 问题，而 Toshiba Thrive 在全尺寸 USB A 型端口上做得很好）。我还建议至少运行蜂窝，ICS 和 JB 更好。是的，我知道 API 已被反向移植，但同样，用户报告了问题。

# regex - 下划线以及正则表达式

> ID：10838287
> 
> 赞同：1
> 
> 时间：2012-05-31T17:22:23.723
> 
> 标签：regex

我需要带有连字符 ( `-`) 和下划线 ( `_`) 的字母数字字符串。但又不能一个人来`-`。`_`必须有一些带有 or 的 aplha 或字母数字`-`文本`_`。

```
abc- allowed
abc_abc-xyz allowed
abc896 allowed
89abc allowed
abc_ not allowed
abc- not allowed
- not allowed
_not allowed
-- not allowed
________ --- not allowed 
```

这个：

```
^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$ 
```

表达式做上面提到的所有事情，但`-`我也想添加`_`下划线。并且不能在开始或结束时出现`-`。`_`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:37:17.003

这是我将如何写这个：

```
^(?![-_])[-a-zA-Z0-9_]+(?<![-_])$ 
```

这是一个rubular：[http ://www.rubular.com/r/7biWZhiiVn](http://www.rubular.com/r/7biWZhiiVn)

这`^[-a-zA-Z0-9_]+$`将是一个仅包含您想要的字符的字符串。前瞻和后瞻确保字符串不以 or 开头或`-`结尾`_`。

您可能会更改`[-a-zA-Z0-9_]`为`[-\w]`since`\w`通常等同于`[a-zA-Z0-9_]`，但 Unicode 选项可以更改含义以包含来自其他语言的字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:29:49.440

你非常接近它：

```
^[0-9a-zA-Z]([-_]*[0-9a-zA-Z]+)*$ 
```

更好的可能是：

```
^[0-9a-zA-Z]([-_]+[0-9a-zA-Z]|[0-9a-zA-Z]+)*$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:32:41.833

你可以试试这段代码：

```
^[a-zA-Z0-9]*[a-zA-Z0-9_-]+[a-zA-Z0-9]*$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T17:33:01.443

我将其重写为：

```
^[a-zA-Z0-9]+([-_]*[a-zA-Z0-9]+)*$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T18:14:47.610

这将允许单个`-`和/或`_`以任一顺序出现，但不能同时出现。也允许直接的字母数字：

```
^[a-zA-Z0-9]+[-_]{0,1}[^-_]+[-_]{0,1}[^-_]+$ 
```

这种替代方法似乎也有效：

```
^[^-_]+[-_]{0,1}[^-_]+[-_]{0,1}[^-_]+$ 
```

# c# - 需要帮助使用 C# 创建 JSON 日期

> ID：10838290
> 
> 赞同：0
> 
> 时间：2012-05-31T17:22:30.060
> 
> 标签：c#, json

这是我的 JSON 的一部分应该是这样的：

```
"CreateDate":"\/Date(1062522780000-0500)\/" 
```

这是我试图创建它的 C#：

```
"\"CreateDate\": \"" + DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff") + "\"," + 
```

任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:33:23.853

要使用 json，请使用 Json 解析器，如[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)、[Json.Net](http://json.codeplex.com/)、[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
string json=new JavaScriptSerializer().Serialize(new {CreateDate=DateTime.Now }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:33:38.097

如果您使用`JavaScriptSerializer`or`DataContractJsonSerializer`将对象序列化为 json，则日期将如下所示。

如果您使用的是 MVC，您可以这样做

```
return JSon( yourObj ); 
```

从动作方法。

# python - 在python中重用路径

> ID：10838292
> 
> 赞同：0
> 
> 时间：2012-05-31T17:22:48.650
> 
> 标签：python, path

我有一个代码来搜索和打开一个文件：

```
def OpenButton(self, event):
    filedialog = wx.FileDialog(self, message = 'Open text file',
        defaultDir = '.',
        defaultFile = 'TestTOC.txt',
        wildcard = "Text source (*.txt)|*.txt|"  "All files (*.*)|*.*",
        style = wx.OPEN)
    if filedialog.ShowModal() == wx.ID_OK:
        print filedialog.GetPath()
    event.Skip() 
```

它会告诉我文件的路径：`C:\....\Desktop\test.txt`

我还有另一个代码需要读取我选择的文件：

```
def ReadButton(self, event):
     file=open('C:....\Desktop\test.txt','r')    # the same path as above
     text=file.read() 
     file.close() 
```

我如何复制该路径并将其替换为 open(.... , 'r')？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:26:23.960

使用变量？

```
 def OpenButton(self, event):
        filedialog = wx.FileDialog(self, message = 'Open text file',
           defaultDir = '.',
            defaultFile = 'TestTOC.txt',
            wildcard = "Text source (*.txt)|*.txt|"  "All files (*.*)|*.*",
            style = wx.OPEN)
        if filedialog.ShowModal() == wx.ID_OK:
            self.filepath = filedialog.GetPath()
        event.Skip()

    def ReadButton(self, event):
         file=open(self.filepath,'r')    # the same path as above
         text=file.read() 
         file.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:26:30.867

改变

```
print filedialog.GetPath() 
```

到

```
path = filedialog.GetPath()
print path 
```

然后对路径变量做任何你想做的事情。

# javascript - 编写类似于 vlookup 的 google Javascript

> ID：10838294
> 
> 赞同：7
> 
> 时间：2012-05-31T17:23:08.720
> 
> 标签：javascript, for-loop, google-apps-script, google-sheets

```
ColumnA ColumnB
jhinz    115
tom      116 
```

这段代码背后的想法是有人输入一个数字（比如说 116），计算机在 B 列中查找它并在 A 列中返回名称（tom）

我唯一需要代码帮助的部分是计算机在第 116 列中查找值。

我试图用嵌套的 if 语句做一个 for 循环，但它不起作用。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T19:05:27.887

以最简单的形式并查看工作原理，您可以尝试以下操作：

```
function findinB() {
  var sh = SpreadsheetApp.getActiveSheet();
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var last=ss.getLastRow();
  var data=sh.getRange(1,1,last,2).getValues();// create an array of data from columns A and B
  var valB=Browser.inputBox('Enter value to search in B')
  for(nn=0;nn<data.length;++nn){
    if (data[nn][1]==valB){break} ;// if a match in column B is found, break the loop
      }
Browser.msgBox(data[nn][0]);// show column A
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-10-22T07:02:34.063

我认为@Serge 的功能可以稍微模块化一些，可能值得分享。

```
/*
Imitates the Vlookup function. Receives:
1\. sheet - A reference to the sheet you would like to run Vlookup on
2\. column - The number of the column the lookup should begin from
3\. index - The number of columns the lookup should cover.
4\. value - The desired value to look for in the column.
Once the cell of the [value] has been found, the returned parameter would be the value of the cell which is [index] cells to the right of the found cell.
*/
function vlookup(sheet, column, index, value) {

  var lastRow=sheet.getLastRow();
  var data=sheet.getRange(1,column,lastRow,column+index).getValues();

  for(i=0;i<data.length;++i){
    if (data[i][0]==value){
      return data[i][index];
    }
  }
} 
```

任何建议或改进表示赞赏。这也可能是为缺少的急需的 Google Sheet API 函数启动 repo 的好机会。我开始了一个新的[回购，它可能有一天会变得更有用](https://github.com/CodersClan/useful-google-sheet-api-functions/blob/master/common-functions.gs)，如果你愿意贡献自己的定制功能，请不要犹豫 PR。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-10T02:40:06.610

我知道我参加聚会迟到了，但我不久前制作了这个脚本。正如预期的那样，它很慢，但它执行 vlookup 作为脚本函数。范围应作为多维数组 (array[row][col]) 传递。在 Google 表格中，您可以将单元格范围放在属性中，它会起作用：

```
function vlookupscript(search_key,range,index){
  var returnVal = null;
  for(var i in range) {
    if(range[i][0] == search_key){
        returnVal = range[i][(index-1)];
        break;
    }

  }
  return returnVal;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-09T00:33:38.243

```
//~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`
//--//Dependent on isEmpty_()
// Script Look-up
/*
Benefit of this script is:
-That google sheets will not continually do lookups on data that is not changing with using this function as it is set with hard values until script is kicked off again.
-Unlike Vlookup you can have it look at for reference data at any Column in the row.  Does not have to be in the first column for it to work like Vlookup.
-You can return the Lookup to Memory for further processing by other functions

Useage:

var LocNum    = SpreadsheetApp.openById(SheetID).getSheetByName('Sheet1').getRange('J2:J').getValues();

Lookup_(Sheetinfo,"Sheet1!A:B",0,[1],"Sheet1!I1","n","y");
//or
Lookup_(Sheetinfo,"Sheet1!A:B",0,[1],"return","n","n");
//or
Lookup_(Sheetinfo,"Sheet1!A:B",0,[0,1],"return","n","n");
//or
Lookup_(Sheetinfo,"Sheet1!A:B",1,[0],"return","y","n");
//or
Lookup_(Sheetinfo,"Sheet1!A:G",4,[0],"Database!A1","y","y");
//or
Lookup_(Sheetinfo,LocationsArr,4,[0],"return","y","y");
*/

function Lookup_(Search_Key,RefSheetRange,SearchKey_Ref_IndexOffSet,IndexOffSetForReturn,SetSheetRange,ReturnMultiResults,Add_Note)   
{
  if(Object.prototype.toString.call(Search_Key) === '[object String]')
  {
    var Search_Key = new Array(Search_Key);
  }

  if(Object.prototype.toString.call(IndexOffSetForReturn) === '[object Number]')
  {
    var IndexOffSetForReturn = new Array(IndexOffSetForReturn.toString());
  }

  if(Object.prototype.toString.call(RefSheetRange) === '[object String]')
  {
    var RefSheetRangeArr = RefSheetRange.split("!");
    var Ref_Sheet = RefSheetRangeArr[0];
    var Ref_Range = RefSheetRangeArr[1];
    var data = SpreadsheetApp.getActive().getSheetByName(Ref_Sheet).getRange(Ref_Range).getValues();         //Syncs sheet by name and range into var
  }

  if(Object.prototype.toString.call(RefSheetRange) === '[object Array]')
  {
    var data = RefSheetRange;
  }

  if(!/^return$/i.test(SetSheetRange))
  {
  var SetSheetRangeArr = SetSheetRange.split("!");
  var Set_Sheet = SetSheetRangeArr[0];
  var Set_Range = SetSheetRangeArr[1];
  var RowVal = SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(Set_Range).getRow();
  var ColVal = SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(Set_Range).getColumn();
  }

  var twoDimensionalArray = [];
  for (var i = 0, Il=Search_Key.length; i<Il; i++)                                                         // i = number of rows to index and search  
  {
    var Sending = [];                                                                                      //Making a Blank Array
    var newArray = [];                                                                                     //Making a Blank Array
    var Found ="";
    for (var nn=0, NNL=data.length; nn<NNL; nn++)                                                                 //nn = will be the number of row that the data is found at
    {
      if(Found==1 && /^n$/i.test(ReturnMultiResults))                                                                                         //if statement for found if found = 1 it will to stop all other logic in nn loop from running
      {
        break;                                                                                             //Breaking nn loop once found
      }
      if (data[nn][SearchKey_Ref_IndexOffSet]==Search_Key[i])                                              //if statement is triggered when the search_key is found.
      {
        var newArray = [];
        for (var cc=0, CCL=IndexOffSetForReturn.length; cc<CCL; cc++)                                         //cc = numbers of columns to referance
        {
          var iosr = IndexOffSetForReturn[cc];                                                             //Loading the value of current cc
          var Sending = data[nn][iosr];                                                                    //Loading data of Level nn offset by value of cc
          if(isEmpty_(Sending))                                                                      //if statement for if one of the returned Column level cells are blank
          {
          var Sending =  "#N/A";                                                                           //Sets #N/A on all column levels that are blank
          }
          if (CCL>1)                                                                                       //if statement for multi-Column returns
          {
            newArray.push(Sending);
            if(CCL-1 == cc)                                                                                //if statement for pulling all columns into larger array
            {
              twoDimensionalArray.push(newArray);
              var Found = 1;                                                                              //Modifying found to 1 if found to stop all other logic in nn loop
              break;                                                                                      //Breaking cc loop once found
            }
          }
          else if (CCL<=1)                                                                                 //if statement for single-Column returns
          {
            twoDimensionalArray.push(Sending);
            var Found = 1;                                                                                 //Modifying found to 1 if found to stop all other logic in nn loop
            break;                                                                                         //Breaking cc loop once found
          }
        }
      }
      if(NNL-1==nn && isEmpty_(Sending))                                                             //following if statement is for if the current item in lookup array is not found.  Nessessary for data structure.
      {
        for(var na=0,NAL=IndexOffSetForReturn.length;na<NAL;na++)                                          //looping for the number of columns to place "#N/A" in to preserve data structure
        {
          if (NAL<=1)                                                                                      //checks to see if it's a single column return
          {
            var Sending = "#N/A";
            twoDimensionalArray.push(Sending);
          }
          else if (NAL>1)                                                                                  //checks to see if it's a Multi column return
          {
            var Sending = "#N/A";
            newArray.push(Sending);
          }
        }
        if (NAL>1)                                                                                         //checks to see if it's a Multi column return
        {
          twoDimensionalArray.push(newArray);  
        }
      }
    }
  }
  if(!/^return$/i.test(SetSheetRange))
  {
    if (CCL<=1)                                                                                            //checks to see if it's a single column return for running setValue
    {
      var singleArrayForm = [];
      for (var l = 0,lL=twoDimensionalArray.length; l<lL; l++)                                                          //Builds 2d Looping-Array to allow choosing of columns at a future point
      {
        singleArrayForm.push([twoDimensionalArray[l]]);
      }
      SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(RowVal,ColVal,singleArrayForm.length,singleArrayForm[0].length).setValues(singleArrayForm);
    }
    if (CCL>1)                                                                                             //checks to see if it's a multi column return for running setValues
    {
      SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(RowVal,ColVal,twoDimensionalArray.length,twoDimensionalArray[0].length).setValues(twoDimensionalArray);
    }
    if(/^y$/i.test(Add_Note))
    {
      if(Object.prototype.toString.call(RefSheetRange) === '[object Array]')
      {
        SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(RowVal,ColVal,1,1).setNote("VLookup Script Ran On: " + Utilities.formatDate(new Date(), "PST", "MM-dd-yyyy hh:mm a") + "\nRange: Origin Variable" );      
      }
      if(Object.prototype.toString.call(RefSheetRange) === '[object String]')
      {
        SpreadsheetApp.getActive().getSheetByName(Set_Sheet).getRange(RowVal,ColVal,1,1).setNote("VLookup Script Ran On: " + Utilities.formatDate(new Date(), "PST", "MM-dd-yyyy hh:mm a") + "\nRange: " + RefSheetRange);      
      }
    }
    SpreadsheetApp.flush();
  }
  if(/^return$/i.test(SetSheetRange))
  {
    return twoDimensionalArray
  }
}
//~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`

//~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`
// Empty String Check
function isEmpty_(string) 
{
  if(Object.prototype.toString.call(string) === '[object Boolean]') return false;

  if(!string)             return true;         
  if(string == '')        return true;
  if(string === false)    return true; 
  if(string === null)     return true; 
  if(string == undefined) return true;
  string = string+' '; // check for a bunch of whitespace
  if('' == (string.replace(/^\s\s*/, '').replace(/\s\s*$/, ''))) return true;       

  return false;        
}
//~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~`~,~` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-24T02:50:29.457

我还是 JavaScript 和 Google Script 的新手，但这似乎可行。而且我确信有比 data.length 更好的方法来限制 for 循环，但我不知道。

```
function vlookup(row, col) {

  var x=1, y=1;
  var sheet = SpreadsheetApp.getActiveSheet();
  var data = sheet.getDataRange().getValues();

  for(x=1; x<data.length; x++){

    while(data[x][0]===row){

      for(y=1; y<data.length; y++){

        while(data[0][y]===col){

          var result = data[x][y]

          return result;

        }
      }
    }
  }

} 
```

# java - Tomcat 上的 j_security_check

> ID：10838296
> 
> 赞同：2
> 
> 时间：2012-05-31T17:23:19.390
> 
> 标签：java, security, jakarta-ee, tomcat

我是否必须做任何事情来激活 Tomcat 处理对 j_security_check 的调用？配置和 HTML 代码如下。我收到此错误：

**错误信息**

*类型*状态报告

*消息*/（上下文路径）/ProviderManager/j_security_check

*描述*请求的资源（/（上下文路径）/ProviderManager/j_security_check）不可用。

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <security-constraint>
        <display-name>Constraint1</display-name>
        <web-resource-collection>
            <web-resource-name>ProviderManager</web-resource-name>
            <description/>
            <url-pattern>/ProviderManager/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>tomcat</role-name>
        </auth-constraint>
    </security-constraint>
    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>/ProviderManager/login.jsp</form-login-page>
            <form-error-page>/ProviderManager/error.jsp</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <description/>
        <role-name>tomcat</role-name>
    </security-role>
</web-app> 
```

**tomcat-users.xml**

```
<tomcat-users>

  <role rolename="tomcat"/>
  <role rolename="role1"/>

  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>

  <user username="ide" password="mgPNx5x5" roles="manager-script,admin"/>
</tomcat-users> 
```

**登录.html**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <form action="j_security_check" method="POST">
           Username:<input type="text" name="j_username"><br>
           Password:<input type="password" name="j_password">
           <input type="submit" value="Login">
        </form>
    </body>
</html> 
```

提前致谢，

圭多

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T18:12:58.147

登录表单页面中的`action`参数被解释为相对于登录页面 URL 的 URL，因此当您提交表单时，浏览器会使用 URL 向服务器发送 POST 请求`/[context-path]/ProviderManager/j_security_check`。servlet 容器`/[context-path]/j_security_check`用作对您的 web 应用程序的身份验证请求的路径。

以下任何一项都应解决此问题：

1.  `action`将登录页面中的参数更改为`../j_security_check`.
2.  `action`将登录页面中的参数更改为`/[context-root]/j_security_check`
3.  将登录页面移动到应用程序上下文根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:46:48.480

你不需要配置任何东西。

你的项目的目录结构是什么？问题是路径。

将 login.jsp 和 error.jsp 放入 WebContent/pages 并尝试：

```
<login-config>
<auth-method>FORM</auth-method>
<form-login-config>
    <form-login-page>/pages/login.jsp</form-login-page>
    <form-error-page>/pages/error.jsp</form-error-page>
</form-login-config> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T21:18:06.013

您的 tomcat-users.xml 无效。

```
<tomcat-users>
  <role rolename="manager-script"/>
  <role rolename="manager-gui"/>
  <role rolename="admin"/>
  <user username="ide" password="whatever" roles="manager-script,admin"/>
</tomcat-users> 
```

您应该删除空的描述标签：`<description/>`

# c - 是否可以根据 C 中是否定义了头文件来添加某些代码部分？

> ID：10838300
> 
> 赞同：1
> 
> 时间：2012-05-31T17:23:28.210
> 
> 标签：c, header-files

我正在编写取决于是否包含头文件的代码。如果包含该文件，我想要某些附加功能。有没有办法做到这一点，也许用#if？使用 C 顺便说一句

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:24:45.560

只是`#define`该标题中的一个符号，`#ifdef`稍后使用。

```
header.h
#define HAVE_IPV6

some_file.c
#ifdef HAVE_IPV6
/* code */
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:54:18.587

C 标头常用的一种技术称为*包含保护*。主要目的是防止多次包含头文件，但它们也可用于满足您的需求。

包含守卫涉及测试和有条件地在项目中的每个头文件中设置预处理器常量，这是特定头文件所独有的。为了实现这一点，每个标头都包装在一个`#ifndef/#endif`块中。

例子：

**MyHeader1.h**

```
 #ifndef MY_HEADER_1_H
 #define MY_HEADER_1_H

 // header file contents...

 #endif   // MY_HEADER_1_H 
```

**MyHeader2.h**

```
 #ifndef MY_HEADER_2_H
 #define MY_HEADER_2_H

 // header file contents...

 #endif   // MY_HEADER_2_H 
```

在您的情况下，您现在可以在代码中的其他地方测试是否包含任何特定的头文件，例如`#ifdef MY_HEADER_1_H`

# ruby - Rails 3：确保在其他人之后调用 before_save 回调

> ID：10838306
> 
> 赞同：2
> 
> 时间：2012-05-31T17:23:47.080
> 
> 标签：ruby, ruby-on-rails-3, activerecord

有没有办法确保在 ActiveRecord 中的所有其他 before_save 回调之后执行给定的 before_save 回调，而不是在代码中实际对它们进行排序？

我正在编写一个包含一些 before_save 功能的外部库，但为了有效，它确实需要在所有其他功能之后调用。我可以绕过它，但它涉及放弃我真的不想放弃的肮脏属性！

- 编辑 -

我没有意识到在保存模型后会保留脏属性。所以 @page.attribute_was`yield`在`around_save`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:34:43.707

您可以将要执行的回调设为最后一个`around_save`回调。查看[可用](http://guides.rubyonrails.org/v3.2.9/active_record_validations_callbacks.html#available-callbacks)回调列表，看看您是否可以简单地为某些回调使用不同的回调“桶”，以确保它们以所需的顺序执行。

如果您仍然有多个`before_save`回调并且需要一个最后触发，您可能需要创建自定义回调，例如可能`define_model_callbacks :split_save`，将您的常规`before_save`回调注册为`before_split_save`回调，您希望最后执行的回调作为`after_split_save`回调，然后只需一个`before_save`回调运行这两组回调 ( `run_callbacks :split_save`)。有关[`ActiveModel::Callbacks`](http://api.rubyonrails.org/classes/ActiveModel/Callbacks.html)如何执行此操作的更多信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:57:19.977

`before_<type>`所以这是通过使用有序回调而不是回调来避免放弃脏属性`after_<type>`，因为脏属性`changes`在保存后会被擦除。

然而，事实证明`changes`仍然可以在`after_<type>`回调中访问。

我只是在浏览了[Vestal 版本](http://github.com/laserlemon/vestal_versions)的代码后才解决了这个问题，看看他们是如何做到的。

掌心。

我接受卡尔的回答，因为它是对相当糟糕的问题的一个非常完整的回答。

# c# - 使用 Ajax/JQuery/C# 将 URL 参数从子页面传递回主页？

> ID：10838313
> 
> 赞同：1
> 
> 时间：2012-05-31T17:24:07.073
> 
> 标签：c#, asp.net, ajax, jquery

Page1.aspx 有一个跨度元素“class1”，它触发一个针对“.click”事件的 Ajax 请求，这由 Page2.aspx 处理。Page2.aspx 使用“class2”呈现另一个 span 元素。单击“class2”会触发 Page3.aspx 上定义的另一个 Ajax 请求。

问题是，如何让 Page1.aspx 获取**anotherid**参数，以便处理它？所有结果都呈现回#results。

我一开始就做对了吗？？？

**Page1.aspx (HTML):**

```
<html>
<head>
<script type="text/javascript">
  $(document).ready(function () {
    $('.class1').click(function () {
      $.ajax({
        contentType: "text/html; charset=utf-8",
        //detect span "class2" was clicked and append to url here?
        //data: "id=" + this.id + ",anotherid=" + ???
        data: "id=" + this.id,
        url: "Page2.aspx",
        dataType: "html",
        success: function (data) {
          $('#results').html(data);
        }
      });
    });
  });
</script>
</head>
<body>
  <div><span class="class1" id="123">Click</span></div>
  <div id="results"></div>
</body>
</html> 
```

**Page2.aspx（后面的代码）：**

```
protected void Page_Load(object sender, EventArgs e)
{
  string id = Request.QueryString["id"];
  Response.Write("<span class=\"class2\" id="456">" + id + "</span>");
} 
```

**Page2.aspx (HTML):**

```
<html>
<head>
<script type="text/javascript">
  $(document).ready(function () {
    $('.class2').click(function () {
      $.ajax({
        contentType: "text/html; charset=utf-8",
        data: "anotherid=" + this.id,
        url: "Page3.aspx",
        dataType: "html",
        success: function (data) {
          $('#results').html(data);
        }
      });
    });
  });
</script>
</head>
<body>
</body>
</html> 
```

**Page3.aspx（后面的代码）：**

```
protected void Page_Load(object sender, EventArgs e) 
{
  string tags = Request.QueryString["anotherid"];
  //do something with anotherid.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:58:57.927

请参阅此代码：

```
 $.ajax({
        type: "POST",
        url: "PageX.aspx?anotherid=" + $(this).attr("id"),
        success: function (data) {
          $('#results').html(data.text());
        }
      }); 
```

希望能帮到你！

# c++ - 如何拦截 64 位进程中的 API 方法调用？

> ID：10838320
> 
> 赞同：5
> 
> 时间：2012-05-31T17:24:44.873
> 
> 标签：c++, x86, hook, x86-64, dll-injection

## 背景

我正在开发一种遗留产品，该产品可以通过注入 dll 成功拦截被注入进程试图将其转换为任意 dll 的任意方法调用。特别是 gdi32.dll 库。不幸的是，它在嵌入 64 位应用程序时不起作用。它成为一个热门话题，是时候升级它的功能了。同样不幸的是，源代码中没有注释（典型的 >:-<），而且从外观上看，编写此代码的人对 x86 指令集相当熟悉。我已经很多年没有从事装配工作了，当我这样做的时候是摩托罗拉装配。

在网上搜索后，我从一位英特尔员工那里看到了[这篇文章。](http://software.intel.com/en-us/articles/intercepting-system-api-calls/)如果我们的源代码没有早于本文大约 7 年，我会说这正是我们的 Mr. NoComments 开发人员学会执行 API 方法拦截的地方。这就是程序的相似之处。这篇文章也总结为一个不错的 pdf（[拦截系统 API 调用](http://software.intel.com/file/29382)），也可以从上述网站找到链接。

## 问题

我想真正理解英特尔网页链接中提供的示例，以便我可以很好地为 64 位场景创建解决方案。它有据可查，对我来说更容易理解。下面是 InterceptAPI() 例程的摘录。我添加了用**“//#”**表示的我自己的评论（原始评论用标准“//”标注），在这里我解释了我*认为*我知道什么和我不知道什么：

```
BOOL InterceptAPI(HMODULE hLocalModule, const char* c_szDllName,
    const char* c_szApiName, DWORD dwReplaced, DWORD dwTrampoline, int offset) 
{ 
    //# Just a foreword.  One of the bigger mysteries of this routine to me is
    //# this magical number 5 and the offset variable.  Now I'm assuming, that
    //# there are 5 bytes at the beginning of every method that are basically 
    //# there to set up some sort of pre-method-jump context switch, since its
    //# about to leave the current method and jump to another.  So I'm guessing
    //# that for all scenarios, the minimum number of bytes is 5, but for some
    //# there may be more than 5 bytes so that's what the "offset" variable is
    //# for. In the aforementioned article, the author writes "One additional 
    //# complication exists, in that the sixth byte of the original code may be
    //# part of the previous instruction. In that case, the function overwrites
    //# part of the previous instruction and then crashes."  So some method
    //# starting code contains multi-byte opcodes while others don't apparently.
    //# And if you don't know the instruction set well enough, I'm guessing
    //# you'll just have to figure it out by trial and error.
    int i; 
    DWORD dwOldProtect;

    //# Fetching the address of the method that we want to capture and reroute
    //# Example: c_szDllName="user32",   c_szApiName="SelectObject"
    DWORD dwAddressToIntercept = (DWORD)GetProcAddress( 
        GetModuleHandle((char*)c_szDllName), (char*)c_szApiName); 

    //# Storing address of method we are about to intercept in another variable
    BYTE *pbTargetCode = (BYTE *) dwAddressToIntercept;

    //# Storing address of method we are going to use to take the place of the 
    //# intercepted method in another variable.
    BYTE *pbReplaced = (BYTE *) dwReplaced; 

    //# "Trampoline" appears to be a "Microsoft Detours" term, but its basically
    //# a pointer so that we can get to the original "implementation" of the method
    //# we are intercepting.  Most of the time your replacement function will
    //# want to call the original function so this is pretty important.  What its
    //# pointing to must already be pre allocated by the caller.  The author of
    //# the aforementioned article states "Prepare a dummy function that has the
    //# same declaration that will be used as the trampoline. Make sure the dummy
    //# function is more than 10 bytes long." I believe I'd prefer allocating this
    //# memory within this function itself just to make using this InterceptAPI()
    //# method easier, but this is the implementation as it stands.
    BYTE *pbTrampoline = (BYTE *) dwTrampoline; 

    // Change the protection of the trampoline region 
    // so that we can overwrite the first 5 + offset bytes.
    //# This is voodoo magic to me, but I'm guessing you just can't hop on the
    //# stack and start changing execute instructions without ringing some
    //# alarms, so this makes sure the alarms don't ring. Here we are allowing
    //# permissions so we can change the bytes at the beginning of our
    //# trampoline method.
    VirtualProtect((void *) dwTrampoline, 5+offset, PAGE_WRITECOPY, &dwOldProtect); 

    //# More voodoo magic to me, but this appears to be a way to copy over extra
    //# opcodes that may be needed.  Some opcodes are multi byte I believe so this
    //# is where you can make sure you don't miss them.
    for (i=0;i<offset;i++) 
        *pbTrampoline++ = *pbTargetCode++; 

    //# Resetting the pbTargetCode pointer since it was modified it in the above
    //# for loop.
    pbTargetCode = (BYTE *) dwAddressToIntercept; 

    // Insert unconditional jump in the trampoline.
    //# This is pretty understandable.  0xE9 the x86 JMP command.  I looked
    //# this up in Intel's documentation and it can be followed by a 16-bit
    //# offset or a 32-bit offset. The 16-bit version is not supported in 64-bit
    //# architecture but lets just hope they are all 32-bit and that this does
    //# indeed do what it is intended in 64-bit scenarios
    *pbTrampoline++ = 0xE9;        // jump rel32 

    //# So basically here it looks like we are following up our jump command with
    //# the address its supposed to jump too.  This is a relative offset, that's why
    //# we are subtracting pbTargetCode and pbTrampoline.  Also, since JMP opcodes
    //# jump relative to the address AFTER the jump address, that's why we are
    //# adding 4 to pbTrampoline.  Also, offset is added to pbTargetCode because we
    //# advanced the pointers in the for loop above an "offset" number of bytes.
    *((signed int *)(pbTrampoline)) = (pbTargetCode+offset) - (pbTrampoline + 4); 

    //# Not quite sure why we are changing the permissions on the trampoline function
    //# again, but looks like we are making it executable here.  Maybe this is the
    //# last thing we have to do before it is actually callable and usable.
    VirtualProtect((void *) dwTrampoline, 5+offset, PAGE_EXECUTE, &dwOldProtect); 

    // Overwrite the first 5 bytes of the target function 
    //# It seems we are now setting permissions so we can modify the original
    //# intercepted routine.  It is still pointing to its original code so we
    //# need to eventually redirect it.
    VirtualProtect((void *) dwAddressToIntercept, 5, PAGE_WRITECOPY, &dwOldProtect); 

    //# This will now instruct the original method to instead jump to the next
    //# address it sees on the stack.
    *pbTargetCode++ = 0xE9;        // jump rel32

    //# this is the address we want our original intercepted method to jump to.
    //# Where its jumping to will have the code of our replacement method.
    //# The "+ 4" is because the jump occurs relative to the address of the
    //# NEXT instruction after the 4byte address.
    *((signed int *)(pbTargetCode)) = pbReplaced - (pbTargetCode +4); 

    //# Changing the permissions of our original intercepted routine back to execute
    //# permissions so it can be called by other methods.
    VirtualProtect((void *) dwAddressToIntercept, 5, PAGE_EXECUTE, &dwOldProtect); 

    // Flush the instruction cache to make sure  
    // the modified code is executed.
    //# I guess this is just to make sure that if any instructions from the old
    //# state of the methods we changed, have wound up in cache, that it gets
    //# purged out of there before it gets used.
    FlushInstructionCache(GetCurrentProcess(), NULL, NULL); 

    return TRUE; 
} 
```

我想我对这段代码中发生的事情有很好的理解。所以百万美元的问题是：**这对 64 位进程不起作用怎么办？** 我的第一个想法是，“哦，地址现在应该是 8 个字节，所以这一定是出了什么问题。” 但我认为 JMP 命令仍然只需要一个相对的 32 位地址，因此即使在 64 位进程中使用 32 位地址，操作码也应该仍然有效。除此之外，我认为唯一可能是我们在方法调用开头的神奇 5 个字节实际上是其他一些神奇的数字。有人有更好的见解吗？

**注意：** 我知道还有其他一些解决方案，例如“Microsoft Detours”和“EasyHook”。前者太贵了，我目前正在探索后者，但到目前为止它令人失望。所以，我想继续讨论这个话题。我觉得这很有趣，也是解决我的问题的最佳方法。所以请不要“嘿，我对这篇文章一无所知，但请尝试{在此处插入第 3 方解决方案}。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:34:28.813

在您的示例中，有很多事情不起作用。

1) 您正在对 PAGE_WRITECOPY 进行虚拟保护，这将失败。您想将 VirtualProtect 设置为 PAGE_EXECUTE_READWRITE。

2）如果您的“垫片”距离您尝试挂钩的 dll 超过 4GB，则您的补丁跳转不起作用，因为您使用的是 jmp 指令的 E9 形式。

3) 当您返回 VirtualProtect 时，您保护的是 PAGE_EXECUTE，而不是 PAGE_EXECUTE_READ。在实践中，您实际上应该使用从第一个 VirtualProtect 中获得的 flProtect，这样您就可以很好地把它放回去。

顺便说一下，“神奇数字5”是E9跳转指令操作码的大小，即E9作为一个字节，后跟DWORD作为偏移量。

蹦床是为了让您可以从代码内部回调原始 API（即，如果您正在填充 CreateFileW，则不能从您的 shim 内部调用 CreateFileW，否则您最终会调用您的 shim！）。

对 FlushInstructionCache 的调用对 x86/x64 没有影响。你应该删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:07:16.687

由于建议的代码看起来是针对 Microsoft 平台的，我建议您只使用[Detours](http://research.microsoft.com/en-us/projects/detours/)。使用 Detours，您的蹦床将适用于 32 位和 64 位系统。

# c# - YouTube FLV 下载链接

> ID：10838322
> 
> 赞同：1
> 
> 时间：2012-05-31T17:24:46.270
> 
> 标签：c#, .net, youtube, flv

使用 C#/.Net 下载 FLV 格式的 YouTube 视频的当前方法是什么？（如果有的话）（这个想法是让它纯粹基于桌面）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:51:55.567

转到 youtube.com 并打开任何视频，然后右键单击页面并选择 viewsource search for playerConfig 你会看到它被分配了一个[json](http://en.wikipedia.org/wiki/JSON)，它包含你需要的所有信息。有关更多信息，您可以查看[youtubeFisher](http://youtubefisher.codeplex.com/)，它是一个开源软件，因此您可以查看源代码并获取所需信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:34:48.977

第一个解决方案是使用网络服务：

使用 url 参数向[http://www.icyvideo.com](http://www.icyvideo.com)发出 http 请求（WebClient 类很好），例如[http://www.icyvideo.com/?url=http%3A%2F%2Fwww.youtube。 com%2Fwatch%3Fv%3D2Z4m4lnjxkY](http://www.icyvideo.com/?url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D2Z4m4lnjxkY)

Grep 网站上的链接“下载 FLY”并下载电影。

此解决方案的问题是您必须使用该网站，并且链接的位置可能会更改。不过，设置起来非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:33:05.243

“正确”的方法是使用他们发布的 api：

[https://developers.google.com/youtube/getting_started](https://developers.google.com/youtube/getting_started)

**更新：**

你可能会觉得这很有趣。这是一个向 API 添加缺少的下载支持的类：

[http://ytdownloadextension.codeplex.com/](http://ytdownloadextension.codeplex.com/)

# c# - MVC Url Helper 生成 &

> ID：10838323
> 
> 赞同：1
> 
> 时间：2012-05-31T17:24:47.470
> 
> 标签：c#, model-view-controller, url

我有这个帮手：

```
 public static class TestHelper
    {
        public static string Test(this UrlHelper helper)
        {
            var ret = "/Test?par1=1&par2=2";

            return ret;
        }
    } 
```

我从 _Layout.cshtml 视图中调用它

```
<script src="@Url.Test()" type="text/javascript"></script> 
```

渲染的结果是：

```
<script src="/Test?par1=1&amp;par2=2" type="text/javascript"></script> 
```

但是我需要：

```
<script src="/Test?par1=1&par2=2" type="text/javascript"></script> 
```

为什么要添加“&”字符？？我试过使用“MvcString”retun，但结果是一样的

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:28:15.910

从帮助程序返回的任何正常`string`都将被 html 转义。返回 a`MvcHtmlString`以绕过转义：

```
public static MvcHtmlString Test(this UrlHelper helper)
{
    var ret = "/Test?par1=1&par2=2";
    return MvcHtmlString.Create(ret);        
} 
```

将转义设为默认设置，需要明确选择退出，从而极大地提高了开发人员没有想到转义的所有地方的安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:27:52.620

将其更改为

```
 public static HtmlString Test(this UrlHelper helper) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T06:46:25.843

我解决了在辅助函数中添加脚本标记的问题：

```
public static class TestHelper
    {
        public static HtmlString Test(this UrlHelper helper)
        {
            var ret = "/Test?par1=1&par2=2";

            var scriptTag = string.Format("<script src=\"{0}\" type=\"text/javascript\"></script>", ret);

            return new HtmlString(scriptTag);
        }
    } 
```

但我不明白为什么 Razor 会在标签值内对结果进行编码。

谢谢！

# hash - 生成简单的访问代码以查看帐户信息

> ID：10838326
> 
> 赞同：1
> 
> 时间：2012-05-31T17:25:09.750
> 
> 标签：hash, encryption

我需要创建一个网站，允许客户在线查看他们的帐户状态信息。为了避免创建客户网站帐户的麻烦，我希望他们只需使用他们的帐号和访问代码登录即可。我想从帐号中生成访问代码，我会在他们邮寄的账单上提供代码。

从 8 位数字帐号生成此访问代码的好公式/功能/方法是什么？结果可能是数字或字母，但我不希望它超过 10 个字符。我想保持数学相当简单，以便在打印报表时可以通过水晶报表公式生成代码。我不是在寻找防弹安全，因为这不是敏感信息。我只是想防止有人随机输入帐号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:44:27.537

我要做的是将帐号一分为二（使用模块化算术），然后对这两部分进行一些数学运算以得出授权码。

例如：

`I'm assuming account number is atleast 10000, if they start at 00000001, then you will have to add a step to multiply it by 10,000 (which will result in larger auth codes for the bigger account numbers) or reduce the modulus size`

 `Let A = account number

A mod 10,000 = X

(A - X) / 10,000 = Y` 

`AuthCode = (X + 51) * (Y + 89)`

所以如果帐号是 18654848：

`18654848 % 10000 = 4848`

 `(18654848 - 4848) / 10000 = 1865

(4848 + 51) * (1865 + 89) = 4899 * 1954` 

`= 9572646`

然后在用户尝试登录时执行相同的数学运算，并查看验证码和该号码是否匹配。

这将使身份验证码在 103538 - 101384400 范围内

# logging - 使 HTMLUnit 不那么冗长

> ID：10838328
> 
> 赞同：1
> 
> 时间：2012-05-31T17:25:13.900
> 
> 标签：logging, htmlunit

我正在使用 HTMLUnit 来抓取页面，并且我的日志一直被 HTMLUnit 输出弄得杂乱无章。即，如果它返回 403 状态码，它会将整个页面的 HTML 发送到日志。

我尝试了以下方法来推迟它：

```
System.getProperties().put("org.apache.commons.logging.simplelog.defaultlog", "fatal"); 
webClient.setThrowExceptionOnFailingStatusCode(false); 
```

不幸的是，没有任何效果，我的日志看起来仍然一团糟。我的项目使用 log4j，但我没有以任何方式配置 HTMLUnit 来使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:01:29.233

尝试添加这个：

```
webClient.setPrintContentOnFailingStatusCode(false); 
```

我通常最终也会添加这个：

```
System.setProperty("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.SimpleLog");
System.setProperty("org.apache.commons.logging.simplelog.defaultlog", "fatal"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T17:56:57.073

实际上没有方法 webClient.setPrintContentOnFailingStatusCode

相反，您应该使用：

`webClient.getOptions().setPrintContentOnFailingStatusCode(false);`

# jquery - 如何在 jTemplate 中设置下拉列表的选定值？

> ID：10838329
> 
> 赞同：0
> 
> 时间：2012-05-31T17:25:17.173
> 
> 标签：jquery, jtemplates

我正在使用[jTemplates](http://jtemplates.tpython.com/)根据从服务器返回的数据创建表单的几个元素。我可以`input`毫无问题地设置字段的值，但在设置下拉列表的选定值时遇到问题。

我尝试使用 jQuery 选择器在模板本身中设置值，但它不起作用。它只是`[object Object]`在我的下拉列表上方添加了一个。我也尝试过使用一堆`{#if}`也没有奏效的语句（见下文）。

有什么想法吗？

**调用 jTemplate：**

```
<script type="text/javascript">
  $('#my_container').setTemplateURL("templates/MyTemplate.htm", [], { filter_data: false, runnable_functions: true }).processTemplate(data);
</script> 
```

**我的简化模板：**

```
<table id="expense_table_{$T.ID}">
  <tr>
    <td width="80">
      <input type="text" id="my_amount" class="amount numbersOnly" value="{$T.Amount}" />
    </td>
    <td width="180">
      <select id="my_type" class="my-type">
        {#if $T.MyTypeID == 1} 
          <option value="1" selected>Option 1</option>
        {#else}
          <option value="1">Option 1</option>
        {#/if}
        {#if $T.MyTypeID == 2} 
          <option value="2" selected>Option 2</option>
        {#else}
          <option value="2">Option 2</option>
        {#/if}
        {#if $T.MyTypeID == 3} 
          <option value="3" selected>Option 3</option>
        {#else}
          <option value="3">Option 3</option>
        {#/if}
        {#if $T.MyTypeID == 4} 
          <option value="4" selected>Option 4</option>
        {#else}
          <option value="4">Option 4</option>
        {#/if}        
      </select>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:08:26.533

事实证明，我发布的带有`{#if}`原始问题中所有陈述的模板毕竟是有效的。不过，这似乎不是一个理想的解决方案，尤其是对于具有很多选项的下拉列表。除非有人能提出更好的解决方案，否则我会将这个问题标记为已回答。

# java - 命名字符串字段上的 Guice 注入

> ID：10838335
> 
> 赞同：8
> 
> 时间：2012-05-31T17:25:42.277
> 
> 标签：java, dependency-injection, guice

我有一堂课：

```
public class FizzBuzz {
    @Named("Red") private String redService;

    public static void main(String[] args) {
        GuiceTest testApp = new GuiceTest();

        testApp.run();
    }

    private void run() {
        Injector inj = Guice.createInjector(new MyModule());

        redService = (String)inj.getInstance(String.class);

        // Should print "red-service" but is instead an empty string!
        System.out.println("redService = " + redService);
    }

    // ... Rest of class omitted for brevity
}

public class MyModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(String.class).annotatedWith(Names.named("Red")).toInstance("red-service");
    }
} 
```

在我的模块中，我指示 Guice 将所有`String.class`实例`@Named`“Red”绑定到字符串实例“red-service”，但是我在输出的 print 语句中没有看到。我如何错误地使用 Guice？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-01T14:17:22.080

让我总结一下这里已经发表的一些评论......

1.  你忘记了`@Inject`注解
2.  我强烈建议将 Guice/Injector 保留在`FizzFuzz`. 使用静态 main 方法来引导您的应用程序（不是`run()`）。
3.  将 String 绑定到常量可以很容易地通过`bindConstant`.

这给你带来了这样的事情：

```
public class FizzFuzz {
    @Inject
    @Named("red")
    private String service;

    public static void main(String[] args) {
        FizzFuzz fizzFuzz = Guice.createInjector(new AbstractModule() {
            @Override
            protected void configure() {
                bindConstant().annotatedWith(Names.named("red")).to("red-service");
            }    
        }).getInstance(FizzFuzz.class);

        System.out.println(fizzFuzz.service);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T17:54:26.650

你以前忘记`@Inject`了`@Named("Red")`。对于此类事情，也可以使用 bindConstant() 。

PS为什么你`String`从inj而不是收到`FizzBuzz`？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-27T12:08:00.110

我的方式应该更漂亮。
首先创建您的注释

```
@Retention(RetentionPolicy.RUNTIME)
public @interface InjectSetting {
     String value();
} 
```

创建你的 guice 模块

```
@Slf4j
public class SettingModule extends AbstractModule {
    private final Properties properties;

    private SettingModule(Properties properties) {
        this.properties = properties;
    }

    @Override
    protected void configure() {
        binder().bindListener(Matchers.any(), listener(((type, encounter) -> {
            for (Field field : type.getRawType().getDeclaredFields()) {
                if (field.isAnnotationPresent(InjectSetting.class)) {
                    field.setAccessible(true);

                    encounter.register(injector(instance -> {
                        try {
                            Object value = properties.get(
                                    field.getAnnotation(InjectSetting.class).value());

                            field.set(instance, parse(value, field));
                        } catch (IllegalAccessException e) {
                            binder().addError(e);
                        }
                    }));
                }
            }
        })));
    }

    TypeListener listener(BiConsumer<TypeLiteral<?>, TypeEncounter<?>> consumer) {
        return consumer::accept;
    }

    MembersInjector<Object> injector(Consumer<Object> consumer) {
        return consumer::accept;
    }

    Object parse(Object value, Field field) {
        Type type = field.getType();

        if(type == boolean.class)
            value = Boolean.parseBoolean(value.toString());
        else if(type == int.class)
            value = Integer.parseInt(value.toString());

        return value;
    }

    public static Module of(String propertiesPath, String... more) {
        Properties properties = new Properties();

        try {
            properties.load(Files.newInputStream(Paths.get(propertiesPath, more)));
        } catch(Exception e) {
            log.error("can't load config file {}", propertiesPath);
            throw new RuntimeException(e);
        }

        return new SettingModule(properties);
    }
} 
```

然后注入你的领域

```
@InjectSetting("database.port")
private int port; 
```

# java - 通过不同的按键切换纹理

> ID：10838337
> 
> 赞同：0
> 
> 时间：2012-05-31T17:25:43.120
> 
> 标签：java

我似乎无法在 if 命令中更改纹理以进行按键操作。我有一种感觉，这更像是一个公共/私有变量的事情。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyAdapter;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
public class main extends JFrame {
public String w =("C:/users/John/workspace/Gamebasics/src/untitled.png");
int x, y, xDirection, yDirection;
private Image dbImage;
private Graphics dbg;
Image face;

int x1, y1;

public void move(){
    x += xDirection;
    y += yDirection;

}
public void setXDir(int xdir){
    xDirection = xdir;
}
public class AL extends KeyAdapter {
    public void keyPressed(KeyEvent e){
        int keyCode = e.getKeyCode();
        if(keyCode == e.VK_LEFT){
            w = ("C:/users/John/workspace/Gamebasics/src/left.png");
            if(x <= 5)
                x = 5;
            if(y >= 225 && y <=400 && x >= 225 && x <= 315)
                x = 315;
        x-= +4;
        }
        if(keyCode == e.VK_UP){
            w = ("C:/users/John/workspace/Gamebasics/src/up.png");
            if(y <= 28)
                y = 28;
            if(y >= 370 && y <=405 && x >= 225 && x <= 310)
                y = 405;
            y-= +4;
        }
        if(keyCode == e.VK_DOWN){
            w = ("C:/users/John/workspace/Gamebasics/src/down.png");
            if(y >= 470)
                y = 470;
            if(y <= 370 && y >=220 && x >= 225 && x <= 310)
                y = 220;
            y+= +4;
        }
        if(keyCode == e.VK_RIGHT){
            w = ("C:/users/John/workspace/Gamebasics/src/right.png");
            if(x >= 470)
                x = 470;
            if(y >= 225 && y <=400 && x >= 220 && x <= 315)
                x = 220;
            x+= +4;
        }
        }

}
public main(){
    ImageIcon i = new ImageIcon(w);
    face = i.getImage();
    addKeyListener(new AL());
    setTitle("Retarded Rectangle Game");
    setSize(500, 500);
    setResizable(false);
    setVisible(true);
    setBackground(Color.RED);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);     
    x = 340;
    y = 360;
    x1 = 250;
    y1 = 250;

}

public void paint(Graphics g){
    dbImage = createImage(getWidth(), getHeight());
    dbg = dbImage.getGraphics();
    paintComponent(dbg);
    g.drawImage(dbImage, 0, 0, this);
    g.setColor(Color.CYAN);
    g.fillRect(250, 250, 60, 150);
    repaint();
}

public void paintComponent (Graphics g){
    g.setColor(Color.CYAN);
    g.fillRect(250, 250, 60, 150);
    repaint();
    g.drawImage(face, x, y, this);
    repaint();
}

public static void main(String[] args){
    new main();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:48:40.270

您只是在更改变量“w”的值。您实际上并没有更改图像图标的值。重置“w”字符串后，您要么必须创建一个新的 ImageIcon，要么可能使用其中一种方法来更改资源位置。然后您可能还需要重新绘制框架。

# c - current->pid 如何为 linux 工作？

> ID：10838342
> 
> 赞同：10
> 
> 时间：2012-05-31T17:26:04.293
> 
> 标签：c, linux, process

我需要包含一个库吗？任何人都可以详细说明吗？

我知道用于获取正在调用的当前任务的进程 ID

但我想用 current->pid 打印一些东西

`printk("My current process id/pid is %d\n", current->pid);`

...并且给了我一个错误

`error: dereferencing pointer to incomplete type`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T17:28:48.833

你正在寻找`#include <linux/sched.h>`. 这`task_struct`就是声明的地方。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T17:58:15.460

您的代码应该可以工作。您可能缺少一些标题。

`current`是一个 per-cpu 变量定义在`linux/arch/x86/include/asm/current.h`（所有代码都是针对 x86 的情况）：

```
DECLARE_PER_CPU(struct task_struct *, current_task);
static __always_inline struct task_struct *get_current(void)
{
    return percpu_read_stable(current_task);
}
#define current get_current() 
```

`current`指向在给定时刻在 CPU 上运行的任务。它的类型是`struct task_struct`，它定义在`linux/include/linux/sched.h`：

```
struct task_struct {
    ...
    pid_t pid;   // process identifier
    pid_t tgid;  // process thread group id
    ...
}; 
```

[您可以在Linux 交叉参考](http://lxr.linux.no/)中浏览这些文件的代码：

*   [当前.h](http://lxr.linux.no/linux+v3.4/arch/x86/include/asm/current.h)
*   [时间表](http://lxr.linux.no/linux+v3.4/include/linux/sched.h)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-31T17:27:57.663

我认为您正在寻找[getpid()](http://www.kernel.org/doc/man-pages/online/pages/man2/getpid.2.html)系统调用。我不知道是什么`current`。

# java - 关于检查条件

> ID：10838349
> 
> 赞同：-3
> 
> 时间：2012-05-31T17:26:34.430
> 
> 标签：java

```
 public static final int FALSE = 0;
  public static final int TRUE = 10; 
```

请告诉我一件事，我在下面的代码中有这个

```
 if (!walgreensRewardsSupport.isPreProdOrTrainingMode()
        && walgreensRewardsSupport.isWagRewardsRedeemptionEnabled()
        && null != walgreensRewardsInfoLine
        && null != walgreensRewardsInfoLine.getMemberFullProfile()
        && (null != walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints())
        && (walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints().getCurrentBalance() != 0)
        && !transaction
            .getBooleanValue(ITransactionHashtableWag.REWARDS_REDEMPTION_ZIPCODE_LIMIT_REACHED)
        && !walgreensRewardsRedemptionSupport.isLoyaltyRedemptionTenderLineExist(transaction)
        // No need to force recalculation each time, recalculation happens after any tender line is
        // added to transaction.
        && walgreensRewardsRedemptionSupport.getRedemptionEligibleTransactionAmount(transaction,
            true, false).isGreaterThanZero()) {
      return TRUE;
    }   
else {
      return FALSE;
    }

  } 
```

现在我必须在它之间添加一个条件...检查 walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints().getValues().size() 是否为 0 然后返回 False ..我已经按照以下方式完成了..

```
 if (!walgreensRewardsSupport.isPreProdOrTrainingMode()
        && walgreensRewardsSupport.isWagRewardsRedeemptionEnabled()
        && null != walgreensRewardsInfoLine
        && null != walgreensRewardsInfoLine.getMemberFullProfile()
        && (null != walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints())
        && (walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints().getCurrentBalance() != 0)
        && !transaction
            .getBooleanValue(ITransactionHashtableWag.REWARDS_REDEMPTION_ZIPCODE_LIMIT_REACHED)
        && !walgreensRewardsRedemptionSupport.isLoyaltyRedemptionTenderLineExist(transaction)
        // No need to force recalculation each time, recalculation happens after any tender line is
        // added to transaction.
        && walgreensRewardsRedemptionSupport.getRedemptionEligibleTransactionAmount(transaction,
            true, false).isGreaterThanZero()) {
      return TRUE;
    }else if (walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints().getCurrentBalance() == 0)
{
return FALSE
}   
else {
      return FALSE;
    }

  } 
```

请指教是否正确..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:42:07.627

在第一个代码块中，您有：

```
if (condition) {
  return TRUE;
} else {
  return FALSE;
} 
```

这可以简化为：

```
return (condition) ? TRUE : FALSE; 
```

如果 TRUE 和 FALSE 只是布尔值，

```
return (condition); 
```

在第二个代码块中，您有：

```
if (condition1) {
  return TRUE;
} else if (condition2) {
  return FALSE;
} else {
  return FALSE;
} 
```

else-if 没有任何价值，除非您预计第二个条件的评估会产生副作用。

还要注意，对私有方法的一些深思熟虑的使用可以使这段代码更容易理解。你可以像这样封装你的大条件的一部分：

```
private boolean hasRewardsPointsBalance(InfoLine infoLine) {
  if (null == infoLine) return false;
  MemberProfile profile = infoLine.getMemberFullProfile();
  if (null == profile) return false;
  RewardsPoints rewards = profile..getRewardPoints();
  if (null == rewards) return false;
  return (rewards.getCurrentBalance() != 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:08:54.903

最好将您想要的 false 的逻辑补码添加到逻辑上并一起返回 true 的条件集。

例如：

```
 if (!walgreensRewardsSupport.isPreProdOrTrainingMode()

    && walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints()
       .getValues().size() != 0

    && walgreensRewardsSupport.isWagRewardsRedeemptionEnabled()
    && null != walgreensRewardsInfoLine
    && null != walgreensRewardsInfoLine.getMemberFullProfile()
    && (null != walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints())
    && (walgreensRewardsInfoLine.getMemberFullProfile().getRewardPoints().getCurrentBalance() != 0)
    && !transaction
        .getBooleanValue(ITransactionHashtableWag.REWARDS_REDEMPTION_ZIPCODE_LIMIT_REACHED)
    && !walgreensRewardsRedemptionSupport.isLoyaltyRedemptionTenderLineExist(transaction)
    // No need to force recalculation each time, recalculation happens after any tender line is
    // added to transaction.
    && walgreensRewardsRedemptionSupport.getRedemptionEligibleTransactionAmount(transaction,
        true, false).isGreaterThanZero()) {

  return TRUE; 
```

这比您编写的代码要简单。

# facebook-like - Facebook喜欢按钮（IFRAME）不起作用

> ID：10838358
> 
> 赞同：0
> 
> 时间：2012-05-31T17:27:16.967
> 
> 标签：facebook-like

我已在 iframe 中成功安装了 facebook like 按钮，但似乎“喜欢”计数不正确。我尝试过喜欢多个帐户的帖子，但它总是显示为只有 1 个喜欢。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:37:44.620

我在 facebook 之类的按钮上遇到了一些“错误”。首先检查您的元数据和您的 og: 属性。将您的网址放入点赞按钮生成器 (http://developers.facebook.com/docs/reference/plugins/like/) 并尝试点赞您的页面。如果计数是请尝试将点赞 url 更改为 facebook 页面，您的页面的生成器是什么来管理它。这是我修复它的解决方案。

# r - 润滑字符串

> ID：10838359
> 
> 赞同：1
> 
> 时间：2012-05-31T17:27:20.390
> 
> 标签：r, posixct, lubridate

我想将字符向量转换为 POSIXct 对象，但无法实现

```
03-Jun-2012 5:00am PDT 
```

我可以将 lubridate`dmy`函数用于日期，但无法将其与时间结合使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:03:46.667

我不会`lubridate`用于这种情况。而是使用基本`as.POSIXct`功能：

```
as.POSIXct('03-Jun-2012 5:00am PDT', format='%d-%b-%Y %l:%M%p') 
```

# php - 使用 parse_url 获取整个 url 而不是其中的一部分

> ID：10838360
> 
> 赞同：1
> 
> 时间：2012-05-31T17:27:32.743
> 
> 标签：php, url, parse-url

我试图让这个函数更全面，以解析更多的 url

目前我拥有的功能是这个

```
function _pagepeeker_format_url($url = FALSE) {
if (filter_var($url, FILTER_VALIDATE_URL) === FALSE) {
return FALSE;
}

// try to parse the url
$parsed_url = parse_url($url);
if (!empty($parsed_url)) {
$host = (!empty($parsed_url['host'])) ? $parsed_url['host'] : '';
$port = (!empty($parsed_url['port'])) ? ':' . $parsed_url['port'] : '';
$path = (!empty($parsed_url['path'])) ? $parsed_url['path'] : '';
$query = (!empty($parsed_url['query'])) ? '?' . $parsed_url['query'] : '';
$fragment = (!empty($parsed_url['fragment'])) ? '#' . $parsed_url['fragment'] : '';
return $host . $port . $path . $query . $fragment;

}

return FALSE;
} 
```

这个函数会变成这样的 url

[http://www.google.com/url?sa=X&q=http://www.beautyjunkiesunite.com/WP/2012/05/30/whats-new-anastasia-beverly-hills-lash-genius/&ct= ga&cad=CAcQARgAIAEoATAAOABA3t-Y_gRIAlgBYgVlbi1VUw&cd=F7w9TwL-6ao&usg=AFQjCNG2rbJCENvRR2_k6pL9RntjP66Rvg](http://www.google.com/url?sa=X&q=http://www.beautyjunkiesunite.com/WP/2012/05/30/whats-new-anastasia-beverly-hills-lash-genius/&ct=ga&cad=CAcQARgAIAEoATAAOABA3t-Y_gRIAlgBYgVlbi1VUw&cd=F7w9TwL-6ao&usg=AFQjCNG2rbJCENvRR2_k6pL9RntjP66Rvg)

进入这个

[http://www.google.com/url](http://www.google.com/url)

有没有办法让这个数组返回整个 url 而不仅仅是它的一部分？

我查看了 parse_url php 页面，它帮助并搜索了 stackoverflow 并发现了一些事情，我只是在掌握下一步时遇到了一些麻烦。

让我知道我是否可以以任何方式澄清

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:35:34.483

```
return $url; 
```

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:36:25.570

这就是我使用的（摆脱 parse_url 等）：

```
function get_full_url() {
    // check SSL
    $ssl = "";
    if ((isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"]=="on") || (isset($_SERVER["SERVER_PORT"]) && $_SERVER["SERVER_PORT"]=="443")) 
      { $ssl = "s"; }
    $serverport = ($_SERVER["SERVER_PORT"]!="80"?":".$_SERVER["SERVER_PORT"]:"");
    return "http".$ssl."://".$_SERVER["SERVER_NAME"].$serverport.$_SERVER["REQUEST_URI"];
} 
```

只需调用**get_full_url();** 从脚本中的任何位置。

# jquery - 依赖字段更改值后，jQuery Validate 无法删除错误

> ID：10838362
> 
> 赞同：0
> 
> 时间：2012-05-31T17:27:42.840
> 
> 标签：jquery, jquery-validate

我有一个表单，其中文本字段的要求取决于单选字段的值。当检查正确的无线电选项时，该验证第一次可以正常工作。但是，如果我们更改收音机的值，即使检查了收音机的有效选项，文本字段上的错误消息也会保留。任何想法，我如何在错误有效时消除错误？

这是我的验证码：

```
$().ready(function() {
    $("#myform").validate({
        rules: {
            ff_24: "required",
            ff_25: "required",
            ff_26: {
                required: {
                    depends: function(element) {
                        return ($('input[name="ff_25"]:checked').val() == 'Yes');
                    }
                }
            },
            ff_28: "required",
            ff_30: "required"
        },
        messages: {
            ff_24: "This field is required",
            ff_25: "This field is required",
            ff_26: "This field is required",
            ff_28: "This field is required",
            ff_30: "This field is required"
        },

        errorPlacement: function(error, element) {
            var container = $('<div />');
            container.addClass('tooltip'); // add a class to the wrapper
            if (element.attr('type') === 'radio') {
                error.appendTo(element.parent());
            }
            else if (element.attr('type') === 'checkbox') {
                error.insertAfter(element.next());
            }
            else {                    
                error.insertAfter(element);
            }
            error.wrap(container);
            $("<div class='errorImage'></div>").insertAfter(error);
        },
        success: function(element) {
            $(element).addClass("checked");
            return false;
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:36:44.733

我相当肯定`depends`它有点被弃用，即使文档没有提到它。
你应该改变它：

```
required: function(element) {
    return ($('input[name="ff_25"]:checked').val() == 'Yes');
} 
```

另外，您应该尝试添加`onclick: true, onfocusout: true`

> onfocusout：在模糊时验证元素（复选框/单选按钮除外）。
> onclick：在单击时验证复选框和单选按钮。

[http://docs.jquery.com/Plugins/Validation/validate#options](http://docs.jquery.com/Plugins/Validation/validate#options)（不幸的是不能直接链接，点击选项并向下滚动）

# java - POST 到 HTTPS 服务

> ID：10838363
> 
> 赞同：1
> 
> 时间：2012-05-31T17:27:45.543
> 
> 标签：java, post, https

我需要知道如何`POST`使用`HTTPS`网络服务。我浏览了[教程](http://www.java-samples.com/java/POST-toHTTPS-url-free-java-sample-program.htm)，但它没有帮助，因为它太旧了。

任何人都可以通过给我一个很好的教程或一些示例代码来帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:43:07.237

试试 apache [HttpClient](http://hc.apache.org/)库。它支持[https](http://hc.apache.org/httpclient-3.x/sslguide.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:49:52.313

像这样的东西：

```
URL url = new URL("https://..."); 
HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();
connection.setDoInput(true); 
connection.setDoOutput(true);
connection.setRequestMethod("POST");

//write the request body
OutputStream requestBody = connection.getOutputStream();
...
requestBody.flush();

//send the request and get the response body
InputStream responseBody = connection.getInputStream();
... 
```

# css - 将样式与 dom 操作分开的策略

> ID：10838364
> 
> 赞同：4
> 
> 时间：2012-05-31T17:27:46.087
> 
> 标签：css, jquery, dom-manipulation

我正在寻找将用于浏览器样式的类与用于 dom 操作的类分离的最佳实践的建议或指针。

更具体地说，我们正在创建一个单页的backbone.js webapp，它广泛利用jQuery 来动态更新页面元素（添加、隐藏和附加新内容到页面）。我们遇到的问题似乎源于类属性的重载——它用于样式表示，并用于通过 jQuery 识别 GUI 应用程序逻辑的页面元素。这在修改样式时会导致问题，因为没有明显的方法可以知道底层 javascript 应用程序是否需要给定的类（或 DOM 元素）。

换句话说，如果有人天真地更改或删除标签上的类，假设他们只是修改表示，它会破坏应用程序。我正在寻找一种方法来分离这些问题 - 将用于 jQuery 选择器的类与用于 CSS 样式的类分开。我假设这是一个“已解决的问题”，因为我们显然不是第一个编写 javascript 繁重的 web 应用程序的人。有没有标准的方法来处理这个？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:55:22.783

这样做的好方法可能根本不使用 css 类名来绑定 JavaScript 逻辑。HTML5 引入了一种为标签添加自定义用户定义属性的方法。为此，您只需将属性添加到标签，但以“data-”前缀开始它的名称。例如：

```
<a href="#" data-role="link-to-author" data-value="John Doe">John Doe</a> 
```

jQuery 从 1.4.3 开始，具有使用 .data() 函数处理此类属性的内置方法。您可以在此处详细了解它：http: [//api.jquery.com/data/#data-html5](http://api.jquery.com/data/#data-html5)

如果您的应用程序出于某种原因需要使用类名作为指针，那么您可以进行以下约定：

以“js-”前缀开头的类名仅用于标识html元素，不能用于样式。所以这样你的元素将在每个元素上有多个类（一些用于样式，一些用于逻辑）：

```
<a href="#" class="author js-link-to-author">John Doe</a> 
```

这样就可以毫无顾虑地删除没有前缀的类，而且你可以很确定如果你删除带前缀的类，你会破坏一些东西。

# c++ - ICU 的 BreakIterator 的文档不正确？

> ID：10838367
> 
> 赞同：1
> 
> 时间：2012-05-31T17:27:58.767
> 
> 标签：c++, icu

我已经使用 ICU 中断迭代器进行了裁剪。在[示例](http://userguide.icu-project.org/boundaryanalysis)中，他们建议使用以下代码遍历所有边界：

```
void listWordBoundaries(const UnicodeString& s) {
    UErrorCode status = U_ZERO_ERROR;
    BreakIterator* bi = BreakIterator::createWordInstance(Locale::getUS(), status);

    bi->setText(s);
    int32_t p = bi->first();
    while (p != BreakIterator::DONE) {
        printf("Boundary at position %d\n", p);
        p = bi->next();
    }
    delete bi;
} 
```

这似乎表明`next()`实际上改变了迭代器。但是，[文档](http://icu-project.org/apiref/icu4c/classBreakIterator.html#a68f3b6be789195b55204a6d86d58a8ad)似乎表明它的唯一作用是返回一个值。这只是不良文档的一个例子吗？特别是，如果`next()`确实发生了变异，我想知道是否`last()`也在发生变异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:21:21.253

请注意，这`current()`是 const 而`next()`不是`last()`。是`next()`的，推进迭代器并将`last()`其设置到结束位置。我已经提交了[http://bugs.icu-project.org/trac/ticket/9360](http://bugs.icu-project.org/trac/ticket/9360)来修复文档，谢谢。

# objective-c - Objective-C：NSString 没有完全从 UTF-8 解码

> ID：10838372
> 
> 赞同：2
> 
> 时间：2012-05-31T17:28:05.723
> 
> 标签：objective-c, ios, nsstring

我正在查询一个将 JSON 字符串返回为`NSData`. 该字符串是 UTF-8 格式，所以它被转换成`NSString`这样的。

```
NSString *receivedString = [[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding]; 
```

但是，一些 UTF-8 转义仍保留在输出的 JSON 字符串中，这会导致我的应用程序行为异常。诸如此类的东西`\u2019`保留在字符串中。我已经尝试了一切来删除它们并用它们的实际字符替换它们。

我唯一能想到的就是手动用它们的字符替换 UTF-8 转义的出现，但如果有更快的方法，这是很多工作！

这是一个错误解析的字符串的示例：

```
{"title":"The Concept, Framed, The Enquiry, Delilah\u2019s Number 10  ","url":"http://livebrum.co.uk/2012/05/31/the-concept-framed-the-enquiry-delilah\u2019s-number-10","date_range":"31 May 2012","description":"","venue":{"title":"O2 Academy 3 ","url":"http://livebrum.co.uk/venues/o2-academy-3"} 
```

如您所见，URL 尚未完全转换。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T17:39:10.987

该`\u2019`语法不是 UTF-8 编码的一部分，它是一段 JSON 特定的语法。`NSString`解析 UTF-8，而不是 JSON，所以不明白。

您应该使用`NSJSONSerialization`解析 JSON，然后从其输出中提取所需的字符串。

因此，例如：

```
NSError *error = nil;
id rootObject = [NSJSONSerialization
                      JSONObjectWithData:receivedData
                      options:0
                      error:&error];

if(error)
{
    // error path here
}

// really you'd validate this properly, but this is just
// an example so I'm going to assume:
//
//    (1) the root object is a dictionary;
//    (2) it has a string in it named 'url'
//
// (technically this code will work not matter what the type
// of the url object as written, but if you carry forward assuming
// a string then you could be in trouble)

NSDictionary *rootDictionary = rootObject;
NSString *url = [rootDictionary objectForKey:@"url"];

NSLog(@"URL was: %@", url); 
```

# linux - 当前在 Linux 中运行的应用程序

> ID：10838373
> 
> 赞同：2
> 
> 时间：2012-05-31T17:28:06.687
> 
> 标签：linux, multiprocessing, netbeans-7, opensuse, suse

我正在做一个类似于我们在 Linux 中称为系统监视器的项目。我正在使用opensuse 11.4 gnome。我想知道是否有任何命令（除了 ps）列出了系统上所有当前正在运行的应用程序。我正在为多核环境开发它。

例如，我正在使用 Firefox 浏览网页并同时说 Google Chrome，另外我正在编辑文本文件中的文本。在这种情况下，当我打开我的项目时，我想要当前运行的所有应用程序的列表[在我的场景中，名称 gEdit、Google Chrome 和 Firefox（但不是这三个应用程序生成的进程）必须显示为列表]

我想要的输出与我们在 Windows 中使用任务管理器时在“应用程序”选项卡中得到的输出相同。

如果有人有解决方案，请告诉我，我们将不胜感激。我正在使用 netbeans 来实现该项目。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:01:31.703

我认为没有一种简单的方法可以完成这项工作。在 Linux 中，应用程序可能会在启动时创建多个进程 - 例如让我们使用后缀：

```
localhost:~ # ps -ef|grep 后缀
 根 3708 1 0 Apr24 ？00:00:35 /usr/lib/postfix/master
 后缀 3748 3708 0 Apr24 ？00:00:01 qmgr -l -t fifo -u
 后缀 3749 3708 0 Apr24 ？00:00:00 拾取 -l -t fifo -u -c
 后缀 13504 3708 0 16:05 ? 00:00:00 清理 -z -t unix -u -c
 后缀 15458 3708 0 17:45 ? 00:00:00 清理 -z -t unix -u -c
 后缀 19907 3708 0 19:25 ? 00:00:00 清理 -z -t unix -u -c

```

进程“master”、“qmgr”、“pickup”和“cleanup”都属于应用程序后缀。通过查看第三列，您可以看到这些进程每个都属于一个父进程“主”，该列告诉您启动该进程的父进程。在我的示例中，所有进程都由 id 3708 的进程启动。另一个示例是 Apache Webserver，它在启动时创建多个 httpd 进程 - 这里进程名称都是相同的，只是计数因配置而异。

回到您想解决的问题：从我的角度来看，您可以尝试两种方法：

1.  建立一个数据库，其中包含进程名称与应用程序的关联，并使用它来使用 ps 创建您的应用程序列表。
2.  您将应用程序限制为仅列出显示图形用户界面的应用程序。这个列表应该很容易通过使用一些 X11 函数或类似的东西来构建......

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:47:11.627

你试过*pstree*了吗？好吧，这向您显示了系统上正在运行的进程的树。

*htop*是我通常用于多核环境的，因为它显示资源利用率，您可以通过添加列来查看进程的固定位置。htop 比 top 更加用户友好并且有更多的选择。当您运行它时，只需点击“ *t* ”，它就会按其父进程对进程进行排序。

我不知道任何其他工具，但您的另一个选择是通过*/proc*并编写您自己的脚本来提取您需要的信息。

我希望它有所帮助。

编辑：我忘了提到进程在linux中被分叉，所以有一个父进程启动了几个其他进程/线程。从您的问题来看，您似乎正在尝试为每个正在运行的进程查找父进程，我的回答是基于该假设。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:30:19.760

查看顶部（linux 命令）

这篇文章会对你有很大帮助。 [http://www.cyberciti.biz/tips/top-linux-monitoring-tools.html](http://www.cyberciti.biz/tips/top-linux-monitoring-tools.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:08:27.677

您可能想从`xlsclients`.

它可能没有您需要的所有功能，但是 Linux 没有明确定义的应用程序概念。

您可能会发现有用的下一件事是`xprop`（查找`_NET_WM_PID`），但这并不保证适用于所有程序。

# php - php日期函数发生了什么

> ID：10838378
> 
> 赞同：0
> 
> 时间：2012-05-31T17:28:41.657
> 
> 标签：php, date

> **可能重复：**
> [PHP date() 和 strtotime() 在 31 日返回错误月份](https://stackoverflow.com/questions/9058523/php-date-and-strtotime-return-wrong-months-on-31st)

我有这段代码，它输出一些我认为奇怪的东西。所以，我在这里做错了什么。

```
<?php 
$sP1 = date('m Y');
$sP2 = date('m Y', strtotime('+01 month'));
$sP3 = date('m Y', strtotime('+02 month'));
$sP4 = date('m Y', strtotime('+03 month'));
echo $sP1.'<br>';
echo $sP2.'<br>';
echo $sP3.'<br>';
echo $sP4.'<br>';
?> 
```

这输出

```
05 2012
07 2012
07 2012
08 2012 
```

我认为第二个应该是

```
06 2012 
```

有人知道任何解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:30:24.603

今天是第 31 号，下个月只有 30 天，所以从今天起 1 个月后是 7/12

```
assuming that today is May 31 2012

date('m Y') == 05 2012
date('m Y', strtotime('+1 month')) == 07 2012 because june has 30 days
date('m Y', strtotime('+2 month')) == 07 2012
date('m Y', strtotime('+3 month')) == 08 2012
date('m Y', strtotime('+4 month')) == 10 2012 
```

我会取今天的日期并找到该月的第一天，然后添加一个月，如果您正在做一些需要每个月完成的事情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T17:47:01.323

正如其他人所说，这是因为今天是第 31 个月，+1 个月等于 June-31，它变为 Jul-1。如果您在日期字符串中包含日期，您可以准确地看到这一点。

```
<?php 
$sP1 = date('m-d-Y');
$sP2 = date('m-d-Y', strtotime('+01 month'));
$sP3 = date('m-d-Y', strtotime('+02 month'));
$sP4 = date('m-d-Y', strtotime('+03 month'));
echo $sP1."\n";
echo $sP2."\n";
echo $sP3."\n";
echo $sP4."\n";
/* Outputs:
    05-31-2012
    07-01-2012
    07-31-2012
    08-31-2012
*/
?> 
```

strtotime 虽然可以将开始日期作为字符串的一部分，但正如 King 建议的那样，从第一个开始计算 +N 个月。所以像`May-1-2012 +01 month`这样的字符串：

```
<?php
$sP1 = date('m Y');
$sP2 = date('m Y', strtotime(date('M-1-Y').' +01 month'));
$sP3 = date('m Y', strtotime(date('M-1-Y').' +02 month'));
$sP4 = date('m Y', strtotime(date('M-1-Y').' +03 month'));
echo $sP1."\n";
echo $sP2."\n";
echo $sP3."\n";
echo $sP4."\n";
/* Outputs:
    05 2012
    06 2012
    07 2012
    08 2012
*/
?> 
```

[http://codepad.org/auYLHvDI](http://codepad.org/auYLHvDI)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:33:15.970

它按预期工作。简而言之，因为从 5 月 31 日开始的“一个月”是什么？6月30日？8 月 1 日？

我的建议是，如果您需要连续月份，请计算从当月开始的偏移量，而不是当天。或者使用分解的月、日和年部分手动组成您要查找的日期。

# asp.net - 部署后密码丢失

> ID：10838379
> 
> 赞同：-1
> 
> 时间：2012-05-31T17:28:47.503
> 
> 标签：asp.net, asp.net-mvc, deployment, web, passwords

我管理一个有多个用户的 ASP.NET MVC 3 网站。每个用户都有一个密码，当他们登录网站时，他们的浏览器会保存这个密码。在过去的几个月里，我对该网站进行了多次部署以纠正错误或实施新功能，所有这些都没有任何问题。

话虽如此，本周，当我像往常一样部署该站点时，所有用户都丢失了他们在浏览器中保存的密码。登录名仍保存在内存中，但密码已丢失。几个月来，与登录系统有关的任何事情都没有发生任何变化，这是密码第一次丢失。

我试图寻找一种可以解释这个问题的可能性，但无济于事。你知道什么可以解释这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:39:13.820

在这种情况下，我怀疑是 cookie；要么它们过期（在一段时间后），它恰好与您的部署同时发生。或者在您的部署中，您更改了 cookie 名称/路径等，因此现在浏览器无法验证用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:48:36.610

这里有几个原因：

1.如果密码或用户名文本框名称发生变化，浏览器将解除登录与网站的关联。

razor 中的原始语法：

@Html.PasswordFor(model => **model.Password** )

新密码框：

@Html.PasswordFor(model => **model.MyPassword** )

2.如果视图更改名称或登录发生在新视图中，则浏览器将取消密码与网站的关联

3.您还需要检查浏览器缓存的过期时间。

4.检查浏览器上的安全更新

# .htaccess - 在本地运行站点时，CakePHP htaccess 重定向到实时站点

> ID：10838385
> 
> 赞同：0
> 
> 时间：2012-05-31T17:29:11.070
> 
> 标签：.htaccess, cakephp

我正在使用 CakePHP 的网站上工作。我需要开始向该站点添加一些功能，因此我将所有内容从实时站点拉到我的开发机器（带有 MAMP 服务器的 mac os lion）。当我尝试加载站点 (localhost/example.com/) 时，它会自动将我重定向到实时站点 (www.example.com)。

这是根 htaccess 文件的内容：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{HTTP_HOST}   !^$
    RewriteCond %{HTTP_HOST} !^www\.example\.com$ [NC]
    RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]

    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

当我注释掉**前两个** `RewriteCond`和**第一个** `RewriteRule`时，我的机器抛出一个 500 内部服务器错误，没有 apache/php 日志输出。

如何在不自动重定向到实时站点的情况下在本地运行该网站？

我可以提供任何其他信息吗？

编辑：这是我的 document_root: `/Applications/MAMP/htdocs`。不应该`/Applications/MAMP/htdocs/example.com`吗？编辑：这是`/webroot/.htaccess`文件：

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule img/([0-9]*x[0-9]*)/(.*)/(.*)$ files/image/$2/$1/$3 [QSA,L]
    RewriteRule (js|css)/vendors/(.*)$ vendors.php?type=$1&file=$2 [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f

    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule>

AddType application/x-javascript .js
AddType text/css .css

<IfModule mod_deflate.c>
  # compress content with type html, text, and css
  AddOutputFilterByType DEFLATE text/css text/javascript application/javascript application/x-javascript text/js

  SetOutputFilter DEFLATE
  BrowserMatch ^Mozilla/4 gzip-only-text/html
  BrowserMatch ^Mozilla/4\.0[678] no-gzip
  BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html

  # Don't compress images/flash 
  SetEnvIfNoCase Request_URI \
  \.(?:swf|flv)$ no-gzip dont-vary

  # Don't compress images
  # SetEnvIfNoCase          Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
  # SetEnvIfNoCase          Request_URI \/image\.php no-gzip dont-vary

  # Also don't compress PDF and Flash-files 17-01-2004 MM
  SetEnvIfNoCase          Request_URI \.pdf$ no-gzip dont-vary

  <IfModule mod_headers.c>
    # properly handle requests coming from behind proxies
    Header append Vary User-Agent
  </IfModule>
</IfModule>

<IfModule mod_expires.c> 
  ExpiresActive On
  ExpiresByType text/css "access plus 10 years"
  ExpiresByType text/js "access plus 10 years"
  ExpiresByType text/javascript "access plus 10 years"
  ExpiresByType application/x-javascript "access plus 10 years"
  ExpiresByType application/javascript "access plus 10 years"
  ExpiresByType image/png "access plus 10 years"
  ExpiresByType image/gif "access plus 10 years"
  ExpiresByType image/jpeg "access plus 10 years"
  ExpiresByType video/x-flv "access plus 10 years"
</IfModule>

FileETag none
<IfModule mod_headers.c>
# 1 YEAR
<FilesMatch "\.(ico|pdf|flv)$">
Header set Cache-Control "max-age=29030400, public"
</FilesMatch>
# 1 WEEK
<FilesMatch "\.(jpg|jpeg|png|gif|swf)$">
Header set Cache-Control "max-age=604800, public"
</FilesMatch>
# 2 DAYS
<FilesMatch "\.(xml|txt|css|js)$">
Header set Cache-Control "max-age=172800, proxy-revalidate"
</FilesMatch>
# 1 MIN
<FilesMatch "\.(html|htm|php)$">
Header set Cache-Control "max-age=60, private, proxy-revalidate"
</FilesMatch>
</IfModule> 
```

编辑：我已经为 apache 启用了调试日志级别，所以我可以看到更多的日志消息。这是访问项目根目录时出现错误 500 时的日志详细信息：

`[Fri Jun 01 11:00:35 2012] [debug] mod_deflate.c(615): [client ::1] Zlib: Compressed 0 to 2 : URL /example.com/webroot/index.php`

`[Fri Jun 01 11:00:35 2012] [debug] mod_headers.c(756): headers: ap_headers_output_filter()`

在访问错误 500 的站点后，我还包含了 access_log 数据：

`127.0.0.1 - - [01/Jun/2012:11:03:02 -0400] "GET /example.com/ HTTP/1.1" 500 20 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.53 Safari/536.5"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:44:43.333

用以下代码替换现有的 .htaccess 代码：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /example.com/

    RewriteRule (?!^webroot/)^(.*)$ webroot/$1 [L]
</IfModule> 
```

# mysql - 根据第二个表 id 从第三个表字段返回值

> ID：10838386
> 
> 赞同：0
> 
> 时间：2012-05-31T17:29:13.410
> 
> 标签：mysql, join

我有这张桌子

`ADDS`(1)

```
+----+--------------+--------------+
| id | name of add  | Date         |
+----+--------------+--------------+
|  1 | Add01        | March 01     |
|  2 | Add02        | March 02     |
|  3 | Add03        | March 03     |
|  4 | Add04        | March 04     |
+----+--------------+--------------+ 
```

`TYPE OF ADDS`(2)

```
+----+----------+
| id | Add id   |
+----+----------+
| 21 | 1        |  NOTE: Add id of table (2) = id of table (1)
| 22 | 2        |
| 23 | 3        |
| 24 | 4        |
+----+----------+ 
```

`NAMES OF TYPES`(3)

```
+----+-----------+--------------+
| id | Type id   | Name         |
+----+-----------+--------------+
| 31 | 21        | Text add     |
| 32 | 22        | Banner       | NOTE: Type id of table (3) = id of table (2)
| 33 | 23        | Video add    |
| 34 | 24        | Other        |
+----+-----------+--------------+ 
```

我需要这样的报告：

```
+--------+-----------+--------------+
| Add id | Add name  | Type of add  |
+--------+-----------+--------------+
|  1     | Add01     | Text add     |
|  2     | Add02     | Banner       |
|  3     | Add03     | Video add    |
|  4     | Add04     | Other        |
+--------+-----------+--------------+ 
```

（`Add id`来自表（1），`Add name`来自表（1），`Type of add`来自表（3））

到目前为止，我可以做一个`SELECT query LEFT JOIN table 1 and 2`，但我不知道如何`Name of type`从表 3 返回值。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:34:10.323

再次加入表 3：

```
SELECT t1.`id`          AS `Add id`,
       t1.`name of add` AS `Add name`,
       t3.`Name`        AS `Type of add`
FROM   `ADDS` AS t1
  LEFT JOIN `TYPE OF ADDS`   AS t2 ON t2.`Add id`  = t1.`id`
  LEFT JOIN `NAMES OF TYPES` AS t3 ON t3.`Type id` = t2.`id` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:35:09.893

```
SELECT  ad.id, ad.name,t.name
FROM ADDS ad
LEFT JOIN TYPEADDS ta ON ta.add_id = ad.id
LEFT JOIN TYPES t ON t.id = ta.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:35:13.157

```
SELECT `table1`.`id` AS `Add id`, `table1`.`name_of_add` AS `Add name`, `table3`.`Name` AS `Type of add`
FROM `table1`, `table2`, `table3`
WHERE `table1`.`id` = `table2`.`add_id` AND `table2`.`id` = `table3`.`Type_id` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T17:54:58.337

试试这个查询：

```
select ADDS.nameofadds,TYPEOFADDS.ADDid,NAMEOFTYPES.Name
    FROM ADDS 
    JOIN TYPEOFADDS 
         ON  ADDS.id=TYPEOFADDS.ADDid
    JOIN NAMEOFTYPES 
         ON  TYPEOFADDS.id=NAMEOFTYPES.TYPEid 
```

# php - 使用 android 多次命中 accesslog apache（修改了 http 标头）

> ID：10838388
> 
> 赞同：1
> 
> 时间：2012-05-31T17:29:18.733
> 
> 标签：php, android, apache, download, access-log

我有一个 PHP 脚本，可让您下载媒体文件。当我通过使用 Android 操作系统的 URL 访问来运行此脚本时，我可以在 apachelog 中看到 2 个命中：

```
192.168.xxx.xx - - [31/May/2012:15:30:57 +0100] "GET /myScript.php?myParams=myValues HTTP/1.1" 200 409632 "http://myReferer" "Mozilla/5.0 (Linux; U; Android 2.1-update1; fr-fr; HTC Desire 1.19.161.5 Build/ERE27) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17"
192.168.xxx.xx - - [31/May/2012:15:30:57 +0100] "GET /myScript.php?myParams=myValues HTTP/1.1" 200 409632 "http://myReferer" "Mozilla/5.0 (Linux; U; Android 2.1-update1; fr-fr; HTC Desire 1.19.161.5 Build/ERE27) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17" 
```

仅当我更改 http 标头“Content-Disposition”或“Content-Type”以使下载有效时，它才会出现两次，而且我认为由于两次点击，下载实际上无法在 Android 手机上运行。但这是我真正的问题：如果我不更改这些标题，当然没有下载！但我只能在我的 apache 访问日志上看到一次命中。

我尝试修改其他标头（Pragma：public，Expires：0，Cache-Control：Public，Content-Transfer-Encoding：binary，Content-Length 等）并且只再次点击一次。它只为上面提到的两个标题发送 2 次点击。

更多信息：

```
PHP version 5.2.4
Apache version 2.2
Tested with Android 2.2, 2.3.4, 4.0.x 
```

谢谢，如果你知道为什么并解释我，或者只是告诉我如何让我的下载工作。我从上周开始就在这。当然，我用谷歌搜索了它，只有以前版本的 apache 日志的旧错误，没有像我现在这样的东西。

PHP代码：

```
<?php
    //$path is the absolute path of the file I want to download (dl)
    header("Pragma: public");
    header("Expires: 0");
    header("Cache-Control: public");
    header("Content-Description: File Transfer");
    header("Content-Type: " . getFileMIME($path)); //return "audio/mpeg" since I want to dl *.mp3
    header('Content-Disposition: attachment; filename="' . $filename . '";'); //basename of my file
    header("Content-Transfer-Encoding: binary");
    header('Content-Length: ' . filesize($path));
    readfile($path);
?> 
```

编辑：我找到原因：Android 像 Netscape 几年前所做的那样发送预取...

```
While pre-fetching of content is a great feature for most consumers, it does have its share of disadvantages. 
If you have a tight data cap, the last thing you want is your browser to waste your bandwidth by loading pages you might not even want to visit. 
It will also create headaches for webmasters by registering fake hits that will increase bandwidth and server resource consumption, besides messing up analytics. 
Netscape had earlier experimented with pre-fetching, but it allowed the webmasters to be in control.

Source : http://techie-buzz.com/browsers/chrome-17-changes-review.html 
```

不知道如何绕过那个愚蠢的功能

# javascript - javascript多边形交集

> ID：10838389
> 
> 赞同：3
> 
> 时间：2012-05-31T17:29:21.990
> 
> 标签：javascript, polygon, intersection

我使用了以下代码： [http](http://www.amphibian.com/blogstuff/collision.html) ://www.amphibian.com/blogstuff/collision.html 。在 html 测试文件中，我将第一个三角形更改为

```
triangle1.addPoint({"x":-20, "y":-20});
triangle1.addPoint({"x":-20, "y":20});
triangle1.addPoint({"x":20, "y":20});
triangle1.addPoint({"x":20, "y":10});
triangle1.addPoint({"x":10, "y":10});
triangle1.addPoint({"x":10, "y":-20}); 
```

现在，当我在交叉之前将另一个三角形移动到这个形状内时，它会给我错误的交叉点。知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T18:03:19.677

好吧，我为其他想玩这个的人设置了一个[小提琴。](http://jsfiddle.net/MattiasBuelens/9FAGJ/)结果如下：

![问题交叉口的演示](../Images/4f90430e0ae285128582e2b32cd23884.png)

该脚本使用分离轴定理或（如维基百科所说）[超平面分离定理](http://en.wikipedia.org/wiki/Hyperplane_separation_theorem)，如以下来源中所述`polygon.js`：

```
/*
 *  To detect intersection with another Polygon object, this
 *  function uses the Separating Axis Theorem. It returns false
 *  if there is no intersection, or an object if there is. The object
 *  contains 2 fields, overlap and axis. Moving the polygon by overlap
 *  on axis will get the polygons out of intersection.
 */
Polygon.prototype.intersectsWith = function(other) { 
```

**该定理仅适用于凸多边形。**你的形状不是凸的，因为它有一个“凹痕”。这就是脚本错误地报告形状相交的原因。如果您需要使其适用于凹形，则必须首先将凹形拆分为单独的凸形部分，然后将该定理应用于所有单独的部分。显然，这使脚本更加复杂，因为您需要遍历两个形状的凹面部分的叉积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T14:07:37.120

这是我找到两个多边形的交叉多边形的不太复杂的实现。

它适用于凸多边形和凹多边形，但不适用于复杂（自相交）多边形。[算法与Margalit & Knott](http://gvu.gatech.edu/people/official/jarek/graphics/papers/04PolygonBooleansMargalit.pdf)中提出的算法非常相似。

它的复杂度约为 4*n1*n2，其中 n1 和 n2 是多边形中正在计算其交点的顶点数。

它是一个独立的 .js 文件。“多边形”被视为任何 2D 点的 javascript 数组。“点”是具有 x 和 y 数字属性的任何 javascript 对象。

在现有功能之上实现联合功能应该不是问题，我可能很快就会这样做。

[二维多边形的交集](http://freshplayer.blogspot.com/2014/04/intersection-of-two-2d-polygons-in.html)

# sql-server-2008 - SSIS：将错误行重定向到文件。文件包含额外的意外回车

> ID：10838393
> 
> 赞同：0
> 
> 时间：2012-05-31T17:29:31.190
> 
> 标签：sql-server-2008, ssis

我想将无法加载到表中的行重定向到错误文件。

![在此处输入图像描述](../Images/fcabaf31f05f1763cec5a0c73761e6d9.png)

我看到红色异常路径有 3 个输入列进来，“平面文件源错误输出列”包含文件中的原始数据。

![在此处输入图像描述](../Images/c913c859c42b6df515bfbdcee5988b68.png)

问题是当我打开文件时，每行后面都有一个额外的回车换行字符。我希望能够手动修复错误并重新处理它们，而不必删除所有添加的 CRLF 字符。所以我添加了一个脚本组件来删除正在添加的字符。

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{

    string buffer = GetString(Row.FlatFileSourceErrorOutputColumn.GetBlobData(0, (int)(Row.FlatFileSourceErrorOutputColumn.Length)));
    System.Windows.Forms.MessageBox.Show(buffer);       
    byte[] ThisBytes = GetBytes("Test");
    Row.FlatFileSourceErrorOutputColumn.ResetBlobData();
    Row.FlatFileSourceErrorOutputColumn.AddBlobData(ThisBytes);
    }

static string GetString(byte[] bytes)
{
    char[] chars = new char[bytes.Length / sizeof(char)];
    System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
    return new string(chars);
}
static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

但是我的调试消息框显示了不可显示的字符，这些字符显示为块。

![在此处输入图像描述](../Images/1115990f97ee3bf0ed44bb31d5107df9.png)

当我尝试将文字“TEST”强制输出文件作为测试以查看我是否可以控制文件中的内容时，每个字母后都会出现 NULL（ASCII 0）字符。

![在此处输入图像描述](../Images/dd240728e7d0efc798dbf7406972527c.png)

当我只是使用脚本块组件将输出列重定向到文件时，为什么 SSIS 添加 CRLF 以尝试修改写入的数据？我怎样才能摆脱 CRLF？为什么我无法读取数据列中的字节数组并将其显示为字符串？为什么“TEST”文字在每个字母之间都有 NULLS？我的 ByteArray 转换函数不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:40:34.717

知道了。

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    string buffer = GetString(Row.FlatFileSourceErrorOutputColumn.GetBlobData(0, (int)(Row.FlatFileSourceErrorOutputColumn.Length - 2)));
    System.Windows.Forms.MessageBox.Show(buffer);
    byte[] ThisBytes = GetBytes(buffer);
    Row.FlatFileSourceErrorOutputColumn.ResetBlobData();
    Row.FlatFileSourceErrorOutputColumn.AddBlobData(ThisBytes);
    }

static string GetString(byte[] bytes)
{
    System.Text.Encoding enc = System.Text.Encoding.ASCII;
    return enc.GetString(bytes);

}
static byte[] GetBytes(string str)
{
    System.Text.Encoding enc = System.Text.Encoding.ASCII;
    return enc.GetBytes(str);
} 
```

我仍然想知道为什么 SSIS 会添加 CRLF！

# c - 类型转换时指针的行为

> ID：10838394
> 
> 赞同：2
> 
> 时间：2012-05-31T17:29:34.210
> 
> 标签：c, string

> **可能重复：**
> [为什么这两个指针减法会给出不同的结果？](https://stackoverflow.com/questions/9185171/why-do-these-two-pointer-subtractions-give-different-results)

```
char arr[] = "stackoverflow";
char *p1 = arr;
char *p2 = arr + 3;
printf("%d",  (int*)p2 - (int*)p1); 
```

它的答案是 0 ..你能解释一下为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T17:34:34.853

因为`p2 - p1`是`< sizeof (int)`。因此`(int *) p2 - (int *) p1 == 0`，`int`两个指针之间的元素数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T17:31:08.950

因为您正在调用实现定义/未定义的行为。An`int`在您的平台上的大小可能为 4，因此这些指针中至少有一个未正确对齐。

在实践中，这可能是因为编译器正在做一些类似`(p2 / 4) - (p1 / 4)`的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:35:27.650

我想你可能打算做的是：

```
printf("%d",  (int)(p2 - p1)); 
```

但这甚至不需要转换，因为两个指针之间的差异返回一个有符号整数类型 ( `ptrdiff_t`)，因此您可以省略类型转换并更改`"%d"`为`"%td"`.

# regex - 负前瞻的正则表达式

> ID：10838398
> 
> 赞同：0
> 
> 时间：2012-05-31T17:29:51.543
> 
> 标签：regex

我正在尝试构建一个正则表达式以从内容中删除链接，除非它包含 2 个条件中的 1 个。

```
<a.*?href=[""'](http[s]?:\/\/(.*?)\.link\.com)?\/(?!m\/).*?<\/a> 
```

这将匹配到在域部分末尾没有 m/ 的任何指向 link.com 的链接。我想稍微改变一下，所以它不匹配链接到 pdf 文件的 URL，不管 url 中有 m/，我想出了：

```
<a.*?href=["'](http[s]?:\/\/(.*?)\.brodies\.com)?\/(?!m\/).*?\.(?!pdf)["'].*?<\/a> 
```

哦，非常接近，除了现在它只有在 URL 有一个“。”时才会匹配。最后 - 我可以看到它为什么这样做。我似乎无法使“。” 可选，因为这会导致“。”之前的非贪婪模式。继续前进，直到它击中 ["']

任何帮助都会很好地帮助解决这个问题。

谢谢保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:40:20.950

您可能想使用`(?<!\.pdf)["']`而不是`\.(?!pdf)["']`.

但请注意，此表达式有几个问题，解决它们的最佳方法是使用适当的 HTML 解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:54:38.443

首先，[RegEx 匹配除了 XHTML 自包含标签之外的开放标签](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

就是说，（因为它可能不会阻止）这是您尝试做的稍微更好的约束版本，但需要注意的是*这仍然不够好！*

```
<a[^>]+?href\s*=\s*["'](https?:\/\/[^"']*?\.link\.com)?\/(?!m\/)[^"']*?\.(?!pdf)[^"']*?["'][^>]*?>.*?<\/a> 
```

您可以在以下网址查看此正则表达式的运行示例：[http](http://rubular.com/r/obkKrKpB8B) ://rubular.com/r/obkKrKpB8B 。

您的问题实际上只是您在点之后立即寻找引号字符，这里：`.(?!pdf)["']`。

# java - 通过 WebLogic 连接数据库

> ID：10838403
> 
> 赞同：5
> 
> 时间：2012-05-31T17:30:19.137
> 
> 标签：java, mysql, weblogic, weblogic12c

所以我有一个 MySQL 数据库，并且我在连接到该数据库的 WebLogic 本地实例上有一个数据源。我正在尝试编写一些简单的连接和查询的客户端代码。我在从数据源获取连接时遇到问题。到目前为止，这是我的代码。我正在运行 WebLogic 12c。

```
 import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Hashtable;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;

public class ConnectionTest {

    public static void main(String... args) {
        ConnectionTest tCon = new ConnectionTest();
        tCon.TestConnection();

    }

    public void TestConnection() {
        Context ctx = null;
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;

        try {
            Hashtable<String, String> props = new Hashtable<String, String>();

            props.put("java.naming.factory.initial",
                    "weblogic.jndi.WLInitialContextFactory");
            props.put("java.naming.provider.url", "t3://localhost:7001");
            props.put("java.naming.security.principal", "weblogic");
            props.put("java.naming.security.credentials", "welcome1");
            ctx = new InitialContext(props);
            DataSource ds = (DataSource) ctx.lookup("RegexDB");
            System.out.println(ds);
            DAO dao = new DAO();
            conn = ds.getConnection();
            stmt = conn.createStatement();
            stmt.execute("select * from regular_ex");
            rs = stmt.getResultSet();
            ArrayList<HashMap<String, Object>> results = dao
                    .resultSetToArrayList(rs);
            dao.printArrayList(results);
            stmt.close();
            conn.close();
        } catch (NamingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                if (stmt != null)
                    stmt.close();
                if (conn != null)
                    conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

    }
} 
```

这失败了`ds.getConnection()`，但有以下例外：

```
java.lang.ClassCastException: weblogic.jdbc.common.internal.ConnectionEnv cannot be cast to java.io.Serializable
    at weblogic.iiop.IIOPOutputStream.writeObject(IIOPOutputStream.java:2285)
    at weblogic.utils.io.ObjectStreamClass.writeFields(ObjectStreamClass.java:414)
    at weblogic.corba.utils.ValueHandlerImpl.writeValueData(ValueHandlerImpl.java:235)
    at weblogic.corba.utils.ValueHandlerImpl.writeValueData(ValueHandlerImpl.java:225)
    at weblogic.corba.utils.ValueHandlerImpl.writeValue(ValueHandlerImpl.java:182)
    at weblogic.iiop.IIOPOutputStream.write_value(IIOPOutputStream.java:1983)
    at weblogic.iiop.IIOPOutputStream.write_value(IIOPOutputStream.java:2021)
    at weblogic.iiop.IIOPOutputStream.writeObject(IIOPOutputStream.java:2285)
    at weblogic.jdbc.common.internal.RmiDataSource_WLSkel.invoke(Unknown Source)
    at weblogic.rmi.internal.BasicServerRef.invoke(BasicServerRef.java:695)
    at weblogic.rmi.cluster.ClusterableServerRef.invoke(ClusterableServerRef.java:230)
    at weblogic.rmi.internal.BasicServerRef$1.run(BasicServerRef.java:520)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:363)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:146)
    at weblogic.rmi.internal.BasicServerRef.handleRequest(BasicServerRef.java:516)
    at weblogic.rmi.internal.wls.WLSExecuteRequest.run(WLSExecuteRequest.java:118)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

我的构建路径中有 wlclient.jar、wlsafclient.jar 和 weblogic.jar。我已经尝试了添加/删除这些罐子的各种组合，但无论我做什么，我仍然会遇到同样的错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T17:42:17.437

在做了一些研究之后，我正在删除我的旧答案并重新开始。

[Oracle Doc for WebLogic Standalone Clients](http://docs.oracle.com/cd/E12839_01/web.1111/e13717/basics.htm#BEIFHGEC)中有一个很大的客户端类型表。对于列出的每种类型的客户端，该表显示了所需的 jar 文件。对于某些类型的客户端，您需要构建一个额外的 jar (wlfullclient.jar) 并包含它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:50:34.780

我也遇到了这个问题，我尝试将“wlfullclient.jar”添加到我的目录中以修复它，但我没有在 weblogic 安装文件夹中找到这个 jar 文件。

但最后我已经使用 setDomainEnv.cmd 从 weblogic 中设置了所有需要的 jar 文件，它工作正常。在这里，我们不必关心是否需要哪些 jar 文件，它会简单地为您的程序所需的所有 jar 文件设置类路径。

我正在使用 Weblogic 11g。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T06:11:04.530

在 Weblogic 12c 中，将 weblogic.jar 文件复制到其他目录。将文件重命名为 weblogic-classes.jar，然后使用 wljarbuilder 构建 jar 文件。

将新创建的 wlfullclient.jar 文件添加到 Eclipse 中的类路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-17T14:23:02.733

构建 wlfullclient.jar 并将这个 jar 添加到构建路径中。它为我解决了这个问题。顺便说一句，与 Weblogic 10.3 中的 weblogic.jar 相比，Weblogic 12 中的 weblogic.jar 缺少一些类

# python - 导入python boost模块

> ID：10838405
> 
> 赞同：0
> 
> 时间：2012-05-31T17:30:22.087
> 
> 标签：python, visual-studio-2010, boost, dll

我在 VS2010 中使用 boost::python 构建了一个 DLL，以将一些函数导出到 python 模块：

我的DLL.cpp：

```
std::string greet() { return "hello, world"; }
int square(int number) { return number * number; }

BOOST_PYTHON_MODULE(getting_started1)
{
    // Add regular functions to the module.
    def("greet", greet);
    def("square", square);
} 
```

到这里为止，一切都编译得很好。然后我在 c:\myDLL\Debug 中获取 myDLL.dll 和 myDLL.lib 文件。

根据 boost doc (http://wiki.python.org/moin/boost.python/SimpleExample)，我需要将它添加到 PYTHONPATH，所以我添加了 c:\myDLL\Debug 到它：PYTHONPATH: C:\Python27 ;c:\myDLL\Debug;

然后，从我的 .py 文件中，我尝试导入它：

```
import getting_started1
print getting_started1.greet()
number = 11
print number, '*', number, '=', getting_started1.square(number) 
```

我还尝试了 from myDLL import getting_started1 和 from getting_started1 import *，以及所有可能的组合。

谁能告诉我我应该如何调用我的模块？谢谢

编辑：根据 cgohlke 的说法，当我在 VS 中编译时，我的 PYTHONPATH 中应该有一个 getting_started1.pyd 吗？这个文件不存在......我必须在VS2010中设置一些不同的东西吗？我有一个默认的 win32 DLL 项目。但是 boost 文档说“如果我们构建这个共享库并将其放在我们的 PYTHONPATH 上”，Windows 上的共享库不是 DLL 吗？因此，DLL 应该在 PYTHONPATH 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:26:18.547

构建 Python 扩展的标准、可移植的方法是通过[distutils](http://docs.python.org/distutils/setupscript.html#describing-extension-modules)。但是，Visual Studio 2010 不是 Python 2.7 支持的编译器。以下 setup.py 对我适用于 Visual Studio 2008 和 boost_1_48_0。构建命令是`python setup.py build_ext --inplace`.

```
# setup.py
from distutils.core import setup
from distutils.extension import Extension
setup(name="getting_started1",
    ext_modules=[
        Extension("getting_started1", ["getting_started1.cpp"],
        include_dirs=['boost_1_48_0'],
        libraries = ['boost_python-vc90-mt-1_48'],
        extra_compile_args=['/EHsc', '/FD', '/DBOOST_ALL_DYN_LINK=1']
        )
    ]) 
```

对于您的 Visual Studio 2010 项目，尝试将链接器输出文件更改为`getting_started1.pyd`而不是`myDLL.dll`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:21:29.197

1.  我设法让它只在发布配置中工作，而不是在调试中。
2.  从项目属性的常规选项卡上，将目标扩展修改为 .pyd
3.  该项目应该确实是一个dll，就像你做的那样
4.  在 Python 脚本中，您需要指定 dll 的位置，如下例所示： import sys sys.path.append("d:\\TheProjectl\\bin\\Release") import getting_started #Dll name without extension

# c# - 如何在测试项目中创建与本地数据库的外部连接？

> ID：10838406
> 
> 赞同：1
> 
> 时间：2012-05-31T17:30:22.100
> 
> 标签：c#, model-view-controller, specflow, dbcontext

我在 Visual Studio 中有两个项目：我的普通项目和我的测试项目。我选择使用 SpecFlow 进行测试，因此我的测试是基于 UI 的。因此 UI 验证不需要数据库连接。

在某些情况下，我必须为系统设置一些先决条件，例如在项目中填充一些示例数据。我试图将我的项目数据库连接到我的测试项目，但它不起作用。我尝试将连接字符串添加到我的测试项目 app.config 中，如下所示：

```
<connectionStrings>
<add name="MyConnectionString"
  connectionString="Data Source=C:\Users\Martijn\Documents\VS11\Projects\Gastouderuren.nl\testprojectl\App_Data\example.sdf"
  providerName="Microsoft.SqlServerCe.Client.4.0" />
</connectionStrings> 
```

当我在代码中使用此连接字符串时，如下所示：

```
 MyContext context = new MyContext(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);

        context.Product.Count(); 
```

当我运行我的测试时，会出现以下错误：

```
The provider did not return a ProviderManifestToken string. -> This operation requires a connection to the 'master' database. Unable to create a connection to the 'master' database because the original database connection has been opened and credentials have been removed from the connection string. Supply an unopened connection. -> A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

我已经搜索过解决方案，但找不到任何东西。我怎么解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-24T12:20:03.093

您**无法像连接普通 SQL 数据库***（连接字符串）*一样 连接到**外部**localdb *（基于文件）*

 *这是因为 localdb 限制（一次不能超过 1 个应用程序连接）

**但我有一个解决方案：（**如何使用 2+ 个应用程序和 1 个 localdb）

*   您必须创建一个 TCP 服务器侦听器（在 LOCALDB 所在的 pc 中）和其他 pc 所在的 X 客户端
*   客户端电脑连接到服务器电脑
*   所以每次你想执行一个 sql 命令时，你将命令从 **CLIENT**发送到**SERVER**并且服务器会执行它！（可以发回响应）

你也可以设置一些预先定义的命令（我做了同样的事情）

```
SERVER :
if(CLIENT DATA . equals("ReadProducts"){
sql.execute("SELECT * FROM Products");
//convert...
SendBack(result);
}

CLIENT 1 >SEND> SERVER : "ReadProducts" (Predefinded command)

SERVER >SEND> CLIENT 1 : "Apple,Melon,Orange"

CLIENT 1 :

 data = SERVER RESPONSE;

 string[] sp=data.split(',');

//add a for loop which add all products to your listview
CLIENT 2 >SEND> SERVER : "INSERT INTO Products(name) VALUES(@name)"

SERVER :
if(CLIENT DATA . contains("INSERT"){
sql.execute(CLIENT DATA);
} 
```

使用算法 abow，您可以处理与单个 LocalDb 文件的许多连接

来自另一台计算机，但您必须处理 IP 问题

如果您开发大型项目，请获取服务器应用程序的静态 IP 地址*

# django - 访问模板化 Django 中的表单字段属性

> ID：10838415
> 
> 赞同：10
> 
> 时间：2012-05-31T17:31:07.437
> 
> 标签：django, django-forms, django-templates

我一直在用 django 做一些自定义表单，但我不知道如何访问特定表单字段通过 forms.py 附加的属性。

```
def putErrorInTitle (cls):
init = cls.__init__

def __init__ (self, *args, **kwargs):
    init(self, *args, **kwargs)
    if self.errors:
        for field_error in self.errors:
            self.fields[field_error].widget.attrs['title'] = self.errors[field_error][0]
            self.fields[field_error].widget.attrs['class'] = "help_text error_field"

cls.__init__ = __init__
return cls 
```

这就是我将属性附加到该领域的方式。

```
<dl class="clearfix two">
 <dd>
  <label for="id_diagnosis">Diagnostico:</label>
   <select class="{{form.id_diagnosis.class}}" id="id_equipment_activity-{{ forloop.counter0 }}-id_diagnosis" name="equipment_activity-{{ forloop.counter0 }}-id_diagnosis">
    {% for x,y in form.fields.id_diagnosis.choices %}
    <option value="{{ x }}" {% ifequal form.id_diagnosis.data|floatformat x|floatformat %}selected="selected"{% endifequal %}>{{ y }}</option>
    {% endfor %}
    <option value="1000" {% ifequal form.id_diagnosis.data|floatformat '1000'|floatformat %}selected="selected"{% endifequal %}>Otro</option>
   </select>
 </dd>
 <dd class="vertical_center" id="optional_diagnosis"><label for="optional_diagnosis">Diagnostico opcional:</label>{{ form.optional_diagnosis }}</dd>
</dl> 
```

我一直在尝试访问它的属性：

```
class="{{form.id_diagnosis.class}}", class="{{form.id_diagnosis.widget.class}}" 
```

而且我似乎没有找到关于什么是可访问的，什么是不可访问的明确文档。真的，我宁愿拥有老式文档而不是 django “友好”的文档

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-23T16:29:41.377

在其他情况下，设置和获取字段属性可能很有用。

在表单的初始化函数中设置：

```
self.fields['some_field'].widget.attrs['readonly'] = True 
```

...并在模板中访问它：

```
{{ form.some_field.field.widget.attrs.readonly }} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-21T16:38:54.177

看起来您只想显示每个字段的表单错误。在视图中清理或验证表单后，字段应包含错误消息。这样您就可以像这样在模板中显示它们：

```
<form action='.' method='post'>
    ...
    <div class='a-field'>
       {{ form.field_1.errors|join:", " }}
       {{ form.field_1.label_tag }}
       {{ form.field_1 }}
    </div>
    ...
</form> 
```

但是，如果您真的想显示表单字段属性，那么您可以尝试以下操作：

```
{{ form.field_1.field.widget.attrs.maxlength }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-04T15:20:10.547

上面的答案是正确的，但是，我想为那些在循环中访问表单字段的人添加一个注释。

如果您在这样的循环中执行此操作

```
{% for field in form %}
    {{ field.field.widget.attrs.placeholder }} # field.field is the key here
{% endfor %} 
```

# delphi - 访问 Delphi 例程局部变量

> ID：10838418
> 
> 赞同：0
> 
> 时间：2012-05-31T17:31:13.217
> 
> 标签：delphi

如何从外部访问例程的局部变量。像这个例如

```
procedure TForm1.CalculateTax(var Amount: Double);
var 
  Tax : Double;
begin
  Tax := Amount*2.5/100;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:12:01.277

您不能从声明它的过程之外访问局部变量。

最好的解决方案是将您的更改`procedure`为 a `function`，并让它返回值。

更改您的`TForm1`声明

```
type
  TForm1 = class(TForm)
  ...
  procedure CalculateTax(var Amount: Double); 
```

至

```
type
  TForm1 = class(TForm)
  ...
  function CalculateTax(const Amount: Double): Double; 
```

将实现从

```
procedure TForm1.CalculateTax(var Amount: Double);
var 
  Tax : Double;
begin
  Tax := Amount*2.5/100;
end; 
```

至

```
function TForm1.CalculateTax(const Amount: Double): Double;
begin
  Result := Amount*2.5/100;
end; 
```

像这样称呼它：

```
Tax := CalculateTax(YourAmount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:23:27.100

我的 0.02 美元：

1）我会把它变成一个“功能”而不是一个“程序”（因为它的目的是“返回一个值” - 税额）

2）我不会在例程中硬编码“金额”或“税率”

3）我不会“超载”（赋予多种含义）变量“数量”

```
// Better
function TForm1.CalculateTax(purchaseAmount, taxRate: Currency) : Currency;
begin
  Result := purchaseAmount * (taxRate / 100.0);
end; 
```

# java - Java 2d 图形性能

> ID：10838423
> 
> 赞同：1
> 
> 时间：2012-05-31T17:32:05.353
> 
> 标签：java, performance, opengl, graphics

如果我用 Java 制作 2D 游戏，使用默认的 Graphics2D 会足够快吗？如果它只是 2D，我会得到好的 FPS 吗？（即使有大量的精灵和其他事情发生）
或者当你做任何类型的游戏编程时，2d 或 3d，你应该选择 opengl/directx 吗？

此外，当您使用 Graphics2D 渲染内容时，是否全部在 CPU 上渲染？还是硬件加速？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:39:44.463

如果必须使用 java（例如 JMonkey），则应使用 opengl/directx 或一些 java 绑定。如果您是游戏编程新手，我建议您使用 XNA 框架，因为它可以简化很多事情。我使用过 XNA，它相当容易使用，并且可以插入不同的库。如果您想要基于浏览器的游戏，javascript + HTML5 Canvas2d 或 webgl 可能是最佳途径。

通过使用直接绑定库而不是 2D 图形 API 类型库，您将始终获得更好的性能。要做的主要事情是确保您知道图像和纹理是如何存储/渲染的，因此您不会让框架做额外的工作。额外的工作将导致低 FPS。

# php - 在 Mac OSX Lion 上使用 PHP 脚本访问 Oracle DB

> ID：10838424
> 
> 赞同：0
> 
> 时间：2012-05-31T17:32:05.783
> 
> 标签：php, macos, oracle

我希望运行一个 PHP 脚本来访问另一台机器上的 Oracle DB 中的数据。PHP 支持用于访问 Oracle DB 的 OCI8。但这似乎不适用于 Mac OS X Lion。有谁知道使用 PHP 脚本访问数据的任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:21:04.947

看起来 oracle 即时客户端 64 位对于 Lion 已损坏，并且没有解决方法。也许编译所有32位？我没有尝试，只是将 fusion 与具有 oci8 和 instanc 客户端正常工作的 ubuntu 服务器一起使用！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:57:19.570

根据以下线程，大约 11 个月以来没有任何变化，因为 Mac OS X Lion 没有即时客户端更新：

[https://forums.oracle.com/forums/thread.jspa?threadID=2318019](https://forums.oracle.com/forums/thread.jspa?threadID=2318019)

# c# - 在类中初始化的变量随着页面加载而丢失其先前的值

> ID：10838426
> 
> 赞同：21
> 
> 时间：2012-05-31T17:32:19.197
> 
> 标签：c#, asp.net

我已经用“hi”声明了一个字符串变量测试。每次单击 Button1 时，我都希望该测试将附加其先前的值。但是我注意到，当单击按钮并重新加载页面时，它会丢失以前的值。那就是每次我点击它时，它的文字都是“hihi”。我希望下次单击时会出现“hihihihi”，依此类推。下面的代码有什么问题？

```
public partial class _Default : System.Web.UI.Page
{

    String test = "hi";

    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        test += test;
        Button1.Text = test;
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-31T17:36:15.417

不，这不是 asp.net 的工作方式。如果你需要这种行为，你应该这样做：

```
public string test {
  get {
    return (string) ViewState["test"] ?? "hi";
  }
  set {
    ViewState["test"] = value;
  }
} 
```

当 ASP.NET 向服务器发送请求时，您的类的新版本将被实例化。如果您需要获取状态，则需要使用 ViewState（它保存在浏览器的隐藏字段中并随每个请求发送，因此*每个页面*保存状态），或者您可以使用 SessionState ，它是每个用户保存的状态. SessionState 默认保存在内存中。所以，如果你重新启动 IIS，这个状态就会消失。请注意，如果您重置 IIS，viewstate 的状态将不会消失（因为它是由浏览器发送的）。您也可以`Cache`再次使用其中，保存在内存中。这种状态适用于*所有人*您的应用程序的用户。有关重置 IIS 的相同规则适用。最后，您可以将变量设为静态。正如我所说，每次发出请求时，都会实例化一个新版本的类。当然，静态变量不是实例变量，因此静态变量的状态也会在回发中保存。关于 IIS 重置的相同规则适用于静态变量，如缓存和会话。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-31T17:36:20.923

字段仅在单个请求期间存在。如果您希望它在请求之间存在，则必须使用会话状态、视图状态、cookie 或 HTML 表单/请求值之类的东西。

在大多数“真实”应用程序中，您甚至无法保证后续请求由同一*台物理机器*处理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T17:37:28.160

每次访问页面时，都会创建一个新的页面实例，并使用它自己的局部变量副本。有几种方法可以将值从一个页面视图保存到下一个页面视图，它们都在此处进行了描述：[ASP.NET 状态管理概述](http://msdn.microsoft.com/en-us/library/75x4ha6s%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-31T17:37:53.273

```
String test = "hi"; 
```

这是一个私有的实例类字段。

如果你想实现你的目标，你需要一个静态的。

顺便说一句，老实说，也许您正在寻找使用会话项目：

```
HttpContext.Current.Session["test"] = "hi"; 
```

这样做你会在你的事件处理程序中有这样的代码：

```
string currentTestText = (string)HttpContext.Current.Session["test"];

currentTestText += currentTestText;
Button1.Text = currentTestText;

HttpContext.Current.Session["test"] = currentTestText; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-31T17:36:08.267

那是因为按钮会生成 POST BACK，您可以将变量声明为静态属性或创建 Session["Test"] 或在按钮上添加一些代码，如果 IsPostback {}

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-31T17:38:08.120

您的代码的问题是，在每次请求时`Page`都会重新创建您的实例，因此`test`不会保留以前的值，因为它属于一个新`Page`实例。

这是流程：

请求 1 开始

```
Page is created -> test = "hi" 
```

请求 1 结束

```
Page is detroyed 
```

请求 2 开始

```
Page is created -> test = "hi" 
```

请求 2 结束

```
Page is detroyed 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-31T17:36:39.190

请记住，在回发时，asp.net 会重新创建对象并重新分配值。在您的情况下，测试变量被重新创建并被分配了“hi”的值。您可能希望将变量存储在会话中，然后附加该值。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-31T17:34:55.383

这个有效，试试看

```
// in the page load event
if(!this.IsPostBack)
   Button1.Text = test;

// in the Click event
this.Button1.Text += test; 
```

您当前代码的问题是您正在为按钮文本分配一个**实例变量**，因为它是一个实例变量，**每次您请求具有相同值的页面时都会**对其进行初始化，这就是为什么您总是只得到**hihi**而不是**hihihihihihihi**

每次单击按钮时，ASP.Net 都会创建一个`new Page()`，因此该`test`成员将始终被初始化为：`test = "hi";`。

# c# - 将运行时数据存储在来自 ObjectSet 的对象中

> ID：10838428
> 
> 赞同：0
> 
> 时间：2012-05-31T17:32:41.500
> 
> 标签：c#, entity-framework

我对这个 Entity Framework [Object Services Overview (Entity Framework)](http://msdn.microsoft.com/en-us/library/bb386871.aspx)很陌生，所以如果我在这里使用了错误的术语，请原谅我。

我正在使用 EDMX 文件连接到 SQLite 数据库。我正在尝试做的是`ObjectSet<T>`正常使用，从数据库中的表中访问对象集合。但是，我想在该集中的对象中另外存储一些仅运行时数据。就我而言，我有一组设备存储在数据库中，但在启动时，我想将它们标记为“已连接”或“已断开连接”，并在整个执行过程中跟踪此状态。

由于 EDMX 生成的（行）类型是`partial`我添加了另一个部分定义，并在`public bool Connected`那里添加了我的属性。这*似乎*可行，我可以设置它，并且将来的查询会为对象提供与我之前设置的值相同的值。问题是，我不知道a）它是如何工作的，或者b）我是否可以信任它。这些疑问来自这样一个事实，即这些并不是我们正在处理的对象的**真正集合，对吧？**

希望这是有道理的，否则我可以提供更多细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:10:38.843

你正在做的事情是完全安全的。

ObjectSet 仍然是对象的集合。在下面添加了很多魔法。我不是内部专家，但我*认为*它是这样工作的：

实体框架有一个 StateTracker 帽子，可以跟踪您正在使用的所有实体。

EDMX 模型中的每个类都需要有一个密钥。EF 在内部使用该键，因此它只将该特定对象加载到内存中*一次。*

```
var foo = db.Foos.Single(x => x.Id == 1); // foo with Id 1 is unique (in memory)
var foo2 = db.Foos.Single(x => x.Id == 1); // same instance of foo, but with updated values
var foo3 = db.Foos.Single(x => x.Id == 2) // a new unique instance (Id = 2)

bool sameObject = Object.Equals(foo, foo2); // will return true; 
```

在每次选择时都会发生以下情况：

Foo 类的实例是否已经被跟踪/它是否已经存在？

是 -> 从数据库中更新现有实例的属性。
否 -> 创建类 Foo 的新实例（从数据库中获取值）

当然，它只能更新映射的属性。所以你在部分类中定义的那些不会被覆盖。

如果您要先使用代码。还有一个`[NotMapped]`属性，它确保如果您从代码优先模型生成新数据库，则该属性不会包含在表中。

我希望我能为你澄清一些事情。

# c# - 将故事板放置在样式或数据模板中

> ID：10838432
> 
> 赞同：0
> 
> 时间：2012-05-31T17:32:59.013
> 
> 标签：c#, wpf, animation, styles, storyboard

我有一个为图像宽度设置动画的情节提要。我用表情混合创建了动画：

```
<Storyboard x:Key="Storyboard1">
    <DoubleAnimationUsingKeyFrames 
             Storyboard.TargetProperty="(FrameworkElement.Width)" 
             Storyboard.TargetName="imageFoo">
            <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="335">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BackEase EasingMode="EaseOut"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
    </DoubleAnimationUsingKeyFrames>
</Storyboard> 
```

问题是我想将该故事板分配给我的应用程序中的所有图像，而不仅仅是图像**imageFoo**。我想在鼠标输入图像时启动该动画。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:58:42.703

您需要从情节提要中删除目标名称并将触发器移动到样式中，谢天谢地，不需要任何代码

在您的 App.xaml 文件中（或在任何资源集合中）。

```
 <Application.Resources>
        <Style TargetType="{x:Type Image}">
            <Style.Triggers>
                <EventTrigger RoutedEvent="MouseEnter">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)">
                                <EasingDoubleKeyFrame KeyTime="0:0:0.9" Value="335">
                                    <EasingDoubleKeyFrame.EasingFunction>
                                        <BackEase EasingMode="EaseOut"/>
                                    </EasingDoubleKeyFrame.EasingFunction>
                                </EasingDoubleKeyFrame>
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Style.Triggers>
        </Style>
    </Application.Resources> 
```

通过声明一个没有 x:Key 的样式并简单地给出一个 TargetType ，您基本上是在告诉 WPF 它应该应用于具有该类型的可视树中的每个元素。

# javascript - 从 div 访问父 html 页面

> ID：10838440
> 
> 赞同：0
> 
> 时间：2012-05-31T17:33:27.303
> 
> 标签：javascript, python, html, cgi

我有一个简单的 HTML 页面，上面有一个隐藏字段。我显示了一个 DIV，其中有一个按钮供用户单击 - 当他们这样做时，我想更新主页上的隐藏字段。

目前，我的主 HTML 中有这个（在 CGI 文件中）：

```
print "<td><input type=\"hidden\" id=\"mailUpdate\"></td></tr>"; 
```

我有这个（在 div 中的按钮的 onClick 访问的 javascript 模块中）：

```
var updMail = document.getElementById("mailUpdate");
updMail.value = 1; 
```

但是当我尝试阅读这个（在与上面相同的 CGI 文件中）时：

```
formData = cgi.FieldStorage()
doUpd = formData.getvalue("mailUpdate")
if (doUpd == 1):
    print "Maint button - doing update" 
```

'doUpd' 永远不会获得任何价值。

希望这是有道理的——有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:42:39.593

您的问题在于表达式`(doUpd == 1):`您正在将字符串 doUpd 与整数 1 进行比较。这将始终是`False`. 更改为`(doUpd == '1'):`应该可以解决您的问题。

此外，您需要将 添加`name`到输入中，以便它与表单一起出现。

```
print "<input type=\"hidden\" id=\"mailUpdate\" name=\"mailUpdate\"></td></tr>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:44:57.360

在不了解 CGI 的情况下，看起来您正在将服务器端代码与客户端事件混合在一起。对隐藏值的更好检查是添加如下一行：

```
var updMail = document.getElementById("mailUpdate");
updMail.value = 1;
alert(document.getElementById("mailUpdate").value); 
```

如果您没有在服务器端收到值，可能是因为您的输入字段未包含在`<form>`元素中，然后 http 消息需要是表单提交，而不是简单的导航调用。

或者试试这个来验证实际存在什么值：

```
formData = cgi.FieldStorage()
doUpd = formData.getvalue("mailUpdate")
print doUpd 
```

# linux - scp 从远程主机到本地主机

> ID：10838443
> 
> 赞同：47
> 
> 时间：2012-05-31T17:33:44.183
> 
> 标签：linux, unix, scp

我正在尝试将文件从远程计算机复制到我正在使用的本地计算机。每当我运行此命令时，都会提示我输入密码。我不确定要输入什么密码，因为我从未配置过任何密码。有人有任何提示吗？

```
scp stuff.php djorge@localhost:Users/djorge/Desktop 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-31T17:41:18.313

您需要另一台电脑的 ip 并执行以下操作：

```
scp user@ip_of_remote_pc:/home/user/stuff.php /Users/djorge/Desktop 
```

它会询问您“*另一*台电脑上的用户密码”。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-31T17:36:30.150

在远程机器的配置文件 /etc/ssh/ssh_config 中的 AllowUsers 部分中必须有一个用户。编辑配置文件后，您可能需要重新启动 sshd。

然后您可以将例如文件“test.txt”从远程主机复制到本地主机

> scp your_username@remotehost.com:test.txt /local/dir

* * *

@cool_cs 你可以使用 ~ 符号 ~/Users/djorge/Desktop 如果它是你的主目录。

在 UNIX 中，绝对路径必须以“/”开头。

# c# - 插件架构可扩展性

> ID：10838445
> 
> 赞同：4
> 
> 时间：2012-05-31T17:33:56.243
> 
> 标签：c#, mef

我正在与 MEF 合作以获得一个插件架构。我想设计一些可扩展性。我想扩展初始化。

我所拥有的是一个“驱动程序”，它重复地从某个来源收集数据。这些是我的插件。这些插件中的每一个都需要初始化。现在我有一个需要这些插件来实现的接口。

```
interface IDriverLiveCollection
{
    ILiveCollection GetCollection(ILog logger, IDriverConfig config);
} 
```

这个接口基本上是从插件创建一个 ILiveCollection 的实例。为了更好地理解 ILiveCollection 看起来像这样。

```
interface ILiveCollection
{
    void GetData(Parameter param, DataWriter writer);

    void ShutDown();
} 
```

还有初始化循环：

```
foreach(IDriverConfig config in DriverConfigs)
{
    //Use MEF to load correct driver
    var collector = this.DriverLoader(config.DriverId).GetCollection(new Logger, config);

    // someTimer is an IObservable<Parameter> that triggers to tell when to collect data.
    someTimer.Subscribe((param)=> collector.GetData(param, new DataWriter(param)));
} 
```

问题是某些驱动程序可能需要比其配置更多的信息才能进行初始化。例如，某些驱动程序希望在初始化期间为其提供一组参数。

我可以轻松地将界面扩展为现在的样子：

```
interface IDriverLiveCollection
{
    ILiveCollection GetCollection(ILog logger, IDriverConfig config, IEnumerable<Parameter> params);
} 
```

这种方法的缺点是公共接口已经改变，现在我需要重新编译每个驱动程序，即使之前没有一个需要这个参数列表才能运行。我打算拥有很多驱动程序，而且我也无法控制谁编写驱动程序。

我想了另一个解决方案。我可以在调用 Get Collection 和订阅计时器之前创建接口并在循环内部，我可以检查 ILiveCollection 对象是否也扩展了以下接口之一：

```
interface InitWithParameters
{
    void InitParams(IEnumerable<Parameter> params);
} 
```

在我的循环中：

```
foreach(IDriverConfig config in DriverConfigs)
{
    //Use MEF to load correct driver
    var collector = this.DriverLoader(config.DriverId).GetCollection(new Logger, config);

    // Check to see if this thing cares about params.
    if(collector is InitWithParameters)
    {
        ((InitWithparameters)collector).InitParams(ListOfParams);
    }

    // Continue with newly added interfaces.

    // someTimer is an IObservable<Parameter> that triggers to tell when to collect data.
    someTimer.Subscribe((param)=> collector.GetData(param, new DataWriter(param)));
} 
```

这里的不同之处在于我不需要重新编译每个驱动程序以使其工作。旧驱动程序将根本不是 InitWithParameters 类型，并且不会以这种方式调用，而新驱动程序将能够利用新接口。如果旧驱动程序想要利用，那么它可以简单地实现该接口并重新编译。底线：我不需要重新编译驱动程序，除非他们想要这个功能。

我已经认识到的缺点是：我显然需要重新编译这个循环中的程序。当新驱动程序与带有循环的旧版本程序一起使用时，会出现版本控制问题，这可能会导致一些问题。最后，随着这些事情的增长，我必须使用循环保存程序中每种可能类型的巨大列表。

有一个更好的方法吗？

编辑附加信息：

我试图在 IDriverLiveCollection 上使用 MEF，而不是在 ILiveCollection 上使用，因为 IDriverLiveCollection 允许我使用自定义初始化参数构造特定的 ILiveCollection。

可能有 2 个相同类型的 ILiveCollections (2 FooLiveCollections)，每个具有不同的 ILog 和 IDriverConfig 并且可能具有 IEnumerable。我希望能够在“初始化循环”期间而不是在插件组合时指定这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:40:10.823

如果您只是`[ImportMany]`直接在界面上使用，则可以通过属性`ILiveCollection`处理整个基础架构。[`[ImportingConstructor]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.importingconstructorattribute.aspx)

这允许您的插件准确指定它们需要能够构建的内容，而无需稍后提供和构建类型。

实际上，您的主机应用程序只需要：

```
// This gets all plugins
[ImportMany]
IEnumerable<ILiveCollection> LiveCollections { get; set; } 
```

然后每个插件都会有他们的类型来导出这个，即：

```
[Export(typeof(ILiveCollection))]
public class FooLiveCollection : ILiveCollection
{
    [ImportingConstructor]
    public FooLiveCollection(ILog logger, IDriverConfig config)
    {
       // ... 
```

或者，插件可以省略一个构造函数参数，或者添加稍后的参数（不影响以前的插件），即：

```
 [ImportingConstructor]
    public BarLiveCollection(ILog logger, IDriverConfig config, IBarSpecificValue barParam)
    {
       // ... 
```

# sql-server-2008 - 如何存储不同的文档类型

> ID：10838448
> 
> 赞同：0
> 
> 时间：2012-05-31T17:34:06.220
> 
> 标签：sql-server-2008, file, file-upload

我有一个使用 SQL SERVER 2008 的网站，它允许用户上传 excel、word、txt、pdf、媒体文件和其他格式的文件。（就像 Rapishare，Megaupload）

将它们存储到 SQL SERVER 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:41:28.007

[`FILESTREAM`](http://msdn.microsoft.com/en-us/library/gg471497.aspx)或[`VARBINARY(MAX)`](https://stackoverflow.com/questions/613154/how-to-dump-all-of-our-images-from-a-varbinarymax-field-in-sql2008-to-the-file)，但您应该考虑这样做与将文件存储在文件系统上并且只是指向数据库中文件的指针的利弊。

在数据库中存储文件的优点：

*   事务一致性
*   安全性（假设您需要它并且您的数据库无论如何都没有完全开放）

缺点：

*   更大的数据库文件 + 备份（如果您托管在其他人的存储上，这可能会很昂贵）
*   更难调试（你不能在 Management Studio 中说“SELECT doc FROM table”并弹出 Word）
*   更难将文档呈现给用户（并允许他们上传） - 您必须构建一个应用程序来获取文件并将其存储在数据库中，然后拉取文件，而不是仅仅提供文件系统上文件的链接从数据库中将其呈现给用户。

在 SQL Server 2012 中，[FileTable](http://msdn.microsoft.com/en-us/library/ff929144.aspx)将提供更实用的混合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:40:52.253

由于您使用 SQL Server 2008，您可能会查看文件流功能。这应该是一种从文件大小超过 1 MB 的文件中存储二进制数据的有效方法。

# mysql - 如何解决此 SQL 的“使用文件排序”问题？

> ID：10838450
> 
> 赞同：1
> 
> 时间：2012-05-31T17:34:23.250
> 
> 标签：mysql, sql, sql-optimization

有表：

```
CREATE TABLE `deal_keyword` (
  `deal_id` int(11) unsigned NOT NULL default '0',
  `keyword_id` int(11) unsigned NOT NULL default '0',
  `area_id` int(11) unsigned NOT NULL default '0',
  PRIMARY KEY  (`deal_id`,`keyword_id`),
  KEY `area_id` (`area_id`,`keyword_id`,`deal_id`)
) TYPE=MyISAM; 
```

并输入一些记录进行测试：

```
insert into deal_keyword values(1,2,3);
insert into deal_keyword values(2,2,3);
insert into deal_keyword values(3,2,3);
insert into deal_keyword values(4,1,3);
insert into deal_keyword values(5,1,3);
insert into deal_keyword values(6,1,3);
insert into deal_keyword values(7,3,3);
insert into deal_keyword values(8,3,3); 
```

当我运行这个 SQL 时：

```
explain select * from `deal_keyword` where `area_id`=3 && `keyword_id` in(1,3) order by `deal_id`;

+--------------+-------+---------------+---------+---------+------+------+------------------------------------------+
| table        | type  | possible_keys | key     | key_len | ref  | rows | Extra                                    |
+--------------+-------+---------------+---------+---------+------+------+------------------------------------------+
| deal_keyword | range | area_id       | area_id |       8 | NULL |    4 | Using where; Using index; Using filesort |
+--------------+-------+---------------+---------+---------+------+------+------------------------------------------+ 
```

如何解决此 SQL 的“使用文件排序”问题？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:37:30.927

`(area_id, deal_id, keyword_id)`在（按此顺序）上创建复合索引

请注意，如果您的表中有其他列，则索引扫描不一定比没有 a 的`ORDER BY`文件排序好`LIMIT`，因为遍历索引需要​​表查找，这意味着随机查找并且效率不高。

# c - Gtk+延迟白屏（flash插件+NPAPI）

> ID：10838451
> 
> 赞同：4
> 
> 时间：2012-05-31T17:34:23.713
> 
> 标签：c, gtk, npapi, xlib

我创建了一个独立的应用程序，它在带有 NPAPI 的 gtk+ UI 上运行编译过的 flash (.swf)。当我的视频运行时，会有一小段时间出现白屏（可能是 1 或 2 秒）。这有点烦人，我想知道我是否可以做些什么来摆脱它。例如，使用 Xlib（本机）。可能吗？我想是的，但我对这些东西还很陌生，只运行了我的第一个应用程序（“hello world”）。我很确定这是非常低的水平，并且需要相当多的时间来做同样的事情。如有必要，我可以提供代码。

1) 什么可能导致 gtk+ 中的白屏延迟（在加载我的 flash 之前）？

2) 在原生 Xlib 中实现一个窗口来渲染 flash 有多难？例如，对于设置 NPWindow...

Gtk++（看起来像这样）

```
static NPWindow *
npwindow_construct (GtkWidget *widget) {
  NPWindow *npwindow;
  NPSetWindowCallbackStruct *ws_info = NULL;

  GdkWindow *parent_win = widget->window;

  GtkWidget *socketWidget = gtk_socket_new();

  gtk_widget_set_parent_window(socketWidget, parent_win);
  gtk_widget_set_uposition(socketWidget, xPosition, yPosition);

  g_signal_connect(socketWidget, "plug_removed", G_CALLBACK(plug_removed_cb), NULL);
  g_signal_connect(socketWidget, "unrealize", G_CALLBACK(socket_unrealize_cb), NULL);
  g_signal_connect(socketWidget, "destroy", G_CALLBACK(gtk_widget_destroyed), &socketWidget);

  gpointer user_data = NULL;
  gdk_window_get_user_data(parent_win, &user_data);

  GtkContainer *container = GTK_CONTAINER(user_data);
  gtk_container_add(container, socketWidget);
  gtk_widget_realize(socketWidget);

  GtkAllocation new_allocation;
  new_allocation.x = 0;
  new_allocation.y = 0;
  new_allocation.width = WINDOW_XSIZE;
  new_allocation.height = WINDOW_YSIZE;
  gtk_widget_size_allocate(socketWidget, &new_allocation);

  gtk_widget_show(socketWidget);
  gdk_flush();

  GdkNativeWindow ww = gtk_socket_get_id(GTK_SOCKET(socketWidget));
  GdkWindow *w = gdk_window_lookup(ww); 

  npwindow = malloc (sizeof (NPWindow));
  npwindow->window = (void*)(unsigned long)ww;
  npwindow->x = 0;
  npwindow->y = 0;
  npwindow->width  = WINDOW_XSIZE;
  npwindow->height = WINDOW_YSIZE;

  ws_info = malloc(sizeof (NPSetWindowCallbackStruct));
  ws_info->type = NP_SETWINDOW;
  ws_info->display = GDK_WINDOW_XDISPLAY(w);
  ws_info->colormap = GDK_COLORMAP_XCOLORMAP(gdk_drawable_get_colormap(w));
  GdkVisual* gdkVisual = gdk_drawable_get_visual(w);
  ws_info->visual = GDK_VISUAL_XVISUAL(gdkVisual);
  ws_info->depth = gdkVisual->depth;

  npwindow->ws_info = ws_info;
  npwindow->type = NPWindowTypeWindow;

  return npwindow;
} 
```

3) Xlib 和 Xt 有什么区别？

任何建议或修复表示赞赏。

谢谢你。

**编辑**：我试图在我的 gtk 组件中嵌入 Xlib。因此，在我的主*GdkWindow* ( *widget->window* )中创建一个简单的窗口 ( *XCreateSimpleWindow* )。我对如何做到这一点有点迷失......因为， gtk_socket_new() 创建了一个进程，该进程使 gtk 组件能够从我的 npapi 插件获取（能够成为“馈送”）数据。那么，如何填充（编码）NPWindow？

 **```
GtkWidget *socketWidget = gtk_drawing_area_new ();
gtk_drawing_area_size (socketWidget , WINDOW_XSIZE, WINDOW_YSIZE); 
gtk_widget_realize (socketWidget); 
XCreateSimpleWindow (GDK_WINDOW_XDISPLAY (parent_win), GDK_WINDOW_XWINDOW (parent_win), 0, 0, WINDOW_XSIZE, WINDOW_YSIZE, 0, 0); 
```**

# objective-c - UIWebView 禁用位置提示

> ID：10838452
> 
> 赞同：1
> 
> 时间：2012-05-31T17:34:33.223
> 
> 标签：objective-c, ios, xcode

当您访问某些要求位置的网站时，是否可以禁用弹出的位置提示（或自动拒绝/接受）？我没有使用 MKMapView，因为我的应用不仅仅是查看地图（它可能只是访问可能有地图的网站）。

我猜是因为提示不是由我的应用程序控制，而是由 iOS 系统控制，我可能无法自动拒绝/接受对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-02T17:15:22.390

至于在加载 UIWebView 时从 IOS 应用程序中禁用提示，这**是**可能的。

您需要在将 html 加载到 UIWebView 之前拦截 html，然后找到它的哪一部分触发 GPS/位置提示。找到它后，只需将其从 html 中删除，然后将 html 输入到 UIWebView 中，从而“禁用”提示。但是，因此，网页将缺少该元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:36:32.373

不，这是不可能的。不适用于**UIWebView**，也不适用于任何 iOS 浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T07:52:39.940

我知道没有办法阻止提示，我希望它将作为 UIWebView 的属性实现。

当涉及到 UIWebViews 时，对话框不是为了用户的安全。包含该视图的应用程序已经要求访问位置，并且可以在设置中启用和禁用它。要从应用程序和 Web 视图中请求位置访问，我认为这是一个错误。

# codeigniter - 我的令牌中使用了不允许的 URI 字符

> ID：10838465
> 
> 赞同：0
> 
> 时间：2012-05-31T17:35:31.750
> 
> 标签：codeigniter

看看这个网址：

```
http://localhost/foo/reset_password/bar@foobar.com/74ffb86822ca0a75e378e1eaa3a4a000fbf5eb1f6bc98d2ec789c59b2cc9cfc7e27e7489bfe59cfff04220c3e29f3869b8abc6f0a65ef170b9b9148d3619b2f9 
```

这是配置：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

网址给了我这个错误->`The URI you submitted has disallowed characters.`

url 中最长的丑陋字符串是 timestamp + salt sha512 编码的，但我没有看到任何不允许的字符，知道有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:39:04.870

`bar@foobar.com`, 特别是`@`URL 中的 ,​​ 是错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:40:03.830

您的 sha 哈希没有任何问题……问题出在“@”符号上。URL 的路径部分中不能有“@”符号。

您可以将其转义到 %40

```
http://localhost/foo/reset_password/bar%40foobar.com/74ffb86822ca0a75e378e1eaa3a4a000fbf5eb1f6bc98d2ec789c59b2cc9cfc7e27e7489bfe59cfff04220c3e29f3869b8abc6f0a65ef170b9b9148d3619b2f9 
```

应该可以...只是取消转义您的电子邮件地址

# string - 从字符串中删除数字

> ID：10838468
> 
> 赞同：9
> 
> 时间：2012-05-31T17:35:44.233
> 
> 标签：string, delphi, replace

我想知道如何从字符串中删除数字。我尝试使用 StringReplace，但我不知道如何告诉函数我要替换数字。

这是我尝试过的：

```
StringReplace(mString, [0..9], '', [rfReplaceAll, rfIgnoreCase]); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T18:33:45.637

简单但有效。可以进行优化，但应该首先为您提供所需的内容：

```
function RemoveNumbers(const aString: string): string;
var
  C: Char;
begin
  Result := '';
  for C in aString do begin
      if not CharInSet(C, ['0'..'9']) then
      begin
        Result := Result + C;
      end;
    end;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T19:21:01.090

相当快速的就地版本。

```
procedure RemoveDigits(var s: string);
var
  i, j: Integer;
  pc: PChar;
begin
  j := 0;
  pc := PChar(@s[1]);
  for i := 0 to Length(s) - 1 do
    if pc[i] in ['0'..'9'] then 
               //if CharInSet(pc[i], ['0'..'9']) for Unicode version
      Inc(j)
    else
      pc[i - j] := pc[i];
  SetLength(s, Length(s) - j);
end; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-09T03:27:39.017

这与 Nick 的版本具有相同的输出，但使用短字符串时的速度是其 3 倍以上。文字越长，差异越大。

```
function RemoveNumbers2(const aString: string): string;
var
  C:Char; Index:Integer;
begin
  Result := '';
  SetLength(Result, Length(aString));
  Index := 1;
  for C in aString do
    if not CharInSet(C, ['0' .. '9']) then
    begin
      Result[Index] := C;
      Inc(Index);
    end;
  SetLength(Result, Index-1);
end; 
```

如果没有必要，不要浪费宝贵的 CPU 周期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T18:05:59.293

好吧，我厌倦了寻找已经构建的功能，所以我创建了自己的：

```
 function RemoveNumbers(const AValue: string): string;
   var
      iCar : Integer;
      mBuffer : string;
   begin
      mBuffer := AValue;

      for iCar := Length(mBuffer) downto 1 do
      begin
         if (mBuffer[iCar] in ['0'..'9']) then
            Delete(mBuffer,iCar,1);
      end;
      Result := mBuffer;
   end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-08T10:29:06.377

用这个

```
function RemoveNonAlpha(srcStr : string) : string;
const
CHARS = ['0'..'9'];
var i : integer;
begin
result:='';
for i:=0 to length(srcStr) do
if  (srcstr[i] in CHARS) then
result:=result+srcStr[i];
end   ; 
```

你可以这样称呼它

edit2.text:=RemoveNonAlpha(edit1.text);

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-31T17:42:11.177

StringReplace 不接受集合作为第二个参数。也许有人会有更合适的方法，但这有效：

```
StringReplace(mString, '0', '', [rfReplaceAll, rfIgnoreCase]);
StringReplace(mString, '1', '', [rfReplaceAll, rfIgnoreCase]);    
StringReplace(mString, '2', '', [rfReplaceAll, rfIgnoreCase]); 
```

等等

# go - 如何编译由多个文件组成的 Go 程序？

> ID：10838469
> 
> 赞同：107
> 
> 时间：2012-05-31T17:35:56.027
> 
> 标签：go, build, compiler-errors

我有一个由三个文件组成的小程序，它们都属于同一个包（主）。但是当我这样做时`go build main.go`，构建没有成功。当它只有一个文件 ( `main.go`) 时，一切正常。

现在我花了一些精力来分离代码，看起来编译器无法找到取出`main.go`并放入这两个其他文件（与 main.go 位于同一目录中）的内容。这会导致`undefined 'type'`错误。

如何编译这个由多个文件组成的程序？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-31T17:43:19.840

### 新方式（*推荐*）：

[请看一下这个答案](https://stackoverflow.com/a/61793820/115363)。

### 旧方式：

假设您正在编写一个名为 myprog 的程序：

将所有文件放在这样的目录中

```
myproject/go/src/myprog/xxx.go 
```

然后添加`myproject/go`到 GOPATH

并运行

```
go install myprog 
```

这样，您就可以根据需要在 myproject/go/src 中添加其他包和程序。

参考： http: [//golang.org/doc/code.html](http://golang.org/doc/code.html)

（这个文档总是被新人错过，并且一开始经常被误解。它应该得到 Go 团队 IMO 的最大关注）

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-06-03T16:46:58.350

例如，当您将代码从`main.go`into 中分离出来时，您只需将该文件也`more.go`传递给`go build`// `go run`。`go install`

所以如果你以前跑过

```
go build main.go 
```

你现在简直

```
go build main.go more.go 
```

* * *

作为进一步的信息：

```
go build --help 
```

状态：

> 如果参数是 .go 文件的列表，则 build 将它们视为指定单个包的源文件列表。

* * *

请注意`go build`和`go install`不同之处`go run`在于前两个状态期望*包名称*作为参数，而后者期望*go files*。但是，前两个也将像 go install 一样接受 go 文件。

如果您想知道：build 将只是`build`包/文件，`install`将在您的 GOPATH 中生成对象和二进制文件，`run`并将编译和运行您的程序。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2020-05-14T09:25:39.143

Since Go 1.11+, GOPATH is no longer recommended, the new way is using Go Modules.

### Say you're writing a program called `simple`:

1.  Create a directory:

    ```
    mkdir simple
    cd simple 
    ```

2.  Create a new module:

    ```
    go mod init github.com/username/simple
    # Here, the module name is: github.com/username/simple.
    # You're free to choose any module name.
    # It doesn't matter as long as it's unique.
    # It's better to be a URL: so it can be go-gettable. 
    ```

3.  Put all your files in that directory.

4.  Finally, run:

    ```
    go run . 
    ```

5.  Alternatively, you can create an executable program by building it:

    ```
    go build .

    # then:
    ./simple     # if you're on xnix

    # or, just:
    simple       # if you're on Windows 
    ```

For more information, you may read [this](https://blog.golang.org/using-go-modules).

> Go has included support for versioned modules as proposed here since 1.11\. The initial prototype vgo was announced in February 2018\. In July 2018, versioned modules landed in the main Go repository. In Go 1.14, module support is considered ready for production use, and all users are encouraged to migrate to modules from other dependency management systems.

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2014-12-08T18:43:11.293

你也可以只运行

```
go build 
```

在您的项目文件夹 myproject/go/src/myprog

然后你可以输入

```
./myprog 
```

运行您的应用程序

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-01-26T05:26:06.107

这取决于您的项目结构。但最直接的是：

```
go build -o ./myproject ./... 
```

然后运行`./myproject`。

假设您的项目结构如下所示

```
- hello
|- main.go 
```

然后你只需进入项目目录并运行

```
go build -o ./myproject 
```

然后`./myproject`在shell上运行。

或者

```
# most easiest; builds and run simultaneously
go run main.go 
```

假设您的主文件嵌套在一个子目录中，例如`cmd`

```
- hello
|- cmd
 |- main.go 
```

然后你会跑

```
go run cmd/main.go 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-04-16T04:44:38.210

您可以使用

```
go build *.go 
go run *.go 
```

两者都可以使用，您也可以使用

```
go build .
go run . 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-06-25T16:05:20.803

是的！这是非常直接的，这就是一揽子策略发挥作用的地方。据我所知，有三种方法。文件夹结构：

GOPATH/src/github.com/abc/myproject/adapter/main.go pkg1 pkg2 警告：adapter 只能包含包 main 和 sun 目录

1.  导航到“适配器”文件夹。跑：

```
 go build main.go 
```

2.  导航到“适配器”文件夹。跑：

```
 go build main.go 
```

3.  导航到 GOPATH/src 识别包 main 的相对路径，这里是“myproject/adapter”。跑：

```
 go build myproject/adapter 
```

**exe文件将在您当前所在的目录中创建。**

# ruby-on-rails - 为什么我会出现 Nokogiri 崩溃和 MemoryError:negative re-allocation size？

> ID：10838475
> 
> 赞同：1
> 
> 时间：2012-05-31T17:36:24.573
> 
> 标签：ruby-on-rails, ruby, nokogiri, rack

我有一个在本地运行良好的爬虫，但是当我在 XL EC2 实例上运行它时，出现`MemoryError: negative re-allocation size`错误。我在网上搜索过，但找不到任何有用的东西。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T13:33:31.633

我相信我们收到此错误是因为我们的磁盘已满。

# javascript - 基于html选择错误发送表单

> ID：10838477
> 
> 赞同：0
> 
> 时间：2012-05-31T17:36:27.637
> 
> 标签：javascript, jquery, html

我有一个选择表单，可以在您更改选择时发送值。不幸的是，每次发送它都会回到选项“10”。我怎样才能拥有它（例如），以便您可以单击 20 选项并发送表单并停留在 20 上？

这是代码：

```
<form method='get' name='FormVote'>
     <select name="vote" onChange="document.forms['FormVote'].submit()">
             <option selected="selected" value='10'>10</option>
             <option value='20'>20</option>
             <option value='30'>30</option>
             <option value='40'>40</option>
     </select>
</form> 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:44:11.813

由于 10 选项中的 selected="selected" 属性，它停留在 10

要让它记住用户放置它的位置，您需要从数据库中获取它的值，然后在 PHP 中执行以下操作：

```
foreach ($optionsArray as $option) {
    echo '<option ';
    if ($theOptionValue == $savedUserOptionValue)
        echo 'selected="selected"';
    echo 'value="', $theOptionValue, '>', $theOptionValue, '</option>';
} 
```

或者您可以使用 AJAX 将表单发送到服务器，在这种情况下页面不会刷新并且选项框将保持原位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:40:58.273

使用 Ajax 或者，

```
<form method='get' name='FormVote' target='hidden'>
 <select name="vote" onChange="document.forms['FormVote'].submit()">
         <option selected="selected" value='10'>10</option>
         <option value='20'>20</option>
         <option value='30'>30</option>
         <option value='40'>40</option>
 </select>
</form>
<iframe name='hidden' id='hidden' style='display:none' width='0' height='0' border='0'></iframe> 
```

# android - Android SDK Manager 找不到包

> ID：10838478
> 
> 赞同：0
> 
> 时间：2012-05-31T17:36:29.043
> 
> 标签：android, eclipse, sdk, adt

我正在尝试安装平台工具和其他支持包来开发使用 Eclipse 的 Android 应用程序。

但我在 Android SDK Manager 中得到了这个场景。我看不到任何“未安装”包，如 platform-tools 、 API 等。

任何想法？谢谢。

![androidsdkmanagerscene](../Images/43167696127fe2384fca0aea0f035ec3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:37:20.593

*   打开sdk管理器->点击工具->选项->清除缓存->关闭
*   单击包->重新加载

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:44:00.687

以管理员身份运行 SDK Manager。

如何：

*   右键单击 SDK 管理器
*   选择以管理员身份运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T15:11:50.287

确保检查工具->设置->强制https...，检查android sdk工具，然后安装按钮将被启用，现在安装1个包（重新启动sdk管理器），之后会出现其他sdk。（不要忘记关闭 eclipse，并在执行此操作时禁用您的防病毒软件）。这对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:53:31.723

当我的计算机通过公司代理服务器连接到 Internet 时，我遇到了同样的问题。我找到的唯一解决方案是将计算机直接连接到 Internet，无需代理。

# python - 用前面的例子打破外循环

> ID：10838483
> 
> 赞同：0
> 
> 时间：2012-05-31T17:37:06.773
> 
> 标签：python, break

更新：

此代码有效：

```
# North Carolina Sales Tax Estimator
# Estimates the Amount of Tax You Should Pay in North Carolina

# Defines the Current 2012 Tax Rate
nctaxrate = 0.07

# Defines the tax variable by multipling subtotal by the current nc tax rate
# tax = subtotal * nctaxrate

# Defines the total variable by adding the tax variable to the subtotal variable
# total = subtotal + tax

# Defines the Subtotal from an Input of the User's Purchase Amount
def main():
    print("\t\t\tThis is the NC Sales Tax Estimator")
    print("\t\t Input Your Total Purchases Below\n")

    while True:
        subtotal = float(input("Enter the total price of your purchases:\t$").strip())
        if subtotal == -1: break
        tax = subtotal * nctaxrate
        total = subtotal + tax

        print("\tSUBTOTAL: $", subtotal)
        print("\t     TAX: $", tax)
        print("\t   TOTAL: $", total)

# if this script is called directly by Python, run the main() function
# (if it is loaded as a module by another Python script, don't)
if __name__=="__main__":
    main() 
```

这是原始问题：

因此，我正在学习 Python，并在昨天问了一个之前的问题，并获得了一组很棒的代码，我决定对其进行修改，以使用我想要创建的 NC 销售税估算程序。

一件事是我遇到了一个我不太理解的中断循环错误。我已经搜索并试图理解其含义，但我知道代码之前有效。此外，我从头开始创建的税码程序 :) 在尝试添加在循环中提交许多输入直到用户想要“退出”之前的花哨功能之前工作。

这是代码：

```
# North Carolina Sales Tax Estimator
# Estimates the Amount of Tax You Should Pay in North Carolina

# Defines the Current 2012 Tax Rate
nctaxrate = 0.07

# Defines the tax variable by multipling subtotal by the current nc tax rate
tax = subtotal * nctaxrate

# Defines the total variable by adding the tax variable to the subtotal variable
total = subtotal + tax

# Defines the Subtotal from an Input of the User's Purchase Amount
def main():
    print("\t\t\tThis is the NC Sales Tax Estimator")
    print("\t\t Input Your Total Purchases Below")

while True:
    subtotal = float(input("Enter the total price of your purchases (or 'exit' to quit) :\$").strip())
    if subtotal.lower()=='exit':
        break

    try:
        subtotal = int(subtotal)
    except ValueError:
        print("That wasn't a number!")

    try:
        print("\tSUBTOTAL: $", subtotal)
        print("\t     TAX: $", tax)
        print("\t   TOTAL: $", total)
    except KeyError:
        print("")

# if this script is called directly by Python, run the main() function
# (if it is loaded as a module by another Python script, don't)
if __name__=="__main__":
    main() 
```

PS我只添加了KeyError，因为我研究了你在尝试后必须有一个错误声明。我只是一个初学者，所以我正在尝试自己创建程序并阅读“Python for the Absolute Beginner”。

更新：

我修复了缩进，但现在出现以下回溯错误：

```
Traceback (most recent call last):
  File "C:/LearningPython/taxestimator.py", line 30, in <module>
    tax = subtotal * nctaxrate
NameError: name 'subtotal' is not defined 
```

我以为我在输入中定义了它，即。

```
subtotal = float(input("Enter the total price of your purchases (or 'exit' to quit) :\$").strip()) 
```

是因为在定义小计之前定义了使用已定义小计的其他定义（税和总计）吗？我尝试将它们移动到定义的小计之下，但它仍然无法正常工作。

感谢您的任何建议。

最好的，

史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:55:23.697

您遇到的主要问题是 Python 需要空格来确定方法的范围。没有它， then 语句将不会按预期运行 - 例如：

```
while True:
    subtotal = float(input("Enter the total price of your purchases (or 'exit' to quit) :\$").strip())
if subtotal.lower()=='exit':
    break 
```

不会使用有效输入跳出循环（如果您将字符串放在那里，它会跳出，但那是另一回事）。此外，如果所有内容都在 的范围内`main()`，则每个语句都需要一级缩进（或四行空格，如果您愿意）。就目前而言，您`while`不会在`main()`.

`subtotal`此外，您在实际给它一个值之前会参考。由于`subtotal`未正确初始化，因此您将无法使用它。

您可能希望重写您的代码，`tax`以便*在*您`total`定义.*`subtotal`*

 *```
while True:
    subtotal = float(input("Enter the total price of your purchases (or 'exit' to quit) :\$").strip())
    if subtotal.lower()=='exit':
        break
    tax = subtotal * nctaxrate
    total = subtotal + tax 
```

最后，如果`subtotal`、`total`和被正确定义（在上述之后，它们将被正确定义），那么当您希望打印出这些值时`tax`，就不需要多余的语句了。`try...except`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:40:25.053

```
if subtotal.lower()=='exit':
    break 
```

可能需要缩进......除非这只是输入问题时的错字*

# mysql - 如何通过 powershell 使用 SQL 分隔符

> ID：10838489
> 
> 赞同：3
> 
> 时间：2012-05-31T17:37:51.953
> 
> 标签：mysql, database, powershell, delimiter

我试图读入一个由powershell执行的sql文件。一切正常，除了 powershell 由于单词分隔符而引发错误。所以我的问题是我将如何在我的 sql 文件中使用分隔符（我只能对 sql 文件进行微小的更改，它的代码必须保持相对不变）但通过 powershell 正确加载它。

这是我两个文件中的代码和我得到的错误。先感谢您。

电源外壳：

```
$sql = (Get-Content $pwd\NewClient.sql) | Out-String
$cmd.CommandText = "USE $dbname"
$cmd.ExecuteNonQuery()
$cmd.CommandText = $sql
$cmd.ExecuteNonQuery() 
```

SQL：

```
delimiter //
......
end;//
delimiter ; 
```

使用“0”参数调用“ExecuteNonQuery”的异常：“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 'Delimiter // 插入后创建触发器 stop_time_insert 附近使用的正确语法1号线停靠站”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-01T13:39:08.153

我意识到这是一个非常古老的线程，但我认为它是唯一涵盖该主题的线程。已回答的解决方案有效，但从 MySQL 命令提示符运行时不能使用相同的脚本。我创建了一个 PS 函数如下：

```
function executeScript([MySql.Data.MySqlClient.MySqlConnection]$conn, [String]$filePath)
{
    $fileName = Split-Path $filePath -Leaf
    Write-Host "Executing $fileName script"
    $sqlText = Get-Content $filePath | Out-String
    $sqlText = $sqlText.Replace("DELIMITER","-- DELIMITER")
    $sqlText = $sqlText.Replace('$$',";")
    return Invoke-MySql -sql $sqlText -connection $conn | Out-Null
} 
```

假设一个 SQL 脚本如下：

```
DELIMITER $$
....
END $$
DELIMITER ; 
```

Invoke-MySql 来自 Mike Shepard 的 MySQLLib 包。

现在可以从两个环境中执行相同的脚本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:05:50.397

Powershell 不支持 Delimiter 关键字，但在这种情况下它实际上不是必需的。

您的

```
create trigger stop_time_insert after insert on stops 
begin
   //do stuff
end; 
```

块将在没有分隔符的情况下工作，因为 Powershell 将整个命令视为单个项目，而不是 MySQL 命令行界面如何将其视为多行集。

因此，只需删除 Delimiter 语句就可以了。（在此处针对本地计算机进行了测试。）

# maven - Maven ftp 站点插件

> ID：10838492
> 
> 赞同：0
> 
> 时间：2012-05-31T17:37:56.727
> 
> 标签：maven, maven-plugin

我想将我的网站直接上传到我的 ftp 服务器。我正在尝试配置我的 pom.xml，但插件有一些问题。我已经在线阅读了许多指南，但没有一个是独一无二的，或者至少存在很大差异。你有什么技巧或窍门吗？

```
<profile>
  <id>deploy</id>
  <build>
    <plugins>
      <plugin>
        <inherited>false</inherited>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.6</version>
        <configuration>
          <target>
            <ftp action="send" server="server"
              remotedir="/a/b" userid="usr"
              password="pw" depends="no"
              verbose="yes" binary="yes">
              <fileset dir="modules/my-module/target">
                <include name="my-static-file.zip" />
              </fileset>
            </ftp>
            <taskdef name="ftp"              classname="org.apache.tools.ant.taskdefs.optional.net.FTP"
              classpathref="maven.plugin.classpath" />
          </target>
        </configuration>
        <dependencies>
          <dependency>
            <groupId>commons-net</groupId>
            <artifactId>commons-net</artifactId>
            <version>1.4.1</version>
          </dependency>
          <dependency>
            <groupId>ant</groupId>
            <artifactId>ant-commons-net</artifactId>
            <version>1.6.5</version>
          </dependency>
          <dependency>
            <groupId>ant</groupId>
            <artifactId>ant-jsch</artifactId>
            <version>1.6.5</version>
          </dependency>
          <dependency>
            <groupId>jsch</groupId>
            <artifactId>jsch</artifactId>
            <version>0.1.29</version>
          </dependency>
        </dependencies>
      </plugin>
    </plugins>
  </build>
</profile> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:04:26.997

Instead of maven-antrun-plugin it is better to use [upload goal of maven-wagon-plugin](http://www.mojohaus.org/wagon-maven-plugin/upload-mojo.html). Here is an [example project demonstrating uploading multiple files to ftp](https://svn.codehaus.org/mojo/trunk/mojo/wagon-maven-plugin/src/it/generic-it/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T16:38:59.803

现在这是我的 pom.xml。

```
<build>
  <extensions>
    <extension>
       <groupId>org.apache.maven.wagon</groupId>
       <artifactId>wagon-ftp</artifactId>
       <version>2.2</version>
     </extension>
   </extensions>
      <defaultGoal>package</defaultGoal>
    <plugins>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>wagon-maven-plugin</artifactId>
        <version>1.0-beta-4</version>
        <configuration>
         <skip>false</skip>
          <serverId>ftpserver</serverId>
          <url>ftp://---.---.----.---/var/www/html</url>
        </configuration>
        <executions>
          <execution>
            <id>upload</id>
            <phase>deploy</phase>
            <goals>
              <goal>upload</goal>
            </goals>
            <configuration>
              <fromDir>${project.basedir}/target/${project.artifactId}-${project.version}/</fromDir>
              <includes>*</includes>
              <toDir></toDir>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

我正在使用 Eclipse 3.7，当我使用 Run As -> Maven Install 时一切正常，但我想启动部署阶段以将所有内容上传到我的 ftp 服务器。我如何配置 Eclipse？我的 POM 现在对这个任务是正确的吗？

# google-maps-api-3 - Google Map API 的反向地理编码

> ID：10838495
> 
> 赞同：0
> 
> 时间：2012-05-31T17:38:11.250
> 
> 标签：google-maps-api-3

我正在查看我的一个应用程序的反向地理编码。是否可以通过输入（地理编码、地理编码的差异和视线（角度））来确定地址的地址或地理编码。是否有任何 Map API 具有这些功能？如果问题非常笼统，请道歉。

谢谢，斯里尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:46:00.427

对于地理编码阅读此：

[https://developers.google.com/maps/documentation/geocoding/?hl=en](https://developers.google.com/maps/documentation/geocoding/?hl=en)

并使用这个：

[http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false)

对于距离阅读此：

[https://developers.google.com/maps/documentation/distancematrix/?hl=en](https://developers.google.com/maps/documentation/distancematrix/?hl=en)

并使用这个：

[http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:56:33.607

刚刚发现我们可以用数学来做到这一点。

使用链接[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

# node.js - 节点：如何获取调用脚本的目录名？

> ID：10838499
> 
> 赞同：3
> 
> 时间：2012-05-31T17:38:22.437
> 
> 标签：node.js, command-line, directory

假设我从 运行 Node 脚本`/foo/bar`，尽管脚本本身位于其他地方（例如`node_modules`）。有没有办法获取调用脚本的工作目录，即`/foo/bar`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T17:53:00.093

你想要的是[`process.cwd()`](https://nodejs.org/api/process.html#process_process_cwd)，它返回 Node.js 进程的当前工作目录。

# c# - Form.cs 未因 Form.cs[Design] 的更改而更新

> ID：10838500
> 
> 赞同：1
> 
> 时间：2012-05-31T17:38:39.017
> 
> 标签：c#, visual-studio

我是 Visual Studio 的新手，我只是在弄乱控件以了解事情是如何工作的。我制作了一个具有单个按钮的表单，按下该按钮时，只需将“Hello World”打印到屏幕上。为了尝试更复杂的事情，我删除了该按钮并向表单添加了各种其他工具。但是，Form.cs 文件中的代码没有更新以反映这些对设计的更改，我找不到手动更新它的方法。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:42:06.940

如果您查看 Form1.Designer.cs（假设您的表单名为 Form1），您将看到通过构建您的应用程序生成的所有代码的列表，在那里您将看到您的按钮名称，如果按钮被删除，您应该能够安全地删除注释之间的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:47:43.623

您可以在**Form1.Designer.cs**文件中看到代码在这些行下方的更改....

```
 #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary> 
```

要手动更新，只需调用 manual_update()。

```
manual_update()
{

        Button b = new Button();
        b.Text = "new button";
        b.Size = new Size(100, 20);
        b.Location = new Point(20, 20);
        this.Controls.Add(b);
} 
```

您几乎可以手动完成所有操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:44:08.780

另外尝试重建..如果您从表单中删除它，有时VS不会从设计器中删除该代码..您将不得不手动删除它/更新它..还要确保您没有任何编译错误

如果您有错误.. 在错误得到解决之前，它们的更改可能不会显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T17:45:25.487

由于您提到您在前端表单文件中添加了其他工具，因此请确保表单中的 Web 控件连接到您拥有的任何事件处理程序。

此外，请确保您正在重新编译/重新构建您的页面，仅用于完整性检查和如果需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T17:53:43.963

有一个`Form1.Designer.cs`文件，设计器代码就在这个文件里。如果您在解决方案资源管理器中看不到该文件，则解决方案资源管理器窗格顶部有一个按钮，即`view files`. 点击它。

Visual Studio 为您提供控件的拖放功能，只需右键单击控件并单击“属性”即可更改属性。所以实际上您可能不需要更改设计器代码。但你可以随心所欲...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T18:08:57.363

如果您`Button`有一个`OnClick`事件，它不会在被擦除时`Button`被擦除。Visual Studio 假定此代码可以在其他地方使用并且不会破坏数据。

每次删除具有事件的控件时，它们都会保留。您必须手动检查并清理您的代码。

编辑：

要为较新的控件显示“新代码”，您必须双击该按钮为该控件生成默认事件，或者进入该控件的属性并为那里的事件生成代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T18:14:55.193

如果我正确理解了您的问题，那么添加控件和更改控件属性的代码都是自动生成的，并驻留在您的示例中，例如 Form1.Designer.cs。**除了 Visual Studio 之外，通常不应触及此文件。**

如果您想手动添加控件，您应该在`InitializeComponent()`调用后或在事件之类的`Form_Load`事件中在 Form1.cs 中执行此操作。下面是在表单加载事件中添加按钮的示例：

```
private void Form_Load(object sender, EventArgs e)
{
    Button b = new Button();
    b.Left = 10;
    b.Top = 10;
    b.Text = "Button!";
    this.Controls.Add(b); //'this' would be the form self-pointer
} 
```

事件不同。这些将在 Form1.cs 中发生变化，但对设计器所做的更改并不总是反映在事件的代码隐藏文件中。这就是VS的本质。有时删除按钮不会从代码中删除事件，反之亦然。

您可能必须在代码文件中手动从控件中删除事件。

添加控件的代码通常可以通过更改设计器中的控件来强制执行，但至少不会更改的一件事是控件名称更改时的事件名称。例如，如果一个按钮被调用`button1`并链接到 click 事件`button1_click(object sender, EventAgrs e)`，将按钮名称更改为`button12345`不会更改事件名称。

您可以通过打开控件属性并单击闪电来更改设计器中的链接事件。这显示了控件的所有事件。双击事件字段将带您进入链接的事件，或者如果该字段为空白，则生成一个事件。此对话框还将允许多个控件链接到单个事件。

以下是事件属性对话框的示例： ![事件对话框](../Images/c525c41d4218c4da6de58c284b704bff.png)

您可能只需要摆弄添加控件、链接事件、删除控件等，以了解何时在设计器和代码隐藏中更新更改以及何时未更新更改。

# vb.net - 覆盖 linq 属性

> ID：10838502
> 
> 赞同：1
> 
> 时间：2012-05-31T17:38:56.130
> 
> 标签：vb.net, linq, properties, overriding, partial

我正在使用为表生成数据协定的 Linq to Sql。我在该表中有一个日期字段，它是一个不可为空的字段。我需要覆盖日期字段的自动生成属性以返回特定值，例如

获取 if_dt<>date.minvalue return _dt else return string.empty End Get

是否可以使用部分类覆盖 Designer.vb 文件中的自动生成属性？我不想创建一个新属性，因为它目前正在 n 个地方访问，我不想在每个地方都更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:43:32.673

不，您需要修改 .designer 文件或从它继承并更改该属性的行为（但我猜自动生成的属性不会是虚拟的，因此您无论如何都需要对其进行编辑）

# backbone.js - Backbone.js Collection.fetch 给出错误

> ID：10838505
> 
> 赞同：1
> 
> 时间：2012-05-31T17:39:11.597
> 
> 标签：backbone.js, backbone.js-collections

当我尝试调用 collections.fetch 方法时，我在控制台中收到以下错误：

```
Uncaught TypeError: Object function (a){return new j(a)} has no method 'isObject' 
```

这是我的 app.js ：

```
 var Items = Backbone.Collection.extend({
    url : function() {
        return "names/all/" + this.pageStart + "-" + this.pageEnd;
    },
    pageStart : 1,
    pageEnd : 5
});

var ScrollView = Backbone.View.extend({
    el : $('#list'),
    initialize : function() {
        _.bindAll(this, 'getNames');
        this.collection.bind('all', this.addAll);
        this.collection.fetch(); //getting error coz of this line here.
    },
    getNames : function() {
        this.collection.fetch();
    },

    addAll : function() {
        alert(JSON.stringify(this.collection));
        this.collection.each(function(item) {
            alert(":");
            this.addOne(item);
        });
    },
    addOne : function(item) {
        alert(item);
    }
});
var coll = new Items();
var scrollView = new ScrollView({collection: coll}); 
```

这是我正在使用的脚本版本

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script> 
```

但是我从服务器得到的响应是 OK 200 status 这是我得到的响应

```
[{"firstName":"A","lastName":"last","id":"1"},{"firstName":"B","lastName":"last","id":"2"},{"firstName":"C","lastName":"last","id":"3"},{"firstName":"D","lastName":"last","id":"4"},{"firstName":"E","lastName":"last","id":"5"}] 
```

最后这些是我的响应标头：

```
Request URL:http://localhost:8080/mongodb/names/all/1-5
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Host:localhost:8080
Referer:http://localhost:8080/mongodb/
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5
X-Requested-With:XMLHttpRequest
Response Headersview source
Content-Type:application/json;charset=UTF-8
Date:Thu, 31 May 2012 17:32:10 GMT
Server:Apache-Coyote/1.1
Transfer-Encoding:chunked 
```

请帮助某人。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:01:13.200

您将下划线 1.1.6 与主干 0.9.2 一起使用，这需要下划线 1.3.1。

请参阅[http://backbonejs.org/#upgrading](http://backbonejs.org/#upgrading)

> **升级到 0.9**
> 
> 如果您正在升级，请确保您还将 Underscore.js 版本升级到最新版本 — 1.3.1 或更高版本。

# html - 页面在 Firefox 和 Opera 中无法正确显示

> ID：10838509
> 
> 赞同：0
> 
> 时间：2012-05-31T17:39:18.370
> 
> 标签：html, css

所以我在这个网站上工作，由于某种原因，一些页面在 firefox 和 opera 中没有正确对齐，但在 chrome、IE 和 Safari 中工作得很好。基本结构是我有一个宽度为 100% 的 div，在该 div 中我有一个表格来分隔页面的各个部分。左侧和右侧的列应该填满屏幕宽度的剩余部分，但在 Firefox 和 Opera 中，这些列没有宽度，但在 IE、Chrome 和 Safari 中，它们填满了剩余部分。在使用它时，如果我删除两个中间单元格上的宽度参数，它将正确对齐，但这会导致 chrome、IE 和 Safari 中的文本对齐问题。如何让列填满所有浏览器中的页面？

这是一个链接[http://its.truman.edu/International/Meet_A_Student.htm](http://its.truman.edu/International/Meet_A_Student.htm)

这是我的代码，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Meet A Student</title>
<style type="text/css">
#outer {
    opacity: .5;
}
#img1 {
    opacity: .3;
}
#table1 {
    opacity: 1;
}
</style>
</head>

<body style="margin: 0; background-image: url('Pictures/InternationalAppeal-    HomepageColor.jpg'); width:100%; height:100%; clip:auto; overflow:hidden;">
<div style=" position:absolute; height:100%; margin:0px auto">

    <table style="width: 100%; height:100%; border-collapse:collapse">
        <tr>
            <td rowspan="4" style="background-color:#2BA7D0; margin-right:0px; height:100%;" id="outer" >
                &nbsp;
            </td>
            <td colspan="2" style="text-align: center; background-image: url('Pictures/Header_New.jpg');width:960px; height:100px" valign="bottom"  >
                <table style="width: 100%; border-collapse:collapse">
                    <tr>
                        <td style="width:20%"> <a href="/International/Home.htm">
                            <button  type="button" style="color: black;background: #2BA7D0; border:0; height:50px; width:100%"> 
                            <span style="font-family:Calibri; font-size:16pt;font-weight:bold"> 
                            Home 
                            </span>
                            </button> 
                        </a></td>
                        <td style="width:20%">  
                            <button  type="button" style="color:white; background:#FA7042; border:0; height:50px; width:100%;">
                            <span style="font-family:Calibri; font-size:16pt;font-weight:bold"> 
                            Meet A<br/> Student
                            </span>
                            </button>
                        </td>
                        <td style="width:20%"> <a href="/International/Available_Funds.htm"> 
                            <button type="button" style="border-style: none; border-color: inherit; border-width: 0; background: #2BA7D0; height:50px; width:100%"> 
                            <span style="font-family:Calibri; font-size:16pt;font-weight:bold; WORD-WRAP:break-word">
                            Available <br /> Funds
                            </span>
                            </button>
                        </a></td>
                        <td style="width:20%">  <a href="/International/Contact.htm">
                            <button type="button" style="color:black; background:#2BA7D0; border:0; height:50px; width:100%;"> 
                            <span style="font-family:Calibri; font-size:16pt;font-weight:bold"> 
                            Contact <br/> Truman
                            </span>
                            </button>
                        </a></td>
                        <td style="width:20%">  <a href="/International/Give.htm">
                            <button type="button" style="color:black; background:#2BA7D0; border:0; height:50px; width:100%;"> 
                            <span style="font-family:Calibri; font-size:16pt;font-weight:bold"> 
                            Give
                            </span>
                            </button>
                        </a></td>
                    </tr>
                </table>
            </td>
            <td rowspan="4" style="background-color:#2BA7D0; height:100%;" id="outer">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td style="width:480px" >
                <div>
                    <img alt="Wanding Shi" src="Pictures/Wanding Shi.jpg" style="float: left; margin-right:10px" width="258" height="389"/>
                    <div>
                        <p style="font-family:Calibri">
                            <span style="font-size:16pt"> 
                            Wanding Shi
                            </span><br />
                            Senior Business Major<br />
                            <br />
                            Home Country - China<br />
                            <br />
                            &quot;I enjoy the environment at Truman and have 
                            gotten involved in Phi Beta Lambda and the 
                            Bulldog Investment Fund. I am grateful for 
                            the opportunity to get to know students from 
                            different countries while at Truman.&quot;
                        </p>
                    </div>
                </div> 
            </td>
            <td style="width:480px">
                <div>
                    <img alt="Babajide Adio" src="Pictures/Babajide_Adio.jpg" style="float: left; margin-right:10px" width="240" height="389" />
                    <div>
                        <p style="font-family:Calibri">
                            <span style="font-size:16pt">Babajide 
                            Adio</span><br />
                            Senior Biology Major<br />
                            <br />
                            Home Country - Nigeria<br />
                            <br />
                            &quot;At Truman, I have enjoyed great opportunities 
                            to do research with professors since my freshman 
                            year. I have also gotten involved in a lot of 
                            student organizations including honors 
                            organizations, the African Students Association 
                            and Intramural Soccer and Basketball. The 
                            community is very friendly, and it is easy for 
                            every student to find his or her niche. Since 
                            international students don&#39;t qualify for many 
                            scholarships because of citizenship, it would be 
                            wonderful to receive support for international 
                            students.&quot;
                        </p>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td  colspan="2" style="text-align: center; width:20%; background-image:url('Pictures/Footer_New.jpg')" class="style6" >
                <div id="table1"> <table id="table1" style="border-collapse:collapse; width:960px">
                <tbody>
                    <tr>
                        <td style="text-align:right;font-family:Calibri;margin-bottom:0px; ,margin-top:0px" valign="bottom" > 
                            <p style="font-family:Calibri;font-size:20pt; text-align:center;margin-bottom:0px;margin-top:0px" >
                                <a href="https://secure.truman.edu/alumni-s/contribution_new.asp" style="text-decoration:none;  color:black">
                                Make a Contribution 
                                <span style="color: #FA7042; font-weight:bolder">
                                TODAY!
                                </span>   
                                <span style="text-decoration: underline">
                                <br/>click here
                                </span>
                                </a>
                            </p>
                        </td> 
                        <td style="text-align:right;font-family:Calibri;"> 
                            <span style="font-size:14pt;font-weight:bold; padding-right:40px">
                            Truman State University 
                            </span> <br /> 
                            <span style="font-size:12pt">
                            Office of Advancement | McClain Hall 205&nbsp; <br />
                            &nbsp;100 E. Normal Avenue |Kirksville, MO 65301</span>
                        </td> 
                        <td style="font-family:Calibri;border-left-style: solid;border-left-width: 1px; margin-left:10px; text-align:left"> 
                            <span style="font-size:14pt;font-weight:bold;padding-left:50px">
                            <a href="www.truman.edu">
                            www.truman.edu
                            </a>
                            </span>
                            <br />
                            <span style="font-size:12pt; margin-left:5px;">
                            (660) 785-4133 or (800) 452-6678
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2" style="background-color:#2BA7D0; margin-right:0px; height:100%" id="outer" class="style3">
        <br />
        <br />
        </td>
    </tr>
</table>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:24:34.350

我为您建议以下主要 div 和 body 样式：

```
<body style="margin: 0; background-image: url('Pictures/InternationalAppeal-       
HomepageColor.jpg'); clip:auto; overflow:hidden;">
<div style="margin:0px auto">..... 
```

好的，对于内容：为什么你的桌子上有这么多的 Div？在大多数情况下，使用 table 就不需要使用 div，所以我建议你把 table 中的所有 div 都取出来。如果您希望某些东西表现得像图像等块元素，请设置 display: block 或 inline-block。至于所有尺寸：您定义了太多的宽度和高度。不要将宽度（以像素为单位）分配给 td 标签，图像的大小将完成它们的工作。您可以指定它们的尺寸。试试看，让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:45:56.877

***“由于某种原因，一些页面在 Firefox 和 Opera 中没有正确对齐”***

您可以通过调整这部分代码来快速解决该问题：

**改变这个：**

```
<body style="margin: 0; background-image: url('Pictures/InternationalAppeal-    HomepageColor.jpg'); width:100%; height:100%; clip:auto; overflow:hidden;">
<div style=" position:absolute; height:100%; margin:0px auto"> 
```

**至：**

```
<body style="margin: 0; background-image: url('Pictures/InternationalAppeal-    HomepageColor.jpg'); width:100%; height:100%; clip:auto; overflow:hidden;">
<div style=" position:relative; height:100%; margin:0px auto"> 
```

问题是，如果您`position:absolute;`将元素从正常的文档工作流程中删除，从而导致`margin: 0 auto;`无意义。

* * *

**我所做**的是将其更改`position:absolute;`为`position:relative;`因此受到浏览器的`margin:0 auto;`“尊重*” 。*

* * *

# 已编辑

要解决您评论中提到的问题，您只需将`html`高度设置为`100%;`.

**CSS**

html { 高度：100%; }

**注意：**这将告诉浏览器`document`有一个`height`of `100%`，从而导致`body`and`body>div` `height`延伸`100%`到`document`.

# scala - scala v2.9.2/OpenJDK 1.7 Class.getResourceAsStream 总是返回 null

> ID：10838512
> 
> 赞同：1
> 
> 时间：2012-05-31T17:39:25.633
> 
> 标签：scala

我正在像这样从命令行运行scala

scala -classpath 目录/my.jar

dir/my.jar 包含一个文件 /my-resource.xml。

在 scala REPL 中，我这样做

classOf[Object].getResourceAsStream("/my-resource.xml")

但我总是返回null。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:29:25.283

你问错了类加载器。加载的类加载器`java.lang.Object`可能是引导类加载器；他无权访问您的课程。

尝试这个：

```
classOf[MyOwnClass].getResourceAsStream(...) 
```

# ios - 搜索显示控制器 iOS 结果消失然后重新出现在单词之间

> ID：10838514
> 
> 赞同：0
> 
> 时间：2012-05-31T17:39:34.387
> 
> 标签：ios, nsstring, uisearchbar, uisearchdisplaycontroller

我正在搜索我的产品，如下所示。它工作正常，但是当在 2 个单词之间搜索时，结果会消失，然后在用户输入下一个单词的第一个字符后重新出现。即，如果我搜索“td pro”或“pro td”，结果就在那里。如果我像这样搜索 td(i have a result) td(space) I have NO result td p(I have a result) 只是为了添加我需要在 componentsSeperatedByString 中用空格分隔单词，因为用户可能不会搜索产品以任何特定的顺序。除非有更好的方法？

这是我的代码：

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope 
```

{

```
[self.filteredListContent removeAllObjects]; // First clear the filtered array.

for (XMLStringFile *new in rssOutputData_MutableArray)
{

    //Product scope
    if ([scope isEqualToString:@"Product"])
    {
        // Split into search text into separate "words"
        NSArray * searchComponents = [searchText componentsSeparatedByString: @" "];

        ;
        BOOL foundSearchText = YES;

        // Check each word to see if it was found
        for (NSString * searchComponent in searchComponents) {
            NSRange result = [new.xmlItem rangeOfString:searchComponent options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
            NSRange descriptionRange = [new.xmlDescription rangeOfString:searchComponent options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];

            foundSearchText &= (result.location != NSNotFound|| descriptionRange.location != NSNotFound);
        }

        // If all search words found, add to the array
        if (foundSearchText)
        {
            [self.filteredListContent addObject: new];
        }
    }

} 
```

}

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:54:40.040

我在有人帮助我解决的另一个堆栈问题的帮助下修复了它。

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope 
```

{

```
[self.filteredListContent removeAllObjects]; // First clear the filtered array.

for (XMLStringFile *new in rssOutputData_MutableArray)
{

    //Product scope
    if ([scope isEqualToString:@"Product"])
    {
        // Split into search text into separate "words"
        NSArray * searchComponents = [searchText componentsSeparatedByString: @" "];

        //Before searching trim off the whitespace
        searchText = [searchText stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]];

        BOOL foundSearchText = YES;

        // Check each word to see if it was found
        for (NSString * searchComponent in searchComponents) {
            NSRange result = [new.xmlItem rangeOfString:searchComponent options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
            NSRange descriptionRange = [new.xmlDescription rangeOfString:searchComponent options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];

            foundSearchText &= (result.location != NSNotFound|| descriptionRange.location != NSNotFound);
        }

        // If all search words found, add to the array
        if (foundSearchText)
        {
            [self.filteredListContent addObject: new];
        }
    }

} 
```

}

获胜线是：

//搜索前修剪掉空格 searchText = [searchText stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]];

# mysql - 通过显式排序避免死锁

> ID：10838517
> 
> 赞同：7
> 
> 时间：2012-05-31T17:39:55.573
> 
> 标签：mysql, sql, locking, innodb, pessimistic-locking

我想明确提供有关 MySql InnoDB 应如何获取行锁的顺序。如果这是可能的，不应该有任何死锁只是停止。（如果我们遵循约定。）

首先，数据库应按升序锁定表“模型”中的所有行。然后第二个表“颜色”中的所有行都应该按升序锁定。有没有办法控制数据库先锁定表“模型”然后“颜色”？

举个例子：

```
start transaction;
select *
from models m
join colors c on c.model_id = m.id
where c.id IN (101, 105, 106)
order by m.id asc, c.id asc
for update; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:02:41.070

虽然您可以通过 direct_join 来完成，但您也可以通过复制 select ...for update 来显式获取您想要的行上的锁。

```
CREATE TEMPORARY TABLE colorsToUpdate (
     colorID BIGINT(20) NOT NULL, 
     modelID BIGINT(20) NOT NULL
);

insert into colorsToUpdate ( colorID, modelID)
SELECT  id, model_id
FROM    colors
where id in (101, 105, 106);

#This will try to acquire lock on models
select m.* from models m
join colorsToUpdate c
on c.modelID = m.id
for UPDATE;

#this will try to get locks on models, and colors.
select m.*, c.*
from colorsToUpdate u
left join models m
on u.modelID = m.id
join colors c 
on u.colorID = c.ID
order by m.id asc, c.id asc
for update;

# do your data modification here.

drop table colorsToUpdate; 
```

由于锁定是在多个步骤中完成的，因此可以在设置临时表和完成对两个表的锁定之间修改表“颜色”中的条目。

这对您来说可能没问题（即，如果您只想修改现有条目，则在事务开始时）但如果不是您想要的，可能会导致细微的错误。

# regex - 需要使用 .htaccess 对 URL 中带有省略号 (...) 的页面进行 404

> ID：10838518
> 
> 赞同：1
> 
> 时间：2012-05-31T17:40:03.747
> 
> 标签：regex, .htaccess

我有一个 google 已编入索引的 url，看起来就像`http://example.com/someth…/`那些省略号一样。不，这不仅仅是 3 个时期。我正在尝试对 .htaccess 中的页面进行 404 处理，但我不知道如何匹配省略号。

我已经尝试过`RedirectMatch 404 ^/someth\x2026/`，但它不起作用。

有人知道如何使用正则表达式匹配省略号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:58:11.883

尝试这个

```
<FilesMatch /include(/?|/.*)>
    Order allow,deny
    Deny from all
</FilesMatch>

RedirectMatch 404 ^/include(/?|/.*)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:45:05.503

尝试使用 URL 编码（UTF-8 编码字符），例如：

```
^/?someth%E2%80%A6/ 
```

检查您的服务器日志以获取请求使用的确切 URL。

# javascript - Fancybox 加载，但不包含任何图像，即使我很确定图像在正确的位置

> ID：10838521
> 
> 赞同：0
> 
> 时间：2012-05-31T17:40:09.607
> 
> 标签：javascript, css, fancybox

我在使用 jQuery Fancybox 时遇到问题。它在本地工作得很好，但在上传到服务器时就不行了。Fancybox 本身似乎正在工作，因为当我单击图像时，它会弹出框，但它不包含任何图像。我检查了所有文件位置，据我所知，一切看起来都是正确的，但是我是程序员最远的东西。有问题的页面位于：

[http://www.houseimprovement.us/project.html](http://www.houseimprovement.us/project.html)

暂时在那里使用的图像是我打算在一切正常后替换的库存照片。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:42:23.780

你的代码是：

```
<img alt="" id="fancy_img" src="../../AGD/scripts/jquery.fancybox/http://www.houseimprovement.us/photos/project1_full.png"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:56:22.910

即使如此，您也“非常”确定路径不正确。

代替

```
<img alt="" id="fancy_img" src="../../AGD/scripts/jquery.fancybox/http://www.houseimprovement.us/photos/project1_full.png"> 
```

它应该是：

```
<img alt="" id="fancy_img" src="http://www.houseimprovement.us/photos/project1_full.png"> 
```

# sharepoint - 如何获取共享点列表保留策略说明

> ID：10838536
> 
> 赞同：2
> 
> 时间：2012-05-31T17:41:14.433
> 
> 标签：sharepoint

Microsoft.Office.RecordsManagement.InformationPolicy.ListPolicySettings API 提供了一种为列表设置保留策略的方法：

```
public void SetRetentionSchedule(string retentionXml, string description) 
```

有GetRetentionSchedule 方法，它返回retentionXml。如何找回描述？

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:19:49.443

这应该可以解决您的问题： [http ://social.technet.microsoft.com/Forums/en-CA/sharepointgeneralprevious/thread/3a7323f6-a3fd-4e2b-9c67-27a1fc18c1c4](http://social.technet.microsoft.com/Forums/en-CA/sharepointgeneralprevious/thread/3a7323f6-a3fd-4e2b-9c67-27a1fc18c1c4)

这是一个powershell版本：

```
function Get-RetentionScheduleDescriptionForFolder() {
    [CmdletBinding()]
    param (
        [Parameter(Mandatory=$true)]
        [ValidateNotNullOrEmpty()]
        [Microsoft.SharePoint.SPList]$List
    )
    $policyFile = $List.ParentWeb.GetFile(( Join-Uri list.RootFolder.Url "Forms/RetentionPolicy.Xml"));
    if ($null -ne $policyFile) {
        [xml]$xml = (New-Object System.Text.UTF8Encoding).GetString($policyFile.OpenBinary());
        $xml.RetentionItems.a.Desc;
    } 
}

function Join-Uri () {
    [CmdletBinding()]
    param (
        [Parameter(Mandatory=$true)]
        [ValidateNotNullOrEmpty()]
        [string]$Path,
        [Parameter(Mandatory=$true)]
        [ValidateNotNullOrEmpty()]
        [string]$ChildPath )
    $scheme = (([System.Uri]$Path).Scheme)+'://'
    if($scheme -ne '://') {
        $joinedPath = Join-Path -Path $Path.Replace($scheme, '') -ChildPath $ChildPath
        $scheme+($joinedPath.Replace('\', '/'));
    } else {
        $joinedPath = Join-Path -Path $Path -ChildPath $ChildPath
        $joinedPath.Replace('\', '/');
    }
} 
```

# c - MPI_Bcast 发送字符串

> ID：10838540
> 
> 赞同：1
> 
> 时间：2012-05-31T17:41:56.427
> 
> 标签：c, string, mpi

我遇到以下问题，我正在尝试发送 2 种类型的数据，1 个 int 和 2 个 char，这是我程序的一部分

```
#define Send(send_data, count, type, dest, tag) MPI_Send(send_data, count, type, dest, tag, GROUP)
#define Recv(recv_data, count, type, source, tag) MPI_Recv(recv_data, count, type, source, tag, GROUP, &status)
#define Recv(recv_data, count, type, source, tag) MPI_Recv(recv_data, count, type, source, tag, GROUP, &status)
#define Pack(data_in, count_in, type, data_out, count_out, pos) MPI_Pack(data_in, count_in, type, data_out, count_out, pos, GROUP)
#define Unpack(data_out, count_out, pos, data_in, count_in, type) MPI_Unpack(data_out, count_out, pos, data_in, count_in, type, GROUP)
#define Pack_size(count, type, size) MPI_Pack_size(count, type, GROUP, size)
#define MASTER 0

if( rank == 0 ){

    k1 = strlen(prog);
    k2 = strlen(gamesspath);

    for( i = 1; i < proc; i++ ){
      Send(&k1, 1, INT, i, 1);
      Send(&k2, 1, INT, i, 2);
    }
  }
  else{
    Recv(&k1, 1, INT, MASTER, 1);
    Recv(&k2, 1, INT, MASTER, 2);

    gamesspath = malloc( k2 * sizeof(char));
  }

  Pack_size(k1, CHAR, &size1);
  Pack_size(k2, CHAR, &size2);
  Pack_size(1, INT, &size3);

  buffer_size = size1 + size2 + size3;

  buffer = malloc( buffer_size * sizeof(char));

  if( rank == MASTER ){
    pos = 0;

    Pack(prog, k1, CHAR, buffer, buffer_size, &pos);
    Pack(gamesspath, k2, CHAR, buffer, buffer_size, &pos);
    Pack(&nindiv, 1, INT, buffer, buffer_size, &pos);
  }

  Bcast(buffer, buffer_size, PACKED);

  if( rank != MASTER ){
    pos = 0;

    Unpack(buffer, buffer_size, &pos, prog, k1, CHAR);
    Unpack(buffer, buffer_size, &pos, gamesspath, k2, CHAR);
    Unpack(buffer, buffer_size, &pos, &nindiv, 1, INT);
  }

  /*FIM DO ENVIO*/

  printf("PROG = %s, GAMESSPATH = %s, NINDIV = %d - rank %d\n", prog, gamesspath, nindiv, rank); 
```

但我得到以下结果

```
PROG = GAMESS, GAMESSPATH = /usr/local/gamess/rungms1, NINDIV = 10 - rank 1
PROG = GAMESS, GAMESSPATH = /usr/local/gamess/rungms, NINDIV = 10 - rank 0 
```

我的问题是 GAMESSPATH 排名 1，/usr/local/gamess/rungms1 排名 0，/usr/local/gamess/rungms

正如您在排名 1 的 GAMESS PATH 末尾注意到的那样，出现数字 1，但我找不到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:40:09.193

C 中的字符串以空字节结束。 `strlen`返回不含空字节的字符串长度。因此，当您使用 MPI 发送字符串时，不是在接收器处终止空字节，而是在末尾有一些垃圾数据。

一个简单的解决方法是将 1 返回的值加 1 `strlen`。如果长度值可能溢出，这确实有安全隐患。这可能不是科学代码中的问题，而是需要注意的事情。

另外，为什么需要打包缓冲区？看起来这些字符串在连续存储中。您也不需要发送长度：只需告诉接收方接收最大缓冲区大小，并在发送方使用实际长度。

# ios - 架构 i386 的未定义符号：“_OBJC_CLASS_$_MFMailComposeViewController”

> ID：10838543
> 
> 赞同：15
> 
> 时间：2012-05-31T17:41:59.053
> 
> 标签：ios, xcode

我训练使用 MFMailComposeViewController 为 iPhone 创建程序。但是编译的时候会报错：

```
Undefined symbols for architecture i386:
   "_OBJC_CLASS_ $ _MFMailComposeViewController", Referenced from:
       objc-class-ref in ViewController.o
ld: symbol (s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use-v to see invocation) 
```

请帮忙，这是什么？以及如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-31T17:48:09.757

您必须将 MessageUI.framework 框架添加到您的项目中。

这是你如何做到的：

*   在项目导航器侧栏中选择项目。
*   单击“构建阶段”选项卡。
*   展开“将二进制文件与库链接”部分。
*   单击“+”按钮。
*   从列表中选择“MessageUI.framework”。（您可以使用搜索框找到它）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T17:46:32.830

您可能没有必要的导入：

```
MessageUI.framework 
```

如何添加它们可以在这里找到[导入框架](https://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html#//apple_ref/doc/uid/TP40010155-CH17-SW1)

# mercurial - 有没有办法让 hg-git 的推送更快？

> ID：10838550
> 
> 赞同：2
> 
> 时间：2012-05-31T17:42:16.230
> 
> 标签：mercurial, hg-git

当使用*hg-git*推送到远程存储库时（使用 git+ssh://-protocol），一次提交需要 10 分钟（甚至更长时间），而对一个小文件进行一行更改。我正在执行的命令是：

```
hg push -B hg-experiments 
```

是否有一些更有效的推送命令，或者是否有一些本地 Mercurial 或远程 Git 存储库的配置可以帮助加快速度？（我在这里想到的是例如*包装*的大小等。）

*   操作系统：Windows 7
*   本地 Mercurial 版本：2.2.1
*   远程 Git 版本：1.7.3.5
*   hg-git 版本：从 2012 年 5 月 12 日星期六 03:33:19 -0500 开始的变更集 dfb2b7b5d586

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:48:15.290

可悲的是，我认为您无法真正做任何事情来提高性能。

在 dulwich（Hg-Git 用户的底层 Git 库）中有几个突出的性能问题，如果修复，可能会为您提高性能：

*   [#562676 推送效率：MissingObjectFinder 产生太多不必要的对象](https://bugs.launchpad.net/dulwich/+bug/562676)
*   [#562673 推送效率：包中的对象应写为增量](https://bugs.launchpad.net/dulwich/+bug/562673)

Hg-Git 本身也有一些潜在的性能改进工作：

*   [导出到 Git 的性能增强](https://groups.google.com/d/topic/hg-git/1oZzvKABE08/discussion)

# xfbml - 是否支持 XFBML 扩展？

> ID：10838556
> 
> 赞同：1
> 
> 时间：2012-05-31T17:42:32.720
> 
> 标签：xfbml, facebook-javascript-sdk

回到最初发布 JavaScript SDK 的时候，文档包括 XFBML 的扩展模型，特别是 FB.XFBML.registerTag 方法似乎是“公共的”。现在 Facebook 正在努力限制对 SDK 中内部函数的访问，很高兴知道是否仍然支持使用 FB.XFBML.registerTag 和 FB.subclass 等扩展函数。

更具体地说，这些的文档在哪里？

# oracle - 删除表（如果存在）

> ID：10838558
> 
> 赞同：5
> 
> 时间：2012-05-31T17:42:39.717
> 
> 标签：oracle, plsql

我有以下 PL/SQL：

```
declare
    i_cnt number;
begin
    select count(1) into i_cnt 
      from dba_tables 
     where table_name = upper('foo') 
       and owner = upper('bar'); 

if i_cnt > 0 then 
    drop table foo; -- <--- error this line
end if;
end; 
```

我从中得到这个错误。

```
ORA-06550: line 6, column 5:
PLS-00103: Encountered the symbol "DROP" when expecting one of the following:

   ( begin case declare exit for goto if loop mod null pragma
   raise return select update while with <an identifier>
   <a double-quoted delimited-identifier> <a bind variable> <<
   continue close current delete fetch lock insert open rollback
   savepoint set sql execute commit forall merge pipe purge 
```

如何在过程中删除表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T17:46:45.957

您不能直接从 PL/SQL 块执行 DDL 语句 - 您必须使用 EXECUTE IMMEDIATE 代替：

```
declare
  i_cnt number;
begin
  select count(1) into i_cnt 
  from dba_tables where table_name=upper('foo') and owner=upper('bar'); 
  if i_cnt > 0 then 
    execute immediate 'drop table foo'; 
  end if;
end; 
```

# javascript - 从 javascript 检测来自条形码阅读器（和 rfid）的输入

> ID：10838559
> 
> 赞同：0
> 
> 时间：2012-05-31T17:42:46.553
> 
> 标签：javascript, jquery

我有一个充当 HID 设备的条形码阅读器和 RFID 阅读器，我从它们那里得到输出作为键盘输出，在数据变为红色后，按下输入键。有没有办法传出读取这些数据，以便将其写入某些特定的输入字段？我正在考虑检测阅读速度...如何在 javascript 或 jquery 中实现？谢谢多里扬

# c# - 正则表达式中的匹配函数为空？

> ID：10838567
> 
> 赞同：1
> 
> 时间：2012-05-31T17:43:11.547
> 
> 标签：c#, regex, visual-studio-2010, null, match

我似乎在视觉工作室收到一条错误消息说

```
Value cannot be null.
Parameter name: input 
```

当我尝试做 `Match BirthYear2 = Regex.Match(kvpInd2.Value.birth.date, BirthPattern2);`

我想知道是否可以允许 Match 函数产生空值？基本上，我不介意如果`kvpInd2.Value.birth.date`不包含表达式

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T17:46:03.250

在您的情况下，[`Regex.Match`](http://msdn.microsoft.com/en-us/library/0z2heewz)不*产生*a `null`，而是将a作为其第一个参数*传递。*`null`

> 异常： ArgumentNullException -`input`或`pattern`为空。

如果您想让`null`输入有效，您可以按如下方式更改您的调用：

```
Match BirthYear2 = Regex.Match(kvpInd2.Value.birth.date ?? "", BirthPattern2); 
```

这将在is时返回不匹配（假设`BirthPattern2`不匹配空字符串），而不是抛出异常。`kvpInd2.Value.birth.date``null`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T17:46:17.380

这里最可能的问题`kvpInd2.Value.birth.date`是`null`. `Regex.Match`如果找不到模式，则不会抛出异常，但如果输入为空，则会抛出您看到的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:45:50.567

只需在匹配之前检查该值是否为空。完毕。或者，我错过了什么？另一种选择，我想你可以这样做：`kvpInd2.Value.birth.date ?? ""`. 这会将 null 视为一个空字符串，（希望）您的模式将不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T17:48:36.323

在访问所有该属性链之前，您需要检查链中是否没有对象为空。

```
if(kvpInd2 != null && kvpInd2.Value != null && kvpInd2.Value.birth != null && kvpInd2.Value.birth.date!= null) {
    Match BirthYear2 = Regex.Match(kvpInd2.Value.birth.date, BirthPattern2);
    ...
} 
```

# wpf - Infragistics XamDataGrid WPF MVVM SelectionChanged

> ID：10838573
> 
> 赞同：1
> 
> 时间：2012-05-31T17:43:57.143
> 
> 标签：wpf, mvvm, infragistics, selectionchanged, xamdatagrid

我们正在 WPF 应用程序中实现 MVVM 架构。我们想使用 Infragistics XamDataGrid，但是对于在视图模型层上实现选择更改事件有点迷失。

任何帮助将不胜感激。

我们迫切需要一个解决方案！！！

Anshuman Chakravarty Humana Inc.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-21T14:45:18.143

对于 Infragistic v11.2，XamlDataGrid 具有名为**ActiveDataItem**的属性，表示绑定到行的当前数据项。

您可以做的是在 ViewModel 中创建属性并将其绑定到 XamlDataGrid 的 ActiveDataItem，如下所示，并观察如下更改。

```
<igDataPresenter:XamDataGrid ActiveDataItem="{Binding ActiveItem, Mode=TwoWay}" > 
```

**我的场景**：我想在双击单个行时对绑定到单个网格行的 dataItem 触发命令，下面的 xaml 代码对我有用，

```
 <igDataPresenter:XamDataGrid x:Name="DemoGrid" 
                    DataSource="{Binding Path=Items, Mode=OneWay}"
        >
      <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseDoubleClick">
          <i:InvokeCommandAction Command="{Binding RelativeSource={RelativeSource AncestorType=igDataPresenter:XamDataGrid}, Path=ActiveDataItem.ViewCommand}"></i:InvokeCommandAction>

        </i:EventTrigger>
      </i:Interaction.Triggers> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:01:14.377

这是 xamdatagrid 的其他一些事件。

```
SelectedItemsChanged
SelectedItemsChanging

RecordActivating
RecordActivated 
```

这些可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T19:20:44.117

我已经解决了上述问题。我以一种非常简单的方式做到了。

1.  将 XamGrid 的 ActiveCell 属性绑定到 VM 中的对象类型属性。
2.  在属性的setter中，调用方法并传递对象。
3.  在方法内部，将对象转换为 Infragictics.Windows.Cell 类型变量。
4.  使用 Infragistics.Windows.Cell 对象的 Record.Index 查找选定索引。
5.  使用该索引，查找从 xamdatagrid 绑定到的原始集合/数据源中选择的行。

*简单但有效！！！*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T08:02:25.580

如果您希望能够使用 MVVM 绑定所选项目，那么我建议使用行为来完成此操作。Devin Rader 写了[一篇博客文章](http://blogs.infragistics.com/blogs/devin_rader/archive/2011/06/01/using-behaviors-to-synchronize-selected-items-of-infragistics-silverlight-controls-to-a-viewmodel.aspx)，其中介绍了在视图模型和用于选择的 UI 之间同步值，您可以使用类似的东西来了解视图模型中的选择何时发生变化。

如果您对此事有任何疑问，请告诉我。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-31T17:49:10.243

我从未使用过您所询问的数据网格，但您可以打赌它与其他所有内容一样工作。

在您将视图绑定到的 ViewModel 中，将有一个名为 SelectedItem 的属性或类似的东西。

```
public object SelectedItem
{
    get { return (object)GetValue(SelectedItemProperty); }
    set { SetValue(SelectedItemProperty, value); }
}

// Using a DependencyProperty as the backing store for SelectedItem.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty SelectedItemProperty =
    DependencyProperty.Register("SelectedItem", typeof(object), typeof(ownerclass), new UIPropertyMetadata(0)); 
```

在 xaml 中，您可能可以将 grids Selected 属性绑定到该依赖项属性。

```
<XamDataGrid ItemsSource={Binding Items} SelectedItem={Binding SelectedItem, UpdateSourceTrigger=PropertyChanged} /> 
```

# c# - 使用 OLEDB 12.0 时，C# INSERT 插入 Access DB 备注类型字段被截断

> ID：10838574
> 
> 赞同：0
> 
> 时间：2012-05-31T17:44:06.647
> 
> 标签：c#, ms-access

这让我很沮丧，我还没有找到有效的答案或解决方案。有很多帖子和回复，但没有一个能够真正解释有效的解决方案。

Access 易受攻击的配置表包括：

```
Field Name        Data Type
cveid             Test
logicaltest       Memo 
```

一个完全空的易受攻击的配置表填充了完全唯一的数据的相关代码位：

```
mycon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + accessDb + ";Persist Security Info=False");
mycon.Open();

...

insertCommand = new OleDbCommand("INSERT INTO vulnerableconfiguration (cveid, logicaltest) VALUES (@cveid, @logicaltest);", mycon);
insertCommand.Parameters.Add("@cveid", OleDbType.Char).Value = cve_id);
insertCommand.Parameters.Add("@logicaltest", OleDbType.LongWChar).Value = vulnerable_configuration);
insertCommand.ExecuteNonQuery(); 
```

logicaltest 字段值被截断，我不知道为什么。连第一条记录也从 780 个字符截断到 370 个字符！所有备忘录字段都应符合备忘录大小限制。没有错误。我已经对其进行了调试，insertCommand 参数中设置的值具有完整值，但是在执行命令时，Access DB 具有截断值。

如果有人有任何想法，那对遇到这个问题的每个人来说都会很棒。

请不要让我参考[http://allenbrowne.com/ser-63.html](http://allenbrowne.com/ser-63.html)，这些案例都没有处理这种直接的 Access 插入案例。此外，Access 2007/2010 没有备忘录数据类型的最大长度设置，它应该会增长。

为什么我使用 Access？这是用于 Access DB 的导入工具，用于查找目的。其他人可以编写一些简单的查询和报告以从中获取他们想要的信息。不被用作后端，而且 MSSQL 对于这个目的来说太重了。

谢谢！

**更新**

为备忘录字段参数切换到 OleDbType.LongWChar 但填充 Access 记录后我仍然会得到相同的截断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:51:35.027

[根据http://support.microsoft.com/kb/320435](http://support.microsoft.com/kb/320435)，您使用了错误的 OleDbType

> insertCommand.Parameters.Add("@logicaltest", OleDbType.Char).Value = exploit_configuration);

应该

> insertCommand.Parameters.Add("@logicaltest", OleDbType.LongVarWChar).Value = exploit_configuration);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:54:19.600

您错误地为 Memo 字段声明 OleDbType.Char

查看此链接也会非常有帮助 [OleDbType DataTypes](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbtype.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T17:53:08.243

由于您对备注字段使用 OleDbType.Char 数据类型，因此将值截断是正常的。对于备注字段，使用 OleDbType.LongVarWChar 作为数据类型。如果您对其他数据类型有更多问题，请查看[此页面](http://support.microsoft.com/kb/320435)，它提供了访问 OleDb 的所有等价列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:46:48.137

看看这个链接： [http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/4ee6d674-5942-494e-8d7b-9c6f377d0ab6/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/4ee6d674-5942-494e-8d7b-9c6f377d0ab6/)

我通过将字段的文本格式更改为“富文本”解决了这个问题。

# actionscript-3 - 对象重叠逻辑

> ID：10838578
> 
> 赞同：-1
> 
> 时间：2012-05-31T17:44:33.843
> 
> 标签：actionscript-3

下面是添加到舞台的对象的代码，然后检查新添加的对象是否与以前的对象重叠。问题是当玩家移动时，由于不断生成随机对象，舞台上的对象会随机移动。这在进入帧计时器中调用

```
if(onStageCount < 15){
        var Square:MovieClip;
        Square = new mcSquare();
        Square.x = Math.random() * 1000 + ((Math.abs(_boundaries.x) + (stage.stageWidth)));
        Square.y = Math.random() * stage.stageHeight/2.5 + (stage.stageHeight/2.5);
        ObjectArray.push(Square);
        onStageCount += 1;
    }
    for (var i in ObjectArray){
        for (var a in ObjectArray){
            if(ObjectArray[i].hitTestObject(ObjectArray[a]) && a != i){ChildrenColliding = true;}
            while(ChildrenColliding){
            ObjectArray[i].x += (ObjectArray[a].width + 75);
            ObjectArray[i].y += (ObjectArray[a].height + 40);
            ChildrenColliding = false;
                if(ObjectArray[a].hitTestObject(ObjectArray[i]) && a != i){ChildrenColliding = true;}
            }
        }
        _boundaries.addChild(ObjectArray[i]);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:35:27.367

每次调用该代码都会生成一个平台。如果您希望同时出现多个（即在单个计时器事件中），您可以`if`将开头的 更改为`while`. 这将使它生成平台，直到每次调用该函数时都有 15 个平台。

每当放置平台时，您都不需要检查所有可能的碰撞 - 已经存在的碰撞很好。您可以只使用一个`for ... in`循环，测试每个对象`Square`并`Square`在必要时移动。这应该可以防止对象在平台生成期间“随机移动”。尽管最好以与第一次相同的方式重新生成位置，而不是将它们偏移特定数量。

要在屏幕上生成一些平台，最简单的方法是在第一次生成平台时使用不同范围的 x 值。您也可以像往常一样生成它们，并在游戏开始时将它们向前移动一些量。不过，有很多方法，如果不了解整个游戏的运作方式，很难说哪种方法最好。

# .net - 组合框（下拉菜单）在选项卡上跳过，但在班次选项卡上工作

> ID：10838579
> 
> 赞同：0
> 
> 时间：2012-05-31T17:44:36.767
> 
> 标签：.net, winforms, drop-down-menu, combobox, tabstop

在获胜表格中，我有一个下拉列表；无论我做什么，标签顺序都不起作用。tabIndex 是正确的并且 tabstop 设置为 true ；控件总是跳过这个下拉列表，但是在执行 shift tab 时它可以工作。
所有其他控件都按 Tab 键顺序排列，有什么想法吗？
![在此处输入图像描述](../Images/4b503cda4abd179a4fc838290d165086.png)

# javascript - 当鼠标悬停在线条上时，flotr 显示数据系列名称

> ID：10838581
> 
> 赞同：7
> 
> 时间：2012-05-31T17:44:51.993
> 
> 标签：javascript, flot, flotr

我正在使用 Flotr 绘制 90 个数据集。平均而言，90 组数据中只有两组实际上会产生可绘制的线。其他 88 个左右的 y 值将非常低，以至于它们几乎不会在 x 轴上方达到峰值。这是一个例子......

![在此处输入图像描述](../Images/18a1229fd9e755f060c4f37bf80990b0.png)

我的问题是我不知道这两行是什么数据集。我可以制作一个图例，但这个图例会很大，因为大约有 90 个数据集。所以我想知道当鼠标悬停在该数据集的图形数据上时，flotr 是否具有标记这些数据集的功能。有这样的功能吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T18:45:09.810

好的，我找到了我的答案。我看到了这个例子...

[http://phenxdesign.net/projects/flotr/examples/prototype/mouse-tracking.html](http://phenxdesign.net/projects/flotr/examples/prototype/mouse-tracking.html)

这个使用跟踪支持，但它只显示 x 和 y 值。我看到了这条线......

```
trackFormatter: function(obj){ return 'x = ' + obj.x +', y = ' + obj.y; } 
```

并将其更改为...

```
trackFormatter: function(obj){ return 'x = ' + obj.x +', y = ' + obj.y  +', Data Series = ' + obj.series.label; } 
```

然后我为每个数据集指定了一个数据标签，并将它们传递给关联数组中的 Flotr.draw。我通过改变这个来做到这一点......

```
[dataset1, dataset2] 
```

对这个...

```
[{data:dataset1,label:'label_for_dataset1'}, {data:dataset2,label:'label_for_dataset2'}] 
```

以下是我所做更改的示例。现在鼠标悬停显示 x 和 y 值以及您输入的任何数据标签。

**前：**

```
var dataset1 = [[100, 4.09453e-29], [99, 1.41672e-28],...... ];
var dataset2 = [[100, 9.48582e-19], [99, 1.88215e-18],...... ];

var f = Flotr.draw(
        $('container'), 
        [dataset1, dataset2],
        {
            mouse:{
                track: true,
                lineColor: 'purple',
                relative: true,
                position: 'ne',
                sensibility: 1, // => The smaller this value, the more precise you've to point
                trackDecimals: 2,
                trackFormatter: function(obj){ return 'x = ' + obj.x +', y = ' + obj.y; }
            },
            crosshair:{
                mode: 'xy'
            }
        }
    ); 
```

**后：**

```
var dataset1 = [[100, 4.09453e-29], [99, 1.41672e-28],...... ];
var dataset2 = [[100, 9.48582e-19], [99, 1.88215e-18],...... ];

var f = Flotr.draw(
        $('container'), 
        [{data:dataset1,label:'enter_label_for_dataset1_here'}, {data:dataset2,label:'enter_label_for_dataset2_here'}],
        {
            mouse:{
                track: true,
                lineColor: 'purple',
                relative: true,
                position: 'ne',
                sensibility: 1, // => The smaller this value, the more precise you've to point
                trackDecimals: 2,
                trackFormatter: function(obj){ return 'x = ' + obj.x +', y = ' + obj.y  +', Data Series = ' + obj.series.label; }
            },
            crosshair:{
                mode: 'xy'
            }
        }
    ); 
```

# javascript - IE 未将 CSS 应用于 JS，可在 Chrome/FF 中使用

> ID：10838586
> 
> 赞同：0
> 
> 时间：2012-05-31T17:45:05.643
> 
> 标签：javascript, css, internet-explorer, blogger

对于基于 Blogger[的网站](http://blog.onlinewagerreview.com/)，我使用了一个名为“最近的文章”的小部件。这些样式适用于 Firefox 和 Chrome，但不适用于 IE。

我是 Web 开发新手，不懂 JS。

## 未应用特定 CSS（文章标题）：

```
.bp_item_title {
    margin: 10px 0;
    padding: 0;
    font-family: Tahoma,Geneva,sans-serif;
    font-size: 14px;
} 
```

我在 IE 上的 firebug 中对此进行了测试，看起来 CSS 样式没有附加到元素上。为什么 IE 不会将这些 CSS 样式传递给元素/小部件？

## HTML 片段

```
<!-- ... -->
<div class="widget-content">
<div id="bp_recent"><div class="bp_item_title"><a href="http://blog.onlinewagerreview.com/2012/05/miami-heat-vs-boston-celtics-game-2.html?utm_source=BP_recent&amp;utm-medium=gadget&amp;utm_campaign=bp_recent" target="_top" title="Miami Heat vs Boston Celtics, Game 2 Free Pick, Prediction">Miami Heat vs Boston Celtics, Game 2 Free Pick, Prediction</a></div> 
```

```
 if (showThumbs == true && thumbUrl != "") {
        myImage = document.createElement('img');
        myImage.setAttribute("src", thumbUrl);
        if(imgFloat!="none")
        {
        float_clear=true;
        myImage.style.cssFloat=imgFloat;
        myImage.style.styleFloat=imgFloat;
        }
      try{if(myMargin!=0)myImage.style.margin = myMargin+"px";} catch(error){}
        myImage.setAttribute("alt", postTitleOriginal);
        myImage.setAttribute("width", imgDim);
        myImage.setAttribute("height", imgDim);
        myLink = document.createElement('a');
        myLink.setAttribute("href", postUrl+"?utm_source=bp_recent&utm-medium=gadget&utm_campaign=bp_recent");
        myLink.setAttribute("target", "_top");
        myLink.setAttribute("title", postTitleOriginal);
        myLink.appendChild(myImage);

        myDiv = document.createElement('div');
        myDiv.setAttribute("class", "bp_item_thumb");
        myDiv.appendChild(myLink);
        main.appendChild(myDiv);
    } 
```

[资源](http://onlinewagerreview.com/js/recentposts.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:06:32.170

`setAttribute()`在 IE 中不适用于该`style`属性。要支持 IE，请使用`element.className = 'newClass';`. 使用检查`class`属性是否已设置为非空值并在设置时包含这些值的函数也是一个好主意。例如：

```
// $el is the element to add $class to
// $class is the string value to append to `class` attribute
function addClass($el, $class) {
 if(!$el){
  return false;
 }
    $c = $el.className;
    if (($c === null) || ($c === '')) {
        $el.className = $class;
    } else if ($c.indexOf($class) === -1) {
        $el.className = $c + ' ' + $class;
    }
}

// $el is the element to remove $class from
// $class is the string value to remove from `class` attribute
function removeClass($el, $class) {
 if(!$el){
  return false;
 }
    $c = $el.className;
    if (($c !== null) && ($c !== '') && ($c.indexOf($class) !== -1)) {
        if ($c.indexOf($class) === 0) $el.className = $c.replace($class, '');
                else $el.className = $c.replace(' ' + $class, ''); 
    }
} 
```

或者简单地将`class`属性设置为新值（而不是附加新类或删除单个类）：

```
myDiv.className = "bp_item_thumb"; 
```

...代替...

```
myDiv.setAttribute("class", "bp_item_thumb"); 
```

# php - php SoapClient：参数未显示在请求中

> ID：10838591
> 
> 赞同：0
> 
> 时间：2012-05-31T17:45:23.317
> 
> 标签：php, .net, xml, web-services, soap

为什么我的参数 p_oRSMasterFields 不会出现在请求中？这个请求是从soap服务器发回的，是不是服务器拒绝了那个特定参数的数据，只是把它清空了？

```
$client = new SoapClient($wsdl, $options);     

$client->UpdateCustMaster(array('p_iCompanyID' => 100, 
                               'p_lAccountNum' => 18087,   
                               'p_sSysUser' => 'WebTest',     
                               'p_oRSMasterFields' => 'THIS IS A TEST',
                               'p_lErrorCode' => 0
                                ));  

echo "REQUEST:\n" . $client->__getLastRequest() . "\n";  

REQUEST:

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.acme.com/">
<SOAP-ENV:Body>
    <ns1:UpdateCustMaster>
        <ns1:p_iCompanyID>100</ns1:p_iCompanyID>
        <ns1:p_lAccountNum>18087</ns1:p_lAccountNum>
        <ns1:p_sSysUser>WebTest</ns1:p_sSysUser>
        <ns1:p_oRSMasterFields/>
        <ns1:p_lErrorCode>0</ns1:p_lErrorCode>
    </ns1:UpdateCustMaster>
</SOAP-ENV:Body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:31:50.760

您的 WSDL 与该项目类似：

```
<s:complexType>
  <s:sequence>
    <s:any namespace="acme.com/EnergyAPI/CustomerMaint/DSCustomerFields.xsd"/>
  </s:sequence>
</s:complexType> 
```

因此，您需要在其中至少提供一个`any`元素：

```
$client->UpdateCustMaster(array('p_iCompanyID' => 100, 
                               'p_lAccountNum' => 18087,   
                               'p_sSysUser' => 'WebTest',     
                               'p_oRSMasterFields' => array('any' => 'THIS IS A TEST'),
                                                      ################################
                               'p_lErrorCode' => 0
                                )); 
```

幕后发生的事情是 PHP`SoapClient`类将您以数组形式传递的信息映射到 WSDL 中指定的类型。由于您原来的没有任何`any`元素/成员，因此它是空的。

# java - Java 图形元素在屏幕上的确切位置？

> ID：10838593
> 
> 赞同：3
> 
> 时间：2012-05-31T17:45:28.053
> 
> 标签：java, user-interface, screen, label, awt

我有个问题。在 Java 中，如何获取图形元素的屏幕位置，比如说一个标签？如果我使用 getBounds，我得到的是容器内的相对位置，而不是屏幕的确切位置。如果有人可以在这里帮助我，我将不胜感激……谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:47:26.947

尝试使用`Component.getLocationOnScreen()`.

# python - Python 类--超级变量

> ID：10838596
> 
> 赞同：8
> 
> 时间：2012-05-31T17:45:47.320
> 
> 标签：python

下面的代码由于某种原因给了我一个错误，有人可以告诉我会是什么问题..

基本上，我创建了 2 个类 Point & Circle..The circle 试图继承 Point 类。

```
Code:

class Point():

    x = 0.0
    y = 0.0

    def __init__(self, x, y):
        self.x = x
        self.y = y
        print("Point constructor")

    def ToString(self):
        return "{X:" + str(self.x) + ",Y:" + str(self.y) + "}"

class Circle(Point):
    radius = 0.0

    def __init__(self, x, y, radius):
        super(Point,self).__init__(x,y)
        self.radius = radius
        print("Circle constructor")

    def ToString(self):
        return super().ToString() + \
               ",{RADIUS=" + str(self.radius) + "}"

if __name__=='__main__':
        newpoint = Point(10,20)
        newcircle = Circle(10,20,0) 
```

错误：

```
C:\Python27>python Point.py
Point constructor
Traceback (most recent call last):
  File "Point.py", line 29, in <module>
    newcircle = Circle(10,20,0)
  File "Point.py", line 18, in __init__
    super().__init__(x,y)
TypeError: super() takes at least 1 argument (0 given) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T17:54:03.003

看起来您可能已经修复了原始错误，这是由`super().__init__(x,y)`错误消息指示引起的，尽管您的修复有点不正确，而不是`super(Point, self)`来自`Circle`您应该使用的类`super(Circle, self)`。

请注意，在's方法中还有另一个地方调用`super()`不正确：`Circle``ToString()`

```
 return super().ToString() + \
               ",{RADIUS=" + str(self.radius) + "}" 
```

这是 Python 3 上的有效代码，但在 Python 2 上`super()`需要参数，将其重写如下：

```
 return super(Circle, self).ToString() + \
               ",{RADIUS=" + str(self.radius) + "}" 
```

我还建议摆脱续行，请参阅[PEP 8 的最大行长部分以](http://www.python.org/dev/peps/pep-0008/#maximum-line-length)了解修复此问题的推荐方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T17:57:59.627

`super(..)`只接受新式课程。要修复它，请从`object`. 像这样：

```
class Point(object): 
```

使用 super(..) 的正确方法是：

```
super(Circle,self).__init__(x,y) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T13:22:24.257

```
class Point(object):

x = 0.0
y = 0.0

def __init__(self, x, y):
    self.x = x
    self.y = y
    print("Point constructor")

def ToString(self):
    return "{X:" + str(self.x) + ",Y:" + str(self.y) + "}"

class Circle(Point,object):
radius = 0.0

def __init__(self, x, y, radius):
    super(Circle,self).__init__(x,y)
    self.radius = radius
    print("Circle constructor")

def ToString(self):
    return super(Circle, self).ToString() + \
           ",{RADIUS=" + str(self.radius) + "}"

if __name__=='__main__':     
    newpoint = Point(10,20)    
    newcircle = Circle(10,20,0) 
```

# ios - OpenAllWhitelistURLsInWebView

> ID：10838598
> 
> 赞同：2
> 
> 时间：2012-05-31T17:45:53.993
> 
> 标签：ios, xcode, cordova

为了允许 Vimeo 视频嵌入，我有“OpenAllWhitelistURLsInWebView”=“yes”。但既然我这样做了，它只会打开列入白名单的项目，并显然在 webview 中打开它们。我需要在 safari 浏览器中打开所有非白名单项目，而不是 webview。关于如何做到这一点的任何想法？

科尔多瓦 1.7 | XCode 4.3.2 | jQuery 1.7.1 | jQueryMobile 1.1.0 | IOS 5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:39:03.173

我不知道与 Cordovoa 的确切区别，但我正在使用 PG 1.4.1，并且我的**PhoneGap.plist中有此设置**

![在此处输入图像描述](../Images/44602a722e3ed813719098f76af5bdde.png)

这在我的**AppDelegate.m**

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];

    if([[url absoluteString] rangeOfString:@"vimeo.com"].length > 0 || [[url scheme] isEqualToString:@"file"]){
        return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
    }

    [[UIApplication sharedApplication] openURL:url];
    return NO;
} 
```

这是我由 PG 打开的非常简单的**index.html**

```
<body>
   <a href="http://www.vimeo.com">Vimeo</a>
   <a href="http://www.google.com">Google</a>
</body> 
```

vimeo 链接在 webview 中打开，google 链接在 Safari 中打开。

**更新**科尔多瓦 1.7

显然，在最新版本的 PhoneGap/Cordova（我认为是 1.6.1）中没有调用 shouldSTartLoadWithRequest 函数。所以，现在如果你想在 Safari 中打开一个链接，你需要将`target`a 标签的属性设置为`_blank`. 由于您并不总是可以访问代码，因此这里有一个脚本可以提供帮助。

```
<head>
    <script type="text/javascript" src="cordova-1.7.0.js"></script>
    <script>  
        document.onclick = checkLink;
        function checkLink(e) {
            var url = e.target.href;
            if(url.indexOf('vimeo.com') == -1){
                window.open(url,'_blank');
            }
        }
    </script>
</head>
<body>
    <a href="http://www.vimeo.com">Vimeo</a>
    <a href="http://www.google.com" target="_blank">Google</a>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:47:11.750

所以我使用的是 Cordova 1.9。稍作调试后，我看到函数 shouldStartLoadWithRequest 现在应该在 MainViewController.m 文件中实现，而不是在 AppDelegate.m 文件中实现。这就是它永远不会被触发的原因。

从 PhoneGap 1.4.1 更新到 Cordova 1.9 后发现了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:38:59.900

它应该已经这样做了，但既然你已经在这里发布了，我猜它没有。

您可以做的是覆盖`shouldStartLoadWithRequest`AppDelegate.m 文件中的方法。您可以添加要检查的条件（例如包含 vimeo 的 URL）并返回 true，否则返回 false。

```
 if ( [request.URL.absoluteString rangeOfString:@"vimeo.com"].location != NSNotFound) {
            return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
}

    //open in Safari
    [[UIApplication sharedApplication]openURL:request.URL];
    return NO; 
```

# android - 为什么我的应用无法在 android 市场上用于我的设备？

> ID：10838604
> 
> 赞同：2
> 
> 时间：2012-05-31T17:46:13.817
> 
> 标签：android, filter, tablet, google-play

我迷路了。
我有一台装有 Android 2.3.1（仅限 wifi，1024*768）的中国平板电脑（[CubeU10GT-S](http://www.chinatabletspcs.com/Cube-U10GT-8-Android-2-3-Tablet-PC-Capacitive-RK2918-Cortex-A8-1-2GHz-512MB-DDR3-2-Cameras-Flash10-1-aPad.html)）。我开发了一个应用程序，该应用程序也在此设备上进行了测试。但是上传到市场上它与我的平板电脑不兼容（并且可能与很多类似的平板电脑兼容）......
我要求最少的权限/功能集 - 谁能告诉我为什么 appstore 会过滤掉我的平板电脑？

这是清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="indigowind.spyprofile"
      android:versionCode="4"
      android:versionName="1.3">

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="9"/>

    <uses-permission android:name="android.permission.INTERNET" />

    <uses-feature android:name="android.hardware.screen.landscape" android:required="false"/>
    <uses-feature android:name="android.hardware.touchscreen" android:required="true"/>

    <application 
        android:icon="@drawable/icon" 
        android:label="@string/app_name"
        android:debuggable="false">
        <activity 
            android:name="SpyProfileActivity"
            android:label="@string/app_name"
            android:screenOrientation="landscape">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity            
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:name="com.google.ads.AdActivity" 
        />
    </application>

    <supports-screens 
        android:largeScreens="true" 
        android:normalScreens="true" 
        android:smallScreens="true"
        android:resizeable="true"
        android:anyDensity="true"  />
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:04:36.403

我应该关闭复制保护。当我这样做时（几个小时过去了），我的应用程序与我的 2 台设备兼容（第 3 台的 sdk 太旧了）

# android - 如何在Android中停止自动刷新WebView

> ID：10838605
> 
> 赞同：0
> 
> 时间：2012-05-31T17:46:13.897
> 
> 标签：android, webview

我在我的应用程序中使用 WebView 来加载远程 url。它能够成功加载远程 url。但是每当我尝试在后台和前台之间切换我的应用程序时，有时我的当前包含 WebView 的活动正在刷新。我如何避免当我从后台切换到前台时刷新我的 WebView。我根本没有在我的 Activity 中使用 onResume()。May 应用程序版本是 2.2。我在 AndroidManifest.xml 文件中的 Activity 标记如下。

```
 <activity 
        android:name=".Main"
        android:screenOrientation="portrait" android:configchanges="orientation|keyboardHidden|locale|uiMode|mcc|mnc|touchscreen|keyboard">
    </activity> 
```

谢谢&问候，文卡特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:12:05.583

尝试覆盖 WebViewClient，例如：

```
 webView.setWebViewClient(new WebViewClient(){
    private boolean alreadyLoaded = false;  
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
                if (alreadyLoaded)
                   return;
                alreadyLoaded = true;
                super.onPageStarted(view,url,favicon);
        }

        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            super.onReceivedError(view, errorCode, description, failingUrl);

        }

        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T14:45:51.867

将 android:launchMode="singleTask" 添加到 AndroidManifest.xml 中的主要活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T09:33:49.500

您必须保存 webview 的状态并在`onCreate`when中恢复它`savedInstanceState != null`。webview 有一个功能`saveState(..)`，您可以使用它来保存`onSaveInstanceState(..)`Activity 中的状态。

在您的活动中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    if(savedInstanceState != null){
        mWebView.restoreState(savedInstanceState);
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    mWebView.saveState(outState);
} 
```

# asp.net-mvc - 从客户端检测到潜在危险的 Request.Form 值

> ID：10838606
> 
> 赞同：7
> 
> 时间：2012-05-31T17:46:14.207
> 
> 标签：asp.net-mvc, exception, httpwebrequest, system.web

我正在运行 ASP.Net MVC 应用程序并面临以下错误。由于我是 ASP.Net 的新手，有人可以帮助我了解它的含义以及如何解决它吗？

我尝试用谷歌搜索来理解它，但发现相同错误的不同答案让我更加困惑。

> Global.asax 中捕获的异常：System.Web.HttpRequestValidationException (0x80004005)：从客户端检测到潜在危险的 Request.Form 值 (ctl00$MainContent$WarningCtl1$TXTWarningText="
> 
> 这是警告..."). 在 System.Web.HttpRequest.ValidateNameValueCollection(NameValueCollection nvc, RequestValidationSource requestCollection) 在 System.Web.HttpRequest 的 System.Web.HttpRequest.ValidateString(String value, String collectionKey, RequestValidationSource requestCollection)。 get_Form() 在 System.Web.HttpRequest.get_HasForm() 在 System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) 在 System.Web.UI.Page.DeterminePostBackMode() 在 System.Web.UI.Page.ProcessRequestMain(布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.ProcessRequest(布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.ProcessRequest() 在 System.Web.UI.Page。ProcessRequest(HttpContext context) at ASP.app_config_appttypes_groupappttypes_aspx.ProcessRequest(HttpContext context) at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

请建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T18:30:03.687

您需要添加`ValidateInputAttribute`到您的控制器（将其应用于该控制器的所有操作方法，所以要小心）：

```
[ValidateInput (false)]
public class MyController : Controller { ... } 
```

或您的操作方法：

```
public class MyOtherController : Controller
{
    [ValidateInput (false)]
    public ActionResult MyActionMethod (MyObjectThatTakesInHtml myObject)
    { ... }
} 
```

**编辑**

正如@dotjoe 指出的那样，我忘了提及，您还可以访问模型中某个属性的`AllowHtmlAttribute`（在 中找到`System.Web.Mvc`）。

```
public class MyObjectThatTakesInHtml
{
    [AllowHtml]
    public string MyHtmlProperty { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-01T10:05:39.047

*   **在客户端级别编码并在服务器级别对其进行解码**

脚步

1.使用jquery submit 方法发布表单。

在 jquery 按钮中单击要发布到服务器的事件方法编码字段。例子

```
$("#field").val(encodeURIComponent($("#field").val())) $("#formid").submit(); 
```

在控制器级别访问所有表单 id 值使用

```
HttpUtility.UrlDecode(Request["fieldid"]) 
```

确保控制器方法没有参数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-28T16:05:23.957

MVC

为动作添加属性 [ValidateInput(false)]

并确认 system.web 中的 web.config 设置

# azure-storage - 将 $top 和 $filter 与 Azure 表存储相结合

> ID：10838610
> 
> 赞同：0
> 
> 时间：2012-05-31T17:46:20.510
> 
> 标签：azure-storage

我对 Azure 表存储有一个查询，例如

```
http://ourstoragekey.table.core.windows.net/AZCUST()?$filter=PartitionKey%20eq%20'AZSAMPLES' 
```

对于某些报告，我希望能够在生成实际报告之前向用户显示一小部分。

基本上，我想做的是结合 $top 和 $filter 所以我有一个查询

```
http://ourstoragekey.table.core.windows.net/AZCUST()?$top=3&$filter=PartitionKey%20eq%20'AZSAMPLES' 
```

这有效并且只返回 3 个项目，但是我在第一次调用时得到了一个继续键，这是有道理的，但是每个后续调用都会返回相同的继续键，所以我陷入了无限循环。

我想我可以检查以前的密钥是否与当前的密钥相同并退出，但我一直认为密钥不是我的，我不能操纵它或期望它有任何一致性. 它属于 API，我要做的是传递它。

这甚至可能吗，还是我应该抓住前 x 件回来的物品并扔掉我没有使用的潜在 997 件物品？

谢谢。

亚伦

# facebook - Facebook - 在业务页面上使用图形 api 发布 - 但每个人都可以看到它 - 希望只有喜欢的用户才能看到它

> ID：10838611
> 
> 赞同：0
> 
> 时间：2012-05-31T17:46:22.813
> 
> 标签：facebook, api, post, privacy

使用**应用程序**和**图形 API**我正在尝试在**业务页面上**发布 我获得了页面令牌并能够在页面上发布， **但是****每个人都**可以看到这些帖子，即使用户甚至没有登录到 Facebook 我正在尝试发布页面上的消息，只有喜欢**该页面的****用户**才能看到这些帖子

 ****我试过**

1> 授予权限时（登录时）将权限设置为仅限朋友（有问题的人可以看到此应用帖子的帖子） 2> 在发布帖子时添加隐私参数（ALL_FRIENDS）

但是帖子仍然是公开的，每个人都可以看到它如何发布，所以只有喜欢的用户才能看到它

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:21:12.763

这不是 API 的功能 - 如果您不希望已注销的用户在页面上看到某些内容，请为其添加人口统计限制，以便只有满足限制的登录用户才能看到该页面**

# c# - 使用 MailMessage 查看电子邮件

> ID：10838613
> 
> 赞同：1
> 
> 时间：2012-05-31T17:46:26.470
> 
> 标签：c#, wpf

有什么方法可以使用 MailMessage 而不是发送消息来查看电子邮件。我正在使用 SmtpClient 发送消息，但在某些情况下，电子邮件需要经过审核，然后由用户手动发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:00:28.873

**SmtpClient**类中没有用于查看电子邮件的内置方法。您必须手动查看消息。

在发送之前，您必须手动查看电子邮件。

您可以使用[**WebBrowser**](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)对象查看电子邮件的正文部分，以了解接收者将如何查看电子邮件。

其他审查也必须手动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:02:30.300

最简单的方法是将其作为 MIME 消息 ( `.eml`) 保存到临时文件中，然后使用您注册的消息查看器（例如 Windows Live Mail 或 Thunderbird）启动它。

要保存`MailMessage`到文件，您可以使用`Save`此代码项目文章中提供的扩展方法：[将 Save() 功能添加到 Microsoft.Net.Mail.MailMessage](http://www.codeproject.com/Articles/32434/Adding-Save-functionality-to-Microsoft-Net-Mail-Ma)。

```
MailMessage message = new MailMessage
{
    Subject = "Test",
    Body = "Hello world",
    From = new MailAddress("sender@abc.com"),
};
message.To.Add(new MailAddress("email@domain.com"));

string tempEmlPath = Path.Combine(
    Path.GetTempPath(), 
    Guid.NewGuid().ToString() + ".eml");

message.Save(tempEmlPath);

Process.Start(tempEmlPath); 
```

# graph - CorePlot：CPTPieChart 在 CPTGraphHostingView 内改变位置？

> ID：10838616
> 
> 赞同：1
> 
> 时间：2012-05-31T17:46:36.907
> 
> 标签：graph, frame, core-plot, pie-chart

是否可以更改 CPTGraphHostingView 内的 CPTPieChart 框架？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T22:45:39.010

不是直接的，但您可以控制绘图区域中的饼图大小和位置（如果所有填充都为 0，则与托管视图的大小相同）。使用该`centerAnchor`属性定位饼图的中心。锚点的 x 和 y 坐标作为绘图区域大小的一部分给出。默认值 (0.5, 0.5) 是绘图区域的中间。`pieRadius`是饼图的半径，以像素为单位。

# facebook - 时间线中断开的操作链接

> ID：10838621
> 
> 赞同：0
> 
> 时间：2012-05-31T17:46:50.707
> 
> 标签：facebook, facebook-opengraph, facebook-timeline

![在此处输入图像描述](../Images/6a01d62f598075de3dc98ce79a322052.png)

我们为我们的开放图形操作实现了操作链接。将故事发布到时间线后，我们现在可以在“赞”和“评论”旁边看到我们的操作链接。但是，单击此链接似乎没有任何作用。查看 URL，action_id 为“0”：

[http://www.facebook.com/ajax/open_graph/actionlink?action_ids=%5B0%5D](http://www.facebook.com/ajax/open_graph/actionlink?action_ids=%5B0%5D)

但是如果你直接去 Facebook 活动项目页面（通过点击故事的日期），你可以看到 action_id 清楚地填充。此时单击操作链接有效，故事将发布到您自己的时间线。

当操作链接出现在新闻提要中时，它也可以正常工作。

是否有设置或我们需要做一些事情来让动作链接在时间轴中工作？或者这是一个可能的 Facebook 错误？

# xcode - NSMutableArray 从 plist 返回 Null

> ID：10838622
> 
> 赞同：0
> 
> 时间：2012-05-31T17:47:00.590
> 
> 标签：xcode, null, nsmutablearray, plist, nslog

我有一个 NSMutableArray ，其中包含从文本字段中获取的数字列表。

我试图使用完成按钮的点击来鼓励将 NSMutableArray 保存在 NSuserdomain 内的 plist 中。要检查 plist 的内容，我尝试将它们重新加载到另一个 NSMUtableArray，然后打印数组。

```
-(NSString *) dataFilePath
{ NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *documentDirectory = [path objectAtIndex:0]; return     [documentDirectory stringByAppendingPathComponent:@"WeightsList.plist"];
}

- (void)writePlist
{
    [weightsArray writeToFile:[self dataFilePath] atomically:YES];
}

-(void)readPlist
{ 
    NSString *filePath = [self dataFilePath]; 
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) 
    { 
        NSMutableArray *weightsArray = [[NSMutableArray alloc] initWithContentsOfFile:filePath]; 
    NSLog(@"%@\n",weightsArray); 
    NSLog(@"%@\n", filePath); 
   }
} 
```

下面的“完成”操作是按下完成按钮时调用的操作：

-(IBAction)done { int arrayCount;

```
id arrayVariable;

arrayCount = [weightsArray count];
[weightsArray addObject:weightInput.text];
arrayVariable = [weightsArray objectAtIndex:arrayCount];
NSLog(@"Weight Entered: %@", arrayVariable);
NSLog(@"%@",weightsArray);
[self writePlist];
[self readPlist];

[self dismissViewControllerAnimated:YES completion:nil];

} 
```

我的问题是，输出是每次：

```
2012-05-31 18:35:05.378 WeighMe[780:f803] /Users/jb/Library/Application Support/iPhone     Simulator/5.1/Applications/BE9D2906-50FA-4850-B3A5-47B454601F61/Documents/WeightsList.plist
2012-05-31 18:35:05.829 WeighMe[780:f803] Weight Entered: (null)
2012-05-31 18:35:05.830 WeighMe[780:f803] (null)
2012-05-31 18:35:05.831 WeighMe[780:f803] (
32432
) 
```

这是 plist 无法正常工作的问题，还是 NSMutableArray 没有获取所需数据的问题。

我已经尝试使用调试器单步执行运行时，但是我真的不知道如何正确使用它。

任何帮助都是极好的！谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:59:33.597

您正在 -(void) readPlist 方法中重新声明数组：

```
NSMutableArray *weightsArray = [[NSMutableArray alloc] initWithContentsOfFile:filePath]; 
```

那行应该是：

```
weightsArray = [[NSMutableArray alloc] initWithContentsOfFile:filePath]; 
```

# c# - 实体框架代码中的 DbUpdateConcurrencyException 首先

> ID：10838624
> 
> 赞同：6
> 
> 时间：2012-05-31T17:47:04.177
> 
> 标签：c#, entity-framework-4, ef-code-first

我遇到了实体框架和代码优先的问题。我有一个带有 Timestamp 属性的实体，我在数据库中添加了一条新记录，调用 SaveChanges，一切正常。当我尝试删除刚刚添加的记录时，我收到以下消息：

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

在我看来，EF 并不知道这个新记录存在于数据库中，尽管它确实存在。有时，即使我尝试更新不同的记录，我也会收到相同的消息，但如果我尝试删除不同的记录，它会起作用。

有谁知道为什么会这样？

在此先感谢，迭戈

**编辑** 我已经组装了一些代码，以便更容易理解我的问题：

我有两个简单的实体：

```
public class Entidade1
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    public string Descricao { get; set; }

    [Timestamp]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public byte[] RecTS { get; set; }
}

public class Entidade2
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    public string Descricao { get; set; }

    [Timestamp]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public byte[] RecTS { get; set; }

    public virtual Entidade1 Entidade1 { get; set; }
} 
```

上下文：

```
public class DB : DbContext
{
    public DB() : base("DB")
    {
        this.Configuration.AutoDetectChangesEnabled = true;
        this.Configuration.LazyLoadingEnabled = true;
        this.Configuration.ProxyCreationEnabled = true;
    }

    public DbSet<Entidade1> Entidade1 { get; set; }
    public DbSet<Entidade2> Entidade2 { get; set; }
} 
```

和代码：

var item = new Entidade1();

```
 item.Descricao = "teste";

        var db = new DB();

        db.Set(typeof(Entidade1)).Add(item);

        db.SaveChanges();

        var item2 = new Entidade2();

        item2.Descricao = "teste 2";
        item2.Entidade1 = item;

        db.Set(typeof (Entidade2)).Add(item2);

        db.SaveChanges();

        var q = (from c in db.Entidade1
                 where c.Descricao == "teste"
                 select c).FirstOrDefault();

        db.Set(typeof(Entidade1)).Remove(q);

        db.SaveChanges();

        var q2 = (from c in db.Entidade2
                  where c.Descricao == "teste 2"
                  select c).FirstOrDefault();

        db.Set(typeof (Entidade2)).Remove(q2);

        db.SaveChanges(); // Here I got the error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T18:06:25.517

我发现这个问题是 Entity Framework 4.0 中的一个已知错误，它自 2010 年以来就出现了，并将在下一个版本中解决（希望在 4.5 中）。当我更新具有相关对象的对象时，EF 会尝试更新所有关系，并且由于父级中没有任何更改，它会给我“0 行”消息。

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:45:44.733

我建议，使用上下文的本地范围：

> ```
> Using(var x = new MyObjectContext){
>       //
>       //....
>       x.SaveChanges(); 
>      } 
> ```

# php - PHP：无法将 MySQL 日期时间转换为纪元（使用正确的时间）

> ID：10838628
> 
> 赞同：-1
> 
> 时间：2012-05-31T17:47:27.790
> 
> 标签：php, mysql, php-5.3, strtotime, epoch

我正在使用 php 从 MySQL 数据库中获取日期时间。

在 mysql 中，日期时间如下所示：

```
'2004-11-03 06:29:48'
```

从数据库中获取日期时间的代码行如下所示：

```
$epochTime = strtotime($row[8]); 
```

php 的 strtotime 函数将这个时间转换为错误的纪元时间：

```
1099461600
```

这是不正确的。如果您使用[http://www.epochconverter.com/](http://www.epochconverter.com/)将其转换回来，您会看到最初在 mysql 中的时间已经丢失：

```
格林威治标准时间 2004 年 11 月 3 日星期三 06:00:00
```

如何获得具有与 mysql 日期时间匹配的特异性的准确纪元时间？

编辑：

我刚刚发现mysql只返回日期（没有时间）：

```
2004/11/03
```

我试图强迫它使用这个来返回时间：

```
select DATE_FORMAT(`FieldDateTime`,'%Y-%m-%d %k:%I:%s') from table where id=1; 
```

但这也不起作用。它继续只返回日期（没有时间）。

确认！我想到了。我在数组中指定了错误的字段：

```
$epochTime = strtotime($row[8]); 
```

本来应该：

```
$epochTime = strtotime($row[9]); 
```

原来这`$row[8]`也是一个格式化的日期字段，引起了我的困惑。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:57:08.960

你可以试试：

```
SELECT UNIX_TIMESTAMP(`timestamp_column_name`) AS `timestamp`; 
```

然后在 PHP 中：

```
echo date("Y-m-d H:i:s", $row['timestamp']); 
```

这与 MySQL 匹配吗？

# git - 显示在目录中添加文件的日期

> ID：10838629
> 
> 赞同：2
> 
> 时间：2012-05-31T17:47:36.830
> 
> 标签：git

我正在查看在 git 项目的子目录中添加了哪些文件。看着那个男人，`git log`但没有什么像我需要的那样跳出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:07:52.570

```
git log --reverse --diff-filter=A --summary <directory> 
```

这将列出从最旧的提交开始，其中创建了给定目录中的任何文件。

# jquery - 找到新的元素位置并移动到那里

> ID：10838631
> 
> 赞同：0
> 
> 时间：2012-05-31T17:47:46.063
> 
> 标签：jquery

我有一个无序列表，它显示为向左浮动的块，并使用 jQuery 根据它们的类过滤掉不同的块。这具有从列表中出来的框和其余框聚在一起的效果，并且当列表更改时，一些其他的消失而其他的出现。移动是即时的，我希望他们移动到新位置，但是如何获取每个盒子的新位置以便将其移动到那里？他们的位置没有设定值，因此需要即时解决。

如果您需要查看任何演示或代码，它基于此处的脚本：[http](http://web.enavu.com/tutorials/client-side-filtering-data-with-jquery/) ://web.enavu.com/tutorials/client-side-filtering-data-with-jquery/以及一些小的 css jQuery 修改。

我的代码：

```
$(document).ready(function(){
  $('#filters a').click(function(e){
    e.preventDefault();
    var filter = $(this).attr('id');
    $('#content ul li:not(.' + filter + ')').fadeOut('slow').removeClass('visible');
    $('#content ul li.' + filter + '').fadeIn('slow').addClass('visible');
  });
  $('#content ul li').hover(function(){
    $(this).addClass('li_hover');
  },function(){
    $(this).removeClass('li_hover');
  });
}); 
```

[您可以在http://jsfiddle.net/brewtime/uDtR6/](http://jsfiddle.net/brewtime/uDtR6/)的 JS Fiddle 上查看它

任何想法表示赞赏，谢谢。

# ios - 我是否需要有公司网站才能将应用程序提交到 Appstore

> ID：10838632
> 
> 赞同：0
> 
> 时间：2012-05-31T17:47:53.700
> 
> 标签：ios

我注意到应用程序商店有公司网站、应用程序网站和支持电子邮件。我需要所有这些吗，我不代表公司。我只是开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:54:31.473

不，您不需要公司，您可以是独立的开发人员，但您确实需要一个网站、一个应用程序网页和一封人们可以发送支持请求的电子邮件。您始终可以使用 Google 网站等免费服务来最初托管您的网页。

# nservicebus - Nservice 总线 3.0、.Net Framework 4.0 和 Msbuild 3.5

> ID：10838633
> 
> 赞同：0
> 
> 时间：2012-05-31T17:47:54.707
> 
> 标签：nservicebus

我们遇到了 NService 总线和 .Net 框架的问题。我们有一个包含多个项目的解决方案。旧项目 1 使用 .Net Framework 3.5 和 Nservice 总线 2.6（使用 .Net 3.5 编译）dll 新项目 2 使用 .Net Framework 4.0 和 Nservice 总线 3.0 dll

项目从 VisualStudio2010 编译良好，但在使用 MSbuild 3.5 构建时失败

尝试使用 .net 4.0 msbuild 构建解决方案时，使用 NSB2.6 的旧项目 1 出现错误。

我们认为的唯一方法是将 project2 移动到单独的解决方案中。这似乎是一个有趣的问题，想知道是否有人遇到过类似的问题。

Nservice 3.0 可以与 .Net 3.5 一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T10:01:56.650

NServiceBus 3.0 及更高版本仅在 .NET 4.0 及更高版本上受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:25:26.513

您是否尝试过 MSBuild 4.0？如果您在 Visual Studio 中构建一个 .Net 4.0 项目，那就是它所使用的。

# objective-c - Objective C 中 iPhone 的自定义数字和字符键盘

> ID：10838638
> 
> 赞同：5
> 
> 时间：2012-05-31T17:48:23.830
> 
> 标签：objective-c, ios, cocoa-touch, uikeyboard

下面显示的键盘不是 Cocoa 提供的默认键盘的一部分，因此必须自定义构建。我需要创建一个看起来像下面这样的键盘。

我见过一些使用它的应用程序，我看到一些教程在顶部添加了一个带有一些按钮的自定义栏，但我需要它的外观和功能就像普通键盘一样，但有额外的数字行。

这如何在 Objective C 中以编程方式完成？有人可以指出我正确的方向吗？

![在此处输入图像描述](../Images/ba1e14ed647272a738d7a25e13e33826.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:18:49.797

您可以使用 UIToolbar 并在那里添加 0-9 按钮。您甚至可以像 iPhone 键盘一样将其着色或着色为灰色，但我不知道如何将其添加到实际的键盘视图中。

```
//Feel free to change the formatting to suit your needs more
//And of course, properly memory manage this (or use ARC)

UIBarButtonItem *my0Button = [[UIBarButtonItem alloc] initWithTitle:@"0" style:UIBarButtonItemStyleBordered target:self action:@selector(addNumberToString:)];
UIBarButtonItem *my1Button = [[UIBarButtonItem alloc] initWithTitle:@"1" style:UIBarButtonItemStyleBordered target:self action:@selector(addNumberToString:)];

UIToolbar *extraRow = [[UIToolbar alloc] init];
extraRow.barStyle = UIBarStyleBlack;
extraRow.translucent = YES;
extraRow.tintColor = [UIColor grayColor];
[extraRow sizeToFit];
NSArray *buttons = [NSArray arrayWithObjects: my0Button, my1Button, etc, nil];
[extraRow setItems:buttons animated:YES];
textView.inputAccessoryView = extraRow;

-(void) addNumberToString: (id) sender
{
    //Where current string is the string that you're appending to in whatever place you need to be keeping track of the current view's string.
    currentString = [currentString stringByAppendingString: ((UIBarButtonItem *) sender).title;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:37:50.687

您问题中的图片来自 5RowQWERTY 项目：[http ://code.google.com/p/networkpx/wiki/Using_5RowQWERTY](http://code.google.com/p/networkpx/wiki/Using_5RowQWERTY)

该项目仅适用于越狱设备（据我所知），并且肯定使用私有 API，这使得应用商店无法接受。如果您可以接受这些限制，那么只需使用该项目即可。它会安装一个新的键盘布局文件 ( `layout.plist`)。

如果你想在非越狱设备上运行，或者将你的应用放到应用商店，你将无法使用该方法。我看到三个选项：

1.  在它出现后在键盘的视图层次结构中挖掘（它有它自己的`UIWindow`，所以从`[[UIApplication sharedApplication] windows]`数组开始）并添加你自己的数字按钮。这是大量的工作，很难做好，而且很可能无论如何都会被苹果拒绝。

2.  从头开始重新实现键盘。如果您想支持多种键盘布局并真正匹配系统键盘的感觉和行为，这是一项巨大的工作。

3.  放弃，只设置`inputAccessoryView`一排数字按钮。这很简单。

我的建议是，除了选项 3 之外的任何事情都是浪费时间。只需使用 an`inputAccessoryView`来显示数字栏，然后转到应用程序中为用户增加真正价值的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:03:57.727

这是一个非常开放的问题。您基本上是在问“如何在 iOS 中创建自定义视图？”

以下是几点开始：

1.  您正在创建一个具有系统默认键盘外观的新视图。您需要为每个键盘按钮收集资源（创建资源或获取免费资源）。

2.  您可以将所有这些放在 IB 中。您的视图只不过是 UIButtons 的集合。

3.  要使用键盘，您需要将视图指定为 inputView。

这是一个构建自定义 inputView 的教程：[http ://www.raywenderlich.com/1063/ipad-for-iphone-developers-101-custom-input-view-tutorial](http://www.raywenderlich.com/1063/ipad-for-iphone-developers-101-custom-input-view-tutorial)

# php - 将某些图像放入其中时，PHP GD 头像变为空白

> ID：10838641
> 
> 赞同：0
> 
> 时间：2012-05-31T17:48:35.217
> 
> 标签：php, image, gd

我正在制作一个头像网站。我的一个用户遇到了问题......他们的头像变成空白。他们的头像：

[http://www.world2build.com/API/Avatar.aspx?ID=1586](http://www.world2build.com/API/Avatar.aspx?ID=1586)

他们头像上的物品在没有这个物品的情况下可以正常工作，但是当他们穿上这个身体时，这是第一层，它变成空白：

[http://node1.world2build.com/Body/13245107086553.png](http://node1.world2build.com/Body/13245107086553.png)

但是，如果我将 Body 移动到顶层，它会显示...但我必须将 body 保持在底层以确保它像普通头像一样显示。为什么这会使 PNG 作为底层空白？我没有看到问题。

代码（其中 $vars 是一个包含文件链接的数组）：

```
function merge_image($base, $img){
    $width = imagesx($img); 
    $height = imagesy($img); 
    imagecopy($base,$img,0,0,0,0,$width,$height);
}

$base = imagecreatefrompng($vars[0]);
for($i=1; $i<count($vars); $i++){
    merge_image($base, imagecreatefrompng($vars[$i]));
    //echo $vars[$i]."<BR>";
} 

header("Content-Type: image/png"); 
imagesavealpha($base, true); 
imagepng($base); 
```

注意：第 7 行的 $base 是身体图像（导致问题的那个。）

一个工作头像是：[http](http://www.world2build.com/API/Avatar.aspx?ID=1602) ://www.world2build.com/API/Avatar.aspx?ID=1602 （它使用与上面提供的不同的主体）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:29:36.303

我通过用这个替换代码并将 $base 变成一个空白图像来解决这个问题。

```
$base = imagecreatefrompng("../Images/BlankTransparentImage.png");
for($i=0; $i<count($vars); $i++){
    merge_image($base, imagecreatefrompng($vars[$i]));
    //echo $vars[$i]."<BR>";
} 
```

（请注意，我在 for 循环中将 $i=1 更改为 $i=0 以包含正文。）

# c# - Asp.Net MVC3，布尔列空检查

> ID：10838642
> 
> 赞同：0
> 
> 时间：2012-05-31T17:48:36.113
> 
> 标签：c#, asp.net

```
public Nullable<bool> BROUGHT { get; set; } // EDMX generate this code, so I can not change this 
```

我想对 BROUHGT (DB) 列进行空检查。

所以我写代码

```
if (table.BROUGHT != DBNull.Value && Convert.ToBoolean(table.BROUGHT)){..} 
```

但错误信息说，

```
Error   2   Operator '!=' cannot be applied to operands of type 'bool?' and 'System.DBNull' ... 
```

我如何对该列进行空检查？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:50:43.207

Entity Framework 是一个 ORM，它使您不必考虑`DBNull.Value`. 因此，只需`null`像在其他 C# 代码中一样检查：

```
if (table.BROUGHT != null && table.BROUGHT.Value){..} 
```

不是这样，因为它是一个可为空的类型，要获得实际`bool`值，您必须使用该`.Value`属性（如上）或将其转换为`bool`.

# javascript - jQuery 小部件和内部回调

> ID：10838646
> 
> 赞同：0
> 
> 时间：2012-05-31T17:48:42.620
> 
> 标签：javascript, jquery

这不起作用，但给你一个想法：一个小部件需要使用它自己的方法作为回调：

```
$.widget("me.mywidget", {

    _create: function() {
        this.call("mymodule", "myaction", {arg: this.options.value}, _parseData);
    },

    _parseData: function(data) {
        console.log(data);
    },

    call: function(module, action, params, callback) {
        var params = params || {};
        var url = "/" + module + "/"  + action;

        $.post(url, params, function(data) {
            if (data.payload) callback(data.payload);
        });
    },
}); 
```

它当前抛出异常：`Uncaught ReferenceError: _parseData is not defined`

这样做的规范方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:35:01.157

$.post 回调需要调用你自己的`callback`使用`.apply`or `.call`，这两者都允许你设置`this`你调用的函数的范围。

```
call: function(module, action, params, callback) {
    var params = params || {};
    var url = "/" + module + "/"  + action;
    var self = this;

    $.post(url, params, function(data) {
        if (data.payload) callback.apply(self, [ data.payload ]);
    });
}, 
```

或者：

```
call: function(module, action, params, callback) {
    var params = params || {};
    var url = "/" + module + "/"  + action;

    $.post(url, params, function(data) {
        if (data.payload) callbac.call(self, data.payload);
    });
}, 
```

您可以[阅读此内容以获取有关 apply/call 的更多信息](https://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply)。

# symfony - Doctrine2 中的多对多、单向、自引用关联

> ID：10838648
> 
> 赞同：1
> 
> 时间：2012-05-31T17:48:45.897
> 
> 标签：symfony, doctrine-orm

我想“链接”一些对象。假设您有包含这些记录的 Person 表：

*   巴拉克奥巴马
*   奥巴马巴拉克
*   巴拉克侯赛因奥巴马

如您所见，它是同一个人。我想有一个存储替代人的协会。例如，对于具有`ID`=1 和`NAME`=Barack Obama的人，`linkedPersons`将如下所示：

```
linkedPersons:
    Obama Barack
    Barack Hussein Obama
    (optionally with Barack Obama itself) 
```

恕我直言，它应该是多对多、单向、自引用关联，但我不知道如何实现这样的关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:38:34.610

我认为您可以进行简单的 ManyToMany 单向映射。在关系上，只需将两个用户联系起来。这会在数据库中创建额外的记录（A -> B 和 B -> A），但我认为它应该可以按您的意愿工作。

```
<?php
/** @Entity */
class User
{
    /**
     * @ManyToMany(targetEntity="User")
     * @JoinTable(name="alternateUsers",
     *      joinColumns={@JoinColumn(name="user_id", referencedColumnName="id")},
     *      inverseJoinColumns={@JoinColumn(name="alternate_user_id", referencedColumnName="id")}
     *      )
     */
    private $alternateUsers;

    public function __construct() {
        $this->alternateUsers = new \Doctrine\Common\Collections\ArrayCollection();
    }

    public function addAlternateUser(User $user) {
        $this->alternateUsers[] = $user;
        $user->alternateUsers[] = $this;
    }
} 
```

# dojo - 一个系列的道场蜘蛛图

> ID：10838649
> 
> 赞同：0
> 
> 时间：2012-05-31T17:49:01.217
> 
> 标签：dojo

只有一个系列的蜘蛛图有问题。

**我试着处理这个例子：**

[http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/charting/tests/test_spidersingle.html](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/charting/tests/test_spidersingle.html)

**并在这里设置：**

[http://jsfiddle.net/mstefanko/FHnwd/72/](http://jsfiddle.net/mstefanko/FHnwd/72/)

**Firebug 正在抛出：**

非预期值 NaN 解析 cy 属性。

* * *

我对 dojo 工具包完全陌生。我知道我需要添加Axis，但看起来顶部 URL 中的代码不起作用。尽管我尝试设置最小/最大值，但轴的开始和结束数字相同。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:24:50.453

问题与蜘蛛图有关，它自己找出轴的​​最小值/最大值。即使我使用的是：

chart1.addAxis("答案 3", { type: "Base", min: 0, max: 250 });

设置最小值和最大值，蜘蛛图仍然只用一个系列轰炸。

在玩弄了这张票中的信息之后：

[http://bugs.dojotoolkit.org/ticket/14583](http://bugs.dojotoolkit.org/ticket/14583)

我仍然无法让这个工作，我在这里偶然发现了一个答案，基本上说作为一种解决方法，为 min 和 max 添加系列，然后在渲染后删除它们。所以这正是我最终做的。

```
chart.render();
chart.removeSeries("min");
chart.removeSeries("max"); 
```

**在这里演示：http:** [//jsfiddle.net/FHnwd/90/](http://jsfiddle.net/FHnwd/90/)

# android - Android大视频上传到服务器？

> ID：10838653
> 
> 赞同：1
> 
> 时间：2012-05-31T17:49:10.363
> 
> 标签：android, video

Android大视频上传到php服务器，我在stackoverflow中阅读了很多答案。

[将最大 50MB 的视频上传到服务器](https://stackoverflow.com/questions/10276647/uploading-video-upto-50mb-to-the-server)

[Android：上传视频时出现 OutOfMemoryError - 如何最好地分块？](https://stackoverflow.com/questions/2599305/android-outofmemoryerror-while-uploading-video-how-best-to-chunk)

[如何发送 HTTP POST 请求并接收响应？](https://stackoverflow.com/questions/3038409/how-to-send-http-post-request-and-recieve-response/3038747#3038747)

我试过了，但即使使用它也无法为我工作。当我`setChunkedStreamingMode()`上传视频时，它给了我`OutOfMemoryError`

当我录制 5 秒的视频时，它的效果很好，但超过 8 或 10 秒的视频应用程序强制关闭，因为`OutOfMemoryError`

**我的代码::**

```
 HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(getString(R.string.login_url)
                        + "uploadvideo");
                HttpResponse response = null;
                InputStream inputStream = getContentResolver().openInputStream(
                        Uri.fromFile(myFile));
                byte[] data = IOUtils.toByteArray(inputStream);
                String type = getFileExtension(myFile.getName().toString());

                String encodeurl = Base64.encodeBytes(data);

                try {

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                            6);
                    nameValuePairs.add(new BasicNameValuePair("returnformat",
                            "json"));
                    nameValuePairs.add(new BasicNameValuePair("userid",
                            strUserid));

                    nameValuePairs.add(new BasicNameValuePair("video",
                            data.toString()));

                    nameValuePairs.add(new BasicNameValuePair("type", type));
                    nameValuePairs.add(new BasicNameValuePair("title",
                            strVideoName));
                    nameValuePairs.add(new BasicNameValuePair("description",
                            strVideoComments));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    // Execute HTTP Post Request
                    response = httpclient.execute(httppost);

                    System.out.println(">>>>>>>>>>" + response.toString());

                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } 
```

我需要上传视频`Base64 Encoded String`。而且我知道内存错误是由于内存大于堆大小。但我无法上传视频。

**LOGCAT**

```
05-31 23:16:12.114: E/AndroidRuntime(17255): java.lang.RuntimeException: An error occured while executing doInBackground()
05-31 23:16:12.114: E/AndroidRuntime(17255):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.lang.Thread.run(Thread.java:1027)
05-31 23:16:12.114: E/AndroidRuntime(17255): Caused by: java.lang.OutOfMemoryError: (Heap Size=20103KB, Allocated=15700KB, Bitmap Size=0KB)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.nio.CharArrayBuffer.<init>(CharArrayBuffer.java:43)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.nio.ReadWriteCharArrayBuffer.<init>(ReadWriteCharArrayBuffer.java:47)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.nio.BufferFactory.newCharBuffer(BufferFactory.java:82)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.nio.CharBuffer.allocate(CharBuffer.java:53)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.nio.charset.CharsetDecoder.allocateMore(CharsetDecoder.java:261)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.nio.charset.CharsetDecoder.decode(CharsetDecoder.java:218)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.nio.charset.Charset.decode(Charset.java:488)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.lang.String.<init>(String.java:181)
05-31 23:16:12.114: E/AndroidRuntime(17255):    at java.lang.String.<init>(String.java:141) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:56:38.453

您不应该为实体设置大字节 []。它肯定会耗尽内存。您可以在此处使用 FileEntity。

[http://developer.android.com/reference/org/apache/http/entity/FileEntity.html](http://developer.android.com/reference/org/apache/http/entity/FileEntity.html)

一些相关问题和链接

[Android 使用 HttpPost/HttpGet 发送照片](https://stackoverflow.com/questions/3132104/android-send-photo-using-httppost-httpget)

试试这个： [使用 Http Post 发送图像](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-05-31T17:57:21.800

如果 OutOfMemory 错误来自服务器，快速修复将是更新您的 php.ini 变量：

```
upload_max_filesize = 100M 
```

（或任何你觉得舒服的东西）

或者如果您正在发布，那么您还需要更改

```
post_max_size = 100M 
```

# qt - Qt 设计器添加到 QPushButton 的链接

> ID：10838654
> 
> 赞同：1
> 
> 时间：2012-05-31T17:49:16.997
> 
> 标签：qt

我在 QT 中有一个 QPushButton，我需要重定向到一个网站，目前当我继承它时，该按钮不会去任何地方。我以前从未使用过 QT，所以我正在寻找需要做什么才能让这个按钮在点击时重定向到 URL。

现在它的属性有

QObject QWidget QAbstractButton QPushButton

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-13T23:11:08.083

您可以扩展 QPushButon：

```
#include <QDesktopServices>
#include <QUrl>
#include "LinkButton.h"

LinkButton::LinkButton(QWidget *parent) : QPushButton(parent) {
    this->setFlat(true);
    connect(this, SIGNAL(clicked()), this, SLOT(slotOpenUrl()));
}

void LinkButton::setUrl(QString url) {
    this->url = url;
}

void LinkButton::slotOpenUrl() {
    QDesktopServices::openUrl(QUrl(this->url));
} 
```

# linux - Netbeans 在 linux 上的出现

> ID：10838655
> 
> 赞同：1
> 
> 时间：2012-05-31T17:49:21.403
> 
> 标签：linux, netbeans

任何想法为什么外观上有如此巨大的差异？已尝试使用 Ubuntu 11.04 和 12.04 以及各种版本的 netbeans，结果相同。图片

[正常启动时](http://i.stack.imgur.com/gxVpN.png)的 Netbeans 和 [以 root 或 su 用户启动时的 Netbeans](http://i.stack.imgur.com/VU4XC.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:53:44.997

首先，NetBeans 默认将其配置存储在`${HOME}/.netbeans/*/etc/netbeans.conf`（有关更多详细信息，请参阅[Wiki](http://wiki.netbeans.org/FaqNetbeansConf#How_do_I_make_my_custom_startup_parameters_permanent.3F)）。这是 NetBeans 设置差异之间的第一个原因，因为它取决于用户。

您应该查看的选项是`netbeans_default_options`，您可以通过添加（或更改，如果已设置）来更改您的 l&f（外观和感觉）`--laf`。查看[可用 l&f 的列表](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html#available)。

请注意，默认 l&f 是`javax.swing.plaf.metal`. （顺便说一句，这看起来像您的配置，至于您*的“正常启动时的 Netbeans”*屏幕截图。）

我在 linux 中遇到了菜单在这种外观和感觉中的问题，因为它们没有呈现适当的边框并且它们没有适当地突出（见下面的屏幕截图）。这就是我总是使用更新的`com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel`.

您*的“以 root 或 su 用户身份启动时的 Netbeans”*屏幕截图看起来像`SystemLookAndFeel`（从您的图像中，我会说`com.sun.java.swing.plaf.windows.WindowsLookAndFeel`，虽然我已经预料到了`com.sun.java.swing.plaf.motif.MotifLookAndFeel`）。在这种情况下，`SystemLookAndFeel`是在运行时确定的，因此您还必须考虑您的用户正在使用哪个 Java 版本。不同的java版本使用不同的l&f。

* * *

屏幕截图：Netbeans 7.1.2 中的菜单与 Linux 中的 Metal l&f 没有适当的边框。

![带有 Metal l&f 的 Netbeans 7.1.2 中的菜单](../Images/5027c7ec0924fb183c2da850508139ad.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:33:50.093

[正如在之前的答案](https://stackoverflow.com/a/10855597/413020 "上一个答案")中所指出的，这是一个 Ubuntu 错误。您在这里有一个很好的解决方法：

[Netbeans 和 Ubuntu Unity](http://blogs.kiyut.com/tonny/2012/06/11/netbeans-and-ubuntu-unity/#.T9dexbnz7RY "灵感与表达")

简而言之，尝试安装[Java Ayatana 插件](http://plugins.netbeans.org/plugin/41822/java-ayatana "Java Ayatana 插件")

（我没有Ubuntu，所以我自己没有测试过。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:04:41.907

在 Linux 上，您可以通过将配置文件放在主目录中来更改应用程序的外观。在这种情况下，普通用户和 root 用户将在其主目录中拥有不同的文件。您可以通过以普通用户和 root 用户身份输入“ls -al”并比较两个列表来检查这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T18:34:12.750

至于普通用户截图，在 Ubuntu 12.04 中有一个 bug，见[https://askubuntu.com/questions/125609/netbeans-all-menu-fonts-are-bold-after-upgrade-to-12-04](https://askubuntu.com/questions/125609/netbeans-all-menu-fonts-are-bold-after-upgrade-to-12-04)

或更准确地说，[https://bugs.launchpad.net/ubuntu/+source/netbeans/+bug/669159](https://bugs.launchpad.net/ubuntu/+source/netbeans/+bug/669159)

# coldfusion - CFC 中的 Cfimage

> ID：10838658
> 
> 赞同：0
> 
> 时间：2012-05-31T17:49:35.647
> 
> 标签：coldfusion, cfc, cfimage

我似乎在从我的 CFC 中处理照片时遇到问题。我收到一条错误消息，提示它在尝试读取图像时遇到异常。所以这个问题很简单，从 CFC 中而不是 CFM 中操作文件有什么问题吗？

```
 <cffunction name="imageResize" access="public" returntype="boolean">

    <cfargument name="filename">
    <cfset result = "true">

    <cfimage
    action = "resize"
    source = "#root#/documents/uploads/PHOTOS/#filename#"
    width = "400px"
    height = ""
    destination = "#root#/documents/uploads/PHOTOS/thumbs/#filename#"
    overwrite = "yes"></cfimage>

    <cfreturn result>
    </cffunction> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:07:50.780

在 cfc 中包含 cfimage 没有问题。这是我一直在做的事情。

我怀疑您遇到的问题是您的函数中的变量“root”是未知的。您可能还应该 var 范围您的结果变量并指定您使用文件名变量的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:15:34.907

我发现您的代码存在很多问题，并已对其进行了纠正，并且运行良好。以下是问题。

1.  函数名'imageResize'需要改成其他名字，因为你提供的函数名是已有的coldfusion函数。

2.  cfimage 标记中的宽度属性需要有一个整数，如 420 而不是 420px。

3.  cfimage 标记中的源和目标属性需要具有像“D:\projects\test”这样的绝对路径，而不是像“/test/images”那样。

仅供参考：您在代码中提到的“根”变量应该可以在函数中访问。

这是修正后的代码。

```
<cffunction name="imageResize2" access="public" returntype="boolean">
<cfargument name="filename">
<cfset result = "true">

<cfimage
action = "resize"
source = "D:\Projects\Test\images\#filename#"
width = "400"
height = ""
destination = "D:\Projects\Test\temp\#filename#"
overwrite = "yes" />

<cfreturn result>
</cffunction> 
```

是的，在 cfc 中处理文件/图像没有问题。上面的代码在 cfs 和 cfm 中都有效。

# cakephp - 缓存问题动态更改 Cakephp 数据库设置

> ID：10838659
> 
> 赞同：0
> 
> 时间：2012-05-31T17:49:35.757
> 
> 标签：cakephp

我正在使用可变数据库在 Cakephp 中建立一个网站。我用以下代码做到了这一点：

控制器：

```
$db_host = $DB_SET['Project']['db_host']; //From other database
$db_user = $DB_SET['Project']['db_user'];
$db_pass = $DB_SET['Project']['db_pass'];
$db_database = $DB_SET['Project']['db_database'];

ConnectionManager::create("client_db", array(
    'datasource' => 'Database/Mysql',
    'driver' => 'mysql',
    'persistent' => false,
    'host' => $db_host,
    'login' => $db_user,
    'password' => $db_pass,
    'database' => $db_database,
    'prefix' => '',
    'encoding' => 'UTF8',
    'port' => '',
));
$DB_LINE = $this->Page->findPage('3'); 
```

模型：

```
class Page extends Model {
    public $useDbConfig = 'client_db';
    function findPage($pagenr) { 
        $page = $this->find('first', array(
            'conditions' => array (
                'Page.id' => $pagenr)
        ));
    return $page;
    }
} 
```

现在我还需要即时更改数据库中的表。我这样做使用（控制器）：

```
$tbl_current = array('tbl_cheques', 'tbl_wishes');
$this->Modelname->useTable  = $tbl_current[$pageid]; //Getting the pageID from an url parameter. 
```

一切正常，只有当我在单击另一个页面之前不等待一段时间时，我才会收到此错误：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Page.fqlkdf' in 'field list' 
```

这是因为 Cake 在他的缓存中仍然有之前的表。如果我等一下，然后我更改页面，它工作正常。对这个问题有什么建议吗？提前致谢，

亚伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:37:47.647

就像你说的，表信息被缓存了。所以你只需要删除那个缓存：

```
Cache::clear(false, '_cake_model_'); 
```

或者，您可以暂时禁用缓存

```
 Configure::write('Cache.disable', false); 
```

# sql - 在 CASE 表达式中返回多个值

> ID：10838660
> 
> 赞同：1
> 
> 时间：2012-05-31T17:49:37.950
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一个过时的存储过程，看起来像：

```
CASE
      WHEN (org.org_misc_data = 'PAC') THEN 'pac'
      WHEN (org.dues_category = 'PART') THEN 'partner_member'
      WHEN (org.dues_category = 'FREE' AND org.org_status_flag = 'P') THEN 'associate_member'
      ELSE 'non_member'
END AS org_status 
```

它目前的编写方式，一旦它到达第一个`WHEN`子句，我的`org_status`值就是“pac”。有人可以指导我如何重写它，以便`org_status`可以包含返回多个值（即：“pac|partner_member”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:19:34.820

只使用两个`CASE`表达式怎么样？

```
CASE
  WHEN (org.org_misc_data = 'PAC') THEN 'pac|' ELSE '' END
  + CASE 
    WHEN (org.dues_category = 'PART') THEN 'partner_member'
    WHEN (org.dues_category = 'FREE' AND org.org_status_flag = 'P') THEN 'associate_member'
    ELSE 'non_member'
END AS org_status 
```

很难给出明确的答案，因为您还没有真正概述所有可能的排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:57:49.567

哦，那太好了。SQL 不支持从一个案例中多次返回。

如果您不反对字符串操作，您可以执行以下操作：

```
select *,
       left(org_status_letter, charindex('|', org_status_letter) - 1) as org_status,
       substring(org_status_letter, charindex('|', org_status_letter) + 1, 1000) as letter
from (select (CASE WHEN (org.org_misc_data = 'PAC') THEN 'pac|a'
                   WHEN (org.dues_category = 'PART') THEN 'partner_member|b'
                   ...
                   ELSE 'non_member'
              END) AS org_status_letter 
```

更强烈的解决方案将涉及查找表。因此，您的 case 语句将产生一个唯一的键。然后，该键将连接到查找表，您可以拥有任意数量的值。但是，这适用于常量，但不适用于公式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:15:10.883

我认为与其将这些值组合起来，然后再将它们分开，不如始终将它们分开。

```
CASE
      WHEN (org.org_misc_data = 'PAC') THEN 1 ELSE 0 END AS IsPack,
CASE     
      WHEN (org.dues_category = 'PART') THEN 'partner'
      WHEN (org.dues_category = 'FREE' 
                  AND org.org_status_flag = 'P') THEN 'associate'
      ELSE 'non' END AS MemberStatus
END AS org_status 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-31T17:53:23.940

您可以开始 AND'ing 条件并返回相应的值...

```
CASE
    WHEN (org.org_misc_data = 'PAC' AND org.dues_category = 'PART') THEN 'pac|partner_member'
    ....
END AS org_status 
```

# java - 获取 n 元组中的所有 1-k 元组

> ID：10838666
> 
> 赞同：0
> 
> 时间：2012-05-31T17:50:15.920
> 
> 标签：java, tuples, powerset

在 n=5 和 k=3 的情况下，以下循环将执行此操作

```
List<String> l=new ArrayList<String>();
l.add("A");l.add("B");l.add("C");l.add("D");l.add("E");
int broadcastSize = (int) Math.pow(2, l.size());
for (int i = 1; i < broadcastSize; i++) {
    StringBuffer buffer = new StringBuffer(50);
    int mask = i;
    int j = 0;   
    int size=0;
    System.out.println();
    while (mask > 0) {
        if ((mask & 1) == 1) {
            System.out.println(".. "+mask);
            buffer.append(l.get(j));
            if (++size>3){
                buffer = new StringBuffer(50);
                break;
            }
        }
        System.out.println(" "+mask);
        mask >>= 1;
        j++;
    }
    if (buffer.length()>0)
        System.out.println(buffer.toString());

} 
```

但效率不高我想用[银行家的序列](http://applied-math.org/subset.pdf)来做，因此先探索单例，然后是对，然后是三元组并停止。

我没有找到这样做的方法，但至少这个循环应该更有效：

```
List<String> l=new ArrayList<String>();
l.add("A");l.add("B");l.add("C");l.add("D");l.add("E");
int broadcastSize = (int) Math.pow(2, l.size());
for (int i = 1; i < broadcastSize; i++) {
    StringBuffer buffer = new StringBuffer(50);
    int mask = i;
    int j = 0;   

    if (StringUtils.countMatches(Integer.toBinaryString(i), "1") < 4){
        while (mask > 0) {
            if ((mask & 1) == 1) {
                buffer.append(l.get(j));

            }
            mask >>= 1;
            j++;
        }
        if (buffer.length()>0)
            System.out.println(buffer.toString());
    }

} 
```

还有：但是k个嵌入式循环看起来很难看

```
//singleton
for (int i = 0; i < l.size(); i++) {
    System.out.println(l.get(i));
}

//pairs
for (int i = 0; i < l.size(); i++) {
    for (int j = i+1; j < l.size(); j++) {
        System.out.println(l.get(i)+l.get(j));
    }
}

//3-tuple
for (int i = 0; i < l.size(); i++) {
    for (int j = i+1; j < l.size(); j++) {
        for (int k = j+1; k < l.size(); k++) {
            System.out.println(l.get(i)+l.get(j)+l.get(k));
        }
    }
}
//...
// k-tuple 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:14:47.710

这种技术被称为[Gosper's hack](http://en.wikipedia.org/wiki/Combinatorial_number_system#Applications)。它仅适用于`n <= 32`因为它使用了 a 的位`int`，但如果使用 a ，您可以将其增加到 64 `long`。

```
int nextCombo(int x) {
  // moves to the next combination with the same number of 1 bits
  int u = x & (-x);
  int v = u + x;
  return v + (((v ^ x) / u) >> 2);
}

...
for (int x = (1 << k) - 1; (x >>> n) == 0; x = nextCombo(x)) {
  System.out.println(Integer.toBinaryString(x));
} 
```

对于`n = 5`和`k = 3`，这打印

```
111
1011
1101
1110
10011
10101
10110
11001
11010
11100 
```

完全符合您的预期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:10:34.757

这应该是最有效的方法，即使 k 个嵌入式循环看起来很丑

```
//singleton
for (int i = 0; i < l.size(); i++) {
    System.out.println(l.get(i));
}

//pairs
for (int i = 0; i < l.size(); i++) {
    for (int j = i+1; j < l.size(); j++) {
        System.out.println(l.get(i)+l.get(j));
    }
}

//3-tuple
for (int i = 0; i < l.size(); i++) {
    for (int j = i+1; j < l.size(); j++) {
        for (int k = j+1; k < l.size(); k++) {
            System.out.println(l.get(i)+l.get(j)+l.get(k));
        }
    }
}
// ...
//k-tuple 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T07:24:28.180

Apache commons 具有大小为 k的[子集和](https://commons.apache.org/proper/commons-math/javadocs/api-3.4/org/apache/commons/math3/util/Combinations.html)[permutations](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/iterators/PermutationIterator.html)的迭代器。这是一个迭代器，它遍历一个 n 元组的 1-k 个元组，它结合了两者：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

import org.apache.commons.collections4.iterators.PermutationIterator;
import org.apache.commons.math3.util.Combinations;

public class AllTuplesUpToKIterator implements Iterator<List<Integer>> {
    private Iterator<int[]> combinationIterator;
    private PermutationIterator<Integer> permutationIterator;
    int i;
    int k;
    int n;

    public AllTuplesUpToKIterator(int n, int k) {
        this.i = 1;
        this.k = k;
        this.n = n;
        combinationIterator = new Combinations(n, 1).iterator();
        permutationIterator = new PermutationIterator<Integer>(intArrayToIntegerList(combinationIterator.next()));
    }

    @Override
    public boolean hasNext() {
        if (permutationIterator.hasNext()) {
            return true;
        } else if (combinationIterator.hasNext()) {
            return true;
        } else if (i<k) {
            return true;
        } else {
            return false;
        }
    }

    @Override
    public List<Integer> next() {
        if (!permutationIterator.hasNext()) {
            if (!combinationIterator.hasNext()) {
                i++;
                combinationIterator = new Combinations(n, i).iterator();
            }
            permutationIterator = new PermutationIterator<Integer>(intArrayToIntegerList(combinationIterator.next()));          
        }
        return permutationIterator.next();
    }

    @Override
    public void remove() {
        // TODO Auto-generated method stub

    }

    public static List<Integer> intArrayToIntegerList(int[] arr) {
        List<Integer> result = new ArrayList<Integer>();
        for (int i=0; i< arr.length; i++) {
            result.add(arr[i]);
        }
        return result;
    }

    public static void main(String[] args) {
        int n = 4;
        int k = 2;
        for (AllTuplesUpToKIterator iter= new AllTuplesUpToKIterator(n, k); iter.hasNext();) {
            System.out.println(iter.next());
        }

    }
} 
```

# memcached - Couchbase 作为 memcached + repcached 的替代品？

> ID：10838667
> 
> 赞同：1
> 
> 时间：2012-05-31T17:50:33.450
> 
> 标签：memcached, couchbase, memcachedb

我有一组服务器，它们当前同时使用[memcached](http://memcached.org/)和[repcached](http://repcached.lab.klab.org/)（监听不同的端口）。memcached 服务用于存储不需要共享的本地数据。repcached 实例用于允许成对的服务器进行协作。

当我找到 Couchbase 时，我真的很兴奋，因为它看起来可以让我：

1.  使一些数据持久化
2.  与两个以上节点共享
3.  保留我的大部分代码，因为它使用 memcached API

所以我安装了 Couchbase 但我遇到了一个问题——看起来没有办法在同一台服务器上设置两个集群。我想要一个不与任何其他服务器共享的集群和一个与其他服务器共享的第二个集群。

是的，我可以为 Couchbase 设置几个专用服务器来创建不同的集群，但是我在当前运行 memcached + repcached 的服务器上有足够的 CPU + ram 空闲，所以我更愿意用 Couchbase 替换这些服务。

是否可以在同一主机上运行两个 Couchbase 实例？我意识到我必须改变一些端口。我只是没有看到任何人谈论做这样的事情，所以我认为答案是“不”......但我不得不问，因为看起来 Couchbase 非常适合我的需求。

如果这不起作用，那么我会对任何替代建议感兴趣。例如，我的一个想法是使用 Memcached + [MemcacheDB](http://memcachedb.org/)来模拟一个持久的非共享 Couchbase 集群。但是，我不喜欢 MemcacheDB 不支持过期记录的事实，我宁愿不必编写例程来每月删除数百万条记录（然后想知道性能是否会随着时间的推移而下降）。

任何想法将不胜感激。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T04:18:00.723

这里最好的解决方案可能是运行一个 Couchbase 实例并创建一个 memcached 存储桶和一个 Couchbase 存储桶。memcached 存储桶没有持久性，其功能与 memcached 完全相同。另一个存储桶将具有持久性并支持 memcached api。您可以在单个 Couchbase 服务器中创建任意数量的存储桶。

您的另一个选择是在每个 vm 上虚拟化并运行 Couchbase 服务器。

# c++ - 与零比较时的 int 运算符 != 和 ==

> ID：10838675
> 
> 赞同：75
> 
> 时间：2012-05-31T17:50:54.270
> 
> 标签：c++, performance, assembly, machine-code

我发现 != 和 == 并不是测试零或非零的最快方法。

```
bool nonZero1 = integer != 0;
xor eax, eax
test ecx, ecx
setne al

bool nonZero2 = integer < 0 || integer > 0;
test ecx, ecx
setne al

bool zero1 = integer == 0;
xor eax, eax
test ecx, ecx
sete al

bool zero2 = !(integer < 0 || integer > 0);
test ecx, ecx
sete al 
```

编译器：VC++ 11 优化标志：/O2 /GL /LTCG

这是 x86-32 的汇编输出。两个比较的第二个版本在 x86-32 和 x86-64 上都快了约 12%。但是，在 x86-64 上，指令是相同的（第一个版本看起来与第二个版本完全相同），但第二个版本仍然更快。

1.  为什么编译器不在 x86-32 上生成更快的版本？
2.  当程序集输出相同时，为什么第二个版本在 x86-64 上仍然更快？

**编辑：我添加了基准测试代码。零：1544 毫秒、1358 毫秒非零：1544 毫秒、1358 毫秒** [http://pastebin.com/m7ZSUrcP](http://pastebin.com/m7ZSUrcP) 或 [http://anonymouse.org/cgi-bin/anon-www.cgi/http://pastebin.com/m7ZSUrcP](http://anonymouse.org/cgi-bin/anon-www.cgi/http://pastebin.com/m7ZSUrcP)

注意：在单个源文件中编译时定位这些函数可能不方便，因为 main.asm 很大。我在单独的源文件中有 zero1、zero2、nonZero1、nonZero2。

**EDIT2：安装了 VC++11 和 VC++2010 的人可以运行基准测试代码并发布时间吗？它可能确实是 VC++11 中的一个错误。**

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-05-31T17:58:55.313

这是一个很好的问题，但我认为你已经成为编译器依赖分析的受害者。

编译器只需清除一次的高位`eax`，并且在第二个版本中它们保持清除。第二个版本必须付出代价，`xor eax, eax`除非编译器分析证明它已被第一个版本清除。

**第二个版本能够利用编译器在第一个版本中所做的工作来“作弊”。**

你如何衡量时间？是“循环中的（版本一，后跟版本二）”还是“（循环中的版本一）后跟（循环中的版本二）”？

不要在同一个程序中进行这两个测试（而是为每个版本重新编译），或者如果这样做，请同时测试“版本 A 先”和“版本 B 先”，看看哪个先到者会付出代价。

* * *

作弊说明：

```
timer1.start();
double x1 = 2 * sqrt(n + 37 * y + exp(z));
timer1.stop();
timer2.start();
double x2 = 31 * sqrt(n + 37 * y + exp(z));
timer2.stop(); 
```

如果`timer2`duration小于`timer1`duration，我们不会得出乘以31比乘2快的结论。相反，我们意识到编译器执行了公共子表达式分析，代码变为：

```
timer1.start();
double common = sqrt(n + 37 * y + exp(z));
double x1 = 2 * common;
timer1.stop();
timer2.start();
double x2 = 31 * common;
timer2.stop(); 
```

唯一证明的是，乘以 31 比计算快`common`。这一点都不奇怪——乘法比`sqrt`and快得多`exp`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-31T18:10:10.893

> 编辑：看到我的代码的 OP 汇编列表。我怀疑这甚至是现在*VS2011 的一般错误*。这可能只是 OP 代码的一个特例错误。我使用 clang 3.2、gcc 4.6.2 和 VS2010 按原样运行 OP 的代码，在所有情况下，*最大差异*都​​在 ~1% 左右。

`ne.c`刚刚编译了对我的文件`/O2`和`/GL`标志进行适当修改的源代码。这是来源

```
int ne1(int n) {
 return n != 0;
 }

 int ne2(int n) {
 return n < 0 || n > 0;
 }

 int ne3(int n) {
 return !(n == 0);
 }

int main() { int p = ne1(rand()), q = ne2(rand()), r = ne3(rand());} 
```

和相应的组件：

```
 ; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

    TITLE   D:\llvm_workspace\tests\ne.c
    .686P
    .XMM
    include listing.inc
    .model  flat

INCLUDELIB OLDNAMES

EXTRN   @__security_check_cookie@4:PROC
EXTRN   _rand:PROC
PUBLIC  _ne3
; Function compile flags: /Ogtpy
;   COMDAT _ne3
_TEXT   SEGMENT
_n$ = 8                         ; size = 4
_ne3    PROC                        ; COMDAT
; File d:\llvm_workspace\tests\ne.c
; Line 11
    xor eax, eax
    cmp DWORD PTR _n$[esp-4], eax
    setne   al
; Line 12
    ret 0
_ne3    ENDP
_TEXT   ENDS
PUBLIC  _ne2
; Function compile flags: /Ogtpy
;   COMDAT _ne2
_TEXT   SEGMENT
_n$ = 8                         ; size = 4
_ne2    PROC                        ; COMDAT
; Line 7
    xor eax, eax
    cmp eax, DWORD PTR _n$[esp-4]
    sbb eax, eax
    neg eax
; Line 8
    ret 0
_ne2    ENDP
_TEXT   ENDS
PUBLIC  _ne1
; Function compile flags: /Ogtpy
;   COMDAT _ne1
_TEXT   SEGMENT
_n$ = 8                         ; size = 4
_ne1    PROC                        ; COMDAT
; Line 3
    xor eax, eax
    cmp DWORD PTR _n$[esp-4], eax
    setne   al
; Line 4
    ret 0
_ne1    ENDP
_TEXT   ENDS
PUBLIC  _main
; Function compile flags: /Ogtpy
;   COMDAT _main
_TEXT   SEGMENT
_main   PROC                        ; COMDAT
; Line 14
    call    _rand
    call    _rand
    call    _rand
    xor eax, eax
    ret 0
_main   ENDP
_TEXT   ENDS
END 
```

`ne2()`其中使用`<`,`>`和`||`运算符**显然**更昂贵。`ne1()`并且`ne3()`分别使用`==`and`!=`运算符，更简洁且等效。

Visual Studio 2011*处于测试阶段*。我会认为这是一个错误。我对其他两个编译器的测试，即*gcc 4.6.2*和*clang 3.2*，`O2`优化开关在我的 Windows 7 机器上为所有三个测试（我拥有的）产生了完全相同的程序集。这是一个摘要：

```
$ cat ne.c

#include <stdbool.h>
bool ne1(int n) {
    return n != 0;
}

bool ne2(int n) {
    return n < 0 || n > 0;
}

bool ne3(int n) {
    return !(n != 0);
}

int main() {} 
```

使用 gcc 产生：

```
_ne1:
LFB0:
    .cfi_startproc
    movl    4(%esp), %eax
    testl   %eax, %eax
    setne   %al
    ret
    .cfi_endproc
LFE0:
    .p2align 2,,3
    .globl  _ne2
    .def    _ne2;   .scl    2;  .type   32; .endef
_ne2:
LFB1:
    .cfi_startproc
    movl    4(%esp), %edx
    testl   %edx, %edx
    setne   %al
    ret
    .cfi_endproc
LFE1:
    .p2align 2,,3
    .globl  _ne3
    .def    _ne3;   .scl    2;  .type   32; .endef
_ne3:
LFB2:
    .cfi_startproc
    movl    4(%esp), %ecx
    testl   %ecx, %ecx
    sete    %al
    ret
    .cfi_endproc
LFE2:
    .def    ___main;    .scl    2;  .type   32; .endef
    .section    .text.startup,"x"
    .p2align 2,,3
    .globl  _main
    .def    _main;  .scl    2;  .type   32; .endef
_main:
LFB3:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    andl    $-16, %esp
    call    ___main
    xorl    %eax, %eax
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
LFE3: 
```

和铿锵声：

```
 .def     _ne1;
    .scl    2;
    .type   32;
    .endef
    .text
    .globl  _ne1
    .align  16, 0x90
_ne1:
    cmpl    $0, 4(%esp)
    setne   %al
    movzbl  %al, %eax
    ret

    .def     _ne2;
    .scl    2;
    .type   32;
    .endef
    .globl  _ne2
    .align  16, 0x90
_ne2:
    cmpl    $0, 4(%esp)
    setne   %al
    movzbl  %al, %eax
    ret

    .def     _ne3;
    .scl    2;
    .type   32;
    .endef
    .globl  _ne3
    .align  16, 0x90
_ne3:
    cmpl    $0, 4(%esp)
    sete    %al
    movzbl  %al, %eax
    ret

    .def     _main;
    .scl    2;
    .type   32;
    .endef
    .globl  _main
    .align  16, 0x90
_main:
    pushl   %ebp
    movl    %esp, %ebp
    calll   ___main
    xorl    %eax, %eax
    popl    %ebp
    ret 
```

***[我的建议是将此作为Microsoft Connect](http://connect.microsoft.com/visualstudio)的错误提交。***

注意：我将它们编译为 C 源代码，因为我认为使用相应的 C++ 编译器不会在此处进行任何重大更改。

# javascript - 在 Firefox 和 IE 中获取 css 属性时遇到问题

> ID：10838678
> 
> 赞同：-2
> 
> 时间：2012-05-31T17:51:06.683
> 
> 标签：javascript, css, internet-explorer, firefox, google-chrome

**更新：**这里是小提琴：http: [//jsfiddle.net/ZqXZP/2/](http://jsfiddle.net/ZqXZP/2/)。如果您在 Chrome 上查看它，然后在 firefox 上查看，您将看到问题。

我正在尝试从元素中获取完整的填充字符串。我的原始代码是这样的：

```
var totalPaddingString = $(element).css("padding"); //Chrome returns "10px 0px 9px 10px" etc.

//do stuff with `totalPaddingString` here 
```

这在 Chrome 中运行良好。但是，当我尝试`.css()`在 Firefox 和 IE 中使用该方法时，会返回一个空字符串。起初我认为这两个浏览器如何使用 jQuery 有问题，所以我切换到原生 Javascript 属性：

```
var totalPaddingString = element.style.padding; 
```

但即使这样也会返回一个空字符串。有没有其他人遇到过这个问题？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:15:00.217

从[`.css()`文档](http://api.jquery.com/css/)中：

> 不支持速记 CSS 属性（例如边距、背景、边框）。例如，如果要检索渲染的边距，请使用：$(elem).css('marginTop') 和 $(elem).css('marginRight')，等等。

# ruby-on-rails - Capistrano cap deploy:setup 不创建任何文件

> ID：10838679
> 
> 赞同：1
> 
> 时间：2012-05-31T17:51:16.237
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, svn, capistrano

我在执行时没有收到任何错误消息`cap deploy:setup`。它尝试将文件夹创建`/myapp`为`mkdir -p /home/user/apps/myapp`，以及其他文件夹（发布、共享）。没有权限问题，因为我可以`mkdir -p /home/user/apps/myapp`在终端中执行而不会出现任何错误。此外，`cap deploy:check`给出`You appear to have all necessary dependencies installed`消息。我应该使用创建这些文件夹`cap deploy:setup`吗？如果是这样，为什么我没有收到任何错误消息以及创建的文件夹？

这是我的 config/deploy.rb 文件：

```
set :application, "myapp"
set :location, "myserver"
set :domain, "apps.mydomain.com"
set :user, "app_admin"

set :repository,  "svn+ssh://app_admin@192.168.XXX.XXX/home/svn/myapp"
set :svn_username, "svn_admin"
set :svn_password, "password"
set :use_sudo, false
set :scm, :subversion
default_run_options[:pty] = true

role :web, location                          
role :app, location                        
role :db,  location, :primary => true 

set :deploy_to, "/home/app_admin/#{application}"
set :deploy_via, :checkout
ssh_options[:forward_agent] = true

namespace :deploy do
  task :start, :roles => :app do
    run "touch #{current_path}/tmp/restart.txt"
  end
  task :stop, :roles => :app do
    #do nothing
  end
  desc "Restart Application"
  task :restart, :roles => :app do
    run "touch #{current_path}/tmp/restart.txt"
  end
end 
```

* * *

## 回答 #1

> 赞同：-8
> 
> 时间：2012-05-31T21:58:38.947

什么capistrano版本？什么操作系统？我在 Ubuntu 中遇到 Capistrano 问题 - 试试 Windows！我通常发现 Windows 是最好的服务器平台。除了偶发的崩溃，windows server 非常强大。

# jquery - 文件名和正则表达式

> ID：10838683
> 
> 赞同：0
> 
> 时间：2012-05-31T17:52:11.697
> 
> 标签：jquery, html, regex, filenames, image

有没有办法做这样的事情？

```
<img src="*some regular expression here*"> 
```

我有一个包含一堆图片的文件夹，我正在尝试显示所有符合给定正则表达式的图片。另外，我为此使用了 JQuery，所以是否可以执行以下操作：

```
<img src="*some regular expression searching for $(var1) and $(var2) within the filenames*"> 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:56:19.990

HTML 中的`img`标签一次只能加载一张图片。所以你需要创建多个图像，并弄清楚它们之间的关系。所以你可以做这样的事情：

```
var $parent = $('#parent_container');
$.each(filenames, function(i, filename) {
   if (filename.match(/my_patter(n*)/) {
        $parent.append('<img src="' + RegExp.$1 + '" />');
   }
}); 
```

显然，您的真实文件名不会由字母 n 重复可变次数组成。

这会将图像一个接一个地放置在一个父容器中。

# javascript - 加载时页面闪烁 - 隐藏/显示 javascript - Total Newbie

> ID：10838685
> 
> 赞同：0
> 
> 时间：2012-05-31T17:52:28.633
> 
> 标签：javascript, css

好的，就这样吧..我对Javascript完全陌生。我大约一个月前才开始使用 html&css。我所有的 htl 和 css 可能都非常落后，而且我还有很多东西要学习。我正在使用两段 javascript - 一段加载 nivo 滑块，另一段加载隐藏和显示简单选项卡：

[http://www.kollermedia.at/archive/2007/07/04/easy-tabs-11-free-tab-menu/](http://www.kollermedia.at/archive/2007/07/04/easy-tabs-11-free-tab-menu/)

当我把它们砍死试图让它们看起来像我想要的那样时，两者都很好。因为我把它们放在一起，所有的地狱都已经松动了（有点夸张），但它也可能有，因为虽然它们都在工作，但页面在加载时会严重闪烁。我一直在研究这个，我听说它被称为 DOM 闪烁。我知道这是由于在脚本启动之前显示了隐藏的 div。我还注意到页面高度的增加，在瞬间（有时更长）它需要隐藏内容激活滚动条，我知道这可能会产生影响. 我还在鼠标悬停命令的链接中使用背景图像....我不知道还能做什么。

我读过您可以添加脚本以仅在脚本加载后才显示内容，但我知道零 javascript :) ... 但是！

有人可以帮我解决这个问题吗？我在网上阅读了很多帖子，但他们都把代码放在了你应该填写的地方以及应该知道的地方。我很抱歉成为这样的人，但有人可以从字面上复制并粘贴我的 javascript 并对其进行编辑以显示给我看吗？

我知道这问得太多了，但我整天都在努力解决这个问题。这是一个显示问题的链接（选择投资组合链接时，延迟/闪烁会持续很长时间！）

网站链接：http: [//www.adam-ashton.co.uk/homepage.html](http://www.adam-ashton.co.uk/homepage.html)

（对不起，啰嗦了这么多）

谢谢，大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:02:01.657

页面闪烁可以在一些 css 的帮助下处理

```
.hideME {

visibility:hidden;
} 
```

将此类添加到您的 html 页面的最顶层元素（主要是 div ）

在脚本标签内，

写一个 window.load 函数

```
$(window).load(function() {

  $(selector).removeClass('hideMe');
}); 
```

这应该会变魔术:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:50:37.007

**在第 46 行添加这一行代码 .. 表示 window.load 的第一行**

```
 $('.container').removeClass('hideMe'); 
```

# sass - SCSS 变量变成“未定义变量”

> ID：10838686
> 
> 赞同：2
> 
> 时间：2012-05-31T17:52:29.850
> 
> 标签：sass

这是我的结构的基本视图：

```
+- application.scss
+- _variables.scss
+- normalize.scss 
```

`application.scss`包含

```
@import "variables";
@import "normalize"; 
```

`_variables.scss`包含

```
$test-variable: Verdana; 
```

如果它在 内使用，则可以使用`application.scss`，但不会延续到`normalize.scss`. 据我了解，这应该是可能的。或者？任何人都知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T05:43:54.713

您不必在使用变量的地方导入部分变量。（至少，不再）。

总是在使用 _variables 的其他 @imports 之前使用 _variables 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:08:13.690

您必须将 _variables.scss 导入规范化样式表才能访问这些变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T10:43:04.600

您必须将变量部分导入到使用变量的任何文件中。

# tsql - 多对多关系数据集的报表生成器 3 中的级联参数

> ID：10838689
> 
> 赞同：2
> 
> 时间：2012-05-31T17:52:49.517
> 
> 标签：tsql, reporting-services, reportbuilder

我收到了为这样的数据集中的项目创建级联参数的请求：

项目经理
    A 人 1
    A 人 2
    B 人 1

ETC...

当用户选择一个特定的经理时，这很好，但是用户也可以选择所有的经理，在这种情况下，参数下拉列表中会有多个相同的项目......

我对 SQL 很陌生，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:24:24.007

我认为您正在寻找一个`group by project`或`select distinct`第二个查询。

```
select project from ... where manager_id in (1,2) group by project 
```

# powershell-2.0 - 将供应商的远程 Dos（带变量）命令迁移到 PowerShell

> ID：10838690
> 
> 赞同：0
> 
> 时间：2012-05-31T17:52:50.057
> 
> 标签：powershell-2.0, powershell-remoting, papercut

我们正在尝试获取供应商的命令行远程执行并将其转换为 PowerShell 2.0。但是，由于变量的设置方式，我们似乎无法让命令远程运行。它们是空格分隔的，而不是逗号分隔的。我们创建了一个表单来获取变量的输入。有没有人有关于如何让它在 PowerShell 中工作的建议？谢谢！瑞德

```
#Call the Function
GenerateForm

#Attempting to translate Dos command below to Powershell
#winrs -r:$ServerName -nop -d:"C:\Program Files (x86)\PaperCut NG\server\bin\win\" server-command.exe $Command $Varible1 $Varible2 $Varible3 
#cd C:\Program Files\PaperCut NG\server\bin\win\server-command rename-printer oldprintserver oldqueuename newprintserver newqueuename
#From: http://www.papercut.com/kb/Main/HowToRenameAPrinter
#Also: http://www.papercut.com/kb/Main/CallingServerCommandRemotely
#Server Commands List: http://www.papercut.com/products/ng/manual/apdx-tools.html

#Have tried below and many others:
#Invoke-Command -computername $ServerName  -scriptblock {'C:\Program Files (x86)\PaperCut NG\server\bin\win\server-command.exe rename-printer $OldPrintServer $OldQueueName $NewPrintServer $NewQueueName}
#Invoke-Command -Authentication Kerberos -computername $ServerName -scriptblock {"C:\Program Files (x86)\PaperCut NG\server\bin\win\server-command.exe"} -ArgumentList {param(rename-printer[, $OldPrintServe][, $OldQueueName][, $NewPrintServer][, $NewQueueName])}
#Invoke-Command -computername $ServerName  -scriptblock {cd 'C:\Program Files (x86)\PaperCut NG\server\bin\win\'; .\'server-command.exe rename-printer' $OldPrintServer $OldQueueName $NewPrintServer $NewQueueName}
#Invoke-Command -computername $ServerName  -scriptblock {cd 'C:\Program Files (x86)\PaperCut NG\server\bin\win\'; .\'server-command.exe' + ' rename-printer' + ' ' + $OldPrintServer + ' ' + $OldQueueName + ' ' + $NewPrintServer + ' ' + $NewQueueName}
#Invoke-Command -computername $ServerName  &"C:\Program Files (x86)\PaperCut NG\server\bin\win\server-command.exe" "rename-printer" "$OldPrintServer" "$OldQueueName" "$NewPrintServer" "$NewQueueName"
#Invoke-Command -computername $ServerName  &{"C:\Program Files (x86)\PaperCut NG\server\bin\win\server-command.exe" "rename-printer" "$OldPrintServer" "$OldQueueName" "$NewPrintServer" "$NewQueueName"}
Invoke-Command -computername $ServerName  -scriptblock {&"C:\Program Files (x86)\PaperCut NG\server\bin\win\server-command.exe" "rename-printer" "$OldPrintServer" "$OldQueueName" "$NewPrintServer" "$NewQueueName"}

Read-Host "Press ENTER to continue" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:24:45.073

只需将所有内容都用引号括起来。以下是 PowerShell 中 ping 命令的外观：

```
ping "192.168.0.1" "-4" "-n" "5" 
```

所以你的命令看起来像这样：

```
&"C:\Program Files (x86)\PaperCut NG\server\bin\win\server-command.exe" "rename-printer" "$OldPrintServer" "$OldQueueName" "$NewPrintServer" "$NewQueueName" 
```

# objective-c - 表格视图的标签栏项目第三次触摸不滚动到顶部

> ID：10838692
> 
> 赞同：2
> 
> 时间：2012-05-31T17:52:58.370
> 
> 标签：objective-c, ios, uitableview, uiscrollview, uitabbarcontroller

我有一个标签栏项目，它连接导航控制器和 UIViewController 作为根视图控制器。第一次触摸选项卡栏项目会切换到该视图。第二次触摸弹出到根视图控制器。第三次触摸不会**滚动**到顶部。

我在其他应用程序中看到过这种滚动到顶部的行为，但是在搜索网络后，我找不到任何关于它的信息。

这是附加到标签栏项目的滚动视图或表格视图的默认行为，还是我需要自己实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-23T18:26:07.983

我意识到这是一个较老的问题，但我也在寻求创建这种行为，我认为我有一个更简单的解决方案。

首先，将您的 AppDelegate 设置为您的`UITabBarController`. 然后将此方法添加到**AppDelegate.m**：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {
    if ([tabBarController.viewControllers objectAtIndex:tabBarController.selectedIndex]==viewController)
    {
        if ([viewController isKindOfClass:[UITableViewController class]])
        {
            [[(UITableViewController *)viewController tableView] setContentOffset:CGPointZero animated:YES];
        }
        else if ([viewController isKindOfClass:[UINavigationController class]])
        {
            UINavigationController *nav = (UINavigationController *)viewController;
            if ([nav.visibleViewController isKindOfClass:[UITableViewController class]])
                [[(UITableViewController *)nav.visibleViewController tableView] setContentOffset:CGPointZero animated:YES];
        }
    }

    return YES;
} 
```

如果您的选项卡指向 a`UITableViewController`或以`UINavigationController`a`UITableViewController`作为根视图，则此方法有效，并且您不必担心区分哪些`UITableViewController`受到影响、发送通知等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T06:39:46.357

**这是单击标签栏时滚动到表格视图顶部的解决方案**

在 AppDelegate 中设置标签栏委托

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {
    if (tabBarController.selectedIndex == 0) {

        UINavigationController *selectedNav = [self.tabBarController.viewControllers objectAtIndex:self.tabBarController.selectedIndex];
        UIViewController *currentVC = selectedNav.visibleViewController;
        if([currentVC isMemberOfClass:NSClassFromString(@"HomeViewController")])
        {

            [[NSNotificationCenter defaultCenter] postNotificationName:@"refreshView" object:nil];
        }
    }
    return YES;
} 
```

在 HomeViewController.m 视图中确实加载了监听通知

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(refreshView:)
                                                 name:@"refreshView"
                                               object:nil]; 
```

刷新方法

```
 -(void)refreshView:(NSNotification *) notification{
        if (self == self.navigationController.topViewController)
            [self.tableView scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES];
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:47:06.040

不，这不是默认行为，您必须自己实现。

我会通过让应用程序委托标签栏控制器的委托来做到这一点，并实现 -tabBarController:didSelectViewController: 来发布通知。在您的表格视图控制器中收听该通知并执行以下操作：

```
if (self == self.navigationController.topViewController)
    [self.tableView scrollToTop]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T06:45:14.033

由于您的选项卡控制器只能有一个委托，因此您可能需要查看[这个问题](https://stackoverflow.com/questions/16487392/can-i-detect-taps-on-a-controllers-tab-without-being-its-delegate)的答案，它描述了如何使用 KVO 监听点击。

# javascript - 函数语法，传递变量

> ID：10838694
> 
> 赞同：0
> 
> 时间：2012-05-31T17:53:05.927
> 
> 标签：javascript, jquery

我正在尝试制作一个简单的功能但做错了什么。点击href会导致页面跳转，功能失败。小提琴：http: [//jsfiddle.net/XkzUK/5/](http://jsfiddle.net/XkzUK/5/)

HTML：

```
<nav>
<ul id="site-nav">
    <li class="nav1"><a href="#recent">Recent</a></li>
    <li class="nav2"><a href="#highlights">Highlights</a></li>
    <li class="nav3"><a href="#animals">Animals</a></li>
    <li class="nav4"><a href="#cars">Cars</a></li>
</ul>
</nav>
<div id="content-listing">
    <div id="recent">
        <ul class="top-level">
        </ul>
    </div>
    <!--end recent-->
    <div id="highlights">
        <ul class="top-level">
        </ul>
    </div>
    <!--end highlights-->
    <div id="animals">
        <ul class="top-level">
        </ul>
    </div>
    <!--end animals-->
    <div id="cars">
        <ul class="top-level">
        </ul>
    </div>
    <!--end cars-->
</div>
<!--end content-listing--> 
```

JS：

```
var test1;
var test2;
var test3;
var test4;

function switcher(divToShow, thisVar, otherVar, ajaxContent) {
    $("#site-nav li a").parents().removeClass("nav-active");
    $(this).addClass("nav-active");
    if(otherVar) {
        otherVar.detach();
    }

    if(typeof thisVar === 'undefined') {
        thisVar = $(divToShow + "ul.top-level").load('/echo/html/', {
            html: ajaxContent
        }, function () {
            alert("I'm new");
        });
    } else {
        thisVar.appendTo("#content-listing");
        alert("I'm old");
    }
}

//Recent
$("#site-nav .nav1").on("click", function (event) {
    switcher("#recent", "test1", "test2", "<li>1</li> <li>2</li> <li>3</li>");
    event.preventDefault();
});

//Highlights
$("#site-nav .nav2").on("click", function (event) {
    switcher("#recent", "test2", "test1", "<li>A</li> <li>B</li> <li>C</li>");
    event.preventDefault();
});​​ 
```

[http://jsfiddle.net/XkzUK/5/](http://jsfiddle.net/XkzUK/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:56:50.833

你有错误

`otherVar.detach()`

因为，`otherVar`只是一个字符串，所以`.detach()`不起作用，`.detach()`接受 jQuery 对象。

所以正确的格式应该是

`$(otherVar).detach();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:55:35.030

您将字符串作为所有这些参数传递。
因此，调用类似`detach()`or的方法`appendTo()`会引发错误，因为这些方法不存在于字符串上。

您需要传递 jQuery 对象。

# mercurial - Mercurial API：如何获取已拉出但尚未更新的文件的即将到来的内容？

> ID：10838699
> 
> 赞同：2
> 
> 时间：2012-05-31T17:53:33.573
> 
> 标签：mercurial, mercurial-extension, mercurial-api

我是 Mercurial API 和 Python 的完全菜鸟，但我现在正在尝试为我自己和我的同事编写一个有用的扩展。

假设我有一个包含一些代码和辅助文件的存储库`.hgdata`。代码 和`.hgdata`都在 Mercurial 的控制之下。当我执行`pull-extended`我的扩展提供的命令时，我希望它进行拉动，然后分析 a 的状态`.hgdata`并可能进行一些额外的操作。问题是，当我的命令被调用时，它只是拉取传入的变更集，但如果不进行先前的存储库更新，它就无法查看*实际情况。* 除了存储库更新之外*，*`.hgdata`还有什么方法可以观看更新后的内容吗？ *`.hgdata`*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:51:43.127

我在[Mercurial 的官方 IRC 频道](http://mercurial.selenic.com/wiki/IRC)上收到了答复：

为了在拉取后获得实际的文件状态，我们可以使用`repo[revision][file].data()`.

PS我还没有检查过。如果可行，我将关闭问题。*

# javascript - 具有固定滚动行和固定滚动列的大型动态大小的 html 表

> ID：10838700
> 
> 赞同：51
> 
> 时间：2012-05-31T17:53:42.143
> 
> 标签：javascript, jquery, html, css, html-table

**我需要在网页上显示一个大表格，并且需要防止第一列和第一行滚动。** 我想动态设置此表的垂直大小（在一些静态大小的页眉/页脚页面内容之间），以使其尽可能高，而不强制浏览器窗口具有垂直滚动条。

```
 browser window\/
+--------------------------------------------------------------+  /\
|   /\     /\  /\         /\       /\      /\     /\ /\        |  fixed static
|    web page header fields and text                           |  |  size
|   \/    \/   \/         \/       \/     \/     \/   \/       |__\/__
|               +----<<<table-scrollbar>>>>>----------------+  |  /\
|+--------------+--------+--------+--------+--------+-------+  |   |
||              |        |colspan |        |        | fixed |  |   |
||  fixed       |  fixed |  fixed | fixed  |  fixed | more> |  |   |
|+--------------+--+--+--+---+----+--+--+--+--------+-------++ |   |
||  fixed       |  |  |  |   |    |  |  |  |        |       || |   |
|+--------------+--+--+--+---+----+--+--+--+--------+-------+t |   |
||  fixed       |  |  |  |   |    |  |  |  |        |       |a |   |
|+--------------+--+--+--+---+----+--+--+--+--------+-------+b |   |
||  fixed       |  |  |  |   |    |  |  |  |        |       |l |   |
|+--------------+--+--+--+---+----+--+--+--+--------+-------+e |   set
||  fixed       |  |  |  |   |    |  |  |  |        |       || |   dynamic
||  multi-line  |  |  |  |   |    |  |  |  |        |       |s |   size at
|+--------------+--+--+--+---+----+--+--+--+--------+-------+c |   runtime
||  fixed       |  |  |  |   |    |  |  |  |        |       |r |   |
|+--------------+--+--+--+---+----+--+--+--+--------+-------+o |   |
||  fixed       |  |  |  |   |    |  |  |  |        |       |l |   |
|+--------------+--+--+--+---+----+--+--+--+--------+-------+l |   |
||  fixed       |  |  |  |   |    |  |  |  |        |       |b |   |
||              |  |  |  |   |    |  |  |  |        |       |a 
|+--------------+--+--+--+---+----+--+--+--+--------+-------+r |   |
|| fixed, moreV |  |  |  |   |    |  |  |  |        |       || |   |
|+--------------+--+--+--+---+----+--+--+--+--------+-------++ |__\/__
|   /\     /\  /\         /\       /\      /\     /\ /\        |  /\
|    web page footer fields and text                           |  fixed static
|   \/    \/   \/         \/       \/     \/     \/   \/       |  |  size
+--------------------------------------------------------------+  \/ 
```

这只需要在现代浏览器中工作，使用 all/any: html, css, javascript, jquery

重要性顺序：

*   具有许多表单字段、隐藏值、javascript 行折叠等的复杂表，稍后我将添加
*   第一行将有 colspans
*   行将具有可变高度
*   第一行：从垂直滚动固定，但可以水平滚动
*   第一列：从水平滚动固定，但可以垂直滚动
*   动态调整此“表格”的大小以填充静态大小的页眉/页脚 html 之间的屏幕
*   滚动条的位置（如上面我很棒的 ascii 艺术中所描绘的）并不重要。

这是一个非常基本的屏幕 html 示例，没有任何滚动/调整大小功能：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>big scrolling table example</TITLE>
</HEAD>

<BODY>
  <form name="MyForm" method="POST" action="">
    <!-- static size header junk--><!-- static size header junk--><!-- static size header junk-->
    <table border="1" width="100%" cellspacing="1" cellpadding="0" align="center">
    <tr>
    <td width="35%" align="left">header junk left</td>
    <td >- HEADER JUNK MIDDLE -</td>
    <td width="35%" align="right">header junk right</td>
    </tr>
    </table>
    <br>
    <table border="0" width="95%" cellspacing="1" cellpadding="0" align="center">
    <tr>
    <td width="60%" align="left">header junk left</td>
    <td width="40%" align="right">check it out! <input type="checkbox" onchange="alert('your javascript here');" value="Y" name="checkitout"></td>
    </tr>

    <!-- big table here!!--><!-- big table here!!--><!-- big table here!!--><!-- big table here!!-->

    <table border="1" width="95%" cellspacing="1" cellpadding="0" align="center">
    <tr>
    <td>fixed can be long<br>or short</td>
    <td colspan="4">scroll A</td>
    <td colspan="2">scroll B</td>
    <td >scroll C</td>
    <td colspan="4">scroll D</td>
    <td colspan="2">scroll E</td>
    <td >scroll F</td>
    <td colspan="4">scroll G</td>
    <td colspan="2">scroll H</td>
    <td >scroll I</td>
    <td colspan="4">scroll J</td>
    <td colspan="2">scroll K</td>
    <td >scroll L</td>
    <td colspan="4">scroll M</td>
    <td colspan="2">scroll N</td>
    <td >scroll O</td>
    </tr>

    <tr>
        <td>fixed 2</td>
        <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
        <td>1 B</td><td>2 B</td>
        <td >1 C</td>
        <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...</td>
        <td>1 E</td><td>2 E</td>
        <td >1 F</td>
        <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
        <td>1 H</td><td>222 H</td>
        <td >1 I</td>
        <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
        <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
        <td >1 L</td>
        <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
        <td>1 N</td><td>2 N</td>
        <td >1 1 1 1 1 1 1 O</td>
    </tr>
    <tr>
        <td>fixed 3</td>
        <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
        <td>1 B</td><td>2 B</td>
        <td >1 C</td>
        <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...</td>
        <td>1 E</td><td>2 E</td>
        <td >1 F</td>
        <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
        <td>1 H</td><td>222 H</td>
        <td >1 I</td>
        <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
        <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
        <td >1 L</td>
        <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
        <td>1 N</td><td>2 N</td>
        <td >1 1 1 1 1 1 1 O</td>
    </tr>
    <tr>
        <td>fixed 4</td>
        <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
        <td>1 B</td><td>2 B</td>
        <td >1 C</td>
        <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...<br>more...<br>more...<br>more...</td>
        <td>1 E</td><td>2 E</td>
        <td >1 F</td>
        <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
        <td>1 H</td><td>222 H</td>
        <td >1 I</td>
        <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
        <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
        <td >1 L</td>
        <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
        <td>1 N</td><td>2 N</td>
        <td >1 1 1 1 1 1 1 O</td>
    </tr>
    <tr>
        <td>fixed 5</td>
        <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
        <td>1 B</td><td>2 B</td>
        <td >1 C</td>
        <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...</td>
        <td>1 E</td><td>2 E</td>
        <td >1 F</td>
        <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
        <td>1 H</td><td>222 H<br>H<br>H<br>H<br>H</td>
        <td >1 I</td>
        <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
        <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
        <td >1 L</td>
        <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
        <td>1 N</td><td>2 N</td>
        <td >1 1 1 1 1 1 1 O</td>
    </tr>
    <tr>
        <td>fixed 6<br>6<br>6<br>6</td>
        <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
        <td>1 B</td><td>2 B</td>
        <td >1 C</td>
        <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...</td>
        <td>1 E</td><td>2 E</td>
        <td >1 F</td>
        <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
        <td>1 H</td><td>222 H</td>
        <td >1 I</td>
        <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
        <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
        <td >1 L</td>
        <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
        <td>1 N</td><td>2 N</td>
        <td >1 1 1 1 1 1 1 O</td>
    </tr>

    </table>

    <!-- static size footer junk--><!-- static size footer junk--><!-- static size footer junk--><!-- static size footer junk-->
    <table border="1" width="100%" cellspacing="1" cellpadding="0" align="center">
    <tr>
    <td width="35%" align="left">footer junk left</td>
    <td >- FOOTER JUNK MIDDLE -</td>
    <td width="35%" align="right">footer junk right</td>
    </tr>

  </form>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-06T21:42:48.773

**编辑 5：** - 添加了可配置的固定行和列。- 修复了列宽和高度问题 - 减少了复杂选择器的使用

**用法：**

```
 $('#cTable').cTable({
        width: 1300,  
        height: 500,  
        fCols: 2,
        fRows: 2
    }); 
```

**演示： http:** [//jsfiddle.net/rCuPf/7/embedded/result/](http://jsfiddle.net/rCuPf/7/embedded/result/)（更新演示）

**编辑 4：**更新了第 1 列的 colSpan。**演示：http:** ~~//jsfiddle.net/skram/rKjk3/26/~~

**编辑 3：**做了一些清理和一些修复：http: ~~[//jsfiddle.net/rKjk3/22](http://jsfiddle.net/rKjk3/22)~~在 IE9、FF 和 Chrome 中测试。（我现在没有最新的IE来测试它）

**编辑 2：**修复 IE： http: ~~//jsfiddle.net/rKjk3/15/embedded/result/~~（参见上面的最新版本）

**编辑 1：**修复调整窗口大小~~http://jsfiddle.net/rKjk3/11/~~（参见上面的最新版本）

*   添加了 window.resize 事件处理程序来设置宽度，`rightContainer`因此实际表格的宽度将随着您调整大小而增加。
*   去掉了固定宽度，`SBWrapper`以便充分利用容器内的可用空间。

我为您的要求创建了 2 个演示。

1.  示例以显示使用简单标记结构呈现的 html 的外观。这将允许您查看正在呈现的结构及其工作方式:)
    **演示：http:** [//jsfiddle.net/GmJ22/7/](http://jsfiddle.net/GmJ22/7/)

2.  带有您发布的标记的实际演示。该代码只是一个粗略的版本，可能需要进行一些清理。现在您可以配置表格的宽度和高度。我发布它，以便您可以查看并给我一些反馈。
    **演示： http:** ~~//jsfiddle.net/rKjk3/10/embedded/result/~~（见下面的固定版本）

**完整代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<HTML>
<HEAD>
<TITLE>big scrolling table example</TITLE>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(function() {
        $.fn.cTable = function(o) {        

            this.wrap('<div class="cTContainer" />');
            this.wrap('<div class="relativeContainer" />');    
            //Update below template as how you have it in orig table
            var origTableTmpl = '<table border="1" cellspacing="1" cellpadding="0" align="center" width="95%" ></table>';            
            //get row 1 and clone it for creating sub tables
            var row1 = this.find('tr').slice(0, o.fRows).clone();

            var r1c1ColSpan = 0;
            for (var i = 0; i < o.fCols; i++ ) {
                r1c1ColSpan += this[0].rows[0].cells[i].colSpan;
            }

            //create table with just r1c1 which is fixed for both scrolls
            var tr1c1 = $(origTableTmpl);
            row1.each(function () {            
                var tdct = 0;
                $(this).find('td').filter( function () {
                    tdct += this.colSpan;
                    return tdct > r1c1ColSpan;
                }).remove();                
            });
            row1.appendTo(tr1c1);
            tr1c1.wrap('<div class="fixedTB" />');
            tr1c1.parent().prependTo(this.closest('.relativeContainer'));

            //create a table with just c1        
            var c1= this.clone().prop({'id': ''});
            c1.find('tr').slice(0, o.fRows).remove();
            c1.find('tr').each(function (idx) {
                var c = 0;
                $(this).find('td').filter(function () {
                    c += this.colSpan;
                    return c > r1c1ColSpan;
                }).remove();           
            });

            var prependRow = row1.first().clone();
            prependRow.find('td').empty();
            c1.prepend(prependRow).wrap('<div class="leftSBWrapper" />')
            c1.parent().wrap('<div class="leftContainer" />');            
            c1.closest('.leftContainer').insertAfter('.fixedTB');

            //create table with just row 1 without col 1
            var r1 = $(origTableTmpl);
            row1 = this.find('tr').slice(0, o.fRows).clone();
            row1.each(function () {
                var tds = $(this).find('td'), tdct = 0;
                tds.filter (function () {
                    tdct += this.colSpan;
                    return tdct <= r1c1ColSpan;
                }).remove();
            });
            row1.appendTo(r1);
            r1.wrap('<div class="topSBWrapper" />')
            r1.parent().wrap('<div class="rightContainer" />')  
            r1.closest('.rightContainer').appendTo('.relativeContainer');

            $('.relativeContainer').css({'width': 'auto', 'height': o.height});

            this.wrap('<div class="SBWrapper"> /')        
            this.parent().appendTo('.rightContainer');    
            this.prop({'width': o.width});    

            var tw = 0;
            //set width and height of rendered tables
            for (var i = 0; i < o.fCols; i++) {
                tw += $(this[0].rows[0].cells[i]).outerWidth(true);
            }
            tr1c1.width(tw);
            c1.width(tw);

            $('.rightContainer').css('left', tr1c1.outerWidth(true));

            for (var i = 0; i < o.fRows; i++) {
                var tr1c1Ht = $(c1[0].rows[i]).outerHeight(true);
                var thisHt = $(this[0].rows[i]).outerHeight(true);
                var finHt = (tr1c1Ht > thisHt)?tr1c1Ht:thisHt;
                $(tr1c1[0].rows[i]).height(finHt);
                $(r1[0].rows[i]).height(finHt);
            }
            $('.leftContainer').css({'top': tr1c1.outerHeight(true), 'width': tr1c1.outerWidth(true)});

            var rtw = $('.relativeContainer').width() - tw;
            $('.rightContainer').css({'width' : rtw, 'height': o.height, 'max-width': o.width - tw});    

            var trs = this.find('tr');
            trs.slice(1, o.fRows).remove();
            trs.slice(0, 1).find('td').empty();
            trs.each(function () {
                var c = 0;
                $(this).find('td').filter(function () {
                    c += this.colSpan;
                    return c <= r1c1ColSpan;
                }).remove();
            });

            r1.width(this.outerWidth(true));

            for (var i = 1; i < c1[0].rows.length; i++) {
                var c1Ht = $(c1[0].rows[i]).outerHeight(true);
                var thisHt = $(this[0].rows[i]).outerHeight(true);
                var finHt = (c1Ht > thisHt)?c1Ht:thisHt;
                $(c1[0].rows[i]).height(finHt);
                $(this[0].rows[i]).height(finHt);
            }

            $('.SBWrapper').css({'height': $('.relativeContainer').height() - $('.topSBWrapper').height()});            

            $('.SBWrapper').scroll(function () {
                var rc = $(this).closest('.relativeContainer');
                var lfW = rc.find('.leftSBWrapper');
                var tpW = rc.find('.topSBWrapper');

                lfW.css('top', ($(this).scrollTop()*-1));
                tpW.css('left', ($(this).scrollLeft()*-1));        
            });

            $(window).resize(function () {
                $('.rightContainer').width(function () {
                    return $(this).closest('.relativeContainer').outerWidth() - $(this).siblings('.leftContainer').outerWidth();
                });

            });
        }

        $('#cTable').cTable({
            width: 1300,
            height: 500,
            fCols: 2,
            fRows: 2
        });
    });
</script>
<style>
    .cTContainer { overflow: hidden; padding: 2px; }
    .cTContainer table { table-layout: fixed; }
    .relativeContainer { position: relative; overflow: hidden;}    
    .fixedTB { position: absolute; z-index: 11;  }
    .leftContainer { position: absolute; overflow: hidden;  }
    .rightContainer { position: absolute; overflow: hidden;  }
    .leftSBWrapper { position: relative; z-index: 10; }
    .topSBWrapper { position: relative; z-index: 10; width: 100%; }
    .SBWrapper { width: 100%; overflow: auto; }

    td { background-color: white; overflow: hidden; padding: 1px; }    
</style>
</HEAD>
<BODY>
  <form name="MyForm" method="POST" action="">
    <table border="1" width="100%" cellspacing="1" cellpadding="0" align="center">
        <tr>
        <td width="35%" align="left">header junk left</td>
        <td >- HEADER JUNK MIDDLE -</td>
        <td width="35%" align="right">header junk right</td>
        </tr>
    </table>
    <br />
    <table border="0" width="95%" cellspacing="1" cellpadding="0" align="center">
        <tr>
        <td width="60%" align="left">header junk left</td>
        <td width="40%" align="right">check it out! <input type="checkbox" onchange="alert('your javascript here');" value="Y" name="checkitout"></td>
        </tr>
    </table>

    <!-- big table here!!--><!-- big table here!!--><!-- big table here!!--><!-- big table here!!-->
    <table border="1" width="95%" cellspacing="1" cellpadding="0" align="center" id="cTable" >
        <tr>
            <td width="5%" colspan="3">fixed can be long<br>or short</td>
            <td width="9%" colspan="4">scroll A</td>
            <td width="7%" colspan="2">scroll B</td>
            <td width="3%">scroll C</td>
            <td width="9%" colspan="4">scroll D</td>
            <td width="7%" colspan="2">scroll E</td>
            <td width="3%">scroll F</td>
            <td width="9%" colspan="4">scroll G</td>
            <td width="7%" colspan="2">scroll H</td>
            <td width="3%">scroll I</td>
            <td width="9%" colspan="4">scroll J</td>
            <td width="7%" colspan="2">scroll K</td>
            <td width="3%">scroll L</td>
            <td width="9%" colspan="4">scroll M</td>
            <td width="7%" colspan="2">scroll N</td>
            <td width="3%">scroll O</td>
        </tr>
        <tr>
            <td width="5%" colspan="3">2nd fixed header</td>
            <td width="9%" colspan="4">scroll 2A</td>
            <td width="7%">scroll 2B-1</td>
            <td width="7%">scroll 2B-2 </td>
            <td width="3%">scroll 2C</td>
            <td width="9%" colspan="4">scroll 2D</td>
            <td width="7%" colspan="2">scroll 2E</td>
            <td width="3%">scroll 2F</td>
            <td width="9%" colspan="4">scroll 2G</td>
            <td width="7%" colspan="2">scroll 2H</td>
            <td width="3%">scroll 2I</td>
            <td width="9%" colspan="4">scroll 2J</td>
            <td width="7%" colspan="2">scroll 2K</td>
            <td width="3%">scroll 2L</td>
            <td width="9%" colspan="4">scroll 2M</td>
            <td width="7%" colspan="2">scroll 2N</td>
            <td width="3%">scroll 2O</td>
        </tr>
        <tr>
            <td>2</td>
            <td>2</td>
            <td>2</td>
            <td>1 1 1 1 1 A</td>
            <td>2 2 2 2 2 A</td>
            <td>3 3 3 3 3 A</td>
            <td>4 4 4 4 4 A</td>
            <td>1 B</td>
            <td>2 B</td>
            <td >1 C</td>
            <td>1 D</td>
            <td>2 D</td>
            <td>3 D</td>
            <td>4 D<br>more...</td>
            <td>1 E</td>
            <td>2 E</td>
            <td >1 F</td>
            <td>1 1 1 G</td>
            <td>2 2 G</td>
            <td>3 G</td>
            <td>4 4 4 4 G</td>
            <td>1 H</td>
            <td>222 H</td>
            <td >1 I</td>
            <td>1 J</td>
            <td>2 J</td>
            <td>3 J</td>
            <td>4 J</td>
            <td>1 K</td>
            <td>2 2 K<br>more..<br>more..</td>
            <td >1 L</td>
            <td>1 M</td>
            <td>22 M</td>
            <td>333 M</td>
            <td>4444 M</td>
            <td>1 N</td>
            <td>2 N</td>
            <td >1 1 1 1 1 1 1 O</td>
        </tr>
        <tr>
            <td colspan="2">fixed 3</td>
            <td>3</td>
            <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
            <td>1 B</td><td>2 B</td>
            <td >1 C</td>
            <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...</td>
            <td>1 E</td><td>2 E</td>
            <td >1 F</td>
            <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
            <td>1 H</td><td>222 H</td>
            <td >1 I</td>
            <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
            <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
            <td >1 L</td>
            <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
            <td>1 N</td><td>2 N</td>
            <td >1 1 1 1 1 1 1 O</td>
        </tr>
        <tr>
            <td colspan="3">fixed 4</td>
            <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
            <td>1 B</td><td>2 B</td>
            <td >1 C</td>
            <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...<br>more...<br>more...<br>more...</td>
            <td>1 E</td><td>2 E</td>
            <td >1 F</td>
            <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
            <td>1 H</td><td>222 H</td>
            <td >1 I</td>
            <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
            <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
            <td >1 L</td>
            <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
            <td>1 N</td><td>2 N</td>
            <td >1 1 1 1 1 1 1 O</td>
        </tr>
        <tr>
            <td colspan="3">fixed 5</td>
            <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
            <td>1 B</td><td>2 B</td>
            <td >1 C</td>
            <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...</td>
            <td>1 E</td><td>2 E</td>
            <td >1 F</td>
            <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
            <td>1 H</td><td>222 H<br>H<br>H<br>H<br>H</td>
            <td >1 I</td>
            <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
            <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
            <td >1 L</td>
            <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
            <td>1 N</td><td>2 N</td>
            <td >1 1 1 1 1 1 1 O</td>
        </tr>
        <tr>
            <td>6</td>
            <td>6</td>
            <td>6</td>
            <td>1 1 1 1 1 A</td><td>2 2 2 2 2 A</td><td>3 3 3 3 3 A</td><td>4 4 4 4 4 A</td>
            <td>1 B</td><td>2 B</td>
            <td >1 C</td>
            <td>1 D</td><td>2 D</td><td>3 D</td><td>4 D<br>more...</td>
            <td>1 E</td><td>2 E</td>
            <td >1 F</td>
            <td>1 1 1 G</td><td>2 2 G</td><td>3 G</td><td>4 4 4 4 G</td>
            <td>1 H</td><td>222 H</td>
            <td >1 I</td>
            <td>1 J</td><td>2 J</td><td>3 J</td><td>4 J</td>
            <td>1 K</td><td>2 2 K<br>more..<br>more..</td>
            <td >1 L</td>
            <td>1 M</td><td>22 M</td><td>333 M</td><td>4444 M</td>
            <td>1 N</td><td>2 N</td>
            <td >1 1 1 1 1 1 1 O</td>
        </tr>
    </table>
    <br />
    <!-- static size footer junk--><!-- static size footer junk--><!-- static size footer junk--><!-- static size footer junk-->
    <table border="1" width="100%" cellspacing="1" cellpadding="0" align="center">
        <tr>
        <td width="35%" align="left">footer junk left</td>
        <td >- FOOTER JUNK MIDDLE -</td>
        <td width="35%" align="right">footer junk right</td>
        </tr>
    </table>
</form>
</BODY>
</HTML> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-04T16:24:00.203

我同意[@FedericoGiust 的回答](https://stackoverflow.com/a/10838783/623041)；但既然你要求更多细节......

```
<script type="text/javascript"
        src="http://code.jquery.com/jquery-1.7.2.min.js">
</script>
<script type="text/javascript"
        src="http://datatables.net/download/build/jquery.dataTables.min.js">
</script>
<script type="text/javascript"
        src="http://datatables.net/download/build/FixedColumns.min.js">
</script>
<script type="text/javascript">
  $(document).ready(function() {
    var oTable = $('#bigtable').dataTable({
        "sScrollY": "300px",  // set vertical size dynamically here
        "sScrollX": "100%",
        "bPaginate": false,
        "bFilter": false
    });
    new FixedColumns(oTable);
  });​
</script> 
```

您需要添加一行虚拟列标题，以便 Datatables 能够处理 colspan。

[在jsfiddle](http://jsfiddle.net/J53ax/)上看到它。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-31T17:59:55.870

您可以使用数据表

[数据表](http://datatables.net/extras/fixedheader/)

这是一个了不起的 jquery 表格插件，它还有许多有趣的附加功能和插件，包括固定页眉和页脚、列排序、可变宽度、固定宽度、ajax 等等。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-05T23:57:49.857

适用于普通表格，它只更改标题单元格，就地（不删除、复制或在表格元素注入之外）。这具有允许任何单元格中任何尺寸的任何内容的优点（+允许动态修改该内容）。

查看实际操作：[fullpage.html](http://kakao.ro/public/Tables/fullpage.html)、[overflow_scroll.html](http://kakao.ro/public/Tables/overflow_scroll.html)、[fullpage_untouched.html](http://kakao.ro/public/Tables/fullpage_untouched.html)。

垂直和水平`th`单元格在滚动时应保持可见并对齐。

此解决方案不使用任何框架。随意使用 jquery 或原型（或任何其他框架）替换现有的助手（滚动偏移）。

`_table_make_fixed_header_reposition`在对表格内容进行动态更改时，您应该添加要调用的代码挂钩。

~~我没有在 Windows XP 上进行测试（所有浏览器都没有加速渲染）。~~

蓝色背景、阴影、边框等都是 CSS 很酷的东西。你可以随心所欲地制作它，你只需要创建一个普通的表格（只需添加单元格样式`.DivWrapper`而不是`TH`）。

```
<!DOCTYPE html>
<body>
    <head>
        <style>
            .TableLarge td, .TableLarge th{
                border-style: solid;
                border-width: 1px;

                border-color: #CAE3EF;

                padding: 7px;
                white-space: nowrap;
                font-family: Verdana;
                font-size: 10px;
            }

            .TableLarge{
                border-style: none;
                border-collapse: collapse;
            }

            #padding_for_test{
                height: 3000px;
                width: 9000px;
            }

        </style>
        <script type="text/javascript">
            function table_make_fixed_header(elTable, bHorizontal, bVertical, nRepositionIntervalMilliseconds, bWrappedByScrollableDiv)
            {
                if(!bHorizontal && !bVertical)
                    return;

                if(!elTable.id)
                    elTable.id="FixedVH_Headers_"+(new Date().getTime())+Math.floor(Math.random()*10000000);

                var zIndex=1;
                if(window.getComputedStyle)
                    zIndex=parseInt(window.getComputedStyle(elTable))?parseInt(window.getComputedStyle(elTable))+1:1;

                var fnSetupHeaderCell=function(elCell, zIndex)
                {
                    var elDivWrapper=document.createElement("div");

                    elDivWrapper.setAttribute("style", "-moz-box-shadow: 3px 3px 4px #aaaaaa; -webkit-box-shadow: 3px 3px 4px #aaaaaa; box-shadow: 3px 3px 4px #aaaaaa;");
                    elDivWrapper.style.zIndex=zIndex;
                    elDivWrapper.style.backgroundColor="#0000ee";
                    elDivWrapper.style.color="white";
                    elDivWrapper.style.padding="3px";

                    elDivWrapper.className="DivWrapper";
                    elDivWrapper.style.position="relative";

                    while(elCell.childNodes.length)
                        elDivWrapper.appendChild(elCell.childNodes[0]);
                    elCell.appendChild(elDivWrapper);
                };

                if(bVertical)
                    for(var r=bHorizontal?1:0; r<elTable.rows.length; r++)
                        fnSetupHeaderCell(elTable.rows[r].cells[0], zIndex);
                if(bHorizontal)
                    for(var c=bVertical?1:0; c<elTable.rows[0].cells.length; c++)
                        fnSetupHeaderCell(elTable.rows[0].cells[c], zIndex);

                _table_make_fixed_header_reposition(elTable.id, bHorizontal, bVertical, bWrappedByScrollableDiv);

                //this could be CPU intensive, depending on the number of events fired and size of the table.
                var onScrollEventHandler=function(ev){
                    _table_make_fixed_header_reposition(elTable.id, bHorizontal, bVertical, bWrappedByScrollableDiv);
                };

                var elScrollable=bWrappedByScrollableDiv?elTable.parentNode:window;
                if(elScrollable.addEventListener)
                    elScrollable.addEventListener('scroll', onScrollEventHandler, false);
                else if (elScrollable.attachEvent)
                    elScrollable.attachEvent('scroll', onScrollEventHandler);

                //this is undesired for performance reasons, hooks and event listeners are prefered instead.
                if(nRepositionIntervalMilliseconds>0)
                    setInterval("_table_make_fixed_header_reposition('"+elTable.id+"', "+(bHorizontal?"true":"false")+", "+(bVertical?"true":"false")+", "+(bWrappedByScrollableDiv?"true":"false")+")", nRepositionIntervalMilliseconds);
            }

            function _table_make_fixed_header_reposition(strTableID, bHorizontal, bVertical, bWrappedByScrollableDiv)
            {
                var elTable=document.getElementById(strTableID);

                var strLeft;
                var strTop;
                if(bWrappedByScrollableDiv)
                {
                    strLeft=Math.min(Math.max(elTable.parentNode.scrollLeft-elTable.offsetLeft+elTable.parentNode.offsetLeft, 0), elTable.offsetWidth)+"px";
                    strTop=Math.min(Math.max(elTable.parentNode.scrollTop-elTable.offsetTop+elTable.parentNode.offsetTop, 0), elTable.offsetHeight)+"px";
                }
                else
                {
                    strLeft=Math.min(Math.max(f_scrollLeft()-elTable.offsetLeft, 0), elTable.offsetWidth)+"px";
                    strTop=Math.min(Math.max(f_scrollTop()-elTable.offsetTop, 0), elTable.offsetHeight)+"px";
                }

                if(bVertical)
                    for(var r=bHorizontal?1:0; r<elTable.rows.length; r++)
                        elTable.rows[r].cells[0].childNodes[0].style.left=strLeft;
                if(bHorizontal)
                    for(var c=bVertical?1:0; c<elTable.rows[0].cells.length; c++)
                        elTable.rows[0].cells[c].childNodes[0].style.top=strTop;
            }

            //http://www.softcomplex.com/docs/get_window_size_and_scrollbar_position.html
            function f_scrollLeft(){
                return f_filterResults (
                    window.pageXOffset ? window.pageXOffset : 0,
                    document.documentElement ? document.documentElement.scrollLeft : 0,
                    document.body ? document.body.scrollLeft : 0
                );
            }
            function f_scrollTop() {
                return f_filterResults (
                    window.pageYOffset ? window.pageYOffset : 0,
                    document.documentElement ? document.documentElement.scrollTop : 0,
                    document.body ? document.body.scrollTop : 0
                );
            }
            function f_filterResults(n_win, n_docel, n_body) {
                var n_result = n_win ? n_win : 0;
                if (n_docel && (!n_result || (n_result > n_docel)))
                    n_result = n_docel;
                return n_body && (!n_result || (n_result > n_body)) ? n_body : n_result;
            }

            //you should add an event handler for onload here
        </script>
    </head>
    <body>
        <p>
            Vertical and horizontal th cells should remain visible and aligned while scrolling.<br>
            This solution does not use any frameworks. Feel free to replace existing helpers (scroll offsets) using jquery or prototype (or any other framework).
        </p>

        <div style="width: 800px; height: 600px; overflow: scroll">
            <table class="TableLarge" id="mySpecialHugeTable">
                <tr>
                    <th>Fixed!</th>
                    <th>Fixed!</th>
                    <th>Fixed!</th>
                    <th>Fixed!</th>
                    <th>Fixed!</th>
                    <th>Fixed!</th>
                    <th>Fixed!</th>
                    <th>Fixed!</th>
                    <th>Fixed!</th>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Umm...how is this done again?</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>Umm...how is this done again?</td>
                    <td>Umm...how is this done again?</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                </tr>
                <tr>
                    <th>Fixed!<br>multi-line</th>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>Umm...how is this done again?</td>
                    <td>The goose is pretty.</td>
                    <td>The goose is pretty.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>Umm...how is this done again?</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>This is a very short story...Real short.</td>
                </tr>
                <tr>
                    <th>Fixed!<br>multi-line</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Umm...how is this done again?</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>Umm...how is this done again?</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>This is a very short story...Real short.</td>
                </tr>
                <tr>
                    <th>Fixed!<br>multi-line</th>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>Umm...how is this done again?</td>
                    <td>The goose is pretty.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Hello world!</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Umm...how is this done again?</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Umm...how is this done again?</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>Umm...how is this done again?</td>
                    <td>Umm...how is this done again?</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                </tr>
                <tr>
                    <th>Fixed!<br>multi-line</th>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>Umm...how is this done again?</td>
                    <td>The goose is pretty.</td>
                    <td>The goose is pretty.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Umm...how is this done again?</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>Umm...how is this done again?</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>This is a very short story...Real short.</td>
                </tr>
                <tr>
                    <th>Fixed!<br>multi-line</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>Umm...how is this done again?</td>
                    <td>The goose is pretty.</td>
                    <td>The goose is pretty.</td>
                    <td>This is a very short story...Real short.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>The goose is pretty.</td>
                    <td>The goose is pretty.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>The goose is pretty.</td>
                    <td>Umm...how is this done again?</td>
                    <td>Hello world!</td>
                    <td>This is a very short story...Real short.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                </tr>
                <tr>
                    <th>Fixed!</th>
                    <td>The goose is pretty.</td>
                    <td>Hello world!</td>
                    <td>Hello world!</td>
                    <td>Umm...how is this done again?</td>
                    <td>My mother has apples.</td>
                    <td>My mother has apples.</td>
                    <td>I think Javascript is some kind of Voodoo on the DOM.</td>
                    <td>This is a very short story...Real short.</td>
                </tr>
            </table>
        </div>

        <div id="padding_for_test">&nbsp;</div>

        <script type="text/javascript">
            table_make_fixed_header(document.getElementById("mySpecialHugeTable"), /*bHorizontal*/ true, /*bVertical*/ true, 1000, /*bWrappedByScrollableDiv*/ true);
        </script>
    </body>
</html> 
```

删除一些 CSS 并使固定单元格与可滚动单元格相同应该相当容易。此外，如果您想要一个专用的滚动条，您可以将其包装在一个可滚动的中，并通过使用的滚动偏移量`DIV`在内部进行调整。`_table_make_fixed_header_reposition``DIV`

**编辑**：更新代码以使标题尽可能靠近边缘，当表格超出视口时（+选项在垂直或水平标题之间进行选择，或两者兼而有之）。

**Edit2**：添加了可滚动`div`支持，并将其设为示例中的默认值。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-05T10:11:32.900

如果您不想使用插件，请结合固定标题垂直滚动 (CSS)

```
tbody{display:block;overflow-y:auto;/*+fixed height set w/jQuery etc*/} 
```

​用固定的第一列水平滚动（JS）

```
$('#table-container').scroll(function() {
    var _left = $(this).scrollLeft();
    $('#table th').css('left', _left); //"stick" the first column to viewport
});

#table-container{overflow-x:scroll;/*+fixed width set*/}
thead, tbody{display:block;}    
th {position:relative;left:0;/*gets adjusted with JS above*/} 
```

[Fiddle'd here](http://jsfiddle.net/ovfiddle/7v4RZ/1/)，但这并没有解决调整大小以适应浏览器尺寸的问题。假设它将在专用窗口中运行，那将是微不足道的；如果不是，并且它打算在页面内运行，那么保持它整洁将是相当困难的。

祝你好运。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-06T12:20:34.863

如果您不喜欢使用重载插件，您可以这样做：

创建一个只有固定表头的表

创建一个具有固定宽度（记住滚动条宽度）和高度的 div 并设置滚动 Y 方向。在这个 div 中放置表格的主体。

创建第三个也是最后一个表并将该表放在 div 下方，使其看起来像 1 个大表。

```
<table> HEADER </table>
<div><table> BODY </table></div> (div is scrollable)
<table> Foot </table> 
```

如果您需要使用裸 javascript 进行动态更改，则不需要使用 jquery 或其他繁重的插件。

# urlencode - 如何在objective-c中编码或解码URL

> ID：10838702
> 
> 赞同：3
> 
> 时间：2012-05-31T17:53:44.750
> 
> 标签：urlencode, urldecode

有没有类似的东西

```
+(NSString *) URLencode: (NSString *) someString

+(NSString *) URLdecode: (NSString *) someString 
```

如果是，如何实施？

向下投票者请注意。这不是一个简单的问题。我需要能够全面做到这一点的东西。例如：

```
NSString * test = @"汉字马拉松是";
NSString * encoded = [test stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
PO(encoded);
PO(test); 
```

将产生以下结果：

```
2012-06-04 16:04:22.709 BadgerNew[2266:17003] <0xcd890 GrabClass.m:(930)> encoded (null)
2012-06-04 16:04:22.710 BadgerNew[2266:17003] <0xcd890 GrabClass.m:(931)> test 汉字马拉松是 
```

我希望我的编码能够对包括日语等在内的所有内容进行 URL 编码。

所以我想编码包含 %E6%B1%89%E5%AD%97%E9%A9%AC%E6%8B%89%E6%9D%BE%E6%98%AF

[http://mobiledevelopertips.com/networking/a-better-url-encoding-method.html](http://mobiledevelopertips.com/networking/a-better-url-encoding-method.html)中有两种不同的方法

没有一个是足够好的。

我需要能够编码所有字符串，包括日文/中文字符。

更新：我按照 H2CO3 的回答做了这个： NSString * test = @"汉字马拉松是"; NSString * 编码 = [测试 stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; PO（编码）；采购订单（测试）；PO（编码）；

按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:05:54.567

您可能想看看`stringByAddingPercentEscapesUsingEncoding`and`stringByReplacingPercentEscapesUsingEncoding`方法。

编码示例（使用 ASCII）：

```
NSString* encodedString =
[originalString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]; 
```

解码示例（使用 ASCII）：

```
NSString* originalString =
[encodedString stringByReplacingPercentEscapesUsingEncoding:NSASCIIStringEncoding]; 
```

编辑：如果这没有给出预期的结果，请尝试`NSASCIIStringEncoding`用`NSUTF8StringEncoding`.

此外，您可能想尝试上述方法的变体：

```
NSString * encodedString =
  (NSString *)CFURLCreateStringByAddingPercentEscapes(
    NULL,
    (CFStringRef)originalString,
    NULL,
    (CFStringRef)@"!*'();:@&=+$,/?%#[]",
    kCFStringEncodingUTF8 ); 
```

在某些情况下会更好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:07:11.997

中文和日文字符自然不适用于 ASCII 字符串编码。如果您尝试通过 Apple 的方法转义字符串，您绝对应该避免代码重复，将结果存储为 Unicode 字符串。使用以下编码之一：

```
NSUTF8StringEncoding
NSUTF16StringEncoding
NSShiftJISStringEncoding (not Unicode, Japanese-specific) 
```

# android - Android：如何捕获从引用库抛出的致命异常？

> ID：10838703
> 
> 赞同：7
> 
> 时间：2012-05-31T17:53:47.437
> 
> 标签：android, exception, try-catch

我正在使用一个名为“rome-1.0.jar”的引用库。

```
try {
    SyndFeedInput input = new SyndFeedInput();
    SyndFeed feed = input.build(new XmlReader(file));
}
catch(Exception e) {
    Log.e("", "ROME parse error: " + e.toString());
} 
```

input.build(new XmlReader(file)); 是“rome-1.0.jar”库调用。

尽管我捕获了所有异常，但我的应用程序仍然崩溃。

```
05-31 13:43:06.297: W/dalvikvm(11150): threadid=22: thread exiting with uncaught exception (group=0x40a4d1f8)
05-31 13:43:06.307: E/AndroidRuntime(11150): FATAL EXCEPTION: Thread-4199
05-31 13:43:06.307: E/AndroidRuntime(11150): java.lang.NoClassDefFoundError: java.beans.PropertyDescriptor[]
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.impl.BeanIntrospector.getPropertyDescriptors(BeanIntrospector.java:39)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.impl.CloneableBean.beanClone(CloneableBean.java:129)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.impl.ObjectBean.clone(ObjectBean.java:87)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.module.DCModuleImpl.clone(DCModuleImpl.java:771)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.module.impl.ModuleUtils.cloneModules(ModuleUtils.java:35)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS090.createSyndEntry(ConverterForRSS090.java:90)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS091Userland.createSyndEntry(ConverterForRSS091Userland.java:85)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS092.createSyndEntry(ConverterForRSS092.java:46)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS093.createSyndEntry(ConverterForRSS093.java:37)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS094.createSyndEntry(ConverterForRSS094.java:58)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS090.createSyndEntries(ConverterForRSS090.java:79)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS090.copyInto(ConverterForRSS090.java:64)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS091Userland.copyInto(ConverterForRSS091Userland.java:49)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.impl.ConverterForRSS094.copyInto(ConverterForRSS094.java:47)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.feed.synd.SyndFeedImpl.<init>(SyndFeedImpl.java:144)
05-31 13:43:06.307: E/AndroidRuntime(11150):    at com.sun.syndication.io.SyndFeedInput.build(SyndFeedInput.java:123)
...(my code) 
```

有没有办法处理这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:17:48.580

谢谢库马尔，你给了我一个想法。

我不知道这是一个错误。我之前处理过 OutOfMemoryError，所以我知道我能够处理错误。

```
try {
    SyndFeedInput input = new SyndFeedInput();
    SyndFeed feed = input.build(new XmlReader(file));
}
catch(Exception e) {
    Log.e("", "ROME parse error: " + e.toString());
}
catch(Error e2) {
    Log.e("", "ROME parse error2: " + e2.toString());
} 
```

上面的代码处理错误。我知道这样做不是一个好主意，但它符合我的目的。

谢谢你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T18:04:05.970

这不是异常，而是错误，其性质比异常更严重。你不应该处理错误。

[http://www.coderanch.com/t/269746/java-programmer-SCJP/certification/Error-vs-Exception](http://www.coderanch.com/t/269746/java-programmer-SCJP/certification/Error-vs-Exception)

如果发生错误，系统在大多数情况下会变得不稳定，而你真的无能为力。

# ms-access - Access ADO: operation is not allowed when object is closed 错误信息

> ID：10838705
> 
> 赞同：1
> 
> 时间：2012-05-31T17:53:57.980
> 
> 标签：ms-access, vba

我正在使用带有本地表的 Access 2003，该表稍后将被传输并链接到 SQL Server 2008 表。我正在使用以下代码，但收到错误：cnn.Execute 行上的“运行时错误 3704：对象关闭时不允许操作”。

```
sub test()
On Err GoTo Err_Sub
    Dim cnn As ADODB.Connection
    Dim rs As ADODB.Recordset

    Dim str As String
    Dim strSQL As String

    'Open a connection.
    Set cnn = New ADODB.Connection     
    cnn.ConnectionString = _
        "Provider=Microsoft.Jet.OLEDB.4.0;" & _
        "Data Source=" & CurrentDb.Name & ";" & _
        "Persist Security Info=False"

    strSQL = Me.RecordSource
    str = Mid(strSQL, InStr(strSQL, "Where "))
    strSQL = "Update  myTable SET Active = False " & str

    Set rs = cnn.Execute(strSQL)

    If Not rs Is Nothing Then rs.Close

Exit_Sub:
    Set rs = Nothing
    Exit Sub

Err_Sub:
    MsgBox Err.Description
    Resume Exit_Sub
End Sub 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T16:55:14.330

也遇到了这个错误（在我的例子中，我使用存储过程来检索一些信息）。我做了一些更改，导致执行出现故障。

当我`SET NOCOUNT ON`作为存储过程的第一条语句时，错误消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:14:08.597

尝试`CurrentProject.Connection.Execute strSQL`而不是声明您的`cnn`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T17:56:08.713

那很简单。您需要添加

```
cnn.Open 
```

在 cnn.Execute 之前的某个地方，也不要忘记调用

```
cnn.Close
Set cnn = nothing 
```

在退出潜艇之前

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-09-29T22:54:34.407

我最近也遇到了这个问题。我的错误出现了，因为我将 sql 查询中的一列命名为“Pit#”。我相当确定是 # 导致我发生此错误。我希望这对将来的某人有所帮助。

谢谢——壳牌

# android - Android：使用深色 ExpandableListView 图标？

> ID：10838709
> 
> 赞同：2
> 
> 时间：2012-05-31T17:54:08.870
> 
> 标签：android

我的应用程序使用 Theme.Holo。当我实例化一个 ExpandableListView 时，它对组行使用白色图标。（在图像中，该图标在第一行可见，因为我正在按下该行以突出显示它，其他行具有不可见的白色图标）。

我知道我可以使用 ExpandableListView.setGroupIndicator() 设置组图标，但如果可能的话，我宁愿指定使用深色版本的 OS 图标？

![在此处输入图像描述](../Images/d9b29e88f36bf0e171e658fb86820cd0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:58:19.420

在这种情况下，您将需要更改默认组指示符。无论如何，亮或暗指示器只是不同的图标。在不更改主题的情况下，唯一的方法是更改​​指标的图标/可绘制对象。

# jquery - Vticker 和 Sharrre jQuery 插件不能同时工作

> ID：10838710
> 
> 赞同：0
> 
> 时间：2012-05-31T17:54:19.360
> 
> 标签：jquery, plugins, social-networking

我有代码：

```
$('#newsSocialTicker').rssfeed('http://something/feed/',{
snippet: true,
titletag: 'h3'
}, function(e) {
$(e).find('div.rssBody').vTicker({ showItems: 2});
});
/*
$('#shareIcon').click(function(e) {
// prevent the browser from following the link
e.preventDefault();
e.stopPropagation();

$dialog.load('socialActivity.jsp');
$dialog.dialog( "option", "title", "Share Page" );
$dialog.dialog('open');

});
*/ 
```

当我运行它时，我没有任何错误（但底部的代码是注释）。

如果我取消注释底部代码，我会得到：

```
$(e).find("div.rssBody").vTicker is not a function 
```

我不知道这是否重要，但“socialActivity.jsp”中的代码是：

```
<script type="text/javascript" src="jQuery/js/jquery-1.7.1.js"></script>
<script type="text/javascript" src="jQuery/js/jquery.sharrre-1.3.2.js"></script>
<script type="text/javascript" src="jQuery/js/jquery.cookie.js"></script>

<script type="text/javascript">  
$(function() {       
    // social buttons
    $('#sharemediv').sharrre({
        ...
    });       
});   // END function()        
</script>

<div id="sharemediv">
    ...
</div> 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:05:13.957

根据您问题中的代码，错误：

```
$(e).find("div.rssBody").vTicker is not a function 
```

是因为您没有包含**vTicker**插件！

或者，如果您是，那不会显示在您的问题上，您在提出要求后将其包括在内。

# jakarta-ee - 带有插件和嵌入式数据库的 Java EE 应用程序结构

> ID：10838712
> 
> 赞同：1
> 
> 时间：2012-05-31T17:54:20.147
> 
> 标签：jakarta-ee, plugins, architecture, hsqldb, derby

我在这里发帖是因为我质疑自己未来项目的结构。

我希望通过遵循与 Jenkins / Hudson 等主要软件相同的模型来制作 Java EE 应用程序，它们提供 .war/ear 可部署并嵌入自己的数据库和插件管理。最终目标是用户下载并部署war/ear“即用型”

我的问题是：

*   我想使用 EJB，我应该如何将我的项目构建到我的 IDE 中？核心项目+战争项目？

*   当我想使用嵌入式数据库 HSQL 或 Derby 样式时，我发现的教程表明我必须在我的容器中添加一些 jar / xml，这违背了“即用型”的想法。

*   最后一个问题，同样重要的是，一个将以 jar 形式出现的插件，我的应用程序如何使用它？欢迎提供一些关于我的插件管理的想法/教程。

该项目用于教育目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:32:05.620

在 Java EE 中，或多或少有两所学校提倡不同的方法。

第一个学派，传统学派，主张 Java EE 应用程序应该始终是不完整的，例如具有“未解决的依赖关系”。一系列人员（角色），从应用程序打包者到部署者，然后逐渐迭代地准备应用程序以实际运行。

这所学校避免在应用程序存档中嵌入数据源定义、安全性（主要是身份验证）和 JMS 队列（即使最后一个队列完全在应用程序内部）。根据第一所学校的一些成员的说法，包含这些的应用程序不再是 Java EE 应用程序（参见例如[https://community.jboss.org/thread/164554](https://community.jboss.org/thread/164554)）

但是还有另一所学派，他们认为存在将所有这些都保存在 Java EE 存档中的用例实际上是最好的方法。添加到规范中的事实`@DataSourceDefinition`表明了这一点，Java EE 7 将标准化附加类型资源（如 JMS 队列）的嵌入。

这两篇博客文章描述了一个使用嵌入式数据库的 Java EE 示例：

*   [http://henk53.wordpress.com/2012/04/15/jsf2-primefaces3-ejb3-jpa2-integration-project](http://henk53.wordpress.com/2012/04/15/jsf2-primefaces3-ejb3-jpa2-integration-project)
*   [http://henk53.wordpress.com/2012/05/01/is-weblogic-12c-a-heavy-weight-enterprise-solution](http://henk53.wordpress.com/2012/05/01/is-weblogic-12c-a-heavy-weight-enterprise-solution)

在许多应用服务器中，嵌入式标准化数据源的想法是事后才想到的，并且很可能没有被 TCK 涵盖。综上所述，目前支持如下：

*   **WebLogic 12c** - 完美无瑕
*   **JBoss AS 7.1.1** - 几乎必须关闭事务支持（参见[https://issues.jboss.org/browse/AS7-4552](https://issues.jboss.org/browse/AS7-4552)）
*   **GlassFish 3.1.2** - 几乎，仍然需要将 JDBC 驱动程序复制到服务器
*   **TomEE 1.0** - 目前并没有真正起作用，总是指向内部嵌入式数据库（请参阅[https://issues.apache.org/jira/browse/TOMEE-171](https://issues.apache.org/jira/browse/TOMEE-171)）

# pexpect - 使用 pexpect 返回信息

> ID：10838724
> 
> 赞同：1
> 
> 时间：2012-05-31T17:55:29.797
> 
> 标签：pexpect

我正在学习如何使用 pexpect，我有一个问题。我正在尝试查找远程服务器的版本号，并根据该版本号选择正确的驱动程序号。我不完全确定我应该如何去做。类似于 getline 函数的东西。让我知道是否有任何我可以使用的功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:12:56.503

子项`.before`和`.after`属性分别包含标准输出。在匹配的期望之后。

```
import pexpect

child = pexpect.spawn('cat /etc/issue')
child.expect('Ubuntu.*')
print(child.after) 
```

哪些命令需要输入？如果是驱动程序安装，您可以使用fabric & fexpect：

```
from ilogue.fexpect import expect, expecting, run

output = run('get-system-version')

prompts = []
prompts += expect('Which driver version do you want to install?',output)

with expecting(prompts):
    run('install-driver-command') 
```

# java - 未找到 Java 主文件

> ID：10838726
> 
> 赞同：2
> 
> 时间：2012-05-31T17:55:34.997
> 
> 标签：java, jar

我正在尝试使用 jar 工具创建一个 jar。使用以下命令

```
jar.exe cmfv manifest.txt lol.jar Main.class 
```

这会生成一个带有以下清单的 jar：

```
Manifest-Version: 1.0
Created-By: 1.7.0_03 (Oracle Corporation)
Main-Class: Main 
```

当我从命令行（java -jar lol.jar）运行 jar 时，它运行良好。但是当我双击文件夹中的 jar 时，它会给出一个错误：“找不到主类：Main.Program 将退出。”

这可能是什么原因造成的？

* * *

在尝试了一些东西之后，Manifest 目前看起来像这样：

```
Manifest-Version: 1.0
Class-Path: .
Created-By: 1.7.0_03 (Oracle Corporation)
Main-Class: code.Main 
```

Main 类添加了一个包声明。在 jar 中添加了“代码”文件夹/包。虽然仍然有同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:59:06.993

您应该将您的 Main 类放入一个包中，并相应地调整您的清单。那应该可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:10:50.527

您需要将 Main 类放在类路径中。当您从命令行运行它时，您的当前目录会自动添加到您的类路径中，这就是它从那里工作的原因。当您双击它时，您没有像在类路径中那样指定 jar 的路径。有多种方法可以将类添加到清单中的类路径中。下面是我的一个罐子的例子。lib 是 jar 中的一个文件夹，com/sample/CommandLineClient.class 是我的主类。

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.2
Created-By: 1.5.0_12-b04 (Sun Microsystems Inc.)
Class-Path: lib/args4j-2.0.19.jar lib/axis.jar lib/axis-ant.jar lib/commons-discovery-0.2.jar lib/commons-logging-1.0.4.jar lib/jaxrpc.jar lib/log4j-1.2.8.jar lib/saaj.jar lib/wsdl4j-1.5.1.jar
Main-Class: com.sample.CommandLineClientSysIn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:41:19.473

.jar 扩展名的文件关联是什么？

双击 jar 文件应该使 jar 运行 javaw 命令。

尝试使用 javaw 使 jar 文件默认执行。

也看看这个： http: [//www.wikihow.com/Run-a-.Jar-Java-File](http://www.wikihow.com/Run-a-.Jar-Java-File)

# cloud - 变量在不同的类中不可用

> ID：10838738
> 
> 赞同：0
> 
> 时间：2012-05-31T17:56:23.713
> 
> 标签：cloud, salesforce, apex-code

我有两个全球课程。在 CreateAndModify 类中，我有一个执行函数，它有一个 for 循环，它调用我的另一个类的 processRecord 方法，即 CreateAndModifyProcessor。问题是在我的第一堂课中声明了一个列表集合，我无法在第二堂课中访问。有没有办法做到这一点，这样做甚至是一个好主意吗？

```
global class CreateAndModify implements
Database.Batchable<sObject>, Database.Stateful{

global void execute(
Database.BatchableContext BC,

List<sObject> listObj){

list <Account__c> inAcc = new list<Account__c>();

for (sObject lo : listObj){
      processor.processRecord(lo);
}

insert inAcc; // The list object which i 
              // am modifying in the processRecord function has to be added to       
              // the database. So, is it a good idea to add/populate the            
              // in other function of other class
}

global class CreateAndModifyProcessor {
global void processRecord(sObject listObj){
Unprocessed_Agreement__c temp = (Unprocessed_Agreement__c)listObj;

Account__c tempAcc = new Account__c();

inAcc.add(tempAcc); // This line throws an error
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:30:38.927

您的列表`inAcc`是在 execute 方法中定义的，因此它的范围仅限于该方法，并且在它或该方法所属的类之外不可用。如果您绝对必须保留您已经布置的结构，那么为什么不将帐户列表作为参数传递给下面的处理方法呢？

```
global class CreateAndModify implements
    Database.Batchable<sObject>, Database.Stateful {

    global void execute(Database.BatchableContext BC, List<sObject> listObj) {

        list <Account__c> inAcc = new list<Account__c>();

        for (sObject lo : listObj) {
            processor.processRecord(lo, inAcc);
        }

        insert inAcc;
    }
}

global class CreateAndModifyProcessor {

    global void processRecord(sObject listObj, list<Account> listAcc) {
        Unprocessed_Agreement__c temp = (Unprocessed_Agreement__c)listObj;
        Account__c tempAcc = new Account__c();
        listAcc.add(tempAcc);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:06:29.663

`list <Account__c> inAcc = new list<Account__c>();`不是全局列表！

你应该把它移到执行方法之外，做这样的事情

```
global class CreateAndModify implements Database.Batchable<sObject>, Database.Stateful{ 

   global  list <Account__c> inAcc = new list<Account__c>();

  global void execute(Database.BatchableContext BC, List<sObject> listObj){

      for (sObject lo : listObj){
      processor.processRecord(lo);
       }

   insert inAcc; 
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:38:25.427

您是否考虑过重新构建代码，以从 processRecord 返回帐户或帐户列表并以这种方式将其添加到 inAcc 中？它可能看起来像这样：

```
list <Account__c> inAcc = new list<Account__c>();

for (sObject lo : listObj){
    inAcc.addAll(processor.processRecord(lo));
}

insert inAcc;

global class CreateAndModifyProcessor {
    global list<Account> processRecord(sObject listObj){
        list<Account> accs = new list<Account>();
        Unprocessed_Agreement__c temp = (Unprocessed_Agreement__c)listObj;
        ... // some code that adds records to accs
        return accs;
    }
} 
```

# vb.net - 如何使用 2 个 Webbrowser 控件来使用不同的缓存/会话

> ID：10838741
> 
> 赞同：1
> 
> 时间：2012-05-31T17:56:37.880
> 
> 标签：vb.net

我正在使用 2 种不同形式的 2 种不同的 webbrowser 控件。我打开一个页面 (www.dropbox.com/login) 并登录到应用程序。当尝试在不同表单上的另一个 webbrowser 控件中打开同一页面时，应用程序转到登录后页面，即应用程序已经登录。我怎样才能避免这种情况并做一些事情，以便我拥有两个 webbrowser 控件单独登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:26:45.150

在 IE8 之前，您可以调用[InternetSetOption](http://msdn.microsoft.com/en-us/library/aa385114%28VS.85%29.aspx)来结束该实例的会话。

我认为这在 IE8 和更新版本中是不可能的。Webbrowser 控件和 Internet Explorer 的实例都共享相同的会话和 cookie。

# javascript - 将数组添加到对象

> ID：10838746
> 
> 赞同：11
> 
> 时间：2012-05-31T17:56:58.567
> 
> 标签：javascript, json

我试图通过 Json 循环两次：一次用于父元素，然后再次用于更多细节。（这最终将被导出到 XML） 同时，我如何去添加一个数组到一个对象？我当前的代码没有创建 XMLObjectDetail

```
 XMLObject = {};
 var XMLObjectDetail = [];

 $.each(data, function(index, element) {
        XMLObject.CardCode = element['CardCode'] 
        XMLObject.CardName = element['CardName'];
        console.log(XMLObject);

  $.each(element, function(key, value) { 
       XMLObject[[XMLObjectDetail.InvPayAmnt]] = value['InvPayAmnt']; 
      });
  }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T00:36:52.873

在您在评论中阐明您的要求后，解决方案很简单：

```
var XMLObject = {};
var XMLObjectDetail = [];
XMLObject["XMLObjectDetail"] = XMLObjectDetail; 
```

您可以将其缩短为

```
var XMLObjectDetail, XMLObject = {XMLObjectDetail: XMLObjectDetail = []}; 
```

但是，我需要提及您的代码中的一些严重缺陷：

```
XMLObject = {}; // no var keyword: the variable will be global
var XMLObjectDetail = [];

$.each(data, function(index, element) {
    // I don't know how your data object/array looks like, but your code will be 
    // executed many times
    // For each element, you will overwrite the properties
    XMLObject.CardCode = element['CardCode'] // missing semicolon
    XMLObject.CardName = element['CardName'];
    // so that the final XMLObject will only contain cardcode and -name of the last one
    // It will depend on your console whether you see different objects
    // or the same object reference all the time
    console.log(XMLObject);

    // This part is completey incomprehensible
    // you now loop over the properties of the current element, e.g. CardCode
    $.each(element, function(key, value) { 
        // and again you only overwrite the same property all the time
        XMLObject[[XMLObjectDetail.InvPayAmnt]] = value['InvPayAmnt'];
        // but wait: The property name you try to set is very, um, interesting.
        // first, XMLObjectDetail is still an (empty) Array and has 
        //  no 'InvPayAmnt' property - leads to a undefined
        // then, you build an Array with that [undefined] value as the only item
        // OMG, an array? JavaScript does only allow strings as property names,
        //  so the array will be converted to a string - resulting to the empty string ""
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T18:08:51.727

如果要为`XMLObject`数组添加对象，`XMLObjectDetail`请执行以下操作：

```
var XMLObject, XMLObjectDetail = [];

 $.each(data, function(index, element) {
        XMLObject=new Object(); //or XMLObject = {};
        XMLObject.CardCode = element['CardCode'] 
        XMLObject.CardName = element['CardName'];
        console.log(XMLObject);

        XMLObjectDetail.push(XMLObject);//ADDED OBJECT TO ARRAY

      //DON'T KNOW WHAT ARE YOU TRYING TO DO HERE?
      $.each(element, function(key, value) { 
           XMLObjectDetail[[XMLObjectDetail.InvPayAmnt]] = value['InvPayAmnt']; 
      });
  }); 
```

# oracle11g - Jboss 7 和数据源

> ID：10838751
> 
> 赞同：3
> 
> 时间：2012-05-31T17:57:17.823
> 
> 标签：oracle11g, jboss7.x

通过将 jdbc 驱动程序安装为模块并在standalone.xml 中添加数据源定义，我成功地将 Jboss 7 配置为与 Oracle 11g 一起使用。但是，现在我想将数据源定义移动到它自己的文件中，该文件已放入部署目录中。这导致了以下失败：

```
 javax.naming.NameNotFoundException: jdbc/MyDatasource -- service jboss.naming.context.java.jboss.jdbc.MyDatasource 
```

jboss 7不再可能了吗？（我相信jboss 5曾经是这种情况）ds文件的外观如下：

```
<?xml version="1.0" encoding="UTF-8"?>
 <datasources xmlns="http://www.jboss.org/ironjacamar/schema">  
<datasource jndi-name="java:jboss/jdbc/MyDatasource" pool-name="OracleDS" enabled="true" jta="true" use-java-context="true" use-ccm="true">
    <connection-url>jdbc:oracle:thin:@oracle.host:1521:mydb</connection-url>
    <driver>
        oracle
    </driver>
    <pool>
        <min-pool-size>10</min-pool-size>
        <max-pool-size>100</max-pool-size>                  
        <prefill>false</prefill>
        <use-strict-min>false</use-strict-min>
        <flush-strategy>FailingConnectionOnly</flush-strategy>
    </pool>
    <security>
        <user-name>user</user-name>
        <password>pass</password>
    </security>
    <validation>
        <validate-on-match>false</validate-on-match>
        <background-validation>false</background-validation>
        <use-fast-fail>false</use-fast-fail>
    </validation>
</datasource>
    <drivers>
     <driver name="oracle" module="com.oracle.jdbc"/>
    </drivers>  
</datasources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:25:35.990

我不知道您是如何进行 jndi 查找的，但是从错误消息看来，您使用的是正常（旧方式）`java:jdbc/DatasourceName`而不是新[方式](https://docs.jboss.org/author/display/AS7/Admin+Guide#AdminGuide-DatasourceDefinitions%5d) `java:jboss/datasources/DatasourceName.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T19:34:15.973

我尝试使用 xxx-ds.xml 进行数据源配置。

我收到警告

```
12:22:12,988 WARN  [org.jboss.as.connector.deployer.dsdeployer] 
(MSC service thread 1-2) JBAS010411: <drivers/> in standalone -ds.xml 
deployments aren't supported: Ignoring xxx-ds.xml 
```

因此，从消息中，我确认 JBoss7 在 stadalone 模式下不支持单独的 ds 文件。

# javascript - 这两者有什么区别？

> ID：10838755
> 
> 赞同：5
> 
> 时间：2012-05-31T17:57:42.493
> 
> 标签：javascript

这两者有什么区别吗：

```
var test1 = function () {
    this.method1 = function() {}
} 
```

和

```
var test2 = function() {};
test2.method1 = function() {}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:09:22.197

第一个片段接受`this`对象，无论它是什么，并将一个函数分配给它的名为 的槽（字段）`method1`。`this`可以表示不同的对象，具体取决于如何`test1`调用：

*   当作为独立函数调用时 -- `test1()`--`this`将是`window`
*   当作为构造函数调用时 -- `new test1()`--`this`指的是正在创建的对象
*   调用时 via`call`或`apply`-- `test1.apply(someObject)`-- `this`指的是参数

第二个片段获取对象`test2`并将一个函数分配给其名为 的槽`method1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:03:21.783

第一种方式是创建更多对象的构造函数，需要有`new`关键字：

```
var mytest1 = new test1();
mytest1.method1(); 
```

第二种方法可以立即使用：

```
test2.method1(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:03:30.853

假设语法是正确的，第一个是一个构造函数，它提供了通过`new test1()`名为 method1 的方法创建的所有 test1 对象。第二个只是向构造函数对象添加一个函数。在 javascript 中，函数是可以具有属性（包括方法）的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:04:12.887

第一个版本实际上创建了一个可用于所有实例化对象的方法，如下所示：

```
var o = new test1();
o.test1(); 
```

第二个简单地将函数作为属性附加到 test2 函数上。如果您熟悉其他基于类的 OO 语言，这有点像静态方法。您将无法访问`this`第二个示例中的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T18:05:28.090

第一个：

```
var test1 = function () {
    this.method1 = function() {} 
```

}

定义函数“test1”。一旦（并且仅当）“test1”被调用，“this.method1”将被定义为一个函数，它什么都不做。

第二：

```
var test2 = function() {};
test2.method1 = function() {}; 
```

创建函数“test2”，同时定义函数“test2.method1”，不需要调用第一个函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T18:05:43.933

第一个在调用 test1() 的任何东西上设置 method1 属性。

第二个定义了一个空函数，并在 test2 上设置了 method1 属性

# java - 带有继承的 Guice 注入

> ID：10838756
> 
> 赞同：2
> 
> 时间：2012-05-31T17:57:42.987
> 
> 标签：java, dependency-injection, guice

首先，很抱歉我无法为我的标题找到更具体的措辞。这是我的代码片段：

```
public abstract class A {
 // dependencies
 private Client client;

 @Inject 
 public A(Client client) {
    this.client = client;
 }

 public abstract foo();

 protected void bar() {
  client.bar();  
 }
}

public class B extends A {
 ...
}

public class C extends A {
 ...
} 
```

我的问题是：既不`B`也不`C`关心方法是如何`boo`在`A`. 仅用于`A`实现。我不想继续通过and的构造函数注入。我有哪些选择？我想我可以直接在字段声明上使用注释而不是构造函数。这是一个好方法吗？还有其他推荐的方法吗？还是我在这里误解了关于 DI 的一些东西？`client``boo``client``B``C``@Inject``client`

在此先感谢，巴尔加瓦

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T07:12:53.367

我最近开始使用的一种模式是让子类继承父类（显然），并注入它。父类只需要一个拷贝构造函数，也不能是抽象的：

```
class A {
  private Client client;

  @Inject
  public A(Client client) {
    this.client = client;
  }

  public A(A other) {
    this(other.client);
  }
}

class B extends A {
  @Inject
  public Child(A a, Others others) {
    super(a);
  }
} 
```

A 的依赖项留在 A 中，B 的依赖项留在 B 中。

# clojure - 运行多个黑色服务器时的加载视图

> ID：10838768
> 
> 赞同：2
> 
> 时间：2012-05-31T17:58:28.247
> 
> 标签：clojure, compojure, ring, noir

我正在尝试使用 noir 来启动三台服务器（每台服务器处理应用程序的不同方面）。我正在尝试这样做，以便我可以在一个应用程序中运行所有三台服务器，同时开发并轻松地将项目解耦为三个不同的应用程序进行部署。

使用`noir.server/start`和`noir.server/stop`运行我需要的码头服务器是没有问题的。

我想弄清楚的是某种方式来调用`load-views`（或类似的东西），为每个服务器设置不同的视图，以便 URI 冲突由正确的`defpage`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:37:30.753

我通过清除`noir.core/noir-routes`、`noir.core/route-funcs`、`noir.core/pre-routes`和找到了一个解决方案`noir.core/post-routes`。我在下面有一个命名空间示例，该命名空间启动三个服务器，它们都有自己的视图。

```
(ns my-three.server
  (:require
   [noir.core :as noir] 
   [noir.server :as server]))

(def ^:dynamic *servers* (atom {}))

(defn clear-routes []
  (do
    (reset! noir/noir-routes {})
    (reset! noir/route-funcs {})
    (reset! noir/pre-routes (sorted-map))
    (reset! noir/post-routes [])
    nil))

(defn start-server [port mode]
  (if-let [s (@*servers* port)]
    (println "Server already running on port" port)
    (swap! *servers* assoc port (server/start port {:mode mode}))))

(defn stop-server [port]
  (let [s (@*servers* port)]
    (server/stop s)
    (swap! *servers* dissoc port)))

(defn stop-all []
  (doall (map stop-server (keys @*servers*))))

(defn -main [& m]
  (let [mode (if (nil? (first m)) :prod (first m))]
    (server/load-views "src/my_three/views/web/" )
    (start-server 8080 mode)
    (clear-routes)
    (server/load-views "src/my_three/views/mobile_downstream/")
    (start-server 8081 mode)
    (clear-routes)
    (server/load-views "src/my_three/views/mobile_upstream/")
    (start-server 8082 mode))) 
```

# maven - 使用 Maven 打包特定的依赖 jar

> ID：10838777
> 
> 赞同：0
> 
> 时间：2012-05-31T17:59:28.033
> 
> 标签：maven, jar, pom.xml

我的 maven 项目有几个依赖的 jar，但是当我创建项目的 jar 时，我想包含这些依赖的子集。有没有办法做到这一点？目前，我正在使用下面的 pom.xml（来自问题[How can I create an executable JAR with dependencies using Maven?](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)），但它正在将每个依赖项与我的项目打包在一起。

```
<build>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
            <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                </manifest>
            </archive>
        </configuration>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
        </configuration>
        <executions>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>single</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
</plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:44:05.960

尝试：

```
<dependencySets>
    <dependencySet>
      ....
      <excludes>
        <exclude>commons-lang:commons-lang</exclude>
        <exclude>log4j:log4j</exclude>
      </excludes>
    </dependencySet>
    ....
  </dependencySets> 
```

有关更多详细信息，请参阅[包含和排除工件](http://maven.apache.org/plugins/maven-assembly-plugin/examples/single/including-and-excluding-artifacts.html)

# c# - c#OleDbCommand 溢出

> ID：10838778
> 
> 赞同：0
> 
> 时间：2012-05-31T17:59:29.163
> 
> 标签：c#, oledbcommand

我有这个简单的类，它应该执行一个普通`INSERT INTO`的表格，但是`ExecuteNonQuery`给我：`OVERFLOW ERROR`。你能告诉我为什么吗？请。

```
 OleDbCommand cmd = new OleDbCommand(selectSQLNewData, con);
            OleDbDataReader reader = cmd.ExecuteReader();

            OleDbCommand cIns = new OleDbCommand();
            string str = "insert into NORMALIZZATI (id,comune,provincia,via_ufficiale,civico,frazione,cap,codiceIstat1,codiceIstat2,codiceIstat3,codiceIstat4,qualita,xdef,ydef) VALUES (@id,@comune,@provincia,@via_ufficiale,@civico,@frazione,@cap,@codiceIstat1,@codiceIstat2,@codiceIstat3,@codiceIstat4,@qualita,@xdef,@ydef);";

            while (reader.Read()) 
            {
                string clid = reader["CUSTOMER_ID"].ToString(); //selezionare la chiave primaria
                string indirizzo = reader["INDIRIZZO"].ToString(); //selezionare l'input al normalizzatore
                string postalcode = reader["POSTALCODE"].ToString(); //input al normalizzatore
                string citta = reader["CITTA"].ToString();
                string prov = reader["PROV"].ToString();

                ///chiama il processo di normalizzazione su questi dati, ritorna un output ... da inserire nella tabella.
                ServiceReference.ArrayOfString normalizzatore = norm.Esegui("TANGARIF", "4w3cC+naG8FnaHxH3ab/BA==", 2, citta, indirizzo, prov);

                ////prendere il risultato della normalizzazione, cosa prendere ??
                //se vanno bene:

                cIns = new OleDbCommand();
                cIns.Connection = con;
                cIns.CommandText = str;
                cIns.Parameters.AddWithValue("@id", clid);
                cIns.Parameters.AddWithValue("@comune", normalizzatore[7]);
                cIns.Parameters.AddWithValue("@provincia", normalizzatore[6]);
                cIns.Parameters.AddWithValue("@via_ufficiale", normalizzatore[7]);  /// da dove prendo la via ufficiale?
                cIns.Parameters.AddWithValue("@civico", normalizzatore[13]);
                cIns.Parameters.AddWithValue("@frazione", normalizzatore[8]);
                cIns.Parameters.AddWithValue("@cap", normalizzatore[27]);
                cIns.Parameters.AddWithValue("@codiceIstat1", normalizzatore[14]);
                cIns.Parameters.AddWithValue("@codiceIstat2", normalizzatore[15]);
                cIns.Parameters.AddWithValue("@codiceIstat3", normalizzatore[16]);
                cIns.Parameters.AddWithValue("@codiceIstat4", normalizzatore[17]);
                cIns.Parameters.AddWithValue("@qualita", normalizzatore[43]);
                cIns.Parameters.AddWithValue("@xdef", (normalizzatore[38]));
                cIns.Parameters.AddWithValue("@ydef", (normalizzatore[39]));
                cIns.ExecuteNonQuery();

            } 
```

表定义：

```
CREATE TABLE NORMALIZZATI 
(

    id integer primary key, 
    comune char(200), 
    provincia char(200), 
    via_ufficiale char(200), 
    civico char(200), 
    frazione char(200), 
    cap char(5), 
    codiceIstat1 char(200),
    codiceIstat2 char(200), 
    codiceIstat3 char(200), 
    codiceIstat4 char(200), 
    qualita char(200), 
    xdef Text, 
    ydef Text

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:01:48.230

我猜您传入的参数之一的长度大于您尝试插入的列的长度。你能发布你的表定义吗？

# exception - 查找 Haskell 异常的来源

> ID：10838785
> 
> 赞同：8
> 
> 时间：2012-05-31T18:00:03.650
> 
> 标签：exception, haskell

我试图找出抛出异常的位置。这些是我在 Haskell 中进行异常处理的第一次体验。我正在尝试在远程主机上调用 XML-RPC 函数，该函数使用 https 进行访问：

```
ghci> import Network.XmlRpc.Client
ghci> import Network.XmlRpc.Internals
ghci> remote "https://rpc.ote.gandi.net/xmlrpc/" "domain.count" (ValueString "01234567890ABCDEF")
*** Exception: user error (https not supported) 
```

为了弄清楚我是否只是忘记在某些包中启用 SSL 支持，或者它是否有所不同，我想知道哪个包引发了异常。

我首先按照[GHC 文档](http://www.haskell.org/ghc/docs/latest/html/users_guide/ghci-debugger.html)中的说明进行操作，但没有按预期进行：

```
ghci> :set -fbreak-on-exception
ghci> :trace remote "https://rpc.ote.gandi.net/xmlrpc/" "domain.count" (ValueString "01234567890ABCDEF")
Stopped at <exception thrown>
_exception :: e = _
ghci> :hist
Empty history. Perhaps you forgot to use :trace? 
```

所有相关的包都应该用`--enable-library-profiling`.

如何定位异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:39:48.457

您无法从中获得任何好的信息的原因是`:trace`无法进入库代码——我们需要解释我们想要跟踪的任何代码。是否使用分析编译是无关紧要的。在安装了一些依赖项之后，我这样做是为了获得更多信息：

```
 % cabal unpack haxr
    % cd haxr-3000.8.5
    % ghci Network/XmlRpc/Client.hs -XOverlappingInstances -XTypeSynonymInstances -XFlexibleInstances -XTemplateHaskell
    *Network.XmlRpc.Client> :set -fbreak-on-exception
    *Network.XmlRpc.Client> :trace remote "https://rpc.ote.gandi.net/xmlrpc/" "domain.count" (ValueString "01234567890ABCDEF")
    Stopped at <exception thrown>
    _exception :: e = _
    [<exception thrown>] *Network.XmlRpc.Client> :hist
    -1  : authHdr (Network/XmlRpc/Client.hs:169:27-33)
    -2  : request:parseUserInfo (Network/XmlRpc/Client.hs:161:34-40)
    -3  : request:parseUserInfo (Network/XmlRpc/Client.hs:161:31-73)
    -4  : request:parseUserInfo:(...) (Network/XmlRpc/Client.hs:159:55-70)
    -5  : request:parseUserInfo:(...) (Network/XmlRpc/Client.hs:159:39-51)
    -6  : request:parseUserInfo:(...) (Network/XmlRpc/Client.hs:159:39-70)
    -7  : request:parseUserInfo (Network/XmlRpc/Client.hs:160:34-39)
    -8  : request:parseUserInfo (Network/XmlRpc/Client.hs:160:31-64)
    -9  : request:parseUserInfo (Network/XmlRpc/Client.hs:(160,29)-(161,74))
    -10 : request:parseUserInfo (Network/XmlRpc/Client.hs:(159,5)-(161,74))
    -11 : authHdr (Network/XmlRpc/Client.hs:(169,1)-(175,60))
    -12 : request:headers (Network/XmlRpc/Client.hs:158:33-47)
    -13 : request:headers (Network/XmlRpc/Client.hs:158:33-63)
    -14 : request:headers (Network/XmlRpc/Client.hs:158:33-70)
    -15 : request:headers (Network/XmlRpc/Client.hs:158:20-71)
    -16 : request:headers (Network/XmlRpc/Client.hs:157:16-65)
    -17 : request:headers (Network/XmlRpc/Client.hs:156:16-47)
    -18 : request:headers (Network/XmlRpc/Client.hs:155:16-44)
    -19 : request:headers (Network/XmlRpc/Client.hs:(155,15)-(158,71))
    -20 : request (Network/XmlRpc/Client.hs:(149,28)-(152,54))
    ... 
```

希望这能让你开始。您可能会发现这会将您带到另一个库边界——如果是这样，您需要解压缩并解释该库以更深入地了解。祝你好运！

# facebook - Facebook 成就注册错误

> ID：10838788
> 
> 赞同：0
> 
> 时间：2012-05-31T18:00:25.037
> 
> 标签：facebook

[我尝试使用 POST 到https://graph.facebook.com/APP_ID/achievements](https://graph.facebook.com/APP_ID/achievements)并使用 access_token =xxxxxx 、achievement = right url 和 display_order =1为我的游戏应用程序通过 Graph API Explorer 注册成就，但它会引发以下错误

{ "error": { "message": "(#15) 必须使用应用程序访问令牌调用此方法。", "type": "OAuthException", "code": 15 } }

. 我已经在对象调试器中检查了成就 url 和我的应用程序访问令牌，它给出了正确的结果。但是当我尝试注册我的成就时，我仍然得到上述信息。我已经检查了所有可以找到解决方案的地方，但没有得到任何解决方案（尽管那里有类似的帖子没有给出解决方案）。任何帮助都将不胜感激，因为我确实需要花费大量时间才能找到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:11:19.653

您确定这是从[https://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/)的说明中检索到的应用程序访问令牌，而不是用户的访问令牌？

如果您使用 Graph API Explorer 而不是在代码中或手动执行此操作，则需要将 Graph API Explorer 正在使用的访问令牌替换为您通过这些说明检索到的访问令牌

# mysql - 忽略基于 where 子句的列

> ID：10838791
> 
> 赞同：3
> 
> 时间：2012-05-31T18:00:32.660
> 
> 标签：mysql, sql

编辑：

所以，我想具体做什么似乎有些混乱，所以我要改变我的例子。

我有一个名为 example_table 的表：

```
id       code1      code2
-------------------------
1        1780       4245
2        1781       4280
3        1900       1200
4        2800       4217
5        2817       1782 
```

有了这个，我想找到类似的东西，

```
SELECT * FROM example_table WHERE code1 LIKE '%17%' OR code2 LIKE '%17%'; 
```

我想要这个返回

```
id      code1      code2
------------------------
1       1780       null
2       1781       null
4       null       4217
5       2817       1782 
```

因此，您会注意到它将任何与任一列不匹配的结果都归零，如果两者都存在，它将同时抓取两者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:05:02.793

从字面上看，你可以做这样的事情......

```
SELECT
  first_name,
  CASE WHEN last_name = 'Smith' THEN last_name ELSE maiden_name END
FROM
  users
WHERE
     last_name   = 'Smith'
  OR maiden_name = 'Smith' 
```

但是，实际上，无论哪个字段匹配，都会是“Smith”，所以为什么要麻烦，就这样做？

```
SELECT
  first_name,
  'Smith'
FROM
  users
WHERE
     last_name   = 'Smith'
  OR maiden_name = 'Smith' 
```

**编辑：**根据您编辑的问题...

```
SELECT
  id,
  CASE WHEN code1 LIKE '%17%' THEN code1 ELSE NULL END AS code1,
  CASE WHEN code2 LIKE '%17%' THEN code2 ELSE NULL END AS code2
FROM
  example_table
WHERE
     code1 LIKE '%17%'
  OR code2 LIKE '%17%'
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:40:06.087

此 SQL 代码应该为您完成

```
SELECT
    A.id,B.code1,C.code2
FROM
    (SELECT id FROM example_table) A
    LEFT JOIN
    (
        SELECT id,code1 FROM example_table
        WHERE code1 LIKE '%17%'
    ) B ON A.id=B.id
    LEFT JOIN
    (
        SELECT id,code2 FROM example_table
        WHERE code2 LIKE '%17%'
    ) C ON A.id=C.id
WHERE
    ISNULL(B.code1) = 0 OR ISNULL(C.code1) = 0
; 
```

我不能对它的性能做出任何承诺。

如果您不介意将 null 显示为字符串，请尝试以下操作：

```
SELECT
    id,
    IF(code1 LIKE '%17%',code1,'null') code1,
    IF(code2 LIKE '%17%',code2,'null') code2
FROM example_table WHERE
    code1 LIKE '%17%' OR
    code2 LIKE '%17%'; 
```

一次没有连接的全表扫描。这可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:06:06.477

您可以通过以下方式优雅地做到这一点`UNION`：

```
SELECT first_name, last_name FROM users WHERE last_name='Smith'
    UNION
SELECT first_name, maiden_name FROM users WHERE maiden_name='Smith'; 
```

或者有点不太优雅的`CASE`声明：

```
SELECT first_name, 
    CASE WHEN last_name='Smith' THEN last_name
    ELSE maiden_name END
    AS last_name
FROM users where last_name='Smith' or maiden_name='Smith'; 
```

正如[@Dems](https://stackoverflow.com/a/10838862/166339)指出的那样，可以简化为：

```
SELECT first_name, 'Smith' AS last_name
FROM users WHERE last_name='Smith' or maiden_name='Smith'; 
```

这就引出了一个问题，你真的需要`last_name`在你的结果集中吗？调用者已经知道了，`last_name`因为它是查询的一部分。为什么不只返回一个`first_name`并且有一个非常简单易懂的查询呢？

```
SELECT first_name FROM users
WHERE last_name='Smith' or maiden_name='Smith'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:06:43.770

你的意思是

```
SELECT
  first_name,
  IF(last_name='Smith',last_name,concat(last_name,' (née ',maiden_name,')')) AS last_name
FROM
  users
WHERE
  users.last_name='Smith'
  OR maiden_name='Smith' 
```

# core-data - [__NSCFSet 实体]：将新的 nsmanegedobject 插入到一对多关系时无法识别选择器

> ID：10838797
> 
> 赞同：3
> 
> 时间：2012-05-31T18:00:49.777
> 
> 标签：core-data, unrecognized-selector

我正在向 Account 实例添加一个 Chore 对象的新实例。它们都是 NSManagedObjects，从 Account 到 Chore 的关系是“一对多”关系。

帐户实例在运行时有效，因为我可以向其插入其他对象，这些对象遵循与 chore 相同的关系规则（1 到多个），并且 chore 在调试器中也是有效的，因为帐户对象和 newChore 都有有效的内存地址。唯一的问题是给出的地址错误，因为 0x6d85cb0 与报告此错误时 newChore 和帐户的地址不同。0x06b74a70 for newChore 和 0x06d49700 for account，所以我不知道 0x6d85cb0 指的是什么。

这是代码行“[account addChoresObject:newChore];” 这会产生以下错误。

这是代码行 [account addChoresObject:newChore]; 产生以下错误。2012-05-31 10:19:05.440 分配[61436:fb03]-[__NSCFSet 实体]：无法识别的选择器发送到实例 0x6d85cb0 2012-05-31 10:19:05.441 分配[61436:fb03] ***由于未捕获而终止应用程序异常“NSInvalidArgumentException”，原因：“-[__NSCFSet 实体]：无法识别的选择器发送到实例 0x6d85cb0”

这是生成错误的方法的代码。

```
-(void)addChore:(Chore *)newChore
{
    [account addChoresObject:newChore];
    NSError *error;
    [managedObjectContext save:&error];
    if (error != nil) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error Adding chore" 
                                                        message:@"program not able to add new chore to account" 
                                                       delegate:nil
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

这是 Account 类的接口，由 xcode 生成：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Chore, Gift, Goal, Operation;

@interface Account : NSManagedObject

@property (nonatomic, retain) NSNumber * balance;
@property (nonatomic, retain) NSDate * birthday;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSData * photo;
@property (nonatomic, retain) NSSet *chores;
@property (nonatomic, retain) NSSet *gifts;
@property (nonatomic, retain) NSSet *goals;
@property (nonatomic, retain) NSSet *operations;
@end

@interface Account (CoreDataGeneratedAccessors)

- (void)addChoresObject:(Chore *)value;
- (void)removeChoresObject:(Chore *)value;
- (void)addChores:(NSSet *)values;
- (void)removeChores:(NSSet *)values;

- (void)addGiftsObject:(Gift *)value;
- (void)removeGiftsObject:(Gift *)value;
- (void)addGifts:(NSSet *)values;
- (void)removeGifts:(NSSet *)values;

- (void)addGoalsObject:(Goal *)value;
- (void)removeGoalsObject:(Goal *)value;
- (void)addGoals:(NSSet *)values;
- (void)removeGoals:(NSSet *)values;

- (void)addOperationsObject:(Operation *)value;
- (void)removeOperationsObject:(Operation *)value;
- (void)addOperations:(NSSet *)values;
- (void)removeOperations:(NSSet *)values;

@end 
```

和杂项类是：

```
@interface Chore : NSManagedObject

@property (nonatomic, retain) NSString * interval;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSString * reward;
@property (nonatomic, retain) Account *account;

@end 
```

在我看来，选择器似乎发送到了错误的地址。我尝试使用 Clean 删除潜在的错误构建文件。在此之前我很难正确生成文件，因为生成的文件是用应用程序的名称调用的，而不是用类的名称调用的，而且一些源文件也有问题，这些文件会在 xcode 时崩溃试图自动生成 iboutlets 和 ibaction。我想知道是否有其他人对 xcode 有问题，如果重新安装它可以解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:20:51.067

我认为这与`account`您`addChore:`方法中的变量不在您期望的状态有关。

`NSLog`添加杂项之前的`account`变量，看看那里有什么。也许它是未定义的，你必须确保它指的是你想要的。

# php - 本地 UIWebViews 可以访问 Web 吗？

> ID：10838799
> 
> 赞同：0
> 
> 时间：2012-05-31T18:01:13.523
> 
> 标签：php, iphone, objective-c, ios, uiwebview

我有一些嵌入式（读取：本地）html 文件，其中表单加载在我的应用程序的 UIWebView 中。表单操作尝试调用我在服务器上的脚本。我知道该脚本正在运行，因为它已经在本地机器上进行了测试，并根据需要将值输入到数据库中。

但是，当我在应用程序上尝试执行此操作时，会调用脚本的 url（甚至调用 webViewDidLoad 委托方法）但是，值不会插入到数据库中。本地 html 文件是否可以提交到网络上的脚本？或者它们是否仅限于本地文件系统，因为它们存在于那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:07:56.377

我不明白为什么 UIWebView 无法向网络提交表单，但显然脚本必须不是相对路径。

所以你可以做

```
<form id="frm1" action="http://somewebsite.com/formsubmit.php"> 
```

而不是通常的

```
<form id="frm1" action="/formsubmit.php"> 
```

当然需要确保您有互联网连接。

希望对您有所帮助，如果没有，请随时澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:35:29.723

你所描述的都是可能的。你确定你在 shouldStartLoadWithRequest: 被调用时返回 YES 吗？

# objective-c - 使用@synthesize 和值类类型检查

> ID：10838800
> 
> 赞同：1
> 
> 时间：2012-05-31T18:01:15.753
> 
> 标签：objective-c, properties

这可能是一个长镜头，但我有很多属性的对象。这些对象的值是从数据库请求创建的 NSDictionary 填充的。因此，`NSNull`这些 NSDictionaries 中可能包含将自动分配给属性的值。我需要属性来自动丢弃不正确类型的值/对象。目前我这样做：

```
- (void) setViewID:(NSString *)viewID{
    if (!viewID || [viewID isKindOfClass:[NSString class]]) _viewID = viewID;
} 
```

但是当我有 30-50 个属性时，这最终会成为很多额外的代码。有没有办法合成这种行为？似乎这将是一个足够普遍的要求，但除了把它全部写出来之外，我似乎找不到一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:04:43.617

为什么不查查`NSNull`查字典的时间？例如

```
for (NSString *key in dictionary) {
    id value = [dictionary objectForKey:key];
    if (value == [NSNull null]) {
        value = nil;
    }
    [self setValue:value forKey:key];
} 
```

# php - php codeigniter中的电话号码验证

> ID：10838804
> 
> 赞同：6
> 
> 时间：2012-05-31T18:01:36.667
> 
> 标签：php, codeigniter, validation, phone-number

[我已经从这里](https://stackoverflow.com/questions/1937376/codeigniter-form-validation-with-phone-numbers)使用了电话没有验证的回叫功能。

```
function valid_phone_number_or_empty($value)
{
    $value = trim($value);

    if ($value == '') {
            return TRUE;
    }
    else
    {
            if (preg_match('/^\(?[0-9]{3}\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}$/', $value))
            {
                    return preg_replace('/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/', '($1) $2-$3', $value);
            }
            else
            {
                    return FALSE;
            }
    }
} 
```

但现在的问题是它不接受来自欧洲国家和世界其他地区的 11 到 13 位数的电话号码。任何人都可以向我提供所有国家通用的任何其他验证吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-09-23T13:34:46.933

这对我来说总是有用的：

```
$this->form_validation->set_rules('mobile', 'Mobile Number ', 'required|regex_match[/^[0-9]{10}$/]'); //{10} for 10 digits number 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T18:46:09.403

看看以下。 [国际号码的正则表达式](https://stackoverflow.com/questions/2113908/what-regular-expression-will-match-valid-international-phone-numbers)。您将需要检查多个正则表达式。如果该号码与第一个正则表达式（美国电话号码）不匹配，则将其与国际正则表达式进行检查。如果两者都不匹配，则测试失败

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-20T05:58:01.963

我有一个解决方案不需要 CodeIgniter 表单规则。但它在我的 CodeIgniter 项目中完美运行。

该解决方案使用[国际电话输入](https://github.com/jackocnr/intl-tel-input)插件。

看步骤：

**意见.php**

```
<link rel="stylesheet" href="<?= base_url("resources/css/intl-tel-input/intlTelInput.css");?>">
<!-- Somewhere in your code -->
<input name="phone" id="phone" class="form-control" type="phone" required>

<!-- Your scripts place -->
<script src="<?= base_url("ressources/js/intl-tel-input/intlTelInput.js"); ?>"></script>
<script>
    // Initialization
    var input = document.querySelector("#phone");
    var intl = window.intlTelInput(input);
    // Assuming that the submit button of your form is IDed by '#quote_form'
    $('#quote_form').submit(function(event) {
        var input = $('#phone');
        // My custom check
        if ( (input.val().length == 10 && input.val().startsWith('0')) ||
            (input.val().length == 9 && !input.val().startsWith('0'))) {
           // Here, before submitting the form, I changed the input value 
           // by what the plugin provides 
           // (which include the country code and the without-zero phone number)
           // The value may be +24381234567
           input.val(intl.getNumber());
        }
        else {
            // In the case when the user types an invalid phone number
            // But you can do more by displaying a error message
            event.preventDefault();
        }
    });
</script> 
```

**控制器.php**

```
// Somewhere in your controller code...
if (isset($_POST['request'])) {
    // HERE IS THE INTERESTING PART OF THIS SOLUTION
    // You don't need any extra rules to validate the phone number value
    // No need a regex that supports all the country codes
    // As when that code comes in, it's valided and support all the country code
    $this->form_validation->set_rules('phone', 'Numéro de téléphone', 'required');
    // You can continue here with your app code.
} 
```

给你！您的模型必须相同，不需要任何更改。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-11T06:25:17.003

```
$this->form_validation->set_rules('newphone','newphone', 
'required||matches[repassword]|max_length[10]|min_length[10]|xss_clean|
callback_isphoneExist'); 
```

# c - IPC 套接字错误

> ID：10838811
> 
> 赞同：0
> 
> 时间：2012-05-31T18:02:07.067
> 
> 标签：c, linux, ipc

linux下（内核版本为2.6.25.20）在client.c和server.c的源码后面我正在开发使用IPC socket通信的程序

**客户端.c**

```
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>
#include <stdio.h>

#define NSTRS       3           /* no. of strings  */
#define ADDRESS     "mysocket"  /* addr to connect */

/*
 * Strings we send to the server.
 */
char *strs[NSTRS] = {
    "This is the first string from the client.\n",
    "This is the second string from the client.\n",
    "This is the third string from the client.\n"
};

main()
{
    char c;
    FILE *fp;
    register int i, s, len;
    struct sockaddr_un saun;

    /*
     * Get a socket to work with.  This socket will
     * be in the UNIX domain, and will be a
     * stream socket.
     */
    if ((s = socket(AF_UNIX, SOCK_STREAM, 0)) < 0) {
        perror("client: socket");
        exit(1);
    }

    /*
     * Create the address we will be connecting to.
     */
    saun.sun_family = AF_UNIX;
    strcpy(saun.sun_path, ADDRESS);

    /*
     * Try to connect to the address.  For this to
     * succeed, the server must already have bound
     * this address, and must have issued a listen()
     * request.
     *
     * The third argument indicates the "length" of
     * the structure, not just the length of the
     * socket name.
     */
    len = sizeof(saun.sun_family) + strlen(saun.sun_path);

    if (connect(s, &saun, len) < 0) {
        perror("client: connect");
        exit(1);
    }

    /*
     * We'll use stdio for reading
     * the socket.
     */
    fp = fdopen(s, "r");

    /*
     * First we read some strings from the server
     * and print them out.
     */
    for (i = 0; i < NSTRS; i++) {
        while ((c = fgetc(fp)) != EOF) {
            putchar(c);

            if (c == '\n')
                break;
        }
    }

    /*
     * Now we send some strings to the server.
     */
    for (i = 0; i < NSTRS; i++)
        send(s, strs[i], strlen(strs[i]), 0);

    /*
     * We can simply use close() to terminate the
     * connection, since we're done with both sides.
     */
    close(s);

    exit(0);
} 
```

**服务器.c**

```
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>
#include <stdio.h>

#define NSTRS       3           /* no. of strings  */
#define ADDRESS     "mysocket"  /* addr to connect */

/*
 * Strings we send to the client.
 */
char *strs[NSTRS] = {
    "This is the first string from the server.\n",
    "This is the second string from the server.\n",
    "This is the third string from the server.\n"
};

main()
{
    char c;
    FILE *fp;
    int fromlen;
    register int i, s, ns, len;
    struct sockaddr_un saun, fsaun;

    /*
     * Get a socket to work with.  This socket will
     * be in the UNIX domain, and will be a
     * stream socket.
     */
    if ((s = socket(AF_UNIX, SOCK_STREAM, 0)) < 0) {
        perror("server: socket");
        exit(1);
    }

    /*
     * Create the address we will be binding to.
     */
    saun.sun_family = AF_UNIX;
    strcpy(saun.sun_path, ADDRESS);

    /*
     * Try to bind the address to the socket.  We
     * unlink the name first so that the bind won't
     * fail.
     *
     * The third argument indicates the "length" of
     * the structure, not just the length of the
     * socket name.
     */
    unlink(ADDRESS);
    len = sizeof(saun.sun_family) + strlen(saun.sun_path);

    if (bind(s, &saun, len) < 0) {
        perror("server: bind");
        exit(1);
    }

    /*
     * Listen on the socket.
     */
    if (listen(s, 5) < 0) {
        perror("server: listen");
        exit(1);
    }

    /*
     * Accept connections.  When we accept one, ns
     * will be connected to the client.  fsaun will
     * contain the address of the client.
     */
    if ((ns = accept(s, &fsaun, &fromlen)) < 0) {
        perror("server: accept");
        exit(1);
    }

    /*
     * We'll use stdio for reading the socket.
     */
    fp = fdopen(ns, "r");

    /*
     * First we send some strings to the client.
     */
    for (i = 0; i < NSTRS; i++)
        send(ns, strs[i], strlen(strs[i]), 0);

    /*
     * Then we read some strings from the client and
     * print them out.
     */
    for (i = 0; i < NSTRS; i++) {
        while ((c = fgetc(fp)) != EOF) {
            putchar(c);

            if (c == '\n')
                break;
        }
    }

    /*
     * We can simply use close() to terminate the
     * connection, since we're done with both sides.
     */
    close(s);

    exit(0);
} 
```

在构建并运行客户端和服务器后，我在接受阶段从服务器收到错误，并打印以下错误 `server: accept: Invalid argument`

相同的应用程序在其他 linux 系统（内核版本 2.6.30）中运行没有问题

如何修复源代码使其在第一个平台上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:04:48.100

> ```
> if ((ns = accept(s, &fsaun, &fromlen)) < 0) { 
> ```

您必须在将其传递给函数之前进行初始化`fromlen`。

> addrlen 参数是一个值结果参数：调用者必须将其初始化为包含 addr 指向的结构的大小（以字节为单位）；返回时它将包含对等地址的实际大小。

就像是：

```
fromlen = sizeof(fsaun);
/* And then accept. */ 
```

正确的类型`fromlen`是`socklen_t`，不是`int`。

# c# - saveFileDialog.FileName - 如何将 * 换成 X？C# WPF

> ID：10838812
> 
> 赞同：-2
> 
> 时间：2012-05-31T18:02:07.587
> 
> 标签：c#, wpf

如果我单击保存，则会有一个文本框显示“如何 *”（myResearchPage.txtResearch.Text）。弹出一个对话框窗口，保存文件名是'how to *'，但我希望保存文件名是'how to X'

* * *

```
saveFileDialog.FileName = !string.IsNullOrWhiteSpace(myResearchPage.txtResearch.Text) ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:18:09.210

用这个

```
// use this namespace`
    using System.Windows.Forms;

 // write this code
SaveFileDialog s = new SaveFileDialog();
s.FileName= myResearchPage.txtResearch.Text.Replace("*", "X"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:17:13.293

无法真正理解您的问题，但会大胆猜测并说这就是您所需要的：

```
string fileName = myResearchPage.txtResearch.Text.Replace("*", "X");
saveFileDialog.FileName = fileName;
saveFileDialog.ShowDialog(); 
```

这将确保默认文件名不包含任何星号。但是，它不会阻止您的用户将他自己的放入对话框中......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:43:05.310

```
saveFileDialog1.FileName = myResearchPage.txtResearch.Text.Replace("*", "X"); 
```

假设您的 saveFileDialog 框命名为“saveFileDialog1”，这将按您的意愿工作。

这是假设您已经在 Windows 窗体中添加了一个保存文件对话框，这是一个简单的拖放操作。它不会显示，但会被绑定并在 Visual Studio Express 的 GUI 构建器底部显示名称。

# javascript - 使用 JQuery 将弹出窗口调整为适当的尺寸？

> ID：10838814
> 
> 赞同：0
> 
> 时间：2012-05-31T18:02:09.607
> 
> 标签：javascript, jquery, dom, cross-browser

我有一个“启动”按钮，它创建一个包含有状态 Web 应用程序的新窗口。我想理想地调整窗口尺寸以完全适合最外层容器的尺寸（即：默认情况下不显示背景）。

宽度通过 Bootstrap Responsive 和 @media 固定。高度是根据容器中的内部元素按需自动生成的。理想情况下，我希望两者的窗口大小都是动态的。

现在，我遇到的问题：

*   我还没有想出一个有效的**height()**、**innerHeight()**和/或**outerHeight()**的组合。详细地说，他们确实给了我容器的高度，但尝试使用**window.resizeTo()**似乎考虑了窗口的标题栏、URL 栏等......基本上，将高度设置为容器的确切大小不够高（产生滚动条）。

*   我在创建窗口时遇到了同样的问题。我试图通过在**window.open()**上传递来动态创建适当宽度、高度的窗口，但这也没有考虑非页面区域。

我在想一个解决方案是找出窗口的可显示区域（考虑非页面区域后的可用高度）——但是，我还没有找到一种优雅的方法来做到这一点。手动确定它和硬编码可能会在每个浏览器的基础上发生变化，甚至在他们使用不同数量的书签栏等的情况下甚至每次使用都会改变......

我也考虑过尝试除**window.resizeTo()**之外的其他方法，但目前还没有找到合适的方法。

有任何想法吗？

*我意识到设置固定高度将是最简单的解决方案，但此时高度会根据所选状态而变化。*

# workflow-foundation - 为要在 IIS 中托管的 WF 服务配置 Ninject

> ID：10838815
> 
> 赞同：3
> 
> 时间：2012-05-31T18:02:10.290
> 
> 标签：workflow-foundation, ninject-extensions

我有一个 asp.net 应用程序。我正在使用 Ninject 来解决依赖关系。我正在使用将托管在 IIS 上的 WF 服务。这些服务将由我的 asp.net 应用程序使用。

对于 WF，我有一个用于自定义活动的类库，它在 WF 服务库中被引用。我想将 Ninject 用于两个 WF 项目中的任何依赖项。我正在使用 [Inject] 属性。

我尝试了很多但没有成功。

请帮助我在 WF 服务库中配置 Ninject。我正在使用 Ninject 的 WF 扩展。

# c# - 将 C++ 结构体转换为 C#

> ID：10838825
> 
> 赞同：7
> 
> 时间：2012-05-31T18:02:35.623
> 
> 标签：c#, c++, struct

我在下面有一个 C++ 结构：

```
struct CUSTOM_DATA {
   int id;
   u_short port;
   unsigned long ip;
} custom_data; 
```

如何将其转换为 C# 结构，将其序列化并通过 tcp 套接字发送？

谢谢！

**更新**

那么C#代码会是什么呢？

```
[StructLayout(LayoutKind.Sequential)]
public struct CustomData
{
 public int id;
 public ushort port;
 public uint ip;
}

public void Send()
{
 CustomData d = new CustomData();
 d.id = 12;
 d.port = 1000;
 d.ip = BitConverter.ToUInt32(IPAddress.Any.GetAddressBytes(), 0);
 IntPtr pointer = Marshal.AllocHGlobal(Marshal.SizeOf(d));
 Marshal.StructureToPtr(d, pointer, false);
 byte[] data_to_send = new byte[Marshal.SizeOf(d)];
 Marshal.Copy(pointer, data_to_send, 0, data_to_send.Length);
 client.GetStream().Write(data_to_send, 0, data_to_send.Length);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T18:06:43.573

此结构的 C# 版本将是：

```
[StructLayout(LayoutKind.Sequential)]
public struct CustomData
{
    public int id;
    public ushort port;
    public uint ip;
} 
```

至于通过套接字发送，您可以直接发送二进制数据。[Marshal 类](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.aspx)具有从结构中获取指针 (IntPtr) 并复制到字节数组中的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:07:58.287

```
[StructLayout(LayoutKind.Sequential)]
struct CUSTOM_DATA {
   int id;
   ushort port;
   uint ip;
};
CUSTOM_DATA cData ; // use me 
```

***编辑：***谢谢芦苇

# android - 无法在android中设计布局

> ID：10838826
> 
> 赞同：0
> 
> 时间：2012-05-31T18:02:40.877
> 
> 标签：android

我必须设计一个布局，如下所示。在这里，我有 5 个垂直布局，并且我附上了一个图像（垂直矩形）。现在我必须添加水平背景图像，如给定图所示![我已将所有布局（名为 1、2、3、4、5）设为垂直，并希望同时具有水平和垂直背景，如下所示](../Images/2a8bafd7bcf0e348df8b149c95ac0ddc.png)。因为我的布局是垂直的，所以我不知道如何将它添加到我的背景中。

我已将所有布局（命名为 1、2、3、4、5）设为垂直或者是否有任何其他方法来制作此布局。

**我的代码如下： -**

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="10dip" >

            <ImageView
                android:id="@+id/img_CategoryItem"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/ic_launcher" />

            <TextView
                android:id="@+id/tv_CategoryItem_Name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="102dp"
                android:text="TextView"
                android:textColor="#000000"
                android:textSize="16dip"
                android:textStyle="bold" />

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginRight="10dip"
                android:src="@drawable/black_arrow" />
        </RelativeLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <LinearLayout
                    android:layout_width="60dp"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >

                    <View
                        android:layout_width="60dip"
                        android:layout_height="wrap_content" />

                    <!--
                         <ImageView
                        android:id="@+id/img_CategoryItem"
                        android:layout_width="60dip"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="5dip"
                        android:layout_marginTop="5dip"
                        android:src="@drawable/ic_launcher" />

                    -->
                </LinearLayout>

                <LinearLayout
                    android:layout_width="60dip"
                    android:layout_height="fill_parent"
                    android:orientation="vertical" >

                    <View
                        android:layout_width="wrap_content"
                        android:layout_height="20dp" />

                    <TextView
                        android:id="@+id/tv_CategoryItem_Year1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:background="#DBDBDB"
                        android:text="2012"
                        android:textColor="#000000"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/tv_CategoryItem_Year2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="20dip"
                        android:text="2011"
                        android:textColor="#000000"
                        android:textStyle="bold" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/linear_CategoryItem_RatingSelected"
                    android:layout_width="60dp"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/textView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:text="Rating" />

                    <TextView
                        android:id="@+id/tv_CategoryItem_Rating1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:background="#DBDBDB"
                        android:text="Rating"
                        android:textColor="#C05E09"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/tv_CategoryItem_Rating2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:layout_marginTop="20dip"
                        android:text="Rating"
                        android:textColor="#C05E09"
                        android:textStyle="bold" />
                </LinearLayout>

                <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/linear_CategoryItem_MPGSelected"
                    android:layout_width="50dp"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/textView3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:text="MPG" />

                    <TextView
                        android:id="@+id/tv_CategoryItem_MPG1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:background="#DBDBDB"
                        android:text="MPG"
                        android:textColor="#0B5AAD"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/tv_CategoryItem_MPG2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:layout_marginTop="20dip"
                        android:text="MPG"
                        android:textColor="#000000"
                        android:textStyle="bold" />
                </LinearLayout>

                <LinearLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/linear_CategoryItem_PriceSelected"
                    android:layout_width="78dp"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/textView3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:text="PRICE" />

                    <TextView
                        android:id="@+id/tv_CategoryItem_Price1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:text="Price"
                        android:textColor="#000000"
                        android:textStyle="bold" />

                    <TextView
                        android:id="@+id/tv_CategoryItem_Price2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:layout_marginTop="20dip"
                        android:text="Price"
                        android:textColor="#000000"
                        android:textStyle="bold" />
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:09:44.067

它非常简单。您只需要使用框架布局，您必须在其中添加具有相应背景和整个线性布局的图像视图。为了更好地澄清，我在您指定的布局中添加了 xml 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"

     >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip"
        android:layout_marginTop="10dip" >

        <ImageView
            android:id="@+id/img_CategoryItem"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/tv_CategoryItem_Name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="102dp"
            android:text="TextView"
            android:textColor="#000000"
            android:textSize="16dip"
            android:textStyle="bold" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="10dip"
            android:src="@drawable/black_arrow" />
    </RelativeLayout>

    <FrameLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <ImageView  android:layout_width="match_parent"
        android:layout_height="20dp"
        android:layout_gravity="bottom"
        android:layout_marginBottom="55dp"
        android:background="#D8D8D8"/>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:layout_width="60dp"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <View
                    android:layout_width="60dip"
                    android:layout_height="wrap_content" />

                <!--
                     <ImageView
                    android:id="@+id/img_CategoryItem"
                    android:layout_width="60dip"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="5dip"
                    android:layout_marginTop="5dip"
                    android:src="@drawable/ic_launcher" />

                -->
            </LinearLayout>

            <LinearLayout
                android:layout_width="60dip"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                >

                <View
                    android:layout_width="wrap_content"
                    android:layout_height="17dp" />

                <TextView
                    android:id="@+id/tv_CategoryItem_Year1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="2012"
                    android:textColor="#000000"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/tv_CategoryItem_Year2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="20dip"
                    android:text="2011"
                    android:textColor="#000000"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linear_CategoryItem_RatingSelected"
                android:layout_width="60dp"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:text="Rating" />

                <TextView
                    android:id="@+id/tv_CategoryItem_Rating1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:text="Rating"
                    android:textColor="#C05E09"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/tv_CategoryItem_Rating2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:layout_marginTop="20dip"
                    android:text="Rating"
                    android:textColor="#C05E09"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/linear_CategoryItem_MPGSelected"
                android:layout_width="50dp"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:text="MPG" />

                <TextView
                    android:id="@+id/tv_CategoryItem_MPG1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:text="MPG"
                    android:textColor="#0B5AAD"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/tv_CategoryItem_MPG2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:layout_marginTop="20dip"
                    android:text="MPG"
                    android:textColor="#000000"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/linear_CategoryItem_PriceSelected"
                android:layout_width="78dp"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:text="PRICE" />

                <TextView
                    android:id="@+id/tv_CategoryItem_Price1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:text="Price"
                    android:textColor="#000000"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/tv_CategoryItem_Price2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:layout_marginTop="20dip"
                    android:text="Price"
                    android:textColor="#000000"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</FrameLayout>
</LinearLayout> 
```

只需用这个更改您的 xml 或在现有 xml 中添加更改。希望它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:16:30.487

您可以将背景图像添加到 TextView 中，也可以将背景图像`android:background="@drawable/myressource"`嵌套在`LinearLayout`水平方向以包装您`TextView`并为此布局添加背景图像。

# php - FTP并允许其他用户

> ID：10838827
> 
> 赞同：0
> 
> 时间：2012-05-31T18:02:44.163
> 
> 标签：php, ftp, chmod

我试图让其他人与我一起在我的网站上工作。有几个文件/文件夹我不希望他们能够访问/查看。

一个文件是**dbase.php**，文件夹是**./crypt/**

我怎么能不让他们看到那些文件甚至在那里？

我试图允许在我的网站上工作的一个人说要使用 PHP 的 chmod，我查了一下，它确实改变了文件权限，但是是什么让他不能放

```
chmod('dbase.php',0777); 
```

在 index.php 之类的另一个文件中并更改数据库文件的权限，然后他可以看到我在那里拥有的内容。我试图隐藏的是我的数据库的密码和一些运行我的网站的特殊变量。只是有些事情我不喜欢让“我不是 100%”知道的人四处游荡。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:11:32.720

如果您认识的人应该能够编辑 PHP 代码并将其上传到您的站点，并且您站点的 PHP 代码应该能够读取机密文件，那么这是没有解决方案的。

他们总是可以上传读取秘密文件并输出其内容的代码。

# django - 如何在 Django 中重新创建此 SQL？

> ID：10838829
> 
> 赞同：0
> 
> 时间：2012-05-31T18:02:53.170
> 
> 标签：django, django-models, django-queryset

```
SELECT `av`.`answer_id`, SUM(IF(`av`.`helpful`=1, 1, -1)) as `score` 
FROM `questions_answervote` AS `av` 
JOIN `questions_answer` AS `a` 
ON `a`.`id`=`av`.`answer_id` AND `a`.`question_id`='775819' 
GROUP BY `av`.`answer_id` 
HAVING SUM(IF(`av`.`helpful`=1, 1, -1)) > 0 
```

我有三个模型`Question`：`Answer`和`AnswerVote`。每个问题都有一组答案，每个答案都有一组 AnswerVote。AnswerVote 有`helpful`一个布尔值字段。

我想要做的是通过计算`score`每个答案的 a 来获得一个问题的所有有用答案（+1 表示有帮助 = True，-1 表示有帮助 = False）。如果答案的分数 > 0，则答案很有帮助。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:49:49.570

如果您有以下情况：

```
from django.db import models

class Question(models.Model):
    data = models.CharField(max_length=30)

class Answer(models.Model):
    question = models.ForeignKey(Question)

    def __str__(self):
        return str(self.__dict__)

class AnswerVotes(models.Model):
    answer = models.ForeignKey(Answer)
    helpful = models.SmallIntegerField(default=0)

    def __str__(self):
        return str(self.__dict__) 
```

它可能看起来有点像解决方法，但为什么不做所有投票的平均帮助。您将在数据库中的原始值介于 0 和 1 之间，而不是 -1 到 1 的范围。在您的情况下，只需将 0.5 视为中间立场，您应该会得到相同的行为。

```
Answer.objects.annotate(score = Avg('answervotes__helpful'))

    {'score': None, 'id': 1, 'question_id': 1}
    {'score': 1.0, 'id': 2, 'question_id': 1}
    {'score': 0.5, 'id': 3, 'question_id': 1}
    {'score': 0.3333333333333333, 'id': 4, 'question_id': 2}
    {'score': 0.5, 'id': 5, 'question_id': 3} 
    {'score': 0.4, 'id': 6, 'question_id': 3}

Answer.objects.annotate(score = Avg('answervotes__helpful')).filter(score__gte=0.5)

    {'score': 1.0, 'id': 2, 'question_id': 1}
    {'score': 0.5, 'id': 3, 'question_id': 1}
    {'score': 0.5, 'id': 5, 'question_id': 3} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:33:57.407

Django 的 ORM 不这样做`HAVING`，因此您将不得不为此使用原始 SQL。

# css - CSS显示块和浮动元素（css精通） 这个可以吗？

> ID：10838842
> 
> 赞同：0
> 
> 时间：2012-05-31T18:04:01.587
> 
> 标签：css

所以我正在开发一个移动微型网站，也就是说，我希望页面上的链接表现得像 ios 链接/标签一样，当你点击它们时，按钮的整个宽度都是活动的，并改变颜色来显示单击/手指在状态等上。加上该 div 的整个宽度就像一个按钮，因此在小型手机或平板电脑上，只要我没有指定宽度，它的活动状态就会从左到一直都是“块”

例如，如果我有一个常规的文本链接。像这样：

```
<div class="mainBtns"><a href="gallery.php">Portfolio</a></div> 
```

id 给它这个 CSS，以便在鼠标悬停/单击手指等时，它的行为类似于 ios 按钮/选项卡。

```
CSS:

        .mainBtns a{
            display:block;

        }

    .mainBtns a:hover{
        background-color:#d8d3cb;   

    } 
```

现在说了算。这是我试图解决的问题。

我有一个名为**thumbItemW**的父 Div （内容包装器）；和两个名为**galThumb**和**galThumbtxt 的子项**

内容块如下所示：

```
<div class="thumbItemW ">
    <div class="galThumb">
        <a href="gallery-highrise.php" alt=""><img src="images/thumbs/highrise.jpeg" alt="High rise Gallery" />
        </a>
    </div> **//this is the gallery thumb floated left**

<div class="galThumbTxt"> 
    <a href="gallery-highrise.php" alt="">HIGH RISE CONTEMPORARY</a>
</div>**//this is the gallery thumb text floated right**
    <div class="clearEm"> </div>//clear the float
</div> <!-- thumbItemW ender --> 
```

我想要做的是，当用户手指单击父 div 时，背景颜色会像上面的示例一样发生变化`"mainBtns / mainBtns a:hover"`

问题是，与 mainBtns 的第一个示例不同，因为这个有子项，如果我执行以下操作：

```
pseudo CSS:

.thumbItemW  a:hover{
    display:block;  
} 
```

或类似的东西，这不会像 id 想要的那样工作，因为元素是在这个父 div 中浮动的。

我想要做的是使父 div **.thumbItemW**像一个显示块，这样当用户单击时，他们可以沿该 div 宽度单击任何位置并仍然激活按钮，而不是单击按钮顶部的 RIGHT 或文本。

这可以按照我的方式实现吗？这可以在没有 javascript/jquery 的情况下单独使用 CSS 来实现吗？

希望它不会太混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:07:36.293

为什么不只在 a 元素上指定宽度和高度？

# php - 如何提供用户上传的图片？

> ID：10838845
> 
> 赞同：2
> 
> 时间：2012-05-31T18:04:08.310
> 
> 标签：php, file-upload

我正在构建一个允许登录用户上传产品图片的小型网络应用程序。我正在尝试正确构建，并且在过去一些天真的实施之后，决定将所有上传的内容添加到我的公共文件夹中。

```
\app (public folder)
-\index.php
\includes
\config
\uploads 
```

这将使得如果恶意用户设法上传 PHP 文件，服务器将无法访问或提供该文件。

话虽如此，我将如何在网页上提供这些图片？做这个的最好方式是什么？过去，我使用了一个 getImage.php 文件，该文件将采用一个 ID 参数（以及一些生成值的哈希值以避免用户只是猜测 ID），它看起来像“getImage.php?id=555&c=44j54k3h5”。服务器抓取数据库中的图像信息（真实路径）并加载内容，重建头部，并发送图像。

这种方法是否存在任何安全问题？有没有办法让它更漂亮？有一个查找 /images/imagename.jpg 并将它们发送到我的 getImage.php 文件的 htaccess 重写规则会添加安全漏洞吗？任何关于最佳实践的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:21:31.490

看看这堂课。它将处理上传，进行安全检查并为您煮咖啡:)

[http://www.verot.net/php_class_upload.htm](http://www.verot.net/php_class_upload.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:25:50.110

您提供上传图片的方法的安全性确实取决于许多其他因素。

*   上传时如何处理和保护图像/文件？上传的目录/文件权限是什么？
*   哪些进程有权读取和写入这些位置？
*   你有什么类型的文件处理程序可以执行任意文件？
*   如果您要使用 PHP->get_image->display_image 路由，它是否会在上传后尝试防止恶意意图（在 getimage 上？）

我会使用[Apache mod_alias](http://httpd.apache.org/docs/2.0/mod/mod_alias.html)来引用 webroot 上面的目录。这样，您仍然可以使用指向图像的链接，而无需打开完整的以上根目录来暴露。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:37:40.550

“更漂亮”的方法是使用`.htaccess`重定向

```
RewriteEngine On                                                                                                                                                                                                                                  
RewriteBase /                                                                                                                      
RewriteRule ^getImage/([0-9]+)/(.+)\.png$ getImage.php?id=$1&c=$2 [NC,L] 
```

然后在`getImage.php`

```
if (isset($_GET['id']) && isset($_GET['c'])) {

    // set headers
    header("Content-Type: image/png");

    // cache control
    header("Cache-Control: private, max-age=10800, pre-check=10800");
    header("Pragma: private");
    header("Expires: " . date(DATE_RFC822, strtotime("2 day")));
    if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE'])) {
            header('Last-Modified: ' . $_SERVER['HTTP_IF_MODIFIED_SINCE'], true, 304);                                    
            exit;                            
    }

    /* do things */
    imagepng($image_resource);
    imagedestroy($image_resource);
}
else {

    echo "bad request";
} 
```

所以而不是

```
site.com/getImage.php?id=555&c=44j54k3h5 
```

你会用

```
site.com/getImage/555/44j54k3h5.png 
```

这种方法没有任何额外的安全风险或漏洞。只需确保您的 get 变量在查询之前被转义以避免注入攻击。

如果您想保护自己免受恶意文件上传的侵害，则需要在服务之前执行此操作。

# .net - 将 Web 服务响应映射到业务对象属性

> ID：10838846
> 
> 赞同：1
> 
> 时间：2012-05-31T18:04:11.413
> 
> 标签：.net

我在业务层中有以下课程。

```
 Class Person {
    private string firstName;
    Public string FirstName
    {
       get{
                      return firstName;
                 }
       set{ 
                      firstName = value;
                 }
    }
    private string lastName;
    Public string LastName
    {
       get{
                      return lastName;
                 }
       set{
                      lastName = value;
                 }
    } 
```

}

以下 Web 服务为我提供了需要在 Person 对象中设置的数据。

```
public partial class MyWebservice 
{
    private string strFstName;

    private string strLstName;

    /// <remarks/>
    public string FName {
        get {
            return this.strFstName;
        }
        set {
            this.strFstName = value;
        }
    }

    /// <remarks/>
    public string LName {
        get {
            return this.strLstName;
        }
        set {
            this.strLstName = value;
        }
    }
} 
```

我需要将来自 Web 服务的响应映射到业务对象。以上只是一个示例。我有一个具有 100 多个属性的业务层类，需要从 Web 服务响应中填充。我只知道一种方法。IE。遍历 Web 服务响应并设置业务对象属性。是否有更简单的方法将 Web 服务属性映射到业务对象属性？我正在寻找一种更简单、代码行更少的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:10:40.410

听起来像是[AutoMapper的工作](https://github.com/AutoMapper/AutoMapper)

# c# - 跟踪 Observable 中的（数量）观察者？

> ID：10838847
> 
> 赞同：7
> 
> 时间：2012-05-31T18:04:11.883
> 
> 标签：c#, system.reactive

我有一个 observable 代表股票价格流。如果我的可观察序列上没有观察者，我希望能够断开与提供价格流的远程服务器的连接，但我不想这样做，直到每个观察者都调用了 Dispose()。然后以类似的方式，当第一个人调用订阅时，我想重新连接到远程服务器。

有没有办法计算出有多少观察者在 observable 上调用了 subscribe？或者也许是一种知道观察者何时调用订阅或处置的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T19:25:25.223

我会简单地使用 RefCount / Publish。我总是觉得如果我正在实施 IObservable 我工作太努力了。

```
myColdObservable.Publish().RefCount(); 
```

这将使您的 observable 在每个人都断开连接后停止脉冲。这是一个示例：

```
var coldObservable = Observable
    .Interval(TimeSpan.FromSeconds(1))
    .ObserveOn(Scheduler.TaskPool)
    .Select(_ => DoSomething());

var refCountObs = coldObservable.Publish().RefCount();

CompositeDisposable d = new CompositeDisposable();
d.Add(refCountObs.Subscribe(n => Console.WriteLine("First got: " + n)));
d.Add(refCountObs.Subscribe(n => Console.WriteLine("Second got: " + n)));
d.Add(refCountObs.Subscribe(n => Console.WriteLine("Third got: " + n)));

//Wait a bit for work to happen
System.Threading.Thread.Sleep(10000);

//Everyone unsubscribes
d.Dispose();

//Observe that DoSomething is not called.
System.Threading.Thread.Sleep(3000); 
```

这不包括您实际上想知道订阅者*数量*的情况，但我认为这符合您在没有订阅者的情况下停止工作的要求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-18T13:36:32.627

有点旧，但我遇到了这篇文章，因为我遇到了一个问题，我需要知道订阅者的数量。使用 Bart 的建议，我想出了这个扩展。

```
public static IObservable<T> CountSubscribers<T>(this IObservable<T> source, Action<int> countChanged)
{
 int count = 0;

 return Observable.Defer(() =>
 {
    count = Interlocked.Increment(ref count);
    countChanged(count);
    return source.Finally(() =>
     {
        count = Interlocked.Decrement(ref count);
        countChanged(count);
     });
 });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-02T10:09:08.453

一般来说，不要实现 IObservable；通常，Rx 中已经有一些东西可以直接或通过组合来帮助你。如果您必须实现 IObservable，请使用 Observable.Create 来执行此操作，以获得观察者合约等所需的所有保证。

至于您的问题 - 使用 Publish 和 RefCount 的建议正是您正在寻找的组合。如果您出于某种原因想计算自己，请使用 Observable.Defer 拦截订阅，可能使用 Observable.Finally 拦截序列终止。或者，使用 Observable.Create 包装源，将观察者转发到包装的序列，并使用计数逻辑包装返回的 IDisposable（使用 Disposable.Create）。

干杯，

-巴特（Rx 团队）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T18:07:15.103

`IObservable<T>`是您可以实现的[接口。](http://msdn.microsoft.com/en-us/library/dd782981.aspx)在接口的订阅方法中，您可以通过在内部维护一个列表来跟踪观察者。

以下代码片段来自 MSDN。

```
private List<IObserver<Location>> observers;

public IDisposable Subscribe(IObserver<Location> observer) 
{
   if (! observers.Contains(observer)) 
      observers.Add(observer);

   // ------- If observers.Count == 1 create connection. -------

   return new Unsubscriber(observers, observer);
}
private class Unsubscriber : IDisposable
{
   private List<IObserver<Location>>_observers;
   private IObserver<Location> _observer;

   public Unsubscriber(List<IObserver<Location>> observers, IObserver<Location> observer)
   {
      this._observers = observers;
      this._observer = observer;
   }

   public void Dispose()
   {
      if (_observer != null && _observers.Contains(_observer))
         _observers.Remove(_observer);
      // ----------- if observers.Count == 0 close connection -----------
   }
} 
```

# css - JSF selectOneRadio 缩进

> ID：10838848
> 
> 赞同：0
> 
> 时间：2012-05-31T18:04:12.250
> 
> 标签：css, jsf, styles, radio-button, indentation

无论如何缩进一组单选按钮？我希望它看起来像下面这样：

```
o 项目 1
o 项目 2
    o 项目 2.1
    o 项目 2.2
o 项目 3

```

我尝试只对其应用一种样式，但它不起作用。

```
<style>
    .indent {
        text-indent: 3em;
    }
</style>

<p class="indent">test</p>

<h:selectOneRadio layout="pageDirection" value="#{myBean}">
    <f:selectItem itemValue="1" itemLabel="Item 1" />
    <f:selectItem itemValue="2" itemLabel="Item 2" />   <!-- also okay if item 2 is not selectable and item 2.1 and 2.2 are -->
    <p class="indent">
        <f:selectItem itemValue="2.1"  itemLabel="Item 2.1" />
        <f:selectItem itemValue="2.2" itemLabel="Item 2.2" />
    </p>
    <f:selectItem itemValue="3" itemLabel="Item 3" />
</h:selectOneRadio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:23:11.667

我猜您想将单选按钮显示为列表。将带值的`layout`属性添加到标签组件中即可实现：`pageDirection``<h:selectOneRadio />`

```
<h:selectOneRadio layout="pageDirection" value="#{myBean}">
    <!-- your items go here... -->
</h:selectOneRadio> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:10:45.177

您是否尝试过添加边距而不是缩进？

```
.myIndent { 
    margin-left: 3em; 
} 
```

看看[http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/) ，它们涵盖了单选按钮样式。

# google-drive-api - 用于 dotnet 的 Google Drive Dredit 示例应用

> ID：10838852
> 
> 赞同：1
> 
> 时间：2012-05-31T18:04:19.200
> 
> 标签：google-drive-api

我按照与本文中描述的完全相同的步骤来测试 dotnet 应用程序。

[https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

我的环境是视觉工作室 2010 和 IIS 7

一切都很好。应用部署成功，我可以看到登录屏幕和“允许访问”对话框。但是，一旦我授予访问权限，我就会看到以下错误。

任何人都可以帮忙吗？

谢谢，强

## “/”应用程序中的服务器错误。

未能找到或加载已注册的 .Net Framework 数据提供程序。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Configuration.ConfigurationErrorsException：无法找到或加载已注册的 .Net Framework 数据提供程序。

源错误：

第 82 行：{ 第 83 行：StoredCredentialsDBContext db = new StoredCredentialsDBContext(); 第 84 行：StoredCredentials sc = db.StoredCredentialSet.FirstOrDefault(x => x.UserId == userId); 第 85 行：如果 (sc != null) 第 86 行：{

源文件：C:\Qiang\DrEdit\Models\Utils.cs 行：84

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:58:21.663

您必须安装 [Microsoft SQL Server Compact 4.0](http://www.microsoft.com/download/en/details.aspx?id=17876)，Entity Framework 使用它来将模型类映射到数据库实体。

# html - CSS垂直对齐不同的文字大小

> ID：10838853
> 
> 赞同：8
> 
> 时间：2012-05-31T18:04:21.773
> 
> 标签：html, css, vertical-alignment

假设以下 HTML：

```
​&lt;p><span style="font-size: 40px;">A</span>a​​​​​​​​​​​​​​​​​​​​​​&lt;/p>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

是否可以让第二个字符与第一个字符的中心对齐？

## 实际结果

在[此示例中，第二个字符与第一个字符的](http://jsfiddle.net/uEu6B/)**底部**对齐：

![在此处输入图像描述](../Images/97c02251f2eac0ab4f69946433d94c11.png)

## 预期结果

但是，我希望第二个字符与第一个字符的**中间**对齐：

![在此处输入图像描述](../Images/4cfeab27eb5d7cd785770b1593aa4cf6.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T18:08:54.413

只需添加`vertical-align:middle;`样式。

[http://jsfiddle.net/uEu6B/1/](http://jsfiddle.net/uEu6B/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T18:08:22.707

添加[`vertical-align:middle;`](https://developer.mozilla.org/en/CSS/vertical-align)到`<span>`（[示例](http://jsfiddle.net/AgBhW/)）：

```
<p><span style="font-size: 40px;vertical-align: middle;">A</span>a</p>​​​​​​​​​​​​ 
```

# mysql - 带有 ModWSGI 和烧瓶的 SQLAlchemy 中的“未知 MySQL 服务器”

> ID：10838860
> 
> 赞同：1
> 
> 时间：2012-05-31T18:04:55.393
> 
> 标签：mysql, apache, sqlalchemy, mod-wsgi, flask

我正在使用 Sqlalchemy 在 Flask 上运行 Web 应用程序。在调试服务器上，应用程序运行良好。但是，当我尝试使用 ModWSGI 从 Apache 运行它时（不更改任何代码），我突然收到此错误：

> OperationalError: (OperationalError) (2005, "Unknown MySQL server host 'myremotehost.topleveldomain' (111)") 无 无

令人费解的是，mysql 服务器很好，它正在运行，并且只有当它使用烧瓶调试服务器运行时，这个应用程序才能找到它。它还发现在本地运行的 MySQL 服务器没有问题。

我什至不确定要向你们展示什么代码来提供帮助，但这是我所说的：

```
engine = create_engine(DATABASE, echo=False) 
db_session = scoped_session(sessionmaker(autocommit=False,
                                         autoflush=False,
                                         bind=engine)) 
```

这是网址的样子：

> mysql://username:password@mydomain.com:3306/dbname

...这是虚拟主机代码`httpd.conf`：

```
<VirtualHost *:808>
    ServerName localhostdomaingoeshere
    WSGIScriptAlias / /path/to/app.wsgi

    Alias /static /path/to/static

    LogLevel info
    ErrorDocument 502 /error

    <Directory /path/to/app>
        Order deny,allow
        Allow from all
    </Directory>
</VirtualHost> 
```

我确定这是愚蠢的，我部分只是不知道从哪里开始，因为错误消息没有意义。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-02T15:39:58.090

不是一个真正的解决方案，但我切换到 gunicorn 并且这不那么令人头疼。

# wpf - WPF HeaderContent 控件垂直对齐

> ID：10838861
> 
> 赞同：0
> 
> 时间：2012-05-31T18:05:00.980
> 
> 标签：wpf, tabs, controls

如何使用选项卡控件垂直“拉伸”来获得 HCC？我怎样才能做到这一点？

这是标头内容控件 XAML：

```
<HeaderedContentControl 
 Content="{Binding Path=Workspaces}" 
 ContentTemplate="{StaticResource WorkspacesTemplate}" /> 
```

这是相应的样式信息：

```
<DataTemplate x:Key="WorkspacesTemplate">
    <TabControl 
  IsSynchronizedWithCurrentItem="True" 
  ItemsSource="{Binding}" 
  ItemTemplate="{StaticResource ClosableTabItemTemplate}"
  Margin="4"
  />
</DataTemplate>

<DataTemplate x:Key="ClosableTabItemTemplate">
 <DockPanel>
     <Button 
    Command="{Binding Path=CloseCommand}"
    Content="X"
    Cursor="Hand"
    DockPanel.Dock="Right"
    Focusable="False"
    FontFamily="Arial" 
    FontSize="9"
    FontWeight="Bold"  
    Margin="0,1,0,0"
    Padding="0"
    VerticalContentAlignment="Bottom"
    Width="16" Height="16" 
    />
        <ContentPresenter 
    Content="{Binding Path=DisplayName}" 
    />
 </DockPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:33:19.553

如果您检查 HeaderedContentControl 的控件模板，您会发现它将内容放在 StackPanel 中，这就是内容不垂直拉伸的原因。这是默认模板：

```
<Style x:Key="HeaderedContentControlStyle" 
       TargetType="{x:Type HeaderedContentControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type HeaderedContentControl}">
                <StackPanel>
                    <ContentPresenter ContentSource="Header"/>
                    <ContentPresenter/>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

因此，如果我们用这样的 Grid 替换 StackPanel：

```
<Style x:Key="HeaderedContentControlStyle" 
       TargetType="{x:Type HeaderedContentControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type HeaderedContentControl}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <ContentPresenter ContentSource="Header"/>
                    <ContentPresenter Grid.Row="1"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

并使用那种风格

```
<HeaderedContentControl    
    Style="{StaticResource HeaderedContentControlStyle}"
    Content="{Binding Path=Workspaces}"    
    ContentTemplate="{StaticResource WorkspacesTemplate}" /> 
```

那么内容应该垂直拉伸。

# database - 我可以在没有 SQL Server 的情况下打开 .bak 文件吗？

> ID：10838867
> 
> 赞同：0
> 
> 时间：2012-05-31T18:05:22.577
> 
> 标签：database, sql-server-2008-r2, backup, restore

我想打开一个用 SQL Server 创建的 .bak 文件。有什么方法可以用任何其他程序打开该数据库？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T09:48:45.737

我假设你是 Windows 用户，那么，如果你只需要查看一些记录，你可以使用记事本浏览数据库。

# python - 如何在 Backbone.js 中使用 MongoDB ReferenceField？

> ID：10838871
> 
> 赞同：1
> 
> 时间：2012-05-31T18:05:39.620
> 
> 标签：python, mongodb, backbone.js, flask, mongoengine

我在 Flask 中定义了两个 Mongo 文档：

```
class Category(db.Document):
    name = db.StringField(max_length=255, required=True)
    created = db.DateTimeField(default=datetime.datetime.now, required=False)

    def __unicode__(self):
        return self.name

class Event(db.Document):
    description = db.StringField(max_length=255, required=True)
    created = db.DateTimeField(default=datetime.datetime.now, required=False)
    categories = db.ListField(db.ReferenceField(Category),required=False)
    meta = {
        'indexes': ['-description','created'],
        'ordering': ['-created']
    } 
```

我使用一个很小的 ​​REST api 来为我的 Backbone 模型提供服务。

```
window.EventModel = Backbone.Model.extend({
    defaults: {},
    initialize: function Event(){},
    validate: function(a){},
    url: function(){
        return this.id ? '/events/' + this.id : '/events';
    }

})

window.CategoryModel = Backbone.Model.extend({
    defaults: {},
    initialize: function Expense(){},
    validate: function(a){},
    url: function(){
        [...]
    }

}) 
```

这是我的 JSON 响应：

```
[{
        "description": "MyEvent",
        "created": {"$date": 1338404831615},
        "id": "4fc653ffbe51030887000004",
        "categories": [{
                "$ref": "category", 
                "$id": {"$oid": "4fc652efbe51030887000001"}
        }, {
                "$ref": "category",
                "$id": {"$oid": "4fc65304be51030887000002"}
        }]
}] 
```

我想知道如何将 Event 模型与 Category 模型链接到 Backbone？

注意：在这种情况下，骨干关系无法按预期工作。

有任何想法吗？非常感谢！

# ruby - Ruby库在布局的网页上查找项目的“位置”？

> ID：10838878
> 
> 赞同：0
> 
> 时间：2012-05-31T18:06:15.900
> 
> 标签：ruby, seo, web, nokogiri

我正在寻找一个库或策略，可以在理想情况下与 Ruby/Nokogiri 结合使用，以确定在浏览器中查看时网页上项目的布局位置。

例如，在我正在查看的当前页面中，右上角有一个“提问”按钮（我猜在标题中）。例如，如果我想查看页面上所有单词“question”的位置，它会匹配这个单词，而其他地方有单词 question，就 XY 坐标或像素而言，我会怎么做?

我显然必须加载 CSS。但是，还有什么？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:38:07.933

[Watir 项目](http://watir.com/)可能会有所帮助，因为它直接与浏览器对话，允许您在浏览器完成渲染页面后获取有关页面的信息。您需要查看 API 以查看是否可以获得元素的像素位置。

不过，像素位置会很困难，因为它们与字体大小相关，并且真人用户可能拥有覆盖 CSS 应用的设置的东西。您在测试中从浏览器获得的信息可能与真实用户看到的信息大相径庭。这对您来说可能是，也可能不是。

# browser - 总是显示溢出滚动条

> ID：10838885
> 
> 赞同：1
> 
> 时间：2012-05-31T18:06:41.470
> 
> 标签：browser, cross-browser, scroll, scrollbar, overflow

我注意到在某些情况下，在某些浏览器中，我的水平溢出滚动条在您开始滚动之前不会显示。这不好......用户需要知道除了当前显示的内容之外还有内容。

**有没有办法确保滚动条总是显示？**

我在 Lion、MacBook、Safari、Chrome 上都看到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:34:43.433

由于您使用的是 Lion，请检查系统偏好设置 > 常规 > 显示滚动条。这是操作系统首选项。

这三个选项是：

1.  自动基于输入设备
2.  滚动时
3.  总是

这是他们试图从 iOS 继承的“功能”。也就是说，你可以尝试这样的事情：

```
::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 7px;
}
::-webkit-scrollbar-thumb {
    border-radius: 4px;
    background-color: rgba(0,0,0,.5);
    -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5);
} 
```

[http://www.hardcode.nl/subcategory_2/article_575-force-scrollbars-on-mac-os-lion-webkit.htm](http://www.hardcode.nl/subcategory_2/article_575-force-scrollbars-on-mac-os-lion-webkit.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:31:47.467

好吧，如果不创建自己的滚动条，真的没有办法解决这个问题。所以我选择创建一个自定义按钮导航。

# javascript - 在 Coffeescript 中未定义 data('autocomplete')

> ID：10838886
> 
> 赞同：0
> 
> 时间：2012-05-31T18:06:42.257
> 
> 标签：javascript, jquery, coffeescript, undefined

我有这个片段：

```
$("#select_sourcer").autocomplete(
    minLength: 2
    source: "/admin/users/list_of_sourcers.json"
    focus: (event,ui) -> 
      $('#select_sourcer').val(ui.item.full_name)
      false
    select: (event,ui) -> 
      $("#select_sourcer").val(ui.item.full_name)
      $("#merchant_sourcer_id").val(ui.item.id)
      false
    ).data("autocomplete")._renderItem = (ul, item) ->
      $("<li></li>").data("item.autocomplete", item).append("<a>" + item.full_name_with_status + "</a>").appendTo ul 
```

有时我会收到此错误：

无法设置未定义的属性“_renderItem”

所以我假设，当：

```
$("#select_sourcer").autocomplete(...).data("autocomplete") 
```

未定义，我们无法设置属性。正如在这个线程中所说：[为什么我会收到这个 JS 错误？](https://stackoverflow.com/questions/5590776/why-am-i-getting-this-js-error)

但是，我将如何检查 Coffeescript 中的投票答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:37:43.430

您可以使用[存在运算符的访问器变体](http://coffeescript.org/#operators)：

> 存在运算符的访问器变体`?.`可用于吸收属性链中的空引用。`.`在基值可能为**null**或**undefined**的情况下，使用它代替点访问器。

因此，如果您正在运行该 jQuery 并且您不确定`#select_sourcer`DOM 中是否有 a，那么您可以将 a`?`滑入正确的位置：

```
$("#select_sourcer").autocomplete(
  ...
  ).data("autocomplete")?._renderItem = (ul, item) ->
    #-------------------^
    ... 
```

这将具有或多或少相同的效果：

```
x = $('#select_sourcer').autocomplete(...).data('autocomplete')
if(x)
    x._renderItem = (ul, item) -> ... 
```

以上仅作说明之用，`?.`实为核对`!= null`而非一般虚伪。

仅当 DOM中没有时才需`#select_sourcer`要这样做，因此如果不需要它，您可能希望避免尝试完全绑定自动完成器；OTOH，有时更容易不在乎它是否存在并绑定。

# java - GridBagLayout 缺少 JTextFilds

> ID：10838894
> 
> 赞同：0
> 
> 时间：2012-05-31T18:07:16.340
> 
> 标签：java, swing, jtextfield, layout-manager, gridbaglayout

在这个 actionlistener 中，我创建了 9 个名为“a”到“i”的 JTextField。但是当我运行程序时，文本字段“d”和“g”丢失并且 JLabel“投注值”放置不正确。

我是新手，我可能错过了一些东西，所以我希望你们中的一些人能看到哪里出了问题。

所以我要问的是：为什么提到的文本字段没有显示，为什么提到的标签放置不正确。

下面是 actionlistener 的代码：

```
public void actionPerformed(ActionEvent e)
        {
            //Execute when button is pressed
            JFrame frame = new JFrame("Value Bet");
            frame.setVisible(true);
            frame.setSize(500,300);
            GridBagLayout layout = new GridBagLayout();
            frame.setLayout(layout);
            GridBagConstraints c = new GridBagConstraints();

            JLabel label;
            JTextField tf;

            if (shouldFill) {
            //natural height, maximum width
            c.fill = GridBagConstraints.HORIZONTAL;
            }
            if (shouldWeightX) {
            c.weightx = 0.5;
            }

            label = new JLabel("Kamp:");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 0;
            c.gridy = 0;
            frame.add(label, c);

            /*tf = new JTextField("Hvilken kamp?");
            c.fill = GridBagConstraints.HORIZONTAL;
            //c.gridwidth = 3;
            c.gridx = 1;
            c.gridy = 0;
            frame.add(tf, c);*/

            label = new JLabel("1");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 1;
            c.gridy = 1;
            frame.add(label, c);

            label = new JLabel("X");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 2;
            c.gridy = 1;
            frame.add(label, c);

            label = new JLabel("2");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 3;
            c.gridy = 1;
            frame.add(label, c);

            label = new JLabel("Chance");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 0;
            c.gridy = 2;
            frame.add(label, c);

            label = new JLabel("Odds");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 0;
            c.gridy = 3;
            frame.add(label, c);

            label = new JLabel("Betvalue");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 0;
            c.gridy = 4;
            frame.add(label, c);

            tf = new JTextField(" a ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 1;
            c.gridy = 2;
            frame.add(tf, c);

            tf = new JTextField(" b ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 1;
            c.gridy = 3;
            frame.add(tf, c);

            tf = new JTextField(" c ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 1;
            c.gridy = 4;
            frame.add(tf, c);

            tf = new JTextField(" d ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 2;
            c.gridy = 2;
            frame.add(label, c);

            tf = new JTextField(" e ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 2;
            c.gridy = 3;
            frame.add(tf, c);

            tf = new JTextField(" f ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 2;
            c.gridy = 4;
            frame.add(tf, c);

            tf = new JTextField(" g ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 3;
            c.gridy = 2;
            frame.add(label, c);

            tf = new JTextField(" h ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 3;
            c.gridy = 3;
            frame.add(tf, c);

            tf = new JTextField(" i ");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 3;
            c.gridy = 4;
            frame.add(tf, c);

            JButton button = new JButton("Udregn");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 4;
            c.gridy = 3;
            frame.add(button, c);
            button.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e)
                {
                    //Execute when button is pressed
                    System.out.println("You clicked the 'Halvgarderings Bet' button");
                }
            });

            JButton b1 = new JButton("SPIL!");
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 4;
            c.gridy = 5;
            frame.add(b1, c);
            b1.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e)
                {
                    //Execute when button is pressed
                    System.out.println("You clicked the 'Halvgarderings Bet' button");
                }
            });

            JCheckBox cb1 = new JCheckBox();
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 1;
            c.gridy = 5;
            frame.add(cb1, c);

            JCheckBox cb2 = new JCheckBox();
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 2;
            c.gridy = 5;
            frame.add(cb2, c);

            JCheckBox cb3 = new JCheckBox();
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridx = 3;
            c.gridy = 5;
            frame.add(cb3, c);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:13:50.707

```
tf = new JTextField(" d ");
c.fill = GridBagConstraints.HORIZONTAL;
c.gridx = 2;
c.gridy = 2;
frame.add(label, c); 
```

`label`应该是`tf`

# cassandra - Apache Cassandra 架构设计

> ID：10838896
> 
> 赞同：1
> 
> 时间：2012-05-31T18:07:24.913
> 
> 标签：cassandra

我有以下设置：
有 CF 项目和 CF 关键字。
每个项目都有零个、一个或多个关键字，存储在列中。
每个关键字都有一个或多个项目，存储在列中。
它看起来像这样：

```
    项目 {
        dl { 名称 => DELL6400，关键字：1 => 计算机，关键字：2 => DELL，关键字：3 => 畅销产品}
        hp { 名称 => HP12345，关键字：1 => 计算机，关键字：2 => HP }
        没有 { 名称 => 诺基亚8210，关键字：1 => 电话，关键字：2 => 诺基亚 }
    }

    *// 这里我只存储项目的键，
    // 实际上，我已经对大多数项目列进行了非规范化*
    关键字{
        计算机 { 网页 => www.domain.com/computer , item:dl => dl , item:hp => hp }
        DELL { 网页 => www.domain.com/dell , item:dl => dl }
        畅销书 { 网页 => www.domain.com/top , item:dl => dl }
        HP { 网页 => www.domain.com/hp , item:hp => hp }
        NOKIA { 网页 => www.domain.com/nokia , item:no => no }
        电话 { 网页 => www.domain.com/phone ，项目：否 => 否 }
    }

```

当我添加新项目时，如果需要，我会在关键字中添加“网页”列。
当我删除一个项目时，我正在删除列“item：xx”以及

问题是如何避免“空”关键字，例如如果我删除诺基亚项目“no”：

```
    关键字{
        ...
        诺基亚 { 网页 => www.domain.com/nokia }
        电话 { 网页 => www.domain.com/phone }
    }

```

我可以计算切片项目：*，但由于最终的一致性，这可能是错误的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:49:26.707

您可以将 CounterColumn (http://wiki.apache.org/cassandra/Counters) 添加到关键字 CF。向关键字添加项目时增加它，并在删除时减少：

```
keywords{
    computer  { webpage => www.domain.com/computer , count => 2 , item:dl => dl , item:hp => hp }
    ....
} 
```

当读取计数== 0的行时，只需将其视为已删除。如果您读取计数 == 0 的行，则实际上不应删除“网页”列，因为可能存在并发添加操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:19:13.280

这很有趣，但我想用其他方式 - 非规范化“网页”的东西，例如：

[代码]

```
keywords{
    computer  { webpage:dl => www.domain.com/computer , item:dl => dl ,
            webpage:dl => www.domain.com/computer ,  item:hp => hp }
    DELL      { webpage:dl => www.domain.com/dell ,     item:dl => dl }
    topseller { webpage:dl => www.domain.com/top ,      item:dl => dl }
    HP        { webpage:hp => www.domain.com/hp ,       item:hp => hp }
    NOKIA     { webpage:no => www.domain.com/nokia ,    item:no => no }
    phone     { webpage:no => www.domain.com/phone ,    item:no => no }
} 
```

[/代码]

在这种情况下，当我删除项目：xx 时，我也会删除网页：xx，如果那里没有字段，则会自动删除行（重影）。但是，我仍然不确定这是否是一个好主意。

# android - 跨平台应用程序（Android、iOS、Symbian）

> ID：10838898
> 
> 赞同：2
> 
> 时间：2012-05-31T18:07:34.680
> 
> 标签：android, ios, cordova

我正在开发一个 HTML5 跨平台游戏。现在我将 Phonegap 与 Android sdk 一起使用。但我希望这款游戏可以在 iOS 上运行。我是否应该拥有一台 Mac 并重复所有的工作，或者游戏将在 iOS 上运行而无需所有这些程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:22:01.990

PhoneGap 不会生成一个可以在不同平台上运行的应用程序，而是用于为每个平台创建一个应用程序（每个应用程序都包含相同版本的 HTML5 代码）。因此，您必须使用 PhoneGap 创建应用的 iOS 特定版本。这非常快，但是您需要 Mac 和 XCode 才能构建应用程序。

Apple 应用程序也需要使用证书进行签名，因此您需要在 Apple 网站上注册为 iOS 开发人员并创建必要的证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T21:57:09.090

您可以使用此站点为所有平台构建您的应用程序：[https](https://build.phonegap.com/) ://build.phonegap.com/ 。要生成您的 iOS 应用程序，您应该有一个认证许可证。祝你好运！

# c++ - 防止内容处置“文件名”中的绝对文件路径

> ID：10838899
> 
> 赞同：3
> 
> 时间：2012-05-31T18:07:34.733
> 
> 标签：c++, forms, cgi, filenames, content-disposition

我有一个简单的 HTML 表单

```
<form id="uploadForm" method="post" action="/cgi-bin/test.cgi" enctype="multipart/form-data">
   <input type="submit" name="add_something" value="add">
   <input size="50" type="file" name="myFile" accept="application/zip">
</form> 
```

此外，我通过检查用户浏览器区域设置或搜索自设置语言会话 cookie 在服务器端进行一些网页本地化。

如果我上传一个文件

*   铁 18.0.1050.0
*   歌剧 11.64.1403
*   火狐 3.6.27
*   火狐12.0
*   谷歌浏览器 19.0.1084.52
*   海猴 2.9.1

一切正常。但是如果我上传一个文件

*   即 9.0.8112.16421
*   麦克斯顿 3.3.8.3000

本地化失败。我在 HTTP 请求中检测到问题：

歌剧 11

```
Content-Disposition: form-data; name="myFile"; filename="ziptest.zip"
Content-Type: application/zip 
```

和 IE 9

```
Content-Disposition: form-data; name="myFile"; filename="C:\Documents and Settings\m1krsch\Documents\Now Some Spaces\ziptest.zip"
Content-Type: application/x-zip-compressed 
```

如果我从路径中删除空格，则在 IE 和 Maxton 中一切正常。

我可以交换使用过的 cgicc 库，因为它是项目的固定部分，我也不能强迫用户使用没有空格的路径。我该如何规避这个问题？有没有办法强制 IE/Maxton 使用文件名而不是绝对文件路径？或者我可以在 cgi/env 中设置一个特定的参数来防止绝对文件路径的传输吗？

[编辑] 我发现这是 IE 和 Maxton 中的一个安全问题。IE 的安全区域模型默认允许“上传文件时包含本地目录路径”。我只能通过更改客户端配置来禁止这种行为，但我仍在寻找基于应用程序的解决方案。[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:13:50.987

尝试将空格替换为`'%20'`：

```
"C:\Documents%20and%20Settings\m1krsch\Documents\Now%20Some%20Spaces\ziptest.zip" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:49:06.083

我在本地化代码中发现了一个愚蠢的错误。为此，我使用 RapidXML 并将整个本地化代码和 RapidXML 标头封装在一个类中。不幸的是，我没有非常仔细地阅读文档。保存 XML 文档数据的对象内部的数据不会按预期使用该方法`vector<char>`复制到 XML 文档对象中。这对我来说看起来像是程序 C 代码，在我看来是糟糕的 OOD。文档说：`xml_document<>``parse()`

> 3.1 源文本的生命周期
> 
> 原位解析要求源文本至少与文档对象一样长。

当我更正代码以`vector<char>`在本地化类中获取全局对象时，问题就消失了。

尽管如此，我很困惑为什么大多数其他浏览器都对我的旧代码没有问题。

# linux - linux调度程序是否需要进行上下文切换？

> ID：10838901
> 
> 赞同：15
> 
> 时间：2012-05-31T18:07:38.577
> 
> 标签：linux, linux-kernel, kernel

我对 linux 调度程序和其他一些类似的内核系统调用有一个一般性的问题。

linux调度程序是否被认为是一个“进程”，并且每次调用调度程序都需要一个上下文切换，就像它只是另一个进程一样？

假设我们有一个时钟滴答中断当前正在运行的用户模式进程，我们现在必须调用调度程序。对调度程序本身的调用是否会引发上下文切换？调度程序是否有自己的一组寄存器和 U 区域以及在每次调用时必须恢复的诸如此类的东西？

并且上述问题适用于许多其他系统调用。内核进程在上下文切换方面是否像常规进程一样，唯一的区别是它们拥有更多的权限和对 cpu 的访问权限？

我问这个是因为上下文切换开销很昂贵。调用调度程序本身会引发上下文切换以恢复调度程序状态，然后调度程序调用另一个进程来运行并再次调用另一个上下文切换，这听起来很奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:47:33.313

这是一个非常好的问题，除了硬件知道操作系统和任务调度程序的概念之外，答案将是“是”。

在硬件中，您会发现仅限于“主管”模式的寄存器。无需过多介绍内部 CPU 架构，这里有一份用于“用户模式”和“管理员模式”的基本程序执行寄存器的副本，后者只能由操作系统本身访问（通过内核设置的控制寄存器，它表示内核或用户模式应用程序当前是否正在运行）。

因此，您所说的“上下文切换”是交换/重置*用户模式*寄存器（指令寄存器，堆栈指针寄存器等）等的过程，但系统寄存器不需要换出，因为它们已存储除了用户。

例如，x86 中的用户模式堆栈是 USP - A7，而主管模式堆栈是 SSP - A7。因此内核本身（包含任务调度程序）将使用监督模式堆栈和其他监督模式寄存器来运行自己，在运行时将监督模式标志设置为 1，然后*在用户模式硬件上*执行上下文切换以在两者之间进行交换应用程序并将主管模式标志设置为 0。

但是在操作系统和任务调度的想法之前，如果你想做一个多任务系统，那么你必须使用你在问题中概述的基本概念：使用硬件中断每 x 个周期调用一次任务调度程序，然后将应用程序换成任务计划程序，然后换入新应用程序。但在大多数情况下，定时器中断将是您实际的任务调度程序本身，并且会对其进行大量优化，使其不再是上下文切换，而更像是一个简单的中断处理程序例程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T05:38:04.540

实际上，您可以`schedule()`在`kernel/sched.c`. 它写得非常好，应该回答你的大部分问题。

但底线是 Linux 调度程序是通过调用调用的`schedule()`，它使用调用者的上下文来完成这项工作。因此没有专门的“调度程序”进程。这实际上会使事情变得更加困难——如果调度器是一个进程，它也必须自己调度！

当`schedule()`被显式调用时，它只是将调用者线程 A 的上下文与选定的可运行线程 B 之一切换，例如它将返回到 B（通过恢复寄存器值和堆栈指针，返回地址`schedule()`将成为 B的返回地址）代替）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-27T19:33:56.897

下面是对调度程序调用期间发生的事情的简单描述的尝试：

1.  当前具有上下文的程序正在处理器上运行。寄存器、程序计数器、标志、栈基等都适用于这个程序；除了操作系统原生的“保留寄存器”或类似情况之外，程序对调度程序一无所知。
2.  调度程序功能的定时中断被触发。此时唯一发生的事情（在 vanilla 架构案例中）是程序计数器立即跳转到 BIOS 中断中列出的任何 PC 地址。这开始执行调度程序的“调度”子程序；其他所有内容都保持不变，因此调度程序会看到先前执行的程序的寄存器、堆栈等。
3.  调度程序（与所有程序一样）具有一组对当前寄存器集进行操作的指令。这些指令的编写方式使得它们知道先前执行的应用程序已将其所有状态抛在脑后。调度程序中的前几条指令会将此状态存储在内存中的某个位置。
4.  调度程序确定下一个程序应该有 cpu，获取它之前存储的所有状态并用它填充寄存器。
5.  调度程序跳转到任务中列出的适当的 PC 计数器，该任务现在已在 cpu 上建立了完整的上下文。

概括地（过度）简化；调度程序不需要寄存器，它所做的只是将当前 cpu 状态写入预定的内存位置，从预定的内存位置加载另一个进程的 cpu 状态，然后跳转到该进程停止的地方。

# c++ - VirtualProtect 是否需要页面开头的地址？

> ID：10838902
> 
> 赞同：2
> 
> 时间：2012-05-31T18:07:41.133
> 
> 标签：c++, winapi, virtualquery

我需要使用 VirtualProtect，我的问题是关于传递给函数的区域地址。它说（在 MSDN 上）“描述起始页面的地址”，它必须是页面开头的地址还是该页面中的任何地址？也就是说，我应该先用VirtualQuery来确定页面的起始地址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:02:28.867

You don't need to pass in the base address of the page. `VirtualProtect` will accept any address within the page. The [description of the `dwSize` parameter](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898.aspx) makes that clear:

> The region of affected pages includes all pages containing one or more bytes in the range from the lpAddress parameter to (lpAddress+dwSize). This means that a 2-byte range straddling a page boundary causes the protection attributes of both pages to be changed.

f you're able to have a two-byte range that straddles a page boundary, then it must be possible for `lpAddress` to be just one byte before the end of a page. Pages can't be just one byte long, so it's not at the start of a page.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:11:20.073

无论哪种情况，您都不需要`VirtualQuery`- 页面始终是 的倍数`PAGE_SIZE`，通常为 4 KiB。因此，您只需要将您的数字四舍五入到最接近的`PAGE_SIZE`.

但我不认为你需要四舍五入；我认为任何地址都可以。不过，这可能值得仔细检查。

# android - 为 Android 编译 VLC 时出现问题 - libvlcjni.so

> ID：10838905
> 
> 赞同：2
> 
> 时间：2012-05-31T18:07:57.470
> 
> 标签：android, c++, c, vlc

经过一天半的修改，我终于让 VLC 项目在 OS X 下几乎可以编译。当它即将链接 libvlcjni.so 时出现以下错误。大约有 100 多个未定义的引用，但大多数是几个函数：

std::__stl_throw_length_error(char const*) std::__node_alloc::_M_deallocate(void*, unsigned int)

有没有人有任何指示？

编译拇指：vlcjni <= aout.c 编译拇指：vlcjni <= pthread-condattr.c 编译拇指：vlcjni <= pthread-rwlocks.c 编译拇指：vlcjni <= eventfd.c 编译拇指：vlcjni <= sem.c SharedLibrary : libvlcjni.so ../vlc/android/modules/demux/mkv/.libs/libmkv_plugin.a(libmkv_plugin_la-mkv.o): 在函数`std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_compare(char const*, char const*, char const*, char const*)': /Android/ndk/sources/cxx-stl/stlport/stlport/stl/_string.h:1076: undefined reference to`std::__stl_throw_out_of_range(char const*)'

**应用程序.mk**

```
APP_PLATFORM := android-9
ifeq ($(NO_NEON),)
APP_ABI := armeabi-v7a
else ifneq ($(TEGRA2),)
APP_ABI := armeabi-v7a
else
APP_ABI := armeabi
endif

APP_STL := gnustl_static
APP_PLATFORM := android-9
APP_ABI := armeabi-v7a

Android.mk
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

ifeq ($(NO_NEON),)
ARCH=armeabi-v7a
LOCAL_MODULE    := libvlcjni
else ifneq ($(TEGRA2),)
ARCH=armeabi-v7a
LOCAL_MODULE    := libvlcjni-tegra2
else
ARCH=armeabi
LOCAL_MODULE    := libvlcjni
endif

LOCAL_SRC_FILES := libvlcjni_danmaku.c aout.c pthread-condattr.c pthread-rwlocks.c eventfd.c sem.c

LOCAL_C_INCLUDES := $(VLC_SRC_DIR)/include

ifeq ($(NO_NDK_V7),1)
CPP_STATIC=$(ANDROID_NDK)/sources/cxx-stl/gnu-libstdc++/libs/$(ARCH)/libstdc++.a
else
CPP_STATIC=$(ANDROID_NDK)/sources/cxx-stl/stlport/libs/$(ARCH)/libstlport_static.a
endif

LOCAL_CFLAGS := -std=gnu99
LOCAL_LDLIBS := -L$(VLC_CONTRIB)/lib \
    $(VLC_MODULES) \
    $(VLC_BUILD_DIR)/lib/.libs/libvlc.a \
    $(VLC_BUILD_DIR)/src/.libs/libvlccore.a \
    $(VLC_BUILD_DIR)/compat/.libs/libcompat.a \
    -ldl -lz -lm -llog \
    -ldvbpsi -lebml -lmatroska -ltag \
    -logg -lFLAC -ltheora \
    -lmpeg2 -ldca -la52 \
    -lavformat -lavcodec -lswscale -lavutil -lpostproc -lgsm -lopenjpeg \
    -lliveMedia -lUsageEnvironment -lBasicUsageEnvironment -lgroupsock \
    -lspeex -lspeexdsp \
    -lxml2 -lpng -lgnutls -lgcrypt -lgpg-error -lfreetype -liconv \
    $(CPP_STATIC) 

include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE     := libiomx-gingerbread
LOCAL_SRC_FILES  := ../$(VLC_SRC_DIR)/modules/codec/omxil/iomx.cpp
LOCAL_C_INCLUDES := $(VLC_SRC_DIR)/modules/codec/omxil $(ANDROID_SYS_HEADERS_GINGERBREAD)/frameworks/base/include $(ANDROID_SYS_HEADERS_GINGERBREAD)/system/core/include
LOCAL_LDLIBS     := -L$(ANDROID_LIBS) -lgcc -lstagefright -lmedia -lutils -lbinder

include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE     := libiomx-hc
LOCAL_SRC_FILES  := ../$(VLC_SRC_DIR)/modules/codec/omxil/iomx.cpp
LOCAL_C_INCLUDES := $(VLC_SRC_DIR)/modules/codec/omxil $(ANDROID_SYS_HEADERS_HC)/frameworks/base/include $(ANDROID_SYS_HEADERS_HC)/frameworks/base/native/include $(ANDROID_SYS_HEADERS_HC)/system/core/include $(ANDROID_SYS_HEADERS_HC)/hardware/libhardware/include
LOCAL_LDLIBS     := -L$(ANDROID_LIBS) -lgcc -lstagefright -lmedia -lutils -lbinder

include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE     := libiomx-ics
LOCAL_SRC_FILES  := ../$(VLC_SRC_DIR)/modules/codec/omxil/iomx.cpp
LOCAL_C_INCLUDES := $(VLC_SRC_DIR)/modules/codec/omxil $(ANDROID_SYS_HEADERS_ICS)/frameworks/base/include $(ANDROID_SYS_HEADERS_ICS)/frameworks/base/native/include $(ANDROID_SYS_HEADERS_ICS)/system/core/include $(ANDROID_SYS_HEADERS_ICS)/hardware/libhardware/include
LOCAL_LDLIBS     := -L$(ANDROID_LIBS) -lgcc -lstagefright -lmedia -lutils -lbinder

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:11:05.300

尝试将这些行包含到您的 Application.mk 中：

```
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions 
```

您必须明确启用 RTTI 和异常处理。

编辑（响应您的修改）：

```
# These are your lines in Application.mk
APP_PLATFORM := android-9
ifeq ($(NO_NEON),)
APP_ABI := armeabi-v7a
else ifneq ($(TEGRA2),)
APP_ABI := armeabi-v7a
else
APP_ABI := armeabi
endif

# Add these lines:
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions
#  I haven't seen them 
```

# java - Azure Java Tomcat 日志记录

> ID：10838907
> 
> 赞同：5
> 
> 时间：2012-05-31T18:07:59.923
> 
> 标签：java, tomcat, logging, azure, azure-diagnostics

我计划将以前创建的 Java Web 应用程序迁移到 Azure。以前用于`log4j`应用程序级别日志的应用程序保存在本地创建的文件中。问题是，由于 Azure 角色有多个实例，我必须收集和汇总这些日志，并确保它们存储在持久存储而不是虚拟机硬盘驱动器中。

日志记录是应用程序的关键组件，但它不能减慢实际工作的速度。我考虑了多种选择，我对最佳实践感到好奇，这是考虑到安全性、日志一致性和存储时间和后期处理性能的最佳解决方案。以下是选项列表：

*   使用带有自定义的 log4j`Appender`在 Azure SQL 中存储信息。
*   使用带有自定义的 log4j`Appender`在 Azure 表存储中存储信息。
*   编写一个附加工具，将数据从本地硬盘驱动器传输到上述任一持久性存储。

Java有没有其他方法或有针对这个问题的完整解决方案？考虑到上述标准，以上哪一项是最好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:19:38.627

目前还没有开箱即用的解决方案，但是......表存储的自定义附加程序是有意义的，因为您可以以与诊断（性能计数器等）类似的方式查询您的日志。

唯一需要考虑的是，如果您正在大量编写日志语句（例如每秒数百次）。以这个速度，您会开始注意到每月账单上显示的交易成本。以每 10,000 美元和每秒 100 美元计算，每个实例大约需要 250 美元。如果您有多个实例，则成本会从那里上升。使用 SQL Azure，您将没有交易成本，但您将拥有更高的存储成本。

如果您想使用存储传输方法，您可以设置 Windows Azure 诊断程序以监视目录并定期将文件上传到 Blob 存储。唯一的障碍是 Java 不直接支持配置诊断。如果您从 Eclipse 构建项目，则只有一个启动所有内容的脚本文件，因此您需要编写一个小型 .net 应用程序，或使用类似[AzureRunMe](http://azurerunme.codeplex.com/)的东西。如果你正在构建一个 Visual Studio 项目来启动你的 Java 应用程序，那么你可以在没有单独的应用程序的情况下设置诊断。

Persistent Systems 刚刚发布了一篇关于 Java 和诊断设置的[博客文章。](http://blog.persistentsys.com/index.php/2012/06/02/windows-azure-diagnostics-for-java/)~~一旦它上线，我会用一个链接更新这个答案~~。此外，请查看[Cloud Ninja for Java](https://github.com/PersistentSys/cloudninja-for-java)，它通过使用设置诊断的外部 .net exe 实现 Tomcat 日志记录（和相关解析），如即将发布的帖子中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:20:36.380

最后我决定写一个 Log4J `Appender`。我不需要收集诊断信息，我的主要目标只是以一种易于交换的方式收集日志文件。我的第一个担心是它会减慢应用程序的速度，但是通过只写入内存并且只定期将日志数据写入 Azure 表，它可以完美地工作，而不会进行太多的 API 调用。

以下是我实施的主要步骤：

首先，我创建了一个要存储在 Azure 表中的实体类，称为`LogEntity`extends `com.microsoft.windowsazure.services.table.client.TableServiceEntity`。

接下来，我编写了扩展`org.apache.log4j.AppenderSkeleton`包含一个`java.util.List<LogEntity>`.

从被覆盖的方法`protected void append(LoggingEvent event)`中，我只添加到此集合中，然后创建了一个线程，该线程定期清空此列表并将数据写入 Azure 表。

最后，我将新创建的添加`Appender`到我的 log4j 配置文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:55:54.760

请访问我的博客并下载文档。在本文档中，您可以查找“Tomcat 解决方案诊断”一章以获取错误日志解决方案。该文档是很久以前写的，但您确实可以使用此方法在 Tomcat 中生成任何类型的基于 Java 的日志记录（log4j，当然）并直接查看。

第 6 章：Tomcat 解决方案诊断

*   错误记录
*   查看日志文件

[http://blogs.msdn.com/b/avkashchauhan/archive/2010/10/29/windows-azure-tomcat-solution-accelerator-full-solution-document.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2010/10/29/windows-azure-tomcat-solution-accelerator-full-solution-document.aspx)

在任何有自定义应用程序（即 java.exe、php.exe、python 等）的情况下，我建议直接在“本地存储”文件夹中创建日志文件，然后在 Worker Role (WorkerRole.cs) 中初始化 Azure 诊断以导出这些自定义日志文件直接从 Azure VM 到 Azure Blob 存储。

此处描述了如何在本地存储上创建自定义日志[。](http://msdn.microsoft.com/en-us/library/windowsazure/hh411528.aspx)

与您描述的任何其他方法相比，使用 Azure 诊断并将日志发送到 Azure blob 将是最便宜和强大的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-08T06:50:31.917

另一种选择；

我们能不能继续以标准方式（例如 DailyRollingFileAppender）使用 log4j，只有文件应该在 UNC 路径、VM（IaaS）上创建。这个虚拟机只需要一点磁盘空间，但不需要任何强大的处理能力。因此可以共享一个可用的虚拟机，或者创建一个配置最少的虚拟机，最好在同一个区域和云服务中。

可以通过 RDP/FTP 等方式访问累积的日志文件。

这样一来，就不会产生交易成本和开发特殊 Log4j appender 的成本......它可能会成为一种更便宜的替代方案。

谢谢吉文

PS：我更多地指的是应用程序日志记录，而不是应用程序服务器日志（Weblogic 的 catalina/manager .log 或 .out 文件）

# jquery - jquery 遍历 div 和第一个“空”div

> ID：10838910
> 
> 赞同：2
> 
> 时间：2012-05-31T18:08:19.470
> 
> 标签：jquery, css, html, each

我有一个我正在开发的 jquery 应用程序，用户基本上点击一个项目并将项目移动到该`equipped`部分。

我计划如何进行这项工作，当单击一个类时`equippable`，jquery 将查找下的第一个子 div`#weapons`的`data-item`值`0`并将其分配给`equippable`.

为了让您更好地了解正在发生的事情，这里是[jsfiddle](http://jsfiddle.net/Shantred/yJhZZ/)。

我原本打算使用 each 函数，但这会替换两个可用的设备插槽。我只需要能够找到第一个可用的插槽，或者如果没有可用的插槽，请发送警报，但我不确定如何找到第一个可用的插槽。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:15:07.517

```
$(document).ready(function() {
    $(".equippable").click(function() {
        $('#weapons')
              .find('div[data-item="0"]:first') // first div with data-item=0
              .attr('data-item', $(this).data('item')); // chage data-item value
    });
}); 
```

**[演示](http://jsfiddle.net/Shantred/yJhZZ/)**

你也可以做

```
$(document).ready(function() {
    $(".equippable").click(function() {
        $('div[data-item="0"]:first', '#weapons')  // first div with data-item=0
           .attr('data-item', $(this).data('item'))
    });
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/yJhZZ/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:23:33.433

我认为实现这一目标的最简单方法是为武器槽使用附加类：

```
<div id="weapons">
    <div class="weapon_slot empty">No Equip</div>
    <div class="weapon_slot empty">No Equip</div>
</div> 
```

然后先用代码清空：

```
$(document).ready(function(){
    $(".equippable").click(function() {
        var empty_slots = $('#weapons div.weapon_slot.empty'),
            first_empty = $(empty_slots).filter(':first');

        if(first_empty.length > 0) {
            $(first_empty).removeClass('empty');
            // and whatever you also need to do here...
        }
        else { /* Place for alert here */ }
    }); 
}); 
```

我刚刚更新了你的小提琴（对不起，如果这是一个问题）并且它按原样工作 - 如果你点击`.empty`第一个元素中的项目类消失（所以你将添加的每个代码都将在第一个空元素上正确执行）。

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:12:27.543

你是说像这样[？](http://jsfiddle.net/yJhZZ/6/)（我提醒第一个可用的文本属性）

您需要的选择器是这样的：

```
$('#weapons [data-item=0]:first') 
```

所以要设置数据属性，你可以这样做：

```
$(document).ready(function(){
    $(".equippable").click(function() {
        $('#weapons [data-item=0]:first').data("item", $(this).data("item"));
    }); 
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:17:55.317

```
$(document).ready(function(){
    $(".equippable").click(function() {
       var $emptySlot = $('#weapons').find('.no_equipment[data-item=0]')[0]; // Get the first empty slot
        $emptySlot.find('.no_equipment[data-item=0]').append(this);
        $emptySlot.data('item') = 1;
    });
}); 
```

​</p>

# sql-server - 当列在不同的数据库中时，使用 Row_Number() Over（按列排序）返回错误

> ID：10838913
> 
> 赞同：0
> 
> 时间：2012-05-31T18:08:40.150
> 
> 标签：sql-server, sql-server-2008, tsql, row-number

我在 Sql Server (2008) 中提交以下查询

```
WITH query AS (SELECT TOP 100 PERCENT
    ROW_NUMBER() OVER
    (ORDER BY [tbl2].[col2] ASC) AS TableRowNumber ,
    [tbl1].[col1] ,
    [tbl2].[col2]
FROM [db1].[dbo].[tbl1] AS [tbl1]
JOIN [db2].[dbo].[tbl2] AS [tbl2]
    ON [tbl1].[id] = [tbl2].[id])

SELECT
    *
FROM query
WHERE TableRowNumber BETWEEN 1 AND 15
ORDER BY TableRowNumber ASC 
```

运行此查询时，它会返回以下错误消息：

```
Msg 207, Level 16, State 1, Line 3
Invalid column name 'col2'. 
```

sql 连接本身运行良好（当作为普通查询运行时。问题似乎在于使用`Row_Number() over (Order By COLUMN)`when与查询表`COLUMN`位于不同的数据库中。`FROM`

如果我将第 3 行更改为读取，`(Order By [tbl1].[col1] ASC)`那么它可以毫无问题地运行。仅当排序列位于不同的数据库中时才会发生该错误。

有谁知道为什么会这样？对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T18:33:26.557

这对我来说没问题：

```
SELECT a.name, b.object_id, rn = ROW_NUMBER() OVER (ORDER BY b.object_id DESC)
  FROM sys.columns AS a 
  INNER JOIN tempdb.sys.objects AS b
  ON a.object_id = b.object_id; 
```

所以我怀疑还有其他问题正在发生（例如，`col2`真的不存在）。我还注意到你正在调用这个东西`tb2`-`tbl2`是否有可能你在另一个数据库中同时拥有 a`tb2`和 a `tbl2`，并且你引用了错误的那个？

**编辑**我创建了这个：

```
CREATE DATABASE db1;
GO
USE db1;
GO
CREATE TABLE dbo.tbl1(ID INT, col1 INT);
GO
INSERT dbo.tbl1 SELECT 1, 5
UNION ALL SELECT 2, 10;
GO
CREATE DATABASE db2;
GO
USE db2;
GO
CREATE TABLE dbo.tbl2(ID INT, col2 INT);
GO
INSERT dbo.tbl2 SELECT 1, 9
UNION ALL SELECT 2, 4;
GO
USE db1;
GO 
```

然后在`db1`. 它运行良好。所以最后一次我会建议你没有告诉我们关于模式的一些事情，或者你已经混淆了名称的事实（并且已经不得不纠正一个错字）已经混淆了太多东西甚至对你...

# xml - AS3 + XML + 文本

> ID：10838915
> 
> 赞同：0
> 
> 时间：2012-05-31T18:08:41.997
> 
> 标签：xml, actionscript-3, textfield

我正在做一个展示，我有四张从 XML 加载的图片，每张图片都有一个描述，我尝试加载框架中每张图片的文本，但只加载一个描述，你可以加载图像但我无法为每个人加载描述。

请帮助我，我已经工作了三天，我找不到答案。

```
import flash.display.Loader;
import flash.net.URLRequest;

import fl.controls.ProgressBar;
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

var columnas:Number;
var xml_x:Number;
var xml_y:Number;
var miniatura_ancho:Number;
var miniatura_alto:Number;
var imagenes:XMLList;
var total_xml:Number;

var link:String;

var i:Number=0; 

var contenedor_mc:MovieClip;
var precargar_mc:MovieClip;
var todo_mc:MovieClip;

var contador_x:Number = 0;
var contador_y:Number = 0;

var interpolaciones:Array = [];
var contenedor_mc_interpolacion:Tween;
var todo_interpolaciones:Tween;

var texto:TextField = new TextField();

import flash.display.Loader;
import flash.net.URLRequest;

var colchon_XMLCargador:URLLoader = new URLLoader();
colchon_XMLCargador.load(new URLRequest("swf/ortopedico/ortopedicos_sencillo.xml"));
colchon_XMLCargador.addEventListener(Event.COMPLETE, procesarXML);

function procesarXML(e:Event):void
{
    var colchon_XML:XML = new XML(e.target.data);

    columnas = colchon_XML. @ COLUMNAS;
    xml_x = colchon_XML. @ POSICIONX;
    xml_y = colchon_XML. @ POSICIONY;
    miniatura_ancho = colchon_XML. @ ANCHO;
    miniatura_alto = colchon_XML. @ ALTO;

    imagenes = colchon_XML.imagen;
    total_xml = imagenes.length();

    crearContenedor();
    llamarMiniatura();

    colchon_XMLCargador.removeEventListener(Event.COMPLETE, procesarXML);
    colchon_XMLCargador = null;

}

function crearContenedor():void
{
    contenedor_mc = new MovieClip();
    contenedor_mc.x = xml_x;
    contenedor_mc.y = xml_y;
    addChild(contenedor_mc);
    }

function llamarMiniatura():void
{
    for (var i:Number = 0; i < total_xml; i++)
    {

        var miniatura_url = imagenes[i]. @ miniatura;

        var miniatura_cargador = new Loader();

        miniatura_cargador.load(new URLRequest(miniatura_url));
        miniatura_cargador.contentLoaderInfo.addEventListener(Event.COMPLETE, miniaturaCargada);

        miniatura_cargador.name = i;

        miniatura_cargador.x = (miniatura_ancho+8)*contador_x;
        miniatura_cargador.y = (miniatura_alto+8)*contador_y;

        texto.htmlText = imagenes[i].descripcion.toString();

        if (contador_x + 1 < columnas)
        {
            contador_x++;
        }
        else
        {
        contador_x = 0;
        contador_y++;
        }

        if (contador_x <= 1)
        {
            contenedor_mc.x = (stage.stageWidth - miniatura_cargador.width -140)/2;
            contenedor_mc.y = (stage.stageHeight - miniatura_cargador.height -48)/2;
        }

        if (total_xml <= 4)
        {
            contenedor_mc.x = (stage.stageWidth - (total_xml*miniatura_ancho)-(8+total_xml))/2;
            contenedor_mc.y = xml_y;
        }
        else
        {
            contenedor_mc.x = xml_x;
            contenedor_mc.y = xml_y;
        }

    }
}

function miniaturaCargada(e:Event):void
{
    var miniatura:Loader = Loader(e.target.loader);
    contenedor_mc.addChild(miniatura);

    addChild (texto);
    interpolaciones[Number(miniatura.name)] = new Tween(miniatura,"alpha",Strong.easeIn,0,1,0.5,true);

    miniatura.contentLoaderInfo.removeEventListener(Event.COMPLETE, miniaturaCargada);
}

//Vinculo;
texto.addEventListener(TextEvent.LINK, vinculo_texto);

function vinculo_texto(te:TextEvent):void
{
    navigateToURL(new URLRequest(link));
}

function interpolacionFin(e:TweenEvent):void
{
    var cargador:Loader = Loader(e.target.obj);
    cargador.unload();
    todo_mc.removeChild(cargador);
    removeChild(todo_mc);

    todo_mc = null;

    var interpolacion:Tween = Tween(e.target);
    interpolacion.removeEventListener(TweenEvent.MOTION_FINISH, interpolacionFin);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:16:22.273

[The_asMan](https://stackoverflow.com/users/654423/the-asman)是正确的。您有一个文本字段，并且您在`llamarMiniatura()`. 考虑将值与每个循环连接起来，或者创建一个新的文本字段并添加它。

**级联：**

```
texto.htmlText = texto.htmlText + "\n" + imagenes[i].descripcion.toString(); 
```

**新文本字段：**

```
var txt:TextField = new TextField();
txt.addEventListener(TextEvent.LINK, vinculo_texto);
txt.htmlText = imagenes[i].descripcion.toString();
addChild(txt); 
```

# c# - 加载惰性代理属性

> ID：10838917
> 
> 赞同：0
> 
> 时间：2012-05-31T18:08:44.410
> 
> 标签：c#, fluent-nhibernate

我需要在设置为延迟加载的对象上加载属性。当我尝试使用 NhibernateUtil.Initialize() 访问或加载它时，我得到了同样的错误：

“正在初始化 [ProjectName.Logic.Entities.AddressList#9] - 无法初始化代理 - 没有会话。”

我可以通过调用必要的方法在“使用”子句中打开会话来确保会话确实存在。（我们已经隐藏了会话创建，因此使用“true”参数实例化存储库对象还将在需要时创建会话工厂并打开会话。通过在“使用”子句触发的断点进行验证。）

```
foreach (MemberViewModel MVM in _filteredMemberViewModels)
           {
               foreach (Detail Mailings in MVM.Member.Mailings)  
               {
                   //used for lazy loading
                   using (var repo = new AddressListRepository(true))
                   {
                       NHibernateUtil.Initialize(Mailings.AddressList);
                   }
               }
           } 
```

详细映射：

```
public class DetailMap : ClassMap<Detail>
{
    public DetailMap()
    {
        Table("AddressDetailsCCN");

        // Unique Identifier
        Id(x => x.Id, "Id")
            .GeneratedBy.Identity();

        // MANY TO ONE relationship (the list has many details)
        References<AddressList>(x => x.AddressList, "ListId")
            .LazyLoad()
            .Not.Nullable()
            .Cascade.None();

        // MANY TO ONE relationship (Members have details)
        References<Member>(x => x.Member, "MemberId")
            .Not.LazyLoad()
            .Not.Nullable();

        // First line of Address
        Map(x => x.Address, "Address")
            .Nullable();

        // Second line of Address
        Map(x => x.Address2, "Address2")
            .Nullable();

        // City
        Map(x => x.City, "City")
            .Nullable();

        // State
        Map(x => x.State, "State")
            .Nullable();

        // Zip
        Map(x => x.Zip, "Zip")
            .Nullable();

        // Finalized date
        Map(x => x.FinalizedDate, "FinalizedDate")
            .CustomType(typeof(DateTime))
            .Nullable();

        // Date the list is created by
        Map(x => x.CreatedDate, "CreatedDate")
            .CustomType(typeof(DateTime))
            .Not.Nullable();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:20:24.970

您需要先将 Mailings 对象附加到会话，然后才能初始化其上的任何属性。您必须在存储库上公开一个方法才能这样做，该方法将调用：

```
session.Lock(entity, LockMode.None); 
```

然后将实体（邮件）与您的会话相关联，然后调用 NHibernateUtil.Initialize(Mailings.AddressList) 应该可以工作。

但是，我建议重新考虑为什么需要以这种方式进行操作，并考虑使用更粗粒度的会话（即早点打开它，然后再关闭它）。

# delphi - Delphi7 从项目中删除/恢复 MANICON

> ID：10838924
> 
> 赞同：3
> 
> 时间：2012-05-31T18:09:00.727
> 
> 标签：delphi, delphi-7

在 Delphi7 中，您可以为项目分配/加载图标。每次编译后，您的应用程序都有指定的图标。我想将图标删除/恢复为原始的 Delphi7 图标。我找不到这个按钮/选项。我也尝试删除 .res 文件，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:37:23.267

图标存储在 .res 文件中。如果在 IDE 中打开项目的情况下删除/重命名 .res 文件，则 .res 数据可能已经加载，然后将再次保存到新的 .res 中。

无论如何，如果排除 .res 文件不能解决您的问题，您可以使用资源编辑器工具（例如[XN 资源编辑器](http://www.wilsonc.demon.co.uk/d10resourceeditor.htm)）打开 .res 文件并根据需要导出/更改/删除 MAINICON 资源。

# php - 缓存是在控制器中缓存对象还是在方法中缓存查询更好？

> ID：10838928
> 
> 赞同：0
> 
> 时间：2012-05-31T18:09:27.340
> 
> 标签：php, model-view-controller, caching, apc

目前我在基于 mvc 的站点中使用 php 和 apc，它是一个自定义构建的简单 mvc，所以我正在尝试构建它以满足我的需求。

但是我不确定处理缓存的首选位置在哪里？

我有两个选择（我认为）..要么在各种控制器中进行所有缓存，这意味着对象存储在缓存中，要么将查询返回的数据存储在方法内部的缓存中：

**控制器示例：**

```
function showPage() {

    $pageOb = new Page();

    $key = md5('pageOb->getQuery()');

    if(!$data = apc_fetch($key)){

        $data = $pageOb->getQuery();
        apc_add($key, $data, 600);
    }

    require 'template.php';
} 
```

**方法示例：**

```
function getQuery(){

    $sql = "SELECT * FROM table";
    $key = md5('query'.$sql);

    if(!$data = apc_fetch($key)){   

        $core = Connect::getInstance();
        $stmt = $core->dbh->prepare($sql);
        $stmt->execute();
        $data = $stmt->fetchAll();
        apc_add($key, $data, 600);
    }

    return $data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:07:10.937

这有点取决于您如何理解和实现模型层。这就是我在服务级别对象中编写缓存相关代码的方式：

```
$user = $this->domainObjectFactory->build('User');
$user->setId(42);

if ( !$this->cacheMapper->fetch('User', $user) )
{
    $mapper = $this->mapperFactory->build('User');
    $mapper->fetch($user);
} 
```

如果您不理解[此评论](https://stackoverflow.com/a/9685039/727208)（跳至“旁注”）的术语，可能会有所帮助。再次重复整个过程需要很长时间。

据我了解，缓存本身只是一种不同的存储形式。因此它只是数据源层的另一部分（映射器、DAO 和类似结构的来源）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:14:16.480

您不应该将数据模型问题冒泡到您的控制器中。该原则封装在 SRP 中：[http ://en.wikipedia.org/wiki/Single_responsibility_principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)

您的第二个解决方案更好，但可以通过进一步抽象从数据源检索数据来改进。这是一篇很好的参考文章，虽然使用的语言不同，但模式仍然存在：[http ://www.alachisoft.com/resources/articles/domain-objects-caching-pattern.html](http://www.alachisoft.com/resources/articles/domain-objects-caching-pattern.html)

# android - ExpandableListView 获取组文本

> ID：10838930
> 
> 赞同：0
> 
> 时间：2012-05-31T18:09:27.720
> 
> 标签：android, expandablelistview

我有一个 ExpandableListView，我制作了自定义适配器和包含名称和子项的 ExpandListGroup 类。

每个子项也有一个 ImageButton，单击时我想获取组名称。我尝试使用 OnGroupExpandListener 但它不起作用。

![在此处输入图像描述](../Images/724082af1b9beed3b79e708a9fc11d21.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:15:05.933

2种方式：

1.  为可扩展列表视图设置数据结构的方式，您应该能够通过查看组 ID/位置来获取组名称。

2.  您可以将组名设置为子视图的标签。因此，您可以执行 getTag()，并获取组名。

[http://developer.android.com/reference/android/widget/ExpandableListView.OnChildClickListener.html](http://developer.android.com/reference/android/widget/ExpandableListView.OnChildClickListener.html)

# ssl-certificate - java程序的自签名证书

> ID：10838932
> 
> 赞同：3
> 
> 时间：2012-05-31T18:10:04.993
> 
> 标签：ssl-certificate, java

我有一个 Java 程序，它连接到一台服务器并与该服务器交互并执行（打个招呼世界）简单的任务。

我的 java 程序是与 vmware esxi 服务器交互。使用以下代码。

ServiceInstance si = new ServiceInstance(new URL("https://10.100.13.36/sdk"), "root", "teamw0rk", true)

true 参数表示忽略证书为true。

即使它是一个 vmware 交互库，它纯粹是证书的问题。因为当我为忽略证书设置 false 时。我从库文件中得到了一般的证书期望。

程序如下。

```
package com.vmware.vim25.mo.samples;

import java.net.URL;
import com.vmware.vim25.*;
import com.vmware.vim25.mo.*;

public class HelloVM 
{
    public static void main(String[] args) throws Exception
    {
        long start = System.currentTimeMillis();
        ServiceInstance si = new ServiceInstance(new URL("https://10.100.13.36/sdk"), "root", "teamw0rk", false);
        long end = System.currentTimeMillis();
        System.out.println("time taken:" + (end-start));
        Folder rootFolder = si.getRootFolder();
        String name = rootFolder.getName();
        System.out.println("root:" + name);
        ManagedEntity[] mes = new InventoryNavigator(rootFolder).searchManagedEntities("VirtualMachine");
        if(mes==null || mes.length ==0)
        {
            return;
        }

        VirtualMachine vm = (VirtualMachine) mes[0]; 

        VirtualMachineConfigInfo vminfo = vm.getConfig();
        VirtualMachineCapability vmc = vm.getCapability();

        vm.getResourcePool();
        System.out.println("Hello " + vm.getName());
        System.out.println("GuestOS: " + vminfo.getGuestFullName());
        System.out.println("Multiple snapshot supported: " + vmc.isMultipleSnapshotsSupported());

        si.getServerConnection().logout();
    }

} 
```

该错误与期待 ssl 证书有关。

```
Exception in thread "main" java.rmi.RemoteException: VI SDK invoke exception:javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative names matching IP address 10.100.13.36 found
    at com.vmware.vim25.ws.WSClient.invoke(WSClient.java:182)
    at com.vmware.vim25.ws.WSClient.invoke(WSClient.java:124)
    at com.vmware.vim25.ws.VimStub.retrieveServiceContent(VimStub.java:1521)
    at com.vmware.vim25.mo.ServiceInstance.<init>(ServiceInstance.java:85)
    at com.vmware.vim25.mo.ServiceInstance.<init>(ServiceInstance.java:69)
    at com.vmware.vim25.mo.samples.HelloVM.main(HelloVM.java:16) 
```

正如我确认的程序错误与 vmware 无关，它与证书有关。

我所做的第一步是使用以下命令创建 jks 文件

```
c:/java/jre/bin>keytool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass password -validity 360 -keysize 2048 
```

它在 bin 文件夹中创建 keystore.jks。

我必须了解如何在 java 程序中引用这个 keystore.jks。（我对此知之甚少......对不起）

如何生成证书以及导入证书和导出证书的含义。

就我而言，我需要导入还是导出..

最初我发布了一个人的问题..

他回答为“在高级别上，您需要将服务器证书放入您的密钥库，并将密钥库包含在 JVM 参数中”

请澄清我的疑问并对此有所了解。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:26:27.563

您收到的错误是抱怨 URL (10.100.13.36) 中的主机名与服务器 SSL 证书中包含的任何服务器名称都不匹配。

**CertificateException：找不到与 IP 地址 10.100.13.36 匹配的主题备用名称**

您可以在 URL 请求中使用实际的服务器名称重试吗？您可能需要使用服务器的完全限定名称。因为您需要匹配服务器正在使用的 SSL 证书中包含的服务器名称。

您可以使用 curl 命令查看服务器的证书，例如：

```
curl -v https://10.100.13.36/sdk 
```

以下是 Microsoft 的 SSL 证书包含的内容：

```
C:\>curl -v https://www.microsoft.com
* About to connect() to www.microsoft.com port 443 (#0)
*   Trying 64.4.11.20... connected
* Connected to www.microsoft.com (64.4.11.20) port 443 (#0)
* successfully set certificate verify locations:
*   CAfile: c:\tpf$\bin\curl-ca-bundle.crt
  CApath: none
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-MD5
* Server certificate:
*        subject: C=US; ST=WA; L=Redmond; O=Microsoft Corporation; OU=MSCOM; CN=
www.microsoft.com
*        start date: 2012-03-29 19:29:53 GMT
*        expire date: 2014-03-29 19:29:53 GMT
*        common name: www.microsoft.com (matched)
*        issuer: DC=com; DC=microsoft; DC=corp; DC=redmond; CN=Microsoft Secure
Server Authority
*        SSL certificate verify ok.
> GET / HTTP/1.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:58:27.543

该证书由 Tomcat 使用，而不是您的客户端。请参阅 Tomcat SSL 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:34:22.317

简短的回答：

首先使用服务器的 DNS 名称而不是 IP 进行测试（[这里](http://www.jroller.com/hasant/entry/no_subject_alternative_names_matching)有长解释）。

其次，如果要使用证书，则必须导入服务器证书，而不是自己生成...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T19:21:48.210

`-dname CN=10.100.13.36`生成证书时尝试添加。我认为您甚至不需要使用主题备用名称。公用名 (CN) 应与您在 URL 中用于连接的域名相同。

# awk - 删除句号前面只有一个字符

> ID：10838934
> 
> 赞同：-1
> 
> 时间：2012-05-31T18:10:33.080
> 
> 标签：awk, sed, period

如何删除仅以一个字符开头的句点？

我正在寻找一行`sed`或`awk`代码。

目标行是：（我要删除的目标模式在`**Bold stackoverflow code ***j.*** **`）

```
xxx-xxx, **j.** c., univ los xxx, res grp porous solid \& calorimetry, dept chem, fac sci, bogota, colombia. 
```

和我正在寻找的结果：

```
xxx-xxx, c., univ los xxx, res grp porous solid \& calorimetry, dept chem, fac sci, bogota, colombia. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T10:40:15.583

不知道你想要什么。但这比其他提案更强大：

```
sed 's/\b\w\.//g' 
```

然而，两者都删除了“.c”...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:16:22.543

`sed 's/ [a-zA-Z]\./ /g' <filename>`如果您确定这些字符不会出现在行首并且所有这些字符前面都会有空格，则将起作用。

# php - 我想在表单提交的消息中包含用户名

> ID：10838940
> 
> 赞同：0
> 
> 时间：2012-05-31T18:10:56.750
> 
> 标签：php, html

这是我的 php 代码，我想以某种方式更改用户在提交表单时看到的消息，以包含诸如“Ben，您的消息已发送！”之类的名称。我也想保持它现在的样式，然后包括名称。

```
<?php
        if(isset($_POST['submit'])){

            $to = "benlevygraphics@gmail.com";
            $headers = "From: " . $_POST['email'];
            $subject = "Ben, you have been contacted...";
            $body = "Name: " . $_POST['name'] . "\nEmail: " . $_POST['email'] . "\nWebsite: " . $_POST['web'] . "\nMessage: " . $_POST['message'];

            if(mail($to, $subject, $body, $headers)){

                echo("<p class=contactformsent>Your message has been sent!</p>");
            }
            else{
               echo("<p class=contactformnotsent>Message delivery failed...</p>");
            }
       }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:13:40.590

试试这个

```
$name = $_POST['name'];
echo("<p class=contactformsent>".$name." Your message has been sent!</p>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:13:30.237

因此将名称插入到消息中：

```
echo("<p class=contactformsent>".$_POST['name'].", your message has been sent!</p>"); 
```

# command - Tcl 设置命令

> ID：10838942
> 
> 赞同：0
> 
> 时间：2012-05-31T18:11:00.787
> 
> 标签：command, set, tcl

快速提问...我正在尝试以下操作：

```
set changedir "cd $JSDIR/"

eval $changedir 
```

..已经定义了 $JSDIR 的地方。运行此脚本会出现错误：“设置：变量名称必须以字母开头。”

解决方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:58:23.053

这不是 Tcl 生成的错误消息，因为 Tcl 的变量绝对*不需要*以字母开头。好的，将它们保留为字母数字往往很方便，因为`$var`速记语法比变量名的一般空间更具限制性，但`set var`表单几乎可以处理任何事情。

我猜这个脚本正在由不是 Tcl 的东西评估，也许是 bash？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:29:05.260

尝试设置`cd ${JSDIR/}`changedir

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T18:16:02.017

实际上变量名完全正确时会出现此消息，真正的问题是需要引用变量值。尝试代替：set changedir "cd $JSDIR//"

# objective-c - 更改相机胶卷后 ALAsset 无效？

> ID：10838946
> 
> 赞同：1
> 
> 时间：2012-05-31T18:11:19.140
> 
> 标签：objective-c, ios, alassetslibrary, alasset

我使用和朋友将一些照片写入照片库`UIImageWriteToSavedPhotosAlbum()`，同时显示该资产组（`ALAssetsGroupSavedPhotos`）的内容`enumerateAssetsUsingBlock:`。有时通过枚举组返回的资产变得有点“无效”，这意味着`defaultRepresentation`调用返回`nil`，尽管资产仍在内存中。

我注意到这似乎发生在照片库被`UIImageWriteToSavedPhotosAlbum()`调用修改之后。这是记录在案的行为吗？我该如何预防？重新加载资产不是一个可行的选择，因为用户可能已经在 UI 的某个更深处使用资产。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:37:20.193

这是一个不幸的，但记录在案的行为。以供参考：

> “ALAssetsLibraryChangedNotification 当资产库的内容从正在使用数据的应用程序下发生更改时发送。当您收到此通知时，应丢弃所有缓存信息并再次查询资产库。您应认为任何 ALAsset、ALAssetsGroup、或您在完成通知处理后引用的 ALAssetRepresentation 对象。”

所以你要做的就是注册一个观察者`ALAssetsLibraryChangedNotification`。（关于 iOS 5.X 上的此通知有一个错误，请参阅[Open Radar](http://openradar.appspot.com/10484334)。）当您收到通知时，您必须重新枚举所有组和资产。目前没有其他办法。从 GUI 的角度来看，这是非常不幸的，我们只能希望 Apple 在未来改进这种机制。

干杯，

亨德里克

# jsp - 如何从 servlet 向 txt 文件写入多个变量？

> ID：10838951
> 
> 赞同：0
> 
> 时间：2012-05-31T18:11:33.947
> 
> 标签：jsp, jakarta-ee, servlets, permission-denied, writetofile

我有一个网页表单页面（jsp），用户在其中提供了一些变量。我有一个具有相同名称的 java 类。所以使用 jsp bean 我将用户的输入传递给 2 个变量。所以我有 var_1=greek,var_2=turkey。

我现在想将这些变量传递给带有 servlet 的 properties.txt 文件。问题是它给了我这个错误：

/properties.txt（权限被拒绝）

为了制作 servlet，我遵循了这个例子：[WriteToFileServlet](http://www.roseindia.net/answers/viewqa/JSP-Servlet/9798-Writing-a-file-using-servlets.html)

我如何写入文件，我的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:23:38.337

您需要更改对您的服务器目录的可写权限。Linux 命令：`chmod 777 dirName`提供对该目录的完全权限。

如果您希望特定目录中的所有文件夹和文件也可写，则必须运行以下命令：`chmod 777 -R dirName`.

要获取有关权限的更多信息，您应该阅读以下内容：[http ://www.techrepublic.com/article/linux-file-and-directory-permissions/1047531](http://www.techrepublic.com/article/linux-file-and-directory-permissions/1047531)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:20:54.323

您应该尝试写入与应用程序内容目录相关的文件。

```
String path = servletContext.getRealPatch("/tmp/properties.txt");
//write to path 
```

# php - Facebook offline_access 弃用和 PHP（使用 curl）

> ID：10838953
> 
> 赞同：0
> 
> 时间：2012-05-31T18:11:43.323
> 
> 标签：php, facebook, curl

首先，对于另一个“offline_access”问题，我很抱歉，但我责怪 Facebook 对此含糊其辞。我已经阅读了很多（这里和官方的 Facebook 弃用“文档”），我读的越多，我的问题就越多。

我们的应用程序使用 Facebook API 将用户的故事发布到他们的时间线。这是通过 curl 在我们的服务器上使用 PHP 完成的。

我的理解是 accesstoken 的有效期不能超过 60 天。这是否意味着我们的用户每次令牌失效时都必须返回我们的站点重新授权？如果是这样，像 Foursquare 这样的服务（与我们有类似的集成）将如何处理这个问题？

或者当 Facebook-API 回复“此令牌已过期”消息时是否可以简单地请求新令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:15:44.333

我认为这在[迁移文档](https://developers.facebook.com/roadmap/offline-access-removal/)中作为场景 3 或 4 进行了介绍，具体取决于您的身份验证流程

是的，您的用户需要至少每 60 天返回一次，以便您拥有有效的令牌来代表该用户采取行动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:25:33.423

当然，他们必须回来——这就是删除 offline_access 的全部意义所在，应用程序不能代表那些甚至可能不再注意到它的用户永远继续行动。

> 或者当 Facebook-API 回复“此令牌已过期”消息时是否可以简单地请求新令牌？

并非没有用户交互。但据我了解，当用户在您的页面上时，通过 JS SDK 调用例如 FB.login 就足够了，如果用户登录到 FB 和仍然授权你的应用程序，获得一个新的短期 access_token，然后你可以用它来交换一个长期的。

# python - wxPython ScrolledWindow 太小

> ID：10838956
> 
> 赞同：0
> 
> 时间：2012-05-31T18:12:05.723
> 
> 标签：python, wxpython

我有一个面板来控制 wxPython 框架中 matplotlib 图的编辑。wxPython 安装最近从 2.6.4.0 更新到 2.8.12.1，它破坏了一些东西，即滚动面板不再填充块，而是保持在最小尺寸。我现在才从一年前捡起这个，所以我有点生疏了。任何帮助将非常感激！

下面是可以独立运行并显示问题的代码的精简版本。ScrolledWindow 应该扩大到 400 像素。当我运行它时它会`self.scroll.GetSize()`返回`(292, 257)`，但它显然没有以那个大小显示。

```
# testing scroll panel for PlotEditFrame

import wx

# spoof the necessary matplotlib objects
class FakePlot:
    def __init__(self):
        self.figure = FakeFigure()
    def get_figure(self):
        return self.figure
class FakeFigure:
    def __init__(self):
        self.axes = [FakeAxis() for i in range(0,2)]
class FakeAxis:
    def __init__(self):
        self.lines = [FakeLine(i) for i in range(0, 4)]
class FakeLine:
    def __init__(self,i):
        self.label = "line #%s"%i
    def get_label(self):
        return self.label

class PlotEditFrame(wx.Frame):
    """
    This class holds the frame for plot editing tools
    """

    def __init__(self, parent, plot):
        """Constructor for PlotEditFrame"""
        wx.Frame.__init__(self, parent, -1, "Edit Plot")
        self.parent = parent
        self.plot = plot
        self.figure = plot.get_figure()
        self.advanced_options = None
        self.scroll = wx.ScrolledWindow(self, -1)
        self.InitControls()

    def InitControls(self):
        """Create labels and controls based on the figure's attributes"""

        # Get current axes labels
        self.lineCtrls = [( wx.StaticText(self.scroll, -1, "Column:"),
                            wx.StaticText(self.scroll, -1, "Color:"),
                            wx.StaticText(self.scroll, -1, ""))]

        for axis in self.figure.axes:
            for line in axis.lines:
                color = wx.Colour(255,0,0,0)
                lineTxt = wx.TextCtrl(self.scroll, -1, line.get_label(), size=(175,-1))
                lineColor = wx.TextCtrl(self.scroll, -1, "#%02x%02x%02x"%color.Get())
                lineBtn = wx.Button(self.scroll, -1, size=(25,25))
                lineBtn.SetBackgroundColour(color)
                self.lineCtrls.append((lineTxt, lineColor, lineBtn))

        # Place controls
        boxSizer = wx.BoxSizer(wx.VERTICAL)

        lineBox = wx.StaticBox(self, -1, "Lines")
        lineBoxSizer = wx.StaticBoxSizer(lineBox, wx.VERTICAL)
        lineSizer = wx.FlexGridSizer(rows=len(self.lineCtrls)+1, cols=4, vgap=3, hgap=3)
        for ctrls in self.lineCtrls:
            lineSizer.AddMany([(ctrls[0], 0, wx.ALIGN_LEFT | wx.EXPAND),
                               (ctrls[1], 0, wx.ALIGN_LEFT),
                               (ctrls[2], 0, wx.ALIGN_CENTER| wx.FIXED_MINSIZE),
                               ((3,3),    0, wx.ALIGN_CENTER)])
        lineSizer.AddGrowableCol(0)

        # Set size
        self.scroll.SetSizer(lineSizer)
        width = self.scroll.GetBestSize().width
        height = self.scroll.GetBestSize().height
        if height > 400:
            height = 400
            width = width + 25 # button size
        self.scroll.SetSize((width, height))
        self.scroll.SetScrollbars(0, 1, 1,1)
        print "set scrollbars at %s x %s"%(width, height)

        lineBoxSizer.Add(self.scroll, 0, wx.EXPAND)

        boxSizer.AddMany([ (lineBoxSizer, 0, wx.EXPAND) ])

        self.SetSizer(boxSizer)
        self.SetAutoLayout(1)
        self.Fit()

        height = self.GetSize().GetHeight()
        self.SetSizeHints(minH=height, maxH=height,
                                minW=width, maxW=width*5)

if __name__ == '__main__':
    app = wx.PySimpleApp(0)
    parent = wx.Frame(None, wx.ID_ANY, 'test', size=(300,300))
    plot = FakePlot()
    panel = PlotEditFrame(parent, plot)
    panel.Show()
    app.MainLoop() 
```

我不知道哪个面板需要调整大小。我尝试了一些事情，但无济于事：

```
# These have no visible effect
boxSizer.SetMinSize((width, height))
self.scroll.SetVirtualSize((width, height))
lineBoxSizer.Fit(self.scroll)
lineBoxSizer.SetVirtualSizeHints(self.scroll)

# This makes the window the right size, but not the scroll panel
lineBoxSizer.SetMinSize((width, height)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:27:39.887

我对您的代码进行了一些编辑以使其正常工作：

```
import wx

# spoof the necessary matplotlib objects
class FakePlot:
    def __init__(self):
        self.figure = FakeFigure()
    def get_figure(self):
        return self.figure
class FakeFigure:
    def __init__(self):
        self.axes = [FakeAxis() for i in range(0,2)]
class FakeAxis:
    def __init__(self):
        self.lines = [FakeLine(i) for i in range(0, 4)]
class FakeLine:
    def __init__(self,i):
        self.label = "line #%s"%i
    def get_label(self):
        return self.label

class PlotEditFrame(wx.Frame):
    """
    This class holds the frame for plot editing tools
    """

    def __init__(self, parent, plot, size):
        """Constructor for PlotEditFrame"""
        wx.Frame.__init__(self, parent, -1, "Edit Plot", size=size)
        self.parent = parent
        self.plot = plot
        self.figure = plot.get_figure()
        self.advanced_options = None
        self.scroll = wx.ScrolledWindow(self, -1)
        self.InitControls()

    def InitControls(self):
        """Create labels and controls based on the figure's attributes"""

        # Get current axes labels
        self.lineCtrls = [( wx.StaticText(self.scroll, -1, "Column:"),
                            wx.StaticText(self.scroll, -1, "Color:"),
                            wx.StaticText(self.scroll, -1, ""))]

        for axis in self.figure.axes:
            for line in axis.lines:
                color = wx.Colour(255,0,0,0)
                lineTxt = wx.TextCtrl(self.scroll, -1, line.get_label(), size=(175,-1))
                lineColor = wx.TextCtrl(self.scroll, -1, "#%02x%02x%02x"%color.Get())
                lineBtn = wx.Button(self.scroll, -1, size=(25,25))
                lineBtn.SetBackgroundColour(color)
                self.lineCtrls.append((lineTxt, lineColor, lineBtn))

        # Place controls
        boxSizer = wx.BoxSizer(wx.VERTICAL)

        lineBox = wx.StaticBox(self, -1, "Lines")
        lineBoxSizer = wx.StaticBoxSizer(lineBox, wx.VERTICAL)
        lineSizer = wx.FlexGridSizer(rows=len(self.lineCtrls)+1, cols=4, vgap=3, hgap=3)
        for ctrls in self.lineCtrls:
            lineSizer.AddMany([(ctrls[0], 0, wx.ALIGN_LEFT | wx.EXPAND),
                               (ctrls[1], 0, wx.ALIGN_LEFT),
                               (ctrls[2], 0, wx.ALIGN_CENTER| wx.FIXED_MINSIZE),
                               ((3,3),    0, wx.ALIGN_CENTER)])
        lineSizer.AddGrowableCol(0)

        # Set size
        self.scroll.SetSizer(lineSizer)
        width = self.scroll.GetBestSize().width
        height = self.scroll.GetBestSize().height
        if height > 400:
            height = 400
            width = width + 25 # button size
        self.scroll.SetSize((width, height))
        self.scroll.SetScrollbars(0, 1, 1,1)
        print "set scrollbars at %s x %s"%(width, height)

        lineBoxSizer.Add(self.scroll, 1, wx.EXPAND)

        boxSizer.Add(lineBoxSizer, 1, wx.EXPAND)

        self.SetSizer(boxSizer)
        self.SetAutoLayout(1)
        #self.Fit()

        height = self.GetSize().GetHeight()
        self.SetSizeHints(minH=height, maxH=height,
                                minW=width, maxW=width*5)

if __name__ == '__main__':
    app = wx.App(False)
    plot = FakePlot()
    frame = PlotEditFrame(None, plot, size=(300,300))
    frame.Show()
    app.MainLoop() 
```

主要是将以下两行的比例设置为“1”：

```
lineBoxSizer.Add(self.scroll, 1, wx.EXPAND)    
boxSizer.Add(lineBoxSizer, 1, wx.EXPAND) 
```

我改变了你启动程序的方式，因为在这种情况下将一个框架放在另一个框架内有点傻。PySimpleApp 也被弃用了，所以我也改变了它。我几乎从来没有找到“Fit()”方法的好用处，所以我把它去掉了，因为它过多地压缩了初始 GUI。

希望有帮助！

# php - 让 PHP 在页面加载时自动将文件复制到本地目录

> ID：10838958
> 
> 赞同：-1
> 
> 时间：2012-05-31T18:12:12.497
> 
> 标签：php

基本上，当某个页面加载时，我希望能够自动将文件从服务器复制到我计算机上的本地目录。这就是我得到的：

```
<body>
<?php
copy('http://photobooth.josh.com/gsbackgrounds/0001/greenscreen_background.jpg', 'C:\Program Files (x86)\BreezeSys\DSLR Remote Pro\PhotoboothImages\greenscreen_background.jpg');
?>
</body> 
```

但这似乎不起作用。如果我需要在单击时执行此操作，那也可以，但是我被卡住了。服务器有 PHP5，所以我认为这会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:53:28.090

执行此操作的简单方法是：

```
// A simple method requiring allow_url_fopen
$file_contents = file_get_contents($resource_url);

// An alternative method requiring cURL
$ch = curl_init($resource_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$file_contents = curl_exec($ch);

file_put_contents($local_file_path, $file_contents); 
```

我猜这`copy()`映射到不支持远程项目的系统调用。修改[allow_url_fopen](http://php.net/manual/en/features.remote-files.php)标志可能会允许它工作，但我对此表示怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T02:51:17.033

首先感谢所有试图解决我的困境的人，并对延迟回复感到抱歉。

我发现最简单的方法是简单地制作一个 javascript 函数“复制”并 onClick 在本地机器上运行一个批处理文件/wget 类程序。它需要 Internet Explorer，但这就是我们正在使用的。

无论如何，我只是为可能遇到同样问题的其他人发布我们的解决方案。再次感谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:58:08.120

你可以做fopen。

```
 $contents = file_get_contents('http://****.com/file.jpg');
   $handle =  fopen('yourfilename.jpg',"w");
   fwrite($handle,$contents);
   fclose($handle); 
```

或者尝试 curl 进行下载。

[http://phpsense.com/2007/php-curl-functions/](http://phpsense.com/2007/php-curl-functions/)

```
/**
 * Initialize the cURL session
 */
 $ch = curl_init();

 /**
 * Set the URL of the page or file to download.
 */
 curl_setopt($ch, CURLOPT_URL, ‘http://news.google.com/news?hl=en&topic=t& output=rss’);

 /**
 * Ask cURL to return the contents in a variable instead of simply echoing them to  the browser.
 */
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

 /**
 * Execute the cURL session
 */
 $contents = curl_exec ($ch);

 /**
 * Close cURL session
 */
 curl_close ($ch); 
```

# python - 如何使用 pygame.MOUSEBUTTONDOWN？

> ID：10838959
> 
> 赞同：2
> 
> 时间：2012-05-31T18:12:23.147
> 
> 标签：python, pygame, mouseevent, mouse

我的简单问题是如何在精灵或项目上使用 pygame.MOUSEBUTTONDOWN 来触发事件？

例如，我有 item_A 并希望在我用鼠标按下对象时开始播放音乐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T22:58:35.827

请参阅[http://www.pygame.org/docs/ref/event.html](http://www.pygame.org/docs/ref/event.html)。

你的精灵组在哪里`buttons`，有[`Rect()`](http://www.pygame.org/docs/ref/rect.html)s。`click()`您可以为每个按钮上的不同声音定义一个功能。

```
for event in pygame.event.get():    
    if event.type == MOUSEBUTTONDOWN :
        x, y = event.pos
        for button in buttons:
            if button.rect.collidepoint(x, y):
                print("play sound here.")

                # or, if button handles on clicking, by a defined function:
                button.click() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:18:13.413

在主循环中使用事件

```
for event in pygame.event.get():
    if event.type == MOUSEBUTTONDOWN :
        play_music() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:18:21.763

您需要在主循环中轮询事件，当您检测到 MOUSEBUTTONDOWN 事件时，您需要检查它是否在您想要的精灵上，如果是则开始播放音乐。

# function - Lua - 找出调用函数

> ID：10838961
> 
> 赞同：16
> 
> 时间：2012-05-31T18:12:29.177
> 
> 标签：function, lua

在 Lua 中，是否有可能知道哪个函数调用了当前函数。

例如

```
function a()
    get_calling_function()    --Should print function b
end 

function b()
    a() 
end 
```

这样的事情可能吗？
调试库有这样的功能吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T18:36:34.573

你可以使用`debug.traceback()`：

```
function a()
    print(debug.traceback())
end 

function b()
    a() 
end 

b() 
```

这将打印：

```
堆栈回溯：
    ./test.lua:45: 在函数'a'中
    ./test.lua:50: 在函数'b'中
    ./test.lua:53: 在主块中
    [C]：在？

```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-31T18:56:04.957

您可以使用 debug.sethook() 设置一个挂钩，每次在 lua 中发生某些特殊事件时都会调用该挂钩。它对这样的事情很有用。

```
local debugInfo = { caller = nil, callee = nil }
function hook()
    local info = debug.getinfo(2)
    if info == nil then
        debugInfo.callee = nil
        return
    end

    -- we only want to watch lua function calls (not C functions)
    if info.what ~= "Lua" then
        debugInfo.callee = "C function"
        return
    end

    debugInfo.caller = debugInfo.callee
    debugInfo.callee = info.name
end

debug.sethook(hook, "c")

function caller1()
    if debugInfo.caller ~= nil and debugInfo.callee ~= nil then
        msg = debugInfo.callee.. " was called by ".. debugInfo.caller.. "!"
        print(msg)
    end
end

function caller2()
    caller1()
end

caller2() 
```

这将打印“caller1 是从 caller2 调用的！”

debug.sethook 可以在第二个参数中处理 3 个不同的字符，因此您可以让它知道何时通知您。'c' 表示每次在 lua 中调用函数时调用你的钩子函数，'r' 表示每次在 lua 中返回函数时调用你的钩子函数，'l' 表示每当 lua 处理新的一行代码时调用你的钩子函数.

如果你真的想的话，你可以设置它来构建你自己的自定义堆栈跟踪，你也可以在你的钩子中使用 debug.getlocal() 甚至尝试计算出哪些参数被传递给你的被调用函数。

为 lhf 编辑。如果您不需要跟踪它并且只需要知道函数调用方式的上下文，这实际上是一种更简单的方法来完成您所要求的操作。

```
function caller1()
    local current_func = debug.getinfo(1)
    local calling_func = debug.getinfo(2)
    print(current_func.name.. " was called by ".. calling_func.name.. "!")
end

function caller2()
    caller1()
end 
```

# bash - Bash：将命令输出和时间戳附加到文件

> ID：10838963
> 
> 赞同：3
> 
> 时间：2012-05-31T18:12:41.923
> 
> 标签：bash, shell

通常在我习惯做的 bash 脚本中`some_command >> log.log`。这很好用，但是如何附加更多数据，例如时间和命令名称？

我的目标是拥有这样的日志

```
2012-01-01 00:00:01 [some_command] => some command output...
2012-01-01 00:01:01 [other_command] => other command output... 
```

* * *

这些进程应该同时运行并写入文件。

**在我的案例中，William Pursell 指出的最终解决方案是：**

`some_command 2>&1 | perl -ne '$|=1; print localtime . ": [somme_command] $_"' >> /log.log &`

我还添加了将and`2>&1`重定向到文件，最后添加了 an 以使程序保持在后台。`STDOUT``STDERR``&`

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T07:36:41.913

使用 sed 的替代解决方案是：

```
some_command 2>&1 | sed "s/^/`date '+%Y-%m-%d %H:%M:%S'`: [some_command] /" >> log.log & 
```

它通过替换行“字符”（^）的开头来工作。如果您不想依赖 Perl，可能会派上用场。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:21:20.513

鉴于您的评论，您似乎希望多个进程同时写入文件，并在每一行上都有一个时间戳。这样的事情可能就足够了：

```
some_cmd | perl -ne '$|=1; print localtime . ": [some_cmd] $_"' >> logfile 
```

如果要按摩日期的格式，请使用 POSIX::strftime

```
some_cmd | perl -MPOSIX -ne 'BEGIN{ $|=1 }
   print strftime( "%Y-%m-%d %H:%M:%S", localtime ) . " [some_cmd] $_"' >> logfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:17:06.253

像这样的东西：

```
(echo -n $(date); echo  -n " ls => ";  ls) >> /tmp/log 
```

但是，您的命令输出是多行的，并且不会具有您显示的上述格式。在这种情况下，您可能希望使用 tr 或 sed 之类的命令将输出中的换行符替换为其他字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-26T08:43:37.557

在 Ubuntu 上：

```
sudo apt-get install moreutils
echo "cat" | ts
Mar 26 09:43:00 cat 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T18:19:41.180

一种方法是[使用 logger(1)。](http://linux.about.com/library/cmd/blcmdl1_logger.htm)

另一个可能是这样的：

```
stamp () {
  ( echo -n "`date +%T` "
    "$@" ) >> logfile
}

stamp echo how now brown cow 
```

# javascript - 某些 .js 页面未及时加载

> ID：10838969
> 
> 赞同：0
> 
> 时间：2012-05-31T18:13:14.443
> 
> 标签：javascript, javascript-events

我的网站上有某些页面加载了大量的 javascript 文件。在下面的代码中，edit_onload() 在 script1.js 中。通常，所有脚本都可以正常加载，并且 edit_onload 会成功触发。有时*似乎*script1.js 没有及时加载，因为 edit_onload() 预期对象出错。如果您刷新页面，一切都会正常加载。

我的问题是，下面的标记不应该等待所有 .js 文件加载然后执行 edit_onload() 吗？

```
 <script LANGUAGE="javascript" DEFER="true" for="window" event="onload">
                <xsl:comment>
                    <![CDATA[

                    edit_onload();

                ]]>
                </xsl:comment>
            </script>
            <script language="javascript" src="/_scripts/script1.js" defer="true"></script>
            <script language="javascript" src="/_scripts/script2.js" defer="true"></script>
            <script language="javascript" src="/_scripts/script3.js" defer="true"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:05:25.643

我认为，延迟脚本处理的实现是特定于浏览器的。例如，它们可以处理不同队列中的内联和外部脚本。一般来说，“defer”属性只是站点开发人员为用户代理提供的建议，但用户代理不一定会遵守该建议。

你也应该尝试使用'defer="defer"'。您可以将调用移至 script1.js 本身吗？您还可以定期检查移动到正在加载的内容末尾的特定元素的存在，并仅在发现元素后运行该方法。

[顺便说一句，如果您使用动态脚本加载](http://unixpapa.com/js/dyna.html)隐喻，您可能会获得对脚本加载的更多控制（链接只是示例之一）。

# android - 从麦克风输入声音时触发事件

> ID：10838970
> 
> 赞同：2
> 
> 时间：2012-05-31T18:13:25.307
> 
> 标签：android, audio

我正在尝试制作一个应用程序，该应用程序会在我的平板电脑麦克风中听到尖锐而响亮的声音时做出反应。

我想知道的是是否可以触发这样的事件，是否可以为输入的声级设置某种阈值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:56:42.570

检查这些链接：

*   StackOverflow[答案](https://stackoverflow.com/a/6116694/530933)。
*   这导致了这个[NoiseAlert 源代码](http://code.google.com/p/android-labs/source/browse/trunk/NoiseAlert/src/com/google/android/noisealert/SoundMeter.java?r=2)。

但这只是在麦克风上收听然后在声级足够高时触发您的事件的问题。

# java - 使 JSVGScrollPane 中的 JSVGCanvas 与 SVGDocument 大小匹配

> ID：10838971
> 
> 赞同：2
> 
> 时间：2012-05-31T18:13:26.753
> 
> 标签：java, swing, svg, batik

我在图表应用程序中显示我的 SVG 绘图时遇到问题。画布采用其父组件的大小，而不是它包含的文档。大于此大小的文档不会完全呈现。

**案子**

例如，我有一张 621x621 像素的绘图。

```
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" contentScriptType="text/ecmascript" zoomAndPan="magnify" contentStyleType="text/css" preserveAspectRatio="xMaxYMax slice" version="1.0">
  <rect x="50" y="50" fill="white" width="20" height="20" stroke="black" stroke-width="1"/>
  <rect x="600" y="600" fill="blue" width="20" height="20" stroke="black" stroke-width="1"/>
</svg> 
```

它没有 viewBox，因为它是动态创建的。当我创建文档时，我没有大小。

我有一个`JSVGCanvas`内部 a `JSVGScrollPane`，滚动窗格的父级比文档小，可以说它的 500x500 像素。

**预期行为**

当您启动应用程序时，可以看到适合 500x500 的绘图部分。底层文档更大，所以有滚动条允许我向左和向下滚动 121px。

当您增加框架的大小时，越来越多的绘图变得可见。当您将其增加到大于 620x620px 时，滚动条会完全消失。

如果再次使面板比文档小，滚动条会重新出现。

**遇到的行为**

当您启动应用程序时，可以看到适合 500x500 的绘图部分。没有可见的滚动条。

当您使面板变大时，画布会增加（其背景颜色），但绘图不会扩展到初始 500x500px 之外的部分。

当您将面板缩小时，假设为 400x400，滚动条会出现，但只允许我滚动 100 像素。所以画布仍然是最初的 500x500 而不是所需的 621x621。

**例子**

[`ScrollExample`](http://svn.apache.org/repos/asf/xmlgraphics/batik/trunk/contrib/scroll/ScrollExample.java)可以使用Batik 存储库和我在上面添加的 SVG 文件来重现遇到的行为。该示例使用 500x500px 的固定大小。

如果您将背景颜色添加到画布和滚动窗格，则整个框架都是蓝色的。因此，虽然画布确实增加了大小，但它不会绘制超出其初始大小的任何内容。

```
canvas.setBackground(Color.blue);
scroller.setBackground(Color.red); 
```

重新调整面板大小后，我可以重置文档。这使得它重新绘制绘图的可见部分，但滚动仍然无法按预期工作，因为画布仍然只是可见部分的大小而不是文档的大小。您可以通过将此侦听器添加到框架（或我想的任何其他面板）来测试这一点。

```
class ResizeListener implements ComponentListener {

    JSVGCanvas canvas;
    URI url;

    public ResizeListener(JSVGCanvas c, URI u) {
        canvas = c;
        url = u;
    }

    @Override
    public void componentResized(ComponentEvent arg0) {
        canvas.setURI(url.toString());
        // Calling invalidate on canvas or scroller does not work
    }

    // ...
}; 
```

我已经读过我应该有一个 viewBox，但是我的文档经常重新创建（基于 modelchange 事件），当我创建文档时，我不知道如何获取 viewBox。`SVGDocument.getRootElement().getBBox();`通常给我`null`。当没有给出 viewBox 时，蜡染代码中应该有后备，所以我希望这是可选的。此外，当我在某处平移时，如果我更改文档，它应该保持这种平移。

我希望我能把我的问题说清楚。当我期望 JSVG 类提供开箱即用的所需行为时，我是否期望它们太多，或者我在这里遗漏了什么？有人可以指导我找到解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:30:20.347

我想我可能已经找到了解决办法。我需要设置文档的高度和宽度，而不是弄乱 viewBox。设置大小后，不需要 viewBox 并且滚动条按预期工作。如果我确实设置了一个视图框，画布会不断缩放图像以使其适合。

现在，为了更新大小，每当我更改可能影响大小的 dom 时，我都会使用它。

```
static BridgeContext ctx = new BridgeContext(new UserAgentAdapter());
static GVTBuilder builder = new GVTBuilder();

private static void calculateSize(SVGDocument doc) {
    GraphicsNode gvtRoot = builder.build(ctx, doc);

    Rectangle2D rect = gvtRoot.getSensitiveBounds();

    doc.getRootElement().setAttributeNS(null,
            SVGConstants.SVG_WIDTH_ATTRIBUTE, rect.getMaxX() + "");
    doc.getRootElement().setAttributeNS(null,
            SVGConstants.SVG_HEIGHT_ATTRIBUTE, rect.getMaxY() + "");
} 
```

我在线程*之外*`UpdateManager`并在我使用的 dom 修改之后执行此操作`JSVGCanvas.setSVGDocument()`。当我尝试通过`UpdateManager`它执行此操作时，它只更新了第一个更改。正确初始化更新队列可能会解决此问题，但是由于我更改了很多文档，因此每次都可以重新开始。

我剩下一个小问题。每当我设置新文档时，滚动位置都会重置。我尝试在操作之前进行转换并在之后重新应用它，但这似乎不起作用。

**Edit+**：我设法通过替换文档的根节点而不是替换整个文档来解决这个小问题。画布设置为文档状态 ALWAYS_DYNAMIC。文档中的更改会立即应用，包括根节点的新大小（如上所述设置）。但是因为文档没有被完全替换，所以滚动状态被保留了。

画布仅在完成渲染文档后才准备好修改 dom。我使用 SVGLoad-listener 来检测这一点。

```
class Canvas extends JSVGCanvas implements SVGLoadEventDispatcherListener {

    public Canvas() {
        super();
        setDocumentState(ALWAYS_DYNAMIC);
        addSVGLoadEventDispatcherListener(this);
    }

    /**
     * Indicatates whether the canvas has finished its first render, the
     * canvas is now ready for modification of the dom
     */
    private boolean isReadyForModification = false;

    /**
     * Renew the document by replacing the root node with the one of the new
     * document
     * 
     * @param doc The new document
     */
    public void renewDocument(final SVGDocument doc) {

        if (isReadyForModification) {
            getUpdateManager().getUpdateRunnableQueue().invokeLater(
                    new Runnable() {
                        @Override
                        public void run() {
                            // Get the root tags of the documents
                            Node oldRoot = getSVGDocument().getFirstChild();
                            Node newRoot = doc.getFirstChild();

                            // Make the new node suitable for the old
                            // document
                            newRoot = getSVGDocument().importNode(newRoot,
                                    true);

                            // Replace the nodes
                            getSVGDocument().replaceChild(newRoot, oldRoot);
                        }
                    });
        } else {
            setSVGDocument(doc);
        }

    }

    @Override
    public void svgLoadEventDispatchCompleted(SVGLoadEventDispatcherEvent e) {
        isReadyForModification = true;
    }

    // ...
} 
```

# sql-server-2005 - SQL Server 2005 报表管理器 - 数据源连接信息已删除？

> ID：10838974
> 
> 赞同：2
> 
> 时间：2012-05-31T18:13:32.737
> 
> 标签：sql-server-2005, reporting-services

刚开始一份新工作，我的职责之一是创建/更改报告，并让公司其他人在我们的报告服务器上访问它们。我在 Visual Studio 2005 中创建了一个新报告（来自现有报告），它在 VS 中运行良好。在我使用 Microsoft SQL Server 报表管理器将文件上传到报表服务器并尝试查看报表后，它显示“报表服务器无法处理报表。数据源连接信息已被删除。(rsInvalidDataSourceReference)”

我在“属性”>“数据源”中进行了检查，并选择了第一个选项“共享数据源”，并在其旁边显示“共享数据源引用不再有效”的警报。奇怪的是，我用来创建此报告的原始报告具有相同的警报和相同的设置，但它执行得很好。它们非常相似 - 原始报告按年计算，新报告按月计算。

我真的很感激我能在这方面得到任何帮助，因为我公司里没有任何人可以依靠。我对这些应用程序非常不熟悉，所以我可能只需要一些基本的第一步来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:42:43.817

您是否也上传了数据源？

# java - 尝试从 JSONArray 中检索 JSONObject 时返回 null？

> ID：10838976
> 
> 赞同：1
> 
> 时间：2012-05-31T18:13:33.197
> 
> 标签：java, android, json, arrays

我正在尝试执行以下操作：

```
UserFunctions uf = new UserFunctions();
    JSONArray json = uf.getAllFreebies();
    System.out.println(json + "blah1"); //Here im able to retrieve the whole JSONArray.

try{    
System.out.println("1");
    for (int i = 1; i <json.length(); i++) {
        System.out.println("2");
            jo = json.optJSONObject(i); //Im getting null value here
            System.out.println(jo + "blah2"); //Here im getting null 
```

...}

我使用以下几行打印出我的 JSONArray。

```
JSONArray json = uf.getAllFreebies();
System.out.println(json + "blah1"); 
```

现在在以下几行中，当我尝试从 JSONArray 检索 JSONObject 并尝试将其打印出来时，它会在特定索引处打印出“null”而不是 JSONObject。

```
jo = json.optJSONObject(i);
System.out.println(jo + "blah2"); 
```

谁能告诉我我做错了什么？我的意思是当我的 JSONArray 不为空时，我如何为 JSONOBject 获得空值？

谢谢你。

以下是我的 JSONArray logcat：

```
05-31 21:02:57.156: I/System.out(318): [["viking","Art","Potrait","Potrait","Good","im giving out potrait 7325697","176 Fiat Ave","Iselin","New Jersey","USA","08830","2012-05-27"],["n00b","Books","Novels","Novels","Good","Im giving out novels 7325697","b9 maa krupa","petlad","Gujarat","India","388450","2012-05-27"],["n00b","Computers","laptop","laptop giveaway","Good","Im giving out laptop if you are interested than pls call on 7325697","B9 Ma  Krupa","Petlad","Gujarat","India","388450","2012-05-27"],["mista","Cameras & Photos","Camera","Camera GiveAway","Very good","im giving out camera .its kodak .pls email me on mista@gmail.com","Mista Lee elm street","seoul","Korea","South Korea","ha8 9sd","2012-05-27"],["panda","Gaming Consoles","XBOX","XBOX 360","Very Good","Im giving out xbox 360.if you are interested please email me on panda@gmail.com","435 Carmen Rd,","Buffalo","New York","USA","14226","2012-05-27"],["viking","Cameras & Photos","Camera","Kodak Camera","Good","Kodak Camera giveaway.Pls call on 732397","","Iselin","New Jersey","USA","08830","2012-05-28"],["viking","Books","Novels","Novel GA","Good","Novel give away.call on 7325697.","","Iselin","New Jersey","USA","08830","2012-05-28"],["viking","Automotive","Car","Car GiveAway","Good","Im giving out car.if you are interested pls call 7323697.","176 Fiat Ave","Iselin","New Jersey","USA","08830","2012-05-29"],["viking","Collectibles","Medallions","Medallion GA","Very Good","Im giving out medallion.if inetrested pls call 732697","176 Fiat Ave,","Iselin","New Jersey","USA","08830","2012-05-29"],["viking","Clothing & Accessories","cloths","cloths giveaway","Good","im giving out cloths if you are interested pls call on 735697","176 Fiat Ave,","Iselin","New jersey","USA","08830","2012-05-29"],["viking","Books","Novel","Novel GA","Good","pls call 735697","435 carmen rd","buffalo","ny","usa","14226","2012-05-29"],["viking","Books","TextBook","CHemistry 101","GOod","pls call 735697","176 fiat ave","iselin","new jersey","usa","08830","2012-05-29"],["mista","Books","Notebook","Notbook","Good","im giving out notebbok if you are interested pls call 48374288423","elm street","seaoul","na","South Korea","jfjafjk","2012-05-29"]]blah1 
```

尝试在索引 i 处打印 JSONOBject 时的 logcat 输出

```
05-31 21:02:57.156: I/System.out(318): nullblah2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:27:22.770

JSON`[[...], [...], [...]]`不包含 JSON 对象，但它确实有一些 JSON 数组。

因此`optJSONObject`找到一个 JSON 数组（它需要一个 JSON 对象）并返回`null`，因为它的类型不正确。（`opt`是*可选*的缩写。）

使用`optJSONArray`（注意*Array*而不是*Object*）。或者，使用`getJSONArray`，这将在失败时抛出 JSONException。

快乐编码。

* * *

请注意，JSON 严格区分对象、数组和各种值。Array 是一种特殊（子）类型的 Object（在 JSON 意义上）的概念存在于 JavaScript 中，但*不一定*扩展到其他 JSON 实现。例如，[JSONArray](http://www.json.org/javadoc/org/json/JSONArray.html)类与 JSONObject 类*没有*关系。

# jquery - 实时 ASP 搜索插入列表

> ID：10838980
> 
> 赞同：0
> 
> 时间：2012-05-31T18:13:55.893
> 
> 标签：jquery, sql, ajax, search, asp-classic

我对这个最新项目有两个问题：

用户将从下拉列表中选择一个选项。根据该选择，我需要运行查询以提取与该选择关联的所有文档。这些是用户将能够搜索的文档。

然后我需要构建一个实时搜索选项，在用户输入每几个字符后更新。一旦用户找到正确的文件，他们就可以选择它并将其填充到下面的列表中。

我在这里很困惑，可以使用一些指导或链接参考。ASP 对我来说不是一种非常熟悉的语言，但无论如何我的任务是在 ASP 中构建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:39:16.663

对于经典的 asp，您将需要混合使用级联下拉菜单、javascript 和 ajax。

经典 asp 中的 Ajax 并不容易，但您应该能够做到这一点。

[经典的asp ajax](http://www.mikesdotnetting.com/Article/39/AJAX-and-Classic-ASP)

尽管级联下拉菜单并不完全是您所需要的，但它将向您展示如何使用下拉菜单调用元素。如果您将级联下拉菜单与 Ajax 混合使用，它应该可以让您到达那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T07:30:13.843

不需要阿贾克斯。我只使用 Javascript 和 ASP 完成了这项工作。这是我不久前做的一个项目的一些代码： [http](http://www.oceanmedia.net/fin_examples.zip) ://www.oceanmedia.net/fin_examples.zip 在代码中你会看到你需要的每一块:-)

# python - 从字典写入numpy数组

> ID：10838982
> 
> 赞同：3
> 
> 时间：2012-05-31T18:14:13.653
> 
> 标签：python, arrays, dictionary, numpy

我有一个文件头值字典（时间、帧数、年、月等），我想将其写入 numpy 数组。我目前的代码如下：

```
 arr=np.array([(k,)+v for k,v in fileheader.iteritems()],dtype=["a3,a,i4,i4,i4,i4,f8,i4,i4,i4,i4,i4,i4,a10,a26,a33,a235,i4,i4,i4,i4,i4,i4"]) 
```

但我得到一个错误，“只能将元组（而不是“int”）连接到元组。

基本上，最终结果需要是存储整个文件头信息（512 字节）和每帧数据（头和数据，每帧 49408 字节）的数组。有没有更简单的方法来做到这一点？

编辑：为了澄清（也为我自己），我需要将文件每一帧的数据写入一个数组。我得到了 matlab 代码作为基础。这是给我的代码的粗略想法：

```
data.frame=zeros([512 96])
frame=uint8(fread(fid,[data.numbeams,512]),'uint8'))
data.frame=frame 
```

如何将“框架”翻译成 python？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:50:42.427

您最好将标题数据保存在 dict 中。你真的需要它作为一个数组吗？（如果是这样，为什么？在 numpy 数组中包含标头有一些优点，但它比简单的 更复杂`dict`，并且不那么灵活。）

a 的一个缺点`dict`是它的键没有可预测的顺序。如果您需要以常规顺序将标头写回磁盘（类似于 C 结构），则需要单独存储字段的顺序以及它们的值。如果是这种情况，您可能会考虑使用有序的 dict ( `collections.OrderedDict`)，或者只是将一个简单的类放在一起来保存您的标题数据并将订单存储在那里。

除非有充分的理由将其放入 numpy 数组中，否则您可能不想这样做。

但是，结构化数组将保留标头的顺序，并使其更容易将其二进制表示写入磁盘，但在其他方面不灵活。

如果您确实想让标头成为数组，则可以执行以下操作：

```
import numpy as np

# Lists can be modified, but preserve order. That's important in this case.
names = ['Name1', 'Name2', 'Name3']
# It's "S3" instead of "a3" for a string field in numpy, by the way
formats = ['S3', 'i4', 'f8'] 

# It's often cleaner to specify the dtype this way instead of as a giant string
dtype = dict(names=names, formats=formats)

# This won't preserve the order we're specifying things in!!
# If we iterate through it, things may be in any order.
header = dict(Name1='abc', Name2=456, Name3=3.45)

# Therefore, we'll be sure to pass things in in order...
# Also, np.array will expect a tuple instead of a list for a structured array...
values = tuple(header[name] for name in names)
header_array = np.array(values, dtype=dtype)

# We can access field in the array like this...
print header_array['Name2']

# And dump it to disk (similar to a C struct) with
header_array.tofile('test.dat') 
```

另一方面，如果您只想访问标头中的值，只需将其保留为`dict`. 这样更简单。

* * *

根据听起来你在做什么，我会做这样的事情。我正在使用 numpy 数组来读取标题，但标题值实际上被存储为类属性（以及标题数组）。

这看起来比实际上更复杂。

我只是定义了两个新类，一个用于父文件，一个用于框架。你可以用更少的代码做同样的事情，但这为你做更复杂的事情奠定了基础。

```
import numpy as np

class SonarFile(object):
    # These define the format of the file header
    header_fields = ('num_frames', 'name1', 'name2', 'name3')
    header_formats = ('i4', 'f4', 'S10', '>I4')

    def __init__(self, filename):
        self.infile = open(filename, 'r')
        dtype = dict(names=self.header_fields, formats=self.header_formats)

        # Read in the header as a numpy array (count=1 is important here!)
        self.header = np.fromfile(self.infile, dtype=dtype, count=1)

        # Store the position so we can "rewind" to the end of the header
        self.header_length = self.infile.tell()

        # You may or may not want to do this (If the field names can have
        # spaces, it's a bad idea). It will allow you to access things with
        # sonar_file.Name1 instead of sonar_file.header['Name1'], though.
        for field in self.header_fields:
            setattr(self, field, self.header[field])

    # __iter__ is a special function that defines what should happen when we  
    # try to iterate through an instance of this class.
    def __iter__(self):
        """Iterate through each frame in the dataset."""
        # Rewind to the end of the file header
        self.infile.seek(self.header_length)

        # Iterate through frames...
        for _ in range(self.num_frames):
            yield Frame(self.infile)

    def close(self):
        self.infile.close()

class Frame(object):
    header_fields = ('width', 'height', 'name')
    header_formats = ('i4', 'i4', 'S20')
    data_format = 'f4'

    def __init__(self, infile):
        dtype = dict(names=self.header_fields, formats=self.header_formats)
        self.header = np.fromfile(infile, dtype=dtype, count=1)

        # See discussion above...
        for field in self.header_fields:
            setattr(self, field, self.header[field])

        # I'm assuming that the size of the frame is in the frame header...
        ncols, nrows = self.width, self.height

        # Read the data in
        self.data = np.fromfile(infile, self.data_format, count=ncols * nrows)

        # And reshape it into a 2d array.
        # I'm assuming C-order, instead of Fortran order.
        # If it's fortran order, just do "data.reshape((ncols, nrows)).T"
        self.data = self.data.reshape((nrows, ncols)) 
```

你会像这样使用它：

```
dataset = SonarFile('input.dat')

for frame in dataset:
    im = frame.data
    # Do something... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:19:13.697

问题似乎是那`v`是一个`int`而不是一个`tuple`。尝试：

```
arr=np.array([(k,v) for k,v in fileheader.iteritems()],dtype=["a3,a,i4,i4,i4,i4,f8,i4,i4,i4,i4,i4,i4,a10,a26,a33,a235,i4,i4,i4,i4,i4,i4"]) 
```

# c# - 如何为 IIS 上托管的 WCF 服务指定端点地址？

> ID：10838985
> 
> 赞同：3
> 
> 时间：2012-05-31T18:14:18.110
> 
> 标签：c#, .net, wcf

我有带有 basicHttpBindings 的简单 wcf 服务，并希望将其托管在 IIS 上。

但是当我指定 `<endpoint address="/myAddress" binding="basicHttpBinding" contract="Wcf.Contracts.IPublicService"/>` myAddress 时被忽略。换句话说，我期望它像 localhost:1111/myaddress/PublicService.svc 这样创建我的服务端点，但它只是通过结合 localhost 和 PublicService.svc - localhost:1111/publicservice.svc 来创建端点。

为什么我需要？我在项目中托管了一些其他服务，并希望在 localhost 之后使用不同的 url 创建它们中的每一个。（我不想将它们移动到不同的文件夹）。

**我用谷歌搜索并发现在 IIS 上托管时主机基地址被忽略，端点地址也是如此吗？**

提前致谢

```
<service name="Wcf.Services.AdminService">
    <endpoint address="/address" binding ="basicHttpBinding" contract="Wcf.Contracts.IAdminService"/>
    <endpoint address="mex" binding ="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
  <service name="Wcf.Services.PublicService">
    <endpoint address="/address1" binding="basicHttpBinding" contract="Wcf.Contracts.IPublicService"/>
    <endpoint address="mex" binding="basicHttpBinding" contract="IMetadataExchange"/>
  </service> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T18:18:59.247

假设您的服务的基地址是`http://localhost:1111/PublicService.svc`，指定`address="/myAddress"`属性将导致该端点的地址变为`http://localhost:1111/PublicService.svc/myAddress`。端点的相对路径位于服务地址*之后。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:32:57.820

我认为您的问题可能类似于 Service.svc 文件中的内容...

打开它并像这样修改其中的单行：

```
<%@ ServiceHost Language="C#" Debug="true" Service="Wcf.Services.PublicService" %> 
```

你可以按照[这个](http://blogs.msdn.com/b/amitlale/archive/2007/05/21/hosting-wcf-service-in-iis.aspx)很好的教程，我前几天刚做的......

希望能帮助到你！

# http-status-code-301 - 如何创建 301 错误？

> ID：10838986
> 
> 赞同：0
> 
> 时间：2012-05-31T18:14:22.480
> 
> 标签：http-status-code-301

我想在我的网站上创建一个 301 错误情况。当发生 301 错误时，我可以编写 htaccess 代码来重定向。但我不知道如何检查代码。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:31:01.753

301 状态码的意思是“永久重定向”。如果您有一个位于 oldpage.html 的页面并将其移动到 newpage.html，则您可以将 oldpage.html 重定向到带有 301 代码的 newpage.html。这告诉搜索引擎页面已经移动。所以你真的不应该为重定向这些页面做一个包罗万象的事情。这不像 404，所有内容都可以转到显示消息的页面。如果页面已移动，您应该指向新页面。

在 PHP 中，您可以使用`header ('HTTP/1.1 301 Moved Permanently');`设置 301 标头。我认为这应该被您的 htaccess 接收并重定向页面。

# file-upload - 使用 Dropbox 作为我网站的文件存储是否合法？

> ID：10838988
> 
> 赞同：13
> 
> 时间：2012-05-31T18:14:41.550
> 
> 标签：file-upload, load-balancing, dropbox, web-traffic

我正在接近我的托管计划的限制。我将它从 2 GB 翻倍到 4 GB，我的网站（希伯来语中一个流行的木工社区）正在接近使用人们上传的图像可用的磁盘空间。

我想知道它是否是 DropBox（或任何其他免费云主机）的**合法使用**，将其文件作为公共文件提供...即，每当有人将文件上传到我的服务器时，它将使用DropBox API 到 DropBox 服务器，文件的公共链接将存储在我的数据库中并提供给用户。

另一种选择是上传到 GoDaddy 中的托管服务器（我负担得起这些价格），但这需要编写我自己的客户端，这并不理想（一个很好的练习，但我没有时间）。

显然，该网站也产生了相当多的流量，我不会问它是否是供个人/亲密朋友使用的，我说的是每天有成千上万的点击量......

**更新**：答案和评论提到“Dropbox 公共链接有带宽限制。**免费为 20 GB/天**，专业版为 200 GB/天。” [https://www.dropbox.com/help/45](https://www.dropbox.com/help/45) - 这似乎表明只要我的带宽要求低于这个数字，那么我就很清楚......是这样吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T18:30:43.107

Dropbox 有带宽限制。我经常使用它来运行简单的静态网站进行内部测试，但它有局限性。

看看这个：[https ://www.dropbox.com/help/45](https://www.dropbox.com/help/45)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:31:36.083

查看[Rackspace Cloud Files](http://www.rackspace.com/cloud/cloud_hosting_products/files)和[Amazon S3](http://aws.amazon.com/s3/)。您可以直接热链接到文件。

或者，让您的用户使用[Flickr](http://www.flickr.com/)或[photobucket](http://photobucket.com/)等图像托管服务，并让他们提供链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:24:25.907

据我所知，Dropbox“免费”仅供私人使用。他们也有商业计划。我会考虑多花几美元升级您现有的主机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-02T12:48:32.017

无论它是否合法，Dropbox 将在 2017 年不再允许它。来自[https://www.dropbox.com/help/16](https://www.dropbox.com/help/16)：

> 公共文件夹
> 
> 对 Dropbox 公共文件夹的重要更改
> 
> 2012 年 10 月 4 日之后创建的 Dropbox 帐户将没有公用文件夹。如果您想快速共享文件，可以使用共享链接。即使您与之共享的人没有 Dropbox 帐户，共享链接也能正常工作。
> 
> Dropbox Basic（免费）用户
> 
> **> 自 2017 年 3 月 15 日起，您 Dropbox 帐户中的公共文件夹已转换为标准文件夹。默认情况下，此文件夹对您的帐户是私有的。这种转变会自动发生。**
> 
> 以下是您需要了解的内容：
> 
> 您的公共文件夹中的所有文件都将保持安全，但指向这些文件的公共链接将停止工作如果有人访问您公共文件夹中文件的链接，他们将看到一个错误页面要查看您的公共链接列表，访问 Public 文件夹 — 此文件夹中的任何文件之前都有与之关联的公共链接 Dropbox 无法将现有的公共链接转换为 Dropbox 共享链接 如果您想重新共享 Public 文件夹中的任何文件，请使用共享文件夹或共享链接 使用公共文件夹呈现 HTML 内容
> 
> 自 2016 年 10 月 3 日起，Dropbox Basic（免费）用户无法再使用公共链接在 Web 浏览器中呈现 HTML 内容。如果您是 Basic 用户，并且您创建的网站直接显示来自您的 Dropbox 帐户的 HTML 内容，则该网站将不再在浏览器中呈现。HTML 内容本身在 Dropbox 中保持安全，您可以使用我们的任何其他共享方法共享它。
> 
> **> 自 2017 年 9 月 1 日起，Dropbox Pro 和 Business 用户将无法再呈现 HTML 内容，并且公共文件夹及其共享功能将被禁用。**在此之前，Dropbox Pro 和 Business 用户可以继续使用公共链接来呈现 HTML 内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-25T21:05:25.450

我在一个流量很大的网站上经历了同样的过程，但公众没有上传。事实上，每天有很多帖子，服务器存储了很多图像。

现在......在这种情况下，我的建议是不要使用 Dropbox，而是使用另一个 CDN 或主机，以便在此过程中具有更高的可用性。DropBox 用于存储。而不是为了大流量......这样，肯定会加载缓慢和失败。所以有这个每日限制。

还有其他服务，如 cloudinary、CDN 和专门用于图像的托管，它们可以完成同样的工作，而且不会让人头疼。

# iphone - convertPoint:FromView: 并不总是返回正确的值

> ID：10838998
> 
> 赞同：0
> 
> 时间：2012-05-31T18:15:09.523
> 
> 标签：iphone, ios, uiview, mkmapview

我需要将注释的坐标从我的地图坐标系统转换为我的地图视图坐标系统。为此，我使用了 convertPoint:FromView: 方法。

它正在工作，但有时它会返回错误的值。

这是我的代码

```
- (CGFloat)relativeParentXPosition {
  NSLog(@"Point Origin: %@", NSStringFromCGPoint(self.parentAnnotationView.frame.origin));

  CGPoint parentOrigin = [self.mapView convertPoint:self.parentAnnotationView.frame.origin 
                                         fromView:self.parentAnnotationView.superview];

  NSLog(@"NEW PARENT Origin: %@", NSStringFromCGPoint(parentOrigin));

  return parentOrigin.x + self.offsetFromParent.x;
} 
```

这是输出：

> *   在职的
> 
> 点原点：{9.92118e+06, 1.2004e+07}
> 
> 新父母来源：{39, 218}
> 
> *   不工作 - 返回错误的值
> 
> 点原点：{9.92138e+06, 1.20039e+07}
> 
> 新父源：{9.92138e+06, 1.20037e+07}

有人遇到这个问题吗？我不明白为什么会这样？这是Apple的错误吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:16:01.507

我的错，我使用了错误的方法。要在视图坐标中获取注释的坐标，我们需要使用 convertCoordinate:toPointToView: 方法。

```
CGPoint parentOrigin = [self.mapView convertCoordinate:self.parentAnnotationView.annotation.coordinate toPointToView:self.mapView]; 
```

感谢@Jeffery Thomas 让我走上正轨