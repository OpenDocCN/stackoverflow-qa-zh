# StackOverflow 问答 11821000-11821999

# javascript - 从 tinysong 获取歌曲

> ID：11821000
> 
> 赞同：0
> 
> 时间：2012-08-05T23:30:11.753
> 
> 标签：javascript, jquery, json, grooveshark

[我不想通过从Grooveshark](http://grooveshark.com/)中获取的 tinysong API 获取歌曲列表，我正在通过它进行操作`$.ajax`，到目前为止我得到了这个：

```
$.ajax({
    url : 'http://tinysong.com/s/Beethoven?format=json&key='+key,
    type : 'get',
    dataType : 'jsonp',
    succes : function(response){
        console.log(response);
        $('.content').append(response);
    },
    error: function(error){
        console.warn('ERROR');
        console.warn(error);
    }
}); 
```

`key`他们分配给我的 API 密钥在哪里。我收到以下错误：

> 资源解释为脚本，但使用 MIME 类型 text/html 传输：“http://tinysong.com/s/Beethoven?format=json&key=HERE_IS_MY_KEY&callback=jQuery172021696692402474582_1344209008518&_=1344209008523”。

但是，如果我转到该网址，我确实会打印出如下结果：

> [{"Url":"http://tinysong.com/Aoxo","SongID":25802452,"SongName":"A 大调第七交响曲 Op. 92: Allegretto","ArtistID":1833, "ArtistName":"Beethoven","AlbumID":4497124,"AlbumName":"Beethoven: 9 Symphonien, Ouvert\u00fcren (1 of 6), Berstein, Leonard"},{"Url":"http://tinysong .com/jh4X","SongID":2909282,"SongName":"降E大调第五钢琴协奏曲 op. 73 'Emperor'","ArtistID":1833,"ArtistName":"Beethoven","AlbumID ":268605,"AlbumName":"The Best of Beethoven"},{"Url":"http://tinysong.com/JhLy","SongID":31825464,"SongName":"Beethoven: Piano Sonata #23 F小调，作品57，\"Appassionata\"","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":4913792,"AlbumName":"Beethoven's Greatest Hits"},{"Url":"http://tinysong.com/ 6Jk1","SongID":4925300,"SongName":"Beethoven #4: Adagio","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":842118,"AlbumName":"Beethoven: Symphonies Nos . 7 & 4"},{"Url":"http://tinysong.com/gGW0","SongID":11896153,"SongName":"F\u00fcr Elise","ArtistID":1833,"ArtistName" :"Beethoven","AlbumID":2087629,"AlbumName":"Beethoven and the Sea"}]"Beethoven","AlbumID":4913792,"AlbumName":"Beethoven's Greatest Hits"},{"Url":"http://tinysong.com/6Jk1","SongID":4925300,"SongName":"Beethoven #4: Adagio","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":842118,"AlbumName":"Beethoven: Symphonies Nos. 7 & 4"},{"Url":"http: //tinysong.com/gGW0","SongID":11896153,"SongName":"F\u00fcr Elise","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":2087629,"AlbumName": 《贝多芬与海》}]"Beethoven","AlbumID":4913792,"AlbumName":"Beethoven's Greatest Hits"},{"Url":"http://tinysong.com/6Jk1","SongID":4925300,"SongName":"Beethoven #4: Adagio","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":842118,"AlbumName":"Beethoven: Symphonies Nos. 7 & 4"},{"Url":"http: //tinysong.com/gGW0","SongID":11896153,"SongName":"F\u00fcr Elise","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":2087629,"AlbumName": 《贝多芬与海》}]com/6Jk1","SongID":4925300,"SongName":"Beethoven #4: Adagio","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":842118,"AlbumName":"Beethoven:第 7 和 4 号交响曲"},{"Url":"http://tinysong.com/gGW0","SongID":11896153,"SongName":"F\u00fcr Elise","ArtistID":1833," ArtistName":"Beethoven","AlbumID":2087629,"AlbumName":"Beethoven and the Sea"}]com/6Jk1","SongID":4925300,"SongName":"Beethoven #4: Adagio","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":842118,"AlbumName":"Beethoven:第 7 和 4 号交响曲"},{"Url":"http://tinysong.com/gGW0","SongID":11896153,"SongName":"F\u00fcr Elise","ArtistID":1833," ArtistName":"Beethoven","AlbumID":2087629,"AlbumName":"Beethoven and the Sea"}]com/gGW0","SongID":11896153,"SongName":"F\u00fcr Elise","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":2087629,"AlbumName":"Beethoven and the海”}]com/gGW0","SongID":11896153,"SongName":"F\u00fcr Elise","ArtistID":1833,"ArtistName":"Beethoven","AlbumID":2087629,"AlbumName":"Beethoven and the海”}]

我怎样才能将这些信息传递给我的 javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T02:45:17.497

您得到的“错误”只是一个警告。Tinysong 使用错误的内容类型（“text/html”）传输 JSON 响应。[您可以使用curl](http://curl.haxx.se)验证这一点，例如：

```
curl --head http://tinysong.com/s/Beethoven\?format\=json\&key\=<your key> 
```

[可以在此答案](https://stackoverflow.com/a/7009439/1351202)中找到脚本无法正常工作的解释以及问题的解决方案（另请阅读评论）。

也许您应该联系 Tinysong，报告有关内容类型的错误并请求 JSONP 支持。

# claims-based-identity - 具有自定义用户名/密码验证器和 Windows 集成身份验证的 STS

> ID：11821004
> 
> 赞同：1
> 
> 时间：2012-08-05T23:30:25.273
> 
> 标签：claims-based-identity

场景 A) 用户使用用户名和密码登录 Web 应用程序。用户名和密码根据 WCF STS 进行验证，该 STS 生成一个令牌，该令牌基本上是用户是他们所说的人的证据/证明。

场景 B) 用户在操作系统级别进行身份验证并使用其 Active Directory 令牌登录到 Web 应用程序，该令牌被委托给 WCF STS，该令牌生成一个令牌，该令牌基本上是用户是他们所说的人的证据/证明。

在场景A或B完成后，用户可能会请求与WCF服务交互的操作，该操作需要来自上述STS服务的STS令牌，用于授权用户执行请求的操作。

我可以配置一个 STS 服务来处理上述两种情况并生成相同类型的令牌作为 STS 信任用户并愿意签署其令牌的证据吗？

如果是，我需要一个样品。紧迫的

# c# - 在 RESTful WCF Web 服务中使用类库时“缺少程序集”

> ID：11821005
> 
> 赞同：1
> 
> 时间：2012-08-05T23:30:43.900
> 
> 标签：c#, wcf, iis, dll, remote-server

过去三天我一直在寻找解决方案，但似乎没有什么符合要求。首先，我是 WCF 新手——我目前正在为我本科学位的最后一年项目学习 IIS、WCF 和 REST 架构风格。

我目前正在开发一个简单的只读 Web 服务来帮助我入门，我的 Web 服务托管在远程服务器上的 LAN 内的 Windows Server 2008 R2 上的 IIS7 上。我正在通过 Visual Studio 2010 内部的 FTP 连接到我的服务器；我的 Visual Studio 解决方案由一个 WCF Web 服务项目和一个类库组成。当我将 Service.svc 中的类内联到我的服务描述中时，一切正常，但为了清楚起见，我希望我的服务合同和类保持分开。当我将我的类移动到类库中，在 Visual Studio 中引用项目并构建网站时，一切都出现了，我可以看到 .dll 被复制到我的 Web 服务器（通过远程连接验证）并且 Visual Studio 显示没有错误。但是，当我导航到一个端点时，我得到一个带有代码 CS0246 的编译错误：

我在这里错过了什么吗？

在这里重申一下我在引用 .dll 时所做的事情：

1.  添加对 Web 服务解决方案的引用（我已尝试引用项目和浏览 .dll 文件 - 均无济于事）。
2.  向 Service.svc 添加 using 语句，在其中实例化和使用我的自定义类。
3.  保存解决方案。
4.  构建 -> 构建网站（成功，没有错误，我可以在窗口底部看到 .dll 正在上传到服务器。）

任何帮助将不胜感激，如果需要更多详细信息，请询问，我觉得我在这个过程中遗漏了一些东西。

在此先感谢，安迪

# javascript - Javascript window.open 不起作用

> ID：11821009
> 
> 赞同：30
> 
> 时间：2012-08-05T23:31:00.880
> 
> 标签：javascript, ajax, twitter, window.open

好的。我正在尝试登录推特。此代码中未打开窗口。收到警报的响应不为空，并且是指向登录屏幕的链接。有任何想法吗？

```
var url = "./twitter_login.php";
var con = createPHPRequest();

con.open("POST",url,true);
con.setRequestHeader("Content-type","application/x-www-form-urlencoded");
con.send("");

var response = "";

con.onreadystatechange = function() {

    if(con.readyState==4 && con.status==200) {

        response = con.responseText;    
        alert(response);
        window.open(response,"twitter","menubar=1,resizable=1,width=350,height=500");        

    }

} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-06T01:36:13.277

如今，大多数浏览器中包含的标准弹出窗口阻止程序逻辑将阻止任何`window.open()`不是用户操作直接结果的调用。由计时器或任何异步回调（如您的 ajax 就绪函数）触发的代码将被视为不是由用户操作直接引起的，并且通常会阻止新的弹出窗口。

您可以通过临时更改浏览器的弹出窗口阻止（将其关闭）来验证正在发生的情况，然后查看它是否开始工作。

作为一种解决方法，您可能需要做的是在启动此代码线程的用户操作时创建窗口，然后在您获得 ajax 响应时将内容放入窗口中。浏览器可能会允许这样做。我知道从视觉角度来看这不太理想，但是您可以在窗口中放置一些临时内容，直到 ajax 响应出现（类似于“正在加载...”）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-10-11T08:03:01.737

刚刚有这个完全相同的问题。以防万一您想要修复它的代码。我用这个：

```
newWindow = window.open("", "_blank");

request = $.ajax({ ... my request which returns a url to load ... })

request.done((function(_this) {
        return function(data, textStatus, jqXHR) {
          return newWindow.location = data.Url;
        };
      })(this)); 
```

# jsp - 直到两次页面刷新后才检索到 portlet 会话变量

> ID：11821011
> 
> 赞同：0
> 
> 时间：2012-08-05T23:31:22.127
> 
> 标签：jsp, portlet, websphere-portal

在我的控制器`serveResource`方法中，我正在为`PortletSession`变量设置一个属性。

```
PortletSession session = request.getPortletSession();
session.removeAttribute("Letters");
session.setAttribute("Letters", "0"); 
```

我试图在 JSP 页面中检索该值，但不知何故，我在加载页面后没有立即得到它。再次刷新页面后，我得到了值。

```
<%=portletSession.getAttribute("Letters") %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:39:05.260

我认为这是预期的行为。通常`serveResource()`方法将作为 AJAX 调用的一部分被调用。`serveResource()`调用方法时，您的整个页面不会刷新。因此，即使 session 包含更新的值，您也无法看到更改，因为整个 portlet JSP 没有在服务器端再次处理。

# javascript - 逐渐旋转物体以面对一个点？

> ID：11821013
> 
> 赞同：4
> 
> 时间：2012-08-05T23:32:24.010
> 
> 标签：javascript, jquery, canvas, rotation

我正在制作一个 javascript 游戏，我希望敌舰能够向指定点旋转。然后可以从它们的角度计算它们的运动。以下旋转代码仅在船位于其目标下方和右侧时才有效。如果船在左边，它会旋转约 0 度并在那里抖动。在右上角，它不断逆时针旋转。我到底做错了什么？关于更好的方法有什么建议吗？

```
obj.angle %= 360;
// Calculate angle to target point
var targetAngle = Math.atan2(obj.mode.dest.y - obj.y, obj.mode.dest.x - obj.x) * (180 / Math.PI) + 90;
// Get the difference between the current angle and the target angle
var netAngle = Math.abs(obj.angle - targetAngle) % 360;
// Turn in the closest direction to the target
netAngle > 180 ? obj.angle += obj.shipType.turnSpeed : obj.angle -= obj.shipType.turnSpeed;
if(obj.angle < 0) obj.angle += 360;
if(obj.angle > 360) obj.angle -= 360; 
```

[我的问题与这个](https://stackoverflow.com/questions/7846775/how-to-gradually-rotate-an-object-to-face-another-turning-the-shortest-distance?rq=1)问题非常相似，它更好地解释了它，但不幸的是在 C# 中。

**编辑：**这是工作代码，对于任何可能觉得有用的人：

```
obj.angle %= 360;
var targetAngle = Math.atan2(obj.mode.dest.y - obj.y, obj.mode.dest.x - obj.x) * (180 / Math.PI) + 90;
targetAngle = (targetAngle + 360) % 360;
if(obj.angle != targetAngle)
{
    var netAngle = (obj.angle - targetAngle + 360) % 360;
    var delta = Math.min(Math.abs(netAngle - 360), netAngle, obj.shipType.turnSpeed);
    var sign  = (netAngle - 180) >= 0 ? 1 : -1;
    obj.angle += sign * delta + 360;
    obj.angle %= 360;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T06:54:41.977

几乎没有更改您的代码，它似乎可以工作：

[http://jsfiddle.net/57hAk/11/](http://jsfiddle.net/57hAk/11/)

# uitableview - 不使用 IBoutlet 获取 UItextfield 值

> ID：11821014
> 
> 赞同：0
> 
> 时间：2012-08-05T23:32:28.293
> 
> 标签：uitableview, tags, uitextfield

我知道这是一个基本问题，但我有点困惑，所以我希望你能帮助我。我有一个带有多个动态表格视图单元格的表格视图，并且在每个表格视图单元中我有多个文本字段。每个单元格都有不同的标签和文本字段，我想访问 uitextfields 值，就像你想象的那样。我的问题是，我没有将 IBoutlet 用于文本字段（这将是大量的 IBoutlet）...我正在使用 - (void)textFieldDidEndEditing:(UITextField *)textField...但我不能似乎在 IB 中建立了正确的连接，这是我的代码：

```
-(void) textFieldDidEndEditing:(UITextField *)textField
{

if (textField == [self.view viewWithTag:102]) {
    [textField resignFirstResponder];
} 
```

在此之后，我是否必须将各自的 UItexfield（和所有文本字段）连接到自己？然后，我是否必须使用编辑结束事件？...

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T17:25:31.087

我想这个问题的答案是另一个问题：你想对用户输入的文本做什么？

我假设您有某种数据模型要在其中存储数据。

如果是这样，那么当调用此函数时，您需要获取已在 textField 中的文本，并在输入时立即将其保存到您的数据模型中。

例如，您可以访问这样输入的文本：

```
-(void) textFieldDidEndEditing:(UITextField *)textField
{
    if (textField == [self.view viewWithTag:102]) 
    {
        [textField resignFirstResponder];
        yourDataModel.stringToSave = textField.text;
    }
} 
```

# jquery - jQuery/ajax 脚本添加/删除按钮类不起作用

> ID：11821016
> 
> 赞同：1
> 
> 时间：2012-08-05T23:33:13.930
> 
> 标签：jquery, ajax, class, function, click

我有以下脚本，旨在使用 ajax 更改收藏夹按钮的外观，以及将数据提交/删除到 MySQL 表：

```
$(document).ready(function() {
jQuery("input.before").click(function(){
   var $this = $(this);
   jQuery.ajax({       
      url: 'addfav.php',
      type: 'POST',
      data: {'id': $this.closest("div").attr("id"),is_ajax: 1},
      success: function(html) {
        $this.removeClass('before');
        $this.addClass('after');
      }, 
      error: function() {
        jQuery('#error').html('<div>Error! Unable to add favourite.</div>');
      }
    });
});

jQuery("input.after").click(function(){
   var $this = $(this);
   jQuery.ajax({       
      url: 'removefav.php',
      type: 'POST',
      data: {'id': $this.closest("div").attr("id"),is_ajax: 1},
      success: function(html) {
        $this.removeClass('after');
        $this.addClass('before');
      }, 
      error: function() {
        jQuery('#error').html('<div>Error! Unable to remove favourite.</div>');
      }
    });
});
}); 
```

通过单击几个按钮之一触发，即：

```
<div id="32"><input type="button" class="button before"/></div>
<div id="33"><input type="button" class="button before"/></div> 
```

脚本的第一部分按预期删除了“之前”类并添加了“之后”类，但是当我尝试单击带有“之后”类的按钮时，脚本的第二部分不起作用，即按钮的类没有改回“之前”。有人可以让我知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T23:42:41.850

您的第一个单击处理程序绑定到当时具有`before`该类的按钮，即由`jQuery("input.before")`第二个处理程序返回并且相同的项目，以便随时使用事件委托处理具有特定类的按钮的事件[`.on()`](http://api.jquery.com/on/)

```
$(document).ready(function() {
jQuery(document).on("click", "input.before", function(){
   var $this = $(this);
   jQuery.ajax({       
      url: 'addfav.php',
      type: 'POST',
      data: {'id': $this.closest("div").attr("id"),is_ajax: 1},
      success: function(html) {
        $this.removeClass('before');
        $this.addClass('after');
      }, 
      error: function() {
        jQuery('#error').html('<div>Error! Unable to add favourite.</div>');
      }
    });
});

jQuery(document).on("click", "input.after", function(){
   var $this = $(this);
   jQuery.ajax({       
      url: 'removefav.php',
      type: 'POST',
      data: {'id': $this.closest("div").attr("id"),is_ajax: 1},
      success: function(html) {
        $this.removeClass('after');
        $this.addClass('before');
      }, 
      error: function() {
        jQuery('#error').html('<div>Error! Unable to remove favourite.</div>');
      }
    });
});
}); 
```

# azure - 有什么方法可以获取我的 Azure 应用程序提供服务的大致位置吗？

> ID：11821025
> 
> 赞同：1
> 
> 时间：2012-08-05T23:34:11.627
> 
> 标签：azure, geolocation

我正在将应用程序部署到 Microsoft Azure 支持的 6 个区域，并希望了解更多关于文件从何处提供的信息，因为我正在尝试将来自世界各地的 HTTP 下载时间与该位置相关联他们被服务的地方。

不幸的是，当我通过任何常用的地理定位工具输入主机 IP 地址时，它们要么无法解析，要么全部解析到北美中心！

我可以理解为什么 MS 不想太明确地说明 http 流量的来源，但大概的位置会很有用 - 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:55:35.787

您可以在 Windows Azure 信任中心网站上找到答案：[https ://www.windowsazure.com/en-us/support/trust-center/privacy/](https://www.windowsazure.com/en-us/support/trust-center/privacy/)

亚洲：东部（香港）和东南部（新加坡） 欧洲：北部（爱尔兰）和西部（荷兰） 美国：中北部（伊利诺伊州）、中南部（德克萨斯）、东部（弗吉尼亚）和西部（加利福尼亚）

有那么近吗？

顺便说一句，从技术上讲，共有三个区域（美国、亚洲和欧洲）。同一区域内的每个数据中心称为子区域。美国的两个新数据中心于 4 月 5 日宣布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:39:09.467

根据IP获取大概位置其实很容易。只需将托管服务的 IP（解析 yourapp.cloudapp.net）与官方的[Windows Azure 数据中心 IP 范围](http://www.microsoft.com/en-us/download/details.aspx?id=29840)进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T22:02:44.980

与 ip-ranges 相关的最新博客文章：http: [//blogs.technet.com/b/keithmayer/archive/2013/08/14/windows-azure-datacenter-ip-ranges.aspx](http://blogs.technet.com/b/keithmayer/archive/2013/08/14/windows-azure-datacenter-ip-ranges.aspx)作为其他 ms-link 似乎死了……

# java - 如何对齐图片右侧的文字？

> ID：11821027
> 
> 赞同：0
> 
> 时间：2012-08-05T23:34:37.097
> 
> 标签：java, android

我在 relativeLayout 中有一个与父右侧对齐的 ImageView。

这是我的布局：

```
<RelativeLayout android:id="@+id/row" android:background="@null" style="@style/ListRow"
  xmlns:android="http://schemas.android.com/apk/res/android">

    <TextView android:textStyle="bold" android:textColor="@color/primary_text" android:text="Username" android:gravity="center_vertical" android:id="@+id/username" android:layout_width="wrap_content" android:layout_height="wrap_content" android:singleLine="true" android:layout_toLeftOf="@id/avatar" />

    <LinearLayout android:gravity="center_vertical" android:id="@+id/time_item" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_alignTop="@id/username" android:layout_alignBottom="@id/username" android:layout_alignParentLeft="true">
        <TextView android:textSize="@dimen/font_size_small" android:text="12:00AM" android:textColor="@color/secondary_text" android:gravity="center_vertical" android:id="@+id/date" android:layout_width="wrap_content" android:layout_height="wrap_content" />
    </LinearLayout>

    <RelativeLayout android:id="@+id/avatar" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="5.0dip" android:layout_alignParentRight="true">
        <ImageView android:id="@+id/picture" android:src="@drawable/ic_launcher" android:layout_width="48.0dip" android:layout_height="48.0dip" android:scaleType="center" android:adjustViewBounds="true" />
        <ImageView android:layout_width="wrap_content" android:layout_height="wrap_content" />
    </RelativeLayout>

    <TextView android:textSize="@dimen/font_size_small" android:text="aslkndalskndlaksndlaskndlaksnlansldnaslkndalsdnaslkdnls" android:textColor="@color/primary_text" android:id="@+id/body" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_toLeftOf="@id/avatar" android:layout_below="@id/username" android:lineSpacingMultiplier="1.2" />

</RelativeLayout> 
```

这是它的样子：

![得到](../Images/afeadea9bea4fb198bc7e74b0b8a9f91.png)

在开始新的文本行时，我希望文本右对齐而不是左对齐。我已经Photoshop了我想要的东西。这是我想要的：

![想](../Images/fa031cdbdb7f330393110c9ffa38396f.png)

任何人都知道我应该如何将我的布局修改为它执行此操作的位置？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T23:52:45.010

只需在您的`TextView body`.

```
android:gravity="right" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T00:09:46.533

你的身体缺少`android:gravity="right"`元素。`TextView`它应该像

`<TextView android:gravity="right"...` 这只是使文本起源于右侧`TextView`

# symfony1 - Symfony 表单值不绑定

> ID：11821031
> 
> 赞同：0
> 
> 时间：2012-08-05T23:35:45.957
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我正在为一个简单的登录模块使用 Symfony 1.4 表单。该表单非常基本，其代码如下：

```
<?php 

class LoginForm extends sfFormSymfony 
{
 public function configure()
 {
  $this->setWidgets( 
         array('username' => new sfWidgetFormInputText(),
               'password' => new sfWidgetFormInputPassword(),));
              // 'remember_me' => new sfWidgetFormSelectCheckbox(array('choices'=>array('true'=>''))),));

   $this->widgetSchema->setNameFormat('login[%s]');
   $this->setValidators(array(
         'username' =>  new sfValidatorString(array('required'=>true)),        
         'password' =>  new sfValidatorString(array('required'=>true)),
     ));
 }

} 
```

表单按预期在模板页面中呈现良好。仅供参考，我使用 $form['username']->render 方法来单独渲染我喜欢的方法，而不是回显表单。

在发布（已识别）后，我将值绑定到如下形式：

```
$this->form->bind($request->getParameter('login')); 
```

但是，它不符合条件

```
$this->form->isValid(); 
```

这两个字段都没有留空并且凭据是正确的，所以这对我来说似乎更阴险。

在执行 var_dump($this->form->getValues()); 它返回一个空数组，我认为这意味着这些值未被检索或绑定。

任何人都可以发现我可能搞砸的地方吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T07:18:07.143

从 symfony 1.3 开始，默认启用 csrf 保护。这意味着您的所有表单都会获得一个`_csrf_token`默认命名的 csrf 令牌字段 - 它是您的会话和给定表单类型所独有的隐藏字段。

如果您不与表单的其余部分一起呈现和提交此字段，它将无效 - 它检测到 csrf 攻击，所以这种方式很好。

简短的解决方法是呈现令牌字段：

```
echo $form["_csrf_token"]->render(); 
```

但更好的方法是一次性渲染所有隐藏字段（我通常在提交按钮旁边这样做）：

```
echo $form->renderHiddenFields(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T07:29:34.400

如果你真的需要，你可以使用一个小片段来显示这样的错误：

```
foreach ($this->getErrorSchema() as $field => $error) {

    if ($error instanceof sfValidatorErrorSchema) {
        foreach ($error as $field => $error) break;
    }

    echo $field . ' => ' . $error; // e.g. "Field name" => "Error message".

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T06:57:05.720

@Maerlyn 解决了这个问题。备查：

表单字段是单独呈现的，而不是使用 vanilla echo $form。因此，我没有渲染应该完成的 $form['_csrf_token']->render() 。因此登录失败。渲染 csrf_token 字段，你就可以开始了。

# html - 如果可以在 sass 中使用 html 属性吗？

> ID：11821032
> 
> 赞同：0
> 
> 时间：2012-08-05T23:36:00.830
> 
> 标签：html, sass

这个问题几乎在标题中。

我不知道这是否可能，并且似乎无法使其发挥作用，但我可能忽略了一些事情（我希望）

这是我的颜色选择功能 mixin thingie

```
=colors($color)
  @if #{$color} == 0
    background: transparent
  @if #{$color} == 1
    background: #87dcec
  @if #{$color} == 2
    background: #72d856
  @if #{$color} == 3
    background: #f7e818
  @if #{$color} == 4
    background: #f75149
  @if #{$color} == 5
    background: #303030
  @if #{$color} == 6
    background: #fff1da
  @if #{$color} == 7
    background: #75430a
  @if #{$color} == 8
    background: #0e7259 
```

这是我的`@for`

```
@for $i from 1 through 143
  li:nth-child(#{$i})
    float: left
    width: 50px
    height: 50px
    $color: #{attr(color)}
    +colors($color) 
```

所以我的 SASS 决定只使用最后一个 if 的颜色，这很奇怪，因为我什至还没有使用 8。

是的，我在 html 中有一个名为`color`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:03:28.213

SASS 只是 CSS 的扩展，因此您只能在选择器中使用 HTML 属性，如下所示：

```
.some[color] { color: $color; }  // $color is SCSS variable
.some[color=red] { color: red; } 
```

您不能从 (S)CSS 中设置（或获取）html 属性值。

但是在您的情况下，您可以只使用一组纯 CSS 类：

```
.class[color=0] { background: transparent; }
.class[color=1] { background: #87dcec; } 
```

等等，只需将它们包含在您的 SASS 样式中即可。

* * *

在[less](http://lesscss.org)中，使用时`less.js`，可以通过 JavaScript 访问 DOM 属性，参见教程中的“JavaScript 评估”：

```
@height: `document.body.clientHeight`; 
```

# javascript - javascript 初学者 - 如何获取 div 或其他 html 节点的类

> ID：11821034
> 
> 赞同：0
> 
> 时间：2012-08-05T23:36:13.553
> 
> 标签：javascript

在网页中，有一个 div 具有为其类指定的值。

现在，我有了与 div 对应的节点，如何使用节点（存储在 js 变量中）获取该 div 的类？

例子 -

```
<div class="test" id="div1">
Some random text
</div> 
```

当我拥有代表上述 div 的节点时，如何获取类值（即“test”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:42:47.593

```
var div1 = document.getElementById('div1');

console.log(div1.className); 
```

[http://jsfiddle.net/XWqu8/](http://jsfiddle.net/XWqu8/)

在 Javascript 控制台中打印：

```
test 
```

另请注意，一个`class`值可以表示多个类，例如：

```
<div class="test other oneMore" id="div1">
Some random text
</div> 
```

[http://jsfiddle.net/XWqu8/](http://jsfiddle.net/XWqu8/)

哪个打印：

```
test other oneMore 
```

# javascript - getSelection() 可以仅应用于某个元素（而不是整个文档）吗？

> ID：11821037
> 
> 赞同：3
> 
> 时间：2012-08-05T23:36:37.627
> 
> 标签：javascript, string, getselection

我正在测试该`getSelection()`方法，我希望我的程序能够在某个文本段落中获取所选文本并将其显示在 div 标签中。我使用了以下代码：

```
var txt = document.getSelection();
document.getElementById("display").innerHTML = "The text you have selected is: " + txt + "."; 
```

但是，我希望程序仅在段落本身中而不是在整个文档中进行选择。我尝试使用`document.getElementById("id").getSelection();`但没有用。

我怎样才能使它`getSelection()`只适用于某个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T23:51:34.713

这是一种方法，仅在 Chromium 19 中进行了测试（支持`textContent`, 对于 Internet Explorer`innerText`必须改为使用）：

```
function getSelectedText() {
    if (window.getSelection) {
        return window.getSelection().toString();
    } else if (document.selection) {
        return document.selection.createRange().text;
    }
    return '';
}

var b = document.getElementsByTagName('body')[0],
    o = document.getElementById('output');

b.onmouseup = function(e){
    var selText = getSelectedText(),
        targetElem = e.target.tagName.toLowerCase();
    if (selText && targetElem == 'p') {
        o.textContent = 'You selected the text: "' + selText + '" from a ' + targetElem + ' element.';
    }
};​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3QtgG/1/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T00:30:16.437

`getSelection()`只能作为 和 的方法`window`使用`document`。如果您想获得一个 Range 仅代表位于特定节点内的用户选择部分，这里有一个函数可以使用我的 Rangy 库（没有该库的代码会更长，超出我的热情现在写）：

```
function getSelectedRangeWithin(el) {
    var selectedRange = null;
    var sel = rangy.getSelection();
    var elRange = rangy.createRange();
    elRange.selectNodeContents(el);
    if (sel.rangeCount) {
        selectedRange = sel.getRangeAt(0).intersection(elRange);
    }
    elRange.detach();
    return selectedRange;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T23:46:32.810

```
function getSelected() {
    if(window.getSelection) { return window.getSelection(); }
        else if(document.getSelection) { return document.getSelection(); }
                    else {
                            var selection = document.selection && document.selection.createRange();
                            if(selection.text) { return selection.text; }
                return false;
            }
            return false;
        } 
```

用咖啡脚本写的：

```
getSelected = ->
  if window.getSelection
    return window.getSelection()
  else if document.getSelection
    return document.getSelection()
  else
    selection = document.selection and document.selection.createRange()
    return selection.text  if selection.text
    return false
  false 
```

美味的 JavaScript

# sql - TSQL 中嵌套事务抛出错误的回滚

> ID：11821043
> 
> 赞同：2
> 
> 时间：2012-08-05T23:38:06.810
> 
> 标签：sql, sql-server-2008, tsql, transactions

这是我想要实现的一个片段。我有一个嵌套事务“tran2”，我无法回滚

```
SELECT 'Before', * FROM [table] WHERE field ..

BEGIN TRAN tran1
UPDATE [table] set field ... WHERE field ..

 BEGIN TRAN tran2
    SELECT 'During', * FROM [table] WHERE field ..
    select @@trancount as 'transactioncount'

  rollback tran tran2

rollback TRAN tran1
SELECT 'After', * FROM [table] WHERE field .. 
```

给我这个错误

> 消息 6401，级别 16，状态 1，第 13 行
> 无法回滚 tran2。未找到该名称的事务或保存点。

但是当时`@@trancount`给了我2笔交易

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T23:53:42.077

而不是`begin trans tran2`，使用[`save transaction tran2`](http://msdn.microsoft.com/en-us/library/ms188378.aspx).

这会在外部事务中创建一个保存点，您可以回滚到该保存点。

# ruby - 使用 Ruby 将 SQL 结果转换为带有 ID 键的哈希

> ID：11821044
> 
> 赞同：3
> 
> 时间：2012-08-05T23:38:19.197
> 
> 标签：ruby

我有以下数组（SQL 结果）：

```
[
  {:id => 1, :field1 => "one", :field2 => "two"},
  {:id => 2, :field1 => "one", :field2 => "two"},
  ...
] 
```

我想要的是：

```
{
  1 => {:field1 => "one", :field2 => "two"},
  2 => {:field1 => "one", :field2 => "two"},
  ...
} 
```

现在我喜欢以下内容：

```
data = {}
result.each do |row|
  data[row[:id]] = {:field1 => row[:field1], :field2 => row[:field2]}
end 
```

我绝对确定这是错误的方式。用 Ruby 做这件事的最好方法是什么？有没有像**地图**或其他东西的片段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T02:10:23.750

```
Hash[arr.map { |h| [h.delete(:id), h] }] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T23:59:49.057

一条线 ：）

```
hash = arr.clone.each_with_object({}) { |e,res| res[e.delete(:id)] = e } 
```

`clone`是为了不破坏`arr`变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T23:45:08.050

像这样的东西，也许？

```
arr = [
  {:id => 1, :field1 => "one", :field2 => "two"},
  {:id => 2, :field1 => "one", :field2 => "two"}
]

hash = arr.each_with_object({}) do |el, memo|
  id = el.delete(:id)
  memo[id] = el
end

hash # => {1=>{:field1=>"one", :field2=>"two"}, 2=>{:field1=>"one", :field2=>"two"}} 
```

# javascript - 谷歌地图 - 保存动态地图

> ID：11821046
> 
> 赞同：2
> 
> 时间：2012-08-05T23:38:43.100
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在尝试使用最新的 Google Map API 创建动态地图。到目前为止一切都很顺利。我当然有一个问题：

我/你将如何保存我当前的地图？假设您使用动态标记构建地图：由于一切都是通过 JavaScript 完成的，因此我需要从文件/数据库中获取/设置这些值。

我正在考虑将整个 google.map.Markers 输出为 JSON 并将其作为字符串发送到数据库，但是如果我有大约 100 个地方，我不确定它会如何，我很担心效率。

这是唯一的方法吗？我是否正确思考？基本上，您的网站用户可以在地图上放置一个标记，然后当然需要确认。确认后，该标记必须位于地图的最新“版本”中，因此我必须从/到数据库/文件中获取该信息。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T23:49:58.763

我正在创建类似的应用程序，并以这种方式实现它：

我有一个`Marker`表，其中包含我在标记中使用的每个属性的列（例如纬度、经度、名称、描述、类型等）。当有人添加标记时，我只是将标记的属性保存到数据库中. 下次我想显示标记时，我只是从数据库中获取属性，将它们编码为 JSON 并附加到页面。内页我有 JS 抓取这些属性并在地图内创建标记。伪代码：

```
//this is generated dynamically from DB.
var markers = [
                {lat:115416,lng:26411},
                {lat:115416,lng:26411}
              ];

//this is static, just grabs the dynamic bit and puts it on the map:
for (var i = 0; i < markers.length; i++){
   //creates a marker object
   var marker = new Marker({lat:markers[i].lat, lng:markers[i].lng })
   //displays it on the map
   map.addMarker(marker);
} 
```

这样做的好处是您在数据库中的数据独立于地图实现，例如，如果将来您决定迁移到苹果地图并且它具有不同的实现，您可以编写不同的 JS 来处理数据。您也可以对其进行查询，例如，您可以通过查看 lat 和 lang 等来查询附近的地方。

# objective-c - 在 Mac OSX 中检测和显示 USB 摄像头

> ID：11821048
> 
> 赞同：1
> 
> 时间：2012-08-05T23:39:01.977
> 
> 标签：objective-c, macos

我想知道如何检测连接到我的 Mac 的任何网络摄像头并将其显示在我的 Mac OSX 应用程序上？`/dev`我应该对连接的设备进行路径搜索吗？如果是这样，我将如何读取端口的输出或激活外国相机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:54:40.083

您应该为此使用高级 API。如果您的目标是 OS X 10.7 及更高版本，请使用 AVFoundation 的`AVCaptureSession`类。如果您需要支持 Mac OS X 10.6 及更早版本，请使用 QuickTime 的`QTCaptureDevice`类。两者都在[http://developer.apple.com/mac/](http://developer.apple.com/mac/)上有详细记录。

# php - 即使通过了参数，也缺少参数？

> ID：11821050
> 
> 赞同：2
> 
> 时间：2012-08-05T23:39:14.293
> 
> 标签：php, mysql, oop, pdo, php-5.3

我在使用这个脚本时遇到了问题。这是一个图像上传脚本，我收到了两个相同的错误：

> 警告：DoUpload::doUpload() 缺少参数 1，在第 8 行的 /var/www/vhosts/mysite.net/httpdocs/mp/upload.php 中调用并在 /var/www/vhosts/mysite.net/ 中定义第 26 行的 httpdocs/mp/includes/classes.php 文件已上传！警告：DoUpload::doUpload() 缺少参数 1，在第 10 行的 /var/www/vhosts/mysite.net/httpdocs/mp/upload.php 中调用并在 /var/www/vhosts/mysite.net/ 中定义第 26 行 httpdocs/mp/includes/classes.php 上传文件时出错！

但正如您在upload.php 中看到的，我传递了一个参数：$_FILES 数组。

我该怎么办？（不寻找任何人来重写任何东西，我只需要一些关于我做错了什么的指导。:)）

**类.php**

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 'on');
require('config.php');

// Connect to database
// Does not handle anything else
class DatabaseCon {
    public $dbh;

    // Method to connect to database
    function dbConnect($config) {
        try {
            $this->dbh = new PDO("mysql:host=" . $config['host'] . ";dbname=" . $config['dbname'], $config['dbuser'], $config['dbpass']);
            $this->dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT);
        } catch (PDOException $e) {
            echo $e->getMessage();
        }
    }
}

class DoUpload {
    private $target_path = 'i/';
    public $_FILES;

    public function doUpload($_FILES) {
        $this->target_path .= basename($_FILES['file']['name']);

        if (move_uploaded_file($_FILES['file']['tmp_name'], $this->target_path)) {
            echo "The file has been uploaded!";
        }
        else {
            echo "An error occurred when uploading the file!";
        }
    }

} 
```

**上传.php**

```
<?php
ini_set('display_errors', 1);
require_once('includes/config.php');
require_once('includes/classes.php');

$db = new DatabaseCon();
$db->dbConnect($config);

$upload = new DoUpload();

$upload->doUpload($_FILES);

$sth = $db->prepare("INSERT INTO images (filename) VALUES (?)");
$sth->bindParam(1, $_FILES['file']['tmp_name']);
$sth->execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:43:13.607

`$_FILES`并不总是被定义，IIRC。如果您不上传任何内容或只是点击页面上的提交按钮而不传递任何文件或上传任何内容，则它将为空，因此会导致错误。

此外，`$_FILES`它是一个超全局 PHP 变量，我不会在您自己的函数（参数名称）中重复使用该确切名称。不确定 PHP 将如何表现。

似乎 PHP 也反对它：

> 注意：变量变量 超全局变量不能用作函数或类方法中的变量变量。

我想将它用作方法参数意味着它是一个可变变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T23:45:19.593

错误信息没有说谎。如果它显示*“缺少 DoUpload::doUpload() 的参数 1”*，则该参数丢失。

因此，例如，如果`$_FILES`未定义变量，您将收到该错误。然而，作为一个超全局，它应该被定义——除非你在 PHP 的配置中禁用了文件上传。

但是，也可以取消设置它，然后它就没有被定义。所以从技术上讲，发生这种情况可能有很多原因，这需要进一步调试。

另外请记住，这`$_FILES`是一个所谓的超全球。所以不要像这样（！）命名你的函数参数：

```
 ...
    public function doUpload($_FILES) {
                             ^^^^^^^ 
```

不行。请参阅PHP Superglobals [^(*Docs*)](http://de.php.net/manual/language.variables.superglobals.php)[的概述](http://de.php.net/manual/language.variables.superglobals.php)*。*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T23:46:22.700

$_FILES 是一个超全局的，这意味着无论范围如何，它都可用于脚本的任何部分。您不需要将任何参数传递给您的 doUpload 方法，并且您仍然可以在方法定义中使用 $_FILES 数组。

不知道这是否是导致问题的原因，但只是提醒一下。*

# jquery - 为什么 jQuery 效果在过渡时不影响相关元素？

> ID：11821056
> 
> 赞同：1
> 
> 时间：2012-08-05T23:41:21.163
> 
> 标签：jquery, jquery-ui

我有这个演示，其中有四个相对于彼此定位的盒子。当一个盒子长大时，我希望其他盒子调整它们的位置。在演示中，如果您将鼠标悬停在第一个框上，则过渡会展开该框。只有在它结束后，其他盒子才会跳到正确的位置。

如何使框与过渡一起移动？

```
$('body').on('mouseover', '#f', function (e) {
        $($(this)).effect("size", { to: { width: 181, height: 266} }, 1000);
    }); 
```

​</p>

[http://jsfiddle.net/XS93k/](http://jsfiddle.net/XS93k/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:51:39.673

这成功了...

```
$('body').on('mouseover', '#f', function (e) {
           $(this).animate({
    height: '266px',
    width: '181px'
  }, 1000, function() {
    // Animation complete.
  }); }); 
```

# build - 使用团队基础服务的自动构建安装程序

> ID：11821064
> 
> 赞同：2
> 
> 时间：2012-08-05T23:42:51.937
> 
> 标签：build, installation, installshield, tfsbuild, azure-devops

我已经开始为一个小项目使用[Microsoft Team Foundation Service](https://tfspreview.com/)（云中的 TFS，以下**简称 TFService**）的预览版，并且我目前正在使用 TFService 中包含的在线构建服务来设置构建。

我想要做的是添加某种安装程序。我以前使用过 InstallShield Limited Edition、WIX 和 Inno Setup，如果可能的话，我想继续使用其中的一种。

我之前已将 Inno Setup 集成为构建过程 (TFS 2010) 的一部分。这涉及在构建计算机上安装 Inno Setup，并添加自定义构建任务以运行 inno 设置脚本。最后一部分应该也可以使用 TFService，因为可以创建自定义构建过程模板。

但是，我意识到安装诸如 Inno Setup 或 InstallShield 之类的任何东西都不适用于 TFService，因为无法在构建计算机上安装任何第 3 方软件（它只是在某些我无法访问的未知虚拟计算机上运行的云服务） .

所以我的问题是；有没有办法在 TFService 上运行的构建过程中自动创建安装程序？例如，构建服务是否能够开箱即用地构建 installshield 项目（毕竟 Visual Studio 中包含许可证）？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:31:19.320

我有一些尝试让 WiX 和 InstallShield 使用他们的托管构建代理与 Microsoft TFS Preview 云服务一起工作的经验。在这些代理上，您没有管理员权限，也无法安装软件。

这目前排除了必须安装的 InstallShield。

但是，可以将 WiX 二进制文件检查到源代码管理中，并将它们作为构建的一部分拉下来。

WiX 使用 .wixproj 文件 (MSBuild) 来定义他们的项目编译活动。这引用了以这种方式部署时不存在的目标文件和其他属性（引用注册表值）。一点点黑客攻击将使所有这些属性解析为可行的值。

您可能仍然遇到的一个问题（我在想 TFS 管理的构建环境）是您可能必须配置您的项目以跳过 MSI ICE 验证套件。在构建机器上，我玩的 windows 安装程序服务被彻底禁用，这阻止了测试运行。

# javascript - FT 地图在 Blogger 中不起作用

> ID：11821065
> 
> 赞同：0
> 
> 时间：2012-08-05T23:42:52.553
> 
> 标签：javascript, google-maps, blogger, google-fusion-tables

我在我的博客上发布了一张 FT 地图。为此，我使用了以下代码：

[http://fusion-tables-api-samples.googlecode.com/svn/trunk/FusionTablesLayerWizard/src/embed_google_site.html](http://fusion-tables-api-samples.googlecode.com/svn/trunk/FusionTablesLayerWizard/src/embed_google_site.html)

但不幸的是，GMaps 的地图画布消失了，只显示了 FT 图层。链接在这里：

[http://geografiaesegurancapublica.blogspot.com.br/](http://geografiaesegurancapublica.blogspot.com.br/)

有没有可能以某种方式解决这个问题？在 Blogger 中拥有 FT 地图真是太棒了！

顺便说一句，我不想​​使用 iframe ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T03:51:31.490

今晚与 Daniel 一起浏览了其中的一些内容……[在 Wordpress 中使用类似于此解决方案](https://stackoverflow.com/questions/8948864/fusiontableslayer-hides-the-underlying-map-on-a-wordpress-page#answer-8955577)的方法似乎奏效了。

> 具体来说， background-color 设置会导致覆盖的 Fusion Tables 图层以不透明背景绘制，然后隐藏底层地图。您需要在样式表中定义一个新类（我们称之为“地图”），以绘制具有透明背景的图像......

所以添加一个地图img类......

```
<style>
.map img {background-color: transparent;}
#map-canvas { width:400px; height:450px; }
</style> 
```

...然后在该类中包装地图脚本和 map_canvas div 似乎已经成功了。任何关于另一种方法的建议表示赞赏......

克里斯·K。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:16:07.857

也许这个论坛答案专注于特定帖子中的 javascript 可以提供帮助： http: [//forums.digitalpoint.com/showthread.php?t=853681#post7916209](http://forums.digitalpoint.com/showthread.php?t=853681#post7916209)

-丽贝卡

# ruby-on-rails - 您如何在 Ruby on Rails 中为 Mongoid 播种关系？

> ID：11821068
> 
> 赞同：2
> 
> 时间：2012-08-05T23:43:22.593
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在尝试使用 Ruby on Rails、Mongo 创建一个小型游戏服务器，使用 Mongoid 作为 ORM，并使用 Devise 进行身份验证。我正在尝试修改 db/seeds.rb 以播种多个用户和游戏文档。

您如何在两个 Mongo/Mongoid 关系之间创建种子？

我有**用户**和**游戏**。用户**有_many** Games。我找到了为“embeds_many”和“embedded_in”创建种子数据库的示例，但没有为 has/belongs 创建种子数据库的示例。如果这是正确的架构，后续将是（有第三种模型“Turns”将嵌入“游戏”中。

```
class Game
  include Mongoid::Document
  belongs_to :user
  embeds_many :turns

  field :title, type: String
  field :user_id, type: Integer
  field :current_player, type: Integer
end

class User
  include Mongoid::Document
  has_many :games

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  ## Database authenticatable
  field :email,              :type => String, :default => ""
  field :encrypted_password, :type => String, :default => ""

  validates_presence_of :email
  validates_presence_of :encrypted_password

  field :name                 
  validates_presence_of :name
  validates_uniqueness_of :name, :email, :case_sensitive => false
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me
  ...
  ... bunch of fields to support devise gem 
```

结尾

我尝试了两种方法来完成这项工作，但都没有在数据库中创建关系：

```
puts 'EMPTY THE MONGODB DATABASE'
::Mongoid::Sessions.default.drop

puts 'SETTING UP DEFAULT USER LOGIN'
user = User.create! :name => 'First User', :email => 'user@example.com', :password => 'please', :password_confirmation => 'please'
puts 'New user created: ' << user.name

game = Game.create! :title => 'First Game', :user_id => user._id, :current_player => user._id
puts 'New game created: ' << game.title
user.games.push(game)
user.save

game2 = Game.create(:title => 'Foo Game', users: [
  User.create(:name => 'd1', :email => 'd1@example.com', :password => 'd', :password_confirmation => 'd'),
  User.create(:name => 'd2', :email => 'd2@example.com', :password => 'd', :password_confirmation => 'd'),
  User.create(:name => 'd3', :email => 'd3@example.com', :password => 'd', :password_confirmation => 'd')
  ])
puts 'Second game created: ' << game2.title 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T11:53:24.753

看起来您正在手动尝试创建关系。`field :user_id, type: Integer`从游戏模型中删除并 尝试`user.games.create!(title: "First Game")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:35:44.903

添加以下代码而不是 `belongs_to :games`在 Game 类中：并将User 类
`embedded_in :user, :inverse_of => :game`
替换为`has_many :games`
`embeds_many :games`

# jquery - 为什么 mouseenter 动画会附加到子级而不仅仅是父级？

> ID：11821073
> 
> 赞同：0
> 
> 时间：2012-08-05T23:43:44.433
> 
> 标签：jquery, animation, mouseenter

我有一个 jquery 动画，它是由父级 () 上的 mouseenter 触发的，但是如果用户“摆动”子级 () 上的鼠标，则动画会闪烁，就好像它在 mouseout 和 mouseenter 之间切换一样。

在父级上调用 mouseenter。为什么它也会附着在孩子身上，我可以防止这种情况发生吗？

例子：

[http://jsfiddle.net/uqgz9/](http://jsfiddle.net/uqgz9/)

我调查了 .stopImmediatePropagation(); 和 .stopPropagation(); 我认为这可能是正确的方向，但不能完全得到我需要的互动。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:51:21.113

使用[`.mouseleave()`](http://api.jquery.com/mouseleave/)代替`.mouseout()`

[http://jsfiddle.net/uqgz9/4/](http://jsfiddle.net/uqgz9/4/)

```
var imgW;

$('.brand-box-item').mouseenter(function(){
    if($(this).find('img').is(':animated') === false)
        imgW = $(this).find('img').width();        
    $(this).find('img').stop().animate({'width':'0','margin-left':(imgW/2)+'px'},function(){
        $(this).css({'margin-top':'-40px'});
        $(this).stop().animate({'width':imgW+'px','margin-left':'0'});
    });
});

$('.brand-box-item').mouseleave(function(){
    $(this).find('img').stop().animate({'width':'0','margin-left':(imgW/2)+'px'},function(){
        $(this).css({'margin-top':'0'});
        $(this).animate({'width':imgW+'px','margin-left':'0'});
    });
}); 
```

*“mouseleave 事件与 mouseout 处理事件冒泡的方式不同。如果在此示例中使用 mouseout，则当鼠标指针移出 Inner 元素时，将触发处理程序。这通常是不受欢迎的行为。mouseleave 事件另一方面，只有当鼠标离开它所绑定的元素而不是后代元素时才会触发它的处理程序。所以在这个例子中，当鼠标离开外部元素而不是内部元素时触发处理程序。”* -jQuery 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T23:49:42.697

如果将此代码添加到事件中，如果目标元素不是选择器的一部分，它将停止事件：

```
if (!$(e.target).is(this)) {
    return false;
} 
```

**演示：http: [//jsfiddle.net/uqgz9/3/](http://jsfiddle.net/uqgz9/3/)**

该事件仍然会触发，因为鼠标越过父元素的边框，这会很快触发该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T00:48:24.987

@nbrooks 在接受的答案中所说的内容以及代码将简化如下：

```
$('.brand-box-item').on('mouseenter mouseleave', function() {
    var imgW,
        $img = $(this).find('img');
    if (!$img.is(':animated')) {
        imgW = $img.width();
        $img.stop().animate({
            'width': 0,
            'margin-left': imgW / 2
        }, function() {
            $img.css({
                'margin-top': -40
            }).stop().animate({
                'width': imgW,
                'margin-left': 0
            });
        });
    }
}); 
```

**[演示](http://jsfiddle.net/uqgz9/6/)**

在 IE9 和 Opera 12.01 中测试

# c - 尝试使用函数编写基本的主程序

> ID：11821076
> 
> 赞同：1
> 
> 时间：2012-08-05T23:44:38.497
> 
> 标签：c, assembly, mips, mips32, pcspim

我正在尝试编写一个函数来将单词从源内存复制到目标内存。

我已经编写了函数，但我在执行代码时遇到了困难。它给了我`execption 4`一个错误

```
.data    
.text      
main:

.setnoreorder      
top: beq $a2,0,done 
lw $t1,($a0) 
sw $t1,($a1) 
add $a0,$a0,4 
add $a1,$a1,4 
j top     
sub $a2,$a2,1

done:   
jr  $ra     #return to the main program 
add $0, $0, $0  #nop 
```

我想编写一个调用此函数的主程序，将 800 个字从地址 0x50000 复制到内存中的 0x90000。但是当我在 $a0-$a2 中添加值并运行代码时它不起作用。有谁知道如何修理它。（我正在将 C 代码转换为 MIPS，这就是我包含 C 标记的原因

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:20:56.850

```
 .text                       # code starts here 
main:                           # required label
    la      $a0,dest            # point to destination
    la      $a1,srce            # point to source
    li      $a2,1000            # move this many words 
    jal     block_copy          # call the routine 
    nop
    li      $v0,10
    syscall

###############################################################################
#   block copy - moves $a3 words from $a1 to $a0
#
#   register usage:
#       $a0 address of destination 
#       $a1 address of source
#       $a2 block size (number of words to move)
#       $v0 return code (0 means no troubles)
#
block_copy:

    move        $v0,$a2         # counter/rc 
bc_loop:
    lw          $t0,0($a1)      # no DMA here
    sw          $t0,0($a0)      # we have to move a word at a time 
    addiu       $a0,$a0,4       # point to next word in destination
    addiu       $a1,$a1,4       # point to next word in source
    addiu       $v0,$v0,-1      # decrement counter 
    bgtz        $v0,bc_loop     # keep on moving if counter is positive 
    jr          $ra             # return to caller
###############################################################################

    .data 
dest:
    .word       9:1000          # destination 1000 words (all zeroes)
srce:
    .word       0:1000          # source 1000 words (all nines) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:25:31.377

那不应该是：

```
sub $a2,$a2,1
j top 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:22:56.703

你在两个地方显示了一个延迟槽，这里

```
j top     
sub $a2,$a2,1 
```

和这里

```
done:   
jr  $ra     #return to the main program 
add $0, $0, $0  #nop 
```

但显然不在这里：

```
top: beq $a2,0,done 
lw $t1,($a0) 
```

也许问题在于，beq 之后的加载实际上是一个延迟槽，并且即使在 $a2 为零（并且采用分支）时也正在执行 - 即使在计数时，您也在 ($a0) 处从内存加载为零 - 可能访问无效内存并导致异常。

# macos - 当 Chrome 在 Mac 上“打开”时运行代码

> ID：11821079
> 
> 赞同：0
> 
> 时间：2012-08-05T23:45:04.900
> 
> 标签：macos, google-chrome-extension

我正在编写一个扩展程序，当 Chrome 首次运行时会打开一个选项卡，从技术上讲，这意味着将代码放在后台页面中，这听起来很简单，并且在 Windows 和 Linux 中也可以正常工作，尽管我还没有测试过。

问题出在 Mac 上，当用户单击左上角的关闭按钮时，它实际上并没有完全关闭 Chrome。要完全关闭 Chrome，您必须强制退出它，这是人们通常不会做的事情。

所以这意味着当用户第一次“打开”chrome时，我需要依靠其他一些事件来触发代码。有谁知道这可能是什么？我想我可以为每个选项卡的创建事件添加一个侦听器并检查选项卡的数量或类似的东西，但我正在寻找一个轻量级的解决方案。有任何想法吗？

更新：一个想法是我们使用 chrome.windows.onCreated 事件并检查是否没有其他窗口打开。这是最好的方法，还是有人能想到更有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:50:56.943

使用两个事件和一个计数器。因为窗口打开/关闭比较少见，所以这应该不是问题：

*   [`onCreated`](http://code.google.com/chrome/extensions/windows.html#event-onCreated)，增加计数器，并验证值。
*   [`onRemoved`](http://code.google.com/chrome/extensions/windows.html#event-onRemoved), 减少计数器。

# ocaml - Ocaml 的命名参数

> ID：11821084
> 
> 赞同：9
> 
> 时间：2012-08-05T23:45:57.453
> 
> 标签：ocaml, currying, named-parameters

试图了解 Ocaml 的命名参数机制。我了解基础知识，但[文档](http://caml.inria.fr/pub/docs/manual-ocaml/manual006.html#htoc37)显示了一个这样的示例：

```
# let f ~x ~y = x - y;;
val f : x:int -> y:int -> int = <fun>

# let x = 3 and y = 2 in f ~x ~y;;
- : int = 1 
```

在应用程序中仅使用波浪号时到底发生了什么？它只是 的简写`~x:x`，类似于定义吗？如果是这样，有人可以解释为什么会这样：

```
# ListLabels.fold_left;;
- : f:('a -> 'b -> 'a) -> init:'a -> 'b list -> 'a = <fun>

# let add = (+) and i = 0 
in ListLabels.fold_left ~add ~i [1;2;3];; 
```

生产

```
- : f:((add:(int -> int -> int) -> i:int -> 'a) ->
   int -> add:(int -> int -> int) -> i:int -> 'a) ->
init:(add:(int -> int -> int) -> i:int -> 'a) -> 'a = <fun> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T07:40:02.623

该男子说“请注意，像 ListLabels.fold_left 这样的结果类型是类型变量的函数永远不会被视为完全应用。”

这是您的示例中发生的情况。小心它有点牵扯。

```
# ListLabels.fold_left;;
- : f:('a -> 'b -> 'a) -> init:'a -> 'b list -> 'a = <fun> 
```

只是经典用途：接受`ListLabels.fold_left`3 个参数，即一个函数标记`f`，一个初始化器`init`和一个列表。

现在，在

```
let add = (+) and i = 0 
in ListLabels.fold_left ~add ~i [1;2;3];; 
```

该应用程序`ListLabels.fold_left ~add ~i [1;2;3]`被认为是不完整的（正如该男子所说）。这意味着``ListLabels.fold_left`首先接收其未命名的参数，`[1;2;3]`并返回一个类型为 的函数`f:('a -> int -> 'a) -> init:'a -> 'a`。让我们称这个函数为 foo。

由于您提供了两个命名参数，标记为`add`和`i`，因此类型`'a`被推断为函数类型，类型为`add:'c -> ~i:'d -> 'e`。

根据*变量* `add`和`i`的类型，类型`'c`必须是`int -> int -> int`，而且`'d`必须是`int`。

替换类型中的那些值`'a`，我们得出类型`'a`是`add:(int -> int -> int) -> i:int -> 'e`。并将其替换为 foo 的类型（我很高兴有复制粘贴 ;-)，它的类型是

```
f:((add:(int -> int -> int) -> i:int -> 'e)
    -> int
    -> (add:(int -> int -> int) -> i:int -> 'e))
-> init:(add:(int -> int -> int) -> i:int -> 'e)
-> (add:(int -> int -> int) -> i:int -> 'e) 
```

删除不必要的括号，并将 alpha 转换（即重命名）`'e`为`'a`，我们得到

```
f:((add:(int -> int -> int) -> i:int -> 'a)
    -> int
    -> add:(int -> int -> int) -> i:int -> 'a)
-> init:(add:(int -> int -> int) -> i:int -> 'a)
-> add:(int -> int -> int) -> i:int -> 'a 
```

那是 foo 的类型。但请记住，您正在向 foo 传递两个参数，分别是标记`~add`和`~i`。所以你最后得到的值不是 type`add:(int -> int -> int) -> i:int -> 'a`而是 type `'a`。编译器返回的示例的整个类型是

```
f:((add:(int -> int -> int) -> i:int -> 'a)
    -> int
    -> add:(int -> int -> int) -> i:int -> 'a)
-> init:(add:(int -> int -> int) -> i:int -> 'a)
-> 'a 
```

# ajax - 在 FW1 中仅使用控制器而没有视图

> ID：11821089
> 
> 赞同：4
> 
> 时间：2012-08-05T23:46:46.997
> 
> 标签：ajax, coldfusion, fw1

我有一个 Ajax 请求，该请求将一些数据发送到一个页面，并根据数据是否被保存来期望返回一个真值或假值。在我的控制器中，我做所有事情并将内容设置为 true 或 false 值。我真的不想创建一个视图只是为了输出 1 个变量，所以我想知道是否有一种方法我不必使用视图而只使用控制器来输出简单的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T07:47:59.563

我相信您不能完全禁用视图，但有一个非常简单的解决方法：您可以创建一个视图并将其用于许多操作。

假设我们已经创建了 view `views/main/ajax.cfm`，里面可能有什么？显然，最简单的方法是：

```
<cfoutput>#HTMLEditFormat(rc.response)#</cfoutput> 
```

我个人喜欢返回 JSON，如果需要，它允许我拥有`status`字段和数据。这样我的视图看起来像这样：

```
<cfheader name="Content-Type" value="application/json" />
<cfoutput>#SerializeJSON(rc.response)#</cfoutput> 
```

无论如何，现在在我们的行动中，我们需要做这样的事情：

```
// prevent displaying the layout
request.layout = false;

// force special view
variables.fw.setView("main.ajax");

// init response (according to the choice made earlier)
rc.response["status"] = "OK";
rc.response = ""; 
```

* * *

还有一个问题。有时您不希望直接访问 AJAX 页面（例如在浏览器中打开），或者反之亦然——希望在访问时进行一些调试。

CFWheels 框架中有一个很酷的助手`isAjax`，很容易移植到 FW/1。它可以像向控制器添加这样的方法一样简单：

```
/*
* Check if request is performed via AJAX
*/
private boolean function isAjax() {

    return (cgi.HTTP_X_REQUESTED_WITH EQ "XMLHTTPRequest");

} 
```

实际上，上面的设置代码也是我的应用程序中的辅助方法：

```
/*
* Set up for AJAX response
*/
private struct function setAjax() {

    // prevent displaying the layout
    request.layout = false;

    // force special view
    variables.fw.setView("main.ajax");

    local.response["status"] = "OK";

    return local.response;

} 
```

所以在我的操作代码中，整个检查看起来像这样，非常紧凑和方便：

```
if (isAjax()) {
    rc.response = setAjax();
}
else {
    return showNotFound();
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T08:35:23.357

你不能直接从控制器输出：它的工作只是调用模型并将数据传递给视图，所以你需要一个视图模板来进行输出。

但是，您可以避免使用框架的**setView()**方法为每个控制器方法创建单独的视图。这允许您覆盖约定并将单个视图应用于多个控制器方法。因此，您可以设置一个通用的“ajax 视图”，然后使用它从任何控制器输出数据：

**意见/主要/ajax.cfm**

```
<!---Prevent any layouts from being applied--->
<cfset request.layout=false>
<!--- Minimise white space by resetting the output buffer and only returning the following cfoutput --->
<cfcontent type="text/html; charset=utf-8" reset="yes"><cfoutput>#rc.result#</cfoutput> 
```

**控制器.cfc**

```
function init( fw )
{
variables.fw=arguments.fw;
return this;
}

function getAjaxResponse( rc )
{
    rc.result=1;
    fw.setView( "main.ajax" );
}

function getAnotherAjaxResponse( rc )
{
    rc.result=0;
    fw.setView( "main.ajax" );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T08:27:41.007

您可以在 Application.cfc 中使用 onMissingView 来处理 ajax 调用的响应，这样您就不需要在控制器方法中执行任何额外的逻辑。

```
// Application.cfc 
function onMissingView(rc) {
  if(structKeyExists(rc, "ajaxdata") && isAjaxRequest()) {
    request.layout = false;
    content type="application/json";
    return serializeJSON(rc.ajaxdata);
  }
  else {
    return view("main/notfound");
  }
}

function isAjaxRequest() {
  var headers = getHttpRequestData().headers;
  return structKeyExists(headers, "X-Requested-With") 
         && (headers["X-Requested-With"] eq "XMLHttpRequest");
}

// controller cfc
function dosomething(rc) {
  rc.ajaxdata = getSomeService().doSomething(); 
} 
```

这将检查请求上下文是否具有 ajaxdata 键，并且是真正的 ajax 请求，然后返回序列化数据。如果没有，则呈现 main.notfound 视图

# php - 解析包含自定义条件的纯文本

> ID：11821095
> 
> 赞同：1
> 
> 时间：2012-08-05T23:48:38.723
> 
> 标签：php

我想这是我正在寻找的一种奇怪的东西。

我有以下文本字符串：

```
$string = "The compass is pointing <north|south|east|west> towards <London|Paris|Rome>"; 
```

我想以某种方式解析它以获得以下任何输出：

*   指南针向北指向巴黎
*   指南针向南指向伦敦
*   指南针向东指向罗马
*   指南针向东指向伦敦
*   等等。

对于文本字符串中的每一组 < >，我需要将内容转换为一个数组（使用`explode("|",$string)`？），然后`array_rand`在该数组上运行以获取我们将显示的选项的键，然后读取数组并返回该值。

问题是，我几乎没有文本解析的经验，但我猜你会`preg_replace`在这类问题中使用。

如果有人可以帮助我入门，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:59:35.297

您可以使用[`preg_replace_callback()`](http://php.net/preg_replace_callback)来执行选择随机替换的函数。

```
$string = "The compass is pointing <north|south|east|west> towards <London|Paris|Rome>";

$callback = function ($match) {
    $opts = explode('|', $match[1]);
    return $opts[array_rand($opts)];
};

echo preg_replace_callback('/<(.+?)>/', $callback, $string); 
```

*[工作示例](http://codepad.viper-7.com/dMG1Yp)*

模式匹配`<`、任何东西 ( `.+`) 和`>`. “[惰性”量词](http://www.regular-expressions.info/repeat.html) `?`在`+`找到最短匹配时停止，而不是“贪婪”并寻找最长的匹配（这是默认行为）。没有它，它会一直匹配到最后一个`>`，这太远了。

`( )`创建一个子模式，所以 while`$match[0]`将是整个模式（包括`< >`）匹配的内容，将`$match[1]`只包含子模式（没有`< >`）。

每次找到匹配项时都会调用回调函数，它完全按照您`explode()`的描述执行 - 选项列表并返回一个随机选项。然后返回值替换原始匹配。

# javascript - ArrayBuffer 和 Blob 有什么区别？

> ID：11821096
> 
> 赞同：83
> 
> 时间：2012-08-05T23:49:00.387
> 
> 标签：javascript, html

我正在阅读[http://www.html5rocks.com/en/tutorials/file/xhr2/](http://www.html5rocks.com/en/tutorials/file/xhr2/)并试图找出 an`ArrayBuffer`和 a之间的区别`Blob`。

两个容器不是由位组成的吗？因此，不能以多种方式查看两个容器（如 32 位块、16 位块等）吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2016-10-10T05:00:24.833

**概括**

除非您**需要编写/编辑**（使用`ArrayBuffer`）的能力，否则**`Blob`格式可能是最好**的。

**细节**

我是从[*另一个*html5rocks 页面提出这个问题的。](https://www.html5rocks.com/en/tutorials/websockets/basics/)，我发现[@Bart van Heukelom 的评论](https://stackoverflow.com/questions/11821096/what-is-the-difference-between-an-arraybuffer-and-a-blob#comment41489269_11821109)很有帮助，所以我想在这里将它们提升为答案。

我还找到了特定于对象`ArrayBuffer`的有用资源。`Blob`总结：**尽管强调`Blob`不可变/“原始数据”`Blob`对象很*容易使用***.

比较/对比`ArrayBuffer`vs的资源`Blob`：

*   可变性
    *   an`ArrayBuffer`可以**更改**（例如使用 a [`DataView`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView)）
    *   a`Blob`是**不可变的**
*   内存中的源/可用性
    *   引用[Bart van Heukelom 的话](https://stackoverflow.com/questions/11821096/what-is-the-difference-between-an-arraybuffer-and-a-blob#comment41489269_11821109)：

    > *   ArrayBuffer 位于内存中，**可**用于操作。
    > *   Blob 可以位于磁盘、高速缓存和其他**不易获得的位置**

*   接入层
    *   `ArrayBuffer`将需要**一些访问层**，例如[类型化数组](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays)
    *   `Blob`可以直接传递给其他函数[`window.URL.createObjectURL`](https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL)，如[OP's URL](http://www.html5rocks.com/en/tutorials/file/xhr2/)中的示例所示。
        *   但是，正如[Mörre 指出](https://stackoverflow.com/questions/11821096/what-is-the-difference-between-an-arraybuffer-and-a-blob/39951543?noredirect=1#comment77413345_39951543)的那样，您可能仍然需要[`File`相关的接口](https://developer.mozilla.org/en-US/docs/Web/API/File)和 API`FileReader`来使用 Blob。
*   转变
    *   您可以转换`Blob`为`ArrayBuffer`反之亦然，这解决了 OP 的*“不是两个容器都由位组成吗？”*
    *   **ArrayBuffer 可以** [使用`FileReader`'s`readAsArrayBuffer`方法](https://developer.mozilla.org/en-US/docs/Web/API/FileReader#readAsArrayBuffer())或[async 方法 `const arrayBuffer = await blob.arrayBuffer()`](https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer)从 Blob 生成（感谢@Darren G）
    *   **[正如@user3405291 指出的那样，](https://stackoverflow.com/questions/11821096/what-is-the-difference-between-an-arraybuffer-and-a-blob/39951543?noredirect=1#comment86677751_39951543) **可以从 ArrayBuffer 生成 Blob**`new Blob([new Uint8Array(data)]);`，如 [this answer所示](https://stackoverflow.com/a/44148694/3405291)**

***   在其他库中使用
    *   [`jsZip`](https://stuk.github.io/jszip/documentation/api_jszip/load_async.html); `(new JSZip()).loadAsync(...)`接受和：*_* `ArrayBuffer``Blob``String/Array of bytes/ArrayBuffer/Uint8Array/Buffer/Blob/Promise`*   协议如何处理 ArrayBuffer 与 Blob
    *   Websocket（又名 WS / WSS）
        *   使用[webSocket 的`binaryType`属性](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/binaryType)（可以有值“arraybuffer”或“blob”）来“控制通过 WebSocket 连接接收的二进制数据的类型”。
    *   XmlHttpRequest（又名 XHR）
        *   使用[xhr 的`responseType`属性](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data) 来“更改来自服务器的预期响应类型”（有效值包括“arraybuffer”、“blob”以及“document”、“json”和“text”等其他值）
        *   > **响应属性将根据`responseType`**ArrayBuffer、Blob、Document、JSON 或字符串包含实体主体。** 

 **其他有用的文档：

*   [`ArrayBuffer`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)

> 该`ArrayBuffer`对象用于表示一个通用的、固定长度的原始二进制数据缓冲区。您**不能直接**操作`ArrayBuffer`;的内容 相反，您创建一个类型化的数组对象或以`DataView`特定格式表示缓冲区的对象，并**使用它来读取和写入**缓冲区的内容。

*   [`Blob`](https://developer.mozilla.org/en-US/docs/Web/API/Blob)

> `Blob`对象表示**不可变**的原始数据 的类文件对象。`Blob`表示不一定是 JavaScript 原生格式的数据。该**`File`接口**基于`Blob`，继承 blob 功能并将其扩展为支持用户系统上的文件。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-05T23:51:18.063

页面上有说明。

数组缓冲区

> ArrayBuffer 是二进制数据的通用固定长度容器。如果您需要一个通用的原始数据缓冲区，它们非常方便，**但这些家伙背后的真正力量是您可以使用 JavaScript 类型数组创建基础数据的“视图”**。事实上，可以从单个 ArrayBuffer 源创建多个视图。例如，您可以创建一个 8 位整数数组，它与来自相同数据的现有 32 位整数数组共享相同的 ArrayBuffer。底层数据保持不变，我们只是创建了不同的表示形式。

斑点

> 如果您想直接使用 Blob 和/或不需要操作文件的任何字节，请使用 xhr.responseType='blob'：**

# linux - 设置 htaccess 以便除一个 IP 之外的所有人都被拒绝，但它需要身份验证

> ID：11821097
> 
> 赞同：1
> 
> 时间：2012-08-05T23:49:15.973
> 
> 标签：linux, apache, .htaccess, webserver, lamp

我想在我的 Apache Web 服务器上设置 .htaccess，这样所有用户都被直接拒绝访问，除了一个用户是我的 IP。由于此 IP 代表我的整个家庭网络，因此我还想在 IP 正确的情况下添加身份验证，以确保只有我可以访问该目录而没有其他人可以使用我的家庭网络。

这是我的 .htaccess 文件到目前为止的样子：

```
Order deny,allow
Deny from all
AuthType Basic
AuthUserFile /var/www/path_to_forbiden_dir/.htpasswd
AuthName "Protected"
require valid-user
Allow from xxx.xx.xx.xxx 
```

其中 xxx.xx.xx.xxx 是我的 IP

这适用于拒绝本地网络之外的 IP，但是当我尝试从指定的 IP 访问该目录时不显示身份验证。那么，如何仅为指定的 IP 创建身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:00:13.017

尝试添加`Satisfy all`到您的`.htaccess`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:32:25.047

[谢谢，但我按照https://help.ubuntu.com/community/EnablingUseOfApacheHtaccessFiles](https://help.ubuntu.com/community/EnablingUseOfApacheHtaccessFiles)上的说明解决了这个问题， 我忘记在 apache2.conf 中设置 htpasswd 的目录覆盖

# r - gvisAnnotatedTimeLine 函数图表上的标题

> ID：11821101
> 
> 赞同：2
> 
> 时间：2012-08-05T23:49:56.760
> 
> 标签：r, title, google-visualization, annotatedtimeline

我正在使用包中的`gvisAnnotatedTimeLine`函数`googleVis`，并且想知道是否有办法将标题（不是注释）添加到输出中，因为我在函数帮助文件中看不到它的参数。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T17:50:54.540

这是一个应该包含图表标题的函数。输入要么是 HTML 字符串，要么是 shiny.tag。

```
addGvisATLTitle <- function(gvisATL,title)  {

if (!all(class(gvisATL) == c("gvis","list"))) {
  stop('ERROR in addGvisATLTitle: Incorrect type, expect gvisAnnotatedTimeLine.')
}
if (class(title) == "character") {
  gvisATL$html$chart['divChart'] <- paste(title,gvisATL$html$chart['divChart'],sep="")
} else if (class(title) == "shiny.tag") {
  gvisATL$html$chart['divChart'] <- paste(as.character(title)[1],gvisATL$html$chart['divChart'],sep="")
} else {
  stop('ERROR in addGvisATLTitle: Unknown title type.')
}
return(gvisATL)
} 
```

你可以用

```
 a <- data.frame(date=Sys.Date(),val=20)
 b <- gvisAnnotatedTimeLine(a)
 plot(addTitle(b,"<h1> My chart </h1>"))
 plot(addTitle(b,h1("My chart"))) 
```

*   我已将其更新为与 gvisMerge 一起使用

# javascript - 将数据传递到自定义控制台

> ID：11821106
> 
> 赞同：0
> 
> 时间：2012-08-05T23:50:25.583
> 
> 标签：javascript, jquery

我一直在做一个小项目，并试图让我自己的调试控制台有点东西，我可以根据我的需要定制一些东西，而不是使用 firebug .. 到目前为止，我已经完成了我需要工作但没有的两个部分在一起。我有一个脚本将报告鼠标输入和点击的内容，它直接打印到我设置的窗口 DIV，然后昨天遇到了一个我非常喜欢的 JQuery 控制台，我删除了我没有的所有内容不需要并且它在自身内部工作正常，但不知道如何将数据从我的其他方法传递给那个方法，我编译了基本的东西以尝试让它工作......这可能对我来说像往常一样简单 LOL我可能会让自己感到困惑，让它变得更难

如果有人能帮忙，那就太好了

[提琴手](http://jsfiddle.net/thawizanator/KfGeK/14/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:24:53.300

在下班休息一天后，坐下来真正搞砸了一段时间，阅读了 Trip 的评论，哈哈，我决定只是检查一下，把它清理干净，就好像它正在工作一样，并取出了几十个不需要的功能并将我需要的主要内容包装到一个包含所有内容的函数中，并确保我没有使用多个变量来避免冲突和一些调整我让它工作..所以我的结论是在我之后还有很多函数正在删除我不需要的东西。所以这是工作代码，以防有人正在搜索这样的东西

[提琴手](http://jsfiddle.net/qqYac/73/)

非常感谢 Trip 指出所有正在使用的方法

```
 function clock(){
    var dayarray        = new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");
    var montharray        = new Array("January","February","March","April","May","June","July","August","September","October","November","December");
    var suffix             = "AM";    

    var currentTime    = new Date();
    var hours         = currentTime.getHours();
    var minutes     = currentTime.getMinutes();
    var mydate        = new Date();
    var year        = mydate.getFullYear();
    var day            = mydate.getDay();
    var month        = mydate.getMonth();
    var daym        = mydate.getDate();

    if(hours >= 12){
        suffix = "PM";
        hours = hours - 12;
    }
    if(hours == 0){
        hours = 12;
    }
    if(minutes < 10){
        minutes = "0" + minutes
    }
    if(daym<10){
        daym="0"+daym
    }

    //alert(hours);
    return [hours, minutes, suffix, month, day, year, dayarray, montharray];
}
$('#consolex').click(function() { loadConsole(); });
var xD;

function loadConsole(){
if (document.forms[0].console.checked) {
        // if CHECKED than LOAD Console
            if (window.twd_console) {
                window.twd_console.toggle();
            } else {
                function init($) {
                    function HistoryManager() {
                        this.curr = -1;
                        this.entries = [];
                    };
                    HistoryManager.prototype = {
                        push: function(item) {
                            if (this.entries.length && this.entries[0] == item) return;
                            if (item.match(/^\s*$/)) return;
                            this.entries.unshift(item);
                            this.curr = -1;
                        },
                        scroll: function(direction) {
                            var moveTo = this.curr + (direction == 'prev' ? 1 : -1);
                            if (moveTo >= 0 && moveTo < this.entries.length) {
                                this.curr = moveTo;
                                return this.entries[this.curr];
                            } else if (moveTo == -1) {
                                this.curr = moveTo;
                                return '';
                            } else {
                                return null;
                            }
                        }
                    };
                    var toolbar = 'hello';
                    var context = {},
                        history = new HistoryManager(),
                        $drag = $('<div/>').css({
                            backgroundColor: '#e0e0e0',
                            border: '1px solid #a0a0a0',
                            fontSize: '11px',
                            fontFamily: 'sans-serif',
                            lineHeight: 1,
                            padding: '5px',
                            marginBottom: '7px',
                            cursor: 'pointer',
                            textAlign: 'right'
                        }).html(toolbar),
                        $log = $('<div/>').css({
                            fontSize: '11px',
                            fontFamily: 'monospace',
                            color: 'white',
                            marginBottom: '7px',
                            height: '155px',
                            overflow: 'auto',
                            border: '1px solid #a0a0a0',
                            padding: '5px',
                            textAlign: 'left'
                        }),
                        $dummy = $('<div/>');

                    xD = function append(text, act, tag, id, color) {
                        var aX = ' »    ', // Bullet
                        bX = '['+ clock()[0]+':'+clock()[1]+':'+clock()[2]+']  ', // Timestamp
                        cX = '  ERROR  ', //ERROR
                        dX = '  Location  ', //Location of ERROR
                        eX = '  ID Location  ', //ID Location
                        fX = '  Cause  '; //Cause of ERROR
                        $log.append($('<div/>').css({
                            'color': color || 'black',
                            margin: 0,
                            padding: 0
                        }).text(aX).append(bX).append(text).append(act).append(tag).append(id));
                        $log[0].scrollTop = $log[0].scrollHeight;
                    };

                    $(document).mousemove(function(evt) {
                        if (dragging) $container.css({
                            left: evt.pageX - dragging[0],
                            top: evt.pageY - dragging[1]
                        });
                    });

                    var pos = ($.browser.msie && $.browser.version < 7) ? 'absolute' : 'fixed';

                    var $container = $('<div/>').css({
                        backgroundColor: 'white',
                        padding: '7px',
                        position: pos,
                        opacity: 0.9,
                        top: '10px',
                        right: '10px',
                        width: '550px',
                        height: '200px',
                        border: '1px solid #000',
                        zIndex: 99999
                    }).appendTo(document.body);

                    $container.append($drag).append($log);

                    //xD('jQuery initialised!', 'green');
                    //xD('(using jQuery version ' + $.fn.jquery + ')');
                    //xD('jQuery initialised!', 'green');
                    //xD('(using jQuery version ' + $.fn.jquery + ')');
                    //xD('jQuery initialised!', 'green');
                    //xD('(using jQuery version ' + $.fn.jquery + ')');
                    //xD('jQuery initialised!', 'green');
                    //xD('(using jQuery version ' + $.fn.jquery + ')');

                    window.twd_console = $container;

                };

                if (typeof jQuery == 'undefined' || !jQuery.fn.jquery.match(/^1\.7/)) {
                    var e = document.createElement('script'),
                        jq = null;
                    e.onload = function() {
                        jq = jQuery;
                        jQuery.noConflict(true);
                        init(jq);
                    };
                    e.setAttribute('type', 'text/javascript');
                    e.setAttribute('src', 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js');
                    document.body.appendChild(e);
                } else {
                    init(jQuery);
                }
            }
    } else if (!document.forms[0].console.checked) {
        window.twd_console.hide();
    }    
    mouse(true);
}
        function mouse(bol){
            var d = $("*", document.body);

            if(bol){              
                // Cancel mousedown.
                d.mousedown(function(event) {
                    var x = $(this).get(0),
                    y = x.tagName,
                    z = x.id;
                    switch (event.which) {
                        case 1:
                            //alert('Left mouse button click: ' + x.tagName);

                            xD(x.tagName, '  Left mouse button  ','  '+ x.tagName+'  ','  '+ x.id+'  ', 'purple');
                            //xD(x.id, 'red');
                            break;
                        case 2:
                            //alert('Middle mouse button click: ' + x.tagName);
                            xD(x.tagName, '  Centermouse button  ', x.tagName, x.id, 'purple');
                            break;
                        case 3:
                            //alert('Right mouse button click: ' + x.tagName);
                            xD(x.tagName, '  Right mouse button  ', x.tagName, x.id, 'purple');
                            return null;
                            break;
                        default:
                            xD(x.tagName, '  mouse UNKNOWN  ', x.tagName, x.id, 'purple');
                    }
                });
                // Transfer focus, if already open.
                d.mouseenter(function(event) {
                    var x = $(this).get(0),
                    y = x.tagName,
                    z = x.id;
                   // $('#window').append('mouse entered' + x.tagName + '<br />');
                    try{
                        xD(y, '  Mouse Entered  ', y, z, 'blue');
                    //xD(y, 'blue');
                    }catch(err){
                        alert(err);
                }
                });            
            }
        }; 
```

# c++ - 防止重新分配参考？

> ID：11821107
> 
> 赞同：4
> 
> 时间：2012-08-05T23:50:41.203
> 
> 标签：c++, pass-by-reference

考虑在某个库中（我们无权更改），我们有一个 Counter 类：

```
class Counter {
    int count;
  public:
    Counter() : count(0) { }
    void bump() { ++count; }
    int getCount() const { return count; }
}; 
```

就其本质而言，它是可变的。如果它是 const，那它就毫无价值了。

在我们的代码中，我们“使用”了那个计数器。很糟糕。

```
#include <string>
#include <iostream>
#include <Counter.hpp>

using std::cout;
using std::endl;

void breakTheHellOutOfCounter(Counter &c) {
    // This is OK
    c.bump();

    // Oh noes!
    c = Counter();
}

int main() {
    Counter c;
    c.bump(); c.bump(); c.bump();
    std::cout << "Count was " << c.getCount() << std::endl;
    breakTheHellOutOfCounter(c);
    std::cout << "Count is now " << c.getCount() << std::endl;
} 
```

请注意，用闪亮的新计数器`breakTheHellOutOfCounter`覆盖`main`'s 计数器，重置计数。这会让来电者有些悲伤。（想象一些更有害的事情发生，你会看到我要去哪里。）

我需要能够碰撞`c`（因此，我需要它是可变的），但`breakTheHellOutOfCounter()`由于试图*替换* `c`. 有没有办法我可以改变事情（除了`Counter`班级）来实现这一点？

（我知道在最低级别，这几乎是不可能执行的。我想要的是一种让意外难以做到的方法。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T00:04:10.763

在不修改计数器本身的情况下，我能看到的最干净的解决方案是：

```
#include <string>
#include <iostream>
#include <Counter.hpp>

template <typename T>
struct Unbreakable : public T {
  Unbreakable<T>& operator=(const Unbreakable<T>&) = delete;
  Unbreakable<T>& operator=(Unbreakable<T>&&) = delete;

  template <typename ...Args>
  Unbreakable(Args&& ...args) : T(std::forward<Args>(args)...) {}
};

using std::cout;
using std::endl;

void breakTheHellOutOfCounter(Unbreakable<Counter> &c) {
    // this is ok
    c.bump();

    // oh noes!
    c = Counter();
}

int main() {
    Unbreakable<Counter> c;
    c.bump(); c.bump(); c.bump();
    std::cout << "Count was " << c.getCount() << std::endl;
    breakTheHellOutOfCounter(c);
    std::cout << "Count is now " << c.getCount() << std::endl;
} 
```

这正确地从您的“哦，不”行中给出了一个错误。（示例使用 C++11，但 C++98 解决方案类似）

这并不排除以下用法：

```
Counter& br = c;
br = Counter(); 
```

当然，但如果不修改`Counter`自身，我认为这是无法避免的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T23:58:47.907

最简单的方法是从 Counter 类中删除赋值运算符。但是，由于您无法更改 Counter 类，因此您唯一真正的选择是将 Counter 类包装在一个没有赋值运算符的类中，然后改用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T00:51:12.473

正如迈克尔安德森所说，您可以将您的计数器对象包装在一个防止分配的类中。

```
class CounterProxy {
    Counter& counter;
    CounterProxy & operator=(const CounterProxy&);
public:
    CounterProxy(Counter& c) : counter(c) {}
    void bump() { counter.bump(); }
    int getCount() const { return counter.getCount(); }
};

void breakTheHellOutOfCounter(CounterProxy &c) {
    // this is ok
    c.bump();

    // not oh noes!
    c = CounterProxy(Counter());
}

int main() {
    Counter c;
    c.bump(); c.bump(); c.bump();
    std::cout << "Count was " << c.getCount() << std::endl;
    breakTheHellOutOfCounter(CounterProxy(c));
    std::cout << "Count is now " << c.getCount() << std::endl;
} 
```

只要您想限制可以对对象执行的操作，就可以使用此方法。

编辑：您可能已经意识到这一点并正在寻找更优雅的解决方案，但该代码可能对其他人有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T00:04:00.907

通过允许`bump`通过可变引用，您可以让函数访问弄乱对象状态。分配没有什么特别之处；它只是一个以某种方式改变对象的函数。它也可以是一个被调用的函数，`CopyStateFromAnotherInstance()`而不是`operator =()`.

所以真正的问题是：你如何只允许某些功能而隐藏其他功能？通过使用接口：

```
class IBumpable
{
    void bump() ...
};

class Counter : IBumpable
{
    ....
};

void functionThatCannotBreakCounter(IBumpable& counter) { ... } 
```

# .net - Windows for ARM 哪些 API 可用

> ID：11821110
> 
> 赞同：1
> 
> 时间：2012-08-05T23:51:18.983
> 
> 标签：.net, windows-8, microsoft-metro

我可以使用哪些 API 在 ARM 平板电脑上为 Windows 开发。我知道 Windows RT API 可用，但还有其他与 Metro 相关的 API 集是有问题的。我想制作一个可以在 ARM 和 x86 平台上运行的应用程序。

我困惑的要点是我不知道 .NET 框架的哪个子集可用。

参考链接：http: [//msdn.microsoft.com/en-US/library/windows/apps/br211369](http://msdn.microsoft.com/en-US/library/windows/apps/br211369)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T02:32:06.847

跨 arm、x86 和 x64 的 Metro API 可用性是相同的。Metro 中可用的任何东西都将在所有平台上可用。

# c - 如何在 C 中为 PIC24 编写独立于硬件的函数

> ID：11821115
> 
> 赞同：2
> 
> 时间：2012-08-05T23:51:55.010
> 
> 标签：c, function, pic, microchip

我正在编写一些包含各种功能的代码，例如 PID 控制器、信号发生器等。

我的硬件提供各种输入和输出。刚才我有一个 SWITCH 语句来确定我的计算的来源和目的地。

例如对于 PID 控制器，每 100 毫秒有一个开关命令决定将哪个输入传递给 pid_calculate 函数，然后是另一个开关来决定如何处理返回值。因为我有 32 个模拟输入，以及可能的输入，can、lin 和 serial，所以 switch 语句是巨大的！

我想参考或一个物理示例，说明如何将某些东西编码为独立于硬件的（在图片的范围内）功能。我确信答案在于指针，但我是 C 的新手，并不确定从哪里开始指针。

我设想函数原型类似于 int pid_init(*source,*destination) 其中源是指向输入的指针，例如 ADC 缓冲区，而目标可以是例如 pwm 占空比寄存器。刚才我必须切换每个可能的条件，然后将数据加载到寄存器中。

所以为了澄清，我将如何实现一个允许它独立输入和输出的函数，以及我将如何取消引用指针（假设指针是正确的方法）

我希望这是有道理的，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T03:59:49.427

只要您稍加注意，您就可以在 C 中实现一种面向对象的编程。在我所做的方式中，我使用了函数指针以及以函数指针作为成员的结构。

例如，为了具有一种数据独立性，您可能有一个类似于[快速排序 (qsort) 函数](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)的函数，它为 data long 提供了一个指向对数据进行操作的函数的指针。通常使用这种方法，您最终会使用各种类型的 void 指针来允许使用指向任何数据类型的指针。

我使用的另一种方法是为各种类型的设备支持的常见操作提供一个抽象接口，然后创建一个为这些操作提供函数指针模板的结构。然后，我将创建一个由这些结构组成的数组，并通过使用指向为特定设备实现该操作的特定函数的函数指针填充数组元素。

例如，像这个非常简单的例子是我用来为几种不同设备提供标准接口的东西。该接口通过提供标准接口隐藏了设备差异。

```
// I create a struct that specifies what the function
// interface looks like for each of these operations for the
// devices that we are supporting.
typedef struct {
    int  (*pInput)(int iValue);
    char *(*pName) (void);
    int  (*pDance) (int iTune, char *aszName);
} HardwareInterface;

// next I provide the function prototypes for the various devices.
// we have two different devices, Device_01 and Device_02 which
// have a common set of operations with the same interface.
int  Device_01_Input (int iValue);
char *Device_01_Name (void);
int  Device_01_Dance (int iTune, char *aszName);

int  Device_02_Input (int iValue);
char *Device_02_Name (void);
int  Device_02_Dance (int iTune, char *aszName);

// now I define my array of the device operation interfaces.
// this is where I provide the link between a specific operation
// on a specific device.  I will number my devices beginning with
// zero to the number of devices supported minus one.
HardwareInterface HardwareList [] = {
    {Device_01_Input, Device_01_Name, Device_01_Dance},
    {Device_02_Input, Device_02_Name, Device_02_Dance},
}; 
```

在这一点上，我可以调用一个函数来获取我真正想要使用的设备。此函数返回硬件列表的索引。所以它可能会变成这样。

```
int DeviceStdInput (int iValue)
{
    int  i = GetDeviceType ();
    return HardwareList[i].pInput (iValue);
} 
```

或者我可以使用句柄方法，以便调用一个函数，该函数为传递给函数的某些描述中指定的设备提供句柄。然后对我的标准接口的任何调用都会指定句柄。在下面，句柄只是不同设备数组的索引。

```
{
    int iHandle = GetDeviceHandle ("Device_01");
    int iXvalue = DeviceStdInput (iHandle, iValue);
} 
```

函数 DeviceStdInput() 看起来像：

```
int DeviceStdInput (int iHandle, int iValue)
{
    return HardwareList[iHandle].pInput (iValue);
} 
```

您仍然需要实现用于每个设备的实际功能，但是这提供了一种方法，可以为具有通用操作的多个设备提供标准接口，然后您可以在其余代码中使用标准接口。

我用它来提供一个标准的输出接口，其中输出设备是文件、打印机和 Web 服务。实际的接收器或输出设备由用户选择。使用接口的代码没有改变。只要界面没有改变，添加更多设备就很容易了。在某些情况下，我会拥有不支持特定操作的设备，并且该功能只会返回而无需执行任何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T05:05:21.223

我个人最喜欢的是使用宏。它们很简单，并且始终适用于所有编译器。

例如，假设您有一些功能可以做一些通用的事情（在您的情况下是 PID），但在硬件特定的寄存器和/或内存位置上运行。只需将硬件特定部分定义为您放入硬件特定头文件的宏。然后，当您编译代码时，您可以选择使用哪个宏（如果您注意到，这就是 PIC 编译器对硬件特定寄存器地址所做的事情）。

* * *

**例子：**

do_something.c

```
void do_something () {
    MY_OUTPUT = complex_operation(MY_INPUT);
} 
```

dev_board_16f877.h

```
#define MY_INPUT  PORTB
#define MY_OUTPUT PORTD 
```

production_board_version_1_0.h（替代标题）

```
#define MY_INPUT  PORTC
#define MY_OUTPUT PORTD 
```

* * *

更好的是，您甚至应该将 I/O 操作抽象为函数而不是变量赋值，因为大多数其他 CPU 无法做到这一点。同样，这可以简单地在您在编译阶段选择的硬件特定头文件或硬件特定 C 文件中完成。

顺便说一句，这也是 Linux 内核的做法——将算法与硬件特定的东西分开。

# python - Django 和 Bootstrap：推荐什么应用程序？

> ID：11821116
> 
> 赞同：70
> 
> 时间：2012-08-05T23:52:11.343
> 
> 标签：python, django, twitter-bootstrap

我想开始将 Twitter 的 Bootstrap 用于最近启动的 Django 应用程序。我对 Django 有相当多的经验，但我对 Bootstrap 完全陌生。

最好的方法是什么？您会推荐或体验过任何特定的 Django Boostrap 应用程序吗？

我知道我可以直接使用 Bootstrap，而无需任何特殊的 Bootstrap 特定 Django 应用程序。但是，我还了解到，如果没有一点服务器端支持（例如，将 Bootstrap 特定的 CSS 渲染到 HTML 表单中），表单渲染效果不会特别好。

好像有几个项目，比如crispy forms、django-bootstrap-toolkit等。查看他们的项目页面，我可以看到不同级别的活动和支持。如果我决定选择其中一个，我当然想选择一个有一定动力的，因此很有可能在一段时间内得到支持和维持。这是非常重要的，因此即使特定应用程序没有所有可能的功能或不太灵活，由于支持/新鲜度、示例的可用性等，它仍然可能是一个不错的选择。

感谢您的任何建议或反馈。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-06T04:28:55.617

我使用[`django-bootstrap-toolkit`](https://github.com/dyve/django-bootstrap-toolkit)了 — 正如作者解释的那样（参考其他 Django/Bootstrap 集成应用程序）

> “模板标签和过滤器的方法似乎是正确的，但 Bootstrap 不仅仅是表单。”

除了表单之外（可以很简单`{% form|as_bootstrap %}`，这个应用程序有助于分页，将静态 URL 插入到 Bootstrap 媒体文件，以及其他一些位。[阅读`templatetags/bootstrap-toolkit.py`](https://github.com/dyve/django-bootstrap-toolkit/blob/master/bootstrap_toolkit/templatetags/bootstrap_toolkit.py)完整列表。

@dolan 指出，`django-bootstrap-toolkit`开发人员推荐了一个新项目来支持 Bootstrap v3 [`django-bootstrap3`](https://github.com/dyve/django-bootstrap3)，. 我还没有尝试过，因为自从 V3 出来后我还没有开始一个新项目，所以 YMMV。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T06:10:26.430

另一个需要考虑的选项是[django-bootstrap-form](https://github.com/tzangms/django-bootstrap-form/tree/master/bootstrapform)。

我发现酥脆的形式对我的需求来说太重了。Django-bootstrap 不再维护。我尝试了 django-bootstrap-toolkit 和 django-bootstrap-form，虽然看起来 django-bootstrap-toolkit 具有更多功能，但我发现 django-bootstrap-form 满足了我的需求。为了简单起见，我选择了后者，并没有发现它缺乏（尽管我很想听听其他关于它们相对优点的意见）。

除了 django-bootstrap-form，我推荐[django-widget-tweaks](http://pypi.python.org/pypi/django-widget-tweaks)，它允许您使用模板过滤器向表单添加类（和其他属性），例如：

```
{{ form.field|add_class:"input-small" }} 
```

这使您可以使用 Bootstrap 中基于类的格式，同时将表示逻辑保留在模板中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-06T00:20:06.557

在过去的几个月里，我一直在使用带有引导程序的 django-crispy-forms，它非常有用。表单完全按照它们的意图呈现。但是，如果您执行任何自定义表单呈现，请准备好在代码中而不是在模板中定义您的表单，使用`helpers`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-06T03:27:41.013

我一直在使用[django-bootstrap](https://github.com/earle/django-bootstrap)。到目前为止没有任何投诉。

# javascript - 选择最短的旋转来排列两个图像

> ID：11821118
> 
> 赞同：0
> 
> 时间：2012-08-05T23:52:58.840
> 
> 标签：javascript, css

我已经为这个问题苦苦挣扎了一段时间，尽管起初它看起来并不难。

基本上我在屏幕上有一个由javascript动态旋转的三角形。动画的每一帧，三角形都试图在“正确的方向”上旋转 1 度，以便它的尖端指向屏幕上的另一个 div，我可以用箭头键四处移动。这个三角形具有以下 css 属性

```
#triangle {
    position: absolute;
    left: x;
    top: y;
    -webkit-transform: rotate(degrees)
} 
```

我可以使三角形的点很好地跟随 div，但我不知道如何使该点始终采用最短的旋转。有时它会在“错误”方向上旋转 355 度，而不是在正确的方向上旋转 5 度。

我有点卡住了。有人可以帮我解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:57:52.887

我会尝试这样的事情：

```
function optimal_angle(degrees) {
  degrees = degrees % 360;

  if (degrees > 180) {
    return degrees - 360;
  } else {
    return degrees;
  }
} 
```

还有一些测试：

```
> optimal_angle(355);
-5
> optimal_angle(-5);
-5
> optimal_angle(124373984);
104 
```

如果你仔细想想，你最多可以向任何方向转动 180 度。因此，要“优化”一个角度，您需要删除重复的转数 ( `degrees % 360`)，如果角度超过 180 度，则转另一个方向。

# ios - iOS AVPlayer：如何将 30fps 的视频减慢到 1fps

> ID：11821124
> 
> 赞同：1
> 
> 时间：2012-08-05T23:54:47.047
> 
> 标签：ios, video, avfoundation, avplayer, frame-rate

我有一个用 AVAssetWriter 创建的 30fps Quicktime .mov 静止图像。（它只有大约 10 帧长）。我希望用户能够使用 UISlider 将其减慢到大约 1fps，但是当我将 AVPlayer .rate 属性从 1 调整为 0 时，它不会接近 1fps，它只是停止播放（因为0 速率有效地停止/暂停它，这是有道理的）。但是我怎样才能将播放器的速度降低到大约 1fps？我想我需要做一些数学来计算实际费率，但这就是我卡住的地方。它最终会变成0.000000000000001吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:41:12.353

如果这是我的要求，我将按如下方式处理（Inafziger 在评论中也建议）。使用 AVAssetReader 并为图像滚动我自己的查看器。如您的评论中所述，这将使您使用计时器进行精确控制。确保您重用了一些预先分配的图像内存区域（您可能会为单个图像腾出空间）。我可能会采取像 CoreAudio 这样的拉式方法。当您需要图像时，从调用 AVAssetReaders 读取函数的某个图像缓冲区管理器类中提取它。这样，您就可以拥有 N 个始终可用的缓冲区。这可能有点矫枉过正。我确实相信 AVAssetReader 在初始化时会预解码一些电影。这就是为什么我说你很可能只是使用单个缓冲区来读取图像数据。

您对内存问题的评论。我确实相信 AVAssetReader 和相关类中有一些函数使用创建规则。

# javascript - 如何合并代码 | 使变量动态

> ID：11821125
> 
> 赞同：0
> 
> 时间：2012-08-05T23:55:00.827
> 
> 标签：javascript

我想遍历一个对象并运行所有名为 init() 的函数。

我有以下代码，但它是重复的。如何有效地制作变量的 MC 和 Su 实例？

这是重复的代码。

```
MC.initAll = function() {
    for ( var key in MC ) {
        if( MC.hasOwnProperty( key ) ) {
            if( MC[key].hasOwnProperty( 'init' ) ) {
                MC[key].init();
            }
        }
    }
    for ( var key in Su ) {
        if( Su.hasOwnProperty( key ) ) {
            if( Su[key].hasOwnProperty( 'init' ) ) {
                Su[key].init();
            }
        }
    }
} 
```

有很多选择...

*   将它们放在一个数组中，然后通过 for 循环将它们弹出。

*   使它们成为对象属性并循环访问对象属性。

*   进行函数调用并将它们作为参数传递。

*   使用下面每个fritz的对象映射

哪个最好还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T23:56:24.657

```
function _iterateAndCallInit(objectToIterateOver)
{
    for ( var key in objectToIterateOver ) {
        if( objectToIterateOver.hasOwnProperty( key ) ) {
            if( objectToIterateOver[key].hasOwnProperty( 'init' ) ) {
                objectToIterateOver[key].init();
            }
        }
    }
} 
```

`objectToIterateOver[key].init`ps：检查类型是否为函数可能也有意义

```
typeof objectToIterateOver[key].init == 'function' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T23:57:58.713

我不会多想的。只是一个一般的地图功能会做：

```
function object_map(my_object, callback) {
    for (var property in my_object) {
        if (Object.prototype.hasOwnProperty.call(my_object, property)) {
            callback(my_object[property]);
        }
    }
}

object_map(MC, function (item) {
    item.init();
});
object_map(Su, function (item) {
    item.init();
}); 
```

这减少了循环对象中元素的所有开销（以及潜在的`hasOwnProperty`陷阱（我已更正；））。并且只关注在这个抽象级别上什么是重要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T23:58:02.640

尝试

```
var iterate = [MC, Su], l = iterate.length, i, key;
for( i=0; i<l; i++) {
    for( key in iterate[i]) {
        if( iterate[i].hasOwnProperty(key) && iterate[i][key].hasOwnProperty("init")) {
            iterate[i][key].init();
        }
    }
} 
```

# ios - FetchRequest 在后续执行中返回重复的结果

> ID：11821126
> 
> 赞同：0
> 
> 时间：2012-08-05T23:55:02.357
> 
> 标签：ios, ios5, core-data

我在 tabbarcontroller 的第二个选项卡上设置了以下代码。我第一次进入选项卡时，按预期正确获取了我的数据。但是，如果我离开选项卡并`array`返回，则 fetch 请求返回的条目包含双倍条目。它返回的每个对象都是重复的。如果我离开选项卡并再次返回，则条目会再次重复，每个条目都给我 3 个。我的请求做错了什么会导致这种情况发生？

```
- (void)viewWillAppear:(BOOL)animated {
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"EntityName" inManagedObjectContext:delegate.managedObjectContext];
    [fetchRequest setEntity:entity];

    // sort the results, since we want the most recent entry first
    NSSortDescriptor *dateSort = [[NSSortDescriptor alloc] initWithKey:@"key" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObject:dateSort];
    [fetchRequest setSortDescriptors:sortDescriptors];

    NSError *error;
    NSMutableArray *array = [[delegate.managedObjectContext executeFetchRequest:fetchRequest error:&error] mutableCopy];
    NSLog(@"error %@",[error localizedDescription]);
    self.fetchedObjects = [array copy];
    [array removeAllObjects];

    [self.tableView reloadData];
} 
```

**更新：**我切换到 NSFetchedResultsController 这解决了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:12:45.033

没有立即说明为什么会发生这种情况，但是围绕实际 fetch 本身的可疑编码表明您的委托方法或控制器的其他部分可能存在一些错误。

您是否也在使用获取的结果控制器？您稍后会更改 fetchObjects 集合吗？

数据库实际上是否包含所有这些额外的对象，或者它只是这个控制器中的数组？

另外，请注意，在 viewWillAppear 中完成所有这些工作可能不是一个好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T05:39:51.470

如果您尝试将代码更改为`self.fetchedObjects = [[delegate.managedObjectContext executeFetchRequest:fetchRequest error:&error] mutableCopy];`

您能否向我们展示更多代码，包括已实现的`UITableViewDataSource`& `UITableViewDelegate methods`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:57:08.357

切换到 NSFetchedResultsController 并解决了问题。

# php - 朋友新闻提要 - 最近的更新

> ID：11821132
> 
> 赞同：0
> 
> 时间：2012-08-05T23:56:51.850
> 
> 标签：php, sql

我有一个用户朋友存储在数据库中`friends_array`。他们存储朋友的 id 并用昏迷的方式分开。我能够输出用户发布的帖子，但我遇到了问题。这是我的代码。

```
if ($friend_feed != "") {
$feed= explode(',', $feed);
    foreach ($feedas $key => $value) {
        $query = mysql_query("SELECT * FROM `users` WHERE user_id=$value ORDER BY `time` DESC") or die ("Please try again later.");
        while ($row = mysql_fetch_array($query)) {
            $first_name = $row['first_name'];
            $last_name = $row['last_name'];
            $username = $row['username'];
            $post = $row['post'];
            echo '<hr><a href ="'. $username .'">'.$first_name.' '.$last_name.'</a> <br>'.$post;
        }
    }
} 
```

上面的代码通过朋友 id 并输出帖子...但它首先通过每个朋友...例如我有 3 个朋友的 id 为 70,71 和 72。如果他们每个人都发 2 个帖子，他们是按照他们在数据库中存储的id的顺序输出的，所以用户70的帖子将首先出现，然后是用户71的所有帖子，然后是用户72......

我如何停止这个并通过最近放入数据库的帖子输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:05:23.153

您可以尝试不同的查询，例如：

```
SELECT * FROM `users` WHERE user_id IN ($feed) ORDER BY `time` DESC 
```

放下整个`foreach`和`explode`

# javascript - 数学：3 个旋转刻度盘，3 个值应始终 = 100%

> ID：11821135
> 
> 赞同：0
> 
> 时间：2012-08-05T23:57:46.520
> 
> 标签：javascript, math

我有三个表盘：D1、D2 和 D3。它们的值应始终为 100%，默认值分别为 50%、25% 和 25%。

当用户编辑 D2 或 D3 时，D1 应作为第一个从中提取和存款的罐。

**问题来了**：如果可编辑刻度盘增加到超过 D1 保留点怎么办？我需要找到一种方法，让表盘上的剩余拉力此时不被编辑。

我想我正在寻找一种优雅的解决方案，而不是 hack。有人有这样的解决方案吗？

[http://jsfiddle.net/cborgia/ByWCA/](http://jsfiddle.net/cborgia/ByWCA/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:53:47.380

您要做的是求解三个函数的方程，例如：

```
X + Y +  Z = K; 
```

在哪里：

```
X = x + a(dx)
Y = y + b(dy)
Z = z + c(dz)
K = 100 
```

和

1.  `a`,`b`是`c`函数
2.  `x`,`y`和`z`是旋钮的当前值和
3.  `dx`,是旋钮值的`dy`变化`dz`

函数在给定 K（始终为 100）的值和`X`、`Y`和`Z`其中之一 的情况下求解`X`，`Y`并且`Z`在 0 到 100 的范围内。

您没有说应该发生什么`X`，`Y`并且`Z`接近 0 或 100 - 它们是否按比例减少，或者是否将多余或不足应用于其他非用户调整的旋钮？

# php - 获取 PHP 中常量的定义类

> ID：11821137
> 
> 赞同：1
> 
> 时间：2012-08-05T23:57:53.327
> 
> 标签：php, reflection

我想使用反射来获取由 PHP 中的类定义的常量列表。

目前使用反射我可以得到一个常量列表，但这也包括在继承类中声明的那些。有没有一种我可以用来的方法；

*   给定一个类，只获取该类定义的常量
*   给定一个常量和一个类，检查该常量是否由该类定义（不是继承或扩展的父级）。

**例如，在以下代码中：**

```
class Foo {
    const PARENT_CONST = 'parent';
    const ANOTHER_PARENT_CONST = 'another_parent';
}

class Bar extends Foo {
    const CHILD_CONST = 'child';
    const BAR_CONST = 'bar_const';
}

$reflection = new ReflectionClass('Bar');
print_r($reflection->getConstants()); 
```

**输出是：**

```
Array
(
    [CHILD_CONST] => child
    [BAR_CONST] => bar_const
    [PARENT_CONST] => parent
    [ANOTHER_PARENT_CONST] => another_parent
) 
```

**但我只想拥有这个：**

```
Array
(
    [CHILD_CONST] => child
    [BAR_CONST] => bar_const
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:10:42.373

默认情况下，PHP 没有我知道的已经删除父类和接口常量的函数。所以你需要自己做：

```
$reflection = new ReflectionClass('Bar');
$buffer = $reflection->getConstants();
foreach (
    array($reflection->getParentClass())
    + $reflection->getInterfaces()
    as $fill
) {
    $buffer = array_diff_key($buffer, $fill->getConstants());
} 
```

结果`$buffer`是您要查找的数组：

```
Array
(
    [CHILD_CONST] => child
    [BAR_CONST] => bar_const
) 
```

# jquery - 随着可点击按钮列表的增加，如何消除重复此功能？

> ID：11821140
> 
> 赞同：2
> 
> 时间：2012-08-05T23:58:23.133
> 
> 标签：jquery

这是一些可以工作的新手代码，但会随着列表的增长而膨胀。我正在寻找一种可以消除每次创建新输入时重复单击功能位的方法。

我正在创建一个 div 作为具有唯一名称的按钮，在与该按钮绑定的唯一 JSON 文件中调用一些值，然后将值存储在 localStorage 中（单击将始终调用相同的函数）。

此示例仅处理三个，但列表可能会增长到数十个。

```
<div style="display:none;">
<input class="hiddenWebInput" id="webImportInput1" type="text" value="fooList1.txt"  />
<input class="hiddenWebInput" id="webImportInput2" type="text" value="bar.txt"  />
<input class="hiddenWebInput" id="webImportInput3" type="text" value="foo.txt"  />
</div>

<script>

$("#webImport1").click(function() {

localStorage.setItem("picked", document.getElementById("webImportInput1").value);

getList();

});

$("#webImport2").click(function() {

localStorage.setItem("picked", document.getElementById("webImportInput2").value);

getList();

});

$("#webImport3").click(function() {

localStorage.setItem("picked", document.getElementById("webImportInput3").value);

getList();

}); 
```

这`getList()`是我用来设置其他 localStorage 值并执行其他操作的。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:02:15.540

我的第一个想法是：

```
$("input[id^=webImport]").click(function() {
    var num = this.id.match(/d+/);
    localStorage.setItem("picked", document.getElementById("webImportInput" + num).value);
    getList();
}); 
```

`class`但是，老实说，这已被您在`input`元素上有 a 的事实所取代，所以：

```
$("input.hiddenWebInput").click(function() {
    var num = this.id.match(/d+/);
    localStorage.setItem("picked", document.getElementById("webImportInput" + num).value);
    getList();
}); 
```

再稍微提炼一下，使用jQuery，而不是jQuery和DOM的混搭，选择方法：

```
$("input.hiddenWebInput").click(function() {
    var num = this.id.match(/d+/);
    localStorage.setItem("picked", $("#webImportInput" + num).val());
    getList();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T00:03:40.287

试试这个：

```
$('div[id^="webImport"]').click(function() {
   var n = this.id.match(/\d+/g);
   localStorage.setItem("picked", $("#webImportInput"+n).val());
   getList();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T00:01:58.427

如果功能都相同，您可以使用类而不是 id 来绑定事件。

像

```
$('.hiddenWebInput').click(function(){
    localStorage.setItem("picked", $(this).val());
}); 
```

# javascript - 如何根据变量设置属性？

> ID：11821144
> 
> 赞同：0
> 
> 时间：2012-08-05T23:59:11.010
> 
> 标签：javascript, arrays, object

我需要做这样的事情：

```
var Layers = {
            TL: null,
            TM: null,
            TT: null,
            MF: null,
            BT: null,
            BM: null,
            BL: null};

Layers.(file.layer) = file.id; 
```

其中file.layer，实际上是设置file.id的“关键”，在Layers里面......那么，有没有办法，或者只能使用数组来完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T00:00:25.340

```
Layers[file.layer] = file.id; 
```

...

# ruby-on-rails - 带有保留关键字的模型

> ID：11821146
> 
> 赞同：9
> 
> 时间：2012-08-05T23:59:37.100
> 
> 标签：ruby-on-rails, ruby

我想创建一个名为“文件”的模型，但它是一个保留的模型名称是 rails。我想不出任何其他理智来调用模型，所以我想知道是否有处理这个问题的标准方法，例如添加前缀或后缀（_File、FileItem 等）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T00:17:15.390

此问题已通过[模块](http://ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)解决：

> 模块是将方法、类和常量组合在一起的一种方式。模块为您带来两大好处：
> 
> 1.  模块提供命名空间并防止名称冲突。
> 2.  模块实现了 mixin 工具。
> 
> [...]
> 
> **模块定义了一个命名空间**，一个沙箱，您的方法和常量可以在其中发挥作用，而不必担心被其他方法和常量踩到。

在你的情况下：

```
module MyRailsApp
  class File
  ...
  end
end 
```

从而您的`File`课程被用作`MyRailsApp::File`. 这是 Ruby 中的典型解决方案，在 Ruby on Rails 中可能会有不同的处理方式，请参阅以下参考资料进行深入讨论：

*   [处理命名空间中的命名空间模型（类）](https://stackoverflow.com/questions/5852626/handling-namespace-models-classes-in-namespace)
*   [ActiveRecord：可以危害命名空间吗？](http://ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)
*   [命名空间模型和控制器](http://venkatev.wordpress.com/2010/01/27/namespaced-models-and-controllers/)
*   [命名空间模型](http://m.onkey.org/namespaced-models)
*   [命名空间模型的简单替代方案](http://blog.hasmanythrough.com/2008/5/6/a-simple-alternative-to-namespaced-models)

# r - 使用 R 包 seqinr 编写 fasta 文件？

> ID：11821149
> 
> 赞同：9
> 
> 时间：2012-08-06T00:00:07.613
> 
> 标签：r, fasta

当我在 seqinr 中使用 write.fasta 时，它输出的文件如下所示：

```
>Sequence name 1

>Sequence name 2

>Sequence name 3
...etc

Sequence 1 Sequence 2 Sequence 3 ...etc 
```

也就是说，序列名称都在文件的开头，然后在文件的末尾将这些序列一起输出。

我想做的是：

```
>Sequence name 1
Sequence 1
>Sequence name 2
Sequence 2
>Sequence name 3
Sequence 3
...etc 
```

write.fasta 有可能吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-09T03:48:31.827

我遇到了类似的问题。我所做的是将包含序列的向量转换为列表，它工作正常。

例如，`write.fasta(as.list(seq),names,file)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:00:26.880

其实我一直都是以正确的方式获得它，我从来没有遇到过像你这样的问题。尝试这个。

复制以下文本：

```
>seq1
agctgtagtc
>seq2
agtctctctt
>seq3
atgtataaaa 
```

将其保存为“test.fasta”。然后在 R 中执行以下操作

```
my.dna<-read.fasta("test.fasta")
write.fasta(sequences=my.dna,names=names(my.dna),file.out="write.my.dna.fasta") 
```

如果您打开“write.my.dna.fasta”，您将获得以下信息：

```
>seq1
agctgtagtc
>seq2
agtctctctt
>seq3
atgtataaaa 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-08T18:11:16.577

一个最小的例子：

```
write.fasta(as.list(c('AAA', 'CCC')), names=c("a", "b"), 
                               as.string=FALSE, file.out="foo.fa") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-27T13:41:53.837

我遇到了这个问题，并得到了朋友的帮助。您需要在列表中定义序列，这是一个代码示例，其中来自 maxquant 输出的输入是一个 csv，其中有一列称为序列，名称列称为“前导剃刀蛋白”：

```
library(tidyverse)
library(seqinr)
MU = read_csv('data.csv')
seqs = as.list(dplyr::pull(MU, Sequence))
names = dplyr::pull(MU, `Leading razor protein`)
write.fasta(seqs, names, "MU.fasta",
            open = "w", as.string = FALSE) 
```

# wpf - Setter.TargetName 不适用于 BasedOn 设置中的元素

> ID：11821150
> 
> 赞同：2
> 
> 时间：2012-08-06T00:00:10.377
> 
> 标签：wpf, button, styles, pathgeometry

我有许多 PathGeometry 实例，它们为不同的按钮绘制各种图形。所以我创建了一个按钮类型来显示一个路径，然后根据按钮状态更新 Path.Stroke。因此，禁用时显示为灰色，鼠标悬停时显示不同的颜色。标准的东西...

```
<Style x:Key="BasePathButton" TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border Name="Border"
                    <Path x:Name="Path" />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="Path" Property="Stroke" Value="Gray"/>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="Path" Property="Stroke" Value="Green"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="Path" Property="Stroke" Value="Red"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

但显然我需要为每个按钮实例使用不同的 Path.Data。所以我创建了一个 BasedOn 样式来设置 Path.Data 像这样......

```
<Style x:Key="NLB" TargetType="{x:Type Button}" BasedOn="{StaticResource BasePathButton}">
    <Setter TargetName="Path" Property="Data" Value="{StaticResource LeftPathGeometry}"/>
</Style> 
```

...但这会失败，并出现无法找到 TargetName="Path" 的错误。任何想法如何解决这一问题？或者也许是创建一个具有使用几何参数化的路径的按钮的更好方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T00:12:39.613

您不能通过名称定位模板中的元素，这是一个不同的名称范围，我认为`TargetName`仅适用于`ControlTemplate.Triggers`. 您可以将数据引用为`DynamicResource`，然后将资源添加到您的个人样式中。

例如

```
<Path Data="{DynamicResource PathData}" .../> 
```

```
<Style x:Key="..." BasedOn="...">
    <Style.Resources>
        <!-- not sure if this actually works, you could also try DynamicResource here -->
        <StaticResource x:Key="PathData" ResourceKey="LeftPathGeometry"/>
    </Style.Resources>
</Style> 
```

* * *

这是一个完整的独立示例，展示了这种技术*（似乎只适用于动态编译的 XAML！）*：

```
<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Page.Resources>
    <SolidColorBrush x:Key="RedBrush" Color="Red"/>
    <SolidColorBrush x:Key="BlueBrush" Color="Blue"/>

    <Style x:Key="BaseStyle" TargetType="Button">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border BorderBrush="{DynamicResource StyleBrush}" BorderThickness="3" Padding="5">
              <ContentPresenter TextElement.Foreground="{DynamicResource StyleBrush}"/>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
    <Style x:Key="RedStyle" BasedOn="{StaticResource BaseStyle}" TargetType="Button">
      <Style.Resources>
        <StaticResource x:Key="StyleBrush" ResourceKey="RedBrush"/>
      </Style.Resources>
    </Style>
    <Style x:Key="BlueStyle" BasedOn="{StaticResource BaseStyle}" TargetType="Button">
      <Style.Resources>
        <StaticResource x:Key="StyleBrush" ResourceKey="BlueBrush"/>
      </Style.Resources>
    </Style>
  </Page.Resources>
  <StackPanel>
    <Button Content="Test" Style="{StaticResource RedStyle}"/>
    <Button Content="Test" Style="{StaticResource BlueStyle}"/>
  </StackPanel>
</Page> 
```

# php - 准备好的声明，这是正确的吗？

> ID：11821154
> 
> 赞同：2
> 
> 时间：2012-08-06T00:00:37.847
> 
> 标签：php, mysqli, prepared-statement

我一直在花时间学习 MySQLi 中的预处理语句。我使用 David Powers 的 PHP Solutions Second Edition 作为参考。

此查询从特定图库中提取随机照片文件名。画廊编号是一个变量 ($i)。这是有效的，我只是想知道它是否写得正确。我的网站相当简单，但我想避免 SQL 注入。

```
$conn = dbConnect('query');
$randPic = "SELECT p_fname
        FROM photos
        WHERE g_id = ?
        ORDER by RAND()
        LIMIT 1";
$gid = $i;
$stmt = $conn->prepare($randPic);
$stmt->bind_param('i', $gid);
$stmt->bind_result($p_fname);
$stmt->execute();
$stmt->store_result();
$stmt->fetch(); 
```

在需要随机照片的页面上，我可以通过变量调用它：

```
echo $p_fname; 
```

再一次，这一切都有效。我只想知道这是否编码正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:04:08.923

是的，您的查询写得很好。

输出数据时要小心。如果为 HTML 页面输出可变数据，请使用`htmlspecialchars()`以避免意外地将 HTML 注入您的页面。

# apache - 使用 DNS 提供程序 no-ip.org htaccess 从 IP 阻止/允许

> ID：11821155
> 
> 赞同：1
> 
> 时间：2012-08-06T00:00:38.190
> 
> 标签：apache, .htaccess, dns, ip

我有一个安全站点 (.htaccess = Deny from all) 我想允许某些人访问

但是，他们使用的是移动笔记本电脑，并且拥有由 ISP 分配给他们的动态 IP

所以，我下载了 no-ip 客户端，它应该给他们一个可以解析为 IP 的主机。

然而，当我把

```
Allow from xxx.no-ip.org 
```

在 .htaccess 文件中，我仍然得到禁止页面。

[我有其他固定的 IP 位置允许 - 并且工作 - 我已经测试 xxx.no-ip.org 使用http://www.webyield.net/ipa.php](http://www.webyield.net/ipa.php)解析为我想要的 IP 。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:05:17.740

Apache`Allow`和`Deny`规则使用通配符（例如，`Allow from *.example.com`），因此适用于反向 DNS。您的用户的 IP 地址没有反转为该`no-ip.org`地址（他们可能正在解析特定于 ISP 的内容），因此 Apache 拒绝他们访问。

您可能最好只给他们所有的用户名和密码，并使用 HTTP 身份验证（通过[mod_authz_user](http://httpd.apache.org/docs/2.2/mod/mod_authz_user.html)或类似方式）授予他们访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-09T18:50:39.497

这可以通过使用脚本来实现（根据您的需要进行修改）：

```
#!/bin/bash
# Dynamic IP .htaccess file generator
# Written by Star Dot Hosting
# www.stardothosting.com

dynDomain="$1"
htaccessLoc="$2"

dynIP=$(/usr/bin/dig +short $dynDomain)

echo "dynip: $dynIP"
# verify dynIP resembles an IP
if ! echo -n $dynIP | grep -Eq "[0-9.]+"; then
    exit 1
fi

# if dynIP has changed
if ! cat $htaccessLoc | /bin/grep -q "$dynIP"; then

        # grab the old IP
        oldIP=`cat /usr/local/bin/htold-ip.txt`

        # output .htaccess file
        echo "order deny,allow" > $htaccessLoc 2>&1
        echo "allow from $dynIP" >> $htaccessLoc 2>&1
        echo "allow from x.x.x.x" >> $htaccessLoc 2>&1
        echo "deny from all" >> $htaccessLoc 2>&1

        # save the new ip to remove next time it changes, overwriting previous old IP
        echo $dynIP > /usr/local/bin/htold-ip.txt
fi 
```

不仅仅是 cron 它在 .htaccess 文件上生成一个新行：

```
*/15 * * * * /bin/sh /usr/local/bin/.sh yourhostname.no-ip.org /var/www/folder/.htaccess > /dev/null 2>&1 
```

来源：[https ://www.stardothosting.com](https://www.stardothosting.com)

# javascript - 将长度设置为变量或在循环语句中计算长度

> ID：11821156
> 
> 赞同：2
> 
> 时间：2012-08-06T00:00:47.750
> 
> 标签：javascript

在执行 for 循环之前声明具有另一个变量长度的变量是否更有效，或者是否应该在循环内计算长度。

我确定答案取决于计算长度的数组有多大。我只是*经常*看到

```
for ( var i = 1; i <= theVar.length; i++ ) {

} 
```

但后来有人告诉我，这样做的资源密集度较低

```
var theVarLen = theVar.length

for ( var i = 1; i <= theVarLen; i++ ) {

} 
```

因为它避免了每次迭代都重新计算长度。

或者它是否取决于具体情况以至于无法做出明确的法令？

或者，这根本不重要..？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T00:06:32.547

好吧，让我们来了解一下。我在这里创建了一个可以运行的测试：http: [//jsperf.com/loop-length-caching](http://jsperf.com/loop-length-caching)

浏览器似乎在创建（并可能修改）数组后存储它的长度，因此将长度存储在变量中并没有巨大的速度优势。唯一真正的因素（在这种情况下）是访问对象属性和访问变量之间的速度差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T00:03:33.050

可以说，它少了一个指向内部取消引用的指针，但我从未*见过*它在实际代码中以第二种方式完成。我相信人们很难证明你可能获得的任何表现是合理的。

# iphone - 具有多个视图的应用程序架构挑战

> ID：11821157
> 
> 赞同：1
> 
> 时间：2012-08-06T00:00:49.050
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我对 iOS 开发非常陌生，并且想构建以下应用程序：

*   第一个屏幕是带有 4 个选项卡的选项卡栏视图
*   3 个选项卡非常简单，但第 4 个选项卡将您带出选项卡栏视图，并按顺序排列多个视图。它基本上是一个贯穿 10 个屏幕的练习（我不在乎这些屏幕中是否有导航栏），最后你得到一个分数并返回到主标签栏视图。

鉴于我有以下要求，你会如何建议我处理这个问题：

*   在练习的任何给定页面，用户都可以取消并返回主选项卡栏视图（我如何从练习中间返回到该特定页面？或在练习结束时？）
*   每个页面都有一些按钮和东西，所以它不是一系列图像 - 用户采取行动并且必须在最终屏幕上记录和使用（用于得分） - 我应该使用带有分页的滚动视图吗？我读过它，不确定它是否符合我的需要。
*   我应该以模态方式显示 10 个视图控制器并为每个控制器提供一个单独的 UIViewController 吗？

我知道这不仅仅是一个问题，但我想给出上下文，我相信整体战略的一个答案可以完全回答所有这些问题。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:20:10.200

```
UITabBarController *tabBarController=[[UITabBarController alloc]init];
 tabBarController.delegate=self;
    Screen1 *screen1=[[Screen1 alloc]init];
    UINavigationController *nav2=[[UINavigationController alloc]screen1];
 Screen2 *screen2=[[Screen2 alloc]init];
 UINavigationController * nav3=[[UINavigationController alloc]initWithRootViewController:screen2];
UIWindow *samplewindow = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
NSArray *controllers=[NSArray arrayWithObjects:nav2,nav3, nil];
        tabBarController.viewControllers=controllers;
     [self.window addSubview:tabBarController.view];
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:[NSBundle mainBundle]];
 samplewindow.rootViewController = self.viewController;
    [samplewindow addSubview:self.viewController.view];
     [samplewindow makeKeyAndVisible]; 
```

在 AppDelegate.m 中添加此代码，然后它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:07:10.730

只需在第四个选项卡中放置一个导航控制器，然后使用它来浏览问题视图。

每当您想回到本练习的开头时，请使用`[self.navigationController popToRootViewControllerAnimated:YES];`in`Cancel`方法。

如果不想显示导航栏，可以设置

```
self.navigationController.navigationBar.hidden = YES; 
```

# c++ - 参数中的 C++ 协方差

> ID：11821158
> 
> 赞同：22
> 
> 时间：2012-08-06T00:01:04.667
> 
> 标签：c++, virtual, covariance

我想知道为什么 C++ 不支持下面示例中的参数协方差，或者是否有办法实现它？

```
class base {
public:
virtual base* func(base * ptr) { return new base(); }
};

class derived : public base {
 public:
 virtual derived* func(derived * ptr) override { return new derived(); } //not allowed
}; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T00:09:55.193

返回类型是允许的，因为`derived`继承自`base`，但函数参数不能工作 - 并非所有`base`实例都是 a `derived`。在使用不是 a 的参数`func`的指针上调用的情况下应该发生什么？最衍生的实现是不可调用的。`base``derived`

# ember.js - 从 ember 数据到简单快速资源的 GET 请求永远处于“待处理”状态

> ID：11821160
> 
> 赞同：0
> 
> 时间：2012-08-06T00:01:56.087
> 
> 标签：ember.js, express, ember-data

我在`App.store.findAll`处理我在 Express 中设置的 GET 方法句柄的 Ember 数据请求时遇到问题。这是我正在使用的代码：

服务器：

```
var express = require('express');

var app = express();
app.configure(function() {
    app.use(express.static(__dirname + '/public'));
    app.use(express.bodyParser());
    app.use(app.router);
});

app.get('/transactions', function(req, res) {
    console.log('request received');
    res.contentType('application/json');
    res.send([{'foo':'bar'}]);
});

app.listen(8891); 
```

客户：

```
var App = Em.Application.create();
App.store = DS.Store.create({
    revision: 4,
    adapter: DS.RESTAdapter.create({
        bulkCommit: false
    })
});

App.Transaction = DS.Model.extend({
    foo: DS.attr('string')
});

App.transactionsController = Em.ArrayController.create({
    init: function() {
        this.set('content', App.store.findAll(App.Transaction));
    }
});

App.TransactionsView = Em.View.extend({
    templateName: 'transactions'
}); 
```

我可以毫无问题地卷曲 /transactions 路由，但数据没有传递给 Ember。查看 Chrome 中页面加载时发出的请求，我看到了对“/transactions”的请求，但该请求永远处于“待处理”状态。我添加的“收到的请求”日志记录步骤没有被调用。我究竟做错了什么？

# php - 如何防止在源代码中显示 img 标签

> ID：11821166
> 
> 赞同：-1
> 
> 时间：2012-08-06T00:03:09.237
> 
> 标签：php, html

如何防止在源代码中显示以下代码。

**img 标签代码**

```
echo'<img src="jal.gif" alt="Smiley face" height="42" width="42" />'; 
```

**源代码**

```
<img  alt"Smiley face" src="http://www.myweb.com/jal.gif"> 
```

实际上我不想显示用户图像路径。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:07:44.180

我想你想要这样的东西，将图像提交到 html 文件，使用 base64 编码：

```
<img alt="Smiley face" src="data:image/jpeg;base64,<?php echo base64_encode(file_get_contents("jal.gif")); ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:34:54.337

我的最后一个解决方案:)

代码有安全漏洞，如果它对你来说是一个好的解决方案，我将编辑我的帖子并修复这些安全漏洞。没试过代码。但是为了工作，浏览器必须支持会话cookie，这不是完美的解决方案。用户可以通过嗅探器或浏览器右键单击获取图像。完美加密是不可能的。（您也可以使用 ajax post 实现 javscript 解密）

我假设`session_start()`包含在页面中。

**显示图像.php**

```
<?php
    session_start();
    header("Cotent-Type: image/jpeg");
    readfile($_SESSION["files"][$_REQUEST["id"]]);
?> 
```

**索引.php**

```
<?php
    session_start();
    $i=rand();
    $_SESSION["files"][$i]="cat.jpg";
    echo "<img src=\"showimage.php?id=".$id."\" />";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T00:08:09.580

我不知道真正隐藏路径的方法，但是您可以使用 css 至少让用户通过一些研究来找到您的图像的文件路径。将您的图像放在一个 div 中并给该 div 一个背景图像，就像这样

```
<div id="imgdiv"></div> 
```

在 CSS 中：

```
#imgdiv{
    background-image: url('http://www.myweb.com/jal.gif');
} 
```

这也很好，因为用户将无法在浏览器中将您的图像拖走。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T00:05:58.330

您可以使用代理，即使用实际加载所需图像的 PHP 页面。例如，你可以有这个：

```
<img src="my_proxy.php?img=jal.gif" alt="Smiley face" height="42" width="42" /> 
```

然后`my_proxy.php`页面将使用参数实际加载您想要的图像`img`。

# sharepoint - 在未附加的内容数据库中导出站点时出错

> ID：11821173
> 
> 赞同：0
> 
> 时间：2012-08-06T00:03:34.057
> 
> 标签：sharepoint, sharepoint-2010

我有一个共享点 2010 使用的 sql 服务器的内容数据库。

使用中央管理，我可以浏览网站并导出网站。

但是我编写了一个程序来使用共享点 API 来做同样的事情，但是我得到了以下错误。我正在填写设置结构并调用 export.run。

我为导出发送的 url

//vinay10:2434/sites/99156/test112/111

vinay10:2434 是中央管理网络应用程序。

并且使用中央管理员也显示相似的值--- //vinay10:2434/sites/99156 是网站集

站点/99156/test112/111 是站点。

在调用 export.run 之前，我还附加了内容数据库。但我收到以下错误。谁能告诉我我错过了什么

System.IO.FileNotFoundException：Microsoft.SharePoint.Administration.SPUnattachedDatabaseUtility.LookupIdContentDatabase（SPContentDatabase 数据库，字符串 serverRelativeUrl）的站点/99156/temp2/whatsup 在 Microsoft.SharePoint.SPSite..ctor（SPContentDatabase contentDatabase，Uri requestUri，布尔 isHostHeader） Microsoft.SharePoint.Deployment.SPExport.InitializeExport()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:05:44.240

SPExportSettings.UnattachedContentDatabase = "你未附加的内容数据库"

# websocket - 可以在与 HTTP 请求相同的套接字上发送 WebSocket 握手吗？

> ID：11821175
> 
> 赞同：0
> 
> 时间：2012-08-06T00:03:48.300
> 
> 标签：websocket

基本上，标准是否允许这种交互？（Python 伪代码：）

```
import socket
s = socket.create_connection((host, 80))
s.send("GET /index.html HTTP/1.1\nHost:example.com\nConnection:keep-alive\n\n")
s.recv() // Should be a 200
s.send("GET /websocket HTTP/1.1\nHost:example.com\nUpgrade: websocket\nConnection: Upgrade\n\n")
s.recv() // Should be 101 
```

# macos - NSFileManager removeItemAtPath:error: 不尊重 POSIX 权限

> ID：11821179
> 
> 赞同：1
> 
> 时间：2012-08-06T00:04:36.117
> 
> 标签：macos, cocoa, nsfilemanager

我有一些代码可以检查文件是否存在，如果存在，则将其删除。问题是，即使文件不可写，我也无法让它失败。我的代码如下所示：

```
if([theManager fileExistsAtPath:savingAs isDirectory:&destIsDir])
   {
   BOOL itemRemoved=[theManager removeItemAtPath:savingAs error:&err];
   if(!itemRemoved)
      {
      // why?
      NSAlert *rebuildAlert=[NSAlert alertWithMessageText:@"Error removing item" 
        defaultButton:nil alternateButton:nil otherButton:nil
        informativeTextWithFormat:@"%@",[err localizedDescription]];
      [rebuildAlert runModal];
      proceed=NO;
      }
   } 
```

即使我将所有权设置为 root:wheel 并将模式设置为 000（即任何人都无法读取、写入或执行），该文件仍会被静默删除。我运行它的帐户是具有管理员权限的用户帐户，但即便如此，能够杀死 root 拥有的文件似乎也不是很安全。引发错误的唯一方法是使用`chflags uchg` *filename*锁定文件。我还实现了（现在作为存根）`fileManager:shouldRemoveItemAtPath:`委托方法，我可以在必要时检查权限。问题是`NO`从这个方法返回不会导致`removeItemAtPath:`返回错误。重新检查`fileExistsAtPath:`似乎很麻烦。最后，似乎没有一种简单的方法可以消除哪个实例`NSFileManager`发出调用的歧义`removeItemAtPath:`在委托方法中。通常，这些实例是临时对象，因此它们的 id 在任何重要的时间长度内都无效。我可以将 NSFileManager 子类化并添加一个标记实例变量，但这似乎是一把大锤来破解坚果。

总之：

1) removeItemAtPath 忽略它不拥有的文件是正确的行为吗？

2) 在委托方法中不允许删除文件不会传回给调用者`removeItemAtPath`

3）确定哪个调用正在调用委托方法很困难

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T00:18:12.283

这是正确的行为。擦除文件不需要读取文件，只需要包含它的目录。将目录视为文件列表，将文件删除为简单地将其从该列表中删除，这一切都有意义。

# css - Internet Explorer 边距 css hack

> ID：11821180
> 
> 赞同：0
> 
> 时间：2012-08-06T00:04:38.227
> 
> 标签：css, internet-explorer

我试图将两个 div 并排排列在一起。我设法破解了 Firefox 和 chrome 的 CSS，但在使用 Internet Explorer 时遇到了问题。我看过这里，谷歌发现了一些但仍然有问题。

这是网站

[http://colmandesigns.123abc.co.nz/dev/brittens/index.html](http://colmandesigns.123abc.co.nz/dev/brittens/index.html)

这是我的CSS

[http://codepad.org/Wohvhj3h](http://codepad.org/Wohvhj3h)

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:38:01.273

您的问题与您分隔元素的方式有关。要使用此结构对齐元素，您必须删除所有将锚点与图像分开的 **<br>标签（在“staffimages”内）并使用 CSS 边距。**

```
    <div class="staffimages">
    <a href="#">
    <img src="images/staff.jpg" width="50" height="50" alt="Johnny" border="0">
    </a>
    <br> -- 删除这个
    <br> -- 也删除这个（等等）

```

另外，我建议您不要使用特定于浏览器的 CSS hack，除非没有其他方法可以解决问题。

您可以在下面看到与您的 HTML 文件一起使用的 CSS 片段。

```
    @charset "utf-8";
    /* CSS 文档 */

    正文 {边距：0 自动；}

    .container {margin:0 auto; 宽度：1000px；高度：950 像素；背景图像：url（图像/container.png）；}

    ＃返回 {
    位置：绝对；
    左：0px；
    顶部：16px；
    宽度：700 像素；
    右：700px；
    高度：126px；
    z 指数：-1；
    背景图像：url（图像/bgbg.png）；
    }

    /* 标题 */

    .header {宽度：982px; 高度：370px；左边距：9px；背景图像：网址（图像/header.jpg）；}
    .navibg {背景图像：url（图像/navibg.png）；宽度：983px；高度：56 像素；}
    .logo {margin-top:-40px;}

    /* 内容标题 */

    #欢迎{宽度：89px; 高度：22px；填充左：50px；填充顶部：30px；向左飘浮;}
    #services {宽度：89px; 高度：22px；左边距：-90px；填充顶部：250px；向左飘浮;}
    #contactus {宽度：89px; 高度：22px；填充左：50px；填充顶部：30px；向左飘浮;}
    #makinglifeeasy {宽度：89px; 高度：22px；填充左：30px；填充顶部：30px；向左飘浮;}
    .分隔符{宽度：300px; 浮动：对；填充顶部：30px；填充右：90px;}
    #team {位置：相对；边距顶部：30px；高度：19px；宽度：78px；浮动：对；右边距：-105px；}

    /* 导航 */

    .navi {浮动：右；填充右：50px；填充顶部：3px；}

    /* 内容 */

    .welcomecolumn {宽度：500px; 高度：自动；向左飘浮; 填充左：6px；填充顶部：5px；字体系列：Verdana、Arial、Helvetica、无衬线；字体大小：11px；文本对齐：对齐；颜色：#505050; 行高：150%；}
    .servicecolumn {宽度：500px; 高度：自动；向左飘浮; 填充左：6px；填充顶部：5px；字体系列：Verdana、Arial、Helvetica、无衬线；字体大小：11px；文本对齐：对齐；颜色：#505050; 行高：150%；}

    .list1 {浮动：左；左边距：-20px;}
    .list2 {浮动：右；填充右：200px;}

    /* 页脚 */

    .footer {背景图片：url（图片/footer.png）；宽度：982px；高度：65px；左边距：9px；边距顶部：460px；颜色：#505050}
    .footernavi {字体大小：9px; 字体系列：Verdana、Arial、Helvetica、无衬线；浮动：对；填充右：60px；填充顶部：27px；}
    .footernavidetails {字体大小：10px; 字体系列：Verdana、Arial、Helvetica、无衬线；向左飘浮; 填充左：308px；填充顶部：27px；颜色：#FFFFFF；}
    .footertext {padding-left:40px; 字体大小：10px；字体系列：Verdana、Arial、Helvetica、无衬线；填充顶部：110px；填充底部：5px；颜色：#aeaeae; 文本对齐：中心}

    /* 团队 */

    .staffimages {
        高度：自动；
        向左飘浮;
        左边距：12px；
        边距顶部：15px；
    }

    .staffimages 一个{
        显示：内联块；
        边距底部：20px；
    }

    .stafftext1，.stafftext2，.stafftext3，.stafftext4，.stafftext5 {
        宽度：150px；
        向左飘浮;
        左边距：80px；
        颜色：#505050;
        字体系列：Verdana、Arial、Helvetica、无衬线；
        字体大小：10px；
        文本对齐：对齐；
        位置：绝对；
    }

    .stafftext1 {
        顶部：30px；
    }

    .stafftext2 {
        顶部：100px；
    }

    .stafftext3 {
        顶部：170px；
    }

    .stafftext4 {
        顶部：242px；
    }

    .stafftext5 {
        顶部：311px；
    }

    /* 阅读更多 */

    #readmore，#readmore2，#readmore3，#readmore4，#readmore5 {
        宽度：100px；
        高度：自动；
        浮动：对；
        位置：绝对；
        左边距：80px；
    }

    ＃阅读更多 {
        顶部：66px；
    }

    #readmore2 {
        顶部：135px；
    }

    #readmore3 {
        顶部：204 像素；
    }

    #readmore4 {
        顶部：275 像素；
    }

    #readmore5 {
        顶部：345 像素；
    }

        。联系方式
            {字体系列：Verdana，Arial，Helvetica，无衬线；字体大小：12px；宽度：400px；填充左：8px；行高：40%；颜色：#626262}

        .main {颜色：#626262}

        /* 谷歌 */

    。谷歌 {
        宽度：300 像素；
        高度：305px；
        向左飘浮;
        左边距：8px；
        边距顶部：12px；
        边距底部：20px；}    
    /* 链接 */

    a.colman：链接{颜色：#aeaeae；text-decoration:none} /* 未访问的链接 */
    a.colman:visited { 颜色:#aeaeae; text-decoration:none} /* 访问过的链接 */
    a.colman：悬停{颜色：#0c3976; text-decoration:none} /* 鼠标悬停在链接上 */
    a.colman:active { 颜色:#aeaeae; text-decoration:none} /* 选中的链接 */

    a.footerlinks:link { color:#FFFFFF;} /* 未访问的链接 */
    a.footerlinks:visited { color:#FFFFFF;} /* 访问过的链接 */
    a.footerlinks:hover {color:#FFFFFF;} /* 鼠标悬停在链接上 */
    a.footerlines:active { color:#FFFFFF;} /* 选中的链接 */

```

# c++ - 在 C++ 中定义类似 Matlab 的 .* 运算符？

> ID：11821181
> 
> 赞同：4
> 
> 时间：2012-08-06T00:04:48.330
> 
> 标签：c++, matlab, operators

Matlab 能够区分“正确的”矩阵乘法和具有不同运算符的逐元素矩阵乘法，因此前者完成为`A * B`，后者完成为`A .* B`。这非常方便，我想知道是否有一种方法可以在 C++ 中为自定义矩阵类实现相同的功能（同样适用于`./`and `.^`）。也就是说，我想知道是否有可能通过定义宏或任何其他方法来实际编译如下内容：

```
MyMatrix A(2,3), B(2,3), C(2,3); //These are 2x3 matrices for the sake of concreteness
C = A .* B; //Similarly for ./, .^ 
```

我尝试用一​​些简单`#define`的函数来做这个，但无法让它工作，所以我想我会把它放到 SO 上。我可以接受'near misses'，即如果`.*`不能工作但不知何故`:*`可以，就足够了。注意，我专门寻找运算符——当然，这种行为可以通过函数以显而易见的方式完成，但类似 ​​Matlab 的运算符会非常方便。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T02:42:35.937

这是一种与 Managu 的回答类似的技术，只是不使用宏......

```
struct Mat;
struct EleWise {
  EleWise(){}
  double mat[3][3];
};

struct Mat {
  Mat(){}

  friend Mat operator / ( EleWise& e, const Mat& m ) 
  { 
     return Mat(); // perform elewise divide
  }
  EleWise _;
};

int main( int argc, char** arg ) {
  Mat a;
  Mat b;

  Mat c = a ._/ b;
  return 0;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T00:28:30.713

并不是说我真的建议这样做（这是可憎的）。比如说，你可以创建一个小的包装类，当它乘以一个矩阵时，它会执行一个元素乘法。然后给矩阵类一个`element_wise()`方法，它返回这样一个包装器。然后，您冷“创建”运算符`_*`,`_/`等：

```
#define _ .element_wise()

A = B _* C; // really B.element_wise() * C 
```

或者通过在构造时给每个矩阵一个这样的包装器并调用它来将预处理器排除在外`_`，从而允许：

```
A = B ._* C;
B = A ._/ C; 
```

# php - 这是 MVC 中的业务逻辑还是视图？

> ID：11821182
> 
> 赞同：2
> 
> 时间：2012-08-06T00:04:57.880
> 
> 标签：php, model-view-controller

关于 MVC 结构的新手问题在这里。所以在 MVC 中，我目前在我的视图中有一个页面来显示来自数据库查询的结果列表，在这段代码中，我实例化了一个类，运行一个用于 sql 查询的方法，最后有一个 for each 循环和然后用 div 显示它。

所以我的问题是，如果这段代码被认为是业务逻辑并且应该在模型中的方法中，还是它是视图的一部分？

我希望你明白我的意思 =) 谢谢！

```
$listholder = new Categories_Model(); 
$data = $listholder->getCategories();

       $i = 1;
        foreach ($data as $row) {

            if ($i & 1) {
                echo '<div id="horizontalContainer" style="float: none; height: 50px";>';
                echo '<div id="listoverview1"><a href="'.URL.'categories/show/'.$row['id'].'">'.$row['catname'].'</a>';
                echo '</div>';
            } else {
                echo '<div id="listoverview1"><a href="'.URL.'categories/show/'.$row['id'].'">'.$row['catname'].'</a>';
                echo '</div></div>';
            }

            $i++;
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:47:29.337

不，该代码主要是视图代码。它的唯一目的是允许外部进程（人类）以它喜欢的形式查看数据。假设第一行的检查只对外部流程很重要，对您的业务逻辑不重要

模型代码塑造、获取和设置数据，其中一些是持久化的（数据库等），其中一些是按需计算的

关于模型或视图应该做的事情的一些概括和简化的例子：

*   模型计算一些财务数据的总和
*   视图标记每个偶数行，以便可以在视图中使用阴影背景进行渲染

此外，在经典的 MVC 系统中，您的前两行代码将在控制器中，它将通过使用模型和模型方法来组织数据集来获取数据。然后 MVC 系统将该数据传递给选定的视图以进行渲染

有很多基于 PHP 的 MVC 框架，如 CAKE、KISS 等（并非所有框架都很好！）。如果您的口袋里有几美元，请为自己节省一些时间和压力，并加载 Microsoft MVC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:22:56.580

根据您的问题，您可能对 MVC 有所了解，这与其他开发人员认为 MVC 是什么无关。这可能会发生，尤其是现在，因为一些框架使用这三个字母作为标语，但实际上没有提供它。

从您在问题中概述的代码中，我会说这是一个典型的[*事务脚本*](http://martinfowler.com/eaaCatalog/transactionScript.html)，并且没有涉及特定类型的模型或视图层。

事务脚本传输业务逻辑，您不需要对视图或模型进行太多推测，只需将所有内容保存在事务脚本中即可。

您的事务脚本往往会变成意大利面条代码，但是，随着时间的推移，在这里和那里进行一些小的重构，您应该能够减少重复代码，而且我认为您的应用程序不会变得那么大，以至于实际上不再保留它实际上是不可行的在事务脚本中维护。

那么，如果一切都与其他一些经过充分验证的模式井然有序，为什么还要关注 MVC？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:32:10.573

MVC 设计模式的目标是将表示与领域业务逻辑分离。出于这个原因，业务逻辑只保留在模型层中*（模型是一个层而不是任何单个类，如果你有一个名为 的类，那么你`Model`做错了）*，整个表示层都包含视图和控制器。

控制器实例是处理用户请求并改变模型状态的视图实例。

视图实例是那些包含表示逻辑的实例（就像域对象包含模型层中的业务逻辑一样）。视图从模型层获取信息并决定使用哪些模板，甚至是否需要模板。视图在您的网站中生成响应，并且*重定向标头*的发送也是响应的形式，根本不需要任何模板。

此外，您必须了解，将经典 MVC 模式与 PHP 一起使用是不可能的（并且在少数 Web 开发中非常复杂且不切实际，这将提供这样的选项）。相反，您将使用一种受 MVC 启发的模式。

这些模式主要通过* view*如何*从模型层获取信息来区分。主要选项有：Model2 MVC、MVP、MVVM 和 HMVC。

* * *

在您的情况下，视图应该从模型层获取一组类别，然后，如果列表不为空并且没有引发异常，请选择一个生成未排序 HTML 列表的模板。

业务逻辑将保留在模型层（在处理类别的领域对象中），视图中的表示逻辑以及将其全部转换为 HTML 的过程 - 在模板中，选择哪个视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T00:44:00.100

**以 Rails 或 CakePHP 为例**，您的代码不遵循 mvc 模式。

*   模型应该只包含业务逻辑（查询/使用对象的字段做某事）
*   控制器应该“只”工作于接收带有参数的网页请求并发回正确的页面
*   View 基本上只是一个 html 页面

显然，这是对 html 是什么的简短介绍。

在你的情况下，这个想法是：

```
$listholder = new Categories_Model(); 
$data = $listholder->getCategories(); 
```

这是一个控制器代码（通常），`getCategories`是一个模型方法（可以）。然后控制器将发送一些参数来查看，这将知道如何向用户显示这些参数，在这种情况下是您的`$data`变量。想象一下`printMyView($view_file_path, $data)`

视图将是这样的：categories/show/">'; categories/show/">';

请参阅[http://php.net/manual/en/control-structures.alternative-syntax.php](http://php.net/manual/en/control-structures.alternative-syntax.php)了解替代控制结构语法（非常好）。也许 URLS 用 sprintf 或类似的东西写得更好（不是我怎么做的）。

基本上你需要 3 个文件（逻辑拆分），而且规则很简单：不要在 Controller 中编写 html，也不要在 Model 中编写。

# mysql - MySQL 数据库设计用于存储具有国际化和历史支持的地理空间数据

> ID：11821183
> 
> 赞同：0
> 
> 时间：2012-08-06T00:05:09.923
> 
> 标签：mysql, internationalization, historical-db

我正在研究一个数据库模式来存储地理空间数据，我需要支持点名称和描述等字符串的国际化，并支持记录所有修改。

这是我当前的架构：

```
points
---------------
rev_id (int autoincrement)
rev_from (date)
rev_to (date)
rev_operation (insert/update/delete)
rev_user (user who has made the modification)
point_id (int)
point_geom (geometry)
point_name_en
point_desc_en
point_name_fr
point_desc_fr 
```

它工作正常，但是每次添加新语言时我都必须更新设计，并且在我更新一个翻译的情况下，我必须复制一整行......这会导致数据重复。所以为了避免我想把本地化的字符串放在另一个表中：

```
points
---------------
rev_id (int autoincrement)
rev_from (date)
rev_to (date)
rev_operation (insert/update/delete)
rev_user (user who has made the modification)
point_id (int)
point_geom (geometry)

points_text
---------------
point_id (int)
lang_code (en/fr/es/it etc...)
point_name
point_desc 
```

它有效，但我无法跟踪翻译的修改。

设计一个数据库的最佳方法是什么，该数据库存储对象及其属性的翻译和属性修改的历史。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:58:08.057

为什么不将 rev_ 字段添加到 points_text （我认为有错误 - 请参阅我对问题的评论）？

您需要将两个概念分开：插入点和插入文本。两者都可以进行修订。有时两者可能同时发生。

如果您愿意，您可以将该修订数据移出到一个单独的表中，并从两个点表中引用它。当两者一起修改时，这将让您共享相同的条目。

# node.js - 函数未从 nodejs 应用程序中的简单函数传递正确的返回值

> ID：11821185
> 
> 赞同：0
> 
> 时间：2012-08-06T00:05:17.473
> 
> 标签：node.js, javascript

我有以下代码，并正在尝试使用 node.js 制作转盘机器人。这段代码说，当用户键入“q+”时，我们必须确保它还没有在队列中，它还不是 DJ，如果它满足这两个要求，则将它们添加到队列中。否则，如果它不满足前两个条件之一，请告诉用户并且不要触摸队列。

我的问题是“isCurrentDJ（userId）”。当我通过该函数传递 userId 时，该函数给了我正确的答案。然而，即使答案是“真”并且 isCurrentDJ(userId) 函数中的 console.log() 函数证明了这一点，该函数也总是会传回“假”。

我不是最精通 js 的人，所以我认为这可能是一个变量范围问题。但我真的不确定，并且已经为此苦苦挣扎了好几个小时！任何帮助将不胜感激。谢谢！

```
// When someone speaks, listen to see if it is one of the q commands
bot.on('speak', function (data) {
var name = data.name;
var text = data.text;
var userId = data.userid;

// q+ :: Add to Queue
if (text.match(/^q\+$/)) {

  //Index is the position in the queue that this person's name is found.
  //If its not found, -1 is returned.
  var index = queue.indexOf(name);

  //Function to determine if the user is currently a DJ
    function isCurrentDJ(user_id, callback){
      bot.roomInfo(false, function (data) {
        var djList = data.room.metadata.djs;
        for (i = 0; i < djList.length; i++){
          if (djList[i] == user_id){
            console.log('recognized as a DJ'); //Consistently printed!
            callback(true);
          }
        }
        callback(false);
      });
    }

  isCurrentDJ(userId, function(isDJ) {
    //If the user is already in the queue
    if(index > -1){
      //Tell them they are already in there
      bot.speak('You are already on the list');
    } else if(isDJ){
      //Otherwise if they are already a DJ tell them that
      bot.speak('You are already a DJ, '+name);
    }else{
      //Otherise if they are not in the queue add user to end of queue
      queue.push(name);
      //Tell them about it and the updated q
      bot.speak(name+' has been added to queue.');
    }
  });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:20:23.523

你的问题是这`bot.roomInfo`是一个异步函数。

当你调用它时，它会立即返回并且`currDJ`仍然是假的。稍后，回调 ( `function(data) {...`) 被调用。大多数 node.js 的 API 都是异步的，因此您的代码永远不会阻塞。

以下是你应该如何重写你的代码：

```
// When someone speaks, listen to see if it is one of the q commands
bot.on('speak', function (data) {
   var name = data.name;
   var text = data.text;
   var userId = data.userid;

   // q+ :: Add to Queue
  if (text.match(/^q\+$/)) {

  //Index is the position in the queue that this person's name is found.
  //If its not found, -1 is returned.
  var index = queue.indexOf(name);

  //Function to determine if the user is currently a DJ
    function testCurrentDJ(user_id, cb){

      bot.roomInfo(false, function (data) {
        var djList = data.room.metadata.djs;
        for (i = 0; i < djList.length; i++){
          if (djList[i] == user_id){
            console.log('recognized as a DJ'); //Consistently printed!
            return cb(true);
          }
        }

        cb(false);
      });
    }

  //If the user is already in the queue
  if(index > -1){
    //Tell them they are already in there
    bot.speak('You are already on the list');
    return;
  }

  testCurrentDJ(userId, function(isDJ) {
      //Otherwise if they are already a DJ tell them that
      if(isDJ) {
        bot.speak('You are already a DJ, '+name);
      } else {
       //Otherise if they are not in the queue add user to end of queue
       queue.push(name);
       //Tell them about it and the updated q
       bot.speak(name+' has been added to queue. Is Current DJ? '+isDJ);
  }

    })
} 
```

我刚刚更新了您的代码以向您展示基本思想。在 node.js 的 API 中，回调的第一个参数通常是一个错误对象，如果一切正常，则该对象为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:10:55.720

`bot.roomInfo`也许是一个异步函数？如果是这样，值`currDJ`将设置为 true，但为时已晚，因为您已经返回它。`currDJ`在调用回调之前，您不能对值进行操作。

您对异步函数的概念有多熟悉？

# c# - 即使在 ASP.net 中使用实体框架插入项目后，Listview 控件也不会关闭插入项目

> ID：11821186
> 
> 赞同：0
> 
> 时间：2012-08-06T00:05:21.460
> 
> 标签：c#, asp.net, listview, ado.net-entity-data-model

我正在尝试通过保存在更新面板中的 listview 控件插入数据。我使用 SQL 数据源来显示现有项目。但是为了插入数据，我使用存储过程并通过 ADO.net 实体框架调用它们。我看到一个奇怪的行为，如果我对 SQLdatasource 使用直接插入命令，插入模式在成功插入数据后关闭，但是当我通过存储过程进行插入时插入模式保持不变（文本框可见）。我甚至使用 listview_iteminserted 将 editindex 设置为 -1 并将 insertitemposition 设置为 none。但仍然没有成功。下面是代码...

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
  <ContentTemplate>
    <asp:ValidationSummary ID="vsumSaveProject" runat="server" ValidationGroup="vgrpSaveProject" EnableClientScript="true" SkinID="valSummaryError"  DisplayMode="BulletList" HeaderText="Please correct the below errors." CssClass="validation-summary-errors" />
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td>
          <asp:ImageButton ID="imgbNew" runat="server"
                           CausesValidation="False"
                           CommandName="New"
                           ImageUrl="../images/listviews/add_icon_mono.gif"
                           ToolTip="Add New"
                           Width="25"
                           onclick="imgbNew_Click" />
        </td>
      </tr>
      <tr>
        <td>
          <asp:ListView ID="lvProjects" runat="server"
                        DataKeyNames="Project_Code"
                        DataSourceID="SQLProjectsDS"
                        onitemcommand="lvProjects_ItemCommand" 
                        oniteminserted="lvProjects_ItemInserted" 
                        onitemcanceling="lvProjects_ItemCanceling" 
                        onitemediting="lvProjects_ItemEditing"> 
```

SQl 数据源如下..

```
 <asp:SqlDataSource ID="SQLProjectsDS" runat="server"
                    ConnectionString="<%$ ConnectionString %>"
                    SelectCommand="SELECT Projects.Project_Code, Projects.Project_Name, Projects.Project_Area, Projects.Project_Status, Projects.Display_Mask,Projects.Site_ID SiteID, Site_Details.Site_Nm FROM Projects INNER JOIN Site_Details ON Projects.Site_ID = Site_Details.Site_ID" /> 
```

后面的代码是...

```
private void InsertItemstoDB(parameters.....)
{
  using(entity framework)
  {
    Do Insertions using stored procedure
  }
} 
```

并在 Item Inserted 事件中

```
protected void lvProjects_ItemInserted(object sender, ListViewInsertedEventArgs e)
{
    this.CancelAddNew();         
}

private CancelAddNew()
{
  lvProjects.InsertItemPosition = InsertItemPosition.None;
        imgbNew.Enabled = true;
        lvProjects.EditIndex = -1;
} 
```

现在，如果我创建插入命令并将其发送到 SQLDataSource.InsertCommand，这就是相同的代码。使用存储过程插入，插入工作正常，但插入模式停留在显示中，就好像什么都没发生一样。刷新页面时会出现新数据。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:38:43.170

我想您需要在插入新项目后重新绑定列表视图，即应该刷新它以适应更改。如果您使用的是 UpdatePanel，则可以在插入完成后对其进行更新。

# java - CircularFifoBuffer 在 android 应用程序上初始化后崩溃

> ID：11821188
> 
> 赞同：1
> 
> 时间：2012-08-06T00:05:32.300
> 
> 标签：java, android, collections, structure

经过测试，它可以在非 android 程序上运行，但在 Android 上初始化后立即崩溃。Log cat 也没有产生任何错误消息。我从[CircularFifoBuffer](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)找到了这个。

有什么明显的问题吗？

**编辑：**如果我将 jar 文件添加到 libs 文件夹（不是外部）然后将其添加到构建路径，我会收到此错误消息。但是，如果我在外部添加 jar 文件，则不会出现此错误。

> [2012-08-05 20:56:03 - wifiCollection] Dx 警告：忽略不带有关联 EnclosureMethod 属性的匿名内部类 (org.apache.commons.collections.SequencedHashMap$1) 的 InnerClasses 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它*不是*内部类。

**编辑2**：

> 08-05 21:12:48.837: I//system/bin/batteryd(1189): 1566474 v_bat 3.678 (3.677), i_supply 0.500, i_demand 0.282 => v_bat_idle 3.649 (3.649), 41% (41%, 41%) )，状态 5
> 
> 08-05 21:12:50.837: I//system/bin/batteryd(1189): 1568477 v_bat 3.678 (3.677), i_supply 0.500, i_demand 0.282 => v_bat_idle 3.649 (3.649), 41% (41%, 41%) )，状态 5
> 
> 08-05 21:12:51.267: I/ActivityManager(1291): 开始活动: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.jimmyc。 summer.wificollection/.WiFiLocationApp bnds=[245,418][355,553] }
> 
> 08-05 21:12:51.337: I/dalvikvm(1374): Jit: 将 JitTable 的大小从 4096 调整为 8192
> 
> 08-05 21:12:51.353：I/ActivityManager(1291)：为活动 com.jimmyc.summer.wificollection/.WiFiLocationApp 启动 proc com.jimmyc.summer.wificollection：pid=1782 uid=10045 gids={1015}
> 
> 08-05 21:12:51.634: D/dalvikvm(1782): GC_FOR_MALLOC 在 56 毫秒内释放了 1571 个对象/198264 个字节
> 
> 08-05 21:12:51.751: V/LocationManagerService(1291):_removeUpdates: listener = Receiver{45a6e008 Listener android.os.BinderProxy@45a6e4b8}
> 
> 08-05 21:12:51.774：V/标记（1782）：应用程序启动
> 
> 08-05 21:12:51.774：V/标记（1782）：检查 wifi
> 
> 08-05 21:12:51.774: V/Tagging(1782): 创建新的 wifiMode
> 
> 08-05 21:12:51.782: E/dalvikvm(1782): 找不到类 'org.apache.commons.collections.buffer.CircularFifoBuffer'，引用自方法 com.jimmyc.summer.wificollection.WiFiLocationApp$wifiMode。
> 
> 08-05 21:12:51.782: W/dalvikvm(1782): VFY: 无法解析 Lcom/jimmyc/summer/wificollection/WiFiLocationApp$ 中的新实例 575 (Lorg/apache/commons/collections/buffer/CircularFifoBuffer;)无线模式；
> 
> 08-05 21:12:51.782: D/dalvikvm(1782): VFY: 在 0x0032 处替换操作码 0x22
> 
> 08-05 21:12:51.782: D/dalvikvm(1782): VFY: Lcom/jimmyc/summer/wificollection/WiFiLocationApp$wifiMode 中的死代码 0x0034-0041；。(Lcom/jimmyc/summer/wificollection/WiFiLocationApp;)V
> 
> 08-05 21:12:51.790: I/dalvikvm(1782): 找不到方法 org.apache.commons.collections.buffer.CircularFifoBuffer.isFull，引用自方法 com.jimmyc.summer.wificollection.WiFiLocationApp$wifiMode.detectStableEnvironment
> 
> 08-05 21:12:51.790: W/dalvikvm(1782): VFY: 无法解析虚拟方法 3504: Lorg/apache/commons/collections/buffer/CircularFifoBuffer;.isFull ()Z
> 
> 08-05 21:12:51.790: D/dalvikvm(1782): VFY: 在 0x0006 处替换操作码 0x74
> 
> 08-05 21:12:51.790: D/dalvikvm(1782): VFY: Lcom/jimmyc/summer/wificollection/WiFiLocationApp$wifiMode 中的死代码 0x0009-0230；.detectStableEnvironment ()Z
> 
> 08-05 21:12:51.790: I/dalvikvm(1782): 找不到方法 org.apache.commons.collections.buffer.CircularFifoBuffer.size，引用自方法 com.jimmyc.summer.wificollection.WiFiLocationApp$wifiMode.match
> 
> 08-05 21:12:51.790: W/dalvikvm(1782): VFY: 无法解析虚拟方法 3506: Lorg/apache/commons/collections/buffer/CircularFifoBuffer;.size ()I
> 
> 08-05 21:12:51.790: D/dalvikvm(1782): VFY: 在 0x000f 处替换操作码 0x74
> 
> 08-05 21:12:51.790: D/dalvikvm(1782): VFY: Lcom/jimmyc/summer/wificollection/WiFiLocationApp$wifiMode;.match ()Z 中的死代码 0x0012-0227
> 
> 08-05 21:12:51.790: I/dalvikvm(1782): 找不到方法 org.apache.commons.collections.buffer.CircularFifoBuffer.add，引用自方法 com.jimmyc.summer.wificollection.WiFiLocationApp$wifiMode.processResults
> 
> 08-05 21:12:51.790: W/dalvikvm(1782): VFY: 无法解析虚拟方法 3502: Lorg/apache/commons/collections/buffer/CircularFifoBuffer;.add (Ljava/lang/Object;)Z
> 
> 08-05 21:12:51.790: D/dalvikvm(1782): VFY: 在 0x0020 处替换操作码 0x6e
> 
> 08-05 21:12:51.790: D/dalvikvm(1782): VFY: Lcom/jimmyc/summer/wificollection/WiFiLocationApp$wifiMode 中的死代码 0x0023-0050；.processResults ()V
> 
> 08-05 21:12:51.790: D/dalvikvm(1782): VFY: Lcom/jimmyc/summer/wificollection/WiFiLocationApp$wifiMode 中的死代码 0x0074-00f0；.processResults ()V
> 
> 08-05 21:12:51.798: W/dalvikvm(1782): VFY: 无法找到签名中引用的类 (Lorg/apache/commons/collections/buffer/CircularFifoBuffer;)
> 
> 08-05 21:12:51.798: I/dalvikvm(1782): 找不到方法 org.apache.commons.collections.buffer.CircularFifoBuffer.iterator，引用自方法 com.jimmyc.summer.wificollection.WiFiLocationApp$wifiMode.takeAverage
> 
> 08-05 21:12:51.798: W/dalvikvm(1782): VFY: 无法解析虚拟方法 3505: Lorg/apache/commons/collections/buffer/CircularFifoBuffer;.iterator ()Ljava/util/Iterator;
> 
> 08-05 21:12:51.798: D/dalvikvm(1782): VFY: 在 0x001b 处替换操作码 0x74
> 
> 08-05 21:12:51.798: D/dalvikvm(1782): VFY: Lcom/jimmyc/summer/wificollection/WiFiLocationApp$wifiMode 中的死代码 0x001e-0419；.takeAverage (Lorg/apache/commons/collections/buffer/CircularFifoBuffer ;)Ljava/util/Map;
> 
> 08-05 21:12:51.798: W/dalvikvm(1782): VFY: 无法找到签名中引用的类 (Lorg/apache/commons/collections/buffer/CircularFifoBuffer;)
> 
> 08-05 21:12:51.798：V/标记（1782）：启动 WiFi 模式
> 
> 08-05 21:12:51.798: D/AndroidRuntime(1782): 关闭 VM
> 
> 08-05 21:12:51.806: W/dalvikvm(1782): threadid=1: 线程以未捕获的异常退出 (group=0x4001d8a8)
> 
> 08-05 21:12:51.806：E/AndroidRuntime（1782）：致命异常：主要
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): java.lang.NoClassDefFoundError: org.apache.commons.collections.buffer.CircularFifoBuffer
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): at com.jimmyc.summer.wificollection.WiFiLocationApp$wifiMode.(WiFiLocationApp.java:182)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 com.jimmyc.summer.wificollection.WiFiLocationApp.onResume(WiFiLocationApp.java:1272)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.app.Activity.performResume(Activity.java:3823)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.os.Looper.loop(Looper.java:123)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 android.app.ActivityThread.main(ActivityThread.java:4627)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 java.lang.reflect.Method.invoke(Method.java:521)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
> 
> 08-05 21:12:51.806: E/AndroidRuntime(1782): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
> 
> 08-05 21:12:51.806：E/AndroidRuntime（1782）：在 dalvik.system.NativeStart.main（本机方法）
> 
> 08-05 21:12:51.814：W/ActivityManager(1291)：强制完成活动 com.jimmyc.summer.wificollection/.WiFiLocationApp
> 
> 08-05 21:12:52.009: D/dalvikvm(1291): GC_FOR_MALLOC 在 76 毫秒内释放了 11331 个对象/567768 个字节
> 
> 08-05 21:12:52.314：W/ActivityManager(1291)：HistoryRecord{457131f0 com.jimmyc.summer.wificollection/.WiFiLocationApp} 的活动暂停超时
> 
> 08-05 21:12:52.314：D/传感器（1291）：使用 MMA7660FC 加速度计（名称=MMA7660FC 加速度计）
> 
> 08-05 21:12:52.321：D/传感器（1291）：get_orientation 肖像设备
> 
> 08-05 21:12:52.431: V/LocationManagerService(1291):_requestLocationUpdates: listener = Receiver{45711848 Listener android.os.BinderProxy@45a461c8}
> 
> 08-05 21:12:52.840: I//system/bin/batteryd(1189): 1570480 v_bat 3.678 (3.677), i_supply 0.500, i_demand 0.282 => v_bat_idle 3.649 (3.649), 41% (41%, 41%) )，状态 5

```
public class test () {
    CircularFifoBuffer f1 = null;
    CircularFifoBuffer f2 = null;

    public test () {
        Log.v (TAG, "Starting...");
        try {
            f1 =  new CircularFifoBuffer(4);
            f2 = new CircularFifoBuffer(4);
        } catch (Exception e) {
            e.printStackTrace();
            Log.v (TAG, "Error: " +e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:59:11.763

检查库的 jar 依赖项。你可能会遗漏一些东西。（怀疑你说你已经在Android之外测试过它）。

您可能需要从源代码构建以使其工作，因为 jar 可能是使用不同版本的 Java 构建的（Android 支持 Java 6 而不是 7）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:14:59.683

从 logcat 输出来看，您的 apk 中似乎没有包含该类：

```
08-05 21:12:51.782: E/dalvikvm(1782): Could not find class 'org.apache.commons.collections.buffer.CircularFifoBuffer', referenced from method com.jimmyc.summer.wificollection.WiFiLocationApp$wifiMode.<init> 
```

Add 会说您最好的选择是获取源代码，将其包含在您的项目中，然后在您的构建环境中重新编译它。

# .net - 为什么在 CQRS 中发生事件后更新 AggreateRoot

> ID：11821191
> 
> 赞同：0
> 
> 时间：2012-08-06T00:05:42.510
> 
> 标签：.net, cqrs

我试图从今天创建的许多 CQRS 框架中学习。我看到当 AR 改变状态时，我们首先存储事件。一旦事件在事件存储中，我们将使用更改更新内存中的 AR 对象。我们这样做有什么理由吗？在大多数 CQRS 实现中，工作单元与使用内部静态对象的请求线程相关联。所以我的问题是，一旦事件存储在 eventstore 中，是否真的有必要更新内存中的 AR 对象？

我刚刚开始了解 CQRS 的世界，所以怀疑可能看起来很愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:53:53.510

在事件处理程序中更新聚合允许从历史事件列表（EventStore）重新创建聚合。如果您在事件处理程序之外更新内部状态，您可能无法正确重建聚合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:59:12.113

也只是学习，但我相信您只需要在需要状态更新以进行进一步的业务决策时才需要内部状态更新。即：根据命令决定要触发什么事件。

当然，另一种方法是在每个接收到的命令上从事件存储中重建所需的状态，但我想保持内部状态可以看作是这个过程的一种缓存机制。

# html - 如何在 Objective C 中解析 HTML

> ID：11821194
> 
> 赞同：1
> 
> 时间：2012-08-06T00:06:17.100
> 
> 标签：html, objective-c, ios, parsing

任何机构都可以帮助我！我想为 Objective C 解析一些来自 web 的 HTML 代码，HTML 代码如下所示：

```
<div class="linkSummary">
<a href="video_page.php?id=2309"><img class="video_thumbnail" width="120" height="90" src="video_thumbnails/vthumb_2309.jpg"></a>

<div class="video_title"><a href="video_page.php?id=2309">المپیک لندن؛ اهداء مدال کشتی فرنگی ۵۵ کیلوگرم </a></div>
<div class="video_league"><a href="videos.php?cupID=23">المپیک لندن</a></div>
<div class="video_date">&#1777;&#1781; &#1605;&#1585;&#1583;&#1575;&#1583; &#1777;&#1779;&#1785;&#1777; (<span dir="ltr">5 August 2012</span>)</div>
<div class="send_details">
    <span class="icon_holder"><img width="22" height="25" class="rollover v1" src="image_slices/icon_ball_off.jpg" hover="image_slices/icon_ball_on.jpg" vid="1" otid="4" oid="2309"><img width="22" height="25" class="rollover v2" src="image_slices/icon_yellow_off.jpg" hover="image_slices/icon_yellow_on.jpg" vid="2" otid="4" oid="2309"><img width="22" height="25" class="rollover v3" src="image_slices/icon_red_off.jpg" hover="image_slices/icon_red_on.jpg" vid="3" otid="4" oid="2309"></span>&#1578;&#1575; &#1575;&#1604;&#1575;&#1606; &#1777;&#1780; &#1606;&#1592;&#1585; &#1583;&#1585; &#1605;&#1608;&#1585;&#1583; &#1575;&#1740;&#1606; &#1608;&#1740;&#1583;&#1740;&#1608; &#1583;&#1575;&#1583;&#1607; &#1588;&#1583;&#1607; &#1575;&#1587;&#1578;. | <a href="video_page.php?id=2309">&#1606;&#1592;&#1585; &#1588;&#1605;&#1575; &#1670;&#1740;&#1607;&#1567;</a>
</div>

</div> 
```

我希望解析器解析 video_title 和与该标题关联的图像，并将它们放入表中。任何人都可以向我展示一些示例代码来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:18:41.433

根据您尝试执行的操作，您可能会发现[ElementParser](https://github.com/Objective3/ElementParser)适合您。它提供了一些非常有用的方法来使用 CSS 选择器从 HTML 文档中获取数据，类似于 jQuery。文档有点简单，但[提供了使用它的介绍](http://touchtank.wordpress.com/element-parser/)。

# php - 在 openssl_encrypt 中使用初始化向量

> ID：11821195
> 
> 赞同：82
> 
> 时间：2012-08-06T00:06:18.087
> 
> 标签：php, security, openssl

我看了一下[这个](https://stackoverflow.com/questions/1391132/two-way-encryption-in-php)问题，并想为自己做。当我运行这段代码时（直接取自[这个答案](https://stackoverflow.com/a/6639179/962144)）：

```
$textToEncrypt = "My super secret information.";
$encryptionMethod = "AES-256-CBC";  // AES is used by the U.S. gov't to encrypt top secret documents.
$secretHash = "25c6c7ff35b9979b151f2136cd13b0ff";

//To encrypt
$encryptedMessage = openssl_encrypt($textToEncrypt, $encryptionMethod, $secretHash, '1234567812345678');

//To Decrypt
$decryptedMessage = openssl_decrypt($encryptedMessage, $encryptionMethod, $secretHash);

//Result
echo "Encrypted: $encryptedMessage <br>Decrypted: $decryptedMessage"; 
```

但是我收到警告

```
openssl_encrypt(): Using an empty Initialization Vector (iv) is potentially insecure and not recommended 
```

所以我去看了[文档](http://www.php.net/manual/en/function.openssl-encrypt.php)，但是“没有文档”。我找到了这个[评论](http://www.php.net/manual/en/function.openssl-encrypt.php#99188)，但仍然没有提到初始化向量应该是什么以及我应该如何使用它。任何人都可以启发我吗？

我知道我可以做更多的谷歌搜索，但是 Stackoverflow 在这么多搜索结果中排在第一位，我认为这个问题可能对遇到这个问题的其他人有用。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-09-19T00:24:23.817

IV 通常是保证加密文本唯一的随机数。

为了解释为什么需要它，让我们假设我们有一个用密钥“secret”加密的人名数据库，没有 IV。

```
1 John dsfa9p8y098hasdf
2 Paul po43pokdfgpo3k4y
3 John dsfa9p8y098hasdf 
```

如果 John 1 知道他的密文 (dsfa9p8y098hasdf) 并且可以访问其他密文，他可以很容易地找到其他名为 John 的人。

现在实际上，需要 IV 的加密模式将始终使用一个。如果您不指定 IV，它会自动设置为一堆空字节。想象一下第一个示例，但具有恒定的 IV (00000000)。

```
1 John dsfa9p8y098hasdf 00000000
2 Paul po43pokdfgpo3k4y 00000000
3 John dsfa9p8y098hasdf 00000000 
```

为了防止重复密文，我们可以使用相同的“秘密”密钥和随机 IV 对名称进行加密：

```
1 John sdf875n90mh28458 45gh3546
2 Paul fg9087n5b60987nf 56897ngq
3 John gjhn0m89456vnler 8907345f 
```

如您所见，两个“约翰”密文现在不同了。每个 IV 都是独一无二的，并且影响了加密过程，从而使最终结果也独一无二。John 1 现在不知道用户 3 的名字是什么。

解密当然需要使用与加密文本相同的 IV，这就是为什么它必须存储在数据库中的原因。没有密钥，IV 将毫无用处，因此无需担心与加密文本一起传输或存储它。

这是一个过于简单的例子，但事实是，不使用 IV 会产生严重的安全后果。

* * *

现在您的代码似乎正在设置 IV (1234567812345678) 但未在解密时使用它。那肯定会失败。

您可能还想利用一些 PHP 的 IV 生成函数。我认为这应该适合你：

```
$iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
$encryptedMessage = openssl_encrypt($textToEncrypt, $encryptionMethod, $secretHash, 0, $iv);
$decryptedMessage = openssl_decrypt($encryptedMessage, $encryptionMethod, $secretHash, 0, $iv); 
```

对于存储/传输，您可以像这样简单地连接 IV 和密文：

```
$data = $iv.$encryptedMessage; 
```

然后在检索时，将 IV 拉出进行解密：

```
$iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
$iv = substr($data, 0, $iv_size);
$decryptedMessage = openssl_decrypt(substr($data, $iv_size), $encryptionMethod, $secretHash, 0, $iv); 
```

* * *

有关更多信息，请查看 PHP 的 Mcrypt 库。它功能齐全，有大量示例，其中许多可以帮助您实现 openssh 加密。 [http://php.net/manual/en/function.mcrypt-encrypt.php](http://php.net/manual/en/function.mcrypt-encrypt.php)

# php - 如何使用 PHP 显示文件系统中的图像

> ID：11821197
> 
> 赞同：1
> 
> 时间：2012-08-06T00:06:36.417
> 
> 标签：php, mysql, oop, pdo

好的，所以我有一个数据库，它将上传文件的名称存储在名为**filename**的列中。

我正在尝试使用 PHP 来显示该文件（存储在文件系统中，而不是数据库中），方法是将文件名存储在数据库中并将其连接到 HTML 标记上，如下所示：

```
$stmt = $db->dbh->query("SELECT id, filename FROM images");
$stmt->setFetchMode(PDO::FETCH_BOTH);

$path = '';

while ($row = $stmt->fetch()) {
    $path = 'i/' . $row['filename'];
    echo "<img src=" . $path . "/>";
} 
```

但是，它没有显示任何内容。我做错了什么，或者有什么更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:13:52.403

您缺少图像文件名周围的引号。试试这个：

```
 echo '<img src="' . htmlspecialchars($path) . '"/>"; 
```

# c - 使用 pulseaudio API 播放 wav 文件？

> ID：11821201
> 
> 赞同：1
> 
> 时间：2012-08-06T00:07:10.830
> 
> 标签：c, api, audio, pulseaudio

例如，这是如何使用pulseaudio： http: [//freedesktop.org/software/pulseaudio/doxygen/pacat-simple_8c-example.html](http://freedesktop.org/software/pulseaudio/doxygen/pacat-simple_8c-example.html)

但我不清楚如何简单地播放 wav 文件或 ogg 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:33:25.117

示例代码将播放文件中的原始 PCM 数据。诀窍是将 wav 文件中的数据转换为这种格式。Microsoft wav 文件如下所示：

[https://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

Wav 文件只存储原始 PCM 数据。您只需从 wav 文件中剥离标题并将其余部分转储到文件中（扩展名无关紧要，但我喜欢使用 .raw）。也就是说，您可以编写一个程序：将字节 44 之后的所有内容复制到一个新文件中，或者直接将之后的所有内容读入缓冲区。将任一格式传递给 pulseaudio 示例，您应该一切顺利。

需要注意的事项：文件的字节顺序和您的系统；位深度；通道数。这些在 wav 标题中，您可能必须在播放数据之前阅读它们并告诉 pa_simple。虽然，我不确定 pa_simple 是否会为您检测到此信息。我喜欢使用异步实现，我只是直接输入格式。

-E

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-13T05:05:01.160

[linux-commands-examples - pacat](http://www.linux-commands-examples.com/pacat)

```
pacat --list-file-formats

aiff    AIFF (Apple/SGI)
au  AU (Sun/NeXT)
avr AVR (Audio Visual Research)
caf CAF (Apple Core Audio File)
flac    FLAC (Free Lossless Audio Codec)
htk HTK (HMM Tool Kit)
iff IFF (Amiga IFF/SVX8/SV16)
mat MAT4 (GNU Octave 2.0 / Matlab 4.2)
mat MAT5 (GNU Octave 2.1 / Matlab 5.0)
mpc MPC (Akai MPC 2k)
oga OGG (OGG Container format)
paf PAF (Ensoniq PARIS)
pvf PVF (Portable Voice Format)
raw RAW (header-less)
rf64    RF64 (RIFF 64)
sd2 SD2 (Sound Designer II)
sds SDS (Midi Sample Dump Standard)
sf  SF (Berkeley/IRCAM/CARL)
voc VOC (Creative Labs)
w64 W64 (SoundFoundry WAVE 64)
wav WAV (Microsoft)
wav WAV (NIST Sphere)
wav WAVEX (Microsoft)
wve WVE (Psion Series 3)
xi  XI (FastTracker 2) 
```

# python - sqlite3.OperationalError：没有这样的列。但这不是专栏

> ID：11821203
> 
> 赞同：2
> 
> 时间：2012-08-06T00:07:14.650
> 
> 标签：python, sqlite, python-2.7

我似乎遇到了一个相当奇怪的错误。而且，对于我的生活，我无法弄清楚出了什么问题。但是在一段 SQLite 代码上，我收到了这个错误：

```
Traceback (most recent call last):
  File "test.py", line 38, in <module>
    populateTables()
  File "test.py", line 20, in populateTables
    curs.execute("SELECT * FROM tracks WHERE ISRC = " + line[8])
sqlite3.OperationalError: no such column: USTCZ0993316 
```

奇怪的是，USTCZ0993316 是我想比较的一条数据。我不知道为什么它似乎认为它是一个专栏。这是一个非常小的版本，它给出了同样的问题。

```
import sqlite3
import csv

def tableSetup(name):
    if(name=="tracks"):
        curs.execute("CREATE TABLE tracks(id INT UNIQUE, name TINYTEXT, album_id INT, client_id INT, acr_record_num INT, ISRC TINYTEXT UNIQUE, track_length TINYTEXT, client_share FLOAT)")

def populateTables():
    tracks_csv=csv.reader(open('tables/tracks.csv', 'rU'), delimiter=";", quotechar='"')
    tracks_csv.next()
    for line in tracks_csv:
        curs.execute("SELECT * FROM tracks WHERE id = " + line[0])
        if not curs.fetchall():
            if "\"" in line[1]:
                line[1]=line[1].replace("\"","'")
            curs.execute("INSERT INTO tracks VALUES("+line[0]+",\""+line[1]+"\","+line[2]+","+line[3]+","+line[4]+",\""+line[5]+"\",\""+line[7]+"\","+line[12]+")")
    override_csv=csv.reader(open('tables/artist_override.csv', 'rU'), delimiter=",", quotechar='"')
    override_csv.next()
    for line in override_csv:
        curs.execute("SELECT * FROM tracks WHERE ISRC = " + line[8])
        print curs.fetchone()

#Set required Table Names
tables = ["tracks"]
testOut=open('tables/testOut.txt','w')
conn = sqlite3.connect('tables/test.db')

curs = conn.cursor()

# Create table if they don't already exist
curs.execute("SELECT name FROM sqlite_master WHERE type='table'")
tableResults = curs.fetchall()
print
for table in tables:
    if not any(table == result[0] for result in tableResults):
        tableSetup(table)

populateTables()
conn.commit()
curs.close() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T00:09:10.403

如果它没有引号，那么它是一个列或一个数字。

```
curs.execute("SELECT * FROM tracks WHERE ISRC = ?", (line[8],)) 
```

[编辑：“%s”不是正确的语法。它应该是 ”？”。另外，如果您要居高临下，至少要正确。]

# php - 每周一早上PHPmyAdmin登录错误

> ID：11821210
> 
> 赞同：0
> 
> 时间：2012-08-06T00:08:49.093
> 
> 标签：php, mysql, apache, phpmyadmin

我一直在到处寻找这个问题的答案，所以这就是问题所在。

我们有一个`MySQL server 5.0`在windows server 2003上运行的。我们已经`Apache 2.2.3`安装`PHP 5.2`了。

每个星期一早上，当登录 http://hostname/phpmyadmin 时，我会得到以下信息：

```
phpMyAdmin - error
#2003 - Can't connect to MySQL server on 'localhost' (10055) 
```

所以，我担任这个角色的时间不长，而且不是 SQL 专家或任何东西。我的经理和我替换的人无法找到问题的解决方案。

我要补充一点，如果我要升级到`mySQL 5.5`最新版本，我必须经历一系列会议和其他管理工作。我也无法重新启动服务器，或者`mySQL`因为它没有正确重新启动而重新启动，这是一个生产系统 - 我的...在线:)

这是奇怪的部分，登录将在当天晚些时候工作，比如下午 12:30 之后。这种情况每周都会在同一时间发生，并在以后的时间起作用。

Seriosuly，在这个问题上的一些帮助会很棒。

# iphone - 使用 CCMenuAdvanced - Cocos2d

> ID：11821211
> 
> 赞同：2
> 
> 时间：2012-08-06T00:08:54.010
> 
> 标签：iphone, objective-c, menu, cocos2d-iphone, ccmenuitem

我正在尝试为我的游戏制作各种物品滚动条。我决定使用扩展名`CCMenuAdvanced`，并且能够使用工作按钮实现一个工作菜单列表。但是，我不太明白如何正确地将我的菜单包含在边界矩形中。我很清楚，boundaryRect 不会使菜单列表的“越界”部分消失——它似乎只负责滚动。那么问题是我还需要做什么来获得一个独立的项目列表`CCMenuAdvanced`，当不再处于边界时，它会变得不可见且无响应？我是否必须安排一个额外的更新方法来跟踪单个元素的位置并更改它们的不透明度和可见性，或者是否有支持的解决方案？

```
 NSArray *menuItems = [self labelsFromInventory];
    CCMenuAdvanced *menu = [CCMenuAdvanced menuWithItems: nil]; 
    for (CCMenuItem *item in menuItems)
        [menu addChild: item];  

    [menu alignItemsVerticallyWithPadding: 10 bottomToTop: NO]; //< also sets contentSize and keyBindings on Mac
    //menu.isRelativeAnchorPoint = YES; 
    menu.position = ccp(30, 40);
    [self addChild:menu z:2 tag:101];

    menu.scale = MIN ((winSize.width / 2.0f) / menu.contentSize.width, 0.75f );
    menu.boundaryRect = CGRectMake(menu.position.x, menu.position.y, 190.0, 20.0);
    [menu fixPosition]; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T02:23:33.677

不幸的是，在 Cocos2d 中，项目不会裁剪到边界。因此，当一个项目超出其边界时，它只会继续运行，直到 a) 它离开主窗口边界或 b) 它落在 z 顺序中的另一个项目“之下”。

为了做你想做的事，你可以首先尝试向图层添加另一个精灵，它是一种“不透明蒙版”，在 z 顺序中高于可滚动部分，这样，当项目滚动超出其边界时容器，它将被较高的 z 顺序项目“隐藏”。

备用路线，也是我采用的路线，使用 a `UIView`（在我的情况下是 a `UITableView`）并使用[CCUIViewWrapper](http://www.cocos2d-iphone.org/forum/topic/6889)将其包装以将其添加到窗口中。在这种情况下，您必须记住，该`UIView`项目将始终放置在您的 GL 视图中的所有内容之上，并且它不能很好地与事物配合使用，因此需要一些技巧才能开始工作。好消息是，您可以使用 Interface Builder 来设计您的界面，并且您将获得开箱即用的滚动遮罩等功能。

无论哪种方式都是一种权衡；目前在 Cocos2d 中确实没有简单的解决方案——至少，我不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T00:30:27.333

我从 CCMenuAdvanced 开始创建一个夹在边界框中的菜单。我没有移动菜单的位置，而是选择移动菜单中包含的菜单项的位置。这使我能够设置菜单项的可见性和其他属性（如果它们将超出边界）（我向菜单添加了一个边界框属性，以及菜单项之间的间距、顶部的高度和底部缓冲区（以点为单位）。我的滚动菜单还提供了一个顶部和底部缓冲区，当接近顶部或底部时，我会淡出菜单项。

我在 ccTouchMoved 方法中确定是否可以移动（即菜单项已经处于它们可能的最大 Y 或最小 Y）。如果可以移动，我将 deltaY 应用于所有菜单项并设置每个菜单项的不透明度和可见性属性。最困难的部分是夹紧。

# javascript - Javascript将参数传递给循环内的setTimeout函数

> ID：11821214
> 
> 赞同：4
> 
> 时间：2012-08-06T00:09:22.233
> 
> 标签：javascript, loops

我正在尝试在 Javascript 的 for 循环中执行 setTimeout() 函数，但我收到错误“形状未定义”，即使它已定义，我将其作为参数传递给函数setTimeout() 调用。如果我删除 setTimeout 附件，该功能就可以正常工作。

为什么我会收到此错误，我该如何解决？

谢谢！

```
function fadeShapes(layer, movement, opacity, speed) {
    var shapes = layer.getChildren();

    for(var n = 0; n < shapes.length; n++) {
        var shape = layer.getChildren()[n];
        setTimeout(function(shape){
            shape.transitionTo({
                alpha: opacity,
                duration: speed
            }); 
        }, 100);                
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T00:13:46.410

JavaScript 没有块作用域，因此所有超时函数都指向同一个变量`shape`，在循环结束后指向数组的未定义索引。您可以使用匿名函数来模拟您正在寻找的范围：

```
for(var n = 0; n < shapes.length; n++) {
    var shape = shapes[n]; //Use shapes so you aren't invoking the function over and over
    setTimeout((function(s){
        return function() { //rename shape to s in the new scope.
            s.transitionTo({
                alpha: opacity,
                duration: speed
            });
        };
    })(shape), 100);   
} 
```

正如您在匹配括号时遇到的问题所表明的那样，这可能有点棘手。这可以用 ES5 清理[`Array.forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)：

```
layer.getChildren().forEach(function(shape) { //each element of the array gets passed individually to the function
    setTimeout(function(shape){
        shape.transitionTo({
            alpha: opacity,
            duration: speed
        }); 
    }, 100);                
}); 
```

`forEach`内置在现代浏览器中，但可以在~~Internet Explorer~~较旧的浏览器中填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T00:13:00.820

这是一个常见的闭包问题，这里是固定代码：

```
function fadeShapes(layer, movement, opacity, speed) {
    var shapes = layer.getChildren();

    for(var n = 0; n < shapes.length; n++) {
        var shape = layer.getChildren()[n];
        setTimeout((function (bound_shape) {
            return function() {  // return function!
                bound_shape.transitionTo({
                    alpha: opacity,
                    duration: speed
                }); 
            };
        }(shape)) // immediate execution and binding
        , 100);                
    }
} 
```

在您的代码中发生的情况是 for 循环将运行并且`n`函数将从执行中安排`100ms`，但是`shape`更改的值！所以当你的回调被调用时`shape`是`shapes[length-1]`（最后一个形状）的值。

要修复它，您必须使用闭包“关闭”该值。在这种情况下，一个函数绑定到 的值`shape`并返回您要在 中执行的函数`100ms`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:38:59.477

如果您希望 setTimeout 调用间隔 100 毫秒执行，那么您只需将 100 毫秒添加到每个 set Timeout 调用：

```
function fadeShapes(layer, movement, opacity, speed) {
    var shapes = layer.getChildren();

    for(var n = 0; n < shapes.length; n++) {
        var shape = shapes[n];
        setTimeout((function(local_shape){
            return function(){
                local_shape.transitionTo({
                    alpha: opacity,
                    duration: speed
                });
             } 
        })(shape), 100 + n*100);                
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T03:51:43.670

尝试：

```
function fadeShapes(layer, movement, opacity, speed) {
    var shapes = layer.getChildren();

    for(var n = 0; n < shapes.length; n++) {
        var shape = layer.getChildren()[n];
        (function(sh) {
            setTimeout(function(){
                sh.transitionTo({
                    alpha: opacity,
                    duration: speed
                }); 
            }, 100); 
        })(shape);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T00:28:41.807

这是尊重`100ms`延迟的迭代器的代码。（未经测试）

```
function iterate(array, timeout, callback) {
    var n = 0, length = array.length;
    function step() {
        callback(array[n]);
        n += 1;
        if (n < length) {   // are there more elements?
            setTimeout(step, timeout);
        }
    }
    setTimeout(step, timeout);  // start
}

function fadeShapes(layer, movement /* unused> */, opacity, speed) {
    var shapes = layer.getChildren();
    iterate(shapes, 100, function (shape) {
        shape.transitionTo({
            alpha: opacity,
            duration: speed
        }); 
    });
} 
```

请注意，通过`iterate`以这种方式使用该函数，也可以解决关闭问题。

# xcode4 - xcode拒绝在iphone上运行应用程序关于私钥的事情

> ID：11821219
> 
> 赞同：0
> 
> 时间：2012-08-06T00:09:54.710
> 
> 标签：xcode4, private-key

我花了整整一周的时间试图解决这个问题，但似乎没有任何帮助。

我曾经有一台 MacBook Pro，我用它来连接我的 iPhone 设备并在上面部署我的 iOS 应用程序。现在我买了一台新的 Mac Book pro，当我尝试使用我的新 Mac 在我的新 iPhone 上测试一些应用程序时，它只是拒绝接受它或接受我在旧 MAC 上注册的任何旧设备。

它只是报告：“代码签名错误”。我在设备管理器 >> iphone >> Provisioning profile 中找到了“未找到有效的唱歌身份”的状态

从我的阅读和尝试来看，我认为问题在于我的新 Mac 似乎无法获得我团队的私钥。但是，我不知道如何从我的旧 Mac 中获取此密钥，并且我不知道 - 如果可能的话 - 如何为我的新 Mac 获取新密钥。

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:55:21.247

您是否确认您的证书存在于新 Mac 的 keyChain 中？（如果您从时间机器初始化）。如果不是，请使用钥匙串实用程序在旧 Mac 上导出证书。稍后将它们导入新 Mac 的钥匙串中。

查找名称以 iPhone 开发者和 iPhone 发行版开头的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:22:52.030

好的，我在这个链接中找到了解决方案： [http ://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/90538-critical-back-up-your-developer-key.htm](http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/90538-critical-back-up-your-developer-key.htm)

我设法从我的旧 Mac 存档我的旧私钥并在我的新 Mac 上再次安装它，一切都很完美:)

谢谢你。

# php - PDO 无法连接到 MySQL 数据库

> ID：11821222
> 
> 赞同：0
> 
> 时间：2012-08-06T00:10:30.543
> 
> 标签：php, mysql, pdo, yii

我使用 Yii 作为我的 PHP 框架。我正在尝试使用 Gii 生成模型，问题是由于此错误，我无法访问页面以生成模型：

```
PDO::__construct() [<a href='pdo.--construct'>pdo.--construct</a>]: [2002] No such file or directory (trying to connect via unix:///tmp/mysqld.sock) 
```

我的 php.ini 看起来像：

```
upload_max_filesize = 12M 
post_max_size = 12M
mysql:host=localhost;port=3306
mysql:unix_socket=/tmp/mysqld.sock
pdo_mysql.default_socket=/tmp/mysqld.sock 
```

mysql.sock 确实存在于 /tmp/ 中（通过 MySQL.com 从 MySQL 包安装）。MySQL 正在运行，我在 Mac OS X 10.6 上。未设置 root 密码。

有任何想法吗？

# python - Openshift上的Flask框架无法加载模块

> ID：11821225
> 
> 赞同：1
> 
> 时间：2012-08-06T00:11:01.623
> 
> 标签：python, flask, jinja2, paas, openshift

所以我从 github 上的 OS quickstart 在 OS 中创建了一个烧瓶应用程序。该应用程序在我的本地系统上运行良好。当我将应用程序推送到它构建的操作系统时，我在浏览器中收到错误 500。

任何想法或帮助将不胜感激。

以下是应用程序文件的源代码：

```
#!/usr/bin/python import os

virtenv = os.environ['APPDIR'] + '/virtenv/'
os.environ['PYTHON_EGG_CACHE'] = os.path.join(virtenv, 'lib/python2.6/site-packages')
virtualenv = os.path.join(virtenv, 'bin/activate_this.py')
try:
    execfile(virtualenv, dict(__file__=virtualenv))
except IOError:
    pass

from run import app as application 
```

这是 run.py 文件的源代码

```
from app import app 
app.run(debug = True) 
```

以下是日志中的错误（删除了我网站的 HASH ID）：

```
[Sun Aug 05 15:46:08 2012] [error] * Running on http://127.0.0.1:5000/
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] mod_wsgi (pid=28484): Target WSGI script '/var/lib/stickshift/HASH-ID-HERE/app-root/runtime/repo/wsgi/application' cannot be loaded as Python module. 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] mod_wsgi (pid=28484): Exception occurred processing WSGI script '/var/lib/stickshift/HASH-ID-HERE/app-root/runtime/repo/wsgi/application'. 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] Traceback (most recent call last): 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] File "/var/lib/stickshift/HASH-ID-HERE/app-root/runtime/repo/wsgi/application", line 13, in <module> 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] from run import app as application 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] File "/var/lib/stickshift/HASH-ID-HERE/app-root/runtime/repo/wsgi/run.py", line 2, in <module> 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] app.run(debug = True) 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] File "/var/lib/stickshift/HASH-ID-HERE/ws/virtenv/lib/python2.6/site-packages/Flask-0.9-py2.6.egg/flask/app.py", line 739, in run 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] run_simple(host, port, self, **options) 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] File "/var/lib/stickshift/HASH-ID-HERE/ws/virtenv/lib/python2.6/site-packages/Werkzeug-0.8.3-py2.6.egg/werkzeug/serving.py", line 613, in run_simple 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] test_socket.bind((hostname, port)) 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] File "<string>", line 1, in bind 
[Sun Aug 05 15:46:08 2012] [error] [client 127.3.153.129] error: [Errno 13] Permission denied 
[Sun Aug 05 15:46:09 2012] [error] * Running on http://127.0.0.1:5000/
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] mod_wsgi (pid=31302): Target WSGI script '/var/lib/stickshift/HASH-ID-HERE/app-root/runtime/repo/wsgi/application' cannot be loaded as Python module. 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] mod_wsgi (pid=31302): Exception occurred processing WSGI script '/var/lib/stickshift/HASH-ID-HERE/app-root/runtime/repo/wsgi/application'. 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] Traceback (most recent call last): 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] File "/var/lib/stickshift/HASH-ID-HERE/app-root/runtime/repo/wsgi/application", line 13, in <module> 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] from run import app as application 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] File "/var/lib/stickshift/HASH-ID-HERE/app-root/runtime/repo/wsgi/run.py", line 2, in <module> 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] app.run(debug = True) 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] File "/var/lib/stickshift/HASH-ID-HERE/ws/virtenv/lib/python2.6/site-packages/Flask-0.9-py2.6.egg/flask/app.py", line 739, in run
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] run_simple(host, port, self, **options) 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] File "/var/lib/stickshift/HASH-ID-HERE/ws/virtenv/lib/python2.6/site-packages/Werkzeug-0.8.3-py2.6.egg/werkzeug/serving.py", line 613, in run_simple 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] test_socket.bind((hostname, port)) 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] File "<string>", line 1, in bind 
[Sun Aug 05 15:46:09 2012] [error] [client 127.3.153.129] error: [Errno 13] Permission denied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T00:22:56.787

在 mod_wsgi 下托管时，您不应该尝试运行内置开发服务器的 Flask。返回并检查 Flask 中的 mod_wsgi 文档，了解您打算做什么。

[http://flask.pocoo.org/docs/deploying/mod_wsgi/](http://flask.pocoo.org/docs/deploying/mod_wsgi/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:46:43.227

所以我终于弄清楚我的代码出了什么问题。我的 run.py 文件中缺少一行，因此不正确的文件如下所示：

不正确的文件：

```
from app import app
app.run() 
```

这是更正后的工作文件：

```
from app import app
if __name__ == "__main__": #Need this line for Openshift
    app.run() 
```

部署到 Apache 等生产服务器时显然需要 if 语句

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T01:01:49.847

您是否检查过以下烧瓶网站的描述：http: [//flask.pocoo.org/docs/deploying/mod_wsgi/#working-with-virtual-environments](http://flask.pocoo.org/docs/deploying/mod_wsgi/#working-with-virtual-environments)

> **问题**：应用程序提供权限错误可能是由于您的应用程序以错误的用户身份运行引起的。确保应用程序需要访问的文件夹具有正确的权限设置，并且应用程序以正确的用户身份运行（WSGIDaemonProcess 指令的用户和组参数）

# html - 响应式设计，强调视网膜显示和桌面。Sprites 和 JS：牺牲什么？

> ID：11821230
> 
> 赞同：3
> 
> 时间：2012-08-06T00:11:25.837
> 
> 标签：html, css, web-applications, retina-display

我会尽量总结这一点。我正在开发一个 Web 应用程序，它需要：

*   响应式，重点是桌面和 iPhone（视网膜显示屏）
*   支持所有现代浏览器以及 ie8 和 ie9
*   服务器高效，意思是：一个 sprite 中尽可能少的 JS 和尽可能多的图标

**定位设备宽度/高度与定位像素比率：**

对于有条件的**CSS**，我选择了以像素比率为目标，而不是为特定平台和设备创建不同的布局或使用 safari 用户代理。所以我正在使用我`@media (-webkit-min-device-pixel-ratio: 2)`所有的响应式样式。

现在我正试图决定如何处理**图像**。

**每个背景两张图片 vs 一张背景调整大小的图片**

因为我想尽可能减少服务器请求，所以我使用精灵（4 或 5 个“模板”）而不是单独的 png（SVG 讨论是另一回事！）。但是`Background-size`我的大部分用户不支持 IE8，所以它需要像[jquery.backgroundSize.js](https://github.com/louisremi/jquery.backgroundSize.js)这样的 JS 后备。

所以：

> **从性能和良好实践的角度来看，IE8 的精灵、条件背景大小和 JS 回退的组合是最佳选择吗？**

我没有找到与这个特定（但现在很常见）场景有关的其他问题。这不是一个讨论问题，我更想知道是否有关于如何处理这种情况的实际协议：Retina 显示、精灵、IE 和 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:38:06.777

**有条件`background-size`的不是首选选项。**如果您选择使用该属性为具有“正常”像素比率的客户端使用高分辨率精灵，那么您最终会得到比预渲染图像更低的图像质量，客户端缩放图形的额外计算开销并传输比需要大约 4 倍的精灵。*依赖*您最终还会人为地限制您的网站与旧版浏览器的兼容性，而`background-size`IE8 JS 后备也可能会引入内容闪烁（无论您的场景是否可接受）。

我会使用每个像素比率的预渲染版本（这样你最终会得到两倍的图像文件）。您将能够为用户提供比`background-size`以往更好的图形质量。如果您手动构建 sprite（而不是使用自动化工具生成它们并附带 css），这将引入维护开销，但该解决方案总体上更可取。

1.  制作您的 css 文件的高 dpi 版本，例如*main-highdpi.css*和~~有条件的~~将其包含在适当的媒体查询中`<link rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 2)" type="text/css" href="main-highdpi.css" />`

2.  创建您依赖的精灵的高分辨率版本并更新 css 精灵引用。我不相信首选的命名约定尚未达成一致（将资源名称后缀`@2x`似乎很流行，例如*main.png 和 main@2x.png*）

3.  利润！

我会提倡这种方法，因为光栅图像的渲染质量更高（而不是缩放`background-size`），缺乏兼容性问题和更快的客户端渲染。缺点是传输更大的图像文件，这是在客户端设备上获取高分辨率图像的可接受价格（并且无论如何都会缓存精灵）。至少您最终不会像[本文建议](http://phatness.com/2012/07/css-image-replacement-for-high-dpi-retina-display/)的那样要求两份副本！

请务必牢记各个设备的限制（图像大小和尺寸等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T15:34:24.200

我的网站主要是内容和一些非常基本的脚本，所以我选择在页面中嵌入我的所有 javascript 并避免使用外部脚本（jquery 等），因为它们对页面加载时间有重大影响。

我也选择了喜欢高分辨率图像作为默认，如果默认是错误的图像，有些会被下载两次。带宽在移动设备上是最关键的，所以高分辨率应该是默认设置，而低分辨率稍后会被激活。

我也喜欢简单而不是在所有情况下选择最佳图像，因为坦率地说，大多数访问者甚至不会注意到差异。错误的人出现并不是一场灾难。

最后，我希望它使用`srcset`似乎是解决这个问题的长期解决方案的新草案标准，即使它尚未实施。

因此，我使用图像标签，`src`用于高分辨率和`srcset`低分辨率：

```
<img src="foo.png" srcset="foo-low.png 1x" width="42" height="42"> 
```

然后使用 javascript 处理所有图像标签。我之前选择了内联 JavaScript，`</body>`而不是`domready`提高页面加载速度的事件——我们希望浏览器尽快知道正确的图像 URL，在这种情况下，每一毫秒都很重要。

```
 <script type="text/javascript">
      function swapRetinaImagesOut() {
        // skip anything with a "retina" screen
        if (window.devicePixelRatio > 1)
          return;

        // check if the browser appears to support the "srcset" attribute
        if (typeof(document.createElement('img').srcset) != "undefined")
          return;

        // find all images with an "srcset" property, and swap them
        var imageEls = document.getElementsByTagName('img');
        for (var i = 0; i < imageEls.length; i++) {
          var imageEl = imageEls[i];
          var srcset = imageEl.getAttribute('srcset');
          if (!srcset)
            continue;

          imageEl.src = srcset.match(/^[^ ]+/)[0];
        }
      }

      swapRetinaImagesOut();
    </script>
  </body>
</html> 
```

它简单但有效，我期待任何人都能做出贡献的改进。

# php - Swiftmailer 电子邮件队列，具有多个调用类的功能 - 和 gmail SMTP 时间限制

> ID：11821231
> 
> 赞同：1
> 
> 时间：2012-08-06T00:11:33.600
> 
> 标签：php, smtp, swiftmailer

我正试图解决这个问题：

我的代码库中有许多函数可以启动使用[SwiftMailer](http://swiftmailer.org/)发送电子邮件。假设在 1 秒内，1000 个用户启动了不同的功能，这些功能以发送一封（或多封）电子邮件结束。该类如何在没有任何数据库访问权限的情况下捕获所有这 1000 个请求并将它们排队？如果它是启动 1000 个请求的单个函数，我了解该类如何迭代整个数组 - 使用我定义的“批量发送”规则（一次 100 个，例如，休息 2 分钟）。但我*不*明白它是如何从多个用户发起电子邮件的。

也就是说，如果我使用 Gmail Apps SMTP 服务器发送我的所有电子邮件，有哪些好的限制？我将远不及我在上面示例中使用的每秒 1000 个请求，但在未来几分钟内可能会有 100 个请求。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:02:54.653

如果您无权访问“数据库”；您的选择是：

1.  回退到用于管理队列的平面文件（即基本上使用一系列平面文件作为您自己的数据库，按时间戳排序并按顺序发送；那些在同一秒内到达的按任何顺序进行，可能按字母顺序给出一个随机的唯一名称?
2.  使用 memcached 将电子邮件存储在内存中 - 警告：如果 memcached 服务器重新启动，将丢失所有信息。

一秒钟内 1000 个请求是相当少的；我的电子邮件一般规则是一小时内不会超过 2000 封。[GMail 确实在http://support.google.com/mail/bin/answer.py?hl=en&answer=22839](http://support.google.com/mail/bin/answer.py?hl=en&answer=22839)在 500 个唯一电子邮件地址上宣传了他们的限制（以防止垃圾邮件），所以这对您来说可能是个问题。还有其他提供商允许更多，但您需要付费。

# c# - 在 Windows 8 应用程序中浏览文件夹？

> ID：11821232
> 
> 赞同：2
> 
> 时间：2012-08-06T00:12:07.303
> 
> 标签：c#, windows, xaml, windows-8

我正在尝试为 Windows 8 编写应用程序。

我想添加一个输入框，允许用户浏览他们的文件/文件夹并选择一个文件夹，然后我将搜索其内容。我所需要的只是添加输入框和按钮“浏览”，这将允许我查看用户文件。

如何将这个简单的 XAML 构造添加到我的程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:07:23.683

您只能访问 Metro 风格应用程序中的某些文件位置。有关说明，请参阅[本文](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)。您可以允许用户使用[File Picker Contract](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771180.aspx)选择文件。至于如何创建文本框和按钮，请参阅[创建您的第一个 Metro Style 应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/hh974581.aspx)以获取端到端示例。

# android - 如何以完整 HTML 格式在 WebView 中显示来自 feedburner 的内容？

> ID：11821233
> 
> 赞同：3
> 
> 时间：2012-08-06T00:12:10.050
> 
> 标签：android, hyperlink, webview, settings, user-agent

我正在使用 a`WebView`来显示这个[feedburner](http://feeds.feedburner.com/fsn)。当我在 Google Chrome 和设备浏览器中查看此链接时，它会显示标题、片段、链接，最重要的是播客文件和其他超链接。但是，当我在其中查看此链接时，`WebView`它仅以纯文本 HTML 显示，没有超链接。我看到的只是一个标题和故事片段，然后是 HTML 源代码。是否必须启用特定功能才能解决此问题？

这些是我的`WebView`设置：

```
newsfeed = (WebView) findViewById(R.id.webViewnews);
newsfeed.getSettings().setJavaScriptEnabled(true);
newsfeed.setVerticalScrollBarEnabled(false);
newsfeed.getSettings().setPluginsEnabled(true); 
```

我如何加载 URL：

```
try {
    newsfeed.loadUrl("http://feeds.feedburner.com/fsn");
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:07:59.803

我看到了您所看到的，带有标题的条目列表，后跟股票浏览器上文章内容的 html - 运行 2.2.3 的摩托罗拉 Droid。我的猜测是，这是网站为股票 Android WebView 用户代理提供的格式。谷歌浏览器不是 Android 开源项目附带的常用浏览器，它在后台做更多的事情来呈现内容。

我会先尝试不同的用户代理，看看 webview 是否会呈现内容。请注意，他们可能使用了各种不适用于 Android 的 Javascript 库，这就是您看到“简化”内容的原因。

# php - PHP + MySQL 类别未按应显示的方式显示

> ID：11821235
> 
> 赞同：-1
> 
> 时间：2012-08-06T00:12:14.683
> 
> 标签：php, mysql, treeview, forum

我不知道为什么我的脚本的子类别“论坛”没有被摸索到相应的类别。相反，子类别强制脚本重复类别代码。

如下图所示，有一个类别测试，在该类别中有测试和错误。但是，Bugs 滑入了第二个表，它不应该是因为两个测试类别都是一个，而是看起来像数据库中有两个类别，称为测试。我的代码中有什么问题是错误被推入复制类别“测试”而不是在测试下 - 只是一个简单的测试论坛？

![在此处输入图像描述](../Images/099e15a60a5e169e5b054f56899c3eac.png)

这是代码。

```
<?php

include 'connect.php';
include 'header.php';

$sql = "SELECT
            categories.cat_id,
            categories.cat_name,
            forums.forum_id,
            forums.forum_cat,
            forums.forum_name,
            forums.forum_desc,
            COUNT(forums.forum_id) AS forums
        FROM
            categories
        LEFT JOIN
            forums
        ON
            forums.forum_cat = categories.cat_id
        GROUP BY
            forums.forum_name, forums.forum_desc, forums.forum_id
        ORDER BY
            categories.cat_id ASC
        ";

$result = mysql_query($sql);

if(!$result)
{
    echo 'The categories could not be displayed, please try again later.';
}
else
{
    if(mysql_num_rows($result) == 0)
    {
        echo 'No categories defined yet.';
    }
    else
    {
        //prepare the table         
        while($row = mysql_fetch_assoc($result))
        {   

        echo '<table border="1">
              <tr>
                <th>' . $row['cat_name'] . '</th><th></th>
                </tr>';     
            echo '<tr>';

                echo '<td class="leftpart">';
                    echo '<h3><a href="viewforum.php?id=' . $row['forum_id'] . '">' . $row['forum_name'] . '</a></h3>' . $row['forum_desc'];
                echo '</td>';
                echo '<td class="rightpart">';

                //fetch last topic for each cat
                    $topicsql = "SELECT
                                    topic_id,
                                    topic_subject,
                                    topic_date,
                                    topic_cat
                                FROM
                                    topics
                                WHERE
                                    topic_cat = " . $row['forum_id'] . "
                                ORDER BY
                                    topic_date
                                DESC
                                LIMIT
                                    1";

                    $topicsresult = mysql_query($topicsql);

                    if(!$topicsresult)
                    {
                        echo 'Last topic could not be displayed.';
                    }
                    else
                    {
                        if(mysql_num_rows($topicsresult) == 0)
                        {
                            echo 'no topics';
                        }
                        else
                        {
                            while($topicrow = mysql_fetch_array($topicsresult))
                            echo '<a href="viewtopic.php?id=' . $topicrow['topic_id'] . '">' . $topicrow['topic_subject'] . '</a> at ' . date('d-m-Y', strtotime($topicrow['topic_date']));
                        }
                    }
                echo '</td>';
            echo '</tr>';
            echo '</br>';
        }
    }
}

include 'footer.php';
?> 
```

表结构

**类别**

```
cat_id     | int(8) | primary | auto incr
cat_name   | var(255)

|2|Damm
|3|Hmm
|1|Test 
```

**论坛**

```
forum_id   | int(8) | primary | auto_incr
forum_cat  | int(8) <-- forum cat "category" is just ID of category it belongs to
forum_name | var(255)
forum_desc | var(255)

|1|1|Test|Just a simple forum test
|2|3|Lol
|3|1|Bugs|Bugs and related go here 
```

**话题**

```
topic_id   | int(8) | primary | auto_incr
topic_subject | var(255)
topic_date    | datetime
topic_cat     | int(8) 
topic_by      | int(8)

|1|Test|2012-07-31 23:12:47|1|1 
```

我个人尝试了不同的事情，但仍然无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:40:40.957

您将获得以下结果

```
cat_id 1, forum_id 1
cat_id 1, forum_id 2
cat_id 1, forum_id 3
cat_id 2, forum_id 4 
```

但是您在一个循环中输出所有内容，因此您需要做的是记住显示的最后一个标题，并且仅在您处于新类别时才显示新标题。

下面是一个例子，并不完美，但会给你一个开始

```
// Start the table here - outside the loop
echo '<table border="1">  

// Here's how you track if you need the header
$lastCatID = -1

// Now loop
while($row = mysql_fetch_assoc($result))  
{     
    // Only show cat header on condition
    if ($lastCatID <> $row['cat_id']) {
        echo '
          <tr>  
            <th>' . $row['cat_name'] . '</th><th></th>  
            </tr>';

        // Note that you've shows this header so you don't show it again.
        $lastCatID = $row['cat_id'];
    }

    // Now output the rest       
    echo '<tr>';  
    echo '<td class="leftpart">';  
        etc....
    echo '</tr>';  
}

// Now close the table now you're all done looping.
echo '</table>'; 
```

希望有帮助。您应该能够从那里扩展以适应您的风格。

# c# - sql超时过期

> ID：11821236
> 
> 赞同：2
> 
> 时间：2012-08-06T00:12:24.090
> 
> 标签：c#, sql-server

> 日志记录：System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。

当我在应用程序日志文件中看到上面是我看到的最常见的错误时，我是一个初学者，而且它每天都在重复。在数据库上，当我看到执行上述函数调用的特定过程所花费的时间少于 5 秒。但是在我们提供的应用程序`connection timeout=200s`和默认命令中，`timeout=30 secs`我们的经理说我们不必再进一步增加命令超时，因为这是真的。但仍然有例外。

任何人都可以建议我任何解决方案，这样我就可以摆脱上述问题谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:56:27.633

web config中的设置，如果是连接字符串设置中的超时，就是连接超时。它仅适用于建立连接所需的时间。从您的问题描述来看，这听起来不像是连接超时。

命令超时以其他方式指定。例如，如果您使用 DataContext，则使用 CommandTimeout 属性设置超时。

[http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.commandtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.commandtimeout.aspx)

如果您可以提供有关如何访问数据库的代码片段，以便我们可以看到您正在使用哪些类，则可以提出更具体的建议。

# asp.net-mvc - MVC 发布到主机正在添加额外的子文件夹

> ID：11821237
> 
> 赞同：0
> 
> 时间：2012-08-06T00:12:25.353
> 
> 标签：asp.net-mvc, subdirectory

我正在将 MVC 3 站点发布到 go daddy 帐户。我在 VS 2010 中使用 FTP 发布实用程序。该站点发布“好的”。但这里有一个问题：

在我的本地机器上，当我运行它时，网址是：
localhost/Student/Create

在我的 go daddy 帐户中，我创建了一个名为 mvctest 的子目录。我创建了一个名为 mvctest.mysite.com 的子域，它指向 mvctest 的虚拟目录。这工作正常。

但是在我将我的网站发布到 www.mysite.com/mvctest 之后，我在所有链接中都获得了一个额外的 /mvctest/ 目录。我想要的是：
mvctest.mysite.com/Student/Create
我得到的是：
mvctest.mysite.com/mvctest/Student/Create

有趣的是，如果我手动输入我想要的内容，页面加载正常。如果我硬编码了一个指向根的链接，那很好，但我的所有 Url.Content 和 Html。链接添加额外的 mvctest 目录..

我已经搜索了所有内容，但没有找到解决这个困境的答案。我在 web.config 中尝试过，但我不认为这样做。我觉得 VS2010 中的 FTP 发布实用程序中的某些东西正在改变我的 global.asax 文件中的路由结构，但我不确定。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:08:13.277

您的虚拟目录是应用程序吗？如果未设置为应用程序，IIS 会将您站点的根目录视为应用程序并添加子目录。看到[这个帖子](https://stackoverflow.com/questions/8042832/asp-net-mvc-3-moved-app-into-virtual-directory-what-do-i-have-to-change)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:41:21.517

以下内容为我解决了同样的问题，并引用自我发现的一篇博文（[来源](http://kaushikcsharpandsharepoint.blogspot.com/2011/05/solution-for-aspnet-routing-on-godaddy.html)）：

所以现在是解决方案，我可能应该在一开始就提到这一点，但希望您使用的是安装了 URL 重写模块的 IIS7（当您在 GoDaddy 上使用 IIS7 时默认安装它）。只需将以下内容添加到 web.config 的 system.webServer 元素中：

```
<rewrite>
  <rules>
    <rule name="Remove Virtual Directory">
      <match url=".*" />
      <action type="Rewrite" url="{R:0}" />
    </rule>
  </rules>
</rewrite> 
```

所有这一切都是用它自己“重写” URL。这会导致 URL Rewrite 将原始 URL（没有文件夹名称的 URL）添加到 ServerVariable，ASP.NET MVC 使用它来生成其他 URL。

# ruby-on-rails - Rails 活动资源忽略条件

> ID：11821241
> 
> 赞同：1
> 
> 时间：2012-08-06T00:12:43.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeresource

我一直在寻找这个问题的解决方案，但没有白费。基本上，我正在尝试使用 Active Resources 进行一些搜索，例如：

```
File.find(:all, :params => {:file_name => "blah"}) 
```

或者：

```
File.find(:all, :conditions => {:file_name => "blah"}) 
```

文件是一个活动资源对象

我希望结果被过滤，但输出与`File.find(:all)`（完全忽略条件）相同。有没有人遇到过类似的问题？我使用的是 rails 3.0.7，此代码是从一个使用 AR 与另一个 API 服务器对话的 Web 应用程序调用的。

任何建议将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:26:21.940

不知道我是否明白你的意思。我认为这应该这样做：

```
File.where file_name: "blah" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:19:01.790

我有相同类型的设置，并且在我的应用程序中有大量搜索需要过滤大量结果 - 但是，我一直在使用 API 服务器端完成此操作。

所以调用看起来像：

```
File.find(:all, :params => {:file_name => "blah"}) 
```

这将被rails翻译成一些搜索URL：

```
http://someip:port/someurl/files/?file_name=blah 
```

因此 API 将使用 file_name 参数接收它并根据该搜索过滤结果集，然后将这些过滤结果返回到 rails 服务器。

我希望至少在某种程度上有所帮助:)

# java - 从开关盒中取出对象

> ID：11821247
> 
> 赞同：0
> 
> 时间：2012-08-06T00:13:46.973
> 
> 标签：java, switch-statement

我有一个菜单驱动程序，提示用户输入整数以创建 BST。第一次一切都很好，但是如果用户返回主菜单并选择创建一个新的二叉搜索树，新的输入实际上只是添加到旧树上。我知道这是因为我在 switch 语句之外创建树，但是，如果我在我的第一个 switch 语句中创建它，以便每次创建新树时，其他 switch 语句将无法访问树...关于我应该在哪里创建我的树的任何想法？

```
package model;

import java.io.*; 
import java.util.*; 

public class menu {
    public static void main(String[] args){
        int integerInput;
        int inputOption;
        int myCategoryChoice;

        InOrder inOrder;
        PreOrder preOrder;
        PostOrder postOrder;
        Context context;

        BinaryTree myIntTree;

        myIntTree = new BinaryTree();
        inOrder = new InOrder();
        preOrder = new PreOrder();
        postOrder = new PostOrder();

        Scanner userInput = new Scanner(System.in);
        do{
            System.out.println("=======================================");
            System.out.println("     Binary Search Tree Traversal!     ");
            System.out.println("=======================================");
            System.out.println("Options:                               ");
            System.out.println("  1\.  Create a new binary search tree  ");
            System.out.println("  2\.  Traverse the tree                ");
            System.out.println("  3\.  Quit                             ");
            System.out.println("=======================================");

            inputOption = KeyIn.inInt("Please select an option from the menu: ");

            switch(inputOption){
                case 1:
                    System.out.println("You've selected to create a new binary tree." + "\n");
                    Scanner scan = new Scanner(System.in);
                    String tempInput;
                    Boolean repeat = true;
                    try{
                        System.out.println("Please enter as many integers as you'd like, hit 'Q' when you are finished." + "\n");
                        do{

                            tempInput = scan.next();
                            if(!tempInput.equals("Q") && !tempInput.equals("q")){
                                integerInput = Integer.parseInt(tempInput);
                                myIntTree.insert(integerInput);
                                repeat = true;
                            }
                            else
                                repeat = false;

                        }while(repeat);

                    }catch (NumberFormatException e) {
                            System.out.println("Invalid input. Not an integer");
                }
                break;

                case 2:
                    System.out.println("Let's traverse the tree we just made!. ");
                    myCategoryChoice = KeyIn.inInt("Please select a traversal method: (1) Pre-Order (2) In-Order (3) Post-Order");

                    Boolean done = false;

                    do{
                        switch(myCategoryChoice){
                            case 1:
                                System.out.println("You've selected a pre-order traversal." + "\n");

                                context = new Context(preOrder);
                                context.traverse(myIntTree);

                                done = true;                        
                                break;

                            case 2:
                                System.out.println("You've selected an in-order traversal." + "\n");

                                context = new Context(inOrder);
                                context.traverse(myIntTree);

                                done = true;
                                break;

                            case 3:
                                System.out.println("You've selected a post-order traversal." + "\n");

                                context = new Context(postOrder);
                                context.traverse(myIntTree);

                                done = true;
                                break;
                        }
                    }while(!done);
                    break;
                case 3:
                    System.out.println("Goodbye!");
                    break;
                default:
                    System.out.println("Invalid selection.");
                    break;              
            }
        } while(inputOption != 3);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:26:46.223

声明变量而不初始化它。然后在用户输入时创建一个新树`1`：

```
public static void main(String[] args){
    //...
    BinaryTree myIntTree = null;

    inOrder = new InOrder();
    preOrder = new PreOrder();
    postOrder = new PostOrder();
    //...

    case 1:
        myIntTree = new BinaryTree();
    //...
    case 2:
        if(myIntTree == null) break;
    //...
} 
```

或者，由于您创建了自己的`BinaryTree`类，您可以创建一个`clear()`方法来从树中删除每个节点并调用它。

# sass - “display” CSS 属性不是由 SASS 呈现的

> ID：11821249
> 
> 赞同：1
> 
> 时间：2012-08-06T00:13:57.487
> 
> 标签：sass

我正在使用 Sass 3.1.20

测试.sass：

```
#hello
  width: 100px
  display:none 
  background: red 
```

%> 萨斯测试.sass

```
#hello {
  width: 100px;
  background: red; } 
```

为什么显示属性被跳过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T00:19:01.660

似乎 SASS 对空格很挑剔。您在这里缺少一个空格：

```
#hello
  width: 100px
  display: none
          ^ right here

  background: red 
```

# android - Android - 弹出窗口或其他东西

> ID：11821250
> 
> 赞同：0
> 
> 时间：2012-08-06T00:14:00.427
> 
> 标签：android, popupwindow

我目前正在开发一个显示列表视图的 android 应用程序。When an item from the list view is selected I would like a small window to appear from the bottom of the screen. 这个窗口不会覆盖整个列表视图，而是占据底部的一小部分。在这个窗口上会有几个按钮和一个进度条。

我的问题是实现这一目标的最佳方法是通过弹出窗口还是有其他更适合此的方法？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:33:14.413

您可以使用带有自定义视图的[对话框（](http://developer.android.com/guide/topics/ui/dialogs.html) [Android 自定义对话框示例](http://www.mkyong.com/android/android-custom-dialog-example/)）。或者您可以放弃弹出窗口的概念，只是通过将“弹出”视图添加到您的正常布局中但将其设置为不可见来“伪造”它。然后，当您想要显示它时，使其可见并用适当的数据填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:30:12.553

我想我明白你的意思了。你使用 ActionBarSherkock 吗？如果是，那么当屏幕很小时，通常会在屏幕底部有一个 splitactionbar。它看起来像这样： [http ://wptrafficanalyzer.in/blog/wp-content/uploads/2012/07/actionbar_menu_sherlock_splitactionbar.png](http://wptrafficanalyzer.in/blog/wp-content/uploads/2012/07/actionbar_menu_sherlock_splitactionbar.png)

这是你的意思吗？请告诉我。

编辑：有一种叫做快速操作的东西。这可以很好地处理弹出窗口，但它不会显示在屏幕底部。但你可能想看看它： http: [//londatiga.net/images/quickactions/quickcontact.jpg](http://londatiga.net/images/quickactions/quickcontact.jpg)

# javascript - 在新标签中打开扩展页面

> ID：11821253
> 
> 赞同：1
> 
> 时间：2012-08-06T00:15:26.817
> 
> 标签：javascript, google-chrome, google-chrome-extension

所以我正在尝试制作一个扩展，点击它会打开一个选项卡并转到一个页面。到目前为止，我唯一能做的就是打开一个标签并给我这个错误：

> 没有找到该网址的网页：chrome-extension://hgjkkhjinhilcehaaldcnopaefinlfif/https://www.google.com/

这是 manifest.json：

```
{
  "name": "New App",
  "version": "0.1",
  "permissions": ["tabs"],
   "manifest_version": 2,     
  "browser_action": {
   "default_icon": "icon.png"
  },
  "background": {
    "scripts": ["background.js"]
  },
  "icons": {
    "48": "icon.png"
  }
} 
```

这是 background.js

```
chrome.browserAction.onClicked.addListener
    (function(tab) 
        {chrome.tabs.create({'url': chrome.extension.getURL('https://www.google.com/')}, function(tab) {})
        }                                    
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:02:01.343

我试图做的是打开一个新标签并在浏览器操作中转到一个网站。这是答案：

清单.json

```
{ "name": "Funny Pictures",
  "version": "0.1",
  "manifest_version": 2, 
  "description": "Rick Roll all your friends!",
  "browser_action": {
        "default_icon": "funnyface.png"
  },
  "icons": {
            "48": "funnyface.png"
            },
    "background":{
                    "scripts": ["background.js"]
    }
} 
```

背景.js

```
chrome.browserAction.onClicked.addListener(function(activeTab) {
    var newURL = "http://www.youtube.com/watch?v=oHg5SJYRHA0";

    chrome.tabs.create({ url: newURL });
}); 
```

我发誓我以前试过这个，但我猜就是这样。

# symlink - Samba 共享上的符号链接

> ID：11821256
> 
> 赞同：0
> 
> 时间：2012-08-06T00:16:06.400
> 
> 标签：symlink, samba

我有一个 Samba 共享。有什么方法可以从 Windows 端确定特定文件夹是符号链接还是标准目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T18:49:40.817

根据[MS 文档](http://msdn.microsoft.com/en-us/library/cc246322.aspx)，协议规范中没有考虑到这一点。在该页面上，您可以看到（符号）链接没有规范。

我也在Linux（Ubuntu）下用smbclient进行了测试，链接和目录没有区别。

# java - 带有我自己的文件名定义的 Java 下载管理器

> ID：11821257
> 
> 赞同：0
> 
> 时间：2012-08-06T00:16:21.210
> 
> 标签：java, download, save

在[https://github.com/luugiathuy/Java-Download-Manager](https://github.com/luugiathuy/Java-Download-Manager)中，我找不到用于设置/更改文件名的变量，而不是服务器中的文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:06:57.497

它不会立即提供一个。根据[来自 Downloader 的这段代码](https://github.com/luugiathuy/Java-Download-Manager/blob/master/src/com/luugiathuy/apps/downloadmanager/Downloader.java#L86)，它用于`URL.getFile`确定输出文件名：

```
// Get the file name from url path
String fileURL = url.getFile();
mFileName = fileURL.substring(fileURL.lastIndexOf('/') + 1);
System.out.println("File name: " + mFileName); 
```

该字段用于以下特定点`HttpDownloader`：

*   [这里](https://github.com/luugiathuy/Java-Download-Manager/blob/master/src/com/luugiathuy/apps/downloadmanager/HttpDownloader.java#L87)

    ```
    HttpDownloadThread aThread = new HttpDownloadThread(1, mURL, mOutputFolder + mFileName, startByte, endByte); 
    ```

*   [在](https://github.com/luugiathuy/Java-Download-Manager/blob/master/src/com/luugiathuy/apps/downloadmanager/HttpDownloader.java#L93)这里

    ```
    aThread = new HttpDownloadThread(i, mURL, mOutputFolder + mFileName, startByte, endByte); 
    ```

*   最后[在这里](https://github.com/luugiathuy/Java-Download-Manager/blob/master/src/com/luugiathuy/apps/downloadmanager/HttpDownloader.java#L99)

    ```
    HttpDownloadThread aThread = new HttpDownloadThread(1, mURL, mOutputFolder + mFileName, 0, mFileSize); 
    ```

* * *

为什么你不自己编写支持自定义文件名的？当然，这对您来说将是一个有趣的练习！也许你可以写一个更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:19:45.023

好吧，您可以重命名文件。

```
 File file = new File("/isuru.txt");

    if (!file.exists() || file.isDirectory()) {
        System.out.println("File does not exist: " + file);
        return;
    }

    File newFile = new File("/leann.ini");

    //Rename
    if (file.renameTo(newFile)) {
        System.out.println("File has been renamed.");
    } else {
        System.out.println("Error renmaing file");
    } 
```

# javascript - 从多次使用的函数返回不同的值

> ID：11821258
> 
> 赞同：0
> 
> 时间：2012-08-06T00:16:25.370
> 
> 标签：javascript, jquery

我有一个只能工作一次的功能。我确定那是因为它说“返回”并且我没有任何循环等。有人可以帮我取消这个功能吗？（这一切都在一个 jQuery 容器中，尽管我认为 jQuery 可能与这个问题没有太大关系。）

从 Farbtastic 返回的 HSL 颜色的格式类似于（色调、饱和度、亮度）。我正在调整第三个值，亮度，这部分工作。虽然所有的重复都不起作用。它使所有新色板都成为第一个色板的颜色。

```
 function onColorChange(color) {

        // retrieve HSL color value
        var hslcolor = $.farbtastic('#main_color_picker').hsl;

        // create 4 new colors of varying brightness, and variable names to save them to db.
                var newcolor1 = hslcolor;
                var newcolor2 = hslcolor;
                var newcolor3 = hslcolor;
                var newcolor4 = hslcolor;
                    newcolor1[2] = 0.10 * (Math.round(hslcolor[2]*10000)/10000);
                    newcolor2[2] = 0.85 * (Math.round(hslcolor[2]*10000)/10000);
                    newcolor3[2] = 1.15 * (Math.round(hslcolor[2]*10000)/10000);
                    newcolor4[2] = 1.50 * (Math.round(hslcolor[2]*10000)/10000);
                var rgb1 = hsl2rgb(newcolor1);
                var rgb2 = hsl2rgb(newcolor2);
                var rgb3 = hsl2rgb(newcolor3);
                var rgb4 = hsl2rgb(newcolor4);

        //apply the color to swatches and show original swatch in the middle.
        var firstSwatch = $('#section-main_color').find('.square1');
        firstSwatch.css( 'background-color', 'rgb('+rgb1.r+','+rgb1.g+','+rgb1.b+')' );
        var secondSwatch = $('#section-main_color').find('.square2');
        secondSwatch.css('background-color', 'rgb('+rgb2.r+','+rgb2.g+','+rgb2.b+')');
                    // original color is in square 3 
        var fourthSwatch = $('#section-main_color').find('.square4');
        fourthSwatch.css('background-color', 'rgb('+rgb3.r+','+rgb3.g+','+rgb3.b+')');
        var fifthSwatch = $('#section-main_color').find('.square5');
        fifthSwatch.css('background-color', 'rgb('+rgb4.r+','+rgb4.g+','+rgb4.b+')');

    }

function hsl2rgb(hsl) {
    var h = hsl[0], s = hsl[1], l = hsl[2];
    var m1, m2, hue;
    var r, g, b
    h = (Math.round( 360*h )/1);
    if (s == 0)
        r = g = b = (l * 255);
    else {
        if (l <= 0.5)
            m2 = l * (s + 1);
        else
            m2 = l + s - l * s;
        m1 = l * 2 - m2;
        hue = h / 360;
        r = Math.round(HueToRgb(m1, m2, hue + 1/3));
        g = Math.round(HueToRgb(m1, m2, hue));
        b = Math.round(HueToRgb(m1, m2, hue - 1/3));
    }
    return {r: r, g: g, b: b};
} 
```

对于这个问题的第 1 部分，关于在 Theme-Options-Panel 中使用 Farbtastic 的 HSL，请参阅：[Farbtastic 将 HSL 转换回 RGB 或 Hex](https://stackoverflow.com/questions/11804027/farbtastic-convert-hsl-back-to-rgb-or-hex)

**跟进：** 如果您需要数组的实际副本，我发现了这一点：

```
 var newcolor = hslcolor.slice(0); 
```

在大多数情况下避免使用它可能是个好主意。我发现我需要按原样保留原始数组，以便在另一组计算中使用，所以我在副本上做了我的亮度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:21:02.137

这是您要查找的内容吗：http: [//jsfiddle.net/uttqX/6/](http://jsfiddle.net/uttqX/6/) 它不起作用的原因是因为您一遍又一遍地更新同一个变量，因为您将所有变量分配给相同的乞讨中的初始变量。因此，对这些变量中的任何一个的任何更新都会传播到初始变量（hslcolor），然后再传播到所有其他变量。

# ruby-on-rails - 提交按钮指向错误的操作

> ID：11821260
> 
> 赞同：0
> 
> 时间：2012-08-06T00:16:31.333
> 
> 标签：ruby-on-rails, forms, activerecord

我正在构建一个表单来使用非 activerecord 模型。我有两个问题。。

1.  当我指向关键字/id/编辑时，表单的提交按钮显示“创建关键字”，然后按下该提交按钮会将我带到关键字控制器上的创建方法。它应该带我进行更新操作。

2.  我还想向我的更新操作发送一个名为“id”的属性。我不知道该怎么做。就像我说的，这不是一个 activerecord 模型。

/views/keywords/_form.html.erb

```
 <%= form_for(@keyword) do |f| %>

  <div class="field">

    <%= f.label :name %><br />

    <%= f.text_field :name %>

  </div>

  <div class="field">

    <%= f.label :keyword %><br />

    <%= f.text_field :keyword %>

  </div>

  <div class="field">

    <%= f.label :message1 %><br />

    <%= f.text_area :message1 %>

  </div>

  <div class="field">

    <%= f.label :message2 %><br />

    <%= f.text_area :message2 %>

  </div>

    <div class="field">

    <%= f.label :start_time %><br />

    <%= f.text_area :start_time %>

  </div>

  <div class="actions">

    <%= f.submit %>

  </div>

 <% end %> 
```

/controller/keywords_controller.rb >> 编辑动作

```
def edit

    result = Keyword.find(params[:id])

    result = result.to_array(:get_response, :return, :data, :item)

    result = result.first

    @keyword = Keyword.new

    @keyword.id = result[:item][0][:value]

    @keyword.name = result[:item][1][:value]

    @keyword.keyword = result[:item][2][:value]

    @keyword.message1 = result[:item][3][:value]

    if(result[:item][4][:value] != {:"@xsi:type"=>"xsd:string"})

    @keyword.message2 = result[:item][4][:value]

    end

    @keyword.start_time = result[:item][5][:value]

end 
```

/models/keyword.rb

```
 class Keyword 

   extend ActiveModel::Naming

  include ActiveModel::Conversion

  def persisted?

    false

  end

    attr_accessor :id, :name, :keyword, :message1, :message2, :start_time
  def self.get_keywords(cid)
    #get data from webservice 
  end

  end 
```

配置/路由.rb

```
 SchoolBeacon::Application.routes.draw do

  devise_for :users

  devise_for :admins

  resources :keywords

  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:25:07.907

`@keyword = Keyword.new`将您在编辑操作中的行更改`@keyword = Keyword.find(params[:id])`为关键字或找到关键字。如果您使用的是普通的 RESTful rails 路由，那么应该这样做。

实际上，您可以`form_for(@keyword, :url => keyword_path(@result)`将结果更改为 ivar(`result`变为`@result`)

# javascript - 如何从中获取所有选定的值? 看起来很奇怪，我找不到这个已经问过的，但它就在这里！我有一个 html 如下： <select id="select-meal-type" multiple="multiple"><option value="1">Breakfast</option> <option value="2">Lunch</option> <option value="3" &g<="" h1="">ID：11821261 赞同：159 时间：2012-08-06T00:17:12.237 标签：javascript, jquery, html 回答 #1 赞同：207 时间：2015-01-05T13:58:37.683 除非有问题询问 JQuery，否则应该首先用标准 javascript 回答问题，因为许多人不在他们的网站中使用 JQuery。 从 RobG如何使用 JavaScript 获取多选框的所有选定值？： function getSelectValues(select) { var result = []; var options = select && select.options; var opt; for (var i=0, iLen=options.length; i<iLen; i++) { opt = options[i]; if (opt.selected) { result.push(opt.value || opt.text); } } return result; } 回答 #2 赞同：125 时间：2012-08-06T00:22:08.780 通常的方式： var values = $('#select-meal-type').val(); 从文档： 在<select multiple="multiple">元素的情况下，该.val()方法返回一个包含每个选定选项的数组； 回答 #3 赞同：68 时间：2015-07-21T16:09:00.427 实际上，我发现使用纯 JavaScript（假设您不需要完全支持 IE lte 8）的最佳、最简洁、最快和最兼容的方式如下： var values = Array.prototype.slice.call(document.querySelectorAll('#select-meal-type option:checked'),0).map(function(v,i,a) { return v.value; }); 更新（2017-02-14）： 使用 ES6/ES2015 的更简洁的方式（对于支持它的浏览器）： const selected = document.querySelectorAll('#select-meal-type option:checked'); const values = Array.from(selected).map(el => el.value); 回答 #4 赞同：39 时间：2019-02-07T17:26:23.837 如果你想走现代路，你可以这样做： const selectedOpts = [...field.options].filter(x => x.selected); 运算符将...iterable ( HTMLOptionsCollection) 映射到数组。 如果您只对这些值感兴趣，可以添加map()调用： const selectedValues = [...field.options] .filter(x => x.selected) .map(x => x.value); 回答 #5 赞同：30 时间：2020-08-12T13:57:23.533 你可以使用selectedOptions属性 var options = document.getElementById('select-meal-type').selectedOptions; var values = Array.from(options).map(({ value }) => value); console.log(values); <select id="select-meal-type" multiple="multiple"> <option value="1">Breakfast</option> <option value="2" selected>Lunch</option> <option value="3">Dinner</option> <option value="4" selected>Snacks</option> <option value="5">Dessert</option> </select> 回答 #6 赞同：17 时间：2018-03-12T05:22:36.923 首先，用于Array.from将HTMLCollection对象转换为数组。 let selectElement = document.getElementById('categorySelect') let selectedValues = Array.from(selectElement.selectedOptions) .map(option => option.value) // make sure you know what '.map' does // you could also do: selectElement.options 回答 #7 赞同：10 时间：2012-08-06T00:18:39.173 $('#select-meal-type :selected')将包含所有选定项目的数组。 $('#select-meal-type option:selected').each(function() { alert($(this).val()); }); ​</p> 回答 #8 赞同：7 时间：2016-09-05T17:21:58.497 如果您需要响应更改，可以尝试以下操作： document.getElementById('select-meal-type').addEventListener('change', function(e) { let values = [].slice.call(e.target.selectedOptions).map(a => a.value)); }) [].slice.call(e.target.selectedOptions)是必需的，因为e.target.selectedOptions返回的是 a ，HTMLCollection而不是 a Array。该调用将其转换为，Array以便我们可以应用map提取值的函数。 回答 #9 赞同：6 时间：2019-10-29T11:48:21.880 2019 年 10 月更新 以下内容应在所有现代浏览器上“独立”工作，无需任何依赖或转译。 <!-- display a pop-up with the selected values from the <select> element --> <script> const showSelectedOptions = options => alert( [...options].filter(o => o.selected).map(o => o.value) ) </script> <select multiple onchange="showSelectedOptions(this.options)"> <option value='1'>one</option> <option value='2'>two</option> <option value='3'>three</option> <option value='4'>four</option> </select> 回答 #10 赞同：4 时间：2014-04-12T15:20:57.780 如果您想要在每个值后用中断表示； $('#select-meal-type').change(function(){ var meals = $(this).val(); var selectedmeals = meals.join(", "); // there is a break after comma alert (selectedmeals); // just for testing what will be printed }) 回答 #11 赞同：4 时间：2012-08-06T00:25:06.500 尝试这个： $('#select-meal-type').change(function(){ var arr = $(this).val() }); 演示 $('#select-meal-type').change(function(){ var arr = $(this).val(); console.log(arr) }) <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> <select id="select-meal-type" multiple="multiple"> <option value="1">Breakfast</option> <option value="2">Lunch</option> <option value="3">Dinner</option> <option value="4">Snacks</option> <option value="5">Dessert</option> </select> 小提琴 回答 #12 赞同：2 时间：2018-11-06T18:40:07.300 我的选择如下： let selectElement = document.getElementById('categorySelect'); let selectedOptions = selectedElement.selectedOptions || [].filter.call(selectedElement.options, option => option.selected); let selectedValues = [].map.call(selectedOptions, option => option.value); 它很短，在现代浏览器上很快，我们不在乎它在 1% 市场份额的浏览器上是否很快。 请注意，从大约 5 年前开始，selectedOptions 在某些浏览器上的行为很不稳定，因此用户代理嗅探在这里并非完全不合时宜。 回答 #13 赞同：1 时间：2017-07-20T13:07:58.083 在没有 jquery 的情况下到处工作： var getSelectValues = function (select) { var ret = []; // fast but not universally supported if (select.selectedOptions != undefined) { for (var i=0; i < select.selectedOptions.length; i++) { ret.push(select.selectedOptions[i].value); } // compatible, but can be painfully slow } else { for (var i=0; i < select.options.length; i++) { if (select.options[i].selected) { ret.push(select.options[i].value); } } } return ret; }; 回答 #14 赞同：1 时间：2021-02-15T08:39:33.733 如果您有多个带有 multiple='multiple' 的选择框，并且您想从每个下拉列表中选择所有选定的选项，请使用此 HTML： <select id='Alphabets'> <option value="1">A</option> <option value="2">B</option> <option value="3">C</option> </select> <select id='Alphabets' multiple='multiple'> <option value="4">D</option> <option value="5">E</option> <option value="6">F</option> </select> <select id='Alphabets'> <option value="7">G</option> <option value="8">H</option> <option value="9">I</option> </select> <select id='Alphabets' multiple='multiple'> <option value="10">J</option> <option value="11">K</option> <option value="12">L</option> </select> 上述 UI 的 JavaScript： function show_Alphebets() { var tag =document.querySelectorAll("select"); var values=""; for(var i=1; i<4; i++) { if(tag[i].options.length>0) for (var option of tag[i].selectedOptions) { values+= i+"(multiple)="+option.value+","; } else values+= i+"="+tag[i].value+","; } alert(values); } 回答 #15 赞同：0 时间：2021-01-17T06:55:13.803 $('#application_student_groups option:selected').toArray().map(item => item.value)</option></select>

# python - 正则表达式拆分

> ID：11821264
> 
> 赞同：0
> 
> 时间：2012-08-06T00:17:45.873
> 
> 标签：python, regex

我有类似于以下的输入：

```
TV-12VX
TV-14JW
TV-2JIS
VC-224X 
```

我需要删除破折号后的数字之后的所有内容。结果将是：

```
TV-12
TV-14
TV-2
TV-224 
```

我将如何通过正则表达式进行拆分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:24:33.067

以下代码显示了如何匹配“TV-”+（某个数字）形式的字符串：

```
>>> re.match('TV-[0-9]+','TV-12VX').group(0)
'TV-12' 
```

（请注意，因为我使用的是`match`，这仅在字符串以您要提取的位开头时才有效。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T00:23:23.633

我认为这个正则表达式适合你：`(.+?-\d+?)[a-zA-Z]`. 您可以将它与`re.findall`, 或一起使用`re.match`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T00:28:35.553

```
import re
p = re.match('([\w]{2}-\d+)', 'TV-12VX')
print(p.group(0)) 
```

输出

```
TV-12 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T00:29:32.983

您可以使用以下方法删除数字之后的所有内容：

```
re.sub(r"^(\w+-\d+).*", r"\1", input) 
```

# java - ColdFusion/Java - 找不到类：org.apache.ws.security.WSConstants

> ID：11821266
> 
> 赞同：0
> 
> 时间：2012-08-06T00:17:59.193
> 
> 标签：java, coldfusion

以下代码引发错误“找不到类：org.apache.ws.security.WSConstants”

```
<cfset variables.WSConstantsObj = CreateObject("Java","org.apache.ws.security.WSConstants")> 
```

我不确定这是否应该开箱即用，或者我是否需要做其他事情来实例化这个 java 对象。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:11:21.463

我似乎已经想通了。在我的特定实例中，首先需要加载几个其他 jar 文件。

```
variables.paths = arrayNew(1);
variables.paths[1] = getDirectoryFromPath(getCurrentTemplatePath()) & "lib\wss4j-1.5.8.jar";
variables.paths[2] = getDirectoryFromPath(getCurrentTemplatePath()) & "lib\xmlsec-1.4.2.jar";
variables.loader = createObject("component","lib.javaloader.JavaLoader").init(loadPaths=variables.paths,loadColdFusionClassPath=true);
variables.WSConstantsObj = loader.create("org.apache.ws.security.WSConstants"); 
```

# objective-c - 如何扩展窗口以在可可中显示更多内容

> ID：11821269
> 
> 赞同：0
> 
> 时间：2012-08-06T00:18:23.233
> 
> 标签：objective-c, cocoa

我正在 Cocoa 中构建一个应用程序，我希望能够让用户单击一个按钮，这会扩大窗口大小，显示以前隐藏的内容。

例如，我的应用程序顶部的 68 个像素显示正在发生的事情的摘要（例如将数据同步到服务器），右侧有一个按钮，单击该按钮可向下扩展窗口并让用户输入更多信息。

我遇到的问题是。

1）我通过子类化 NSImageView 设置的背景图像似乎起源于左下角而不是左上角，所以我的按钮应该在右上角，背景的顶部从底部的右上角开始的背景。

2) 窗口向下展开，按钮向上浮动。所以按钮从右下角开始，到右上角结束。我希望它始终位于右上角。

我认为如果我能弄清楚如何告诉窗口从左上角开始并向下增长，但不移动控件，如果窗口不够大，只需隐藏它们，所有这一切都会得到解决。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:14:22.220

如果我正确理解您的问题，那么应该是：

1）之所以如此，是因为mac上的坐标系以左下角为原点。我认为您应该在调整大小时将图像视图向上移动一点。

2）当您展开窗口时，按钮框架基于左下角的原点，因此您需要在视图增长时再次偏移它。

我认为通过使用自动布局并设置适当的约束，事情可能会容易一些:)

# matlab - 将 matlab gui 添加到 powerpoint 演示文稿

> ID：11821273
> 
> 赞同：0
> 
> 时间：2012-08-06T00:18:56.623
> 
> 标签：matlab, user-interface, powerpoint

我很好奇是否可以将 matlab gui 添加到 powerpoint 演示文稿中。在演示文稿或打开 matlab 的链接中。

我调用这个函数，它会打开图形然后立即关闭它。

```
Private Sub click_Click()
Call RunFile("new_control_pan", "C:\Users\mhaartman\Documents\PANE_golden2\PANE_golden\code")
End Sub

Sub RunFile(FILENAME As String, Optional FilePath As String)
Dim MATLAB As Object
Dim Result As String
Dim Command As String
Dim MATLABWasNotRunning As Boolean
'''''''''''''''''''''''''''''''''''''''''''''''''''
' Set Up
'''''''''''''''''''''''''''''''''''''''''''''''''''
' Connect to the automation server.
' MATLAB becomes a MATLAB handle to the running instance
' of MATLAB.
On Error Resume Next ' Defer error trapping
MATLAB = GetObject(, "matlab.application") 
If Err.Number <> 0 Then
MATLABWasNotRunning = True
Set MATLAB = CreateObject("matlab.application")
Err.Clear ' Clear Err object in case error occurred.
End If
'''''''''''''''''''''''''''''''''''''''''''''''''''
' Do the Work
'''''''''''''''''''''''''''''''''''''''''''''''''''
If Not IsMissing(FilePath) And Not FilePath = "" Then
Command = "cd('" + FilePath + "')"
Result = MATLAB.Execute(Command)
End If
Command = FILENAME
Result = MATLAB.Execute(Command)

'Result = MsgBox("Done", vbOkayOnly, "Click when done")
End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:28:23.820

也许你可以看看[Calling MATLAB from PowerPoint](http://www.mathworks.com/matlabcentral/fileexchange/19597-calling-matlab-from-powerpoint)。这个在 File Exchange 上的提交可能已经过时了，因为它是几年前创建的。但是最新版本的 MATLAB 通常继续提供 COM 接口，可以从 PowerPoint 中调用。它可能需要一些更新，但我确信任何问题都是可以纠正的。

# php - 从 Mysql 中获取 Result，将链接的内容转换为 XML，然后输出

> ID：11821276
> 
> 赞同：0
> 
> 时间：2012-08-06T00:19:25.693
> 
> 标签：php, mysql, arrays, xml-parsing

**更新代码**

```
 <?php
#header( "Content-Type: application/xml" );

    function doLoop($arr = array())
{
global $newsStory;
foreach( $arr as $r )
{
 //check if we're dealing with an array (multiple links)
        if ( is_array($r) === true )
        {
        //loop through the array and work with each link
        foreach ( $r as $link_)
    //check if link is an array
    if ( is_array($link_) ){doLoop($link_); continue;}
    // //end of third dimension array found
        ## gets url from database as outlined above.
        $xmlUrl = $link_;
        #Loads the url above into XML    
        $ConvertToXml = simplexml_load_file($xmlUrl);
        # -> Setup XML
        $newsStory[] = $ConvertToXml->channel->item;
        }//end of loop
        continue;//move on
 }//end of is array

        //if we get here, we know that only $r is not an array, just a value, so:
        ## gets url from database as outlined above.
        $xmlUrl = $r;
        #Loads the url above into XML    
        #$ConvertToXml = simplexml_load_file($xmlUrl);
         # -> Setup XML
        #$newsStory[] = $ConvertToXml->channel->item;
        $newsStory[] = $r;
        print_r($newsStory);

}//end of function

## Loop through results from mysql
try{
    #connection string
        // $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thedb',array(PDO::ATTR_PERSISTENT => true));
        $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thedb','root','toshiba1',array(PDO::ATTR_PERSISTENT => true));
        $q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=1 and leagID=20");
    #call stored proc
        $q->execute();
    #get the rows into an array
        $result = $q->fetchAll();
        $newsStory = array();
doLoop($result);

    # -----> Load News Stories
        for($i = 0;$i<sizeof($newsStory); $i++){
                    //print_r($newsStory);
                    echo "<a href='".$newsStory[$i]->link."'>".$newsStory[$i]->title."</a><br />";
                    echo $newsStory[$i]->description;
                    echo '<hr>';
        }   // for()

} // try

catch(Exception $e){
    $errorPg='errors/fanwire_loop.php';
    $pageDateOfError = $e->getMessage().'on:'.'aggregate_looping.php'.' on '.date('l jS \of F Y h:i:s A');  # inc. details of error
    file_put_contents($errorPg,$pageDateOfError, FILE_APPEND | LOCK_EX);
} // catch

?> 
```

print_r() 的输出： ![img2](../Images/bfb6bf3968892c433d1b152df755a27e.png)

print_r() 的另一个输出示例： ![6](../Images/d3edfb0012ded57b60a9c4a1268ea4f9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:19:51.740

这开始变得非常混乱。

你的代码一团糟，所以我要从这里开始。

你说`print_r($result)`返回这个：

```
Array ( [0] => Array ( [FW_ArtSrcLink] => http://sports.espn.go.com/espn/rss/tennis/news [0] => http://sports.espn.go.com/espn/rss/tennis/news ) [1] => Array ( [FW_ArtSrcLink] => http://sports.yahoo.com/tennis/rss.xml [0] => http://sports.yahoo.com/tennis/rss.xml ) [2] => Array ( [FW_ArtSrcLink] => http://bleacherreport.com/articles;feed?tag_id=12 [0] => http://bleacherreport.com/articles;feed?tag_id=12 ) 
```

因此，该 var 中有三个数组，每个数组包含两个链接。

所以，两个简单的`foreach`循环应该可以很容易地处理这个问题：

```
foreach ($result as $value )
{

  if ( is_array($value) )
  {
     foreach ( $value as $secondValue )
     {

     }

     continue;

  }

} 
```

应该就是这么简单。

我们将在一个函数中进行所有处理。

```
function processLink( $link , $appendArr )
{

    ## gets url from database as outlined above.
    $xmlUrl = $link;
    #Loads the url above into XML    
    $ConvertToXml = simplexml_load_file($xmlUrl);
    # -> Setup XML
    $appendArr[] = $ConvertToXml->channel->item;

} 
```

所以，最终结果应该是：

```
function processLink( $link , $appendArr )
{

   ## gets url from database as outlined above.
   $xmlUrl = $link;
   #Loads the url above into XML    
   $ConvertToXml = simplexml_load_file($xmlUrl);
   # -> Setup XML
   $appendArr[] = $ConvertToXml->channel->item;

}

$dbconn = new PDO('mysql:host=localhost;port=3306;dbname=thedb','root','toshiba1',array(PDO::ATTR_PERSISTENT => true));
$q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=1 and leagID=20");
$q->execute();
$result = $q->fetchAll();
$newsStory = array();

foreach ($result as $value )
{

    if ( is_array($value) )
    {
       foreach ( $value as $secondValue )
       {
          processLink($secondValue , &$newsStory);
       }

    continue;

    }

    processLink($value , &$newsStory);

}

print_r($newsStory); 
```

# java - 包含空格的 Java 运行命令行

> ID：11821277
> 
> 赞同：3
> 
> 时间：2012-08-06T00:19:32.283
> 
> 标签：java, command-line, batch-file, cmd

我正在尝试从我的 Java 应用程序运行 .bat 文件。我已经尝试了所有我能找到的方法，但似乎都没有奏效。

问题是 .bat 文件的路径包含空格。

我现在正在使用[这个](http://viralpatel.net/blogs/how-to-execute-command-prompt-command-view-output-java/)方法，所以我可以在我的 Eclipse 控制台中看到结果

我的实际代码是：

```
Runtime rt = Runtime.getRuntime();
String processString = "cmd /c \"" + homeFolder.getAbsolutePath() + SETUP_FILE + "\" \"" + homeFolder.getAbsolutePath() + "\"";
    try {
        Process proc = rt.exec(processString);
    ...
    } 
```

我尝试过转义引号，而不转义引号，将字符串分隔成`String[]`并将每个空格分隔的命令放置在自己的单元格中：

```
{ "cmd", "/c", \"" + homeFolder.getAbsolutePath() + SETUP_FILE + "\" ... }; 
```

同样，无论是否转义引号：没有任何效果。

我还尝试对数组和字符串的路径进行硬编码。每次结果都一样。

```
homeFolder = C:\Users\La bla bla\workspace\ToolMaker\bin\
SETUP_FILE = setup.bat 
```

整个命令是这样的：

```
cmd /c "C:\Users\La bla bla\workspace\ToolMaker\bin\setup.bat" "C:\Users\La bla bla\workspace\ToolMaker\bin" 
```

同样，无论有没有引号，相同的输出：

```
Output: 
Error: 'C:\Users\La' is not recognized as an internal or external command,operable program or batch file. 
```

显然我在 Windows（7、64 位专业版）上运行。爪哇 7

我看到一些人说他们以前遇到过这个问题，但我找不到如何解决这个问题的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T00:25:33.743

使用[`Runtime.exec(String[])`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29)需要的版本`String[]`：

```
Runtime rt = Runtime.getRuntime();
String[] processCommand = { "cmd", "/c", path };

try
{
    Process proc = rt.exec(processCommand);
    // ...
} 
```

这对我有用（Win7）：

```
Runtime rt = Runtime.getRuntime();
String[] processCommand = { "cmd", "/c", "c:" + File.separatorChar + "dir with spaces" + File.separatorChar + "test.bat" };

System.out.println("xPATH: " + processCommand[2]);

Process p = rt.exec(processCommand);
// output of the command is as expected 
```

`\`如果我明确使用，这也有效：

```
String[] processCommand = { "cmd", "/c", "c:\\dir with spaces\\test.bat" }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:26:20.780

我有一个类似的问题，但我使用的是`start`参数，所以它可能不是“完全”相同的问题。

`cmd`不喜欢扩展目录名称（我个人不知道为什么，我只知道它不喜欢）。它将需要“缩短的”（8.2）名称

这意味着`wallpaper.jpg`需要成为`WALLPA~1.JPG`

在这里，您遇到了问题。如果您有多个`wallpaper*.*`文件，您想要哪个文件会怎样？

现在，要使其在 Windows 下正常工作，您将不得不降低到本机级别。

有一个称为`GetShortPathName`（及其变体）的 Windows 函数，它基本上给出了一个“长名称”（路径和文件名）将为您生成“短名称”。

# jquery - jQuery如何从对象中获取内部对象并对一项进行求和

> ID：11821279
> 
> 赞同：0
> 
> 时间：2012-08-06T00:20:11.707
> 
> 标签：jquery, ajax

从这个`order`对象中，我想从`products`数组中的每个对象中提取一个特定的属性。

```
var order = {
  "products": [
    {
      "product_name":"Name",
      "product_sku":"000000075266",
      "pricesUnformatted":5130,
      "prices":"5.130 EUR",
      "subtotal":5130,
      "subtotal_tax_amount":0,
      "subtotal_discount":0,
      "subtotal_with_tax":5130,
      "quantity":18
    },
    {
      "product_name":"Name2",
      "product_sku":"000000072312",
      "pricesUnformatted":369,
      "prices":"369 EUR",
      "subtotal":369,
      "subtotal_tax_amount":0,
      "subtotal_discount":0,
      "subtotal_with_tax":369,
      "quantity":1
    }
  ],
  "totalProduct":19,
  "billTotal":"<div class='cart_left'>TotalPrice<\/div> : <strong>6.826 EUR<\/strong>",
  "dataValidated":false,
  "totalProductTxt":"<div class='cart_left'>Quantity<\/div> <div class='cart_right'><strong>19<\/strong><\/div>"
} 
```

因此，我想从这个对象中获取“subtotal_with_tax”项目，然后对它们求和，当然打印结果，因为“billTotal”包含我不需要的运费，在我得到这个之前我不能修改代码目的。

我试图让它工作，但我被困在这一点上，因为我不知道如何定位特定项目的价值，比如在这种情况下 "subtotal_with_tax" ：

```
$.each(order.products, function(key, val) {
  $.each(val, function(key, val) {});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:22:44.053

```
var subtotals_with_tax = 0;

$.each( order.products, function( index, product ) {

  subtotals_with_tax += product.subtotal_with_tax;

} ); 
```

正如@eicto 所说，如果您只关心支持它的浏览器，或者`map()`在其他浏览器中使用“polyfill”或一般的ES5方法，请务必使用`map()`：

```
var subtotals_with_tax = 0;

order.products.map( function( product ) {

  subtotals_with_tax += product.subtotal_with_tax;

} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:28:57.190

只需使用 map() 它不是 jquery

```
var sttotal=0;
order.products.map(function(a){sttotal+=a.subtotal_with_tax}) 
```

# objective-c - ObjectiveC: if (obj) {...} AND if (obj != nil) {...}，哪个更好？

> ID：11821282
> 
> 赞同：5
> 
> 时间：2012-08-06T00:20:32.213
> 
> 标签：objective-c, null

我看过很多 ObjC 代码，它们可以：

```
obj = [[SomeObject alloc] init];
if (obj) {
/// ...
} 
```

但据我了解，() 里面的值是布尔值，0 表示 FALSE 1 表示 TRUE（在其他语言中还有另一种情况，0 为真，1 为假），如果指针不指向任何东西，它设置为 NULL(nil)，即 #defined 为 0，所以我想知道如果我这样做会更好：

```
if (obj != nil) {
/// ...
} 
```

因为它正在检查 obj 是否为 nil，无论值`nil`是什么，所以它不依赖于`nil`（或`NULL`）恰好被定义为 0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T00:27:09.103

**编辑：** 经过一番测试，我确定**现代编译器实际上会为这两种情况创建相同的机器代码**；

原帖：

它（也许可以忽略不计）使用效率更高

```
if(obj) { 
```

因为您不需要创建中间布尔值（通过评估比较表达式）。关于非零为 FALSE，我不确定您指的是哪种“其他语言”；我能想到的最接近的事情是 c 程序为“成功”返回 0，为“错误”返回任何其他值。我曾经使用过的每一种现代语言都使用 0 作为 FALSE，使用*任何非零值*作为 TRUE。

在 Objective-C 中，nil 实际上是 0（被视为指针）。它不仅仅是一个指向零的指针，它作为一个指针是零。因此，它可靠地等同于 FALSE（或者，在我们的命名法中为“NO”）。

**经过一番测试后编辑** ，我确定**现代编译器实际上会为这两种情况创建相同的机器代码**；可能是因为 nil 本质上是 typedef 为 0，所以它知道两种检查方式都在说“如果这个指针非零”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T00:25:18.163

> 0 表示 FALSE 1 表示 TRUE

关。在 C（和 Objective-C）中，0 计算为假，*非零*计算为真。所以一个 nil（或 NULL）指针是“假”的，但任何非 nil 指针都是“真”。

您的示例本质上是等效的；两者都不比另一个“更好”（除非您或您的代码库有风格偏好）。

# php - php中的html调用图像

> ID：11821283
> 
> 赞同：0
> 
> 时间：2012-08-06T00:20:42.777
> 
> 标签：php, html, image

```
<?php if ($this->checkPosition('image')) : ?>
<?php
echo "<table class=\"remove-margin-t\"  cellpadding=\"0\" cellspacing=\"0\" width=\"97%\"  align=\"center\" border=\"0\" style=\"max-width:625px; border:1px solid;\" background=\"..\images";
?>
<?php
echo $this->renderPosition('image')
<?php
echo ".png\">";
?>
<?php endif; ?> 
```

我试图弄清楚如何正确调用图像。调用图像的回声并具有特定名称，例如“粉红色”，“蓝色”，“绿色”等。但是，这取决于位置部分...

这就是它在 html 中的样子。

```
<table cellpadding="0" cellspacing="0" width="97%" align="center" border="0" style="max-width:625px; border:1px solid #CCC"  background="http://localhost/images/[insert color name here].png" > 
```

这是原始的php

```
<?php if ($this->checkPosition('color')) : ?>
<?php echo $this->renderPosition('color'); ?>
<?php endif; ?> 
```

任何帮助，将不胜感激。我确信它一定是'\'或'"'问题。

最好的，

史蒂文

对杰瑞德：

你的意思是这样吗？

```
<?php if ($this->checkPosition('image')) : ?>
<?php
echo "<table class=\"remove-margin-t\"  cellpadding=\"0\" cellspacing=\"0\" width=\"97%\" align=\"center\" border=\"0\" style=\"max-width:625px; border:1px solid;\" background=\"../images/";
echo $this->renderPosition('image')
echo ".png\">";
?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:31:02.357

您不需要在每一行 PHP 代码上打开/关闭 PHP 标记。您的代码可以这样重写：

```
<?php

if ($this->checkPosition('image')) {
    echo '<table class="remove-margin-t" cellpadding="0" cellspacing="0" width="97%"  align="center" border="0" style="max-width:625px; border:1px solid;" background="../images"' . $this->renderPosition('image') . '.png">';
}

?> 
```

我用单引号替换了一些双引号，以避免到处使用反斜杠。
我连接了您的文本，以便只`echo`使用一个。

我在第一个结尾处修正了一个可能的错误`echo`：我用斜杠替换了黑斜杠，因为 URL 中的目录分隔符是斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:58:00.597

我不知道 '$this' 是什么对象，也不知道 checkPosition 方法是做什么的 另外，输出 'renderPosition('color') 会产生什么。

无论哪种方式，这段代码

```
<?php if ($this->checkPosition('color')) : ?>
<?php echo $this->renderPosition('color'); ?>
<?php endif; ?> 
```

是不恰当的，应该写成：

```
<?php
if ($this->checkPosition('color')) {
     echo $this->renderPosition('color');
} 
?> 
```

话虽如此，服务器标记“？php”和“？” 代表服务器代码的开始和结束。因此，通常在这些标签之外是标准的 html 标记。

因此，您可以在服务器代码之外使用 html 标记，

```
<?php if ($this->checkPosition('color')) { ?>
      <div style="width:97%;text-align:center;max-width:625px;border:1px solid #CCC;background-image:url('<?php echo "http://localhost/images/" . $this->renderPosition('color') . ".png"; ?>');display:inline-block;position:relative;">
          &nbsp;
      </div>
<?php } ?> 
```

我把你的表变成了一个 div，并使用了 CSSstyleAttributes，而不是折旧的 html 属性。

另外，我还假设 renderPosition 的输出是一个文件名，没有文件扩展名。

编辑：

localhost 是指您自己的计算机。

您可能想使用：

```
echo "//" . $_SERVER['SERVER_NAME'] . "/images/" . $this->renderPosition('color') . ".png"; 
```

代替

```
 echo "http://localhost/images/" . $this-renderPosition('color') . ".png"; 
```

# css - css 两个背景图片

> ID：11821285
> 
> 赞同：21
> 
> 时间：2012-08-06T00:21:37.333
> 
> 标签：css

对 css 来说有点新，但我在左上角有一个我想要的图像，然后我想在此之后重复另一个图像。目前我很累：

CSS

```
#topsection{
    background: url('../images/bannerBGs.jpg');
    background-repeat:no-repeat;
    background: url('../images/bannerBGl.jpg');
    background-repeat:repeat-x;
    height: 200px; /*Height of top section*/
    color: White;
    text-align:center
}

#topsection a{
    color: #FFFF80;
}

#topsection h1{
    margin: 0;
    padding-top: 25px;
    text-align:Left
}

#topsection h2{
    margin: 0;
    padding-top: 0px;
    text-align:Center
} 
```

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>IG Indy Gamers</title>
<link rel="stylesheet" type="text/css" href="CSS/mycss.css" media="screen" />    
</head>
<body>
<div id="maincontainer">

<div id="topsection" > <div class="innertube">
    <h1>IG -Indy Gamers </h1>  
    <FONT style="BACKGROUND-COLOR: blue"><p align='right'><a href="#"> &nbspSignup</a> </font> / <a href='Login.html' id='LoginContent' >Login </a></p> 
    <ul id="list-nav">
        <li><a href="#">Home</a></li>
        <li><a href="#">Reviews</a></li>
        <li><a href="#">News</a></li>
        <li><a href="#">Forums</a></li>
        <li><a href="#">Demo's</a></li>
        <li><a href="#">Members</a></li>
        <li><a href="#">Contact</a></li>
    </ul>

</div></div> 
```

但第二张图片只是复制了第一张。你能建议另一种方法来做到这一点。我听说使用图层可以做到这一点，但我对此一无所知。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-06T00:29:41.050

看起来 CSS3 支持[多个背景图像](http://www.css3.info/preview/multiple-backgrounds/)；您指定它们用逗号分隔：

```
background: url('banner1.jpg'), url('banner2.jpg');
background-position: left top, left top;
background-repeat: no-repeat, repeat; 
```

玩，`background-position`直到它做你想要的。

IE < 9 不支持此功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T00:28:02.100

您需要创建 2 个包含元素：1 个用于重复图像。左上角的图像是第二个。

换句话说，类似于以下内容：

```
<div class="repeatingBgImage">
  <div class="otherBgImage">
    <!-- content -->
  </div>
</div> 
```

CSS 以一种很好的级联方式工作。您声明的任何内容都可以并且将被语句中的下一行覆盖，即

```
.someClass {
  color: yellow;
  color: blue;
} 
```

文本的最终颜色将是蓝色，而不是绿色（黄色+蓝色=绿色）。

鉴于您的样本...

```
#topsection{
  background: url('../images/bannerBGs.jpg');
  background-repeat:no-repeat;
  background: url('../images/bannerBGl.jpg');
  background-repeat:repeat-x;
} 
```

...背景图像将始终是`bannerBGl.jpg`并且`repeat-x`因为它在 CSS 的声明中较低，因此覆盖以前的 bg 图像并重复声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T00:29:59.043

如果您的目标是新浏览器，css3 现在可以在一个元素上应用两个背景图像。你可能想看看这个

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T08:36:16.893

你的CSS

```
/*TOPSECTION */
#topsection{
background: url('../images/bannerBGs.jpg');
background-repeat:no-repeat;
background: url('../images/bannerBGl.jpg');
background-repeat:repeat-x;
height: 200px; /*Height of top section*/
color: White;
text-align:center
} 
```

试试这个

```
background-image:url('../images/bannerBGs.jpg'),url('../images/bannerBGl.jpg');
background-repeat: no-repeat, repeat-x;
background-position: left top , 20px 30px; 
//background-position  adjust second value which in px until  you meet your requirment 
```

谢谢！

# paypal - Paypal 订阅按钮安全性

> ID：11821291
> 
> 赞同：0
> 
> 时间：2012-08-06T00:22:50.070
> 
> 标签：paypal

当我阅读 Paypal 订阅按钮上的文档时，我越来越担心安全性。提供美元金额作为隐藏输入似乎很容易用 firebug 修改并更改为不同的东西。Paypal 如何验证美元金额？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:31:33.697

您可以使用 paypals IPN 验证收到的金额，当付款通过时，它将通知您的脚本付款，然后让您的脚本检查收到的金额，如果它与应该的不同，然后标记它。

# android - 将过滤器应用于位图的特定区域 - Android

> ID：11821297
> 
> 赞同：2
> 
> 时间：2012-08-06T00:24:09.287
> 
> 标签：android, bitmap

我有一个过滤为灰度的彩色位图。当用户触摸它时，我想从触摸点为一个不断扩大的彩色圆圈设置动画。
我不希望使用两个位图（一种颜色和一种灰度）和一个蒙版来获得这种效果。
我可以制作动画。
您可以将绘画过滤器应用于位图的特定（圆形）区域吗？
不确定它是否相关，但位图显示在 SurfaceView 中。

# google-fusion-tables - 并非所有行都显示在融合表的地图视图中

> ID：11821298
> 
> 赞同：0
> 
> 时间：2012-08-06T00:24:10.677
> 
> 标签：google-fusion-tables

我有一个 Google 融合表，其中包含大约 50k 行的 kml 数据。当我在融合表 UI 中调出地图视图时，我只能看到大约几千行的数据。

当我执行空间查询以返回适合边界的数据时，我没有得到前几千行之后的任何结果。

我查看了我的 kml，它似乎是正确的。我是否遇到了一些限制，或者我应该看看别的东西。如果需要，如果有人想查看表格，我可以提供表格 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:21:15.923

KML 不需要进行地理编码。

KML 有时可能有非常大的文件，即使只有 50K 行。如果您的原始文件非常大（>100 MB），您可能会遇到性能问题。我建议使文件更小（更简单）并重新开始。

如果您在给定地图图块中遇到超过 500 个项目的问题，则在您放大时会出现更多项目。（因为更多地图图块用于覆盖同一区域。）

-丽贝卡

# asp.net - 在 asp.net MVC 中，如果 url 有参数，是否必须注册路由？

> ID：11821299
> 
> 赞同：0
> 
> 时间：2012-08-06T00:24:25.000
> 
> 标签：asp.net, asp.net-mvc

在我有限的（2 周）asp.net MVC3 经验中，对于大多数操作方法，我从来不需要添加路由注册。但我注意到，如果操作方法有一个输入参数，那么我无法使用 www.mysite.com/myController/myAction/myParameter1/myParameter2/myParameter3 形式的 url 访问该方法（没有 ? 标记），除非我绘制路线。这就是它应该的样子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T00:31:47.267

默认情况下，您已经注册了路由：

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

它接受一个名为 id 的参数，因此您的操作：

```
public ActionResult MyAction(string id) 
```

将“捕获”请求：

```
www.mysite.com/MyController/MyAction/parameter_value 
```

并将`id`获得值“parameter_value”。

如果您需要多个参数（或参数必须是“id”以外的名称），那么您必须注册新路由。

如果您有 2 个参数，您将像这样注册路由：

```
routes.MapRoute(
                    "Default", 
                    "{controller}/{action}/{parameter1}/{parameter2}", 
                    new { controller = "Home", action = "Index", parameter1 = UrlParameter.Optional, parameter2=UrlParameter.Optional } 
                ); 
```

你的行动可能是：

```
public ActionResult MyAction(string parameter1, int? parameter2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T00:33:18.327

是的，您需要`global.asax`根据您的要求注册路线自定义路线。您必须通过以下方式注册路线：

```
routes.MapRoute(
            "routeName",                                              // Route name
            "{controller}/{action}/{myParameter}",                           // URL with parameters
            new { controller = "Home", action = "Index", myParameter= "" }  // Parameter defaults
        ); 
```

因此，通过上述路由，它确保每当您的 url 采用上述格式时，后面的参数`"action/"`将被视为参数.....

对于您的 url 中的多个参数，您可以像这样注册：

```
routes.MapRoute(
            "routeName",                                              // Route name
            "{controller}/{action}/{myParameter1}/{myParameter2}/{myParameter3}",                           // URL with parameters
            new { controller = "Home", action = "Index", myParameter1= "", myParameter2= "", myParameter3= "" }  // Parameter defaults
        ); 
```

# javascript - 获取字符串中出现在指定文本之前的部分文本

> ID：11821302
> 
> 赞同：0
> 
> 时间：2012-08-06T00:24:32.143
> 
> 标签：javascript, jquery

> **可能重复：**
> [javascript 在逗号前截断字符串](https://stackoverflow.com/questions/4971961/javascript-truncate-string-before-comma)

在 javascript 变量中，存储了一个文本（字符串）...

```
var maintext=" This is some random text. This is second sentence. This is third sentence."; 
```

现在另一个变量存储第一个变量的一部分文本，如下所示

```
var textportion="third sentence."; 
```

现在，我想获取变量“maintext”中的文本，该文本出现在存储在“textportion”变量中的文本之前......即在这个例子中，我想获得

```
" This is some random text. This is second sentence. This is " 
```

我如何获得这个？我更喜欢纯 JS，但我也可以接受使用 jquery 之类的库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:25:39.677

```
 // find the starting index of the targeted text
var idx = maintext.indexOf(textportion);

     // -1 means no match was found
if (idx !== -1)
    var firstpart = maintext.slice(0, idx); // slice text from start until idx 
```

***演示：http:*** [//jsfiddle.net/hkJnn/](http://jsfiddle.net/hkJnn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:31:46.803

我会使用：

```
maintext.split(textportion, 1)[0]; 
```

**[演示](http://jsfiddle.net/j3kwN/)**

# r - 从 NA 超过列长度的 15% 的 data.frame 中删除列

> ID：11821303
> 
> 赞同：4
> 
> 时间：2012-08-06T00:24:52.917
> 
> 标签：r, dataframe

我有`data.frame`10 个不同的列（每列的长度相同）。我想消除任何 ' `NA`' 大于列长 15% 的列。

我是否需要先创建一个函数来计算`NA`每列的百分比，然后再`data.frame`在我应用该函数的地方创建另一个函数？最好的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T17:25:45.193

First, it's always good to share some sample data. It doesn't need to be your actual data--something made up is fine.

```
set.seed(1)
x <- rnorm(1000)
x[sample(1000, 150)] <- NA
mydf <- data.frame(matrix(x, ncol = 10)) 
```

Second, you can just use inbuilt functions to get what you need. Here, `is.na(mydf)` does a logical check and returns a `data.frame` of `TRUE` and `FALSE`. Since `TRUE` and `FALSE` equate to `1` and `0`, we can just use `colMeans` to get the mean of the number of `TRUE` (is `NA`) values. That, in turn, can be checked according to your stipulations, in this case which columns have more than 15% `NA` values?

```
colMeans(is.na(mydf)) > .15
#    X1    X2    X3    X4    X5    X6    X7    X8    X9   X10 
#  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE 
```

As we can see, we should drop X1, X2, X6, X8, and X9\. Again, taking advantage of logical vectors, here's how:

```
> final <- mydf[, colMeans(is.na(mydf)) <= .15]
> dim(final)
[1] 100   5
> names(final)
[1] "X3"  "X4"  "X5"  "X7"  "X10" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T10:39:47.853

你可以像这样用 data.table 来做

将数据加载到 data.table 中。叫它DT。假设第 2 到第 4 列是数字。

```
Theta = 0.15
Drop <- DT[, lapply(.SD, function (x) {sum(is.na(x))/length(x) > Theta} ), .SDcols = 2:4]
Cols.2.Drop <- names(Drop)[which(Drop==TRUE)]
DT[, (Cols.2.Drop) := NULL] 
```

在这里用数据测试：

```
Obs Var1    Var2    Var3
A0001   21  21  21
A0002   21  78  321
A0003   32  98  87
A0004   21  12  54
A0005   21  13  45
A0006   21  87  45
B0007   84  NA  45
B0008   21  NA  98
B0009   2   NA  45
B0010   12  NA  45 
```

# hibernate - Hibernate 3.2 和 apache dbcp 吃掉 postgres 连接

> ID：11821307
> 
> 赞同：0
> 
> 时间：2012-08-06T00:25:17.020
> 
> 标签：hibernate, apache-commons-dbcp

我有一个简单的实体 bean，并使用 hibernate 3.2.5 将其持久化到 postgres，prod 将是 pg 8.4，而我目前在 9.1 上开发。我使用 apache commons dbcp 1.4（和 commons pool 1.5.4）一个公共类 DBCPConnectionProvider 实现 ConnectionProvider 作为从网络上搜索到的[http://wiki.apache.org/commons/DBCP/Hibernate](http://wiki.apache.org/commons/DBCP/Hibernate)

之前我使用 c3po 和 mysql 而不是 dbcp。现在我明白了

引起：org.hibernate.exception.GenericJDBCException：无法打开连接

和

原因：org.postgresql.util.PSQLException：致命：剩余的连接槽保留用于非复制超级用户连接

之前使用 mysql/c3po，我得到了类似的错误。

目前 persistence.xml 属性如下所示：

```
 <property name="hibernate.connection.username" value="marin-legacy"/>
  <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>
  <property name="hibernate.connection.password" value="marin-legacy"/>
  <property name="hibernate.connection.url" value="jdbc:postgresql://localhost/database"/>
  <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
  <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
  <property name="show_sql" value="true"/>

  <property name="hibernate.connection.provider_class" value="vinter2010.persistence.DBCPConnectionProvider"/>
  <property name="hibernate.dbcp.initialSize" value="1"/>
  <property name="hibernate.dbcp.maxActive" value="5"/>
  <property name="hibernate.dbcp.maxIdle" value="5"/>
  <property name="hibernate.dbcp.minIdle" value="1"/> 
```

使用它我希望 dbcp 保持 5 个连接打开并将这些连接重新分配给 javacode。

目前我有一个插入记录的servlet。它成功插入的数量或多或少等于 postgresql.conf 中的 max_connections 数量，即 100。之后它失败并出现上述错误。当前，servlet 由在循环 apx 中运行 350 次的客户端调用，在每个循环中发布一行以存储 servlet。

如果我在没有 dbcp 或其他池的情况下运行，我会得到相同的异常，唯一的变化是它是由 hibernate 而不是 dbcp 抛出的。

我本来希望 dbcp 只分配 5 个连接，而休眠一次只打开和关闭一个连接。

实际代码很简单，基本都是netbeans 6.5中的jpa-generator生成的。

这是我从我的 servlet 调用的创建函数（Netbeans 的代码）：

```
 public void create(WebOrderWinter2 webOrderWinter2) {
    EntityManager em = null;
    try {
        em = getEntityManager();
        em.getTransaction().begin();
        em.persist(webOrderWinter2);
        em.getTransaction().commit();
    } finally {
        if (em != null) {
            em.close();
        }
    }
} 
```

实体bean同样标准，基本上就像Netbeans生成它一样，它完美无缺，无法想象连接问题在那里。似乎我有一些代码/配置使 Hibernate 否决了连接池配置并让池打开新连接而不是重用旧连接。有人在这里有任何线索吗？

# python - 用 Python 永久存储字典的优雅方式？

> ID：11821322
> 
> 赞同：25
> 
> 时间：2012-08-06T00:28:21.277
> 
> 标签：python, database, json, dictionary

目前解析文件的成本很高，该文件会生成约 400 个键值对的字典，很少更新。以前有一个解析文件的函数，将其写入字典语法（即。`dict = {'Adam': 'Room 430', 'Bob': 'Room 404'}`）等的文本文件中，然后将其复制并粘贴到另一个函数中，该函数的唯一目的是返回已解析的字典。

因此，在我将使用该字典的每个文件中，我将导入该函数，并将其分配给一个变量，该变量现在就是该字典。想知道是否有更优雅的方法来做到这一点，它不涉及显式复制和粘贴代码？使用数据库似乎没有必要，文本文件让我在将其添加到函数之前查看解析是否正确完成。但我愿意接受建议。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-06T00:32:13.347

为什么不将其转储到 JSON 文件中，然后从那里加载到您需要的地方呢？

```
import json

with open('my_dict.json', 'w') as f:
    json.dump(my_dict, f)

# elsewhere...

with open('my_dict.json') as f:
    my_dict = json.load(f) 
```

从 JSON 加载相当有效。

另一种选择是使用[`pickle`](http://docs.python.org/library/pickle)，但与 JSON 不同，它生成的文件不是人类可读的，因此您会失去从旧方法中喜欢的视觉验证。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-06T06:11:05.430

Why mess with all these serialization methods? It's already written to a file as a Python dict (although with the unfortunate name 'dict'). Change your program to write out the data with a better variable name - maybe 'data', or 'catalog', and save the file as a Python file, say data.py. Then you can just import the data directly at runtime without any clumsy copy/pasting or JSON/shelve/etc. parsing:

```
from data import catalog 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-06T01:07:54.790

在许多情况下，JSON 可能是正确的方法；但可能有替代方案。看起来您的键和值始终是字符串，对吗？您可以考虑使用[`dbm`](http://docs.python.org/library/dbm.html)/ [`anydbm`](http://docs.python.org/library/anydbm.html#module-anydbm)。这些是“数据库”，但它们的行为几乎与字典完全一样。它们非常适合廉价的数据持久性。

```
>>> import anydbm
>>> dict_of_strings = anydbm.open('data', 'c')
>>> dict_of_strings['foo'] = 'bar'
>>> dict_of_strings.close()
>>> dict_of_strings = anydbm.open('data')
>>> dict_of_strings['foo']
'bar' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-06T01:31:46.573

如果键都是字符串，可以使用[shelve](http://docs.python.org/library/shelve)模块

> [架子](http://docs.python.org/library/shelve)是一个持久的、类似字典的对象。与“dbm”数据库的区别在于架子中的值（不是键！）本质上可以是任意的 Python 对象——pickle 模块可以处理的任何东西。这包括大多数类实例、递归数据类型和包含大量共享子对象的对象。键是普通字符串。

`json`如果您需要使用其他语言的数据，将是一个不错的选择

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-06T00:46:05.400

如果存储效率很重要，请使用 Pickle 或 Cpickle（用于提高执行性能）。正如 Amber 所指出的，您还可以通过 Json 转储/加载。它将是人类可读的，但需要更多磁盘。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-06T01:48:40.800

我建议您考虑使用该`shelve`模块，因为您的数据结构是一个映射。这是我对标题为“[*如果我想构建自定义数据库，我该怎么做？*](https://stackoverflow.com/questions/5823236/if-i-want-to-build-a-custom-database-how-could-i) ”的类似问题的[回答。](https://stackoverflow.com/questions/4529914/python-how-to-get-a-object-database/4530124#4530124)[在我的另一个答案](https://stackoverflow.com/a/4530124/355230)中还有一些示例代码，用于推广[*如何获取对象数据库？*](https://stackoverflow.com/questions/4529914/how-to-get-a-object-database)[](https://stackoverflow.com/questions/5823236/if-i-want-to-build-a-custom-database-how-could-i)*[](https://stackoverflow.com/questions/4529914/how-to-get-a-object-database)*

 **ActiveState 有一个高度评价的[PersistentDict](http://code.activestate.com/recipes/576642)配方，它支持 csv、json 和 pickle 输出文件格式。它非常快，因为所有这三种格式都是用 C 实现的（尽管配方本身是纯 Python），所以它在打开文件时将整个文件读入内存这一事实可能是可以接受的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T02:01:49.880

在 JSON 方向上，还有一种叫做 simpleJSON 的东西。我第一次在 python 中使用 json，json 库对我不起作用/我想不通。simpleJSON...更易于使用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-06T02:53:25.367

JSON（或 YAML 或其他）序列化可能更好，但如果您已经将字典写入 python 语法的文本文件，并完成了变量名绑定，则可以将其写入 .py 文件。然后该 python 文件将可以按原样导入和使用。不需要“返回字典的函数”方法，因为您可以直接将其用作该文件中的全局变量。例如

```
# generated.py
please_dont_use_dict_as_a_variable_name = {'Adam': 'Room 430', 'Bob': 'Room 404'} 
```

而不是：

```
# manually_copied.py
def get_dict():
    return {'Adam': 'Room 430', 'Bob': 'Room 404'} 
```

唯一的区别是`manually_copied.get_dict`每次都为您提供字典的新副本，而`generated.please_dont_use_dict_as_a_variable_name`[1] 是单个共享对象。如果您在检索字典后在程序中修改字典，这可能很重要，但如果您需要独立修改一个字典，您始终可以使用`copy.copy`或`copy.deepcopy`创建一个新副本。

* * *

[1] `dict`, `list`, `str`, `int`,`map`等通常被视为错误的变量名。原因是这些已经被定义为内置，并且非常常用。因此，如果你给某个东西起这样的名字，至少它会导致阅读你的代码的人（包括你离开一段时间后的你）产生认知失调，因为他们必须记住“`dict`不是意思是它通常在这里做的事情”。也很有可能在某些时候你会得到一个令人恼火的解决错误报告`dict`对象不可调用（或其他东西），因为一些代码正在尝试使用*type* `dict`，但正在获取你的字典对象`dict`而是绑定到名称。**

# delphi-xe2 - 在日期选择时从数据库加载数据

> ID：11821325
> 
> 赞同：1
> 
> 时间：2012-08-06T00:28:34.420
> 
> 标签：delphi-xe2, delphi-xe

我正在尝试使用 dbplannercalender1 加载数据库数据。

```
procedure TForm1.DBPlannerCalendar1DaySelect(Sender: TObject;
  SelDate: TDateTime);
begin
with absQuery2 do
begin
  absQuery2.Close;
  absQuery2.sql.Clear;
  ABSQuery2.SQL.Text:='select * from log where date = :a1';
  ABSQUERY2.PARAMS.ParamByName('a1').value:= DBPlannerCalendar1.Date;
  ABSQuery2.ExecSQL;
end;
end; 
```

我收到错误“预期的日期字符串”YYYY-MM-DD”，但是“=”在第 1 行找到...”我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T16:16:01.677

使用截断值 adoQuery.Parameters.paramByName('DataDal').value := trunc(edDate.Date);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:38:10.490

使用`AsDateTime`代替`Value`, 让驱动程序将其转换为正确的格式：

```
AbsQuery2.Params.ParamByName('a1').AsDateTime := DBPlannerCalendar1.Date; 
```

如果 Absolute`AsDateTime`由于某种原因不支持，请自行格式化日期：

```
AbsQuery2.Params.ParamByName('a1').Value := 
    FormatDateTime('yyyy-mm-dd`, DBPlannerCalendar1.Date); 
```

第一种方法是最好的选择，因为它在数据库引擎之间更可移植（它适用于所有引擎，因为驱动程序将格式设置为日期的正确排列）。使用第二个意味着如果数据库期望不同于`YYYY-MM-DD`，您必须在任何使用日期的地方更改代码。

# c# - Asp.net C# 数据库插入错误

> ID：11821326
> 
> 赞同：0
> 
> 时间：2012-08-06T00:28:39.793
> 
> 标签：c#, asp.net, sql, visual-studio-2010

我在 asp.net 上运行一个简单的应用程序，它从各个页面上的文本框中获取输入，然后在最后一页上通过适配器使用插入方法。当我对文本框使用像 hjihi 这样的虚拟输入时，并没有出现异常。但是，当我对字段使用正确的输入时，我会得到整页的可怕错误。搜索了它，但没有得到正确的答案。

```
Server Error in '/Job Portal10' Application.

String or binary data would be truncated.
The statement has been terminated. 
```

描述：`An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.`

`Exception Details: System.Data.SqlClient.SqlException: String or binary data would be truncated.` 该语句已终止。

源错误：

```
Line 6127:            }
Line 6128:            try {
Line 6129:          int returnValue =    this.Adapter.InsertCommand.ExecuteNonQuery();
Line 6130:                return returnValue;
Line 6131:            } 
```

`Source File: c:\Users\Haris Riaz\AppData\Local\Temp\Temporary ASP.NET Files\job portal10\a1906c7c\e3e5272e\App_Code.6jqq8vva.1.cs Line: 6129` `Stack Trace: [SqlException (0x80131904): String or binary data would be truncated. The statement has been terminated.] System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2030802 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5009584 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234 System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2275 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +215 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +987 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) +178 System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +137 DataSet1TableAdapters.Emp_UpdateTableAdapter.Insert(String Title, String First_Name, String Last_Name, String F_First_Name, String F_Last_Name, String Gender, String Nationality, String Maritial_Status, String DOB, String CNIC, String Domicile, String Dependents, String Qualification_10Years, String Board_10_Years_Edu, String Completion_10_years, String Percmarks_10_Years, String Division_10_Years, String Qualification_12_years, String Board_12_years_Edu, String Completion_12_years, String Percmarks_12_Years, String Division_12_years, String Qualification_16_years, String Board_16_years_Edu, String Completion_16_years, String Percmarks_16_Years, String Division_16_years, String Qualification_18_years, String Board_18_years_Edu, String Completion_18_years, String Percmarks_18_Years, String Division_18_years, String Qualification_21_years, String Board_21_years_Edu, String Completion_21_years, String Percmarks_21_Years, String Division_21_years, String exp_1_Organization, String Designation_1, String Duration_From_1_1, String Duration_From_1_2, String Address_1, String Contact_1, String Supervisor_1, String Jobreason_1, String StartingSalary_1, String EndingSalary_1, String exp_2_Organization, String Designation_2, String Duration_From_2_1, String Duration_From_2_2, String Address_2, String Contact_2, String Supervisor_2, String Jobreason_2, String StartingSalary_2, String EndingSalary_2, String exp_3_Organization, String Designation_3, String Duration_From_3_1, String Duration_From_3_2, String Address_3, String Contact_3, String Supervisor_3, String Jobreason_3, String StartingSalary_3, String EndingSalary_3, String Permanent_Address, String Current_Address, String Permanent_City, String Current_City, String Permanent_Country, String Phone_Number, String Mobile_Number, String Email_Address, String Fax, String Ref_Name_1, String Ref_Designation_1, String Ref_Org_1, String Ref_Email_1, String Ref_Add_1, String Ref_Mobile_1, String Ref_Name_2, String Ref_Designation_2, String Ref_Org_2, String Ref_Email_2, String Ref_Add_2, String Ref_Mobile_2, String Ref_Name_3, String Ref_Designation_3, String Ref_Org_3, String Ref_Email_3, String Ref_Add_3, String Ref_Mobile_3) in c:\Users\Haris Riaz\AppData\Local\Temp\Temporary ASP.NET Files\job portal10\a1906c7c\e3e5272e\App_Code.6jqq8vva.1.cs:6129 UpdateProfile.Button1_Click(Object sender, EventArgs e) in c:\Users\Haris Riaz\Desktop\apna kaam\Job Portal10\UpdateProfile_References.aspx.cs:58 System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118 System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112 System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563`

这是我与按钮一起使用的 c#

```
public partial class UpdateProfile : System.Web.UI.Page
{

    DatabaseConnect DB = new DatabaseConnect();
    DataSet1TableAdapters.Emp_UpdateTableAdapter td = new   DataSet1TableAdapters.Emp_UpdateTableAdapter();

static public String ref_name_1;
static public String ref_designation_1;
static public String ref_org_1;
static public String ref_email_1;
static public String ref_add_1;
static public String ref_mobile_1;
static public String ref_name_2;
static public String ref_designation_2;
static public String ref_org_2;
static public String ref_email_2;
static public String ref_add_2;
static public String ref_mobile_2;
static public String ref_name_3;
static public String ref_designation_3;
static public String ref_org_3;
static public String ref_email_3;
static public String ref_add_3;
static public String ref_mobile_3;

protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{
    ref_name_1 = TextBox10.Text;
    ref_designation_1 = TextBox11.Text;
    ref_org_1 = TextBox12.Text;
    ref_email_1 = TextBox13.Text;
    ref_add_1 = TextBox14.Text;
    ref_mobile_1 = TextBox28.Text;
    ref_name_2 = TextBox16.Text;
    ref_designation_2 = TextBox17.Text;
    ref_org_2 = TextBox18.Text;
    ref_email_2 = TextBox19.Text;
    ref_add_2 = TextBox20.Text;
    ref_mobile_2 = TextBox29.Text;
    ref_name_3 = TextBox22.Text;
    ref_designation_3 = TextBox23.Text;
    ref_org_3 = TextBox24.Text;
    ref_email_3 = TextBox25.Text;
    ref_add_3 = TextBox26.Text;
    ref_mobile_3 = TextBox30.Text;

    td.Insert(Session["Titl"].ToString(),
     Session["First_Name"].ToString(), 
     Session["Last_Name"].ToString(),
     Session["F_First_Name"].ToString(),
     Session["F_Last_Name"].ToString(),
     Session["Gender"].ToString(),
     Session["Nationality"].ToString(),
     Session["Maritial_Status"].ToString(),
     Session["DOB"].ToString(),
     Session["CNIC"].ToString(),
     Session["Domicile"].ToString(),
     Session["Dependents"].ToString(),
     Session["Qualification_10Years"].ToString(),
     Session["Board_10_Years_Edu"].ToString(), 
     Session["Completion_10_years"].ToString(),
     Session["Percmarks_10_Years"].ToString(),
     Session["Division_10_Years"].ToString(), 
     Session["Qualification_12Years"].ToString(),
     Session["Board_12_Years_Edu"].ToString(), 
     Session["Completion_12_years"].ToString(),
     Session["Percmarks_12_Years"].ToString(), 
     Session["Division_12_Years"].ToString(), 
     Session["Qualification_16Years"].ToString(), 
     Session["Board_16_Years_Edu"].ToString(),
     Session["Completion_16_years"].ToString(),
     Session["Percmarks_16_Years"].ToString(),null, 
     Session["Qualification_18Years"].ToString(), 
     Session["Board_18_Years_Edu"].ToString(),
     Session["Completion_18_years"].ToString(),
     Session["Percmarks_18_Years"].ToString(),null, 
     Session["Qualification_21Years"].ToString(),
     Session["Board_21_Years_Edu"].ToString(),
     Session["Completion_21_years"].ToString(), 
     Session["Percmarks_21_Years"].ToString(),null, 
     Session["exp_1_Organization"].ToString(),
     Session["Designation_1"].ToString(),
     Session["Duration_from_1_1"].ToString(),
     Session["Duration_from_1_2"].ToString(),
     Session["address_1"].ToString(),
     Session["contact_1"].ToString(),
     Session["supervisor_1"].ToString(),
     Session["job_reason_1"].ToString(),
     Session["starting_salary_1"].ToString(),
     Session["ending_salary_1"].ToString(),
     Session[" exp_2_Organization"].ToString(),
    Session[" Designation_2"].ToString(),
    Session[" Duration_from_2_1"].ToString(),
    Session[" Duration_from_2_2"].ToString(),
    Session[" address_2"].ToString(),
    Session[" contact_2"].ToString(),
    Session[" supervisor_2"].ToString(),
    Session[" job_reason_2"].ToString(),
    Session[" starting_salary_2"].ToString(),
    Session[" ending_salary_2"].ToString(),
    Session[" exp_3_Organization"].ToString(),
    Session[" Designation_3"].ToString(),
    Session[" Duration_from_3_1"].ToString(),
    Session[" Duration_from_3_2"].ToString(),
    Session[" address_3"].ToString(),
    Session[" contact_3"].ToString(),
    Session[" supervisor_3"].ToString(),
    Session[" job_reason_3"].ToString(),
    Session[" starting_salary_3"].ToString(),
    Session[" ending_salary_3"].ToString(),
    Session["permanent_address"].ToString(),
    Session["current_address"].ToString(),
    Session["permanent_city"].ToString(),
    Session["current_city"].ToString(),
    Session["permanent_country"].ToString(),
    Session["phone_number"].ToString(),
    Session["mobile_number"].ToString(),
    Session["email_address"].ToString(),
    Session["fax"].ToString(),
    ref_name_1,
     ref_designation_1,
     ref_org_1,
     ref_email_1,
     ref_add_1,
     ref_mobile_1,
     ref_name_2,
     ref_designation_2,
     ref_org_2,
     ref_email_2,
     ref_add_2,
     ref_mobile_2,
     ref_name_3,
     ref_designation_3,
     ref_org_3,
     ref_email_3,
     ref_add_3,
     ref_mobile_3);

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T00:40:46.620

> 异常详细信息：System.Data.SqlClient.SqlException：字符串或二进制数据将被截断。

此错误表明您正在尝试插入一些比指定列类型更长/更大的数据。一个简单的例子：你已经指定了一个类型为 varchar(200) 的列，但是你试图插入一个长度为 500 的字符串。

为了防止这样的异常，我建议对输入的数据实施某种客户端（当然是服务器端）验证。

# opengl - 什么是顶点数组对象？

> ID：11821336
> 
> 赞同：132
> 
> 时间：2012-08-06T00:30:58.037
> 
> 标签：opengl, vbo, vertex-array, vao

我今天刚开始从本教程中学习 OpenGL：http: [//openglbook.com/the-book/](http://openglbook.com/the-book/)
我到了第 2 章，在那里我画了一个三角形，除了 VAO（这个首字母缩写词可以吗？），我理解了所有内容。本教程有以下代码：

```
glGenVertexArrays(1, &VaoId);
glBindVertexArray(VaoId); 
```

虽然我知道代码是必要的，但我不知道它的作用。尽管我从未使用过 VaoId（除了销毁它），但没有它，代码将无法运行。我假设这是因为它需要绑定，但我不知道为什么。这个确切的代码是否只需要成为每个 OpenGL 程序的一部分？本教程将 VAO 解释为：

> 顶点数组对象（或 VAO）是描述顶点属性如何存储在顶点缓冲区对象（或 VBO）中的对象。这意味着VAO不是存储顶点数据的实际对象，而是顶点数据的描述符。顶点属性可以由 glVertexAttribPointer 函数及其两个姊妹函数 glVertexAttribIPointer 和 glVertexAttribLPointer 来描述，我们将在下面探讨第一个函数。

我不明白 VAO 如何描述顶点属性。我没有以任何方式描述它们。它是否从 glVertexAttribPointer 获取信息？我想这一定是它。VAO 仅仅是来自 glVertexAttribPointer 的信息的目的地吗？

附带说明一下，我遵循的教程是否可以接受？有什么我应该注意的或更好的教程吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-06T01:24:45.740

“顶点数组对象”由 OpenGL ARB 愚蠢名称小组委员会提供给您。

把它想象成一个几何对象。（作为一个旧时代的 SGI Performer 程序员，我称它们为 geosets。）对象的实例变量/成员是您的顶点指针、普通指针、颜色指针、属性 N 指针，...

首次绑定 VAO 时，您可以通过调用分配这些成员

```
glEnableClientState(GL_VERTEX_ARRAY); glVertexPointer...;
glEnableClientState(GL_NORMAL_ARRAY); glNormalPointer...; 
```

等等。启用哪些属性以及您提供的指针存储在 VAO 中。

之后，当您再次绑定 VAO 时，所有这些属性和指针也将变为当前状态。因此，一次`glBindVertexArray`调用相当于之前设置所有属性所需的所有代码。它可以方便地在函数或方法之间传递几何图形，而无需创建自己的结构或对象。

（一次设置，多次使用是使用 VAO 的最简单方法，但您也可以通过绑定它并进行更多的启用/指针调用来更改属性。VAO 不是常量。）

更多信息以回应帕特里克的问题：

新创建的 VAO 的默认设置是空的 (AFAIK)。根本没有几何图形，甚至没有顶点，所以如果你尝试绘制它，你会得到一个 OpenGL 错误。这是相当理智的，如“将所有内容初始化为 False/NULL/零”。

您只需要`glEnableClientState`在设置时进行。VAO 记住每个指针的启用/禁用状态。

是的，VAO 将存储`glEnableVertexAttribArray`和`glVertexAttrib`。旧的vertex, normal, color, ...数组和属性数组一样，vertex == #0等等。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-07-29T17:14:57.153

我一直认为 VAO 是 OpenGL 使用的数据缓冲区数组。使用现代 OpenGL，您将创建一个 VAO 和顶点缓冲区对象。

[![在此处输入图像描述](../Images/1f160a6e8a92c5d80723537a487f49a0.png)](https://i.stack.imgur.com/QtIFJ.png)

```
//vaoB is a buffer
glGenVertexArrays(1, vaoB); //creates one VAO
glBindVertexArray(vao.get(0));
glGenBuffers(vbo.length, vbo, 0); //vbo is a buffer
glBindVertexArray(vao.get(1));
glGenBuffers(vbo1.length, vbo1, 0); //vbo1 is a buffer
glBindVertexArray(vao.get(2));
glGenBuffers(vbo2.length, vbo2, 0); //vbo2 is a buffer 
```

下一步是将数据绑定到缓冲区：

```
glBindBuffer(GL_ARRAY_BUFFER, vbo[0]);
glBufferData(GL_ARRAY_BUFFER,vertBuf.limit()*4, vertBuf, GL_STATIC_DRAW); //vertf buf is a floatbuffer of vertices 
```

此时 OpenGL 看到：

[![在此处输入图像描述](../Images/400cf2970087fdc015fc8345a2a0d21d.png)](https://i.stack.imgur.com/RKfyN.png)

现在我们可以使用 glVertexAttribPointer 告诉 OpenGL 缓冲区中的数据代表什么：

```
glBindBuffer(GL_ARRAY_BUFFER, 0); //bind VBO at 0
glVertexAttribPointer(0, 3, GL_FLOAT, false, 0, 0); //each vertex has 3 components of size GL_FLOAT with 0 stride (space) between them and the first component starts at 0 (start of data) 
```

[![在此处输入图像描述](../Images/8bac1df7f571dd7e4356326facded715.png)](https://i.stack.imgur.com/Q2J1l.png)

OpenGL 现在在缓冲区中有数据，并且知道数据是如何组织到顶点中的。可以将相同的过程应用于纹理坐标等，但对于纹理坐标，将有两个值。

```
glBindBuffer(GL_ARRAY_BUFFER, vbo[1]);
glBufferData(GL_ARRAY_BUFFER,coordBuf.limit()*4, coordBuf, GL_STATIC_DRAW);
glVertexAttribPointer(0, 2, GL_FLOAT, false, 0, 0); 
```

接下来，您可以绑定纹理和绘制数组，您将需要创建一个 Vert 和 Frag 着色器，编译并将其附加到程序（此处未包含）。

```
glActiveTexture(textureID); //bind our texture
glBindTexture(GL_TEXTURE_2D, textureID);
glDrawArrays(GL_TRIANGLES,0,6); //in this case 6 indices are used for two triangles forming a square 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-07T22:39:56.693

顶点数组对象类似于文字处理程序等中的**宏**。[在这里](http://ogldev.atspace.co.uk/www/tutorial32/tutorial32.html)可以找到一个很好的描述。

宏只*记住*您所做的操作，例如激活此属性、绑定该缓冲区等。当您调用 时`glBindVertexArray( yourVAOId )`，它只是**重播**那些属性指针绑定和缓冲区绑定。

因此，您的下一个绘图调用将使用 VAO 绑定的任何内容。

VAO 不存储*顶点数据*。不会。顶点数据存储在顶点*缓冲区*或客户端内存数组中。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-14T08:17:18.603

*VAO 是一个对象，表示 OpenGL 管道的顶点获取阶段，用于为顶点着色器提供输入。*

您可以像这样创建顶点数组对象

```
GLuint vao;
glCreateVertexArrays(1, &vao);
glBindVertexArray(vao); 
```

首先让我们做一个简单的例子。在着色器代码中考虑这样的输入参数

```
layout (location = 0) in vec4 offset; // input vertex attribute 
```

要填写此属性，我们可以使用

```
glVertexAttrib4fv(0, attrib); // updates the value of input attribute 0 
```

尽管顶点数组对象为您存储了这些静态属性值，但它可以做的更多。

创建顶点数组对象后，我们可以开始填充它的状态。我们将要求 OpenGL 使用存储在我们提供的缓冲区对象中的数据自动填充它。每个顶点属性都可以从绑定到多个顶点缓冲区绑定之一的缓冲区中获取数据。为此，我们使用`glVertexArrayAttribBinding(GLuint vao, GLuint attribindex, GLuint bindingindex)`. 我们还使用该`glVertexArrayVertexBuffer()`函数将缓冲区绑定到顶点缓冲区绑定之一。我们使用`glVertexArrayAttribFormat()`函数来描述数据的布局和格式，最后我们通过调用来启用属性的自动填充`glEnableVertexAttribArray()`。

启用顶点属性后，OpenGL 将根据您使用 和 提供的格式和位置信息将数据提供给顶点着色 `glVertexArrayVertexBuffer()`器`glVertexArrayAttribFormat()`。当该属性被禁用时，将向顶点着色器提供您通过调用提供的静态信息`glVertexAttrib*()`。

```
// First, bind a vertex buffer to the VAO
glVertexArrayVertexBuffer(vao, 0, buffer, 0, sizeof(vmath::vec4));

// Now, describe the data to OpenGL, tell it where it is, and turn on automatic
// vertex fetching for the specified attribute
glVertexArrayAttribFormat(vao, 0, 4, GL_FLOAT, GL_FALSE, 0);

glEnableVertexArrayAttrib(vao, 0); 
```

并在着色器中编码

```
layout (location = 0) in vec4 position; 
```

毕竟你需要打电话给`glDeleteVertexArrays(1, &vao)`.

* * *

您可以阅读[OpenGL SuperBible](http://www.openglsuperbible.com/)以更好地理解它。

# objective-c - 识别按下按钮的行

> ID：11821340
> 
> 赞同：0
> 
> 时间：2012-08-06T00:31:33.690
> 
> 标签：objective-c, uitableview

每个 'btn1' 调用相同的方法。

![例子](../Images/7fd57af3b1c36b51ba780c42b3641539.png)
PS：这是一个`UITableView`

我想知道如何从按下按钮的那一行获取。我试图在每个按钮中做一个循环，设置按钮标签与上一个不同：

```
// Handle the buttons tag
int tagCount = 100;

// mainArray is the array of the tableView
for (int i = 0; i < [self.mainArray count]; i++) {
    // I created a NSIndexPath to access the tableView cells
    NSIndexPath *nowIndex = [NSIndexPath indexPathForRow:i inSection:0];
    UITableViewCell *cell = (UITableViewCell *)[(UITableView *)self.view cellForRowAtIndexPath:nowIndex];

    // I set the button tag as the 'int';
    UIButton *shareButton = (UIButton *)[cell viewWithTag:100];
    [shareButton setTag:tagCount];

    tagCount++;
} 
```

但是标签仍然等于100；

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:39:38.733

如果按钮是`UIButton`实例，则设置标签属性（可能是行号）。在事件方法中，您可以测试标签属性以查看按下了哪个按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:44:04.253

您可以使用常规和可选突出显示的图像替换您的`UIButton`实例，并将其设置为您的表格视图单元格的. 然后实现's方法。这样，您不必处理标签或存储对按钮的引用。如果您不需要任何 UIButton 交互（如选定状态或其他手势），则此方法应该足够了。`UIImageView``accessoryView``UITableViewDelegate``tableView:accessoryButtonTappedForRowWithIndexPath:`

# java - 通过反射检查局部变量值的变化

> ID：11821345
> 
> 赞同：2
> 
> 时间：2012-08-06T00:32:29.603
> 
> 标签：java, reflection, junit

这是我第一次尝试使用反射进行单元测试，我有这个疑问。

```
Class Example {
  public static Map<Something, Something> someMethod()
  {
    int temp = -1;
    //Some implementation which might change the value of temp
    //depending on other cases
    if(temp == -1)
      //Do something and return something
    else
      //return null
  }
} 
```

现在在上面的代码片段中，我可以`temp`使用反射获取变量的初始值。我想知道，如果变量的值在执行代码时发生变化，我怎样才能得到新的值`temp`？我是反射的新手，所以如果这听起来很傻，请容忍。

**PS**实际测试的代码并不是这么简单的。`if`我有一种感觉，如果不使用反射或 powermock ，我无法对最后一个条件进行单元测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T00:40:12.540

您不能在某个带有反射的事件后触发的变量上挂钩方法之类的东西。您在单元测试中通常会执行以下操作：

1.  检查变量的初始状态
2.  做一些动作
3.  检查变量的状态是否仍然合法

如果 2\. 中的操作太多（在这种情况下我会理解您的问题），那么您必须编写更细粒度的单元测试。

此外，如果您想使用 JUnit 检查局部变量，这表明您的方法实现可能过于复杂并且应该拆分，在这种情况下您可以改进测试，使其完全可测试。

另请查看问题的答案：[在单元测试中使用反射是不好的做法吗？](https://stackoverflow.com/questions/2811141/is-it-bad-practice-to-use-reflection-in-unit-testing)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T00:39:16.953

您不能使用反射来访问局部变量的状态。实例变量是，静态变量是，局部变量不是。

此外，正如@platzhirsch 所指出的，反射不允许您将触发器附加到任何类型的变量。这种事情需要某种字节码修改。但是，单元测试不需要触发器。之前和之后的值检查应该是足够的。

我认为你真正的问题是你的类没有被设计成使单元测试变得容易。首先，您有一个静态方法，它们很难“模拟”。其次，您尝试测试的逻辑似乎嵌入*在*方法中。`temp`如果（例如）是一个实例变量，或者其中的代码`// Some implementation ...`是一个可以模拟的方法，那会容易得多。

* * *

顺便说一句，在这种情况下，您对“私人”一词的使用具有误导性。大多数 Java 程序员会将“private”解释为带有`private`修饰符的静态或实例变量。但是您的示例已`temp`声明为局部变量，`private`局部变量不允许使用 for 和修饰符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T00:44:34.200

正如其他人指出的那样，您*不能*使用反射来访问局部变量的状态，也不能使用反射来通知您“有什么变化”。

但是，您*可以*在调试器中运行您的代码（例如，在 Eclipse 调试器中）并在您希望监控的任何变量上设置“观察点”：

*   [http://www.javalobby.org/java/forums/t15216.html](http://www.javalobby.org/java/forums/t15216.html)

*   [http://www.vogella.com/articles/EclipseDebugging/article.html](http://www.vogella.com/articles/EclipseDebugging/article.html)

# matlab - 是否可以在 MATLAB 中以彩色打印值列表？

> ID：11821346
> 
> 赞同：2
> 
> 时间：2012-08-06T00:32:34.023
> 
> 标签：matlab

我特别感兴趣的是这个 - 我有一个*结果*表（打印出几个数组），并且希望例如以红色打印通过某个值或不满足某些其他条件的值，无论如何那可能。

这样的事情可能吗？

恐怕我只在奇数日子使用 MATLAB，所以对它的功能并不完全熟悉。这对你们中的一些人来说可能是基本的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:49:59.347

我不确定这是否是最好的方法，但您可以像这样在图中显示文本：

```
 figure
 axis([0 100 0 100])
 text(10, 90, 'Example of Red', 'color', 'r') 
```

![在此处输入图像描述](../Images/8a5e0d09e43e81579302bf105a808b04.png)

因此，也许您可​​以使用它和 sprintf 的组合将数组打印到图中：

```
ar = rand(1, 10);
figure
axis([0 100 0 100])
for i = 1:length(ar)
    if (ar(i) > 0.5)
        text(10, 100-i*5, sprintf('%f', ar(i)), 'color', 'r') 
    else
        text(10, 100-i*5, sprintf('%f', ar(i)), 'color', 'g') 
    end
end 
```

给你这个：

![在此处输入图像描述](../Images/648016382be6b9d8435e3989e2fc9ead.png)

这是一种非常复杂的方法，但是如果您没有其他选择，对吗？

# php - php.ini.default 在 Mac OS X Snow Leopard 上找不到新的 cloudfusion 路径

> ID：11821347
> 
> 赞同：0
> 
> 时间：2012-08-06T00:32:45.473
> 
> 标签：php, macos, amazon-ec2

我正在尝试阅读有关 Amazon EC2 的一本书，它说要在 cloudfusion sdk 的 etc 文件夹中的 php.ini 中包含一个新文件路径。所以我取消注释 php.ini.default 中的路径变量并将新路径设置为：

```
include_path = ".:/php/includes:/Users/john/cloudfusion" 
```

但是当我尝试在名为 amazon 的文件夹中运行我的 php 脚本时，它一直给我错误：

```
Warning: require_once(sdk.class.php): failed to open stream: No such file or directory in /Users/john/amazon/create_bucket.php on line 26

Fatal error: require_once(): Failed opening required 'sdk.class.php' (include_path='.:') in /Users/john/amazon/create_bucket.php on line 26 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:39:01.627

PHP 不读取`php.ini.default`，它只是在内部默认为其中的值，以确保读取您的更改，您可以将该文件复制到`php.ini`并编辑您的值。

或者，您可以使用[http://nl3.php.net/ini_set](http://nl3.php.net/ini_set)函数即时修改包含路径。您需要`ini_set`在实际使用之前使用`require_once`.

# java - Jtable、JScrollPane、JFrame 问题

> ID：11821351
> 
> 赞同：0
> 
> 时间：2012-08-06T00:33:42.573
> 
> 标签：java, swing, jtable, jframe, jscrollpane

我是 Java AWT 的新手。我想在 JScrollpane 内绘制一个树表（即具有可扩展行的表），而 JScrollpane 又在 JFrame 内。

默认情况下，我想将框架的大小设置为某个固定大小，并且里面的表格应该完全占据框架。这是因为只有当我将框架设置为一定的大小时，表格的所有单元格才会被渲染得足够大，并且不需要展开框架来查看单元格内的数据。

但我无法做到这一点。大多数情况下，表格只占据框架的一小部分，大约一半的框架保持空白。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:47:25.793

假设你`JFrame`被命名`frame`并且你的表被调用`table`，尝试使用这个：

```
frame.setSize(table.getPreferredSize());
frame.pack(); 
```

# jquery - jquery 的 :checked 返回什么值？

> ID：11821356
> 
> 赞同：-1
> 
> 时间：2012-08-06T00:34:51.167
> 
> 标签：jquery, checked

`checked`如果选中复选框，变量将具有什么值？如果未选中复选框，它的值是多少？

HTML：

```
<input type="checkbox" id="my_id" /> 
```

jQuery：

```
var checked = $('input#my_id').is(':checked'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:43:14.807

我建议您使用`console.log()`或任何您喜欢的方式来检查这些值，但我在[这里](http://jsfiddle.net/4vu8c/1/)做了一个示例。

该值将是`true`或`false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T00:42:32.750

来自. [_`is`](http://docs.jquery.com/Is)

> 根据表达式检查当前选择，如果选择的至少一个元素适合给定的表达式，则返回 true。
> 
> 如果没有元素适合，或者表达式无效，则响应将为“假”。

因此，您可以确定答案将是`true`或`false`。

# php - CKeditor 使用 PHP 关闭/销毁实例

> ID：11821359
> 
> 赞同：0
> 
> 时间：2012-08-06T00:35:24.863
> 
> 标签：php, ckeditor

我觉得我一直在网上搜索这个。

在 PHP 中使用 CKeditor 时，您仍然只能以相同的名称打开一个实例。

如果你有更多，你会得到：

```
The instance "yourname" already exists. 
```

错误。

我看到很多人通过使用 jquery 或 javascript 关闭/销毁实例来解决这个问题。

这家伙有同样的问题： [https ://stackoverflow.com/questions/8839576/ckeditor-cannot-call-method-destroy-of-undefined](https://stackoverflow.com/questions/8839576/ckeditor-cannot-call-method-destroy-of-undefined)

一种解决方案是将名称留空，然后您可以创建任意数量的实例。但这对我来说不是一个好的解决方案，因为我需要发送 $_post 的名称。

**那么有谁知道如何使用 PHP 销毁/关闭 CKeditor 中的实例？**

**编辑：** 立即修复它切换到javascript：[CKEditor实例已经存在](https://stackoverflow.com/questions/1794219/ckeditor-instance-already-exists)

# iphone - 从 iOS 配置重新开始

> ID：11821361
> 
> 赞同：0
> 
> 时间：2012-08-06T00:36:09.337
> 
> 标签：iphone, ios-provisioning, provisioning-profile

在 Mountain Lion 发布之前，我在一个单独的分区上运行 Lion。我使用 Lion 分区进行所有我的开发、构建、在设备上运行和提交到 App Store。在 ML 发布之前一切都很好。我升级了 ML 分区，并彻底废弃了 Lion 分区。现在，我无法在设备上运行。我经历了地狱般的尝试，试图获得我所有的证书、配置文件以及不按顺序排列的东西。它在 Lion 分区上就像一个魅力，但现在我必须从第一格开始。我尝试为我的设备创建新的配置文件，但不起作用，我尝试下载新证书，但现在我只是让自己感到困惑，我不知道我在做什么。我怎样才能让它再次工作！？

如果有帮助，我确实有 Lion 计算机的 Time Machine 备份。

万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:11:31.760

升级到 Mountain Lion 时无需再次创建证书。问题出在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:02:07.970

遵循这些步骤为我解决了这个问题。

祝你好运！

1.  关闭 Xcode
2.  右键单击项目的 .xcodeproj 包以显示其内容。
3.  在您选择的文本编辑器中打开 .pbxproj 文件（如果您感到偏执，请先进行备份）
4.  查找该文件中包含单词 PROVISIONING_PROFILE 的所有行并将其删除。
5.  打开 Xcode 并清理你的项目
6.  构建你的项目

（由[像素码头](http://www.pixeldock.com/blog/code-sign-error-provisioning-profile-cant-be-found/)提供）

# iphone - 带有突出显示的 UIButton 配置

> ID：11821362
> 
> 赞同：0
> 
> 时间：2012-08-06T00:36:30.777
> 
> 标签：iphone, objective-c, xcode

我创建了一个`UIbutton`（在情节提要中）将对象添加到收藏夹列表，但我在配置它时遇到了麻烦。这会将对象添加到收藏夹，但是如何取消收藏呢？

我一直在搜索和思考一段时间，我的想法是在 manageHighlightAndFave 中做一些 if 语句，例如：如果 favButton `state = highlighted`，从收藏夹中删除并删除突出显示。否则，添加到收藏夹并添加亮点。这很好吗，或者我正在尝试的首选方式是什么？我喜欢一个例子，因为我是编程新手。

```
-(IBAction)favoriteButtonPressed:(id)sender
{
    [self performSelector:@selector(manageHighlightAndFave:) withObject:sender afterDelay:0];
}

- (void)manageHighlightAndFave:(UIButton*)favButton {
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ItemSelected"
                                                        object:selectedObject];
    [favButton setHighlighted:YES];
} 
```

PS。与情节提要中的“触地”相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:54:51.697

我建议您制作一个自定义按钮。以下参考代码。

首先，制作一个以下按钮。File-New-File-Cocoa Touch-Objective-C 类 ![在此处输入图像描述](../Images/dd65274b356cd60c4aa174a8fc0a2319.png) ![在此处输入图像描述](../Images/fe50cdf95bbf51064e556ff0b86d7b18.png) **FavoriteButton.h**

```
#import <UIKit/UIKit.h>

@interface FavoriteButton : UIButton

@property (nonatomic, assign) BOOL isFavorite;
@end 
```

* * *

**收藏按钮.m**

```
#import "FavoriteButton.h"

@implements FavoriteButton : UIButton

@synthesize isFavorite;
...
@end 
```

* * *

其次，在 Storyboard 中链接一个 FavoriteButton。参考下图。位于故事板的右侧面板中。之前，点击你原来的 UIButton

![在此处输入图像描述](../Images/8cf0d36f9aae0b00c65cd677b317fb43.png)

你的ViewController.h

```
#import <UIKit/UIKit.h>
#import "FavoriteButton.h"

@interface YourViewController : UIViewController
@property (retain, nonatomic) IBOutlet FavoriteButton *favoriteButton;
@end 
```

* * *

```
@implements YourViewController : UIViewController
@synthesize favoriteButton;

-(void) viewDidLoad
{
   self.favoriteButton = [[FavoriteButton alloc] initWithFrame:...]];
   //favoriteButton.isFavorite = NO; (already set in storyboard)
   ...
}

-(IBAction)favoriteButtonPressed:(id)sender
{
    [self performSelector:@selector(manageHighlightAndFave:) withObject:sender afterDelay:0];
}

- (void)manageHighlightAndFave:(FavoriteButton *)favButton {
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ItemSelected"
                                                        object:selectedObject];

    //true-false(YES-NO) Toggled. but isFavorite property is Must be initialized to false.
    favButton.isFavorite = !favButton.isFavorite;

    if(favButton.isFavorite)
    {
        favButton.imageView.image = [UIImage imageNamed:@"your_star_image"];
        [favButton setHighlighted:YES];
    }
    else
    {
        favButton.imageView.image = nil;
        [favButton setHighlighted:NO];
    }
} 
```

# .net - 是否有现有的库/技术来减少 .NET 表达式树？

> ID：11821363
> 
> 赞同：3
> 
> 时间：2012-08-06T00:37:13.780
> 
> 标签：.net, optimization, lambda, expression-trees

我正在翻译表达式树，我想知道是否有现有的库或技术适用于减少/优化树中的操作。

例如，我希望能够折叠一系列顺序否定操作，如下所示：

```
arg => !!!!!!!(getValue(arg))
reduces to arg => !getValue(arg) 
```

...或者将一个否定后跟一个相等运算变成一个不等于运算：

```
arg => !(getValue(arg) == 3)
reduces to arg => getValue(arg) != 3 
```

...或将德摩根定律应用于一般的逻辑表达式：

```
arg => !(getValue(arg) < 3 || getValue(arg) >= 5))
reduces to arg => getValue(arg) >= 3 && getValue(arg) < 5 
```

*[为简洁起见，我使用了上述简化格式的 lambda 表达式。]*

我知道这些工具不能适用于表达式树的所有可能评估，但似乎它们对严格使用逻辑运算的表达式树类有用。

是否有关于构建执行这些任务的表达式树评估器的现有参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:36:21.473

看起来没有可重用的 .NET Framework 组件来解决问题中提出的要求。然而，[Andrey Shchekin 的](https://stackoverflow.com/users/39068/andrey-shchekin) [工具参考](https://github.com/ashmind/expressive/blob/master/Expressive/Decompilation/Steps/Clarity/NotImprovementVisitor.cs)为如何编写所需的组件提供了很好的参考。

这是一个解决顺序 Not() 运算符的取消、将 Not() 运算符分配到二进制表达式以及 De Morgan 定律的应用的片段。

```
public class NotCollapser : ExpressionVisitor
{
    // Incomplete list; others removed for brevity.
    private static readonly IDictionary<ExpressionType, Func<BinaryExpression, BinaryExpression>> NotDistributionMap = 
    {
        { ExpressionType.Equal, e => Expression.MakeBinary(ExpressionType.NotEqual, e.Left, e.Right) },
        { ExpressionType.NotEqual, e => Expression.MakeBinary(ExpressionType.Equal, e.Left, e.Right) },
        { ExpressionType.GreaterThan, e => Expression.MakeBinary(ExpressionType.LessThanOrEqual, e.Left, e.Right) },
        { ExpressionType.AndAlso, e => Expression.MakeBinary(ExpressionType.OrElse, Expression.Not(e.Left), Expression.Not(e.Right)) },
        { ExpressionType.OrElse, e => Expression.MakeBinary(ExpressionType.AndAlso, Expression.Not(e.Left), Expression.Not(e.Right)) }
    };

    protected override Expression VisitUnary(UnaryExpression expression)
    {
        if (expression.NodeType == ExpressionType.Not)
        {
            if (expression.Operand.NodeType == ExpressionType.Not)
            {
                return Visit((expression.Operand as UnaryExpression).Operand);
            }

            if (NotDistributionMap.ContainsKey(expression.Operand.NodeType))
            {
                var distribute = NotDistributionMap[expression.Operand.NodeType];
                return Visit(distribute(expression.Operand as BinaryExpression));
            }
        }

        return base.VisitUnary(expression);
    }
} 
```

# google-bigquery - 您可以通过 bigquery API 在单个请求中将数据导入多个表吗？

> ID：11821368
> 
> 赞同：0
> 
> 时间：2012-08-06T00:38:10.037
> 
> 标签：google-bigquery

我已阅读有关构建多部分请求的文档。是否可以通过在同一请求正文中指定多个多部分边界来发送多个负载规范及其有效负载？如果是这样，它是否计入每个表或每个请求的导入配额？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:43:14.620

不...每个导入请求只能导入一个表（当然，您可以通过创建多个请求并行执行多个导入）。

# git - 27m”在zsh中，为什么会出现？

> ID：11821377
> 
> 赞同：0
> 
> 时间：2012-08-06T00:41:08.193
> 
> 标签：git, shell, zsh

手动运行命令：

```
git log --pretty=format:"%C(yellow)%h %Cred%ad %Cblue%an%Cgreen%d %Creset%s" --date=short 
```

**使用 Bash**

```
6bb9849 2012-08-05 My Name (HEAD, master) blah2
42b3a11 2012-08-05 My Name blah1 
```

**使用 ZSH**

```
27m" 6bb9849 2012-08-05 My Name (HEAD, master) blah2
42b3a11 2012-08-05 My Name blah1 
```

请问**27m"**是从哪里来的 ZSH？

很少有测试证实只有最高提交显示**27m"**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:25:58.110

`%`是 zsh 中的一个特殊字符。您可能需要使用`%%`您当前拥有的`%`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:03:51.260

处理同一件事的另一种方法是先`%s`于`""``%""s`

# linux - “bash：这个shell中没有作业控制”是什么意思？

> ID：11821378
> 
> 赞同：69
> 
> 时间：2012-08-06T00:41:23.393
> 
> 标签：linux, bash

我认为它与创建新子进程的父进程有关，并且没有 tty。谁能解释引擎盖下的细节？即bash、进程创建等相关的工作模型？

这可能是一个非常广泛的主题，因此也非常感谢指向帖子的指针。我用谷歌搜索了一段时间，所有结果都是关于非常具体的案例，没有一个是关于幕后故事的。为了提供更多上下文，下面是导致“bash：此 shell 中没有作业控制”的 shell 脚本。

```
#! /bin/bash

while [ 1 ]; do
    st=$(netstat -an |grep 7070 |grep LISTEN -o | uniq)
    if [ -z $st ]; then
        echo "need to start proxy @$(date)"
        bash -i -c "ssh -D 7070 -N user@my-ssh.example.com > /dev/null"
    else
        echo "proxy OK @$(date)"
    fi
    sleep 3
done 
```

这一行：

`bash -i -c "ssh -D 7070 -N user@my-ssh.example.com > /dev/null"`

是“bash:no job control in this shell”的来源。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2017-10-19T11:55:08.823

您可能需要启用作业控制：

```
#! /bin/bash   
set -m 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-06T07:54:15.290

**作业控制**是 shell 和 tty 驱动程序中的一组功能，允许用户从单个交互式 shell 管理多个作业。

作业是单个命令或管道。如果你跑步`ls`，那是一份工作。如果你跑步`ls|more`，那仍然只是一份工作。如果您运行的命令启动了它自己的子进程，那么它们也将属于同一个作业，除非它们被有意分离。

`&`如果没有作业控制，您可以通过添加到命令行将作业置于后台。这就是您拥有的所有控制权。

通过作业控制，您还可以：

1.  暂停正在运行的前台作业`Ctrl``Z`
2.  在前台恢复暂停的作业`fg`
3.  在后台恢复暂停作业`bg`
4.  将正在运行的后台作业带入前台`fg`

shell 维护着一个作业列表，您可以通过运行该`jobs`命令查看这些作业。每个都分配有一个作业编号（与组成作业的进程的 PID 不同）。您可以使用前缀为 的作业编号`%`作为参数，`fg`或`bg`将作业选择到前台或后台。shell 的内置`kill`命令也可以使用 %jobnumber 表示法。这很方便，因为作业编号从 1 开始分配，因此它们比 PID 短。

`%+`最近前台作业和先前前台作业也有快捷方式`%-`，因此您可以在两个作业之间快速来回切换`Ctrl``Z`（`fg %-`暂停当前作业，恢复另一作业），而无需记住数字。或者您可以使用命令本身的开头。如果您暂停了一个`ffmpeg`命令，恢复它就像`fg %ff`（假设没有其他活动作业以“ff”开头）一样简单。作为最后一个快捷方式，您不必键入`fg`. 只需`%-`作为命令输入即可将前一个作业置于前台。

“但我们为什么需要这个？” 我能听到你在问。“如果我想运行另一个命令，我可以启动另一个 shell。” 诚然，多任务处理方式有很多种。在正常的一天，我在 tty1 到 tty10 上运行登录 shell（是的，超过 6 个，您只需要激活它们），其中一个将运行一个包含 4 个屏幕的屏幕会话，另一个可能有一个 ssh 正在运行在它上面有另一个在远程机器上运行的屏幕会话，加上我的带有 3 或 4 个 xterms 的 X 会话。我仍然使用工作控制。

如果我在`vi`or `less`or `aptitude`or 任何其他交互的事情中，我需要运行几个其他的快速命令来决定如何继续`Ctrl``Z`，运行命令，并且`fg`是自然而快速的。（在很多情况下，交互式程序都有一个`!`键绑定来为您运行外部命令；我认为这不太好，因为您没有从 shell 的历史记录、命令行编辑器和完成系统中受益。）我每当我看到有人启动辅助 xterm/screen/whatever 来运行一个命令时，我都会感到难过，看两秒钟，然后退出。

现在关于你的这个脚本。总的来说，它似乎没有写得很好。有问题的行：

```
bash -i -c "ssh -D 7070 -N user@my-ssh.example.com > /dev/null" 
```

令人困惑。我不明白为什么 ssh 命令被传递到一个单独的 shell 而不是直接从主脚本执行，更不用说为什么有人添加`-i`它了。该`-i`选项告诉 shell 以交互方式运行，从而激活作业控制（除其他外）。但它实际上并没有被交互式使用。无论单独的 shell 和 . 背后的目的是什么`-i`，关于作业控制的警告都是副作用。我猜想绕过 ssh 的一些不良功能是一种黑客行为。这就是当你这样做时，你应该评论它的那种事情。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-08-06T00:56:29.910

可能的选项之一是无法访问 tty。

引擎盖下：

1.  bash 检查会话是否是交互式的，如果不是 - 没有作业控制。
2.  如果设置了forced_interactive，则跳过检查stderr是否附加到tty并再次检查bash是否可以打开`/dev/tty`以进行读写访问。
3.  然后检查是否使用了新的生产线规则，如果没有，则作业控制也被禁用。
4.  如果（且仅当）我们只是将我们的进程组设置为我们的 pid，从而成为进程组负责人，并且终端与我们的（新）进程组不在同一个进程组中，那么将终端的进程组设置为我们的 (新）进程组。如果失败，请将我们的进程组设置回原来的状态（这样我们仍然可以从终端读取）并关闭作业控制。
5.  如果以上所有方法都失败了，您会看到该消息。

我部分引用了 bash 源代码中的注释。

* * *

根据问题作者的附加要求：

[http://tiswww.case.edu/php/chet/bash/bashtop.html](http://tiswww.case.edu/php/chet/bash/bashtop.html)在这里你可以找到 bash 本身。

如果您可以阅读 C 代码，获取源 tarball，您会在其中找到`job.c`- 它将向您解释更多“幕后”的东西。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-10T13:08:39.640

我在自己的嵌入式系统上遇到了一个问题，我通过使用“setsid”运行 getty 进程摆脱了“无作业控制”错误，根据其手册页，该进程使用新的会话 ID 启动一个进程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-01T16:50:57.567

遇到这个问题只是因为我将先前执行的命令连同`%`前缀一起错误地复制到 zsh 中，比如`% echo this`而不是`echo this`. 对于这样一个愚蠢的错字，这个错误非常不清楚

# java - 无法获取我的坐标 graphics2D mouseclick java

> ID：11821381
> 
> 赞同：1
> 
> 时间：2012-08-06T00:42:00.230
> 
> 标签：java, swing, graphics2d, affinetransform

我有一个扩展`JLabel`类，我使用下面的代码绘制我的地图：这`new AffineTransform()`是留下我的图像的身份（0,0，w，h）

```
 mygraphics2D = (Graphics2D) getGraphics();
 graphics2D.scale(2.0,2.0) ;
 graphics2D.rotate(....
 graphics2D.drawImage(myImageIcon.getImage(),new AffineTransform(), this); 
```

现在，当我单击我的`JLabel`使用此事件时：

```
public void mouseClicked(MouseEvent e) {
x =e.getX() ;
y = e.getY();
NewX = ????
NewY = ????
} 
```

我想检索我尝试过的新坐标“缩放、旋转...坐标”

```
Point2D ptSrc = new Point2D.Double(x, y);
Point2D ptDst = new Point2D.Double(0, 0);
mygraphics2D.getTransform().transform(ptSrc, ptDst); 
```

但是 ptDst 与（缩放，旋转，..）坐标不同，请帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T02:14:01.327

听起来您需要正向和逆变换来在两个坐标系之间进行转换。在这个[例子](https://sites.google.com/site/drjohnbmatthews/scaledview)中，比例方程是明确的；在这种[替代方法](https://stackoverflow.com/questions/2244285)中，使用了第二个`AffineTransform`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:21:40.087

我发现了这些：

*   [http://www.javalobby.org/java/forums/t19387.html](http://www.javalobby.org/java/forums/t19387.html)
*   [http://www.java.net/node/685054](http://www.java.net/node/685054)

不知道他们会不会帮忙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T12:23:05.857

它不是那么难;-)

1.  当您重新绘制组件时，`AffineTransform`在转换后保存`g2.getTransform()`

2.  然后调用`invert()`它上面的函数

3.  如果`mouseClicked()`我们使用以下代码：

    ```
    Point2D p= trans.transform(new Point2D.Double(evt.getX(), evt.getY()), null);
    System.out.println("click x="+p.getX()+" y="+p.getY()); 
    ```

就是这样！

# javascript - Javascript 不能在 IE 和 Chrome 上运行？（它可以在 Firefox 上运行）

> ID：11821384
> 
> 赞同：0
> 
> 时间：2012-08-06T00:42:28.343
> 
> 标签：javascript, javascript-events

```
function ord(string) {
    var str = string + '',
        code = str.charCodeAt(0);
    if (0xD800 <= code && code <= 0xDBFF) { // High surrogate (could change last hex to 0xDB7F to treat high private surrogates as single characters)
        var hi = code;
        if (str.length === 1) {
            return code; // This is just a high surrogate with no following low surrogate, so we return its value;
            // we could also throw an error as it is not a complete character, but someone may want to know }
            var low = str.charCodeAt(1);
            return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;
        }
        if (0xDC00 <= code && code <= 0xDFFF) { // Low surrogate return code; // This is just a low surrogate with no preceding high surrogate, so we return its value;
            // we could also throw an error as it is not a complete character, but someone may want to know
        }
        return code;
    }
}

$(document).ready(function () {
    var maxTxtNumber = 8;
    var arrTxtNumber = new Array();
    var txtvalues = new Array();
    var arr = {};

    $('.numericonly').keypress(function (e) {
        var t = $(this).val();
        var k = e.which;
        delete arr[8];
        if ((e.which >= 49 && e.which <= 55) || e.which == 8) {
            if (e.which == 8) {
                var s = new String(t);
                s = s.charCodeAt(0);
                delete arr[s];
            }
            if (arr[k]) {
                e.preventDefault();
            } else {
                arr[k] = e.which;
            }
        } else {
            e.preventDefault();
        }
    });
}); 
```

该代码适用于firefox，但不适用于IE和chrome？

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:26:11.497

不需要所有这些代码。如果您想测试输入的值是否仅为数字，则可以执行以下操作：

```
<input type="text" onblur="check(this);" ...>

function check(el) {
  if (!isDigits(el.value)) {
    alert('Hey!!\nThe element you just left should only contain digits');
  }
}

function isDigits(s) {
  return /^\d*$/.test(s);
} 
```

在提供有关无效值的警告之前，向用户提示您需要的格式并等到他们离开控件或提交表单时，会更加友好。您真的不在乎用户如何获得有效值，只要它在提交表单时有效即可。

而且您必须再次在服务器上进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:46:42.787

我建议通过验证器（例如[http://www.jslint.com/](http://www.jslint.com/) ）运行您的代码，以确保一切都符合通用标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T00:47:10.557

其他浏览器`e.keyCode`用来告诉您按下了哪个键。跨浏览器：

```
var k = e.keyCode || e.which; 
```

还要确保每次都使用`k`而不是重复。`e.which`

# c - C：链表词频——排序

> ID：11821385
> 
> 赞同：0
> 
> 时间：2012-08-06T00:42:30.027
> 
> 标签：c, sorting, linked-list, structure

我的任务是创建一个词频分析程序，该程序从文本文件中读取内容，并生成以下示例输出：

```
SUMMARY:

27340 words
2572 unique words

WORD FREQUENCIES (TOP 10):

the 1644
and  872
to  729
a  632
it  595
she  553
i 545
of  514
said 462
you 411 
```

我试图创建一个程序来实现这样的输出。我对 C 编程很陌生，所以虽然它在一定程度上有效，但可能存在很多效率问题/缺陷。这是我到目前为止写的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#define MAX_WORD 32
#define MAX_TEXT_LENGTH 10000

// ===========================================
//                 STRUCTURE
//============================================

typedef struct word {
char *str;              /* Stores the word */
int freq;               /* Stores the frequency */
struct word *pNext;     /* Pointer to the next word counter in the list */
} Word;

// ===========================================
//             FUNCTION PROTOTYPES
//============================================

int getNextWord(FILE *fp, char *buf, int bufsize);   /* Given function to get words */
void addWord(char *pWord);                          /* Adds a word to the list or updates exisiting word */
void show(Word *pWordcounter);        /* Outputs a word and its count of occurrences */
Word* createWordCounter(char *word);  /* Creates a new WordCounter structure */

// ===========================================
//             GLOBAL VARIABLES
//============================================

Word *pStart = NULL;                  /* Pointer to first word counter in the list */

int totalcount = 0;                  /* Total amount of words */
int uniquecount = 0;                /* Amount of unique words */

// ===========================================
//                 MAIN
//============================================      

int main () {

    /* File pointer */
    FILE * fp;
    /* Read text from here */
    fp = fopen("./test.txt","r");

    /* buf to hold the words */
    char buf[MAX_WORD];

    /* Size */
    int size = MAX_TEXT_LENGTH;

    /* Pointer to Word counter */
    Word *pCounter = NULL;

    /* Read all words from text file */

    while (getNextWord(fp, buf, size)) {

        /* Add the word to the list */
        addWord(buf); 

        /* Increment the total words counter */
        totalcount++;
    }

    /* Loop through list and figure out the number of unique words */
    pCounter = pStart;
    while(pCounter != NULL)
    {
        uniquecount++;
        pCounter = pCounter->pNext;
    }

    /* Print Summary */

    printf("\nSUMMARY:\n\n");
    printf("   %d words\n", totalcount); /* Print total words */
    printf("   %d unique words\n", uniquecount); /* Print unique words */

    /* List the words and their counts */
    pCounter = pStart;
    while(pCounter != NULL)
    {
        show(pCounter);
        pCounter = pCounter->pNext;
    }
    printf("\n");

    /* Free the allocated  memory*/
    pCounter = pStart;
    while(pCounter != NULL)
    {
        free(pCounter->str);        
        pStart = pCounter;           
        pCounter = pCounter->pNext;  
        free(pStart);                  
    }

    /* Close file */
    fclose(fp);

    return 0;

}

// ===========================================
//                 FUNCTIONS
//============================================

void show(Word *pWordcounter)
{
  /* output the word and it's count */
  printf("\n%-30s   %5d", pWordcounter->str,pWordcounter->freq);

}

void addWord(char *word)
{
  Word *pCounter = NULL;
  Word *pLast = NULL;

  if(pStart == NULL)
  {
    pStart = createWordCounter(word);
    return;
  }

  /* If the word is in the list, increment its count */
  pCounter = pStart;
  while(pCounter != NULL)
  {
    if(strcmp(word, pCounter->str) == 0)
    {
      ++pCounter->freq;

      return;
    }
    pLast = pCounter;            
    pCounter = pCounter->pNext;  
  }

  /* Word is not in the list, add it */
  pLast->pNext = createWordCounter(word);
}

Word* createWordCounter(char *word)
{
  Word *pCounter = NULL;
  pCounter = (Word*)malloc(sizeof(Word));
  pCounter->str = (char*)malloc(strlen(word)+1);
  strcpy(pCounter->str, word);
  pCounter->freq = 1;
  pCounter->pNext = NULL;
  return pCounter;
}

int getNextWord(FILE *fp, char *buf, int bufsize) {
    char *p = buf;
    char c;

    //skip all non-word characters
    do {
        c = fgetc(fp);
        if (c == EOF) 
            return 0;
        } while (!isalpha(c));

    //read word chars

    do {
        if (p - buf < bufsize - 1)
        *p++ = tolower(c);
        c = fgetc(fp);
        } while (isalpha(c));

        //finalize word
        *p = '\0';
        return 1;
        } 
```

它正确显示摘要。字数和独特字数完全正确。然后它会列出在文件中找到的每个唯一单词并显示正确的出现次数。

我现在需要做的（以及我遇到很多麻烦的事情）是按出现次数以降序对我的链表进行排序。最重要的是，它应该只显示前 10 个单词而不是全部（一旦我对链表进行了排序，这应该是可行的）。

我知道代码本身现在效率很低，但我现在主要关心的是获得正确的输出。

如果有人可以通过排序算法帮助我，或者至少为我指出正确的方向，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:47:35.910

对于初学者来说，这个想法可能有点野心勃勃，但了解标准库中的函数总是一个好主意。如果您知道您的链表有多大，您可以使用`malloc`它为包含相同数据的数组分配空间。然后，您可以使用`qsort`为您对数据进行排序。

函数`malloc`，并且`qsort`是标准 C 库中经常使用的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T00:47:58.077

不要对链表进行排序，这非常低效且容易出错。将相关数据复制到数组中并使用[`qsort`](http://www.gnu.org/software/libc/manual/html_node/Array-Sort-Function.html)方法。

当你让你的算法更高效时，我建议使用[`trie`](http://en.wikipedia.org/wiki/Trie).

# xul - Xulrunner 无法启动 MyApp

> ID：11821388
> 
> 赞同：1
> 
> 时间：2012-08-06T00:42:54.867
> 
> 标签：xul, xulrunner

我对可行配置 (Win32) 的最新尝试是在 kodewerx.org 上找到的：[http](http://www.kodewerx.org/wiki/A_Brief_Introduction_To_XULRunner:_Part_2) ://www.kodewerx.org/wiki/A_Brief_Introduction_To_XULRunner:_Part_2 [2010 年]。

我的配置如下：

```
c:\program files\xulrunner\xulrunner.exe  ..et all..
c:\program files\myapp\application.ini 
```

我已将 c:\program files\xulrunner 添加到系统 PATH 中。从命令提示符 xulrunner.exe 执行并抛出其默认帮助页面。所以 xulrunner.exe 运行。

我已经使用 Mozilla 的 Dev Org 应用程序进行快速启动添加开发：[http ://www.mozdev.org/projects/wizard/](http://www.mozdev.org/projects/wizard/)

我使用了一个应用程序配置器，它为我提供了大量文件，采用典型的 moz/chrome 布局。

```
c:\Program Files\MyApp\application.ini
c:\Program Files\MyApp\defaults\preferences\prefs.js
c:\Program Files\MyApp\chrome.manifest
c:\Program Files\MyApp\chrome\content\[*.xul|*.js]
c:\Program Files\MyApp\chrome\locale\en-US\*.dtd
c:\Program Files\MyApp\chrome\skin\*.css 
```

我不确定当前日期指定的最小/最大 Gecko 版本：我目前在 application.ini 中有这个：

```
[App]
Name=MyApp
ID=myapp@stainsby.ca
Version=0.1
BuildID=0001
Vendor=Stainsby

[Gecko]
MinVersion=1.9.2.0
MaxVersion=28.0.* 
```

有任何想法吗？

# android - parse.com 是解析 JSON 吗？（安卓）

> ID：11821391
> 
> 赞同：2
> 
> 时间：2012-08-06T00:43:18.997
> 
> 标签：android, parse-platform

我选择使用[Parse](http://www.parse.com)作为我的应用程序的后端。不幸的是，没有太多教程，只有一个适用于 Android。

Parse 框架是否使用 JSON？如果是这样，我可以从阅读这些教程中学习。

我正在尝试从表单（包括单选按钮）中获取数据并将其输入到数据库中。我在 Parse Android 用户注册指南中找到的教程是：

```
ParseUser user = new ParseUser();
user.setUsername("my name");
user.setPassword("my pass");
user.setEmail("email@example.com");

// other fields can be set just like with
ParseObject user.put("phone", "650-253-0000"); 
```

我想将单选按钮输入添加为字段中的文本，例如代码片段中的最后一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:50:33.137

parse.com 的网页上有很多教程。例如：[文档](https://www.parse.com/docs/android_guide)应该可以帮助您入门。

这是一个第 3 方框架，因此您必须参考他们的官方文档才能以正确的方式使用他们的平台。

似乎 parse.com 使用了自定义`ParseObject`：[https ://www.parse.com/docs/android_guide#objects-classes](https://www.parse.com/docs/android_guide#objects-classes)

# objective-c - 在objective-C中的小数点上使用characterAtIndex

> ID：11821394
> 
> 赞同：0
> 
> 时间：2012-08-06T00:44:13.463
> 
> 标签：objective-c

我正在尝试做一些事情，`characterAtIndex`但我很难过。 `if ([myString characterAtIndex:0]==0)`工作正常，如果我正在寻找数字零 - 但如果我正在寻找小数点，`if ([myString characterAtIndex:0]==.)`只会给我一个错误。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:51:12.323

也许有些东西在翻译中丢失了，但看看你当前的问题，我认为这就是解决方案的样子（按我的预期编译和执行）：

```
if([myString characterAtIndex:0] == '.') {
  // ...
} 
```

请注意，您必须使用单引号（撇号），因为这些是 c 样式的字符项（技术上为整数）而不是 c 样式的字符串（将使用双引号，技术上是数组/指针）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T00:51:42.677

再检查一遍。`[myString characterAtIndex:0] == 0`会*编译*，但它不会做你所期望的。该条件测试字符串的第一个字符是否是 ASCII 值为 0 的字符，而*不是*数字 0：它是 NUL 字符。

`-characterAtIndex:`返回一个可以与字符文字进行比较的值，字符文字是用单引号括起来的字符：`'0'`或`'.'`，例如。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T00:50:29.703

characterAtIndex 返回一个 unichar 字符，所以使用 '.' 反而。

IE： `if ([myString characterAtIndex:0]=='.')`

# javascript - javascript初学者-如何在字符串变量中获取字符串值之后/之前出现的文本

> ID：11821397
> 
> 赞同：0
> 
> 时间：2012-08-06T00:45:19.777
> 
> 标签：javascript

```
var mainvalue="This is first sentence. This is 2nd sentence. This is 3rd sentence.";
var matchwith="This is first"; 
```

现在我想获取变量“mainvalue”中的文本，该文本出现在存储在变量matchwith中的值之后。这里假设“matchwith”中的值存在于mainvalue中。

我有另一个问题......如果'matchwith'中的值在mainvalue中存储不止一次怎么办？

ie var mainvalue="这是第一句。这是第二句。重复这是第一句。又是一句";

现在，我想获取“这是第一句话”最后一次出现之前出现的“主值”中的文本。

另外，我想获取“这是第一句话”第一次出现之后出现的“主值”中的文本

我该怎么做呢？

最后，我如何确定值“这是第一句话”是否出现在 mainvalue 变量的开头？同样，我如何确定这个值是否出现在 mainvalue 变量的末尾？

我更喜欢纯 JS，但即使使用像 Jquery 这样的库我也可以...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T00:49:08.217

首先获取子串在大海捞针中的位置：

```
var pos = mainvalue.indexOf(matchwith); 
```

然后你可以得到它之前的东西：

```
var before = mainvalue.substr(0,pos); 
```

或之后：

```
var after = mainvalue.substr(pos+matchwith.length); 
```

简单的。现在，重复。

在您概述的情况下，您可以在第一个匹配之后获取字符串，然后获取该字符串在第二个匹配之前的部分（因为那个将成为第一个）。不过，更灵活的是：

```
var pieces = mainvalue.split(matchwith); 
```

现在你可以得到你喜欢的作品的索引。

要查看字符串是否以您的搜索模式开头或结尾，您可以分别查看“匹配之前/之后的字符串”是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:54:43.927

有很多方法可以做到这一点，如果没有时间考虑使用正则表达式替换，例如：

```
var mainvalue="This is first sentence. This is 2nd sentence. This is 3rd sentence.";
var matchwith="This is first";
var out=mainvalue.replace(new RegExp(matchwith),'') 
```

# django - Django Paypal 订阅

> ID：11821398
> 
> 赞同：0
> 
> 时间：2012-08-06T00:45:45.380
> 
> 标签：django, paypal, django-paypal

感谢任何可以帮助我回答这个问题的人。我正在运行一项 Django 电子学习服务，该服务需要持续 90 天的一次性付款订阅。我已经使用[django-paypal](https://github.com/johnboxall/django-paypal)来整合我的付款。我在网站支付标准中使用 IPN（即时支付通知）作为我的主要支付方式。

问题 - 在收到 IPN 信号`payment_was_successful`时，我表示以下许可：

```
def purchase_success(sender, **kwargs):
    ipn_obj = sender
    student = User.objects.get(username=str(ipn_obj.custom))
    permission = Permission.objects.get(name="Subscribed")
    student.user_permissions.add(permission)
payment_was_successful.connect(purchase_success) 
```

我试图弄清楚如何在 90 天内自动“过期”订阅。IE：

```
permission - Permission.objects.get(name="Subscribed")
student.user_permissions.remove(permission) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:04:58.177

没有经过测试，但据我所知，它可能会起作用。

Paypal 可以为您处理订阅： [https ://github.com/johnboxall/django-paypal/blob/master/README.md#using-paypal-payments-standard-with-subscriptions](https://github.com/johnboxall/django-paypal/blob/master/README.md#using-paypal-payments-standard-with-subscriptions)

```
"p3": 90,                          # duration of each unit (depends on unit)
"t3": "D",                         # duration unit ("D for Day") 
```

您的信号可能不会是 payment_was_successful，而是其中之一：

```
subscription_cancel - Sent when a subscription is cancelled.
subscription_eot - Sent when a subscription expires.
subscription_modify - Sent when a subscription is modified.
subscription_signup - Sent when a subscription is created. 
```

祝你好运，我发现 django-paypal 很混乱！

# php - 撇号在 Facebook 应用程序上变得疯狂

> ID：11821400
> 
> 赞同：0
> 
> 时间：2012-08-06T00:46:01.743
> 
> 标签：php, facebook

我有带撇号的文字，我使用 facebook 在我的墙上分享文字。但是，当我这样做时，文本会奇怪地发布在 facebook 上——撇号变成`&#039;`. 我能做些什么来防止这种情况发生？

我正在使用 PHP 和 Facebook 图形 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T00:50:19.013

将撇号转换为

```
&#039; 
```

然后发送到脸书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T08:17:37.977

我用：

```
html_entity_decode($text, ENT_QUOTES, "UTF-8") 
```

与FB完美配合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T18:30:37.953

我刚刚检查了 Drupal 7，它将在标题中将 Unicode 字符“撇号”替换为其 NCR 等效项 ( `&#39;`)。这*不是*错误，而是一种安全措施。

显然，当 FaceBook 收到此信息时，它会将其更改为`&amp;#39`，您会观察到结果。恕我直言，这是 Facebook 如何处理传入 NCR 的错误，与 Drupal 无关。（对于 Drupal 来说，在标题中使用简单的撇号并不是一个好主意。）您可能想向 Facebook 报告这个错误，但这可能不是他们的首要任务。

您还可以向站点用于与 FaceBook 交互的模块的作者添加功能请求，要求它在发送到 FaceBook 之前将 NCR 撇号重写为单字节 ASCII。他们可能更同情。

# xslt - XSLT 嵌套条件 - 如何执行此操作

> ID：11821408
> 
> 赞同：0
> 
> 时间：2012-08-06T00:47:42.233
> 
> 标签：xslt, nested, conditional

我对 xslt 很陌生

我有以下 xslt 代码段（为了清楚起见，使用伪代码）：

```
<xsl:for-each select="fields/field">
  <xsl:if test="field=someThing">
    <div>
      <!--some content output-->
      <!--here by doing-->
      <!--some complex stuff-->
    </div>
  </xsl:if>
</xsl:for-each> 
```

但是根据循环中的字段值，我可以选择在关闭 div 之前做一些其他的事情。

所以（带着闪亮的新 xsl 书）我想我可以做这样的事情：

```
<xsl:for-each select="fields/field">
  <xsl:if test="field=someThing">
    <div>
      <!--some content output-->
      <!--here by doing-->
      <!--some complex stuff-->
    <xsl:choose>
      <xsl:when test="field=someThingSpecific">
        <div>
        <!--process some additional-->
        <!--stuff here-->
        </div>
        <!--then close div-->
        </div>
      </xsl:when>
      <xsl:otherwise>
        <!--nothing to do here-->
        <!--just close the div-->
        </div>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:if>
</xsl:for-each> 
```

但它会爆炸。

显然是因为关闭 div 已移入条件 xsl:choose 块

所以真的有两个问题：

为什么它不能按原样工作？

我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:21:19.883

因为您的 XSLT 格式不正确，所以它爆炸了。当你打开第一个`div`外面的时候`xsl:choose`，你必须把它关在外面`xsl:choose`。

另外，如果你不需要在你的 中做任何事情`xsl:otherwise`，只需做另一个`xsl:if`：

```
<xsl:for-each select="fields/field">
    <xsl:if test="field=someThing">
        <div>
            <!--some content output-->
            <!--here by doing-->
            <!--some complex stuff-->
            <xsl:if test="field=someThingSpecific">
                <div>
                    <!--process some additional-->
                    <!--stuff here-->
                </div>
            </xsl:if>
            <!--then close div-->
        </div>
    </xsl:if>
</xsl:for-each> 
```

# c# - 如何使用 C# 检索 XML 中嵌套元素的元素值

> ID：11821410
> 
> 赞同：1
> 
> 时间：2012-08-06T00:48:02.790
> 
> 标签：c#, xml

```
<config>
<timeDifferenceFields>
    <TimeDifference>
        <StartTimeField>txt_SoReinigungUhrzeitvonZ1</StartTimeField>
        <EndTimeField>txt_SoReinigungUhrzeitbisZ1</EndTimeField>
        <OutputTimeField>txt_SoReinigungZ1</OutputTimeField>
    </TimeDifference>
    <TimeDifference>
        <StartTimeField>txt_SoReinigungUhrzeitvonZ2</StartTimeField>
        <EndTimeField>txt_SoReinigungUhrzeitbisZ2</EndTimeField>
        <OutputTimeField>txt_SoReinigungZ2</OutputTimeField>
    </TimeDifference>
    <TimeDifference>
        <StartTimeField>txt_SoReinigungUhrzeitvonZ3</StartTimeField>
        <EndTimeField>txt_SoReinigungUhrzeitbisZ3</EndTimeField>
        <OutputTimeField>txt_SoReinigungZ3</OutputTimeField>
    </TimeDifference>
</timeDifferenceFields>
</config> 
```

你好，

谁能帮我完成这个简单的任务，我不明白...

我想遍历上述 XML 文件中的 TimeDifference-Fields。对于每个 TimeDifference 节点，我想使用给定的 XML 值调用一个方法。

有了这个它会遇到一个NPE ...有人可以帮忙吗

```
 XmlDocument configDoc = new XmlDocument();
        configDoc.Load(configXml);

        XmlNode timeFields = configDoc.SelectSingleNode("/config/timeDifferenceFields/TimeDifference");
        foreach (XmlNode timeNode in timeFields)
        {
        String OutputTimeField = timeNode.SelectSingleNode("OutputTimeField").InnerXml;
        String StartTimeField = timeNode.SelectSingleNode("StartTimeField").InnerXml;
        String EndTimeField = timeNode.SelectSingleNode("EndTimeField").InnerXml;
        addTimeDiffElement(inputDoc, OutputTimeField, StartTimeField, EndTimeField);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:27:07.857

`SelectSingleNode`返回（顾名思义）不超过一个节点。请改用 XmlNodeList `timeFields = configDoc.SelectNodes("/config/timeDifferenceFields/TimeDifference")`。

# java - 覆盖 Java 计时器

> ID：11821411
> 
> 赞同：1
> 
> 时间：2012-08-06T00:48:06.017
> 
> 标签：java, datetime, timer, clock

在这个关于如何**[覆盖 Java System.currentTimeMillis](https://stackoverflow.com/questions/2001671/override-java-system-currenttimemillis)**的好问题（Jon Skeet 建议使用可替换时钟的地方）之后，我正在考虑它如何与 Timer 类一起工作。

```
// Clock() is replacing Date()
Date workTime = new Clock().plusSeconds(30).toDate();
Timer timer = new Timer();
timer.schedule(new ExampleClass(), workTime); 
```

如果时钟的时间是过去的，`Timer()`将使用系统时钟并立即触发该方法，即使理想情况下，它会等到`Clock()`返回当前时间加上 30 秒。

**处理这个问题的最佳方法是什么？**

我一直在寻找一个比继续覆盖这一切更实际的答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:54:18.843

我会与第一个问题中的方法相同。子类 Timer() 并让所有代码都使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:44:05.823

[“优先组合而不是继承”](http://en.wikipedia.org/wiki/Composition_over_inheritance)以避免覆盖所有内容。

`Clock`包裹起来`System.currentTimeMillis`时，将您的包裹`Timer`在 a 中`Scheduler`，并将手也包裹在 a`Clock`中。
对您的（即是否已经过去）`Scheduler`进行相关检查，并在发现条件满足时触发其内部。`Clock``Timer`

然后，让您的代码使用.`Scheduler`而不是`Timer`.

对于测试，您显然可以用更具体的行为替换该实现，或者使用模拟。

作为额外的好处，您可以获得针对您的问题定制的 API，而不是 Java 提供的通用解决方案。

# wordpress - WordPress插件通知

> ID：11821419
> 
> 赞同：1
> 
> 时间：2012-08-06T00:49:21.680
> 
> 标签：wordpress

我正在为我的客户开发一个插件，它会在核心、插件或主题更新可用时向我提供建议，并将其通过电子邮件发送给我。我想将激活此插件时的默认更新通知文本更改为“插件更新可用，但是更新由 xyz 公司管理”。

// 禁用核心更新

```
 # 2.3 to 2.7:
    add_action( 'init', create_function( '$a', "remove_action( 'init', 'wp_version_check' );" ), 2 );
    add_filter( 'pre_option_update_core', create_function( '$a', "return null;" ) );

    # 2.8 to 3.0:
    remove_action( 'wp_version_check', 'wp_version_check' );
    remove_action( 'admin_init', '_maybe_update_core' );
    add_filter( 'pre_transient_update_core', create_function( '$a', "return null;" ) );

    # 3.0:
    add_filter( 'pre_site_transient_update_core', create_function( '$a', "return null;" ) );    

// Disable plugin updates

    # 2.3 to 2.7:
    add_action( 'admin_menu', create_function( '$a', "remove_action( 'load-plugins.php', 'wp_update_plugins' );") );
        # Why use the admin_menu hook? It's the only one available between the above hook being added and being applied
    add_action( 'admin_init', create_function( '$a', "remove_action( 'admin_init', 'wp_update_plugins' );"), 2 );
    add_action( 'init', create_function( '$a', "remove_action( 'init', 'wp_update_plugins' );"), 2 );
    add_filter( 'pre_option_update_plugins', create_function( '$a', "return null;" ) );

    # 2.8 to 3.0:
    remove_action( 'load-plugins.php', 'wp_update_plugins' );
    remove_action( 'load-update.php', 'wp_update_plugins' );
    remove_action( 'admin_init', '_maybe_update_plugins' );
    remove_action( 'wp_update_plugins', 'wp_update_plugins' );
    add_filter( 'pre_transient_update_plugins', create_function( '$a', "return null;" ) );

    # 3.0:
    remove_action( 'load-update-core.php', 'wp_update_plugins' );
    add_filter( 'pre_site_transient_update_plugins', create_function( '$a', "return null;" ) ); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T11:20:38.793

这并不是问题的真正答案，但不幸的是，上面的代码遍布整个网络，而且非常不正确。虽然将 null 返回到 pre_site_ 过滤器*确实会*抑制通知消息，但它也会强制 wordpress 连续检查更新，因为它无法判断最后一次更新检查是什么时候进行的。

下面的代码（5.3+）实现了一个更好的版本，它可以在不对每个 WP 管理员请求进行 WP 运行更新检查的情况下抑制消息。

```
$func = function ($a) {
    global $wp_version;
    return (object) array(
        'last_checked' => time(),
        'version_checked' => $wp_version,
    );
};
add_filter('pre_site_transient_update_core', $func);
add_filter('pre_site_transient_update_plugins', $func);
add_filter('pre_site_transient_update_themes', $func); 
```

# emacs - 为什么不让*默认让？

> ID：11821423
> 
> 赞同：4
> 
> 时间：2012-08-06T00:50:43.923
> 
> 标签：emacs, lisp, elisp

可能所有有经验的 elispers 都曾在某个时候发现，像这样的代码被破坏了：

```
(let ((a 3)
      (b 4)
      (c (+ a b)))
  c) 
```

`let*`当在绑定子句中引用刚刚绑定的变量时，应该使用这种形式。

我只是想知道 - 为什么一个看似错误的行为是默认行为？`let*`不管一个人将如何使用它，总是选择它是否有任何风险？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-06T01:28:51.320

任何**形式**`let*`都可以使用. 例如，如果我们没有特殊的形式，我们可以表达**`let``let*`**

 **```
(let* ((a 3)
       (b 4)
       (c (+ a b)))
  c) 
```

作为：

```
(let ((a 3))
  (let ((b 4))
    (let ((c (+ a b)))
      c))) 
```

另一方面`let`，如果可能的话，有些形式很难用 来表达`let*`。如果不引入额外的临时变量或深奥的按位操作，`let`则无法使用以下形式表示。`let*`

```
(let ((x y) (y x)) ; swap x and y
  ...) 
```

所以，从这个意义上说，我认为`let`比`let*`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T08:57:55.310

我被告知原因主要是历史原因，但它可能仍然成立：由于`let`并行分配，变量之间没有数据依赖关系可能会给编译器带来灵活性，编译速度或空间并编译成比`let*`. 我不知道 elisp 编译器使用了多少。

一些谷歌搜索揭示了 Common Lisp 的类似问题：[LET 与 LET* in Common Lisp](https://stackoverflow.com/questions/554949/let-versus-let-in-common-lisp)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-06T01:14:07.977

这样做是不正确的

```
(let ((a 10)
      (b a)) <- error
  b) 
```

这样做是正确的：

```
(let* ((a 10)
       (b a))
   b) <- will evaluate to 10. 
```

第一种情况的错误是由于 let 的语义。

`let*`将新符号添加到现有环境中，并在其中评估它们。

`let`创建一个新环境，评估当前环境中的新符号，并且新环境将在所有新符号的评估结束时负责评估 (let () code ) 的代码。

`let*`是语法糖

```
(let ((a xxx))
  (let ((b a)) ...) 
```

while`let`是语法[糖](http://en.wikipedia.org/wiki/Syntactic_sugar)

```
((lambda (a)
  ...)
  val_a) 
```

**第二种形式更常见**，所以也许他们想给它一个更短的名字......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T01:31:05.330

我不确定我会打电话给`let`坏了。例如，您可能出于某种原因想要在封闭环境中进行阴影处理，同时`a`针对封闭表达式进行定义。`b``c`

```
(let ((a 11)
      (b 12))
  (let ((a 3)
        (b 4)
        (c (+ a b)))
    ;; do stuff here will shadowed `a' and `b'
    c))
> 23 
```

至于风险，我不知道本身是否有风险。但是为什么在你不需要的时候创建多个嵌套环境呢？这样做可能会降低性能（我没有足够的 elisp 经验可以说）。**

# ms-access - 访问 VBA - 此代码如何将一个策略的所有信息组合在一起？

> ID：11821426
> 
> 赞同：0
> 
> 时间：2012-08-06T00:51:28.683
> 
> 标签：ms-access, ms-access-2007, vba

所以，我从别人那里继承了一些代码（如下），我试图了解它是如何工作的。我了解代码的 msot（尽管我对 Access VBA 很陌生），但我不明白的部分是该代码如何将一个策略的所有信息组合在一起。

情况如下。要从我们公司的数据库中获取特定保单的保费数据，我们必须为每条线路获取一份保险。但是，我希望所有保费，每个保险一个，都在同一条线上。因此，这段代码将多行的所有内容放在了一行中。为简单起见，我将其减少到 3 个总覆盖范围，尽管还有更多。当我阅读代码时，似乎假设一个策略的所有信息都在一起，例如特定策略的 1、2 或 3 行是有序的。但是，例如，即使我按保费（金额）列对表格进行排序，它仍然会在一行中获得一份保单的所有保费。我在代码中看不到任何应该使它工作的地方。该代码将第一行的保单编号与下一行的保单编号进行比较。如果它们相同，则将保费组合在一起。如果它们不同，请不要。同样，我可以对表进行排序，以便一个策略的记录不在一起，但最终结果仍然正确。我错过了什么吗？是 Access 中的某事吗？谢谢你的帮助！

```
Option Compare Database
Option Explicit

' Premium is imported with one row for each coverage per policy, so possibly several rows per policy.
' This procedure takes several rows per policy and makes them into one row.
Sub ScrubPremium()

Dim i As Long, j As Long, k As Long
Dim NumRecords As Long, found As Long, UniqueCount As Long
Dim tempPolicyNum As String, tempCoverage As String, tempPremium As Single
Dim PolicyNumArray() As String, PremiumArray() As Single, TotalPremiumArray() As Single

Dim db As DAO.Database
Set db = CurrentDb

Dim infile As Variant, outfile As Variant

Set infile = db.OpenRecordset("Imported Premium")
CurrentDb.Execute "DELETE * FROM [Finalized Premium]"
Set outfile = db.OpenRecordset("Finalized Premium")

NumRecords = infile.RecordCount
ReDim PolicyNumArray(NumRecords)
ReDim PremiumArray(NumRecords, 3)
ReDim TotalPremiumArray(NumRecords)

infile.MoveFirst

'initialize PremiumArray
For i = 1 To NumRecords
    For j = 1 To NumPremiums
        PremiumArray(i, j) = 0
    Next j
Next i

'populate arrays
UniqueCount = 0
For i = 1 To NumRecords
    tempPolicyNum = infile![Policy_Number]
    tempCoverage = infile![Coverage]
    tempPremium = infile![Premium]

    k = 0
    found = 0

    Do Until k = UniqueCount Or found = 1 'check for unique policy
        If tempPolicyNum = PolicyNumArray(k + 1) Then
            found = 1
        Else
            k = k + 1
        End If
    Loop

    If found = 0 Then
        UniqueCount = UniqueCount + 1
        PolicyNumArray(k + 1) = tempPolicyNum
    End If

    Select Case tempCoverage
    Case "Comprehensive"
        j = 1
    Case "Collision"
        j = 2
    Case Else
        j = 3
    End Select
    PremiumArray(k + 1, j) = PremiumArray(k + 1, j) + tempPremium
    TotalPremiumArray(k + 1) = TotalPremiumArray(k + 1) + tempPremium
    infile.MoveNext
Next i

'Populate table
For i = 1 To UniqueCount
    outfile.AddNew
        outfile![Full Policy Number] = PolicyNumArray(i)

        outfile![Comp Premium] = PremiumArray(i, 1)
        outfile![Coll Premium] = PremiumArray(i, 2)
        outfile![Other Premium] = PremiumArray(i, 3)
        outfile![Total Premium] = TotalPremiumArray(i)
    outfile.Update
Next i

infile.Close
outfile.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:52:45.243

> 该代码将第一行的保单编号与下一行的保单编号进行比较。如果它们相同，则将保费组合在一起。如果它们不同，请不要。

几乎。

这里有两个循环。遍历输入文件的每一行。在输入文件的每一行，第二个循环遍历（可能是全部）PolicyNumArray，寻找与从输入文件中获取的数字相匹配的策略编号。

如果我是你，我会用调试器逐步完成。确保它正在做你期望它做的事情。我想仔细看看这部分（剪掉了一些线条）。

```
UniqueCount = 0
For i = 1 To NumRecords
    k = 0
    Do Until k = UniqueCount 
```

# iphone - 使区域可分页

> ID：11821430
> 
> 赞同：0
> 
> 时间：2012-08-06T00:52:21.583
> 
> 标签：iphone, objective-c, uiscrollview, paging, uipagecontrol

如何使我的应用程序屏幕截图的绿色区域能够随着分页动画和页面指示器滚动？我希望我添加更多图标按钮，同时保持标题大小相同。

![截屏](../Images/95f97bc4601ff32818aa665867bb6edf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:06:17.220

首先，您需要一个滚动视图，并且您的视图必须位于滚动视图内。然后你需要在滚动视图上启用分页

```
[scrollView setPagingEnabled:YES]; 
```

> 如果此属性的值为 YES，则当用户滚动时，滚动视图会在滚动视图边界的倍数处停止。默认值为 NO。

如果你想拥有你需要使用的页面指示器`UIPageControl`，据我所知，你必须自己管理。滚动后，您可以随时根据滚动视图`UIScrollViewDelegate`的属性检查您所在的页面（参见 参考资料） 。`contentOffset`

# mysqli - 致命错误：在第 62 行的 mysqlicon.php 中的非对象上调用成员函数 prepare() 帮助解释 OOP mysqli 类和准备好的语句

> ID：11821431
> 
> 赞同：-4
> 
> 时间：2012-08-06T00:52:33.647
> 
> 标签：mysqli, prepared-statement, php

我很犹豫要不要发布这个，因为我真的更愿意自己解决这个问题，但我想我不会。我只是想为 mysqli 的东西设置一个类，使其尽可能动态，是的，我是 OOP 的新手，但一直在使用 PHP 和 Mysql 作为爱好，而且最近一段时间以来更甚. 我想是时候切换了，但是在 oop 类上并没有太多的 mysqli 和准备好的语句，可能有多个结果（是的，我已经检查了文档，猜我只是没有得到它或其他东西）。几个小时后，这就是我所拥有的。我不一定要寻找“快速修复”。我真的很想了解并学习，所以请彻底解释。

我正在使用 dbconfig.php 文件将我的数据库信息存储在 root/config/dbconfig.php

在根/类/mysqlicon.php

```
<?php
/*
* class MYSQLIDB
* @param Host
* @param User 
* @param Password
* @param Name
*/
class MYSQLIDB
{
private $host;       //MySQL Host
private $user;       //MySQL User
private $pass;       //MySQL Password
private $name;       //MySQL Name   
private $mysqli;     //MySQLi Object
private $last_query; //Last Query Run

/*
 * Class Constructor
 * Creates a new MySQLi Object
*/
public function __construct()
{   
    include('./config/dbconfig.php');
    $this->host = $db_host;
    $this->user = $db_user;
    $this->pass = $db_pass;
    $this->name = $db_name;

    $this->mysqli = new mysqli($this->host, $this->user, $this->pass, $this->name);
    if ($mysqli->connect_errno) {
        return "Failed to connect to MySQLi: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
    }

}

private function __destruct()
{   
    $mysqli->close();
}

public function select($fields, $from, $where, $whereVal, $type, $orderByVal, $ASDESC, $limitVal)
{
    if (is_int($whereVal))
    {
        $bindVal = 'i';
    } else {
        $bindVal = 's';
    }
    switch($type)
    {
        case "regular":
            $queryPre = "SELECT " . $fields;
            $querySuff = " WHERE " . $where . " =  ?";
            break;
        case "orderByLimit":
            $queryPre = "SELECT " . $fields;
            $querySuff = " ORDER BY " . $orderByVal . " " . $ASDESC . " LIMIT " . $limitVal;
            break;
    }
    //$query = "SELECT * FROM news ORDER BY id DESC LIMIT 4";
    if ($stmt = $mysqli->prepare('$queryPre . " FROM " . $from . " " . $querySuff')) 
    {
        if ($type == 'regular') {
            $stmt->bind_param($bindVal, $whereVal);
        }
        $stmt->execute(); 
        $stmt->bind_result($values); 
        $stmt->store_result(); 
        $sr = new Statement_Result($stmt);      
        $stmt->fetch(); 
        // call by this style printf("ID: %d\n", $sr->Get('id') ); 
        //$stmt->fetch(); 
        //$stmt->close(); 
        //return $value;
        printf("ID: %d\n", $sr->Get_Array() );
    } else return null; 
}
//use to call $db = new MYSQLI('localhost', 'root', '', 'blog');
/*
 * Function Select
 * @param fields
 * @param from
 * @param where
 * @returns Query Result Set

function select($fields, $from, $where, $orderBy, $ASDESC, $limit, varNamesSent)
{   
    if ($orderBy == null &&)
    $query = "SELECT " . $fields . " FROM `" . $from . "` WHERE " . $where;
    $result = $this->mysqli->query($query) or exit("Error code ({$sql->errno}): {$sql->error}");

    $this->last_query = $query;

    return $result;
}

/*
 * Function Insert
 * @param into
 * @param values
 * @returns boolean
*/
public function insert($into, $values)
{
    $query = "INSERT INTO " . $into . " VALUES(" . $values . ")";

    $this->last_query = $query;

    if($this->mysqli->query($query))
    {
        return true;
    } else {
        return false;
    }

}

/*
 * Function Delete
 * @param from
 * @param where
 * @returns boolean
*/
public function delete($from, $where)
{
    $query = "DELETE FROM " . $from . " WHERE " . $where;

    $this->last_query = $query;

    if($this->mysqli->query($query))
    {
        return true;
    } else {
        return false;
    }
}
}
//Hand arrays for multiple returned items from database
class Statement_Result 
{ 
private $_bindVarsArray = array(); 
private $_results = array(); 

public function __construct(&$stmt) 
{ 
    $meta = $stmt->result_metadata(); 

    while ($columnName = $meta->fetch_field()) 
        $this->_bindVarsArray[] = &$this->_results[$columnName->name]; 

    call_user_func_array(array($stmt, 'bind_result'), $this->_bindVarsArray);

    $meta->close(); 
} 

public function Get_Array() 
{ 
    return $this->_results;    
} 

public function Get($column_name) 
{ 
    return $this->_results[$column_name]; 
} 
} 
?> 
```

作为测试，我试图通过以下方式提取数据库中的所有新闻：

```
<?php
require_once('classes/mysqlicon.php');
$testing = new MYSQLIDB;
$testing->select('*','news',null,null,'orderByLimit','id','DESC',4);
?> 
```

但我真正想要的是可以做到这一点的东西：

```
<?php
    /*
    require('config/dbconfig.php');
    $query = "SELECT * FROM news ORDER BY id DESC LIMIT 4";
    if ($stmt = $mysqli->prepare($query)) {
        // execute statement
        $stmt->execute();

        // bind result variables
        $stmt->bind_result($idn, $titlen, $categoryn, $descn, $postdaten, $authorn);

        // fetch values
        while ($stmt->fetch()) {*/

            //echo 'id: '. $id .' title: '. $title;
            echo "<table border='0'>";
            $shortDescLengthn = strlen($descn);
            if ($shortDescLengthn > 106) {
                $sDCutn = 106 - $shortDescLengthn;
                $shortDescn = substr($descn, 0, $sDCutn);
            } else {
                $shortDescn = $descn;
            }
            echo "<h1>$titlen</h1>"; 
            echo "<tr><td>$shortDescn...</td></tr>"; 
            echo '<tr><td><a href="javascript:void(0);" onclick="' 
            . 'readMore(' . $idn . ',' . htmlspecialchars(json_encode($titlen)) . ',' 
            . htmlspecialchars(json_encode($categoryn)) . ',' 
            . htmlspecialchars(json_encode($descn)) . ',' . htmlspecialchars(json_encode($postdaten)) . ',' 
            . htmlspecialchars(json_encode($authorn)) . ')">Read More</a></td></tr>'; 
            echo "<tr><td>Written by: $authorn</td></tr>"; 
            echo '<tr><td><img src="images/hardcore-games-newsbar-border.png" width="468px" /></td></tr>'; 
        }
        echo "</table><br />";

        /* close statement */
        $stmt->close();
    }

    /* close connection */
    $mysqli->close();
?> 
```

再次，拜托，请详细解释。我有时是个笨蛋。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T00:59:28.960

我假设错误来自这一行：

```
if ($stmt = $mysqli->prepare('$queryPre . " FROM " . $from . " " . $querySuff')) 
```

`$mysqli`未在此函数的上下文中定义。您应该`$this->mysqli`改为访问。这同样适用于您所做的其他参考，例如：

```
if ($mysqli->connect_errno) 
```

# ruby-on-rails-3 - 在每个页面上从模型加载对象？

> ID：11821440
> 
> 赞同：2
> 
> 时间：2012-08-06T00:55:42.693
> 
> 标签：ruby-on-rails-3

我希望在我的 rails 应用程序的每个页面上从我的数据库中的单个表中加载单个（随机选择）对象。

例如，一个引号表中有几个引号，我只希望在每个页面加载时都有一个。

实现这一目标的最佳方法是什么？显然，将查询复制并粘贴到每个控制器中并不是解决此问题的正确方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:02:10.263

我不会`before_filter`为此使用，不需要访问数据库以重定向操作和其他“未呈现”操作。相反，我会使用`helper_function`，并且我会在布局中调用它，因为无论如何您都需要定位它。

```
def random_quote
  @quote ||= "Select random quote here"
end

helper_method :random_quote 
```

您选择报价的方法取决于您。您只需要`random_quote`在布局中作为普通的辅助方法进行访问。仅当呈现布局时，每个操作只能访问一个引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:29:28.513

这种东西通常进入`before_filter`ApplicationController ：

```
before_filter :get_random_quote

#This code is executed before every action of your app
def get_random_quote
  random_id = ...#Generate a random ID ...
  @random_quote = Quote.find(random_id)
end 
```

那么在你看来，只是参考`@random_quote`。完毕！

编辑：再想一想，Matzi 解决方案似乎更聪明。只有当您实际输出某些内容时，才会调用该请求。什么都没有浪费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T09:43:16.173

假设 PostgreSQL：

```
before_filter :get_quote

def get_quote
  @quote = Quote.order('RANDOM()').limit(1)
end 
```

# java - 开发网络游戏

> ID：11821444
> 
> 赞同：2
> 
> 时间：2012-08-06T00:58:04.927
> 
> 标签：java, networking, client

我是一名中级经验的程序员，我想创建一个网络游戏。我无法决定我应该为这款游戏选择哪种网络“模型”。

“模型”是指信息应该从服务器传输到客户端的方法以及处理实际发生的位置。目前，这是我正在考虑的模型：

*   想象一下有四个人——用户、约翰、鲍勃和服务器。服务器是控制游戏的人。
*   用户正坐在他的电脑前玩游戏。他点击鼠标。
*   John 是用户计算机上检测鼠标点击的程序。他不知道这意味着什么，但他知道他应该把它发送给 Bob。
*   Bob 在服务器端。他和约翰一样，对点击一无所知，但他知道如何与约翰沟通。他拿起鼠标点击并把它交给服务器，告诉他它来自用户。
*   服务器是大脑。他解释鼠标点击并更改游戏中的某些内容。每（比如）30 毫秒，服务器渲染游戏。他知道用户的相机指向哪里，因此他生成了应该出现在用户屏幕上的图像。
*   服务器不知道如何将它发送给用户，所以他把它给了鲍勃。Bob 将图像发送给 John。
*   John 在屏幕上显示图像。

现在，这是一个 2 人游戏，所以我预计服务器不会在处理所有用户请求时遇到问题。我想听听您对这个模型的反馈。好吗？如果没有，有哪些替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:16:01.130

您绝对应该阅读整个 PDF，了解帝国时代的工作原理。它是完全相关的，将极大地帮助你理清思路：

[http://web.cs.wpi.edu/~claypool/courses/4513-B03/slides/BT01.pdf](http://web.cs.wpi.edu/~claypool/courses/4513-B03/slides/BT01.pdf)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-06T03:08:40.350

在没有全貌的情况下，我想我会构建两个 Web 服务，连接到某个数据库（很可能）。

第一个将接受一些与某些用户执行的操作相关的参数（单击坐标、时间、用户 ID 等），将这些参数保存到数据库，并以一些状态详细信息（成功、失败等）进行响应。

另一个 API 将接受时间作为参数，并返回（以 JSON 或 XML 格式）自那时以来发生的所有活动（如在聊天程序中......这是自上次更新以来的消息）......或者，根据游戏构造，累积状态...例如，如果游戏由两个团队组成，将一块瓷砖从红色翻转到蓝色，则此 API 将返回该瓷砖的当前状态。然后，在客户端代码中，我会处理响应以向该用户反映当前的游戏状态。

这是一些示例代码。这不会按原样自动更新，您可以设置超时以定期轮询新数据，或设置某种长轮询（[wiki](http://en.wikipedia.org/wiki/Comet_%28programming%29 "维基")）。哦，因为这是教育性的，所以没有输入验证（除了长度）：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Game</title>
<style>
html, body {margin:0;padding:0;height:100%;width:100%;}
#board {width:298px;height:298px;border:thin solid #000;position:relative;}
#puck {width:58px; height:58px; display:block; background-image:url('al.png'); background-size:contain; position:absolute; top:120px; left:120px;}
</style>
</head>

<body onload="update();">
<div id="board">
<div id="puck"></div>
</div>
<button onclick="update();">Update</button>
</body>
<script>
var x,y;
document.getElementById('board').addEventListener('click',move);

function move(e){
    a1=((window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));
    x=(e.clientX-29);
    y=(e.clientY-29);
    a1.abort();
    a1.onreadystatechange=function()
    {
        if (a1.readyState==4&&a1.status==200){
                document.getElementById('puck').style.left = x+'px';
                document.getElementById('puck').style.top= y+'px';
        }
    }
    params='x='+x+'&y='+y;
    a1.open("POST","al_accept.php",true);
    a1.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    a1.setRequestHeader("Content-length", params.length);
    a1.setRequestHeader("Connection", "close");
    a1.send(params);
}

function update(){
    a2=((window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));
    a2.onreadystatechange=function()
    {
        if (a2.readyState==4&&a2.status==200){
                res=JSON.parse(a2.responseText)
                x=res.x;
                y=res.y;
                document.getElementById('puck').style.left = x+'px';
                document.getElementById('puck').style.top= y+'px';
        }
    }
    params='x='+x+'&y='+y;
    a2.open("POST","al_respond.php",true);
    a2.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    a2.setRequestHeader("Content-length", params.length);
    a2.setRequestHeader("Connection", "close");
    a2.send(params);

}
</script>
</html> 
```

您会看到该`move`函数将数据发送到`al_accept.php`其中存储它（这里只是写入文件，因为每次移动都会覆盖之前的任何内容）并且该`update`函数调用`al_respond.php`以检索最新数据。

al_accept.php：

```
<?php
$x=(strlen($_REQUEST['x'])>3)?substr($_REQUEST['x'],0,3):$_REQUEST['x'];
$y=(strlen($_REQUEST['y'])>3)?substr($_REQUEST['y'],0,3):$_REQUEST['y'];
$pos=fopen('al.txt','w');
$str='{"x":'.$x.',"y":'.$y.'}';
fwrite($pos,$str);
fclose($pos);
?> 
```

al_respond.php：

```
<?php
header('content-type:application/json');
echo file_get_contents('al.txt');
?> 
```

如果你在两台机器上打开它，你可以在一台机器上移动球，当你在另一台机器上更新时，你会看到最新的位置（反之亦然）。

# .htaccess - 不要重定向丢失的文件夹

> ID：11821447
> 
> 赞同：0
> 
> 时间：2012-08-06T00:58:10.193
> 
> 标签：.htaccess, redirect, directory

我有一个网站，它基本上是一本书（它连接到数据库）。用户可以阅读以下章节：[http](http://examplebook.com/20) ://examplebook.com/20 。我遇到的问题是我不想为书中的所有章节创建文件夹，而是从 url 中提取章节编号，然后连接到数据库并显示书籍页面。如果我没有每章的文件夹，它只会重定向并显示未找到。我看到一些具有此功能的网站，所以我假设它是可能的。任何帮助将不胜感激。

亲切的问候，

耐嚼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:39:51.537

你的意思是这样的？

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ /index.php [L] 
```

那是在文档根目录中的 htaccess 文件中。

# c++ - Visual Studio 评论生成工具

> ID：11821450
> 
> 赞同：4
> 
> 时间：2012-08-06T00:59:22.520
> 
> 标签：c++, visual-studio, comments

我想知道什么工具可以在 Visual Studio 中生成这样的评论？特别是创建图表的能力，如下所示。

```
//
//  +---------------+
//  |               |
//  | start_connect |<---+
//  |               |    |
//  +---------------+    |
//           |           |
//  async_-  |    +----------------+
// connect() |    |                |
//           +--->| handle_connect |
//                |                |
//                +----------------+
//                          :
// Once a connection is     :
// made, the connect        :
// actor forks in two -     :
//                          :
// an actor for reading     :       and an actor for
// inbound messages:        :       sending heartbeats:
//                          :
//  +------------+          :          +-------------+
//  |            |<- - - - -+- - - - ->|             |
//  | start_read |                     | start_write |<---+
//  |            |<---+                |             |    |
//  +------------+    |                +-------------+    | async_wait()
//          |         |                        |          |
//  async_- |    +-------------+       async_- |    +--------------+
//   read_- |    |             |       write() |    |              |
//  until() +--->| handle_read |               +--->| handle_write |
//               |             |                    |              |
//               +-------------+                    +--------------+
// 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T01:06:46.187

我怀疑你会发现任何集成在 Visual Studio 中的东西，但你可能对[AsciiFlow](http://www.asciiflow.com/)感兴趣，这是一个在线 ASCII 流程图生成器（你可以在评论中复制粘贴）。

话虽如此，您所拥有的基本上是架构文档。这种粗略的文档应该（几乎）永远不会成为评论的一部分。评论应该简短、简洁和中肯（尤其是在团队中工作时）。有关更多信息，请阅读那里的众多资源之一（这里流行的资源之一是[Google C++ 样式指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Comments)）。

流程图等更适合作为完全人类可读的某种辅助文档（如设计文档或 API 文档）的一部分——而不是深埋在源文件中。

# http - if-match HTTP 标头是否需要两阶段提交？

> ID：11821453
> 
> 赞同：1
> 
> 时间：2012-08-06T01:00:07.483
> 
> 标签：http, rest, transactions, optimistic-locking

我正在尝试设计一个 RESTful Web API，所以我一直在研究[rfc2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)。我喜欢使用 ETags 进行乐观并发的想法，并试图用它来以一种安全的方式添加资源而没有竞争条件。[但是，我注意到第 14.24 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24)中有以下两个语句：

> 如果请求在没有 If-Match 头字段的情况下会导致 2xx 或 412 状态以外的任何状态，则必须忽略 If-Match 头。
> 
> 旨在更新资源（例如，PUT）的请求可以包含一个 If-Match 头字段，以表明如果对应于 If-Match 值（单个实体标签）的实体不再是，则不得应用请求方法该资源的表示。

我正在使用 RDBMS，并且在我尝试之前不知道事务是否会成功提交，所以我认为第一个要求似乎有点繁重。考虑一个情况，有人提供了一个`If-Match`不匹配的 ETag 的标头：如果提交成功，那么我应该注意`If-Match`标头，不尝试提交，并返回 412。如果提交失败，那么没有`If-Match`标头的请求将导致非 2XX/412 响应，所以我必须忽略`If-Match`标头，这意味着我应该尝试提交。

据我所知，我有两个选择：

1.  在尝试提交之前，使用两阶段提交来预见提交是否会成功。
2.  忽略上面的第一个要求，并返回 412，即使忽略`If-Match`会导致非 2XX/412 响应。（这是我倾向于的那个）

还有其他想法吗？我误解了规格吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T01:09:13.750

不会像“更新除非修改”（乐观锁定）这样的工作吗？实体需要在数据库中存储版本号或 etag。

1.  运行不需要提交的验证，忽略 etag，必要时返回错误

2.  更新 id = :the_id 和 etag = :expected_etag 的实体

3.  这将为受影响的行返回 0 或 1

4.  如果为 0，则资源已看到并发更新（或 id 完全错误，您可以单独检查）。在这种情况下返回 412

5.  犯罪

6.  如果提交失败，则酌情返回错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:54:09.990

也许这在理论上有点，但根据我目前对 HTTP 规范的理解，我会将类似 If-Match 的标头的使用归类为几乎不可用的所有方法，但可能是安全方法，因为：

> “如果请求在没有 If-Match 标头字段的情况下会导致 2xx 或 412 状态以外的任何状态，则必须忽略 If-Match 标头”。

为什么？仅仅因为在大多数实际情况下，无法预见如果请求被执行会发生什么。

例如，谁能预见到必须运行的代码中出现的 IO 级错误或某些异常情况？

如果将 5xx 添加到 2xx 和 412 中会更“可解决”。

# php - 禁用的复选框未在 jQuery 中显示为已选中

> ID：11821454
> 
> 赞同：0
> 
> 时间：2012-08-06T01:00:22.240
> 
> 标签：php, jquery

所有，我有以下一点 PHP 来检查一个复选框：

```
<input type="checkbox" name="check_out_gear[]" id="'.$resultsetgear['gear_checkout_id'].'" value="'.$resultsetgear['gear_checkout_id'].'" class="gear_checkout_checkbox" checked disabled> 
```

该代码工作正常，复选框被选中并被禁用。我正在检查是否使用以下 jQuery 检查了至少一个复选框：

```
var fields = jQuery(".gear_checkout_checkbox").serializeArray(); 
if (fields.length == 0) 
{ 
    jQuery.wl_Alert('Please select a piece of equipment that you\'re checking out!','warning','#no_answers','#workform', {sticky:false}); 
    one_selected = false;
} 
```

当该复选框被选中并禁用时，长度始终为 0。但是，一旦我从代码中删除禁用，它的长度至少为 1。知道如何让此代码与禁用的复选框一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:04:35.080

`serializeArray`模仿表单提交。提交表单时，不会发送禁用的元素。

改为使用`is(":checked")`。

```
jQuery(".gear_checkout_checkbox").is(":checked") 
```

从[文档](http://api.jquery.com/serializeArray/)：

> .serializeArray() 方法使用成功控制的标准 W3C 规则来确定它应该包含哪些元素；特别是该元素不能被禁用，并且必须包含名称属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:04:45.650

无论是否选中，都不会发送禁用的复选框。因此它不会被`serializeArray`. 您应该检查复选框本身是否被选中，而不是它是否会被提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T01:04:50.823

禁用的输入将不会显示，因为它已被禁用。检查它的事实没有任何意义。

如果您使用 jQuery 启用和禁用复选框，您可以使用 jQuery 在禁用复选框时设置隐藏输入的值（并在再次启用复选框时再次更改它）。然后，您可以处理隐藏的输入以及复选框并执行正确的操作。

另一种可能性是根本不禁用复选框，然后使用 CSS 更改来指示它已被锁定并捕获 onchange 事件以防止它被修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T01:05:30.517

这是禁用输入的记录行为。来自[jQuery 文档`.serializeArray()`](http://api.jquery.com/serializeArray/)：

> .serializeArray() 方法使用成功控制的标准 W3C 规则来确定它应该包含哪些元素；特别是**该元素不能被禁用**，并且必须包含名称属性。

[`:checked`只需使用选择器^([jQuery docs])](http://api.jquery.com/checked-selector/)检查复选框的长度，如下所示：

```
if (jQuery(".gear_checkout_checkbox:checked").length === 0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T01:04:13.223

您可以使用`length`jQuery 对象的属性而不是`serializeArray()`方法返回的数组的长度，请尝试以下操作：

```
if ($(".gear_checkout_checkbox:checked").length === 0) { 
    jQuery.wl_Alert('Please select a piece of equipment that you\'re checking out!','warning','#no_answers','#workform', {sticky:false}); 
    one_selected = false;
} 
```

# apache - .htaccess 删除 REQUEST_URI 中的文件夹路径

> ID：11821458
> 
> 赞同：0
> 
> 时间：2012-08-06T01:01:38.923
> 
> 标签：apache, .htaccess

在这里阅读无数答案时，我似乎找不到有效的答案。任务非常简单：`/fldr/subfldr/`从 REQUEST_URI 中删除，同时始终重定向到 index.php。fldr 和 subfldr 是真正的目录，而之后的所有内容都不存在。.htaccess 和 index.php 位于 subfldr 中。

当前的.htaccess：

```
RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^.*$ index.php [PT,L] 
```

以及我尝试过的其他 RewriteRules：

```
RewriteRule ^(.*) index.php/$1 [PT,L]
RewriteRule ^/fldr/subfldr/?.*$ index.php [PT,L] 
```

我什至尝试将文件夹添加到 RewriteBase。每个版本都将完全相同的内容传递给请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:54:27.037

与其尝试重写 REQUEST_URI 环境变量，不如尝试将“uri”参数或其他内容传递给脚本，如下所示：

```
RewriteEngine On
RewriteBase /fldr/subfldr/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php?uri=$0 
```

然后你可以在 index.php 中使用 $_GET['uri']。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:37:25.267

然后试试这个（htaccess 文件在你的`/fldr/subfldr/`目录中）：

```
RewriteEngine On

RewriteBase /fldr/subfldr/

# pass through if already index.php
RewriteRule index\.php - [L]

# Rewrite to index.php
RewriteRule ^(.*)$ index.php [L] 
```

这*应该*可以使`REQUEST_URI`传递给 index.php`/fldr/subfldr`的路径的部分被删除。

# php - 从 cakephp 中不同控制器的表中选择

> ID：11821459
> 
> 赞同：0
> 
> 时间：2012-08-06T01:01:38.763
> 
> 标签：php, mysql, cakephp

在我的用户控制器中，我试图在他们的个人资料中显示给定用户的帖子。我怎样才能做到这一点？基本上，我在用户控制器中试图访问 Posts 表

这些是我的桌子

```
//Posts
id | body | user_id

//Users
user_id | username 
```

这是我的用户的个人资料功能

```
 UsersController.php

  public function profile($id = null) {
    $this->User->id = $id;
    if (!$this->User->exists()) {  //if the user doesn't exist while on view.ctp, throw error message
        throw new NotFoundException(__('Invalid user'));
    }
    $conditions = array('Posts.user_id' => $id);
    $this->set('posts', $this->User->Posts->find('all',array('conditions' => $conditions))); 
}

/Posts/profile.ctp     

<table>
<?php foreach ($posts as $post): ?>

    <tr><td><?php echo $post['Post']['body'];?>
    <br>

    <!--display who created the post -->
    <?php echo $post['Post']['username']; ?>
    <?php echo $post['Post']['created']; ?></td>
</tr>
<?php endforeach; ?>
</table> 
```

关于profle.ctp 的每一行，我都收到了几个“未定义的索引错误”

```
Undefined index: Post [APP/View/Users/profile.ctp, line 11] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:11:00.663

在您`UsersController`的`profile`操作中，您可以使用`User`模型来访问相关信息。

例子：

```
class UsersController extends AppController {
    public function profile($id = null) {
        $this->User->recursive = 2;
        $this->set('user', $this->User->read(null, $id));
    }
} 
```

在您的`User`和`Post`模型中，您应该具有正确的关联设置：

`User`模型：

```
class User extends AppModel {
    public $hasMany = array('Post');
} 
```

`Post`模型：

```
class Post extends AppModel {
    public $belongsTo = array('User');
} 
```

现在您将看到，在您的视图中，在`$user`变量上，您拥有指定配置文件 ID 的所有用户数据，以及该用户的相关帖子。

[CakePHP 文档中的这个页面在](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)从模型中读取数据时提供了一些非常有用的技巧。

# spring - @RequestMapping 在tomcat中不起作用

> ID：11821463
> 
> 赞同：0
> 
> 时间：2012-08-06T01:02:39.683
> 
> 标签：spring, tomcat, web-applications

我有这个控制器。当我点击 /person/list 时，我得到 404。有什么线索吗？我该如何调试？

```
@Controller
@RequestMapping("/person")
public class PersonController {

    @RequestMapping(value="list", method=RequestMethod.GET)
    public @ResponseBody List<Person> getPersons() {
        // code
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:10:43.920

一个好的方法是将日志级别更改为 DEBUG/TRACE 并查看日志中出现的内容 - 如果控件到达 Spring 层（DispatcherServlet 关闭），那么日志应该清楚地表明出了什么问题。

如果只是日志没有帮助，另一种方法可能是调试 Spring 流程本身 - 我通常在其中放置一个断点`DispatcherServlet.doDispatch()`并通过堆栈跟踪流程

# regex - .htaccess 正则表达式重定向

> ID：11821465
> 
> 赞同：1
> 
> 时间：2012-08-06T01:03:30.217
> 
> 标签：regex, .htaccess

如何为我的 .htaccess 文件创建一个正则表达式重定向，以重定向其中包含字母“haz”的*任何内容？*

```
Redirect /^haz*/i http://ourcityourstory.com/episode/09/ 
```

这一集被称为“Hazzard Free Farms”，所以我希望能够创建一个 .htaccess，它将 /hazzard /Hazzard-Free-Farms/ /hazzard-free 等全部重定向到正确的 URL。

我该如何做到这一点？我想要一些可以用于每一集的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:32:12.100

您需要该`[NC]`标志才能忽略大小写：

```
RewriteEngine On
RewriteRule ^haz http://ourcityourstory.com/episode/09/ [L,NC] 
```

如果您宁愿坚持使用 mod_alias 而不是 mod_rewrite：

```
RedirectMatch ^/[Hh][Aa][Zz] http://ourcityourstory.com/episode/09/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:16:18.410

这应该有效。它将重定向路径中以“haz”开头的任何 url。

```
RewriteRule ^haz(.*)$ http://ourcityourstory.com/episode/09/ 
```

# python - 初学者的python套接字

> ID：11821471
> 
> 赞同：1
> 
> 时间：2012-08-06T01:04:35.703
> 
> 标签：python, sockets

我知道python并且正在尝试更复杂的东西。我找到了这段代码，据说它有效。我在客户端的第 14 行收到错误，返回 mrecv ValueError: invalid literal for int() with base 10; ''

我将这两个文件分开并调用服务器，然后调用客户端。当我运行它们时，服务器只说关闭，客户端说
收到->再见！！！什么也没有发生，但是当我在客户端中输入 hello 时，我得到了上面显示的错误。我可能/可能做错了什么，这是我第一次用套接字或服务器或其他东西做任何事情。如果您知道我做错了什么，请提供帮助，如果您有任何其他好的网站或教程给我，我将不胜感激。这是所有代码（不是我的）

python socket 聊天示例，作者：Ankur Shrivastava，许可：GPL v3

# 服务器

```
import socket
import threading
import time

SIZE = 4

soc = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
soc.bind(('127.0.0.1',5432))
soc.listen(5)

class CThread(threading.Thread):
    def __init__(self,c):
        threading.Thread.__init__(self)
        self.conn = c
        self.stopIt=False

    def mrecv(self):
        data = self.conn.recv(SIZE)
        self.conn.send('OK')
        msg = self.conn.recv(int(data))
        return msg

    def run(self):
        while not self.stopIt:
            msg = self.mrecv()
            print 'recieved->  ',msg

def setConn(con1,con2):
    dict={}
    state = con1.recv(9)
    con2.recv(9)
    if state =='WILL RECV':
        dict['send'] = con1 # server will send data to reciever
        dict['recv'] = con2
    else:
        dict['recv'] = con1 # server will recieve data from sender
        dict['send'] = con2
    return dict

def msend(conn,msg):
    if len(msg)<=999 and len(msg)>0:
        conn.send(str(len(msg)))
        if conn.recv(2) == 'OK':
            conn.send(msg)
    else:
        conn.send(str(999))
        if conn.recv(2) == 'OK':
            conn.send(msg[:999])
            msend(conn,msg[1000:]) # calling recursive

(c1,a1) = soc.accept()
(c2,a2) = soc.accept()
dict = setConn(c1,c2)
thr = CThread(dict['recv'])
thr.start()
try:
    while 1:
        msend(dict['send'],raw_input())
except:
    print 'closing'
thr.stopIt=True
msend(dict['send'],'bye!!!')# for stoping the thread
thr.conn.close()
soc.close() 
```

# 客户

```
import socket
import threading
SIZE =4
class client(threading.Thread):
    def __init__(self,c):
        threading.Thread.__init__(self)
        self.conn = c
        self.stopIt = False

    def mrecv(self):
        data = self.conn.recv(SIZE)
        self.conn.send('OK')
        return self.conn.recv(int(data))

    def run(self):
        while not self.stopIt:
            msg = self.mrecv()
            print 'recieved-> ',msg

soc1 = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
soc1.connect(('127.0.0.1',5432))
soc1.send('WILL SEND') # telling server we will send data from here

soc2 = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
soc2.connect(('127.0.0.1',5432))
soc2.send('WILL RECV') # telling server we will recieve data from here

def msend(conn,msg):
    if len(msg)<=999 and len(msg)>0:
        conn.send(str(len(msg)))
        if conn.recv(2) == 'OK':
            conn.send(msg)
    else:
        conn.send(str(999))
        if conn.recv(2) == 'OK':
            conn.send(msg[:999])
            msend(conn,msg[1000:]) # calling recursive
thr = client(soc2)
thr.start()
try:
    while 1:
        msend(soc1,raw_input())
except:
    print 'closing'
thr.stopIt=True
msend(soc1,'bye!!') # for stoping the thread
thr.conn.close()
soc1.close()
soc2.close() 
```

我尝试输入一个数字，它给了我同样的错误。当我从线路中取出 int 并运行客户端时，它说它必须是一个数字......还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:09:19.400

接收方需要 4 个字节的字符串数据来表示要接收的剩余数据的长度。在这种情况下，您的前四个字节不包含有效的文本整数（如“1234”），因此调用`int()`失败。

# vim - 在 vim 中保存文件会导致窗口为空

> ID：11821481
> 
> 赞同：2
> 
> 时间：2012-08-06T01:06:21.610
> 
> 标签：vim

我无法在 vim 中保存文件。保存后，窗口变空，好像文件丢失了一样。标签上的标题为

```
_highlight.sass, in `box-shadow` 
```

该文件确实保存了我所做的更改。但是每次都必须重新打开它很烦人。保存其他文件确实可以正常工作。只有这一个文件，我不知道为什么。

以下是文件内容 [https://gist.github.com/0f29da34719075bdc686](https://gist.github.com/0f29da34719075bdc686)

我发现打开文件的两个选项卡，保存一个会使选项卡在保存时不会变空。但它确实失去了语法高亮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:55:39.153

您可能有一些奇怪的自动命令（或者，更有可能是插件中的错误，可以帮助您使用 sass（如果我理解正确的话）文件）`BufWrite(Pre|Cmd|Post)?`。尝试做

```
debug w 
```

`s<CR>`然后做，`<CR>` `<CR>` `<CR>`直到你看到导致问题的原因。得到它后，`verbose autocmd [group] [Event [pattern]]`它将帮助您确定它的定义位置。

如果您熟悉调试，还有`n<CR>`代表`next`( `s<CR>`is `step`)。做一次可能有用`s<CR>`（直到您应该看到第一个自动命令），然后`n<CR>` `<CR>` `<CR>`……如果调试命令是您之前运行的，Plain`<CR>`重复之前的调试操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:51:07.330

尝试将您的`~/.vimrc`文件重命名为其他名称并再次保存您的代码。如果这个错误不再发生，那么你有一个自动命令把东西弄乱了，你需要像在[https://stackoverflow.com/a/11822397/1536522中那样进行调试](https://stackoverflow.com/a/11822397/1536522)

如果错误仍然发生，您可能有一个导致问题的 vim 插件：您有任何内容`~/.vim/`吗？

# javascript - Javascript关闭？

> ID：11821484
> 
> 赞同：2
> 
> 时间：2012-08-06T01:07:33.200
> 
> 标签：javascript, closures

方法#1

```
function transform(ar) {
    var alStr = [];
    for(var i=0; i<ar.length; i++) {

        alStr[i] = (function(v) {
            return (function() {
                return v;
            });
        }(ar[i]));
    }

    return alStr;
}

var a = ["a", 24, { foo: "bar" }];
var b = transform(a);
a[1];
b[1](); 
```

方法#2

```
function transform(ar) {
    var alStr = [];
    for(var a in ar) {
        var O = function() {
            return a;
        }
        alStr.push(O);
    }
    return alStr; 
}

var a = ["a", 24, { foo: "bar" }];
var b = transform(a);
a[1];
b[1](); 
```

上述方法用于将数组对象转换为单独的函数，这些函数在执行时返回特定的数组对象。想知道为什么方法#1 有效而方法#2 无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T01:13:10.543

在方法#2中有两个问题：

1.  您正在返回键名 ，`a`而不是数组值 ，`ar[a]`。也就是说，而不是`return a;`你想要`return ar[a];`的 .

2.  该函数将始终引用循环通过的最后一个值，因为它引用了相同的作用域对象。要创建一个新的作用域对象，您需要一个闭包、一个`with`块或一个绑定函数。

有一个闭包：

```
for(var a in ar) { 
  var O = (function(val) { 
    return function() { 
      return val; 
     }
  })(ar[a]);
  alStr.push(O); 
} 
```

有一个`with`块：

```
for(var a in ar) { 
  with({val: ar[a]}) {
    alStr.push(function() { 
      return val; 
     });
  }
} 
```

使用绑定函数：

```
for(var a in ar) { 
  var O = function(x) { return x; };
  alStr.push(O.bind(null, arr[a]));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T01:34:20.833

彼得奥尔森是正确的。但是，更现代（正确？）的方法是使用`function.bind(obj, val)`. 最近才引入，`function.bind`允许您在某些上下文中按值传递变量。[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)阅读更多。

所以，你可以这样写：

```
function transform(ar) {
    var alStr = [];
    var O = function(x) { return x }
    for(var a in ar) {
        alStr.push(O.bind(null, ar[a]));
    }
    return alStr; 
}

var a = ["a", 24, 12345];
var b = transform(a);
console.log(a[2]);
b[2](); 
```

这是一个更正确的范例，因为启动闭包具有非常明确的含义。然而，使用 bind 往往是一种函数式方法，专门用于函数调用（在特定上下文或具有特定规定）时。

使用 with 块也有一些缺点（有很多关于它的问题）。

**奖励**：如果您还想表示对数组`b`的后续更改，此解决方案可以解决该问题：`a`

```
function transform(ar) {
    var alStr = [];
    var O = function(x) { return ar[x] }
    for(var a in ar) {
        alStr.push(O.bind(null, a));
    }
    return alStr; 
}

var a = ["a", 24, 12345];
var b = transform(a);
console.log(a[2]);
console.log(b[2]());
console.log("*********");
a[2] = "new value!";
console.log(a[2]);
console.log(b[2]()); 
```

# applescript - 需要帮助解决语法错误：预期表达式但找到命令名称

> ID：11821485
> 
> 赞同：0
> 
> 时间：2012-08-06T01:07:45.850
> 
> 标签：applescript

所以我以前从没用过applescripts，也不知道怎么写代码。

我正在尝试使用我在网上找到的这个脚本，但我收到了“语法错误：预期的表达式但找到了命令名称”

任何帮助，将不胜感激

代码：

```
on idle
  tell application "System Events"
    tell current location of network preferences
      set myConnection to the service "BTGuard”
      if current configuration of myConnection is not connected then
        try
          tell application "transmission"
            quit
          end tell
          connect myConnection
          –say "Retrying connection"
        end try
      else
        tell application "transmission"
          run
        end tell
      end if
    end tell
    return 1
  end tell
end idle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:56:12.980

看起来你在**BTGuard**字符串后面有一些弯引号（可能是从某个地方（例如网页）复制格式化文本的结果）——解决方法是将引号更改为正常的直引号。另一个语法问题是 say 语句的注释字符 - 要像这样注释一行，请使用**--**或**#**字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:52:56.493

既然你说你对applescript一无所知，我会问......你是否意识到这是一个特殊的applescript，称为“保持开放”applescript？这意味着您必须将其保存为应用程序并选中“保持打开”框以使其正常工作。

# php - 使用带有 MAMP 的 PHP 从本地主机发送邮件

> ID：11821486
> 
> 赞同：5
> 
> 时间：2012-08-06T01:07:51.023
> 
> 标签：php, email, mamp

为此，我一直在尝试在互联网上可以找到的所有内容，但似乎都没有工作，所以我做错了什么，我需要一些帮助来弄清楚是什么。

```
[mail function]
; For Win32 only.
SMTP = localhost
smtp_port = 25

; For Win32 only.
sendmail_from = myemail@yahoo.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
sendmail_path = /usr/sbin/sendmail -t -i -f myemail@yahoo.com 
```

上面的代码是我将所有内容更改为的内容，（除了电子邮件是我的实际电子邮件（我也不确定雅虎电子邮件是否可以处理这个问题，所以也许这就是问题所在？））我不确定在哪里sendmail_path 转到，我在任何地方都找不到该路径（我想下载一些名为 sendmail 的文件/程序吗？）

还有，我的APACHE端口我改成了80，我的MySQL端口是3306，（不知道这些端口和smpt_port有没有关系）

任何帮助将不胜感激，谢谢！

（如果有任何其他方法，（更简单的方法）这样做，也请告诉我）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-09T03:40:30.187

这篇文章的解决方案终于对我有用。 [https://tripleroi.com/solvedenabling-sendmail-on-localhost-for-mamp-free-version/](https://tripleroi.com/solvedenabling-sendmail-on-localhost-for-mamp-free-version/)

php.ini 中的正确设置：

```
[mail function]
; For Win32 only.
;SMTP = localhost
;smtp_port = 25

; For Win32 only.
;sendmail_from = don@tripleroi.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
sendmail_path =/usr/sbin/sendmail -t -i -f  yourname@example.com 
```

您必须确保注释掉 Win32 设置。之后，我的 Mac 上的 MAMP 服务器终于收到了一封邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T11:18:16.190

当我还在使用 MAMP 时，我曾经遇到过一系列这样的问题，包括电子邮件问题。

MAMP Pro 应该可以解决所有问题，但我建议您自己安装 apache/php/mysql。像这样的基本东西你不会有更多的问题，它是一个免费的解决方案。

如果您在 OSX 上 apache 已经存在，则可以通过[homebrew](http://mxcl.github.io/homebrew/)安装 php 。Mysql 可以作为安装程序从官方网站下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:53:43.733

MAMP PRO 已经有了这个，并且有一个简单的界面来做这个，我明白了，我让它完美地工作。 [http://www.mamp.info/en/mamp-pro/](http://www.mamp.info/en/mamp-pro/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-29T09:15:47.797

就我而言，问题出在空 /etc/postafix/main.cf

```
cat /etc/postafix/main.cf 
```

什么都不显示。但是没有空的 main.cf~orig 所以我已经从 main.cf~orig 复制了内容：

```
sudo cp main.cf~orig main.cf 
```

之后 MAMP 开始发送邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-10T23:37:19.057

这有点跑题了，但是您应该知道，如果您从本地主机向任何类型的真实客户发送电子邮件，他们很可能会以垃圾邮件告终。与其使用本地电子邮件服务器，不如使用一种第三方的、超级便宜的电子邮件发送服务：Amazon SES 或 Sendgrid 都易于上手，并且易于扩展。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-08-02T10:38:50.917

`'from'`在`mail.php`配置文件中设置。

# c# - 如何在 3D 透视图中 Z-Index（Z-Sorting）windows 8 UIElements？

> ID：11821488
> 
> 赞同：2
> 
> 时间：2012-08-06T01:08:01.950
> 
> 标签：c#, windows-8, z-index, transform, uielement

一般来说，您可以`UIElement`使用所谓的“透视变换”将 3-D 效果（x,y,z,rotationX,rotationY,rotationZ...）应用于任何效果：

```
<Image x:Name="img1" HorizontalAlignment="Left" Height="200" Width="200" Source="img1.jpg">
        <Image.Projection>
            <PlaneProjection CenterOfRotationY="3" RotationX="40"/>
        </Image.Projection>
</Image> 
```

但没有 Z 索引（Z 排序）！当 UIElements 重叠时，它们无法正确呈现透视图。

在 AS3 中，我使用此函数对对象进行 zsort ：

```
public function zSort():void
    {
        var i:uint;
        var zList:Array = [];
        for (i=0; i<this.numChildren; i++)
        {
            var mtx:Matrix3D = this.getChildAt(i).transform.getRelativeMatrix3D(this.parent);
            zList.push( { sp:this.getChildAt(i), z:mtx.position.z } );
        }
        zList.sortOn("z", Array.NUMERIC | Array.DESCENDING);
        for (i=0; i<this.numChildren; i++)
        {
            this.setChildIndex(zList[i].sp, i);
        }
    } 
```

c#中是否有类似的解决方案？还是在 Windows 8 中工作不同？

我发现这个 Silverlight 教程[“使用投影在 Silverlight 3 中构建 3D 轮播”](http://www.silverlightbuzz.com/2009/06/12/using-projection-to-build-a-3d-carousel-in-silverlight-3/) 图像似乎是 zindex 自动女巫不是在 WINRT 中发生的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:23:58.583

如果您将您的`Image`放在[Canvas](http://msdn.microsoft.com/en-us/library/windows/apps/br209267.aspx)中，您将能够设置[zIndex 依赖属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.canvas.zindexproperty.aspx)。

# c# - 确定模型的属性是否不可为空或者是必需的（在 MVCScaffolding T4 模板文件中）

> ID：11821489
> 
> 赞同：4
> 
> 时间：2012-08-06T01:08:07.630
> 
> 标签：c#, model-view-controller, t4, scaffolding, asp.net-mvc-scaffolding

**我想编写一个方法来获取 T4 模板文件中属性的 Nullable 状态。**

我已经将它写在我的 TT 文件中，但在 T4 文件中它是不同的

```
bool IsRequired(object property) {
    bool result=false;

    ? ? ? ? ? ? ? ? ? ? ? ?

    return result;
} 
```

* * *

```
List<ModelProperty> GetEligibleProperties(EnvDTE.CodeType typeInfo, bool includeUnbindableProperties) {
    List<ModelProperty> results = new List<ModelProperty>();
    if (typeInfo != null) {
        foreach (var prop in typeInfo.VisibleMembers().OfType<EnvDTE.CodeProperty>()) {
            if (prop.IsReadable() && !prop.HasIndexParameters() && (includeUnbindableProperties || IsBindableType(prop.Type))) {
                results.Add(new ModelProperty {
                    Name = prop.Name,
                    ValueExpression = "Model." + prop.Name,
                    Type = prop.Type,
                    IsPrimaryKey = Model.PrimaryKeyName == prop.Name,
                    IsForeignKey = ParentRelations.Any(x => x.RelationProperty == prop),
                    IsReadOnly = !prop.IsWriteable(),

                    // I Added this >>
                    IsRequired = IsRequired(prop)
                });
            }
        }
    } 
```

怎么做？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T08:55:59.213

一年后在同一个问题上苦苦挣扎，我发现了你的问题。我认为这不可能以简单的方式进行，因为您必须将 CodeTypeRef 传输到 Systemtype。这是一个不错的 hack，适用于模型和 mvcscaffolding：

```
bool IsNullable(EnvDTE.CodeTypeRef propType) {
  return propType.AsFullName.Contains(".Nullable<");
} 
```

您应该以这种方式调用此函数：

```
 // I Added this >>
               // IsRequired = IsRequired(prop)
                IsRequired = !IsNullable(prop.Type);
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:17:35.527

从 T4 模板调用它并没有什么特别之处，是吗？看到这个[问题](https://stackoverflow.com/questions/374651/how-to-check-if-an-object-is-nullable)

我个人喜欢 Mike Jones 的回答，为方便起见，在此转载。

```
public static bool IsObjectNullable<T>(T obj)
{
  // If the parameter-Type is a reference type, or if the parameter is null, then the object is     always nullable
  if (!typeof(T).IsValueType || obj == null)
    return true;

  // Since the object passed is a ValueType, and it is not null, it cannot be a nullable object
  return false; 
}

public static bool IsObjectNullable<T>(T? obj) where T : struct
{
  // Always return true, since the object-type passed is guaranteed by the compiler to always be nullable
  return true;
} 
```

# c++ - 在 C++ 中将字符串转换为 Cstring

> ID：11821491
> 
> 赞同：23
> 
> 时间：2012-08-06T01:08:20.417
> 
> 标签：c++, string, c-strings

我有一个要转换的字符串，`string = "apple"`并希望将其放入这种风格的 C 字符串中`char *c`，它包含`{a, p, p, l, e, '\0'}`. 我应该使用哪种预定义方法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-06T01:10:21.427

`.c_str()`返回一个`const char*`。如果您需要可变版本，则需要自己制作副本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-06T01:54:46.333

```
vector<char> toVector( const std::string& s ) {
  string s = "apple";  
  vector<char> v(s.size()+1);
  memcpy( &v.front(), s.c_str(), s.size() + 1 );
  return v;
}
vector<char> v = toVector(std::string("apple"));

// what you were looking for (mutable)
char* c = v.data(); 
```

.c_str() 适用于不可变。矢量将为您管理内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T13:18:33.030

```
string name;
char *c_string;

getline(cin, name);

c_string = new char[name.length()];

for (int index = 0; index < name.length(); index++){
    c_string[index] = name[index];
}
c_string[name.length()] = '\0';//add the null terminator at the end of
                              // the char array 
```

我知道这不是预定义的方法，但认为它可能对某人有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-27T10:28:59.047

您可以通过 2 个步骤来完成。

1.  转换字符串 -> const char*

2.  const char* -> CString

```
string st = "my str";
const char* stBuf = st.c_str();   // 1\. string to const char *

size_t sz;                          // save converted string's length + 1
wchar_t output[100] = L"";          // return data, result is CString data

mbstowcs_s(&sz, output,  50, stBuf, 50); // converting function

CString cst = output; 
```

# css - 外部字体样式表

> ID：11821495
> 
> 赞同：0
> 
> 时间：2012-08-06T01:09:05.757
> 
> 标签：css, external, font-face

无论如何要包含一个已保存@font-face 的css 类型文件。我可能已经下载了不同的字体，我想在不同的站点上使用它们，所以最好有一个样式表，我可以参考并从中选择一种字体。我尝试使用 css 文件执行此操作并将其链接到 html 文档，但它不起作用。我是否必须将其链接到 css，如果是，我该怎么做？

非常感谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:41:01.673

不推荐以这种方式使用字体。你应该看看 typekit。[https://typekit.com/](https://typekit.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:19:34.797

如果我理解正确...假设您的网站位于**www.yourdomain.com/index.html**，您的 style.css 文件位于 **www.yourdomain.com/css/style.css**，您的字体位于**www.yourdomain.com/字体**/

你的 index.html 会说：`<link href="css/style.css" rel="stylesheet" type="text/css" />`

你的CSS会说：`url('../fontNamettf') format('truetype'),`

现在，如果你在其他地方有一个 HTML（比如 new.html），你需要做的就是使用绝对路由调用 style.css，它会找到字体，因为它们在同一个域/文件夹中样式表。

然后你的 new.html 会说：`<link href="www.yourdomain.com/css/style.css" rel="stylesheet" type="text/css" />`

# html - 包装在一个

> ID：11821496
> 
> 赞同：1
> 
> 时间：2012-08-06T01:09:09.927
> 
> 标签：html, html-table

是否有一种简单的 HTML 方法来完成以下操作？我有一个表，其中每行包含 3 行`td`。项目被添加到顶部的表格中，因此以相反的顺序排序。见下文：

```
<table>
    <tr>
        <td>7</td>
        <td>6</td>
        <td>5</td>
    </tr>
    <tr>
        <td>4</td>
        <td>3</td>
        <td>2</td>
    </tr>
    <tr>
        <td>1</td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

现在，当我需要在表格顶部添加 8 时，显然我必须对页面进行大量编辑，而不仅仅是添加一个新行。我想做类似的事情：

```
<table>
    <tr max-cells-before-wrap="3">
        <td>7</td>
        <td>6</td>
        <td>5</td>
        <td>4</td>
        <td>3</td>
        <td>2</td>
        <td>1</td>
    </tr>
</table> 
```

但我不确定在 HTML 中是否可行。我可以编写一个简单的 JS 函数来完成它，但基本的 HTML 会更酷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T01:21:53.160

你总是可以尝试这样的事情......

```
<table width="200">
<tr>
<td>
<div style="float:left; width: 33%">7</div>
<div style="float:left; width: 33%">6</div>
<div style="float:left; width: 33%">5</div>
<div style="float:left; width: 33%">4</div>
<div style="float:left; width: 33%">3</div>
<div style="float:left; width: 33%">2</div>
<div style="float:left; width: 33%">1</div>
</td>
</tr>
</table> 
```

只需添加

```
<div style="float:left; width: 33%">8</div> 
```

7点之前

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T01:24:19.743

我可以提议吗？

```
<ul id="ul">
    <li>7</li>
    <li>6</li>
    <li>5</li>
    <li>4</li>
    <li>3</li>
    <li>2</li>
    <li>1</li>
</ul> 
```

**现场演示：http:** [//jsfiddle.net/3n4FE/](http://jsfiddle.net/3n4FE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:14:12.827

简而言之：没有。这违背了表格行的概念**，**不是**吗**？

# mysql - CodeIgniter Datamapper ORM 是否支持 ORDER BY 子句中的 MySQL CASE 语句？

> ID：11821503
> 
> 赞同：0
> 
> 时间：2012-08-06T01:10:24.320
> 
> 标签：mysql, codeigniter, codeigniter-datamapper

对 PHP 的 CodeIgniter 使用 Datamapper 1.8.1-dev，我正在尝试构建此查询以优先考虑列表顶部的一个国家/地区名称：

```
SELECT * FROM countries
ORDER BY CASE name WHEN 'Australia' THEN 1 ELSE 2 END, name 
```

我的 Country 模型上的 PHP（扩展了 Datamapper）：

```
$countries = new Country();
$countries->order_by("CASE name WHEN 'Australia' THEN 1 ELSE 2 END, name");
$countries->get_iterated(); 
```

Datamapper 将“CASE”解析为表名，构建此语法错误查询：

```
SELECT * FROM (`countries`)
ORDER BY `CASE` name WHEN 'Australia' THEN 1 ELSE 2 END, `countries`.`name` 
```

我假设 CASE 案例没有被处理，因为这个流控制语句只是在 MySQL 5 中添加的？`order_by`在数据库检索后向表中添加列`countries`或使用 PHP 排序函数是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:27:46.133

我能够按顺序使用 case 语句。您只需要将 case 语句括在括号中。如果您不这样做，单词 case 将被视为列名并反引号。

```
$this->db->distinct(); 
$this->db->select('country');         
$this->db->from('distributors');
$this->db->where('country  != ', '');
$this->db->order_by("(CASE country WHEN 'UNITED STATES OF AMERICA' THEN '1' ELSE country END)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:27:44.387

Datamapper`order_by()`只是`$this->db->order_by()`.

不幸的是，根据[CodeIgniter 文档](http://codeigniter.com/user_guide/general/creating_libraries.html)，数据库类是唯一不可扩展的类。你将不得不通过修改核心来弄脏你的手。

进入`system/database/DB_active_rec.php`并搜索该`order_by()`功能。在函数的函数定义中添加第三个参数：

`function order_by($orderby, $direction = '', $case = null)`

滚动到函数的底部...就在分配`$orderby_statement`要`$this->ar_orderby[]`写入之前：

`if($case===true) $orderby_statement = "CASE " . $orderby_statement;`

保存文件并进入`application/libraries/datamapper.php`并搜索该`order_by()`功能。注意，它只是一个包装器！

将其替换为：

```
public function order_by($orderby, $direction = '', $case = null)
{
    $this->db->order_by($this->add_table_name($orderby), $direction, $case);
    //For method chaining
    return $this;
} 
```

现在，在你的控制器中，如果你`true`作为第三个参数传递给`order_by()`，并从第一个字符串参数中删除 CASE 关键字，你应该得到正确的语法。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:46:35.620

由于 DataMapper 不支持 MYSQL 的 CASE 关键字，直接的解决方法是调用 SQL 使用`query()`方法：

```
$sql = "SELECT * FROM `countries` ORDER BY CASE `name` WHEN 'Australia' THEN 1 ELSE 2 END, `name`";
$countries = new Country();
$countries->query($sql); 
```

# sql - Oracle 11g 第 2 版：可以在创建表检查约束中使用子查询吗？

> ID：11821504
> 
> 赞同：3
> 
> 时间：2012-08-06T01:10:32.360
> 
> 标签：sql, oracle, triggers, plsql, oracle11gr2

我正在尝试定义三个数据库表 - USERNAME、USER_SESSIONS 和 TOOLBOX_DIRS_REGISTERED。我可以毫无问题地定义前两个，但最后一个让我有点悲伤。理想情况下，我想如下面的代码块所示定义它，但是我相信子查询不能在检查约束中使用？

下面的代码块显示了我想如何定义表 TOOLBOX_DIRS_REGISTERED。代码块的开头还包含一些注释，试图解释我对表定义使用的某些约束的想法。

```
-- Constraint : USERNAME_FK
-- ========================
--
-- USERNAME must contain a username which has been added to the table USERNAME.
--
-- Constraint : USER_SESSION_ID_FK
-- ===============================
--
-- USER_SESSION_ID must contain a user session ID which has been added to the table 
-- USER_SESSION.
--
-- Constraint : check_user_session_id
-- ==================================
--
-- In addition to the above constraint, USER_SESSION_ID must also belong to the 
-- username which is contained within USERNAME.

create table
TOOLBOX_DIRS_REGISTERED
(
 DIRNAME         varchar2(100) not null,
 USERNAME        varchar2(32)  not null,
 USER_SESSION_ID varchar2(32)  not null,
 AUTO_REGISTER   char          not null,
 constraint
   TOOLBOX_DIRS_REGISTERED_PK
   primary key (DIRNAME),
 constraint
   USERNAME_FK
   foreign key (USERNAME)
   references USERS(USERNAME),
 constraint
   USER_SESSION_ID_FK
   foreign key (USER_SESSION_ID)
   references USER_SESSIONS(USER_SESSION_ID),
 constraint
   check_user_session_id
   check
   (
    USERNAME in
    (
     select USERNAME from USER_SESSIONS
     where USER_SESSIONS(USER_SESSION_ID) = USER_SESSION_ID
    )
   )
); 
```

有谁知道解决这个问题的方法，即在检查约束“check_user_session_id”的定义中使用子查询？我在 Stackoverflow 上读到，在这种特殊情况下，可以使用物化视图代替子查询。问题是，如果我使用物化视图，那么我想确保它在执行检查约束时是最新的。所以我所做的是实现物化视图以及在物化视图上调用 dbms_mview.refresh 的触发器。这一切都很好，除了 Oracle 抱怨它不能在触发器中提交。啊！它给我的确切信息是；

```
ERROR at line 2:
ORA-04092: cannot COMMIT in a trigger
ORA-06512: at "SYS.DBMS_SNAPSHOT", line 2760
ORA-06512: at "SYS.DBMS_SNAPSHOT", line 2740
ORA-06512: at "SYSTEM.SIMULAB_MVIEW", line 19
ORA-06512: at "SYSTEM.TRIG_TOOLBOX_DIRS_REGISTERED", line 3
ORA-04088: error during execution of trigger 'SYSTEM.TRIG_TOOLBOX_DIRS_REGISTERED' 
```

我假设 Oracle 在刷新物化视图后尝试自动执行提交，这就是它所抱怨的？

我的触发器定义如下；

```
create or replace trigger TRIG_TOOLBOX_DIRS_REGISTERED
  before insert or update on
    TOOLBOX_DIRS_REGISTERED
  begin

    -- Invoke the PL/SQL Package procedure simulab_mview.refresh_mview

    simulab_mview.refresh_mview;

  end; 
```

而 PL/SQL 包 simulab_mview 定义如下；

```
create or replace
package
simulab_mview
as

    procedure
    refresh_mview;

end;
/

create or replace package body
simulab_mview
as

    procedure
    refresh_mview
    as

    begin

        -- I have a strong suspicion that dbms_mview.refresh might cause a commit to 
        -- be executed. This would make sense, as the RDBMS would need to execute a 
        -- commit so that other clients could see the result of the refresh.

        dbms_mview.refresh('mat_view', 'C');

    end;

end;
/ 
```

有人对此有任何想法吗？有没有更简单的方法来做我想做的事，我不应该使用物化视图，不应该使用触发器吗？

对此的任何帮助甚至想法都将不胜感激。如果有人确实能够就此事提供任何帮助或想法，那么我要提前感谢他们的帮助。

祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:14:20.080

根据[关于 CHECK 约束的 Oracle 11.2 文档](http://docs.oracle.com/cd/E11882_01/server.112/e17118/clauses002.htm#CJAGIICD)

> 检查约束的限制
> 
> 检查约束受以下限制：
> 
> • 检查约束条件不能包含以下结构：
> 
> ```
>  ◦Subqueries and scalar subquery expressions 
> ```

如果您想同时验证 TOOLBOX_DIRS_REGISTERED 和 USER_SESSIONS 之间的 USER_SESSION_ID 和 USERNAME，我建议您在 USER_SESSIONS(USER_SESSION_ID, USERNAME) 上创建一个唯一键，然后在 TOOLBOX_DIRS_REGISTERED(USER_SESSION_ID, USERNAME) 上创建一个外键到 USER_SESSIONS(USER_SESSION_ID, USERNAME) .

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:09:00.070

如果我正确理解这一点，我认为您不想`toolbox_dirs_registered`同时引用表格`users`和`user_sessions`表格。那不是标准化的。仅参考该`user_sessions`表，并且您已经参考了该`users`表。

以下片段未经测试，有很多剪切和粘贴，但我认为它给出了这个想法：

```
CREATE TABLE users(
   user_id  NUMBER
  ,username VARCHAR2(32)
  ,CONSTRAINT users_pk PRIMARY KEY(user_id)
);

CREATE UNIQUE INDEX users_username_uk ON users(username);

CREATE TABLE user_sessions(
   user_session_id NUMBER
  ,user_id         NUMBER
  ,session_id      NUMBER
  ,CONSTRAINT user_sessions_pk PRIMARY KEY(user_session_id)
  ,CONSTRAINT user_session_user_id_fk FOREIGN KEY(user_id) REFERENCES users(user_id)
);

CREATE UNIQUE INDEX user_sessions_user_session_uk ON user_sessions(user_id, session_id);

CREATE TABLE toolbox_dirs_registered(
   dirname         VARCHAR2(100) NOT NULL
  ,user_session_id NUMBER(32)
  ,auto_register   CHAR(1)
  ,CONSTRAINT toolbox_dirs_registered_pk PRIMARY KEY(dirname)
  ,CONSTRAINT tdr_user_session_id_fk FOREIGN KEY(user_session_id) REFERENCES user_sessions(user_session_id)
); 
```

# video - 在 C++ 中调整视频大小

> ID：11821511
> 
> 赞同：0
> 
> 时间：2012-08-06T01:12:41.990
> 
> 标签：video

我想在 C++ 中将视频大小从 640x360 更改为 160x120。我正在使用 borland C++ 构建器。我不想使用拉伸功能。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-12T07:36:14.957

请参阅此使用 AVBlocks 的[视频升级示例。](http://wiki.avblocks.com/wiki/avblocks-programming/using-transcoder/working-video/upscale-video/)您应该能够轻松地对其进行修改以进行缩小。确保将调整大小插值方法更改为 InterpolationMethod::Super ，因为它会在减小尺寸时提供更好的结果。

# wireshark - Wireshark 可以告诉我设备所在的 IP 和子网吗？

> ID：11821515
> 
> 赞同：0
> 
> 时间：2012-08-06T01:13:47.090
> 
> 标签：wireshark, wireshark-dissector

我有一台设备，我不知道它所在的 IP**或**子网。Wireshark 能告诉我这两件事吗？我**认为**ip 大约在 10.3.253.x....只是不确定，最重要的是我不知道它在哪个子网上.....帮助：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:17:08.427

不，不明确。网络掩码仅在决定如何处理路由器和广播地址时使用，并且在任何时候都不会通过线路发送。如果您可以看到来自设备的所有流量，您可以通过查看它为哪些 IP 路由数据（例如，ICMP ping 回复）来推断子网。

# jsf - Primefaces - 数据表选择所有项目

> ID：11821522
> 
> 赞同：1
> 
> 时间：2012-08-06T01:15:54.463
> 
> 标签：jsf, primefaces

嗨，我有一个带有延迟数据加载的数据表和一个带有选择/取消选择所有项目选项的上下文菜单。但我不知道怎么做。

```
<h:form>
    <p:contextMenu for="tableNozzleFamily">  
        <p:menuitem value="#{bundle.global_select_all}" icon="ui-icon-plus"/>
        <p:menuitem value="#{bundle.global_unselect_all}" icon="ui-icon-minus"/>
    </p:contextMenu> 
    <p:dataTable id="tableNozzleFamily" var="nf" value="#{nozzleBean.lazyModel}" paginator="true" rows="20" rowsPerPageTemplate="20, 30, 50" lazy="true" emptyMessage="#{bundle.global_no_data}" selection="#{nozzleBean.selectedNozzleFamilies}">
        <p:columnGroup type="header">
            <p:row>
                <p:column rowspan="2" headerText="#{bundle.global_selection}"/>
                 ...
            </p:row>
        </p:columnGroup>
        <p:column selectionMode="multiple" style="width:18px"/>
        ...
    </p:dataTable> 
```

我的环境：Glassfish 3.1.2.2 Mojarra-2.1.11 Primefaces-3.3.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:20:15.477

你检查过primefaces展示吗？有一个例子就是这样做[的](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)。

```
<p:dataTable id="multiCars" var="car" value="#{tableBean.mediumCarsModel}" paginator="true" rows="10"  
             selection="#{tableBean.selectedCars}">  

    <f:facet name="header">  
        Checkbox Based Selection  
    </f:facet>  

    <p:column selectionMode="multiple" style="width:18px" />  

    <p:column headerText="Model">  
        #{car.model}  
    </p:column>  

    <p:column headerText="Year">  
        #{car.year}  
    </p:column>  

    <p:column headerText="Manufacturer" >  
        #{car.manufacturer}  
    </p:column>  

    <p:column headerText="Color">  
        #{car.color}  
    </p:column>  

    <f:facet name="footer">  
        <p:commandButton id="multiViewButton" value="View" icon="ui-icon-search"  
                         update=":form:displayMulti" oncomplete="multiCarDialog.show()"/>  
    </f:facet>  
</p:dataTable> 
```

# objective-c - 制作动画类ios

> ID：11821524
> 
> 赞同：0
> 
> 时间：2012-08-06T01:16:57.870
> 
> 标签：objective-c, ios, xcode, uiviewanimation

无论如何在iOS中创建一个类然后动画一些东西？我对 UIView 动画知之甚少，我想知道它是否可能以及如何实现。这就是我想变成一堂课的内容：

```
[UIView animateWithDuration:1.0
                 animations:^{

                     X = X + 19
                 }
                 completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:42:11.820

我不知道这是否是最好的方法，但一种方法是：创建一个objective-c 类（UIView 的子类）。在初始化方法中进行初始化。然后创建一个实例方法，您可以在其中放置动画代码。例如

```
-(void)startAnimation{   

    [UIView animateWithDuration:1.0
             animations:^{  
        cg_point= self.center; 
        cg_point.x=cg_point.x+19;
        self.center=cg_point;

    }completion:nil];

} 
```

每当需要执行动画时，您都可以在主视图控制器中调用此方法。

# asp.net - asp.net 中的数据绑定器

> ID：11821527
> 
> 赞同：0
> 
> 时间：2012-08-06T01:17:49.283
> 
> 标签：asp.net, databinder

我有这个：（使用中继器，但这个有点长，所有字段问题都与这个有关）

```
<td valign="top">
<%#DataBinder.Eval(Container.DataItem, "Category")%>
</td> 
```

和 ：

```
 RentalCarBL.CarBL bl = new RentalCarBL.CarBL ();

        List<Car> cars = bl.GetAll();

        rpCars.DataSource = cars;

        rpCars.DataBind(); 
```

它在 Car 类的所有字段上都可以正常工作，除了一个类别本身就是一个类
我如何让它显示类 Category 的内部字段（比如说 Category.name）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:42:58.047

好吧，看来我的 DAL 有问题，但修复后仍然有问题
，但修复起来有点容易，他告诉我它返回对象我所要做的就是覆盖类别的 tostring :) 并且它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:33:02.163

```
DataBinder.Eval(Container.DataItem, "Category") 
```

返回一个对象类型。

您应该首先将其转换为您的类别的类类型。如

```
((YourCategoryClassName)DataBinder.Eval(Container.DataItem, "Category")).CategoryName 
```

# javascript - 如何从 Controller 创建进度条以处理 MVC3 中的长流程

> ID：11821528
> 
> 赞同：2
> 
> 时间：2012-08-06T01:18:05.550
> 
> 标签：javascript, jquery, asp.net-mvc, vb.net, asp.net-mvc-3

我有一个使用 RAZOR 视图的 vb.net MVC3 应用程序。有些功能需要很长时间才能完成，因为它们是从数据库中编译数据。在这漫长的等待过程中，浏览器屏幕是白色的，除了活动环之外，没有任何迹象表明它正在做它应该做的事情。我想做的是创建一个进度条，在 count 方法上使用一些简单的数学来确定进度条的完成百分比，并将其显示在屏幕上而不是纯白色的浏览器屏幕上。我确信我需要使用某种 Jquery 小部件执行此操作。并查看了整个谷歌，但似乎没有什么能满足我在这里需要的东西。当显示白屏直到完成时调用的控制器函数如下：

```
 Function beginArchive()
        Dim cList As List(Of cours) = db.courses.ToList
        For Each x In cList
            Dim indCourse = x
            Dim courHfile As String = archiveFiles(x.course_id)
            Dim arcCourse As New archive
            arcCourse.cDesc = indCourse.course_description
            If Not String.IsNullOrEmpty(courHfile) Then
                arcCourse.cHandouts = courHfile
            End If
            arcCourse.cHours = indCourse.course_hours
            arcCourse.conNum = Convert.ToInt16(indCourse.courseNum)
            arcCourse.cPre = indCourse.course_prefix
            arcCourse.cRef = indCourse.course_ref
            arcCourse.cSpeaker = indCourse.course_speaker
            arcCourse.cTitle = indCourse.course_title
            db.archives.AddObject(arcCourse)
            db.SaveChanges()
            Dim testSuccess As Integer = delOldFiles(indCourse.course_id)
        Next
        Return RedirectToAction("Index", "Admin")

    End Function 
```

剃刀视图是这样的：

```
@Code
ViewData("Title") = "Archive Previous Conf. Handouts"
End Code
<fieldset>
<h2>You are about to archive all handouts from last years conference. If you continue all of those handouts will be moved to the archive</h2>
<div id="sidebar3">
<p>

@Html.ActionLink("Begin Archive", "beginArchive","handoutArchive")
@Html.ActionLink("Back to Admin Tools", "Index", "Admin")
</p>
</div>
</fieldset> 
```

关于如何添加一个简单的进度条的任何想法，我假设必须由控制器本身触发......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:16:23.290

您的页面/操作的当前设计无法实现您本质上要求的内容。您正在单击向您的控制器发出请求的链接。控制器将等到动作完成后再渲染并返回响应。这与进行 ajax 调用不同，后者会将数据返回到当前页面，而不是将您定向到新的 url。有很多方法可以做到这一点，其中很多取决于您希望它如何工作的要求。

如果是我，我想做一个大手术，这就是我会做的。显示一个微调器或某种带有“这可能需要一段时间”的消息的图标，并对您的操作发出 ajax 请求。当操作返回时，您可以显示消息或重定向到新路由。

一个使用 jquery 的例子

```
$.post('beingArchive/2012', function(data) {
  if(data.status === "success"){
        window.location.replace("/success");
  }else{
        $("#error-div").html("<em>Something went wrong!</em>");
  }
}); 
```

这假设您的`beginArchive`方法返回 json`{"status":"success"}`或`{"status":"error archiving reason blah"}`

```
 [HttpPost]
    Public Function beginArchive() As JsonResult
    Dim status = "success"

    Try
            'do the archiving
    Catch e As Exception
        status = "error occurred"
    End Try
    Return New Json(New With { _
    Key .status = status _

    })
    End Function 
```

（如果 vb.net 不正确，我很抱歉，这只是我设想如何实施行动的一个例子）。不幸的是，如果不知道更多关于“归档讲义”的实现是什么，我真的不能告诉你一个很好的解决方案来显示行动的进展情况。但我觉得这是许多应用程序在处理密集操作时使用的标准解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:45:39.407

您的 html 代码会很高兴看到这里以获得更好的响应，但是您可以轻松地做的是让您的进程在 ajax.beginform 中运行，并使用开始表单的 onbegin/oncomplete 参数来调用 startProgressbar / stopProgressbar 方法. 只需在 div 中有一个动画 gif，并让上面的 2 种方法为该 div 显示/隐藏。

# php - 用于上传 .csv 并将数据添加到 mysql 数据库的预构建 GUI

> ID：11821530
> 
> 赞同：0
> 
> 时间：2012-08-06T01:18:23.153
> 
> 标签：php, javascript, mysql, html

有人知道那里有一个插件可以帮助我将 .csv 文件插入 mySQL 数据库吗？计划自己从头开始构建它，但意识到我需要的所有代码可能已经在那里了。我正在尝试做的事情的详细描述可以在下面找到。

我想在我的网页中添加一个 gui，允许用户从本地计算机中选择一个 .csv 文件，将该 .csv 文件上传到服务器并将 csv 中的数据添加到 mySQL 数据库表中。此外，如果代码中有验证确认 .csv 数据的结构与 mySQL 表匹配，那就太好了。

如果您对我在哪里可以找到它，甚至您认为我应该在哪里/如何寻找它有任何建议，请告诉我。不一定需要是一个独立的插件。如果您知道 github 上有一个包含此代码的项目，那也将非常有帮助。

谢谢埃文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:31:03.833

phpclassess 上有几个预建插件：http://www.phpclasses.org/package/2917-PHP-Import-CSV-data-into-a-MySQL-database-table.html

# mysql - 如何使用类似查询来搜索包含 % 的列值？

> ID：11821540
> 
> 赞同：2
> 
> 时间：2012-08-06T01:20:43.317
> 
> 标签：mysql, sql

```
tablename - names
values    - %dfdf
            hhhh
            %fgfg 
```

现在如果我想得到所有的名字`starting from %`，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T01:25:46.313

您可以使用[`LIKE`](http://dev.mysql.com/doc/refman/5.6/en/string-comparison-functions.html#operator_like)来测试一个值是否以某个子字符串开头。由于`%`是特殊字符，因此必须对其进行转义。

> 要测试通配符的文字实例，请在其前面加上转义字符。如果不指定 ESCAPE 字符，则假定为“\”。

试试这个：

```
SELECT `values`
FROM names
WHERE `values` LIKE '\%%' 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/69c51/3)

# javascript - 使用javascript获取文件输入？

> ID：11821542
> 
> 赞同：1
> 
> 时间：2012-08-06T01:21:23.673
> 
> 标签：javascript, jquery

我在 HTML 中有这一行：

```
<input class="input-file" type="file" id="input-recipe-pic"> 
```

在用户选择要上传的文件并按下提交按钮后，我试图从上面的文件输入标签中获取他们选择的文件。如何使用 javascript 获取文件，以便稍后通过 AJAX 发送它以避免页面重新加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T01:35:18.090

在 HTML5 File API 出现之前，如果没有 iframe hack，这是不可能的。使用 HTML5 File API，你可以做到

```
$(".input-file").change(function() {
    var file = this.files[0];
    var reader = new FileReader();
    reader.onload = function() {
        alert(reader.result);
    };
    reader.readAsText(file);
}); 
```

请注意，这仅适用于支持 HTML5 文件 API 的浏览器，例如 Chrome。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:26:20.493

您可以使用许多上传插件，例如[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

您可以导航到源代码并查看它是如何完成的。

```
<input type="file" id="myFile" />
$('#myFile').bind('change', function() {
    alert(this.files[0].size);
}); 
```

# python - 从 python json 字典中调用 unicode 会返回关键错误？

> ID：11821543
> 
> 赞同：0
> 
> 时间：2012-08-06T01:21:25.190
> 
> 标签：python, json, dictionary

所以我一直在尝试编写一个应用程序来获取 Reddit JSON 并将其解析为一个不错的列表。然而这本字典很奇怪，所以我一直在解析它以尝试让它工作。

每当我尝试时，我都会收到 u'data' 的 KeyError（已测试，它是第一个）

回想一下，我正在尝试`self.openit[u'data'][u'children'][i][u'data'][u'title']`
当我在没有 u 的情况下尝试时，同样的事情会发生。感谢所有帮助！

编辑：我很笨，忘记了 json，在这里你把它当作一个 pastebin，因为这很长

[http://pastebin.com/0Yyb2BxJ](http://pastebin.com/0Yyb2BxJ)

# objective-c - 在单个应用程序中连接到多个 USB 蓝牙 4.0 加密狗

> ID：11821547
> 
> 赞同：0
> 
> 时间：2012-08-06T01:21:57.123
> 
> 标签：objective-c, cocoa, bluetooth, core-bluetooth, bluetooth-lowenergy

我遇到了一个硬件问题，连接多个蓝牙 LE 设备会导致瓶颈，我无法连接超过 5 或 6 个而没有问题。我有可以连接到我的 Mac 的外部 USB 蓝牙 4.0 (LE) 加密狗。我知道 IOS 模拟器要求您有一个外部 USB 加密狗才能在模拟器中使用蓝牙。

有没有办法以编程方式和可靠地附加到其他加密狗？

# php - PHP 和函数范围

> ID：11821548
> 
> 赞同：3
> 
> 时间：2012-08-06T01:21:57.703
> 
> 标签：php, function, scope

我想知道当我这样做时到底会发生什么：

```
$my_variable = 'foo';
function whatever(){
    $my_variable = 'bar';
    global $my_variable;
} 
```

我知道，`$my_variable`现在函数范围内是'foo'。

内部发生了什么？当我 `$my_variable = 'bar';`在函数内部执行时，我创建了一个局部变量。当我`global $my_variable;`在下一行做时，究竟会发生什么？本地的会自动删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:35:49.573

**是**的，本地变量会被自动删除或者可能更好的措辞，它被替换为全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T01:28:48.313

在`global`处理之前，该函数将使用变量的本地`bar`副本。一旦它被声明为全局版本，本地版本就会被隐藏（或者可能被破坏，不确定......）并且只有全局版本可用。例如：

```
$z = 'foo';
function whatever() {
    echo $z; // warning: undefined variable
    $z = 'bar';
    echo $z; // bar
    global $z;
    echo $z; // foo
}
whatever(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:06:17.410

可以这样想：

```
$GLOBALS['my_variable'] = 'foo';
function whatever(){
    $my_variable = 'bar';
    $my_variable = $GLOBALS['my_variable'];
} 
```

# c# - 在 DropDownList 中回发时 SelectedValue 失败

> ID：11821549
> 
> 赞同：6
> 
> 时间：2012-08-06T01:22:18.200
> 
> 标签：c#, asp.net, postback, selectedvalue, html-select

我最近在 ASP.NET DropDownList 中发现了一个奇怪的行为，希望有人能解释一下。

基本上我遇到的问题是在回发之前进行数据绑定，然后将其设置为数据`SelectedValue`项列表中不存在的值，调用根本没有效果。但是，在回发时，相同的调用将失败并显示`ArgumentOutOfRangeException()`

*'cmbCountry' 有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值*

我正在使用以下代码。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        cmbCountry.DataSource = GetCountries();
        cmbCountry.DataBind();

        cmbCountry.SelectedValue = ""; //No effect
    }
    else
    {
        cmbCountry.SelectedValue = ""; //ArgumentOutOfRangeException is thrown
    }
}

protected List<Country> GetCountries()
{
    List<Country> result = new List<Country>();

    result.Add(new Country() { ID = Guid.NewGuid(), Description = "Test" });
    result.Add(new Country() { ID = Guid.NewGuid(), Description = "Test1" });
    result.Add(new Country() { ID = Guid.NewGuid(), Description = "Test2" });
    result.Add(new Country() { ID = Guid.NewGuid(), Description = "Test3" });

    return result;
}

public class Country
{
    public Country() { }
    public Guid ID { get; set; }
    public string Description { get; set; }
} 
```

有人可以为我澄清这种行为的原因并建议是否有任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:18:50.103

我不知道为什么它是这样设计的，但是 DropDownList 只在 PostBack 上抛出这个异常......这是来自 ILSpy 的设置器代码：

```
public virtual string SelectedValue
{
    get { ... }
    set
    {
        if (this.Items.Count != 0)
        {
            if (value == null || (base.DesignMode && value.Length == 0))
            {
                        this.ClearSelection();
                return;
            }
            ListItem listItem = this.Items.FindByValue(value);

/********** Checks IsPostBack here **********/
            bool flag = this.Page != null &&
                        this.Page.IsPostBack &&
                        this._stateLoaded;
            if (flag && listItem == null)
            {
                throw new ArgumentOutOfRangeException("value",
                    SR.GetString("ListControl_SelectionOutOfRange", new object[]
                        {
                            this.ID,
                            "SelectedValue"
                        }));
            }
            if (listItem != null)
            {
                this.ClearSelection();
                listItem.Selected = true;
            }
        }
        this.cachedSelectedValue = value;
    }
} 
```

您可以通过将 SelectedValue 设置为 null 而不是空字符串来解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T01:30:30.317

[DropDownList](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx) > [SelectedValue 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)> **ArgumentOutOfRangeException**

> 所选值不在可用值列表中，并且已加载视图状态或其他状态（已执行回发）。有关详细信息，请参阅备注部分。

资料来源：MSDN

DropDownList > SelectedValue 属性 >**备注**

> (...) 当所选值不在可用值列表中并执行回发时，将引发 ArgumentOutOfRangeException 异常。(...)

资料来源：MSDN

另外，我做了以下测试：

1.  上`!IsPostBack`，添加了一个包含 4 个项目的列表作为数据源，ID 为 1~4
2.  放`SelectedValue = 5`
3.  添加了一个新项目，使用`combo.Items.Add(new ListItem()...)`ID 5

我希望将 ID 5 视为组合中的当前选定项目，但它没有发生。

毕竟，看起来这种行为是*设计使然*。我没有找到更多的信息，所以以下只是我的想法：感觉就像在任意设置控件的数据源之后，开发人员可以自由选择一个不存在的项目，这将没有任何效果。然而，在回发处理上绑定视图状态后，控件的列表被*验证*（或类似的东西），因此必须相应地对其进行操作。

# html - Firefox 14 下的 CSS3 动画

> ID：11821553
> 
> 赞同：0
> 
> 时间：2012-08-06T01:22:39.243
> 
> 标签：html, firefox, css, css-animations

我在使用以下动画时遇到问题：

```
.anim {
    -moz-animation-delay: 0s;
    -moz-animation-iteration-count: infinite;
    -moz-animation-duration: 6s;
    -moz-animation-fill-mode: forwards;
    -moz-animation-name: animation_1;
    -moz-animation-play-state: running;
    -moz-animation-timing-function: linear;
    -moz-transform-origin: right top;
    background-image:url("http://jsfiddle.net/css/../img/logo.png");    
    height:25px;
    width:  160px;
    z-index: 1;
    position: absolute;

}

.container {
    left: 100px;
    top: 100px;
    position: absolute;
}

@-moz-keyframes animation_1 {
    0% {
        opacity: 1;
        left:29.45px;
        top:0;
        -moz-transform: rotate(0deg) scale(2,2);
    }

    100% {
        top:0;
        opacity: 0.5;
        left:120px;
        top:120px;
        -moz-transform: rotate(90deg) scale(0.5,0.5);
    }
} 
```

你可以在这里看到小提琴：http: [//jsfiddle.net/QTeXG/5/](http://jsfiddle.net/QTeXG/5/)

好吧，同样的动画适用于 Chrome 21：http: [//jsfiddle.net/P2dKE/](http://jsfiddle.net/P2dKE/)

如果我： - 从 Firefox 中的动画中删除不透明度，它开始正常工作。- 删除背景图像并使用背景颜色，它也开始正常工作。

在 Ubuntu 12.04、Firefox 14.0.1 和 Chrome 21.0.1180.57 下测试。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:06:56.060

这在 Firefox 的 >= 15 版本中得到解决。

# spring - 在 Spring Web 中为 FreeMarker 配置一个 BeanWrapper

> ID：11821556
> 
> 赞同：1
> 
> 时间：2012-08-06T01:24:06.890
> 
> 标签：spring, freemarker

```
<bean id="beansWrapper" class="freemarker.ext.beans.BeansWrapper">
<property name="exposeFields" value="true" />
</bean>

<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freema rker.FreeMarkerConfigurer">
<property name="objectWrapper">
<ref local="beansWrapper" />
</property>
<property name="templateLoaderPath">
<value>/WEB-INF/views/</value>
</property>
</bean> 
```

这不起作用，我得到一个例外：

org.springframework.beans.NotWritablePropertyException：bean 类 [org.springframework.web.servlet.view.freemarker.Fr eeMarkerConfigurer] 的无效属性“objectWrapper”：Bean 属性“objectWrapper”不可写或设置方法无效。setter 的参数类型是否与 getter 的返回类型匹配？

setObjectWrapper 需要一个 ObjectWrapper 的实例，我以为我在这个配置中传递了一个。

* * *

根据回复的建议（在编辑我的问题时我看不到，很抱歉没有注明出处），我尝试了这个：

```
<bean id="beansWrapper" class="freemarker.ext.beans.BeansWrapper">
    <property name="exposeFields" value="true" />
</bean> 

<bean id="freemarkerAppConfig" class="freemarker.template.Configuration">
    <property name="objectWrapper">
        <ref local="beansWrapper"/>
    </property>
</bean>

<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
   <property name="configuration">
       <ref local="freemarkerAppConfig" />
   </property>
    <property name="templateLoaderPath">
        <value>/WEB-INF/views/</value>
    </property>
</bean> 
```

但这仍然行不通。如果我没记错的话，通过调用 setConfiguration，FreeMarkerConfigurer 的所有其他属性都会被提供的配置覆盖。

不幸的是，我看不到一种轻松设置模板加载路径的方法，因为配置 bean 需要一个 Dir 对象，而不是字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T01:14:06.600

更多阅读 Spring 文档向我展示了方法：

```
<bean id="beansWrapper" class="freemarker.ext.beans.BeansWrapper">
    <property name="directoryForTemplateLoading" value="WEB-INF/views/" />
    <property name="exposeFields" value="true" />
</bean> 

<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
   <property name="freemarkerVariables">
       <map>
           <entry key="objectWrapper" value-ref="beansWrapper" />
       </map>
   </property>
    <property name="templateLoaderPath">
        <value>/WEB-INF/views/</value>
    </property>
</bean> 
```

如果有人想知道，这样做是为了让 FreeMarker 可以在不需要 getter 和 setter 的情况下访问对象的公共属性。在 Java 中可能不是 kosher，但现在这与 Groovy 配合得更好。

# ipc - 多进程互斥

> ID：11821558
> 
> 赞同：0
> 
> 时间：2012-08-06T01:24:31.433
> 
> 标签：ipc, mutex

我想为我的问题找到解决方案：我有一些使用共享内存来共享数据的进程。对于同步，我使用互斥锁。但是当锁定互斥锁的进程崩溃时，所有其他进程也会崩溃。那么如何避免这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:14:51.080

行为取决于您使用的互斥锁实现（例如 WinAPI、pthreads...）。

例如，在 WinAPI 中，如果一个持有互斥锁的进程在没有释放它的情况下死亡，则等待该互斥锁的其他进程会`WAIT_ABANDONED`从诸如`WaitForSingleObject`. 有可能你没有处理它。

其他库可能有自己的怪癖和实现细节，应该进行相应的审查。

还要确保您谈论的是多进程而不是多线程，因为在单个进程下的多个线程的情况下，在某些实现下，如果该进程的第一个线程死亡 - 该进程中的所有线程也会死亡。

# xml - 当另一个元素嵌入其中时提取节点的值

> ID：11821560
> 
> 赞同：0
> 
> 时间：2012-08-06T01:25:24.463
> 
> 标签：xml, xslt

我正在尝试处理来自另一个系统的 XML 文档，而我得到的 XML 是伪 HTML，我需要将其转换为 HTML。

**示例 XML：**

```
<DOC>
<Paragraph>This text is <bold>bold</bold> and this text is not.</Paragraph>
</DOC> 
```

**所需输出：**

```
<BODY>
<P>This text is <b>bold</b> and this is not.</P>
</BODY> 
```

使用 node() 值我能够在标记之前获取节点的值（此文本是 ），但我无法编写模板帽子将在标记之前处理部分节点，处理标记，然后返回到其余部分价值。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:06:56.110

```
<xsl:template match="@*|node()">
  <xsl:copy>
     <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="DOC">
    <BODY><xsl:apply-templates/></BODY>
</xsl:template>

<xsl:template match="Paragraph">
    <P><xsl:apply-templates/></P>
</xsl:template>

<xsl:template match="bold">
    <b><xsl:apply-templates/></b>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:14:47.897

你尝试了什么？应该不会比

```
<xsl:template match="DOC">
    <BODY><xsl:apply-templates/></BODY>
</xsl:template>

<xsl:template match="Paragraph">
    <P><xsl:apply-templates/></P>
</xsl:template>

<xsl:template match="bold">
    <b><xsl:apply-templates/></b>
</xsl:template> 
```

# google-geocoding-api - HTML 5 Geolocation API 和 Google 地理编码条款和使用限制

> ID：11821563
> 
> 赞同：0
> 
> 时间：2012-08-06T01:25:53.223
> 
> 标签：google-geocoding-api

如果我在我的网站上使用 HTML 5 Geolocation API，并且如果网站访问者的网络浏览器使用 Google Geolocation Services（例如 Google Chrome）来检测他/她的位置，我是否仍受 Google Geocoding API 的条款和使用限制的约束？如果我不直接使用它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:24:31.803

通过 Chrome 提供的 Google 地理定位服务不是 Google Maps API 地理编码服务。这是一项不同的服务，据我所知，它绑定的是用户而不是网站创建者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T02:35:14.933

它与谷歌地理定位 api 不同。它应来自 w3.org，因此没有限制。

# python - 在 XML 中定义的 tree_but_open 事件之后调用 Python 方法时，Python pdb 调试器会感到困惑

> ID：11821565
> 
> 赞同：0
> 
> 时间：2012-08-06T01:26:18.033
> 
> 标签：python, openerp

我正在使用 Python 2.7.3 在 OpenERP 中调试一些东西。使用 Next (n) 命令单步执行时，调试器似乎与代码不同步。当您键入诸如打印变量之类的调试器命令时，每次执行此操作时它可能会给出不同的答案。单步执行代码时，它似乎也会向后跳过。请参阅下面的代码和输出。

我相信这个问题可能与 OpenERP 通过读取下面 OpenERP XML 中的代码字段通过 Python exec() 语句调用我的方法的方式有关。调用动态构造并通过 exec() 调用的 Python 代码是否可能会混淆 pdb 调试器？当我从 Button 而不是 aa tree_but_open 事件调用该函数时，调试器将逐步执行代码。

如果是这种情况，是否有解决方法？

通过以下 OpenERP 操作调用 CODE：

```
<record id="action_wash_st_method1" model="ir.actions.server">
            <field name="type">ir.actions.server</field>
            <field name="condition">True</field>
            <field name="state">code</field>
            <field name="model_id" ref="model_view_tree_display_address_list"/>
            <field eval="5" name="sequence"/>
            <field name="code">
action = self.view_calc_sales_tax(cr, uid, context)
</field>
           <field name="name">wash state action request</field>
</record>

 <record model="ir.values" id="action_wash_st_tax_trigger_method1" >
            <field name="key2" eval="'tree_but_open'" />
            <field name="model" eval="'view.tree.display.address.list'" />
            <field name="name">Method1 Wash State</field>
            <field name="value" eval="'ir.actions.server,%d'%action_wash_st_method1"/>
            <field name="object" eval="True" />
 </record> 
```

PDB/CODE OUTPUT（请注意，我必须输入“ids”两次才能打印值）：

```
-> ctx["local_rate"] = res1["local_rate"]
(Pdb) n
> /home/glenn2/openerp6.1/addons/6.1/wash_tax2/wash_tax.py(169)view_calc_sales_tax()
-> ctx["code"] = res1["code"]
(Pdb) n
> /home/glenn2/openerp6.1/addons/6.1/wash_tax2/wash_tax.py(172)view_calc_sales_tax()
-> ids = [3333,4444,9999]
(Pdb) n
(Pdb) > /home/glenn2/openerp6.1/addons/6.1/wash_tax2/wash_tax.py(173)view_calc_sales_tax()
-> self.pool.get('account.invoice').button_reset_taxes (cr,uid, ids, ctx)
ids
*** NameError: name 'ids' is not defined
(Pdb) ids
[3333, 4444, 9999]
(Pdb) 
```

附加信息：

我认为这与调试器遇到多线程问题有关。在调用 Python 线程库中的 __bootstrap_inner() 后，问题开始发生。有谁知道是否可以为多个线程启用 Python 调试器：

```
(Pdb) > /home/glenn2/usr/local/lib/python2.7/threading.py(526)__bootstrap()
-> self.__bootstrap_inner()

>(Pdb)  /home/glenn2/usr/local/lib/python2.7/threading.py(526)__bootstrap()->None
-> self.__bootstrap_inner()
self
(Pdb) <Thread(Thread-35, initial)>
self
<Thread(Thread-34, stopped 47994097374976)>
(Pdb) self
(Pdb) <Thread(Thread-34, stopped 47994097374976)>
self
(Pdb) <Thread(Thread-35, initial)>
self
(Pdb) <Thread(Thread-34, stopped 47994097374976)>
self
(Pdb) <Thread(Thread-35, initial)>
self
(Pdb) <Thread(Thread-34, stopped 47994097374976)>
self
<Thread(Thread-35, initial)>
(Pdb) self
(Pdb) <Thread(Thread-34, stopped 47994097374976)> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:30:16.610

我已经在 Eclipse 和 PyDev 中为多个线程使用了 Python 调试器。我最初遇到了一些问题，但 PyDev 团队修补了它们。可能值得尝试 PyDev 看看您的问题是否仍然存在。

[我在另一个答案](https://stackoverflow.com/a/9086069/4794)中发布了一些关于在 PyDev 下设置 OpenERP 的更多细节。

# django - 根据子域使用数据库

> ID：11821567
> 
> 赞同：1
> 
> 时间：2012-08-06T01:26:50.343
> 
> 标签：django, django-orm

是否可以根据每个请求的子域设置数据库名称设置？

在中间件中是这样的：

```
from django.db import connection

company_name = ... # read the subdomain
connection.settings_dict['NAME'] = 'db_' + company_name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:43:37.187

我觉得不行。

您是否正在尝试制作多租户应用程序？看这个问题：

*   [django 上多租户应用程序的最佳架构](https://stackoverflow.com/questions/7194341/optimal-architecture-for-multitenant-application-on-django)

另请参阅[站点框架](https://docs.djangoproject.com/en/dev/ref/contrib/sites/)和[多个数据库](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)（特别是[路由器](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#using-routers)、“[手动选择数据库](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#manually-selecting-a-database)”和“[在 Django 的管理界面中公开多个数据库](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#exposing-multiple-databases-in-django-s-admin-interface)”。

# java - 确保收到`response.getOutputStream().write()`

> ID：11821568
> 
> 赞同：2
> 
> 时间：2012-08-06T01:26:51.303
> 
> 标签：java, http, networking, tcp

我以以下方式编写对 HTTP 请求的响应： `response.getOutputStream().write()`

我想确保客户收到它。

它必须是可能的，因为 TCP 发送确认。

这个要求也意味着写必须是一个阻塞操作（这对我来说很好！）。

那么我怎么知道它是否以上述方式完成（我怀疑不是）？有什么规范可以保证吗？**有什么办法可以做到这一点？**我用的是Tomcat 6。

... PS，我的意思是*除了*让客户端在另一个 HTTP 请求中发送此确认之外的任何方式:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:29:14.163

首先，您可以确保刷新输出流缓冲区：

```
response.getOutputStream().flush(); 
```

它保证数据实际发送出去。TCP 将确保它到达，否则会给您的服务器一个错误，该错误将转换为 IOException。

所以简而言之，如果您可以写入并且没有出错，那么您的客户端确实收到了数据。至少在 TCP 堆栈上。客户端显然负责消费消息。

TCP 提供数据完整性和传递保证。它将继续重传，直到接收方确认接收到数据包。但这一切都发生在 TCP 堆栈内部。您的代码可以假设它发生了，或者您收到了错误。只有这两种情况是可能的。

此外，您可能希望确保关闭输出流，否则您的客户端可能会坐在那里缓冲数据，直到它接收到流的结尾。

我希望这有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T02:53:48.293

TCP 只知道数据已经被对端接收。它不知道对等*应用程序*已收到数据。并且 TCP 写入是异步的，因此在写入或刷新返回到发送应用程序之后很长时间才能检测到错误。

应用程序可以通过另一个 HTTP 事务确认收到，但 HTTP 应该是无状态的，这样做会违反该规则。

我建议你查一下“两军问题”。

相反，您应该做的是使您的事务具有*幂等*性（查找）然后客户有责任确保事务发生。如果客户没有得到响应，他应该只是重复交易。对重试次数设置一个下限，比如两次或三次。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T03:07:20.820

你确定那是你想要的吗？测试写入是否成功？TCP 旨在确保其正常工作，如果数据包失败，您将开始断开连接和 IOExeceptions。事实上，你会得到 RunTimeException。这样做的方法是将响应发送回源。并等到响应到来。

等的时候，保证等了一定时间就放弃了，这样才不会挂。

假设您只想调试代码。如果你想调试使用像 ethereal 这样的数据包嗅探器。相信我，一旦你的逻辑正确，你就不需要 ack 数据包。

# c++ - 从类定义中传递字符串指针

> ID：11821570
> 
> 赞同：0
> 
> 时间：2012-08-06T01:27:06.780
> 
> 标签：c++, string

我遇到的问题是字符串参数。我不确定如何使用它。我只希望分类从一开始就具有未定义的长度字符串，直到用户输入。我得到的错误是**'std :: string classification'的声明**在我输入字符串分类时会隐藏一个参数。将字符串参数传递给类成员的正确方法是什么？

> * * *

```
#include <iostream>
#include <string>
#include <iomanip>

using namespace std;

class Shapes 
{ //Begin Class Definition
      private:

       float side;
       float height;
       int exponent;
       string *classification;

      public:

             Shapes(float side, float height, string * classification);
             //CONSTRUCTOR
             ~Shapes(){};
             //DESTRUCTOR

      float area(float side, float height, string *classification);
      float perimeter(float side, float height, string *classification);

}; // End Class Definition

int power(float side, int exponent)

{
     int i;
     int total[exponent];
     float sum;

     for ( i = 0 ; i < exponent ; i ++ )
     {
      total[i]= side;
      sum *= total[i] ;

     }

     return sum;

}

float Shapes::area(float side, float height, string *classification)

{
     float area=0.0;
    string classification;
     getline(cin,string);

    if (classification == "square" ) 
    {

              area = power(side,2);
              return area;

    } 

      if (classification == "triangle" ) 
    {
         area = (side* height) / 2 ;
         return area;

    } 

      if (classification == "hexagon" ) 
    {
         float constant = 2.598706;

         area= constant * power(side,2);
         return area;

    } 

      if (classification == "circle" ) 
    {

    } 

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:44:34.993

您正在**重新声明**`string`命名的**分类**。您只需在*类声明*中声明该变量一次，即可在所有成员函数中使用它。您还为您的*论点*使用相同的名称，这令人困惑和危险。

您还应该小心您在这里使用**指针**所做的事情，似乎您不确定何时使用它们或使用**引用**。如果您确实尝试`string* classification`像这样比较您的论点`if (classification == "triangle" )`，您会意识到您无法将**std::string* 与 const char*进行比较**

理想情况下，您应该在这里使用**枚举**，就像这样。

```
class Shape
{
  public:
    enum Classification { SQUARE, TRIANGLE, CIRCLE };
}

Shape::Area(float side, float height, Classification shapeClass)
{
  if(shapeClass == SQUARE) {} // Etc
} 
```

甚至比你使用**继承**和**多态性**以及重载函数***更好*******`area()`****

 ****```
class Shape { virtual float Area(); };
class Triangle : public Shape { virtual float Area(); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:45:53.993

在您的代码`Shapes::area`中，您不需要重新定义变量`classification`typed `std::string`，因为`string *classification`那里有一个参数。

您可以使用您的参数`*classification == "circle"`，领先`*`是因为您将参数声明为指针类型。另一种选择是在 C++ 中声明`classification`，`string &classification`这是一个引用。并且带有引用参数，可以直接使用 like `classificaiton == "circle"`。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:43:11.257

> 将字符串参数传递给类成员的正确方法是什么？

不。您已经可以访问类方法中的成员，不需要额外的变量，也不需要将其作为参数传递。

```
float Shapes::area(float side, float height, string *classification)
{
    string classification; 
```

在这种情况下，您有一个名为**的参数**`classification`、**一个同名的成员**和一个同名**的局部变量**。

想想看，你甚至不需要指针。

你需要的是阅读一本 C++ 书籍。我不是在讽刺，也不是刻薄。C++ 很难做到正确，而且您似乎在了解变量或范围的更基本概念之前就已经开始使用指针了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T02:00:18.867

您的参数名称与类成员相同。它们不是同一个变量。

如果你想让类成员成为参数的影子副本，你应该这样做：

```
float Shapes::area(float side, float height, string classification)
{
     float area=0.0;
     this->classification = classification;
     getline(cin,classification);

     //rest goes here
} 
```

这里，`this`是一个指向持有者类的指针。

您将需要更改类声明：

```
class Shapes
{
    string classification;
} 
```

除非确实必要，否则不要使用指向类的指针。如果要更改值，请使用参考。

PS 不要在函数定义的末尾加上分号。****

# r - 有没有办法让 R 函数判断它是从“for”还是“while”循环中调用的？

> ID：11821572
> 
> 赞同：6
> 
> 时间：2012-08-06T01:27:07.700
> 
> 标签：r, for-loop, scope, while-loop

问题的标题几乎说明了这一点：R 函数有没有办法找出它是直接调用还是从`for`or`while`循环内部调用？`sys.frame(0)`或`parent.frame(1)`返回`.GlobalEnv`该函数是直接调用还是从这些循环之一中调用。那么，还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:59:27.563

这不是一个确定的答案，但我认为您的解决方案是`sys.status`查看`sys.parents`. 第二个示例适用于在另一个函数中和循环中调用该函数的情况。在不明确知道的情况下不确定如何区分这一点。

```
test <- function() sys.status()

for(i in 1:2){
  print(test())
 }

## $sys.calls
## $sys.calls[[1]]
## print(test())
## 
## $sys.calls[[2]]
## test()
## 
## $sys.calls[[3]]
## sys.status()
## 
##
## $sys.parents
## [1] 0 0 2
##
## $sys.frames
## $sys.frames[[1]]
## <environment: 0x0479a1c8>
##
## $sys.frames[[2]]
## <environment: 0x0479a2fc>
##
## $sys.frames[[3]]
## <environment: 0x0479a334>
##
##
## $sys.calls
## $sys.calls[[1]]
## print(test())
##
## $sys.calls[[2]]
## test()
## 
## $sys.calls[[3]]
## sys.status()
##
##
## $sys.parents
## [1] 0 0 2
## 
## $sys.frames
## $sys.frames[[1]]
## <environment: 0x047993cc>
## 
## $sys.frames[[2]]
## <environment: 0x04799570>

## $sys.frames[[3]]
## <environment: 0x047995a8> 
```

和

```
test()

## $sys.calls
## $sys.calls[[1]]
## test()
## 
## $sys.calls[[2]]
## sys.status()
## 
## 
## $sys.parents
## [1] 0 1
## 
## $sys.frames
## $sys.frames[[1]]
## <environment: 0x04775500>
##   
##   $sys.frames[[2]]
## <environment: 0x04775538> 
```

和

```
test_sq <- function() test()

for(i in 1:2){
  print(test_sq())
 }

## $sys.calls
## $sys.calls[[1]]
## print(test_sq())
## 
## $sys.calls[[2]]
## test_sq()
## 
## $sys.calls[[3]]
## test()
## 
## $sys.calls[[4]]
## sys.status()
## 
## 
## $sys.parents
## [1] 0 0 2 3
## 
## $sys.frames
## $sys.frames[[1]]
## <environment: 0x04766c60>
##   
##   $sys.frames[[2]]
## <environment: 0x04766dcc>
##   
##   $sys.frames[[3]]
## <environment: 0x04766e04>
##   
##   $sys.frames[[4]]
## <environment: 0x04766e3c>
##   
##   
##   $sys.calls
## $sys.calls[[1]]
## print(test_sq())
## 
## $sys.calls[[2]]
## test_sq()
## 
## $sys.calls[[3]]
## test()
## 
## $sys.calls[[4]]
## sys.status()
## 
## 
## $sys.parents
## [1] 0 0 2 3
## 
## $sys.frames
## $sys.frames[[1]]
## <environment: 0x04765ac8>
##   
##   $sys.frames[[2]]
## <environment: 0x04765c34>
##   
##   $sys.frames[[3]]
## <environment: 0x04765c6c>
##   
##   $sys.frames[[4]]
## <environment: 0x04765d30> 
```

和

```
test_sq()

## $sys.calls
## $sys.calls[[1]]
## test_sq()
## 
## $sys.calls[[2]]
## test()
## 
## $sys.calls[[3]]
## sys.status()
## 
## 
## $sys.parents
## [1] 0 1 2
## 
## $sys.frames
## $sys.frames[[1]]
## <environment: 0x0475ce40>
##   
##   $sys.frames[[2]]
## <environment: 0x0475cee8>
##   
##   $sys.frames[[3]]
## <environment: 0x0475cf20> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T00:46:52.977

不幸的是`for`没有`sys.calls`正常出现。虽然它有点 hack，但您实际上可以 override `for`，使其被包含在内：

```
`for` = function(iter, vec, expr) eval.parent(replace(sys.call(), 1, list(.Primitive('for'))))
in.for = function() '`for`' %in% lapply(sys.calls(), `[[`, 1)
my.fun = function() { print('before'); print(in.for()); print('after') }

my.fun()
# [1] "before"
# [1] FALSE
# [1] "after"
for (x in 1) my.fun()
# [1] "before"
# [1] TRUE
# [1] "after" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:36:02.253

例如，您为什么不只使用可选参数

```
Blah <- function(Param1, OptionalParam = 0){
    if(OptionalParam == 1){
        #Do This
    }else{
        #Do this
    }
    #Everything Else
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T02:28:08.257

哎呀，那还为时过早。事实证明，索引变量在循环后*确实*存在。`for()`该死。

~~唔！我可能有它。~~我已经有一个函数可以用变量的内容替换函数中的任意字符串：

```
replaceincall <- function(xx,from,to){
  # from is a string, to is a name
  if(is.name(xx)){
    ifelse(as.character(xx)==from,return(to),return(xx));
  } else {
    if(is.call(xx)) {
      oo <- lapply(as.list(xx),function(yy) replaceincall(yy,from,to));
      return(as.call(oo));
    } else {
      return(xx);
    }
  }
} 
```

在我的重载`<<-`函数中，我还已经从中提取了`sys.call()`与函数不对应的名称列表。这意味着它们是某种变量。~~我所要做的就是找到那些不在其中的`ls(.GlobalEnv)`那些，那些必须是索引变量，应该用它们在日志条目中的值替换（使用上面的函数）~~。

现在，这可能会捕获并替换循环之外的东西......但这也许是一件好事，因为无论变量不在的原因如何`.GlobalEnv`，它仍然是一个动态变量，因此有一天当我查看日志时，我如果我现在不捕捉它的价值，我会想知道如何重建它。

有人认为这种推理有任何缺陷吗？

# java - 为什么这个按钮在java中不起作用

> ID：11821573
> 
> 赞同：0
> 
> 时间：2012-08-06T01:27:32.427
> 
> 标签：java, swing

我正在制作一个简单的程序，用于检查用户针对数组中的某些值输入的内容。当我运行程序时它没有错误，但是当我单击提交按钮时它不会执行指定的操作。有人可以告诉我如何解决这个问题吗？

```
import javax.swing.*;
import java.awt.event.*;

public class Program1 extends JFrame {

    private JTextField textfield;

    private JButton submitButton;

    int convertedInputScore; 

    String inputScore;

    int[] studentScore = {-1, 40, 50, 60, 70, 80, 100, 101};

    public Program1() {

        this.setSize(600, 250);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setTitle("Student mark checker");

        JPanel panel = new JPanel();

        JLabel label = new JLabel("Type in student mark between 0 and 100, or -1 to end");

        textfield = new JTextField(45);

        submitButton = new JButton("Submit");
        submitButton.addActionListener(clicklistener);

        this.add(panel);
        panel.add(label);
        panel.add(textfield);
        panel.add(submitButton);
        setVisible(true);

    }

    ClickListener clicklistener = new ClickListener();

    private class ClickListener implements ActionListener{

        public void actionPerformed(ActionEvent e) {

            if (e.getSource() == submitButton) {

                String inputScore = textfield.getText();
                int convertedInputScore = Integer.parseInt(inputScore);

                checkInputScore();

            }
        }
    }

    public void checkInputScore() {

        if (convertedInputScore == studentScore[0]) {
            System.exit(0);
        } 

        if (convertedInputScore == studentScore[1]) {
        }
    }

    public static void main(String[] args) {

        new Program1();

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T01:31:27.187

`convertedInputScore`当您似乎只想为其分配新值时，您在动作侦听器中再次声明。改变这个：

```
int convertedInputScore = Integer.parseInt(inputScore); 
```

对此：

```
convertedInputScore = Integer.parseInt(inputScore); 
```

# c# - 将 Kinect 与 Emgu CV 一起使用

> ID：11821575
> 
> 赞同：4
> 
> 时间：2012-08-06T01:28:34.567
> 
> 标签：c#, kinect, emgucv

使用 EmguCV，要从我们使用的网络摄像头捕获图像：

```
Capture cap = new Capture(0);

Image < Bgr, byte > nextFrame = cap.QueryFrame();

...

... 
```

但我不知道如何从我的 Kinect 捕捉图像，我尝试过`kinectCapture`上课，但它对我不起作用。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T12:01:24.017

基本上，您需要从 ColorStream 中捕获图像并转换为 EmguCV Image 类：

### 从 Windows 位图 (Kinect ColorStream) 转换为 EmguCV 图像：

您有一个 Windows 位图变量，其中包含 Kinect 框架。

```
Bitmap bmap = new Bitmap(weightFrame,HeightFrame,System.Drawing.Imaging.PixelFormat.Format32bppRgb);

...

//Here is the code where you capture the image in the ColorFrameReady....

...

Image<Bgr,Byte> frameActualKinect = bmap.ToOpenCVImage<Bgr, Byte>(); 
```

### 进行检测：

调整大小

```
currentFrame = frameActualKinect.Resize(320, 240, Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC);

//Convert it to Grayscale

gray = currentFrame.Convert<Gray, Byte>();

//Face Detector

MCvAvgComp[][] facesDetected = gray.DetectHaarCascade(face, 1.2, 10, Emgu.CV.CvEnum.HAAR_DETECTION_TYPE.DO_CANNY_PRUNING,new System.Drawing.Size(20, 20)); 
```

PD（辅助方法）：

```
public static Image<TColor, TDepth> ToOpenCVImage<TColor, TDepth>(this Bitmap bitmap)
        where TColor : struct, IColor
        where TDepth : new()
    {
        return new Image<TColor, TDepth>(bitmap);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:40:14.743

使用 EmguCV 时，您通常使用另一个库来访问 Kinect。例如，[Kinect For Windows SDK](http://kinectforwindows.org)或[OpenNI](http://openni.org)。然后在使用 OpenNI 或 SDK 访问相机后，您可以使用 EmguCV 的工具编辑您在屏幕上投影的图像。这是一些如何将 EmguCV 与 OpenNI 和 SDK 一起使用的链接

*   [https://groups.google.com/forum/#!topic/openni-dev/I0InsNgIIz4](https://groups.google.com/forum/#!topic/openni-dev/I0InsNgIIz4)
*   [http://www.geek-press.com/?p=23（SDK](http://www.geek-press.com/?p=23) beta 2）
*   [Emgu CV 和官方的 Microsoft Kinect SDK？](https://stackoverflow.com/questions/7150940/emgu-cv-and-the-official-microsoft-kinect-sdk)

希望这可以帮助！

# java - 调用构造函数时覆盖方法

> ID：11821576
> 
> 赞同：1
> 
> 时间：2012-08-06T01:28:44.100
> 
> 标签：java, class

我看到了这些代码。

我从未见过这样的构造函数，但我猜它创建了一个带有抽象方法实现的新 A 实例。

这叫什么？

```
new A() {
    @Override
    public void onEvent() {
        dosomething();
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T01:34:18.413

你指的是**匿名类**吗？当您提供实现但从未定义命名类时。换句话说，您正在就地提供对象；你不能在其他地方重用这个定义，因为你从来没有写过`class MyClass {}`，这就是为什么它是“匿名的”。

[看到这个。](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:44:00.417

这是一个 A 类型的对象，它覆盖了 A 类的 onEvent 方法。这称为匿名类，它覆盖了一个方法

# c# - windows phone 上的中断后退按钮

> ID：11821577
> 
> 赞同：0
> 
> 时间：2012-08-06T01:28:46.903
> 
> 标签：c#, windows-phone-7

当用户离开我的页面然后使用后退按钮返回页面时，我希望他们被重定向到不同的页面，有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:25:20.303

是的，通过快速的 google 搜索或 StackOverflow 搜索，您会找到它。但是，由于我心情很好：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    if (DecoderPrompt.IsOpen)         
    {
        e.Cancel = true;
        // Navigate to different page:
        NavigationService.Navigate(new Uri("/View/YourView.xaml", UriKind.Relative));
    } 
```

# javascript - 警报声明不起作用

> ID：11821583
> 
> 赞同：1
> 
> 时间：2012-08-06T01:30:28.023
> 
> 标签：javascript, if-statement, alert, modernizr

这是我的代码：

```
alert("First");
if (!Modernizr.inputtypes.color) {
    alert("This form is optimized for a browser that supports html5\. Using anything else may produce unexpected results. Use at your own risk.\n\nThis bowser doesn't appear to support html5.");
} else {
    alert("Second");
}
alert("Third"); 
```

这是在第一次加载页面时运行的。第一个警报语句正常工作。第二个和第三个根本没有运行。我已经在 Chrome、Firefox 和 Internet Explorer 中尝试过，并且在所有这些中都得到了相同的结果。也许 Modernizr 搞砸了？我不知道，我只是复制并粘贴了代码。我可能犯了一个非常明显的错误。（我以前做过）提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:34:42.797

我猜是`Modernizr`或者`Modernizr.inputtypes`是`undefined`（可能是因为它没有在这段代码之前加载），所以`Modernizr.inputtypes.color`给出了一个错误。因此，以下行（包括第二条和第三条`alert`语句）将不会被执行。

# android - 在Android中强制关闭

> ID：11821585
> 
> 赞同：2
> 
> 时间：2012-08-06T01:30:36.247
> 
> 标签：android, android-activity, crash, forceclose

运行我的应用程序时出现空指针异常，我必须强制关闭。我想我无法以正确的形式管理数据库。

```
package sarah.android;

import android.R.integer;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class SelesMeter2Activity extends Activity implements OnClickListener {
    EditText ed1;
    EditText ed2;
    Button b1;
    Button b2;
    Intent in;
    signup obj=new signup();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ed1=(EditText) findViewById(R.id.ed1);
        ed2=(EditText) findViewById(R.id.ed2);
        b1= (Button) findViewById(R.id.bt1);
        b2= (Button) findViewById(R.id.bt2);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        //log in
        if (arg0.getId() == R.id.bt1)
        {
            String name=ed1.getText().toString();
            int pass = Integer.parseInt(ed2.getText().toString());
            if (obj.c.getString(0) == name&&obj.c.getInt(1) == pass)
            {
                in = new Intent(this,secondview.class);
                startActivity(in);
            }
            else
            {
                Toast.makeText(this, "please sing up first", 1000).show();
            }
        }
        else
            if (arg0.getId()==R.id.bt2)
            {
                in=new Intent(this,signup.class);
                startActivity(in);
            }
    }
} 
```

用于注册新用户并将他们的信息放入我的数据库的第二个活动：

```
package sarah.android;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.widget.Toast;

public class signup extends Activity {
    SQLiteDatabase sql;
    Cursor c;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.singupx);
        Intent in = getIntent();
        Bundle b = in.getExtras();
        String n = b.getString("x");
        int p = Integer.valueOf(b.getString("y"));

        sql = openOrCreateDatabase("db",0, null);
        sql.execSQL("CREATE TABLE if not exists employee " +
                    " (name text NOT NULL UNIQUE" +
                    ",password integer NOT NULL UNIQUE)");
        sql.execSQL("insert into employee(name) values(" +
                    "'"+n+"') ");
        Toast.makeText(this,"Data inserted", 1000).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T02:44:00.797

这……很简单。在您的第一个活动中，您没有投入`"x"`或`"y"`投入意图。在第二个活动中，你试图得到它们。

```
...
Bundle b=in.getExtras(); // perhaps this is null
String n=b.getString("x"); // or this one
int p=Integer.valueOf(b.getString("y")); // or this one 
```

# php - PHP使用函数获取数组的一部分

> ID：11821598
> 
> 赞同：-2
> 
> 时间：2012-08-06T01:33:25.557
> 
> 标签：php, arrays

我有一个这样的数组：

```
$a1 = array(
    array('id'=>"1","others"=>"asdhuisah"),
    array('id'=>"4","others"=>"asdhuisah"),
    array('id'=>"213","others"=>"asdhuisah")
); 
```

我想将它的一部分保存到一个新的数组`$a2`中。

我知道我可以使用循环来做到这一点：

```
$a2 = array();
foreach($a1 as $key=>$value){
    array_push($a2,$value["id"]);
} 
```

有没有我可以用来一次完成所有这些的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:42:20.000

试试这个：

```
$fun_id = function($value){

    return $value["id"];

} ;

$a2 = array_map($fun_id, $a1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:44:52.213

您可以使用 array_map 和 lambda 函数：

```
$return_id = function($item) {
  return $item['id'];
};
$ids_array = array_map($return_id, $a1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:04:20.457

我认为 array_slice [http://www.php.net/manual/en/function.array-slice.php](http://www.php.net/manual/en/function.array-slice.php)可以为你做。

# php - 获取时间戳的时区

> ID：11821601
> 
> 赞同：0
> 
> 时间：2012-08-06T01:33:50.800
> 
> 标签：php, timezone, gmt

我想获得一个时间的时区，与当地时间相同，但在另一个 GMT 地区。

这是我认为会起作用的：

```
ceil((strtotime($scores[$i]['date'].' '.$scores[$i]['time'])-strtotime(date('d F Y H:i',strtotime("-2 hours"))))/3600) 
```

但它给了我-26和-22等..

链接到测试站点，用于测试数据：[链接已删除]

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:04:48.010

我找到了这个的逻辑，但我不知道为什么这样做，但现在，它工作正常......

编码：

> if(ceil((strtotime($scores[$i]['date'].''.$scores[$i]['time'])-strtotime(date('d FYH:i',strtotime("- 2 小时"))))/3600)<-12){
> 
> echo (ceil((strtotime($scores[$i]['date'].' '.$scores[$i]['time'])-strtotime(date('d FYH:i',strtotime("- 2 小时"))))/3600))+24；
> 
> }别的{
> 
> echo ceil((strtotime($scores[$i]['date'].' '.$scores[$i]['time'])-strtotime(date('d FYH:i',strtotime("-2小时"))))/3600); }

:)

# optimization - 完全禁用 NVCC 上的优化

> ID：11821605
> 
> 赞同：3
> 
> 时间：2012-08-06T01:34:23.887
> 
> 标签：optimization, cuda, gpu, nvcc

我正在尝试在我的 GPU 上测量峰值单精度触发器，因为我正在修改 PTX 文件以在寄存器上执行连续的 MAD 指令。不幸的是，编译器正在删除所有代码，因为它实际上没有任何用处，因为我没有执行任何数据加载/存储。是否有编译器标志或编译指示添加到代码中，以便编译器不会触及它？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T16:17:44.627

要完全禁用 nvcc 优化，您可以使用以下命令：

```
nvcc -O0 -Xopencc -O0 -Xptxas -O0  // sm_1x targets using Open64 frontend
nvcc -O0 -Xcicc -O0 -Xptxas -O0 // sm_2x and sm_3x targets using NVVM frontend 
```

请注意，生成的代码可能非常慢。-O0 标志被传递给主机编译器以禁用主机代码优化。-Xopencc -O0 和 -Xcicc -O0 标志控制编译器前端（产生 PTX 的部分）并在那里关闭优化。-Xptxas -O0 标志控制编译器后端（将 PTX 转换为机器代码的部分）并关闭该部分的优化。请注意，-Xopencc、-Xcicc 和 -Xptxas 标志是组件级标志，除非在 nvcc 手册中记录，否则应视为不受支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T04:40:47.807

我认为没有任何方法可以在编译器中关闭这种优化。您可以通过添加代码来存储您的值并将该代码包装在始终为假的条件语句中来解决此问题。要使编译器无法确定始终为假的条件，请至少使用一个变量（而不仅仅是常量）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T08:47:01.177

（我还在CUDA 4.0，可能随着新版本发生了变化）

要禁用`ptxas`（将 ptx 转换为 cubin 的工具）的优化，您需要传递一个选项`--opt-level 0`（默认为`--opt-level 3`）。如果你想通过这个选项，`nvcc`你需要在它前面加上`--ptxas-options`.

但是请注意，这`ptxas`会进行很多有用的优化——当禁用时——如果完全不正确，可能会使您的代码变得更慢！例如，它进行寄存器分配并尝试预测共享内存和全局内存的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-27T03:10:11.507

这些对我有用：

`-g -G -Xcompiler -O0 -Xptxas -O0 -lineinfo -O0`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-06T04:29:17.100

据我所知，没有编译器标志或编译指示。但你可以计算更多，存储更少

# google-apps-script - 什么是速记指南？想用 Xml.parseJS()

> ID：11821613
> 
> 赞同：0
> 
> 时间：2012-08-06T01:35:53.387
> 
> 标签：google-apps-script

谁能告诉我在哪里可以找到这里提到的“短手指南”：

[https://developers.google.com/apps-script/class_xml#parseJS](https://developers.google.com/apps-script/class_xml#parseJS)

```
function createXmlDocument() {
  var elementName   = 'customerName';
  var customerName = 'Bad Boys Inc.';
  var parseJSparameter = [elementName, customerName];
  var xmlDoc = Xml.parseJS(parseJSparameter);
  var textOfXml = xmlDoc.toXmlString();
  Logger.log(textOfXml);
}

function createXmlDocument2() {
  var shortHand = ['customer', 
                   {'active' : 'true'},
                   ['name', 'Bad Boys Inc.'], 
                   ['customerId', '6060']
                  ];
  var xmlDoc = Xml.parseJS(shortHand);
  var textOfXml = shortHand.toXmlString();
  Logger.log(textOfXml);
} 
```

createXmlDocument 有效，但 createXmlDocument2 无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:12:04.037

当我有同样的问题时，我唯一能找到的是肥皂概述的第 2 节：

[https://developers.google.com/apps-script/soap_overview](https://developers.google.com/apps-script/soap_overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:10:21.630

毫不奇怪，后一个片段不起作用，因为其中有一些错误。试试这个：

```
function createXmlDocument2() {
    var shortHand = ['customer', 
                      ['active' , 'true'],
                      ['name', 'Bad Boys Inc.'], 
                      ['customerId', '6060']
                    ];
    var xmlDoc = Xml.parseJS(shortHand);
    var textOfXml = xmlDoc.toXmlString();
    Logger.log(textOfXml);
} 
```

# xml - Xslt：通过参数动态创建根元素

> ID：11821618
> 
> 赞同：1
> 
> 时间：2012-08-06T01:36:20.423
> 
> 标签：xml, xslt, xpath, xslt-1.0, xml-namespaces

以下是 XML 数据中的节点

```
<ProcessData
 <WebServiceUrl>"http://webser.part.site"</WebServiceUrl>
<UserName>nida</UserName>
<Passsword>123</Password>
</ProcessData> 
```

我已将此节点值传递给 Xslt 服务，现在我在参数中有此 url 节点值，例如

```
<xsl:param name="UserName"/>
<xsl:param name="Password"/>
<xsl:param name="WebServiceUrl"/> 
```

现在我想创建一个 soapenv:Envelope 标签并在其中使用这个值

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="$WebServiceUrl"> 
```

所以我想从 XSLT 代码中得到的最终输出是：

```
enter code here
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"          xmlns:web="http://webservice2.partner.insite">
 <soapenv:Header/>
<soapenv:Body>
<web:upload>
<web:username>nida</web:username>
<web:password>123</web:password>
</web:upload></soapenv:Body></soapenv:Envelope> 
```

当我应用这个 XSLT

**这种转变**：

```
<xsl:stylesheet version="1.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:ext="http://exslt.org/common"
     xmlns:soapenv="http:/`enter code here`/schemas.xmlsoap.org/soap/envelope/"
     exclude-result-prefixes="ext soapenv">
        <xsl:output omit-xml-declaration="yes" indent="yes"/>
      <xsl:param name="pUserName" select="'nida'"/>
      <xsl:param name="pPassword" select="'123'"/>
      <xsl:param name="pWebServiceUrl" select="'http://webser.part.site'"/>

        <xsl:variable name="vrtfDummy">
         <xsl:element name="web:dummy" namespace="{$pWebServiceUrl}"/>
        </xsl:variable>

        <xsl:variable name="vNS" select="ext:node-set($vrtfDummy)/*/namespace::web"/>

     <xsl:template match="/*">
       <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
           <xsl:copy-of select="$vNS"/>
         <soapenv:Body>
           <xsl:element name="web:upload" namespace="{$vNS}">
             <xsl:element name="web:username" namespace="{$vNS}">
               <xsl:value-of select="$pUserName"/>
             </xsl:element>
             <xsl:element name="web:password" namespace="{$vNS}">
               <xsl:value-of select="$pPassword"/>
             </xsl:element>
           </xsl:element>
         </soapenv:Body>
         </soapenv:Envelope>
     </xsl:template>
</xsl:stylesheet> 
```

**请帮助我，**因为我正在寻找几天的解决方案，所以我遇到了真正的麻烦。我是 XSLT 的新手，所以我不太了解它。请帮助我实现所需的输出。

**当我将上述 XSLT 代码应用于给定的 XML 时，我得到以下不正确的输出。**

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
 <soapenv:Body>
    <web:upload xmlns:web="http://webser.part.site">
   <web:username>nida</web:username>
    <web:password>123</web:password>
   </web:upload>
       </soapenv:Body>
    </soapenv:Envelope> 
```

**我想要的输出如下：**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"          xmlns:web="http://webservice2.partner.insite">
 <soapenv:Header/>
<soapenv:Body>
<web:upload>
<web:username>nida</web:username>
<web:password>123</web:password>
 </web:upload></soapenv:Body></soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:17:10.820

Nida、AFAIK、XMLSPY 没有任何`xxx:node-set()`扩展名。

**尝试**：

```
<xsl:variable name="vNS" select="$vrtfDummy/*/namespace::web"/> 
```

或者，如果这仍然导致错误，请尝试使用 MSXML 或 Saxon 命名空间和`xxx:node-set()`函数。

# android - 适用于 iOS 和 Android 的增强现实 SDK

> ID：11821620
> 
> 赞同：0
> 
> 时间：2012-08-06T01:36:32.690
> 
> 标签：android, iphone, unity3d, augmented-reality

有人知道同时支持 iOS 和 Android 的增强现实 SDK 吗？我需要做的是检测对象的类别，并基于真实世界对象之上的类类型位置信息（文本和图像）。我见过一些像 Vuforia 这样的库，但它们检测图像和特征而不是对象类。

基本上我想实现类似于 Google Goggles 地标搜索功能的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:23:44.017

你可以试试 Qualcomm 的[Vuforia](http://www.qualcomm.com/solutions/augmented-reality) SDK。看起来很有希望，Google Play 和 iTunes App Store 上有很多应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:47:21.193

ARToolkit 在 Android 和 iOS 上非常流行。也许你应该做一些进一步的调查。

# heroku - 重定向 URL 以在 Sinatra 中添加尾部斜杠

> ID：11821621
> 
> 赞同：3
> 
> 时间：2012-08-06T01:37:00.867
> 
> 标签：heroku, sinatra, rack, octopress

在 Heroku 上安装我的应用程序。使用[rack-canonical-host](https://github.com/tylerhunt/rack-canonical-host)处理从 myapp.heroku.com 到规范域的重定向。我的域注册商处理来自根域的重定向。

我正在使用 Octopress（一个基于 Jekyll 的框架；Sinatra 在下面运行）并且**我想将所有 URL重定向到*不*带斜杠的斜杠变体。**我会在网络服务器端执行此操作，但我无法使用 Heroku 执行此操作。

我还假设 301 重定向是执行此重定向的最佳实践。

我确实查看了 Sinatra 文档，但似乎默认情况下它是可选的“？” 在您的路线上，但是我的路线没有这种语法，但仍然可以处理有无案例。

这是我目前的`config.ru`：

```
require 'bundler/setup'
require 'sinatra/base'
require 'rack/contrib'
require 'rack-canonical-host'

# The project root directory
$root = ::File.dirname(__FILE__)

class SinatraStaticServer < Sinatra::Base

  get(/.+/) do
    expires 3600, :public, :must_revalidate
    send_sinatra_file(request.path) {404}
  end

  not_found do
    expires 0, :public, :no_cache
    send_sinatra_file('404.html') {"Sorry, I cannot find #{request.path}"}
  end

  def send_sinatra_file(path, &missing_file_block)
    file_path = File.join(File.dirname(__FILE__), 'public',  path)
    file_path = File.join(file_path, 'index.html') unless file_path =~ /\.[a-z]+$/i  
    File.exist?(file_path) ? send_file(file_path) : missing_file_block.call
  end

end

if ENV['CANONICAL_HOST']
  use Rack::CanonicalHost, ENV['CANONICAL_HOST'], ignore: ['media.eatsleeprepeat.net', 'static.eatsleeprepeat.net']
end

use Rack::Deflater

run SinatraStaticServer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:12:01.500

这对我来说适用于向任何没有使用重定向的路由添加尾部斜杠：

```
get %r{(/.*[^\/])$} do
    redirect "#{params[:captures].first}/"
end

get %r{/.*/$} do
    "successful redirect for '#{request.path}'"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T01:44:09.337

没有完整的答案，但我按照您建议的方式使用重定向，例如

```
get '/blog/2012/05/01/delegation/?' do
  redirect '/blog/2012/05/01/effective-delegation/', 301
end 
```

我认为对于类别，octopress 假定为 category/index.html，因此：

```
file_path = File.join(file_path, 'index.html') unless file_path =~ /\.[a-z]+$/i 
```

行，它将 domain.com/category 转换为 domain.com/category/index.html。我相信您的某些带有或不带有斜杠的 URL 继续有效的原因。

希望这有所帮助...

# java - 准备好的语句中的Postgresql数组类型？

> ID：11821622
> 
> 赞同：0
> 
> 时间：2012-08-06T01:37:01.713
> 
> 标签：java, jdbc, prepared-statement

我想执行以下查询：

```
SELECT * FROM public.table1 WHERE arrcol @> ARRAY['someinf']; 
```

为了做到这一点，我在 java.sql.Statement 中尝试了 2 种不同的方法：

```
query = conn.prepareStatement("SELECT * FROM public.table1 WHERE
arrcol @>?;"); query.setArray(1, conn.createArrayOf("text", new
String[]{id})); // "id" is a string 
```

和

```
query = conn.prepareStatement("SELECT * FROM public.table1 WHERE
arrcol @> ARRAY[?];"); query.setString(1, id); // "id" is a string 
```

当我尝试使用 toString() 在这些行之后转储原始 sql 时，我看到查询仍然相同。如何使用准备好的语句实现这一点？

# php - MySQLi 准备好的语句，我不确定哪些变量需要占位符

> ID：11821623
> 
> 赞同：0
> 
> 时间：2012-08-06T01:37:03.300
> 
> 标签：php, mysql, prepared-statement

按照我的查询的正确编码以使用准备好的语句，我有这个查询：

```
$sql = "SELECT *
        FROM photos
        WHERE g_id = ?
        LIMIT $curPage,".$totalPix;
$result = $conn->query($sql) or die(mysqli_error());
$row = $result->fetch_assoc(); 
```

这里的问题是，我应该使用准备好的语句占位符吗？如果是`$curPage`，`$totalPix`我会这样做吗：

```
$sql = "SELECT *
        FROM photos
        WHERE g_id = ?
        LIMIT ?,".?;
$gid = $i; $lm = $v1; $mt = $v2 
$stmt = $conn->prepare($randPic);
$stmt->bind_param('iii', $gid, $lm, $mt);
$stmt->bind_result($p_fname);
$stmt->execute();
$stmt->store_result();
$stmt->fetch(); 
```

...或者是变量`$curPage`而`$totalPix`不是让查询对 SQL 注入开放？提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:52:13.637

您正在使用 ? 在正确的位置（因为它只能用于变量绑定）。`$curPage or $totalPix`但是，简单地放置在您的查询中是不安全的。我假设它们必须是整数，因此确保安全并不难。

用来`intval($curPage) and intval($totalPix)`确定它们是。

但是，如果你想允许字符串，那就有点困难了。不确定这是否是解决方案，但我敢打赌，通过检查它是否是您设计它的目的，将可能的选项“列入白名单”。

例如：`SELECT * FROM sometable WHERE $somevar = ?`变量 ($somevar) 仍然可以`'1 --'`返回所有行。但很可能您的意思是 $somevar = 'id' 或 $somevar = 'email'。这可以通过一些 if 语句轻松检查，并且不会影响性能。也许有点打字，但如果你不想打字，我建议使用一些框架进行查询或某种 ORM。

`if ($somevar !== 'id') exit('Cannot find entries');`在函数或页面的开头

# rest - 是否应该为 REST 服务开发一个客户端库来帮助防止 API 损坏？

> ID：11821624
> 
> 赞同：0
> 
> 时间：2012-08-06T01:37:10.733
> 
> 标签：rest

我们有一个项目，其中 UI 代码将由同一团队开发，但使用与服务层 (REST/Java) 不同的语言 (Python/Django)。每个层的代码存在于不同的代码存储库中，并且可以遵循不同的发布周期。我正在尝试从 UI 层的角度提出一个可以防止/减少服务层中的重大更改的过程。

我曾考虑在 UI 层级别编写集成测试，我们将在构建 UI 或服务层时运行（我们使用 Jenkins 作为我们的 CI 工具来构建两个 Git 存储库中的代码），如果出现故障，然后服务层中的某些内容损坏并且不接受提交。

让服务层的开发人员为 UI 层中存在的 REST 服务创建和维护一个客户端库也是一个好主意（这是一个最佳实践吗？）他们的服务 API？可以想象，我们将获得 UI 代码所依据的静态类型 API 的优势。如果客户端库 API 发生更改，则 UI 代码将无法编译（因此我们会很快知道发生了重大更改）。我还会在构建 UI 或服务层时运行集成测试，以进一步验证 UI 和服务之间的集成是否仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:45:51.590

我相信客户端层是一个非常好的主意，不仅可以管理界面，而且可以方便可能没有正确构建客户端层技能的客户端开发人员。我不同意构建客户端层的人必须是 RESTful 服务器 API 的开发人员。您应该找到具有适当技能的开发人员并将任务分配给他/她。

将成功测试作为提交条件的想法是一个很好的想法，尽管如果您使用 maven，您可以对在整个过程中何时执行这些测试更有选择性。

我对你提出的唯一建议是，你考虑一个轻量级的、基于模板的代码生成器，用于构建服务器、客户端和测试层的任务。M2T Eclipse 项目中的 EMFT JET 是一个非常好的解决方案。您可能喜欢其他代码生成技术。

# javascript - index.html Jquery UI 存档中的按钮不起作用

> ID：11821625
> 
> 赞同：0
> 
> 时间：2012-08-06T01:37:19.477
> 
> 标签：javascript, jquery, css, jquery-ui

今天我刚刚从[http://jqueryui.com/download](http://jqueryui.com/download)下载了一个自定义的 Jquery UI 存档，我解压了它。但是，当我打开存档的 index.html 文件时，我发现此页面上的按钮示例不起作用。该按钮像往常一样呈现，没有任何 UI 样式，此页面中的所有元素的其余部分工作正常。它是来自 JqueryUI 网站下载的错误吗？还是我忘记了什么？！

以下是 index.html 的代码。

```
 <!DOCTYPE html>
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
                <title>jQuery UI Example Page</title>
                <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.22.custom.css" rel="stylesheet" />
                <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
                <script type="text/javascript" src="js/jquery-ui-1.8.22.custom.min.js"></script>
                <script type="text/javascript">
                    $(function(){

                        // Accordion
                        $("#accordion").accordion({ header: "h3" });

                        // Tabs
                        $('#tabs').tabs();

                        // Dialog
                        $('#dialog').dialog({
                            autoOpen: false,
                            width: 600,
                            buttons: {
                                "Ok": function() {
                                    $(this).dialog("close");
                                },
                                "Cancel": function() {
                                    $(this).dialog("close");
                                }
                            }
                        });

                        // Dialog Link
                        $('#dialog_link').click(function(){
                            $('#dialog').dialog('open');
                            return false;
                        });

                        // Datepicker
                        $('#datepicker').datepicker({
                            inline: true
                        });

                        // Slider
                        $('#slider').slider({
                            range: true,
                            values: [17, 67]
                        });

                        // Progressbar
                        $("#progressbar").progressbar({
                            value: 20
                        });

                        //hover states on the static widgets
                        $('#dialog_link, ul#icons li').hover(
                            function() { $(this).addClass('ui-state-hover'); },
                            function() { $(this).removeClass('ui-state-hover'); }
                        );

                    });
                </script>
                <style type="text/css">
                    /*demo page css*/
                    body{ font: 62.5% "Trebuchet MS", sans-serif; margin: 50px;}
                    .demoHeaders { margin-top: 2em; }
                    #dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}
                    #dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}
                    ul#icons {margin: 0; padding: 0;}
                    ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}
                    ul#icons span.ui-icon {float: left; margin: 0 4px;}
                </style>
            </head>
            <body>
            <h1>Welcome to jQuery UI!</h1>
            <p style="font-size: 1.3em; line-height: 1.5; margin: 1em 0; width: 50%;">This page demonstrates the widgets you downloaded using the theme you selected in the download builder. We've included and linked to minified versions of <a href="js/jquery-1.7.2.min.js">jQuery</a>, your personalized copy of <a href="js/jquery-ui-1.8.22.custom.min.js">jQuery UI (js/jquery-ui-1.8.22.custom.min.js)</a>, and <a href="css/ui-lightness/jquery-ui-1.8.22.custom.css">css/ui-lightness/jquery-ui-1.8.22.custom.css</a> which imports the entire jQuery UI CSS Framework. You can choose to link a subset of the CSS Framework depending on your needs. </p>
            <p style="font-size: 1.2em; line-height: 1.5; margin: 1em 0; width: 50%;">You've downloaded components and a theme that are compatible with jQuery 1.3+. Please make sure you are using jQuery 1.3+ in your production environment.</p>

            <p style="font-weight: bold; margin: 2em 0 1em; font-size: 1.3em;">YOUR COMPONENTS:</p>

                <!-- Accordion -->
                <h2 class="demoHeaders">Accordion</h2>
                <div id="accordion">
                    <div>
                        <h3><a href="#">First</a></h3>
                        <div>Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</div>
                    </div>
                    <div>
                        <h3><a href="#">Second</a></h3>
                        <div>Phasellus mattis tincidunt nibh.</div>
                    </div>
                    <div>
                        <h3><a href="#">Third</a></h3>
                        <div>Nam dui erat, auctor a, dignissim quis.</div>
                    </div>
                </div>

                <!-- Autocomplete -->
                <h2 class="demoHeaders">Autocomplete</h2>
                <div>
                    <input id="autocomplete" style="z-index: 100; position: relative" title="type &quot;a&quot;" />
                </div>

                <!-- Button -->
                <h2 class="demoHeaders">Button</h2>
                <button id="button">A button element</button>
                <form style="margin-top: 1em;">
                    <div id="radioset">
                        <input type="radio" id="radio1" name="radio" /><label for="radio1">Choice 1</label>
                        <input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Choice 2</label>
                        <input type="radio" id="radio3" name="radio" /><label for="radio3">Choice 3</label>
                    </div>
                </form>

                <!-- Tabs -->
                <h2 class="demoHeaders">Tabs</h2>
                <div id="tabs">
                    <ul>
                        <li><a href="#tabs-1">First</a></li>
                        <li><a href="#tabs-2">Second</a></li>
                        <li><a href="#tabs-3">Third</a></li>
                    </ul>
                    <div id="tabs-1">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>
                    <div id="tabs-2">Phasellus mattis tincidunt nibh. Cras orci urna, blandit id, pretium vel, aliquet ornare, felis. Maecenas scelerisque sem non nisl. Fusce sed lorem in enim dictum bibendum.</div>
                    <div id="tabs-3">Nam dui erat, auctor a, dignissim quis, sollicitudin eu, felis. Pellentesque nisi urna, interdum eget, sagittis et, consequat vestibulum, lacus. Mauris porttitor ullamcorper augue.</div>
                </div>

                <!-- Dialog NOTE: Dialog is not generated by UI in this demo so it can be visually styled in themeroller-->
                <h2 class="demoHeaders">Dialog</h2>
                <p><a href="#" id="dialog_link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>Open Dialog</a></p>

                <h2 class="demoHeaders">Overlay and Shadow Classes <em>(not currently used in UI widgets)</em></h2>
                <div style="position: relative; width: 96%; height: 200px; padding:1% 4%; overflow:hidden;" class="fakewindowcontain">
                    <p>Lorem ipsum dolor sit amet,  Nulla nec tortor. Donec id elit quis purus consectetur consequat. </p><p>Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. </p><p>Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. </p><p>Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. </p><p>Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. </p><p>Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. </p>

                    <!-- ui-dialog -->
                    <div class="ui-overlay"><div class="ui-widget-overlay"></div><div class="ui-widget-shadow ui-corner-all" style="width: 302px; height: 152px; position: absolute; left: 50px; top: 30px;"></div></div>
                    <div style="position: absolute; width: 280px; height: 130px;left: 50px; top: 30px; padding: 10px;" class="ui-widget ui-widget-content ui-corner-all">
                        <div class="ui-dialog-content ui-widget-content" style="background: none; border: 0;">
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                        </div>
                    </div>

                </div>

                <!-- ui-dialog -->
                <div id="dialog" title="Dialog Title">
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                </div>

                <h2 class="demoHeaders">Framework Icons (content color preview)</h2>
                <ul id="icons" class="ui-widget ui-helper-clearfix">

                <li class="ui-state-default ui-corner-all" title=".ui-icon-carat-1-n"><span class="ui-icon ui-icon-carat-1-n"></span></li>
.........
                .......
                <li class="ui-state-default ui-corner-all" title=".ui-icon-grip-diagonal-se"><span class="ui-icon ui-icon-grip-diagonal-se"></span></li>
                </ul>

                <!-- Slider -->
                <h2 class="demoHeaders">Slider</h2>
                <div id="slider"></div>

                <!-- Datepicker -->
                <h2 class="demoHeaders">Datepicker</h2>
                <div id="datepicker"></div>

                <!-- Progressbar -->
                <h2 class="demoHeaders">Progressbar</h2>
                <div id="progressbar"></div>

                <!-- Highlight / Error -->
                <h2 class="demoHeaders">Highlight / Error</h2>
                <div class="ui-widget">
                    <div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;">
                        <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
                        <strong>Hey!</strong> Sample ui-state-highlight style.</p>
                    </div>
                </div>
                <br/>
                <div class="ui-widget">
                    <div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">
                        <p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
                        <strong>Alert:</strong> Sample ui-state-error style.</p>
                    </div>
                </div>

            </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:48:06.823

在您的 js 代码中，按钮未初始化。尝试在js中输入此代码

```
 $('#button').button(); 
```

在您的情况下， ID`#button`是对这部分 html 的调用

```
<button id="button">A button element</button> 
```

# android - 在每个构建之间，R 中的所有 ID 都是永久的吗？

> ID：11821628
> 
> 赞同：0
> 
> 时间：2012-08-06T01:37:55.383
> 
> 标签：android, android-resources

所有ID都是`R`永久的吗？最近我做了一个游戏，并使用音轨的 ID 保存到`SharedPreferences`. 我想知道这些ID（相同文件的）是否会在下一次构建时更改？你能指点我的文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T01:56:17.863

每次更改资源时都会更改它们。您不应依赖硬编码值（例如将它们保存在 中`SharedPreferences`）。

似乎没有真正的文档说明这一点（请参阅[有关资源的文档](http://developer.android.com/guide/topics/resources/providing-resources.html)），但是您可以通过记录（例如）的`int`值来自己测试`R.id.hello_world`，然后在 XML 文件中前后添加一大堆字符串，然后重建它。值将`int`完全不同。

**编辑**：我确实找到了一些您可能想要阅读[的文档。](http://developer.android.com/guide/topics/resources/accessing-resources.html)它指出：“*您永远不需要查看那里来发现资源 ID* ”；即使在您的情况下，您没有查看此文件，而是直接使用其中的值。

此外，还有一个关于如何生成 ID 的[答案](https://stackoverflow.com/questions/6517151/how-does-the-mapping-between-android-resources-and-resources-id-work?rq=1)，它详细说明了每个生成的 ID 都有一个顺序（包名称、类型名称、资源名称），但是这些是任意生成的。这：“*请注意，默认情况下，aapt 不会尝试在构建之间保持这些标识符相同。* ”

您可能还想通读[此幻灯片](http://www.slideshare.net/aftekandroid/androidresourcemanagerkt)，了解有关 AAPT 和 Android 资源生成过程的更多详细信息。

# macos - Mac OS 应用程序，带有命令行工具的沙箱？

> ID：11821632
> 
> 赞同：26
> 
> 时间：2012-08-06T01:40:00.610
> 
> 标签：macos, sandbox, command-line-tool

我制作了一个包含命令行工具的应用程序。我已启用该应用程序的沙箱，并测试它是否有效。我还对应用程序和命令行工具进行了代码签名。

但是当我将应用程序上传到 iTunes 时，我收到了一封电子邮件，告诉我“应用程序沙箱未启用”。

显然我需要`com.apple.security.app-sandbox`用`true`值设置密钥的授权文件，并列出可执行文件：`/Contents/MacOS/myApp`和 `/contents/Frameworks/x86/myCommandLineTool`.

我确定我已经在 Xcode 中启用了沙箱，所以我认为问题出在命令行工具上。

如何为命令行工具启用沙箱？或者是否有一个特定的文件夹我应该放置该工具？欢迎任何建议 - 我已经为此困扰了好几天。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-25T08:08:57.123

我遇到了同样的问题，经过一些搜索、反复试验，这对我有用：

1.  创建一个授权文件——对我来说，它只是将 com.apple.security.inherit 设置为 YES。我在 xcode 本身中创建了这个文件。

2.  现在使用以下命令签署此命令行工具：

    ```
    codesign --entitlements ./entitlements.plist -s "copy & paste your certificate from keychain" ./commandlinetool 
    ```

3.  可以肯定的是，请使用以下命令进行检查：

    ```
    codesign --display --entitlements - ./commandlinetool 
    ```

4.  该工具已包含在项目中。所以只需编译、存档和提交

状态现在是“等待审核”。

# php - 从文件中删除包含某个字符串的行

> ID：11821634
> 
> 赞同：0
> 
> 时间：2012-08-06T01:40:24.130
> 
> 标签：php, regex, preg-replace, line

我需要从我的日志文件中删除某些字符串。是的，我知道这听起来很落后，但是为了每个人的理智，相信我：没有办法避免这些无用的通知首先被写入登录。

因此，为了使我的日志可读，必须在写入后删除此类通知。

以下是污染日志文件的示例：

```
ERROR - 2012-08-06 02:12:01 --> Severity: Notice  --> Undefined index: H1 /var/www/vhosts/example.com/httpdocs/application/helpers/mpdf/mpdf.php 14242
ERROR - 2012-08-06 02:12:01 --> Severity: Notice  --> Undefined index: H1>>ID>> /var/www/vhosts/example.com/httpdocs/application/helpers/mpdf/mpdf.php 14288
ERROR - 2012-08-06 02:12:01 --> Severity: Notice  --> Undefined index: H1 /var/www/vhosts/example.com/httpdocs/application/helpers/mpdf/mpdf.php 14242
ERROR - 2012-08-06 02:12:01 --> Severity: Notice  --> Undefined index: H1>>ID>> /var/www/vhosts/example.com/httpdocs/application/helpers/mpdf/mpdf.php 14288
ERROR - 2012-08-06 02:12:01 --> Severity: Notice  --> Undefined index: DIV /var/www/vhosts/example.com/httpdocs/application/helpers/mpdf/mpdf.php 14242 
```

我想删除以下行：

*   包含“通知”和
*   包含“未定义”和
*   包含“mpdf.php”

我相信这些方面的事情可能是一个开始：

```
$dir = '/var/www/vhosts/example.com/httpdocs/application/logs/log-2012-07-07.php';

$content = file_get_contents($dir);

$new = preg_replace($pattern, '', $content) // <===== need help here with $pattern regex

file_put_contents($dir, $new); 
```

你对如何做到这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:44:20.663

```
sed -i '/Notice/ { /Undefined/ { /mpdf.php/ d}}' LOG_FILE 
```

更一般的，

```
A="..." B="..." C="..." sed -i "/$A/{/$B/{/$C/ d}}" FILE 
```

将删除所有包含字符串 $A 和 $B 和 $C 的行。

# ios - 如何设置子类 UIButton 的突出显示标题颜色？

> ID：11821636
> 
> 赞同：3
> 
> 时间：2012-08-06T01:40:43.950
> 
> 标签：ios, uibutton

我已经子类`UIButton`化并尝试在按钮突出显示时设置标题颜色。自定义按钮也在 nib 文件上。

我有代码：

```
- (void)layoutSubviews 
{
    [super layoutSubviews];

    self.titleLabel.textColor = [UIColor blueColor];
    [self setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted]; // Offending line

} 
```

`setTitleColor:forState:`但是，当我有线路时，视图不会加载（似乎进入无限循环并且不显示） 。它应该在其他地方声明吗？您如何设置自定义的突出显示标题颜色`UIButton`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T05:05:27.213

如果您想在 layoutSubviews 中执行此操作，这将避免您当前正在创建的无限循环：

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    if (self.state == UIControlStateHighlighted) {
        self.titleLabel.textColor = [UIColor redColor];
    } else {
        self.titleLabel.textColor = [UIColor blueColor];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T11:51:13.463

你还在用 UIButton 子类做其他事情吗？如果您只想更改文本颜色，则可以使用标准 UIButton 功能：

```
[button setTitleColor:[UIColor redColor] forControlState:UIControlStateHighlighted];
[button setTitleColor:[UIColor whiteColor] forControlState:UIControlStateNormal]; 
```

在设置按钮时执行此操作，每次调用 layoutSubviews 时都不需要这样做

# delphi - 关于delphi和dll

> ID：11821637
> 
> 赞同：0
> 
> 时间：2012-08-06T01:40:55.253
> 
> 标签：delphi, delphi-7

```
function：BOOL   IO_GetPageDimension(VOID   *p,   long   *imgwide,   long   *imghigh);

Parameters
p
[in]   Pointer   to   structure   'set_attribute ';
imgwide
[out]   Syscan   scanner   return   accepting   the   scan   width;
imghigh
[out]   Syscan   scanner   return   accepting   the   scan   height;

I defined the following code：
type
set_attribute = Record
  scan_mode:shortint;
  resolution:smallint;          
  brightness:shortint;          
  contrast:shortint;            
  gamma:shortint;               
  highlight:smallint;           
  shadow:smallint;              
  .......
end;

function IO_GetPageDimension(p: set_attribute; imgwide: Longint; imghigh:     Longint):Boolean;stdcall;external 'A8100.dll';
call the following code in form
begin
  p.highlight:= p.scan_mode:= 4;
  p.resolution:=300;        
  p.brightness:= 100;           
  p.contrast:= 80;          
  p.gamma:= 80;200;         
  p.shadow:= 200;           
  IO_GetPageDimension(p: set_attribute; imgwide: Longint; imghigh: Longint);
end; 
```

但该行出现错误：IO_GetPageDimension(p: set_attribute; imgwide: Longint; imghigh: Longint); 错误是：没有足够的实际参数

谁能告诉我原因。我想我定义的函数有一些问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:58:51.370

您的代码存在一些重大问题。:-) 这应该让你继续前进。

```
type
  TSet_Attribute = Record
    scan_mode:shortint;
    resolution:smallint;          
    brightness:shortint;          
    contrast:shortint;            
    gamma:shortint;               
    highlight:smallint;           
    shadow:smallint;              
    // remaining declarations here
  end;

function IO_GetPageDimension(const Set_Attribute: TSet_Attribute; 
  var imgwide: LongInt; 
  var imghigh: Longint); BOOL; stdcall; external `A8100.dll`;

var
  SA: TSet_Attribute;
  ImageWidth, ImageHeight: Longint;
begin
  SA.highlight:= 4;  // Whatever value - your code had none
  SA.scan_mode:= 4;
  SA.resolution:=300;        
  SA.brightness:= 100;           
  SA.contrast:= 80;          
  SA.gamma:= 80;200;         
  SA.shadow:= 200;           
  if IO_GetPageDimension(SA, ImageWidth, ImageHeight) then
    // Do whatever with ImageWidth, ImageHeight
end; 
```

# vb.net - 声明新的表单变量类型 VB.NET

> ID：11821638
> 
> 赞同：1
> 
> 时间：2012-08-06T01:41:00.263
> 
> 标签：vb.net, winforms

我试图显示多个表单相等，首先声明一个 Form 类型的变量，然后为变量设置一个名称，然后显示它，但我无法成功。

它不显示任何新窗口。

```
Dim from_var As New Form
from_var = inventory_stat_item

With from_var
    .MdiParent = main
    .StartPosition = FormStartPosition.CenterScreen
    .Show()
End With 
```

**更新：** 变量`from_var`应具有以下形式名称：（inventory_stat_item | inventory_edit_item | inventory_new_item）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:10:15.673

只要您正在创建和更新`Forms`前手，您就应该能够做您想做的事情。像这个快速而肮脏的例子。

```
Public Class Form1
    Dim inventory_stat_item As Form2 = New Form2
    Dim inventory_edit_item As Form3 = New Form3
    Dim inventory_new_item As Form4 = New Form4
    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.

        showForms(inventory_edit_item)
        showForms(inventory_new_item)
        showForms(inventory_stat_item)

    End Sub

    Private Sub showForms(from_var As Form)
        With from_var
            .MdiParent = Me
            .StartPosition = FormStartPosition.CenterScreen
            .Show()

        End With
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:02:41.070

你不能这样做。您调用的每个人`New inventory_stat_item`都创建了新的对象引用。

您必须拆分代码

调用一次（例如：表单加载时）

```
Dim from_var As New inventory_stat_item 
```

当用户点击某物时调用

```
With from_var
    .MdiParent = Me
    .StartPosition = FormStartPosition.CenterScreen
    .Show()
End With 
```

# c# - 如何仅将列表的每个元素与其自身进行一次比较

> ID：11821644
> 
> 赞同：0
> 
> 时间：2012-08-06T01:42:38.307
> 
> 标签：c#, linq, linq-to-objects

不完全确定如何最好地表达这个问题。如何仅将列表的每个元素与同一列表的每个元素进行一次比较。

例如：

```
var textlist = ["a", "b", "c"];
var intersecting = from string a in textlist
                   from string b in textlist
                   where a != b && a.SomeCondition(b)
                   select new
                   {
                       object1 = a,
                       object2 = b
                   }; 
```

假设“a”用“b”为“SomeCondition”提供“True”，我希望最终结果是：

```
[["a, b"]] 
```

而现在它将是：

```
[["a, b"], ["b, a"]] 
```

这可能与 Linq 查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:56:24.830

您可以使用值比较 - 即只处理 a > b 的对。你甚至可以用 替换你`a != b`的`a > b`，因为不等式将被暗示：

```
var textlist = ["a", "b", "c"];
var intersecting = from string a in textlist
               from string b in textlist
               where a > b && (a.SomeCondition(b) || b.SomeCondition(a))
               select new
               {
                   object1 = a,
                   object2 = b
               }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:27:59.873

我通过添加`CompareTo`条件得到了您想要的结果：

```
string[] textlist = new string[] {"a", "b", "c"};
var intersecting =  from string a in textlist
                    from string b in textlist
                    where ((a != b) && (a.CompareTo(b) == -1)) // && a.SomeCondition(b)
                    select new { object1 = a, object2 = b }
                    ;

intersecting.Dump("Result"); 
```

这是结果的屏幕截图

![在此处输入图像描述](../Images/80e9be9e456f5ca5255714c254e251e3.png)

您可以删除多余的内容`//`以取消注释您的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T03:19:48.157

一种方法是将每个元素与位于它之后的元素进行比较：

```
string[] textlist = {"a", "b", "c"};
var intersecting = from aIndex in Enumerable.Range(0, textlist.Count())
                   from b in textlist.Skip(aIndex + 1)
                   let a = textlist.ElementAt(aIndex)
                   where a != b && a.SomeCondition(b)
                   select new
                   {
                       object1 = a,
                       object2 = b
                   }; 
```

注意：如果在枚举成本很高的 IEnumerable 上使用此解决方案以及使用 LINQ 解决此问题的大多数解决方案，效率将非常低。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T03:38:18.723

这是另一种方法，以防您无法在对象之间使用 > 或者您的集合可能包含重复项。它通过使用 SelectMany 和 Where 的重载来工作，该重载将索引传递给集合中的项目。我意识到它不是那么可读，但我认为它更健壮。

```
 string[] data = "A,A,B,C".Split(',');
        var query = data.SelectMany((x1, i1) => data.Where((x2, i2) => i2 > i1 && x1.SomeCondition(x2)).Select(x2 => new { object1 = x1, object2 = x2 }));
        foreach (var item in query) Console.WriteLine(item.object1 + "," + item.object2); 
```

# mysql - 将空间文本转换为空间列

> ID：11821646
> 
> 赞同：0
> 
> 时间：2012-08-06T01:43:03.167
> 
> 标签：mysql, polygon, spatial

刚开始玩mysql空间：

```
ID       BDY

4BCTD   152.936368,-27.22613|152.936525,-27.226409|152.937087,-27.228033|152.937327,-.... 
```

我有一个由 ID 和 BDY 组成的 BDY 表。

```
CREATE TABLE tbl_geom 
(ID VARCHAR(4),
BDY text,
GEOLOC GEOMETRY); 
```

BDY 有纬度、经度文本，我想将边界转换为称为 GEOLOC 的空间列。

试过这个但没有用：

```
UPDATE  tbl_geom b SET  GEOLOC = POLYFROMTEXT('SELECT  bdy  FROM tbl_geom a'); 
```

一直返回 null

即使这些查询返回 null

```
SELECT GeomFromText('SELECT  bdy  FROM tbl_geom a');

SELECT polyFromText('SELECT  bdy  FROM tbl_geom a');

SELECT AsText(bdy) FROM tbl_geom; 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:31:49.140

我认为您的查询应该是

```
UPDATE `tbl_geom` SET `GEOLOC` = POLYFROMTEXT(CONCAT('POLYGON((', REPLACE(REPLACE(`bdy`, ',', ' '), '|', ','), '))')); 
```

这个：

*   将 bdy 中的逗号转换为空格
*   将管道转换为逗号
*   在 POLYGON 调用中置顶和拖尾
*   更新 GEOLOC

# c - 获取：“从不同大小的整数转换为指针”警告（amd64）

> ID：11821648
> 
> 赞同：0
> 
> 时间：2012-08-06T01:43:22.893
> 
> 标签：c

当我在 and64 平台上编译时：我似乎无法弄清楚。这是它遇到问题的行之一：

```
static gboolean scan_freq(gpointer data)
{
    static gint start, mom, max;
    gint dir = (gint)(data); /// <- cast to pointer from integer of different size

    if (!max) {
        max = (FREQ_MAX - FREQ_MIN) * STEPS;
    }   

    if (radio_check_station(gtk_adjustment_get_value(adj)/STEPS) || (start > max))  {
        start = mom = 0;
        radio_unmute();
        timeout_id = 0;
        return FALSE;
    }
    if (!mom) {
        mom = gtk_adjustment_get_value(adj);
    }

    if (mom > FREQ_MAX*STEPS) 
        mom = FREQ_MIN*STEPS;
    else if (mom < FREQ_MIN*STEPS)
        mom = FREQ_MAX*STEPS;
    else    
        mom = mom + dir;
    start += 1;
    gtk_adjustment_set_value(adj, mom);

    return TRUE;
} 
```

和：

```
extern int mom_ps;
void preset_menuitem_activate_cb(GtkMenuItem *menuitem, gpointer user_data)
{
    preset* ps;
    mom_ps = (int)user_data;  /// <- cast to pointer from integer of different size

    g_assert(mom_ps >= 0 && mom_ps < g_list_length(settings.presets));

    ps = (preset*)g_list_nth_data(settings.presets, mom_ps);
    gtk_adjustment_set_value(adj, ps->freq * STEPS);
} 
```

得到：`cast to pointer from integer of different size`警告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:48:20.357

这实际上是一条令人困惑的错误消息，因为您似乎正在*远离*指针。

但是，错误基本上是抱怨类型不兼容。

假设您实际上已将整数作为指针传递（Gnome 特别禁止尝试将指针存储为整数类型），您可能应该使用实际的类型转换宏，例如[`GPOINTER_TO_INT`](http://developer.gnome.org/glib/2.32/glib-Type-Conversion-Macros.html#GPOINTER-TO-INT%3aCAPS)？

相反，如果该指针是指向整数的指针，则应该将其推迟而不是强制转换，例如：

```
gint dir = *((gint*)data); 
```

它只发生在 AMD64 上的事实是因为在这种平台上，指针和整数的大小不同，一个是 64 位，另一个是 32 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T01:49:00.027

可能，gint 和 gpointer 的大小不一样。你确定你知道你在做什么吗？为什么将指针用作 int？

如果您确定这是正确的，那么您需要使用与指针大小相同的整数，可能是 gint64 或 glong 而不是 gint。

glib 维护者也说过“记住，你不能将指针存储在整数中。这在任何形状或形式下都不可移植。” 所以无论你试图做什么——它都做错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:49:08.507

您应该使用`GPOINTER_TO_INT`：http: [//developer.gnome.org/glib/unstable/glib-Type-Conversion-Macros.html](http://developer.gnome.org/glib/unstable/glib-Type-Conversion-Macros.html)

执行此操作时，您必须使用相应的宏将指针存储为 int。您应该能够使用以下方法查看指针大小和 int 大小是否相同`printf("%d %d",sizeof(gpointer),sizeof(int))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T09:50:41.310

这可能意味着您的指针是 64 位，而您的整数是 32 位。当您将 64 位分配给 32 位类型时，您希望编译器做什么？我会说“向我尖叫并发出警告！” :-)

# c# - C# winform，BetterListView 控件问题，非常慢并且滞后很多

> ID：11821650
> 
> 赞同：0
> 
> 时间：2012-08-06T01:44:03.410
> 
> 标签：c#, winforms, listview, better-listview

我正在使用来自 Component Owl 的 BetterListView Express。在 listView 中有 3 列，FeatureNumber、FeatureName 和 FeatureCost.. 用户可以选择多个功能，右键单击它们并购买它们，当用户购买功能时，我将其从 listView 中删除，问题是当他选择多个项目并一次购买它们，它们以非常慢的动作，缓慢的方式一个接一个地被删除..不仅在选择和购买时，而且当 listView 最初出现时..起初我以为这是由于我有listView背景图片..所以我压缩了它，但并没有太大的不同..我什至尝试删除背景，仍然存在滞后..以防万一你想知道，字体可用的项目是**影响**前色为黑色，不可用项目的字体为**Arial**，前色为 DimGray。

我在一台带有 Corei3、2Gigs 的 Ram 和 1Gig ATI VGA 的东芝笔记本电脑上运行。

这是我用来删除项目的代码：（这实际上是它的一部分，还有其他与列表视图无关的东西，比如减少购买者的钱和类似的东西..）

```
private void purchaseFeatureToolStripMenuItem_Click(object sender, EventArgs e)
{
  int NumberOfSelectedItems = listView.SelectedItems.Count;
  for (int i = 0; i < NumberOfSelectedItems; i++)
  {
    int SelectedIndex = listView.SelectedItems[0].Index;
    if (Purchaser.Money >= Convert.ToInt16(listView.Items[SelectedIndex].SubItems[2].Text))
    { 
      //this is just to organize the rest of the features numbers.
      for (int k = SelectedIndex + 1; k < listView.Items.Count; k++)
      {
        int NextItemNumber = Convert.ToInt16(listView.Items[k].SubItems[0].Text);
        listView.Items[k].SubItems[0].Text = (--NextItemNumber).ToString();
      }
     listView.SelectedItems[0].Remove();
    }
   }
} 
```

有没有办法摆脱这种滞后？还是因为我的规格？

任何帮助将不胜感激.. ThanX 很多提前.. :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T06:18:15.350

在对控件进行多项更改之前，请始终调用**BeginUpdate**，然后在完成后调用**EndUpdate**。

如果您不使用 BeginUpdate/EndUpdate，常规列表视图也会很慢。

# ruby-on-rails - Rails 中用户的备用电子邮件地址 - 我将如何验证唯一性，或者我的方法不正确？

> ID：11821654
> 
> 赞同：3
> 
> 时间：2012-08-06T01:44:52.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, model

我的 User 模型非常标准 - 它有一个 email:string 列，我在 User 模型中使用 validates :email, :unique => true 来验证它的唯一性。

为了允许用户使用备用电子邮件地址，我创建了一个新模型：

**AlternateAddress，包含列 user_id:integer 和 email:string。**

**一个用户有_many AlternateAddresses，一个AlternateAddress 属于一个用户。** 此设置生成一个简单的嵌套表单，如下所示：[http](http://railscasts.com/episodes/196-nested-model-form-part-1) ://railscasts.com/episodes/196-nested-model-form-part-1 。

我意识到我需要“一起”验证 2 个 email:string 列（一个在 User.rb 中，另一个在 AlternateAddress.rb 中） - 所以任何地方都没有重复的电子邮件地址。

我该怎么做？或者，我的整个方法论都关闭了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:54:26.340

如果您已经将*一些*电子邮件地址存储在不同的模型中，为什么不将它们*全部*存储在该不同的模型中，并将该`email`字段完全从您的`User`模型中移除呢？

这样，唯一性约束都可以保存在一个地方（`AlternateAddress`模型）。然后，一个电子邮件地址的“主要”方面可以简单地作为一个标志保存在您`AlternateAddress`的一个给定的 es 上`User`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T02:02:07.120

您可以添加一个自定义验证器，以便它检查用户表，然后检查备用地址表：

```
class User < ActiveRecord::Base
  validate :email_uniqueness # custom
  validates :email, :uniqueness => true

  def email_uniqueness
    if AlternateAddress.find_by_email(self.email)
      self.errors.add(:email, "is already in use by another account")
    end
  end
end 
```

您可以添加类似于 AlternateAddress 字段的内容。该方法是一个自定义验证器来处理备用地址，但您仍然需要普通的 rails 验证器来确保用户之间的唯一性。

# android - 谷歌云消息和安卓版

> ID：11821667
> 
> 赞同：3
> 
> 时间：2012-08-06T01:46:51.993
> 
> 标签：android, google-cloud-messaging

我计划`Google Cloud Messaging`在我的应用程序中实现，该应用程序只运行`Android 2.2`及以上。这包括修改清单文件。

如果我的应用程序要在 运行`Android 2.1`，它会立即显示一个强制关闭对话框。我可以知道如何阻止这种情况发生吗？

目前可能的解决方案：

1.  在 Google Play Publisher 中维护 2 个不同版本的 apk（我没有尝试过，但它似乎有更多的作品）
2.  使用 GCM 替代方案？

我希望我的应用程序可以支持 Android 2.1 及更高版本，并且只向用户显示警告消息，例如“要使用此功能，您必须获得 Android 2.2 及更高版本”，特别是运行 GCM 的 Activity。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T05:55:07.473

如果您的应用也可以在没有 GCM 的情况下运行，那么您应该仅在版本为 2.2 或更高版本时注册 GCM。我猜以下几行以“快速失败”的方式抛出异常。

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this); 
```

免责声明：我没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:16:09.617

您可以获得您的应用程序在其中运行的 Android 版本的设备：

*   自：API 级别 4

    ```
    android.os.Build.VERSION.SDK_INT 
    ```

*   自：API 级别 1 ( `This is deprecated.`)

    ```
    android.os.Build.VERSION.SDK 
    ```

**编辑**：
当您知道设备的 Android 版本时，您可以在第一个 Activity 中决定应用程序必须正常运行或必须向用户显示消息。

您还可以查看有关`Application backward compatibility`.

# jquery - 这个 jQuery 语法有什么问题？

> ID：11821669
> 
> 赞同：0
> 
> 时间：2012-08-06T01:47:23.897
> 
> 标签：jquery, ajax, syntax

此代码不断抛出“意外令牌”错误，但我无法弄清楚它有什么问题。任何线索都会很棒。

```
function addComment() {
    $.ajax({
        url:'/add/comment/id',
        type:'POST',
        data.JSON.stringify({'Text':$('#comment_text').val()}),
        contentType:'application/json; charset=utf8',
        processData:false,
        success:function(data){
            $('#comments').prepend(data.comment.Text);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T01:50:49.090

问题出在这一行：

```
data.JSON.stringify({'Text':$('#comment_text').val()}), 
```

意外的标记是`.`之后的句点 ( ) `data`。

后面`.`需要一个冒号 ()，而不是句点 ( ) ，如下所示：`:``data`

```
data: JSON.stringify({'Text':$('#comment_text').val()}), 
```

请注意，这里**不需要`JSON.stringify`**。正如@pst 指出的那样，无论如何，jQuery 都会为您做到这一点。

```
data: {
  'Text': $('#comment_text').val()
}, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T01:52:25.560

```
data: JSON.stringify({'Text':$('#comment_text').val()}), 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T01:50:15.473

```
data.JSON.stringify({'Text':$('#comment_text').val()}) 
```

应该：

```
data: JSON.stringify({'Text':$('#comment_text').val()}) 
```

# php - 使用数组进行字符串插值

> ID：11821672
> 
> 赞同：1
> 
> 时间：2012-08-06T01:47:37.870
> 
> 标签：php

我正在尝试使用 php 创建链接，但遇到了一些困难。有人可以帮我弄这个吗。我希望链接转到 yourteam.php，标题是变量 $row['User_ID'] 是什么......

```
echo "<tr bgcolor=\"#D1D1D1\"><td>" . "<a href=\"yourteam.php\">$row['User_ID']</a>" . "</td><td><b>" . $row['Correct_Picks'] . " </b> /" . $maxcorrectpicks . "</td><td>" . $row['Points'] . "</td></tr>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:52:37.640

在双引号字符串中使用数组项时，您会省略任何引号

```
echo "<tr bgcolor=\"#D1D1D1\"><td>" . "<a href=\"yourteam.php\">$row[User_ID]</a>" . 
```

您还可以将变量包装在`{}`

```
echo "<tr bgcolor=\"#D1D1D1\"><td>" . "<a href=\"yourteam.php\">{$row['User_ID']}</a>" . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T01:51:17.817

试试这个

```
echo "<tr bgcolor='#D1D1D1'><td><a href='yourteam.php'>".$row['User_ID']."</a></td><td><b>" . $row['Correct_Picks'] . "</b>" . $maxcorrectpicks . "</td><td>" . $row['Points'] . "</td></tr>"; 
```

我建议你使用`<strong></strong>`代替，`<b></b>`你也可以使用内联样式`style='background-color:#D1D1D1;'`代替`bgcolor`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T01:57:25.637

我知道有人建议使用单引号，但我喜欢在我的 HTML 属性上使用双引号，并在我的 echo 语句中使用缩进以提高可读性。这就是我将如何做到的......

```
echo "<tr bgcolor=\"#D1D1D1\">";
echo "    <td><a href=\"yourteam.php\">{$row['User_ID']}</a></td>";
echo "    <td><b>{$row['Correct_Picks']}</b>{$maxcorrectpicks}</td>";
echo "    <td>{$row['Points']}</td>";
echo "</tr>"; 
```

# php - reCaptcha 使我的浏览器上的页面显示不正确

> ID：11821674
> 
> 赞同：0
> 
> 时间：2012-08-06T01:47:42.467
> 
> 标签：php, css, recaptcha

全部，我有以下两页。

第一页上有一个 reCaptcha，当我在手机上查看它时，它会在右侧产生很大的空间（主灰色应与右侧对齐）。您可以在此处查看链接：http: [//tinyurl.com/9hj9y7j](http://tinyurl.com/9hj9y7j)

第二页上没有 reCaptcha，您可以看到页面如何显示，灰色几乎与右侧齐平：http: [//tinyurl.com/cm5p4tg](http://tinyurl.com/cm5p4tg)

我有以下 CSS 代码来控制 reCaptcha：

```
@media (max-width: 480px) {
    #recaptcha_image img {
        width: 250px;
    }
    #recaptcha_image {
        width: 250px;
    }
} 
```

[根据用户是否使用移动浏览器（ http://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)），我还有以下控制要显示的 reCaptcha 类型：

```
<?php
if ($detect->isMobile()) {
?>
<tr><td valign="top" colspan="2">
<script type="text/javascript">
 var RecaptchaOptions = {
    theme : 'custom',
    custom_theme_widget: 'recaptcha_widget'
 };
</script>

<div id="recaptcha_widget" style="display:none">

   <div id="recaptcha_image"></div>
   <div class="recaptcha_only_if_incorrect_sol" style="color:red">Incorrect please try again</div>

   <span class="recaptcha_only_if_image">Enter the words above:</span><br>
   <span class="recaptcha_only_if_audio">Enter the numbers you hear:</span><br>

   <input type="text" id="recaptcha_response_field" name="recaptcha_response_field" />

   <div><a href="javascript:Recaptcha.reload()">Get another CAPTCHA</a></div>
   <div class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type('audio')">Get an audio CAPTCHA</a></div>
   <div class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type('image')">Get an image CAPTCHA</a></div>

   <div><a href="javascript:Recaptcha.showhelp()">Help</a></div>

 </div>

 <script type="text/javascript"
    src="http://www.google.com/recaptcha/api/challenge?k=<?php echo $publickey; ?>">
 </script>
 <noscript>
   <iframe src="http://www.google.com/recaptcha/api/noscript?k=<?php echo $publickey; ?>"
        height="300" width="500" frameborder="0"></iframe><br>
   <textarea name="recaptcha_challenge_field" rows="3" cols="40">
   </textarea>
   <input type="hidden" name="recaptcha_response_field"
        value="manual_challenge">
 </noscript>
 <?php
 }else{
 ?>
 <tr><td width="100" valign="top">Prevent Spam:</td><td>
 <script type="text/javascript">
 var RecaptchaOptions = {
    theme : 'white'
 };
</script>
<?php
    echo recaptcha_get_html($publickey);
 }
 ?>
 <div id="captchaStatus"></div>
<input type="text" value="" name="fill_me_out" id="fill_me_out" /></td></tr> 
```

我还有以下代码来控制视口：

```
<meta name="viewport" content="width=device-width, maximum-scale=1" /> 
```

有谁知道为什么 reCaptcha 会导致页面显示与页面不存在时不同？

我真的很想使用 reCaptcha 来阻止垃圾邮件，所以需要找到解决问题的方法。

谢谢！

# scala - Scala：解决模式匹配的模糊类型

> ID：11821675
> 
> 赞同：1
> 
> 时间：2012-08-06T01:47:43.837
> 
> 标签：scala, pattern-matching

我问了一个[较早的问题](https://stackoverflow.com/questions/11820071/scala-restricting-ordered-comparison-in-subclasses-to-the-same-subclass)，我得到了很好的答案。在评论中，Travis 提到比较两个`HandValue`s 不能直接工作，但是可以使用模式匹配来确保比较同一个类。

```
 sealed abstract class HandValue[T <: HandValue[T]](val rank: Int) extends Ordered[T]
  case class HighCard(high: Int) extends HandValue[HighCard](0){
    def compare(that: HighCard) = this.high - that.high
  }

  case class TwoPair(high: Int, big: Int, sm: Int) extends HandValue[TwoPair](2) {
    def compare (that: TwoPair) = { ... }
  } 
```

在下面尝试的模式匹配中，我有一个编译时错误，我怀疑它与使用`HandValue[_]`. `val h1: HandValue[T <: HandValue[T]]`，类似于声明类型的方式，无效。有没有办法解决这些问题？

```
 val ans = sessions count {
    hands: (Hand, Hand) => {
      val h1: HandValue[_] = handValue(hands._1)
      val h2: HandValue[_] = handValue(hands._2)
      (h1, h2) match { // <-- Line as source of error
        case _ if h1.rank > h2.rank => true
        case (a: HighCard, b: HighCard) => a > b
        case (a: TwoPair, b: TwoPair) => a > b
        // etc..
      }
    }
  } 
```

编辑：编译时错误是：

```
error: type arguments [_$3] do not conform to class HandValue's type parameter bounds [T <: euler.solutions.p54.HandValue[T]]
(h1, h2) match { 
```

编辑 2：正如在[这个问题](https://stackoverflow.com/questions/10025815/how-to-define-case-classes-with-members-with-unbound-type-parameters)中提到的，使用`Type[_]`不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:19:00.440

无法解决错误，但您可以通过允许将 any`HandValue`与任何其他 进行比较来消除很多这种复杂性`HandValue`；那么你就不必再有那个可怕的参数化和重复`compare`方法，然后是重复的比较逻辑`ans`。

一种方法是让每个人定义 a `strength`，它`Seq[Int]`由手牌等级和手牌中定义其强度的牌等级组成。然后你只需`Seqs`通过找出哪个有更大的数字来比较这些，即

```
sealed abstract class HandValue(val strength: Seq[Int]) extends Ordered[HandValue] {
  import math.Ordering.Implicits.seqDerivedOrdering
  def compare(that: HandValue) = 
    Ordering[Seq[Int]].compare(this.strength, that.strength)
}

case class HighCard(high1: Int, high2: Int, high3: Int, high4: Int, high5: Int ) 
  extends HandValue(Seq(0, high1, high2, high3, high4, high5))

case class TwoPair(high: Int, big: Int, sm: Int) 
  extends HandValue(Seq(2, big, sm, high))

val ans = sessions count { hands => 
  handValue(hands._1) > handValue(hands._2)
} 
```

请注意，在计算高牌手牌强度时，您需要将所有牌都考虑在内。还要注意 Ace-to-5 顺子！

您也可以使用散列函数计算（`strength`就像`Int`我做这个问题时所做的那样：[https](https://gist.github.com/3270831) ://gist.github.com/3270831 ）。

# php - 根据指定的第二级值比较二维数据集

> ID：11821680
> 
> 赞同：44
> 
> 时间：2012-08-06T01:48:53.040
> 
> 标签：php, multidimensional-array, filtering, associative-array, array-difference

我有一个包含相关数据行的数组。

```
$array1 = array(
    array('ITEM' => 1),
    array('ITEM' => 2),
    array('ITEM' => 3),
); 
```

我有第二个数组，也包含关联数据的行，我想使用第一个数组进行过滤。

```
$array2 = array(
    array('ITEM' => 2),
    array('ITEM' => 3),
    array('ITEM' => 1),
    array('ITEM' => 4),
); 
```

这感觉像是一份工作`array_diff()`，但我如何才能专门比较更深层次的`ITEM`值的行呢？

如何过滤第二个数组并获得以下结果？

```
array(3 => array('ITEM' => 4)) 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-06T03:39:30.540

您可以使用 定义自定义比较函数[`array_udiff()`](http://php.net/array_udiff)。

```
function udiffCompare($a, $b)
{
    return $a['ITEM'] - $b['ITEM'];
}

$arrdiff = array_udiff($arr2, $arr1, 'udiffCompare');
print_r($arrdiff); 
```

输出：

```
Array
(
    [3] => Array
        (
            [ITEM] => 4
        )
) 
```

这使用并保留了数组的现有结构，我认为这是您想要的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-06T02:10:58.067

我可能会遍历原始数组并使它们成为一维的......类似于

```
foreach($array1 as $aV){
    $aTmp1[] = $aV['ITEM'];
}

foreach($array2 as $aV){
    $aTmp2[] = $aV['ITEM'];
}

$new_array = array_diff($aTmp1,$aTmp2); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-03-01T11:32:10.990

另一种有趣的方法`json_encode`（如果您需要“原始”比较第一级数组中的一些复杂值，这可能很有用）：

```
// Compare all values by a json_encode
$diff = array_diff(array_map('json_encode', $array1), array_map('json_encode', $array2));

// Json decode the result
$diff = array_map('json_decode', $diff); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-06T00:02:20.760

使用它的几个解决方案[`array_filter`](http://php.net/manual/en/function.array-filter.php)的性能不如大型阵列[的`array_udiff`解决方案](https://stackoverflow.com/a/11822305/1709587)，但更直接和更灵活：

```
$array1 = [
    ['ITEM' => 1],
    ['ITEM' => 2],
    ['ITEM' => 3],
];

$array2 = [
    ['ITEM' => 2],
    ['ITEM' => 3],
    ['ITEM' => 1],
    ['ITEM' => 4],
];

$arrayDiff = array_filter($array2, function ($element) use ($array1) {
    return !in_array($element, $array1);
});

// OR

$arrayDiff = array_filter($array2, function ($array2Element) use ($array1) {
    foreach ($array1 as $array1Element) {
        if ($array1Element['ITEM'] == $array2Element['ITEM']) {
            return false;
        }
    }
    return true;
}); 
```

与往常一样`array_filter`，请注意`array_filter`保留原始数组的键，因此如果您想要`$arrayDiff`零索引，请`$arrayDiff = array_values($arrayDiff);`在`array_filter`调用之后执行。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-01T10:14:19.583

您可以使用下面的代码来获得差异

```
$a1 = Array(
    [0] => Array(
            [ITEM] => 1
        )
    [1] => Array(
            [ITEM] => 2
        )
    [2] => Array(
            [ITEM] => 3
        )
    );

$a2 = Array(
    [0] => Array(
            [ITEM] => 2
        )
    [1] => Array(
            [ITEM] => 3
        )

    [2] => Array(
            [ITEM] => 1
        )
    [3] => Array(
            [ITEM] => 4
        ));

array_diff(array_column($a1, 'ITEM'), array_column($a2, 'ITEM')); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-31T01:56:30.493

有同样的问题，但我的多维数组在每个数组中始终具有与您的“ITEM”不同的各种键。

解决了它：`$result = array_diff_assoc($array2, $array1);`

参考：[PHP：array_diff_assoc](http://php.net/manual/en/function.array-diff-assoc.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-28T20:25:31.917

另一种解决方案 if( json_encode($array1) == json_encode($array2) ){ ... }

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-09T12:11:26.330

相信 PHP 的维护者已经进行了优化[`array_udiff()`](https://www.php.net/manual/en/function.array-udiff.php)，以超越所有其他可以做到这一点的技术。

对于您的方案，您正在寻求一种过滤`array_diff()`来评估第一级“值”（数据行）内的数据。在自定义函数中，必须隔离特定列以进行比较。有关所有本机`array_diff()`函数变体的列表，请参阅[此答案](https://stackoverflow.com/a/70817582/2943403)。

要使用第一个数组过滤第二个数组（并从第二个数组输出保留的数据），您必须写`$array2`为第一个参数和`$array1`第二个参数。

`array_diff()`和`array_intersect()`利用（包含`u`在它们的函数名称中）的函数期望一个整数作为它们的返回值。 [该值用于在实际执行评估之前对数据进行初步排序](https://www.php.net/manual/en/function.array-udiff.php#119657)——这是一种性能优化。在某些情况下，如果您只返回`0`或`1`（不是三向比较），那么结果可能会出乎意料。为确保结果稳定，请始终提供可以返回负数、正数和零整数的比较函数。

比较整数值时，减法 ( `$a - $b`) 将给出可靠的返回值。为了在比较浮点值或非数字数据时获得更大的实用性，您可以在您的 PHP 版本可用时使用 spaceship 运算符。

代码：（[演示](https://3v4l.org/F6jo5)）

*   ### PHP7.4+（箭头函数）

    ```
    var_export(
        array_udiff($array2, $array1, fn($a, $b) => $a['ITEM'] <=> $b['ITEM'])
    ); 
    ```

*   ### PHP7+（宇宙飞船操作员）

    ```
    var_export(
        array_udiff(
            $array2,
            $array1,
            function($a, $b) {
                return $a['ITEM'] <=> $b['ITEM'];
            }
        )
    ); 
    ```

*   ### PHP5.3+（匿名函数）

    ```
    var_export(
        array_udiff(
            $array2,
            $array1,
            function($a, $b) {
                return $a['ITEM'] === $b['ITEM']
                    ? 0
                    : ($a['ITEM'] > $b['ITEM'] ? 1 : -1);
            }
        )
    ); 
    ```

以上所有版本的输出：

```
array (
  3 => 
  array (
    'ITEM' => 4,
  ),
) 
```

使用对象数组时，技术是相同的；只有访问属性的语法不同于访问数组元素（`$a['ITEM']`将是`$a->ITEM`）。

* * *

对于与一个数组隔离的元素在另一个数组中不存在的情况，您需要将两者`$a`和`$b`数据合并到相反的备用列，因为来自第一个数组和第二个数组的数据将在打回来。

代码：（[演示](https://3v4l.org/GIX20)）

```
$array1 = array(
    array('ITEM' => 1),
    array('ITEM' => 2),
    array('ITEM' => 3),
);

$array2 = array(
    array('ITEMID' => 2),
    array('ITEMID' => 3),
    array('ITEMID' => 1),
    array('ITEMID' => 4),
);

// PHP7.4+ (arrow functions)
var_export(
    array_udiff(
        $array2,
        $array1,
        fn($a, $b) => ($a['ITEM'] ?? $a['ITEMID']) <=> ($b['ITEM'] ?? $b['ITEMID'])
    )
); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-05-21T17:27:19.127

将 array1 与一个或多个其他数组进行比较，并返回 array1 中不存在于任何其他数组中的值。

```
 //Enter your code here, enjoy!

$array1 = array("a" => "green", "red", "blue");
$array2 = array("b" => "green", "yellow", "red");
$result = array_diff($array1, $array2);

print_r($result); 
```

# php - 在codeigniter中我如何使用where子句进行连接

> ID：11821687
> 
> 赞同：7
> 
> 时间：2012-08-06T01:50:03.327
> 
> 标签：php, mysql, codeigniter, join, where-clause

所以我有两个表，我想从表 1 中获取满足 where 子句条件的所有行，然后根据连接条件将它们与表 2 连接起来。

这是示例表：

```
table1:

col1   col2  col3
1      a     val1
2      b     val2
3      c     val3

table2:

col1   col3
1      someval1
2      someval2
3      someval3 
```

现在我想获取表 1 中 col1 = 2 的所有行，并将这些行与表 2 中的行（其中 table2.col1 = table1.col1）连接起来。那有意义吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-06T02:07:12.347

自从我编写 CI 以来已经有一段时间了，但是根据[这个 docs page](http://codeigniter.com/user_guide/database/active_record.html#select)，您的解决方案可能如下所示：

```
$this->db->select('*');
$this->db->from('table1');
$this->db->join('table2', 'table1.col1 = table2.col1');
$this->db->where('table1.col1', 2);

$query = $this->db->get(); 
```

*请注意*，此答案绝不是对使用 Code Igniter 的认可；-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T02:05:56.230

试试这个 ：

```
$this->db->select('*'); // Select field
$this->db->from('table1'); // from Table1
$this->db->join('table2','table1.col1 = table2.col1','INNER'); // Join table1 with table2 based on the foreign key
$this->db->where('table1.col1',2); // Set Filter
$res = $this->db->get(); 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-11T07:25:53.307

```
$this->db->select('book_id, book_name, author_name, category_name');
$this->db->from('books');
$this->db->join('category', 'category.category_id = books.category_id');
$this->db->where('category_name', 'Self Development');
$query = $this->db->get();

// Produces SQL:
 select book_id, book_name, author_name, category_name from books 
 join category on category.category_id = books.category_id 
 where category_name = "Self Development" 
```

# macos - ZS 中创建的 Zend Studio 9 新项目没有所有文件夹

> ID：11821690
> 
> 赞同：0
> 
> 时间：2012-08-06T01:50:16.827
> 
> 标签：macos, zend-framework, zend-studio

所以我从 Zend 工作室开始。我安装了 Zen Frameworks、Zend Studio 9.0 和 Zend Server CE（但后来删除了服务器）。

我看到的问题是，当我使用 zf.sh 从终端应用程序创建项目时，文件夹结构是正确的（application/、docs/、library/、public/、tests/），并且填充了所有默认值结构（如 application/config/application.ini 等）。

当我尝试在 Zend Studio 中通过转到 Project -> Zend Tool 并输入类似的命令（如“zf create project test1”）来执行相同操作时，项目已创建，但没有任何文件夹基础结构我需要。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:16:15.090

重新安装 zend 服务器恢复了生成正确项目模板文件的能力。似乎安装 zend 替换或更改了导致错误的 libphp.so。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:37:00.457

我不认为`Project->Zend Tool`是为了创建项目。它旨在在项目中创建元素。
创建项目`File->New->PHP project`或`->Zend Framework Project`. 我认为具体使用哪个命令取决于您的版本。

# objective-c - 在 Objective-C 中定义全局常量

> ID：11821693
> 
> 赞同：2
> 
> 时间：2012-08-06T01:50:59.480
> 
> 标签：objective-c, ios, xcode

我有一个看起来像的 constants.h 文件

```
#ifndef constants_h
#define constants_h

#define MyAdUnitID @"XXXXXXX"
#define GoogleAnalyticsID = @"XXXXX"

#endif 
```

并希望在我的其他实现文件中引用它。这些只是我想要在整个程序中作为 NSString 实例的简单字符串值，但似乎无法让它工作。

如果有更好的做法，请告诉我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T01:59:44.900

使用 extern 而不是定义。

在.h中：

```
extern NSString* SHKFacebookAppID; 
```

以 .m 为单位：

```
NSString* SHKFacebookAppID = @"1234567890"; 
```

# android - Android AlertDialog 默认方向

> ID：11821694
> 
> 赞同：4
> 
> 时间：2012-08-06T01:51:11.810
> 
> 标签：android, android-layout, android-alertdialog, android-orientation

我想将我的警报对话框默认方向默认更改为横向。当设备方向改变时，我不愿意处理对话框方向。

```
AlertDialog.Builder builder = new AlertDialog.Builder(MenuActivity.this);
    builder.setMessage("Are you sure you want to exit?")
            .setCancelable(false)
            .setTitle("EXIT")
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            MenuActivity.this.finish();
                        }
                    })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });

    AlertDialog alert = builder.create();
    alert.setIcon(R.drawable.ic_launcher);
    alert.show(); 
```

我找不到专门处理此对话框的默认方向的内容？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:13:25.030

您可以在您的活动中使用此方法。

setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:51:34.643

我没有测试过，但可能对你有用。

您应该必须实现自定义 AlertDialogStyle 并将其实现到您的代码中。请参见此处：[用于制作自定义对话框](https://sites.google.com/site/androidhowto/how-to-1/customize-alertdialog-theme)

在样式文件中，添加如下属性

```
<item name="android:orientation">landscape</item> 
```

希望它对你有用。

享受编码。. . . .

# objective-c - 如何从托管对象上下文转到表视图行？

> ID：11821696
> 
> 赞同：1
> 
> 时间：2012-08-06T01:51:23.560
> 
> 标签：objective-c, ios, uitableview, core-data

我有一个`UITableView`使用 CoreData SQLLite 数据源的`NSManagedObjectContext`.

如果我没有正确理解这个术语，请原谅我，因为我现在才几天，所以我只是在学习。

我刚刚完成了一个模式视图的设置，让我可以将新项目添加到我的数据源中。所以，我现在的逻辑基本上是：将项目添加到数据源，刷新表格视图，我现在可以看到我的新项目已列出。

不过，我想更进一步，并执行我已设置的 segue，然后在`UITableViewCell`单击任何项​​目时发生。因此，我将使用该`performSegueWithIdentifier:sender`方法在代码中启动该 segue。但是，发件人必须是`UITableViewCell`。

所以，鉴于我拥有的东西，我有刚刚添加到数据源中的数据，但不知道数据源中新项目的索引。我需要使用该数据来定位`UITableViewCell`新创建的项目。

关于如何做到这一点的任何想法？我一直在环顾四周，但没有看到任何看起来像我期望看到的示例代码。

下面是我将新项目从我的模式视图添加到数据源的代码：

```
#pragma mark - ComposeThreadViewControllerDelegate Methods

- (void)composeThreadViewController:(ComposeThreadViewController *)controller didFinishComposing:(Thread *)thread {

    // get the context
    NSManagedObjectContext *context = [(id)[[UIApplication sharedApplication] delegate] managedObjectContext];

    // add this new thread to our local cache
    NSManagedObject *managedThread = [NSEntityDescription insertNewObjectForEntityForName:@"Thread" inManagedObjectContext:context];

    [managedThread setValue:thread.id forKey:@"id"];
    [managedThread setValue:thread.title forKey:@"title"];
    [managedThread setValue:thread.author forKey:@"author"];
    [managedThread setValue:thread.text forKey:@"text"];
    [managedThread setValue:thread.location forKey:@"location"];

    //save the new thread
    [context save:nil];

    // begin refreshing the list of threads
    [self.tableView reloadData];

    // dismiss the modal view
    [self dismissModalViewControllerAnimated:YES];

    // bring up the view item view
    [self performSegueWithIdentifier:@"viewThreadSegue" sender:self];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:47:19.407

为什么需要对象的索引路径？这是表视图的实现细节，它管理对象的表示。

如果您需要对象，为什么不将托管对象作为发送者传递呢？

```
[self performSegueWithIdentifier:@"viewThreadSegue" sender:managedThread]; 
```

现在，在您的 performSeque 中，您可以将托管对象传递给视图控制器。无需使用与您正在做的事情不自然的索引路径来污染您的所有代码。

注意：您可以向对象询问其托管对象上下文...

```
managedThread.managedObjectContext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:09:48.227

据我所知，为 Mac OS X 学习可可，您不需要实现数据源协议。您只需将数组控制器拖到界面生成器中，在身份检查器中将模式设置为实体名称，然后输入名称您创建的数据源实体。在此之后，您只需将表视图的每一列绑定到您要表示的数组控制器的键。

# algorithm - 如何最有效地对不断变化的列表进行分区以计算其总和？

> ID：11821698
> 
> 赞同：3
> 
> 时间：2012-08-06T01:51:41.163
> 
> 标签：algorithm

假设我有一个包含 4 个不同值的数字的列表。我有第二个列表，描述了所有数字的总和（如果 list1=[1,3,2,5]，list2=[1,4,6,11]）。这样对于数十万个数字的列表，我不必添加所有数字 - 信息已经存储。

如果我在 list1 中的索引 0 处插入一个新数字，比如数字 2，我必须更新 list2 中的所有以下值。对于非常大的列表，这会非常耗时（也违背了第二个列表的目的）。

但是，如果我记录列表前半部分的总和 (4)，我可以从相对于该总和 (list2=[1,4,2,7]) 继续 list2。现在，如果我在 index=0 处插入数字 2，我只需要更新前两个值和记录的中间值。对于 100,000 个数字的列表，这将保证我只需要更新 50,000 个值。

我还可以在列表的每三分之一或每 10,000 个数字处记录值，或者我可以记录中途的一半（有点像二进制排序 - 现在我只需要更新/查看我正在影响的任何子列表）。

问题：我如何确定/管理此列表的最有效方法是什么？一半？三分之二？三个级别，每个级别减半？

[这是一个实际问题，而不是理论问题。List2 提供了用于布局和渲染文本/图形的偏移量。在我正在使用的环境中，一棵树是不实用的。我必须处理一个列表。我需要快速访问任何给定的总和/偏移量。另外，我很难清楚地呈现它。请随时澄清问题或要求澄清。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:32:36.297

一种不使用树的简单方法是将主数组分解为每个 sqrt(N) 元素的 sqrt(N) 区域。对于每个部分，跟踪它所涵盖的范围以及该范围内元素的总和。现在，如果您想找到元素 k 的总和，您可以将元素 k 之前的所有 sqrt(N) 大小范围的总和相加，然后将元素 k 范围内的元素相加。这两件事都需要 O(sqrt(N)) 时间，总共需要 O(sqrt(N))。

所有操作，插入、删除和查询，都将是 O(sqrt(N))，因为在每种情况下，您都需要查询/修改 O(sqrt(N)) 列表和 O(sqrt(N)) 中的元素你的主阵列。

您还需要偶尔改革结构。何时执行此操作取决于您，但您必须定期执行此操作，否则您不会在这些操作上保持 O(sqrt(N)) 运行时。如果您在每次 sqrt(N) 修改（仅插入或删除）后完全重新制作列表，那就足够了。这将需要每个 O(sqrt(N)) 操作的 O(N) 工作，随着时间的推移，这将是每个操作的额外 O(sqrt(N)) 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:13:45.173

我会使用一个数组（C++ 中的向量），称之为 IndexSum，它只包含总和（您可以通过从总和中减去前一个总和来推断元素的值）。数组可以很容易地被索引并且对于顺序访问表现良好。由于数组不保留指向下一个元素的指针，因此它们很紧凑并且非常适合处理器数据缓存。我将在排序数组（向量）中保留插入和删除，称为 InsertDeleteAdjust，您可以使用二进制搜索轻松访问它...这使您可以跟踪您需要对 IndexSum 中的总和进行的调整以获取索引范围。您可以定期运行“垃圾收集”例程，使用 InsertDeleteAdjust 中的值同步更新 IndexSum。如果这种周期性“垃圾收集”的延迟

# android - 打开安卓应用的问题

> ID：11821702
> 
> 赞同：0
> 
> 时间：2012-08-06T01:52:15.960
> 
> 标签：android, select, spinner, sqlite

我想知道为什么我不能打开我的应用程序。另外，我正在尝试从`SQLite`数据库中检索数据并插入微调器。

LogCat 说：

```
08-06 09:37:41.262: I/dalvikvm(532): threadid=3: reacting to signal 3
08-06 09:37:41.343: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt'
08-06 09:37:41.643: D/gralloc_goldfish(532): Emulator without GPU emulation detected.
08-06 09:37:41.773: I/dalvikvm(532): threadid=3: reacting to signal 3
08-06 09:37:41.793: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt'
08-06 09:37:43.293: D/AndroidRuntime(532): Shutting down VM
08-06 09:37:43.303: W/dalvikvm(532): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
08-06 09:37:43.312: E/AndroidRuntime(532): FATAL EXCEPTION: main
08-06 09:37:43.312: E/AndroidRuntime(532): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.page/main.page.PersonalInfo}: java.lang.NullPointerException
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.os.Looper.loop(Looper.java:137)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-06 09:37:43.312: E/AndroidRuntime(532):  at java.lang.reflect.Method.invokeNative(Native Method)
08-06 09:37:43.312: E/AndroidRuntime(532):  at java.lang.reflect.Method.invoke(Method.java:511)
08-06 09:37:43.312: E/AndroidRuntime(532):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-06 09:37:43.312: E/AndroidRuntime(532):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-06 09:37:43.312: E/AndroidRuntime(532):  at dalvik.system.NativeStart.main(Native Method)
08-06 09:37:43.312: E/AndroidRuntime(532): Caused by: java.lang.NullPointerException
08-06 09:37:43.312: E/AndroidRuntime(532):  at main.page.InfoDBAdapter.getAllContacts(InfoDBAdapter.java:113)
08-06 09:37:43.312: E/AndroidRuntime(532):  at main.page.PersonalInfo.onCreate(PersonalInfo.java:41)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.app.Activity.performCreate(Activity.java:4465)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-06 09:37:43.312: E/AndroidRuntime(532):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-06 09:37:43.312: E/AndroidRuntime(532):  ... 11 more
08-06 09:37:43.694: I/dalvikvm(532): threadid=3: reacting to signal 3
08-06 09:37:43.713: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt'
08-06 09:37:43.923: I/dalvikvm(532): threadid=3: reacting to signal 3
08-06 09:37:43.933: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt' 
```

下面是从数据库中检索数据并放入微调器的代码。

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.info);

        Cursor c = infoDB.getAllContacts();
        startManagingCursor(c);

        //Create an array to specify which fields want to display
        String[] from = new String[] {"name"};

        //Create an array of the display item want to bind our data to
        int[] to = new int[] {R.id.fName};

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c, from, to);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        nameSpinner.setAdapter(adapter);

        nameSpinner = (Spinner) findViewById(R.id.nameSpinner); 
```

哦，是的，在我输入代码（上面的那个）之前，我可以打开应用程序。但是在我输入代码后，我无法打开应用程序。我不确定这是否与代码有关。

下面是 DBAdapter 类：

```
public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_DATE = "date";
    public static final String KEY_TYPE = "type";
    public static final String KEY_LIKES = "likes";
    public static final String KEY_DISLIKES = "dislikes";

    private static final String TAG = "InfoDBAdapter";

    private static final String DATABASE_NAME = "friendsDB";
    private static final String DATABASE_TABLE = "friends_info";
    private static final int DATABASE_VERSION = 2;

    private static final String DATABASE_CREATE = "create table friends_info(name_id integer primary key autoincrement, "
            + "name text not null, date text not null, type text not null, likes text not null, dislikes text not null);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public InfoDBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try
            {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
        }// end onCreate()

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS friends_info");
            onCreate(db);
        }// end onUpgrade()

    }// end DatabaseHelper

        public InfoDBAdapter open() throws SQLException
        {
            db = DBHelper.getWritableDatabase();
            return this;
        }// end open()

        public void close()
        {
            DBHelper.close();
        }// end close()

        public long insertContact(String name, String date, String type, String likes, String dislikes)
        {
            ContentValues initialValues = new ContentValues();
            initialValues.put(KEY_NAME, name);
            initialValues.put(KEY_DATE, date);
            initialValues.put(KEY_TYPE, type);
            initialValues.put(KEY_LIKES, likes);
            initialValues.put(KEY_DISLIKES, dislikes);
            return db.insert(DATABASE_TABLE, null, initialValues);
        }// end insertContact()

        public boolean deleteContact(long rowId)
        {
            return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
        }// end deleteContact()

        public Cursor getAllContacts()
        {
            return db.query(DATABASE_TABLE, new String[] 
                    { KEY_ROWID, KEY_NAME, KEY_DATE, KEY_TYPE, KEY_LIKES, KEY_DISLIKES }, null, null, null, null, null);
        }// end getAllContacts()

        public Cursor getContact(long rowId) throws SQLException
        {
            Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {
                    KEY_ROWID, KEY_NAME, KEY_DATE, KEY_TYPE, KEY_LIKES, KEY_DISLIKES }, KEY_ROWID + "=" + rowId,
                    null, null, null, null, null);
            if (mCursor != null)
            {
                mCursor.moveToFirst();
            }
            return mCursor;
        }// end getContact()

        public boolean updateContact(long rowId, String name, String date, String type, String likes, String dislikes)
        {
            ContentValues args = new ContentValues();
            args.put(KEY_NAME, name);
            args.put(KEY_DATE, date);
            args.put(KEY_TYPE, type);
            args.put(KEY_LIKES, likes);
            args.put(KEY_DISLIKES, dislikes);
            return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
        }// end updateContact() 
```

我感谢提供的任何帮助。哦，如果有人知道从数据库中检索数据并放入微调器的其他方法，我将不胜感激。
谢谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:16:24.823

看起来你忘了打开你`DataBase`的操作和你的`db reference`is`null`和 throwing `NullPointerException`。尝试调用以下行 -

```
infoDB = new InfoDBAdapter(mContext);
infoDB.open();
Cursor c = infoDB.getAllContacts(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:24:06.860

`InfoDb`似乎是`null`。你是如何初始化它的？

您需要先`open()`访问数据库，然后才能使用它。

# windows - Windows 上的 npm 无法识别已安装的模块

> ID：11821712
> 
> 赞同：0
> 
> 时间：2012-08-06T01:53:08.107
> 
> 标签：windows, node.js, npm

当 npm 工作时（我在 Windows 7 上使用最新的官方版本）并且正在安装模块，“npm ls installed”显示空列表，“npm ls -g installed”也是如此，我尝试将 NODE_PATH 变量设置为各种路径，这似乎也不起作用。

```
mkdir c:\temp
cd c:\temp
npm install yeti 
```

[...] - 一切看起来都不错，安装了 Yeti

```
npm ls installed

C:\temp
└── (empty) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T02:10:07.227

您要运行的命令是`npm ls`or `npm ls -g`(leave off `installed`)。

# javascript - HTML 选择标签和 jQuery 显示和隐藏

> ID：11821716
> 
> 赞同：0
> 
> 时间：2012-08-06T01:53:45.997
> 
> 标签：javascript, jquery, html

更新：查看人们的建议，我意识到我应该不使用 AJAX。我决定更改加载函数，现在将 jquery 代码放入其中。但是，它仍然不起作用，因为没有元素显示为可见。这是新代码的样子。

```
<style>

.input_1 {display: none;}

.input_2 {display: none;}

.input_3 {display: none;}

</style>

<script type="text/javascript">

var numbers = $('#select_number').val();

function load(numbers) {    
if (numbers == 1) 
{$("input").hide();$(".input_1").show();} else 
if (numbers == 2) 
{$("input").hide();$(".input_1").show();$(".input_2").show();} else
if (numbers == 3) 
{$("input").hide();$(".input_1").show();$(".input_2").show();$(".input_3").show();}}

</script> 
```

这是 select 标签现在的样子

```
<form id="form" action="" method="post">

<select id="select_number" onclick="load( numbers );" >

<option>1</option>
<option>2</option>
<option>3</option>

</select>

<input type="text" class="input_1"/>

<input type="text" class="input_2"/>

<input type="text" class="input_3"/>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:03:08.470

```
<select id="select_number" onclick="load('ajax_file.php', number_of_places );"> 
```

单击元素时“number_of_places”的值是多少？根据您的代码，它设置了一次并且永远不会更改。

一种解决方案是在发送之前获取值：

```
function load(thefile) {    
    var number = $('#select_number').val();
    $.get(thefile, {number : number});
} 
```

或者获取函数调用的值

```
<select id="select_number" onclick="load('ajax_file.php', $('#select_number').val());"> 
```

此外，您没有对结果执行任何操作。也许你想要那样？但如果没有，您需要添加如下内容：

```
$.get(thefile, {number : number}, function (data){
        alert('The results are: ' + data);
        // do something with the results
    }
); 
```

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:05:00.933

我会使用 jQuery 来完成这样的任务。jQuery 使得使用 AJAX 调用变得非常容易。

```
var myVar = $.get( "ajax_file.php",
                   "/*data to be sent to php file (optional)*/",
                   function(data) { /*whatever you want you do (or simply leave it empty if your php does what you need)*/ },
                  "text" /*data Type*/
                 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T02:10:44.580

Jquery 无法在服务器上远程执行，因此您的 Ajax 调用中的 jquery 将不会执行任何操作。这是 jquery 本质的基础，它不是服务器端语言。

```
 function load(thefile) {    
    var number_of_places = $('#select_number').val();
    $.get(thefile, {number : number_of_places}, function(numbers){
        if (numbers = 1) 
           {$("#input_1").show();} else 
        if (numbers = 2) 
           {$("#input_1").show();$("#input_2").show();} else
        if (numbers = 3) 
           {$("#input_1").show();$("#input_2").show();$("#input_3").show();}
    });
  )}; 
```

.php 文件：

```
 <?php

  if (isset($_GET['number']) === true && empty($_GET['number']) === false) {
       print $_GET['number'];
  }

  ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T02:38:24.523

找到了解决方案。在 onclick 属性的加载函数中添加 $('#select_number').val() 并且它可以工作。感谢大家的帮助。

# ios - 导航栏设计的可能性

> ID：11821717
> 
> 赞同：2
> 
> 时间：2012-08-06T01:54:23.683
> 
> 标签：ios, xcode, uinavigationbar

![预期设计](../Images/f87cb91db7a58e58e08391fa9c665964.png) 是否可以设计一个像上面看到的那样的导航栏？这不是导航栏的标准设计。所以想知道它可以完成的机会有多大？按钮没有问题。它的按钮从导航栏突出的部分似乎具有挑战性。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:14:43.017

是的，这是可以做到的。

最简单的方法可能是只使用 UIImageView 作为工具栏背景并将 UIButtons 放在其上方作为按钮。将按钮连接到 IBActions 以弹出导航控制器或您可能希望它们执行的任何其他操作。

# c++ - 保持客户端-服务器游戏中的代码井井有条

> ID：11821723
> 
> 赞同：13
> 
> 时间：2012-08-06T01:55:13.283
> 
> 标签：c++, oop, design-patterns, architecture, code-separation

**背景：** 我帮助开发了一个多人游戏，主要用 C++ 编写，使用标准的客户端-服务器架构。服务端可以自己编译，客户端和服务端一起编译，这样就可以托管游戏了。

**问题**

游戏将客户端和服务器代码合并到同一个类中，这开始变得非常麻烦。

例如，以下是您可能在普通类中看到的一小部分示例：

```
// Server + client
Point Ship::calcPosition()
{
  // Do position calculations; actual (server) and predictive (client)
}

// Server only
void Ship::explode()
{
  // Communicate to the client that this ship has died
}

// Client only
#ifndef SERVER_ONLY
void Ship::renderExplosion()
{
  // Renders explosion graphics and sound effects
}
#endif 
```

和标题：

```
class Ship
{
    // Server + client
    Point calcPosition();

    // Server only
    void explode();

    // Client only
    #ifndef SERVER_ONLY
    void renderExplosion();
    #endif
} 
```

如您所见，仅在编译服务器时，预处理器定义用于排除图形和声音代码（看起来很难看）。

**问题：**

在客户端-服务器架构中保持代码有条理和整洁的最佳实践是什么？

谢谢！

**编辑：**也欢迎使用良好组织的开源项目示例:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:48:15.540

我会考虑使用一种[策略设计模式](http://en.wikipedia.org/wiki/Strategy_pattern)，您将拥有一个具有客户端和服务器通用功能的 Ship 类，然后创建另一个名为 ShipSpecifics 的类层次结构，它将是 Ship 的一个属性。ShipSpecifics 将使用服务器或客户端具体派生类创建并注入 Ship。

它可能看起来像这样：

```
class ShipSpecifics
{
    // create appropriate methods here, possibly virtual or pure virtual
    // they must be common to both client and server
};

class Ship
{
public:
    Ship() : specifics_(NULL) {}

    Point calcPosition();
    // put more common methods/attributes here

    ShipSpecifics *getSpecifics() { return specifics_; }
    void setSpecifics(ShipSpecifics *s) { specifics_ = s; }

private:
    ShipSpecifics *specifics_;
};

class ShipSpecificsClient : public ShipSpecifics 
{
    void renderExplosion();
    // more client stuff here
};

class ShipSpecificsServer : public ShipSpecifics 
{
    void explode();
    // more server stuff here
}; 
```

Ship 和 ShipSpecifics 类将位于客户端和服务器通用的代码库中，而 ShipSpecificsServer 和 ShipSpecificsClient 类显然将分别位于服务器和客户端代码库中。

用法可能类似于以下内容：

```
// client usage
int main(int argc, argv)
{
    Ship *theShip = new Ship();
    ShipSpecificsClient *clientSpecifics = new ShipSpecificsClient();

    theShip->setSpecifics(clientSpecifics);

    // everything else...
}

// server usage
int main(int argc, argv)
{
    Ship *theShip = new Ship();
    ShipSpecificsServer *serverSpecifics = new ShipSpecificsServer();

    theShip->setSpecifics(serverSpecifics);

    // everything else...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T03:12:15.280

定义具有客户端 API 的客户端存根类。

定义实现服务器的服务器类。

定义将传入消息映射到服务器调用的服务器存根。

除了通过您使用的任何协议将命令代理到服务器之外，存根类没有任何实现。

您现在可以在不更改设计的情况下更改协议。

*或者*

使用[MACE-RPC](http://bytemaster.github.com/mace/group__mace__rpc.html)之类的库从服务器 API 自动生成客户端和服务器存根。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T08:30:20.733

为什么不采取简单的方法呢？提供一个描述 Ship 类将做什么的标题，带有注释但没有 ifdefs。然后在 ifdef 中提供客户端实现，就像您在问题中所做的那样，但提供一组替代（空）实现，当客户端没有被编译时使用。

令我震惊的是，如果您的注释和代码结构清晰，那么这种方法将比提出的更“复杂”的解决方案更容易阅读和理解。

这种方法还有一个额外的优势，如果共享代码（此处为 calcPosition()）需要在客户端和服务器上采用稍微不同的执行路径，并且客户端代码需要调用其他仅客户端的函数（请参见下面的示例)，您不会遇到构建并发症。

标题：

```
class Ship
{
    // Server + client
    Point calcPosition();

    // Server only
    void explode();
    Point calcServerActualPosition();

    // Client only
    void renderExplosion();
    Point calcClientPredicitedPosition();
} 
```

身体：

```
// Server + client
Point Ship::calcPosition()
{
  // Do position calculations; actual (server) and predictive     (client)
   return isClient ? calcClientPredicitedPosition() :
                     calcServerActualPosition();
}

// Server only
void Ship::explode()
{
  // Communicate to the client that this ship has died
}

Point Ship::calcServerActualPosition()
{
  // Returns ship's official position
}

// Client only
#ifndef SERVER_ONLY

void Ship::renderExplosion()
{
  // Renders explosion graphics and sound effects
}

Point Ship::calcClientPredicitedPosition() 
{
  // Returns client's predicted position
}

#else

// Empty stubs for functions not used on server
void  Ship::renderExplosion()              { }
Point Ship::calcClientPredicitedPosition() { return Point(); }

#endif 
```

这段代码看起来非常易读（除了由 Client only / #ifndef SERVER_ONLY bit 引入的认知失调，可以用不同的名称修复），尤其是在整个应用程序中重复该模式的情况下。

我看到的唯一缺点是您需要重复两次仅客户端功能签名，但如果您搞砸了，一旦您看到编译器错误，修复将是显而易见且微不足道的。

# php - jquery 文件上传 - 使用 ajax 发布 php 变量

> ID：11821733
> 
> 赞同：1
> 
> 时间：2012-08-06T01:57:18.710
> 
> 标签：php, javascript, jquery, jquery-plugins

我已经安装了 blueimp jquery 文件上传并且遇到了一个棘手的问题。

我想在上传文件时获取一个 php 变量，如果它存在，请执行一些 php。

我已经调整了 upload.class.php 来做一些数据库工作并获取我需要的数据。

然后我成功地将它解析回我的前端页面，但只能通过令人兴奋的 ajax 表，例如：

```
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
          <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">    {%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
         <td class="preview">{%=file.num%}{%=file.product%}{% if (file.thumbnail_url) { %}     <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
          <td class="name">
            <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
    {% } %}
    <td class="delete">
        <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
            <i class="icon-trash icon-white"></i>
            <span>{%=locale.fileupload.destroy%}</span>
        </button>
        <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script> 
```

我这样做是为了确保： {%=file.num%}{%=file.product%} 打印出来，并且是从 php 中表达出来的。

所以我想把这些变量放到“模板下载”脚本区域之外的页面上的其他地方触发一个 php 片段。

我可以弄清楚如何做到这一点，如果变量在模板下载脚本标签之外，我什至无法回显它们。

任何帮助将不胜感激我完全迷失在 ajax/javascript 中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:12:53.507

修复：在 js 中调用页面时传递变量，例如：

```
var nocacheurl = url+"?t="+timestamp+"&some_variable="+variable; 
```

不确定这是否是最好的方法，但我的 php 现在获取 $_REQUEST 变量并按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:32:17.430

在我的斗争中，我越来越多地了解 Ajax/Js 并设法创建了一个更新的 div :) 但是我仍然在努力将变量从 js 传递到 php，反之亦然！

我有一个 $_REQUEST["some_variable"]; 在我的页面顶部我如何从 js div 调用它？

我的负载 div 是

```
$variable=$_REQUEST["some_variable"];
<script src="/js/myjsscript"></script>

<div class="container">
<script type="text/javascript">

refreshdiv();</script>
<div id="productdiv"></div> 
```

我试过了

```
 `refreshdiv(<? echo $variable ?>);` 
```

从长远来看（我不知道我在 js 中做什么，并且仍然在 php 大脑上工作，期望它能够工作。学习非常缓慢:)）但这不起作用。

更新

只是尝试了以下，而不是从外部 js 文件调用 php

```
$variable=$_REQUEST["some_variable"];
<script src="/js/myjsscript"></script>

<div class="container">
<script type="text/javascript">
var seconds = 10;
var divid = "productdiv";
var url = "/ajaxcall_script.php?some_varaible=<? echo $variable ?>";

refreshdiv();</script>
<div id="productdiv"></div> 
```

它在源代码中打印出来，所以我知道变量是好的。但是 $_REQUEST["some_varaible"] 没有在 php 中获取变量？

# php - 使用空白字段条目更新，MySql 将其显示为零

> ID：11821736
> 
> 赞同：0
> 
> 时间：2012-08-06T01:57:42.323
> 
> 标签：php, mysql, forms

我有这个`<input type="text" name="Fax" id="faxbox" maxlength="9" value="<?php echo $row['Fax'] ?>" />`

我想在提交时将其留空。在数据库上，该列（作为 int）也设置为允许空值。

但是当我提交时，MySql 将我的空/空白字段变为 0（零）。我希望它显示为 NULL 而不是 0。

我该怎么办？我尝试`if(empty($_POST['Fax'])){$Fax=NULL;}`但不会工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:02:27.473

您需要实际使用字符串 null，例如

```
$Fax = 'NULL'; 
```

如果您在任何地方的字符串上下文中使用 php null，它将被转换为空字符串。

* * *

跟进：

如果你有：

```
$Fax = null;
$sql = "INSERT INTO .... VALUES ($Fax)"; 
```

你最终得到

```
INSERT INTO ... VALUES () 
```

因为 PHP null 被转换为空字符串。但如果你有

```
$Fax = 'null'; // a string whose contents is the word 'null' 
```

那么查询语句实际上将是

```
INSERT INTO ... VALUES (null) 
```

因为字符串的值是单词 null，然后将被视为 sql null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:11:15.373

为了`NULL`使用 php 在 MySQL 中插入值，您需要这样做：

```
INSERT INTO table (field,field2) VALUES (NULL,3) 
```

在你的情况下，试试这个：

```
$Fax = !empty($Fax) ? "'$Fax'" : "NULL"; 
INSERT INTO tableName (Fax) VALUES ($Fax); 
```

**[更多关于这个链接](https://stackoverflow.com/a/4620409/491243)**

# asp.net - 突出显示单击的超链接

> ID：11821737
> 
> 赞同：0
> 
> 时间：2012-08-06T01:57:58.730
> 
> 标签：asp.net, css, vb.net

我的网页中有一个数据列表，可以在其上动态加载超链接。单击超链接时，将在同一页面上加载相应的内容 由于加载内容是在页面刷新后发生的，因此突出显示单击的超链接是一项挑战。

我想通过突出显示用户单击的超链接来向用户显示他们正在阅读的内容。

我使用 css 尝试过，但由于有页面刷新来加载内容，它没有维护突出显示的颜色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:06:08.697

如果您触发了整页刷新，您将失去当前加载页面的状态。有几个选项可以归结为：1.）当用户点击时不刷新页面，2.）保存状态。

### 选项1

当用户点击链接时不要触发页面刷新。相反，通过 AJAX 调用从服务器获取内容。

例如，如果您使用 jQuery 作为 AJAX 库，您可以`click`在所有链接上设置处理程序。单击时，处理程序将触发，然后您可以通过 AJAX 获取内容并将类添加到单击的链接。你的 CSS 可以包含一个规则来改变它的颜色。

```
$("a").click(function () {
  var clicked = $(this);
  // get the content from the server
  $.get('ajax/test.html', function(data) {
    // drop the content into the page
    $('.result').html(data);
    // flag the link as clicked
    clicked.addClass('clicked');
  });      
}); 
```

### 选项 #2

将哪些用户单击哪些链接的映射存储在服务器上的数据库表中。每当请求页面并且您正在呈现 HTML 时，您都可以将 CSS 类添加到您知道已被单击的链接中，以便在浏览器加载页面时将它们表示为不同的颜色。

# android - 如何显示 ListView 中的项目与下一个项目位置重叠的效果？

> ID：11821738
> 
> 赞同：0
> 
> 时间：2012-08-06T01:58:10.050
> 
> 标签：android, android-listview

所以我有一个ListView。ListView 中的每个项目代表 1 小时（日历的日视图）。如果某件事，基本上是一个事件，比如 1 小时 30 分钟。我需要能够将它扩展到一个括号/项目而不使其看起来分开，这就是 ListView 中的分隔线正在做的事情，这不是我想要的。问题是我不想取消分隔符值，因为我需要那里的分隔符。任何关于如何实现这一点的想法将不胜感激！

# javascript - 元素点击计数跟踪

> ID：11821741
> 
> 赞同：0
> 
> 时间：2012-08-06T01:58:18.647
> 
> 标签：javascript, jquery, html, analytics, tracking

我是计算机编程的新手，并试图学习一些可能性来跟踪页面上元素的点击。如果它是指向另一个页面的链接，我知道我可以使用 goo.gl 或 bit.ly 进行 url 跟踪。如果是在 WordPress 中，有几个实用程序可以跟踪页面访问。我已经阅读了足够多的内容，知道 PHP 可以解决这个问题，但我不知道 PHP（尽管指向 PHP 的演练或介绍的链接或可以解释元素跟踪的类似链接，我愿意学习），以及这个项目很小，这就是为什么我正在寻找类似的易于实现的方法。

我能想到的可能的解决方案： * 一个可能的全局值，可以跟踪，但我不知道如何保持用户之间的持久性或重新加载重新加载 * 有点难以跟踪，但为每个元素创建几个 url ，并让 JQuery on('click') 访问该页面，但我不知道如何阻止该页面打开，因为它与用户无关 * 我熟悉 SQL，并且有一个 sql server我可以使用，但不知道如何使用 JS 将其映射到仅一页，因此有关此的任何信息或链接都会有所帮助

我没有研究过谷歌分析，不知道是否可以使用它来实现元素跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:37:37.427

在最近的项目中，我使用元素上的 jQuery 事件来跟踪与 Google Analytics 的页面交互。josnidhin 提供的链接包含有关在您的页面上设置事件跟踪的大量信息。这是一个 JSFiddle 示例，展示了我如何使用这种类型的事件跟踪[http://jsfiddle.net/kezzman11/qzr6v/](http://jsfiddle.net/kezzman11/qzr6v/)。

如果您仅将 URL 用于跟踪目的，要防止链接打开，您只需使用 HTML 标记上的 onclick 属性返回 false。例如。onclick="返回假；"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:01:09.710

您可以将单击事件委托附加到文件的根元素，该文件根据您要跟踪的链接的类进行过滤。在回调函数中，您可以提交包含点击参数的 ajax 请求。在服务器端，这会将点击保存到数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T02:06:16.963

使用 javascript+php 构建东西对学习很有帮助。

但我认为你应该使用谷歌分析事件跟踪。[您可以在https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)找到文档。

这将需要您执行一些 javascript，但不涉及服务器端设置。

# jquery - 无需重新加载页面的动态内容

> ID：11821743
> 
> 赞同：0
> 
> 时间：2012-08-06T01:58:42.023
> 
> 标签：jquery, ajax, json, dynamic

我整晚都在绞尽脑汁想弄清楚这一点，想知道我是否能得到一些帮助。

我的目标是为我的网站构建一个易于使用的管理面板。我想设置管理站点，以便当我单击菜单项时，内容会发生变化，但 url 保持在“http://www.mysite.com/admin/”。

通过广泛的谷歌搜索，我看到有人声称这可以使用 JQuery、AJAX 和 JSON 来完成，但是，虽然我精通 HTML 和 PHP，但我缺乏在 JQuery、AJAX 或 JSON 中编写任何脚本的知识。

有没有办法在 PHP 中做到这一点？如果没有，我将如何处理？我并不是在乞求免费编码，但片段会像链接到可能我可以学习到足以自己弄清楚的地方的链接一样多。

-史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T06:43:59.640

我建议遵循ajax方法。

尝试使用 i 帧..

你的 iframe 应该有一个名字

```
 <iframe name=blah>
     </iframe> 
```

您的链接应针对该名称

```
 <a href="http://www.mysite.com/admin/adminpage.php" target="blah"> 
```

这可以防止 url 保持不变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:01:46.523

使用服务器端 PHP 代码执行异步客户端到服务器端请求是不可能的。您必须使用 Javascript 来发起 AJAX 请求。

也就是说，可能有一些 PHP 框架可以生成您需要的 Javascript，但我不知道。

不过，你真的应该学习 Javascript，或者至少是一种可以编译的语言。如果您从不使用客户端脚本语言，那么您在富客户端交互方面将非常有限。

# c# - 在c#中删除“”之间的逗号

> ID：11821744
> 
> 赞同：1
> 
> 时间：2012-08-06T01:58:44.880
> 
> 标签：c#, c#-4.0

如何使用 C# 删除字符串中每个 "" 之间的逗号 ','？

我尝试过：

```
string result = Regex.Replace(input,
@",([^""]$)",String.Empty); 
```

但它不起作用......

感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T02:16:03.003

我的想法是用“引号”分割，这样每个索引不均匀的元素都会在引号之间。通过这些，用逗号替换它们，然后将所有内容重新连接到一个字符串，应该可以解决问题：

```
var parts = input.Split('"');

for (var i = 1; i < parts.Length; i += 2)
{
    parts[i] = parts[i].Replace(",", "");
}

var result = string.Join("\"", parts); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:01:59.337

我对您的输入字符串的外观有些困惑，但是只要您尝试简单地替换逗号，您就可以尝试

```
var result = input.replace(",",""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:06:24.047

```
// extract the fields
    Regex CSVParser = new Regex(",(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))");
    String[] Fields = CSVParser.Split(Test);

    // clean up the fields (remove " and leading spaces)
    for (int i = 0; i < Fields.Length; i++)
    {
        Fields[i] = Fields[i].TrimStart(' ', '"');
        Fields[i] = Fields[i].TrimEnd('"');
    } 
```

# c++ - 计算正弦或余弦时出现奇怪的符号问题

> ID：11821749
> 
> 赞同：0
> 
> 时间：2012-08-06T02:00:04.583
> 
> 标签：c++, floating-point, decimal, precision, sign

我正在尝试编写一个小程序来计算用户以度为单位提供的角度的正弦和余弦，精度为小数点后 6 位。

它是这样的：

输入（角度）

```
90 
```

输出（正余弦）

```
1.000000 0.000000 
```

但我对其中一些有疑问，例如，当用户输入**-850**时，程序返回：

```
-1.000000 -0.000000 
```

注意**-0.000000**，有没有一种干净的方法可以避免这种情况？它一定很简单，但我想念它。

顺便说一句，干净的方式我的意思是比类似的东西更干净

```
if(angle > -0.000001)
{
        angle = 0.000000;
} 
```

这是代码：

```
#include <iostream>
#include <cmath>
#include <iomanip>

using namespace std;

int main()
{
        float angle;

        while(1)
        {
                cin >> angle;
                if(cin.eof())
                {
                        return 0;
                }
                angle = angle*M_PI/180.0;
                cout << fixed << setprecision(6) << sin(angle) << " " << cos(angle) << endl;
        }
        return 0;
} 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-18T14:49:37.060

在这种情况下，最好的答案是将数字打印到字符串中，然后检查字符串。如果字符串是文字常量 -0.000000，则将其替换为 0.000000。

这可能看起来像一个黑客，但它实际上是最稳定的解决方案。您可以尝试按照解决方案中的建议将输入值与 -0.000001 进行比较，但这并不一定会告诉您是否会打印 -0.000000。如果打印代码四舍五入，则 -0.0000009 将打印为 -0.000001，但检查将导致它打印为零，这可以说是一个错误。

只需进行字符串检查并继续。这是唯一保证完全正确的解决方案。或者，如果您不介意 0.000000 结果稍微太少，请使用与 -0.000001 的比较。

或者，只留下代码。-0.000000 实际上提供了额外的信息 - 这并不是一件坏事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:40:44.463

[每个程序员都应该知道的浮点知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html "每个程序员都应该知道的浮点知识")

你可以这样做：

```
if (angle == -0.0) { angle = 0.0 } 
```

我还没有打算找到一种方法来告诉 iostream 不要在负零上打印减号。

# java - 如果在线考试时出现断电，我们如何更新用户再次登录门户的剩余时间？

> ID：11821753
> 
> 赞同：5
> 
> 时间：2012-08-06T02:00:30.787
> 
> 标签：java, javascript, session, jakarta-ee, session-timeout

我正在做一个项目在线考试***只是为了获得知识***。可能会出现断电的情况，当候选人再次登录时，必须给出断电期间浪费的时间。但在我的`javascript`代码中，考试在与服务器时间相对应的 2 小时后结束（`AJAX`此处使用）。时间结束后，学生被重定向到主页。我已经想到了一个解决方案，但我没有找到实施它的开始。

> 由于会话保持不变，所以我可以将他使用的时间保持在 2 小时以内，并且可以存储在`database`. 当他重新登录时，可以检查与他对应的特定行并且可以更新时间。

但我无法实现它。请告诉我是否有其他解决方案，或者我认为的方向是对还是错。

考试时钟从 2 小时开始恢复。它不会从停电时的滴答声开始恢复。至少在这种情况下，无论是发生电源故障还是候选人再次登录，都是一样的。而且我不要求任何代码来解决这个问题。我只是想要一个我能想到的提示或方向。我只想知道它背后的概念是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T03:02:52.310

*将问题形式化一点：*

*   用户登录并在*t0*开始考试。他们的考试在*t120*结束。
*   在考试结束 ( *tx* ) 前的某个时间点（考试开始 x 分钟）发生电源故障，被试者必须恢复考试。
*   在*tx*之后的某个时刻，*ty*系统重新上线。
*   在 ty 或等于*ty*之后的某个时刻，用户再次登录，称之为*tz*。正如您所指出的，这等于*ty*。
*   他们有权在*120*分钟内完成考试。考试结束的点现在是*tz + (120 - x)*。

***可能的解决方案：***

最初想到了一种非常面向会话的方法，但这可能是要走的路：

*   实现一个周期为*p*的系统范围的时钟（想想“心跳”） 。对于系统启动的每个间隔 p，增加一个全局计数器。
*   将 t0 记录为每次检查的全局计数器。
*   在另一行中，更新检查的经过时间。这是 t0 的当前值。在您的代码中，您可能具有保存正在进行的工作、更新已用时间的功能。还要更新每个页面/部分加载的经过时间。请注意，如果在上次经过的时间更新/正在进行的保存之间丢失了一些工作，他们将收到“返回”的时间，因为他们上次经过的更新从未被存储。
*   区间 p 将是一个策略决策。从理论上讲，根据失败的时间，某人可以获得额外的 p 来完成他们的考试。如果 p 是 1 秒，那没什么大不了的。如果是 5 分钟，那就更重要了。当然，对于不同的 p 值，会有性能权衡。此外，由于我们在这里不处理实时系统，因此 p 可能存在一些偏差。
*   使用事务处理一切。当系统恢复时（并且在全局时钟再次开始计时之前），任何被中断的事务都需要回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T07:07:50.120

您可以使用 Websockets 来实现客户端服务器通信。Websockets 提供了自己的 healthchek。它具有 onOpen() 和 onClose() 等方法，可在打开或关闭连接时接收事件。

# c - 为什么类型标识符后跟函数调用？

> ID：11821756
> 
> 赞同：1
> 
> 时间：2012-08-06T02:01:06.840
> 
> 标签：c

我是c新手，这段代码让我很困惑：

```
pid_t getpid(void) 
```

如果类型标识符后面`pid_t`是一个变量（它是一个变量声明），而是一个函数调用`getpid()`，我不知道为什么使用这个函数调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:03:40.583

你是对的，这`pid_t`是一个类型标识符，但它不是一个变量。`pid_t`是函数的返回类型`getpid()`。

C 中的每个函数都有一个返回类型。函数声明如下：
`returntype functionName(arguments)`

例如，`int main(int argc, const char * argv[])`返回一个`int`并接受两个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:03:29.703

```
pid_t getpid(void) 
```

这意味着名为的函数`getpid`不接受任何参数（因为参数列表仅包含`void`）并返回一个类型的值`pid_t`（因此您使用类型说明符是正确的）。

任何有关 C 的基本书籍/教程都会为您提供此信息，我建议您自己完成其中的一些工作以了解基础知识。

这个 SO 问题可能会有所帮助：[The Definitive C Book Guide and List](https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list)

# javascript - 一些变量中的 JavaScript 帮助

> ID：11821757
> 
> 赞同：0
> 
> 时间：2012-08-06T02:01:08.443
> 
> 标签：javascript, html

好吧，我正在分析一个 javascript 代码，但我对某些行感到困惑，例如我有这段代码

```
function getStyle(el,styleProp)
 {
var x = document.getElementById(el);
if (x.currentStyle)
    var y = x.currentStyle[styleProp];
else if (window.getComputedStyle)
    var y = document.defaultView.getComputedStyle(x,null).getPropertyValue(styleProp);

if (y.substr(0, 1) == "#"){ return y; } else {

var value = y.split(',');

var R = value[0].substr(4);
var G = value[1];
var B = value[2].substr(0, value[2].length-1);

var RGB =  "#" + toHex(R)+ toHex(G)+toHex(B);

return RGB;

 }
}

function toHex(N) {
if (N==null) return "00";
N=parseInt(N); if (N==0 || isNaN(N)) return "00";
N=Math.max(0,N); N=Math.min(N,255); N=Math.round(N);
return "0123456789ABCDEF".charAt((N-N%16)/16)
  + "0123456789ABCDEF".charAt(N%16);
}

function pw (form)
{

var d1, d2, d3;

if (navigator.appName == "Netscape"){
d1= getStyle('content', 'background-color'); 
} else {
d1= getStyle('content', 'backgroundColor'); 
}
     d2=form.Name.value;
     d3=form.Name2.value; 
```

首先，我不知道变量“R”、“G”和“B”在做什么？它们会影响变量“d1”吗？我知道变量“d2”和“d3”是他们所说的值，但是变量“d1”的值是什么？

一些帮助将不胜感激。肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:10:54.783

这段代码非常简单。变量 R、G 和 B 各包含一种颜色，R - 红色、G - 绿色和 B - 蓝色。仅当样式尚未以十六进制格式表示颜色时才会发生这种情况。它们在那里能够将颜色转换回十六进制并返回。所以是的，它们确实会影响变量 d1。如果要像这样设置背景颜色样式：背景颜色：#FF00FF d1 将是#FF00FF。如果要像这样设置背景颜色： background-color: rgb(00, 255, 00) d1 将是#0000FF，因为这个函数需要一些不存在的格式，例如：background-color: 00， 255, 00（这不是有效的 CSS）。

一般来说，这似乎是一个名称和编写不佳的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:09:58.510

`d1= getStyle('content', 'background-color');`将获得内容的背景颜色。如果它的形式是#000000，那么就返回它，如果它是红绿蓝格式（255,255,255），那么R，G，B用于存储该值，然后它转换为十六进制并以十六进制形式返回#000000

# c - 加入任何终止的线程

> ID：11821764
> 
> 赞同：3
> 
> 时间：2012-08-06T02:02:10.490
> 
> 标签：c, linux, unix, networking, pthreads

我正在编写一个 pthreading 网络应用程序（用 C 语言），并认为我应该创建一个线程来处理每个传入连接。但是，我不知道应该使用哪种设计，因为我必须将连接数限制为固定数量（比如 5）。

在阅读 pthread_join 的手册页时，我发现：

```
There is no pthreads analog of waitpid(-1, &status, 0), that  is,  "join  with  any terminated
thread". If you believe you need this functionality, you probably need to rethink your
application design. 
```

为什么是这样？我怎样才能实现我的目标？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:32:02.073

这是个好问题。

我认为手册页作者的标准推理是需要处理进程，`waitpid`否则它们会使资源悬而未决。pthreads 的情况并非如此。如果您不需要知道特定线程何时终止（或不需要其返回码），您可以将其设为分离线程；它结束了，就是这样。相反，如果你真的需要加入一个线程，你应该知道你需要加入哪个线程。

进一步考虑，父进程与其子进程之间存在直接的一对多关系。 `Waitpid`将等待其子代，操作系统将跟踪这些子代并将其交付给父代。无论创建多少代进程，这都会发生 - 父进程收获其子进程。

在线程程序中，任何线程都可以创建其他线程。在这种情况下，包罗万象`pthread_join`意味着什么？如果所有线程都打算与这个包罗万象的线程连接，那么一切都很好。但是对于某些线程确实需要与其子线程连接而其余线程可以由包罗万象连接的程序呢？`join`操作系统或 pthreads 如何在不构建大量基础架构的情况下 跟踪每种情况下的应用程序？

我想这是可能的，我想每个人都有机会希望`waitpid`在 pthreads 中有一个通用的类比，但这可能会带来很多开销，因为在实践中，这主要是一种烦恼。当您发现自己处于有多个线程要加入但您不知道哪个将首先结束的情况时，您可以构建一个队列（或使用管道或其他）并让垂死的线程指示它应该加入.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:51:37.490

由于线程不像进程那样组织在层次结构中，等待“任何”线程意味着任何线程都可以访问有关所有线程的全局信息。在某种数据结构（或其他）中组织此类信息将是一定的开销，因为所有线程的创建和终止都必须经过那里。这种开销是自愿避免的，线程意味着轻量级和快速。

还有另外一个方面，就是有连线都连不上去的，也就是一开始就拆了或者拆了的线。将这样的开销强加给他们将更不可接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T02:07:07.290

如果您要限制并发线程的数量，最好的办法是经常预先创建*所有*线程（工作者）并让它们在无限循环中运行，等待队列中的工作。

然后主线程负责将工作项（在这种情况下为连接）添加到该队列以供工作人员处理。

这样做的优点是简单和速度。简单，因为您不必担心线程启动或停止，除了一次，它们始终在运行并为工作项提供服务。

出于同样的原因速度。它就像一个固定大小的线程池。它还以最有效的方式处理工作项（工作负载会自动平衡，因为线程仅在完成前一项时才会请求新项）。

在伪代码中，这将类似于以下内容。主线只是简单地将工作项添加到队列中。一旦它完成了所有工作，它可以为每个线程发布一个特殊的完成工作项，然后等待它们全部完成。

```
def queue workqueue = empty

def main:
    # start the threads

    create threadId[5]
    for each threadId (i):
        threadId[i] = startThread (worker)

    # main work loop, finished with (for example) external signal.

    while not finished:
        get workitem from some source
        add workitem to workqueue

    # Place one special FINISH work item for each thread.

    for each threadId (i):
        add FINISH item to workqueue

    # Wait for all threads to exit, then exit main.

    for each threadId (i):
        wait for threadId[i] to exit

    exit 
```

工作线程同样简单。根据需要获取工作项并处理它们的无限循环。

如果工作项是完成工作项，则退出，保证每个线程获得一个且只有一个完成工作项：

```
def worker:
    # Simple infinite loop to get work items.

    while true:
        get workitem from workqueue

        # Exit if told to.

        if workitem is a FINISH item:
            break

        # Otherwise, process the item and loop around to request next.

        process workitem

    exit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T05:53:31.990

请允许我首先回应 paxdiablo 的建议，即您允许线程保持持久性，而不是允许它们终止并重新启动它们。此外，我赞同 selbie 的使用非阻塞 I/O 的建议，但我会将它与您的固定线程结合起来（我认为每个 CPU 只有 1 个）。同时使用这两种方法可以让您实现更高的工作量并最大限度地利用机器的 CPU 资源。

但是，要回答您的问题，如果您希望能够以终止顺序加入线程，则需要线程与收割者进行终止顺序通信。这可以相对简单地使用`pipe`. 当一个线程终止时，它将其写入`tid`管道，而收割者读取`tid`并执行`pthread_join`.

```
int tid_pipe[2];
pipe(tid_pipe);

void * thread_proc (void *arg) {
    /* ... */
    /* thread exiting */
    pthread_t me = pthread_self();
    write(tid_pipe[1], &me, sizeof(me));
    return 0;
} 

/* thread reaper */
while (read(tid_pipe[0], &tid, sizeof(tid)) == sizeof(tid)) {
    pthread_join(tid, &retval);
    /* ... */
} 
```

但是，作为替代方案，您可以让您的线程分离运行，而不用担心加入。相反，您可以使用条件变量让您的主线程知道何时可以启动另一个线程。

```
void * thread_proc (void *arg) {
    pthread_detach(pthread_self());
    /* ... */
    /* thread exiting */
    pthread_mutex_lock(&m);
    if (thread_count++ == 0) pthread_cond_signal(&c);
    pthread_mutex_unlock(&m);
    return 0;
}

/* thread spawner */
while (waiting_for_work()) {
    pthread_mutex_lock(&m);
    while (thread_count == 0) pthread_cond_wait(&c, &m);
    pthread_mutex_unlock(&m);
    /* ... handle work with new thread ... */
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-07T04:40:48.503

如果它是一个每个客户端一个线程的多线程服务器，只需将它们计数出来并重新计数。在客户端线程创建时（即在 accept() 线程中）以及在客户端-服务器线程退出之前使用“clientCount”int 的原子 inc/dec，如果计数 >5，则不再接受（）任何连接, （即直接从 accept() 线程发出“连接太多，稍后再试”页面，而不是创建新的服务器-客户端线程）。

试着忘记“加入”——想象一下你从未读过它。

# google-app-engine - 谷歌应用引擎数据存储上的嵌套事务

> ID：11821767
> 
> 赞同：0
> 
> 时间：2012-08-06T02:02:25.893
> 
> 标签：google-app-engine, transactions, google-cloud-datastore, objectify

如果我想要所有删除都执行全有或全无。

1.  如果什么都没有改变。删除组是原子的吗？
2.  如果我删除外部交易，会有什么变化吗？
3.  如果我只删除内部事务，组会是原子的吗？
4.  ig我用批量删除替换for-cycle并只留下外部事务？

```
    // 内部事件计划 dao
    公共无效删除（EventPlan eventPlan）{
      最终 Objectify ofy = Objectify.beginTransaction();
      尝试 {
        最终 ActivityDAO activityDao = new ActivityDAO();
        for（最终活动活动：eventPlan.getActivities（））{
          activityDao.delete(活动);
        }
        ofy.getTxn().commit();
      } 最后 {
        if (ofy.getTxn().isActive()) {
          ofy.getTxn().rollback();
        |
      }
    }

```

```

    // 内部活动 dao
    公共无效删除（活动活动）{
          最终 Objectify ofy = Objectify.beginTransaction();
       尝试 {
          // 在这里做一些逻辑，删除活动并提交 txn
       } 最后 {
          // 正常检查和回滚
       }
    }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:57:49.460

如果您使用 Objectify 3.1，那么所有事务都是[XG-transactions](https://developers.google.com/appengine/docs/java/datastore/overview#Cross_Group_Transactions)，它可以在最多 5 个不同的实体组上运行，即如果您的活动没有共同的父级（= 将它们放在同一个实体组中），那么您最多只能删除 5 个一笔交易。

1.  不，您正在使用并行事务（一个外部，多个内部）。
2.  不，外部事务没有执行任何操作，所以它什么也不做。有多个内部事务（循环），每个都在进行自己的删除。
3.  是的，您必须在一个事务中执行所有操作才能使操作成为原子操作。如果您删除内部交易，您就走在了正确的道路上。但是，实体组事务限制仍然适用：事务中涉及的所有实体必须属于同一个实体组，或者（因为默认启用 XG）最多五个不同的实体组（见上文）。请注意，如果您没有明确地将实体放入实体组（通过设置父级），那么每个实体都会获得它自己的实体组。
4.  是的，批量删除比循环删除更好（由于效率），但第 3 点中的所有事务规则仍然适用。

# jquery - 将字符串添加到 URL 的末尾 - jQuery

> ID：11821774
> 
> 赞同：0
> 
> 时间：2012-08-06T02:03:32.693
> 
> 标签：jquery, url, hyperlink, leaflet

我正在研究[http://www.mapgrams.com/](http://www.mapgrams.com/)

我手头的任务是创建一种链接到特定弹出窗口的方法。这样，人们可以分享他们喜欢的照片。

我希望有人点击缩略图，弹出窗口打开，url 更改为 mapgrams.com/645645345 或其他字符串。

任何人都知道如何最好地实现这一点？

此外，这里是回购[https://github.com/rsudekum/MapGrams](https://github.com/rsudekum/MapGrams)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:11:15.500

要在不刷新页面的情况下以编程方式更改 URL，您可以使用哈希，也可以使用 HTML5 历史 API。

要更改哈希，您只需执行

```
location.hash = 645645345; 
```

这会将 URL 更改为`site.com/#645645345`.

使用 HTML5 历史 API，您可以执行以下操作：

```
history.pushState(null, "", "645645345"); 
```

这会将 URL 更改为`site.com/645645345`.

请注意，并非所有浏览器（包括 IE<=9）都支持 HTML5 历史 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:35:50.597

[https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

我推荐 history.pushstate 的跨浏览器管理器和 pollyfill。它在可用时使用 html5 History api，在不可用时使用 hashchange。适用于深度链接以及浏览器历史记录控制。

# c - 在 C 中解析日期 Http Header 的简单方法是什么？

> ID：11821779
> 
> 赞同：2
> 
> 时间：2012-08-06T02:04:49.927
> 
> 标签：c, http, parsing, email, date

我想解析一个电子邮件 http 日期标头，有没有一种简单的方法可以在不编写我自己的字符串解析函数的情况下做到这一点？

例子：

```
Date: Fri, 19 Mar 2010 11:44:02 -0700 
```

为了澄清，解析`Date:`部分很容易，我在谈论实际的日期字符串。理想情况下，id 喜欢获取纪元时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:10:34.890

如果它在您的目标系统（例如 Linux）中可用，您可以使用[`strptime`](http://linux.die.net/man/3/strptime).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-15T13:02:03.500

[libcurl](https://curl.haxx.se/libcurl/)也有一个功能：

```
time_t curl_getdate(char *datestring, time_t *now ); 
```

如果你不想链接整个库，你可以从这里复制代码：[https ://github.com/curl/curl/blob/master/lib/parsedate.c](https://github.com/curl/curl/blob/master/lib/parsedate.c)

# java - Java：实现一个实例化特定类型集合的泛型方法

> ID：11821783
> 
> 赞同：4
> 
> 时间：2012-08-06T02:05:20.847
> 
> 标签：java, generics, collections

我想实现一个类似于以下内容的通用方法：

```
private <T> void addToSize(ArrayList<T> list, Class<T> type, int size) {
    int currentSize = list.size();

    for(int i = currentSize; i < size; i++) {
        try {
            list.add(type.newInstance());
        } catch (InstantiationException e) {
            logger.error("", e);
        } catch (IllegalAccessException e) {
            logger.error("", e);
        }
    }
} 
```

上面的方法适用于这样的事情：

```
ArrayList<Integer> test = new ArrayList<Integer>();
addToSize(test, Integer.class, 10); 
```

但我也希望它适用于...

```
ArrayList<ArrayList<Integer>> test = new ArrayList<ArrayList<Integer>>();
addToSize(test, ArrayList.class, 10); //Is this possible? 
```

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T06:22:42.863

您可以使用[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)：

```
public interface Factory<T> {
    public T create();
}

private static <T> void addToSize( ArrayList<T> list, Factory<T> factory, int size ) {
    int currentSize = list.size();

    for ( int i = currentSize; i < size; i++ ) {
        list.add( factory.create() );
    }
} 
```

然后对于您的示例（匿名实施）：

```
ArrayList<ArrayList<Integer>> test2 = new ArrayList<ArrayList<Integer>>();
addToSize( test2, 
    new Factory<ArrayList<Integer>>() {
       public ArrayList<Integer> create() { 
           return new ArrayList<Integer>( );
       }
    }, 10 ); // compiles 
```

很酷的一点是该类不需要默认构造函数，您可以将值传递给它的构造函数和/或使用[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)。方法实现的复杂性`create()`是任意的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T09:06:46.997

你可以这样做

```
ArrayList<ArrayList<Integer>> test = new ArrayList<ArrayList<Integer>>();
addToSize(test, (Class<ArrayList<Integer>>)(Class<?>)ArrayList.class, 10); 
```

类文字总是`Class`使用原始类型参数化。用通用的东西把它变成一个`Class`参数化的东西有点棘手。

# c++ - c++，读取文件，分段错误

> ID：11821784
> 
> 赞同：0
> 
> 时间：2012-08-06T02:05:32.330
> 
> 标签：c++, c, file, io, segmentation-fault

我正在研究这个功能读取。我使用的`main`文件I / O没有问题，它连接正常，关闭，文件也可以。但是，在阅读结束时我遇到了分段错误。我已经尝试打印出来进行测试，错误是读取最后一行。它完成了 string 的最后一行的读取`a`，然后`x`, 然后`in.good()`也变为 false。我也尝试过重置`in.clear()`，`a="";`如果`in.good`变为假，则设置字符串。没有任何工作。

```
read(istream& in){
    string a;
    int x;
    in>>a;
    while( in.good() ){
        in>>x;
        char *ch;
        strcpy( ch, a.c_str() );
        Word cwd(ch);
        anObject.add(cwd,x);   
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T02:10:54.760

您会看到一个段错误，因为您没有为 分配空间`ch`，然后您尝试在其上复制一个字符串。`ch`是一个不属于你的未初始化内存地址。

您需要为字符串分配空间：

```
char *ch = new[(MAX_SIZE + 1) * sizeof(char)]; 
```

但是为什么你需要在`char *`这里？请注意，如果必须有 C 字符串，则始终可以传递`a`和使用。`a.c_str()`我不确定是什么`Word`，或者它是否需要它自己的字符串副本，但你可以使用：`Word cwd(a.c_str())`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:10:55.747

看来您没有为`char *ch`. 定义此变量的那一刻，它是堆栈上的随机值。在清理内存时（手动或在函数返回时自动）写入随机内存会损坏内存并导致段错误。

# twitter-bootstrap - 非响应式固定布局不是 940px

> ID：11821785
> 
> 赞同：0
> 
> 时间：2012-08-06T02:05:34.420
> 
> 标签：twitter-bootstrap

我发现 Twitter Bootstrap 非常令人沮丧，因为即使使用非响应式样式表，布局的整体宽度也超过了 940 像素。Twitter bootstrap 声称如果你不使用响应式样式表，那么 940px 是默认宽度。我没有使用响应式样式表，而是使用了固定列，但我仍然发现布局的宽度更接近 1170px。

我的布局具有以下结构：

```
<div id="wrapper">
    <div class="row">
        <div class="span8"></div>
        <div class="span4"></div>
    </div>
</div> 
```

我将包装器 div 的宽度设置为 960 像素（这应该足以包含两个子 div），但两个 div 的宽度是两个，可以内嵌在包装器 div 中。我在这里错过了什么吗？根据 Bootstrap 的说法，一个 8 和 4 跨度的 div 最终应该只占用 940px。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:26:48.350

我愚蠢地忘记删除 340px 的侧边栏宽度样式。它实际上是具有默认非响应式固定布局的正确宽度。向真正被这件事难住的人表示抱歉！

# java - 变量不会更新（在 Java 中）

> ID：11821795
> 
> 赞同：2
> 
> 时间：2012-08-06T02:07:31.407
> 
> 标签：java, variables, updating

我现在正在开发的游戏遇到问题；这段代码的目的是改变窗口中 JComponent 的位置。这就是我希望它发挥作用的方式：

1：程序启动，创建640x640像素的JFrame；JComponent 在直接中心绘制。

2：当按下“ESC”时，JFrame会炸到全屏；JComponent 在直接中心绘制。

3：当JFrame在全屏时按下“ESC”，它会恢复到原来的大小。

我遇到的问题是 JComponent 没有被重新绘制到全屏的中心，尽管我努力更新变量。我决定尝试通过执行三个 System.out.println 测试来调试它：第一个测试“A”在 setLocation 方法中打印参数“loc”的值。第二个，“B”，打印点“位置”的值，将其值从原始值更改为参数给定的值。

第三个测试“C”在 setLocation 中通过 repaint 调用 paintComponent 方法时精确给出，它打印 location 的值，如测试“B”。这就是事情搞砸的地方。

首次绘制 JFrame 时会给出第一组测试；JComponent 的位置在每个测试中都是相同的。第二组测试是在调整 JFrame 大小时给出的；JComponent 的位置应在 setLocation 方法中更新，如“A”和“B”所示。但是，当我在测试“C”中调用位置时，该位置将恢复为 JFrame 的原始位置。

```
public void setLocation(Point loc)
{
    location = new Point(loc.x, loc.y);
    System.out.println(loc + "A"); System.out.println(location + "B");
    repaint();
}
public void paintComponent(Graphics g)
{
    System.out.println(location + "C");
    Graphics2D g2 = (Graphics2D)(g);

    BufferedImage x = null;
    if(isMale)x = mobs[0];  else    x = mobs[1];
    g2.drawImage(rotate(x, direction), null, (int)location.getX(), (int)location.getY());
}

private Point location = new Point(280, 280); 
```

输出：

java.awt.Point[x=280,y=280]A

java.awt.Point[x=280,y=280]B

java.awt.Point[x=280,y=280]C

java.awt.Point[x=1880,y=1040]A

java.awt.Point[x=1880,y=1040]B

java.awt.Point[x=280,y=280]C

java.awt.Point[x=280,y=280]A

java.awt.Point[x=280,y=280]B

java.awt.Point[x=280,y=280]C

如果有人能帮我弄清楚为什么点“位置”在更新后不停留在 (1880, 1040)，然后重新粉刷，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:32:07.957

我将其更改为答案：

你的方法不应该`setLocation(...)`覆盖调用它的超级方法吗？如果没有，它就不会做它需要做的事情。而且我不确定它应该调用`repaint()`. 另外，保存 JComponent 的容器使用什么布局？有几种方法可以使容器中的组件居中，包括使用 GridBagLayout 和添加没有 GridBagConstraints 的组件，这是默认方式。最后，考虑创建并发布一个[sscce](http://sscce.org)以更好地展示您的问题。

# php - linux中的XML解析，打印多个元素

> ID：11821796
> 
> 赞同：1
> 
> 时间：2012-08-06T02:07:35.590
> 
> 标签：php, xml, linux, bash, rss

所以我在网上找到了一个我想要使用的用于在 linux 中解析 xml 的脚本，我希望能在理解该脚本的工作原理以及如何编辑它以供我自己使用方面获得一些帮助。

这是脚本（[信用](http://6502cpu.blogspot.com/2012/03/rss-news-headlines-prompter-update.html)）

```
#!/bin/bash

cat $1 | awk '

START {    pos=1;    xml=$0    len=length(xml);    endp=1 }

{    while(pos <= len)    {
      if(substr(xml,pos,7) == "<title>")
      {
         pos=pos+7;
         endp=pos;
         while((substr(xml,endp,8) != "</title>") && (endp < len))
         {
            endp++;
         }
         print "   ",substr(xml,pos,endp-pos)," * ";
         pos=endp+7;
      }
      pos++;    } }' 
```

[这](http://pastie.org/4397264)是我将使用的 xml 数据的简化示例

我已经去掉了标签两边的多余字符，并通过将脚本更改为此进行了一些其他调整

```
 #!/bin/bash

    cat $1 | awk '

    START {    pos=1;    xml=$0    len=length(xml);    endp=1 }

    {    while(pos <= len)    {
          if(substr(xml,pos,16) == "<sport><![CDATA[")
          {
             pos=pos+16;
             endp=pos;
             while((substr(xml,endp,11) != "]]></sport>") && (endp < len))
             {
                endp++;
             }
             print "",substr(xml,pos,endp-pos),"";
             pos=endp+10;
          }
          pos++;    } }' 
```

所以使用这个脚本给我留下了一个带有这个结果的纯文本文件

```
Women's Soccer
Men's Soccer
Women's Soccer 
```

最终我希望有一个脚本输出以下

```
Women's Soccer Away @ South Carolina (Exhibition) at 7:00 PM
Men's Soccer Home vs. Ohio State at 7:00 PM
Women's Soccer Away @ William and Mary at 7:00 PM 
```

对于那些想知道的人，这是调用解析脚本的 shell（忽略文件名和位置）

```
wget -O rss.xml http://en-us.fxfeeds.mozilla.com/en-US/firefox/headlines.xml
        ~dsl/bin/rssparse! rss.xml > headlines_$$.tmp
        cd /tmp/ldmtrx
        split --lines=30 /tmp/headlines_$$.tmp ldmtrxnews
        cd /tmp
        rm headlines_$$.tmp rss.xml 
```

虽然将不胜感激，但我不希望任何人为我完成这项任务，我真的很想要一些提示和帮助入门。我不确定如何在不同的元素上运行此脚本，然后打印两个元素（例如`<sport>`和`<homeaway>`）我可以再次运行该脚本，但是这些元素将打印在不同的行上。

最后，我想知道如何排除所有`<date>`与今天日期不匹配的数据。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:03:14.307

您必须知道您的示例缺乏验证。它需要一些调整

检查[这个馅饼](http://pastie.org/pastes/4408130/download)而不是[那个馅饼](http://pastie.org/pastes/4397264/download)

然后使用[xmlstarlet](http://xmlstar.sourceforge.net/doc/UG/ch04s01.html)你可以取代这个脚本所做的一切。

```
$ wget --output-document - http://pastie.org/pastes/4408130/download | xmlstarlet sel -t -m rss/channel/item -v sport -o ' Away @ ' -v opponent -o ' at ' -v time -na 
```

输出：

```
Women's Soccer Away @ South Carolina (Exhibition) at 7:00 PM
Men's Soccer Away @ Ohio State (Exhibition) at 7:00 PM
Women's Soccer Away @ William and Mary at 7:00 PM 
```

当输出是你需要的时候，你可以使用**-C**和 xmlstarlet 来显示一个 xml 模板，你可以使用任何你需要特定解析的语言来获取。

# powershell - 使用 PowerShell 将文件上传到 FTP，但文件名是动态的

> ID：11821799
> 
> 赞同：0
> 
> 时间：2012-08-06T02:08:17.200
> 
> 标签：powershell

我有多个文件需要发送到 FTP 站点。这些文件始终为 .CSV，但文件名不断变化。

我有一个可以成功发送文件的 PowerShell 脚本。但是代码具有硬编码的文件名。我似乎找不到动态选择文件名并将其写入具有动态文件名的 FTP 站点的方法。（希望这是有道理的）

有人可以帮忙吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:05:09.660

还有其他可以使用的属性吗？例如，在我的情况下，我经常必须选择目录中的最新文件。我使用 LastWriteTime 属性做了类似的事情。

```
$lastWrittenCSV = Get-ChildItem -Path C:\csvFiles\ -Filter *.csv | Sort-Object -Descending LastWriteTime | Select-Object -First 1 
```

然后，您可以针对`$lastWrittenCSV.FullName`（完整路径）运行脚本并将其上传为`$lastWrittenCSV.Name`（仅文件名）。

您甚至可以使用某种标志文件来跟踪自上次上传以来哪些文件是新文件，然后上传它们：

```
$flagFile = Get-Item C:\csvFiles\lastupload.flg

Get-ChildItem -path C:\csvFiles\ -Filter *.csv | ? {$_.LastWriteTime -gt $flagFile.lastWriteTime} | ForEach {Upload-File $_.FullName}

New-Item -ItemType File -Force -Path $flagFile.FullName 
```

祝你好运！

# windows - 我在哪里可以找到 Windows 应用程序的 UI“标准”

> ID：11821800
> 
> 赞同：1
> 
> 时间：2012-08-06T02:08:24.220
> 
> 标签：windows, hig

在哪里可以找到 Windows 应用程序用户界面的标准指南？我做了一个没有运气的搜索，但必须有某种关于如何处理操作的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:11:01.973

叹息……平常的事。问了之后才找到。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa511440.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511440.aspx)

# java - 如果可以使用 synchronized(this)，为什么还要使用 ReentrantLock？

> ID：11821801
> 
> 赞同：352
> 
> 时间：2012-08-06T02:08:39.677
> 
> 标签：java, multithreading, concurrency, synchronize, reentrantlock

我试图了解是什么让并发锁如此重要，如果可以使用`synchronized (this)`. 在下面的虚拟代码中，我可以执行以下任一操作：

1.  同步整个方法或同步易受攻击的区域 ( `synchronized(this){...}`)
2.  或使用 ReentrantLock 锁定易受攻击的代码区域。

代码：

```
 private final ReentrantLock lock = new ReentrantLock(); 
    private static List<Integer> ints;

    public Integer getResult(String name) { 
        .
        .
        .
        lock.lock();
        try {
            if (ints.size()==3) {
                ints=null;
                return -9;
            }   

            for (int x=0; x<ints.size(); x++) {
                System.out.println("["+name+"] "+x+"/"+ints.size()+". values >>>>"+ints.get(x));
            }

        } finally {
            lock.unlock();
        } 
        return random;
} 
```

* * *

## 回答 #1

> 赞同：522
> 
> 时间：2012-08-06T02:29:48.763

与构造不同，ReentrantLock[是](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html)非结构化*的*`synchronized`——也就是说，您不需要使用块结构进行锁定，甚至可以跨方法持有锁定。一个例子：

```
private ReentrantLock lock;

public void foo() {
  ...
  lock.lock();
  ...
}

public void bar() {
  ...
  lock.unlock();
  ...
} 
```

这种流不可能通过构造中的单个监视器来表示`synchronized`。

* * *

除此之外，还`ReentrantLock`支持[锁轮询](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock())和[支持超时的可中断锁等待](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock(long,%20java.util.concurrent.TimeUnit))。`ReentrantLock`还支持可[配置的*公平*策略](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock(boolean))，允许更灵活的线程调度。

> 此类的构造函数接受一个可选的*公平*参数。设置时`true`，在争用情况下，锁有利于授予对等待时间最长的线程的访问权限。否则，此锁不保证任何特定的访问顺序。使用由许多线程访问的公平锁的程序可能会显示出比使用默认设置的程序更低的整体吞吐量（即，更慢；通常要慢得多），但在获取锁和保证不会出现饥饿的情况下具有较小的时间差异。但是请注意，锁的公平性并不能保证线程调度的公平性。因此，使用公平锁的许多线程之一可能会连续多次获得它，而其他活动线程没有进展并且当前没有持有锁。另请注意，不定时`tryLock`方法不遵守公平设置。如果锁可用，即使其他线程正在等待，它也会成功。

* * *

`ReentrantLock` **也**可能[**更具可扩展性**](http://lycog.com/concurency/performance-reentrantlock-synchronized/)，在更高的争用下表现得更好。[您可以在此处](http://www.ibm.com/developerworks/java/library/j-jtp10264/)阅读有关此内容的更多信息。

然而，这一说法受到了质疑；请参阅以下评论：

> 在重入锁测试中，每次都会创建一个新锁，因此没有排他锁，结果数据无效。此外，IBM 链接没有提供底层基准测试的源代码，因此无法确定测试是否正确进行。

* * *

什么时候应该使用`ReentrantLock`s？根据那篇 developerWorks 文章...

> 答案很简单——当你真正需要它提供的东西时使用它`synchronized`，比如定时锁等待、可中断锁等待、非块结构锁、多个条件变量或锁轮询。`ReentrantLock`也有可扩展性的好处，如果你确实有一个表现出高争用的情况，你应该使用它，但请记住，绝大多数`synchronized`块几乎没有表现出任何争用，更不用说高争用了。我建议使用同步进行开发，直到同步被证明是不够的，而不是简单地假设“性能会更好”，如果你使用`ReentrantLock`. 请记住，这些是高级用户的高级工具。（而且真正高级的用户往往更喜欢他们能找到的最简单的工具，直到他们确信这些简单的工具是不够的。）和往常一样，先把它做好，然后再考虑是否必须让它更快。

* * *

在不久的将来会变得更加相关的最后一个方面与[Java 15 和 Project Loom](http://cr.openjdk.java.net/%7Erpressler/loom/loom/sol1_part1.html#pinning)有关。`ReentrantLock`在虚拟线程的（新）世界中，底层调度程序将能够比它能够更好地工作`synchronized`，至少在最初的 Java 15 版本中是这样，但以后可能会进行优化。

> 在当前的 Loom 实现中，可以在两种情况下固定虚拟线程：当堆栈上有一个本地框架时——当 Java 代码调用本地代码 (JNI)，然后再回调到 Java 时——以及在`synchronized`块或方法内部时. 在这些情况下，阻塞虚拟线程将阻塞承载它的物理线程。一旦本机调用完成或释放监视器（`synchronized`退出块/方法），线程将被取消固定。

> 如果您有一个由 a 保护的常见 I/O 操作`synchronized`，请将监视器替换为 a`ReentrantLock`以让您的应用程序充分受益于 Loom 的可扩展性提升，甚至在我们修复监视器固定之前（或者，`StampedLock`如果可以的话，最好使用更高性能） .

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-06T02:10:55.810

[`ReentrantReadWriteLock`](https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)是专用锁，而是`synchronized(this)`通用锁。它们相似但不完全相同。

你是对的，你可以使用`synchronized(this)`代替，`ReentrantReadWriteLock`但相反的情况并不总是正确的。

如果您想更好地了解什么是`ReentrantReadWriteLock`特殊的，请查看有关生产者-消费者线程同步的一些信息。

一般来说，您可以记住，全方法同步和通用同步（使用`synchronized`关键字）可以在大多数应用程序中使用，而无需*过多*考虑同步的语义，但是如果您需要从代码中挤出性能，则可能需要探索其他更细粒度或专用同步机制。

顺便说一句，使用`synchronized(this)`- 并且通常使用公共类实例锁定 - 可能会出现问题，因为它会使您的代码面临潜在的死锁，因为其他人可能会在不知情的情况下尝试锁定程序中其他地方的对象。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-04-24T18:29:07.177

[来自关于ReentrantLock](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html)的 oracle 文档页面：

> 一种可重入互斥锁，其基本行为和语义与使用同步方法和语句访问的隐式监视器锁相同，但具有扩展功能。

1.  **ReentrantLock**由上次成功锁定但尚未解锁的线程拥有。当锁不被另一个线程拥有时，调用锁的线程将返回，成功获取锁。如果当前线程已经拥有锁，该方法将立即返回。

2.  此类的构造函数接受一个可选的*公平*参数。当设置为 true 时，在争用情况下， *锁有利于授予对等待时间最长的线程的访问权限*。否则，此锁不保证任何特定的访问顺序。

*根据[本文的](http://javarevisited.blogspot.com/2013/03/reentrantlock-example-in-java-synchronized-difference-vs-lock.html#ixzz3uIbhr77e)*ReentrantLock关键功能**

 *1.  能够中断锁定。
2.  等待锁定时超时的能力。
3.  创建公平锁的权力。
4.  用于获取锁定等待线程列表的 API。
5.  灵活地尝试锁定而不阻塞。

您可以使用 *ReentrantReadWriteLock.ReadLock、ReentrantReadWriteLock.WriteLock*进一步获得对读取和写入操作的粒度锁定的控制。

看看Benjamen的这篇[文章，了解不同类型的](http://winterbe.com/posts/2015/04/30/java8-concurrency-tutorial-synchronized-locks-examples/)*ReentrantLocks的用法*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-06T12:34:41.897

**同步锁**不提供任何等待队列机制，在该机制中，在一个线程执行后，任何并行运行的线程都可以获取锁。因此，系统中存在并运行较长时间的线程永远不会有机会访问共享资源，从而导致饥饿。

**可重入锁**非常灵活并且有一个公平策略，如果一个线程等待更长的时间并且在当前正在执行的线程完成后，我们可以确保更长等待的线程有机会访问共享资源，从而减少系统的吞吐量并使其更加耗时。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-18T18:59:15.150

您可以使用带有公平策略或超时的可重入锁来避免线程饥饿。您可以应用线程公平策略。这将有助于避免线程永远等待获取您的资源。

```
private final ReentrantLock lock = new ReentrantLock(true);
//the param true turns on the fairness policy. 
```

“公平政策”选择下一个可运行的线程来执行。它基于优先级，自上次运行以来的时间，等等

另外，如果 Synchronize 无法逃脱阻塞，它可以无限期阻塞。可重入锁可以设置超时。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-22T05:15:05.560

要记住的一件事是： “ *ReentrantLock*

” 这个名称给出了关于其他锁定机制的错误信息，即它们不能重入。**这不是真的。**通过“同步”获取的锁在 Java 中也是可重入的。

 ***关键区别在于“同步”使用内部锁（每个 Object 都有），而 Lock API 没有。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-14T07:39:39.207

让我们假设这段代码在一个线程中运行：

```
private static ReentrantLock lock = new ReentrantLock();

void accessResource() {
    lock.lock();
    if( checkSomeCondition() ) {
        accessResource();
    }
    lock.unlock();
} 
```

因为线程拥有锁，所以它允许多次调用lock()，所以它重新进入锁。这可以通过引用计数来实现，因此它不必再次获取锁。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-16T01:02:17.597

我认为 wait/notify/notifyAll 方法不属于 Object 类，因为它使用很少使用的方法污染了所有对象。它们在专用的 Lock 类上更有意义。所以从这个角度来看，也许最好使用专门为手头工作而设计的工具——即ReentrantLock。****

# php - 从不同的地方提交表格 HTML

> ID：11821803
> 
> 赞同：0
> 
> 时间：2012-08-06T02:09:41.843
> 
> 标签：php, html

我在使用 2 个不同的 div（标签）提交表单时遇到问题。我想提交此表单中的所有值.. 但是当我提交时，我仅从 (div class="tab1") 而不是从 div class="tab2" 收到的值。即使使用不同的 div，我如何提交所有值

页面.php

```
<div class="tab1">
<h2>Basic Information</h2>
<form name="pages_details" method="post" action="pages/save_pages.php">
<table>  
    <tr>  
        <td>Name:</td>  
        <td><input name="name" type="text" ></input></td>  
    </tr>  
    <tr>  
        <td>Order:</td>  
        <td><input name="ord" type="text"></input></td>  
    </tr> 
</table>
</div>
<div class="tab2">
<h2>Additional Information</h2>
<table>  
 <tr>  
    <td>Special:</td>  
    <td><input name="special" type="text" ></input></td>  
 </tr> 
 <tr>  
    <td>Title:</td>  
    <td><input name="title" type="text"></input></td>  
 </tr> 
</table>
</div>
<input type="submit" name="save" value="save">
</form> 
```

save_pages.php

```
<?php
$name = $_REQUEST['name'];
$ord = $_REQUEST['ord'];
$special = $_REQUEST['special'];
$title = $_REQUEST['title'];

echo $name;
echo $ord;
echo $special;
echo $title;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:28:13.273

尝试确保以正确的顺序关闭标签。像这样构建代码可能会导致一些奇怪的错误。

**不对：**

```
<div>
<form>    
</div>
</form> 
```

所以你可能想这样做。

```
<form>
<div>
</div>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:33:41.887

我建议根据您的情况使用 jquery ajax 提交表单。

例如：

```
var datas = $(form).serialize();
$.post("pages/save_pages.php", datas, function(){

}); 
```

参考：post - [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) 序列化 - [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# c# - 根据 API 使用情况动态创建编译器错误？

> ID：11821814
> 
> 赞同：4
> 
> 时间：2012-08-06T02:10:12.300
> 
> 标签：c#, java, compiler-construction, compiler-errors, static-analysis

不知道如何搜索这个问题的答案，但我想知道在 Java、C#、Scala 等编译语言中是否有办法......在错误使用 API 的情况下强制出现编译器错误。

假设您正在使用某种 API，并且您知道在调用其他方法 Y 之前需要调用特定的设置方法 X，是否可以进行设置以使编译器能够捕获错误并避免这样做所以在运行时？

这对于强制执行某些代码标准或修复损坏的 API 非常有用。不知道它是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:54:27.743

通常，您不能在大多数静态语言中创建任意自定义编译时错误。有一些例外（例如`#error`C 和 C++ 中的指令，但即便如此，预处理器也严格位于主编译之前，因此无济于事）。

但是，您可以利用专门设计用于在编译时捕获错误的语言功能：

## 类型系统是你的朋友。

要求按特定顺序调用方法对 API 使用者不友好，并且是高级语言中的代码异味。

一个简单的解决方案是公开一个以正确顺序执行这两个操作的方法。更一般地（例如，如果不必调用第二个方法），让第二个方法调用顶部的第一个方法。但大概您希望调用受 API 使用者的控制。

在这种情况下，重构你的代码，这样就不可能在不产生类型错误的情况下以错误的顺序调用方法。例如，假设您正在编写一个正则表达式库，其中必须在匹配之前编译正则表达式。在 Scala 中，重构：

```
class Regex(pattern : String) {
    private[this] var compiled : Option[CompiledData] = None
    def compile() {
        // do stuff
        this.compiled = ...
    }
    def search(s : String) : MatchResult = compiled match {
        case Some(c) => ... // match the string
        case None => throw new IllegalStateException("must compile regex first")

    }
} 
```

到

```
class Regex(pattern : String) {
    def compile : CompiledRegex = {
        // do stuff
        CompiledRegex(...)
    }
}
class CompiledRegex(c : CompiledData) {
    def search(s : String) : MatchResult = {
        ... // match the string
    }
} 
```

由于该`search`方法现在仅在 上可用`CompiledRegex`，并且`CompiledRegex`是通过调用来获得的，因此在通过编译正则表达式使该操作有效之前`Regex.compile`不可能调用。`search`

此设置还有助于 API 使用者，因为如果用户需要一个类型的对象`MatchResult`并且已经键入`new Regex("[abc123]*")`，一个好的 IDE 可以自动完成或建议所需的方法`.compile`；这在原始设置中是不可能的。

（在这个例子中，它也不再需要可变状态，这在 Scala 中经常被避免。）

## 静态断言

作为替代解决方案，某些语言（我认为 D 和 C++11，虽然不是您列出的那些）支持静态断言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T15:45:22.770

[NDepend（用于 .NET）](http://www.ndepend.com/)或[JArchitect（用于 java）](http://www.jarchitect.com/)等工具允许[在 LINQ 查询](http://www.ndepend.com/Features.aspx#CQL)上编写自定义代码规则，这些规则可以在分析时（[在 IDE](http://www.ndepend.com/Doc_VS_CQL.aspx)中或[在构建过程时](http://www.ndepend.com/Doc_CI_Report.aspx#CQLRule)）发出[警告或错误。](http://www.ndepend.com/Doc_CI_CriticalRule.aspx)例如，下面的 CQLinq 代码规则强制如果一个方法正在调用，它必须调用：`MethodA()``MethodB()`

```
warnif count > 0 
from m in Application.Methods where
 m.IsUsing("MyNamespace.MyClass.MyMethodA()") &&
!m.IsUsing("MyNamespace.MyClass.MyMethodB()")
select m 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T02:20:15.697

特定函数的使用在编译器操作之外的另一个层面上......因此我认为编译器不应该做那样的事情......

另一方面：编译器通常集成到 IDE 中……你为什么不把它也放到 IDE 模块中呢？... 大多数 IDE 允许预编译器操作 ...

您可以编写某种检查工具（基于 CodeDOM 或类似的东西）来测试特定功能的使用，并根据该检查结果，如果质量标准不匹配，则中止编译器运行......

# php - MySql 数据库 INSERT 操作在硬盘（本地主机）上工作，但在 Internet 上托管时不工作

> ID：11821825
> 
> 赞同：1
> 
> 时间：2012-08-06T02:10:58.823
> 
> 标签：php, javascript, mysql, ajax

我的网站中有一个 INSERT 操作，它的工作原理是这样的。

1.  当按下按钮时，在 index.html 文件中调用一个 javascript 函数。
2.  在 javascript 函数中，AJAX 用于将请求发送到带有必要参数的 php 文件
3.  php 文件访问数据库插入数据。

上述任务的代码供您参考。

2.Javascript函数

```
function grandFinale()
{
        if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    //document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","insert.php?q=&name=" + encodeURIComponent(document.getElementById('name').value) + "&txtScore1=" + encodeURIComponent(document.getElementById('txtScore1').innerHTML),true);
xmlhttp.send();
document.location.reload();

} 
```

1.HTML按钮

```
<p id="txtScore1" align="center" style="color: #cc6699; font-size: 18px; "></p>
<label class="control-label" for="input01">Name</label>
<a href="#" class="btn btn-primary" onclick="javascript:grandFinale()" >Submit My Score</a> 
```

3.PHP脚本

```
<?php
    $con = mysql_connect("host","uname","pword");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("dbname", $con) or die( "Unable to select database");

    $sql="INSERT INTO 'masterTable' ('Name', 'Score') VALUES ('{$_GET['name']}','{$_GET['txtScore1']}')";

    if (!mysql_query($sql,$con))
      {
      die('Error: ' . mysql_error());
      }
    echo "1 record added";

    mysql_close($con);
    ?> 
```

当我在硬盘上本地尝试时一切正常，但在我将它托管在 000webhost.com 上之后，INSERT 不起作用。你能建议我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:14:10.583

我将首先检查您在 000webhost.com 上为数据库 (uname) 设置的用户是否具有 INSERT 权限。

# javascript - 如何调试遗留的 javascript 代码（在 IE 上工作正常，但在谷歌浏览器中异常）

> ID：11821839
> 
> 赞同：0
> 
> 时间：2012-08-06T02:14:08.010
> 
> 标签：javascript, google-chrome

一般来说，问题是“当代码在 IE 中运行良好但在 Google Chrome 中异常时，调试遗留 javascript 代码的建议例程是什么”？

我有一个遗留程序。我遇到了以下问题：

1.  一个JSP页面调用后端java servlet，servlet返回一个html表。
2.  此 HTML 表已按 servlet 排序。
3.  这个 HTML 表格受到本地 JS 和 CSS 的影响，使其更加美观。
4.  在 IE8、Safari 和 Firefox 中一切正常。
5.  但该表在谷歌浏览器中出现异常。结果在这里不再排序。

上述情况不是javascript语法错误。那么我该如何以及从哪里开始解决它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:23:04.723

好吧，您应该使用`alert()`,`console.log()`或将其设置为的 innerHTML`<div id="log"></div>`以获取 servlet 返回的 html 表。然后，每次你的 js 的指令修改它的代码时，再做一次。

通过这种方式，您会发现您的代码中的哪条指令在 Chrome 上无法正常工作，找出原因以及如何工作。

然后，根据浏览器使用条件执行不同的指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:32:03.790

通过使用 Google Chrome 中的开发人员工具。在操作之前添加断点并将涉及的变量添加到`watch expression`面板。逐行调试并观察变量变化——你将能够看到哪里出了问题。方法如下：[https ://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)

# html - 调试不在 html5 中的网站

> ID：11821844
> 
> 赞同：0
> 
> 时间：2012-08-06T02:14:44.227
> 
> 标签：html, debugging, web, web-testing

我有一个 html5 网站，如果浏览器不支持 html5，我想确保它正常降级。我已经连续搜索了几个小时，但我只找到了 1 个甚至不再工作的 Firefox 扩展。有人可以在这里提出一些帮助我的建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:34:00.670

如果您运行的是 Windows，请获取[http://www.my-debugbar.com/wiki/IETester/HomePage](http://www.my-debugbar.com/wiki/IETester/HomePage)

IE Tester 允许您在所有版本的 IE 中查看您的站点。

如果它在 IE 中优雅地降级，它会**在任何地方**优雅地降级。

# php - 为不是函数 mssql_query 的对象 Foo 提供的参数

> ID：11821845
> 
> 赞同：0
> 
> 时间：2012-08-06T02:14:56.900
> 
> 标签：php, sql, sql-server

我正在尝试使用以下 SQL 命令插入记录

```
 INSERT INTO my_table (foo, bar) VALUES ('test1','test2') 
```

但是我似乎遇到了以下错误：

```
 Command execution failed: Parameters supplied for object 'my_table' which is not a function. If the parameters are intended as a table hint, a WITH keyword is required. 
```

它在 SQL 管理器中执行得很好，没有任何问题，但是我无法让它在 mssql_query 中执行。关于为什么阻止记录插入的任何想法？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T03:45:41.587

很可能有一些函数与您的表名同名。因此 SQL 尝试调用该函数，但参数编号等不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:29:38.577

如果您收到这样的错误，很可能您有类似以下内容的查询字符串：

```
 INSERT INTO table_name() VALUES... 
```

结果，SQL 认为您正在尝试访问一个函数

# ruby-on-rails - heroku 错误 - 尝试将更新推送到我的应用程序时，权限被拒绝（公钥）。

> ID：11821851
> 
> 赞同：1
> 
> 时间：2012-08-06T02:16:49.910
> 
> 标签：ruby-on-rails, ruby, heroku, ssh, key-generator

> **可能重复：**
> [部署 heroku 代码时权限被拒绝（公钥）。致命：远端意外挂断](https://stackoverflow.com/questions/4269922/permission-denied-publickey-when-deploying-heroku-code-fatal-the-remote-end)

尝试将项目更新推送到heroku并获得

权限被拒绝（公钥）。

我之前已经推过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:17:16.040

将本地密钥上传到heroku。

个人本地密钥在`~/.ssh`或如果没有，它们可以生成`ssh-keygen`

`heroku keys:add ~/.ssh/id_rsa.pub`从应用程序根目录执行的答案。

# javascript - 使用 Javascript 连接到 WCF Web 服务

> ID：11821863
> 
> 赞同：1
> 
> 时间：2012-08-06T02:21:29.980
> 
> 标签：javascript, jquery, asp.net, wcf, web-services

有谁知道如何使用 Javascript 连接到 WCF Web 服务？

此时我需要的只是实际连接到 Web 服务，并收到连接成功的通知。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:24:18.503

鉴于您已正确编写/配置您的/WCF 服务，您应该能够加载以下 url：

```
http://somedomain.com/somewcfservice.svc/jsdebug 
```

并调用公开的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:07:03.997

如果您的 WCF 服务在同一个域中，您可以使用下面的函数来执行调用

```
function TestingWCFRestWithJson() {
                $.ajax({
                    url: "http://localhost/Service/JSONService.svc/GetDate",
                    dataType: "json",
                    type: "GET",
                    success: function (data, textStatus, jqXHR) {
                       // perform a success processing
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                       // show error to the user about the failure to invoke the service    
                    },
                    complete: function (jqXHR, textStatus) {//any process that needs to be done once the service call is compelte
                    }
                });
            } 
```

如果您的 WCF 服务位于调用应用程序域以外的其他域中，则您需要执行 JSONP 调用，如下所示：

```
function TestingWCFRestWithJsonp() {
                $.ajax({
                    url: "http://domain.com/Service/JSONPService.svc/GetDate",
                    dataType: "jsonp",
                    type: "GET",
                    timeout: 10000,
                    jsonpCallback: "MyCallback",
                    success: function (data, textStatus, jqXHR) {
                    },
                    error: function (jqXHR, textStatus, errorThrown) {    
                    },
                    complete: function (jqXHR, textStatus) {
                    }
                });
            }
            function MyCallback(data) {
                alert(data);
            } 
```

当使用 JQuery 的 $.ajax 执行 JSONP 调用时，不会触发完整/成功/错误方法，而是会触发如图所示的回调方法，该方法需要由 WCF 服务处理。WCF 框架提供了一个属性“crossDomainScriptAccessEnabled”，用于标识请求是否为 JSONP 调用并将内容写回流以调用带有数据的回调函数。这在绑定元素上可用，如下所示：

```
<webHttpBinding>
        <binding name="defaultRestJsonp" crossDomainScriptAccessEnabled="true">
          <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="64" maxNameTableCharCount="2147483647" />
          <security mode="None" />
        </binding>
</webHttpBinding> 
```

# mysql - 在我的数据库上创建表时出错

> ID：11821864
> 
> 赞同：0
> 
> 时间：2012-08-06T02:21:59.667
> 
> 标签：mysql, sql

我正在尝试创建一个引用数据库中另一个表的表，但是我收到了这个错误。

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'UInt32 PRIMARY KEY, name VARCHAR(20), handle VARCHAR(20), countryName VARCHAR(20' at line 1 
```

我在[mySQL](http://dev.mysql.com/doc/refman/5.0/en/error-messages-server.html)参考页面上查看了错误 #1064，但它有点像 vuage 错误，只是给出了其结构的轮廓。

```
 Error: 1064 SQLSTATE: 42000 (ER_PARSE_ERROR)

Message: %s near '%s' at line %d 
```

这是我试图执行的代码

```
CREATE TABLE User (userID UInt32 PRIMARY KEY, name VARCHAR(20), handle VARCHAR(20), countryName VARCHAR(20) references Countries(SID))engine=innodb; 
```

国家表已经创建，所以我不完全确定是什么导致了问题

任何帮助将不胜感激。

补充说这不是我定义国家的方式

```
CREATE TABLE Countries (countryName VARCHAR(20) PRIMARY KEY)engine=innodb; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:27:04.537

更新回复：

将约束定义移出表定义有助于隔离问题：

```
CREATE TABLE User(
   userID UInt32 PRIMARY KEY
  ,name VARCHAR(20)
  ,handle VARCHAR(20)
  ,countryName VARCHAR(20)
)engine=innodb;

ALTER TABLE user ADD CONSTRAINT user_country_name_fk FOREIGN KEY(countryName) REFERENCES Countries(SID); 
```

表创建失败是由使用`UInt32`数据类型引起的。改为`int`，建表成功。

外键约束指的是错误的列`Countries`。它指的是`SID`但需要提及`countryName`。

# javascript - twitter bootstrap modal——如何将数据传递给回调函数

> ID：11821865
> 
> 赞同：0
> 
> 时间：2012-08-06T02:21:59.387
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

有没有办法将额外的数据传递给引导模式函数回调？

例如，假设我的导致模式打开的链接中有一个额外的属性，其中包含一些有用的数据，我如何引用该属性？

HTML

```
<span listid="80" href="#editTaskList" data-toggle="modal" class="btn btn-mini right"><i class="icon-edit"></i> Edit Task List</span> 
```

JS

```
$('#editTaskList').on('show', function () {
    // get the source of the click, and then get the data i need.
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T07:44:35.127

这对你有用吗？

```
<span listid="80" href="#editTaskList" data-toggle="datamodal" class="btn btn-mini right"><i class="icon-edit"></i> Edit Task List</span> 
```

```
var $editTaskList = $('#editTaskList');

$('body').on('click.modal.data-api', '[data-toggle="datamodal"]', function (e) {
    var $this = $(this);
    $editTaskList.data('anyAttr',$this.data('anyAttr'));
    $editTaskList.modal('show');
    e.preventDefault();
})

$editTaskList.on('show', function () {
    var myData = $editTaskList.data('anyAttr');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T13:29:33.173

我知道这是一个老问题，但这是我在谷歌上找到的第一件事。所以，我想在这里放一些重要的信息......

在调用模式之前，您需要将回调函数绑定到事件上，例如：

```
$('#modal').on('shown', function(){ 
     // Do something when the modal is loaded
});
$("#modal").modal(); 
```

这很重要，对我帮助很大，所以，这里是......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T02:29:30.000

像这样 -

```
<span id="modal_opener" data-extrastuff="stuff" listid="80" href="#editTaskList" data-toggle="modal" class="btn btn-mini right"><i class="icon-edit"></i> Edit Task List</span>

$('#modal_opener').click(function() {
    var stuff_i_want = $(this).attr('data-extrastuff');
}); 
```

# android - 创建一个模拟 AlarmManager 进行测试

> ID：11821879
> 
> 赞同：8
> 
> 时间：2012-08-06T02:25:51.243
> 
> 标签：android, unit-testing

我希望能够测试一些添加`pending intents`到[警报管理器](http://developer.android.com/reference/android/app/AlarmManager.html)的代码，但是虽然我可以创建自己的代码`mock context`来返回它，但`getSystemService()`我无法创建自己的警报管理器子类，因为它有一个私有构造函数。

是否有另一种（更好的？）方法让我能够根据我的测试前提条件测试我的代码是否正确添加（或不添加）警报？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-10T10:22:25.330

我能想到的两件事可能会有所帮助：

1.  用于检查警报已手动安排

    `adb shell dumpsys alarm | grep com.your.package`

2.  要检查代码中是否设置了警报，您可以使用 Robolectric [shadows](http://robolectric.org/extending/)。这是一个使用它的例子：http: [//www.multunus.com/blog/2014/03/tdd-android-using-robolectric-part-3/](http://www.multunus.com/blog/2014/03/tdd-android-using-robolectric-part-3/)

您可以使用（来自文章）：

```
@RunWith(RobolectricTestRunner.class)
public class ResetAlarmTest {
    ShadowAlarmManager shadowAlarmManager;
    AlarmManager alarmManager;

    @Before
    public void setUp() {
       alarmManager = (AlarmManager) Robolectric.application.getSystemService(Context.ALARM_SERVICE);
       shadowAlarmManager = Robolectric.shadowOf(alarmManager);
    }

    @Test
    public void start_shouldSetRepeatedAlarmWithAlarmManager() {
        Assert.assertNull(shadowAlarmManager.getNextScheduledAlarm());
        new ResetAlarm(Robolectric.application.getApplicationContext());
        ScheduledAlarm repeatingAlarm = shadowAlarmManager.getNextScheduledAlarm();
        Assert.assertNotNull(repeatingAlarm);
    }
} 
```

# c# - 在安装依赖项时使用 IoC 容器是一种不好的做法或代码味道吗？

> ID：11821883
> 
> 赞同：5
> 
> 时间：2012-08-06T02:26:56.663
> 
> 标签：c#, inversion-of-control, castle-windsor, automapper

在安装依赖项时使用 IoC 容器是一种不好的做法或代码味道吗？

这是我的作文根：

```
public void Install(IWindsorContainer container, IConfigurationStore store)
{
    Assembly modelAssembly = typeof(UserLoginModel).Assembly;
    Assembly controllerAssembly = typeof(HomeController).Assembly;

    container.Install(
        new MvcInfrastructureInstaller(modelAssembly, viewAssembly, controllerAssembly, applicationTitle, resourceAssemblyLocations),
        new MiniMembershipInstaller(),
        new ServiceInstaller(),
        new RepositoryInstaller(),
        new LibraryInstaller(),
        new AutoMapperProfileInstaller() // this installer needs to resolve dependencies such as repositories through the container itself, so it goes last.
    );
} 
```

我`AutoMapperProfileInstaller`需要解析包含依赖项的配置文件以初始化映射器

```
public class AutoMapperProfileInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        Profile entityToViewModel = container.Resolve<EntityToViewModelProfile>();
        Profile[] profiles = new[] { entityToViewModel };

        Mapper.Initialize(config =>
        {
            config.ConstructServicesUsing(container.Resolve);

            foreach (Profile profile in profiles)
            {
                config.AddProfile(profile);
            }
        });
    }
} 
```

这在很多层面上都感觉不对，初始化`AutoMapper`配置文件的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:46:59.543

该方法的唯一错误是您手动指定`IWindowsInstaller`实现。使用反射来找到它们并`Activator.CreateInstance`实例化实现。

它为您提供了一种灵活的配置方法，系统中的每个部分/模块都负责自己的注册。

`IMapperConfiguration`但是，我会为 AutoMapper 配置（单一职责）创建一个新接口。也使用反射来扫描程序集。

# knockout.js - 如何在 Knockout 中调用命名模板数据绑定中的函数？

> ID：11821885
> 
> 赞同：1
> 
> 时间：2012-08-06T02:27:10.797
> 
> 标签：knockout.js

我正在使用命名模板为挂在我的视图模型上的对象生成 html。这工作正常。

我的对象的属性之一是 UTC 日期。我想在生成 html 之前将该日期转换为用户浏览器的时区。

我可以监听 afterRender 事件并设置 html 元素值，但我很好奇是否存在更清洁的方法？

在我的模板中，我想知道如何执行以下操作...？

```
 <div data-bind="text: 'CreatedOn: ' + localizeDate(CreatedOn);"</div>
 ....
 function localizeDate(dateTolocalize)  {.... }; 
```

我已经搜索了文档，但找不到它。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:47:50.500

哇我是个白痴！看来您可以轻松地在模板中调用函数，只是不要在语句末尾包含分号。

```
<div data-bind="text: 'CreatedOn; ' + localizeDate(CreatedOn)"></div> 
```

效果很好:-)

# maven - maven构建需要太多时间

> ID：11821894
> 
> 赞同：1
> 
> 时间：2012-08-06T02:29:02.337
> 
> 标签：maven

据我所知，Maven 只编译修改过的文件并将它们复制到目标文件夹中。

在我的 webapp 文件夹中，有很多大小超过**800MB**的文件。

当我启动这个命令（ mvn package ）。

这需要**10多分钟**才能将所有资源复制到target/call/

*[INFO] 复制 webapp 资源 [/data1/workspace/icall/src/main/webapp]*

这让我很生气。

有没有办法只复制修改过的文件或新生成的文件？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.byto</groupId>
    <artifactId>icall</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>icall Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <build>
        <finalName>icall</finalName>

        <resources>
            <resource>
                <directory>${basedir}/src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <escapeString>\</escapeString>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.7</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                    <wtpversion>1.5</wtpversion>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>

        </plugins>
    </build>

    <profiles>
        <!-- Unrelated Profiles -->
    </profiles>

    <properties>
        <spring-version>3.1.1.RELEASE</spring-version>
        <tiles-version>2.2.2</tiles-version>
        <mybatis-version>3.1.1</mybatis-version>
    </properties>

    <dependencies>
         <!-- Lots of Unrelated Dependencies -->
    </dependencies>

</project> 
```

* * *

这是我使用的 linux bash 文件，而不是 Package 或 Install 目标。但是我不能使用依赖管理，这是 maven 的主要功能。但这对我还是有好处的。

```
#! /bin/sh

tomcat_path=/usr/local/tomcat
source_path=/data1/workspace/icall
deploy_path=/data1/icall_root

function refresh_source {
    # Update source from SVN
    echo -e "\n\n** Getting new sources from SVN." &&
    svn update &&

    # Compile *.java
    echo -e "\n\n** Building *.java with Maven." &&
    mvn compile -Pdev &&

    # Copy only modified files
    echo -e "\n\n** copying files from ${source_path}/src/main/webapp to ${deploy_path}." &&
    rsync -av --exclude=.svn --exclude=WEB-INF/lib/* --exclude=WEB-INF/classes/* --delete ${source_path}/src/main/webapp/* ${deploy_path}/ &&

    echo -e "\n\n** copying files from ${source_path}/library to ${deploy_path}/WEB-INF/lib." &&
    rsync -av --delete --delete-excluded ${source_path}/library/* ${deploy_path}/WEB-INF/lib/ &&

    echo -e "\n\n** copying files from ${source_path}/target/classes/ to ${deploy_path}/WEB-INF/classes/"
    rsync -av --checksum --delete --delete-excluded ${source_path}/target/classes/* ${deploy_path}/WEB-INF/classes/ &&

    ## Only for development server
    cp -f ${deploy_path}/info.jsp ${deploy_path}/data/info.jsp
}

function tomcat_restart {
        ${tomcat_path}/bin/shutdown.sh &&
        sleep 30 &&
        ${tomcat_path}/bin/startup.sh
}

case "$1" in
    restart)
        refresh_source &&
        tomcat_restart
        ;;
    log)
        tail -f ${tomcat_path}/logs/catalina.out
        ;;
    *)
        refresh_source
        ;;
esac 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:04:19.910

您可以创建一个额外的工件，它只包含那些大型资源文件。该工件仅在预打包阶段驻留在您的本地存储库中。例如，如果您需要将该工件放在 war 文件中，则无法避免在打包阶段进行复制。但是，您可以尝试不将其放入战争中并将其保留为另一个文件，该文件应该在类路径中是额外的。但这可能会导致更复杂的部署场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-03T21:39:41.220

我发现排除最终战争中不需要的文件会加快构建速度。另请参阅此答案[https://stackoverflow.com/a/41452761/225341](https://stackoverflow.com/a/41452761/225341)

# java - JSF a4j:ajax 和 f:ajax 在渲染时失败

> ID：11821897
> 
> 赞同：3
> 
> 时间：2012-08-06T02:29:21.610
> 
> 标签：java, jsf, richfaces

我有以下代码：

```
<label for="aluRegs">Región de residencia</label>
<rich:select id="aluRegs" defaultLabel="Seleccionar región" value="#{IngresoAlumno.lugarAlumno.regionElegida}" required="true">
    <f:selectItems value="#{IngresoAlumno.lugarAlumno.regiones.entrySet()}" var="region" itemValue="#{region.key}" itemLabel="#{region.value}" />
    <a4j:ajax event="change" render="aluProvs" listener="#{IngresoAlumno.lugarAlumno.updateProvincias()}" />
    <f:validateRequired />
    <rich:validator />
</rich:select>
<rich:message for="aluRegs" ajaxRendered="true" />

<label for="aluProvs">Provincia de residencia</label>
<rich:select id="aluProvs" defaultLabel="Seleccionar provincia" value="#{IngresoAlumno.lugarAlumno.provinciaElegida}" required="true">
    <f:selectItems value="#{IngresoAlumno.lugarAlumno.provincias.entrySet()}" var="prov" itemValue="#{prov.key}" itemLabel="#{prov.value}" />
    <a4j:ajax event="change" render="aluComs" listener="#{IngresoAlumno.lugarAlumno.updateComunas()}" />
    <f:validateRequired />
    <rich:validator />
</rich:select>
<rich:message for="aluProvs" ajaxRendered="true" />

<label for="aluComs">Comuna de residencia</label>
<rich:select id="aluComs" defaultLabel="Seleccionar comuna" value="#{IngresoAlumno.lugarAlumno.comunaElegida}" required="true">
<f:selectItems value="#{IngresoAlumno.lugarAlumno.comunas.entrySet()}" var="com" itemValue="#{com.key}" itemLabel="#{com.value}" />
    <f:validateRequired />
    <rich:validator />
</rich:select>
<rich:message for="aluComs" ajaxRendered="true" /> 
```

以及以下Java代码

```
@ManagedBean(name="IngresoAlumno")
@ViewScoped
public class IngresoAlumnoBean {

    private Alumno al;
    private StaticInfoBean lugarAlumno;
//+constructor, getters and setters 
```

以及以下课程：

```
public class StaticInfoBean {

    private Map<String, Region> regiones;
    private String regionElegida;

    private Map<String, Provincia> provincias;
    private String provinciaElegida;

    private Map<String, Comuna> comunas;
    private String comunaElegida;

    private String err; //Being used for debugging

    public StaticInfoBean() {
        try
        {
            err = "INICIO";
            ArrayList<Region> regs;
            regiones = new LinkedHashMap<String, Region>();
            provincias = new LinkedHashMap<String, Provincia>();
            comunas = new LinkedHashMap<String, Comuna>();
            RegionDAO regDao = new RegionDAO();
            regDao.prepareConnection();
            ProvinciaDAO provDao = new ProvinciaDAO();
            provDao.setCon(regDao.getCon());
            ComunaDAO comDao = new ComunaDAO();
            comDao.setCon(regDao.getCon());
            regs = regDao.listaRegiones();
            for(Region r : regs)
            {
                regDao.findProvincias(r);
                for(Provincia p : r.getProvincias())
                {
                    provDao.findComunas(p);
                    for(Comuna c : p.getComunas())
                    {
                        comDao.findColegios(c);
                    }
                }
                regiones.put(r.getReg_Cod(), r);
            }
            regDao.getCon().close();
            err="FINAL";
            System.out.println(err);
        }
        catch(SQLException e)
        {
            err = e.getSQLState()+" "+e.getMessage();
        }
        catch(Exception e)
        {
            err = e.getMessage();
        }
    }
//+getters, setters

public void updateProvincias(){
    provincias.clear();
    for(Provincia p : regiones.get(regionElegida).getProvincias())
    {
        provincias.put(p.getProv_Cod(), p);
    }
    System.out.println(provincias.entrySet().toString());
}

public void updateComunas(){
    if(provinciaElegida==null || provincias==null)
        return;
    comunas.clear();
    for(Comuna c : provincias.get(provinciaElegida).getComunas())
    {
        comunas.put(c.getCom_Cod(), c);
    }
} 
```

我正在使用 Richfaces 4。昨天我将我的 Mojarra 从 2.1.x（不记得是哪个）升级到最新的（2.1.11）并且它停止工作（在更新之前它工作得很好）。我将错误缩小到选择标签中的渲染属性（`System.out.println(provincias.entrySet().toString());`正在显示正确的值，因此我可以安全地假设正在调用侦听器）但我不知道我应该在这里做什么。事先谢谢你。

编辑：作为附加信息，第一个选择正确显示值。问题是当 a4j:ajax 想要重新呈现第二个选择时。另外，如果我使用`f:ajax`我会得到相同的结果。ajax 侦听器仍然有效，但选择菜单不再呈现。

我还做了以下实验：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:rosc="http://richfaces.org/sandbox/colorpicker">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:form>
            <rich:select value="#{IngresoAlumno.al.per_Nombre}">
                <f:selectItem itemValue="1" itemLabel="1" />
                <f:selectItem itemValue="2" itemLabel="2" />
                <a4j:ajax render="out" event="change" />
            </rich:select>
        </h:form>
        <h:outputText id="out" value="#{IngresoAlumno.al.per_Nombre}" />
    </h:body>
</html> 
```

这完美！我仍然不知道错误本身是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T05:45:28.787

我找到了它，显然这是一个 RichFaces 错误。

这不起作用：

```
<rich:select id="aluProvs" defaultLabel="Seleccionar provincia" value="#{IngresoAlumno.lugarAlumno.provinciaElegida}" required="true">
    <f:selectItems value="#{IngresoAlumno.lugarAlumno.provincias.entrySet()}" var="prov" itemValue="#{prov.key}" itemLabel="#{prov.value}" />
    <a4j:ajax event="change" render="aluComs" listener="#{IngresoAlumno.lugarAlumno.updateComunas()}" />
    <f:validateRequired />
    <rich:validator />
</rich:select> 
```

这也不起作用：

```
<rich:select id="aluProvs" defaultLabel="Seleccionar provincia" value="#{IngresoAlumno.lugarAlumno.provinciaElegida}" required="true">
    <f:selectItems value="#{IngresoAlumno.lugarAlumno.provincias.entrySet()}" var="prov" itemValue="#{prov.key}" itemLabel="#{prov.value}" />
    <a4j:ajax event="change" render="aluComs" listener="#{IngresoAlumno.lugarAlumno.updateComunas()}" />
    <rich:validator />
</rich:select> 
```

这有效：

```
<rich:select id="aluProvs" defaultLabel="Seleccionar provincia" value="#{IngresoAlumno.lugarAlumno.provinciaElegida}" required="true">
    <f:selectItems value="#{IngresoAlumno.lugarAlumno.provincias.entrySet()}" var="prov" itemValue="#{prov.key}" itemLabel="#{prov.value}" />
    <a4j:ajax event="change" render="aluComs" listener="#{IngresoAlumno.lugarAlumno.updateComunas()}" />
    <f:validateRequired />
</rich:select> 
```

这也有效：

```
<rich:select id="aluProvs" defaultLabel="Seleccionar provincia" value="#{IngresoAlumno.lugarAlumno.provinciaElegida}" required="true">
    <f:selectItems value="#{IngresoAlumno.lugarAlumno.provincias.entrySet()}" var="prov" itemValue="#{prov.key}" itemLabel="#{prov.value}" />
    <a4j:ajax event="change" render="aluComs" listener="#{IngresoAlumno.lugarAlumno.updateComunas()}" />
</rich:select> 
```

它是错误还是功能？我应该报告吗？但无论哪种方式，都很难找到。

# matrix - 如何从索引中获取行和列？

> ID：11821899
> 
> 赞同：33
> 
> 时间：2012-08-06T02:29:45.853
> 
> 标签：matrix

我在这里画了一个*巨大*的空白。

我发现的一切都是关于从给定的行和列中获取索引，但是如何从索引中获取行和列？

该行很容易：`(int)(index / width)`。

我的大脑正在遭受大量出血，试图计算列。

真丢人。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-06T02:36:03.233

对于从零开始的索引，这两个操作是，其中`width`是结构的宽度：

```
row    = index / width
column = index % width 
```

这些适用于使用整数的 C，其中除法向下舍入，`%`模运算符给出余数。如果您不使用 C，则可能必须转换为等效操作。

如果您没有模运算符，则可以使用*：*

```
row    = index / width
column = index - (row * width) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-02-07T11:08:37.847

Paxdiablo 的答案是正确的。如果有人需要反向过程从行和列获取索引：

```
index = (row * width) + column 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-08T20:11:50.017

斯威夫特 4

```
typealias ColumnRowType = (column:Int, row:Int)

func indexToColumnRow(index:Int, columns:Int) -> ColumnRowType
{
    let columnIndex = (index % columns)
    let rowIndex = /*floor*/(index / columns)    // we just cast to an `Int`

    return ColumnRowType(columnIndex, rowIndex)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-22T01:52:58.283

在java中，列偏移量为1，这是一种方法

```
int offset=1;
column = Math.floorDiv(location-offset , 3)+offset;
row = ( (location-offset) %3 )+offset ; 
```

# jquery - 让这个 pushState / load 内容代码工作

> ID：11821903
> 
> 赞同：1
> 
> 时间：2012-08-06T02:30:07.877
> 
> 标签：jquery, html, load, pushstate

我试图让我在**这里**找到的代码在我的网站上工作。正如预期的那样，该站​​点是作为一个普通站点构建的，发送页面更改的 HTTP 请求，现在我正在尝试将其升级到完整的 ajax。

下面的代码执行 pushState，后退/前进按钮工作，但我无法更改页面内容。有人知道我要去哪里错了吗？

```
<script>
$(function(){
$('a').on('click', function(e) {
    $("#loading").show();
    href = $(this).attr("href");

    loadContent(href);

    // HISTORY.PUSHSTATE
    history.pushState('', 'New URL: '+href, href);
    e.preventDefault();
});

// THIS EVENT MAKES SURE THAT THE BACK/FORWARD BUTTONS WORK AS WELL
window.onpopstate = function(event) {
    $("#loading").show();
    console.log("pathname: "+location.pathname);
    loadContent(location.pathname);
};
});

function loadContent(url){
// USES JQUERY TO LOAD THE CONTENT
$.getJSON("post.php", {cid: url, format: 'json'}, function(json) {
    // THIS LOOP PUTS ALL THE CONTENT INTO THE RIGHT PLACES
    $.each(json, function(key, value){
        $('#wrapper').load(href);
    });
});     
}
</script> 
```

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Title</title>

</head>
<body>

<a href="link1.php"></a>
<a href="link2.php"></a>

<div id="wrapper-outer">
<div id="wrapper">

</div>
</div>

</body>
</html> 
```

编辑：

抱歉，链接似乎从未插入。

文章：[http](http://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate) ://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate 工作示例：[http ://html5.gingerhost.com/](http://html5.gingerhost.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:14:14.523

你确定这是对的：

```
$.getJSON("post.php", {cid: url, format: 'json'}, function(json) {
    $.each(json, function(key, value){
        $('#wrapper').load(href);
    });
}); 
```

首先，您执行 ajax 调用以获取一些 json 数据，然后迭代该 json 数据（假设它返回），并且在每次迭代中，您所做的只是对您之前设置的相同 href 进行另一个 ajax 调用，这是一个全局变量您已经发送了对 loadContent 的调用，并且可以访问`url`，因为不需要全局，并且`href`似乎没有从您的 popstate 事件中获得新值，所以它只会获得最后点击的页面吗？

另外，如果您不打算使用数据，为什么要遍历 json，并且在每次迭代时都执行相同的 ajax 调用？

**编辑：**

这将是很多猜测，但尝试简化一点：

```
$(function() {
    $('a').on('click', function(e) {
        e.preventDefault();
        var href = $(this).attr("href");
        loadContent(href);
        history.pushState({}, '', href);
    });
    $(window).on('popstate', function() {
        loadContent(location.pathname);
    });
});

function loadContent(url) {
    $('#wrapper').load(url);
}
​ 
```

您的 HTML 链接没有路径，因此请确保它们位于同一目录中等。

# c# - 如何禁用 TreeView 上的灰色焦点

> ID：11821905
> 
> 赞同：0
> 
> 时间：2012-08-06T02:31:12.080
> 
> 标签：c#, .net, wpf, treeview

> **可能重复：**
> [将选定和未聚焦的列表框样式更改为不灰显](https://stackoverflow.com/questions/698830/change-selected-and-unfocused-listbox-style-to-not-be-grayed-out)

我只想将蓝色焦点保持在树视图上并禁用灰色焦点。如何在 WPF 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:16:39.913

为了实现这一点，您需要在 TreeViewItem 的资源中替换**System Control Brush**，如下所示：

```
 <Style TargetType="TreeViewItem" x:Key="TreeViewItemStyle">
    <Style.Resources>
        <SolidColorBrush  x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Blue>"/>
    </Style.Resources>
   </Style> 
```

# asp.net - 在c#asp.net中执行查询

> ID：11821907
> 
> 赞同：2
> 
> 时间：2012-08-06T02:31:21.340
> 
> 标签：asp.net, sql, c#-4.0

我创建了一个查询来从消息数据库中选择消息的正文。我不知道如何执行它来取回正文字符串并存储它。我尝试过使用 ExecuteReader、ExecuteScalar 和 ExecuteNonQuery。它们都不起作用。ExecuteScalar 是最接近工作的，但无论您尝试查看哪一行，它都只返回第一行的消息正文。有人知道怎么做吗？这一定很容易解决。

```
 SqlCommand com = new SqlCommand("SELECT Body FROM Messages WHERE MessageID=               MessageID", conn);
  com.Connection = conn;
  com.Connection.Open();
  String body;
  body = com.ExecuteScalar.ToString; 
```

这就是我现在所拥有的。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T03:03:47.450

您的查询中的 messageId 是什么？你应该做这样的事情

```
SqlCommand com = new SqlCommand("SELECT Body FROM Messages WHERE MessageID = @MessageId");
com.Parameters.AddWithValue("@MessageId", 1); //Replace 1 with messageid you want to get
string s = com.ExecuteScalar().ToString() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T03:12:31.053

您可以为此使用 SQLDataAdapter 和 Datatable ：

```
SqlCommand com = new SqlCommand("SELECT MessageID,Body FROM Messages WHERE MessageID=               MessageID", conn);
SqlDataAdapter dadapter=new SqlDataAdapter();
DataTable dt = new DataTable();
  com.Connection = conn;
  com.Connection.Open();
  String body;
  dadapter.SelectCommand=com;
  dadapter.Fill(dt);
  body = dr.Rows["Body"].toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T02:45:35.477

你应该尝试这样的事情。

```
 SqlCommand com = new SqlCommand("SELECT Body FROM Messages WHERE MessageID=              MessageID", conn);
com.Connection = conn;
com.Connection.Open();
String body;
SqlDataReader dr = com.ExecuteReader();
if(dr.HasRows){
while(dr.Read()){
 body+=dr["Body"].ToString();  
  }
} 
```

我希望这对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T07:47:10.580

根据您在下面对 Nudier 的回复，您正在尝试使用`WHERE MessageID = MessageID`

这不起作用的原因以及您总是返回第一行的原因是 SQL 不知道 MessageID 是您尝试传入的变量。据 SQL 所知，MessageID 是一列名称，所以您要求 SQL 做的就是选择列 MessageID = 列 MessageID 的行的列“Body”，因此 MessageID 等于其自身，这始终等于 true。由于 ExecuteScalar 总是返回第一行的第一个单元格，因此您的查询将始终返回 Messages 表中的所有行，并且 executeScalar 将抓取第一个单元格。

希望这是有道理的，如果没有，只需复制您的查询并针对您的 SQL 数据库运行它，您应该明白我的意思是什么，它返回所有行，因为 where 子句总是等于 true。

要修复它，您需要考虑 Anuraj 所说的关于添加参数的内容。

要将变量传递给代码中的 SQL 字符串，您需要对其进行参数化，然后添加相关参数，因此您的 SQL 应变为：

```
SELECT Body FROM Messages WHERE MessageID=@MessageID 
```

（注意在参数名称前添加了@符号？）

在该行的正下方，您需要使用以下代码在代码中添加参数：

```
com.AddParameterWithValue("@MessageId", MessageId); 
```

（我想是的，我是从 Anuraj 那里复制过来的，我通常做的方式略有不同）

同样，要查看此操作，您可以使用参数直接针对数据库运行它

```
DECLARE @messsageID AS INTEGER
SET @messageID = 1
SELECT Body FROM Messages WHERE MessageID=@messageID 
```

阅读此内容以获取更多详细信息（或者如果我还没有完全清楚）[http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06)

# css - 数字低于 html 页面上的单词

> ID：11821908
> 
> 赞同：0
> 
> 时间：2012-08-06T02:31:22.653
> 
> 标签：css, fonts

在网页上的所有字符串中，数字都略低于其他单词。这很烦人，尤其是在字符串带有下划线的情况下。我认为，这可能是由于 css 的一些问题（没有 css 文件问题消失），但我不知道在哪里搜索这些问题。改变字体没有帮助。你能帮我提些建议吗？

编辑：我使用 CrystalX 代码：[http](http://www.oswd.org/design/preview/id/3465/) ://www.oswd.org/design/preview/id/3465/ 只需将徽标中的“Crystal”更改为“555 Crystal”

编辑 2：来自 css 文件的片段：

```
* {min-height:1px;}
body {border:0; margin:0; padding:0; background:#F2F5FE url("../design/bg.gif") 0 0 repeat-x; font:70%/160% "verdana",sans-serif; color:#192666; _text-align:center;}

p {border:0; margin:15px 0; padding:0;}

div {display:block; border:0; margin:0; padding:0;}

h1, h2, h3, h4, h5 {border:0; margin:15px 0 10px 0; padding:0; font-weight:bold;}
h1 {font-size:260%; line-height:100%; font-family:"georgia",serif; font-weight:normal;}
#main {width:770px; margin:60px auto 0 auto; _text-align:left;}

/* Header */
#header {position:relative; width:770px; height:100px; margin:0; padding:0; background:#233C9B url("../design/header.jpg") 0 0 no-repeat; color:#FFF;}
    /* Header - logo */
    #header #logo {position:absolute; top:35px; left:35px; margin:0;}
    #header #logo a {color:#FFF;}
    #header #logo a:hover {color:#B5C4E3; text-decoration:underline;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:48:06.247

这是字体问题。字体“georgia”是罪魁祸首。尝试将您的字体更改`h1`为其他字体，让我们说“Verdana”，它会解决您的问题。

# forms - CakePHP 声明变量

> ID：11821909
> 
> 赞同：1
> 
> 时间：2012-08-06T02:31:24.213
> 
> 标签：forms, cakephp, variables, views

嘿家伙试图在字段控制器中的 CakePHP 中声明一个变量。此变量将显示模板表中的模板 id，但视图显示该变量未定义，即使我们在控制器中声明了它。模板有很多字段，字段属于模板。

这是字段控制器：

```
<?php
class FieldsController extends AppController{
public $uses = array('Template');

 function add(){

    $this->set('title_for_layout', 'Please Enter Your Invoice Headings');
    $this->set('stylesheet_used', 'style');
    $this->set('image_used', 'eBOXLogo.jpg');   

    $this->Session->setFlash("Please create your required fields.");
    $templates = $this->Template->find('list');
    //$current_template = $this->request->data['Field']['template_id'];

    // right way to do it, but Template is undefined, and says undefined var
    //$template = $this->request->data['Field']['template_id'];

    // makes sense with the find, no errors, but still doesnt print in form, says undefined var
    //$current_template = $this->request->data($template['Field']['template_id']);

        if($this->request->is('post'))
        {

        $this->Field->create(); 

        if ($this->Field->save($this->request->data)) 
        {   
            if($this->request->data['submit'] == "type_1") 
                { 
                    $this->Session->setFlash('The field has been saved');  
                    $this->redirect( array('controller' => 'fields','action' => 'add'));
                } 
                if($this->request->data['submit'] == "type_2") 
                { 
                    $this->Session->setFlash('The template has been saved'); 
                    $this->redirect( array('controller' => 'templates','action' => 'index'));
                } 

        }
        else
        {
            $this->Session->setFlash('The field could not be saved. Please, try again.'); 
        } 
    } 
  }

} 
```

这是我们添加字段的添加视图：

```
<?php

    echo $this->Form->create('Field', array('action'=>'add'));

    echo $this->Form->create('Field', array('action'=>'add'));
    echo $this->Form->input('name', array('label'=>'Name: '));
    echo $this->Form->input('description', array('label'=>'Description: '));
    //echo $this->Form->input('template_id',array('label'=>'Template ID: ', 'type' => 'select', 'options' => $templates));
    echo $this->Form->input('template_id',array('label'=>'Template ID: ', 'type' => 'text', 'default'=> $templates));
    //echo $this->Form->input('templates_id', array('label'=>'Template ID: ', 'type' => 'text', 'default' => $current_template['templates_id']));//this would be the conventional fk fieldname
    echo $this->Form->button('Continue adding fields', array('name' => 'submit', 'value' => 'type_1'));
    echo $this->Form->button('Finish adding fields', array('name' => 'submit', 'value' => 'type_2'));
    echo $this->Form->end();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:43:44.587

`$this->set('templates', $templates);`为控制器中的模板执行 find() 后，您丢失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T04:31:29.227

您应该尝试以下代码：

```
<?php
class FieldsController extends AppController{
  public $uses = array('Template', 'Field');
  function add(){
$this->set('title_for_layout', 'Please Enter Your Invoice Headings');
$this->set('stylesheet_used', 'style');
$this->set('image_used', 'eBOXLogo.jpg');   

$this->Session->setFlash("Please create your required fields.");
$templates = $this->Template->find('list', array('fields' => array('Template.id, Template.template_name' );
$this->set('templates', $templates);

//$current_template = $this->request->data['Field']['template_id'];

// right way to do it, but Template is undefined, and says undefined var
//comment: You should check the request data with in if condition 
//$template = $this->request->data['Field']['template_id'];

// makes sense with the find, no errors, but still doesnt print in form, says undefined var
//$current_template = $this->request->data($template['Field']['template_id']);

    if($this->request->is('post'))
    {

    $this->Field->create(); 

    if ($this->Field->save($this->request->data)) 
    {   
        if($this->request->data['submit'] == "type_1") 
            { 
                $this->Session->setFlash('The field has been saved');  
                $this->redirect( array('controller' => 'fields','action' => 'add'));
            } 
            if($this->request->data['submit'] == "type_2") 
            { 
                $this->Session->setFlash('The template has been saved'); 
                $this->redirect( array('controller' => 'templates','action' => 'index'));
            } 

    }
    else
    {
        $this->Session->setFlash('The field could not be saved. Please, try again.'); 
    } 
 } 
  }

} 
```

您的视图应如下所示：

```
<?php

echo $this->Form->create('Field', array('action'=>'add'));
echo $this->Form->input('name', array('label'=>'Name: '));
echo $this->Form->input('description', array('label'=>'Description: '));
echo $this->Form->input('template_id',array('label'=>'Template ID: ', 'options' => $templates));
//echo $this->Form->input('template_id',array('label'=>'Template ID: ', 'type' => 'text', 'default'=> $templates));
//echo $this->Form->input('templates_id', array('label'=>'Template ID: ', 'type' => 'text', 'default' => $current_template['templates_id']));//this would be the conventional fk fieldname
echo $this->Form->button('Continue adding fields', array('name' => 'submit', 'value' => 'type_1'));
echo $this->Form->button('Finish adding fields', array('name' => 'submit', 'value' => 'type_2'));
echo $this->Form->end();

 ?> 
```

请检查并验证它是否适合您。

# wix - 自定义操作失败时取消卸载 wix

> ID：11821919
> 
> 赞同：0
> 
> 时间：2012-08-06T02:34:39.420
> 
> 标签：wix, custom-action

当我的自定义操作失败时，我需要取消卸载。但是我无法取消卸载，我可以知道我的错误是什么吗？

```
<CustomAction Id="SetRemoveSettings" FileKey="RemoveSettings.exe"  ExeCommand="" Execute="deferred" Return="check" HideTarget="no" Impersonate="yes" />
<InstallExecuteSequence>
  <Custom Action='SetRemoveSettings' Before='InstallFinalize'>REMOVE="ALL"</Custom>
</InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:11:02.673

如果您的 EXE 返回非零退出代码，它应该回滚卸载。

此外，您应该查看[Quiet Exec 自定义操作](http://wix.sourceforge.net/manual-wix3/qtexec.htm)模式。在您必须调用 EXE 的时候，这是调用 EXE 的更好方法。否则一般避免EXE。

# php - 从 Textarea 中删除空行或空白行以避免将空白行插入数据库

> ID：11821929
> 
> 赞同：1
> 
> 时间：2012-08-06T02:38:13.743
> 
> 标签：php, textarea

我有一个简单的表格，带有一个名为“negwords”的文本区域。如果 textarea 中有数据，则每行都会被 \n 分解，然后我将这些值插入数据库中的一个名为“negatives”的表中，该表只有两个字段（id，negative）。

问题是，如果存在并提交了一个空的或空白的回车，我的数据库中就会出现一条空白记录。

如何避免从 textarea 提交空白或空行？

```
<form action="insert.php" method="post">
<textarea class="" cols="110" rows="30" name="negwords"></textarea>
    <input type="submit" name="submit" value="Submit" />
    </form>    
  </div>
  <div id="results">
<?php
include 'db_connect.php';

if(isset($_POST["negwords"]))
{
  //$negative_keyword = explode("\n", $_POST["negwords"]);

  $negative_keyword = array_filter(explode("\n", trim($_POST['negwords'])));
  foreach($negative_keyword as $key => $phrase)
{
    $phrase=trim($phrase);
    $sql = "INSERT IGNORE INTO negatives (negative) VALUE ('{$phrase}')";

    mysql_query($sql);
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:24:16.400

替换`mysql_query($sql);`为

```
if (strlen($phrase) > 0) { mysql_query($sql); } 
```

另外，作为旁注：我强烈建议从已弃用的 mysql 切换到 mysqli。

# python - 为什么 type('string') 似乎在 python cgi 中返回空字符串

> ID：11821930
> 
> 赞同：0
> 
> 时间：2012-08-06T02:38:17.130
> 
> 标签：python, cgi

我正在阅读 Mark Lutz 的*Programming Python 3rd editon*，我对一个问题感到困惑：`type('something')`总是导致一个空字符串。

有人可以解释一下吗？

上下文信息：

我在脚本中添加了一行`$CODEROOT\pp3e\Internet\Web\cgi-bin\tutor0.py`

```
#!/usr/bin/python
#######################################################
# runs on the server, prints html to create a new page;
# url=http://localhost/cgi-bin/tutor0.py
#######################################################

print "Content-type: text/html\n"
print "<TITLE>CGI 101</TITLE>"
print "<H1>A First CGI script</H1>"
print '<p>[%s]'%type('apple') # ★ I add this line
print "<P>Hello, CGI World!</P>" 
```

**对于添加的行，我希望在 browser 中看到`[<type 'str'>]`，但我实际上看到了`[]`.**

![在此处输入图像描述](../Images/b89532fdaebd6ef352529c775e0d751b.png)

启动 HTTP 服务器的 python 位于`$CODEROOT\pp3e\Internet\Web\webserver.py`

```
#########################################################################
# implement HTTP web server in Python which knows how to serve HTML
# pages and run server side CGI scripts;  serves files/scripts from
# the current working dir and port 80, unless command-line args;
# python scripts must be stored in webdir\cgi-bin or webdir\htbin;
# more than one of these may be running on the same machine to serve
# from different directories, as long as they listen on different ports;
#########################################################################

webdir = '.'   # where your html files and cgi-bin script directory live
port   = 80    # http://servername/ if 80, else use http://servername:xxxx/

import os, sys
from BaseHTTPServer import HTTPServer
from CGIHTTPServer  import CGIHTTPRequestHandler

if len(sys.argv) > 1: webdir = sys.argv[1]             # command-line args
if len(sys.argv) > 2: port   = int(sys.argv[2])        # else dafault ., 80
print 'webdir "%s", port %s' % (webdir, port)

# hack for Windows: os.environ not propogated
# to subprocess by os.popen2, force in-process
if sys.platform[:3] == 'win':
    CGIHTTPRequestHandler.have_popen2 = False
    CGIHTTPRequestHandler.have_popen3 = False          # emulate path after fork
    sys.path.append('cgi-bin')                         # else only adds my dir

os.chdir(webdir)                                       # run in html root dir
srvraddr = ("", port)                                  # my hostname, portnumber
srvrobj  = HTTPServer(srvraddr, CGIHTTPRequestHandler)
srvrobj.serve_forever()                                # serve clients till exit 
```

我的环境：

*   蟒蛇 2.7
*   视窗 7 x64

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T02:42:55.703

可能是因为其中的尖括号`<type 'str'>`导致输出被视为 HTML。

尝试改变：

```
print '<p>[%s]'%type('apple') # ★ I add this line 
```

进入：

```
hstr = "%s"%type('apple')
hstr = hstr.replace('<','&lt;').replace('>','&gt;')
print '<p>[%s]'%hstr 
```

# php - 操作 MySQL 数据库数据

> ID：11821933
> 
> 赞同：5
> 
> 时间：2012-08-06T02:38:47.927
> 
> 标签：php, mysql

我有一个 MySQL 数据库，它在列中保存一个类列表，每个类都有一个“级别”，它是行的值，每个人都会改变。因此，例如，数学有 0、1、2 和 3 作为可能的值，0 不被选为类，1、2 和 3 分别代表高、中和低。

我有一个 MySQL 查询，它只从用户的数据库行中提取类。

```
$result = mysql_query("SELECT math, physics, biology, chemistry, english, spanish, history, economics, art, theoryofknowledge, extendedessay FROM users WHERE username = '". $login_session ."'") or die(mysql_error());  

        while($row = mysql_fetch_array( $result )) {
            echo "Math:". $row['math'] ."<br />";
            echo "Physics:". $row['physics'] ."<br />";
            echo "Biology:". $row['biology'] ."<br />";
            echo "Chemistry:". $row['chemistry'] ."<br />";
            echo "English:". $row['english'] ."<br />";
            echo "Spanish:". $row['spanish'] ."<br />";
            echo "History:". $row['history'] ."<br />";
            echo "Economics:". $row['economics'] ."<br />";
            echo "Art:". $row['art'] ."<br />";
            echo "Theory of Knowledge:". $row['theoryofknowledge'] ."<br />";
            echo "Extended Essay:". $row['extendedessay'];
        } 
```

这是用户的输出：

```
Math:1
Physics:1
Biology:0
Chemistry:2
English:2
Spanish:3
History:0
Economics:1
Art:0
Theory of Knowledge:1
Extended Essay:1 
```

我如何确定用户的级别，而无需在每次调用类时都执行 if 语句？我需要在网站上的多个位置调用课程，并且我想要一种简单的方法来检查用户拥有哪些课程和级别。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T02:51:04.100

我认为最好的方法是构建一个 PHP 类，将用户加载到其中并在其中有一个可以接受类（生物学、数学等）并返回用户级别的函数。如果您愿意，您可以编写一些简单的东西来执行所需级别的检查并根据用户是否足够高来返回真或假。

我什至将一些您可能想要扩展的超级基本结构拼凑在一起：

```
<?php

    class myUser
    // You are making an object here that stores information about your user.
    // This will mean you only need to query that data once from the DB, then
    // you can use it anywhere on the page without needing to do more queries.
    {
        public $math;
        public $biology;
        // I am making public variables here based on your columns
        // You cuold just as easily make an array for example to store them in.

        public function __construct($userID)
        // Making a construct class - meaning you will be able to write a snippet
        // like this: $currentUser = new myUser(6);
        // and the user information will be loaded nicely for you
        {
            $query="select math, biology from users where ID=$userID";
            // database stuff ....
            // this is where you would write your actual code to get the info
            // from the database and populate it properly, not like I did
            // below for this example
            $this->math=4;
            $this->biology=2;
        }

        public function checkUserLevel($myTopic, $reqLevel)
        // Making use of a few things here that I should ntoe:
        // This is a function you can call from the main code below
        // like this: $currentUser->checkUserLevel('math',3)
        // it will return either true or false.
        // I have used variable variables here for the $myTopic to
        // make it easier. You normally access an element differently
        // normally it is like: echo $this->math;  // output 4
        // Also I am using a ternary operator to return the data,
        // which is just a shortcut.
        {
            return ($this->$myTopic>=$reqLevel)? true : false;
        }

        public function returnUserLevel($myTopic)
        {
            return $this->$myTopic;
        }

    }

    $currentUser = new myUser(6);
    // This is creating a new user object based on the class we made above.
    // Further Explanation:
    // We have a class called myUser, but a class is just a schematic.
    // The $currenUser bit defines a new variable in our code.
    // the "= new myUser" bit says that we want to use the schematic above for this variable
    // the "myUser(6)" basically gives the constructor function an ID to get from
    // the database for the user. Because we defined a constructor class that expects
    // an ID, we need to supply it one, else we will get an error.
    // So $currentUser = new myUser(6)
    // really means "Make me a new variable called $currentUser and make it of the myUser
    // class type, and when making it, fetch me the details of student ID 6 and populate it
    // with their data.

    if($currentUser->checkUserLevel('math',3))
    // Now I am using one of the functions called checkUserLevel, supplying it
    // with the two arguments it needs and depending on it it returns true or false
    // doing one action or another.
    {
        echo "The user is at least level 3.\n";
    }
    else
    {
        echo "The user is lower than level 3.\n";
    }

    if($currentUser->checkUserLevel('biology',12))
    // same check, differnt inputs
    {
        echo "The user is at least level 3.\n";
    }
    else
    {
        echo "The user is lower than level 3.\n";
    }

    // You can output like this for example:
    echo "The users math is at: ".$currentUser->math;

    // and I added a little function that will simply return the level for you of the subject you enter.
    echo "The user is at math level ".$currentUser->returnUserLevel('math');

    // lastly you can do something like this:
    $allSubjects=array('math','physics','biology');
    for($i=0;$i<count($allSubjects);$i++)
    {
        echo "The users ".$allSubjects[$i]." level is at ".$currentUser->returnUserLevel($allSubjects[$i])."<br><br>";
    }

?> 
```

代码的输出是：

```
The user is at least level 3.

The user is lower than level 3. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:53:04.943

一种方法是在用户登录时将所有类的值存储在 PHP 会话变量中：

```
<?php
    session_start();
    $_SESSION["classes"] = array();       

    $row = mysql_fetch_array($result);
    foreach($row as $class => $level)
    {
        $_SESSION["classes"][$class] = $level;
    }
?> 
```

然后，您可以在站点的任何页面上访问用户的班级级别，直到他们关闭会话或注销：

```
<?php
    session_start();
    $mathLevel = $_SESSION["classes"]["math"];
?> 
```

# php - PHP：如果字符数< 3，则跳过单词

> ID：11821934
> 
> 赞同：0
> 
> 时间：2012-08-06T02:39:19.640
> 
> 标签：php, wordpress, if-statement

我正在使用以下代码提取一些关键字并将它们作为标签添加到 wordpress 中。

```
if (!is_array($keywords)) {

    $count = 0;

    $keywords = explode(',', $keywords);

}

foreach($keywords as $thetag) {

    $count++;

    wp_add_post_tags($post_id, $thetag);

    if ($count > 3) break;

} 
```

该代码将仅获取 4 个关键字，但最重要的是，我只想在它们高于 2 个字符时才提取，所以我不会得到只有 2 个字母的标签。

有人能帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:42:49.617

使用[strlen](http://php.net/manual/en/function.strlen.php)检查长度。

> `int strlen ( string $string )`
> 
> 返回给定字符串的长度。

```
if(strlen($thetag) > 2) {
    $count++;
    wp_add_post_tags($post_id, $thetag);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:43:21.083

`strlen($string)`会给你字符串的长度：

```
if (!is_array($keywords)) {
    $count = 0;
    $keywords = explode(',', $keywords);
}

foreach($keywords as $thetag) {
   $thetag = trim($thetag); // just so if the tags were "abc, de, fgh" then de won't be selected as a valid tag
   if(strlen($thetag) > 2){
      $count++;
      wp_add_post_tags($post_id, $thetag);
   }

   if ($count > 3) break;
} 
```

# css - CSS：如何设置字符高度与行高的样式

> ID：11821935
> 
> 赞同：6
> 
> 时间：2012-08-06T02:39:28.487
> 
> 标签：css

在这里忍受我，但假设这个代码：

```
<style>
  span {
    color: black;
    background-color: black;
  }
</style>
<span>Hello world</span> 
```

**你好世界**

给出如下所示的结果：

███████████</p>

是否可以将样式仅应用于*字母高度*，而不是字体/行高？实际上最终得到如下所示的东西：

█▄██▄ ▄▄▄██</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:37:24.727

不（无论如何都没有背景颜色）。背景颜色应用于整个元素（例如，span 元素），它本质上是一个由 CSS 盒子模型确定的盒子。W3C的[官方建议](http://www.w3.org/TR/CSS21/colors.html#background)指定背景颜色将填充盒子模型的内容、填充和边框区域。[CSS3 背景（候选推荐）](http://www.w3.org/TR/css3-background/#background-clip)为您提供了更多的权力来控制背景颜色的应用，但并不多。

如果你真的想要你刚刚在你的问题中展示的效果，我认为一个 JavaScript 函数可以将“短”字符（例如，“w”）转换为“▄”和“高”字符（例如，“h”）到“█”会很好用。[这是关于 jsfiddle 的演示](http://jsfiddle.net/xySuQ/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:51:12.433

我想不出只使用 CSS 的方法，但是您可以在 PHP 中使用 imagefontheight 之类的函数：http://php.net/manual/en/function.imagefontheight.php[并](http://php.net/manual/en/function.imagefontheight.php)从指定的字体动态创建块元素...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T11:35:14.777

我能想到的完全通过 CSS 获得效果的唯一方法是：

1.  过多的额外 html 标记。
2.  与角色本身相比，愿意允许背景高度存在一些轻微的不精确。
3.  对您将要使用的特定字体进行细致的测试，以查看您可能会在浏览器中获得什么结果。

换句话说：它确实值得付出努力，并且它可能应该只用于非常短的文本字符串。

这是[**一个示例**](http://jsfiddle.net/zPw4E/32/)，使用颜色左对比来查看背景如何适合字母。**注意：这无疑会根据您看到的浏览器和字体对字母上方/下方的高度和间距有所不同。**使用`:before`伪元素来实现效果意味着需要为较旧的浏览器（IE7 及以下）进行调整。

这是小提琴中的基本代码。

```
<span>H</span><span class="short">e</span><span>l</span><span>l</span><span class="short">o</span><span class="short">w</span> <span class="short">w</span><span class="short">o</span><span class="short">r</span><span>l</span><span>d</span> 
```

```
 span {
    color: white;
    display: inline-block;
    position: relative;
    height: 1em;
  }

  span:before {
    content: '';
    position: absolute;
    top: .2em;
    right: 0;
    bottom: .1em;
    left: 0;
    background-color: black;
    z-index: -1;
  }

  span.short:before {
    top: .4em;
  } 
```

# jquery - $.each 成功的 AJAX

> ID：11821939
> 
> 赞同：0
> 
> 时间：2012-08-06T02:41:10.300
> 
> 标签：jquery, ajax, each

我想用 AJAX 请求一些东西（没问题），我会得到像这样的普通 html

```
<div> abc </div>
<div> def </div> 
```

现在我想`$.each`通过AJAX成功部分收到的html元素来做。

```
$(document).ready(function () {
    $("#someButton").click(function () {
        $.ajax({
            url: '/Cens/ored',
            dataType: 'html',
            success: function (data) {

            }
        });

    });
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T02:43:45.390

你可以用`$(data).each(...`.

```
$(document).ready(function () {
    $("#someButton").click(function () {
        $.ajax({
            url: '/Cens/ored',
            dataType: 'html',
            success: function (data) {
　　　　　　　　$(data).each(function(index, el) {
                  //....
               });
            }
        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:50:39.367

好吧，这取决于，如果您只需要在圆顶的某些部分附加纯 html，您可以做这样的事情

```
$('your Selector').append(data) without any each at all in the success callback, 
```

现在，如果您需要附加在 Dom 的不同部分接收到的每个 div，您应该像这样使用 each 函数，注意这只是一个示例

```
$(data).find('div').each(function(){
    alert($(this).html());
}); 
```

# jquery - 对我的数据列表的新条目使用 FaceBook 淡入效果

> ID：11821941
> 
> 赞同：0
> 
> 时间：2012-08-06T02:41:43.953
> 
> 标签：jquery, datalist, lazy-loading

好的，我正在使用 DataList 来显示内容，我根据 DateSubmitted 加载它们，所以最近的优先。

我的 DataList 在 updatePanel 中，我允许用户提交内容，然后我只需重新绑定 Datalist 并显示新内容。不过，我想做的是应用某种 LazyLoading 或 Facebook FadeIn 效果，仅适用于新提交的内容，以便它真正突出用户添加的内容。不太确定如何开始执行此操作。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:52:42.653

获取 jQuery - [http://jquery.com/](http://jquery.com/) - 并研究使用高亮效果。

您可以使用：

```
$("#your_id").effect("highlight", {}, 1500); 
```

您需要包括：

```
effects.core.js
effects.highlight.js 
```

# javascript - Javascript - 匿名函数中的闭包引用使用参数的全局函数 - 我如何使用 preventDefault？

> ID：11821944
> 
> 赞同：0
> 
> 时间：2012-08-06T02:42:53.433
> 
> 标签：javascript, submit, closures

在下面的代码中，我将在哪里使用`preventDefault`？我一直在对其进行测试以使其正常工作，但还没有找到取消默认`submit`操作的好方法。哪个函数需要捕获事件对象？

这是代码：

```
f_name = 'someFunc' ;
f_args(1,2,3) ;

if(element.addEventListener) {
element.addEventListener('submit',(function(name,args,element) {
    return function() {
        window[name].apply(element,args) ;
    }
})(f_name,f_args,element)
,false) ; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:47:02.347

假设您只想在某些事件处理程序上使用 preventDefault，您将`preventDefault()`在用于处理特定事件的回调内部使用。在您的示例中，这将是由参数表示的全局函数，该`name`参数将是`someFunc`全局函数。

如果您想为所有事件处理程序执行此操作（这对我来说没有多大意义），那么您可以在您调用之前或之后在您的代码中执行此操作`window[name]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:50:12.683

```
f_name = 'someFunc';
f_args = [1, 2, 3];
if (element.addEventListener) {
    element.addEventListener('submit', (function (name, args, element) {
        return function (e) {
            // here 
            e.preventDefault();
            window[name].apply(element, args);
        };
    })(f_name, f_args, element), false);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T02:48:32.143

将使用事件作为参数调用您的处理程序函数

```
return function(evt) {
    evt.preventDefault();
    window[name].apply(element,args) ;
} 
```

# plugins - 阻止通过插件发送电子邮件和显示消息

> ID：11821951
> 
> 赞同：1
> 
> 时间：2012-08-06T02:43:56.303
> 
> 标签：plugins, dynamics-crm-2011

我正在使用 Pre_operation 的“发送”消息在“电子邮件”实体中编写 crm2011 插件。我想要做的是，当我单击电子邮件实体中的“发送”按钮时，我会在发送前进行必要的检查。如果检查不正确，我想阻止并停止发送电子邮件并显示“警报消息”并停止第二个插件（此插件发送电子邮件并创建关联实体以转换“案例”）。请给我一些关于该插件的建议？我应该使用预验证阶段还是预操作状态？以及如何返回 false 以停止插件。

```
 public void Execute(IServiceProvider serviceProvider)
    {
        try
        {
            string message = null;
            _serviceProvider = serviceProvider;
            _context = (IPluginExecutionContext)
                                         serviceProvider.GetService(typeof(IPluginExecutionContext));

            _serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
            _currentUser = _context.UserId;
            message = _context.MessageName.ToLower();
            if (message == "send")
            {
                if (_context.InputParameters != null && _context.InputParameters.Contains("EmailId"))
                {
                    object objEmailId = _context.InputParameters["EmailId"];
                    if (objEmailId != null)
                    {
                        _emailId = new Guid(objEmailId.ToString());
                        FindEmailInfo();
                        if (_email != null)
                        {
                            if (_email.Attributes.Contains("description") && _email.Attributes["description"] != null)//Email descritpion is not null
                            {
                                string emaildescription = StripHTML();

                                //Find KB Article prefix no in system config entity
                                serviceguideprefix = "ServiceGuidesPrefix";
                                QueryByAttribute query = new QueryByAttribute("ppp_systemconfig");
                                query.ColumnSet = new ColumnSet(true);
                                query.AddAttributeValue(sysconfig_name, serviceguideprefix);
                                EntityCollection sysconfig = _service.RetrieveMultiple(query);
                                if (sysconfig.Entities.Count > 0)
                                {
                                    Entity e = sysconfig.Entities[0];
                                    if (e.Attributes.Contains("ppp_value"))
                                    {
                                        ppp_value = e.Attributes["ppp_value"].ToString();
                                    }
                                }
                                if (ppp_value != null && ppp_value != string.Empty)
                                {
                                    //var matches = Regex.Matches(emaildescription, @"KBA-\d*-\w*").Cast<Match>().ToArray();
                                    var matches = Regex.Matches(emaildescription, ppp_value + @"-\d*-\w*").Cast<Match>().ToArray();
                                    //ReadKBNo(emaildescription);
                                    foreach (Match kbnumber in matches)
                                    {
                                        EntityCollection kbarticlecol = FindKBArticleIds(kbnumber.ToString());
                                        if (kbarticlecol.Entities.Count > 0)
                                        {
                                            Entity kbariticle = kbarticlecol.Entities[0];
                                            if (kbariticle.Attributes.Contains("mom_internalkm"))
                                            {
                                                bool internalserviceguide = (bool)kbariticle.Attributes["mom_internalkm"];
                                                if (internalserviceguide) found = true;
                                                else found = false;
                                            }
                                            else found = false;
                                        }
                                    }
                                }
                                if (found)
                                {
                                    //-----
                                }
                            }
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
            throw new InvalidPluginExecutionException(ex.Message, ex);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T06:47:41.010

停止插件非常容易，您只需抛出 InvalidPluginException，您提供的消息将在警报窗口中显示给用户。您必须在发送前执行此操作。在这种情况下，我认为它的预验证或预操作并不重要。

编辑：

是的，即使代码中没有发生异常，您也应该抛出 InvalidPluginException。我接受这不是我们通常会做的，而是它的工作方式。Msdn 有更多详细信息：http: [//msdn.microsoft.com/en-us/library/gg334685.aspx](http://msdn.microsoft.com/en-us/library/gg334685.aspx)

例如，代码如下所示：

```
public void Execute(IServiceProvider serviceProvider)
{
    try    
    {
        //This is where we validate the email send
        if(emailIsOkay)
        {
            //Do something
        }
        else if(emailIsNotOkay)
        {
            //Throw and exception that will stop the plugin and the message will be shown to the user (if its synchronous)
            throw new InvalidPluginExecutionException("Hello user, your email is not correct!!");
        }
    }
    catch (InvalidPluginExecutionException invalid)
    {
        //We dont to catch exception for InvalidPluginExecution, so just throw them on
        throw; 
    }
    catch (Exception ex)
    {
        //This exception catches if something goes wrong in the code, or some other process.
        throw new InvalidPluginExecutionException(ex.Message, ex);
    }
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-12-12T08:13:06.043

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.Crm;
using Microsoft.Xrm.Sdk;
using System.ServiceModel;
using Microsoft.Xrm.Sdk.Query;
using Microsoft.Crm.Sdk.Messages;
using System.Text.RegularExpressions;
using System.Xml.Linq;

namespace SendEmail
{
    public class Email : IPlugin
    {
        public void Execute(IServiceProvider serviceprovider)
        {

            IPluginExecutionContext context = (IPluginExecutionContext)serviceprovider.GetService(typeof(IPluginExecutionContext));
            if (!(context.InputParameters.Contains("Target") && context.InputParameters["Target"] is Entity))
                return;

            //entity
            Entity ent = (Entity)context.InputParameters["Target"];
            if (ent.LogicalName != "entityName")//EntityName
                throw new InvalidPluginExecutionException("Not a Service Request record! ");

            //service
            IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceprovider.GetService(typeof(IOrganizationServiceFactory));
            IOrganizationService _service = serviceFactory.CreateOrganizationService(context.UserId);
             string Email="";

            if (ent.Contains("emailidfiled"))
               Email = (string)ent["emailidfiled"];

            #region email template
            QueryExpression query = new QueryExpression()
            {
                EntityName = "template",
                Criteria = new FilterExpression(LogicalOperator.And),
                ColumnSet = new ColumnSet(true)
            };
            query.Criteria.AddCondition("title", ConditionOperator.Equal, "templateName");

            EntityCollection _coll = _service.RetrieveMultiple(query);
            if (_coll.Entities.Count == 0)
                throw new InvalidPluginExecutionException("Unable to find the template!");
            if (_coll.Entities.Count > 1)
                throw new InvalidPluginExecutionException("More than one template found!");

            var subjectTemplate = "";
            if (_coll[0].Contains("subject"))
            {
                subjectTemplate = GetDataFromXml(_coll[0]["subject"].ToString(), "match");
            }
            var bodyTemplate = "";
            if (_coll[0].Contains("body"))
            {
                bodyTemplate = GetDataFromXml(_coll[0]["body"].ToString(), "match");
            }
            #endregion

            #region email prep
            Entity email = new Entity("email");
            Entity entTo = new Entity("activityparty");
            entTo["addressused"] =Email;
            Entity entFrom = new Entity("activityparty");
            entFrom["partyid"] = "admin@admin.com";
            email["to"] = new Entity[] { entTo };
            email["from"] = new Entity[] { entFrom };
            email["regardingobjectid"] = new EntityReference(ent.LogicalName, ent.Id);
            email["subject"] = subjectTemplate;
            email["description"] = bodyTemplate;
            #endregion

            #region email creation & sending
            try
            {
                var emailid = _service.Create(email);
                SendEmailRequest req = new SendEmailRequest();
                req.EmailId = emailid;
                req.IssueSend = true;
                GetTrackingTokenEmailRequest wod_GetTrackingTokenEmailRequest = new GetTrackingTokenEmailRequest();
                GetTrackingTokenEmailResponse wod_GetTrackingTokenEmailResponse = (GetTrackingTokenEmailResponse)
                                                                 _service.Execute(wod_GetTrackingTokenEmailRequest);
                req.TrackingToken = wod_GetTrackingTokenEmailResponse.TrackingToken;
                _service.Execute(req);
            }
            catch (Exception ex)
            {
                throw new InvalidPluginExecutionException("Email can't be saved / sent." + Environment.NewLine + "Details: " + ex.Message);
            }
            #endregion

        }

        private static string GetDataFromXml(string value, string attributeName)
        {
            if (string.IsNullOrEmpty(value))
            {
                return string.Empty;
            }

            XDocument document = XDocument.Parse(value);
            // get the Element with the attribute name specified
            XElement element = document.Descendants().Where(ele => ele.Attributes().Any(attr => attr.Name == attributeName)).FirstOrDefault();
            return element == null ? string.Empty : element.Value;
        }
    }
} 
```

# ssms - SSM 不允许我在编辑前 200 名中编辑 Datetimeoffset 字段

> ID：11821954
> 
> 赞同：1
> 
> 时间：2012-08-06T02:44:02.460
> 
> 标签：ssms, datetimeoffset

> SQLserver 版本 Microsoft SQL Server Management Studio 10.0.5500.0
> 
> Microsoft 分析服务客户端工具 10.0.5500.0
> 
> Microsoft 数据访问组件 (MDAC) 6.1.7601.17514
> 
> 微软 MSXML 3.0 4.0 6.0
> 
> 微软 Internet Explorer 9.0.8112.16421
> 
> 微软 .NET 框架 2.0.50727.5456
> 
> 操作系统 6.1.7601

表定义：

```
CREATE TABLE [dbo].[UsersInRoles](
[UserId] [uniqueidentifier] NOT NULL,
[RoleId] [uniqueidentifier] NOT NULL,
[FromDateTime] [datetimeoffset](7) NOT NULL,
[ToDateTime] [datetimeoffset](7) NULL,
[IsActive] [bit] NOT NULL 
```

我有一个约束如下：

```
ALTER TABLE [dbo].[UsersInRoles] ADD  CONSTRAINT   
[DF_UsersInRoles_FromDateTime]     
DEFAULT (sysdatetimeoffset()) FOR [FromDateTime] 
```

这似乎有效。编辑 200 显示的值就好了。我只是无法编辑它们。

我收到这个错误 `The changed Value was not recognized as valid. .Net Framework type:DateTimeOffset Error Message:Offset must be specified> in whole minutes. Parameter Name: Offset`

我试图改变`date`or`time`而不是`offset`. 即使`NULLS`允许，我什至无法删除该值。

我究竟做错了什么 ？还是这是一个 SSMS 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:34:48.863

似乎是编辑器的一个错误，非常令人沮丧 - 请参阅[此线程](http://social.msdn.microsoft.com/Forums/uk/vstsdb/thread/4ea43c84-15c8-4f63-967f-6944f1d71660)。

# c++ - 从内存中加载动态库

> ID：11821955
> 
> 赞同：6
> 
> 时间：2012-08-06T02:44:02.243
> 
> 标签：c++, macos, gcc, dll, module

是否可以从内存而不是从 mac/gcc 上的文件系统加载库？

对于 Windows，我使用的是 MemoryModule，但它显然不是跨平台兼容的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T02:57:42.330

首先，要做到这一点，我建议您阅读[OS X ABI Dynamic Loader Reference](https://developer.apple.com/library/mac/#documentation/developertools/Reference/MachOReference/Reference/reference.html)。

为此，您必须使用[NSCreateObjectFileImageFromMemory](https://developer.apple.com/library/mac/#documentation/developertools/Reference/MachOReference/Reference/reference.html#//apple_ref/c/func/NSCreateObjectFileImageFromMemory) API。

> 给定一个指向内存中 Mach-O 文件的指针，该函数创建并返回一个`NSObjectFileImage`引用。当前实现仅适用于捆绑包，因此您必须使用`-bundle`链接器选项构建 Mach-O 可执行文件。
> 
> `address`指向的内存块必须用`vm_allocate`( `/usr/include/mach/vm_map.h`) 分配。

确保遵守`vm_allocate`用于包含模块的内存块的要求。

获取目标文件图像后，必须使用[NSLinkModule](https://developer.apple.com/library/mac/#documentation/developertools/Reference/MachOReference/Reference/reference.html)函数将模块链接到程序中。

> 当您调用此函数时，给定模块引用的所有库都将添加到库搜索列表中。除非您通过`NSLINKMODULE_OPTION_PRIVATE`,`NSLinkModule`将模块中的所有全局符号添加到全局符号列表中。

链接后，不要忘记调用[NSDestroyObjectFileImage](https://developer.apple.com/library/mac/#documentation/developertools/Reference/MachOReference/Reference/reference.html#//apple_ref/c/func/NSDestroyObjectFileImage)函数进行清理。

> 调用此函数时，动态加载程序会在参数指向的内存上调用`vm_deallocate`( )。`/usr/include/mach/vm_map.h``objectFileImage`

`dlopen`请注意，虽然这些功能已被弃用，但使用建议的替代方法et没有替代品（据我所知） 。人。

# node.js - NodeJS：任何限制快递请求率的模块

> ID：11821958
> 
> 赞同：4
> 
> 时间：2012-08-06T02:44:57.593
> 
> 标签：node.js, express, connect

我的一位朋友正在寻找 nodejs 模块：

*   可以限制快递请求率。
*   防止机器人。

有谷歌，但只发现连接有一个限制中间件，但只限制文件大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T08:50:09.960

**更新：**

我进行了多次搜索（也搜索了 npmjs.org）：

*   [http://www.google.com/search?q=rate+limit+http+firewall&hl=en](http://www.google.com/search?q=rate+limit+http+firewall&hl=en)
*   [http://www.google.com/search?q=rate+limit+http+iptables&hl=en](http://www.google.com/search?q=rate+limit+http+iptables&hl=en)
*   [http://www.google.com/search?q=connect+node.js+limit+request+rate&hl=en](http://www.google.com/search?q=connect+node.js+limit+request+rate&hl=en) -> [http://journal.paul.querna.org/articles/2010/09/04/limiting -并发-节点-js/](http://journal.paul.querna.org/articles/2010/09/04/limiting-concurrency-node-js/)
*   [https://npmjs.org/browse/keyword/rate](https://npmjs.org/browse/keyword/rate) -> [https://npmjs.org/package/rate-limiter](https://npmjs.org/package/rate-limiter) && [https://npmjs.org/package/express-rate](https://npmjs.org/package/express-rate)

* * *

刚刚做了一些谷歌搜索，希望有一个解决方案：

*   [http://www.debian-administration.org/articles/187](http://www.debian-administration.org/articles/187)
*   [http://journal.paul.querna.org/articles/2010/09/04/limiting-concurrency-node-js/](http://journal.paul.querna.org/articles/2010/09/04/limiting-concurrency-node-js/)
*   [https://github.com/jhurliman/node-rate-limiter](https://github.com/jhurliman/node-rate-limiter)
*   [https://npmjs.org/package/express-rate](https://npmjs.org/package/express-rate)
*   [https://github.com/cloudkick/rate-limiter](https://github.com/cloudkick/rate-limiter)
*   [https://npmjs.org/package/express-rate](https://npmjs.org/package/express-rate)
*   [https://npmjs.org/package/limiter](https://npmjs.org/package/limiter)

# android - 尝试安装android sdk，说没有安装java sdk

> ID：11821961
> 
> 赞同：0
> 
> 时间：2012-08-06T02:45:43.460
> 
> 标签：android

我正在尝试安装android sdk。但是一直说没有安装Java se开发包，我安装了两次。

下一行显示“错误未能找到 c:\Windows\system32\java.exe 的 java 版本，文件在那里。

然后它说：如果你相信你已经安装了 sdk，只需设置一个环境语言 java)home 指向它，我有 java home as c:\java\jdk1.7.0_05

它仍然给出同样的错误，我该如何通过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:50:23.593

以前也有同样的问题。按返回，然后按下一步，一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:53:02.640

**如果没有32 位**JDK ，它似乎无法工作。只需先安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T02:57:37.027

Android 需要 Java 1.5 或 1.6。它不适用于 1.7。

所以下载并安装 1.6 JDK，我相信你的问题会消失。

# regex - 我需要在文件的标题行中搜索一个模式并将下一行与 Perl 连接起来

> ID：11821962
> 
> 赞同：1
> 
> 时间：2012-08-06T02:45:50.983
> 
> 标签：regex, perl, pattern-matching, fasta, dna-sequence

我的 multi-fasta 存档格式如下：

```
>miRNA65 dvex2345
CGATGCTAGATGCTATGACAACGATGCCTCG-G
>miRNA60 dvex1234
T-TAA-ACTCATCATCATCATACTCATCATCATCATCAGCATATTAACAAG
>miRNA65 dvex2345
T-TAA-ACTTATCATCATCATACTCATCATCATCATCAGCATATTAACAAG 
```

我是 Perl 的新手，我需要搜索等号“> 行”并连接下一行以加入序列。

我期待上述文件的以下输出：

```
>miRNA60 dvex1234
T-TAA-ACTCATCATCATCATACTCATCATCATCATCAGCATATTAACAAG
>miRNA65 dvex2345
T-TAA-ACTTATCATCATCATACTCATCATCATCATCAGCATATTAACAAG.CGATGCTAGATGCTATGACAACGATGCCTCG-G 
```

完成这项工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T03:40:13.710

```
%hash;
while (<DATA>) {
        if (/^>(miRNA\d+)/) {
                $hash{$1}[0] = $_;
                chomp($n = <DATA>);
                unshift @{$hash{$1}[1]}, $n;
        }
}

for $k (sort keys %hash) {
        print $hash{$k}[0], join(',', @{$hash{$k}[1]}), "\n";
}
__DATA__
>miRNA65 dvex2345
CGATGCTAGATGCTATGACAACGATGCCTCG-G
>miRNA60 dvex1234
T-TAA-ACTCATCATCATCATACTCATCATCATCATCAGCATATTAACAAG
>miRNA65 dvex2345
T-TAA-ACTTATCATCATCATACTCATCATCATCATCAGCATATTAACAAG 
```

# paypal - Paypal 经常性 + 购买

> ID：11821963
> 
> 赞同：1
> 
> 时间：2012-08-06T02:46:14.870
> 
> 标签：paypal, recurring

在查看了 Paypal 文档以寻找针对这种情况的解决方案后，我一头雾水。我想要的是一种拥有订阅（定期付款）和商品购买的购物车的方法。有没有一种方法可以解决这个问题，或者我必须做一些自定义的事情（如果我使用 Paypal 标准按钮进行购物车/结帐，我将如何处理）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:45:56.943

是的，您可以通过 Express Checkout Recurring Payments 做到这一点。
您只需要确保`AMT`在您的`SetExpressCheckout`和`DoExpressCheckoutPayment`API 调用中包含一个。

一般的 Express Checkout 结账流程基于三个 API 调用；SetExpressCheckout、GetExpressCheckoutDetails 和 DoExpressCheckoutPayment。

1.  SetExpressCheckout 设置付款并返回一个令牌
2.  您将买家重定向到[https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=TOKEN-HERE](https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=TOKEN-HERE)，其中 TOKEN-HERE 是您之前收到的令牌
3.  买家同意付款后，他将返回您的网站。
4.  您可以调用 GetExpressCheckoutDetails 并将令牌作为参数提供以获取买家的 PAYERID。
5.  使用提供的令牌和 PAYERID 调用 DoExpressCheckoutPayment 以完成付款

如果您希望使用定期付款，您将使用以下流程：
1\. 调用 SetExpressCheckout 并将 BILLINGTYPE 设置为“RecurringPayments”并将“AMT”设置为 0**或**您希望立即向买家收取的任何金额。.
2\. 从 SetExpressCheckout 的 API 响应中检索令牌
3\. 调用 DoExpressCheckoutPayment 并将“AMT”设置为您想立即收取的金额。4\. 调用 CreateRecurringPaymentsProfile 并提供令牌，指定所有其他必需参数（计费频率等）。
（可选）5\. 如果您希望更新您的定期付款资料，请使用 UpdateRecurringPaymentsProfile。

[您可以在https://www.x.com/community/ppx/documentation#ec](https://www.x.com/community/ppx/documentation#ec)以及我们的 SDK 在[https://www.x.com/community/ppx/sdks#NVP](https://www.x.com/community/ppx/sdks#NVP)上找到 Express Checkout 的其他文档

[您可以在https://www.x.com/docs/DOC-1372](https://www.x.com/docs/DOC-1372)找到包含 SetExpressCheckout、DoExpressCheckoutPayment、CreateRecurringPaymentsProfile 和 UpdateRecurringPaymentsProfile 相关 API 文档链接的概述

# ios - 我可以使用 ASIHTTPRequest 访问 SVN 吗？

> ID：11821964
> 
> 赞同：1
> 
> 时间：2012-08-06T02:46:16.683
> 
> 标签：ios, objective-c, svn, asihttprequest

知道是否可以使用 ASIHTTPRequest 方法通过 MAC OS X 应用程序访问 SVN？如果是这样，我如何通过 HTTP 请求使用 SVN 命令？

# c#-4.0 - Windows 8 - 等待任务 - 需要对已完成的侦听器进行异步回调

> ID：11821966
> 
> 赞同：2
> 
> 时间：2012-08-06T02:46:45.363
> 
> 标签：c#-4.0, asynchronous, callback, listener, windows-runtime

我有一个函数，它从存储中打开一个文件并返回一个布尔值，指定文件打开得很好。

```
private async Task<bool> SaveImage()
{
    try
    {
        await filesave.openAsync(FileAccessMode.ReadWrite)
    }
    catch()
    {
        return false;
    }

    return true;
} 
```

我想调用 await SaveImage() 函数，但不知何故想要一个侦听器/事件处理程序来告诉我何时完成。完成后我想用新数据更新我的布局。使用适用于 Windows 8 的新 WINRT async/await 异步方法如何实现这一点？是否有解决方法/替代方法。

如何设置事件处理程序类型场景？（完成）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T03:52:14.610

您只需`await`调用您的方法，然后在它完成后使用应该运行的代码。您不需要手动注册事件处理程序。

```
var succeeded = await SaveImage();
// Because of the "await" keyword in the above line, the current method
// will not continue until "SaveImage" has completed its async work and
// signaled its Task
if (succeeded) { ... } 
```

当然，由于上面的代码使用了`await`关键字，所以需要将它放在一个也标记为 的方法中`async`。如果该方法需要*向其*调用者发出完成信号，那么它也应该返回一个`Task`or `Task<T>`; 例如：

```
private async Task<string> MyHelperMethod() {
    var succeeded = await SaveImage();
    if (succeeded)
        return "Success";
    else
        return "Failure";
}
// then, in some other method:
    var message = await MyHelperMethod(); 
```

或者，如果调用的方法`SaveImage`是行尾——比如说它是 a 事件的处理程序`Button`——`Click`那么它可以是`async void`：

```
private async void ButtonClick(object sender, EventArgs args) {
    var succeeded = await SaveImage();
    if (succeeded) { ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:30:09.637

这需要更多的代码，但它是处理异步操作、进度、取消和完成状态的一种非常酷且有用的方法。这是在 VS2012 Winrt Store App 中编译的，我通过单击按钮运行它，如您在此处看到的。

```
 private void Save_File_Click(object sender, RoutedEventArgs e)
    {
        // create your op, bool = return type, string = progress report
        IAsyncOperationWithProgress<bool, string> op;

        // Call our async operation with progress sending the file name
        op = OpenFileWithProgress("test.txt");

        //  not implemented here
        //op.Cancel(); 

        // when we get a progress update...
        op.Progress = (info, progress) =>
        {
            // I'm just giving text feed back to user here
            Debug.WriteLine(progress);
        };
        op.Completed = (info, status) =>
        {
            // check status for completion or cancellation...
            switch (status)
            {
                case AsyncStatus.Completed:
                    //  Do your completed work here
                    Debug.WriteLine("Completed");
                    break;
                case AsyncStatus.Canceled:
                    // Operation canceled - not implemented...
                    Debug.WriteLine("Canceled");
                    break;
                default:
                    // default stuff here
                    break;
            }
        };
    }

    public IAsyncOperationWithProgress<bool, string> OpenFileWithProgress(string fileName)
    {
        return System.Runtime.InteropServices.WindowsRuntime.AsyncInfo.Run<bool, string>((token, progress) =>
            Task.Run<bool>(async () =>
            {
                progress.Report("Starting");
                try
                {
                    StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(fileName);
                }
                catch (Exception ex)
                {
                    return false;
                }

                progress.Report("Finished");

                return true;

            }, token));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:51:17.903

Joe 的回答看起来很棒，但如果您坚持使用事件 - 例如，如果您的 SaveImage() 调用位于与更新布局无关的各个代码区域 - 您可以在操作完成时引发事件。您可以使用普通的旧 CLR 事件或使用[pub-sub 模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)实现，例如 Prism 的[EventAggregator](http://compositewpf.codeplex.com/SourceControl/changeset/view/65392#1024803)或MVVM Light 的[Messenger](http://mvvmlight.codeplex.com/SourceControl/changeset/view/4be0aa663f97#GalaSoft.MvvmLight/Win8RP/GalaSoft.MvvmLight.Win8/Messaging/Messenger.Win8.cs)。POCE 版本可能如下所示

```
public event EventHandler<Tuple<StorageFile,bool>> SaveImageCompleted;

private async Task<bool> SaveImage(StorageFile file)
{
    try
    {
        await file.OpenAsync(FileAccessMode.ReadWrite);
    }
    catch
    {
        if (SaveImageCompleted != null)
            SaveImageCompleted(this, new Tuple<StorageFile, bool>(file, false));

        return false;
    }

    if (SaveImageCompleted != null)
        SaveImageCompleted(this, new Tuple<StorageFile, bool>(file, true));

    return true;
} 
```

# php - .htaccess 从 URL 中删除 PHP 获取数据

> ID：11821968
> 
> 赞同：0
> 
> 时间：2012-08-06T02:47:08.313
> 
> 标签：php, .htaccess

好吧，我正在制作个人资料页面，所以现在看起来像这样

```
http://example.com/random/?user=Robert 
```

我想要做的是`?user=`从 URL 中删除，以便页面显示为

```
http://example.com/random/Robert 
```

我已经搜索过了，我找不到任何对我有用的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:50:29.910

基于[http://statichtml.com/2010/mod-rewrite-baseon-on-query-string.html](http://statichtml.com/2010/mod-rewrite-baseon-on-query-string.html)这应该可以解决问题：

```
RewriteCond %{QUERY_STRING} ^user=(.*)$    [NC]
RewriteRule ^random$ random/$1             [NC,L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T02:50:46.397

第一步是在这个表单中创建所有链接`http://example.com/random/Robert`，然后在文档根目录的 htaccess 文件中添加：

```
RewriteEngine On
RewriteRule ^random/(.+)$ /random/?user=$1 [L] 
```

但是要处理 301 重定向到您的旧 URL，您可以包含以下内容：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /random/\?user=([^\ ]+)
RewriteRule ^random/$ /random/%1 [R=301,L] 
```

# spring - 使用Spring jdbcTemplate时如何捕获execute方法的异常

> ID：11821972
> 
> 赞同：0
> 
> 时间：2012-08-06T02:47:56.183
> 
> 标签：spring, jdbctemplate

我使用 Spring JDBCTemplate 来调用存储过程，就像这样

```
Map receive10PrmtBill = (Map) getJdbcTemplate().execute(sql, new CallableStatementCallback() {

        @Override
        public Object doInCallableStatement(CallableStatement cs) throws SQLException,
                DataAccessException {
            cs.setString(1, Constants.ADD_PROC_TYPE);
            Map<String,PrmtBillInfoDatagram> tempMap = new HashMap();

            cs.execute(); 
```

但是execute方法返回false并且没有抛出任何异常，所以我不知道我的程序出了什么问题，如何捕获异常？有什么帮助吗？

这是过程

```
create proc sp_xx ( @userid int)    
    as   
    begin   
        select personid, personname from person where personid = @userid  

        select teamid, teamname from team   
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:20:50.457

尝试将“IGNORE_DONE_IN_PROC”属性设置为“true”。参见：http: [//javabob64.wordpress.com/2011/04/12/sybase-and-the-jdbc-driver/](http://javabob64.wordpress.com/2011/04/12/sybase-and-the-jdbc-driver/)

# java - JVM（HotSpot）：所有方法都去哪里了？方法区？本机方法堆栈？

> ID：11821974
> 
> 赞同：1
> 
> 时间：2012-08-06T02:48:20.030
> 
> 标签：java, jvm, native-methods

我是 JVM（HotSpot）的新手，并尝试了解它的架构及其工作原理，所以我的问题是所有方法（静态和非静态）都被翻译成字节码吗？当JVM加载类文件时，它是否将所有方法加载到某个地方？喜欢方法区？还是本机方法堆栈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:18:42.587

它取决于 JVM 的实现——不同的 JVM 可能会选择以不同的方式处理这个问题（只要它们符合 Java 规范）。所以你没有绝对的保证。

在 Sun/Oracle JVM 中，方法数据被加载到称为“永久代”的特殊内存区域，这是垃圾收集器为诸如类之类的长寿命对象保留的内存区域。

大多数其他“工业级”JVM 可能会做类似的事情。

看：

*   [https://blogs.oracle.com/jonthecollector/entry/presenting_the_permanent_generation](https://blogs.oracle.com/jonthecollector/entry/presenting_the_permanent_generation)
*   [java内存池是怎么划分的？](https://stackoverflow.com/questions/1262328/how-is-the-java-memory-pool-divided/1262474#1262474)
*   [http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)

**附言**

这都是非常高级的东西——你*绝对*不需要知道任何关于这方面的知识来充分利用 Java 和/或 JVM。您通常应该假设 JVM 代表您进行内存管理并且会有效地执行此操作 - 它已经由专家进行了多年的调整。

JVM 的全部意义在于让你从特定平台的实现细节中抽象出来，毕竟......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-05T13:41:02.543

准确地说，

*   所有方法（静态和非静态）都将加载到方法区域中。

*   方法调用、局部变量、中间结果和执行行将存储在 Stack 中。

*   如果一个方法正在执行，它会在栈顶。一旦执行完成，所有结果都将被删除，如果有任何局部引用变量，它们将被取消。

*   不管正在执行的方法是什么，方法 Area 都有类信息。它类似于浏览器中的缓存，保存 JVM 所需的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-04T22:32:29.297

1.) 是否所有方法（静态和非静态）都被翻译成字节码？

*   是的，一个类的所有成员，无论是静态的还是非静态的，都会被翻译成字节码。编译器负责所有这些翻译/编译。

2.）当JVM加载类文件时，它是否将所有方法加载到某个地方？喜欢方法区？还是本机方法堆栈？

*   类的整个字节码（包括方法字节码）被加载到各自的类块中。
*   类块是方法区域内逻辑上分离的内存块，用于存储各自类的类级数据，例如字节码、方法表和静态变量。

[![在此处输入图像描述](../Images/1291948a3249d53fa94f850c53d7c62b.png)](https://i.stack.imgur.com/NUGyz.jpg) [![在此处输入图像描述](../Images/51060700e675cd7ee669564493ae751b.png)](https://i.stack.imgur.com/b9LST.jpg) [![在此处输入图像描述](../Images/092ed5fab9c4266fa9412354e7976698.png)](https://i.stack.imgur.com/VZizJ.jpg)

*   类级数据与实例无关，即为什么它不存储在堆中类的实例（对象）中。所有对象共享一个类级数据的副本。
*   所以，这个问题的简单答案是“所有类字节码（包括方法的字节码）都加载到方法区”。
*   要了解有关方法领域的更多信息，请访问 [https://www.artima.com/insidejvm/ed2/jvm5.html](https://www.artima.com/insidejvm/ed2/jvm5.html)或参考 SCJP/Oracle 学习指南

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T10:05:56.767

我通常建议您阅读这篇关于 JVM 基本要素的精彩文章。

[https://anturis.com/blog/java-virtual-machine-the-essential-guide/](https://anturis.com/blog/java-virtual-machine-the-essential-guide/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T03:29:07.283

是的，所有的方法都被翻译成字节码。字节码文件是 jvm 将从中加载的中间文件。

jvm什么时候加载class文件？它会在第一次使用该类时执行此操作——包含以下几种情况：

1.  创建类的实例：new 运算符、反射、克隆方法或反序列化。
2.  Inoking 类的静态方法。
3.  使用或评估类或接口的静态变量（最终静态变量除外），因为它们是编译时常量。
4.  通过反射调用方法。
5.  加载类的子类。它仅适用于接口以外的类。
6.  jvm 的引导类。例如。包含 main 方法的类。
7.  实现接口的类在初始化时不需要初始化接口，但必须加载。

是的，方法被加载到方法区域。换句话说，字节码文件被加载到方法区。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-23T10:47:21.087

Java进程消耗的内存可以分为Java和Native heap。Java堆是由大小为Xmx的jvm分配的内存部分，用于Java对象分配，其中作为由JNI代码分配的本地内存部分和由本地语言完成的分配。是否所有方法（静态和非静态）都被翻译成字节码？

> > 用 java 编写的代码被转换为字节码以进行访问，而与访问说明符或修饰符无关

当JVM加载类文件时，它是否将所有方法加载到某个地方？像方法区？或本地方法堆栈？

> > Class(Method) 区域存储每个类的结构，例如运行时常量池、字段和方法数据、方法的代码。

# python - cursor.fetchone() 返回 None 但数据库中的行存在

> ID：11821976
> 
> 赞同：8
> 
> 时间：2012-08-06T02:48:40.610
> 
> 标签：python, mysql, mysql-python

我正在编写一个与 MySQL 数据库交互的 python 程序。对于 sql 查询，我使用 MySQLdb。问题是`fetchone()`返回 None 但使用数据库浏览器我可以看到**该**行存在。这段代码：

```
query = "SELECT * FROM revision WHERE rev_id=%s;" 
cursor.execute(query % revision_id)
row = cursor.fetchone()
if row == None:
    raise Exception("there isn't revision with id %s" % revision_id) 
```

我不知道这里发生了什么。有任何想法吗？

编辑：好的，在某些情况下，它在某些情况下不起作用，但无论如何，当它不起作用时，表中存在该行。我将光标对象传递给函数，上面的代码在函数中。问题与此游标对象有关。问题可能是我将光标作为参数传递给函数吗？我该如何测试它？

EDIT2：是的，问题是光标在我使用几次后不起作用。是因为其他程序连接到数据库还是我做错了什么。我有`while`一个循环，我在其中调用一个函数来从数据库中获取信息。经过一些迭代后，它不再起作用。`while`还有另一个程序在循环工作时写入数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T04:32:54.933

好的，`db.autocommit(True)`解决了我的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-04T16:24:27.630

这与 MySQL 服务器上的事务隔离级别有关。如果`REPEATABLE_READ`是 InnoDb 的默认级别，则在第一次读取时创建一个快照，随后由同一个游标进行的读取都是从该快照进行的。[在此处](https://dev.mysql.com/doc/refman/5.6/en/innodb-transaction-isolation-levels.html)阅读有关隔离级别的更多信息

在重用同一个游标来运行多个查询时，我们通常需要的是`READ_COMMITTED`. 幸运的是，如果您无法在 SQL 服务器上更改此设置，您可以将光标设置为特定的隔离级别。

```
cur = conn.cursor()
cur.execute("SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED") 
```

这可确保您进行的每个查询都使用最新提交的快照。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T09:56:05.920

最佳实践是在所有查询执行后提交 db `db.commit()`

# actionscript-3 - 从字节数组中读取 3 位

> ID：11821977
> 
> 赞同：1
> 
> 时间：2012-08-06T02:48:45.897
> 
> 标签：actionscript-3

我正在用 ActionScript 3 编写 DXT5 图像阅读器，我需要读取存储在更大字节数组中的 6 个字节中的 16 个 3 位值。我对如何有效地阅读它有点茫然。我用 2 位代码做了类似的事情，但是奇数使它变得更加困难（至少对我来说）。理想情况下，源字节数组将以所讨论的 6 之后的下一个字节的位置结束。

```
var values:Vector.<uint> = new Vector.<uint>(16);
var alpha_bytes:ByteArray = new ByteArray();
data.readBytes(alpha_bytes, 0, 6);

// ?? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:35:08.967

好的，所以我想出了一个解决方案 - 不是很优雅，但它有效。基本上，我将 24 位读入一个短字节和一个字节，然后将它们组合成一个 uint，然后代表 24 位。然后我使用 for 循环来提取实际值。

```
var alpha_16:uint = data.readUnsignedShort();
var alpha_8:uint = data.readUnsignedByte();

var alpha_1:uint =  (alpha_8 << 16) | alpha_16;

for(j = 0; j < 8; j++){
    alpha_values[j] = ( alpha_1 & ( 7 << ( 3 * j ) ) ) >> ( 3 * j )
} 
```

# bash - 在 bash 中解析 .csv 文件，而不是读取最后一行

> ID：11821979
> 
> 赞同：3
> 
> 时间：2012-08-06T02:49:26.443
> 
> 标签：bash, parsing, shell, unix, csv

我正在尝试解析我使用 Google 电子表格制作的 csv 文件。用于测试目的非常简单，基本上是：

1,2
3,4
5,6

问题是 csv 没有以换行符结尾，所以当我`cat`在 BASH 中的文件时，我得到

```
MacBook-Pro:Desktop kkSlider$ cat test.csv 
1,2 
3,4 
5,6MacBook-Pro:Desktop kkSlider$ 
```

我只想使用每个指南建议的 while 循环在 BASH 脚本中逐行阅读，我的脚本如下所示：

```
while IFS=',' read -r last first
do
    echo "$last $first"
done < test.csv 
```

输出是：

```
MacBook-Pro:Desktop kkSlider$ ./test.sh
1 2
3 4 
```

关于如何让它读取最后一行并回显它的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T02:57:25.800

您可以*强制*循环的输入以换行符结束，因此：

```
#!/bin/bash
(cat test.csv ; echo) | while IFS=',' read -r last first
do
    echo "$last $first"
done 
```

不幸的是，如果输入末尾已经有换行符，这可能会导致输出末尾出现空行。你可以通过一些补充来解决这个问题：

```
!/bin/bash
(cat test.csv ; echo) | while IFS=',' read -r last first
do
    if [[ $last != "" ]] ; then
        echo "$last $first"
    fi
done 
```

另一种方法依赖于这样一个事实，即这些值是由 the*放入*变量中的，但由于以下语句`read`，它们只是没有被输出：`while`

```
#!/bin/bash
while IFS=',' read -r last first
do
    echo "$last $first"
done <test.csv
if [[ $last != "" ]] ; then
    echo "$last $first"
fi 
```

该工作无需创建另一个子shell 来修改`while`语句的输入。

* * *

当然，我在这里假设你想在循环中做更多的事情，只输出带有空格而不是逗号的值。如果这就是您想做的全部，还有其他工具比`bash`读取循环更适合，例如：

```
tr "," " " <test.csv 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T04:54:53.160

```
cat file |sed -e '${/^$/!s/$/\n/;}'| while IFS=',' read -r last first; do echo "$last $first"; done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T07:24:34.847

如果最后（未终止的）行需要与其他行不同的处理，@paxdiablo 的带有额外`if`语句的版本是要走的路；但是如果要像所有其他人一样处理它，那么在主循环中处理它会更干净。

您可以将“如果最后一行未终止”滚动到主循环条件中，如下所示：

```
while IFS=',' read -r last first || [ -n "$last" ]
do
    echo "$last $first"
done < test.csv 
```

# matlab - 如何求和矩阵中每一行的最大值？

> ID：11821987
> 
> 赞同：0
> 
> 时间：2012-08-06T02:51:01.940
> 
> 标签：matlab

```
A=[ 2 4 8 20 0 0;
    1 3 6 18 22 0;
    0 3 5 8 18 20] 
```

然后从上面的矩阵中，我想计算每行的最大值的平均值。所以我希望结果：

```
result=average(20+22+20)=20,67 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:12:03.750

[C,I] = max(...) 找到 A 的最大值的索引，并将它们返回到输出向量 I 中。如果有多个相同的最大值，则返回找到的第一个的索引。

对于你的问题

```
maxValues= max(A,[],2)
result=Mean(maxValues) 
```

# eclipse - Eclipse 中的安全社交

> ID：11821995
> 
> 赞同：0
> 
> 时间：2012-08-06T02:52:14.890
> 
> 标签：eclipse, playframework, securesocial

当我尝试使用依赖于securesocial的项目设置eclipse时，我收到以下消息：

项目“xxx”缺少必需的 Java 项目：“securesocial”

我听从了[这个人的建议](https://groups.google.com/forum/?fromgroups#!topic/play-framework/vEyAnDL19M8)

这是我的 Build.scala：

```
import sbt._
import Keys._
import PlayProject._

import com.typesafe.sbteclipse.core.EclipsePlugin.EclipseKeys

object ApplicationBuild extends Build {

    override def settings = super.settings ++ Seq(
        EclipseKeys.skipParents in ThisBuild := false)

    val appName         = "XXX"
    val appVersion      = "1.0-SNAPSHOT"

    val ssDependencies = Seq(
      // Add your project dependencies here,
      "com.typesafe" %% "play-plugins-util" % "2.0.1",
      "org.mindrot" % "jbcrypt" % "0.3m"
    )

    val secureSocial = PlayProject(
        "securesocial", appVersion, ssDependencies, mainLang = SCALA, path = file("modules/securesocial")
    ).settings(
      resolvers ++= Seq(
        "jBCrypt Repository" at "http://repo1.maven.org/maven2/org/",
        "Typesafe Repository" at "http://repo.typesafe.com/typesafe/releases/"
      )
    )

    val appDependencies = Seq(
      // Add your project dependencies here,
    )

    // Only compile the bootstrap bootstrap.less file and any other *.less file in the stylesheets directory 
    def customLessEntryPoints(base: File): PathFinder = ( 
      (base / "app" / "assets" / "stylesheets" / "bootstrap" * "bootstrap.less") +++
      (base / "app" / "assets" / "stylesheets" / "bootstrap" * "responsive.less") +++ 
      (base / "app" / "assets" / "stylesheets" * "*.less")
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here      
      lessEntryPoints <<= baseDirectory(customLessEntryPoints)
    ).dependsOn(secureSocial).aggregate(secureSocial)

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:02:40.890

在 Eclipse 中，将 Secure Social 模块作为常规 Eclipse 项目导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:35:38.643

将securesocial模块的“app”文件夹添加到eclipse中项目的源构建路径。

# android - 接近警报 - 开始活动

> ID：11821996
> 
> 赞同：3
> 
> 时间：2012-08-06T02:52:22.203
> 
> 标签：android, locationmanager, android-pendingintent

我正在使用 Proximity Alert 开始一项活动。

我在我的支持 GPS 的 Android 2.3 模拟器上运行了这个，但是在重新启动 PC 后它不再工作。不确定这是否是由于错误的 Eclipse 造成的。

我的代码中一定遗漏了一些东西或破坏了它，现在看不到它：

```
private LocationManager locationManager;
private PendingIntent pendingIntent;
double lat = 33.426517;
double lon = -70.439244;
float radius = 1000f;
long expiration = -1;

 @Override
        public void onCreate(Bundle savedInstanceState) {
    /* Instantiate MapView, ZoomControls, layout, etc. here
    */
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.addProximityAlert(lat, lon, radius, expiration,
            pendingIntent);

    Intent newActivity = new Intent(this, InfoActivity.class);
    pendingIntent = PendingIntent.getActivity(this, 0, newActivity, 0);

    } 
```

# android - 使视图在线性布局中突出显示

> ID：11821997
> 
> 赞同：0
> 
> 时间：2012-08-06T02:52:36.037
> 
> 标签：android

我希望像列表视图中的项目一样突出显示视图（我使用线性布局，因为列表视图不能使用 addchild() 动态添加新项目）

当一个列表视图项目被触摸时，该项目通常是绿色突出显示。如何将此功能实现到线性布局中的视图中？

我在视图的 ontouchlistener 中尝试了 view.requestfocus。这返回 true，但什么也看不到。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:07:10.170

您可以动态地将项目添加到列表视图中......

```
public class MainActivity extends ListActivity {

/** Items entered by the user is stored in this ArrayList variable */
ArrayList<String> list = new ArrayList<String>();

/** Declaring an ArrayAdapter to set items to ListView */
ArrayAdapter<String> adapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    /** Setting a custom layout for the list activity */
    setContentView(R.layout.main);

    /** Reference to the button of the layout main.xml */
    Button btn = (Button) findViewById(R.id.btnAdd);

    /** Defining the ArrayAdapter to set items to ListView */
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, list);

    /** Defining a click event listener for the button "Add" */
    OnClickListener listener = new OnClickListener() {          
        @Override
        public void onClick(View v) {                               
            EditText edit = (EditText) findViewById(R.id.txtItem);
            list.add(edit.getText().toString());
            edit.setText("");               
            adapter.notifyDataSetChanged();
        }
    };

    /** Setting the event listener for the add button */
    btn.setOnClickListener(listener);

    /** Setting the adapter to the ListView */
    setListAdapter(adapter);        
} 
```

}

# c++ - 在构造函数中初始化向量 - C++

> ID：11821998
> 
> 赞同：0
> 
> 时间：2012-08-06T02:52:40.160
> 
> 标签：c++, vector, constructor

我正在努力处理我的一个类的构造函数对未正确初始化的成员所做的事情。

我有一个“设置”类来处理我用于模拟的设置和一个执行模拟步骤的模拟类。

我无法理解的是为什么这段代码不能按预期工作：

```
 class Settings{ 
         public: 
           int n ; // a number I need to create properly a vector in my class simulation
           // ... rest of the code constructors etc to read values from files.
           // everything works fine and the values are assigned properly
       }

       class Simulation{
          public:
          std::vector<int> v ;
          Settings *SP;

          Simulation(Settings *);
        }

        Simulation::Simulation(Settings *pS) 
           :SP(pS), v(std::vector<int>(SP->n,0)) {}    // the constructor doesn't work,
    // v is initialized but it is not created as a vector of size n, but 0. 
```

我认为我使用构造函数的方式存在问题，但我不明白为什么。

顺便说一下在大括号内定义 v 工作正常，我只是想知道为什么以正确的方式定义它不能按预期工作！

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:57:45.263

`pS->n != 0`在实例化 之前，您已经验证过了`Simulation`，对吗？

无论如何，我认为您在构造函数中寻找的行是：

```
:SP(pS), v(pS->n, 0) {} 
```

您现在的做法是创建一个整体`std::vector`，然后将其*复制*到`v`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T02:57:57.317

您不需要额外的向量：

```
Simulation::Simulation(Settings *pS) 
       :SP(pS), v(SP->n,0) {} 
```

如果这不起作用，这不是您的代码。你确定在类定义`SP`之前声明过吗？`v`如果这也不起作用，请尝试使用`pS`而不是`SP`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:10:47.687

您不需要创建额外的向量并使用复制构造函数。只需将参数直接传递给成员初始化程序中的向量即可。正如另一位发帖人所提到的，您是否验证过 SP->n 的返回实际上不是 0？如果你硬编码一些值，你会发现它工作正常，如下所示：

```
#include <iostream>
#include <vector>
using namespace std;

class foo
{
public:
    foo();
    vector<int> vec;
};

int main()
{
    foo obj;
    for(int i=0;i<obj.vec.size();++i) {
        cout << obj.vec[i] << ' ';
    }
    system("pause");
    return 0;
}

foo::foo()
    :vec(vector<int>(10,2))
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T03:07:24.547

另外请确保您检查 SP 不是空指针。否则会发生崩溃。

```
Simulation::Simulation(Settings *pS) 
   :SP(pS), v(pS != NULL ? pS->n : 0 , 0) {} 
```

这将检查 SP 是否为 NULL。当 Simulation(NULL) 用作构造函数时就是这种情况。