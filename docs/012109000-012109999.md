# StackOverflow 问答 12109000-12109999

# c# - 无法使用数据注释在 MVC 4 中设置日期时间格式

> ID：12109007
> 
> 赞同：16
> 
> 时间：2012-08-24T11:58:03.533
> 
> 标签：c#, asp.net-mvc, datetime, asp.net-mvc-4, datetime-format

我会尝试一切，但不能使用这个（**dd/MM/yyyy**）日期格式，这总是门**mm/dd/yyyy**

```
[Display(Name = "Release Date")]
[DataType(DataType.DateTime)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public Nullable<DateTime> release_date { get; set; } 
```

剃刀视图

```
@Html.EditorFor(model => model.release_date) 
```

使用日期时间模板。

```
@model Nullable<System.DateTime>
@if (Model.HasValue)
{
    @Html.TextBox("", String.Format("{0:dd/MM/yyyy}", Model.Value))
}
else
{
    @Html.TextBox("", String.Format("{0:dd/MM/yyyy}", DateTime.Now))
}
@{
    string name = ViewData.TemplateInfo.HtmlFieldPrefix;
    string id = name.Replace(".", "_");
}
<script type="text/javascript">
    $(document).ready(function () {
        $("#@id").datepicker({
                dateFormat: "dd/mm/yy",
                showStatus: true,
                showWeeks: true,
                highlightWeek: true,
                numberOfMonths: 1,
                showAnim: "scale",
                showOptions: {
                    origin: ["top", "left"]
                }
          });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-24T12:04:50.713

你在这里错过了两件事：

```
DataFormatString="{0:dd/MM/yyyy}"; //It is dd/MM/yyyy instead of dd/mm/yyyy 
```

你还需要：

```
ApplyFormatInEditMode=true 
```

尝试使用这个：

```
[Display(Name = "Release Date")]
[DataType(DataType.Date), DisplayFormat( DataFormatString="{0:dd/MM/yyyy}", ApplyFormatInEditMode=true )]
public Nullable<DateTime> release_date { get; set; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T12:02:46.433

`{0:dd/mm/yyyy}`应该是`{0:dd/MM/yyyy}`因为`mm`意味着分钟，而不是几个月：

```
[Display(Name = "Release Date")]
[DataType(DataType.DateTime)]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public Nullable<DateTime> release_date { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T04:28:34.227

如果您使用数据注释。当显示它好。但是在编辑模式下。它仍然使用服务器格式（文化设置） DisplayFormat：喜欢它的名称，仅用于显示

有一些选项可以解决。- 使用您喜欢的格式作为字符串粘贴到服务器 - 编写客户绑定 - 在 web.config 中为格式设置全球化：dd/MM/yyy i 使用以下设置

```
<system.web>
    <globalization culture="en-GB"/>
.... 
```

# javascript - 具有非数字索引的 Javascript 中的多维数组

> ID：12109016
> 
> 赞同：0
> 
> 时间：2012-08-24T11:58:35.233
> 
> 标签：javascript, arrays, multidimensional-array

他们有什么方法可以使用非数字索引在 Javascript 中创建多维数组吗？

像结构

```
 optionList[0]['id'] = "equals"; 
                optionList[0]['name'] = "Equals";

                optionList[1]['id'] = "not_equals_str"; 
                optionList[1]['name'] = "Does Not Equal";

                optionList[2]['id'] = "contains"; 
                optionList[2]['name'] = "Contains"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:00:06.733

是的，至少某种对象可以做你想做的事，即使它不是真正的“多维数组”。

您创建一个模维数组。

然后用简单的 javascript 对象填充它，您可以将其视为某种用于多种用途的映射。

```
var optionList = [];
optionList.push({});
optionList[0]['id'] = "equals"; 
... 
```

您可以一次性创建它：

```
var optionList = [
    {id:"equals", name:"Equals"},
    ...
]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:00:32.793

在 JavaScript 中，您应该将*对象*用作具有非数字索引的数组。因此，您的结构将如下所示：

```
var optionList = [
    {
        id : "equals",
        name : "Equals"
    },
    {
        id : "not_equals_str",
        name : "Does Not Equal"
    },
    {
        id : "contains",
        name : "Contains"
    }
]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:01:01.013

这些是包含对象的数组。它看起来像这样：

```
var optionList = [
    {},
    {},
    {}
]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:01:33.807

是的，您始终可以嵌套对象。

```
optionList = [{
      id: "equals",
      name: "Equals"
   },{
      id: "not_equals_str",
      name: "Does not Equal"
   },{
      id: "contains",
      name: "Contains"
   }] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T12:02:23.650

是的。您必须定义一个空数组，然后将这些详细信息作为对象推送到其中。

```
 var optionList = [];
 optionList.push({id: 'equals', name: 'equals'});
 optionList.push({id: 'not_equals_str', name: 'Does Not Equal'}); 
```

希望这可以帮助。

# windows-phone-7 - 导航返回并显示上一页而不重新加载上一页变量和设计？

> ID：12109020
> 
> 赞同：0
> 
> 时间：2012-08-24T11:58:59.220
> 
> 标签：windows-phone-7

我的程序中有一个问题，我的程序中有三个页面，主页，第一页和第二页。我能够从主页导航到第一页，从第一页导航到第二页。我在第一页有一个堆栈面板。它由从数据库动态创建的子项组成。此页面包含一个 OnNavigateTo 方法，用于从主页获取元素并显示它，并且我在此方法中编写了我的编码以将子动态添加到堆栈面板。当从第二页导航回第一页时，编译器将转到 OnNavigateTo 方法并再次重新生成堆栈面板的子项。

我的问题是：

当按下后退按钮时，我想显示先前显示的第一页以及所有数据。我不希望页面再次重新生成。当我从第二页回到第一页时，我想要我以前拥有的静态页面。

怎么做？请帮我一些代码...谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:16:26.060

在构造函数中执行逻辑，因为在返回时不会调用它（除非应用程序已被墓碑化）。无论您如何导航到页面，每次都会调用 OnNavigatedTo。

阅读本文了解更多信息：

[每日 WP7 开发提示：页面启动：构造函数](http://www.codebadger.com/blog/post/2010/10/01/WP7-Development-Tip-of-the-Day-Page-Startup-The-Constructor.aspx)

# android - 图像背景改变的ifs太多？

> ID：12109021
> 
> 赞同：1
> 
> 时间：2012-08-24T11:59:05.467
> 
> 标签：android, image, if-statement, background, many-to-many

我正在制作一个内部包含许多图像的 android 应用程序。由于我从共享首选项中读取的变量，我必须在我的应用程序中更改 30 个图像的背景。看起来像那样（只有一部分女巫背景发生了变化，我写了“findviewvbyid”并读取了共享偏好数据：

```
if (fav[0]==0) s0.setImageResource(R.drawable.stara); else s0.setImageResource(R.drawable.star);
        if (fav[1]==0) s1.setImageResource(R.drawable.stara); else s1.setImageResource(R.drawable.star);
        if (fav[2]==0) s2.setImageResource(R.drawable.stara); else s2.setImageResource(R.drawable.star);
        if (fav[3]==0) s3.setImageResource(R.drawable.stara); else s3.setImageResource(R.drawable.star);
        if (fav[4]==0) s4.setImageResource(R.drawable.stara); else s4.setImageResource(R.drawable.star);
        if (fav[5]==0) s5.setImageResource(R.drawable.stara); else s5.setImageResource(R.drawable.star);
        if (fav[6]==0) s6.setImageResource(R.drawable.stara); else s6.setImageResource(R.drawable.star);
        if (fav[7]==0) s7.setImageResource(R.drawable.stara); else s7.setImageResource(R.drawable.star);
        if (fav[8]==0) s8.setImageResource(R.drawable.stara); else s8.setImageResource(R.drawable.star);
        if (fav[9]==0) s9.setImageResource(R.drawable.stara); else s9.setImageResource(R.drawable.star);    
if (fav[10]==0) s0.setImageResource(R.drawable.stara); else s0.setImageResource(R.drawable.star);
        if (fav[11]==0) s1.setImageResource(R.drawable.stara); else s1.setImageResource(R.drawable.star);
        if (fav[12]==0) s2.setImageResource(R.drawable.stara); else s2.setImageResource(R.drawable.star);
        if (fav[13]==0) s3.setImageResource(R.drawable.stara); else s3.setImageResource(R.drawable.star);
        if (fav[14]==0) s4.setImageResource(R.drawable.stara); else s4.setImageResource(R.drawable.star);
        if (fav[15]==0) s5.setImageResource(R.drawable.stara); else s5.setImageResource(R.drawable.star);
        if (fav[16]==0) s6.setImageResource(R.drawable.stara); else s6.setImageResource(R.drawable.star);
        if (fav[17]==0) s7.setImageResource(R.drawable.stara); else s7.setImageResource(R.drawable.star);
        if (fav[18]==0) s8.setImageResource(R.drawable.stara); else s8.setImageResource(R.drawable.star);
        if (fav[19]==0) s9.setImageResource(R.drawable.stara); else s9.setImageResource(R.drawable.star);
        if (fav[20]==0) s0.setImageResource(R.drawable.stara); else s0.setImageResource(R.drawable.star);
        if (fav[21]==0) s1.setImageResource(R.drawable.stara); else s1.setImageResource(R.drawable.star);
        if (fav[22]==0) s2.setImageResource(R.drawable.stara); else s2.setImageResource(R.drawable.star);
        if (fav[23]==0) s3.setImageResource(R.drawable.stara); else s3.setImageResource(R.drawable.star);
        if (fav[24]==0) s4.setImageResource(R.drawable.stara); else s4.setImageResource(R.drawable.star);
        if (fav[25]==0) s5.setImageResource(R.drawable.stara); else s5.setImageResource(R.drawable.star);
        if (fav[26]==0) s6.setImageResource(R.drawable.stara); else s6.setImageResource(R.drawable.star);
        if (fav[27]==0) s7.setImageResource(R.drawable.stara); else s7.setImageResource(R.drawable.star);
        if (fav[28]==0) s8.setImageResource(R.drawable.stara); else s8.setImageResource(R.drawable.star);
        if (fav[29]==0) s9.setImageResource(R.drawable.stara); else s9.setImageResource(R.drawable.star);
        if (fav[30]==0) s9.setImageResource(R.drawable.stara); else s9.setImageResource(R.drawable.star); 
```

我注意到 10 个变量一切正常，上面的每个数量都不起作用。谢谢您的帮助

# sqlite - LIMIT 是否保留 SQLITE 中的排序顺序？

> ID：12109025
> 
> 赞同：1
> 
> 时间：2012-08-24T11:59:13.300
> 
> 标签：sqlite

我阅读了@ [http://www.sqlite.org/lang_select.html](http://www.sqlite.org/lang_select.html)的文档，但不明白 LIMIT 是在 ORDER BY 子句之前还是之后起作用。

所以如果我的 SQL 是：

```
SELECT date(event_time) as ct, jobName 
FROM events
WHERE jobName = "MY_TEST_JOB"
ORDER BY event_time DESC
LIMIT 10; 
```

结果集会包括最近的 10 个事件，还是会在排序操作之前应用限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:00:46.613

`LIMIT`在 之后应用`ORDER BY`，因此您将获得前 10 条记录`event_time`（按升序排列，因此是 10 个“最旧”事件）。

如果您想获得 10 个*最新*事件，您只需将您的更改`ORDER BY`为：

```
ORDER BY event_time DESC 
```

# ios5 - 如何将 cocos2d 与 SmartFoxServer 连接起来？

> ID：12109026
> 
> 赞同：0
> 
> 时间：2012-08-24T11:59:18.047
> 
> 标签：ios5, cocos2d-iphone

我应该从事游戏开发工作，因为我正在寻找可以与 Cocos2d 框架结合使用的 SFS (SmartFoxServer)，谁能告诉我如何连接到 SFS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:35:40.573

SmartFox 服务器有一个 iPhone API。剩下的就看你了。[在这里](http://www.smartfoxserver.com/download/sfs2x#p=examples)你可以下载一些 iOS 示例，[这里](http://docs2x.smartfoxserver.com/ExamplesIOS/introduction)是解释。

# mysql - （如何）我可以在单个查询中按行/结果顺序对查询结果组进行编号吗？

> ID：12109027
> 
> 赞同：3
> 
> 时间：2012-08-24T11:59:18.073
> 
> 标签：mysql, sql, select

我有一个查询当前返回具有以下属性的数据：

*   一个数字**A**保证在结果中是唯一的（不在源表中）；结果按 A 排序，但结果中 A 的值不一定是连续的。
*   对多行重复的键**B**，将它们标记为同一组的一部分。它来自与 A 相同的表。

例子：

```
+--+-+-+
|id|A|B|
+--+-+-+
| 5|1|2|
|15|3|2|
|12|4|5|
|66|6|5|
| 2|7|2|
+--+-+-+ 
```

我在这里看到了解释如何在结果中返回行号的答案。但是，我需要的是获得一个（最好是基于 1 的）订单号，同时为每个**B**保持不同的计数。在下表中，**C**是期望的结果：

```
+--+-+-+-+
|id|A|B|C|
+--+-+-+-+
| 5|1|2|1|
|15|3|2|2|
|12|4|5|1|
|66|6|5|2|
| 2|7|2|3|
+--+-+-+-+ 
```

这超出了我目前的 SQL 技能，所以我会感谢任何指针。包括指向现有答案的指针！

**编辑：**下面的两个答案在结果方面同样有效（使用虚拟包装查询进行排序）。谢谢大家的帮助。哪个是最有效的查询？考虑到在我的特定用例中，从原始查询返回的行数永远不会很大（假设最多 50 行，即使这是想象的延伸）。此外，原始查询具有用于从其他关系中获取数据的连接，尽管它们与排序或过滤无关。最后，所有结果都可能具有相同的**B**，或者每个结果都具有不同的**B** ——它可以是任何一种方式，也可以是介于两者之间的任何地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T12:16:10.503

您基本上想要的是[`RANK()`](http://www.techonthenet.com/oracle/functions/rank.php)功能。但是，由于它在 MySQL 中不可用，您可以使用以下方法模拟它：

```
SELECT *
FROM (
  SELECT a, b, (CASE b 
                WHEN @partition THEN @rank := @rank + 1 
                ELSE @rank := 1 AND @partition := b END) AS c
  FROM tbl, (SELECT @rank := 0, @partition := '') tmp
  ORDER BY b, a
) tmp
ORDER BY a 
```

**[演示](http://sqlfiddle.com/#!2/8ab08/1)**（SQL 小提琴）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T12:15:04.450

```
select p.*, @i := if(@lastB != p.B, 1, @i + 1)
,@lastB := p.B as B
from table_name p, 
(select @i := 0) vt1,
(select @lastB := null) vt2
order by B; 
```

试试这个代码。（未测试）

**使用 sqlfiddle [http://sqlfiddle.com/#!2/412df/13/2](http://sqlfiddle.com/#!2/412df/13/2)**编辑演示****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:20:36.020

这不会非常有效，因为您的查询必须计算两次，然后还要进行分组：

```
SELECT 
    q.* ,
    COUNT(*) AS c              --- the "Rank"
FROM 
    yourQuery AS q
  JOIN
    yourQuery AS qq
      ON  qq.B = q.B
      AND qq.A <= q.A
GROUP BY
    q.A ; 
```**

# .htaccess - htaccess隐藏“索引”

> ID：12109028
> 
> 赞同：2
> 
> 时间：2012-08-24T11:59:29.930
> 
> 标签：.htaccess

我只想显示我的网络服务器的目录内容。

我的 .htaccess 文件包含：

```
Options '+Indexes'
IndexOptions +FancyIndexing 
```

在浏览器中我得到了路径：

```
"Index of /~efc/" 
```

在页脚中：

`"Apache/2.2.22 (FreeBSD) mod_ssl/2.2.22 OpenSSL/1.0.1c mod_hcgi/0.9.4 DAV/2 Server"`

有没有办法防止这些线？

编辑：除了 Sàt 的答案之外，我还通过以下指令得到了我想要的结果：

```
Options '+Indexes'

# SET INDEX OPTIONS
IndexOptions IgnoreCase FancyIndexing FoldersFirst NameWidth=* DescriptionWidth=* SuppressHTMLPreamble

# SPECIFY HEADER FILE
HeaderName header.html

# SPECIFY FOOTER FILE
ReadmeName footer.html

# IGNORE THESE FILES
IndexIgnore header.html footer.html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:08:43.037

当然。使用 HeaderName 和 ReaderName 指令，如下所示：

```
Options '+Indexes'
IndexOptions +FancyIndexing
HeaderName fancy_hdr.html
ReadmeName fancy_readme.html 
```

HeaderName 指向列表之前渲染的 html 文件，ReadmeName 指向列表之后渲染的 html。

有很多有趣的自定义选项，您可能想看看[文档](http://httpd.apache.org/docs/2.2/mod/mod_autoindex.html)或[各种](http://docstore.mik.ua/orelly/linux/apache/ch07_01.htm) [教程](http://www.superk.org/index.php/Apache_FancyIndexing)中的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:08:45.517

页脚也打印在 404 等错误页面上。您可以通过httpd.conf 中的[ServerTokens指令控制其显示。](https://httpd.apache.org/docs/2.2/mod/core.html#servertokens)

# c++ - 使用索引项避免重复条目

> ID：12109030
> 
> 赞同：1
> 
> 时间：2012-08-24T11:59:36.020
> 
> 标签：c++, algorithm

我正在阅读 robert sedwick 关于算法的书中的队列

> 当数据结构中的项本身是数组索引时，我们将此类项称为“索引项”。通常，我们有一组 M 个对象，保存在另一个数组中，我们需要通过一个通用队列结构作为更复杂算法的一部分。对象按索引入队，取出时处理，每个对象都精确处理一次。通常，队列中没有重复的数组索引直接实现了这个目标。

我在最后一句中的问题“对象按索引放入队列并在删除时进行处理，并且每个对象都将被精确处理一次”？我们只使用一个数组而不是两个数组？

作者所说的“通常没有重复的队列中的数组索引直接实现了这个目标”是什么意思。?

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T12:10:38.950

好吧，作者想要解决处理存储在数组中的数据的算法任务：

```
 +-----+-----+---------+-----+
Data = | Foo | Bar | Grandma | Zip |
       +-----+-----+---------+-----+ 
```

我们需要以某种由我们的算法确定的顺序来处理这些数据，并且我们接下来要处理某种“待办事项”队列。复制实际数据对象可能是不可取的或不可能的（对象可能很大或不可复制）。*索引*队列可以解决问题：

```
 --+---+---+--\
ToDo = [2] --> | 0 | 3 | -----> (1)
             --+---+---+--/ 
```

队列告诉我们这`Data[1]`是下一个要处理的项目。`Data[3]`并且`Data[0]`正在等待，我们刚刚决定将其`Data[2]`作为最近的任务。

（例如，队列用于树结构的广度优先搜索：您从一侧的队列中弹出下一个要访问的节点，并将该节点的子节点作为未来工作推入另一侧。每个节点都应该被访问一次。上面的索引队列允许你将*实际*的树元素存储在`Data`数组中，并且只通过轻量级索引来引用它们。）

# magento - 使用捆绑的可配置产品时的股票期权

> ID：12109039
> 
> 赞同：1
> 
> 时间：2012-08-24T12:00:13.930
> 
> 标签：magento

在 magento 商店中，我们有一个产品配置如下：

*   鞋子报价（捆绑产品）
    *   黑鞋（可配置产品）
        *   尺寸 1（简单产品）
        *   尺寸 2（简单产品）

所以我们有一个捆绑产品，它由具有各种简单产品的可配置产品组成。

我们期望发生的情况是，当有人通过鞋子报价订购单双 2 码鞋时，“2 码”的库存会减少一码。这不会发生。我们将所有产品配置为管理库存，因此我们想知道这是否可能，或者我们必须提出自己的解决方案。

我们正在使用 Magento 1.6.0。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:22:52.413

我们通过从配置中删除可配置产品以另一种方式解决了这个问题。所以捆绑产品现在直接嵌入了简单的产品，这样库存就可以得到正确的管理。

# shared-libraries - 来自动态/静态库的可执行文件的大小

> ID：12109041
> 
> 赞同：3
> 
> 时间：2012-08-24T12:00:19.227
> 
> 标签：shared-libraries, static-libraries

我只是在试验静态和动态库的东西。我制作了两个 .c 文件（比如 file1.c、file2.c）和两个 .h 文件，它们分别包含了一些在其中定义和声明的函数。

我还制作了一个新的 .c 文件，它将调用上述两个 .c 文件中的函数。

如果我使用共享库/静态库，我想检查我得到的可执行文件的大小，所以我从文件 file1 的 .os 制作了一个静态库（libstat.a）和一个共享库（libshar.so）。 c 和文件 2.c。

在将这些库链接到我的主 .c 时，我发现在动态库的情况下可执行文件的大小更大。这不是预期的，对吧？在使用共享库的情况下，库是在运行时加载的，那么为什么它的大小更大？

我正在使用以下命令：

## 静态库案例

```
gcc -c file1.c file2.c

ar -cvq libstat.a file1.o file2.o

gcc -o ex1 mainprg.c -L . -lstat 
```

## 动态/共享库案例

```
gcc -c -fpic file1.c file2.c

gcc -shared file1.o file2.o -o libshar.so

gcc -o ex2 mainprg.c -L . -lshar 
```

我发现 libshar.so 的大小比 libstat.o 大，而 ex2 的大小比 ex1 大。我希望这个结果是相反的。有人可以解释一下原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:27:59.840

多/少多少？如果库中的东西是微不足道的，我不会觉得动态二进制文件使用更多空间而不是静态文件太令人惊讶。动态二进制文件需要包含额外的符号信息和其他元数据以促进运行时链接。静态链接时可以忽略大部分元数据，因此如果库中的函数和/或数据相当小，那可能就是您所看到的。但是，对于具有更多代码和数据的更重要的库，或者当您与许多不同的库链接时，二进制文件应该小得多......

# php - PHP获取包含子目录的文件列表

> ID：12109042
> 
> 赞同：28
> 
> 时间：2012-08-24T12:00:21.490
> 
> 标签：php, glob

我正在尝试检索目录中的所有图像，包括所有子目录。我目前正在使用

```
$images = glob("{images/portfolio/*.jpg,images/portfolio/*/*.jpg,images/portfolio/*/*/*.jpg,images/portfolio/*/*/*/*.jpg}",GLOB_BRACE); 
```

这有效，但结果是：

```
images/portfolio/1.jpg
images/portfolio/2.jpg
images/portfolio/subdirectory1/1.jpg
images/portfolio/subdirectory1/2.jpg
images/portfolio/subdirectory2/1.jpg
images/portfolio/subdirectory2/2.jpg
images/portfolio/subdirectory1/subdirectory1/1.jpg
images/portfolio/subdirectory1/subdirectory1/2.jpg 
```

我希望它一次做一个完整的目录分支，所以结果是：

```
images/portfolio/1.jpg
images/portfolio/2.jpg
images/portfolio/subdirectory1/1.jpg
images/portfolio/subdirectory1/2.jpg
images/portfolio/subdirectory1/subdirectory1/1.jpg
images/portfolio/subdirectory1/subdirectory1/2.jpg
images/portfolio/subdirectory2/1.jpg
images/portfolio/subdirectory2/2.jpg 
```

非常感谢任何帮助，干杯！

PS 如果我可以只获取投资组合下的所有子目录，而不必用通配符具体说明每个目录，那也很棒。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-24T12:04:30.267

从[全局示例](http://php.net/manual/en/function.glob.php#106595)

```
if ( ! function_exists('glob_recursive'))
{
    // Does not support flag GLOB_BRACE        
   function glob_recursive($pattern, $flags = 0)
   {
     $files = glob($pattern, $flags);
     foreach (glob(dirname($pattern).'/*', GLOB_ONLYDIR|GLOB_NOSORT) as $dir)
     {
       $files = array_merge($files, glob_recursive($dir.'/'.basename($pattern), $flags));
     }
     return $files;
   }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-28T12:13:06.643

**解决方案**：

```
<?php
$path = realpath('yourfolder/examplefolder');
foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path)) as $filename)
{
        echo "$filename</br>";
}
?> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-16T11:39:21.537

这是一个更简单的方法：

而不是使用：

```
$path = realpath('yourfolder/examplefolder/*');
glob($path); 
```

你必须使用：

```
$path = realpath('yourfolder/examplefolder').'/{**/*,*}';
glob($path, GLOB_BRACE); 
```

最后一个将使用支撑，事实上，它是这段代码的简写：

```
$path = realpath('yourfolder/examplefolder');

$self_files = glob($path . '/*');
$recursive_files = glob($path . '/**/*');

$all_files = $self_files + $recursive_files; // That's the result you want 
```

* * *

您可能还想从结果中过滤目录。`glob()`函数有`GLOB_ONLYDIR`标志。让我们用它来区分我们的结果。

```
$path =  realpath('yourfolder/examplefolder/') . '{**/*,*}';

$all_files = array_diff(
  glob($path, GLOB_BRACE),
  glob($path, GLOB_BRACE | GLOB_ONLYDIR)
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-07T20:15:58.627

此函数支持 GLOB_BRACE：

```
function rglob($pattern_in, $flags = 0) {
    $patterns = array ();
    if ($flags & GLOB_BRACE) {
        $matches;
        if (preg_match_all ( '#\{[^.\}]*\}#i', $pattern_in, $matches )) {
            // Get all GLOB_BRACE entries.
            $brace_entries = array ();
            foreach ( $matches [0] as $index => $match ) {
                $brace_entries [$index] = explode ( ',', substr ( $match, 1, - 1 ) );
            }

            // Create cartesian product.
            // @source: https://stackoverflow.com/questions/6311779/finding-cartesian-product-with-php-associative-arrays
            $cart = array (
                    array () 
            );
            foreach ( $brace_entries as $key => $values ) {
                $append = array ();
                foreach ( $cart as $product ) {
                    foreach ( $values as $item ) {
                        $product [$key] = $item;
                        $append [] = $product;
                    }
                }
                $cart = $append;
            }

            // Create multiple glob patterns based on the cartesian product.
            foreach ( $cart as $vals ) {
                $c_pattern = $pattern_in;
                foreach ( $vals as $index => $val ) {
                    $c_pattern = preg_replace ( '/' . $matches [0] [$index] . '/', $val, $c_pattern, 1 );
                }
                $patterns [] = $c_pattern;
            }
        } else
            $patterns [] = $pattern_in;
    } else
        $patterns [] = $pattern_in;

    // @source: http://php.net/manual/en/function.glob.php#106595
    $result = array ();
    foreach ( $patterns as $pattern ) {
        $files = glob ( $pattern, $flags );
        foreach ( glob ( dirname ( $pattern ) . '/*', GLOB_ONLYDIR | GLOB_NOSORT ) as $dir ) {
            $files = array_merge ( $files, rglob ( $dir . '/' . basename ( $pattern ), $flags ) );
        }
        $result = array_merge ( $result, $files );
    }
    return $result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-18T18:34:33.527

简单类：

```
<?php
    class AllFiles {
        public $files = [];
        function __construct($folder) {
            $this->read($folder);           
        }
        function read($folder) {
            $folders = glob("$folder/*", GLOB_ONLYDIR);
            foreach ($folders as $folder) {
                $this->files[] = $folder . "/";
                $this->read( $folder );
            }
            $files = array_filter(glob("$folder/*"), 'is_file');
            foreach ($files as $file) {
                $this->files[] = $file;             
            }
        }
        function __toString() {
            return implode( "\n", $this->files );
        }
    };

    $allfiles = new AllFiles("baseq3");
    echo $allfiles; 
```

示例输出：

```
baseq3/gfx/
baseq3/gfx/2d/
baseq3/gfx/2d/numbers/
baseq3/gfx/2d/numbers/eight_32b.tga
baseq3/gfx/2d/numbers/five_32b.tga
baseq3/gfx/2d/numbers/four_32b.tga
baseq3/gfx/2d/numbers/minus_32b.tga
baseq3/gfx/2d/numbers/nine_32b.tga 
```

如果您不想要列表中的文件夹，只需将此行注释掉：

```
$this->files[] = $folder . "/"; 
```

# java - 在数组中设置一个元素会改变其他元素

> ID：12109043
> 
> 赞同：0
> 
> 时间：2012-08-24T12:00:25.537
> 
> 标签：java, android, arraylist, android-sensors

*我检查了其他具有几乎相同标题的类似标签。这些答案不相关*

在数组的一个位置设置元素时，两个元素具有相同的值。

公共类 LogActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list);
    startStopButton = (Button) findViewById(R.id.btnStart);
    loggingStatusText = (TextView) findViewById(R.id.logStatusText);
    mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    sensorList = mSensorManager.getSensorList(Sensor.TYPE_ALL);
    sensorValues=new ArrayList<float[]>(sensorList.size());
    sensorValsArray=new float[sensorList.size()][];
    sensorNameList = new ArrayList<String>();
    selectedSensorNames = new ArrayList<String>();
    for (Sensor itemSensor : sensorList)
    {
        if (itemSensor != null)
        {
            sensorNameList.add(itemSensor.getName());
        }
    }
    showSensorList();
}

private void showSensorList()
{
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setIcon(R.drawable.ic_launcher);
    builder.setMultiChoiceItems((CharSequence[]) sensorNameList
            .toArray(new CharSequence[sensorNameList.size()]),
            new boolean[sensorNameList.size()],
            new DialogInterface.OnMultiChoiceClickListener()
            {
                public void onClick(DialogInterface dialog,
                        int whichButton, boolean isChecked)
                {
                    if (isChecked)
                    {
                        if (!selectedSensorNames.contains(sensorNameList
                                .get(whichButton)))
                            selectedSensorNames.add(sensorNameList
                                    .get(whichButton));
                    } else
                    {
                        if (selectedSensorNames.contains(sensorNameList
                                .get(whichButton)))
                        {
                            selectedSensorNames.remove(sensorNameList
                                    .get(whichButton));
                        }
                    }
                }

            });
    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int whichButton)
        {               
            listeners=new SensorEventListener[selectedSensorNames.size()];
            float[] tempVals = new float[] { 0, 0, 0 };
            for (int i = 0; i < selectedSensorNames.size(); i++)
            {
                sensorValsArray[i]=tempVals;
            }               
            showRateList();
        }
    });
    builder.setCancelable(false);
    builder.create().show();

}

void registerSensors()
{
    for (Sensor sensor : sensorList)
    {
        if (selectedSensorNames.contains(sensor.getName()))
        {
            mSensorManager.registerListener(listeners[selectedSensorNames.indexOf(sensor.getName())], sensor, selectedDelay);
        }
    }
}

class SchedulerTask extends TimerTask
{
    /*
     * The task to run should be specified in the implementation of the
     * run() method
     */
    public void run()
    {
        logSensorData();
    }
}

private void createLog(String fileName)
{
    File root = getExternalFilesDir(null);// Get the Android external
    // storage directory

    Date cDate = new Date();
    String bstLogFileName = fileName;
    bstLogFile = new File(root, bstLogFileName);// Construct a new file for
    // using the specified
    // directory and name
    FileWriter bstLogWriter;
    logScheduler = new Timer();// Create a new timer for updating values
    // from content provider
    logScheduler.schedule(new SchedulerTask(),
            LOG_TASK_DELAY_IN_MILLISECONDS,
            getLogPeriodInMilliSeconds(selectedDelay));

}

public void logSensorData()
{
    Date stampDate = new Date();
    String LogPack ="\r\n";
    for (int count=0;count<selectedSensorNames.size();count++)
    {
        LogPack += sensorValsArray[count][0] + "," + sensorValsArray[count][1] + "," + sensorValsArray[count][2] + ",";
    }
    LogPack += "\r\n";

    try
    {
        F_StreamWriter.write(LogPack);
        F_StreamWriter.flush();
    }

    catch (IOException e)
    {
    }

    catch (NullPointerException e)
    {
    }
}

public void startStopLog(View v)
{
    if (startStopButton.getText().equals("Start"))
    {
        createSensorListeners();
        registerSensors();
        showFilenameDialog();           
    } else if (startStopButton.getText().equals("Stop"))
    {
        stopLog();
    }

}

public void startLog(String fileName)
{
    createLog(fileName);
}

public void stopLog()
{
    logScheduler.cancel();
    logScheduler.purge();       
    for(int i=0;i<listeners.length;i++)
        mSensorManager.unregisterListener(listeners[i]);
}

private void showFilenameDialog()
{
    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.custom_text_input_dialog);
    dialog.setCancelable(true);
    final EditText fileNameInput = (EditText) dialog
            .findViewById(R.id.fileNameText);
    Button button = (Button) dialog.findViewById(R.id.okButton);
    button.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
                startLog(nameInput);
                dialog.dismiss();
        }
    });
    dialog.show();

}

private void createSensorListeners()
{
    listeners=new SensorEventListener[selectedSensorNames.size()];      
    for (int i = 0; i < selectedSensorNames.size(); i++)
    {
        listeners[i]=new SensorEventListener()
        {

            @Override
            public void onSensorChanged(SensorEvent event)
            {
                sensorValsArray[selectedSensorNames.indexOf(event.sensor.getName())]=event.values; 

            }

            @Override
            public void onAccuracyChanged(Sensor sensor, int accuracy)
            {

            }
        };
    }
} 
```

}

当 index 为 0 时，执行 set 命令时，也会改变 index 位置 '1' 处的值。谁能帮我这个？

提前致谢， Dheepak

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:14:47.853

> 当 index 为 0 时，执行 set 命令时，也会改变 index 位置 '1' 处的值。谁能帮我这个？

你肯定弄错了它是什么原因造成的。在 ArrayList 的一个位置设置值不会神秘地导致另一个位置的值发生变化。它根本不像那样工作。

您观察到的效果将是由于其他原因：

*   也许的价值`index`不是你所期望的
*   也许 的价值`event.values`不是你所期望的。（也许你在创建`Event`对象的方式上犯了一个错误，它们都*共享*一个`float[]`对象。）
*   也许位置 1 的值已经是那个值
*   也许你有多个线程更新`sensorValues`列表。

# ajax - 使用 jQuery Ajax 将列表和变量发布到 WebApi

> ID：12109046
> 
> 赞同：0
> 
> 时间：2012-08-24T12:00:30.717
> 
> 标签：ajax, jquery, asp.net-web-api

我正在尝试使用 jQuery Ajax 将数据列表和变量发布到 WebApi。

我的客户端代码是：

```
var datatopost = new Object();
for(var i=0;i<results.length;i++)
{
    datatopost["[" + i + "].NodeID"] = results[i];
}
var result;
result = grandtotal;
$.ajax({
    type: "POST",
    url: createurl,
    dataType: "json",
    traditional: true,
    data: "{ 'node': '" + datatopost + "',ttl: '" + result + "'}",
    statusCode: {
        200: function () {
            alert("success");
        }
    },
    error:
        function (res) {
            alert('Error');
            $("#txtmsg").val("error" + " "
            + res.status + " " + res.statusText);
        }
}); 
```

我的服务器端代码是

```
public HttpResponseMessage PostBuy([FromBody]List<Node> node, decimal ttl)
{
   //Success code here
   return new HttpResponseMessage(HttpStatusCode.OK);
} 
```

我在检查元素的网络选项卡中收到错误的请求错误。

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T13:37:45.377

这是我发布包含其他值的列表的方式，我发布了一个`JSON.stringify`字符串，

```
 var o = {};
                    o.UserCode = userCode;
                    o.Role = role;
                    o.UserId = r.d;
                    o.Hotels = [];
                    $('#hotel-list li :checkbox:checked').each(function () {
                        var ctrl = $(this);
                        var h = {};
                        h.ChainId = ctrl.val();
                        h.ProjectId = ctrl.next().val();
                        h.CityId = ctrl.next().next().val();
                        o.Hotels.push(h);
                    });
                    $.post("/home/UpdateDataToDb/", { d: JSON.stringify(o) }, function (r) {

                        alert(r.Msg);
                    }); 
```

我的服务器端代码是这样的：

```
 [System.Web.Mvc.HttpPost]
    public JsonResult UpdateDataToDb(string d)
    {
        var jsonStr = d;

        var json = JsonConvert.DeserializeObject<QueryPostData>(jsonStr);
        //json.UserCode
        //json.Role
        //json.UserId
        foreach (var chain in json.Hotels)
        {
            //My code to handle list `Hotels`
        }
    } 
```

这`QueryPostData`是

```
public class QueryPostData
{
    public string UserCode { get; set; }
    public string Role { get; set; }
    public string UserId { set; get; }
    public List<BriefChain> Hotels { get; set; }
}

public class BriefChain
{
    public string ChainId { get; set; }
    public string ProjectId { get; set; }
    public string CityId { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:00:59.597

我不完全确定，但它可能与 JSON 中的“节点”元素有关。它看起来是一个对象，而不是一个数组。验证数据是否以 JSON 格式正确发送。

# ruby-on-rails - 是否可以在模型内部使用 rails image_tag？

> ID：12109047
> 
> 赞同：23
> 
> 时间：2012-08-24T12:00:31.053
> 
> 标签：ruby-on-rails, model

我有一个具有模型类的 rails 3.x 应用程序，这些模型类将内容返回到要在页面上呈现的部分视图。该模型负责内容是什么，并将其返回给盲目地将其添加到页面的视图。换句话说，视图调用模型询问其内容；模型将其内容 HTML-Safe 传递给视图；并且视图只是将返回的内容转储到其输出中。

到目前为止，一切正常。

我需要创建这样一个类，它返回指向资产管道中图像链接的 html（视图不知道或不关心返回的东西是图像）。

在最简单的形式中，模型从数据库中读取包含文件名“my_image.png”的记录。它需要将引用位于“app/assets/images”中的具有该名称的图像的 HTML 返回到视图。

是否有可能做到这一点 ？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-24T12:43:59.267

这将在模型内部工作

```
ActionController::Base.helpers.image_tag("image.png") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:20:45.990

尝试在模型中包含助手`include ActionView::Helpers`&`ActionView::Helpers::AssetTagHelper`

# c++ - 使用 Libcurl 从 FTP 服务器文件下载多个文件

> ID：12109054
> 
> 赞同：2
> 
> 时间：2012-08-24T12:01:12.563
> 
> 标签：c++, ftp, download, libcurl

我已使用以下代码从 FTP 服务器下载所有文件

步骤如下： 1\. 创建文件的 FTP 列表

```
 getFTPList(string sHost, string sUser, string sPass, string sUri)
{
  CURL *curl;
  CURLcode res;
  FILE *ftplister;
  string host = "ftp://";
  host += sHost;
  host += "/sample/";
  string furl = host + sUri;  
  string usrpwd = sUser;
  usrpwd += ":";
  usrpwd += sPass;
  /* local file name to store the file as */ 
  ftplister = fopen("ftp-list", "wb"); /* b is binary, needed on win32 */   
  curl = curl_easy_init();
  if(curl) {
    /* Get a file listing from sunet */ 
    curl_easy_setopt(curl, CURLOPT_URL, furl.c_str() );
    curl_easy_setopt(curl, CURLOPT_USERPWD, usrpwd.c_str());
    curl_easy_setopt(curl, CURLOPT_FTPLISTONLY, TRUE);
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &write_list);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, ftplister);
    res = curl_easy_perform(curl);
    /* Check for errors */ 
    if(res != CURLE_OK)
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));

    /* always cleanup */ 
    curl_easy_cleanup(curl);
  } 
  fclose(ftplister); /* close the local file */   
} 
```

2.  使用此列表以递归方式下载调用下载函数的文件

    ```
    int main(){
    FILE *ftpfile; 
    string line;
    ftpfile = fopen("ftp-list", "r"); 
    ifstream infile("ftp-list");
     while ( getline(infile, line) )
     {
        string url, ofname, surl = "ftp://myhost/uploader/", sfname = "C:\\CNAP\\";        
        url = surl + line;
        ofname = sfname +line;
        cout<<url<<"   "<<ofname<<endl;
        char* theVal ;
        char* theStr ;
        theVal = new char [url.size()+1];
        theStr = new char [ofname.size()+1];
        strcpy(theVal, url.c_str());
        strcpy(theStr, ofname.c_str());       
        downloadFile(theVal, theStr);
     }
    return 0;
    } 
    ```

现在下载功能：

```
size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
    size_t written;
    written = fwrite(ptr, size, nmemb, stream);
    return written;
   }

   void downloadFile(const char* url, const char* ofname)
   {
    CURL *curl;
        FILE *fp;
        CURLcode res;        
        curl = curl_easy_init();
        if (curl){
            fp = fopen(ofname,"wb");
            curl_easy_setopt(curl, CURLOPT_URL, url);
            curl_easy_setopt(curl, CURLOPT_USERPWD, "user:pass");
            curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);
            curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
            res = curl_easy_perform(curl);
            curl_easy_cleanup(curl);
            fclose(fp);
        }
     } 
```

它在实现时效果很好，但只能下载文本文件或一些带有文本的文件，如果我下载图像或 docx 或 aa zip 或 rar 或任何非文本文件失败，下载后无法打开（说无效文件）。

我不确定我错过了什么，任何帮助将不胜感激。

我知道这是一种低效的编码方式，但我只需要正确的下载（任何文件）。提高效率是我的下一个议程。

PS：使用这里使用的这种方法 [在 C++ 中使用 libcurl 下载多个文件](https://stackoverflow.com/questions/6951161/downloading-multiple-files-with-libcurl-in-c)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:46:46.153

下载时的文件需要打开为二进制文件

```
fp = fopen(ofname,"wb"); 
```

谢谢你的帮助罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:29:44.467

*这是一个猜测。*：尝试清除选项`CURLOPT_TRANSFERTEXT`和`CURLOPT_CRLF`。

参考：

*   [http://curl.haxx.se/libcurl/c/curl_easy_setopt.html](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T01:44:07.870

```
#include <stdio.h> 
#include <curl/curl.h>
#include <curl/easy.h>
#include <string>
#include <iostream>
#include <fstream>

using namespace std;

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream);

void getFileList(
    const string &strHost, 
    const string &strUri, 
    const string &strUser, 
    const string &strPassWord, 
    const string &strTargetFile
);

void downloadAllFiles(
    const string &strFtpListFile, 
    const string &strHost, 
    const string &strUri, 
    const string &strUser, 
    const string &strPassWord, 
    const string &strSaveTargetFolder
);

int main(void) 
{
    string strHost = "ftp://192.168.0.1:22";
    string strUri = "/cobus/test/";
    string strUser = "cobus";
    string strPassWord = "password";
    string strTargetFile = "c:\\cobus\\ftpList.txt";
    string strSaveDestFolder = "c:\\cobus\\";

    getFileList(strHost, strUri, strUser, strPassWord, strTargetFile);

    downloadAllFiles(
        strTargetFile, 
        strHost, 
        strUri, 
        strUser, 
        strPassWord, 
        strSaveDestFolder
    );
}

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) 
{
    size_t written = fwrite(ptr, size, nmemb, stream);
    return written;

}

void getFileList(const string &strHost, const string &strUri, 
const string &strUser, const string &strPassWord, const string &strTargetFile)
{
    CURL *curl;
    CURLcode res;
    FILE *ftplister;
    string strSourceFullUri = strHost + strUri;
    string strUserPwInfo = strUser + ":" + strPassWord;

    /* local file name to store the file as */ 
    ftplister = fopen(strTargetFile.c_str(), "wb"); /* b is binary, needed on win32 */

    curl = curl_easy_init();

    if(curl) 
    {
        /* Get a file listing from sunet */ 
        curl_easy_setopt(curl, CURLOPT_URL, strSourceFullUri.c_str() );
        curl_easy_setopt(curl, CURLOPT_USERPWD, strUserPwInfo.c_str());
        curl_easy_setopt(curl, CURLOPT_FTPLISTONLY, TRUE);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &write_data);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, ftplister);
        res = curl_easy_perform(curl);

        /* Check for errors */ 
        if(res != CURLE_OK)
            fprintf(stderr, "curl_easy_perform() failed: %s\n",
            curl_easy_strerror(res));

        /* always cleanup */ 
        curl_easy_cleanup(curl);
    } 

    fclose(ftplister); /* close the local file */   

}

void downloadAllFiles(const string &strFtpListFile, const string &strHost, 
    const string &strUri, const string &strUser, const string &strPassWord, 
    const string &strSaveDestFolder)
{
    FILE *ftpFile = NULL;
    string strFileName = "";

    ifstream infile(strFtpListFile.c_str());

    if(!infile.is_open())
    {
        cerr << "can not open ftpList.txt" << endl;
        return ;
    }

    /* ftpList.txt get data, line by line, processing */
    while(getline(infile, strFileName))
    {
        CURL *curl;
        FILE *destFilePath;
        CURLcode res;        

        curl = curl_easy_init();

        if (curl)
        {
            destFilePath = fopen((strSaveDestFolder+strFileName).c_str(),"wb");
            curl_easy_setopt(curl, CURLOPT_URL, (strHost+strUri+strFileName).c_str());
            curl_easy_setopt(curl, CURLOPT_USERPWD, (strUser+":"+strPassWord).c_str());
            curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);
            curl_easy_setopt(curl, CURLOPT_WRITEDATA, destFilePath);
            res = curl_easy_perform(curl);

            curl_easy_cleanup(curl);

            fclose(destFilePath);
        }
    }// end while
} 
```

我表示尽可能地立即看到 Vivian Lobo 的内容。我试图测试做出陈述 Vivian Lobo。这是很好的工作。

stackOverFlow 很难写代码。我如何评论 Vivian lobo 文章？

# php - 禁用购物车输入过滤的 Magento 核心修改的影响？

> ID：12109056
> 
> 赞同：1
> 
> 时间：2012-08-24T12:01:36.127
> 
> 标签：php, mysql, security, magento, sql-injection

我目前正在研究一个已经修改过的 magento 版本（v 1.6.1）。之前的开发者自己修改了app/core，我升级到1.7怎么办？它将恢复原始应用程序/核心，对吗？（因为我知道每个模组都应该放在 app/local 下）

然后我注意到，通过在电子商务上运行 diff 和一个干净的 1.6.1 安装，开发人员已经应用了这个修改（标有“<”的行是原始内容，“>”是编辑过的内容）

```
diff app/code/core/Mage/Checkout/controllers/CartController.php
169c169,170
<                 $params['qty'] = $filter->filter($params['qty']);
---
>                 #$params['qty'] = $filter->filter($params['qty']);
>                 $params['qty'] = $params['qty'];
311c312,313
<                 $params['qty'] = $filter->filter($params['qty']);
---
>                 #$params['qty'] = $filter->filter($params['qty']);
>                 $params['qty'] = $params['qty'];
383c385,386
<                         $cartData[$index]['qty'] = $filter->filter(trim($data['qty']));
---
>                         //$cartData[$index]['qty'] = $filter->filter(trim($data['qty']));
>                         $cartData[$index]['qty'] = $data['qty']; 
```

您可能会注意到他们禁用了 $filter->filter 和 trim。

**这不会将电子商店暴露给 SQLInjections 或类似的任意代码执行吗？** magento 之前是否执行过另一项检查以将此数据存储在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:28:51.810

之前开发者移除的过滤器函数不用于过滤 SQL 注入或其他安全风险的输入。它们用于将本地化输入转换为无论语言环境如何都可以处理的标准形式。这是第一个差异的扩展上下文：

```
$filter = new Zend_Filter_LocalizedToNormalized(
    array('locale' => Mage::app()->getLocale()->getLocaleCode())
);
$params['qty'] = $filter->filter($params['qty']); 
```

[有关LocalizedToNormal](http://framework.zend.com/manual/en/zend.filter.set.html)功能的详细信息，请参阅 Zend 文档。

Magento 具有内置保护措施，可通过使用标准数据库类在构造查询之前过滤所有数据来防止 SQL 注入。该逻辑位于 Mage_Core_Model_Resource_* 类以及存储在 /lib/Zend 中的 Zend 库中。只要以前的开发人员没有修改这些类，就不应该有额外的 SQL 风险。

当然，跨站点脚本总是一个潜在的问题，但那里的风险通常更多地存在于视图层（PHTML 和块类）而不是控制器或模型层。

# java - 转换 SQL 查询以播放查询生成器语法

> ID：12109058
> 
> 赞同：0
> 
> 时间：2012-08-24T12:01:41.607
> 
> 标签：java, playframework-2.0

我需要帮助将 SQL 查询转换为我可以在游戏中使用的东西！

原始查询如下所示：

```
SELECT * FROM `triplestore`
  WHERE `owning_admin_id` IS NOT NULL
  AND `is_public` IS true; 
```

我的目标是得到类似的东西

```
Triplestore.find.where()
  .isNotNull("owningAdmin")
  .is("is_public", true)
  .findList(); 
```

这甚至可能还是我必须使用 JPQL？该查询会是什么样子？

在此先感谢，
哈根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:18:27.283

您可以使用以下`and()`方法：

```
Triplestore.find.where().and(Expr.isNotNull("owningAdmin"),Expr.eq("is_public", true)).findList(); 
```

不要忘记添加`com.avaje.ebean.Expr`导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:24:02.693

在休眠标准中：

```
List<Triplestore> triplestores = 
    (List<Triplestore>) session.createCriteria(Triplestore.class)
    .add( Restrictions.isNotNull("owning_admin_id") )
    .add( Restrictions.eq("is_public", Boolean.TRUE) ).list(); 
```

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-22T14:53:28.113

你说*“我可以在游戏中使用的东西！”* ，所以我假设任何第三方库都可以。这是使用[jOOQ](https://www.jooq.org)的解决方案（免责声明：我为供应商工作）。

我假设你在这里使用 jOOQ 的代码生成器：

```
Result<TriplestoreRecord> result =
ctx.selectFrom(TRIPLESTORE)
   .where(TRIPLESTORE.OWNING_ADMIN_ID.isNotNull())
   .and(TRIPLESTORE.IS_PUBLIC)
   .fetch(); 
```

# html - IE8 中的简单浮动 DIV 布局不起作用

> ID：12109062
> 
> 赞同：1
> 
> 时间：2012-08-24T12:01:57.193
> 
> 标签：html, css, internet-explorer

我们的网站只有在 IE（7 和 8 测试）中存在非常烦人的布局问题，Firefox 和 Chrome 运行良好。问题出在此页面上：

[http://www.foe.co.uk/community/campaigns/climate/rio_resources_33589.html](http://www.foe.co.uk/community/campaigns/climate/rio_resources_33589.html)

问题代码是报告图像应该出现在右侧文本的左侧。我们有一个简单的包含项目，一个内部浮动到左边，另一个也浮动到左边。两者的宽度都小于加起来小于外部 DIV。这是一个不起作用的示例代码：

```
<div class="resourceitem">
    <div class="resourceleft">
        Test LEFT
    </div>
    <div class="resourceright">
        Test RIGHT
    </div>
</div> 
```

相关的 CSS 很简单：

```
.resourceitem {
    margin-bottom: 10px;
    overflow: hidden;
    width: 100%;
}

div.resourceleft {
    float: left;
    margin-left: 20px;
    width: 156px;
}

div.resourceright {
    float: left;
    padding: 0;
    width: 268px;
} 
```

非常感谢任何帮助，它让我发疯！

干杯，克里斯。

更新 - 修复它。

啊。好的，伙计们找到了问题——这取决于我的响应式链接代码和 IE8 的开发人员工具显示的规则*实际上并不*适用。相关规则在 fms-res.css 文件中，但这仅在理解媒体查询且宽度 > 980px 的浏览器上使用。IE8 使用默认值。仅限桌面的文件，称为 m-equiv.css - 此文件中缺少规则。Web 开发人员工具栏非常无益地将规则显示为应用于 fms-res.css 文件中的元素，即使*实际上*它们没有。我忘记了开发者工具的这种效果，我们通常会看到我们的打印样式表（print.css）规则显示，即使它们不适用（除非实际打印时）。

非常感谢大家的贡献，很抱歉最终解决了一个愚蠢的问题。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:21:38.820

`</a>`从以下代码中删除这是一个额外的代码（可能**是错字**）并在 IE 中造成问题：

```
<div class="resourceleft">
    <img border="0" alt="Rio+20: Is this it?" src="http://www.foe.co.uk/imgs/Rio_-_is_this_it.png" />
    </a>
</div> 
```

**注意：每个`<div class="resourceleft">`都有一个额外的`</a>`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:37:41.950

更新 - 修复它。

啊。好的，伙计们找到了问题——这取决于我的响应式链接代码和 IE8 的开发人员工具显示的规则实际上并不适用。相关规则在 fms-res.css 文件中，但这仅在理解媒体查询且宽度 > 980px 的浏览器上使用。IE8 使用默认值。仅限桌面的文件，称为 m-equiv.css - 此文件中缺少规则。Web 开发人员工具栏非常无益地将规则显示为应用于 fms-res.css 文件中的元素，即使实际上它们没有。我忘记了开发者工具的这种效果，我们通常会看到我们的打印样式表（print.css）规则显示，即使它们不适用（除非实际打印时）。

非常感谢大家的贡献，很抱歉最终解决了一个愚蠢的问题。

干杯!

# java - 想要创建一个通用的 AsyncTask - 如何？

> ID：12109064
> 
> 赞同：3
> 
> 时间：2012-08-24T12:02:03.837
> 
> 标签：java, android, android-asynctask, extend

在我的应用程序中，我通常有很多 AsyncTasks。它们看起来都一样，因此共享相同的设计。所以我想进一步优化这一点，并创建一个通用的 MyAsyncTask，我的 AsyncTasks 从中扩展。但我不知道该怎么做。

这是我的 AsyncTasks 之一。它们仅在用***包围的方法/变量上有所不同：

```
public class OneOfMyAsyncTasks extends AsyncTask<Void, Void, ***Cursor***> {

    private Context                      context;
    private MyProgressDialog             dialog;
    private OnAsyncTaskCompletedListener listener;
    private String                       search;
    private int                          task_id;

    public OneOfMyAsyncTasks(int task_id, Context context, OnAsyncTaskCompletedListener listener) {
        super();

        this.context = context;
        this.listener = listener;
        this.task_id = task_id;
    }

    public OneOfMyAsyncTasks(int task_id, Context context, OnAsyncTaskCompletedListener,
                        ***String search***) {
        super(task_id, context, listener);

        ***this.search = search;***
    }

    protected void attach(Context context, OnAsyncTaskCompletedListener listener) {
        this.context = context;
        this.listener = listener;

        processCreateDialog();
    }

    protected void detach() {
        processDismissDialog();

        if (context != null) {
            context = null;
        }

        if (listener != null) {
            listener = null;
        }
    }

    @Override
    protected ***Cursor*** doInBackground(Void... voids) {
        ***return MyApplication.getSqliteOpenHelper().fetchSomething(search);***
    }

    @Override
    protected void onPostExecute(***Cursor cursor***) {
        if (listener != null) {
            listener.onAsyncTaskCompleted(task_id, ***cursor***);
        }

        detach();
    }

    @Override
    protected void onPreExecute() {
        processCreateDialog();
    }

    private void processCreateDialog() {
        if (context != null) { 
            dialog = MyProgressDialog.show(context, null, null, true, false);
        }
    }

    private void processDismissDialog() {
        if (dialog != null) {
            try {
                dialog.dismiss();
            } catch (Exception exception) {
            }

            dialog = null;
        }
    }
} 
```

我的想法是创建一个 MyAsyncTask ，它确实包含上面显示的所有内容，但以下内容除外：

*   方法doInBackground
*   方法 onPostExecute
*   第二个构造函数
*   ...以及 AsyncTask 本身的签名（第三个参数）

这些必须从从这个通用 MyAsyncTask 扩展的特定 AsyncTask 中设置。

非常感谢任何帮助。

**编辑：**这是我到目前为止所做的 - 没有成功。扩展类抛出两个错误，这些错误写在下面的代码中。首先是抽象类：

```
public abstract class MyAsyncTask<A, B, C> extends AsyncTask<A, B, C> {

        protected Context                      context;
        protected MyProgressDialog             dialog;
        protected OnAsyncTaskCompletedListener listener;
        protected int                          task_id;

        public MyAsyncTask(int task_id, Context context, OnAsyncTaskCompletedListener listener) {
            super();

            this.context = context;
            this.listener = listener;
            this.task_id = task_id;
        }

        protected void attach(Context context, OnAsyncTaskCompletedListener listener) {
            this.context = context;
            this.listener = listener;

            processCreateDialog();
        }

        protected void detach() {
            processDismissDialog();

            if (context != null) {
                context = null;
            }

            if (listener != null) {
                listener = null;
            }
        }

        @Override
        protected void onPostExecute(C result) {
            if (listener != null) {
                listener.onAsyncTaskCompleted(task_id, result);
            }

            detach();
        }

        @Override
        protected void onPreExecute() {
            processCreateDialog();
        }

        private void processCreateDialog() {
            if (context != null) {
                dialog = MyProgressDialog.show(context, null, null, true, false);
            }
        }

        private void processDismissDialog() {
            if (dialog != null) {
                try {
                    dialog.dismiss();
                } catch (Exception exception) {
                }

                dialog = null;
            }
        }
    } 
```

这是扩展该抽象类的类的想法。这两个错误写在代码中：

```
public class MyAsyncTaskImpl extends MyAsyncTask<Void, Void, Cursor> {
    // --> Error: MyAsyncTask cannot be resolved to a type - Create class 'MyAsyncTask<T1, T2, T3>'

    private String search;

    public MyAsyncTaskImpl(int task_id, Context context, OnAsyncTaskCompletedListener listener, String search) {
        super(task_id, context, listener);

        this.search = search;
    }

    @Override
    protected Cursor doInBackground(Void... voids) {
        // --> Error: The method doInBackground(Void...) of type MyAsyncTaskImpl must override or implement a supertype method - Remove '@Override' annotation        

        return MyApplication.getSqliteOpenHelper().fetchSomething(search);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:28:10.047

您可以使用两个泛型类型参数创建一个抽象基类 - R - 用于结果类型，T 用于搜索参数。

```
public abstract class MyAsyncTask<R, T> extends AsyncTask<Void, Void, R> {
    private Context context;
    private MyProgressDialog dialog;
    private OnAsyncTaskCompletedListener listener;
    private T search;
    private int task_id;

    public MyAsyncTask(int task_id, Context context,
            OnAsyncTaskCompletedListener listener) {
        super();

        this.context = context;
        this.listener = listener;
        this.task_id = task_id;
    }

    public MyAsyncTask(int task_id, Context context,
            OnAsyncTaskCompletedListener listener, T search) {
        this(task_id, context, listener);

        this.search = search;
    }

    protected void attach(Context context, OnAsyncTaskCompletedListener listener) {
        this.context = context;
        this.listener = listener;

        processCreateDialog();
    }

    protected void detach() {
        processDismissDialog();

        if (context != null) {
            context = null;
        }

        if (listener != null) {
            listener = null;
        }
    }

    @Override
    protected void onPostExecute(R result) {
        if (listener != null) {
            listener.onAsyncTaskCompleted(task_id, result);
        }

        detach();
    }

    @Override
    protected void onPreExecute() {
        processCreateDialog();
    }

    private void processCreateDialog() {
        if (context != null) {
            dialog = MyProgressDialog.show(context, null, null, true, false);
        }
    }

    private void processDismissDialog() {
        if (dialog != null) {
            try {
                dialog.dismiss();
            } catch (Exception exception) {
            }

            dialog = null;
        }
    }
} 
```

然后你可以用具体的实现来扩展这个类，如下所示：

```
public class MyAsyncTaskimpl extends MyAsyncTask<Cursor, String> {

    public MyAsyncTaskimpl(int task_id, Context context,
            OnAsyncTaskCompletedListener listener, String search) {
        super(task_id, context, listener, search);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected Cursor doInBackground(Void... params) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:10:57.233

你可以创建一个`Abstract Class`. 这将允许您实现所有方法并将依赖于任务的方法保留为抽象。这将允许任何人扩展您自己的（抽象）类并强制他们实现这些特定方法。

# debugging - 如何在android本机代码中回溯

> ID：12109065
> 
> 赞同：2
> 
> 时间：2012-08-24T12:02:04.100
> 
> 标签：debugging, android-ndk, native-code

我的 Apk 在 epoll_wait 收到一个 sig_stop。我无法弄清楚调用它的代码部分。我知道这是 libc 的一部分。它告诉我这个 epoll_wait 的行号。当我尝试使用 addr2line 工具时，运气不佳。

```
 ./toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-   addr2line -C -f -e ~/SoxPlayer/obj/local/armeabi/libc.so  0xafd0c75c
??
??:0 
```

这就是我得到的.. 我想知道我的代码中的哪一部分正在分叉调用 epoll_wait 的线程 1。

```
 Thread [1] (Suspended: Signal 'SIGSTOP' received. Description: Stopped (signal).)   
3 epoll_wait()  0xafd0c75c  
2 <symbol is not available> 0xa8125706  
1 <symbol is not available> 0xa8125706 
```

这里没有太多信息。gdb 也将提供相同的信息。ndk-stack 工具无济于事，因为我没有这种工具所需的那种 sigev 故障或应用程序崩溃。我的 apk 正在等待我的代码中的信号、事件。但是我可以使用什么工具来获取谁在我的代码中调用 epoll_wait。我能够看到我的代码中发生了什么，但无法确定调用此 epoll_wait 的确切位置。需要关于我可以用来解决这个问题的工具的建议。

谢谢

# jquery - 获取Jquery UI拖放框的名称和值

> ID：12109073
> 
> 赞同：0
> 
> 时间：2012-08-24T12:02:24.463
> 
> 标签：jquery, jquery-ui

我无法从用作拖放框的框中获取值。框拖放正确加上我可以用一个值更新一个 div 但我希望将拖动框中的值与我正在拖动的框的值一起添加到 div 中拖动拖动的框超过。这是到目前为止的代码。任何帮助将不胜感激

这是我到目前为止所拥有的，以及指向我正在制作代码的页面的链接

```
<script>
    $(function() {
        // make orange boxes draggable
        $( ".draggable" ).draggable();
        //make blue boxes draggable but also make things mappen when orange box is dropped in it
        $( ".droppable" ).draggable().droppable({
            drop: function( event, ui ) {
                var targetElem = $(this).attr("title");
                // update the div at the top of the page with the value of the blue box being dropped on and the orange box being dragged
                $('#showstuff').empty();
                $('#showstuff').append('' + targetElem + '');
            }
        });
        // when an orange box is dragged away from the blue box append the #showstuff div
        $( ".droppable" ).draggable().droppable({
            out: function(event, ui) {
                $('#showstuff').empty();
                $('#showstuff').append('emptied again');
            }
        });
    });
</script> 
```

链接在这里

[http://barrysfiles.co.uk/exp/development-bundle/demos/droppable/barrytest2.php](http://barrysfiles.co.uk/exp/development-bundle/demos/droppable/barrytest2.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:41:05.683

您可以从 drop 回调中使用 ui.draggable 访问 Dragged 元素。

示例：http: [//jsfiddle.net/TfmZt/](http://jsfiddle.net/TfmZt/)

# android - 从 createChooser 添加或删除选项

> ID：12109079
> 
> 赞同：3
> 
> 时间：2012-08-24T12:02:53.893
> 
> 标签：android

```
String message = "Text I want to share";
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("text/plain");
share.putExtra(Intent.EXTRA_TEXT, message);
startActivity(Intent.createChooser(share,"Share on")); 
```

现在它显示默认选项，如：`Bluetooth, Email, Facebook, Gmail, LinkedIn, Messaging, Share Via Barcode.`

或者这些是已安装的应用程序？

我想知道，我怎样才能从这个列表中删除一些。就像我想删除`Share Via Barcode`。

并添加其他内容？

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T12:16:31.333

使用以下代码将新项目添加到选择器屏幕。

```
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("text/plain");       
share.putExtra(Intent.EXTRA_TEXT, message);

Intent addIntent = ;//whatever you want

Intent chooser = new Intent(Intent.ACTION_CHOOSER);
chooser.putExtra(Intent.EXTRA_INTENT, share );      
chooser.putExtra(Intent.EXTRA_TITLE, "title");

Intent[] intentArray =  {addIntent }; 
chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentArray);
startActivity(chooser); 
```

但删除特定项目是不可能的。[因此，您可以使用Packagemanager.resolveActivity](http://developer.android.com/reference/android/content/pm/PackageManager.html#resolveActivity%28android.content.Intent,%20int%29)解决意图并创建自己的自定义列表视图

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-09T07:39:48.893

我使用以下代码获取设备上安装的所有电子邮件和 SMS 应用程序的列表：

```
Intent shareSMS = new Intent(Intent.ACTION_SENDTO, Uri.fromParts("smsto", "12346556", null));
shareSMS.addCategory(Intent.CATEGORY_DEFAULT);
shareSMS.putExtra("sms_body", message);

Intent shareEmail = new Intent(Intent.ACTION_SENDTO, Uri.fromParts("mailto", "", null));
PackageManager pm = getPackageManager();
List<ResolveInfo> mailActivityList = pm.queryIntentActivities(shareEmail, PackageManager.MATCH_DEFAULT_ONLY);

List<Intent> mailIntents = new ArrayList<Intent>();
for (ResolveInfo resInfo : mailActivityList) {
    Intent targetedOpenIntent = new Intent(android.content.Intent.ACTION_SENDTO, Uri.fromParts("mailto", "", null))
            .setPackage(resInfo.activityInfo.packageName)
            .putExtra(Intent.EXTRA_EMAIL, emails)
            .putExtra(Intent.EXTRA_SUBJECT, subject)
            .putExtra(Intent.EXTRA_TEXT, message);
    mailIntents.add(targetedOpenIntent);
}

Intent chooser = new Intent(Intent.ACTION_CHOOSER);
chooser.putExtra(Intent.EXTRA_INTENT, shareSMS);
chooser.putExtra(Intent.EXTRA_TITLE, "Send request");
chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, mailIntents.toArray(new Parcelable[] { }));

startActivity(chooser); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-21T07:03:28.390

向选择器添加选项

```
 Intent share = new Intent(Intent.ACTION_SEND);
            share.setType("text/plain");       
            share.putExtra(Intent.EXTRA_TEXT, message);

            Intent extraOptionToAdd = new Intent(this, ExtraOptionActivity.class);
            extraOptionToAdd.putExtra(Intent.EXTRA_TEXT, "Text");
            LabeledIntent labeledExtraOption = new LabeledIntent(extraOptionToAdd, getPackageName(), "Extra Option!", 0);

            Intent chooser = Intent.createChooser(share, "Share Now!");
            Intent[] intentArray =  {labeledExtraOption};
            chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentArray);
            startActivity(chooser); 
```

# function - OpenGL函数说明

> ID：12109084
> 
> 赞同：1
> 
> 时间：2012-08-24T12:03:11.393
> 
> 标签：function, glut, freeglut

有人可以解释以下每个 OpenGL 函数的功能吗？

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity(); 
glOrtho(0.0, (GLdouble)w, 0.0, (GLdouble)h, -1.0, 1.0);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:52:33.677

请记住，OpenGL 作为状态机工作。

```
glMatrixMode(GL_PROJECTION); 
```

将当前矩阵设置为投影矩阵，即活动矩阵状态为投影矩阵，因此所有后续矩阵调用都会影响投影矩阵。投影矩阵处理如何查看事物（如何设置相机）。

```
glLoadIdentity(); 
```

将当前矩阵的值设置为单位矩阵。当前矩阵是投影矩阵。

```
glOrtho(0.0, (GLdouble)w, 0.0, (GLdouble)h, -1.0, 1.0); 
```

来自 OpenGL 的文档：“将当前矩阵与正交矩阵相乘”。因此，投影矩阵（想想相机）被转换为显示正交透视。

```
glMatrixMode(GL_MODELVIEW); 
```

将当前矩阵设置为模型视图矩阵。模型视图矩阵处理对象的显示方式。模型视图转换可以旋转或平移对象。

所以基本上前三行设置了相机，最后两行使当前矩阵成为模型视图矩阵，因为程序完成了相机设置并需要显示对象。OpenGL 中没有真正的相机。相机的概念只是一个常见的类比。

# svg - SVG 以 % 为单位旋转文本

> ID：12109085
> 
> 赞同：5
> 
> 时间：2012-08-24T12:03:18.643
> 
> 标签：svg, rotation, transform

我尝试旋转 svg 文本。我通过从 xslt 调用 php 函数将文本的位置作为 % 即 15%。问题是我无法使用 % 旋转 svg 对象。如果我改用数字号码，它会起作用。下面我将问题简化为：

```
<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://ww.w3.org/2001/xml-events" xmlns:php="http://php.net/xsl" version="1.1" baseProfile="full">
  <text x="50%" y="50%" transform="rotate(-90 50% 50%)">rotateMe</text>
  <line x1="50%" y1="47%" x2="60%" y2="47%" stroke="black" stroke-width="2px"/>
</svg> 
```

这张照片在我的浏览器屏幕中间 ![初始点](../Images/5af1acf08f5b9533c0b75da5bc7978c3.png)

我希望它看起来像这样： ![目标](../Images/9cff2a15d39fc1f029ebc81a12d8748d.png)

但它不起作用，因为 %

```
transform="rotate(-90 **50% 50%**)" 
```

我需要使用 % 作为坐标。对我的问题有任何想法或解决方案吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:33:28.567

`<svg>`您可以使用内部元素翻译坐标。下面的示例根据您在 Firefox 上的“我希望它看起来像这样”位图显示。

如果您在使用的任何浏览器上都看不到文本，请尝试将 overflow="visible" 添加到内部`<svg>`元素，这样您就可以看到它的结束位置。并非所有浏览器都支持dominant-baseline 属性，因此您可能需要修改文本的y 属性。

```
<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <svg x="50%" y="50%" width="100" height="100">
      <text text-anchor="end" dominant-baseline="text-before-edge" transform="rotate(-90 0 0)">rotateMe</text>
  </svg>
  <line x1="50%" y1="47%" x2="60%" y2="47%" stroke="black" stroke-width="2px"/>
</svg> 
```

# cocos2d-iphone - 图层还是场景？

> ID：12109088
> 
> 赞同：0
> 
> 时间：2012-08-24T12:03:35.407
> 
> 标签：cocos2d-iphone, kobold2d

学习cocos2d/kobold2d，被场景和层次所迷惑。据我了解，场景通常包含图层，其中图层包含 UI 元素，如按钮和所有逻辑。

我的第一个项目基于 kobold2d helloworld 示例，我看到该层是从 CCLayer 而不是 CCScene 子类化的。在搜索这个主题时，我看到 helloworld 示例是从 CCScene 派生的层。无论如何，为什么 helloworld 的例子不是从 CCScene 派生的，而它以前显然是从 CCScene 派生的？

我查看了其他一些示例（涂鸦和弹球），还使用了 CCLayer 而不是 CCScene。

是否有关于场景和图层的权威指南？kobold2d 是否只使用图层进行推广，或者我应该如何看待这个？

问候，

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:10:07.280

在 Kobold2D 中，如果您的第一个类派生自 CCLayer 而不是 CCScene，Kobold2D 会默默地将其包装在 CCScene 对象中。这样您就不必再编写 +(id) 场景方法了。

这对于仅使用单层、编写较少代码的场景非常有用。您仍然可以通过将它们添加到图层的父级（即场景）来向场景添加更多图层：`[self.parent addChild:..]`

顺便说一句，如果您的第一个类确实是 CCScene 类或者它实现了 +(id) 场景方法，则使用该场景。

# algorithm - 如何将树的节点转换为队列的节点？

> ID：12109094
> 
> 赞同：0
> 
> 时间：2012-08-24T12:04:01.970
> 
> 标签：algorithm, queue, copy-constructor, breadth-first-search

我正在使用队列来实现广度优先搜索。树的节点是**state**类型的，而队列中的节点是**node**类型的。

```
 struct node
{ 
 int b1,b2,b3,b4;
 node* link;
} 
```

* * *

```
struct state
{
 int b1,b2,b3,b4;
 state* rightChild;
 state* leftChild;
}; 
```

Queue.enqueue() 函数的原型是：

```
 bool enqueue(node n); 
```

要将树的节点（状态类型）传递给它，我必须通过复制构造函数或重载赋值运算符转换它们，或者-我可以使**Queue成为****状态**的基类，以便状态对象在队列中被接受通过多态性。现在这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:45:18.360

How about using

```
struct node 
{
    struct state* treeNode;
    struct node* link;  
}; 
```

your queue can now simply store node* pointers

# c# - 如何要求确认删除清单项目？

> ID：12109095
> 
> 赞同：1
> 
> 时间：2012-08-24T12:04:09.140
> 
> 标签：c#, javascript, asp.net

我有一些动态生成的清单项目。当用户删除它们时，应出现确认框。我怎样才能做到这一点 ？

```
protected void btndelete_Click(object sender, EventArgs e)
        {
            try
            {
                string conn = ConfigurationManager.ConnectionStrings["sqlconn"].ConnectionString;
                SqlConnection con = new SqlConnection(conn);
                con.Open();
            check:
                if (CheckBoxList1.SelectedItem != null)
                {
                    foreach (ListItem l in CheckBoxList1.Items)
                    {
                        if (l.Selected)
                        {
                            SqlCommand cmd = new SqlCommand("Drop Table " + l, con);
                            cmd.ExecuteNonQuery();
                            Label4.ForeColor = Color.Red;
                            Label4.Text = " PaperSet Deleted successfully";
                            CheckBoxList1.Items.Remove(l);
                            papersetlist.Items.Remove(l);
                            Psetlist.Items.Remove(l);
                            goto check;
                        }
                    }
                }
                con.Close();

            }
            catch (System.Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

这是删除按钮事件代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:07:47.153

你只需要写这样的东西

```
<asp:LinkButton ID="DeleteButton" runat="server" CausesValidation="False"
 CommandName="Delete" Text="Delete" 
OnClientClick="return confirm('Are you certain you want to delete this item?');"> 
 </asp:LinkButton> 
```

# facebook - FB认证服务器端

> ID：12109097
> 
> 赞同：0
> 
> 时间：2012-08-24T12:04:24.307
> 
> 标签：facebook, facebook-authentication, facebook-access-token

我要求用户从 FB JS SDK 登录。我得到 accessToken 和 userID 并将其保存在数据库中。然后在内部每隔几分钟我在服务器上调用一个 php 函数来检查数据库中是否有一个条目，并从 accessToken 获取所有我能得到的信息。

服务器端代码为：

```
$facebook = new Facebook(array(
  'appId'  => 'xxx',
  'secret' => 'xxxx',
 ));

$facebook->setAccessToken($savedAccessToken);

$user = $facebook->getUser();

$profile = $facebook->api('/me'); 
```

我能够以 $user 不为 0 的方式登录。但我收到以下错误：

```
OAuthException: The access token could not be decrypted 
```

请帮我解决问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:10:27.653

> OAuthException：无法解密访问令牌

我想这意味着您传递的值已被截断或某些东西（或根本不是访问令牌）。

您的数据库列保存访问令牌的时间是否足够长？

a `var_dump`of`$savedAccessToken`说什么？

# android - Android中的自定义按钮排列

> ID：12109101
> 
> 赞同：0
> 
> 时间：2012-08-24T12:04:32.733
> 
> 标签：android, button, user-interface, custom-controls

我正在尝试构建一个 Android 应用程序，我想`Buttons`在不同的地方显示一些，如附加的**演示图像中所示。**
这里的挑战是创建自定义按钮并安排它们。
至于自定义`Buttons`，我想我可以使用自定义作为背景`CustomViews`的简单按钮来实现。 这些是正确的起点吗，还有其他想法吗？ 在安排它们时，我不知道如何实现这一点。`Drawable`

![在此处输入图像描述](../Images/4699cb6892b57ca69011b209c5d1f09f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:29:44.010

正如 Android_Crazy 和 Closeratio 已经说过的，a`RelativeLayout`通常是自定义放置按钮的最合适的选项。但是，对于您示例中所示按钮的确切位置， a`LinearLayout`可以正常工作。

在 a 中`LinearLayout`，您可以将视图放置在彼此下方或上方（使用`android:orientation = "vertical"`，与您的示例相关）或彼此相邻（`android:orientation = "horizontal"`）。您还可以为视图添加边距以更改水平位置（`layout_marginLeft`或`layout_marginRight`）或垂直位置（`layout_marginTop`或`layout_marginBottom`）。

至于按钮的外观，我总是使用自定义背景可绘制对象，通常使用自定义 xml 来为按下或选择按钮时添加不同的可绘制对象。

# python - 如何在python中“查看”对象的结构

> ID：12109102
> 
> 赞同：5
> 
> 时间：2012-08-24T12:04:32.680
> 
> 标签：python, object, introspection, tweepy

我在 python 2.7 中工作。我一直在尝试使用[tweepy](http://tweepy.github.com/)包。有一个对象叫做 tweepy.models.status 对象，它的功能在这里定义：[https](https://github.com/tweepy/tweepy/blob/master/tweepy/models.py) ://github.com/tweepy/tweepy/blob/master/tweepy/models.py 。

我有一个看起来像这样的函数：

```
 def on_status(self, status):
        try:
            print status
            return True
        except Exception, e:
            print >> sys.stderr, 'Encountered Exception:', e
            pass 
```

我所指的对象是从`on_status`函数返回的对象，称为`status`. 当该`print status`行执行时，我将其打印在屏幕上；

> tweepy.models.Status 对象位于 0x85d32ec>

我的问题实际上很笼统。我想知道如何直观地打印出这个`status`对象的内容？我想知道这个对象里面有什么信息。

我尝试了这种`for i, v in status :`方法，但它说这个对象是不可迭代的。此外，并非所有对象属性都在函数定义中进行了描述。

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T12:05:56.063

你可以迭代`status.__dict__.items()`：

```
for k,v in status.__dict__.items():  #same thing as `vars(status)`
    print k,v 
```

如果类使用`__slots__`并且没有用于`__dict__`. 但是，具有的类`__slots__`非常罕见，因此不太可能成为问题。

或者，您可以使用[`dir`内置](http://docs.python.org/library/functions.html#dir)`getattr`：

```
for attr in dir(status):
    print attr, getattr(status,attr) 
```

这确实适用于具有 的类`__slots__`，但如果定义了自定义，则会有一些限制`__getattr__`（请参阅链接，并且`__dict__`会以同样的方式受到影响）。

最后，如果您想对所看到的内容进行非常好的控制（例如，如果您只需要方法），您可以查看[`inspect`模块](http://docs.python.org/library/inspect.html)中的一些好东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T12:10:33.800

我一直是`dir`用于手动内省的内置函数的粉丝。适用于模块、对象...

```
>>> import math
>>> dir(math)
['__doc__', '__name__', '__package__', 'acos', 'acosh', 'asin', 'asinh', 'atan',
 'atan2', 'atanh', 'ceil', 'copysign', 'cos', 'cosh', 'degrees', 'e', 'erf',
 'erfc', 'exp', 'expm1', 'fabs', 'factorial', 'floor', 'fmod', 'frexp', 'fsum',
 'gamma', 'hypot', 'isinf', 'isnan', 'ldexp', 'lgamma', 'log', 'log10', 'log1p',
 'modf', 'pi', 'pow', 'radians', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc'] 
```

我相信它相当于`sorted(`*object*`.__dict__.keys())`。

# cakephp - cakephp中的hasman协会

> ID：12109104
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:04:38.040
> 
> 标签：cakephp, associations

我有 2 个表用户和电子邮件，字段为 USERS(id,fname.lname,cardno,cardtype) && EMAILS(cardno,cardtype,payamount)。

我想根据 cakephp 中用户表的 CARD NO 字段访问电子邮件数据。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:12:05.767

您必须与用户关系：

在用户模型中：

```
public $belongsTo =  array('Email' => array(
        'className' => 'Email',
        'foreignKey' => 'cardno',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

在电子邮件模型中：

```
var $primaryKey = 'cardno';

public $hasMany = array(
    'Email' => array(
        'className' => 'Email',
        'foreignKey' => 'cardno'
         )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:13:09.627

您可以使用“cardno”设置主键，并使用该字段创建表之间的关联，如下所示：用户模型：

```
var $primaryKey = 'cardno';

 public $hasMany = array(
        'Comment' => array(
            'className'     => 'Comment',
            'foreignKey'    => 'cardno',
            'dependent'     => true
        )
    ); 
```

在电子邮件模型中：

```
public $belongsTo = array(
        'User' => array(
            'className'    => 'User',
            'foreignKey'   => 'cardno'
        )
    ); 
```

# tridion - 获取元数据模式的元数据字段类型

> ID：12109111
> 
> 赞同：1
> 
> 时间：2012-08-24T12:05:07.187
> 
> 标签：tridion, tridion-2011

我想获取所有字段以及元数据模式的元数据字段的类型/数据类型。

我已经编写了下面的示例代码来实现该功能，并且我能够获取名称、描述等，但找不到任何具有类型/数据类型的属性。如果你们中的任何人有任何想法，请建议...

```
var client = new SessionAwareCoreService2010Client();

client.ClientCredentials.Windows.ClientCredential.UserName = "myUserName";
client.ClientCredentials.Windows.ClientCredential.Password = "myPassword";
client.Open();

if (client.State == System.ServiceModel.CommunicationState.Opened)
{
    var schemaUri = "tcm:1-47-8";
    var fields= client.ReadSchemaFields(schemaUri, true, new ReadOptions());
    var fieldName =   fields.MetadataFields[0].Name;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:22:38.180

要知道字段的类型，您只需检查该字段的 .NET 类型。我通常使用“is”检查，但如果需要，您也可以调用 GetType。

例如：

```
var client = new SessionAwareCoreService2010Client();

client.ClientCredentials.Windows.ClientCredential.UserName = "myUserName";
client.ClientCredentials.Windows.ClientCredential.Password = "myPassword";
client.Open();

if (client.State == System.ServiceModel.CommunicationState.Opened)
{
    var schemaUri = "tcm:1-47-8";
    var fields= client.ReadSchemaFields(schemaUri, true, new ReadOptions());
    foreach (var field in fields.MetadataFields)
    {
        if (field is SingleLineTextFieldDefinitionData)
        {
            // Do something specifically for single-line text fields
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:19:20.530

该`ReadSchemaFields`方法仅公开字段的***定义***。因此，它本质上是您在模式中定义字段时输入的属性的包装器。

内容和元数据分别由`ComponentData.Content`和公开`ComponentData.Metadata`。但这些都是作为 XML 字符串公开的，因此您必须自己解析它们。

如果您（可以理解）不这么认为，请查看此帮助程序类：[http ://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata](http://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata)

您可能还想阅读我对这个问题的回答：[Updating Components using the Core Service in SDL Tridion 2011](https://stackoverflow.com/questions/10069726)

# sql-server - 在 SQL Server 表中选择适当的 DataType

> ID：12109117
> 
> 赞同：1
> 
> 时间：2012-08-24T12:05:52.267
> 
> 标签：sql-server, sqldatatypes

我在 SQL Server 中有一个大型事务表，用于每天存储大约 400-500 条记录。我应该在我的 PK 列中使用什么数据类型？PK 列存储数字值，整数似乎适合，但我担心它会超过整数的最大值，因为我每天都有这么多记录。

我目前正在为我的 PK 列使用整数数据类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:32:06.887

使用 type `INT`，从 1 开始，您可以获得**超过 20 亿**行可能的行——这对于绝大多数情况来说应该绰绰有余。有了`BIGINT`，你得到大约**922 万亿**（922 有 15 个零 - 922'0000 亿） - 对你来说足够了吗？

如果您使用`INT IDENTITY`从 1 开始的行，并且每秒插入一行，则需要 66.5**年**才能达到 20 亿的限制....因此，每天 400-500 行 - 您可能需要**几个世纪**才能用完值...每天取 1'000 行 - **5883 年**应该没问题- 够好吗？

如果您使用`BIGINT IDENTITY`从 1 开始的 a，并且每秒插入 1000 行，那么在达到 922 万亿极限之前，您需要令人难以置信的**2.92 亿年**......

[在MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms186775.aspx)中阅读有关它的更多信息（包括所有选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:13:44.537

我在这里可能错了，因为数学从来都不是我的强项，但如果你使用 bigint，它的最大大小为 2^63-1 (9,223,372,036,854,775,807)

因此，如果您将其除以 500 以大致获得记录的天数，您将获得 18446744073709600 天的 500 条新记录。

再除以 365，得到 50539024859478.2 年，每天 500 条记录

所以 (((2^63-1) / 500) / 365)

如果那不是我很愚蠢，那已经很多天了:-)

# django - Django 中的 TinyMCE 插件自定义标签

> ID：12109121
> 
> 赞同：1
> 
> 时间：2012-08-24T12:06:21.373
> 
> 标签：django, tinymce

我正在为 TinyMCE 构建一个自定义图像插入插件。这个想法是，每篇文章已经通过 ArticleImage 模型与图像集合建立了关系，该模型允许用户提供特定于文章的标题。然后 TinyMCE 将插入一个自定义标签（类似于`<myapp:image image-id="9389" caption="Caption override">`），该标签在编辑器中呈现为图像和标题的预览，并呈现为`<figure><img src="images/9389.jpg" /><figcaption>Caption override (Photo: photographer)</figcaption></figure>`. 这同样可以是类似的东西`<myapp:poll>`or `<myapp:video>`。

我的问题是：在 Django 视图中将这个“虚拟标签”解析为其呈现的 HTML 的最佳方法是什么（以及最佳位置在哪里）？

还是有另一种更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:17:47.493

恕我直言，呈现自定义标记的最佳位置是通过模板过滤器在模板中。

我会冒险说使用模板过滤器来呈现自定义标记是“djangoish”方式，因为这是使用[django.contrib.markup](https://docs.djangoproject.com/en/dev/ref/contrib/markup/)的方式。

将自定义标签存储在模型中是一个好主意，因为这样您就可以更改模板过滤器的实现，如果在存储之前处理自定义标签，这是不可能的。

# c# - 参考会员等级

> ID：12109122
> 
> 赞同：0
> 
> 时间：2012-08-24T12:06:22.170
> 
> 标签：c#, asp.net, class, asp.net-membership

我正在使用继承的代码`SqlMembershipProvider`，命名`MyMembershipClass`以便我可以使用这些函数。

我已经创建了我的继承类并在`Web.config`文件中指定它，如下所示：

```
<membership defaultProvider="MyMembershipClass">
  <providers>
    <clear/>
    <add name="MyMembershipClass" type="MyMembershipClass" applicationName="/"/> 
  </providers>
</membership> 
```

既然我已经这样做了，为了使用 Membership 函数，我是否在我的代码中将其称为：

`MyMembershipClass`还是只是`Membership`？

**编辑：**

如果您在刚才提到它，`Membership`这是由于`defaultProvider="MyMembershipClass"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:09:13.683

就像`Membership`. 它将自动映射到您定义的会员等级。这样就可以在以后更改提供程序而无需更改所有代码。

所以你不必写：

```
MyMembershipClass.GetUser 
```

但

```
Membership.GetUser 
```

顺便说一句，如果你定义一个 custom 也是如此`RoleProvider`，例如：

```
Roles.AddUserToRole(userName, roleName); 
```

**编辑**：

> 如果您仅在 Membership 中引用它，这是由于 defaultProvider="MyMembershipClass" 造成的吗？

是的，那必须是继承自的类的名称`MembershipProvider`（或从它继承的另一个类，例如`SqlMembershipProvider`）。

根据您的第二条评论，即使它不存在，您也可以定义您想要的东西，如果我在 web.config 中将提供者命名为“Bob”，我会得到一个例外：

> 异常信息：异常类型：ConfigurationErrorsException 异常消息：找不到默认成员资格提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:10:07.817

只是会员。Membership 上的静态方法将调用您的提供者上的方法。

# android - android gridview 行分隔符/分隔符

> ID：12109126
> 
> 赞同：35
> 
> 时间：2012-08-24T12:06:53.287
> 
> 标签：android, gridview

有没有办法在gridview中的行之间显示（水平）分隔符？

我尝试在每个网格项下方放置一个小分隔符图像，但这不是解决方案，因为当一行未完全填充项目时，它不会跨越整行。

有没有办法在每一行之间添加一个图像？我只能找到改变行间距的方法。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2014-05-27T14:21:10.400

如果您对网格项目使用自定义布局。下面的代码将起作用。

## 第 1 步：为 GridView 赋予背景颜色

这将用作分隔符。
Give`horizontalSpacing`和`verticalSpacing`as `1dp`
backgroundColor 将是您的分隔线颜色。

```
<GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#e5e5e5"
        android:horizontalSpacing="1dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="1dp" > 
```

## 第 2 步：为自定义网格项目布局提供背景颜色

这将用作 GridItems 的前景色。
就我而言，我将其保持为白色（#fff）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:background="#fff"
    android:padding="15dp"
     >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:src="@drawable/ic_launcher_transparent" />

    <TextView
        android:id="@+id/lable"
        android:layout_marginTop="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:textStyle="bold"
        android:textColor="#D0583B"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

## 结果

![在此处输入图像描述](../Images/c7b2c9eb436087ee6f37c091befd6f28.png)

**注意：**
如果不需要垂直分隔符，请保留`horizontalSpacing = 0dp`
如果不需要水平分隔符，请保留`verticalSpacing = 0dp`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T13:44:51.483

我最终创建了一个自定义网格视图，如下所示：

[https://stackoverflow.com/a/9757501/1310343](https://stackoverflow.com/a/9757501/1310343)

使用与我的网格视图中的一个项目完全一样高的背景图像，并且在底部有一个分隔符。

奇迹般有效！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-03T08:20:15.857

只是想分享我如何使用 OP 接受的链接来实现这一点。对于我的情况，我还需要控制分隔符的长度，所以我无法绕过 subclassing `GridView`。

```
public class HorizontalSeparatorGridView extends GridView {

    // Additional methods 

    @Override
    protected void dispatchDraw(Canvas canvas) {

        final int count = getChildCount();
        for(int i = 0; i < count; i++) {
            View child = getChildAt(i);
            int bottom = child.getBottom();
            int left = child.getLeft();
            int right = child.getRight();

            Paint paint = new Paint();
            paint.setColor(0xffececec);

            paint.setStrokeWidth(Math.round(0.5 * density));

            int offset = // Some offset

            canvas.drawLine(left + offset, bottom, right - offset, bottom, paint);
        }

        super.dispatchDraw(canvas);
    } 
```

为了安全起见，我进行了细分`dispatchDraw`，`onDraw`但我认为在这种情况下并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:15:50.957

我建议执行以下操作：

`

```
 <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="1sp"
        android:layout_marginLeft="7sp"
        android:layout_marginRight="7sp"
        android:layout_marginTop="7sp"
        android:background="@android:color/transparent">

        <TextView
            android:id="@+id/lblDeposit"
            android:layout_width="60sp"
            android:layout_height="40sp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="0sp"
            android:background="@drawable/rounded_top_left_rectangle"
            android:gravity="center"
            android:paddingLeft="5sp"
            android:scaleType="fitXY"
            android:text="Deposit"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000">
        </TextView>

        <TextView
            android:id="@+id/lblDepositvalue"
            android:layout_width="50sp"
            android:layout_height="40sp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="2sp"
            android:layout_marginRight="13sp"
            android:background="@drawable/rounded_top_right_rectangle"
            android:gravity="center_vertical|center_horizontal"
            android:scaleType="fitXY"
            android:text="40000/-Rs"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000">
        </TextView>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="6sp"
        android:layout_marginLeft="7sp"
        android:layout_marginRight="7sp"
        android:layout_marginTop="2sp"
        android:background="@android:color/transparent">

        <TextView
            android:id="@+id/lblPoints"
            android:layout_width="60sp"
            android:layout_height="40sp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="0sp"
            android:background="@drawable/rounded_bottom_right_rectangle"
            android:gravity="center"
            android:paddingLeft="5sp"
            android:scaleType="fitXY"
            android:text="Points "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000">
        </TextView>

        <TextView
            android:id="@+id/lblPointsValue"
            android:layout_width="50sp"
            android:layout_height="40sp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="2sp"
            android:layout_marginRight="13sp"
            android:background="@drawable/rounded_bottom_left_rectangle"
            android:gravity="center_vertical|center_horizontal"
            android:scaleType="fitXY"
            android:text="20"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000">
        </TextView>
    </TableRow>
</TableLayout>` 
```

# wordpress - timthumb NOT_FOUND_IMAGE 调整大小

> ID：12109127
> 
> 赞同：0
> 
> 时间：2012-08-24T12:07:03.317
> 
> 标签：wordpress, image-processing, wordpress-theming, timthumb

在 wordpress 站点中，我在 timthumb 配置文件中定义了默认的 NOT_FOUND_IMAGE：

```
// "http://example.com/timthumb-config.php".
<?php 
if(! defined('NOT_FOUND_IMAGE') ) define ('NOT_FOUND_IMAGE', 'http://example.com/img/default.jpg'); 
```

有没有办法根据 timthumb 请求参数强制调整此图像的大小。例如：

```
// 404 occurs
timthumb.php?src=http:%2F%2Fexample.com%2Fimg%2F404-image.jpg&h=180&w=120
// get resized (cropped) default image
timthumb.php?src=http:%2F%2Fexample.com%2Fimg%2Fdefault.jpg&h=180&w=120 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-30T05:00:03.483

试试这个代码：

```
if (!defined('NOT_FOUND_IMAGE'))
  define ('NOT_FOUND_IMAGE','images/ingredient.jpg'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:13:33.183

我不评价`timbthumb`，我认为它有安全问题。请安装并使用[ThumbGen 插件](http://wordpress.org/extend/plugins/thumbgen/)。

然后，您可以通过正常的可编辑条件 php 语句轻松地使用它..（伪）

```
<?php if you have a thumbnail { 
       Output the img with thumbgen resized
} else {
       Output the no image, you can even use thumbgen if you want
}
?> 
```

现实世界的例子：

```
<?php if ( has_post_thumbnail() )
        {
        $image_id = get_post_thumbnail_id();
        $alt_text = get_post_meta($image_id, '_wp_attachment_image_alt', true);
        $image_url = wp_get_attachment_image_src($image_id,'large');  
        $image_url = $image_url[0];
        ?>

            <img src='<?php thumbGen($image_url,175,175, "crop=1"); ?>' />

        <?php
        }

    else
        {
        ?>

            <img src="<?php bloginfo('template_url');?>/images/no-photo.png" alt="No Photo!">

        <?php
        }
?> 
```

# struts2 - Struts2 + Spring，需要Spring Plugin吗？

> ID：12109132
> 
> 赞同：1
> 
> 时间：2012-08-24T12:07:23.160
> 
> 标签：struts2, struts2-spring-plugin

我正在用为另一个项目开发的 Spring 服务 bean 替换现有的旧 Struts2 项目中的服务层。

我只想将这些服务 bean @Inject 到我的 Action 类中。

是否需要使用 Struts 的 Spring Plugin？或者我可以像其他任何（ContextLoaderListener、applicationContext.xml、context:component-scan）一样将 Spring 添加到我的 Struts Web 应用程序中吗？

我是否错过了 Struts Spring 插件以另一种方式帮助我的某些原因？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:46:40.013

Why *wouldn't* you use the Spring plugin?

It's essentially invisible, uses Spring to create your actions (including injecting other Spring beans), etc.

Guice's `@Inject` doesn't know anything about Spring beans, AFAIK, so you'd be naming classes manually, they'd be instantiated via normal Java/Guice mechanisms, wouldn't be injected with their own Spring dependencies (unless you did it manually, or via AOP, or whatever).

You'd also need to use non-Spring mechanisms for doing injection in testing, which is fine, but unless you provide more details regarding your usecase, I don't really see a reason to bypass the functionality the Spring plugin provides out-of-the-box.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:17:41.067

好吧，您可以做您在问题中描述的大部分事情，因为服务层完全不适合 S2，而 Struts2 并不关心您如何创建服务层实例和其他事情。

我看到使用 Struts2-Spring 插件的好处是将 Struts2 相关事物的创建委托给 Spring，例如`Action`类创建`Interceptors`等`Results`。

我的建议是使用该插件，因为您将在您的应用程序中使用 Spring，因此它非常好、灵活且强大，可以使用 Spring DI 的功能创建 S2 所需的所需对象，否则 S2 将使用自己的数据创建工厂创建框架组件。

# android - 如何设置上下文菜单标题图标的大小？

> ID：12109133
> 
> 赞同：0
> 
> 时间：2012-08-24T12:07:27.047
> 
> 标签：android, android-layout, contextmenu, android-contextmenu

如何在上下文菜单的标题中设置图标的大小？

![在此处输入图像描述](../Images/6e9430a0afd7649eff76e61d01fe8b01.png)

该图标是通过[ContextMenu.setHeaderIcon(int iconRes)](http://developer.android.com/reference/android/view/ContextMenu.html#setHeaderIcon%28android.graphics.drawable.Drawable%29)设置的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T23:13:02.543

以防其他人面临同样的问题，我最终通过以下方式实现了它。

我编写了一个通用方法，它以 a`Drawable`和所需的宽度和高度作为参数。`(Bitmap)Drawable`它返回基于给定规格的缩放。

```
public Drawable getScaledIcon( Drawable drawable, int dstWidth, int dstHeight ) {

    Bitmap bitmap = ( (BitmapDrawable) drawable ).getBitmap();
    Bitmap bitmapScaled = Bitmap.createScaledBitmap( bitmap, dstWidth, dstHeight, false );

    return new BitmapDrawable( getResources(), bitmapScaled );
} 
```

`ContextMenu.setHeaderIcon(int iconRes)`设置上下文菜单标题图标的方法将资源 ID via或`Drawable`via作为参数`ContextMenu.setHeaderIcon(Drawable icon)`。

结合使用后者，`getScaledIcon(...)`你就完成了！:)

# grails - 未找到 TestDataConfig.groovy，build-test-data 插件在没有配置文件的情况下继续进行

> ID：12109136
> 
> 赞同：0
> 
> 时间：2012-08-24T12:07:41.273
> 
> 标签：grails, grails-plugin

在单元测试中包含 Mixin Build 时出现以下错误：

未找到 TestDataConfig.groovy，build-test-data 插件在没有配置文件的情况下继续进行

它在集成测试中就像魅力一样，但不是单元测试的一部分。我的意思是，“构建”插件在单元测试中可以自己工作，但“TestDataConfig”没有填充默认值

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:09:17.263

首先，您应该从 BuildConfig.groovy 中的 build-test-data 验证版本

测试“：构建测试数据：2.0.3”

其次，检查你的测试。如果你想构建你需要的对象：

```
import grails.buildtestdata.mixin.Build
...
@TestFor(TestingClass)
@Build([TestingClass, SupportClass, AnotherClass])
class TestingClassTest{
    @Test
    void testMethod{
        def tc1 = TestingClass.build()
        def sc1 = SuportClass.build()
        def ac1 = AnotherClass.build()
    }
} 
```

第三，检查域约束，当您构建两个实例时，您可能会有一些属性验证（例如唯一性）失败。您需要在代码中设置该属性：

```
def tc1 = TestingClass.build(uniqueProperty: 'unique')
def tc2 = TestingClass.build(uniqueProperty: 'special') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:48:49.667

我猜依赖应该是：

```
test ":build-test-data:2.0.3" 
```

因为只是用于测试，对吧？

# javascript - 如何提高 Sencha Touch 2.x 应用程序的性能

> ID：12109137
> 
> 赞同：0
> 
> 时间：2012-08-24T12:07:42.257
> 
> 标签：javascript, html, cordova, sencha-touch, sencha-touch-2

我一直在为 Android 和 iPhone 开发 Sencha Touch2 应用程序。虽然我不是移动新手，但我仍在学习 Sencha Touch 和 ExtJS。

我的应用程序有几个屏幕，每个屏幕上都有 ListView。我的应用程序遵循 Sencha MVC 模式。它使用卡片布局，放置在视口上，并在其上添加不同的表单/组件。发出一个 AJAX 请求以使数据可用于所有屏幕。作为响应，我得到 1000 条记录的 JSON 响应。下面给出了示例 Json 响应。

```
[{
    "key1": "Similarities between Operations and Projects",
    "value1": "Some Value"},
{
    "key2": "Differences between Operations and Project",
    "value2": "Some Value"},
.... {}, {}, {}

] 
```

我必须解析 JSON 并更新存储，以便我的列表将显示所有内容。我尝试了两种方法

1.  直接使用代理到商店
2.  手动应用循环并将记录添加到存储

但是在这两种方式中，应用程序都非常慢。

我了解 JavaScript 可能有 1000 条记录是巨大的。但我想了解，如果我无论如何都能做得更好。

我已经进行了检查并搜索了堆栈溢出（下面粘贴了链接），但是，没有发现任何令人满意的结果。

[PhoneGap 1.4 包装 Sencha Touch 2.X - 性能如何？](https://stackoverflow.com/questions/10085637/phonegap-1-4-wrapping-sencha-touch-2-x-what-about-performance)

我的想法：目前所有记录/ JSON响应对象都存储为全局对象。我可以通过将其存储到 SessionStore 或 LocalStore 来减少。这个说法有效吗？

请帮助我了解我是否可以改进它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:00:59.137

基于应用程序缓慢的复杂性，有点难以回答这个**问题**。

**它加载缓慢吗？**

实现分页肯定会对此有所帮助，我无法想象 1k 记录的 json 返回是即时的。

寻呼是你的朋友。

在您的浏览器中分析加载时间，并玩弄什么让您丧命。（这通常可以解决我在这方面遇到的 99% 的问题）

**是不是很迟钝？**

Rescoping 提高了速度，但同样，考虑在 JS 中实际使用范围等往往会过度优化（ExtJs 在其 API 中有足够多的奇怪位，这是基于此的，我认为这是一场失败的战斗）。

如果您去看[有关性能](http://vimeo.com/17882927)的视频，他们会提供有关动态创建的组件，销毁任何不活动的东西等的建议，但这（至少对我而言）是内存管理的事情。

**TL：博士：**

以我个人的经验，我有 40x10 的网格在 sencha 触摸中滞后，我想 1000x1 的网格会让你停下来。

在服务器端进行管理，您的后顾之忧就会消失 :)

# ios - 在 iOS 应用程序中集成 Google Talk、语音和翻译

> ID：12109138
> 
> 赞同：1
> 
> 时间：2012-08-24T12:07:42.880
> 
> 标签：ios, integration, google-talk

我想在我的 iOS 应用程序中集成 Google Talk、语音和翻译。我试过这个[链接](https://github.com/robbiehanson/XMPPFramework)

我只是显示我的联系人列表。如何从这里开始聊天或语音通话？如果有人有想法或任何其他解决方案将上述服务集成到我的 iOS 应用程序中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:26:04.823

对于聊天，使用 XEP-0045

对于语音，Google Talk 使用[libjingle](https://developers.google.com/talk/libjingle/index)，它是[XEP-0166](http://xmpp.org/extensions/xep-0166.html) / [XEP-0167的 C++ 实现](http://xmpp.org/extensions/xep-0167.html)

对于翻译，您可能需要找到[XEP-0171的实现](http://xmpp.org/extensions/xep-0171.html)

# c# - LINQ 使用条件对数据进行分组和聚合

> ID：12109141
> 
> 赞同：6
> 
> 时间：2012-08-24T12:07:59.853
> 
> 标签：c#, linq

我在理解从 LINQ 查询中获得正确结果的方法时遇到了一些问题。

让我先定义实体`ProductFavorite`

```
public class ProductFavorite
{
    public Guid Uid {get; set;}

    public Guid ProductUid {get; set;}

    public bool IsFavorite {get; set;}

    public bool IsLastUsed {get; set;}

    public int LastUsedYear {get; set;}
} 
```

我有`IEnumerable`一些最喜欢的产品，名为`allFavorites`，其中包含以我之前编写的方式制作的对象。

这个“列表”可以包含具有重复项的元素`ProductUid`，因为它是从不同的数据源构建的。

再说一遍：“列表”中的项目至少有`IsFavorite = true` `OR` `IsLastUsed = true`.

当然，我想使用 LINQ 创建`ProductFavorite`对象的结果列表，但按 ProductUid 对项目进行分组，并将三个属性分组如下：

> 仅当其中一个分组项目将此属性设置为 true 时，IsFavorite 才会为 true
> 
> 仅当分组项目之一将此属性设置为 true 时 IsLastUsed 才会为 true
> 
> LastUsedYear 将是分组项目的 LastUsedYear 的最大值

我尝试了下一个语法，但我不确定它能否给我想要的东西：

```
var favorites = 
        from ProductFavorite pf in allFavorites
        group pf by pf.ProductUid into distinctFavorites
        select new ProductFavorite()
        {
            Uid = Guid.NewGuid(),
            ProductUid = distinctFavorites.Key,
            LastYearUsed = distinctFavorites.Max(l => l.LastYearUsed) // ???,
            IsFavorite = ...,  // ???
            IsLastUsed = ...   // ???
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:22:53.100

您的`LastYearUsed`（或`LastUsedYear`？）行看起来不错。最后两个你会想要

```
IsFavorite = distinctFavorites.Any(l=>l.IsFavourite),
IsLastUsed = distinctFavorites.Any(l=>l.IsLastUsed) 
```

（假设您的意思是“*任何*一项都设置为真”，而不是“*正是*其中一项……”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:23:31.677

```
var favorites = (from ProductFavorite pf in allFavorites
                             group pf by pf.ProductUid into distinctFavorites
                             select new ProductFavorite()
                {
                    Uid = Guid.NewGuid(),
                    ProductUid = distinctFavorites.Key,                    
                    IsFavorite = distinctFavorites.Any(p => p.IsFavorite == true),
                    IsLastUsed = distinctFavorites.Any(p => p.IsLastUsed == true),
                    LastUsedYear = distinctFavorites.Max(l => l.LastUsedYear) 
                }); 
```

# c# - 在后面的代码中动态添加 IValueConverter

> ID：12109143
> 
> 赞同：3
> 
> 时间：2012-08-24T12:08:06.717
> 
> 标签：c#, .net, wpf

我正在使用 .NET 3.5

我有一个 DataGridTextColumn，当​​该列的值为 false 时，我想将背景颜色变为红色。我已经在 XMAL 中看到了这一点，但无法弄清楚如何在后面的代码中做到这一点

```
DataGridTextColumn column = new DataGridTextColumn() { Header = "Can Connect", Binding = new Binding("CanConnect") };
//How to add the converter here so that the background of the cell turns red when CanConnect = false?

    public class IsConnectedConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            bool input = (bool)value;
            switch (input)
            {
                case true:
                    return DependencyProperty.UnsetValue;
                default:
                    return Brushes.Red;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T12:12:40.460

使用类 的[`Converter`属性](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter%28v=vs.90%29.aspx)`Binding`：

```
new Binding("CanConnect") {
    Converter = new IsConnectedConverter()
} 
```

在您的代码中，您将绑定分配给 的`Binding`属性`DataGridTextColumn`，但该属性仅控制单元格的内容。对于单元格的视觉外观，您需要一个样式，也可以在代码隐藏中设置：

```
Style st = new Style(typeof(DataGridCell));
st.Setters.Add(new Setter(Control.BackgroundProperty, binding));
column.CellStyle = st; 
```

在该代码中，`binding`将是一个带有新`Binding`对象的变量（或上面的构造函数和初始化调用）。如上[文档`DataGridTextColumn.CellStyle`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.cellstyle%28v=vs.95%29.aspx)所述，样式的目标类型必须是`DataGridCell`，并且由于该类继承自`Control`，我们可以为 的依赖属性添加设置器`Control`，例如`Background`.

恐怕我现在无法测试这段代码；我希望它能给你一个关于如何进行的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:01:24.953

只是为了补充这一点。我需要在样式绑定而不是列绑定上设置转换器：

```
 Binding columnBinding = new Binding("CanConnect");
        Binding styleBinding = new Binding("CanConnect") { Converter = new IsConnectedConverter()}; 
        Style st = new Style(typeof(DataGridCell));
        st.Setters.Add(new Setter(Control.BackgroundProperty, styleBinding));
        column.CellStyle = st;
        column.Binding = columnBinding;
        dataGrid.Columns.Add(column); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:13:31.190

```
var binding = new Binding("CanConnect") {
   Converter = new IsConnectedConverter()
};
DataGridTextColumn column = new DataGridTextColumn() { Header = "Can Connect", Binding = binding }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:14:10.347

对于设置转换器，您可以使用类`Converter`的属性`Binding`：

```
DataGridTextColumn column = new DataGridTextColumn();
column.Header = "Can Connect";
Binding binding = new Binding("CanConnect");
binding.Converter = new IsConnectedConverter();
column.Binding = binding; 
```

你不应该使用`switch`布尔变量。这个更好：

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    bool input = (bool)value;
    if (input)
    {
       return DependencyProperty.UnsetValue;
    }
    return Brushes.Red;
} 
```

# java - Java - 保存 ArrayList : 应用程序崩溃

> ID：12109145
> 
> 赞同：1
> 
> 时间：2012-08-24T12:08:21.337
> 
> 标签：java, android, serialization, crash

我需要一种方法来保存`ArrayList`对象。我已经浏览了该站点中的类似问题，并且我（似乎 ;-) 已经实现了我发现的内容，但是我遇到了两个问题：

1.  如果我将类定义为`Serializable`并放置构造函数，它会在启动时崩溃
2.  否则，它不保存数组

你能帮忙吗？我正在为一个志愿者的项目开发代码，但我被困住了......

非常感谢您。

我的应用程序具有以下定义的类：（`Globals`文件 Globals.java）

* * *

```
public class Globals extends Application implements Serializable {  

    private int position=-1;
    private ArrayList<RaccoltaPunti> raccoltePuntiList = new ArrayList<RaccoltaPunti>();
    public static final long serialVersionUID = 1L;
    /** constructor - seem required by Serializable, but creating it crashes app */
    public Globals(int position, ArrayList<RaccoltaPunti> raccoltePuntiList) {
        this.position = position;
        this.raccoltePuntiList = raccoltePuntiList;
    }
     // {getters and setters…}

    public void saveData(){

        String filename = getResources().getString(R.string.GLB_filename);
        String fileWithPath = this.getFilesDir().getPath().toString()+"/"+filename;
        Toast.makeText(this, "Salvataggio testo..."+ fileWithPath, Toast.LENGTH_LONG).show();
        try {
            FileOutputStream fos = new FileOutputStream(fileWithPath);
            ObjectOutputStream oos = new ObjectOutputStream(fos);
            oos.writeObject(this.raccoltePuntiList);    
            oos.close();
            Toast.makeText(Globals.this, "DatiSalvati ", Toast.LENGTH_SHORT).show();
        } catch (IOException e) {
            Log.e("FileSave", "CDM - IOException", e);
            Toast.makeText(this, "Errore saving file", Toast.LENGTH_LONG).show();
        }
    }
} 
```

引用的类是：RaccoltaPunti.java

```
public class RaccoltaPunti {

    private String nomeRaccolta;
    private String nomePromoter;
    private String numeroTessera;
    private Long puntiPusseduti;
    private String dataScadenzaPunti;
    private String sitoWeb;
    private String sitoWebUsername;

        // constructor, getters and setters…….
} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:13:42.527

*   如果要保存列表`RaccoltaPunti`必须`Serializable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:13:42.030

尝试创建一个默认构造函数：

```
public Globals(){

} 
```

由于该类扩展了 Application 类，因此它将通过反射从外部调用，并且可能需要一个默认构造函数。默认情况下，如果您不编写任何构造函数，则默认构造函数已经存在。

使 RaccoltaPunti 也可序列化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:35:47.913

问题似乎已解决（现在文件已成功保存且没有错误，并且通过手动打开它似乎包含所有信息）。
谢谢大家。

我总结了解决方案，以使未来有相同问题的任何其他读者受益。

根据以下代码片段，通过创建 class**解决**了该问题：`RaccoltaPunti` `Serializable`

```
 import java.io.Serializable;
    ...

    public class RaccoltaPunti implements Serializable {
    ... 
```

我注意到`RaccoltaPunti`已经有一个带参数的构造函数：

```
 public  RaccoltaPunti(
        String nomeRaccolta,
        String nomePromoter,
        String numeroTessera,
        Long puntiPusseduti,
        String dataScadenzaPunti,
        String sitoWeb,
        String sitoWebUsername) { 
```

作为参考，日志中报告的**错误**是指代码行：

```
 oos.writeObject(this.raccoltePuntiList); 
```

关于该类的**构造函数**，`Globals`我的实验表明，只需将其注释掉，一切正常。我没有尝试所有可能的组合（即有或没有参数）：我只是删除了它。

谢谢所有帮助过的人。

# .net - 使用 WCF 服务在 Extjs 中分页

> ID：12109146
> 
> 赞同：0
> 
> 时间：2012-08-24T12:08:23.823
> 
> 标签：.net, wcf, extjs

我在 URI（WCF 服务）中放置网格的分页参数时遇到问题。

这是我的网格的“商店”代码：

```
Ext.define('KP.store.Listls', {

    extend: 'Ext.data.Store',
    model: 'KP.model.Listls',

    autoLoad: true,

    pageSize: 50,
    autoLoad: { start: 0, limit: 50 },

    autoSync: true,
    proxy: {
        type: 'ajax',           
        startParam: undefined,
        api: {

        read: '/adres/listls?page=' + 1  + '&size=' + 20            
        },
        reader: {
            type: 'json',
            root: 'data',           
            totalProperty: 'total'
        }     
    }

}); 
```

这里是我的接口服务代码：

```
 [WebInvoke(
        Method = "GET",
        //UriTemplate = "/list",
        UriTemplate = "listls?page={page}&size={size}",                
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare
    )]
    List<Person> GetLs(string page, string size); 
```

问题出在此代码字符串中：

```
read: '/adres/listls?page=' + ???  + '&size=' + 20 
```

我将使用什么参数来理解页码？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:56:55.383

这并不容易，但它是可行的。您需要实现两件事：

1.  将您的 ExtJs 阅读器`$skip`用作您的`startParam`和`$take`您的`limitParam`. 而且您不需要实现任何特殊逻辑来在 WCF 端解析它。它已经理解`$skip`和`$take`。

2.  更改 WCF 端以某种方式发送记录总数。因为默认情况下，当使用分页时，在 JSON 对象中发送的记录总数将为 -1。

# php - 从 Wordpress 中的帖子中提取标题

> ID：12109148
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:08:32.873
> 
> 标签：php, regex, wordpress

在我的 WordPress 博客的主页上，我想提取包含在`<h3>`帖子中的标签中的标题，并且只显示标题下的标题。

我一直在设置`the_content();`一个变量并尝试使用 preg_match_all 来提取标签和文本，但它似乎不起作用。它只显示标题，下面没有内容。

这是最好的方法还是有更简单的方法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:10:11.727

[用于](http://codex.wordpress.org/Function_Reference/get_the_content) `get_the_content();`将值作为字符串返回，而不是作为回显。

# xml - XML 数字签名 - 错误计算的摘要

> ID：12109153
> 
> 赞同：1
> 
> 时间：2012-08-24T12:08:56.913
> 
> 标签：xml, digital-signature, signing

我正在尝试在 C# 中创建以下签名文档（我只发布重要的部分）：

```
<?xml version="1.0" encoding="UTF-8"?>
<SignedSaveRequest xmlns="http://www.to2bs.com/products/sta/schemas/messages/v2" xmlns:ns2="http://www.w3.org/2000/09/xmldsig#">
    <Header ID="header">
        <TimestampPolicy>S1</TimestampPolicy>
        <ReTimestampPolicy>R1</ReTimestampPolicy>
        <TwoStampsType>1P</TwoStampsType>
        <Hashes>
            <Hash>
                <Name>Test PDF.pdf</Name>
                <Digest hashAlgorithm="SHA256">2oN+8Z74rPqPwKqt+gVpr+z2EHx+OQwMQyxFgbjUgt0=</Digest>
            </Hash>
        </Hashes>
        <ShreddingPolicy>
            <Sign>U</Sign>
            <Period>1</Period>
        </ShreddingPolicy>
    </Header>
    <Security>
        <ns2:Signature>
            <ns2:SignedInfo>
                <ns2:CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>                 
                <ns2:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/> 
                <ns2:Reference URI="#header"> 
                    <ns2:Transforms>
                        <ns2:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
                    </ns2:Transforms>
                    <ns2:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
                    <ns2:DigestValue>wp+Gw43JannGYRSK3rjLW1JtSQDFTMoQU/iTEsHXCe0=</ns2:DigestValue> 
```

我无法获得 DigestValue（最后一个标签）的正确值。如果我正确理解规范，我应该得到包含标签“Header”的片段的规范版本，它是（一个字符串，没有换行符）：

```
<Header ID="header"><TimestampPolicy>S1</TimestampPolicy><ReTimestampPolicy>R1</ReTimestampPolicy><TwoStampsType>1P</TwoStampsType><Hashes><Hash><Name>Test PDF.pdf</Name><Digest hashAlgorithm="SHA256">2oN+8Z74rPqPwKqt+gVpr+z2EHx+OQwMQyxFgbjUgt0=</Digest></Hash></Hashes><ShreddingPolicy><Sign>U</Sign><Period>1</Period></ShreddingPolicy></Header> 
```

然后计算 SHA 256 并将其编码为 base64。所以，我正在这样做：

```
HeaderDoc.LoadXml(headerOuterXml); // headerOuterXml is the string above
c14NormalizationTransform.LoadInput(HeaderDoc);
MemoryStream ms = 
  (MemoryStream)c14NormalizationTransform.GetOutput(typeof(System.IO.Stream));                                      
SHA256 sha = new SHA256Managed();
byte[] digestBytes = sha.ComputeHash(ms);                       
string digestBytes64 = Convert.ToBase64String(digestBytes); 
```

并得到结果：

```
fRLX327uHQnkztMHjGX/k5V70fgFKbvVGjyLj1biYFE= 
```

这与预期的不同：

```
wp+Gw43JannGYRSK3rjLW1JtSQDFTMoQU/iTEsHXCe0= 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:31:14.943

希望还为时不晚。

认为 XML 的规范版本是单行是一种误解。有一个完整的规范：W3C 规范 XML（简称 C14N）列出了生成 XML 规范版本的规则。

.NET 框架中有一些 API 可以使用，例如[这个](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.xmldsigexcc14ntransform.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

# java - 在 Eclipse 中运行项目的问题

> ID：12109156
> 
> 赞同：-3
> 
> 时间：2012-08-24T12:09:07.957
> 
> 标签：java, android, eclipse, xamarin.android

> **可能重复：**
> [在 Eclipse 中生成项目时出错](https://stackoverflow.com/questions/12107807/error-generating-projects-in-eclipse)

我安装了 eclipse 和 Android SDK 大约一个星期。但是当我想运行我的项目时（即使我打开一个新的 Hello World 项目），eclipse 会显示这个错误：

```
"Error generating final archive: Failed to create key: Cannot run program "C:\Program Files\Java\jre7\bin\keytool.exe": CreateProcess error=2, The system cannot find the file specified 
```

JAVA_HOME设置为：`C:\Program Files\Java\jre7` 必要时更新，或者手动执行以下命令：

```
"C:\Program Files\Java\jre7\bin\keytool.exe" -genkey -alias AndroidDebugKey -keyalg RSA -dname "CN=Android Debug,O=Android,C=US" -validity 10950 -keypass android -keystore C:\Users\BEHZAD\.android\debug.keystore -storepass android" 
```

即使我无法打开 keytool.exe ：`"Windows can't find 'C:\Program Files\Java\jdk1.7.0_05\bin\Keytool.exe ' make sure you typed the name correctly, and try again"`

我在 Mono for Android 中的 Keytool.exe 也有一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:14:50.210

这个问题很常见，一个简单的谷歌搜索带来了很多：

[尝试了很多答案来打开我的 keytool.exe 但失败了](https://stackoverflow.com/questions/5983946/tried-many-answers-to-get-my-keytool-exe-to-open-but-failed)

除此之外，我认为您没有按照应该使用的方式使用 keytool。

[如何找到并运行 keytool](https://stackoverflow.com/questions/5488339/how-can-i-find-and-run-the-keytool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:15:30.940

请卸载 jdk 然后安装 jdk1.7 并检查我的事情问题解决。主要错误表明 jdk 问题.tyr 它并告诉我..一切都好

# jquery - 检查复选框是否被选中，然后检查另一个复选框

> ID：12109160
> 
> 赞同：1
> 
> 时间：2012-08-24T12:09:29.223
> 
> 标签：jquery, checkbox

我有一个网页，上面有 6 个复选框。

```
<input type="checkbox" name="chk1" id="chk1" class="chkbox"/>
<input type="checkbox" name="chk2" id="chk2" class="chkbox"/>
<input type="checkbox" name="chk3" id="chk3" class="chkbox"/>
<input type="checkbox" name="chk4" id="chk4" class="chkbox"/>
<input type="checkbox" name="chk5" id="chk5" class="chkbox"/>
<input type="checkbox" name="chk6" id="chk6" class="chkbox"/> 
```

使用 jquery 如何检查是否所有这 6 个复选框都被选中，如果所有 6 个复选框都被选中，请选中第 7 个复选框：

```
<input type="checkbox" name="chk7" id="chk7" class="chkbox"/> 
```

我已经开始编写函数，但不确定这是否是最好的方法：

```
 function AllSectionsChecked {
        var isChecked1 = $('##chk1').attr('checked')?true:false;
        var isChecked2 = $('##chk2').attr('checked')?true:false;
        var isChecked3 = $('##chk3').attr('checked')?true:false;
        var isChecked4 = $('##chk4').attr('checked')?true:false;
        var isChecked5 = $('##chk5').attr('checked')?true:false;    
        var isChecked6 = $('##chk6').attr('checked')?true:false;                    
    } 
```

任何帮助，将不胜感激。我猜它非常直截了当，但只是在寻找在 jquery 中完成此任务的最佳方法。

更新： *** id 和名称是动态创建的，可能没有任何顺序或比例，所以一个 id 可能是 chk51，下一个可能是 chk205，Appologies 我应该把它放在我原来的帖子中 *** 谢谢你到目前为止的建议。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:15:50.307

假设最后一个复选框的 ID 应该是`chk7`而不是`chk5`？

```
$('#chk7').prop('checked', $('input[type="checkbox"]:lt(6):checked').length == 6); 
```

[**示范**](http://jsfiddle.net/E6pF8/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:16:31.063

那个怎么样？

```
$("#chk7").prop("checked", $(".chkbox").filter(function() {
    return /^chk[1-6]$/.test(this.id) && this.checked;
}).length == 6); 
```

**演示：http:** [//jsfiddle.net/FbQUF/](http://jsfiddle.net/FbQUF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:12:02.727

如果您将特定类添加到要检查的复选框（比如说`need`），您可以使用[:checked 选择器](http://api.jquery.com/checked-selector/)，如下所示：

```
$("#chk7").prop("checked", $(".need:checked").length === 6); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:14:12.597

```
var checked = true;
$('.chkbox').each(function(){
   if($(this).is(':checked')) {
       alert('Element with id ' + $(this).attr('id') + ' is checked');
   } else {
       alert('Element with id ' + $(this).attr('id') + ' is unchecked');
       checked = false;
   }
});

if(checked)
     $('#checkbox7').attr("checked","checked"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T12:16:02.433

这是方式：[提琴手演示](http://jsfiddle.net/9s2vA/97/)

```
<input id="1" name="1" class="chkbox" type="checkbox" />
<input id="2" name="2" class="chkbox" type="checkbox" />
<input id="3" name="3" class="chkbox" type="checkbox" />
<input id="4" name="4" class="chkbox" type="checkbox" />
<br />
<input id="5" name="5" class="chkbox" type="checkbox" />

$('input[type="checkbox"]').on('change', function() {
if (!$('input.paid[type=checkbox]:not(:checked)').length)
    $('input[name=5]').attr('checked','checked');
else
    $('input[name=5]').attr('checked',false);
}) 
```

# objective-c - 如何将格式说明符添加到 NSURL

> ID：12109165
> 
> 赞同：1
> 
> 时间：2012-08-24T12:09:59.713
> 
> 标签：objective-c, ios, google-maps, nsurl

我有以下代码发出 Google Places API 请求。目前参数是静态设置的。我将如何着手制作这些参数（类型和纬度/经度以及 Google 密钥 - 我已在 .h 文件中定义为常量）对象？

NSURL 出现了我的问题，因为我无法向其添加格式说明符。

谢谢你的帮助。

```
-(void)ParseXML_of_Google_PlacesAPI
{

    NSURL *googlePlacesURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=bar&sensor=false&key=MyGoogleAPIKey"];

    NSData *xmlData = [NSData dataWithContentsOfURL:googlePlacesURL];
    xmlDocument = [[GDataXMLDocument alloc]initWithData:xmlData options:0 error:nil];

    NSArray *arr = [xmlDocument.rootElement elementsForName:@"result"];

    for(GDataXMLElement *e in arr )
    {
        [placesOutputArray addObject:e];
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:18:59.333

好吗[`stringWithFormat`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)？

```
`NSString* urlToCall = [NSString stringWithFormat:@"http:://url.to.webservice/api?param1=%@&param2=%@", param1, param2]` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:29:03.753

这可能对你有帮助

```
float lat=34.0522222,lon=-118.2427778;
NSString *typestr=@"bar";
NSString *key=@"MyGoogleAPIKey";

NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/xml?location=%f,%f&radius=500&types=%@&sensor=false&key=%@",lat,lon,typestr,key]];

NSLog(@"url values  ==%@",url); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T12:25:29.320

将格式说明符直接格式化为 NSURL，如下所示：

```
 NSURL *googlePlacesURL = [NSURL URLWithString:[NSString stringWithFormat:@"http:://url.to.webservice/api?param1=%@%param2=%@", param1, param2]]; 
```

# amazon-web-services - 如何使用 IAM 角色使用临时凭证访问资源？

> ID：12109167
> 
> 赞同：4
> 
> 时间：2012-08-24T12:10:03.020
> 
> 标签：amazon-web-services, amazon-cloudformation

我正在使用 AWS IAM 角色，该角色允许实例使用临时 API 凭证（访问密钥、秘密密钥和安全令牌）访问某些资源。

当我使用这个 ruby​​ 脚本测试临时凭证时，它运行没有任何问题：

```
require 'rubygems'
require 'aws-sdk'
AWS.config(
    :access_key_id     => "MY ACCESS KEY GOES HERE",
    :secret_access_key => "MY SECRET KEY GOES HERE",
    :session_token     => "MY TOKEN GOES HERE")
s3 = AWS::S3.new()
myfile = s3.buckets['My-Config'].objects["file.sh"]
File.open("/tmp/file.sh", "w") do |f|
    f.write(myfile.read)
end 
```

但是当使用命令行运行 cfn-describe-stacks 我得到一个错误：

```
export AWS_CREDENTIAL_FILE=aws_credentials.cfg
cfn-describe-stacks
cfn-describe-stacks:  Refused: The security token included in the request is invalid 
```

这是我的 aws_credentials.cfg ：

```
AWSAccessKeyId=MY ACCESS KEY
AWSSecretKey=My SECRET KEY
AWSToken="MY TOKEN==" 
```

那么我在这里缺少什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T17:25:39.953

这很容易使用用户数据脚本。例如，此代码段将获取您的临时凭证并从 S3 下载资源。我将它用于 WAR 部署。

```
# Install updates and dependencies
yum -y install ruby-devel
yum -y install rubygems
yum install -y rubygem-nokogiri
gem install --no-rdoc --no-ri aws-sdk
gem install --no-rdoc --no-ri json

# Grab credentials and parse them
CREDENTIALS=$(curl -s http://169.254.169.254/latest/meta-data/iam/security-credentials/s3access)
S3_ACCESS_KEY=$(echo $CREDENTIALS | ruby -e "require 'rubygems'; require 'json'; puts JSON[STDIN.read]['AccessKeyId'];")
S3_SECRET_KEY=$(echo $CREDENTIALS | ruby -e "require 'rubygems'; require 'json'; puts JSON[STDIN.read]['SecretAccessKey'];")
S3_TOKEN=$(echo $CREDENTIALS | ruby -e "require 'rubygems'; require 'json'; puts JSON[STDIN.read]['Token'];")

# Download myFile
cat << EOF > /etc/getFile.rb
require 'rubygems'
require 'aws-sdk'
AWS.config(
  :access_key_id     => "$S3_ACCESS_KEY",
  :secret_access_key => "$S3_SECRET_KEY",
  :session_token     => "$S3_TOKEN")
s3 = AWS::S3.new()
myfile = s3.buckets['mybucket'].objects["myFile"]
File.open("myLocalFile", "w") do |f|
  f.write(myfile.read)
end
EOF

ruby /etc/getFile.rb 
```

将其放入您的 CloudFormation 模板并适当记录。它会像一个魅力一样工作。您可以使用具有 LaunchConfigs 和[EC2 资源的](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-instance.html#cfn-ec2-instance-iaminstanceprofile)[实例配置文件](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-launchconfig.html#cfn-as-launchconfig-iaminstanceprofile)没有问题。我对此有100%的信心。当他们的文档人员将这些引用添加到文档中时，它与 AWS 取得了联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:25:23.273

我认为 CLI 工具不支持临时凭据。如果他们这样做了，您应该能够将您的“AWSToken”作为命令行参数传递。但根据[文档](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/CLTRG-common-args-api.html)，它只支持将访问密钥 id 和密钥作为参数传入。

> **-I, --access-key-id**值
> 
> 指定 VALUE 作为要使用的 AWS 访问 ID。
> 
> **-S, --secret-key**值
> 
> 指定 VALUE 作为要使用的 AWS 密钥。

# asp.net - 偶尔出现错误 ASP NET 4.0 无法使用 F5 负载平衡器加载文件或程序集“App_Web_yqqnks55”

> ID：12109184
> 
> 赞同：1
> 
> 时间：2012-08-24T12:11:06.913
> 
> 标签：asp.net, .net-4.0, iis-7.5

当我将新代码部署到我们的 Web 服务器时出现以下错误

无法加载文件或程序集 'App_Web_yqqnks55, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

每个服务器都通过 F5 负载平衡器访问。我正在运行 elmah，所以我知道错误来自哪个服务器。当我使用负载均衡器访问时出现错误，然后我直接转到 Web 服务器并且不会发生错误。我重试负载均衡器，错误再次发生。这会发生几次，然后消失。

该网站是预编译的。web.config中的编译是

```
<compilation debug="false" batch="false"> 
        <assemblies>
        </assemblies>
    </compilation> 
```

我环顾四周，似乎有一个修补程序，但据我所知，它仅适用于 .NET 2.0。

删除临时 asp.net 文件会很困难，因为在同一 Web 服务器上运行着其他网站。

关于我还能尝试什么的任何想法？

# java - ConcurrentHashMap 与基于 ReentrantReadWriteLock 的自定义地图重新加载

> ID：12109185
> 
> 赞同：10
> 
> 时间：2012-08-24T12:11:13.107
> 
> 标签：java, locking, concurrenthashmap, reentrantreadwritelock

爪哇大师，

目前我们有一个经常`HashMap<String,SomeApplicationObject>`被**读取和偶尔修改**的文件，我们遇到了在修改/重新加载期间，**读取**操作返回的问题，`null`这是不可接受的。

为了解决这个问题，我有以下选项：

**A. 使用[ConcurrentHashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)**

这看起来像是第一个选择，但我们正在谈论的操作是`reload()`- 意味着`clear()`后跟`replaceAll()`。因此，如果`Map`阅读 post`clear()`和 pre`replaceAll()`它返回 null 这是不可取的。即使我`synchronize`这并不能解决问题。

**B. 基于 [ReentrantReadWriteLock创建另一个实现](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)**

我将在操作`Write Lock`前创建获取`reload()`。这似乎更合适，但我觉得必须有一些可用的东西，我不需要重新发明轮子。

最好的出路是什么？

**编辑**是否已经有任何具有此类功能的收藏？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T12:13:14.250

由于您正在重新加载地图，我会在重新加载时替换它。

您可以使用 volatile Map 来做到这一点，当它更新时您会完全替换它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T09:04:59.860

您似乎不确定如何实施 Peter Lawrey 的建议。它可能看起来像这样：

```
class YourClass {
    private volatile Map<String, SomeApplicationObject> map;

    //constructors etc.

    public void reload() {
        Map<String,SomeApplicationObject> newMap = getNewValues();
        map = Collections.unmodifiableMap(newMap);
    }
} 
```

没有并发问题，因为：

*   新地图是通过局部变量创建的，根据定义，该变量不共享 -`getNewValues`不需要同步或原子
*   分配给`map`是原子的
*   `map`是 volatile 的，保证其他线程会看到变化

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T16:21:49.227

这听起来*很像*[Guava 的](https://code.google.com/p/guava-libraries/) ，[`Cache`](https://code.google.com/p/guava-libraries/wiki/CachesExplained)尽管它实际上取决于您如何填充地图以及如何计算值。（披露：我为 Guava 做出了贡献。）

真正的问题是您是否可以指定如何计算`SomeApplicationObject`给定的输入`String`。就目前为止你告诉我们的情况来看，它可能看起来像这样......

```
LoadingCache<String, SomeApplicationObject> cache = CacheBuilder.newBuilder()
   .build(
       new CacheLoader<String, SomeApplicationObject>() {
         public SomeApplicationObject load(String key) throws AnyException {
           return computeSomeApplicationObject(key);
         }
       }); 
```

然后，每当您想重建缓存时，您只需调用`cache.invalidateAll()`. 使用 a `LoadingCache`，您可以调用`cache.get(key)`，如果它尚未计算该值，它将被重新计算。或者也许在调用之后`cache.invalidateAll()`，您可以调用`cache.loadAll(allKeys)`，尽管您仍然需要能够一次加载单个元素，以防在`invalidateAll`and之间出现任何查询`loadAll`。

如果这是不可接受的——如果你不能单独加载一个值，你必须一次加载它们——那么我会继续使用 Peter Lawrey 的方法——保留`volatile`对地图的引用（理想情况下是一个`ImmutableMap`） ，重新计算整个地图并在完成后将新地图分配给参考。

# c# - 是否有处理时间块的结构？

> ID：12109190
> 
> 赞同：1
> 
> 时间：2012-08-24T12:11:45.470
> 
> 标签：c#, datetime, collections, timespan

我想处理时间块，这意味着一组两个日期时间，例如代表员工的存在。是否已经有任何结构可用于在特定时间之前或之后搜索块？我可以想象有很多方法来表达这种情况，就像我说的用两个日期时间作为开始和结束，或者用一个日期时间作为开始和一个时间跨度。但我希望它们以一种集合的方式处理。那么有什么类似的东西我可以使用还是我必须自己完全实现它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:28:10.540

这个图书馆很棒 - 愿你受到启发

[.NET 的时间段库](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:36:06.483

班上：

```
public class TimePeriod
{
    public DateTime Oldest { get; set; }
    public DateTime Newest { get; set; }

    public TimePeriod(DateTime oldest, DateTime newest)
    {
        Oldest = oldest;
        Newest = newest;
    }

    public bool Contains (DateTime time)
    {
        return Oldest.CompareTo(time) <= 0 && Newest.CompareTo(time) >= 0;
    }

    public bool IsAfter(DateTime time)
    {
        return Newest.CompareTo(time) <= 0;
    }

    public bool IsBefore(DateTime time)
    {
        return Oldest.CompareTo(time) >= 0; 
    }
} 
```

考试：

```
class Program
{
    static void Main(string[] args)
    {
        var period = new TimePeriod(
                    DateTime.Now.AddDays(-2),
                    DateTime.Now.AddDays(1));

        var date = DateTime.Now;
        var contains = period.Contains(date); // true
        var isBefore = period.IsBefore(date); // false
        var isAfter = period.IsAfter(date);   // false

        date = DateTime.Now.AddDays(-10);
        contains = period.Contains(date); // false
        isBefore = period.IsBefore(date); // true
        isAfter = period.IsAfter(date);   // false

        date = DateTime.Now.AddDays(10);
        contains = period.Contains(date); // false
        isBefore = period.IsBefore(date); // false
        isAfter = period.IsAfter(date);   // true
    }
} 
```

现在您可以使用带有扩展方法和 lambda 表达式的集合和 linq 来查找时间块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:16:27.000

这不是内置的。如果你想自己实现这个，你可能想创建一个**struct**。这将为您提供值类型的复制语义。这样的值的行为就像内置类型一样`int`or `DateTime`。使用起来非常直观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:30:57.823

你可以看看 TimeSpan。那是处理“时间块”的结构

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T12:35:12.133

我以前使用过一个`DateSpan`结构。您可以随心所欲地扩展，但这将为您提供一个起点。

```
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;

namespace StackOverFlowDateSpan
{
[StructLayout(LayoutKind.Auto)]
[Serializable]
public struct DateSpan : IComparable, IComparable<DateSpan>, IEquatable<DateSpan>
{
    public DateSpan(DateTime start, DateTime end)
        : this()
    {
        Start = start;
        End = end;
    }

    #region Properties

    public TimeSpan Duration
    {
        get { return TimeSpan.FromTicks((End - Start).Ticks); }
    }

    public DateTime End { get; private set; }
    public DateTime Start { get; private set; }

    #endregion

    public int CompareTo(DateSpan other)
    {
        long otherTicks = other.Duration.Ticks;
        long internalTicks = Duration.Ticks;

        return internalTicks > otherTicks ? 1 : (internalTicks < otherTicks ? -1 : 0);
    }

    public bool Equals(DateSpan other)
    {
        return End.Equals(other.End) && Start.Equals(other.Start);
    }

    public int CompareTo(object other)
    {
        if (other == null)
        {
            return 1;
        }

        if (!(other is DateSpan))
        {
            throw new ArgumentNullException("other");
        }

        return CompareTo((DateSpan)other);
    }

    public override bool Equals(object other)
    {
        if (ReferenceEquals(null, other))
        {
            return false;
        }
        return other is DateSpan && Equals((DateSpan)other);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return (End.GetHashCode() * 397) ^ Start.GetHashCode();
        }
    }

    public static bool operator ==(DateSpan left, DateSpan right)
    {
        return left.Equals(right);
    }

    public static bool operator !=(DateSpan left, DateSpan right)
    {
        return !left.Equals(right);
    }

    private sealed class EndStartEqualityComparer : IEqualityComparer<DateSpan>
    {
        #region IEqualityComparer<DateSpan> Members

        public bool Equals(DateSpan x, DateSpan y)
        {
            return x.End.Equals(y.End) && x.Start.Equals(y.Start);
        }

        public int GetHashCode(DateSpan obj)
        {
            unchecked
            {
                return (obj.End.GetHashCode() * 397) ^ obj.Start.GetHashCode();
            }
        }

        #endregion
    }

    private static readonly IEqualityComparer<DateSpan> _endStartComparerInstance = new EndStartEqualityComparer();

    public static IEqualityComparer<DateSpan> EndStartComparer
    {
        get { return _endStartComparerInstance; }
    }
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T11:29:30.253

谢谢您的帮助！我将仔细研究 TimePeriod 库并使用 Linq 做一些实验。我已经有一个实现二进制搜索的方法，所以如果有人感兴趣，你可以写信给我；）

# php - php curl 404在同一个域上

> ID：12109194
> 
> 赞同：1
> 
> 时间：2012-08-24T12:12:05.673
> 
> 标签：php, ubuntu, webserver

我有一个域（虚拟主机），我正在向同一个域发出 php curl 请求。

```
 $curl = curl_init('http://www.domain.co.uk/api/v2_soap/?wsdl');
 curl_setopt($curl,CURLOPT_RETURNTRANSFER, true);
 $wsdl_string = curl_exec($curl); 
```

它返回 404，但 curl 在命令行中可以正常工作。

我假设它是因为它试图在内部而不是外部访问地址。

我认为（根据我的阅读）我需要在我的 /etc/hosts 文件中添加一个条目以防止这种情况发生。所以我想知道它应该是什么：

127.0.0.1 www.domain.co.uk 还是应该是域的 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:47:12.353

我注释掉了：

```
#127.0.0.1 www.domain.co.uk 
```

那已经在那里，它开始工作了。

# wifi - 以太网线断开 wifi

> ID：12109199
> 
> 赞同：-2
> 
> 时间：2012-08-24T12:12:39.660
> 
> 标签：wifi, ethernet

我在以太网上使用指纹读取器，当我插入时，wifi 断开连接，而不是停用，只是断开连接。我不知道出了什么问题，所以也许你会。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:43:40.503

My problem was in the BIOS. Thanks anyway !

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T12:17:55.107

两个连接同时进行有什么好处。你只能使用一个，我想使用两个中的一个。开发人员会说这是设计使然。断开或连接而不使用 == 相同的东西。

# android - 如何缓存 REST 响应，Spring For Android

> ID：12109202
> 
> 赞同：6
> 
> 时间：2012-08-24T12:12:41.797
> 
> 标签：android, caching, spring-mobile

目标是缓存来自 Web 服务的一些响应。

我正在使用 Spring for Android 框架 - [http://www.springsource.org/spring-android#documentation](http://www.springsource.org/spring-android#documentation)与 restful 服务进行通信。[据我所知，我可以使用通用 Spring 框架 ( http://viralpatel.net/blogs/cache-support-spring-3-1-m1/](http://viralpatel.net/blogs/cache-support-spring-3-1-m1/) )中的一些模块将缓存添加到应用程序中。我是对的，仅使用 spring-for-android 是不可能的吗？那么解决方案是什么？

*我没有任何普通春季的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:07:48.413

我是[RoboSpice](https://github.com/octo-online/robospice)的贡献者。这个库为带有缓存的网络请求提供了一个很好的异步模型。我们还有一个您可能感兴趣的 Spring Android 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:51:49.087

因此，使用额外的数据库进行缓存更容易。我使用了这些列：过期日期、请求 url、请求对象（哈希）、响应对象（序列化）。

在将请求发送到服务器之前，我已经“请求”了缓存。这足以实现我的目标，如果您需要额外的功能，可能需要额外的列。

# mercurial - 将不同的存储库合并为一个

> ID：12109203
> 
> 赞同：1
> 
> 时间：2012-08-24T12:12:49.883
> 
> 标签：mercurial, merge, repository

我有两个不同的 Mercurial 存储库，每个都有自己的历史。有没有办法将两者合并到一个存储库中，该存储库也具有两者的完整历史？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:59:28.130

`-f`您可以使用标志将一个拉入另一个：

```
> cd path\to\repo1
> hg pull -f path\to\repo2
> hg merge

.... deal with merge conflicts ....

> hg commit -m "Merge with repo2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:33:23.553

也许。试试这个方法：

1.  克隆回购 #1
2.  `hg export`使用from repo #2创建一组补丁
3.  使用将补丁导入克隆`hg import`

当两个存储库具有公共文件时，这将失败。这里的解决方案是使用`hg patch`.

背景：Mercurial 为每个变更集创建一个校验和。这个强加密校验和包含修改日期、用户名、父变更集的校验和和补丁。

这意味着如果您尝试将变更集从一个 repo 复制到另一个 repo，这将失败，因为找不到父变更集。由于校验和，添加父变更集并不容易。

# wso2 - WSO2 身份服务器 - 限制对 SSO 服务的访问

> ID：12109204
> 
> 赞同：2
> 
> 时间：2012-08-24T12:12:51.173
> 
> 标签：wso2, saml, saml-2.0, wso2is

我对 SAML 和 WSO2 的理解非常基础，所以提前抱歉。我想知道是否可以将访问 SSO 服务限制为用户子集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:04:50.210

是的，您可以将对 SAML SSO 服务提供商的访问限制为一部分用户。这确实是一个授权要求。当服务提供者将用户重定向到身份提供者（在本例中为 WSO2 身份服务器）时，服务提供者可以从身份服务器请求关于用户的声明（如角色、电子邮件、年龄、国家等声明）。然后，在身份提供者成功验证用户身份后，身份提供者会将这些声明值与 SAML 响应消息一起发送给 SSO 服务提供者。SSO 服务提供者可以读取这些声明，并可以决定是否应该让用户访问服务。（例如，通过查看角色声明，如果用户具有特定角色，则 SSO 服务提供者允许用户，如果不拒绝）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T13:12:09.873

我认为根据 SAML 规范，身份提供者可以返回错误状态。它在 SAMLResponse 中有一个元素专用于此 -> 状态。但据我所知，WSO2 Identity Server（最高 5.0.0）不会自动支持这种行为。应该更改 WSO2 授权代码以实现此行为...

资料来源： [SAML 2.0 概述](http://xml.coverpages.org/SAMLv20CoreWD-v05.pdf)- 第 1131 行，章节：3.2.2.2 元素

```
<samlp:Response
...<saml:Issuer>https://idp.example.org/SAML2</saml:Issuer>
<samlp:Status>
<samlp:StatusCode
**Value="urn:oasis:names:tc:SAML:2.0:status:Success"/>**
</samlp:Status>
<saml:Assertion  ... 
```

代替 Success IdP 可以返回：urn:oasis:names:tc:SAML:2.0:status:AuthnFailed 或类似...请参阅： [SAML2.0 处理 SSO 错误](https://lists.oasis-open.org/archives/saml-dev/200901/msg00021.html)

# jsf-2 - primefaces P：布局根本不起作用

> ID：12109207
> 
> 赞同：0
> 
> 时间：2012-08-24T12:13:01.890
> 
> 标签：jsf-2, primefaces

我使用了 primefaces 展示示例， [http://www.primefaces.org/showcase/ui/layoutElement.jsf](http://www.primefaces.org/showcase/ui/layoutElement.jsf) 但它没有显示任何内容。

我的页面是：

```
<h:head>
<title>Title</title>
</h:head>
<h:body>
<p:layout style="min-width:400px;min-height:200px;" id="layout">
    <p:layoutUnit position="west" resizable="true" size="100" minSize="40"
        maxSize="200">  
    Left  
</p:layoutUnit>

    <p:layoutUnit position="center">  
    Center  
</p:layoutUnit>
</p:layout>
</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:27:12.553

奇怪，它完全为我工作。您是否为您的标签和文档类型使用了正确的命名空间？喜欢

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"> 
```

# c# - 无需签名即可部署 ClickOnce 应用程序

> ID：12109208
> 
> 赞同：4
> 
> 时间：2012-08-24T12:13:02.357
> 
> 标签：c#, .net, visual-studio-2010, deployment, clickonce

我很清楚在 ClickOnce 应用程序中签名是如何工作的，但在 Intranet 场景中，我根本不知道添加测试证书或不签署清单之间的区别。

我为什么要签名？在这两种情况下，我都会获得相同的“未知发布者”，并且应用程序运行良好，在第一种情况下，我将在一年内拥有过期的证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:35:05.903

您应该使用自行颁发的证书（通过 Visual Studio）。当您使用自颁发的证书，并且用户决定接受这些凭据时，那么将来您可以使用相同的 sef 颁发的证书进行重建/部署。用户将获得自动更新。

否则，用户必须卸载旧的，重新安装新的。所以，如果你从不做任何更新，那么对用户来说就不会有任何区别。

# php - Symfony 2 中 Zend\Validate\Db\NoRecordExists 的类比

> ID：12109220
> 
> 赞同：2
> 
> 时间：2012-08-24T12:13:43.417
> 
> 标签：php, zend-framework, symfony

在 Zend Framework 中，我可以使用漂亮的验证器`Zend\Validate\Db\NoRecordExists`来验证重复记录。Symfony 2 中是否存在类似的验证器，我该如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:21:09.920

您可以在 symfony 中使用[Unique Entity](http://symfony.com/doc/current/reference/constraints/UniqueEntity.html)来验证模型中的特定字段是否唯一。

# php - 是否可以从这种类型的url获取信息：website.com/hello/richard

> ID：12109227
> 
> 赞同：0
> 
> 时间：2012-08-24T12:14:16.813
> 
> 标签：php, html, url

例如，如果有一个类似的 url `www.website.com/hello/richard`，是否可以将 hello 和 100 分别回显到我的页面上。

例如：

**你好**，今天你好吗，**理查德**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:15:54.310

你可以从中获取数据`$_SERVER['REQUEST_URI']`，然后用它做任何你喜欢的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:18:25.170

是的。尝试这个：

```
$myURL = $_SERVER['REQUEST_URI'];
$myTokens = explode('/', $myURL);
echo $myTokens[1] . "blah" . $myTokens[2]; 
```

此代码将当前 URL 获取到**myURL**变量中，然后调用一个名为**explode**的函数，该函数根据 '\' 字符的位置将其转换为一个数组。然后它会回显该数组的某些元素。如果您使用 echo 处理输出，您很快就会亲眼看到发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T12:19:06.697

当然这是可能的。您可以使用`$_SERVER['request_uri]`. 然后，您可能想使用`explode`函数来确定分隔符为 / 的字符串数组。然后你可以解析它。或者您可以通过 .htaccess 使用重写规则执行此操作

# wcf - 具有摘要身份验证的 IIS 托管 WCF 服务

> ID：12109233
> 
> 赞同：0
> 
> 时间：2012-08-24T12:14:59.257
> 
> 标签：wcf, iis

我想创建一个托管在 IIS 7.5 中的 WCF 服务，并且我想通过 http 使用摘要身份验证。

我在虚拟目录上有设置摘要，但是当我尝试访问该服务时，我总是收到错误：

> *此服务需要“匿名”身份验证，但托管此服务的 IIS 应用程序未启用它*

这是我的 web.config：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="basicHttpBinding_IServisTest">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Digest"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service name="ServisService.ServisTest" 
           behaviorConfiguration="ServisService.ServisTestBehavior">
     <endpoint 
         address="" 
         binding="basicHttpBinding" bindingConfiguration="basicHttpBinding_IServisTest"
         contract="ServisService.IServistest" >
     </endpoint>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServisService.ServisTestBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel> 
```

我使用的是 http 而不是 https。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:01:31.467

为此，我猜安全模式应该是传输

```
<security mode="Transport"> 
```

这篇[文章](http://social.msdn.microsoft.com/Forums/en/wcf/thread/a27fabba-3798-45bf-941b-315bffbbccd2)可能会对你有所帮助。

# nhibernate - NHibernate IList 还是列表？

> ID：12109235
> 
> 赞同：3
> 
> 时间：2012-08-24T12:15:04.060
> 
> 标签：nhibernate, ilist

我环顾了 Stackoverflow，看到了一些与 NHibernate IList vs List 相关的问题。我有一个自己的问题...

由于 IList 的目的是拥有一个延迟加载的列表，它从存储库返回的目的是什么。毕竟，如果您 ToList() 您的存储库调用，您正在创建一个确定的对象？因此，无论您的方法是返回 IList 还是 List，都不再涉及延迟加载，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:27:57.037

如果您的存储库返回一个 IQueryable，则将在您第一次枚举它时检索结果。如果你在它上面调用 ToList()，它会在此时检索结果，因为 ToList 会枚举 IQueryable。

现在，延迟加载不一定会受到这种行为的影响：假设您有客户和订单。每个客户都有一个名为 CustomerOrders 的属性，它被标记为延迟加载。这意味着当您加载客户列表时，仅当您尝试枚举每个客户的 CustomerOrders 属性时才会检索订单。因此，如果您只是对 GetCustomers() 方法的返回值执行 ToList()，它对 CustomerOrders 的延迟加载没有影响

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-05T16:05:30.463

您非常正确，但是混淆了一些概念，因此我将从顶部开始。

你说得对`.ToList()` `materializes`。

`IList`只是物化列表的抽象接口。

NHibernate`IList`在某些情况下需要，[因为它代理了一些东西](http://nhibernate.info/doc/nhibernate-reference/collections.html)。使用`session.QueryOver`etc. 时，您将使用`List()`扩展方法返回一个`IList`（物化）或`Future()`返回一个`IEnumerable`（惰性）。这`QueryOver`是相当稳定和完整的和铺好的。

在 Linq 提供者方面，您可以使用`session.Query`，并且您可以停留在`IQueryable`级别以拥有“查询规范”，`IEnumerable`用于惰性或`IList`物化项目。通常，您将使用`ToList()`物化和`AsEnumerable()`（或强制转换/类型转换）来获取`IEnumerable`. 注意，我无法就 LINQ 提供程序在 QueryOver 上发表声明。

# ios - 加载后UITabBar不更新外观

> ID：12109237
> 
> 赞同：0
> 
> 时间：2012-08-24T12:15:11.673
> 
> 标签：ios, uitabbar, appearance

我在使用 UITabBar 时遇到问题，似乎是调用

```
[[UITabBar appearance] setSelectedImageTintColor:barColor]; 
```

一旦标签栏显示出来，什么都不做，如果我把这条线放在 ViewDidLoad (ViewWillAppear) 中它确实有效。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:33:54.817

在苹果文档中`UITabBar`说

“应用于创建所选图像时使用的渐变图像的色调颜色。”

注意*创建*，这意味着它在初始化/创建标签栏时读取此属性，但之后无法设置。如果你想动态地，你必须有点繁琐并`UIView`在所选图像上覆盖一个半透明来改变颜色，但这并不是很理想......这里有一些*这类*事情的例子

[更改 UITabBar 的色调/背景颜色](https://stackoverflow.com/questions/571028/changing-tint-background-color-of-uitabbar)

# javascript - 动态设置动态创建的元素的宽度

> ID：12109241
> 
> 赞同：0
> 
> 时间：2012-08-24T12:15:42.830
> 
> 标签：javascript, jquery

我动态创建一个 div#sresult_container 并将没有 div 附加到该 div。并且所有附加的 div 都有不同的文本。所以我可以检索 div#sresult_container 的宽度，但我尝试在 div#sresult_container 显示在视口上之前将其宽度增加 10px。我该怎么做？请帮帮我？我的代码如下：

```
var $sresult_container = $('<div id="sresult_container"></div>'); 
```

之后我将一些 div 附加为 div#sresult_container 的子项。

并附加到正文。

```
$('body').append($sresult_container);
var Setwidth  = $('#sresult_container').outerWidth() + 10;
$('#sresult_container').css('width',Setwidth + 'px'); 
```

所以这里首先加载原始宽度，然后加载修改后的宽度。那么如何直接加载修改后的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:25:52.463

首先#sresult_container 必须有一个预定义的宽度。

```
#sresult_container {
    width: 100px;    
}

$('<div id="sresult_container">text</div>').appendTo('body');

$('#sresult_container').css('width', function () {
    return ($(this).outerWidth(true) + 10) + 'px';
});​ 
```

[http://jsfiddle.net/xBZT7/14/](http://jsfiddle.net/xBZT7/14/)

[http://jsfiddle.net/xBZT7/15/](http://jsfiddle.net/xBZT7/15/)

# iphone - 如何在不同的 UIViewController 中使用自定义覆盖视图

> ID：12109242
> 
> 赞同：0
> 
> 时间：2012-08-24T12:15:48.320
> 
> 标签：iphone, ipad

我正在使用自定义覆盖 UIView 类

```
#import "OverLayView.h"

@implementation OverLayView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
       self->overLay  = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 704)];
        self->overLay.backgroundColor = [UIColor colorWithWhite:0 alpha:.5];

    }
    return self;
}

-(void)removeOverLay{

    [self->overLay removeFromSuperview];
} 
```

我正在加载点击动作

```
 OverLayView *m_overLay = [[UIView alloc]initWithFrame:
                              CGRectMake(0,0,1004,768)]; 
    [m_overLay setBackgroundColor:[UIColor colorWithRed:0\. green:0.39 blue:0.106 alpha:0.5]];
    [self.view addSubview:m_overLay];

    CGRect rect = CGRectMake(0, 0, 1024, 704);

    secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:[NSBundle mainBundle]];
    [secondViewController.view setFrame:CGRectMake(300, 60, 430, 620)];
    [self.view addSubview:secondViewController.view]; 
```

我在使用 UIView 类型的表达式初始化覆盖视图 *_strong' 时遇到不兼容的指针类型。

当我加载时，我需要从 secondViewController 调用 removeOVerLay 这将删除已创建的覆盖

任何人都可以建议我如何删除覆盖

@提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:46:13.127

> 使用 NSNotification 解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:23:00.007

您可以通过赋予动画效果来自定义 UIViewController 中的叠加视图。

参考[overlay-another-uiview](https://stackoverflow.com/questions/12066200/slide-out-navigation-through-swipes-for-uiview-to-overlay-another-uiview/12066416#comment16175819_12066416)链接。希望有希望

# .net - 识别高内存进程.NET

> ID：12109248
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:16:02.970
> 
> 标签：.net, performance, memory, process

我的应用程序创建了多个进程，并且打印请求通过这些进程中的每一个。比如说，如果我发送 500 个请求，进程的内存就会增加，它会打印所有请求。但问题是，即使工作完成后内存也不会下降。因此，有没有办法确定该进程当前是否正在处理，或者我需要在完成作业后重新启动该进程。

谢谢，维诺特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:41:25.730

您确实需要调试代码以查看您留下的内存错误。有许多可用的 .NET 内存泄漏工具，通过其中之一运行您的进程之一。

不要仅仅因为你有一个垃圾收集器就认为你所有的内存问题都解决了，你仍然需要考虑内存——我发现比以前更多。

一些泄漏检查工具：

*   [内存分析器](http://memprofiler.com/)
*   [蚂蚁](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)
*   [分配分析器](http://support.smartbear.com/articles/aqtime/net-allocation-profiler/)

# c# - 无法在 XNA 中将 Awesomium 渲染到屏幕上

> ID：12109249
> 
> 赞同：4
> 
> 时间：2012-08-24T12:16:06.387
> 
> 标签：c#, xna, awesomium

我目前正在使用有人建议将[Awesomium和 XNA 结合使用](http://awesomium.com/)[的](https://gist.github.com/2690490)代码，但是我遇到了一个问题......每当我尝试绘制组件给我的结果 Texture2d 时，我得到：

> 在 GraphicsDevice 上主动设置资源时，您不能在资源上调用 SetData。在调用 SetData 之前从设备取消设置它。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;
using Awesomium.Core;

namespace ProjectTest
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        AwesomiumComponent uiHud;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
            Rectangle rect = new Rectangle(100, 100, 500, 500);
            uiHud = new AwesomiumComponent(this, rect);
            this.Components.Add(uiHud);
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);
            uiHud.WebView.LoadURL("http://www.google.com/");

            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here
            //uiHud.Update(gameTime);

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);
            Vector2 pos = new Vector2(10, 10);

            spriteBatch.Begin();
            spriteBatch.Draw(uiHud.WebViewTexture, pos, Color.White);
            spriteBatch.End();

            //uiHud.Draw(gameTime);
            // TODO: Add your drawing code here
            base.Draw(gameTime);
        }
    }
} 
```

我到底做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:57:04.980

您`SpriteBatch`正在将 web 纹理设置为图形设备的第一个纹理阶段，并且永远不会取消它。这导致 Awesomium 的`Draw()`方法失败，因为它试图调用`SetData()`仍在使用的纹理。

之后`spriteBatch.End()`，取消设置纹理阶段：

```
GraphicsDevice.Textures[0] = null; 
```

# unit-testing - 单元测试日期 - 如果不是工作日

> ID：12109253
> 
> 赞同：2
> 
> 时间：2012-08-24T12:16:24.747
> 
> 标签：unit-testing, phpunit

如果时间戳是周末，即星期六或星期日，我有一个小方法返回真或假。

现在我对单元测试非常陌生，我正在尝试为此编写单元测试。

在我的测试用例中，我将如何进行：

这是我的初步想法。

```
1\. Pick any 1 week from the past and then...
   1.1\. Get a timestamp for all 5 week days (mon through fri) and pass each timestamp to the function being tested.  If they all return false then proceed...
   1.2  Get the timestamp for both weekend days and pass each to function being tested.  If they both return true then we know the function is correct. 
```

或者

```
2  Simply pick 1 weekday from the past and 1 weekend day from the past and test with only those 2 dates 
```

我在这两种方法中是否正确，还是有更好的方法来测试它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:28:06.770

这需要一两个[数据提供者](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)。PHPUnit 将首先调用数据提供者来获取一个数组，其中包含它将传递给测试的数据集，其中每个数据集都是要传递给测试方法的参数数组。接下来，它对每个数据集执行一次测试。在这里，每个数据集都是一个简单的日期字符串以及错误消息的日期名称。

```
/**
 * @dataProvider weekdays
 */
function testDetectsWeekdays($date, $day) {
    self::assertTrue($fixture->isWeekday($date), $day);
}

/**
 * @dataProvider weekends
 */
function testDetectsWeekends($date, $day) {
    self::assertFalse($fixture->isWeekday($date), $day);
}

function weekdays() {
    return array(
        array('2012-08-20', 'Monday'),
        array('2012-08-21', 'Tuesday'),
        array('2012-08-22', 'Wednesday'),
        array('2012-08-23', 'Thursday'),
        array('2012-08-24', 'Friday'),
    );
}

function weekends() {
    return array(
        array('2012-08-25', 'Saturday'),
        array('2012-08-26', 'Sunday'),
    );
} 
```

至于测试的日期，您需要考虑在您的课程中可能出现的任何极端情况。闰年会影响吗？时区？这取决于作为单元（白盒）测试一部分的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:25:18.487

如果您将多个检查放入一个测试中，您将遇到一个问题，即当第一个检查失败时，您将不知道某些检查可能会返回什么。假设该方法在第 3 天失败。第 4 天可以用吗？在尝试查找错误时，此信息可能非常有用。

我的方法是一次测试所有值。它是这样工作的：

1.  选择过去的日期
2.  创建一个循环，将日期提前一天 8 次
3.  为每个日期调用方法并将结果附加到字符串
4.  通过查看真实日历创建具有预期结果的字符串）
5.  比较两个字符串

这样，您可以一眼看出该方法失败的日期。

另一种选择是编写 8 个测试并让每个测试检查一个日期。

提示：当引入时区时，这样的测试往往会失败。创建更多使用接近午夜的时间戳并使用 timezome 的测试。结果仍然正确吗？

# rest - XMLHttpRequest 无法加载 *...* Origin : * is not allowed by Access-Control-Allow-Origin

> ID：12109255
> 
> 赞同：2
> 
> 时间：2012-08-24T12:16:27.847
> 
> 标签：rest, extjs, jersey

我正在尝试使用 extjs 存储与返回 Json 的 Jersey REST Java 应用程序（在 tomcat 上运行）对话。我正在尝试使用 Json 打印到网格组件。这是我的商店代码。

```
Ext.define('WSC.store.Users', {
extend: 'Ext.data.Store',
fields: ['period','tot_units', 'tot_selling_price'],
model: 'WSC.model.User',
proxy: {
    type: 'rest',
    url : 'http://localhost:8080/mondrianCube/services/query/querygoeshere/json',
    reader: {
        type: 'json',
        root: 'table'
    }
},
autoLoad: true 
```

});

商店无法读取获得的 json。大多数建议是将响应标头（Access-Control-Allow-Origin）添加到 webapp（在 tomcat 上运行）。所以我添加了如下的响应头。

```
@Path("/query/{qryParam}/json")
@GET
@Produces(MediaType.APPLICATION_JSON)
public static Response jsonResult(@PathParam("qryParam") String qryParam) throws JSONException 
{
    executeQuery("select {[Measures].members} on columns, {Time.[2010], Time.[2010]} on rows from sales" );
    String json = (new JSONObject(((new ResultSetConvert(result)).toJson()))).toString();
    return Response.ok(json).header("Access-Control-Allow-Origin","*").build();     
} 
```

即使那样我也得到与下面相同的错误

![http://i.stack.imgur.com/X2cKd.png](../Images/609fb386a9bb2c7ad49674587afffa7a.png)

我在这里想念什么？

PS 如果 url 指向同域中的文件，则 store 能够读取文件中的 json。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:19:55.227

我相信你会想要为此使用 JSONP，例如，

```
 Ext.get('search-form').on('submit', function(ev) {
                ev.preventDefault();
                Ext.ux.JSONP.request('http://api.flickr.com/services/feeds/photos_public.gne', {
                    callbackKey: 'jsoncallback',
                    params: {
                        format: 'json',
                        tags: Ext.fly('search-value').dom.value,
                        tagmode: 'all',
                        lang: 'en-us'                            
                    },
                    callback: updateResults
                });
                return false;
            }); 
```

维基百科定义的 jsonp

JSONP 或“带填充的 JSON”是对基本 JSON 数据格式的补充。它提供了一种从不同域中的服务器请求数据的方法，由于相同的来源策略，典型的 Web 浏览器禁止这样做。

同源政策定义

在计算中，同源策略是许多浏览器端编程语言（例如 JavaScript）的重要安全概念。该策略允许在源自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。 [

# android - Android服务在它还活着的时候停止后台处理

> ID：12109259
> 
> 赞同：0
> 
> 时间：2012-08-24T12:16:42.087
> 
> 标签：android, sockets, gps

我正在开发一个 GPS 服务，它通过套接字发送数据......当我启动我的服务时，它运行良好几分钟，一段时间后后台处理停止......当我检查我的 android 设备上正在运行的服务时，我的服务还活着。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:25:12.027

您的附加评论也无济于事。可能您只是失去了连接并且没有在您的服务中重新建立它？

好吧，这是一场没有任何代码片段的疯狂追逐。

# php - 如何将带有“空格”的单词从：（example1，example2，...）到（example1，example2，...）

> ID：12109260
> 
> 赞同：0
> 
> 时间：2012-08-24T12:16:43.337
> 
> 标签：php, title, space

我在带有标题输出的 php 代码中遇到问题。

***示例：*** 如果我在标题中有这样的词： *“example1,example2,example3,example4,...”*这个标题扩展了我的云 div 样式。

输出***.$row['title']。***应该用空格*分隔*从 example1,example2,example3 到 example1,example2,example3, ... 的单词，但事实并非如此。如何更改这将发生的代码？

谢谢。

```
<?php

function print_cloud()
{ global $use_ads_scrl; $res=""; if ($use_ads_scrl=="yes"){$res=print_cloud2();}  return $res; }

function print_cloud2()
{

global $table_ads, $HTTP_GET_VARS;

$city_sch="";
if ($HTTP_GET_VARS['city']!=""){$city_sch="and city='".$HTTP_GET_VARS['city']."' ";}

$sql_query="select * from $table_ads where (adcommkey is null or adcommkey=0) and visible=1 $city_sch
order by RAND() limit 10";

$sql_res=mysql_query("$sql_query");

$min = '10'; // Minimum font size in pixel.
$max = '22'; // Maximum font size in pixel.

$k1=""; $html_res="";
while ($row = mysql_fetch_array($sql_res)){
$k1="1";
if($row['adphotos']=='yes'){$check_ph=$photo_mark;} else {$check_ph="";}

$html_res=$html_res."
<a style='font-size:".rand($min,$max)."px; font-family:tahoma,sans-serif;'    
    class=\"tag_cloud\" 
        href='index.php?md=details&id= ".$row['idnum']." '> ".$row['title']." </a> 
";

}

$html_res="
$html_res
";

if ($k1==""){$html_res="";}

return $html_res;
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:19:03.110

您可以为此使用 str_replace：

```
echo str_replace(",", ", ", $the_string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:18:46.683

只需用逗号分隔字符串，然后使用逗号和空格作为胶水将其重新组合在一起：

```
 $row['title'] = implode( ', ', explode( ',', .$row['title'] ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:35:38.343

我的答案似乎太简单而无法正确，但它就在这里。

更改此代码：

```
$html_res=$html_res."
<a style='font-size:".rand($min,$max)."px; font-family:tahoma,sans-serif;'    
    class=\"tag_cloud\" 
        href='index.php?md=details&id= ".$row['idnum']." '> ".$row['title']." </a> 
"; 
```

到这段代码：

```
$html_res=$html_res."
<a style='font-size:".rand($min,$max)."px; font-family:tahoma,sans-serif;'    
    class=\"tag_cloud\" 
        href='index.php?md=details&id= ".$row['idnum']." '> ".$row['title'].",</a> "; 
```

更新的完整代码如下：

```
<?php

function print_cloud()
{ global $use_ads_scrl; $res=""; if ($use_ads_scrl=="yes"){$res=print_cloud2();}  return $res; }

function print_cloud2()
{

global $table_ads, $HTTP_GET_VARS;

$city_sch="";
if ($HTTP_GET_VARS['city']!=""){$city_sch="and city='".$HTTP_GET_VARS['city']."' ";}

$sql_query="select * from $table_ads where (adcommkey is null or adcommkey=0) and visible=1 $city_sch
order by RAND() limit 10";

$sql_res=mysql_query("$sql_query");

$min = '10'; // Minimum font size in pixel.
$max = '22'; // Maximum font size in pixel.

$k1=""; $html_res="";
while ($row = mysql_fetch_array($sql_res)){
$k1="1";
if($row['adphotos']=='yes'){$check_ph=$photo_mark;} else {$check_ph="";}

$html_res=$html_res."
<a style='font-size:".rand($min,$max)."px; font-family:tahoma,sans-serif;'    
    class=\"tag_cloud\" 
        href='index.php?md=details&id= ".$row['idnum']." '> ".$row['title'].",</a> ";

}

$html_res="
$html_res
";

if ($k1==""){$html_res="";}

return $html_res;
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:20:57.833

```
 $txt = $row['title'];   
    $txt = explode(",", $txt);
    foreach($txt as $key => $value) {
       echo $value.", ";
    } 
```

# jquery - 计算div + childs 中的标签

> ID：12109261
> 
> 赞同：7
> 
> 时间：2012-08-24T12:16:51.737
> 
> 标签：jquery, html, count, size, children

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T12:18:29.643

只需[`>`](http://api.jquery.com/child-selector/)从选择器中删除 以获得 的[*所有*](http://api.jquery.com/descendant-selector/) `a`后代 `.classDiv`，而不仅仅是直接的后代：

```
$(".classOfDiv a").length 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:19:22.947

选择`.classOfDiv > a`器只会为您`<a>`提供直接后代的标签 a `<div class="classOfDiv">`，因此您需要将代码更改为：

```
$('.classOfDiv a').length; 
```

请注意缺少`>`直接后代选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:22:15.910

你可以这样做：

```
$('.classOfDiv > [class ^= "div"] > a').length 
```

[我在这里](http://jsfiddle.net/ColdToast/ELMbh/)做了一个小提琴

# php - 使用 mysql/php 获取数据的安全方法

> ID：12109270
> 
> 赞同：1
> 
> 时间：2012-08-24T12:17:45.943
> 
> 标签：php, mysql, sql, code-injection

在我意识到准备好的语句的使用以及它对 SQL 注入的作用之前，我编写了这段代码。现在我也知道使用准备好的语句获取数组是多么的混乱。所以我想知道这段代码是否可以安全使用，因为它不使用任何用户提交的信息来获取行。

它的作用是通过使用会话 id 来识别 db 表中的行，会话由 login_check 函数等确保......：

```
$username = $_SESSION['username'];
$select = mysqli_query($link, " SELECT product_id, product_title, product_value                             
                                FROM product
                                WHERE user_id='$username'");

while ($row = mysqli_fetch_assoc($select))
{
    $product[] = array(
            'product_id' => $row['product_id'], 
            'product_title' => $row['product_title'], 
            'product_value' => $row['product_value']);
} 
```

关于这个问题的一些信息真的很感激，因为事情进展顺利，直到我知道准备好的陈述..

**编辑**
所以，我有点朝另一个方向走，并完全跳过了这个查询的数组部分。相反，我使用准备好的声明并做了这样的事情..：

`$select_stmt = $db->prepare("SELECT etc...)`
`$select_stmt->bind_param("CODE")`
`$select_stmt->execute();`
等等..

但问题是我的 bind_result 变得相当大（？）有 14 个变量。也许这是一个愚蠢的问题，但与使用单个数组的旧方法相比，这会减慢我的网站速度（如果 14 甚至被认为是“大”）？这是一个常见的查询，希望许多用户会同时经常使用它。准备好的陈述对我来说是新的，所以..

感谢到目前为止的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:37:56.923

您应该查看**准备好的陈述**。这是 mysqli 的众多好处之一。它允许您插入变量而不必担心 SQL 注入。`mysqli_real_escape_string`大多数时候都可以工作，但准备好的语句是唯一真正安全的避免攻击的方法。

**[手册](http://php.net/manual/en/mysqli.prepare.php)中的示例：**

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt->bind_param("s", $city);

    /* execute query */
    $stmt->execute();

    /* bind result variables */
    $stmt->bind_result($district);

    /* fetch value */
    $stmt->fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt->close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:25:37.677

如果用户名是例如`Jean D'arc`到达 mysql 服务器的字符串将是

```
SELECT
  product_id, product_title, product_value
FROM
  product
WHERE
  user_id='Jean D'arc' 
```

这将导致解析错误。
正确编码/转义 sql 语句中的参数*不仅*对于防止来自用户的恶意输入是必要的，而且对于您不能（绝对肯定）确保它不包含可能破坏语句的字符的每个参数。如果（任何微小的）怀疑编码/转义参数，或者只是使用准备好的语句。

# android - 通过属性获取 XML 节点的内容

> ID：12109275
> 
> 赞同：0
> 
> 时间：2012-08-24T12:18:02.267
> 
> 标签：android, xml

我有一个这样的 XML 文件：

```
<?xml version="1.0"?>
<settings>
  <mail id="sender">
       <host>content here</host>
       <port>25</port>
       <account>tmt@example.com</account>
       <password>password</password>
  </mail>

  <mail id="receiver">
    <account>tmt@example.com</account>
  </mail>

  <mail id="support">
    <account>tmt@example.com</account>
  </mail>
</settings> 
```

我怎样才能得到`attribute`每个`element`，解析每个的内容`element`并将内容保存在`SharedPreference`

这是我到目前为止所做的：

承包商：

```
 public ReadConfig(Context context, ProgressBar progressBar) throws ParserConfigurationException, SAXException, IOException   {

    this.context = context; 
    this.progressBar = progressBar;

    folders = new CreateApplicationFolder();
    dbf = DocumentBuilderFactory.newInstance();
    db = dbf.newDocumentBuilder();
    doc = db.parse(new File(folders.getPathToNode() + "/settings_config.xml")); 
    doc.getDocumentElement().normalize(); 

} 
```

还有我的`doInBackground`方法

```
@Override
protected String doInBackground(String... params)  {

        Log.i("ROOT NODE: ", doc.getDocumentElement().getNodeName()); 

    NodeList listOfMail = doc.getElementsByTagName("mail"); 
    int totalMail = listOfMail.getLength(); 
    Log.i("LENGTH: ", Integer.toString(totalMail)); 

    for(int i = 0; i < totalMail; i++) {

        Node firstMailSetting = listOfMail.item(i);
    }
} 
```

从`LogCat`我知道有三个`elements`，这是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:22:07.553

```
import org.w3c.dom.Element;

for(int i = 0; i < totalMail; i++) {
        Node firstMailSetting = listOfMail.item(i);
        Element e = (Element) firstMailSetting ;
        String acc = getTagValue("account", e); <-----
    }

private String getTagValue(String sTag, Element eElement) {
    try {
         NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();
         Node nValue = (Node) nlList.item(0);
         return nValue.getNodeValue();
        } 
    catch (Exception e) {
            return "";
        }

    } 
```

# cakephp - 布局中的布局

> ID：12109276
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:18:03.290
> 
> 标签：cakephp, view, cakephp-2.1

我有一个总体布局。( `default`) 但是对于用户页面，我应该为每个页面添加一个面板。

我试过`$this->renderLayout('panel_code', 'default');`了，但没有用；并打印默认布局视图`view`内容！没有`panel_code`！

我的错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:31:33.900

您应该在带有扩展名的`View/Elements`文件夹中创建元素。`.ctp`

[此链接](http://book.cakephp.org/2.0/en/views.html#elements)将帮助您将视图文件与相关/重复的代码完全分离。

元素基本上是一个迷你视图，可以包含在其他视图、布局甚至其他元素中。元素可用于使视图更具可读性，将重复元素的渲染放置在其自己的文件中。它们还可以帮助您在应用程序中重用内容片段。

元素位于 /app/View/Elements/ 文件夹中，并具有 .ctp 文件扩展名。它们是使用视图的元素方法输出的：

```
<?php echo $this->element('helpbox'); //without extension ?> 
```

您可以将变量从视图传递给元素。

在您看来：

```
 <?php echo $this->Element('reviews/view-goal', array('history' => $history)); 
```

在 view-goal.ctp 元素中，您可以直接访问`$history`变量。

# mysql - 带约束的 Mysql 准备语句

> ID：12109277
> 
> 赞同：0
> 
> 时间：2012-08-24T12:18:08.313
> 
> 标签：mysql, stored-procedures

我有一个表结构如下

```
CREATE TABLE `eatables` (
    `Sno` int(11) NOT NULL auto_increment,
    `Name` varchar(255) collate latin1_general_ci default NULL,
    PRIMARY KEY  (`Sno`)
); 
```

该表包含如下行

```
insert into `eatables`(`Sno`,`Name`) values (1,'Apples');
insert into `eatables`(`Sno`,`Name`) values (2,'Oranges');
insert into `eatables`(`Sno`,`Name`) values (3,'Papaya');
insert into `eatables`(`Sno`,`Name`) values (4,'Jackfruit');
insert into `eatables`(`Sno`,`Name`) values (5,'Pineapple');
insert into `eatables`(`Sno`,`Name`) values (6,'Mango'); 
```

我创建了一个基于名称作为约束来获取计数的过程

```
DROP PROCEDURE IF EXISTS proc_fruit_count;
CREATE PROCEDURE mp_user_preference(pFruitName VARCHAR(255))
BEGIN 
     SELECT @lngCount = COUNT(Sno) 
       FROM eatables
      WHERE Name = pFruitName;

     SELECT @lngCount; 
END 
```

但是我的程序每次执行时都会返回 Null 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:04:50.850

这里不需要存储过程。您可以使用准备好的语句方便地解决这个问题。

```
prepare stmt from 'select count(*) from eatables where name = ?';
set @whatever = 'Mango';
execute stmt using @whatever; /* @whatever replaces the ? in the query above */
/* and if you don't need the prepared statement any more you do... */
deallocate prepare stmt; 
```

[在此处](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)阅读有关准备好的语句的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:22:11.503

你必须修改你的存储过程！您还需要使用 IN 关键字：

```
CREATE PROCEDURE mp_user_preference(IN pFruitName VARCHAR(255))
BEGIN 
     SELECT @lngCount = COUNT(Sno) 
       FROM eatables
      WHERE Name = pFruitName;

     SELECT @lngCount; 
END 
```

见[http://www.mysqltutorial.org/stored-procedures-parameters.aspx](http://www.mysqltutorial.org/stored-procedures-parameters.aspx)

编辑：如果你想返回 lngCount 你可以修改存储过程如下：

```
CREATE PROCEDURE mp_user_preference(IN pFruitName VARCHAR(255), OUT toReturn INT)
BEGIN 
       SELECT @lngCount = COUNT(Sno) 
       FROM eatables
      WHERE Name = pFruitName
      INTO toReturn;

END 
```

# database - 如何使用 Anorm 和 Scala 从数据库中提取二进制信息

> ID：12109278
> 
> 赞同：2
> 
> 时间：2012-08-24T12:18:17.127
> 
> 标签：database, scala, playframework, playframework-2.0, anorm

我将一个字段作为二进制（64）存储在数据库中，并尝试使用使用 Scala 的 Anorm 解析器来提取它。怎么可能呢？

我最感兴趣的是使用 ParserAPI，因为 StreamAPI 记录在这里：[http ://www.playframework.org/documentation/2.0.2/ScalaAnorm](http://www.playframework.org/documentation/2.0.2/ScalaAnorm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:36:25.187

抱歉，我没有时间为您测试它，但这是一个可能的解决方案。

首先定义一个隐式转换器，它能够将列内容转换为字节数组：

```
implicit def rowToByteArray: Column[Array[Byte]] = Column.nonNull { (value, meta) =>
  val MetaDataItem(qualified, nullable, clazz) = meta
  value match 
    case data: Array[Byte] => Right(data)
    case _ => Left(TypeDoesNotMatch("Cannot convert " + value + ":" + value.asInstanceOf[AnyRef].getClass + " to Byte Array for column " + qualified))
  } 
```

然后你可以定义一个合适的行解析器工厂：

```
def bytes(columnName: String): RowParser[Array[Byte]] = get[Array[Byte]](columnName)(implicitly[Column[Array[Byte]]]) 
```

最后只需使用它：

```
val images:List[String~Array[Byte]] = {
  SQL("select * from Image").as( str("name") ~ bytes("data") * ) 
} 
```

# gwt - 如何在 GwtTestCase 测试中使用 Jackson

> ID：12109279
> 
> 赞同：1
> 
> 时间：2012-08-24T12:18:19.130
> 
> 标签：gwt, jackson, gwttestcase

嗨，我正在做一些 GwtTestCase 测试。我想在测试中使用 Jackson ObjectMapper，但是出现以下错误

```
[ERROR] Line 48: No source code is available for type org.codehaus.jackson.map.ObjectMapper; did you forget to inherit a required module? 
```

我知道我需要继承杰克逊的模块，但是我不知道如何实现它。我需要为杰克逊创建模块吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:12:46.537

你不能像这样使用杰克逊。

看看这篇文章：[Json <-> Java serialization that works with GWT](https://stackoverflow.com/questions/683123/json-java-serialization-that-works-with-gwt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T21:31:02.927

存在与 Jackson 2 注释兼容的 GWT JSON 序列化程序：[https ://github.com/nmorel/gwt-jackson](https://github.com/nmorel/gwt-jackson)

# android - Android AppwidgetProvider 从未调用过

> ID：12109287
> 
> 赞同：2
> 
> 时间：2012-08-24T12:18:45.997
> 
> 标签：android, widget

我正在关注这个[http://www.vogella.com/articles/AndroidWidgets/article.html](http://www.vogella.com/articles/AndroidWidgets/article.html)教程。

这是我的 Widetprovider：

```
import java.util.Random;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.RemoteViews;

import com.asco.countdown.R;

public class MyWidgetProvider extends AppWidgetProvider {

  private static final String ACTION_CLICK = "ACTION_CLICK";

  @Override
  public void onEnabled(Context context) {
      Log.d("WID", "enabled");
  }

  @Override
  public void onUpdate(Context context, AppWidgetManager appWidgetManager,
      int[] appWidgetIds) {

      Log.d("WID", "update");

    // Get all ids
    ComponentName thisWidget = new ComponentName(context,
        MyWidgetProvider.class);
    int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
    for (int widgetId : allWidgetIds) {
      // Create some random data
      int number = (new Random().nextInt(100));

      RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
          R.layout.widget);
      Log.w("WidgetExample", String.valueOf(number));
      // Set the text
      remoteViews.setTextViewText(R.id.update, String.valueOf(number));

      // Register an onClickListener
      Intent intent = new Intent(context, MyWidgetProvider.class);

      intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
      intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

      PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
          0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
      remoteViews.setOnClickPendingIntent(R.id.update, pendingIntent);
      appWidgetManager.updateAppWidget(widgetId, remoteViews);
    }
  }
} 
```

这是我的 widgetinfo.xml

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider 
      xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget"
    android:minHeight="72dp"
    android:minWidth="300dp"
    android:updatePeriodMillis="5000000" >

</appwidget-provider> 
```

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver android:name="MyWidgetProvider" >
        <intent-filter>
                 <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="android.appwidget.action.APPWIDGET_ENABLED" />
                <action android:name="android.appwidget.action.APPWIDGET_DELETED" />
                <action android:name="android.appwidget.action.APPWIDGET_DISABLED" />  
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widgetinfo" />
    </receiver>
</application> 
```

显示小部件，但既没有调用 onEnabled() 也没有调用 onUpdate() 方法，onClickListener 也不起作用。我尝试在清单中提供 AppWidgetProvider 的完整路径，将 AppWidgetProvider 放在另一个包中（现在它在默认包中）等等，但没有任何反应，现在我没有想法了。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:25:46.340

尝试在 maifest 中给出全名

```
<receiver android:name="MyWidgetProvider" > 
```

到

```
<receiver android:name="com.asco.countdown.MyWidgetProvider" > 
```

或者什么全名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:23:45.830

好的，在 4.0.3 模拟器和 2.3 设备上进行了测试，都运行良好。我的自定义 4.1 JB rom 似乎有问题。

# asp.net-mvc-3 - MVC3：如何将 HARDCODED 锚标记映射到部署环境的虚拟路径？

> ID：12109294
> 
> 赞同：0
> 
> 时间：2012-08-24T12:19:04.600
> 
> 标签：asp.net-mvc-3, url, iis-7.5, anchor, virtual-directory

我已经在集成模式 .Net4.0 的 IIS 7.5 上部署了 MVC3 网站。我们已经使用下面的锚标记来移动到特定的操作方法。

```
<a href="/Controller/Action">linkText</a> 
```

这些标签在开发环境（在 VS2010 中）中运行良好。但是当我们部署它时，它们不起作用，因为 URL 没有映射到正确的虚拟路径。

如果我们将所有锚标签替换为

```
@Html.ActionLink("linkText", "Action", "Controller") 
```

或者

```
@Url.Action("linkText", "Action", "Controller") 
```

比它工作正常。

但是这种改变需要在很多地方进行。**有什么办法可以让我们在最少的地方进行更改并开始工作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:24:10.993

我认为添加**〜**将解决您的问题。

```
<a href="~/Controller/Action">linkText</a> 
```

# command-line - 从 Jenkins 上的执行 shell 运行 Jmeter

> ID：12109305
> 
> 赞同：0
> 
> 时间：2012-08-24T12:19:33.480
> 
> 标签：command-line, maven-2, jenkins, jmeter

在构建 maven 项目后，我想独立运行 jmeter 测试。我转到 jmeter bin 文件夹并执行：

```
jmeter -n -t $jmxFile -l $jtlFile 
```

但我得到了错误：

```
/tmp/hudson2322728548480325736.sh: line 7: jmeter: command not found
Build step 'Execute shell' marked build as failure 
```

我可以使用哪些命令？

假设我在一个特定文件夹下有 jmx 文件。如果有其他方法可以运行这些测试，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:18:56.217

确保 jmeter 在运行 jenkins 路径的用户上。另一种选择是将完整路径放入 jmeter。第三个使用 maven 插件，请参阅：

*   [JMeter 使用什么 maven 插件？jmeter-maven-plugin 还是 chronos-jmeter-maven-plugin？](https://stackoverflow.com/questions/11740920/what-maven-plugin-is-to-be-user-for-jmeter-jmeter-maven-plugin-or-chronos-jmete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:09:53.877

您还可以查看我们如何将 JMeter 测试添加到 Jenkins：

[http://ibalosh.tumblr.com/post/35475979058/running-jmeter-tests-with-jenkins](http://ibalosh.tumblr.com/post/35475979058/running-jmeter-tests-with-jenkins)

可能会帮助伊戈尔

# mysql - mySQL用指定的列列表替换视图中的通配符

> ID：12109306
> 
> 赞同：0
> 
> 时间：2012-08-24T12:19:36.213
> 
> 标签：mysql, view

创建视图（简化）后如下：

```
create view testView as
select t1.* from table1 t1
join table2 t2 on t1.id = t2.id
where t1.value = someValue 
```

尝试编辑它时，通配符已替换为表的实际列名。

这对我来说很烦人，因为当新列添加到表中时，我需要手动将它们添加到视图中，或者保存创建脚本，然后在表修改后重新执行它。

有没有办法保留通配符进行编辑？在 MSSQL 中，通配符在编辑视图时被保留，我可以简单地执行 sp_refreshview [viewname] 来更新视图以包含表中的任何新列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:22:09.923

来自[MySQL](http://dev.mysql.com/doc/refman/5.1/en/index.html)[`CREATE VIEW`](http://dev.mysql.com/doc/refman/5.1/en/create-view.html)文档：

> 视图定义在创建时被“冻结”，因此之后对基础表的更改不会影响视图定义。例如，如果将视图定义为`SELECT *`在表上，则稍后添加到表中的新列不会成为视图的一部分。

所以简短的回答是否定的，你不能保留通配符。

# android - 如何在活动之间滑动（我的代码哪里错了？？？）

> ID：12109307
> 
> 赞同：1
> 
> 时间：2012-08-24T12:19:36.503
> 
> 标签：android, android-viewpager, swipe

我有 4 个活动，有 4 个类和 xml 布局；我想在 4 个活动之间滑动！！我使用另一篇文章中的这段代码（这篇文章：[网格布局上的 Fling 手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)）

我想在打开新活动时触摸 leftToright 或 rightToleft 滑动。

我的代码哪里错了：

我的代码：

```
package com.package110.Y;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log; 
import android.view.MotionEvent;
import android.view.View;

public class ActivitySwipeDetectorActivity extends Activity {
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

 // how to set this 3 line to in my code Or change or update it        

 //ActivitySwipeDetector activitySwipeDetector = new ActivitySwipeDetector(this);
 //lowestLayout = (RelativeLayout)this.findViewById(R.id.lowestLayout);
 //lowestLayout.setOnTouchListener(activitySwipeDetector);

   }

    public class ActivitySwipeDetector implements View.OnTouchListener {

            Intent left = new Intent(getApplicationContext(), left.class);
            Intent right = new Intent(getApplicationContext(), right.class);
            Intent top = new Intent(getApplicationContext(), top.class);
            Intent bottom = new Intent(getApplicationContext(), bottom.class);

        static final String logTag = "ActivitySwipeDetector";
        private Activity activity;
        static final int MIN_DISTANCE = 100;
        private float downX, downY, upX, upY;

        public ActivitySwipeDetector(Activity activity){
            this.activity = activity;
        }

        public void onRightToLeftSwipe(){
            Log.i(logTag, "RightToLeftSwipe!");
            activity.startActivity(right);

        }

        public void onLeftToRightSwipe(){
            Log.i(logTag, "LeftToRightSwipe!");
            activity.startActivity(left);
        }

        public void onTopToBottomSwipe(){
            Log.i(logTag, "onTopToBottomSwipe!");
            activity.startActivity(top);
        }

        public void onBottomToTopSwipe(){
            Log.i(logTag, "onBottomToTopSwipe!");
            activity.startActivity(bottom);
        }

        public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()){
                case MotionEvent.ACTION_DOWN: {
                    downX = event.getX();
                    downY = event.getY();
                    return true;
                }
                case MotionEvent.ACTION_UP: {
                    upX = event.getX();
                    upY = event.getY();

                    float deltaX = downX - upX;
                    float deltaY = downY - upY;

                    // swipe horizontal?
                    if(Math.abs(deltaX) > MIN_DISTANCE){
                        // left or right
                        if(deltaX < 0) { this.onLeftToRightSwipe(); return true; }
                        if(deltaX > 0) { this.onRightToLeftSwipe(); return true; }
                    }
                    else {
                            Log.i(logTag, "Swipe was only " + Math.abs(deltaX) + " long, need at least " + MIN_DISTANCE);
                            return false; // We don't consume the event
                    }

                    // swipe vertical?
                    if(Math.abs(deltaY) > MIN_DISTANCE){
                        // top or down
                        if(deltaY < 0) { this.onTopToBottomSwipe(); return true; }
                        if(deltaY > 0) { this.onBottomToTopSwipe(); return true; }
                    }
                    else {
                            Log.i(logTag, "Swipe was only " + Math.abs(deltaX) + " long, need at least " + MIN_DISTANCE);
                            return false; // We don't consume the event
                    }

                    return true;
                }
            }
            return false;
        }

        }

  } 
```

解释：我的应用程序被强制关闭！我的谷歌 API 适用于 android 3.0；我的应用程序有问题吗？我也尝试了这段代码，它强制关闭！！！！

另一个代码：

```
package ir.package110.Y;

 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.GestureDetector;
 import android.view.GestureDetector.SimpleOnGestureListener;
 import android.view.MotionEvent;
 import android.view.View;

 public class ActivitySwipeDetectorActivity extends Activity {
          private GestureDetector gestureDetector;

          @Override
          public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

              // ...

            gestureDetector = new GestureDetector(new SwipeGestureDetector());
          }

          /* ... */

            Intent right = new Intent(ActivitySwipeDetectorActivity.this.getBaseContext(), right.class);
            Intent left = new Intent(ActivitySwipeDetectorActivity.this.getBaseContext(), left.class);

          private void onLeftSwipe() {
            // Do something
            startActivity(left);

          }

          private void onRightSwipe() {
            startActivity(right);

              // Do something
          }

          // Private class for gestures
          private class SwipeGestureDetector extends SimpleOnGestureListener {
            // Swipe properties, you can change it to make the swipe
            // longer or shorter and speed
            private static final int SWIPE_MIN_DISTANCE = 120;
            private static final int SWIPE_MAX_OFF_PATH = 200;
            private static final int SWIPE_THRESHOLD_VELOCITY = 200;

            @Override
            public boolean onFling(MotionEvent e1, MotionEvent e2,
                                 float velocityX, float velocityY) {
              try {
                float diffAbs = Math.abs(e1.getY() - e2.getY());
                float diff = e1.getX() - e2.getX();

                if (diffAbs > SWIPE_MAX_OFF_PATH)
                  return false;

                // Left swipe
                if (diff > SWIPE_MIN_DISTANCE
                && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    ActivitySwipeDetectorActivity.this.onLeftSwipe();

                // Right swipe
                } else if (-diff > SWIPE_MIN_DISTANCE
                && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    ActivitySwipeDetectorActivity.this.onRightSwipe();
                }
              } catch (Exception e) {
                Log.e("YourActivity", "Error on gestures");
              }
              return false;
            }
          }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:28:14.780

我认为最好的方法是一个 Activity 和 4 个片段，一个 ViewPager。

您可以查看有关片段的链接： [http ://androidcookbook.com/Recipe.seam;jsessionid=A2DD7A11C804B7C7646DCA883AA452FC?recipeId=1160](http://androidcookbook.com/Recipe.seam;jsessionid=A2DD7A11C804B7C7646DCA883AA452FC?recipeId=1160)

而这一篇关于 ViewPager：http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T17:07:50.813

你**应该**使用`Fragment`s。它使导航更清洁。

`Fragment`s 在 an 内部运行`Activity`，并且可以像`Activity`!

这是一些代码。

**`Activity`持有`Fragment`s**

*（标签和`ActionBar`可以隐藏）*

```
public class Activity extends FragmentActivity implements ActionBar.TabListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.ScoreBoardStyles);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_pager);
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in
        // the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the activity.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding
        // tab. We can also use ActionBar.Tab#select() to do this if we have
        // a reference to the Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            actionBar.addTab(actionBar.newTab()
                    .setCustomView(t)
                    .setTabListener(this));
        }
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            Fragment fragment = null;
            if (position == 0) {
                fragment = new FirstFragment();
            }
            if (position == 1) {
                fragment = new SecondFragment();
            }
            if (position == 2) {
                fragment = new ThirdFragment();
            }
            if (position == 3) {
                fragment = new FourthFragment();
            }
            return fragment;
        }

        @Override
        public int getCount() {
            return 4;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            switch (position) {
                case 0:
                    return getString(R.string.title_section1).toUpperCase(l);
                case 1:
                    return getString(R.string.title_section2).toUpperCase(l);
                case 2:
                    return getString(R.string.title_section3).toUpperCase(l);
                case 3:
                    return getString(R.string.title_section4).toUpperCase(l);
            }
            return null;
        }
    }

    /**
     * A placeholder fragment containing a simple view.
     */
    public static class PlaceholderFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        private static final String ARG_SECTION_NUMBER = "section_number";

        /**
         * Returns a new instance of this fragment for the given section
         * number.
         */
        public static PlaceholderFragment newInstance(int sectionNumber) {
            PlaceholderFragment fragment = new PlaceholderFragment();
            Bundle args = new Bundle();
            args.putInt(ARG_SECTION_NUMBER, sectionNumber);
            fragment.setArguments(args);
            return fragment;
        }

        public PlaceholderFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_layout, container, false);
            return rootView;
        }
    }

} 
```

**一个例子`Fragment`**

```
public class FirstFragment extends Fragment {

    public ScoreFragment() {
        // Required empty public constructor
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.first_layout, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        // YOUR CODE HERE
    }
} 
```

**如果你正在使用`AndroidStudio`！**

1.  右键单击您的 com.blah.bleh
2.  去新的
3.  选择新建`TabbedActivity`（选择底部的导航样式）

然后创建你`Fragment`的 s

1.  右键单击您的 com.blah.bleh
2.  去新的
3.  选择`Fragment`并选择您的`Fragment`类型

`Activity`在此处设置您班级的布局

```
 @Override
    public Fragment getItem(int position) {
        Fragment fragment = null;
        if (position == 0) {
            fragment = new FirstFragment();
        }
        if (position == 1) {
            fragment = new SecondFragment();
        }
        if (position == 2) {
            fragment = new ThirdFragment();
        }
        if (position == 3) {
            fragment = new FourthFragment();
        }
        return fragment;
    } 
```

希望有帮助！

# memory-leaks - 使用cfimage和cfxml时防止内存泄漏？

> ID：12109312
> 
> 赞同：0
> 
> 时间：2012-08-24T12:20:12.610
> 
> 标签：memory-leaks, coldfusion, cfimage

我正在`coldfusion8/mysql 5.0.88`使用 Jquery Mobile 的前端创建一个站点。我还使用了[photoswipe.js](http://www.photoswipe.com/)插件，它允许在单独的视图层中缩放和浏览图像。

要设置 photoswipeable 图像，我需要输出

```
<cfoutput>
<a class="swipeMe" rel="external" href="#variables.imageSrc#">
    <img src="#variables.imageSrc#" class="adaptImg ui-li-thumb" />
</a>
</cfoutput> 
```

问题是`imageSrc`由用户提供的，因此我必须在显示图像之前抓取/验证/调整图像大小，并且我需要照片滑动链接的图像路径。

我一直在摆弄这个，并提出了以下解决方案：

```
 // read img from user specs
 <cfimage name="myImage" source="#bildpfad##bilddateiname#" action="read" />
 <cfif IsImage(myImage) is true>
      // resize
      <cfscript>
           ImageSetAntialiasing(myImage,"on");
           variables.breite = 400;
           ImageScaleToFit(myImage, variables.breite,"", "highestPerformance");
      </cfscript>
      // write to xml, so I can get the path
      <cfxml variable="imageXml">
           <cfimage quality=".5" action="writetobrowser" source="#myImage#" class="adaptImg ui-li-thumb"/
      </cfxml>
      <cfset variables.imageSrc = imageXml.xmlRoot.xmlAttributes.src>
      // output
      <cfoutput>
         <a class="swipeMe" rel="external" href="#variables.imageSrc#">#imageXml#</a>
      </cfoutput>
 </cfif> 
```

虽然这很有效，但它几乎使应用程序停滞不前，而且内存似乎也泄漏了，因为我在运行它时失去了越来越多的内存。

**问题**：
上述代码是否有任何明显的问题导致内存泄漏？我想象图像正在被写入某种临时目录（CFFileservelet？​​）并在那里停留一段时间阻塞我的记忆。如果是这样，在图像搜索中处理这个问题的替代方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:27:07.860

为什么不在您的服务器上创建一个 /tmp 文件夹，然后在其中写入经过处理的图像，例如：

```
<cfset newImageName=CreateUUID()&".jpg">
<cfimage action="write" destination="/tmp/#newImageName#" source="#myImage#"> 
```

然后你可以使用它：

```
 <cfoutput>
     <a class="swipeMe" rel="external" href="/tmp/#newImageName#"><img src="/tmp/#newImageName#" class="..."></a>
  </cfoutput> 
```

用于删除临时文件的示例计划任务：

```
<cfdirectory action="LIST" directory="#expandpath('tmp/')#" name="tempfiles" filter="*.jpg">
<cfloop query="tempfiles">
    <cfif dateadd('h',24,dateLastModified) lt now()>
        <cffile action="DELETE" file="#expandpath('tmp/')##name#">
    </cfif>
</cfloop> 
```

# mysql - BETWEEN 运算符在 MySQL 中工作错误

> ID：12109315
> 
> 赞同：1
> 
> 时间：2012-08-24T12:20:13.790
> 
> 标签：mysql, between

我有一个包含`BETWEEN`运算符的查询，但它显示错误的结果

我的查询-

```
SELECT * FROM register WHERE height BETWEEN  '1' AND  '6' 
```

它还显示高度为 10、12 和 16 的用户是错误的。这个查询有什么问题？
我有另一个查询，它工作正常，但不是正确的使用方式，因为它使查询冗长

```
SELECT * FROM register WHERE height > 1 AND height < 12 
```

给我一个获取查询的正确方法的想法，就好像添加了更多条件一样，查询很难理解和编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:23:26.927

假设高度是一个整数不应该是

```
SELECT * FROM register WHERE height BETWEEN 1 AND 6 
```

你不需要单引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:42:00.957

如果：
1\. 您不能或不想更改列类型
2\. 字段中的字符只是数字

您可以将查询更改为：

```
SELECT * 
FROM register 
WHERE CONVERT(height, UNSIGNED INTEGER) BETWEEN 1 AND 6 
```

请参阅[此 SQL fiddle](http://sqlfiddle.com/#!2/460d7/4)中的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:26:58.957

检查列“高度”的数据类型，它应该是 int、float 或 double，如果它在上面，请运行以下查询

```
SELECT * FROM register WHERE height BETWEEN 1 AND 6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:39:44.137

如果高度字段不是数字，您可以在进行比较之前对其进行转换。

```
SELECT * FROM register WHERE CONVERT(height, unsigned) BETWEEN 1 AND 6 
```

# asp.net - 基于asp GridView中的查询结果显示图像

> ID：12109317
> 
> 赞同：0
> 
> 时间：2012-08-24T12:20:17.557
> 
> 标签：asp.net

我正在寻找一种方法：如果 Gridview 包含结果，则不显示结果，而是显示可点击的图像，它将引导我到带有结果的新页面（我猜这是在图像的属性中）。如果gridview 为空，则显示另一个图像。如果我使用的gridview为空，我知道该怎么做

但我想知道**如果 gridview 不为空如何显示图像**。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:39:35.977

```
<a href='<%# String.Format("{0}{1}{2}{3}{4}{5}{6}  {7}8}",Eval("CourseName"),"/","Colleges","/",Eval("StateName").ToString().Replace(" ", "-"),"/",Eval("CityName").ToString().Replace(" ", "-"),"/",Eval("CollegeName").ToString().Replace("-", "=").Replace(" ", "-").Replace("..","--")) %>' rel="canonical" title='<%# Eval("CollegeName")%>'>
            <img Height="50px" ImageUrl='<%# String.Format("{0}{1}","\\images\\CollegeImages\\" , string.IsNullOrEmpty(Eval("CollegeImage").ToString()) ?"noImageCollege.jpg":Eval("CollegeImage")) %>' Width="50px" alt='<%# Eval("CollegeName") %>' title='<%# Eval("CollegeName") %>' />
</a> 
```

# internationalization - 在 play2 中将内容繁重的页面内部化到消息文件中似乎很麻烦？

> ID：12109318
> 
> 赞同：1
> 
> 时间：2012-08-24T12:20:26.543
> 
> 标签：internationalization, playframework-2.0

Play2 中的内部化可以通过`Message.get("home.title")`语言文件来完成。当您将一个充满文本内容的页面内化而不仅仅是一个特定的标题或链接时会怎样？

例如，为表示产品信息的长页面执行*Messagefile ：*

```
_First header_ 
Some paragraphs of text
...
_Tenth header_
Tenth paragraph and more text* 
```

**消息文件**

**一种）**
`product.info = "<many paragraphs of text including headers>"`

*或*将一页拆分为 html 元素

**b)**

```
 product.info.h1 = "<first header>"
   product.info.p1 = "<first para>"
   product.info.p2 = "<2nd para>" 
```

对我来说，这两种解决方案听起来都不对。首先，单个键具有巨大的价值似乎是不好的约定，而后者将单个页面分成数十个键听起来也不好。

大型网站通常遵循在 URL*中包含语言****的****惯例www.site.com/en-us/product/1***。所以问题是，我如何以这种方式做，并且以这种方式做的更好吗？我不仅可以很容易地翻译成十几种语言，而且还可以进行几十次布局更改。**

 **我可以使用使用*Messagefile*的全局代码片段来处理具有少量文本且不经常更改的元素，例如导航`/view/global/header/somenavbar.scala.html`，但最终我只有一个复杂的文件夹结构。

另一种方式，一种最佳实践，在 Play 2 中用于内部化而不是消息文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:46:32.840

[在play_authenticate Java 示例](https://github.com/joscha/play-authenticate/tree/master/samples/java/play-authenticate-usage)中查看 Joscha Feth 的解决方案。

有 3 种语言的电子邮件模板，用于*电子邮件确认*、*密码重置*等。

每种“类型”电子邮件的模板 && 每种语言都保存在单个文件中，即：

*   [_password_reset_en.scala.html](https://github.com/joscha/play-authenticate/blob/master/samples/java/play-authenticate-usage/app/views/account/email/_password_reset_en.scala.html)
*   [_password_reset_de.scala.html](https://github.com/joscha/play-authenticate/blob/master/samples/java/play-authenticate-usage/app/views/account/email/_password_reset_de.scala.html)
*   [_password_reset_pl.scala.html](https://github.com/joscha/play-authenticate/blob/master/samples/java/play-authenticate-usage/app/views/account/email/_password_reset_pl.scala.html)
*   [_verify_email_en...](https://github.com/joscha/play-authenticate/blob/master/samples/java/play-authenticate-usage/app/views/account/email/_verify_email_en.scala.html)等

对于每个“类型”，都有一个“父”模板，其中包含一个条件（常见的 Scala`match` [检查模板文档的**标签**部分](http://www.playframework.org/documentation/2.0.2/JavaTemplateUseCases)），该条件根据检测到的语言返回渲染视图：

*   [password_reset.scala.html](https://github.com/joscha/play-authenticate/blob/master/samples/java/play-authenticate-usage/app/views/account/email/password_reset.scala.html)

Finally, yes, at the beginning I also thought that some kind of madness, but believe me, that technique can be useful. There's field for further improvements I think. Maybe it would be better to move the language conditioning to the controller, hm I think that depends on many factors and it will be great if you'll find a time to investigate this topic.**

# c# - 在 c# winforms 中制作 Numpad 不起作用

> ID：12109326
> 
> 赞同：1
> 
> 时间：2012-08-24T12:20:51.573
> 
> 标签：c#, winforms, keyboard, keyboard-events

```
private void btnPress_Click(object sender, EventArgs e)
    {
        String key = ((Button)sender).Text;
        InputSimulator.SimulateTextEntry(key);
        SendKeys.SendWait(VirtualKeyCode.NUMPAD4.ToString());
    }

[DllImport("user32.dll")]
    public static extern int SetForegroundWindow(IntPtr hWnd);

    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new KeyPress());
    } 
```

![我的表单布局](../Images/41c49d79af55654b394c6043b1a4ec62.png)

这件事没有任何帮助。当我单击我的文本框并单击 ont button1 时，此处不会出现 1.. 并且文本框焦点也丢失了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:45:52.260

好吧，如果我得到你，你需要类似的东西

```
private TextBox _lastFocused; defined in your form 
```

然后将 OnEnter 或 OnExit 添加到每个参与的文本框设置 _lastFocused，这样您就知道您希望按键转到哪个控件

然后在你的 buttonClick(s)

```
String key = ((Button)sender).Text;
_lastFocused.Focus();
InputSimulator.SimulateTextEntry(key);
SendKeys.SendWait(VirtualKeyCode.NUMPAD4.ToString()); 
((Button)sender).Focus(); // if you want to out focus back the button clicked 
```

据我所知，正在发生的事情是单击按钮会将焦点从您所在的任何文本框转移到按钮上。Sendkeys 将您的模拟按键路由到当前聚焦的控件，这当然是您的按钮。所以解决方法就是将焦点转移回你上次来自的地方。

# ssl - 通配符子域的 SSL

> ID：12109329
> 
> 赞同：1
> 
> 时间：2012-08-24T12:21:06.103
> 
> 标签：ssl, dns, wildcard-subdomain

我正在尝试设置通配符子域。所以我的域名是 www.mydomain.com，所以任何类似 test.mydomain.com、welcome.mydomain.com 的东西都可以使用，这很好。

谈到 SSL，如果我为 www.mydomain.com 购买 SSL，那么相同的 SSL 证书是否适用于 test.mydomain.com、welcome.mydomain.com？因为它们不是真正的子域，只是虚拟的。

如果不需要，我是否需要购买通配符 SSL？

如果我认为从技术上讲，所有通配符子域都将指向相同的根文件夹和 IP。从那里使用我的代码，我将提供不同的内容。在这种情况下，我的 www.mydomain.com 的 SSL 证书也适用于 test.mydomain.com 对吗？我不知道。

任何猜测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:57:18.843

SSL 证书中的 NAME 必须与站点的域名完全匹配。您需要通配符证书。非通配符将产生错误站点警告。

# extjs4.1 - ExtJs 4.1.1 为 MVC 应用程序自定义构建 - 应用程序不运行

> ID：12109339
> 
> 赞同：0
> 
> 时间：2012-08-24T12:21:47.563
> 
> 标签：extjs4.1, extjs-mvc

在尝试为应用程序创建自定义构建时，我遵循了以下步骤 - 1\. 在 index.html 标头中添加了以下内容

```
<script type="text/javascript" src="ext/ext-debug.js"></script>
<script type="text/javascript" src="app.js"></script> 
```

我的 app.js 文件如下所示 -

```
Ext.application({
    name                : 'App',
    requires            : [
        'Ext.*',
        'App.view.Viewport'
    ],
    autoCreateViewport  : true,
    controllers     : [ 'MainController' ]
}); 
```

之后，我运行以下命令

```
sencha create jsb -a http://127.0.0.1/index.html -p app.jsb3
sencha build -p app.jsb3 -d . 
```

一旦创建了 app-all.js 文件，我将标题修改为如下所示 -

```
<script type="text/javascript" src="ext/ext.js"></script>
<script type="text/javascript" src="app-all.js"></script> 
```

构建似乎正确进行。但是，应用程序只是拒绝运行！

我似乎已经尝试了任何人在网上提到的关于“自定义构建”的所有内容！

任何人都可以帮助或至少为我指明解决方案的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:46:42.903

在问题中所述的示例中，我将 javascript 文件名设置为 app.js

在我的应用程序中，它被称为 myapp.js。当您为 javascript 文件使用自定义名称时，您需要更改“清单”(jsb3) 文件以反映相同的名称。

完成此操作后，一切正常。

[这篇文章](http://blog.lansdowntech.com/2012/02/creating-an-extjs-production-build-with-sencha-sdk-tools/)给出了最详细的说明

# ios5 - 链接器命令失败：重复符号 _applicationFrame

> ID：12109340
> 
> 赞同：0
> 
> 时间：2012-08-24T12:21:58.513
> 
> 标签：ios5, xcode4.3, linker-errors

我正在开发一个通用应用程序，但是在添加一个新类后它给出了链接器错误`[CallScreenViewController]`：

> /Users/msdk/Library/Developer/Xcode/DerivedData/UniversalTest-cxggvelerfpnpgfzfehcwddjtfkd/Build/Intermediates/UniversalTest.build/Debug-iphoneos/UniversalTest.build/Objects-normal/armv7/ChatScreenViewController.o 和 /Users/ 中的重复符号 _applicationFrame msdk/Library/Developer/Xcode/DerivedData/UniversalTest-cxggvelerfpnpgfzfehcwddjtfkd/Build/Intermediates/UniversalTest.build/Debug-iphoneos/UniversalTest.build/Objects-normal/armv7/CallScreenViewController.o架构armv7 clang：错误：链接器命令失败退出代码 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:31:17.613

我已经解决了这个问题。CGRect applicationFrame 是链接器错误的原因。因为它在 ChatScreenViewController 和 CallScreenViewController 中都是全局声明的。谢谢菲利普:)

# c# - 如何使用泛型测试 NaN（或者为什么 NaN.Equals(NaN) == true）？

> ID：12109345
> 
> 赞同：4
> 
> 时间：2012-08-24T12:22:12.843
> 
> 标签：c#, iequatable

我需要在**数组中找到****最小值**和**最大值**（不考虑该数组中可能的**NaN**值）。

 ****这很容易只使用`double`，但是这些 FindMin 和 FindMax 函数必须使用泛型类型。

我试图以这种方式测试*通用*NaN：

```
bool isNaN<T>(T value) where T : IEquatable<T>
{
    return !value.Equals(value);
} 
```

但是`Equals`回来`true`了`double.NaN`？？！！

我现在有这样的解决方法：

```
bool isNaN<T>(T value) where T : IEquatable<T>
{
    var d = value as double?;
    if (d.HasValue) { return double.IsNaN(d.Value); }

    return !value.Equals(value);
} 
```

我的问题更多是关于理解为什么第一个解决方案不起作用，这是一个错误吗？

[你可以在这里](https://gist.github.com/3449954)找到小的测试代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T12:38:19.800

我会简单地使用`double.IsNaN`并让编译器`float`在需要时隐式转换成员：

```
float myFloat = float.NaN; // or 0.0f / 0.0f;
double myDouble = double.NaN; // or 0.0 / 0.0;

Console.WriteLine(double.IsNaN(myFloat));
Console.WriteLine(double.IsNaN(myDouble)); 
```

“浪费”堆栈上的极少量内存并使用强制转换操作调用，但是嘿嘿，它*足够*通用，可以满足任何可以容纳“数字”NaN 的类型。

或者， using`float.IsNaN`似乎可以与基本测试一起使用，但需要对 a 进行明确的向下转换`double`（向下转换`double.NaN`并且`0.0 / 0.0`似乎可以正常工作，如它`NaN`正确报告）。

[您通常不能以任何清洁度（或者根本，我不是 100% 确定）限制值类型的子集，因此我不会费心`<T>`亲自追逐路线。]

* * *

如果您想要一个通用解决方案，这意味着被调用者不需要关心传入的内容，您可以执行以下操作：

```
 static bool IsNaN(dynamic d)
    {
        float dub;

        try
        {
            dub = (float)d;
            return float.IsNaN(dub);
        }
        catch (RuntimeBinderException)
        {
        }

        return false;
    } 
```

但是，这会引起拳击。另请注意，这`dynamic`是必需的并且`object`不起作用，因此这也会调用 DLR（并且还会吞下所有`RuntimeBinderException`s）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T12:27:00.983

> 但 Equals 为 double.NaN 返回 true

是的。它确实与泛型无关：

```
double x = double.NaN;
Console.WriteLine(x.Equals(x)); // True
Console.WriteLine(x == x); // False 
```

请注意，如果第二行打印为 False，那将导致与覆盖[`IEquatable<T>.Equals`](http://msdn.microsoft.com/en-us/library/ms131190.aspx)不一致，*或者*您必须违反.`Equals(object)`*`Equals(object)``object.Equals(object)`*

 *基本上这种事情是讨厌的，无论你用它做什么。

鉴于您正在尝试查找最大值/最小值，您可能想尝试使用`IComparable<T>`而不是`IEquatable<T>`- 这很可能让您以其他方式检测 NaN。（我现在没有时间检查。）*****

# asp.net - 禁用 ACS Web Api 项目

> ID：12109348
> 
> 赞同：0
> 
> 时间：2012-08-24T12:22:39.897
> 
> 标签：asp.net, asp.net-web-api, acs

我在我的 WebApi 项目中使用 ACS

当我尝试打开任何页面时，我被重定向到认证页面（liveId、yahoo 或 gmail）

我想禁用某些页面或控制器的身份验证

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:33:56.320

这可以通过使用`[AllowAnonymous]`方法上的属性来完成。

例如：

```
[Authorize]
public class AccountController : Controller
{
    [AllowAnonymous]
    public ActionResult Login()
} 
```

您可以在此博客文章中阅读有关此属性的更多信息：
[保护您的 ASP.NET MVC 4 应用程序和新的 AllowAnonymous 属性](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx)

# java - 从互联网阅读时出现双 \\

> ID：12109352
> 
> 赞同：0
> 
> 时间：2012-08-24T12:23:06.297
> 
> 标签：java, encoding, character

我正在从无法访问的外部服务器读取一些信息，我不知道编码，并且遇到了一些字符问题，例如`í`. 我所做的是使用下面的代码发出 POST 请求，然后我解析它。

```
String response = "";
URL url = new URL(pURL);
URLConnection uc = url.openConnection();
if (sid!=null) uc.setRequestProperty("Cookie", sid);
uc.setDoOutput(true);
OutputStreamWriter osw = new OutputStreamWriter(uc.getOutputStream());
osw.write(request);
osw.flush();
InputStreamReader isr = new InputStreamReader(uc.getInputStream(), "UTF8");
BufferedReader br = new BufferedReader(isr);
String content;
while ((content = br.readLine())!=null){
  response += content;
}
br.close();
osw.close(); 
```

此时，如果我打印它显示的字符串 a `\\`，我的意思是，`í`而不是`\u00ed`出现`\\\u00ed`，如果我将响应字符串转换为 char 数组，我可以看到它没有正确转换，而是分为 6 个 chars `\\\\, u, 0, 0, e, d`。

我试图更改 InputStreamReader 所在的编码，以替换字符和一些正则表达式，但没有一个起作用。有没有人有这个问题，可以帮助我吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:30:08.930

不知道为什么响应是这样格式化的，但是您可以将字符串转换`\u00ed`为`í`using [`StringEscapeUtils`](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#unescapeJava%28java.lang.String%29)，如下所示：

```
String input = "\\u00ed";
String unescaped = StringEscapeUtils.unescapeJava(input);
System.out.println(unescaped); 
```

**输出：**

```
í 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:43:09.863

```
response.replaceAll("\\","\"); 
```

# php - 无法使用 PHP 正确回显代码

> ID：12109353
> 
> 赞同：0
> 
> 时间：2012-08-24T12:23:07.373
> 
> 标签：php, nested, conditional, user-agent

我正在尝试建立一个条件系统，它以编程方式检测浏览器（使用`USER_AGENT`字符串）和平台（使用 PHP-Mobile-Detect）。我当前的设置大致如下：

```
<DOCTYPE html>
<html>
<head>
<?php
include("Mobile_Detect.php");
$detect = new Mobile_Detect();
?>
    <?php if($detect->isiPad()) {
        echo '<link rel="stylesheet" href="/style/iPad.css" type="text/css">';
    }

    else 
    {
        echo '<meta charset="UTF-8">
        <link rel="stylesheet" href="/style.css" type="text/css">;
        if (strpos($_SERVER['HTTP_USER_AGENT'], 'Chrome') !== false)
            {
                echo '<link rel="stylesheet" href="../style/splash-webkit.css" type="text/css">';
            }
        //and so on for other browsers
        [etc]'
    } 
```

这里出现的明显问题是 s 之间的冲突`'`。`echo`under不是像我希望的那样在我的标签末尾结束，而是在代码中出现的第一个结束处结束，`else`实际上，它在第一个声明中。我怎样才能绕过这个问题？`<style>``'``USER_AGENT`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T12:25:07.543

您错过了`'`这一行末尾的 a：

```
<link rel="stylesheet" href="/style.css" type="text/css">; 
```

将其替换为：

```
<link rel="stylesheet" href="/style.css" type="text/css">'; 
```

不过，您很好地使用了单引号和双引号。但是，如果您*确实*需要使用相同的引号，您始终可以使用`\`. 例如，这也可以：

```
echo '<meta charset=\'UTF-8\'>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:27:51.337

试试这个然后让我知道

```
else 
{
echo '<meta charset="UTF-8"><link rel="stylesheet" href="/style.css" type="text/css">';
if (strpos($_SERVER['HTTP_USER_AGENT'], 'Chrome') !== false)
{
echo '<link rel="stylesheet" href="../style/splash-webkit.css" type="text/css">';
}
//and so on for other browser
} 
```

# php - 将 php 结果传递到另一个网站。

> ID：12109354
> 
> 赞同：0
> 
> 时间：2012-08-24T12:23:15.760
> 
> 标签：php, javascript, html

所以我想做的是：

在我的服务器上，用户可以将 YouTube 频道名称放在那里。然后我的 php 文件将解析频道并输出带有结果的 HTML 代码。我要做的是让用户能够在该网站上放置一个代码，直到在我的网站上调用之前，可以说`youtubevideos.com/videos.php?channel=channelname`我的代码将采用该名称并将视频输出回该网站。我猜很像谷歌广告。

任何想法如何完成，除了 iframe，我认为这将是我最后的手段。

我想我正在寻找什么，如果他们将 JavaScript 放在那里的站点上，该站点将呈现为我从我的 php 文件中推送的 HTML 代码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:36:39.103

您目标服务器上的接收器代码需要设置这样的标头：

```
"Access-Control-Allow-Origin:*" 
```

因此，如果您提供需要与您的服务器和您的代码交换的服务，是否有可能。如果您无法编辑目标代码且未设置标头，则不可能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:07:02.687

这个解决方案有两个部分。

在`videos.php`您服务器上的文件中，您将实现从原始网站抓取数据并以您希望在最终网站上显示的方式对其进行格式化的逻辑。

对于最终用户，您将提供与此类似的代码，他们必须将其粘贴到他们的 php 页面中以显示您网站的内容。

```
$your_website_url="http://youtubevideos.com/videos.php?channel=channelname";
//Don't forget the http:// at the start.

echo file_get_contents($your_website_url); 
```

如果`file_get_contents()`出现安全错误，您可以使用[curl](/questions/tagged/curl "显示标记为“卷曲”的问题")。

我希望这会有所帮助。

# browser - 搜狗浏览器的浏览器引擎是什么？

> ID：12109356
> 
> 赞同：8
> 
> 时间：2012-08-24T12:23:29.440
> 
> 标签：browser

标题几乎说明了一切。我正在为一个服务于中国庞大客户群的客户进行开发，因此我需要确保该网站在本地中文浏览器中运行。我遇到了搜狗浏览器的问题（我在今天之前从未听说过）。为了在我更熟悉的环境中解决这些问题，我想看看是否可以在使用相同引擎的另一个浏览器中重现这些问题。如果我知道那是什么引擎就好了……</p>

更新：

据我了解，搜狗是一款双引擎浏览器。一个引擎是 Webkit，另一个应该是 Trident，特别是 IE9 中的版本。然而，这与我所看到的并不相符，因为该页面的呈现方式明显与 IE9 中的不同。也许是怪癖模式下的IE9？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T14:27:01.020

我已经看到了[一些](http://user-agent-string.info/list-of-ua/browser-detail?browser=Sogou%20Explorer) 对双 Trident/Webkit 引擎的[引用。](https://code.google.com/p/sogou-explorer-bubble/)显然它可以两者兼得；Trident 可能是他们自己的版本，也可能是 Windows 中包含的最新版本。我安装了 IE9，但它的行为类似于 IE7，这是我电脑上的默认设置。可以检测到基于搜狗的浏览器并提供切换到 Webkit 引擎，就像[在这个代码示例中](https://code.google.com/p/sogou-explorer-bubble/)一样。

**从 Trident 用户代理字符串：**

> Mozilla/4.0（兼容；**MSIE 7.0**；Windows NT 6.1；WOW64；Trident/5.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；.NET4.0C；InfoPath.3 ; 媒体中心 PC 6.0; SE 2.X MetaSr 1.0

现在我只是猜测这意味着它在呈现网页时[默认使用 IE7 标准模式。](http://blogs.msdn.com/b/ie/archive/2010/03/23/introducing-ie9-s-user-agent-string.aspx)但话又说回来，IE也不喜欢一直报告同一个用户代理......

**从 Webkit 用户代理字符串（看起来像搜狗品牌）：**

> Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/14.0.802.30 Safari/535.1 SE 2.X MetaSr 1.0

我可以在这里很容易地更改用户代理。“高速”[大致翻译](https://translate.google.com/#auto/en/%E9%AB%98%E9%80%9F)为“高速”。

![搜狗用户代理切换器位置](../Images/a50cc160debf63ead8f14e9f56e0ff89.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:37:17.747

我不知道这些信息有多可靠，但 channel9.msdn.com 有[一个页面](http://channel9.msdn.com/Forums/Coffeehouse/521915-China-Sogou-Browser-20-preview-release-fusion-Webkit-core-to-create-high-speed-browsing-experience)表明它是（或将是？）Webkit 引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-09T15:20:34.183

中文双引擎浏览器有webkit和Trident。他们默认使用 webkit，并使用 Trident 作为兼容模式。显然，以 IE 为中心的网站存在很多问题。我认为这在很大程度上已经过去了。例如，Maxthon 在版本 3+ 中删除了 Trident 引擎

# c - 如何使用按位运算将结构值分配给其他结构值？

> ID：12109358
> 
> 赞同：-4
> 
> 时间：2012-08-24T12:23:32.240
> 
> 标签：c, struct, bit-manipulation

我有一个结构如下

```
struct A
{
  char x;
  int y;
  short z;
}a;

struct B
{
  char ch;
}b;

struct C
{
  int in;
}c;

struct D
{
  short sho;
}d; 
```

我必须仅通过使用按位操作来分配（ax 到 b.ch）、（ay 到 c.in）、（az 到 d.sho）。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:37:22.663

这是不可能的，你不能使用按位运算符分配任何东西，你的任务没有任何意义。（运算符 |= &= 等不是按位运算符，它们是赋值运算符，请参阅 C11 6.5.16。）

此外，您不应该编写类似`a & 0x00FFFFFFFF`并期望屏蔽变量 ay 的代码，因为编译器可以自由地在结构内的任何位置添加任意数量的填充字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:27:58.303

对于任何 a 和 x（具有相等的位长）：

```
x = ((a & x) | x) 
```

# c# - 多行#warning 指令是否可能？

> ID：12109360
> 
> 赞同：6
> 
> 时间：2012-08-24T12:23:41.513
> 
> 标签：c#, warnings

[我在这里](http://codeidol.com/csharp/essential-csharp/Operators-and-Control-Flow/Csharp-Preprocessor-Directives/)读到“每个预处理器指令都以井号 (#) 开头，并且所有预处理器指令必须出现在一行上。换行符而不是分号表示指令的结尾。”

但我想知道是否有创建多行#warning 的技巧，因为在某些代码的早期阶段，我正在编写一个跨越屏幕宽度的警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-04T17:23:54.297

从[http://msdn.microsoft.com/en-us/library/ed8yd1ha.aspx](http://msdn.microsoft.com/en-us/library/ed8yd1ha.aspx)：

```
A preprocessor directive must be the only instruction on a line. 
```

所以，这是不可能的。

# linux - 使用 linux shell 计算平均值并使用其标签搜索最大值

> ID：12109364
> 
> 赞同：0
> 
> 时间：2012-08-24T12:24:14.230
> 
> 标签：linux, label, average, max

我有如下输入

```
*KEYWORD
$TIME_VALUE = 9.9999993e-004
$STATE_NO = 2
$Output for State 2 at time = 0.001
*END
$NODAL_RESULTS
$RESULT OF Resultant Displacement
721810 1.7188E-2
721812 6.1973E-2
721825 1.1481E+0
721827 1.0962E+0
721852 5.1831E-1
721854 1.3085E-2
721867 1.1077E+0
 .        .
 .        .
 .        . 
```

我需要找到第 2 列中的最大值及其平均值。然后我还需要输出代表最大值的第一列中的数字。

我使用以下代码计算最大值和平均值，但是除以零。

```
awk: cmd. line:5: fatal: division by zero attempted 
```

代码如下

```
# 1.k is the input file name.
sed  -n '/^[0-9]\{1\}/p' 1.k  > 2.k   # delete all lines not starting with number
mv 2.k 1.k
sed  -i -e '/^$/d' 1.k                # delete all lines that are empty
#sed -i -e  's/^[ \t]*//;s/[ \t]*$//' 1.k  

awk 'BEGIN{min=999}
{a[NR]=$0;if($2<min){min=$2;m[1]=NR;}if($2>max){max=$2;m[2]=NR;}m[2]+=$2;}
END{print "Min:"a[m[1]];
print "Max:"a[m[2]];
print "Number Of Nodes:" NR;
print "Avg:"m[3]/NR}' 1.k 
```

有人可以帮我解决这个问题吗？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:41:27.600

计算.awk：

```
{ 
  sum += $2  
  if (NR == 1)  {   
    min = max = $2
    minv= maxv= $1
  }
  if (min > $2) { min = $2; minv = $1 }
  if (max < $2) { max = $2; maxv = $1 }
}
END { 
  print "Min: " minv ", " min 
  print "Avg: " sum / NR  
  print "Max: " maxv ", " max 
  print "# Nodes: " NR
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:01:16.647

经过尝试和尝试，我找到了一个可行的方法，但我认为这不是问题的最佳解决方案。

```
sed -i -e  's/^[ \t]*//;s/[ \t]*$//' 1.k
sed  -n '/^[0-9]\{1\}/p' 1.k  > 2.k
mv 2.k 1.k
sed  -i -e '/^$/d' 1.k  

awk 'BEGIN{min=999}

{a[NR]=$0;if($2<min){min=$2;m[1]=NR;}if($2>max){max=$2;m[2]=NR;}m[3]+=$2;}

END{     print "Max:"a[m[2]];     
     print "Min:"a[m[1]];     
    print "Number Of Calls:" NR;  
    print "Avg:"m[3]/NR}' 1.k   > result 
```

感谢您宝贵的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T16:59:28.910

尝试简单的-r解决方案：

```
perl -walne 'print $F[1] if /^\d/' | r summary - 
```

Simple-r 是一个 R 包装器，用于在命令行中进行快速统计分析。可以在以下位置找到：

[https://code.google.com/p/simple-r/](https://code.google.com/p/simple-r/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:57:08.987

如果您首先过滤掉非数字信息，那么此`awk`脚本应该执行以下操作：

```
awk 'BEGIN{max=-999}\
{\
  col1[NR]=$1;\
  col2[NR]=$2;\
  if($2>max){max=$2;imax=NR};\
  sum+=$2\
}\
END{print col1[imax]" "col2[imax]" average: "sum/NR}' yourinputfile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T12:38:51.167

Perl 解决方案：

```
<1.k perl -ne 'next unless ($key, $val) = /^([0-9]+)\s+([-+E.0-9]+)/;# Only process the important lines.
               if ($val > $max) {                                    # New maximum.
                   $max = $val;
                   @maxk = $key;
               } elsif ($max == $val) {                              # The maximum appears more than once.
                   push @maxk, $key;
               }
               $sum += $val;
               $count++;
           } {
               print "MAX: $max at @maxk, AVG: ", $sum / $count ,"\n"; ' 
```

# xcode - 如何使用 Xcode 的自动布局调整视图大小

> ID：12109365
> 
> 赞同：6
> 
> 时间：2012-08-24T12:24:16.363
> 
> 标签：xcode, layout, interface-builder, autolayout

我第一次在我有几个 NSPopUpButtons 的项目中使用 Xcode 的自动布局功能。现在我想要实现的是在一行中有两个 popUpButtons 和它们的标签，当窗口调整大小时，我希望两个 popUpButtons 调整它们的宽度，同时保持彼此之间的水平间距。

但是，无论我如何应用约束，我都不会让 popUpButtons 随窗口改变它们的大小。他们总是会打破他们的水平间距限制，只是增加/减少标签的间距。我希望从这个屏幕截图中我可以更清楚地了解我所做的事情：

![在此处输入图像描述](../Images/e0da09825db403dba3f57d3db4dd219e.png)

我已将标签和 popUpButtons 之间的间距设置为具有 1000 优先级的固定值，并将 popUpButtons 的宽度约束设置为大于或等于初始大小。

我必须如何设置我的约束来调整 popUpButtons 的大小？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T12:24:16.363

在写这个问题时，我意识到诀窍是什么：

在 NSPopUpButton 的尺寸检查器中，我不得不减少`Content Hugging Priority`.

![在此处输入图像描述](../Images/bffff3998be9af36bc0c6f4f62c44abf.png)

显然，这控制了视图想要“拥抱”其内容的紧密程度。因此，当拥抱优先级高于调整大小优先级时，视图将不希望增加其大小，因为这意味着在其边界和内容之间有更多的空白空间。

然后在我的特殊情况下，我还可以将两个 NSPopUpButtons 固定为具有相同的宽度和瞧：popUpButtons 将完美地调整大小，同时保持间距不变。

# qt - 如何将 GNU Gettext .po 文件转换为 Qt 的 .ts 文件？

> ID：12109368
> 
> 赞同：10
> 
> 时间：2012-08-24T12:24:45.413
> 
> 标签：qt, localization, translation, gettext, po

是否有工具可以将 GNU Gettext`.po`格式的翻译转换为 Qt 的本机`.ts`格式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T09:24:15.627

今天我[发现](http://qt-project.org/wiki/Qt-Localization)它可以使用`lconvert`Qt 发行版附带的工具来完成，并且已经存在于我的系统上。

所以我只是做了

```
lconvert -locations relative <file>.po -o <file>.ts 
```

它还支持向后转换：

```
lconvert <file>.ts -o <file>.po 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T12:34:14.587

您可以使用专门用于此任务的[po2ts 。](http://translate.sourceforge.net/wiki/toolkit/ts2po)它是[翻译工具包](http://translate.sourceforge.net/wiki/toolkit/installation)的一部分，您可以为您的适当平台下载它。

# objective-c - 推送通知委托方法问题

> ID：12109373
> 
> 赞同：0
> 
> 时间：2012-08-24T12:25:13.350
> 
> 标签：objective-c, ios, push-notification

我是 Objective C 的新手。在我的应用程序中，我需要实现推送通知，我已经创建了新的应用程序 ID，并且我还创建了新的配置文件。我已完成此[链接中提到的所有步骤](http://mobiforge.com/developing/story/programming-apple-push-notification-services)

我已经在我的 appDelegate .m 文件中声明了这个委托函数。

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken { 

        NSString *deviceTokens = [[deviceToken description] stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];
        deviceTokens = [deviceTokens stringByReplacingOccurrencesOfString:@" " withString:@""];
        NSLog(@"registered device token %@", deviceTokens);
        self.deviceToken = deviceTokens; 
}

- (void)application:(UIApplication *)app didFailToRegisterForRemoteNotificationsWithError:(NSError *)err { 

    NSString *str = [NSString stringWithFormat: @"Error: %@", err];
    NSLog(@"String %@",str);    

}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    for (id key in userInfo) {
        NSLog(@"key: %@, value: %@", key, [userInfo objectForKey:key]);
    }    

} 
```

但是这个委托函数没有被调用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:38:05.080

在带有选项的 AppDelegated didfinishLaunching 中写入以下行

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T08:10:11.877

将此代码添加到您的应用程序的 didFinishLaunchingWithOptions 方法中，在您的应用程序委托中

if ([application respondsToSelector:@selector(registerUserNotificationSettings:)]) {

```
 //We check because ios7 cannot respond to this method and there will be a crash..
    UIUserNotificationType types = UIUserNotificationTypeBadge | UIUserNotificationTypeSound | UIUserNotificationTypeAlert;

    UIUserNotificationSettings *mySettings = [UIUserNotificationSettings settingsForTypes:types categories:nil];

    [[UIApplication sharedApplication] registerUserNotificationSettings:mySettings];
    [application registerForRemoteNotifications];
}
else {
    //This will work on ios7 devices and below
    UIRemoteNotificationType types = UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound;
    [application registerForRemoteNotificationTypes:types];
    [application registerForRemoteNotifications];
}

return YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T22:49:12.370

使用新的委托方法

Swift：func 应用程序（应用程序：UIApplication，didReceiveRemoteNotification userInfo：[NSObject：AnyObject]，fetchCompletionHandler completionHandler：（UIBackgroundFetchResult）-> Void）

# c - 将 0 分配给 gcc 扩展程序集中的变量

> ID：12109376
> 
> 赞同：4
> 
> 时间：2012-08-24T12:25:27.353
> 
> 标签：c, assembly, inline-assembly

我有以下代码：

```
#include <stdio.h>
void main(){
    int x=0, y=0,i=100;
    for (;i<1000; i++,x+=32){
        if (x == 25*32) {
            y+=32;
            asm volatile("pushl %%eax\n\t"
                         "movl $0, %%eax\n\t"
                         "popl %%eax\n\t"
                         :"=a"(x)
                         :"a"(0)
                         );
        }
        printf("%d %d\n", x, y);
    }
} 
```

基本上，我想要做的是，将变量 x 设置为 0，但我不太明白汇编代码的作用，它实际上确实将 x 设置为 0，但我不确定发生了什么。有人可以解释发生了什么吗？（只是为了学习汇编和C）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T13:28:31.810

这是您的 asm 构造的内容：

*   在`"=a"(x)`中，您告诉编译器程序集将 ( `=`) 写入 %eax ( `a`) 寄存器，并且您希望编译器将该结果分配给 x ( `(x)`)。
*   在`"a"(0)`中，您告诉编译器您希望它`(0)`在 %eax ( `a`) 中放置一个 0 ( )，程序集会读取它。
*   然后`push %%eax`将 %eax 保存到堆栈中，`movl $0, %%eax`将 0 放入 %eax，并将`popl %%eax`保存的值恢复为 %eax。

所以，会发生什么：

*   编译器将 0 放入 %eax。
*   您的指令将 0 保存在堆栈中，将 0 移入 %eax，然后从堆栈中恢复 0。
*   编译器使用 %eax 中的 0 作为 x 的值。

所以，这行得通，但效率低下。你可以得到同样的效果：

```
asm volatile("movl $0, %[MyName]"
    : [MyName] "=r" (x)
); 
```

这说明了什么：

*   没有输入（因为没有第二个“：”）。
*   和以前一样，`=`告诉编译器这些指令会写一个结果。
*   表示结果将`r`被写入寄存器，但编译器可以选择寄存器。
*   `[MyName]`告诉编译器将它`%[MyName]`在汇编代码中出现的位置更改为编译器选择的寄存器的名称。
*   和以前一样，`(x)`表示使用汇编代码之后的寄存器中的值作为 x 的新值。
*   最后，指令`movl $0, %[MyName]`将 0 移动到以 %[MyName] 命名的寄存器。

因为编译器可以选择寄存器，所以您不必在汇编语言中保存和恢复它。编译器负责确保它不需要该寄存器用于其他任何事情。

能够像我所做的那样命名操作数`[MyName]`是 GCC 中的一个新功能。如果您的版本没有它，您可以这样做：

```
asm volatile("movl $0, %0"
    : "=r" (x)
); 
```

如果没有名称，每个操作数都会有一个数字，从 0 开始，并按照操作数在输入/输出说明符中出现的顺序递增。因为我们只有一个操作数，所以它是 %0。

# asp.net-mvc - 插入空白行

> ID：12109378
> 
> 赞同：0
> 
> 时间：2012-08-24T12:25:32.613
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下代码绑定到 @Html.DropDownListFor ：

**视图模型**

```
 public static UserManagementViewModel CreateCompanyMappingViewModel(List<Company> company)
    {
        UserManagementViewModel viewModel = new UserManagementViewModel();
        viewModel.Companies = new SelectList(company, "CompanyID", "CompanyName");
        return viewModel;
    }
} 
```

**cshtml**

```
@Html.DropDownListFor(model => model.CompanyID, Model.Companies, new { style = "width:300px;" }) 
```

下拉列表绑定成功。我需要的是，在 DropDownList 中插入一个空白行并首先选择它，同时绑定到 DropDownList。如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:30:11.707

您可以使用[以下重载](http://msdn.microsoft.com/en-us/library/ee703670%28v=vs.108%29)：

```
@Html.DropDownListFor(
    model => model.CompanyID, 
    Model.Companies, 
    "-- select a company --", 
    new { style = "width:300px;" }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:32:15.833

@Html.DropDownListFor(model => model.CompanyID, Model.Companies, " ", new { style = "width:300px;" })

# c# - 转换 IEnumerable 到 IQueryable 其中 T 未知

> ID：12109388
> 
> 赞同：6
> 
> 时间：2012-08-24T12:26:11.000
> 
> 标签：c#, generics, reflection

我有一个`BindingSource`who `DataSource`（定义为对象）`IEnumerable`在运行时可以是任何类型的类（例如`IList<Foo>`）。我需要将它转换为一个`IQueryable<T>`，以便我可以将它传递给一个通用扩展：

```
IOrderedQueryable<TEntity> OrderUsingSortExpression<TEntity>(this IQueryable<TEntity> source, string sortExpression) where TEntity : class 
```

到目前为止，我有这个：

```
string order = "Message ASC";
Type thetype = bsTotalBindingSource.DataSource.GetType().GetGenericArguments()[0];
IEnumerable<object> totalDataSource = ((IEnumerable<object>)(bsTotalBindingSource.DataSource));
//Blowing up on this next line with 'System.Linq.Queryable is not a GenericTypeDefinition. MakeGenericType may only be called on a type for which Type.IsGenericTypeDefinition is true.'
MethodInfo asQueryableMethod = typeof(Queryable).MakeGenericType(thetype).GetMethod("AsQueryable", BindingFlags.Static | BindingFlags.Public, null, new[] { typeof(IQueryable<>) }, null); 
MethodInfo genericAsQueryableMethod = asQueryableMethod.MakeGenericMethod(thetype);
MethodInfo orderUsingSortExpressionMethod = GetType().GetMethod("OrderUsingSortExpression");
MethodInfo genericUsingSortExpressionMethod = orderUsingSortExpressionMethod.MakeGenericMethod(thetype);
bsTotalBindingSource.DataSource = genericUsingSortExpressionMethod.Invoke(this, new object[] { genericAsQueryableMethod.Invoke(totalDataSource, null), order }); 
```

正如你所看到的，这里的最终目标是能够从 DataSource 中获取一些东西，获取它的 RuntimeType `IEnumerable<T>`where`T`可以是任何东西，然后调用`AsQueryable<T>`它以便可以将它传递给一个接受`IQueryable<T>`.

编辑在四处挖掘以找到我正在寻找的方法之后，我对这个问题有了更深入的了解。现在看起来像这样：

```
string order = "Message ASC";
Type thetype = bsTotalBindingSource.DataSource.GetType().GetGenericArguments()[0];
//Returns the AsQueryable<> method I am looking for
MethodInfo asQueryableMethod = typeof(Queryable).MakeGenericType(thetype).GetMethods()[1]; 
MethodInfo genericAsQueryableMethod = asQueryableMethod.MakeGenericMethod(thetype);
MethodInfo orderUsingSortExpressionMethod = typeof(SortExtension)GetType().GetMethods()[0];
MethodInfo genericUsingSortExpressionMethod = orderUsingSortExpressionMethod.MakeGenericMethod(thetype);
bsTotalBindingSource.DataSource = genericUsingSortExpressionMethod.Invoke(this, new object[] { genericAsQueryableMethod
//blows up here with 'Object of type 'System.RuntimeType' cannot be converted to type 'System.Collections.Generic.IEnumerable`1[LogRecordDTO]'.'
.Invoke(bsTotalBindingSource.DataSource, new object[] {thetype}), order }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:10:00.050

你说你想转换`IEnumerable<T>`到`IQueryable<T>`T 的类型未知的地方。

```
private void Test<T>(IEnumerable<T> x)
{
    var queryableX = x.AsQueryable();
} 
```

注意：您需要是`using System.Linq`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:02:15.810

我认为最简单的方法是将 IEnumerable 作为参数重载（或添加扩展方法）到您要调用的方法。然后只需从中调用另一个方法。这是我的意思的一个例子。

```
public class MyTestClass
{
    public void Run()
    {
        List<string> myList = new List<string>() { "one", "two" };

        object myListObject = (object)myList;

        Test(myListObject);
    }

    private void Test(object myListObject)
    {
        Type myGenericType = myListObject.GetType().GetGenericArguments().First();

        MethodInfo methodToCall = typeof(MyTestClass).GetMethods().Single(
            method => method.Name.Equals("GenericMethod") && method.GetParameters().First().Name.Equals("myEnumerableArgument"));

        MethodInfo genericMethod = methodToCall.MakeGenericMethod(myGenericType);

        genericMethod.Invoke(this, new object[] { myListObject });
    }

    public void GenericMethod<T>(IQueryable<T> myQueryableArgument)
    {
    }

    public void GenericMethod<T>(IEnumerable<T> myEnumerableArgument)
    {
        GenericMethod<T>(myEnumerableArgument.AsQueryable());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:20:40.403

我认为以下可能有效：

```
// Get generic type argument for everything
Type theType = bsTotalBindingSource.DataSource
    .GetType().GetGenericArguments()[0];

// Convert your IEnumerable<?>-in-an-object to IQueryable<?>-in-an-object
var asQueryable =
    // Get IEnumerable<?> type
    typeof(IEnumerable<>)
    .MakeGenericType(new[] { theType })
    // Get IEnumerable<?>.AsQueryable<?> method
    .GetMethod(
        "AsQueryable",
        new Type[] { theType },
        System.Reflection.BindingFlags.Static |
        System.Reflection.BindingFlags.Public)
    // Call on the input object
    .Invoke(bsTotalBindingSource.DataSource, new object[0]);

// Sort this queryable
var asSortedQueryable =
    // Get the YourType<?> generic class your sorting generic method is in?
    // If your class isn't generic I guess you can skip the MakeGenericType.
    typeof(yourtype)
    .MakeGenericType(new[] { theType })
    // Get the OrderUsingSortExpression<?> method
    .GetMethod(
        "OrderUsingSortExpression",
        new Type[] { theType },
        System.Reflection.BindingFlags.Static |
        System.Reflection.BindingFlags.Public)
    // Call on the IQueryable<?> object
    .Invoke(dataSource, new object[] { order });

// Set this object to the data source
bsTotalBindingSource.DataSource = asSortedQueryable; 
```

作为免责声明，我对此并不十分清楚。例如，当从 获取`AsQueryable<T>`时`IEnumerable<T>`，您是否需要传入通用参数？但我*确实*相信你想做的事情是可能的，并且*确实*需要反思，我*认为*这大致是正确的。

# android - autocompletetextview 更改视图颜色并禁用整个视图？

> ID：12109390
> 
> 赞同：2
> 
> 时间：2012-08-24T12:26:16.663
> 
> 标签：android, android-view, textview

好吧，我是 android 设计的新手

我的图形视图是这样的

[http://cubixshade.com/test/before.jpg](http://cubixshade.com/test/before.jpg)

但是当我在 Eclipse 中的视图上放置 autocompletetextview 字段时，它显示了这个

[http://cubixshade.com/test/after.jpg](http://cubixshade.com/test/after.jpg)

我的整个屏幕被连线和禁用，无法放置更多自动完成文本视图。怎么了 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:20:07.603

我遇到了同样的问题（这里对 Android 很陌生，所以请耐心等待）。我在 StackTrace 中看到它说错误来自 ...SpellChecker。所以我想也许如果我在我的编辑字段上禁用拼写检查，我可以解决这个错误，直到更新 Eclipse 工具。

按照此处的说明操作：Android Ice Cream Sandwich Edittext: Disabling Spell Check and Word Wrap I added

```
android:inputType="textNoSuggestions" 
```

这为我解决了这个问题。

# android - 从联系人列表中获取姓名和电子邮件非常慢

> ID：12109391
> 
> 赞同：15
> 
> 时间：2012-08-24T12:26:48.597
> 
> 标签：android, contacts, autocompletetextview, android-cursor

我正在实现一个 AutoCompleteTextView，我需要我所有联系人的姓名和电子邮件。我发现我正在异步运行这个片段，但它非常慢。

```
ContentResolver cr = getContentResolver();
Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

if (cur.getCount() > 0) {               
    while (cur.moveToNext()) {                  
        String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));                   
        String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

        Cursor emailCur = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", new String[]{id}, null); 

            while (emailCur.moveToNext()) { 

                String email = emailCur.getString(emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                    autoCompleteAdapter.add(name + " - " + email);
            }

            emailCur.close();
        }
    }
} 
```

我正在执行一种内部查询，我认为这就是问题所在。有没有办法调整它并使其更快？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-25T11:42:10.527

```
private static final String[] PROJECTION = new String[] {
    ContactsContract.CommonDataKinds.Email.CONTACT_ID,
    ContactsContract.Contacts.DISPLAY_NAME,
    ContactsContract.CommonDataKinds.Email.DATA
};

...

ContentResolver cr = getContentResolver();
Cursor cursor = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, PROJECTION, null, null, null);
if (cursor != null) {
    try {
        final int contactIdIndex = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.CONTACT_ID);
        final int displayNameIndex = cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);
        final int emailIndex = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA);
        long contactId;
        String displayName, address;
        while (cursor.moveToNext()) {
            contactId = cursor.getLong(contactIdIndex);
            displayName = cursor.getString(displayNameIndex);
            address = cursor.getString(emailIndex);
            ...
        }
    } finally {
        cursor.close();
    }
} 
```

几点注意事项：

*   仅`ContactsContract.CommonDataKinds.Email.CONTENT_URI`用于获取您需要的信息，请参阅[ContactsContract.CommonDataKinds.Email](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Email.html)了解您可以查询哪些列
*   使用投影仅获取您真正需要的那些列，您可以节省一些内存并提高查询性能
*   仅在 while 循环之前获取一次列索引

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T13:02:38.340

您不应该直接查询[ContactsContract.Contacts](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)

**使用**电子邮件数据类型对[ContactsContract.CommonDataKinds](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.html)进行一次查询。

[ContactsContract.CommonDataKinds.Email](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Email.html)继承了许多可用于构建投影的其他接口。（请参阅文档中的继承常量）

例如 ：

```
import android.provider.ContactsContract.CommonDataKinds.Email;

[...]

public static final String[]  EMAILS_PROJECTION = new String[] {
    Email._ID,
    Email.DISPLAY_NAME_PRIMARY,
    Email.ADDRESS
}; 
```

与

```
Email.CONTENT_URI 
```

您可以直接从电子邮件数据类型中检索大量信息（例如用户 ID、用户显示名称...）。

**编辑：**

我刚刚意识到您正在尝试构建一个 AutoCompleteTextView。

您应该覆盖CursorAdapter的`runQueryOnBackgroundThread`方法和方法并使用[Email.CONTENT_FILTER_URI](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Email.html#CONTENT_FILTER_URI)`convertToString`

我**真的强烈**建议你看看**ApiDemo 示例**。

尤其是您可以在**[此处](https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/view/AutoComplete4.java)****找到的AutoComplete4.java**示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-31T09:34:04.837

```
ContentResolver cr = mContext.getContentResolver(); 
Cursor cursor = mContext.getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, PROJECTION, "HAS_PHONE_NUMBER <> 0", null, null); 

if (cursor!= null) 
{ 
    final int displayNameIndex = cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME); 
    final int numberIndex = cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER); 
    final int idIndex= cursor.getColumnIndex(ContactsContract.Contacts._ID); 
    String displayName, number = null, idValue; 

    while (cursor.moveToNext()) 
    {
        displayName = cursor.getString(displayNameIndex);
        idValue= cursor.getString(idIndex);

        Cursor phones = mContext.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, "contact_id = '" + idValue + "'", null, null);
        phones.moveToFirst();

        try 
        {
            number = phones.getString(phones.getColumnIndex("data1"));
        }
        catch (CursorIndexOutOfBoundsException e)
        {
        }

        phones.close();
        userList.add(new ContactModel(displayName, number, null));
    }
} 
```

# php - 操作 DomDocument 中的节点并将其转换为数组

> ID：12109393
> 
> 赞同：0
> 
> 时间：2012-08-24T12:26:57.013
> 
> 标签：php, domdocument

我有一个这样的 XML：

```
<?xml version="1.0" ?>
<rss version="2.0">
  <channel>
      <title>get_news_category</title>
    <item>
        <id>10502</id>
        <title>Cheesecake</title>
        <summary>SummaryBlahblah</summary>
    </item>
    <item>
        <id>13236</id>
        <title>Moto</title>
        <summary>summary blahblah</summary>
    </item> 
```

**我想将这些项目放入一个 php 数组中。**

到目前为止我已经完成了：

```
 $nodes = $dom->getElementsByTagName('item')->item(0);

    $values = $nodes->getElementsByTagName("*");

    $articles = array();

    foreach ($values as $node) {
      $articles[$node->nodeName] = $node->nodeValue;
    }

    var_dump($articles); 
```

它只在一个数组中返回我，即 1`<item>`元素。这是合乎逻辑的，因为我告诉了他`->item(0)`。

那么如何选择所有项目以便将所有项目放入数组中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:31:18.823

您需要迭代 $nodes。

```
$nodes = $dom->getElementsByTagName('item');
for ($i = 0; $i < $nodes->length; $i++)
{
     // Lets grab the node
     $values = $nodes->item($i)->getElementsByTagName("*");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:35:27.360

采用`$nodes->length`

```
$dom = new DOMDocument();
$dom->loadHTML($html);
$nodes = $dom->getElementsByTagName('item');

for($i=0; $i<$nodes->length; $i++){

    $values = $nodes->item($i)->getElementsByTagName("*");

    $articles = array();

    foreach ($values as $num => $node) {
        $articles[$i][$node->nodeName] = $node->nodeValue;
    }

    var_dump($articles);
} 
```

# rest - 将无状态 EJB3.1 会话 bean 转换为 RESTful Web 服务

> ID：12109398
> 
> 赞同：1
> 
> 时间：2012-08-24T12:27:01.293
> 
> 标签：rest, ejb-3.1

我发现了一个非常有趣的问题以及答案

> [如何将 EJB 3.1 公开为 REST Web 服务？](https://stackoverflow.com/questions/9883843/how-to-expose-an-ejb-3-1-as-a-rest-web-service)

这是指 [http://www.adam-bien.com/roller/abien/entry/ejb_3_1_and_rest](http://www.adam-bien.com/roller/abien/entry/ejb_3_1_and_rest)。

这是一个非常**有用的功能**。我的问题是会话 bean 是否需要是**单例**的？我引用的查询声明它应该是一个单例会话 bean，而查询引用的原始会话 bean 不包含此语句。如果它必须是单例，你能告诉我为什么吗？

也提前谢谢你，塔马斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:51:29.057

尽管对实现 REST 的类的类型没有任何限制`EJB`（实际上这个类甚至根本不需要是一个`EJB`），但一种易于维护和可扩展的方法建议`Stateless`为此目的使用 bean。

看看这篇有趣的文章：[**RESTful Web 服务：基础知识**，作者 A. Rodriguez](http://www.ibm.com/developerworks/webservices/library/ws-restful/)，其中有一个关于该主题的部分（标题为**Be stateless**）。从那部分，让我引用一些东西：

> 另一方面，无状态服务器端组件的设计、编写和跨负载平衡服务器分发的复杂性较低。无状态服务不仅性能更好，而且将维护状态的大部分责任转移给客户端应用程序。在 RESTful Web 服务中，服务器负责生成响应并提供使客户端能够自行维护应用程序状态的接口。

# android - android中是否有任何规定可以知道哪个用户应用程序正在使用哪个系统服务

> ID：12109401
> 
> 赞同：0
> 
> 时间：2012-08-24T12:27:26.153
> 
> 标签：android, linux, android-ndk, microphone, lso

android 或 ndk 中是否有任何规定可以知道哪个用户应用程序正在使用哪个系统服务？或者使用 pid 的另一种方式：-

假设我有一个使用麦克风的应用程序，麦克风由系统服务（名为媒体服务）打开。我可以设法获取上述服务（媒体服务）的 pid。现在我想知道哪个用户应用程序正在使用 pid以上服务（媒体服务）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:38:54.690

如果你是系统服务的实现者——比如通过创建你自己的 Android 操作系统的分支——应该有办法通过 Binder IPC 协议来做到这一点。`Binder`实现使用绑定模式的服务的 SDK 应用程序可以通过对其对象的调用找出谁在调用它们。如果 SDK 应用程序能够获取该信息，则可以想象系统服务可以从其 C/C++`Binder`等效项中获取相同的信息。

如果您不是系统服务的实现者，那么不，应用程序和系统服务之间的通信对于这些进程来说是私有的。

# android - 这些是Android中的GridView吗？

> ID：12109402
> 
> 赞同：2
> 
> 时间：2012-08-24T12:27:28.930
> 
> 标签：android, user-interface

![](../Images/9388499a7af619e1e485c15da72be9aa.png)

我想制作一个具有如下界面的应用程序，如google+或evernote，如何执行这些ui？在 Android 中使用 GridView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:36:28.570

```
public class Dashboard extends Activity
    implements OnItemClickListener {
Context con;
static LauncherIcon[] ICONS = {
        new LauncherIcon(R.drawable.breakfasdd, "text1"),
        new LauncherIcon(R.drawable.lunch, "text2"),
        new LauncherIcon(R.drawable.dinner1, "text3"),
        new LauncherIcon(R.drawable.syn1, "text4"),

};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dashboard);
    GridView gridview = (GridView) findViewById(R.id.dashboard_grid);
    gridview.setAdapter(new ImageAdapter(this));
    gridview.setOnItemClickListener(this);
    }

static class LauncherIcon {
    final String text;
    final int imgId;

    public LauncherIcon(int imgId, String text) {
        super();
        this.imgId = imgId;
        this.text = text;
    }

}

static class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    @Override
    public int getCount() {
        return ICONS.length;
    }

    @Override
    public LauncherIcon getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    static class ViewHolder {
        public ImageView icon;
        public TextView text;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder holder;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            v = vi.inflate(R.layout.dashboard_icon, null);
            holder = new ViewHolder();
            holder.text = (TextView) v
                    .findViewById(R.id.dashboard_icon_text);
            holder.icon = (ImageView) v
                    .findViewById(R.id.dashboard_icon_img);
            v.setTag(holder);
        } else {
            holder = (ViewHolder) v.getTag();
        }

        holder.icon.setImageResource(ICONS[position].imgId);
        holder.text.setText(ICONS[position].text);

        return v;

    }
} 
```

并选择项目

```
 @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        int pos = position;{
} 
```

仪表板图标.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/dashboard_icon_img"
        android:layout_width="fill_parent"
        android:layout_height="96.0dip"
        android:scaleType="fitCenter" />

    <TextView
        android:id="@+id/dashboard_icon_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20.0dip"
        android:layout_marginTop="2.0dip"
        android:gravity="center"
        android:textAppearance="?android:textAppearanceSmall"
        android:textColor="@android:color/black" />

</LinearLayout> 
```

仪表板.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <Button
        android:id="@+id/back"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_weight="1"
        android:text="BACK" />

    <GridView
        android:id="@+id/dashboard_grid"
        style="@style/dashboard"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:listSelector="@android:color/transparent"
        android:stretchMode="columnWidth"
        android:verticalSpacing="20.0dip" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:30:39.477

它们与此相似。但他们有自己的术语，称为**DashBoard**。

这是教程的链接，

[仪表板..](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http%3A%2F%2Fwww.androidhive.info%2F2011%2F12%2Fandroid-dashboard-design-tutorial%2F&ei=qHM3UMGxAcb4rQeAiYFA&usg=AFQjCNGfhlP04wHNwbu8FRde-xWeNhKCdQ)

这是一个链接，它向您解释了一些事情，

[http://android-developers.blogspot.in/2010/05/twitter-for-android-closer-look-at.html](http://android-developers.blogspot.in/2010/05/twitter-for-android-closer-look-at.html)

还有这个问题，之前讨论过，

[Android 仪表板模式](https://stackoverflow.com/q/2873568/603744)

这似乎是建议的方法，

```
<com.google.android.apps.iosched.ui.widget.DashboardLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<Button android:id="@+id/home_btn_schedule"
    style="@style/DashboardButton"
    android:text="@string/btn_schedule"
    android:drawableTop="@drawable/home_btn_schedule" />
<Button android:id="@+id/home_btn_map"
    style="@style/DashboardButton"
    android:text="@string/btn_map"
    android:drawableTop="@drawable/home_btn_map" />
<Button android:id="@+id/home_btn_sessions"
    style="@style/DashboardButton"
    android:text="@string/btn_sessions"
    android:drawableTop="@drawable/home_btn_sessions" />
<Button android:id="@+id/home_btn_starred"
    style="@style/DashboardButton"
    android:text="@string/btn_starred"
    android:drawableTop="@drawable/home_btn_starred" />
<Button android:id="@+id/home_btn_vendors"
    style="@style/DashboardButton"
    android:text="@string/btn_vendors"
    android:drawableTop="@drawable/home_btn_vendors" />
<Button android:id="@+id/home_btn_announcements"
    style="@style/DashboardButton"
    android:text="@string/btn_announcements"
    android:drawableTop="@drawable/home_btn_announcements" /> 
```

[取自这里..](http://code.google.com/p/iosched/source/browse/android/res/layout/fragment_dashboard.xml?r=27a82ff10b436da5914a3961df245ff8f66b6252)

# android - Android 数据库应用程序上下文失败

> ID：12109403
> 
> 赞同：0
> 
> 时间：2012-08-24T12:27:30.797
> 
> 标签：android, database, lifecycle

本文很好地展示了不同的数据库方法：

[数据库方法](http://www.ragtag.info/2011/feb/1/database-pitfalls/)

我使用方法 2：一个包含我制作的单个 LocalDatabaseAdapter 的 Application 对象。这包含一个 DatabaseOpenHelper 等。

```
public class MyApplication extends Application {

private static LocalDbAdapter lDb;

public void onCreate() {
    super.onCreate();
    MyApplication.context = getApplicationContext();
    lbm = LocalBroadcastManager.getInstance(context);
[..]
}
public static LocalDbAdapter getLDb(){
    if(lDb==null){
        lDb = new LocalDbAdapter(context);
    }
    if(lDb.isOpen()){
        return lDb;
    }else{
        return lDb.open();
    }
}
@Override
public void onTerminate() {
    super.onTerminate();
    lDb.close();
} 
```

现在，当我启动相机应用程序然后返回我的主要活动时，我得到了数据库从未关闭的错误。正如它所指出的，这个数据库是在应用程序上下文中创建的，所以为什么我没有在我的活动中关闭它是一个问题，我认为这就是想法。只有一个数据库对象的一个​​重要优点是 LocalDbAdapter 的所有执行任何写入操作的方法都在插入或更新周围使用 protected(this) 语句。

在 OnActivityResult 中，相机拍照后，我获取数据库，如

```
LocalDbAdapter ldb = MyApplication.getLDb(); 
```

这让我非常沮丧。如果我在我的 MainActivity 的 onPause 中关闭它，我担心使用相同对象的后台服务会遇到麻烦，我什至将对象保持在 onActivityResult 的本地......

# android - 如何从 mozilla fennec 构建说明构建 .apk 文件

> ID：12109405
> 
> 赞同：1
> 
> 时间：2012-08-24T12:27:45.040
> 
> 标签：android, android-ndk-r5, fennec

我曾尝试为 Android 构建 Mozilla Fennec 浏览器。我已按照[说明进行操作](https://wiki.mozilla.org/Mobile/Fennec/Android)。`make`在指示之前它不会显示任何问题：

> make -f client.mk build_and_deploy

它在指令处停止，`make -C . fast-package`因为编译器无法识别快速包指令。所以我继续没有`fast-package`选择。它再次停在

```
if test -d ./dist/bin ; then touch ./dist/bin/.purgecaches ; fi 
```

> make: 离开目录`/home/user/android/src/config'

`/dist/*.apk`不在`/objdir-droid`文件夹中创建。mozconfig 路径是正确的。谁能指出我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:34:44.407

关注

如果测试 -d ./dist/bin ; 然后触摸 ./dist/bin/.purgecaches ；菲

表示构建成功完成。将 build_and_deploy 与通过 USB 连接的设备一起使用

# php - Joomla 1.5 媒体管理器不会改变路径

> ID：12109407
> 
> 赞同：0
> 
> 时间：2012-08-24T12:27:50.280
> 
> 标签：php, iframe, joomla, media

我确实有 joomla 1.5 的工作版本并使用媒体管理器。它工作正常。当我尝试在 iframe 中加载 joomla 管理时，当我从媒体管理器的左侧菜单询问更改文件夹时，文件夹项目会正确显示在右侧文件区域，但路径输入仍保留为 C:\Users\akis\ xampp\htdocs\joomlacom\images 如果您尝试上传文件，该文件将上传到 C:\Users\akis\xampp\htdocs\joomlacom\images 而不是您选择的文件夹。

有任何想法吗？

# matlab - matlab对象转字符串的方法

> ID：12109409
> 
> 赞同：4
> 
> 时间：2012-08-24T12:27:52.840
> 
> 标签：matlab, type-conversion

我有一个对象，`Person p;`。以下属性是`p`的属性：

```
Properties:
     PersonName: 'John Doe'
     JobType: [1x1 JobTypes] 
```

JobType 是来自`JobTypes`包含 JobType 枚举的类的对象。我想看到`JobType: Manager`而不是`JobType: [1x1 JobTypes]`. 有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:59:59.440

我从不喜欢 Matlab 中的枚举类——对我来说太麻烦了。因此，我的经验太少，无法*真正*理解这里发生了什么。不过，我会尝试：枚举类只有一个值。它*不是*一个字符串。像

```
J = JobTypes.Manager 
```

将`JobTypes`类对象赋给变量`J`，设置为关联的值`Manager`。该值由 Matlab 内部选择，永远不会显示给用户。它`J = Manager`在命令行上显示得很好，这是由于 Matlab 的标准`disp`和`display`枚举类的实现。我**认为**这种方法不能与`display`另一个类中的调用结合使用。

为了避免这种情况，您可以为您定义自己的`display`方法`Person`：

```
classdef Person < handle

    properties
        PersonName = 'John Doe'
        JobType  = JobTypes.Manager
    end

    methods       
        function  display(self)   
            fprintf(...
                ['Properties:\n',...
                '   Personname: ''%s''\n',...
                '      JobType: %s\n'],...
                   self.PersonName,...
                   self.JobType.char);            
        end
    end

end 
```

`JobType.char`是 Matlab 版本的 a `toString`for 枚举类，所以插入它`fprintf`会显示实际的字符串！（为此感谢@zagy）

看看 Mathworks 如何实现`display`他们自己的一些类的方法，以了解如何在显示中获取到超类、方法、事件等的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:59:31.357

您需要覆盖类的`display(obj)`和`disp(obj)`方法来实现这一点。

也许这两页有[帮助](http://www.mathworks.ch/help/techdoc/ref/display.html)：[1、2](http://www.mathworks.ch/help/techdoc/matlab_oop/br2vkg7.html)

# amazon-web-services - 多次向 AWS 创建 JClouds ComputeService 会引发“自定义提供程序错误”异常

> ID：12109415
> 
> 赞同：0
> 
> 时间：2012-08-24T12:28:10.280
> 
> 标签：amazon-web-services, jclouds

我正在开发一个系统，利用 jclouds 在亚马逊云上实例化一堆节点。

当我需要知道我已经创建的节点时，我使用了 computeService.listNodes()。对于 listNodes 的每次调用，我都会创建一个对象 computeService，如下所示：

```
Properties overrides = new Properties();
overrides.setProperty(AWSEC2Constants.PROPERTY_EC2_AMI_QUERY, "image-id=" + image);

ComputeServiceContext context = new ComputeServiceContextFactory()
.createContext(PROVIDER,
  Configuration.get("AMAZON_ACCESS_KEY_ID"),
  Configuration.get("AMAZON_SECRET_KEY"),
  ImmutableSet.<Module> of(), overrides);

computeService = context.getComputeService(); 
```

通常它可以工作，但是当我对 computeService.listNodes() 进行多个并发调用时，执行失败。

在这样的执行中，我在 createContext 行的某些线程中遇到了异常。附加了完整的堆栈跟踪。

让我感到困惑的是，我编写了一个带有循环的小程序来实例化多个计算服务，而且我没有遇到任何麻烦。

我会错误地使用 JClouds API 吗？JClouds 不支持并发调用吗？还是对 AWS 调用有某种限制？（上一段表明这些问题的答案是“否”，但我现在无法考虑其他选择）。

重要信息：我的代码从 REST 调用运行到使用 apache cxf 设置的独立本地服务器。

这是负责设置服务器的类：[https](https://github.com/choreos/choreos_middleware/blob/master/ServiceDeployer/src/main/java/org/ow2/choreos/npm/rest/NPMServer.java) ://github.com/choreos/choreos_middleware/blob/master/ServiceDeployer/src/main/java/org/ow2/choreos/npm/rest/NPMServer.java 。

这是接收调用的类：[https ://github.com/choreos/choreos_middleware/blob/master/ServiceDeployer/src/main/java/org/ow2/choreos/npm/rest/NodesResource.java](https://github.com/choreos/choreos_middleware/blob/master/ServiceDeployer/src/main/java/org/ow2/choreos/npm/rest/NodesResource.java)

堆栈跟踪的一些相关部分：

```
1) Error in custom provider, java.lang.reflect.UndeclaredThrowableException
  while locating org.jclouds.ec2.config.EC2RestClientModule$RegionIdToZoneId
    Caused by: java.lang.reflect.UndeclaredThrowableException
    at $Proxy98.describeAvailabilityZonesInRegion(Unknown Source)
    at     org.jclouds.ec2.config.EC2RestClientModule$RegionIdToZoneId.get(EC2RestClientModule.java:152)
Caused by: java.util.concurrent.TimeoutException
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:258)
at java.util.concurrent.FutureTask.get(FutureTask.java:119)
at     org.jclouds.concurrent.config.ExecutorServiceModule$AddToStringFuture.get(ExecutorServiceModule.java:234)

2) Error in custom provider, org.jclouds.http.HttpResponseException: ec2.ap-northeast-1.amazonaws.com connecting to POST https://ec2.ap-northeast-1.amazonaws.com/ HTTP/1.1
  while locating org.jclouds.ec2.config.EC2RestClientModule$RegionIdToZoneId
Caused by: org.jclouds.http.HttpResponseException: ec2.ap-northeast-1.amazonaws.com connecting to POST https://ec2.ap-northeast-1.amazonaws.com/ HTTP/1.1
at     org.jclouds.http.internal.BaseHttpCommandExecutorService$HttpResponseCallable.call(BaseHttpCommandExecutorService.java:183)
Caused by: java.net.UnknownHostException: ec2.ap-northeast-1.amazonaws.com
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:175)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384) 
```

OBS：堆栈跟踪中的“at org.ow2.choreos.npm.cloudprovider.AWSCloudProvider.getClient(AWSCloudProvider.java:53)”行是“createContext”行。

谢谢你，莱昂纳多·莱特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:52:04.680

jclouds中的nodes查询没有缓存，所以多个并发请求可能会导致网络超时。如果您同时执行许多 listNodes，您可能会考虑使用[番石榴缓存。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)

无论如何，我会碰到 jclouds 1.5.3，它也有一个更简洁的语法来创建连接。

```
ComputeServiceContext context = ContextBuilder.newBuilder(PROVIDER)
                                              .credentials(Configuration.get("AMAZON_ACCESS_KEY_ID"), Configuration.get("AMAZON_SECRET_KEY"))
                                              .overrides(properties)
                                              .buildView(ComputeServiceContext.class); 
```

最后，您可以通过为上下文属性“jclouds.regions”提供您感兴趣的区域的逗号分隔列表来隔离您使用的区域。例如“us-west-1”，将阻止对远程区域的网络调用.

# seo - Google 是否支持丰富的文章摘要？

> ID：12109419
> 
> 赞同：5
> 
> 时间：2012-08-24T12:28:33.847
> 
> 标签：seo, schema.org, google-rich-snippets

我一直在看谷歌的[丰富网页摘要](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170&topic=1088472&ctx=topic)。Google 列出了以下受支持的[schema.org](http://www.schema.org)项目：

*   评论
*   人们
*   项目清单
*   产品
*   企业和组织
*   食谱
*   活动音乐

我注意到在搜索结果中，Google 会显示文章和博客发布的丰富片段。单击链接并使用 Firebug 检查源代码时，我可以看到正在使用的 schema.org 确实是 BlogPosting。

我尝试将 BlogPosting 添加到我的示例代码中并使用[Google 的 Rich Snippet 工具](http://www.google.com/webmasters/tools/richsnippets?url=)检查结果，但我无法显示图像。我正在使用以下代码：

```
<html>
<body> etc etc....

<div itemscope="" itemtype="http://schema.org/BlogPosting">
     <img itemprop="image" href="/images/test.jpg" item>
</div>

... 
```

尽管它不会在 Rich Snippet 工具中显示图像，但它会识别出已设置图像并在“从页面中提取的丰富代码段数据”框中显示 url 文本。我已经尝试使用 SoftwareApplication 模式，然后我得到一个图像来显示。

我的问题是：Rich Snippet 工具是否会根据上面列出的模式限制它显示的图像，并且实际上一旦在实时搜索结果中，就会显示文章和 BlogPostings 的 Rich Snippets？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:43:52.340

截至目前，Google 不会在 SERPS 中显示 schema.org/Article 或 schema.org/BlogPosting 项目类型的产品图片。它将使用以下两种方法之一显示从 Google+ 中提取的作者个人资料图片：

[https://plus.google.com/authorship](https://plus.google.com/authorship)

……想一想。每个人都会尝试在 SERPS 中的博客文章旁边添加一些（垃圾邮件）图像。谷歌只想通过他们的身份验证方法（通过 G+）显示经过验证的作者身份——而不仅仅是来自微数据中的任何“作者”标签。

是的，丰富的代码片段工具不会向您显示实际的 SERP 始终是什么样子，因为它取决于查询。事实上他们说

> 请注意，不能保证此页面会在实际搜索结果中显示丰富的代码段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-22T04:37:53.837

Google 为文章引入了 Rich Snippet，因此您现在可以将文章片段用于您的文章/博客文章。

请参阅 Google 提供的有关为您的文章实施丰富片段的官方文档：[https ://developers.google.com/structured-data/rich-snippets/articles](https://developers.google.com/structured-data/rich-snippets/articles)

就您的图像问题而言，请尝试按照上面的文档应用代码段，它应该会显示图像。我对其进行了测试，一切正常。

# android - 如何访问默认帐户以及发送、接收和回复邮件信息

> ID：12109423
> 
> 赞同：1
> 
> 时间：2012-08-24T12:29:00.447
> 
> 标签：android

在我的公司，我们为视障人士开发了一款软件，并希望将阅读和回复电子邮件结合起来。但是，我们希望做一个应用程序来更轻松地阅读和回复电子邮件......而不是重新配置帐户，而是在用户通知时使用 Android 操作系统的默认帐户......

我们研究了一些帖子并发现：内容提供者，无法访问此信息：帐户和邮件消息...并通过包引发安全异常...

有没有人经历过类似的情况？如何解决这个问题？我刚刚开发了一个完整的客户邮件吗？并要求用户在我的应用程序中重新配置帐户？

最好的问候，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:52:14.000

要访问设备上已配置的帐户，您需要在[AndroidManifest.xml中添加](http://developer.android.com/guide/topics/security/permissions.html#manifest)[GET_ACCOUNTS](http://developer.android.com/reference/android/Manifest.permission.html#GET_ACCOUNTS)权限，可能还需要添加[ACCOUNT_MANAGER](http://developer.android.com/reference/android/Manifest.permission.html#ACCOUNT_MANAGER)。

要发送/接收电子邮件，您需要实现或使用现有的 SMTP 库，例如[javamail-android](http://code.google.com/p/javamail-android/) - 注意，它们似乎有一些突出的[问题](http://code.google.com/p/javamail-android/issues/list)

[这个问题](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)有一些很好的信息

# javascript - 使用 PageMod 将所有文本框变成所见即所得的 HTML 编辑器

> ID：12109429
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:29:27.153
> 
> 标签：javascript, firefox-addon, textarea, firefox-addon-sdk, nicedit

我正在尝试创建一个插件，将某些页面上的所有文本区域转换为所见即所得的 HTML 编辑器。我尝试通过调用 NicEdit 库来使用[PageMod](https://addons.mozilla.org/en-US/developers/docs/sdk/1.5/packages/addon-kit/docs/page-mod.html)，然后使用代码运行内容脚本以将所有文本区域转换为 NicEdit 编辑器。这是我尝试使用的代码：

主.js：

```
// Import the APIs
var pageMod = require("page-mod");
var self = require("self");

// Create a page mod
// It will run a script whenever a URL is loaded
pageMod.PageMod({
  include: "*",
  contentScriptFile: [self.data.url("nicEdit-latest.js"),
                      self.data.url("pagedit.js")]
}); 
```

pagedit.js

```
bkLib.onDomLoaded(nicEditors.allTextAreas); 
```

然后 NicEdit-latest.js 就是 NicEdit 库。

我保存并安装了插件并尝试[在 textareas 上加载 W3Schools 的演示](http://www.w3schools.com/tags/showit.asp?filename=tryhtml_textarea "W3Schools textarea 演示")，但 textarea 看起来仍然像普通的 textarea。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:30:56.020

好的，我想通了。内容脚本在错误的时间触发。我通过在和之间添加

     contentScriptWhen: 'start',来修复它。

`include``ContentScriptFile`

# css - 网格面板错误提示

> ID：12109433
> 
> 赞同：2
> 
> 时间：2012-08-24T12:30:01.543
> 
> 标签：css, extjs, extjs4, tooltip

我有一个网格面板，想在鼠标悬停时显示一个错误工具提示，就像我们在文本字段和组合框中看到的那样。是否有任何内置组件可以为网格面板显示此错误样式的工具提示。 ![这就是我在鼠标悬停在网格面板上时所期望的工具](../Images/b59b75d81b9bb778a5d10acaa16ee0d0.png)

我这样做是为了根据网格面板中的记录数查找验证。请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:44:11.267

没有任何内置功能可以完成此操作，但您仍然可以做到。幸运的是，不久前我不得不做这样的事情。

您需要使用列渲染器。您还需要将错误消息存储在记录本身上，或者有办法按记录访问错误消息。您的渲染器应如下所示：

```
renderer: function(value, metaData, record){
    if(/* record has error */){
        metaData.tdCls += " x-form-invalid-field";  // Squiggly red lines
        metaData.tdAttr = "data-errorqtip='This is my error message!'";
    }
    return value;
} 
```

您可能需要玩弄样式和诸如此类的东西，但这就是它的要点。此外，如果记录的有效性发生变化，您必须刷新网格，以确保您的工具提示显示已更新。

# cloudbees - 在繁重的操作中，RUN@Cloud 总是让我失望

> ID：12109436
> 
> 赞同：2
> 
> 时间：2012-08-24T12:30:11.390
> 
> 标签：cloudbees

我正在使用一个大型应用程序实例来运行一个基本的 Java Web 应用程序（GWT + Spring）。我的应用程序（报告）中有一个昂贵的操作，需要很长时间才能执行。

我已经尝试在我的本地机器上使用 cloudbees SDK 运行它，它的设置与在云上的设置相似，而且它似乎运行得很好。它运行大约 3-4 分钟。

在云上，它似乎需要更长的时间。问题不在于它需要很长时间。cloudbees 会在 5 分钟后终止会话，并在我的浏览器中显示“无法连接到服务器”错误。请联系您的管理员。一份不需要花很长时间的报告就可以了。我的应用程序有 30 分钟的会话超时，所以这也不是问题。

可能出了什么问题？跟云朵有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:59:26.923

This may be due to proxy buffering of your request through the routing layer (revproxy) - so it most likely isn't a session timeout - but the http connection getting cut.

You can either set proxyBuffering=false via the bees CLI command (eg when you deploy the app) - this will ensure longer running connections can work.

Ideally, however, you could change the app slightly to return to the browser with some token which you can poll with to get completion status, as even with a connection that lasts that long, over the internet it may provide a bad experience vs locally.

# android - getLastKnownLocation() 在设备上总是返回 null

> ID：12109444
> 
> 赞同：0
> 
> 时间：2012-08-24T12:30:49.323
> 
> 标签：android, google-maps

在下面的代码中`getLastKnownLocation()`，即使我得到`Provide = internet`. 它工作正常，但知道它返回一个空值。我使用的是 Galaxy Tab 2.2 版。

```
public void find_Location(Context con) {
  Log.d("Find Location", "in find_location");
  this.con=con;
  String location_context = Context.LOCATION_SERVICE;
  LocationManager locationManager =
    (LocationManager)con.getSystemService(location_context);
  List<String> providers = locationManager.getProviders(true);
  for (String provider : providers) {
    locationManager.requestLocationUpdates(provider, 1000, 0,new LocationListener() {
      public void onLocationChanged(Location location) {}
      public void onProviderDisabled(String provider){}
      public void onProviderEnabled(String provider){}
      public void onStatusChanged(String provider, int status,Bundle  extras){}
    });
    Location location = locationManager.getLastKnownLocation(provider);
    if (location != null) {
      lat = location.getLatitude();
      lng = location.getLongitude();
      Geocoder geocoder = new Geocoder(AdvanceSearch.this,
        Locale.getDefault());List<Address> addresses;
      try {
        addresses = geocoder.getFromLocation(lat,lng,100);
        countryname=addresses.get(0).getCountryName();
        eexit e = new eexit();
        statename= addresses.get(0).getAdminArea();
        cityname=addresses.get(0).getLocality();
      } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    }
  }
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:27:20.347

我会首先关注这条线。您`requestLocationUpdates`的`minDistance`集合为 0。

玩弄`minDistance`，我认为这就是你的问题所在。

```
locationManager.requestLocationUpdates(provider, 1000, 15, new LocationListener() { 
```

* * *

**编辑：**

此外，我会在`Log`您的`LocationListener`方法中添加一个。这样做对我帮助很大。

这是我早期`LocationListener`脚本的一个示例：

```
public LocationListener jLocListener = new LocationListener() {
    //class findMe implements LocationListener {
    public void onLocationChanged(Location location) {
        try {
            lat = location.getLatitude();
            lon = location.getLongitude();
        } catch (Exception e) {
            Log.e("onLocationChanged", "FAILED: " + e.getMessage());
        }
    }
    public void onProviderDisabled(String provider) {
        Log.i("LocationListener", "onProviderDisabled");
    }
    public void onProviderEnabled(String provider) {
        Log.i("LocationListener", "onProviderEnabled");
    }
    public void onStatusChanged(String provider, int status, Bundle extras) {
        Log.i("LocationListener", "onStatusChanged");
    } 
```

# alfresco - alfresco-access 应用程序查询过滤在 4.0.e 上不起作用

> ID：12109450
> 
> 赞同：1
> 
> 时间：2012-08-24T12:31:20.280
> 
> 标签：alfresco

我创建了使用 Web 服务客户端访问 alfresco 的应用程序。现在我想在 alfresco 中审计该应用程序的所有事件，所以我启用了 alfresco-access 审计应用程序。在这里，当我执行简单的审计查询时，它会正确返回所有结果，但是当我执行查询以获取与特定文件相关的所有审计事件时，它会返回 0 个条目。

**获取所有审计事件的**简单查询****

 **```
http://localhost:8080/alfresco/service/api/audit/query/alfresco-access?verbose=true 
```

**高级**查询仅获取特定文件的审计事件

```
http://localhost:8080/alfresco/service/api/audit/query/alfresco-access/transaction/path?verbose=true&value="/app:company_home/cm:test/cm:test1/cm:test2/cm:testfile.pdf" 
```

我在我的添加了以下配置`alfresco-global.properties`：

```
audit.enabled=true
audit.tagging.enabled=true
audit.alfresco-access.enabled=true
audit.alfresco-access.sub-events.enabled=true
audit.cmischangelog.enabled=true
audit.dod5015.enabled=true
audit.config.strict=false
audit.filter.alfresco-access.default.enabled=true
audit.filter.alfresco-access.transaction.user=~System;~null;.* 
audit.filter.alfresco-access.transaction.type=cm:folder;cm:content;st:site<br>
audit.filter.alfresco-access.transaction.path=~/sys:archivedItem;~/ver:;.* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:58:08.123

以下查询现在正在工作，只需要在关键参数中添加应用程序名称 -

```
http://localhost:8080/alfresco/service/api/audit/query/alfresco-access/alfresco-access/transaction/path? verbose=true&value=/app:company_home/cm:test/cm:test1/cm:test2/cm:testfile.pdf 
```**

# javascript - 如何获取 JavaScript 自动 POST 到另一个域的状态代码

> ID：12109458
> 
> 赞同：0
> 
> 时间：2012-08-24T12:31:41.373
> 
> 标签：javascript, ajax, http, xss, saml

我们正在构建一个 SAML 解决方案，其中一个阶段涉及我们提供一个预先填充了各种参数的 html 表单，设置为 POST 到独立于我们的 Web 服务上的端点。然后通过 JavaScript 自动提交此表单。（即这是 SAML POST 绑定）

对于调试，如果我们能查明这个自动 POST 是否成功，那将是非常有用的。有人对我们如何做到这一点有任何想法吗？仅仅能够获取 HTTP 状态代码，或者能够找出请求是否超时，将非常有帮助。

目前的进展：

据我所知，没有办法直接检查提交表单的实际结果，而且我认为您无法从 onunload 事件中获取下一个请求的状态。

我们已准备好对其进行重组，改为使用 AJAX 进行 POST，但我认为我们无法针对其他端点的域进行这项工作。我也想知道我们是否可以在一个框架中加载另一个页面并以某种方式获取一些信息，但我知道它也有自己的一组跨域限制。

最后，我们可以尝试先在服务器端进行 POST 并对其进行分析，但很可能我们要访问的服务器位于仅对客户端本地可用的网络上，所以这可能只是不可行的，除了有各种重放等问题。

任何想法或解决方案都将非常有用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:36:38.480

这是 AJAX 请求的基本示例：

```
var xmlhttp;
if (window.XMLHttpRequest)
    xmlhttp=new XMLHttpRequest();
else
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
}
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send(); 
```

注意带有 的行`xmlhttp.status == 200`。您应该能够检查此变量以查看 AJAX 调用返回的状态。所以你可以做这样的事情：

```
var xmlhttp;
if (window.XMLHttpRequest)
    xmlhttp=new XMLHttpRequest();
else
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

xmlhttp.onreadystatechange=function()
{
    console.log("STATUS = "+ xmlhttp.status);
}
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send(); 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:52:39.787

对于测试，浏览器的内置调试怎么样？Chrome 可让您查看所有 Web 请求，包括标头（[在此处描述](https://developers.google.com/chrome-developer-tools/docs/network)），而 Firebug 也有类似的东西。

如果您不仅要在测试期间了解结果，而且要从用户那里获取 POST 成功状态，那么我认为跨域限制太强了，除非：

*   第三方服务提供了某种“是否有效”的 URL，您可以使用 JSONP 访问
*   第三方服务配置为允许使用 CORS 的跨站点 AJAX（[MDN 文档](https://developer.mozilla.org/en-US/docs/HTTP_access_control)）

# javascript - 对象...没有“附加”方法 - 需要快速帮助

> ID：12109465
> 
> 赞同：-3
> 
> 时间：2012-08-24T12:32:24.853
> 
> 标签：javascript, jquery

我目前正在尝试编写一个函数，通过勾选复选框动态地将唯一 ID 应用于列表项，尽管我遇到了一个问题，当将唯一 ID 附加到列表项时，我在控制台中收到以下错误消息：

```
Uncaught TypeError: Object SpTU 4, 183:false<br /> has no method 'append' 
```

这是导致错误的代码：

```
strng += name+":"+val+"<br />";
var i = 1;
strng.append($({ type: "text", id:+i })); 
```

我需要快速帮助，所以任何帮助将不胜感激！提前致谢

--------编辑--------- 这是整个功能，所以更容易理解，我是新手，可能会非常混乱和不专业。

```
var dataToShow = {};
function check(tickbox){
  dataToShow[tickbox.value] = tickbox.checked == true;
  showDataOnScreen(dataToShow);

function showDataOnScreen(dataToShow){
var $strng = "";
jQuery.each(dataToShow,function(name,val){
    $strng += name+":"+val+"<br />";
    var i = 1;
    $strng.append($({ type: "text", id:+i }));
    });

jQuery("#list").html(strng); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:36:34.767

确保 strng 是 JQUERY 对象，假设您使用的是 JQUERY

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:52:03.243

如果您正在尝试构建已检查项目的列表，我会这样做。

```
// create an array to store the checked items
var checkedItems = new Array();

// loop through the checked check boxes contained in the list element
// and add them to the array
$("#list :checked").each(function (){
    var item = { name: $(this).attr("name"), value: $(this).val() };
    checkedItems.push(item);
}); 
```

或者，更好的是，如果您打算在不同的元素中显示结果，您可以删除数组。

```
// loop through the checked check boxes contained in the list element
// and add them to a different element
$("#list :checked").each(function (){
    var item = "<div>"+ $(this).attr("name") + ": " + $(this).val() + "</div>";
    $("#selectedList").append(item);
}); 
```

这是关于 jsFiddle[的一个工作示例。](http://jsfiddle.net/jrummell/ZcNQ4/)

参考：

*   数组：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)
*   jQuery each(): [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)
*   jQuery :checked 选择器：[http ://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)
*   jQuery 追加（）：[http ://api.jquery.com/append/](http://api.jquery.com/append/)

# iphone - Random with selected number in xcode

> ID：12109469
> 
> 赞同：1
> 
> 时间：2012-08-24T12:32:39.950
> 
> 标签：iphone, ios5, xcode4.3

I have numbers in integer that is 0, 17, 23, 44, 57, 60, 66, 83, 89, 91, 100, but i want to random 6 number from that number, how to do that? I can show only for one random number from 0-100 but i dont know how to show 6 number from selected number. Please teach.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:39:50.137

If you would like to pick six numbers without repetitions from the array, shuffle the array using [Knuth-Fisher–Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle), and take the first six numbers:

```
int data[] = {0, 17, 23, 44, 57, 60, 66, 83, 89, 91, 100};
// Knuth-Fisher-Yates
for (int i = 10 ; i > 0 ; i--) {
    int n = rand() % (i+1);
    int tmp = data[i];
    data[i] = data[n];
    data[n] = tmp;
} 
```

The first six elements of the `data` array contain a random selection from the original 11-element array.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:34:54.683

Put the numbers in an array. Use a random number generator to get a random number between 0 and 1 less than the length of the array, and then get the number at that index.

That's just one way of doing it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T12:37:42.787

For fetching the random number into array for that following code may be useful to you

```
[array objectAtIndex: (random() % [array count])] 
```

Here is the example

```
NSUInteger firstObject = 0;

for (int i = 0; i<[myNSMutableArray count];i++) {
    NSUInteger randomIndex = random() % [myNSMutableArray count];
    [myNSMutableArray exchangeObjectAtIndex:firstObject withObjectAtIndex:randomIndex];
    firstObject +=1;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:36:17.953

See this post: [Generating random numbers in Objective-C](https://stackoverflow.com/questions/160890/generating-random-numbers-in-objective-c)

There are lots of ways to do this. This particular method has a very good response. To get 6 random numbers simply run the function 6 times.

# c++ - SFINAE：如果不带参数调用，则重载不明确

> ID：12109471
> 
> 赞同：4
> 
> 时间：2012-08-24T12:32:47.330
> 
> 标签：c++, c++11, sfinae

考虑以下典型的 SFINAE 测试函数（它检查类型是否具有`begin()`成员函数）

```
 template <class> constexpr bool
has_begin_member (...) { return false; }

    template <class T> constexpr bool
has_begin_member (decltype (std::declval <T>().begin ())* = 0) { 
    return true;
} 
```

我可以用一个参数来调用它：

```
has_begin_member <int> (0); // yields false 
```

但没有任何论据：

```
has_begin_member <int> (); // compilation error 
```

它导致以下歧义：

```
error: call of overloaded 'has_begin_member()' is ambiguous
note: candidates are:
note: constexpr bool has_begin_member(...)
note: constexpr bool has_begin_member(decltype (declval<T>().begin())*) 
```

为什么在这种情况下“省略号技巧”不起作用？

编辑：完整程序：

```
#include <utility>
#include <vector>

    template <class> constexpr bool
has_begin_member (...) { return false; }

    template <class T> constexpr bool
has_begin_member (decltype (std::declval <T>().begin ())* = 0) { 
    return true;
}

static_assert (!has_begin_member <int> (0), "broken");
static_assert (has_begin_member <std::vector <int>> (0), "broken");

static_assert (!has_begin_member <int> (), "broken");
static_assert (has_begin_member <std::vector <int>> (), "broken");

    int 
main (){} 
```

汇编：

```
g++ -std=c++11 -o toto ./toto.cpp
./toto.cpp:17:58: error: call of overloaded 'has_begin_member()' is ambiguous
./toto.cpp:17:58: note: candidates are:
./toto.cpp:5:5: note: constexpr bool has_begin_member(...) [with <template-parameter-1-1> = std::vector<int>]
./toto.cpp:8:5: note: constexpr bool has_begin_member(decltype (declval<T>().begin())*) [with T = std::vector<int>; decltype (declval<T>().begin()) = __gnu_cxx::__normal_iterator<int*, std::vector<int> >] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:43:57.000

对于`has_begin_member<int>()`第二个重载不可行的情况，因为模板参数替换失败，所以只有第一个重载是可行的，所以没有歧义。

对于`has_begin_member<std::vector<int>>()`案例替换成功，因此有两个可行的功能。

13.3.2 [over.match.viable]：

> *   如果列表中有*m*个参数，则所有具有恰好*m*个参数的候选函数都是可行的。
> *   具有少于*m*个参数的候选函数只有在其参数列表中有省略号时才可行（8.3.5）。出于重载决议的目的，任何没有相应参数的参数都被认为是“匹配省略号”（13.3.3.1.3）。
> *   仅当*(m+1)* -st 参数具有默认参数 (8.3.6)时，具有多于*m个参数的候选函数才是可行的。*出于重载决议的目的，参数列表在右侧被截断，因此正好有*m*个参数。

 **在这种情况下， *m*为零，第一个重载是可行的（通过第二个项目符号），第二个重载也是可行的（通过第三个项目符号），但是为了重载决议的目的，具有默认参数的参数被忽略，因此通过比较找到最佳可行功能：

```
template<> constexpr bool has_begin_member<vector<int>>(...);
template<> constexpr bool has_begin_member<vector<int>>(); 
```

这显然是模棱两可的，就像这样：

```
int f(...);
int f();

int i = f();  // error 
```

调用任何一个函数都不需要转换序列，因此不能根据哪个具有比另一个“更好的转换序列”来对它们进行排名（使用 13.3.3.2 [over.ics.rank] 中的规则），这意味着它们是模棱两可的。**

# android - 在android中加载视频（mp4）文件

> ID：12109489
> 
> 赞同：0
> 
> 时间：2012-08-24T12:33:59.330
> 
> 标签：android, media-player, mp4, playback

```
 VideoView v = (VideoView) findViewById(R.id.VideoView01);
     Uri uri = Uri.parse("android.resource://" + getPackageName() + "vid.mp4");
     mc = new MediaController(this);
     v.setMediaController(mc);
     v.setVideoURI(uri);
     v.start(); 
```

出现一个警告框，提示无法播放视频。您有解决方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:04:25.850

这是一个 linux 文件系统权限问题。文件的位置完全由您的应用程序拥有。从文件系统的角度来看，[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)服务 ViewView 依赖于作为不同的“用户”运行。

我过去解决这个问题的方法是创建一个自定义 VideoView 扩展[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)，它将[FileDiscriptor](http://developer.android.com/reference/java/io/FileDescriptor.html)作为它的[数据源](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.io.FileDescriptor%29)。

就文件系统而言，这方面通过提供与已经打开的数据的连接来解决问题。

如果您感觉活泼，您可以从 google[下载 VideoView 代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/VideoView.java)并添加一个新的 setVideoFileDiscriptor 方法。

# ruby - 循环遍历 XML 以在 Ruby 中创建散列数组

> ID：12109491
> 
> 赞同：2
> 
> 时间：2012-08-24T12:34:03.910
> 
> 标签：ruby, xml, arrays, hashmap

我有以下 XML

```
<CallResult>
  <Success>true</Success>
  <Result>
    <ZoneInfo>
      <Id>3</Id>
      <Name>test-room</Name>
      <NId>sdfsdg</NId>
    </ZoneInfo>
    <ZoneInfo>
      <Id>16</Id>
      <Name>Dynamic</Name>
      <NId>sadadrwed543th</NId>
    </ZoneInfo>
    <ZoneInfo>
      <Id>32</Id>
      <Name>lobby</Name>
      <NId>ssdfrgfdfg</NId>
    </ZoneInfo>
    <ZoneInfo>
      <Id>33</Id>
      <Name>conf</Name>
      <NId>sdfsfewr232f</NId>
    </ZoneInfo>
  </Result>
  <Message>Success</Message>
</CallResult> 
```

我正在尝试解析 XML，以便每个不同的“ZoneInfo”属性都是数组中的哈希。

例如

区域 [0] = 哈希 [Id => 32，名称 => 大厅，NId => ssdfrgfdfg]

Zones[1] = Hash[Id => 33, Name => conf, NId => sdfsfewr232f] 等等...

我有限的 XML 解析知识已经收获颇丰。我真正知道的是如何提取单个元素。例如

```
doc = REXML::Document.new(xmlData)
doc.elements.each("CallResult/Success") do |ele|
  p ele.text;
end 
```

有人可以提供更多关于如何循环从每个“ZoneInfo”元素中提取信息的信息吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:11:28.013

我使用另一个 gem 'nokogiri'，也许是现在解析 HTML/XML 的最佳 gem。

```
require 'nokogiri'

str = "<CallResult> ......"
doc = Nokogiri.XML(str)
Zones = []
doc.xpath('//ZoneInfo').each do |zone|
  Zones << { "Id" => zone.xpath('Id').text, "Name" => zone.xpath('Name').text, "NId" => zone.xpath("NId").text}
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:05:30.127

你只需要使用紫菜宝石

```
require 'nori'
your_hash = Nori.parse(your_xml) 
```

如果您需要以这种方式存储数据，那么将这个嵌套散列转换为散列数组应该很简单。

如果您需要更多信息，这里有 api 文档 - [http://rubydoc.info/gems/nori/1.1.3/frames](http://rubydoc.info/gems/nori/1.1.3/frames)

# asp.net - 处理 contextregistry 内容/关闭 httpsession/清除会话缓存时出错

> ID：12109497
> 
> 赞同：1
> 
> 时间：2012-08-24T12:34:35.473
> 
> 标签：asp.net, spring, hibernate, httpcontext, httpcontext.cache

**当我第二次**运行该应用程序时，我遇到了一个致命的 asp.net 应用程序。重新构建后第一次运行成功，但第二次运行（没有新的重新构建）失败。重新构建后，应用程序再次运行，但没有重新构建的第二次运行失败等。所以我每次都必须重新构建应用程序运行才能成功。

> 错误：无法解析文件 [C:...\bin\BiFiContext.xml] 第 8 行中定义的名称为“BiFiModelSweden”的对象的类型 [BiFiModelSweden.BiFiModelSwedenClass]

这发生在下面的最后一个命令中，同时创建为空的 IApplicationContext：

```
String cx1 = ConfigurationManager.AppSettings["cx1"];
String cx2 = ConfigurationManager.AppSettings["cx2"];
IApplicationContext cxt = new XmlApplicationContext(HttpContext.Current.Request. MapPath(cx1), HttpContext.Current.Request.MapPath(cx2)); 
```

在分析运行应用程序的开发网络服务器后，使用 ANTS 内存分析器，我们得到一个输出：

> 并非所有对象都已从上下文注册表中删除。您是否忘记使用 base.Dispose()？

然后，我们尽我们所能通过各种方式使用 dispose 方法。我们无法克服这个致命的应用程序崩溃！

额外观察：即使应用程序在中途停止，log4net 也会继续记录。这是否象征着僵尸会议？这可能是问题吗，当我们开始一个新的应用程序运行/会话时，我们永远不会完全终止一个会话？导致致命异常？上一个会话被挂起并持有（锁定）资源？

如果是这种情况，我们已经尝试了所有终止会话的方法： * session.Abandon() * gc.finalize() * 等等

没有任何效果。唯一的解决方法是手动删除缓存......这是不切实际的。我们如何解决这个问题！！

# python - 在不超出范围的情况下循环遍历所有列表 [x] 的最有效方法？

> ID：12109499
> 
> 赞同：-2
> 
> 时间：2012-08-24T12:34:41.850
> 
> 标签：python, list, for-loop, var

我正在传递一个最多包含 6 个条目的列表。如果列表短于 6，我需要将每个条目分配给不同的 var 而不会超出范围。

所以我需要：

```
var_1 = list[0]
var_2 = list[1]
var_3 = list[2]
var_4 = list[3]
var_5 = list[4]
var_6 = list[5] 
```

var 可以预先分配 None 或（最好）做

```
var 3 = list[2] or None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:46:56.317

改用字典。

```
lst = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k']
dct = {'var_%s'%(i+1) : val for i, val in enumerate(lst)}

dct['var_1'] #accessing fist variable
>>> 'a'
dct['var_11']
>>> 'k'
dct['var_12']
>>> KeyError: 'var_12' 
```

注意：如果你真的，*真的*坚持将它们作为变量，你可以做`locals().update(dct)`. 但我不推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:37:53.377

用作变量名是个坏主意`list`，所以我将其更改为`lst`

```
var_1, var_2, var_3, var_4, var_5, var_6 = lst + [None] * (len(lst) - 6) 
```

# android - Android 用服务“说话”

> ID：12109500
> 
> 赞同：0
> 
> 时间：2012-08-24T12:34:44.787
> 
> 标签：android, service, connection

我有一个扩展`service`. 我可以用 启动服务`startService(intent)`并用 停止它`stopService(intent)`。

但是，如果我需要在启动后向服务发送一些信息怎么办？

例如，就我而言，我需要调用一些方法。我该怎么做？

我认为这是一件简单的事情，但我在网上寻找它却没有找到简单的方法。我需要使用远程服务还是有更简单的方法？

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:38:00.300

使用[广播和广播接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:44:11.937

要从 Activity 调用 Service 中的方法，您需要在 Activity 中绑定 Service。查看官方开发人员指南中的[绑定服务](http://developer.android.com/guide/components/bound-services.html)。

如果您不想使用活动，请使用 Nieks 建议使用广播和广播接收器。

但话又说回来，如果您需要定期调用服务中的方法，也许它不应该是服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:51:09.257

将您的服务转换为[IntentService](http://developer.android.com/reference/android/app/IntentService.html)，它将为您处理服务生命周期。

每个 startService(intent) 将代表服务的一个新“工作”。

如果您需要进度或完成通知，请使用[广播和广播接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T21:28:25.377

或者只是使用`startService()`并发送`Intent`一些数据。不需要很复杂。

# php - 1345810203 在 strtotime 和 date() 中的错误转换

> ID：12109508
> 
> 赞同：2
> 
> 时间：2012-08-24T12:35:29.807
> 
> 标签：php

我想存储开始时间和结束时间并计算两次之间的总时间差。有时我会因为`-1 min -24 sec`这个问题而得到负时间......

如果我回显这段代码

```
date('Y-m-d h:m:s',1345810203); 
```

我得到了答案`2012-08-24 02:08:03`，但我回显了这段代码

```
strtotime('2012-08-24 02:08:03'); 
```

我得到了答案`1345766883`。

如果时间为`1345810167`或`1345810187`，请在 strtotime & date() 中给出正确的时间。

问题是什么 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T12:38:01.400

你有错误的格式。

`m`是`Numeric representation of a month, with leading zeros`

`i`是`Minutes with leading zeros`

使用以下格式：

```
'Y-m-d h:i:s' 
```

参考： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# jsp - RequestDispatcher 未转发到新页面

> ID：12109511
> 
> 赞同：0
> 
> 时间：2012-08-24T12:35:48.753
> 
> 标签：jsp

我有一个 ProductName 链接列表，如下所示：

```
<a href='btnAction=productDetails&productId=IP16G'> IPhone </a'>
<a href='btnAction=productDetails&productID=SOPr'> Some other product </a> and so on ... 
```

我试过调试，发现`P`不是`null`，但`request.getRequestDispatcher("details.jsp")`不是转发到`details.jsp`页面。

下面是相关的代码块：

```
if (action.equals("productDetails")) {

    try {

        String productId = request.getParameter("productId");

        ProductsRepository pRep  = new ProductsRepository();

        pRep.getProductById(productId);

        Products p = pRep.getProduct();

        request.setAttribute("Product", p);

        RequestDispatcher rd = request.getRequestDispatcher("details.jsp");

        rd.forward(request, response); 
```

# android - DecorView 子框架布局在设备上有所不同

> ID：12109512
> 
> 赞同：3
> 
> 时间：2012-08-24T12:35:53.037
> 
> 标签：android, android-framelayout

我使用类似的库`github.com/bk138/LibSlideMenu`

它在`HTC device(ICS)`and`Nexus 7(ICS)`和其他`Gingerbread`设备中运行良好。

但有些设备喜欢`Motorola atrix`和另一种`HTC`设备。

所以我检查了代码。

```
View view  = act.findViewById(android.R.id.content);
Utils.Log("<SlideMenu> : VIEW : "+view);        
ViewParent viewParent = view.getParent();
Utils.Log("<SlideMenu> : VIEW : "+viewParent);  
LinearLayout linearLayout = (LinearLayout) viewParent;
Utils.Log("<SlideMenu> : VIEW : "+linearLayout);
content = linearLayout; 
```

在这里，首先`FrameLayout`在所有设备上返回。

但是第二件事`LinearLayout`在`ICS`设备和其他`HTC 2.3`设备上返回，有些设备返回`DecorView`。

我参考这篇文章：[DecorView Child FrameLayout](https://stackoverflow.com/questions/11650847/decorview-child-framelayout)

他们说这是我使用的问题`NoTitleBar`，所以我显示标题栏但它不起作用。

此外，即使我添加了`NoTitleBar`属性，有些设备确实工作得很好。

这真的很令人沮丧，因为设备有不同的结果。有人知道吗？

请帮助 :D 在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:05:29.913

我相信我们可以确定一些关于 PhoneWindow$DecorView 的事情（或者至少与为 android 开发的一样确定）。

首先，DecorView 扩展了 FrameLayout，因此，我们可以放心地将其转换为父类 ViewGroup。也就是说，其次，我们还可以确信 DecorView 包含父类 View(s)（否则它会是一个相当无聊的 ViewGroup，不是吗）。

这使我得出结论，应该从自上而下而不是自下而上攻击这个问题，因为有问题的库代码正在尝试。

例如这样的：

```
ViewGroup decorView = (ViewGroup) getWindow().getDecorView();
View oldScreen = decorView.getChildAt(0);
decorView.removeViewAt(0);
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
SlidingPanel slidingPanel = (SlidingPanel) inflater.inflate(R.layout.screen_slider, null);
((ViewGroup) slidingPanel.findViewById(R.id.anterior)).addView(oldScreen);
decorView.addView(slidingPanel, 0); 
```

我最近实现了一个类似的基本 SlidingPanel 小部件，并按照上面的方法使用它。你可以在这里找到它和进一步的示例用法[https://github.com/mubeta06/android/tree/master/SlidingFrame](https://github.com/mubeta06/android/tree/master/SlidingFrame)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:56:49.970

Android SDK 文档中没有任何内容指定 的布局类型`android.R.id.content`，更不用说它的父级了。这可能会因 Android 操作系统版本、设备制造商更改或修改后的 ROM 更改而有所不同。大多数SDK开发人员甚至不应该*接触*; `android.R.id.content`没有人应该假设任何具体的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T16:46:06.387

[https://github.com/bk138/LibSlideMenu/commit/9b9ae22c8e463559324e377f6e89a430dd4fd7ca](https://github.com/bk138/LibSlideMenu/commit/9b9ae22c8e463559324e377f6e89a430dd4fd7ca)希望能解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:27:44.643

检查我为[LibSlideMenu](https://github.com/bk138/LibSlideMenu/issues/12)做的这个链接：

```
private static ViewGroup parent; 
```

全部转换`FrameLayout.LayoutParams`为

```
LayoutParams  parent = (ViewGroup) act.getWindow().getDecorView(); 
```

# c# - 不可为空类型的 MVC 4 WebAPI 验证

> ID：12109514
> 
> 赞同：2
> 
> 时间：2012-08-24T12:36:04.543
> 
> 标签：c#, .net, asp.net-mvc, rest, asp.net-web-api

在尝试使用 WebAPI 创建 RESTful Web 服务时，有一件事一直困扰着我：如何处理不可为空的类型？

示例对象：

```
public class Product {
    public Guid Id {get; set;}
    public string Name {get; set;}
    public decimal Price {get; set;}
    public bool InStock {get; set;}
} 
```

示例控制器方法：

```
public void Put (Product product){
    productRepository.Update(product);
} 
```

示例 json 调用 PUT：

```
{
    "Id": "8E28961C-C99E-4EED-9F33-44D33C107A33",
    "Name": "Generic Bottled Water"
} 
```

所以我们现在陷入了两难境地，json调用不包括请求中的`Price`or`InStock`属性，所以反序列化了`Price=0`and `Instock=false`。在这个阶段，现在无法验证请求，因为我们无法知道他们是否故意设置了这些值，或者它们是否因为它们不存在而被默认。

让他们为空！我听到走廊里有人在哭泣。是的，我确实可以通过`?`在每个声明的末尾添加一点点来使我所有的值类型都可以为空。不过，这对我来说是一个糟糕的想法，也是对可空类型的滥用。模型视图控件是独立的，如果您的模型必须关心控制器将如何使用它，那么您已经使您的关注点分离无效。

强制他们通过所有属性！我听到别人哭了。然而，这会导致带宽浪费，因为多余的数据会飞回第四次。

那么答案是什么。？我在这件事上的 2 美分是，如果您不想为了控制器而损害您的核心模型，并且您也不想强迫您的 api 使用者每次都发送完整的对象，那么您就剩下一个解决方案。

通过的所有内容都被序列化为一个集合，然后您验证该集合以确定是否所有需要的属性都存在。因此，您最终可能会得到以下结果：

```
public void Put (Guid productId, Dictionary<string, object> productDictionary){
    ...retrieve and validate existing product.

    if (productDictionary.ContainsKey("Price"))
        existingProduct.Price = productDictionary["Price"];

    if (productDictionary.ContainsKey("InStock"))
        existingProduct.Price = productDictionary["InStock"];

    productRepository.Update(existingProduct);
} 
```

老实说，我也不特别喜欢这种方式，但是我看不到真正的选择。我真的不想让我的所有对象属性都可以为空，也不想强制客户端传递所有数据。

有没有人对如何解决这个问题有更好的建议？也许我缺少一些验证子句或库？一些可以处理这个问题的架构模式？

我真的觉得对象模型的序列化有点假经济。

**编辑**

我重新打开了这个问题，因为研究 DTO 我真的不认为它们是前进的方向。它们增加了复杂性并降低了可维护性，同时不会给你任何东西，比如字典或集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:03:02.683

这是您应该专门为控制器操作创建单独的视图模型的时候。视图模型可以具有可为空的属性，然后您可以在控制器中创建的 Product 实例上设置所需的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:44:06.987

自定义模型绑定器会解决您的问题吗？您可以根据请求传递给您的信息来决定如何实例化模型以及要填充哪些属性以及如何填充。这基本上与您提供的解决方案相同，但没有序列化和所有额外的处理，就像您自己创建模型一样。

# iphone - 在 iPhone 中裁剪后 UIImage 显示模糊

> ID：12109519
> 
> 赞同：0
> 
> 时间：2012-08-24T12:36:22.377
> 
> 标签：iphone, uiimage, crop, blur

我的应用程序，我有一个 uiscrollview 并在其上有子视图 uiimageview，当用户单击它显示在该图像视图上的库中的任何照片时，用户可以移动、缩放和缩放图像，当用户单击裁剪按钮时，它应该裁剪该部分是在 imageview 中，在 iPhone 3GS 中它的工作非常好，但是在视网膜中它不能正常工作，裁剪显示不同的图像。

```
- (UIImage *)currentSlice {

    CGSize sliceSize = imageView.frame.size;

    UIGraphicsBeginImageContextWithOptions(sliceSize, NO, 0.0);
    [imageView.image drawInRect:CGRectMake(0, 0, sliceSize.width, sliceSize.height)];
    UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CGRect sliceRect = CGRectMake(scrollView.contentOffset.x, scrollView.contentOffset.y, scrollView.frame.size.width, scrollView.frame.size.height);
    CGImageRef imageSlice = CGImageCreateWithImageInRect(scaledImage.CGImage, sliceRect);
    return [UIImage imageWithCGImage:imageSlice];
} 
```

我已经使用这种方法进行裁剪，请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:39:22.313

帧大小不代表物理像素。因此，如果您正在使用视网膜，请进行以下更改。

```
CGSize sliceSize = CGSizeMake(imageView.frame.size.width * 2.0, imageView.frame.size.height * 2.0);

CGRect sliceRect = CGRectMake(scrollView.contentOffset.x, scrollView.contentOffset.y, scrollView.frame.size.width * 2.0, scrollView.frame.size.height * 2.0); 
```

其余的都很好。

# java - Java 看不到文件系统上包含非法字符的文件

> ID：12109520
> 
> 赞同：6
> 
> 时间：2012-08-24T12:36:27.360
> 
> 标签：java, utf-8, character-encoding, filenotfoundexception, windows-1252

我正在试验我们在生产中看到的边缘案例。我们有一个业务模型，客户端生成文本文件，然后将它们通过 FTP 传输到我们的服务器。我们摄取这些文件并在我们的 Java 后端（在 CentOS 机器上运行）处理它们。我们的大多数 (95%+) 客户都知道以 UTF-8 格式生成这些文件，这正是我们想要的。然而，我们有一些顽固的客户端（但大帐户）在 Windows 机器上使用 CP1252 字符集生成这些文件。不过没问题，我们已经配置了我们的 3rd 方库（这是我们的大部分“处理”工作）以通过一些神奇的 voo doo 处理任何字符集的输入。

有时，我们会看到一个文件名中包含非法 UTF-8 字符 (CP1252)。当我们的软件尝试从 FTP 服务器读取这些文件时，正常的文件读取方法会阻塞并抛出`FileNotFoundException`：

```
File f = getFileFromFTPServer();
FileReader fReader = new FileReader(f);

String line = fReader.readLine();
// ...etc. 
```

例外情况如下所示：

```
java.io.FileNotFoundException: /path/to/file/some-text-blah?blah.xml (No such file or directory) at java.io.FileInputStream.open(Native Method) at 
java.io.FileInputStream.(FileInputStream.java:120) at java.io.FileReader.(FileReader.java:55) at com.myorg.backend.app.InputFileProcessor.run(InputFileProcessor.java:60) at 
java.lang.Thread.run(Thread.java:662) 
```

所以我认为正在发生的事情是，因为文件*名*本身包含非法字符，我们甚至一开始就无法读取它。如果可以，那么无论文件的内容如何，​​我们的软件都应该能够正确处理它。因此，读取文件名中包含非法 UTF-8 字符的文件名确实是一个问题。

作为一个测试用例，我创建了一个非常简单的 Java“应用程序”来部署在我们的一个服务器上并测试一些东西（源代码在下面提供）。然后我登录到一台 Windows 机器并创建了一个测试文件并将其命名为`test£.txt`. 注意文件名中“test”后面的字符。这是 Alt-0163。我将它通过 FTP 传送到我们的服务器，当我`ls -ltr`在其父目录上运行时，我惊讶地看到它列为`test?.txt`.

在我继续之前，这是我为测试/重现此问题而编写的 Java“应用程序”：

```
public Driver {
    public static void main(String[] args) {
        Driver d = new Driver();
        d.run(args[0]);     // I know this is bad, but its fine for our purposes here
    }

    private void run(String fileName) {
        InputStreamReader isr = null;
        BufferedReader buffReader = null;
        FileInputStream fis = null;
        String firstLineOfFile = "default";

        System.out.println("Processing " + fileName);

        try {
            System.out.println("Attempting UTF-8...");

            fis = new FileInputStream(fileName);
            isr = new InputStreamReader(fis, Charset.forName("UTF-8"));
            buffReader = new BufferedReader(isr);

            firstLineOfFile = buffReader.readLine();

            System.out.println("UTF-8 worked and first line of file is : " + firstLineOfFile);
        }
        catch(IOException io1) {
            // UTF-8 failed; try CP1252.
            try {
                System.out.println("UTF-8 failed. Attempting Windows-1252...(" + io1.getMessage() + ")");

                fis = new FileInputStream(fileName);
                // I've also tried variations "WINDOWS-1252", "Windows-1252", "CP1252", "Cp1252", "cp1252"
                isr = new InputStreamReader(fis, Charset.forName("windows-1252"));
                buffReader = new BufferedReader(isr);

                firstLineOfFile = buffReader.readLine();

                System.out.println("Windows-1252 worked and first line of file is : " + firstLineOfFile);
            }
            catch(IOException io2) {
                // Both UTF-8 and CP1252 failed...
                System.out.println("Both UTF-8 and Windows-1252 failed. Could not read file. (" + io2.getMessage() + ")");
            }
        }
    }
} 
```

当我从终端 ( `java -cp . com/Driver t*`) 运行它时，我得到以下输出：

```
Processing testï¿½.txt
Attempting UTF-8...
UTF-8 failed. Attempting Windows-1252...(testï¿½.txt (No such file or directory))
Both UTF-8 and Windows-1252 failed. Could not read file.(testï¿½.txt (No such file or directory)) 
```

`testï¿½.txt`？！？！我做了一些研究，发现“ï¿½”是 Unicode 替换字符`\uFFFD`。所以我**猜**发生的事情是 CentOS FTP 服务器不知道如何处理 Alt-0163 ( `£`)，所以它用`\uFFFD`( `ï¿½`) 替换它。但我不明白为什么`ls -ltr`显示一个名为`test?.txt`...的文件

无论如何，解决方案似乎是添加一些逻辑来搜索文件名中是否存在此字符，如果找到，则将文件重命名为其他名称（例如可能执行字符串`replaceAll("\uFFFD", "_")`或类似的操作）系统可以读取和处理。

问题是Java 甚至在文件系统上都*看不到*这个文件。`test?.txt`CentOS知道文件在`testï¿½.txt`那里`No such file or directory`（

我怎样才能让 Java 看到这个文件，以便我可以`File::renameTo(String)`对它执行？很抱歉这里的背景故事，但我觉得它是相关的，因为在这种情况下每个细节都很重要。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:24:02.890

欢迎来到文本编码的美妙世界。您有几个级别的问题，您需要单独对每个问题进行分类。

首先，磁盘上的文件名是什么？它是否包含有效的 UTF-8 转义序列或其他内容？

这里的问题是您需要正确的文件名，否则 Windows 文件系统将无法找到该文件。最重要的是，Windows 可能会尝试将文件名中的非法字符转换为 Unicode `\uFFFD`，因此无论您尝试什么，都无法加载该文件（因为`\uFFFD`磁盘上没有文件）。

怎么可能？发生这种情况是因为映射不是双向的。当 Windows 从磁盘加载文件名时，它会替换`testï¿½.txt`为`test\uFFFD.txt`并为您提供该名称。当您告诉 Windows 打开`test\uFFFD.txt`时，它将无法找到该文件，因为没有具有这样名称的文件（只有`testï¿½.txt`）。**您无法找出文件的真实名称。**

解决方案？您可以打开 dos 提示符并使用模式重命名文件`ren test*.txt test.txt`。由于该模式仅匹配单个文件，因此可以使用。但是您将无法在 Windows 资源管理器中执行相同操作，因为它也找不到该文件。

下一步：FTP。FTP 是人类的协议 - 它不适合自动数据交换。摆脱 FTP。我不知道这将花费你多少，但它总是值得的。使用 SFTP、scp 或[FTAPI](http://www.ftapi.com/)。

问题的来源之一可能是 FTP 以 ASCII 格式传输文件名。FTP 协议中不允许使用元音变音符号……或者更确切地说，FTP 不希望出现任何变音符号。如果幸运的话，您的 FTP 客户端会拒绝传输文件，但最简单的就是出错了。但是当它们存在时，FTP 只会做一些事情。不管那可能是什么。这里的通常效果是名称中带有 Unicode 的文件被编码两次，因为 UTF-8 或 Unicode 被`?`( `\u003f`) 替换。

或者，Java FTP 客户端可以使用`new String( bytes )`从 FTP 文件名创建一个字符串，这将使用系统的默认编码来处理糟糕的字节 - 不漂亮。

解决方案：

1.  使用 FTP 服务器拒绝名称中包含非法字符的文件，或者将这些字符替换为不会混淆文件系统/操作系统的内容。
2.  使用能够正确处理具有奇怪名称的文件的文件系统。这通常意味着摆脱服务器上的 Windows。
3.  确保用户只能上传到单个目录，并且该目录只能包含单个文件。这样，您可以使用一个小的 shell 脚本和模式将其重命名为您可以阅读的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-24T12:31:08.823

这是 old-skool java File api 中的一个错误，可能只是在 mac 上？无论如何，新的 java.nio api 工作得更好。我有几个文件包含无法使用 java.io... 类加载的 unicode 字符。在将我的所有代码转换为使用[java.nio.Path](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)之后，一切都开始工作了。我用[java.nio.Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)替换了 apache FileUtils （有同样的问题） ......

请务必使用适当的字符集读取和写入文件的内容，例如： Files.readAllLines(myPath, StandardCharsets.UTF_8)

# heroku - 通过 Heroku（dns 记录）访问我的网络邮件

> ID：12109523
> 
> 赞同：2
> 
> 时间：2012-08-24T12:36:30.770
> 
> 标签：heroku, dns, webmail

我需要一些帮助来访问我的网络邮件。

我想要做的是使用我自己的域名（我想我可以通过“自定义域”来完成）并使用我的域名附带的个人 nsMail。

为了能够使用我的域名，我的域名提供商需要拥有正确的 DNS 信息。我不知道如何以及从何处获取这些信息。

另外，我想访问我的网络邮件。当我与我的网络邮件提供商（与我的域名提供商相同）交谈时，他们告诉我，我必须将我的网络邮件（DNS 记录）的一些详细信息提供给我的网络托管服务提供商（即 heroku），以便我可以访问我的邮件。

谢谢您的帮助

# ios - 单点触控应用的 I18N 方法

> ID：12109525
> 
> 赞同：1
> 
> 时间：2012-08-24T12:36:37.400
> 
> 标签：ios, localization, internationalization, xamarin.ios, app-store

我可以为 i18n 我的应用程序使用带有字符串常量的公共静态类吗？我的意思是，Apple 可以拒绝不使用 lproj-folders 和 strings-files for i18n 的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:24:19.047

人们正在使用各种解决方案（包括使用.lproj、.net-like、gettext-like），*我*从未听说过基于此的拒绝。我认为推广本地化应用程序（对每个人，包括 Apple）来说比实施它的工具/技术选择更重要。

OTOH自己动手可能不是最好的前进方式，即其他人解决的问题是您不必自己解决的问题；-)

Rdio 具有针对移动 .NET 应用程序的开源[白话（即 MonoTouch、用于 Android 和 Windows 手机的 Mono）。](https://github.com/rdio/vernacular)

# c# - 使用事件接收器更新 SharePoint 库中的文档元数据

> ID：12109527
> 
> 赞同：1
> 
> 时间：2012-08-24T12:36:36.873
> 
> 标签：c#, events, sharepoint, checkout, checkin

我有一个事件接收器，它应该将元数据添加到 SharePoint 库中的文档中。事件接收器在 ItemUpdated 上触发，并且应该将 URL 添加到字段。

以下代码完美运行，除了一个小问题，在替换文档时它仍处于签出状态。

因此，当我向库中添加新文档时，事件接收器会添加元数据并签入该文档。但是，当我上传具有相同名称的新文档并替换它时，该文档没有任何元数据并已签出。然后当我手动签入文档时，会添加元数据。

这是我的代码。

```
SPField projectNameDocField = Methods.GetField(web, sharedDocumentList, Field.projectURLInternal);

SPListItem projectSiteItem = GetProjectSiteItem(web);

SPField projectNameSiteField = Methods.GetField(web.ParentWeb, projectSiteItem.ParentList, Field.projectURLInternal);

if (listItem.File.CheckOutType == SPFile.SPCheckOutType.None)
{
    listItem.File.CheckOut();

    if (projectSiteItem[projectNameSiteField.Id] != null)
    {
        SPFieldUrlValue projectNameUrlField = new SPFieldUrlValue();
        projectNameUrlField.Description = web.Title;
        projectNameUrlField.Url = web.Url;

        listItem[projectNameDocField.Id] = projectNameUrlField;
        listItem.Update();

        SPListItem updatedListItem = sharedDocumentList.GetItemById(listItem.ID);

        if (updatedListItem.File.CheckOutType != SPFile.SPCheckOutType.None)
        {
            updatedListItem.File.CheckIn("Automatisk uppdatering av metataggar", SPCheckinType.MinorCheckIn);
        }
    }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:05:14.933

您的事件接收器仅在项目更新后触发。当您上传文档以替换现有文档时，在签入更改之前不会触发该事件。

尽管我没有测试过[ItemUpdating 事件](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemupdating%28v=office.14%29.aspx)，但您可能会更幸运。这可能会在登记入住前触发。

您可以在[此处查看完整的活动列表，](http://msdn.microsoft.com/en-us/library/ff408183%28v=office.14%29.aspx)以供其他人尝试。

# java - 如何使用 SQL 将应用程序重写为谷歌应用引擎的 NoSQL 数据存储

> ID：12109535
> 
> 赞同：0
> 
> 时间：2012-08-24T12:37:02.397
> 
> 标签：java, google-app-engine

我有一个使用 spring wicket 和 sql-processor（类似于 mybatis）的 Web 应用程序，它与数据库一起使用。现在我想尝试将此应用程序部署到谷歌应用引擎。我读到 GAE 支持不是免费的 Google Cloud SQL，所以我不想使用它和 App Engine Datastore。所以我需要使用第二个。是否有一些教程如何将我现在使用 SQL 的数据库层重写为 GAE 的 NoSQL 数据存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:25:40.857

老实说 - 不。

这类似于问：我的代码是用 Java 编写的，是否有教程如何用 C 重写它？（我故意说从功能更多的语言迁移到功能更少的语言）

SQL 和 NoSQL 完全不同。您将遇到的第一个障碍是 NoSQL 的功能要少得多：查询更简单（没有跨表查询，没有 JOIN）和事务有限（必须在实体组或 XG 内，限制为跨越五个实体）。

所有这一切的结果是 NoSQL 需要一种不同的编码方法：访问优化方法与结构优化方法。简而言之：您编写代码以尽可能少的操作访问数据。这会导致数据库去规范化，即在多个地方写入相同的数据以更快地获取它。

因此，唯一的方法是获取有关 Datastore 的信息，然后手动迁移代码。或者找一个了解数据存储 NoSQL 并会为您完成工作的人。

# c# - 无法使用 Gson 反序列化 byte[]

> ID：12109536
> 
> 赞同：4
> 
> 时间：2012-08-24T12:37:05.987
> 
> 标签：c#, java, json, json.net, gson

我有一个用 Java 编写的类和用 C# 编写的同一个类。我将 C# 类序列化为 json 字符串，并尝试在 Java 端反序列化它。在我为这两个类都添加了一个 byte[] 字段之前，一切都很顺利。以下是类定义： C#：

```
public class RegisterRequest : GenericRequest
{
    public string name { set; get; }
    public string sex { set; get; }
    public string birthday { set; get; }
    public string from { set; get; }
    public string about { set; get; }
    public byte[] image { set; get; }
} 
```

爪哇：

```
public class RegisterRequest extends GenericRequest{
    private String name;
    private String sex;
    private String birthday;
    private String from;
    private String about;
    private String pictureUrl;
    private byte[] image;
} 
```

C#端的序列化使用：`request.ToJson()`（Json.NET），Java反序列化使用：（`RegisterRequest rr = gsonObject.fromJson(msg, RegisterRequest.class);`使用Gson。msg是json字符串）

当我不在字节数组中发送任何内容时，它仍然有效。但是，当我填充数组时，Java 端出现异常：`com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was STRING at line 1 column 159089`

我猜需要有一些东西来标记 Gson 识别但 Json.NET 不添加到字符串的数组的开头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T18:58:19.970

鉴于上述评论的输入

```
"image":"/9j/4AAQSkZJRgAB..." 
```

并查看 Gson 如何序列化`byte[]`

```
"a":[96,-76,32,-69,56,81,-39,-44... 
```

答案很明显：Gson 使用 json 数组，而 json.net 使用 json 字符串。你必须改变其中之一。为 gson 编写自定义序列化程序很容易（尽管我从未尝试过使用`byte[]`），其他工具可能也是如此。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T13:06:40.917

好的，这是一个很酷的问题 - 我将继续尝试回答这个问题，因为评论变得很长。

首先，问题是您在读取数据时的解析器。它被二进制有效负载欺骗并遇到非法字符异常。这是因为它试图处理一个大的 ByteArray，但遇到一个它无法处理的字符或字节（可能是因为二进制文件中有一个字节无法转换为 UTF-8。另外，请记住字符是通常在 C# 中为 1 个字节，在 java 中也为 2 个字节。

我认为有两个原因可能是造成这种情况的原因。

1.  gson 阅读器没有接收到您发送的**“byte[]”**类型，它将您的二进制文件视为 UTF-8 编码的字符串。

2.  JSON.NET 字节数组的解释方式与 gson 不同 - 因此如果不编写与 JSON.NET 兼容的反序列化器，它将无法工作

我认为您需要继续查看数据，尝试更改编码，并且看看您是否可以获得一个用于 java 的 gson 解析器，它可以为您提供更多控制权，然后这个：)

# javascript - 在 Fancybox 中提交表单时运行函数

> ID：12109544
> 
> 赞同：0
> 
> 时间：2012-08-24T12:37:54.707
> 
> 标签：javascript, jquery, iframe, fancybox, form-submit

我的页面上有一个链接，它调用 Fancybox 中的登录表单。由于 CMS 中的作用域如何“工作”，这需要从不同的页面调用。

我的第一个想法是用 AJAX 调用它，但问题是页面会在提交时重定向到登录页面，这不是我想要的。它应该只是刷新当前页面。

然后我的第二个想法是将表单放入 iframe 中。它有点笨拙，但似乎可以解决问题。提交时，它只刷新 iframe 中的视图，而不是重定向用户，这是向前迈出的一步

但是，我们仍然需要刷新页面，以便在用户登录后更新内容。我尝试将函数绑定`.on(click)`到`<submit>`. 我还尝试将函数绑定到`onsubmit`表单本身。我什至尝试内联它。似乎都不会蹲下。

我是否应该放弃成为 Javascript 开发人员的梦想并重新过上犯罪的生活，或者实际上是否有真正的方法来做我想做的事情？

我正在使用 Fancybox v1.3 和 jQuery v1.7.2。

```
$('a#myLoginTrigger').fancybox({
    type: 'iframe'      
});

$('form#myForm').on('submit', function(){
    alert('Sweet dude, I can run functions in here!');

    // I assume this will refresh the entire page, not just the iframe
    location.reload();

    // This has no effect whatsoever
    return false; 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:23:12.337

尝试这个：

```
$('a#myLoginTrigger').fancybox({
    type: 'iframe',
    onComplete: function() {
        // Activate the form submit handler here
        $('form#myForm').on('submit', function(){
               alert('Sweet dude, I can run functions in here!');
        })
    }
}); 
```

一旦灯箱完全加载，就会触发 onComplete 回调。因此，您可以在该函数中激活表单处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:33:57.987

这就是我最终做的事情：

```
$('a#loginTrigger').fancybox({
    type: 'ajax',
    href: '/Login.aspx #loginContainer'
});

$('body').on('submit', '#forLogin', function(e) {
    e.preventDefault();

    var url = $(this).attr('action');

    $.post(url, $(this).serialize(), function(data) {
        location.reload();
    })
}); 
```

首先，我使用 AJAX 在登录页面上加载表单。然后，当用户提交表单时，我取消了默认操作，并将其 AJAX-post 到原始页面，然后重新加载整个页面。

我遇到的一个奇怪的错误是，如果操作 URL 包含问号，jQuery 无法弄清楚如何发布它。首先，我尝试使用`/?ID=42`（我的登录页面的 ID）发布到页面。CMS 可以使用 ID 和页面标题来导航页面。使用页面标题 (login.aspx) 效果很好。

但是，从 jQuery 1.7.2 更新到 1.8.0 后，此错误已修复。:)

# javascript - 如果某个值在另一个节点中，如何每秒自动单击一个链接？

> ID：12109550
> 
> 赞同：1
> 
> 时间：2012-08-24T12:38:02.890
> 
> 标签：javascript, greasemonkey

如果“剩余能量”值大于 20%，我想制作一个 Greasemonkey 脚本，该脚本每秒自动单击“清空垃圾”链接。

该页面的代码如下。感谢并为我糟糕的英语感到抱歉。

```
<div class="btn-group">
    <a class="btn btn-mini" href="#" data-toggle="dropdown"><i class="icon-wrench"></i> Chores</a>
    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
    <ul class="dropdown-menu">
        <li><a href="/pet/100000113715357/chore/1">Poke your owner (5%)</a></li>
        <li><a href="/pet/100000113715357/chore/2">Pinch your owner (10%)</a></li>
        <li><a href="/pet/100000113715357/chore/3">Serve strawberries (15%)</a></li>
        <li><a href="/pet/100000113715357/chore/4">Empty trash (20%)</a></li>
        <li><a href="/pet/100000113715357/chore/5">Iron clothes (40%)</a></li>
        <li><a href="/pet/100000113715357/chore/6">Clean the pet store (60%)</a></li>
        <li><a href="/pet/100000113715357/chore/7">Spank your owner (80%)</a></li>
        <li><a href="/pet/100000113715357/chore/8">Dance with your owner (100%)</a></li>
        <li class="divider"></li>
        <li><a href="#">Energy left: 15%</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:21:31.543

使用[jQuery 的 contains 选择器](http://www.jqapi.com/#p=contains-selector)和[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval).

这是一个应该关闭***的完整脚本：***

```
// ==UserScript==
// @name    _Auto-click the Empty trash link.
// @include http://YOUR_SERVER.COM/YOUR_PATH/*
// @require http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// ==/UserScript==

setInterval (EmptyTrashIfWeCan, 1000);  //1000 = 1 second.

function EmptyTrashIfWeCan () {
    var energyDisp  = $("div.btn-group ul.dropdown-menu li a:contains('Energy left')");
    var energyVal   = energyDisp.text ().replace (/^\s*Energy left:\s+(\d+)%\s*$/i, "$1");
    if (parseInt (energyVal, 10)  >  20) {
        var emptyTrashLink  = $("div.btn-group ul.dropdown-menu li a:contains('Empty trash')");
        //--- Click the link in a more robust way...
        var clickEvent      = document.createEvent ('MouseEvents');
        clickEvent.initEvent ('click', true, true);
        emptyTrashLink.dispatchEvent (clickEvent);
    }
} 
```

# facebook - 使用我的应用在 flickr 和 facebook 上分享同一张照片会违反 facebook TOS 吗？

> ID：12109552
> 
> 赞同：1
> 
> 时间：2012-08-24T12:38:07.263
> 
> 标签：facebook, policy

我正在浏览[http://developers.facebook.com/policy/上的 facebook 政策说明](http://developers.facebook.com/policy/)

第 12 (b) 节很有趣。它说“Facebook 上的应用程序不得集成、链接、推广、分发或重定向到任何其他竞争社交网络上的任何应用程序”

这是否意味着如果我创建一个应用程序将同一张照片发布到用户的 facebook 墙以及他的 flickr 帐户等，我的应用程序将违反此政策？

如果是，那么几乎所有 Android 和 iPhone 摄影应用程序都违反了它，因为您可以将同一张照片共享给多个服务。

如果不是，那么这句话是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:45:34.167

> 免责声明 - 我不是律师。只是另一个 Stack Overflow 用户。如果您想获得有关政策事项的法律声明，您应该让您的公司律师查看 TOS。

该声明中的关键词是“开”。Facebook 上的**应用**程序。与 Facebook 集成的应用程序不是 Facebook 上的应用**程序**。他们只是使用他们的 API。这就是为什么移动应用程序和网站可以有多个共享选项的原因。

这意味着在 Facebook 中查看的应用程序无法做到这一点。这意味着——

*   通过以下方式访问的应用程序 -`apps.facebook.com`
*   页面选项卡应用程序。

# android - Android：接听电话后拨打自定义号码

> ID：12109554
> 
> 赞同：2
> 
> 时间：2012-08-24T12:38:21.020
> 
> 标签：android

我正在开发一个接听电话的应用程序，并且在通话期间在拨号盘中，它会输入以前保存或复制的号码。首先，我想知道这是否可能。其次，我一直在思考一些想法，但我不知道它们可能有多疯狂，因为我对 Android 还比较陌生，对它的局限性知之甚少：

1.  在剪贴板中存储一个号码，并通过某种方式在通话屏幕中单击粘贴，这会将号码简单地粘贴到拨号器中
2.  获取存储在剪贴板中的数字中的每个数字，并以编程方式按下用户会触摸的电话键盘上的按键
3.  在我自己的应用程序中打开来电，该应用程序可以接听电话并能够在拨号器中粘贴/添加号码
4.  覆盖在呼叫中弹出的小键盘上的一个键（比如退格键），并*重新编程*以执行我想要的功能（因此，它会输入保存的数字而不是退格）

这些都可能吗（为什么或为什么不）？或者你能建议任何其他方式来完成我想要的吗？谢谢，非常感谢。

编辑：让我更具体一点。这是我的目标屏幕：

![在此处输入图像描述](../Images/c2d6980247c3b951115cfb2a7e2ec404.png) ![-](../Images/c2d6980247c3b951115cfb2a7e2ec404.png) 我需要*一些*方法来在这个字段中输入一个自定义数字。无论如何，我只需要一个线索或提示让我走上正轨。我见过人们制作自定义拨号器的应用程序，但他们所做的只是输入输入的号码并拨打电话。如果我必须制作自己的应用程序，它必须能够接听电话或访问接听电话，并填充上述字段，或者它自己的字段，以提供相同的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:44:25.910

我不认为有一个API

我现在想的最好方法是在通话期间（可能通过 Receiver）打开一个应用程序，其中包含一个 TextView，您可以在其中输入您的文本

然后在这里您可以拨打电话：

```
Intent intentCall = new Intent(Intent.ACTION_CALL, Uri.fromParts("tel", phoneNumber, null));
startActivity(intentCall); 
```

但我不知道手机应用程序会如何反应

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:46:37.213

如果我理解正确，您希望应用程序在接到电话后在拨号盘中输入几个数字。

以下可能是值得尝试的选项。

使用获取内部`com.android.internal.telephony.ITelephony`对象`Java reflection`。[详情在这里](http://prasanta-paul.blogspot.com/2010/09/call-control-in-android.html)。然后调用`dial()`方法。此方法只是将数字添加到拨号盘，但实际上并不发起电话呼叫。这可能对你有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T08:38:55.030

从您给出的描述来看，您似乎需要使用电话管理器界面。你可能会面临这个想法的问题是你会试图以编程方式接听电话并有效地改变电话状态。换句话说，您需要 MODIFY_PHONE_STATE 权限。此权限现在仅限于系统应用程序，从 Gingerbread 开始。如果没有这个基本的许可，我认为你的应用想法不会很可行。此外，由于您将尝试以编程方式输入数字，我假设这是为了发送 DTMF 音调，因此您会遇到应用程序无法访问 Android In Call Data 的问题。截至目前，缺少对 Android 中正确电话包的支持。

# prolog - 简单的 Prolog 生成器

> ID：12109558
> 
> 赞同：2
> 
> 时间：2012-08-24T12:38:48.380
> 
> 标签：prolog, generator

我是 Prolog 的新手，我正在尝试编写简单的生成器，它可以找到低于 5 的整数。

```
gen(0).
gen(X):- X<5 
```

当我使用 gen(X) 运行程序时，它只打印 X = 0 并提示我输入一些内容，当我按下 enter 时，'?-' 再次显示。

如何让他生成从零到五的数字？我正在使用 SWI-Prolog。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:37:30.467

如果您不想使用`between/3`，可以使用辅助程序轻松编写生成器`gen/3`：

```
gen(Num):-
  gen(0, 5, Num).

gen(Cur, Top, Cur):- Cur < Top.
gen(Cur, Top, Next):-
  Cur < Top,
  succ(Cur, Cur1),  % or Cur1 is Cur+1
  gen(Cur1, Top, Next). 
```

辅助过程`gen/3`跟踪当前生成的编号和顶部编号，并将第三个参数与当前生成的编号绑定。

的第一个子句`gen/3`成功，当输入数低于顶部时，将输出数与输入数绑定。

第二个子句增加当前数字并递归调用自身以在回溯时获取下一个数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:38:19.297

用于枚举整数的内置谓词介于 (Low,High,Num) 之间。

使用它你会写`gen(X) :- between(0,4,X).`

我已经以这种方式重新实现了

```
gen(X) :- between_(0, 4, X).

/* between_(I,J,K) is true if K is an integer between I and J inclusive.    */
between_(I,J,I) :- I =< J.
between_(I,J,K) :- I < J, I1 is I+1, between_(I1,J,K). 
```

问题的有趣部分是理解为什么只有一个参数的天真实现永远循环......

```
gen(0).
gen(X) :- gen(Y), X is Y + 1, X < 5.

?- gen(X).
X = 0 ;
X = 1 ;
X = 2 ;
X = 3 ;
X = 4 ;
^CAction (h for help) ? goals
[374,153] 3<5
[374,152] gen(3)
[374,151] gen(_G1013)
[374,150] gen(_G1013)
[374,149] gen(_G1013) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T23:25:48.697

好吧，因为 gen/1 应该生成从 0 到 5 的整数（从技术上讲，如果它是低于 5 的整数，我们也应该生成负数）你可以这样做：

```
gen(0).
gen(1).
gen(2).
gen(3).
gen(4).
gen(5). 
```

这在技术上满足了 chack 的限制 xD

`gen/2`对于第一个参数定义我们可以做的最大数量的谓词：

```
gen(N,R):-
    N>0,
    R is N-1.
gen(N,R):-
    N>1,
    NN is N-1,
    gen(NN,R). 
```

但这具有使用第一个参数的优点。避免第一个解决方案的规则改写是，我们应该能够在不更改规则的情况下用其他数字替换每次出现的 5，并且程序应该仍然可以工作；我们还应该补充一点，我们不能使用列表（除非它们正好有 1 个元素）或元组或基本上任何具有两个变量作为参数的术语以及任何类型的编码（例如`2^X`* ）。`3*Y`受第一个程序的启发：

```
gen(X):-
    clause(g(_),_) ->
    g(X) ; (generate(5),!, g(X)).

generate(-1):-
    compile_predicates([g/1]).
generate(N):-
    assert(g(N)),
    NN is N-1,
    generate(NN). 
```

`compile_predicates/1`只是为了提高速度；请注意，如果我们更改最大数量，我们应该重新启动 VM。另一种选择是避免编译并在我们调用之前`g/1`添加 a 。当然，明显的问题是它不是纯粹的序言，因为我们依赖元谓词。`retract_all(g(_))``generate/1`

好吧，有了所有这些限制，这似乎确实是不可能的

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T12:43:40.127

使用内置功能`numlist`怎么样？

```
?- numlist(0,4,X).
X = [0, 1, 2, 3, 4]. 
```

# xpages - 更改视图中行的顺序

> ID：12109559
> 
> 赞同：0
> 
> 时间：2012-08-24T12:38:48.713
> 
> 标签：xpages

我有一个按名为“order”的列排序的视图。此列只有一个数字字段，从 1、2、3 开始......在另一列中，我放了一个向上箭头。

现在，当用户在例如第 3 行时单击此向上箭头时，第 3 行的字段“order”的值应更改为 2，第 2 行的字段“order”的值应更改为 3，并且视图应该更新以显示更改。

用 k = rowData.getColumnValue("order"); 我得到当前行的值。现在如何保存这一行的更改，以及如何更改另一行的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:15:12.687

我假设您正在使用 View Panel 或类似的使用 NotesXspViewEntries 或 NotesViewEntries 的东西。这些对象是只读的，您不能立即更新它们。

您需要获取相关 NotesXspViewEntries 的 NotesDocument 对象的句柄并修改它们的相关字段。然后您需要刷新视图。

# winapi - 绘制鼠标光标

> ID：12109560
> 
> 赞同：4
> 
> 时间：2012-08-24T12:38:50.963
> 
> 标签：winapi, gdi, mouse-cursor

我正在尝试在 Win32 表单中模拟鼠标光标。在`WM_MOUSEMOVE`我拥有的每一个

```
hCursor = LoadCursor(NULL, IDC_ARROW);
////Get device context
hDeviceContext = GetDC(hwnd);
hDCMem = CreateCompatibleDC(hDeviceContext);
hBitmap = CreateCompatibleBitmap(hDCMem, 50, 50);
hbmOld = SelectObject(hDCMem, hBitmap);
DrawIcon(hDCMem, x, y, hCursor);
SelectObject(hDCMem, hbmOld); 
```

但我没有看到任何被绘制的东西。但是，如果我直接在 DC 上画图：

```
DrawIcon(hDeviceContext, x, y, hCursor); 
```

我确实看到了光标，但是当我移动光标时它不会擦除图像，留下一条长尾巴。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T15:56:26.557

不画画`WM_MOUSEMOVE`，`WM_PAINT`就是为了这个。基本上，您需要处理三个消息：

```
 case WM_CREATE:
        hCursor = LoadCursor(NULL, IDC_ARROW);
        cWidth  = GetSystemMetrics(SM_CXCURSOR); // saving the cursor dimensions
        cHeight = GetSystemMetrics(SM_CYCURSOR);
    break;

    case WM_MOUSEMOVE:
        rcOld = rcNew;
        rcNew.left   = GET_X_LPARAM(lParam);     // saving the mouse coordinates
        rcNew.top    = GET_Y_LPARAM(lParam);
        rcNew.right  = rcNew.left + cWidth;
        rcNew.bottom = rcNew.top + cHeight;
        InvalidateRect(hwnd, &rcOld, TRUE);      // asking to redraw the rectangles
        InvalidateRect(hwnd, &rcNew, TRUE);
        UpdateWindow(hwnd);
    break;

    case WM_PAINT:
        hDC = BeginPaint(hwnd, &ps);
        DrawIcon(hDC, rcNew.left, rcNew.top, hCursor);
        EndPaint(hwnd, &ps);
    break; 
```

注意：我不确定“模拟鼠标光标”是什么意思，但可能有更好的方法来做你可能想要的事情。请检查功能[`SetCursor()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648393.aspx)和[`SetWindowLongPtr() with GCL_HCURSOR`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644898.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T07:40:36.853

物有所值：

另一种可能值得研究的方法是使用 WS_EX_TOPMOST| [WS_EX_LAYERED](http://msdn.microsoft.com/en-us/library/ms997507.aspx)窗口，您可以根据需要四处移动，并让 Windows 为您处理绘图/透明度。这样做的好处是它根本不会干扰绘图主窗口，即使主窗口有子控件或类似的控件也可以工作。

它还将允许您的“鼠标指针”“悬停在窗口的边缘” - 例如。当鼠标定位到最右下角像素时，普通鼠标指针的尾部和箭头将在框架和它后面的其他窗口上方，而您不能仅通过绘制自己的窗口客户区来做到这一点.

--

话虽如此，我不确定在这里“伪造”鼠标位置是否正确，尽管它很可能会让您启动并运行。另一种方法是让鼠标正常运行，但对于需要更高分辨率的应用程序，有另一个 API 可以公开更精确的值。除了通常的鼠标/键盘消息和 API 之外，Windows 还具有各种技术和 API（例如[Raw Input](http://msdn.microsoft.com/en-us/library/ms645543(v=vs.85))）用于获取输入信息、定义附加输入设备，并且我认为还将附加信息与消息相关联，其中一种技术可能是这里比较合适。重新提出您的问题可能是值得的，但要关注更高级别的问题，而不是光标绘图。

# java - XPath 处理器输出为字符串

> ID：12109564
> 
> 赞同：0
> 
> 时间：2012-08-24T12:38:54.503
> 
> 标签：java, xpath

使用 javax.xml.xpath 在 java 中进行标准 XPath 处理的工作方式如下：

1.  我为要处理的 xml 提供名称
2.  我将 xpath 表达式作为字符串提供。
3.  我获得存储为节点列表的答案，或者最终作为单个值，具体取决于我选择的输出类型。

我需要在 java 中编写几个测试，它们基本上应该像这样工作：我提供 xpath 表达式作为字符串，它检查这个表达式的 xpath 输出是否等于某些指定的输出（也作为字符串提供）。所以我不需要遍历节点树之类的东西，我只需要获得 xpath 处理器输出作为字符串。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:54:19.873

`XPath.evaluate(expression, inputSource)`似乎做你想做的事。

编辑：这是一些示例代码：

```
String xml = "<foo><bar>text</bar></foo>";
Reader reader = new StringReader(xml);
InputSource inputSource = new InputSource(reader);
XPath xpath = XPathFactory.newInstance().newXPath();
System.out.println(xpath.evaluate("/foo/bar", inputSource)); 
```

编辑：[这个问题](https://stackoverflow.com/questions/3300839/get-a-nodes-inner-xml-as-string-in-java-dom)表明没有可以立即用于实现目标的 java api。如果您正在测试 XML，那么您可能想看看[XmlUnit](http://xmlunit.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:54:29.037

如果你使用

```
xPathExpression.evaluate(document); 
```

你的 DOM 文档在哪里`document`，那么它将返回它匹配的第一个节点的字符串表示形式。对于您认为 XPath 正在选择单个文本节点的用例，这可能很好。如果不是这种情况，您可以编写一些从以下位置返回的`toString()`方法`NodeList`：

```
xPathExpression.evaluate(document, XPathConstants.NODESET); 
```

编辑 1：这是一篇关于将 a 转换为 XML 文档并打印它的[SO文章。](https://stackoverflow.com/questions/5786936/create-xml-document-using-nodelist)`NodeList`

编辑 2：如果您有使用`count`返回单个值的 XPath 表达式或逻辑运算符，那么您可以捕获抛出的异常并采取适当的操作：

```
try {
    NodeList nodeList = (NodeList) xPathExpression.evaluate(document, XPathConstants.NODESET);
    for (int i = 0; i < nodeList.getLength(); i++) {
        Node node = nodeList.item(i);
        System.out.println(node.getNodeName());
    }
} catch (XPathExpressionException e) {
    String result = xPathExpression.evaluate(document);
    System.out.println(result);
} 
```

# c# - 使用 Windows 生物识别框架或任何其他方法通过 .Net 访问指纹读取器

> ID：12109566
> 
> 赞同：2
> 
> 时间：2012-08-24T12:39:13.937
> 
> 标签：c#, c++, .net, fingerprint, biometrics

我正在寻找访问人员指纹并将其用作人员标识符。

我查看了[http://msdn.microsoft.com/en-us/library/windows/desktop/ee829699(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee829699(v=vs.85).aspx)及其指向的页面，但我无法弄清楚第一步到处都需要，即：

> 链接到 Winbio.lib 静态库

我什至无法在我的机器上找到这个文件

我尝试了上面提到的解决方案：[http](http://weblogs.asp.net/thomaslebrun/archive/2009/08/19/windows-seven-how-to-use-biometric-authentication-in-your-net-applications.aspx) ://weblogs.asp.net/thomaslebrun/archive/2009/08/19/windows-seven-how-to-use-biometric-authentication-in-your-net-applications.aspx ，虽然它确实可以工作，但它需要在 Windows 上注册指纹才能工作（不是主要问题），更重要的是，它没有向我展示它的实际工作方式以及实际 API 的调用方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:46:23.330

您会在您的操作系统中找到 Winbio.dll。此 dll 的最可能路径是

1.  %windir%\system32\winbio.dll
2.  %windir%\winsxs\backup\x86_microsoft-windows-s..
3.  %windir%\winsxs\x86_microsoft-windows-s..y-biometrics-client_31bf3856ad364e35_6.‌​1.7000.0_none_2282a6cbc0bff05e\winbio.dll

# visual-studio - 如何在服务器资源管理器中设置默认的双击操作？

> ID：12109571
> 
> 赞同：6
> 
> 时间：2012-08-24T12:39:32.943
> 
> 标签：visual-studio, visual-studio-2012, server-explorer

在 Visual Studio 2012（和以前的版本）中，如果您在服务器资源管理器中双击表，则会打开表设计视图。

我很少使用它，因为我不负责当前项目中的数据库定义。

我希望作为默认打开行为的是“查看表数据”。

有没有办法改变在服务器资源管理器中双击数据库表的行为？我无法在 VS 选项中找到设置。

# asp.net - 篡改页面扩展时出现404页面

> ID：12109573
> 
> 赞同：2
> 
> 时间：2012-08-24T12:39:39.263
> 
> 标签：asp.net, iis-7, webforms, http-status-code-404, sitecore

我有一个 Sitecore 解决方案，我们在其中处理 404 请求。

我们通过在 web.config 中设置“ErrorPage”和“ItemNotFoundUrl”来做到这一点：

```
<setting name="ErrorPage" value="/sitecore/service/error.aspx" /> 
```

和

```
<setting name="ItemNotFoundUrl" value="/Global/ErrorPages/404" /> 
```

现在，这在我们编辑页面名称时有效。因此，如果我们有 www.domain.com/mypage.aspx ，然后转到不存在的 www.domain.com/mysdfsa.aspx ，它将显示我们的错误页面。

但是，如果我们这样做：

www.domain.com/mypage.zip / www.domain.com/mypage.gosfgfgs

它给出了 IIS 错误：

```
Error Summary
HTTP Error 404.0 - Not Found
The resource you are looking for has been removed, had its name changed, or is temporarily unavailable. 
```

**我尝试了什么？**

我们至少需要为 ZIP 文件制作它。

*   确保将 .ZIP 添加到 IIS 和 Sitecore MIME 类型
*   在 ExecuteRequest 管道之前挂钩并尝试重定向（这从未被调用，因为 IIS 在我们执行请求之前给出了错误页面）

有任何想法吗？：-） 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:44:17.003

我认为在`<preprocessRequest>`管道中有一个用于 Sitecore 处理的扩展的处理器。您应该尝试更新：

```
<processor type="Sitecore.Pipelines.PreprocessRequest.FilterUrlExtensions, Sitecore.Kernel">
  <param desc="Allowed extensions (comma separated)">aspx, ashx, asmx</param>
  <param desc="Blocked extensions (comma separated)">*</param>
  <param desc="Blocked extensions that stream files (comma separated)">*</param>
  <param desc="Blocked extensions that do not stream files (comma separated)"></param>
</processor> 
```

# c# - 进度条和百分比

> ID：12109576
> 
> 赞同：0
> 
> 时间：2012-08-24T12:39:50.283
> 
> 标签：c#

我有一个最小值 = 0 和最大值 = 1000 的进度条。现在我有 long FileSize=1454545454 和 long BytesSent （示例）。如何计算进度条位置？我总是失去精度或其他东西：/

编辑：已解决...我忘了像：（十进制）BytesSent。你们也做了同样的事情：P Thx 的答案。调试器总是有帮助的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T12:43:33.957

```
progressBar.Value = (int)(
    progressBar.Minimum + ((double)BytesSent / FileSize) *
                          (progressBar.Maximum - progressBar.Minimum)); 
```

或者：

```
progressBar.Minimum = 0;
progressBar.Maximum = FileSize;
progressBar.Value = BytesSent; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T12:45:33.537

进度条不是精密仪器——它是进度的近似显示（即使您显示了*准确的*值，也可能是对实际进度的*不正确*表示）。

所以，你应该简单地做：

```
progressBar.Minimum = 0;
progressBar.Maximum = 100; 
```

* * *

```
progressBar.Value = (BytesSent / FileSize) * progressBar.Maximum; 
```

这个[MSDN 页面](http://msdn.microsoft.com/en-us/library/de047043)是我不想使用更精确值的原因：

> ProgressBar 显示的值仅近似于 Value 属性的当前值。

# eclipse - Eclipse CDT 不会清除以前构建的错误

> ID：12109578
> 
> 赞同：6
> 
> 时间：2012-08-24T12:40:00.633
> 
> 标签：eclipse, build, makefile, eclipse-cdt

自从升级到 Eclipse Juno (Eclipse CDT 6) 后，我注意到，当我为我的 makefile 项目执行“make”时，以前构建的错误（例如以下）不会从我的“问题”列表中清除：

```
make: *** [Debug] Error 2
make[1]: *** [util.o] Error 1
make[1]: *** [record.o] Error 1 
```

以前版本中的单个编译器错误消息被清除得很好，但在`make`遇到任何错误时打印的最终的摘要错误消息却没有。

如何让 Eclipse 也清除这些错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:41:55.317

显然 Eclipse CDT 6 引入了一个新的 Make 解析器。要开始使用它：

*   转到项目下的选项下。
*   在设置下的 C++ 构建类别下。
*   在错误解析器选项卡下，取消选中“CDT GNU Make Error Parser 6.0 (Deprecated)”并选中“CDT GNU Make Error Parser 7.0”。
*   右键单击 GNU Make Error Parser 6.0 下以前构建的任何剩余错误消息，然后手动删除它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-30T13:23:39.147

只需在“问题”视图中选择错误消息并点击 [Del] :-)

# python - X 显示的用法：从窗口截屏而不显示

> ID：12109579
> 
> 赞同：0
> 
> 时间：2012-08-24T12:40:01.593
> 
> 标签：python, gtk, pygtk

我的目标是从窗口制作屏幕截图而不显示它。

代码：所有的`Xvfb`东西都适用于 QT（[示例](http://pastie.org/4572412)），但似乎我不完全理解如何将它与 GTK 一起使用。

```
import gtk,webkit,gobject,sys,os,time
web=webkit.WebView()
url = 'http://google.com/'
web.open(url)
win=gtk.Window()
win.add(web)

silence_xvfb=True
display='1'
screen='0'
xvfb_timeout=3
pidfile = '/tmp/.X%s-lock' % display
redirect = '> /dev/null 2>&1'
if not silence_xvfb:
    redirect = ''
cmd = ' '.join(['Xvfb', ':'+display, '-screen', screen, '1600x1200x24', redirect])
os.system(cmd+' &')

start = time.time()
while(True):
    diff = time.time() - start
    if(diff > xvfb_timeout):
        raise SystemError("Timed-Out waiting for Xvfb to start - {0} sec".format(xvfb_timeout))
    if(os.path.isfile(pidfile)):
        break
    else:
        time.sleep(0.05)

os.putenv('DISPLAY', ':%s' % display)

def drawWindow(win):
    width, height = win.get_size()
    pixbuf = gtk.gdk.Pixbuf(gtk.gdk.COLORSPACE_RGB, False, 8, width, height)

    screenshot = pixbuf.get_from_drawable(win.window, win.get_colormap(), 
                                          0, 0, 0, 0, width, height)

    screenshot.save('screenshot.png', 'png')
    print 'screenshot saved'

win.show_all()
gobject.timeout_add(5000, drawWindow, win)
gtk.main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:56:06.460

所有基于 X11 的代码（Qt、KDE、gtk、wxWindows、...）都使用该`DISPLAY`变量来定义要使用的显示器。[有关详细信息，请参阅文档](http://www.x.org/archive/X11R6.8.1/doc/X.7.html)。

您的问题是，在第一次 X11 调用（或多或少）时，每个进程都会检查一次变量。

因此，在您的情况下，您创建一个窗口，然后尝试设置`DISPLAY`变量。X11 无法将现有窗口从一个实例移动到另一个实例。

您需要做的是将上面的代码拆分为两个进程。一个启动`Xvfb`并设置`DISPLAY`变量，另一个呈现 UI。

# android - 如何始终在android的后台检查条件？

> ID：12109581
> 
> 赞同：0
> 
> 时间：2012-08-24T12:40:05.260
> 
> 标签：android, datetimepicker

我有一个应用程序，用户从时间选择器输入两个时间，我想特别在那个时间间隔内运行代码。所以，我的问题是如何始终检查当前时间到用户输入的时间，并且该服务将在后台运行。始终运行此服务以检查时间的可能方法是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:44:05.967

根据要执行的代码，您可能需要[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)或[`Timer`](http://developer.android.com/reference/java/util/Timer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:44:47.283

使用该服务并检查您想要的任何条件，或者您可以使用广播接收器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:56:54.347

您可以创建两个[BroadcastReceivers](http://developer.android.com/reference/android/content/BroadcastReceiver.html)，一个用于使用您要运行的代码启动服务，另一个用于结束它。然后，您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)将接收器代码的执行安排到适当的时间。

# erlang - erlang ssl 和 {ssl_closed, Socket}

> ID：12109584
> 
> 赞同：2
> 
> 时间：2012-08-24T12:40:24.450
> 
> 标签：erlang

我有两个 erlang 节点在两台不同的计算机上运行，​​在一个节点中我有一个 ssl 客户端，在另一个节点中我有 ssl 服务器。两台电脑都通过wifi连接上网。

一切正常，但我想知道为什么如果我关闭客户端笔记本电脑中的 wifi，我不会收到 {ssl_closed, Socket} 消息。

套接字选项有：

```
{active, true}, {keepalive, true} 
```

我的意思是，套接字应该不再有效..对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:37:36.203

全局 TCP 保活超时值通常设置为保活消息之间的 7200 秒之类的值。如果您使用的是 Linux 系统，则可以使用`sysctl -a | grep keepalive`.

真的不建议摆弄这个值，因为它是一个全局配置。相反，您应该`ping`向应用程序级协议添加一条消息（让客户端不时发送 ping），服务器可以简单地丢弃它。

似乎可以通过该`inet:setopts/2`函数和使用该`raw`选项设置每个套接字的保活超时，但我不知道是否建议这样做（它不能在平台之间移植）

# xml - 使用 Perl 验证伪 xml 文件

> ID：12109586
> 
> 赞同：2
> 
> 时间：2012-08-24T12:40:29.923
> 
> 标签：xml, perl, validation

我有一个文件，其中包含类似 xml 的标签和一堆无效的 xml 数据，因此我不能在文件上使用像 xmllint 这样的普通 xml 验证器。我想忽略无效的 xml 数据，只检查文件的格式是否正确。

```
<?xml version="1.0" encoding="utf-8"?>
<HOST>
<VERSION>5</VERSION> 
<OUTPUT>
   bunch of text which also contains tags like  <SYSTEM> 
   more tags like <->   <temp>  & ; 
   some more text and numbers
 </OUTPUT>
</HOST> 
```

在上面的示例中，我可以忽略 <system>、<->、&、; 等标签吗？等，只需检查有效的开始和结束标签，如 <HOST> </HOST> <VERSION> </VERSION> 和 <OUTPUT> </OUTPUT>。上面的文件应该返回说它的格式正确，因为所有有效的标签都有正确的开始和结束括号。

我可以创建自己的 dtd/xsd 吗？使用 Perl 查找我想要的标签并忽略其余标签。

我的主要问题是我不知道描述我的问题的正确关键字，这就是为什么谷歌没有给我正确的结果。有人可以将我推向正确的方向。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:31:06.960

我能问一下有什么意义吗？您的输入文件不是 XML，并且您不想通过添加 CDATA 部分使其成为 XML。通过了解“某些”数据是否为 ​​XML，您可以获得什么？这不像您将能够在其上使用 XML 工具，或者 ypo 将能够将其作为 XML 交付。

所以实际上这种非验证并没有给你带来任何好处。那岂不是有点浪费时间？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:13:13.683

您必须先清理输入。一旦你这样做了，你就可以做 DTD、模式、正确的解析等等。

如果只是`OUTPUT`标签，你可以试试这个：

```
s/(<OUTPUT>)/$1<![CDATA[/;
s/(</OUTPUT>)/]]>$1/; 
```

完成之后，您的输入应该可以用于 XML 解析、验证等。如果您的输入可能包含 CDATA 部分，您将不得不做更多的事情，但这应该足以开始。

# java - 使用相同的方法名称实现接口和抽象类导致泛型名称冲突

> ID：12109587
> 
> 赞同：3
> 
> 时间：2012-08-24T12:40:40.377
> 
> 标签：java, generics, interface, name-clash

```
public interface Foo <T> {
   void setValue(T value);
}

public abstract class Bar extends JFormattedTextField{
    @Override
    public void setValue(Object value) {

    }
}

public class FooBar extends Bar implements Foo<String>{
    @Override //Foo
    public void setValue(String aValue) {
    // TODO Auto-generated method stub

    }

    @Override //Bar
    public void setValue(Object aValue) {
    // TODO Auto-generated method stub

}
} 
```

这导致

> 名称冲突：Foo 类型的方法 setValue(M) 与 JFormattedTextField 类型的 setValue(Object) 具有相同的擦除，但不会覆盖它

为什么我没有得到编译器的爱，我该如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:50:21.673

这是因为类型擦除（请参阅这个问题：[Java generics - type erasure - when and what happens](https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens)）

简而言之：编译器将用于`String`检查所有方法调用和类型转换是否有效，然后`Object`用于生成字节码。这意味着您现在有两个具有相同签名的方法：`public void setValue(Object aValue)`

对此没有完美的解决方案。您可以通过使用`Foo<Object>`而不是编译上面的代码，`Foo<String>`但这通常不是您想要的。

一种解决方法是使用适配器：

```
public class FooBar extends Bar {
    public Foo<String> adapt() {
        return new Foo<String>() {
            public void setValue(String value) {
                FooBar.this.setValue( value );
            }
        }
    }
} 
```

基本上，该`adapt()`方法应该做的是创建一个新实例，该实例实现正确的接口并将所有方法调用映射到`this`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:47:55.523

Java 对泛型使用类型擦除。在您的情况下，类型是 String ，它也是 Object 的子类。并且您的 Bar 类允许 Object 所以 Nameclash 发生。

在您的场景中，因为您在扩展类中使用带有对象作为参数的非通用遗留类，我会建议您更改方法名称或将类型更改`Foo`为`String``Back to 1.4 days :-)

# r - 如何引用 Rscript 调用？

> ID：12109591
> 
> 赞同：0
> 
> 时间：2012-08-24T12:41:08.070
> 
> 标签：r, quote, noweb

我的目标是`Rscript`通过 .Rnw 文件调用`SweavePDF`，设置如下：

```
(add-hook 'Rnw-mode-hook
      (lambda ()
        (add-to-list 'TeX-command-list
             '("SweavePDF" "Rscript -e 'patchDVI::SweavePDF('%t', encoding='utf8')'"
               TeX-run-command nil t :help "Run SweavePDF") t)
        (setq TeX-command-default "SweavePDF"))) 
```

如何`Rscript`正确调用 R 脚本？带引号的东西似乎没有按预期工作：？

```
Running `SweavePDF' on `ch03_copula' with ``Rscript -e 'patchDVI::SweavePDF('ch03_copula.Rnw', encoding='utf8')''
/bin/sh: 1: Syntax error: Unterminated quoted string

SweavePDF exited abnormally with code 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:58:46.540

刚刚发现双引号可以用反斜杠转义`\"`

# php - 来自另一个站点的内容的 jQuery 对话框

> ID：12109596
> 
> 赞同：6
> 
> 时间：2012-08-24T12:41:31.227
> 
> 标签：php, jquery, jquery-ui, dialog, modal-dialog

我正在使用 jQuery 的可爱而简单的`dialog`命令在一些嵌入的 3rd 方内容前面打开一个对话框。该嵌入内容可以是来自任何网站的页面。我*可以*让它在某些网站（雅虎、谷歌）上工作，但我*不能*让它在其他网站（MSN、Johnlewis、FT）上工作。

 *我已经从下面的代码中尽可能多地删除了问题的基本内容 - 显示的代码工作正常并且对话框确实显示。但是，注释掉 YAHOO 行并取消注释 MSN 行，则对话框不会显示！

```
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <style>
        .ui-widget-header { border: 1px solid #aaaaaa; background: #1f84f5 url(images/ui-bg_highlight-hard_75_1f84f5_1x100.png) 50% 50% repeat-x; color: #ffffff; font-weight: bold; font-size: 20pt; }
        .ui-widget-content { border: 1px solid #aaaaaa; background: #ffffff url(images/ui-bg_flat_75_ffffff_40x100.png) 50% 50% repeat-x; color: #222222;  font-size: 20pt;}
    </style>
        <script>
            $(document).ready(function() {
                $( "#thedialog" ).dialog( "destroy" );
                $( "#thedialog" ).dialog({height:400, width:600, modal: true,
                    buttons: {Cancel: function() {$( this ).dialog( "close" );}}
                });
            });
    </script>
</head>
<body>
    <?php 
        // WORKING - these pages DO launch a dialog:
        $targetlink = 'http://www.yahoo.com';
        // $targetlink = 'http://www.bbc.co.uk';
        // $targetlink = 'http://www.google.com';

        // NOT WORKING - these pages do NOT launch a dialog:
        // $targetlink = 'http://www.msn.com';
        // $targetlink = 'http://www.johnlewis.com';
        // $targetlink = 'http://www.ft.com';

        echo file_get_contents($targetlink);
    ?>
    <div id="thedialog" title="Simple dialog box" style="display:none">My girl lollipop</div>
</body> 
```

我唯一能想到的是，它一定是某个非工作网站上与我的代码冲突的东西——我已经尝试了一切来错误地捕获问题，但找不到导致它的原因。

任何人都可以帮助我吗？

**注意：** - (1) 我知道所示示例不需要 PHP，但更完整的版本需要（我只是剥离了大部分 PHP 代码以保持这个示例的小）。- (2) 我在更完整版本的页面中的其他地方使用 JQuery，所以理想情况下我想继续使用 JQuery，而不是引入替代框架/方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T13:07:05.893

即使我无法重现我的问题，特里塞德勒的回答是有效的。您将遇到与已经有对话框和 JQuery 的站点的冲突。

你有 2 种方法来解决这个问题（我不认为“无冲突”方法会像你使用 UI 插件一样）

1.  检查是否`$`已定义和`$.dialog`已定义。如果已定义，则使用站点拥有的内容，否则使用[动态加载](http://unixpapa.com/js/dyna.html)

2.  使用原始 JS`onload`为页面/窗口添加处理程序，并运行一个函数。在此函数中，您应该粘贴 JQuery 和 JQuery-UI 的代码。此方法使用函数的范围来避免命名空间问题。

为了使方法2更清楚，图像下面的JS代码

```
function printMe() { alert("this will print me"); }

function printMeToo(){

     function printMe(){ alert("this will print me too"); }
     printMe(); 

}

printMeToo(); 
```

此代码应警告“这也会打印我” - 并且`printMe`在页面上的其他任何位置运行都会警告“这将打印我”。这样您就不会损害您正在加载的页面（这也是您应该考虑的事情）并且它们不会对您产生影响。

它会是什么样子？为了了解如何添加原始 JS onload 处理程序，您可以查看[这个 stackoverflow question](https://stackoverflow.com/questions/4558325/adding-multiple-onload-handlers)。可以说它类似于`document.addEventListener( 'onload', function () { ... /* important stuff */ });`

重要的是这个函数会是什么样子？所以这是预期的结构

```
function(){ /* important stuff function */ 

       // paste here JQuery definition code (copy paste into here... ) make sure to use the minified code!
       (function(a,b){function G(a) ... {return p})})(window);

      // paste other plugins code as well. dialog + ... 

      .... 

      // now your code should be here, exactly like you posted it untouched

      $("myelement"); // this uses MY JQuery version, and my JQuery-UI version and my plugins without the possibility of an override. The site cannot override my code, and I cannot override the site's code. 

} /* end of really important stuff function here */ 
```

想看看这个方法的运行和运行吗？[我用Incapsula](http://www.incapsula.com/)保护我的网站- 所以他们在我的网站上展示了他们的印章（有点像你的对话） - 看到右下角的浮动 div 了吗？他们也使用 JQuery 和其他东西，就像我在这里指定的那样。

顺便说一句 - 关于 CSS - 你可能会在那里遇到同样的问题。例如，您引用类 .bottom - 其他网站可能有自己的确切类和 CSS。确保使用非常唯一的 ID 包装整个对话框代码（例如`gjkelrgjkewrl849603856903ID`- 并使用它启动所有 CSS 选择器以避免冲突）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T12:55:21.063

[编辑] 显然它对某些人有用.. 我自己无法在没有以下更改的情况下使其工作.. [/edit *]*

Firebug 控制台对于调试这样的东西很有用。在这种情况下，我收到*$('#thedialog') 不是函数*错误消息。

我使用 jQuery noConflict 让它工作：

```
<script>
    var $j = jQuery.noConflict();
        $j(document).ready(function() {
            $j( "#thedialog" ).dialog( "destroy" );
            $j( "#thedialog" ).dialog({height:400, width:600, modal: true,
                buttons: {Cancel: function() {$( this ).dialog( "close" );}}
            });
    });
    </script> 
```

我的猜测是这些页面上的某些东西是冲突的/覆盖 $，但这似乎工作正常（测试 msn.com）。

请查看[此页面](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:58:05.070

`style="display:none"`如果您希望对话框自动打开，则需要删除代码。

试试这个代码：

```
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <style>
        .ui-widget-header { border: 1px solid #aaaaaa; background: #1f84f5 url(images/ui-bg_highlight-hard_75_1f84f5_1x100.png) 50% 50% repeat-x; color: #ffffff; font-weight: bold; font-size: 20pt; }
        .ui-widget-content { border: 1px solid #aaaaaa; background: #ffffff url(images/ui-bg_flat_75_ffffff_40x100.png) 50% 50% repeat-x; color: #222222;  font-size: 20pt;}
    </style>
    <script>
        $(document).ready(function() {
            $( "#thedialog" ).dialog( "destroy" );
            $( "#thedialog" ).dialog({height:400, width:600, modal: true,
                buttons: {Cancel: function() {$( this ).dialog( "close" );}}
            });
    });
    </script>
</head>
<body>
    <?php 
        $targetlink = 'http://www.yahoo.com';   
        echo file_get_contents($targetlink);
    ?>
    <div id="thedialog" title="Simple dialog box">My girl lollipop</div>
</body> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T12:48:15.310

我试过你的代码，它对我有用。也许您在生成的源代码中有一条 php 错误消息，它与您的 JS 代码冲突。

在浏览器中检查生成的源。*

# java - java中的唯一ID生成

> ID：12109601
> 
> 赞同：2
> 
> 时间：2012-08-24T12:41:51.960
> 
> 标签：java

给定一个输入字符串，字符串长度不会超过 30，输出将是一个唯一的 id 号。Java中有没有办法可以做到这一点？相同的字符串总是会生成相同的id，不同的字符串不能生成相同的id。java HashCode() 可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:00:05.837

为了满足要求

> 相同的字符串总是会生成相同的id，不同的字符串不能生成相同的id

你会得到相当大的数字。您要求该函数是单[射](https://en.wikipedia.org/wiki/Injective_function)的，因此您需要与可能的 s 数量一样多的数字，`String`在您的情况下类似于 $255^30$（或者如果您允许任意 Unicode 字符，则类似于 $65536^30$）。因此，您将需要`BigInteger`s 并且肯定会使用`int`（只是`String`长度不超过 30 的 s 比 中的数字多`int`）。例如，`new BigInteger(theString.getBytes(""))`满足您的要求。

如果你使用`hashCode`，你会失去单射性，但是在大多数情况下，两个`String`s 相同的机会`hashCode`非常低（实际上[散列](https://en.wikipedia.org/wiki/Hash_function)的目的是为了降低这个机会）。如果您想更加确定冲突的数量一致地很小，您可以使用一些[加密哈希函数](https://en.wikipedia.org/wiki/Cryptographic_hash_function)，但是映射不会是单射的。

也许解释您的要求的原因将有助于找到最佳解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:45:47.833

Java 哈希码不保证是唯一的。您需要查看 UUID。

```
public static UUID nameUUIDFromBytes(byte[] name) 
```

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:45:57.353

也许这有点傻，但是将每个字符转换为 ASCII 数字怎么样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:47:03.960

如果你真的需要确保没有冲突，那么你得到的数字将是巨大的，肯定比任何原始数字类型都要大。我的建议是使用几乎可以肯定足够好的 SHA-1 哈希（Git 版本控制系统依赖于这些哈希值的唯一性，您的要求真的比他们的要求更严格吗？）

如果你想保证唯一性，那么我想你可以这样做的一种方法是为每个字符获取 ASCII（或 Unicode，取决于你的输入）数值，用零填充它，以便所有值都具有相同的长度，并且然后将它们连接在一起成为一个大数字。如前所述，您无法将其放入 long 值中，因此您需要使用 BigInteger 类。填充是必要的，以避免像“12 + 34”和“123 + 4”这样的冲突。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T12:51:55.480

除非您可以确定性地限制有效字符串集，否则您唯一的选择是将整个字符串解释为您的 id。当您要获得非常大的 id 时，您应该使用 BigInteger 类来表示它们。

我会以相反的顺序转换字符，以免担心不同长度的字符串。

# c# - 使用 Membership 而不仅仅是创建自己的类

> ID：12109607
> 
> 赞同：0
> 
> 时间：2012-08-24T12:42:22.593
> 
> 标签：c#, asp.net, membership

我开始使用“会员”框架（您可能已经从我过去的 5 篇文章中注意到了）。

在我的代码中，我继承了`SqlMembershipProvider`类并覆盖了函数，因为我的数据库不适合默认情况下所需的架构。

所以我想问的问题是：

`Membership`当我可以使用我希望在我的应用程序中使用的功能创建自己的类时，我为什么要使用该类？

`Roles`框架也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:47:49.017

简短的回答：在安全方面，不要假设您知道自己在做什么。如果您尝试自己做，那么您可能会做错！

**安保太难了！**

Microsoft 已花费大量资源来实施成员资格和角色框架。只要它们符合您的需求，那么为什么要创建您自己的东西呢？此外，通过使用标准框架，您的解决方案将与也使用相同框架的其他项目兼容。在您的情况下，这可能是也可能不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:43:33.803

首先，如果您有自己的预先存在的用户数据库，您可能不应该试图强迫`SqlMembershipProvider`用户使用它。`SqlMembershipProvider`是抽象`MembershipProvider`类的完整实现，要正确运行，它需要具有正确模式的数据库。

相反，您应该创建自己的抽象`MemberShipProvider`类实现。首先，创建一个类`CoultonsMemebshipProvider`并让它派生自`System.Web.Security.MembershipProvider`. 然后将光标放在*MembershipProvider*内并单击`Ctrl+.`然后选择*实现抽象类*...。然后，Visual Studio 将为您可以实现的方法添加大量代码。

起初看到 VS 插入的代码后，这个任务看起来确实令人生畏。但请记住，您只需要实际实现应用程序需要的部分。可以为不需要的方法和属性**保留**默认值。`throw new NotImplementedException();`

现在对于您的问题“***我为什么要使用 Membership 类...*** ”，答案很简单。这是一个久经考验、经过深思熟虑的抽象，在构建身份验证方案时可以引导您朝着正确的方向前进。

也就是说，如果您强烈认为您实际上并不需要会员提供商，您仍然可以使用`FormsAuthentication`并获得它提供的好处。如果您想探索此选项，请查看Scott Mitchell 撰写的有关 FormsAuthentication 的本[教程（特别是介绍部分）。](http://www.asp.net/web-forms/tutorials/security)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:53:26.457

Asp.net 为“会员”框架提供了很多挂钩。

您可以根据需要对其进行自定义。看看[实现一个 CustomMembership 提供者](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29.aspx)。

这使您可以对表进行身份验证，但仍是框架的一部分。

```
public class MyMembershipProvider : MembershipProvider
{ 
        public override bool ValidateUser(string username, string password)
        {    
            //check user credentials
            return IsUserValid;
        }
} 
```

在 web.config 中：

```
 <membership defaultProvider="MyMembershipProvider">
      <providers>
        <clear />
        <add name="MyMembershipProvider"
             applicationName="MyApp"
             Description="My Membership Provider"
             passwordFormat="Clear"
             connectionStringName="MyMembershipConnection"
             type="MyApp.MyMembershipProvider" />
      </providers>
    </membership> 
```

# mobile - JQM 1.1 - data-rel=back 只在同一个域中？

> ID：12109608
> 
> 赞同：1
> 
> 时间：2012-08-24T12:42:36.883
> 
> 标签：mobile, jquery-mobile

jQuery Mobile（至少 1.1）提供了一个不错的功能，即“返回”按钮。根据[文档中的](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)“后退按钮链接”一章，添加`data-rel="back"`链接/按钮将模拟与 Web 浏览器后退按钮完全相同的功能。也就是说，返回到用户 Web 浏览器中的上一页。

此功能很棒（并且有效），但是**在一个用例中，您没有获得移动应用程序的正确行为**。

所以你有一个网站。这是jquery手机。

*   页面 A 是登陆页面
*   页面 B 是页面 A 的子页面
*   页面 C 是页面 B**的子页面，也是页面 A 的子页面**
*   现在 Bob 将页面 C 的 URL 提供给 Alice
*   Alice 转到页面 C 并使用后退按钮，因为她想结帐站点的其余部分
*   Alice 的网络浏览器会返回到她之前所在的页面（可能是 stackoverflow！）
*   爱丽丝不明白为什么她被重定向到另一个网站，在她的痛苦中，她把手机扔进了湖里。

由于有两种方式可以转到页面 C，因此开发人员放置了一个后退按钮，因为在名义上的用例中，每个用户从页面 A 进入并浏览，页面 C 上的后退按钮按需要工作；也就是说，它要么返回页面 A，要么返回页面 B。但是 Alice 和 Bob 在这里，返回按钮会转到一个完全不同的网站！

我希望这一切都清楚:)

所以我认为的解决方案是：

*   如果用户历史堆栈中的前一个网站在同一个域上：使用它返回
*   如果不是：使用`href`属性值作为导航规则。

所以...问题：jqm 支持吗？我错过了文档中的某些内容吗？它是否以某种方式实施？我需要自己实施吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:13:53.847

我不确定这是否完全可能。JQuerymobile 可以让您找到上一页，如下所示：

```
$("#C").on("pageshow",function(){
  if ( "undefined" == typeof $(ui.prevPage)[0] ){
     //disable-back button here
     //$("#C").removeAttr('data-rel');
     // $(window).unload( function () { alert("Bye now!"); } );
  } 
}); 
```

但是，浏览器历史记录由浏览器管理，当您访问此页面时，历史记录已经设置。如果您使用的是 phonegap 之类的框架，您可以通过调用禁用后退按钮`navigator.app.overrideBackbutton(true)`，但是用户将如何返回？或者，您可以向用户发出警告，要求他们确认他们正在离开您的页面。

# r - R ggplot 调整绘图区域窗口的大小

> ID：12109610
> 
> 赞同：3
> 
> 时间：2012-08-24T12:42:39.353
> 
> 标签：r, resize, plot, ggplot2, area

我在调整绘图区域大小时遇到​​问题。如果您查看以下示例，您将看到 x 轴“x”的标签超出了绘图窗口/区域的范围，因此不再可见。我试图调整绘图窗口/区域的大小

```
dev.new(width=10, height=10) 
```

但这不会增加实际绘图区域之外的白色边界的空间。我还将绘图保存为 PDF，希望标签“x”会重新出现在 PDF 中，但事实并非如此。

是否有可能增加该特定区域？

```
library(ggplot2)
df <- data.frame(x=1:10, y=1:10) 
ggplot(df, aes(x,y)) + geom_point() + 
  opts(axis.title.x = theme_text(size = 14, hjust = 0.5, vjust = -5)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:17:47.527

要更改可用于轴标签和文本的绘图区域的大小，您可以使用

```
opts(plot.margin = unit(c(2, 2, 2, 2), "cm")) 
```

指定绘图每一侧的边距大小。

# html - 如何组成这样的布局？

> ID：12109611
> 
> 赞同：7
> 
> 时间：2012-08-24T12:42:45.150
> 
> 标签：html, css

这里的第一张图片是网页设计师创建的草稿。 ![](../Images/aab522e2d4d0636237171209e89c1dff.png)

这里的第二张图片是我为此创建适当的 HTML/CSS 布局的结果。 ![](../Images/83e645c2a8bf1b72924cc721f3aa0794.png)

问题是：如何仅使用适当的 HTML5 和 CSS 在评级药丸周围创建这个透明字段。解决方案必须是跨浏览器和超级兼容的（包括IE7及更高版本）。

评级药丸宽度不是固定的，它取决于里面的数字，所以透明字段必须反映这一点。

这是我目前的布局：

```
<div class="evo-module-c4b style="background-image: url('/i/oranges.jpg');">

    <div class="price">
        <span class="icon"></span>
        <span class="value">10,950</span>
    </div>

    <div class="die"></div>

    <div class="rating-wrapper">
        <div class="evo-rating">
            <span class="value">+100500</span>
        </div>
    </div>

    <div class="content">
        <h2>Lorem ipsum dolor</h2>
        <p class="author">Donec et</p>
        <p class="data">24.08.2012 10:53</p>
        <h3>Nunc pellentesque justo diam, sed dictum dolor.</h3>
    </div>

</div> 
```

较少的：

```
div.evo-module-c4b {
    position: relative;
    width: @module-big-width;
    height: 250px;
    background-color: @color-gray-1;
    background-position: 0 0;
    background-repeat: no-repeat;
    overflow: hidden;

    div.price {
        position: absolute;
        top: 18px;
        right: 24px;
        span.icon {
            display: block;
            float: left;
            width: 16px;
            height: 16px;
            background-image: url('/i/evo/icons-imageset.png');
            background-position: -20px 0;
            background-repeat: no-repeat;
        }
        span.value {
            display: block;
            float: left;
            margin-left: 4px;
            font-size: 18px;
            font-weight: bold;
            color: @color-white;
        }
    }

    div.die {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        height: 108px;
        background-color: @color-gray-10;
        //background-image: url('/i/evo/modules/c4b/die.png');
        background-position: 0 0;
        background-repeat: no-repeat;
        z-index: 0;
    }

    div.rating-wrapper {
        position: absolute;
        width: 100%;
        top: 122px;
        text-align: center;
        div.evo-rating {
            display: inline-block;
        }
    }

    div.content {
        position: absolute;
        left: 0;
        top: 172px;
        width: 100%;
        z-index: 1;

        h2, h3, p {
            margin: 0;
            padding: 0;
            line-height: normal;
            text-align: center;
        }

        h2 {
            font-size: 18px;
            font-weight: bold;
        }

        p.author {
            font-size: 12px;
            font-weight: bold;
        }

        p.data {
            font-size: 10px;
            color: @color-gray-4;
        }

        h3 {
            font-size: 12px;
            color: @color-gray-4;
        }
    }
}

div.evo-rating {
    span.value {
        .evo-border-radius(@rating-height / 2 + 3px);
        display: block;
        height: @rating-height;
        font-size: 18px;
        font-weight: bold;
        line-height: @rating-height;
        color: @color-major;
        background-color: @color-white;
        border: 3px solid @color-major;
        padding: 0 5px;
    }
} 
```

有什么建议么？)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:21:47.883

*根据[moopet](https://stackoverflow.com/users/413354/moopet)提供的[评论](https://stackoverflow.com/questions/12109611/how-to-compose-a-layout-like-this/12112251#comment16187207_12109611)，我构建了这个答案并制作了一个[jsFiddle 来](http://jsfiddle.net/bakkerjoeri/R99NT/3/)说明他的想法*

## 页面结构

我正在假设这是构成您的页面的 HTML：

```
<div class="picture">

  <div class="pill-wrapper">
    <div class="pill">+1030</div>
  </div>

  <div class="content">
  </div>    

</div>​ 
```

## 我们将如何处理这个透明的药丸边界？

弄清楚[moopet在](https://stackoverflow.com/users/413354/moopet)[评论](https://stackoverflow.com/questions/12109611/how-to-compose-a-layout-like-this/12112251#comment16187207_12109611)中给我们的想法，您绝对可以定位 .pill-wrapper（并使用 LESS 变量*找到正确的中心位置）。给这个 .pill-wrapper 一个填充和边框半径，然后你可以使用背景来**创建一个人造透明边框**。只需将背景设置为与显示的图片相匹配，并用于`background-position`匹配评级药丸在页面上的位置（同样，使用 LESS 变量可能会使这变得又好又容易）。

## 这如何转化为 CSS？

请研究下面介绍的 CSS。请注意，仅显示基本 CSS。任何字体样式都应由您自己应用。

```
.picture {
  position: absolute;

  width: 100%;
  height: 500px;

  background: url('http://goo.gl/Zi4hw');
}

.pill {
  box-sizing: border-box;

  width: auto;
  height: 36px;
  padding: 5px;

  background: #0066aa;
  border-radius: 18px;
  border: 2px solid #ffffff;
}

.pill-wrapper {
  position: absolute;
  top: 225px;
  left: 100px;

  height: 36px;
  padding: 10px;  

  background: url('http://goo.gl/Zi4hw') -100px -225px;
  border-radius: 36px;

}

.content {
  height: 250px;
  margin-top: 250px;
  background: rgba(255,255,255,0.9);
} 
```

这种方法肯定存在问题。首先请注意，即使 LESS 会预处理所有内容，它也不是动态的或流动的，并且额外的 Javascript 可能会令人遗憾地工作，以解决在水平浏览器调整大小期间保持药丸居中的问题。其次，可能存在一些应该研究的兼容性问题。

但是基础知识在这里供您使用。

您可以在此处查看建议的解决方案：http: [//jsfiddle.net/bakkerjoeri/R99NT/3/](http://jsfiddle.net/bakkerjoeri/R99NT/3/)

**：我没有在 LESS 中编码的经验，所以对于我假设的任何错误，我深表歉意。请随时纠正我。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:52:01.003

更改带有 alpha 孔的图像的灰色背景并将其添加到图片上。您可能需要不同的尺寸，因为宽度可能会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T15:08:31.017

我认为这不可能完全实现，尽管最接近的解决方案可能涉及：

创建一个与药丸相同但更大的元素。绝对定位新元素，使其位于药丸下方，但使其更大。给它与主“橙色”图片相同的背景图像，但要调整它的背景位置，使其正确排列。这显然将取决于您的 css 其余部分的实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T12:58:31.217

至于我 - 没有真正简单的解决方案。但我会尝试使用几个 div 将块与评级结合起来。想法是您可以准备一些灰色背景的图像，其中下半部分是灰色的，顶部是透明的。可以通过将 3(?) div 组合来解决药丸本身的问题。一个用于左圆形边框 - 可以是带有边框、灰色背景等和透明部分的图像，您的底层图像将在其中可见。一个用于评级本身，一个用于右圆角。所有人都将以并排放置的方式构建背景图像，他们将制作那个药丸。现在，您只需将所有这些都转移到您的顶部图像上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T13:15:05.280

如果药丸是使用选择器“:after”和“:before”制作的，您可以在左侧创建一个灰色 div，在右侧创建另一个，然后在药丸附近输入边界半径，但在另一侧。在药丸下你可以放一个大的灰色药丸。

# android - 在 android 中使用 ksoap2 从 asp.net 服务器下载大文件

> ID：12109612
> 
> 赞同：1
> 
> 时间：2012-08-24T12:42:47.430
> 
> 标签：android

我正在开发一个应用程序，用户需要在其中从我们的服务器下载视频、pdf 和图像。服务器响应是 base64 二进制数据。我可以下载小视频，但在处理大视频或 pdf 文件时出现内存不足异常。我看到帖子[Android：Gallery 中的内存不足异常](https://stackoverflow.com/questions/3238388/android-out-of-memory-exception-in-gallery)和[非常大的 SOAP 响应 - Android - 内存不足错误](https://stackoverflow.com/questions/4941581/very-large-soap-response-android-out-of-memory-error)，但我没有找到任何解决方案。

我收到的错误是在行中.. HttpTransportSE.call(soapAction, soapEnvelope) 方法。

我该如何解决这种情况并下载文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:52:00.593

我验证并测试了使用 Soap 并将数据直接保存为文件的修复程序。见链接

[https://stackoverflow.com/a/12732396/736196](https://stackoverflow.com/a/12732396/736196)

按照帖子的指示，它将起作用

# javascript - 在 Dojo 中创建小部件

> ID：12109616
> 
> 赞同：0
> 
> 时间：2012-08-24T12:43:16.277
> 
> 标签：javascript, html, mobile, dojo, dojox.mobile

我正在使用 Dojo Toolkit 开发一个移动应用程序。我想制作以下小部件：

```
<div data-dojo-type="dojox.mobile.ListItem" data-dojoprops="moveTo:'breakdown'">
    <div>Maximum: Some value</div>
</div> 
```

我希望能够像这样使用小部件：

```
<div data-dojo-type="dojox.mobile.RoundRectList">
    <div data-dojo-type="MyWidget" data-dojo-props="maximum:'1200'"></div>
</div> 
```

这是我到目前为止所做的：

```
require(
    [ "dojo/_base/declare", "dojo/parser", "dojo/ready",
        "dojox/mobile/ListItem", "dijit/_WidgetBase",
        "dijit/_TemplatedMixin" ],

        function(declare, parser, ready, ListItem, _WidgetBase, _TemplatedMixin) {
            declare("MyWidget", [ ListItem, _WidgetBase, _TemplatedMixin ], {

                templateString: "<div>"         
                              + "<div>Maximum: <span data-dojo-attach-point='maximumNode'></span></div>"
                              + "</div>",

                maximum : "unknown",
                _setMaximumAttr : { node : "maximumNode", type : "innerHTML" },

                buildRendering : function() {
                    this.inherited(arguments);
                }
            });

            ready(function() {
                parser.parse();
            });
        }); 
```

我没有收到任何错误或类似的东西，页面没有加载。该代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:34:49.513

我写了这个简单的例子。

从你的代码片段我怀疑你可能想做这样的事情[http://jsfiddle.net/hJJUD/7/](http://jsfiddle.net/hJJUD/7/)

我建议不要更改该 listItem 中的模板，而是尝试使用它具有的属性。看看这个文档[http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/ListItem.html](http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/ListItem.html)

如果你发现你还需要什么，请告诉我。

# ruby-on-rails - Ruby on Rails 中选择的未定义值

> ID：12109620
> 
> 赞同：0
> 
> 时间：2012-08-24T12:43:22.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我只是想为选择设置未定义的值。未定义我的意思是“未定义”一个，但不仅仅是默认的一个。

我有这个：

```
= form_for @address do |f|
  = f.select :country_id, [['no country selected','0']] + Country.as_key_value_array 
```

where`Country.as_key_value_array`返回一个数组`[['country1','1'], ['country2','3'],['country3','3']]`

还有其他方法可以达到我想要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:34:26.217

`f.select :country_id, "<option value='0'>no country selected</option>".html_safe + options_from_collection_for_select(Country.all, :id, :name)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:00:32.427

看一下这个，

```
= f.select :country_id, options_for_select([['no country selected','0']] + Country.as_key_value_array) 
```

# python - 如何知道python中一行CSV文件的字节位置？

> ID：12109622
> 
> 赞同：7
> 
> 时间：2012-08-24T12:43:30.820
> 
> 标签：python, file, csv

我正在使用巨大的 CSV 文件（20-2500 万行）进行操作，并且出于很多原因不想将它们拆分成更小的部分。

*我的脚本使用csv*模块逐行读取文件。我现在需要在下一次迭代（或刚刚读取）时读取的行的位置（字节数）。

我试过

```
>>> import csv
>>> f = open("uscompany.csv","rU")
>>> reader = csv.reader(f)
>>> reader.next()
....
>>> f.tell()
8230 
```

但似乎*csv*模块按块读取文件。因为当我继续迭代时，我得到了相同的位置

```
>>> reader.next()
....
>>> f.tell()
8230 
```

有什么建议么？请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T13:17:07.560

如果“字节位置”是指字节位置，就好像您已将文件作为普通文本文件读取一样，那么我的建议就是这样做。逐行读取文件作为文本，并以这种方式获取行内的位置。`csv`您仍然可以使用该模块自己逐行解析 CSV 数据：

```
for line in myfile:
  row = csv.reader([line]).next() 
```

我认为 CSV 阅读器*不*提供这种字节位置是非常好的设计，因为它在 CSV 上下文中确实没有多大意义。毕竟，就 CSV 而言`"data"`，`data`它们是完全相同的四个字节数据，但`d`可能是第二个字节或第一个字节，具体取决于是否使用了可选的环绕引号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T12:48:36.293

简短的回答：不可能。字节位置无法通过 csvreader API 获得

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-10T19:26:54.703

该`csv`模块确实使用预读缓冲区读取块，如对这篇文章的响应中所建议的那样：

[file.tell() 不一致](https://stackoverflow.com/questions/14145082/file-tell-inconsistency/51792912)

我对您有类似的需求，并将我的解决方案推广给可能正在做类似事情的其他人：

[https://github.com/loisaidasam/csv-position-reader](https://github.com/loisaidasam/csv-position-reader)

希望能帮助到你！

# javascript - 使用百分比、类别名称和箭头渲染标签

> ID：12109633
> 
> 赞同：0
> 
> 时间：2012-08-24T12:44:07.407
> 
> 标签：javascript, jqplot

我想使用 jqplot 生成一个饼图。我的代码如下[http://jsfiddle.net/larsenmtl/dFgGj/](http://jsfiddle.net/larsenmtl/dFgGj/)

如您所见，标签已激活，但是当百分比太低时，无法呈现标签。

我的目标是有这样的东西，标签通过一点点链接到馅饼：http: [//www.statmethods.net/graphs/images/pie2.jpg](http://www.statmethods.net/graphs/images/pie2.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:56:00.103

你的问题分为两部分：

1.) 如何将标签移到楔形外侧？

jqPlot 有一个选项：`dataLabelPositionFactor`

```
 rendererOptions: {
        showDataLabels: true,
        dataLabels: myLabels,
        dataLabelPositionFactor: 1.2,
        sliceMargin: 4,
        fill: false
    } 
```

[在这里](http://jsfiddle.net/dFgGj/7/)拉小提琴。

2.）如何从楔形到移动标签绘制一个小箭头？

我认为没有内置的方法可以做到这一点。你可以在画布上自己画。如果今晚/明天我能找到一些时间，我会回来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:54:52.610

```
rendererOptions: {
            showDataLabels: true,
            dataLabelThreshold:1,
            dataLabelPositionFactor: 1.1
        } 
```

选项“dataLabelThreshold”默认为 3

小提琴[点击这里](http://jsfiddle.net/renwolang521/uawus/2/)

# php - 从两个数组中删除相同的值

> ID：12109637
> 
> 赞同：0
> 
> 时间：2012-08-24T12:44:16.620
> 
> 标签：php, arrays

我有两个数组，例如我想删除两者之间的相同值

```
 $array1 = array(1,2,3,4,5,6)
  $array2 = array(5,6,7,8,9,10) 
```

会有结果

```
 $array = array(1,2,3,4,7,8,9,10) 
```

我试过

```
$array = array_unique(array_merge($array1, $array2)); 
```

但很明显，刚刚删除的重复项将匹配的值保留为单个值。有没有一种快速的方法可以做到这一点，还是必须使用一个函数来完成？

对不起，伙计们，显然我不懂数组。这是底部的实际数组和建议结果。结果应该是`Coffee`and `General`。

```
 array(4) {
    [0]=>
    NULL
    [1]=>
    string(4) "Milk"
    [3]=>
    string(6) "Coffee"
    [6]=>
    string(8) "Sweetner"
  }

  array(4) {
    [0]=>
    NULL
    [1]=>
    string(8) "Sweetner"
    [3]=>
    string(4) "MIlk"
    [9]=>
    string(7) "General"
  }

  array(4) {
    [1]=>
    string(4) "Milk"
    [2]=>
    string(6) "Coffee"
    [6]=>
    string(4) "MIlk"
    [7]=>
    string(7) "General"
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:48:38.773

和的组合[`array_diff()`](http://www.php.net/manual/en/function.array-diff.php)是您在这里需要的：[`array_merge()`](http://www.php.net/manual/en/function.array-merge.php)[`array_intersect()`](http://www.php.net/manual/en/function.array-intersect.php)

```
$array = array_diff(
  array_merge($array1, $array2),
  array_intersect($array1, $array2)
); 
```

[看到它工作](http://codepad.org/9OmCmgo8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:48:44.420

尝试[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)

```
$intersect = array_intersect($array1, $array2);
$array     = array_diff(array_merge($array1, $array2), $intersect); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T12:49:09.713

您希望合并两个数组的差异，其中“差异”表示“另一个数组中不存在的值”：

```
$array = array_merge(array_diff($array1, $array2), array_diff($array2, $array1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:47:51.153

只是为了好玩，并且当您的数组仅包含字符串和整数值时：

`$array = array_keys(array_flip($array1) + array_flip($array2));`

# internet-explorer - 使用 .NET 4.5 在 IE 中加载 .NET UserControls

> ID：12109642
> 
> 赞同：16
> 
> 时间：2012-08-24T12:44:24.910
> 
> 标签：internet-explorer, user-controls, .net-4.5

有一个类似的问题： [Loading .NET UserControls in IE with .NET 4.0](https://stackoverflow.com/questions/3334664/loading-net-usercontrols-in-ie-with-net-4-0)这个问题本质上是一样的，但是对于**.NET 4.5**

这个问题始于： *我有一个旧版应用程序，其中有一个 UserControl，它在 IE 中加载的网页中用作 activex。在 .NET 4.0 之前，有安全策略和用于创建代码组的 MMC 控制台等。似乎在 .NET 4.0 中这一切都消失了。*

安装 .NET 4.5 后，解决方法似乎不再有效，并且 IE 无法加载**任何**用户控件。我担心这个功能会被完全删除。在这种情况下，在我们的用户可以安装 .NET 4.5 之前，我们需要进行一些认真的重写

一些注意事项：

*   .NET 4.5 RC 一切正常。8-(*   Fuslogvw (Assembly Binding Log Viewer) 在升级前表现如预期，但升级后它没有记录任何东西。（并且没有加载用户控件。）*   在生产中，控件必须完全信任地运行，但我所有的测试都是通过一个不需要这个的简单控件完成的

有人对此功能有任何建议或信息吗？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-25T06:36:39.310

这记录在 MSDN 上的 .NET 4.5 应用程序兼容性页面中：http: [//msdn.microsoft.com/en-us/library/hh367887.aspx](http://msdn.microsoft.com/en-us/library/hh367887.aspx)。开箱即用不再支持在 IE 中托管托管控件（请参阅“Web 应用程序”下的中途）：

> 功能：来自 .NET Framework 1.1 和 2.0 的托管浏览器托管控件
> 
> 更改：在 Internet Explorer 中阻止托管这些控件。
> 
> 影响：Internet Explorer 将无法启动使用托管浏览器托管控件的应用程序。可以通过将注册表子项 HKLM/SOFTWARE/MICROSOFT/.NETFramework 的 EnableLegacyIEHosting 值设置为 1 来恢复之前的行为。

不幸的是，注册表项上的信息似乎不完整且错误：

*   该设置实际上称为“EnableIEHosting”。

*   它必须位于 HKCU Hive 中：HKCU\SOFTWARE\Microsoft\.NETFramework

*   或 HKLM 配置单元，但在不同的路径下，具体取决于 Windows 的 32/64 位类型：
    *   32位系统：HKLM\SOFTWARE\MICROSOFT\.NETFramework
    *   64 位系统：HKLM\SOFTWARE\Wow6432Node\Microsoft\.NETFramework

这已在 Windows Server 2008R2 和 Windows 8 上进行了测试。

# ruby-on-rails - 除了 Rails 之外，Ruby 还有其他实际/商业用途吗？

> ID：12109647
> 
> 赞同：0
> 
> 时间：2012-08-24T12:44:57.083
> 
> 标签：ruby-on-rails, ruby, jruby

除了 Rails 和其他 Web 开发框架之外，Ruby 还有其他实际/商业用途吗？

我想知道 Ruby 作为一种通用编程语言适用于哪些其他应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T12:49:30.650

好吧，只需查看其网页的[成功故事](http://www.ruby-lang.org/en/documentation/success-stories/)部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:59:21.857

对于我必须编写的系统管理脚本，这是我个人的选择。我在范德比尔特管理超级集群的调度，我们有大约 500 个 linux 计算节点必须保持同步。我前任的 perl 脚本几乎无法阅读，这更多地说明了 perl 而不是他的脚本能力。Ruby 的可读性更高，因此更易于维护，其他员工很容易修改我为他们自己的目的编写的内容。因此，系统管理员工作对 ruby​​ 来说更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:42:09.810

C# 是我的生计，但我现在在 Ruby 中执行的任何通用脚本或自动化操作。

最近，我为 Oracle 编写了一个归档生成器，它接收一个表名列表，询问数据字典并输出归档表定义和触发器以写入它们。几百行 Ruby 可以生成数千行 DDL。

[我真的很喜欢这篇](http://weblog.jamisbuck.org/2008/11/9/legos-play-doh-and-programming)文章中的 Ruby 作为 play doh 类比。这是非常真实的。

然后是[长鳍金枪鱼](https://github.com/derickbailey/Albacore/wiki/Getting-Started)。这对于 Ruby 来说是一个完美的场景——您可以超级高效地编写构建任务的脚本，而不必处理大型 XML 配置文件的噩梦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:47:03.773

[http://accidentaltechnologist.com/ruby/10-alternative-ruby-web-frameworks/](http://accidentaltechnologist.com/ruby/10-alternative-ruby-web-frameworks/)

# python - 如何在matplotlib中调整x轴

> ID：12109648
> 
> 赞同：2
> 
> 时间：2012-08-24T12:45:04.163
> 
> 标签：python, matplotlib

我有这样的图表![在此处输入图像描述](../Images/63d62040dd2476b95c4df2383e75ae50.png)

x轴上的数据表示小时，所以我希望x轴设置为0,24,48,72.....而不是现在的值，很难看到[0,100]之间的数据

```
fig1 = plt.figure()  
ax = fig1.add_subplot(111)
ax.set_yscale('log')
ax.plot(x,y,'b-') 
```

根据第一个答案，我得到了这个： ![在此处输入图像描述](../Images/97140611c80348aa3b2ddc6cc1641be8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:54:01.860

查看[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.xticks)：

```
xlocs, xlabs = plt.xticks() 
```

将您的范围放入 xlocs 中，并在 xlabs 中放入您想要显示的内容。

然后：

```
 plt.xticks(xlocs, xlabs) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:48:37.217

It sounds like you want to changes the limits of the plotting display - for that use `xlim` (and `ylim` for the other axis). To change the xticks themselves is provided in the answer by @fp. Show below is an example using without/with `xlim`:

```
# Sample data
import numpy as np
N = 2000
X = np.random.gamma(.5,size=N)*100

import pylab as plt

plt.subplot(2,1,1)
plt.hist(X,bins=300)

plt.subplot(2,1,2)
plt.hist(X,bins=300)
plt.xlim(0,100)

plt.show() 
```

![enter image description here](../Images/3075d30f2ff0bb25074b3b756bacd2c4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T10:36:50.000

可以通过设置 Matplotlib 的动态 rc 设置来更改绘图的大小。这些存储在名为 rcParams 的字典中。绘图图形的大小与关键图形.figsize 一起存储。

例如，获取和设置 Matplotlib 图的大小： import matplotlib.pyplot as plt

```
fig_size = plt.rcParams["figure.figsize"] #Get current size
print "Current size:", fig_size           #Prints: [8.0, 6.0]
fig_size[0] = 12                          #Set figure width to 12 and height to 9
fig_size[1] = 9
plt.rcParams["figure.figsize"] = fig_size 
```

# objective-c - 在 Xcode 4.3 或 4.4 中安装开放工具链模板

> ID：12109649
> 
> 赞同：1
> 
> 时间：2012-08-24T12:45:07.470
> 
> 标签：objective-c, ios, xcode, jailbreak

是否可以在 Xcode 4.3 或 4.4 中安装开放工具链模板来进行越狱开发？我发现的一切似乎都有些过时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:39:06.723

我不确定你是否已经想通了，

无论如何，从 Xcode 4 开始你不需要这个插件，你可以简单地创建一个基于视图的应用程序/空的应用程序，通过一个简短的 .plist 编辑来使你的应用程序作为一个守护进程而不是一个“基于视图的应用程序”工作

这是相关的 .plist 编辑[http://chrisalvares.com/blog/38/creating-an-iphone-daemon-part-4/](http://chrisalvares.com/blog/38/creating-an-iphone-daemon-part-4/)

它是 2009 年编写的教程的最后一部分，但它仍然适用。. .

希望这有助于Taski

# asp.net - Twitter 限制和多个用户使用共享帐户

> ID：12109650
> 
> 赞同：1
> 
> 时间：2012-08-24T12:45:09.970
> 
> 标签：asp.net, twitter, twitterizer

我正在构建一个 Web 应用程序的一部分，它将与 twitter 集成（使用 twitterizer），我不确定我是否完全理解 twitter 限制将如何应用。让我解释一下。

我的大多数用户将拥有一个帐户（例如@ServiceAssistance），该帐户将由多个“应用程序”用户共享。每个用户都将登录到应用程序并开始监控同一个空调的提及、主题标签、DM 等。现在我只收到自第一次加载以来每 60 秒使用一次计时器的新推文。

所以现在的问题是，如果有 10 个用户正在监视提要，这意味着他们将在 30 分钟内超过 350 个速率限制。是否有我不知道的最佳实践，或者我可以做些什么来防止我的应用程序达到限制？

另外，我一直在考虑让每个“应用程序”用户授权并获得不同的 TokenSecret（即不共享访问权限，但每个人都有单独的访问权限），但我注意到只要你给出的 Accesstoken 和 TokenSecret 是相同的重新请求从同一个应用程序访问同一个 Twitter 帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:03:57.477

我通过将所有推文保存到一个表中解决了我自己的问题，然后所有用户都从该表中读取。问题解决了。

# jquery - chrome 中 Jquery 1.8 的问题

> ID：12109651
> 
> 赞同：0
> 
> 时间：2012-08-24T12:45:19.180
> 
> 标签：jquery, google-chrome

我正在调查[it-minds.dk](http://www.it-minds.dk/)上的一个小问题，其中在单击其中一个链接时出现的覆盖框出现并立即消失。

由于没有关于问题发生的时间、方式或原因的进一步信息，我不得不从头开始使用各种浏览器、安全措施等等。不幸的是无济于事。

不过，我注意到该站点使用 Jquery 1.6.3 运行，我认为这可能是问题所在，因此我决定将其更新到 1.8.0。

在除谷歌浏览器之外的所有浏览器中更新后，该网站仍然运行良好。

在 Google Chrome 中，更新后不会触发覆盖。我不知道为什么。

在不放弃 Chrome 用户的情况下改进 Jquery 的微弱尝试，我测试了 Jquery 1.7.2，它使 Chrome 再次工作，并希望防止一般的覆盖打开/关闭问题。

不过，我的问题是： 1\. 任何人都能够重现单击链接使覆盖在眨眼之间出现/消失的情况？2\. 谁能向我解释为什么在本网站上使用 Jquery 1.8.0 时 Chrome 停止工作？

提前致谢 - 拉斯穆斯

# sql - 在 SQL Compact 4 中将 uniqueidentifier 主键更改为 ROWGUIDCOL

> ID：12109653
> 
> 赞同：4
> 
> 时间：2012-08-24T12:45:26.280
> 
> 标签：sql, sql-server-ce

我正在尝试更改现有的 SQL Compact 4 数据库以将主键更改为 ROWGUIDCOL，但没有成功。

[SQL Compact ALTER TABLE 文档](http://msdn.microsoft.com/en-us/library/ms174123%28v=sql.105%29.aspx)表明您可以使用 ROWGUIDCOL 。但是，我发布的 ALTER TABLE 的每个变体都失败了：

*   `ALTER TABLE Company ALTER COLUMN CompanyId UNIQUEIDENTIFIER ROWGUIDCOL NOT NULL`：无效令牌失败：ROWGUIDCOL
*   `ALTER TABLE Company ALTER COLUMN CompanyId ADD ROWGUIDCOL`（SQL Server 语法）：无效令牌失败：添加
*   `ALTER TABLE Company ALTER COLUMN CompanyId UNIQUEIDENTIFIER NOT NULL ROWGUIDCOL`：无效令牌失败：ROWGUIDCOL
*   `ALTER TABLE Company ALTER COLUMN CompanyId ROWGUIDCOL UNIQUEIDENTIFIER NOT NULL`：无效令牌失败：ROWGUIDCOL

从文档中，第一个命令应该具有正确顺序的所有标记。

如何为 SQL Server Compact 4 中的现有列设置 ROWGUIDCOL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T06:59:23.507

这里是：

```
ALTER TABLE Company ALTER COLUMN CompanyId Add ROWGUIDCOL 
```

# c - struct 存储用户输入数据和 qsort 输出

> ID：12109654
> 
> 赞同：0
> 
> 时间：2012-08-24T12:45:29.097
> 
> 标签：c

**错误排序结构时间。**程序使用 struct 和 qsort 来接受和存储用户输入；名字、姓氏、国家和时间。输出应使用 qsort 按时排序，例如

**输入**

BEKELE Tariku ETH 27:31.43

RUPP 盖伦美国 27:30.90

法拉莫国标 27:30.42

**输出**

法拉莫国标 27:30.42

RUPP 盖伦美国 27:30.90

BEKELE Tariku ETH 27:31.43

```
#include <stdio.h> 
#include <stdlib.h> 
#include <string.h> 

struct olympics { 
    //char athlete[25];
    char fname[15];
    char lname[15];
    char country[5];
    float time;
};

/* qsort struct comparision function (time float field) */ 
int struct_cmp_by_time(const void *a, const void *b) 
{ 
    struct olympics *ia = (struct olympics *)a;
    struct olympics *ib = (struct olympics *)b;
    return (int)(60.f*ia->time - 60.f*ib->time); 
}

/* struct array printing function */ 
void print_struct_array(struct olympics *array, size_t len) 
{ 
    size_t i;

    for(i=0; i<len; i++) 
        printf("%s %s %s \t %.2f\n", array[i].fname, array[i].lname, array[i].country, array[i].time);

    puts("****");
} 

/* sorting structs using qsort() */ 
void sort_structs_time(void) 
{ 
    struct olympics structs[] = {
        scanf("%s %s %s %.2f\n", fname, lname, country, &time)
    };

    size_t structs_len = sizeof(structs) / sizeof(struct olympics);

    puts("**** Athletes finishing time...");

    /* print original struct array */ 
    print_struct_array(structs, structs_len);

    /* sort array using qsort functions */ 
    qsort(structs, structs_len, sizeof(struct olympics), struct_cmp_by_time);

    /* print sorted struct array */ 
    print_struct_array(structs, structs_len);
} 

/* call to the function) */ 
int main() 
{ 
    /* run the function */
    sort_structs_time();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:34:48.377

您需要对您的`sort_structs_time`和`struct_cmp_by_time`功能进行一些更改。很明显你还没有理解 C 结构和矩阵，所以对这个主题进行修订。

```
int struct_cmp_by_time(const void *a, const void *b) 
{ 
    struct olympics *ia = (struct olympics *)a;
    struct olympics *ib = (struct olympics *)b;

    if (ia->time < ib->time) return -1;
    else if (ia->time == ib->time) return 0;
    else return 1;
} 
```

请参阅[此](http://en.cppreference.com/w/cpp/algorithm/qsort)qsort 文档并查看那里提供的比较功能。

```
void sort_structs_time() 
{ 
int i, ath_num;

struct olympics *ath_recs;

printf("For how many athletes do you want to insert their records? \n");
scanf("%d", &ath_num);

ath_recs = (struct olympics *) malloc(ath_num*sizeof(struct olympics));

printf("Please insert athletes records. \n");
printf("type a random string and press ENTER when you done. \n");
for(i = 0; i < ath_num; i++){
    scanf("%s %s %s %f\n", ath_recs[i].fname, ath_recs[i].lname, ath_recs[i].country, &ath_recs[i].time); 
//Don't put %.2f on scanf!!! 
//Also, note that the fname, lname, country and time are struct fields, 
//so you have to access them this way.
}

puts("**** Athletes finishing time...");

/* print original struct array */ 
print_struct_array(ath_recs, ath_num);

/* sort array using qsort function */ 
qsort(ath_recs, (size_t) ath_num, sizeof(struct olympics), struct_cmp_by_time);

/* print sorted struct array */ 
print_struct_array(ath_recs, ath_num);
} 
```

还有其他方法可以更正您的代码。我只是觉得这更容易理解。

imo 更好地表示时间是这样的：

```
struct time{
    int mins;
    int secs;
    int fsecs;
} 
```

所以你可以这样打印时间：

```
printf("%d:%d,%d\n", mins, secs, fsecs); 
```

（如果您使用这种表示，即比较功能，您必须更改程序中与时间相关的部分。）

# jquery - 使用 jquery 对项目进行分类

> ID：12109671
> 
> 赞同：0
> 
> 时间：2012-08-24T12:46:07.423
> 
> 标签：jquery

我在我的网站上创建了一个书架，但是在将每件物品放在书架上的一行时遇到了问题。我想要的是让 jquery 帮助我创建一个新的 ul 标签来包含一个新的但连续的项目列表，每行应该有 5 本书，我怎样才能让 jquery 知道书的数量，然后将它们安排在我刚才说的方式？感谢任何有帮助的人。

这就是我想要的样子。

```
<ul>

<li>Book</li>
<li>Book</li>
<li>Book</li>
<li>Book</li>
<li>Book</li>

</ul>

<ul>

<li>Book</li>
<li>Book</li>
<li>Book</li>
<li>Book</li>
<li>Book</li>

</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:08:27.187

鉴于此 HTML：

```
<div class="container">
    <ul class="original">
        <li>Book</li>
        <li>Book</li>
        <li>Book</li>
        <li>Book</li>
        <li>Book</li>
        <li>Book</li>
        <li>Book</li>
        <li>Book</li>
        <li>Book</li>
        <li>Book</li>
    </ul>
</div>
​ 
```

你可以这样做：

```
while ($("ul.original li").size()) {
    var $slice = $("ul.original li").slice(0, 5);
    $("<ul>").append($slice.clone()).appendTo(".container");
    $slice.remove();
}

$("ul.original").remove();​ 
```

见[演示](http://jsfiddle.net/mhusaini/XwPxR/)。

# jqgrid - jqgrid客户端排序服务器分页陷阱.....使用最新版本

> ID：12109672
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:46:10.927
> 
> 标签：jqgrid

当我将 loadonce 设置为 true 时，客户端排序工作正常。我在 onSortCol 事件期间尝试这样做，但寻呼机被禁用。将“数据类型”设置为“本地”不会启用客户端排序。数据类型最初是“json”，并且 url 指向 asmx webmethod。我计划使用许多堆栈溢出帖子中描述的 onPaging 方法将数据类型更改为 json 以再次启用服务器端分页。

即，将“datatype”设置为“local”并不能启用客户端排序，但将“loadonce”设置为“true”可以。

有没有办法解决这个问题，因为我可以通过检查 loadonce 是否设置为 true 来启用寻呼机并在 loadcomplete 或 gridcomplete 之后恢复值。如果是这样，我该怎么做？

我正在处理的文件很大，因此我不想发布内容。我很确定它没有任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:45:45.407

如果您想要实现的是服务器端搜索和客户端排序/分页，请尝试以下操作：[在 jqGrid 中使“搜索”远程和其他所有内容（排序、分页等）本地化](https://stackoverflow.com/questions/11936149/make-search-remote-and-everything-else-sorting-pagination-etc-local-in-jqg)

# css - 创建一个固定在div内的表格位置折叠

> ID：12109677
> 
> 赞同：1
> 
> 时间：2012-08-24T12:46:32.650
> 
> 标签：css, css-position, jquery-scrollable

我有一个特殊要求，请点击[这里](http://tommywebdesigner.com/Vision.html)。看情况。

一旦我单击向下箭头并且 div 折叠，我需要修复 div 折叠中的第一个表并滚动下面的另一个表。

我希望解释清楚。你将如何做到这一点？

# java - Java 控制台应用程序

> ID：12109678
> 
> 赞同：2
> 
> 时间：2012-08-24T12:46:47.010
> 
> 标签：java

您能告诉我下面的控制台示例（Java）是否正确，我该如何自己测试？ [http://www.javapractices.com/topic/TopicAction.do?Id=79](http://www.javapractices.com/topic/TopicAction.do?Id=79) 我收到大约 8 个错误，从：

> “严重性和描述路径资源位置创建时间 ID 类型 Console 中的方法 printf(String, Object[]) 不适用于参数 (String, String) JL1 Console6.​​java line 21 1345812238329 351”

对于这一行：

```
console.printf("Welcome, %1$s.", username); 
```

我写了很多小程序，它们都运行良好，直到我尝试了这个。

在此之前，我尝试了一个非常简单的控制台，它可以读取几个单词，直到遇到“再见”这个词，它起作用了。我的 Java 版本：1.6.0_33 操作系统：Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:33:52.950

这

```
main(String... aArgs) 
```

似乎不正确。你可以试试

```
main(String args[]) 
```

你可能仍然面临问题。您可以提供错误消息以获得进一步的答案。

# javascript - 在 Raphael 中通过 CSS 控制矩形的填充

> ID：12109679
> 
> 赞同：1
> 
> 时间：2012-08-24T12:46:54.390
> 
> 标签：javascript, css, svg, raphael

我正在使用 Raphael，我想创建一个矩形并通过 CSS 控制填充属性。

当我以经典方式设置填充属性时，一切正常：

```
 space = paper.rect(0,0,1000,500).attr({fill: "url('img/cell_background.png')"}); 
```

事实上，通过这种方法，我得到了正确的填充。如果检查元素，我可以看到在`rect`元素`fill`中指定了属性，并且它引用了`svg`'s中定义的模式`defs`。

```
<svg>
   ...
   <defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); ">
        <pattern style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); " 
         id="E6992022-9B75-4D1E-9D44-6EC45CE420A1" x="0" y="0" 
         patternUnits="userSpaceOnUse" height="5" width="9" 
         patternTransform="matrix(1,0,0,1,0,0) translate(0,0)">
           <image style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); " 
                      x="0" y="0" 
                  href="img/cell_background.png" width="9" height="5">
               </image>

            </pattern>
      </defs>
      <rect style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); " 
        x="0" y="0" width="1000" height="500" r="0" rx="0" ry="0" 
    fill="url(#E6992022-9B75-4D1E-9D44-6EC45CE420A1)" stroke="#000" 
    class="space">
      </rect>
    ...
</svg> 
```

如果我改为`rect`使用以下代码创建：

```
space = paper.rect(0,0,1000,500);
space.node.setAttribute("class","space"); 
```

然后在 .css 我定义：

```
.space {
fill: url('img/cell_background.png');
stroke: #ff0000;
} 
```

然后检查的 html 显示一个`fill='none'`as`rect`属性，矩形正确渲染为红色边框，但填充为纯黑色。

一些进一步的观察：

1.  js在js/文件夹，css在css/文件夹，图片在img/文件夹。我尝试使用“../img”、“./img”和“img”，但我的行为相同；
2.  如果我不放填充物，我会得到预期的白色填充物；
3.  如果我把`fill: foobar`我得到一个白色的背景;
4.  如果我放`fill: #ff0000`我会得到预期的红色背景；
5.  如果我使用假文件名，我会获得相同的黑色背景；
6.  该行为与 Chrome 和 Firefox 一致。

从第四点和第五点开始，似乎找不到文件，但我认为已经用尽了我应该检查的路径组合（css使用'../img'路径在同一文件夹中找到其他图像） . 我认为问题出在其他地方。

有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:49:55.817

在 SVG 中，您不能像使用 HTML 元素那样只为元素指定位图背景 url。在 SVG 中执行此操作的标准方法是通过`pattern`定义。Raphael 用一个简单的`fill: url(...)`.

您可以使用 CSS 样式表加载模式，例如...

```
.space {
  fill: url('img/cell_background.svg#bitmap');
  stroke: #ff0000;
} 
```

但是，当然，`cell_background.svg#bitmap`仍然需要看起来像......

```
<svg xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink">
   <defs>
        <pattern id="bitmap" x="0" y="0" patternUnits="userSpaceOnUse" height="5" width="9">
           <image x="0" y="0" xlink:href="img/cell_background.png" width="9" height="5">
           </image>
         </pattern>
    </defs>
</svg> 
```

但这当然只会让事情变得更复杂。

您的矩形显示为黑色的原因是因为引擎正在尝试加载缺少的填充定义（渐变或图案），默认为黑色。

# actionscript-3 - 如何从一个 mxml 访问 swfcontrols 到另一个 mxml

> ID：12109685
> 
> 赞同：0
> 
> 时间：2012-08-24T12:46:59.997
> 
> 标签：actionscript-3, apache-flex

嗨，我在 page1.mxml 中有 SwfControl，我需要隐藏并显示该控件...在 page1 中我隐藏了该控件，而第 2 页我需要显示该控件该怎么做？

注意 page1.mxml 是**主页面**

page1.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<local:WindowsControl xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"
                      xmlns:local="*"
                      height="100%" width="100%"
                      backgroundColor="#FFFFFF"
                      backgroundAlpha="0">
    <mx:HBox x="11" y="167" horizontalGap="0">
    </mx:HBox>
    <mx:SWFLoader id="loader" source="loading.swf" visible="false"/>
</local:WindowsControl> 
```

我需要在 page1.mxml 中**隐藏****SWFloader**并在 page2.mxml中**显示****SWFloader**

第2页

```
<?xml version="1.0" encoding="utf-8"?>
    <mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" xmlns="*" creationComplete="init()" width="164" height="150" cornerRadius="3">
        <mx:Script>
            <![CDATA[
                import flash.media.Microphone;
                import flash.media.Video;
              public function init():void
                {
                    loader.visible=true;
                }
               ]]>
        </mx:Script>
        <mx:VBox height="100%" width="100%" horizontalAlign="center" backgroundColor="#000000" >
            <VideoContainer id="vids" opaqueBackground="true" width="160" height="120" />
             </mx:VBox>
             </mx:Canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:09:51.017

正确的做法是将事件分派到 page1 和 page2 的父容器。父容器会将消息/操作中继到目标页面。您的活动将包含应该发生的事情的信息。

# html - 窗口最小化和最大化

> ID：12109689
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:47:04.787
> 
> 标签：html

我正在开发网站，一切都已完成并成功，但我的问题是请查看附加图像，如果浏览器处于最大化位置，则网站看起来很整洁，但在最小化情况下，一切都更接近并且文本被另一个重叠，请建议我。 ![最大化](../Images/8435f78b2f61c5f4c4934187f419522a.png)

![最小化](../Images/35741bb5dba07b30dc3add082de26b94.png)

![最大化](../Images/e5622a4c57fc12ceabe73d55fb7d5bd7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:37:24.040

由于您没有提供实际的源代码，我不得不猜测。我猜你的页面是使用表格布局的。并且要么元素没有宽度属性，要么它们具有百分比宽度，例如 . 第一个图像上的黑色顶栏看起来像是用一个有两列的表格组成的，第二列是 align=right。

要使表格布局起作用，您应该将所有列的宽度设置为某个常数。特别是必须设置第一行的列宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:56:15.127

尝试在样式表中使用 html 元素的宽度和高度的 % 值而不是其像素值。

# regex - regsub -all 和 proc

> ID：12109695
> 
> 赞同：0
> 
> 时间：2012-08-24T12:47:22.590
> 
> 标签：regex, recursion, tcl, proc

我正在编写一个递归过程，称为“subliner3”。简单来说，它取代了：

1.  `[object method]`和`Object->method()`
2.  `[object method:attr1 attr2 ...]`和`object->method(attr1,attr2,...)`

在 (2) 中替换 (1) 和 (2) 是递归的。任何属性都可能类似于 (1) 或 (2)。

因此，此代码会导致问题：

```
while {[regsub -all {\[([^\[\]:]+)[:]([^\[\]]+)\]} $subline "[subliner3 "\\1" "\\2"]" subline]} {} 
```

这应该在 subline 中准确找到 (2)（subline 是一个属性列表）并再次为它调用函数。问题是，当使用 regsub 的 \1 和 \2 subliner3 调用 subline 时，subliner3 真的得到“\1”和“\2”，所以看起来它们是在 subliner3 调用之后被解释的。如何使用解释的 \1 和 \2 调用 [subliner3 "\1" "\2"]？

样本输入：

```
[self runAction:[CCSequence actions:[CCDelayTime actionWithDuration:5], [CCCallFunc actionWithTarget:self selector:@selector(resetMessage)], nil]]; 
```

输出：

```
self->runAction(CCSequence::actions(CCDelayTime::actionWithDuration(5), CCCallFunc::actionWithTarget(self, @selector(resetMessage)), nil); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:08:30.540

一种可能的解决方案是： **expr \"[regsub -all {(1)} "number 1" "[getSp \1]"]\"** 因此，首先，regsub 设法将 (1) 放在 \1 位置。然后 expr 调用 getSp。它不会用 \1 调用，而是用 (1) 调用。但是要使用此解决方案，我需要确保 regsub 返回的字符串 [ ] 仅针对过程指定，但并非总是如此。例如 regsub 调用后的字符串可能是这样的： **[self runAction:[CCSequence actions:[subliner3 "CCDelayTime actionWithDuration" "5"], [subliner3 "CCCallFunc actionWithTarget" "self selector:@selector(resetMessage)"], nil] ];** 其中只有 subliner3 - 是一个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:26:01.463

You can do it (under some assumptions, such as *no use of arrays*) but you really need to work inside out and to put your substitution code in a loop.

```
# Your sample as input
set string {[self runAction:[CCSequence actions:[CCDelayTime actionWithDuration:5], [CCCallFunc actionWithTarget:self selector:@selector(resetMessage)], nil]];}

# Do most of the replacements, recursively.
#
# Note that some parts are changed to \001stripExtra stuff\002, because we need
# to do further processing on the arguments which can't quite be done in this
# looped [regsub].
while {[regsub -all {\[(\w+) (\w+):([^]]+)\]} $string \
        "\\1::\\2(\u0001stripExtra \\3\u0002)" string]} {}

# The further processing to do on arguments (removing selectors)
proc stripExtra args {
    foreach s $args {
        # The lack of a fourth argument means [regsub] returns the string
        lappend t [regsub {^\w+:(?!:)} [string trimright $s ","] {}]
    }
    return [join $t ","]
}
# Apply the further processing by converting to a substitutable string
set string [subst [string map {\u0001 "\[" \u0002 "\]"} $string]]

# Now transformed...
puts $string 
```

The code above is rather brittle as it doesn't actually understand Objective-C, so you should check that its output is reasonable on your real input data…</p>

# c# - 无法连接到我的 SQL Server 数据库？

> ID：12109696
> 
> 赞同：1
> 
> 时间：2012-08-24T12:47:22.660
> 
> 标签：c#, visual-studio-2010, sql-server-ce

我正在 C#/.NET 4.0 中创建一个非常基本的 CRUD 桌面 winforms 应用程序。

让 Visual Studio 自动生成表的字段我想执行我的 CRUD 操作工作得很好，但是当我尝试使用我自己的 SQL 查询手动与它交互时遇到了问题。

自动生成的字段使用连接字符串：

```
Data Source=|DataDirectory|\Data Analysis.sdf 
```

如果我尝试这样做：

```
SqlConnection conn = new SqlConnection(@"Data Source=|DataDirectory|\Data Analysis.sdf");
conn.Open(); 
```

它只是挂起。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:53:39.623

这是一个 SQL Server **Compact Edition** (CE) 数据库的连接字符串（所有内容都存储在一个`.sdf`文件中）——这就是您正在使用的吗？

如果是这样：在这种情况下，您必须使用`SqlCeConnection`（不是`SqlConnection`- 那是“成熟”的 SQL Server 版本 - 不是 CE）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:52:25.513

也许尝试向连接字符串添加更多选项：

```
Persist Security Info=False;
File Mode=shared read; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T12:52:29.443

相信您已经指定了 .sdf 文件的相对路径，您可能需要从 System.Environment.CurrentDirectory 获取可执行文件的运行时文件夹并将其添加到文件名中。

# java - 泛型和访问者模式

> ID：12109698
> 
> 赞同：3
> 
> 时间：2012-08-24T12:47:35.450
> 
> 标签：java, generics, visitor-pattern

我遇到了访问者模式和泛型的问题。我有一些抽象类要访问其孩子。看看这段代码：

```
public abstract class Element extends SomeSuperClass {
    public void accept(Visitor<? extends Element> v) {
        v.visit(this);
    }
}

public interface Visitor<T extends SomeSuperClass> {
    void visit(T element);
} 
```

所以想法是：我有一些类层次结构（例如`Element`是 的子类`SomeSuperClass`）。我有一些通用`Visitor`接口来访问这个层次结构。现在在这个层次结构的中间是`Element`类，它是抽象的并且有它自己的子类。

现在我想`Element`接受它的子类的所有访问者，这就是我放这行的原因：

```
public void accept(Visitor<? extends Element> v) 
```

但现在我收到错误：

> 类型中的方法访问（`capture#1-of ? extends Element`）`Visitor<capture#1-of ? extends Element>`不适用于参数（`Element`）。

我明白`? extends Element`不是`Element`。我的问题是：我可以用不同的方式表达我的想法吗？或者我只是在这种情况下错过了泛型的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:51:52.097

那是行不通的——访问者`? extends Element`可能需要能够访问`Element`不知道或不知道的数据（属性/方法，...）。

您无法获得应该访问扩展`Element`为必然能够访问直接`Element`或什至另一个完全独立的子类的对象的访问者`Element`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:28:39.253

我认为您尝试做的事情没有多大意义。使`Visitor`泛型化是没有用的：该`accept()`方法必须将特定的访问者接口作为参数，以便 的子类`Element`可以调用特定的重载`visit()`.

```
interface Visitor {
  void visit(Element e);
  void visit(SubElement e);
}

class Element {
  public void accept(Visitor v) {
    v.visit(this);
  }
}

class SubElement { 
  public void accept(Visitor v) {
    v.visit(this);
  }
}

class ElementVisitor implements Visitor {
  public void visit(Element e) {}
  public void visit(SubElement e) {}
} 
```

请注意，`Visitor`接口必须知道`Element`层次结构中需要自定义`visit()`实现的所有类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T12:55:32.047

请注意，`T`in`<T extends SomeSuperClass>`可以是完全不相关的类型`Element`，编译器必须确保适用`visit(T t)`于所有可能的一般情况`T`。

您调用的代码`Visitor.visit(Element e)`，但有问题的访问者可能是`Visitor<SubElement>`。那是没有意义的。

我认为“`Element`必须接受其子类的所有访问者”的要求没有意义：访问者必须至少能够访问`Element` **及其所有子类**。那将是一个`Visitor<Element>`.

构造`accept(Visitor<? extends Element> v)`意味着 that`v`可以是任何这样`Visitor<T>`的`T extends Element`。这**并不**意味着访问者本身将属于 类型`Visitor<? extends Element>`。事实上，Java 中甚至不存在这样的东西。每个访问者都有一个与之关联的特定类型参数，而不是通配符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T19:57:48.860

最一般的写法是：

```
public void accept(Visitor<? super Element> v) {
    v.visit(this);
} 
```

这样，即使 a`Visitor<Object>`也可以工作（为什么不应该）。

记住 PECS（生产者`extends`，消费者`super`）。访客是消费者，所以它应该是`super`。

# android - 如何在android中获取所有同步联系人（google + facebook）

> ID：12109700
> 
> 赞同：1
> 
> 时间：2012-08-24T12:47:39.983
> 
> 标签：android, contactscontract

我使用光标从 android 联系人列表中获取所有联系人：

```
ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

    if (cur.getCount() > 0) {
      while (cur.moveToNext()) {
        String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
        String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
          Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);
          while (pCur.moveToNext()) {
            phoneContactList.add(name);
            Log.i("Contact List", name);
          }
          pCur.close();
        }
      } 
```

我的联系人列表与 facebook 同步。但在联系人列表中，我没有从 facebook 获取联系人。

如何获取所有同步联系人..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:20:46.613

万一有人偶然发现，答案就在这里：

[https://stackoverflow.com/a/8138587/669180](https://stackoverflow.com/a/8138587/669180)

“Facebook 不包含在 ContactPicker 中，因为 Facebook 禁止这样做。”

# iphone - 使用导航栏在 IB 中设计视图？

> ID：12109701
> 
> 赞同：0
> 
> 时间：2012-08-24T12:47:44.343
> 
> 标签：iphone, objective-c, ios, xcode

我在 IB 中设计了一个视图（没有 UINavigationBar）。我正在以编程方式推送该视图，现在的问题是如何通过记住 UINavigationBar 的位置来设计我的视图，有时对齐不正确，因为 UINavigationBar 未在 IB 中显示。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:11:14.070

在“属性检查器”下，选中“模拟指标”部分。从“顶部栏”组合中选择“导航栏”。

# asp.net-mvc - 使用 jquery 对话框提交 ajax 表单

> ID：12109703
> 
> 赞同：0
> 
> 时间：2012-08-24T12:47:49.090
> 
> 标签：asp.net-mvc, jquery

我想显示一个确认对话框，如果用户按“继续”，表单将被提交。

这是jquery代码：

```
$(document).ready(function () {
    $('#submit').click(function () {

        $('#confirmation-dialog').dialog('open');
        return false; // prevents the default behaviour
    });
    $('#confirmation-dialog').dialog({
        autoOpen: false, width: 400, resizable: false, modal: true, //Dialog options
        buttons: {
            "Continue": function () {
                $(this).dialog('close');
                var form = $('transferForm', this);
                $(form).submit();
                    return true;
                    },

            "Cancel": function () {
                $(this).dialog("close");
                return false;
            }
        }
    });
}); 
```

这是形式：

```
@using (Ajax.BeginForm("Transfer", "Location", null, new AjaxOptions
{
    UpdateTargetId = "update-message",
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "POST",
    //OnBegin = "ajaxValidate",
    OnSuccess = "updateSuccess"

}, new { @id = "transferForm" }))
{

<div style="width:600px;">
<div class="editorLabel">
    @Html.LabelFor(m => m.FromEmail)
</div>
<div class="editorText">
    @Html.TextBoxFor(m => m.FromEmail)
</div>
<div class="clear"></div>
<div class="editorLabel">
    @Html.LabelFor(m => m.ToEmail)
</div>
<div class="editorText">
    @Html.TextBoxFor(m => m.ToEmail)
</div>
<div class="clear"></div>
<p>
    <input type="submit" name="submit" value="Transfer" class="btn" id="submit"/>
</p>
</div>
}
<div id="update-message"></div>
<div id="commonMessage"></div>
<div id="confirmation-dialog">
<p>Are you sure you want to proceed with transfer ?

</p>
</div> 
```

但是确认后，表格没有提交。这里有什么问题？有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:52:10.147

尝试改变这个：

```
var form = $('transferForm', this);
$(form).submit(); 
```

到：

```
$("#IDofForm").submit(); 
```

因为`this`在对话框事件处理程序内部可能没有引用您认为它所做的事情，并且您可能没有带有`transferForm`标记名的元素（这是您在不使用`#`或`.`在选择器前面时的目标）？

# sockets - 操作系统如何知道互联网使用哪个网络接口？

> ID：12109708
> 
> 赞同：20
> 
> 时间：2012-08-24T12:47:54.697
> 
> 标签：sockets, network-programming, network-interface

我有一台带有两个网络接口的 PC：eth0 和 eth1。

eth0 - 具有 192.168.11.X/24 的 IP。

eth1 - 具有 192.168.130.X/24 的 IP。eth1 有互联网连接。

当我尝试连接到互联网时，我的操作系统如何知道要使用哪个接口？它是否遍历所有默认网关？它是否有每个接口提供的任何缓存？Windows和Linux之间的行为有什么区别吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T13:09:47.440

我将回答房子的 Linux 方面（至少对于基于 Debian 的系统，例如 Ubuntu，因为此时它对用户来说更常见）：

在命令行中键入以下内容：

```
route -n 
```

您应该会看到您的“路由表”出现，如下所示：

```
Destination    Gateway          Genmask         ...    Iface
0.0.0.0        192.168.11.254   0.0.0.0         ...    eth0
169.254.0.0    0.0.0.0          255.255.0.0     ...    eth0
192.168.11.0   0.0.0.0          255.255.255.0   ...    eth0
192.168.130.0  0.0.0.0          255.255.255.0   ...    eth1 
```

我省略了几列，但基本上，“Destination”下的“0.0.0.0”行是确定*默认路由*所在的行。换句话说，所有流量都不会流向其他线路中的任何其他子网（google.com、facebook.com 等）。

如果不正确（如上表，其中“eth1”是你想要上网的网卡），你应该改变默认路由：

```
sudo route del default
sudo route add default gw 192.168.130.254 netmask 255.255.255.0 
```

这将暂时解决它。要使其永久化，请编辑您的接口文件：

```
sudo gedit /etc/network/interfaces 
```

将其编辑为如下所示（根据您的具体情况进行更改）：

```
auto eth0
iface eth0 inet dhcp
up route del default

auto eth1
iface eth1 inet dhcp
up route add default gw 192.168.130.254 netmask 255.255.255.0 
```

然后重新启动网络以查看是否可以解决问题：

```
sudo /etc/init.d/networking restart 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T12:52:37.850

您要询问的功能是路由表，即主机已知的目的地列表。

当操作系统需要转发一个数据包时，它会检查这个列表并选择最合适的一个（从特定目的地到一般目的地）。例如：

```
192.0.2.0/28    - 192.0.2.1 via eth1
198.51.100.0/27 - 198.51.100.1 via eth0
0.0.0.0/0       - 203.0.113.1 via eth0 
```

注意最后一个目的地：它将匹配任何 IPv4 地址。

# java - 访问 META-INF/weblogic-application.xml

> ID：12109709
> 
> 赞同：1
> 
> 时间：2012-08-24T12:47:55.893
> 
> 标签：java, jakarta-ee, weblogic

我需要重构现有的 jar 以在 weblogic 11c 和 12c 下工作。该代码需要 java 角色到 LDAP 组映射的完整详细信息，如 ear META-INF/weblogic-application.xm 中所示。我寻求一种好的机制来检索这些信息。

一些细节：

*   该 jar 不是 EJB jar，因为接口无法更改，我无法控制它在应用程序中的使用方式（它是其他库的替代品）。
*   这意味着我不能注入 EJB 上下文。
*   这也意味着我没有连接到可用的 JMX mbean 树（需要配置信息）
*   我想要适用于多个应用程序的东西，所有应用程序都部署为耳朵。
*   我想要一些能够在快速交换和爆炸式目录布局中幸存下来的东西
*   我想要一些尽可能未来的证据
*   从 WAR 文件和 EJB jar 文件调用时，它都需要工作
*   它需要在 WebLogic 11c、12c 下运行，并尽可能合理地证明未来

现在，我使用这个策略：

*   使用 getClass().getResource(myself) 检索我的代码的 URL
*   删除 jar: 前缀和关联的 ! 标记
*   向上扫描目录树，直到找到包含 META-INF/weblogic-application.xml 的文件夹
*   如果找到 -> 读取并解析。/ 否则 -> 抱怨并崩溃

这似乎可行，但我希望通过访问 xml 文件或通过查询执行 jar 的托管服务器（但无法配置连接参数）来发现一种不那么 hackish 的方法

# asp.net-mvc-3 - 想通过 _layout 将 @renderbody() 放入部分视图源中

> ID：12109711
> 
> 赞同：4
> 
> 时间：2012-08-24T12:48:08.557
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

创建 MVC 3 Razor 项目。有一个非常复杂的 UI 设计。我想通过 _layout 将 @renderbody() 放入部分视图源中。编译器不会让我。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T14:46:58.123

您可以选择主/子布局，而不是局部视图。

**MasterLayout.cshtml**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>@ViewBag.Title</title>
</head>
<body>
  @RenderBody()
</body>
</html> 
```

**布局.cshtml**

```
@{
  Layout = "~/Views/Shared/_MasterLayout.cshtml";
}

// html code above render body
@RenderBody()
// html code below render body 
```

您的 sublayout( `Layout.cshtml`) 包含应该在局部视图中的代码。

# java - 使用android的通讯项目

> ID：12109717
> 
> 赞同：0
> 
> 时间：2012-08-24T12:48:25.047
> 
> 标签：java, android, bluetooth, wifi, communication

我正在从事第 8 届 sem 电信工程的项目，我计划创建一个使用蓝牙和 wifi 作为通道的双工（不确定是完整还是一半）通信应用程序，比简单的对讲机更先进，我想知道这对于单人军队是否可行？？？我也想知道是否可以使用 android 版本 2.2 及更高版本来执行此操作...我可以在应用程序中以这样的方式对蓝牙设置进行编程，即它不会弹出用户许可以接受语音消息来自主叫方？？是否有可能使用蓝牙或wifi创建多个通道（一个用于正向语音通道，一个用于反向语音通道）？这是我拥有的一些知识的清单：

JAVA：基础知识，在台式机上做过一些 gui，知道一些 imp 类，只有 SE6... 无线通信：本学期学习它，诸如基站如何接受传入的移动台请求并将其重定向到 dest，在我们的部分中主要是 1g。 .. 操作系统：一般，期待学习android和linux os... C,C++,DSP,and Some ELECTRONICS...

哦，我想在 7 个月内很好地实施这些……

人们请尽快用您的智慧和对有用网站的参考来启发我...

我对你的感谢和祝福......:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:09:26.173

我看到的第一个大问题是，在为此使用 wifi 时，据我所知，它是某种（高级）对讲机应用程序，在通信电话之间没有 rooter，你必须在你的 android 设备上实现 adhoc-wlan， android不支持，所以你需要一个root设备，并且在android上实现adhoc-wlan是确定的（看看这个代码：[http ://code.google.com/p/android -wifi-tether/](http://code.google.com/p/android-wifi-tether/)）但并不容易（我自己为大学项目做过）。

你问你是否可以避免弹出消息的权限，但是在安卓手机上激活你的蓝牙或将它与其他设备配对总是会请求用户的许可。

对于您要求的多个渠道，我无能为力。

作为对您的大问题的回答：“单人军队有可能吗？” 我会说一般是的，但这取决于你需要做多少其他事情。由于您正在编写这是一个大学项目，我不知道这是否是您唯一的项目，您可以在其中投入大量时间。如果是这样，我想这是可能的，但这将是一个相当大的项目，你应该愿意自己相对深入地研究网络的东西。

在 google.Code 上，您可以找到一些与您想做的类似的项目（至少是 wifi 部分），看看它们......

# android - 使用 String ArrayAdapter 从字符串数组源填充 Spinner

> ID：12109718
> 
> 赞同：3
> 
> 时间：2012-08-24T12:48:28.293
> 
> 标签：android, xml, spinner

我通过在我的 Java 代码中填充微调器来创建我的应用程序。我现在正在尝试将其转换为从我的 strings.xml 文件填充我的 Spinners。我关注了几个网站（[示例 1](http://developer.android.com/guide/topics/ui/controls/spinner.html)和[示例 2](http://www.dcpagesapps.com/developer-resources/android/21-android-tutorial-spinners?showall=1)），但无法让我的代码正常工作。

这些的主要问题是他们使用的 ArrayAdapter 的类型是`<CharSequence>`. 我可以使用`<String>`ArrayAdapters 以某种方式做到这一点吗？

这是我的 XML 文件中的数组：

```
<string-array name="anti_pump_ap_mode_array">
    <item>OFF</item>
    <item>Anti-Pump</item>
    <item>Motor Cut...</item>
</string-array> 
```

这是我尝试过的代码：

```
apModeAdapter = new ArrayAdapter<String>(this, R.array.anti_pump_ap_mode_array, android.R.layout.simple_spinner_item );

apModeAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, R.array.anti_pump_ap_mode_array );

apModeAdapter = ArrayAdapter.createFromResource(this, android.R.layout.simple_spinner_item, R.array.anti_pump_ap_mode_array ); 
```

当然最后一个给了我一个错误，但前两个只是没有填充我的微调器。当我运行应用程序时，微调器只是空的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T12:55:32.593

使用以下方式，交换数组 id 和布局 id。Textarray 资源 id 是第二个参数

```
apModeAdapter = ArrayAdapter.createFromResource(this, R.array.anti_pump_ap_mode_array, android.R.layout.simple_spinner_item,  ); 
```

编辑：对于第一种工作方式。从资源中获取字符串数组

```
Resources res = getResources();
apModeAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, res.getStringArray(R.array.anti_pump_ap_mode_array) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:56:52.653

`CharSequence`是一个`String`实现的接口，因此即使 API`createFromResource()`返回接口类型，它仍然会填充您的`String`数组。如果您以后确实需要将结果作为字符串访问，则可以强制转换访问器。但是，大多数 Android UI 方法`CharSequence`也将其作为输入。

此外，参数是相反的。它应该如下所示：

```
ArrayAdapter.createFromResource(this, R.array.anti_pump_ap_mode_array, android.R.layout.simple_spinner_item ); 
```

# orchardcms - Orchard 1.5 在 ContentMenuItem 中添加类或 ID

> ID：12109728
> 
> 赞同：3
> 
> 时间：2012-08-24T12:49:11.133
> 
> 标签：orchardcms

如何使用 Orchard 1.5 添加要为内容菜单项输出的类和/或 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T02:05:26.890

转到内容/内容部分，编辑菜单内容部分并添加一个“CssClass”文本字段。然后，覆盖 menuitem.cshtml 的模板，并在该`var tag =`行之后添加：

```
if (Model.CssClass != null) {
    tag.AddCssClass(Model.ContentItem.Menu.CssClass.Value);
} 
```

这应该够了吧。

# php - 计算日期范围内的设备总数

> ID：12109737
> 
> 赞同：3
> 
> 时间：2012-08-24T12:50:21.287
> 
> 标签：php, mysql

项目：我正在做一个关于一些房间和房间内使用的设备的项目。该软件是关于安排房间内的设备。换句话说，它是一个预订软件，可以在不同的房间里为需要的日期和时间范围预订选定的设备。我在使用 PHP 的 MYsSQL 数据库中有很多表，但我会提到我的问题所涉及的表。我将与我的问题相关的表格是设备表（表 A）、时间表表（表 B）和相关时间表中使用的设备（表 C）。

表A：设备清单表

```
eqid   | eqName    | available| 

1      |  book     |   90     |      

2      |  pen      |   82     | 

3      |  computer |   25     | 
```

在表A中；eqid 表示设备的唯一标识，eqName 表示设备的名称，available 表示现有的可用设备总数。

表 B：日程表

```
scheduleid | startDate  | endDate    | startTime | endTime  |  office  |

1          | 2012-08-27 | 2012-08-27 | 08:30:00  | 10:00:00 |  room1   |

2          | 2012-08-27 | 2012-08-27 | 09:30:00  | 11:00:00 |  room3   |

3          | 2012-08-28 | 2012-08-30 | 08:30:00  | 12:00:00 |  room2   |

4          | 2012-08-29 | 2012-08-31 | 11:30:00  | 14:00:00 |  room1   |

5          | 2012-08-28 | 2012-08-28 | 10:30:00  | 14:00:00 |  room3   |

6          | 2012-08-27 | 2012-08-30 | 08:30:00  | 10:00:00 |  room4   |

7          | 2012-08-27 | 2012-08-27 | 10:30:00  | 12:00:00 |  room4   |    

8          | 2012-08-27 | 2012-08-30 | 08:30:00  | 11:00:00 |  room6   |

9          | 2012-08-27 | 2012-08-27 | 10:30:00  | 12:00:00 |  room5   | 
```

在表 B 中；scheduleid 表示时间表的唯一 id，startDate 和 endDate 是时间表的日期范围，startTime 和 endTime 是时间表的时间范围，office 表示时间表将发生的位置。让我在这里举个例子。Scheduleid 1 表示 2012 年 8 月 27 日星期一有预订，时间为 08.30 至 10:00。由于它在同一天开始和结束，这只是房间 1 的一天预订。但是，Scheduleid 3 表示预订从 2012 年 8 月 28 日星期二开始，一直持续到 2012 年 8 月 30 日星期四 08:30-12:00... 换句话说，它持续 3 天，每天从08:30 到 12:00... 所以周二到周四 08:30 到 12:00 房间 2 有预订... 我希望这很清楚。

表C：相关附表中使用的设备

```
Autoid  | scheduleid |  eqid   | amountInSch|

1       |     1      |   1     |      2     |      

2       |     1      |   2     |      3     |  

3       |     1      |   3     |      1     |  

4       |     2      |   1     |      1     |  

5       |     2      |   2     |      1     |  

6       |     2      |   3     |      2     |  

7       |     3      |   2     |      1     | 

8       |     3      |   3     |      3     |  

9       |     4      |   2     |      1     |  

10      |     4      |   3     |      1     |  

11      |     5      |   1     |      1     |  

12      |     6      |   1     |      1     | 

13      |     6      |   3     |      2     |  

14      |     6      |   2     |      4     |  

15      |     7      |   1     |      5     |  

16      |     7      |   2     |      6     |  

17      |     8      |   2     |      1     | 

18      |     9      |   1     |      8     |  

19      |     9      |   2     |      5     |  

20      |     9      |   3     |      6     | 
```

表C中：Autoid表示auto-increment生成的唯一自动id，scheduleid来自表B，eqid来自表A，amountInSch表示相关调度中将使用多少（数量）设备。我想在这里举个例子。表C中的Scheduleid 1，有3行。这意味着表 B 中相关的 scheduleid 1 将在表 B 中指定日期和时间的 room1 中使用 2 本书 (eqid 1)、3 支笔 (eqid 2) 和 1 台计算机 (eqid 3)。另一个例子是表 C 中的 scheduleid 3 是相关的 2 行。这意味着 1 支笔 (eqId 2) 和 3 台电脑 (eqId 3) 将在 2012 年 8 月 27 日至 30 日每天 08:30 至 12:00 在 room2 使用。

以上是解释并提供了有关该项目的一些信息。表行不是永久的。当您进行预订时，B 表中会出现新行，如果选择了设备，C 表中会出现新行...

问题：

当我提供 eqId、startDate、endDate、startTime 和 endTime 时，我想计算特定设备的剩余量...

一个例子：

eqId：1（书）

开始日期：2012-08-27

结束日期：2012-08-27

开始时间：08:30:00

结束时间：12:00:00

结果应该是：计划中使用了 14 本书，剩余 76 本书可用

因为：如果您查看 scheduleIds 和相关的 eqIds，您只会看到与我的查询相关的 1、2、6、7、9 个 scheduleIds（日期和 eqId）。如果将表 C 中相关的所有数量相加，您将得到错误的结果。换言之，eqId(1-book) 和 1、2、6、7、9 scheduleId 的相关数量分别为 2、1、1、5、8。因此，如果将它们相加，您将得到 17，这是错误的。因为，1 和 9 的时间表在开始和结束时间方面不相交，而 6 和 7 也不相交。由于他们 2 保持孤独，可以单独计算。我们必须将 1 和 9 视为总和 8，因为 8 大于 2。6 和 7 相同，因为 5 大于 1，所以视为 5...

所以伙计们！我不确定如何在编程算法中求和/这个。有没有办法在 SQL 中做，还是我必须一起使用 PHP 和 Mysql？如何？

干杯!

# [*SQLFiddle 记录*](http://sqlfiddle.com/#!2/fa8cf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:05:12.893

我从以下 SQL 开始收集与给定范围相交的所有日期范围：

```
SELECT MAX(available) - IFNULL(SUM(amountInSch), 0)
FROM Table1
LEFT JOIN Table3 USING (eqid)
LEFT JOIN Table2 USING (scheduleid)
WHERE DATE(startDate) <= '2012-08-27' AND DATE(endDate) >= '2012-08-27'
  AND endTime > '08:30' AND startTime < '12:00'
  AND eqid = 1 
```

[小提琴](http://sqlfiddle.com/#!2/fa8cf/103)

这只是第一部分。接下来，您必须找出可能的重叠；这对于 SQL 来说是不切实际的，所以我建议在 PHP 中执行此操作。

不幸的是，我选择的通用算法是 O(n**2)，它是这样的：

*   创建以时间为横轴的时间线（按每天划分）
*   遍历每个日期/时间范围并标记其左右边缘的时间以创建每个可能排列的时间段。
*   使用这些段，您可以对重叠进行垂直求和，然后获取每日最大值。

希望有帮助。

# ios - Apple 的 Reachability 框架的真正必要性是什么？

> ID：12109743
> 
> 赞同：1
> 
> 时间：2012-08-24T12:50:49.723
> 
> 标签：ios, networking, reachability

我已经阅读了可达性框架，但仍然很困惑为什么主机可达的定义是“当数据包......可以离开本地设备时”。

如果可达性返回“是”，那么我似乎仍然需要尝试建立一个套接字连接，直到实际连接为止，我并不知道我的主机已经启动。为什么 Reachability 不使用 Ping 来更好地了解主机是否实际启动？这个框架首先需要什么？

我的猜测是这两个，但如果有人知道使用可达性框架的任何其他原因，请告诉我。

1) 可达性提供回调，当互联网恢复时提供即时通知。发生这种情况时，可以立即尝试套接字连接。然而，在 99% 的应用程序中，每隔几秒尝试一次套接字连接似乎是可以接受的，或者在最坏的情况下，只是在用户执行特定操作时尝试建立连接。诚然，这不是一个理想的解决方案，但我不明白为什么出于这个原因，Reachability 框架真的很有必要。

2) 即使在与服务器建立套接字连接的情况下，Reachability 也会提供有关网络是否为 G3/WiFi 的重要信息。我认为这是唯一一次真正*需要*可达性，因为它允许根据网络类型优化行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:00:29.657

可达性实际上非常有用：鉴于您的情况（1），您忘记了它会为您提供有关*网络*启动和关闭事件的通知。这意味着您可以设置回调来处理诸如丢失网络连接之类的事件（在 WiFi 和 3G 上发生的情况比您希望的要多）。

此外，使用套接字测试连接并不是那么简单。默认情况下，套接字操作是阻塞的，尽管您可以使用异步操作（或线程），但这样做涉及编写代码。更不用说在网络关闭时尝试 DNS 以及其他此类问题。通过使用框架设置可达性目标，您可以减轻自己处理各种此类问题的需要，而只需等待回调。

希望这可以帮助，

TG

# c# - 如何配置 C# 项目以使用 Windows SDK 7.1 工具进行构建？

> ID：12109745
> 
> 赞同：2
> 
> 时间：2012-08-24T12:50:56.183
> 
> 标签：c#, windows, sdk, managed

我们正在尝试将很多项目切换到使用 SDK7.1。对于 C++ 项目，这似乎很简单，您可以将项目设置中的“平台工具集”属性更改为“Windows7.1SDK”，一切都很好。

但是，对于 C# 项目（如果您将构建输出设置为诊断模式），我们可以看到各种工具（例如 sgen、resgen、LC）在以前的 SDK 7.0A 目录中运行。或者，在我们安装了 Vistual Studio 2012 的某些机器上，其中一些工具来自 v8.0A SDK 文件夹。

工具与其生成的程序集之间的不匹配似乎会导致各种错误，例如：

```
LC : error LC0000: 'Could not load file or assembly
'S:\Libraries\Bin\Release\Some.dll' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.' 
```

似乎我们可以编辑 .csproj 文件和几乎临时的，以及重新定义各种 SDKPath 属性的 BeforeBuild 等目标。这似乎迫使使用正确的工具。但是，如果感觉非常“hacky”。而且我们一定是错过了一些设置，因为我们仍然会遇到一些错误。

或者，我们发现，我们可以在这里更改注册表值：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSBuild\ToolsVersions\4.0\SDK40ToolsPath 
```

指向正确的 SDK。但是，必须修改环境来支持这一点感觉是错误的。我们想要构建我们产品的旧版本，并且必须切换环境来做到这一点是丑陋且容易出错的。

有没有官方的方法可以做到这一点？

谢谢。

PS我发现了这个问题[http://social.msdn.microsoft.com/Forums/en-MY/windowssdk/thread/ebc8914f-d4b5-44e7-8c76-10332d155812](http://social.msdn.microsoft.com/Forums/en-MY/windowssdk/thread/ebc8914f-d4b5-44e7-8c76-10332d155812)海报似乎在问类似的事情，但是，问题似乎没有得到回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:11:57.877

以下两篇文章讨论了定义自定义工具集。可能是为 7.1 SDK 定义的需求之一，然后可以指导 MSBuild 使用它。

[http://msdn.microsoft.com/en-us/library/bb383796(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb383796(v=vs.110).aspx) http://msdn.microsoft.com/en-us/library/bb397428.aspx

# php - 单一职责原则

> ID：12109751
> 
> 赞同：3
> 
> 时间：2012-08-24T12:51:13.407
> 
> 标签：php, class, single-responsibility-principle

假设您有抽象类 A 做一些事情。然后你让抽象类 B 做其他事情。

最后是一些普通的课程，比如说 C ... Z。

A 和 B 都提供 C .. Z 类使用的功能。在我的情况下，主要是一个静态的观察者模式，以及某些类型的属性的一些 __get 魔术 + 延迟加载 - 这不是静态的。我正在考虑将其合并到一个类中，但我确信它违反了 SRP :)

所以我在 C、D 等中扩展了 A、B... 基本上所有 C .. Z 类都继承了 A 和 B 类的功能。所以除了他们应该做的事情之外，他们还做观察者的事情等等

这是否违反单一责任原则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:00:44.440

我将其读作“多重继承是否违反了 SRP”？

从技术上讲，我会说是的。

实际上，它更加模糊。什么是“责任”？您可能需要这两个部分的功能来满足复合责任。您还必须平衡与实施和维护您对对象层次结构施加的严格性相关的努力。

这是一个原则。它的存在是为了将您的思考集中在关注点的封装和分离上，以免试图将所有东西都扔进一刀切的凌乱的超类中。

现在来看一个具体的例子：为了方便起见，你是在拉 A 和 B 吗？如果您查看 A 和 B 的不同消费者需要什么，是否有一些试图突破的重构（例如，不需要或应该在其他地方完成的某些功能子集？）在抽象中不可能说。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:02:13.633

我不知道这是否适用于您的具体情况，但我发现大多数时候，一个抽象类及其实现可以分为两个普通类。

例如：

```
abstract class AbstractAdder {
    int AddThree(int a) {
        Add(a, 3);
    }

    abstract int Add(int a, int b);
}

class NormalAdder inherits AbstractAdder {
    int Add(int a, int b) {
        return a + b;
    }
}

var result = new NormalAdder().AddThree(6); 
```

可以改成：

```
class ThreeAdder {
    ThreeAdder(IGenericAdder genericAdder) {
        this.genericAdder = genericAdder;
    }

    int AddThree(int a) {
        return this.genericAdder.Add(a, 3);
    }
}

class NormalAdder implements IGenericAdder {
    int Add(int a, int b) {
        return a + b;
    }
}

var result = new ThreeAdder(new NormalAdder()).AddThree(6); 
```

这有几个优点：

*   这些类的耦合度较低，因为它们不会相互继承。因为类是独立的，所以职责更加独立和明确。
*   您可以使用多个类的功能，而您只能从一个抽象类继承。（编辑：显然不是在 PHP 中，因为你有多重继承）
*   在哪个类上调用该方法更清楚（恕我直言）。

似乎您正在使用继承来耦合多个类，但这不是继承的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-16T05:38:45.950

多重继承不会强制这样做，但往往会导致它。您的基本接口是为单一目的而设计的，继承它们确实会创建一个具有多种职责的类。您可以将您的类和接口分为两大类——一类解决系统的基本复杂性，另一类解决其偶然的复杂性。我认为如果你从多个“基本”类继承，那就不好了。但是如果你从一个“基本”类和一个或多个“偶然”类继承，这是正常的。

# mysql - SQL：连接两个表（LEFT OUTER JOIN）然后更新值

> ID：12109760
> 
> 赞同：2
> 
> 时间：2012-08-24T12:52:05.550
> 
> 标签：mysql, sql-update, sql

我试图根据另一个表中的值更新一列中的值。

如果列都在同一个表中，我可以这样做：

```
UPDATE wp_posts 
SET post_date = REPLACE (post_date, 'X', 'Y') 
WHERE meta_value = 'Z'; 
```

但我需要先加入两个表才能更新：

```
SELECT * 
FROM wp_posts 
LEFT OUTER JOIN wp_postmeta ON post_id = post_id 
```

如何根据我加入的两个表进行更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T12:54:35.190

试试这种方式，如果你使用**SQL Server**

```
UPDATE WP
SET WP.post_date = REPLACE(WPM.post_date, 'X', 'Y') 
FROM wp_posts WP 
   LEFT OUTER JOIN wp_postmeta WPM ON WP.post_id = WPM.post_id
WHERE WP.meta_value = 'Z'; 
```

**更新：**

如果您使用的是**MySQL**。*这是MySQL*的更新

 *```
UPDATE wp_posts WP 
   LEFT JOIN wp_postmeta WPM ON WP.post_id = WPM.post_id
SET WP.post_date = REPLACE(WPM.post_date, 'X', 'Y') 
WHERE meta_value = 'Z'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:02:39.187

**SQL 服务器**

```
UPDATE wp_posts 
post_date = REPLACE (post_date, 'X', 'Y')
FROM wp_posts WP LEFT OUTER JOIN wp_postmeta WPM ON WP.post_id = WPM.post_id
WHERE meta_value = 'Z'; 
```

**MySQL**

```
UPDATE wp_posts 
LEFT JOIN wp_postmeta WPM ON WP.post_id = WPM.post_id 
SET post_date = REPLACE (post_date, 'X', 'Y')
WHERE meta_value = 'Z' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T12:54:15.890

```
 UPDATE wp_posts SET post_date = REPLACE (WPM.post_date, 'X', 'Y')
 FROM wp_posts AS WP
 LEFT OUTER JOIN wp_postmeta AS WPM ON WP.post_id = WPM.post_id
 WHERE WP.meta_value = 'Z' 
```*

# objective-c - 如何使用保存其名称的字符串访问属性/变量

> ID：12109762
> 
> 赞同：2
> 
> 时间：2012-08-24T12:52:09.677
> 
> 标签：objective-c, macos, cocoa

如果我在 Objective C 中有两个像这样的变量，其中一个将另一个的名称保存为字符串

```
NSInteger result = 4;
NSString * theName = @"result"; 
```

我如何最好地使用字符串而不是对变量的引用来访问第一个变量？例如，如果我有很多变量并且会通过代码生成我需要的变量的名称，那么我需要一种使用该字符串获取变量的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T12:57:04.353

虽然没有直接回答您的问题，但可以通过以下方式访问对象的属性（或 ivars）

```
[object setValue:@"value" forKey:theName] 
```

同样，吸气剂是`[object valueForKey:theName]`（感谢kevboh！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:02:38.253

这在objective-c中是不可能的。变量名不能按名称合成。运行代码时，变量名本身没有任何意义，编译器会将其转换为内存地址。该名称只是程序员使编写和阅读代码更容易的一种方式。

取决于您的具体情况，但您可能应该使用 NSArray 或 NSDictionary。

# c++ - 在 Gnome 或 KDE 中以编程方式在桌面上移动应用程序窗口

> ID：12109766
> 
> 赞同：3
> 
> 时间：2012-08-24T12:52:27.080
> 
> 标签：c++, gnome, kde

我想使用 c++ 程序在桌面上重新定位应用程序窗口。我应该怎么做，我需要两种情况的解决方案。

1.  当我有想要移动的应用程序的来源时。

2.  通过编写外部程序来移动其他应用程序的窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:08:13.193

外部 Bash 脚本：

```
xdotool   search --onlyvisible --class dolphin   windowmove 13 37
#                                         ^                 ^   ^
#                                   window class            X & Y coordinates 
```

有关这方面的更多信息，请使用`xdotool search`和。`xdotool windowmove``man xdotool`

C++ 示例：

```
#include <cstdlib>
#include <string>
#include <sstream>

using namespace std;

int main()
{
    string cls="dolphin";
    int x=13, y=37;

    stringstream s;
    s<<"xdotool search --onlyvisible --class "<<cls<<" windowmove "<<x<<" "<<y;

    system(s.str().c_str());

    return 0;
} 
```

最起码的例子：

```
#include <stdlib.h>

int main()
{
    system("xdotool search --onlyvisible --class dolphin windowmove 13 37");
    return 0;
} 
```

# php - 当我使用 php 悬停连接到 mysql 的图像时显示标题

> ID：12109771
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:52:52.423
> 
> 标签：php, javascript, mysql, lightbox

当悬停到使用 php 连接到 mysql 的图像时，我想显示图像标题。

这是我使用的代码。

```
<div class="galleryko">
<?php $data = mysql_query("SELECT * FROM tbl_gallery_featured")?>

    <div class="lalagyan1">
    <?php while($row = mysql_fetch_assoc($data)):?>
        <div class="lalagyan">
            <div id="wew">
                <a href="admin/featured/<?php echo $row['photo']?>" rel="lightbox[plants]"><img src="admin/featured/<?php echo $row['photo']?>" style="width:150px; height: 150px;"/></a></br>                      
            </div>
        </div>
    <?php endwhile?>  
    </div>   
</div> 
```

然后我尝试在代码中插入一个 TITLE

```
<a href="admin/featured/<?php echo $row['photo']?>" rel="lightbox[plants]" title="SOMETEXT"><img src="admin/featured/<?php echo $row['photo']?>" style="width:150px; height: 150px;"/></a></br> 
```

但是当我在完成之后将图像悬停时，发生的事情是，所有图像都以 SOMETEXT 命名，现在我想单独显示图像的标题。

有人请解决我的问题，。先感谢您！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:57:57.153

删除`title="SOMETEXT"`并添加类似这样的东西来`img`标记`alt="$row['title']"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:31:04.183

```
<a href="admin/featured/<?php echo $row['photo']?>" rel="lightbox[plants]" title="<?php echo $row['title']?>"><img src="admin/featured/<?php echo $row['photo']?>" style="width:150px; height: 150px;"/></a> 
```

# javascript - 通过 Knockout 组合文本和 html

> ID：12109775
> 
> 赞同：7
> 
> 时间：2012-08-24T12:53:10.817
> 
> 标签：javascript, html, knockout.js

这就是我想要构建我的html的方式

```
<a href="#">John <i class="person"></i></a> 
```

使用 knockout.js，这就是我所做的。

```
<a data-bind="text:name"><i class="person"></i></a> 
```

正如您可以猜到的那样，由于文本绑定，锚的整个元素（不仅仅是文本）都被删除了，在这种情况下，锚内的整个标签都被删除了。我的解决方案如下。

```
<a data-bind="html: name() + '<i class="person"></i>'"></a> 
```

在数据绑定中使用 html 的字符串连接是一种解决方案，但它有两个很大的缺点。'name' 属性不安全，因此我们可以进行 html 注入。偶尔在数据绑定属性中编写 html 很糟糕。

另一种解决方案是。

```
<a href="#"><span data-bind="text:name"></span><i class="person"></i></a> 
```

我知道我们为解决方案引入了新的 html 标记。这是我发现的最好的。

在 knockout.js 中这个问题的众所周知的解决方案是什么？

我们可以指定仅通过参数将文本而不是其中的整个元素更新为文本绑定吗？

还是更好的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T13:14:00.373

使用跨度是首选解决方案。如果文本绑定没有替换所有内容，那么它就很难知道要更新什么，并且下次更改时不更新。如果您想始终处理元素的第一个子节点，那么您可以编写一个小的自定义绑定来提供帮助。

这是一个简单的`prependText`绑定。这将始终替换包含绑定的元素的第一个子节点。因此，您需要确保第一个节点至少是一个空格。

```
ko.bindingHandlers.prependText = {
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        //replace the first child
        element.replaceChild(document.createTextNode(value), element.firstChild);
    }        
}; 
```

像这样使用它：

```
<a href="#" data-bind="prependText: name"> <span> another element</span></a> 
```

示例：http: [//jsfiddle.net/rniemeyer/5CfzH/](http://jsfiddle.net/rniemeyer/5CfzH/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-14T20:35:01.363

您还可以使用 KO“无容器”表示法

```
<!-- ko text: YourProperty -->
<!-- /ko--> 
```

其他绑定（例如 foreach）也可以这样做：[参见第 4 部分](http://knockoutjs.com/documentation/foreach-binding.html)

# ios - GKSession 与 Mac OS X

> ID：12109780
> 
> 赞同：10
> 
> 时间：2012-08-24T12:53:26.363
> 
> 标签：ios, macos, networking, gamekit, core-bluetooth

我正在使用 GKSession（Game Kit 的一部分）将多个 iOS 设备连接在一起（通过蓝牙和/或 wifi）、发送数据等，一切正常，我对此很满意。

不过我在想，拥有一个可以连接到 iOS 设备、共享数据等的 Mac OS X 应用程序会很酷。

遗憾的是，GKSession 似乎不是 Mac OS X 游戏工具包的一部分（显然是 10.8+）。我想知道是否有人知道这样做的方法或有任何想法。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T14:32:19.627

GameKit for Mac OSX 使用游戏中心 over wifi 通过苹果的游戏中心服务器将 Mac、iPod Touch、iPad 和 iPhone 相互连接。

有关如何实现类的更多信息，请参阅 Mac OSX 的 GameKit 框架参考

# android - 如何一次又一次地调用相同的警报对话框？

> ID：12109782
> 
> 赞同：0
> 
> 时间：2012-08-24T12:53:36.370
> 
> 标签：android, alert, android-alertdialog

我创建了一个`Alert Dialog`具有两个`EditText`和两个`Button`的值，并且我获取了的值，`EditText`如果值匹配，那么我正在执行一些操作，否则我想再次调用相同`AlertDialog`的值。但是如果值不同，那么我无法调用相同的警报对话框。我不知道我在哪里做错了......

我的代码是这样的::

```
public class MainActivity extends Activity 
{
private Button btn_click;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn_click=(Button)findViewById(R.id.btn_click);
    btn_click.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View arg0) 
        {
            showDialog(0);
        }
    });
}

@Override
protected Dialog onCreateDialog(int id) 
{
    switch (id) 
    {
    case 0:
        // This example shows how to add a custom layout to an AlertDialog
        android.app.AlertDialog.Builder login = new android.app.AlertDialog.Builder(this);

        try
        {

            LayoutInflater factory = LayoutInflater.from(this);
            final View textEntryView = factory.inflate(R.layout.login_dialog, null);

            final EditText username_alert = (EditText) textEntryView.findViewById(R.id.username);
            final EditText password_alert = (EditText) textEntryView.findViewById(R.id.password);

            login.setTitle("Login").setIcon(R.drawable.ic_launcher).setView(textEntryView)

            .setPositiveButton("Login", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int whichButton) 
                {
                    /* User clicked OK so do some stuff */
                    String uname_alert=username_alert.getText().toString();
                    String pass_alert=password_alert.getText().toString();

                    if(uname_alert.equals("aaaa") && pass_alert.equals("aaaa"))
                    {
                        //do Something........
                    }
                    else
                    {
                        showDialog(0);
                    }
                }
            })
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() 
            {
                public void onClick(DialogInterface dialog, int whichButton) 
                {
                    /* User clicked cancel so do some stuff */
                }
            });
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        return login.create();
    }
    return null;
}
  } 
```

希望我的问题很清楚......请帮助我..在此先感谢...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:08:46.573

在从对话框调用 showDialog 之前，您应该关闭现有对话框吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:09:31.550

目前，您每次都在创建新对话框。

尝试将您创建一次的对话框保留到类级别变量并重用它。喜欢 ：

第一次
dialog=login.create(); 返回对话框；下次仅返回对话框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:09:36.160

我认为您正在尝试`AlertDialog`在`AlertDialog`其中创建不可能的内容。您可以使用它`Toast`来显示警报消息。

阅读这篇文章的自定义 [`AlertDialog`](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:19:23.590

问题是操作顺序。您的单击处理程序`showDialog()`在对话框关闭之前调用，因此该调用什么也不做。然后在处理程序方法返回后立即`AlertDialog`调用`dismiss()`自身（默认行为）并消失。

此功能的更好实现是在调用处理程序`AlertDialog`之前自定义和拦截按钮单击，`DialogInterface`以便您可以进行验证并且在这种情况下根本不关闭对话框，而不是试图让它重新出现。事实是`AlertDialog`没有很好的能力来处理这种情况，这里最好的解决方案是不要尝试将方钉安装到圆孔中，而可能只是做一个定制的`Dialog`实现来满足你的一切需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T17:57:07.953

我知道这个答案已经晚了。但是对于未来的寻求者。我遇到了同样的问题，没有与 .hide() .show() 和 .dismiss() 组合没有反应。系统可能需要一些时间，然后才能正常工作。

```
if (!SDCartConnected())
{
        Handler handler = new Handler(); 
        handler.postDelayed(new Runnable(){
            public void run() {
                showDialog(Const.DIALOG_SDCARD_MISSING);}}, 2000);  
} 
```

# c# - 同一个 Kendo UI Grid 是否可以有不同的编辑器模板？

> ID：12109783
> 
> 赞同：5
> 
> 时间：2012-08-24T12:53:37.710
> 
> 标签：c#, asp.net-mvc-3, kendo-ui

我有一个 MVC 3 项目，我在其中经常使用 Kendo UI Grid。

典型的视图如下所示：

```
@using Kendo.Mvc.UI
@model List<ActionViewModel>
@(Html.Kendo().Grid<ActionViewModel>()
.Name("#grid")    
.Columns(columns =>
    {
        columns.Bound(p => p.Name);
        columns.Command(command => { command.Edit(); command.Destroy(); });
})
.ToolBar(toolbar => toolbar.Create().Text(Resources.Grid.Create))
.Editable(editable => editable.Mode(GridEditMode.PopUp)))
.Sortable()
.Scrollable()
.Filterable(f=>f.Extra(true))
.DataSource(dataSource => dataSource        
    .Ajax() 
    .Events(events => events.Error("error_handler"))
    .Model(model => model.Id(p => p.Id))
    .Create(update => update.Action("Create", "Action"))
    .Read(read => read.Action("Read", "Action"))
    .Update(update => update.Action("Update", "Action"))
    .Destroy(update => update.Action("Delete", "Action"))
)) 
```

我经常需要为我的视图模型定义自定义编辑器模板，这些模板用于 Kendo UI 的编辑弹出窗口。

在 Kendo UI Grid 中，可以创建、更新和删除元素。默认情况下，编辑和创建的弹出窗口使用相同的编辑器模板。有没有一种简单的方法可以让两个单独的编辑器模板用于编辑和删除？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T19:15:39.477

**更新**：

为了防止对一个 4 岁的答案进行不必要的否决，我在下面的评论中包括了@ataravati 提供的问题。去这里寻找更好、更现代的答案：[Kendo UI 网格 - 用于编辑和创建的不同模板](https://stackoverflow.com/questions/14321396/kendo-ui-grid-different-templates-for-edit-and-create)

**旧答案**：

这不是 C# 答案，但它是相关的。我使用 JavaScript API 并设法找出一种方法来区分“添加”和“编辑”，并让弹出编辑器对每个做出不同的反应。我的理由是，在添加新条目时，所有字段都是可编辑的，但在编辑现有条目时，我需要将某些字段设为只读。

简而言之，我为工具栏按钮添加了一个 jQuery 单击侦听器，并使用一组 if 语句来确定单击的按钮是否具有`k-grid-edit`or`k-grid-add`类（或自定义类，如果我在我的 Grid 小部件中使用自定义工具栏按钮）。然后，我将操作类型（“添加”或“编辑”）存储在父网格的数据属性中：

`$("#grid").data("action","add");`

...然后我在自定义弹出编辑器模板中阅读，以确定某些字段是否应该是只读的：

`if ($("#grid").data("action") === "add") { /*Do stuff*/ }`

我还使用此方法根据情况隐藏或显示工具栏按钮（例如，在内联编辑器模式下，保存和取消按钮应该只在一行处于编辑模式时可见，因此当用户在网格并单击“编辑”按钮，默认隐藏的“保存”和“取消”按钮会显示出来，而其他按钮则被隐藏。一旦“编辑”操作完成并且用户单击“保存”或“取消”，按钮就会切换回初始状态状态）。

有关更明确的信息，这是我关于该主题的 Kendo UI 论坛帖子：

[http://www.kendoui.c​​om/forums/ui/grid/kendo-grid---how-to-have-different-custom-editor-for-update-and-create.aspx](http://www.kendoui.com/forums/ui/grid/kendo-grid---how-to-have-different-custom-editor-for-update-and-create.aspx)

我发布了一些示例代码，另一个名为 Philipp 的用户提出了一个不同的解决方案，该解决方案得到了相同的最终结果，并发布了他的代码。

**所以，回答你的问题：**

不，没有简单的方法。该功能目前不包含在 Kendo UI 框架中。但是，仍然可以使用一点额外的肘部油脂。或者咖啡因。:)

我希望这是有帮助的。

# asp.net - 连接字符串中的用户实例给出错误

> ID：12109786
> 
> 赞同：0
> 
> 时间：2012-08-24T12:53:58.703
> 
> 标签：asp.net

当程序试图打开数据库时，我得到：

错误消息：无法打开登录请求的数据库“Chinatowndb”。登录失败。用户“Lee-VAIO\Lee”登录失败。

代码用于连接字符串：

`conn = new SqlConnection(@"Data Source=.\SQLEXPRESS;Initial Catalog=Chinatowndb;Integrated Security=True;User Instance=True");`

如果我将代码更改为：

`conn = new SqlConnection(@"Data Source=.\SQLEXPRESS;Initial Catalog=Chinatowndb;Integrated Security=True");`

有用。现在我有另一个程序，它使用第一个连接字符串，不同的数据库，它可以工作。请注意，另一个程序具有带有 App_Data 文件夹的 .mdf 文件。Chinatowndb.mdf 存储在 C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA。

为什么会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:01:29.020

如果您这样做，第一个将起作用

```
Go to Query Window in SQL Server Management Studio and type this:

exec sp_configure 'user instances enabled', 1\. 
Go
Reconfigure 
```

另请阅读以下内容

[**在本地 SQL Server Express 实例上使用用户实例**](http://www.connectionstrings.com/sql-server-2008)

用户实例功能在连接期间动态创建一个新的 SQL Server 实例。这仅适用于本地 SQL Server 实例，并且仅适用于通过本地命名管道使用 Windows 身份验证进行连接时。目的是能够为在计算机上具有有限管理权限的用户创建完全权限的 SQL Server 实例。

`Data Source=.\SQLExpress;Integrated Security=true; AttachDbFilename=|DataDirectory|\mydb.mdf;User Instance=true;`

要使用用户实例功能，您需要在 SQL Server 上启用它。这是通过执行以下命令来完成的：sp_configure 'user instances enabled', '1'。要禁用该功能，请执行 sp_configure 'user instances enabled', '0'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:56:31.687

对于 mdf 数据库，您必须更改字符串连接格式，它不一样

```
Server=.\SQLExpress;AttachDbFilename=c:\mydbfile.mdf;Database=dbname; Trusted_Connection=Yes;

Or 

Server=.\SQLExpress;AttachDbFilename=|DataDirectory|mydbfile.mdf; 
```

数据库=dbname;Trusted_Connection=Yes;

关联 ：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-20T12:06:12.847

就我而言，我`database.mdf`从项目中排除了文件，删除了`AttachDatabase:database.mdf`from 连接字符串并设置了`user instance=false`.

对我来说工作得很好。能够从数据库中获取数据。

# android - 在 android 4.1 中调用 web 服务

> ID：12109789
> 
> 赞同：0
> 
> 时间：2012-08-24T12:54:08.400
> 
> 标签：android, android-asynctask

我这里有这段代码，它在 2.3 中一直有效，现在我们必须更新它，我收到很多错误，比如`NetworkOnMainThreadException`. 我想从我的 Web 服务中获取一个 xml，将其关闭并将其解析为一个数组列表。这是代码

```
//Gets the xml from the url specified
String CallWebService(String url){
        String xml = null;
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
}
//Parses the xml to get DOM element 
public Document GetDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            //Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            //Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            //Log.e("Error: ", e.getMessage());
            return null;
        }
            // return DOM
        return doc;
}
//Gets the child nodes of the xml
public String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
}

public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if(child.getNodeType() == Node.TEXT_NODE || child.getNodeType() == Node.CDATA_SECTION_NODE){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
 } 
```

我也有`getChildElements`方法。问题是当我调用这个方法时。我曾经这样做过：

```
String serviceURL = "http://webservice.example.com/";
String xml = CallWebService(serviceURL);
Document doc = GetDomElement(xml); // getting DOM element

NodeList nl = doc.getElementsByTagName("details");
getChildElements(nl); 
```

但现在在 4.1 中，我需要异步执行此操作，但我不知道如何操作。任何帮助将不胜感激。

**编辑**

这是我所拥有的，但线程无法启动

```
final String serviceURL = "urlString";
mHandler = new Handler() {
   @Override
   public void handleMessage(Message msg) {                             
     if(msg.what == JOB_COMPLETE) {
       String xml = (String) msg.obj;
       Document doc = GetDomElement(xml); // getting DOM element

       NodeList nl = doc.getElementsByTagName("details");
       getChildElements(nl); 
    }
    super.handleMessage(msg);
  }
};

Thread t = new Thread() {
    @Override
    public void run() {
       String xml = CallWebService(serviceURL);
       Message msg = Message.obtain(mHandler, JOB_COMPLETE, xml);
       msg.sendToTarget();
  }
};                                              
t.start(); 
```

**编辑**

所以我正在尝试异步方式，它仍然无法正常工作。它根本没有击中 GetDomElement。这是代码。

```
 //I call this in my onCreate()
   new getAppInfo().execute("http://webservice.example.com");

   private class getAppInfo extends AsyncTask<String, Void, String> {
    /** The system calls this to perform work in a worker thread and
      * delivers it the parameters given to AsyncTask.execute() */
    protected String doInBackground(String... urls) {
        return CallWebService(urls[0]);
    }

    /** The system calls this to perform work in the UI thread and delivers
      * the result from doInBackground() */
    protected void onPostExecute(String xml) {
        Document doc = GetDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName("details");
        getChildElements(nl); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:01:16.547

你必须实现一个 AsyncTask：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

顺便说一句，这是 Android 3 需要的（如果我没记错的话）。

我已经在我的应用程序中实现了这个，你可以在这里浏览我的代码：[https ://github.com/enrichman/roma-tre/blob/master/src/com/roma3/infovideo/utility/rss/RssTask.java](https://github.com/enrichman/roma-tre/blob/master/src/com/roma3/infovideo/utility/rss/RssTask.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:02:20.733

希望这有帮助

[http://www.techrepublic.com/blog/app-builder/using-androids-asynctask-to-handle-long-running-io/670?pg=2&tag=content;siu-container](http://www.techrepublic.com/blog/app-builder/using-androids-asynctask-to-handle-long-running-io/670?pg=2&tag=content;siu-container)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:08:44.483

例如，在活动 onCreate 中的主 ui 线程中定义一个处理程序

```
private Handler mHandler;
private static int JOB_COMPLETE = 1;   

mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if(msg.what == JOB_COMPLETE) {
            String xml = (String) msg.obj;
            // do whatever you want with that string
        }
        super.handleMessage(msg);
    }
 }; 
```

然后在后台线程中运行所有长时间的工作

```
final String url = "...........";
Thread t = new Thread() {
    @Override
    public void run() {
        String xml = CallWebService(url);
        Message msg = Message.obtain(mHandler, JOB_COMPLETE, xml);
        msg.sendToTarget();
    }
};
t.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:33:01.383

当应用程序尝试在其主线程上执行网络操作时引发的异常。

这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许针对早期 SDK 版本的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励 [看到 android 开发者页面](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

使用异步任务执行您的网络相关任务或尝试使用安全线程

# javascript - Javascript正则表达式跨浏览器差异

> ID：12109790
> 
> 赞同：1
> 
> 时间：2012-08-24T12:54:09.263
> 
> 标签：javascript, regex, internet-explorer, firefox, cross-browser

这段代码从 Firefox 到 IE8 带来了不同的结果：

```
var text = "[AMOUNT] MILES DEDUCTED IN [CABIN] FOR [ORIGIN]";
var splitArray = text.split(/[\[\]]/);
alert(splitArray.length); 
```

在 Firefox 中，警报给出 7。而在 IE 中，它给出 5。

我试过...

[Internet Explorer 中的 Javascript RegEx 问题](https://stackoverflow.com/questions/2401914/javascript-regex-trouble-in-internet-explorer)

但它不起作用。

请问有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:04:28.957

下一个代码没有经过全面测试，但在快速测试中它可以正常工作：

要获得 IE8 和更少的拆分行为：

```
var text = "[AMOUNT] MILES DEDUCTED IN [CABIN] FOR [ORIGIN]";
var arr = text.match(/[^\[\]]+/g);
// arr is ["AMOUNT", " MILES DEDUCTED IN ", "CABIN", " FOR ", "ORIGIN"] 
```

要获得 FF 拆分行为：

```
var text = "[AMOUNT] MILES DEDUCTED IN [CABIN] FOR [ORIGIN]";
var arr = text.match(/[^\[\]]+|^(?=[\[\]])|[^\[\]]?(?=[\[\]]$)|[^\[\]]?(?=[\[\]]{2})/g);
// arr is ["", "AMOUNT", " MILES DEDUCTED IN ", "CABIN", " FOR ", "ORIGIN", ""] 
```

# wicket - 在表单中重用检票口组件

> ID：12109792
> 
> 赞同：2
> 
> 时间：2012-08-24T12:54:17.223
> 
> 标签：wicket

我已经构建了一个检票口组件，其中包含输入/标签和更改表示的方法（必需、启用等）。组件渲染得很好，但是当表单提交时，我只看到 1 个表单参数“input”，它是最后一个 InputRow 组件。

输入行.html

```
<html xmlns:wicket="http://wicket.apache.org">
<head>
    <link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body>
    <wicket:panel>
        <label wicket:id="label">abc: <span class="req">*</span></label>
        <span class="input">
            <input wicket:id="input" type="text" id="name"></input>
        </span>
        <span wicket:id="input_feedback"></span>            
    </wicket:panel>

</body>
</html> 
```

输入行.java

```
package com.wicket;

import org.apache.wicket.behavior.AttributeAppender;
import org.apache.wicket.feedback.FeedbackMessage;
import org.apache.wicket.markup.html.basic.Label;
import org.apache.wicket.markup.html.form.TextField;
import org.apache.wicket.markup.html.panel.Panel;
import org.apache.wicket.model.Model;

public class InputRow extends Panel{

    @SuppressWarnings("unused")
    private String id;

    public InputRow(String id, String label) {
        super(id);

        this.id = id;

         Label memberIdLabel = new Label("label",label);
         memberIdLabel.setEscapeModelStrings(false)
            .add(new AttributeAppender("for", new Model<String>(id),""));
         add(memberIdLabel);

        TextField<String> name = new TextField<String>("input");
        name.setType(String.class)
            .setMarkupId(id)
            .setOutputMarkupId(true);
        add(name);

        add(new Label("input_feedback",""));

    }

    public InputRow disable()
    {
        get("input")
            .setEnabled(false)
            .add(new AttributeAppender("class", new Model<String>("disabled"),""));
        get("label")
            .add(new AttributeAppender("class", new Model<String>("disabled"),""));
        return this;
    }

    public InputRow required()
    {
        Model model = (Model)get("label").getInnermostModel();
        StringBuffer label = new StringBuffer((String)model.getObject());
        label.append(" <span class=\"req\">*</span>");
        model.setObject(label);

        ((TextField)get("input")).setRequired(true);
        return this;
    }

    @Override
    protected void onBeforeRender() {
        super.onBeforeRender();
        Label feedback = (Label)get("input_feedback");

        if (get("input").getFeedbackMessage() != null)
        {
            feedback.setDefaultModel(new Model<String>("Required"));
        }
    }

} 
```

添加到表单组件

```
add(new InputRow("name","Name:").required()); 
```

*编辑* 我没有设置 ListView 或中继器，因为我知道在构建时要添加到表单中的行/字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:50:22.583

提交的表单参数不止一个。提交的名称为`name:input`, `name2:input`, ...

但正如 Nicktar 在评论中建议的那样，您应该使用模型将表单组件的值绑定到您的实体对象。您必须在构造函数中接受 a`IModel`并在 的构造函数中使用它`TextField`。

您尝试做的更好的方法是编写一个`Behavior`为您的 FormComponent 添加装饰标记的方法。这样，它不仅适用于简单的文本输入字段，而且您可以完全自定义`FormComponents`.

它可能看起来像这样：

```
public class FormComponentBehavior extends Behavior {

    @Override
    public void bind(Component component) {
        if (!(component instanceof FormComponent)) {
            throw new IllegalArgumentException();
        }
    }

    @Override
    public void beforeRender(Component component) {
        FormComponent<?> fc = (FormComponent<?>) component;
        Response r = component.getResponse();
        r.write("<label" + (fc.isRequired() ? " class='required'" : "") + ">");
        r.write(fc.getLabel().getObject());
        r.write("</label>");
        r.write("<span class='input'>");
    }

    @Override
    public void afterRender(Component component) {
        component.getResponse().write("</span>");
        // if feedback errors write them to markup...
    }
} 
```

然后您必须将此行为添加到您的 FormComponent 实例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:35:16.433

您的 InputFields 缺少他们的模型。这样，wicket 不知道在哪里存储表单数据。如果您将模型添加到字段中，它们将自动填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:59:13.237

也许您的表单的问题是您的输入文本字段具有所有相同的 id。尝试使用属性 'name' 而不是 'id'

# c# - 是否有支持嵌入 HTML 页面的跨操作系统 GUI 框架？

> ID：12109795
> 
> 赞同：9
> 
> 时间：2012-08-24T12:54:20.440
> 
> 标签：c#, javascript, python, tidesdk

我想开发一个跨系统（win、mac、linux）使用的桌面应用程序，是否有一个 GUI 框架可以让我为所有 3 个平台编写一次代码并拥有一个完全可编写脚本的嵌入式 Web 组件？

我需要它有一个 API 在应用程序和网页 javascript 之间进行通信。

我知道 C#、JavaScript 和一点点 python。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-27T01:20:23.227

还有正式名称为 Titanium的[TideSDK 。](http://tidesdk.org)这提供了一个 WebKit HTML/JavaScript 小部件，它几乎可以满足您的所有需求，包括运行 Chrome 开发人员工具。

* * *

**在下面编辑**。将我的更新与 TideSDK 开发人员的反馈合并：

[TideSDK](http://tidesdk.org)，前身为 Titanium Desktop，是一个开源软件开发工具包，用于使用 HTML5、CSS3、JavaScript 和其他常用脚本语言创建多平台桌面应用程序。该项目托管在[Github](https://github.com/TideSDK)上。主网站拥有全面的文档并拥有一个活跃的开发者社区。成千上万的开发人员使用以前的 Titanium Desktop 开发桌面应用程序。也许最受认可的应用程序是[Wunderlist](http://www.6wunderkinder.com/wunderlist)

TideSDK 允许您使用您的 Web 开发技能来创建桌面应用程序并提供广泛的特权 API。您可以使用 python、php 或 ruby​​ 中的成熟库轻松扩展应用程序的功能。

TideSDK 的核心是编译到 WebKit 组件中的对象桥。该桥允许其他脚本语言——python、php 或 ruby​​——使用 DOM 中的脚本标签在 HTML 页面上运行，就像 JavaScript 一样。您还可以在应用程序中直接调用 .py、.rb 或 .php 文件。

TideSDK 可以与基本的文本编辑器一起使用——它不需要任何特殊工具或 IDE，尽管许多开发人员更喜欢更丰富的工具。TideSDK 包括用于在本地运行您的应用程序（用于开发和调试）的命令行工具，并将其打包到您正在开发的操作系统的安装程序中（支持 Windows、Mac OSX 和 Linux）。为了获得所有需要的安装程序，典型的 TideSDK 开发环境将包括每个操作系统的物理机或虚拟机。TideSDK 团队正在寻求尽快实施一种不同的更好的方法。

TideSDK 团队目前正在开发 TideSDK Builder 应用程序。它将提供一个用于创建、运行和打包 TideSDK 应用程序的 GUI。为了让开发人员更快地开始，TideSDK Builder 引入了一项新功能 - 脚手架。Scaffolds 生成所有样板以实例化具有特定开发模式的项目，例如 Backbone MVC。开发者可以使用 TideSDK Builder 来创建、导入和共享脚手架。

TideSDK 的路线图包括 CommonJS for 1.4 的实现，旨在为开发人员使用 JavaScript 提供更加模块化的开发体验。

# 你好世界

TideSDK 项目由一些样板代码和包含核心项目文件的 Resources 文件夹组成。下面说明了一个简单的 hello world 应用程序的结构，它将在所有支持的平台上运行：

```
├── CHANGELOG.txt
├── LICENSE.txt
├── README.md
├── Resources
│   ├── app.js
│   ├── default_app_logo.png
│   └── index.html
├── manifest
└── tiapp.xml 
```

清单包含有关项目使用的运行时模块的信息。tiapp.xml 提供配置，default_app_logo.png 是默认出现在 Dock、系统托盘或应用程序窗口中的图像。

以下是 hello world 示例的 app.js 文件的内容（它将出现在 TideSDK 1.3.0 中）。以前的版本将使用已停用的 Titanium 命名空间。

```
// create and set menu
var menu = Ti.UI.createMenu(),
fileItem = Ti.UI.createMenuItem('File'),
exitItem = fileItem.addItem('Exit', function() {
  if (confirm('Are you sure you want to quit?')) {
    Ti.App.exit();
  }
});

menu.appendItem(fileItem);
Ti.UI.setMenu(menu); 
```

这是同一应用程序的 HTML。它调用上面的脚本。

```
<!DOCTYPE html>
<html>
<head>
  <title>Hello World</title>
  <style type="text/css">
    body {background: #fff;}
  </style>
</head>
<body>
  <h1>Hello World</h1>
  <script type="text/javascript" src="app.js"></script> 
</body>
</html> 
```

在不到 10 行 JavaScript 代码中，我们创建了一个菜单，添加了“文件”和“退出”菜单项，并将其设置到主窗口。一个简单的回调方法用于弹出退出确认对话框。如果用户确认，应用程序将退出。

# 背景

Titanium 由[Appcelerator](http://www.appcelerator.com)开发，并在 Apache 2 许可证下提供。最初 Appcelerator 提供了开源 Titanium Developer 来创建项目。后来 Appcelerator 引入了闭源 Titanium Studio，这是一个基于 Aptana 的 IDE。虽然目前仍然可以在 Titanium Studio 中开发 TideSDK，但将来可能需要一个插件。[安德鲁：对不起，我不清楚。Titanium Studio 的插件？还是阿普塔纳？还是 TideSDK？]

Appcelerator 提供了一个 TiStudio SDK 来使用，它可以帮助我们为 TiStudio 创建一个插件，以允许通过 TiStudio 使用 TideSDK

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T05:38:28.583

如前所述，TideSDK ( [http://www.tidesdk.org/](http://www.tidesdk.org/) ) 是一个选项（目前对我来说更好）你也可以采用相同的想法 XUL Runner ( [https://developer.mozilla.org/en -US/docs/XULRunner](https://developer.mozilla.org/en-US/docs/XULRunner)），Adobe AIR（[http://www.adobe.com/devnet/air/air-sdk-download.html](http://www.adobe.com/devnet/air/air-sdk-download.html)）（这里： http: [//www.adobe.com/devnet/air。 html是除了 flash 和 dreamweaver、AppJS (](http://www.adobe.com/devnet/air.html) [http://appjs.org/](http://appjs.org/) ) 或 Node Qt ( [https://github.com/arturadib/node-qt](https://github.com/arturadib/node-qt) )之外的“如何”的教程，还有更多工作有 cef ( [http://code.google.com/p/chromiumembedded/](http://code.google.com/p/chromiumembedded/) )、berkelium ( [http://berkelium.org/](http://berkelium.org/) )、awesomium ( [http://awesomium.com](http://awesomium.com) ) 或[如何在 GUI 应用程序中嵌入 firefox？](https://stackoverflow.com/questions/2611906/how-can-i-embed-firefox-in-a-gui-application)它说明了如何在应用程序中嵌入壁虎（firefox 的引擎）。

好的，现在我对所有的看法：第一个选项将为您提供更好的方法，因为它们基本上是一个跨平台工作的“浏览器”，您将部署一个 html + js + css 应用程序（使用 air，您可以部署 flash /action 脚本应用程序）；您必须构建应用程序然后将“浏览器”放入其中的其他选项，它提供了更大的灵活性，但可能适得其反。

我的经验是：tidesdk - 良好且稳定，但仍在增长，因此可能会遗漏一些高级功能，但您可以编译它并且开发团队非常活跃

xulrunner - 稳定，不可能做复杂的事情，你需要良好的 C 知识来制作你自己的组件，因为它只为你提供基本的东西。它在你可以做的事情上非常灵活，但是内容结构很僵化，除非以这种方式组织，否则你的应用程序将无法运行，并且在我看来语法丑陋（哈哈），它是 java 和 javascript 风格的混合编程的

adobe air - 易于使用和部署，但它是闪光的，它给我未优化的东西那种奇怪的瘙痒感

appjs - 是 nodejs，示例有效，我无法让我的自定义应用程序运行，我认为它还没有完善，对我来说，它以一种古怪的方式工作

nodeqt - 是 qt + nodejs，你需要编译你自己的 qt 版本，我没有测试但是看起来很容易部署

其他嵌入方式 - 尚未测试，看起来不错，但我不知道，可能太无用

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T12:57:17.157

[Qt](http://qt.nokia.com/products/)有这样的东西[QWebView](http://qt-project.org/doc/qt-4.8/qwebview.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T06:35:29.777

[使用Chromium Embedded Framework](http://code.google.com/p/chromiumembedded/)怎么样？

它是开源的（BSD 许可），并带有 C、C++、.NET（[1](https://github.com/chillitom/CefSharp)或[2](https://bitbucket.org/fddima/cefglue/wiki/Home)）、[Java](http://code.google.com/p/javachromiumembedded/)、Delphi 和[Python](http://code.google.com/p/cefpython/)的绑定。

[这个 .NET 绑定](https://bitbucket.org/xilium/xilium.cefglue/wiki/Home)也与 Mono 完全兼容，这将有助于拥有一个跨平台的应用程序。

注意：另一个答案中提到的[AppJS](http://appjs.org/)建立在 CEF 之上（使用[node.js](http://nodejs.org/)）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T20:02:19.483

我要把这个扔掉：

[应用程序： http](http://appjs.org/) ://appjs.org/

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T13:07:06.807

[wxWidgets](http://www.wxwidgets.org/)也是。

PS：[Qt](https://stackoverflow.com/a/12109843/1431750 "乔伊的回答")对跨平台 GUI 的用途更感兴趣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T08:37:09.913

1.  奇怪的是 Qt 不适合你。听到 Sencha 的 Architect 和 Animator 产品将 Qt 和 QWebView 用于具有完整菜单和图标和可执行文件以及系统对话框和文件 I/O 的跨平台 JavaScript 应用程序，您可能会感到惊讶。

    它目前适用于 Windows、OSX 和 Linux。

    他们使用内部开发的名为 ion 的库来加载和交互 JavaScript 应用程序。它们提供了一些供 JS 使用的辅助类。

    一个简单的骨架 c++ 应用程序，它使用 Qt 创建和加载一个窗口，并在该窗口中创建一个 Web 视图，并将文件中的 html 和其他内容加载到该视图中。

2.  另一个解决方案是 Adob​​e 的 Air，它类似于具有原生支持的浏览器。它还提供部署。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-29T12:03:27.400

因为我的第一个答案是针对 wxWidgets 而你觉得 Qt 不适合你......你**没有**
提到javascript - 请注意[**PyQt**](http://wiki.python.org/moin/PyQt) “*为 Qt 2 和 Qt 3 提供 [python] 绑定*”。[**PySide**](http://www.pyside.org/)是诺基亚为 Qt 提供的官方 Python 绑定。“PyQt vs PySide”搜索提供了有趣的结果：**[](http://wiki.python.org/moin/PyQt)***[](http://www.pyside.org/)*****

 ********   在 SO：[https ://stackoverflow.com/questions/1297660/pyside-vs-pyqt](https://stackoverflow.com/questions/1297660/pyside-vs-pyqt)
*   一些[技术差异](http://qt-project.org/wiki/Differences_Between_PySide_and_PyQt)
*   [PyQt 与 PySide 比较](https://stackoverflow.com/questions/2058492/pyqt-vs-pyside-comparison)
*   [PyQt 或 PySide - 使用哪一个](https://stackoverflow.com/questions/6888750/pyqt-or-pyside-which-one-to-use)

还有[PythonQt](http://pythonqt.sourceforge.net/Features.html)，但我根本没有研究过。

供参考，

*   [Qt 网络示例](http://doc.qt.nokia.com/4.7/examples-network.html)
*   [Qt WebKit 示例](http://doc.qt.nokia.com/4.7/examples-webkit.html)：

    > Qt 提供了一个基于流行的开源浏览器引擎 WebKit 的集成 Web 浏览器组件。
    > 
    > 这些示例和演示展示了 WebKit 的一系列不同用途，从在 Qt 用户界面中显示网页到实现基本功能的 Web 浏览器。

*   Qt 也支持 C#
*   和[许多其他语言](http://en.wikipedia.org/wiki/Qt_%28framework%29#Bindings)。
*   [KDE](http://www.kde.org/community/history/qtissue.php)（Linux桌面环境）使用和开发Qt

Qt 有什么特别之处使它“不适合”你吗？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-29T13:55:38.527

[Mono](http://www.mono-project.com/Gui_Toolkits)和 WinForms有什么问题*******

# git - Git：提交到我的主分支我打开了拉取请求，现在无法实现新功能

> ID：12109797
> 
> 赞同：1
> 
> 时间：2012-08-24T12:54:25.230
> 
> 标签：git, github

我在 GitHub 上创建了我想要贡献的流行项目。

现在我对我的主分支进行了一些更改并将它们推送到我的主分支并提出了拉取请求。

然而，我的拉取请求现在正在审查中，所以我想开发新功能，直到它被合并。

我创建了新分支，添加了这些新功能，然后我再次提出了拉取请求，但是现在我在主分支中实现的功能也在我的新分支中，所以我的第二个拉取请求具有比我想要推送到原始分支更多的功能项目。

问题是我现在如何将分支重置为项目的原始情况，以便每个新提交都只是原始项目的构建（没有我在 master 上的补丁）。

基本上我搞砸了，而不是从我提交的 newFeature 分支开始，并在我的 master 上请求请求，所以现在每个分支（当然基于 master）都具有原始项目中没有的特性 + 分支的新特性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:59:11.903

假设`upstream`是 github 上原始存储库的名称（不是你的 fork）

```
# Just to ensure to get the most actual commits too
git fetch --all
git checkout -b feature/newFeature upstream/master 
```

# arrays - Htaccess：多个参数和嵌套括号

> ID：12109800
> 
> 赞同：3
> 
> 时间：2012-08-24T12:54:38.537
> 
> 标签：arrays, .htaccess, mod-rewrite

我有一些项目，我`index.php`用各种`GET`参数重定向每个请求。

目前，我正在使用这种 htaccess （这只是一个摘录，我将参数名称更改为`a, b, c...`，以简化问题）：

```
RewriteRule ^([\w-]+)\.html$                   index.php?a=$1 [L]
RewriteRule ^([\w-]+)/([\w-]+)\.html$          index.php?a=$1&b=$2 [L]
RewriteRule ^([\w-]+)/([\w-]+)/([\w-]+)\.html$ index.php?a=$1&b=$2&c=$3 [L]
(...) 
```

它工作（很好），但我正在考虑一种将这些行缩小为单个行的方法。 **这个想法是有一些嵌套括号来“生成”所有`GET`参数**，但它似乎不像我想象的那么容易。

这是我到目前为止所做的：

```
RewriteRule 
    ^(?:([\w-]+)\/)*([\w-]+)\.html$ 
    index.php?a=$1&b=$2&c=$3&d=$4&e=$5&f=$6&g=$7&h=$8&i=$9 [L] 
```

`GET`网址的结果`http://website.com/1/2/3/4/5/6/7/8/9.html`：

```
array(9) { 
   ["a"]=> string(1) "8" 
   ["b"]=> string(1) "9" 
   ["c"]=> string(0) "" 
   ["d"]=> string(0) "" 
   ["e"]=> string(0) "" 
   ["f"]=> string(0) "" 
   ["g"]=> string(0) "" 
   ["h"]=> string(0) "" 
   ["i"]=> string(0) "" 
} 
```

而不是 get `a=1`, `b=2`, `c=3`... 我只收到最后两个参数。请注意，`RewriteRule`执行，然后我知道我的正则表达式匹配。

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:20:46.843

作为记录：请考虑使用基于 PHP 的方法：将整个请求的 URI 传递给 PHP，然后您可以在 PHP 中处理整个事情，这比做这件事要容易得多，很可能更安全，甚至可能更快mod_rewrite 的魔力。

我的意思是这样的：

```
 RewriteRule ^(.*)\.html$ switchboard.php?uri=$1 [L] 
```

然后在switchboard.php中：

```
list($_GET['a'], $_GET['b'], $_GET['c']) = explode( '/', $_GET['uri']);
require 'index.php'; 
```

（如果超长的 list() 看起来很麻烦，你可以使用一些巧妙的单线映射技术）

无论如何，正则表达式问题当然很有趣，但它是一个通用的 PCRE 问题。这种现象称为“重复捕获组”：每当您像您一样使用 Kleene 星重复捕获组时，实际上只会捕获最后一次迭代（在我们的例子中，匹配 1,2..7 被丢弃，并且只保留了 8 个） - 将其想象为一个缓冲区，您不断地用更新的匹配项覆盖它。如果您考虑一下，这很有意义。

一个解决方案是使用你实际想要捕获的尽可能多的组，通过使早期的组成为可选 - 编写和阅读非常尴尬（实际上，Arjan 刚刚发布了它，只是看着它就让人头疼），而且在这种情况下非常低效。一个更简单的解决方案是捕获整个事物并将其拆分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:21:08.963

```
RewriteRule 
    ^([\w-]+)(?:\/([\w-]+)(?:\/([\w-]+)(?:\/([\w-]+)(?:\/([\w-]+)(?:\/([\w-]+)(?:\/([\w-]+)(?:\/([\w-]+)(?:\/([\w-]+))?)?)?)?)?)?)?)?\.html$ 
    index.php?a=$1&b=$2&c=$3&d=$4&e=$5&f=$6&g=$7&h=$8&i=$9 [L] 
```

Untested, but I think this does what you want. Note that it works for 1 to 9 parameters, it requires at least one. Also note that any GET parameter that was present in the original url could be removed this way.

# android - 每个项目的图像不同的列表视图

> ID：12109803
> 
> 赞同：0
> 
> 时间：2012-08-24T12:54:43.043
> 
> 标签：android, listview, simplecursoradapter, listadapter

我的问题`ListView`：

ListView 项目 xml 有一个 textarea 和一个 Imageview，对于从 DB 中获取的每个项目，我需要放置一个专用图像（基于 _id）。

现在我有这个有效的代码（但没有图像）：

```
mio_db.openDataBase(); 
final Cursor data=mio_db.catalogo_prodotti();
final ListView listView1 = (ListView) findViewById(R.id.list_mia_2); 
String[] from = new String[] {"prodotto","_id"};
int[] to = new int[] {R.id.nome_prodotto_lista,R.id.freccia_prodotto_lista};
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,R.layout.mia_lista_2, data, from, to); 
listView1.setAdapter(adapter); 
```

例如，如果我`_id`是 4，我需要`freccia_4`在`R.id.freccia_prodotto_lista`

我不知道该怎么做。我已经阅读了自定义适配器，但我不了解如何实现它。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:02:54.677

我已经以另一种方式解决了，也许不是正确的，但它现在有效：

```
 setContentView(R.layout.prodotti);
    final Database_mio database_classe=new Database_mio(this); 
    database_classe.openDataBase(); 
    final Cursor data_mio=database_classe.catalogo_prodotti();
    ArrayList<Prodotto_per_lista> personList=new ArrayList<Prodotto_per_lista>();
    int prodotto=data_mio.getColumnIndex("prodotto");
    int id_immagine=data_mio.getColumnIndex("_id");
    while(data_mio.moveToNext()){
        switch(Integer.parseInt(data_mio.getString(id_immagine))){
            case 1:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_1,data_mio.getString(prodotto)));
                break;
            case 18:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_18,data_mio.getString(prodotto)));
                break;
            case 23:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_23,data_mio.getString(prodotto)));
                break;
            case 28:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_28,data_mio.getString(prodotto)));
                break;
            case 30:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_30,data_mio.getString(prodotto)));
                break;
            case 35:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_35,data_mio.getString(prodotto)));
                break;
            case 41:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_41,data_mio.getString(prodotto)));
                break;
            case 48:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_48,data_mio.getString(prodotto)));
                break;
            case 53:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_53,data_mio.getString(prodotto)));
                break;
            case 57:
                personList.add(new Prodotto_per_lista(R.drawable.freccia_57,data_mio.getString(prodotto)));
                break;
        }
    }
    ArrayList<HashMap<String, Object>> data=new ArrayList<HashMap<String,Object>>();
    for(int i=0;i<personList.size();i++){
            Prodotto_per_lista p=personList.get(i);
            HashMap<String,Object> personMap=new HashMap<String, Object>();
            personMap.put("name", p.getName());
            personMap.put("image", p.getPhotoRes());
            data.add(personMap);
    }
    String[] from={"name","image"};
    int[] to={R.id.nome_prodotto_lista,R.id.freccia_prodotto_lista};
    SimpleAdapter adapter=new SimpleAdapter(
                    getApplicationContext(),
                    data,
                    R.layout.mia_lista_2,
                    from,
                    to);
    ((ListView)findViewById(R.id.list_mia_2)).setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:16:37.930

使用光标为您的列表视图创建 CustomAdapter

**步骤1**

[按照本教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

**第2步**

而不是扩展数组适配器扩展光标适配器，它应该工作

```
class ListViewAdapter extends CursorAdapter {
LayoutInflater mInflater;
SimpleDateFormat sdf;

RequestLogAdapter(Context context, Cursor cursor) {
    super(context, cursor);
    mInflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

     //Get your details here
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
                //Create layout for image with text here
    return mInflater.inflate(R.layout.mulitcolumnlistview, parent, false);
}

@Override
public void bindView(View row, Context context, Cursor cursor) {
                //You can customise here

   }
 } 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T15:37:03.827

现在唯一的问题是项目的 id 现在取自数组（data.add）而不是数据库中的 _id。

# ios - JSON 提要有时会返回布尔值而不是对象。在 iOS 中如何处理？

> ID：12109806
> 
> 赞同：0
> 
> 时间：2012-08-24T12:54:49.097
> 
> 标签：ios, xcode, json, boolean

所以基本上我有一个 JSON 提要，如果没有事件，它会返回一个布尔值，但如果有一个事件，它会返回一个对象。

无事件示例：

```
{"event":false,"status":"success"} 
```

事件示例：

```
{"event":
{..."somevar":"somevalue"...},
"status":"success"} 
```

如果是这种情况，我可以很高兴地将它存储到 NSDictionary 并获取密钥对值。

如果没有事件，它会崩溃，说它是一个布尔值，如果它是一个布尔值，它就无法查找 objectForKey。

如何检查它是否为布尔值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:04:02.473

这里缺少一些东西——如果你使用 NSJSONSerialization 你会得到一个对象树——如果是“假”，“事件”的对象将是一个 NSNumber，如果是一个真实的事件，则是一个字典。因此，您需要做的是测试 objectForKey:@"event" 的类，并且只有在它通过 'isKindOf:[NSDictionary class]' 时才尝试向下钻取。

# c# - 在查找编辑中显示多列值

> ID：12109808
> 
> 赞同：1
> 
> 时间：2012-08-24T12:55:16.883
> 
> 标签：c#, winforms, devexpress

我是一个包含以下字段的查找编辑框。

## S.no 名称

1 酒

2 库马尔

如果我选择第一行（1 vinoth），则形成查找下拉框，然后我的查找编辑将值显示为“1 - vinoth”

任何 1 都可以告诉我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:50:59.220

```
public class UserInfo
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
}

public List<UserInfo> mylist = new List<UserInfo>();

public Form1()
{
    InitializeComponent();
    for (int i = 0; i < 10; i++)
    {
        mylist.Add(new UserInfo() { Id = i, Name = "Name" + i, Description = "Description " + i });
    }
    lookUpEdit1.Properties.DataSource = mylist;
    lookUpEdit1.Properties.DisplayMember = "Name";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:45:55.677

更好的是，您可以根据需要使用三列 1.S.No 2.Name 3.S.No 和 Name 的组合

然后将第三列设置为显示成员

# c# - 如何检查cookies是否为空

> ID：12109809
> 
> 赞同：10
> 
> 时间：2012-08-24T12:55:18.720
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我需要检查 cookie 是否存在价值。但我想知道是否有一些快速而好的方法可以这样做，因为如果我需要检查 3 个 cookie，用`if`or来检查似乎很糟糕`try`。

如果 cookie 不存在，为什么它不会为我的变量分配空字符串？相反，它显示`Object reference not set to an instance of an object.`

我的代码（它有效，但对于这项任务来说似乎太大了，我认为应该有更好的方法来做到这一点）

```
// First I need to asign empty variables and I don't like this
string randomHash = string.Empty;
string browserHash = string.Empty;
int userID = 0;

// Second I need to add this huge block of try/catch just to get cookies
// It's fine since I need all three values in this example so if one fails all fails
try
{
    randomHash = Convert.ToString(Request.Cookies["randomHash"].Value);
    browserHash = Convert.ToString(Request.Cookies["browserHash"].Value);
    userID = Convert.ToInt32(Request.Cookies["userID"].Value);
}
catch
{
    // And of course there is nothing to catch here
} 
```

正如你所看到的，我有这么大块只是为了得到饼干。我想要的是这样的：

```
// Gives value on success, null on cookie that is not found
string randomHash = Convert.ToString(Request.Cookies["randomHash"].Value);
string browserHash = Convert.ToString(Request.Cookies["browserHash"].Value);
int userID = Convert.ToInt32(Request.Cookies["userID"].Value); 
```

编辑也许我可以以某种方式覆盖`.Value`我喜欢的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T12:57:50.610

只需检查 cookie 是否为空：

```
if(Request.Cookies["randomHash"] != null)
{
   //do something
} 
```

注意：“更好”的做法是编写既可读又可靠的好代码。它不会分配空字符串，因为这不是 C# 的工作方式，您正在尝试调用对象 ( )`Value`上的属性- 您不能使用空对象，因为没有什么可使用的。`null``HttpCookie`

转换为`int`你仍然需要避免解析错误，但你可以使用这个内置方法：

```
int.TryParse(cookieString, out userID); 
```

这带来了另一点？为什么要将用户 ID 存储在 cookie 中？这可以由最终用户更改 - 我不知道您打算如何使用它，但我认为这是一个很大的安全漏洞是否正确？

* * *

或带有一点辅助功能：

```
public string GetCookieValueOrDefault(string cookieName)
{
   HttpCookie cookie = Request.Cookies[cookieName];
   if(cookie == null)
   {
      return "";
   }  
   return cookie.Value;
} 
```

然后...

```
string randomHash = GetCookieValueOrDefault("randomHash"); 
```

* * *

或者使用扩展方法：

```
public static string GetValueOrDefault(this HttpCookie cookie)
{
   if(cookie == null)
   {
      return "";
   }  
   return cookie.Value;  
} 
```

然后...

```
string randomHash = Request.Cookies["randomHash"].GetValueOrDefault(); 
```

# javascript - javascript：将对象作为参数传递给字符串内的 onclick 函数

> ID：12109811
> 
> 赞同：25
> 
> 时间：2012-08-24T12:55:27.773
> 
> 标签：javascript, argument-passing

我想将一个对象作为参数传递给字符串内的 Onclick 函数。类似于以下内容：

```
function myfunction(obj,parentobj){ 
   var o=document.createElement("div");
   o.innerHTML='<input type="button" onclick="somelistener(' + obj + ')" />';
   parentobj.appendChild(o.firstChild);
} 
```

显然，这是行不通的。有人有什么想法吗？谢谢！

@Austin 建议的更完整的版本

```
<!DOCTYPE html>
<html>
<body>
<style type="text/css">

</style>
<p id="test">test</p>
<p id="objectid"></p>

<script>
function test(s){
    document.getElementById("test").innerHTML+=s;
}

function somelistener(obj){
    test(obj.id);
}

function myfunction(obj,parentobj){ 
    var o=document.createElement("div");
    o.innerHTML='<input type="button" onclick="somelistener(' + obj + ')" />';

    o.onclick = function () {
        someListener(obj)
    }
parentobj.appendChild(o.firstChild);
}

myfunction(document.getElementById("objectid"),document.getElementById("test"));

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-24T12:56:56.657

上面的示例不起作用，因为`obj`to text 的输出是`[Object object]`，所以本质上，您正在调用`someListener([Object object])`。

当您在 中拥有元素的实例时`o`，使用 javascript 绑定到它的单击：

```
function myfunction(obj,parentobj){ 
    var o=document.createElement("div");
    o.innerHTML='<input type="button" />';

    o.onClick = function () {
        someListener(obj)
    }

    parentobj.appendChild(o.firstChild);
} 
```

我在这里为您创建了一个工作小提琴：[JSFiddle](http://jsfiddle.net/RDVHr/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-12-20T08:32:21.207

```
function myfunction(obj,parentobj){ 
        var o=document.createElement("div");
         o.innerHTML="<input type='button' onclick='somelistener("+JSON.stringify(obj)+")'/>"; 
                                  parentobj.appendChild(o.firstChild);
            } 
    // my similar problem, function a was called in a jsonArray loop in the dataTable initiation
    function a(data, type, obj) {
                         var str = "";
                         str += "<span class='button-group'>";
                         str +="<a onclick='chooseData1("+JSON.stringify(obj)+")'>[选择]</a>";
                         str += "</span>";
                         return str;
                                            }
function chooseData1(data){
                        console.log(data);
                  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-14T18:03:23.600

只需使用 JSON.strigify(obj) 对对象进行字符串化，并将其作为参数传递给 onclick 函数，它将被直接解析并作为对象在函数中接收。

```
function myfunction(obj,parentobj){ 
   var o=document.createElement("div");
   var stringifiedObj = JSON.stringfy(obj)

   o.innerHTML='<input type="button" onclick=`somelistener(${stringifiedObj})` />';
   parentobj.appendChild(o);
}

function somelistener(obj){
   console.log(typeof obj) //Object
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-22T11:57:50.320

老问题的答案我不太明白，但最简单的解决方案是结合函数`encodeURIComponent`和`JSON.stringify`，即您将对象字符串化，然后转义那些特殊字符，然后在函数内部反转过程

```
var htmlStr = `<button onclick="myFunctions('${encodeURIComponent(JSON.stringify(obj))}')"></button>`

function myFunctions(obj) {
  obj = JSON.parse(decodeURIComponent(obj))
  // do something with obj
} 
```

## 在这里测试：

```
var obj = {a: 'hey there', b: 1}

var htmlStr = `<button onclick="myFunctions('${encodeURIComponent(JSON.stringify(obj))}')">Click me</button>`

$('#mydiv').append(htmlStr)

function myFunctions(obj) {
  obj = JSON.parse(decodeURIComponent(obj))
  console.log(obj.a)
  console.log(obj.b)
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="mydiv"></div>
```

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2013-11-18T06:08:22.087

像这样通过它：

```
o.innerHTML='<input type="button" onclick="somelistener(this)" />'; 
```

# jquery - 使用 jQuery 折叠单个字段集

> ID：12109815
> 
> 赞同：1
> 
> 时间：2012-08-24T12:55:35.273
> 
> 标签：jquery, html, fieldset

我制作了一个可折叠的字段集，但我在同一页面上有多个字段集，当我单击一个字段集时，它会折叠所有字段集，但我只希望它只折叠我单击的那个，我已经将必要的代码放入Jsbin： [点击这里](http://jsbin.com/ijefax/3/edit)

谢谢

```
$(document).ready(function () {
  $(".leg").click(function () {
    $("div.proj").toggle();
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:57:00.170

那是因为您正在选择所有具有 class of 的元素`.proj`，您可以使用`this`它来引用您当前单击的元素。

```
$(document).ready(function() {
    $(".leg").click(function() {
        $(this).next().toggle();
    });
}); 
```

*   [`next()`](http://api.jquery.com/next/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:59:17.583

您设置的 jQuery 将当前单击应用于所有字段集，因为您正在请求`$("div.proj")`每个字段集。

你应该使用

```
$( this ).parent().find( '.proj' ).toggle(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:05:35.623

你可以试试这个

```
$(document).ready(function () {
     $(".leg").click(function () {              
         $(this).parent().children("div").toggle();
     });
}); 
```

# eclipse - Eclipse 中的 TDGOTCHI - 有人可以解释如何使其工作吗？

> ID：12109817
> 
> 赞同：0
> 
> 时间：2012-08-24T12:55:41.140
> 
> 标签：eclipse, eclipse-plugin

谁能解释我如何从[http://happyprog.com](http://happyprog.com)制作 TDGOTCHI 插件以与 jUnit 测试一起使用？我已经安装了插件，但不知道如何运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:06:23.353

使用*窗口*->*显示视图*-> TDGotchi。

然后开始编写测试，执行它们或在测试代码中进行正常的 Java 重构以从中获得反应。

# sql - sql server 2008 更新选择线程安全？

> ID：12109818
> 
> 赞同：2
> 
> 时间：2012-08-24T12:55:42.170
> 
> 标签：sql

```
UPDATE dbo.A  
  SET StatusCode = 'booked' 
   , UpdateDate = GETDATE()
 OUTPUT INSERTED.id INTO @TableVar
 WHERE id = ( 
     SELECT TOP 1 wq.id
     FROM dbo.A AS wq
     WHERE wq.statusCode = 'Claimed' and wq.id = 2

) 
```

我需要更新 id 等于 2 且 statusCode 等于 'Claimed' 的表 A 更新为 'booked'

它是线程安全的吗？tks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T12:58:57.630

`with (updlock, holdlock)`您可以通过添加到子查询来提高并发安全性：

```
FROM dbo.A AS wq with (updlock, holdlock) 
```

等效的方法是将语句包装在[`repeatable read`事务](http://msdn.microsoft.com/en-us/library/ms173763.aspx)中：

```
REPEATABLE READ
Specifies that statements cannot read data that has been modified but not yet 
committed by other transactions and that no other transactions can modify data 
that has been read by the current transaction until the current transaction 
completes. 
```

这看起来像：

```
set transaction isolation level repeatable read
start transaction
... your query here ...
commit transaction 
```

# android - 具有多列和颜色的 ListView

> ID：12109819
> 
> 赞同：-1
> 
> 时间：2012-08-24T12:55:42.950
> 
> 标签：android, listview, textview, multiple-columns

我想`ListView`在Android中构建一个。它应该有`multiple coloums`并且有可能`change color of only some rows`。我已经尝试过了，但我认为它调用了 LinearLayout 的**toString()**。我不明白`text inside the TextView`。这几天我都试过了。请帮忙。下面的代码只是真实项目的实验。

```
public class EventActivity extends ListActivity {

List<Event> events2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.event_layout);    

    ListView listView = (ListView) findViewById(R.id.listEvents);
    listView = getListView();

    TextView t1 = new TextView(getBaseContext());
    TextView t2 = new TextView(getBaseContext());
    TextView t3 = new TextView(getBaseContext());
    TextView t4 = new TextView(getBaseContext());
    TextView t5 = new TextView(getBaseContext());
    TextView t6 = new TextView(getBaseContext());
    TextView t7 = new TextView(getBaseContext());
    t1.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT, 
            LayoutParams.WRAP_CONTENT));
    t2.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT, 
            LayoutParams.WRAP_CONTENT));
    t3.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT, 
            LayoutParams.WRAP_CONTENT));
    t4.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT, 
            LayoutParams.WRAP_CONTENT));
    t5.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT, 
            LayoutParams.WRAP_CONTENT));
    t6.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT, 
            LayoutParams.WRAP_CONTENT));

    t1.setText("1111");         
    t2.setText("2111");
    t3.setText("3111");
    t4.setText("4111");         
    t5.setText("5111");
    t6.setText("6111");         
    t7.setText("7111");
    t1.setBackgroundColor(Color.GREEN);
    t4.setBackgroundColor(Color.GREEN);

    LinearLayout ll = new LinearLayout(this);
    ll.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT, 
            LayoutParams.MATCH_PARENT));
    ll.setOrientation(LinearLayout.VERTICAL);
    ll.addView(t1);
    ll.addView(t2);
    ll.addView(t3);
    ll.addView(t4);     
    ll.addView(t5);
    ll.addView(t6);
    ll.addView(t7);

    ArrayList<LinearLayout> lllist = new ArrayList<LinearLayout>();

    lllist.add(ll);

    ArrayAdapter<LinearLayout> eventAdapter = new ArrayAdapter<LinearLayout>(EventActivity.this,
            android.R.layout.simple_list_item_1,lllist );

    listView.setAdapter(eventAdapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:52:23.013

嗯，看起来您想创建一个显示：“1111”、“2111”等的 ListView。这是一个简单的方法来执行此操作*并*根据其索引更改每行的颜色：

```
public class Example extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String[] array = new String[] {"1111", "2111", "3111", "4111", "5111", "6111"};
        ColorfulArrayAdapter<String> adapter = new ColorfulArrayAdapter<String>(this, android.R.layout.simple_list_item_1, array);
        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(adapter);
    }

    public class ColorfulArrayAdapter<T> extends ArrayAdapter<T> {
        public ColorfulArrayAdapter(Context context, int textViewResourceId, T[] objects) {
            // There are many more constructors available from ArrayAdapter, consult the documentation for specifics!
            super(context, textViewResourceId, objects);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = super.getView(position, convertView, parent);

            // Change the background from its position, I added three choices
            switch(position % 3) {
            case 0: // Red
                view.setBackgroundColor(0xffff0000);
                break;
            case 1: // Green
                view.setBackgroundColor(0xff00ff00);
                break;
            case 2: // Blue
                view.setBackgroundColor(0xff0000ff);
            }
            return view;
        }
    }
} 
```

为多个列更改此示例非常简单，您只需从具有多个成员数据的对象开始，选择适当的适配器并指定哪些列去哪里。例如：

*   SimpleCursorAdapter 绑定来自 SQLite 查询的数据。
*   SimpleAdapter 绑定来自通用 Map 对象的数据。
*   您始终可以编写自己的适配器以尽量提高效率。

希望这有助于您入门！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:07:30.033

您需要使用自定义列表适配器来满足您的要求。

**步骤1**

初始化您的 ListView

**第2步**

使用调用适配器

```
MultiColumnAdapter review = new MultiColumnAdapter(this,logDetails_cursor);
listview.setAdapter(review); 
```

**第 3 步**

多列适配器

```
 class MultiColumnAdapter extends CursorAdapter {
    LayoutInflater mInflater;
    SimpleDateFormat sdf;

    RequestLogAdapter(Context context, Cursor cursor) {
        super(context, cursor);
        mInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

         //Get your details here
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
                    //Create xml for multicolumnlistview
        return mInflater.inflate(R.layout.mulitcolumnlistview, parent, false);
    }

    @Override
    public void bindView(View row, Context context, Cursor cursor) {
                    //Rows of multicolumn listview
        TextView reqdate = (TextView) row
                .findViewById(R.id.firstcolumn);
        TextView reqtime = (TextView) row
                .findViewById(R.id.secondcolumn);
        TextView reqfromlocation = (TextView) row
                .findViewById(R.id.thirdcolumn);

        String text1 = cursor.getString(i_requestdate);
        reqdate.setText(yourtext);

        String text2 = cursor.getString(i_requesttime);
        reqtime.setText(timeRequested);

        String text3 = cursor.getString(i_requestfromlocation);
        reqfromlocation.setText(yourtext);

       }
     } 
```

多列列表视图 ListView Xml

您可以在此处设置背景颜色。

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:paddingTop="4dip"
 android:paddingBottom="6dip"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:orientation="horizontal"
 android:descendantFocusability="blocksDescendants">

 <TextView android:id="@+id/column1"
     android:layout_width="70dip"
     android:layout_height="wrap_content"
     android:textColor="@color/White" 
     android:layout_marginLeft="5dip"
     android:layout_weight="1" 
     android:textSize="16sp" />

 <TextView android:id="@+id/column2"
     android:layout_width="60dip"
     android:layout_height="wrap_content" 
     android:layout_weight="1" 
     android:textSize="16sp" 
     android:textColor="@color/White"   
     android:maxLines="1" />  

 <TextView android:id="@+id/column3"
     android:layout_width="50dip"
     android:layout_height="wrap_content"  
     android:textSize="17sp"  
     android:textColor="@color/White"  
     android:layout_weight="2" /> 
```

希望能帮助到你

# salesforce - Salesforce：具有动态值的选项列表（多个）

> ID：12109820
> 
> 赞同：0
> 
> 时间：2012-08-24T12:55:44.263
> 
> 标签：salesforce, custom-fields

我已在 Salesforce 中使用选项列表（多个）将自定义字段添加到客户。但是选择列表的值应该是从其他对象动态生成的。如果没有，是否可以从本机应用程序（用 ruby​​ 编写）推送选项列表中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:05:36.337

我不认为标准控制器支持动态添加可能的选择列表（选择列表）值。

您可以做的是添加一个文本字段而不是一个选项列表，并使用 visualforce 创建一个自定义页面。为您的代码使用带有扩展名的标准控制器。创建一个新的自定义对象来保存字段的选项列表值（可以重复用于其他字段）。用可能的选项列表值填充它。
在页面控制器中，加载该字段的值。
在 visualforce 中，显示自定义字段的选择列表并从控制器加载值。
如果需要，为手动插入添加额外的输入字段。
保存时，将选项列表（或输入框）的值插入自定义字段。

可以在[这里找到更详细的指南](http://www.forcetree.com/2009/06/dynamically-add-values-to-picklist.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:11:55.807

为什么不在 Apex 中使用普通的 SelectOption 列表？

```
public List<SelectOption> getMyPicklist()
{   
    List<SelectOption> options = new List<SelectOption>();
    List<Account> acc = [ Select Id, Name From  Account Limit 10 ];

    for(Account a : acc){
        options.add(new SelectOption(a.Id,a.Name));
    }

    return options;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T01:20:03.247

我必须使用我的数据库中的值（而不是来自某些 visualforce 页面）来更新选项列表。因此，我使用 Databasedotcom gem 对帐户进行了身份验证，它提供了很好的 Api 来与 Salesforce 对象（标准和自定义）进行迭代。

```
 client.authenticate :token => "my-oauth-token", :instance_url => "http://na1.salesforce.com"  #=> "my-oauth-token"

 account = client.materialize("Account")
 account_to_be_updated = account.find(account_id) # here account is same as Instance of Activerecord
 account_to_be_updated.my_picklist = [value1; value2; value3; value4]
 account_to_be_updated.save 
```

# c# - RavenDb NLog 配置冲突

> ID：12109821
> 
> 赞同：2
> 
> 时间：2012-08-24T12:55:45.743
> 
> 标签：c#, ravendb, nlog

我想使用 NLog 记录到 RavenDb 数据库。显然没有现有的 NLog 目标（根据[this](https://stackoverflow.com/questions/9390922/can-nlog-write-to-ravendb-database)和搜索），所以我正在尝试编写自己的。我一直与 RavenDb 客户端自己的 NLog 配置发生冲突，我不知道如何解决这个问题。这是我的目标：

```
namespace NLog.RavenDb
{
    class LogEntry
    {
        public string Id { get; set; }
        public Exception Exception { get; set; }
        public string LogLevel { get; set; }
        public StackTrace StackTrace { get; set; }
        public DateTimeOffset TimeStamp { get; set; }
        public string Message { get; set; }
    }

    public class RavenDbTarget : NLog.Targets.TargetWithLayout
    {
        public static IDocumentStore Store { get; set; }

        protected override void Write(LogEventInfo logEvent)
        {
            if (Store == null)
            {
                const string noStoreWarning = "No Document Store set for the RavenDb Log target";
                Debug.WriteLine(noStoreWarning);
                return;
            }

            LogEntry entry = new LogEntry
            {
                Exception = logEvent.Exception,
                LogLevel = logEvent.Level.Name,
                Message = logEvent.FormattedMessage,
                StackTrace = logEvent.StackTrace,
                TimeStamp = new DateTimeOffset(logEvent.TimeStamp)
            };

            using (var session = Store.OpenSession())
            {
                session.Store(entry);
                session.SaveChanges();
            }
        }
    }
} 
```

下面是我如何让它与 SimpleConfigurator 一起工作：

```
RavenDbTarget.Store = new DocumentStore { Url = "http://localhost:8080/" };
RavenDbTarget.Store.Initialize();

NLog.Config.SimpleConfigurator.ConfigureForTargetLogging(new RavenDbTarget());
Logger logger = NLog.LogManager.GetLogger("Any");
logger.Info("Hi"); 
```

但是，RavenDb 也使用 NLog.config，因此当我将 Target 的引用放在那里时，它会在 Store.Initialize() 处引发异常。这是我在 NLog.config 中尝试的内容（NLog.RavenDb 是包含 RavenDb 目标的库项目的名称）：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <extensions>
        <add assembly="Nlog.RavenDb"/>
    </extensions>

    <targets>
        <target xsi:type="NLog.RavenDb.RavenDbTarget" name="Raven"/>
        <target xsi:type="File" name="f" fileName="${basedir}/logs/${shortdate}.log"
                layout="${longdate} ${uppercase:${level}} ${message}" />
    </targets>

    <rules>
        <logger minlevel="Trace" name="Any" writeTo="Raven" />
    </rules>
</nlog> 
```

如何让我的 NLog.config 文件与 RavenDb 的使用配合得很好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T13:31:33.733

找到了。我错过了目标类上的 Target 属性，如此[处所示](http://nlog-project.org/wiki/How_to_write_a_Target)。

```
[NLog.Targets.Target("RavenDb")]
public class RavenDbTarget : NLog.Targets.TargetWithLayout 
```

您传递给 Target 属性的名称参数是您在配置文件中引用为“类型”的参数：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <extensions>
        <add assembly="Nlog.RavenDb"/>
    </extensions>

    <targets>
        <target xsi:type="RavenDb" name="Raven"/>
    </targets>

    <rules>
        <logger minlevel="Trace" name="Any" writeTo="Raven" />
    </rules>
</nlog> 
```

现在 NLog 会自动获取 NLog.config，我不需要任何额外的配置代码。这是我的测试控制台应用程序的主要方法的内容：

```
 RavenDbTarget.Store = new DocumentStore { Url = "http://localhost:8080/" };
        RavenDbTarget.Store.Initialize();

        Logger logger = LogManager.GetLogger("Any");
        logger.Info("Hi"); 
```

# oracle - Benthic Golden Workspace 的问题

> ID：12109826
> 
> 赞同：1
> 
> 时间：2012-08-24T12:56:14.040
> 
> 标签：oracle, workspace

对不起，这个非常笼统的标题，想不出用简短的词来表达它的最佳方式。我对不同客户的一些出口有疑问。它们是针对每个客户的相同查询，但按 ID 过滤。我想为每种不同类型的导出创建选项卡，并为每个选项卡中的不同客户提供变量，以便我可以轻松地在任何数据库实例上为任何客户运行它们。但是，最后一个语句是一个查询，我希望它在结果窗口中返回，但它告诉我它需要一个 INTO 语句。我对光标不是很好，不确定这是否是正确的答案，但我想我会问你们所有人，因为你们过去都帮助过我很多。谢谢。

选项卡示例：

```
DECLARE  lEventID    INTEGER;
         lCustID     INTEGER := 1 -- Development Customer1
         --lCustID     INTEGER := 2 -- Development Customer2
         --lCustID     INTEGER := 3 -- Development Customer3
         --lCustID     INTEGER := 4 -- Development Customer4
         --lCustID     INTEGER := 5 -- Development Customer5
         --lCustID     INTEGER := 101 -- Testing Customer1
         --lCustID     INTEGER := 102 -- Testing Customer2
         --lCustID     INTEGER := 103 -- Testing Customer3
         --lCustID     INTEGER := 104 -- Testing Customer4
         --lCustID     INTEGER := 105 -- Testing Customer5
         --lCustID     INTEGER := 201 -- Production Customer1
         --lCustID     INTEGER := 202 -- Production Customer2
         --lCustID     INTEGER := 203 -- Production Customer3
         --lCustID     INTEGER := 204 -- Production Customer4
         --lCustID     INTEGER := 205 -- Production Customer5

BEGIN

    SELECT  EventID INTO lEventID
    FROM    Event
    WHERE   EventName = 'Event1'

    SELECT  Field1,
            Field2,
            Field3
    FROM    Table1
    WHERE   EventID = lEventID
      AND   CustomerID = lCustID;

END; 
```

现在，我确实相信我可以更改`DECLARE`to `var`，删除`BEGIN`and`END;`，然后将第一个查询作为子查询放在第二个查询中，这应该可以工作。但是，我试图保持它在它所在的包中的结构。我不想运行这个代码在包中的过程，因为有更新和插入语句。我只想运行此查询，以便在实际执行我想要它执行的操作之前查看可能发生的情况。我将与一位同事共享这个工作空间，我不希望他们太困惑。在原始包中，查询被放入游标中，游标是最终导出的过程的输出参数。如果你能提供帮助，我真的很感激。此外，Benthic Golden 是我们开发人员用来与 Oracle 交互的实用程序，因为这是我们公司拥有的许可证（我相信我们不能使用其他套件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:06:02.463

好吧，你没有在第二个 SELECT 语句中声明“INTO”，你总是可以使用这样的：

```
CURSOR mySqlStatement IS
SELECT  Field1,
            Field2,
            Field3
    FROM    Table1
    WHERE   EventID = lEventID
      AND   CustomerID = lCustID; 
```

（进入 DECLARE 区域）

而不是 SELECT ABC INTO 你喜欢（在 BEGIN 之后）

```
FOR row_ IN mySqlStatement LOOP
//row_ gets generated automaticly and you can access colums as row_.columname
END LOOP; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:56:51.263

在 PL/SQL 块中，你必须选择*一些东西*；或者显式地进入一个局部变量（你可以打印，如 Najzero 所示），或者一个本地声明的游标以便以后操作或打印，或者一个外部声明的 (ref) 游标。

根据您的评论，而不是与该客户的任何经验，听起来您应该能够做到这一点：

```
var reccursor refcursor;

DECLARE
    lEventID    INTEGER;
    lCustID     INTEGER := 1;
BEGIN

    SELECT  EventID INTO lEventID
    FROM    Event
    WHERE   EventName = 'Event1'

    -- open an externally-declared ref cursor to hold the result of the query
    OPEN :reccursor FOR
        SELECT  Field1,
                Field2,
                Field3
        FROM    Table1
        WHERE   EventID = lEventID
          AND   CustomerID = lCustID;
END;
/ 
```

我想这与您的过程非常相似，除了它将打开`out`参数引用光标而不是绑定变量。

这与您在 SQL*Plus 或 SQL Developer 中所做的相同，但它们需要显式`print :reccursor`才能查看其内容，而听起来您的客户端会自动处理它。

# .net - .NET 中的失败包

> ID：12109834
> 
> 赞同：4
> 
> 时间：2012-08-24T12:56:47.113
> 
> 标签：.net, ssis

我使用执行进程任务从 zip 文件夹中提取文件。

在执行流程任务编辑器的流程选项卡中，我设置如下参数：

```
Executeable:C:\Program Files\WinRAR\WinRAR.exe 
```

并在表达式选项卡中：

```
Arguments:"e "+ @[User::ZipFilePath] +"\\"+ @[User::FnameZip]  +" -o+"
workingDirectory:@[User::UnzipFilePath] 
```

当我从 BIDs 环境中手动运行 SSIS 包时，一切正常，**但我的问题是从 .asp.net application 执行包**。

在 .NET 中，我的程序失败，并返回警告：未找到档案

怎么了？.NET 中执行包的设置参数是否不同？在日志中我收到此消息： **无法写入属性“Arguments”上的表达式“”e“+ @[User::ZipFilePath] +”\“+ @[User::FnameZip] +”-o+“”的结果到物业。表达式已评估，但无法在属性上设置。** 对于其他人，我的变量也有上述错误。

只是如果我设置 Argument 没有变量并给出这样的路径： D:\tempHolderZip\myfolder.zip ，它在.net中工作

我找到了这个 [链接](http://blogs.msdn.com/b/dipanb/archive/2011/07/14/you-may-see-weird-behavior-when-using-the-ssis-object-model-from-an-asp-net-application.aspx) 我也试试这个，但没有结果。

# jquery - 单击链接时显示模式？模态对话框不显示？

> ID：12109845
> 
> 赞同：0
> 
> 时间：2012-08-24T12:57:25.303
> 
> 标签：jquery, asp.net-mvc, razor

我有下载文件的链接，这个过程有时很长，所以我想要一个 JQ 模式对话框来显示，通知用户正在下载。

使用 JQuery 模态：http: [//jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)

```
@model MvcResComm.Models.FileList

@{
    ViewBag.Title = "Download";
}

<script src="../../Scripts/jquery-1.8.0.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.20.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('a').click(function () {
            $("#dialog-modal").dialog({
                height: 140,
                modal: true
            }, 'open');
        });
    });
</script>

<h2>Download</h2>

<table>
@foreach (KeyValuePair<string, string> item in Model.Files) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Value)
        </td>
        <td>
            @Html.ActionLink("Download", "DownloadFile", new { fileid = item.Key, token = Model.Token, platform = "windows" })
        </td>
    </tr>
}

</table>
<div id="dialog-modal" title="Basic modal dialog">
    <p>Download in progress.</p><span class="loading">&nbsp;</span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:11:45.127

您将 JQuery 1.8 与 jQuery UI 1.8.20 一起使用。

看来您至少需要 jQuery UI 1.8.22。

### [演示](http://jsfiddle.net/hUYdD/)- 使用 jQuery 1.8 和 jQuery UI 1.8.20

（使用 ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.js）

上面的演示导致一个错误，您可以在控制台中看到：
`TypeError: match is undefined: return !!$.data( elem, match[ 3 ]);`

### [演示](http://jsfiddle.net/hUYdD/1/)- 使用 jQuery 1.8 和 jQuery UI 1.8.22

（使用 ajax.aspnetcdn.com/ajax/jquery.ui/1.8.22/jquery-ui.js）

如果您仍然遇到 jQuery UI 1.8.22 的问题，那么您的自定义 jQuery 1.8.23 文件可能会干扰某些东西。

# java - 使用 XSD 进行命名空间验证的 XML 引发异常

> ID：12109847
> 
> 赞同：0
> 
> 时间：2012-08-24T12:57:37.240
> 
> 标签：java, xml, xsd

我有一个 xml 文件，它是来自 Webservice 的响应。它涉及到各种命名空间。当我尝试使用适当的 XSD 对其进行验证时，它会抛出“org.xml.sax.SAXParseException: cvc-elt.1: 找不到元素 'SOAP-ENV:Envelope' 的声明。” 所有命名空间的命名空间声明都在响应中声明。以下是我的代码

```
try {
        DocumentBuilderFactory xmlFact = DocumentBuilderFactory.newInstance();
            SchemaFactory schemaFactory = SchemaFactory
            .newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
            SAXSource mainInputStream = new SAXSource(new InputSource(new FileInputStream(new File("FIXEDINCOME_v3_0.xsd"))));
            SAXSource importInputStream1 =new SAXSource(new InputSource(new FileInputStream(new File("Rating.xsd"))));
            SAXSource importInputStream2 = new SAXSource(new InputSource(new FileInputStream(new File("Datatypes.xsd"))));
            Source[] sourceSchema = new SAXSource[]{mainInputStream , importInputStream1, importInputStream2};
            Schema schema = schemaFactory.newSchema(sourceSchema);  
            xmlFact.setNamespaceAware(true);
            xmlFact.setSchema(schema);
            DocumentBuilder builder = xmlFact.newDocumentBuilder();
            xmlDOC = builder.parse(new InputSource(new StringReader(inputXML)));
            NamespaceContext ctx = new NamespaceContext() {
                public String getNamespaceURI(String prefix) {
                    String uri;
                    if (prefix.equals("ns0"))
                        uri = "http://namespace.worldnet.ml.com/EDS/Standards/Common/Service_v1_0/";
                    else if (prefix.equals("ns1"))
                        uri = "http://namespace.worldnet.ml.com/EDS/Product/Services/Get_Product_Data_Svc_v3_0/";
                    else if (prefix.equals("ns2"))
                        uri = "http://namespace.worldnet.ml.com/DataSOA/Product/Objects/FixedIncome/FixedIncome_v3_0/";
                    else if (prefix.equals("ns3")) {
                        uri = "http://namespace.worldnet.ml.com/DataSOA/Product/Objects/Rating/Rating_v2_0/";
                    } else if (prefix.equals("SOAP-ENV")) {
                        uri = "http://schemas.xmlsoap.org/soap-envelope/";
                    } else
                        uri = null;

                    return uri;
                }

                // Dummy implementation - not used!
                public Iterator getPrefixes(String val) {
                    return null;
                }

                // Dummy implemenation - not used!
                public String getPrefix(String uri) {
                    return null;
                }
            };

            XPathFactory xpathFact = XPathFactory.newInstance();
            xPath = xpathFact.newXPath();
            xPath.setNamespaceContext(ctx);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:12:44.983

我认为问题不在于检测 SOAP-ENV 前缀的命名空间定义。验证器需要定义在该命名空间中使用的元素的 XSD 文件，以便验证 SOAP-ENV:Envelope 元素，因此您需要告诉验证器该模式所在的位置。

我认为解决方案是将以下内容添加到您的 XML 响应中：

```
<SOAP-ENV:Envelope
  xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsi="http://schemas.xmlsoap.org/soap/envelope/"
  xsi:schemaLocation="http://schemas.xmlsoap.org/soap/envelope/      
           http://schemas.xmlsoap.org/soap/envelope/"> 
```

或者，从网上下载该架构，将其作为 XSD 文件保存到本地文件系统，然后将其添加到`sourceSchema`阵列中。第一种方法应该是首选，因为它会导致更可移植的代码（和 XML）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:49:46.830

您为验证提供的模式集不包括soap 模式。您可以在模式集合中包含soap 模式，或者，如果您不关心验证soap 包装器，只需获取实际的正文内容元素并从那里运行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:11:12.897

您是否尝试过为 SOAP-ENV 使用以下 URI？

[http://schemas.xmlsoap.org/soap/envelope/](http://schemas.xmlsoap.org/soap/envelope/)

# php - 通过 javascript 添加的输入字段不在 PHP $_POST 变量中。如何解决这个问题？

> ID：12109850
> 
> 赞同：0
> 
> 时间：2012-08-24T12:57:47.737
> 
> 标签：php, javascript, jquery, forms

我在 html 表中有一个表单。

我正在通过 jquery 将输入字段动态添加到表单中。当我在提交表单时使用 var dump 时，$_POST 数组没有添加的字段。为什么会这样？

这是我的 js 的样子：

```
$('#add-more-del-areas').live('click',function(e){
        var del_area_count = $('[name=number_of_delivery_areas]').val();
        var new_count = (parseInt(del_area_count)+1);
        var tr_html =   '<tr>'+
                            '<td style="padding:10px 0px 0px 10px;"><strong>Delivery Area '+new_count+'</strong></td>'+
                            '<td>'+
                                '<input  name="d_area'+new_count+'" type="text"  size="50"  value=""/>'+
                                '<div class="area-display-container" id="test'+new_count+'-display"></div>'+
                                '<div>'+
                                    '<input class="auto-suggest-input" type="text" autocomplete="off" id="test'+new_count+'"/>'+
                                    '<div class="test-content" id="test'+new_count+'-content"></div>'+
                                '</div>'+
                            '</td>'+
                        '</tr>'+
                        '<tr id="del_area-'+new_count+'" bgcolor="#FF9933">'+
                            '<td style="padding:10px 0px 0px 10px;"><strong>Dilivery charges for area '+new_count+'</strong></td>'+
                            '<td><input name="m_order'+new_count+'" type="text" size="50" value="0"></td>'+
                        '</tr>';
        //$('#del_area-'+del_area_count).after(tr_html);
        $(tr_html).insertAfter('#del_area-'+del_area_count);

        big_cms.auto_suggest_({id: 'test'+new_count,input_field: 'd_area'+new_count});
        $('[name=number_of_delivery_areas]').val(new_count);
        e.preventDefault();

    }); 
```

虽然 html 很可悲而且仍然太长，但它是：

```
<table width="840" border="0" cellpadding="0" cellspacing="0" style="border: #57414D 4px Solid; margin:auto;">
            <tr>
                <td  height="20px" bgcolor="#57414D" align="center" colspan="2"><span  style="font-family:arial; font-size:13px; color:#ffffff"><b>You can add/edit Restaurant/Management content here!!</b></span></td>
            </tr>
            <?php   
                if ($bgclass == "bgExtraLightGray")
                    $bgclass = "bgWhite";
                else
                    $bgclass = "bgExtraLightGray";      
            ?>
            <form name="frmCatPopup" method="POST" enctype="multipart/form-data" onSubmit="return ValidateContactForm();">
            <tr align="center" bgcolor="#FF9933" class="<?php echo($bgclass); ?>">
                <td colspan="2" class="note">&nbsp;<?php echo($errMsg); ?></td>
            </tr>
            <tr>
                <td width="40%" class="heading1" style="padding-left:10px"><strong>Register Name</strong></td>
                <td width="60%" style="padding-bottom:4px;"><select name="name" class="restar_txtbox" style="width:326px;">
                <?php

                    $quer_l="select * from ".$tableprefix."restaurant_sign_up";
                    $cmd_l=mysql_query($quer_l);
                    while($res_l=mysql_fetch_array($cmd_l))
                    {               
                ?>
                    <option value="<?php echo $res_l['fld_id']; ?>" <?php if($rs['signup_id']==$res_l['fld_id']) echo"selected";?>><?php echo $res_l['fld_contact_person']; ?></option>
                <?php
                    }
                ?>
                    </select>
                </td>
            </tr>

            <tr bgcolor="#FF9933">  
                <td width="40%" class="heading1" style="padding-left:10px"><strong>Restaurant Name</strong></td>
                <td><input type="text" name="rest_name" size="50" value="<?php echo $rs['fld_name'];?>"/></td>
            </tr>
            <tr>
                <td class="heading1" style="padding:4px 0 4px 10px;"><strong>Address</strong></td>
                <td style="padding:4px 0 4px 0;">
                    <textarea rows="3" cols="38" name="address"  id="address"   value="<?php echo($rs["fld_address"]); ?>" size="50">
                        <?php echo($rs["fld_address"]); ?>
                    </textarea>
                </td>
            </tr>
            <tr bgcolor="#FF9933">
                <td class="heading1" style="padding-left:10px"><strong>Location</strong></td>
                <td>
                    <select name="loc" style="width:326px;" ><!--onchange="locat(this.value)"-->
                        <option>Select Location</option> 
                        <?php
                            $quer_l="select * from ".$tableprefix."location where location_status='1'";
                            $cmd_l=mysql_query($quer_l);
                            while($res_l=mysql_fetch_array($cmd_l))
                            {               
                        ?>
                        <option value="<?php echo $res_l['location_id']; ?>" <?php if($rs['location_id']==$res_l['location_id']) echo"selected";?>><?php echo $res_l['name']; ?></option>
                        <?php
                            }
                        ?>
                    </select>
                </td>
            </tr>
            <tr>
                <td style="padding:4px 0 4px 10px;"><strong>Area</strong></td>
                <td style="padding:4px 0 4px 0;">

                    <?php /*?><div id="area"><select name="area" style="width:326px;">
                        <option value="asap">Select Location First</option>
                        </select>
                        </div><?php */?>
                        <select name="area"  style="width:326px;">
                    <?php
                        $quer_a="select * from ".$tableprefix."area where status='1'";
                        $cmd_a=mysql_query($quer_a);
                        while($res_a=mysql_fetch_array($cmd_a))
                        {               
                    ?>
                            <option value="<?php echo $res_a['area_id']; ?>"  <?php if($rs['area_id']==$res_a['area_id']) echo"selected";?>><?php echo $res_a['area_name']; ?></option>
                    <?php
                        }
                    ?>
                        </select>
                </td>
            </tr>
            <tr bgcolor="#FF9933">
                <td style="padding-left:10px"><strong>Opening Time</strong></td>
                <td><input name="openingtime_start" type="text"  id="openingtime_start"  value="
                <?php 
                    $q1=$rs["fld_openingtime_start"];
                    $q=strlen($rs["fld_openingtime_start"]);
                    $S=substr("$q1","-$q","-2");
                    $S4=substr("$q1","-2","2");
                    echo $S;
                ?>">
                    <select name="start">
                        <option value="am" <?php if($S4=="am"){echo "selected";}?>>am</option>
                        <option value="pm" <?php if($S4=="pm"){echo "selected";}?>>pm</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td style="padding:4px 0 4px 10px;"><strong>Closing Time</strong></td>
                <td style="padding:4px 0 4px 0;">
                    <input name="closingtime_start" type="text" class="restar_txtbox" id="closingtime_start"  value="
                    <?php 
                        $q6=$rs["fld_closingtime_start"];
                        $q7=strlen($rs["fld_closingtime_start"]);
                        $S3=substr("$q6","-$q7","-2");
                        $S4=substr("$q6","-2","2");
                        echo $S3;
                    ?>">
                    <select name="end">
                        <option value="am"<?php if($S4=="am"){echo "selected";}?>>am</option>
                        <option value="pm" <?php if($S4=="pm"){echo "selected";}?>>pm</option>
                    </select>
                </td>
            </tr>
            <tr bgcolor="#FF9933">
                <td style="padding:4px 0 4px 10px;"><strong>Opening Time</strong></td>
                <td style="padding:4px 0 4px 0;">
                    <input name="openingtime_start1" type="text" class="restar_txtbox" id="openingtime_start1"  value="
                    <?php
                        $q4=$rs["fld_openingtime_start1"];
                        $q5=strlen($rs["fld_openingtime_start1"]);
                        $S2=substr("$q4","-$q5","-2");
                        $S4=substr("$q4","-2","2");
                        echo $S2;
                    ?>">
                    <select name="start1">
                        <option value="am" <?php if($S4=="am"){echo "selected";}?>>am</option>
                        <option value="pm" <?php if($S4=="pm"){echo "selected";}?>>pm</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td style="padding:4px 0 4px 10px;"><strong>Closing Time</strong></td>
                <td style="padding:4px 0 4px 0;">
                    <input name="closingtime_start1" type="text" class="restar_txtbox" id="closingtime_start1"  value="
                <?php 
                    $q2=$rs["fld_closingtime_start1"];
                    $q3=strlen($rs["fld_closingtime_start1"]);
                    $S1=substr("$q2","-$q3","-2");
                    $S4=substr("$q4","-2","2");
                    echo $S1;
                ?>">
                    <select name="end1">
                        <option value="am" <?php if($S4=="am"){echo "selected";}?>>am</option>
                        <option value="pm" <?php if($S4=="pm"){echo "selected";}?>>pm</option>
                    </select>
                </td>
            </tr>
            <tr bgcolor="#FF9933">
                <td style="padding-left:10px"><strong>Delivery Fee</strong></td>
                <td>
                    <input type="text"    name="delivery_fee" value="<?php echo($rs["fld_deliveryfee"]); ?>" size="50">
                </td>
            </tr>
            <tr>
                <td style="padding:4px 0 4px 10px;"><strong>Cuisines</strong></td>
                <td style="padding:4px 0 4px 0;">
                    <select name="cuisines[]" id="cuisines[]"  style="width:326px;" multiple="multiple">
                    <?php
                        $quer_l="select * from ".$tableprefix."cuisines where status='1'";
                        $cmd_l=mysql_query($quer_l);
                        $allCuisines = array();
                        while($row = mysql_fetch_assoc($cmd_l))
                        {
                            $allCuisines[] = $row;
                        }                 
                        //[BIG-3] In case there are multiple cuisines selected, they were not being pulled back from DB for display at frontend. 
                        $cuisineIds = explode(',',$rs['fld_cuisines']);               // In the $cuisineIds, all the cuisines selected from DB get stored
                        foreach( $allCuisines as  $res_l)                            //Looping on all cuisines as they all need to be echoed once, as well as comparing the condition for a match to the Cuisines originally associated with restaurant
                        {
                        ?>
                            <option value="<?php echo $res_l['cuisines_id']; ?>" 
                            <?php  
                                foreach ( $cuisineIds  as $cuisId ) 
                                {
                                    if($cuisId ==$res_l['cuisines_id'])
                                        echo"selected"; 
                                }
                            ?> >
                            <?php echo $res_l['cuisines_name'];   ?></option>                
                            <?php
                        }
                    ?>
                    </select>
                </td>
            </tr>
            <tr>
                <td style="padding-left:10px"><strong>Pure Veg</strong></td>
                <td>
                    <input type="checkbox"     name="veg_flag" 
                    <?php 
                        if(isSet($rs["veg_flag"]) && $rs['veg_flag']==1) 
                            echo("checked='checked'"); 
                    ?> value="1"/>
                </td>
            </tr>
                <!--</td>   </tr> -->
            <tr bgcolor="#FF9933">
                <td style="padding-left:10px"><strong>Min Order</strong></td>
                <td>
                    <input type="text"     name="min_order" value="
                    <?php echo($rs["fld_minorder"]); ?>" size="50"/>
                </td>
            </tr>
            <tr> 
                <td style="padding:4px 0 4px 10px;"><strong>Phone</strong></td>
                <td style="padding:4px 0 4px 0;"><input name="phone" type="text"  id="phone" size="50"  value="<?php echo($rs["fld_phone"]); ?>"></td>
            </tr>
            <tr bgcolor="#FF9933">
                <td style="padding-left:10px"><strong>Upload 1</strong></td>
                <td><input name="photos" type="file" size="38" id="photos"  /></td>
            </tr>
            <tr>
                <td style="padding:4px 0 4px 10px;"><strong>upload 2</strong></td>
                <td style="padding:4px 0 4px 0;"><input name="videos" type="file" id="videos"  /></td>
            </tr>
            <tr bgcolor="#FF9933">
                <td style="padding-left:10px"><strong>Rating</strong></td>
                <td><input name="rating" type="text" id="rating"   value="<?php echo($rs["fld_rating"]); ?>" size="50"></td>
            </tr>
                <!--</td></tr> -->
            <tr bgcolor="#fff001">
                <td class="heading1" style="padding-left:10px"><strong>Restaurent Close Day</strong></td>
                <td>
                    <select name="day" style="width:200px;" ><!--onchange="locat(this.value)"-->
                        <option value="0">Select Day</option>
                        <option  value="1">Monday</option>
                        <option  value="2">Tuesday</option>
                        <option  value="3">Wednesday</option>
                        <option  value="4">Thursday</option>
                        <option  value="5">Friday</option>
                        <option  value="6">Saturday</option>
                        <option  value="7">Sunday</option>                
                    </select>
                </td>
            </tr>
            <tr>
                <td style="padding:4px 0 4px 10px;"><strong>Description</strong></td>
                <td style="padding:4px 0 4px 0;"><textarea name="desc" type="text" id="desc" cols="38" rows="3"   ><?php echo($rs["fld_desc"]); ?></textarea></td>
            </tr>
            <tr bgcolor="#FF9933">
                <td style="padding-left:10px"><strong>Info</strong></td>
                <td><textarea name="info" type="text" id="info" cols="38" rows="3"  > <?php echo($rs["fld_info"]); ?></textarea></td>
            </tr>
            <tr>
                <td style="padding:4px 0 4px 10px;"><strong>Specilialities</strong></td>
                <td style="padding:4px 0 4px 0;"><input type="text"   name="specialities" value="<?php echo($rs['fld_specialities']) ?>" size="50" /></td>
            </tr>
            <tr bgcolor="#FF9933" >
                <td style="padding-left:10px"><strong>Delivery Time</strong></td>
                <td><input name="delivery_time" type="text" id="delivery_time" size="50"     value="<?php echo($rs["fld_deliverytime"]); ?>"></td>
            </tr>
            <tr>      
                <td style="padding:10px 0px 0px 10px;"><strong>Tax</strong></td>
                <td><input name="tax" type="text" id="tax" size="50"  value="<?php echo($rs["fld_tax"]); ?>"></td>
            </tr>
            <tr bgcolor="#FF9933">
                <td style="padding:10px 0px 0px 10px;"><strong>Cost For One</strong></td>
                <td><input name="cost" type="text" id="cost" size="50" value="<?php echo($rs["fld_cost"]); ?>"></td>
            </tr>
            <tr>
                <td style="padding-left:10px"><strong>Packaging Charge</strong></td>
                <td><input name="p_charge" type="text" size="50" value="<?php echo($rs["p_charge"]); ?>"></td>
            </tr>
            <tr bgcolor="#FF9933">
                <td style="padding:10px 0px 0px 10px;"><strong>Label for Tax</strong></td>
                <td><input name="label_t" type="text" size="50" value="<?php echo($rs["label_t"]); ?>"></td>
            </tr>
            <?php 
                if(isset($_GET['fld']))
                {
                    $delivery_area_data = Task::getDeliveryAreaData($_GET['fld']);
                    $no_of_del_areas = sizeof($delivery_area_data);
                    if($no_of_del_areas > 0)
                    {
                        echo '<tr><td><input type="hidden" name="number_of_delivery_areas" value="'.$no_of_del_areas.'"/></td></tr>';
                        for($i=1;$i<=$no_of_del_areas;$i++)
                        {
                            $min_id = $i;
                            $min_order = $delivery_area_data[$i]['min_order'];
                            $area_id_str = implode(',',$delivery_area_data[$i]['area_ids']);
                            $area_name_str = '';
                            $j = 0;
                            foreach($delivery_area_data[$i]['area_names'] as $name)
                            {
                                $tmp_area_id = $delivery_area_data[$i]['area_ids'][$j];
                                $area_name_str .= '<span class="area-label" id="test'.$min_id.'-area-'.$tmp_area_id.'">
                                    '.$name.'
                                    <span class="test'.$min_id.'-delete-area delete-x" id="delete-area-'.$tmp_area_id.'">X</span>
                                </span>';
                                $j++;
                            }
                            echo '<tr>
                                    <td style="padding:10px 0px 0px 10px;"><strong>Delivery Area '.$min_id.'</strong></td>
                                    <td>
                                        <input  name="d_area'.$min_id.'" type="text"  size="50" autocomplete="off" value="'.$area_id_str.'"/>
                                        <div class="area-display-container" id="test'.$min_id.'-display">'.$area_name_str.'</div>
                                        <div>
                                            <input class="auto-suggest-input" type="text" autocomplete="off" id="test'.$min_id.'"/><br/>
                                            <div class="test-content" id="test'.$min_id.'-content"></div>
                                        </div>
                                    </td>
                                </tr>
                                <tr id="del_area-'.$min_id.'" bgcolor="#FF9933">
                                    <td style="padding:10px 0px 0px 10px;"><strong>Dilivery charges for area '.$min_id.'</strong></td>
                                    <td><input name="m_order'.$min_id.'" type="text" size="50" value="'.$min_order.'"></td>
                                </tr>
                                ';
                        }
                        echo '<tr>
                                    <td>
                                        <button id="add-more-del-areas">Add more</button>
                                    </td>
                                </tr>';
                    }
                    else
                    {
            ?>
                        <tr>
                            <td style="padding:10px 0px 0px 10px;"><strong>Delivery Area 1</strong></td>
                            <td>

                                <input  name="d_area1" type="text"  size="50" autocomplete="off" value=""/>
                                <div class="area-display-container" id="test1-display"></div>
                                <div>
                                    <input class="auto-suggest-input" type="text" autocomplete="off" id="test1"/><br/>
                                    <div class="test-content" id="test1-content"></div>
                                </div>
                            </td>
                        </tr>

                        <tr bgcolor="#FF9933">
                            <td style="padding:10px 0px 0px 10px;"><strong>Dilivery charges for area 1</strong></td>
                            <td><input name="m_order1" type="text" size="50" value=""/></td>
                        </tr>
                        <tr>
                            <td style="padding:10px 0px 0px 10px;"><strong>Dilivery area 2</strong></td>
                            <td>
                                <input name="d_area2" type="text" size="50" value=""/>
                                <div class="area-display-container" id="test2-display"></div>
                                <div>
                                    <input class="auto-suggest-input" type="text" autocomplete="off" id="test2"/>
                                    <div class="test-content" id="test2-content"></div>
                                </div>
                            </td>
                        </tr>
                        <tr bgcolor="#FF9933">
                            <td style="padding:10px 0px 0px 10px;"><strong>Dilivery charges for area 2</strong></td>
                            <td><input name="m_order2" type="text" size="50" value=""/></td>
                        </tr>
                        <tr >  
                            <td style="padding:10px 0px 0px 10px;"><strong>Dilivery area 3</strong></td>
                            <td>
                                <input name="d_area3" type="text" size="50" value=""/>
                                <div class="area-display-container" id="test3-display"></div>
                                <div>
                                    <input class="auto-suggest-input" type="text" autocomplete="off" id="test3"/><br/>
                                    <div class="test-content" id="test3-content"></div>
                                </div>
                            </td>
                        </tr>

                        <tr id="del_area-3" bgcolor="#FF9933">                  
                            <td style="padding:10px 0px 0px 10px;"><strong>Dilivery charges for area 3</strong></td>
                            <td><input name="m_order3" type="text" size="50" value=""/></td>
                        </tr>
                        <tr>
                            <td>
                                <button id="add-more-del-areas">Add more</button>
                            </td>
                        </tr>
                <?php
                    }

                }
                else
                {    
                ?>
                    <tr>
                        <td style="padding:10px 0px 0px 10px;"><strong>Delivery Area 1</strong></td>
                        <td>

                            <input  name="d_area1" type="text"  size="50" autocomplete="off" value=""/>
                            <div class="area-display-container" id="test1-display"></div>
                            <div>
                                <input class="auto-suggest-input" type="text" autocomplete="off" id="test1"/><br/>
                                <div class="test-content" id="test1-content"></div>
                            </div>
                        </td>
                    </tr>

                    <tr bgcolor="#FF9933">
                        <td style="padding:10px 0px 0px 10px;"><strong>Dilivery charges for area 1</strong></td>
                        <td><input name="m_order1" type="text" size="50" value="<?php //echo($rs["m_order1"]); ?>"></td>
                    </tr>
                    <tr>
                        <td style="padding:10px 0px 0px 10px;"><strong>Dilivery area 2</strong></td>
                        <td>
                            <input name="d_area2" type="text" size="50" value=""/>
                            <div class="area-display-container" id="test2-display"></div>
                            <div>
                                <input class="auto-suggest-input" type="text" autocomplete="off" id="test2"/>
                                <div class="test-content" id="test2-content"></div>
                            </div>
                        </td>
                    </tr>
                    <tr bgcolor="#FF9933">
                        <td style="padding:10px 0px 0px 10px;"><strong>Dilivery charges for area 2</strong></td>
                        <td><input name="m_order2" type="text" size="50" value="<?php //echo($rs["m_order2"]); ?>"></td>
                    </tr>
                    <tr >  
                        <td style="padding:10px 0px 0px 10px;"><strong>Dilivery area 3</strong></td>
                        <td>
                            <input name="d_area3" type="text" size="50" value=""/>
                            <div class="area-display-container" id="test3-display"></div>
                            <div>
                                <input class="auto-suggest-input" type="text" autocomplete="off" id="test3"/><br/>
                                <div class="test-content" id="test3-content"></div>
                            </div>
                        </td>
                    </tr>

                    <tr id="del_area-3" bgcolor="#FF9933">                  
                        <td style="padding:10px 0px 0px 10px;"><strong>Dilivery charges for area 3</strong></td>
                        <td><input name="m_order3" type="text" size="50" value="<?php //echo($rs["m_order3"]); ?>"></td>
                    </tr>
                    <tr>
                        <td>
                            <button id="add-more-del-areas">Add more</button>
                        </td>
                    </tr>
                <?php 
                }
                ?>

            <tr>
                <td colspan="9" align="center" style="padding-top:5px">
                    <input type="submit" value="Save" name="btnSave" /> &nbsp;
                    <a href="#" onClick="window.close()"><input type="button" value="cancel"></a>
                </td>
            </tr>
        </form>
        </table>
        <div class="clr"></div>
    </div>
</div>
<div class="restar_bottom"></div>
</div>
<script type="text/javascript" src="../js/jquery-1.7.1.min.js"></script>

<script type="text/javascript" src="cms.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:16:43.113

HTML 无效。

您不能在 a 内`<table>`但在 a 之外有一个表格，`<td>`或者`<th>`该表格是该表格的一部分。

一些浏览器通过将表单移动到有效的地方来纠正错误（同时留下所有控件）。

使用[验证器](http://validator.w3.org/)来查找此类标记错误。

# c# - 回页在 BinaryWrite 上无法按预期工作

> ID：12109852
> 
> 赞同：0
> 
> 时间：2012-08-24T12:57:49.680
> 
> 标签：c#, asp.net, response.write

我有一个主页/主菜单页面。表格有链接。如果您使用输入运行表单，您将获得 Excel 输出。如果您单击“打开”以在浏览器中打开该输出，则返回按钮会将您带到主菜单/主菜单。

这是可以理解的，因为如果表单页面是 X.aspx，那么输出 Excel 的 binaryWrite 并不会真正改变这一点。

问题是如果有回发，后退按钮会将您带到表单页面。这是不一致的。如果我运行页面或下拉菜单导致回发，我真的希望后退按钮将我带到表单字段，以便我可以再次运行 Excel 工作表。

我尝试过的事情。

我尝试添加位置标题。

```
e.ContentFileName = "ELTFile.Output.xls"; 
```

在响应之前。写...

```
private void SendFileToBrowser(DownloadFileEventArgs e)
{
    if (!e.Cancel && e.FileObject != null)
    {
        this.Page.Response.Clear();
        this.Page.Response.ClearContent();
        this.Page.Response.AddHeader("Content-Disposition", string.Format("inline; filename={0}", e.ContentFileName));
        this.Page.Response.AddHeader("Content-Length", e.FileObject.LongLength.ToString());
        this.Page.Response.AddHeader("Location", e.ContentFileName);
        this.Page.Response.ContentType = e.ContentType;
        this.Page.Response.BinaryWrite(e.FileObject);
        this.Page.Response.End();
    }
} 
```

我试过了

```
Response.Cache.SetCacheability(HttpCacheability.Public); 
```

也

```
Response.Cache.SetCacheability(HttpCacheability.Server); 
```

但基本上，取决于我是否在单击“提交”按钮生成 Excel 之前回帖，我会得到主菜单（不想要）或表单页面（想要）。我每次都想要表单页面。基本上我想告诉浏览器“我知道这并不是一个真正不同的页面，但请那样对待它，好吗？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:21:27.223

您不能直接将页面添加到浏览器历史记录中。

您可以使您的应用程序使表单始终位于 excel 输出之前的一页。

为此，有一个单独的页面来输出 excel。当您有生成 excel 的输入时，`Response.Redirect`转到生成页面。这会将您的输入表单保留在浏览器历史记录中。

*注意：如果您喜欢，您也可以重定向到同一页面，但这需要您跟踪它。*

# javascript - 触发点击事件后触发函数

> ID：12109859
> 
> 赞同：0
> 
> 时间：2012-08-24T12:58:05.563
> 
> 标签：javascript, jquery

如何解决这个问题：

```
function Navigation(sender) {
    var senderID = sender.id;

    var answer = confirm("do you want to save your current layout ?");
    if (answer) {
        $("#loadingImg").css("display", "block");
        $("#<%=Button1.ClientID %>").click();
         //the next line is never fired
         if (senderID == "AboutClick") { setTimeout('ShowLoadingMsg()', 3000); } 

    }    
 }
function ShowLoadingMsg() {
   window.location="About.aspx";
}

<a href="javascript:void(0)" id="AboutClick" class="menu" onclick="Navigation(this);" >Navigate Click</a>
<asp:Button ID="Button1" runat="server" OnClick="btnSaveState_Click" style="display:none;" /> 
```

//服务器端：

```
 protected void btnSaveState_Click(object sender, EventArgs e)
{

     SaveState();

} 
```

主要问题是这条线永远不会被解雇我在这里做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:04:28.330

这里的问题是`$("#<%=Button1.ClientID %>").click();`导致整个页面重新加载。在那之后设置超时的脚本并不重要，因为无论如何页面都会刷新。

您可以尝试放入`Button1`UpdatePanel[中](http://www.google.se/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCQQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fbb399001%28v%3Dvs.100%29.aspx&ei=8ns3UIfpI4aWswbSsIGIBw&usg=AFQjCNHNaj70ADNDcLEKFjArGvw8r8LY-Q)，或者以其他方式解决问题，例如保存状态并以相同的方法重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:12:04.910

试试这个：

```
<a href="#" id="AboutClick" class="menu trigger">Navigate Click</a>​ 
```

-

```
$(function(){
    $(".trigger").click(function(){
        var answer = confirm("do you want to save your current layout ?");
        if (answer) {
            $("#loadingImg").show();
            if (this.id == "AboutClick") { setTimeout('ShowLoadingMsg()', 3000); }
            $("#<%=Button1.ClientID %>").click();
        }  
    })       
})

function ShowLoadingMsg() {
   window.location="About.aspx";
} 
```

[演示在这里！](http://jsfiddle.net/tw4pS/)

# c++ - 当检查单元格是否被占用时，CLI/C++ 俄罗斯方块块崩溃 MSVisualStudio 2008

> ID：12109860
> 
> 赞同：3
> 
> 时间：2012-08-24T12:58:12.817
> 
> 标签：c++, visual-studio-2008, c++-cli, tetris

这是我检查未来移动是否合法的代码，我假设它是合法的并将移动复制到 mySquares 数组中。然后我在表单中设置的游戏周期和计时器处理程序中调用此方法，即：

```
 canvas->drawGrid();
 testBlock->drawBlock();
 testBlock->moveDown();//this method has checkBounds for when hit sides, top & bottom

if(newBlock->canMoveDown()==false)
{
    newBlock->addMySelfToGameBoard();

    mainGameBoard->updateGrid();

}

//timer1 handler finish

bool TTetrisBlock::canMoveDown()
{
    array<Point>^ temporaryCopy = gcnew array<Point>(4);

    bool canGoDown = true;
    for(int i=0;i<mySquares->Length;i++)
    {
        //Set future move
        temporaryCopy[i].X = mySquares[i].X;
        temporaryCopy[i].Y = mySquares[i].Y+1;
    }
    //Check if future move cells are full, if not assign values to mySquares
    //Check if future move is legal
        for(int j=0;j<temporaryCopy->Length;j++)
        {
            if(gameBoard->isCellOccupied(temporaryCopy[j].X,temporaryCopy[j].Y) == true)
            {

                mySquares[j].X = temporaryCopy[j].X;
                mySquares[j].Y = temporaryCopy[j].Y;
            }

        }
    return canGoDown;

}

//end of moveDown 
```

在我的游戏板类中，我有检查 TCell 是否被占用的方法。TGameBoar 拥有一个 TCells 数组，它有一个颜色并且 bool isOccupied = false;

```
bool TGameBoard::isCellOccupied(int c,int r)
{
    //Checks if TCell is occupied
    return myGrid[c,r]->getIsOccupied();
} 
```

它崩溃并表明这是问题所在，我目前在学校学习 C++。我会很感激一些帮助。我也在为使用 e->KeyData == Keys::Left) 等向左和向右移动而苦苦挣扎，并在通过循环时创建一个新块。如果你想看看，我有我的项目 rar。我已经完成了所有的课程，只是把它放在一起是很难的。

[俄罗斯方块项目](https://hotfile.com/dl/168698581/38815a7/Tetris_Nolan_Ratu.rar.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:37:29.553

我看到三个问题。

*   首先，您应该只在 isCellOccupied 返回 false 时移动 mySquares（不是您当前拥有的 true）。我怀疑这是你崩溃的原因，因为看起来你将一个块移动到一个已经被占用的单元中。
*   其次，当 isCellOccupied 返回 true 时，您应该将 canGoDown 设置为 false 并跳出您的 for 循环（或者更好的是，使 canGoDown (==true) 成为您的 for 循环的附加条件，即 j <temporaryCopy->Length && canGoDown）。实际上，您的函数始终返回 true，因为它永远不会设置为 false，而且这是不正确的。
*   只是在这里做一个假设，但不是所有的 mySquares 都包含 4 个元素吗？您正在使用 4 个元素初始化temporaryCopy，但不清楚 mySquares 是否有 4 个元素。如果不是，这可能是危险的，因为在您的第一个循环中，您正在循环 mySquares->Length 并使用该索引值寻址temporaryCopy，这可能超出范围。然后再做相反的事情。在所有循环中使用常量 (4) 可能会更好，或者更好的是，始终使用 mySquares->Length（尤其是在创建temporaryCopy 数组时）以确保两个数组包含相同数量的元素。

# java - Android 游标不返回用于选择查询的行

> ID：12109861
> 
> 赞同：0
> 
> 时间：2012-08-24T12:58:15.577
> 
> 标签：java, android, sql, cursor

我目前正在尝试从我自己的数据库中获取一行，该数据库位于资产文件夹中。检查表中是否有一行，使用 SQLite 查询浏览器和调试器中的 SELECT-Statement 让我在数据库中找到一行。无论如何，从我的代码中调用该语句只会让我得到一个空游标。我还添加了方法

> cursor.moveToFirst()

并避免打电话

> myDataBase.close();

这是我试图在 TextView 上附加单个条目的方法：

```
private void getAdresses(Location location) { // TODO
    double lat = location.getLatitude();
    double lng = location.getLongitude();
    Geocoder geocoder = new Geocoder(this, Locale.GERMAN);

    try {
        List<Address> addresses = geocoder.getFromLocation(lat, lng, 1);
        if (addresses.size() != 0) {
            Address address = addresses.get(0);

            String addressString = address.getAddressLine(0).toString();
            System.out.println("(geocoder) " + addressString);
            textView.append(addressString + "\n");

            Cursor cursor = mDbHelper.getAllEntrys("tblBar", "Adresse",
                    addressString);

            if (cursor.moveToFirst()) {

                String cursorContent = cursor.getString(cursor
                        .getColumnIndexOrThrow("Name"));
                textView.append(cursorContent + "\n");

            } else {
                System.out.println("No bar at current location");
            }
        } else {
            System.out.println("(geocoder) no address!");
        }
    } catch (IOException e) {
        System.out.println(e.toString() + "(geocoder)");
    }
} 
```

此外，这是我在数据库上调用实际查询的方法：

```
public Cursor getAllEntrys(String table, String column, String search) {
    try {
        String sSelect = "SELECT * FROM " + table + " WHERE " + column
                + " = '" + search + "'";
        Cursor cursor = mDb.rawQuery(sSelect, null);

        if (cursor != null) {
            cursor.moveToFirst();
        }
        return cursor;
    } catch (SQLException mSQLException) {
        System.out.println("getData >>" + mSQLException.toString());
        throw mSQLException;
    }
} 
```

希望有人可以帮助我。提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:27:31.153

好的，首先我要感谢你们所有人的快速回复。保持！虽然答案很明显，但我自己想通了。教程中的问题来自：[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)是，它没有考虑您手动添加值的情况（SQLite 数据库浏览器中的更新）在您第一次运行程序后到您的数据库。这就是我所做的......所以你必须编写自己的方法来检查自上次运行以来是否有任何变化。希望任何人都可以需要这个:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T09:16:04.023

//这对我有用

```
final Cursor c = sampleDB.rawQuery("SELECT FirstName, LastName,RedId FROM " +
                SAMPLE_TABLE_NAME +
                " where RedId =  '"+a+"'", null);
        int count = c.getCount();

        if(count == 0){

            Toast.makeText(RetrieveData.this, "Not Found", Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:27:08.693

试试这个从你的数据库中获取单行。

在您的 Database 类中声明此方法。

```
 public Cursor selectSingleRecord(String tableName, String[] tableColumns,
        String whereClause, String whereArgs[], String groupBy,
        String having, String orderBy) {
    return myDataBase.query(tableName, tableColumns, whereClause, whereArgs,
            groupBy, having, orderBy);  

} 
```

并使用此方法获取光标。

如果我的表结构如下。

> _id | 姓名 | 地址

我会用下面的方式写

```
 String tableColumns[] = {"_id"}; // Here mansion the column which you want to retrieve I think in your case "addressString".
    String whereClause = {"Name"}; // Here use where clause

    Cursor cursor = dbHelper.selectSingleRecord("Your_Table_Name", tableColumns, whereClase +"=?" , new String[] {String.valueOf("NameOfPerson")}, null, null, null);

     // NameOfperson is the name which I am going to enter through EditText.
      if (cursor.moveToFirst())
        {            
              String getId = cursor.getString[0];  // Here you can get the id of respective person (i.e. the name which I have entered )                          
         }
        cursor.close();  // Finally close the curser 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:18:50.233

将您的 sSelect 更改为：有时在 SQL 中使用 like 'something' 比使用 = something 更好。

String sSelect = “SELECT * FROM” + 表格 + “WHERE” + 列 + “like '” + 搜索 + “'”；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T14:45:19.337

不知道这是否可能是问题，但是。. .

```
String sSelect = "SELECT * FROM " + table + " WHERE " + column
                + " = '" + search + "'"; 
```

当您的搜索变量为空时，您的查询将转换为：

> SELECT * FROM tblBar WHERE Adresse = 'null'

尝试改用它：

```
search = (search == null) ? " IS NULL " : " = '" + search +" '" ;

String sSelect = "SELECT * FROM " + table + " WHERE " + column + search; 
```

# hibernate - Grails 2.1：如何使用“模式导出导出”？

> ID：12109862
> 
> 赞同：1
> 
> 时间：2012-08-24T12:58:15.803
> 
> 标签：hibernate, grails, grails-2.0

我想（重新）使用命令“schema-export”创建我的数据库模式。DDL 生成工作正常，但如果我执行“模式导出导出”，我会收到以下错误，这表明配置文件中缺少某些内容。

```
grails> dev schema-export export
| Compiling 1 source files.....
Exporting in environment 'development' for the default DataSource
| Error 2012-08-24 14:45:57,466 [main] ERROR hbm2ddl.SchemaExport  - schema export unsuccessful
Message: No local DataSource found for configuration - 'dataSource' property must be set on LocalSessionFactoryBean
  Line | Method
->> 61 | doCall in SchemaExport$_run_closure1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
| Error 2012-08-24 14:45:57,472 [main] ERROR hbm2ddl.SchemaExport  - schema export unsuccessful
Message: No local DataSource found for configuration - 'dataSource' property must be set on LocalSessionFactoryBean
  Line | Method
->> 64 | doCall in SchemaExport$_run_closure1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
```

我的 DataSource.groovy 定义了一个“数据源”：

```
dataSource {
    pooled = true
    driverClassName = "com.mysql.jdbc.Driver"
}
...
environments {
    development {
        dataSource {
            username = "xxx"
            password = "yyy"
            url = "jdbc:mysql://localhost:3306/chrono_dev?autoreconnect=true"
        }
    }
    ...
} 
```

任何建议如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:45:23.220

语法有点不同：

```
grails dev schema-export // no export 
```

根据这个：

[http://grails.org/doc/2.1.0/ref/Command%20Line/schema-export.html](http://grails.org/doc/2.1.0/ref/Command%20Line/schema-export.html)

如果您正在进行导入，您可能需要描述数据源：

```
grails dev schema-export export --datasource=auditing 
```

另外，您要导入的 ddl 的名称是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:35:05.010

几点建议：

*   尝试在每个环境块中定义整个数据源（而不是让全局共享一个）。我以前在使用这种类型的设置时遇到过麻烦`DataSource.groovy`。
*   在数据源定义中为 MYSQL 添加方言行。`dialect=org.hibernate.dialect.MySQL5InnoDBDialect`
*   如果这些都不起作用，您总是可以分两步进行。`schema-export`将内容转储到文件中（没有“导出”选项），然后将其输出粘贴到 SQL 编辑器中并运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:15:34.353

我不确定为什么它现在有效，但确实有效。我已经切换到 Postgres，也许它与此有关。对不起，打扰你。

# vba - 如何检查变量是否有值？

> ID：12109863
> 
> 赞同：5
> 
> 时间：2012-08-24T12:58:23.057
> 
> 标签：vba, excel

**我有一个变量，其中包含用户选择的范围值。**

如何检查它是否有值？

我试过这些：

```
If variable_name.Value = Empty then ....

If variable_name.Value = " " then ... 
```

但这些只有在变量包含文本、数字或空格等数据时才有用。

任何的想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T13:21:04.197

取决于你在测试什么。

范围对象还是单元格值？

```
Sub test()

Dim rngObject As Range
Dim value As Variant

    Set rngObject = Sheet1.Range("A1:D5")

    If Not rngObject Is Nothing Then
    'If not nothing then run this code
    End If

    value = rngObject.Cells(1, 1).value
    If Not IsEmpty(value) Then
    'if Not empty then run this code
    End If

    If value <> vbNullString Then
    'if value is not nullstring then run this code
    End If

End Sub 
```

# hibernate - NHibernate 和 Memcached - 应该启用 use_minimal_puts 吗？

> ID：12109864
> 
> 赞同：13
> 
> 时间：2012-08-24T12:58:25.523
> 
> 标签：hibernate, nhibernate, caching, memcached, second-level-cache

我使用 NHibernate 和 Memcached 作为二级缓存，并且一直对`cache.use_minimal_puts`配置选项感到好奇。

根据文档：

> hibernate.cache.use_minimal_puts：优化二级缓存操作以最小化写入，代价是更频繁的读取。此设置对集群缓存最有用，并且在 Hibernate3 中，默认为集群缓存实现启用。

需要明确的是，我没有在集群环境中运行 Memcached，但它确实在远程机器上运行。另一个需要考虑的因素可能是读取和写入 Memcached 的速度是否存在重大差异。

`cache.use_minimal_puts`在这种情况下我会从启用中受益吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-12T13:29:06.523

我在 NHibernate 方面没有经验，但在 Hibernate 中使用过二级缓存，我被告知相同的概念适用于两者。

**提供参数hibernate.cache.use_minimal_puts**背后的基本思想是，在 hibernate 将对象放入缓存之前，它首先检查二级缓存是否已经存在该对象，如果不存在则只放在那里。

**仅**当从缓存读取的数据比数据更新便宜得多时，这才有用。这就是文档对以下内容的含义

> ...优化二级缓存操作以最小化写入，但以更频繁的读取为代价。

非常适合这种优化的情况是集群中的复制。

如果您使用集群，则 put 操作非常昂贵，因为它会在集群缓存的情况下激活缓存复制侦听器。如果你不使用集群，那么这个 put 操作相对来说非常便宜。

即使在集群的情况下，也可能存在依赖于实体失效而不是复制对它们所做的更改的缓存提供程序。在那种情况下，这个参数也是没用的。

影响性能的一个因素是 Memcache 使用的复制类型（同步或异步）。我没有使用过 MemCache，但 EhCache 支持这两种模型。

因此，在您的情况下，由于您**没有**使用集群并且虽然缓存位于远程进程上，但我严重怀疑将此参数设置为 true 是否会带来任何性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T17:11:19.877

只是为了添加更多细节。

`hibernate.cache.use_minimal_puts`, 设置这个值`true`可以防止它盲目的覆盖之前缓存的值，从而解决了集群缓存的问题。根据手册，它默认启用集群缓存实现。

`Hibernate`提供配置属性`hibernate.cache.use_minimal_puts`，通过增加缓存读取和减少缓存更新来优化集群缓存的缓存访问。

`CacheMode.REFRESH`会绕过`hibernate.cache.use_minimal_puts`效果

# ruby-on-rails - Rails 使用嵌套表单上传

> ID：12109866
> 
> 赞同：0
> 
> 时间：2012-08-24T12:58:42.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, carrierwave

当我尝试提交一个简单的嵌套表单时，Rails 给我一个错误：

```
NoMethodError in UserController#update
undefined method `[]' for #<ActionDispatch::Http::UploadedFile:0x3f4e318> 
```

参数是：

```
{
 "utf8"=>"✓",
 "authenticity_token"=>"HFWawKp4RH7+AFV0yQ1cXpzxHDfubKTKkiDiS6QKnJk=",
 "user"=> { 
  "name"=>"Alex",
  "pics_attributes"=> { 
    "pic"=>#<ActionDispatch::Http::UploadedFile:0x3f4e318
    @original_filename="Beautiful Sky_thumb.jpg",
    @content_type="image/jpeg",
    @headers="Content-Disposition: form-data; name=\"user[pics_attributes][pic]\"; filename=\"Beautiful Sky_thumb.jpg\"\r\nContent-Type: image/jpeg\r\n",
    @tempfile=#<File:C:/Users/Alex/AppData/Local/Temp/RackMultipart20120824-4784-5rmxid>>
  }
 },
"commit"=>"Save User"
} 
```

用户控制器#update

```
def update
 @user = User.new(params[:user])
 @user.save
end 
```

表单（它使用通用表单生成器。也许这会导致错误？）

```
<%= form_for :user, url: '/user/update', html: {multipart: true} do |user| %>
  <%= user.hidden_field :name, {value: 'Alex'} %>
  <%= user.fields_for :pics_attributes do |pic| %>
    <%= pic.file_field :pic %>
  <% end %>
  <%= user.submit %>
<% end %> 
```

用户模型

```
class User < ActiveRecord::Base
  attr_accessible :name, :pics_attributes
  has_many :pics
  accepts_nested_attributes_for :pics
end 
```

图片模型

```
class Pics < ActiveRecord::Base
  belongs_to :user
  attr_accessible :image
  mount_uploader :image, PicUploader
end 
```

在哪里挖掘错误？

上面的代码是针对 Carrierwave 的，但我尝试切换到 Paperclip 并且错误是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:15:46.417

你说你解决了它，但我认为你一开始就做错了。

您应该传递您在`nested_atributes_for`for中使用的相同值`fields_for`。因此 `user.fields_for :pics_attributes`应该是`user.fields_for :pics`。

# haskell - Haskell：理解部分应用？

> ID：12109867
> 
> 赞同：3
> 
> 时间：2012-08-24T12:58:48.830
> 
> 标签：haskell, currying

我正在阅读关于应用函子的[LYAH 章节](http://learnyouahaskell.com/functors-applicative-functors-and-monoids#applicative-functors)，但我似乎不理解以下示例：

```
ghci> :t fmap (++) (Just "hey")  
fmap (++) (Just "hey") :: Maybe ([Char] -> [Char]) 
```

但是当我看到这个时：

```
ghci> :t (++)
(++) :: [a] -> [a] -> [a]
ghci> :t fmap
fmap :: Functor f => (a -> b) -> f a -> f b 
```

我确实了解**(*3)**或**(++"this")**之类的内容如何适合**(a -> b)**类型，但我只是看不到**[a] -> [a] -> [a]**适合**(a -> b)**吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T13:11:29.473

关键是`->`关联到右边，所以一个like的类型`a -> b -> c`是真的`a -> (b -> c)`。所以`[a] -> [a] -> [a]`适合`c -> d`通过设置`c`~`[a]`和`d`~ `[a] -> [a]`。您可以将函数`[a] -> [a] -> [a]`视为返回类型结果的 2 个参数的`[a]`函数，或返回类型结果的 1 个参数的函数`[a] -> [a]`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T13:10:36.223

要意识到的是`b`in `a -> b`不一定是标量 - 它可以是一个函数。

`[a] -> [a] -> [a]`可以认为`[a] -> ([a] -> [a])`是`b``[a] -> [a]`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T13:22:54.857

像往常一样把东西并排放置，

```
fmap :: Functor f => ( a    ->      b      )   ->      f a        ->   f b
fmap                       (++)                    (Just "hey")   ::   f b
(++) ::               [c]   -> ([c] -> [c]) 
```

所以，

```
a ~ [c]  ,    b ~ ([c] -> [c])  ,    f ~ Maybe  ,    a ~ [Char]  ,   c ~ Char

f b ~ Maybe b ~ Maybe ([c] -> [c]) ~  Maybe ([Char] -> [Char]) 
```

这里不涉及任何思考。类型的统一是一个机械过程。

* * *

并回答您的具体问题（释义），*“如何`[c] -> [c] -> [c]`与`a -> b`”*匹配，这里是：

*   **在类型签名中省略括号是邪恶的**（在向新手教授 Haskell 时）
*   在 Haskell 中，**没有二进制函数**。每个函数都是一元的。
*   因此（正如其他人已经提到的），**类型签名中的箭头与 right 相关联**。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-24T13:09:56.057

这真的很简单:-)。让我添加一个简单的括号：

`[a]->[a]->[a]`就好像`[a]->([a]->[a])`

因此，它可以`a->b`通过替换 a by`[a]`和 b by来适应`[a]->[a]`。你给 ++ 一个字符串，然后你得到一个类型的函数作为`string->string`回报

`fmap (++) (Just "hey")` 是一个可能的 monad，它持有一个将字符串“hey”前缀到另一个字符串的函数。它确实是类型`Maybe ([Char] -> [Char])`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-24T13:13:58.683

考虑一下 Maybe 类型的 fmap 定义。

```
fmap f (Just x) = Just (f x) 
```

你的例子看起来像

```
fmap (++) (Just "Hey") = Just ("Hey" ++) :: Maybe ([Char] -> [Char]) 
```

正如 fmap 应该的那样，您只需在 Maybe 容器中解除 (++) 函数并将其应用于内容。

# c# - ADO.Net SQLCommand.ExecuteReader() 变慢或挂起

> ID：12109869
> 
> 赞同：10
> 
> 时间：2012-08-24T12:58:56.413
> 
> 标签：c#, .net, sql, sql-server, ado.net

环境：

应用程序（用 C# 为 .Net 4 编写）最多有 10 个线程，每个线程在其自己的 AppDomain 中运行。每个线程都使用 ADO.Net DataReader 从 SQL-Server 2008 上的存储过程中获取结果。线程也可以使用 ADO.Net 执行写入操作（批量插入）。一切都在本地机器上运行。

问题 1：

偶尔（大约每 30 次运行）线程的执行速度会急剧下降。这发生在 DataReader 获取存储过程结果 - SqlCommand.ExecuteReader() 时。通常读取操作在 10 秒内执行。当它变慢时，它会在 10-20 分钟内执行。SQLProfiler 显示正在查询数据，尽管速度很慢。

减速的调用栈（请注意没有异常）：

```
at SNIReadSync(SNI_Conn* , SNI_Packet** , Int32 )
   at SNINativeMethodWrapper.SNIReadSync(SafeHandle pConn, IntPtr& packet, Int32 timeout)
   at System.Data.SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()
   at System.Data.SqlClient.TdsParserStateObject.ReadBuffer()
   at System.Data.SqlClient.TdsParserStateObject.ReadByteArray(Byte[] buff, Int32 offset, Int32 len)
   at System.Data.SqlClient.TdsParserStateObject.ReadString(Int32 length)
   at System.Data.SqlClient.TdsParser.ReadSqlStringValue(SqlBuffer value, Byte type, Int32 length, Encoding encoding, Boolean isPlp, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.ReadSqlValue(SqlBuffer value, SqlMetaDataPriv md, Int32 length, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ReadColumnData()
   at System.Data.SqlClient.SqlDataReader.ReadColumnHeader(Int32 i)
   at System.Data.SqlClient.SqlDataReader.ReadColumn(Int32 i, Boolean setTimeout)
   at System.Data.SqlClient.SqlDataReader.GetValueInternal(Int32 i)
   at System.Data.SqlClient.SqlDataReader.GetValue(Int32 i)
   at System.Data.SqlClient.SqlDataReader.get_Item(String name)
   at ****.Core.TableDataImporter.ImportDataFromExcel(Int32 tableId, ExcelEntityLocation location, Boolean& updateResult) in … 
```

问题2：

而不是减慢线程可以挂起。

调用栈：

```
at SNIReadSync(SNI_Conn* , SNI_Packet** , Int32 )
   at SNINativeMethodWrapper.SNIReadSync(SafeHandle pConn, IntPtr& packet, Int32 timeout)
   at System.Data.SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()
   at System.Data.SqlClient.TdsParserStateObject.ReadBuffer()
   at System.Data.SqlClient.TdsParserStateObject.ReadByte()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader() 
```

调用堆栈是在后台线程中使用调试工具获取的。没有例外，无论是减速还是挂断。

SNIReadSync 是一种在网络级别工作的机制，用于通过网络传输数据包。我们已经在本地机器上重现了这个问题，从等式中消除了网络问题。

我们正在为这种减速/挂断寻找任何输入和解决方案或解决方法。现在我们计划检测减速并重新运行操作。提前致谢。

我根据要求为该方法附加了简化代码：

```
 public void ImportDataFromExcel()
    {            
        try
        {                
            var _сonnectionBuilk = ... ; // singleton connection (at the app level)
            var spName = ... ; // stored procedure name

        var сonnectionToRead = new SqlConnection(connectionStirng);
        сonnectionToRead.Open();

        var sqlCommand = new SqlCommand(spName);
        sqlCommand.CommandType = CommandType.StoredProcedure; 
        sqlCommand.Parameters.Add(param1Name, SqlDbType.Int).Value = ...;
        sqlCommand.Parameters.Add(param2Name, SqlDbType.Int).Value = ...;
        sqlCommand.Parameters.Add(param2Name, SqlDbType.Int).Value = ...;

        sqlCommand.Connection = сonnectionToRead;            
        sqlCommand.CommandTimeout = timeout; // 120 sec

        using (var dataReader = sqlCommand.ExecuteReader())
        {
                dataReader.Read();
            .....
            int pos1 = dataReader.GetOrdinal(columnName1);
            int pos2 = dataReader.GetOrdinal(columnName2);
            int pos3 = dataReader.GetOrdinal(columnName3);
            int pos4 = dataReader.GetOrdinal(columnName4);
                .....                    

            // reading data from sqldatareader
            int val1 = dataReader.GetInt32(pos1);
            int val2 = dataReader.GetInt32(pos2);
            int val3 = dataReader.GetInt32(pos3);
            var val4 = dataReader.GetDateTime(pos4);
            .....

            // append read data into bulkTable
            bulkTable.AddCellValue(val1, val2, val3, val4);  // bulkTable wraps DataTable, and appends DataRow inside. 

            if(bulkTable.DataTable.Rows > MaxRowsCount)
            {
                using (var bulkCopy = new SqlBulkCopy(_сonnectionBuilk))
                {
                    bulkCopy.DestinationTableName = _fullTableName;
                    bulkCopy.WriteToServer(bulkTable.DataTable);
                }

                var sqlCommandTransfer = new SqlCommand(spName);
                sqlCommandTransfer.CommandType = CommandType.StoredProcedure; 
                sqlCommandTransfer.Parameters.Add(param1Name, SqlDbType.Int).Value = ...;
                sqlCommandTransfer.Connection = _сonnectionBuilk;
                ....
                sqlCommandTransfer.ExecuteNonQuery(); // transfering data from temp bulk table into original table
            }
        }
    }
    finally
    {
        bulkTable.Dispose();
        сonnectionToRead.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:08:11.237

几个月来我们一直在尝试调试类似的问题，今天终于找到了它......

我们有一个查询被隐藏到缓存中（没有调用 ToList/ToArray/等）。该查询有效地绑定到一个已被清理的连接，我们得到了似乎是 100% CPU 阻塞的内容`ReadSni`（完整堆栈包括在下面）。

我怀疑缓存代码是在查询更改为使用 Linq 之前编写的（并且过去常常返回 a `List<T>`，但仍然转换为`IEumberable`），因此当有人使数据访问“惰性”时引入了它。

我无法解释为什么它在生产中每隔几天就会发生一次。要么缓存没有被大量使用，要么连接必须处于某种状态才能以这种方式失败。

```
OS Thread Id: 0x20b8 (27)
Child SP IP       Call Site
16edd0fc 6184267e System.Data.SqlClient.TdsParserStateObject.ReadSni(System.Data.Common.DbAsyncResult, System.Data.SqlClient.TdsParserStateObject)
16edd134 61842624 System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()
16edd144 618446af System.Data.SqlClient.TdsParserStateObject.ReadBuffer()
16edd150 61c583d0 System.Data.SqlClient.TdsParserStateObject.CleanWire()
16edd15c 61d1beb9 System.Data.SqlClient.TdsParser.Deactivate(Boolean)
16edd174 6184995f System.Data.SqlClient.SqlInternalConnectionTds.InternalDeactivate()
16edd180 61849640 System.Data.SqlClient.SqlInternalConnection.Deactivate()
16edd1b0 61849587 System.Data.ProviderBase.DbConnectionInternal.DeactivateConnection()
16edd1e4 61849405 System.Data.ProviderBase.DbConnectionPool.DeactivateObject(System.Data.ProviderBase.DbConnectionInternal)
16edd224 61849384 System.Data.ProviderBase.DbConnectionPool.PutObject(System.Data.ProviderBase.DbConnectionInternal, System.Object)
16edd26c 6184920c System.Data.ProviderBase.DbConnectionInternal.CloseConnection(System.Data.Common.DbConnection, System.Data.ProviderBase.DbConnectionFactory)
16edd2ac 618490f7 System.Data.SqlClient.SqlInternalConnection.CloseConnection(System.Data.Common.DbConnection, System.Data.ProviderBase.DbConnectionFactory)
16edd2c4 618393bf System.Data.SqlClient.SqlConnection.Close()
16edd304 11238f0a NHibernate.Connection.ConnectionProvider.CloseConnection(System.Data.IDbConnection)
16edd340 11238eae NHibernate.Connection.DriverConnectionProvider.CloseConnection(System.Data.IDbConnection)
16edd34c 11aceb42 NHibernate.AdoNet.ConnectionManager.CloseConnection()
16edd358 11aceb02 NHibernate.AdoNet.ConnectionManager.AggressiveRelease()
16edd364 11acf783 NHibernate.AdoNet.ConnectionManager.AfterTransaction()
16edd370 11acf6d1 NHibernate.Impl.SessionImpl.AfterTransactionCompletion(Boolean, NHibernate.ITransaction)
16edd3ec 11acf5de NHibernate.AdoNet.ConnectionManager.AfterNonTransactionalQuery(Boolean)
16edd3fc 11acf539 NHibernate.Impl.AbstractSessionImpl.AfterOperation(Boolean)
16edd474 130311e4 NHibernate.Impl.SessionImpl.List(NHibernate.IQueryExpression, NHibernate.Engine.QueryParameters, System.Collections.IList)
16ede51c 13031071 NHibernate.Impl.AbstractSessionImpl.List(NHibernate.IQueryExpression, NHibernate.Engine.QueryParameters)
16ede538 13030b68 NHibernate.Impl.ExpressionQueryImpl.List()
16ede568 13030a47 NHibernate.Linq.DefaultQueryProvider.ExecuteQuery(NHibernate.Linq.NhLinqExpression, NHibernate.IQuery, NHibernate.Linq.NhLinqExpression)
16ede59c 11d4c163 NHibernate.Linq.DefaultQueryProvider.Execute(System.Linq.Expressions.Expression)
16ede5b0 11d4c108 NHibernate.Linq.DefaultQueryProvider.Execute[[System.__Canon, mscorlib]](System.Linq.Expressions.Expression)
16ede5c4 11d4c0a6 Remotion.Linq.QueryableBase`1[[System.__Canon, mscorlib]].GetEnumerator()
16ede5d4 61022108 System.Linq.Enumerable+WhereEnumerableIterator`1[[System.__Canon, mscorlib]].MoveNext()*** WARNING: Unable to verify checksum for System.Core.ni.dll
*** ERROR: Module load completed but symbols could not be loaded for System.Core.ni.dll

16ede5e4 610166ea System.Linq.Buffer`1[[System.__Canon, mscorlib]]..ctor(System.Collections.Generic.IEnumerable`1<System.__Canon>)
16ede620 6122e171 System.Linq.OrderedEnumerable`1+<GetEnumerator>d__0[[System.__Canon, mscorlib]].MoveNext()
16ede63c 79b39758 System.Collections.Generic.List`1[[System.__Canon, mscorlib]]..ctor(System.Collections.Generic.IEnumerable`1<System.__Canon>)*** WARNING: Unable to verify checksum for mscorlib.ni.dll
*** ERROR: Module load completed but symbols could not be loaded for mscorlib.ni.dll

16ede66c 61021acf System.Linq.Enumerable.ToList[[System.__Canon, mscorlib]](System.Collections.Generic.IEnumerable`1<System.__Canon>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T22:17:03.943

因为代码在一段时间内可以完美运行，我们可以将其缩小到：

*   数据库锁定/阻止您的进程和其他进程。
*   仅从您的进程中锁定/阻止数据库。
*   网络连接。
*   数据的状态。
*   服务器上的磁盘空间或其他一些看似无关的问题。

我会说这可能是数据库锁定/阻塞问题。但是您确实需要确定这一点。去做这个：

*   确保数据库正在写入的磁盘空间 - 包括数据库日志和任何其他日志记录。
*   确保没有其他进程正在使用该数据库。
*   最好也使用本地数据库来消除网络问题。
*   您正在使用 .Net 4 - 因此，如果您使用的是 Tasks，那么使它们与重载同步运行将非常容易。这样做，看看问题是否仍然存在。

完成上述所有操作应该可以消除这些问题 - 您可以从那里开始进一步缩小范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T07:43:02.903

我遇到了同样的问题，经过几次测试后我解决了我的具体情况，但我认为它可能有用。

在我的系统中，我在 SQLServer 2008 上有一个复杂的 OLAP 引擎。多年来，操作的数量和数量都在增长，并且随机我得到了帖子中提到的错误……提高操作错误就消失了。我仔细检查了所有操作 OLAP 的代码，并且所有事务、连接和读取器对象都得到了完美的处理。

当我在 WHILE 循环中查询 SQLServer 时产生错误的关键点（但并非总是如此），查询的重复轰炸在 DB 中产生错误

Ho ristrutturato le molte piccole querys in una query più grandi(in termini di resultset) ed ho operato delleoperazioni attraverso LINQ, il risultato è stato soprendente。性能 di 10 volte migliorate e 0 errori。

我可以给出的建议是很好地分析代码的关键部分，甚至要非常小心地使用 Connections、DataReader 和 Transactions。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-16T20:13:59.810

我知道这个问题已经有 8 年历史了，但也许我的回答会帮助一些将来面临这个问题的可怜的开发人员:)

就我而言，这是数据库上的死锁，但不是很明显。当 sp_whoisactive 被执行时，它返回了许多被单个睡眠连接阻塞的行。最初我认为这可能是由于某些网络问题，但是在使用 windbg 进行了几个小时的测试并拔下网络电缆后，我仍然无法重现挂起。

最后，我注意到实际上有来自应用程序的 2 个来自阻止用户的连接：

*   暂停的，已经持有一些锁
*   另一个被另一个用户的连接阻止的。

事实证明：

1.  第一个连接打开，它锁定了数据库上的一些对象，但最后它通过 RAISERROR 命令收到异常
2.  同时出现来自其他应用程序的连接，在数据库上锁定了一些，但最后被第一个阻止了
3.  已经建立连接 nr.1 的应用程序使用 RequiresNew 事务选项打开了新的应用程序，然后被第二个连接阻止

此外，所有 3 个连接都是在 7 毫秒的时间窗口内建立的，这可以解释为什么几个月都没有这样的问题。

如果您遇到此问题，我建议使用 sp_whoisactive 过程 - [http://whoisactive.com](http://whoisactive.com) 您可以使用 @get_locks = 1 参数执行它，这将返回给定连接的所有锁定对象。这与调用堆栈相结合应该为您提供足够的信息来解决此问题。或者确定是否不是这种情况；）

# css - CSS，背景颜色/图像

> ID：12109871
> 
> 赞同：0
> 
> 时间：2012-08-24T12:58:58.737
> 
> 标签：css, background, fill

我想添加一些背景颜色来阻止 h1 标签，但我不想看到文本后面的背景。可能吗？

例如带有 (-) 的背景，它将如下所示：

欢迎 - - - - - - - - -

在文本之后用 (-) 填充

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:03:35.140

将标签声明`h1`为 as `inline-block`，并将其保存在`div`. 将所需的背景颜色`div`分配给 ，同时将白色背景分配给`h1`。你会得到想要的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:12:47.110

```
<style type="text/css">
h1 {
    width: 200px;
    background-image: url(line.png);
    background-repeat: repeat-x;
    background-position: left bottom;
}

h1 span {
    background-color: #FFF;
}
</style>

<h1><span>Welcome</span></h1> 
```

看这个例子：http: [//jsfiddle.net/WtPB5/2/](http://jsfiddle.net/WtPB5/2/)

# regex - 使用“prxchange”更改空格，但不是所有空格

> ID：12109872
> 
> 赞同：1
> 
> 时间：2012-08-24T12:58:59.243
> 
> 标签：regex, sas

我需要将文本中的空格更改为下划线，但只有单词之间的空格，而不是数字之间的空格，例如

```
"The quick brown fox 99 07 3475" 
```

会成为

```
"The_quick_brown_fox 99 07 3475" 
```

我尝试在数据步骤中使用它：

```
mytext = prxchange('s/\w\s\w/_/',-1,mytext); 
```

但结果不是我想要的

```
"Th_uic_row_ox 99 07 3475" 
```

关于我能做什么的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T15:30:58.597

```
Data One ;
X = "The quick brown fox 99 07 3475" ;
Y = PrxChange( 's/(?<=[a-z])\s+(?=[a-z])/_/i' , -1 , X ) ;
Put X= Y= ;
Run ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T15:18:58.123

当您想将“W W”更改为“W_W”时，您正在将“W W”更改为“_”

所以 prxchange('s/(\w)\s(\w)/$1_$2/',-1,mytext);

完整示例：

```
 data test;
mytext='The quick brown fox 99 07 3475';
newtext = prxchange('s/([A-Za-z])\s([A-Za-z])/$1_$2/',-1,mytext);
put _all_;
run; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T15:17:17.627

您可以使用 CALL PRXNEXT 函数查找每个匹配项的位置，然后使用 SUBSTR 函数将空格替换为下划线。我已将您的正则表达式更改为 \w 匹配任何字母数字字符，因此它应该在数字之间包含空格。我不确定您是如何使用该表达式获得结果的。无论如何，下面的代码应该给你你想要的。

```
data have;
mytext='The quick brown fox 99 07 3475';
_re=prxparse('/[a-z]\s[a-z]/i'); /* match a letter followed by a space followed by a letter, ignore case */
_start=1 /* starting position for search */;
call prxnext(_re,_start,-1,mytext,_position,_length); /* find position of 1st match */
    do while(_position>0); /* loop through all matches */
        substr(mytext,_position+1,1)='_'; /* replace ' ' with '_' for matches */
        _start=_start-2; /* prevents the next start position jumping 3 ahead (the length of the regex search string) */
        call prxnext(_re,_start,-1,mytext,_position,_length); /* find position of next match */ 
end;
drop _: ;
run; 
```

# javascript - 如何在Javascript中按顺序播放多个视频？

> ID：12109873
> 
> 赞同：0
> 
> 时间：2012-08-24T12:59:08.293
> 
> 标签：javascript

抱歉我的无知，但我开始使用 Javascript 编程，我想制作一个应用程序来顺序播放视频资产。我的应用程序项目如下：我有一个菜单和三个按钮来播放每个视频，我想为此添加 Javascript 代码，当用户单击（例如）第一个按钮然后是第二个按钮时，应用程序播放第一个和第二个视频按顺序播放，或者如果用户单击第二个和第三个按钮，应用程序将播放第二个和第三个视频资产等等，对于它，有人能告诉我如何用 Javascript 代码对其进行编程吗？希望你能理解我（对不起我的小英语）。提前致谢

亚历杭德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:04:59.263

看看这里的一些视频播放器：http: [//html5video.org/wiki/HTML5_Player_Comparison](http://html5video.org/wiki/HTML5_Player_Comparison)。

那里列出的大多数播放器都有 JavaScript API。

# java - 带有字节数组参数而不是 ASCII 的 PBEKeySpec

> ID：12109877
> 
> 赞同：14
> 
> 时间：2012-08-24T12:59:20.953
> 
> 标签：java, character-encoding, passwords, cryptography, ascii

我想知道是否有办法使用`PBEKeySpec`字节数组参数。

请找到以下文档的链接：

[http://docs.oracle.com/javase/1.7/docs/api/javax/crypto/spec/PBEKeySpec.html](http://docs.oracle.com/javase/1.7/docs/api/javax/crypto/spec/PBEKeySpec.html) )

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-23T07:01:51.910

下面是我的解决方案：我在谷歌上搜索了一下。请考虑我必须在内部复制密码和盐，因为当它们来自外部时它们具有另一种格式，但结果是相同的。似乎它有效并解决了密码为 byte[] 而不是 char[] 的问题（这让我发疯）我希望它有所帮助！干杯，苏斯塔

```
public class Pbkdf2 {

    public Pbkdf2() {
    }

    public void GenerateKey(final byte[] masterPassword, int masterPasswordLen,
                            final byte[] salt, int saltLen,
                            int iterationCount, int requestedKeyLen,
                            byte[] generatedKey) {

        byte[] masterPasswordInternal = new byte[masterPasswordLen];
        System.arraycopy(masterPassword, 0, masterPasswordInternal, 0, masterPasswordLen);
        byte[] saltInternal = new byte[saltLen];
        System.arraycopy(salt, 0, saltInternal, 0, saltLen);

        SecretKeySpec keyspec = new SecretKeySpec(masterPasswordInternal, "HmacSHA1");
        Mac prf = null;
        try {
            prf = Mac.getInstance("HmacSHA1");
            prf.init(keyspec);
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (InvalidKeyException e) {
            e.printStackTrace();
        }

        int hLen = prf.getMacLength();   // 20 for SHA1
        int l = Math.max(requestedKeyLen, hLen); //  1 for 128bit (16-byte) keys
        int r = requestedKeyLen - (l - 1) * hLen;      // 16 for 128bit (16-byte) keys
        byte T[] = new byte[l * hLen];
        int ti_offset = 0;
        for (int i = 1; i <= l; i++) {
            F(T, ti_offset, prf, saltInternal, iterationCount, i);
            ti_offset += hLen;
        }

        System.arraycopy(T, 0, generatedKey, 0, requestedKeyLen);
    }

    private static void F(byte[] dest, int offset, Mac prf, byte[] S, int c, int blockIndex) {
        final int hLen = prf.getMacLength();
        byte U_r[] = new byte[hLen];
        // U0 = S || INT (i);
        byte U_i[] = new byte[S.length + 4];
        System.arraycopy(S, 0, U_i, 0, S.length);
        INT(U_i, S.length, blockIndex);
        for (int i = 0; i < c; i++) {
            U_i = prf.doFinal(U_i);
            xor(U_r, U_i);
        }

        System.arraycopy(U_r, 0, dest, offset, hLen);
    }

    private static void xor(byte[] dest, byte[] src) {
        for (int i = 0; i < dest.length; i++) {
            dest[i] ^= src[i];
        }
    }

    private static void INT(byte[] dest, int offset, int i) {
        dest[offset + 0] = (byte) (i / (256 * 256 * 256));
        dest[offset + 1] = (byte) (i / (256 * 256));
        dest[offset + 2] = (byte) (i / (256));
        dest[offset + 3] = (byte) (i);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-21T16:43:12.897

我必须实现一个两阶段的 pbkdf2 推导（所以第二个 pbkdf2 有来自第一个的字节作为输入）。我最终使用了[BouncyCastle](https://www.bouncycastle.org/latest_releases.html)，因为我无法将字节数组转换为字符数组体操工作。从另一个问题归功于 Pasi：Reliable [implementation](https://stackoverflow.com/users/504811/pasi) [of PBKDF2-HMAC-SHA256 for JAVA](https://stackoverflow.com/questions/22580853/reliable-implementation-of-pbkdf2-hmac-sha256-for-java)

```
import org.bouncycastle.crypto.generators.PKCS5S2ParametersGenerator;
import org.bouncycastle.crypto.digests.SHA256Digest;
import org.bouncycastle.crypto.digests.GeneralDigest;
import org.bouncycastle.crypto.params.KeyParameter;

GeneraDigest algorithm = new SHA256Digest();
PKCS5S2ParametersGenerator gen = new PKCS5S2ParametersGenerator(algorithm);
gen.init(passwordBytes, salt, iterations);
byte[] dk = ((KeyParameter) gen.generateDerivedParameters(256)).getKey(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:21:17.557

由于 Java PKCS#5`KeyFactory`已指定仅使用 中字符的低 8 位，因此`PBEKeySpec`您应该能够毫无问题地将字节数组转换为（16 位）字符数组。只需将每个字节的值复制到字符数组中，您就应该进行设置。

可以肯定的是，我将`charArray[i] = byteArray[i] & 0xFF`作为赋值语句执行，否则您将获得非常高价值的字符。

这是一个丑陋的解决方法，但我看不出它不应该工作的任何理由。

* * *

请注意，以上假设值 0x80 及以上的[拉丁文/Windows 1252 兼容编码](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block))。如果您允许 0x80 到 0xFF 的代码点，那么您不能使用 UTF-8（当然也可以是 UTF-16）作为编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-15T22:17:04.997

我能够使用 3rd 方库并扩展他们的一个类来做到这一点。

这是我使用的 RFC 2898 实现库： [http ://www.rtner.de/software/PBKDF2.html](http://www.rtner.de/software/PBKDF2.html)

我的代码：

```
import de.rtner.security.auth.spi.PBKDF2Engine;
import de.rtner.security.auth.spi.PBKDF2Parameters;

public class PBKDF2Utils {

    private static class PBKDF2EngineWithBinaryPassword extends PBKDF2Engine {

        private PBKDF2EngineWithBinaryPassword(PBKDF2Parameters parameters) {
            super(parameters);
        }

        public byte[] deriveKey(byte[] inputPassword, int dkLen) {
            this.assertPRF(inputPassword);
            return this.PBKDF2(prf, parameters.getSalt(), parameters.getIterationCount(), dkLen);
        }
    }

    public static byte[] deriveKey(
            byte[] password, 
            byte[] salt,
            int iterationCount, 
            int dkLen) {

        PBKDF2Parameters parameters = new PBKDF2Parameters("HmacSHA1", null, salt, iterationCount);

        PBKDF2EngineWithBinaryPassword engine = new PBKDF2EngineWithBinaryPassword(parameters);

        return engine.deriveKey(password, dkLen);
    }
} 
```

# xml - 遍历数组并根据优先级进行选择

> ID：12109879
> 
> 赞同：1
> 
> 时间：2012-08-24T12:59:24.940
> 
> 标签：xml, xslt, xpath, xsl-fo

第一次在这里发帖！

好的..我有一个联系XML如下：

```
<contact>
  <item>
    <ContactData type="String">+4444444444</ContactData>
    <Type type="String">1</Type>
  </item>
  <item>
    <ContactData type="String">+9999999999</ContactData>
    <Type type="String">3</Type>
  </item>
  <item>
    <ContactData type="String">anyone123452154@gmail.com</ContactData>
    <Type type="String">4</Type>
  </item>
  <item>
    <ContactData type="String">+5554444444</ContactData>
    <Type type="String">2</Type>
  </item>
</contact> 
```

如您所见，类型 4 是电子邮件，类型 1 是电话号码，类型 2 是传真，类型 3 是手机号码。

所以这是我的场景：

我（可能）需要遍历所有这些节点。检查是否有电话号码（最高优先级）并选择它。如果没有电话号码，我们需要检查手机号码（第二高优先级）。如果手机号码不可用，我们会选择电子邮件（或者我们什么也不做）。我怎样才能实现它？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:14:26.983

类似于 Tim C 的答案，但附加要求仅返回 Type 1、Type 3 或 Type 4 项目。

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="contact">
        <xsl:variable name="vContacts">
            <xsl:apply-templates select="item[Type='1' or Type='3' or Type='4']">
                <xsl:sort select="Type"/>
            </xsl:apply-templates>                          
        </xsl:variable>
        <results><xsl:value-of select="$vContacts/item[1]/ContactData"/></results>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<results>+4444444444</results> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:00:53.623

**实现此目的的一种方法是简单地使用xsl:for-each**遍历**item**元素，并对**Type**元素的值进行排序。然后你可以简单地选择第一个元素。

 ****这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text" indent="yes"/>

   <xsl:template match="contact">
      <xsl:for-each select="item[ContactData != '']">
         <xsl:sort select="Type" order="ascending" />
         <xsl:if test="position() = 1">
            <xsl:value-of select="ContactData" />
         </xsl:if>
      </xsl:for-each>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
+4444444444 
```

如果您要清空电话号码，它应该返回手机号码。也将其空白，并返回电子邮件地址。

编辑：如果您需要排除传真号码，您可以将**xsl:for-each**更改为以下内容：

```
<xsl:for-each select="item[Type != '2'][ContactData != '']"> 
```

或者，如果您只想明确说明电话、手机或电子邮件，那么您可以执行以下操作

```
<xsl:for-each select="item[Type = '1' or Type = '3' or Type = '4'][ContactData != '']"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T04:39:46.110

**这可以通过单个 XPath 表达式获得——您根本不需要 XSLT**：

```
 ( /*/item[Type = 1]
   |
    /*[not(item[Type = 1])]/item[Type = 3]
   |
    /*[not(item[Type = 1 or Type = 3])]/item[Type = 4]
    )
     /ContactData/text() 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "(/*/item[Type = 1]
   |
    /*[not(item[Type = 1])]/item[Type = 3]
   |
    /*[not(item[Type = 1 or Type = 3])]/item[Type = 4]
    )
     /ContactData/text()"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<contact>
  <item>
    <ContactData type="String">+4444444444</ContactData>
    <Type type="String">1</Type>
  </item>
  <item>
    <ContactData type="String">+9999999999</ContactData>
    <Type type="String">3</Type>
  </item>
  <item>
    <ContactData type="String">anyone123452154@gmail.com</ContactData>
    <Type type="String">4</Type>
  </item>
  <item>
    <ContactData type="String">+5554444444</ContactData>
    <Type type="String">2</Type>
  </item>
</contact> 
```

**计算 XPath 表达式并将所选节点复制到输出：**

```
+4444444444 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T09:55:56.337

或者，如果您有 XPath 2.0，您可以按照优先级的顺序编写您想要的类型`(1,3,4)`，遍历这些类型并选择第一个存在的类型：

```
/contact/(for $i in (1,3,4) return item[Type = $i])[1]/ContactData/text() 
```

或者使用展开的循环：

```
/contact/(*[Type = 1], *[Type = 3], *[Type = 4])[1]/ContactData/text() 
```****

# php - php - 告诉浏览器“取消缓存”一个 php 生成的图像

> ID：12109882
> 
> 赞同：0
> 
> 时间：2012-08-24T12:59:31.717
> 
> 标签：php, caching

我需要缓存 php 生成的图像，但图像的内容（必须具有相同的 URL）可以更改。发生这种情况时，浏览器应该“取消缓存”旧图像并缓存新图像。但是，如果原始图像被缓存，浏览器不会向服务器发送请求。要缓存图像，我使用这个：

```
header("Cache-Control: private, max-age=10800, pre-check=10800");
header("Pragma: private");
header("Expires: " . date(DATE_RFC822,strtotime(" 2 day")));
if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) 
       && 
  (strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == filemtime($file))) {
  header('Last-Modified: '.gmdate('D, d M Y H:i:s', filemtime($file)).' GMT', 
  true, 304);
  exit;
} 
```

由于用户通过 ajax 和 JSON 获取所有内容，我不能（我可以，但它会使响应变大）指定哪个图像是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:02:50.047

您可以使用[ETag](https://en.wikipedia.org/wiki/HTTP_ETag)。
但是......这仍然需要一个http请求和一个“部分”响应。

# django - Django注册：登录后重定向

> ID：12109886
> 
> 赞同：0
> 
> 时间：2012-08-24T12:59:53.160
> 
> 标签：django, django-urls, django-generic-views

我正在使用 django 注册，我想在登录后被重定向到另一个页面。我在settings.py中使用过：

```
LOGIN_REDIRECT_URL = 'http://127.0.0.1:8000/home/' 
```

这就是我想要重定向到的页面。

我成功重定向。但是主页必须显示我数据库中的一些元素，并且什么都没有。元素存在于数据库中（我检查过）。

请问有什么想法吗？泰

我的第一个 url conf（django 的 url conf）=> urls.py

```
urlpatterns = patterns('',
    url(r'^accounts/', include('dashboard.registration.backends.simple.urls')),
    url(r'^home/$', direct_to_template,{ 'template': 'index.html' }, 'index'),
url(r'^home/', include(dashboard.home.urls)),
url(r'^admin/', include(admin.site.urls)),
) 
```

我的第二个 url conf (dashboard.home.urls)

```
urlpatterns = patterns('dashboard.home.views',
    url(r'^$',index,name='index'),
) 
```

我在 dashboard.home.views 中的索引请求

```
def index(request):
    print 'index request'
    project_list = Project.objects.all().order_by('project_name')
    return render_to_response('index.html',{'project_list': project_list}) 
```

我的模板 index.html

```
<body>
{% if user.is_authenticated %}
    <p>Welcome, {{ user.username }}. Thanks for logging in.</p>

    <h3>Home</h3>
    <ul>
    <li><a href="Add_Project/">Add a Project</a></li>

    </ul>

    <h3>Project list</h3>
    {% if project_list %}
        <ul>
        {% for project in project_list %}
            <li> <a href={{project.project_name}}>{{ project.project_name }}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        <p>There are no Projects</p>
    {% endif %} 

{% else %}
    <p>Welcome, new user. Please log in.</p>
{% endif %}
</body> 
```

我的设置.py

```
LOGIN_REDIRECT_URL = 'http://127.0.0.1:8000/home/' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:23:33.207

```
url(r'^home/$', direct_to_template,{ 'template': 'index.html' }, 'index'),
url(r'^home/', include(dashboard.home.urls)), 
```

Django 将在第一次匹配时停止，因此如果 url 为`/home/`. 只有第一个模式会匹配，并`index.html`会显示出来。

你也应该通过`RequestContext`，最简单的方法是使用[`render`](http://dango.me/render)快捷方式。

```
from django.shortcuts import render

def index(request):
    project_list = Project.objects.all().order_by('project_name')
    return render(request,'index.html',{'project_list': project_list}) 
```

In addition make sure you have not removed `"django.contrib.auth.context_processors.auth"` from `TEMPLATE_CONTEXT_PROCESSORS` (its there by default, unless you removed it).

EDIT:

> I tried, I have the project list because I print it on console. But I have not the project list on my page.

Your project list will only print if you have a valid user; if you are logged in as guest, then your project list won't print anything.

Try this as your template:

```
<body>
{% if user.is_authenticated %}
    <p>Welcome, {{ user.username }}. Thanks for logging in.</p>
{% else %}
    <p>Welcome, new user. Please log in.</p>
{% endif %}

    <h3>Home</h3>
    <ul>
    <li><a href="Add_Project/">Add a Project</a></li>

    </ul>

    <h3>Project list</h3>
    {% if project_list %}
        <ul>
        {% for project in project_list %}
            <li> <a href={{project.project_name}}>{{ project.project_name }}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        <p>There are no Projects</p>
    {% endif %} 

</body> 
```

And adjust your `index` method:

```
from django.shortcuts import render
from django.contrib.auth.decorators import login_required

@login_required
def index(request):
    project_list = Project.objects.all().order_by('project_name')
    return render(request,'index.html',{'project_list': project_list}) 
```

# android - 在可扩展列表视图中将列表视图用作子视图的建议

> ID：12109888
> 
> 赞同：0
> 
> 时间：2012-08-24T12:59:57.920
> 
> 标签：android, listview, nested, expandablelistview

我有一个可扩展的 ListView

```
<ExpandableListView
     android:id="@+id/expandableListView1"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_weight="1" >
 </ExpandableListView> 
```

和组的自定义布局

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="5dip"
        android:paddingTop="5dip"
        android:tag="tank" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingLeft="6dip"
            android:text="123" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="1000" />
    </LinearLayout> 
```

和孩子的自定义布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingLeft="25dip"
            android:text="This is the number" />

        <TextView
            android:id="@+id/text1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center_horizontal"
            android:text="3.38672" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/linearLayout1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/hrzntl"
        android:layout_width="fill_parent"
        android:layout_height="2dip"
        android:layout_weight="1"
        android:background="#696969" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/linearLayout2"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center_horizontal"
            android:text="Strap"
            android:textStyle="bold" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout4"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/linearLayout3"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center_horizontal"
            android:text="height" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="volume" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout5"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/linearLayout4"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/hrzntl"
        android:layout_width="fill_parent"
        android:layout_height="2dip"
        android:layout_weight="1"
        android:background="#696969" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/linearLayout5"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

和 listView 的自定义布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:layout_weight="1"
    android:text="TextView" />

<TextView
    android:id="@+id/text2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="TextView" /> 
```

如何使用扩展 BaseExpandableListAdapter 的自定义类来填充它？

```
public class ExpandableListAdapter extends BaseExpandableListAdapter{

@Override
public Object getChild(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getChildId(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int getChildrenCount(int groupPosition) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public Object getGroup(int groupPosition) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int getGroupCount() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public long getGroupId(int groupPosition) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return false;
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:04:16.277

用于`LayoutInflater`膨胀并返回您想要的组`getGroupView()`布局和您想要的孩子布局`getChildView()`。

# asp.net - 如何在页面上修复 asp.net 诊断跟踪的位置

> ID：12109897
> 
> 赞同：0
> 
> 时间：2012-08-24T13:00:29.550
> 
> 标签：asp.net

我在我的一个 asp.net 页面上使用[诊断跟踪。](http://www.codeproject.com/Articles/82290/Step-by-Step-Guide-to-Trace-the-ASP-NET-Applicatio)它有点工作，但跟踪数据绘制在我的页面上：这使得无法再使用该页面，也无法正确读取跟踪。

我使用母版页。但是我想这与css样式有关，但是如何在不改变客户样式的情况下以及在所有页面上使用可能不同的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:02:44.043

除了我，似乎没有人有这个问题？至少差不多：[Jeffrey McManus 的博客](http://blog.jeffreymcmanus.com/29/using-css-p-with-aspnet-trace-mode/)帮助了我。

我现在在我放置的母版页上使用修改后的方法

```
<!-- styles to make the trace output work-->
<style>
  #__asptrace  
  {
    position: relative;
    top: 900px;
    left: 0px;
  }
</style> 
```

用最高值和位置类型玩一点，你就设置好了。

# java - 为什么这发生在java中？

> ID：12109905
> 
> 赞同：1
> 
> 时间：2012-08-24T13:00:42.880
> 
> 标签：java

> **可能重复：**
> [带前导零的整数](https://stackoverflow.com/questions/565634/integer-with-leading-zeroes)

我对 Java 很陌生。我这样做了：

```
System.out.println(01111); 
```

打印`4680`。为什么没有打印出来`01111`？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T13:02:30.950

如果要打印*字符串*“01111”，请将其放在引号中。这就是在 Java 中指定字符串的方式。

没有十进制数 01111，所以试图打印出十进制数 01111 是不可能的。

您得到 4680 的原因是，在 Java 源代码中，数字常量前的前导零表示该数字以八进制指定，而数字以十进制打印。11110 八进制 = 4680 十进制。（你必须这样做`01110`才能得到 4680，`01111`本来会给你 585。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:03:04.487

它打印 585，而不是 4680。

[`0`以八进制数字开头的整数文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1-500)。所以 1111 是 585 的八进制表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:04:35.017

以 0 开头的整数表示它是[八进制数字](http://en.wikipedia.org/wiki/Octal)文字，因此您的数字是`1*8^3+1*8^2+1*8^1+1*8^0`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:02:47.067

因为 0 前缀表示八进制整数（以 8 为基数）。因此，八进制 1111 是十进制 585。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T13:05:38.687

这是您尝试打印的数字的[八进制表示。](http://en.wikipedia.org/wiki/Octal)你应该得到的输出是`"585"`而不是`"4680"`。

# python - ddof = 1 的 numpy 标准差估计器偏差

> ID：12109908
> 
> 赞同：4
> 
> 时间：2012-08-24T13:00:45.553
> 
> 标签：python, numpy, statistics

我正在用 numpy 生成一堆 N 正常 rvs（平均 0 sd 1），然后用 ddof = 1 取样本的标准偏差，这大概应该给我一个无偏的估计量。流程大致如下：

```
def genData(samples = 20, mean = 333.8, sd = 3.38):
    bl = scipy.stats.norm.rvs(loc = mean, scale = sd, size = samples)
    return [np.mean(bl), np.std(bl, ddof = 1)]

means = {}
sds = {}

n = 50000

for size in range(5,21):
    x = [genData(size, mean = 0, sd = 1) for x in range(n)]
    means[size] = map(lambda d: d[0], x)
    sds[size] = map(lambda d: d[1], x) 
```

但是，我改为观察以下 KDE：

ddof = 1 ![ddof = 1 时的 KDE](../Images/d875e26945dea827cd09f0071fd2caf9.png) ddof = 2 ![ddof = 2 时的 KDE](../Images/f6a6c99463f18b27470a1889a5a59ea3.png) 由于样本量小，请原谅粗糙的曲线。

ddof = 1 有明显的偏差，ddof = 2 消除了偏差。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:10:53.307

无偏方差估计量的平方根不一定是方差平方根的无偏估计量。在数学术语中，sum[(su)²]/(N-1) 是方差 V 的无偏估计量，即使 sqrt{sum[(xu)²]/(N-1)} 不是 sqrt 的无偏估计量（五）。

这实际上在 scipy 的文档中：[链接](http://docs.scipy.org/doc/numpy/reference/generated/numpy.std.html)（请参阅“注释”部分）。

# blackberry - 运行时存储示例

> ID：12109911
> 
> 赞同：0
> 
> 时间：2012-08-24T13:00:55.330
> 
> 标签：blackberry

谁能给我一个如何在黑莓中使用运行时商店的例子？

我从 xml 中获取数据，如下所示。

谁能给我示例代码以将以下节点数据存储到运行时存储中并在其他类中访问这些值？

```
 <upcomingmeeting id="2">
                    <starttime>02:00pm </starttime>
                    <companyname>Qtech Software</companyname>
                    <meetingtype>New Agent</meetingtype>
                    <meetingwith>
                         <person>Yogesh</person>
                         <person>Mahesh </person>
                         <person>Ganesh </person>
                     </meetingwith>
                     <meetingnote>
                         <information>Yogesh good</information>
                         <information>Yogesh 1 bad</information>
                     </meetingnote>
                </upcomingmeeting> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:04:46.997

仔细阅读文章以[非持久性方式存储对象。](http://docs.blackberry.com/en/developers/deliverables/17952/Storing_objects_nonpersistently_1219788_11.jsp)

上述文章的以下两节将展示如何在上面存储`String`对象`RuntimeStore`并稍后检索对象。

[代码示例：在运行时存储中存储字符串](http://docs.blackberry.com/en/developers/deliverables/17952/CS_Storing_a_string_in_the_runtime_store_1554332_11.jsp)

[代码示例：从运行时存储中获取存储的字符串](http://docs.blackberry.com/en/developers/deliverables/17952/CS_Getting_a_stored_string_from_the_runtime_store_1554333_11.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:52:06.010

您需要先学习解析 XML 按照此链接了解如何从 Http Request 解析 XML。

```
http://stackoverflow.com/questions/11901822/xml-parsing-using-sax-for-blackberry/11914662#11914662 
```

在解析 XML 时，您可以将其数据解析为 Vector，在单独的类中创建此 Vector，您也可以通过该类将其值访问到任何其他类。

# facebook - 如何在magento的LAYOUT.xml中添加facebook og：meta标签？

> ID：12109912
> 
> 赞同：4
> 
> 时间：2012-08-24T13:00:57.753
> 
> 标签：facebook, magento, facebook-graph-api, facebook-sharer

我想在特定页面的头部插入 Facebook og:meta 标签以用于 facebook 共享，并且此页面不是 CMS 页面。我正在考虑通过该扩展布局文件添加这些标签。我知道正常的标题和描述是这样添加的->

```
<reference name="head">
        <action method="setTitle"><title>My Module Page</title></action>   
 </reference> 
```

magento 是否为 Facbook og:meta 标签提供了类似的东西？如果没有，将 og:meta 标签放在页面头部以便它与 facebook 共享器一起使用的另一种方法是什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-19T05:04:55.673

```
<reference name="head">
    <block type="core/text" name="blockname">
        <action method="setText">
            <text>
                <![CDATA[<meta property="og:image" content="http://example.com/image.jpg"/>]]>
            </text>
        </action>
    </block>
</reference> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T13:50:44.807

Magento 不包含包含这些元标记的操作。相反，您可以创建一个包含元标记的模板文件 (/app/design/frontend/mypackage/mytheme/page/html/facebookmeta.phtml)。

然后，将以下内容添加到您的`head`参考中：

```
<block type="core/template" name="facebookmeta" template="page/html/facebookmeta.phtml" /> 
```

清除缓存，您应该会看到您的块被包含在该特定页面的头部中。这不是一个特别可扩展的解决方案，如果您想将选项传递给此模板，您应该真正创建一个新块，这需要创建一个新模块等。

但是，在您的模板文件中，您可以使用 PHP，因此您应该能够获得所需的各种变量，例如：

```
<meta property="og:site_name" content="<?php echo Mage::app()->getStore()->getName() ?>"/> 
```

希望这可以帮助。

# performance - SVN ls 命令超级慢

> ID：12109921
> 
> 赞同：2
> 
> 时间：2012-08-24T13:01:41.373
> 
> 标签：performance, svn, memcached, fsfs

**svn ls -v**怎么可能比普通的**svn ls 长约**250 倍？

即使使用 file:// 模式，我使用哪种传输似乎也没有什么区别。我也尝试启用 memcached，但也没有任何改进。

有趣的是在顶层目录中这个命令是最慢的，我越深入它得到的越快。目录中有多少项目似乎并不重要。

我对客户端和服务器都使用 svn 版本 1.7.1。和 FSFS 回购格式。

这里的时间

```
svn ls -v svn://trac/koh/  0.01s user 0.01s system 0% cpu 39.960 total
svn ls svn://trac/koh/  0.00s user 0.02s system 6% cpu 0.243 total 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:16:32.350

有可能`svn ls`能够在本地使用工作目录中的信息，而`svn ls -v`必须返回服务器以获取所需的信息。它也可能是要查询的信息量。`svn ls`只需要文件名，同时也`svn ls`需要修订和最后作者。

但是，我没有发现时间要长 250 倍：

```
$ time svn ls

real    0m0.514s
user    0m0.046s
sys     0m0.061s

$ time svn ls -v

real    0m0.530s
user    0m0.000s
sys     0m0.109s 
```

这发生在所有客户端上还是仅发生在您所在的机器上？这是 Windows 还是 Unix/Linux？您要列出的目录有多大？当您执行 时，工作目录中是否有更改`svn ls`？或者，您是否一直在使用 URL，所以它必须转到服务器？您是否注意到其他任何速度问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-24T12:05:42.593

我发现“svn ls -v svn://svn”会导致“get-locks”服务器日志消息，这是花费时间的地方。我们的存储库文件系统是 NFS。许多“getattr”和“lookup”NFS 调用发生。所以出于某种原因，SVN 服务器正在为获取锁做很多属性获取。

我还没找到这是什么原因...

# javascript - html图像映射和悬停css

> ID：12109924
> 
> 赞同：1
> 
> 时间：2012-08-24T13:01:58.907
> 
> 标签：javascript, jquery, html, css, imagemap

我正在处理以前的开发人员在导航中创建的图像地图。它将以英国地图为特色，分割成区域，以导航到网站的部分区域。以前的开发人员使用了 img 地图，但图像地图没有正确使用 css，因为图像地图是一种遗留方法。

下面是代码

```
<style type="text/css">

#map a {
    cursor: hand;
}

</style>

<div id="mapimage"><img src="ukmap.gif" USEMAP="#map" TYPE="image/png" TITLE="Join your local network" WIDTH=294 HEIGHT=486></div>

 <map id="map" name="map">

    <area shape="poly" id="northern" alt="Northern" title="Northern" coords="123,248,134,271,139,294,141,301,156,321,167,317,183,307,180,288,188,298,205,302,225,290,239,289,248,274,211,229,199,208,176,170,168,170,148,207,123,238" href="#" target="" />

    <area id="wales" shape="poly" alt="Wales" title="Wales" coords="100,302,92,332,110,338,111,355,64,374,88,400,133,398,154,404,164,384,161,372,144,364,145,344,154,321,143,302,103,293" href="#" target="" />

    <area id="westmidlands" shape="poly" alt="West Midlands" title="West Midlands" coords="181,368,195,360,206,351,189,326,182,305,149,321,142,358,147,369,163,376" href="#" target="" />

    <area id="eastmidlands" shape="poly" alt="East Midlands" title="East Midlands" coords="215,365,233,341,233,328,254,320,238,284,210,293,192,304,177,290,184,320,204,353,203,366" href="#" target="" />

    <area id="london" shape="poly" alt="London" title="London" coords="227,385,235,398,244,402,255,391,259,384,239,379,230,383" href="#" target="" />

    <area id="east" shape="poly" alt="East" title="East" coords="260,315,287,316,288,364,271,389,259,390,246,377,225,382,222,368,217,357,235,327" href="#" target="" />

    <area id="southwest" shape="poly" alt="South West" title="South West" coords="61,468,88,475,104,456,139,462,153,437,180,441,192,436,196,396,188,363,162,375,152,405,142,404,109,408,87,440" href="#" target="" />

    <area id="southeast" shape="poly" alt="South East" title="South East" coords="209,445,224,429,259,429,284,409,276,386,254,391,241,405,226,388,215,363,194,369,199,401,192,436" href="#" target="" />

    <area id="northernireland" shape="poly" alt="Northern Ireland" title="Northern Ireland" coords="46,270,56,267,81,244,58,215,33,203,1,237,0,252,9,268" href="#" target="" />

</map> 
```

我们需要每个区域在悬停时改变颜色。最好使用绝对定位的 div 和 ul/li 重新编写它。或者是否可以在鼠标悬停时使用 jquery/javascript 更改 ukmap.gif？因为那时我可以拥有相同的图像，但不同区域的颜色被阻挡，并更改图像以模仿 css：悬停，我不想破坏以前人们的工作，同时如果一个简单的 jquery hack 可以选择这些，我不想浪费时间重写它

```
<html>
<head>
<style type="text/css">

#map a {
    cursor: hand;
}

</style>
<script src="http:////ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<body>

    <script>
$('#mapimage').mapster(
    { 
        fillColor: 'ff0000'
    });​
</script>

<div>
    <img id="mapimage" src="images/map-complete.gif" USEMAP="#map" TYPE="image/png" TITLE="Join your local network" WIDTH=294 HEIGHT=486></div>

 <map id="map" name="map">

    <area shape="poly" id="northern" alt="Northern" title="Northern" coords="123,248,134,271,139,294,141,301,156,321,167,317,183,307,180,288,188,298,205,302,225,290,239,289,248,274,211,229,199,208,176,170,168,170,148,207,123,238" href="#" target="" />

    <area id="wales" shape="poly" alt="Wales" title="Wales" coords="100,302,92,332,110,338,111,355,64,374,88,400,133,398,154,404,164,384,161,372,144,364,145,344,154,321,143,302,103,293" href="#" target="" />

    <area id="westmidlands" shape="poly" alt="West Midlands" title="West Midlands" coords="181,368,195,360,206,351,189,326,182,305,149,321,142,358,147,369,163,376" href="#" target="" />

    <area id="eastmidlands" shape="poly" alt="East Midlands" title="East Midlands" coords="215,365,233,341,233,328,254,320,238,284,210,293,192,304,177,290,184,320,204,353,203,366" href="#" target="" />

    <area id="london" shape="poly" alt="London" title="London" coords="227,385,235,398,244,402,255,391,259,384,239,379,230,383" href="#" target="" />

    <area id="east" shape="poly" alt="East" title="East" coords="260,315,287,316,288,364,271,389,259,390,246,377,225,382,222,368,217,357,235,327" href="#" target="" />

    <area id="southwest" shape="poly" alt="South West" title="South West" coords="61,468,88,475,104,456,139,462,153,437,180,441,192,436,196,396,188,363,162,375,152,405,142,404,109,408,87,440" href="#" target="" />

    <area id="southeast" shape="poly" alt="South East" title="South East" coords="209,445,224,429,259,429,284,409,276,386,254,391,241,405,226,388,215,363,194,369,199,401,192,436" href="#" target="" />

    <area id="northernireland" shape="poly" alt="Northern Ireland" title="Northern Ireland" coords="46,270,56,267,81,244,58,215,33,203,1,237,0,252,9,268" href="#" target="" />

</map>
​ 
```

​</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:33:38.350

“图像映射是一种传统方法”——不正确。[HTML 5 规范](http://dev.w3.org/html5/spec-preview/image-maps.html)完全支持 HTML 图像映射。

CSS 根本不适用于图像映射。

试试[ImageMapster](http://www.outsharked.com/imagemapster)，一个专门为此目的设计的 jquery 插件。

这是一个基本用法（与其他答案相同的问题 - 区域不匹配，我无法轻松找到英国的准确图像地图，并且没有您的区域匹配的源图像）。但你明白了。

[http://jsfiddle.net/VcGXL/](http://jsfiddle.net/VcGXL/)

```
// basic implementation of hotspots with ImageMapster

$('#mapimage').mapster(
{ 
    fillColor: 'ff0000'
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T13:22:58.837

如果您不想重新启动一切，您可以执行以下操作：将悬停代码添加到每个区域，并更改图像的来源。

```
$('#southeast').hover(
        function() {
            $('#mapimage img').attr('src', 'http://www.groupswelcome.co.uk/maps/uk_map.gif');
        },
        function() {
            $('#mapimage img').attr('src', 'http://www.alert24uk.com/ESW/Images/uk-map.gif');
        }
    ); 
```

这是这个方法的一个[小技巧](http://jsfiddle.net/wEXfA/)（在右下角向东南翻转）......图像当然与映射不对应。

通过这样做，您将看到一个临时的空白图像......直到图像加载。

有一些方法可以防止这种情况，比如使用 spritesheet。如果有兴趣，我可以为你做一个例子。

这是一个简单的方法。还有其他选择。如果您的网站适用于最近的浏览器，则为 HTML5 画布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T09:23:33.277

事实上 area in none 的默认显示，因此您必须首先将其设置为**display:block**，因此使用此 CSS 规则来更改地图区域上的光标：

```
area{
    display:block;
    cursor:hand;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T03:03:07.850

很抱歉在游戏后期跳到这个问题，但我有不规则（非矩形）形状的答案。我使用 SVG 解决了它，以生成我想要附加事件的位置的掩码。

这个想法是将事件附加到内联 SVG，超级便宜，甚至用户友好，因为有很多程序可以生成 SVG。SVG 可以有一层图像作为背景。

[http://jcrogel.com/code/2015/03/18/mapping-images-using-javascript-events/](http://jcrogel.com/code/2015/03/18/mapping-images-using-javascript-events/)

# php - 在php中连接两个整数

> ID：12109925
> 
> 赞同：4
> 
> 时间：2012-08-24T13:02:00.310
> 
> 标签：php

我知道在 php 中可以连接两个字符串，例如

```
$a .= $b; 
```

这等于

```
$a = $a . $b; 
```

是否可以用整数做一些事情？但是有数学运算？我有两个变量：

```
$var1 = 8;
$var2 = 2; 
```

我需要做`$var1 - $var2`，但我不想创建第三个变量来保存这个计算。我会试试`$var1 = $var1 + $var2`这行得通吗？还有其他`.=`类似的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T13:14:29.180

好的，因为现在每个人都很困惑

```
// _Appending_ $var2 to $var1 and assign it to $var1
$var1 .= $var2;
// _Add_ $var2 to $var1 and assign the result to $var1
$var1 += $var2; 
```

没有什么比*每个* [二元运算符都可以与赋值相结合的了](http://php.net/anguage.operators.assignment)。在引擎中，它总是扩展到

```
$var1 = $var1 . $var2; // You can imagine how the others looks like 
```

> 除了基本的赋值运算符之外，还有用于所有二进制算术、数组联合和字符串运算符的“组合运算符”，它们允许您在表达式中使用一个值，然后将其值设置为该表达式的结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T13:06:51.610

我认为你需要一个字符串格式。

```
$var1 = sprintf( "%d%d", $var1, $var2 ); 
```

这将使您`$var1`成为**82**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T13:04:05.900

与 C 和 C++ 一样，PHP 支持`Compound_assignment_operators`：

所以，这条线：
`$var1 = $var1 + $var2;`

相当于：
`$var1 += $var2;`

有关这些运算符的完整列表，请查看[Compound_assignment_operators](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Compound_assignment_operators)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T13:03:16.290

是的

```
$var1 = 1
$var2 = -1;

$var1 += $var2; // $var1 = 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-23T03:01:20.283

是的，复合赋值运算符将在 php 中作为 C 和 Java 工作。

你可以试试这样 $Var1+=$Var2;

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-24T13:08:27.507

```
$var1=$var1-$var2; 
```

可以正常工作，但速记运算符喜欢

```
$var1=-$var2 
```

不管用。我将 -2 设置为 $var1

速记运算符的符号是：

```
$var1-=$var2; 
```

# php - 避免分叉后的空闲页面

> ID：12109931
> 
> 赞同：-1
> 
> 时间：2012-08-24T13:02:29.203
> 
> 标签：php, multithreading, apache, zend-framework

经过真正的努力，我设法让我的 php Zend 应用程序使用多线程运行。为此，我在 CGI 模式下配置了 Apache，以便使用 php pcntl_* 函数。我有这个问题 这是我的叉子

```
 function fork() {
    $pid = pcntl_fork();
    if ($pid == -1)
        throw new Exception('fork error on Task object');
    elseif ($pid) {
        # we are in parent class
        $this->pid = $pid;
        # echo "< in parent with pid {$his->pid}\n";
    } else {
        # we are in child
        $sid = posix_setsid();
        if ($sid < 0) {
            exit;
        }
        $this->run();
    }
} 
```

每次我调用此函数时，都会创建进程并完美运行，但我失去了对浏览器上网页的控制（我无法再浏览我的网站了）。它似乎加载页面很长时间，直到它给我一个错误。我需要关闭浏览器（只需一个我无法重新连接的新选项卡），然后重新连接到服务器。会不会是最后创建的进程正在监听我的 http 端口？我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:22:36.877

对我来说，这听起来像是一个会话锁定问题 - 每当您调用 时`session_start()`，PHP 都会对磁盘上​​的会话文件进行排他锁定，因此两个 PHP 页面无法将冲突信息写入同一个会话。如果您`session_start()`在该锁到位时调用，它将“挂起”，直到锁定会话的进程完成（或调用`session_write_close()`or `session_destroy()`）。

我的猜测是，在你“分叉”你的 PHP 进程之前，你正在打开一个会话（或者可能会获取一些其他独占锁）并且这个锁没有被正确释放，因为 PHP 不是设计用于多线程（或者，更确切地说，多进程）环境。

与其试图让真正的 fork 在 PHP 下工作，不如使用`system`or生成一个全新的 PHP 脚本`exec`，并使用诸如`ZeroMQ`. 这样，您不仅可以根据父级设置*子级的初始条件，而且实际上**可以从子级传回信息*。

但是，不要忘记，以这种方式创建的子进程将在“命令行 SAPI”下运行，这可能会受到不同的影响`php.ini`，并且不会定义您通常认为理所当然的事情，例如`$_SERVER['DOCUMENT_ROOT']`.

# java - 为可调用类型线程分配优先级

> ID：12109940
> 
> 赞同：2
> 
> 时间：2012-08-24T13:02:51.420
> 
> 标签：java, multithreading, threadpool, runnable, callable

我正在处理线程任务，该任务需要为可调用线程分配优先级。

这是我的代码。

```
public void processURL(String[] synchronous, String[] asynchronous) {
    ExecutorService es = Executors.newFixedThreadPool(NTHREADS);
    for (int i = 0; i < asynchronous.length; i++) {
        es.execute(new TaskAsyn("Asynchronous Task: " + i, asynchronous[i],
                waiting));
    }

    List<Future<ToStore>> futures = new ArrayList<Future<ToStore>>();
    for (int i = 0; i < synchronous.length; i++) {
        Future<ToStore> future = es.submit(new TaskSynch(
                "synchronous Task: " + i, synchronous[i], waiting));
        futures.add(future);
    }

    for (Future<ToStore> future : futures) {
        try {
            ToStore s = future.get();
            // TODO
            System.out.println("Synchronous Task: " + s.getUrl()
                    + " has finished.");
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
    }

    System.out.println("here");
} 
```

在可调用线程中执行同步以在将来获得结果。在可运行线程中执行异步。

我也可以创建异步可调用线程；不是重点，所以我唯一的问题是如何`ExecuterService`分配具有优先级的线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T23:51:25.767

您可以使用自定义线程工厂实例化您的 Executor。

```
public class MyThreadFactory implements ThreadFactory {
   public Thread newThread(Runnable r) {
     Thread t =  new Thread(r);
     t.setPriority(Thread.MAX_PRIORITY); //Or whatever priority
     return t;
   }
 }

ExecutorService es = Executors.newFixedThreadPool(NTHREADS,new MyThreadFactory()); 
```

# android - Google Plus 磁贴动画

> ID：12109942
> 
> 赞同：11
> 
> 时间：2012-08-24T13:02:57.777
> 
> 标签：android, android-layout, android-animation, renderscript

我试图弄清楚如何制作与 Google plus 时间线视图中类似的布局。在时间轴中滚动时有一个动画，我真的很喜欢。知道怎么做吗？

![在此处输入图像描述](../Images/88fa71e08e131bff4c0cf74734f03e82.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T14:28:44.117

您需要为视图设置一个 TranslateAnimation ，这样就可以解决问题。

```
TranslateAnimation translateAnim = new TranslateAnimation(200, 0, 0, 0 );
//Use (0, 0, 200, 0 ) if you would like to animate this in a mobile device rather than a tab
listView.clearAnimation();
translateAnim.setDuration(500);   
translateAnim.setFillBefore(true);   
listView.startAnimation(translateAnim); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:09:39.970

我会查看谷歌提供的轮播示例代码 [http://code.google.com/p/renderscript-examples/wiki/Carousel](http://code.google.com/p/renderscript-examples/wiki/Carousel)

本质上，它的作用是创建一系列可以由您喜欢的任何图像纹理化的图块。代码是开箱即用的，可以从外面做一个圆柱形旋转木马，但如果你愿意的话，你可以移动视点，甚至可以像 g+ 示例中那样将其平放。

需要注意的是，从 Jellybean (4.1) 开始，Google 已经弃用了 renderscript 的图形组件。在我们公司，我们已经开始将所有内容从渲染脚本转移到 openGL，因此请务必评估使用已弃用的 API 编写新代码是否对您的特定用途有意义。

# android - C2DM 到 GCM 代码迁移

> ID：12109943
> 
> 赞同：2
> 
> 时间：2012-08-24T13:03:00.773
> 
> 标签：android, migration, android-c2dm, google-cloud-messaging

我已将用于推送通知的代码从 C2DM 迁移到 GCM。我在客户端所做的唯一更改是将注册意图的 sender 参数中传递的电子邮件帐户替换为项目 ID。服务器端的更改也已完成。

但是，我在使用 GCM 时遇到了接收推送的延迟。延迟就像 1 - 2 分钟。我在使用 C2DM 时没有遇到同样的延迟。

请帮忙！！这个问题是 GCM 的原因，还是我遗漏了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:21:37.490

我已经设置了 GCM，推送几乎是即时的。要检查的几件事是您的服务器正在毫不拖延地发送它。而且您没有发送垃圾邮件，我注意到在一小段时间内进行了一定数量的推送后，Google 将开始延迟推送。

除此之外，唯一的问题可能是 GCM 服务和/还有您的手机。确保您手机的收音机始终处于打开状态，并且您使用的是普通操作系统。看看问题是否在几个小时后仍然发生（以防 GCM 服务器出现问题）

# jquery - jQuery从没有RegEx的HTML字符串中删除标签

> ID：12109946
> 
> 赞同：25
> 
> 时间：2012-08-24T13:03:07.817
> 
> 标签：jquery, html, string

所以我有以下字符串：

```
var s = '<span>Some Text</span> Some other Text'; 
```

结果应该是内容为“其他文本”的字符串。

我试过了...

```
var $s = $(s).not('span'); 
```

...以及许多其他带有`remove()`,`not()`等的东西，但没有任何效果。

有什么建议么？我可以将字符串与正则表达式匹配，但我更喜欢通用的 jQuery 解决方案。

**编辑：**

我不**使用**正则表达式搜索解决方案，我只是想知道为什么这个例子不起作用：http: [//jsfiddle.net/q9crX/150/](http://jsfiddle.net/q9crX/150/)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-24T13:12:29.387

您可以将您`string`的 jQuery 对象包装起来并进行如下操作：

```
var removeElements = function(text, selector) {
    var wrapped = $("<div>" + text + "</div>");
    wrapped.find(selector).remove();
    return wrapped.html();
} 
```

**用法**

```
var removedSpanString = removeElements("<span>Some Text</span> Some other Text", "span"); 
```

这种方法的美妙之处在于您可以指定要删除的 jquery 选择器。即您可能希望删除`<th>`字符串中的 。在这种情况下，这将非常方便。希望这可以帮助！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-04T16:42:22.530

一个非常简单的方法：

```
var html = '<span>Remove <b>tags &amp; entities</b></span>';
var noTagText = $(html).text();
// ==> noTagText = 'Remove tags & entities' 
```

请注意，它会删除标签但也会删除 html 实体。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-24T13:06:30.057

这可能适合您的需求：

```
<([^ >]+)[^>]*>.*?</\1>|<[^/]+/> 
```

![正则表达式可视化](../Images/0fd879a5c4207a6a5a77e850247e294c.png)

[调试演示](https://www.debuggex.com/r/1gmcSdz9s3MSimVQ)

在 JavaScript 中：

```
$s = s.replace(/<([^ >]+)[^>]*>.*?<\/\1>|<[^\/]+\/>/ig, ""); 
```

它还删除了自闭合标签（例如`<br />`）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-24T13:06:28.130

只需像这样删除html标签

## [演示](http://jsfiddle.net/YQPsz/3/)

```
var s = '<span>Some Text</span> Some other Text';
var r = /<(\w+)[^>]*>.*<\/\1>/gi;
s.replace(r,""); 
```

在这里给出的答案：http://www.webdeveloper.com/forum/showthread.php?t=252483

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-24T13:22:02.370

只需执行以下操作：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>

<script>
$(document).ready(function(){
 $("span").not("span div").each(
 function(index, element) {
$("span").remove();
 }
 );
 });

</script>

<span>Some Text</span> Some other Text 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-24T13:08:03.967

检查[链接](http://jsfiddle.net/W4Gcb/)

例如，更具体到您的情况：-

```
var s = '<span>Some Text</span> Some other Text';
var $s = s.replace(/<span>(.*)<\/span>/g, ""); 
```

# asp.net-mvc - Html ActionLink 未发布到操作方法

> ID：12109949
> 
> 赞同：1
> 
> 时间：2012-08-24T13:03:18.653
> 
> 标签：asp.net-mvc, controller, form-submit

我正在尝试通过在我的视图中使用 Html.ActionLink 提交给控制器操作方法。我这样做是作为非 ajax 提交，因为我的操作的返回类型是 FileContentResult（感谢@Darin 提供此信息）。但是，我的操作链接没有将我的视图发布到操作方法。下面是我的代码

**查看代码（部分视图）**

```
@Html.ActionLink("Save", "SaveFile", "ui", new { htmlResult="asdf"}) 
```

这里，UI 是控制器名称，SaveFile 是方法名称。

**控制器方法**

```
public FileContentResult SaveFile(string htmlString)
        {
...
...

pdfBytes = pdfConverter.GetPdfBytesFromHtmlString(html);

    var cd = new ContentDisposition

    {
        FileName = "MyFile.pdf",
        Inline = false
    };

    Response.AddHeader("Content-Disposition", cd.ToString());
    return File(pdfBytes, "application/pdf");

} 
```

当我从浏览器地址栏中点击相同的 URL 时，它会被点击并返回没有问题的 pdf 文件。同样，这不是通过操作链接发生的。我还尝试将操作链接放入 @using Html.BeginForm().... 但没有用。

你能告诉我我可能在哪里做错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:11:44.690

`Html.ActionLink`有很多重载，很容易使用错误的。您当前正在使用[(String, String, Object, Object)](http://msdn.microsoft.com/en-us/library/dd492124%28v=vs.108%29)重载，它将您的第三个参数视为`"ui"`此路由值，从而导致错误生成的链接。

改用这个[重载](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29)：

```
@Html.ActionLink("Save", //Link text
                 "SaveFile", // Action Name
                 "ui", // Controller name
                 new { htmlResult="asdf"}, //Route values
                 null /* html attributes */) 
```

# jquery - 滑动导航菜单

> ID：12109957
> 
> 赞同：0
> 
> 时间：2012-08-24T13:03:38.970
> 
> 标签：jquery, css, menu, navigation

我需要滑动导航菜单作为图片。例如，我有`rtl`普通菜单的菜单和五个图像，以及悬停/单击菜单的五个图像（精灵）。

1-如果`hover`菜单幻灯片图像的用户 image1 并显示 image1 的描述。（使用 CSS）

2 - 如果`mouseover`菜单幻灯片图像的用户 image1 并显示 image1 的描述。（使用 Jquery/动画效果）

有什么更好的方法呢？CSS？查询？CSS+JQUERY？任何示例/帮助代码？

正常：[图像 1](http://i.stack.imgur.com/7EwP7.png)

当悬停并单击时：[IMAGE 2](http://i.stack.imgur.com/NRUyP.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:36:11.107

听起来你需要一个手风琴菜单。

以下是一些带有演示和示例的站点：

[http://www.1stwebdesigner.com/freebies/jquery-accordion-menus-tutorials/](http://www.1stwebdesigner.com/freebies/jquery-accordion-menus-tutorials/)

这是一款开源的水平手风琴： [http ://designreviver.com/tutorials/jquery-examples-horizo​​ntal-accordion/](http://designreviver.com/tutorials/jquery-examples-horizontal-accordion/)

和 Code Candyon（我认为他们是付费的）： [http ://codecanyon.net/item/classic-accordion/140404?ref=1stwebdesigner](http://codecanyon.net/item/classic-accordion/140404?ref=1stwebdesigner)

# javascript - 选择两个单选按钮

> ID：12109958
> 
> 赞同：4
> 
> 时间：2012-08-24T13:03:38.987
> 
> 标签：javascript

没有查询！我有两个单选按钮，出于某种原因，我可以同时选择它们，而我只想选择一个。例如，如果您选择有一个婴儿，您可以同时选择这两个单选按钮。有没有简单的方法来解决这个问题？有人可以通过修复我的代码中的错误来帮助我实现这一目标吗？

[http://jsfiddle.net/LuzkA/](http://jsfiddle.net/LuzkA/)

```
<html>
<head>
<title>Life Event Picker Calendar</title>
<script>
function changeMessage(oElement) {
    var rd1 = document.getElementById("rd1");
    var rd1Text = rd1.parentNode.getElementsByTagName('span')[0];
    var rd2 = document.getElementById("rd2");
    var rd2Text = rd2.parentNode.getElementsByTagName('span')[0];

    document.getElementById('choice').innerHTML = "Radio Choice=";
    rd1.checked = false;
    rd2.checked = false;
    //nothing
    if (oElement.value == "0") {
        document.getElementById("btn").style.display = "none";
        document.getElementById("radio").style.display = "none";
        document.getElementById("day").innerHTML = "Date";
    //have a baby
    } else if (oElement.value == "100") {
        document.getElementById("btn").style.display = "none";
        document.getElementById("radio").style.clear = "both";
        document.getElementById("radio").style.display = "inline-block";
        rd1Text.innerHTML = "C-Section";
        rd2Text.innerHTML = "Regular Birth";
        rd1.value = "C-Section";
        rd2.value = "Regular Birth";
        document.getElementById("day").innerHTML = "Anticipated Due Date";
    //military leave
    } else if (oElement.value == "15") {
        document.getElementById("btn").style.display = "none";
        document.getElementById("radio").style.clear = "both";
        document.getElementById("radio").style.display = "inline-block";
        rd1Text.innerHTML = "Training";
        rd2Text.innerHTML = "Active Duty";
        rd1.value = "Training";
        rd2.value = "Active Duty";
        document.getElementById("day").innerHTML = "Anticipated Leave Date";
    //get married
    } else if (oElement.value == "5") {
        document.getElementById("btn").style.display = "inline-block";
        document.getElementById("radio").style.display = "none";
        document.getElementById("day").innerHTML = "Marriage Date";
    //adopt a child
    } else if (oElement.value == "90") {
        document.getElementById("btn").style.display = "inline-block";
        document.getElementById("radio").style.display = "none";
        document.getElementById("day").innerHTML = "Anticipated Adoption Date";
    //retire
    } else if (oElement.value == "35") {
        document.getElementById("btn").style.display = "inline-block";
        document.getElementById("radio").style.display = "none";
        document.getElementById("day").innerHTML = "Anticipated Retirement Date";
    //medical leave
    } else if (oElement.value == "25") {
        //document.getElementById("btn").style.display = "inline-block";
        document.getElementById("radio").style.display = "none";
        document.getElementById("day").innerHTML = "Anticipated Disability Date";       
    } else {}
    return;
}

    function showChoice(input) {
        document.getElementById('choice').innerHTML = "Radio Choice=" + input.value;
        document.getElementById("btn").style.display = "inline-block";
    }

//gets info picked and displays messages
function getInfo() {
    var myDate=new Date();
    var ev_num = parseInt(document.getElementById("leave").value)
    myDate.setFullYear(sel_year.value,sel_month.value,sel_day.value);
    var event_value = document.getElementById("leave").value;
    //document.getElementById("date").innerHTML = "The date you have selected to begin your time of absence is ..." + "<b>" + myDate + "</b>";

    //if ((document.getElementById("rd1").checked) == true) {
    //document.write(document.getElementById("rd1").value);}

    //get married
    if (event_value == 5) {

    //have a baby
    } else if (event_value == 100) {
        var first_number = new Date(myDate);
        first_number.setDate(myDate.getDate() + 31);
        var second_number = new Date(myDate);
        second_number.setDate(myDate.getDate() - 30);
        var third_number = myDate.getDate() + 7;
        var fourth_number;
        var fifth_number1;
        var fifth_number2;
        //if the first radio button has been selected
        if ((document.getElementById("rd1").checked) == true) {
            fourth_number = myDate.getDate() + 56;
            fifth_number1 = myDate.getDate() + 57;
            fifth_number2 = myDate.getDate() + 91;
        //if the second radio button has been selected
        } else {
            fourth_number = myDate.getDate() + 42;
            fifth_number1 = myDate.getDate() + 43;
            fifth_number2 = myDate.getDate() + 91;
        }
        document.getElementById("message1").innerHTML = "From " + myDate + " through " + first_number + "<br/>" + "You are eligible to update coverage and personal information through your 'Have a Baby' Life Event.";
        document.getElementById("message2").innerHTML = "From " + second_number + " through " + myDate + "<br/>" + "1) Call 1-877-968-7762 to initiate your leave. <br/>" + "2) Complete Authorization Release Form.";
    //adopt a child 
    } else if (event_value == 90) {

    //retire
    } else if (event_value == 35) {

    //military leave
    } else if (event_value == 15) {

    //medical leave
    } else if (event_value == 25) {

    } else {}
    //document.getElementById("event").innerHTML = "Based on the event you have selected you will miss  ... " + "<b>" + document.getElementById("leave").value + " days." + "</b>";
    //myDate.setDate(myDate.getDate() + ev_num);
    //document.getElementById("return").innerHTML = "You will be expected back on ..." + "<b>" + myDate + "</b>";
}
</script>
</head>
<body>

Life Event Picker Calendar<br>
<hr align="left" width="200px"/>
<div id="life" style="display:inline-block;">Life Event</div><div id="day" style="display:inline-block; margin-left:100px;">Date</div><br>

    <select style="float:left;" id="leave" onchange="changeMessage(this);">
          <option value="0"></option>
          <option value="5">Get Married</option>
          <option value="100">Have a Baby</option>
          <option value="90">Adopt a Child</option>
          <option value="35">Retire</option>
          <option value="15">Military Leave</option>
          <option value="25">Medical Leave</option>
    </select>    

<div id="calendar-container" style="float:left;" ></div>

    <button id="btn" style="display:none;" onclick="getInfo()"type="button">Process</button>

<br>
<div id="radio" style="display:none">
    <label><span></span><input type="radio" name="" id="rd1" value="" onclick="showChoice(this)"/></label>
    <label><span></span><input type="radio" name="" id="rd2" value="" onclick="showChoice(this)"/></label>
</div>

<div id="choice">Radio Choice</div><br>
<div id="date"></div>
<div id="event"></div>
<div id="return"></div>
<div id="yourdate"></div>

<div id="message1">Message 1</div><br>
<div id="message2">Message 2</div><br>
<div id="message3">Message 3</div><br>
<div id="message4">Message 4</div><br>
<div id="message5">Message 5</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T13:11:52.780

你没有名字，所以你可以同时选择它们。给他们一个相同的名字！浏览器将只让用户选择一个。

```
<input type="radio" name="radiobtn" id="rd1" value="" onclick="showChoice(this)"/>
<input type="radio" name="radiobtn" id="rd2" value="" onclick="showChoice(this)"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T13:12:35.103

您必须为单选按钮命名。十分简单

```
<div id="radio">
<label><span></span><input type="radio" name="boom" id="rd1" value="" onclick="showChoice(this)"/></label>
<label><span></span><input type="radio" name="boom" id="rd2" value="" onclick="showChoice(this)"/></label> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T13:12:37.187

您的单选按钮需要“名称”属性不为空。

[http://jsfiddle.net/LuzkA/1/](http://jsfiddle.net/LuzkA/1/)

```
<label><span></span><input type="radio" name="something" id="rd1" value="" onclick="showChoice(this)"/></label>
<label><span></span><input type="radio" name="something" id="rd2" value="" onclick="showChoice(this)"/></label> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-24T13:13:48.247

您的单选按钮没有名称值。

只有当它们具有名称值时，它们才能被分组为单选按钮

```
Without name
<form>
    <input type="radio" id="id1" name="" value="aa" />aa<br>
    <input type="radio" id="id2" name="" value="bb" />bb<br>
</form>
<hr />
With name
<form>
    <input type="radio" id="id3" name="a" value="aa" />aa<br>
    <input type="radio" id="id4" name="a" value="bb" />bb<br>
</form>
```

# bash - 测量执行时间并在最后加起来

> ID：12109959
> 
> 赞同：1
> 
> 时间：2012-08-24T13:03:39.067
> 
> 标签：bash

我目前正在编写一个 bash 测试框架，我想测量每个测试方法的执行需要多长时间。此外，我想将这些加起来并显示完整的执行时间。

我知道您可以`time`用来测量例如函数的执行时间，但我不知道如何存储单个结果并添加它们。

时间真的是工作的正确工具吗？还是我应该使用类似的东西`date`？

示例代码：

```
declare -a execution_times

# somehow measure execution time of test function

# add the individual execution time
execution_times+=(execution_time)

for execution_time in "${execution_times[@]}"; do
  # compute full execution time
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:23:58.233

下面是一个测量 sleep 命令所用时间的示例：

```
rm times.txt
for i in $(seq 1 10) ; do
  /bin/time -f "%e" -o times.txt -a sleep .2
done

awk ' { t += $1 } END { print "Total:" t }' times.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:10:18.793

`time`命令作为第一个输出给出`real`必须是您想要测量的时间或 walltime。

# c++ - OpenSSL base64 解码 - BIO_read 返回 0

> ID：12109960
> 
> 赞同：3
> 
> 时间：2012-08-24T13:03:45.903
> 
> 标签：c++, openssl, base64

我使用下面的代码，我使用内存缓冲区中的 BIO_read 进行 base64 解码。有时`BIO_read`返回`0`size 参数。我还不明白为什么会发生这种情况。有任何想法吗？

```
static std::vector<unsigned char> base64_decode(void *input, int length)
{
    std::vector<unsigned char> result(length, 0);
    BIO *b64, *bmem;

    b64 = BIO_new(BIO_f_base64());
    bmem = BIO_new_mem_buf(input, length);
    bmem = BIO_push(b64, bmem);

    int size = BIO_read(bmem, &result[0], length);
    if (size == 0)
        fprintf(stderr, "Problem\n");
    result.resize(size);

    BIO_free_all(bmem);

    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:40:17.413

我在 base64 解码方面遇到了类似的问题，直到我明白 base64 可以用换行符格式化或不能用换行符格式化。

您应该尝试通过删除换行符然后`BIO_FLAGS_BASE64_NO_NL`在您的 b64 BIO 上设置 OpenSSL 标志来规范您的输入（请参阅 b64 BIO 上的[OpenSSL 文档](http://www.openssl.org/docs/crypto/BIO_f_base64.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-23T07:44:53.667

`BIO_read`如果您传递`base64url`编码的字符串，则返回 0。OpenSSL 似乎不支持 base64url 格式。

# c# - 打开或关闭 radtreeview 时如何更改 Expander 按钮？

> ID：12109961
> 
> 赞同：1
> 
> 时间：2012-08-24T13:03:45.280
> 
> 标签：c#, telerik, expander, togglebutton, radtreeview

我有两个图标，分别是 a 和 b；我需要我的 radtreeviewitem 在打开时显示带有图标 a 的 Expander 按钮，并在关闭时显示图标 b。流动的是两个图标

```
<Style x:Key="ExpanderStyleOpen" TargetType="ToggleButton">
            <Setter Property="IsEnabled" Value="True" />
            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="ToggleButton.IsChecked" Value="True" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        ...
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ExpanderStyleClose" TargetType="ToggleButton">
            <Setter Property="IsEnabled" Value="True" />
            <Setter Property="IsTabStop" Value="False" />
            <Setter Property="ToggleButton.IsChecked" Value="False" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                       ...
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

然后我的 radtreeview...

```
<telerik:RadTreeView Name="radTreeView"
<!--static can't change...:(-->
                             ExpanderStyle="{StaticResource ExpanderStyleClose}"
                             FontSize="12"
                             IsLineEnabled="True"
                             IsRootLinesEnabled="False"
                             Visibility="{Binding IsVisible}"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:57:47.103

通过使用 a `Trigger`，您可以将两种样式合二为一。

这个想法是：

1.  将闭合图像设置为样式的实际图像。
2.  创建一个`Trigger`以更改`ToggleButton`' 的`IsChecked`属性。它是`false`“关闭”`true`时，打开时。

像这样的东西应该工作：

```
<Style x:Key="ExpanderStyle" TargetType="{x:Type ToggleButton}">
    <Setter Property="IsEnabled" Value="True" />
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ToggleButton}">
                <StackPanel Orientation="Horizontal">
                    <Grid SnapsToDevicePixels="False" Background="Transparent">
                        <Image x:Name="expanderImage" Source="..." />
                    </Grid>
                    <ContentPresenter />
                </StackPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="false">
                        <Setter Property="Source" TargetName="expanderImage" Value="..." />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# xml - 解组 xml 后返回空列表

> ID：12109969
> 
> 赞同：1
> 
> 时间：2012-08-24T13:04:22.837
> 
> 标签：xml, rest, jpa, jaxb, unmarshalling

我有从 REST 返回的 xml，它如下所示：

```
<customers>
    <customer>
        <addressline1>111 E. Las Olas Blvd</addressline1>
        <addressline2>Suite 51</addressline2>
        <city>Fort Lauderdale</city>
        <creditLimit>100000</creditLimit>
        <customerId>1</customerId>
        <discountCode>
            <discountCode>56</discountCode>
            <rate>0.00</rate>
        </discountCode>
        <email>jumbocom@gmail.com</email>
        <fax>305-777-4635</fax>
        <name>Kupa</name>
        <phone>305-777-4632</phone>
        <state>FL</state>
        <zip>
            <areaLength>22.0</areaLength>
            <areaWidth>23.0</areaWidth>
            <radius>50.0</radius>
            <zipCode>90-200</zipCode>
        </zip>
    </customer>
</customers> 
```

我正在尝试解组列表，但列表始终为空。也许原因是在 Customer 类中，Zip 和 DiscountCode 是其他实体，所以我只有 XML 作为字符串，它不能从中创建实体。

这些是我的java类：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customers 
{
   @XmlElement
   private List<Customer> customers = new ArrayList<Customer>();

   public List<Customer> getCustomers()
   {
      return customers;
   }
} 

@Entity
@Table(name = "customer")
@XmlRootElement(name = "customer")
public class Customer implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "customer_id")
    private Integer customerId;
    @Column(name = "name")
    private String name;
    @Column(name = "addressline1")
    private String addressline1;
    @Column(name = "addressline2")
    private String addressline2;
    @Column(name = "city")
    private String city;
    @Column(name = "state")
    private String state;
    @Column(name = "phone")
    private String phone;
    @Column(name = "fax")
    private String fax;
    @Column(name = "email")
    private String email;
    @Column(name = "credit_limit")
    private Integer creditLimit;
    @JoinColumn(name = "discount_code", referencedColumnName = "discount_code")
    @ManyToOne(optional = false)
    private DiscountCode discountCode;
    @JoinColumn(name = "zip", referencedColumnName = "zip_code")
    @ManyToOne(optional = false)
    private MicroMarket zip;

// later only setters and getters
} 
```

这就是我解组的方式：

```
JAXBContext context = JAXBContext.newInstance(Customers.class, Customer.class);
            Unmarshaller unmarshaller = context.createUnmarshaller();
            Customers customers = (Customers) unmarshaller.unmarshal(new StringReader(allXmlString)); 
```

我见过类似的主题，但其中任何一个都对我有帮助。为什么解组后我的列表总是空的？

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:48:43.903

该`customers`字段的默认映射将查找名为`customers`. 在`@XmlElement`注释上，您需要指定要映射到名为`customer`.

```
@XmlElement(name="customer")
private List<Customer> customers = new ArrayList<Customer>(); 
```

**顾客**

下面是整个`Customers`班级的样子：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customers 
{
   @XmlElement(name="customer")
   private List<Customer> customers = new ArrayList<Customer>();

   public List<Customer> getCustomers()
   {
      return customers;
   }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)

# jquery - 如何追加到一个div？

> ID：12109970
> 
> 赞同：0
> 
> 时间：2012-08-24T13:04:23.567
> 
> 标签：jquery

我的 html 中有一个隐藏的占位符：

```
<div id="backup_add" class="hidden"></div> 
```

现在在javascript中我有一个`<tr>`这样的：

```
var row = $(add_button_row).closest('form').closest('tr'); 
```

当我尝试将 tr 附加到占位符作为备份时，脚本会中断。我不知道为什么。

```
$('#backup_add').append(row); 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:06:11.380

你真的很亲密，使用jQuery`appendTo()`函数：[http ://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)

```
$('#backup_add').appendTo(row); 
```

这会将您的 div 放在所指的任何行之后。此外，如果您需要在 DOM 元素之前添加任何内容，您可以`prependTo`以相同的方式使用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:08:05.763

您必须附加行的副本，而不是行本身（因为它不能同时存在于 2 个不同的位置）。实际上， div 中的 tr 不是有效的标记。

```
$('#backup_add').append($(row).clone()); 
```

# php - 用户可以登录安全页面，但不能重新访问同一页面

> ID：12109971
> 
> 赞同：0
> 
> 时间：2012-08-24T13:04:25.150
> 
> 标签：php, authentication, session-variables, permission-denied

作为这个 php 登录和重定向软件的一部分，我需要将一段代码添加到要保护的每个页面的开头。如果用户拥有有效的用户登录信息，它可以让用户完美启动，但如果他们转到另一个“安全”页面并尝试重新访问原始页面（或者只是将其地址复制并粘贴到新选项卡中进行访问），它会转到一个拒绝访问屏幕。

**发生此错误是因为会话缓存标头有问题还是更深层次的问题？**

它目前看起来像这样：

```
 <?php
session_start();
session_cache_limiter();
header("Expires: Sat, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT");
header("Cache-Control: post-check=0, pre-check=0",false);

require('config.php');

require('functions.php');

//this is group name or username of the group or person that you wish to allow access     to
// - please be advise that the Administrators Groups has access to all pages.
if (allow_access(Users) != "yes")
{
include ('/home/folder/public_html/members/no_access.php');
exit;
}
?> 
```

我已经尝试从其他人的问题等中更改标题，但它并没有改变问题。我还查看了任何相关链接，并确保它们没有损坏等。

允许访问功能似乎是这样的：

```
function allow_access($group)
{
        if ($_SESSION[group1] == "$group" || $_SESSION[group2] == "$group" || $_SESSION[group3] == "$group" ||
                $_SESSION[group1] == "Administrators" || $_SESSION[group2] == "Administrators" || $_SESSION[group3] == "Administrators" ||
                $_SESSION[user_name] == "$group")
                {
                        $allowed = "yes";
                }else{
                        $allowed = "no";
                }
        return $allowed;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:13:58.570

你不需要：

```
session_cache_limiter();
header("Expires: Sat, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT");
header("Cache-Control: post-check=0, pre-check=0",false); 
```

并且可能是真正导致问题的东西。

您可以通过告诉我们以下内容来改进此答案：

```
allow_access 
```

是。当然使用布尔值而不是文本`yes`或`no`.

又是什么`Users`？它不是我所看到的常数，它不是我所看到的对象，也不是变量......那是什么？

# c++ - _M_X64 是否可以在 x64 处理器上取消设置？

> ID：12109978
> 
> 赞同：2
> 
> 时间：2012-08-24T13:04:58.727
> 
> 标签：c++, windows, visual-studio

Visual Studio 编译器（2005 到 2008）为 x86/x64 位环境定义了四个宏。参考[预定义宏](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)

*   _M_X64 为 x64 处理器定义。
*   _M_IX86 为 x86 处理器定义。有关详细信息，请参阅下表 _M_IX86 的值。这不是为 x64 处理器定义的。
*   _WIN32 为 Win32 和 Win64 的应用程序定义。始终定义。
*   _WIN64 为 Win64 应用程序定义。

现在在 x32 位机器上永远不会设置 _M_X64。在 64 位机器上，如果您在 32 位环境上构建，_M_X64 将被取消设置，_M_IX86 将被定义。无论 32/64 位版本如何，总是定义 _WIN32。

在所有 x64 处理器中，_M_X64 是否有特殊意义？当目标为 x64 时，_M_X64 未定义是否会出现这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T14:09:33.023

> 现在在 x32 位机器上永远不会设置 _M_X64

这不是它的工作原理。您使用的编译器为特定的目标架构生成代码，它不关心**您的**机器。在 32 位机器上生成 x64 代码是非常有可能的，MSVC 包含一个可以在 32 位操作系统上运行并生成 x64 代码的交叉编译器。它有一个 64 位编译器，可以生成 x64 代码。IDE 设置为实际使用交叉编译器，无论您的操作系统如何。

你可以看到这些编译器安装在你的机器上，`vc\bin`VS安装目录的子目录。该目录包含生成 x86 代码的 32 位编译器。x86_amd64 子目录有一个生成 x64 代码的 32 位编译器。amd64 子目录有一个生成 x64 代码的 64 位编译器。如果您有 ARM 内核的编译器，则可能存在其他目录。始终是交叉编译器。

您询问的宏名称是预定义的宏，完整列表[在这里](http://msdn.microsoft.com/en-us/library/b0084kay%28v=VS.80%29.aspx)。_M_X64 宏始终由生成 x64 代码的任何编译器定义。

# php - 将javascript数组写入文件

> ID：12109980
> 
> 赞同：0
> 
> 时间：2012-08-24T13:05:08.350
> 
> 标签：php, javascript, ajax

我已经使用 ajax 将文件加载到数组中，拆分后我需要再次将其保存到文件中。这一切都发生在单击按钮时。

```
function updatetags(){

 var alreadyexistingtags;
 var responsetext;

 var r2 = new XMLHttpRequest();
 r2.open('GET', 'tagsupdated.txt', true);
 r2.send(null);

 r2.onreadystatechange = function() {
    if (r2.readyState == 4 && r2.status==200) {

        responsetext=r2.responseText;

        alreadyexistingtags=responsetext.split(' ');
        }       
  }
 } 
```

我知道javascripts不是服务器端，这就是为什么我不能做我想做的事，但我确信必须有一种方法可以将已经存在的tags []写入tagsupdated.txt。有什么帮助吗？也许我应该以某种方式将数组传递给PHP ？如果是这样，鉴于 PHP 在页面加载时执行，当我需要等待按钮被按下时，这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:10:06.680

您将不得不使用 AJAX 或其他方法将数据发送回您的服务器，然后服务器可以将文件写出。

为此，只需在您的服务器上创建一个*新*脚本，例如 writearray.php，它接受 Javascript 数组作为输入。然后使用 AJAX 使用您的数组向该文件发送请求。

PHP 文件看起来像这样（这是一个高度简化的示例）：

```
<?php
file_put_contents("where_you_want_the_file.txt", $_POST['array']);
?> 
```

看起来您只是将 Javascript 数组存储为空格分隔的列表，因此 Javascript 看起来像这样：

```
var str = your_array.join('%20');   // URL encoded spaces separating array entries
var params = "array=" + str;
var http = new XMLHttpRequest();
http.open("POST", "your_script.php", true);

//Send the proper header information along with the request
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.setRequestHeader("Connection", "close");

http.onreadystatechange = function() {
    if(http.readyState == 4 && http.status == 200) {
        // Do something on success?
    }
}
http.send(params); 
```

它的工作方式是发送一个带有名为 array 的字段的 POST，该字段包含 Javascript 数组的文本表示。PHP 代码检查 $_POST['array'] 以获取此值，然后将其写入您的文件。

请注意，如果您想做更复杂的事情，您应该考虑使用 JSON。并且一如既往地非常小心处理用户数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:34:58.973

对于发送数据，您必须执行另一个 ajax 查询，但在 .send 方法中，您必须传递带有数据的字符串示例：

```
 var r3 = new XMLHttpRequest();
 r3.open('POST', 'writeTextWithoutTags.php', true);
 var data_string='text='+alreadyexistingtags+'&etcParams='+etc_you_params;
 r3.onreadystatechange = function()
 {
   if (r3.readyState == 4 && r3.status==200)
   {
     alert(r3.responseText);//write result
   }       
 }
 r3.send(data_string); 
```

在发送已经存在的标签变量之前，您必须将数组内爆到带有分隔符的字符串或更好地转换为 JSON 字符串。但是在 writeTextWithoutTags.php 中，ypu 必须检查数据，因为 javascript 执行 ib 用户 brouser，您不能确定数据是从 yavastsript 发送的，没有经过处理入侵者！

PS如果您可以访问PHP，我不明白我不明白您为什么在这里JS-您可以在PHP中执行所有这些操作，而不是将数据从服务器驱动到浏览器并返回

# android - 调用远程服务方法时出现空指针异常

> ID：12109981
> 
> 赞同：0
> 
> 时间：2012-08-24T13:05:23.400
> 
> 标签：android, nullpointerexception, android-service, aidl

我正在尝试在我的 Activity 中调用远程服务的 add 方法。在 Activity 中远程服务方法调用导致`nullpointerexception`：

```
//This where i am calling service method in my activity
initService();
service.add();  //this call causing null pointer exception

///My .aidl file

interface IAdditionService {

void add();
}

//my service where add method is defined
@Override
 public IBinder onBind(Intent intent) {

 return new IAdditionService.Stub() {
  /**
   * Implementation of the add() method
   */
  public void add() throws RemoteException {
      Log.i(TAG,"INSIDE add method of  IAdditionService.Stub()  before addition  "); 
   }

 };
} 
```

请帮我解决这个问题。第一次实施服务。

我的完整代码：- 我的活动代码：-

```
public class AIDLDemo extends Activity {
  private static final String TAG = "AIDLDemo";
  IAdditionService service;
  IBinder boundService;
  AdditionServiceConnection connection;

  /**
   * This class represents the actual service connection. It casts the bound
   * stub implementation of the service to the AIDL interface.
   */
   class AdditionServiceConnection implements ServiceConnection {

  public void onServiceConnected(ComponentName name, IBinder boundService) {
  service = IAdditionService.Stub.asInterface((IBinder) boundService);
  Log.d(AIDLDemo.TAG, "onServiceConnected() connected");
  Toast.makeText(AIDLDemo.this, "Service connected", Toast.LENGTH_LONG)
      .show();
  }

   public void onServiceDisconnected(ComponentName name) {
   service = null;
   Log.d(AIDLDemo.TAG, "onServiceDisconnected() disconnected");
   Toast.makeText(AIDLDemo.this, "Service connected", Toast.LENGTH_LONG)
      .show();
   }
  }

  /** Binds this activity to the service. */
 private void initService() {
 connection = new AdditionServiceConnection();
 Intent i = new Intent();
 i.setClassName("com.marakana", com.marakana.AdditionService.class.getName());
 boolean ret = bindService(i, connection, Context.BIND_AUTO_CREATE);
 Log.d(TAG, "initService() bound with " + ret);
 }

  /** Unbinds this activity from the service. */
 private void releaseService() {
  unbindService(connection);
  connection = null;
  Log.d(TAG, "releaseService() unbound.");
 }

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);

 initService();

  // Setup the UI
  Button buttonCalc = (Button) findViewById(R.id.buttonCalc);

  buttonCalc.setOnClickListener(new OnClickListener() {
  TextView result = (TextView) findViewById(R.id.result);
  EditText value1 = (EditText) findViewById(R.id.value1);
  EditText value2 = (EditText) findViewById(R.id.value2);

  public void onClick(View v) {
    int v1, v2, res = -1;

    service = IAdditionService.Stub.asInterface((IBinder) boundService);
    v1 = Integer.parseInt(value1.getText().toString());
    v2 = Integer.parseInt(value2.getText().toString());

     try {
      service.add();
     } catch (RemoteException e) {
      Log.d(AIDLDemo.TAG, "onClick failed with: " + e);
      e.printStackTrace();
     }
      result.setText(new Integer(res).toString());
     }
   });
  }

 /** Called when the activity is about to be destroyed. */
 @Override
 protected void onDestroy() {
 releaseService();
 }

} 
```

我的服务：-

```
public class AdditionService extends Service {
private static final String TAG = "AdditionService";

@Override
public void onCreate() {
 super.onCreate();
 Log.d(TAG, "onCreate()");
 }

 @Override
 public IBinder onBind(Intent intent) {

 return new IAdditionService.Stub() {
   /**
   * Implementation of the add() method
   */
  public void add() throws RemoteException {
    Log.d(TAG, String.format("AdditionService.add(%d, %d)"));
  //        return value1 + value2;
  }

  };
  }

  @Override
  public void onDestroy() {
  super.onDestroy();
  Log.d(TAG, "onDestroy()");
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T10:24:40.757

我认为直接使用 ServicConnection 而不是创建它的类更好。请参考这篇希望对 developer.samsung.com/android/technical-docs/Services-with-AIDL-in-Android 有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:04:17.087

在 Onclick 函数中删除下面的行。因为只要 OnserviceConnected 被调用，你正在初始化服务。

```
 service = IAdditionService.Stub.asInterface((IBinder) boundService); 
```

您尚未在任何地方初始化 boundservice 尚未分配它

# memory - cudaSetDevice() 分配超过 580 MB 的全局内存

> ID：12109985
> 
> 赞同：3
> 
> 时间：2012-08-24T13:05:39.747
> 
> 标签：memory, cuda, gpu, nvidia

我有一个复杂的基于 CUDA 的 Linux 应用程序。它使用 Ubuntu 12.04 (x86_64) 和 NVIDIA 驱动程序 295.41 + CUDA 4.2 工具包在带有一个 NVIDIA GTX 560 Ti 卡（1 GB 内存）的 i7 机器上运行。

该应用程序在 GPU 中需要大约 600-700 MB 的全局内存，并且由于调用`cudaMalloc()`.

经过一些调试，我发现`cudaSetDevice()`应用程序最开始的第一次调用一次分配了大约**580 MB**的全局内存，而应用程序其余部分的可用内存只有 433 MB。

CUDA 参考手册说它为设备初始化一个“主上下文”并分配各种资源，例如 CUDA 内核（在驱动程序 API 中称为“模块”）和常量变量。该应用程序有一些`__device__ __constant__`变量，但它们的总量只有几 KB。大约有 20-30 个内核和设备函数。

我不知道为什么 CUDA 在初始化期间分配如此大量的 GPU 内存。在一个单独的最小程序中，它只`cudaSetDevice(0); cudaMemGetInfo(&a, &t); printf("%ld, %ld\n", a, t);`显示大约 980 MB 的可用内存。所以问题应该出在*我的应用程序*上，但我无法弄清楚是什么导致了如此大的内存分配，因为它的实现细节`cudaSetDevice()`是完全专有的。

我能得到一些其他的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T07:29:25.693

我认为这`cudaSetDevice`是您在应用程序中进行的第一次 CUDA 调用，因此作为 CUDA 开发人员，您应该知道第一次 CUDA 调用非常昂贵，因为 CUDA 1st 将其组件分配在大约 500 MB 的显卡上。

尝试使用另一个 CUDA 命令启动您的程序，例如`cudaMalloc`，您将体验到由 CUDA 分配的相同数量。您还可以`deviceQuery`在 CUDA Samples 下运行以查看正在使用的内存量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:19:55.867

这听起来像是一个问题，你想向 Nvidia 提交错误吗？步骤为： 1\. 打开页面[http://developer.nvidia.com/cuda/join-cuda-registered-developer-program](http://developer.nvidia.com/cuda/join-cuda-registered-developer-program)；2、如未注册，请点击“立即加入”，否则点击“立即登录”；3、输入邮箱和密码登录；4\. 左侧面板首页有“Bug Report”项，点击即可提交Bug；5\. 填写必填项，其他项可选，但详细信息将有助于我们定位和修复问题；6\. 如有必要，应上传附件；7、Linux系统最好附上nvidia-bug-report；8\. 如果问题与特定代码模式有关，则需要示例代码和编译说明以进行复制。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T13:03:52.653

当第一次调用任何`cudaXXX()`函数导致报告的 VmData (UNIX) 大幅飙升时，我遇到了类似的问题，有时达到数十 GB。这不是错误，原因如下：

[为什么 Cuda 运行时在初始化时会保留 80 GiB 虚拟内存？](https://stackoverflow.com/questions/11631191/why-does-the-cuda-runtime-reserve-80-gib-virtual-memory-upon-initialization)

# javascript - 从 JSON 数组计算 javascript 中的日期差异

> ID：12109986
> 
> 赞同：2
> 
> 时间：2012-08-24T13:05:40.870
> 
> 标签：javascript, d3.js

我有一个 JSON 对象，它返回带有日期和时间的事件列表，我想为下一个事件时间添加一个计数器，但我不确定如何处理这个？

基本上，我的 JSON 是这样的：

```
[{"name": "BAKER-CROSSROADS", "country": "USA", "lon": "165.25", "yield": "21", "lat": "11.58", "depth": ".027", "date": "1946/07/24 21:35:00", "id": "1"}, {"name": "VENUS", "country": "USA", "lon": "-116.2", "yield": "10", "lat": "37.19", "depth": ".03", "date": "1958/02/22 01:00:00", "id": "10", "fill": "green"}, {"name": "HATCHIE", "country": "USA", "lon": "-116.03", "yield": "20", "lat": "37.058", "depth": ".061", "date": "1963/02/08 16:00:01", "id": "100", "fill": "green"}, {"name": "CLIMAX:Upshot-Knothole", "country": "USA", "lon": "-116.0183", "yield": "61", "lat": "37.0875", "depth": "-.41", "date": "1953/06/04 11:14:57", "id": "1000", "fill": "red"}, {"name": "BRAVO:Castle", "country": "USA", "lon": "165.274", "yield": "15000", "lat": "11.698", "depth": "0", "date": "1954/02/28 18:45:00", "id": "1001", "fill": "red"}, .... 
```

所以对于每个对象：

{“名称”：“贝克十字路口”，“国家”：“美国”，“经度”：“165.25”，“产量”：“21”，“纬度”：“11.58”，“深度”：“.027” ", "日期": "1946/07/24 21:35:00", "id": "1"}

{“name”：“VENUS”，“country”：“USA”，“lon”：“-116.2”，“yield”：“10”，“lat”：“37.19”，“depth”：“.03” ，“日期”：“1958/02/22 01:00:00”，“id”：“10”，“填充”：“绿色”}

...

这是读取 json 文件的代码：

```
 this.loadNext = function () {
    d3.json("./data/detonations.json", function(datum) {
        for(var i = datum.length - 1; i >= 0; --i) {
            var o = datum[i];
            //console.log(o);
            message = {
                country: o.country
                ,date: o.date
                ,depth: o.depth
                ,lon: o.lon
                ,lat: o.lat
                ,type: o.type
                ,yield: o.yield
            };
            self.doSomething(message)
        }
    });
} 
```

我想计算日期/时间差，所以在这种情况下，“1958/02/22 01:00:00”和“1946/07/24 21:35:00”的差异并将其传递给消息数组?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:08:38.003

要以毫秒为单位有这种差异，您可以使用

```
var diff = (new Date(s2)).getTime() - (new Date(s1)).getTime(); 
```

那是因为您拥有的格式可以直接由 Date 类解析。

# spss - 请帮助使用 SPSS 添加李克特类型的量表

> ID：12109988
> 
> 赞同：1
> 
> 时间：2012-08-24T11:33:45.413
> 
> 标签：spss

由于上一个帖子由于表达不清楚而关闭，这里是一个编辑过的。

一份问卷共有 5 个李克特式量表问题，共 20 个项目。我需要从 5 个单独的问题中添加 20 个项目来创建一个总规模。我已经拿到数据了。

这个问题就像上图一样。如何运行命令从 5 个单独的问题中添加 20 个项目？命令是什么？

是不是类似于 Transform > Compute 变量。输入一个变量名，指定要添加的项目，嘿presto（例如“V1+V2+V3”等）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T12:57:06.323

`Transform`您可以使用->`Compute variable...`函数完全按照您的建议进行操作。只需在框中输入您的新秤的名称，`Target variable`并在框中输入您想要添加的内容`Numeric variable`。

您将看到运行了以下 SPSS 语法命令：

```
COMPUTE total=v1 + v2 + v3 + v4\. 
EXECUTE. 
```

![在此处输入图像描述](../Images/bb7785f7d5359d891771cb9bc0d0d457.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T12:53:41.027

如果任何变量有缺失值，那么简单地添加它们也会导致缺失值。如果您不想估算缺失值，则在语法中使用 MEAN 命令效果很好。此外，如果变量在数据文件中是连续的，则可以使用 TO 修饰符使语法更具可读性。

```
COMPUTE myscore=MEAN(variable1 TO variable5)*5. 
```

结果值提供了有效的预期值。

但是，在这种情况下，问题似乎是数据输入过程对所有项目进行了虚拟编码，产生了 20 个单独的变量而不是 5 个，其中每个 4 个变量块的值是 0 或 1，但代表值 1到 4\. 在这种情况下，您可以使用以下语法：

```
COMPUTE mycounter=1.
COMPUTE myscore=0.
EXECUTE.
DO REPEAT a=variable1 TO variable20.
COMPUTE myscore=myscore+mycounter*a.
COMPUTE mycounter=mycounter+1.
IF (mycounter=5) mycounter=1.
END REPEAT.
EXECUTE. 
```

请注意，从变量 1 到变量 20 的变量必须将原始项目中的每组伪代码按升序聚集在一起。

# c++ - 非标量类型子类错误

> ID：12109990
> 
> 赞同：2
> 
> 时间：2012-08-24T13:05:49.757
> 
> 标签：c++, class, subclass

我一定生活在一个奇怪的 C++ 版本中。在我的代码的一部分中，我有：

```
TemplateIterator<sf::Sound> Temp;
TemplateIteratorNonConst<sf::Sound> Temp2 = Temp; 
```

忽略“常量”命名约定，因为 TemplateIteratorNonConst 目前与 TemplateIterator 没有任何不同。我得到错误：

```
'TL::TemplateIterator<sf::Sound>' to non-scalar type 'TL::TemplateIteratorNonConst<sf::Sound>' requested 
```

这意味着 C++ 存在转换问题。令人难以置信的事实是，TemplateIteratorNonConst 是一个空的子导数，*是 TemplateIterator[1] 的完全副本*：

```
//Empty to demonstrate the absurdity of the error
template<typename TemplateItem>
class TemplateIteratorNonConst : public TemplateIterator<TemplateItem>
{
private:
protected:
public:
}; 
```

即使我定义了赋值运算符（无论哪种类型 - TemplateIterator 到 NonConsts，反之亦然，相同等），它没有区别，它会吐出相同的错误。如果不是因为以下事实，这不会是一个如此令人困惑的错误：

```
TemplateIterator<sf::Sound> Temp;
TemplateList<sf::Sound> Temp2 = Temp; //A sub-class of TemplateIterator 
```

绝对不会产生错误。为什么会这样，TemplateList 是 TemplateIterator 的一个子类，在完全相同的场景中没有收到“非标量类型”警告，但 TemplateIteratorNonConst 也是 TemplateIterator 的一个子类（并且完全是重复的）呢？

由于此页面上 TemplateIterator 和 TemplateList 的长度，我无法给出完整的代码示例，并且我无法使用简单的类来复制错误（无论以哪种方式执行分配时，完全相同的子类都不会出错）。

为什么会发生此错误，并且**没有静态类型转换**（给定 TemplateList 不需要类型转换才能工作，并且 TemplateIteratorNonConst 是 TemplateIterator 的不言自明的副本，因此它不是必需的）我该如何解决这个问题？

（我觉得静态类型转换在下面掩盖了一个更主要的问题，所以我宁愿解决它）。

[1]好吧，对于学究来说，也许不是“完全”的重复（它是 TemplatorIterator 的子类），但你知道我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:23:48.873

超类型不能隐式转换为每个子类型之一。所以我对它不适用于 TemplateIteratorNonConst 并不感到惊讶。如果它适用于 TemplateList，最可能的原因是 TemplateList 有一个使用 TemplateIterator 的构造函数。

请注意，在

```
TemplateList<sf::Sound> Temp2 = Temp; 
```

没有使用赋值运算符，它尝试使用构造函数，就像

```
TemplateList<sf::Sound> Temp2(Temp); 
```

附加要求构造函数不能是隐式的。

要解决您的问题，您必须

*   `TemplateIteratorNonConst(TemplateIterator<TemplateItem> const&);`在 TemplateIteratorNonConst 中提供了一个

*   `operator TemplateIteratorNonConst<TemplateItem>();`在 TemplateIterator 中提供了一个。

如果您同时控制两者，第一个选项可能是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:24:15.517

你应该有一个

```
TemplateIteratorNonConst::TemplateIteratorNonConst(const TemplateIterator<T>& other) 
```

构造函数和一个

```
TemplateIteratorNonConst::operator=(const TemplateIterator<T>& other) 
```

你的超载`TemplateIteratorNonConst`需要`TemplateIterator<T>`

# iphone - 使用飞行控制应用程序等触控点绘制贝塞尔曲线

> ID：12109992
> 
> 赞同：2
> 
> 时间：2012-08-24T13:05:53.957
> 
> 标签：iphone, xcode, cocos2d-iphone, bezier

我正在开发新的应用程序，例如在 ios App.in 中的飞行控制，我需要通过触摸和触摸移动绘制贝塞尔曲线，就像在飞行控制应用程序中一样。对于我收集数组中的所有触摸点，我们必须传递给贝塞尔。这是正确的过程吗？，以及我们如何从 array.can nows 中删除不必要的点，这是移动 ccsprite 对象以及飞行控制应用程序等接触点的最佳方式，如果有任何教程是示例代码，将对我有很大帮助。谢谢。

# axis2 - 如何在 WSO2 Axis2 服务中使用 ClassPathResource 类？

> ID：12109993
> 
> 赞同：1
> 
> 时间：2012-08-24T13:05:54.810
> 
> 标签：axis2, wso2, wso2carbon

我在 WSO2 Axis2 服务项目的 java 类路径中放置了一个文本文件并将其上传到 WSO2 AS 服务器，但我的 Axis2 服务无法通过 ClassPathResource 类找到它。异常如下：

> IOException 从类路径资源 [xxx.xml] 解析 XML 文档

我确定我的 xxx.xml 文件已经上传到 AS 服务器上的 .aar 包中：

> ```
> service.aar
> ...[META-INF]
> ...[package dir]
> ...xxx.xml 
> ```

如何使用 ClassPathResource 类在 WSO2 Axis2 服务下查找文件资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:50:43.403

假设您有“xxx.xml”文件位于服务归档的层次结构的顶层，您可以使用以下 java 片段在 Axis2 服务类中访问它。

........ InputStream is = getClass().getResourceAsStream("/xxx.xml"); …………

希望这可以帮助！

干杯，普拉巴斯

# qtp - 当我停止测试并打开另一个测试时，QTP 关闭 Firefox

> ID：12109997
> 
> 赞同：1
> 
> 时间：2012-08-24T13:06:14.107
> 
> 标签：qtp

我是 QTP 的新手，我尝试通过一些教程和文档来学习它。我需要为在 Firefox 中运行的 Java 应用程序（一个大应用程序）更新大量现有测试。

我对他们中的很多人都有疑问。他们使用了内部操作，但也使用了名为“工具”的测试中的现有操作。其他测试使用这些现有操作。

“工具”中的一项操作是单击一个链接，但它的 id 和文本发生了变化，QTP 无法识别它。

我已执行以下操作来更新对象存储库中的链接：

我启动我的测试，它在 Firefox 中运行应用程序。我在链接所在的网页上停止测试。然后，我尝试更新对象存储库中的链接。但它是只读的。所以，我打开测试名称“工具”，操作在哪里。

我打开对象存储库，链接的对象在这里，我可以更新它。但是当我打开另一个测试时，QTP 会自动关闭 Firefox！

我尝试在维护模式和更新模式下运行我的测试，但它没有更新链接。我找到的唯一解决方案是手动打开应用程序，转到网页，然后打开测试“工具”并更新链接。该应用程序非常大，我进行了很多测试，其中包含很多无法识别的链接和数据网格。

有没有办法强制 QTP 不关闭 Firefox？它会快得多。（浏览器清理不检查）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T07:16:42.020

看来是补丁问题。由于 QTP 10 仅支持 Firefox 3.0.x 版本，因此您可能会在使用更高版本的 Firefox 时遇到很多问题。您使用 10 或 11 哪个 QTP 版本？

如果您找到 Firefox 的相关补丁并安装，那就太好了。也许它可以解决你的问题。

# java - 使用 Java 如何在使用 javamail 阅读时从 pop3 电子邮件中删除 html？

> ID：12109998
> 
> 赞同：1
> 
> 时间：2012-08-24T13:06:16.003
> 
> 标签：java, regex, jakarta-mail, pop3, strip-tags

我需要让用户向一个地址提交一封电子邮件，该地址将用于在我的数据库中填充实体。我的程序会定期检查收件箱是否有新邮件，当它找到新邮件时，我需要使用主题、发件人、发送日期、附件和正文来填充数据库实体。我已经能够获取所有字段，但是当正文包含 html 时我遇到了问题。我只需要存储电子邮件的文本。我想从正文中删除所有标签、签名等。除了正则表达式，还有更好的方法吗？

这是我用来获取正文的函数。我的问题在于当 mimetype 在函数的最后一部分遇到“multipart/*”情况时。该函数返回 html 消息。除了正则表达式，我还能做些什么来去除该部分中的标签？

```
 /**
 * Return the primary text content of the message.
 */
private String getText(Part p) throws MessagingException, IOException {
    if (p.isMimeType("text/*")) {
        String s = (String)p.getContent();
        textIsHtml = p.isMimeType("text/html");
        return s;
    }

    if (p.isMimeType("multipart/alternative")) {
        // prefer html text over plain text
        Multipart mp = (Multipart)p.getContent();
        String text = null;
        for (int i = 0; i < mp.getCount(); i++) {
            Part bp = mp.getBodyPart(i);
            if (bp.isMimeType("text/plain")) {
                if (text == null){
                    text = getText(bp);
                }
                continue;
            } 
            else if (bp.isMimeType("text/html")) {
                String s = getText(bp);
                if (s != null){
                    return s;
                }
            } 
            else {
                return getText(bp);
            }
        }
        return text;
    } 
    else if (p.isMimeType("multipart/*")) {
        Multipart mp = (Multipart)p.getContent();
        for (int i = 0; i < mp.getCount(); i++) {
            String s = getText(mp.getBodyPart(i));
            if (s != null)
                return s;
        }
    }
    return null;
} 
```

非常感谢任何和所有帮助。

我一直在尝试以下方法，但它导致了我在下面评论过的西班牙语问题。

```
 else if (p.isMimeType("multipart/*")) {
        Multipart mp = (Multipart)p.getContent();
        for (int i = 0; i < mp.getCount(); i++) {
            String s = getText(mp.getBodyPart(i));
            Document doc = Jsoup.parse(s);
            String retText = doc.text();
            retText.replaceAll("[0%d0%a]", "<br />");
            if (retText != null)
                return retText;
        }
    } 
```

我也尝试过 [\r\n] 和 [\n] 作为我的正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:11:53.973

您可以使用一些 HTML 解析器（例如[jsoup](http://jsoup.org/)）来遍历 HTML 代码并仅提取您想要的文本。

看一看：

*   [http://jsoup.org/cookbook/introduction/parsing-a-document](http://jsoup.org/cookbook/introduction/parsing-a-document)
*   [http://jsoup.org/apidocs](http://jsoup.org/apidocs)
*   [http://jsoup.org/apidocs/org/jsoup/Jsoup.html](http://jsoup.org/apidocs/org/jsoup/Jsoup.html)