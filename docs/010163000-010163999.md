# StackOverflow 问答 10163000-10163999

# javascript - 图像更改功能和如果块错误

> ID：10163011
> 
> 赞同：-1
> 
> 时间：2012-04-15T14:43:28.287
> 
> 标签：javascript, jquery, javascript-events

我在使用从下拉菜单中选择的选项更改页面上的图像的脚本时遇到问题。当我有一个下拉菜单更改一张图像时，我可以让它工作。但我正在尝试扩展我的代码，以便我可以从一个下拉菜单中替换两个图像，我不确定我的代码有什么问题。

```
<script>
window.onload=function()
{

    bp='http://www.nessasneedles.co.uk/images/layout/shop/samples/fabric/', //base url     of your images
    imgnum=4, //Number of your images. This should match on your comboboxes options.
    thumb1=document.getElementById('outer_example'), //id of your outer image that will     be changing. The outer of the bag
    thumb2=document.getElementById('lining_example'), //id of the image using in the if     clause for second image
    combobox1=document.getElementById('outer_option'), // id of your combobox. The     select box for the outer design.

    combobox1.onchange=function()
    {
    thumb1.src=bp+'img'+this.value+'.jpg';

    if (this.value = "Cats") {
        thumb2.src=bp+'img'+"Purple Gingham"+'.jpg';
    } else {
        thumb2.src=bp+'img'+"Pink"+'.jpg';
        };    
    }; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:00:38.153

您的 if 语句中需要一个 double == ：

```
if (this.value == "Cats") { 
```

Single = 用于赋值，double == 用于比较。

# java - jar 获取图像作为资源

> ID：10163012
> 
> 赞同：2
> 
> 时间：2012-04-15T14:43:32.263
> 
> 标签：java, jar, resources, embedded-resource

我正在尝试从我的 jar 中加载图像。但无论我为 getResource() 提供什么字符串，它总是返回 null。

```
try {
    System.out.println(Bootstrapper.class.getResource("./img/logo.png").toURI().getPath());
} catch (URISyntaxException ex) {
    Logger.getLogger(CrawlerFrame.class.getName()).log(Level.SEVERE, null, ex);

   }
   ImageIcon ii = new ImageIcon(Bootstrapper.class.getResource("./img/logo.png"));
   setIconImage(ii.getImage()); 
```

> net.sharpcode.crawler.ui.CrawlerFrame.init(CrawlerFrame.java:35) 在 net.sharpcode.crawler.ui.CrawlerFrame.(CrawlerFrame.java: 28) 在 net.sharpcode.crawler.Bootstrapper$1.run(Bootstrapper.java:55)

![在此处输入图像描述](../Images/5658ceda2560ec35c98da3f96dc40176.png)

我试过了：

```
getResource("") 
getResource(".") 
getResource("./") 
getResource("/img/logo.png") 
Bootstrapper.class.getProtectionDomain().getCodeSource().getLocation().getPath() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T14:55:30.003

```
this.getClass().getResource("/net/sharpcode/crawler/img/logo.png") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:46:10.063

摆脱“./”部分 - 只需使用：

```
Bootstrapper.class.getResource("img/logo.png"); 
```

...如果它是*相*对于`Bootstrapper.class`. 如果`img`“目录”在 jar 文件的根目录中，请使用

```
Bootstrapper.class.getResource("/img/logo.png"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:46:41.017

从堆栈跟踪中，我看到`Bootstrapper`该类位于`net.sharpcode.crawler`包中。这意味着以下路径`./img/logo.png`将被解析为`/net/sharpcode/crawler/img/logo.png`. 我猜`/img`是顶级目录，所以要么使用绝对路径：

```
Bootstrapper.class.getResource("/img/logo.png") 
```

或通过以下方式加载`ClassLoader`：

```
Bootstrapper.class.getClassLoader().getResource("img/logo.png") 
```

# regex - 如何使用 C# 在 Visual Studio 2010 中使用正则表达式或 HTMLAgilityPack 抓取 HTML 页面的特定部分？

> ID：10163014
> 
> 赞同：0
> 
> 时间：2012-04-15T14:43:38.243
> 
> 标签：regex, c#-4.0, html-parsing, html-agility-pack

我有`var source="<p><a href="http://in.news.yahoo.com/googles-stock-split-raises-questions-023232813.html"><img src="http://l.yimg.com/bt/api/res/1.2/TRLtYhdbTvFcX_GOU_0S4g--/YXBwaWQ9eW5ld3M7Zmk9ZmlsbDtoPTg2O3E9ODU7dz0xMzA-/http://media.zenfs.com/en_us/News/Reuters/2012-04-14T023232Z_5_CBRE83B1MAL00_RTROPTP_2_USA.JPG" width="130" height="86" alt="People visit Google's stand at the National Retail Federation Annual Convention and Expo in New York" align="left" title="People visit Google's stand at the National Retail Federation Annual Convention and Expo in New York" border="0" /></a>(Reuters) - An unusual stock split designed to preserve Google Inc founders' control of the Web search leader raised questions and some grumbling on Wall Street, even as investors focused on the company's short-term business concerns. Shares of Google closed 4 percent lower at $624.60 on Friday, driven by deepening worries about its search ad rates and payments to partners. The declining search trends underscored investor uncertainty about Google's growth prospects and unease about the company's pending $12.5 billion acquisition of Motorola Mobility. ...</p><br clear="all"/>"` 现在我需要解析/**抓取**它以获取变量中的链接地址，即`http://in.news.yahoo.com/googles-stock-split-raises-questions-023232813.html`在单独的变量中获取图像 src。`</a>`我还需要和..之间的描述文本`</p>`。请帮助我严重卡住...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:33:27.630

使用 HtmlAgilityPack 尝试以下代码片段

```
var source = @"<p><a href=""http://in.news.yahoo.com/googles-stock-split-raises-questions-023232813.html""><img src=""http://l.yimg.com/bt/api/res/1.2/TRLtYhdbTvFcX_GOU_0S4g--/YXBwaWQ9eW5ld3M7Zmk9ZmlsbDtoPTg2O3E9ODU7dz0xMzA-/http://media.zenfs.com/en_us/News/Reuters/2012-04-14T023232Z_5_CBRE83B1MAL00_RTROPTP_2_USA.JPG"" width=""130"" height=""86"" alt=""People visit Google's stand at the National Retail Federation Annual Convention and Expo in New York"" align=""left"" title=""People visit Google's stand at the National Retail Federation Annual Convention and Expo in New York"" border=""0"" /></a>(Reuters) - An unusual stock split designed to preserve Google Inc founders' control of the Web search leader raised questions and some grumbling on Wall Street, even as investors focused on the company's short-term business concerns. Shares of Google closed 4 percent lower at $624.60 on Friday, driven by deepening worries about its search ad rates and payments to partners. The declining search trends underscored investor uncertainty about Google's growth prospects and unease about the company's pending $12.5 billion acquisition of Motorola Mobility. ...</p><br clear=""all""/>";

HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(source);

var paraNode = doc.DocumentNode.SelectSingleNode("//p");
var desc = paraNode.InnerText;

var anchorNode = doc.DocumentNode.SelectSingleNode("//p/a");
var link = anchorNode.GetAttributeValue("href", null);

var imgNode = doc.DocumentNode.SelectSingleNode("//p/a/img");
var src = imgNode.GetAttributeValue("src", null); 
```

有很多方法可以做到这一点，但这只是完成工作的方法之一。它让您知道如何使用`HtmlAgilityPack`. `XPATH`在解析这样的东西时会给你很大的力量。

# c# - 将过滤器表达式动态添加到数组

> ID：10163015
> 
> 赞同：10
> 
> 时间：2012-04-15T14:43:57.397
> 
> 标签：c#, linq

我有这个例子，它创建了 3 个表达式并将它们添加到一个表达式数组中。现在我想知道如何在循环中为未知数量的表达式做同样的事情。

```
Expression<Func<Product, bool>> filter1 = c => c.City.StartsWith("S");
Expression<Func<Product, bool>> filter2 = c => c.City.StartsWith("M");
Expression<Func<Product, bool>> filter3 = c => c.ContactTitle == "Owner";

Expression<Func<Product, bool>>[] filterExpressions = new Expression<Func<Product, bool>>[] { filter1, filter2, filter3 }; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T14:49:26.213

使用列表而不是数组：

```
var filterExpressions = new List<Expression<Func<Product, bool>>>
    { filter1, filter2, filter3 };

filterExpressions.Add(c => c.Name.StartsWith("J")); 
```

然后，如果您出于某种原因需要将列表传递给仅采用 Array 的方法，则可以使用 ToArray() 方法：

```
var filterExpressionsArray = filterExpressions.ToArray(); 
```

# java - Java数独求解器不更改空单元格

> ID：10163025
> 
> 赞同：0
> 
> 时间：2012-04-15T14:45:56.503
> 
> 标签：java, sudoku, solver

我正在编写数独求解器（仍然需要编写复选框并实际完成程序）但我正在测试它，因为我知道。我现在正在测试的谜题“非常简单”，因为任何行/列中只有一个空单元格。这个谜题以“空”单元格作为零开始。我的问题是，当我运行程序并在调用 solve() 后打印出拼图时，零并没有改变，原始拼图只是打印出来。不知道我的问题是什么，希望得到一些指导！

```
public ArrayList<Integer> create(){

    ArrayList<Integer> possible = new ArrayList<Integer>(); 

    for(int i=1; i<10; i++){
        possible.add(i);
    }
    return possible;
}
public sudoku( int size )
{
    SIZE = size;
    N = size*size;

    Grid = new int[N][N];
    for( int i = 0; i < N; i++ ) 
        for( int j = 0; j < N; j++ ) 
            Grid[i][j] = 0;
}

public void solve()
{ 
    int a, b, c, d, i, j, k, l; 

    int count = 0;
    int value= 0;

    for(i=0; i<N;i++){
        for(j=0; j<N;j++){  
            if(Grid[i][j]==0){

                ArrayList<Integer> possible = create();

                //check row             
                for(a=0; a<N;a++){
                    for(b=0; b<N; b++){  
                        if(Grid[a][0]==possible.get(a)){
                            possible.set(a, 0);
                        }
                    }
                }
                //check column
                for(c=0; c<N;c++){
                    for(d=0; d<N;d++){  
                        if(Grid[0][d]==possible.get(d)){
                            possible.set(d,0);
                        }
                    }
                }
                for(k=0; k<9; k++){
                    if(possible.get(k)!=0){
                        count++;
                    }
                }
                if(count==1){
                    for(l=0; l<9; l++){
                        if(possible.get(l)!=0){
                            value=possible.get(l);
                        }
                    }
                }
                Grid[i][j]=value;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:59:30.943

```
if(Grid[a][0]==possible.get(a))

if(Grid[0][d]==possible.get(d)) 
```

您不要在这些行中使用 b 或 c 。你可能想要：

```
if(Grid[a][i]==possible.get(b))

if(Grid[j][d]==possible.get(c)) 
```

此外，`Grid[i][j]=value`检查应该在 if 块内。

您可能希望将 a`Set`用于可能的值，而不是`ArrayList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:07:17.497

看看你的线`if(Grid[a][0]==possible.get(a))`（和类似的点）。它在那里做什么与你真正想要什么？

您可能的数组如下所示： `[1,2,3,4,5,6,7,8,9]`

并且您的网格（只是第一行，因为您只检查 Grid[a][ **0** ]）可能看起来像这样： `[3,7,8,1,2,9,5,0,4]`

您的循环正在逐个查看每个元素并查看它们是否相等，如下所示：

```
if(1 == 3) ... it's not
if(2 == 7) ... it's not
if(3 == 8) ... it's not 
```

... ETC

所以，正如你所看到的，当你做你的

```
for(k=0; k<9; k++){
    if(possible.get(k)!=0){
        count++;
    }
} 
```

大多数情况下，您可能的数组仍然会充满选项，除非您的第一行恰好是其中`[1,2,3,4,5,6,7,8,9]`一个空格中的 0 的一些变化......所以 count 肯定会大于 1

因此，您的下一个循环 ( `for(l=0; l<9; l++)`) next 将被执行，因此值仍然（在您初始化时）为 0。

尝试在这些点上逐步通过调试器并查看数组如何交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:58:00.167

您总是只检查第一行和第一列，而检查可能数字的方式也不是您想要的。

先说几个tips：

首先，没有必要总是为循环定义一个新变量，你可以重用它们，然后你不会有太多的循环，你也不会那么容易被它们弄糊涂。

其次，如果您将所有变量命名为 a、b、c、d 等，您也很容易混淆。虽然可以将循环中的变量命名为 i、j，但如果循环太多，最好考虑更好的名称。在这种情况下，例如行和列。

为什么不从可能的列表中删除数字？就像是：

```
int index = possible.indexOf(a);
if (index != -1) possible.remove(index); 
```

然后更容易确定您还剩下多少值。你可以简单地做：

```
if (possible.size()==1) value = possible.get(0); 
```

最后一点，要遵守变量名称的约定，您可能应该使用网格而不是网格。

现在代码：

```
public void solve() { 
    int row, column, i;
    int count = 0;
    int value= 0;
    int index = 0;

    for(row=0; row<N; row++){
        for(column=0; column<N; column++){  
            if(Grid[row][column]==0){

                ArrayList<Integer> possible = create();

                //check row             
                for(i=0; i<N; i++){
                    index = possible.indexOf(Grid[row][i]);
                    if (index != -1) possible.remove(index);
                }
                //check column
                for(i=0; i<N; i++){
                    index = possible.indexOf(Grid[i][column]);
                    if (index != -1) possible.remove(index);
                }

                if (possible.size()==1) value = possible.get(0);

                Grid[row][column]=value;
            }
        }
    }
} 
```

编辑：将整个答案重写为更好的形式。

# internet-explorer - 错误的默认标记 Google Maps v3

> ID：10163029
> 
> 赞同：0
> 
> 时间：2012-04-15T14:46:14.543
> 
> 标签：internet-explorer, google-maps

我对标记 Google Maps v3 有疑问。仅适用于 IE7 和 IE8。首先加载网页，默认标记出现在地图上。如果我放大地图，它可以正常工作。

在这里，您有一个示例图像。红色、粉色和紫色标记是我的。

[http://i.imgur.com/fxGht.jpg](http://i.imgur.com/fxGht.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:14:45.047

重复标记在那里是因为你的 final `{}`in variable `markers`。删除它并在最后一个条目的末尾取出尾随的逗号。

# java - 活动和意图

> ID：10163030
> 
> 赞同：1
> 
> 时间：2012-04-15T14:46:40.267
> 
> 标签：java, android, android-intent, notifications

为了定期提醒用户必须做某事，我使用计时器定期`Notification`用新消息刷新 a。此过程必须仅在用户单击 时停止`Notification`，这会导致相应`Activity`的启动，其中`Intent`包含一个标志，该标志指定`Activity`由 a 启动`Notification`。在`onResume`我的 main 函数中`Activity`，我检索这个标志并检查它。如果设置了，我会做必要的事情来停止定期提醒。

如果用户单击 时我的应用程序未处于活动状态，我会获得此行为`Notification`，但如果`Activity`已启动，则定期提醒会一次又一次地继续。我指定 my`Activity`以`singleInstance`模式启动。

我该怎么做才能接收和处理我已经活跃的`Intent`发送？`Notification``Activity`

提前感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:04:17.013

当您使用模式时。您`singleInstance`需要覆盖`onNewIntent(Intent)`以接收 Activity 的新 Intent 并在那里完成您的工作

此外，您可能希望调用`setIntent(intent)`onNewIntent 以确保将来`getIntent()`在 Activity 生命周期内调用的获取最新的 Intent 数据。

# computer-vision - 如何通过比较两张照片来计算相机位置？

> ID：10163034
> 
> 赞同：11
> 
> 时间：2012-04-14T22:28:27.997
> 
> 标签：computer-vision

我正在尝试计算图像的相机位置。我有 2 个魔方的图像。第一个图像被认为是基本图像，下一个图像是相机移动后的图像。因此，对于第一张图像，我假设相机位于 (0,0,0)。然后，在这张图片上，我确定了魔方正面的 4 个角，如下所示（4 个角由 4 个蓝色圆圈标识）。 ![在此处输入图像描述](../Images/3e5824fd12d5a332d126fe7815b903fb.png)

然后对于下一张图像（相机移动后），我识别出魔方的同一面，如图所示 ![在此处输入图像描述](../Images/bea173ec21f8f8b8725aaa9b02f5bcb8.png)

因此，通过假设第一个图像作为基础图像，有谁知道我是否/如何计算相机为图像 2 移动了多少，如下所示： ![在此处输入图像描述](../Images/6eb7f15b43874ba6dc550f7a1361f5fd.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-14T22:45:57.163

我建议您为此使用 OpenCV。我也认为，这个问题更适合 StackOverflow。

关于这个主题的教科书是 Hartley 和 Zisserman 的“Multiple-View Geometry”。[http://www.robots.ox.ac.uk/~vgg/hzbook/](http://www.robots.ox.ac.uk/%7Evgg/hzbook/)（该网站上有一个关于基本矩阵的示例章节。）

基本上，首先找到基本矩阵，然后通过知道相机的内在参数，找到位置的解决方案。

*   基本矩阵：[http ://en.wikipedia.org/wiki/Fundamental_matrix_%28computer_vision%29](http://en.wikipedia.org/wiki/Fundamental_matrix_%28computer_vision%29)

*   内在参数：焦距和主点在图像平面上的位置。如果你有 F，那么 E = K^t * F * K，如果 K 是内在矩阵并且两个图像相同。

*   如何找到相机位置的解决方案：[http ://en.wikipedia.org/wiki/Essential_matrix#Determining_R_and_t_from_E](http://en.wikipedia.org/wiki/Essential_matrix#Determining_R_and_t_from_E)

## 算法

这就是我在 OpenCV 中的做法。我以前做过这个，所以它应该可以工作。

```
1\. Run Feature Detection and Detector Extractor on both images. 
2\. Match Features. 
3\. Use F = cv::findFundamentalMatrix with Ransac. 
4\. E = K.t() * F * K. // K needs to be found beforehand. 
5\. Do SingularValueDecomposition of E such that E = U * S * V.t()
6\. R = U * W.inv() * V.t() // W = [[0, -1, 0], [1, 0, 0], [0, 0, 1]]
7\. Tx = V * Z *  V.t() // Z = [[0, -1, 0], [1, 0, 0], [0, 0, 0]]
8\. get t from Tx (matrix version of cross product)
9\. Find the correct solution. R.t() and -t are possiblities. 
10\. Get overall scale by knowing the length of the size of the Rubrik's cube. 
```

# 替代解决方案

我确信更直接的方法也可以奏效。这种方法的好处是不需要人工输入（无监督）。对于可选的步骤 10（确定比例），情况并非如此。

一种不同的解决方案将利用 Rubrik 立方体的几何知识。例如，如果点的 3D 位置已知，则需要六个 (5.5) 点来估计相机的位置。

不幸的是，我不知道有任何软件可以自动为您执行此操作。

所以这里是替代算法：将立方体角的坐标写为 (X_i, Y_i, Z_i)，并可能还有其他已知位置的点。

标记对应点 u_i = (x_i, y_i)。对于每个对应关系，在矩阵 A 中创建两条线。 (X_i, Y_i, Z_i, 1, 0, 0, 0, 0, -x_i *X_i, -x_i* Y_i, -x_i *Z_i -x_i) (0, 0, 0, 0 , X_i, Y_i, Z_i, 1, -y_​​i* X_i, -y_​​i *Y_i, -y_* ​​i Z_i -y_i)

然后找到 p 使得 Ap = 0。即 p 是 A 的右核，或 Ap=0 的最小二乘解。

去扁平化 p，创建一个 3x4 矩阵。P。

# php - foreach 语句不返回数组中的所有值？

> ID：10163038
> 
> 赞同：-1
> 
> 时间：2012-04-15T14:47:36.060
> 
> 标签：php, arrays, foreach

我有一个非常简单的数组，其中包含一个链接和链接标题。当我打印值时，由于某种原因缺少“第三个”值。我已经仔细检查以确保第三个值存在，它确实存在。我不明白发生了什么？任何建议都会很棒！！！

```
<?php

$resources = array(
    "$link" => "$link_name",
    "$link1" => "$link_name1",
    "$link2" => "$link_name2",
    "$link3" => "$link_name3",
    "$link4" => "$link_name4"
);

foreach ($resources as $resources_link => $resources_name) {
    echo "<a href=\"$resources_link\">$resources_name</a><br>";
}
?> 
```

输出看起来像：（缺少第三个值）Link1 Link2 Link4 Link5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:54:44.307

我尝试了这段代码并且工作得很好：

```
<?php

$link = "www.google.com";
$link_name = "Google";

$link1 = "www.google1.com";
$link_name1 = "Google1";

$link2 = "www.google2.com";
$link_name2 = "Google2";

$link3 = "www.google.com3";
$link_name3 = "Google3";

$link4 = "www.google.com4";
$link_name4 = "Google4";

$resources = array("$link"=>"$link_name","$link1"=>"$link_name1","$link2"=>"$link_name2","$link3"=>"$link_name3","$link4"=>"$link_name4");
foreach ($resources as $resources_link => $resources_name) {

echo "<a href=\"$resources_link\">$resources_name</a><br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:39:29.230

我怀疑 $link, $link_name, $link1, $link_name1, ... 的值有特殊的 HTML 字符。尝试将循环更改为：

```
foreach ($resources as $resources_link => $resources_name) {
    echo "<a href=\"" . htmlentities($resources_link) . "\">" . htmlentities($resources_name) . "</a><br>";
} 
```

htmlentities() 将清理您的文本，因此它不会破坏任何 HTML 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:02:04.467

变量`$link`未定义，如果只是字符串，将双引号替换为单引号。喜欢：

```
<?php

$resources = array(
'$link'=>'$link_name','$link1'=>'$link_name1','$link2'=>'$link_name2','$link3'=>'$link_name3','$link4'=>'$link_name4');

foreach ($resources as $resources_link => $resources_name) {

echo "<a href=\'$resources_link\'>$resources_name</a><br>";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:54:28.150

我尝试了您的代码对其进行了一些修改，并且可以看到所有五个链接：

```
<?php

$resources = array(
"1"=>"A",
"2"=>"B",
"3"=>"C",
"4"=>"D",
"5"=>"E"
);

foreach ($resources as $resources_link => $resources_name) {

echo "<a href=\"$resources_link\">$resources_name</a><br>";
}

?> 
```

# javascript - 在网站上创建可以使用键盘箭头滚动到的点

> ID：10163039
> 
> 赞同：3
> 
> 时间：2012-04-15T14:47:50.490
> 
> 标签：javascript, jquery, css, parallax

我在一个很长的视差网站上工作（比如 12k 像素）。我想创建一个滚动点列表，我认为这会改善用户体验。

我认为我需要做的：1）创建一个由滚动点组成的数组，例如 0px 850px 1300px 2000px 2500px （因为它很容易所以我可以理解:) 2）在 keydown keyCode == 37 move（动画) 到上一个点，在 keyCode == 39 或 keyCode == 32 上移动到下一个点 3) 如果它的第一个滚动点，不要转到前一个，因为它不存在，与最后一个滚动点相同

有人可以教我如何编写代码吗？这是我第一次使用 javascript/jquery（或编程）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:47:31.870

不需要插件，但您可能需要修改以下代码以使用您希望能够使用箭头导航的输入字段。

[http://jsfiddle.net/lazerblade01/EDwbg/1/](http://jsfiddle.net/lazerblade01/EDwbg/1/)

您也可以轻松地将滚动条转换为动画。

编辑：添加动画滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:17:24.037

您可以将一个 ID 附加到您的滚动点元素，并使用这个 jQuery 插件来检测哪个在视口上。[http://patik.com/blog/within-viewport-javascript-and-jquery-plugin/](http://patik.com/blog/within-viewport-javascript-and-jquery-plugin/)

从那里开始，它就像使用`.next()`and一样简单`.prev()`。

我会尽快添加一个小提琴示例。

编辑：不幸的是，我无法在小提琴上做靶心；但这里的代码，如果你仍然想要它。它不完整，因为我想把其余的逻辑留给你。

[http://jsfiddle.net/NMHaW/](http://jsfiddle.net/NMHaW/)

不过，这应该为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:49:56.057

我认为你应该看看 twitter 如何在他们的引导程序中实现这一点。他们称之为scrollspy，你可以在这里找到信息：

[http://twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

# ruby-on-rails - Rails 3 - 从相关模型中获取和排序模型对象

> ID：10163041
> 
> 赞同：0
> 
> 时间：2012-04-15T14:48:04.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有 2 个模型，**Teacher**和**TeacherLeader**：

```
#  id        :integer
#  last_name :string(255)
class Teacher < ActiveRecord::Base 
  has_one :teacher_leader
end

#  teacher_id :integer
class TeacherLeader < ActiveRecord::Base  
  belongs_to :teacher
end 
```

我想找到所有担任教师领导的教师，并通过`last_name`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:07:00.723

```
Teacher.joins(:teacher_leader).uniq.order(:last_name) 
```

# iphone - 将 UINavigationBar 背景图像更改为默认值 - iOS 4.3

> ID：10163047
> 
> 赞同：2
> 
> 时间：2012-04-15T14:48:40.303
> 
> 标签：iphone, objective-c, ios, uinavigationbar

我用重载方法更改`UINavigationBar`背景图像

```
@implementation UINavigationBar (Background)
-(void) drawRect:(CGRect)rect
{
    UIImage *image = [UIImage imageNamed:@"Header.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}

@end 
```

但在某些 UIViewControllers 中，我需要删除此背景图像。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:30:52.337

您可以查看[Sebastian Celis 的这篇博文](http://sebastiancelis.com/2009/12/21/adding-background-image-uinavigationbar/)。它完全解决了您面临的问题。

也许也检查[一下](https://stackoverflow.com/questions/3483921/how-can-i-change-the-background-image-for-my-navigationbar-on-a-per-page-basis)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T14:59:53.890

以这种方式测试

```
+ (void)setNavigationbarBackground:(UINavigationBar *)nBar imageName:(NSString *)imgName {
    if([nBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)]) {
        [nBar setBackgroundImage:[UIImage imageNamed:imgName] forBarMetrics:UIBarMetricsDefault];
    } else {
        [nBar setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:imgName]]];
    }
} 
```

# php - Zend Framework 默认值形式

> ID：10163052
> 
> 赞同：3
> 
> 时间：2012-04-15T14:49:28.040
> 
> 标签：php, zend-framework, zend-form

嗨，我正在使用 zend 框架来执行我的应用程序，我想做的是将默认值设置为 Zend_form_element_text

我想要的是，当我启动 .phtm 页面时，文本区域中已经有一个可见的默认值。用户可以保留该值或更改该值。

我尝试做 $name->setValue 但它不起作用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:51:13.477

使用表单 setDefaults

```
$form->setDefaults(array('name' => 'some value')); 
```

# vb.net - vb有默认的windows路径吗？

> ID：10163053
> 
> 赞同：3
> 
> 时间：2012-04-15T14:49:42.200
> 
> 标签：vb.net

所以我只是想知道，在批处理中，他们有一种默认方式来表示原始驱动器或文件夹路径，如下所示：`%drive%`对于您的`C:\`驱动器或您的驱动器是`%windir%`Windows 目录。我需要这个来将文件提取到 windows 文件夹中，有些人可能有一个`D:\`驱动器而`C:\`不是`Windows.001`Windows。在 vb 2008-2012 中有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T14:53:37.963

您正在使用[Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder%28v=vs.90%29.aspx)枚举查找[System.Environment.GetFolderPath 。](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)或者，如果您知道环境变量的名称，您可以使用[System.Environment.GetEnvironmentVariable 。](http://msdn.microsoft.com/en-us/library/77zkk0b6.aspx)

从最后一个链接：

```
Environment.CurrentDirectory = Environment.GetEnvironmentVariable("windir") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T15:02:23.737

获取根目录中的文件夹：调用文件路径时，不要询问：“C:\Root Folder You Want\”，使用：“\Root Folder You Want\”。

但它因系统而异，因为人们有不同的文件夹（例如 Program Files 与 Program Files(x86)），在这种情况下，您可以使用 System.Environment 函数来查找他们正在运行的操作系统版本等。

您可以在此处找到相关文档：[环境方法](http://msdn.microsoft.com/en-us/library/yat6s6yb.aspx)

在 Visual Studio 中，您也可以转到 EDIT 菜单，然后选择 INSERT SNIPPET，其中有一些非常有用且易于自定义的 Environment 方法。

# java-me - 如何在 lwit 中显示索引？

> ID：10163054
> 
> 赞同：0
> 
> 时间：2012-04-15T14:49:46.810
> 
> 标签：java-me, lwuit

我正在制作一个 lwuit 应用程序。我希望在其中使用索引。

例如。如何在 LWUIT 中显示 2(raise to)3？有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:04:25.653

Create a `class` deriving `Container` containing the base expression, in your example it is 2, and the power ( here 3 ) :

```
public class Power extends Container {
    private Label pow = new Label(), base = new Label();
    public Power(String base, String power)
    {
        super(new BoxLayout(BoxLayout.Y_AXIS));
        getStyle().setPadding(0, 0, 0, 0);
        this.base.setText(base);
        String temp = "";
        while (temp.length() < base.length())
        {
            temp = temp.concat(" ");
        }
        temp = temp.concat(power);
        pow.setText(temp);
        pow.setTextPosition(Label.BOTTOM);
        Font font = Font.createSystemFont(Font.FACE_SYSTEM, Font.STYLE_PLAIN, Font.SIZE_SMALL);
        pow.getStyle().setFont(font, false);
        pow.getStyle().setPadding(Component.BOTTOM, 0, false);
        pow.getStyle().setMargin(Component.BOTTOM, 0, false);
        this.base.getStyle().setMargin(Component.TOP, 0, false);
        addComponent(pow);
        addComponent(this.base);
    }
} 
```

Then `instanciate` it in your `Form` and add it ( `addComponent` ) :

```
public class yourForm extends Form
{
    ...
    private Power expr = new Power("2","3");
    ...
    public yourForm()
    {
       ...
       addComponent(expr);
       ...
    }
    ...
} 
```

# linux - 通过 netcat 传输文件后，套接字留在 TIME_WAIT

> ID：10163066
> 
> 赞同：1
> 
> 时间：2012-04-15T14:51:35.780
> 
> 标签：linux, bash

使用[NetCat 复制](http://www.screenage.de/blog/2007/12/30/using-netcat-and-tar-for-network-file-transfer)我正在尝试通过 NetCat 通过网络复制*文件*。从控制台它工作得很好。首先，我在目标机器上运行监听 netcat，然后在源机器上运行发送。

问题是它不能从源机器的脚本中工作：

> ssh -f 用户@$desthost 'nc -l 1234 | tar xvf - > /dev/null &' #listening on destination host
> 
> tar cv /tmp/文件 | nc $desthost 1234 #发送到目标主机

我看到运行端口 1234 后仍然是打开的，并且套接字的状态是 TIME_WAIT。

如果你知道是什么问题，请帮帮我。

顺便说一句，复制后如何验证内容是否相同？

谢谢！

附录：

我发现了一件非常奇怪的事情，与目标工作上的*屏幕*相同的实现可以工作，但不稳定，有时它不会复制文件。

> ssh user@$desthost screen -dm -S test 'nc -l 1234 | tar xvf - ' #在目标主机上监听

也许超时有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:00:01.000

你不需要netcat： [http ://www.cyberciti.biz/faq/howto-use-tar-command-through-network-over-ssh-session/](http://www.cyberciti.biz/faq/howto-use-tar-command-through-network-over-ssh-session/)

您只需要一个 ssh 连接。

然后使用 md5sum 比较文件。首先检查文件大小也很聪明..

# android - 使用 startActivity 和完成刷新 Activity - 不显示选项卡

> ID：10163069
> 
> 赞同：0
> 
> 时间：2012-04-15T14:51:51.910
> 
> 标签：android, tabs, refresh, android-activity

我刚刚实现了一个调用startActivity(getIntent()) 和finish() 的“刷新”按钮。再次获得活动后，底部的选项卡消失了。知道我错过了什么吗？

main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="5dp" />
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:layout_marginBottom="-4dp" />

        <ListView
            android:id="@+id/listView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </ListView>
    </LinearLayout>
</TabHost> 
```

当 onCreate 被调用时，我放了一些数据，标签显示在屏幕底部。当我单击“刷新”按钮时，将执行以下代码：

开始活动（getIntent（）；完成（）；

此时，我得到的屏幕底部没有标签。

通过探索 XML，我可以看到当我单击选项卡时加载的 XML 不包含 TAB 标记。这可能是在我通过选项卡加载活动时发现的，但是当我通过 startActivity 启动活动时，选项卡消失了。

谢谢。

# java - 用安卓相机拍照（意图）内存不足错误

> ID：10163071
> 
> 赞同：2
> 
> 时间：2012-04-15T14:51:55.757
> 
> 标签：java, android, android-layout, mobile, android-intent

下面的代码有两个问题。它只是使用相机android的意图拍摄照片“onclick”，并将图像显示在ImageView上。

1.  在没有离开活动的情况下拍摄两三张图片后，当我旋转显示器时，它经常会因内存不足错误而崩溃。
2.  当我第一次拍照时，它会刷新图像视图但是当我第二次或第三次拍照时......它不会刷新图片，直到我旋转屏幕
3.  我想将图片保存在内部存储器而不是外部存储器上，但我不明白该怎么做，因为我尝试了几个教程并且它卡住了相机！

    公共类 HandScryActivity 扩展 Activity {

    ```
    private static int TAKE_PICTURE = 1;
    private MtgMatch myMatch;
    private File handFile;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.handscry);  
        // Disable screen saver
        getWindow().addFlags(LayoutParams.FLAG_KEEP_SCREEN_ON);
        // Load match 
        myMatch = MtgMatch.getSingletonMtgMatch();
        handFile = new File(Environment.getExternalStorageDirectory(), "test.jpg");
        if (myMatch.getHandUri() != null) { loadPicture(); }        
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        loadPicture();
    }

    // Handles onGame clicked buttons
    public void btnHandClick(View v) {
            Button clickedButton = (Button) v;
        // according to clicked button
        switch (clickedButton.getId()) {
            case R.id.btnBackToGame:
                this.finish();
                break;
            case R.id.btnTakePicture:              
                myMatch.setHandUri(Uri.fromFile(handFile));
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);                
                intent.putExtra(MediaStore.EXTRA_OUTPUT, myMatch.getHandUri());
                startActivityForResult(intent, TAKE_PICTURE);
                break;              
            default:
                break;
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {                     
            if (requestCode == TAKE_PICTURE) {
                // Display image
                if (resultCode == RESULT_OK) {
                    loadPicture();
            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the image capture
            } else {
                // Image capture failed, advise user
            }
        }
    }

    // Put the photo inside frame
    private void loadPicture() {
            ImageView img = (ImageView) findViewById(R.id.imgHand);
            img.setImageURI(myMatch.getHandUri());
    }

    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:11:07.127

你有内存泄漏。旋转屏幕导致内存耗尽的原因是屏幕旋转会自动破坏 Activity 并重建它。您可以通过覆盖 onPause 和 onStart 方法并在其中放置调试语句来证明这一点，然后旋转屏幕，您会看到它们被调用。您需要了解 android 活动生命周期。

您有内存泄漏，因为您将这些图像的引用保存在内存中。您需要跟踪内存使用情况。当您倾斜屏幕时，旧的活动会留在内存中，并会创建一个新活动。为了让垃圾收集器收集不必要的对象，您必须确保代码中没有对它们的引用。有一些工具可以绘制应用程序的内存使用情况，以便您找出内存泄漏的位置：

按照此页面中的说明让 MAT 告诉您内存泄漏的位置：

[Android中的内存分析器工具？](https://stackoverflow.com/questions/6080906/memory-analyzer-tool-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:04:10.070

要解决您遇到的高内存使用率问题，您可能需要获取相机返回的文件，将其加载到位图，并使用位图工厂选项，将选项设置为使用样本大小。（这会缩小图像，但很可能您不需要在 640x480 屏幕上显示 2560x1900 图像）查看本教程：[http ://tutorials-android.blogspot.co.il/2011/11/outofmemory-exception -when-decoding.html](http://tutorials-android.blogspot.co.il/2011/11/outofmemory-exception-when-decoding.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T11:25:37.180

尝试这个，

在从 onActivityResult 获得的图像视图解码位图上设置图像之前。

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 8;
Bitmap preview_bitmap = BitmapFactory.decodeStream(is, null, options); 
```

在图像视图上设置解码后。

# php - PHP 简单登录系统 - 500 错误

> ID：10163072
> 
> 赞同：0
> 
> 时间：2012-04-15T14:52:01.137
> 
> 标签：php, login, system

所以，我正在制作一个 SQL 登录系统，我想我会从一些简单的东西开始，比如检查用户名和密码的 IF，然后将您返回到主索引，并在右上。
我做了所有这一切，它应该从我看到的情况下工作，但是当我提交登录表单时，服务器会抛出一个`HTTP Error 500 (Internal Server Error)`. 我希望我能在这里得到一些帮助，因为我的 IRC 朋友一直无法找到解决方案。登录系统包含2个文件，其内容为：

*index.php：*

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <title>Kinz</title>
    <?php session_start(); ?>
    <link rel="stylesheet" href="stylesheet.css">
    <meta name="description" content="Kinz's personal website." />
    <meta name="keywords" content="kinz,php,login,fruity,css" />
    <meta name="author" content="Kinz" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
</head>
<body>
    <div id="mainbar">
        <label class="menubar">Home</label>

        <?php if ($_SESSION['loggedin'] == false || isset($_SESSION['loggedin']) == false) { ?>
        <form id="loginform" action="auth.php?login=true" method="POST">
            <input type="submit" class="login" id="login" name="loginSubmit" value="Login">
            <input type="password" class="login" id="password" name="password" value="Password">
            <input type="text" class="login" id="username" name="username" value="Username">
        </form> <?php } elseif ($_SESSION['loggedin'] == true) { ?>
            <label id="loginWelcome">Welcome, <?php echo $_SESSION['user']; ?>!</label> <?php } else { echo "Error."; } ?>
    </div>
    <div id="content">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </div>
</body>
</html> 
```

*auth.php：*

```
<?php session_start();
$user = preg_replace("/[^a-zA-Z1-9]/", '', $_POST['username']);
$pass = preg_replace("/[^a-zA-Z1-9]/", '', $_POST['password']);
$hpass = md5($pass);

if (isset($_POST['loginSubmit']) && $_GET['login'] == "true") {
    if ($user == "Admin" && $pass == "Password123") {
        $_SESSION['loggedin'] = true;
        $_SESSION['user'] = $user;
        header("Location: index.php"); exit();
    } else {
            print("<h1><b>Login failure.</b></h1>"); sleep(10);
            header("Location: index.php"); exit();
            }

    if (!$_SESSION['loggedin']) {
        header("Location: index.php"); exit();
    } else {
            header("Location: index.php"); exit();
    }
} ?> 
```

我在我的代码中找不到任何错误，我希望有人会。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T14:54:35.230

正确**缩进**代码后，您会看到`}`缺少 a。

```
<?php
 session_start();
 $user = preg_replace("/[^a-zA-Z1-9]/", '', $_POST['username']);
 $pass = preg_replace("/[^a-zA-Z1-9]/", '', $_POST['password']);
 $hpass = md5($pass);
 if (isset($_POST['loginSubmit']) && $_GET['login'] == "true") {
     if ($user == "Admin" && $pass == "Password123") {
         $_SESSION['loggedin'] = true;
         $_SESSION['user'] = $user;
         header("Location: index.php");
         exit();
     } else {
         print("<h1><b>Login failure.</b></h1>");
         sleep(10);
         header("Location: index.php");
         exit();
     }
     if (!$_SESSION['loggedin']) {
         header("Location: index.php");
         exit();
     } else {
         header("Location: index.php");
         exit();
     } // < Here's a missing } - Can't place two else-blocks after each other
} else {
     header("Location: index.php");
     exit();
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:59:53.480

我注意到的第一件事是它`session_start()`不在脚本的第一行。 `session_start()`必须始终在发送任何输出**之前执行！**

另外，为什么这样：

```
if (!$_SESSION['loggedin']) {
    header("Location: index.php");
    exit();
} else {
    header("Location: index.php");
    exit();
}/* THIS BIT */ else {
    header("Location: index.php");
    exit();
}/* TO HERE */ 
```

您不能在 1 个 if 语句中包含 2 个“else”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T15:23:21.627

尝试移入`session_start()`页面顶部的索引文件。（它调用页眉。）

偏题。你的`if-else`s有什么用？他们都重定向到同一页面。也许这只是为了测试，你还没有定义`$_GET`变量来显示消息或类似的东西？

更新。我不知何故错过了Artaexe的回答，所以这篇文章没用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T14:54:12.680

首先，你应该把你的代码写得更干净一点，它更容易阅读。您的根目录中是否有 .htaccess 文件？或者在任何其他目录中？这是一个隐藏文件，如果是，请在此处发布该文件的内容。

# sql-server - 从 Service Broker 外部激活非 .NET 应用程序

> ID：10163073
> 
> 赞同：2
> 
> 时间：2012-04-15T14:52:02.690
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, service-broker

您能否像从 Service Broker 中的 .NET 应用程序一样轻松地从外部激活 Java 或 Python 等非 .NET 应用程序？这样做有什么问题/疑虑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:24:07.893

外部激活逻辑应该以同样的方式应用。一旦你有一个 sql server 连接，一切都在 t-sql 和服务代理对象中处理。

[基于事件的激活](http://msdn.microsoft.com/en-us/library/ms171581.aspx)

# salesforce - 持久化 Salesforce OAuth 令牌

> ID：10163075
> 
> 赞同：1
> 
> 时间：2012-04-15T14:52:22.150
> 
> 标签：salesforce, omniauth

我正在尝试从我的 rails 应用程序联系 Salesforce REST API，并且我正在通过 OAuth2 授权我的应用程序。我只是对返回的 OAuth 令牌的生命周期感到困惑。我假设这个 OAuth 令牌是不朽的，我可以安全地将它存储在数据库中以供将来的 API 调用使用。请对此发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:21:03.183

有 2 个令牌是您需要用来进行 API 调用的访问令牌，而且寿命相对较短，还有一个刷新令牌，它是一个长期存在的令牌，您应该保留它，以后可以通过[令牌服务](https://na1.salesforce.com/help/doc/en/remoteaccess_oauth_refresh_token_flow.htm)使用它来获取新的访问令牌.

# php - 在 MySQL 中创建重复条目时重定向到自定义错误页面

> ID：10163076
> 
> 赞同：2
> 
> 时间：2012-04-15T14:52:29.873
> 
> 标签：php, mysql

当重复输入时，我试图将用户重定向到自定义错误页面（例如：error.php），这是插入语句的示例，但我不知道如何进行重定向。

```
$values = $_POST;
foreach ($values as &$value) {
    $value = mysql_real_escape_string($value);
}

$sql1="INSERT INTO loan (loan_id)
VALUES ('$values[loan_id]')";

$result = mysql_query($sql1);
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:14:55.250

重定向表单输入的正确方法是使用[HTTP 303](http://en.wikipedia.org/wiki/HTTP_303)重定向。

要在当前行重定向，请在 PHP 中执行以下操作：

```
// Tell the browser to redirect
header('Location: /error.php', TRUE, 303);

// This ensures that the script doesn't continue
// Also, it shows the error on the off chance their browser doesn't redirect
die('Input error.'); 
```

您必须确保在任何输出之前包含标头函数。

这是在您的代码中：

```
if (!$result) {
    header('Location: /error.php', TRUE, 303);
    die('Invalid query: ' . mysql_error());
} else {
    header('Location: /success.php', TRUE, 303);
    die('Success');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:55:33.667

您可以使用重定向`header()`：

```
$url = "error.php";
header("Location: " . $url); 
```

确保在发送 HTML 标头之前执行此操作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:05:40.730

我宁愿在插入之前检查现有数据，而不仅仅是插入它：

```
$query = "SELECT * FROM myDB WHERE loan_id = " . $values["loan_id"];
$result = mysql_query($query);
if (!$result) {
   echo "Wrong input";
} else {
   echo "right input";
} 
```

如果您还没有输出任何内容，您可以根据需要加载整个页面或使用重定向，而不是字符串回显

# c++ - C++ 中的自定义文件扩展名

> ID：10163082
> 
> 赞同：0
> 
> 时间：2012-04-15T14:52:42.020
> 
> 标签：c++, windows, file-extension

如何在 C++ 中创建自定义扩展？我知道在 C# 中可以很容易地实现它，但我还没有看到在 C++ 中完成类似的事情。

好吧，我的意思是，我如何编写一些东西，如果我有一个文件 .xyz 和一个读取 .xyz 文件的程序，Windows 会自动打开它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:30:44.513

看看[http://msdn.microsoft.com/en-us/library/windows/desktop/ff513920(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff513920(v=vs.85).aspx)。您显然想了解 Windows，因此每个操作系统都不同的事实并不重要。

这有几个部分。首先，您需要编写实现某些特定 COM 接口的代码。然后，您将条目放入注册表中，告诉 Windows 在哪里可以找到您编写的代码。根据您的需要，这可能只是启动您的应用程序并打开文件，但它也可能包括 Windows 资源管理器在平铺视图中显示的缩略图（word docs 和 .txt 文件看起来都一样，但 jpg 的缩略图是迷你图像）、Windows 资源管理器可以在侧面显示的预览、自定义属性等。所有这些都涉及 shell 和您的应用程序之间的交互，通过您实现的 COM 接口，以及 shell 调用，因为它在注册表中看到您已经编写了它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T15:45:38.437

在 Windows 上，您可以通过`assoc`命令行实用程序（参见[http://msdn.microsoft.com/en-us/library/bb490865.aspx](http://msdn.microsoft.com/en-us/library/bb490865.aspx)）或直接在注册表中执行操作（参见例如[http://msdn .microsoft.com/en-us/library/bb776871.aspx](http://msdn.microsoft.com/en-us/library/bb776871.aspx)）。

在 Linux 系统上，您必须为每种文件类型注册它的 MIME 类型，然后为该 MIME 类型注册一个处理程序。有关全面概述，请参阅[http://library.gnome.org/admin/system-admin-guide/stable/mimetypes-0.html.en 。](http://library.gnome.org/admin/system-admin-guide/stable/mimetypes-0.html.en)

我不得不承认，我对 Mac OS 的了解不够多，无法对此有所帮助。

**编辑：**我只记得它在 Mac OS 上是如何工作的：在您的应用程序包（`*.app/`目录）中，创建一个名为的文件`Contents/Info.plist`，其内容遵循[属性列表规范](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html#//apple_ref/doc/uid/TP40009254-SW1)[`CFBundleDocumentTypes`](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW1)，并为元素创建条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T15:08:01.820

简短的回答是你一般不能这样做。第一个问题是它取决于操作系统如何处理这个问题。即使在那里，决定谁打开哪个文件的主要不是程序，而是操作系统。而且您的操作系统根本不需要知道您是否有特定的程序。您所能做的就是在某种安装过程中建议操作系统，它应该使用您的程序打开特定文件。我不使用 Windows，但可能这意味着添加一些注册表项。

# c# - 自定义类 C# 的解析方法

> ID：10163083
> 
> 赞同：2
> 
> 时间：2012-04-15T14:52:44.137
> 
> 标签：c#

我们都知道这件事

```
bool.Parse(Session["foo"].ToString()) 
```

如何为某些自定义类实现相同的**PARSE**方法？

所以如果我有

```
class MyClass
{

} 
```

有可能这样做

```
MyClass.Parse(Session["foo"]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T14:55:49.377

您需要做的就是为您的类编写一个名为 Parse() 的静态方法，该方法接受 String 并用它创建 MyClass 的实例。

```
public class MyClass
{
    public static MyClass Parse(string input)
    {
        if(String.IsNullOrWhiteSpace(input)) throw new ArgumentException(input);

        var instance = new MyClass();

        // Parse the string and populate the MyClass instance

        return instance;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T14:56:59.107

```
public Class MyCustomClass{
   public static MyCustomClass Parse(string str){
        if (str == "Whatever"){
             return new MyCustomClass();
        }
        else if (/*other conditions*/) {

        }
   }
} 
```

或者，还有什么你不明白的吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T14:58:58.690

你可以试试这样的。

```
 public static MyCustomClass Parse(object o)
    {

        if (o == null)
            return null;

        try
        {
            if (o is MyCustomClass)
                return (MyCustomClass)o;
        }
        catch
        {
            return null;
        }
        return null;

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T14:59:31.490

绝对 - 您需要编写适量的代码来实现它，但如果必须，您当然可以手动完成：

```
public class MyClass {
    public string First {get; private set;}
    public string Last {get; private set;}
    public MyClass(string first, string last) {
        First = first;
        Last = last;
    }
    public static bool Parse(string s, out MyClass res) {
        res = null;
        if (s == null) return false;
        var tokens = s.Split(new[] {';'});
        if (tokens.Length != 2) return false;
        res = new MyClass(tokens[0], tokens[1]);
        return true;
    }
} 
```

这个版本接受一个输出参数并返回`bool`; 您可以轻松修改它以引发异常并返回`MyClass`“工厂方法样式”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T15:04:49.900

```
public class foo
{
 public static foo Parse(object obj)
 {
  return new foo(obj);
 }

 public foo(){}

 public foo(object obj)
 {
  //your code to parse from obj to foo..
 }
} 
```

在您的“框架/外部”代码中：

```
var t = foo.Parse(someInstance); 
```

# database - Google App Engine 根据列表中的值进行提取

> ID：10163085
> 
> 赞同：0
> 
> 时间：2012-04-15T14:52:46.603
> 
> 标签：database, google-app-engine

有没有办法在 GAE 中进行查询，我有一个of `list`，`userId`我想在.`User``userId``list`

就像是`query.filter("userId IN", userIdList)`

如果这是不可能的，最接近的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:45:58.520

如果您通过键获取而不是运行查询，这很简单。如果您的用户对象将其用户 ID 作为其实体键，那么您可以这样做：

```
# assume userIdList is a list of ints that are entity key ids
user_keys = [ndb.Key('User', k) for k in userIdList]
users = ndb.get_multi(user_keys) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:51:31.027

您的代码完全正确。`IN`运营商就是为此而存在的。你试过了吗？

[https://developers.google.com/appengine/docs/python/datastore/queries](https://developers.google.com/appengine/docs/python/datastore/queries)

# java - 安全策略文件和 jar

> ID：10163090
> 
> 赞同：4
> 
> 时间：2012-04-15T14:53:19.560
> 
> 标签：java, security, rmi

我有 RMI 应用程序，所以我需要使用策略文件。

我的策略文件很简单（conf.txt）：

```
grant {
    permission java.security.AllPermission;
}; 
```

我从 Eclipse 运行我的应用程序没有问题。我在 VM 参数中添加了：-Djava.security.policy=conf.txt。

我想做的是构建一个jar文件。我从 Eclipse 将它作为 Runnable JAR 文件制作，但运行它时遇到了一些问题。我尝试像这样运行它：

```
java -Djava.security.policy=C:\Users\myuser\proj\conf.txt -jar C:\Users\myuser\proj\proj.jar 
```

我得到与没有 -Djava.security.policy 选项相同的结果。

我的代码：

```
System.setProperty("java.security.policy", "./conf.txt");
...
if (System.getSecurityManager() == null) {
            System.setSecurityManager(new SecurityManager());
        } 
```

我怎样才能使它工作？如果我不必通过 -Djava.security.policy 就更好了：

```
java -jar myprog.jar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:10:50.970

对于初学者，`System.setProperty("java.security.policy", "./conf.txt");`请从您的代码中删除。它覆盖了您在命令行中设置的值，并且其中包含完整路径并且可以工作。`System.setProperty`在任何情况下，如果您在代码中，您都不会测试该命令行的效果。

# objective-c - AirPrint 连接被拒绝错误

> ID：10163092
> 
> 赞同：6
> 
> 时间：2012-04-15T14:53:41.410
> 
> 标签：objective-c, ios5, printing, error-handling, airprint

在我的 iOS 应用程序中，我有以下代码用于 AirPrinting 一个简单的 NSString。

```
#pragma mark - Print
-(IBAction)print:(id)sender {

    UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];
    pic.delegate = self;

    UIPrintInfo *printInfo = [UIPrintInfo printInfo];
    printInfo.outputType = UIPrintInfoOutputGeneral;
    printInfo.jobName = @"Message";
    pic.printInfo = printInfo;

    UISimpleTextPrintFormatter *textFormatter = [[UISimpleTextPrintFormatter alloc]initWithText:self.Message.text];
    textFormatter.startPage = 0;
    textFormatter.contentInsets = UIEdgeInsetsMake(72.0, 72.0, 72.0, 72.0); // 1 inch margins
    textFormatter.maximumContentWidth = 6 * 72.0;
    pic.printFormatter = textFormatter;
    pic.showsPageRange = YES;

    void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) =
    ^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
        if (!completed && error) {
            NSLog(@"Printing could not complete because of error: %@", error);
        }
    };
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        [pic presentFromBarButtonItem:sender animated:YES completionHandler:completionHandler];
    } else {
        [pic presentAnimated:YES completionHandler:completionHandler];
    }
} 
```

当我运行我的项目（测试它）时，这是我在 UIPrintInteractionController 上点击“打印”时在输出调试器窗口中遇到的错误：

```
Simulated\032InkJet\032@\032USER\032NAME\032iMac._ipp._tcp.local.: startJob: Unable to connect to printd: Connection refused 
```

我在使用打印模拟器的 iOS 5.1 模拟器中收到此错误。**为什么我会收到此错误？**我感觉这与我使用打印模拟器的方式有关。

感谢您提供任何帮助，并且作为旁注，有人知道如何从 iPad 上的普通 UIButton 而不是 BarButtonItem 显示 UIPrintInteraction 控制器吗？

编辑：应该注意的是，在 iOS 6.0+ 中使用 Share Sheets 时会自动设置 AirPrint。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T02:39:52.827

我遇到了完全相同的问题，基本上肉馅的答案解决了这个问题。但是，我确实必须先跳几圈。最终这是某种文件权限问题。

我做了以下事情（注意，需要管理员访问权限）：

1.  打开终端并导航到文件夹 /private/var/tmp/

2.  键入“whoami”以查看您的确切用户名。

3.  假设您的用户名是“dogtest”。输入“sudo chown dogtest:admin printd”。你会得到一个警告，基本上要求你确保你知道你在做什么。

4.  输入您的管理员密码，然后按 Enter。

5.  现在您拥有了 printd 文件的所有权，并且可以用它做您想做的事。通过键入“mv printd printd-ren”将文件重命名为其他名称。

6.  打开 iOS 模拟器和打印机模拟器。

7.  在 iOS 模拟器中打开 Safari 并转到任何网页。

8.  点击底部中心的共享按钮，然后选择打印。

9.  按照提示完成打印。您应该在打印机模拟器日志窗口中看到更多活动。此时使用您的帐户权限重新创建 printd 文件（这很好）。

10.  退出 iOS 模拟器和打印机模拟器。

11.  在模拟器中重新运行您的 iOS 应用程序，然后重新打开打印机模拟器。

12.  现在您应该能够从您的应用程序模拟 Air Print，并且打印输出将在预览中以 PDF 格式打开。

我希望这可以为您解决问题，或者至少为您指明正确的方向。祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T16:32:06.660

尝试删除

/private/var/tmp/printd

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-14T22:03:57.410

我让打印机模拟器停止为我工作，根本没有给我任何错误。我尝试了不同的模拟器，重置它们，重新启动计算机，如上所述杀死 printd 等等。

最后，为我解决的问题是改变了我的网络连接：当时，我的 macbook 上连接了 wifi 和以太网电缆（通过 Thunderbolt）——wifi + 以太网都连接到同一个网络。我拔出以太网电缆，它立即又开始工作了。

谢谢苹果，我在哪里可以找回我的 20 分钟 :)

# c# - 找不到类型或命名空间名称“Game1”

> ID：10163095
> 
> 赞同：0
> 
> 时间：2012-04-15T14:54:06.867
> 
> 标签：c#, xna

我创建了一个新的 xna 3.1 项目，并将一些源代码从文档复制到新项目，并出现了该错误。我读过它与命名空间有关，但是命名空间没有改变，老实说，我不知道还能做什么。帮助会很棒。

该错误在 program.cs 文件中带有下划线：

```
using System;

namespace MyFirstWindowsGame
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        static void Main(string[] args)
        {
            using (Game1 game = new Game1())
            {
                game.Run();
            }
        }
    }
} 
```

在上面的源代码中，game1 带有下划线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:09:02.870

该错误告诉您编译器找不到 type `Game1`。根据您复制的具体内容和方式，您可能还需要复制包含`Game1`该类的文件，或者该类型可能位于另一个命名空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:12:20.113

当您创建一个新的游戏项目时，会自动生成一个类，默认名称为 Game1。当您复制代码时，您可能将默认的 Game 后代替换为其他内容。在您的代码中查找源自 Game 的类。在您发布的示例代码中将 Game1 替换为该类名称。

例如，如果您的游戏类名为 MyWindowsGame，则 Program 类将如下所示：

```
namespace MyFirstWindowsGame 
{ 
    static class Program 
    { 
        /// <summary> 
        /// The main entry point for the application. 
        /// </summary> 
        static void Main(string[] args) 
        { 
            using (MyWindowsGame game = new MyWindowsGame()) 
            { 
                game.Run(); 
            } 
        } 
    } 
} 
```

此外，您使用的命名空间是“MyFirstWindowsGame”。如果您从某处复制代码，请确保该代码文件中的名称空间相同。

# android - Android：更改复选框背景颜色而不更改文本颜色

> ID：10163108
> 
> 赞同：1
> 
> 时间：2012-04-15T14:55:38.467
> 
> 标签：android, checkbox

checkBox.setBackgroundColor(Color.RED);

将改变整个元素的背景颜色。我只想要广场。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:57:42.720

您可以尝试`android:button="@drawable/bg_checkbox"`或`checkBox.setButtonDrawable(R.drawable.bg_checkbox);`

# javascript - jQuery检查数据表中的所有复选框

> ID：10163114
> 
> 赞同：0
> 
> 时间：2012-04-15T14:56:04.090
> 
> 标签：javascript, jquery, datatables

我在 index.php 中有以下 javascript 代码：

```
$(function () {
     $('.checkall').click(function () {
          $(this).find(':checkbox').attr('checked', this.checked);
     });
}); 
```

我通过 ajax 检索信息并使用 jQuery 数据表从该信息创建一个表，在数据表内部`head`我有一个带有`class='checkall'`.

为什么头部内的复选框不检查通过 ajax 检索到的所有其他复选框？

*我在 Firebug 中没有错误

*我检查了[如何检查 jquery 数据表中的每个复选框？](https://stackoverflow.com/questions/8881530/how-to-check-every-checkboxes-in-a-jquery-datatable)但还是不明白... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:02:56.643

我认为您的问题可能与您使用 $(this) 有关，它可能引用了“checkall”复选框。

find() 查找节点的后代，并且您要检查的复选框不是该复选框的后代。

您引用的示例通过引用 datatable.fnGetNodes() 显示了正确的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:10:20.583

```
$(function () {
     $('.checkall').click(function () {
          $(':checkbox').not(this).attr('checked', this.checked);
     });
}); 
```

如果页面上除了您的头部复选框和您要检查的复选框之外没有其他复选框，则可以使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:16:50.890

除了 GreyBeardedGeek 所说的，如果您通过 ajax 加载，如果您的 checkall 复选框是通过 ajax 调用创建并插入到 DOM 中，那么您的点击事件将不会触发。在这种情况下，您应该使用“on”（或“live”，具体取决于您的 jQuery 版本）：[http](http://api.jquery.com/live/) ://api.jquery.com/live/ 。例子：

```
$(document).on("click", ".checkall", 
  function(){ $(this).find(':checkbox').attr('checked', this.checked); }); 
```

# c - 进行 URL 匹配和标签提取的有效方法是什么？

> ID：10163118
> 
> 赞同：1
> 
> 时间：2012-04-15T14:56:27.757
> 
> 标签：c, string, algorithm, pattern-matching, go

给定这两个字符串`a = "/some/{tag}/here"`，`b = "/some/text/here"`我想要一个有效的算法来验证是否`b`与定义的模式匹配，`a`以及是否提取`b`变量中的相应部分（即：）`tag = "text"`。

也欢迎使用 C 或 Go 实现，但伪代码也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:00:24.747

阅读有关[Knuth-Morris-Pratt 字符串搜索算法的](http://en.wikipedia.org/w/index.php?title=Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm&oldid=68814731)信息。应该给你所有你需要的，包括伪代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T15:02:34.413

也许你可以分开`a`

```
string[] array1 = a.Split('/');
string[] array2 = a.Split('/');
bool isEqual = (array1[2] == array2[2]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T15:00:31.107

许多好的正则表达式工具包可以做到这一点，但您可能必须更改模式的语法。例如，这是 Python 版本：

```
>>> import re
>>> a = re.compile("/some/(?P<pattern>.+)/here")
>>> b = "/some/text/here"
>>> a.match(b).group("pattern")
'text' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T16:58:06.937

Go 回答：Go 标准库有一个[URL 解析器](http://golang.org/pkg/net/url/)和[正则表达式](http://golang.org/pkg/regexp/)包来帮助你。Go 不允许你在运行时命名变量，所以得到你的答案是`tag = "text"`没有意义的。相反，您可能希望将结果作为结构返回，或者可能在映射中收集多个结果。大纲可能类似于，

1.  用大括号编译一个匹配你的标签语法的正则表达式。您在程序加载时执行一次。让我们称之为 tagRE。
2.  将 tagRE 应用于模式“a”。此匹配的结果将是要匹配的 URL 部分以及标记的名称。（如果匹配失败，模式“a”无效。）
3.  使用结果构造和编译另一个与真实 url 中的模式匹配的正则表达式。让我们称之为aRE。只要您认为将来可能需要匹配此模式，请坚持使用此正则表达式。重复编译它的工作是没有意义的。
4.  可能根据需要对其他模式重复步骤 2 和 3，或者当模式对您的程序可用时。也许将这些收集在切片或地图或其他东西中。我猜您还希望将这些与您的应用程序中其他有用的东西相关联，例如找到匹配项时要执行的一些代码。
5.  当你有一个你想要匹配的真实 url 时，你可能想先用 URL 包解析它以分离出 URL 路径。
6.  将 aRE（或切片中的所有正则表达式）应用于路径并查看是否有匹配项。如果是这样，则返回一个结果，其中包含来自 a 的标记名称和匹配的路径部分。您可以通过创建结果结构或添加到结果映射来实现此目的。

显示正则表达式构造的代码：

```
package main

import (
    "fmt"
    "regexp"
)

var a = "/some/{tag}/here/{and}/there"
var aPath = `/some/bread/here/jam/there`

func main() {
    tagPat := regexp.MustCompile("([^{]*){([^}]+)}")
    aMatch := tagPat.FindAllStringSubmatch(a, -1)
    if aMatch == nil {
        fmt.Println("bad pattern")
        return
    }
    aRE := ""
    matchLen := 0
    for _, m := range aMatch {
        if m[1] > "" {
            aRE += `\Q` + m[1] + `\E`
        }
        aRE += "(?P<" + m[2] + ">.*)"
        matchLen += len(m[0])
    }
    if matchLen < len(a) {
        aRE += `\Q` + a[matchLen:] + `\E`
    }
    aPat := regexp.MustCompile(aRE)
    pathMatch := aPat.FindStringSubmatch(aPath)
    if pathMatch == nil {
        fmt.Println("url doesn't match")
        return
    }
    for tx, tag := range aPat.SubexpNames()[1:] {
        fmt.Println(tag, "=", pathMatch[tx+1])
    }
} 
```

输出：

> 标签 = 面包
> 和 = 果酱

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T18:36:36.703

因此，您有一个格式为 的模式字符串`/some/{tag}/here`，并且您想确定其他字符串是否与该模式匹配。如果是这样，那么您要提取该`{tag}`部分。

在我看来，您可以将模式字符串分成三部分：

```
"/some/"
"{tag}"
"/here" 
```

现在，使用标准 C 比较函数（我在想类似的东西`strncmp`），检查字符串是否以 . 开头`"/some/"`和结尾`"/here"`。如果是这样，那么您可以轻松找到标记字符串的开头和结尾。开头是：

```
stringBegin = s + strlen("/some/");
length = strlen(s) - strlen("/some/") - strlen("/here"); 
```

然后复制出那个子字符串就很简单了。

当然我的例子是使用常量字符串。但是，如果您可以轻松地拆分组件，那么您可以用变量替换常量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T16:16:37.880

我假设您的标签中不能有斜杠。如果不是这样，我的解决方案在没有大量修改的情况下将无法工作。

如果上述情况成立，那么您可以首先将您的路径标记为一个列表，如他的答案中显示的 user1288160。我的解决方案将在进行中。

```
path := strings.Split(url, "/") 
```

然后您可以使用简单的状态机来处理令牌。

```
type urlParser func([]string) (urlParser, []string, error)

// define handlers for the various tokens that do appropriate things
var parseMap map[string]urlParser

var startParse = func(ps []string) (urlParser, []string, error) {
   switch  {
   case len(ps) == 0:
      return nil, nil, errors.New("End Of Path")
   case len(ps) == 1:
     return parseMap[ps[0]], nil, nil
   case len(ps) > 1:
     return parseMap[ps[0]], ps[1:], nil
   }
}

p := startParse
var err error
for {
   // get the next step in the state machine, unparsed portion of the path
   // and any errors.
   next, rst, pErr := p(path)
   // an error means we are done.
   if pErr != nil {
     break;
   }
   // set up for our next iteration of the parse loop.
   p = next
   path = rst
   err = pErr
} 
```

您的 urlParsers 将是用您匹配的任何内容填充一些变量的闭包。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T00:02:40.283

为了我们可以帮助它，我们需要背景信息。例如，什么构成了“模式”，数字？字母？数字和字母？允许使用哪些字符？

第一个风景：假设路径目标的位置是固定的，你可以这样做：

**C代码：**

```
char * string = "/some/text/here";
char * path;
char * b = "text";

if(strtok(strdup(string), "/")) {
    path = strtok(NULL, "/");
    if(!strcmp(b, path)) {
        /* Are equals. Do something.. */
    } else {
        /* ... */
    }
} else { 
    printf("Not found tag.\n");
} 
```

第二景：

假设您只知道路径目标的前身，您可以执行以下操作：

**C代码：**

```
char * string = "/some/text/here";

char *cpath,            /* Current path */ 
     *ppath   = NULL,   /* Predecessor path */
     *ptpath  = "some", /* Predecessor path target */
     *pathcmp = "text"; /* Path to compare */ 

cpath = strtok(strdup(string), "/");

 while(cpath) { 
    ppath = cpath; 
    cpath = strtok(NULL, "/");

    if(ppath && ptpath && !strcmp(ppath, ptpath)) {
        if(!strcmp(cpath, pathcmp)) {
            /* Are equals. */
        } else {
            /* ... */
        }

        break;
    }
} 
```

像这样的非常简单的情况，可以从正则表达式和 URI 解析中逃脱（当然，在良好的意义上）。

我希望这对你有帮助。

# python - 在龙卷风数据库模块中，execute_lastrowid(...) 是否可以在并发下正常工作？

> ID：10163129
> 
> 赞同：0
> 
> 时间：2012-04-15T14:58:27.583
> 
> 标签：python, mysql, concurrency, tornado

我正在使用[Tornado web server](http://www.tornadoweb.org/)编写服务器应用程序。应用程序通过`tornado.database`模块与 MySQL 数据库一起工作。在数据库中有一个表

```
CREATE TABLE SampleTable (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    txt VARCHAR(256)
); 
```

作为对某些查询的反应，我需要向该表写入一条新记录并将`id`新创建的记录返回给客户端。所以在服务器代码中我有这些行：

```
class Application(tornado.web.Application):
    def __init__(self):
        handlers = [(r'/somequery', queryHandler)]
        tornado.web.Application.__init__(self, handlers)
        self.db = tornado.database.Connection(
            host="localhost", database="sampledb",
            user="sampleuser", password="samplepassword") 
```

和一个处理程序：

```
class queryHandler(tornado.web.RequestHandler):
    def post(self):
        lastid = self.db.execute_lastrowid("INSERT INTO \
                                            SampleTable (txt) \
                                            VALUES('some text');")
        print lastid 
```

据我所知，`tornado.database`它是一个相对简单的`MySQLdb`python 模块包装器，它只保证每个连接的最后一行 id 的正确工作。就我而言，整个应用程序只有一个连接。

那么，如果有几个并发的客户端查询`/somequery`，最后一行 ID 是否可能会在客户端之间出现混乱，或者龙卷风会处理它？

我尝试查看的[来源](http://www.tornadoweb.org/documentation/database.html)，`tornado.database`但没有发现任何关于我的问题的信息。

如果这不能正常工作，该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:21:41.103

`execute_lastrowid`（实际上`tornado.database`一般来说）不是异步的，也就是说，它会阻塞你的应用程序。

因此，您不会从另一个客户端的请求中获取 id，但如果一个插入需要很长时间，其他客户端将不得不等待它。

与您的问题无关，但通常不应通过 GET 请求访问数据更改（例如 INSERT）。请改用 POST。

# android - 扩展 DialogPreference 时的 Android 类强制转换异常

> ID：10163130
> 
> 赞同：0
> 
> 时间：2012-04-15T14:58:30.200
> 
> 标签：android, android-layout, android-preferences

我已经扩展了 DialogPreference 类，并希望我可以使解决方案像[这样](https://stackoverflow.com/questions/6425702/layout-for-timepicker-based-dialogpreference)工作。

我想在我的系统中实现我的 TimePreference 类，但是在调用 PreferenceActivity 时我得到一个运行时异常

```
04-15 16:47:31.555: W/MediaPlayer(28689): mediaplayer went away with unhandled events
04-15 16:47:31.555: W/MediaPlayer(28689): mediaplayer went away with unhandled events
04-15 16:47:31.594: D/libEGL(28689): loaded /system/lib/egl/libGLES_android.so
04-15 16:47:31.609: D/libEGL(28689): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
04-15 16:47:31.633: D/libEGL(28689): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
04-15 16:47:31.637: D/libEGL(28689): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
04-15 16:47:31.793: D/OpenGLRenderer(28689): Enabling debug mode 0
04-15 16:47:36.938: D/AndroidRuntime(28689): Shutting down VM
04-15 16:47:36.938: W/dalvikvm(28689): threadid=1: thread exiting with uncaught exception (group=0x40a4c1f8)
04-15 16:47:37.024: E/AndroidRuntime(28689): FATAL EXCEPTION: main
04-15 16:47:37.024: E/AndroidRuntime(28689): java.lang.RuntimeException: Unable to start activity ComponentInfo{app.timer/app.timer.PrefsActivity}: java.lang.ClassCastException: java.lang.Boolean cannot be cast to java.lang.String
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.os.Looper.loop(Looper.java:137)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at java.lang.reflect.Method.invokeNative(Native Method)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at java.lang.reflect.Method.invoke(Method.java:511)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at dalvik.system.NativeStart.main(Native Method)
04-15 16:47:37.024: E/AndroidRuntime(28689): Caused by: java.lang.ClassCastException: java.lang.Boolean cannot be cast to java.lang.String
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.SharedPreferencesImpl.getString(SharedPreferencesImpl.java:205)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.Preference.getPersistedString(Preference.java:1396)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at app.timer.TimePreference.onSetInitialValue(TimePreference.java:110)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.Preference.dispatchSetInitialValue(Preference.java:1312)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.Preference.onAttachedToHierarchy(Preference.java:1124)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.PreferenceGroup.addPreference(PreferenceGroup.java:156)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.PreferenceGroup.addItemFromInflater(PreferenceGroup.java:97)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.PreferenceGroup.addItemFromInflater(PreferenceGroup.java:38)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.GenericInflater.rInflate(GenericInflater.java:488)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.GenericInflater.rInflate(GenericInflater.java:493)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.GenericInflater.inflate(GenericInflater.java:326)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.GenericInflater.inflate(GenericInflater.java:263)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:269)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:1403)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at app.timer.PrefsActivity.onCreate(PrefsActivity.java:12)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.Activity.performCreate(Activity.java:4465)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-15 16:47:37.024: E/AndroidRuntime(28689):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-15 16:47:37.024: E/AndroidRuntime(28689):    ... 11 more
04-15 16:47:37.137: D/dalvikvm(28689): GC_CONCURRENT freed 230K, 4% free 9362K/9671K, paused 2ms+13ms 
```

我的 pref.xml 看起来像这样，如果我删除我的 TimePreference 就可以工作

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
   <PreferenceCategory 
        android:key="time_settings"
        android:title="@string/time_settings"
        android:summary="@string/time_settings_summary">
        <app.timer.TimePreference
            android:key="synchronize"
            android:title="@string/synchronize" 
            android:summary="@string/synchronize_summary" 
            android:icon="@drawable/ic_dialog_time" />  
    </PreferenceCategory>
    <PreferenceCategory 
        android:key="sound_cat"
        android:title="@string/sound_cat"
        android:summary="@string/sound_cat_summary">
        <CheckBoxPreference 
            android:key="mute"
            android:title="@string/mute"
            android:summary="@string/mute_summary"
            android:icon="@drawable/ic_audio_vol" />
        <ListPreference 
                android:key="beep_interval"
                android:title="@string/beep_interval"
                android:summary="@string/beep_interval_summary"
                android:entries="@array/beep_interval_options"
                android:entryValues="@array/beep_interval_option_values"
                android:defaultValue="2"
                android:icon="@drawable/ic_audio_alarm" />      
    </PreferenceCategory>
    <PreferenceCategory 
        android:key="screen"
        android:title="@string/screen_cat"
        android:summary="@string/screen_cat_summary">
        <CheckBoxPreference 
            android:key="screen_dim"
            android:title="@string/screen_dim"
            android:summary="@string/screen_dim_summary"
            android:icon="@drawable/ic_menu_view" />
        <ListPreference 
                android:key="format"
                android:title="@string/format"
                android:summary="@string/format_summary"
                android:entries="@array/format_options"
                android:entryValues="@array/format_option_values"
                android:defaultValue="0"
                android:icon="@drawable/ic_menu_edit" />
        <CheckBoxPreference 
            android:key="indigo"
            android:title="@string/indigo"
            android:summary="@string/indigo_summary"
            android:icon="@drawable/brightness" />
   </PreferenceCategory>
   <PreferenceCategory
        android:title="@string/about" 
        android:summary="@string/about_summary" >          
   <ListPreference
       android:key="version_build"
       android:enabled="false"
       android:title="version 1.01"
       android:summary="build 3"  /> 
   </PreferenceCategory>  
</PreferenceScreen> 
```

这就是 TimePreference 类

```
package app.timer;

import android.content.Context;
import android.content.res.TypedArray;
import android.preference.DialogPreference;
import android.text.format.DateFormat;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.widget.TimePicker;

public class TimePreference extends DialogPreference {
    protected int lastHour=0;
    protected int lastMinute=0;
    protected boolean is24HourFormat;
    protected TimePicker picker=null;
    protected TextView timeDisplay;

    public TimePreference(Context ctxt) {
        this(ctxt, null);
    }

    public TimePreference(Context ctxt, AttributeSet attrs) {
        this(ctxt, attrs, 0);
    }

    public TimePreference(Context ctxt, AttributeSet attrs, int defStyle) {
        super(ctxt, attrs, defStyle);

        is24HourFormat = DateFormat.is24HourFormat(ctxt);
        setPositiveButtonText("Set");
        setNegativeButtonText("Cancel");
    }

    @Override
    public String toString() {
        if(is24HourFormat) {
            return ((lastHour < 10) ? "0" : "")
                    + Integer.toString(lastHour)
                    + ":" + ((lastMinute < 10) ? "0" : "")
                    + Integer.toString(lastMinute);
        } else {
            int myHour = lastHour % 12;
            return ((myHour == 0) ? "12" : ((myHour < 10) ? "0" : "") + Integer.toString(myHour))
                    + ":" + ((lastMinute < 10) ? "0" : "") 
                    + Integer.toString(lastMinute) 
                    + ((lastHour >= 12) ? " PM" : " AM");
        }
    }

    @Override
    protected View onCreateDialogView() {
        picker=new TimePicker(getContext().getApplicationContext());
        return(picker);
    }

    @Override
    protected void onBindDialogView(View v) {
        super.onBindDialogView(v);
        picker.setIs24HourView(is24HourFormat);
        picker.setCurrentHour(lastHour);
        picker.setCurrentMinute(lastMinute);
    }

    @Override
    public void onBindView(View view) {
        View widgetLayout;
        int childCounter = 0;
        do {
            widgetLayout = ((ViewGroup) view).getChildAt(childCounter);
            childCounter++;
        } while (widgetLayout.getId() != android.R.id.widget_frame); 
        ((ViewGroup) widgetLayout).removeAllViews();
        timeDisplay = new TextView(widgetLayout.getContext());
        timeDisplay.setText(toString());
        ((ViewGroup) widgetLayout).addView(timeDisplay);
        super.onBindView(view);
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);

        if (positiveResult) {
            picker.clearFocus();
            lastHour=picker.getCurrentHour();
            lastMinute=picker.getCurrentMinute();

            String time=String.valueOf(lastHour)+":"+String.valueOf(lastMinute);

            if (callChangeListener(time)) {
                persistString(time);
                timeDisplay.setText(toString());
            }
        }
    }

    @Override
    protected Object onGetDefaultValue(TypedArray a, int index) {
        return(a.getString(index));
    }

    @Override
    protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {
        String time=null;

        if (restoreValue) {
            if (defaultValue==null) {
                time=getPersistedString("00:00");
            }
            else {
                time=getPersistedString(defaultValue.toString());
            }
        }
        else {
            if (defaultValue==null) {
                time="00:00";
            }
            else {
                time=defaultValue.toString();
            }
            if (shouldPersist()) {
                persistString(time);
            }
        }

        String[] timeParts=time.split(":");
        lastHour=Integer.parseInt(timeParts[0]);
        lastMinute=Integer.parseInt(timeParts[1]);;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:19:35.510

java.lang.ClassCastException：java.lang.Boolean 不能转换为 java.lang.String

上面的行表明您在代码中的某些位置尝试将布尔变量转换为字符串。只需检查一次

# html - 如何通过在 CSS 中使用百分比来使 div 具有可伸缩性

> ID：10163134
> 
> 赞同：0
> 
> 时间：2012-04-15T14:58:41.577
> 
> 标签：html, css

嗨，我有一个关于可扩展 div 的问题。我知道我们可以做类似的事情

```
<pre>
    <code>
        img {
            width: 100%;
            height: 98%;
        }
    </code>
</pre> 
```

这将使图像在调整窗口大小时可扩展。但是我如何在普通的 div 中达到同样的效果呢？我也想指定最小宽度和最小高度。所以，我希望 div 关于 div 内的内容是 450x300，但是当调整窗口大小时，div 也需要能够将其大小反映到窗口。但是，当我做类似的事情时

```
<pre>
    <code>
    div {
        min-width: 450px;
        min-height: 300px;
        width: 100%;
        height: 100%;
    }
    </code>
</pre> 
```

我怀疑它不适用于所有浏览器。请建议我解决这个问题。

**更新** 这里是我的代码示例[http://jsfiddle.net/noppanit/Xfpp7/](http://jsfiddle.net/noppanit/Xfpp7/)

我想要做的是无论图像有多大，“某些文本”的 div 都必须与图像具有相同的大小。当您调整窗口大小时，“某些文本”会以与图像相同的速度缩小或增长。不确定这在纯 CSS、HTML 中是否可行。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:05:14.910

好的，两个潜在的问题：

*   你的最小高度有错别字
*   您是否也指定了 div 容器的高度？例如，如果 div 直接在 中`body`，你必须给 body 一个特定的高度，浏览器不会知道它是什么。

**编辑：**
要回答您的评论，如果您希望 div 在大屏幕上为 450 像素宽，但在屏幕较小时缩小，您需要`max-width`而不是`min-width`.

# javascript - Android 使用意图和带有 phonegap 的 html 发布图像

> ID：10163141
> 
> 赞同：1
> 
> 时间：2012-04-15T14:59:29.837
> 
> 标签：javascript, android, html, cordova, android-intent

我如何将图像获取到 html 文件，您还可以在其中写下关于该文件的描述并将其发布到 Web 服务器？使用此代码从在图库中共享获取操作。在 manifest.xml 中也有意图代码

```
 Intent intent = getIntent();
    if(intent.getAction().equals(Intent.ACTION_SEND))
    {
        Uri data = intent.getParcelableExtra(Intent.EXTRA_STREAM); 
        if (data != null) {
        data.toString();            
        super.loadUrl("file:///android_asset/www/i2.html#" + data);
        }
    } 
```

加载 url 和 data 是图像路径。但是 JS 不允许为 input type="file" 赋值，所以我需要另一种方法来做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:30:19.127

好的，这里有几个问题。

1.  您不能预先填充输入类型文件的值。为什么？如果有人创建了一个隐藏文件输入，用 ~/mypasswords.txt 预先填充它并在你不知情的情况下上传它怎么办？这是一个明显的安全风险，没有一个像样的，半途而废的浏览器会允许它。

2.  如果 data 是图像的 url，那么在您的 html 源代码中，您可以编写一些 javascript 来解析文档的 URL 以获取 url 并创建/设置 img 元素的 src 属性以显示图像。

3.  如果您希望随后将图像上传到（真实）互联网上其他地方的服务器（例如，不是本地资产而是实时服务器），那么您将必须创建一个文件类型的可点击输入并让用户选择图像本身。您是否通过将图像文件保存到易于访问的位置（例如 SD 卡的根目录，甚至他们的图像/图片或下载文件夹）来使用服务，然后指导他们上传正确的图像 - 您在数据变量，所以只需显示它并让用户选择该文件。

4.  如您所知，您不能通过 AJAX 帖子进行 AJAX 上传文件，您必须进行真正的 html 表单提交。您可以使用 form.submit() 为您的图像元素使这个更清洁（为您的用户），但代码复杂性似乎比有用的更多，因为您（似乎）只有一张您正在上传的图像。

# c# - C# 简单的 GUI 面板

> ID：10163144
> 
> 赞同：-1
> 
> 时间：2012-04-15T14:59:35.697
> 
> 标签：c#, .net, winforms

我一直陷入一个简单的问题。我无法删除它。

我已将面板更改为静态公共。跨页面访问面板。每当我更改 GUI 时，它都会将静态公共重置为公共。并给我一个错误。你不能在这里访问公共成员。

所以每次我改变一点GUI来运行程序时，我都必须设置静态。

你能帮帮我吗？

我知道这是一个垃圾问题。我很想知道反手发生了什么。

我正在使用 Visual Studio 2011。开发人员预览。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:44:21.480

我假设您正在使用 WinForms。

不要更改由 Microsoft Visual Studio 生成的自动生成的代码，它只会在您更改某些内容时被覆盖。而是`static`在后面的代码中使用 a 。

例如，单击时更改变量的按钮。

```
public static int MyGlobalVariable
private void button1_Clicked(object sender, EventArgs e)
{
    MyGlobalVariable = 4;
} 
```

还要考虑一个完全不同的设计，因为使用公共静态数据迟早会给你带来很多麻烦。通常会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:27:20.737

不确定我是否正确理解了您的问题（“当我更改 GUI 时”是什么意思？）但也许这就是您要寻找的：

```
public partial class Form1 : Form
{
    public static Panel panelS = new Panel();

    public Form1()
    {
        InitializeComponent();
    }
} 
```

和：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
        Form1.panelS.Location = new Point(100, 100);
    }
} 
```

# firefox-addon - 通过外部脚本和 postMessage 使用 simple-prefs (SDK API)

> ID：10163154
> 
> 赞同：4
> 
> 时间：2012-04-15T15:00:16.487
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在使用 SDK 开发我的附加组件的新版本（针对 Gmail），并且需要为我的用户存储一些布尔首选项。为此，我想使用新的“simple-prefs”API。根据[Mozilla 文档](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/simple-prefs.html)和这个[Stackoverflow 问题](https://stackoverflow.com/questions/9425013/work-with-the-simple-prefs-module-and-export-the-values-to-a-script-stored-in-th)，我得到了一些东西，但我面临以下问题：

1) 我无法将我的偏好更改正确传递给我的外部脚本数据。我需要禁用并重新启用加载项才能应用更改。

2) 如何确保首选项直接应用于打开 Gmail 的选项卡。

这是我的 package.json：

```
{
"name": "Demo", 
"license": "MPL 1.1/GPL 2.0/LGPL 2.1", 
"author": "me", 
...

"preferences": [{
    "type": "bool",
    "name": "option1",
    "value": true,
    "title": "Description Option1"
},
    {
    "type": "bool",
    "name": "option2",
    "value": true,
    "title": "Description Option2"
  }]
} 
```

我的 main.js：

```
const pageMod = require("page-mod");
const data    = require("self").data;
const prefSet = require("simple-prefs");

// Get the values for options
var option1 = prefSet.prefs.option1;
var option2 = prefSet.prefs.option2;

// Listen for changes
function onPrefChange(prefName) {  prefSet.prefs[prefName];  }

prefSet.on("option1", onPrefChange);
prefSet.on("option2", onPrefChange);

exports.main = function() {
  pageMod.PageMod({ 
  include: ["https://mail.google.com/*","http://mail.google.com/*"],
  contentScriptWhen: 'ready',
  contentScriptFile: [data.url("jquery.js"),data.url("script.js")],
  onAttach: function(worker)
    {
      worker.postMessage(option1);
      worker.postMessage(option2);
     }
 });
} 
```

我的 script.js（在数据中）：

```
(function(){

// Option 1
self.on("message", function(option1)    { 
  if( option1 == true ) {  
           // Do this
                          }});

// Option 2
self.on("message", function(option2)    { 
  if( option2 == true ) {  
           // Do this
                          }});
})(); 
```

在我的 main.js 文件中使用 postMessage 协议并在我的 script.js 文件中调用它当然有一种更简洁的方法......请随意提出您的想法和建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T04:01:33.797

*您需要在 onAttach 处理*程序中设置 pref 更改处理程序，因为它是代码中您可以访问 prefSet 全局和给定页面的工作实例的唯一位置。这种模式对我有用：

```
const pageMod = require("page-mod");
const data    = require("self").data;
const prefSet = require("simple-prefs");

// Listen for changes
exports.main = function() {
    pageMod.PageMod({ 
        include: ["*"],
        contentScriptWhen: 'end',
        contentScript: 'self.port.on("prefchange", function(data) { console.log(JSON.stringify(data,null,"  ")); })',
        onAttach: function(worker) {
            function onPrefChange(prefName) {
                worker.port.emit('prefchange', [prefName, prefSet.prefs[prefName]]);
            }

            prefSet.on("option1", onPrefChange);
            prefSet.on("option2", onPrefChange);
        }
    });
} 
```

有关工作示例，请参阅此 github 存储库：[https ://github.com/canuckistani/Pref-changes](https://github.com/canuckistani/Pref-changes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T13:56:32.220

好的，这是我想要的工作版本，虽然很丑。因此，如果您有更漂亮的实现方式，请随时分享！

我的**package.json**：

```
{
"name": "Demo", 
"license": "MPL 1.1/GPL 2.0/LGPL 2.1", 
"author": "me", 
...

"preferences": [{
    "type": "bool",
    "name": "option1",
    "value": true,
    "title": "Description Option1"
},
    {
    "type": "bool",
    "name": "option2",
    "value": true,
    "title": "Description Option2"
  }]
} 
```

我的**main.js**：

```
const pageMod = require("page-mod");
const data    = require("self").data;
const prefSet = require("simple-prefs");

exports.main = function() {
    pageMod.PageMod({ 
    include: ["*//example.com/*"],
    contentScriptWhen: 'end',
    contentScriptFile: [data.url("jquery.js"),data.url("script.js")],
        onAttach: function(worker) {

            // Persistent values
            var option1 = prefSet.prefs.option1;
            var option2 = prefSet.prefs.option2;

            worker.port.emit('get-prefs', [ option1, option2 ]); // sender1

            // Listen for changes
            function onPrefChange(prefName) {
                let payload = [prefName, prefSet.prefs[prefName]];
                worker.port.emit('prefchange', payload); // sender2
            }

            prefSet.on("option1", onPrefChange);
            prefSet.on("option2", onPrefChange);

        }
    });
} 
```

和我的**script.js**（在数据中）：

```
(function(){

// Persistent Values
self.port.on("get-prefs", function(prefs) {

// onPrefchange Values
self.port.on("prefchange", function(data) { 

    $(document).ready(function() {

    var option1     = prefs[0];
    var option2     = prefs[1];
    var option      = data[0];
    var value       = data[1];

    var css;

        if(option1 == true || option == "option1" && value == true){
            css = "body {background-color:red !important}";
                }

        if(option2 == true || option == "option2" && value == true){
            css = "body {background-color:blue !important}";

                }

///////////////////////////////// CSS Activation
$('head').append('<style type="text/css">' + css + '</style>');
//////////////////////////////// #CSS Activation

    });//end jQuery ready
 });
 });

})(); 
```

# c# - 在 WP7 上等待异步完成的最佳方式

> ID：10163160
> 
> 赞同：0
> 
> 时间：2012-04-15T15:00:57.723
> 
> 标签：c#, windows-phone-7

我在这方面遇到了一些困难，我正在尝试推出我的第一个 WP7 应用程序。我有一种从网站下载 html 并对其进行正则表达式的方法，但问题是，当我第一次单击按钮时，没有任何反应，在第二次尝试时，它完美地填充了网格，当我调试时我看到了甚至在方法开始之前，已经正确分配了带有 HTML 的字符串。那么，问题是，等待异步方法完成的最简单方法是什么？我搜索了 CTP async 和其他一些方法，但我无法让它工作。这是代码

```
 public static void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        doc = e.Result;
    }

    public static List<Row> Search(string number)
    {
        WebClient wClient = new WebClient();

        sNumber = number;
        int i = 0;
        DateTime datetime;

        wClient.DownloadStringAsync(new Uri(sURL + sNumber));
        wClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
              /*More code*/
     } 
```

该按钮调用方法 Search() 并使用返回的列表来填充网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:12:47.623

该`wClient.DownloadStringAsync(new Uri(sURL + sNumber));`方法在执行该方法中的所有代码后执行。

1) 起初`doc`为空

2）然后你打电话`wClient.DownloadStringAsync(new Uri(sURL + sNumber));`但不执行！

3）然后你返回 doc （它仍然是空的）

4）在这一切之后，`wClient.DownloadStringAsync(new Uri(sURL + sNumber));`被执行并被`doc`填充。

这就是为什么当您第二次按下“搜索”按钮时，网格会被完美填充

注意，您必须`DownloadStringCompletedEventHandler`在调用异步方法之前注册。而且您只需注册一次该事件处理程序，即在构造函数中，因为每次执行该方法时您都添加了一个事件处理程序。因此，如果您按 Search 按钮 5 次，则网格会填充 5 次，尽管您没有注意到

一种解决方案是：

这是代码

```
 public static void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Result != null)
        {
            //populate grid view
        }
    }

    public static void Search(string number)
    {
        WebClient wClient = new WebClient();

        sNumber = number;
        int i = 0;
        DateTime datetime;

        wClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted); //this should be added in the constructor, so it would only be added once
        wClient.DownloadStringAsync(new Uri(sURL + sNumber));
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:10:12.567

您的代码中至少存在两个问题：您需要在调用`DownloadStringCompleted` *之前*`DownloadStringAsync`订阅- 否则有可能在您订阅之前下载完成。此外，由于您的完成方法非常短，您可以使用 lambda 内联执行此操作。

其次，您的方法是**异步**的-由于网络调用异步执行，因此它**不会**返回 a 。`List<Row>`您必须在您的完成方法中填充您的网格并使您的方法返回无效。这就是它第二次“工作”的原因 - 返回第一次调用的现已完成的结果。

```
wClient.DownloadFileCompleted += (sender, e) =>
{
    //you should also do error checking here
    //populate grid 
};
wClient.DownloadStringAsync(new Uri(sURL + sNumber)); 
```

# html - 在 Twitter 的 Bootstrap 中使用“row-fluid”时，偏移量不起作用

> ID：10163163
> 
> 赞同：10
> 
> 时间：2012-04-15T15:01:42.833
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap-Twitter，每当我尝试使用流畅的行时，跨度上的偏移都不起作用。这是一些代码：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="well span4 offset4">
            Content here
        </div>
    </div>
</div> 
```

所发生的只是井**没有偏移**4 个空格。我用谷歌搜索了它，但找不到明确的答案。有人有解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T12:06:11.373

Bootstrap 现在支持这个：

> 从 2.1.0-wip 开始，.offset* 类现在可以与流体网格系统一起使用

[https://twitter.com/twbootstrap/status/215649222224134144](https://twitter.com/twbootstrap/status/215649222224134144)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T18:42:41.113

我不会`!important`在现有的偏移类上使用该属性，因为它定义了一个像素值，而使用流体的全部意义在于使用百分比。

这是我想出的用于为流体行创建自己的偏移量的公式。

```
@for $i from 1 through 12 {
  .row-fluid .offset#{$i} {
    margin-left: (6.382978723% * $i) + (2.127659574% * $i);
    *margin-left: (6.329787233638298% * $i) + (2.0744680846382977% * $i);
  }
} 
```

所以，让我解释一下你在这里看到的内容。这是一个使用 SCSS 的 for 循环，用于编写 offset1 - offset12 类。这仅适用于单个媒体查询，因为您必须定义它 3 次（因为宽度和偏移量在 twitter 引导代码中的 3 个单独的媒体查询中更改）。基本原理是这样的：

```
margin-left = (width_of_span1 * x) + (margin-left_of_row-fluid_span* * x) 
```

的值`x`等于您希望偏移的列数，因此，`.offset1`您将`1`用作 的值`x`。因为`.offset12`您将`12`用作 的值`x`。

您还需要再调整一种样式，因为 twitter bootstrap会在容器内`margin-left: 0`的`:first-child`元素上放置一个。`.row-fluid`现在，最简单的方法是将`!important`属性添加到新声明的`.row-fluid .offset*`类中。您也许还可以调整他们的`:first-child`选择器，使其显示为：

`.row-fluid [class*="span"]:first-child:not([class*=offset])`

这仅适用于`margin-left: 0`元素`.span*`也没有任何`.offset*`类的情况。不过，浏览器对这种类型的支持可能非常有限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T18:08:30.773

这个[问题](https://github.com/twitter/bootstrap/pull/2394)已经在 Github 上提出了，根据 Bootstrap 开发人员的说法，随着时间的推移会修复，所以我想在此期间你主要必须依赖 hack。有两种方法可以将其添加`.offset`到`.row-fluid`类中（如果这对您有用），或者将`.offset`您选择的类添加到样式表并使用`!important`属性声明它，如下所示：

```
.offset4 {
    margin-left: 340px !important;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T11:28:06.720

这就是我正在做的事情：

```
<div class="row-fluid">
  <div class="span4"></div>
  <div class="span4">
    Content here
  </div>
</div> 
```

# javascript - Greasemonkey 脚本替换 jQuery 插件功能？

> ID：10163168
> 
> 赞同：2
> 
> 时间：2012-04-15T15:02:24.513
> 
> 标签：javascript, jquery, greasemonkey

我正在尝试为 Firefox 编写一个 Greasemonkey 脚本，以在某些页面检测到失焦窗口时更改它们的行为。我希望页面继续运行，就好像它仍然处于焦点状态一样，即使我有另一个选项卡或窗口处于活动状态。

我开始研究似乎适用于内联 Javascript ( , ) 的[CAPS 安全策略](https://www.mozilla.org/projects/security/components/ConfigPolicy.html)，但对外部 jQuery 脚本插件对焦点事件的访问没有影响。`window.onfocus``window.onblur`

这是我的测试页面，它使用 jQuery 插件来检测焦点。该插件在这里是内联的，但在某些情况下也可能是一个外部脚本。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <title>jQuery focus test</title>
<script src="jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

(function($) {
    $.fn.focuscheck = function() {
        function focusOn () {
            document.getElementById('console').innerHTML += '<div>Focus event handler fired.</div>';
        };
        function focusOff () {
            document.getElementById('console').innerHTML += '<div>Blur event handler fired.</div>';
        };

        $(window).bind('focus', focusOn);
        $(window).bind('blur', focusOff);
    };
})(jQuery);

</script>
</head>

<body>    
    <div id="console"></div>
    <script type="text/javascript">
    $('#func').focuscheck();
    </script>
</body>

</html> 
```

还有我的 Greasemonkey 脚本。我正在尝试改编来自 joanpiedra.com 的 jQuery Greasemonkey 代码。在这种情况下，我尝试`focuscheck`从我的测试页面中完全替换 jQuery 插件功能代码。`function focusOff()`除了应该显示不同的结果之外，所有行都与原始行相同。我不知道是否有办法在不替换整个功能的情况下做到这一点。如果这是一个选项，我可能只想将单个`focusOff`函数或行替换为`$(window).bind('blur', focusOff);`.

现在，Greasemonkey 脚本在我的测试页面上不起作用。输出没有变化。另外，我不确定是否需要将 jQuery 添加到我的 Greasemonkey 脚本中，因为页面已经加载了它。

```
// ==UserScript==
// @name          jQuery
// @namespace     http://www.joanpiedra.com/jquery/greasemonkey
// @description   Play nicely with jQuery and Greasemonkey
// @author        Joan Piedra
// @homepage      http://www.joanpiedra.com/jquery/greasemonkey
// @include       *
// ==/UserScript==

// Add jQuery
var GM_JQ = document.createElement('script');
GM_JQ.src = 'http://jquery.com/src/jquery-latest.js';
GM_JQ.type = 'text/javascript';
document.getElementsByTagName('head')[0].appendChild(GM_JQ);

// Check if jQuery's loaded
function GM_wait() {
    if(typeof unsafeWindow.jQuery == 'undefined') { window.setTimeout(GM_wait,100); }
    else { $ = unsafeWindow.jQuery; letsJQuery(); }
}
GM_wait();

// All your GM code must be inside this function
function letsJQuery() {
    var script = document.createElement('script');
    script.type = "text/javascript";
    script.innerHTML = "(function($){\
        \
        $.fn.focuscheck = function(){\
            function focusOn () {\
                document.getElementById('console').innerHTML += '<div>Focus event handler fired.</div>';\
            };\
            function focusOff () {\
                document.getElementById('console').innerHTML += '<div>CHANGED event handler.</div>';\
            };\
        \
        $(window).bind('focus', focusOn);\
        $(window).bind('blur', focusOff);\
        };\
    })(jQuery);";

    document.getElementsByTagName('head')[0].appendChild(script);   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:45:58.347

> 我不知道是否有办法在不替换整个功能的情况下做到这一点

就在这里。请参阅下面的代码。

> 另外，我不确定是否需要将 jQuery 添加到我的 Greasemonkey 脚本中，因为页面已经加载了它。

你不必。请参阅下面的代码。

**html**（和你的一样——我刚刚添加了“从内联 JS 中触发”到`innerHTML`）

```
<html lang="en">
.
.
function focusOn () {
   document.getElementById('console').innerHTML += '<div>Focus event handler fired from inline JS.</div>';
};
function focusOff () {
   document.getElementById('console').innerHTML += '<div>Blur event handler fired from inline JS.</div>';
};
.
.
</html> 
```

**GM脚本**

```
// ==UserScript==
// @name           TESTE 2
// @namespace      TESTE 2
// @description    TESTE 2
// @include        file:///*
// ==/UserScript==

$ = unsafeWindow.$
$(window).off('blur')

function focusOff () {
    document.getElementById('console').innerHTML += '<div>Blur event handler fired from Greasemonkey.</div>';
};

$(window).on('blur', focusOff); 
```

**结果**

![结果图像](../Images/56178065672577bc6efe341d03851e94.png)

在这里，为什么你不应该使用`unsafeWindow`：[http ://wiki.greasespot.net/UnsafeWindow](http://wiki.greasespot.net/UnsafeWindow)

**编辑**

关于你在评论中的问题

> 谢谢你。这正是我一直在寻找的。我将研究使用安全包装器而不是 unsafeWindow。如果您不介意后续问题：[Slide Panel demo](http://www.webdesignerwall.com/demo/jquery/simple-slide-panel.html) - 我尝试调整类似的代码来覆盖点击功能， `$('.btn-slide').unbind('click')`然后添加一个新功能，但它并不完全有效。事件已记录，但按钮仍会激活。`$('.btn-slide').bind('click', function(event) { event.preventDefault(); console.log('button clicked'); });`如何防止幻灯片动画？

新代码：

```
// ==UserScript==
// @name           TESTE 3
// @namespace      TESTE 3
// @description    TESTE 3
// @include        http://www.webdesignerwall.com/demo/jquery/*
// ==/UserScript==

$ = unsafeWindow.$

$(window).load(function(){
    $('.btn-slide')
        .unbind('click')
        .bind('click', function(event) {
            alert('my function here')
            console.log('button clicked')
        })
}); 
```

# android - Android - 如何防止视图焦点更改？

> ID：10163174
> 
> 赞同：4
> 
> 时间：2012-04-15T15:03:17.933
> 
> 标签：android, android-layout

我想为我的控件（EditText）实现类似“beforeLosingFocus”事件，并且我希望能够防止焦点更改，因此我的控件必须具有焦点，直到用户键入允许的值。

我尝试使用 onFocusChange 事件，但是在焦点更改后会触发此事件。此事件被触发两次（因为一个控件失去焦点，而另一个控件获得焦点）。

是否可以防止另一个控件以通用方式获得焦点？（因为焦点可以通过点击另一个控件或“下一步”键单击来改变）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-29T14:00:26.433

```
editText.setOnEditorActionListener {
    ...
        if (actionId == EditorInfo.IME_ACTION_NEXT) {
            return true // if you want to ignore IME_ACTION_NEXT
            return false // if you want to lose focus and go further
        }
    ...
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:21:50.340

有两种方法可以做到这一点：1）默认情况下将所有其他视图的`setFocusable`属性保持为**false**。然后根据您的逻辑，一一启用它们。

2）当`onFocusChangedListener`被调用时，将焦点设置回您想要使用的视图`v.requestFocus()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:08:26.953

使用“活动中”更改覆盖您的 EditText 的 OnFocusChangeListener*并*覆盖导航按钮的 OnClick 以执行完整性测试。

**编辑** （如果我校对它会有所帮助，对不起）

您提到知道如何覆盖`onFocusChange(View view, boolean state)`EditText 以*强制*用户通过检查来输入文本`if(state == false)`。但是您还发现，当用户单击导航按钮（如 Next）时，在开始新活动之前*永远不会调用 onFocusChange。*

因此，如果您有多个 EditText（例如用户名和密码）*，*请保留 onFocusChange，并在 Next 按钮的 onClickListener 中添加一个检查，以在您开始新活动*之前*验证用户是否在 EditText 中输入了文本。

# git - 使用远程主机作为工作目录，git扩展

> ID：10163176
> 
> 赞同：3
> 
> 时间：2012-04-15T15:03:28.073
> 
> 标签：git, git-extensions

由于许可限制（在特定域上操作、在特定路径内、允许特定 IP 等），我们的项目必须托管在服务器上并在那里进行测试，而不是克隆存储库并在本地开发和测试

因此我们无法设置本地测试环境，我们必须使用中央存储库并将其用作一种“远程工作目录”

开发团队想使用[`git extensions (gui)`](http://code.google.com/p/gitextensions/)

无论如何设置git扩展来打开一个远程作为工作目录并对其进行操作，而不是本地的？当对服务器测试存储库进行任何更改时，它们应该出现在暂存区域中。

例如请看下图[（大）](https://i.stack.imgur.com/Nbcl5.jpg)

![在此处输入图像描述](../Images/4a6698573968a59af7ef9da3de9dd4ea.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:45:17.407

如果您确实需要，请使用某种远程桌面软件，登录远程框并在那里工作。

您可能会说“但在那种情况下，一次只能发展一个人”。这是正确的。如果您使用远程目录作为工作目录，情况也是如此。
或者至少：应该是。
让多个用户在**同一个**工作副本上工作对我来说听起来并不可行。

# .net - Visual Basic LINQ 错误

> ID：10163178
> 
> 赞同：0
> 
> 时间：2012-04-15T15:03:37.900
> 
> 标签：.net, vb.net, linq, exception-handling, nullreferenceexception

有谁知道我为什么会出现这个错误？

我收到以下错误：

> 你调用的对象是空的

这是有问题的LINQ。感谢您提前提供任何帮助。

```
Dim q = From line In seats
        Let data = line.Split(New [Char]() {" "c}, StringSplitOptions.RemoveEmptyEntries) ' it occurs in this line '
        Let seatA = data(0)
        Let seatB = data(1)
        Let seatC = data(2)
        Let seatD = data(3)
        Let seatE = data(4)
        Let seatF = data(5)
        Where seatA Is "."
        Where seatB Is "."
        Select seatA, seatF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:04:36.437

如果将第一行更改为：

```
Dim windowSeatQuery = From line In seats.Where(function (s) s isnot nothing) 
```

这表明座位列表中有一个空值，`Where`上面的 lambda 应该删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:42:23.860

你的 Where 子句对我来说看起来很奇怪。您不应该使用 = 运算符，而不是 Is：

```
Dim q = From line In seats
    Let data = line.Split(New [Char]() {" "c}, StringSplitOptions.RemoveEmptyEntries) ' it occurs in this line '
    Let seatA = data(0)
    Let seatB = data(1)
    Let seatC = data(2)
    Let seatD = data(3)
    Let seatE = data(4)
    Let seatF = data(5)
Where seatA = "." AndAlso seatB = "."   '<------   Use = on this line not Is
Select seatA, seatF 
```

你确定每一行都用空格而不是其他东西分隔吗？即使有 Is 也不应该导致 Null Ref。

这是我的示例程序，它似乎可以工作（在 LinqPad 中测试，它似乎不支持隐式行继续字符）：

```
Sub Main
    Dim seats As New List(Of String)()
    seats.Add("1 2 3 4 5 6")
    seats.Add(". . 9 8 7 6")
    seats.Add(". . 5 5 5 5")
    seats.Add("1 2 3 4 5 6")
    seats.Add(". . 2 4 6 8")
    seats.Add("1 2 3 4 5 6")

    Dim q = From line In seats _
        Let data = line.Split(New [Char]() {" "c}, StringSplitOptions.RemoveEmptyEntries) _
        Let seatA = data(0) _
        Let seatB = data(1) _
        Let seatC = data(2) _
        Let seatD = data(3) _
        Let seatE = data(4) _
        Let seatF = data(5) _
    Where seatA = "." AndAlso seatB = "." _
    Select seatA, seatF

    q.Dump()
End Sub 
```

# c - C 和野牛：在 %union 定义中指向结构的指针

> ID：10163180
> 
> 赞同：0
> 
> 时间：2012-04-15T15:04:00.757
> 
> 标签：c, bison, unions

我在使用野牛联合定义中的结构指针时遇到了一些麻烦，因为我需要这些元素的内存位置，但它们[似乎都指向同一个联合位置](http://en.wikipedia.org/wiki/Union_%28computer_science%29#C.2FC.2B.2B)。不确定我是否使用正确的方式。我的代码如下所示：

主.h：

```
typedef struct _control *control;
struct _control { ... };

typedef struct _symbol *symbol;
struct _symbol { ... };
...
#include "parser.h" 
```

解析器.y

```
%{
    #include "main.h"
%}

%union {
    control ctrl;
    symbol s_head;
    symbol s_tail;
}
...
%%
...
%%
int main (int argc, char** argv) {
    ...
    yylval.ctrl = malloc(sizeof(struct _control));
    yylval.s_head = malloc(sizeof(struct _symbol));
    yylval.s_tail = malloc(sizeof(struct _symbol));

    // This will give me the same memory position
    printf("%ld %ld %ld %ld\n",
        yylval, yylval.ctrl,
        yylval.s_head, yylval.s_tail);
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T01:41:50.670

不确定这是否是正确的方法，但是一旦我将联合元素“转换”为结构，我就将它们映射了。

主文件

```
typedef struct _control *control;
struct _control { ... };

typedef struct _symbol *symbol;
struct _symbol { ... };

typedef struct _global *global;
struct _global { ... }; 
```

解析器.y

```
%{
    #include "main.h"
%}

%union {
    global g;
}
...
%%
...
%%
int main (int argc, char** argv) {
    ...
    yylval.g->ctrl->some_element ...
    yylval.g->s_head ...
    ...
} 
```

好吧，这行得通。

# asp.net - ASP.NET 页面片段

> ID：10163181
> 
> 赞同：0
> 
> 时间：2012-04-15T15:04:12.727
> 
> 标签：asp.net

在我的要求中，我需要动态添加或删除子页面或页面片段（或类似组件，我不知道名称，类似于用户控件）。

页面片段可以包含其他控件，例如菜单或按钮或文本框。

我有一个下拉菜单。根据该菜单的选择，我将添加带有文本框的片段或带有下拉菜单的片段。将有一个选项来删除任何添加的片段。

但我不知道什么 asp.net 组件可以实现这一点！

任何信息都会非常有帮助。我没有使用 MVC。

* * *

编辑：

嗯，这类似于 Wicket Fragment。我没有找到任何在线演示，但找到了这个[博客](http://pawelzubkiewicz.blogspot.in/2009/06/wicket-swapping-replacing-fragments.html)，这可能有助于澄清我的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:11:52.940

多一点信息会有所帮助。但假设一点点，我认为您可以执行以下任何操作，

1.  使用 JQuery 添加控件，处理下拉索引更改事件并添加代码以显示文本框/下拉列表。

2.  您可以使用文本框/下拉列表创建用户控件，并在下拉列表更改时将其添加到页面控件。

3.  您可以使用复合控件并相应地显示/隐藏它。复合控件编写起来有点复杂，但可以跨项目分布，而用户控件只能在给定项目中使用。

对于 2/3，将新用户控件放入部分更新控件中，在服务器端处理下拉列表的选定索引更改事件，并根据您的要求更新其可见性。

建议使用第一种方法，因为它在客户端完成并提供更好的用户体验，但确实需要一些努力。

谢谢！

# android - 为什么 URL.openStream() 方法会产生 IOException？

> ID：10163184
> 
> 赞同：1
> 
> 时间：2012-04-15T15:04:25.390
> 
> 标签：android, parsing

大家好，当我从 url 获取 xml 并调用 url.openStream() 方法 IO 异常产生任何人帮助我时，我是 xml 解析的新手。

```
SAXParserFactory spf =SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        /** Send URL to parse XML Tags */
        URL sourceUrl = new URL("http://api.androidhive.info/music/music.xml");
        DataHandler mdaDataHandler = new DataHandler();
        xr.setContentHandler(mdaDataHandler);
         InputStream io = sourceUrl.openStream();//exception is here
        xr.parse(new InputSource(io));
        mmusic = mdaDataHandler.getParseData(); 
```

例外是这个

```
04-15 15:07:06.310: W/System.err(590): java.net.SocketException: Permission denied
04-15 15:07:06.440: W/System.err(590):  at      
org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocketImpl(Native Method)
04-15 15:07:06.440: W/System.err(590):  at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocket(OSNetworkSystem.java:186)
04-15 15:07:06.450: W/System.err(590):  at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:265)
04-15 15:07:06.460: W/System.err(590):  at java.net.Socket.checkClosedAndCreate(Socket.java:873)
04-15 15:07:06.460: W/System.err(590):  at java.net.Socket.connect(Socket.java:1020)
04-15 15:07:06.470: W/System.err(590):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
04-15 15:07:06.470: W/System.err(590):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
04-15 15:07:06.480: W/System.err(590):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
04-15 15:07:06.490: W/System.err(590):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
04-15 15:07:06.490: W/System.err(590):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:1152)
04-15 15:07:06.500: W/System.err(590):  at java.net.URL.openStream(URL.java:653)
04-15 15:07:06.500: W/System.err(590):  at com.listview.experiment.CustomListViewActivity.parseXML(CustomListViewActivity.java:56)
04-15 15:07:06.510: W/System.err(590):  at com.listview.experiment.CustomListViewActivity.access$0(CustomListViewActivity.java:43)
04-15 15:07:06.520: W/System.err(590):  at com.listview.experiment.CustomListViewActivity$1.onClick(CustomListViewActivity.java:34)
04-15 15:07:06.520: W/System.err(590):  at android.view.View.performClick(View.java:2408)
04-15 15:07:06.520: W/System.err(590):  at android.view.View$PerformClick.run(View.java:8816)
04-15 15:07:06.530: W/System.err(590):  at android.os.Handler.handleCallback(Handler.java:587)
04-15 15:07:06.540: W/System.err(590):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-15 15:07:06.550: W/System.err(590):  at android.os.Looper.loop(Looper.java:123)
04-15 15:07:06.550: W/System.err(590):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-15 15:07:06.550: W/System.err(590):  at java.lang.reflect.Method.invokeNative(Native Method)
04-15 15:07:06.560: W/System.err(590):  at java.lang.reflect.Method.invoke(Method.java:521)
04-15 15:07:06.570: W/System.err(590):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-15 15:07:06.570: W/System.err(590):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-15 15:07:06.570: W/System.err(590):  at dalvik.system.NativeStart.main(Native Method) 
```

清单是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.sam.testParsing"
  android:versionCode="1"
  android:versionName="1.0" >
  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-sdk android:minSdkVersion="8" />
   <application
     android:icon="@drawable/ic_launcher"
       android:label="@string/app_name" >
       <activity
          android:label="@string/app_name"
           android:name=".XMLParsingActivity" >
              <intent-filter >
                   <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                  </intent-filter>
                   </activity>
               </application>
           </manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T05:19:36.397

您不能在 UI 线程上调用 Url.openStream()。使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)执行此操作并在完成后正确更新 UI。`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:09:22.363

您需要将此添加到清单文件中：

```
<uses-permission android:name="android.permission.INTERNET"> 
```

确保它位于`<manifest>`标签下方。

# android - Android - ListActivity，添加 Header 和 Footer 视图

> ID：10163196
> 
> 赞同：2
> 
> 时间：2012-04-15T15:06:32.837
> 
> 标签：android, header, footer, listactivity

我正在使用 ListActivity，listview。

```
listView = getListView(); 
```

只是完美地工作。我将页脚视图添加为

```
LayoutInflater inflater = getLayoutInflater();
listView.addFooterView( inflater.inflate( R.layout.footer, null ), null, false); 
```

一切都很闪亮但很难看，所以我想将此页脚视图（仅包含 1 个编辑文本和仅 1 个按钮）添加到 listView 的标题中

```
LayoutInflater inflater = getLayoutInflater();
listView.addHeaderView( inflater.inflate( R.layout.footer, null ), null, false); 
```

突然一切都出错了，我立即得到 RuntimeException。

```
Suspended(exception RuntimeException)
ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent)
ActivityThread.handleLaunchActivity(ActivityThread$ActivityRecord, Intent)
ActivityThread.access$2200(ActivityThread, Activity$ActiviyRecord, Intent),
so on.. 
```

为什么会抛出异常？addFooterView 和 addHeaderView 有什么不同，如何将 Header 添加到 ListActivity ？

更新

因此，正如您可以在评论中看到的那样，我的 logcat 仍然无法正常工作，但此时我只是尝试了下一个：

```
} catch(Exception e){ 
  Writer result = new StringWriter(); 
  PrintWriter printWriter = new PrintWriter(result);
  e.printStackTrace(printWriter);
  String error = result.toString(); 
} 
```

然后我放断点，我可以在表达式部分读取错误。它说 ：

```
java.lang.IllegalStateException: Cannot add header view to list -- setAdapter has already been called. 
```

这对我们所有人都有启发。更改命令后，它可以正常工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T17:24:51.410

当您登录时

> java.lang.IllegalStateException：无法将标题视图添加到列表中——setAdapter 已被调用。

Listview 的方法**addHeaderView**或**addFooterView**必须在**setAdapter**之前调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T06:24:37.470

为页眉和页脚创建布局 xml

header_layout.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:text="header"
    />
    </RelativeLayout> 
```

页脚布局.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:text="footer"
/>
</RelativeLayout> 
```

现在在活动 java 文件 onCreate() 方法中添加

```
listView = (ListView) findViewById(R.id.listView1);
LayoutInflater inflater = getLayoutInflater();
    ViewGroup header = (ViewGroup) inflater.inflate(R.layout.header, listView,
            false);
    ViewGroup footer = (ViewGroup) inflater.inflate(R.layout.footer, listView,
            false);
    listView.addHeaderView(header, null, false);
    listView.addFooterView(footer, null, false);
    listView.setAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-04-30T17:11:01.660

因此，如果您想将标题视图添加到您的 listView，您应该在使用 setListAdapter() 之前严格执行此操作，否则会导致 IllegalStateException。

# python - Python中的抽象？

> ID：10163197
> 
> 赞同：4
> 
> 时间：2012-04-15T15:06:34.563
> 
> 标签：python, inheritance, abstract-class

我正在尝试为一个项目选择 Python，但我对如何使用抽象和类有点困惑。（我不是一个非常有经验的程序员，所以对这个问题的基本水平表示歉意。）我来自 Java/Ocaml 背景，我一直在尝试做的事情如下：我有一个图形的抽象类和一个graphadvanced（一个带有一些更花哨方法的图），看起来像这样

```
class AbstractGraph: 
   def method1(self): 
      raise NotImplementedError
   ...

class AbstractAdvanced:
   def method2(self):
      raise NotImplementedError 
   ... 
```

然后我有一个图表的实现：

```
class Graph(AbstractGraph):
   def method1(self):
      * actual code * 
```

现在我的问题是：我可以做这样的事情吗？

```
class Advanced(AbstractAdvanced, AbstractGraph):
   def method2(self):
      *actual code, using the methods from AbstractGraph* 
```

换句话说，如何根据 AbstractGraph 的方法抽象地定义 Advanced 的方法，然后以某种方式将 Graph 传递给构造函数以获取 Advanced 的实例，该实例使用 Advanced 的定义和 Graph 的实现？

就 Ocaml 而言，我试图将 AbstractAdvanced 和 AbstractGraph 视为模块类型，但我已经使用 python 玩了一点，我不知道如何让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:19:56.443

如果你想创建抽象基类，你可以，但它们的用处有限。用具体的类开始你的类层次结构（从对象或其他第三方类继承之后）更正常。

如果您想创建一个将部分协议的各种类组合在一起的类，那么只需从您的实现类继承：

```
#Always inherit from object, or some subtype thereof, unless you want your code to behave differently in python 2 and python 3

class AbstractGraph(object): 
   def method1(self): 
      raise NotImplementedError

class Graph(AbstractGraph):
   def method1(self):
      * actual code * 

class GraphToo(AbstractGraph):
   def method1(self):
      * actual code * 

class AbstractAdvanced(AbstractGraph):
   def method2(self):
      raise NotImplementedError 

class Advanced(Graph,AbstractAdvanced):
   def method2(self):
      *actual code, using the methods from Graph*

# order of classes in the inheritance list matters - it will affect the method resolution order
class AdvancedToo(GraphToo, Advanced): pass 
```

# passwords - 我可以用 RC4/AES 128 位破解 Adob e PDF 密码加密吗？

> ID：10163199
> 
> 赞同：0
> 
> 时间：2012-04-15T15:06:47.093
> 
> 标签：passwords, itextsharp, cracking

我已经使用 iTextsharp lib 加密了一些 pdf 文件，并使用 AES 128 位和密钥长度 = 16 字节（保护阅读）。任何人都可以破解密码或某些应用程序可以做到这一点吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:24:22.183

您可以在此处设置 2 种可能的“密码”：

*   读取密码
*   编辑/修改密码

使用“编辑密码”根本不安全，因为可以读取整个文件（即使不知道密码，使用`PdfReader.unethicalreading = true;`）然后创建一个新的未加密文件：

```
using System.IO;
using iTextSharp.text.pdf;

namespace PdfDecryptorCore
{
    public class PasswordDecryptor
    {
        public string ReadPassword { set; get; }        
        public string PdfPath { set; get; }
        public string OutputPdf { set; get; }

        public void DecryptPdf()
        {
            PdfReader.unethicalreading = true;

            PdfReader reader;
            if(string.IsNullOrWhiteSpace(ReadPassword))
             reader = new PdfReader(PdfPath);
            else
                reader = new PdfReader(PdfPath, System.Text.Encoding.UTF8.GetBytes(ReadPassword));

            using (var stamper = new PdfStamper(reader, new FileStream(OutputPdf, FileMode.Create)))
            {
                stamper.Close();
            }
        }
    }
} 
```

# android - 如何从 android 的列表视图中删除分隔符？

> ID：10163200
> 
> 赞同：41
> 
> 时间：2012-04-15T15:06:56.043
> 
> 标签：android, android-listview, divider

我正在开发一个具有 的应用程序`Listview`，并且列表中的项目已经具有我不需要分隔符的样式。

如何设置为隐藏或删除分隔线`ListView`？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-04-15T15:10:14.710

你可以试试`android:divider="@null"`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-09T12:01:39.193

有不同的方法可以实现这一点，但我不确定哪一个是最好的（我什至不知道是否有最好的方法）。我知道在 ListView 中至少有两种不同的方法可以做到这一点：

**1.设置分隔符为空：**

1.1。以编程方式

```
yourListView.setDivider(null); 
```

1.2\. XML

```
android:divider="@null" (this goes inside your ListView element) 
```

**2\. 将分隔符设置为透明，并将其高度设置为0，以避免在listview元素之间增加空间：**

2.1。以编程方式：

```
yourListView.setDivider(new ColorDrawable(android.R.color.transparent));
yourListView.setDividerHeight(0); 
```

2.2\. XML

```
android:divider="@android:color/transparent"
android:dividerHeight="0dp" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-21T11:56:23.390

添加

```
 android:divider="@null"
      android:dividerHeight="0dp" 
```

到您的列表视图

```
 <ListView
        android:id="@+id/list_of_f"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_margin="5dp"
        android:divider="@null"
        android:dividerHeight="0dp"
        android:listSelector="@android:color/transparent" >
    </ListView> 
```

# api - 将 GitHub 文件包含到远程网站中

> ID：10163201
> 
> 赞同：3
> 
> 时间：2012-04-15T15:07:00.447
> 
> 标签：api, github

将 GitHub README.md 文件嵌入远程网站的更简单方法是什么？

我很想在网页上拥有 README 文件的同步副本，我认为 GitHub 页面不允许用户这样做，而且我在 GitHub API 中没有找到我的答案。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:23:24.857

这可以解决我的问题：*[Using the GitHub API and PHP to Get Repository Information](http://davidwalsh.name/github-markdown)*，[这](http://thinkphp.ro/apps/php-hacks/cache-function/github/)是一个工作演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:24:48.380

如果您想要文件副本，例如 example.com/project/README.md 或 php 页面上显示的内容，取决于您想要什么样的副本。如果你想要的是第一个，你可以制作一个 php 脚本来获取文件到你的服务器。但是如果你想在一个 php 页面上使用它，你可以使用类似的东西：

```
<?php
$url = "https://raw.github.com/USER/PROJECT/README.md";
$readme = file_get_contents($url);

print $readme;
?> 
```

这就是我之前提到的获取脚本

```
<?php
$url = "https://raw.github.com/USER/PROJECT/README.md";
$readme = file_get_contents($url);

$file = fopen('README.md','w');
fputs("$file","$readme");
fclose($file);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T16:24:54.890

看看[https://developer.github.com/v3/git/blobs/](https://developer.github.com/v3/git/blobs/)

您既可以检索也可以创建 Blob。

# compiler-construction - 编译器如何处理运行时错误消息中的行号

> ID：10163204
> 
> 赞同：4
> 
> 时间：2012-04-15T15:07:03.517
> 
> 标签：compiler-construction, runtime, lexical-analysis

几乎所有编译器都会返回一个行号以及错误消息。我想知道从编译器设计的角度来看，编译器如何处理不同阶段的行号消息？谢谢。

*   扫描器
*   解析器
*   AST 数据结构
*   代码生成

另外的：

*   运行环境
*   机器翻译

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:11:25.267

我为我的班级分配实现了一个相当简单的编译器。它是 Pascal 的一个子集，但有一些其他限制。

编译器是将一种语言翻译成另一种语言的工具。它通过执行错误检查然后生成输出代码（如果可能）来做到这一点。通常，编译器的流水线大致相当于：

> 输入代码 -> 词法分析器（扫描器） -> 语法分析器 -> 语义分析器 -> 代码生成器 -> 输出代码 *

因为我的语言很简单，所以我可以做出一堆假设，例如一条指令只会在一行中。我的 Lexer 使用正则表达式来检查不应该存在的字符，例如“不是数字、字母、“（”、“”、“。”等的字符。”我将文件读入字符串列表，其中每个字符串是下一行，所以如果我扫描一行并发现错误，我会返回索引 + 1，即行号。

使用语法分析器（解析器）检查例如“如果变量名以字母开头”，算法是相似的。

当我扩展解析器时，我将一个标记与代码中的行相关联，以便在发生错误时返回它。

我不知道现代编译器如何解决这个问题，但我可以猜测这也是 AST 和行号的某种关联，记住一个 AST 可能在几行中（嗯，这取决于语言）。

使用代码生成编译器知道代码是正确的（据他们所知）并且返回错误不会与代码有关，而是编译器或进程存在问题（错误，内存不足，无法写入位置等）。

运行时环境和机器解释也可能有编译器，例如 JIT，但错误消息返回通常表示编译器或运行时中的错误，而不是代码。

*请注意，这是非常简单的 3 遍模型。[现代编译器有更多的](http://blogs.msdn.com/b/ericlippert/archive/2010/02/04/how-many-passes.aspx).

编辑：我发现 AST 有一个指示行号的字段和一个错误文件（对于每个节点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:49:43.593

大多数词法分析器和解析器生成器将生成具有错误报告方法的代码，这些方法在发生匹配错误时被调用。您可以覆盖该方法并做您想做的事。

如前所述，在词法分析器规范中，将行号和字符号与标识符或字符串/字符/整数/布尔文字相关联是很常见的。通常，词法分析器会提供一种`yyline()`方法来执行此操作。与其让词法分析器返回原始标记（例如字符串）值，不如让它返回一个包含字符串值、字符和行号的对象。例如，快速浏览一下[这个](http://jflex.de/manual.html)词法分析器规范。

```
private Symbol symbol(int type) {
    return new Symbol(type, yyline, yycolumn);
} 
```

解析器将在解析期间接收符号，并应获取位置信息以及令牌值，并将其插入 AST 节点。该信息最终应该会进入符号表。在类型分析过程中，每个叶子节点都会绑定位置信息。这应该是您提供相当好的错误诊断所需的全部内容。

# xml - 只要有多个元素就需要属性

> ID：10163207
> 
> 赞同：1
> 
> 时间：2012-04-15T15:07:39.100
> 
> 标签：xml, xsd

我无法弄清楚这段代码有什么问题：

```
<xs:choice>
  <xs:element name="tiles" type="tiles" minOccurs="1" maxOccurs="1"/>
  <xs:element name="tiles" type="tiles-with-key" minOccurs="2" maxOccurs="unbounded"/>
</xs:choice> 
```

`key`只要有多个`tiles`元素，我就需要一个属性：

```
<!-- one element, no need for the "key" attribute -->
<tiles>
    ...
</tiles>

<!-- two elements, we need the "key" to differentiate them -->
<tiles key="1">
    ...
</tiles>
<tiles key="2">
    ...
</tiles> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:17:49.773

它被称为唯一粒子属性（UPA），它基本上说解析器必须知道它在模型中的位置而无需向前看。在这种情况下，您选择的选项之间的标签名称相同，解析器将不知道要应用什么模型。

您的问题基本上是根据外部条件控制属性的使用（必需与可选），这里是瓦片元素的计数。这在 XSD 1.0 中根本不可能。带有 XSD 1.0 的 Schematron 将是一种选择；其他人可能会建议 XSD 1.1，因为对它的支持相当低，所以在这里找到可行的解决方案还为时过早。

# c - c 从 url 和 favicon.ico 读取身份验证

> ID：10163213
> 
> 赞同：0
> 
> 时间：2012-04-15T15:08:28.300
> 
> 标签：c, url, passwords, favicon

我正在使用必须回复浏览器请求的 C 编码服务器。使用这样的 url 时必须进行身份验证：

```
http://user:pass@website/ 
```

但我真的不知道如何或从何处在我的服务器上获取此信息，因为我在读取请求时得到的内容与我在与服务器交互时仅使用

```
 http://website/ 
```

第二个问题是，有时我有来自浏览器的这个 favicon.ico 请求.. 我可以回复浏览器说“我没有这个 fu* *** * 愚蠢的图标”？:D

我当然为此使用套接字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:12:50.913

查找名为的请求标头，该标头包含后跟 BASE64 编码的用户名和密码`Authorization:`的字符串。`Basic`这种身份验证方法称为 HTTP 基本身份验证。

对于 favicon，如果没有，只需使用 HTTP 404 响应进行响应。

# c# - 为 IQueryable 创建自定义 OrderByDescending()

> ID：10163217
> 
> 赞同：5
> 
> 时间：2012-04-15T15:09:11.047
> 
> 标签：c#, linq, entity-framework-4, iqueryable

以下是一些我想从高到低排序的值的示例。

```
8,929 viewers
18,213 viewers
2,223 viewers
41,231 viewers 
```

这是我正在使用的查询示例：

```
streams = streamRepository.FindAll()
                          .OrderByDescending(s => s.ViewCount)
                          .Take(4); 
```

这不能正常工作，因为我想它将参数作为字符串，而不是 int，但这并不奇怪。

你如何建议我使用干净的 C#/Linq 代码创建这个“排序”？

理想情况下，使用上面的数据示例，生成的有序集将是：

```
41,231 viewers
18,213 viewers
8,929 viewers
2,223 viewers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:16:46.293

如果格式始终相同，我会试一试：

```
streams = streamRepository.FindAll()
    .AsEnumerable()
    .OrderByDescending(s => 
        int.Parse(s.ViewCount.Substring(0, s.ViewCount.IndexOf(' ') - 1))
    .Take(4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:32:53.753

也许不是最整洁的解决方案。但也许是这样的：

```
streamRepository.FindAll()
        .OrderByDescending(t => t =>Convert.ToDouble(
                 t.ViewCount.Substring(0,t.ViewCount.IndexOf(' ')))) 
```

生成的sql。不要那么可怕，它可以在 linqpad 中工作：

```
-- Region Parameters
DECLARE @p0 Int = 0
DECLARE @p1 NChar(1) = ' '
-- EndRegion
SELECT [t0].[SomeText]
FROM [Table1] AS [t0]
ORDER BY CONVERT(Float,SUBSTRING([t0].[SomeText], @p0 + 1, 
    (CASE 
        WHEN (DATALENGTH(@p1) / 2) = 0 THEN 0
        ELSE CHARINDEX(@p1, [t0].[SomeText]) - 1
     END))) DESC 
```

因为 linq 可以翻译`substring`和`indexof`到 sql 函数。但这也确实特定于格式。就像在对您的问题的评论中一样，我还建议您将列拆分为列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:13:26.160

类似的东西（更伪，没有测试任何东西，但应该很接近）......

```
streams = streamRepository.FindAll()
                          .Select(s=> new { Original = s, Count = ParseToInt(s.ViewCount)})
                          .OrderByDescending(a => a.Count)
                          .Take(3); 
```

...在哪里`ParseToInt`将该字符串简单地解析为只是计数（我猜只是在 ' ' 上拆分并首先解析为 int ）

希望这对一些人有帮助

**编辑：**这适用于无 - Db 场景

在 Db 绑定查询的情况下 - 您需要使用一些映射的 SQL 函数（并且可以从 linq 映射到 SQL）将“字符串”解析为 int -但我不确定什么是最好的方法来做到这一点。此外，您需要进行选择，以便将所有数据取出。
在这种情况下，通常在 Db 中保留一些 int 字段可能是最好的（而不是字符串）

# ios - 如何在使用表格视图加载另一个表格视图期间显示进度条

> ID：10163218
> 
> 赞同：1
> 
> 时间：2012-04-15T15:09:14.207
> 
> 标签：ios, progress-bar, loadview

我有一个表格视图单元格，在单击它时，将打开另一个表格视图，您可以选择一些内容作为表格视图单元格的值。这里的问题是第二个表视图中的数据很大，加载需要很长时间。因此，在我单击单元格后，屏幕将冻结在那里，这对用户不友好。我想在加载第二个表格视图期间显示进度条。但是我找不到添加它的好地方。我想知道应该以哪种方法添加代码来显示进度条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:25:00.060

在 UITableViewCell 附件视图中显示 UIActivityIndi​​cator（[此处为示例图像）怎么样？](http://getsetgames.com/wp-content/uploads/2009/12/ActivityIndicator.gif)

你可以用一些代码放置它......

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

     UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
     cell.accessoryView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
 } 
```

您也可以通过调用在后台线程中进行长时间计算

```
[self performSelectorInBackground:@selector(yourLongTakingMethod) withObject:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:21:26.397

两件事情：

1.  我会认真考虑不同的选项而不是进度条，例如尝试[MBProgressHUD](https://github.com/jdg/MBProgressHUD)之类的东西，它看起来更好并且适合您的目的。

2.  为了实现这一点，您必须确保您的 UI 线程没有被卡住（因此应用程序不会“冻结”）——这意味着在后台线程上调用加载过程。启动加载过程的方法应该启动进度指示器，处理显示加载数据的方法（一旦准备好）应该删除它。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:29:23.760

如果您的应用程序冻结，这意味着您正在阻止 UIThread，就像 @stavash 建议的那样。进度条只是一个动画图像，它不会解决您的问题。您要做的是将“数据准备代码”放入线程中。最简单的方法是使用 Grand Central Dispatch。要开始使用，请访问[本教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)。您可以跳过前半部分并专注于实际的线程块。API是`dispatch_queue_create`和。`dispatch_async``dispatch_release`

这不会形成进度条。但是，它会解锁您的 UI。然后你可以考虑制作进度条的方法。使用内置动画或一些自定义动画。甚至可以通过后台任务在第一个表视图中预加载数据。

# java - RESTeasy 中的原始图像

> ID：10163219
> 
> 赞同：7
> 
> 时间：2012-04-15T15:09:18.310
> 
> 标签：java, image, resteasy

我通过 RESTeasy 提供了这项服务：

```
@GET
@Path("/{name}")
@Produces("image/jpeg")
public BufferedImage get(@PathParam("name") String name) {

    Monitor m = Monitor.getMonitor(name);

    if (m == null) {
        return null;
    }

    return m.getImage();
} 
```

然后我得到请求

```
Could not find MessageBodyWriter for response object of type: java.awt.image.BufferedImage of media type: image/jpeg 
```

是否有任何“直接方法”可以将图像放入响应中？

* * *

感谢@Robert 的指导。这里的工作代码：

```
@GET
@Path("/{name}")
@Produces("image/jpeg")
public byte[] get(@PathParam("name") String name) {

    Monitor m = Monitor.getMonitor(name);

    if (m == null) {
        return null;
    }

    ByteArrayOutputStream bo = new ByteArrayOutputStream(2048);
    try {
        ImageIO.write(m.getImage(),"jpeg",bo);
    } catch (IOException ex) {
        return null;
    }

    return bo.toByteArray();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T15:27:33.337

你应该尝试

*   编码`BufferedImage`为JPG。看看课堂`javax.imageio.ImageIO`
*   声明你的方法返回一个`byte[]`
*   确保您的应用程序将始终在未启动的服务器上运行`java.awt.headless=true`（即没有图形子系统）

请让我们知道这是否有效，因为我不知道它是否会并且现在不能自己尝试。

# printing - Primefaces 打印机打印 div

> ID：10163223
> 
> 赞同：0
> 
> 时间：2012-04-15T15:09:39.923
> 
> 标签：printing, jsf-2, primefaces

我想用 primefaces 打印机打印一个 div（primefaces 3.2 和 myfaces 2.0）。

我的面孔代码是这样的：

```
 <div id="page">
                <!-- SIDEBAR -->
                <div id="sidebar"
                    class="ui-widget-content ui-corner-all ui-helper-clearfix ui-shadow sidebar">
                    <ui:insert name="sidebar"></ui:insert>
                    <p:commandButton value="Print" type="button">
                        <p:printer target="content" />
                    </p:commandButton>
                </div>

                <!-- CONTENT -->
                <div id="content">
                        <ui:insert name="content">...</ui:insert>
                </div>
                <div style="clear: both;">&nbsp;</div>
            </div> 
```

但我得到一个 FacesException：

```
 javax.faces.FacesException: Cannot find component content in view. 
```

使用primefaces打印机可以做到这一点还是有另一种方法可以做到这一点。

最好的问候投票

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:14:05.380

`p:printer`需要组件的 id，但`ui:insert`定义了将由客户端插入的逻辑部分。您可以尝试像这样包装您希望打印的内容`p:outputPanel`：

```
<p:outputPanel id="content">
  <ui:insert name="content" />
</p:outputPanel> 
```

# python - 如何使用 Django 处理资产（css、js 等）？

> ID：10163224
> 
> 赞同：4
> 
> 时间：2012-04-15T15:10:03.290
> 
> 标签：python, django, standards, twitter-bootstrap, conventions

我是 Django 和 Python 的新手，我刚刚完成了 Django 的“构建你的第一个应用程序”教程。我觉得太棒了。然而，它从未谈到样式表、javascript 或类似的东西。

他们应该去哪里？目前我的项目目录如下所示：

```
myproject
  +app1
  +app2
  +myproject
  +public
    +css
    +img
    +js
  +templates 
```

我做得对吗？我想尽可能地坚持 Django/Python 标准。另外，如果我想在我的所有模板中包含某些样式和脚本，我该怎么做？假设我正在使用 Bootstrap。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T15:42:34.420

您可能应该仔细看看[管理静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/)。

基本上，您可以在每个应用程序中放置一个静态文件夹（类似于您的模板文件夹），并将更通用的东西（base.css、项目范围的图标、jquery-plugins）放在项目根目录的静态文件夹中。

所以布局可能如下所示：

```
myproject
  +app1
    +static
      +app1
        +css
        +js
  +app2
  +static
    +css
    +img 
```

部署项目后，您可以使用[`collectstatic`](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-the-app-and-your-static-files-from-the-same-server)contrib.staticfiles 中的 -command 将所有静态文件收集到一个目录 ( `STATIC_ROOT`) 中，您可以从中提供服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:13:51.937

我更喜欢将 +public 文件夹称为 +static，并将 +template（特定于应用程序）文件夹放在使用它们的应用程序中（以避免混淆并能够两次使用具有不同名称的模板），我也是不明白为什么将 +myproject 放在根项目中。

# android - Dynamic ExpandableList Android - 使用来自 Web 的值填充

> ID：10163229
> 
> 赞同：0
> 
> 时间：2012-04-15T15:10:52.697
> 
> 标签：android, dynamic, android-asynctask, expandablelistview

我希望创建一个可扩展列表，其中包含我在 AsyncTask 期间收到的值。我可以将这些值放在一个列表中吗？

一旦用户按下按钮，列表将显示在另一个视图中。

是否类似于为字符串设置文本？（使用 .setText）

安卓。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:00:55.730

从 Async 任务中获取值并将它们放入一个数组中。并将列表的 Adapter 设置为这个数组。

这些值将通过 getChildView() 显示。

# c# - 从函数获取 NHibernate QueryOver .SelectList(x)

> ID：10163231
> 
> 赞同：4
> 
> 时间：2012-04-15T15:10:58.107
> 
> 标签：c#, nhibernate, fluent-nhibernate

有没有办法从可以传递给 SelectList() 的函数中获取成员列表？

所以而不是这样做

```
var dtos = repository.QueryOver<MicrofilmExportProcessed>()
                    .SelectList(list => list
                        .Select(x => x.Member1).WithAlias(() => dto.Member1)
                        .Select(x => x.Member2).WithAlias(() => dto.Member2)
                        .Select(x => x.Member3).WithAlias(() => dto.Member3))
                    .List<MicrofilmExportProcessed>(); 
```

做这样的事情：

```
var dtos = repository.QueryOver<MicrofilmExportProcessed>()
                    .SelectList(getMembersFromFunc())
                    .List<MicrofilmExportProcessed>(); 
```

我尝试创建返回与 SelectList 的输入参数相同类型的方法，但它仍然告诉我输入类型无效。不知道我错过了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T19:23:46.397

就像是

```
Func<QueryOverProjectionBuilder<InvoiceDto>, QueryOverProjectionBuilder<InvoiceDto>> GetList()
{
    InvoiceDto dto = null;
    return list => list.Select(w => w.Client).WithAlias(() => dto.Client);
} 
```

并称它为

```
return Session.QueryOver<InvoiceDto>()
    .SelectList(GetList())
    .TransformUsing(Transformers.AliasToBean<InvoiceDto>())
    .List<InvoiceDto>(); 
```

# jquery - 翻转菜单中 jQuery stop() 中的奇怪效果/闪烁

> ID：10163232
> 
> 赞同：2
> 
> 时间：2012-04-15T15:11:03.653
> 
> 标签：jquery

我用 jQuery 翻转菜单制作了这个网站：

[http://www.ffsolar.com/index.php?lang=EN&page=home](http://www.ffsolar.com/index.php?lang=EN&page=home)

碰巧它不能很好地工作。请尝试将鼠标从“服务”按钮上方的空白区域快速移动到图像中间。一个奇怪的效果发生了，菜单开始“闪烁”，直到你把鼠标移开才会停止。

好吧，这是我的 jQuery 代码：

```
$('#main_navi li').hover(
        function () {
            //show its submenu
            $('ul', this).stop(true,true).slideDown(200);
       }, 
        function () {
            //hide its submenu
            $('ul', this).stop(true,true).slideUp(200);
        }
    ); 
```

有人能解释一下为什么会发生这种情况以及我能做些什么吗？我在 stop() 中尝试了所有真假组合，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:24:47.223

我无法真正确定它，但在我看来，这是时间问题。当您将鼠标快速移到它上面时会发生什么，即您的菜单项获得 mouseover 事件，它会展开菜单，但在展开菜单之前，它会稍后收到 mouseout 事件并折叠它，但是因为鼠标现在位于展开的菜单上，所以它再次接收到鼠标悬停（我不太确定这一点，因为看起来很奇怪，即使鼠标没有移动，鼠标悬停/出事件也会被调度）。请记住，浏览器每隔几毫秒调度一次 mousemove 事件，而不是针对它移动的每个像素。同样，mouseover 和 -out 事件也不一定在它们实际发生的确切时间被调度。如果我对事件狂热的假设是正确的，它应该可以用`stop()`在sildes之前，虽然你说你已经尝试过了。这样，幻灯片应在鼠标移出时立即缩回。

**编辑**在这里做了一个[jsFiddle](http://jsfiddle.net/qZUsE/1/)

# javascript - 在 mousedown-mousemove 上禁用滚动（Jquery / javascript）

> ID：10163233
> 
> 赞同：1
> 
> 时间：2012-04-15T15:11:09.040
> 
> 标签：javascript, jquery, scroll, mousemove, mousedown

所以我想禁用mousedown + mousemove上的窗口滚动，我到处搜索，但我找不到任何东西。

body { overflow: hidden } 不起作用，如果你按下鼠标，你仍然可以滚动，然后你往下走。

我遇到的问题是，在单击图像拇指时，它会打开一个显示原始图像的定位绝对 div（100% 高度和宽度和 50% 黑色透明 .png），当我按下鼠标左键并我向下移动，绝对 div 后面的所有项目，开始向下滚动。

这是正在发生的事情的一个例子。[http://jsfiddle.net/T2qBw/1/](http://jsfiddle.net/T2qBw/1/) （点击黑色div，打开一个位置固定的div，按左键，向下移动）。

提前致谢。

PS：如果我犯了任何语法或拼写错误，我深表歉意。（英语不是我的母语）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:20:11.300

```
$(".open-overlay").click(function(){
    $(".overlay").css("display","block");             
    $("body").css({overflow:'hidden'});  
    $(window).on('mousedown', function(e) {
        e.preventDefault();            
    })                    
}); 
```

不要忘记取消绑定鼠标事件 `$(window).off('mousedown')`

# java - 如何将.sql文件执行到android中？

> ID：10163235
> 
> 赞同：2
> 
> 时间：2012-04-15T15:11:12.480
> 
> 标签：java, android, sqlite

我看到我可以使用 shell 命令执行 .sql 文件...

```
Process process = Runtime.getRuntime().exec(commandLine);
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream())); 
```

“commandLine”属性必须是这样的吗？

```
commandLine = "sqlite> .read database.sql"; 
```

还有一个疑问......我应该把我的“database.sql”文件放在哪里？进入资产？我试过这样做但没有奏效......有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:37:54.480

> 我看到我可以使用 shell 命令执行 .sql 文件

那将是一个非常糟糕的主意。Android SDK 中没有任何 shell 命令，因此保证在所有设备上都有。

读入 SQL 脚本并通过`execSQL()`和 kin on执行其语句`SQLiteDatabase`，也许使用和 kin 将它们包装在您自己的事务中`beginTransaction()`。

# jquery - ASP.NET MVC3 下拉 JQuery 更改事件连线出错

> ID：10163236
> 
> 赞同：0
> 
> 时间：2012-04-15T15:11:19.483
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc-3, razor

我正在尝试为下拉列表连接和更改事件 jQuery 处理程序，一旦用户更改下拉列表中的值，我必须使用从我的控制器操作返回的 html 填充 div“付款”。

这是我到目前为止所拥有的，我不知道为什么它不起作用或如何进一步追求这一点。更改下拉值没有错误或响应。非常感谢任何帮助！

cshtml:

```
<script type="text/javascript">
$(document).ready(function () {
    $("#PaymentType").change(function () {
        var selection = $("#PaymentType").val();
        var dataToSend = {
            paymentType: selection
        };

        $.ajax({
            url: "Order/PaymentChanged",
            type: "GET",
            data: dataToSend,
            success: function (data) {
                $("#payment").text("server returned:" + data.agent);
            }
        });
    });
});
</script>

@using (Html.BeginForm())
{
   <div id = "payment">
   <br />
   @Html.Label("Select payment method")
   <br />
   <select id="PaymentType" name="PaymentType">
     <option value="CreditCard">Credit Card</option>
     <option value="Cash">Cash</option>
     <option value="Check">Check</option>
   </select>
   </div>
 } 
```

订单控制器.cs

```
 public JsonResult PaymentChanged(string paymentType)
    {
        return Json(new { agent = "sample html" }, JsonRequestBehavior.AllowGet);
    } 
```

标准的，基本未更改的 _Layout.cshtml 文件，其中包含所有 jQuery src，包括 src="/Scripts/jquery-1.5.1.min.js"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:30:37.063

代码对我来说看起来不错，所以我会回答“如何进一步追赶”

*   使用[Chrome 的调试器](https://developers.google.com/chrome-developer-tools/)或[Firebug](http://getfirebug.com/)来查看[XHR 的状态](http://www.w3.org/Protocols/HTTP/HTRESP.html)。
*   在调试模式下运行您的 MVC 应用程序（来自 Visual Studio）并在您的控制器中放置一个断点以查看它是否实际被调用以及是否`paymentType`正确发送（前者更有可能因为您的代码看起来不错）。

# c# - 如果找不到动态内容，则正确将用户发送到 404 (ASP.NET MVC)

> ID：10163238
> 
> 赞同：3
> 
> 时间：2012-04-15T15:11:26.183
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, http-status-code-404

我已经为 ASP.NET MVC 3 中的一般情况实现了 404 处理，当找不到控制器/视图时。但是如果用户试图访问一些找不到的东西，应该如何在控制器内部处理呢？例如`www.foo.bar/Games/Details/randomjunk`将在里面调用这个`GamesController`：

```
public ActionResult Details(string id) // id is 'randomjunk'
{
  if(DoesGameExist(id) == false)
    // Now what? 
```

我可以做一个`return Redirect('/Errors/Http404');`，但这似乎不是正确的方法。您应该抛出异常还是其他？

在这种情况下，我们可以有一个特殊的观点，但首先我们需要一个可以应用于多个案例的好方法。

编辑：我想展示我已经拥有的一般情况下的友好 404 页面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T15:21:20.770

你应该抛出 HttpException 404 ：

```
throw new HttpException(404, "Page not Found"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T15:13:45.587

编辑：显然，根据[Darin Dimitrov](https://stackoverflow.com/questions/4985550/how-to-return-a-view-for-httpnotfound-in-asp-net-mvc-3)，我以前所拥有的即使使用`customErrors`. 正如安东尼奥·巴库拉（Antonio Bakula ）在另一个答案中[所说](https://stackoverflow.com/a/10163325/47773)，您必须这样做：

```
throw new HttpException(404, "Not found") 
```

然后 customErrors 将起作用。

~~有一个内置的辅助方法被调用`HttpNotFound`，所以你可以这样做：~~

~~返回 HttpNotFound();~~

~~您还可以使用 HttpStatusCodeResult 显式返回 404：~~

~~返回新的 HttpStatusCodeResult(404);~~

~~`HttpStatusCodeResult`当您想要的代码没有特定的辅助方法或类时，它会很有帮助。~~

你的 Web.config 中也应该有这个：

```
<customErrors>
    <error statusCode="404" redirect="~/Custom404Page.html"/>
</customErrors> 
```

您还可以有其他状态的附加行，以及一个`defaultRedirect`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T15:52:15.550

您可以返回一个 HttpStatusCodeResult。

```
return new httpStatusCodeResult(404); 
```

# java - 如何在 MyEclipse 中定义一个标签类？

> ID：10163239
> 
> 赞同：1
> 
> 时间：2012-04-15T15:11:33.663
> 
> 标签：java, database, swing, label, resultset

我设置了很多标签，我希望它们显示数据库中的数据。但它显示“com.myql.jdbc.JDBC4ResultSet”

sql语句的结果是两倍

并且有如下代码

```
private void initData() {
        initCondition("select sum(initAmount) from account", lblInit);
        initCondition("select sum(amount) from detail where directionid = 1", lblIncome);
        initCondition("select sum(amount) from detail where directionid = 2", lblOutcome);
        lblAsset.setText("as");
    } 
```

//这是我对标签类的定义。

```
private void initCondition(String sql, JLabel jLabel) {
    try {
        Connection connection = DriverManager.getConnection(url, user,
                password);
        Statement statement = connection.createStatement();
        ResultSet resultSet = statement.executeQuery(sql);
        jLabel.setText(resultSet.toString());
        resultSet.close();
        statement.close();
        connection.close();
    } catch (Exception e) {
        // TODO: handle exception
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:16:59.523

> sql 的结果是一个双数。我认为结果集不需要循环。

您是说结果集在一行中只包含一列数据？在那种情况下，也许是类似的东西......

```
ResultSet resultSet = statement.executeQuery(sql);
resultSet.first();
jLabel.setText("" + resultSet.getDouble(1)); 
```

# ipad - FancyBox with video on iPad-video play but is black???-（不出现）

> ID：10163241
> 
> 赞同：-2
> 
> 时间：2012-04-15T15:11:40.073
> 
> 标签：ipad, video, fancybox

解决了花式框双击问题解决了花式框滚动条问题（仅限Firefox）

剩下的 1 个问题让我拉扯我的头发。

一切正常，并且可以在桌面上跨浏览器正常播放。

但是，在我的 ipad 上，当我弹出视频时，它似乎在播放（我看到加载和播放指示器）但没有视频！

```
http:///.bitstream/ca/beta 
```

作为检查，如果我直接链接到视频

```
http://www.bitstream.ca/beat/video1.html 
```

它玩得很好。

怎么回事？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-15T15:32:48.457

我想我解决了不知道为什么但添加

```
autoSize: false, 
```

似乎可以解决问题。视频现在可以在 ipad 上正常显示和播放。

不知道为什么有人反对这个？这似乎是一个有效的问题。

# pyqt4 - 可以在 QListWidget 中显示富文本格式吗？

> ID：10163249
> 
> 赞同：2
> 
> 时间：2012-04-15T15:12:10.300
> 
> 标签：pyqt4, rtf, qt4.7, qlistwidget

我使用 PyQt4 创建了一个简单的列表：

```
class DeckList(QtGui.QListWidget):
    def __init__(self, parent=None):
        QtGui.QListWidget.__init__(self, parent)
        for item in self.list:
            self.addItem(item['title']+' '+item['description']) 
```

理想情况下，我希望列表以粗体显示标题并以斜体显示描述。

虽然 a`QLabel`可以采用类似的字符串`"<b>title</b> <i>description</i>"`，但 QListWidget 项似乎不会以富文本形式呈现 HTML 标记。

反正有没有让这个富文本显示？

# antivirus - 病毒签名的最小长度

> ID：10163253
> 
> 赞同：1
> 
> 时间：2012-04-15T15:12:47.763
> 
> 标签：antivirus, virus, malware, malware-detection, virus-scanning

我在任何地方都没有找到这方面的信息。病毒签名是否有最低要求的长度？我在 Peter Szor 的书中读到，对于 16 位应用程序，16 个字节甚至足以避免误报。32 位和 64 位应用程序是否也有同等的最低要求？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:51:52.627

**可能我的经验对你有用：**

> 我使用 n-gram、操作码和 menonic 生成了十六进制代码签名。我使用了 2000 多种病毒来最小化签名。最小长度为 16 字节，最大大小为 68 字节。此外，为恶意软件和良性创建了签名。该方法是**启发式和数据挖掘**。
> 良性签名的长度小于恶意软件。不过我是因为 Benign 是用高级语言编写的，所以编译器生成的代码和更多的相似性减少了 Benign 签名的长度。由于恶意软件是用相对较低级别（汇编）或内联汇编（高级语言中的嵌入式汇编）编写的，因此会产生相当长的签名。
> 
> 长签名对于离线扫描的详细分析也很有用。

# php - 防止本地缓存 HTTP 流中的响应

> ID：10163256
> 
> 赞同：0
> 
> 时间：2012-04-15T15:13:22.603
> 
> 标签：php, javascript, apache, caching, xmlhttprequest

我正在尝试将从文件读取的数据流式传输到 chrome 客户端。我能够成功传输数据，但我的响应被缓存了，我想防止这种情况发生。出现这种情况是因为我的平面文件包含彼此独立的数据条目，我想同样对待它们。例如，我的文件包含：

`{idle_time:94125387364,system_time:98954710321,user_time:3683963615} {idle_time:94125387789,system_time:98954710456,user_time:3683963845} {idle_time:94125387876,system_time:98954710678,user_time:3683963986}`

因此，我收到的不是 {idle_time:94125387876,system_time:98954710678,user_time:3683963986} (THIRD ENTRY) 作为 xmlhttprequest.responsetext

```
{idle_time:94125387364,system_time:98954710321,user_time:3683963615} <br/>
{idle_time:94125387789,system_time:98954710456,user_time:3683963845} <br/>
{idle_time:94125387876,system_time:98954710678,user_time:3683963986} 
```

注意：我不担心断线标签和空格。

我的 PHP 脚本看起来像这样，test.php

```
<?php
set_time_limit(0); 
$filename = 'D:\Smoke_Test\data.txt';

function flush2 (){
echo(str_repeat(' ',256));
// check that buffer is actually set before flushing
if (ob_get_length()){            
    @ob_flush();
    @flush();
    @ob_end_flush();
}    
@ob_start();
}

$file_last_modified_time = 0;

while(true) 
{
$modified_time = filemtime($filename);
$processor_info = "";
if ($file_last_modified_time < $modified_time)  
{
    header("Expires: Sun, 20 Jan 1985 00:00:00 GMT"); // date in the past
    header("Cache-Control: no-cache");
    header("Pragma: no-cache");
    $file_last_modified_time = $modified_time;
    $handle = fopen($filename,"r");
    $processor_info = fgets ($handle);
    fclose ($handle);
    @ob_clean();
    echo $processor_info."<br/>";
    //flush2();
}
flush2();
sleep(1);
clearstatcache(true, $filename);
}

?> 
```

我的 html 页面如下所示： Home.htm

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-     transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title></title>
<script type="text/javascript" language = "javascript">
function read_file ()
{
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
        if (xmlhttp.readyState==4 || xmlhttp.readyState==3 ) //&& xmlhttp.status==200)
        {
            handle_data (xmlhttp.responseText);
        }
      }
    xmlhttp.open("POST","test.php",true);
    xmlhttp.send();
}

function handle_data (input)
{
    document.getElementById("txtResponse").innerHTML=input;
}
</script>

</head>
<body>
<p>
<input type="button" id="dtnSendRequest" value="Send Request" onclick="read_file()"/>
</p>
<p>
response : <span id="txtResponse"></span>
<!-- <input type="text" id="txtResponse" width="500"/> -->
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:17:34.993

尝试将此添加到您的 php 文件的顶部

```
header("Expires: Sun, 20 Jan 1985 00:00:00 GMT"); // date in the past
header("Cache-Control: no-cache");
header("Pragma: no-cache"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:17:54.640

使用它来强制无缓存：

```
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

确保在发送任何输出之前调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T04:48:47.853

您无法避免 responseText 发生的事情。它的 Http Streaming（不是本地或任何缓存）的性质使这种情况发生。我找到了一篇非常好的文章，其中说明了我的情况以及解决方案。

文章是[http://ajaxpatterns.org/archive/HTTP_Streaming.php](http://ajaxpatterns.org/archive/HTTP_Streaming.php)

以下段落包含我的情况以及解决方案。

该服务输出由特殊标记“@END@”分隔的每条消息（XML 标记将是一种替代方法）。然后，可以运行一个正则表达式来获取最新消息，该消息后面必须跟该令牌以确保它是完整的”

# mysql - 有没有更好的方法来运行这个 mysql 更新？

> ID：10163258
> 
> 赞同：1
> 
> 时间：2012-04-15T15:13:27.720
> 
> 标签：mysql, insert

我有以下代码，它首先从数据库中检索每个独特的样式，然后在 products 表中搜索以找到与每个样式关联的术语，并使用 styleid 和 productid 更新 stylerefs 表：

```
$query = "Select id,style,terms from su_styles";

if ($results = $sudb->query($query)) {

while($result = $results->fetch_array(MYSQLI_ASSOC)) {

      $id=$result['id'];
      $style=$result['style'];
      $terms=$result['terms'];      

$query= "INSERT IGNORE INTO su_stylerefs (mykey,id) 
    SELECT mykey,$id FROM su_pref where (match(name) against ('$terms' in Boolean Mode)) 
    ON DUPLICATE KEY UPDATE id=$id, mykey = su_pref.mykey";     

$sudb->query($query); 
```

无论如何我可以将此查询重写为一个，而不是遍历第一个查询的结果？我还有 10 个其他类似的查询需要每天运行，第一个查询中的一些表可能有 100 条记录，这意味着数百个与数据库的连接，这需要一段时间。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:22:30.757

我将首先获取所有这些行以及 match() 案例，然后进行更新：

```
INSERT INTO su_stylerefs (mykey, id)
VALUES ($mykey[0], $id[0]), ($mykey[1] $id[1]), ...
ON DUPLICATE KEY UPDATE id=$id, mykey = su_pref.mykey 
```

**第二种解决方案：**

```
INSERT IGNORE INTO su_stylerefs (mykey,id) 
SELECT sp.mykey, ss.id
FROM su_styles AS ss
INNER JOIN su_pref AS sp
ON match(sp.name) against (ss.terms in Boolean Mode)
ON DUPLICATE KEY UPDATE id = VALUES(id), mykey = VALUES(mykey) 
```

这可能是一个更好的解决方案。

# jquery - jQuery set var 其中 n 是 tabindex 顺序的 ID？

> ID：10163260
> 
> 赞同：0
> 
> 时间：2012-04-15T15:13:44.137
> 
> 标签：jquery

如何将下面的两个脚本合二为一，目标是获得一个脚本来为表单中的输入/选择字段生成 tabindex 顺序功能（其中 1、7、3 是字段的 ID (#)）？

```
$(function(){
var tabindex = 1;
$('input,select').each(function() {
    if (this.type != "hidden") {
        var $input = $(this);
        $input.attr("tabindex", tabindex);
        tabindex++;
    }
});
});

$(function () {
var tab_order_positions = [1, 7, 3],
tab_order = 0;
for (var i = 0, _len = tab_order_positions.length; i < _len; i++) {
    $('#input_' + tab_order_positions[i]).attr('tabindex', ++tab_order);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:58:43.803

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var tab_order_positions = ['1', '7', '3']
            var tabindex = tab_order_positions.length;

            $.each(tab_order_positions, function (i, tab_order_position) {
                $('#input_' + tab_order_position).attr('tabindex', i);
            });

            $('input, select').each(function (i) {
                var obj = $(this);

                if (obj.attr('type') != 'hidden' && (obj.attr('id') !== undefined && $.inArray(obj.attr('id').split('_')[1], tab_order_positions)) === false) {
                    obj.attr('tabindex', tabindex);
                    tabindex++;
                }
            });
        });
    </script>
</head>
<body>
    Name:<input type="text" id="input_1" /><br />
    <input type="hidden" /><br />
    <input type="hidden" /><br />
    Age:
    <input type="text" id="input_3" /><br />
    Birth:
    <input type="text" /><br />
    Test:<select>
        <option>a</option>
        <option>b</option>
    </select><br />
    Gender:
    <input type="radio" name="gender" />
    Male
    <input type="radio" name="gender" />Female
    <br />
    Vechical:
    <input type="checkbox" name="Vechical" /><br />
    <input type="checkbox" name="Vechical" /><br />
    <input type="checkbox" name="Vechical" /><br />
    <input type="hidden" />
    test1:
    <input type="text" id="input_7" /><br />
    test2:
    <input type="text" /><br />
    test3:
    <input type="text" /><br />
    test4:
    <input type="text" /><br />
</body>
</html> 
```

# php - .htaccess 重写托管在 Bitnami/EC2 上的 Wordpress 主机

> ID：10163270
> 
> 赞同：0
> 
> 时间：2012-04-15T15:15:20.643
> 
> 标签：php, wordpress, .htaccess, ubuntu

我在 Amazon EC2 上安装了一个 Bitnami Ubuntu Wordpress 实例。

Bitnami 实例上的`wordpress.conf`文件就像一个 htaccess 文件。

目录结构如下：

```
/opt/bitnami/apps/wordpress/htdocs/index.php 
```

该`wordpress.conf`文件包含

```
Alias /wordpress/ "/opt/bitnami/apps/wordpress/htdocs/"
Alias /wordpress "/opt/bitnami/apps/wordpress/htdocs"

<Directory "/opt/bitnami/apps/wordpress/htdocs">
    Options Indexes MultiViews +FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
    RewriteEngine On
    RewriteBase /wordpress/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /wordpress/index.php [L]
</Directory>

# Uncomment the following lines to see your application in the root
# of your URL. This is not compatible with more than one application.
#RewriteEngine On
#RewriteRule ^/$ /wordpress/ [PT] 
```

这使得博客出现在这个 URL 上

**http://ec2instance.com/wordpress/**

我希望它是（包括查看单个帖子时）：

**http://ec2instance.com/blog/**

**http://ec2instance.com/blog/post-number-1**

**http://ec2instance.com/blog/post-number-2**

ETC

有人知道如何进行此更改吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T11:29:20.200

在该文件中，您将需要更改：

```
Alias /wordpress/ "/opt/bitnami/apps/wordpress/htdocs/"
Alias /wordpress "/opt/bitnami/apps/wordpress/htdocs" 
```

到

```
Alias /blog/ "/opt/bitnami/apps/wordpress/htdocs/"
Alias /blog "/opt/bitnami/apps/wordpress/htdocs" 
```

随着这一变化，apache 将在`/blog`.

然后，您还需要在该文件中更改重写规则（因为新的 url 将使用`/blog`而不是`/wordpress`）。

```
RewriteBase /wordpress/
RewriteRule . /wordpress/index.php [L] 
```

到

```
RewriteBase /blog/
RewriteRule . /blog/index.php [L] 
```

最后，您还需要修改`wp-config.php`文件（in `apps/wordpress/htdocs`），确保`WP_SITEURL`和`WP_HOME`url 指向`/blog`.

```
define('WP_SITEURL', 'http://' . $_SERVER['HTTP_HOST'] . '/blog');
define('WP_HOME', 'http://' . $_SERVER['HTTP_HOST'] . '/blog'); 
```

# git - 如何使用 ssh 设置 tortoisegit 不需要密码

> ID：10163271
> 
> 赞同：19
> 
> 时间：2012-04-15T15:15:25.250
> 
> 标签：git, tortoisegit

我无法让 git/tortoisegit 使用我提供的 ssh 密钥（使用 PuttyGen 创建）。在命令提示符中我收到一个`permission denied`错误，在 TortoiseGit UI 中我收到提示输入密码。我尝试[了这个 SO question](https://stackoverflow.com/questions/5358804/tortoisegit-using-incorrect-ssh-key)，但如前所述，我使用 PuttyGen 创建，在加载我的密钥的情况下运行 Pageant，并配置为使用 TortoisePlink。

然后我找到[了这个 SO question](https://stackoverflow.com/questions/8846972/tortoisegit-asking-password)，并尝试使用 git 目录中的 ssh、我的 TortoiseHG 中的 TortoisePlink（用于 Bitbucket/Mercurial），并且如前所述，已经尝试过 TortoiseGit 中的本地 TortoisePlink。

哦，我确实在我的 Git 帐户以及 TortoiseGit 的 Git->Remote 部分中设置了我的 ppk

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-13T22:35:20.857

检查您的原始网址是什么。

右键单击您的项目文件夹 `TortoiseGit`-> `Settings`-> 选择`Git`->`Remote`并选择源条目。

检查 url 是否以开头`ssh://`并且您的私钥已加载。

如果网址以开头，`https://`那么它每次都会询问您的密码。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T01:50:07.343

我也无法使用 github/tortoisegit 完成这项工作。在 linux 的命令行中使用 git 效果很好。然后我使用了我的用户名/密码，如下所述：

[http://www.programmoria.com/2012/02/saving-tortoisegit-password.html](http://www.programmoria.com/2012/02/saving-tortoisegit-password.html)

和其他地方。这不是一个真正的解决方案（抱歉），而是一种实现相同目的的解决方法：无需输入用户名/密码的自动身份验证。_netrc 文件与私钥一样安全/不安全，私钥也将存储在您计算机的某个位置，因此我认为它是一个可接受的解决方案。当然，欢迎对此发表评论。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-30T00:55:53.840

在身份验证方面，一些 Git 服务器有点违反直觉（恕我直言）。例如，[Github 文档](https://help.github.com/articles/error-permission-denied-publickey/)说：

> 所有连接都必须以“git”用户身份进行。

`ssh://<yourname>@github.com...`因此，您必须连接到 ，而不是尝试连接到`ssh://git@github.com...`。

不再要求我输入密码，TortoiseGit 现在`Success`在完成*推送*操作后显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-03T17:27:05.780

我在 v1.8.4 上也遇到了同样的问题，然后我将我的 ssh 客户端切换到 plink 并且它现在工作正常。TortoiseGit 设置 -> 网络 -> SSH 客户端

plink 与标准腻子包中的 peagent 和其他好东西一起分发

显然，某些版本的 TortoiseGit（尤其是 TortoisePlink）存在错误， [请参阅此答案](https://stackoverflow.com/a/13480347/1285431)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T07:58:50.170

您在 OpenSSH 服务器上的帐户是否知道您应该被授权使用您的公钥？

使用 PuTTyGen 加载您的密钥。您将在“用于粘贴到 OpenSSH 授权密钥文件的公钥”下看到一个只读文本区域。复制里面的东西。

使用 PuTTy SSH 进入 SSH 服务器。`~/.ssh/authorized_keys`使用编辑器打开文件并将复制的文本粘贴到新行中并保存。该`~/.ssh`目录可能还不存在。在这种情况下，请`mkdir ~/.ssh`在编辑该文件之前执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-19T16:07:20.513

使用 Tortoise 2.2.0.0，您需要做几件事。在远程选项卡上，您可以删除已有的 http(s) 源，或者需要添加第二个，使用 ssh:// 并选中 ssh 的“推送默认”复选框，以便 Tortoise 使用它进行推送默认情况下（在我的情况下是 https 来源）。

只有 ssh 需要指定密钥，然后当您推送时，它应该默认将您的新 ssh 源作为目的地，并且不询问您的用户名和密码。

显然，您需要知道您的 URL 中有哪些用户。例如，在 Visual Studio Team Services 中，它是 VSTS 帐户的名称（不是帐户持有人！）。您可能还需要端口号。

这就是我从头开始设置的所有内容，并且效果很好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-16T16:39:55.463

我正在使用 git 2.7 和 tortoisegit 1.8.16 这是我为避免需要密码所做的，它适用于我的情况

右键单击您的项目文件夹 TortoiseGit -> Settings 选择 Git -> Remote 并选择源条目 Change url from [https://github](https://github) ... to ssh://git@github...

# ruby-on-rails - 如何在创建用户资源的同时创建具有默认参数的帐户资源？

> ID：10163272
> 
> 赞同：1
> 
> 时间：2012-04-15T15:15:36.540
> 
> 标签：ruby-on-rails, nested-resources

为这个简单的问题道歉。

我有嵌套资源

```
 resources :users do
  resources :accounts
 end 
```

我想在创建用户时在后台为新用户创建一个帐户。

我试过

用户控制器

```
def create
    @user = User.new(params[:user])
    @account = Account.new(params[:account])
end 
```

form_for 用户

```
<%= form_for([@user, @account]) do |f| %>
. . . 
<%= f.submit %> 
```

但我得到这个错误

```
 No route matches {:action=>"new", :controller=>"accounts"} 
```

我还想在帐户中传递默认数据。“例如 balance_in_cents => 0 等”

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:35:28.460

如果您的用户拥有多个帐户，则在控制器的 create 方法中您应该拥有`@account = @user.accounts.build`. 然后，这将为该用户建立一个帐户。

这个[railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)对于嵌套表单非常有用，关联的 rails guide 在[这里](http://guides.rubyonrails.org/association_basics.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:58:26.663

您的 form_for 没有生成正确的路线。它经常对 HTTP 方法感到困惑。你需要的是

```
<%= form_for([@user, @account], :url => users_path, :method => :post) do |form| %> 
```

# java - 使两个类在 Java 中一起工作

> ID：10163273
> 
> 赞同：0
> 
> 时间：2012-04-15T15:15:44.937
> 
> 标签：java, symbol-not-found

我正在尝试编译我的 NameRecord.java 文件，但我不断收到以下错误：找不到符号 num = input.nextLine(); 这是说 Scanner 输入是问题，但我在调用 NameRecord 类之前初始化并填充了 Scanner 输入。

这两个类都在同一个目录中，所以我不确定我做错了什么。

这是调用 NameRecord 类的类。它无法编译我不断收到未找到符号的方法 NameRecord(String)：

为了节省空间，我省略了一些也包含在此类中的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:36:28.293

阻止编译的问题是`NameRecord`该类无法知道`input`. 这是一个[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)问题。您的代码“知道”的唯一地方`input`是. 您应该将返回的 by传递给它，以使其按您希望的方式工作。`try-catch``main``NameGameFrame``String``input.nextLine()``NameRecord`

话虽如此，这是您的代码中大约 20 个问题之一。

# wpf - 相邻的两个扩展器不会扩展后者

> ID：10163274
> 
> 赞同：0
> 
> 时间：2012-04-15T15:15:53.850
> 
> 标签：wpf, xaml, layout, expander

出于某种原因，当我将两个扩展器并排设置时，第一个扩展器似乎在第二个扩展器之后，并且不会扩展它旁边的扩展器集？有没有办法可以在下面的代码中解决这个问题？

```
<Grid>
    <StackPanel Orientation="Horizontal" Margin="0,0,195,0">
        <StackPanel.Triggers>
            <EventTrigger RoutedEvent="Expander.Expanded" SourceName="expander"> 
                <EventTrigger.Actions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation From="0" To="1.2" Duration="0:0:0.35" Storyboard.TargetName="listBox" Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleX)"/>                                
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger.Actions>
            </EventTrigger>
        </StackPanel.Triggers>
        <Expander x:Name="expander" Expanded="expander_Expanded" ExpandDirection="Right" Width="29">
                <ListBox x:Name="listBox">
                <ListBoxItem Content="ListBoxItem" VerticalAlignment="Top" />
                <ListBoxItem Content="ListBoxItem" VerticalAlignment="Top" />
                <ListBoxItem Content="ListBoxItem" VerticalAlignment="Top" />
                <ListBox.LayoutTransform>
                    <ScaleTransform ScaleX="0" ScaleY="1"/>
                </ListBox.LayoutTransform>
            </ListBox>
        </Expander>

    <StackPanel Orientation="Horizontal" Margin="0,0,342,0" Width="318">
            <StackPanel.Triggers>
                <EventTrigger RoutedEvent="Expander.Expanded" SourceName="expander1">
                    <EventTrigger.Actions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation From="0" To="1.2" Duration="0:0:0.35" Storyboard.TargetName="listBox1" Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleX)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
            </StackPanel.Triggers>
            <Expander ExpandDirection="Right" Name="expander1" Width="29">
            <ListBox Name="listBox1">
                <ListBox.LayoutTransform>
                    <ScaleTransform ScaleX="0" ScaleY="1" />
                </ListBox.LayoutTransform>
                <ListBoxItem Content="ListBoxItem" VerticalAlignment="Top" />
                <ListBoxItem Content="ListBoxItem" VerticalAlignment="Top" />
                <ListBoxItem Content="ListBoxItem" VerticalAlignment="Top" />
            </ListBox>
        </Expander>
    </StackPanel>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:02:18.980

删除`Width="29"`_

```
<Expander x:Name="expander"
          Expanded="expander_Expanded"
          ExpandDirection="Right"
          Width="29"> 
```

一切都会好起来的。

# java - Simple 生成的漂亮 XML 格式（Java Lib）

> ID：10163276
> 
> 赞同：0
> 
> 时间：2012-04-15T15:16:02.747
> 
> 标签：java, xml, serialization

我面临关于可读性和跨平台问题的问题。

我们正在使用某些类和子类即时生成我们的 UI。例如，我将使用基本元素（不是 UI 元素），但我认为“问题”应该是显而易见的。

我问是否在 Simple (http://simple.sourceforge.net/home.php) 中有任何配置开关以达到预期的结果。如前所述，它与另一个平台的可读性有关，如果我只需要针对 JAVA，我不会关心 XML 的外观和感觉。

所以，在我的例子中，我序列化了一个简单的类，结果是：

```
<GuiElementExamples>
   <LastCreated>2012-04-15 16:48:59.813 CEST</LastCreated>
   <NonGuiObject>
      <objectBase class="objects.single.simple.StringObject" _value="">
         <_readonly>false</_readonly>
      </objectBase>
      <objectBase class="objects.single.simple.StringProperty">
         <_items>
            <object class="objects.single.simple.StringObject" _value="Label">
               <_readonly>true</_readonly>
            </object>
            <object class="objects.single.simple.StringObject" _value="">
               <_readonly>false</_readonly>
            </object>
         </_items>
         <_readonly>false</_readonly>
      </objectBase>
   </NonGuiObject>
</GuiElementExamples> 
```

我想拥有的是（我将手动创建它作为示例），是这样的：

```
<GuiElementExamples>
   <LastCreated>2012-04-15 16:48:59.813 CEST</LastCreated>
   <NonGuiObject>
      <StringObject _value="">
         <_readonly>false</_readonly>
      </StringObject>
      <StringProperty>
         <_items>
            <StringObject _value="Label">
               <_readonly>true</_readonly>
            </StringObject>
            <StringObject _value="">
               <_readonly>false</_readonly>
            </StringObject>
         </_items>
         <_readonly>false</_readonly>
      </StringProperty>
   </NonGuiObject>
</GuiElementExamples> 
```

我知道类名不会发生冲突，我可以使用的一个选项是简单的搜索和替换脚本，但也许有一个选项可以配置“简单”以导出如上所示的内容。

我知道如果不运行之前提到的脚本，就无法以上述格式对内容进行反序列化，因为没有完全限定的类名，简单无法知道要创建哪个对象..

感谢任何帮助或解决方法的想法，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:30:28.873

像往常一样，在编写它并返回文档之后，我找到了它:-)
这是教程页面上的最后一个条目，在我的示例中，这可以解决问题：
**编辑这不适用于一个以上的元素，不要问我为什么编辑**

```
 @ElementListUnion({@ElementList(entry = "StringObject", type = StringObject.class)})
  private ArrayList<T> _items = new ArrayList<T>(); 
```

我使用的解决方案有点复杂，但可以完成工作。我将在此处发布源代码，为您指明正确的方向（ObjectBase 是我想要以上述方式“重命名”的所有对象的基类）：

```
public class FormatVisitor implements Visitor
{
    private static ILogger _logger = LogManager.GetLogger(FormatVisitor.class);
    @Override
    public void read(Type type, NodeMap<InputNode> strings) throws Exception
    {

    }

    public void write(Type type, NodeMap<OutputNode> node)
    {
        OutputNode element = node.getNode();

        Class javaType = type.getType();

        if (ObjectBase.class.isAssignableFrom(javaType))
        {
            _logger.Verbose("Old name was " + element.getName());
            element.setName(javaType.getSimpleName());
            _logger.Verbose("Changing name to " + javaType.getSimpleName());
        }

        try
        {
            String className =  element.getAttributes().get("class").getValue();
            Class localClass = Class.forName(className);
            boolean shouldShortenName = ObjectBase.class.isAssignableFrom(localClass);
            if (shouldShortenName)
            {
                element.getAttributes().remove("class");
                element.setName(localClass.getSimpleName());
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();  
        }

        if (ObjectBase.class.isAssignableFrom(javaType))
        {
            element.setName(type.getType().getSimpleName());
        }

    }

} 
```

# jquery - jQuery each() 只返回第一个找到的值

> ID：10163280
> 
> 赞同：0
> 
> 时间：2012-04-15T15:16:14.450
> 
> 标签：jquery

我正在尝试从我的父 div 中获取 ID

```
<div id="btn1"><label class="btn"><input type="submit" value="Submit"/></label></div>
<div id="btn2"><label class="btn"><input type="button" value="Add"/></label></div> 
```

jQuery函数：

```
$('.btn').each(function () {
    alert($('.btn').parent().attr("id"));
}); 
```

该函数两次返回值“btn1”。它应该返回“btn1”、“btn2”。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:18:26.850

您在`.btn`循环中再次使用了选择器。将其更改为引用当前元素使用`this`

```
$('.btn').each(function () {
    alert($(this).parent().attr("id"));
}); 
```

编辑：

根据[jfriend00](https://stackoverflow.com/users/816620/jfriend00)

> 真的没有理由在这里使用三个 jQuery 函数调用。只有当 jQuery 做得更好时才应该使用它。

以及其中一些常见场景的参考： [https ://stackoverflow.com/a/4652402/803739](https://stackoverflow.com/a/4652402/803739)

# jquery - 有 2 张不同尺寸的图像，具体取决于使用 fancybox 的屏幕尺寸

> ID：10163289
> 
> 赞同：0
> 
> 时间：2012-04-15T15:17:20.783
> 
> 标签：jquery, fancybox

我正在尝试使用 fancybox 作为灯箱在网站上显示图像。

我正在将该站点设计为一个固定宽度的 960px 站点。我想向人们展示图像，但如果屏幕可以显示它们，我也会有更大的图像。

有点像 facebook 如何向用户提供不同尺寸的图像。

如果窗口太小而无法以全尺寸显示，Fancybox 会将图像缩小，所以我在想如何使用带有 2 张图像的 fancybox。

一张图片的宽度为 960 像素，适用于屏幕为 960 像素或更小的用户（由 fancybox 缩小）

对于超过 960 像素的屏幕，我会有另一个 1200+ 宽的图像

如果您的屏幕可以显示 1100 像素，那么您将获得按比例缩小的更大图像。

这样做的原因是小屏幕用户不必下载大图像。有了这个条形集，我可以输出 1500 宽等的图像。

我也看过floatbox [http://floatboxjs.com/demo](http://floatboxjs.com/demo) ，但认为fancybox的一些功能更好，除了一件事之外，floatbox具有放大图片的功能，如果它没有以全尺寸显示。查看地球图片演示，或在小窗口中打开其他图像之一。可以fancybox做到这一点吗？我知道您可以使用按钮执行此操作，但想知道如何像 floatbox 一样执行此操作。同时仍然让用户保存图像。

我已经研究了使用 css 执行此操作的其他方法，将图像换出等，但是我将内容放到页面上的方式不起作用。另外，如果您想保存图像，它会出于某种原因保存较小的图像。- [http://csswizardry.com/2011/07/responsive-images-right-now/](http://csswizardry.com/2011/07/responsive-images-right-now/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:39:25.917

如果您使用fancybox v2.x，那么您可以将相同的大图像“缩放”以适应您拥有的任何分辨率的视口，然后使用`buttons`帮助器将图像扩展为其原始（大）尺寸。

查看[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)上的演示，扩展功能 == > 按钮助手（不要忘记检查 javascript 选项卡）

# python - 如何模拟流式 API？

> ID：10163293
> 
> 赞同：0
> 
> 时间：2012-04-15T15:17:40.273
> 
> 标签：python, api, node.js, real-time

我需要保持对 API 的*几乎*实时访问（以便在 API 响应发生更改时立即通知程序）。提供的 API 是非实时的。我想要的是类似于 Twitter 的流 API（[https://dev.twitter.com/docs/streaming-api](https://dev.twitter.com/docs/streaming-api)）的东西。

我可以每秒发送一次 API 调用，但这太低效了。有什么更好的方法来做到这一点？我可能会在 Python 或 Node.js 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:39:52.457

由于您是客户端，因此除了每隔几秒轮询一次 API 之外，您绝对无法知道 API 响应是否发生变化。

通过使用保证没有更改的最短时间或在不知道更改时可以承受的最长时间来减少 API 调用。

# html - Facebook没有加载@font-face

> ID：10163296
> 
> 赞同：1
> 
> 时间：2012-04-15T15:17:57.490
> 
> 标签：html, css, facebook, iframe, font-face

Facebook 无法加载有什么原因吗

```
 @font-face {
font-family: 'KomikaAxisRegular';
src: url('../komika/komikax_-webfont.eot');
src: url('../komika/komikax_-webfont.eot?#iefix') format('embedded-opentype'),
     url('../komika/komikax_-webfont.woff') format('woff'),
     url('../komika/komikax_-webfont.ttf') format('truetype'),
     url('../komika/komikax_-webfont.svg#KomikaAxisRegular') format('svg');
font-weight: normal;
font-style: normal; 
```

}

它在我的 apache 服务器中显示良好，但 facebook 页面不会。我也在使用 git 将这些更改推送到我的 facebook 主机，也许那里可能有问题，但我看不出任何原因，因为其他所有内容都已更新。

# recursion - 用于嵌套循环的 Lisp 宏（或函数）

> ID：10163298
> 
> 赞同：7
> 
> 时间：2012-04-15T15:18:07.697
> 
> 标签：recursion, macros, lisp, nested-loops

是否可以编写一个 Common Lisp 宏，它接受一个维度和变量列表、一个（迭代的）主体，并创建由列表指定的尽可能多的嵌套循环组成的代码？

也就是说，类似：

```
(nested-loops '(2 5 3) '(i j k) whatever_loop_body) 
```

应该扩大到

```
(loop for i from 0 below 2 do
  (loop for j from 0 below 5 do
    (loop for k from 0 below 3 do
      whatever_loop_body))) 
```

**跟进**

正如怀远正确指出的那样，我必须知道在编译时传递给宏的参数。如果你真的像我一样需要一个函数，请看下面。

如果您对宏没问题，请选择 6502 的递归解决方案，非常棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T16:09:42.463

您不需要引号，因为无论如何都需要在编译时知道尺寸和变量。

```
(defmacro nested-loops (dimensions variables &body body)
  (loop for range in (reverse dimensions)
        for index in (reverse variables)
        for x = body then (list y)
        for y = `(loop for ,index from 0 to ,range do ,@x)
        finally (return y))) 
```

### 编辑：

如果在编译时无法确定尺寸，我们需要一个函数

```
(defun nested-map (fn dimensions)
  (labels ((gn (args dimensions)
             (if dimensions
               (loop for i from 0 to (car dimensions) do
                 (gn (cons i args) (cdr dimensions)))
               (apply fn (reverse args)))))
    (gn nil dimensions))) 
```

并在调用时将主体包裹在 lambda 中。

```
CL-USER> (nested-map (lambda (&rest indexes) (print indexes)) '(2 3 4))

(0 0 0) 
(0 0 1) 
(0 0 2) 
(0 0 3) 
(0 0 4) 
(0 1 0) 
(0 1 1) 
(0 1 2) 
(0 1 3) 
(0 1 4) 
(0 2 0) 
(0 2 1) 
... 
```

### 编辑（2012-04-16）：

上面版本的nested-map 是为了更接近地反映原始问题陈述而编写的。正如 mmj 在评论中所说，将索引范围从 0 到 n-1 可能更自然，如果我们不坚持迭代的行优先顺序，将反转移出内部循环应该会提高效率。此外，让输入函数接受一个元组而不是单个索引可能更明智，以使其与排名无关。这是一个带有所述更改的新版本：

```
(defun nested-map (fn dimensions)
  (labels ((gn (args dimensions)
             (if dimensions
               (loop for i below (car dimensions) do
                 (gn (cons i args) (cdr dimensions)))
               (funcall fn args))))
    (gn nil (reverse dimensions)))) 
```

然后，

```
CL-USER> (nested-map #'print '(2 3 4)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T19:37:42.397

有时一种有用的方法是编写递归宏，即生成包含同一宏的另一个调用的代码的宏，除非情况足够简单，可以直接解决：

```
(defmacro nested-loops (max-values vars &rest body)
  (if vars
      `(loop for ,(first vars) from 0 to ,(first max-values) do
          (nested-loops ,(rest max-values) ,(rest vars) ,@body))
      `(progn ,@body)))

(nested-loops (2 3 4) (i j k)
  (print (list i j k))) 
```

在上面，如果变量列表为空，则宏直接扩展为主体形式，否则生成的代码是`(loop...)`在第一个变量上包含`(nested-loops ...)`do 部分中的另一个调用。

宏在用于函数的正常意义上不是递归的（它不是直接调用自身），但宏扩展逻辑将为内部部分调用相同的宏，直到代码生成完成。

请注意，内部循环中使用的最大值形式将在外部循环的每次迭代中重新评估。如果表单确实是您的测试用例中的数字，则没有任何区别，但如果它们是例如函数调用，则不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T16:08:52.447

嗯。这是 common lisp 中此类宏的示例。但请注意，我不确定这实际上是一个好主意。但我们在这里都是成年人，不是吗？

```
(defmacro nested-loop (control &body body)
  (let ((variables ())
        (lower-bounds ())
        (upper-bounds ()))
    (loop
       :for ctl :in (reverse control)
       :do (destructuring-bind (variable bound1 &optional (bound2 nil got-bound2)) ctl
             (push variable variables)
             (push (if got-bound2 bound1 0) lower-bounds)
             (push (if got-bound2 bound2 bound1) upper-bounds)))
    (labels ((recurr (vars lowers uppers)
               (if (null vars)
                   `(progn ,@body)
                   `(loop 
                       :for ,(car vars) :upfrom ,(car lowers) :to ,(car uppers)
                       :do ,(recurr (cdr vars) (cdr lowers) (cdr uppers))))))
      (recurr variables lower-bounds upper-bounds)))) 
```

语法与您的建议略有不同。

```
(nested-loop ((i 0 10) (j 15) (k 15 20)) 
    (format t "~D ~D ~D~%" i j k)) 
```

扩展到

```
(loop :for i :upfrom 0 :to 10
  :do (loop :for j :upfrom 0 :to 15
            :do (loop :for k :upfrom 15 :to 20
                      :do (progn (format t "~d ~d ~d~%" i j k))))) 
```

宏的第一个参数是列表形式的列表

```
(variable upper-bound) 
```

（隐含的下限为 0）或

```
(variable lower-bound upper-bounds) 
```

多一点爱，一个人甚至可以拥有类似的东西

```
(nested-loop ((i :upfrom 10 :below 20) (j :downfrom 100 :to 1)) ...) 
```

但是，如果`loop`已经拥有所有这些功能，为什么还要麻烦呢？

# html - 我想在 html 页面上显示 .swf 文件，但它没有显示在网页上

> ID：10163299
> 
> 赞同：0
> 
> 时间：2012-04-15T15:18:23.560
> 
> 标签：html, apache-flex, flash, wicket

我对 flex 或 .swf 较新。我正在尝试嵌入一个 .swf 文件，但它不显示请告诉我该怎么做才能显示请告诉我我的 .swf 是否在 bin 文件夹中，那么我如何在页面上显示？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<wicket:extend>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chart.....</title>
</head>
<body>
   <form wicket:id="ChartForm">
<table border="0" align="center" bgcolor=#488AC7 bordercolor="#25383C" width="93%">
                <tr align="center">
                    <td colspan="2" align="right"><font size="2" color="#151B8D"><b><wicket:message key="SEARCHBYSYMBOL"></wicket:message></b></font></td>
                    <td colspan="4" align="left" > 
                    <input name="symbol" id="symbol" type="text" value="" size="25" wicket:id="txtSymbol"   />
                        &nbsp;&nbsp;&nbsp; 
                        <input type="submit" wicket:id="btnSymbolsubmit" style=" width : 53px;" value="submit">

                    </td>
                    <td style=" width : 107px;" align="right"><font size="2" color="#151B8D"><b><wicket:message key="EXPIRYDATE"></wicket:message>  </b></font></td>
                    <td colspan="2"  align="left">
                    <select wicket:id="dDCExpiryDate" style=" width : 98px;"></select>&nbsp;
                    <input type="submit" wicket:id="btnGetCalData" value="OK">
                    </td>
                </tr>
                </table>
                <div style="position: relative;height: 500; overflow:hidden; width : 700;" align="center"> 
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        id="candlestickAndOHLC" width="860" height="400"
        codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
        <param name="movie" value="candlestickAndOHLC.swf" />
        <param name="quality" value="high" />
        <param name="bgcolor" value="#ffffff" />
        <param name="allowScriptAccess" value="always" />
        <embed src="bin\CandleStick.swf" quality="high" bgcolor="#ffffff"
            width="860" height="400" name="candlestickAndOHLC" align="middle"
            play="true"
            loop="false"
            allowScriptAccess="sameDomain"
            type="application/x-shockwave-flash"
            pluginspage="http://www.adobe.com/go/getflashplayer">
        </embed>
</object>
</div>
</form>
</body>
</wicket:extend>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:17:47.497

我建议您查看*SWFObject*，它是一种易于使用且符合标准的嵌入 Flash 内容的方法，它使用一个小的 JavaScript 文件。

您可以阅读文档并从[此处下载](http://code.google.com/p/swfobject/)

# asp.net-mvc - 单击asp.net mvc中的超链接动态创建div

> ID：10163305
> 
> 赞同：0
> 
> 时间：2012-04-15T15:19:15.047
> 
> 标签：asp.net-mvc

**1** .我想在单击按钮时动态生成包含具有唯一 ID 的文本框的 div

```
 <input id="<%:rid %>" type="button" value="reply"/> 
```

**2.**我也想用jquery ajax mathod将文本框数据携带到ashx文件中。

谁能帮我

代码

```
 var lineItemCount = 0;
    $(document).ready(function () {

        $(".commentbox input[type='button']").click(function () {

            var id = $(this).attr("id");

            alert(id);

           var cid = id.substring(5);
           var containerid = "container" + cid;
           alert(containerid);

            //Increase the lineitemcount
            lineItemCount++;
            //Add a new lineitem to the container, pass the lineItemCount to makesure                      
            getLineItem() 
            // can generate a unique lineItem with unique Textbox ids
            $(containerid).append(getLineItem(lineItemCount));
        });
});
 //Create a new DIV with Textboxes
     function getLineItem(number) {
         var div = document.createElement('div');
         //Give the div a unique id
           div.setAttribute('id', 'lineitem_' + number);

         //pass unique values to the getTextbox() function
         var t1 = getTextbox('txt_' + number + '_1');
         div.appendChild(t1);
         return div;
     }

     //Create a textbox, make sure the id passed to this function is unique...
     function getTextbox(id) {
         var textbox = document.createElement('input');
         textbox.setAttribute('id', id);
         textbox.setAttribute('name', id);
         return textbox;
     } 
```

在 aspx 页面中通过模型迭代

```
<%var i=1;%>
 <%foreach (var commentitem in item.commentsModelList)
  { 
    <table border="0"  class="commentbox">
    <tr>
      <%var rid = "reply" + i;%>
       <div id="<%:containerid %>">
        <td>  <input id="<%:rid %>" type="button" value="reply"/>
       </div>
    </td>
   </tr>
  </table>
  <% i++;}%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:08:22.523

我稍微更改了您的标记以在我的点击事件中获取相应的项目 ID

HTML

```
 <table border="0"  class="commentbox">
    <tr>
        <td>Some Item text
        </td>
     </tr>
     <tr>
         <td>
             <div id="container-1" ></div>
             <input type="button" class='btnReply' id="reply-1" value="Reply" />             
         </td>
     </tr>
</table> 
```

和脚本

```
 $(function(){     
      $(".commentbox .btnReply").click(function(){
        $(this).hide();
        var id=$(this).attr("id").split("-")[1]        
        var strDiv="<input type='text' class='txtCmnt' id='txtReply-"+id+"' /> <input type='button' class='btnSave' value='Save' id='btnSave-"+id+"' /> ";
        $("#container-"+id).html(strDiv);          
      });

       $(".commentbox").on("click",".btnSave",function(){
          var itemId=$(this).attr("id").split("-")[1]         
           var txt=$(this).parent().find(".txtCmnt").val();
           $.post("/echo/json/", {reply: txt, id: itemId},function(data){                            
               alert(data);
               //do whatever with the response
           })           
       });       
    }); 
```

这是 jsfiddle 示例：http: [//jsfiddle.net/UGMkq/30/](http://jsfiddle.net/UGMkq/30/)

您需要将发布目标网址更改为处理 ajax 响应的相关页面。

**编辑：根据关于处理多个 Divs 的评论**

只要您的容器 div id 是唯一的，它就可以工作，我只是将标记更改为包含多个项目。

```
 <table border="0"  class="commentbox">
    <tr>
        <td>Some Item text<br/>                
             <div id="container-1" ></div>
             <input type="button" class='btnReply' id="reply-1" value="Reply" />             
         </td>
     </tr>
      <tr>
        <td>Some Another Content here <br/>               
             <div id="container-2" ></div>
             <input type="button" class='btnReply' id="reply-2" value="Reply" />             
         </td>
     </tr>
</table> 
```

这是示例：http://jsfiddle.net/UGMkq/44/

对于要呈现的上述输出，您可能希望像这样编写剃刀语法

```
<table border="0"  class="commentbox">
@foreach (var commentitem in item.commentsModelList)
{
   <tr>
      <td>Some Another Content here<br/>
          <div id="container-@(commentitem.Id)" ></div>
          <input type="button" class='btnReply' id="reply-@(commentitem.Id)" value="Reply" />             
       </td>
    </tr>
}
</table> 
```

我没有为每个项目创建一个新表，而是在现有表中创建了一个新行。

# css - 如何使网页上的元素相对于另一个元素固定但相对于另一个元素？

> ID：10163310
> 
> 赞同：0
> 
> 时间：2012-04-15T15:19:49.260
> 
> 标签：css

我有一个固定的元素，并且距离屏幕左侧有一个边距。我想使这个元素成为包装器的权利，因为分辨率较小或较大的人会使该元素非常远或非常接近我的包装器。

我希望这是有道理的！:S

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:39:22.773

据我所知，在同一个元素上同时使用固定和相对是不可能的。

你可以做的是一个 jQuery 解决方案。

但是固定位置真的有必要吗？如何修复包装器，然后仅在另一个文档上使用 relative 来相对于包装器定位它？那应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:45:11.113

你可以使用这样的东西：

**HTML**

```
<div id="wrapper">
    <div id="fixed"></div>
</div> 
```

**CSS**

```
#wrapper {
    width: 400px;
    height: 600px;
    margin: 0 auto;
}
#fixed {
    width: 40px;
    height: 100px;
    position: fixed;
    top: 0;
    margin-left: 400px;
} 
```

简单的jsfiddle：http: [//jsfiddle.net/MXgT9/](http://jsfiddle.net/MXgT9/)

# sql - SQL 使用查找表创建供应商报价

> ID：10163319
> 
> 赞同：0
> 
> 时间：2012-04-15T15:20:12.993
> 
> 标签：sql, sql-server, sql-server-2008, database-design

我有一个名为供应商的查找表，其中包含我所有的供应商信息。我还有一个名为材料的查找表，其中包含我所有的材料信息。我正在创建另一个名为 supplier_quote 的表，我将在其中存储 3 个供应商，每个供应商至少 3 种原材料以及价格和数量。

这样做的目的是，Visual Basic 中的用户可以调用 1 个供应商并获取 3 种材料中的每一种的价格，调用下一个供应商并输入相同 3 种材料的价格，然后再次输入第 3 个供应商。

我在想表格中的一个下拉框来显示每个供应商的名称和原材料，但到目前为止我似乎无法理解它背后的逻辑。

我需要这样的东西：

```
供应商 1
原材料 A. $23
原材料 B. $25
原材料 C $30

供应商 2
原材料 A. $22
原材料 B. $21
原材料 C. 35 美元

供应商 3
原材料 A. $23
原材料 B. $32
原料 C. $29

```

所有这些信息都将成为supplier_quote 表中的一条记录，因为它们都包含在同一个报价中。价格是由做报价的人输入的，所以我猜它们会存储在同一张表中。

有人请帮忙吗？我提前感谢它。我正在使用 Visual Basic 2010 和 SQL 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:37:45.633

引用（只是关于我可能跟踪的一些想法，但这是需要澄清的地方）

*   ID
*   姓名
*   报价原因（为什么需要此报价？）
*   请求者（谁要求它可能链接回用户？）
*   对于项目#...（您是否将这些跟踪到特定项目或 RFP？）
*   截止日期（供应商的所有提案都需要在什么时候返回？）
*   ETC...
*   Request For Proposal #（您如何在内部跟踪报价请求？）

供应商

*   ID
*   姓名

材料

*   ID
*   姓名

供应商_报价

*   Quote_ID
*   供应商_ID
*   StartDate（日期供应商定价是好的形式）
*   EndDate（如果开放式结束，日期供应商定价最好留空。）

供应商_报价_材料

*   Quote_ID
*   供应商_ID
*   Material_ID
*   价格
*   数量限制等...

用户界面：

用户输入“报价维护交易”

*   选项卡式界面或您决定的多个部分。

选项卡 1 - 报价

*   搜索
*   报价清单结果（更新选定的详细信息部分以反映选择）
*   详细信息（添加/删除/保存按钮）

选项卡 2 - 供应商（在选项卡 1 上选择报价之前禁用）

*   搜索
*   供应商列表结果（更新选定的详细信息部分以反映选择）
*   详细信息（添加/删除/保存按钮）

选项卡 3 - 材料（在选项卡 2 上选择供应商之前禁用）

*   搜索
*   材料清单（更新选定的详细信息部分以反映选择）
*   详细信息（添加/删除/保存按钮

通过部分/选项卡维护报价、供应商和材料之间的关系。因此，用户将供应商添加到报价中，然后将材料添加到与报价相关的供应商。

# javascript - Android 缩放 javascript

> ID：10163320
> 
> 赞同：1
> 
> 时间：2012-04-15T15:20:17.317
> 
> 标签：javascript, android

嗨，谁能告诉我如何让这个 javascript 代码在浏览器上全屏显示？该代码运行良好，但在较大的设备上看起来太小了...不确定要更改什么，感谢您提供的所有帮助:)

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title></title>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
        <meta content="width=device-width; initial-scale=1.0; maximum-scale=2.0; user-scalable=1;" name="viewport" />
        <style type="text/css">
html{background-color:transparent;height:100%;width:100%;}
    body{background-color:transparent;font-size:15pt;font-family:helvetica;color:white;}
    img{border:0px;}        </style>
    </head>
    <body>
        <!-- MAGIC 8 BALL START --><script>
var t0;
var ar8Ball = new Array;
ar8Ball[0]="Lookin' Good,<br> Right On!";
ar8Ball[1]="Sock It To Me, <br> Ask Again";
ar8Ball[2]="Hey Joe,<br>I Doubt It";
ar8Ball[3]="Outlook Along The Watchtower Not So Good";
ar8Ball[4]="Yeah Man!";
ar8Ball[5]="Outta Sight!";
ar8Ball[6]="Nope,<br> Peace Out";
ar8Ball[7]="Mellow Out,<br>Tell You Later";
ar8Ball[8]="My Foxy Ladies <br> Say No";
ar8Ball[9]="Don't Count On It,<br> Sucka";
ar8Ball[10]="I Can Dig It";
ar8Ball[11]="No Doubt <br>Brothas & Sistas";
ar8Ball[12]="Yes,<br> Can You Dig It?";
ar8Ball[13]="Righteous!";
ar8Ball[14]="Far Out!";
ar8Ball[15]="Excuse Me While I Kiss The Sky,<br> Ask Later";
ar8Ball[16]="Groovy Baby, <br> Yes";
ar8Ball[17]="Reply Purple Hazy, <br> Try Again";
ar8Ball[18]="Most Likely, <br> My Voodoo Child";
ar8Ball[19]="You Have To Go On <br> And Be Crazy";

function randomize(lo,hi)
{ return (lo + Math.floor(Math.random()*((1+hi)-lo)));
} 

function ksa8Ball()
{
  self.clearTimeout(t0);
  o = document.getElementById('theBall');
  v = '<div id=theBall style=">';
  v = v + ' width: 250px; height:380px;';
  v = v + '">';
  v = v + '<a href="javascript:ask8Ball();">';
  v = v + '<img border=0 src="jimiask1.jpg">';
  v = v + '</a>';
  v = v + '</div>';
  o.innerHTML = v;   
}

function ask8Ball()
{
  o = document.getElementById('theBall');
  v = '<div id=theBall style="';
  v = v + ' width: 250px; height:380px;';
  v = v + ' background-repeat: no-repeat;';
  v = v + ' background-image:url(jimianswer1.jpg);';
  v = v + ' text-align: center;';
  v = v + ' font-family: Arial;';
  v = v + ' font-size: 18pt;';
  v = v + ' color: #000000;';
  v = v + '"><br><br>';
  v = v + ar8Ball[randomize(0,19)];
  v = v + '</div>';
  o.innerHTML = v;
  t0 = self.setTimeout('ksa8Ball()',1 * 2500);
}
</script>
        <div style="
background-color: #000000;">
            <center>
                Just think of your question and click on Jimi
                <div id="theBall" style="width:250px; height:380px;">
                    <a href="#" onclick="ask8Ball();"><img border="0" src="jimiask1.jpg" /></a></div>
                <!-- MAGIC 8 BALL STOP --></center>
            <a href="#" onclick="ask8Ball();"> </a></div>
        <p>
            <a href="#" onclick="ask8Ball();"> </a></p>
        <p>
            <a href="#" onclick="ask8Ball();">&nbsp;</a></p>
        <p>
            <a href="#" onclick="ask8Ball();"> </a><a href="#" onclick="ask8Ball();"> </a></p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:29:54.343

我希望您的主要困难在于这一行：

```
<div id="theBall" style="width:250px; height:380px;"> 
```

您已硬编码大小。

因此，如果您想让它具有适应性，以便您可以根据大小更改字体和所有内容，那么样式表可能是您最好的选择。

如果要获取浏览器窗口大小，可以查看以下内容：

[http://www.java-samples.com/showtutorial.php?tutorialid=1015](http://www.java-samples.com/showtutorial.php?tutorialid=1015)

然后，如果您知道，那么您可以为适当的设备大小（小/大）动态添加 css 标记。

然后，在 css 中设置字体、div 宽度/高度以及您想要更改的任何其他内容。

# menu - TI-84 多菜单程序

> ID：10163329
> 
> 赞同：0
> 
> 时间：2012-04-15T15:21:42.120
> 
> 标签：menu, ti-basic

因此，当您使用 Menu() 函数制作菜单时，它会：

标题
选项 1
选项 2
选项 3
等等...

但是计算器上已经存在的几乎每个菜单都有多个标题可供您选择，然后每个标题都有自己的选项。你会如何编程呢？

最终产品是：

**Main** Secondary Tertiary
1\. Option 1
2\. Option 2
3\. Option 3
Etc...

另外，我怎样才能使它有超过七个项目？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:57:05.297

那是用 TI 汇编编写的，与 TI BASIC 完全不同。也许一种新的 TI 编程语言（例如 Ax）可能能够做到这一点。我不确定，因为我在为计算器编程时没有新的编程语言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-06T19:25:52.037

我意识到这个问题已经有好几年了，但我完全在 TI-BASIC 中对此的解决方案是设置这样的东西（示例来自我为 D&D 构建的骰子滚轮程序）

```
Lbl 00
ClrHome
Menu("How many sides?","Coin",2,"Four",4,"Six",6,"Eight",8,"Ten",10,"Page 2",P
    //Page 2 directs to another menu at label P
Lbl P
Menu("How many sides?","Twelve",12,"Twenty",20,"Custom",C,"One hundred (Percentile)",99, Page 1",00,"Quit",XX 
```

您将看到第 2 页只是另一个菜单选项，它像所有其他选项一样转到标签。但它就像另一个页面或子菜单。它通过转到一个标签来执行此操作，该标签具有另一个`Menu(`看起来像第一个命令的命令。

为了给您提供来自同一程序的另一个示例，让我们看一下 d20 滚筒。首先，您会注意到在前面的代码中它指向标签 20。

```
Lbl 20
Menu("Advantage or disadvantage?","Neither",21,"Advantage",22,"Double advantage",23,"Triple advantage",24,"Disadvantage",02,"Back to top",00,"Quit",XX 
```

返回顶部 转到标签 00 处的顶部菜单

# ldap - LDAP 和 CRL 之间有区别吗？

> ID：10163334
> 
> 赞同：0
> 
> 时间：2012-04-15T15:22:19.230
> 
> 标签：ldap, pki

在公钥基础设施的背景下？LDAP是指由LDAP服务器公开的公开可用的公钥，您可以使用LDAP协议进行查询？CRL 代表证书撤销列表，换句话说，它包含不被信任的证书。这两个协议是否依赖于同一个公钥证书数据库？我在这里有一个 CA，它宣布不会继续更新 CRL，但他们对 LDAP 查询的响应似乎是最新的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:37:22.190

*   **LDAP是**[RFC4511](https://www.rfc-editor.org/rfc/rfc4511)指定的小型轻量级协议。如今，除了协议本身之外，术语*LDAP*还用于指代目录信息树 (DIT)

*   **证书吊销列表**( CRL) 是已被颁发机构或验证机构吊销的证书序列号列表，因此客户端无法可靠使用

*   LDAP 通常用作PKI 信息（例如公钥、私钥和证书）的*数据存储，并且实际上在此任务中表现出色*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:37:02.237

*   HTTP 是 CRL 信息的另一种访问方法。在美国联邦和 CertiPath PKI 中，HTTP 已成为标准，而 LDAP 现在已不常见。
*   CRL 信息也可以通过 OCSP 以 1:1 的方式获取，OCSP 使用问答式的方法来查询特定数字证书/公钥的撤销状态。当需要最新的撤销信息或 CRL 规模很大（例如，美国 DoD 的 PKI）时，这尤其有用。HTTP 是 OCSP 的协议，很少通过 HTTPS 完成，因为 OCSP 响应已经过数字签名。

您的具体问题提到了 CA 不发布进一步 CRL 更新的意图。希望这意味着他们将完全停止 CA 操作并使 CA 下线。显而易见的问题是，如果该 CA 颁发的任何最终实体密钥丢失或受损，则不会有撤销信息。此外，在线的 CA（自签名根）总是有可能被破坏，并且必须能够发布一个 CRL，如果发生这种情况，它会自行撤销。仔细考虑您对不再具有权威性的受信任机构颁发的凭证的信任程度。

# ios - iOS 获取 UITableViewCellAccessoryDe tail 的视图

> ID：10163340
> 
> 赞同：1
> 
> 时间：2012-04-15T15:23:30.840
> 
> 标签：ios, uitableview, popover

我有一个我之前编写的函数，用于从条形按钮项中显示一个弹出框，现在我试图重用它来在表格处于编辑模式时显示来自单元格附件的弹出框。

我试过了

```
[self showPopover:[[theTableView cellForRowAtIndexPath:indexPath] editingAccessoryView]] 
```

但这是 NULL。

最初它设置为`[cell setEditingAccessoryType: UITableViewCellAccessoryDetailDisclosureButton];`如果这有什么不同。

弹出功能是

```
-(void) showPopover:(id)sender {
    ...
     [self.popOver presentPopoverFromBarButtonItem:sender 
                             permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

请有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:40:32.533

如何尝试显示：

```
- (void)presentPopoverFromRect:(CGRect)rect inView:(UIView *)view permittedArrowDirections:(UIPopoverArrowDirection)arrowDirections animated:(BOOL)animated 
```

只需将您的 cell.accessoryView.frame 作为“rect”参数传递给它。

# php - 回显部分文本

> ID：10163341
> 
> 赞同：0
> 
> 时间：2012-04-15T15:23:30.820
> 
> 标签：php

我只想显示段落的两行。
我该怎么做呢 ？

```
<p><?php if($display){ echo $crow->content;} ?></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:28:01.807

根据您所指的文本内容，您可能可以摆脱这种情况：

```
// `nl2br` is a function that converts new lines into the '<br/>' element.
$newContent = nl2br($crow->content);

// `explode` will then split the content at each appearance of '<br/>'.
$splitContent = explode("<br/>",$newContent);

// Here we simply extract the first and second items in our array.
$firstLine = $splitContent[0];
$secondLine = $splitContent[1]; 
```

**注意**- 这将破坏您在文本中的所有换行符！如果您仍想以原始格式保留文本，则必须再次插入它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:29:39.803

如果你的意思是句子，你可以通过分解段落并选择数组的前两部分来做到这一点：

```
$array = explode('.', $paragraph);
$2lines = $array[0].$array[1]; 
```

否则，您将不得不计算两行的字符数并使用 substr() 函数。例如，如果两行的长度是 100 个字符，你会这样做：

```
$2lines = substr($paragraph, 0, 200); 
```

However due to the fact that not all font characters are the same width it may be difficult to do this accurately. I would suggest taking the widest character, such as a 'W' and echo as many of these in one line. Then count the maximum number of the largest character that can be displayed across two lines. From this you will have the optimum number. Although this will not give you a compact two lines, it will ensure that it can not go over two lines.

This is could, however, cause a word to be cut in two. To solve this we are able to use the explode function to find the last word in the extracted characters.

```
$array = explode(' ', $2lines); 
```

We can then find the last word and remove the correct number of characters from the final output.

```
$numwords = count($array);
$lastword = $array[$numwords];
$numchars = strlen($lastword);
$2lines = substr($2lines, 0, (0-$numchars)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T15:45:42.093

```
function getLines($text, $lines)
{
    $text = explode("\n", $text, $lines + 1); //The last entrie will be all lines you dont want.
    array_pop($text); //Remove the lines you didn't want.

    return implode("<br>", $text); //Implode with "<br>" to a string. (This is for a HTML page, right?)
}

echo getLines($crow->content, 2); //The first two lines of $crow->content 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T15:36:23.307

This is a more general answer - you can get any amount of lines using this:

```
function getLines($paragraph, $lines){
    $lineArr = explode("\n",$paragraph);
    $newParagraph = null;
    if(count($lineArr) > 0){
        for($i = 0; $i < $lines; $i++){
            if(isset($lines[$i]))
                $newParagraph .= $lines[$i];
            else
                break;
        }
    }
    return $newParagraph;
} 
```

you could use `echo getLines($crow->content,2);` to do what you want.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T16:18:23.877

Try this:

```
$lines = preg_split("/[\r\n]+/", $crow->content, 3);
echo $lines[0] . '<br />' . $lines[1]; 
```

and for variable number of lines, use:

```
$num_of_lines = 2;
$lines = preg_split("/[\r\n]+/", $crow->content, $num_of_lines+1);
array_pop($lines);
echo implode('<br />', $lines); 
```

Cheers!

# iphone - UIImagePickerViewController 关闭缓慢

> ID：10163342
> 
> 赞同：1
> 
> 时间：2012-04-15T15:23:42.133
> 
> 标签：iphone, objective-c

我有一些代码在 UIImagePickerViewController 选择图像时运行，但尽管`[picker dismissModalViewControllerAnimated:YES];`是第一行，但它会等到所有代码完成后才会关闭。我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:30:46.113

怎么样 -

```
[picker dismissViewControllerAnimated:YES completion:^(void){
    // stuff I want to do...
}]; 
```

# c# - 是否可以在 C# 中像在 Excel 中一样在列上生成 Pivot 输出？

> ID：10163343
> 
> 赞同：0
> 
> 时间：2012-04-15T15:23:47.623
> 
> 标签：c#, linq, csv, pivot

我经常面临将数据导出为 CSV 的问题。输出的性质与 excel 中的数据透视表功能相当。

有示例代码可以在 C# 中生成简单的 Pivot。但是由于您有 2 列或更多列，因此事情变得非常复杂。我可以想象有人会建议使用报告服务或其他 BI 工具，但这些对于我们的小团队来说是没有选择的。

是否有人知道如何产生超过 2 列和一个隔离行的枢轴输出？

谢谢乙

# iphone - 从 CVPixelBuffer 参考中获取所需数据

> ID：10163346
> 
> 赞同：11
> 
> 时间：2012-04-15T15:24:09.217
> 
> 标签：iphone, ios, avcapturesession, cmsamplebufferref, cmsamplebuffer

我有一个程序可以实时查看相机输入并获取中间像素的颜色值。我使用 captureOutput: 方法从 AVCaptureSession 输出（恰好被读取为 CVPixelBuffer）中获取 CMSampleBuffer，然后使用以下代码获取像素的 rgb 值：

```
// Get a CMSampleBuffer's Core Video image buffer for the media data
CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
// Lock the base address of the pixel buffer
CVPixelBufferLockBaseAddress(imageBuffer, 0); 

// Get the number of bytes per row for the pixel buffer
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
// Get the pixel buffer width and height
size_t width = CVPixelBufferGetWidth(imageBuffer); 
size_t height = CVPixelBufferGetHeight(imageBuffer); 
unsigned char* pixel = (unsigned char *)CVPixelBufferGetBaseAddress(imageBuffer);

NSLog(@"Middle pixel: %hhu", pixel[((width*height)*4)/2]);
int red = pixel[(((width*height)*4)/2)+2];
int green = pixel[(((width*height)*4)/2)+1];
int blue = pixel[((width*height)*4)/2];
int alpha = 1;

UIColor *color = [UIColor colorWithRed:(red/255.0f) green:(green/255.0f) blue:(blue/255.0f) alpha:(alpha)]; 
```

我虽然那个公式 ((width*height)*4)/2 会给我中间像素，但它给了我图像的顶部中间像素。我想知道我需要使用什么公式来访问屏幕中间的像素。我有点卡住了，因为我真的不知道这些像素缓冲区的内部结构。

将来我想抓取 4 个中间像素并将它们平均以获得更准确的颜色读数，但现在我只想了解这些东西是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T18:12:50.397

用于定位中间像素的公式的主要问题是它仅适用于奇数数量的扫描线。如果你有一个偶数，它会选择扫描线上正下方中间的第一个像素。那是左中像素。由于 iPhone 视频帧旋转了 90 度，因此该像素实际上是顶部中间像素。

所以一个更好的定位中间像素的公式是：

```
(height / 2) * bytesPerRow + (width / 2) * 4 
```

# iphone - 故事板与 iOS 模拟器所见即所得

> ID：10163347
> 
> 赞同：0
> 
> 时间：2012-04-15T15:24:14.847
> 
> 标签：iphone, ios, xcode, interface-builder, simulator

这是我的问题：

![图片](../Images/13e8deac36fee18c1c53efbe7ed27ea1.png)

```
 Left side: iOS Simulator      Right side: Storyboard / Interface Builder 
```

有任何想法吗？谢谢

...[放置在 IB 中的 UI 元素在模拟器中出现上移](https://stackoverflow.com/questions/3335719/ui-elements-placed-in-ib-appears-shifted-up-in-simulator)

也许比这更好的解决方案......我有两个外观完全相同的xib，一个向上移动，另一个工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:44:12.110

好的，但是。我的解决方法是更改​​视图层次结构并将 UIImageView 设置在 UINavigationItem 后面。似乎工作。

# java - Java圆形（6段）

> ID：10163350
> 
> 赞同：0
> 
> 时间：2012-04-15T15:24:47.360
> 
> 标签：java, paint, geometry

我有一个想法，为我正在开发的游戏的主菜单设计一个非常酷的 UI。菜单将是一个以框架中间为中心的完美圆圈。圆被分成6等分。我附上了一张制作不佳的示例图片来尝试说明这个概念。基本上只是想知道绘制这种形状的最佳方法是什么？我的第一个想法是创建一个存储每个交点的点数组，然后在它们之间画线。此外，我对 trig 很烂，所以任何关于如何获得精确测量的建议都会非常有帮助。

我试图将这个想法融入到这个菜单的创建中。关于如何将它们组合在一起的任何想法？[用 2 个点和圆心绘制圆弧](https://stackoverflow.com/questions/4196749/draw-arc-with-2-points-and-center-of-the-circle)

![菜单示例](../Images/923031afe2830ad0f7ed3fd6e6b8c21b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:43:06.750

您使用的是什么 UI 工具包？摇摆/ AWT：

[http://docs.oracle.com/javase/tutorial/2d/index.html](http://docs.oracle.com/javase/tutorial/2d/index.html)

[http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html](http://docs.oracle.com/javase/tutorial/2d/advanced/compositing.html)

[http://docs.oracle.com/javase/tutorial/2d/advanced/complexshapes.html](http://docs.oracle.com/javase/tutorial/2d/advanced/complexshapes.html)

JavaFX：我不知道一个好的 2d 图形合成教程，但作为一个开始：

[http://docs.oracle.com/javafx/2.0/api/javafx/scene/shape/package-summary.html](http://docs.oracle.com/javafx/2.0/api/javafx/scene/shape/package-summary.html)

[http://docs.oracle.com/javafx/](http://docs.oracle.com/javafx/)

# javascript - 无法获取表中每一行最后一列的 id

> ID：10163351
> 
> 赞同：0
> 
> 时间：2012-04-15T15:24:50.997
> 
> 标签：javascript, jquery, html, loops

我有一个动态构建的表，我想要的是，当我单击时，执行一个函数，该函数为我提供每行最后一列的 id，我使用以下代码提醒每一列的 id，但它不工作。谁能帮我 ？？？？这是函数中使用的循环

```
$('table[id="' + tableID + '"]').find('tr').each(function () {
        alert($('td:last-child').attr("id"));

    }); 
```

我在警报中得到的是循环每次迭代中第一行最后一列的 id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:26:43.197

尝试这个

```
$('table[id="' + tableID + '"] tr').each(function () {
    alert($('td:last-child').attr("id"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:26:51.667

您需要为选择器指定上下文，以便查找函数`<td>`正在查看的当前行中的最后一个`.each()`，因此将其更改为：

```
alert($('td:last-child', this).attr("id")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:32:39.547

这将创建一个包含所有最后一个 TD 的组

```
$('#mytable tr td:last-child').each(function () {
    alert(this.id);
}); 
```

[http://jsfiddle.net/JgtV4/](http://jsfiddle.net/JgtV4/)

只要您只想这样做，而不是对每个 TR 执行更多操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T15:33:57.473

另一种选择可能是：

```
$('table#'+ tableID +' tr').each(function () {
    var lastCellOfCurrentRowId = $(this).find('td:last-child').attr("id");
}); 
```

重要的是每个迭代器中的 $(this) 。它指的是迭代中的当前元素，例如表中的每个行元素（TR）。从那个元素你可以做任何你需要的事情，在这种情况下，只需找到最后一个单元格 ID。

# android - 我应该为位图使用什么容器？

> ID：10163354
> 
> 赞同：2
> 
> 时间：2012-04-15T15:25:13.837
> 
> 标签：android

我正在尝试制作一个包含大约 20-30 个资源图像的 Android 应用程序。这些图像用于在画布上显示连续动画，所以我想知道我应该使用什么容器来存储这些图像以获得最佳性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:26:45.627

听起来您已经明白这些图像应该进入 res/drawable 目录（如果没有，那就是它们所在的位置）。

假设您将图像命名为“image0”、“image1”、“image2”等，您实际上可以遍历这些字符串并像这样加载它们：

```
int myImgLen = 10;//or however many images you have, you can also do this dynamically looking for when getIdentifier returns 0, which means it didn't find anything at that name
ArrayList<Bitmap> myList = new ArrayList<Bitmap>;
for(int i = 0; i < myImgLen; i++)
myList.add(BitmapFactory.decodeResource(this.getResources(), 
    this.getResources().getIdentifier("image" + i, "drawable", getPackageName()))
); 
```

这会将您的图像加载到该 ArrayList 中。

然后，您可以一次简单`myCanvas.drawBitmap(myList.get(i));`地将它们绘制到您的画布中。

但是请记住（这非常重要），这在内存消耗方面非常昂贵。如果您的图像是经过很好压缩的 JPG，那么当您将它们加载到位图中时，它们会爆炸，每个像素都会根据您用于加载图像的任何配置占用尽可能多的空间。因此，如果您使用一些小图像来将它们作为动画运行，那将可以正常工作，但如果您希望拥有设备大小的东西（如墙纸），您肯定会得到一个OutOfMemory 异常，除非您随时加载和释放位图（调用`recycle()`它们）。

但是，如果您在制作动画时确实对它们调用了 recycle()，那么当图像加载时，您会在动画中看到很多暂停。

# asp.net - 在 Orchard 网站上投放广告

> ID：10163355
> 
> 赞同：3
> 
> 时间：2012-04-15T15:25:17.773
> 
> 标签：asp.net, orchardcms, google-ads-api

我对果园和网络开发本身非常陌生。我想知道是否可以在 Orchard 网站上集成/添加广告，是否有任何相关资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:34:36.110

是的，这是可能的，但是您必须自己构建一个模块来执行此操作，因为 Orchard Gallery 中还没有任何模块可以处理广告。有一些简单的方法可以在不添加任何代码的情况下做到这一点；这真的取决于你需要做什么来放置你的广告。

如果您只是需要将一些 html 标记放到某些页面中，您可以通过 Orchard 仪表板 UI 以至少几种不同的方式完成此操作。最简单的方法是通过小部件。仪表板->小部件->侧边栏->添加->HtmlWidget。将 HTML 标记放入那里的所见即所得编辑器并设置规则，以便此小部件发布到所需的区域和所需的页面上。请注意，上面的说明说要发布到“侧边栏”区域，但您可以将其替换为您想要的任何区域。您可以使用规则/层来调整您的广告出现在哪个 URL 上。

如果您需要更复杂的行为，您可以通过创建具有 BodyPart 的自定义内容类型来完成它，或者您可以编写自定义小部件。例如，某些系统（如 DFP 广告管理系统）希望您将随机字符串添加到广告的 HTML 以进行缓存清除。我不知道 Orchard 有任何可用于此的令牌替换，但您可以自己编写代码，在身体部分进行令牌替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:53:28.860

将脚本直接添加到您想要展示广告的视图中。

# java - SocketException - “套接字已关闭”，即使 isConnected() 返回 true

> ID：10163358
> 
> 赞同：0
> 
> 时间：2012-04-15T15:25:37.127
> 
> 标签：java, android, sockets

我正在制作一个使用套接字通信将图像发送到计算机上运行的 java 应用程序的 android 应用程序

这是发生了什么：桌面正在运行服务器 java 应用程序，客户端 android 应用程序在设备上运行，它将图像传输到服务器并且该部分运行良好。之后，服务器应用程序从控制台接收一行并将其传递回 android 应用程序。直到 android 应用程序收到该消息，它应该显示一个进度对话框并且它卡在那里。android 应用程序应该使用 readLine() 读取桌面应用程序传递的字符串，但是当我尝试通过 android 应用程序中的套接字打开输入流时，它给了我异常。

以下是代码，首先是桌面服务器，然后是安卓客户端

导入 java.net.ServerSocket；导入 java.net.Socket；导入java.io.*；

```
class ProjectServer
{
    ServerSocket serSock;
    Socket  sock;

    BufferedReader in;
    PrintWriter out;
    public static void main(String ar[])
    {
        try
        {
            ProjectServer cs=new ProjectServer();
            cs.startServer();
        }
        catch(Exception e)
        {

        }
    }

    public void startServer()
    {
        try
        {
            serSock=new ServerSocket(8070);
            System.out.println("Waiting for client...");
            sock=serSock.accept();

            System.out.println("Connections done");

            //Accept File
            System.out.println("Connected");
            System.out.println(sock.isConnected()+"1");

            //receive code

            int filesize=450660;
            int bytesRead;
            int current=0;
            // receive file
            byte [] mybytearray  = new byte [filesize];
            InputStream is = sock.getInputStream();
            FileOutputStream fos = new FileOutputStream("C:\\Project Server\\Capture.png");
            BufferedOutputStream bos = new BufferedOutputStream(fos);
            bytesRead = is.read(mybytearray,0,mybytearray.length);
            current = bytesRead;

            do {
               bytesRead =
                  is.read(mybytearray, current, (mybytearray.length-current));
               if(bytesRead >= 0) current += bytesRead;
            } while(bytesRead > -1);

            bos.write(mybytearray, 0 , current);
            bos.flush();
            System.out.println("end-start");
            bos.close();
            //sock.close();
            //receive code ends

            //System.out.println(br.readLine());

            //Matlab computation

            //Send result
            System.out.println(sock.isConnected()+"2");
            PrintWriter pr=new PrintWriter(sock.getOutputStream(),true);

            pr.println((new BufferedReader(new InputStreamReader(System.in))).readLine());
            System.out.println(sock.isConnected()+"3");
            (new BufferedReader(new InputStreamReader(System.in))).readLine();
            System.out.println(sock.isConnected()+"4");
        }
        catch(Exception e)
        {
            System.out.println(e);
            e.printStackTrace();
        }

    }
} 
```

安卓客户端：

```
package com.site.custom;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.Socket;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class Act2 extends Activity
{
    private ProgressDialog pd;
    private String serverIP="58.146.100.187";
    private BufferedReader in;
    private PrintWriter out;
    private String path;
    private Socket cliSock;

    public void onCreate(Bundle onCreateInstance)
    {
        super.onCreate(onCreateInstance);
        setContentView(R.layout.act2);
        this.setTitle("This has started");
        path=getIntent().getStringExtra("path");

        //Establish Connection
        //pd=ProgressDialog.show(this, "Establishing connection", "Finding server",false,true);

        try
        {
            cliSock=new Socket(serverIP,8070);

            //pd.dismiss();
            //Log.v("MERA MSG","changing text");
            ((TextView)findViewById(R.id.tview)).setText(path);
        }
        catch(Exception e)
        {
            Log.v("MERA MSG",e.toString());
        }

        //Send file
        //Log.v("MERA MSG","changing text1");

        ProgressDialog pd=ProgressDialog.show(this, "Sending image", "Image chosen:"+path.substring(path.lastIndexOf("//")+1),false,true);
        //Log.v("MERA MSG","changing text2");

        try
        {

            File myFile = new File (path);
            System.out.println((int)myFile.length());
            byte[] mybytearray  = new byte[450560];
            FileInputStream fis = new FileInputStream(myFile);
            BufferedInputStream bis = new BufferedInputStream(fis);
            bis.read(mybytearray,0,mybytearray.length);
            OutputStream os = cliSock.getOutputStream();
            System.out.println("Sending...");
            os.write(mybytearray,0,mybytearray.length);
            os.flush();
            os.close();
            bis.close();
            //sock.close();
            //System.out.println("Completed");
            System.out.println(cliSock.isConnected()+"1");
            pd.dismiss();
            //System.out.println("Done");
            System.out.println(cliSock.isConnected()+"2");
            //Show dialog box till computation results arrive
            pd=ProgressDialog.show(this, "Recognizing...", "(waiting for server reply)",false,true);
            System.out.println(cliSock.isConnected()+"3");
            in=new BufferedReader(new InputStreamReader(cliSock.getInputStream()));
            System.out.println(in.readLine());
            pd.dismiss();

        }
        catch(Exception e)
        {
            Log.v("MERA MSG",e.toString());
            e.printStackTrace();
        }

    }
} 
```

顺便说一句，这里是来自 LogCat 的日志：http: [//pastebin.com/atHMycTa](http://pastebin.com/atHMycTa) 您可以确认套接字仍然在此处连接，因为它在第 350 和 349 行显示为 true 查看第 351 行的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T22:44:58.517

isConnected() 只告诉你是否曾经连接过*这个你拥有的 Socket*，所以它返回 true。它不是*连接状态的指示。*

# c++ - 抛出类中定义的类的对象

> ID：10163359
> 
> 赞同：1
> 
> 时间：2012-04-15T15:26:15.300
> 
> 标签：c++, exception-handling, try-catch

我正在阅读第 16 章，以便开始我的 C++ 课程作业。本节介绍异常处理。我理解 try/catch 构造背后的概念，但是，书中的一个例子让我有点困惑。我希望对这是如何工作的一些解释。示例代码如下：

```
// Includes, header guards, and namespace std...
class IntRange
{
 private:
  int intput;
  int lower;
  int upper;

 public: 
  // Exception class
  class OutOfRange { }; // This is exactly how it appears in the text.

  IntRange(int low, int high) { lower = low; upper = high; }
  int GetInput()
  {
    cin >> input;
    if (input < lower || input > upper)
      throw OutOfRange(); // <-- This is my question in particular. What is this?
    return input;
  }
};

// End header guard.

// Program entry point.

int main()
{
  IntRange range(5, 10)
  int userValue;

  cout << "Enter a value in the range 5 - 10: ";
  try
  {
    userValue = range.getInput();
    cout << "You entered " << userValue << endl;
  }
  catch (IntRange::OutOfRange) // <-- Again, what is this delcaration and how can
                               // this data type be defined when IntRange does not
                               // have a default constructor?
  {
    cout << "That value is out of range.\n";
  }

  return 0;
} 
```

代码与教科书中的代码完全相同，除了我将一些内容放在同一行以防止问题变得很长。

如果您发现任何错误，很可能是拼写错误，但最重要的几点已经过仔细检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:30:43.307

```
 throw OutOfRange(); 
```

这将创建一个新的 class 实例`OutOfRange`并将`throw`其保存。请记住，您还可以像这样创建一个实例：

```
my_method( MyClass() ); 
```

代替：

```
MyClass obj; 
my_method( obj ); 
```

现在：

```
catch (IntRange::OutOfRange) 
```

`OutOfRange`是 的*内部或嵌套*类`IntRange`。看[这里](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr061.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:36:20.080

```
 throw OutOfRange(); // <-- This is my question in particular. What is this? 
```

这个默认构造一个对象`OutOfRange`然后抛出它。
即使您没有在类中定义方法，编译器也会自动为您生成一对，其中一个是默认构造函数。因此，即使您没有指定构造函数，那里也会有一个（在规则 3/5 上搜索一下，以解释编译器生成的方法）。

```
catch (IntRange::OutOfRange) // <-- Again, what is this delcaration and how can
                             // this data type be defined when IntRange does not
                             // have a default constructor? 
```

在这里，我们正在捕获一个类型的对象`IntRange::OutOfRange`。**注意**：我们**没有**捕获`IntRange`. 我们正在捕获`OutOfRange`恰好在类内部定义的类`IntRange`（除了定义它的地方没有其他关系）。

另请注意：除非您禁用它，否则编译器将自动为所有类生成一个复制构造函数。因此，异常通常是从抛出点到捕获点的复制构造（稍微复杂一点）。所以你的异常对象必须是可复制的。

另请注意，最好通过 const 引用捕获异常：

```
catch (IntRange::OutOfRange const& e) 
```

这避免了与切片对象相关的问题，这些对象是异常层次结构的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:31:03.047

他们正在创建一个自定义异常（作为一个类）调用`OutOfRange`并抛出它。

这样，您可以通过这种方式专门捕获`OutOfRange`异常：

```
try
{
    //do something
}
catch (OutOfRange o)
{
    //you know the input was out of range
}
catch (Exception e)
{
    //something else went wrong
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T15:31:05.893

您的`OutOfRange`班级作为一个整体*属于*`IntRange`班级 - 它不属于该班级的任何特定对象。

为了使用`OutOfRange`，甚至不需要`IntRange`实际用作具体类，因为`IntRange::OutOfRange`只需指定完全限定的类型名而不是对象。

在 C++ 中，类型名称仅在编译时才重要；数据类型信息（以及变量名和代码中的各种其他内容）通常会被编译器完全剥离 - 数据类型仅用于帮助您编写代码和进行调试。

# iphone - 为 Retina 风格设备设计网站：设计时应该使用哪些维度？

> ID：10163369
> 
> 赞同：1
> 
> 时间：2012-04-15T15:28:23.800
> 
> 标签：iphone, css, retina-display

iPhone 的尺寸是 320x480 Retina iPhone 的尺寸是 640x960

在为 Retina 设备设计设计时，您将文档的大小设置为 320 x 480 还是 640 x 960？

我原以为您会将尺寸设置为 320 x 480。原因是尽管视网膜设备有更多像素，但这些仍然显示在 3" 屏幕尺寸上。如果您确实将尺寸设置为 640 x 960，然后在视网膜显示器上查看时，所有文本都会很小，因为虽然像素更多，但屏幕实际上并没有更大。

那是对的吗？

更新：您是否还使用 320 x 480 作为 CSS 的基本尺寸（请参阅下面的评论）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:53:20.317

对，那是正确的。我是一名 iOS 开发人员，而不是网页设计师，但在 iOS 设备中，您以点为单位指定所有内容（在非视网膜设备上是一个像素，在视网膜设备上是 2x2 像素块），所以所有内容都是相同的大小。视网膜显示屏上的额外像素只会让一切看起来更好。

你*可以*在视网膜屏幕上使用较小的文本，因为你有更多的细节，但在可访问性方面这不是一个好的举措，因为很多人在没有缩放的情况下无法看到你的文本，无论他们拥有什么样的显示。

# iphone - 将本机 iphone 相机缩放滑块和 youtube 播放器控制器添加到我的应用程序

> ID：10163371
> 
> 赞同：4
> 
> 时间：2012-04-15T15:28:31.223
> 
> 标签：iphone, objective-c, ios, xcode, camera

很抱歉将两个问题合二为一，只是认为这些问题可能与 SO 的数据库存储有关...

我正在尝试找到一种方法来添加 iphone 相机本机缩放滑块以及类似于 youtube 应用播放器控制器的东西。我猜 youtube 可能是自定义按钮或其他东西，但没有找到添加缩放滑块的方法。

我想将这两个作为叠加层添加到我在应用程序中使用的相机视图中。

![在此处输入图像描述](../Images/b00031b00e51d71fc457ef1c3af93b99.png)

![在此处输入图像描述](../Images/223057d4c03fcdc307da51aadcbe29f0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:09:09.883

[您可以使用https://github.com/0xced/UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)提取`UIKit`艺术品。对于电影播放器​​控件，您可以使用三和一。对于相机控制，您可以继承或.
`UIButton``UISlider`
`UIControl``UISlider`

# jquery - 如何使用history.js？

> ID：10163375
> 
> 赞同：3
> 
> 时间：2012-04-15T15:28:51.087
> 
> 标签：jquery, ajax, history.js

在我的网站中，左侧有一个导航栏。当我单击链接时，他们会更改我页面上的#container div，但不会通过 ajax 更改其他内容。我想放置后退和前进按钮，这将使#container div 在状态下前进和前进。我读到 history.js 将是最好的选择，我浏览了 html5 history api，但我不明白如何解决我的问题。另外，我将如何实现刷新按钮？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T16:15:12.947

听起来您正在寻找类似[PJAX](http://pjax.heroku.com/)的东西。

需要明确的是，HTML5 History API（History.js 实现/垫片）不直接维护应用程序的状态。相反，它提供了一种将窗口 URL 中的更改映射到负责实际呈现更改的函数的机制。[自述文件](https://github.com/balupton/History.js/)提供了一些关于如何实现这一点的见解：

```
History.Adapter.bind(window, 'statechange', function() {
    var State = History.getState(); 
    History.log(State.data, State.title, State.url);
}); 
```

如果您不想记录状态，而是希望更改容器的内容（不使用 PJAX 或类似库），则可以改为存储`#container`每次调用的内容`pushState`并调整处理函数以执行以下操作：

```
History.Adapter.bind(window, 'statechange', function() {
    var State = History.getState(); 
    $('#container').empty().append(State.data.content);
});

History.pushState({content:"Hello, world!"}, "State 1", "?state=1"); 
```

当然，您需要更改它以反映您的具体情况。

# android - 蓝牙协议及四台设备定位系统的实现

> ID：10163376
> 
> 赞同：0
> 
> 时间：2012-04-15T15:28:51.137
> 
> 标签：android, c++, linux, bluetooth, core-bluetooth

我正在研究蓝牙协议并实现从某些设备读取以 dBm 为单位的 RSSI 的定位系统。系统将使用 3 个具有已知纬度和经度的固定站和一个移动站来实施。定位将在移动站上完成，从每个固定站接收到的功率（以 dBm 为单位）和典型的定位算法。

为了提高系统的效率，需要更改蓝牙设备的一些参数。这个参数可以是：

*   修复站上的扫描时间，以减少响应查询的时间。

*   查询访问代码以获得仅来自选定设备（我们的 3 个固定站）的查询的回答

*   其他一些。

根据使用的技术，可以使用一些场景来做到这一点（其中一些是有限的）：

*   修复Linux操作系统的站（修改参数没问题），Android的移动站（似乎在它的蓝牙库上只有典型的功能，但蓝牙设置很难或不可能修改）。请参阅：http: [//developer.android.com/reference/android/bluetooth/BluetoothAdapter.html](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html)

*   所有在移动站上运行 Linux 操作系统和 C++ 的站（似乎很容易从 shell 脚本运行 hcitool 用于修复站修改我们的设置，但似乎很难在 C++ 上实现源代码来获得我们需要的链路 dBm 值的 RSSI将电台固定在移动台上）。

*   恶心的方式。所有运行 Linux 操作系统和 shell 脚本的站，在运行在 shell 脚本下的移动站上，在午餐查询后从 hcidump 的输出重定向解析 RSSI 值。

似乎很难找到与此场景相关的有用信息。也许你们中的一些人可以帮助选择最佳方案并描述应该如何实施。

（抱歉，如果没有以更好的方式解释某些事情......我的英语很糟糕......）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:47:46.160

抱歉，我没有按照您写的所有内容进行操作，但我认为第一步是深入到固定站上的 HCI 层。这是相当简单的完成并给你相当多的控制。

正如您所提到的，hcitool 非常有用，但您使用什么工具或语言并不重要。您可以使用任何语言访问 HCI 命令。

例如，我在 ALIX 机器上使用[Voyage Linux做了类似的事情。](http://linux.voyage.hk/)Voyage 是基于 debian 的，所以现在加载 BlueZ、PyBluez 和 Python 的问题。Python 让您可以轻松快速地制作解决方案原型，如果需要，您可以稍后将其转换为 C++。（更多[在这里](https://stackoverflow.com/questions/7784854/how-to-access-bluetooth-low-level-functions-in-pybluez)。）

但这只是一个例子——只要你能到达 HCI 层，就可以使用你喜欢的任何堆栈。（通过 HCI 层需要您使用特定的芯片组并将代码直接加载到蓝牙芯片组中。）

On the mobile device you might be severely limited: if you are trying for potential real world implementation. If this is just for the lab, you should get rooted Android devices that use the standard Bluez stack and then, like on the fixed devices, you can get at the HCI interface. Android is, after all, just Linux so you can do what you want if you have root.

# c# - 从格式化字符串生成数据

> ID：10163378
> 
> 赞同：0
> 
> 时间：2012-04-15T15:28:57.183
> 
> 标签：c#, string, c#-4.0, string-formatting

我有这个代码来格式化字符串

```
string s = "the first number is: {0} and the last is: {1} ";
int first = 2, last = 5;
string f = String.Format(s, first, last); 
```

我想从`first`最终格式化的`last`字符串（`f``f``first``last``s`

有一种方法是这样的：

*   `string.Split()`使用（艰难和糟糕的方式）提取它们

但我认为.Net 中有一个简单的解决方案，但我不知道这是什么。

谁能告诉我简单的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T16:48:38.960

为什么不在这里使用一些正则表达式？

```
string s = "the first number is: {0} and the last is: {1} ";
int first = 2, last = 5;
string f = String.Format(s, first, last);

string pattern = @"the first number is: ([A-Za-z0-9\-]+) and the last is: ([A-Za-z0-9\-]+) ";
Regex regex = new Regex(pattern);
Match match = regex.Match(f);
if (match.Success)
{
    string firstMatch = match.Groups[1].Value;
    string secondMatch = match.Groups[2].Value;
} 
```

您显然可以通过适当的错误检查使其更加健壮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:24:24.167

您可以使用正则表达式以更动态的方式实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T16:50:39.447

这是你要找的吗？

```
 string s = "the first number is: {0} and the last is: {1} ";
        int first = 2, last = 5;
        string f = String.Format(s, first, last);
        Regex rex = new Regex(".*the first number is: (?<first>[0-9]) and the last is: (?<second>[0-9]).*");
        var match = rex.Match(f);
        Console.WriteLine(match.Groups["first"].ToString());
        Console.WriteLine(match.Groups["second"].ToString());
        Console.ReadLine(); 
```

# java - WebDriver 无法定位元素（链接/Java）

> ID：10163379
> 
> 赞同：3
> 
> 时间：2012-04-15T15:29:09.263
> 
> 标签：java, html, selenium, webdriver

我正在使用 Selenium 导航一个网页，该网页有一个名为“Mail”的链接，使用 WebDriver（刚刚从 RC 切换到 WebDriver）。我想点击链接，但测试用例总是失败并出现错误：

> org.openqa.selenium.NoSuchElementException: 无法定位元素：{"method":"link text","selector":"Mail"}

使用 Firebug 检查元素时，我得到以下 HTML：

`<a href="url/New-Doc" target="_top" fahidden="false" faswid="e-switcher-mail" faprop="p-e-switcher-function-id">Mail</a>`

这是尝试单击链接的 Java：

```
driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
driver.findElement(By.linkText("Mail"));    
driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS); 
```

我可以看到该元素出现在屏幕上，但测试用例仍然失败。

**有谁知道我在这里可能缺少什么或找到链接元素的替代方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:34:12.877

通过 XPath 尝试。例子：

```
driver.findElement(By.xPath("/a[text()='Mail']")); 
```

也值得仔细检查以确保页面上没有 iframe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:09:46.207

即使我曾经遇到过这种情况。查看您的源代码并确定您要查找的元素是否在框架内。如果是，首先切换到元素所在的框架，然后寻找元素。它对我来说是这样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:10:01.980

到目前为止，我为此类情况找到了最好的解决方法：

*   打开安装了 Selenium IDE 的 Firefox
*   在firefox中打开测试页面
*   运行 selenium IDE，开始录制并点击链接
*   Selenium IDE 将为您提供如何定位目标的方法。如果您切换到相对 XPath，它应该会发挥作用（或者，在我的情况下，它总是有帮助）

# jquery - 无法在标签中显示 localstorage 数组

> ID：10163381
> 
> 赞同：0
> 
> 时间：2012-04-15T15:29:16.097
> 
> 标签：jquery, html, local-storage

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:28:38.020

您可以使用以下 jquery 函数在容器末尾添加元素：

1.  `$(container).append(element)`
2.  `$(element).appendTo(container)`
    例如，您可以创建一个新链接，`$('menu_container1).append('<a>' + localStorage.getItem('journey') + '</a>')`
    您可以通过以下方式迭代存储的值：

    for (var i=0; i<=localStorage.length-1; i++)
    {
    var key = localStorage.key(i);
    var val = localStorage.getItem(key);
    }

# c# - 为什么我不能公开一个已实现的接口方法？

> ID：10163384
> 
> 赞同：2
> 
> 时间：2012-04-15T15:29:28.877
> 
> 标签：c#, interface

我一直在尝试一些 n 层架构，我真的想知道为什么这段代码无法编译......

它说修饰符 public 对此项目无效。但为什么不呢？我需要能够从 BLL 对象访问项目 IRepository.AddString() 但它只是不允许我将其公开....

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            BLL myBLL = new BLL();

        }
    }

    interface IRepository<T>
    {
        void AddString();
    }

    interface IStringRepo : IRepository<string>
    {
        List<string> GetStrings();
    }

    public class BLL : IStringRepo
    {
        public List<string> FilterStrings()
        {
            return new List<string>() { "Hello", "World" };
        }

        public List<string> IStringRepo.GetStrings()
        {
            throw new NotImplementedException();
        }

        public void IRepository<string>.AddString()
        {
            throw new NotImplementedException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:31:07.370

这是一个[*显式实现*的成员](http://msdn.microsoft.com/en-us/library/ms173157.aspx)，它始终是私有的。

从声明中删除`IStringRepo.`以创建一个也实现该接口的普通公共成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:31:55.143

显式实现的接口不能使用可见性修饰符。

```
public List<string> IStringRepo.GetStrings() 
```

应该：

```
public List<string> GetStrings() 
```

# c++ - 通过矢量 * 函数 getnameinfo

> ID：10163389
> 
> 赞同：0
> 
> 时间：2012-04-15T15:30:00.203
> 
> 标签：c++, vector, char, pchar

如何将 vector* 类型的变量传递给 winsock2 的 getnameinfo 函数？

```
GetSocketIPAndPort( struct sockaddr* ss, vector<char>* pIP, uint16_t* nPort )
{
    if (status = getnameinfo((sockaddr*)sin,sizeof(sin),pIP,sizeof(*ptr),0,0,NI_NUMERICHOST))       
    {
        return status;      
    }
} 
```

面对面最好问一下如何将vector*转换为PCHAR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:53:03.587

使用`vector::data`成员函数，它返回一个指向底层数组的指针：

```
GetSocketIPAndPort( struct sockaddr* ss, vector<char>* pIP, uint16_t* nPort )
{
    if (status = getnameinfo((sockaddr*)sin,sizeof(sin),pIP->data(),sizeof(*ptr),0,0,NI_NUMERICHOST))       
        return status;      
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T15:41:01.393

a可以通过写入`std::vector<char>`安全地转换为 a - 例如`char*``&my_vector[0]`

```
std::string fred("hello");
std::vector<char> meow(fred.begin(), fred.end());
meow.push_back('\0');
char* buffer = &meow[0];
std::cout << buffer << std::endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T15:45:49.177

在 STL 中，它保证向量在连续内存中布局其项目，您可以通过获取第一项的地址来访问它，如果`vector<char> ip`它是`&ip[0]`. 同样的方式，因为`vector<char> *pIp`它应该是`&(*pIp)[0]`。

您也可以使用 引用第一项`&pIp->operator[](0)`，但我不会 .. :-)

但是，您不能使用 引用第一项`pIp->begin()`，因为该方案不能保证返回真实地址。

# ruby-on-rails - 如何将 xml 文件加入/合并到单个文件中并返回？

> ID：10163390
> 
> 赞同：3
> 
> 时间：2012-04-15T15:30:11.093
> 
> 标签：ruby-on-rails, nokogiri

我正在使用 Last.fm API，我正在尝试获取有关某个用户的大量信息并以 xml 形式返回。所以，这是我认为的电话：

```
<%= form_tag fetch_user_path, :remote => true, :'data-type' => 'xml', :id => 'search' do %>
  <%= text_field_tag :q %>
<% end %> 
```

因此，如您所见，它需要 XML，并且我正在使用 jQuery 正确处理回调。然后，在我的控制器中：

```
# fetch_controller.rb
def user
  username = params[:q].gsub(' ','+')
  get_info_url = "http://ws.audioscrobbler.com/2.0/?method=user.getinfo&user=#{username}&api_key=#{API_KEY}"
  get_friends_url = "http://ws.audioscrobbler.com/2.0/?method=user.getfriends&user=#{username}&api_key=#{API_KEY}"

  respond_to do |format|
    format.xml {
      begin
        @info = Nokogiri::XML(open(get_info_url))
        @friends = Nokogiri::XML(open(get_friends_url))
      rescue Exception => e
        if e.message == '400 Bad Request'
          render xml: { :error => 'User not found.' }, :status => 400
        else
          render xml: { :error => 'Connection to Last.fm failed.' }, :status => 500
        end
      else
        # Here, I want to render @info + @friends!
        render xml: @info
      end
    }
end 
```

这样，我正确地返回了`get_info_url`. 但是，我想将该 xml 加入到由`get_friends_url`. 我该怎么做呢？

按照 Ben Miller 的回答，我的回调出现了解析错误。我认为这与两个包含`xml version`. 也许合并的文件没有？我看到 xml 文件正在被连接，这是它们的使用方式`console.log`：

```
Error: Invalid XML: <?xml version="1.0"?>
<Combined>
  <UserInfo>
    <?xml version="1.0" encoding="utf-8"??>
    <lfm status="ok">
      <user>
        # lots of info about the user
      </user>
    </lfm>
  </UserInfo>
  <FriendInfo>
    <?xml version="1.0" encoding="utf-8"??>
      <lfm status="ok">
        <friends for="user" page="1" perpage="50" totalpages="2" total="96">
          # lots of info about the user's friends
        </friends>
      </lfm>
  </FriendInfo>
</Combined> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T15:41:50.390

One option it so convert the two XML object to a string and concat them, then wrap in a new root node.

Or you could do it with Nokogiri builder

```
def user
  username = params[:q].gsub(' ','+')
  get_info_url = "http://ws.audioscrobbler.com/2.0/?method=user.getinfo&user=#{username}&api_key=#{API_KEY}"
  get_friends_url = "http://ws.audioscrobbler.com/2.0/?method=user.getfriends&user=#{username}&api_key=#{API_KEY}"

  respond_to do |format|
    format.xml {
      begin
        info_xml = Nokogiri::XML(open(get_info_url))
        friends_xml = Nokogiri::XML(open(get_friends_url))
        builder = Nokogiri::XML::Builder.new do |xml_out|
          xml_out.Combined {
            xml_out.UserInfo {
              node = info_xml.at_xpath("//user")
              xml_out << node.to_xml.to_str
            }
            xml_out.FriendInfo {
              node = friends_xml.at_xpath("//friends")
              xml_out << node.to_xml.to_str
            }
          }
        end
      rescue Exception => e
        if e.message == '400 Bad Request'
          render xml: { :error => 'User not found.' }, :status => 400
        else
          render xml: { :error => 'Connection to Last.fm failed.' }, :status => 500
        end
      else
        render xml: builder.to_xml
      end
    }
  end
end 
```

# apache - .htaccess 重定向更改 URL

> ID：10163391
> 
> 赞同：2
> 
> 时间：2012-04-15T15:30:13.993
> 
> 标签：apache, .htaccess, mod-rewrite, web

我希望重定向`example.com/foo/[some string]FOOBAR`到`subdomain.example.com/[some string]Foobar`

我在我的 .htaccess 文件中使用 `RedirectMatch 301 /foo/(^.*$)FOOBAR http://subdomain.example.com/$1Foobar` 它不起作用，只会导致 404

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:45:13.690

这很可能是因为您有以下规则：

```
RedirectMatch 301 /foo/(^.*$)FOOBAR http://subdomain.example.com/$1Foobar 
```

在哪里，你已经把`$`括号里面了！尝试以下一种：

```
RedirectMatch 301 /foo/(^.*)FOOBAR$ http://subdomain.example.com/$1Foobar 
```

# list - Jquery Mobile：选择朋友列表的代码（带过滤器的选择列表）

> ID：10163404
> 
> 赞同：2
> 
> 时间：2012-04-15T15:31:35.337
> 
> 标签：list, select, jquery-mobile

我想知道是否可以获得带有数据过滤器的选择列表。我的目标是允许用户选择要发送邀请的朋友列表（通过 Facebook 获得）。

我发现在列表视图中我们可以有一个搜索过滤栏；问题：不能多选 [http://jquerymobile.com/test/docs/lists/lists-search.html](http://jquerymobile.com/test/docs/lists/lists-search.html)

并且在表单列表中，我们可以选择多个项目；问题：没有搜索过滤器 [http://jquerymobile.com/test/docs/forms/selects/](http://jquerymobile.com/test/docs/forms/selects/) - 在“带有一长串选项的选择示例：”下

我想找到两者的组合，比如有一个包含大量项目列表的页面，我可以选择多个项目（在这种情况下是朋友）并能够通过它们进行搜索。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:05:01.937

1.  选择菜单。

2.  搜索过滤栏

3.  将选择菜单值复制到搜索过滤器栏的功能

4.  在同一个函数中，模拟`Keyup`运行过滤器并清除搜索过滤器栏

```
$( "#seleMenuID" ).bind( "change", function() {

var val =  $('select option:selected').val();
$('.ui-input-text').val(val); //put value of select menu on search bar Filter

function simulateKeyUp(character) { //simulate keyup to run the filter
jQuery.event.trigger({ type : 'keyup', which : character.charCodeAt(0) });
}

$(function() {
$('body').keyup(function(e) {

});

simulateKeyUp("e");
$('.ui-input-text').val(''); //clear filter search bar

});

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:14:54.133

您可以创建一个列表视图并为列表中的每个条目添加一个复选框。这样，当用户看到过滤列表时，他们可以额外检查他们想要选择的项目。

# umbraco - Umbraco - 使用文档类型

> ID：10163408
> 
> 赞同：0
> 
> 时间：2012-04-15T15:32:14.093
> 
> 标签：umbraco

我昨天开始与 Umbraco 合作，我对它的工作愿景如下：

*   添加文档类型
*   创建基本内容树
*   创建模板
*   编辑文档类型和模板，添加我需要的内容并将“lorem ipsum”替换为来自 Umbraco 的内容

问题是我向客户端文档类型添加了两个属性。然后我在尝试编辑内容时得到了这个：

```
Object reference not set to an instance of an object. 
```

这对我来说很难理解，因为：

*   Umbraco 应该是友好的（'最友好的......'）
*   数据库结构的组织方式不应成为问题
*   即使使用 Fluent NHibernate Migrator 将字段添加到数据库也只会创建另一个字段而不会引发任何异常 - 在这里？

那么这里的想法是什么？文档类型是一劳永逸的，您无法编辑它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:49:31.413

首先，了解您使用的是哪个版本的 Umbraco 会很有帮助，因为 4.x 版本和现在的 v5 版本之间存在细微差别，这是一个完全不同的游戏，在 ASP.NET MVC 上具有全新的代码库。

在 v4 的某些版本中，当您将具有相同别名的两种文档类型或具有相同别名的两种属性添加到一种文档类型时，您会收到发布的错误消息。

让您无法编辑内容不是 umbraco 的意图；-)

# playframework-2.0 - 如何理解 Anorm 解析器？

> ID：10163409
> 
> 赞同：6
> 
> 时间：2012-04-15T15:32:36.750
> 
> 标签：playframework-2.0, anorm

来自[http://www.playframework.org/documentation/2.0/ScalaTodoList](http://www.playframework.org/documentation/2.0/ScalaTodoList)

“〜”做什么以及为什么我不需要地图前的一点？

```
val task = {
  get[Long]("id") ~ 
  get[String]("label") map {
    case id~label => Task(id, label)
  }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:24:21.297

该`~`运算符的灵感来自 Scala[解析器组合](http://www.scala-lang.org/api/current/index.html#scala.util.parsing.combinator.Parsers)器，它允许从一行中提取两列值。

之前没有任何意义，`map`因为在 Scala 中您[不需要编写 points](http://www.scala-lang.org/node/118)。

# javascript - 使用 javascript 填充 jquery 页面 - 如何刷新列表

> ID：10163416
> 
> 赞同：1
> 
> 时间：2012-04-15T15:33:43.547
> 
> 标签：javascript, jquery, mobile, refresh

在花了一周的时间测试，测试和测试代码之后，我必须承认已经达到了我的极限......

我正在尝试使用 jquery 框架将网站（sql-php）转换为移动网站。我的主要问题是我对 javascript 的了解有限......但在过去的 168 小时里学习了很多......

下面是 javascript 代码的一部分，它假设填充`ul`我的 html 代码的 (id = list-area) 部分。

这段代码正在工作......只有在放`alert(list);`线的情况下！如果我删除这部分，“列表”不会添加到菜单中。

我不明白为什么需要此警报...我尝试刷新页面的方式一定有问题。您的帮助将不胜感激。

谢谢

```
$(function() {
    list = "";
    $.getJSON("http://www.sogival.com/jquery-fetch.php", // le fichier qui recevera la requête
    {
        "page": "area",
        "page_id": 0,
        "lang": "fr"
    }, // les paramètres

    function(data) { // la fonction qui traitera l'objet reçu
        for (var i = 0; i < data.items.length; i++) {
            // alert(data.items[i].name);
            list += '<li><a href="m-area.html">';
            list += data.items[i].name;
            list += '<span class="ui-li-count">';
            list += data.items[i].total;
            list += '</span></a></li>';
        }
    });
    alert(list);
    $("ul#list-area").append(list).listview("refresh");
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:10:09.020

把这段代码：

```
$("ul#list-area").append(list).listview("refresh"); 
```

在你的 for 循环之后。

编辑：

还。`var list = ''`

# java - 删除 JIDE 中的行 - 组表

> ID：10163420
> 
> 赞同：0
> 
> 时间：2012-04-15T15:34:03.680
> 
> 标签：java, jide

我正在使用`jidesoft.grid.DefaultGroupTableModel`类包装 `swing.table.DefaultTableModel`。

问题是当我尝试使用该方法删除分组行（DefaultGroupRow）时 `jidesoft.grid.DefaultGroupTableModel.removeRow(row index)` ，

Row 仅在视觉上被删除，并且仍然存在于 `swing.table.DefaultTableModel`.

当我执行该`groupAndRefresh`方法时，将在前端重新创建已删除的行。

如何删除将从 swing 中删除的分组表行`DefaultTableModel`。

提前致谢。

乌里·W。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:11:49.330

GroupTableModel 只是原始表模型的分组视图，在您的情况下是 DefaultTableModel。GroupTableModel 永远不会修改原始表模型。如果您想从 DefaultTableModel 中删除该行，则必须使用 DefaultTableModel#removeRow 方法。

# django - django中的IP跟踪功能

> ID：10163421
> 
> 赞同：0
> 
> 时间：2012-04-15T15:34:48.503
> 
> 标签：django, session, ip

基本上，我不确定这属于哪个主题。像 ipchicken.com 和 whatismyip.com 这样的网站，只需访问该页面即可显示您的 IP 和服务器位置，我有一个页面，我也想做同样的事情。这是一个简单的单页网站，用户访问该网站，一旦他们查看该页面，我的数据库中就会记录他们的 ip 和服务器位置。在此基础上，我还想追踪访问者的数字足迹，以便收集访问者的个人资料。因此，我的问题是如何在 django 中实现这一点，以及在哪里开始学习如何做到这一点的最佳地点。我知道会话 cookie 和缓存，但不知道如何为这样的事情实现它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:41:48.257

您可以通过类似的方式获取访问者的 IP，`request.META['REMOTE_ADDR']`然后可以使用 geoip 库将其转换为地图上的*粗略*位置，如下所示：[https ://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/)

但是“建立数字足迹”？不太确定你要去哪里。如果您只想跟踪一个人在您网站上访问的所有页面，最好使用 cookie。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-15T15:41:30.317

（可以从PHP适配到django）

要公开显示访问者的 IP：

```
<?php
echo $_SERVER['REMOTE_ADDR'];
?> 
```

登录到数据库：

```
<?php
$ip = $_SERVER['REMOTE_ADDR'];
$sqlserver = 'localhost';
$sqlusername = 'database-name';
$sqlpassword = 'password'; //password to the user mentioned above
$con = mysql_connect($sqlserver,$sqlusername,$sqlpassword);
if (!$con){
    die('Could not connect: ' . mysql_error());
    }
mysql_select_db('database-name');
mysql_query("INSERT INTO `database-name`.`table-name` ...", $con);
?> 
```

# jquery - 使用jquery获取输入标签中数组的最后一个元素

> ID：10163423
> 
> 赞同：1
> 
> 时间：2012-04-15T15:35:14.970
> 
> 标签：jquery, arrays

我有

```
<div id="exp">
  <input type="hidden" name="sum[]" value="1" />
  <input type="hidden" name="sum[]" value="2" />
  <input type="hidden" name="sum[]" value="3" />
  <input type="hidden" name="sum[]" value="4" />
</div> 
```

我想在 jquery 中获取数组最后一个元素的值。我试过了：

> 警报（总和 [sum.length-1]）；

但向我展示了“未定义”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T15:39:36.143

你可以使用这个：

```
var lastValue = $("#exp input:last").val(); 
```

这使用 jQuery 选择器来查找最后`input`一个子元素`#exp`并获取其值。

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/Lh7sJ/](http://jsfiddle.net/jfriend00/Lh7sJ/)

# java - 键盘输入：在符号之间延迟执行请求

> ID：10163425
> 
> 赞同：2
> 
> 时间：2012-04-15T15:35:39.970
> 
> 标签：java, input, timer, delay, timertask

为了减少搜索时的服务器过载，我将为键盘输入提供延迟。

用例：
**1.**用户输入符号
**2.**如果输入符号之间的延迟**< 1 秒**，**则不会**立即执行搜索，并且在最后输入符号后的延迟**> 1 秒时等待**
**3.**如果输入符号之间的延迟**> 1 秒**，则执行搜索**立即地**

JSE 或移动 Java（黑莓）中是否有最佳实践？

看起来我应该在这种情况下使用[TimerTask](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html)和[Timer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html) API。是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:48:18.760

根据Java并发圣经' [Java concurrency in practice](http://jcip.net/) '

> ... Timer 有一些缺点，ScheduledThreadPoolExecutor 应该被认为是它的替代品。

因此，我会做类似这个例子的事情：

```
public class DelayedSearch extends JFrame {
    public DelayedSearch() {
        final JPanel panel = new JPanel(new BorderLayout());
        final JTextField field = new JTextField(30);
        panel.add(field, BorderLayout.NORTH);
        final JLabel status = new JLabel(" ");
        panel.add(status, BorderLayout.SOUTH);
        this.add(panel);
        this.pack();
        final ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
        field.addKeyListener(new KeyAdapter() {
            private ScheduledFuture<?> scheduled;
            @Override
            public void keyTyped(KeyEvent e) {
                if (scheduled != null) scheduled.cancel(false);
                scheduled = executor.schedule(new Runnable() {
                    @Override
                    public void run() { // Perform search here. Just set status for demo.
                        status.setText("Search: " + field.getText());
                    }
                }, 1, TimeUnit.SECONDS);
            }
        });
    }
    public static void main(String[] args) {
        new DelayedSearch().setVisible(true);
    }
} 
```

注意：我正在从 EDT 以外的线程更新状态，这是非法的，但你明白了。

编辑：基于下面的精彩评论（谢谢！）`Timer`将在这个简单的情况下工作，并且它使使用守护线程变得容易（尽管它确实存在引发异常的任务的问题，如书中所述）。为此，请按如下方式替换上面的执行器和侦听器：

```
 ...
        final Timer timer = new Timer(true); // use daemon thread.
        field.addKeyListener(new KeyAdapter() {
            private TimerTask task;
            @Override
            public void keyTyped(KeyEvent e) {
                if(task != null)task.cancel();
                task = new TimerTask() {
                    @Override
                    public void run() {
                        status.setText("Search: " + field.getText());
                    }
                };
                timer.schedule(task, 1000);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:05:10.417

是的，使用 TimerTask。我建议对您的规则进行额外的更改：只需确保请求间隔至少一秒钟，但不要等到用户停止输入一秒钟后。相反，当超时到期时，会立即发出一个带有输入字段状态的新请求。用户可能正在打字，但他对您的应用程序的体验将更加流畅和响应迅速。

# php - 推荐一个好的图片上传和裁剪工具

> ID：10163427
> 
> 赞同：2
> 
> 时间：2012-04-15T15:35:46.360
> 
> 标签：php, jquery, upload, crop, jcrop

我想知道您向我推荐了哪些 up-and-crop 工具。我尝试了几个像 JCrop 这样的脚本，但我总是得到某种格式的堆栈，比如 bmp。我要么无法上传，要么可以上传但无法裁剪。如果您使用（或知道）一种适用于不同格式的产品，那么请告诉我它的名称，我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:13:53.183

好吧，我对 JCrop 了解不多，但您可以使用多种工具构建它。我认为图像处理类的工作应该在服务器端完成。有一个名为[Imagine](https://github.com/avalanche123/Imagine)的优秀 OOP 库。它主要基于 Python 的 Imaging Library，它很棒并且有不错的文档。这是[它](http://imagine.readthedocs.org/en/latest/api/Filter/Basic/Crop.html#Imagine%5CFilter%5CBasic%5CCrop%3a%3aapply)的作物功能文档。

在客户端，您可以使用某种图像区域选择工具让用户确定要裁剪的区域。[imgAreaSelect](http://odyniec.net/projects/imgareaselect/)很好。[然后您可以通过JQuery 的 post 函数](http://api.jquery.com/jQuery.post/)或任何其他方式将裁剪区域发送到 php 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-03T21:03:44.220

一直以来，这都没有任何其他答案，我希望这会有所帮助。

就像在另一个答案中所述，您应该结合一些工具来解决问题的每个部分。

1.  让用户**选择**裁剪区域：

    如果你不喜欢 jCrop 你可以试试[Guillotine](//matiasgagliano.github.io/guillotine)。它非常轻巧，易于设置，并允许裁剪、缩放和旋转图像。它具有触摸支持并且响应迅速（流畅）。

    请记住，您无法显示浏览器不支持的图像类型，但您可以在步骤 3 中对其进行转换。

2.  要**上传**图像：

    在大多数情况下，一旦有了裁剪区域，只需输入一个简单的文件就足够了。

    现在，如果您想**异步**上传文件，请查看 [此](https://stackoverflow.com/questions/14809587/asynchronous-jquery-file-upload/25100016#25100016) 以进行快速简便的设置，或者查看[此](//github.com/blueimp/jQuery-File-Upload) 以获取更复杂的解决方案。

3.  要实际**裁剪**和处理图像：

    上传后，您可以在服务器上裁剪、转换和处理图像，[ImageMagick](//imagemagick.org)是一个很好的工具。它是开源的，许多语言都有它的包装器。

    你已经用*PHP*标记了这个问题，所以这里是[ImageMagick 的 PHP 包装器](//php.net/manual/en/book.imagick.php)。

# php - 为什么某些编码指南会改变 PHP 中 if/else 中的条件顺序？

> ID：10163429
> 
> 赞同：3
> 
> 时间：2012-04-15T15:36:15.050
> 
> 标签：php, coding-style

一些编码指南规定您应该将您正在测试的变量放在条件的末尾：

```
// Incorrect
if($isSomething === FALSE) { // Do something }

// Correct
if(FALSE === $isSomething) { // Do something } 
```

我知道有些程序员有在这样的情况下初始化变量的坏习惯：

```
if($results = $db->getResults() { // Do something if results exist } 
```

因此，我可以想象拥有这个违反直觉的规则的唯一原因是防止错误的重新初始化，以防您不小心在 PHP 中只使用了一个等号 (=) 而不是两个等号。

还有其他原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T15:40:59.833

在您想要比较的情况下，您不能意外地分配一个值。这使得发现小错误变得更加容易。

`if (FALSE = $isSomething)`将引发错误，因为您无法重新分配常量，而
`if ($isSomething = FALSE)`将始终返回 true，并且您可能很长时间都不会注意到该错误。

# image-processing - 如何确定 WebGL 中的平均场景亮度？

> ID：10163434
> 
> 赞同：1
> 
> 时间：2012-04-15T15:36:35.903
> 
> 标签：image-processing, opengl-es, opengl-es-2.0, webgl

我目前正在 WebGL 中进行直接的直接屏幕（没有多次传递或后处理）渲染。我想确定整个渲染图像的平均亮度/亮度（即单个数字），以一种足够高效的方式来完成每一帧。

我想要完成的是在场景中实现“曝光”调整（就像摄像机或人眼一样），以便以逼真的照明和没有过渡的方式查看室内和室外场景 - 当前的亮度帧将负反馈到下一帧的亮度。

我目前正在通过我的场景数据发送几条光线来计算 CPU 端的一个非常粗略的近似值，以找到这些点的亮度；这可行，但样本太少而无法稳定（当光线穿过光源时，亮度随视角显着变化）。如果可能的话，我宁愿将工作卸载到 GPU 上，因为我的应用程序通常受 CPU 限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:39:03.153

> 我只是想到了一个可怕的kludge，即渲染到纹理并在其上生成Mipmaps，然后读取最小的级别。我希望有更好的方法。

那有什么问题？这种方式几乎完全在 GPU 上完成，可以很好地用于现有的渲染管道，并且应该给出合理的结果。我不知道有什么理由反对它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-02T11:47:15.287

我知道这个问题已经有 8 年历史了，但是嘿....

首先，WebGL1，generateMipmap 仅适用于 2 图像的幂。

我建议（1）生成一个像这样的简单着色器

```
function createShader(texWidth, texHeight) {
  return `
  precision mediump float;
  uniform sampler2D tex;

  void main() {
    vec2 size = vec2(${texWidth}, ${texHeight});
    float totalBrightness = 0.0;
    float minBrightness = 1.0;
    float maxBrightness = 0.0;
    for (int y = 0; y < ${texHeight}; ++y) {
      for (int x = 0; x < ${texWidth}; ++x) {
        vec4 color = texture2D(tex, (vec2(x, y) + 0.5) / size);
        vec3 adjusted = color.rgb * vec3(0.2126, 0.7152, 0.0722);
        float brightness = adjusted.r + adjusted.g + adjusted.b;
        totalBrightness += brightness;
        minBrightness = min(brightness, minBrightness);
        maxBrightness = max(brightness, maxBrightness);
      }
    }
    float averageBrightness = totalBrightness / (size.x * size.y);
    gl_FragColor = vec4(averageBrightness, minBrightness, maxBrightness, 0);
  }
  `;
} 
```

```
const startElem = document.querySelector('button');
startElem.addEventListener('click', main, {once: true});

function createShader(texWidth, texHeight) {
  return `
  precision mediump float;
  uniform sampler2D tex;

  void main() {
    vec2 size = vec2(${texWidth}, ${texHeight});
    float totalBrightness = 0.0;
    float minBrightness = 1.0;
    float maxBrightness = 0.0;
    for (int y = 0; y < ${texHeight}; ++y) {
      for (int x = 0; x < ${texWidth}; ++x) {
        vec4 color = texture2D(tex, (vec2(x, y) + 0.5) / size);
        vec3 adjusted = color.rgb * vec3(0.2126, 0.7152, 0.0722);
        float brightness = adjusted.r + adjusted.g + adjusted.b;
        totalBrightness += brightness;
        minBrightness = min(brightness, minBrightness);
        maxBrightness = max(brightness, maxBrightness);
      }
    }
    float averageBrightness = totalBrightness / (size.x * size.y);
    gl_FragColor = vec4(averageBrightness, minBrightness, maxBrightness, 0);
  }
  `;
}

const prgs = {}
function getAverageProgram(gl, width, height) {
  const id = `${width}x${height}`;
  const prg = prgs[id];
  if (prg) {
    return prg;
  }
  const vs = `
  attribute vec4 position;
  void main() {
    gl_Position = position;
  }
  `;
  const fs = createShader(width, height);
  // compile shaders, link program, look up uniforms
  const newPrg = twgl.createProgramInfo(gl, [vs, fs]);
  prgs[id] = newPrg;
  return newPrg;
}

function main() {
  const gl = document.querySelector('canvas').getContext('webgl');

  let updateTexture = false;
  const video = document.createElement('video');
  video.crossOrigin = 'anonymous';
  video.loop = true;
  video.src = 'https://webglsamples.org/color-adjust/sample-video.mp4';
  if (video.requestVideoFrameCallback) {
    function update() {
      draw();
      video.requestVideoFrameCallback(update);
    };
    video.requestVideoFrameCallback(update);
  } else {
    function update() {
      if (video.currentTime > 0) {
        draw();
      }
      requestAnimationFrame(update);
    }
    requestAnimationFrame(update);
  }
  video.volume = 0;
  video.play();

  // create a 1x1 pixel RGBA/UNSIGNED_BYTE framebuffer
  const fbi = twgl.createFramebufferInfo(gl, [
    { internalForamt: gl.RGBA },
  ], 1, 1);

  const tVS = `
  attribute vec4 position;
  attribute vec2 texcoord;
  varying vec2 v_texcoord;
  void main() {
    gl_Position = position;
    v_texcoord = texcoord;
  }
  `;
  const tFS = `
  precision mediump float;
  uniform sampler2D tex;
  varying vec2 v_texcoord;
  void main() {
    gl_FragColor = texture2D(tex, v_texcoord);
  }
  `;
  // compile shaders, link program, look up uniforms
  const textureProgInfo = twgl.createProgramInfo(gl, [tVS, tFS]);

  const avgMinMaxVS = `
  attribute float id;
  varying float v_id;
  uniform sampler2D avgMinMaxTex;
  void main() {
    vec4 avgMinMax = texture2D(avgMinMaxTex, vec2(0.5));
    float v = id < 1.0
       ? avgMinMax.x
       : id < 2.0
          ? avgMinMax.y
          : avgMinMax.z;
    gl_Position = vec4(1\. - (id + 1.0) / 10., v * 2\. - 1., 0, 1);
    gl_PointSize = 10.0;
    v_id = id;
  }
  `;
  const avgMinMaxFS = `
  precision mediump float;
  varying float v_id;
  void main() {
    gl_FragColor = vec4(1., v_id / 2., 1\. - v_id / 2., 1);
  }
  `;
  // compile shaders, link program, look up uniforms
  const avgMinMaxPrgInfo = twgl.createProgramInfo(gl, [avgMinMaxVS, avgMinMaxFS]);

  const planeBufferInfo = twgl.primitives.createXYQuadBufferInfo(gl);
  const idBufferInfo = twgl.createBufferInfoFromArrays(gl, {
    id: {
      data: [0, 1, 2],
      numComponents: 1,
    },
  });

  const videoTex = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, videoTex);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);

  function draw() {
    // copy video to texture
    gl.bindTexture(gl.TEXTURE_2D, videoTex);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);

    // --- [ compute average, min, max to single pixel ] ---

    const averagePrgInfo = getAverageProgram(gl, video.videoWidth, video.videoHeight);
    gl.useProgram(averagePrgInfo.program);

    // calls gl.bindFramebuffer and gl.viewport
    twgl.bindFramebufferInfo(gl, fbi);

    // calls gl.bindBuffer, gl.enableVertexAttribArray, gl.vertexAttribPointer
    twgl.setBuffersAndAttributes(gl, averagePrgInfo, planeBufferInfo);

    // calls gl.drawArrays or gl.drawElements
    twgl.drawBufferInfo(gl, planeBufferInfo);

    // --- [ draw video to texture ] ---

    // calls gl.bindFramebuffer and gl.viewport
    twgl.bindFramebufferInfo(gl, null);

    gl.useProgram(textureProgInfo.program);

    // calls gl.bindBuffer, gl.enableVertexAttribArray, gl.vertexAttribPointer
    twgl.setBuffersAndAttributes(gl, textureProgInfo, planeBufferInfo);

    // calls gl.drawArrays or gl.drawElements
    twgl.drawBufferInfo(gl, planeBufferInfo);

    // -- [ draw 3 points showing avg, min, max] ---

    gl.useProgram(avgMinMaxPrgInfo.program);

    gl.bindTexture(gl.TEXTURE_2D, fbi.attachments[0]);

    // calls gl.bindBuffer, gl.enableVertexAttribArray, gl.vertexAttribPointer
    twgl.setBuffersAndAttributes(gl, avgMinMaxPrgInfo, idBufferInfo);    

    // calls gl.drawArrays or gl.drawElements
    twgl.drawBufferInfo(gl, idBufferInfo, gl.POINTS);
  }
}
```

```
body {
  background: #444;
}
canvas {
  border: 1px solid black;
  display: block;
}
```

```
<canvas></canvas>
<button type="button">start</button>
<span style="color: #FF0">■ max brightness</span>
<span style="color: #F80">■ min brightness, </span>
<span style="color: #F0F">■ average brightness, </span>
<script src="https://twgljs.org/dist/4.x/twgl-full.min.js"></script>
```

这个解决方案的唯一问题是它不能被 GPU AFAIK 并行化，所以（2）我可能会测试做一些类似于生成 mipmap 的事情，我说制作一个 16x16 像素的着色器并将其作为目标以生成更小的纹理和重复直到我达到 1x1。我必须测试一下这是否真的更快，以及 2x2、4x4、16x16 等大小的单元格是最好的。

最后，如果可能的话，就像上面的例子一样，如果我实际上不需要 CPU 上的结果，那么只需将该 1x1 纹理作为输入传递给其他着色器。该示例仅绘制 3 个点，但当然您可以将这些值输入到绘制视频的着色器中以进行一些图像处理，例如在亮度低时提高曝光度尝试根据最小和最大亮度等自动调整图像...

请注意，在 WebGL2 中，您不必像 WebGL2 那样为每个大小生成不同的着色器，或者更确切地说，在 GLSL ES 3.0 中，您可以拥有不基于常量值的循环。

```
const startElem = document.querySelector('button');
startElem.addEventListener('click', main, {once: true});

function main() {
  const gl = document.querySelector('canvas').getContext('webgl2');
  if (!gl) {
    return alert('need WebGL2')
  }

  let updateTexture = false;
  const video = document.createElement('video');
  video.crossOrigin = 'anonymous';
  video.loop = true;
  video.src = 'https://webglsamples.org/color-adjust/sample-video.mp4';
  if (video.requestVideoFrameCallback) {
    function update() {
      draw();
      video.requestVideoFrameCallback(update);
    };
    video.requestVideoFrameCallback(update);
  } else {
    function update() {
      if (video.currentTime > 0) {
        draw();
      }
      requestAnimationFrame(update);
    }
    requestAnimationFrame(update);
  }
  video.volume = 0;
  video.play();

  // create a 1x1 pixel RGBA/UNSIGNED_BYTE framebuffer
  const fbi = twgl.createFramebufferInfo(gl, [
    { internalForamt: gl.RGBA },
  ], 1, 1);

  const avgVS = `#version 300 es
  in vec4 position;
  void main() {
    gl_Position = position;
  }
  `;

  const avgFS = `#version 300 es
  precision highp float;
  uniform sampler2D tex;
  out vec4 result;
  void main() {
    ivec2 size = textureSize(tex, 0);
    float totalBrightness = 0.0;
    float minBrightness = 1.0;
    float maxBrightness = 0.0;
    for (int y = 0; y < size.y; ++y) {
      for (int x = 0; x < size.x; ++x) {
        vec4 color = texelFetch(tex, ivec2(x, y), 0);
        vec3 adjusted = color.rgb * vec3(0.2126, 0.7152, 0.0722);
        float brightness = adjusted.r + adjusted.g + adjusted.b;
        totalBrightness += brightness;
        minBrightness = min(brightness, minBrightness);
        maxBrightness = max(brightness, maxBrightness);
      }
    }
    float averageBrightness = totalBrightness / float(size.x * size.y);
    result = vec4(averageBrightness, minBrightness, maxBrightness, 0);
  }
  `;  

  // compile shaders, link program, look up uniforms
  const averagePrgInfo = twgl.createProgramInfo(gl, [avgVS, avgFS]);

  const tVS = `#version 300 es
  in vec4 position;
  in vec2 texcoord;
  out vec2 v_texcoord;
  void main() {
    gl_Position = position;
    v_texcoord = texcoord;
  }
  `;
  const tFS = `#version 300 es
  precision mediump float;
  uniform sampler2D tex;
  in vec2 v_texcoord;
  out vec4 fragColor;
  void main() {
    fragColor = texture(tex, v_texcoord);
  }
  `;
  // compile shaders, link program, look up uniforms
  const textureProgInfo = twgl.createProgramInfo(gl, [tVS, tFS]);

  const avgMinMaxVS = `#version 300 es
  out float v_id;
  uniform sampler2D avgMinMaxTex;
  void main() {
    vec4 avgMinMax = texelFetch(avgMinMaxTex, ivec2(0), 0);
    float v = gl_VertexID == 0
       ? avgMinMax.x
       : gl_VertexID == 1
          ? avgMinMax.y
          : avgMinMax.z;
    gl_Position = vec4(1\. - (float(gl_VertexID) + 1.0) / 10., v * 2\. - 1., 0, 1);
    gl_PointSize = 10.0;
    v_id = float(gl_VertexID);
  }
  `;
  const avgMinMaxFS = `#version 300 es
  precision mediump float;
  in float v_id;
  out vec4 fragColor;
  void main() {
    fragColor = vec4(1., v_id / 2., 1\. - v_id / 2., 1);
  }
  `;
  // compile shaders, link program, look up uniforms
  const avgMinMaxPrgInfo = twgl.createProgramInfo(gl, [avgMinMaxVS, avgMinMaxFS]);

  // creates buffers with positions and texcoords for a -1 to +1 quad
  const planeBufferInfo = twgl.primitives.createXYQuadBufferInfo(gl);

  const videoTex = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, videoTex);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);

  function draw() {
    // copy video to texture
    gl.bindTexture(gl.TEXTURE_2D, videoTex);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);

    // --- [ compute average, min, max to single pixel ] ---

    gl.useProgram(averagePrgInfo.program);

    // calls gl.bindFramebuffer and gl.viewport
    twgl.bindFramebufferInfo(gl, fbi);

    // calls gl.bindBuffer, gl.enableVertexAttribArray, gl.vertexAttribPointer
    twgl.setBuffersAndAttributes(gl, averagePrgInfo, planeBufferInfo);

    // calls gl.drawArrays or gl.drawElements
    twgl.drawBufferInfo(gl, planeBufferInfo);

    // --- [ draw video to texture ] ---

    // calls gl.bindFramebuffer and gl.viewport
    twgl.bindFramebufferInfo(gl, null);

    gl.useProgram(textureProgInfo.program);

    // calls gl.bindBuffer, gl.enableVertexAttribArray, gl.vertexAttribPointer
    twgl.setBuffersAndAttributes(gl, textureProgInfo, planeBufferInfo);

    // calls gl.drawArrays or gl.drawElements
    twgl.drawBufferInfo(gl, planeBufferInfo);

    // -- [ draw 3 points showing avg, min, max] ---

    gl.useProgram(avgMinMaxPrgInfo.program);

    gl.bindTexture(gl.TEXTURE_2D, fbi.attachments[0]);

    // draw 3 points
    gl.drawArrays(gl.POINTS, 0, 3);
  }
}
```

```
body {
  background: #444;
}
canvas {
  border: 1px solid black;
  display: block;
}
```

```
<canvas></canvas>
<button type="button">start</button>
<span style="color: #FF0">■ max brightness</span>
<span style="color: #F80">■ min brightness, </span>
<span style="color: #F0F">■ average brightness, </span>
<script src="https://twgljs.org/dist/4.x/twgl-full.min.js"></script>
```

# linux - 如何使用 sha1sum 复制 PCR 值的扩展？

> ID：10163436
> 
> 赞同：5
> 
> 时间：2012-04-15T15:37:02.353
> 
> 标签：linux, sha1, trusted, tpm, trusted-computing

这与以下帖子有些相关： [对 sha1sum 的两个哈希输出执行 OR](https://stackoverflow.com/questions/1706999/perform-or-on-two-hash-outputs-of-sha1sum)

我有一组 TPM 测量样本，例如：

```
10 1ca03ef9cca98b0a04e5b01dabe1ff825ff0280a ima 0ea26e75253dc2fda7e4210980537d035e2fb9f8         boot_aggregate
10 7f36b991f8ae94141753bcb2cf78936476d82f1d ima d0eee5a3d35f0a6912b5c6e51d00a360e859a668 /init
10 8bc0209c604fd4d3b54b6089eac786a4e0cb1fbf ima cc57839b8e5c4c58612daaf6fff48abd4bac1bd7 /init
10 d30b96ced261df085c800968fe34abe5fa0e3f4d ima 1712b5017baec2d24c8165dfc1b98168cdf6aa25 ld-linux-x86-64.so.2 
```

根据 TPM 规范，在上面的帖子中也提到，PCR 扩展操作是：PCR := SHA1(PCR || data)，即“将 PCR 的旧值与数据连接，对连接的字符串进行哈希处理并存储PCR 中的哈希”。此外，我发现的规范多篇论文和演示文稿提到数据是要加载的软件的哈希值。

但是，当我执行类似的操作时`echo H(PCR)||H(data) | sha1sum`，我没有获得正确的结果值。即，当计算（使用上面的哈希）：`echo 1ca03ef9cca98b0a04e5b01dabe1ff825ff0280a0ea26e75253dc2fda7e4210980537d035e2fb9f8 | sha1sum`时，结果值是 NOT `7f36b991f8ae94141753bcb2cf78936476d82f1d`。

我对 TPM_Extend 操作的理解是否正确？如果是这样，为什么生成的散列与样本测量文件中的散列不同？

谢谢！/n

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T18:52:55.513

回答您的第一个问题：您对扩展操作的理解或多或少是正确的。但是你有两个问题：

1.  您误解了您在此处复制的内容
2.  你不能像在 shell 上那样计算哈希值

您在此处提供的日志输出来自 Linux 的 IMA。根据 [文档](http://sourceforge.net/apps/mediawiki/linux-ima/index.php?title=Main_Page#IMA_Measurements)，第一个哈希被`template-hash`定义为

```
template-hash: SHA1(filedata-hash | filename-hint) 
filedata-hash: SHA1(filedata) 
```

所以对于第一行：`SHA1(0ea26e75253dc2fda7e4210980537d035e2fb9f8 | "boot_aggregate")` 结果是`1ca03ef9cca98b0a04e5b01dabe1ff825ff0280a`.

请注意，**文件名提示的长度为 256 字节**- 最后用 0 填充。（*竖起大拇指从内核源代码中挖掘出来；）*）

所以要说清楚：**在您的日志中没有 PCR 值。**

我用 Ruby 写了一些东西来验证我的发现：

```
require 'digest/sha1'
filedata_hash = ["0ea26e75253dc2fda7e4210980537d035e2fb9f8"].pack('H*')
filename_hint = "boot_aggregate".ljust(256, "\x00")
puts Digest::SHA1.hexdigest(filedata_hash + filename_hint) 
```

* * *

现在到你的命令：

您在这里使用它的方式是将哈希解释为 ASCII 字符串。另请注意， echo 将在输出中添加一个额外的换行符。字符序列`1ca03ef9cca98b0a04e5b01dabe1ff825ff0280a`是 160 位二进制数据的十六进制编码 - 一个 SHA1 哈希值。所以基本上你是对的，你必须连接两个值并计算得到的 320 位数据的 SHA1。

所以命令行的正确命令类似于

```
printf "\x1c\xa0\x3e\xf9\xcc\xa9\x8b\x0a\x04\xe5\xb0\x1d\xab\xe1\xff\x82\x5f\xf0\x28\x0a\x0e\xa2\x6e\x75\x25\x3d\xc2\xfd\xa7\xe4\x21\x09\x80\x53\x7d\x03\x5e\x2f\xb9\xf8" | sha1sum 
```

printf 字符串中的`\xXX`将十六进制代码`XX`转换为一个字节的二进制输出。

这将导致 的输出`d14f958b2804cc930f2f5226494bd60ee5174cfa`，这很好。

# grails - 具有多个字段的 Grails sortableColumn

> ID：10163438
> 
> 赞同：1
> 
> 时间：2012-04-15T15:37:51.000
> 
> 标签：grails

假设我有两个域对象，文档和作者

```
Class Document {
    Author author
    String title
}

Class Author {

    String lastName
    String firstName

    String toString() {

        return lastName + ", " + firstName
    }
} 
```

视图 list.gsp 看起来像这样：

```
<g:sortableColumn property="title" title=... />
<g:sortableCOlumn property="author" title=... />

....

<td>${fieldValue(bean: documentInstance, field: "author"}></td>
<td>${fieldValue(bean: documentInstance, field: "title"}></td> 
```

表中显示的值按预期工作 - 表行将在 documentInstance.title 旁边显示作者为 (l​​astName, firstName)。

但是，单击 Author 列标题进行排序会导致“文档”按 author.id 排序。

按 author.toString() 或“author.lastName, author.firstName”而不是按 author.id 排序的最方便的方法是什么？

如果可能的话，我宁愿避免回退到 .withCriteria{} - 我有四个不同的列需要此功能，而且看起来会变得混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:57:59.717

您可以使用[派生属性](http://grails.org/doc/latest/guide/GORM.html#derivedProperties)创建一个虚拟列进行排序：

```
Class Author {

    String lastName
    String firstName
    String sortingName

    static mapping {
        // modify the SQL formula to use your DB's concatenation operator
        sortingName formula: "`LAST_NAME` || ',' || `FIRST_NAME`)" // Standard SQL
    }

    String toString() { sortingName }
} 
```

然后将您的列设置为`sortingName`：

```
<g:sortableColumn property="author.sortingName" title=... /> 
```

（我在这里有点猜测，但我认为这应该可行。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:14:24.223

我只是一个 Grails 初学者，所以也许我的答案不是最佳的，但这对我来说是最简单的方法：

而不是使用`Document.list(params)`我使用的`Document.findAll()`. 值得一提的是，在我的应用程序中，我的列表中确实需要某种过滤器，所以这`findAll()`是最好的方法。无论如何，我会这样做：

```
Document.findAll( "from Document as d order by d." + params.sort + ' ' + params.order, params ) //supports pagination 
```

在视图中：

```
<g:sortableCOlumn property="author.lastName" title=... /> 
```

# c# - 是否有适用于 Windows 窗体的 ASP.NET ListView 控件？

> ID：10163439
> 
> 赞同：0
> 
> 时间：2012-04-15T15:37:52.393
> 
> 标签：c#, asp.net, winforms, visual-studio-2010

我正在尝试构建从 SQL 数据库读取信息的 Windows 窗体应用程序，并且我想将其显示在像 ASP.NET ListView 这样的控件中。

这是我第一次编写 Windows 窗体应用程序，但我习惯于在 ASP.NET 中编程并使用以下工具：listview、gridview 等。我看到 Windows 窗体中有一个 GridView 控件并且可以将其连接到 SQL DB。

是否有与 ASP.NET ListView for Windows Forms 或其他控件相同的工具来显示我的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:22:08.590

Windows 窗体的工具箱还包含[ListView](http://msdn.microsoft.com/en-us/library/6dwb14tw.aspx)控件。阅读[ListView 控件](http://visualcsharptutorials.com/windows-forms/listview-control)和[在 C# 中使用 ListView](http://www.c-sharpcorner.com/uploadfile/mahesh/working-with-listview-in-C-Sharp/)以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:42:12.570

我认为您正在寻找[DataGridView](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)。

它有相当多的功能。在 SO 中查看有关它的[许多问题](https://stackoverflow.com/search?tab=relevance&q=datagridview)。

这是一篇包含[101 种操作方法](http://www.devx.com/dotnet/Article/33748)的文章。

# javascript - 添加更多 Javascript = 停止工作

> ID：10163441
> 
> 赞同：0
> 
> 时间：2012-04-15T15:38:03.813
> 
> 标签：javascript, jquery

```
jQuery(function($) {
    function fixDiv() {
      var $cache = $('header'); 
      if ($(window).scrollTop() > 10) 
        $cache.css({'position': 'fixed', 'top': '0', 'background': 'rgba(0,0,0,0.8)', 'padding': '0'}); 

        //$('#top-menu a').css({'padding': '17px 20px'});
      else
        $cache.css({'position': 'absolute', 'top': '0', 'background': 'rgba(0,0,0,0)', 'padding': '20px 0'});
        //$('#top-menu a').css({'padding': '30px 20px'});
    }
    $(window).scroll(fixDiv);
    fixDiv();
}); 
```

这是我目前拥有的，我看到 var $cache = header 所以我想添加另一行，所以当它改变背景时，它也会改变标题的字体大小..所以我现在有了

```
jQuery(function($) {
    function fixDiv() {
      var $cache = $('header'); 
      if ($(window).scrollTop() > 10) 
        $cache.css({'position': 'fixed', 'top': '0', 'background': 'rgba(0,0,0,0.8)', 'padding': '0'}); 
       $('h1').css({'font-size': '26px'});
      else
        $cache.css({'position': 'absolute', 'top': '0', 'background': 'rgba(0,0,0,0)', 'padding': '20px 0'});
        $('h1').css({'font-size': '36px'});
    }
    $(window).scroll(fixDiv);
    fixDiv();
}); 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T15:40:16.107

多个语句需要大括号：

```
 if ($(window).scrollTop() > 10) 
  {
    $cache.css({'position': 'fixed', 'top': '0', 'background': 'rgba(0,0,0,0.8)', 'padding': '0'}); 
    $('h1').css({'font-size': '26px'});
  }
  else
  {
    $cache.css({'position': 'absolute', 'top': '0', 'background': 'rgba(0,0,0,0)', 'padding': '20px 0'});
    $('h1').css({'font-size': '36px'});
  } 
```

正确缩进代码可以更清楚地说明它为什么不起作用：

```
 if ($(window).scrollTop() > 10) 
     $cache.css({'position': 'fixed', 'top': '0', 'background': 'rgba(0,0,0,0.8)', 'padding': '0'}); 
  $('h1').css({'font-size': '26px'});
  else
     $cache.css({'position': 'absolute', 'top': '0', 'background': 'rgba(0,0,0,0)', 'padding': '20px 0'});
  $('h1').css({'font-size': '36px'}); 
```

（不仅错误而且无效 -`else`是孤立的）。

# asp.net-mvc - 为什么 DropDownListFor 无法识别我的编辑器模板中的选定值？

> ID：10163443
> 
> 赞同：4
> 
> 时间：2012-04-15T15:38:35.327
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvc-editor-templates

我有以下名为“DropDown.cshtml”的编辑器模板。该`list`部分工作正常，模板使用了一些我`SelectList`从`ViewData`. 控制器将视图模型中的所有选择列表放入 中`ViewData`，列表方面没有任何问题。

```
@{
    var list = this.GetModelSelectList();
}
@Html.DropDownListFor(m => Model, list) 
```

我在像这样的外键视图模型属性上使用这个模板：

```
[Required]
[UIHint("DropDown", "MVC", "SelectListName", "JobLevelSelectList")]
[Display(Name = "Job Level")]
public Guid? JobLevelId { get; set; }

public SelectList JobLevelSelectList { get; set; } 
```

在控制器中，在执行视图之前立即具有正确的值，但在呈现的元素`JobLevelId`中没有选择项目。`select`或者更确切地说，选择列表中的第一项始终被选中。

为什么`DropDownListFor`在我的编辑器模板中使用时会忽略属性值，而直接调用时却可以正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:50:03.030

不幸的是，这是MVC3 中[的一个已知错误](http://connect.microsoft.com/VisualStudio/feedback/details/654543/asp-net-mvc-possible-mvc-bug-when-working-with-editortemplates-and-drop-down-lists#details)（我还没有在 MVC 4 Beta 中尝试过它是否已修复）。

我使用的解决方法是在 DropDownListFor 绑定的集合中相应地手动设置[Selected](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlistitem.selected.aspx)属性，这并不理想，但它有效。

# java - Java 参考资料。Java 是否对字符串文字进行特殊检查？

> ID：10163444
> 
> 赞同：3
> 
> 时间：2012-04-15T15:38:38.397
> 
> 标签：java, reference

```
public class Test {
    int multiple;
    public static void main(String[] args){

        String string1 = "string";
        String string2 = "string";
        String string4 = "Changed";

        String string3 = new String("string");

        System.out.println("string1 == string2: " + (string1 == string2));\\true
        System.out.println("string1 == string4: " + (string1 == string4));\\false
        System.out.println("string1 == string3: " + (string1 == string3));\\false

    }

} 
```

我知道如果引用相同，`==`操作员将返回。`true`我想知道的是，Java 是否在创建对象之前检查字符串文字的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T15:40:20.203

[您将看到Java 字符串实习](http://en.wikipedia.org/wiki/String_interning)的副作用之一。从[JLS §3.10.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)：

> ...字符串文字总是指代的*同一个*实例 class `String`。这是因为字符串文字 - 或者更一般地说，作为常量表达式的值的字符串（[第 15.28 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)） - 是“内部的”，以便使用 方法共享唯一实例`String.intern`。

[更多关于 SO 的阅读](https://stackoverflow.com/search?q=java%20string%20intern)，尤其是：

*   [如果 == 比较 Java 中的引用，为什么用这些字符串评估为 true？](https://stackoverflow.com/questions/4033625/if-compares-references-in-java-why-does-it-evaluate-to-true-with-these-strin)
*   [Java字符串实习生和文字](https://stackoverflow.com/questions/5777131/java-string-intern-and-literal)
*   [什么时候在 Java 中使用轻量级字符串？](https://stackoverflow.com/questions/3972841/when-is-it-beneficial-to-flyweight-strings-in-java)
*   [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T15:40:27.640

执行字符串实习的是编译器。因此在编译时优化了相同的字符串。所以我认为你想要的答案是“不”。虚拟机不这样做，它是编译器。您可以调用[`String.intern()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)获取字符串池中的共享字符串对象：

```
String str1 = "string";
String str2 = new String("string");
String str3 = str2.intern();

str1 == str2 // false
str2 == str3 // false
str1 == str3 // true 
```

字符串，在运行时构建不会自动实习。

# android - 遮罩颜色 android

> ID：10163445
> 
> 赞同：0
> 
> 时间：2012-04-15T15:38:46.677
> 
> 标签：android, colors, transparent

我想在android中使图像透明，所以我做了一些研究，但得出的结论是我并没有真正理解它。所以我在画布上画了几个位图，在一种位图中我想让红色透明。我找到了一段代码，但我并没有真正做任何事情。这是我的代码：

```
if(PictureArray[a]==0){
                Paint Remove = new Paint();
                Remove.setARGB(255, 255, 0, 0);
                int removeColor=Remove.getColor();
                Remove.setAlpha(0);
                Remove.setXfermode(new AvoidXfermode(removeColor,0,AvoidXfermode.Mode.TARGET));
                c.drawBitmap(Stone, x, c.getHeight()/2, null);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:53:11.410

使用透明的 PNG。无需过度设计它；）

# video - 带宽检测和为移动设备提供多个视频的策略

> ID：10163448
> 
> 赞同：1
> 
> 时间：2012-04-15T15:39:10.953
> 
> 标签：video, mobile, bandwidth

任何人都可以分享他们在针对移动设备时确定带宽和提供多个视频的推荐策略吗？

或者，与其尝试确定带宽（我认为几乎不可能始终如一地准确地做到这一点），不如做出假设？即如果检测到 iPad，只需假设较低的带宽。

如果为 iPad 创建一个较小的 .mp4，那么为 iPhone 用户使用相同的 .mp4 是否有意义，或者更小的视频文件效果最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:41:35.500

我认为它应该是几件事的组合，当然取决于您对不同组件的技术访问。我的意思是，例如，如果您自己编写视频服务器，您可以很容易地知道您与某人的连接速度很慢，并以较低质量提供下一个视频，或者在 500KB 之后停止提供视频并以较低质量重新启动。（或任何其他逻辑）但是如果您不编写服务器本身，那么您就不能这样做，并且依赖于您使用的服务器为您提供的选项。

那么你可以假设 iPhone 3G/3GS 的最大分辨率为 320x480 或 480x320，4 和 4S 的最大分辨率是 3GS 的两倍。您可以假设 iPad 具有一定的分辨率，而 iPad 3 具有另一个最大分辨率。您可以决定将 iPad 视为连接速度较慢的设备，但对于蜂窝连接便宜且速度非常快的我的国家而言，情况并非如此。所以你可以让它依赖于地理位置。当然，您无法从 IP 中可靠地推断出位置，但您可以获得“足够”的东西。

然后可以选择只询问用户。这可能是最简单、最准确的（除了服务器方法）。这也是相当标准的，并在许多网站视频中完成。在第一次选择他的连接类型或视频质量/分辨率后，您可以保存该配置，并且不再让用户对此感到烦恼......

**我的观点是——你可以**考虑很多事情。但是您是在要求人们为您做出决定……我认为这是不对的；-) 如果您无法提出自己感到满意的假设-请让用户自己决定。如果您只有 80-90% 的把握，那么请使用您的假设来选择默认值，然后让用户再次选择。

# php - 使用 AJAX PHP 和 MySQL 的查询顺序

> ID：10163455
> 
> 赞同：0
> 
> 时间：2012-04-15T15:39:49.133
> 
> 标签：php, javascript, mysql, ajax

有点令人困惑的情况，我的网页上有一个表格，允许用户将信息输入数据库......

***形式***

```
<form id="insertbill">
     Total <input type="text" id="total" name="total" /><br />
     Bill name<input type="text" id="bill-name" name="bill-name" /><br />
     bill descriptiion <input type="text" id="bill-description" name="bill-description" /><br />
     bill colour<input type="text" id="bill-colour" name="bill-colour" />
     <input type="button" value="submit" onClick="insertBill();" />
</form> 
```

然后此表单通过 AJAX 将信息发送到我的 php，然后将其输入到我的数据库中

***AJAX***

```
function insertBill()
{
    $.post('insert_bill.php', $('#insertbill').serialize(), 
        function(data) {
        $('#bills').append(data);
    });
}; 
```

***PHP***

```
 $uid = $_SESSION['oauth_id'];       
   $bill = mysql_real_escape_string($_POST['total']);
   $billname = mysql_real_escape_string($_POST['bill-name']);
   $billdescription = mysql_real_escape_string($_POST['bill-description']);
   $billcolour  = mysql_real_escape_string($_POST['bill-colour']);

    #Insert Record
    $query = mysql_query("INSERT INTO `outgoings` (user_id, bill, bill_name, bill_description, bill_colour ) VALUES ('$uid', '$bill', '$billname', '$billdescription', '$billcolour')") or die(mysql_error()); 
```

完成此操作后，数据将返回到网页，并以另一种形式允许用户更新记录...

***返回的数据/表格***

```
Print "<tr>"; 
Print "<th>total:</th> <td>".$bill . "</td> ";
Print "<th>bill name:</th> <td>".$$billname . "</td> ";
Print "<th>bill deposit:</th> <td>".$billdescription . "</td> "; 
Print "<th>colour:</th> <td>". $billcolour . " </td></tr>"; 
echo "<th>edit:</th> <td>

<form id='bill-upd'>
        <input type='hidden' value='". $billname."' name='billid' id='billid''>
        Total <input type='text' id='total' name='total' /><br />
        Bill name<input type='text' id='bill-name' name='bill-name' /><br />
        bill descriptiion <input type='text' id='bill-description' name='bill-description' /><br />
        bill colour<input type='text' id='bill-colour' name='bill-colour' />
        <input type='button' value='submit' onClick='updateBill();' />
    </form>   
</td>"; 
```

我的问题是返回的表单没有更新，这是因为我需要以某种方式找到插入的记录的 id，将其放入要返回的表单中我想......我希望这不会太混乱，但是有没有人在不重新加载页面的情况下更好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:25:02.730

这是您可以在您的 insert_bill.php 查看页面中包含的内容：

```
<script> 
   var json=<? 
       $arr=array($bill, $billname, $billdescription, $billcolour);
       echo json_encode($arr); ?>;

     $('tr td:nth-child(0)').html(json[0]);
     $('tr td:nth-child(1)').html(json[1]);
     $('tr td:nth-child(2)').html(json[2]);
     $('tr td:nth-child(3)').html(json[3]);

</script> 
```

我想一个突出的问题是您所说的从数据库返回的“id”。你能再解释一下吗？它们在您的 insert_bill.php 页面上有多种形式吗？无论如何，您可以将它`$id`放入数组中并将其输入并`html()`像我对其他变量所做的那样运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:30:45.870

您需要从数据库中返回数据然后更改，我想如果您只需要您必须做的 id。

在 PHP 中回显 mysql_last_insert_id(); //所以你得到最后插入的id并“返回”给JS在JS中，在函数数据里面你得到echo作为返回并改变id然后$("#billid").val(data)

希望对你有帮助

# objective-c - 锁定等待@synchronized

> ID：10163456
> 
> 赞同：3
> 
> 时间：2012-04-15T15:39:51.527
> 
> 标签：objective-c, ios, sqlite

我有这个（罕见的）奇怪的情况，我的 Objective-c iOS 程序被锁定。当我闯入调试器时，有两个线程，它们都卡在@synchronized() 处。

除非我完全误解了@synchronized，否则我认为这是不可能的，也是命令的全部意义所在。

我有一个主线程和工作线程，它们都需要访问 sqlite 数据库，所以我将访问数据库的代码块包装在 @synchronized(myDatabase) 块中。除了 db 访问之外，这些块中没有发生太多其他事情。

我也在使用 FMDatabase 框架来访问 sqlite，我不知道这是否重要。

myDatabase 是一个包含 FMDatabase 对象的全局变量。它在程序开始时创建一次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-17T14:43:33.497

我知道我迟到了，但我发现了一种奇怪的情况组合，`@synchronized`处理不好，可能是你的问题的原因。除了更改代码以消除原因之外，我没有解决方案，一旦您知道它是什么。

我将在下面使用此代码进行演示。

```
- (int)getNumberEight {
    @synchronized(_lockObject) {
        // Point A
        return 8;
    }
}

- (void)printEight {
    @synchronized(_lockObject) {
        // Point B
        NSLog(@"%d", [self getNumberEight]);
    }
}

- (void)printSomethingElse {
    @synchronized(_lockObject) {
        // Point C
        NSLog(@"Something Else.");
    }
} 
```

通常，`@synchronized`是递归安全锁。因此，调用`[self printEight]`是可以的，不会导致死锁。我发现的是该规则的一个例外。以下一系列事件将导致死锁并且极难追踪。

1.  线程 1 进入`-printEight`并获取锁。
2.  线程 2 进入`-printSomethingElse`并尝试获取锁。锁由线程 1 持有，因此它被排队等待直到锁可用并阻塞。
3.  线程 1 进入`-getNumberEight`并尝试获取锁。锁已经被持有，并且其他人在队列中以获取它，因此线程 1 阻塞。僵局。

看来，此功能是在使用`@synchronized`. 只有当没有其他线程在等待它时，锁才是递归安全的。

下次您在代码中遇到死锁时，请检查每个线程上的调用堆栈，以查看是否有任何一个死锁线程已经持有锁。在上面的示例代码中，通过在 A、B 和 C 点添加长时间休眠，可以以几乎 100% 的一致性重新创建死锁。

编辑：

我不再能够演示上一个问题，但是有一个相关的情况仍然会导致问题。它与 的动态行为有关`dispatch_sync`。

在这段代码中，有两次尝试以递归方式获取锁。第一次调用从主队列进入后台队列。第二个调用从后台队列进入主队列。

导致行为差异的原因是调度队列和线程之间的区别。第一个示例调用不同的队列，但从不更改线程，因此获取了递归互斥锁。第二个在更改队列时更改线程，因此无法获取递归互斥锁。

需要强调的是，**此功能是设计使然**，但对于一些不太了解 GCD 的人来说，它的行为可能是出乎意料的。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
NSObject *lock = [[NSObject alloc] init];
NSTimeInterval delay = 5;

NSLog(@"Example 1:");
dispatch_async(queue, ^{
    NSLog(@"Starting %d seconds of runloop for example 1.", (int)delay);
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:delay]];
    NSLog(@"Finished executing runloop for example 1.");
});
NSLog(@"Acquiring initial Lock.");
@synchronized(lock) {
    NSLog(@"Acquiring recursive Lock.");
    dispatch_sync(queue, ^{
        NSLog(@"Deadlock?");
        @synchronized(lock) {
            NSLog(@"No Deadlock!");
        }
    });
}

NSLog(@"\n\nSleeping to clean up.\n\n");
sleep(delay);

NSLog(@"Example 2:");
dispatch_async(queue, ^{
    NSLog(@"Acquiring initial Lock.");
    @synchronized(lock) {
        NSLog(@"Acquiring recursive Lock.");
        dispatch_sync(dispatch_get_main_queue(), ^{
            NSLog(@"Deadlock?");
            @synchronized(lock) {
                NSLog(@"Deadlock!");
            }
        });
    }
});

NSLog(@"Starting %d seconds of runloop for example 2.", (int)delay);
[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:delay]];
NSLog(@"Finished executing runloop for example 2."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T17:32:01.323

我最近偶然发现了这个，假设它`@synchronized(_dataLock)`做了它应该做的事情，因为它毕竟是一个基本的事情。

我继续调查该`_dataLock`对象，在我的设计中，我有几个`Database`对象将独立进行锁定，所以我只是`_dataLock = [[NSNumber numberWithInt:1] retain]`为每个`Database`.
但是`[NSNumber numberWithInt:1]`返回相同的对象，就像在相同的指针中！！！

这意味着我认为只有一个实例的本地化锁`Database`不是所有实例的全局锁`Database`。
当然，这从来都不是预期的设计，我相信这是问题的根源。

我会改变

```
_dataLock = [[NSNumber numberWithInt:1] retain] 
```

和

```
_dataLock = [[NSUUID UUID] UUIDString] retain] 
```

# c# - 在 Asp.net MVC 中传递参数

> ID：10163457
> 
> 赞同：0
> 
> 时间：2012-04-15T15:40:10.583
> 
> 标签：c#, .net, asp.net-mvc

在 mvc 中，您可以像这样传递参数

```
 new { A = B, C= "D", E ="F", ... } 
```

我想将这样的参数传递给我自己的程序，寻找指向任何示例/教程的链接

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:44:12.543

这是对象初始化查看[此](http://msdn.microsoft.com/en-us/library/bb397680.aspx)MSDN 文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:45:23.260

您应该研究 C# 中的匿名类型和反射。

简而言之：

1.  您的方法将接受一个对象
2.  您使用反射来查看传递对象的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:53:12.070

如果您没有使用 ASP.NET MVC，那么您需要在您的方法中使用反射，如上面的答案中所述，但是如果您正在编写 ASP.NET MVC 扩展方法，则可以使用调用`AnonymousObjectToHtmlAttributes`的 HtmlHelper 方法，该方法`RouteValueDictionary`从匿名对象或使用采用匿名对象初始化其值的 RouteValueDictionary 构造函数。

# iphone - AVFoundation - 从 Y 平面获取灰度图像 ( kCVPixelFormatType_420YpCbCr8BiPlanarFullRange)

> ID：10163462
> 
> 赞同：4
> 
> 时间：2012-04-15T15:40:26.607
> 
> 标签：iphone, core-graphics, avfoundation, grayscale

我正在使用 AVFoundation 拍摄视频并以`kCVPixelFormatType_420YpCbCr8BiPlanarFullRange`格式录制。我想直接从 YpCbCr 格式的 Y 平面制作灰度图像。

我尝试`CGContextRef`通过调用来创建`CGBitmapContextCreate`，但问题是，我不知道要选择什么色彩空间和像素格式。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
       fromConnection:(AVCaptureConnection *)connection 
{       
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
    CVPixelBufferLockBaseAddress(imageBuffer,0);        

    /* Get informations about the Y plane */
    uint8_t *YPlaneAddress = CVPixelBufferGetBaseAddressOfPlane(imageBuffer, 0);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRowOfPlane(imageBuffer, 0);
    size_t width = CVPixelBufferGetWidthOfPlane(imageBuffer, 0);
    size_t height = CVPixelBufferGetHeightOfPlane(imageBuffer, 0);

    /* the problematic part of code */
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();

    CGContextRef newContext = CGBitmapContextCreate(YPlaneAddress,
    width, height, 8, bytesPerRow, colorSpace, kCVPixelFormatType_1Monochrome);

    CGImageRef newImage = CGBitmapContextCreateImage(newContext); 
    UIImage *grayscaleImage = [[UIImage alloc] initWithCGImage:newImage];

    // process the grayscale image ... 
} 
```

当我运行上面的代码时，我得到了这个错误：

```
<Error>: CGBitmapContextCreateImage: invalid context 0x0
<Error>: CGBitmapContextCreate: unsupported parameter combination: 8 integer bits/component; 16 bits/pixel; 1-component color space; kCGImageAlphaPremultipliedLast; 192 bytes/row. 
```

PS：对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:54:22.067

如果我没记错的话，你不应该通过`CGContext`. 相反，您应该创建一个数据提供者，然后直接创建图像。

您的代码中的另一个错误是使用了`kCVPixelFormatType_1Monochrome`常量。它是视频处理（AV 库）中使用的常量，而不是核心图形（CG 库）中使用的常量。只需使用`kCGImageAlphaNone`. 每个像素需要一个分量（灰色）（而不是 RGB 的三个）是从颜色空间中得出的。

它可能看起来像这样：

```
CGDataProviderRef  dataProvider = CGDataProviderCreateWithData(NULL, YPlaneAdress,
      height * bytesPerRow, NULL);
CGImageRef newImage = CGImageCreate(width, height, 8, 8, bytesPerRow,
      colorSpace, kCGImageAlphaNone, dataProvider, NULL, NO, kCGRenderingIntentDefault);
CGDataProviderRelease(dataProvider); 
```

# javascript - 构建 node.js 聊天

> ID：10163464
> 
> 赞同：0
> 
> 时间：2012-04-15T15:40:30.333
> 
> 标签：javascript, node.js, socket.io, chat

我目前正在为后端构建一个使用 node.js 的网络聊天。它使用 Web 套接字进行服务器和客户端之间的通信。我以前没有使用过节点，我总是使用 PHP/MySQL 和 Ajax 来存储和检索数据。聊天可以与用户帐户和联系人列表的 MSN 等进行比较。我一直在寻找一些技巧和框架，它们可以帮助我开发一个严重依赖 JavaScript 并通过 node.js 进行所有通信的网站。

*   你会推荐什么来存储数据？Mongo db（mongoose？mongo-db native？），SQLite？一个简单的解决方案将不胜感激。
*   你会通过 websocket 发送所有东西，你会为每个对话建立一个新的连接吗？
*   有没有办法完全绕过 PHP？
*   你会推荐使用 Backbone.js 或 Ember.js 吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:32:45.413

> 你会推荐什么来存储数据？Mongo db（mongoose？mongo-db native？），SQLite？一个简单的解决方案将不胜感激。

我建议您使用[redis](http://redis.io)，因为它[非常快](http://redis.io/topics/benchmarks)。

```
> Example of benchmark result The test was done with 50 simultaneous
> clients performing 100000 requests. The value SET and GET is a 256
> bytes string. The Linux box is running Linux 2.6, it's Xeon X3320 2.5
> GHz. Text executed using the loopback interface (127.0.0.1). Results:
> about 110000 SETs per second, about 81000 GETs per second. 
```

作为客户端，我会使用[node_redis](https://github.com/mranney/node_redis)

> 你会通过 websocket 发送所有东西，你会为每个对话建立一个新的连接吗？

websockets 还没有被每个浏览器支持（特别是指向 Internet Explorer ;)）。我认为您应该使用支持[多种传输的](http://socket.io/#browser-support)[socket.io](http://socket.io) ，以便它可以在每个主要浏览器中运行。

> 有没有办法完全绕过 PHP？

你可以完全绕过 PHP。例如，使用[express](http://expressjs.com/)作为您的 Web 框架，而不是 PHP

> 你会推荐使用 Backbone.js 或 Ember.js 吗？

还需要更好地了解它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:46:35.220

*   使用 mongo-db 或 couchDB 来存储数据。
*   建立一个新的连接比通过 websocket 发送所有内容并解析它们要好。
*   是的。在服务器端使用 node.js。
*   您可以尝试其中任何一种。两者都有其优点和缺点。

# java - 使用主题更改对话框样式

> ID：10163469
> 
> 赞同：0
> 
> 时间：2012-04-15T15:40:59.703
> 
> 标签：java, android

我想知道是否有一种简单的方法可以告诉 Android 始终使用自定义样式来显示`Dialogs`.

使用主题和样式，您可以更改所有的外观和感觉，例如，`TextViews`在 theme.xml 中定义主题时使用这段代码：

```
<item name="android:textViewStyle">@style/Blue.TextView</item> 
```

Blue.TextView 在styles.xml 中定义。

有什么方法可以这样做`Dialogs`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:12:34.063

```
<style
    name="Theme_Dialog_Translucent"
    parent="android:Theme.Dialog">
    <item
        name="android:windowBackground">@null</item>
</style> 
```

以下是工作代码::

```
Dialog mDialog = new Dialog(this,R.style.ThemeDialogCustom);
mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
mDialog.setCanceledOnTouchOutside(true); //But here It is not workin
mDialog.setContentView(R.layout.popup); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:51:17.443

就在这里。例如，

```
AlertDialog.Builder b = new AlertDialog.Builder(context, R.style.MyTheme); 
```

或者，如果您使用的是`DialogFragment`，只需调用[setStyle()](http://developer.android.com/reference/android/app/DialogFragment.html#setStyle%28int,%20int%29)方法，

# android - 设置 ListView 适配器：空指针异常

> ID：10163483
> 
> 赞同：0
> 
> 时间：2012-04-15T15:42:46.080
> 
> 标签：android, listview, android-arrayadapter

我正在尝试将 ListView 的内容设置为 TextViews 数组。

就我目前所拥有的而言，我得到了一个空指针异常，即使我认为我会做这里建议的事情： [如何在 android 中动态地将项目添加到列表视图](https://stackoverflow.com/questions/8073018/how-do-i-add-items-to-listview-dynamically-in-android)

这是我目前拥有的：

```
ListView lvSuggestions = (ListView)findViewById(R.id.lvSuggestions);

ArrayAdapter<TextView> arrayAdapter =  new ArrayAdapter<TextView>(this, android.R.layout.simple_list_item_1);
lvSuggestions.setAdapter(arrayAdapter); 
```

但是当它设置适配器时我得到了例外。

我尝试使用 TextViews 填充 ArrayList，然后使用完整的 ArrayList 创建适配器，但是当我设置适配器时，我得到了相同的空指针异常。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:47:54.293

```
ArrayAdapter<TextView> arrayAdapter =  new ArrayAdapter<TextView>(this, android.R.layout.simple_list_item_1); 
```

将上面的行更改为下面

```
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(context, android.R.layout.simple_list_item_1); 
```

并将您要显示的所有字符串添加到 arrayAdapter，如下所示

```
arrayAdapter.add("string1");
arrayAdapter.add("string2");
arrayAdapter.add("string3");//so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:45:45.380

这

```
(ListView)findViewById(R.id.lvSuggestions); 
```

`null`如果`findViewById`返回`null`（未找到任何项目）或返回的对象不是 type ，则可能返回`ListView`。

保护它：

```
if (lvSuggestions != null) {
  ArrayAdapter<TextView> arrayAdapter = new ArrayAdapter<TextView>(this, 
      android.R.layout.simple_list_item_1);
  lvSuggestions.setAdapter(arrayAdapter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:04:01.323

请参阅此链接以了解自定义适配器的使用。

[链接1](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

[链接2](http://www.ezzylearning.com/tutorial.aspx?tid=6816874&q=binding-android-listview-with-custom-objects-using-arrayadapter)

[链接3](http://android-er.blogspot.in/2010/06/custom-arrayadapter-with-with-different.html)

[链接4](https://gist.github.com/721932)

[链接5](https://stackoverflow.com/questions/6958279/how-to-use-a-custom-arrayadapter-in-a-separate-class)

[链接6](http://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-24T05:33:08.110

也许你把 setContentView 放在 setAdapter 之后。

它必须是这样的：

设置内容视图（xxx）；

//....

设置适配器（xxx）

希望对您有所帮助！

# c++ - 将 char 数组从 c++ 传递到 fortran

> ID：10163485
> 
> 赞同：6
> 
> 时间：2012-04-15T15:43:04.123
> 
> 标签：c++, fortran, arrays

我在将 char 数组从 c++ 传递到 fortran (f90) 时遇到问题。

这是我的 C++ 文件，'cmain.cxx'：

```
#include <iostream>

using namespace std;

extern "C" int ftest_( char (*string)[4] );

int main() {
    char string[2][4];

    strcpy(string[0],"abc");
    strcpy(string[1],"xyz");

    cout << "c++: string[0] = '" << string[0] << "'" << endl;
    cout << "c++: string[1] = '" << string[1] << "'" << endl;

    ftest_(string);

    return 0;
} 
```

这是我的 fortran 文件，“ftest.f90”：

```
SUBROUTINE FTEST(string)

CHARACTER*3 string(2)
CHARACTER*3 expected(2)
data expected(1)/'abc'/
data expected(2)/'xyz'/

DO i=1,2
    WRITE(6,10) i,string(i)
10  FORMAT("fortran: string(",i1,") = '", a, "'" )

    IF(string(i).eq.expected(i)) THEN
        WRITE(6,20) string(i),expected(i)
20      FORMAT("'",a,"' equals '",a,"'")
    ELSE
        WRITE(6,30) string(i),expected(i)
30      FORMAT("'",a,"' does not equal '",a,"'")
    END IF
ENDDO

RETURN
END 
```

构建过程是：

```
gfortran -c -m64   ftest.f90 
g++ -c  cmain.cxx
gfortran -m64 -lstdc++ -gnofor_main -o test ftest.o cmain.o 
```

编辑：请注意，可执行文件也可以通过以下方式构建：

```
g++ -lgfortran -o test ftest.o cmain.o 
```

此外，当我运行 OSX 10.6 时，需要 -m64 标志。

执行“测试”的输出是：

```
c++: string[0] = 'abc'
c++: string[1] = 'xyz'
fortran: string(1) = 'abc'
'abc' equals 'abc'
fortran: string(2) = 'xy'
'xy' does not equal 'xyz' 
```

在 ftest.f90 中声明大小为 4 的“字符串”和“预期”字符数组，即：

```
CHARACTER*4 string(2)
CHARACTER*4 expected(2) 
```

并重新编译给出以下输出：

```
c++: string[0] = 'abc'
c++: string[1] = 'xyz'
fortran: string(1) = 'abc'
'abc' does not equal 'abc '
fortran: string(2) = 'xyz'
'xyz' does not equal 'xyz ' 
```

在 'cmain.cxx' 中声明大小为 3 的字符数组，即：

```
extern "C" int ftest_( char (*string)[3] );

int main() {
    char string[2][3]; 
```

并恢复到 fortran 文件 (3) 中的原始大小，即：

```
CHARACTER*3 string(2)
CHARACTER*3 expected(2) 
```

并重新编译给出以下输出：

```
c++: string[0] = 'abcxyz'
c++: string[1] = 'xyz'
fortran: string(1) = 'abc'
'abc' equals 'abc'
fortran: string(2) = 'xyz'
'xyz' equals 'xyz' 
```

所以最后一种情况是唯一有效的，但在这里我将 3 个字符分配给大小为 3 的 char 数组，这意味着缺少终止的 '\0'，并导致输出 'abcxyz' - 这是不可接受的我的预期应用。

任何帮助将不胜感激，这让我发疯！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T16:25:14.310

C 字符串以零结尾，而按照惯例，fortran 字符串是用空格填充的，但大小固定。您不应该期望能够在不进行一些转换的情况下将 C 字符串传递给 fortran。

例如：

```
#include <algorithm>

void ConvertToFortran(char* fstring, std::size_t fstring_len,
                      const char* cstring)
{
    std::size_t inlen = std::strlen(cstring);
    std::size_t cpylen = std::min(inlen, fstring_len);

    if (inlen > fstring_len)
    {
        // TODO: truncation error or warning
    }

    std::copy(cstring, cstring + cpylen, fstring);
    std::fill(fstring + cpylen, fstring + fstring_len, ' ');
} 
```

然后您可以将其与 3 或 4 长度版本一起使用`ftest`：

```
#include <iostream>
#include <ostream>
extern "C" int ftest_( char string[][4] );

void ConvertToFortran(char* fstring, std::size_t fstring_len,
                      const char* cstring);

int main()
{
    char cstring[2][4] = { "abc", "xyz" };
    char string[2][4];

    ConvertToFortran(string[0], sizeof string[0], cstring[0]);
    ConvertToFortran(string[1], sizeof string[1], cstring[1]);

    std::cout << "c++: string[0] = '" << cstring[0] << "'" << std::endl;
    std::cout << "c++: string[1] = '" << cstring[1] << "'" << std::endl;

    ftest_(string);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T18:35:44.947

我建议按照“高性能标记”的建议在 Fortran 端使用 ISO C 绑定。您已经在使用“extern C”。Fortran 2003 的 ISO C 绑定（目前在大多数 Fortran 95/部分 Fortan 2003 编译器中实现）使其成为一种独立于编译器和平台的方法。Charles Bailey 描述了两种语言中字符串之间的差异。这个 Stackoverflow 问题有一个代码示例：[Calling a FORTRAN subroutine from C](https://stackoverflow.com/questions/8207997/calling-a-fortran-subroutine-from-c/8208960)

如果您不想修改现有的 Fortran 代码，您可以在 C++ 代码和现有的 Fortran 代码之间编写一个“粘合”例程。使用 ISO C 绑定在 Fortran 中编写粘合例程会更加可靠和稳定，因为这将基于语言标准的特性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-21T08:55:56.333

给出的例子太重量级了，只要你不想传递多个字符串，你可以使用“隐藏”长度参数......

```
extern "C" void function_( const char* s, size_t len )  {  
  std::string some_string( s, 0, len );
  /// do your stuff here ...
  std::cout << "using string " << some_string << std::endl;
  /// ...

} 
```

你可以从 fortran 中调用它

```
 call function( "some string or other" ) 
```

您无需为单独的复制操作而烦恼，因为 std::string 构造函数可以为您完成所有这些操作。

# javascript - 使用 jquery 检查元素是否存在

> ID：10163488
> 
> 赞同：2
> 
> 时间：2012-04-15T15:43:52.380
> 
> 标签：javascript, jquery

我有一个页面，我需要在其中动态检查 HTML 元素的存在。因此我需要知道这样做的正确方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:47:49.210

你可以这样做：

```
$(function() {
  if ($('.myElement').length > 0) {
    console.log('There is one or more elements with class="myElement"');
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T15:47:33.390

```
$('#id').length === 0; // element does not exist 
$('#id').length > 0; // element exists 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-26T14:17:12.703

就我个人而言，我非常喜欢 Ruby on Rails 的“存在​​”成语，所以我将它添加到我的 JS 设置中：

```
jQuery.fn.presence = function presence() {
    return this.length !== 0 ? this : null;
}; 
```

现在在我的代码中使用它：

```
if (el.presence()) { ... } 
```

而且更好

```
const ul = el.parents('UL').first().presence() ?? el.siblings('UL').first() 
```

（如果你买不起`??`，`||`也可以在这里做。）

# objective-c - 如何在 Objective C 中异步发送消息

> ID：10163489
> 
> 赞同：0
> 
> 时间：2012-04-15T15:44:07.687
> 
> 标签：objective-c

根据我得到的答案，在Objective C中发送消息不是异步的 在Objective C中[发送消息实际上是异步的吗？](https://stackoverflow.com/questions/10162019/is-sending-a-message-in-objective-c-actually-asynchronous)

所以我的下一个问题是如何在Objective C中（在同一个应用程序中）实际异步发送消息是否有可能（不求助于线程等复杂的东西）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:50:48.650

在文档集中查看 Apple 的“并发编程指南”。您有线程、操作队列、调度队列等选项。这是一个很大的话题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:53:35.423

如果你想使用 Apple 框架进行真正的异步方法调用，只需看看 GCD，更准确地说是`dispatch_async`.

GCD 可用于 iOS 和 OSX，Apple 知道接下来会发生什么，因此使用此“asycn API”将确保您不太容易出现更新不兼容问题。

很好的阅读；）

**编辑：**好的，如果你真的不想要任何线程，你可以将你调用的方法声明为`(oneway void)`. 我发现在覆盖`release`.

这是一个解释它的作用的答案：[https ://stackoverflow.com/a/5495195/700317](https://stackoverflow.com/a/5495195/700317)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T15:55:13.737

假设您正试图让主线程发生一些事情，那么有很多方法可以处理它。你使用哪一个取决于你在做什么。查看以下 Apple 文档： [https ://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079) [https:// /developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091](https://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091) [https://developer.apple.com/library/mac/#文档/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html#//apple_ref/doc/uid/10000057i](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html#//apple_ref/doc/uid/10000057i)

# php - 将小时数添加到存储的日期

> ID：10163493
> 
> 赞同：1
> 
> 时间：2012-04-15T15:44:48.980
> 
> 标签：php, date

我将当前日期（也称为禁令日期）以及禁令时长（可以是 24 小时到 50000 小时等）一起存储在表格中。

我需要将禁令的长度添加到禁令的日期以给出到期日期，但我正在努力解决如何做到这一点。我已经尝试了各种使用日期格式并添加小时数的方法，但似乎无法理解这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:52:11.627

如果您的禁令开始日期存储在一个变量中`$startDate`，并且您在一个`$hoursBan`仅数值的变量中获取禁令小时数，那么您将通过以下方式获得到期日期：

```
$expiryDate = strtotime( date("Y-m-d", strtotime($startDate)) . " +" . $hoursBan . " hours"); 
```

# php - Zend 路由器的模块化不起作用

> ID：10163495
> 
> 赞同：0
> 
> 时间：2012-04-15T15:45:05.767
> 
> 标签：php, zend-framework, router, modular

我是 Zend 框架的新手 我在 Zend 上遇到了路由器和模块化问题 我有一个 router.ini 可以通过友好的 URL 重写进行路由：

```
routers.prod-cat-details.type           = Zend_Controller_Router_Route_Regex
routers.prod-cat-details.route          = "([a-zA-Z0-9\-]+)/*([a-zA-Z0-9\-]+)/*([a-zA-Z0-9\-]+)\.html"
routers.prod-cat-details.defaults.module         = "default"
routers.prod-cat-details.defaults.controller    = "products"
routers.prod-cat-details.defaults.action         = "detail"
routers.prod-cat-details.map.1          = "uri_cat_level0"
routers.prod-cat-details.map.2          = "uri_cat"
routers.prod-cat-details.map.3          = "uri"

routers.prod-cat-parent.type            = Zend_Controller_Router_Route_Regex
routers.prod-cat-parent.route           = "([a-zA-Z0-9\-]+)/*([a-zA-Z0-9\-]+)"
routers.prod-cat-parent.defaults.module         = "default"
routers.prod-cat-parent.defaults.controller     = "products"
routers.prod-cat-parent.defaults.action         = "category"
routers.prod-cat-parent.map.1           = "uri_cat_level0"
routers.prod-cat-parent.map.2           = "uri_cat"

routers.prod-cat.type           = Zend_Controller_Router_Route_Regex
routers.prod-cat.route          = "([a-zA-Z0-9\-]+)"
routers.prod-cat.defaults.module        = "default"
routers.prod-cat.defaults.controller    = "products"
routers.prod-cat.defaults.action        = "category"
routers.prod-cat.map.1          = "uri_cat" 
```

当我不使用路由器时，我的代码分为模块（不要在 Boottrap 上设置路由器），我可以使用模块 zend（exp: localhost/admin -> 转到管理模块）但是当我激活路由时 -> localhost /admin -> 转到“产品”控制器“类别”操作

请帮我解决这个问题。在此先感谢（抱歉我的英语不好：D）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:26:54.053

您的问题是您的“prod-cat”路由将匹配对 的请求`/admin`，因为您提供的正则表达式模式将匹配任何字符串。您需要对该路由设置一些限制以缩小其匹配范围，或者在其下方添加一些静态路由以匹配您想要转到其他控制器的某些页面，例如 /admin。

请参阅我对这个问题的回答：[Zend Routing](https://stackoverflow.com/questions/9436653/zend-routing-problems/9448847#9448847) questions ，了解有关 ZF 中路由如何工作的更多背景知识，这应该可以解释一些事情。

# java - GridBagLayout 中的组件布局不如预期

> ID：10163501
> 
> 赞同：0
> 
> 时间：2012-04-15T15:45:27.653
> 
> 标签：java, swing, layout-manager, gridbaglayout

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class GridBagLayoutDemo extends JFrame
{
private JFrame frame;
private JPanel panel;
private JLabel l1,l2,l3,l4,l5,l6,l7,l8;
private JRadioButton r1,r2,r3,r4,r5,r6,r7,r8;
private JTextField t1,t2,t3,t4;
private JComboBox c1;
GridBagConstraints gbc;
GridBagLayout  gbl;

public static void main(String[] args)
{
    new GridBagLayoutDemo();
}

public GridBagLayoutDemo()
{
    frame=new JFrame();
    panel=new JPanel();
    panel.setBackground(Color.YELLOW);
    gbl   = new GridBagLayout();  

    gbc = new GridBagConstraints(); 

    panel.setLayout(gbl);

    l1=new JLabel("passport");
    gbc.anchor = gbc.EAST;  
    gbc.gridx=0;
    gbc.gridy=0;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    //gbc.weightx=1.0;
    panel.add(l1,gbc);

    l2=new JLabel("pass no.");
    gbc.gridx=0;
    gbc.gridy=1;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(l2,gbc);

    l3=new JLabel("Valid Upto");
    gbc.gridx=0;
    gbc.gridy=2;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(l3,gbc);

    l4=new JLabel("Identification");
    gbc.gridx=0;
    gbc.gridy=3;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(l4,gbc);

    l5=new JLabel("NO.");
    gbc.gridx=0;
    gbc.gridy=4;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(l5,gbc);

    l6=new JLabel("Marital Status");
    gbc.gridx=0;
    gbc.gridy=5;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(l6,gbc);

    l7=new JLabel("Nationality");
    gbc.gridx=0;
    gbc.gridy=6;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(l7,gbc);

    l8=new JLabel("Type of Position");
    gbc.gridx=0;
    gbc.gridy=7;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(l8,gbc);

    r1=new JRadioButton("Yes");
    gbc.gridx=2;
    gbc.gridy=0;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(r1,gbc);

    r2=new JRadioButton("No");
    gbc.gridx=4;
    gbc.gridy=0;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(r2,gbc);

    r3=new JRadioButton("Married");
    gbc.gridx=2;
    gbc.gridy=5;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(r3,gbc);

    r4=new JRadioButton("Unmarried");
    gbc.gridx=4;
    gbc.gridy=5;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(r4,gbc);

    r5=new JRadioButton("Full time");
    gbc.gridx=2;
    gbc.gridy=7;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(r5,gbc);

    r6=new JRadioButton("Part Time");
    gbc.gridx=3;
    gbc.gridy=7;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(r6,gbc);

    r7=new JRadioButton("Contract Basis");
    gbc.gridx=4;
    gbc.gridy=7;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(r7,gbc);

    r8=new JRadioButton("Intern");
    gbc.gridx=2;
    gbc.gridy=8;
    gbc.gridwidth=1;
    gbc.gridheight=1;
    panel.add(r8,gbc);

    t1=new JTextField();
    gbc.gridx=2;
    gbc.gridy=1;
    gbc.gridwidth=3;
    gbc.gridheight=1;
    panel.add(t1,gbc);

    t2=new JTextField();
    gbc.gridx=2;
    gbc.gridy=2;
    gbc.gridwidth=3;
    gbc.gridheight=1;
    panel.add(t2,gbc);

    t3=new JTextField();
    gbc.gridx=2;
    gbc.gridy=4;
    gbc.gridwidth=3;
    gbc.gridheight=1;
    panel.add(t3,gbc);

    t4=new JTextField();
    gbc.gridx=2;
    gbc.gridy=6;
    gbc.gridwidth=3;
    gbc.gridheight=1;
    panel.add(t4,gbc);

    frame.add(panel);

    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
    //frame.setSize(300,200);
    frame.pack();

    //c1=new JComboBox();
    //frame1();

}
} 
```

在此我添加了一些标签、单选按钮、文本字段。单选按钮和标签正在按我想要的方式显示，但文本字段没有正确显示。谁能告诉我如何让文本字段覆盖更多空间？

![这就是gui的显示方式](../Images/d1fe1a7392d4312279277d610b493b52.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:49:46.480

由于您的 JTextField 没有设置其列大小属性，因此它们的 preferredSize 将非常小。考虑给您的 JTextFields 默认列大小：

```
public class GridBagLayoutDemo extends JFrame {
   private static final int TF_COLS = 10;

   // ....

   public GridBagLayoutDemo() {
      t1 = new JTextField(TF_COLS);
      t2 = new JTextField(TF_COLS);
      t3 = new JTextField(TF_COLS);
      t4 = new JTextField(TF_COLS);
      // .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T15:52:29.440

您可能应该考虑为文本字段的约束设置以下两个值：

```
GridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
GridBagConstraints.weightx = 1.0;// If there is extra room horizontally, the textfields will receive it 
```

# javascript - 为什么要将它分配给另一个变量？

> ID：10163505
> 
> 赞同：2
> 
> 时间：2012-04-15T15:45:42.733
> 
> 标签：javascript

在[underscore.js 源代码的开头](http://documentcloud.github.com/underscore/docs/underscore.html)，您会看到：

```
var root = this;

var previousUnderscore = root._; 
```

所以问题就变成了作者为什么不直接写：

```
var previousUnderscore = this._; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:48:42.737

两个原因，

1.  可读性，它使代码在做什么，它在引用什么变得更清楚。这是非常不透明的。
2.  根据上下文， this 可以引用很多很多不同的对象，root 可以在多个地方使用，并且始终引用正确的对象。

# mysql - MySql如果存在设置值？

> ID：10163506
> 
> 赞同：5
> 
> 时间：2012-04-15T15:45:45.153
> 
> 标签：mysql

我有一个查询返回一堆信息并使用连接来连接两个表，它工作得很好。

但是我有一个名为tickets的字段，我需要查看是否有可用的时间，如果有的话，将其设置为1，否则将其设置为0。就像这样。

```
SELECT 
name,poster,sid,tickets = (IF SELECT id FROM times WHERE shows.tid=times.tid LIMIT 1, 
if value returned set to 1, otherwise set to 0) 
FROM shows JOIN show_info ON (id) WHERE sid=54 order by name ASC 
```

显然，这不是一个正确的 MySQL 语句，但它会给出我正在寻找的示例。

这可能吗？或者我是否需要进行第一次选择，然后循环遍历结果，然后进行第二次选择并以这种方式设置值？或者更好的表现是明智的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T15:50:21.810

我会看看在大多数情况下，它比与你的 where 语句匹配的所有项目`EXISTS`要快得多。`COUNT`照这样说。您的查询应如下所示：

```
SELECT 
  name,
  poster,
  sid,
  (
   CASE WHEN EXISTS(SELECT NULL FROM times WHERE shows.tid=times.tid)
      THEN 1 
      ELSE 0
   END 
  )AS tickets 
FROM 
  shows 
  JOIN show_info ON (id) WHERE sid=54 order by name ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:50:53.767

看CASE语句

```
SELECT name,poster,sid,
Case WHEN (SELECT count(id) FROM times WHERE shows.tid=times.tid) > 0 THEN 1 else 0 END as Tickets
FROM shows 
JOIN show_info ON (id) 
WHERE sid=54 order by name ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T15:51:59.053

尝试

```
SELECT 
name,
poster,
sid,
CASE WHEN (SELECT COUNT(*) FROM times WHERE shows.tid=times.tid ) > 0 THEN 1 ELSE 0 END CASE tickets
FROM shows 
JOIN show_info ON (id) 
WHERE sid=54 
order by name ASC 
```

有关参考，`CASE`请参阅[MySQL Docs](http://dev.mysql.com/doc/refman/5.6/en/case-statement.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T15:56:06.870

这是我能想到的最简单的方法：

```
SELECT name, poster, sid,EXISTS(SELECT * times WHERE shows.tid=times.tid) tickets
FROM shows
JOIN show_info USING (id)
WHERE sid = 54
ORDER BY name 
```

# ruby - MongoDB + 红宝石。如何访问文档属性？

> ID：10163510
> 
> 赞同：5
> 
> 时间：2012-04-15T15:45:55.740
> 
> 标签：ruby, mongodb, bson

我想用 Ruby 试试 Mongo。我连接，选择了集合，我可以从 MongoDB 查询数据。

```
irb(main):049:0> coll.find_one({:x=>4})
=> #<BSON::OrderedHash:0x3fdb33fdd59c {"_id"=>BSON::ObjectId('4f8ae4d7c0111ba6383cbe1b'), "x"=>4.0, "j"=>1.0}>

irb(main):048:0> coll.find_one({:x=>4}).to_a
=> [["_id", BSON::ObjectId('4f8ae4d7c0111ba6383cbe1b')], ["x", 4.0], ["j", 1.0]] 
```

但是当我检索 BSON 哈希时如何访问属性？我需要这样的东西：

```
data.x
=> 4 
```

**to_hash**方法给了我相同的 BSON::OrderedHash ... :(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:39:22.843

当你说 时`coll.find_one({:x=>4})`，你会得到一个 BSON::OrderedHash，你可以像普通哈希一样访问它：

```
h = coll.find_one(:x => 4)
puts h['x']
# 4 comes out unless you didn't find anything. 
```

如果您使用 full`find`而不是`find_one`，您会得到一个 MongoDB::Cursor ，它是一个 Enumerable ，因此您可以像任何其他集合一样对其进行迭代；游标将在您迭代时返回 BSON::OrderedHash 实例，因此您可以执行以下操作：

```
cursor = coll.find(:thing => /stuff/)
cursor.each { |h| puts h['thing'] }
things = cursor.map { |h| h['thing'] } 
```

如果您想要对象而不是哈希，那么您必须自己用对象包装 MongoDB::Cursor 和 BSON::OrderedHash 实例（可能通过[Struct](https://ruby-doc.org/core/Struct.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:14:59.613

Mongodb`find_one`方法返回hash对象，find方法返回游标对象。

游标对象可以迭代，然后可以在普通哈希中提取答案。

```
require 'rubygems'
require 'mongo'
include Mongo

client = MongoClient.new('localhost', 27017)

db = client.db("mydb")
coll = db.collection("testCollection")

coll.insert({"name"=>"John","lastname"=>"Smith","phone"=>"12345678"})
coll.insert({"name"=>"Jane","lastname"=>"Fonda","phone"=>"87654321"})

cursor = coll.find({"phone"=>"87654321"})
answer = {}
cursor.map { |h| answer = h }
puts answer["name"] 
```

# c# - 具有安全性的中间服务实现

> ID：10163513
> 
> 赞同：0
> 
> 时间：2012-04-15T15:46:14.867
> 
> 标签：c#, wcf, wcf-security

我有一个简单的 WCF 客户端 -> 服务器结构，其中客户端引用服务器的 WCF 服务。使用 X509 证书完成身份验证。

我想为我的服务添加一种简单形式的冗余。意义——让多台服务器运行，并让客户端使用一个路由器，如果主服务器死机，该路由器将透明地故障转移到备用服务器。

我查看了 WCF 4.0 路由，但这[并不好](https://stackoverflow.com/q/10121906/537913)。

所以剩下的就是我自己做。我找到[了一个很好的例子](http://www.codeproject.com/Articles/29775/WCF-Intermediate-Service-between-Client-and-Server)。

但是，作者根本没有使用任何安全措施。

我尝试通过将以下内容添加到路由器的`<client>`绑定配置中来添加消息级安全性（我从现有客户端的配置中复制了它）：

```
<security mode="Message">
   <transport clientCredentialType="Windows" proxyCredentialType="None" realm="" />
   <message clientCredentialType="Certificate" negotiateServiceCredential="false"  
            algorithmSuite="Default" establishSecurityContext="false" />
</security> 
```

使用这个，我得到一个

> 未提供客户端证书。在 ClientCredentials 中指定客户端证书。

我的服务器异常。

所以我手动将证书添加到我在路由器代码中创建的通道中（完整列表在这里）：

```
[ServiceContract(Name = "IntermediateServiceManager")]
public interface IIntermediateServiceContract
{
   [OperationContract(Name = "ProcessMessage", Action = "*", ReplyAction = "*")]
   Message ProcessMessage(Message message);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, AddressFilterMode = AddressFilterMode.Any)]
public class IntermediateServiceManager : IIntermediateServiceContract
{
    public Message ProcessMessage(Message requestMessage)
    {
        ChannelFactory<IIntermediateServiceContract> factory = new ChannelFactory<IIntermediateServiceContract>("MyEndpoint");
        factory.Credentials.ClientCertificate.SetCertificate(StoreLocation.LocalMachine,StoreName.My,X509FindType.FindBySubjectName,"mycert.company.com");
        IIntermediateServiceContract proxy = factory.CreateChannel();

        IClientChannel clientChannel = proxy as IClientChannel;

        Message responseMessage = proxy.ProcessMessage(requestMessage);
        return responseMessage;
    }
} 
```

现在我得到的错误是

> 名称为“安全”和命名空间“ [http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd) ”和角色“找到”的多个标头。

我打开了 WCF 诊断，并将路由器发送的消息头与客户端发送的消息头进行了比较。事实上，路由器消息有 2 个安全标头。

我假设一个最初是由客户端添加的（因为它不知道它现在正在针对路由器工作-它仍然认为这是实际的服务器），第二个是由路由器添加的。

因此，从逻辑上讲，接下来要做的就是禁用我最​​初添加到路由器配置中的安全性（只需更改`security mode`为`None`）。

现在我得到的例外是

> “收件人”、“ [http://www.w3.org/2005/08/addressing](http://www.w3.org/2005/08/addressing) ”所需的消息部分未签名

我假设这意味着我的路由器已经更改了消息的`To`字段，并且由于没有配置安全性 - 路由器没有对其进行签名......

所以我想我有点卡住了。我目前正在考虑的两个选项是：

1.  以某种方式篡改消息的标头并删除冗余的安全标头。
2.  禁用客户端和路由器之间的安全性，只有路由器和服务之间有安全性。

但是，这样做的缺点是必须更改客户端，而我不想这样做。

有任何想法吗？

# c++ - c++字符串下标超出范围

> ID：10163527
> 
> 赞同：1
> 
> 时间：2012-04-15T15:48:09.803
> 
> 标签：c++, string, algorithm, subscript

请帮助调试。它给了我一个错误“字符串下标超出范围错误”。

程序需要使用插入排序算法对文本进行排序。

这是代码：

```
#include<iostream>
#include<string>
using namespace std;

void insertionSort(string &text, int size) {
  char temp;
  int i;
  for(int j=1;j<size;j++)
  {
    //text.push_back(temp);
    temp=text[j];
    i=j-1;
   while(i>=0 && text[i]>temp)
 {

 text[i+1]=text[i];
  i--;
 }
    text[i+1]=temp;
  }
}

int main()
{
  string text="this a just text need to be sorted";

  int size = text.length();
  insertionSort(text,size);
  cout<<text<<endl;
  return 0;
} 
```

调试断言失败！

线路：1441：

表达式：字符串下标超出范围

我应该`text[i+1]=text[j]` 改为`text[i+1]=text[i]`;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T15:53:32.927

您必须更改此指令：

```
text[i+1]=text[i]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T16:05:35.667

代替

```
while(text[i]>temp && i>=0) 
```

和

```
while(i>=0 && text[i]>temp) 
```

原因：

当 i 变为负数时，即`i == -1`，首先检查`i>=0`而不是检查`text[i]>temp`（它试图访问位置 -1 处的数组元素并给出超出范围）。

**编辑：**

也更换

```
text[i+1]=text[j]; 
```

和

```
text[i+1]=text[i]; 
```

为什么这样 ？：在[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)中，如果我们在下部有大于 text[j] 的条目（即 0 到 j-1），那么我们需要将这些条目向前推，并在我们不再有大于 text[ 的元素时停止j]。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T15:56:04.440

当`j == 1`您的 while 循环以 i==0 开始时，您在`i`循环中递减，然后在下一次执行循环时检查`text[i]`，这是无效的（`i == -1`此处）

要修复，您需要检查`i`first 的有效性：

```
while(i >=0 && text[i] > temp) {
  // ...
} 
```

这样做是正确的，因为`&&`运算符有一个短路规则：如果第一个操作数（`i>=0`在这种情况下）导致`false`，则表达式的其余部分 ( `text[i] > temp`) 不会被计算

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T16:19:54.167

你有关于问题的信息。解决这个问题的简单方法是，放置一些打印语句来知道字符串数组使用的索引值。

另一个评论是，请不要传递字符串的长度，因为如果您调用 text.length(); 在更改之前在函数内部可以获取字符串的长度。

# php - INSERT INTO ... ON DUPLICATE KEY UPDATE 无法正常工作

> ID：10163532
> 
> 赞同：0
> 
> 时间：2012-04-15T15:48:53.747
> 
> 标签：php, mysql

我正在尝试运行此查询：

```
protected function store_credentials($config_file_path = 'envato_credentials_config.json') {
    $credentials_config = $this->get_envato_config($config_file_path);
    $sql = "INSERT INTO credentials (api_key, username, last_update) VALUES (?, ?, NOW()) ON DUPLICATE KEY UPDATE api_key = values(api_key), username = values(username), last_update = values(last_update)";
    if ($stmt = $this->connect->prepare($sql)) {
        $stmt->bind_param('ss', $credentials_config['API'], $credentials_config['User']);
        $stmt->execute();
        $stmt->close();
    } else {
        return false;
    }
} 
```

但是发生的情况是，当它执行时我总是得到重复的条目，如果它再次执行，而不是更新它再次运行添加另外两个条目。为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T15:58:47.133

您要插入的列之一必须是主键或具有唯一约束。

# javascript - 简单的搜索结果页面：使用 localStorage 变量和 document.write 的 if/else 问题

> ID：10163534
> 
> 赞同：0
> 
> 时间：2012-04-15T15:49:23.013
> 
> 标签：javascript, html, image, radio, document.write

在迷你页面上做一些家庭作业，我被困住了！我们被告知要从我们制作的虚假“注册”页面中提取 localStorage 变量（从用户选择的三个单选按钮中获取信息）并使用该信息来更改用户将看到的内容一个假的，非常基本的“电子商务”网站。

我已经成功完成的是从注册页面连接我的按钮以在单击时打开电子商务页面，我认为我已经正确编码存储选择的变量。这是我的“注册页面”代码：

```
window.onload=init;
//setup commands
function init () {
    //wire button to function

    var submitButton=document.getElementById("submitButton");
    submitButton.onclick= travel;
    }   
function travel () {
    window.location="etzy.html"

    if (document.getElementById("Dog").checked) 
        localStorage.usercomputer = "Dog";
    else if (document.getElementById("Cat").checked) 
        localStorage.usercomputer = "Cat";
    else if (document.getElementById("Black").checked) 
        localStorage.usercomputer = "Black";
    else if (document.getElementById("Brown").checked) 
        localStorage.usercomputer = "Brown";
    else if (document.getElementById("White").checked) 
        localStorage.usercomputer = "White";
    else if (document.getElementById("Yes").checked) 
        localStorage.usercomputer = "Yes";
   else if (document.getElementById("No").checked) 
        localstorage.usercomputer = "No";
    } 
```

好的，就是这样。然后是我开始研究的电子商务 JS：

```
window.onload=image;
    function image (){
    var images = document.getElementById("localStorage.usercomputer");

       if (images ="Dog"){
        //document.write('<img class="etsyimage" src="dog.jpg" alt="dog Image"/>');
             alert("dog");
       }
       else if (images ="Cat"){
        //document.write('<img class="etsyimage" src="cat.jpg" alt="cat Image" />');
            alert("cat");
        }
    } 
```

我已注释掉`document.write`并发出警报以进行测试。问题是，当我测试它（并选择“猫”）时，我不断收到“狗”警报，我不知道为什么。因此，以下是我的一些问题：1）为什么我只收到“狗”警报，我该如何解决？2) 当我不使用警报并尝试该`document.write`功能时，图像“dog.jpg”会覆盖页面上的所有其他 HTML 信息（横幅、菜单等）。除了将图像放在结果页面（HTML）上之外，是否有其他方法可以解决此问题或使用其他方法，`document.write`但不要让它取代 HTML 上的所有其他内容，以便除了新图像之外它是空白的？

我认为这些是我唯一的问题，如果这些东西可以修复，那么至少一切都会正常运行。对不起一个帖子的小说。也可以随意判断基本级别的 javascript 代码和问题，我是新手，所以我现在只是在努力通过自己的方式。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:00:37.687

在您的`image()`函数中，您的 if 语句不正确

```
window.onload=image;
    function image (){
    var images = document.getElementById("localStorage.usercomputer");

       if (images == "Dog") //Need two ='s for comparison
       { 
             alert("dog");
       }
       else if (images == "Cat")
       {
            alert("cat");
       }
   } 
```

`=`在 javascript 中使用一个将分配值（即`var bob = 'a person'`），因此您的函数会抛出意外的结果。当测试值时，总是使用`==`or`===`进行严格比较来检查值是否相等且类型相同。

在回答您的其他问题时，我会在您希望图像去的其他页面上添加一个容器或区域。也许使用`<div id="imgDiv"></div>`标签并给它一个ID，就像我展示的那样。您可以使用 CSS 设置 div 的样式和位置，然后将图像附加到此容器中，而不是使用`document.write()`. 类似于下面的代码

```
window.onload=image;
    function image (){
    var images = document.getElementById("localStorage.usercomputer");
    var imgDiv = document.getElementById("imgDiv"); //setup variable to img container        

   if (images == "Dog")
   { 
         imgDiv.innerHTML = '<img class="etsyimage" src="dog.jpg" alt="dog image" />';    
   }
   else if (images == "Cat")
   {
        imgDiv.innerHTML = '<img class="etsyimage" src="cat.jpg" alt="cat image" />';
   }
} 
```

希望这可以帮助

# macos - Applescript - 列出扩展坞中的所有隐藏窗口 - 小型化

> ID：10163537
> 
> 赞同：1
> 
> 时间：2012-04-15T15:49:56.943
> 
> 标签：macos, applescript

我的 applescript 程序需要一些帮助。

我想列出所有打开的和在停靠栏中的窗口，所以我尝试了这个：

```
tell application "System Events"
set procs to processes
set windowInDock to {}
repeat with proc in procs
    try
        if exists (window 1 of proc) then
            repeat with w in (every window of proc whose miniaturized is true)
                copy a & w's miniaturized to the end of windowInDock
            end repeat
        end if
    end try -- ignore errors
end repeat
end tell
return windowInDock 
```

但它返回空数组。

我尝试列出所有窗口并获取小型化参数（w 小型化），但它不起作用。

你有什么主意吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T23:09:53.383

**exists**命令适用于任何对象，但**系统事件**中的窗口属性与应用程序中的窗口属性不同（例如，没有小型化属性）。如果您不忽略所有错误，您会看到错误 - 在 try 语句中包装一堆代码而至少不记录错误只是要求它。

您可以做的是获取应用程序列表，然后要求*他们*获取有关其窗口的信息。不确定您要对真实值列表做什么，所以在我的示例中，我只使用了窗口索引：

```
tell application "System Events" to set theNames to name of processes whose background only is false
set windowsInDock to {}
repeat with appName in theNames
    tell application appName to repeat with aWindow in (get windows whose miniaturized is true)
        tell aWindow to try
            get it's properties -- see event log
            set the end of windowsInDock to "window " & it's index & " of application " & quoted form of appName
        on error errmess -- ignore errors
            log errmess
        end try
    end repeat
end repeat

choose from list windowsInDock with prompt "Miniaturized windows:" with empty selection allowed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T03:35:16.563

这是一个适用于所有应用程序的脚本，至少在我的系统上。

尝试这个

```
set windowsInDock to {}
tell application "System Events"
    repeat with this_app in (get processes whose background only is false and windows is not {}) --get applications with 1+ window
        set windowsInDock to windowsInDock & (get windows of this_app whose value of its attribute "AXMinimized" is true)
    end repeat
end tell
return windowsInDock 
```

# mysql - 插入 MySQL 时跳过列

> ID：10163540
> 
> 赞同：2
> 
> 时间：2012-04-15T15:50:34.160
> 
> 标签：mysql, insert

**在不知道表中的名称和列数的情况下**向表中插入新行时，如何跳过列？

使用`INSERT (col1, col2) VALUES (1, 2)`不是**一种选择**，因为我无法知道运行时的列数。这一切都是根据用户输入计算出来的。

因此，我需要`id`在插入时跳过第一列（ , PRIMARY KEY auto_increment）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:01:42.147

您可以在不提供列名的情况下插入，但您必须为所有列提供一些值。

```
INSERT INTO comments 
VALUES (null, 2, 3, 4,null,6) 

CREATE TABLE IF NOT EXISTS `comments` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `imageid` int(10) unsigned NOT NULL DEFAULT '0',
  `uid` bigint(20) unsigned NOT NULL DEFAULT '0',
  `content` text CHARACTER SET utf8,
  `adate` datetime DEFAULT NULL,
  `ip` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
   KEY `ids` (`imageid`,`adate`) USING BTREE
) ENGINE=InnoDB  DEFAULT CHARSET=latin1  ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T15:53:12.393

尝试插入 0 作为第一个值。如果该列是自动递增的，它应该可以工作。

来自 MySQL 参考：“未为 AUTO_INCREMENT 列指定值，因此 MySQL 自动分配序列号。您还可以显式地将 NULL 或 0 分配给列以生成序列号。” [http://dev.mysql.com/doc/ refman/5.5/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

# php - 如何在 PHP 数组中找到最佳匹配键

> ID：10163541
> 
> 赞同：2
> 
> 时间：2012-04-15T15:50:40.517
> 
> 标签：php, arrays

我在 php 中有一个关联数组。键是整数。我如何找到最接近任何整数输入的键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:54:17.187

一个简单但蛮力的方法：

```
$distance = 1000000;  // initialize distance as "far away"
foreach ($array as $idx => $value)
   if (abs ($idx - $target_index) < $distance)
   {
      $distance = abs ($idx - $target_index);
      $best_idx = $idx;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:48:46.287

如果数组键是有序的，您可以使用更有效的算法（这可能会或可能不会产生明显的差异，具体取决于它的用途和数组的大小）：

```
$arr = [2 => 'a', 4 => 'b', 7 => 'c'];
$input = 5;

if (isset($arr[$input])) {
    return $input;
}

foreach ($arr as $key => $value) {
    if ($key > $input) {
        if (prev($arr) === FALSE) {
            // If the input is smaller than the first key
            return $key;
        }
        $prevKey = key($arr);

        if (abs($key - $input) < abs($prevKey - $input)) {
            return $key;
        } else {
            return $prevKey;
        }
    } 
```

# c++ - 将向量添加到向量

> ID：10163548
> 
> 赞同：1
> 
> 时间：2012-04-15T15:52:02.040
> 
> 标签：c++, stl, vector

> **可能重复：**
> [C++：将向量附加到向量](https://stackoverflow.com/questions/2551775/c-appending-a-vector-to-a-vector)

我可以轻松地将一个向量与另一个向量相加吗？我的意思是，push_back 一个向量到另一个向量：

{1, 2, 3} + {4, 8} = {1, 2, 3, 4, 8}；

我是否必须手动执行此操作：

```
for (int i = 0; i < to_sum_vector.size(); i++) {
    first_vector.push_back(to_sum_vector.at(i));
} 
```

还是有 C++/STL 的方式来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T15:55:29.833

你可以。STL 方式是使用`insert`：

```
first_vector.insert(first_vector.end(), second_vector.begin(), second_vector.end()); 
```

这会插入`second_vector`到`first_vector`末尾处的开头`first_vector`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T15:54:29.407

```
dst.insert(dst.end(), src.begin(), src.end() ); 
```

# java - 如何使 JTextField 和 JComboBox 圆角无边框和背景图像？

> ID：10163551
> 
> 赞同：1
> 
> 时间：2012-04-15T15:52:13.163
> 
> 标签：java, swing, user-interface

我正在尝试将背景图像宽度设置为 100，高度为 100 并将边框设置为空。这样我就可以设计类似于以下的输入字段，但是没有应用边框并且没有退出圆角+没有应用背景图像的方式。

![http://image.shutterstock.com/display_pic_with_logo/85630/85630,1234358857,2/stock-vector-website-design-set-on-a-black-consist-of-menu-bar-buttons-checkbox-input-文本字段-drop-24795286.jpg](../Images/de4f74cac8b801f20065a37de7cec068.png)

```
// Current
String[] petStringsa = { "eth0: ", "eth1: " };
JPanel namePanela = new JPanel(new BorderLayout());
JLabel nameLabela = new JLabel("View Inerfaces: ");
nameLabela.setDisplayedMnemonic(KeyEvent.VK_N);

final JComboBox nameTextFielda = new JComboBox(petStringsa);    
nameTextFielda.setBorder(null);
nameTextFielda.setBackground(Color.white);

nameLabela.setLabelFor(nameTextFielda);
namePanela.add(nameLabela, BorderLayout.WEST);
namePanela.add(nameTextFielda, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:06:48.713

看看这个资源[http://java.sun.com/developer/technicalArticles/GUI/translucent_shape_windows/](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)

我解释了如何改变摆动元素的形状。

该线程解释了如何放置背景图像：[How to set an image as background for Frame in Swing GUI of java?](https://stackoverflow.com/questions/1466240/how-to-set-an-image-as-a-background-for-frame-in-swing-gui-of-java)

虽然我的回答几乎重复了 Hovercraft Full Of Eels 的评论，但我决定写它，因为它包含特定的链接。

# ruby-on-rails - 我如何在haml中执行内联if语句

> ID：10163556
> 
> 赞同：6
> 
> 时间：2012-04-15T15:52:31.717
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, haml

我有这个火腿

```
 %table.form_upper{:style => "display:none;", :id => 'profile-info'}
    %tr{:id => 'some-row'} 
```

如果满足条件，我如何在此表上不显示任何内容，例如我知道我可以做到这一点，但我觉得必须有一种内联方式来做到这一点

```
-if condtion
  %table.form_upper{:id => 'profile-info'}
-else
  %table.form_upper{:style => "display:none;", :id => 'profile-info'}
    %tr{:id => 'some-row'} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T15:54:33.407

你可以这样做：

```
%table.form_upper{:style => "display:#{condition ? 'none' : ''};", :id => 'profile-info'} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T16:14:46.377

如果您为属性提供一个`nil`或`false`值，Haml 将不会设置它：

哈姆尔：

```
- # substitute an appropriate semantic class name here (not "hidden")
%table.form_upper#profile-info{ class:condition && 'empty' } 
```

CSS：

```
table.empty { display:none } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T16:11:47.547

这种方式更好，因为您将样式与逻辑分开，因此您拥有更多控制权：

在 HAML 中：

```
%table.form_upper{:class => "#{condition ? '' : 'nonvisible_fupper'};", :id => 'profile-info'}
   %tr{:id => 'some-row'} 
```

在你的 CSS 文件中：

```
.nonvisible_fupper { display:none; } 
```

# android - Android 电池小部件有时会更新

> ID：10163557
> 
> 赞同：0
> 
> 时间：2012-04-15T15:52:51.457
> 
> 标签：android, widget, power-management

我正在尝试制作一个 Android 电池小部件。问题是有时它会更新，但有时不会。

我必须重新启动手机才能让它再次工作——或者从屏幕上删除它并再次在屏幕上创建它。

我的问题可能是什么？

这是我的代码..这是我唯一的课程。

```
public class BatteryWidgetProvider extends AppWidgetProvider
{
    private RemoteViews views;
    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) 
    {

    context.getApplicationContext().registerReceiver(this, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
    ComponentName name = new ComponentName(context, BatteryWidgetProvider.class);
    appWidgetManager.updateAppWidget(name, this.views);
    super.onUpdate(context, appWidgetManager, appWidgetIds);
}

@Override
public void onReceive(Context context, Intent intent) 
{
    String action = intent.getAction();
    if(action.equals(intent.ACTION_BATTERY_CHANGED))
    {
        Integer level = intent.getIntExtra("level", -1);

        this.views.setTextViewText(R.id.batter_level, level.toString() + "%");
        ComponentName name = new ComponentName(context, BatteryWidgetProvider.class);
        AppWidgetManager.getInstance(context).updateAppWidget(name, this.views);
    }
    super.onReceive(context, intent);
} 
```

我的清单文件看起来像这样..

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver  android:name=".BatteryWidgetProvider">
        <intent-filter >
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
        </intent-filter>
        <meta-data 
            android:name="android.appwidget.provider"
            android:resource="@xml/appwidget_info"/>   
    </receiver>
</application> 
```

这是我的信息文件...

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minHeight="72dp"
    android:minWidth="144dp"
    android:updatePeriodMillis="0" >
</appwidget-provider> 
```

错误....

```
java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000000 (has extras) } in com.batterywidget.BatteryWidgetProvider@4a38e3f0
at android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:906)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4633)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.batterywidget.BatteryWidgetProvider.onReceive(BatteryWidgetProvider.java:72)
at android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:893) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:07:29.083

看着这个：

```
Caused by: java.lang.NullPointerException
at com.batterywidget.BatteryWidgetProvider.onReceive(BatteryWidgetProvider.java:72) 
```

这意味着您在 BatteryWidgetProvider 的第 72 行中有一个异常。您可以查找该行并查看您在那里引用的哪些对象可能为空？

# eclipse - App Engine 预览在 Eclipse 中不起作用

> ID：10163559
> 
> 赞同：2
> 
> 时间：2012-04-15T15:53:10.250
> 
> 标签：eclipse, google-app-engine, servlets, jetty

码头打开，但它显示。

```
HTTP ERROR: 503

Problem accessing /. Reason:

SERVICE_UNAVAILABLE 
```

从我的 Eclipse 控制台

> 2012 年 4 月 15 日下午 3:50:38 com.google.apphosting.utils.jetty.JettyLogger 信息信息：通过 com.google.apphosting.utils.jetty.JettyLogger 登录到 JettyLogger(null) 2012 年 4 月 15 日 3:50： 38 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml INFO：成功处理 C:\Gowtham\eclipse\JS\war\WEB-INF/appengine-web.xml 2012 年 4 月 15 日下午 3:50:38 com. google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml 警告：appengine-web.xml 不包含元素。这将在未来的版本中成为必需。请参阅[http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests](http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests)了解更多信息。您可能希望启用并发请求。2012 年 4 月 15 日下午 3:50:38 com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml 信息：成功处理 C:\Gowtham\eclipse\JS\war\WEB-INF/web.xml 2012 年 4 月 15 日 3： 50:38 PM com.google.apphosting.utils.jetty.JettyLogger 警告警告：上下文 com.google.appengine.tools.development.DevAppEngineWebAppContext@18706f6{/,C:\Gowtham\eclipse\JS\war} java 启动失败.lang.IllegalStateException：没有这样的 servlet：org.mortbay.jetty.servlet.ServletHandler.updateMappings(ServletHandler.java:1026) 的 /script/thejs.js org.mortbay.jetty.servlet.ServletHandler.setServletMappings(ServletHandler.java :1110) 在 org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:306) 在 org.mortbay.jetty.webapp。[http://localhost:8888/](http://localhost:8888/) Apr 15, 2012 3:50:38 PM com.google.appengine.tools.development.DevAppServerImpl 开始信息：管理控制台在[http://localhost:8888/_ah/admin运行](http://localhost:8888/_ah/admin)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:43:44.480

看来您的`web.xml`文件中有错误。开发服务器认为`/script/thejs.js`是一个 servlet。

你是如何映射你的 servlet 的`web.xml`？请告诉我们这个文件的内容。

# python - 在 Python 中绘制网络/关系/连接类型图

> ID：10163560
> 
> 赞同：4
> 
> 时间：2012-04-15T15:53:11.127
> 
> 标签：python, plot, matplotlib

有谁知道一个库来绘制各种项目之间的关系以显示它们在 Python 中的相互联系？

我什至现在都不知道这些图表叫什么。最好的例子是[Visual Thesaurus](http://www.visualthesaurus.com/)之类的东西。

我对 Matplotlib 有点熟悉，但还没有见过这种类型的情节。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T16:01:26.250

我认为[networkx](http://networkx.lanl.gov/)会适合你的目的。Networkx 使用[matplotlib](http://networkx.lanl.gov/reference/drawing.html)可视化生成的图形。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T16:13:53.307

我建议使用库[pydot](http://code.google.com/p/pydot/)：它提供了 GraphViz 的接口，你可以用它来表示各种关系。最重要的是，它在大型社区中非常标准，并且被很多人使用。

我建议你看看你可以用[GraphViz](http://www.graphviz.org/Gallery.php)做什么，如果这符合你的需要，那就去吧！

# javascript - 如何将图像位置放在 django 模板中的 javascript 代码中

> ID：10163564
> 
> 赞同：0
> 
> 时间：2012-04-15T15:53:13.387
> 
> 标签：javascript, django, image, templates

我正在使用 javascript 文件来显示一些按钮。当用户单击按钮时，当前按钮的图像被另一个图像替换（从而产生新按钮代替旧按钮出现的效果），反之亦然。我创建了`<img>`一个 id='imgbutton' 的元素，并使用这些元素`attr('src',newimage)`来显示这些按钮。

我将javascript文件放在`{{MEDIA_URL}}/js`目录中，以便可以使用将文件添加到模板中

```
<script type="text/javascript"  src="{{MEDIA_URL}}/js/myscript.js" ></script> 
```

在javascript代码（jquery 1.7.1）中，我正在设置这样的图像

```
..
var btnimg=$('#imgbutton');
btnimg.attr('src','{{MEDIA_URL}}/img/NewImage.png'); 
```

这会导致`404 error`在 javascript 控制台中显示一个占位符而不是图像。在 django 模板中，`{{MEDIA_URL}}/img/OldImage.png`正确显示..只有在 javascript 中才会出现问题..有人可以帮我弄清楚为什么会发生这种情况吗？我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:09:56.560

你的问题是 JS 文件没有被 Django 的模板引擎处理。当我需要这样做时，我通常会在页面中直接放一小部分 JS 来设置变量值，然后由加载`<link>`标签的 JS 文件引用。

**更新：**

是的，你想做这样的事情：

```
<script>
// first set the value you will be using.
var MEDIA_URL = "{{MEDIA_URL}}"; // and anything else you need to set
</script>

<script type="text/javascript"  src="{{MEDIA_URL}}/js/myscript.js" ></script> 
```

*现在您可以在*JS 文件中引用该全局值，例如：

```
btnimg.attr('src',MEDIA_URL+'/img/NewImage.png'); 
```

如果有很多这些东西，一个包含所有这些东西的数组或对象可以让你的命名空间保持整洁。

# objective-c - UI状态栏淡入淡出时间iOS

> ID：10163565
> 
> 赞同：2
> 
> 时间：2012-04-15T15:53:21.827
> 
> 标签：objective-c, ios, animation, fade, uistatusbar

我有一个应用程序，您可以在其中点击 UIImageView，然后按钮淡出并重新出现。状态栏的作用相同，只是它只是快速进入。有没有办法让它淡入以匹配我的按钮时间？这是我的 .m 文件，其中包含按钮和状态栏的代码。

.m

```
- (void)viewDidLoad
{
////Loads UIImageView from URL
todaysWallpaper.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.inkdryercreative.com/daily/archive/mondays/images/062-mondays-960x640-A.jpg"]]]; 

_buttonsVisible = false;

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

  UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc]    initWithTarget:self action:@selector(imageTapped:)];
  [todaysWallpaper addGestureRecognizer:tapGesture];
}

- (void)viewWillAppear:(BOOL)animated 
{
[super viewWillAppear:animated];

[[UIApplication sharedApplication] setStatusBarHidden:YES];
}

- (void)imageTapped:(UIGestureRecognizer *)sender {
float targetA = 0;
if(_buttonsVisible == NO) {
 targetA =1.0;
 } else {
[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(imageTapped:)  object:nil];
  [[UIApplication sharedApplication] setStatusBarHidden:YES];
  [[UIApplication sharedApplication]setStatusBarStyle:UIStatusBarStyleBlackTranslucent];
  [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade];

}

[UIView beginAnimations:@"MoveAndStrech" context:nil];
[UIView setAnimationDuration:1];
[UIView setAnimationBeginsFromCurrentState:YES];
homeButton.alpha = targetA;
infoButton.alpha = targetA;
saveButton.alpha = targetA;
tweetButton.alpha = targetA;
[UIView commitAnimations];
_buttonsVisible = !_buttonsVisible;

if(_buttonsVisible) {
[self performSelector:@selector(imageTapped:) withObject:nil afterDelay:100.0];
  [[UIApplication sharedApplication] setStatusBarHidden:NO ];

  [[UIApplication sharedApplication]setStatusBarStyle:UIStatusBarStyleBlackTranslucent];
}
} 
```

任何帮助或指导将不胜感激。我的客户希望在星期二之前完成这项工作，或者找其他人来完成这项工作。我已经把我的生命投入到这个应用程序中，所以如果你能帮助分享知识，请。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T16:34:28.797

您可以将其包装在动画块中。只需使用该`setStatusBarHidden:`方法而不是 `setStatusBarHidden:withAnimation:`

```
[UIView beginAnimations:@"foo" context:nil];
[UIView setAnimationDuration:1.0];
[[UIApplication sharedApplication] setStatusBarHidden:YES];
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-18T10:44:20.547

尝试使用以下代码设置状态栏：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES
                                        withAnimation:UIStatusBarAnimationFade];

```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T12:41:10.130

你可以试试这个，它是所有 iOS 设备的单行代码：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES
                                        withAnimation:UIStatusBarAnimationFade];

```

希望能帮助到你..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T16:11:27.543

您可以做的是创建自己的 NavigationBar（不要使用 UINavigationController 的 UINavigationBar） - 然后您可以自定义它并轻松为其分配动画属性，例如 alpha。

# verilog - 关于简单 FSM 的输出逻辑

> ID：10163568
> 
> 赞同：1
> 
> 时间：2012-04-15T15:53:41.207
> 
> 标签：verilog

下面是一个关于带同步使能的 D FF 的简单 Verilog 示例

```
module d-ff-en_2seg 
(
input wire clk,reset, 
input wire en,
input wire d, 
output reg q
); 
    // signal declaration 
    IU reg r_reg, r_next;
    // body
    // D FF
    always @(posedge clk, posedge reset)
        if (reset)
            r_reg <= 1'bO;
        else 
            r_reg <= r_next;
    // next-state logic 
    always @* 
        if (en)
            r_next = d; 
        else 
            r_next = r_reg;
    // output logic 
    always @*
        q = r_reg; 
endmodule 
```

我的问题是为什么我们需要这里的输出逻辑？我们可以忽略它吗？只需将 r_reg 定义为输出 reg？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:50:57.137

在 Verilog 中，使用 DFF 作为输出是完全合法且常见的。

在 VHDL 中，从输出信号中读取是非法的。 [http://vhdl.renerta.com/mobile/source/vhd00051.htm](http://vhdl.renerta.com/mobile/source/vhd00051.htm)

因此，在这种情况下，行“r_next = r_reg;” 如果您将此行转换为 VHDL 并且 r_reg 是输出，则可能是非法的。

出于这个原因，希望对 verilog 和 VHDL 保持一致的 RTL 编码指南将坚持将所有输出分配在单独的“输出逻辑”部分中。如果您最终想用 VHDL 重写代码，这将有所帮助（有点）。

# ruby-on-rails-3.1 - Rails 3.1+，路线 - 无法使用参数添加新路线

> ID：10163569
> 
> 赞同：0
> 
> 时间：2012-04-15T15:53:52.993
> 
> 标签：ruby-on-rails-3.1, parameters, routes

我使用这条路线显示注册表单：

```
match 'signup' => 'users#new', :as => :signup 
```

这个工作正常。

现在我想添加`signup`链接也访问代码：

```
match '/signup/:access_code' => 'users#new', :as => :signup 
```

但是这条路线已经行不通了，我得到了错误

```
Routing Error

No route matches {:controller=>"users", :action=>"new"} 
```

是什么导致了这个错误？它只是向现有路由添加一个参数......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:04:59.217

因此，一个可行的解决方案似乎是：

> 匹配 '/signup(/: access_code)' => 'users#new', :as => :signup

# iphone - 重置 UIStepper

> ID：10163575
> 
> 赞同：0
> 
> 时间：2012-04-15T15:54:33.110
> 
> 标签：iphone, xcode, uilabel, uistepper

我有一个通过 IB 设置的 UIStepper。在我看来，它会增加和减少“标签编号”。我正在尝试制作一个按钮，当用户按下该按钮时，会将数字和 UIStepper 重置为零。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T16:32:20.670

你只需要将它添加到你的按钮方法

```
yourStepper.value=0;
yourlabel.text=@"0"; 
```

# php - 如何使用正则表达式从 HTML 中去除属性（样式属性除外）？

> ID：10163582
> 
> 赞同：1
> 
> 时间：2012-04-15T15:55:45.110
> 
> 标签：php, html, regex

原始代码：

```
<div style="height:100px;" id="main" >
<a href="133"></a>
<blockquote color="123"> 
```

更换后

```
<div style="height:100px;" >
<a></a>
<blockquote> 
```

我尝试了正则表达式，但它不起作用

```
preg_replace('#<(div|span|a|img|ul|li|blockquote).*( style=".*")?(.*)>#Us', '<$1$2>', $content); 
```

谁能帮我解决这个问题？谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:29:54.920

不推荐正则表达式，但这可能有效。

编辑：固定选项组，在错误的地方。

测试用例：http: [//ideone.com/vRk1u](http://ideone.com/vRk1u)

```
'~
( < (?:div|span|a|img|ul|li|blockquote) (?=\s) )         # 1
   (?= 
     (?:
        (?:[^>"\']|"[^"]*"|\'[^\']*\')*? 
        (                                                      # 2
          \s  style \s*=
          (?: (?>  \s* ([\'"]) \s* (?:(?!\g{-1}) .)* \s* \g{-1} )  #3
            | (?>  (?!\s*[\'"]) \s* [^\s>]* (?=\s|>) )
          )
        )
     )?
   )
  \s* (?:".*?"|\'.*?\'|[^>]*?)+ 
( /?> )                                                  # 4
~xs' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:22:33.900

我现在没有可用的 PHP，所以我会为你写一个关于 Javascript 的正则表达式，你可以轻松地移植它。（我将使用 RegExp 对象，因此已经为您引用了正则表达式）

```
'<div style="height:100px;" id="main" >'.replace(new RegExp('<([a-zA-Z0-9]*)(.*([ \t\r\n]style[ \t\r\n]*=[ \t\r\n]*(("[^"]*")|(\'[^\']*\'))))*[^>]*>'), '<$1$3>')
 == <div style="height:100px;">

'<div style=\'height:100px;\' id="main" >'.replace(new RegExp('<([a-zA-Z0-9]*)(.*([ \t\r\n]style[ \t\r\n]*=[ \t\r\n]*(("[^"]*")|(\'[^\']*\'))))*[^>]*>'), '<$1$3>')
 == <div style='height:100px;'>

'<div style="height:100px;">'.replace(new RegExp('<([a-zA-Z0-9]*)(.*([ \t\r\n]style[ \t\r\n]*=[ \t\r\n]*(("[^"]*")|(\'[^\']*\'))))*[^>]*>'), '<$1$3>')
 == <div style="height:100px;">

'<div dfg dfg fdg>'.replace(new RegExp('<([a-zA-Z0-9]*)(.*([ \t\r\n]style[ \t\r\n]*=[ \t\r\n]*(("[^"]*")|(\'[^\']*\'))))*[^>]*>'), '<$1$3>')
 == <div>

'<div>'.replace(new RegExp('<([a-zA-Z0-9]*)(.*([ \t\r\n]style[ \t\r\n]*=[ \t\r\n]*(("[^"]*")|(\'[^\']*\'))))*[^>]*>'), '<$1$3>')
 == <div> 
```

所以它是一个考虑到大多数可能情况的正则表达式。

这回答了你的问题了吗？

（顺便说一句，如果 php 的正则表达式支持它并且它在多行模式下工作，你可以用空格简写替换那些 [ \t\r\n]）

# c++ - 非 STL 函数对象回调用法

> ID：10163584
> 
> 赞同：1
> 
> 时间：2012-04-15T15:55:54.357
> 
> 标签：c++, function, object, callback

在网上我找到了一些关于函数对象（被调用者）的例子，但他们没有演示如何将它们用作回调函数（调用它们，调用者）的参数，而只是使用 sort 或 for_each 时的使用方式。因此，我自己做了一个：

```
class CBase
{
public:
 virtual int operator()(int a, int b)
 {
  return 10;
 }
};

class CSmaller: public CBase
{
public:
 int operator()(int a, int b)
 {
  return a < b;
 }

 int Compute(int a, int b)
 {
  return a < b;
 }
};

class CLarger: public CBase
{
public:
 int operator()(int a, int b)
 {
  return a > b;
 }

 int Compute(int a, int b)
 {
  return a > b;
 }
};

int caller(CBase &f, int x0, int x1) 
{
 return f(x0,x1);
}

int main()
{
 CLarger callee1; /*this callee is being called by caller*/
 CSmaller callee2; /*idem*/
 int q=caller(callee1,0,1);
 int z=caller(callee2,0,1);
 printf("%d\n",q);
 printf("%d\n",z);
} 
```

那些 STL 函数对象（如更大的 Less）是否以这种方式实现（因为它通常只以通用名称/类“模板”开头）？即，它们（CLarger 和 CSmaller）是否有一个关系/公共锚点，每个类都扩展了一个虚函数，或者它们也可以是一些通用函数对象（只要它们用两个参数实现 () 运算符）？像这样（虽然没有测试）：

```
template<class F>
float integrate(const F &f,float x0,float x1) 
{
 ..f(x)..;
}

float derive(const F &f,float x0,float x1) 
{
 ..f(x)..;
}

class CSquare 
{
public:
 float operator()(float x)
 {
  return x*x;
 }
};

class CTwoX 
{
public:
 float operator()(float x)
 {
  return 2*x;
 }
}; 
```

如果这是正确的方式，这些不相关的类将如何以非 STL 方式实现？我知道使用模板并保持底层机制（以这种方式它们是相关的），但只有类型不同。但是这样的关系（即同一个锚点）是必需的吗？

在函数对象中使用重载 () 是否只是为了方便？因为我也可以使用 CLarger 的 Compute。例如，我还可以将那些分离的类（它们使用 virtual 来实现不同的功能）合并到一个类 CCompute 中，其中成员为 Larger 和 Smaller。顺便说一句，我想我也可以将派生和集成放在一个类中。我的问题是否有意义，或者我的想法是否与 STL 理论相矛盾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:03:18.523

您可以采用任何一种方式：继承或模板。不过，两者都不是要求。STL 函数是模板化的，这意味着只要表达式`f(x)`按要求工作，您就可以传递任何东西`f`（例如函数指针、函子——您称之为被调用者）。

注意：`f(x)`只是一个示例，参数的确切数量取决于所使用的特定 STL 函数。

继承的优点是可以将常见行为封装在基类中，并在运行时根据实际类型执行。

模板的优点是您可以将它们与任何类型一起使用（基于模板参数）——因此，虽然您可以`operator()`在每个类中重载，但创建一个可以处理每种类型的模板类可能会更容易（如果某些类型需要特殊处理）

请注意，当您使用模板时，它会为每个实际模板参数类型组合创建不同的类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:07:07.730

接受函数参数（例如，谓词）的 STL 算法通常不会关心参数是如何创建的，只要它匹配“类似函数”的接口即可；它需要做的就是通过模板参数推导来推导类型

```
template< typename FwdIter, typename Pred >
FwdIter find_if( FwdIter first, FwdIter last, Pred pred );

/* .. etc ... */

bool is_equal_to_one(int n) { return n == 1; }

int main()
{
    std::vector<int> foo;
    std::vector<int>::const_iterator iter;
    iter = std::find_if( foo.begin(), foo.end(), is_equal_to_one );
} 
```

对于要实现的类型，有太多不同的可能方式`Pred`可以以任何其他方式实现（函数、仿函数、std::function ...）。find_if 函数将依赖于`Pred`与接口匹配的任何东西`bool (*FwdIt)`

# jquery - 如何返回将通过几个函数的结果解决的承诺？

> ID：10163591
> 
> 赞同：0
> 
> 时间：2012-04-15T15:57:33.423
> 
> 标签：jquery, jquery-deferred

我正在开发一个 jQuery 插件，它会根据用户的浏览器语言自动翻译页面上的元素。翻译将存储在 .json 文件中。

当您调用插件时，您传递一个包名称（或它们的数组），然后它将尝试以下列方式加载语言文件：

*   如果浏览器的语言很简单，例如`'en'`你只指定了一个包，它会尝试加载以下内容：`packageName-en.json`
*   如果浏览器的语言是组合的，例如“en-US”，它将尝试加载与以前相同的内容，但带有：`packageName-en.json` **AND** `packageName-en-US.json`
*   如果指示了多个包，它将尝试遵循每个包的前两个路径之一。

所以，在插件中我有这个：

```
$.fn.Translator = function(pkg, options){
    Translator.initialize(pkg, options).done(function(){
        return this.each(Translator.translate);
     });            
}; 
```

所以，在我的初始化函数的某个地方，我有这个：

```
loadLanguages : function(){
    $.each(self.options.packages,function(i, pkg){

    });
} 
```

它将调用此函数：

```
getLanguage : function(pkg, language){
    var self = this, url;
    if (self.options.path)
        url = self.options.path + '/';
    url += [pkg, language].join('-');

    return $.ajax ({
        url : url,
        dataType : "json",
        cache : self.options.cache
    });
} 
```

问题是，由于该函数可能会被多次调用，所以我不知道如何`initialize`返回一个承诺，一旦所有函数都被调用，该承诺就会被解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:40:44.233

I know you accepted an answer already but there is a much simpler way: use [$.when](http://api.jquery.com/jQuery.when/).

```
function loadLanguages () {
    return $.when.apply( $, $.map( self.options.packages, function( pkg ) {
        return getLanguage(pkg, language);
    }) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:02:33.020

要解决此问题，您可以创建一个虚拟 Deferrer (baseDfr) 并将虚拟作为`initialize()`. 这里的想法是`baseDfr.resolve()`在所有`getLanguage()`调用完成后调用。我们使用计数器跟踪`getLanguage()`完成的调用次数。当计数器达到 0 时，我们调用`baseDfr.resolve()`. 我们知道何时使用返回的 deferrer by 上的or方法`getLanguage()`完成调用。`then()``done()``$.ajax`

The code to solve this can be found below. Also, a working example (on some divs) can be found here: [http://jsfiddle.net/c5NBr/](http://jsfiddle.net/c5NBr/). Open your console to see the messages appear in correct order.

```
var packages = [];
var count = 0;
var baseDfr = $.Deferred();
var language = "en";

function resolveFunction () {
    // By using this approach it is possible to pass a 
    // parameter to this resolve function.
    return function(){
        if ( !(--count) ) {
            // Until count is 0, we won't resolve the base
            // deferrer object.
            // As long as this isn't called, the function
            // done() of initialize won't be called either.
            baseDfr.resolve();
        }     
    };
}

function getLanguage (pkg, language){
    var self = this, url;
    if (self.options.path)
        url = self.options.path + '/';
    url += [pkg, language].join('-');

    return $.ajax ({
        url : url,
        dataType : "json",
        cache : self.options.cache
    }).promise();
}

function loadLanguages () {
    $.each(self.options.packages,function(i, pkg){
        getLanguage(pkg, language).then(resolveFunction());
    });

    return baseDfr.promise();                
}

function initialize(options) {
    packages = options.packages;
    count = options.packages.length;    

    return loadLanguages();
}

var options =  {
    packages : $('div')          
};

initialize(options).done(function(){
    // This will only be called when baseDfr.resolve() is called.
    console.log("Fired all getLanguage().");
}); 
```

# php - 尝试使用 PHP 格式化 json 数据以与 Polymaps 一起使用

> ID：10163595
> 
> 赞同：0
> 
> 时间：2012-04-15T15:58:31.317
> 
> 标签：php, json

好的，我正在尝试使用 php 来编码一个 json 文件，我随后用它来使用 Polymaps 服务绘制地图。

我在从 Instagram API 编码我的 json 时遇到了麻烦——我可以做到，但我需要以这种特定方式嵌套结构。我的代码现在以这种格式对其进行编码：

```
[
 {
  "title":"some value",
  "src":"some value",
  "lat":"some value",
  "lon":"some value"
},
... 
```

等等等等。我需要格式来匹配更像这样的东西：

```
{
"type":"FeatureCollection",
"features":[

  {
     "type":"Feature",
     "geometry":{
        "coordinates":[
           -94.34885,
           39.35757
        ],
        "type":"Point"
     },
     "properties":{
        "latitude":39.35757,
        "title":"Kearney",
        "id":919,
        "description":"I REALLY need new #converse, lol. I've had these for three years. So #destroyed ! :( Oh well. Can't wait to get a new pair and put my #rainbow laces through. #gay #gaypride #bi #proud #pride #colors #shoes #allstar #supporting ",
        "longitude":-94.34885,
        "user":"trena1echo5",
        "image":"http://images.instagram.com/media/2011/09/09/ddeb9bb508c94f2b8ff848a2d2cd3ece_7.jpg",
        "instagram_id":211443415
     }
  },
  {
     "type":"Feature",
     "geometry":{
        "coordinates":[
           -0.09402781,
           51.51512
        ],
        "type":"Point"
     },
     "properties":{
        "latitude":51.51512,
        "title":"City Of London",
        "id":918,
        "description":"#destroyed",
        "longitude":-0.09402781,
        "user":"axxoul",
        "image":"http://distillery.s3.amazonaws.com/media/2011/09/09/ffda47fb97924a41bc36b0b024fcdfad_7.jpg",
        "instagram_id":211074717
     }
  }, 
```

...具有嵌套结构。我让 jquery 从 json 文件中读取数据，并编写了 php 脚本来制作 json ......这对我来说是最后一块拼图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:09:52.067

您可以随时使用 PHP 的[json_decode()](http://php.net/manual/en/function.json-decode.php)函数将 JSON 转换为 PHP 数组，而不是尝试使用 PHP 操作 JSON 数据。

一旦您的数据以更易于处理的格式处理，您就可以使用 PHP 的[数组函数](http://php.net/manual/en/language.types.array.php)对数据进行所需的所有更改，一旦完成，您可以使用 PHP 的[json_encode](http://php.net/manual/en/function.json-encode.php)将其编码回 JSON 。

# database - 具有大量数据的数据库性能

> ID：10163599
> 
> 赞同：2
> 
> 时间：2012-04-15T15:59:16.363
> 
> 标签：database, performance, normalization

我不是在问索引或分区，我问的是一个选择，在添加大号之间。列或将数据添加为行。说明：我们目前有一个请求，要求设计一个处理多个属性的设计，某些特定产品的值可能达到 1 亿条记录，每个产品可能有多个属性，因此 ProductProperties 表可能达到数十亿。有些人想到在ProductProperties表中添加属性作为列，Property1和value1，Property2和value2等......如果产品不包含该属性的值，则该属性的相关字段将为空。他们还将添加大约 80-100 个属性，以便能够动态覆盖广泛的属性。建筑师拒绝了这种方法，因为这不是一个好的设计。谁能告诉我如何达到良好的设计和良好的性能。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T16:56:33.473

这个问题以多种形式出现。在您的情况下，您似乎拥有一系列产品，每个产品可能具有不同的属性集。我认为您需要一种以可扩展的方式存储这些属性的方法，以便您可以将新产品添加到系统中。

**方法 1：行上的通用字段 + 补充元数据**

您建议的第一种方法可以通过将产品属性元数据规范化到自己的表中来稍微修改：

*   使用一些通用字段（Code1、Code2、IntVal1、IntVal2、FloatVal1 ...）构建您的产品表

*   构建一组补充的父子引用表`ProductType`和`ProductAttribute`（或一些类似的），其中包含有关产品表中哪些列包含哪些属性的指南。

*   构建功能以将其解释为应用程序的数据访问层。

这样做的主要优点是结构查询效率高。缺点是`product`表格的内容在没有补充元数据的情况下是不透明的。然而，其他方法的低效率和复杂性通常远远超过这一缺点。

如果不同产品类型的数量相对较少，您还可以使用元数据在产品表上生成一个视图或一系列视图，以解释元数据。这减轻了很多不透明的问题。

另一个优点是对产品具有多个过滤条件的查询不必针对非常大的子表执行多个连接。如果表上的各个字段可以为空，则每个字段的开销相对较小（通常每列一个字节，具体取决于平台）。未使用的字段将浪费记录上的大量空间。

**方法二：实体-属性-值**

这通常被提议作为此类问题的解决方案。在这种情况下，您拥有父子关系中的表和一些参考数据，这些参考数据根据产品类型筛选产品属性类型`Product`。`ProductAttribute`

这种方法在概念上看起来很优雅并且是可扩展的，但查询起来很繁琐且效率低下，并且占用了相当多的磁盘空间。可以在各种平台上使用一些数据库设计技巧来缓解性能问题。您尚未指定您正在使用哪个 DBMS 平台，因此很难为您指明正确的方向。EAV结构的主要优点和缺点是：

*   无限灵活，无需更改数据库架构 (+)

*   查询效率低下且繁琐，特别是如果您想按多个属性进行过滤 (-)

*   更多的磁盘空间使用。(-)

通常不推荐使用 EAV 结构，除非您有令人信服的要求。

**方法 3：XML 字段**

套用 Fredrick Lundh 的话说：[“现在你有两个问题”](http://regex.info/blog/2006-09-15/247)。XML 字段是无限可扩展的——您可以将任何您想要的内容放入其中，但除了您的应用程序之外，它们对任何东西都是不透明的，而且查询起来既缓慢又繁琐。从 SQL 查询中的 XML 字段中获取数据比存储在列上的数据要多得多。

通常，在数据库中使用 XML 字段来存储本质上不是 XML 文档的东西是一个坏主意。许多人写过关于在数据库中滥用 XML 字段的不明智的做法。我构建 ETL 流程以从 XML 字段中提取数据的个人经验使我同意这一点。除非您有令人信服的理由，否则最好避免。

**结论**

方法 1 类似于您最初提出的方法，但将列元数据移到其自己的结构中。尽管它看起来并不优雅，但它几乎是所有情况下的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:15:43.077

现有的答案是正确且非常好的。这是一个新的想法：显然，将设计拆分为两个表（Products、ProductAttributeValues）是最规范和正确的方法。

**但是性能可以胜过架构的纯度。**唯一重要的设计目标是将整个解决方案的成本降至最低。别的什么都不重要。如果非规范化模式提高了足够的性能，您可以在其他地方节省性能工作，或者降低硬件成本，那么这是正确的做法。**只有 TCO 很重要。就这么简单。**

非规范化，如果它甚至在长期内节省了您的工作，或者如果它节省了硬件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:48:37.903

我会创建两个表：`Product`和`ProductProperties`.

`Product`将包含单个产品的基本属性。诸如 , 等项目之间需要和常见的`name`那种`weight`东西`selling_quantity`。

`ProductProperties`将包含其他所有内容。规范化属性的属性，命名它们并创建你的表。您只需要一个 FK`Product`就可以开始了。如果大多数属性为空，则表之间的 1:n 关系比拥有 80 个或更多属性的单个表要好得多（我怀疑每个产品都需要 80-100 个属性，但我不知道您列出的是哪种产品） .

我没有任何使用数十亿行的第一手经验，但是数据库应该被规范化，而不是用空列填充。这个答案似乎支持我的想法：[Optimal database structure - 'wider' table with empty fields or more numbers?](https://stackoverflow.com/questions/4286698/optimal-database-structure-wider-table-with-empty-fields-or-greater-number-o)

我认为您的第一个问题出现在您的`ProductProperties`表的行数超出`unsigned bigint`处理能力时。这可能需要一段时间，我希望...

# jquery - 持续悬停时更新 div 的“left”属性

> ID：10163600
> 
> 赞同：0
> 
> 时间：2012-04-15T15:59:20.933
> 
> 标签：jquery, ajax, hover

我有一个问题：我有一个内联导航菜单：

```
<nav>
    <div id="highlight"></div>
    <ul id="fs_nav">
         <li class="_nav"><a href="#" title="Home" alt="Home">Home</a></li>
         <li class="_nav second"><a href="#" title="About" alt="About">About Us</a></li>
         <li class="_nav second"><a href="#" title="News" alt="News">News</a></li>
         <li class="_nav second"><a href="#" title="Contacts" alt="Contacts">Contacts</a></li>
         <li class="_nav second"><a href="#" title="Projects" alt="Projects">Projects</a></li>
         <li class="_nav second"><a href="#" title="Donations" alt="Donations">Donations</a></li>
     </ul>
</nav> 
```

“highlight” div 是一个绝对定位的 div，它必须突出显示水平移动的导航的指向 li 元素。

现在我想跟随鼠标位置移动它。

我编码了这个

```
// JavaScript Document
$(function() {
// Highlight Moving
var interval;
    $('nav').hover(function(e){
    interval = setInterval(UpdateX(e),100);
    },
    function(){
        clearInterval(interval);}
       );
    }
); 
```

UpdateX 函数在哪里：

```
function UpdateX(e) {
var width = $('#highlight').width();
var left = e.pageX;
$('#highlight').animate({
    left:left - (width/2)
}
);
} 
```

但这仅适用一次，当您将鼠标放在“导航”内时。如果要更新 div 位置，则必须将指针移出“导航”并重新悬停在其上。

我该如何解决？希望已经清楚...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:12:03.833

我在这里有一个这个功能的例子：http: [//code.coloresefimeros.com/slide-hover.html](http://code.coloresefimeros.com/slide-hover.html)

看看示例代码，它会帮助你（涉及的 JS 文件是[http://code.coloresefimeros.com/js/slide-hover.js](http://code.coloresefimeros.com/js/slide-hover.js)）

# facebook - facebook：为什么用户在通过 API 被邀请参加活动时没有收到通知？

> ID：10163602
> 
> 赞同：0
> 
> 时间：2012-04-15T15:59:31.223
> 
> 标签：facebook, api, facebook-graph-api

我正在通过 Graph API 邀请用户参加我的活动：http: [//developers.facebook.com/docs/reference/api/event/](http://developers.facebook.com/docs/reference/api/event/)

不幸的是，用户没有收到通知。该事件显示在他们的事件列表中。

任何想法为什么不生成通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:54:47.817

我很确定，当您使用这样的 api 邀请用户时，用户获得的通知是通过*Events*的书签计数。

此外，您很高兴链接到文档，但它对理解您的问题并没有太大帮助......仅包含您正在使用的代码会更有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T08:10:14.337

他们会在新闻提要中收到通知，但不会受到邀请。

# haskell - 如何减少 .cabal 文件的构建依赖字段中的重复？

> ID：10163604
> 
> 赞同：59
> 
> 时间：2012-04-15T15:59:40.413
> 
> 标签：haskell, cabal

这是一个 .cabal 文件：

```
Name:                myprogram
Version:             0.1
-- blah blah blah
Cabal-version:       >=1.9.2

Executable myprogram
  HS-source-dirs:       src
  Main-is:              Main.hs
  Build-depends:        attoparsec == 0.10.*,
                        base == 4.3.*,
                        -- long long list of packages

Test-Suite test
  HS-source-dirs:       test, src
  Type:                 exitcode-stdio-1.0
  Main-is:              Main.hs
  Build-depends:        attoparsec == 0.10.*,
                        base == 4.3.*,
                        -- long long list of packages
                        QuickCheck == 2.4.* 
```

有什么方法可以用“与可执行文件相同，加上 QuickCheck”替换测试套件的构建依赖包的长列表？

**编辑：**版本信息。

*   阴谋集团开发 0.9
*   阴谋安装 0.10.2
*   阴谋集团图书馆 1.10.2.0
*   GHC 7.0.4
*   Haskell 平台 2011.4.0.0

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-08-19T09:19:01.263

> 有什么方法可以用“与可执行文件相同，加上 QuickCheck”替换测试套件的构建依赖包的长列表？

从来没听说过。但是，有一种方法可以只提及`build-depends`一次包列表，方法是将您的项目构建为三个目标：

1.  一个包含所有代码的库，并且需要很长的构建依赖列表。
2.  一个只包含一个文件的可执行文件，并且依赖于基础和上面的库。
3.  一个依赖于上述库的测试套件，以及您正在使用的测试包。

也许这种方法是 indygemma 的答案所建议的，但正如 Norman Ramsey 在评论中指出的那样，那里提出的阴谋集团文件不会完全实现它。这是您在 Cabal 文件中需要的要点。有关适用于我的完整示例，您可以查看[此 Cabal 文件](https://github.com/Toxaris/pts/blob/master/pts.cabal)。

```
name: my-program
version: ...

library
  hs-source-dirs: src-lib
  build-depends: base, containers, ...
  exposed-modules: My.Program.Main, ...

executable my-program
  hs-source-dirs: src-exec
  main-is: my-program.hs
  Build-depends: base, my-program

test-suite tests
  type: exitcode-stdio-1.0
  hs-source-dirs: src-test
  main-is: tests.hs
  other-modules: ...
  build-depends: base, my-program, test-framework, ... 
```

要点：

*   三个目标有三个单独的源目录。这对于阻止 GHC 在构建其他目标时重新编译库文件是必要的。

*   所有应用程序代码都在库中。可执行文件只是一个包装器，如下所示：

    ```
    import My.Program.Main (realMain)
    main = realMain 
    ```

*   该库公开了测试所需的所有模块。

最后一点突出了这种方法的缺点：您最终不得不公开内部模块。这种方法的主要好处是您在 Cabal 文件中的重复更少，也许更重要的是，在构建过程中的重复更少：库代码将只构建一次，然后链接到可执行文件和测试套件.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-09-20T16:53:03.870

由于 2.2 版 Cabal 支持通用节，要删除*构建信息*字段： [https ://cabal.readthedocs.io/en/latest/developing-packages.html#common-stanzas](https://cabal.readthedocs.io/en/latest/developing-packages.html#common-stanzas)

```
cabal-version:       2.2
name:                myprogram
version:             0.1
-- blah blah blah

common deps
  build-depends: base ^>= 4.11,
                 -- long long list of packages
  ghc-options: -Wall

library
  import: deps
  exposed-modules: Foo

test-suite tests
  import: deps
  type: exitcode-stdio-1.0
  main-is: Tests.hs
  build-depends: foo 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-08T23:02:21.710

您也可以考虑使用[hpack](https://github.com/sol/hpack#readme)而不是手动编写 .cabal 文件：

在 hpack 的 package.yaml 格式中，您可以指定一个公共字段，其条目在生成 .cabal 文件时`dependencies`添加到每个组件的字段中。`build-depends`

例如，查看 hpack 自己的[package.yaml](https://github.com/sol/hpack/blob/master/package.yaml)和生成的[hpack.cabal](https://github.com/sol/hpack/blob/master/hpack.cabal)。

要开始将 hpack 与现有包一起使用，您可以使用[hpack-convert](https://hackage.haskell.org/package/hpack-convert)从现有的 .cabal 文件生成 package.yaml。

要创建一个使用 hpack 的新包，您可以使用 stack 的`simple-hpack`模板，如下所示`stack new mypkg simple-hpack`：

如果您使用[堆栈](https://haskellstack.org)进行开发，则不必`hpack`手动调用从更新的 package.yaml 重新生成 .cabal 文件 - 堆栈会自动执行此操作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-30T02:38:41.727

没有简单的方法：

*   您可以使用[m4](http://en.wikipedia.org/wiki/M4_%28computer_language%29)并指定一次依赖项，但是每当您更改它时，您都需要通过 m4 重新处理您的 Cabal 文件。

*   您可以将要测试的代码移出到库中，然后在 Build-depends 中为测试指定库。这需要您安装一个库，即使只是为了运行测试。

*   您根本不能将测试放在 cabal 文件中。使用 ghc --make 构建它，它将引入依赖项。但是你失去了阴谋集团的整合。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-04-15T16:58:52.887

.cabal 文件有一个可选的**库部分，可以解决您的问题。**

```
name:              myprogram
version:           0.1
-- blah blah blah
cabal-version:     >=1.9.2

library
    build-depends: attoparsec == 0.10.*
                 , base == 4.3.*
                 -- long long list of packages

executable myprogram
    hs-source-dirs: src
    main-is:        Main.hs

test-suite test
    hs-source-dirs: test, src
    type:           exitcode-stdio-1.0
    main-is:        Main.hs
    build-depends:  QuickCheck == 2.4.* 
```

# c# - 在c#中逐行调试

> ID：10163605
> 
> 赞同：0
> 
> 时间：2012-04-15T16:00:03.310
> 
> 标签：c#, visual-studio, debugging

我在 microsoft 网站上发现，如果我想逐行调试程序，我需要按 F11。如果我按 F11，我将获得（以名为 Program.cs 的新形式）：

```
 using System;
     using System.Collections.Generic;
     using System.Linq;
     using System.Windows.Forms;

     namespace WindowsFormsApplication1
    {
      static class Program
     {
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();  
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }
    }
    } 
```

他们补充说“在单步执行代码时，将突出显示即将执行的行”。在我的情况下突出显示：

```
 Application.EnableVisualStyles(); 
```

我应该选择另一条线路吗？

然后，他们告诉选择停止调试以使代码编辑器可写。

如果我按照这些步骤操作，我看不到任何修改。我应该看到一个新的表格，其中计算机逐行调试吗？我应该做另一件事吗？

如果我的问题看起来很愚蠢，我很抱歉。请理解我，我是 C# 的初学者。

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:09:33.173

您的问题与具体语言（在标签中）的关系*较少*，而与环境的关系更多。`C#``Visual Studio`

您按**不是***逐行*`F11`执行，而是按*指令*执行，因为如果您像这样想象代码：

 ****`if(condition) { x++; DoSomething(); ...}`, 按下`F11`它**不会**跳过所有这条线，但会执行

*   第一的`if`
*   后`x++`
*   后`DoSomething(..)`

所有这些都在您的代码中的同一行，但对于*编译器*，这些是不同的指令。

如果你想让编辑器可编辑，按下`Pause`按钮就足够了。但是通过点击`Pause`按钮，如果在当前函数的范围内没有任何`lambda`表达式，您将能够更改刚刚的代码`Pause`，他们将此功能称为[Edit and Continue](http://msdn.microsoft.com/en-us/library/bcew296c%28v=vs.100%29.aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:57:42.707

我认为您需要一些有关调试工作原理的提示：

首先，您应该在要调试的代码中的某处插入一个简单的断点（Visual Studio 中的**F9 ）。**假设您有一个 Windows 窗体应用程序，其窗体名为 Form1。在此表单中，您有一个 Button，单击该按钮会执行某些操作。你会有这样的事情：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        doSomething(...);
    }
} 
```

要在单击按钮时停止程序的执行（这样您就可以确切地看到正在发生的事情），您可以在单击事件上放置一个断点。一旦你在那里有了断点，每次点击事件被触发时，程序都会停止，你将能够一步一步地运行它。

通过逐步运行它，您可以查看变量的状态和已存储的数据。因此，您可以找到代码开始与您预期的行为不同的地方（通常称为[错误](http://en.wikipedia.org/wiki/Software_bug)）。

为此，您可以*逐个程序*( **F10** ) 或*逐个指令*( **F11** ) 逐步执行程序。F10 将跳过函数调用，执行它们直到它们完成。F11 将进入函数调用，逐步执行其中的每条指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:07:58.340

您应该标记一个调试点（或断点），然后开始调试您的程序。在我看来，不建议开始逐行调试程序，您应该只调试引发异常的部分，并为此在程序上标记断点（如何：http: [//msdn.microsoft.com/ zh-cn/图书馆/k80ex6de.aspx](http://msdn.microsoft.com/en-us/library/k80ex6de.aspx)）。当您的程序到达该行时，如果您愿意，调试器会逐行启动详细调试。****

# javascript - javascript/svg 提交表单或输入按钮

> ID：10163606
> 
> 赞同：0
> 
> 时间：2012-04-15T16:00:37.440
> 
> 标签：javascript, html, dom, svg

有人可以指导我如何创建提交表单或输入按钮，该按钮可用于创建向屏幕添加例如形状的选项。

例如，您想要在屏幕上显示 2、3 还是 4 个形状，然后您选择并按下提交，或者只需单击输入按钮您想要的数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:22:06.577

SVG 存在于 DOM 中。您可以简单地将函数附加到使用 javascript 为任何元素创建形状。这是我放在一起的一个简单示例：http: [//jsfiddle.net/aq6nG/6/](http://jsfiddle.net/aq6nG/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:58:54.967

您不需要提交按钮，甚至不需要表单。只需包含 Raphael 库并创建任意数量的 Shapes。有很多例子在.. [http://www.irunmywebsite.com/](http://www.irunmywebsite.com/) 在 iPod 上这个阶段的基本答案，但稍后会回来查看..

# mysql - MySQL 按匹配列数排序

> ID：10163612
> 
> 赞同：0
> 
> 时间：2012-04-15T16:01:55.033
> 
> 标签：mysql, sql-order-by

我正在尝试为一个学校项目建立一个基本的约会网站，我想对我的结果进行排序。用户将输入他们的习惯和偏好，这应该与其他用户的习惯和偏好相匹配。例如，用户吸烟并且正在寻找不吸烟且没有任何反对吸烟的用户。

我看过很多示例，但似乎找不到完成此操作的正确方法。

```
user table:
user_name, etc,
user_smokes (boolean),
user_record (boolean), etc

pref table:
smokes (tiny int, for example 1 2 3 for options yes, no dont care )
record (tiny int, for example 1 2 3 for options yes, no dont care ) 
```

# mysql - 运行 PHPBB3 论坛的 CentOS 上的极高 Mysql/http 负载

> ID：10163615
> 
> 赞同：0
> 
> 时间：2012-04-15T16:02:33.783
> 
> 标签：mysql, apache, proxy, nginx, config

由于 mysql 和 http 的负载很高，我最近为我的 apache 服务器设置了一个 nginx 反向代理。我运行一个 phpbb 论坛，每天访问量约为 12k。我现在的负载大约是 40。我已经关注了 tune-primer 和 mysqltuner，但负载仍然很高。

服务器：四核英特尔，2GB 内存

这是我的配置，

```
skip-locking
bind-address=127.0.0.1
key_buffer = 200M
#query_cache_type = OFF
max_allowed_packet = 1M
table_cache = 105
#thread_cache_size 10
query_cache_size = 12M
sort_buffer_size = 1M
join_buffer_size = 3M
query_cache_min_res_unit = 50K
read_buffer_size = 256K
read_rnd_buffer_size = 2M
max_connections = 200
net_buffer_length = 2K
log-slow-queries=/var/log/mysql/log-slow-queries.log
thread_stack = 128K
thread_cache_size = 200

[isamchk]
key_buffer = 32M
sort_buffer_size = 32M

[myisamchk]
key_buffer = 8M
sort_buffer_size = 8M

[mysqlhotcopy]
interactive-timeout 
```

**Apache prefork：**

```
<IfModule prefork.c>
StartServers       2
MinSpareServers   2
MaxSpareServers   4
ServerLimit    70
MaxClients      70
MaxRequestsPerChild 700 
```

**最佳：**

```
 top - 17:57:28 up 41 days,  9:32,  4 users,  load average: 48.89, 48.98, 41.17
Tasks: 229 total,  31 running, 190 sleeping,   6 stopped,   2 zombie
Cpu(s): 87.2%us, 12.6%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.2%si,  0.0%st
Mem:   2073600k total,  1986292k used,    87308k free,    77628k buffers
Swap:  4192956k total,    22712k used,  4170244k free,  1084108k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
15783 mysql     15   0  275m  75m 4180 S 97.4  3.7   2:56.22 mysqld
15116 apache    16   0 29852  15m 4468 R  8.3  0.8   0:15.08 httpd
15910 apache    15   0 30064  14m 3404 S  8.3  0.7   0:03.46 httpd
15075 apache    16   0 30640  15m 3416 R  8.0  0.8   0:17.79 httpd
15935 apache    16   0 29724  14m 3248 R  8.0  0.7   0:01.38 httpd
15933 apache    16   0 29212  14m 3492 S  7.3  0.7   0:01.42 httpd
14889 apache    16   0 30240  15m 4008 S  7.0  0.8   0:22.37 httpd
15120 apache    16   0 29808  15m 4472 R  7.0  0.8   0:16.10 httpd
14818 apache    16   0 29736  15m 4352 R  6.4  0.8   0:27.61 httpd
14829 apache    16   0 31180  16m 4052 S  6.4  0.8   0:24.71 httpd
15080 apache    15   0 29776  14m 3924 S  6.4  0.7   0:17.10 httpd 
```

# c# - 有没有办法强制在菜单中始终显示助记符？

> ID：10163617
> 
> 赞同：1
> 
> 时间：2012-04-15T16:02:57.847
> 
> 标签：c#, winforms, contextmenustrip

我在我的程序中使用了 ContextMenuStrip，显然，除非我按 Alt，否则它不会显示它的快捷键（助记符，那些应该在 & 前面的字母下显示为下划线的快捷键），但是当我按 Alt 时，显示的 ContextMenuStrip 将隐藏因为表单的主菜单将获得焦点。因此，在上下文菜单中，永远不会看到助记符！

有没有办法强制我的程序启用这种行为？我在其他地方读到你可以在系统设置的某个地方更改它，但我需要使用我的软件的人始终看到助记符，而不需要他们全局更改他们的系统才能让我的程序正常工作！

当用户按下 Enter 时，我必须通过 KeyDown 事件处理程序中的代码显示此菜单，因为它是一个用于快速编辑由控件表示的值的弹出窗口。用户单击控件，可以快速更改其内容。当您在 ctrl+space 上弹出一个弹出窗口时，可以将其想象为在 C# 中，提示您可以在该确切位置插入可能的代码片段。因此，将其用作控件的“上下文菜单”属性或使用键盘“显示上下文菜单”按钮不适用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:51:43.253

这是一个操作系统设置：

控制面板\所有控制面板项目\轻松访问中心\使键盘更易于使用\使键盘快捷键更易于使用\在键盘快捷键和访问键下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:25:40.277

更改调用上下文菜单的方式。不要手动显示它，而是使用类似的东西：

```
textBoxSomething.ContextMenuStrip = yourContextMenuStrip; 
```

在这种情况下，如果用户右键单击文本框（或您使用的其他控件），他将获得没有助记符的菜单。但是如果他使用键盘上下文菜单按钮来显示上下文菜单，就会显示助记符。

# configuration - 如何使用 symfony2 访问控制器中的语义配置？

> ID：10163620
> 
> 赞同：6
> 
> 时间：2012-04-15T16:03:25.407
> 
> 标签：configuration, symfony

我正在关注 symfony 2 的“如何公开捆绑的语义配置”官方手册。

我有我的configuration.php

```
namespace w9\UserBundle\DependencyInjection;

use Symfony\Component\Config\Definition\Builder\TreeBuilder;
use Symfony\Component\Config\Definition\ConfigurationInterface;

class Configuration implements ConfigurationInterface
{
    /**
     * {@inheritDoc}
     */
    public function getConfigTreeBuilder()
    {
        $treeBuilder = new TreeBuilder();
        $rootNode = $treeBuilder->root('w9_user');

        $rootNode
            ->children()
                ->scalarNode('logintext')->defaultValue('Zareejstruj się')->end()
            ->end()
        ;        

        return $treeBuilder;
    }
} 
```

和 w9UserExtension.php：

```
namespace w9\UserBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;

class w9UserExtension extends Extension
{
    /**
     * {@inheritDoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');
    }
} 
```

听起来可能很傻，但我找不到方法，如何访问控制器中的 logintext 参数？

```
$logintext = $this->container->getParameter("w9_user.logintext"); 
```

不起作用。

我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T17:45:40.717

在`w9UserExtension.php`后行中`processConfiguration`添加

```
$container->setParameter('w9_user.logintext', $config['logintext']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T05:49:49.280

我想不加选择地将我**所有**的配置值添加到参数中，比如@acme，写了几十`setParameter`行也不够懒惰。

所以，我做了一个`setParameters`方法来添加到`Extension`类中。

```
/**
 * Set all leaf values of the $config array as parameters in the $container.
 *
 * For example, a config such as this for the alias w9_user :
 *
 * w9_user:
 *   logintext: "hello"
 *   cache:
 *      enabled: true
 *   things:
 *      - first
 *      - second
 *
 * would yield the following :
 *
 * getParameter('w9_user.logintext') == "hello"
 * getParameter('w9_user.cache') ---> InvalidArgumentException
 * getParameter('w9_user.cache.enabled') == true
 * getParameter('w9_user.things') == array('first', 'second')
 *
 * It will resolve `%` variables like it normally would.
 * This is simply a convenience method to add the whole array.
 *
 * @param array $config
 * @param ContainerBuilder $container
 * @param string $namespace The parameter prefix, the alias by default.
 *                          Don't use this, it's for recursion.
 */
protected function setParameters(array $config, ContainerBuilder $container,
                                 $namespace = null)
{
    $namespace = (null === $namespace) ? $this->getAlias() : $namespace;

    // Is the config array associative or empty ?
    if (array_keys($config) !== range(0, count($config) - 1)) {
        foreach ($config as $k => $v) {
            $current = $namespace . '.' . $k;
            if (is_array($v)) {
                // Another array, let's use recursion
                $this->setParameters($v, $container, $current);
            } else {
                // It's a leaf, let's add it.
                $container->setParameter($current, $v);
            }
        }
    } else {
        // It is a sequential array, let's consider it as a leaf.
        $container->setParameter($namespace, $config);
    }
} 
```

然后你可以像这样使用：

```
class w9UserExtension extends Extension
{
    /**
     * {@inheritDoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        // Add them ALL as container parameters
        $this->setParameters($config, $container);

        // ...
    }
} 
```

**警告**

如果您没有广泛记录和/或需要这样的行为，这可能是不好的*做法*，因为如果您忘记它，您可能会暴露敏感的配置信息，并通过暴露无用的配置而失去性能。

此外，它会阻止您在将配置变量添加到容器的参数包之前对其进行广泛清理。

如果您正在使用它，您可能应该使用`parameters:`而不是语义配置，除非您知道自己在做什么。

使用风险自负。

# c++ - 指向模板类的全局实例的指针作为模板参数？

> ID：10163627
> 
> 赞同：1
> 
> 时间：2012-04-15T16:04:11.780
> 
> 标签：c++, templates, global-variables, non-type

我正在尝试实现以下代码的通用版本：

```
#include <iostream>

class ContainerA
{
    public:
        ContainerA( int newData )
            : mData_(newData)
        {}
        int mData_;
};

class ContainerB
{
    public:
        ContainerB( int newData )
            : mData_(newData)
        {}
        int mData_;
};

ContainerA staticInstanceA( 3 );
ContainerB staticInstanceB( 11 );

template< ContainerA* ptrToContainer >
class WorkerOnA
{
    public:
        WorkerOnA( )
            : mPtrToContainer_(ptrToContainer)
        {}

        void operator()()
        {
            std::cout << "Data = " << mPtrToContainer_->mData_ << '\n';
        }

    private:
        ContainerA* mPtrToContainer_;
};

template< ContainerB* ptrToContainer >
class WorkerOnB
{
    public:
        WorkerOnB( )
            : mPtrToContainer_(ptrToContainer)
        {}

        void operator()()
        {
            std::cout << "Data = " << mPtrToContainer_->mData_ << '\n';
        }

    private:
        ContainerB* mPtrToContainer_;
};

int main( )
{
    WorkerOnA<&staticInstanceA> workerOnAInstance;
    WorkerOnB<&staticInstanceB> workerOnBInstance;

    workerOnAInstance();
    workerOnBInstance();

    return 0;
} 
```

我想要（如果这可能的话）是一个单一的 Worker 模板类，它可以被实例化以在任一容器上工作，例如：

```
template< ?? ptrToContainer >
class WorkerOnAnyContainer
{
    public:
        WorkerOnA( )
            : mPtrToContainer_(ptrToContainer)
        {}

        void operator()()
        {
            std::cout << "Data = " << mPtrToContainer_->mData_ << '\n';
        }

    private:
        ?? mPtrToContainer_;
}; 
```

但是，几个小时后，我仍然无法弄清楚'??'应该是什么。也许模板向导有一个想法？

**更新 1**：修复了 Workers (ptrToContainer -> mPtrToContainer_) 的 'operator()' 中的错误。对此感到抱歉。

**更新 2**：我得到了一些工作，但如果有人有更好的主意，我仍然会很好奇。例如，有一个模板参数会很好。有谁知道“模板模板参数”在这种情况下是否有帮助？

```
template< class TContainer, TContainer* ptrToContainer >
class Worker
{
    public:
        Worker( )
            : mPtrToContainer_(ptrToContainer)
        {}

        void operator()()
        {
            std::cout << "Data = " << mPtrToContainer_->mData_ << '\n';
        }

    private:
        TContainer* mPtrToContainer_;
}; 
```

感谢：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:09:28.573

我会试一试。如何更改模板以将类型作为参数而不是指针本身？您仍然可以将指针传递给构造函数：

```
template< typename TContainer >
class WorkerOnAnyContainer
{
    public:
        WorkerOnA( TContainer* ptrToContainer )
            : mPtrToContainer_(ptrToContainer)
        {}

        void operator()()
        {
            std::cout << "Data = " << mPtrToContainer_->mData_ << '\n';
        }

    private:
        TContainer* mPtrToContainer_;
}; 
```

然后你可以像这样使用它：

```
WorkerOnAnyContainer<ContainerA> workerOnAInstance(&staticInstanceA); 
```

* * *

由于您想保留指针作为模板参数的设计，您可以使用以下内容：

```
template< typename TContainer, TContainer* ptrToContainer >
class WorkerOnAnyContainer
{
    public:
        WorkerOnA()
            : mPtrToContainer_(ptrToContainer)
        {}

        void operator()()
        {
            std::cout << "Data = " << ptrToContainer->mData_ << '\n';
        }

    private:
        TContainer* mPtrToContainer_;
}; 
```

并像这样使用它：

```
WorkerOnAnyContainer<ContainerA, &staticInstanceA> workerOnAInstance; 
```

* * *

但是，这有点混乱，因为您需要两个模板参数，而第一个参数感觉是多余的。我不确定是否可以使用 C++03 解决此问题，但我认为可以构建一个可以在 C++11 中为我们进行类型推导的辅助方法：

```
template<typename T>
auto CreateWorker(T* container) -> WorkerOnAnyContainer<T, container>
{
    return WorkerOnAnyContainer<T, container>();
} 
```

但是，由于编译器希望该函数适用于非编译时常量参数，因此无法编译（GCC 4.6.3）：

```
use of parameter 'container' outside function body 
```

事实证明，[你不是唯一一个试图这样做的人](https://stackoverflow.com/questions/6740671/c0x-error-with-constexpr-and-returning-template-function)。显然，即使使用 C++11，您也无法以这种方式创建辅助方法。

我能想到的唯一可行的方法是使用宏（我知道，我知道）：

```
#define CreateWorker(container) WorkerOnAnyContainer<decltype(container), &container>() 
```

然后使用它很简单：

```
auto worker = CreateWorker(staticInstanceA);    // Note no `&' 
```

这利用了英特尔 C++ 编译器从 v12 开始支持`auto`的简单`decltype`的 C++11 特性（尽管我没有用除 GCC 之外的任何东西测试过这段代码）。作为一个宏，它当然有点脆弱。

[在行动中看到它！](http://ideone.com/hAu0W)

# jsf-2 - 我的 JSF PrimeFaces 应用程序是 HTML5 的吗？

> ID：10163629
> 
> 赞同：1
> 
> 时间：2012-04-15T16:04:17.170
> 
> 标签：jsf-2, primefaces, mojarra

这似乎是一个非常基本的问题，但无论如何我都愿意接受。

我的网络应用程序使用 Mojarra + Primefaces，它使用呈现为**画布元素的****p:chart**元素，我认为这是 HTML5 功能。然而，当我在浏览器中查看我的页面源时，我得到：

 **```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

代替

```
<!DOCTYPE html> 
```

Firebug 显示我的图表确实呈现为**画布**标签，所以我得到 HTML5 还是没有？

如果我不是，是否有一些设置参数需要我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:08:54.347

您的文档作为 XHTML 1.0 Transitional 提供（因为这是您的 doctype 所说的），但这并不意味着您不能使用 canvas 元素。

浏览器会尝试渲染你给他们的任何东西。如果你给他们 XHTML 1.0 但你使用画布元素，它会尝试渲染它。大多数时候它会做得很好。

尽管根据 W3C，您的文档可能无效。**

# asp.net-mvc-4 - 您是否需要为 MVC 4 单页应用程序使用实体框架？

> ID：10163633
> 
> 赞同：1
> 
> 时间：2012-04-15T16:04:59.463
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我进行了一些研究，但找不到在单页应用程序（对于 MVC 4）中未使用实体框架的示例。使用 SPA 是否需要实体框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:27:26.423

是的，如果您指的是使用 KnockoutJS 和 UpshotJS 演示的 SPA 概念，它确实需要 EF。这是因为 Upshot 旨在使用 EF 提供的元数据。但是，现在还处于早期阶段，我们不知道 Upshot 将来会提供哪些功能。我们甚至可能会看到处理不同数据库的客户端库或 Upshot 扩展。

至于 SPA 作为一个概念，您现在可以使用 ASP.NET MVC、KnockoutJS/BackboneJS 和常规 JQuery ajax 调用来实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:30:08.587

**单页应用程序 (SPA) 绝对不需要 ASP.Net MVC。**

SPA 只是一种架构模式，它使用现有的 Web 开发技术来创建更好的用户体验。

要查看以一般方式描述的 SPA，请查看这篇文章： [http ://en.wikipedia.org/wiki/Single-page_application](http://en.wikipedia.org/wiki/Single-page_application)

由于 SPA 在过去几年中已成为热门话题，Microsoft 选择提供一种使用以 .NET 为中心的技术（实际上不仅仅是 ASP.Net MVC）创建 SPA 的方法。

对于微软特定的方式，看看这个： [http ://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T17:38:49.440

不，你没有，那只是MS尽可能地使用它自己的技术。

例如：Google 的 GMail 是一个 SPA，诚然不是使用 ASP.NET MVC 完成的。你真的认为他们在使用实体框架吗？

# sum - _m128 向量的四个 32 位元素之和

> ID：10163637
> 
> 赞同：2
> 
> 时间：2012-04-15T16:05:57.513
> 
> 标签：sum, simd, sse2, sse3

我正在使用内在函数来优化我的程序。但现在我想将 __m128 向量中的四个元素相加，以便将结果与浮点值进行比较。例如，假设我有这个 128 位向量：{a, bc, d}。如何将 a+b+c+d 与 e 进行比较，其中 e 的类型为 float ？

SSE2 或 SSE3 是否提供了一种简单的方法，或者您有任何可以帮助我的代码片段吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:12:44.060

我能做到的最好的是：

```
; assumes    xmm0 = [0, B, 0, A] or similar
mulps xmm0,xmm0   ; [0, B*B, 0, A*A]
xorps xmm1,xmm1
movhlps xmm1,xmm0 ; [0, 0, 0, B * B]
addps xmm0,xmm1   ; [0, 0, 0, A * A + B * B] 
```

如果 A 和 B 绝对必须在低四字中，那么据我所知，您需要一个 shuffle，这在 pre-Penryn 上较慢（在 Penryn 上，DPPS 解决方案可用）。

# sql - 格式化 SQL 输出

> ID：10163643
> 
> 赞同：0
> 
> 时间：2012-04-15T16:06:51.190
> 
> 标签：sql, oracle, select, plsql, cursor

我需要使我的输出可读。对于我直接编写的查询，我已经成功地做到了。

1.  我需要对涉及游标的查询执行相同的操作，也就是说，我还需要对游标返回的记录进行格式化。但我做不到。

2.  我改为显式打印列名，然后打印记录。还是一样。有什么办法，我也可以检索标题，然后根据它们的长度，格式化接收到的记录吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:23:46.057

如果我理解正确，您需要的是动态解析和`lpad-rpad`函数。

使用[DBMS_SQL](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sql.htm)包，您可以动态解析 SQL 语句。我把下面的代码块扔在了我的头上，所以可能会有语法错误，但它应该会给你这个想法。

```
declare
  ln_cur number;
  ln_colCnt number;
  l_sqlDesc DBMS_SQL.DESC_TAB;
begin
  ln_cur := DBMS_SQL.open_cursor;
  DBMS_SQL.parse(ln_cur, 'select * from dual', DBMS_SQL.NATIVE);

  DBMS_SQL.describe_columns(ln_cur, ln_colCnt, l_sqlDesc);
  DBMS_OUTPUT.put_line(l_sqlDesc(1).col_name); --First Column Name.

  DBMS_SQL.close_cursor(ln_cur);
end; 
```

`lpad-rpad`如果要格式化输出，还需要检查函数。试试这个，自己看看：

```
begin
    DBMS_OUTPUT.put_line(lpad(20, "Ford"));
    DBMS_OUTPUT.put_line(lpad(20, "Prefect"));
end; 
```

# javascript - OnChange 事件在下拉/选择输入中过早触发？

> ID：10163646
> 
> 赞同：3
> 
> 时间：2012-04-15T16:07:26.557
> 
> 标签：javascript, jquery, asp.net-mvc, dom-events

即使把这个问题放在这里我也觉得很愚蠢，但我还没有找到解决方案。

也许这就是 onchange 事件应该如何工作，但似乎它触发得太快了（或者在做出最终选择时它应该再次触发）。我有一个选择/下拉菜单，用于刷新部分屏幕，但我发现在 Chrome 和 IE9 中，只要用户开始**输入**，就会调用 onchange 事件（鼠标选择可以正常工作） - 我想这是有道理的，因为即使他们没有完成输入，也会做出新的选择。无论如何，屏幕会更新，但不会更新下拉列表中用户最终选择的数据（就像它在第一次点击/更改时触发，但当用户停止输入并进行最终选择时它不会再次触发） .

我已将其切换为 onblur，但在用户完成选择并继续之前它不会被触发，所以我很想找到一个比 onblur 更快触发的解决方案，但在用户做出最终选择之后。

这是在 MVC 项目中的 aspx 页面上：

```
<asp:DropDownList ID="employeeDropdown" runat="server" onchange="RefreshCalendarData()" /> 
```

这是它调用的 js 函数：

```
function RefreshCalendarData() {
    // code omitted
    Scheduler.Refresh();
} 
```

有没有使用 js 或 jQuery 的好的解决方案/变通方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:34:29.567

您可以在 ASP.NET MVC 项目中使用服务器控件（很少有例外）。键入时 DDL 在 IE/Chrome 中正常工作 - 请参阅[我的博客 Cascading DropDownList in ASP.Net MVC](http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx)和[使用 DropDownList 框和 jQuery](http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc) 使用我的 Cascading DDL 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:16:53.150

是的，onChange 事件正在正常工作。您可以做的是将计时器附加到窗口并检查该字段是否已被修改，而不是使用 onChange。

因此，您可以创建一个全局变量，当用户模糊表单时更新为 true，还可以创建一个计时器来检查用户是否进行了最后一次选择。

```
if(userBlur == true && userSelect == true){
    //do the code
    window.clearInterval();
}else{
    //wait for change
} 
```

应该更接近您的预期。

# c++ - Pointer-to-Pointer、Value-of-Pointed 地址和 2D- Array 访问之间的清晰性

> ID：10163648
> 
> 赞同：0
> 
> 时间：2012-04-15T16:07:33.443
> 
> 标签：c++, c

有人可以为这些无处不在的差异指明道路吗，因为它可能有点令人兴奋。

例如，如果我有一个*2D*数组`rec[3][2]`，则以下访问意味着相同；

```
rec[0][0] = **rec
rec[i][0] = **(rec + i)
*(*(rec + i) + j) = rec[i][j] 
```

如果是这种情况，那么这些是什么意思：

```
#include <stdio.h>
double *recptr[3];
int i=1;

main()
{
 double n1=12.0;
 doublw n2=3.4;

 recptr[0]= &n1;
 recptr[1]= &n2;

 printf("Amt: %.2f\n", **(recptr + i));
} 
```

什么是`**(recptr + i)`，这是访问 2D 指针还是指针对指针的引用？

```
foo(ptr2ptr)double **ptr2ptr;
{
 int i=1, j=0;
 if(**(ptr2ptr +i) > **(ptr2ptr + j))
 {
  double *tmp= *(recptr +i);
 }
} 
```

`*(recptr +i)`和 又有什么区别`**(ptr2ptr +i)`？！是后来的二维访问还是对指针 2-ponter 引用的访问以及对象指向的时间越早？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:31:32.960

```
double *recptr[3]; 
```

这将创建一个包含 3 个指向 double 的指针的数组`(double*)`。
现在，在 中`main()`，我们有 double`n1 = 12.0f`和 double `n2 = 3.4f`。

现在我们将地址分配`n1 (&n1)`给`recptr[0]`（数组的第一个元素恰好指向双精度数，所以现在它指向双精度数（我们的 n1）的地址，这没关系。）-> 请注意，这不是参考（理论上）。我们正在获取 n1 的地址。

我们对 n2 做同样的事情，所以现在`recptr[1]`是一个指向 n2 地址的指针。

现在我们打印`**(recptr + i)`-> 这意味着以下内容：

我们获取数组第一个元素的地址（recptr 计算为数组的地址），我们将该地址偏移 i（恰好是 1）。现在请注意，我们不会进一步移动 1 个字节，而是`sizeof(double*)`进一步移动字节。

现在，我们取消引用这个位置`*(recptr + i)`（第一个元素的地址 +`sizeof(double*)`字节），我们看到了什么？嗯，它是一个指向 double 的指针（或者换句话说，它只是一个 n2 的地址）。所以我们需要再次取消引用才能真正看到这个特定指针指向的值，因此`**(recptr + i)`.

因此，第一次取消引用只是为我们提供了 recptr 数组的正确“单元格”，但在那个单元格中，有一个指向 double 的指针，所以为了获得它的值，我们需要再次取消引用。

（然后我们确实打印了 3.40，因为它的地址恰好位于 recptr 数组的第二个单元格中。）

# c# - 在我们的代码中快速方法实现如下？实施快速方法有什么好处？

> ID：10163649
> 
> 赞同：0
> 
> 时间：2012-04-15T16:07:34.377
> 
> 标签：c#, .net, performance, mvvm-light

调用快速方法是：

```
QuickMethods.IsFullyEmpty(CompanyName.Text) ||
                QuickMethods.IsFullyEmpty(UsernameText.Text) ||
                QuickMethods.IsFullyEmpty(PasswordText.Password) 
```

和实施是：

```
public static class QuickMethods
    {
        public static bool IsFullyEmpty(string s)
        {
            if (string.IsNullOrEmpty(s.Trim()))
                return true;
            return false;
        }
    } 
```

有什么选择吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:17:04.040

我认为好处是该方法还检查仅包含空格的字符串，但如果您正在寻找“选项”，那么在 .NET 4.0 中您可以使用`string.IsNullOrWhiteSpace()`并避免调用`Trim()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:29:33.090

为什么不将此验证逻辑提取到方法（或属性）中？

```
class TheViewModel
{
    public string CompanyName { get; set; }
    public string UsernameText { get; set; }
    public string PasswordText { get; set; }

    private bool Validate()
    {
        bool result = !QuickMethods.IsFullyEmpty(CompanyName) &&
                !QuickMethods.IsFullyEmpty(UsernameText) &&
                !QuickMethods.IsFullyEmpty(PasswordText);
        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:23:50.053

主要的好处是封装了 IsFullyEmpty 的实现。这改进了您的设计，因为您只需要在一个组件中更改 IsFullyEmpty 的实现（而不是每个调用 IsFullyEmpty 的组件）。当您（或其他团队成员）开发新组件时，您可以避免由于重新实现 IsFullyEmpty() 逻辑而导致的错误（即，您团队中的新程序员可能会忘记先 Trim() 字符串）。重构也有好处，例如，如果这是一个迁移到 .NET 4.0 的 .NET 2.0 项目，您可以将 IsFullyEmpty 重构为：

```
public static class QuickMethods 
{ 
   public static bool IsFullyEmpty(string s) 
   { 
     return string.IsNullOrWhitespace(s);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T16:27:44.713

您可以利用[params](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.80%29.aspx)和[extension method](http://msdn.microsoft.com/en-us/library/bb383977.aspx)的优势。

```
public static class QuickMethods
    {
        public static bool IsFullyEmpty(this string s, params string[] others)
        {

            if(s != null && s.trim().length > 0) {
               return false;
            }

            for(String o : others) {
              if(o != null && o.trim().length > 0)) {
               return false;
              }
            }

            return true;         
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T16:09:55.923

这比组合的 IsNullOrEmpty(s.Trim()) 更具可读性

改进的版本将提供一些关于错误的反馈。

# iphone - 在 NSArray 中查找 NSString

> ID：10163650
> 
> 赞同：-3
> 
> 时间：2012-04-15T16:07:44.670
> 
> 标签：iphone, objective-c

所以我试图找到一个与 NSArray 中的对象相同的 NSString

所以到目前为止我有这个

```
SPButton *currentBalloon = (SPButton *)[event target];

NSUInteger x =[letterArray indexOfObject:currentLetter];
NSUInteger y =[letterArray indexOfObject:currentBalloon.info];
if (y == x) {
    // do the following code
    NSLog(@"Equal!");
} else {
    NSLog(@"Not Equal!");

} 
```

我一直在 indexOfObject 线上崩溃。有大神有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:09:58.770

运算符比较`==`对象指针。`[y isEqualToString:x]`如果要比较值，请使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:31:20.030

似乎您正在以一种非常冗长的方式进行此操作，获取数组中字母的索引（大概按字母顺序排列）然后比较索引。为什么不直接比较这两个字母呢？

```
if ([currentLetter isEqualToString:currentBalloon.info]) ... 
```

# smartcard - “EMV”与“全球平台”的区别

> ID：10163653
> 
> 赞同：5
> 
> 时间：2012-04-15T16:08:13.223
> 
> 标签：smartcard

我想问一下你们中是否有人知道“EMV”和“全球平台”之间的区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T19:51:13.303

Global Platform - 跨平台，但以 Java Card 为主要平台 - 是一个管理卡片上的应用程序（Java Card Applet）的平台。它包括可以管理应用程序的附加“安全域”的身份验证方案和授权。

EMV 是 Europay、MasterCard 和 VISA（方案中的 E、M 和 V）创建的用于智能卡和 POS（销售点）终端互操作性的标准。作为 GlobalPlatform，Java Card 通常用于借记卡和信用卡中的接触式/非接触式或双接触式芯片。

简而言之，GP 实现了卡管理规范并为应用程序提供服务（例如安全通道）。EMV 定义了银行卡的接口。

这两个规范都没有定义卡的运行时系统，尽管例如 GP 确实提供了一个卡上接口供 Java Card Applet 使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:28:43.397

全球平台是定义智能卡产品生命周期、身份验证、安全通道和域分离的标准。Java 卡可以是全球平台卡，但 MULTOS 卡也可以是全球平台兼容的。

EMV 是支付应用程序所基于的支付行业标准。所以你的银行卡或带芯片的信用卡是基于EMV标准的。

带芯片的信用卡可以是持有 EMV 应用程序的全球平台卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:02:14.767

EMV 是一种芯片卡标准，旨在涵盖（现已失效）Europay、MasterCard 和 Visa 的现有信用卡实施。与更通用的预期实现（即现在的全球平台）相比，符合 EMV 的芯片在某种意义上受到限制。换句话说，尽管 EMV 是目前主导实际市场的标准，但 Global Platform 是一个比 EMV 更通用、可扩展和适应的标准。

这个想法是您当前使用的卡是 EMV，但实际上只能用于为单个银行付款，而全球平台卡可用于非银行用途[例如作为手机的 SIM 卡type device]，并且用于银行/支付目的也可用于保存您所有的旧塑料卡，而不仅仅是来自单个银行的那些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T11:20:44.660

EMV 是一种支付应用程序。全球平台 (GP) 是 Java 平台。

当开发了Java小程序时，可以将该小程序下载到GP中并运行。所以，你可以开发任何类型的小程序，如果内存空间足够，那么小程序可以下载到GP中运行。

EMV 就是这样一个 Java 小程序，但专注于信用卡/借记卡应用程序。但是，大多数时候，EMV 是默认内置在 GP 卡中的，因此大多数 GP 卡都可以运行 EMV。但是，如果你不想运行 EMV，你可以忘记里面的默认 EMV 小程序，只在 GP 上运行你自己的小程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:15:26.373

EMV 用于定义**支付环境**，让不同的实体一起运作。每个实体都必须遵守规则。这些实体是智能卡、终端（POS、ATM）、银行和芯片卡应用程序。全球平台用于定义**智能卡**标准而非支付系统。有了这些规则，每个实体（芯片制造商、芯片操作系统供应商）都可以一起运作。他们可以设置他们的智能卡个性化、身份验证规则等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-08T11:09:51.463

简而言之，EMV 和 globalplatform 没有任何关系，EMV 是一个通用术语，用于定义 Europay-Mastercard-Visa 三个公司之间的联盟，以创建一组标准来打击支付卡欺诈。

全球平台是一组定义如何进行安全应用程序管理的抽象规范。

The norms related to EMV makes an extensive use of the global platform specifications in order to manage the payment application on the cards so that the global platform is historically linked to EMV but the two terms are different by essence.

# java - Glassfish 的“查找”时间很慢

> ID：10163658
> 
> 赞同：4
> 
> 时间：2012-04-15T16:08:36.733
> 
> 标签：java, glassfish, ejb, rmi

我创建了一个在 GlassFish Opensource Edition 上运行的测试 EJB3 应用程序。

我正在从同一主机连接到 GlassFish（客户端和应用程序服务器都在“本地主机”上运行）。

我使用 InitialContext.lookup() 获取一个远程（有状态的）对象，然后我与它进行交互，就像它是一个普通的 Java 对象一样。

唯一的问题是这个单次调用，需要**15 秒**：

```
FooRemoteService foors = (FooRemoteService) 
    context.lookup("java:global/FooApp/FooService!test.FooRemoteService"); 
```

我知道必须有某种“握手”和“初始化”，但这*太慢了*。

其余的交互（交换许多序列化对象的几个远程调用）只需要大约 0.1 秒！

我怎样才能找出它需要这么长时间的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-07T19:55:35.593

我建议您指定您的主机 ip 的初始上下文，因为您可能将相同的应用程序部署在不同的主机上，并且 EJB 规范会在网络上搜索它

```
Properties props = new Properties();
props.put(Context.PROVIDER_URL, "jnp://ip:1099");
InitialContext ctx = new InitialContext(props); 
```

此致。

# javascript - CoffeeScript 和 Dart 对 JavaScript 的改进之间的主要区别是什么？

> ID：10163667
> 
> 赞同：21
> 
> 时间：2012-04-15T16:09:37.027
> 
> 标签：javascript, coffeescript, dart

两种语言都声称可以修复 JavaScript 的感知缺陷。我想了解 CoffeeScript 和 Dart（编译为 JavaScript）如何实现这一点的主要区别。尤其，

*   对象模型与 JavaScript 中的相同吗？
*   它们是静态类型还是动态类型？强还是弱？
*   闭包在这两种语言中是如何工作的？
*   他们支持协程吗？
*   语法的主要区别是什么？
*   我可以使用多少个本机库？
*   我可以使用现有的 JavaScript 库吗？

我对个人偏好、采用率、工具支持或对特定目的的有用性等*不感兴趣。*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-15T23:36:01.027

Seth Ladd 有一篇[博](http://blog.sethladd.com/2012/01/vanilla-dart-ftw.html)文，他将 CoffeeScript 的某些方面与 Dart 和 JavaScript 进行了比较。不会触及你所有的子弹，但可能是一个开始。他还发布了这个[讨论](http://blog.sethladd.com/2011/12/response-to-coffeescript-and-dart.html)来回应关于 nettuts 的 Coffeescript 和 Dart 文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T04:23:58.580

添加到 Richard G 的出色链接： 您可以在 CoffeeScript 中使用 JavaScript [http://coffeescript.org/#embedded](http://coffeescript.org/#embedded) 在该站点上测试 CoffeeScript；很多很好的例子。

IIRC，Dart 最初是它自己的语言。当开发社区对 Dart 不那么开放（“meh”或“ugg”）时，Google 将 JavaScript 交叉编译添加到了 Dart。Native Dart 最终是为了与 JavaScript 竞争。Dart 现在是 alpha 质量的；除非您进行大量测试，否则我会跳过它。

对我来说，一个更好的问题是，“我应该使用 CoffeeScript 还是[Haxe JS](http://haxe.org/doc/targets/js)进行开发？”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T18:47:03.363

我在 MarakanaTechTV 上找到了一个新视频，其中有一些**Dart 与 JS**的比较（主要与 Dart 的 VM 相关，而不是从 Dart 渲染到 JS 时）。强调：

*   更多基于类（与 JS 的原型相反，它们相似，但 dart 在这里更像 Java 和 C++。这有助于使 Dart 更快，因为调用不必沿 Prototype 链向上传播。）
*   [对象大小可能是静态](http://www.youtube.com/watch?feature=player_detailpage&v=CKh7UOELpPo#t=303s)且密集的，有助于对象数组运行得更快。虽然如果你想要空洞数组，你可以使用“地图”。
*   [Int 数学](http://www.youtube.com/watch?feature=player_detailpage&v=CKh7UOELpPo#t=425s)很容易获得，它比双浮点数更快（JS 或多或少总是如此）。
*   [Dart 具有 SIMD](http://www.youtube.com/watch?feature=player_detailpage&v=CKh7UOELpPo#t=506s)，可以减少大型数据集 CPU 使用率（例如图像、音频、视频、3d、大表）。尽管除非您打算在浏览器中处理图形、音频或大型数字表，否则这对您来说并不重要。（顺便说一句，我不同意演讲者的观点；我自己翻译为 DSP 的 SIMD 显示切换到 SIMD 确实需要一些“开销”，因为 SIMD 操作码确实比典型的 double/int 操作码需要 1 个或多个周期，并且您必须花费用于在 SIMD 和“旧”数学之间转换的操作码。也就是说，即使将 SIMD 用于 2 通道（如立体声音频），您也可以节省至少 20% 的 CPU，如果使用全部 4频道）。

还有另一个“[为什么 Dart？](http://www.youtube.com/watch?feature=player_detailpage&v=rdDoc3fLaII#t=1506s) ”为网络开发人员提供的视频。方便的语言糖/快捷方式：命名收缩器、词汇“this.”、方法级联。像 Angular.js 这样的内置数据绑定。

# objective-c - .m 文件中的 C 函数是否比 .c 文件中的慢？

> ID：10163674
> 
> 赞同：0
> 
> 时间：2012-04-15T16:10:32.740
> 
> 标签：objective-c, ios, c

.m 文件中的 C 函数是否比 .c 文件中的慢？有人知道任何性能测试吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T16:20:37.570

文件不快也不慢。它们被编译并链接在二进制文件中。我假设您正在询问从此类文件编译的可执行文件的速度。

那么问题就出在编译器上。如果您使用与 .m 文件相同的编译器从 .c 文件编译代码，并且对其进行了优化，则结果将是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:40:59.483

> .m 文件中的 C 函数是否比 .c 文件中的慢？有人知道任何性能测试吗？

好吧，让我将您的问题解释为“C 函数比 Objc 消息慢还是快？” 而答案是......

这取决于。[Mike Ash 在此处](http://www.mikeash.com/pyblog/performance-comparisons-of-common-operations.html)对 ObjC 和 C++ 和 C 进行了很好的速度比较。

# php - 在 PHP 中合并 XML 文件

> ID：10163675
> 
> 赞同：23
> 
> 时间：2012-04-15T16:10:34.650
> 
> 标签：php, xml, merge

我有 2 个文件`1.xml`，并且`2.xml`都具有相似的结构，我想要一个。我尝试了许多解决方案，但只有错误 - 坦率地说，我不知道这些脚本是如何工作的。

`1.xml`：

```
<res>
    <items total="180">
        <item>
            <id>1</id>
            <title>Title 1</title>
            <author>Author 1</author>
        </item>
        ...
    </items>
</res> 
```

`2.xml`：

```
<res>
    <items total="123">
        <item>
            <id>190</id>
            <title>Title 190</title>
            <author>Author 190</author>
        </item>
        ...
    </items>
</res> 
```

我想创建一个`merged.xml`具有以下结构的新文件

```
<res>
    <items total="303">
        <item>
            <id>1</id>
            <title>Title 1</title>
            <author>Author 1</author>
        </item>
        ...  //items from 1.xml
        <item>
            <id>190</id>
            <title>Title 190</title>
            <author>Author 190</author>
        </item>
        ... //items from 2.xml
    </items>
</res> 
```

我该怎么做？你能解释一下我的方法吗？如何处理更多文件？谢谢

**编辑**

我试过什么？

```
<?php
function mergeXML(&$base, $add)
{
    if ( $add->count() != 0 )
    $new = $base->addChild($add->getName());
    else
        $new = $base->addChild($add->getName(), $add);
    foreach ($add->attributes() as $a => $b)
    {
        $new->addAttribute($a, $b);
    }
    if ( $add->count() != 0 )
    {
       foreach ($add->children() as $child)
        {
            mergeXML($new, $child);
        }
    }
}
$xml = mergeXML(simplexml_load_file('1.xml'), simplexml_load_file('2.xml'));
echo $xml->asXML(merged.xml);
?> 
```

**编辑2**

按照 Torious 的建议，我查看了 DOMDocument 手册并找到了一个示例：

```
function joinXML($parent, $child, $tag = null)
{
    $DOMChild = new DOMDocument;
    $DOMChild->load($child);
    $node = $DOMChild->documentElement;

    $DOMParent = new DOMDocument;
    $DOMParent->formatOutput = true;
    $DOMParent->load($parent);

    $node = $DOMParent->importNode($node, true);

    if ($tag !== null) {
        $tag = $DOMParent->getElementsByTagName($tag)->item(0);
        $tag->appendChild($node);
    } else {
        $DOMParent->documentElement->appendChild($node);
    }

    return $DOMParent->save('merged.xml');
}

joinXML('1.xml', '2.xml') 
```

但它会创建错误的 xml 文件：

```
<res>
    <items total="180">
        <item>
            <id>1</id>
            <title>Title 1</title>
            <author>Author 1</author>
        </item>
        ...
    </items>
    <res>
        <items total="123">
            <item>
                <id>190</id>
                <title>Title 190</title>
                <author>Author 190</author>
            </item>
            ...
        </items>
    </res> 
</res> 
```

而且我不能正确使用这个文件。我需要正确的结构，在这里我可以将一个文件粘贴到另一个文件中。我想仅“粘贴”项目的并非所有标签。我应该改变什么？

编辑3

这是一个答案 - 基于 Torious 答案 - 只是根据我的需要进行了调整 - 检查 //edited

```
$doc1 = new DOMDocument();
$doc1->load('1.xml');

$doc2 = new DOMDocument();
$doc2->load('2.xml');

// get 'res' element of document 1
$res1 = $doc1->getElementsByTagName('items')->item(0); //edited res - items

// iterate over 'item' elements of document 2
$items2 = $doc2->getElementsByTagName('item');
for ($i = 0; $i < $items2->length; $i ++) {
    $item2 = $items2->item($i);

    // import/copy item from document 2 to document 1
    $item1 = $doc1->importNode($item2, true);

    // append imported item to document 1 'res' element
    $res1->appendChild($item1);

}
$doc1->save('merged.xml'); //edited -added saving into xml file 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-15T19:08:05.980

既然你已经付出了努力，我已经编写了一些应该可以工作的代码。

*请注意，这是未经测试的代码，但您明白了。*

把它变成漂亮的功能取决于你。确保你了解发生了什么；能够使用 DOM 可能会在未来的许多场景中帮助您。DOM 标准很酷的一点是，您在许多不同的编程语言/平台上都有几乎相同的操作。

```
 $doc1 = new DOMDocument();
    $doc1->load('1.xml');

    $doc2 = new DOMDocument();
    $doc2->load('2.xml');

    // get 'res' element of document 1
    $res1 = $doc1->getElementsByTagName('res')->item(0);

    // iterate over 'item' elements of document 2
    $items2 = $doc2->getElementsByTagName('item');
    for ($i = 0; $i < $items2->length; $i ++) {
        $item2 = $items2->item($i);

        // import/copy item from document 2 to document 1
        $item1 = $doc1->importNode($item2, true);

        // append imported item to document 1 'res' element
        $res1->appendChild($item1);

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-13T19:30:39.613

我认为最简单的方法是先将 XML 更改为数组，将两个数组组合起来更容易和直接。最后将数组改回xml。当您想直接组合两个 XML 文件时，它可能会有所帮助。您只需要考虑哪个键是您要添加子节点的位置。

```
function xml_to_array($sxi){
    $a = array();
    for( $sxi->rewind(); $sxi->valid(); $sxi->next() ) {
        if(!array_key_exists($sxi->key(), $a)){
            $a[$sxi->key()] = array();
        }
        if($sxi->hasChildren()){
            $a[$sxi->key()] = $this->xml_to_array($sxi->current());
        }
        else{
            $a[$sxi->key()] = strval($sxi->current());
        }
    }
    return $a;
}
function array_to_xml( $data, &$xml_data ) {
    foreach( $data as $key => $value ) {
        if( is_numeric($key) ){
            $key = 'item'.$key; //dealing with <0/>..<n/> issues
        }
        if( is_array($value) ) {
            $subnode = $xml_data->addChild($key);
            array_to_xml($value, $subnode);
        } else {
            $xml_data->addChild("$key",htmlspecialchars("$value"));
        }
    }
} 
```

用法：创建一个 SimpleXMLIterator

```
$xml1 = new \SimpleXMLIterator('test1.xml',null,true);
$a = xml_to_array($xml1); //convert xml to array
$xml2 = new \SimpleXMLIterator('test2.xml',null,true);
$b = xml_to_array($xml2);
$c = new SimpleXMLElement('<?xml version="1.0"?><data></data>');
$a['new_node']=$b;
array_to_xml($a,$c);
var_dump($c); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-03-10T12:48:03.910

怎么样 ：

```
<?php
// Read file 1
$xmlfilecontent = file_get_contents('xml1.xml');

// Concat file 2
$xmlfilecontent .= file_get_contents('xml2.xml');

// remove <items> tags
preg_replace('/<items[^"]*">/','',$xmlfilecontent);

// remove </items> tags
$xmlfilecontent = str_replace('</items>','',$xmlfilecontent );

// remove <res> tags
$xmlfilecontent = str_replace('<res>','',$xmlfilecontent );

// remove </res> tags
$xmlfilecontent = str_replace('</res>','',$xmlfilecontent );

// load XML Object - also add res and items + amount
$xmlobj = simple_xml_load_string('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'.PHP_EOL.'<res>'.PHP_EOL.'<items total="'.substr_count( $xmlfilecontent , '<item>').'">'.PHP_EOL.$xmlfilecontent.PHP_EOL.'</items>'.PHP_EOL.'</res>'); 
```

# jquery - 在提交表单之前等待用户 2 秒

> ID：10163676
> 
> 赞同：0
> 
> 时间：2012-04-15T16:10:41.930
> 
> 标签：jquery

我有以下用于提交表单的代码：

```
$('form').submit(function () {
    ...
} 
```

在输入此提交事件之前，我想等待用户大约 2 秒钟。**可能的？**也许是一个 beforesubmit 事件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:17:39.407

尝试：

```
$('form').submit(function (e) {
  setTimeout(function() {
    $(this).submit();
  }, 2000);
  e.preventDefault();
} 
```

使用 e.preventDefault() 您可以取消表单的默认行为（例如，提交）。然后你创建一个超时来执行真正的提交。

也许您应该设置一个标志，因为使用 .submit() 可能会触发您正在收听的“提交”事件。如果是这样，请尝试：

```
var attach_timeout = true;

$('form').submit(function (e) {
  if (attach_timeout) {
    setTimeout(function() {
      $(this).submit();
    }, 2000);
    attach_timeout = false;
    e.preventDefault();
  }
} 
```

# c++ - ptrace PTRACE_ATTACH 失败 - 用户拥有进程的 Linux 权限

> ID：10163678
> 
> 赞同：2
> 
> 时间：2012-04-15T16:10:48.000
> 
> 标签：c++, linux, memory, ptrace

为什么我需要以 root 身份运行（而不是 r00t_）？

```
// main()
scan.scanProcessOffset(10838, 0x7f8c14000000); // proper pid and offset

void MemoryMapper::scanProcessOffset(unsigned int procId, unsigned long long offset)
{
    long attach = ptrace(PTRACE_ATTACH, procId, NULL, NULL);
    cout << attach << endl << errno << endl;

    long memory = ptrace(PTRACE_PEEKDATA, procId, offset);
    if (memory == -1 && errno == 3)
    {
        cout << errno << endl;
        errno = 0;
    }

    cout << memory;
} 
```

正如您所看到的，我正在连接的进程归 r00t_ 所有

```
r00t_@:/proc/10838$ ls -l 
lrwxrwxrwx 1 r00t r00t_ 0 2012-04-15 08:21 exe -> /usr/bin/gedit
-rw------- 1 r00t r00t_ 0 2012-04-15 09:04 mem 
```

输出**未**以 root 身份运行：

```
r00t_@:~/memedit$ ./a.out
-1
1
3
-1 
```

作为根输出：

```
r00t_@:~/memedit$ sudo ./a.out
0
0
140239607693344 
```

当我是我试图附加到的进程的所有者时，为什么我不能附加？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T16:32:11.683

虽然某些应用程序用于`prctl()`明确禁止（例如 ssh-agent），但在[Yama](https://lwn.net/Articles/393012/)`PTRACE_ATTACH`中实现的更通用的解决方案是只允许直接从父进程到子进程（即直接且仍在工作），或作为 root 用户（即，和仍然以root身份工作）。如果本地应用程序受损，攻击者将无法附加到其他进程并检查它们的内存和运行状态。`ptrace``gdb``strace``gdb BIN PID``strace -p PID`

此行为通过`/proc/sys/kernel/yama/ptrace_scope`sysctl 值控制。默认值为“1”以阻止非子`ptrace`呼叫。“0”值恢复更宽松的行为，这可能更适合开发系统和/或只有管理帐户的服务器。Using`sudo`也可以`ptrace`通过该功能临时授予权限`CAP_SYS_PTRACE`，尽管此方法允许`ptrace`任何进程的权限。

# c# - 使用远程验证进行多字段验证

> ID：10163683
> 
> 赞同：16
> 
> 时间：2012-04-15T16:11:27.537
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, remote-validation

我有以下模型：

```
public class Customer
{
    public string FirstName {get;set;}

    public string LastName {get; set;}

    [Remote("CardExisting", "Validation", AdditionalFields="FirstName,LastName")
    public string CardNumber {get; set;}
} 
```

CardExisting 操作将检查 firstName 和 LastName 的 cardNumber 组合是否存在现有记录。

如果用户先输入卡号，然后输入他的姓名，我无法验证他，所以当他返回并输入他的姓名时，我需要再次远程验证，当焦点已经从 cardnumber 属性中丢失时，我该怎么办？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-07-19T13:52:31.043

扩展 Jaluka 的答案，我编写了这个帮助方法，它找到每个具有“附加字段”的远程验证元素，然后在每次这些字段之一发生变化时触发对所述元素的验证。

```
// I hate naming things
function initializeRemotelyValidatingElementsWithAdditionalFields($form) {
    var remotelyValidatingElements = $form.find("[data-val-remote]");

    $.each(remotelyValidatingElements, function (i, element) {
        var $element = $(element);

        var additionalFields = $element.attr("data-val-remote-additionalfields");

        if (additionalFields.length == 0) return;

        var rawFieldNames = additionalFields.split(",");

        var fieldNames = $.map(rawFieldNames, function (fieldName) { return fieldName.replace("*.", ""); });

        $.each(fieldNames, function (i, fieldName) {
            $form.find("#" + fieldName).change(function () {
                // force re-validation to occur
                $element.removeData("previousValue");
                $element.valid();
            });
        });
    });
} 
```

像这样调用函数：

```
$(document).ready(function() {
    initializeRemotelyValidatingElementsWithAdditionalFields($("#myFormId"));
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T04:11:03.573

我得到这个工作的方法是添加一些 JavaScript。

```
$("#FirstName").change(function () {
  $('#CardNumber').removeData('previousValue');
  $('#CardNumber').valid();
}); 
```

因此，当更改名字时，您会清除卡号中的所有先前值并重新验证卡号。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-15T20:39:18.250

如果您不喜欢创建客户端脚本：

```
 public class Customer
    {
        [Remote("CardExisting", "Validation", AdditionalFields = "CardNumber,LastName")]
        public string FirstName { get; set; }
        [Remote("CardExisting", "Validation", AdditionalFields = "FirstName,CardNumber")]
        public string LastName { get; set; }
        [Remote("CardExisting", "Validation", AdditionalFields = "FirstName,LastName")]
        public string CardNumber { get; set; }
    } 
```

并在 CardExisting 中验证所有字段是否已填写

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-16T10:04:02.823

继上面 Chris 的辅助方法之后。这在大多数情况下都很好用，但如果您的模型完全有前缀，例如 'Custom.Address.Line1' 。未正确找到附加字段。我已经使用 jquery.validate.unobstructive 库中的一些附加逻辑更新了帮助程序，这些逻辑将正确查找字段。

```
function getModelPrefix(fieldName) {
    return fieldName.substr(0, fieldName.lastIndexOf(".") + 1);
}

function appendModelPrefix(value, prefix) {
    if (value.indexOf("*.") === 0) {
        value = value.replace("*.", prefix);
    }
    return value;
}

function escapeAttributeValue(value) {
    // As mentioned on http://api.jquery.com/category/selectors/
    return value.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g, "\\$1");
}

function initializeRemotelyValidatingElementsWithAdditionalFields($form) {
    const remotelyValidatingElements = $form.find("[data-val-remote]");

    $.each(remotelyValidatingElements, function (i, element) {
        var $element = $(element);

        const additionalFields = $element.attr("data-val-remote-additionalfields");

        if (additionalFields.length === 0) return;

        const rawFieldNames = additionalFields.split(",");
        const prefix = getModelPrefix(element.name);

        const fieldNames = $.map(rawFieldNames, function(fieldName) {
            return appendModelPrefix(fieldName, prefix);
        });

        $.each(fieldNames, function (i, fieldName) {
            $form.find(":input").filter("[name='" + escapeAttributeValue(fieldName) + "']").change(function () {
                // force re-validation to occur
                $element.removeData("previousValue");
                $element.valid();
            });
        });
    });
} 
```

# c# - 正则表达式查找并替换为找到的值

> ID：10163686
> 
> 赞同：0
> 
> 时间：2012-04-15T16:11:32.003
> 
> 标签：c#, regex

我有英国邮政编码数据，我想按字母顺序对它们进行排序，结果如下；

```
N10-XX
N1-XX
N2-XX
N3-XX
N4-XX
N5-XX 
```

我想要的是如下；

```
N1-XX
N2-XX
N3-XX
N4-XX
N5-XX
N10-XX 
```

基本上我需要在数字的开头添加 0，如果它是 1 位数字。像 N1 应该是 N01 才能做到这一点，那是什么正则表达式模式？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:22:22.500

好吧，如果您一心想要使用正则表达式，那么应该这样做

```
var text = @"N10-XX
N1-XX
N2-XX
N3-XX
N4-XX
N5-XX";

text = Regex.Replace(text, @"^N(\d)-", "N0$1-", RegexOptions.Multiline); 
```

那说你显然会改变原始数据，所以我不确定这是否适用

如果你想按数字排序，但保留原始数据，那么你可能需要做这样的事情

```
text.Split('\n')
    .Select(o => new { Original = o, Normal = Regex.Replace(o, @"^N(\d)-", "N0$1-", RegexOptions.Compiled)})
    .OrderBy(o => o.Normal)
    .Select(o => o.Original) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:42:54.627

从示例中我不确定需要订购邮政编码中的哪些数字。这是一些有效的英国邮政编码的正则表达式示例[http://blogs.creative-jar.com/post/Valid-UK-Postcdoe-formats.aspx](http://blogs.creative-jar.com/post/Valid-UK-Postcdoe-formats.aspx)。如果您使用上述方法将其合并，您应该可以做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:04:55.607

这是一个以自然（？）顺序返回原始字符串的排序函数。

```
List<string> list1 = new List<string>{ "N10-XX","N1-XX","N2-XX","N3-XX","N4-XX","N5-XX" };
List<string> list2 = new List<string>() { "File (5).txt", "File (1).txt", "File (10).txt", "File (100).txt", "File (2).txt" };   

var sortedList1 = MySort(list1).ToArray();
var sortedList2 = MySort(list2).ToArray();

public static IEnumerable<string> MySort(IEnumerable<string> list)
{
    int maxLen = list.Select(s => s.Length).Max();
    Func<string, char> PaddingChar = s => char.IsDigit(s[0]) ? ' ' : char.MaxValue;

    return 
        list.Select(s =>
                new
                {
                    OrgStr = s,
                    SortStr = Regex.Replace(s, @"(\d+)|(\D+)", m => m.Value.PadLeft(maxLen, PaddingChar(m.Value)))
                })
            .OrderBy(x => x.SortStr)
            .Select(x => x.OrgStr);
} 
```

# assembly - 程序集返回地址不起作用

> ID：10163692
> 
> 赞同：0
> 
> 时间：2012-04-15T16:12:13.677
> 
> 标签：assembly, mips

我在C中有这个功能：

```
int func(int n0, int n){
    if (n > 1){
        int nFinal = func(n0, --n);
        return (nFinal*nFinal) + n0;
    }
    return n0;
} 
```

并想在汇编中对其进行编程。我有这个代码：

```
 .data
    .text
    .globl  func
func:
    addi            $29,$29, -4
    sw      $ra,0($29)
    move            $8,$4       
    move            $9,$5       
    ble     $9,1,fim
    sub     $9,$9,1
    move            $5,$9
    jal     func
    move            $4,$11
    jal     quadrado
    add     $11,$2,$8
    j       fim
quadrado:
    mul     $2,$4,$4
    jr      $31
fim:    
    lw      $31,0($29)  
    move            $2,$11
    jr      $31 
```

如果传入 $4 和 $5 的参数分别是 2 和 1，我可以看到程序到达了`ble`它按预期工作的指令。它跳转到`fim`标签，从堆栈中恢复返回地址并将返回值传递给我的`main`函数。

问题是参数 $5 的值未定义。它可以是任何给定的值。而且我相信我的程序的问题是我的`main`函数的返回地址丢失了，程序无法返回它。我相信 wen 程序到达`jal func`指令，`main`返回地址被`jal func`指令返回地址代替。

我怎么解决这个问题？（不问代码，只是一些方向）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:13:27.597

> [...]而且我相信我的程序的问题是我的`main`函数的返回地址丢失了，程序无法返回它。我相信 wen 程序到达`jal func`指令，`main`返回地址被`jal func`指令返回地址代替。

差不多。您在函数开始时递减堆栈指针 ( `$29`/ `$sp`) 以创建空间来保存返回地址 ( `$31`/ `$ra`)，但是在最后重新加载返回地址后，您会丢失堆栈指针的相应增量 - - 您正在查看该值，但实际上并未将其从堆栈中弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T22:25:17.223

评论你的代码会有很大帮助。您对临时寄存器的使用可能会使事情变得更加复杂。您只需要使用一个临时寄存器。`func`这是例行程序的一些帮助。我假设你可以完成剩下的。并且记住在弹出返回地址时移动堆栈指针。

```
func:
        #push rtn. addr. onto stk
        sw $ra, 0($sp)
        subi $sp, $sp, 4

        #result = arg0
        move $t0, $a0

        #if arg1 <= 1 return arg0           
        ble $a1, 1, rtn

        #call func(arg0, arg1-1)
        subi $a1, $a1, 1
        jal func

        #result = func(arg0, arg1-1)^2 + arg0
        mul $t0, $v0, $v0
        add $t0, $t0, $a0

rtn: 
```

# java - Spring 3 MVC 应用程序中的 UTF-8 支持

> ID：10163693
> 
> 赞同：2
> 
> 时间：2012-04-15T16:12:19.970
> 
> 标签：java, utf-8

我在使用 UTF-8 时遇到问题。

**common.jsp**

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

**典型的.jsp**

```
<%@ include file="common.jsp" %> 
```

**页头**

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

**形式**

```
<form id="screenObject" accept-charset="UTF-8" action="/SiteAdmin/articleHeaderEdit?articleId=15" method="post"> 
```

我在文本字段中输入非 latin1 字符，然后单击保存。Validator 抱怨另一个字段并停止提交。这永远不会到达数据库，因此数据库处理 UTF-8 的能力不在这张图片中。页面重新显示并出现适当的错误，但输入的文本全乱了。所有非 latin1 字符都被转换为一些乱码。

我正在使用 Spring 3 MVC，以防万一……

**尝试**

将此添加到我的视图解析器没有帮助：

```
<property name="contentType" value="text/html;charset=UTF-8" /> 
```

**解决方案**

将编码过滤器添加到 web.xml。

```
<filter>
<filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
<filter-name>encodingFilter</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T16:24:29.297

在数据流中的某个地方，您正在使用 UTF-8 以外的东西将字符串编码为字节或将字节流解码为字符串。当您使用某些使用默认字符编码的 API 调用时，通常会发生这种情况。在不知道您的代码的情况下，我们只能告诉您这些。

另请参阅[此链接](https://stackoverflow.com/questions/3064644/character-encoding-problem-spring)以了解 Spring 中的字符编码问题，或者只是在论坛中搜索`[spring] character encoding`许多其他帖子。

# android - TextView 正在返回 null

> ID：10163694
> 
> 赞同：1
> 
> 时间：2012-04-15T16:12:33.867
> 
> 标签：android, nullpointerexception, textview

我有一个监听器，它只需更改按钮的文本并为用户计时。我还有一个文本视图，它应该在用户下班时更改为新的总工作时间。我仔细检查了 xml 以确保我抓住了正确的 R.Id，并且发现侦听器中的按钮不是 TextView。这是代码：

```
public class HoursListener implements OnClickListener{

GlobalApp appState;
Button startStopHoursButton;
TextView hoursTotalTextView;
public boolean clockedIn;

public HoursListener(Context ctx){
    appState = ((GlobalApp)ctx.getApplicationContext());
}

public void onClick(View v) {
    startStopHoursButton = (Button) v.findViewById(R.id.hourstogglebutton);
    hoursTotalTextView = (TextView) v.findViewById(R.id.totalWorktimeTextView);
    if(!clockedIn){
        startStopHoursButton.setText(R.string.clockout);
        appState.getCurrentCompany().getCurrentNewWeeklyTimestamp().CreateFinishTimeStamp();
        clockedIn = true;
    }else{
        startStopHoursButton.setText(R.string.clockin);
        appState.getCurrentCompany().getCurrentNewWeeklyTimestamp().CreateFinishTimeStamp();
        clockedIn = false;
        hoursTotalTextView.setText(appState.getCurrentCompany().getCurrentNewWeeklyTimestamp().totalTimeDoneThisWeekToString());                
    }
} 
```

}

下面是 textView 的 xml：

```
<TextView
        android:id="@+id/totalWorktimeTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView2"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceSmall"/> 
```

错误在于这一行：

```
hoursTotalTextView.setText(appState.getCurrentCompany().getCurrentNewWeeklyTimestamp().totalTimeDoneThisWeekToString()); 
```

我正在考虑将代码放入活动本身，但我觉得我可以这样做。我想要一些我可以像监听器一样调用的东西，所以我减少了代码中的冗余。我已经仔细检查了 hoursTotalTextView 是否为空。然而按钮不是。有任何想法吗？

Eclipse 的屏幕截图（链接到全尺寸版本）显示相关值不为空： [![Eclipse 的屏幕截图](../Images/37837feb8d7c3566ba2b5e002283aa54.png)](https://i.stack.imgur.com/VEN5F.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:25:27.557

大概是您正在收听其点击的 onClickListener 是按钮？onClick 传递被单击的 View v - 即按钮 - 并且文本框不是按钮的子项，因此您找不到它。

如果在您的活动中声明了 HoursListener，只需执行 findViewById 而不是 v.findViewById 即

```
hoursTotalTextView = (TextView) findViewById(R.id.totalWorktimeTextView); 
```

如果没有，请将 textview 传递给 HoursListener 构造函数并在那里设置 hoursTotalTextView（记住这感觉可能会导致内存泄漏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:22:17.760

检查该行中的每个对象

```
if(appState.getCurrentCompany()==null)
     Log.d("","getCurrentCompany is null");
if(appState.getCurrentCompany().getCurrentNewWeeklyTimestamp()==null)
     Log.d("","getCurrentNewWeeklyTimestamp is null");
if(appState.getCurrentCompany().getCurrentNewWeeklyTimestamp().totalTimeDoneThisWeekToString()==null)
     Log.d("","totalTimeDoneThisWeekToString is null"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:16:17.183

什么是 GlobalApp appState；以及为什么要从下一行将上下文类型转换为 GlobalApp。我认为 appstate 将在这里为空。

appState = ((GlobalApp)ctx.getApplicationContext());

如果 GlobalApp 是一个类，则为它创建一个对象，然后使用 getter 和 setter 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T16:17:04.983

你需要使用

```
startStopHoursButton = (Button) v.findViewById(R.id.hourstogglebutton);
hoursTotalTextView = (TextView) v.findViewById(R.id.totalWorktimeTextView); 
```

以前的某些地方，可能是构造函数，因为您的 setText 正在处理 null TextView 对象。

# python - 模拟 django 的数据库保存

> ID：10163697
> 
> 赞同：3
> 
> 时间：2012-04-15T16:13:02.493
> 
> 标签：python, django, unit-testing, mocking, django-unittest

我正在尝试模拟 django models.Model 上的保存方法调用。我使用 Mock 作为我的模拟库。

我正在测试位于 apps.deps.house_factory 的文件 house_factory.py 中的一个函数。

house_factory.py：从apps.market.models导入房子

```
def create_house(location, date, price):
    house = House(id=None, date, price)
    house.save()

    # calculate some stuff and further expand the house instance
    # for example house.tag.add("some-tag")

    # save after calculations
    house.save() 
```

我想模拟出 House 模型。

```
class HouseModelMock(mock.Mock):
    def save(self):
        pass 
```

测试方法，是 unittest.TestCase 类的一部分

```
 @patch('apps.deps.house_factory.House', new_callable=HouseModelMock)
  def create_house_test(self, MockedHouse):

      """ Constants """
      DAYS_FROM_TODAY = 55
      DATE = datetime.date.today() + datetime.timedelta(days=DAYS_FROM_TODAY)
      PRICE = 250000

    # A location is also a django module , I'm using factory_boy here for building a 'mocked' location
      location = LocationFactory.build()

      create_house(DATE, PRICE)
      MockedHouse.assert_called_with(None, DATE, PRICE)   
      MockedHouse.save.assert_called_with() 
```

如果我运行这个测试，我会得到：

call__ return self.call(*arg, **kw) MemoryError

这是我第一次尝试认真对待 django 和测试。所以也许我设置错误，模拟数据库调用。

任何帮助表示赞赏，

乔纳斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:19:37.017

“这是我第一次尝试认真对待 django 和测试”......你不需要模拟数据库保存，因为 Django 会自动[创建一个测试数据库](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#the-test-database)来在你运行时运行你的测试套件`python manage.py test`。然后只需断言存储在数据库中的值。

理想情况下， [mock](http://www.voidspace.org.uk/python/mock/)用于修补自己的测试（和逻辑），而不是默认的 Django 测试。

提示：使用*内存数据库*进行单元测试，例如`sqlite`将以下内容放入您的`settings.py`文件中：

```
if 'test' in sys.argv:
    DATABASES['default']['ENGINE'] = 'sqlite3' 
```

这将显着加快您的测试运行。

# c# - 反射中循环的任何 LINQ 替代方案？

> ID：10163698
> 
> 赞同：0
> 
> 时间：2012-04-15T16:13:09.100
> 
> 标签：c#, .net, linq, typedescriptor

我有一个带有字段+属性的类型 T，我想从字典中填充它，不区分大小写

我显然可以

```
foreach(PropertyInfo pi in t.GetProperties() )
..... 
```

接着

```
foreach(FieldInfo pi in t.GetFields() )
..... 
```

希望有更好的方法，也许使用 LINQ ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:46:37.973

这是一个选项，

```
var propDict = t.GetProperties().ToLookup<PropertyInfo, string, Action<object, object>>(
    p => p.Name, p => (obj, val) => p.SetValue(obj, val, null));

var fieldDict = t.GetFields().ToLookup<FieldInfo, string, Action<object, object>>(
    f => f.Name, f => (obj, val) => f.SetValue(obj, val));

var memberDict = pDict.Concat(fDict).ToDictionary(p => p.Key, p => p.Value); 
```

...然后使用类似...

```
Dictionary<string, object> outDict;
foreach (var keyval in outDict)
    memberDict[keyval.Key](container, keyval.Value); 
```

...虽然不确定它是否有意义，因为无论如何通过属性/字段相对简单，但可能是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:22:30.350

我不认为有什么更好的。`PropertyInfo`和`FieldInfo`类型具有用于设置值的不同 API，因此即使将它们收集到`IEnumerable<MemberInfo>`.

好吧，您可以编写一个包装器来处理这两种情况`PropertyInfo`，并`FieldInfo`以统一的方式封装不同的 API。但是`foreach`无论如何，2个循环更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:17:22.423

取决于你打算做什么`pi`。

*   如果转换为一些新课程，那么您可以

    ```
    t.GetProperties().Select(pi =>
    t.GetFields().Select(pi => 
    ```

*   如果读取属性并输出它们，那么`foreach`循环比 LINQ 更好。

# jquery - 元素上自动高度的jquery同位素选项

> ID：10163699
> 
> 赞同：9
> 
> 时间：2012-04-15T16:13:10.320
> 
> 标签：jquery, jquery-plugins, jquery-isotope

所以我使用同位素`masonry`布局

`$('section').isotope({itemSelector:'article',layoutMode:'masonry',transformsEnabled: false, animationEngine: 'jquery',masonry:{columnWidth:8}});`

问题是，如果我不为`article`in css 设置高度，布局看起来不太好，项目重叠和东西，但我不能为元素设置固定高度，因为它们是博客文章并且可以大小变了，各位大神有什么解决办法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-15T16:27:33.463

问题已解决，需要致电`$(window).load instead of $(document).ready(`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-16T13:34:17.130

```
var $container = $('#container').imagesLoaded( function() {
  $container.isotope({
    // options
  });
}); 
```

参见[同位素 - imagesLoaded](http://isotope.metafizzy.co/layout.html#imagesloaded)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-14T14:53:13.297

发生这种情况是因为同位素在加载之前不知道您的图像大小。更好的方法是使用加载指示器（可能使用 imageLoaded 插件）加载图像，然后执行插入或附加同位素。与使用 $(window).load() 相比，您将拥有流畅的导航和更快的加载站点的错觉。

# c# - 将 ListView DataItem 属性放入 UserControl 模板

> ID：10163700
> 
> 赞同：0
> 
> 时间：2012-04-15T16:13:12.133
> 
> 标签：c#, asp.net, .net, listview, user-controls

对 .NET 有点陌生，并试图了解如何最好地完成这项任务：我有一个列表视图，其中包含一个包含字符串值列表的数据源。最后一个属性是我想放在 Text 模板中的一些文本；通常，当不在列表视图中使用时，我可以成功地将标记和文本放入模板中，所以我想保留这个结构。但是将那个字符串放在里面的方法是什么？我已经尝试过 Databinder.Eval 但正如预期的那样，它说模板不包含我从 Container.DataItem 引用的属性（它成为模板）。

```
<asp:ListView runat="server"
    ID="ListView1"
    OnItemDataBound="ListView1_ItemDataBound">

    <LayoutTemplate>

        <div class="navigation">
            <asp:PlaceHolder runat="server" id="itemPlaceholder" />
        </div>

    </LayoutTemplate>

    <ItemTemplate>

        <my:Control id="VideoLink1" runat="server">
            <Text>
                --- PLACE CONTENT HERE --
            </Text>
        </my:Control>

    </ItemTemplate>

</asp:ListView> 
```

任何人都知道如何做到这一点？将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:03:11.673

使用 ListView 的 ItemDatabound 事件。在那里找到您的控件，然后分配所需的属性。

```
protected void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        if (e.Item.ItemType == ListViewItemType.DataItem)
        {
            YourControl  VideoLink1= e.Item.FindControl("VideoLink1") as YourControl ;
            if(VideoLink1!= null)
            {
                YourClass obj = ((YourClass)(((System.Web.UI.WebControls.ListViewDataItem)(e.Item)).DataItem));
               VideoLink1.TextProperty = obj .TextProperty ;
           }    
       }
} 
```

# spring - Hibernate/Spring：非法尝试将集合与单元测试中的两个打开会话相关联

> ID：10163701
> 
> 赞同：1
> 
> 时间：2012-04-15T16:13:19.497
> 
> 标签：spring, hibernate

我在单元测试中看到了上述错误，不知道如何纠正它。

我的单元测试类扩展了 AbstractTransactionalDataSourceSpringContextTests 并执行以下操作：

```
// Retrieve a RuleGroup
RuleGroup ruleGroupToUpdate = ruleGroupDao.findRuleGroup(a, b, c, d);
// Update an encapsulated Attribute
// Save the RuleGroup
ruleGroupDao.updateRuleGroup(ruleGroupToUpdate); 
```

以下是我的 RuleGroup 映射文件的片段。可以看到，一个 RuleGroup 已经封装了 Rule 和 Attribute 集合，这两个集合默认都是惰性加载的：

```
<class name="a.b.c.d.RuleGroup" table="RULE_GROUP">
    <id name="ruleGroupID" column="RULE_GRP_ID">
        <generator class="increment"/>
    </id>
    <set name="rules" lazy="true" cascade="save-update" table=RULES">
        <key column="RULE_GRP_ID" not-null="false"/>
        <many-to-many unique="true" column="RULE_ID" class="a.b.c.d.Rule"/>
    </set>
    <set name="attributes" lazy="true" cascade="save-update" table="ATTRIBUTES">
        <key property-ref="xrefID" column="XREF_ID" not-null="true"/>
        <many-to-many unique="true" column="CONFIG_ATTR_ID" class="a.b.c.d.Attribute"/>             
    </set>
</class> 
```

我的 DAO 类扩展了 HibernateDaoSupport：

*   findRuleGroup 方法使用 getSession().createCriteria() 来执行查询。使用“join”提取来检索规则和属性*   updateRuleGroup 方法使用 getHibernateTemplate().update() 来执行更新

    通过调试我的测试，在 findRuleGroup 方法中创建了一个新 Session，然后在 updateRuleGroup 方法中再次创建。因此，当执行更新时，Hibernate 看到我的 Attribute 集合已经与 findRuleGroup 会话相关联并抛出异常。

    我该如何解决这个问题？据推测，更新不应打开新会话。如果我指定 HibernateTemplate 不应该创建新会话，那么我会得到一个不同的异常，说没有与线程关联的会话。我在这里不知所措！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:08:45.830

我认为你根本没有交易。getHibernateTemplate() 可以打开一个新会话。在此处查看 src 代码：[bit.ly/HsgDrR](https://github.com/SpringSource/spring-framework/blob/master/spring-orm/src/main/java/org/springframework/orm/hibernate3/HibernateTemplate.java)。一种常见的做法是使用 spring 的 @Transactional 注释将方法包装在事务中的 dao 中。如果你不这样做，调用 getSession() 以外的任何东西都可能导致在你的事务之外打开新会话并泄漏。

希望有帮助。

# php - PHP验证输入是否为整数

> ID：10163707
> 
> 赞同：0
> 
> 时间：2012-04-15T16:14:09.880
> 
> 标签：php, integer

> **可能重复：**
> [php验证整数](https://stackoverflow.com/questions/4100022/php-validate-integer)

我通常如何验证用户输入是整数？我的意思是我通过 $_GET 收到一个变量，这必须是一个整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:24:01.630

你可以使用：

```
preg_match('/^[0-9]+$/', $_GET['variable_name']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:36:52.547

如果您打算仅使用整数而不是其他类型（例如浮点数），则应该可能使用[is_numeric()](http://php.net/manual/en/function.is-numeric.php)函数或[is_int()函数。](http://www.php.net/manual/en/function.is-int.php)

# matlab - 在matlab中移动矩阵的行

> ID：10163712
> 
> 赞同：1
> 
> 时间：2012-04-15T16:14:57.323
> 
> 标签：matlab, matrix

我必须在 matlab 中移动某些行。比如说我有一个大小为 50x50 的矩阵。而且我必须移动某些行，比如说 15,18,45.. 到顶部，其余行在底部。我怎样才能在matlab中完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:50:18.197

借助一些简单的索引，可以很容易地解决这个问题：

```
Matrix = [ 1   101   201   301
 2   102   202   302
 3   103   203   303
 4   104   204   304
 5   105   205   305
 6   106   206   306
 7   107   207   307
 8   108   208   308
 9   109   209   309
10   110   210   310];

rowsOnTop = [1 8 4];
rowsBelow = true(size(Matrix,1),1);
rowsBelow(rowsOnTop) = false;

Modified = [Matrix(rowsOnTop,:); Matrix(rowsBelow,:)]

Modified =

     1   101   201   301
     8   108   208   308
     4   104   204   304
     2   102   202   302
     3   103   203   303
     5   105   205   305
     6   106   206   306
     7   107   207   307
     9   109   209   309
    10   110   210   310 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:28:03.410

您是否尝试过 circshift 功能？这样的事情可能会有所帮助：

```
A = [1:8; 11:18; 21:28; 31:38; 41:48]
A =
     1     2     3     4     5     6     7     8
    11    12    13    14    15    16    17    18
    21    22    23    24    25    26    27    28
    31    32    33    34    35    36    37    38
    41    42    43    44    45    46    47    48
B = circshift(A, [3, 0])
B =
    21    22    23    24    25    26    27    28
    31    32    33    34    35    36    37    38
    41    42    43    44    45    46    47    48
     1     2     3     4     5     6     7     8
    11    12    13    14    15    16    17    18 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:13:24.207

我知道您想将某些行矩阵移动到顶部，并将其余行保留在其位置。为此，您可以使用：

示例矩阵：

```
Matrix = [ 1:10; 101:110; 201:210; 301:310 ]';

Matrix =

 1   101   201   301
 2   102   202   302
 3   103   203   303
 4   104   204   304
 5   105   205   305
 6   106   206   306
 7   107   207   307
 8   108   208   308
 9   109   209   309
10   110   210   310 
```

这是代码：

```
RowsVector = [ 3, 5, 8 ]; 
```

**编辑：新的更好的解决方案（这里首先介绍，因为它更好）。**

```
NewMatrix = Matrix(cell2mat(arrayfun(@(x) x:size(Matrix,1):prod(size(Matrix)), [ RowsVector, setdiff(1:size(Matrix, 1), RowsVector) ]', 'UniformOutput', false)));

NewMatrix =

 3   103   203   303
 5   105   205   305
 8   108   208   308
 1   101   201   301
 2   102   202   302
 4   104   204   304
 6   106   206   306
 7   107   207   307
 9   109   209   309
10   110   210   310 
```

**编辑：答案的其余部分与 [有限] 较旧的解决方案有关。**

```
% RowsVector must be sorted, otherwise the reordering will fail. 
```

**编辑：修复了无序 RowsVector 输入的错误。**

```
RowsVector = sort(RowsVector);

for RowIndex = 1:size(RowsVector, 2)
    row = RowsVector(RowIndex);
    Matrix = vertcat(Matrix(row,:), Matrix);
    Matrix(row+1,:) = [];
end 
```

这是结果：

```
Matrix =

 8   108   208   308
 5   105   205   305
 3   103   203   303
 1   101   201   301
 2   102   202   302
 4   104   204   304
 6   106   206   306
 7   107   207   307
 9   109   209   309
10   110   210   310 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T22:03:55.360

我会通过定义一个行置换矩阵来解决这个问题，以产生所需的结果。如果 Matlab 对此有一个内置函数，我会忽略它，所以我写了一个：

```
function P = rowpermat(vec)
P = zeros(length(vec));
for i = 1:length(vec)
    P(i,vec(i)) = 1;
end 
```

如果`vec`是`1:n`此函数的排列将返回一个矩阵，该矩阵排列矩阵的行`nxn`注意`1->vec(1), 2->vec(2), ...`没有错误检查等，因此在生产代码中使用它需要您自担风险。

在这种情况下，如果 A 是要置换的矩阵，您可以这样写：

```
rowpermat([15, 18, 45, 1:14,16:17,19:44,46:50])*A 
```

# c# - 在 Facebook 个人资料页面上获取用户信息

> ID：10163715
> 
> 赞同：0
> 
> 时间：2012-04-15T16:15:03.010
> 
> 标签：c#, .net, facebook, facebook-graph-api, screen-scraping

我想创建一个非常基本的 C# 应用程序，它可以获取 Facebook 用户配置文件的公开可用信息。我已经阅读了几页 Graph API，但有一个问题。在这里，您可以看到一个包含各种公开信息的用户配置文件：

[http://tr-tr.facebook.com/people/A-Altan-Yurt/100002356385895](http://tr-tr.facebook.com/people/A-Altan-Yurt/100002356385895)

但是，我无法通过此链接使用 Graph API 获取**所有**这些信息：

[https://graph.facebook.com/100002356385895](https://graph.facebook.com/100002356385895)

我尝试抓取页面，但返回的文档不包含任何有用的信息。由于所有这些信息都是公开的，我认为不应该对它们进行访问限制。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:37:51.147

是的，即使是公共可访问的数据也不能只在 facebook 界面之外获取。

为了获取数据，您需要一个有效的访问令牌，例如，如果您尝试使用[同一用户提要](https://graph.facebook.com/100002356385895/feed)的 url，您将获得：

```
{
   "error": {
      "message": "An access token is required to request this resource.",
      "type": "OAuthException",
      "code": 104
   }
} 
```

[您可以使用 Graph API Explorer](http://developers.facebook.com/tools/explorer?method=GET&path=100002356385895/feed)尝试相同的 url ，在您授权此应用程序后，它将具有访问令牌，您将获得该用户的公共提要。

那里使用的访问令牌（在 API Explorer 中）是一个应用访问令牌，这可能是最容易获得的令牌，这是关于[Authenticating as an App](http://developers.facebook.com/docs/authentication/applications/)的文档。获得访问令牌后，您就可以开始查询图形 api 并获取公共数据。

您可以使用其他访问令牌类型（例如用户令牌）来执行此操作。

* * *

# 编辑

即使事情对 facebook 上的用户是公开的，它们对应用程序也不公开，您需要请求正确的权限，比如说教育 (user_education_history)。

[您可以在User 对象](http://developers.facebook.com/docs/reference/api/user/)的文档中准确查看每个字段所需的权限，在*字段*表中，第 3 列标题为*Permissions*，您将看到每个字段所需的权限。

# wait - PyOpenCL：Event.wait() 有什么用？

> ID：10163725
> 
> 赞同：1
> 
> 时间：2012-04-15T16:16:36.207
> 
> 标签：wait, pyopencl

PyOpenCL 文档中未注释此函数：[http ://documen.tician.de/pyopencl/runtime.html?highlight=enqueue#pyopencl.Event.wait](http://documen.tician.de/pyopencl/runtime.html?highlight=enqueue#pyopencl.Event.wait)

我的问题是：我必须在 for 循环中调用内核，并在每次调用后将复制操作与`pyopencl.enqueue_copy_buffer(dest, src, size)`. 首先，我使用`.wait()`附加的 (ie `pyopencl.enqueue_copy_buffer(dest, src, size).wait()`) 执行此操作，因为我在示例中找到了这一点。然后我删除`.wait()`并获得了非常显着的加速。

那么这个功能有什么用，在什么情况下可以放弃呢？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:19:17.663

`.wait()`将等待操作完成。如果您的代码可以在没有完成（甚至开始）的情况下继续进行，您可以将其省略。请注意，这与队列中的操作顺序无关：它们将按照您将它们排入队列的顺序一个接一个地执行（除非您使用乱序队列）。

# java - Unix域套接字上的Broken Pipe的原因是什么？

> ID：10163730
> 
> 赞同：6
> 
> 时间：2012-04-15T16:17:12.807
> 
> 标签：java, unix, broken-pipe, unix-socket

我有一个服务器应用程序，它接收请求并在 Unix 域套接字上转发它们。这在合理的使用情况下非常有效，但是当我对几千个请求进行一些负载测试时，我收到了 Broken Pipe 错误。

我正在使用带有[junixsocket](http://code.google.com/p/junixsocket/)的 Java 7来发送请求。我有很多并发请求，但我有一个由 20 个工作人员组成的线程池，它们正在写入 unix 域套接字，因此不存在并发打开连接过多的问题。

对于每个请求，我打开、发送和关闭与 Unix 域套接字的连接。

可能导致 Unix 域套接字上的管道损坏的原因是什么？

**更新：**

如果需要，放置代码示例：

```
byte[] mydata = new byte[1024];
//fill the data with bytes ...

AFUNIXSocketAddress socketAddress = new AFUNIXSocketAddress(new File("/tmp/my.sock"));
Socket socket = AFUNIXSocket.connectTo(socketAddress);
OutputStream out = new BufferedOutputStream(socket.getOutputStream());
InputStream in = new BufferedInputStream(socket.getInputStream()));

out.write(mydata);
out.flush();  //The Broken Pipe occurs here, but only after a few thousand times

//read the response back...

out.close();
in.close();
socket.close(); 
```

我有一个由 20 个工作人员组成的线程池，他们同时执行上述操作（因此最多 20 个并发连接到同一个 Unix 域套接字），每个连接都打开、发送和关闭。这对于突发 10,000 个请求的负载测试效果很好，但是当我再添加几千个请求时，我突然收到此错误，所以我想知道它是否来自某些操作系统限制。

请记住，这是一个 Unix 域套接字，而不是网络 TCP 套接字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T22:39:19.707

'Broken pipe' 表示您已写入已被另一端关闭的连接。由于缓冲，它的检测有些异步。这基本上意味着您的应用程序协议中有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-14T17:21:51.233

来自[Linux Programmer's Manual](https://man7.org/linux/man-pages/man2/socket.2.html)（Mac 上的 socket 手册页中也有类似的语言）：

> 实现 SOCK_STREAM 的通信协议确保数据不会丢失或重复。如果对等协议有缓冲空间的一段数据在合理的时间内不能成功传输，则认为该连接已死。当在套接字上启用 SO_KEEPALIVE 时，协议以特定于协议的方式检查另一端是否还活着。如果进程在中断的流上发送或接收，则会引发 SIGPIPE 信号；这会导致不处理信号的幼稚进程退出。

换句话说，如果数据在流套接字中停留的时间过长，您最终会得到一个 SIGPIPE。如果您无法跟上负载测试，那么您最终会遇到这种情况是合理的。

# php - 通过 PHP CLI 确定终端行/列

> ID：10163733
> 
> 赞同：2
> 
> 时间：2012-04-15T16:17:46.673
> 
> 标签：php, ssh, command-line-interface, stty

我知道通过命令很容易找出终端的大小参数`stty -a`。`system()`使用本地 CLI PHP 脚本时，通过左右抓取输出完全没有问题。

但是我正在通过从 ssh 命令开始的 php 脚本尝试同样的事情。可悲的是，所有`stty`返回的是：

```
stty: standard input: Invalid argument. 
```

调用代码是：

```
exec('stty -a | head -n 1', $query);
echo $query[0]; 
```

所以问题是：如果我可以输出到终端并从中读取输入（例如，可以`fread()`从 STDIN`fwrite()`到 PHP 中的 STDOUT，不应该`stty`也有有效的 STDIN 和 STDOUT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:24:29.130

使用`ssh -t`：

```
% php ~/src/termtest.php
speed 9600 baud; 39 rows; 127 columns;
% ssh localhost php ~/src/termtest.php
stty: stdin isn't a terminal
% ssh -t localhost php ~/src/termtest.php
speed 9600 baud; 39 rows; 127 columns;Connection to localhost closed. 
```

默认情况下，SSH 不会传入功能齐全的终端。Shell 和 ncurses 似乎能够以某种方式获取它们，但是要直接从 SSH 启动需要它们的东西，您需要设置 -t。

出于同样的原因，您可以通过 ssh'ing 到服务器*然后*在提示符下或通过`ssh -t _server_ tmux`但不通过输入 tmux 来启动 tmux（或屏幕） `sh _server_ tmux`。

# google-app-engine - 从 AppEngine 迁移

> ID：10163734
> 
> 赞同：0
> 
> 时间：2012-04-15T16:18:20.607
> 
> 标签：google-app-engine, mongodb

我已经使用 GWT/AppEngine/Objectify 开发了一个应用程序。由于数据很敏感，有许多客户希望将其本地部署在他们的环境中。我想不出一种方法可以在 AppEngine 中向开发人员隐藏应用程序的数据。即使我对数据进行加密，也总会有关于安全性的问题。

我想到了以下替代方案

a) 我现在在 appengine 中有一个多租户应用程序。我现在可以使用他们个人的谷歌帐户为特定客户进行部署。这样他们就有了数据的安全性。我不确定我将如何处理新的部署。没有什么比与用户共享应用程序更好的了。

b) 迁移到 MongoDB/MYSql。这将导致在数据模型更改时处理迁移的整个问题。我已经读过使用 MongoDB 我不会遇到迁移问题。这个对吗。

解决此问题的最佳方法是什么。根本问题是，作为开发人员，我们可以访问客户不想要的 Google/AppEngine 环境中的数据。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:38:21.923

最简单的方法是让客户创建一个 App Engine 帐户，而您只提供战争。

如果您仍计划从 GAE 迁移，那么您可能需要查看[AppScale](http://code.google.com/p/appscale/)和[capedwarf-blue](https://github.com/alesj/capedwarf-blue)。

# python - 第一次在 Django 中将对象保存到 MongoDB 时，为什么会出现 InvalidDocument 异常？

> ID：10163737
> 
> 赞同：1
> 
> 时间：2012-04-15T16:18:26.277
> 
> 标签：python, django, mongodb, django-nonrel

我一直在做噩梦，试图让 MongoDB 与 Django 一起工作。我现在已成功安装它，但在第一次尝试保存对象时出错。我一直在关注[本教程](http://django-mongodb.org/tutorial.html)，他们提供的 Post 模型是我精确复制的。

这是模型的代码：

```
from django.db import models
from djangotoolbox.fields import ListField

class Post(models.Model):
    title = models.CharField(max_length=200)
    text = models.TextField()
    tags = ListField()
    comments = ListField() 
```

该帖子实际上是在此处创建（并插入）的：

```
post = Post.objects.create(
...     title='Hello MongoDB!',
...     text='Just wanted to drop a note from Django. Cya!',
...     tags=['mongodb', 'django'],
...     comments=['comment 1', 'comment 2']
... ) 
```

完整的堆栈跟踪[可以在这里找到](http://dpaste.com/hold/732115/)。错误本身是：

```
InvalidDocument: documents must have only string keys, key was <django.db.models.fields.CharField object at 0x22cae50> 
```

显然 MongoDB 正在运行，因为它希望键是字符串而不是整数。但是为什么朗姆酒不见了？呃，为什么标准的 Django 对象不能保存到 MongoDB 数据库中？

我添加了被忽略的必需的 CharField 参数 max_length。在这种情况下它不起作用，如果我也删除列表也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:15:45.680

在将 django-mongodb-engine 库更新到 github 存储库的“开发”分支中的当前版本之前，我收到了这个错误。只需使用所示文章中的说明即可导入主分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T19:29:18.947

我也遵循了本教程并遇到了同样的错误。我设法解决了这个问题。我做错的是我使用了来自 github（[https://github.com/django-nonrel/djangotoolbox](https://github.com/django-nonrel/djangotoolbox)）存储库的 djangotoolbox，它是 0.9.2 版。然后我删除了它并按照教程状态进行操作，并使用了 djangotoolbox 版本 0.9.1 上的bitbucket ( [https://bitbucket.org/wkornewald/djangotoolbox )。](https://bitbucket.org/wkornewald/djangotoolbox)现在它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:02:02.017

在我看来，你的模型看起来还不错。这个错误很有趣；它是说您称为“标题”的属性的键只能是字符串，但如果我没记错的话，这里的字符串是键“标题”，值是 CharField() 字段，一起表示 MongoDB 中 Post 文档中的键/值对。尝试通过跳入 django shell 来隔离问题：

```
python manage.py shell 
```

并从头开始构建您的 Post 对象。使用dragonx提到的模型。最好简单地调试这些问题。如果您在尝试为 Post 对象 p 调用 Post.objects.create(p) 或调用 p.save() 时遇到相同的错误，请尝试重新编写 Post 模型并再试一次。

最后，您可以向我们展示您的 settings.py 文件并查看您的 mongodb 设置。如果您说您正在使用 django-nonrel，那么您可以进行基本检查以确保 python、django 和 mongodb 相互通信。

让我们知道您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T00:48:04.943

这是否有效：

```
post = Post(
...     title='Hello MongoDB!',
...     text='Just wanted to drop a note from Django. Cya!',
...     tags=['mongodb', 'django'],
...     comments=['comment 1', 'comment 2']
... ) 
```

另一件事要尝试：

```
class Post(models.Model):
    title = models.CharField(primary_key=True, max_length=200) 
```

我认为默认情况下 Django 使用自动生成的数值作为主键。这将迫使您的标题成为您的主键......它是一个字符字符串，因此它可能会解决您看到的问题。这只是一个猜测，因为您看到的实际错误对我来说没有太大意义。

# javascript - CKEditor 和基本路径中的 CKFinder 集成？

> ID：10163739
> 
> 赞同：0
> 
> 时间：2012-04-15T16:18:44.783
> 
> 标签：javascript, ckeditor, integration, wamp, ckfinder

我有以下集成 CKEditor 程序：

```
window.onload = function(){
    var editor = CKEDITOR.replace( 'ckeditortextarea' );
    CKEDITOR.config.resize_enabled = false;
    CKFinder.setupCKEditor( editor, 'libraries/ckfinder/' );
}; 
```

我的文件夹结构如下：

*   有一个名为“webx”的 WAMP 别名。
*   CKEDITOR：webx/mysite/libraries/ckeditor/
*   CKFINDER：webx/mysite/libraries/ckfinder/
*   索引：webx/mysite/index.php

集成过程在“head”标签内。我没有更改 CK 包中的任何配置文件。问题是集成不成功，CKEditor 中的上传/浏览不可用。

我的问题是：

1.  我究竟做错了什么？
2.  basepath 真正代表什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:01:00.447

基本路径应该按照我的要求设置为“../ckfinder/”。浏览/更新部分现在出现。

基本路径是从 ckfinder 目录中引用的。所以要么`http://domain/.../ckfinder/`或要么`../ckfinder`是正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-06T13:31:27.527

尝试以下步骤。我是通过这种方式得到的。

1.下载CKEditor和CKFinder。集成代码可在[http://dwij.co.in/ckeditor-ckfinder-integration-using-php/](http://dwij.co.in/ckeditor-ckfinder-integration-using-php/)
上获得 2\. 将两者的提取代码放在 xampp 内的一个文件夹中，如下所示。3\. 创建包含编辑器的索引文件（index.html），代码如下。

```
 <html>
    <head>
    <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
    <script type="text/javascript" src="ckfinder/ckfinder.js"></script>
    </head>
    <body>
        <h1>CKEditor CKFinder Integration using PHP</h1>
        <textarea id="editor1" name="editor1" rows="10" cols="80"></textarea>
    <script type="text/javascript">
    var editor = CKEDITOR.replace( 'editor1', {
        filebrowserBrowseUrl : 'ckfinder/ckfinder.html',
        filebrowserImageBrowseUrl : 'ckfinder/ckfinder.html?type=Images',
        filebrowserFlashBrowseUrl : 'ckfinder/ckfinder.html?type=Flash',
        filebrowserUploadUrl : 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files',
        filebrowserImageUploadUrl : 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images',
        filebrowserFlashUploadUrl : 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash'
    });
    CKFinder.setupCKEditor( editor, '../' );
    </script>
    </body>
    </html> 
```

所以你的文件夹结构将是这样的：

```
文档
|_集成
    |_ckeditor
    | |_config.js
    | |_...
    |_ckfinder
    | |_config.php
    | |_...
    |_上传
    |_index.html

```

1.  现在在 ckfinder 中打开文件 config.php 并进行以下更改：

    ```
    function CheckAuthentication() {
        // WARNING : DO NOT simply return "true". By doing so, you are allowing
        // "anyone" to upload and list the files in your server. You must implement
        // some kind of session validation here. Even something very simple as...
        // return isset($_SESSION['IsAuthorized']) && $_SESSION['IsAuthorized'];
        return true; // not good option though; go for sessions
    }
    $baseUrl = 'http://localhost/integrated/uploads/';
    $enabled = true;
    $config['SecureImageUploads'] = false;
    $config['ChmodFolders'] = 0777 ; 
    ```

2.  现在打开 url`http://localhost/integrated/`并尝试上传图片。

# jquery - 检查一个属性是否是一个有效的 DOM 属性

> ID：10163740
> 
> 赞同：0
> 
> 时间：2012-04-15T16:18:59.560
> 
> 标签：jquery, html, dom

我注意到，如果您使用 jQuery 获取元素，则可以使用 attr 方法更改每个属性。这就是应该做的对吗？

好吧，这是正确的，但如果你这样做：

```
$('p').attr('foo','bar'); 
```

如果您使用 Chrome 工具或 Firebug 检查该元素，您会发现，事实上，它现在有一个名为 foo 的属性，其值为 bar。

有谁知道一种方法来进行先前的检查并避免这种情况？如果发生这种情况会出问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:25:22.990

根据 jQuery[文档](http://api.jquery.com/attr/)，

> “从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。”

所以你可以先这样称呼它：

`$('p').attr('foo');`

并查看它是否返回未定义的值。

# java - 通过 Java 轴 Web 服务客户端代码访问硬编码的响应 xml

> ID：10163746
> 
> 赞同：2
> 
> 时间：2012-04-15T16:19:42.400
> 
> 标签：java, web-services, axis2, axis

我们的代码调用 web 服务来获取一些数据。但是服务提供商的服务大部分时间都处于关闭状态。我有响应xml。有人可以帮助我们以最简单的方法将硬编码响应 xml 访问到我们的 Web 服务客户端代码。我们使用 Java Axis Web 服务。我可以在本地机器上托管网络服务吗？我有 wsdl 和 xsd 的。请帮助我如何托管此服务..或者是否有任何简单的方法可以通过轴 web 服务客户端访问响应 xml..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:36:36.887

```
java -cp %AXISCLASSPATH% org.apache.wsdl.WSDL2Java http://wsdl_url 
```

这将帮助您从 WSDL 生成 WebService。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:37:02.977

有许多方法可以从 wsdl 创建 Web 服务。如果要手动创建它，请按照[以下步骤操作](http://docs.oracle.com/cd/E17802_01/webservices/webservices/reference/tutorials/wsit/doc/Examples_glassfish4.html)

最简单的方法是使用一些可以为您生成 web 服务的工具，因为 Netbeans 有一个可以从 wsdl 创建 web 服务的向导。所有方法和必要的文件都会自动生成。请参阅[使用 Netbeans 从 wsdl 开发 Web 服务](http://weblogs.java.net/blog/bhaktimehta/archive/2008/03/developing_webs.html)

创建 web 服务后，您可以从本地计算机托管它。Netbeans 还可以选择运行和部署 Web 服务。

# monodevelop - Monodevelope Nunit 项目数据驱动测试

> ID：10163751
> 
> 赞同：0
> 
> 时间：2012-04-15T16:20:06.987
> 
> 标签：monodevelop

刚开始探索 Monodevelop。我创建了一个 nunit 测试项目并添加了 nunit 2.6 版（Monodevelop 使用 2.4）当我尝试运行此测试时，我收到以下错误“方法 TestCase 的签名不正确：它不能有参数”有没有办法从Monodevelop 是数据驱动的。

```
[Test()]
[TestCaseSource(typeof(MyFactoryClass), "MyTestMethod_TestCaseDataList")]
public void TestCase (string apikey, string userid, string productid)
{
  Console.WriteLine(apikey);
  Console.WriteLine(userid);
  Console.WriteLine(productid); 
} 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:56:17.253

看起来 MonoDevelop 不支持相对较新的 TestCaseSource 和 TestCase NUnit 属性，并且只能处理没有参数的老式测试。

# ruby-on-rails-3 - Rails 3中的时间标签

> ID：10163753
> 
> 赞同：1
> 
> 时间：2012-04-15T16:20:50.950
> 
> 标签：ruby-on-rails-3

在 time_tag 中，我想显示时间的上午或下午。如何自定义助手。由于默认时间标签显示为**2012 年 4 月 15 日 10:55**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:00:32.013

%p 是显示 AM/PM 的格式标记

```
time_tag(time, :format=>'%B %d, %Y %l:%M %p') 
```

# javascript - 如何为链接分配随机颜色？

> ID：10163756
> 
> 赞同：0
> 
> 时间：2012-04-15T16:21:01.717
> 
> 标签：javascript

只是想知道为什么我的代码不起作用。我这样做完全错了吗？

```
window.onload = function random() {
    var links = document.getElementsByTagName('a');
    var colours = new Array("green","red","blue");
    var randomColour = colours[Math.floor(colours.length * Math.random())];
    for (a = 0; a < links.length; a++) {
        links[a].style.color = 'randomColour';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:22:33.773

`'randomColor'`-> `randomColor`。
使用变量而不是带引号的字符串。此外，为确保每个链接获得随机颜色，请在循环中生成颜色：

```
for (var a = 0; a < links.length; a++) {
    var randomColour = colours[Math.floor(colours.length * Math.random())];
    links[a].style.color = randomColour;
} 
```

为了最大限度地减少设置颜色和解析链接之间的延迟，绑定一个`DOMContentLoaded`事件，或者简单地将代码粘贴到`<body>`：

[http://jsfiddle.net/V6Chb/1/](http://jsfiddle.net/V6Chb/1/)

```
<a>Test</a>
  ... 
<a>Test</a>
<script>
(function() { // <-- Anonymous function to not leak variables to the global scope
    var links = document.getElementsByTagName('a');
    var colours = ["green", "red", "blue"];
    for (var a = 0; a < links.length; a++) {
        var randomColour = colours[Math.floor(colours.length * Math.random())];
        links[a].style.color = randomColour;
    }
})(); 
```

# iphone - 添加授权文件

> ID：10163757
> 
> 赞同：3
> 
> 时间：2012-04-15T16:21:10.010
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我需要将我的应用程序提交到 App Store。所以在我这样做之前，我使用`Xcode's`验证过程验证了我的应用程序。

提交验证时，需要将`entitlement`文件添加到项目中。我无法创建这个文件，所以我`entitlement`从另一个项目中拖动了一个文件并包含在我的文件中。该`entitlement`文件中不包含任何数据（它是一个**空文件**）。但是，当我通过 Xcode 将其提交验证时，验证成功通过。

我想知道的是，`entitlement`文件有什么作用（因为我的项目中包含的文件是空的），我的应用程序是否会因为从另一个项目`entitlement`中拖放文件而被 appStore 拒绝？`entitlement`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T01:24:15.643

根据苹果参考

> 权利赋予您的应用程序特定的功能或安全权限。

具体来说

> 设置权利值以启用 iCloud、推送通知和 App Sandbox（App Sandbox 仅适用于 Mac OS X）。每个权利都有一个默认值，在大多数情况下会禁用与权利关联的功能。设置权利时，您将通过提供适当的键值对来覆盖默认值

1.  授权文件只是一个 plist 文件，您可以将其视为另一个设置文件，其中包含一些高级配置，并且对于 xcode 4.x 之前的临时构建进行代码签名至关重要

2.  空的权利文件是有效的，因为 XCode 将把空的权利文件视为您想要使用 Apple 参考指定的所有默认值。在您的应用程序项目中保留一个授权文件不会造成任何损害，除非您指定您的应用程序不具备的功能，即 icloud 存储。如果您不需要本地分发，最好只删除该文件。:)

根据[Apple Technical Note TN2250](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html)（我建议您摆脱授权文件）

> 如果您在 Target > Build Settings 中定义自定义代码签名权利文件，您可以尝试完全删除该配置并重新构建/重新提交。通常情况下，代码签名权利的定义是不必要的。如果您的应用程序使用自定义钥匙串访问共享或 iCloud，您只需指定自定义代码签名权利文件。否则，请从 Xcode 项目的 Target > Build Settings 上的所有构建配置中删除 Code Signing Entitlements 配置，重新构建并重新尝试提交/验证。
> 
> 不必要地指定代码签名权利文件是最可能导致错误的原因，例如 -
> 
> 应用程序“Foo”未安装在 iPhone“foobar 的 iPhone”上，因为权利无效。
> 
> 在大多数情况下，上面看到的那些权利应该是您应用程序签名中的唯一权利。使用 Apple Push Notification 或 iCloud 的应用程序将添加一些权利。否则，超出上面列出的权利，或者这些权利的拼写错误或格式版本可能会导致“失败的代码验证”阻止上传到商店，或者对于 Ad Hoc 构建产生 iTunes 安装错误“未安装应用程序因为权利是无效的”。

请参阅[参考](https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html)

# c# - 使用存储库模式时如何返回可枚举对象？

> ID：10163759
> 
> 赞同：2
> 
> 时间：2012-04-15T16:21:36.160
> 
> 标签：c#, .net, repository-pattern

我正在开发一个简单的 WCF 应用程序，但无法正确设置存储库模式。应用程序的通信模式大致如下[所示](http://i.imgur.com/oiKw4.png)。

我关心说的部分`Admin Console Mode`。在这种模式下，管理员可以访问一些管理功能，例如添加用户和查看现有用户等。

此模式所需的实体之一的抽象合同`Users`如下：

```
public interface IUserRepository
{
    byte AddUser(string _loginname, string _loginpass);
    Users ShowAllUsers();
} 
```

这个存储库的具体实现：

```
public class UserRepository : IUserRepository
{
    public UserRepository(string connectionString)
    {
        _connectionString = connectionString;
    }

    public byte AddUser(string _loginname, string _loginpass)
    {
        . . .
    }

    public Users ShowAllUsers()
    {
        string query = "select login_name,created_time from users";

        using(SqlConnection conn = new SqlConnection(_connectionString))
        {
            using(SqlCommand cmd = new SqlCommand(query, conn))
            {                    
                conn.Open();

                using(var reader = cmd.ExecuteReader())
                {
                    if(!reader.Read())
                        return null;

                    return new Users
                    {
                        Login_Name = reader.GetString(reader.GetOrdinal("login_name")),
                        Login_Pass = reader.GetString(reader.GetOrdinal("login_pass")),
                        Created_Time = reader.GetDateTime(reader.GetOrdinal("created_time")),
                    };
                }
            }
        }
    }
} 
```

从主机层，如何访问从`ShowAllUsers`方法返回的用户对象列表？我试过这样：

```
public void ShowUsers()
{
    Users user = _repo.ShowAllUsers();

    Console.WriteLine("Name\tCreated Time");

    foreach(Users u in user)
    {
        Console.WriteLine("{0}\t{1}",u.Login_Name,u.Created_Time);
    }
} 
```

据我了解，这显然不起作用，因为 Users 对象不是可枚举的对象。如何修改`Users`实体和`repository contract`，`repository implementation`以便`Users`返回对象以显示在屏幕上？

[Users.cs](http://pastebin.mozilla.org/1571331)
[UserRepository.cs](http://pastebin.mozilla.org/1571334)
[IUserRepository.cs](http://pastebin.mozilla.org/1571335)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:25:39.893

实体：

```
// note the singular form, it makes much more sense for me, as far as the object represents a single entity (user)
// also not an interface, optionally
public class User : IUser
{
} 
```

存储库：

```
public class UserRepository : IUserRepository
{
    public IEnumerable<IUser> ShowAllUsers()
    {
        ...
        while (reader.Read())
        {
             yield return new User
             {
                 ...
             };
        }
    }
} 
```

我建议你在任何地方都使用接口，因为如果你想从 ADO.NET 查询切换到 ORM，你需要重写的代码要少得多。

* * *

用法：

```
foreach (User u in users)
{
    Console.WriteLine("{0} created on {1}", u.Login, u.CreationTime);
} 
```

# jquery - 使用 jQuery 创建两个 HTML 元素并将一个嵌套在另一个元素中

> ID：10163760
> 
> 赞同：0
> 
> 时间：2012-04-15T16:21:46.547
> 
> 标签：jquery, html, twitter-bootstrap

我正在尝试编写一个脚本，通过简单地将选项传递给不同的函数来生成 Twitter Bootstrap 样式的元素。在这个例子中，我正在生成一个提交按钮。

jQuery 似乎允许渲染一个元素，但是像这样嵌套它们却失败了。

这种方法有其他选择吗？

```
function renderButton(buttonText, buttonType, buttonName){
    if(buttonType == 'submit'){
        var $button = $('<input/>', {
            'type'  : 'submit',
            'name'  : buttonName,
            'value' : buttonText,
            'class' : 'btn submit'
        });
    }
    var $form_actions = $('<div/>', {
        'class' : 'form-actions',
        'text'  : $button
    });

    return $form_actions;   
};

renderButton('Go!', 'submit', 'buttonGo').insertAfter('#a'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:24:28.637

当你在这里完成时：

```
var $form_actions = $('<div/>', {
    'class' : 'form-actions',
    'text'  : $button
});

return $form_actions; 
```

$button 包含一个 jQuery 元素（不仅仅是一堆 HTML）。直接将其分配为 是行不通的`text`，但您可以像这样附加它：

```
var $form_actions = $('<div/>', {
    'class' : 'form-actions'
});

$form_actions.append($button);

return $form_actions; 
```

# android - AysncTask 取消自身仍然调用 onPostExecute()

> ID：10163763
> 
> 赞同：7
> 
> 时间：2012-04-15T16:22:05.627
> 
> 标签：android, android-asynctask

`AsyncTask.cancel(true)`从内部调用后，Android 调用`doInBackground()`而不是 调用。但[根据文档](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)：`onCancelled()``onPostExecute()`

> 调用此方法将导致返回`onCancelled(Object)`后在 UI 线程上调用。**调用此方法保证****永远不会调用**。`doInBackground(Object[])`**`onPostExecute(Object)`**

它是Android中的错误吗？

**更多观察：**

1.  `cancel(false)`从任一线程调用都按照文档中的说明进行。
2.  `cancel(true)`从 UI 任务调用*不会*调用`onPostExecute()`，也不会抛出`InterruptedException`在下面的 logcat 跟踪中看到的内容。
3.  `cancel(false/true)`从任何线程调用有时甚至`onCancelled()`在`doInBackground()`返回之前调用。这显然违反了文档，[其中指出](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)：

> **调用此方法将导致在返回****后`doInBackground(Object[])`**在 UI 线程上调用 onCancelled(Object) 。

**代码：（**在 Android 2.2 设备上测试）

```
protected Void doInBackground(Void... params) {
    Log.d(TAG, "started doInBackground()");
    while (!isCancelled()) {
        boolean ret = cancel(true);
        Log.d(TAG, "cancel() returned: " + ret);
    }
    Log.d(TAG, "returning from doInBackground()");
    return null;
} 
```

**日志输出**

```
04-15 21:38:55.519: D/MyTask(27597): started doInBackground()
04-15 21:38:55.589: W/AsyncTask(27597): java.lang.InterruptedException
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1254)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:219)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.FutureTask.get(FutureTask.java:82)
04-15 21:38:55.589: W/AsyncTask(27597):     at android.os.AsyncTask$3.done(AsyncTask.java:196)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.FutureTask$Sync.innerCancel(FutureTask.java:293)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.FutureTask.cancel(FutureTask.java:75)
04-15 21:38:55.589: W/AsyncTask(27597):     at android.os.AsyncTask.cancel(AsyncTask.java:325)
04-15 21:38:55.589: W/AsyncTask(27597):     at com.example.test.TestActivity$MyTask.doInBackground(TestActivity.java:31)
04-15 21:38:55.589: W/AsyncTask(27597):     at com.example.test.TestActivity$MyTask.doInBackground(TestActivity.java:1)
04-15 21:38:55.589: W/AsyncTask(27597):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-15 21:38:55.589: W/AsyncTask(27597):     at java.lang.Thread.run(Thread.java:1096)
04-15 21:38:55.589: D/MyTask(27597): cancel() returned: true
04-15 21:38:55.589: D/MyTask(27597): returning from doInBackground()
04-15 21:38:55.659: D/MyTask(27597): onPostExecute() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T13:50:37.557

1.  有一个例外，因为您调用 cancel(true) 会向运行 doInBackground() 的线程发送一个中断 - 但是，在这种情况下，您是从 doInBackground() 内部调用 cancel(true)，从而导致线程立即发送一个打断自己。

2.  您的代码在 Android 2 上运行，但您引用了 Android 4 的文档。问题是 cancel() 上的行为在 Android 2 和 Android 4 之间发生了变化。

    [Android 2.3.7 onPostExecute](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/os/AsyncTask.java#AsyncTask.onPostExecute%28java.lang.Object%29)：

    > 在 doInBackground 之后在 UI 线程上运行。指定的结果是 doInBackground 返回的值，如果任务被取消或发生异常，则返回 null。

    [Android 4.0.1 onPostExecute](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/os/AsyncTask.java#AsyncTask.onPostExecute%28java.lang.Object%29)：

    > 在 doInBackground 之后在 UI 线程上运行。指定的结果是 doInBackground 返回的值。如果任务被取消，则不会调用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:48:25.563

您应该返回 null 并在 onPostExecute 中处理返回。

# javascript - 如何仅处理表中已检查的行？

> ID：10163764
> 
> 赞同：0
> 
> 时间：2012-04-15T16:22:07.833
> 
> 标签：javascript, jquery

假设我有下表：

```
<table>
  <thead>
    <tr>
      <th>Column 1</th>
      <th>Column 2</th>
      <th>Column 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A1</td>
      <td><input type="checkbox"/> A2</td>
      <td>A3</td>
    </tr>
    <tr>
      <td>B1</td>
      <td><input type="checkbox"/> B2</td>
      <td>B3</td>
    </tr>
    <tr>
      <td>C1</td>
      <td><input type="checkbox"/> C2</td>
      <td>C3</td>
    </tr>
  </tbody>
</table> 
```

我只想从表中为选中复选框的行生成 JSON。我为“在此处插入支票”输入了什么？

```
var myRows = [];
var $headers = $("th");
var $rows = $("tbody tr").each(function(index) {
  $cells = $(this).find("td");
  myRows[index] = {};
  $cells.each(function(cellIndex) {
    // Insert Check Here
    myRows[index][$($headers[cellIndex]).html()] = $(this).html();
  });    
});

var myObj = {};
myObj.myrows = myRows;
alert(JSON.stringify(myObj));​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:26:24.010

尝试：

```
var selectedRowsHTML = "";

$('table input:checked').each(function() {
  selectedRowsHTML += $(this).closest('tr').html();
});

console.log("This is the HTML for selected rows: "+ selectedRowsHTML); 
```

使用 ":checked" 选择器，您只能获得在表格中检查的输入。遍历它们，找到带有“closest('tr')”的父行。仅此而已，您可以获得每一行的 HTML（或您想要对它们执行的任何操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:26:33.773

我添加了一个 If 语句来测试 TD 是否包含选中的复选框，请参阅代码中的注释

```
// Loop through grabbing everything
    var myRows = [];
    var $headers = $("th");
    var $rows = $("tbody tr").each(function(index) {
      $cells = $(this).find("td");
      myRows[index] = {};
      $cells.each(function(cellIndex) {
         if($(this).find('checkbox').is(':checked')) //Find the checkbox within the TD and test if it's checked or not
         {
           myRows[index][$($headers[cellIndex]).html()] = $(this).html();
         }
      });    
    });

// Let's put this in the object like you want and convert to JSON (Note: jQuery will also do this for you on the Ajax request)
var myObj = {};
myObj.myrows = myRows;
alert(JSON.stringify(myObj));​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:27:39.097

这样怎么样

```
$("table input:checked")  //filter based on your requirement
.each(function()
{
  var td=$(this).parent();  //gets the `td`, do the necessary
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T16:50:37.400

您可以使用 checkbox:checked 选择器和最接近来查找特定类型的最近元素。

```
var selectedRows = [];
$('table input:checkbox:checked').each(function() {
  selectedRows.push($(this).closest('tr'))
}); 
```

selectedRows 包含选定表行的数组

# javascript - 是否有一个 jQuery 库可以将图像以类似拼贴的格式放入 div 中？

> ID：10163767
> 
> 赞同：1
> 
> 时间：2012-04-15T16:22:29.057
> 
> 标签：javascript, jquery, html, jquery-ui, css

我特别关注[http://500px.com/flow](http://500px.com/flow)，这是我想在我的投资组合中模仿的东西。

我想让我的图像全宽，div 的 1/4 或 1/2 宽度并淡入。他们会以类似报纸或杂志的格式组织自己。如果必须，我会自己编程，但希望使用我可以破解的库。

这是迄今为止我发现的唯一一个：http: [//boedesign.com/demos/jsquares/](http://boedesign.com/demos/jsquares/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:53:27.533

有一个 jQuery 插件可以帮助将图像直接显示为拼贴画 - [https://github.com/sandeepravi/collage](https://github.com/sandeepravi/collage)。

# android - android插入活动堆栈

> ID：10163769
> 
> 赞同：7
> 
> 时间：2012-04-15T16:22:30.443
> 
> 标签：android, android-intent, stack

这是问题：假设活动堆栈由 A->B->C 组成。

如果用户按照顺序，例如：开始 A -> B -> C，按下返回按钮将导致 C->B->A。但是，如果用户直接进入活动 C（例如：通过通知），按下后退按钮将导致应用程序关闭，而不是进入 B->A。

如何将 插入到活动堆栈中以变为 A->B->C，以便当用户按下 C 时，它将始终返回到 B。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:24:47.910

只需覆盖活动 c 中的 onBackPressed() 方法和 startactivity B 以及活动 b 中的 startactivity a。

在活动 c 中有这些代码::

```
public void onBackPressed(){
startActivity(new Intent(this,ActivityB.class));
finish();
} 
```

在活动 b 中有这些代码::

```
public void onBackPressed(){
startActivity(new Intent(this,ActivityA.class));
finish();
} 
```

在活动 a 中有这些代码::

```
public void onBackPressed(){
finish();
} 
```

# ruby-on-rails - rails ajax请求

> ID：10163773
> 
> 赞同：1
> 
> 时间：2012-04-15T16:23:08.983
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

发送 Ajax 请求时出现问题。当你点击链接请求被发送到服务器 3 次并且没有得到答复。

**为什么请求被发送 3 次破坏？**

**我在查询的形成中哪里出错了？**

代码：

运行.html.erb

```
...
<%= link_to "Next", "#", :id => 'next', :class =>
... 
```

运行.js.erb

```
(function(){

  $("#next").click(function(){

    $.ajax({
      type: 'POST',
      url: '/engine/tff',
      success: function(data){
        alert("ok");
        $("#question").html(data);
      }
    });

    return false;
  });
}); 
```

控制器

```
def tff
    respond_to do |format|
      format.js render :text => "hello"
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:39:08.727

我猜点击事件被多次绑定可能是因为脚本被多次调用。由于我不熟悉rails，因此不确定多次调用的原因是什么。

你可以做些什么来避免它是在绑定之前取消绑定点击事件或使用`on`api。

```
function ajaxRequest(){
    $.ajax({
      type: 'POST',
      url: '/engine/tff',
      success: function(data){
        alert("ok");
        $("#question").html(data);
      }
    });
    return false;
  } 
```

`$("#next").unbind("click").bind("click",ajaxRequest);`

或者

`$(document).on("click","#next",ajaxRequest);`

也不确定您是否尝试绑定文档准备好并且您的代码中有错字。但它应该像这样包装：

```
$(function(){
  $("#next").click(ajaxRequest);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:33:46.980

我最近遇到的一件事是 jquery 尝试运行结果，因为默认的 dataType 将 .js 解释为脚本，而不是文本。您可能需要`dataType: "text"`在 ajax 调用中添加一个。我不明白这如何转化为三个电话。

我认为返回 false 应该是为了防止点击继续，但也许使用 preventDefault() 作为 apneadiving 建议的更好的形式。

# c# - 一个 DataAdapter，两个不同的表

> ID：10163780
> 
> 赞同：0
> 
> 时间：2012-04-15T16:24:17.180
> 
> 标签：c#, sql-server, join

我发现很难解释发生了什么，我会尽力而为。我们需要制作一个非常简单的浏览器，具有非常简单的收藏夹 + 历史记录功能，为此我们需要将它们都导入 DataSet 并从那里使用它们。

我所拥有的知识应该足够了，但我真的很想做得更有效和更清洁。在数据库中，我有 3 个表，一个用于用户，一个用于收藏夹，一个用于历史记录，这与 FK 等相关联。我想要一个查询来返回用户保存的每个 Fav + History url。这就是我现在所拥有的：

```
SELECT u_id, u_user, h_url, f_url FROM Users, Favorites, HistoryWHERE u_id = h_id AND u_id = f_id AND u_id = 1 
```

这不是我要寻找的结果，我想填充 2 个组合框，一个带有收藏夹，一个带有历史记录，两者都来自当时登录的人。

我知道这应该与 join 一起工作，但内部和外部都给出很少或很多结果，左右连接似乎也不适合我，但我无法解释原因。:p 我是半新手加入顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:33:28.270

如果您想填充两个组合框，我建议您检索两个单独的列表，每个组合框一个。然后，您可以将每个列表分别绑定到其组合框。

虽然 DataSet 可能不是最佳选择，但我认为在这种情况下它们会为您工作。您的目标是编写两个 SQL 语句，每个列表一个。然后，您将查询结果放入包含在一个 DataSet 中的 DataTables 中。DataTable 可以绑定到组合框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:35:05.490

听起来您实际上想要两个简单的查询，一个用于收藏夹，一个用于历史记录。这两个查询只需要有一个`where`子句来限制返回结果的用户。

```
SELECT f.url
FROM Favorites f
WHERE f.userID = 1

SELECT h.url
FROM History h
WHERE h.userID = 1 
```

# c++ - 用 C++ 打印（使用真实打印机）的最简单方法？

> ID：10163781
> 
> 赞同：3
> 
> 时间：2012-04-15T16:24:19.463
> 
> 标签：c++, printing, cross-platform

大多数搜索都会找到有关打印到标准输出的信息，而与实际打印机相关的结果大多涉及 Win32 API。

是否有一个基本的、非操作系统特定的打印机 API，它允许一个简单的 C++ 程序打印出一个文件，例如 .txt，或者打印它的标准输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:27:18.143

不，没有这种非操作系统特定的 C++ 打印机 API。

我建议运行一个执行打印的命令（例如，使用`system`或`popen`库调用），并使该命令用户可配置。

一些 C++（或 C）GUI 框架（例如 Qt、Gtk、GtkMM）提供了一个 API 来打印东西。

# facebook - Facebook 应用程序用户上次登录我的应用程序

> ID：10163787
> 
> 赞同：0
> 
> 时间：2012-04-15T16:24:39.257
> 
> 标签：facebook, facebook-graph-api

我正在为 Facebook 开发一个应用程序。我希望通过使用图形 API 来向我的应用程序显示上次登录播放器的功能。但是，我找不到任何使我能够这样做的对象。有没有办法指示用户登录？因为我希望建立一个“最近玩过的朋友”，我需要玩家上次登录应用程序的信息才能这样做。例如，如果我想要应用程序中所有玩家的分数，我可以使用“scores”API，它会返回此应用程序中所有朋友的分数。但是登录也能让我做同样的事情吗？

我发现唯一提供时间戳的对象是“成就”对象。但是，我计划保留这个对象以备将来使用。

# arrays - 有没有更优雅的方式来做到这一点？

> ID：10163790
> 
> 赞同：0
> 
> 时间：2012-04-15T16:24:53.090
> 
> 标签：arrays, algorithm, data-structures, binary-tree

给定一个正整数数组，`a`我想输出整数数组，`b`这样`b[i]`最接近的数字`a[i]`就小了`a[i]`，并且在`{a[0], ... a[i-1]}`. 如果这样的数字不存在，那么`b[i] = -1`.

例子：

```
a = 2 1 7 5 7 9
b = -1 -1 2 2 5 7

```

`b[0] = -1`因为没有小于 2
`b[1] = -1`的数字 因为没有小于 1 的数字 from `{2}`
`b[2] = 2`，最接近的数字 7 小于 7 from`{2,1}`是 2
`b[3] = 2`，最接近的数字 5 小于 5 from`{2,1,7}`是 2
`b[4] = 5`，最接近的数字到小于 7 的 7 from`{2,1,7,5}`是 5

我正在考虑实现平衡二叉树，但是这需要很多工作。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:45:23.370

这是一种方法：

```
 for i ← 1 to i ← (length(A)-1) {
     // A[i] is added in the sorted sequence A[0, .. i-1] save A[i] to make a hole at index j
     item = A[i]
     j = i

     // keep moving the hole to next smaller index until A[j - 1] is <= item
     while j > 0 and A[j - 1] > item {
         A[j] = A[j - 1]  // move hole to next smaller index
         j = j - 1
       }

     A[j] = item  // put item in the hole

     // if there are elements to the left of A[j] in sorted sequence A[0, .. i-1], then store it in b
     // TODO : run loop so that duplicate entries wont hamper results
     if j > 1
        b[i] = A[j-1]
     else 
        b[1] = -1;
   } 
```

试运行：

```
a =  2 1 7 5 7 9
a[1] = 2 
```

直截了当，设置`b[1]`为-1

```
a[2] = 1 
```

插入子数组：`[1 ,2]` 排序数组中 1 之前的任何元素？不。所以设置`b[2]`为 -1 。`b: [-1, -1]`

```
a[3] = 7 
```

插入子数组：`[1 ,2, 7]` 排序数组中 7 之前的任何元素？是的。它的 2 所以设置`b[3]`为 2。 `b: [-1, -1, 2]`

```
a[4] = 5 
```

插入子数组：`[1 ,2, 5, 7]` 排序数组中 5 之前的任何元素？是的。它的 2 所以设置`b[4]`为 2。 `b: [-1, -1, 2, 2]`

等等..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:40:00.863

您可以将其视为插入排序。

伪代码：

```
let arr be one array with enough space for every item in a
let b be another array with, again, enough space for all elements in a
For each item in a:
    perform insertion sort on item into arr
    After performing the insertion, if there exists a number to the left, append that to b.
    Otherwise, append -1 to b
return b 
```

您必须担心的主要事情是确保您不会犯重新分配数组的错误（因为它会重新分配 n 次，这将非常昂贵）。这将是您使用的任何语言的实现细节（std::vector 为 C++ 保留 ... arr.reserve(n) 为 D ... ArrayList 在 Java 中的 ensureCapacity ...）

与使用二叉树相比，这种方法的一个潜在缺点是它的时间为 O(n^2)。但是，使用这种方法与二叉树相比，使用这种方法的常数因子会使较小的尺寸更快。如果您的 n 小于 1000，这将是一个合适的解决方案。但是，O(n log n) 的增长速度比 O(n^2) 慢得多，因此如果您预计 a 的大小会明显更高，并且您可能会违反时间限制，您可能会考虑更复杂的 O( n log n) 算法。

有一些方法可以稍微提高性能（例如使用二进制插入排序：使用二进制搜索来查找要插入的位置），但通常在大多数情况下它们不会提高性能，因为它仍然是 O(n^ 2) 时间转移元素以适应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:02:18.807

这是一个（几乎）O（n log n）算法的草图，它介于实现插入排序和平衡二叉树的难度之间：向后做问题，使用合并/快速排序，并使用二分搜索。

伪代码：

```
let c be a copy of a
let b be an array sized the same as a
sort c using an O(n log n) algorithm
for i from a.length-1 to 1
    binary search over c for key a[i] // O(log n) time
    remove the item found // Could take O(n) time
    if there exists an item to the left of that position, b[i] = that item
    otherwise, b[i] = -1
b[0] = -1
return b 
```

有一些实现细节会使它的运行时间很差。

*   例如，由于您必须删除项目，因此在常规数组上执行此操作并四处移动将使该算法仍然需要 O(n^2) 时间。因此，您可以改为存储键值对。一个是键，另一个是这些键的数量（有点像在数组上实现的多重集）。“删除”一个只是从一对中减去第二个项目，依此类推。

*   最终你会留下一堆 0 值的键。这最终将`if there exists an item to the left`花费大约 O(n) 时间，因此，整个算法将因此降级为 O(n^2)。所以另一个优化可能是定期批量删除它们。例如，当其中 1/2 是 0 值时，执行修剪。

*   理想的选择可能是实现另一个具有更有利的删除时间的数据结构。类似于带有索引的修改展开链表的方法可以工作，但它肯定会增加这种方法的实现复杂性。

我实际上已经实现了这一点。我使用了上面的前两个优化（存储键值对进行压缩，并在其中 1/2 为 0 时进行修剪）。以下是一些使用插入排序导数与此比较的基准：

```
a.length 这个方法插入排序方法
100 0.0262ms 0.0204ms
1000 0.2300ms 0.8793ms
10000 2.7303ms 75.7155ms
100000 32.6601 毫秒 7740.36 毫秒
300000 98.9956 毫秒 69523.6 毫秒
1000000 333.501 毫秒 ????? 不够耐心

```

所以，正如你所看到的，这个算法的增长速度比我之前发布的插入排序方法慢得多。但是，插入排序方法需要 73 行代码，而 26 行代码。因此，就简单性而言，如果您没有时间要求/输入很小，插入排序方法可能仍然是可行的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T20:23:01.050

考虑一下：

```
a =  2  1 7 5 7 9
b = -1 -1 2 2 5 7

c   0 1 2 3 4 5 6 7 8 9
  0 - - - - - - - - - - 
```

其中 C 的索引是 a[i] 的值，这样 0,3,4,6,8 将具有空值。
并且 C 的第一维包含迄今为止最接近 a[i] 的值

```
So in step by a[3] we have the following
    c    0  1  2  3  4  5  6  7  8  9
      0  - -1 -1  -  -  2  -  2  -  -

  and by step a[5] we have the following

    c    0  1  2  3  4  5  6  7  8  9
      0  - -1 -1  -  -  2  -  5  -  7 
```

这样，当我们到达 a[4] 处的第 2 个 7 时，我们知道 2 是迄今为止的最大值，我们需要做的就是循环返回 a[i-1] 直到我们再次遇到比较 a[ 的 7 i] 的值改为 c[7] 中的值，如果更大，则替换 c[7]。一旦 a[i-1] = 7，我们将 c[7] 放入 b[i] 并继续下一个 a[i]。

我可以看到这种方法的主要缺点是：

*   占用空间大小取决于需要标注 c[] 的大小。
*   事实上，您必须重新访问您已经接触过的 a[] 元素。如果数据的分布使得两个 7 之间有很大的空间，那么跟踪最高值可能会更快。或者，最好先收集关于 a[i] 的统计信息以了解存在哪些分布，然后使用混合方法保持最大值，直到统计信息中不再有该数字的实例。

# javascript - 防止子窗口重定向父窗口

> ID：10163800
> 
> 赞同：3
> 
> 时间：2012-04-15T16:25:31.817
> 
> 标签：javascript, redirect, parent, window.opener

我有一个网站，我必须链接到另一个网站，这个另一个网站包含以下代码：

```
if (parent.window.opener) parent.window.opener.location='http://AdvertisingURL';
if (self.parent.frames.length!=0) self.parent.location=document.location; 
```

我网站上的链接是 target=_blank 的普通链接，当我点击它时，包含该代码的网站会在新窗口中打开，然后我的网站会被重定向到广告 URL。

**我怎么能在没有任何警报消息的情况下阻止该重定向？**

# c++ - 在 unordered_set 中插入一个新元素：提示应该是 end() 吗？

> ID：10163807
> 
> 赞同：6
> 
> 时间：2012-04-15T16:26:10.500
> 
> 标签：c++, stl, c++11

如果我确定某个值还没有进入 a `unordered_set`，并且我要插入这样的值，那么传递这个 set`end()`迭代器作为提示是否正确？

编辑：

代码：

```
#include <unordered_set>
using namespace std;

unordered_set<int> someset;

int main(){
    auto it=someset.find(0);
    if(it==someset.end()) someset.insert(it, 0);    //correct? possible performance boost if the set is actually populated?
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T16:36:18.143

我认为，您可以简单地调用`insert`函数，返回值会告诉您值是否已插入，或者它已经存在于集合中。

```
auto p = someset.insert(value);
if (!p.second) 
{
   std::cout << "value was already present in the set" << std::endl;
} 
```

实际上`p`是 type `std::pair<iterator,bool>`，所以`p.second`告诉你 value 是否被插入，或者它已经存在于集合中，并且`p.first`是告诉你 value 位置的迭代器。

请记住，这比您的方法更快，因为我的解决方案减少了整体工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:35:32.450

我假设您指的是`iterator insert ( const_iterator hint, value_type&& val );`哪个是 C++11 的成员`unordered_set`。[如此处](http://www.cplusplus.com/reference/stl/unordered_set/insert/)所述，`hint`用于插入新元素时的性能优化。新元素的插入/位置基于散列。因此，如果您知道如何为您生成哈希，`value_type`您可以预先生成它并向容器提供提示。

但是，编译器可能决定不使用它。所以我的假设是： using`end()`可以使用但它可能没有任何效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-29T16:35:36.170

我相信**提示是没有用**的`unordered_set`，同样的方法是没有用的`unordered_map`。这些方法的存在是为了维护这些容器的接口与它们的有序版本（分别为`set`和）兼容。`map`

在这里阅读更多：[std::unordered_map 插入提示](https://stackoverflow.com/questions/15559655/stdunordered-map-insert-with-hint)

# r - 如何在 Google 新闻中找到所有页面（Curl 的用户代理不起作用）？

> ID：10163810
> 
> 赞同：1
> 
> 时间：2012-04-15T16:26:44.413
> 
> 标签：r, screen-scraping, web-scraping, rcurl

对于我的项目，我需要获取某个关键字的新闻数量（来自谷歌新闻）的每日统计信息。但问题是通过浏览器获得的结果与通过 RCurl 获得的结果完全不同。似乎我错过了一些选择。应该做什么？非常感谢您提前提供任何提示！

这是代码（不是全部，只是 rcurl 选项），但 DPage 的内容与浏览器显示的内容不同 :( :

```
 require(RCurl)
    theURL<-"http://www.google.com/search?tbm=nws&q=Putin&tbs=cdr:1%2Ccd_min%3A09.11.10%2Ccd_max%3A09.11.11&tbm=nws"
    ch <- getCurlHandle()
    curlSetOpt(curl = ch,
               ssl.verifypeer = FALSE,
               useragent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.53.11 (KHTML, like Gecko) Version/5.1.3 Safari/534.53.10",
               timeout = 60,
               followlocation = TRUE,
               cookiejar = "./cookies",
               cookiefile = "./cookies") 
DPage <- getURL(theURL, curl = ch) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:46:55.413

Google 有一些防御措施来阻止不使用其自定义搜索 API 的自动请求。尝试在您的脚本中使用 Bing 搜索引擎 URL，它们还为开发人员提供了丰富的自定义搜索 API。 `http://www.bing.com/news/search?q=putin&p1=[NewsVertical+SortByDate%3d%221%22]&FORM=YGNR`

或者它的免费 RSS 提要，因为这不会对被阅读提供任何阻力。 `http://api.bing.com/rss.aspx?Source=News&Market=en-GB&Version=2.0&Query=putin`

# database - MVC 的实体框架查询

> ID：10163812
> 
> 赞同：1
> 
> 时间：2012-04-15T16:26:47.273
> 
> 标签：database, asp.net-mvc, entity-framework, code-generation, datacontext

我是 .net 世界的新手……我正在浏览一些 MVC 教程，其中我可以看到所有教程都在编写模型类然后创建数据库（可能用于教程）。但是对于我们不生成模型然后创建数据库的真实项目，我有一个问题。而是我们根据数据库生成模型。所以经过这么多的谷歌搜索和阅读不同的博客后，我开始知道我们可以使用 ADO.Net 实体数据模型来生成 DataContext。另外我知道我们不需要手动编写模型，因为实体数据模型会根据数据库生成所有模型类。谁能告诉我，对于现实世界的项目，我们是否使用 ADO.Net 实体数据模型来生成类，我们不需要自己编写任何模型类。

如果我错了请纠正...

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:39:03.873

确切地。您可以从现有数据库中提取模型类。

有关此主题的更多信息，请查看此博客文章：

[EF 4.2 模型和数据库首次演练](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-model-amp-database-first-walkthrough.aspx)

这是上面链接的帖子中的重要部分：

> “...如果您要映射到现有数据库，您现在可以选择“从数据库生成”，按照提示进行操作，然后跳到第 4 步。”

本文将向您展示使用 Database First 方法创建的完整 MVC 应用程序：

[使用 Database First 和 Entity Framework 4.1 构建 MVC 3 应用程序](http://msdn.microsoft.com/en-us/data/gg685489)

# php - 用数组 B 附加到数组 A（作为对数组 A 的引用？？）

> ID：10163816
> 
> 赞同：0
> 
> 时间：2012-04-15T16:27:23.160
> 
> 标签：php, arrays, append

我有两个变量，它们都是数组：

```
$var1=array();

$var1['something']['secondary_something'][1]="foo";
$var1['something']['secondary_something'][2]="foo";
$var1['something']['secondary_something'][3]="foo";
$var1['something']['secondary_something'][4]="foo"; 
```

现在我有一个函数，它需要一个数组作为输入：

```
function something($input=array()){

print_r($input);//print the array out

}//end of function 
```

但我需要`$input`像对 的引用`$var1`，所以当我调用函数时，像这样附加到变量 2 ( `$input`)：

```
$myInputVar=array();
$myInputVar['something']['secondary_something'][]="foo";
$myInputVar['something']['secondary_something'][]="foo";
//Notice how I append to the var above, not giving a key name in the third dimension of the array.
something($myInputVar); 
```

现在这将简单地打印：

```
Array ( [something] => Array ( [secondary_something] => Array ( [0] => foo [1] => foo ) ) ) 
```

但我需要第二个 var ( `$input`，来自函数) 作为第一个 var ( `$var1`) 的引用。

所以，最终结果应该是：

```
Array ( [something] => Array ( [secondary_something] => Array ( [5] => foo [6] => foo ) ) ) 
```

有些人告诉我使用`=&`（这使得一个 var 引用另一个），但我似乎无法理解`=&`在这种情况下我将如何使用它。

我想要做的甚至可能吗？如果是这样，请你照亮它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:36:21.547

我很难理解你想要达到的目标。为什么要打印数组？如果要将某些内容推入数组，则始终需要一个值和一个数组。
你可以这样做

```
function something(&$array, $val) { // take the assigned $array as reference
  $array[] = $val;
} 
```

然后调用

```
$test = array();
something($test, 'foo');
print_r($test); // => array ( 'test' ) 
```

我希望这有帮助

* * *

**编辑**

```
function something(&$array, $array_new) {
   $array = array_merge($array, $array_new); // to combine/merge both arrays
   // please keep in mind that $array is technically $var, because it references to this variable
}

$var1=array();

$var1['something']['secondary_something'][1]="foo";
$var1['something']['secondary_something'][2]="foo";
$var1['something']['secondary_something'][3]="foo";
$var1['something']['secondary_something'][4]="foo";

$myInputVar=array();
$myInputVar['something']['secondary_something'][]="foo";
$myInputVar['something']['secondary_something'][]="foo";

something($var, $myInputVar); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:39:31.337

您可以使函数接收对数组的引用。像这样：

```
function something(&$arr) {
    $arr['something']['secondary_something'][]="something1";
    $arr['something']['secondary_something'][]="something2";
} 
```

现在您可以执行以下操作：

```
$var1 = array();
$var1['something']['secondary_something'][1]="foo";
$var1['something']['secondary_something'][2]="bar";
$var1['something']['secondary_something'][3]="foobar";
$var1['something']['secondary_something'][4]="barfoo";
something($var1); //this should now append the items to $var1.
print_r($var1); //check to see if calling 'something' really did add the items. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:00:52.780

试试这个：

```
$var1 = array();
$var2 = array();

assign($var1, $var2, 'foo'); // add an item in both $var1 & $var2
assign($var1, $var2, 'bar'); // append another item it both $var1 & $var2
assign($var1, $var2, 'buz', 5); // add an item in both $var1 & $var2 at index 5

echo print_r($var1, TRUE) . print_r($var2, TRUE);

function assign(&$var1, &$var2, $value, $index=NULL) {
    if (is_int($index)) {
        $var1['something']['secondary_something'][$index] = $var2['something']['secondary_something'][$index] = $value;
    } else {
        $var1['something']['secondary_something'][] = $var2['something']['secondary_something'][] = $value;
    }
} 
```

这将输出：

```
Array ( [something] => Array ( [secondary_something] => Array ( [0] => foo [1] => bar [5] => buz ) ) ) Array ( [something] => Array ( [secondary_something] => Array ( [0] => foo [1] => bar [5] => buz ) ) ) 
```

# css - 如何将我的图标放在表格单元格的右上角？

> ID：10163820
> 
> 赞同：2
> 
> 时间：2012-04-15T16:27:36.757
> 
> 标签：css

我试图在表格单元格内放置一些图标`<td>`，但结果是它们位于屏幕的右上角（表格单元格之外）。

我的代码的简短版本是这样的：

```
<td class="td_name">
  <div class="actions">
    <div class="floatLeft iconset_16px update_sprite_bw_16px" title="Update"></div>
    <div class="floatLeft iconset_16px settings_sprite_bw_16px" title="Settings"></div>
    <div class="floatLeft iconset_16px delete_sprite_bw_16px" title="delete"></div>
  </div>
  <div class="gal_name">
    Some name
  </div>
</td> 
```

其中`td_name`position 设置为*relative*并`action`设置为*absolute*。这应该有效，但这次不行。

我在这里想念什么？[在 jsFidle 上查看完整的代码示例](http://jsfiddle.net/u9p4u/)。

**笔记**

我正在尝试将DIV`action`定位**在**`<td class="td_name">`.
如果您的 jsFiddle 仍然`iconset_16px`在 jsFiddle 的 HTML 窗口的右上角显示 div，那么您的示例也不起作用。

```
#sim_gallery .defaultList tr td.name {  position: relative; width: 200px; height: 100px; }
#sim_gallery .defaultList tr td .actions { position: absolute; top: 0px; right: 0px; margin: 5px;} 
```

**注意 2**
这适用于不熟悉表格用法的每个人。

在 90 年代初期，使用表格进行页面布局非常流行且非常简单。但设计师们很快就明白，改变布局是一种痛苦。使用表格还有[几个缺点](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)。

所以是的，你可以设计任何东西，而无需使用表格。

那么你什么时候使用桌子？表格通常用于显示表格数据。这是一种用于网络的 Excel 表格。我的经验是，构造表格数据比列表元素和 div 更容易。因此，在某些情况下，我使用表格时知道这不会对网站产生任何负面影响。

**所以，请不要开始争论使用表格有多糟糕。用你的能量来帮助我解决我的问题:)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:39:49.327

经过更多测试后，似乎无法定位表格单元格。哪种有意义。但我并没有试图定位表格单元格本身，而是单元格内的内容。

在网络上进行了更多研究（以及一些无用的辩论）之后，[我找到了这篇文章](http://css-tricks.com/absolutely-position-element-within-a-table-cell/)。这基本上给了我一个简短的答案：**不，这是不可能的。**

在他们的示例中，他们使用 jQuery。但是由于我仍然想使用 CSS 来做这件事，所以我想出了一个替代解决方案。

我只是将我的内容包装在表格单元格的 DIV 中，并确保该 DIV 与表格单元格一样大。瞧，一切都很好:)

```
.wrapper { width: 200px; height: 100px; line-height: 100px; position: relative; border: solid 1px #666; }
.actions { position: absolute; top: 0px; right: 0px; }
.iconset_16px { height: 16px; width: 16px; background-color: #87ceeb; margin: 3px;}
.floatLeft  { float:left!important; }

<table>
<tr>
<td>
 <div class="wrapper">
 <div class="actions">
   <div title="Update" class="floatLeft iconset_16px"></div>
   <div title="Settings" class="floatLeft iconset_16px"></div>
   <div title="delete" class="floatLeft iconset_16px"></div>
 </div>

 <div class="gal_name">
   <a title=" Adventure" href="#"> Adventure</a>
 </div>
 <div>   
</td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:35:36.190

不完全知道您要做什么，但是您是否尝试过设置`position: relative`您`<td>`的图标，然后根据需要调整图标的位置？

[http://jsfiddle.net/Z3kpr/1/](http://jsfiddle.net/Z3kpr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:35:53.070

您`div`下面的元素`actions`与您的`!important`标志一起向左浮动（出于这个原因，这是个坏主意），因此它们忽略了其父级的定位。

取下浮子，它们将被正确定位。

这是您更新的小提琴，*其中一个*已修复，因此您可以看到不同之处。 [http://jsfiddle.net/u9p4u/1/](http://jsfiddle.net/u9p4u/1/)

# java - 如何将连接信息传递给可运行对象？

> ID：10163822
> 
> 赞同：1
> 
> 时间：2012-04-15T16:27:43.467
> 
> 标签：java, multithreading

我在将一些连接信息传递给可运行线程时遇到问题（使用rabbitmq，但我认为这不是rabbitmq 特有的并且可以应用于任何东西）。我的目标是让一些工作线程处理队列中的一些工作，但我不希望每次都打开和关闭连接的开销。

代码在没有可运行的情况下工作（它实际上是从rabbitmq教程中偷来的）但是一旦我实现一个传递连接的可运行我在doWork（）上得到这个错误： `The method doWork(Channel, String) is undefined for the type Worker` 如果我从可运行中删除通道并且不发送它那么程序工作很好，但连接信息没有被传递。我能做些什么？

这是我的代码：

```
 //this is the standard stuff to start a connection
ConnectionFactory factory = new ConnectionFactory();
            factory.setHost("localhost");
            Connection connection = factory.newConnection();
            Channel channel = connection.createChannel();

        System.out.println(" [*] Waiting for messages. To exit press CTRL+C");

        channel.basicQos(1);

        QueueingConsumer consumer = new QueueingConsumer(channel);
        channel.basicConsume("task_queue", false, consumer);
      //end of standard stuff       

        while (true) {
          QueueingConsumer.Delivery delivery = consumer.nextDelivery();
          String message = new String(delivery.getBody());

          System.out.println(" [x] Received '" + message + "'");   
          doWork(channel, message); 
          System.out.println(" [x] Done" );

          channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
        }
      } 
```

然后：

```
 public class doWork implements Runnable{

        protected Channel channel = null;
        protected String message   = null;

        public doWork(Channel channel, String message) {
            this.channel = channel;
            this.message   = message;
        }

        public void run() { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:34:18.140

如果您将代码移动到 Runnable，这意味着您创建了一个新类。如果你想调用它，那么你应该有这样的东西

```
doWork work = new doWork(channel, message);
work.run(); 
```

但是您可能希望将所有这些移动到外部线程，这是通过以下方式完成的：

```
Thread t = new Thread(new doWork(channel, message));
t.start(); 
```

顺便说一句，类应该以大写字母开头，它使代码更具可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T16:34:14.647

您正在尝试调用名为的方法`doWork`：

```
 // this is a method call
 doWork(channel, message); 
```

你想做的（我猜）是这样的：

```
 new doWork(channel, message).run(); 
```

但更有可能你正试图在那里分叉一个线程，所以它会是：

```
 new Thread(new doWork(channel, message)).start(); 
```

顺便说一句，你应该把你的类名大写，这样更容易看到。 `doWork`应该重命名为，`DoWork`这样更容易看出方法名和类名之间的区别。方法名称应始终以小写字母开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T16:38:10.893

在您的`Worker`班级的某个地方，您定义了一个方法`doWork(String message)`。在您创建该类的实例并调用该实例上的方法之前，您的类中定义的内容`doWork`（其名称不遵循 Java 约定，顺便说一句）无关紧要；您目前正在尝试调用`Worker`该类的方法。

# node.js - 如何使用来自 Mongodb 中另一个查询的结果集来组成复杂的查询？

> ID：10163825
> 
> 赞同：0
> 
> 时间：2012-04-15T16:28:07.803
> 
> 标签：node.js, mongodb, express

我正在使用 Mongo（使用 Mongo 本机驱动程序）、Node 和 Express 编写应用程序。

我在 mongo 中有学生、课程和教授的文件。

我想检索学生当前正在学习或过去学习过的所有“教授”文件的列表。

```
Students: {courseid, ....}
Course: {professors, ....}
Professors: {....} 
```

这就是我打算做的：

1.  我首先发出一个查询来检索学生的所有课程 ID。
2.  然后我必须编写并发出另一个查询来获取所有这些课程的教授 ID。
3.  最后，我必须获取与教授 ID 相关的所有“教授”文件。

第 1 步没问题，现在我有了所有课程 ID。但我不确定如何执行第 2 步。第二步和第三步类似，一旦我弄清楚第二步，第三步就很容易了。

基本上我想在第 2 步中发出一个查询来检索所有教授 ID。我不想针对 10 个课程 ID 发出 10 个单独的查询。

这是我所拥有的：

```
function getProfsByStudent(req, res, next)
{
  db.collection('students', function(err, stuColl)
  {
    stuId = new ObjectID.createFromHexString(req.params.stuId);
    stuColl.find({_id : userId}, { 'current_course_id' : 1 , 'past_courses.course_id' : 1 , _id : 0 })
    {
      db.collection('courses', function(err, courseColl)
      {
        courseColl.find({$or : []}) // THIS IS WHERE I AM STUCK
      });
      res.send(posts);
    });
  });
} 
```

## 更新

根据答案更新问题。

所以，这是我在`stuColl.find`通话后得到的 JSON：

> [{"current_course_id":"4f7fa4c37c06191111000005","past_courses":[{"course_id":"4f7fa4c37c06191111000003"},{"course_id":"4f7fa4c37c06191111000002"}]}]

现在我想用上面的方法做另一个 find 来获取所有的教授 ID。但我得到的只是一个空结果。我认为我非常接近。我究竟做错了什么？

```
stuColl.find({_id : userId}, { 'current_course_id' : 1 , 'past_courses.course_id' : 1 , _id : 0 }).toArray(function(err, courseIdsArray)
        {
            db.collection('courses', function(err, courseColl)
            {
                courseColl.find({$or : [ {_id : 'courseIdsArray.current_courses_id' }, {_id : {$in : courseIdsArray.past_courses}} ]}, {'professor_ids' : 1}).toArray(function(err, professorIdsArray)
                {
                  res.send(professorIdsArray);
                });
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T22:36:33.563

我认为`$or`应该使用`$in`运算符而不是您

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)

和：

```
stuColl.find.... 
```

应该返回其结果`toArray`以在`$in`运算符中使用。

## 更新

我想这就是你要找的：

```
db.collection("Students").find({_id : "8397c60d-bd7c-4f94-a0f9-f9db2f14e8ea"}, {CurrentCourses:1, PastCourses : 1, _id : 0}).toArray(function(err, allCourses){
    if(err){
        //error handling
    }
    else{           
        var courses = allCourses[0].CurrentCourses.concat(allCourses[0].PastCourses);           
        db.collection("Courses").find({ _id : { $in: courses}}, {"Professors" : 1, _id : 0}).toArray(function(err, professors){ 
            if(err){
                //error handling
            }
            var allProfs = [];
            for(var i = 0; i < professors.length; i++){
                allProfs = allProfs.concat(professors[i].Professors);
            }
            db.collection("Professors").find({ _id : { $in: allProfs }}).toArray(function(err, results){
                console.log(results);
            });
        });         
    }
}); 
```

它通过学生集合找到学生，然后通过他/她的所有课程最终加载所有教师。

# ajax - 使用 jsf 2 渲染页面标题

> ID：10163828
> 
> 赞同：3
> 
> 时间：2012-04-15T16:29:23.673
> 
> 标签：ajax, jsf-2

有没有办法将页面标题包含在`f:ajax`标签中，以便在运行时更新其内容？目前我的 f:ajax 标签看起来像这样 -

```
<f:ajax render="@form"> 
```

我尝试将 id 添加到 h:head 标记，并将该 id 添加到 f:ajax 标记的 'render' 属性，但如果这样做，页面加载时会出现错误 -

```
<f:ajax> contains an unknown id 'pageHead' - cannot locate it in the context of the component B1 
```

干杯，埃雷兹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T17:57:43.943

有趣的问题。我认为在 ajax 的渲染（如@form）中没有这样的命令来重新渲染页面标题。你可以做的是像这样包装或`<title>`其他`<h:form>`“分组”组件（例如，`h:panelGroup`如丹尼尔所说）：

```
 <h:form id="titleForm">
        <title>#{fooBean.fooTitle}</title>
    </h:form> 
```

然后调用 ajax update 例如。带按钮：

```
 <h:commandButton immediate="true" value="Change title">
            <f:ajax event="click" render=":titleForm"  listener="#{fooBean.changeTitle}"/>
        </h:commandButton> 
```

豆：

```
 private String fooTitle;

  public void changeTitle() {
        this.fooTitle= "updatedTitle";
  }
// getter/setter 
```

我不知道你还能做什么，这应该可以。所以包装你`title`，`<h:form id="...">`然后从ajax渲染它。

# python - Python：简单的 ctypes dll 加载会产生错误

> ID：10163832
> 
> 赞同：2
> 
> 时间：2012-04-15T16:29:59.597
> 
> 标签：python, dll, ctypes, windowserror

[我从MSDN DLL 示例](http://msdn.microsoft.com/en-gb/library/ms235636%28v=vs.80%29.aspx)创建了 MathFuncsDll.dll并运行调用 .cpp 工作正常。现在，尝试在 IPython 中使用 ctypes 加载它

```
import ctypes
lib = ctypes.WinDLL('MathFuncsDll.dll') 
```

在正确的文件夹中产生

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe4 in position 28: ordinal not in range(128) 
```

类似地，在 Python shell 中，这会产生

```
WindowsError: [Error 193] %1 is not a valid Win32 application 
```

我应该改变什么？嗯，它可能是 Win 7 64 位与一些 32 位 dll 之类的，对吗？等我有空的时候再看看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:42:47.340

`ctypes`不适用于编写 MathFuncsDLL 示例的 C++。

相反，用 C 编写，或者至少导出一个“C”接口：

```
#ifdef __cplusplus
extern "C" {
#endif

__declspec(dllexport) double Add(double a, double b)
{
    return a + b;
}

#ifdef __cplusplus
}
#endif 
```

另请注意，调用约定默认为`__cdecl`，因此请使用`CDLL`而不是`WinDLL`（使用`__stdcall`调用约定）：

```
>>> import ctypes
>>> dll=ctypes.CDLL('server')
>>> dll.Add.restype = ctypes.c_double
>>> dll.Add.argtypes = [ctypes.c_double,ctypes.c_double]
>>> dll.Add(1.5,2.7)
4.2 
```

# c# - 一次显示列表中的项目 10 个字符串项目

> ID：10163838
> 
> 赞同：1
> 
> 时间：2012-04-15T16:30:37.923
> 
> 标签：c#, .net, winforms, list, foreach

大家好，我需要帮助。这是我的代码。

这是一个字符串列表。假设列表中有 100 个字符串。

现在在我的代码中，它可以一次显示 1 个项目到使用 foreach 的富文本框，但我希望它一次显示 10 个项目。

注意：此代码也在 foreach 语句中。因此，当显示 10 个项目时，必须在新的 10 个项目再次进入富文本框之前清除。

您对此有什么好的解决方案？

```
 //foreach (string str in links)
 //{

 Scanner scanner = new Scanner();
 List<string> query = scanner.Parse(parts);
 foreach (string item in query)
 {
     richTextBox6.Invoke((Action)(() => richTextBox6.Text = item)); 
 }

//} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:38:02.593

您可以使用 LINQ 并使用 Skip 和 Take，因此 Skip(10)、Take(10)，然后您可以通过这种方式解析您的逻辑。

[http://msdn.microsoft.com/en-us/library/bb386988.aspx](http://msdn.microsoft.com/en-us/library/bb386988.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:33:43.263

在 RichTextBox 上使用 AppendText 方法：

```
Scanner scanner = new Scanner();
List<string> query = scanner.Parse(parts);
foreach (string item in query)
{
     richTextBox6.Invoke((Action)(() => richTextBox6.AppendText(item))); 
} 
```

# c++ - 将字符串置于条件中（c ++）

> ID：10163840
> 
> 赞同：0
> 
> 时间：2012-04-15T16:30:51.770
> 
> 标签：c++, string, conditional-statements

为什么我收到这条线的错误？

```
void Student::SetName(const string newName)
{
 if(newName!=NULL) //could not deduce template argument for 'const T1 *' from 'int'
{
     .....
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:44:03.627

可能的解决方案 ：

```
if(!newName.empty())

if(newName.size()) // If size = 0 so no caracters in string

if(newName == "") // Empty string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:37:03.903

这不是 C#，C++ 中的字符串不是可为空的类型。只有指针实际上可以为 NULL，除非您使用指针，否则您不能定义一个变量而不在 C++ 中为其分配一些基本值。

您的代码应该如下所示：

```
if(!newName.empty())
    .... 
```

# c++ - C ++“警告：返回对临时的引用”-但事实并非如此

> ID：10163842
> 
> 赞同：2
> 
> 时间：2012-04-15T16:31:13.030
> 
> 标签：c++, qt, gcc

我有一个非常简单的方法，并且它的 const 重载。

```
Sy_animatable::PropertyTimeLine&
Sy_animatable_imp::getPropertyTimeLine( const QString& property )
{
    if ( !properties_.contains( property ) ) {
        throw Sy_unknownAnimPropertyException( property );
    }

    return properties_[property];
}

const Sy_animatable::PropertyTimeLine&
Sy_animatable_imp::getPropertyTimeLine( const QString& property ) const
{
    if ( !properties_.contains( property ) ) {
        throw Sy_unknownAnimPropertyException( property );
    }

    return properties_[property];  // "warning: returning reference to temporary"
} 
```

我不明白这个警告有两个原因：

1.  `properties_`是一个成员变量，它的下标运算符（它是 a `QMap`）返回一个引用，所以不应该有任何临时变量，并且它在对象的生命周期内是持久的。
2.  为什么警告出现在 const 重载而不是原来的？

我可以`#pragma`隐藏警告，但我真的很想知道它为什么给我警告 - 有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T16:37:05.943

看起来`[]`-operator for`QMap`具有奇怪的语义，有时会生成对临时的 const 引用（如果没有具有给定键的元素），并且该操作符的生命周期还不够长。

试试`return properties_.find(property).value();`吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:48:11.973

在 QMap 中，`operator[]()`有点古怪；它既可以在映射中插入（键，值）对，也可以用于查找值。该文档指出：

> 要查找一个值，请使用运算符或 value()：
> 
> ```
> int num1 = map["thirteen"];
> int num2 = map.value("thirteen"); 
> ```
> 
> 如果地图中没有具有指定键的项目，这些函数将返回一个默认构造的值。

`QMap::value()`如果指定的键不在映射中，则返回一个默认构造的值——这意味着一个值是使用默认构造函数创建的。这是您收到的警告所指的临时警告。`operator[]()`如果 (key, value) 对已经存在（但如果不存在），虽然不会静默插入，但 using`.value()`是可行的方法，尽管我不确定警告会消失。

# jquery - 我需要将我的 jQuery 代码缩小到重复

> ID：10163845
> 
> 赞同：-2
> 
> 时间：2012-04-15T16:31:40.423
> 
> 标签：jquery

> **可能重复：**
> [我需要缩小 jQuery 代码的大小](https://stackoverflow.com/questions/10159096/i-need-to-down-size-jquery-code)

昨天我放了一个你开发的 jQuery 代码片段，需要一点帮助，它工作得很好，但是它太长而且重复，我并不是不尊重昨天试图帮助我的程序员，因为有格子，但是它几乎可以肯定我没有问正确的问题，其中一个主题建议需要在这里提出问题，所以我现在正在这样做。

好的，正如您在代码中看到的那样，左侧 div 中有 12 个图块，这些图块将从 mySql 数据库生成，并将显示缩略图.. 当单击图块时，右侧 div 上的内容将淡出并呈现与单击的磁贴对应的 div，出现的 div 上的信息也存储在 mySql db 中。它工作正常，但是。整个事情的代码太大了，而且重复。它不是画廊，并且磁贴上的图标可能与正确的内容无关。

感谢 `mrtsherman`，`jfriend00`以及`elclanrs`昨晚的帮助，我知道没有问正确的问题是我的错。索姆，这里是实际代码：http: [//jsfiddle.net/tgcNd/6/](http://jsfiddle.net/tgcNd/6/)

在我的科学怪人的代码下面

```
jQuery(function($) {
function boton1(event)
{
$(".vitrina1").css("opacity","0");
$(".vitrina1").css("top","0");
$(".vitrina1").animate({"opacity":1,"top":0},300, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton2(event)
{
$(".vitrina2").css("opacity","0");
$(".vitrina2").css("top","-712px");
$(".vitrina2").animate({"opacity":1,"top":-712},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton3(event)
{
$(".vitrina3").css("opacity","0");
$(".vitrina3").css("top","-1424px");
$(".vitrina3").animate({"opacity":1,"top":-1424},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton4(event)
{
$(".vitrina4").css("opacity","0");
$(".vitrina4").css("top","-2136px");
$(".vitrina4").animate({"opacity":1,"top":-2136},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton5(event)
{
$(".vitrina5").css("opacity","0");
$(".vitrina5").css("top","-2848px");
$(".vitrina5").animate({"opacity":1,"top":-2848},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton6(event)
{
$(".vitrina6").css("opacity","0");
$(".vitrina6").css("top","-3560px");
$(".vitrina6").animate({"opacity":1,"top":-3560},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton7(event)
{
$(".vitrina7").css("opacity","0");
$(".vitrina7").css("top","-4272px");
$(".vitrina7").animate({"opacity":1,"top":-4272},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton8(event)
{
$(".vitrina8").css("opacity","0");
$(".vitrina8").css("top","-4984px");
$(".vitrina8").animate({"opacity":1,"top":-4984},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton9(event)
{
$(".vitrina9").css("opacity","0");
$(".vitrina9").css("top","-5696px");
$(".vitrina9").animate({"opacity":1,"top":-5696},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton10(event)
{
$(".vitrina10").css("opacity","0");
$(".vitrina10").css("top","-6408px");
$(".vitrina10").animate({"opacity":1,"top":-6408},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton11(event)
{
$(".vitrina11").css("opacity","0");
$(".vitrina11").css("top","-7120px");
$(".vitrina11").animate({"opacity":1,"top":-7120},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina12").animate({"top":7832},1, "linear", null);
}
function boton12(event)
{
$(".vitrina12").css("opacity","0");
$(".vitrina12").css("top","-7832px");
$(".vitrina12").animate({"opacity":1,"top":-7832},300, "linear", null);
$(".vitrina1").animate({"top":712},1, "linear", null);
$(".vitrina2").animate({"top":712},1, "linear", null);
$(".vitrina3").animate({"top":1424},1, "linear", null);
$(".vitrina4").animate({"top":2136},1, "linear", null);
$(".vitrina5").animate({"top":2848},1, "linear", null);
$(".vitrina6").animate({"top":3560},1, "linear", null);
$(".vitrina7").animate({"top":4272},1, "linear", null);
$(".vitrina8").animate({"top":4984},1, "linear", null);
$(".vitrina9").animate({"top":5696},1, "linear", null);
$(".vitrina10").animate({"top":6408},1, "linear", null);
$(".vitrina11").animate({"top":7120},1, "linear", null);
}
$('#btn1').bind('click', boton1);
$('#btn2').bind('click', boton2);
$('#btn3').bind('click', boton3);
$('#btn4').bind('click', boton4);
$('#btn5').bind('click', boton5);
$('#btn6').bind('click', boton6);
$('#btn7').bind('click', boton7);
$('#btn8').bind('click', boton8);
$('#btn9').bind('click', boton9);
$('#btn10').bind('click', boton10);
$('#btn11').bind('click', boton11);
$('#btn12').bind('click', boton12);
}); 
```

的HTML

```
<div id="contenedorPrimario">
<div id="botones">
<div class="boton" id="btn1"><a class="tooltip" rel="Contenedor 1"><img src="http://www.auviproducciones.com/more/imagenes/imagen1.jpg"></a></div>
<div class="boton" id="btn2"><a class="tooltip" rel="Cajón<br>Contenedor 2"><img src="http://www.auviproducciones.com/more/imagenes/imagen2.jpg"></a></div>
<div class="boton" id="btn3"><a class="tooltip" rel="Este es el<br>Cajón 3"><img src="http://www.auviproducciones.com/more/imagenes/imagen3.jpg"></a></div>
<div class="boton" id="btn4"><a class="tooltip" rel="Ejemplo de contenido<br>dentro del cajón<br>Contenedor 4"><img src="http://www.auviproducciones.com/more/imagenes/imagen4.jpg"></a></div>
<div class="boton" id="btn5"><a class="tooltip" rel="Aqui texto"><img src="http://www.auviproducciones.com/more/imagenes/imagen5.jpg"></a></div>
<div class="boton" id="btn6"><a class="tooltip" rel="Aqui texto"><img src="http://www.auviproducciones.com/more/imagenes/imagen6.jpg"></a></div>
<div class="boton" id="btn7"><a class="tooltip" rel="Aqui texto"><img src="http://www.auviproducciones.com/more/imagenes/imagen7.jpg"></a></div>
<div class="boton" id="btn8"><a class="tooltip" rel="Aqui texto"><img src="http://www.auviproducciones.com/more/imagenes/imagen8.jpg"></a></div>
<div class="boton" id="btn9"><a class="tooltip" rel="Aqui texto"><img src="http://www.auviproducciones.com/more/imagenes/imagen9.jpg"></a></div>
<div class="boton" id="btn10"><a class="tooltip" rel="Aqui texto"><img src="http://www.auviproducciones.com/more/imagenes/imagen10.jpg"></a></div>
<div class="boton" id="btn11"><a class="tooltip" rel="Aqui texto"><img src="http://www.auviproducciones.com/more/imagenes/imagen11.jpg"></a></div>
<div class="boton" id="btn12"><a class="tooltip" rel="Aqui texto"><img src="http://www.auviproducciones.com/more/imagenes/imagen12.jpg"></a></div>
</div>
<div id="aparador"> <!-- main right container -->
<div id="mercancia"> <!-- info Divs container this one scrolls uo and down if animation tyoe changes from fade to scroll -->
<div class="vitrina1">Hello this his window #1<br>with mySql content</div>
<div class="vitrina2">Hello this his window #2<br>with mySql content</div>
<div class="vitrina3">Hello this his window #3<br>with mySql content</div>
<div class="vitrina4">window #4<br>with mySql content</div>
<div class="vitrina5">window #5<br>with mySql content</div>
<div class="vitrina6">window #6<br>with mySql content</div>
<div class="vitrina7">window #7<br>with mySql content</div>
<div class="vitrina8">window #8<br>with mySql content</div>
<div class="vitrina9">window #9<br>with mySql content</div>
<div class="vitrina10">window #10<br>with mySql content</div>
<div class="vitrina11">window #11<br>with mySql content</div>
<div class="vitrina12">window #12<br>with mySql content</div>
</div>
</div>
</div> 
```

最后添加 CSS

```
#contenedorPrimario { position:relative;margin-left:auto;margin-right:auto;width:100%; background: url(../imagenes/fondo_index.jpg); width: 1100px; height: 800px;}
.clear {clear:both;}
/* Inicia Cajón Izquierdo */
#botones {position:absolute; width:450px; height: 592px; margin-left:3px; margin-right:20px;margin-top:50px;padding-bottom:4px;}
.boton {width:150px;height:142px;float:left;cursor: default;}
.boton img {width:150px;height:142px;}
#sociales { position: absolute; width:450px; height: 120px; margin-left: 2px; margin-top: 620px; /*background: #FF3300; */}
/* Inicia Cajón Derecho */
#aparador {position:absolute; margin-top: 50px; margin-left: 456px; width:641px;overflow: hidden; height:712px; background:#666; margin-right: 20px; }
#mercancia {position:absolute; width: 641px; height: 9324px; margin-top: 0px; visibility: visible; background: #fff; }
.vitrina1, .vitrina2, .vitrina3, .vitrina4, .vitrina5, .vitrina6, .vitrina7, .vitrina8, .vitrina9, .vitrina10, .vitrina11, .vitrina12 { position:relative; width:641px; height: 712px; }
.vitrina1 { /*background-color: #33CCCC;*/ background: #D2D2D2;}
.vitrina2 { background-color: #999900;}
.vitrina3 { background-color: #CC6600;}
.vitrina4 { background-color: #AA0000;}
.vitrina5 { background-color: #99CC33;}
.vitrina6 { background-color: #0066CC;}
.vitrina7 { background-color: #570699;}
.vitrina8 { background-color: #CC33CC;}
.vitrina9 { background-color: #02F965;}
.vitrina10 { background-color: #FFFF00;}
.vitrina11 { background-color: #C80461;}
.vitrina12 { background-color: #000066;}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:44:13.220

它不会编辑您的代码，但您可以使用[代码压缩器](http://javascriptcompressor.com/)来缩小代码，以便更快地加载页面。否则，您可以创建一个循环，但您仍然需要不会真正使代码更短的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:49:13.033

这看起来很微不足道...查看[我](http://jsfiddle.net/liho1eye/tgcNd/13/)的代码版本

```
$("#botones div.boton a").each(function(idx)
{
    $(this).click(function() 
    {
        $("#mercancia div").hide()
            .filter("div.vitrina" + (idx+1)).fadeIn();
        return false;
    });
});​ 
```

另请注意，我将`vitrina`s 的默认样式从更改`position:relative`为`display:none`

# c++ - C++ 模板类的动态数组（即向量）

> ID：10163846
> 
> 赞同：0
> 
> 时间：2012-04-15T16:31:54.193
> 
> 标签：c++, arrays, templates, dynamic

我目前正在自学 C++ 并尝试实现一个简单的哈希图（带有两个模板类）。

但是，我无法弄清楚如何正确初始化动态向量数组。我失败的尝试：

```
std::vector<Key> *keys = new std::vector<Key>[size];
std::vector<Key> *keys = (std::vector<Key> *) malloc(sizeof(std::vector<Key>) * size);
std::vector<Key> **keys = reinterpret_cast<vector<Key> **>(malloc(sizeof(vector<Key>) * size)); 
```

还是我在其他地方做错了什么？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:39:10.207

您正在做的事情是不必要的，矢量支持动态调整大小，您不需要`new`它。

所以：

```
std::vector<Key> keys = std::vector<Key>(size); // is fine to initialise the vector to a specific size. 
```

如果你想有一个指向向量的指针，那么你可以像这样新建

```
std::vector<Key>* keys = new std::vector<Key>(size); 
```

您也可以随时根据需要添加和删除元素，如果需要，它会调整大小，或者您可以强制它：

```
keys.resize(newSize); // note that if the new size is larger than current size
// it will default fill the new elements so if your `vector` is of `ints` 
// then it will pad with zeros. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:38:25.383

你应该这样做：

```
std::vector<Key> *keys = new std::vector<Key>(size); 
```

即使其中一种尝试奏效了：

```
std::vector<Key> *keys = (std::vector<Key> *) malloc(sizeof(std::vector<Key>) * size);
std::vector<Key> **keys = reinterpret_cast<vector<Key> **>(malloc(sizeof(vector<Key>) * size)); 
```

它会分配内存，但不会创建对象，因为它不会调用其构造函数。

# objective-c - 实现 Facebook iOS SDK - 没有“fbDidLogin”回调

> ID：10163851
> 
> 赞同：2
> 
> 时间：2012-04-15T16:32:34.563
> 
> 标签：objective-c, ios, facebook, sdk

我遵循官方 FB 文档中的集成步骤，并实现了 SDK 的“登录”和“发布到墙上”功能，一切正常，但问题是它只有在我使用主应用程序委托 .h/.m 文件时才有效. 但目前我需要将它放入另一个 .h/.m 文件 - 登录有效，但“fbDidLogin”回调从不调用，我使用 NSLog 进行检查。我对 ObjC 和使用游戏引擎不是很好，所以我想我错过了一些私人/公共声明等内容。你能引导我朝着正确的方向修复它吗？提前致谢！

代码如下所示：

。H

```
#import "FBConnect.h"
...
@interface S3DEngine_EAGLView : UIView <UITextFieldDelegate, FBSessionDelegate>
{   

@public Facebook *facebook;

@private
...
    EAGLContext                    *pEAGLContext                ;
...
}
@property NSTimeInterval iAnimationInterval;
@property(nonatomic, retain) NSMutableDictionary *achievementsDictionary;
@property (nonatomic, retain) Facebook *facebook;
... 
```

.m

```
@implementation S3DEngine_EAGLView
...
@synthesize facebook;
...
- (void)fbDidLogin {
}
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:49:04.820

如果您将 Facebook 委托分配给您的 viewController ，它将被触发。这就是我的想法，因为您正在为 Facebook 实例定义一个属性，您是否将其分配给应用程序委托中的那个？如果是这样，只需将 Facebook 实现从应用程序委托移动到您的 viewController。

# android - eglGetError() 报告错误成功

> ID：10163853
> 
> 赞同：0
> 
> 时间：2012-04-15T16:32:35.560
> 
> 标签：android, c++, opengl-es, error-handling, android-ndk

我正在使用 EGL/Android/NDK，并尝试检查错误，但 eglGetError() 正在返回 EGL_SUCCESS，即使我故意导致错误也是如此。

在 windows 下，这段代码产生 GL_INVALID_OPERATION，但是当通过 android NDK 使用 egl 时，我得到 EGL_SUCCESS..

```
glClear(GL_TEXTURE0);
Print("gl error: ", eglGetError());
exit(0); 
```

任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:37:44.210

eglGetError() 用于 EGL 函数（它们具有 egl 前缀）。要检查 OpenGL 函数（带有 gl 前缀）的错误，请使用 glGetError() 函数。

# javascript - 在附加到另一个元素之前，如何使用 Jquery/Javascript 从选择中删除一个元素？

> ID：10163854
> 
> 赞同：0
> 
> 时间：2012-04-15T16:32:36.747
> 
> 标签：javascript, jquery, jquery-selectors, filter, prepend

我有一组按钮，我正在动态添加按钮。我的选择将如下所示：

```
$elements = [a.midToggle, a.menuToggle, a.ui-crumbs] 
```

我想将此选择添加到现有的控制组：

```
<div data-role="controlgroup" data-type="horizontal" class="dropZone">
   <a href="#" class="some">Some</a>
   <a href="#" class="midToggle">MidTog</a>
</div> 
```

但是，在添加之前，我想从我的选择中删除控件组中已经存在的按钮，因为否则它们将在那里多次出现。

我正在尝试这样，但它根本不起作用：

```
// I have multiple controlgroups, so I need to add the buttons to all of them
$('.dropZone').each(function() {     

   var $first = $(this), 
   $buttons = $elements.clone();

   $buttons.each(function() {
     // check if class name on new button is already in controlgroup
     if ( $(this).is(".midToggle") && $first.find(".midToggle").length > 0 ) {
     $(this).remove();
         }
      if ( $(this).is(".menuToggle") && $first.find(".menuToggle").length > 0 ) {
     $(this).remove();
         }
      if ( $(this).is(".ui-crumbs") && $first.find(".ui-crumbs").length > 0 ) {
     $(this).remove();
         }
      });
 // append what's left
 $first.append( $buttons ) 
```

我认为我的*$buttons*没有被删除，但我不知道如何让它工作。我的三个 if 语句也有点蹩脚。有一个更好的方法吗？

**编辑：**
我不得不稍微修改一下解决方案，因为每个按钮都有多个类，所以我不能简单地检查*attr('class')*。这并不完美，但有效：

```
function clearOut($what) {
    $buttons.each(function () {
        if ($(this).is($what)) {
            $buttons = $buttons.not($what)
            }
        });
     }

// filter for existing buttons
// TODO: improve
if ($first.find('.midToggle')) {
    clearOut('.midToggle');
    }
if ($first.find('.menuToggle')) {
    clearOut('.menuToggle');
    }
if ($first.find('.ui-crumbs')) {
    clearOut('.ui-crumbs');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:50:09.413

我把你的代码分成了一半：

```
$('.dropZone').each(function() {
    var $dropZone = $(this);
    var $buttons = $elements.clone();
    $buttons.each(function() {
        var $button = $(this);

        if ($dropZone.find('.' + $button.attr('class')).length) 
            $button.remove();
    });

    $dropZone.append($buttons);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:11:53.583

```
$('.dropZone').each(function() {     
   $buttons = $elements.filter(function() {
       if ($('.'+this.className).length) return this;
   });
   $(this).append( $buttons );
}); 
```

# python - var = input("Press any key to continue") - 为什么这不起作用？

> ID：10163858
> 
> 赞同：3
> 
> 时间：2012-04-15T16:33:30.403
> 
> 标签：python, input, osx-snow-leopard

我在 Python 3.2.2 中写了一个小文本冒险，并将 .py 文件发送给使用 mac 的朋友。

他在下载了最新的雪豹python后运行了代码，它运行正常，直到代码中的行：var = input("press any key to continue")。之后它就停留在该行，没有产生任何错误或做任何事情，除了当他输入任何东西时什么都没有发生。他输入的字符出现在提示符处，但程序从未前进。

然后，我使用 cx_freeze 冻结了程序并将其发送给正在运行 windows xp 的姐姐（我也是），她也遇到了同样的问题。游戏加载正常，直到那条线。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:35:45.660

他们可能正在使用 python 2.x，并且需要按回车键。`input`需要*一行*输入，而不是单个字符。该`input`函数在 2.x 和 3.x 之间发生了根本性的变化，您看到的行为与 python 2.x 一致。

有关行为变化的背景，请参阅[PEP 3111](http://www.python.org/dev/peps/pep-3111/)

# c# - ListView、UserControl、DependencyProperty、ObservableCollection、INotifyPropertyChanged 的 绑定错误

> ID：10163862
> 
> 赞同：3
> 
> 时间：2012-04-15T16:34:00.823
> 
> 标签：c#, wpf, xaml, binding

我的绑定不起作用。我搜索了错误，但我不明白如何在我的情况下修复它。

> System.Windows.Data 错误：1：无法创建默认转换器以在类型“MyApplication.MyUserControl”和“MyApplication.Person”之间执行“单向”转换。考虑使用 Binding 的 Converter 属性。绑定表达式：路径=；DataItem='MyUserControl' (Name=''); 目标元素是'MyUserControl'（名称=''）；目标属性是“PersonInfo”（类型“Person”）
> 
> System.Windows.Data 错误：5：BindingExpression 生成的值对目标属性无效。；Value='MyApplication.MyUserControl' BindingExpression:Path=; DataItem='MyUserControl' (Name=''); 目标元素是'MyUserControl'（名称=''）；目标属性是“PersonInfo”（类型“Person”）

基本上它是一个绑定到 Person 类的 ObservableCollection 的 ListView。

**主窗口.xaml.cs**

```
public partial class MainWindow : Window
{
    public ObservableCollection<Person> PersonCollection { set; get; }

    public MainWindow()
    {
        PersonCollection = new ObservableCollection<Person>();
        InitializeComponent();
        PersonCollection.Add(new Person() { Name = "Bob", Age = 20 });
    }
} 
```

**主窗口.xaml**

```
<Window DataContext="{Binding RelativeSource={RelativeSource Self}}" xmlns:self="clr-namespace:MyApplication" x:Class="MyApplication.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<ListView ItemsSource="{Binding PersonCollection}">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <self:MyUserControl PersonInfo="{Binding}" />
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView>
</Window> 
```

**MyUserControl.xaml.cs**

```
public partial class MyUserControl : UserControl
{
    public static readonly DependencyProperty PersonProperty = DependencyProperty.Register("PersonInfo", typeof(Person), typeof(MyUserControl));

    public Person PersonInfo
    {
        get { return (Person)GetValue(PersonProperty); }
        set { SetValue(PersonProperty, value); }
    }

    public MyUserControl()
    {
        InitializeComponent();
    }
} 
```

**MyUserControl.xaml**

```
<UserControl DataContext="{Binding RelativeSource={RelativeSource Self}}" x:Class="MyApplication.MyUserControl" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">
<TextBlock Text="{Binding PersonInfo.Name}" />
</UserControl> 
```

**个人.cs**

```
public class Person : INotifyPropertyChanged
{
    public int Age { set; get; }
    public string Name { set; get; }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(info));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:14:41.110

我不太明白你为什么要把它弄得那么复杂。您可以轻松地绑定您的 UserControl，而无需该`PersonInfo`属性且无需修改其 DataContext。

```
<UserControl x:Class="MyApplication.MyUserControl" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"> 
    <TextBlock Text="{Binding Name}" /> 
</UserControl> 
```

然后将 UserControl 放置在没有显式绑定的 DataTemplate 中。然后它的 DataContext 将已经包含一个 Person 对象。

```
<DataTemplate>      
    <StackPanel>      
        <self:MyUserControl />      
    </StackPanel>      
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T17:26:05.317

尽管您解决了问题，但您的整个 Binding 代码对我来说似乎是错误的，所以我提出了这个替代方案：

拥有所有绑定源对象的基类 - **ObservableObject.cs**

```
public abstract class ObservableObject : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        var handler = this.PropertyChanged;
        if (handler != null)
            handler(this, e);
    }

    protected void SetValue<T>(ref T field, T value, string propertyName)
    {
        if (!EqualityComparer<T>.Default.Equals(field, value))
        {
            field = value;
            this.OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

为您的 MainWindow 提供一个视图模型 - **MainWindowModel.cs**

```
public class MainWindowModel : ObservableObject
{
    private readonly ObservableCollection<Person> personCollection = new ObservableCollection<Person>()
    {
        new Person() { Name = "Bob", Age = 20 }
    };

    public ObservableCollection<Person> PersonCollection
    {
        get { return this.personCollection; }
    }
} 
```

**MainWindow.xaml.cs**现在基本上是空的。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
} 
```

**MainWindow.xaml**将 DataContext 设置为新的 MainWindowModel 实例。

```
<Window x:Class="MyApplication.MainWindow" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:self="clr-namespace:MyApplication">
    <Window.DataContext>
        <self:MainWindowModel/>
    </Window.DataContext>
    <ListView ItemsSource="{Binding PersonCollection}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <self:MyUserControl/>
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Window> 
```

**MyUserControl.xaml.cs**也基本上是空的（仅包含自动生成的代码）。

```
public partial class MyUserControl : UserControl
{
    public MyUserControl()
    {
        InitializeComponent();
    }
} 
```

**MyUserControl.xaml**

```
<UserControl x:Class="MyApplication.MyUserControl" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <TextBlock Text="{Binding Name}"/>
</UserControl> 
```

**个人.cs**

```
public class Person : ObservableObject
{
    private int age;
    private string name;

    public int Age
    {
        get { return this.age; }
        set { this.SetValue(ref this.age, value, "Age"); }
    }

    public string Name
    {
        get { return this.name; }
        set { this.SetValue(ref this.name, value, "Name"); }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T16:56:41.070

将您的 UserControl XAML 更改为

```
<UserControl x:Class="MyApplication.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">
    <TextBlock DataContext="{Binding RelativeSource={RelativeSource AncestorType=UserControl}}"
               Text="{Binding PersonInfo.Name}" />
</UserControl> 
```

这是对 DataContext 问题的一个[很好的解释](http://www.scottlogic.co.uk/blog/colin/2012/02/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight/)。

# pygame - 错误的颜色通道，pygame cairo rsvg 绘图

> ID：10163870
> 
> 赞同：1
> 
> 时间：2012-04-15T16:34:33.360
> 
> 标签：pygame, cairo, pycairo, rsvg

我有 cairo+rsvg 在 pygame 中渲染一个 .svg 文件。但是颜色通道是错误的。

使用[lion.svg进行测试](http://croczilla.com/bits_and_pieces/svg/samples/lion/lion.svg)

但图像是： ![在此处输入图像描述](../Images/7068a9ee4babc3dfaa7b4ab00170b1d8.png)

我相信我已经交换了我的 RGBA 通道顺序，（他是粉红色的，而不是黄色的）。但不清楚它是如何工作的。这是我的代码，（否则渲染正确。）

也许`pygame.display.set_mode(...)`或者`pygame.image.frombuffer(...)`是相关的问题？

```
import pygame
from pygame.locals import * 
import os
import cairo
import rsvg
import array

WIDTH, HEIGHT = 60,60

class Lion(object):
    """load+draw lion.svg"""
    def __init__(self, file=None):
        """create surface"""
        #  Sprite.__init__(self)
        self.screen = pygame.display.get_surface()                                    
        self.image = None
        self.filename = 'lion.svg'
        self.width, self.height = WIDTH, HEIGHT

    def draw_svg(self):
        """draw .svg to pygame Surface"""
        svg = rsvg.Handle(file= os.path.join('data', self.filename))        
        dim = svg.get_dimension_data()
        self.width , self.height = dim[0], dim[1]

        data = array.array('c', chr(0) * self.width * self.height * 4 )
        cairo_surf= cairo.ImageSurface.create_for_data( data,
            cairo.FORMAT_ARGB32, self.width, self.height, self.width * 4 )
        ctx = cairo.Context(cairo_surf)

        svg.render_cairo(ctx)
        self.image = pygame.image.frombuffer(data.tostring(), (self.width,self.height), "ARGB")

    def draw(self):
        """draw to screen"""
        if self.image is None: self.draw_svg()
        self.screen.blit(self.image, Rect(200,200,0,0))

class GameMain(object):
    """game Main entry point. handles intialization of game and graphics, as well as game loop"""    
    done = False
    color_bg = Color('black') # or also: Color(50,50,50) , or: Color('#fefefe')

    def __init__(self, width=800, height=600):
        pygame.init()

        self.width, self.height = width, height
        self.screen = pygame.display.set_mode(( self.width, self.height ))
        #  self.screen = pygame.display.set_mode(( self.width, self.height ),0,32) # 32bpp for format 0x00rrggbb

        # fps clock, limits max fps
        self.clock = pygame.time.Clock()
        self.limit_fps = True
        self.fps_max = 40

        self.lion = Lion()

    def main_loop(self):
        while not self.done:
            # get input            
            self.handle_events()
            self.draw()
            # cap FPS if: limit_fps == True
            if self.limit_fps: self.clock.tick( self.fps_max )
            else: self.clock.tick()

    def draw(self):
        """draw screen"""
        self.screen.fill( self.color_bg )
        self.lion.draw()
        pygame.display.flip()

    def handle_events(self):
        """handle events: keyboard, mouse, etc."""
        events = pygame.event.get()

        for event in events:
            if event.type == pygame.QUIT: self.done = True
            # event: keydown
            elif event.type == KEYDOWN:
                if event.key == K_ESCAPE: self.done = True

if __name__ == "__main__":         
    print """Keys:
    ESC    = quit
"""    
    game = GameMain()
    game.main_loop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:44:59.447

确实 - 每个通道的字节顺序从 cairo 到 pygame 是不同的。您可以在将其转换为字符串之前处理数组，以正确的顺序为 pygame 发布数据（您必须为每个像素交换绿色和蓝色数据） - 或使用附加依赖项：Python 的 PIL，以本机速度正确处理不同的数据。

在 pygame 的网站上有一个片段：

```
def bgra_surf_to_rgba_string(cairo_surface):
    # We use PIL to do this
    img = Image.frombuffer(
        'RGBA', (cairo_surface.get_width(),
                 cairo_surface.get_height()),
        cairo_surface.get_data(), 'raw', 'BGRA', 0, 1)
    return img.tostring('raw', 'RGBA', 0, 1)

 ...
 # On little-endian machines (and perhaps big-endian, who knows?),
# Cairo's ARGB format becomes a BGRA format. PyGame does not accept
# BGRA, but it does accept RGBA, which is why we have to convert the
# surface data. You can check what endian-type you have by printing
# out sys.byteorder
data_string = bgra_surf_to_rgba_string(cairo_surface)

# Create PyGame surface
pygame_surface = pygame.image.frombuffer(
    data_string, (width, height), 'RGBA') 
```

检查整个食谱： http: [//www.pygame.org/wiki/CairoPygame](http://www.pygame.org/wiki/CairoPygame)

如果您不想添加额外的依赖项（在这种情况下为 PIL），Python 的本机数组允许切片分配 - 使用这些数组可以以本机速度交换蓝色和绿色通道的数据 - 尝试这种交换（可能需要一些调整 :-) 这是在将您的图像加载为 png 文件后对我有用的方法，而不是来自 cairo 上下文）

```
def draw_svg(self):
    """draw .svg to pygame Surface"""
    svg = rsvg.Handle(file= os.path.join('data', self.filename))        
    dim = svg.get_dimension_data()
    self.width , self.height = dim[0], dim[1]

    data = array.array('c', chr(0) * self.width * self.height * 4 )
    cairo_surf= cairo.ImageSurface.create_for_data( data,
        cairo.FORMAT_ARGB32, self.width, self.height, self.width * 4 )
    ctx = cairo.Context(cairo_surf)

    blue = data[1::4]
    green = data[3::4]
    data[1::4] = green
    data[3::4] = blue
    svg.render_cairo(ctx)
    self.image = pygame.image.frombuffer(data.tostring(), (self.width,self.height), "ARGB") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-15T07:39:28.847

如果阵列切片不起作用，我可以提供 PIL 方法吗？

它的灵感来自提到的相同[Pygame 配方](http://www.pygame.org/wiki/CairoPygame)jsbueno，但我将其清理并组织成一个独立的函数。它接受一个文件名作为参数，并返回一个`pygame.Surface`就像`pygame.image.load()`会的。

```
import pygame     # python-pygame
import rsvg       # python-rsvg
import cairo      # python-cairo
import PIL.Image  # python-imaging

def load_svg(filename):
    ''' Load an SVG file and return a pygame.Surface '''

    def bgra_rgba(surface):
        ''' Convert a Cairo surface in BGRA format to a RBGA string '''
        img = PIL.Image.frombuffer(
            'RGBA', (surface.get_width(), surface.get_height()),
            surface.get_data(), 'raw', 'BGRA', 0, 1)
        return img.tostring('raw', 'RGBA', 0, 1)

    svg = rsvg.Handle(filename)
    width, height = svg.props.width, svg.props.height

    surface = cairo.ImageSurface(cairo.FORMAT_ARGB32, width, height)
    svg.render_cairo(cairo.Context(surface))

    return pygame.image.frombuffer(bgra_rgba(surface), (width,height), "RGBA") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-16T22:20:34.663

如果不想使用 PIL，正确的数组切片是：

```
def draw_svg(self):
    """draw .svg to pygame Surface"""
    svg = rsvg.Handle(file= os.path.join('data', self.filename))        
    dim = svg.get_dimension_data()
    self.width , self.height = dim[0], dim[1]

    data = array.array('c', chr(0) * self.width * self.height * 4 )
    cairo_surf= cairo.ImageSurface.create_for_data( data,
        cairo.FORMAT_ARGB32, self.width, self.height, self.width * 4 )
    ctx = cairo.Context(cairo_surf)
    svg.render_cairo(ctx)

    blue = data[0::4]
    red = data[2::4]
    data[0::4] = red
    data[2::4] = blue

    self.image = pygame.image.frombuffer(data.tostring(), (self.width,self.height), "ARGB") 
```

# php - 为什么我会收到这个错误？

> ID：10163871
> 
> 赞同：1
> 
> 时间：2012-04-15T16:34:48.530
> 
> 标签：php

> **可能重复：**
> [PHP 类常量 - 公共、私有还是受保护？](https://stackoverflow.com/questions/4505165/php-class-constants-public-private-or-protected)

解析错误：**语法错误，**意外的 T_CONST，期望 T_VARIABLE 在

代码 -

```
<?php
    // Data Transfer Object
        class DTO {
            private const ADMINSLATOR_ID = 'Adminslator';
            private const ADMINSLATOR_PASSWORD = 'Secret';

            function __construct(){
                echo "I am the DTO Object";
            }
        }
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T16:37:49.037

因为类常量在 PHP 中不可见。它们始终是静态的并且可以从外部（即公共）调用。去掉`private`前面的就行了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:40:38.507

您的代码应如下所示：

```
<?php
// Data Transfer Object
    class DTO {
        private static $ADMINSLATOR_ID = 'Adminslator';
        private static $ADMINSLATOR_PASSWORD = 'Secret';

        function __construct(){
            echo "I am the DTO Object";
        }
    }
?> 
```

我将 $ 符号添加到您的变量中，并将 const 替换为 static。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:40:23.660

类常量在 php 中不能是私有的。如果您需要一些私有变量，可以使用私有静态 $ADMINSLATOR_ID 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T16:44:38.780

删除`private`关键字之前放置的`const`关键字；因为类常量不能是私有的。

# jquery - 在 Grails 中 jQuery 之前加载 jQuery 子插件

> ID：10163874
> 
> 赞同：0
> 
> 时间：2012-04-15T16:35:08.053
> 
> 标签：jquery, ajax, grails, load-order

我正在尝试将 jQuery 和 Cycle 插件与现有应用程序集成。但是，我遇到了有关 javascript 代码加载顺序的问题。具体来说，循环 javascript 在 jquery 库之前加载。

我在页面上按顺序定义了三个脚本

```
<g:javascript library="jquery" />
<jq:plugin name="cycle" />
<g:javascript src="scripts.js" /> 
```

但是，根据 Firebug 的 NET 选项卡，循环插件首先加载，然后是脚本 javascript 代码，然后是 jquery 库。最终结果是幻灯片的第一个图像正在显示，但没有发生过渡。

如何更改加载顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:41:18.833

解决方案是手动下载 jquery 文件并将其保存在 /web-app/js 中，然后包含`<script type="text/javascript" src="${resource(dir:'js', file:'jquery-1.7.2.js') }"></script>`在 head 标签中。以前，依赖已安装的插件会导致延迟加载 jQuery 库，从而导致我的问题。

# c++ - 在构造函数调用期间将 this 传递给对象内的对象

> ID：10163875
> 
> 赞同：0
> 
> 时间：2012-04-15T16:35:11.493
> 
> 标签：c++, compiler-errors

我试图在很长一段时间内完成我的第一次编译，我认为这是最后一个障碍。

我正在尝试在我的设计中创建这种类型的层次结构。

```
 class chin_
  {
  private:
    charon_* engine;

  public:
    chin_();
    chin_(charon_ &handle)
    {
      engine = handle;
    }
    ~chin_();
  }; 
```

//////////////

```
 class charon_ {
  private:
    chin_ engine_input;

  public:
    charon_(){
      engine_input = chin_(this);
    }
    ~charon_();
  }; 
```

我收到错误消息，告诉我没有可调用的匹配函数

```
'chio::chin_::chin()' 
```

它还说，请注意，这只是当我将构造函数更改为 charon_&

```
public:
        chin_(const charon_ &handle)
        {
          engine = handle;
        }
sys/../headers/chio.h:104:5: note:   no known conversion for argument 1 from ‘charon::charon_* const’ to ‘const charon::charon_&’ 
```

当我使用 * 而不是 & 时，我得到了这个，这更令人困惑。

```
sys/../headers/chio.h:104:5: note: chio::chin_::chin_(const charon::charon_*)
sys/../headers/chio.h:104:5: note:   candidate expects 1 argument, 0 provided 
```

我已经尝试过这个和那个，我认为这可能是超级简单的事情。我已经尝试将我的代码与我找到的示例完全匹配，所以我不知道我还应该尝试什么，我希望能够自己解决这类问题。我只是没有运气。

编辑：我更新了代码，但我将更新后的错误留在了底部。

```
sys/chin.cpp:19:14: error: cannot convert ‘charon::charon_’ to ‘charon::charon_*’ in assignment 
```

它带我进入这段代码

```
 chin_::chin_(charon_ &handle) {
    engine = handle;
  } 
```

引擎定义为 charon_* 引擎；并且句柄似乎是一个地址，应该就位，但事实并非如此。我想我没有正确使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:41:19.643

当你声明这样的事情时：

```
 chin_ engine_input; 
```

chin_ 需要一个没有参数的构造函数，或者你必须在初始化列表中将参数传递给它，否则你会得到关于没有匹配构造函数的错误。

你可以做的是要么有一个不带参数的默认构造函数。或者使 engine_input 成为一个指针并使用以下命令创建它：

```
 engine_input = new chin_(handle); 
```

或者，您可以在初始化列表中将句柄传递给 chin_，如下所示：

```
 foo::foo(charon* handle):
 chin_(handle)
{

} 
```

# python - 完成传输后将文件移动到另一个目录

> ID：10163877
> 
> 赞同：6
> 
> 时间：2012-04-15T16:35:34.043
> 
> 标签：python, bash, ubuntu, file-monitoring

我有一个视频编码脚本，我想在文件移动到特定目录后立即运行它。

如果我使用 inotify 之类的东西，如何确保文件在完成移动之前不会被编码？

我考虑过做类似的事情：

*   将 (rsync) 文件复制到临时目录中。
*   完成后，将（简单的'mv'）移动到编码目录。
*   让我的脚本监视编码目录。

但是，如何让步骤 #2 正常工作并且仅在 #1 完成后运行？

我正在使用 Ubuntu Server 11.10，我想使用 bash，但如果这样可以简化问题，我可能会被说服使用 Python。

我本身并不是将文件“下载”到此目录中；相反，我将在绝大多数时间使用 rsync。

此外，此 Ubuntu Server 正在 VM 上运行。

我通过 NFS 从 FreeBSD 服务器安装了我的主文件存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:01:55.960

最简单的方法是使用类似`wget`或`curl`在文件完成下载之前不会退出的程序进行下载。如果做不到这一点，我不确定这是否是绝对最好的解决方案，但您可以使用循环的脚本，检查文件是否打开使用`lsof`and `grep`：

```
while lsof | grep /path/to/download >/dev/null; do sleep 5; done
mv /path/to/download /path/to/encode/dir 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:52:32.450

我使用的一种技术适用于 FTP。您向 FTP 服务器发出命令以将文件传输到辅助目录。命令完成后，您向服务器发送第二条命令，这一次告诉它将文件从 aux 目录重命名为最终目标目录。如果您使用 inotify 或轮询目录，文件名将不会出现直到重命名完成，因此，您可以保证文件是完整的。

我对 rsync 不熟悉，所以我不知道它是否具有类似的重命名功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T14:34:43.483

`inotifywait`看起来很有希望。您必须小心一点，因为如果在设置通知之前下载完成，它将永远等待。

```
inotifywait -e close_write "$download_file"
mv "$download_file" "$new_location" 
```

# ios - 提高 UIWebView 滚动性能的方法？

> ID：10163879
> 
> 赞同：15
> 
> 时间：2012-04-15T16:35:38.503
> 
> 标签：ios, performance, uiwebview, webkit, scroll

我正在构建一个应用程序，其中`UIWebView`包含大量图像、CSS、嵌入式视频和 JavaScript Tap 处理程序。滚动性能是断断续续的，我正在寻找最有效的方法来改善这一点。

如果以下任何特征导致`UIWebView`滚动延迟，哪一个？还有哪些其他因素可能会阻碍性能？

*   图像数量
    *   当用户滚动过去时，我是否应该从 DOM 中删除图像，并在它们向上滚动时将它们添加回来？
*   图像大小
    *   Web 视图中的 Retina 质量图像会比较小的版本对滚动性能的影响更大吗？
*   图像缩放
    *   提前调整图像大小会产生很大的不同，而不是依靠 web 视图根据声明进行缩放`width: 100%;`？
*   CSS
    *   我已经避免了`box-shadow`，但是是否还有其他众所周知的对滚动性能产生不利影响的 CSS 属性？

如果有任何其他资源或工具可用于分析，我很乐意听到它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T13:49:45.973

这是我前段时间从 Apple Developer Technical Support 得到的答案：

> 目前，我们没有提供任何机制来优化 UIWebView 的渲染。您看到差异的原因是 Mobile Safari 和 UIWebView 没有使用相同的渲染引擎。
> 
> 性能取决于加载的内容。如果有 javascripts 正在运行或正在使用插件，这可能会影响性能。
> 
> 我建议您在[http://developer.apple.com/bugreporter/](http://developer.apple.com/bugreporter/)提交一份错误报告，详细说明您的情况。这也将使您随时了解错误报告的状态。

UIWebView 的一个可能替代方案是开源 DTCoreText 库：[https](https://github.com/Cocoanetics/DTCoreText) ://github.com/Cocoanetics/DTCoreText ，它为 Float Reader 应用程序提供支持：http: [//itunes.apple.com/us/app/float-reader /id447992005?mt=8](http://itunes.apple.com/us/app/float-reader/id447992005?mt=8)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T07:09:23.347

LinkedIn 的人在他们的 iPad 应用程序上使用 UIWebView 和 HTML5 做了大量工作。它们包含大量图像、文本和视频的整个提要在 UIWebView 中呈现。

以下博客文章应该为您提供许多性能改进的起点

[LinkedIn for iPad：在 HTML5 中实现平滑无限滚动的 5 种技术](http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T16:28:33.253

不久前我有一个类似的问题。我发现将 webview 放在滚动视图中可以显着提高滚动性能。在 webview 完成加载后，我禁用了 webview 的滚动，将 webview 的 frame 和 scrollview 的 contentSize 设置为 webview 内容的大小。

```
-(void) webViewDidFinishLoad:(UIWebView *)webView {   
    float size = [[self.webView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight"] floatValue];
    [self.scrollView setContentSize:CGSizeMake(self.view.frame.size.width, size)];
    [webView setFrame:CGRectMake(webView.frame.origin.x,
                                 webView.frame.origin.y,
                                 webView.frame.size.width,
                                 size)];

    [(UIScrollView*)[webView.subviews objectAtIndex:0] setScrollEnabled:NO];
} 
```

我假设 webview 在图像即将出现在屏幕上之前不会加载图像，这会导致卡顿，并且通过将其放入滚动视图并将框架设置为内容大小，它必须提前加载它们，但我不确定。我也确信这会产生后果（即预先增加内存使用量），但我这样做从来没有遇到任何问题。

# java - 最简单/最有效的方法来不断检查和读取 PHP 文件以了解 Java 中的数据库更改？

> ID：10163880
> 
> 赞同：1
> 
> 时间：2012-04-15T16:35:44.053
> 
> 标签：java, php, mysql

我在 PHP 中有一个使用 MySQL 数据库的简单朋友系统。我还有一个 Java 应用程序，用户可以通过 PHP 系统向某人发送好友请求，收件人可以接受。当用户发送好友请求时，PHP 将发送者和接收者的用户名写入数据库的表中，现在为了检查好友请求，接收者必须手动刷新 PHP 文件（输出发送者的用户名）。

我正在使用 HttpConnection 手动检查 PHP 文件并加载输出，但我想知道是否有办法不断轮询或保持从 PHP 文件中读取更新信息的活动连接，以便可以自动通知收件人只要发件人发送好友请求而不是每秒重新加载文件（这不会占用大量带宽）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:22:12.797

您可以使用 AJAX 来继续检查，而不是让用户执行硬刷新。

其他选择是使用网络工作者： [https ://developer.mozilla.org/en-US/docs/DOM/Using_web_workers?redirectlocale=en-US&redirectslug=Using_web_workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers?redirectlocale=en-US&redirectslug=Using_web_workers)

tkx

# regex - 解释这个 R 正则表达式

> ID：10163894
> 
> 赞同：4
> 
> 时间：2012-04-15T16:37:15.457
> 
> 标签：regex, r

最近，mrdwab 回答了一个 R 问题，该问题使用了一个非常酷的正则表达式（[链接](https://stackoverflow.com/questions/10161807/reshape-in-the-middle)）。我喜欢这个响应，但无法概括它，因为我不明白发生了什么（我被提供的不同数值愚弄了，但这并没有真正产生任何有用的东西）。有人可以逐个分解正则表达式并解释发生了什么吗？

```
x <- c("WorkerId", "pio_1_1", "pio_1_2", "pio_1_3", "pio_1_4", "pio_2_1", 
"pio_2_2", "pio_2_3", "pio_2_4")

gsub("([a-z])_([0-9])_([0-9])", "\\1_\\3\\.\\2", x)  #Explain me please 
```

先感谢您。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T16:41:32.343

任何你有一个字符和两个下划线分隔的数字（例如，a_1_2）的地方，正则表达式都会选择匹配的字符和数字并将它们作为变量提供。`\\1`, `\\2`, 并`\\3`引用原始表达式中匹配的参数：

```
\\1 <- a
\\2 <- 1
\\3 <- 2 
```

像上面那样运行的结果`gsub`是在表达式中搜索匹配项，并在它们出现的任何地方翻转数字的顺序。因此，例如，`a_1_2`将变为`a_2.1`.

```
"\\1_\\3\\.\\2"
#  a_  2  .  1 
```

# java - 模式：从参数填充实例并将其导出到 XML

> ID：10163895
> 
> 赞同：1
> 
> 时间：2012-04-15T16:37:15.940
> 
> 标签：java, xml, design-patterns, marshalling

我正在构建一个简单的 RESTFul 服务；为了实现这一点，我需要两个任务：

*   从请求参数中获取我的资源（即 Book）的实例，以便我可以持久化该实例
*   从该实例构建 XML 文档以将表示发送到客户端

现在，我正在我的 POJO 课程中做这两件事：

```
public class Book implements Serializable {

    private Long id;

    public Book(Form form) {
        //Initializing attributes
        id = Long.parseLong(form.getFirstValue(Book.CODE_ELEMENT));
    }

    public Element toXml(Document document) {
        // Getting an XML Representation of the Book
        Element bookElement = document.createElement(BOOK_ELEMENT);
    } 
```

我记得一个 OO 原则，它说行为应该在数据所在的位置，但现在我的 POJO 依赖于请求和 XML API，感觉不对（而且，该类具有持久性注释）

是否有任何标准方法/模式来解决该问题？

**编辑：** 我使用的库是 Restlets 和 Objectify。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:35:13.270

当您说行为应该在数据所在的位置时，我同意您的看法。但同时，正如你所说，我只是不喜欢用用于序列化手段的特定方法污染 POJO 接口（根据你想要的方式，它可以显着增长 - JSON、XML 等）。

> 1) 从该实例构建一个 XML 文档以将表示发送给客户端

为了将对象与序列化逻辑分离，我将采用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)：

```
interface BookSerializerStrategy {
    String serialize(Book book);
}

public class XmlBookSerializerStrategy implements BookSerializerStrategy {

    public String serialize(Book book) {
        // Do something to serialize your book.
    }

}

public class JsonBookSerializerStrategy implements BookSerializerStrategy {

    public String serialize(Book book) {
        // Do something to serialize your book.
    }

} 
```

您的 POJO 接口将变为：

```
public class Book implements Serializable {

    private Long id;
    private BookSerializerStrategy serializer

    public String serialize() {
        return serializer.serialize(this);
    }

    public void setSerializer(BookSerializerStrategy serializer) {
        this.serializer = serializer;
    }
} 
```

使用这种方法，您将能够在一个地方隔离序列化逻辑，并且不会污染您的 POJO。此外，返回一个 String 我不需要将 POJO 与类*Document*和*Element*结合起来。

> 2）从请求参数中获取我的资源（即书）的一个实例，这样我就可以让那个实例被持久化

在我看来，找到一种处理反序列化的模式更为复杂。我真的没有看到比使用静态方法创建工厂以从 POJO 中删除此逻辑更好的方法。

回答您的两个问题的另一种方法类似于 JAXB 使用的方法：两个不同的对象，一个负责反序列化的*Unmarshaller*和一个负责序列化的*Marshaller*。从 Java 1.6 开始，JAXB 默认随 JDK 一起提供。

最后，这些只是建议。实际上，我对您的问题非常感兴趣，并对其他可能的解决方案感到好奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:43:46.200

您是否在项目中使用 Spring 或任何其他框架？如果您使用 Spring，它将为您处理序列化，并将请求参数分配给方法参数（根据需要进行解析）。

# ruby - 一行 if-then 没有 else 子句

> ID：10163898
> 
> 赞同：2
> 
> 时间：2012-04-15T16:38:00.957
> 
> 标签：ruby, ruby-on-rails-3, if-statement

我有以下一段代码，我想知道它是否可以压缩为一行：

```
if self.id
  return if Party.find_by_id(self.id).name.downcase == self.name.downcase
end 
```

我想知道是否无论如何都要在一行中有这个声明。

我知道你可以使用`if statement ? then_statement : else_statement`，但希望你能在这里看到没有别的东西。也许`break`或`continue`或类似的东西？（如果您看到它，请随意对实际代码进行优化 - 这几乎就是这里的目的）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T16:39:29.573

很简单，把它们塞在一起:)

```
return if self.id && Party.find_by_id(self.id).name.downcase == self.name.downcase 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:41:57.397

这些都是等价的：

```
if some_condition
    do_something
end

if some_condition; do_something; end

do_something if some_condition;

some_condition and do_something 
```

但是，当然，您的示例已经使用了其中两个变体:)

# assembly - 为什么我没有得到正确的结果

> ID：10163903
> 
> 赞同：-4
> 
> 时间：2012-04-15T16:38:34.623
> 
> 标签：assembly, x86, x86-16

我想用汇编添加两个 30 位数字。如您所知，在 8086 中我们不能添加两个 30 位数字。所以我必须用字符串来做。并使用 AAA 命令将结果放入 sum 变量中，最后检查我们是否执行过，但主要问题是 sum 的结果不正确。它给了我 59427532 加上这 668399 + 759133 的总和。

你能告诉我确切的问题在哪里吗？

```
 .model small
    .stack 64
    .data
    max1 db 30  
    acc1 db ?
    num1 db 30 dup('0')
    max2 db 30
    acc2 db ?
     num2 db 30
    sum db 31 dup('0'),'$'
    .code 
    start:
     mov ax,@data
     mov ds, Ax
     mov ah,0ah
     lea dx, max1   ;take max 1 and length store it to acc1
     int 21h 
     mov ah,0ah
     lea dx,max2    ;take max2 and length store it to acc2
     int 21h
       mov cl,acc1  ;check if they are equal
     cmp cl,acc2
     jne exit
     mov ch,0   ;make sure our cx is the length of our string
     clc
      mov si,cx ;set the length for index the char
      dec si        
      l1:
      mov al,num1[si]   ;sum two hex number
      adc al,num2[si]   ;add with carry flag
       aaa          ;seperate carry and  hex number and store it into al
       pushf    
       add al,30h       ;convert it to ascii again
       mov sum[si+2],al ;because of dec si we have to step
       popf
       dec si
       loop l1
       jne print
        mov sum,31h     ; if we have carry flag add to sum otherwise jumpt print 
       print:
       mov ah,09h       ;the main problem is here shows the result
       lea dx,sum
        int 21h                      
       exit:
      mov ax,4c00h
       int 21h
     end start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:34:49.840

谢谢我的朋友的帮助，我发现了问题。我们应该替换 mov sum[si+1], al 而不是 mov sum[si+2],al

# javascript - AJAX / jQuery / 等库之前的 JavaScript 同步功能 - 无法回忆实现，任何建议

> ID：10163904
> 
> 赞同：0
> 
> 时间：2012-04-15T16:38:38.517
> 
> 标签：javascript, asynchronous

自从我进行任何 JavaScript 开发以来已经有很多年（~10 年）了，现在我又回到了一些 JS 开发中，这种情况真是令人惊讶。那里似乎有很多图书馆。

好吧，这是我的问题，我记得我们曾经使用 XmlHttlRequests 进行异步 JS 函数调用。我记得我们过去常常通过监听 =4 等状态来编写显式函数。事后看来，与我现在看到的一些东西相比，它似乎是非常低级的 JS。

当前的问题，我正在使用来自同步的 3rd 方 API 的 JS 函数。有什么方法可以使它异步，如果它没有“回调”参数，而原始 API 作者没有改变？任何包装器、模式或任何这些新库都可以做到这一点？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:44:57.073

您没有指定您正在使用哪个库，但[jQuery 的 AJAX 函数](http://api.jquery.com/jQuery.ajax/)提供了一个名为**async**的选项，它指定是否异步执行调用（默认为 true）。

# c# - 无法设置 MediaPlayer.Volume

> ID：10163905
> 
> 赞同：1
> 
> 时间：2012-04-15T16:38:47.570
> 
> 标签：c#, media-player, windows-phone-7.1

我正在研究控制音量的不同方法，但似乎无法在我的 Windows Phone 7.1 应用程序中设置 MediaPlayer.Volume。基本上，调用

```
MediaPlayer.Volume = value; 
```

没有效果，调用 MediaPlayer.IsMuted = TRUE 没有效果。

例子：

```
public MainPage()
{
    InitializeComponent();
    //Play a song from the collection
    FrameworkDispatcher.Update(); 
    MediaPlayer.Play(ml.Artists[0].Songs[0]);
}

private void Button_Click(object sender, RoutedEventArgs e)
{
    //Reduce volume to 0
    FrameworkDispatcher.Update(); 
    MediaPlayer.Volume = 0.0f;
    //If I set a breakpoint here, MediaPlayer.Volume is 1.0
}

private void Button_Click_1(object sender, RoutedEventArgs e)
{
    //This also has no effect...
    FrameworkDispatcher.Update(); 
    MediaPlayer.IsMuted = !MediaPlayer.IsMuted;
} 
```

有谁知道我误解了什么简单明显的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:36:27.787

我不熟悉 MediaPlayer，但从 Zune 库播放时，您似乎不再被允许设置 Volume 和 Muted 属性。[XNA Studio 4.0 的变化](http://blogs.msdn.com/b/nicgrave/archive/2011/03/18/mediaplayer-changes-in-xna-game-studio-4-0-for-windows-phone.aspx)

我假设您的`ml`变量引用了 Zune 媒体库，这就是您遇到此问题的原因。如果您停止播放歌曲，然后调整音量，或事先调整音量，那么问题应该会消失。

你也可以看看`MediaElement`它是否适合你的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:23:48.083

或者您的设备只是不支持 MediaPlayer Volume API。

来自：[给 XNA WP7 开发者的提示](http://geekswithblogs.net/mikebmcl/archive/2011/03/10/tips-for-xna-wp7-developers.aspx)

**声音的**

· 永远不要依赖声音作为向玩家发出游戏中正在发生某些事情的唯一信号。他们可能会关掉声音。他们可能在某个地方大声播放。等等。

· 你必须提供控制来禁用声音和音乐。这些应该是分开的。

·**在至少一种型号的手机上，音量控制 API 目前无效。**玩家可以使用硬件音量按钮调节声音，但在游戏中选择器根本不起作用。因此，除了声音和音乐的开/关开关之外，可能不值得付出任何努力。

# android - Eclipse 与 Android 布局的 main.xml？

> ID：10163911
> 
> 赞同：4
> 
> 时间：2012-04-15T16:39:16.100
> 
> 标签：android, eclipse

> **可能重复：**
> [移动和消失的代码行；Eclipse 的 XML 编辑器的问题](https://stackoverflow.com/questions/10030727/moving-and-vanishing-lines-of-code-trouble-with-eclipses-xml-editor)

每当我尝试编辑布局时，我都会注意到 Eclipse 的这个奇怪问题。这甚至不是编辑的问题。当我点击 main.xml 文件时，这是问题所在，没错，点击。它会自动复制我的行信息，将其推送到下一行并将整个文件搞砸。Eclipse 可以很好地处理我的所有其他文件，例如 Android 中的 string.xml 和 java 文件。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:05:29.367

经过一些测试，我发现“自动格式化由可视布局编辑器编辑的 XML”选项（在 Preferences | Android | Editors 中）可能是这里的罪魁祸首。

通过我的测试，我发现在图形布局设计模式下更改属性（例如 layout_gravity）总是会在此选项打开但返回 XML（文本）模式时搞砸文件的视觉显示，但是当它关闭时我没有问题。

如果您想在从图形布局设计模式返回时格式化 XML，只需使用快捷键 Ctrl-Shift-F。此外，我没有发现使用“保存时格式化”选项有任何问题；即使我在图形布局模式下使用它；因此，当您仍处于图形布局模式时，您可以使用 Ctrl-S 来保存和格式化您的 XML。

我尝试了其他编辑器选项，例如“显示范围指示器”或“使用字符显示垂直标尺的变化”，但我没有看到激活或取消激活这些选项的行为有任何差异。

最后，纠正文件损坏时的视觉显示；我发现使用快捷键：Ctrl-A、Ctrl-C、Ctrl-V 比关闭/重新打开文件要容易一些。这相当于做了一个全选、复制、粘贴；有效地将整个 XML 文件复制到自身之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:01:06.310

我发现有时可以通过向下和向上滚动 xml 文件来解决此问题。如果这不起作用，那么您可以关闭 xml 文件并重新打开它。

# javascript - 在 Tomcat 中更改 .xml.gz 的 mime 类型

> ID：10163917
> 
> 赞同：2
> 
> 时间：2012-04-15T16:39:39.233
> 
> 标签：javascript, tomcat, gzip, mime-types, content-type

我需要从 Javascript (JQuery) 中获取 xml gzip 压缩数据文件，并且我希望浏览器在将它们传递给 JS 之前自动解压缩它们。

据我所知，这可以通过服务器返回文件来实现，`content-type: text/html`并且`content-encoding x-gzip.`

目前，Tomcat 将 .xml.gz 文件返回为`Content-Type:application/x-gzip`，我应该怎么做才能让我的文件具有正确的标题？

我试图添加到 web.xml 文件中：

```
<mime-mapping>
  <extension>xml.gz</extension>
  <mime-type>text/xml</mime-type>
</mime-mapping> 
```

但它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T00:36:47.943

将 XML mime 类型添加到`gz`扩展中：

```
<mime-mapping>
    <extension>gz</extension>
    <mime-type>text/xml</mime-type>
</mime-mapping> 
```

**参考**

*   [多商店 web.xml](http://wiki.apache.org/jakarta-slide/Multi_Store_Web.XML)

*   [Tomcat来源：trunk/conf/web.xml](http://svn.apache.org/repos/asf/tomcat/tc8.0.x/trunk/conf/web.xml)

# java - Android 市场许可 (LVL) 始终返回 RETRY

> ID：10163922
> 
> 赞同：3
> 
> 时间：2012-04-15T16:40:19.510
> 
> 标签：java, android, android-lvl

我正在尝试在尚未发布的应用程序中使用 Android 营销许可。

我已经使用 ServerManagedPolicy 安装并集成了 LVL 库。

问题是，在运行许可证检查时，无一例外地调用 LicenseCheckerCallback.dontAllow 并返回响应“RETRY”。

我已经阅读了很多关于这个主题的帖子，并且......

*   清单文件包含 CHECK_LICENSE 权限
*   我正在运行与上传到开发者帐户完全相同的 .apk 文件
*   我已将测试用户添加到开发者帐户
*   运行 2.2 的模拟器和运行 2.3 的设备上的响应相同
*   无论是作为测试用户还是开发者用户登录，响应都是一样的
*   无论我在开发者帐户中选择了 LICENSED 还是 NOT_LICENCED，响应都是相同的
*   尽管模拟器和设备始终都有互联网连接，但没有连接时的响应实际上是相同的
*   代码目前没有被混淆

我的代码基本上是文档提供的...

```
String deviceId = Settings.Secure.getString(getContentResolver(),Settings.Secure.ANDROID_ID);

mLicenseCheckerCallback = new MyLicenseCheckerCallback();
mChecker = new LicenseChecker(
            this, new ServerManagedPolicy(this,
                    new AESObfuscator(SALT, getPackageName(), deviceId)),
            BASE64_PUBLIC_KEY);

mChecker.checkAccess(mLicenseCheckerCallback); 
```

我还有什么选择可以让这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:27:24.113

答案竟然在这里…… [Android Context.bindService 总是返回 false 并且永远不会触发 ServiceConnection 对象](https://stackoverflow.com/questions/2914921/android-context-bindservice-always-returns-false-and-serviceconnection-object-is)

许可证检查是从标签页调用的，所以代码应该是......

```
String deviceId = Settings.Secure.getString(getContentResolver(),Settings.Secure.ANDROID_ID);

mLicenseCheckerCallback = new MyLicenseCheckerCallback();
mChecker = new LicenseChecker(
        getApplicationContext(), new ServerManagedPolicy(this,
                new AESObfuscator(SALT, getPackageName(), deviceId)),
        BASE64_PUBLIC_KEY);

mChecker.checkAccess(mLicenseCheckerCallback); 
```

# linux - 文本编辑器无法删除最后一个换行符

> ID：10163926
> 
> 赞同：1
> 
> 时间：2012-04-15T16:40:41.710
> 
> 标签：linux

我正在使用 Geany，在 ubuntu 上编辑一个简单的文件。有一个奇怪的错误。当我删除最后一个 '\n' 字符时，当我保存它时它仍然存在。我不想要换行符，因为我正在使用 matlab 解析文件，并且它将 '\n' 字符计为 1 个字符。任何帮助从文件中删除它？为什么我的文本编辑器不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:12:33.987

根据[文档](http://www.geany.org/manual/current/index.html#saving-files)，保存时（在首选项->文件下）有一个“确保文件末尾换行”选项，请尝试禁用它。

作为一个相关的故事（如果有人应该通过谷歌搜索），不久前我对[Nano](http://www.nano-editor.org/dist/v2.2/nano.1.html)`-L`也遇到了同样的问题 - 结果你需要用开关启动它，以使它不会在末尾插入换行符。

# android - Android：处理来自多个活动的 GPS

> ID：10163927
> 
> 赞同：0
> 
> 时间：2012-04-15T16:40:48.667
> 
> 标签：android, gps

我正在开发一个使用来自多个活动的 GPS 的 Android 应用程序。我一直在寻找一种从所有活动中访问 GPS 的好方法，而无需在每次从一项活动转移到另一项活动时启动/停止 GPS（接收事件）。在此[链接](https://stackoverflow.com/questions/5783611/android-best-way-to-implement-locationlistener-across-multiple-activities)中，建议使用服务并在 OnStart/OnStop 上绑定/取消绑定，因为它们重叠。

我真的很喜欢这个主意，但是我留下了一个问题。当我的应用程序不再处于活动状态（即按下主页按钮）时，我想停止 GPS。在这种情况下，只会调用 OnPause。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:52:14.923

我已经使用了这种方法，如果您在 onStop() 中取消绑定，它就可以正常工作。当您的应用程序不再可见时，将调用该方法。按主页键将使您的应用程序不可见。

当我从选择活动到 OSM 活动，再到谷歌地图活动，然后点击主页按钮时记录。（OSM 和 Google 都将服务与 GPS 位置监听器一起使用）（我暂停了 OSM 活动以更改首选项设置，因此暂停并重新启动）

```
04-15 17:41:47.903: D/ACTIVITY(376): Select Mode Activity onPause
04-15 17:41:47.953: D/ACTIVITY(376): OSM Activity onCreate
04-15 17:41:48.043: D/ACTIVITY(376): OSM Activity onStart
04-15 17:41:48.063: D/ACTIVITY(376): OSM Activity onResume
04-15 17:41:49.394: D/ACTIVITY(376): Select Mode Activity onStop
04-15 17:42:04.213: D/ACTIVITY(376): OSM Activity onPause
04-15 17:42:04.763: D/ACTIVITY(376): OSM Activity onStop
04-15 17:43:00.483: D/ACTIVITY(376): OSM Activity onStart
04-15 17:43:00.533: D/ACTIVITY(376): OSM Activity onResume
04-15 17:43:20.683: D/ACTIVITY(376): OSM Activity onPause
04-15 17:43:20.723: D/ACTIVITY(376): Google Activity onCreate
04-15 17:43:20.853: D/ACTIVITY(376): Google Activity onStart
04-15 17:43:20.873: D/ACTIVITY(376): Google Activity onResume
04-15 17:43:21.307: D/ACTIVITY(376): OSM Activity onStop
04-15 17:43:40.833: D/ACTIVITY(376): Google Activity onPause
04-15 17:43:41.403: D/ACTIVITY(376): Google Activity onStop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:45:19.307

每当我们按下 Home 按钮时，任何其他活动都会从活动生命周期方法中进入前台，我们还有一个称为 onUserLeaveHint 方法的方法。

onUserLeaveHint() 与活动的其他生命周期方法一样是受保护的方法，如果您正在处理 onUserLeaveHint 这将处理以下情况

当用户点击主页键时

当用户按下返回键时

当用户点击信号器栏时

基本上它暗示用户正试图离开你的活动。这意味着如果您正在处理 onUserLeaveHint() ，则不需要在代码中处理 onBackPressed() 。

# android - layoutAnimation 只工作一次

> ID：10163928
> 
> 赞同：8
> 
> 时间：2012-04-15T16:40:50.900
> 
> 标签：android, animation, android-linearlayout, expandablelistview

我有一个用于自定义的`LinearLayout`with属性。像这样 ：`layoutAnimation``ExpandableListView`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layoutAnimation="@drawable/list_layout_controller"
    android:orientation="vertical" > 
```

当我单击列表时，将显示动画。但它只工作一次，并且不会在下次单击时为列表设置动画。为什么？

请让我知道，如果您需要更多描述。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T15:29:33.200

布局动画在视图添加到布局时运行。因此，您必须在每次展开/折叠时手动添加/删除视图，布局动画才能正常工作。

为此，您可以维护一个以列表索引为键的视图 Map。每次点击时，只需从地图中选择相应的项目并添加到您的布局中。动画将在该视图上运行，您的问题已得到解决。

您也可以尝试通过更改`onClick()`. 但不确定这一点。试着让我知道。

希望有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-22T06:32:13.870

首先你要声明

```
Animation  listanimation = AnimationUtils.loadAnimation(mainActivity.this, R.anim.list_layout_controller); 
```

并且每次都是`clearAnimation`第一。在 LinearLayout 的点击事件中

```
 linearLayout.clearAnimation();
 linearLayout.startAnimation(listanimation); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T05:39:41.107

称呼

listView.scheduleLayoutAnimation();

在列表中的所有更改之前

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T11:09:49.593

尝试在每个项目单击时重新启动动画：

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
      view.getAnimation().start();
      //your custom logic
}
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-13T12:31:57.970

只需使用

```
public void startLayoutAnimation () 
```

[http://developer.android.com/reference/android/view/ViewGroup.html#startLayoutAnimation()](http://developer.android.com/reference/android/view/ViewGroup.html#startLayoutAnimation())

# android - 我可以在视图之间共享 Paint 实例吗？

> ID：10163931
> 
> 赞同：2
> 
> 时间：2012-04-15T16:41:04.690
> 
> 标签：android, paint, synchronized, ondraw

所有 Android onDraw 调用都在同一个线程中完成吗？

我创建了一个 Paint 对象并在我的程序中的所有视图中共享它。在继续使用对象之前，不同的视图会根据自己的喜好更改对象（例如，setTextSize()、setTextAlign() 等）。它在模拟器中工作。恐怕它会在其中一部手机/平板电脑上崩溃。会吗？这件事有什么规范吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:44:14.373

框架的所有调用都`onDraw`发生在主 (UI) 线程上。您应该能够共享单个`Paint`对象而不会崩溃。但是，视图的绘制顺序是不可预测的；没有一个视图依赖于另一个设置了特定字体、颜色等的视图。

# java - 带有 NetBeans 的 Java GUI

> ID：10163932
> 
> 赞同：0
> 
> 时间：2012-04-15T16:41:16.783
> 
> 标签：java, swing, user-interface

我正在尝试在 GUI 中制作图表，但我真的不明白它是如何工作的。我可以使用 netbeans 拖放来制作事物的视觉方面，但是当涉及到编码时，我不明白。

在我制作了事物的视觉方面之后，我如何将动作/事件等事物放在一起。这是我的设计代码。

```
package my.mathamaticsui;

public class MathamaticsUI extends javax.swing.JFrame {

    /**
     * Creates new form MathamaticsUI
     */
    public MathamaticsUI() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jScrollPane5 = new javax.swing.JScrollPane();
        jList1 = new javax.swing.JList();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextArea2 = new javax.swing.JTextArea();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jScrollPane3 = new javax.swing.JScrollPane();
        jTextArea3 = new javax.swing.JTextArea();
        jScrollPane4 = new javax.swing.JScrollPane();
        jTextArea4 = new javax.swing.JTextArea();
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jTabbedPane2 = new javax.swing.JTabbedPane();
        jLabel2 = new javax.swing.JLabel();

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );

        jList1.setModel(new javax.swing.AbstractListModel() {
            String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
            public int getSize() { return strings.length; }
            public Object getElementAt(int i) { return strings[i]; }
        });
        jScrollPane5.setViewportView(jList1);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jTabbedPane1.setBackground(new java.awt.Color(204, 204, 204));

        jTextArea2.setBackground(new java.awt.Color(204, 204, 204));
        jTextArea2.setColumns(20);
        jTextArea2.setEditable(false);
        jTextArea2.setFont(new java.awt.Font("Times New Roman", 3, 18)); // NOI18N
        jTextArea2.setRows(5);
        jTextArea2.setText("Polynominal Functions:\nf(x)= ax^3 + bx^2 + c\n\n");
        jScrollPane2.setViewportView(jTextArea2);

        jTabbedPane1.addTab("Polynominal", jScrollPane2);

        jTextArea1.setBackground(new java.awt.Color(204, 204, 204));
        jTextArea1.setColumns(20);
        jTextArea1.setFont(new java.awt.Font("Times New Roman", 3, 18)); // NOI18N
        jTextArea1.setRows(5);
        jTextArea1.setText("Exponential Functions:\nf(x) = Ae^x\nf(x) = Ab^x");
        jScrollPane1.setViewportView(jTextArea1);

        jTabbedPane1.addTab("Exponential", jScrollPane1);

        jTextArea3.setBackground(new java.awt.Color(204, 204, 204));
        jTextArea3.setColumns(20);
        jTextArea3.setFont(new java.awt.Font("Times New Roman", 3, 18)); // NOI18N
        jTextArea3.setRows(5);
        jTextArea3.setText("Trigonometric Functions:\nf(x) = AsinBx + c");
        jScrollPane3.setViewportView(jTextArea3);

        jTabbedPane1.addTab("Trigonometric", jScrollPane3);

        jTextArea4.setBackground(new java.awt.Color(204, 204, 204));
        jTextArea4.setColumns(20);
        jTextArea4.setFont(new java.awt.Font("Times New Roman", 3, 18)); // NOI18N
        jTextArea4.setRows(5);
        jTextArea4.setText("Parametric Functions:\nf(t) = (AcosBt, AsinDt)\n");
        jTextArea4.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jScrollPane4.setViewportView(jTextArea4);

        jTabbedPane1.addTab("Parametric", jScrollPane4);

        jPanel2.addAncestorListener(new javax.swing.event.AncestorListener() {
            public void ancestorMoved(javax.swing.event.AncestorEvent evt) {
            }
            public void ancestorAdded(javax.swing.event.AncestorEvent evt) {
                jPanel2AncestorAdded(evt);
            }
            public void ancestorRemoved(javax.swing.event.AncestorEvent evt) {
            }
        });

        jLabel1.setFont(new java.awt.Font("Times New Roman", 1, 18)); // NOI18N
        jLabel1.setText("Graph");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addComponent(jLabel1)
                .addGap(0, 0, Short.MAX_VALUE))
            .addComponent(jTabbedPane2)
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTabbedPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 178, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        jLabel2.setFont(new java.awt.Font("Times New Roman", 1, 18)); // NOI18N
        jLabel2.setText("Data");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jTabbedPane1)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jLabel2)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(9, 9, 9)
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTabbedPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 155, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void jPanel2AncestorAdded(javax.swing.event.AncestorEvent evt) {                                      
        // TODO add your handling code here:
    }                                     

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MathamaticsUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MathamaticsUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MathamaticsUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MathamaticsUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new MathamaticsUI().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JList jList1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JTabbedPane jTabbedPane2;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextArea jTextArea2;
    private javax.swing.JTextArea jTextArea3;
    private javax.swing.JTextArea jTextArea4;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:48:08.140

我建议从 Swing 教程开始：

[http://docs.oracle.com/javase/tutorial/uiswing/TOC.html](http://docs.oracle.com/javase/tutorial/uiswing/TOC.html)

注意：在 NetBeans 中，注册事件监听器

*   点击组件
*   在属性面板中：转到事件选项卡并注册一个名称
*   转到代码视图并添加您的侦听器代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T16:58:31.690

如果你想添加一个新类，你必须在 nebeans 中去 file-> new -> class 并定义一个名为：“Dog”的新类。然后在 main 函数中实例化 Dog 类，如下所示：

```
public static void main(String args[]) { 
    Dog dog = new Dog();
} 
```

一旦你实例化了你的类，你就可以向 Dog 添加方法，并在那里调用它们。您不是“向 GUI 添加类”，而是向您的 java 项目添加类。您无法使用拖放可视化编辑器功能创建和连接新类。此链接解释了如何向您的 java 项目添加一个类并将其连接起来：

[http://docs.oracle.com/javase/tutorial/getStarted/cupojava/netbeans.html](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/netbeans.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T07:17:29.567

我建议，您从 java 概念的开头开始，了解代码的实际含义。在抽象和多态之后应该很好地学习 GUI。另外，在了解所有视觉内容之前，最好了解设计原则和模式。在不知道如何编写代码的情况下，您所拥有的只是一个损坏的 GUI。

# iphone - 我是否需要将渲染缓冲区附加到已经附加了纹理的帧缓冲区？

> ID：10163937
> 
> 赞同：1
> 
> 时间：2012-04-15T16:41:47.950
> 
> 标签：iphone, opengl-es, framebuffer

我为离屏渲染创建了一个帧缓冲区。我制作了一个没有设置数据的空纹理。我没有附加颜色渲染缓冲区，因为有纹理支持。

在代码中：

```
 //Generate framebuffer, hook up renderbuffer.
    glGenFramebuffers(1, &_frameBufferName);
    glBindFramebuffer(GL_FRAMEBUFFER, _frameBufferName);

    //DON'T Attach texture to framebuffer (RGBA).
    //glGenRenderbuffers(1, &_colorRenderBufferName);        
    //glBindRenderbuffer(GL_RENDERBUFFER, _colorRenderBufferName);    

    //glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA4, _layerWidth, _layerHeight);        
    //glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, _colorRenderBufferName);            

    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, _textureName, 0);
    glClear(GL_COLOR_BUFFER_BIT); 
```

它确实有效，但 xCode 分析器总是声称帧缓冲区没有附件。我在这里需要颜色渲染缓冲区吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:10:49.140

似乎没有。 [http://developer.apple.com/library/ios/DOCUMENTATION/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW6](http://developer.apple.com/library/ios/DOCUMENTATION/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW6)

# c++ - C++ 静态匿名类类型数据成员

> ID：10163938
> 
> 赞同：3
> 
> 时间：2012-04-15T16:41:56.123
> 
> 标签：c++

我正在尝试编写类似 C# 的属性，所以我得到了这个：

```
#include <iostream>

class Timer
{
public:
    static class {
    public:
        operator int(){ return x;}
    private:
        int x;
    }y;
};
int main()
{
    std::cout << Timer::y;
    std::cin.get();
} 
```

最后我得到了这个错误：

```
error LNK2001: unresolved external symbol 
"public: static class Timer::<unnamed-type-y>y> Timer::y" 
```

如果有人告诉我原因，我将不胜感激。

所以这只是一个声明，这太糟糕了，我能不能找到一些方法来使它成为一个定义，而不是在其他地方定义 y 或者初始化它，我只是不喜欢并且如果不给匿名类型一个名字就不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:26:01.700

我能想到的最简单的解决方案（尽管它为您的未命名类引入了名称）：

```
#include <iostream>

class Timer
{
private:
    class internal {
    public:
        operator int(){ return x;}
    private:
        int x;
    };

public:
    static internal y;
};

Timer::internal Timer::y;

int main()
{
    std::cout << Timer::y;
    std::cin.get();
} 
```

另外，不要尝试在 C++ 中编写任何“类似 C#”的东西，它只是行不通。而且我看不出如何`static`与 C# 混合`property`。

编辑：您甚至可以将`internal`课程标记为`private`，因此无法从课程外访问课程本身。请参阅更新的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-01T13:55:10.760

您收到此错误是因为您必须在`y`某处定义，但您只是在类定义中声明了它。声明它可能很棘手，因为它没有任何命名类型，并且您必须在声明它时指定类型。但是使用 C++11，您可以[`decltype`](http://en.cppreference.com/w/cpp/language/decltype)这样做：

```
#include <iostream>

class Timer{
public:
    static class {
    public:
        operator int(){ return x;}
    private:
        int x;
    } y;
};

decltype(Timer::y) Timer::y;    //You define y here

int main(){
    std::cout << Timer::y;
    std::cin.get();
} 
```

# macos - 在 iPhone 上运行 Google App Engine 测试服务器

> ID：10163941
> 
> 赞同：0
> 
> 时间：2012-04-15T16:42:15.957
> 
> 标签：macos, google-app-engine

我目前正在我的 上运行 Google App Engine 服务器`localhost:8080`，一切正常。但是，现在我需要我的 iPhone 也能够提出请求。我不能只在我的 iPhone 上访问 localhost，所以我在我的 Mac 上设置了网络共享，我的电脑网址是`192.168.1.106/~mohabitar`. 但是，从我的计算机或 iPhone 访问这个地址只会列出一个文件目录，它实际上并没有运行我的 Python 脚本。

如何配置 Google App Engine 测试服务器以通过我的 mac Web 共享地址运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:45:44.120

启动开发服务器时需要提供`--address=0.0.0.0` [命令行参数（也适用于](https://developers.google.com/appengine/docs/java/tools/devserver#Command_Line_Arguments)[python 版本](https://developers.google.com/appengine/docs/python/tools/devserver#Command_Line_Arguments)）。

# visual-c++ - 如何在 MSVC++ 中启用 6000 系列警告（代码分析警告）？

> ID：10163942
> 
> 赞同：2
> 
> 时间：2012-04-15T16:42:36.117
> 
> 标签：visual-c++, compiler-warnings

即使是警告级别 4 和“所有警告”也不会使[6000 系列](http://msdn.microsoft.com/en-us/library/a5b9aa09.aspx)警告出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:47:51.577

实际上启用这些“代码分析”警告有它自己的对话框。

在您的项目属性中，您必须选中“在构建时启用代码分析”才能使其工作。

![代码分析](../Images/4e1cb44ccdb8cd437efafeedea00a7ab.png)

然后此代码应显示错误 6246：

```
#include <stdio.h>

int main()
{
  int x ;

  {
    int x = 6 ;
    printf( "%d\n", x ) ;
  }

} 
```

> 警告 C6246：“x”的本地声明隐藏了外部范围内的同名声明。

此设置似乎完全独立于属性对话框中的“配置属性/C/C++/常规/警告级别”设置。

![设置无关紧要](../Images/122113dcf77a6cbaa984c9849fe7d8da.png)

# iphone - iPhone被编程一次能多快拍两张照片？

> ID：10163944
> 
> 赞同：0
> 
> 时间：2012-04-15T16:42:50.537
> 
> 标签：iphone, ios, camera, avfoundation, photo

我想写一个iphone应用程序，让你在很短的时间内连续拍摄2张照片，我想知道它是否可以实现。可能市场上的应用程序似乎只从视频流中提取低分辨率静止帧，所以我想知道快速捕获全分辨率照片是否可行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T17:22:26.037

这取决于您的时间和照片分辨率要求。拍照时间取决于硬件和所需的分辨率。

使用 AVFoundation 中的 API 异步拍照。特别是方法`captureStillImageAsynchronouslyFromConnection:`。

详情见[这里](https://stackoverflow.com/q/3847140/550177)_

我在不同配置的 iPhone 4S 上测量了两张照片之间的最短时间：

*   `AVCaptureSessionPresetMedium`，后置摄像头：**约0.043s**

*   `AVCaptureSessionPresetPhoto`、后置摄像头（8MP）：**约0.3s**

*   `AVCaptureSessionPresetPhoto`，前置摄像头（640x480）：**约0.027s**

# android - 用不同的图像重新开始动画

> ID：10163945
> 
> 赞同：1
> 
> 时间：2012-04-15T16:42:51.683
> 
> 标签：android, android-animation, android-imageview

我正在尝试在 imageview 中设置图像按顺序运行动画。每当我尝试重置图像以重新开始动画时，它都会延迟一点并且动画序列被破坏了任何解决这个问题的方法？

```
 @Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();

    Bitmap bitmap1 = BitmapCompressor.getInstance().compressBitmap(
            photoPaths.remove(0), 250);
    apa1.setImageBitmap(bitmap1);

    apa1.startAnimation(view_1_anim_a);

    Bitmap bitmap2 = BitmapCompressor.getInstance().compressBitmap(
            photoPaths.remove(0), 250);
    apa2.setImageBitmap(bitmap2);

    apa2.startAnimation(view_2_anim_a);

    Bitmap bitmap3 = BitmapCompressor.getInstance().compressBitmap(
            photoPaths.remove(0), 250);
    apa3.setImageBitmap(bitmap3);

    apa3.startAnimation(view_3_anim_a);

    view_1_anim_a.setAnimationListener(new AnimationListener() {

        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub

            apa1.startAnimation(view_1_anim_b);

        }
    });

    view_1_anim_b.setAnimationListener(new AnimationListener() {

        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            apa1.startAnimation(view_1_anim_c);

        }
    });

    view_1_anim_c.setAnimationListener(new AnimationListener() {

        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub

            apa1.startAnimation(view_1_anim_d);

        }
    });

    view_1_anim_d.setAnimationListener(new AnimationListener() {

        public void onAnimationStart(Animation animation) {

        }

        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationEnd(Animation animation) {
            Bitmap bitmap1 = BitmapCompressor.getInstance().compressBitmap(
                    photoPaths.remove(0), 250);
            apa4.setImageBitmap(bitmap1);

            apa4.startAnimation(view_1_anim_a)://HERE IT IS DELAYED A BIT AND THE SEQUENCE IS RUINED
        }
    }); 
```

# javascript - 逐渐减慢 2D 对象方法

> ID：10163947
> 
> 赞同：1
> 
> 时间：2012-04-15T16:43:15.500
> 
> 标签：javascript, html, animation, 2d

我正在考虑任何好的且经过验证的算法来逐渐减慢网站上的对象方法。

在我的网站上，我希望引入新的对象，它们应该从屏幕外部来到他们想要的位置。但是，我不希望它们以恒定的速度来，而是希望它们逐渐减速，直到它们最终停在所需的位置。

这应该会增加网页的柔和感。

无论对象的原始点和目标点之间的距离有多远，是否有任何好的算法可以很好地工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:47:52.293

这被称为“缓动”，大多数动画框架都支持它。如果您可以使用 ExtJS 或 jQuery 之类的东西，您将免费获得对动画的轻松支持。如果您是手动执行操作，那么添加缓动并不是那么困难。

我非常喜欢[这些缓动实现](http://www.robertpenner.com/easing/)，它们是用 ActionScript 编写的，但很容易移植到 JavaScript。我将它们整合到我的游戏引擎中并取得了巨大成功。这是一个很好的[演示页面](http://hosted.zeh.com.br/mctween/animationtypes.html)，展示了相同的缓动函数。

# c - 将两个不同维度的矩阵相乘

> ID：10163948
> 
> 赞同：0
> 
> 时间：2012-04-15T16:43:27.463
> 
> 标签：c, loops, matrix, matrix-multiplication

我正在编写一个乘法矩阵的应用程序。这适用于 nxn 的矩阵 a 和 b：

```
for(k = 0; k < n; k++) {
    for(i = 0; i < n; i++) {
        tmp = a[i][k];
        for(j = 0; j < n; j++) {
            c[i][j] = c[i][j] + tmp * b[k][j];
        }
    }
} 
```

如果 a 是 nxy 而 b 是 yxm（暗示 c 是 nxm）。我将如何修改上述循环以使其工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:47:08.280

这应该有效：

```
for(k = 0; k < y; k++) {
    for(i = 0; i < n; i++) {
        tmp = a[i][k];
        for(j = 0; j < m; j++) {
            c[i][j] = c[i][j] + tmp * b[k][j];
        }
    }
} 
```

# php - 使用 URL REWRITE 将辅助域重定向到主机帐户上的文件夹

> ID：10163950
> 
> 赞同：0
> 
> 时间：2012-04-15T16:43:39.740
> 
> 标签：php, .htaccess, url, rewrite

我有两个域和一个托管帐户。我希望新域指向我的主机帐户中的子文件夹。

我已经为新域做了一个“HOST A”重定向，所以现在当我输入 SECONDARY.COM（例如）时，我到达了主机的根目录（就像我输入 PRIMART.COM 一样）。

然后我添加了一个包含以下内容的 .htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^secondary\.co\.il$ [NC]
RewriteRule ^(.*)$ http://www.primary.il/secondary$1 [R=301,L] 
```

但似乎它什么都没有改变 - 当我输入 SECONDARY.COM 时，我仍然到达根目录而不是文件夹（“次要”）。

也许一些关于语法的东西，找不到问题。

我一直在尝试几乎任何事情，但没有成功，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:00:21.917

这个怎么样？看起来很像你要找的东西:)。脚注：例如，primary.com offcourse 也必须是一个子文件夹，在我看来是“更干净”。

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST}  secondary.com$ [NC]
RewriteCond %{REQUEST_URI} !^/secondary.com/.*$
RewriteRule ^(.*)$  /secondary.com/$1 [L]

RewriteCond %{HTTP_HOST}  primary.com$ [NC]
RewriteCond %{REQUEST_URI} !^/primary.com/.*$
RewriteRule ^(.*)$  /primary.com/$1 [L] 
```

来源：[http ://www.techrepublic.com/article/rewriting-urls-to-host-multiple-domains-on-a-single-ip-address-with-apache/6042903](http://www.techrepublic.com/article/rewriting-urls-to-host-multiple-domains-on-a-single-ip-address-with-apache/6042903)

# wpf - 以下代码的工作是什么？

> ID：10163955
> 
> 赞同：-2
> 
> 时间：2012-04-15T16:43:51.427
> 
> 标签：wpf

我无法理解这一行`{helpers:CommandBinding AddCommand}` 代码在这里：

```
<Window.InputBindings>
    <KeyBinding Modifiers="Control" Key="E" Command="{helpers:CommandBinding AddCommand}"/>
</Window.InputBindings> 
```

解释上述代码中的每个标记：如果有其他可用选项，请解释我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:47:24.420

那是一个自定义[标记扩展](http://msdn.microsoft.com/en-us/library/ee855815.aspx)，大概会返回一个命令。询问编写它的人或者它是否是某些框架的一部分，请参阅文档...

# actionscript-3 - AS3 在另一个框架上导入类

> ID：10163956
> 
> 赞同：0
> 
> 时间：2012-04-15T16:43:55.220
> 
> 标签：actionscript-3, flash

我正在为我的一个新项目使用外部 AS 文件，该项目涉及创建一个绘制位置，因此我使用以下[教程](http://active.tutsplus.com/tutorials/games/create-a-basic-drawing-application-in-flash/)来了解需要什么的基本概念。

我让希望应用程序工作并顺利运行，直到我决定要添加预加载和菜单 - 将应用程序的绘图部分放在第三帧上 - 这给了我这个错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。
> - 在 Main/convertToBMD()
> - 在 Main()

所以我想而不是将 Main.as 添加到属性下的类中，而是在框架上导入文件。使用：

```
var main:Main = new Main();
addChild(main); 
```

除了失去与实例名称的所有连接之外，这还有效。

```
Line 64 1120: Access of undefined property pencil.
Line 65 1120: Access of undefined property eraser.
Line 65 1120: Access of undefined property txt.
Line 82 1120: Access of undefined property board.
Line 83 1120: Access of undefined property board. 
```

ETC.....

所以我想知道的是，有没有更好的方法来做到这一点并让它在任何框架上工作？

通过更改外部脚本中的某些内容或其他导入框架的方式？

谢谢

伊莱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:55:47.237

问题是命名实例是实例的属性`MainTimeline`，它通常是阶段的第一个孩子。这些属性*不是*您的`Main`类的属性（不再）。

因此，当您想从 with 访问这些属性时`Main`，您可以执行以下操作：

```
var timeline:DisplayObject = stage.getChildAt(0);
var pencil:DisplayObject = timeline["pencil"];

// do stuff with 'pencil'
pencil.x = 500;
... 
```

**注意：**这假设`Main`将`stage`设置其属性，一旦您通过`addChild(main);`. 但这意味着，在 的构造函数中`Main`，您将无法访问该`stage`属性来执行上述操作。如果这是一个问题，考虑在使用“铅笔”等之前`Main`等待事件。`ADDED_TO_STAGE`

# php - 从字符串中取出字符串？爆炸？

> ID：10163965
> 
> 赞同：1
> 
> 时间：2012-04-15T16:44:45.797
> 
> 标签：php

我有以下字符串

```
<embed src='herp.com'  width='240' height='180'  allowscriptaccess='always' allowfullscreen='true' flashvars='volume=94&stretching=fill&file=http%3A%2F%2Fmedia.cdn.com%2FTHEMP%2Fflash%2Ffile.mp4&plugins=viral-1d'/> 
```

我想`http%3A%2F%2Fmedia.cdn.com%2FTHEMP%2Fflash%2Ffile.mp4&plugins=viral-1d`摆脱它。

我在想爆炸`=`然后抓住倒数第二个值，但这可能容易出错（例如，如果他们`herp="blah"`在 flashvars 变量之后添加另一个脚本将不再工作），是否有任何其他方式对语法更防弹我需要的字符串周围的变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:58:04.847

```
$str = "<embed src='herp.com'  width='240' height='180'  allowscriptaccess='always' allowfullscreen='true' flashvars='volume=94&stretching=fill&file=http%3A%2F%2Fmedia.cdn.com%2FTHEMP%2Fflash%2Ffile.mp4&plugins=viral-1d'/>";

// figure out where the params begin (keep the starting quote)
$strpos = strpos($str, "flashvars=") + strlen("flashvars=");
$str = substr($str, $strpos);

// get the quoting char
$delimiter = $str[0];

// first match strtok returns is our param list
$str = strtok($str, $delimiter);

parse_str($str, $params);

var_dump($params); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T16:56:17.730

此处正确的方法是使用适当的 HTML 解析库解析 HTML，并从标签中提取`flashvars`属性。`<embed>`如果你只有其中一个，你真的可以只使用正则表达式。

该表达式将检索`flashvars`属性，并将该值传递[`parse_str()`](http://php.net/manual/en/function.parse-str.php)给以检索所有查询字符串组件。 `parse_str()`会打电话`urldecode()`给他们，所以你不需要。

```
// Regex gets the entire flahsvars
$pattern = "/<embed[^>]+flashvars='([^']+)'/";
preg_match($pattern, $embed, $matches);

// $matches[1] now holds the full contents of `flashvars`

// Then parse_str() on the result:
$parts = array();
parse_str($matches[1], $parts);
print_r($parts);

// The part you want is in the file key:
echo $parts['file'];

Array
(
    [volume] => 94
    [stretching] => fill
    [file] => http://media.cdn.com/THEMP/flash/file.mp4
    [plugins] => viral-1d
) 
```

使用的正则表达式的解释：

```
/<embed[^>]+flashvars='([^']+)'/ 
```

它首先查找`<embed`后跟*除*结束符`>`( `[^>]+`) 之外的任何字符。后面的捕获组`flashvars=`将查找属性上直到但不包括结束引号的所有字符，`flashvars`并将它们存储在第一个捕获组`$matches[1]`中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:51:48.983

有一个更好的方法可以做到这一点，看看：

[http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

它解析 URL 的查询字符串。当然，您必须先删除所有多余的内容。只需使用正则表达式提取查询字符串

# c# - Winforms中的CheckedListbox奇怪行为

> ID：10163966
> 
> 赞同：2
> 
> 时间：2012-04-15T16:44:54.233
> 
> 标签：c#, winforms

我已将 CheckedListbox 绑定到列表。但是我注意到，这个控件的奇怪行为。我必须先选择一个项目，然后检查该项目。为什么我不能直接选择列表中的项目？如果此控件通过设计以这种方式运行，那么是否有任何其他控件可以为我提供我正在寻找的行为？

我不想选择一个项目只是为了能够检查它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T16:52:38.117

您可以使用`CheckOnClick`CheckedListBox 的属性使其在单击时检查项目。如果将其设置为`True`，则不必单击两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:52:52.113

有一个属性叫做 CheckOnClick-

将其设置为真。

[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.checkonclick.aspx) CheckOnClick 指示在选择项目时是否应切换复选框。默认行为是在第一次单击时更改选择，然后让用户再次单击以应用复选标记。但是，在某些情况下，您可能希望在单击该项目后立即对其进行检查。

# c - OpenSSL：无法使用 SSL_CTX_new() 创建 SSL_CTX *

> ID：10163968
> 
> 赞同：11
> 
> 时间：2012-04-15T16:45:07.027
> 
> 标签：c, linux, ssl, openssl

按照[页面](http://www.ibm.com/developerworks/linux/library/l-openssl/index.html)上的说明，我正在尝试使用 openSSL 以安全的方式连接客户端/服务器。

我无法按如下方式创建 SSL_CTX：

```
 /* OpenSSL headers */

 #include "openssl/bio.h"
 #include "openssl/ssl.h"
 #include "openssl/err.h"

 int main()
 {

       /* Initializing OpenSSL */

       SSL_load_error_strings();
       ERR_load_BIO_strings();
       OpenSSL_add_all_algorithms();

       SSL_CTX * ctx = SSL_CTX_new(SSLv23_client_method());

       .....
  } 
```

ctx 引用始终为 NULL。谁能告诉我错过了哪一步？

谢谢。

**更新**

在检查错误时，消息是

```
 Error: library has no ciphers 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-15T17:01:22.183

我在 main() 函数开始时使用了以下调用：

```
SSL_library_init(); 
```

解决方法见：[这里](http://ubuntuforums.org/showthread.php?t=622297)

# c++ - 术语 C++ - 成员

> ID：10163969
> 
> 赞同：3
> 
> 时间：2012-04-15T16:45:10.240
> 
> 标签：c++, class, terminology, member

如果有人说“类中的成员”，他们是在谈论数据成员还是成员函数？我有点困惑他们在说哪一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T16:46:45.567

“*一个班级的成员”*可能意味着所有这些：

*   数据成员
*   成员函数
*   嵌套类型

所以如果你有这个类：

```
class A
{
    typedef std::string value_type;  //nested type
    value_type  v;                   //data member
    int         w;                   //data member
    void f();                        //member function
    struct B {};                     //nested type
}; 
```

那么`value_type`, `v`, `w`,`f`和`B`是类的成员`A`。

# jqgrid - 带有“本地”数据的 jqGrid 子网格

> ID：10163970
> 
> 赞同：10
> 
> 时间：2012-04-15T16:45:18.570
> 
> 标签：jqgrid, local, subgrid

我试图让我的子网格处理本地数据。但是，当我单击展开时，我只是得到一个加载框，就像网格试图从某个地方提取数据一样。我假设我不需要 a`subGridUrl`因为主网格的数据类型是`datatype:'local'`. 还有什么我应该做的吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-16T17:01:46.900

没有直接的方法来使用本地数据定义子网格，但是您可以使用`subGridRowExpanded`（[子网格作为网格](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid_as_grid)）相对容易地实现相同的行为。需要做的只是通过网格的 rowid 从一些内部结构中获取子网格的数据。例如，如果您将子网格映射为

```
var myGridData = [
        // main grid data
        {id: "m1", col1: "11", col2: "12"},
        {id: "m2", col1: "21", col2: "22"}
    ],
    mySubgrids = {
        m1: [
            // data for subgrid for the id=m1
            {id: "s1a", c1: "aa", c2: "ab", c3: "ac"},
            {id: "s1b", c1: "ba", c2: "bb", c3: "bc"},
            {id: "s1c", c1: "ca", c2: "cb", c3: "cc"}
        ],
        m2: [
            // data for subgrid for the id=m2
            {id: "s2a", c1: "xx", c2: "xy", c3: "xz"}
        ]
    }; 
```

在`subGridRowExpanded`您内部可以使用以下代码创建子网格：

```
$("#grid").jqGrid({
    datatype: 'local',
    data: myGridData,
    colNames: ['Column 1', 'Column 2'],
    colModel: [
        { name: 'col1', width: 200 },
        { name: 'col2', width: 200 }
    ],
    ...
    subGrid: true,
    subGridRowExpanded: function (subgridDivId, rowId) {
        var subgridTableId = subgridDivId + "_t";
        $("#" + subgridDivId).html("<table id='" + subgridTableId + "'></table>");
        $("#" + subgridTableId).jqGrid({
            datatype: 'local',
            data: mySubgrids[rowId],
            colNames: ['Col 1', 'Col 2', 'Col 3'],
            colModel: [
                { name: 'c1', width: 100 },
                { name: 'c2', width: 100 },
                { name: 'c3', width: 100 }
            ],
            ...
        });
    }
}); 
```

[该演示](http://www.ok-soft-gmbh.com/jqGrid/LocalSubgrid.htm)实时显示结果：

![在此处输入图像描述](../Images/9dcfcb0abc337f84de9d8a37b7505197.png)

# qt - 在持久性 QThread 工作人员完成一轮工作时有效地阻塞函数执行

> ID：10163973
> 
> 赞同：1
> 
> 时间：2012-04-15T16:45:26.060
> 
> 标签：qt, qthread

我的问题是 Qt 中似乎没有一种有效的方法来知道**持久性**QThread 线程何时完成了**一轮**工作。通过持久性，我的意思是 QThreads 在完成一些工作后不会死亡。

我正在使用具有这种线程样式的持久线程。

```
class Worker : public QObject
{
    Q_OBJECT

public slots:
    void doWork() {
        /* ... */
    }
};

QThread *threadA = new QThread;
QThread *threadB = new QThread;
Worker *workerA = new Worker;
Worker *workerB = new Worker;
workerA->moveToThread(threadA);
workerB->moveToThread(threadB);
threadA->start();
threadB->start();
QMetaObject::invokeMethod(workerA, "doWork", Qt::QueuedConnection);
QMetaObject::invokeMethod(workerB, "doWork", Qt::QueuedConnection); 
```

**我有这样的场景：**

```
//Outside force (OS/driver) calls this very frequently.
//Gets called a lot so want to re-use threads instead of creating new 
//threads each time.
C callback function(some parameters)  
{  
   //STEP 1
   //Feed 2 threads with computational expensive work.
   //threads should be pre-made threads to save time on thread creation.
   //do not terminate threads because they will be re-used next time C callback
   //function
   //is called with a new round of work.

    //STEP 2
    //Need to pause/wait/BLOCK function execution here until the 2 worker threads
    //have completed the work.
    //THIS IS THE PROBLEM! No efficient way to block! I don't see how a signal/slot
    //can be used for this purpose.

    //STEP3  
    //After 2 threads complete their assigned work, resume execution of this C
    //callback function.  
    //Perform some non-threaded work in this function to complete the job.

    //return (end function execution), all work for this round/call is complete.
} 
```

问题在于，对于**PERSISTENT**线程，无法按照上述伪代码中的说明进行阻塞。

我不能调用 QThread::wait() 因为它只能用于阻塞，直到在 NON-PERSISTENT THREADS 场景中完成工作。wait() 一直等到线程死掉......使它对我的需求毫无用处。对我来说，wait() 只是永远等待，因为我的线程不会死。

我不认为信号槽的东西可以用于阻塞，至少我不明白如何。也许有一些不明显的事件技巧。我意识到我可以有一个忙碌的循环检查一些由工作线程操作的标志，但这会使 CPU 时间远离线程。

如果您知道使用持久性 QThread 线程进行阻塞的有效方法，我将非常感谢您提供如何完成此操作的代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:29:45.750

`QSemaphore`在调用 之前，您可以在 0 处使用计数器`doWork`，主线程等待，`semaphore.acquire(2);`并且每个工作人员`semaphore.release(1);`在工作完成时调用。因此，主线程只有在 2 个工作人员完成后才会唤醒。

* * *

`Worker`您可以添加一个在您的对象 中不执行任何操作的插槽，您可以在开始工作后调用该插槽：

```
QMetaObject::invokeMethod(workerA, "doWork", Qt::QueuedConnection);
QMetaObject::invokeMethod(workerB, "doWork", Qt::QueuedConnection);

QMetaObject::invokeMethod(workerA, "doNothing", Qt::BlockingQueuedConnection;
QMetaObject::invokeMethod(workerB, "doNothing", Qt::BlockingQueuedConnection); 
```

这`Qt::BlockingQueuedConnection`意味着`invokeMethod`将阻塞直到它可以实际调用插槽`doNothing()`并返回。

* * *

您可以运行 a`QEventLoop`并使其在收到信号时退出：

```
QEventLoop loop;
// the connection have to be made before running the tasks
// to avoid race condition in case the task is very short
loop.connect(workerA, SIGNAL(finished()), &loop, SLOT(quit()));
loop.connect(workerB, SIGNAL(finished()), &loop, SLOT(quit()));

QMetaObject::invokeMethod(workerA, "doWork", Qt::QueuedConnection);
QMetaObject::invokeMethod(workerB, "doWork", Qt::QueuedConnection);

// the loop will be interrupted once for each worker   
for(int i=0; i < 2; ++i) {
    loop.exec();
} 
```

# c - 在 Apache 模块中构建数据结构的最佳位置在哪里？

> ID：10163979
> 
> 赞同：0
> 
> 时间：2012-04-15T16:46:12.487
> 
> 标签：c, dijkstra, apache-portable-runtime

我想开发一个在线路径搜索网络服务。它在图 G 中搜索两个顶点 V1、V2 之间的边距离和最小的路径。

问题是**G 非常大**。它包含近 1000 万条边。

如果 G 足够小，它可能很简单。我宁愿...

1.  列出 G 中的所有边/顶点以及它与某些 RDB（例如 MySQL 或 PostgreSQL）的关系。
2.  用 PHP 或在 G 中搜索最短路径的东西实现我自己的 Web 服务

我自己的 PHP 脚本将...

1.  从 RDB 中选择所有边/顶点，使用 PHP 的类或虚构数组或其他东西在内存上构建 G。
2.  将 Dijkstra 算法应用于内存 G，并回复最短路径。

由于以下原因，这种方法不适用于巨大的 G。

*   构建内存 G 需要很多时间。
*   它为每个边缘使用大量内存。PHP 的对象很智能，但现在不需要。

这意味着**构建的网络应该**在搜索请求之前在内存上准备好，并且**每个顶点/边对象应该更轻量级**。

我决定用 C 来实现这个服务。我认为实现一个 Apache 模块比从头开始实现一个并发的、高性能的网络守护进程要容易得多（如果有更好的解决方案，我想知道） .

**那么，我应该在哪里构建内存 G？**

如您所知，Apache Web 服务器是多线程、多处理的守护进程。如果你开发一个为每个进程构建内存 G 的愚蠢模块，它将为 10 个处理的服务器在内存上构建近 1 亿条边（10 个相同的结构）。

我希望模块更智能，无论有多少进程运行**，每个进程都共享 1 个单一的内存 G。**

您认为在 Apache 模块中构建数据结构的最佳位置是哪里？

# c++ - boost::lambda std::map

> ID：10163980
> 
> 赞同：0
> 
> 时间：2012-04-15T16:46:12.403
> 
> 标签：c++, boost, lambda, bind, boost-lambda

我想通过使用 boost::lambda 来简化我的代码。这是我的代码：

```
// Declare container:
typedef std::map< PageId, Page* > Pages;
Pages m_pages;

// For serialization:
template < class DataType > TPair< DataType > makePair( const std::string& identification, const DataType& dataType )
{
    return TPair< DataType >( identification, dataType );
}

#define SERILIZE_CLASS( _value ) ::Tools::Serilizer::makePair< ::Tools::Serilizer::Serilizable >( EXTRACT_NAME( _value ), _value )

// This does work and should be simplified by....
for( BOOST_AUTO( i, m_pages.begin( ) ); i != m_pages.end( ); ++i )
{
    obj << SERILIZE_CLASS( *i->second );
}

// this code but itdoes not compile
std::for_each( m_pages.begin( ), m_pages.end( ), 
obj << SERILIZE_CLASS( boost::lambda::bind( &Pages::value_type::second, boost::lambda::_1 ) ) ); 
```

最后这是产生的错误代码：

错误 C2664：“Tools::Serilizer::makePair”：无法将参数 2 从“const boost::lambda::lambda_functor”转换为“const Tools::Serilizer::Serilizable &”

任何提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:54:54.770

我认为您的问题是将 lambdas（即函数）与 lambdas 返回的值混合：

例如：

```
boost::lambda::bind( &Pages::value_type::second, boost::lambda::_1 ) 
```

返回一个函数。

所以用它的结果打电话`serialize_class(...)`对我来说没有意义。

也就是说，我还没有深入研究你的代码。我发现它有点混乱。

# java - 我们可以通过调用 class#newInstance() 创建类型化类的实例吗

> ID：10163982
> 
> 赞同：0
> 
> 时间：2012-04-15T16:46:43.150
> 
> 标签：java, generics

看这个：

```
package test;

public abstract class BaseClass {
    public abstract void doSomething();
} 
```

```
package test;

public class A extends BaseClass {

    @Override
    public void doSomething() {
        // TODO Auto-generated method stub
        System.out.println("A");
    }

} 
```

```
package test;

public class GenericFoo<T extends BaseClass>{

    public GenericFoo(){

    }

    private T instance;

    public void  setType(String type){
        // client code  call this to set concrete type of T
    }

    public void doSomething(){
        instance.doSomething();
    }

    public static void main(String s) throws InstantiationException, IllegalAccessException{
        GenericFoo<?> obj = GenericFoo.class.newInstance();
        obj.setType("A");
        // I want  it to print "A" on console
        obj.doSomething();

    }
} 
```

如何实现这一点，**我的类只允许使用调用创建实例** `class#newInstance()`，但它是输入的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:00:23.753

您不能在运行时设置对象的类型；您只能创建特定类型的实例。一旦创建了一个实例，`GenericFoo`就无法设置它的类型参数。（由于[type erasure](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，这在运行时甚至没有意义。）

你能做的最好的事情是这样的：

```
private static class GenericFoo<T extends BaseClass>
{
    T createInstance(Class<T> clazz)
    {
        return clazz.newInstance();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:50:52.033

您正在尝试混合泛型和反射。类型安全仅在编译时可用。但是，如果您想使用当前配置创建简单对象，您可以这样做

```
 GenericFoo<?> obj = new GenericFoo<BaseClass>();
 GenericFoo<BaseClass> obj = new GenericFoo<BaseClass>(); 
```

# java - 让扫描仪包含但忽略引用的文本？

> ID：10163986
> 
> 赞同：2
> 
> 时间：2012-04-15T16:47:18.927
> 
> 标签：java, regex, quotes, java.util.scanner

基本上我的问题是这样的，我需要解析`,`分隔符在哪里的文本，但`" "`不应检查引号中的任何内容是否有分隔符。这是该`Scanner.skip`方法的用途吗？我会自己检查它，但我不明白如何在 java 中编写正则表达式模式，其中令牌介于两者之间`" "`。我还想在正确的标记中包含任何引用的文本，该标记由有效的`,`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:55:59.387

我前段时间研究过这个问题，但没有找到足够快的解决方案。

因此，我将一个简单的自定义字符串拆分器（忽略引号之间的分隔符）合并到我从事的开源项目中：

[QuoteAwareStringSplitter.java](https://gist.github.com/2393982)

例如：

```
public static void main( String[] args ) throws IOException
{
    String s = "ads,asdas,das,das, \"ahda,asd,as,d,a\", adsa";
    String[] tokens = QuoteAwareStringSplitter.splitLine( s );
    for ( String token : tokens )
    {
        System.out.println( token );
    }
} 
```

印刷：

```
ads
asdas
das
das
ahda,asd,as,d,a
 adsa 
```

# javascript - 使用 python 在给定的网站列表上执行 javascript 并将结果输出到 csv

> ID：10163987
> 
> 赞同：0
> 
> 时间：2012-04-15T16:47:19.953
> 
> 标签：javascript, python

我有一个包含 URL 列表的输入文件。我正在尝试在每个 URL 上执行一个脚本，并将该脚本的结果输出到 CSV。

一个示例是尝试查找给定的网站列表是否正在使用 Google Analytics。下面的脚本在页面上下文中运行时将返回类似“{'GA': true}”的 JSON。

```
var scripts = document.getElementsByTagName("script");
var source = [];
for (var i = 0; i < scripts.length; i ++) {
    var s = scripts[i];
    if (!s.src) continue;
    source.push(s.src);
}
checkforGA();

function checkforGA() {
    var tools = {};
    for (var j = 0 ; j < source.length; j ++) {
        if (/google-analytics.com\/(ga|urchin).js/i.test(source))
        {
            tools.GA = true;
            return JSON.stringify(tools);
        }
        else 
        {
            tools.GA = false;
            return JSON.stringify(tools);
        }
    }
} 
```

我的输入是一个包含站点列表的 csv 文件

```
Google, http://google.com
Wikipedia, http://wikipedia.com
Techcrunch, http://techcrunch.com
Stackoverflow, http://stackoverflow.com
Yahoo, http://yahoo.com 
```

我想要的输出是

```
Google, http://google.com, {'GA': false}
Wikipedia, http://wikipedia.com, {'GA': false}
Techcrunch, http://techcrunch.com, {'GA': true}
Stackoverflow, http://stackoverflow.com, {'GA': true}
Yahoo, http://yahoo.com, {'GA': false} 
```

我不确定是否可以从 python 脚本中运行 js，但我正在寻找一些关于如何开始的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:48:30.990

为什么不只在 JS 中完成这一切 - 例如使用 PhantomJS - [https://code.google.com/p/phantomjs/](https://code.google.com/p/phantomjs/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:38:47.703

使用 RE 运行 HTML 有时会在复杂的文档中出现问题。你为什么不尝试使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)来代替这样的东西呢？它就是为此而生的。我包含了一个使用[请求](http://docs.python-requests.org/en/latest/index.html)模块在 SO 上尝试此操作的示例。

```
from bs4 import BeautifulSoup
import requests

r = requests.get('http://www.stackoverflow.com')

soup = BeautifulSoup(r.text)

alist =  soup.find_all('script')
for script in alist:
    try:
        if script.text.find('var _gaq=_gaq') != -1:
            print 'found'
        else:
            print 'not found'
    except KeyError:
        print 'no src' 
```

顺便说一句，如果人们将他们的 GA 初始化程序放在其他脚本中，这种方法不会捕获所有内容......您可能想使用 Selenium 来检查是否存在“_gaq”变量......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T16:53:10.283

您最好的选择是加载页面的文本，然后使用 re 模块搜索您的正则表达式。

# mysql - 将 XML 导入 phpmyadmin 数据库

> ID：10163988
> 
> 赞同：3
> 
> 时间：2012-04-15T16:47:21.820
> 
> 标签：mysql, xml, database, phpmyadmin

我正在尝试将 XML 从该站点[http://data.gov.uk/dataset/car-parks](http://data.gov.uk/dataset/car-parks)导入到 phpmyadmin 数据库，以便可以在 google maps mashup 中使用它。

我是新手，不知道如何将 XML 导入数据库。我是否先创建数据库列然后导入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:53:39.467

在 mysql 中有一个[LOAD XML](http://dev.mysql.com/doc/refman/5.5/en/load-xml.html)方法，通过它你可以将 XML 中的数据导入到你的数据库中。

一个例子：

```
LOAD XML LOCAL INFILE '/pathtofile/file.xml' 
INTO TABLE `tablename` (fieldl1, field2, ...); 
```

# python - 通过跳转列表的第n个元素来分析python中的txt文件

> ID：10163990
> 
> 赞同：0
> 
> 时间：2012-04-15T16:47:25.670
> 
> 标签：python, file, extract, text-files, seek

我无法解析包含如下行的 txt 文件：

```
50.0 0.1 [0.03, 0.05, 0.067, 1.003, ...]
50.0 0.134 [0.3465, 0.5476, 1.0, ....]
.
.
. 
```

我不需要每行的开头，只需要列表！列表中的元素**不**包含相同数量的字符，它们由空格和逗号分隔。

我想要做的是忽略每个列表前面的任何内容并跳转到（例如）列表的第 9 个元素，读取值并保存它。然后转到下一行并执行相同的操作。

我的方法：

找到一种将 txt 行解析为列表而不是字符串的方法，这样我就可以处理列表的元素。

或者

设法跳到列表中的第 9 个值，然后读取所有内容，直到下一个值（在本例中为第 10 个）。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:12:19.233

当你有这种形式的每一行时：

```
line = '50.0 0.1 [0.03, 0.05, 0.067, 1.003]\n' 
```

首先删除字符串中不必要的部分。找到 '[' 和 ']' 并使用切片。

```
line[line.index('[')+1:line.index(']')] 
```

用分隔符分割剩余的字符串（现在：','）。你得到一个字符串列表。

```
line[line.index('[')+1:line.index(']')].split(',') 
```

取第 n 个元素并使用 float() 或 eval() 对其进行转换。

```
float(line[line.index('[')+1:line.index(']')].split(',')[3]) 
```

如果您需要列表中的更多元素，则使用 '[' 和 ']' 评估字符串并获得一个列表。（注意： eval() 很慢。）

```
eval('[0.03, 0.05, 0.067, 1.003]') 
```

代码将与此类似：

```
with open('datas.txt') as f:
    n = 8
    for line in f:
        a = float(line[line.index('[')+1:line.index(']')].split(',')[n])  
        do_something_with(a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:56:49.603

要删除行上列表开头的字符，一种方法是获取以左括号字符开头的行的切片。这将如下所示：

```
line = line[line.index('['):] 
```

然后，您可以使用 split() 或 eval() 函数处理字符串，将其转换为列表并从该点检索元素。

```
line = line[line.index('['):].split()[9] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:26:12.813

假设文本文件结构与发布的完全相同。

```
def openFile(file):
    "Usage: list = openFile(filename)"
    try:
        linesList = []
        inputFile = open(file, "r")
        tempList = inputFile.readlines()
        inputFile.close()
        for line in tempList:
            linesList.append(line.replace("[","").replace("]","").split())
        return linesList
    except:
        print("Could not open file!")

def saveFile(file, data, element):
    "Usage: saveFile('text.txt',myList,9)"
    outputFile = open(file, "w")
    for line in data:
        outputFile.write(line[element-1] + "\n")
    outputFile.close()

def main():
    myList = openFile("text.txt")
    #now you have a list of lists :D
    #you can do what ever you want with the data
    print(myList)
    saveFile("text2.txt",myList,2)

main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T16:57:49.917

由于您的问题没有很好的形成，我将尝试以更广泛的方式回答

1.  [线性读取文件。](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)
2.  如果您的数据格式是统一的，即开头和结尾的方括号。湾。数字用空格隔开

    使用 strip 删除任何尾随空格和/或换行符 Slice 它以删除第一个和最后一个字符 ex。

    `instr="[0.03 0.05 0.067 1.003]"[1:-1]`

    使用[split()](http://docs.python.org/release/2.5.2/lib/string-methods.html)将字符串拆分为数字列表。

3.  索引列表以访问第 9 个元素
4.  保存它或做任何你想做的计算

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T17:05:25.783

如果您需要读取文件并提取每行的第 9 个元素，则需要执行以下操作：

```
with open('your_file.txt') as in_file:

    my_list = [line.split()[9] for line in in_file] 
```

# c - 将字符串设置为 '\0'

> ID：10163996
> 
> 赞同：0
> 
> 时间：2012-04-15T16:47:54.193
> 
> 标签：c

我正在查看一些现有代码并添加了一些 printf 行。有一个字符串 cp "TZ=test"

```
cp = strchr(str, '=');
printf("Text: %s\n",cp);
printf("Text cp+1: %s\n",cp+1);
*cp = '\0';
printf("Text: %s\n",cp);
printf("Text cp+1: %s\n",cp+1); 
```

输出是：

```
Text: =test
Text c+1: test
Text:
Text c+1: test 
```

我理解前两个测试，但为什么第四个打印“test”，即使 *cp 之前设置为 '\0' ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:49:56.417

与其他一些语言不同，C 不知道字符串是什么，它只知道它的结束位置，所以它从你给它的指针打印出来。

```
 [=test\0]
1:   ^start here
          ^ end at \0
2:    ^start here
          ^ end at \0

    [\0test\0]
3:   ^start here, it's \0, so stop
4:     ^start here
           ^ end at \0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:49:21.730

因为您正在打印 *cp+1。

这是 cp 之前的样子：

=测试
^^^^^^^^

这是之后

 测试
^^^^^^^^

您只覆盖了第一个字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T16:50:08.607

是否设置`cp[0]`为 '\0' 无关紧要。您正在打印`cp+1`仍然是“测试”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-15T16:50:34.720

因为您只是将字符串的第一个字符设置为`\0`. 其余的记忆没有动过。所以打印 from`*cp + 1`开始打印 from`Test`而不是 from `\0Test`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-15T16:51:18.910

将字符设置为`\0`将在此时终止它之前的字符串，因为它`\0`是 C 中的字符串结束字符。

它之后的任何内容都不受它的影响，因此这是在拆分字符串时避免分配更多内存的好方法，因为您可以将分隔符替换为`\0`然后使用指向字符串开头的原始指针来获取第一部分，并`sep + 1`获得第二部分。