# StackOverflow 问答 000784000-000784999

# c# - 重构 C# 代码 - 在 Linq 中做更多事情

> ID：784003
> 
> 赞同：1
> 
> 时间：2009-04-23T23:38:59.927
> 
> 标签：c#, linq, refactoring

下面的代码是我目前拥有的并且工作正常。我觉得我可以在 Linq 而不是 C# 代码中做更多我正在做的工作。

有没有人可以用更多的 Linq 代码和更少的 C# 代码来完成相同的结果。

```
 public List<Model.Question> GetSurveyQuestions(string type, int typeID)
    {
        using (eMTADataContext db = DataContextFactory.CreateContext())
        {
            List<Model.Question> questions = new List<Model.Question>();
            List<Linq.Survey_Question> survey_questions;
            List<Linq.Survey> surveys = db.Surveys
                                          .Where(s => s.Type.Equals(type) && s.Type_ID.Equals(typeID))
                                          .ToList();

            if (surveys.Count > 0)
            {                   
                survey_questions = db.Survey_Questions
                                     .Where(sq => sq.Survey_ID == surveys[0].ID).ToList();

                foreach (Linq.Survey_Question sq in survey_questions)
                {
                    Model.Question q = Mapper.ToBusinessObject(sq.Question);
                    q.Status = sq.Status;
                    questions.Add(q);                        
                }
            }
            else
            {
                questions = null;
            }
            return questions;
        }
    } 
```

这是从我的实体到 Biz 对象的映射器函数

```
 internal static Model.Question ToBusinessObject(Linq.Question q)
        {
            return new Model.Question
            {
                ID = q.ID,
                Name = q.Name,
                Text = q.Text,
                Choices = ToBusinessObject(q.Question_Choices.ToList())                
            };            
  } 
```

我希望我的映射器功能像这样映射问题状态。

```
 internal static Model.Question ToBusinessObject(Linq.Question q)
    {
        return new Model.Question
        {
            ID = q.ID,
            Name = q.Name,
            Text = q.Text,
            Choices = ToBusinessObject(q.Question_Choices.ToList()),
            Status = q.Survey_Questions[?].Status
        };
    } 
```

**?** 问题是此功能不知道从哪个调查中提取状态。

而不是创建 biz 对象，然后像这样在 foreach 循环中设置 Status 属性

```
 foreach (Linq.Survey_Question sq in survey_questions)
{
    Model.Question q = Mapper.ToBusinessObject(sq.Question);
    q.Status = sq.Status;
    questions.Add(q);                        
} 
```

我想以某种方式`EntitySet<Survey_Question>`在调用方法中过滤上面的 q 对象，这样 q.Survey_Questions[?] 集合中只有一个项目。

下面是我的数据库架构和业务对象架构 [![替代文字](https://i.stack.imgur.com/phTZ6.png)](https://i.stack.imgur.com/phTZ6.png) [![替代文字](https://i.stack.imgur.com/tHF0A.png)](https://i.stack.imgur.com/tHF0A.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T16:15:38.593

我需要做的是设置一个连接。

```
 public List<Model.Question> GetSurveyQuestions(string type, int typeID)
    {
        using (eMTADataContext db = DataContextFactory.CreateContext())
        {
            return db.Survey_Questions
                     .Where(s => s.Survey.Type.Equals(type) && s.Survey.Type_ID.Equals(typeID))
                     .Join(db.Questions,
                              sq => sq.Question_ID,
                              q => q.ID,
                              (sq, q) => Mapper.ToBusinessObject(q, sq.Status)).ToList();
        }
    } 
```

然后重载我的映射器函数

```
 internal static Model.Question ToBusinessObject(Linq.Question q, string status)
    {
        return new Model.Question
        {
            ID = q.ID,
            Name = q.Name,
            Text = q.Text,
            Status = status,
            Choices = ToBusinessObject(q.Question_Choices.ToList()),
        };
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-23T23:49:45.267

```
from question in db.Survey_Questions
    let surveys = (from s in db.Surveys 
        where string.Equals(s.Type, type, StringComparison.InvariantCultureIgnoreCase) &&
        s.Type_ID == typeID)
where surveys.Any() && 
surveys.Contains(s => s.ID == question.ID)
select new Mapper.Question
{
    ID = question.Id,
    Name = question.Name,
    Text = question.Text,
    Choices = ToBusinessObject(question.Question_Choices.ToList()),
    Status = question.Status
} 
```

这会让你走上正确的轨道吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T23:51:53.607

为什么要复制所有课程？您可以使用您的业务逻辑扩展 LINQ to SQL 类——它们是部分类。这有点违背 OR 映射器的目的——持久化业务实体。

# asp.net-mvc - 从 MVC 预览到最终的 Html.Mailto 发生了什么？

> ID：784004
> 
> 赞同：2
> 
> 时间：2009-04-23T23:39:24.387
> 
> 标签：asp.net-mvc, mailto

在一些预览版中，有一个用于构建邮件链接的 HTML 助手方法。

[http://blog.wekeroad.com/2007/12/05/aspnet-mvc-preview-using-the-mvc-ui-helpers/](http://blog.wekeroad.com/2007/12/05/aspnet-mvc-preview-using-the-mvc-ui-helpers/)

我无法在最终版本中找到它。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-23T23:47:29.547

我知道他们`HTMLHelper`从最终版本中删除了其中的一些。那可能就是其中之一。预览通常因更改而臭名昭著。您可能想查看 MvcFutures 项目。

[http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-23T23:51:43.110

检查 MvcFutures 程序集。我不记得在任何一个候选版本中看到它，但我相信它在 Futures 中。[可在http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471)获得 1.0（和期货）的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T23:57:41.440

出于某种原因，很多 ASP.NET MVC 中的特性被移到了 MVC Futures 中。大多数是由于 RTM 之前的不完整。但是我不知道为什么 Html.Mailto 会被排除在外。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T19:56:27.750

您可以使用`@Html.DisplayFor`诸如`@Html.DisplayFor(modelItem => Model.emailAddress)`，它将产生一个电子邮件链接。

# c# - 将主机标头添加到 IIS 网站的代码

> ID：784005
> 
> 赞同：6
> 
> 时间：2009-04-23T23:39:44.353
> 
> 标签：c#, iis-7, active-directory

我有一个有很多名字的网站。我希望能够以编程方式将新的主机头记录添加到 IIS 以允许它识别另一个名称。具体来说，向给定站点添加新主机头的代码是什么（最好是 C#）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T16:58:21.207

```
static void Main(string[] args)
{
    AddHostHeader(1, "127.0.0.1", 8080, "fred");
    AddHostHeader(1, null, 8081, null);
}

static void AddHostHeader(int? websiteID, string ipAddress, int? port, string hostname)
{
    using (var directoryEntry = new DirectoryEntry("IIS://localhost/w3svc/" + websiteID.ToString()))
    {
        var bindings = directoryEntry.Properties["ServerBindings"];
        var header = string.Format("{0}:{1}:{2}", ipAddress, port, hostname);

        if (bindings.Contains(header))
            throw new InvalidOperationException("Host Header already exists!");

        bindings.Add(header);
        directoryEntry.CommitChanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-05T12:48:49.167

使用模拟或使用 Windows 标识对象

# api - 谷歌浏览器如何建议 url 补全？

> ID：784006
> 
> 赞同：9
> 
> 时间：2009-04-23T23:41:16.893
> 
> 标签：api, search, google-search-api, google-suggest

我了解了 Google 的（非官方）建议 API 和他们的搜索 API，它们看起来都很棒，但建议 API 实际上并不建议导航完成。另一方面，在谷歌浏览器中，如果你开始输入例如“apple”，它会建议“www.apple.com/trailers”。

我知道它会搜索您的浏览历史记录，但我从未访问过该页面，因此无法在本地获取。

这是另一个非官方的秘密 API 吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-24T08:19:02.810

如果您使用透明回显代理，这可以显示所有 http 流量[Charles](http://www.charlesproxy.com/)和[fiddler](http://www.fiddler2.com/fiddler2/)是两个很好的例子，我推荐 Charles。

当我在 chrome 中输入“app”时查看新的工作流量，我看到以下请求

```
http://clients1.google.co.uk/complete/search?client=chrome&output=chrome&hl=en-US&q=app
GET /complete/search?client=chrome&output=chrome&hl=en-US&q=app HTTP/1.1
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.19 (KHTML, like Gecko) Chrome/1.0.154.53 Safari/525.19
Accept-Encoding: gzip,deflate,bzip2,sdch
Cookie: SID=DQAAAIYAAAATI2S8dKFp5KGjAbyGxNaA4R4qbW24KzjW3jHTJOqIewCl64OqpBjnj7ReJ1aoFBA_rJ5h32jTrwD_xFTEgVfSqqXMfh_1e8bIcvLgz8qSRnXxWNUepTD90fXeHh0KfKtI9EkdkjgOPT2a9_1DJBlyzpOItI7o-fD5zQ6fjA9YdlC4TeCZqlsjbD6O8nXR5mg; PREF=ID=427f2a6420c4c235:U=19879741710226bb:TM=1224000168:LM=1240414461:S=kGvdcM6wirgoK_L7; NID=21=QOXGkbW3w-orrYC5IFOpPW9jEwdTz4oNJ6Pem0lcyFlvzxZHQgyYsf63kR2g4Pq62H0xWR8l7mF03GLgIJoPAZPIlMFG-ghig5ManOtWA7f3bqqq1eNtWSYyZYo4Ja5z
Accept-Language: en-US,en
Accept-Charset: ISO-8859-1,*,utf-8
Host: clients1.google.co.uk 
```

随着回应

```
HTTP/1.1 200 OK
Content-Type: text/javascript; charset=utf-8
Date: Fri, 24 Apr 2009 08:06:54 GMT
Expires: Fri, 24 Apr 2009 09:06:54 GMT
Cache-Control: public, max-age=3600
Content-Encoding: gzip
Server: Auto-Completion Server
Content-Length: 175

["app",["http://www.apple.com/uk/","apple","apple store","apple trailers"],["Apple (United Kingdom)","437,000,000 results","37,700,000 results","995,000 results"],[],{"google:suggesttype":["NAVIGATION","QUERY","QUERY","QUERY"]}] 
```

Charles 了解 JSON，因此将其转换为 [Charles 的漂亮格式屏幕截图 http://img2.imageshack.us/img2/2926/suggestionsforapp.png](http://img2.imageshack.us/img2/2926/suggestionsforapp.png)

[查看全尺寸](http://img2.imageshack.us/img2/2926/suggestionsforapp.png)

正如你所看到的（最简单的全尺寸图片），这个谷歌服务返回了 4 个结果，一个是 NAVIGATION 类型（[http://www.apple.com/uk/](http://www.apple.com/uk/)）和 3 个 QUERY 类型（苹果，苹果商店，苹果拖车） . 它还包含有关 NAVIGATION 结果（Apple（英国））的描述和每个 QUERY 建议的结果数（437,000,000 37,700,00 995,000）的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-23T23:47:34.740

单击**Options** , **Under the Hood**，您可以查看它搜索哪些服务的导航选择。听起来它正在为您结合历史记录和搜索建议。

# sql - 如何在 create_table 上设置初始 id 值？

> ID：784007
> 
> 赞同：2
> 
> 时间：2009-04-23T23:42:59.790
> 
> 标签：sql, ruby-on-rails

我想让 create_table rails 命令的自动递增 id 列从 500 开始。

我找到了如何在 sql 中设置初始 auto_increment id 值的示例：

```
CREATE TABLE student ( id int(2) NOT NULL auto_increment, name varchar(50) NOT NULL default '', class varchar(10) NOT NULL default '', mark int(3) NOT NULL default '0', sex varchar(6) NOT NULL default 'male', UNIQUE KEY id (id) ) auto_increment=100000 TYPE=MyISAM; 
```

所以我查看了 Rails API 并在 create_table 方法上看到了这些选项：

```
The options hash can include the following keys:

:id
    Whether to automatically add a primary key column. Defaults to true. Join tables for has_and_belongs_to_many should set :id => false. 
:primary_key
    The name of the primary key, if one is to be added automatically. Defaults to id. 
:options
    Any extra options you want appended to the table definition. 
:temporary
    Make a temporary table. 
:force
    Set to true to drop the table before creating it. Defaults to false. 
```

不是我需要的......我尝试了这个但没有成功：

```
:options => {:auto_increment => 500} 
```

任何人都知道如何让这条语句的自动递增 id 列从 500 开始：

```
create_table :contents do |t|
  t.string  :type,                :null => false
  t.string  :name,                :null => false
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T09:26:35.317

试试这个：

```
create_table(:student, :options => 'AUTO_INCREMENT = 500') do |t|
  t.column :name, :string, :limit => 50
  # Other fields here   
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-23T23:58:55.993

设置它的 SQL 语句是：

```
ALTER TABLE student AUTO_INCREMENT = 500; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T00:22:18.480

有很多方法可以做到这一点，一些 RDBMS 特定的（你没有指定你正在使用什么 RBDMS，但 MyIsam 表指示 MySQL）。

但它有难闻的气味；除了它是唯一且单调递增的之外，您不应该关心合成密钥。您确实关心表明可能存在更大的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-23T23:51:55.043

这只是一个猜测，但您是否尝试过在 ID 为 499 的表中插入（然后删除）一行？

# iphone - 在 iPhone 上使用 SQLite 进行数据管理最实用的解决方案是什么？

> ID：784010
> 
> 赞同：0
> 
> 时间：2009-04-23T23:45:36.197
> 
> 标签：iphone, database-design, sqlite, memory-management

我正在开发一个 iPhone 应用程序，并且是 Objective-C 和 SQLite 的新手。话虽如此，我一直在努力设计一个值得存在的实用数据管理解决方案。任何帮助将不胜感激。

这是交易：

我的应用程序与之交互的大部分数据都存储在本地 SQLite 数据库的五个表中。每个表都有一个对应的类，用于处理对应表中每个对象/行的初始化、水合、脱水、删除等。每当应用程序加载时，它都会填充五个 NSMutableArrays（每种类型的对象一个）。除了主键之外，每个对象实例总是有一个可用的 ID 属性，无论水合状态如何。在大多数情况下，它是一个 UUID，然后我可以轻松引用它。

几天前，我会简单地通过这些数组通过跟踪它们的 UUID 来访问对象。然后我会根据需要对它们进行水合/脱水。但是，我拥有的一些对象也维护自己的数组，这些数组引用其他对象的 UUID。如果我必须通过它的 UUID 追踪这些“子”对象之一，它会变得更加困难。

为了避免必须通过前面提到的数组之一来查找“父”对象的 UUID，然后继续查找“子”的 UUID，我添加了一个带有单例实例的 DataController 以简化流程。

我曾希望 DataController 可以提供对本地数据库的单一访问点并使事情变得更容易，但我不太确定情况是否如此。基本上，我所做的是创建多个 NSMutableDicationaries。每当初始化 DataController 时，它都会枚举前面提到的在 Application Delegate 中维护的每个 NSMutableArrays，并在相应的字典中创建一个键/值对，使用给定的对象作为值，它的 UUID 作为键。

然后，DataController 公开允许客户端使用所需对象的 UUID 调用以检索对实际对象的引用的过程。每当它们是对对象的请求时，DataController 会自动对有问题的对象进行水合，然后将其返回。我这样做是因为我想控制客户手中的水合作用，以防止多次引用的对象脱水。

我意识到在大多数情况下，我可以只制作对象的可变副本，然后在必要时替换原始对象，但我想尽可能避免这种情况。因此，我添加了一个额外的字典，以使用对象的 UUID 作为键和表示水合次数的波动计数在任何给定时间监视哪些对象被水合，而没有偏移脱水。我使用这种方法的目标是让 DataController 自动脱水任何对象，一旦它的“水合保留计数”达到零，但这很容易导致严重的内存泄漏，因为它目前依赖于调用者稍后调用一个减少水合的过程对象的保留计数。显然，在很多情况下，这并不明显，或者甚至不容易实现，如果只有一个调用对象未能正确执行此操作，我会遇到与我一开始试图阻止的完全相反的情况。讽刺吧？

无论如何，我在想，如果我继续采用这种方法，它只会以糟糕的方式结束。我很想回到原来的计划，但这样做让我想畏缩，我确信那里有一个更优雅的解决方案。正如我之前所说，任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-23T23:54:17.097

您是否考虑过通过 NSCoder 接口来实现这一点？不确定它不会比它的价值更麻烦，但是如果您想要将所有数据提取到内存对象图中，然后再将其保存回来，那可能是合适的。如果您实际上是使用 SQL 查询来限制内存中数据的数量，那么显然，这不是这样做的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T06:52:18.370

我也知道（我相信你是）CoreData 指日可待，并确保你为未来做出正确的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-16T01:55:28.887

毕竟，我决定使用 Core Data。

# php - JavaScript 等效于 PHP 的 in_array()

> ID：784012
> 
> 赞同：253
> 
> 时间：2009-04-23T23:45:57.867
> 
> 标签：php, javascript, phpjs

JavaScript中有没有办法比较一个数组中的值并查看它是否在另一个数组中？

类似于PHP的[`in_array`](http://www.php.net/in_array)功能？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2009-04-23T23:47:13.743

不，它没有。出于这个原因，大多数流行的库都在其实用程序包中附带了一个。查看 jQuery 的*[inArray](http://api.jquery.com/jQuery.inArray/)*和 Prototype 的*[Array.indexOf](http://prototypejs.org/doc/latest/language/Array/prototype/indexOf/)*示例。

jQuery 的实现和你想象的一样简单：

```
function inArray(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i < length; i++) {
        if(haystack[i] == needle) return true;
    }
    return false;
} 
```

如果您正在处理数量合理的数组元素，则上述方法会很好地解决问题。

**编辑**：哎呀。我什至没有注意到您想查看一个数组是否在另一个数组中。根据 PHP 文档，这是 PHP 的预期行为[`in_array`](http://www.php.net/in_array)：

```
$a = array(array('p', 'h'), array('p', 'r'), 'o');

if (in_array(array('p', 'h'), $a)) {
    echo "'ph' was found\n";
}

if (in_array(array('f', 'i'), $a)) {
    echo "'fi' was found\n";
}

if (in_array('o', $a)) {
    echo "'o' was found\n";
}

// Output:
//  'ph' was found
//  'o' was found 
```

Chris 和 Alex 发布的代码不遵循这种行为。Alex 的是 Prototype 的 indexOf 的正式版，而 Chris 的更像 PHP 的[`array_intersect`](http://www.php.net/array_intersect). 这可以满足您的要求：

```
function arrayCompare(a1, a2) {
    if (a1.length != a2.length) return false;
    var length = a2.length;
    for (var i = 0; i < length; i++) {
        if (a1[i] !== a2[i]) return false;
    }
    return true;
}

function inArray(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i < length; i++) {
        if(typeof haystack[i] == 'object') {
            if(arrayCompare(haystack[i], needle)) return true;
        } else {
            if(haystack[i] == needle) return true;
        }
    }
    return false;
} 
```

这是我对上面的测试：

```
var a = [['p','h'],['p','r'],'o'];
if(inArray(['p','h'], a)) {
    alert('ph was found');
}
if(inArray(['f','i'], a)) {
    alert('fi was found');
}
if(inArray('o', a)) {
    alert('o was found');
}  
// Results:
//   alerts 'ph' was found
//   alerts 'o' was found 
```

请注意，我故意没有扩展 Array 原型，因为这样做通常是个坏主意。

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2016-11-21T09:50:03.800

现在有[`Array.prototype.includes`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)：

> includes() 方法确定数组是否包含某个元素，根据需要返回 true 或 false。

```
var a = [1, 2, 3];
a.includes(2); // true 
a.includes(4); // false 
```

> 句法

```
arr.includes(searchElement)
arr.includes(searchElement, fromIndex) 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2009-04-24T00:10:48.257

[`Array.indexOf`](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/indexOf)在 JavaScript 1.6 中引入，但在旧版浏览器中不受支持。值得庆幸的是，Mozilla 的小伙子们为您完成了[所有艰苦的工作](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/indexOf#Compatibility)，并为您提供了以下兼容性：

```
if (!Array.prototype.indexOf)
{
  Array.prototype.indexOf = function(elt /*, from*/)
  {
    var len = this.length >>> 0;

    var from = Number(arguments[1]) || 0;
    from = (from < 0)
         ? Math.ceil(from)
         : Math.floor(from);
    if (from < 0)
      from += len;

    for (; from < len; from++)
    {
      if (from in this &&
          this[from] === elt)
        return from;
    }
    return -1;
  };
} 
```

甚至还有一些方便的使用片段供您愉快地编写脚本。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2020-07-29T07:33:47.150

PHP方式：

```
if (in_array('a', ['a', 'b', 'c'])) {
   // do something if true
} 
```

我在 JS 中的解决方案：

```
if (['a', 'b', 'c'].includes('a')) {
   // do something if true
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2011-08-06T16:59:20.100

如果索引不按顺序，或者索引不连续，则此处列出的其他解决方案中的代码将中断。一个更好的解决方案可能是：

```
function in_array(needle, haystack) {
    for(var i in haystack) {
        if(haystack[i] == needle) return true;
    }
    return false;
} 
```

而且，作为奖励，这相当于 PHP 的 array_search （用于查找数组中元素的键：

```
function array_search(needle, haystack) {
    for(var i in haystack) {
        if(haystack[i] == needle) return i;
    }
    return false;
} 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2019-09-30T21:50:23.473

[您可以简单地使用w3schools 本课](https://www.w3schools.com/jsref/jsref_includes_array.asp)中解释的“包含”功能

看起来像

```
let myArray = ['Kevin', 'Bob', 'Stuart'];
if( myArray.includes('Kevin'))
console.log('Kevin is here');
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-06-07T21:51:57.590

有一个名为[Locutus](http://locutus.io)的项目，它在 Javascript 中实现 PHP 函数，并包含[in_array()](http://locutus.io/php/array/in_array)，您可以像在 PHP 中一样使用它。

使用示例：

```
in_array('van', myArray);

in_array(1, otherArray, true); // Forcing strict type 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-12-25T21:12:22.947

jQuery 解决方案可用，请在此处查看文档：http: [//api.jquery.com/jquery.inarray/](http://api.jquery.com/jquery.inarray/)

```
$.inArray( 10, [ 8, 9, 10, 11 ] ); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-05-24T10:14:30.877

```
var a = [1,2,3,4,5,6,7,8,9];

var isSixInArray = a.filter(function(item){return item==6}).length ? true : false;

var isSixInArray = a.indexOf(6)>=0; 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-09-30T18:03:22.843

There is an equivalent function:

```
includes() 
```

Look here: [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-06-06T15:46:21.833

如果您需要所有[PHP](http://en.wikipedia.org/wiki/PHP)可用参数，请使用以下命令：

```
function in_array(needle, haystack, argStrict) {
    var key = '', strict = !!argStrict;
    if (strict) {
        for (key in haystack) {
            if (haystack[key] === needle) {
                return true;
            }
        }
    }
    else {
        for (key in haystack) {
            if (haystack[key] == needle) {
                return true;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-04-24T00:01:53.320

如果您只想检查单个值是否在数组中，那么 Paolo 的代码将完成这项工作。如果您想检查两个数组共有的值，那么您需要这样的东西（使用 Paolo 的 inArray 函数）：

```
function arrayIntersect(a, b) {
    var intersection = [];

    for(var i = 0; i < a.length; i++) {
        if(inArray(b, a[i]))
            intersection.push(a[i]);
    }

    return intersection;
} 
```

这将返回一个包含 和 的值`a`数组`b`。（在数学上，这是两个数组的[交集](http://en.wikipedia.org/wiki/Intersection_(set_theory))。）

**编辑：**有关您的问题的解决方案，请参阅[Paolo 的编辑代码](https://stackoverflow.com/questions/784012/javascript-equivalent-of-phps-inarray/784015#784015)。:)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-03-24T08:27:55.580

将此代码添加到您的项目并使用对象样式的 inArray 方法

```
if (!Array.prototype.inArray) {
    Array.prototype.inArray = function(element) {
        return this.indexOf(element) > -1;
    };
} 
//How it work
var array = ["one", "two", "three"];
//Return true
array.inArray("one"); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2011-12-20T09:45:27.933

使用[Dojo Toolkit](http://en.wikipedia.org/wiki/Dojo_Toolkit)，您可以使用`dojo.indexOf()`. 有关文档，请参阅*[dojo.indexOf ，有关示例，请参阅 Bryan Forbes 的](http://dojotoolkit.org/reference-guide/dojo/indexOf.html)**[Arrays Made Easy](http://dojotoolkit.org/documentation/tutorials/1.6/arrays/)*。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-01-15T19:13:35.833

```
function in_array(needle, haystack){

    return haystack.indexOf(needle) !== -1;
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-10-11T00:09:47.497

```
haystack.find(value => value == needle) 
```

其中 haystack 是一个数组，而 needle 是数组中的一个元素。如果未找到元素，则返回未定义的元素，否则返回相同的元素。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-12-29T08:39:56.727

```
function in_array(what, where) {
    var a=false;
    for (var i=0; i<where.length; i++) {
        if(what == where[i]) {
            a=true;
            break;
        }
    }
    return a;
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-10-29T16:37:50.497

我在 SO 上找到[了](https://stackoverflow.com/questions/9204283/how-to-check-whether-multiple-values-exist-within-an-javascript-array/9204307#9204307)一个很棒的 jQuery 解决方案。

```
var success = $.grep(array_a, function(v,i) {
    return $.inArray(v, array_b) !== -1;
}).length === array_a.length; 
```

我希望有人会在下划线中发布如何执行此操作的示例。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-01-13T22:30:55.407

如果您打算在课堂上使用它，并且您希望它具有功能性（并且可以在所有浏览器中使用）：

```
inArray: function(needle, haystack)
{
    var result = false;

    for (var i in haystack) {
        if (haystack[i] === needle) {
            result = true;
            break;
        }
    }

    return result;
} 
```

希望它可以帮助某人:-)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-01-13T16:56:44.840

`in_array`with的等价物`underscore`是[_.indexOf](http://underscorejs.org/#indexOf)

例子：

`_.indexOf([3, 5, 8], 8); // returns 2, the index of 8 _.indexOf([3, 5, 8], 10); // returns -1, not found`

# bash - 如何使用 CX e 调用 VIM 来执行冗长、复杂、棘手的命令？

> ID：784019
> 
> 赞同：2
> 
> 时间：2009-04-23T23:48:04.927
> 
> 标签：bash, vim, editor

我在这里找到了一个很棒的提示[。](http://www.commandlinefu.com/commands/matching/tr/dHI=/sort-by-votes)您可以“[r] 快速调用编辑器来编写冗长、复杂或棘手的命令”。但是，当我按下上面的组合键时，我打开了 Emacs。我想把它切换到 Vim。如何使用 CX e 调用 Vim？

**[1。Brian Cambell 解决的问题]**

> 导出编辑器=vim

添加到您的 .bashrc 或适当的 shell rc 文件

**[2\. 感谢 Pax 解决了问题]**

我无法将棘手的命令返回给 Bash。错误是：

```
 > Error detected while processing BufRead Auto commands for "*":
 > E117: Unknown function: JumpToLastPosition 
```

.vimrc 中的引号解决了第二个问题。我仍然不确定我的 .vimrc 中的部分：

```
 "  augroup misc
  "      autocmd!
  "      autocmd BufReadPost * call JumpToLastPosition()
  "      autocmd FileChangedShell * call WarningMsg("File changed outside of vim")
  "  augroup end 
```

**[3\. 问题]**

.vimrc 中的上述部分是做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-23T23:50:13.690

```
export EDITOR=vim 
```

添加到您的 .bashrc 或适当的 shell rc 文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T00:24:00.973

在大多数 Linux 安装（我测试过的所有）上，bash 都能识别 Emacs 和 Vi 命令历史键（或者您可以使用`"set -o vi"`它来强制它）。

所以，你可以使用 vi 模式`"<ESC>v"`进入可视模式，这将在 Vim 会话中开始编辑。

要运行该命令，您只需保存并退出 Vim (`"ZZ"`或`":wq"`)。要取消命令，您需要删除内容，保存并退出（`"1GdGZZ"`）。

除了通过退出运行它之外，您还可以在编辑器中将其保存到另一个位置（`":w /tmp/myscript"`）。

请记住，可视模式将与当前选定的行一起使用，因此您不必从空白命令 ( `"<ESC>v"`) 开始。您可以使用普通的 vi 模式工具先从历史记录中选择一行，*然后*进入可视模式（`"<ESC>kv"`对于最后一个命令，`"<ESC>/grep<ENTER>nnv"`对于倒数第三个 grep 命令等）。

使用这种方法的优点是不改变`"EDITOR"`可能用于其他事情的变量（除非你想要 Vim for *all*，这是采取 IMNSHO 的一个非常明智的立场）。

**更新：**

关于您的错误，在问题之后发布：

`JumpToLastPosition()`是 Vim 为所有文件调用的函数，用于将光标放在您上次编辑文件时的位置。我将假设您实际上是在编辑开始时收到此错误，而不是在您退出时，因为这是缓冲区读取后的自动功能。

您可以在不发生此错误的情况下启动“正常”vim 会话（`"vim xx.txt"`然后）吗？`"vim xx"`你可能会发现你遇到了同样的问题（可能只在最后一个问题上）。

如果您确实有同样的问题，您需要查看您的启动文件。BufRead 的 autocmd 可能以某种方式损坏。看看你的 vimrc 和你的 filetype.vim 文件，看看该函数在哪里被调用和/或定义（我怀疑它被调用但没有定义，这可能是两个文件之间不匹配或其中一个文件已损坏）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T23:52:07.443

您提供的链接包含答案：

> 下次您使用 shell 时，请尝试输入 ctrl-x e（即按住 control 键按 x，然后按 e）。shell 将把你迄今为止在命令行上写的内容粘贴到 $EDITOR 指定的编辑器中。

您需要设置*EDITOR*环境变量（如@Brian Campbell）

# silverlight - Silverlight 应用程序的最佳分辨率是多少？

> ID：784023
> 
> 赞同：0
> 
> 时间：2009-04-23T23:49:42.287
> 
> 标签：silverlight, screen-resolution

我读过[一篇文章](http://cameronmoll.com/archives/2009/04/is_it_time_to_move_beyond_960/)，谈到网站的宽度超过 960 像素。这个宽度被认为是最佳的，因为它可以被 3、4、5、6、8、10、12、15 和 16 整除（不，这些不是[丢失的数字](http://lostpedia.wikia.com/wiki/The_Numbers);-)）这有助于网格放置，这确实没有'不适用于 Silverlight 应用程序，但我开始想知道什么是最佳的。

您会推荐什么作为 Silverlight 应用程序的最佳分辨率？

我认为 960 x 720 将在几乎所有显示器的范围内。
或者可能是 720 x 540 的下一步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-23T23:53:03.573

Silverlight 应用程序的最佳选择是用户将分辨率设置为 - 应用程序会相应地扩展。

有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/cc189043(VS.95).aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-23T23:51:44.090

就我个人而言，对于我所做的应用程序类型，我不会费心去尝试支持可用空间少于 960 像素的人。总会有人拥有过时的技术/显示器尺寸……而 960 可能会覆盖 95% 或更多的目标受众。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T13:16:49.850

您需要注意的一件事是，许多笔记本电脑的最大垂直分辨率为 800 像素，一旦您添加了标题栏、工具栏、开始菜单、状态栏等，您实际上很容易低于 600 像素用于垂直屏幕空间。上网本可能会更糟。我见过太多垂直方向为 600 像素或更多的 Silverlight 应用程序，它们被截断，因为 div 没有设置为使页面滚动的正确高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T13:21:10.153

我同意 Anthony 的观点，您应该让应用自行调整大小。只需确保应用程序和所有控件在从非常小的尺寸变为非常大的尺寸时都可以很好地缩放（没有任何东西被切断或拉伸过大或过小）。

# javascript - 如何使用单选按钮切换谷歌（和维基百科）搜索框建议？

> ID：784027
> 
> 赞同：1
> 
> 时间：2009-04-23T23:50:31.957
> 
> 标签：javascript, jquery, search-engine, wiki-engine

我将 Google 和 Wikipedia 搜索框添加到页面中，并且我正在寻找一种方法来根据所选单选按钮更改建议。

事实上，建议语言应该根据检查的语言而改变。

这是我的实际代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Google Suggest Test</title>
 <script type="text/javascript" src="googlesuggest.js"></script>
</head>
<body>
<form action="http://www.google.com/search" id="google_suggest" >
 <div>
  <input name="q" value="" type="text" />
  <input type="submit" value="OK" />
  <input type="hidden" name="complete" value="1" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="hidden" name="oe" value="UTF-8" />
  <input type="hidden" name="num" value="30" />
  <input type="hidden" name="channel" value="s" />
  <br />
  <label for="all"><input id="all" type="radio" name="lr" value="" checked="checked" />All</label>
  <label for="lang_en"><input id="lang_en" type="radio" name="lr" value="lang_en" />English</label>
  <label for="lang_fr"><input id="lang_fr" type="radio" name="lr" value="lang_fr" />French</label>
  <label for="lang_de"><input id="lang_de" type="radio" name="lr" value="lang_de" />German</label>
  <label for="lang_ru"><input id="lang_ru" type="radio" name="lr" value="lang_ru" />Russian</label> 
  <label for="lang_es"><input id="lang_es" type="radio" name="lr" value="lang_es" />Spanish</label>
  <br /><br />
 </div>
</form>
<form method="post" action="wikipedia_action.php">
 <div>
  <input type="text" name="wikipedia_field" />
  <input type="submit" value="OK" />
  <br />
  <label for="wik_en"><input type="radio" checked="checked" name="wikipedia" id="wik_en" value="wik_en" />English</label>
  <label for="wik_fr"><input type="radio" name="wikipedia" id="wik_fr" value="wik_fr" />French</label>
  <label for="wik_de"><input type="radio" name="wikipedia" id="wik_de" value="wik_de" />German</label>
  <label for="wik_ru"><input type="radio" name="wikipedia" id="wik_ru" value="wik_ru" />Russian</label>
  <label for="wik_es"><input type="radio" name="wikipedia" id="wik_es" value="wik_es" />Spanish</label>
 </div>
</form>
</body>
</html> 
```

脚本 googlesuggest.js：

```
$(document).ready(function(){

window.google = {
    kEI: "wR-4SfmNIMyA-AbluKj5Cg",
    kEXPI: "17259,17291,18169",
    kHL: "fr"
};
var _gjwl = location;
function _gjuc() {
    var a = _gjwl.hash.substring(1);
    if (/(^|&)q=/.test(a) && a.indexOf("#") == -1 && !/(^|&)cad=h($|&)/.test(a)) {
        _gjwl.replace("search?" + a.replace(/(^|&)fp=[^&]*/g, "") + "&cad=h");
        return 1
    }
    return 0
};
window._gjuc && location.hash && _gjuc();

google.y = {};
google.x = function(e, g) {
    google.y[e.id] = [e, g];
    return false
};
window.clk = function(b, c, d, e, f, g, h) {
    if (document.images) {
        var a = encodeURIComponent || escape;
        (new Image).src = ["/url?sa=T", c ? "&oi=" + a(c) : "", d ? "&cad=" + a(d) : "", "&ct=", a(e), "&cd=", a(f), b ? "&url=" + a(b.replace(/#.*/, "")).replace(/\+/g, "%2B") : "", "&ei=wR-4SfmNIMyA-AbluKj5Cg", g].join("")
    }
    return true
};
window.gbar = {
    qs: function() {},
    tg: function(e) {
        var o = {
            id: 'gbar'
        };
        for (i in e) o[i] = e[i];
        google.x(o,
        function() {
            gbar.tg(o)
        })
    }
};

if (google.y) google.y.first = [];
window.setTimeout(function() {
    var xjs = document.createElement('script');
    xjs.src = 'http://www.google.com/extern_js/f/CgJmciswCjgNLCswDjgELCswFjgELCswFzgBLCswGDgDLCswJTjJiAEsKzAnOAAs/4Pb8ykSjyRQ.js';
    document.getElementsByTagName('head')[0].appendChild(xjs)
},
0);
google.y.first.push(
    function(){
        var google_suggest = document.getElementById('google_suggest');
        google.ac.i(
            google_suggest,
            google_suggest.q,
            '',
            ''
        )
    }
)
function _gjp() { ! (location.hash && _gjuc()) && setTimeout(_gjp, 500);
}
window._gjuc && _gjp();

}); 
```

wikipedia_action.php 的 PHP

```
<?php
$search_field = trim($_POST['wikipedia_field']);
$search_engine = trim($_POST['wikipedia']);
$url_params = preg_replace('/(\ )+/', '+', $search_field);
$url = array('wik_en'=>'http://en.wikipedia.org/wiki/Special:Search?search=', 'wik_fr'=>'http://fr.wikipedia.org/wiki/Special:Search?search=', 'wik_de'=>'http://de.wikipedia.org/wiki/Special:Search?search=', 'wik_ru'=>'http://ru.wikipedia.org/wiki/Special:Search?search=', 'wik_es'=>'http://es.wikipedia.org/wiki/Special:Search?search=');
header('Location:'.$url[$_POST['wikipedia']].$url_params)
?> 
```

其实我有两个问题……</p>

1 - 我注意到谷歌建议将**kHL:"en"**更改为**kHL:"fr"**用于法语或**kHL:"de"**用于德语可以解决问题，但我不知道如何根据选中的单选按钮进行更改？（并且没有一些 onClick，jQuery 应该会更好）

2 - 我也未能建立维基百科建议系统，这就是我也在寻找这个（并且建议改变）的原因。它在这里使用：

[http://en.wikipedia.org/wiki/Special:搜索](http://en.wikipedia.org/wiki/Special:Search)

[http://fr.wikipedia.org/wiki/Sp%C3%A9cial:Recherche](http://fr.wikipedia.org/wiki/Sp%C3%A9cial:Recherche)

[http://de.wikipedia.org/wiki/Spezial:Suche](http://de.wikipedia.org/wiki/Spezial:Suche)

等等。

任何帮助，将不胜感激 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-10T21:44:31.043

你有两个脚本独立工作吗？换句话说，一页有谷歌建议，一页有 WP 建议？如果是这样，我会建议简单地使用两个具有唯一 ID 的表单，让每个表单都可以单独工作。

隐藏你不使用的那个。当您单击单选按钮切换它们时，隐藏一个表单并显示另一个表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T01:55:56.743

这篇文章真的应该分成两个单独的问题。至于你的问题的谷歌建议部分。单击单选按钮时，您可以使用以下 jquery 代码更改 kHL：

```
<script type="text/javascript">
    $(function(){
        $("#google_suggest input[type='radio']").click(function(){
            alert("kHL Before="+window.google.kHL);
            window.google.kHL = this.id.replace('lang_','');    
            alert("kHL After="+window.google.kHL);
        });   
    });
 </script> 
```

但是，虽然您可以通过警报知道 kHL 更改正确，但 GoogleSuggest 下拉菜单不会更改语言。换句话说，kHL 被固定在里面的设置上`$(document).ready()`。

我唯一能想到的就是用`onchange()`事件动态地重新加载 googlesuggest.js。这是您需要进一步调查的事情。

# .net - 创建带有标题部分的列表视图

> ID：784037
> 
> 赞同：1
> 
> 时间：2009-04-23T23:53:51.560
> 
> 标签：.net, winforms, list, view

我想创建一个类似于 Office 2007 样式的“新建文档”对话框（见图）。我在使用左侧显示的列表时遇到问题。我尝试使用 ListView 控件，但不知道如何显示随列表滚动的标题部分（例如“模板类别”和“Microsoft Office Online”

重新创建这种列表样式的最佳选择是什么？

我正在使用 .net3.5、VS2008 和 winforms（不是 WPF）。如有必要，我也愿意购买 3rd 方控件。

[替代文字 http://iicom.com/cnwk.1d/i/z/200606/office/eb_office2007_024a.png](http://i.i.com.com/cnwk.1d/i/z/200606/office/eb_office2007_024a.png)

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T00:01:30.777

在没有看到图片的情况下（您是否忘记包含它？），我猜您正在谈论 ListView 中的组。这很容易实现。

[查看有关ListView.Groups](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.groups.aspx)属性的 MSDN 文档。一旦您定义了您的组（在您的示例中为“模板类别”和“Microsoft Office Online”），您可以在每个 ListViewItem 上指定一个组以使其保留在该组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T13:59:09.017

我最终使用了第 3 方控件（来自 prof-uis.com 的 Elegant.ui.NavigationBar）作为最终表单。下面的屏幕截图。

[我的“新文档”表单使用 Elegant.ui.NavigationBar http://www.ruleclarity.com/images/stories/screenshots/new_document_dialog.jpg](http://www.ruleclarity.com/images/stories/screenshots/new_document_dialog.jpg)

标题和项目实际上是按钮 (Elegant.Ui.ToggleButton)，标题按钮被禁用，因此它们不会对鼠标做出反应。我觉得这看起来不错。请注意在此表单上，我还使用了带有组标题的 ListView（在最右侧的窗格中）

# visual-studio - 我该如何摆脱这些点！

> ID：784039
> 
> 赞同：11
> 
> 时间：2009-04-23T23:55:40.900
> 
> 标签：visual-studio

我在 VS2008 中的一个项目上进行编码，我试图点击 CTR + R +E 将一个字段封装为一个属性（resharper 的功能），我摸索着，现在我到处都有点，我有空格，我不知道如何摆脱它。例如

```
using.System;

Namespace.EgNamespace
{
....public.class.TestClass
....{
........public.void.TestMethod()
........{
............return;
........}

....}
} 
```

这些点居中，但非常接近。我一直在寻找工具->选项->文本编辑器以切换以将其关闭，但我迷路了。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-23T23:58:49.723

`Ctrl+R, Ctrl+W`或者

`Edit –&gt; Advanced –&gt; View White Space`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T00:03:36.387

就个人而言，我非常喜欢可见的白色空间，但前提是它从强烈的绿色变为浅灰色。请参阅[您最推荐的 Visual Studio 首选项是什么？](https://stackoverflow.com/questions/189118/what-are-your-most-recommended-visual-studio-preferences/484590#484590)

# linux - 如何以编程方式禁用硬件预取？

> ID：784041
> 
> 赞同：46
> 
> 时间：2009-04-23T23:56:50.477
> 
> 标签：linux, kernel, prefetch

我想以编程方式禁用硬件预取。

从[使用硬件实现的预取器优化英特尔® 酷睿™ 微架构上的应用程序性能](http://software.intel.com/en-us/articles/optimizing-application-performance-on-intel-coret-microarchitecture-using-hardware-implemented-prefetchers/)以及 [如何在 32 位英特尔® 架构上选择硬件和软件预取](http://software.intel.com/en-us/articles/how-to-choose-between-hardware-and-software-prefetch-on-32-bit-intel-architecture/)，我需要更新 MSR 以禁用硬件预取。

这是一个相关的片段：

> “DPL Prefetch 和 L2 Streaming Prefetch 设置也可以通过编写用于更改`IA32_MISC_ENABLE` 寄存器中的位的设备驱动程序实用程序以编程方式更改 -`MSR 0x1A0`此类实用程序提供启用或禁用预取机制的能力，而无需任何服务器停机时间。

下表显示了为了控制和 L2 流预取`IA32_MISC_ENABLE MSR`而必须更改的位：`DPL`

```
Prefetcher Type MSR (0x1A0) Bit Value 
DPL (Hardware Prefetch) Bit 9 0 = Enable 1 = Disable 
L2 Streamer (Adjacent Cache Line Prefetch) Bit 19 0 = Enable 1 = Disable" 
```

我尝试使用[http://etallen.com/msr.html](http://etallen.com/msr.html)但这不起作用。我也尝试过直接使用`wrmsr`in`asm/msr.h`但那是段错误。我尝试在内核模块中执行此操作......并杀死了机器。

顺便说一句 - 我使用的是内核 2.6.18-92.el5，它已`MSR`链接到内核中：

```
$ grep -i msr /boot/config-$(uname -r)
CONFIG_X86_MSR=y
... 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-24T22:10:13.033

[您可以使用 msr-tools http://www.kernel.org/pub/linux/utils/cpu/msr-tools/](http://www.kernel.org/pub/linux/utils/cpu/msr-tools/)启用或禁用硬件预取器 。

以下启用硬件预取器（通过取消设置位 9）：

```
[root@... msr-tools-1.2]# ./wrmsr -p 0 0x1a0 0x60628e2089 
[root@... msr-tools-1.2]# ./rdmsr 0x1a0 
60628e2089 
```

以下禁用硬件预取器（通过启用位 9）：

```
[root@... msr-tools-1.2]# ./wrmsr -p 0 0x1a0 0x60628e2289 
[root@... msr-tools-1.2]# ./rdmsr 0x1a0 
60628e2289 
```

以编程方式，您可以通过打开`/dev/cpu/<cpunumber>/msr`并使用 pwrite 在偏移处写入 msr“文件”来以root 身份执行此操作`0x1a0`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-24T09:10:54.933

来自 Intel 参考：
该指令必须在特权级 0 或实地址模式下执行；否则，将生成一般保护异常#GP(0)。在 ECX 中指定保留或未实现的 MSR 地址也会导致一般保护异常。

...
在使用该指令之前，应使用 CPUID 指令确定是否支持 MSR（EDX[5]=1）。

因此，您的错误可能与不支持 MSR 的 CPU 或使用错误的 MSR 地址有关。

在内核源码中有很多使用MSR的例子：

在内核源码中，对于单个cpu，它在arch/i386/kernel/cpu/intel.c中演示了禁用Xeon的预取，在函数中：

static void __cpuinit Intel_errata_workarounds(struct cpuinfo_x86 *c)

rdmsr 函数参数是 msr 编号、指向低 32 位字的指针和指向高 32 位字的指针。
wrmsr 函数参数是 msr 编号、低 32 位字值和高 32 位字值。

多核或 smp 系统必须将 cpu 结构作为第一个参数传入：
void rdmsr_on_cpu(unsigned int cpu, u32 msr_no, u32 *l, u32 *h);
无效 wrmsr_on_cpu（无符号整数 cpu，u32 msr_no，u32 l，u32 h）；

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-29T02:57:14.020

2014 年，英特尔发布了有关使用 0x1a4 msr (1a4 msr) 禁用 Nehalem、Westmere、Sandy Bridge、Ivy Bridge、Haswell、Broadwell（可能还有更新的内核）的硬件预取器的信息。[bholanath](https://stackoverflow.com/users/2191202/bholanath) [在这里](https://stackoverflow.com/questions/6662140/hardware-prefetching-in-corei3#comment35984420_19416161)找到了链接：

[https://software.intel.com/en-us/articles/disclosure-of-hw-prefetcher-control-on-some-intel-processors](https://software.intel.com/en-us/articles/disclosure-of-hw-prefetcher-control-on-some-intel-processors)披露一些英特尔处理器上的硬件预取器控制 - Vish Viswanathan（英特尔） , 2014 年 9 月 24 日

> 本文公开了 MSR 设置，可用于控制基于以下微架构的英特尔处理器上可用的各种硬件预取器：Nehalem、Westmere、Sandy Bridge、Ivy Bridge、Haswell 和 Broadwell。
> 
> 上述处理器支持 4 种类型的硬件预取器来预取数据。有 2 个与 L1 数据缓存相关的预取器（也称为 DCU *DCU 预取器、DCU IP 预取*器）和 2 个与 L2 缓存相关的预取器*（L2 硬件预取器、L2 相邻缓存行预取器）*。
> 
> 每个内核上都有一个型号特定寄存器 (MSR)，地址为 0x1A4，可用于控制这 4 个预取器。该寄存器中的位 0-3 可用于启用或禁用这些预取器。该 MSR 的其他位被保留。

它们对于每个 CPU 内核都是本地的，并且可以在`msr`linux 内核驱动程序的帮助下由 root 更改。英特尔使用它们通过英特尔 MLC 工具测量 NUMA 中的内存延迟：

> For example, Intel Memory Latency Checker tool ([http://www.intel.com/software/mlc](http://www.intel.com/software/mlc)) modifies the prefetchers through writes to MSR 0x1a4 to measure accurate latencies and restores them to the original state on exit.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-27T14:14:30.680

我在这里添加一个答案，因为以前的答案可能不适用于所有英特尔处理器。

对于我的 Intel Xeon 5650（06_2CH 系列）处理器，[手册第 35 章](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-manual-325462.pdf)指定地址 0x1A0 处的寄存器 IA32_MISC_ENABLE 的位 10 到 8 被保留。我想这意味着我无法通过 MSR 打开和关闭预取器。

根据[此处](http://software.intel.com/en-us/forums/topic/341769)英特尔员工的回答：“英特尔尚未披露如何禁用 Nehalem 之后的处理器上的预取器。您需要使用 BIOS 中的选项来禁用预取器。”

# http-headers - Google Analytics 如何确定事件的日期和时间？

> ID：784045
> 
> 赞同：0
> 
> 时间：2009-04-23T23:59:16.773
> 
> 标签：http-headers, google-analytics

我试图弄清楚谷歌分析如何记录访问或点击等事件的实际时间。它是使用 HTTP 请求传递的时间、HTTP 标头中的日期还是它实际接收请求的日期？

我问的原因是因为我正在开发一个应用程序，有时可能会丢失互联网连接。所以，我正在考虑开发一个缓冲代理来保存这些请求，直到连接备份。如果数据/时间基于请求的标头或时间，那么它对我来说不是一个可行的解决方案。

如果有人知道，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T13:44:58.167

Google Analytics 服务器使用事件的实际时间。这意味着您的应用程序执行的任何事件通知缓冲都将在您的报告中进行时移。

只有您可以决定这是否符合您的报告要求：丢弃事件或误报某些事件发生的时间哪个更小？

# c# - HRESULT：0x8004D00E 使用 TransactionScope - C#

> ID：784047
> 
> 赞同：3
> 
> 时间：2009-04-23T23:59:47.567
> 
> 标签：c#, .net, sql-server-2005, sql-server-2000, transactionscope

当我尝试在连接到 SQL Server 2000 的 Windows Server 2003 Standard Edition SP1 计算机上运行 C# WinForms 应用程序时收到以下错误，转换 WinForms 应用程序中的数据并将转换后的数据插入 SQL Server 2005 应用程序。我正在使用 SSPI 连接到每个数据库。

代码包含在 TransactionScope 块中：

```
System.TimeSpan TransactionTimeOut = new TimeSpan(0, 40, 0);

    using(TransactionScope Scope = new TransactionScope(TransactionScopeOption.RequiresNew, TransactionTimeOut))
    {
        try
        {
            //meat of transaction...
        }
        catch(Exception ex)
        {
            throw ex;
        }

        Scope.Complete();
    } 
```

错误信息：

> 例外：事务已被隐式或显式提交或中止。
> 
> 内部异常：事务已被隐式或显式提交或中止（来自 HRESULT 的异常：0x8004D00E）

任何人都知道可能导致此问题的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T00:10:27.697

检查 DTC 是否在运行代码的机器上启动。由于您在事务范围中使用 2 个连接，因此事务将被提升为基于 DTC 的事务。

此外，检查安全配置是否正确（通过允许匿名参与 DTC 事务来检查），以及您的防火墙是否允许 DTC 通过它。

查看此论坛常见问题解答：[分布式事务协调器 (MSDTC) 和事务常见问题解答](http://social.msdn.microsoft.com/forums/en-US/windowstransactionsprogramming/thread/173c937d-3fdc-43ab-8127-6083cef29a0e/)

[与此 SO 问题相关：[分布式事务协调](https://stackoverflow.com/questions/796416/distributed-transaction-coordinator/)器]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T00:05:57.973

这个过程需要多长时间？如果您达到了超时（不太可能有 40 分钟的超时，但仍有可能），您可能会收到该错误消息。

否则，您是否收到异常？在抛出异常之前发生了什么？

# css - 如何使用 CSS 更改浏览器的滚动条颜色？

> ID：784053
> 
> 赞同：2
> 
> 时间：2009-04-24T00:03:09.370
> 
> 标签：css, scrollbar

在[Google 结果](http://www.google.com/search?client=opera&rls=en&q=change+browser+scrollbar+color+using+css&sourceid=opera&ie=utf-8&oe=utf-8)页面上，我看到的示例仅在 IE 中有效，而在 Opera 中则有一个案例。

有什么方法可以在所有浏览器中一致地完成吗？

此外，浏览器的主滚动条（出现在整个页面上）和页面文本区域中的滚动条之间是否有区别？如果不是前者，我可以只操纵后者吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T00:18:32.450

您可以结合使用 CSS 和 JavaScript*在*页面中创建自己的滚动条。请参阅[https://stackoverflow.com/questions/780674/scroll-bar-with-images](https://stackoverflow.com/questions/780674/scroll-bar-with-images)。

*但是，页面外*滚动条的呈现取决于浏览器。

WebKit[最近添加了设置默认滚动条样式的功能](http://webkit.org/blog/363/styling-scrollbars/)，但这仍然只适用于页面内。

**编辑**：似乎[MooScroll](http://greengeckodesign.com/projects/mooscroll.aspx) *已经*设法“替换”浏览器的主滚动条，告诉它没有可滚动的内容，然后在窗口的最右侧创建自己的滚动条。聪明的！

史蒂夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T00:31:23.717

[史蒂夫](https://stackoverflow.com/questions/784053/how-do-i-change-the-browsers-scrollbar-colours-using-css/784089#784089)有一个很好的答案，但请允许我继续。

在 IE 5.5-7 中（但我认为他们在 8 中摆脱了它），您可以使用一些专有的 MS CSS 属性来设置滚动条的样式。我不会推荐这个。

Steve 提到页面外的滚动条取决于浏览器。虽然这是真的，但您可以通过将 body 元素设置为`overflow: hidden`然后在 HTML 中放置一个巨大的容器来伪造它`height: 100%; width: 100%`。

我不建议您触摸用户的滚动条。它们是众所周知的约定，最终用户可以很快识别它们。他们知道如何使用默认的 OS 样式滚动条，而不是您快速尝试跨浏览器 CSS/JS 实现。我认为是[史蒂夫·克鲁格说“不要让我思考！”](http://www.amazon.co.uk/Dont-Make-Me-Think-Usability/dp/0321344758)

您见过滚动自己滚动条的 Flash 网站吗？*啊！*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T00:05:35.010

没有跨浏览器的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T00:06:01.780

简短的回答没有。

不幸的是，浏览器的外观不受您的控制 - 您只是提供内容。由浏览器决定如何滚动内容。

# php - 什么 php 函数可以显示来自 XML 文件的格式化 XHTML？

> ID：784056
> 
> 赞同：1
> 
> 时间：2009-04-24T00:04:49.397
> 
> 标签：php, xml, xhtml

我一直在尝试从 xml 文件中显示格式化的内容块，但没有成功。我一直在使用 simplexml_load_file 和其他我现在看到的无法处理被调用标签中的 xhtml 标签的变体......例如。

```
//php contents
 <?php $xml=simplexml_load_file("file.xml");
 echo ($xml->entry); ?> 
```

* * *

```
//xml contents
 <entry>
 <p>This does not work</p>
 </entry> 
```

然而

```
 <entry>This works</entry> 
```

有人可以告诉我哪个 php 函数可以从 xml 文件中执行此操作，或者使用 xhtml 格式显示内容的最佳方法是什么？

我试图将内容动态加载到网页而不必构建太多页面。我喜欢将所有内容放在一个 xml 文件中以便于编辑的想法。

还没有足够的内容来证明数据库的合理性。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T00:19:26.023

`$xml->entry`您可以尝试使用 asXml 函数转储某个 simplexml 节点（在本例中为：）的内容。

```
echo $xml->entry->asXml(); 
```

在此处查看有关 simplexml 的 php 文档（链接到 asXml() 调用）：

[Simplexml 文档](http://us2.php.net/manual/en/function.simplexml-element-asXML.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T00:18:08.660

我越来越近了...我找到了输出 html 标签的 asXML()...但还不确定如何指向特定的块...例如 $xml->asXML(block) 显示 1

知道了

```
$xml->block->asXML() 
```

作品

仍然想知道是否有更好的方法。

# powershell - 使用 PowerShell 在目录上递归运行一个简单的命令

> ID：784057
> 
> 赞同：8
> 
> 时间：2009-04-24T00:05:26.087
> 
> 标签：powershell, imagemagick

使用 DOS 脚本或 PowerShell 在目录及其所有子目录上运行这个简单命令的最快方法是什么：

```
 convert filename.jpg -resize 620x620 "R:\processed\filename.jpg" 
```

**单个目录的 DOS 批处理脚本**：

```
 FOR %%a in (*.jpg) DO convert %%a -resize 620x620 "R:\processed\%%a" 
```

我想在目录结构上递归运行它并使输出与输入层次结构匹配。我认为 PowerShell 是最简单的方法，但我无法在 5 分钟内完成这项任务！

注意：不是相关的，而是`convert`来自[ImageMagick](http://www.imagemagick.org/script/index.php)。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-04-24T00:09:26.373

在 PowerShell 中：

使用 -recurse 开关和管道进行 foreach。例如：

```
dir -recurse -include *.jpg | %{convert  $_.FullName -resize 620x620 "R:\processed\$_"} 
```

（注意 % 符号是 foreach-object 的别名）。

# project-management - 大项目——成功之路

> ID：784061
> 
> 赞同：0
> 
> 时间：2009-04-24T00:07:39.560
> 
> 标签：project-management, collaboration

我一直在做一些小规模的项目。我还没有开始一个大型项目，因为我还没有遇到任何我需要的东西，并且还没有被其他 FOSS 完成。到目前为止。我想制作一个允许用户以交互方式学习第二语言的程序（我有点想让它尽可能接近罗塞塔石碑）。

现在我是唯一的开发人员，因为我不确定我是否咬得比我能咀嚼的更多，并且不想浪费任何贡献者的时间。

到目前为止，我一直在计划项目将如何工作，并设置工具以使项目顺利启动，并在其他用户准备好为其做出贡献时易于访问。我已经设置了一个 SourceForge 帐户、一个 git 存储库以及一个列出所有功能以及程序将要完成的任务的文档。

一个基本的分解是该套件将用 Java 编写，并且该套件将能够通过其语言环境支持多种语言。学习语言的课程将用 jython 编写。课程制作者将能够使用预制的 jython 课程来教授他们的课程，或制作自己的原创课程。我希望这将允许该软件通过许多母语教授丰富的语言。

我还计划建立一个“已发布课程”的存储库，这些课程是我（或更好地理解该语言的人）认为是一流课程的课程。这有望使程序对用户来说看起来更加专业和安全，同时允许第三方参与。

考虑到这一点：

您想对我的项目提出任何致命的缺陷或建议吗？

一般来说，我在制作一个大项目时有什么遗漏吗？

感谢您的时间和精力，

约瑟夫池塘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T00:42:45.997

如果你不相信其他人应该认为你的项目值得他们花时间，那么你总是会咬得比你能咀嚼的更多。这更像是一个领导点，而不是一个编程点。*但是，认真地想一想：即使知道您目前还没有准备好应对即将面临的许多挑战，您*是否相信这个想法会发生？ 你给了我们一个粗略的大纲。你会给别人一个更彻底的解释，很快就会很明显你忽略了一些东西。没有人能阻止这种情况发生在你身上。话虽如此，如果您认为自己对大多数组件的需求有很好的把握，并且您认为您可以将需求描述得透彻，并且具有适当的技能，那么我会说去吧。

PS——如果你有任何模型，从潜在开发人员的角度来看，这将是一笔不错的交易。听起来卖点是轻松设计新课程的可扩展性。如果是这样，请大致了解 Jython 的基本结构。当我的主管给我一个我完全理解的任务时，我宁愿他不告诉我如何开始或使用什么设计或实现。当我不知道他在说什么时，最粗略的草图让我有好几天的先机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T00:24:28.350

您也是唯一的分析员、翻译员、技术作家和测试员吗？对于一个人来说，这听起来像是一项艰巨的任务。你有最后期限吗？在我看来，您至少需要另一个开发人员和测试人员。如果你有紧迫的最后期限，那就更是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T00:34:18.437

只需找到真正同意您的想法并拥有所有权的合适人选。

我参与了几个项目，但我退出了一些，只做我真正感兴趣的一个。所以，从反面看，寻找贡献者并不容易，必须找到有我提到的东西的人关于。然后，您可以谈论保持联系，系统...项目管理..等。如果你找不到合适的人，即使你有一个好的系统，你也只是在浪费时间，无处可去。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T00:49:50.007

好的，有几件事。首先，最好不要做大项目。而是做很多小项目。如果最终得到的结果是一件大事，那很好。

其次，很多时候最适合做这件事的方法是考虑如何做一些事情来让这一切变得更容易。在这种情况下，你有两个问题：制作一些东西来执行显示和提供反馈所需的各种操作（我自己正在学习 Rosetta Stone 课程，它们非常酷。）

你真的在考虑一个课程创作系统；您不能为所有语言编写所有材料，因此您必须使创作变得容易。

这听起来像是 DSL（一种特定领域的语言）的工作。

这听起来是个很酷的主意。

# ubuntu - 如何在 Ubuntu 上安装 g++ 4.4？

> ID：784063
> 
> 赞同：6
> 
> 时间：2009-04-24T00:07:56.033
> 
> 标签：ubuntu, g++

有一个 Debian [g++-4.4](http://packages.debian.org/experimental/g++-4.4)软件包，但它不是 Ubuntu。网络上有太多被系统破坏的可怕故事。

如何在 Ubuntu 上安装 g++ 4.4？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2010-07-09T16:47:57.367

我建议您安装包含 g++ 的 build-essential 软件包。

在终端中输入：

> $ sudo apt-get install build-essential

然后确认安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T00:11:17.197

Debian 软件包应该可以在 Ubuntu 上运行。它基于 Debian。

编辑：试试这个：

```
sudo apt-get install gcc-snapshot 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T00:24:00.380

看看这个网址。我从那里安装了 gcc-4.4（和 g++-4.4），这似乎是实际上将 gcc-4.4 放入 ubuntu .deb 的最官方的黑客组织。到目前为止运行没有问题：

[https://launchpad.net/~ubuntu-toolchain/+archive/ppa](https://launchpad.net/~ubuntu-toolchain/+archive/ppa)

问候。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T21:43:24.310

从您的终端类型`sudo apt-get install g++`。它对我来说效果很好！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T18:54:54.650

[https://launchpad.net/~ubuntu-toolchain/%2Barchive/ppa](https://launchpad.net/~ubuntu-toolchain/%2Barchive/ppa)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T00:16:15.920

我建议反对它。需要更新版本的 g++ 将要求如果您使用 4.4 的任何新功能，那么您的用户也将需要 4.4 运行时库。话虽如此，我只会下载源代码，`./configure --ALLMYOPTS&&make && sudo make install`. 如果你想制作一个类似于 Ubuntu 附带的 gcc，`apt-get source gcc`并在 debian/rules 中查看它们的配置标志（它们可能应用于多行）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T00:19:11.310

如果是在 debian 存储库中，在 Ubuntu 下应该没问题。如果您想添加存储库，只需按照[此处](https://help.ubuntu.com/8.04/add-applications/C/extra-repositories-adding.html)的说明进行操作。

# git - 在 Github 上，你如何区分好坏？

> ID：784064
> 
> 赞同：4
> 
> 时间：2009-04-24T00:08:03.070
> 
> 标签：git, github

我正在寻找一些已经构建的 Rails/Facebook 功能 - 作为我自己的 Facebook 消费 Rails 应用程序的起点。问题是，当我在 Github 上搜索时，我会发现大量属于这一类的应用程序，并且没有简单的方法来区分它们。这有什么秘密吗？还是只有在阅读了 Github 之外的项目后才使用 Github（在哪里？）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T00:13:43.290

生活中，如何分辨好坏？

通常，您将不得不做出某种判断。您可以浏览代码以检查质量。听到 GitHub 之外的东西也很好，以及看到其他人在 GitHub 上的项目中使用它。另外，看看它有多少个分叉，它们有多活跃，以及维护者对补丁的接受程度。

这些是我用来确定任何自由软件是否值得使用的一般规则。

1.  它被很多其他人使用，尤其是大型项目，还是只有少数人使用
2.  它有积极的发展吗？
3.  它是否有超过一两个人在工作，所以如果一个人感到无聊，它仍然会被维护吗？

# .net - 从现有 .Net 项目自动创建 UML 图的免费工具

> ID：784066
> 
> 赞同：3
> 
> 时间：2009-04-24T00:08:57.060
> 
> 标签：.net, visual-studio, uml

是否有任何免费工具可以从现有的 .Net/Visual Studio 2005 项目中自动创建 UML 图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T00:37:38.880

如果您使用的是 Visual Studio Team Suite 2005（注意：不是 2008），我相信您可以选择将 .Net 代码逆向工程为 Visio 中的 UML，请注意，这不适用于 Visual Studio Team Suite 2008！

要使用 Team Suite 2005 将 .Net 代码逆向工程到 UML，您应该能够单击以下菜单项：项目 -> Visio UML -> 逆向工程。

对于 Team Suite 2008（仅供参考，因为您使用的是 VS 2005），MSDN 有这个[有趣的链接](http://msdn.microsoft.com/en-us/library/cc947873.aspx)，它可能来自这个[MSDN 线程](http://social.msdn.microsoft.com/Forums/en-US/vstsarch/thread/07b39757-eac4-49fa-81d5-8d167c9b9d21)关于 Visio 和 VS 2008 的主题，其中还列出了一些替代的 UML 建模工具。

[此](http://davidhayden.com/blog/dave/archive/2006/03/11/2882.aspx)博客条目上还有一个免费的 UML 工具列表，他们列出了以下内容：

*   DotNet2Uml（[来自文章](http://www.agilefactor.com/assemblymetadata2xmi.aspx)）[这个链接](http://sharptoolbox.com/tools/dotnet2uml)可能会更好

> Agilefactor DotNet2UML 实用程序使用 .NET 反射功能读取 .NET 程序集元数据，并为生成的 UML 创建称为 XMI 的 XML 表示。然后可以将该 XMI 导入到大多数 UML 工具中。

*   uml2svg ([链接](http://uml2svg.sourceforge.net/))

> uml2svg 是一个基于 XSLT 的工具，用于将符合 XMI 的 UML 图转换为 SVG。

# http - 低流量站点上的 HTTP 压缩（GZip 或 deflate）真的有用吗？

> ID：784075
> 
> 赞同：1
> 
> 时间：2009-04-24T00:11:52.640
> 
> 标签：http, compression, gzip

我有一个 Web 应用程序，其中客户端将在本地服务器上运行（即 - 请求不会通过网络发出）。该站点的流量将非常低，因此我试图弄清楚在这种类型的系统中实际的解压缩是否昂贵。性能是一个问题，所以我将设置缓存，但我也在考虑压缩。我不会有带宽问题，因为该站点的流量非常低。所以，我只是想弄清楚在这种类型的系统中压缩是否弊大于利。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T00:16:44.280

这是一篇关于这个主题的[好文章](http://henry.precheur.org/2009/4/23/GZIP_encoding_%3D_happier_users%3F.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T00:15:33.270

在几乎任何具有可靠 Web 堆栈的现代系统上，压缩不会很昂贵，但在我看来，无论开销多么小，您都不会从中获得任何积极影响。我不会打扰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T00:16:14.500

当您测量性能时，这些数字是如何比较的？启用压缩后是否更快？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T00:16:17.653

我使用了压缩，但用户在各个远程位置通过无线 3G 网络运行。在这种情况下，压缩对带宽使用产生了重大影响。

对于在本地运行并且带宽不是问题的用户，我认为这不值得。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-01-20T07:37:52.440

对于可缓存的资源（.js、.html、.css）文件，我觉得浏览器缓存这些资源后就没有意义了。

但对于不可缓存的资源（例如 json 响应），我认为这是有道理的。

# sql-server - 报告服务 2005：有没有办法动态更改报告标题？

> ID：784076
> 
> 赞同：0
> 
> 时间：2009-04-24T00:12:43.417
> 
> 标签：sql-server, sql-server-2005, reporting-services, header

我有一份报告需要根据页面内容在页面上使用不同的标题文本。有没有办法根据页面上的一条信息更改标题中的文本？

> 第 1 页标题：行程
> 
> 第 2 页标题：行程
> 
> 第 3 页标题：票价规则
> 
> 第 4 页标题：收据

另一个问题是每个信息部分可能是一页或多页。

目前，我不得不将我的报告设置为分隔页面并在每个部分的开头放置一个虚拟标题。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T00:17:50.037

梅丽莎，

您可以使用标头的表达式部分来动态呈现标头内容。你的逻辑可能是这样的：

如果 ReportItems!Textvalue = "this"，做 "that"

当我指的是表达式部分时，右键单击文本框（假设这是您在标题中使用的）并从那里更改表达式。您可能还想查看 IIF（立即如果）函数。

例如：

Dim i As Integer = 0 IIf(i = 0, "I am zero", "I am not zero")

希望这能让您朝着正确的方向前进，因为我去年在 Reporting Services 中采用了类似的情况。

科森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T00:18:04.823

也许你可以在这里找到一些信息：http: [//www.bigresource.com/MS_SQL-SSRS-Dynamic-Header-Jy99Q93u.html](http://www.bigresource.com/MS_SQL-SSRS-Dynamic-Header-Jy99Q93u.html)（向下滚动查看更多与标题相关的链接）

或者这就是你要找的东西？[http://social.msdn.microsoft.com/forums/en-US/vsreportcontrols/thread/a82d32e1-2314-4c09-a828-6ce2109a0252](http://social.msdn.microsoft.com/forums/en-US/vsreportcontrols/thread/a82d32e1-2314-4c09-a828-6ce2109a0252)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-01T15:22:32.500

您可以做的是在其自己的单独报告中创建每个报告部分，然后创建一个“主”报告，其中包含所有其他报告作为子报告。然后您所要做的就是将标题放在母版页上。

# c# - 输出到控制台时防止换行

> ID：784090
> 
> 赞同：1
> 
> 时间：2009-04-24T00:19:04.697
> 
> 标签：c#, console, newline, buffer

我已将缓冲区大小设置为窗口大小以摆脱滚动条。现在，我试图用一个值填充控制台，但总是在末尾添加一个新的空白行，这会导致第一行从缓冲区中清除。

我知道为什么会这样，但有什么办法可以防止它发生吗？

我试过移动缓冲区，但正如我所说，添加空白行时缓冲区的第一行会被清除，这样只会在顶部创建一个空白行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T00:34:41.383

.NET 控制台只是流入缓冲区，这可能不是您想要的。您需要 P/Invoke 到 Windows API 才能完全控制控制台。

特别是，请查看[WriteConsoleOutput](http://msdn.microsoft.com/en-us/library/ms687404(VS.85).aspx)。它允许您将控制台视为“像素”网格，并写入其中的特定块。

# c# - C# 中的事件调用器

> ID：784094
> 
> 赞同：6
> 
> 时间：2009-04-24T00:20:16.893
> 
> 标签：c#, events

当我在 Visual Studio 中实现一个事件时，Resharper 很乐意为我创建一个事件调用器。我过去通常是手工做的，我的调用者总是这样

```
 private void InvokePropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, e);
        }
    } 
```

但是 Resharper 创建的调用器看起来像这样（手动清理了一下）

```
 private void InvokePropertyChanged(PropertyChangedEventArgs e)
    {
        PropertyChangedEventHandler changed = PropertyChanged;

        if (changed != null)
        {
            changed(this, e);
        }
    } 
```

jetbrains 的人知道一些我不知道的 c# 吗？拥有局部变量是否有一些技术优势，或者它只是他们必须自动生成代码的产物？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-24T00:21:31.663

是的。他们知道事件的订阅者数量可以在“if”和对事件处理程序的调用之间发生变化。他们在本地捕获它，它不再改变。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T00:24:51.593

我认为约翰桑德斯可能有最好的答案。

为了记录，我什至不再写“Invocators”了。我有为我做的扩展方法，我只是打电话`PropertyChanged.Fire(this, "propName");`

有关更多信息，请参阅[本文](http://www.houseofbilz.com/archive/2009/02/15/re-thinking-c-events.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T00:27:48.997

这只是多线程的问题。这可以在多线程环境中保护您。

例如，采取这种情况：

```
if (PropertyChanged != null) // PropertyChanged has one subscriber here
{ 
```

现在，第二个线程在这里取消订阅，修改事件处理程序......

```
 PropertyChanged(this, e); // This is no longer valid!
} 
```

# python - 有没有办法通过 imagename.230x150.jpg 在 Django 中调整图像大小？

> ID：784099
> 
> 赞同：2
> 
> 时间：2009-04-24T00:22:29.773
> 
> 标签：python, django

Frog CMS 有一个不错的插件，您只需输入 yourpicture.120x120.jpg 或其他任何内容，它就会自动使用该尺寸的图像。如果它不存在，它会创建它并将其添加到文件系统中。

[http://www.naehrstoff.ch/code/image-resize-for-frog](http://www.naehrstoff.ch/code/image-resize-for-frog)

我想知道在 Django/Python 中是否有这样的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T03:47:34.070

我认为这个片段接近你所需要的：[动态缩略图生成器](http://www.djangosnippets.org/snippets/619/)

您可能还想研究[sorl-thumbnail](http://code.google.com/p/sorl-thumbnail/)，尽管它在模板中编码缩略图尺寸而不是 URL，但它更灵活/更强大。

# beta - 测试版还是不测试版..这是个问题

> ID：784102
> 
> 赞同：5
> 
> 时间：2009-04-24T00:24:05.357
> 
> 标签：beta

我正在寻找其中一个的共识

*   测试版；向有限的受众发布半功能软件，并让用户指导该过程，直到应用程序完成。

*   没有测试版；根据之前的用户反馈和/或业务逻辑定义所有功能，构建软件，并在您给自己（或给定）的任何时间对其进行测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-24T00:27:24.490

嗯...Beta 适用于**您认为已经完成**的产品...直到您让 Beta 用户使用它并且他们以您没有想到的方式破坏它。
所以，是的，使用 Beta 版，除非您想在许多用户上刻录您的产品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T00:26:16.130

我不同意你的两种情况。

内部QA怎么样？他们也会发现错误，你知道的。仅当您没有已知的严重错误时才向客户发布测试版。

此外，始终进行充分测试。如果时间紧迫，而您还没有完成所有测试，那就太难了。完成测试，不管你有没有时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-29T23:24:03.220

我的回答是，有很多因素会决定哪个更有意义：

1）错误的后果 - 如果错误会导致人们死亡，那么我认为测试版将是一个坏主意。你能想象在核反应堆或导弹系统上运行测试版软件吗？另一方面，如果后果相当轻微，例如某些梦幻体育网站暂时中断，那么在测试版中发布可能还不错。

2）用户的期望。想想应用程序的用户以及他们对使用“测试版”的感觉如何？如果这会让他们害怕实际使用该软件并担心它会定期对他们造成攻击并充满错误，那也可能会起作用。

3) 应用程序的大小。如果你要构建一个非常大的东西，比如一个 ERP 来处理 101 个国家的法律要求并包含数百个附加模块，那么测试版可能比试图完成所有工作却永远无法到达你拥有的地方更合理顾客。

4) 部署。如果您正在设置代码在您自己的机器上运行并且可以轻松升级和修补的东西，那么测试版可能比试图在一开始就完成所有事情要好。

5) 开发方法。如果您采用瀑布方法，那么没有任何 beta 版本可能是更好的选择，而在敏捷场景中，beta 版本更有意义。后者的原因是，在敏捷案例中，随着时间的推移，会有多个版本会改进产品。

我要记住几件事，因为在某些情况下我很容易想象使用测试版，而在其他情况下我会尽可能避免使用测试版。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-04T05:34:45.330

毫无疑问是测试版！

运行测试期的一些好处...

*   提高产品质量、可用性和性能
*   发现错误
*   深入了解客户如何使用您的产品
*   衡量对新功能的响应
*   收集新功能请求
*   估计产品支持要求
*   识别客户
*   赢得客户推荐
*   为最终版本做准备
*   为产品发布产生嗡嗡声

快速启动并经常迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T00:28:28.887

在不知道应用程序是什么以及它的受众将是什么的情况下，我认为这将是一个艰难的选择。但是，如果它是一个开源项目，似乎共识通常是“尽早发布并经常发布”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T00:28:29.510

*真正的*问题是：你知道你的用户究竟是什么吗*？*

如果您回答是，那么设计和构建所有内容并在没有 Beta 的情况下启动它。

如果您回答“否”，那么 Beta 是您的最佳选择——您的用户将帮助定义您的软件，他们将更多地感受到流程的一部分并拥有一定的所有权。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T00:30:08.133

我说贝塔。但我不同意你的前提。你永远不应该发布半成品软件。作为 Beta 版发布的软件至少应该是功能完整的。这样，您的用户就知道他们正在进入什么领域。

至于发现错误。内部测试是最好的。但是，任何发布过软件的人都知道，无论用户做什么，都会找到一种新的有趣的方法来破解它。

所以 Beta 直到你心满意足。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T03:44:44.093

我建议首先对功能不完整的选定组进行 alpha 测试，以便他们可以帮助您找到错误并确定需要哪些功能。

一旦你完成了被认为是完整的功能，然后将它发布给一个更大的小组，主要是为了发现错误，并获得对功能更改的评论，但你可能不会进行功能更改，除非有一些关键的事情。

此时您已准备好发布，您可以返回步骤 (1) 进行下一个发布。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T04:01:22.993

在完成（您认为）您的软件并相信没有严重的错误之后，进行 alpha 测试。使软件在贵公司的测试人员中可用，修复报告的错误。

接下来，将软件发布给客户作为 beta 测试、收集评论、修复错误和改进功能。

只有这样你才能准备好发布。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-24T13:35:54.843

两者都不。

在您认为产品没有错误之前，您不应该发布测试版。届时，测试版用户*会发现*错误。他们会的，相信我。至于让测试版用户“指导设计”，这可能不是一个好主意——你最终会得到看起来像 Homer Simpson 设计的汽车的软件。测试版用户不是软件设计师是有原因的。

至于第二个选项 - 除非您是出色的测试人员，否则您将无法像最终用户一样测试它（他们会对您的软件做最愚蠢的事情）。如果你“用你给自己（或被给定）的任何时间来测试它”，你将没有足够的时间。

# sql - 我可以从 T-SQL 中的现有检查约束中删除“不用于复制”选项吗？

> ID：784109
> 
> 赞同：2
> 
> 时间：2009-04-24T00:28:10.760
> 
> 标签：sql, replication, constraints, alter-table

假设将带有“not for replication”选项的检查约束（涉及多个列）添加到数据库表中（例如，“alter table table_name add constraint constraint_name check not for replication (constraint_expression)”）

我找到了从列中删除“不用于复制”的语法，但不是如上所述的现有检查约束。

除了删除/重新创建检查约束之外，有没有办法从检查约束中删除“不用于复制”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T02:01:21.190

我几乎可以肯定你必须在没有“不用于复制”选项的情况下删除并重新创建它。

您可以更改列，但我认为您不能更改约束。

# javascript - Javascript将数据从子窗口传递到父窗口，IE错误？

> ID：784122
> 
> 赞同：8
> 
> 时间：2009-04-24T00:34:50.307
> 
> 标签：javascript, internet-explorer, garbage-collection, popup

我有一个弹出窗口，可以将数据返回给它的父级。使用`window.opener.document.data = data_from_popup;`

这在 FF 中运行良好，但在 IE (6/7) 中，可以在弹出窗口仍然显示时访问数据。当我关闭弹出窗口时，看起来数据被垃圾收集了。

我尝试对从弹出窗口接收到的数据使用 clone() 函数：

```
window.opener.add_data(data_from_popup); 
```

在父母中：

```
function add_data(data_from_popup) {
 data = clone(data_from_popup); 
} 
```

它有点工作，但在某些情况下，该`clone()`函数似乎无限递归。

你有没有经历过同样的事情，有没有办法在不使用克隆功能的情况下防止这种情况发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T01:33:56.110

不确定您到底遇到了什么，但我已经成功地在开发和生产应用程序中的 IE（6,7 和 8）中定期从子弹出窗口中将数据存储在开启器上。

您有可以提供的 URL 或更多源代码吗？

在相关说明中...您不是在尝试确定开瓶器上对象的类型...从弹出窗口中是吗？- 这方面有一些已知的 IE 错误。

**更新：**

这是一个简单的例子......

```
<!--main window-->
<script>
  function getThing(id){
    url = 'http://mysite.com/...whatever...';
    features = 'locationbar=X,menubar=Y...';
    window['popup4'+id] = open(url, 'someNameWithoutSpaces', features);
  }
  function popupCallback(data){
    alert('I got data back! ' + data);
    document.getElementById('someID').innerHTML = '<b>' + data.label + ' (' + data.id + ')</b>';
    //close the popup (now that we have/are done with the data)
    window['popup4someID'].close();
  }
</script>
<div id="someID">{Nothing Selected Yet}</div>
<input type="button" value="Pick One" onclick="getThing('someID');"/>

<!--popup window-->
<script>
  function saveSelection(){
    //acquire data however you want/need
    var selData = {};
    selData.id = 123456;
    selData.label = 'iPod Touch (Jeff Atwood Edition)';
    //call callback on opener
    window.opener.popupCallback(selData);
  }
</script> 
```

**更新 2**

在测试中，在弹出窗口关闭后似乎在 IE7、IE8（但不是 IE6）***中，任何引用数据都会丢失***（引用不捕获快照）因此如果您在弹出窗口关闭后需要数据，您将需要克隆它。

我想如果数据可以包装在一个数组中，克隆是小菜一碟。只需在其上调用 .slice() 即可复制它，***但是......这也不起作用***！

我想您需要保存所需的值（用于表单元素或 DOM），因为 IE 看​​起来不会让您在弹出窗口关闭后使用它们。:-(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-01T22:13:06.303

我最终做到这一点的方式是通过 json 编码我想在弹出窗口中传递给父级的复杂对象。传回的数据是一个简单的字符串，可以毫无问题地复制。在父端，json 编码的字符串被评估为 Javascript 对象。

# asp.net - WP-o-Matic 是如何工作的以及如何使用 ASP.Net 做同样的事情？.NET 中的 Cron 工作等效项？

> ID：784123
> 
> 赞同：1
> 
> 时间：2009-04-24T00:34:57.327
> 
> 标签：asp.net, wordpress

[WP-o-Matic](http://wordpress.org/extend/plugins/wp-o-matic/)是一个 wordpress 插件，可以根据一些配置的提要自动发布，它会读取我设置的所有时间间隔，它在我的博客上工作，我的博客在共享 Windows 虚拟主机上，

我想知道它是如何自动工作的就像那样，因为我在共享主机上，所以确定我没有在服务器上设置任何 Windows 服务，所以它只是在激活后继续工作，对我来说很奇怪。

![替代文字](https://content.screencast.com/users/amrelgarhy/folders/Jing/media/92cf4caa-da32-4451-b1a0-65538a7b2c72/2009-04-24_0327.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T09:16:21.207

这是一篇关于如何在 ASP.NET 中创建[任务计划程序](http://nayyeri.net/blog/how-to-build-a-task-scheduler-system-for-the-asp-net-ndash-part-1/)（类似于 Cron）的好文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T09:10:27.650

恐怕您必须编写一个 Windows 服务才能在 .Net 环境中运行预定的作业。通常，共享托管公司不提供在服务器上配置 Windows 服务的规定，因此您可能不得不寻找其他托管替代方案。

# python - Python Django 模板：遍历列表

> ID：784124
> 
> 赞同：15
> 
> 时间：2009-04-24T00:35:14.673
> 
> 标签：python, django, django-templates

从技术上讲，它应该从 0 迭代到 rangeLength 输出 c[i][0].from_user 的用户名......但是从在线查看示例来看，他们似乎用点表示法替换了括号。我有以下代码：

```
<div id="right_pod">
{%for i in rangeLength%}
    <div class="user_pod" >
        {{c.i.0.from_user}}
    </div>
{% endfor %} 
```

这目前什么都不输出:(如果我用 0...{{c.0.0.from_user}} 替换“i”...它将输出一些东西..（第一个用户 10 次）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-24T00:51:21.950

你需要`i`成为索引吗？如果没有，请查看以下代码是否符合您的要求：

```
<div id="right_pod">
{% for i in c %}
    <div class="user_pod">
        {{ i.0.from_user }}
    </div>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-25T01:25:13.000

请阅读[模板语言 for loops 的完整文档](http://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)。首先，迭代（就像在 Python 中一样）是针对对象，而不是索引。其次，在任何 for 循环中都有一个 forloop 变量，其中包含您会感兴趣的两个字段：

```
Variable            Description
forloop.counter     The current iteration of the loop (1-indexed)
forloop.counter0    The current iteration of the loop (0-indexed) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-24T17:37:56.337

您应该使用切片模板过滤器来实现您想要的：

像这样遍历对象（在本例中为 c）：

```
{% for c in objects|slice:":30" %} 
```

这将确保您只迭代前 30 个对象。

此外，您可以使用 forloop.counter 对象来跟踪您正在进行的循环迭代。

# sql - 从 Virtual PC 连接到 SQL Server

> ID：784130
> 
> 赞同：3
> 
> 时间：2009-04-24T00:38:13.060
> 
> 标签：sql, sql-server, sql-server-2005, virtual-pc

我的桌面上安装了 VS 2008 和 SQL Server 2005 开发版。我有一个在 Virtual PC 中运行的 XP 实例，并且想要连接到开发实例。我在桌面和 XP 的虚拟实例上都以域用户身份登录。当我尝试连接时，我收到一条消息“服务器不存在或访问被拒绝”。我需要做什么才能连接。我正在使用受信任的连接，并且用户 ID 对数据库具有特权。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T00:41:03.163

确保 VPC 未将 NAT 用于其网络连接。

还要检查您的配置以确保允许远程连接。远程连接默认关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T00:41:44.987

您是否尝试过从虚拟实例 ping 桌面？我遇到了同样的问题，并发现防火墙阻止了两台机器之间的任何类型的通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T03:01:36.257

我发现您必须进入 SQL Server 外围应用配置工具并将“远程连接”设置为“本地和远程连接”。显然默认值是“仅本地连接”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-01T11:54:02.740

我遇到了同样的事情——MS Server 2003 和 SQLServer 2008 Ent 在 VMWare 上运行，并在尝试从主机连接时得到“服务器不存在或访问被拒绝”（在 Vista x64 上）。

那么，您是否认为通过 SQL Server 外围应用配置工具更改为“本地和远程连接”可以解决问题？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-11T14:22:41.520

对我来说，尽管也为远程连接配置了 SQL 服务器，但我无法从 Win XP VM 访问 sql 服务器。

因此，当我从主机禁用 Windows 防火墙时，它工作正常！！

# python - Python 模块/类变量出血

> ID：784149
> 
> 赞同：0
> 
> 时间：2009-04-24T00:57:06.273
> 
> 标签：python, oop, class

好的，我花了一点时间来缩小这个问题的范围，但似乎 python 正在这样做。有人可以解释为什么会发生这种情况以及我能做些什么来解决这个问题吗？

文件：库/testModule.py

```
class testClass:

    myvars = dict()

    def __getattr__(self, k):
        if self.myvars.has_key(k):
            return self.myvars[k]

    def __setattr__(self, k, v):
        self.myvars[k] = v

    def __str__(self):
        l = []
        for k, v in self.myvars.iteritems():
            l.append(str(k) + ":" + str(v))

        return " - ".join(l) 
```

测试.py

```
from library import testModule

#I get the same result if I instantiate both classes one after another
c1 = testClass()
c1.foo = "hello"
c2 = testClass()

print("c1: " + str(c1) + "\n")
print("c2: " + str(c2) + "\n") 
```

输出：

```
c1: foo:hello
c2: foo:hello 
```

我最好的猜测是，因为`library`有一个`"__init__.py"`文件，整个模块就像一个类对象一样被加载，它现在成为一个持久对象的一部分。是这样的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T01:00:30.680

`myvars`是*类*的属性，而不是*实例*。`myvars`这意味着当您从实例中插入一个属性时`c1`，该属性与类相关联`testClass`，而不是具体的实例`c1`。由于`c2`是同一个类的实例，它也具有相同的属性。

您可以通过编写以下代码获得您想要的行为：

```
class testClass:
    def __init__(self):
        self.myvars = dict()

    def __getattr__(self, k):
        if self.myvars.has_key(k):
            return self.myvars[k]

    def __setattr__(self, k, v):
        self.myvars[k] = v

    def __str__(self):
        l = []
        for k, v in self.myvars.iteritems():
            l.append(str(k) + ":" + str(v))
        return " - ".join(l) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T01:26:44.643

其他的答案是正确的，而且中肯。让我谈谈我认为您的误解的一些内容。

> 我最好的猜测是，因为库有一个“ `__init__.py`”文件，整个模块就像一个类对象一样加载，它现在成为一个持久对象的一部分。是这样的吗？

所有包都有一个`__init__.py`文件。有必要制作一个python包。该软件包中可能有也可能没有任何代码。如果确实如此，则保证执行。在一般情况下，这与包中其他模块的执行方式没有任何关系，尽管当然可以在其中放置很多非常酷的技巧来影响它。

至于模块和类是如何工作的，将模块视为一个实例化一次的类对象通常是一个非常好的主意。加载程序执行文件一次，然后可以作为模块的一部分访问文件末尾可用的所有变量、类定义和函数定义。

The same is true of classes, with the main exception that functions declared within classes are transformed into methods (and one special method let's you instantiate the class). So `testModule` has-a `testClass` has-a `myvars`. All three objects are unique: there will not be multiple instances of any of them. And the has-a relathionship is really more-or-less the same whether we say "module has-a class object" or "class object has-a class variable". (The difference being implementation details that you ought not be concerned with.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T01:42:53.090

For a good reference on how to use **getattr** and other methods like it, refer to [How-To Guide for Descriptors](http://users.rcn.com/python/download/Descriptor.htm) and there's nothing like practice!

# c# - UserControl 作为界面，但在设计器中可见

> ID：784155
> 
> 赞同：7
> 
> 时间：2009-04-24T01:00:39.433
> 
> 标签：c#, .net, winforms, user-controls, custom-controls

所以我们有一个 C# WinForms 项目，其中的 Form 包含一个 bazillion `UserControl`s。除了自己的特定成员外，每个都`UserControl`自然地公开所有方法、属性等。`UserControl`

我一直在想降低处理这些`UserControl`s 复杂性的一种方法是通过接口访问它们。因此，与其拖放以将其`UserControl`放在表单上，​​不如在构造函数中使用类似这样的内容：

```
public class MyGiantForm
{
    ICustomerName cName;

    public MyForm()
    {
        InitializeComponent();

        var uc = new SomeCustomerNameUserControl();
        this.Controls.Add(uc);
        cName = uc;
    }
} 
```

`SomeCustomerNameUserControl`实现`ICustomerName`，自然，并`ICustomerName`包含我真正关心的特定属性（比如，`FirstName`和`LastName`）。通过这种方式，我可以`UserControl`通过`cName`成员引用，而不是被所有`UserControl`成员击倒，我只得到`ICustomerName`.

一切都很好，但问题是如果我这样做，我`SomeCustomerNameUserControl`在设计器中看不到。有谁知道我可以做到这一点，但仍然可以`UserControl`在表单的设计表面上看到？

**编辑：**一种不太复杂的方法是将控件放在基本表单上。默认情况下（在 C# 中），控制成员是私有的。然后我为每个通过接口公开它的控件创建一个属性。

但是，即使它更复杂，我也会对其他方式感兴趣。似乎有一些方法可以使用 IDesignerHost，但我找不到任何适用的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-05T04:27:21.263

有一种方法可以实现您想要的——隐藏你不想看到的成员——但让它自动应用，而不需要其他人使用自定义界面进行合作。您可以通过重新引入您不想看到的所有成员并用属性标记它们来做到这一点。

例如，当基类属性对特定后代没有任何意义时，这就是 Windows 窗体所做的。例如，Control 具有 Text 属性，但 Text 属性在 TabControl 上毫无意义。所以 TabControl 覆盖 Text 属性，并为其覆盖添加属性，说“顺便说一下，不要在属性网格或 Intellisense 中显示我的 Text 属性。” 该属性仍然存在，但是由于您从未见过它，因此它不会妨碍您。

如果将**[EditorBrowsable(EditorBrowsableState.Never)]**属性添加到成员（属性或方法），则 Intellisense 将不再在其代码完成列表中显示该成员。如果我正确理解了您的问题，那么这就是您要实现的重要目标：使应用程序代码很难意外使用该成员。

对于属性，您可能还想添加**[Browsable(false)]**以从属性网格中隐藏属性，并添加**[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]**以防止设计器将属性的值写入 .designer.cs 文件。

这些将使意外使用该方法/属性变得非常困难。但是，它们仍然不能保证。如果您确实需要保证，那么也加入一个**[Obsolete]**属性，并使用“将警告视为错误”进行构建——那么您就可以得到照顾了。

如果基本成员是虚拟的，您可能想要覆盖它，并让您的覆盖简单地调用 base. 不要抛出异常，因为被覆盖的成员可能会在正常的事件过程中被基类调用。另一方面，如果 base 成员不是虚拟的，那么您想使用“new”而不是“override”，并且您可以决定您的实现是否应该调用 base，或者只是抛出异常——没有人应该使用无论如何，您重新引入的成员，所以没关系。

```
public class Widget : UserControl
{
    // The Text property is virtual in the base Control class.
    // Override and call base.
    [EditorBrowsable(EditorBrowsableState.Never)]
    [Browsable(false)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    [Obsolete("The Text property does not apply to the Widget class.")]
    public override string Text
    {
        get { return base.Text; }
        set { base.Text = value; }
    }

    // The CanFocus property is non-virtual in the base Control class.
    // Reintroduce with new, and throw if anyone dares to call it.
    [EditorBrowsable(EditorBrowsableState.Never)]
    [Browsable(false)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    [Obsolete("The CanFocus property does not apply to the Widget class.")]
    public new bool CanFocus
    {
        get { throw new NotSupportedException(); }
    }

    // The Hide method is non-virtual in the base Control class.
    // Note that Browsable and DesignerSerializationVisibility are
    // not needed for methods, only properties.
    [EditorBrowsable(EditorBrowsableState.Never)]
    [Obsolete("The Hide method does not apply to the Widget class.")]
    public new void Hide()
    {
        throw new NotSupportedException();
    }
} 
```

是的，这是一项相当多的工作，但你只需要做一次......每个成员，每个班级......嗯，是的。但是如果这些基类成员真的不适用于你的类，并且让他们在那里会引起混乱，那么可能值得努力。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-24T01:36:52.107

如果`SomeCustomerNameUserControl`是这样定义的：

```
class SomeCustomerNameUserControl : UserControl, ICustomerName
{
} 
```

您仍然可以将此控件放在设计器中（创建 someCustomerNameUserControl1），并在需要时执行此操作：

```
ICustomerName cName = someCustomerNameUserControl1; 
```

也许我错过了一些东西，但我认为就这么简单。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-08T20:49:09.777

'我希望 ICustomerName 成为访问 UserControl 变量的*唯一*选项。这个想法是开发人员不必“只记得”来投射它。

您遇到的问题是您的表单及其托管的控件有两种完全不同的用途。Visual Studio 或 winforms 中没有内置的技巧可以巧妙地为您解决这个问题。这可能是可能的，但是有一种更简洁和面向对象的方式来分离与控件交互的两种方法。

如果您想隐藏这些对象从 UserControl 继承的事实，并且只想将它们视为[IDoSomeThingYouShouldDealWith](https://stackoverflow.com/questions/58988/the-interface-segregation-principle)，您需要将处理表示问题的逻辑（设计器 + UI 逻辑）与您的业务逻辑分开。

你的表单类，应该正确地处理用户控件、停靠、锚定等控件，这里没什么特别的。您应该将需要处理 ICustomerName.FirstName = etc 的所有逻辑放入一个完全独立的类中。这个类不关心或不知道字体和布局，它只知道有另一个实例可以显示客户名称；或 DateTime 作为“选择出生日期”的适当控制等。

这是一个非常蹩脚的例子，但我现在必须去。您应该能够[更详细地了解这里的想法](http://codebetter.com/blogs/jeremy.miller/archive/2007/05/23/build-your-own-cab-part-2-the-humble-dialog-box.aspx)：

```
public interface ICustomerName
    {
        void ShowName(string theName);
    }

    public partial class Form1 : Form, ICustomerName
    {
        public Form1()
        {
            InitializeComponent();
        }

        #region ICustomerName Members

        public void ShowName(string theName)
        {
            //Gets all controls that show customer names and sets the Text propert  
            //totheName
        }

        #endregion
    }

    //developers program logic into this class 
    public class Form1Controller
    {
        public Form1Controller(ICustomerName theForm) //only sees ICustomerName methods
        {
            //Look, i can't even see the Form object from here
            theForm.ShowName("Amazing Name");
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-03T19:36:41.610

使用设计器添加 UserControl 后，可以在“属性”窗口中将 GenerateMember 设置为 false 以禁止生成成员。

然后，您可以在构造函数中使用其他一些技术来分配您的 cName 引用，例如：

```
foreach(Control control in this.Controls)
{
    cName = control as ICustomerName;
    if (cName != null) break;
} 
```

然后 cName 将是对 UserControl 的唯一引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-08T19:07:15.543

您可以编写一个扩展方法，允许您返回窗体上实现接口的任何控件。

```
public static class FormExtensions
{
    public static IDictionary<string, T> GetControlsOf<T>(this Form form) 
           where T: class
    {
        var result = new Dictionary<string, T>();
        foreach (var control in form.Controls)
        {
            if ((control as T) != null)
                result.Add((control as T).Tag, control as T);
        }
        return result;
    }
} 
```

然后在您的表单中，您可以通过以下方式调用它：

```
this.GetControlsOf<ICustomerName>()["NameOfControlHere"]; 
```

如果它返回多个用户控件，您需要以某种方式处理它，可能通过将 Tag 属性添加到界面以唯一地跟踪每个用户控件或其他东西，就像这样

```
public partial class UserControl1 : UserControl, ICustomerName
{
     public string Tag { get { return this.Name; } }
} 
```

然后，您可以将用户控件从设计器拖放到您的表单上。Tag 将始终返回您的控件的名称，这将允许您通过 IDictionary 的接口直接访问该控件。作为开发人员，您可以将他们想要的任何唯一标识符放入控件的名称中，并将其传递到界面。

此外，应该注意的是，这种方法还允许您在解决方案中的所有表单上使用它。

您唯一需要做的另一件事是将 GenerateMember 设置为 false。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-08T09:03:13.680

几乎看起来你想要实现一个中介者模式。您不必直接处理每个数不胜数的 UserControl，而是通过中介与它们进行交互。每个中介都会定义您希望从每个控件中看到的苗条界面。这将通过使您的设计更加明确和简洁来降低整体复杂性。例如，您不需要其中一个控件提供 20 个属性和 50 个方法。相反，您将处理该控件的中介，它定义了您真正关心的 2 个属性和 5 个方法。一切仍会显示在设计器中，但应用程序的其他部分不会与这些控件交互——它们会与中介交互。

这种方法的一大优势是它极大地简化了您的维护。如果您决定 MyCrappyUserControl 需要重写，因为实现不好，您只需更新该控件的中介类。与控件交互的所有其他类都是通过中介完成的，并且将保持不变。

最终归结为纪律：您和您的团队需要有足够的纪律来使用调解器/接口/任何东西，而不是直接打击控件。如果您的团队处于学科规模的低端，请由领导程序员进行代码审查。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T06:49:43.667

你也可以像 Bob 说的那样做，但是在构造函数中分配所有的成员变量，然后你把它放在一个地方。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2009-05-10T16:22:23.230

假设 MyUserControl 定义如下：

```
class MyUserControl : UserControl, IMyInterface
{
    // ...
} 
```

然后在你的表格中，你应该有这样的东西：

```
public class MyForm : Form
{
    IMyInterface cName;

    public MyForm()
    {
        InitializeComponent();

        cName = new MyUserControl();
        Controls.Add((UserControl)cName);
    }
} 
```

这样，cName 是访问我们用户控件的这个实例的唯一方法。

# c# - 来自 C# 服务的视觉反馈

> ID：784156
> 
> 赞同：1
> 
> 时间：2009-04-24T01:00:50.993
> 
> 标签：c#, user-interface, service

用 C# 编写的服务是否无法向桌面提供视觉反馈？

我了解服务在用户登录之前启动，此时没有可用的桌面。那么我的问题是，除了在系统事件日志中记录事件（这不是与用户交流的一种非常有效的方式）之外，我还有哪些选择来显示来自服务的消息框？

只有两个选项浮现在脑海中：

1.  MessageBox.Show - 环顾四周，这似乎不是一个选择。
2.  显示自定义表单

我没有给出为什么需要显示这个消息框的原因。请假设它需要显示，因为我不希望对“良好做法”做出回应。至少在这一点上不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T01:04:58.753

Windows 服务不应与用户进行交互。相反，您应该创建一个单独的控制或配置应用程序 - 通常放在系统托盘中 - 与服务通信，可以向用户提供信息或收集输入。

如果您真的想这样做，请参阅此[知识库文章](http://support.microsoft.com/kb/327618/en-us)和此[MSDN 文章。](http://msdn.microsoft.com/en-us/library/ms683502(VS.85).aspx)它们包含一些提示如何实现这一点，您可能需要使用 C# 中的 P/Invoke。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T01:17:44.557

[以下是一些可以制作交互式服务的方法。](http://msdn.microsoft.com/en-us/library/ms683502(VS.85).aspx) 但是，那些已经随着 Vista 消失了。

让用户从服务中获取信息的一种方法是为此目的构建一个单独的 UI。例如，该服务可以有一个 WCF 端点，并将 GUI 将显示的消息推送出去。这样，您只在有用户登录时显示一条消息，并且通过从 LocalSystem 帐户弹出一个窗口不会带来安全风险。您可以轻松地使此 GUI 从托盘和弹出 toast 运行，因此它是非侵入性的，并在用户登录时开始。比尝试直接与桌面交互要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T02:11:14.460

我从未使用过它，并且我包含了所有关于不这样做的免责声明。

但是，您可能需要查看`MessageBoxOptions.ServiceNotification`枚举。

[这是一篇很好的博客文章](http://bartdesmet.net/blogs/bart/archive/2004/12/03/488.aspx)，详细介绍了它的使用。

# c# - ASP.NET 损坏的程序集“无法加载文件或程序集 App_Web_*”

> ID：784157
> 
> 赞同：14
> 
> 时间：2009-04-24T01:02:20.613
> 
> 标签：c#, asp.net, web-deployment-project

我已经阅读了关于同一问题的许多其他问题，但我仍然不明白原因以及如何防止它发生。

就我而言，这发生在生产服务器上。我得到了与其他问题中描述的相同的错误，我通过将程序集重新复制到 bin 目录来解决它。它们甚至不是重新编译的文件，它们与之前存在的文件相同 - 再次复制，然后它开始毫无问题地工作。

奇怪的是，我正在使用 Web 部署项目将所有程序集文件重命名为基于文件夹的 dll。所以 folder.dll 和 folder.subfolder.dll 而不是 App_Web_jt8nxllz.dll。然而，错误仍然命名原始 App_Web_jt8nxllz.dll 文件。

**删除`C:\WINDOWS\Microsoft.NET\Framework[64]\v...\Temporary ASP.NET Files`文件夹**的内容可以正常工作，但有谁知道如何防止此错误发生？此外，当它发生在生产服务器上时，关闭 IIS 或重新启动它确实不太可行。也许会自动清除调度程序上的 Temp 文件夹？

这里真正的问题是什么？有什么特别的原因导致这种情况发生吗？该站点将毫无问题地嗡嗡作响，然后突然之间，整个文件夹停止工作并产生此错误。

```
Could not load file or assembly 'App_Web_jt8nxllz, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.
Exception type 'System.IO.FileNotFoundException' was caught.
Source: App_Web_whv5zsvd
Target Site: Void __BuildControlTree(ASP.artists_controls_artistheader_ascx)
Stack Trace:
   at ASP.artists_controls_artistheader_ascx.__BuildControlTree(artists_controls_artistheader_ascx __ctrl)
   at ASP.artists_controls_artistheader_ascx.FrameworkInitialize()
   at System.Web.UI.UserControl.InitializeAsUserControlInternal()
   at System.Web.UI.UserControl.InitializeAsUserControl(Page page)
   at ASP._artists_artist_master.__BuildControlctlArtistHeader()
   at ASP._artists_artist_master.__BuildControlctlContent(Control __ctrl)
   at System.Web.UI.CompiledTemplateBuilder.InstantiateIn(Control container)
   at ASP.master_mysite_master.__BuildControlMainContent()
   at ASP.master_mysite_master.__BuildControlform1()
   at ASP.master_mysite_master.__BuildControlBody()
   at ASP.master_mysite_master.__BuildControlTree(master_mysite_master __ctrl)
   at ASP.master_mysite_master.FrameworkInitialize()
   at System.Web.UI.UserControl.InitializeAsUserControlInternal()
   at System.Web.UI.MasterPage.CreateMaster(TemplateControl owner, HttpContext context, VirtualPath masterPageFile, IDictionary contentTemplateCollection)
   at System.Web.UI.MasterPage.get_Master()
   at System.Web.UI.MasterPage.ApplyMasterRecursive(MasterPage master, IList appliedMasterFilePaths)
   at System.Web.UI.Page.ApplyMasterPage()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-08-09T06:19:19.217

Not to just link up my site but i have run into this issue and i wrote [a blog post on the topic](http://web.archive.org/web/20101023213019/http://www.yetanotherdeveloper.com/post/2008/08/10/Could-not-load-file-or-assembly-App_Web.aspx). Check it out, it has links to more info on this topic. But to sum it up here are the details:

**Problem:**

The website is throwing an error trying to load a custom web control. You see in the last release, we added a new custom control to another custom web control that is displayed as needed. Because the outer most/parent control and the new child control are separate controls in source, when the .Net Framework goes to compile one of these two controls and does not recompile the other one at the same time you will have a an out of date file trying to reference the old version of the assembly. The fact that the .Net framework appends a random string to the name of the assembly at compile time the name of the newly compiled file and the previous version of the file cause a file name mismatch and therefore the outer/parent control is looking for a file that no longer exists.

**Possible Work Around(s) or Temporary Fixes:**

1) By setting the batch property of the compilation tag to false in the web.config file

```
<compilation debug="false" batch="false" /> 
```

2) You can also decrease how often it happens by setting by the `numRecompileBeforeAppRestart` property:

```
<compilation debug="false" numRecompilesBeforeAppRestart="50" /> 
```

See the [KB Article 934839](http://support.microsoft.com/kb/934839) for more details

**Fixes for the Issue after it has already taken place:**

1) Delete temp ASP.Net files (this takes down the site)

2) Force the parent/outter control to recompile, edit and save the code file. This is a better option for a fix than #1 because this does not bring down the website.

**My Suggestion:**

1) First I think that we should put in place the temporary fix #1 from above, this might prevent all issues in the future and could be the only answer we need.

2) Second I would download and install the 934839 hotfix from Microsoft in the QA environment to verify that it does not cause any problems. After some time of testing the hotfix in QA I would install the hotfix to have a permanent fix for this issue. At this time we could remove the temporary work around #1.

**Note:** After putting Temp fix #1 I have not had the problem again. I have had this fix in place for over 12 months and all is good!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T04:35:46.407

我遇到了这个问题，有一个修复程序。

[http://weblogs.asp.net/scottgu/archive/2007/04/11/public-hotfix-patch-available-for-asp-net-compilation-issues.aspx](http://weblogs.asp.net/scottgu/archive/2007/04/11/public-hotfix-patch-available-for-asp-net-compilation-issues.aspx)

尽管它不再发生在较新的机器/设置上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T13:26:08.817

清除临时文件或更改 web.config 对我不起作用。对我来说，修复它的是重新启动我的计算机。

# wpf - WPF ObjectDataProvider 与鼠标的静态方法 GetPosition

> ID：784158
> 
> 赞同：1
> 
> 时间：2009-04-24T01:02:22.317
> 
> 标签：wpf, data-binding, mouse, objectdataprovider

我正在尝试使用 ObjectDataProvider 调用 Mouse 的 GetPositition 方法，但出现此错误：

System.Windows.Data 错误：34：ObjectDataProvider：尝试调用类型方法失败；方法='获取位置'; 类型='鼠标'; 错误='未找到具有匹配参数签名的方法。' MissingMethodException：'System.MissingMethodException：找不到方法'System.Windows.Input.Mouse.GetPosition'。

这是我目前的代码：

```
<ObjectDataProvider MethodName="GetPosition" ObjectType="{x:Type sys:Mouse}"  x:Key="odp">
        <ObjectDataProvider.MethodParameters>
            <x:Type TypeName="local:TestType"/>
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider> 
```

使用简单的绑定：

{绑定源={StaticResource odp}}

为什么无论我做什么都报告找不到方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T12:16:18.483

我猜它没有找到该方法，因为您提供了错误类型的方法参数。如果您查看 Mouse.GetPosition 的[文档](http://msdn.microsoft.com/en-us/library/system.windows.input.mouse.getposition.aspx)，您会发现它需要一个[IInputElement](http://msdn.microsoft.com/en-us/library/system.windows.iinputelement.aspx)类型的参数；您正在提供[Type 类型](http://msdn.microsoft.com/en-us/library/system.type.aspx)的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T20:11:47.740

虽然 Sam 是正确的，但关键是该过程是否可以使用任何其他类型或值来完成。

根据 MSDN，没有办法将它与绑定一起使用，但我相信您可以参考某种复杂性高度掩盖结果。

真正的答案是不应该这样做。

# html - IE 7 将我的水平导航栏变成双线

> ID：784160
> 
> 赞同：0
> 
> 时间：2009-04-24T01:03:21.750
> 
> 标签：html, css, internet-explorer-7

我正在使用 Firefox 3.0.9 开发我的网站（并且使用 CSS 非常环保），到目前为止它看起来很公平。但是，我在顶部有一个浮动的水平导航栏，看起来正在下台。这是我到目前为止所尝试的：

1）我调整了边距，将填充归零并更改了背景图像的宽度 - 全部无效。

2) 我尝试创建一个 IE7 文件夹并用不同的样式表指向浏览器 - 没有效果。

3）我尝试使用 IE7.js 来解决这个问题 - 没有效果。

IE 快把我逼疯了！有什么想法吗？这是我的 CSS 和 HTML（不笑 ;-)）

谢谢！

/ *---我的 CSS ---* /

```
#body       {
        margin: 0px 0px 20px 0px;
        text-align: center; 
        background: #450000 url(images/greenstrip.jpg) repeat-x right top;
        }

#maincontainer  {
        width: 720px;
        border-width: 8px;
        border-color: #fff;
        border-style: solid;
        position: absolute;
        margin-left: 50%;
        left: -360px;
        margin-right: auto;
        }

#box p      {
        position: absolute;
        color: #fffceb;
        width: 450px;
        margin-top: 275px;
        margin-left: 16px;
        background: #373635;
        font-size: medium;
        font-family: "arial rounded mt bold", "times roman";
        text-align: left;
        line-height: 1.5em;
        padding-left:7px;
        padding-right:7px;
        padding-bottom:7px;
        border-style:solid;
        border-color:#bec783;
        border-width: 3px;
        }

#lowerbox p {
        position: absolute;
        color: #fffceb;
        width: 450px;
        background: #373635;
        font-size: medium;
        font-family: "arial rounded mt bold", "times roman";
        text-align: center;
        line-height: 1.5em;
        padding-left:7px;
        padding-right:7px;
        padding-bottom:7px;
        border-style:solid;
        border-color:#bec783;
        border-width: 3px;
        width: 450px;
        margin-top: 433px;
        margin-left: 16px;
        }

#featured p {
        position: absolute;
        color: #000;
        width: 270px;
        margin-top: 825px;
        margin-left: 128px;
        background: none;
        font-size: small;
        font-family: "arial rounded mt bold", "times roman";
        text-align: center;
        line-height: 1.5em;
        }

#customize p    {
        position: absolute;
        color: #000;
        width: 270px;
        margin-top: 825px;
        margin-left: 420px;
        background: none;
        font-size: small;
        font-family: "arial rounded mt bold", "times roman";
        text-align: center;
        line-height: 1.5em;
        }

.name       {
        font-weight: bold;
        font-style: italic;
        color: #bec783;
        }

ul      {
        margin: 0px;
        width: 680px;
        line-height: 0em;
        list-style: none;
        font-size: medium;
        font-family: "arial rounded mt bold", "times roman";
        float: left;
        background: url(images/button.gif);
        }

ul a        {
        display: block;
        padding: 0 1.2em;
        line-height: 2.2em;
        text-decoration: none;
        color: #fff;
        float: left;
        margin-left: 6px;
        margin-right: 0;
        }

ul li       {
        float: left;
        width: auto;
        }

ul a:hover  {
        color:#f26214;
        }

ul a:visited    {
        text-decoration: none;
        }

#textpad ul     {
        position:absolute;
        width:100px;
        margin-top: 335px;
        margin-left: 481px;
        background: none;
        text-decoration: none;
        }

.promise a  {
        display: block;
        color:#000;
        line-height: 1em;
        font-size: 30px;
        font-family: "freestyle script";
        width:150px;
        }

.promise a:visited  {
            text-decoration: none;
            }

#fet a:link, #fet a:visited {
                text-decoration:none;
                color: #000;
                }

#fet a:hover    {
        color:#f26214;
        }

<!---HTML--->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Core 4 Innovative: Website Solutions For Your Small Business</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="keywords" content=" core 4,web,webpage developer,design,web designer, freelance,low cost" />
<meta name="robots" content="index,follow" />

<!--[if lt IE 7]>
<script src="http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js" type="text/javascript"></script>
<![endif]-->

<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

<body id="body">
<div id="maincontainer">
<table id="Table_01" width="720" height="961" border="0" cellpadding="0" cellspacing="0">

<ul id="nav">
<li><a href="http://www.core4innovative.com/home.html">Home</a></li>
<li><a href="http://www.core4innovative.com/about/about.html">About Us</a></li>
<li><a href="http://www.core4innovative.com/process/our_process.html">Our Process</a></li>
<li><a href="http://www.core4innovative.com/services/services.html">Our Services</a></li>
<li><a href="http://www.core4innovative.com/contact/contactus.aspx">Contact Us</a></li>
</ul>

<div id="textpad">
<ul>
<li class="promise"><a href="#">Affordable Web Hosting Starting at $9.99 per month!<a></li>
</ul>

<div id="box">
<p><span class="name">Core 4 Innovative</span> puts your online success within reach. Using our affordable 
website solutions, unique development process and standardized
methods for design you can be sure to recieve a customized product that adds value to your business!</p>
</div>

<div id="lowerbox">
<p><span class="name">We Serve Every Major Industry:</span></br> 
Restuarants • Real Estate • Insurance • Entertainment • Apparel • Automotive • Energy • Professional Services</p>
</div>

<div id="featured">
<p><span id="fet"><a href="http://www.core4innovative.com/portfolio/portfolio.html" alt="our featured client">Our Featured Client</a></span></p>
</div>

<div id="customize">
<p>Customize Your website</p>
</div>

<tr>
<td colspan="3">
<img src="images/top.jpg" width="720" height="12" alt=""></td>
</tr>

<tr>
<td>

<img src="images/logo.jpg" width="258" height="137" alt=""></td>

<td colspan="2">
<img src="images/apple_graphic.jpg" width="462" height="137" alt=""></td>
</tr>

<tr>
<td colspan="3">
<img src="images/topdivider.jpg" width="720" height="48" alt=""></td>
</tr>

<tr>
<td colspan="2">
<img src="images/topdivider-06.jpg" width="502" height="3" alt=""></td>

<td rowspan="2">
<img src="images/notepad.jpg" width="218" height="305" alt=""></td>
</tr>

<tr>
<td colspan="2">
<img src="images/getaquotebox.jpg" width="502" height="302" alt=""></td>
</tr>

<tr>
<td colspan="3">
<img src="images/roundboxes.jpg" width="720" height="370" alt=""></td>
</tr>

<tr>
<td colspan="3">
<img src="images/footer.jpg" width="720" height="88" alt=""></td>
</tr>

<tr>
<td>
<img src="images/spacer.gif" width="258" height="1" alt=""></td>
<td>
<img src="images/spacer.gif" width="244" height="1" alt=""></td>
<td>
<img src="images/spacer.gif" width="218" height="1" alt=""></td>
</tr>
</table>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T05:32:52.447

您忘记将导航放入 a`<td>`和 a`<tr>`中。一旦开始 a `<table>`，该标签之后的所有内容都不是“表格标签”（例如`<th>`需要在 a`<tr>`和 a`<td>`中。有关此内容的更多信息，请参阅：[http ://www.w3schools.com/html/html_tables .asp](http://www.w3schools.com/html/html_tables.asp)

要解决此问题，只需将您的 ul 放入 a`<tr>`和`<td>`

```
<tr><td>
<ul id="nav">
<li><a href="http://www.core4innovative.com/home.html">Home</a></li>
<li><a href="http://www.core4innovative.com/about/about.html">About Us</a></li>
<li><a href="http://www.core4innovative.com/process/our_process.html">Our Process</a></li>
<li><a href="http://www.core4innovative.com/services/services.html">Our Services</a></li>
<li><a href="http://www.core4innovative.com/contact/contactus.aspx">Contact Us</a></li>
</ul>
</td>
</tr> 
```

此外，页面上的任何其他 html 元素都需要位于 a `<tr>`or `<caption>`) 和`<td>`标签中（例如您的 div 的“box”和“lowerbox”；在开始另一个 div 之前需要关闭 div `td`）。

如果我是你，我会一起去掉所有的表格元素。如果您真的想使用表格来布局内容，请仅在内容区域中使用它。在进入内容区域之前，您无需使用所有图像开始您的表格。

此外，为避免将来出现 css 问题，请始终以 css [reset](http://meyerweb.com/eric/tools/css/reset/)开头您的 css 文件。这将在你的路上帮助你！

您用来设置导航样式的 CSS 很好。对于 IE 得到的所有坏名声（完全应得的），错误有时是由于编码人员的疏忽（即您忘记关闭标签）。大多数浏览器都很好，会忽略你的疏忽，但 IE 通常不会清理你丢失的标签混乱。

我提供了一个简单的页面结构来放置您的代码。

```
<html>
<head>
<title></title>
</head>
<body>
    <div id="header">
        <!-- your <ul> nav -->
    </div>
    <div id="content">
        <!-- your table with images (if you really want to use a table! -->
    </div>
    <div id="footer">
        <!-- your footer info -->
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T02:22:30.127

好吧，去掉 ul 中的 width: 680px 修复它......不确定是什么特定的 IE 错误导致它，但该宽度似乎被应用于列表中的最后一项而不是列表作为所有的。通过在 ul li (border: solid 1px #f00;) 样式中添加边框来使用穷人的萤火虫来查看它。

也许其他人可以提供更详细的信息来解释为什么......

# .net - 哪些语言编译为 CIL / MSIL

> ID：784164
> 
> 赞同：3
> 
> 时间：2009-04-24T01:04:53.637
> 
> 标签：.net, compiler-construction, cil, managed-code

我见过的大多数列表包括：

*   C＃
*   VB.Net
*   其他 .NET 语言

哪些语言属于“其他”类别？

我遇到过：

*   德尔福
*   C++
*   Cobol.Net
*   铬合金

我确定肯定还有其他人？

# c# - 离开accept_button事件之前的C#验证

> ID：784167
> 
> 赞同：6
> 
> 时间：2009-04-24T01:07:11.727
> 
> 标签：c#, .net, acceptbutton

对不起，如果这是一个愚蠢的问题，但我是这里的初学者。

我有一个带有两个按钮的简单自定义对话框：接受和取消。接受按钮是表单的接受按钮。

我想对 Accept_Click 事件进行一些验证并决定是否可以关闭对话框，但每次离开此方法时，对话框都会自动关闭并返回 Ok。

我该怎么做才能阻止对话框自行关闭？还是我必须以其他方式做事？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-24T01:29:35.247

我将有一个表单级变量（称为 _ `vetoClosing`）在接受按钮的 Click 事件中，我将运行验证并基于此设置变量：

```
 private void acceptButton_Click(object sender, EventArgs e)
    {
        // Am I valid
        _vetoClosing = !isValid();
    } 
```

然后在 FormClosing 事件中，如果 _vetoClosing 为真，我将取消关闭

```
 private void Form_FormClosing(object sender, FormClosingEventArgs e)
    {
        // Am I allowed to close
        if (_vetoClosing)
        {
            _vetoClosing = false;
            e.Cancel = true;
        }
    } 
```

关闭接受按钮不是最佳选择，因为您失去了 Enter to Press 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T01:16:38.520

我会在控件更改时进行验证，并且仅在整个表单有效时才启用“接受”按钮。

这将允许您将按钮保留为默认按钮 (AcceptButton)，但可以防止这种情况发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T19:27:22.847

更简洁的解决方案是将 DialogResult 设置为 None：

```
private void acceptButton_Click(object sender, EventArgs e)
{
    if (!isValid()) {
        this.DialogResult = System.Windows.Forms.DialogResult.None;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T01:15:32.097

表单上的 AcceptButton 或 CancelButton 是否设置为该按钮？如果是这样，请尝试取消设置它并在您想要关闭对话框时在处理程序中手动设置 DialogResult。

# sql - 获取不与任何外键关联的主键记录

> ID：784170
> 
> 赞同：1
> 
> 时间：2009-04-24T01:08:54.623
> 
> 标签：sql

我有以下两张表，附属公司和推荐人。

附属公司表

```
id    loginid    
3     CR0007
2     CR5604
4     VRTC0008 
```

推荐人表

```
id    affiliates_id    loginid    
3     2                MLT29710
4     3                MX0001 
```

如果我想知道，附属公司与推荐人相关联，我可以简单地使用以下查询：

```
SELECT affiliates.loginid affiliates_loginid, referrers.loginid referrers_loginid FROM affiliates, referrers WHERE affiliates.id = referrers.affiliates_id 
```

结果表

```
affiliates_loginid    referrers_loginid    
CR5604                MLT29710
CR0007                MX0001 
```

如果我想知道**哪个附属公司与任何推荐人无关怎么办。**我可以使用的单个 SQL 语句是什么？将 where 子句更改为 *affiliates.id != referrers.affiliates_id*当然是行不通的。

我的预期结果是 VRTC0008，因为该会员与任何推荐人都没有关联。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T01:36:51.610

由于您的推荐人表是一对多的，因此随着表的增长，执行子选择会降低性能。

我不是 SQL 忍者，但我会这样做：

```
SELECT affiliates.loginid affiliates_loginid, referrers.loginid referrers_loginid 
FROM affiliates 
LEFT OUTER JOIN referrers ON(referrers.affiliates_id = affiliates.id)
WHERE referrers.affiliates_id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T01:15:49.023

```
SELECT affiliates.loginid affiliates_loginid, referrers.loginid referrers_loginid 
 FROM affiliates 
 WHERE affiliates.id NOT IN (Select Distinct referrers.affiliates_id From affiliates) 
```

# database - 具有非常大的数据库文件的 sqlite 的性能特点是什么？

> ID：784173
> 
> 赞同：348
> 
> 时间：2009-04-24T01:09:33.047
> 
> 标签：database, performance, sqlite

**2020 年更新**，问题发布大约 11 年后，后来关闭，阻止了更新的答案。

**这里写的几乎所有内容都已过时。曾几何时，sqlite 仅限于内存容量或 2 GB 存储空间（32 位）或其他流行数字……嗯，那是很久以前的事了。**

**[此处列出了官方限制](https://www.sqlite.org/limits.html)。实际上，只要有可用的存储空间，sqlite 就可以工作**。它适用于大于内存的数据集，它最初是在内存薄的时候创建的，从一开始就很重要。

存储 100 GB 数据绝对没有问题。它可能可以很好地存储一个 TB，但最终你需要质疑 SQLite 是否是这项工作的最佳工具，并且你可能想要来自完整数据库的功能（远程客户端、并发写入、只读副本、分片， ETC...）。

* * *

原来的：

我知道即使支持非常大的数据库文件，sqlite 也不能很好地执行（sqlite 网站上曾经有一条评论指出，如果您需要 1GB 以上的文件大小，您可能需要考虑使用企业 rdbms。可以'找不到了，可能与旧版本的sqlite有关）。

但是，出于我的目的，在考虑其他解决方案之前，我想先了解一下它到底有多糟糕。

我说的是数 GB 范围内的 sqlite 数据文件，从 2GB 开始。有人对此有经验吗？任何提示/想法？

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2009-05-01T15:25:32.120

所以我用 sqlite 对非常大的文件做了一些测试，并得出了一些结论（至少对于我的特定应用程序）。

测试涉及带有单个表或多个表的单个 sqlite 文件。每个表大约有 8 列，几乎都是整数和 4 个索引。

这个想法是插入足够的数据，直到 sqlite 文件大约为 50GB。

**单表**

我试图将多行插入到只有一个表的 sqlite 文件中。当文件大约 7GB 时（对不起，我不能具体说明行数）插入花费的时间太长了。我估计插入所有数据的测试需要 24 小时左右，但即使在 48 小时后也没有完成。

这使我得出结论，一个非常大的 sqlite 表将存在插入问题，并且可能还有其他操作。

我想这并不奇怪，随着表变大，插入和更新所有索引需要更长的时间。

**多个表**

然后我尝试将数据按时间拆分到几张表上，每天一张表。原始 1 个表的数据被拆分为约 700 个表。

此设置在插入时没有问题，随着时间的推移它不会花费更长的时间，因为每天都会创建一个新表。

**真空问题**

正如 i_like_caffeine 所指出的， VACUUM 命令是一个问题，sqlite 文件越大。随着插入/删除的次数越来越多，磁盘上文件的碎片会越来越严重，所以目标是周期性的 VACUUM 来优化文件和恢复文件空间。

[但是，正如文档](http://www.sqlite.org/lang_vacuum.html)所指出的那样，数据库的完整副本是用来做真空的，需要很长时间才能完成。因此，数据库越小，此操作完成的速度就越快。

**结论**

对于我的特定应用程序，我可能会将数据拆分到多个 db 文件中，每天一个，以获得最佳的真空性能和插入/删除速度。

这使查询复杂化，但对我来说，能够索引这么多数据是一个值得权衡的选择。另一个优点是我可以删除整个数据库文件以删除一天的数据（我的应用程序的常见操作）。

我可能还必须监视每个文件的表大小，以查看速度何时会成为问题。

[太糟糕了，除了自动真空](http://www.sqlite.org/pragma.html#pragma_auto_vacuum)之外似乎没有增量真空方法。我不能使用它，因为我的清理目标是对文件进行碎片整理（文件空间不是什么大问题），而自动清理不这样做。事实上，文档指出它可能会使碎片变得更糟，所以我不得不定期对文件进行完全真空处理。

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2011-06-30T11:21:47.773

我们在我们的平台上使用 50 GB 以上的 DBS。没有抱怨效果很好。确保你做的一切都是正确的！您是否使用预定义的语句？*SQLITE 3.7.3

1.  交易
2.  预先作出的声明
3.  应用这些设置（在创建数据库后立即）

    ```
    PRAGMA main.page_size = 4096;
    PRAGMA main.cache_size=10000;
    PRAGMA main.locking_mode=EXCLUSIVE;
    PRAGMA main.synchronous=NORMAL;
    PRAGMA main.journal_mode=WAL;
    PRAGMA main.cache_size=5000; 
    ```

希望这对其他人有帮助，在这里效果很好

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2009-04-24T14:46:10.230

我创建了最大 3.5GB 的 SQLite 数据库，没有明显的性能问题。如果我没记错的话，我认为 SQLite2 可能有一些较低的限制，但我认为 SQLite3 没有任何此类问题。

根据[SQLite 限制](http://sqlite.org/limits.html)页面，每个数据库页面的最大大小为 32K。数据库中的最大页数为 1024^3。因此，根据我的数学计算，最大大小为 32 TB。我认为你会在达到 SQLite 之前达到文件系统的限制！

* * *

## 回答 #4

> 赞同：61
> 
> 时间：2010-05-28T14:22:47.517

插入需要超过 48 小时的大部分原因是因为您的索引。它的速度非常快：

1 - 删除所有索引 2 - 执行所有插入 3 - 再次创建索引

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2012-01-17T00:53:36.320

除了通常的建议：

1.  删除批量插入的索引。
2.  在大型事务中批量插入/更新。
3.  调整缓冲区缓存/禁用日志 /w PRAGMAs。
4.  使用 64 位机器（能够使用大量缓存™）。
5.  [2014 年 7 月添加] 使用[公用表表达式 (CTE)](http://sqlite.org/lang_with.html)而不是运行多个 SQL 查询！需要 SQLite 版本 3.8.3。

我从使用 SQLite3 的经验中学到了以下内容：

1.  为了获得最大的插入速度，不要使用带有任何列约束的模式。(~~稍后根据需要更改表~~您不能使用 ALTER TABLE 添加约束）。
2.  优化您的架构以存储您需要的内容。有时这意味着在插入数据库之前分解表和/或什至压缩/转换数据。一个很好的例子是将 IP 地址存储为（长）整数。
3.  每个 db 文件一个表 - 以尽量减少锁争用。（如果您想要一个连接对象，请使用*ATTACH DATABASE 。*
4.  SQLite 可以在同一列中存储不同类型的数据（动态类型），使用它对您有利。

欢迎提问/评论。;-)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2011-07-15T08:29:22.520

我有一个 7GB 的 SQLite 数据库。使用内部连接执行特定查询需要 2.6 秒为了加快速度，我尝试添加索引。根据我添加的索引，有时查询会下降到 0.1 秒，有时会上升到 7 秒。我认为我的问题是，如果一列高度重复，那么添加索引会降低性能:(

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2009-04-24T01:29:36.133

我认为关于 sqlite 缩放的主要抱怨是：

1.  单进程写入。
2.  没有镜像。
3.  没有复制。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2009-05-16T19:00:43.790

SQLite 文档中曾经有一个声明，数据库文件的实际大小限制是几十 GB:s。这主要是因为当你开始一个事务时，SQLite 需要“分配一个脏页的位图”。因此，数据库中的每 MB 需要 256 字节的 RAM。插入 50 GB 的 DB 文件需要大量 (2^8)*(2^10)=2^18=256 MB 的 RAM。

但从 SQLite 的最新版本开始，不再需要这样做。[在这里](http://sqlite.1065341.n5.nabble.com/How-to-minimize-or-remove-need-for-dirty-bitmap-memory-size-td47186.html)阅读更多。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2009-04-30T20:12:13.607

使用 vacuum 命令时，我遇到了大型 sqlite 文件的问题。

我还没有尝试过 auto_vacuum 功能。如果您希望经常更新和删除数据，那么这值得一看。

# regex - Vim 中的多行正则表达式支持

> ID：784176
> 
> 赞同：125
> 
> 时间：2009-04-24T01:13:20.137
> 
> 标签：regex, vim

我注意到用于跨多行匹配的标准正则表达式语法是使用 /s，如下所示：

```
This is\nsome text
/This.*text/s 
```

例如，这在 Perl 中有效，但在 Vim 中似乎不受支持。相反，我必须更具体：

```
/This[^\r\n]*[\r\n]*text/ 
```

我找不到任何原因，所以我想我可能只是错过了 vim 帮助中的相关位。

任何人都可以以一种或另一种方式确认这种行为吗？

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2009-04-24T01:28:03.673

是的，Perl 的`//s`修饰符在 Vim 正则表达式上不可用。有关`:h perl-patterns`详细信息以及 Vim 和 Perl 正则表达式之间的其他差异列表，请参阅。

相反，您可以使用`\_.`，这意味着“匹配任何单个字符，包括换行符”。它比你所拥有的要短一些。见`:h /\_.`。

```
/This\_.*text/ 
```

# asp.net - ASP.NET 持续学习

> ID：784182
> 
> 赞同：4
> 
> 时间：2009-04-24T01:16:16.837
> 
> 标签：asp.net

我已经在 ASP.NET 中工作了好几年了（从 1.0 天开始！），但我从来没有被正式指导过。我完全有能力做任何我想做的事情，并且我已经建立了几个生产级、数据驱动的网站，包括一个年销售额超过一百万的网站（根据所有者的说法）。但我开始感觉到我知识上的漏洞正在拖累我的工作效率。我读了很多书，并尝试尽可能地学习以跟上所有新技术，但有时我就是不明白，我认为这是因为我缺乏正规培训。

有没有人对填补这些空白的最佳方法有任何想法，而无需重新调整基本面？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T02:02:41.827

1）阅读流行的开源项目的代码。有一些有一些非常好的做法。

我建议查看[BlogEngine.NET](http://www.dotnetblogengine.net/)。此外，如果您更有野心，我建议您查看[ASP.NET MVC 1.0](http://aspnet.codeplex.com/Wiki/View.aspx?title=MVC)的代码。

2) 当你从更早的版本开始使用特定框架时，​​有时你需要“回归基础”。在这种情况下，拿起一本涵盖一些新功能的书会非常有用。

这是一本很好的书，展示了 C# 3.0 中的一些新特性：

[C# 3.0 设计模式](https://rads.stackoverflow.com/amzn/click/com/059652773X)

3）这可能看起来很奇怪，但是阅读其他语言/平台（例如 Ruby on Rails）将帮助您通过了解不同平台的优缺点并将它们组合起来来设计类和代码。

4) 阅读一些关于一般最佳实践和开发方法的书籍。

我推荐的其中一些书是：

[务实的程序员：从熟手到大师](https://rads.stackoverflow.com/amzn/click/com/020161622X)

[敏捷开发人员的实践：在现实世界中工作](https://rads.stackoverflow.com/amzn/click/com/097451408X)

[Code Complete：软件构建实用手册](https://rads.stackoverflow.com/amzn/click/com/0735619670)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T01:28:09.303

我在同一条船上；从事 .Net 开发人员 6 年。虽然我有 CS 学位，但我没有接受过任何 ASP.Net 的正式培训；随着项目的出现，我在工作中学习它。

我发现弄清楚要学习什么的最佳方法是密切关注 .Net 开发人员博客。我关注的一些：

David Hayden [http://www.davidhayden.com/blog.aspx](http://www.davidhayden.com/blog.aspx) CodingHorror.com（你可能对它很熟悉 ;-) Scott Hanselman [http://www.hanselman.com/blog/](http://www.hanselman.com/blog/)

通常通过阅读他们的博客，我会了解最新的 .Net 解决方案，并指出我应该进一步研究的新技术方向。

总的来说，我只能给你我给公司初级开发人员的建议；意识到不可能期望你什么都知道，但总是渴望学习。祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T02:35:56.287

我绝对可以识别。自 1997 年以来我一直在编程，实际上没有任何正式培训可言。关于 ASP.NET，我学到的一切都是通过开放代码（Community Server、BlogEngine.NET、其他 ASP.NET Starter Kits）、书籍、LearnVisualStudio.net 以及不断被扔进火里的。

我有一个巨大的自卑情结，因为我总是想知道“我这样做是聪明的方式还是没有经验的方式”。我所知道的是，我的客户很高兴，发生的错误很少并且很快得到修复，而且我继续工作。

幸运的是，我对自己的工作充满热情，这也是我不断进步的动力（尽管可能很慢）。

如果您是“人”，那么我认为用户组会议是一个很好的资源。我有点内向，除非有聪明人伸出手和我握手，否则我非常依赖演讲者的演讲来教我一些新东西。可能不是最好的方式，也可能是为什么我不去那么多。

但同样，我会强调开放项目，尤其是社区服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T01:26:07.033

寻找比你更好的人并向他们学习。

参加一些课程或加入用户组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T02:30:39.497

如果您正在查看会议，请考虑寻找当地的[Code Camp](http://www.google.com/search?q=code+camp)。这些会议通常非常低调，但信息内容非常丰富。它们涉及当地的演示者和与会者，因此您可以建立您的联系人和一组人，您可以在需要帮助时处理过去的事情。此外，您可能希望找到（或开始）一个可以一起学习的本地 .NET 小组。这些可能很难起步，但如果做得好，可以成为社区学习的绝佳来源。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T02:49:00.437

寻找有趣的方法来打破你既定的模式——即使是在生产力损失的情况下。

否则，听起来你已经处于一个很好的位置。您可以满足当前的要求，并且听起来就像您可以在需要时学习新技巧一样。

确实，学习新技术的最佳方式是从事不同的项目——即使这意味着换工作。如果您自 2001 年以来拥有相关且持续的经验，您应该能够选择您的项目。

我一直在为当前项目编写 PHP 代码，这是从 webforms 中有趣的突破。如果有的话，我对这两种模型都有很好的看法，并且非常期待在 MVC 中做一些工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-24T02:49:22.370

我可能会为此得到一些-1，但作为一名 ASP.NET 开发人员，我认为您并不需要了解该框架必须提供的所有内容。我这么说的原因是多年来我对 ASP.NET 的所有可爱的小便利缺乏了解，这导致我为 Windows 编写性能更好、更健壮的 Web 应用程序。平衡的设计模式（关注点分离）与使用框架附带的所有控件和工具相比，不过度使用它会使 ASP.NET Web 应用程序更加“更好”。

例如，您使用 ASP.NET 获得的 ajax 内容以及数据绑定。由于 ASP.NET 在与 Ajax 的竞争中较晚，我开始使用自己的 ajax 包装器（基于早期的 ajax 书籍），然后转向 jQuery。我的同事都对 UpdatePanels 和 3rd 方控件发誓，而且用户体验通常比普通的回帖更糟糕、更混乱（然后我们必须注入 javascript 以使其性能更好、更流畅）。至于数据绑定，我还没有找到比框架[Rick Strahl更好地处理 2 路绑定的罐装控件（来自 Microsoft 或任何第 3 方）](http://www.west-wind.com/Weblog/)在 1.1 天想出回来。我们在一篇论文和他发布的一些基类之上构建了一个框架，我还没有看到我认为在 ASP.NET 中更好地处理数据绑定的东西（嗯......除了 WPF/Silverlight......那些框架真的钉了它IMO）。

所以，对我来说，提升你的 ASP.NET 技能的途径是想出一些好的方法，以最简洁的方式将你的业务逻辑分成逻辑组件，并从 C# 和 JavaScript（和/或JS 包装库，如 jQuery）。对我来说，在学习 ASP.NET 之前有 LAMP 背景，我绝对喜欢 C# 和 Visual Studio，但我不是高级 ASP.NET 控件的忠实粉丝。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T01:30:52.107

这是一个相当广泛的问题，很难解决。我认为自己与您处于相似的空间，所以我想我可以详细说明我一直专注于改进作为开发人员的内容，这可能会有所帮助。

我主要编写与商业和商务相关的 Web 应用程序，我的重点是对关注点分离、领域驱动设计和企业设计模式有扎实的理解。

我发现一些关于一般软件设计的书具有启发性，包括 Steve McConnell 的 Code Complete 和 Freeman & Freeman 的 Head First Design Patterns。

我经常阅读 SO、[Code Better](http://codebetter.com/)、[DDD Step by Step](http://dddstepbystep.com/)和其他一些博客。

剖析别人写得好的代码，并向他们学习。向同行学习。如果您处于令人窒息的工作环境中，无法让您有机会成长为开发人员，请考虑寻找新工作。

在完全不同的框架中学习一门新语言 - 我一直在家里自学 Ruby on Rails，它让我对我在商业上所做的 ASP.NET 工作有了一个有趣的视角。

鉴于您是 ASP.NET Web 开发人员，学习 MVC.NET 肯定会帮助您以一种全新的、令人耳目一新的方式思考前端开发。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T02:53:23.547

如果您负担得起金钱和时间（或者可以让您的公司为此付费），请参加[DevelopMentor](http://www.develop.com/)的课程。他们在全国范围内全年开设课程。它们通常为期一周，并且很深入。

# silverlight - 从 Web 服务调用时，类中的 Silverlight 通用列表变成可观察的集合

> ID：784187
> 
> 赞同：1
> 
> 时间：2009-04-24T01:19:25.707
> 
> 标签：silverlight

我正在从 web 服务中检索一个类，在这个类中有一个通用列表，但不知何故它被变成了一个 ObservableCollection。我将 web 服务集合类型配置为通用列表，但无济于事。发生这种情况是否有原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T13:13:04.430

Silverlight 需要使用可观察集合才能正确绑定到集合（以及实现 INotifyCollectionChanged 的​​集合）。如果您使用 Visual Studio 中的所有 Web 服务内容，如果这会自动发生，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T13:23:01.083

这是服务引用的配置。在 Visual Studio 中，只需右键单击服务引用并编辑属性。应该有集合类型的设置。默认情况下，这设置为 ObservableCollection

编辑：刚刚看了我的解决方案，上下文菜单选项是“配置服务参考”，要设置的属性是“集合类型”。您还可以设置要使用的字典类型。

# flash - Flash - 控件在翻转时淡入淡出

> ID：784190
> 
> 赞同：0
> 
> 时间：2009-04-24T01:20:26.080
> 
> 标签：flash, actionscript-3

我一直在努力想出一个好的解决方案，但基本上，我有一个 Flash 项目，上面有一组控件。当您滚动控件时，控件将淡入，然后当您滚动时，它们将再次淡出。我在一个单独的影片剪辑上拥有所有控件，该剪辑具有补间来处理滚动效果。似乎您可以转到要开始淡入的帧，然后将其放置在 roll_over 上，然后在 roll_out 上开始淡出的帧。但是，似乎如果您在动画完成之前进入，或者从 Flash 片段的一侧滚入，您会得到它无法正常工作的奇怪效果。我的解决方案是下面的代码：

```
function fade_in(evt:MouseEvent) {
    stop();
    if(this.currentFrame == 1 || this.currentFrame == 10) {
        this.gotoAndPlay(1);        
    } else {
        gotoAndStop(10);
    }
}
function fade_out(evt:MouseEvent) {
    stop();
    if(this.currentFrame == 10) {
        this.gotoAndPlay(10);       
    } else {
        gotoAndStop(1);
    }
} 
```

这在很大程度上解决了错误的问题，但仍然不是很完美。有谁知道这样做的更优雅的方法可以减少闪光错误的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T01:28:15.093

如果您查找 TweenLite (blog.greensock.com/tweenliteas3/)，您可以按照您所说的“更优雅的方式”通过帧进行动画处理。它应该更平滑一些，并且两个功能都可以减少到每行一到两行：D

使用他们的交互式演示来了解它是如何工作的。

# iphone - 如何在我自己的自定义视图中重现 iPhone UIScrollView 的轻弹滚动行为？

> ID：784192
> 
> 赞同：5
> 
> 时间：2009-04-24T01:20:52.067
> 
> 标签：iphone, uiscrollview, scroll, motion

我想重现 UIScrollView 的轻弹滚动行为，但我不想使用（或不能使用）该类。我能做些什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-24T01:22:01.533

好的，我已经通过实现我自己的捕获 UIScrollView 动态的库来回答这个问题。

我的代码的有用之处在于它独立于坐标系、动画速率和您正在使用的特定 UI 类。它可以很容易地嵌套在您选择的自定义视图类中。

iPhone 的默认轻弹滚动行为很有趣。如果您长时间按住手指并向多个方向移动，您会发现只有最后一个方向用于计算滚动运动。

但是，如果您尝试自己构建此代码，您会很快发现仅使用最后两个点来计算运动方向并不能解决问题。相反，我的代码保留了很短的触摸历史记录，并使用线性插值来确定在一小段时间之前触摸“会”在哪里。该插值点用作计算运动矢量的基础。这导致了非常愉快的交互。

代码在 github 上可用，这里： http: [//gist.github.com/100855](http://gist.github.com/100855)。它是在 BSD 许可下发布的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T04:19:51.263

那么 UIScrollView 不适合你呢？这门课很灵活...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T07:42:05.757

戴夫，我看到你已经用一些代码回答了你自己的问题，但是，设置以下内容并没有给你你需要的东西：

```
myScrollView.bounces = YES;
myScrollView.pagingEnabled = YES;
myScrollView.directionalLockEnabled = YES; 
```

具体来说，听起来您已经重新实现了`directionLockEnabled`. 也许理解为什么你不能使用 UIScrollView 是更有趣的问题:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-12T03:37:31.047

这很酷！我在一个应用程序中使用了它，其中我的可滚动视图是 1902-2037 范围内一天的图形数据，因此 UIScrollView 效率不高。

# django - 如何在 django 1.0（平面页面）中为多对多关系指定预填充值？

> ID：784198
> 
> 赞同：1
> 
> 时间：2009-04-24T01:25:21.340
> 
> 标签：django, django-flatpages

Django flatpages 使用与 django Site 模型的多对多关系

```
class FlatPage(Model)
    ...
    sites = ManyToManyField(Site) 
```

创建新的平面页面时必须选择一个站点。虽然我以后可能会使用多个站点，但现在没有必要烦人。我想在添加表单上预先选择当前（也是唯一的）站点。我不知道如何做到这一点。我对默认的平面页面行为进行了其他几个成功的修改。但这一个逃脱了我。

我想做如下的事情：

```
sites = ManyToManyField(Site, default=Site.objects.get_current) 
```

但这不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T19:12:27.370

您是否尝试[过 limit_choices_to](http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.limit_choices_to)参数？

或者，如果您不需要依赖于站点框架，则可以远离平面页面并创建自己的自定义页面模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T15:53:30.240

你在获取电流后忘记了尾随括号

Site.objects.get_current()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-14T22:29:31.573

您可以扩展 FlatPageAdmin、排除站点并使用当前站点保存平面页面。有点：

```
class ExtendedFlatPageAdmin(FlatPageAdmin):
    fieldsets = (
        (None, {
            'fields': ('url', 'title', 'content')
        }),
        ('Advanced options', {
            'classes': ('collapse',),
            'fields': ('enable_comments', 'registration_required', 'template_name')
        }),
    )

    def save_model(self, request, obj, form, change):
        obj.save()
        current_site = Site.objects.get_current()
        obj.sites.add(current_site) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-20T21:31:30.610

我最终只是使用了一个小 jquery 来做到这一点。它不是很便携，但对我有用。站点的选择框的 ID 为“id_sites”，因此：

```
$('#id_sites').attr('selectedIndex',0); 
```

只需自动选择第一个选项。我把它放在文档加载事件中，它工作得很好。

# python - 是否有 Python MTA（邮件传输代理）

> ID：784201
> 
> 赞同：15
> 
> 时间：2009-04-24T01:27:00.417
> 
> 标签：python, smtp, mta, smtpd

只是想知道是否有 Python [MTA](http://en.wikipedia.org/wiki/Mail_transfer_agent)。我看了一下[smtpd](http://docs.python.org/library/smtpd.html)，但它们看起来都像没有任何功能的转发器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T03:31:56.310

是的，Twisted 包含一个用于构建 SMTP 服务器的框架。这里有一个简单的基于 Twisted 的电子邮件服务器（有关其开发的一些信息，[请](http://oubiwann.blogspot.com/2009/01/twisted-mail-server-conclusion.html)参见[此处）。](https://launchpad.net/tx/txmailserver)

如果您想要更接近邮件*应用程序*服务器的东西，可以使用[Lamson](https://github.com/zedshaw/lamson)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-05T10:42:18.793

如果您正在寻找完整的 MTA 解决方案，您应该查看[http://slimta.org/](http://slimta.org/)或之前提到的此处[http://lamsonproject.org](http://lamsonproject.org) 我自己已经对 slimta 进行了一些实验，它似乎运行良好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-24T04:29:27.107

它很新，与 Twisted 的 SMTP 的成熟度完全不同，但也有[Lamson](https://launchpad.net/lamson)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-29T07:15:34.233

Blackhole 是一个 MTA（消息传输代理），它（形象地）将所有邮件通过管道传输到 /dev/null，构建在 asyncio 之上，并利用 Python 3.5 中可用的 async def 和 await 语句。

虽然 Blackhole 是一个 MTA，但实际上并没有处理通过 SMTP 或 SMTPS 执行的操作，也没有发送电子邮件。你可以告诉 Blackhole 如何处理它收到的邮件。它可以接受所有内容，将其全部反弹，或随机执行这两个动作中的任何一个。

就处理邮件的方式而言，Blackhole 有点像蜜罐，但它是专门为测试而设计的。

文档 您可以在[此处](https://kura.github.io/blackhole/)找到最新的文档。

变更日志 您可以在黑洞网站上找到变更列表。[https://kura.github.io/blackhole/changelog.html](https://kura.github.io/blackhole/changelog.html)

# .net - Silverlight 3.0 和 Web 开发

> ID：784206
> 
> 赞同：3
> 
> 时间：2009-04-24T01:28:43.063
> 
> 标签：.net, asp.net, silverlight, web-applications

最近，我刚刚被分配了一个项目来开发一个使用[Silverlight 3.0](http://en.wikipedia.org/wiki/Microsoft_Silverlight#Silverlight_3)全部功能的 Web 应用程序/站点。我是 Web 开发的初学者，到目前为止，我更像是一名软件工程师，而不是搞乱 Web 开发的东西。

但是，我对这种新体验感到非常兴奋，因为我觉得我可以探索更多。所以我刚开始学习 .NET Framework、C# 和一些 ASP.NET，过去 3 天。

只是为了让你知道我的编程背景，到目前为止，我已经用 Java 和 C 编程了 3 年，所以我对它很有经验。你有什么建议可以给我吗？

该项目将在 1.5 个月后开始，所以我有一些东西要赶上。我认为我的方法是先了解 .NET 和 ASP.NET 的概念，然后最后学习 Silverlight。我相信 C# 不会太难，看看我的背景。

你能推荐一些可以帮助我学习的好书和其他资源吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T02:24:20.760

毫无疑问，请查看以下视频和教程：

*   [http://silverlight.net/getStarted](http://silverlight.net/getStarted)
*   [http://silverlight.net/getStarted/silverlight3/default.aspx](http://silverlight.net/getStarted/silverlight3/default.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T02:17:40.573

这一切都取决于您的项目的时间线以及应用程序中有多少是基于 Silverlight 的，以及实际上有多少是基于 ASP.NET 的（Silverlight 3 添加了浏览器支持，因此可能不会涉及太多 ASP.NET ）。

如果大部分代码都在 Silverlight 3 中，我将从以下内容开始：

1.  .NET 框架概述
2.  基础 C#
3.  异步/分布式 C#（将有利于 Silverlight 中的网络通信）
4.  Silverlight 设计/开发
5.  ASP.NET

我认为最难的部分是让 Silverlight 应用程序具有视觉吸引力（当然，除非有设计师参与处理 UX）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T02:35:01.967

如果你有大量的 Java 经验，C# 是轻而易举的事。这是具有不同功能和实现的相同想法。因此，您的集合类具有不同的名称，泛型看起来略有不同，并且您的线程处理方式也略有不同。想想你经常做的事情和你经常使用的 Java 对象/框架/库，然后找到 .Net 等价物。

我不相信 Java 中存在像 LINQ 这样的东西，所以这是 .Net 编程的一个非常酷的方面，值得一看。 [这本书](https://rads.stackoverflow.com/amzn/click/com/0672329832)对 LINQ 概念进行了很好的快速介绍，其余的可以作为参考。

Silverlight/XAML/WPF 非常简单，但它带有一个非常大的框架和大量需要学习的东西，因为它非常灵活。 [http://silverlight.net/](http://silverlight.net/)和[http://windowsclient.net/learn/](http://windowsclient.net/learn/)有一些很棒的视频供您选择一两个功能作为基础来快速了解 silverlight、c# 的一些概念, .net 等。听起来你没有时间拿下几本书，所以这些视频应该很酷，而且有很多可供选择。

至于具体了解 Silverlight 的内容，我想说绑定可能是最酷的功能。而且，看看动画，因为这是一个非常酷的方面，而且很容易实现。

这是用作参考的[PDF WPF 绑定表达式备忘单。](http://www.nbdtech.com/Free/WpfBinding.pdf)而且，[这](http://blog.richstern.com/?p=187)是一个在 C# 中制作 Silverlight 动画的非常简单的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T04:04:44.233

作为一名 Java/C 程序员，最大的挑战可能是让您了解 Silverlight（和 WPF）的工作方式。如果您将它们视为传统的 UI 工具包（例如 Win32 API），那么您将陷入困境。

我发现[WPF Unleashed](https://rads.stackoverflow.com/amzn/click/com/0672328917)非常适合进入 WPF（在最初为这些概念苦苦挣扎之后）。希望[Silverlight2 Unleashed](https://rads.stackoverflow.com/amzn/click/com/0672330148)也一样好，虽然我还没有读过它。

学习曲线是痛苦的，但是一旦事情“点击”你就不会回去了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T08:10:12.770

此时，Silverlight 3 处于 Beta 1 阶段。因此，您找不到任何完整的电子书来告诉您 Silverlight 的所有功能。

首先，你必须学习 c# 和 asp.net 应用程序。之后，您应该阅读 Silverlight 2 电子书（我建议**“Pro Silverlight 2 in C# 2008”**）。此外，您应该学习一些.net平台上的相关技术，如WCF、LINQ、Sql Server 2008。

最后，您需要关注 Silverlight 3 中的一些新功能和 Silverlight 2 中的一些功能。

*   **浏览器外。**尝试创建同时支持浏览器和浏览器外的 Silverlight 应用程序（但不同的 UI）。

*   **Static Typing with Dynamic Loading**可帮助您减小 Xap 文件大小，但它仍然是强参考。

*   **Silverlight 中的资源。**它帮助您创建动态 Silverlight 应用程序。

*   **动画**可帮助您创建更好的用户体验。

**进步**

*   **像素着色器。**这可以帮助您通过 GPU 渲染创建出色的 UX。（在 Beta 1 中，您不能使用 GPU 进行渲染）如果您需要创建自定义着色器，则需要安装 DirectX SDK 来测试您的自定义着色器。

    ```
    sampler2D input : register(s0); 
    float4 main(float2 uv : TEXCOORD) : COLOR 
    { 
        float4 Color; 
        Color = tex2D( input , uv.xy); 
        return Color; 
    } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T12:34:31.933

或许考虑 Silverlight 的最佳方式是将其视为 Flash。它主要是关于视觉效果，而不是传统的编程。Silverlight 将完全在客户端和浏览器中运行。例如，您不能将其用于访问服务器上的数据库之类的事情。

要构建一个有竞争力的网站和/或 Web 应用程序，您需要使用的不仅仅是 Silverlight。

您不需要将 C# 与 Silverlight 一起使用，您可以使用 JavaScript。由于您已经精通 Java，这可能是您更好的选择。

在宣布 Silverlight 3 的 MIX09 大会上，有几场关于 Silverlight 3 的精彩演示，它增加了 Silverlight 2 中没有的许多新功能。您可以从[http://videos.visitmix.com/MIX09](http://videos.visitmix.com/MIX09)下载并观看这些视频.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T13:39:09.093

> 在宣布 Silverlight 3 的 MIX09 大会上，有几场关于 Silverlight 3 的精彩演示，它增加了 Silverlight 2 中没有的许多新功能。您可以从[http://videos.visitmix.com/MIX09](http://videos.visitmix.com/MIX09)下载并观看这些视频.

感谢您指出了这一点。实际上，我已经在 mix 会议上观看了所有关于 Silverlight 3.0 的视频。我想这真是太神奇了……

如果 Silverlight 是在客户端运行的东西，因此我不需要在数据库中存储那么多东西。对吗？

有哪些使用 Silverlight 且可能使用数据库的示例应用程序？到目前为止，我只是对如何将 C# 和 ASP.NET 绑定到 Silverlight 感到困惑。也许我的 .NET 知识还没有那么远。

# c# - 动画的表达式混合

> ID：784212
> 
> 赞同：1
> 
> 时间：2009-04-24T01:34:41.893
> 
> 标签：c#, asp.net, silverlight, 3d, expression-blend

我正在尝试创建一个在 3D 空间中旋转的对象的简短动画..我已经准备好所有图像..我想知道如何在不显示过渡移动的情况下从一个图像更改为另一个图像

谢谢

编辑：我的意思是，我不需要有一个弹跳球，我需要做的就是在每一帧中移动球，如果我在每一帧中使用不同的图像并反对它：例如。面向前方的人，面向右侧的人等...如果图像不显示为从屏幕上拖动，我该怎么做？

我希望我说得通

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T07:10:47.483

我想建议你看看Jeff Paries 在 mix09 上[的 Microsoft Silverlight 动画原理](http://videos.visitmix.com/MIX09/T12F)视频。我认为它是对 Silverlight 动画有用且全面的概述。

# .net - Windows 关闭时正在运行的 .NET 线程中引发的异常是什么？

> ID：784213
> 
> 赞同：2
> 
> 时间：2009-04-24T01:34:42.737
> 
> 标签：.net, multithreading, shutdown

确切的异常消息也会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T01:56:43.840

线程中止异常

[http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)

小心试图抓住或阻止它。这很棘手。

# java - 限时服务

> ID：784214
> 
> 赞同：1
> 
> 时间：2009-04-24T01:35:03.343
> 
> 标签：java, web-services, concurrency, queue, policy

我正在开发一个向 Musicbrainz 网络服务发出请求的应用程序。我在 musicbrainz 手册中阅读到每秒向 Web 服务发出的请求不超过一个，否则客户端 IP 将被阻止。

您建议使用哪种架构来使此限制对服务客户端透明。

*   我想调用一个方法（例如 getAlbuns），它应该只在最后一个请求后 1 秒发出请求。
*   我还想一次调用 10 个请求，服务应该处理排队，在可用时返回结果（非阻塞）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T01:55:53.170

您需要定义本地客户将调用的本地“代理服务”。

本地代理将接收请求并将其传递给实际服务。但仅以每秒一条消息的速度。

您如何做到这一点在很大程度上取决于您可以使用的技术。

最简单的是多线程 java 服务，它具有静态和同步的 LastRequestTime long;" 时间戳变量。（尽管您需要一些代码杂技来保持您的请求按顺序排列）。

更复杂的服务可以让工作线程接收请求并将它们放置在队列中，其中单个线程拾取请求并将它们传递给真正的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T02:01:40.783

由于调用之间需要延迟，我建议使用[`java.util.Timer`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Timer.html)or [`java.util.concurrent.ScheduledThreadPoolExecutor`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)。`Timer`非常简单，非常适合*这个*用例。但是，如果稍后确定了额外的调度要求，那么一个人`Executor`就可以处理所有这些要求。在任何一种情况下，都使用固定延迟方法，而不是固定速率方法。

循环任务[轮询](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html#poll())请求对象的并发队列。如果有挂起的请求，任务会执行它，并通过回调返回结果。服务的查询和要调用的回调是请求对象的成员。

应用程序保留对共享队列的引用。要安排请求，只需将其添加到队列中。

* * *

只是为了澄清一下，如果执行计划任务时队列为空，则不会发出请求。简单的方法是结束任务，调度程序将在一秒钟后调用任务再次检查。

但是，这意味着启动任务最多可能需要一秒钟，即使最近没有处理任何请求。如果这种不必要的延迟是无法忍受的，那么编写自己的线程可能比使用`Timer`or更可取`ScheduledThreadPoolExecutor`。在您自己的计时循环中，如果您选择阻塞空队列直到请求可用，您可以更好地控制调度。内置计时器不能保证在上一次执行*完成*后等待整整一秒；他们通常相对于任务的*开始*时间进行调度。

如果您想到的是第二种情况，那么您的`run()`方法将包含一个循环。每次迭代都从[阻塞](http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/LinkedBlockingQueue.html#take())队列开始，直到收到请求，然后记录时间。处理请求后，再次检查时间。如果时间差小于一秒，则[休眠](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#sleep(long))剩余的时间。此设置假定在一个请求的开始和下一个请求之间需要一秒钟的延迟。如果在一个请求结束和下一个请求之间需要延迟，则不需要检查时间；只睡一秒钟。

还有一点需要注意的是，该服务可能能够在一个请求中接受多个查询，这将减少开销。如果是这样，则通过阻塞`take()`第一个元素来利用这一点，然后使用[`poll()`](http://java.sun.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html#poll(long,%20java.util.concurrent.TimeUnit))，可能会以非常短的阻塞时间（5 毫秒左右）来查看应用程序是否正在发出更多请求。如果是这样，这些可以捆绑在对服务的单个请求中。如果`queue`是 a `BlockingQueue<? extends Request>`，它可能看起来像这样：

```
 Collection<Request> bundle = new ArrayList<Request>();
    bundle.add(queue.take());
    while (bundle.size() < BUNDLE_MAX) {
      Request req = queue.poll(EXTRA, TimeUnit.MILLISECONDS);
      if (req == null)
        break;
      bundle.add(req);
    }
    /* Now make one service request with contents of "bundle". */ 
```

# javascript - PrototypeJS 库与 Firefox 扩展兼容？

> ID：784219
> 
> 赞同：3
> 
> 时间：2009-04-24T01:37:37.097
> 
> 标签：javascript, firefox, firefox-addon, prototypejs

有谁知道是否有与 Firefox 扩展兼容的 PrototypeJS 库？我在 Prototype 中编写了一段 700 行的 JS 代码，并且不想使用 JQuery 重新散列它，我知道它推荐用于 Firefox 中的 XUL 扩展？我听说过 Prototype XUL，但它似乎本质上只是“Prototype Lite”，并没有其原始文件那么广泛。

任何见解都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T18:17:11.830

我在原型上遇到过类似的问题。主要原因是发生了大量的窗口检查。我最终做的是删除与prototypejs的窗口和dom操作有关的任何内容，以创建我自己的prototype-custom.js。

此文件仅包含 javascript 扩充，如 Enumerable、Function.prototype 添加（bind、curry 等）

这个应该可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-29T16:11:26.503

jQuery 可以嵌入到扩展中（例如 Ubiquity），所以PrototypeJS*应该*可以！

# c# - 获取可用枚举列表

> ID：784220
> 
> 赞同：5
> 
> 时间：2009-04-24T01:37:46.770
> 
> 标签：c#

我的枚举结构如下：

```
public enum MyEnum
{
   One=1,
   Two=2,
   Three=3
} 
```

现在我想得到一个包含所有`MyEnum`,的列表。[再次](https://stackoverflow.com/questions/782096/convert-listt-to-object)，我正在寻找一个可以做这件事的班轮。我提出了一个 LINQ 查询，但它并不令人满意，因为它有点太长了，我认为：`List<MyEnum>``One``Two` `Three`

```
Enum.GetNames(typeof(MyEnum))
                            .Select(exEnum =>
                                (MyEnum)Enum.Parse(typeof(MyEnum), exEnum))
                            .ToList(); 
```

更好的建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-24T01:49:58.143

```
Enum.GetValues(typeof(MyEnum)).Cast<MyEnum>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T01:59:42.210

我同意@mquander 的代码。

但是，我建议您也*缓存*该列表，因为它极不可能在您的程序执行过程中发生变化。将它放在某个全局位置的静态只读变量中：

```
public static class MyGlobals
{
   public static readonly List<MyEnum> EnumList = 
       Enum.GetValues(typeof(MyEnum)).Cast<MyEnum>().ToList();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T01:45:39.543

不是一个单一的衬里（实现不是，但方法是：P），但也许将这样的东西添加[到](http://devlicio.us/blogs/joe_niland/archive/2006/10/10/Generic-Enum-to-List_3C00_T_3E00_-converter.aspx)工具/实用程序类中，它将返回一个通用列表：

```
public static List<T> EnumToList<T>()

{

 Type enumType = typeof(T);

 // Can't use type constraints on value types, so have to do check like this

 if (enumType.BaseType != typeof(Enum))

  throw new ArgumentException("T must be of type System.Enum");

 return new List<T>(Enum.GetValues(enumType) as IEnumerable<T>);

} 
```

# java - 共享使用的静态与实例方法

> ID：784226
> 
> 赞同：2
> 
> 时间：2009-04-24T01:41:56.743
> 
> 标签：java, static, methods, instance

这是我要确定的...

我有一个实用程序类来将行附加到文本文件。这必须由许多其他类使用，例如公共日志文件。

在我的第一个实现中，我让所有想要使用它的类都创建了一个无引用实例，例如

`new Logger(logline,logname);`

构造函数创建一个`PrintWriter`，附加该行并关闭文件。

这似乎很浪费，因为每添加一行都会创建一个新实例。

另一种方法是在这个公共类中使用称为“writeln”的静态方法，因为我已经理解静态方法和数据会一遍又一遍地重复使用相同的内存......但是

这个静态方法创建一个实例`PrintWriter` 来完成它的工作，所以这是否意味着`PrintWriter`为每一行创建一个新实例，比如#1？

无论如何，（我对 Java 比较陌生）是否有一种众所周知的、被认可的方式来做到这一点，或者我们只是创建出来，然后让垃圾收集器在我们之后清理？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T01:52:24.193

明智的答案是您应该使用“严肃的”日志记录包，例如[Commons Logging](http://commons.apache.org/logging/)。

但是，要回答您的问题，在这种情况下，您应该使用静态方法（除非您想在代码中维护日志记录类实例，在这种情况下，您应该遵循此线程中的其他答案）。此外，您应该有一个静态字段，该字段已初始化为 a `Map<String, PrintWriter>`。（您不必`String`用作键：如果您想要有限数量的日志记录目标类型，请使用枚举。）

然后，当您的方法看到地图中尚不存在的键时，它会`PrintWriter`当场创建该键，并将其粘贴在地图中。您可能希望使用 a`ConcurrentHashMap`作为支持映射类型，因此它是线程安全的。

您还需要提供一种关闭日志记录目标的方法（这也会从地图中清除相关条目）。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T01:48:56.323

你不应该在你的构造函数中做任何工作。

构造函数用于对象设置。

您应该创建一个 Log() 方法来执行实际的日志记录。

```
Logger l = new Logger();
l.Log(logline,logname);
l.Log(logline,logname); 
```

或者您可以将记录器设置为单例。

```
Logger.getInstance().Log(logline, logname); 
```

Java中的单例模式： [http ://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T01:52:13.257

该对象可能希望保持多种状态，尤其是 PrintWriter。如果您的 Logger 类要将这些存储为实例数据，那么进行日志记录的方法需要是实例方法，而不是静态方法。因此，您需要将日志记录与构造分开：

```
// Pass only the PrintWriter into the constructor, not the line to be logged.
Logger myLogger = new Logger(filename); 
```

...

```
// Log a message
myLogger.log("This is a message to be logged.");

// Log another message, just for kicks.
myLogger.log("this shows that myLogger can be used repeatedly."); 
```

我没有展示任何实现细节，但我希望这足以让你继续前进。

# visual-studio-2008 - VS2008：在 IDE 中更改文档的默认从右到左 Tab 顺序

> ID：784227
> 
> 赞同：1
> 
> 时间：2009-04-24T01:42:13.310
> 
> 标签：visual-studio-2008

在 VisualStudio 2008 中，如果我从解决方案资源管理器中打开源文件 A.cs、B.cs 和 C.cs，则文档区域中的选项卡将为 C、B、A。

要获得按 A、B、C 顺序排列的选项卡，我必须按以下顺序打开它们：C、B、A。

有没有办法让新的文档选项卡出现在现有选项卡的右侧？（就像它过去在 VS2005 中的工作方式一样？）

谢谢，

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-01-20T19:42:45.963

这现在可以在 Visual Studio 2010 Beta 2 中，在工具 > 选项 > 环境 > 文档下：

![替代文字](https://farm3.static.flickr.com/2719/4290601573_568d419cc6_o.jpg)

# windows - 将工具栏放入 Windows 任务栏（ala 语言栏）

> ID：784231
> 
> 赞同：4
> 
> 时间：2009-04-24T01:48:13.563
> 
> 标签：windows, winapi, taskbar

我目前正在编写一个 Windows MFC 应用程序来快速搜索我们的公司 DMS。这个想法是在窗口任务栏的右侧边缘放置一个按钮，就像语言栏一样，单击该按钮时会弹出搜索界面。

我似乎找不到太多关于如何在任务栏中像这样放置项目，有人可以指出一些有用的资源或示例吗？

如果可能，我更喜欢本机 API 资源（即，不是 .NET）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-12-24T21:36:21.227

这样的工具栏被命名为 Deskband。这是一个例子： http: [//www.codeproject.com/KB/shell/dotnetbandobjects.aspx](http://www.codeproject.com/KB/shell/dotnetbandobjects.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T06:09:43.683

你可以看看[StExBar](http://tools.tortoisesvn.net/StExBar)。它实现了一个也可以添加到任务栏的资源管理器工具栏。虽然不使用MFC，只是普通的win32。

# java - 菜鸟项目学习 Spring/Hibernate

> ID：784241
> 
> 赞同：6
> 
> 时间：2009-04-24T01:55:36.493
> 
> 标签：java, spring, hibernate, jpa

我想用 Spring/Hibernate 弄湿我的脚。但是我认为如果我使用代码而不是逐章阅读一本书，我会更快地前进并且更有动力。

有没有人对家庭项目有任何好的想法来学习这些技术？有什么你可能做过并认为有用的练习吗？

或者您可能知道一本基于单个项目并引导您完成的书/教程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T05:35:06.543

[AppFuse](http://appfuse.org/display/APF/Home)是一个 Spring & Hibernate 应用程序，旨在用作新项目的骨架。安装它，运行 maven，你就有了一个工作项目，你可以根据需要学习、检查、调试、修改或添加。我曾开发过几个以 AppFuse 起家的企业应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T02:16:32.510

我希望你有一些现有的应用程序，以前使用不同的技术和框架完成。最好的方法是使用 Hibernate 和 Spring 来实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-16T18:49:18.607

我也建议像*tpdi*那样使用 Appfuse。几个细节：

*   使用“Spring MVC Basic”项目；
*   从快速入门开始，并坚持下去；
*   当您有足够的信心时，请深入了解每个技术/层。

您会发现自己在挖掘文档，但已经有了一个工作项目。Appfuse 很少有“特殊”类和实用程序，一旦你掌握了它，你就可以随时从头开始......但它更容易;）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T02:28:54.870

你需要一些简单但不平凡，复杂但不复杂的东西。

尝试制作时间表系统或日历

# emacs - 从 SLIME 中的 REPL 更改包 - 是否损坏？

> ID：784246
> 
> 赞同：0
> 
> 时间：2009-04-24T01:57:18.597
> 
> 标签：emacs, common-lisp, slime

我最近刚开始使用 SLIME 进行实验，发现一个问题让我不确定是我做错了什么还是当前的 SLIME 快照损坏了。

问题：尝试更改包（使用，！p）总是抛出错误，无论使用哪个后端。

来自 SBCL 的错误如下所示：

> 值 #("FOO" 0 3 (SWANK-IO-PACKAGE::FACE NIL)) 不是类型（OR (VECTOR CHARACTER) (VECTOR NIL) BASE-STRING SYMBOL CHARACTER PACKAGE）。
> [TYPE-ERROR 类型的条件]

CLISP 和 CCL 抛出相同的错误，尽管措辞略有不同。

我在 Windows 上运行，但是当我在 Linux 上尝试时也会发生同样的事情。我怀疑我的 .emacs 文件中有一些我忽略的事情，或者当前版本的 SLIME 中存在故障。我昨天才开始使用 SLIME，所以我没有过去的经验可以比较它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T02:03:38.517

它对我有用。它是什么版本的史莱姆？您可以尝试从源代码中获取最新信息，看看是否有帮助。

# c++ - 如何使用 OpenGL/SDL 让鼠标像 FPS 一样控制相机？

> ID：784247
> 
> 赞同：1
> 
> 时间：2009-04-24T01:58:45.860
> 
> 标签：c++, opengl, camera, sdl

我已经使用 OpenGL/SDL 创建了这个基本的 3D 演示。我处理了键盘回调，因此我可以使用“a”和“s”左右“扫射”，并使用“s”和“w”前后移动。

但是，我现在想这样做，这样我就可以根据我的鼠标移动来控制我的相机“看”的方向。就像在 FPS 射击游戏中一样，当您在它周围移动鼠标时，相机会向各个方向环顾四周。

有谁知道当我移动鼠标时如何利用鼠标回调正确“指向”相机类？

```
#include "SDL.h"
#include "Camera.h"

Camera cam;
Scene scn;

//<<<<<<<<<<<<<<<<<myKeyboard>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
void myKeyboard(unsigned char key, int x, int y)
{
  switch(key)
    {
    case 's': cam.slide(0.0, 0.0, 0.2); break;
    case 'w': cam.slide(0.0, 0.0, -0.2); break;
    case 'a': cam.yaw(-1.0); break;
    case 'd': cam.yaw(1.0); break;

    case 27: exit(0);
    }
  glClear(GL_COLOR_BUFFER_BIT);
  glutPostRedisplay();
}

void displaySDL( void )
{
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    scn.drawSceneOpenGL();
    glFlush();
    glutSwapBuffers();
}

int main( int argc, char* argv[] )
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize(640, 480);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("SDL Sence With Camera");
    glutKeyboardFunc(myKeyboard);
    glutDisplayFunc(displaySDL);
    glShadeModel(GL_SMOOTH);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_NORMALIZE);
    glViewport(0, 0, 640, 480);
    scn.read("fig5_63.dat");
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    scn.makeLightsOpenGL();

    cam.set(2.3, 1.3, 2.0, 0, 0.25, 0, 0, 1, 0);
    cam.setShape(30.0f, 64.0f/48.0f, 0.5f, 50.0f);

    glutMainLoop();
    return 0;
} 
```

这是我的 SDL 文件、我在上面粘贴的文件和我的 Camera 类的 tar。 [http://www.filedropper.com/fpsdemotar](http://www.filedropper.com/fpsdemotar)

如果有人可以给我一些提示，告诉我在处理鼠标回调时我应该使用什么算法来指向相机，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T02:11:58.420

鼠标向上/向下移动 -> 俯仰，鼠标向右/向左移动 -> 偏航。

我不相信让你的'a'和'd'键偏航是准确的。

实际上，您的整个设置对我来说有点奇怪，因为从几何角度来看，我将坐标视为 (x, y, z)。您将 s 和 w 设置为“向上”和“向下”（z），而不是“向前”和“向后”（y）。我把它看作是一个平放在桌子上的 xy 图形，你从上面看它。靠近它会减小从平面出来的 z。

这是我将如何设置它：

```
w -> slide(0, 0.2, 0); // y
s -> slide(0, -0.2, 0);
a -> slide(-0.2, 0, 0); // x
d -> slide(0.2, 0, 0);

//The following goes in your mouse event handler or something:
pitch(newMouseLocation.y - oldMouseLocation.y); // mouse y is related to pitch
yaw(newMouseLocaiton.x - oldMouseLocation.x); // mouse x is related to yaw 
```

我意识到你不需要遵循这个坐标约定，但它对我来说似乎更直观。

我希望这有帮助。

# comments - 是否有可能在没有任何注释的情况下编写良好且易于理解的代码？

> ID：784250
> 
> 赞同：16
> 
> 时间：2009-04-24T01:59:59.913
> 
> 标签：comments

任何人都可以建议编写无需一行注释即可理解的好代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-24T02:03:12.963

我在大学时曾经有一位教授告诉我，任何好的代码都不应该需要任何注释。

她的方法是将非常精确的逻辑拆分为具有非常描述性的方法/属性/变量名称的小函数。事实上，她所呈现的大部分内容都极具可读性，没有任何评论。我试着对我写的所有东西做同样的事情......

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-24T02:01:12.173

从头到尾阅读[Code Complete，第 2 版](https://rads.stackoverflow.com/amzn/click/com/0735619670)。也许两次。

给出一些细节：

*   使代码可读
*   消除代码重复
*   在编写代码之前进行设计/架构

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-24T03:39:30.300

我喜欢“人性化”代码，而不是：

```
if (starColour.red > 200 && starColour.blue > 200 && starColour.green > 200){
   doSomething();
} 
```

我会这样做：

```
bool starIsBright;
starIsBright = (starColour.red > 200 && starColour.blue > 200 && starColour.green > 200);

if(starIsBright){
   doSomething();
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-29T18:50:29.507

在某些情况下 - 是的，但在许多情况下不是。**是**的部分已经被其他人回答了——保持简单，写得好，给它起可读的名字，等等。当你在代码中解决的问题根本不是代码问题，而是特定于领域的问题或业务时，**否**部分去逻辑问题。即使没有注释，我也可以阅读糟糕的代码。这很烦人，但可行。但是，如果不理解为什么会这样以及它试图解决什么，就几乎不可能阅读一些代码。所以像：

```
if (starColour.red > 200 && starColour.blue > 200 && starColour.green > 200){
   doSomething();
} 
```

看起来不错，但在程序实际执行的上下文中可能毫无意义。我宁愿这样：

```
// we do this according to the requirement #xxxx blah-blah..
if (starColour.red > 200 && starColour.blue > 200 && starColour.green > 200){
   doSomething();
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-29T18:51:36.133

写得好的代码可能不需要注释来解释你在做什么，但你仍然需要注释来解释原因。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-29T18:58:45.913

是的，您可以编写不需要注释来描述其功能的代码，但这可能还不够。

仅仅因为一个函数在解释它的作用时非常清楚，它本身并不能告诉你它为什么要这样做。

与所有事情一样，适度是个好主意。编写解释性的代码，并编写注释来解释它存在的原因或做出的假设。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-24T02:02:44.930

如果你真的想要，那么你需要非常详细的变量名和方法名。

但在我看来，没有好的方法可以做到这一点。注释在编码中起着重要的作用，即使您是唯一的编码人员，有时仍需要提醒您正在查看代码的哪一部分。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-24T02:21:43.903

[Robert C. Martin 的Clean Code](https://rads.stackoverflow.com/amzn/click/com/0132350882)包含编写干净、易于理解的代码所需的一切。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-24T02:12:07.407

我认为[Fluent Interfaces](http://en.wikipedia.org/wiki/Fluent_interface)的概念就是一个很好的例子。

var bob = DB.GetCustomers().FromCountry("USA").WithName("Bob")

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-24T03:06:17.540

我不确定编写如此富有表现力以至于您不需要注释的代码是否一定是一个伟大的目标。在我看来，这像是另一种形式的过度优化。如果我在您的团队中，我会很高兴看到清晰、简洁的代码以及足够的注释。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-29T18:39:21.343

在大多数情况下，是的，您可以编写足够清晰的代码，使注释成为不必要的噪音。

评论的最大问题是无法检查其准确性。我倾向于同意 Bob Martin 叔叔在他的书《*清洁代码》*的第 4 章中的观点：

> 正确使用注释是为了弥补我们在代码中表达自己的失败。请注意，我使用了失败这个词。我是认真的。评论总是失败的。我们必须拥有它们，因为没有它们我们无法始终弄清楚如何表达自己，但使用它们并不是值得庆祝的理由。
> 
> 因此，当您发现自己处于需要写评论的位置时，请仔细考虑一下，看看是否没有办法扭转局面并用代码表达自己。每次在代码中表达自己时，都应该拍拍自己的后背。每次写评论，你都应该做鬼脸，感受一下自己表达能力的失败。

大多数评论要么是不必要的冗余，要么是彻头彻尾的谬误，要么是用来解释写得不好的代码的拐杖。我说的**最多**是因为在某些情况下缺乏表现力在于语言而不是程序员。

例如，版权和许可信息通常位于源文件的开头。据我所知，在任何流行语言中都没有已知的构造。由于简单的一两行注释就足够了，因此不太可能添加这样的结构。

随着时间的推移，对大多数评论的最初需求已被更好的技术或实践所取代。使用变更日志或注释代码已被源代码控制系统所取代。可以通过简单地编写较短的函数来减轻长函数中的解释性注释。等等

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-29T19:16:43.233

你通常可以把你的评论变成一个函数名，比如：

```
if (starColourIsGreaterThanThreshold(){
    doSomething(); 
}

....

private boolean starColourIsGreaterThanThreshold() { 
    return starColour.red > THRESHOLD && 
           starColour.blue > THRESHOLD && 
           starColour.green > THRESHOLD
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-29T19:35:20.773

我认为注释应该表达为什么，也许是什么，但代码应该尽可能多地定义如何（行为）。

有人应该能够阅读代码并从代码中理解它的作用（如何）。可能不明显的是您为什么想要这种行为以及这种行为对整体需求的贡献。

不过，评论的需要应该让你停下来。也许你是怎么做的太复杂了，写评论的需要表明了这一点。

记录代码还有第三种选择 - 日志记录。一个充斥着日志语句的方法可以做很多事情来解释原因，可以触及什么，并且可能给你一个比命名良好的方法和关于行为的变量更有用的工件。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-24T02:00:59.647

使用描述性变量名和描述性方法名。使用空格。

让您的代码像正常对话一样阅读。

对比 Junit 中 Matchers 的使用：

```
assertThat(x, is(3));
assertThat(x, is(not(4)));
assertThat(responseString, either(containsString("color")).or(containsString("colour")));
assertThat(myList, hasItem("3")); 
```

使用传统的 assertEquals 风格：

```
assertEquals(3, x); 
```

当我查看`assertEquals`声明时，不清楚哪个参数是“预期的”，哪个是“实际的”。

当我查看时，`assertThat(x, is(3))`我可以用英语将其读为“断言 x 为 3”，这对我来说非常清楚。

编写自记录代码的另一个关键是在方法调用中用清晰的名称包装任何不清楚的逻辑。

```
if( (x < 3 || x > 17) && (y < 8 || y > 15) ) 
```

变成

```
if( xAndYAreValid( x, y ) )  // or similar... 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-24T03:34:04.977

它可能不是注释，但是，为了帮助某人更好地理解它正在发生的事情，您可能需要一些图表来解释程序应该如何工作，因为如果一个人了解全局，那么更容易理解代码。

但是，如果您正在做一些复杂的事情，那么您可能需要一些注释，例如，在一个数学密集型程序中。

我发现注释有用和重要的另一个地方是确保有人不会用看起来应该可以工作但不会工作的东西替换代码。在这种情况下，我会留下不好的代码，并将其注释掉，并解释为什么不应该使用它。

因此，可以编写不带注释的代码，但前提是您要限制所编写的应用程序的类型，除非您可以在某处解释为什么做出决定，而不是称之为注释。

例如，可以用多种方式编写随机生成器。如果你选择了一个特定的实现，可能需要解释为什么你选择了那个特定的生成器，因为这段时间对于当前的需求来说可能足够长，但是后来需求可能会改变，你的生成器可能不够用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-29T18:55:55.767

如果您考虑到**并非每个人都喜欢相同的风格这一事实，我相信这是可能的。所以为了尽量减少评论，了解你的“读者”是最重要的。**

在“信息系统”类软件中，尽量使用陈述句，尽量将代码行近似为英文行，避免“数学编程”（索引为 i,j 和 k，单行-要做很多）不惜一切代价。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-04-24T02:17:32.120

描述性名称显然是您的第一个赌注。

其次，确保每种方法只做一件事，而且只做一件事。如果您有一个需要做很多事情的公共方法，请将其拆分为几个私有方法并从公共方法中调用它们，以使逻辑显而易见。

前段时间我不得不创建一个计算两个时间序列相关性的方法。

要计算相关性，您还需要平均值和标准差。所以我有两种私有方法（实际上在这种情况下它们是公共的，因为它们可以用于其他目的（但假设它们不能，那么它们将是私有的））用于计算 A）平均值，B）标准偏差。

这种将函数拆分成有意义的最小部分可能是使代码可读的最重要的事情。

你如何决定在哪里分解方法。我的方法是，如果名称很明显，例如 getAddressFromPage 它是正确的大小。如果您有多个竞争者，您可能会尝试做太多事情，如果您想不出一个有意义的名称，您的方法可能“做得”不够——尽管后者的可能性要小得多。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-04-24T02:34:16.837

在大多数情况下，我真的不认为评论是一个好主意。编译器不会检查注释，因此随着代码的变化，它们经常会产生误导或错误。相反，我更喜欢不需要注释的自我记录、简洁的方法。这是可以做到的，而且我多年来一直这样做。

编写没有注释的代码需要练习和纪律，但我发现随着代码的发展，纪律会得到回报。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-04-24T02:06:27.980

如果您想完全不加注释地编写代码并且仍然可以遵循您的代码，那么您将不得不编写大量更短的方法。方法必须具有描述性名称。变量还必须具有描述性名称。这样做的一种常见方法是给变量指定名词的名称，并为方法指定口头短语的名称。例如：

```
account.updateBalance();
child.givePacifier();
int count = question.getAnswerCount(); 
```

随意使用`enum`s。使用`enum`，您可以替换大多数`boolean`s 和整数常量。例如：

```
public void dumpStackPretty(boolean allThreads) {
    ....
}

public void someMethod() {
    dumpStackPretty(true);
} 
```

对比

```
public enum WhichThreads { All, NonDaemon, None; }
public void dumpStackPretty(WhichThreads whichThreads) {
    ....
}

public void someMethod() {
    dumpStackPretty(WhichThreads.All);
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-04-01T16:24:26.457

我认为代码在很大程度上可以自我记录，而且我认为这很关键，但即使阅读写得很好的代码也可以像用显微镜观察人体细胞一样。有时需要评论才能真正解释系统各部分如何组合在一起的大图景，尤其是当它解决了一个非常复杂和困难的问题时。

考虑特殊的数据结构。如果计算机科学家曾经发表的关于数据结构的所有文章都是编写良好的代码，那么很少有人会真正理解一种数据结构相对于另一种数据结构的相对优势——因为任何给定操作的 Big-O 运行时有时只是通过阅读代码并不明显. 这就是文章中提出的数学和摊销分析的用武之地。

# dependency-injection - 温莎城堡传递构造函数参数

> ID：784253
> 
> 赞同：16
> 
> 时间：2009-04-24T02:00:55.920
> 
> 标签：dependency-injection, inversion-of-control, castle-windsor, ioc-container

我有一个带有一些属性的 IAddress 类。然后我有一个实现这个接口的具体类型。这种具体类型有几个我可以使用的不同构造函数。如何在运行时将参数值传递给这些构造函数之一？我不能使用配置文件，因为我将多次重用这个具体类型，并且每次参数值都会不同。

```
IWindsorContainer container = new WindsorContainer(new XmlInterpreter());
IAddress address = container.Resolve<IAddress>();

public interface IAddress
{
    string Address1 { get; set; }
    string Address2 { get; set; }
    string City { get; set; }
    string State { get; set; }
    string ZipCode { get; set; }
}

class TestAddress : IAddress
{

    private string _address1;
    private string _address2;
    private string _city;
    private string _countyName;
    private string _state;
    private string _zipCode;

    public string Address1
    {
        get { return _address1; }
        set { _address1 = value; }
    }

    public string Address2
    {
        get { return _address2; }
        set { _address2 = value; }
    }

    public string City
    {
        get { return _city; }
        set { _city = value; }
    }

    public string State
    {
        get { return _state; }
        set { _state = value; }
    }

    public string ZipCode
    {
        get { return _zipCode; }
        set { _zipCode = value; }
    }

    public string CountyName
    {
        get { return _countyName; }
        set { _countyName = value; }
    }

    public MelissaAddress(string address1, string address2, string city, string state, string zipcode)
    {
        Address1 = address1;
        Address2 = address2;
        City = city;
        State = state;
        ZipCode = zipcode;
    }

    public MelissaAddress(string address1, string address2, string zipcode) : this(address1, address2, null, null, zipcode)
    { }

    public MelissaAddress(string address1, string address2, string city, string state) : this(address1, address2, city, state, null)
    { }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-24T02:53:30.223

您可以使用`Resolve(object argumentsAsAnonymousType)`或`Resolve(IDictionary arguments)`。Windsor 将选择最匹配的构造函数。

例如，这将选择您的第二个构造函数：

```
container.Resolve<IAddress>(
    new {address1 = "myaddress1", address2 = "myaddress2", zipcode = "myzipcode"}
) 
```

# java - 为什么 Java 和 Perl 中的正则表达式的行为不同？

> ID：784267
> 
> 赞同：15
> 
> 时间：2009-04-24T02:05:31.320
> 
> 标签：java, regex, perl

我的理解是Java对正则表达式的实现是基于Perl的。但是，在下面的示例中，如果我使用相同的字符串执行相同的正则表达式，Java 和 Perl 会返回不同的结果。

这是 Java 示例：

```
public class RegexTest {
    public static void main( String args[] ) {
        String sentence = "This is a test of regular expressions.";
        System.out.println( sentence.matches( "\\w" ) ? "Matches" : "Doesn't match" );
    }
} 
```

这返回：不匹配

这是 Perl 示例：

```
my $sentence = 'This is a test of regular expressions.';
print ( $sentence =~ /\w/ ? "Matches" : "Doesn't match" ) . "\n"; 
```

这将返回：匹配

对我来说，Perl 的结果是有意义的。它查找单个单词字符的匹配项。我不明白为什么 Java 不认为它是匹配的。差异的原因是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-04-24T02:08:00.783

Java`matches`方法正在测试正则表达式是否匹配整个`String`. 要测试是否可以在字符串中的任何位置找到正则表达式，请创建一个[`Matcher`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Pattern.html#matcher(java.lang.CharSequence))并使用它的[`find`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/regex/Matcher.html#find())方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-24T03:55:49.497

此外，Perl 正则表达式语法*不是*Java 正则表达式语法。

在这种情况下不一定适用，但这是对您更一般问题的更多答案。

Java 有一种称为“PCRE”的正则表达式语法，即：Perl Compatible。

然而，这个名称非常具有误导性，因为它与 Perl 兼容的内容非常少。

例如，Perl 正则表达式允许在表达式本身和许多其他高级运算符中执行代码，并且 Perl 中的某些语法与其他语言不同（即：许多语言使用`\>`和`\<`作为单词边界标记，但 Perl 只使用'\b')

Spend a few minutes to read some of the [PerlRe Documentation](http://perldoc.perl.org/perlre.html) and you'll discover lots of awesome tricks that Perl's regular expression engine can do that nothing else seems to do.

# c - 尝试开始使用 C

> ID：784285
> 
> 赞同：4
> 
> 时间：2009-04-24T02:16:24.570
> 
> 标签：c

从具有 C# 和 PHP 等高级语言经验的人的角度来看，有没有人知道任何具有任务或问题的好的资源来练习 C 中的“新”事物？我似乎只能找到比练习问题更多的“挑战”。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-24T02:19:25.483

K & R. [Kernighan & Ritchie]

[http://www.amazon.com/Programming-Language-Prentice-Hall-Software/dp/0131103628/ref=pd_bbs_1?ie=UTF8&s=books&qid=1240539543&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/0131103628)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T02:28:18.863

你可以试试 Bruce Eckel 的 Thinking in C。

它是完全免费的，可以从他的网站下载。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T07:06:02.473

正如其他人所说，请阅读 K&R。

特别注意指针、结构、联合、位域、类型定义和 C 预处理器。指针和指针算术非常重要。

阅读 C 预处理器手册。

学习编写makefile。阅读您的 make 版本的手册。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T07:17:00.120

K&R 已经过时了。

我更喜欢 Stephen Prata 的 C Primer Plus 第 5 版 ISBN：0-672-32696-5

它涵盖了 C99。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T02:19:58.400

这应该是[C 圣经](https://rads.stackoverflow.com/amzn/click/com/0131103628)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T02:35:14.447

C语言解决问题和程序设计

经过

Jeri R. Hanly、Elliot B. Koffmon 和 Frank L. Friedman

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T07:54:22.950

查看PJ Plauger 于 1991 年编写[的标准 C 库](https://rads.stackoverflow.com/amzn/click/com/0131315099)。它交替引用标准（我相信是 C89）中的引用，并讨论了如何使用库函数，以及完整描述的完整 C 标准库的*实现*. 源代码也包括在内。

是的，这本书还没有针对最新的标准进行更新，但它仍然具有很大的价值，它至少可以解释标准库中一些奇怪之处背后的一些基本原理。顺便说一句，普劳格是标准委员会的成员。

Plauger 写了许多关于 C 和早期 Unix 的经典书籍。追踪并阅读最古老的，以了解前 C 历史......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T08:04:22.677

鉴于您以前的 (C#) 编程经验，我想您不需要一本教如何编程的书，而是 C 的错综复杂和微妙之处。我推荐以下内容：

*   Prentice Hall - ANSI C 编程语言第 2 版。布赖恩 W.克尼汉和丹尼斯 M.里奇。对于基本问题。
*   Prentice Hall - 专家 C 编程。深 C 的秘密。
*   ISO - C 99 标准 - 最终。对于许多疑问和问题非常有用

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T08:23:06.420

已知答案的问题来源是[Project Euler](http://projecteuler.net/)。

它本身不是 C 特定的，因为所呈现的问题具有明确的数学方向。但是，要诚实地尝试解决其中的大量问题，需要不断提高对结构、指针、标准库的熟练程度，并以在 C 中运行良好的方式思考问题。

另一个似乎经常被忽视的资源是麻省理工学院已经将大部分课程放在网上。他们的[EE/CS 部门](http://ocw.mit.edu/OcwWeb/Electrical-Engineering-and-Computer-Science/index.htm)也不例外。[算法介绍](http://ocw.mit.edu/OcwWeb/Electrical-Engineering-and-Computer-Science/6-046JFall-2005/CourseHome/index.htm)类可能是一个合适的选择。这本教科书是 Cormen、Leiserson、Rivest 和 Stein 所著的《算法导论》第二版，与教科书一样写得相当好。我没有详尽地搜索课程列表，所以我确信那里还有其他宝石。

# c# - 具有 MarshalByRefObject 字段的可序列化对象

> ID：784291
> 
> 赞同：0
> 
> 时间：2009-04-24T02:18:11.337
> 
> 标签：c#, serialization, marshalbyrefobject

好吧，我不确定这个问题之前是否被问过，所以如果它已经消失了。假设我们有两个这样的课程

```
[Serializable]
public class ClassA
{
    private string _name;
    private ClassB _data;
}

public class ClassB : MarshalByRefObject
{
    public string GetAppDomainName()
    {
      return AppDomain.Current.FriendlyName;
    }  
} 
```

如您所见，ClassA 持有对 ClassB 的引用，但 B 类继承自 MarshalByRefObject 类。我的问题是，当我尝试将 ClassA 传递给另一个 AppDomain 时，除了将 _data 字段作为透明代理传递给新的 AppDomain 之外，如何让 ClassA 以通常的方式序列化？

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T02:24:59.120

让 ClassA 从 MarshalByRefObject 派生，因为它是您想要远程到另一个 AppDomain 的对象。

你可以实现 ISerializable [http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)

**当跨应用程序域边界使用类型时，类型必须从 MarshalByRefObject 继承，并且不能复制对象的状态，因为对象的成员在创建它们的应用程序域之外不可用。**

# c# - 从位图到视频流

> ID：784300
> 
> 赞同：1
> 
> 时间：2009-04-24T02:21:47.757
> 
> 标签：c#, video, streaming, bitmap, vlc

我正在构建一个连续截取屏幕截图的 C# 应用程序。在截屏时，我想使用 vlc 流式传输它们。关于如何将位图发送到 vlc 进行流式传输的任何想法？

提前谢谢何塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T09:16:05.903

您不想这样做，因为带宽使用量很大，vlc 无法流式传输位图，并且 vlc 无法解码位图流。

您可以考虑几种解决方案：

Jpeg 压缩您的快照，并使用 VLC 进行流式传输。据我了解，VLC 只能流式传输它可以读取的内容、文件或其他流，因此您需要先将 jpeg 流式传输到 VLC，然后 VLC 才能流式传输它们。

Jpeg 压缩您的快照，并自己进行流式传输。这可能比听起来容易。通过 http 流式传输 jpeg 的连续流是一种非常粗糙的协议，因此很容易实现

放弃重新发明轮子并使用一些[vnc](http://www.uvnc.com/)程序。

# .net - .NET 到 J2ME

> ID：784302
> 
> 赞同：0
> 
> 时间：2009-04-24T02:23:09.437
> 
> 标签：.net, java-me, snmp

我有一个实现 SNMP 协议的 .NET 类，我被要求将它移植到 J2ME。我会创建 Java 类并将其作为已编译的 .class 文件供 J2ME 开发人员使用，还是比这更深入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T03:38:58.257

不止于此。

您可能想要下载 Netbeans，因为它对 J2ME 有很好的支持，并且应该更容易完成整个过程。

您可以查看此页面上的侧边栏，它显示了创建应用程序的不同步骤。 [http://today.java.net/pub/a/today/2005/02/09/j2me1.html](http://today.java.net/pub/a/today/2005/02/09/j2me1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-23T11:35:36.943

这并不容易。RIM 站点上有 BlackBerry 的网络示例，这些示例使用了大量的 J2ME。他们也许能够为您指明正确的方向。我还有一些旧的 J2ME 网络代码，如果您可以更具体地了解您的需求，我可以将其发送给您。

# algorithm - 高效的字打乱算法

> ID：784303
> 
> 赞同：13
> 
> 时间：2009-04-24T02:23:16.707
> 
> 标签：algorithm

我正在寻找一种有效的算法，用于将一组字母加扰成包含最大单词数的排列。

例如，假设给了我一个字母列表：{e, e, h, r, s, t}。我需要以包含最大单词数的方式对它们进行排序。如果我将这些字母排序为“theres”，它会包含“the”、“there”、“her”、“here”和“ere”这几个词。因此，该示例的分数可能为 5，因为它包含 5 个单词。我想以得分最高（包含最多单词）的方式对字母进行排序。

一个简单的算法是尝试对每个排列进行评分。我相信这是 O(n!)，因此仅对上面的 6 个字母尝试 720 种不同的排列（包括一些重复，因为该示例有两次 e）。当然，对于更多的字母，天真的解决方案很快就变得不可能了。

该算法不必实际产生最佳解决方案，但它应该在合理的时间内找到一个好的解决方案。对于我的应用程序，简单地猜测（[蒙特卡洛](https://en.wikipedia.org/wiki/Monte_Carlo_method)）几百万个排列效果很差，所以这是目前要击败的标志。

我目前正在使用[Aho-Corasick](https://en.wikipedia.org/wiki/Aho-Corasick_algorithm)算法对排列进行评分。它只通过一次文本就搜索字典中的每个单词，所以我相信它非常有效。这也意味着我将所有单词都存储在[trie](https://en.wikipedia.org/wiki/Trie)中，但是如果另一种算法需要不同的存储也可以。我不担心设置字典，只担心实际排序和搜索的运行时间。如果需要，甚至可以使用模糊字典，例如[Bloom Filter](https://en.wikipedia.org/wiki/Bloom_filter)。

对于我的应用程序，给出的字母列表大约是 100 个，字典包含超过 100,000 个条目。字典永远不会改变，但需要对几个不同的字母列表进行排序。

我正在考虑尝试一种[寻路算法](https://en.wikipedia.org/wiki/Pathfinding)。我相信我可以从列表中的一个随机字母作为起点。然后每个剩余的字母将用于创建一个“路径”。我认为这适用于 Aho-Corasick 评分算法，因为分数可以一次建立一个字母。不过，我还没有尝试过寻路；也许这不是一个好主意？我不知道哪种寻路算法可能是最好的。

我想到的另一种算法也是以随机字母开头。然后将在字典树中搜索包含剩余字母的“丰富”分支。包含不可用字母的字典分支将被修剪。我对这将如何工作的细节有点模糊，但它可以完全消除得分排列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T16:53:37.077

这是一个灵感来自[马尔可夫链](http://en.wikipedia.org/wiki/Markov_chain)的想法：

1.  预先计算字典中的字母转换概率。根据字典中的单词，为所有字母对创建一个表，其中某个字母 X 后跟另一个字母 Y 的概率。
2.  根据前一个字母和概率表，通过从剩余的字母池中随机选择每个下一个字母来生成排列，直到所有字母都用完。运行多次。
3.  您可以通过增加转换表的“记忆力”来进行实验——不要只看一个字母，而是说 2 或 3。这增加了概率表，但给了您更多创建有效单词的机会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T03:04:19.107

您可以尝试[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)，它已成功用于解决许多领域中的复杂优化问题。基本上，您在逐渐减少随机性的同时进行随机爬山。由于您已经有了 Aho-Corasick 评分，因此您已经完成了大部分工作。您所需要的只是一种生成邻居排列的方法；因为像交换一对字母这样简单的事情应该可以正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T02:38:12.600

您是否考虑过使用遗传算法？你已经开始了你的健身功能。您可以试验变异和交叉（感谢 Nathan）算法，看看哪种算法做得最好。

另一种选择是让您的算法从输入集中构建尽可能小的单词，然后一次添加一个字母，以便新单词也是或包含新单词。从每个输入集的几个不同的起始词开始，看看它会导致什么。

只是一些无聊的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T02:40:47.633

检查其他人如何解决这个问题可能很有用：http: [//sourceforge.net/search/ ?type_of_search=soft&words=anagram](http://sourceforge.net/search/?type_of_search=soft&words=anagram)

在此页面上，您可以在线生成字谜。我已经玩了一段时间了，它非常有趣。它没有详细解释它是如何工作的，但参数提供了一些见解。 [http://wordsmith.org/anagram/advanced.html](http://wordsmith.org/anagram/advanced.html)

# vb6 - 将图片框插入图片框vb6

> ID：784309
> 
> 赞同：0
> 
> 时间：2009-04-24T02:28:07.227
> 
> 标签：vb6, picturebox

我有一些文章的代码。（图内内图​​外） 代码的结果是当我点击图片外的地方时，图片内会显示在我点击的地方，但在对角线的地方。

它不在我点击的正确位置。我希望图片内部会显示在我点击的位置

```
picturebox1 name = PictOuter
picturebox2 name = PictInner

Dim pos As String
Dim bos As String

pos = Format(x / PictOuter.Width * 100, "0")
bos = Format(y / PictOuter.Height * 100, "0")

PictInner.Left = PictOuter.Width * pos / 100
PictInner.Top = PictOuter.Height * bos / 100
PictInner.Visible = True 
```

您的信息将很有帮助，感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T22:05:11.150

如果您只是希望内框的左上角是您单击的位置，则可以使用外 PictureBox 的 MouseDown 事件，如下所示：

```
Private Sub PictOuter_MouseDown(Button As Integer, Shift As Integer, X As Single, Y As Single)

    PictInner.Left = X
    PictInner.Top = Y

End Sub 
```

您还可以选择在 X 和 Y 上执行您想要的任何计算，以使内部 PictureBox 居中。

# asp.net - 在 Windows 任务计划程序中创建/修改任务所需的权限

> ID：784311
> 
> 赞同：4
> 
> 时间：2009-04-24T02:28:27.380
> 
> 标签：asp.net, permissions, scheduled-tasks

我需要从 ASP.NET Web 应用程序在 Windows Server 2003 上的 Windows 任务计划程序中创建和修改任务。运行 Web 应用程序的网络服务无法进行更改。它因 System.UnauthorizedAccessException 异常而出错。

它可以在我桌面上的 Visual Studio 中正常运行。

我需要授予帐户什么权限才能从 ASP.NET 修改任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T03:08:53.867

该帐户需要对“任务”目录具有读/写权限。这是路径：

```
%SystemRoot%\system32\Tasks\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-27T00:17:13.180

何塞的回答部分解决了我的问题。但是，还有一个问题是 Windows Server 2003 不喜欢我将本地系统指定为任务将在其下运行的帐户。它似乎不喜欢我传入一个空密码，这是您指定本地系统的方式。我通过在服务器上创建一个本地帐户来运行任务并指定这个新帐户来解决这个问题。

在 Windows XP 上指定本地系统不会导致任何问题。

[附加信息](http://www.winhelponline.com/blog/fix-error-0x80070005-creating-task-using-task-scheduler-in-xp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-23T21:37:55.470

`CACLS TASKS /E /G builtin\administrators:F`

根据：[https ://social.technet.microsoft.com/Forums/lync/en-US/67734412-bb17-42d5-80ff-0edf3147c169/cannot-create-scheduled-task-access-denied](https://social.technet.microsoft.com/Forums/lync/en-US/67734412-bb17-42d5-80ff-0edf3147c169/cannot-create-scheduled-task-access-denied)

# javascript - 使用 JavaScript 读取字符串中的换行符

> ID：784313
> 
> 赞同：16
> 
> 时间：2009-04-24T02:29:00.470
> 
> 标签：javascript

> **可能重复：**
> [用javascript中的<br />标签替换字符串中的所有换行符](https://stackoverflow.com/questions/784539/replace-all-line-break-in-a-string-with-br-tag-in-javascript)

如何使用 JavaScript 从值中读取换行符并将其替换为`<br />`标记？

例子：

```
var a = "This is man.
     Man like dog." 
```

我希望我的结果看起来像

```
var a = "This is man.<br />Man like dog."; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-24T02:32:17.340

```
var newString=oldString.replace(/\n/g,"<br />"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-24T11:18:56.280

完整地说：我遇到过 '\n' 不起作用的情况，在这些情况下我使用过：

```
someString.replace(/\n/g,'<br />')
          .replace(/\r/g,'<br />')
          .replace(/\r\n/g,'<br />'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-24T02:49:39.220

+1 点击支持的答案。我只想指出，使用这种定义字符串的方式，你会有一堆额外的空白。做一个简单的换行替换实际上会给你这个字符串：

```
"This is man.<br />     Man like dog." 
```

基本解决方案是更改替换功能：

```
newString = oldString.replace(/\n\s*/g, "<br />"); 
```

或者更好（恕我直言），像这样定义你的字符串：

```
var a = "This is man.\n"
      + "Man like dog."
; 
```

这意味着您仍然可以获得很好的缩进，而无需将额外的开销添加到变量中，此外，它还允许您轻松添加注释：

```
var a = "This is man.\n" // this is the first line.
      + "Man like dog."  // and woo a comment here too
; 
```

# asp.net-mvc - 使用 ASP.NET MVC 1.0 的 TDD

> ID：784316
> 
> 赞同：11
> 
> 时间：2009-04-24T02:30:58.203
> 
> 标签：asp.net-mvc, tdd

我在哪里可以找到关于使用 ASP.NET MVC 1.0 的 TDD 的好教程？我更喜欢视频教程，但文本教程也可以。我有一个新项目即将开始，我想从右脚开始。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T02:36:36.770

来自 ASP.NET的[店面视频](http://www.asp.net/learn/mvc-videos/#MVCStorefrontStarterKit)是必看系列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T02:51:47.247

任何关于 TDD 的教程都会对 MVC 有所帮助。我做 TDD 已经有一段时间了，发现它是 MVC 中的自然过渡。我发现有一些特殊性需要解决。

1.  您经常需要模拟 HttpContext，这意味着您需要在创建控制器后将 ControllerContext 分配给控制器，因为这是注入模拟的唯一方法。上下文将用于在控制器中提供 Session、Request 和 Response 对象（也模拟它们）。新的 HttpContextBase, HttpSessionStateBase, ... 类使这更容易做到。

2.  由于 (1)，请花一些时间将一些帮助类放在一个单独的类库中，供所有测试项目使用。这些帮助类应该包含提供模拟上下文的可配置（或提供特定配置的多个方法）的方法。这将有助于保持您的测试紧凑。

3.  如果您不使用 ModelBinding（在签名中带有相应的参数）进行控制器操作，请使用并分配一个 ValueProvider 来测试接受参数的方法。这将允许您使用 TryUpdateModel/UpdateModel，而无需向控制器添加代码以将请求中的数据获取到这些方法中。

4.  使用模拟框架——如果从上面看不明显的话。如果你模拟出依赖关系，编写测试会容易得多。IMO，编写自己的模拟是不值得的，尽管我知道其他人不同意这种观点。我想这不是 MVC 独有的，但我想我会提到它。

5.  设置一组单独的测试，这些测试使用反射来测试是否在您的方法上设置了具有适当属性的适当属性。MVC 大量使用属性来实现安全性和其他横切方面。这些也需要测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T02:36:32.870

[在这里](http://www.asp.net/learn/mvc-videos/)查看。强烈推荐 MVC 店面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T16:56:12.070

我认为 Rob Conery 的“ASP.NET MVC Storefront Starter Kit” [http://www.asp.net/learn/mvc-videos/#MVCStorefrontStarterKit](http://www.asp.net/learn/mvc-videos/#MVCStorefrontStarterKit)非常适合用 ASP.NET MVC 演示 TDD。

# opengl - 如何在 OpenGL/Glut 中更改鼠标光标的位置？

> ID：784322
> 
> 赞同：7
> 
> 时间：2009-04-24T02:35:32.107
> 
> 标签：opengl, mouse, glut

我正在编写一个简单的游戏，我将让鼠标控制相机（使用 GlutPassiveMotionFunc）。

我将根据回调之间的鼠标差异进行俯仰和偏航，但是我认为每次尝试移动鼠标时将鼠标“强制”回到屏幕中心是个好主意。这样他们的光标就不会在屏幕的边缘，并且他们不能在那个方向上进一步移动。

我可以使用什么 Glut / OpenGL 命令来强制改变鼠标的位置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-24T02:43:10.730

使用`glutWarpPointer(x, y)`, where`x`和`y`(both `int`s) 以像素为单位（相对于窗口的原点）。例如：

```
glutWarpPointer(windowWidth / 2, windowHeight / 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:17:02.890

抱歉回复晚了。我的意思是，在我使用 glutWrapPointer 函数之后，如果我打印出 x 和 y 值，我无法捕捉光标上的变化，它总是打印出我提供的 glutWrapPointer 函数内的值。我所做的修复它是将这个函数移动到 openGl 的 Animate 函数中，它工作正常。

# c++ - RAII 和未初始化的值

> ID：784330
> 
> 赞同：2
> 
> 时间：2009-04-24T02:38:22.520
> 
> 标签：c++, raii

只是一个简单的问题：

如果我有一个简单的向量类：

```
class Vector
{
public:
  float x;
  float y;
  float z;
}; 
```

RAII 概念在这里也适用吗？即提供一个构造函数来将所有值初始化为某些值（以防止使用未初始化的值）。

**编辑**或提供一个构造函数，该构造函数明确要求用户在对象可以被实例化之前初始化成员变量。

IE

```
class Vector
{
public:
  float x;
  float y;
  float z;
public:
  Vector( float x_, float y_, float z_ )
    : x( x_ ), y( y_ ), z( z_ )
  { // Code to check pre-condition; }
}; 
```

应该使用 RAII 来帮助程序员忘记在使用之前初始化值，还是开发人员的责任？

或者这是看待 RAII 的错误方式？

我故意让这个例子简单得可笑。我真正的问题是回答一个复合类，例如：

```
class VectorField
{
public:
  Vector top;
  Vector bottom;
  Vector back;

  // a lot more!
}; 
```

正如你所看到的......如果我必须编写一个构造函数来初始化每个成员，那是相当乏味的。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T02:46:15.980

RAII 中的“R”代表资源。并非一切都是资源。

许多类，例如 std::vector，是自初始化的。你不需要担心这些。

POD 类型*不是*自初始化的，因此将它们初始化为一些有用的值是有意义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T02:46:58.413

由于您的`Vector`类中的字段是内置类型，为了确保它们被初始化，您必须在构造函数中执行此操作：

```
class Vector
{
public:
  float x;
  float y;
  float z;

  Vector() : x(0.0), y( 0.0), z( 0.0) {}
}; 
```

现在，如果您的字段是正确编写的类，它们应该自己自动初始化（并在必要时清理）。

在某种程度上，这与 RAII 相似且相关，因为 RAII 意味着资源（内存、句柄等）由对象自动获取和清理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T02:46:57.900

我不会说 RAII 在这里适用。记住这些字母代表什么：*资源获取是初始化*。您在这里没有获得任何资源，因此 RAII 不适用。

您可以为`Vector`;提供一个默认构造函数。这将消除您显式初始化`VectorField`. 编译器会插入代码为您执行此操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-24T03:02:00.297

当您需要进行显式清理时使用 RAII 模式，并且希望在隐式清理另一个对象的同时进行该清理。这可能发生在内存分配/释放、临界区进入/退出、数据库连接等。在您的示例中，“浮动”会自动清理，因此您无需担心它们。但是，假设您调用了以下函数来获取向量：

```
Vector* getMeAVector() {
    Vector *v = new Vector();
    // do something
    return v;
} 
```

并说删除返回的向量是调用者的责任。如果您通过以下方式调用此代码：

```
Vector *v = getMeAVector();
// do some stuff with v
delete v; 
```

您必须记住释放向量。如果“东西”是一段很长的代码，可能会引发异常，或者其中有一堆返回语句，那么您必须在每个退出点释放向量。即使你这样做了，通过添加另一个“return”语句或调用某个引发异常的库来维护代码的人也可能不会。相反，您可以编写这样的类：

```
class AutoVector
{
        Vector *v_;
    public:
        AutoVector(Vector *v) : v_(v) {}
        ~AutoVector() { delete v_; }
}; 
```

然后，您可以像这样获得向量：

```
Vector *v = getMeAVector();
AutoVector av(v);
// do lots of complicated stuff including throwing exceptions, multiple returns, etc. 
```

然后您不必再担心删除向量，因为当 av 超出范围时，它将被自动删除。如果需要，您可以编写一个小宏来使“AutoVector av(v)”语法更好一些。

这是一个人为的例子，但是如果周围的代码很复杂，或者如果它可以抛出异常，或者有人过来并在中间添加了“return”语句，那么“AutoVector”将释放内存很好自动地。

您可以使用“auto”类执行相同的操作，该类在其 ctor 中进入关键部分并在其 dtor 中退出，等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T02:48:36.693

如果您不编写构造函数，编译器将为您**生成**一个**默认**构造函数，并将这些值设置为默认值（未初始化的值）。自己提供一个默认构造函数并初始化这些值，这将是您执行此操作的最佳方法。我不认为这样做太复杂。不要太懒:-)

# python - 在 Python 中，可以调用 A 类的实例方法，但传入 B 类的实例吗？

> ID：784331
> 
> 赞同：6
> 
> 时间：2009-04-24T02:38:58.887
> 
> 标签：python, oop, coding-style

为了重用一些被定义为不同类的实例方法的现有代码，我想做如下事情：

```
class Foo(object):
  def __init__(self):
    self.name = "Foo"

  def hello(self):
    print "Hello, I am " + self.name + "."

class Bar(object):
  def __init__(self):
    self.name = "Bar"

bar = Bar()
Foo.hello(bar) 
```

但这会导致：

> TypeError: unbound method hello() must be called with Foo 实例作为第一个参数（得到 Bar 实例）

这样的事情可能吗？

* * *

我应该清楚我知道这是个坏主意。显然，真正的解决方案是进行一些重构。我只是想一定有办法，事实证明是有的。

感谢您的评论。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T02:43:14.337

看起来这样有效：

```
Foo.hello.im_func(bar) 
```

> 大家好，我是巴尔。

[我想我](http://docs.python.org/reference/datamodel.html)需要更努力地阅读......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T07:43:20.853

发生这种情况是因为 python 将类函数包装为执行此类型检查的“未绑定方法”。[这里有一些关于这里](http://python-history.blogspot.com/2009/02/first-class-everything.html)涉及的决定的描述。

请注意，这种类型检查实际上已在 python 3 中删除（请参阅该文章末尾的注释），因此您的方法将在那里有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-29T16:13:32.857

这是一个老问题，但 Python 已经发展，看起来值得指出：

在 Python 3 中没有更多的了`<unbound method C.x>`，因为一个未绑定的方法只是一个`<function __main__.C.x>`!

这可能意味着不应将原始问题中的代码视为 /that/ off。无论如何，Python 一直都是关于鸭子类型的，不是吗？！

## 参考：

*   [Guido 提议从 python 中删除未绑定的方法](https://mail.python.org/pipermail/python-dev/2005-January/050625.html)
*   Python 3 版本[的新增功能](https://docs.python.org/3.0/whatsnew/3.0.html#operators-and-special-methods)
*   [在 Python 3 中获取未绑定方法对象的定义类](https://stackoverflow.com/questions/3589311/get-defining-class-of-unbound-method-object-in-python-3)

## Py2 中的替代解决方案

请注意，对于“探索性”问题还有另一种解决方案（请参阅[Python：绑定未绑定方法？](https://stackoverflow.com/questions/1015307/python-bind-an-unbound-method)）：

```
In [6]: a = A.a.im_func.__get__(B(), B)

In [7]: a
Out[7]: <bound method B.a of <__main__.B instance at 0x7f37d81a1ea8>>

In [8]: a(2)
2 
```

参考：

# 一些 ipython 代码示例

## 蟒蛇 2

```
In [1]: class A():
    def a(self, a=0):
        print a
   ...:

In [2]: A.a
Out[2]: <unbound method A.a>

In [3]: A.a.im_func
Out[3]: <function __main__.a>

In [4]: A.a(B())
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-4-7694121f3429> in <module>()
----> 1 A.a(B())

TypeError: unbound method a() must be called with A instance as first argument (got B instance instead) 
```

## 蟒蛇 3

```
In [2]: class A():
    def a(self, a=0):
        print(a)
   ...:

In [3]: def a():
   ...:     pass
   ...:

In [4]: class B():
   ...:     pass

In [5]: A.a(B())
0

In [6]: A.a
Out[6]: <function __main__.A.a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T04:44:28.770

不久前，我在 PerlMonks 上想知道 Perl 中的相同“功能”，并且[普遍的共识](http://www.perlmonks.org/?node_id=432172)是，虽然它有效（就像它在 Python 中一样），但您不应该那样做。

# fogbugz - sourcelinks 和fogbugz

> ID：784333
> 
> 赞同：0
> 
> 时间：2009-04-24T02:40:15.403
> 
> 标签：fogbugz

我刚刚安装了这个： http: [//www.wholetomato.com/products/sourcelinks/FogBugzBundle.asp](http://www.wholetomato.com/products/sourcelinks/FogBugzBundle.asp) 但我似乎没有在我的 msdev 中获得任何功能。我正在使用2008专业版。

有人对这个工具有任何经验吗？它似乎根本不适合我。我从来没有得到登录对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T02:06:21.703

大约一周后，Whole Tomato 团队给了我一个完美的解决方案。感谢马克等的支持。

答案如下

> 在做了一些研究之后，我遇到了这个页面：
> 
> [http://www.mztools.com/articles/2007/MZ2007009.aspx](http://www.mztools.com/articles/2007/MZ2007009.aspx)
> 
> 列出了为什么它可能不会出现在加载项管理器中的几种可能性。其中之一是：
> 
> “报告的问题是在未正确安装 MSXML 6.0 时发生。在这种情况下，加载项管理器不显示任何基于 XML 的加载项（使用 .AddIn 文件进行注册）。它仅显示注册表- “
> 
> 您可以尝试重新安装 XSXML 6.0，看看是否有帮助。下载链接在这里：
> 
> [http://www.microsoft.com/downloads/details.aspx?FamilyID=993c0bcf-3bcf-4009-be21-27e85e1857b1&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=993c0bcf-3bcf-4009-be21-27e85e1857b1&displaylang=en)
> 
> 我肯定会在重新安装 VS2008 之前尝试一下。

# authentication - 如何在 JBoss 中设置用户名和密码

> ID：784335
> 
> 赞同：4
> 
> 时间：2009-04-24T02:42:15.540
> 
> 标签：authentication, jboss

不幸的是，他们的 Wiki 因维护而停机，并且网络没有帮助。

如何将新用户添加到 JBoss 以便我可以登录。

在 Tomcat 中，您更改 tomcat-users.xml 文件。在 jboss 的 config 文件夹中似乎有一个类似位置和标题的文件 login-config.xml。

是与此文件有关还是与其他完全有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T02:46:32.113

它在 jboss\server\default\conf\props 的 users.properties 文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:22:03.860

就像@Ankur 说你需要配置 jboss\server\default\conf\props 中的文件

我想你想配置你的管理控制台用户。因此，您必须在 jmx-console-users.properties 文件中添加一行用户名和密码（例如：username=password => jbatista=portuguese）。

重要的是不要忘记将角色添加到上面创建的用户/权限。与 tomcat 或任何其他应用程序服务器一样，用户具有一个或多个角色，并且角色具有权限。在这种情况下，我们希望用户 jbatista 具有 JBossAdmin 角色，以便他可以部署 WAR 等。像添加用户案例一样，我们必须添加另一个条目行。但我们将 jbatista=JBossAdmin (username=role) 行添加到 jmx-console-roles.properties 文件中，而不是 jmx-console-users.properties

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T07:06:21.007

您可以通过 Jboss AS 7 中的 CLI 添加用户，该用户又存储在 JBOSS_HOME/domain/configuration 和 JBOSS_HOME/Standalone/configuration/ 目录中的 mgmt-users.properties 中。

我有一个 ubuntu 系统，但是通过 cli 添加用户的步骤是相同的​​：

1.  通过终端进入Jboss7的bin目录路径
2.  输入 ./add-user.sh
3.  然后创建您想要的用户类型。

此链接将为您提供帮助并详细解释：

[http://www.mastertheboss.com/jboss-as-7/adding-users-with-jboss-as-7](http://www.mastertheboss.com/jboss-as-7/adding-users-with-jboss-as-7)

**注意**：对于 Windows，您必须运行 add-user.bat 文件而不是 .sh

# asp.net - Response.Redirect 到 UNC 路径

> ID：784340
> 
> 赞同：0
> 
> 时间：2009-04-24T02:44:22.413
> 
> 标签：asp.net

我想使用 UNC 路径将用户重定向到文件服务器上的目录。我试过使用类似下面的东西，但我得到一个 404 错误。

```
Response.Redirect(@"file:\\fileserver\data\"); 
```

使这项工作的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T02:55:12.420

您的文件协议标识符并不完全正确。尝试：

```
string location = String.Format("file:///{0}", @"\\fileserver\data\");
Response.Redirect(location, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T02:53:19.443

我不确定该`Response.Redirect`方法，但您始终可以编写文件以供用户使用`Response.WriteFile`.

此链接可能会有所帮助：http: [//support.microsoft.com/kb/307603/EN-US/](http://support.microsoft.com/kb/307603/EN-US/)

来自上述链接的代码片段：

```
private void Page_Load(object sender, EventArgs e)
{
   //Set the appropriate ContentType.
   Response.ContentType = "Application/pdf";
   //Write the file directly to the HTTP output stream.
   Response.WriteFile(@"\\server\folder\file.pdf");
   Response.End();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T02:57:40.103

文件：////服务器/目录

或者，在您的网站中创建一个虚拟目录并将其映射到路径，例如 /data/

# .net - 服务器远程调试

> ID：784341
> 
> 赞同：7
> 
> 时间：2009-04-24T02:44:46.953
> 
> 标签：.net, visual-studio, debugging, remote-debugging

在不安装 VS 的情况下在服务器上远程调试 .NET 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-24T02:50:39.217

您不需要在远程服务器上安装所有 VS。VS 安装光盘包含一个名为 Remote Debugger 的目录，该目录有两个文件夹（x64 和 x86），其中包含特定平台的设置应用程序。这将安装远程调试监视器 (msvsmon.exe)。

当然，您仍然需要在本地计算机上安装 Visual Studio。

# c++ - 在 C 中更改 Windows 目录中的文件顺序

> ID：784351
> 
> 赞同：1
> 
> 时间：2009-04-24T02:50:29.870
> 
> 标签：c++, c, windows

就像您将一个文件拖到另一个文件上并更改顺序一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T03:26:25.697

我假设您正在询问如何重新排列文件在文件夹中的显示顺序。我不完全确定该怎么做，但您需要使用 Windows *shell*中的各种功能来完成此操作。请参阅[Shell 开发人员指南](http://msdn.microsoft.com/en-us/library/bb776778%28VS.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T02:52:33.313

没有办法做到这一点（除非使用原始的、基于扇区的 API 来破解磁盘上的目录结构）。磁盘上文件的顺序由文件系统根据其设计和需要进行管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T03:36:18.107

就其价值而言，FAT 目录条目是按照它们添加的顺序存储的。NTFS 实际上索引它的目录条目，但我认为创建顺序仍然在检索它们的顺序中发挥了一些作用。也许不吧。但是，几乎每个执行文件列表的 UI 都会在显示时进行某种类型的排序，通常是按字母顺序排列的。

底线——如果它不是应用程序排序的并且不是创建时间，那么你无能为力。

# asp.net-mvc - 在具有存储库、服务层和使用模型绑定器的 ASP.Net MVC 场景中，验证应该在哪里？

> ID：784359
> 
> 赞同：5
> 
> 时间：2009-04-24T02:55:10.767
> 
> 标签：asp.net-mvc, validation

**相关：** [使用 ASP.NET MVC 实现字段验证的最佳方法是什么？](https://stackoverflow.com/questions/16747/whats-the-best-way-to-implement-field-validation-using-asp-net-mvc)

让我们假设一个具有以下项目的解决方案：

```
Foo; // the MVC web project
Foo.Models;
Foo.Repositories;
Foo.Services; 
```

`Foo.Models`是具有所有实体的应用程序的域，无论使用 EF、NH、POCO 还是其他任何东西都无关紧要。这是一个例子：

```
public class User
{
    public string Username { get; set; }

    public string Email { get; set; }

    public string Password { get; set; }
} 
```

`Foo.Repositories`里面有一个，里面`UserRepository`有`Foo.Services`一个`UserService`。

在 Web 应用程序中，让我们考虑一个模型绑定器，如下所示：

```
public class UserBinder : DefaultModelBinder
{
    //...
} 
```

我看到三个不同的选项来放置验证：

*   如下`Foo.Models`所示：

    ```
    public class User
    {
        public string Username { get; set; }

        public string Email { get; set; }

        public string Password { get; set; }

        public ICollection<KeyValuePair<string, string>> ValidateErrors()
        {
            //Validate if Username, Email and Password has been passed
        }
    } 
    ```

*   像`Foo.Services`：

    ```
    public class UserService
    {
        public ICollection<KeyValuePair<string, string>> ValidateErrors()
        {
            //Validate if Username, Email and Password has been passed
        }
    } 
    ```

*   在`Foo`模型活页夹中：

    ```
    public class UserBinder : DefaultModelBinder
    {
        protected override void OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var user = (User)bindingContext.Model;

            // validate everything here

            base.OnModelUpdated(controllerContext, bindingContext);
        }
    } 
    ```

另一件需要注意的事情是，考虑到前两个选项 [模型和服务]，还有另一个决定要做：`ValidateErrors`可以直接在控制器上或在 Binder 内调用方法。

我对这个场景有 2 个问题：

1.  验证应该是：

    *   在从控制器调用的模型中？
    *   在从活页夹调用的模型中？
    *   在从控制器调用的服务中？
    *   在从活页夹调用的服务中？
    *   直接在活页夹里？
    *   还有什么想法吗？
2.  以上所有场景都讨论了用户创建。但是用户登录呢？假设用户使用用户名和密码登录应用程序，因此不需要验证电子邮件。这个验证应该在哪里？

    *   在从控制器调用的模型中？
    *   在从控制器调用的服务中？
    *   还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T12:05:45.263

查看[**ASP.NET MVC 联系人管理器示例应用程序**](http://www.asp.net/learn/mvc/tutorial-26-cs.aspx)，我认为它有一个非常好的架构

http://www.asp.net/learn/mvc/tutorial-26-cs.aspx'> [http://www.asp.net/learn/mvc/tutorial-26-cs.aspx](http://www.asp.net/learn/mvc/tutorial-26-cs.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T16:53:12.950

我非常喜欢从控制器调用验证并让验证例程返回一个 ActionResult，这样控制器就可以知道如何处理结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T06:01:15.903

对于它的价值，这是我在当前项目中找到的：

我有`Models`，`Repositories`（如果你愿意，你可以打电话给他们`Services`），和`ViewModels`。我尽量避免编写自定义模型绑定器，因为 (a) 它很无聊，并且 (b) 放置验证的地方很奇怪，恕我直言。对我来说，模型绑定器只是从请求中获取项目并将它们推入对象中。例如，PHP 在将项目从标头提取到 $_POST 数组时不做任何验证；这是我们将数组插入的东西，它关心它的内容。

我的`Model`对象通常不允许自己进入无效状态。这意味着在构造函数期间传入必需的参数，如果尝试使用无效值设置属性，则会引发异常。而且，总的来说，我尝试将我的`Model`对象设计为不可变的。例如，我有一个`Address`用于邮寄地址的对象，该对象由一个`AddressBuilder`对象构成，该对象通过检查`AddressScheme`可以从`AddressSchemeRepository`. 呸。但我认为这是一个很好的例子，因为它需要一些概念上简单的东西（“验证邮寄地址”）并使其在现实世界的使用中变得复杂（“我们接受来自 30 多个国家的地址，并且这些格式规则位于数据库中，

由于构造这个`Model`对象是一种痛苦——它也应该如此，因为它对加载到其中的数据非常特别——我有一个`InputAddressViewModel`我的视图绑定到的对象。`InputAddressViewModel`实现，`IDataErrorInfo`以便我获得 ASP.NET MVC 的自动`DefaultModelBinder`添加错误`ModelState`。对于我提前知道的简单验证例程（电话号码格式、需要名字、电子邮件地址格式），我可以在`InputAddressViewModel`.

拥有视图模型的另一个优点是，因为它无耻地为特定视图量身定制，所以你的真实模型更具可重用性，因为它不必做出任何奇怪的让步来使其适合 UI 显示（例如，需要实现`INotifyPropertyChanged`或`Serializable`任何乱七八糟的东西）。

关于地址的其他验证错误，直到我`AddressScheme`在实际中与我的`Model`. 这些错误将是控制器编排到`ModelState`. 就像是：

```
 public ActionResult InputAddress(InputAddressViewModel model)
{
    if (ModelState.IsValid)
    {
        // "Front-line" validation passed; let's execute the save operation
        // in the our view model
        var result = model.Execute();

        // The view model returns a status code to help the 
        // controller decide where to redirect the user next
        switch (result.Status)
        {
            case InputAddressViewModelExecuteResult.Saved:
                return RedirectToAction("my-work-is-done-here");

            case InputAddressViewModelExecuteResult.UserCorrectableError:
                // Something went wrong after we interacted with the 
                // datastore,  like a bogus Canadian postal code or 
                // something. Our view model will have updated the 
                // Error property, but we need to call TryUpdateModel() 
                // to get these new errors to get added to
                // the ModelState, since they were just added and the
                // model binder ran before this method even got called.
                TryUpdateModel(model);
                break;
        }

        // Redisplay the input form to the user, using that nifty
        // Html.ValidationMessage to convey model state errors
        return View(model);
    }
} 

```

可能看起来令人`switch`反感，但我认为这是有道理的：视图模型只是一个普通的旧类，对`Request`或`HttpContext`. 这使得视图模型的逻辑易于单独测试，而无需借助模拟，并且通过以在网站上有意义的方式解释模型的结果来让控制器代码进行*控制*——它可以重定向，它可以设置cookies等

的方法看起来像（有些`InputAddressViewModel`人`Execute()`会坚持将此代码放入控制器将调用的 Service 对象中，但对我来说，视图模型将对数据进行如此多的处理以使其适合它的真实模型把它放在这里很有意义）：

```
 public InputAddressViewModelExecuteResult Execute()
{
    InputAddressViewModelExecuteResult result;

    if (this.errors.Count > 0)
    {
        throw new InvalidOperationException(
            "Don't call me when I have errors");
    }

    // This is just my abstraction for clearly demarcating when
    // I have an open connection to a highly contentious resource,
    // like a database connection or a network share
    using (ConnectionScope cs = new ConnectionScope())
    {
        var scheme = new AddressSchemeRepository().Load(this.Country);
        var builder = new AddressBuilder(scheme)
             .WithCityAs(this.City)
             .WithStateOrProvinceAs(this.StateOrProvince);

        if (!builder.CanBuild())
        {
            this.errors.Add("Blah", builder.Error);
            result = new InputAddressViewModelExecuteResult()
            {
                Status = InputAddressViewModelExecuteStatus
                    .UserCorrectableError
            };
        }
        else
        {
            var address = builder.Build();
            // save the address or something...
            result = new InputAddressViewModelExecuteResult()
            {
                Status = InputAddressViewModelExecuteStatus.Success,
                Address = address
            };
        }        
    }

    return result;
} 

```

这有意义吗？这是最佳实践吗？我不知道; 这当然很冗长；这是我在过去两周思考这个问题后才想到的。我认为你会有*一些*重复的验证——你的 UI 不能是一个完全愚蠢的人，并且在将它们提交到你的模型/存储库/服务/任何东西之前不知道哪些字段是必需的——否则表单可以简单地生成自己。

我应该补充一点，这样做的动力是我一直有点讨厌微软的“设置一个属性 -> 验证一个属性”的心态，因为在现实中从来没有这样的工作。而且你*总是会*`IsValid`得到一个无效的对象，因为有人在去数据存储的路上忘记了打电话或类似的事情。因此，拥有视图模型的另一个原因是它会根据这种让步进行自我调整，因此我们可以很容易地从请求中提取项目、模型状态中的验证错误等大量 CRUD 工作，*而*不必损害模型的完整性本身。如果我`Address`手头有一个对象，我知道这很好。如果我`InputAddressViewModel`手头有一个对象，我知道我需要调用它的`Execute()`方法来获得那个金色`Address`目的。

我期待着阅读其他一些答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-01T14:56:51.470

经过大量研究，我想我得到了问题的答案，所以我决定分享。

验证码应该在模型上。根据“瘦控制器，胖模型”的想法，并考虑到模型会知道它需要验证什么。

例如，假设我决定`Foo.Models`在其他解决方案中使用，但我决定不使用任何其他项目并且验证在其他项目中。在这种情况下，我将不得不重新编码整个验证，这完全是浪费时间，对吧？

好的。验证码必须在模型中，但是应该在哪里调用呢？

必须在将其保存到数据库或文件的位置调用此验证。在提议的场景中，我将存储库视为域，那么我们应该考虑将验证放在更改保存之前[在此示例中，我使用的是实体框架，但这不是必需的，它只是为了显示]：

```
 public class UserRepository : IRepository<User>
{
    public void Create(User user)
    {
        user.Validate();

        var db = dbFooEntities();

        db.AddToUsers(user);
        db.SaveChanges();
    }
} 
```

根据 MS 的建议，模型验证应该引发异常，并且控制器必须使用发现的错误填充 ModelState [一旦我完成我的应用程序，我将尝试使用示例代码更新此答案]。

有了这个，我们就有了问题 #1 的答案。

关于登录验证的问题 #2 怎么样？

由于登录不是您保留数据的情况，因此验证应保留在服务上，因为在这种情况下登录是一项服务。

所以，这个问题的答案是：

1.  在从存储库调用的模型中**[**由控制器调用]

2.  在从控制器调用的服务中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-25T00:24:40.647

这很有趣，它对我决定在哪里进行验证有很大帮助。目前，我对实现“验证”方法的每个模型感觉最深刻，该方法是从存储库或服务调用的。

但是，如何验证所选用户名是否唯一？该代码应该在 User 模型中，还是在 UserService 类中，还是在 UserRepository 类中？

如果唯一性验证应该在 User 模型中，那么 User 模型应该可以访问 UserService 或 UserRepository 类。可以吗，还是违反任何“最佳实践”模式？

例如：

```
class User
{
  string Username { get; set; }
  string Email { get; set; }
  string Password { get; set; } // hashed and salted of course :)

  IEnumerable<RuleViolation> Validate()
  {
    List<RuleViolation> violations = new List<RuleViolation>();
    IUserService service = MyApplicationService.UserService; // MyApplicationService is a singleton class, especialy designed so that the User model can access application services

    // Username is required
    if ( string.IsNullOrEmpty(Username) )
       violations.Add(new RuleViolation("Username", "Username is required"));

    // Username must be unique: Should uniqueness be validated here?
    else if( !service.IsUsernameAvailable(Username)
       violations.Add(new RuleViolation("Username", "Username is already taken!"));

    // Validate email etc...

    return violations;
  }
}

interface IUserRepository
{
  void Save(User item);
}

interface IUserService
{
  IUserRepository UserRepository { get; }
  void Save(User item);
}

class UserService : IUserService
{
  public UserService(IUserRepository userRepository)
  {
     this.UserRepository = userRepository;
  }

  IUserRepository UserRepository { get; private set}

  public void Save(User user)
  {
     IEnumerable<RuleViolation> violations = user.Validate();

     if(violations.Count() > 0)
         throw new RuleViolationException(violations); // this will be catched by the Controller, which will copy the violations to the ModelState errors collection. But the question is, should we validat the user here, or in the UserRepository class?

      UserRepository.Save(user);
  }
}

class UserRepository : IUserRepository
{
   void Save(User item)
   {
      IEnumerable<RuleViolation> violations = user.Validate();

     if(violations.Count() > 0)
         throw new RuleViolationException(violations); // this will be catched by the Controller, which will copy the violations to the ModelState errors collection. But the question is, should we validate the user here, or in the UserService class?

      UserRepository.Save(user);

   }
} 
```

我的猜测是验证应该尽可能接近模型。所以我想说 UserRepository 应该是负责验证它被添加的模型的人。

对我来说最重要的问题是：用户模型是否应该知道 IUserService / IUserRepository 接口，以便它可以验证用户名的唯一性？或者 IUserService 服务是否应该验证唯一性？

我很好奇你对此的看法！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-25T00:45:05.613

我将 DataAnnotations 属性与 MVC 模型绑定器结合使用来进行验证，它非常棒。由于我将用户输入视为命令视图模型，因此它是保持域清洁不受外界关注的最干净的方法。

[http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html](http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html)

这也让我可以利用 LosTechies.com 的 AutoForm：

[http://www.lostechies.com/blogs/hex/archive/2009/06/17/opinionated-input-builders-part-8-the-auto-form.aspx](http://www.lostechies.com/blogs/hex/archive/2009/06/17/opinionated-input-builders-part-8-the-auto-form.aspx)

我希望 MVC 2、VS 2010 中的客户端验证工具也能利用这些属性。

因此，我现在以极快的速度开发出用户输入视图模型、命令，并且不仅将它们绑定到 AutoForm 功能，而且将它们绑定到我自己的自定义 UI 模板中，以从这些属性中获取 AutoGrid 和 AutoOutput。

没有什么比说：

```
Html.AutoForm(Model); 
```

或者

```
Html.AutoGrid(Model.Products); 
```

并以非常干燥和正交的方式获得验证和 html 生成。我的控制器很轻，我的域是原始的，并且我的时间通过在每个具有 FirstName 属性的对象上编写相同的 if(string.IsNullOrEmpty()) 方法来占用我的时间。

对我来说，这种方法并不像其他人所写的那样“哲学”。我试图对 MVC 开发非常务实，我从这些位中获得了巨大的收益。

# vb.net - Linq to Entities 过滤动态/强类型的实体

> ID：784363
> 
> 赞同：1
> 
> 时间：2009-04-24T02:57:22.850
> 
> 标签：vb.net, winforms, linq, linq-to-entities, strong-typing

我将 Winforms Grid 绑定到实体。（原因我这里就不赘述了，它必须绑定实体，而不是查询结果）代码如下：

```
grid.DataSource = myEntities.entityName.Where("it.field = " & field) 
```

它有效，但显然不是强类型。有没有办法使用强类型符号定义实体的 Where 子句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T02:59:44.890

您是否尝试过使用 lambda 表达式？

```
grid.DataSource = myEntities.Customers.Where(c => c.Name == "Bob"); 
```

或在 VB 中：

```
grid.DataSource = myEntities.Customers.Where(Function(c) c.Name = "Bob") 
```

如果它必须是动态的，那么您可能需要考虑构建自定义表达式树。有关表达式树基础知识的教程，请参阅此博客[http://blogs.msdn.com/charlie/archive/2008/01/31/expression-tree-basics.aspx](http://blogs.msdn.com/charlie/archive/2008/01/31/expression-tree-basics.aspx)

这个博客展示了一个很好的排序示例。 [http://weblogs.asp.net/davidfowler/archive/2008/12/11/dynamic-sorting-with-linq.aspx](http://weblogs.asp.net/davidfowler/archive/2008/12/11/dynamic-sorting-with-linq.aspx)

# cocoa - 核心动画...循环动画？

> ID：784365
> 
> 赞同：7
> 
> 时间：2009-04-24T02:58:15.610
> 
> 标签：cocoa, xcode, macos, core-animation

为了尽可能简单地表达我的问题，有没有办法创建一个核心动画序列来一遍又一遍地重复直到停止？

具体来说，我正在制作一个自定义类，我想要一个 -start 和 -stop 方法，这将导致它脉动。为脉冲编写动画代码不是问题，而是如何使其重复？

提前感谢您的任何答案！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-24T03:04:48.060

根据[文档](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimatingLayers.html#//apple_ref/doc/uid/TP40006085-SW8)，您可以通过创建一个非常大的动画来做到这一点`repeatCount`（代码摘自我链接到的文档）：

```
// create the animation that will handle the pulsing.
CABasicAnimation* pulseAnimation = [CABasicAnimation animation];

// over a one second duration, and run an infinite
// number of times
pulseAnimation.duration = 1.0;
pulseAnimation.repeatCount = HUGE_VALF;

// we want it to fade on, and fade off, so it needs to
// automatically autoreverse.. this causes the intensity
// input to go from 0 to 1 to 0
pulseAnimation.autoreverses = YES; 
```

**编辑**：OP询问如何停止动画。从文档的[下一段](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/CoreAnimation%5Fguide/Articles/AnimatingLayers.html#//apple_ref/doc/uid/TP40006085-SW9)：

> 您可以通过向目标层发送`addAnimation:forKey:`消息、将动画和标识符作为参数传递来启动显式动画。一旦添加到目标层，显式动画将一直运行，直到动画完成，或者从层中移除。用于向图层添加动画的标识符也用于通过调用来停止它`removeAnimationForKey:`。您可以通过向图层发送 `removeAllAnimations`消息来停止图层的所有动画。

# c++ - 为什么 gcov 报告一个使用良好的类的头文件覆盖率为 0%？

> ID：784379
> 
> 赞同：3
> 
> 时间：2009-04-24T03:12:12.830
> 
> 标签：c++, unit-testing, code-coverage, gcov

我第一次尝试使用[gcov](http://gcc.gnu.org/onlinedocs/gcc/Gcov.html)测量测试覆盖率。现在我已经过了最初的学习曲线，一切似乎都很顺利，除了一点点障碍。我希望这归结为我缺乏理解，所以我希望熟悉 gcov 的人可以解释发生了什么。

问题是我有一个特定的头文件显示 0% 的覆盖率。但是，该标头中*唯一*的内容是一个使用良好的类的类声明。

此外，该类的实现文件显示了 100% 的覆盖率，并且我可以指出 5 个不同的测试，我知道在这些测试中该类已成功实例化。

那么为什么 gcov 会报告课程的 0% 覆盖率，我该如何解决呢？

- 编辑 -

正如 lacqui 在下面指出的，如果标头没有可执行代码，则不应将其包含在覆盖率计算中。事实上，在我所有的类中，那个特定的头文件是 gcov 试图为其生成覆盖信息的唯一一个。

我已经与其他头文件进行了逐行比较，我发现最大的不同是这个特定的头文件没有显式的构造函数或析构函数，而其他头文件有。为了尽量减少文件之间的差异，我在问题类中添加了一个显式的 ctor 和 dtor。然而，这并没有什么不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T22:04:16.423

看来我已经解决了问题。正如我所料，这更像是一个缺乏经验的问题，而不是任何事情。

事实证明，gcov 只找到了可用跟踪文件的一个子集，因此只报告了总结果的一部分。查找并添加其余的跟踪文件解决了这个问题。

对于任何好奇的人，有问题的头文件仍然显示在输出中。事实上，所有其他头文件也是如此，即使它们不包含可执行代码。但是，它们都显示出 90+% 的覆盖率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-02-24T08:31:14.060

即使您没有显式创建一个，C++ 也会创建隐式析构函数。如果您在程序结束之前不销毁对象，则永远不会调用此隐式析构函数。gcov 通过在类声明行上标记一个“0”计数器来显示这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T03:45:21.270

您的头文件不包含已执行的代码。由于没有执行任何操作（类声明中没有执行的代码），因此无需测量任何内容，也无需涵盖任何内容。

# web - hostmonster 上的简单网站

> ID：784382
> 
> 赞同：0
> 
> 时间：2009-04-24T03:16:52.397
> 
> 标签：web, webpage, hostmonster

我在 hostmonster 注册并托管了一个域。我想创建一个简单的网站，但并不具备挑选看起来不错的颜色和背景的技能。有谁知道我可以修改和上传的任何模板创建站点。

在此先感谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T03:20:18.193

一个快速的谷歌将出现大量的好结果：

1.  [免费网站模板](http://www.freewebsitetemplates.com/)
2.  [免费网站模板](http://www.freesitetemplates.com/)
3.  [开源网页设计](http://www.oswd.org/)
4.  [开放网页设计](http://www.openwebdesign.org/)

# css - 为什么 CSS 样式仅在放置在我的表单中的样式标签中而不是在关联的 CSS 文件中时才会生效？

> ID：784384
> 
> 赞同：0
> 
> 时间：2009-04-24T03:20:10.143
> 
> 标签：css, ajax, webforms, ajaxcontroltoolkit

感谢 [this question][1] 关于重新定位 AJAX 工具包的 CalloutExtender 控件，以回答我在 Web 表单上定位 Validator CallOuts 的问题。

有人可以告诉我为什么将 CSS 类直接添加到我的网页中的`<style>`元素会产生预期的效果，但是当将相同的类添加到链接的 CSS 文件时，它们没有效果？

因此，添加：

```
<style>

.CustomValidator {position:relative;margin-left:-80px;}

.CustomValidator div {border:solid 1px Black;background-color:LemonChiffon; position:relative;}

.CustomValidator td {border:solid 1px Black;background-color:LemonChiffon;}

.CustomValidator .ajax__validatorcallout_popup_table {display:none;border:none;background-color:transparent;padding:0px;}

.CustomValidator .ajax__validatorcallout_popup_table_row {vertical-align:top;height:100%;background-color:transparent;padding:0px;}

.CustomValidator .ajax__validatorcallout_callout_cell {width:20px;height:100%;text-        align:right;vertical-align:top;border:none;background-color:transparent;padding:0px;}

.CustomValidator .ajax__validatorcallout_callout_table {height:100%;border:none;background-color:transparent;padding:0px;}

.CustomValidator .ajax__validatorcallout_callout_table_row {background-color:transparent;padding:0px;}

.CustomValidator .ajax__validatorcallout_callout_arrow_cell {padding:8px 0px 0px 0px;text-align:right;vertical-align:top;font-size:1px;border:none;background-color:transparent;}

.CustomValidator .ajax__validatorcallout_callout_arrow_cell .ajax__validatorcallout_innerdiv {font-size:1px;position:relative;left:1px;border-bottom:none;border-right:none;border-left:none;width:15px;background-color:transparent;padding:0px;}

.CustomValidator .ajax__validatorcallout_callout_arrow_cell .ajax__validatorcallout_innerdiv div {height:1px;overflow:hidden;border-top:none;border-bottom:none;border-right:none;padding:0px;margin-left:auto;}

.CustomValidator .ajax__validatorcallout_error_message_cell {font-family:Verdana;font-size:10px;padding:5px;border-right:none;border-left:none;width:100%;}

.CustomValidator .ajax__validatorcallout_icon_cell {width:20px;padding:5px;border-right:none;}

.CustomValidator .ajax__validatorcallout_close_button_cell {vertical-align:top;padding:0px;text-align:right;border-left:none;}

.CustomValidator .ajax__validatorcallout_close_button_cell .ajax__validatorcallout_innerdiv {border:none;text-align:center;width:10px;padding:2px;cursor:pointer;}

</style> 
```

直接到我的页面可以工作，但是如果我将类粘贴到我的 CSS 文件中（自然没有样式标签），它们似乎会被忽略，而其他样式表更改（对于其他页面元素）会被反映。

我已经到了从 CSS 文件中删除所有其他样式的地步，但仍然没有乐趣。对顶部 .CustomValidator 样式中“margin-left”的更改无效，而其他更改（如 .CustomValidator div 中的背景颜色）正常工作。

该字段在表格内并添加 margin-left=-80 t .CustomValidator 表格样式，在 CSS 文件中将调用向左移动，但不会很远并且移动是相同的，无论你做什么价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T03:39:06.290

确保您的链接标签上的语法正确，如下所示：

```
<link rel="stylesheet" type="text/css" href="css/main.css" /> 
```

我打错了一次，然后做了：

```
<link rel="stylesheet" type="text/css" href="css\main.css" /> 
```

它会在某些浏览器上呈现良好，但在其他浏览器上则完全不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T04:22:55.187

与亚历山大的上述有关...

我会尝试将样式表作为表单列表中的第一个和最后一个样式表（如果有多个）。同样，某些库或 javascript 可能会用自己的 css 覆盖更改。如果其他级联规则不应用最新规则，则在页面下方输入的规则将覆盖旧的/先前输入的规则（如果它们描述了相同的元素）。

你在使用萤火虫的 css 标签吗？确保正在加载也可能需要查看 net 选项卡，以查看它何时加载与其他 javascript 或 css 的关系，并将其与包含该文件的加载时间进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T03:23:03.257

也许您的浏览器缓存了您的样式表，因此没有显示您最近对其所做的任何更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T03:25:51.613

我正在寻找一个可能太明显的答案......你确定你包括CSS文件吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-24T04:11:01.753

实际上，CSS 遵循 DOM 中从上到下的级联 (duh) 继承模型，这使得它们进入 DOM 具有重要意义。根据您在 CSS 文件中放置它们的位置，可能会遵循使它们无效的规则。将它们直接放入您的代码中（我假设在使用地点附近）将确保 CSS 被解析为最后也是最重要的。我猜想在这种情况下，有关您的 CSS（外部）文件的大小和其中的复杂性的一些详细信息将是信息。我还会通过验证器弹出该 CSS 文件，以确保您没有任何陷阱（如 * 规则，需要小心处理）。

# jquery - JQuery .show 在 IE7 中不起作用

> ID：784391
> 
> 赞同：2
> 
> 时间：2009-04-24T03:28:54.867
> 
> 标签：jquery, internet-explorer-7

此 .show 和 .hide 在 Firefox 3 中效果很好，但在 IE 7 中效果不佳。当我在 IE 的列表中单击 < 时，跨度会隐藏，但在我再次选择介于之间时不会再次显示。

难道我做错了什么？

```
 <select id="lst" onchange="onselectchange();">
        <option>Between</option>
        <option>&lt;</option>
    </select>   
    &nbsp;&nbsp;
    <span id="spanAnd">And</span>

   <script type="text/javascript">
       function onselectchange() {
           var lst = document.getElementById('lst');
           var sp = document.getElementById('spanAnd');
           if (lst.value == 'Between') {
               $('#spanAnd').show();
           }
           else {
               $('#spanAnd').hide();
           }
       }
   </script> 
```

编辑：我尝试了 onclick 和 onchange。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T03:45:12.737

在页面加载时使用 jQuery 绑定方法...它将帮助您从演示逻辑中抽象出您的交互逻辑。

```
<script type="text/javascript">
    $(function() {
        $('#lst').bind('change',function() {
            var sp = $('#spanAnd');
            if($(this).val() == 'Between') {
               sp.show();
            } else {
               sp.hide();
            }
        });
    });
</script> 
```

这就像它得到的一样简单......

**注意：**我刚刚注意到您正在检查选项的*文本*，而不是选择框的值。坦率地说，我认为这很愚蠢，但如果你出于某种原因需要这样做，你可以这样做：

```
<script type="text/javascript">
    $(function() {
        $('#lst').bind('change',function() {
            var sp = $('#spanAnd');
            var selected_text = $(this).find('option:selected').html();
            // Possibly faster ways (thanks to bayard and bendewey):
            /*
            var selected_text = $("#lst option[value=" + $('#lst').val() + "]").text();
            // ... or ...
            var selected_text = $("option[value="+$('#lst').val()+"]",this).text();
            // ... or even... 
            var selected_text = $(this).children('option[value="+$('#lst').val()+"]").text();
            */ 
            if(selected_text == 'Between') {
               sp.show();
            } else {
               sp.hide();
            }
        });
    });
</script> 
```

要使我最初的建议生效，您需要将 HTML 更改为：

```
<select id="lst" onchange="onselectchange();">
    <option value="Between">Between</option>
    <option value="&lt;">&lt;</option>
</select> 
```

......正如我所说，这似乎有点像你想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T03:45:33.390

试试这个（把我在其他两个答案的评论中留下的一些东西放在一起）：

```
<script type="text/javascript">
$(function() {
  $("#lst").change(function() {
    if ($("#lst").val() == 'Between') {
      $('#spanAnd').show();
    }
    else {
      $('#spanAnd').hide();
    }
  })
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T03:37:49.290

尝试使用 jQuery 来查找和读取元素。像这样的东西：

```
 function onselectchange() {
       var lst = $('#lst');
       var sp = $('#spanAnd');
       if ($(lst).val() == 'Between') {
           $(sp).show();
       }
       else {
           $(sp).hide();
       }
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T04:18:23.937

你有很多问题。

不包装在 $(document).ready(); 执行脚本时可能不会加载元素。

使用以数字开头的变量名称。（风格不好，甚至不确定是否允许）

使用与元素 ID 对应的变量名称。

（旧版本的 IE 允许您使用 ID.whatever 而不调用 document.getElementById()）

混合 jQuery / 标准 DOM。

调用 val() 为您提供选项值属性，而不是选项的文本

```
 <select id="first">
        <option value="between">Between</option>
        <option>&lt;</option>
    </select>   

    <span id="spanAnd">And</span>

   <script type="text/javascript">
      $(document).ready(function(){

         $("#first").change(function(){   

            if ($("#first").val() == 'between') {
                $("#spanAnd").show();
            }   
            else {
               $("#spanAnd").hide();
            }   

        });
       });
   </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T03:36:56.157

*更新：* 如果这个答案离题了，请原谅我；我不是 jQuery 用户。这些是我的想法：

`lst.value`不是在 IE 中访问 select 元素中的元素的有效方法；至少，我从来没有见过它这样做（或者这是一个 jQuery 技巧？）

改为这样做：

```
if (lst.options[lst.selectedIndex].text == 'Between') { ... 
```

另请注意，我使用了“文本”属性，因为这是`<option>`标签之间的值。value 属性是应该存在于`<option`> 元素上的属性，例如：`<option value="0">Between</option>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T03:38:17.777

首先，用 jQuery 获取选中的选项文本是

```
$("#lst option:selected").text(); 
```

如果您需要更多说明，请参阅此[http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_get_the_text_value_of_a_selected_option.3F 。](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_get_the_text_value_of_a_selected_option.3F)

其次，要在没有图书馆的情况下获得它，

```
var lst = document.getElementById('lst');
var ind = lst.selectedIndex;

var text = lst.options[ind].text; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T03:43:51.787

这适用于 IE 和 Firefox

```
 <select id="lst" onchange="onselectchange();">
        <option>Between</option>
        <option>&lt;</option>
    </select>   

    <span id="spanAnd">And</span>

   <script type="text/javascript">
       function onselectchange() {
           if ($('#lst :selected').text() == "Between") {
               $('#spanAnd').show();
           }
           else {
               $('#spanAnd').hide();
           }
       }
   </script> 
```

# makefile - makefile 中的冒号和 $

> ID：784392
> 
> 赞同：12
> 
> 时间：2009-04-24T03:30:36.670
> 
> 标签：makefile

`TEMP0_FILES`下面计算什么？`SOURCE_FILES`可以等于多个源文件。请告诉我以下语法的目的`:.cpp=.o`

```
SOURCE_FILES = main.cpp

TEMP0_FILES = $(SOURCE_FILES:.cpp=.o) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-24T03:33:24.027

: 语法会导致对变量进行替换。在这种情况下，它将在 SOURCE_FILES 变量中的所有项目中将“.cpp”替换为“.o”。

TEMP0_FILES 将是“main.o”

如果 SOURCE_FILES 是“main.cpp otherfile.cpp otherfile2.cpp” TEMP0_FILES 将变为：“main.o otherfile.o otherfile2.o”等。

# .net - ClickOnce 证书已过期 - 未签署清单

> ID：784398
> 
> 赞同：8
> 
> 时间：2009-04-24T03:35:14.850
> 
> 标签：.net, vb.net, visual-studio-2008, clickonce

我有一个使用 ClickOnce 的分布式应用程序。我去进行更新并收到有关证书过期的错误。我注意到在签名选项卡上我可以取消选中对 ClickOnce 清单的签名。我这样做并成功发布了我的应用程序。它对前七个用户运行良好 - 但只是有一个用户变得可怕：

```
Manifest XML signature is not valid.

+ No signature was present in the subject. 
```

在接下来的 24 小时内，我将有几十个用户尝试。我祈祷我没有大问题。我已经阅读了大量关于 MS ClickOnce 和过期证书的问题/错误的阅读，我希望通过简单地不签名来避免它们。过期的证书只是最初设置 ClickOnce 时似乎创建的通用证书。从已签名的清单到未签名的清单是否存在问题？

遇到问题的用户甚至无法卸载并重新安装该应用程序。我们已经尝试了我能想到的一切——包括删除他的`User\Local Settings\Apps\2.0`文件夹。

另外，对于这个突然不能使用我们的应用程序的用户，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-26T23:33:23.783

过期证书问题已在 .NET 2 的一个服务包中得到修复。安装最新的框架 (3.5 SP1) 肯定会包含该修复。您可以切换到更新的证书并重新部署。

如果真的想不签名，我认为修复是相同的 - 确保您的用户拥有 .NET 3.5 SP1 并将其作为 ClickOnce 设置的先决条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-01T22:04:10.823

> makecert -sv MakarioUK.pvk -n "cn=MakarioUK" MakarioUK.cer -b 01/01/2011 -e 01/01/2050 -r

# c# - 使用 Spring.net 进行上下文绑定

> ID：784399
> 
> 赞同：0
> 
> 时间：2009-04-24T03:36:00.323
> 
> 标签：c#, dependency-injection, inversion-of-control, spring.net

[在ninject](http://dojo.ninject.org/Contextual%20Binding.ashx)等其他 IoC 容器中，您可以非常轻松地设置上下文绑定。我想知道 Spring.net IoC 容器是否支持上下文绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-27T15:21:38.823

您可以轻松地使用 Spring 表达式进行上下文绑定。代替

```
<object name="myotherobject" ... />

<object name="thisobject">
  <property name="TheService" ref="myotherobject" /> 
```

你可以写

```
<property name="TheService" expr="<whatever spring expression you like>" /> 
```

干杯，埃里希

# visual-studio-2005 - 我怎样才能避免一遍又一遍地重新输入同一行代码？

> ID：784402
> 
> 赞同：0
> 
> 时间：2009-04-24T03:36:39.137
> 
> 标签：visual-studio-2005, code-snippets

我想了解代码片段是否是我在这里寻找的。
我在重构过程中一遍又一遍地编写同一行代码。
无论如何我可以创建一个快捷方式来吐出我需要的一行代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T03:48:31.917

另一个更简单的选择是将您经常重复使用的代码块拖到[工具箱](http://dotnetslackers.com/Visual_Studio/re-136816_Visual_Studio_Tooltips_unplugged_Drag_and_Drop_code_artifacts_to_Toolbox_General_Tab.aspx)区域的常规选项卡上。你甚至可以用他们自己的标签名称和所有来组织它们。

[替代文字 http://blogs.telerik.com/Libraries/MetaBlog/WindowsLiveWriter-VisualStudioTooltipsunpluggedDragandDro_EF10-generalTabDragged.sflb](http://blogs.telerik.com/Libraries/MetaBlog/WindowsLiveWriter-VisualStudioTooltipsunpluggedDragandDro_EF10-generalTabDragged.sflb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T03:55:15.240

您是否在许多不同的日子里一遍又一遍地重复同一行代码？

或者您是否遇到这样的情况：同一行作为单个任务的一部分要多次编写，但今天的代码行与明天的代码行不同？

如果您有经常使用的同一行/代码块，那么片段是一种以可重用形式捕获它的好方法（恕我直言，比复制/粘贴更好，因为您可以对它们进行参数化）。

但是，如果您只是在寻找一种快速重复现在出现的同一行的方法，请查看 Visual Studio 记录击键的能力。

尝试这个：

*   将光标放在 C# 方法内的空白行上。
*   选择`Tools|Macros|Record Temporary Macro`（通常是`Control-Shift-R`）
*   键入“示例（）；” 然后按回车
*   选择`Tools|Macros|Stop Recording`

您刚刚创建了一个可以随时回放的临时宏 - 通常按键是`Control-Shift-P`.

这种技术的关键是宏会记录你所做的一切——通过一些练习，你可以记录对一行代码的编辑，并在其他行上重复这些编辑。

我过去曾用它来创建重复的代码块——比如将一组属性从一个对象分配给另一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T03:37:55.500

根据代码片段的不同，这行代码属于 util 方法而不是 copypasta 几乎总是有争议的。但除此之外，是的 - 片段可能是最好的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-27T19:41:41.070

与将代码片段添加到工具箱相比，代码片段的一个优点是您可以定义要更改的代码部分。我编写了一个代码片段，它生成了类似于以下代码的内容：

```
public class *className*Collection : List<*className*> 
```

我只输入了一次 className，它会自动填充到其他部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T03:42:03.943

代码片段听起来像是正确的方法，尽管您可以在 Visual Studio 中研究宏，它可能非常强大。

# x11 - 如何指定显示器？

> ID：784404
> 
> 赞同：72
> 
> 时间：2009-04-24T03:36:46.280
> 
> 标签：x11

当我通过 SSH 运行一些程序时，例如`firefox &`，我得到一个错误

```
Error: no display specified 
```

我想打开许多显示器，仍然显示`stdout`每个程序的。

**初始问题：**如何指定显示以获得多显示程序？

Pablo Santa Cruz 给了我以下代码作为解决方案。我不明白。

```
$ export DISPLAY=yourmachine.yourdomain.com:0.0

$ firefox & 
```

**`yourmachine`命令中的和是什么`yourdomain.com`？**

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2009-07-31T02:06:03.697

The way that X works is the same as the way any network program works. You have a server of some description (in this case, the X display server) which runs on a specific machine, and you have X clients (like firefox) that try to connect to that server to get their information displayed.

Often (on "home" machines), the client and server run on the same box and there's only one server, but X is powerful enough that this doesn't need to happen. It was built with the server/client separation built in from the start.

This allows you to do such wondrous things such as log on to your box (in text mode) halfway around the planet, tell it that the display server is the box you're currently on and, voila, the windows suddenly start appearing locally.

In order for a client to interact with a user, it needs to know how to *find* the server. There are a number of ways to do this. Many clients allow the `-display` or `--display`option to specify it:

```
xeyes -display paxbox1.paxco.com:0.0 
```

Many will use the `DISPLAY` environment variable if a display isn't specifically given. You can set this variable like any other:

```
DISPLAY=paxbox1.paxco.com:0.0; export DISPLAY # in .profile
export DISPLAY=paxbox1.paxco.com:0.0 # in your shell
DISPLAY=paxbox1.paxco.com:0.0 firefox & # for that command (shell permitting) 
```

The first part of the `DISPLAY` variable is just the address of the display server machine. It follows the same rule as any other IP address; it can be a resolvable DNS name (including `localhost`) or a specific IP address (such as 192.168.10.55).

The second part is X-specific. It gives the X "display" (X server) number and screen number to use. The first (display number) generally refers to a group of devices containing one or more screens but with a single keyboard and mouse (i.e., one input stream). The screen number generally gives the specific screen within that group.

An example would be:

```
+----------------------------------------+
|paxbox1.paxco.com|                      |
+-----------------+                      |
|                                        |
|  +----------+----+  +----------+----+  |
|  |Display :0|    |  |Display :1|    |  |
|  +----------+    |  +----------+    |  |
|  |               |  |               |  |
|  | +-----------+ |  |               |  |
|  | |Screen :0.0| |  |               |  |
|  | +-----------+ |  |               |  |
|  | +-----------+ |  |               |  |
|  | |Screen :0.1| |  |               |  |
|  | +-----------+ |  |               |  |
|  | +-----------+ |  | +-----------+ |  |
|  | |Screen :0.2| |  | |Screen :1.0| |  |
|  | +-----------+ |  | +-----------+ |  |
|  | +-----------+ |  | +-----------+ |  |
|  | |Screen :0.3| |  | |Screen :1.1| |  |
|  | +-----------+ |  | +-----------+ |  |
|  | +-----------+ |  | +-----------+ |  |
|  | | Keyboard  | |  | |  Keyboard | |  |
|  | +-----------+ |  | +-----------+ |  |
|  | +-----------+ |  | +-----------+ |  |
|  | |   Mouse   | |  | |   Mouse   | |  |
|  | +-----------+ |  | +-----------+ |  |
|  +---------------+  +---------------+  |
|                                        |
+----------------------------------------+ 
```

Here you have a single machine (`paxbox1.paxco.com`) with two display servers. The first has four screens and the second has two. The possibilities are then:

```
DISPLAY=paxbox1.paxco.com:0.0
DISPLAY=paxbox1.paxco.com:0.1
DISPLAY=paxbox1.paxco.com:0.2
DISPLAY=paxbox1.paxco.com:0.3
DISPLAY=paxbox1.paxco.com:1.0
DISPLAY=paxbox1.paxco.com:1.1 
```

depending on where you want your actual windows to appear and which input devices you want to use.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-24T03:39:27.103

```
$ export DISPLAY=yourmachine.yourdomain.com:0.0
$ firefox & 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-07-08T01:09:03.597

当您通过 SSH 连接到另一台机器时，您可以在 SSH 中启用 X-Forwarding，以便 X 窗口通过 SSH 隧道加密转发回您的机器。`-X`您可以通过附加到 ssh 命令行或`ForwardX11 yes`在 SSH 配置文件中进行设置来启用 X 转发。

要检查 X-Forwarding 是否设置成功（服务器可能不允许），只需尝试`echo $DISPLAY`输出类似`localhost:10.0`.

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-02-17T10:35:37.063

通过登录到您的服务器

```
ssh -X root@yourIP 
```

编辑 /etc/ssh/sshd_config 文件，并将这一行添加到其中。

```
X11UseLocalhost no 
```

重启sshd。对于 CentOS（[检查您的发行版](https://www.starnet.com/xwin32kb/how-do-i-restart-sshd-on-my-unix-system/)）

```
/sbin/service sshd restart 
```

检查你的显示器

```
echo $DISPLAY 
```

你应该看到这个

```
yourIP:10.0 
```

享受

```
firefox 
```

[了解更多信息](https://www.cyberciti.biz/faq/how-to-fix-x11-forwarding-request-failed-on-channel-0/)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-07-08T01:18:08.820

尝试

```
export DISPLAY=localhost:0.0 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-10-30T11:53:57.990

当通过 SSH 连接时，请不要尝试手动设置 $DISPLAY。
如果您连接 via`SSH -X`并且 $DISPLAY 保持为空，这通常意味着无法建立加密通道。

您很可能缺少包裹`xauth`或`xorg-x11-xauth`. 尝试使用以下命令将其安装在远程计算机上：

```
sudo apt-get install xauth 
```

或者

```
sudo apt-get install xorg-x11-xauth 
```

在那之后重新启动你的 SSH 连接。不要忘记使用`SSH -X`，以便将 X Window 输出转发到您的本地计算机。

现在`echo $DISPLAY`再次尝试查看 $DISPLAY 是否已被 SSH 恶魔自动设置。它应该向您显示带有 IP 地址和端口的行。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-12-31T04:31:51.037

我遇到了类似的问题，所以也许这个答案会对某人有所帮助。

错误的原因`Error: no display specified`是 Firefox 正在启动，但远程主机上没有运行 X 服务器 (GUI)。您可以使用 X11 转发在远程主机上运行 Firefox，但在本地主机上显示它。在 Mac OS X 上，您需要下载[**XQuartz**](http://xquartz.macosforge.org)才能使用 X11 转发。没有它，您将没有`$DISPLAY`变量集，因此如果您尝试 and `echo $DISPLAY`，它将是空白的。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-03-11T10:36:35.413

尝试安装**xorg-x11-xauth**软件包。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-12-14T14:58:08.980

我今天遇到了类似的问题。所以，这是一个简单的解决方案：在对机器进行 SSH 时，只需添加`Ctrl`- `Y`。

```
ssh user@ip_address -Y 
```

登录后，输入`firefox &`。你很高兴。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-27T10:09:38.203

即使我在 CentOS 6.8 中也面临同样的问题。

```
yum reinstall xorg* 
```

结束当前会话并在 mobiXterm 等工具中打开另一个会话。确保会话在工具中启用了 X11 转发。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-20T03:05:46.583

我通过vnc对X11了解的比较多。要指定显示以获得多显示程序，请导出 DISPLAY=IP:DisplayNum.ScreenNum

例如，

```
vncserver :2
vncserver -list
echo '$DISPLAY'=$DISPLAY 
export DISPLAY=:2  # export DISPLAY=IP:DisplayNum or export DISPLAY=:DisplayNum for localhost; So that can vnc connect and see the vnc desktop :2 if $DISPLAY is not :2.
echo '$DISPLAY'=$DISPLAY 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-25T08:01:27.913

我在输入 firefox 之前使用 xming 服务器使用以下命令 export DISPLAY=0:0

# iphone - iPhone 开发语言

> ID：784411
> 
> 赞同：6
> 
> 时间：2009-04-24T03:38:41.270
> 
> 标签：iphone, objective-c

可以使用哪些语言为 iPhone 开发？我知道，我知道：规范地说，Objective-C 是*唯一*一种可用于为 iPhone 开发的语言。但我正在吸引那些有创意的黑客。

除了可以用于为 iPhone 开发的 Objective-C 之外，还有**什么东西**- 无论多么 hacky 吗？（除了使用汇编或 C 来重新发明 Objective-C）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T03:47:26.710

您可以[将](http://arstechnica.com/open-source/news/2009/01/open-source-mono-framework-brings-c-to-iphone-and-wii.ars)Mono（C# 和 JavaScript）与[Unity 3D](http://unity3d.com/)游戏开发工具包一起使用。它使用提前编译来解决 iPhone 不支持动态生成代码的问题。

iPhone不需要越狱，但许可证不是免费的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T03:43:27.000

您可以使用[Telesphoreo](http://www.telesphoreo.org/)在 Python 中编写脚本。虽然它当然必须是越狱的手机。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-24T04:18:24.887

“规范地说”您可以使用 C 或 C++。Objective-C 不是唯一可能的语言，如果您愿意，您可以在 C++ 代码中间添加 Objective-C 调用。

但实际上你对 Objective-C 的恐惧是没有根据的，一旦你了解了它，它就是一门很棒的语言。并且很好地了解它确实有助于利用大量的基础课程。

如果您要转移到平台进行开发，请做对或不打扰。这是我在其他平台和其他语言上的座右铭。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T03:56:50.117

总是有可能开发专门针对 iPhone 的 Safari 的基于 WEB 的应用程序。在这种情况下，您可以使用任何您想要的网络编程语言。

从技术上讲，它不是原生 iPhone 应用程序，但您绝对可以通过这种方式利用 iPhone 的大部分功能。事实上，在 iPhone 的第一年，这是在其上运行应用程序的唯一方法（前提是您没有越狱您的手机）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-24T04:19:12.187

如果您有越狱设备，您可以使用 Java 甚至交叉编译 Android 应用程序。这是通过[XMLVM](http://www.xmlvm.org/overview/)完成的。作者是阿诺·普德。2008 年 10 月 14 日，他在[Google Tech Talk](http://www.youtube.com/watch?v=s8nMpi5-P-I)上就此事发表了演讲。

# java - 模拟在 Java 中按住的键

> ID：784414
> 
> 赞同：4
> 
> 时间：2009-04-24T03:39:08.133
> 
> 标签：java, awt, keypress, keyevent

我希望在 Java 中模拟短时间按住键盘键的动作。我希望下面的代码按住 A 键 5 秒钟，但它只按下一次（在记事本中测试时会产生一个“a”）。知道我是否需要使用其他东西，或者我只是在这里使用了错误的 awt.Robot 类吗？

```
Robot robot = null; 
robot = new Robot();
robot.keyPress(KeyEvent.VK_A);
Thread.sleep(5000);
robot.keyRelease(KeyEvent.VK_A); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T00:18:21.897

Thread.sleep() 停止当前线程（按住键的线程）执行。

如果您希望它在给定的时间内按住键，也许您应该在并行线程中运行它。

这是一个可以解决 Thread.sleep() 问题的建议（使用命令模式，因此您可以创建其他命令并随意交换它们）：

```
public class Main {

public static void main(String[] args) throws InterruptedException {
    final RobotCommand pressAKeyCommand = new PressAKeyCommand();
    Thread t = new Thread(new Runnable() {

        public void run() {
            pressAKeyCommand.execute();
        }
    });
    t.start();
    Thread.sleep(5000);
    pressAKeyCommand.stop();

  }
}

class PressAKeyCommand implements RobotCommand {

private volatile boolean isContinue = true;

public void execute() {
    try {
        Robot robot = new Robot();
        while (isContinue) {
            robot.keyPress(KeyEvent.VK_A);
        }
        robot.keyRelease(KeyEvent.VK_A);
    } catch (AWTException ex) {
        // Do something with Exception
    }
}

  public void stop() {
     isContinue = false;
  }
}

interface RobotCommand {

  void execute();

  void stop();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T00:30:10.700

一直按吗？

```
import java.awt.Robot;
import java.awt.event.KeyEvent;

public class PressAndHold { 
    public static void main( String [] args ) throws Exception { 
        Robot robot = new Robot();
        for( int i = 0 ; i < 10; i++ ) {
            robot.keyPress( KeyEvent.VK_A );
        }
    }
} 
```

我认为爱德华提供的答案会做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T03:57:24.267

java.lang.Robot 中没有 keyDown 事件。我在我的计算机上尝试了这个（在 linux 下的控制台上测试，而不是使用记事本），它成功了，产生了一串 a。也许这只是记事本的问题？

# c - 在C中反转字符串

> ID：784417
> 
> 赞同：38
> 
> 时间：2009-04-24T03:41:04.743
> 
> 标签：c, string, pointers

我开发了一个反向字符串程序。我想知道是否有更好的方法来做到这一点，以及我的代码是否有任何潜在问题。我希望练习 C 的一些高级功能。

```
char* reverse_string(char *str)
{
    char temp;
    size_t len = strlen(str) - 1;
    size_t i;
    size_t k = len;

    for(i = 0; i < len; i++)
    {
        temp = str[k];
        str[k] = str[i];
        str[i] = temp;
        k--;

        /* As 2 characters are changing place for each cycle of the loop
           only traverse half the array of characters */
        if(k == (len / 2))
        {
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-04-24T04:38:01.890

如果你想练习 C 的高级特性，指针呢？我们也可以加入宏和异或交换来获得乐趣！

```
#include <string.h> // for strlen()

// reverse the given null-terminated string in place
void inplace_reverse(char * str)
{
  if (str)
  {
    char * end = str + strlen(str) - 1;

    // swap the values in the two given variables
    // XXX: fails when a and b refer to same memory location
#   define XOR_SWAP(a,b) do\
    {\
      a ^= b;\
      b ^= a;\
      a ^= b;\
    } while (0)

    // walk inwards from both ends of the string, 
    // swapping until we get to the middle
    while (str < end)
    {
      XOR_SWAP(*str, *end);
      str++;
      end--;
    }
#   undef XOR_SWAP
  }
} 
```

**指针**（例如`char *`，从右到左读取为指向 a 的指针*）`char`*是 C 中的一种数据类型，用于引用另一个值在内存中的位置。在这种情况下，`char`存储 a 的位置。我们可以 通过在指针前面加上一个来*取消引用*`*`指针，这为我们提供了存储在该位置的值。所以存储在的`str`值为`*str`。

我们可以用指针做简单的算术运算。当我们增加（或减少）一个指针时，我们只需将它移动到该类型值的下一个（或上一个）内存位置。不同类型的递增指针可能会将指针移动不同的字节数，因为不同的值在 C 中具有不同的字节大小。

在这里，我们使用一个指针来引用第一个未处理 `char`的字符串 ( `str`)，另一个指针来引用最后一个 ( `end`)。我们交换它们的值（`*str`和`*end`），并将指针向内移动到字符串的中间。一旦`str >= end`，要么它们都指向同一个`char`，这意味着我们的原始字符串有一个奇数长度（并且中间`char`不需要反转），或者我们已经处理了所有内容。

为了进行交换，我定义了一个**宏**。宏是由 C 预处理器完成的文本替换。它们与函数有很大不同，了解它们的区别很重要。当您调用一个函数时，该函数对您给它的值的副本进行操作。当你调用一个宏时，它只是做一个文本替换——所以你给它的参数会被直接使用。

由于我只使用过`XOR_SWAP`一次宏，定义它可能有点过头了，但它更清楚地说明了我在做什么。在 C 预处理器展开宏后，while 循环如下所示：

```
 while (str < end)
    {
      do { *str ^= *end; *end ^= *str; *str ^= *end; } while (0);
      str++;
      end--;
    } 
```

请注意，宏参数每次在宏定义中使用时都会显示一次。这可能非常有用 - 但如果使用不当也会破坏您的代码。例如，如果我将递增/递减指令和宏调用压缩成一行，比如

```
 XOR_SWAP(*str++, *end--); 
```

然后这将扩展到

```
 do { *str++ ^= *end--; *end-- ^= *str++; *str++ ^= *end--; } while (0); 
```

它具有*三倍*的增量/减量操作，实际上并没有进行它应该做的交换。

当我们讨论这个主题时，您应该知道**xor** ( `^`) 的含义。这是一种基本的算术运算 - 就像加法、减法、乘法、除法一样，但小学通常不教它。它一点一点地组合两个整数 - 就像加法一样，但我们不关心结转。 `1^1 = 0`, `1^0 = 1`, `0^1 = 1`, `0^0 = 0`.

一个众所周知的技巧是使用 xor 交换两个值。这是因为 xor 的三个基本属性：`x ^ 0 = x`和`x ^ x = 0`对于`x ^ y = y ^ x`所有值`x`和`y`. 假设我们有两个变量`a`，`b`它们最初存储两个值 和。`v[a]``v[b]`

```
  // 最初：
  // a == v a 
  // b == v b
  一个^= b;
  // 现在：a == v a ^ v b
  乙^=一;
  // 现在： b == v b ^ (v a ^ v b )
  // == v a ^ (v b ^ v b )
  // == v a ^ 0
  // == v a
  一个^= b;
  // 现在：a == (v a ^ v b ) ^ v a 
  // == (v a ^ v a ) ^ v b 
  // == 0 ^ v b 
  // == v b

```

所以值被交换了。这确实有一个错误 - 何时`a`和`b`是相同的变量：

```
  // 最初：
  // a == v a
  一个^=一个；
  // 现在：a == v a ^ v a
  // == 0
  一个^=一个；
  // 现在：a == 0 ^ 0
  // == 0
  一个^=一个；
  // 现在：a == 0 ^ 0
  // == 0

```

由于 we `str < end`，这在上面的代码中从未发生过，所以我们没事。

虽然我们担心正确性，但我们应该检查我们的边缘情况。该`if (str)`行应该确保我们没有得到`NULL`字符串的指针。空字符串`""`呢？好吧`strlen("") == 0`，所以我们将初始化`end`为`str - 1`，这意味着`while (str < end)`条件永远不会为真，所以我们什么都不做。哪个是对的。

有一堆 C 可供探索。玩得开心！

**更新：** [mmw](https://stackoverflow.com/users/92202/mmw)提出了一个很好的观点，那就是你必须稍微小心如何调用它，因为它确实在原地运行。

```
 char stack_string[] = "This string is copied onto the stack.";
 inplace_reverse(stack_string); 
```

这很好用，因为`stack_string`它是一个数组，其内容被初始化为给定的字符串常量。然而

```
 char * string_literal = "This string is part of the executable.";
 inplace_reverse(string_literal); 
```

将导致您的代码在运行时燃烧并死亡。那是因为`string_literal`仅指向作为可执行文件的一部分存储的字符串 - 通常是操作系统不允许您编辑的内存。在一个更幸福的世界中，您的编译器会知道这一点，并在您尝试编译时咳出一个错误，告诉您`string_literal`必须是类型，`char const *`因为您无法修改内容。然而，这不是我的编译器所处的世界。

您可以尝试一些技巧来确保某些内存在堆栈或堆中（因此是可编辑的），但它们不一定是可移植的，而且可能非常难看。但是，我很乐意将此责任交给函数调用者。我已经告诉他们这个函数可以进行内存操作，他们有责任给我一个允许这样做的论点。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-04-24T03:56:58.590

只是重新安排和安全检查。我还删除了您未使用的返回类型。我认为这是一个安全且干净的方法：

```
#include <stdio.h>
#include <string.h>

void reverse_string(char *str)
{
    /* skip null */
    if (str == 0)
    {
        return;
    }

    /* skip empty string */
    if (*str == 0)
    {
        return;
    }

    /* get range */
    char *start = str;
    char *end = start + strlen(str) - 1; /* -1 for \0 */
    char temp;

    /* reverse */
    while (end > start)
    {
        /* swap */
        temp = *start;
        *start = *end;
        *end = temp;

        /* move */
        ++start;
        --end;
    }
}

int main(void)
{
    char s1[] = "Reverse me!";
    char s2[] = "abc";
    char s3[] = "ab";
    char s4[] = "a";
    char s5[] = "";

    reverse_string(0);

    reverse_string(s1);
    reverse_string(s2);
    reverse_string(s3);
    reverse_string(s4);
    reverse_string(s5);

    printf("%s\n", s1);
    printf("%s\n", s2);
    printf("%s\n", s3);
    printf("%s\n", s4);
    printf("%s\n", s5);

    return 0;
} 
```

进行了编辑，以便当 strlen 为 0 时 end 不会指向可能错误的内存位置。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-24T03:50:20.040

您可以将`(len/2)`测试放在 for 循环中：

```
for(i = 0,k=len-1 ; i < (len/2); i++,k--)
{
        temp = str[k];
        str[k] = str[i];
        str[i] = temp;

} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-04-24T04:52:08.113

这个完整的程序展示了我将如何做到这一点。请记住，我在写 C 时，你们中的大多数人都在你母亲的眼中闪闪发光，所以它是老派的，做的工作，长变量名称是为懦夫准备的。如果您愿意，请修复该问题，我对代码的正确性更感兴趣。

它处理 NULL、空字符串和所有字符串大小。我没有用最大大小的字符串（max（size_t））对其进行测试，但它应该可以工作，如果你要处理那么大的字符串，无论如何你都疯了:-)

```
#include <stdio.h>
#include <string.h>

char *revStr (char *str) {
    char tmp, *src, *dst;
    size_t len;
    if (str != NULL)
    {
        len = strlen (str);
        if (len > 1) {
            src = str;
            dst = src + len - 1;
            while (src < dst) {
                tmp = *src;
                *src++ = *dst;
                *dst-- = tmp;
            }
        }
    }
    return str;
}

char *str[] = {"", "a", "ab", "abc", "abcd", "abcde"};

int main(int argc, char *argv[]) {
    int i;
    char s[10000];
    for (i=0; i < sizeof(str)/sizeof(str[0]); i++) {
        strcpy (s, str[i]);
        printf ("'%s' -> '%s'\n", str[i], revStr(s));
    }
    return 0;
} 
```

它的输出是：

```
'' -> ''
'a' -> 'a'
'ab' -> 'ba'
'abc' -> 'cba'
'abcd' -> 'dcba'
'abcde' -> 'edcba' 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-04-24T03:44:46.403

试试这个：

```
reverse_string(NULL);
reverse_string(""); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-04-24T03:50:56.357

您可以更改 for 循环声明以使代码更短：

```
char* reverse_string(char *str)
{
    char temp;
    size_t len = strlen(str) - 1;
    size_t stop = len/2;
    size_t i,k;

    for(i = 0, k = len; i < stop; i++, k--)
    {
        temp = str[k];
        str[k] = str[i];
        str[i] = temp;
    }
    return str;
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-04-24T12:45:41.250

没有人再使用指针了吗？

```
void inplace_rev( char * s ) {
  char t, *e = s + strlen(s);
  while ( --e > s ) { t = *s;*s++=*e;*e=t; }
} 
```

编辑：抱歉，刚刚注意到上面的 XOR 示例......

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-04-07T03:18:53.287

```
void reverse(char *s)
{
  char *end,temp;
  end = s;
  while(*end != '\0'){
    end++;
  }
  end--;  //end points to last letter now
  for(;s<end;s++,end--){
    temp = *end;
    *end = *s;
    *s = temp; 
  }
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-24T03:50:41.367

我没有看到 return 语句，而且你正在更改输入字符串，这对程序员来说可能是个问题。您可能希望输入字符串是不可变的。

此外，这可能很挑剔，但 len/2 应该只计算一次，IMO。

除此之外，只要您处理 rossfabricant 提到的问题案例，它就会起作用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-12-03T20:02:01.543

```
rev {
int len = strlen(str)-1;
for ( int i =0; i< len/2 ; i++ ) {
        char t = str[i];
        str[i] = str[len-i];
        str[len-i] = t;
        }

} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-12-31T17:20:26.450

这是我的镜头。我避免仅使用标准`strcpy`模式进行交换：

```
char *string_reverse(char *dst, const char *src)
{
    if (src == NULL) return NULL;

    const char *src_start = src;
    char *dst_end = dst + strlen(src);
    *dst_end = '\0';

    while ((*--dst_end = *src_start++)) { ; }

    return dst;
} 
```

[这里是一个正在运行的例子](http://ideone.com/KREi2r)。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-04-28T00:47:44.547

```
bool reverse_string(char* str) {
    if(str == NULL){
        return false;
    }
    if(strlen(str) < 2){
        return false;
    }

    char* first = str;
    char* last = str + strlen(str) - 1; // Minus 1 accounts for Index offset
    char temp;

    do{
        temp = *first;
        *first = *last;
        *last = temp;
    }
    while (++first < --last); // Update Pointer Addresses and check for equality

    return true;
} 
```

该解决方案基于 GManNickG 的帖子并进行了一些修改。如果在 strlen 操作之前未评估 !str（对于 NULL ptr），则初始逻辑语句可能很危险。我的编译器不是这种情况。我想我会添加这段代码，因为它是 do-while 循环的一个很好的例子。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-07-15T23:07:22.933

```
/* Author: Siken Dongol */
#include <stdio.h>

int strLength(char *input) {
    int i = 0;
    while(input[i++]!='\0');
    return --i;
}

int main()
{
    char input[] = "Siken Man Singh Dongol";

    int len = strLength(input);
    char output[len];

    int index = 0;
    while(len >= 0) {
        output[index++] = input[--len];
    }

    printf("%s\n",input);
    printf("%s\n",output);
    return 0;
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-02-07T05:12:18.033

代码看起来不必要地复杂。这是我的版本：

```
void strrev(char* str) { 
    size_t len = strlen(str);
    char buf[len]; 

    for (size_t i = 0; i < len; i++) { 
        buf[i] = str[len - 1 - i]; 
    }; 

    for (size_t i = 0; i < len; i++) { 
        str[i] = buf[i]; 
    }
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-04-24T03:48:43.053

既然你说你想变得花哨，也许你会想使用[XOR swap](http://en.wikipedia.org/wiki/XOR_swap_algorithm)来交换你的角色。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-04-24T03:52:34.810

您应该简单地缩短循环，而不是中途中断。

```
size_t length = strlen(str);
size_t i;

for (i = 0; i < (length / 2); i++)
{
    char temp = str[length - i - 1];
    str[length - i - 1] = str[i];
    str[i] = temp;
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-12-13T18:08:53.257

```
#include <stdio.h>
#include <string.h>

int main() 
{
    char *data = "hello world";
    int length=strlen(data);
    char bytes[length];
    int n=0;
    while(n<=length)
    {
       bytes[n] = data[length-n-1];
       n++;
    }
    printf("%s\n", bytes);
    return 0;   
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-02-20T07:50:25.813

```
#include <stdio.h>

int main()    
{

    char string[100];
    int i;

    printf("Enter a string:\n");
    gets(string);
    printf("\n");
    for(i=strlen(string)-1;i>-1;i--)

    printf("%c",string[i]);
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-09-02T11:23:42.437

```
Here is my shot which will handle all the cases 
char *p ="KDLAKDADKADAD"
char p[] = "lammdlamldaldladadada"
also empty string 

#include<stdio.h>
#include<string.h>enter code here
#include<stdlib.h>
char *string_reverse(char *p);
int main()
{

        char *p = " Deepak@klkaldkaldkakdoroorerr";
        char *temp = string_reverse(p);
        printf("%s", temp);
}
char *  string_reverse( char *p )
{

        if(*p == '\0')
        {
                printf("No charecters are present \n");
                return 0;
        }
        int count = strlen(p)+1;
        int mid = strlen(p)/2;
        char *q  = (char *)malloc(count * sizeof(char));
        if( q )
        {
                strcpy(q,p);
                char *begin,*end,temp;
                begin = q ;
                end = q+strlen(p)-1  ;
                int i = 0;
                while( i < mid/2 )
                {
                        temp = *end;
                        *end = *begin;
                        *begin = temp;
                        begin++;
                        end--;
                        i++;
                }
                return q;
        }
        else
        {

                printf("Memory Not allocated ");
        }
        free(q);
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-03-27T22:29:10.097

我的两分钱：

```
/* Reverses n characters of a string and adds a '\0' at the end */
void strnrev (char *txt, size_t len) {
    size_t idx;
    for (idx = len >> 1; idx > 0; idx--) {
        txt[len] = txt[idx - 1];
        txt[idx - 1] = txt[len - idx];
        txt[len - idx] = txt[len];
    }
    txt[len] = '\0';
}

/* Reverses a null-terminated string */
void strrev (char *txt) {
    size_t len = 0;
    while (txt[len++]);
    strnrev(txt, --len);
} 
```

**测试#1** – `strrev()`:

```
char string[] = "Hello world!";
strrev(string);
printf("%s\n", string); // Displays "!dlrow olleH" 
```

**测试#2** – `strnrev()`:

```
char string[] = "Hello world!";
strnrev(string, 5);
printf("%s\n", string); // Displays "olleH" 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-03-10T16:08:53.040

简单的代码xD

```
void strrev (char s[]) {

int i;
int dim = strlen (s);
char l;

for (i = 0; i < dim / 2; i++) {
    l = s[i];
    s[i] = s[dim-i-1];
    s[dim-i-1] = l;
    }

} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-03-23T14:09:12.463

你可以试试这个指针算法：

```
void revString(char *s)
{
  char *e = s; while(*e){ e++; } e--;
  while(e > s){ *s ^= *e; *e ^= *s; *s++ ^= *e--; }
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-08-24T20:41:09.117

您实际上可以执行以下操作：

```
#include <string.h>

void reverse(char *);

int main(void){
 char name[7] = "walter";
 reverse(name);
 printf("%s", name);
}

void reverse(char *s) {
  size_t len = strlen(s);
  char *a = s;
  char *b = &s[(int)len - 1];
  char tmp;
  for (; a < b; ++a, --b) {
    tmp = *a;
    *a = *b;
    *b = tmp;
  }
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-10-14T18:58:02.327

制作了一个小程序来实现：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    char str[8192] = "string"; // string
    size_t len = strlen(str)-1; // get string length and reduce 1

    while(len+1 > 0) // Loop for every character on string
    {
        printf("%c",str[len--]); // Print string reversed and reducing len by one
    }
    return 0; // Quit program

} 
```

解释：
我们取字符串的长度，然后从最后一个位置开始循环，直到到达索引 0 退出程序。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-05-28T14:10:37.580

您可以通过很少的步骤在指针的帮助下轻松完成：

1.  首先指向一个指向字符串最后一个字符的指针

2.  逆序读取指针指向的内容

    #include <stdio.h> #include <string.h>

    ```
     int main()
         {
             char str[] = "This is an example";
             char *p = str + strlen(str); /* point to the end of the string */
             p--; /* points to the last char of the string */

             for (int i = 0; i < strlen(str); i++, p--)
             {
                printf("%c", *p);
             }

             return 0;
         } 
    ```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-12-30T08:22:58.867

这是一个很好的问题[ant2009](https://stackoverflow.com/users/70942/ant2009)。您可以使用独立函数来反转字符串。代码是...

```
#include <stdio.h>
#define MAX_CHARACTERS 99

int main( void );
int strlen( char __str );

int main() {
    char *str[ MAX_CHARACTERS ];
    char *new_string[ MAX_CHARACTERS ];
    int i, j;

    printf( "enter string: " );
    gets( *str );

    for( i = 0; j = ( strlen( *str ) - 1 ); i < strlen( *str ), j > -1; i++, j-- ) {
        *str[ i ] = *new_string[ j ];
    }
    printf( "Reverse string is: %s", *new_string" );
    return ( 0 );
}

int strlen( char __str[] ) {
    int count;
    for( int i = 0; __str[ i ] != '\0'; i++ ) {
         ++count;
    }
    return ( count );
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-10-05T00:12:24.290

最简单的方法，就用这个功能，看用法。功能 ：

```
char *reversed(char *string) {
    int len = strlen(string);
    char newstr[256];
    for (int i = 0; i <= len-1; i++) {
        newstr[i] = string[(len-1)-i];
    }
    string = newstr;
    return string;
} 
```

用法 ：

```
#include <stdio.h>
#include <string.h>

char *reversed(char *string);
int main()
{
    char test[] = "test";
    char *res = reversed(test);
    printf("%s\n", res);

    return 0;
}
char *reversed(char *string) {
    int len = strlen(string);
    char newstr[256];
    for (int i = 0; i <= len-1; i++) {
        newstr[i] = string[(len-1)-i];
    }
    string = newstr;
    return string;
} 
```

不要忘记将其分配给指针。 `char *res = reversed(test)`

# python - 用于 Python 的浏览器

> ID：784418
> 
> 赞同：1
> 
> 时间：2009-04-24T03:41:05.880
> 
> 标签：python, browscap

我环顾四周，找不到与 browscap 等效的 Python（我在 PHP 中使用它来检测给定的用户代理字符串是什么浏览器。

我希望我不必自己写.. :P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T06:12:36.593

看看这个，它应该做你想做的：[browscap.ini-parser](http://www.djangosnippets.org/snippets/267/)。

请注意，即使它位于 Django Snippets 网站上，它也是独立的，您可以在任何设置下使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-04T21:00:34.387

签出 pybrowscap 库，它相当于 php get_browser ：[http ://pypi.python.org/pypi/pybrowscap/](http://pypi.python.org/pypi/pybrowscap/)

# sql - 从 DBIx::Class 中的多个表中选择

> ID：784438
> 
> 赞同：3
> 
> 时间：2009-04-24T03:49:01.183
> 
> 标签：sql, perl, dbix-class

我有以下 DBIx::Class 代码：

```
my $where = 'me.loginid = ? AND me.code = ?';
my @bind  = ( $loginID, $code );
my $tip_signals = $bom_schema->resultset('Table1')->search_literal(
    $where, @bind,
    {
        join => 'table2',
        group_by => [ 'me.id' ],
        '+select' => [ {'count' => '*'}, 'table2.id' ],
        '+as'     => [ 'Count', 'ID' ],
    }); 
```

下面的 SQL 语句是根据上面的 DBIx::Class 代码生成的：

```
SELECT me.id, me.loginid, me.tipster_date, me.code, me.short_code_without_payout, COUNT( * ), table2.id 

FROM table1 me LEFT JOIN table2 table2 ON table2.tip_signals_id = me.id 

WHERE ( 
me.loginid = 'yccheok' AND me.code = 'ALIBABA_CODE' 
) 

GROUP BY me.id 
```

现在，我希望从 4 个表中获得结果。我手动编写自己的 SQL 代码：

```
SELECT me.id, me.loginid, me.tipster_date, me.code, me.short_code_without_payout, COUNT( * ), table2.id 

FROM table1 me, table2, referrers, affiliates 

WHERE ( 
me.loginid = 'yccheok' AND me.code = 'ALIBABA_CODE'

and table2.tip_signals_id = me.id
and referrers.affiliates_id = affiliates.id
and affiliates.loginid = me.loginid
and referrers.loginid = table2.loginid
) 

GROUP BY me.id 
```

我尝试将上面的 SQL 语句转换为 DBIx::Class，如下所示：

```
my $where = 'me.loginid = ? AND me.code = ? AND table2.tip_signals_id = me.id AND referrers.affiliates_id = affiliates.id AND affiliates.loginid = me.loginid AND referrers.loginid = table2.loginid';
my @bind  = ( $loginID, $code );
my $tip_signals = $bom_schema->resultset('Table1')->search_literal(
    $where, @bind,
    {
        from        =>  [ {table2=>'table2'}, {referrers=>'referrers'}, {affiliates=>'affiliates'} ],
        group_by    =>  [ 'me.id' ],
        '+select'   =>  [ {'count' => '*'}, 'table2.id' ],
        '+as'       =>  [ 'Count', 'ID' ],
    }); 
```

当我尝试在*resultset上执行**next*时，出现异常“Not an ARRAY reference” 。请注意，我不允许在 DBIx::Class中使用*join ，作为**引用者*和*附属*表，与 *table*** 表没有关系。

 ***如何让 DBIx::Class 代码等效于 SQL 多选表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T12:49:47.280

如果您在 table1/2 和推荐人/附属机构之间没有关系，那么为什么不在您的 DBIx::Class 结果类中创建它们呢？

你没有粘贴那些，所以我在这里猜测，你想在你的 Table1 类中添加这样的东西：

```
__PACKAGE__->has_many('affiliates', 'MyDB::Schema::Affiliate', 'loginid'); 
```

在表 2 中：

```
__PACKAGE__->has_many('referrers', 'MyDB::Schema::Referrer', 'loginid'); 
```

修复这些类名以匹配您的实际类。

我猜你使用 Schema::Loader 来加载你的表，它没有为你创建这些表，因为你的数据库没有设置适当的外键？DBIx::Class 不在乎，你可以很高兴地在其中建立更多的关系，这不是真正的 FK，它会为你创建你需要的连接。

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-26T16:15:55.520

我可以简单地创建一个视图来映射那些 WHERE 和 FROM 语句，而不是在 DBIx 中手动编码复杂的查询。然后，只需使用单行 DBIx ：

```
$bom_schema->resultset('View_Of_Table1_And_Table2_And_Referrers_And_Affiliates'); 
```

# winforms - 如何在未显示的选项卡上访问绑定控件的值以进行验证？

> ID：784440
> 
> 赞同：1
> 
> 时间：2009-04-24T03:49:48.543
> 
> 标签：winforms, validation, data-binding, tabcontrol

我创建了一个包含 3 个选项卡的对话框。选项卡 1 和 2 上的控件使用`Validating()`事件进行验证。用户将主要处理选项卡 1 和 3，除非必要，否则从不显示选项卡 2。选项卡 1 和 2 上的所有控件都绑定到 BindingSource 对象。

根据我的观察，在选项卡显示之前，绑定控件似乎没有在选项卡 2 上初始化。因此，验证整个表单会失败，因为这些控件没有任何价值。TextBox.Text 值是第`""`一次`Validating()`调用的时间，并且是`somevalue`在我查看选项卡之后。

我试图从事件中“预初始化”选项卡 2 上的控件`Load`（例如`TextBox.Value = 'test';`，但在调用 Validating() 之前发现该值已被清除。

我曾想过检查 BindingSource.Current 中的值，但这个特定的解决方案有多个缺陷，特别是 BindingSource 包含未经验证的值。

我需要采取哪些步骤：

*   在控件显示之前对其进行初始化
*   获取正确的值（控件或 BindingSource）`Validation()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-27T02:39:18.237

我通过以编程方式更改为 Tab2 然后切换回 Tab1 解决了这个问题

```
 foreach (TabPage tab in tabControl.TabPages)
        {
            tab.Visible = true;
        }
        tabControl.SelectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T02:31:19.290

虽然我找不到任何权威来源来确认，但似乎绑定控件直到它们可见才被初始化。通过隐藏文本框，我能够在默认显示的选项卡上确认类似的行为。控件的`.Text`值`""`直到控件可见，此时该值填充了我的预期值。

微软论坛上的一个[问题](http://social.microsoft.com/Forums/it-IT/netfxbcl/thread/2a04af52-7eb0-4830-b67f-3343bf46685e)进一步证实了我的经历：

> 这是 .NET 数据绑定的工作方式：在控件首次变为可见之前，绑定是无效的。...除了使控件暂时可见之外，没有其他解决方法。

# c++ - 简单地调用 Pitch() 和 Yaw() 怎么会导致相机最终 Roll()？

> ID：784445
> 
> 赞同：2
> 
> 时间：2009-04-24T03:50:55.920
> 
> 标签：c++, opengl, camera, glut

我正在编写一个基本的 OpenGL 游戏，并且我有一些代码可以在移动相机方面处理鼠标。

我正在使用以下方法：

```
int windowWidth = 640;
int windowHeight = 480;

int oldMouseX = -1;
int oldMouseY = -1;

void mousePassiveHandler(int x, int y)
{
    int snapThreshold = 50;

    if (oldMouseX != -1 && oldMouseY != -1)
    {
        cam.yaw((x - oldMouseX)/10.0);
        cam.pitch((y - oldMouseY)/10.0);

        oldMouseX = x;
        oldMouseY = y;

        if ((fabs(x - (windowWidth / 2)) > snapThreshold) || (fabs(y - (windowHeight / 2)) > snapThreshold))
        {
            oldMouseX = windowWidth / 2;
            oldMouseY = windowHeight / 2;
            glutWarpPointer(windowWidth / 2, windowHeight / 2);
        }
    }
    else
    {
        oldMouseX = windowWidth / 2;
        oldMouseY = windowHeight / 2;
        glutWarpPointer(windowWidth / 2, windowHeight / 2);
    }

    glutPostRedisplay();

} 
```

但是，环顾四周后，您会发现相机开始“滚动”（旋转）。因为我只打电话给 Pitch 和 Yaw，我不明白这是怎么可能的。

这是我用于我的相机类的代码：http: [//pastebin.com/m20d2b01e](http://pastebin.com/m20d2b01e)

据我所知，我的相机“滚动”不应该发生。它应该简单地上下俯仰或左右偏航。不滚动。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-24T04:09:05.423

恭喜——你发现了李群理论！

是的，这是可能的。一系列转换的结果取决于它们的执行顺序。做一个俯仰然后偏航不同于做一个偏航，然后是俯仰。事实上，在无限小的偏航和俯仰范围内，差异相当于一个纯粹的横滚。一般情况要复杂一些。

（物理学家称其为“旋转群的交换关系”。）

如果您熟悉旋转矩阵，则可以很容易地计算出来。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T04:10:27.980

如果您还没有这样做，您可能需要使用[四元数来组成旋转。](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation)这避免了在通过围绕 3 个轴旋转来定位相机时可能会遇到的[云台锁定问题。](http://en.wikipedia.org/wiki/Gimbal_lock)

[以下是它们之间的转换方法。](http://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-24T03:57:57.853

好吧，如果你开始看向地平线，向上俯仰 90 度，然后向左偏航 90 度，然后向下俯仰 90 度，你会看到与开始时相同的方向，但地平线将是垂直的（好像你向左滚了 90 度）。

**编辑**：我认为问题在于，如果将相机视为飞机，偏航/俯仰/滚动将是合适的。您可能想要做的是将其视为球体中的一个点，跟踪您将相机指向球体的哪个位置。使用球坐标来跟踪 theta（纬度）和 phi（经度），而不是偏航/俯仰。它们可能听起来很相似，但请考虑相机直接指向上方的极端情况。使用偏航/俯仰，您仍然可以从该笔直方向自由调整偏航和俯仰。使用 theta/phi，您只能向下调整 theta，无论您调整多少 phi，减小 theta 仍然会给您一个平行于地平线的相机。这就是 FPS 相机的工作方式（你不能往下看太远以至于你在后面看）。

**编辑 2**：查看您链接到的相机代码，您想要使用**`rotLati(float angle)`**and**`rotLongi(float angle)`**功能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-24T04:14:24.897

从数学上讲，其原因是 3D 空间中的旋转不会通勤。这意味着 pitch() 后跟 yaw() 与 yaw() 后跟 pitch() 不一样，但事实的结果是这三种旋转是密不可分的，你不能执行任何其中两个没有得到第三个。换句话说，任何 pitch()es 和 yaw()s 序​​列都会随着时间的推移产生明显的 roll() 效果，除非序列的后半部分与前半部分完全相反。（这涉及到很多相当复杂的数学，但细节并不是特别相关）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-24T04:02:18.950

俯仰/偏航/滚动都与您的车辆方向有关。当你向上/向下俯仰时，你会改变你的偏航轴。同样，当你偏航时，你会改变你的俯仰轴。因此，可以通过组合以及俯仰和偏航操作以类似于滚动操作的方式改变您的方向。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-24T04:08:15.410

我相信这种情况被称为[Gimbal Lock](http://en.wikipedia.org/wiki/Gimbal_lock) - 在维基百科页面上有一个带有插图的示例。

# java - Java socket程序无法一次读取大量数据

> ID：784451
> 
> 赞同：-1
> 
> 时间：2009-04-24T03:55:29.763
> 
> 标签：java, sockets

`read()`我已经使用and编写了一个套接字程序`write()`。每当我想使用`write()`. 我无法一次接收数据。意味着我的数据分为两部分，那么如何发送大量数据？或一次读取数据？

我也无法知道这是否是问题`write()`或`read()`

谢谢巴皮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T06:17:49.780

read() 只保证读取 1 个字节，除此之外的任何内容都是额外的。

处理此问题的常用方法是使用 DataOutputStream 和 DataInputStream 发送所需的“块”大小。

```
public static void write(DataOutput out, byte[] bytes) throws IOException {
    out.writeInt(bytes.length);
    out.write(bytes);
}

public static byte[] read(DataInput in) throws IOException {
    int len = in.readInt();
    byte[] bytes = new byte[len];
    in.readFully(bytes);
    return bytes;
} 
```

# vim - 我在哪里可以获得 Falcon 编程语言的 vim 语法文件？

> ID：784458
> 
> 赞同：1
> 
> 时间：2009-04-24T03:59:21.203
> 
> 标签：vim, syntax-highlighting, falcon

我今天刚刚发现了[Falcon 编程语言](http://falconpl.org/index.ftd?page_id=Home)，并想尝试一下。因为很新，所以没有ide。这不是问题，因为我可以使用 Vim。如果有 Falcon 的 Vim 语法文件会很有帮助，但我似乎找不到。有人可以指出我的 Falcon 的 Vim 语法文件吗？如果没有，我真的可以使用详尽的教程来为 Vim 创建自己的语法文件。我在 Windows 上，并且是一个非常基本的 Vim 用户，因此将非常感谢特定于该操作系统的逐步操作。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T16:20:40.003

查看：

svn://falconpl.org/falcon/docs/trunk/SyntaxHilight

它有点过时了，但应该是可行的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T04:22:37.233

据我所知（和谷歌），似乎没有一个。您可以尝试编写一个，但请注意，它并不像听起来那么简单。当然，如果您只想突出显示语法关键字，这并不是什么大问题，但是对某些东西（并且只有那个东西）进行正则表达式可能会有点困难。

我不熟悉那种语言，但尝试从与其相对相似的语言中找到一个语法文件，至少通过“结构”，然后从修改它开始。

对于正则表达式引用，除了 vim 的帮助之外，我还推荐“开始正则表达式”和“正则表达式口袋参考”。（它有一个很好的比较功能，其中还包括 vim 的正则表达式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T04:13:43.527

查看 Vim 文档，它有一整节关于[语法高亮](http://www.vim.org/htmldoc/syntax.html)文件以及如何编写自己的[自定义语法文件](http://www.vim.org/htmldoc/syntax.html#mysyntaxfile)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-29T20:06:34.490

Steve Oliver 为 Falcon 编写了一个 VIM 语法文件。它位于此处：[http ://www.vim.org/scripts/script.php?script_id=2745](http://www.vim.org/scripts/script.php?script_id=2745)

# c++ - makefile 没有构建程序的更新部分 - C++

> ID：784469
> 
> 赞同：2
> 
> 时间：2009-04-24T04:03:52.050
> 
> 标签：c++, makefile

我是makefile的新手，并面临一些问题。我创建了以下生成文件。它工作正常。但是当我修改*main.cpp*并运行*make*时，它​​说*“一切都是最新的”*。我需要做一个*make clean*并再次运行 make，一切都会工作。

看起来这个makefile有一些问题，我不知道哪里出了问题。谁能帮我找出这个makefile中的错误在哪里以及为什么它没有构建更改的文件？

```
#Main makefile which does the build

CFLAGS =
CC = g++
PROG = fooexe

#each module will append the source files to here
SRC :=

#including the description
include foo/module.mk

OBJ := $(patsubst %.cpp, %.o, $(filter %.cpp,$(SRC))) main.o

#linking the program
fooexe: $(OBJ)
    $(CC) -o $(PROG) $(OBJ)

%.o:
    $(CC) -c $(SRC) -o $(patsubst %.cpp, %.o, $(filter %.cpp,$(SRC)))

main.o:
    $(CC) -c main.cpp

depend:
    makedepend -- $(CFLAGS) -- $(SRC)

.PHONY:clean
clean:
    find . -name "*.o" | xargs rm -vf
    rm -vf fooexe 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T04:12:10.550

通常 .o 文件需要依赖于相应的 .cpp 文件。我认为这是语法，但不是 100% 肯定：

```
%.o : %.cpp
    $(CC) ...

main.o : main.cpp
    $(CC) ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-24T05:32:20.590

```
%.o:
    $(CC) -c $(SRC) -o $(patsubst %.cpp, %.o, $(filter %.cpp,$(SRC))) 
```

这是一个模式规则，它告诉 make，“只要需要`.o`文件但不存在，就在 .`$(CC)`中的所有`.cpp`文件上运行`$(SRC)`。” 它不会在`.cpp`文件更改时重新编译文件，因为它没有列出任何先决条件。如果所需的`.o`文件已经存在，则 make 没有理由执行该`$(CC)`命令。

如果您将第一行更改`%.o: %.cpp`为 Andy White 建议的那样，那么更新后的规则现在会告诉 make，“只要需要 .o 文件并且不存在或比相应`.cpp`文件旧，就在 .o`$(CC)`中的所有`.cpp`文件上运行`$(SRC)`。”

This is better, but there's still a problem: the updated rule always compiles all of your `.cpp` files, even the ones that are are up to date. To fix this, the command part of the rule needs to recompile the correct `.cpp` file into the correct `.o` file. You can do this using automatic variables such as `$<` (1st prerequisite) and `$@` (target):

```
%.o: %.cpp
    $(CC) -c $< -o $@ 
```

The [GNU Make Manual](http://www.gnu.org/software/make/manual/make.html#Pattern-Examples) has more explanation and details.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T04:20:56.970

您使用 main.cpp -- main.o -- 的规则没有指定 main.o 依赖的任何内容。您至少需要该行是“main.o：main.cpp”，以及 main.o 依赖的任何其他源文件。

我看到你有一个使用 makedepend 的依赖规则；你使用正确吗？我自己没有使用过它，但我总是用以下内容结束我的 makefile：

```
depend:
    mv Makefile Makefile.bak
    sed '/^#DO NOT DELETE THIS LINE$$/,$$d' Makefile.bak > Makefile
    echo '#DO NOT DELETE THIS LINE' >> Makefile
    echo '#' >> Makefile
    $(CC) -MM *.c >> Makefile

#
#DO NOT DELETE THIS LINE
#
```

然后，当我运行“makedepend”时，我得到如下行：

```
main.o: main.c main.h otherstuff.h
otherstuff.o: otherstuff.c otherstuff.h
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T04:09:49.337

打开调试运行你的make，看看你得到了什么。

Make 是一个非常古老的代码，它可以肯定它正在做它认为你想要的事情。

您使用 find 来查找 .o 文件的事实让我认为您在真实的东西中有子目录；如果是这样，您需要确保 Make 可以看到它们。

# storage - 存储脚本的“最佳”方式是什么？

> ID：784486
> 
> 赞同：3
> 
> 时间：2009-04-24T04:10:32.473
> 
> 标签：storage, scripting

我有数百个用于测试组件的脚本。这些脚本中的每一个都包含一组下标和单独的记录。

下标可以在多个 TC_Level 脚本中使用，甚至可以在其他下标中使用。
每个脚本都有一个唯一的名称。

例子：

```
TC_1
  |  
 (1) Subscript_a  
  |  |  
  | (1) Record  i
  |  |  
  | (2) Record  ii
  |  
 (2) Subscript_b  
  |  |  
  | (1) Subscript_c
  |  |  |
  |  | (1) Record_i  
  |  |  |  
  |  | (2) Record_iii  
  |  |
  | (2) Record_ii  
  |  
 (3) Record_iv  
  |  
 (4) Record_v  
  |  
  ... 
```

我想

*   将我的脚本存储在容器中。
*   将它们读入我的脚本引擎中的树视图。

我应该使用什么类型的容器？

可能的容器（但不限于）：目录、数据库、XML 文件、电子表格、平面文件……

请在提出建议时，还包括一个简短的存储结构示例（不一定是代码）。

我已经看到填充树视图表单数据库的 c# 示例，但我认为我不能使用对 parentID 的引用（用于下标），因为下标可以有多个 parentID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T04:21:53.723

我建议依靠目录结构+版本控制系统。

它有很多优点：

*   版本控制可帮助您保持修订并提高安全性
*   无需任何花哨的工具，您仍然可以访问它
*   这很简单
*   它非常快

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T04:52:44.727

我同意版本控制系统和文件系统是理想的。

但是，我还建议您分解每个测试用例，以包含它需要的每个附加数据的目录。大多数现代 dat 版本控制系统都支持链接的概念，这将是它们的理想用途，以使一切都可以长期维护。正如另一个答案所提到的，这些也可以很好地与 tar 配合使用。

```
 Shared
 |    |
 |    Subscript_a  
 |    |
 |    Subscript_b
 |    |  
 |    Subscript_c  
 Test_Case_1
 |         |
 |         SUBSCRIPT_B_DIRECTORY
 |                             |
 |                             link to ../../Shared/Subscript_b
 |                             |
 |                             SUBSCRIPT_C_DIRECTORY
 |                                                 |
 |                                                 link to ../../../../Shared/scri_c
 Test_Case_2
 |         |
 |         SUBSCRIPT_C_DIRECTORY
 |                             |
 |                             link to ../../Shared/Subscript_c
 Test_Case_3
           |
           SUBSCRIPT_A_DIRECTORY
           |                   |
           |                   link to ../../Shared/Subscript_a
           SUBSCRIPT_B_DIRECTORY
                               |
                               link to ../../Shared/Subscript_b 
```

这同样适用于记录。设置起来很痛苦，但我相信它会给你带来灵活性和可维护性，从长远来看，能够混合和匹配你的脚本和 Test_Cases。您将不得不处理额外的间接级别，并且一些环境变量（例如 $SHAREDTOP）可以将您的脚本隔离开来，以免被移动。如果您是 Windows，您将只能从良好的版本控制系统中获得可链接功能。再一次， tar 甚至在 UNIX 机器上就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T04:28:45.750

我还建议只使用具有一致命名方案的目录结构。如果您需要打包所有文件，您可以只使用“tar”（或其他一些归档/zip 工具）。

# windows-vista - Windows Vista 中 %allusersprofile% 文件夹的位置？

> ID：784487
> 
> 赞同：3
> 
> 时间：2009-04-24T04:10:59.850
> 
> 标签：windows-vista, allusersprofile

Windows Vista 中 %allusersprofile% 文件夹的确切路径是什么？在某些系统上，我看到文件夹为“c:\Users\All Users”，在某些系统上它映射到“C:\ProgramData”，而在其他系统上它已映射到“C:\Users\Public”。

如果您可以提供指向 microsoft 文档参考的链接，那将非常有帮助（到目前为止，我无法挖掘出链接）。

**编辑：**注册表设置确实定义了文件夹的位置。我正在寻找更多关于 Windows 在安装时如何解释/定义这些文件夹的内容？Microsoft Windows Vista 定义的此文件夹的默认位置是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T05:02:28.527

你为什么在乎？只需使用环境变量（或[KnownFolderId](http://msdn.microsoft.com/en-us/library/bb762584(VS.85).aspx)，就可以保证永远有效。

微软明天可能会决定将目录移动到另一个位置——只要你继续使用环境变量就可以了。

如果您对值进行硬编码，您的代码*将来会*中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T04:16:58.480

[MSDN 上的这份文档](http://msdn.microsoft.com/en-us/library/bb756896.aspx)展示了 Vista 中查找已知文件夹的新方法，包括您特别询问的文件夹：`"C:\Documents and Settings"`.

我认为这可以通过更改注册表（并移动当前目录）来更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T04:30:19.633

我发现这些*特殊*的文件夹位置有时令人困惑。我创建了一张表格，比较了 Windows XP 和 Vista 上的文件夹位置。这可能对你有用。 [链接在这里。](http://spreadsheets.google.com/pub?key=p4j46E_RfMgTVcQzHZRRmDQ)

# windows - 在 AIR 中访问系统环境变量？

> ID：784490
> 
> 赞同：0
> 
> 时间：2009-04-24T04:12:36.477
> 
> 标签：windows, flex3, air

如何访问 Flex/AIR 中的系统环境变量（例如 %appdata%、%userdomain%）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T06:22:10.610

在 Flex/AIR 应用程序中没有可用于获取环境变量的 API。您必须将这些作为（命令行？）参数传递给您的应用程序。

# svn - 我应该如何在 OpenOffice 中保存文件以使其不是 Subversion 中的二进制文件？

> ID：784500
> 
> 赞同：5
> 
> 时间：2009-04-24T04:17:41.580
> 
> 标签：svn, diff, openoffice.org, binaryfiles

我正在与合作伙伴一起处理 Open Office 文档，我们正在使用 subversion 进行协作。但是，我们将文档保存为 .odt 文件，subversion 将其读取为二进制文件类型。因此，我担心当我们去合并文件并弹出差异时，如果存在冲突，我们将无法充分执行合并；我们将无法理解原始的 .odt 文件。

所以我的问题是“如何在 Open Office 中保存文档，以便它保留您期望和想要的所有格式，但保存为二进制文件，因此可以轻松合并？”

还是我使用了错误的方法来做到这一点？（这很有可能）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-24T04:28:38.700

尽管您可能讨厌它，但 LaTeX 为您提供了一种创建文档的方法，但在颠覆中将它们作为文本维护，很容易合并。

除了 LaTeX 或仅保留 txt 文档，使用 Subversion 对文件设置锁定是您最好的选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T04:22:13.270

对于复杂的二进制文件格式（.odt 是其中之一），我发现在 Subversion 中使用锁定而不尝试合并更改是一个好主意。在文件上设置 Subversion 属性`svn:needs-lock`，然后您将需要在编辑文件之前请求锁定文件（有关详细信息，请参阅 Subversion 手册中的[锁定）。](http://svnbook.red-bean.com/en/1.5/svn.advanced.locking.html)这在我的情况下效果很好，但它是否适合您取决于您​​的协作水平。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-19T00:55:10.087

文件不必是要进行差异和合并的文本格式——只要供应商提供好的差异和合并工具即可。只要可以将 VCS 配置为使用这些外部差异/合并工具。然而，很少有为专有文档格式提供这样的差异和合并工具。

TortoiseSVN 可以区分 Word 文档，这非常方便。它显然也可以合并，尽管我从未尝试过。我认为它可能能够区分和合并 OpenOffice 文档，但我从未尝试过。

TortoiseSVN 可以“有点”区分 Excel 文档，但使用起来不是很好。没有合并。

在我的公司，我们在 Word 和 Excel 文档上设置了**svn:needs-lock**以避免合并问题。即便如此，我发现能够比较以前的版本并查看发生了什么变化非常方便。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-24T04:24:01.003

*.odt*文件是 AFAIK 压缩的 XML 文件。但是，即使您将它们保存为解压缩的 XML，我也严重怀疑您是否可以合并任何东西，但最小的更改除外。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-24T04:26:07.380

.odt 格式实际上是一种 zip 文件格式（在大多数情况下），它将您的文档和可能的其他二进制资源打包在一起。它是一个 zip 文件这一事实意味着它本质上是二进制文件。可能有一种方法可以使用 OpenOffice 将文档保存为纯文本 XML，我不确定。

如果您真的需要合并更改的能力，那么使用纯文本格式可能会更好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-24T04:42:18.293

合并一个复杂的页面将是一个问题，因为颠覆将无法做好。

通过锁定，一次只有一个人可以处理它。

如果您不喜欢 LaTex 或 .txt 建议，您可以每次将其保存为 html 页面。

也许你可以为 OpenOffice 编写一些插件来允许协作工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-13T16:34:57.400

复杂的机器维护文件总是难以在版本控制系统中合并，*即使*它们以文本形式存储。如果它是未压缩的 OpenOffice.org XML 会怎样？您所做的一个简单更改将修改整个 XML 文件中的许多行，从而导致可能的冲突。

最好的选择是使用更简单的格式，例如[Markdown](http://daringfireball.net/projects/markdown/)，因为简单的格式会导致更少的更改，从而导致更可靠的合并。许多作家使用 Markdown，它很容易学习。

有大量支持这种标记语言的编辑器，但您可能需要稍微修改一下您的工作流程。例如，有一个[ODT 到 txt](http://wiki.services.openoffice.org/wiki/Odt2txt.py)的转换脚本，它将 ODF 转换为带有 markdown 格式的 txt。此外，[pandoc](http://johnmacfarlane.net/pandoc/)可以在多种格式之间进行转换，例如 Markdown 和 ODF。

所以有两种选择：

1.  更改为直接支持 Markdown 的编辑器（一个简单的文本编辑器就可以了，但您可以使用更高级的带有 Markdown 模式的文本编辑器，例如[VIM Markdown 模式](http://plasticboy.com/markdown-vim-mode/)）
2.  在 Markdown 和 OpenOffice.org 格式之间插入一个转换步骤。（确保先测试可行性）

# java - Struts 2：Action之间的参数

> ID：784527
> 
> 赞同：8
> 
> 时间：2009-04-24T04:29:04.300
> 
> 标签：java, jakarta-ee, parameters, struts2, struts-action

我有以下问题：当我完成一个表单并且操作保存表单的值时，我需要传递一个参数（例如 ID ），这将转发到 result = "success" 我需要将要调用的操作成功时附带 ID 和其他参数，以便稍后在下一个表单中使用以保存此信息（info-form2 和 info.form1）...

例如：

**FORM1（用户）====“成功”====> FORM2（地址）**

*userForm.html ===================> addressForm.html?user_id=X ...(其中 X : Id 将 UserAction (method:save) 的 throw 传递给 AddressAction (方法：新地址））*

请感谢您的帮助

提前致谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-24T19:26:52.083

您使用了“转发”一词，但听起来您想转到一个新页面 (address.html) 以收集有关该地址的更多信息。如果是这种情况，您需要在用户操作完成后重定向到地址页面。

```
<action name="user" class="UserAction">
  <!-- Redirect to another namespace -->
  <!-- for Struts 2.2 --> <result type="redirectAction">
  <!-- for Struts 2.0 <result type="redirect-action"> -->
    <param name="actionName">collect-address</param>
    <param name="userId">${userId}</param>
  </result>
</action> 
```

${userId} 语法将在您的 UserAction 上调用 getUserId 并传递您在问题中显示的该参数：addressForm.html?user_id=X。collect-address 可以将成功结果发送到 addressForm.html。[文档在这里。](http://struts.apache.org/2.0.6/docs/redirect-action-result.html)如果您想避免使用其他操作，可以尝试[使用结果 type="redirect"](http://struts.apache.org/2.0.6/docs/redirect-result.html)并通过这种方式传递。

如果你真的想转发，你可以使用[动作链接](http://struts.apache.org/2.0.6/docs/action-chaining.html)。[Struts2 团队的 Ted Husted 不鼓励](http://www.mail-archive.com/user@struts.apache.org/msg53168.html)这样做，但它可能对您有用。

不要使用动作链接，而是尝试将完成此请求的所有代码放入单个动作中，并使用 User 和 Address 的帮助器或服务类来分离和重用代码，而不是“动作链接”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T05:52:25.783

不是很清楚你想做什么。

看起来像在成功执行一个动作之后，请求被转发到另一个动作。在第一个动作中，您要传递参数 ID 并在第二个动作中使用它。由于这两个操作都在同一个请求调用中使用，您可以像这样将 ID 参数保存在请求中

request.setAttribute("ID", iDValueObject);

在第二个动作中，您可以像这样提取 ID 的值

request.getAttribute("ID");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-19T05:17:51.880

这应该有效：

```
 <!--  Package Default -->
    <package name="**default**" extends="struts-default,json-default" namespace="/">
        <action name="noOp" class="com.web.myapp.action.NoOpAction">
           <result name="success" type="chain">
                    <param name="requiresValidation">true</param>
                    <param name="actionName">userAuthentication</param>
                    <param name="namespace">/user</param>
          </result>
        </action>   
    </package>
    <!--  Package User -->
    <package name="user" extends="struts-default,json-default" namespace="/user">
    <action name="userAuthentication" class="com.web.myapp.action.AuthenticateAction">
    ...
    </action> 
```

# c# - 反转该数学函数

> ID：784533
> 
> 赞同：1
> 
> 时间：2009-04-24T04:32:49.330
> 
> 标签：c#, c++, math

我需要用硬数学运算来反转一个函数，我在这里要求检查它是否可能，最终寻求帮助。

```
 public static UInt32 Func_4(UInt32 P, UInt32 X, UInt32 G)
    {
        UInt64 result = 1;
        UInt64 mult = G;
        if (X == 0)
            return 1;
        while (X != 0)
        {
            if ((X & 1) != 0)
                result = (mult * result) % P;
            X = X >> 1;
            mult = (mult * mult) % P;
        }
        return (UInt32)result;
    } 
```

**“反转”是指：我知道 G，我知道 P，我知道结果。我需要 X。**

今天早上，我想在头脑清晰的情况下再次翻译它，但我失败了。甚至可能吗？

先感谢您。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-24T04:40:17.347

看起来你的`Func_4()`函数计算*G ^X mod P*。您要求的是[离散对数](http://en.wikipedia.org/wiki/Discrete_logarithm)问题的解决方案，但没有已知的有效算法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T05:29:54.620

好，

手动完成以下工作：

P=5, X=0b0000 1110, G=7

P=5, X=0b0001 1110, G=7

P=5, X=0b0011 1110, G=7

P=5, X=0b0111 1110, G=7

等等，我想你看到了模式

所有结果都具有相同的返回值 (4)...

因此，任何试图扭转这一点以获得 X 的值的尝试都会有多个可能的 X 值。

取决于你实际需要什么，这可能并不重要......

这件事的背景是什么？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-24T08:30:08.930

由于模运算符在起作用，您可以立即看出该函数不是双射的：对于固定的 P 和 G，不同的 x 可能返回相同的结果。

但该函数对于 x 的有限域*是双射的。*就像 atan, asin, sqrt, .... 产生一整套值，当你限制域时，你可以选择正确的一个。

乍一看，对于一个非常大的 P，该函数的作用是，

G ^((2i*x[i]))的乘积，其中 x[i] 是 x 的第 i 位（从位 0 开始作为最低有效位）。

这意味着给定一个大的 P（大于 Prod(G ^(2i) )，对于 x=0x1111...111），您可以反转该函数。似乎该功能被*设计*为对于较小的 P 是不可逆的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T04:40:48.157

它看起来像 i = (g**x) mod p。这意味着可能有不止一个 x

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-29T11:55:02.237

伪算法

R = pow(G,X) 模 P

即）存在一个Q，即R + P * Q = pow（G，X）

反过来，检查从 0 到 UINT32((MAXUINT32-R)/P) 的所有 Q 的 Y，

Y = log ( R + P * Q ) / log (G)

如果 Y 值没有分数，那么它们是您的问题的多个“X”答案的集合。

假设 X1 是第一个没有分数的 X 值，X2 是第二个没有分数的 X 值。然后可以在等式 X(S) = X1 + (X2-X1) * S 中给出所有 X 的集合，其中 S=0 到 UINT32( (MAXUINT32-X1) / (X2-X1) )。

这是由于 if 1= Pow(G,T) mod P 然后 Pow(G,X+T) mod P = Pow(G,X) mod P * Pow(G,T) mod P 这也是 Pow( G,X) mod P. 因此 X, X+T, X+2T, X+3T... 都将具有相同的值..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-27T23:52:57.690

我真的认为你在滥用这个算法。从你的描述和算法来看，很明显这只是为了向前发展。将其视为使用密钥 P 和 G 计算 X 的校验和。

# javascript - 如何用 元素替换字符串中的所有换行符？

> ID：784539
> 
> 赞同：653
> 
> 时间：2009-04-24T04:38:11.063
> 
> 标签：javascript

如何使用 JavaScript 从值中读取换行符并用`<br />`元素替换所有换行符？

例子：

从 PHP 传递的变量如下：

```
 "This is man.

     Man like dog.
     Man like to drink.

     Man is the king." 
```

我希望我的结果在 JavaScript 转换后看起来像这样：

```
 "This is man<br /><br />Man like dog.<br />Man like to drink.<br /><br />Man is the king." 
```

* * *

## 回答 #1

> 赞同：1413
> 
> 时间：2009-04-24T04:43:19.197

这会将所有返回转换为 HTML

```
str = str.replace(/(?:\r\n|\r|\n)/g, '<br>'); 
```

如果您想知道 ?: 是什么意思。它被称为非捕获组。这意味着括号内的正则表达式组不会保存在内存中以供以后引用。您可以查看这些线程以获取更多信息：
[https ://stackoverflow.com/a/11530881/5042169](https://stackoverflow.com/a/11530881/5042169) [https://stackoverflow.com/a/36524555/5042169](https://stackoverflow.com/a/36524555/5042169)

* * *

## 回答 #2

> 赞同：496
> 
> 时间：2015-09-02T10:57:43.227

如果您关心的只是显示换行符，您可以使用 CSS 执行此操作。

```
<div style="white-space: pre-line">Some test
with linebreaks</div> 
```

jsfiddle：[https ://jsfiddle.net/5bvtL6do/2/](https://jsfiddle.net/5bvtL6do/2/)

**注意**：注意代码格式和缩进，因为`white-space: pre-line`将显示**所有**换行符（除了文本后面的最后一个换行符，请参见小提琴）。

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2011-12-07T09:23:56.030

没有正则表达式：

```
str = str.split("\n").join("<br />"); 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2013-11-21T19:12:14.777

这适用于来自文本区域的输入

```
str.replace(new RegExp('\r?\n','g'), '<br />'); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-01-16T23:12:13.317

如果接受的答案不适合您，那么您可以尝试。

```
str.replace(new RegExp('\n','g'), '<br />') 
```

它对我有用。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-11-27T21:09:09.093

不考虑系统：

```
my_multiline_text.replace(/$/mg,'<br>'); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-06-26T11:45:42.170

对文本的其余部分进行编码以防止可能的脚本注入攻击也很重要

```
function insertTextWithLineBreaks(text, targetElement) {
    var textWithNormalizedLineBreaks = text.replace('\r\n', '\n');
    var textParts = textWithNormalizedLineBreaks.split('\n');

    for (var i = 0; i < textParts.length; i++) {
        targetElement.appendChild(document.createTextNode(textParts[i]));
        if (i < textParts.length - 1) {
            targetElement.appendChild(document.createElement('br'));
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-03-24T15:38:12.300

最短的代码，支持最常见的[EOL 样式](https://en.wikipedia.org/wiki/Newline#Representation) `\r`，并使用 HTML5 ：`\n``\r\n``<br>`

```
s.replace(/\r?\n|\r/g, '<br>') 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-02-26T20:35:31.873

当值来自文本框时，这对我有用：

```
string.replace(/\n|\r\n|\r/g, '<br/>'); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-03-03T17:47:50.730

对于那些只想允许最大值的人。`<br>`连续2个，你可以使用这个：

```
let text = text.replace(/(\r?\n){2,}/g, '<br><br>');
text = text.replace(/(\r?\n)/g, '<br>'); 
```

第一行：搜索`\n`OR `\r\n`，其中至少有 2 个在一行中，例如`\n\n\n\n`. 然后将其替换为 2`br`

第二行：搜索所有单个`\r\n`或`\n`并将其替换为`<br>`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-05-10T15:57:34.807

如果您从 PHP 发送变量，您可以在发送之前通过以下方式获取它：

```
$string=nl2br($string); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-05-23T20:56:48.520

> 它将用 break 替换所有新行

`str = str.replace(/\n/g, '<br>')`

> 如果你想用单个换行符替换所有新行

`str = str.replace(/\n*\n/g, '<br>')`

> 阅读有关 Regex 的更多信息：[https](https://dl.icewarp.com/online_help/203030104.htm) ://dl.icewarp.com/online_help/203030104.htm 这将帮助您每次。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-06-06T14:02:42.580

没有回答具体问题，但我相信这会对*某人*有所帮助......

如果您希望使用 JavaScript 在网页上呈现来自 PHP 的输出（可能是 Ajax 请求的结果），并且您只想保留空格和换行符，请考虑将文本包含在`<pre></pre>`块内：

```
var text_with_line_breaks = retrieve_some_text_from_php();
var element = document.querySelectorAll('#output');
element.innerHTML = '<pre>' + text_with_line_breaks + '</pre>'; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-15T19:20:40.387

尝试

```
let s=`This is man.

     Man like dog.
     Man like to drink.

     Man is the king.`;

msg.innerHTML = s.replace(/\n/g,"<br />");
```

```
<div id="msg"></div>
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-19T18:50:52.203

我有一个从控制器传入的 PHP 配置。（拉拉维尔）

示例：PHP 配置

```
'TEXT_MESSAGE' => 'From:Us\nUser: Call (1800) 999-9999\nuserID: %s' 
```

然后在javascript中使用es6 reduce。注意我必须有两个`\\`，否则输出没有被正确替换。以下是与 reduce 函数相关的参数

*   previousValue（上一次调用 callbackfn 产生的值）
*   currentValue（当前元素的值）
*   currentIndex 可选
*   array (要遍历的数组) 可选

```
//p is previousVal
//c is currentVal
String.prototype.newLineReplace = function(){
    return [...arguments].reduce((p,c) => p.replace(/\\n/g,c), this);
} 
```

这是我在脚本中使用它的方式。

```
<script type="text/javascript">var config = @json($config);</script>

config.TEXT_MESSAGE.newLineReplace("<br />") 
```

当然，您可以在 javascript sring 上调用它，例如...

```
let a = 'From:Us\nUser: Call (1800) 999-9999\nuserID: %s'
var newA = a.newLineReplace("<br />")

//output
'From:Us<br />User: Call (1800) 999-9999<br />userID: %s' 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2021-12-21T10:35:33.993

```
string2 = string2.replace(/(?:\\n)/g, '') 
```

# java - 强制调用基类方法

> ID：784542
> 
> 赞同：2
> 
> 时间：2009-04-24T04:41:00.700
> 
> 标签：java, inheritance, polymorphism

以下代码在运行时显然会打印出“B1/A2/B2”。现在，是否可以改为打印“A1/A2/B2”（即 A#method2() 应该在 A 上调用 method1()，而不是在 B 上）？

注意：我不需要通过多态性，这个问题只是出于好奇。

```
class A {
    public void method1() {
        System.out.println("A1");
    }

    public void method2() {
        method1();
        System.out.println("A2");
    }
}

class B extends A {
    @Override public void method2() {
        super.method2();
        System.out.println("B2");

    }

    @Override public void method1() {
        System.out.println("B1");
    }
}

public class Tmp {
    public static void main(String args[]) {
        B b = new B();
        b.method2();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T04:47:17.657

我不这么认为；如果您`method1()`在子类中覆盖，则不会。如果您确实需要该行为，则必须声明`A.method1()`为`final`，并且无法在 中定义它`B`。

这样做对我来说没有意义 - 如果您认为需要，您应该重新考虑您的设计！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T05:26:23.040

您还可以将 A.method1 设为私有。然后，即使你有 B.method1，也会调用 A.method1。但我不确定，你应该检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T06:04:48.110

是的，你可以做到。在包**a**中定义 A ：

```
package a;
public class A {
    void method1() {
        System.out.println("A1");
    }
    public void method2() {
        method1();
        System.out.println("A2");
    }
} 
```

在包**b**中定义 B ：

```
package b;
import a.A;
public class B extends A {
    @Override public void method2() {
        super.method2();
        System.out.println("B2");
    }
    void method1() {
        System.out.println("B1");
    }
} 
```

将您的测试放在包**a**中并运行它。结果是 A1/A2/B2。当然这是不健康的：注意在 method1 上必要的省略 @Override - 如果你把它放回去，你会得到一个编译器错误：

```
method does not override or implement a method from a supertype 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T06:10:45.880

为此，您必须使用非虚拟方法 method1。为此，您将其设为最终版本：

```
 public final void method1() {.... 
```

或者您将其设为私有；在 Java 中 pivate 方法总是非虚拟的：

```
 private void method1() {.... 
```

（请注意，在 C++ 中，私有方法可能是虚拟的或非虚拟的；除此之外，这使得在 C++ 中实现模板方法模式更加清晰。）

这是发生了什么：当通过对象引用调用非静态方法时（这是Java中调用非静态对象方法的唯一方法），调用的方法取决于所引用对象的实际类型（指向-to)，而不是引用的类型。

在对象方法中，对该对象的其他方法（或成员）的调用隐含地以“this.”为前缀。因此，您在 method2 中对 method1 的调用实际上是：

```
public void method2() {
    this.method1();
    System.out.println("A2");
} 
```

并且`this`是一个对象引用。在类 A 中的方法 2 中，引用的类型是 A，就好像`this`已经声明过一样：

```
A this; 
```

但是那个引用指向一个类型的对象`B`；它可以做到这一点，因为 B 派生自、继承、子类、is-a `A`、。

正如我上面提到的，“当通过对象引用调用非静态方法时，调用的方法取决于所引用对象的实际类型，而不是引用的类型。” 当您实例化 B 类型的对象并调用 method2() 时，`this`您传入的（`this`实际上是任何非静态函数的隐藏参数）是`this`指向 B 对象的 a。当 B.method2() 调用 super() 时，同样`this`的内容被传递给 A.method2()。

因此，当 A.method2() 调用 method1() 时，真正发生的是我们`this.method1()`使用相同的 调用`this`，它指的是 a `B`，`B`您在其中实例化`main()`并调用 method2()。

由于 method1()*是*虚拟的，并且由于我们在对 type 对象的引用上调用 method1() `B`，因此编译器会确保`B`对 method1() 的重新定义是被调用的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T14:25:28.423

您不能使用标准的“自然”和广为接受的 Java 机制。Java 的设计使得所有方法都是动态分派的，除非是最终的或静态的（或调用超级），并且在您的情况下。由于该方法在 B 中被覆盖，因此这些都不是一个选项。在特定情况下没有“禁用”动态调度的机制，但好消息是很少需要这样做。

你可以通过反思来克服其中的一些限制，但这就像用大锤打开一份珍贵的礼物。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-09-22T19:19:37.100

Even I WAS looking for this solution. It seems its not possible. Changing the base class is not an option. i.e. assuming that base class is already written and you are deriving a class from it, there's nothing you can do in the derived class so that the base class calls its own methods and not overridden methods. if you are making an object of the derived class, base class will call overridden methods of derived class instead of calling its own methods. that's OOPS....

# ruby - 在 OSX 上以编程方式使用 Dictionary.app 的同义词库函数（最好通过 Ruby）

> ID：784549
> 
> 赞同：10
> 
> 时间：2009-04-24T04:44:10.427
> 
> 标签：ruby, macos, scripting, dictionary

我需要编写一个 Ruby 方法，它接受一个单词，通过 OS 10.5 的 Dictionary.app 的同义词库函数运行它，并返回替代词。

如果 Ruby 方法最终调用了命令行，那很好；我只需要能够从 Ruby 以编程方式完成它。

在浏览了 Ruby OSA 之后，我意识到可以通过一些 Dictionary Service [ [http://discussions.apple.com/thread.jspa?threadID=1561332]](http://discussions.apple.com/thread.jspa?threadID=1561332])访问 Dictionary ，但我并没有真正理解。

有人看到一个简单的解决方案吗？

我也准备制作一个 Automator 工作流程并从命令行调用它，但由于某种原因，我无法从 shell 中正确地为“获取定义”函数提供一个单词（它一直说找不到这个词，但是当手动查看时它起作用了）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-24T05:49:32.703

不幸的是，唯一的编程接口（字典服务）不支持设置字典。

但是，它确实会咨询字典首选项以使用指定的第一个字典，因此您可能会以非常丑陋的方式重置首选项，因此词库是唯一可用的字典。

这真的很恶心，如果被吸入可能会破裂，但它应该有效：

```
/* compile with:

   gcc -o thesaurus -framework CoreServices -framework Foundation thesaurus.m
*/

#import <Foundation/Foundation.h>
#include <CoreServices/CoreServices.h>

int main(int argc, char *argv[]) {
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
  NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
  NSMutableDictionary *dictionaryPrefs =
    [[userDefaults persistentDomainForName:@"com.apple.DictionaryServices"] mutableCopy];

  NSArray *activeDictionaries = [dictionaryPrefs objectForKey:@"DCSActiveDictionaries"];

  [dictionaryPrefs setObject:
    [NSArray arrayWithObject:@"/Library/Dictionaries/Oxford American Writer's Thesaurus.dictionary"]
                      forKey:@"DCSActiveDictionaries"];
  [userDefaults setPersistentDomain:dictionaryPrefs forName:@"com.apple.DictionaryServices"];

  NSString *word = [NSString stringWithUTF8String:argv[1]];
  puts([(NSString *)DCSCopyTextDefinition(NULL, (CFStringRef)word,
                                          CFRangeMake(0, [word length])) UTF8String]);

  [dictionaryPrefs setObject:activeDictionaries forKey: @"DCSActiveDictionaries"];
  [userDefaults setPersistentDomain:dictionaryPrefs forName:@"com.apple.DictionaryServices"];
} 
```

并将其用作：

```
% ./thesaurus string
noun 
1 twine, cord, yarn, thread, strand.
2 chain, group, firm, company.
3 series, succession, chain, sequence, run, streak.
4 line, train, procession, queue, file, column, convoy, cavalcade.
[...] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-26T22:24:43.653

我已经更新了适用于 10.7 和 10.8 的代码。全部归功于 Nicholas Riley；没有他我就写不出来！

我已经稍微修改了它以允许您选择字典进行查找，使用它像： `$dictionary $PATH_TO_DICT $word`

```
#import <Foundation/Foundation.h>
#include <CoreServices/CoreServices.h>

NSUserDefaults* GetUserDefaults() {
  return [NSUserDefaults standardUserDefaults];
}

NSMutableDictionary* GetGlobalDomain() {
  NSUserDefaults *userDefaults = GetUserDefaults();
  NSMutableDictionary *dictionaryPrefs =
    [[userDefaults persistentDomainForName:@"Apple Global Domain"] mutableCopy];
  return dictionaryPrefs;
}

NSMutableDictionary* GetDictionaryPreferences() {
   return [[GetGlobalDomain() objectForKey:@"com.apple.DictionaryServices"] mutableCopy];
}

NSArray* GetCurrentDictionaryList() {
  return [GetDictionaryPreferences() objectForKey:@"DCSActiveDictionaries"];
}

void SetUserDictPreferences(NSArray* array) {
  NSMutableDictionary *currentPref = GetDictionaryPreferences();
  [currentPref setObject:array forKey:@"DCSActiveDictionaries"];
  NSDictionary *immutPref = [NSDictionary dictionaryWithDictionary:currentPref];
  NSMutableDictionary *g = GetGlobalDomain();
  [g setObject:immutPref forKey:@"com.apple.DictionaryServices"];
  NSUserDefaults *defaults = GetUserDefaults();
  [defaults setPersistentDomain:g forName:@"Apple Global Domain"];
}

int main(int argc, char *argv[]) {
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

  NSArray *currentPrefs = GetCurrentDictionaryList();

  NSString *dict = [NSString stringWithUTF8String:argv[1]];
  NSString *word = [NSString stringWithUTF8String:argv[2]];
  SetUserDictPreferences([NSArray arrayWithObject:dict]);
  puts([(NSString *)DCSCopyTextDefinition(NULL, (CFStringRef)word,
                                          CFRangeMake(0, [word length])) UTF8String]);

  SetUserDictPreferences(currentPrefs);
} 
```

# entity-framework - DataContractSerializer：如何序列化没有 DataContract/DataMember 属性的类/成员

> ID：784562
> 
> 赞同：10
> 
> 时间：2009-04-24T04:51:01.097
> 
> 标签：entity-framework, serialization, datacontractserializer, efpocoadapter

`DataContractSerializer`需要用`DataContract` 和`DataMember`属性标记类和成员。但是，在我的情况下，这些类是使用 EFPocoAdapater 框架自动生成的，并且这些属性不存在。

在不存在这些属性的情况下，如何使用 DataContractSerializer 强制对所有成员进行序列化？

> 来自亚历克斯德：
> 
> 这在 3.5SP1 中发生了变化，希望您看到： [http ://www.pluralsight.com/community/blogs/aaron/archive/2008/05/13/50934.aspx](http://www.pluralsight.com/community/blogs/aaron/archive/2008/05/13/50934.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T05:20:26.063

你不能——简单明了。DataContractSerializer 需要该属性来获取要序列化的元素。与基本上只是序列化所有内容的 XmlSerializer 不同（除非您明确告诉它忽略它），DataContractSerializer 是“选择加入”的 - 您必须明确告诉它（通过属性）哪些字段和/或属性序列化。

**更新：**正如一些人指出的那样，在 .NET 3.5 SP1 中，微软稍微放宽了这些规则——任何公共读/写属性都将由 DataContractSerializer 自动序列化。同时，你的类还需要有一个无参数的默认构造函数——听起来就像我们对 XmlSerializer 的确切要求......

当然，这个：

*   不允许你序列化一些私有的东西——如果你想序列化它，你必须将它公开为公共读/写属性
*   不允许您指定已定义的参数选择顺序 - 它只会按照它们在类中出现的顺序使用它们
*   现在要求您在类中再次具有无参数构造函数以进行反序列化

我仍然认为这些东西应该是明确和清晰的，让那些不再需要的东西为懒惰/草率的编程开辟了道路——我不喜欢它。但是，如果您愿意，您现在可以使用它，而无需使用 [DataMember] 显式标记您的属性.....

马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T19:10:15.380

我相信这是可能的。如果您实现 ISerializable 接口，则序列化程序使用您的实现而不是属性。尽管我认为您仍然必须标记类 [Serializable]。

它比添加属性多一点工作，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-24T21:43:20.660

只需使用 [Serializable] 属性标记类。任何您不想用 [NonSerialized] 序列化标记的成员。请注意，[Serializable] 默认情况下会导致所有字段都被序列化，其中 [DataContract] 默认情况下不序列化任何字段，除了标记为 [DataMember] 的字段。

# c++ - C++ 检查数字是否是 int/float

> ID：784563
> 
> 赞同：8
> 
> 时间：2009-04-24T04:51:03.373
> 
> 标签：c++

我是新来的。我在谷歌上找到了这个网站。

```
#include <iostream>

using namespace std;

void main() {

    // Declaration of Variable
    float num1=0.0,num2=0.0;

    // Getting information from users for number 1
    cout << "Please enter x-axis coordinate location : ";
    cin >> num1;

    // Getting information from users for number 2
    cout << "Please enter y-axis coordinate location : ";
    cin >> num2;

    cout << "You enter number 1 : " << num1 << " and number 2 : " << num2 <<endl; 
```

我需要类似的东西，当用户输入字母字符时，它会显示一个错误，说你应该输入数字。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-22T10:52:05.650

首先，回答你的问题。这实际上非常简单，您不需要对代码进行太多更改：

```
cout << "Please enter x-axis coordinate location : " << flush;
if (!(cin >> num1)) {
    cout << "You did not enter a correct number!" << endl;
    // Leave the program, or do something appropriate:
    return 1;
} 
```

这段代码主要检查输入是否被有效地解析为浮点数——如果没有发生，它会发出错误信号。

其次，返回类型`main` *必须* **始终**是`int`, never `void`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T07:17:46.017

我会使用 cin.fail() 方法或 Boost“词法转换”，适当使用异常来捕获错误[http://www.boost.org/doc/libs/1_38_0/libs/conversion/lexical_cast.htm](http://www.boost.org/doc/libs/1_38_0/libs/conversion/lexical_cast.htm)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-24T04:55:23.223

使用类似的东西

```
if (static_cast<int>(num1) == num1) {
  // int value
}
else {
  // non-integer value
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-24T05:00:26.533

如果要检查整数/浮点数/两者的输入，则不应将 cin 用于浮点数。而是将其读入字符串，您可以检查输入是否有效。

如果 cin 读取到无效的数字，它将进入失败状态，可以使用 if(cin.fail()) 进行检查

但是，将输入读取为字符串然后将输入转换为整数或浮点数会更容易。

isdigit(c) 应该在字符而不是整数上调用。例如 isdigit('1') （注意引号）。

您可以使用 strtol 尝试将字符串转换为整数。根据结果​​，您可以尝试转换为浮点数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-24T05:02:17.760

虽然其他人已经回答了这个问题，但我只想指出`isdigit`真正用于什么。它告诉你一个给定的字符是否代表一个数字。

基本上，`isdigit`可能的定义是：

```
int isdigit (int c)
{
    if (c >= '0' && c <='9')
        return 1;
    else
        return 0;
} 
```

然后，如果您有一个 string `"asdf1234"`，您可以单独检查每个字符以测试它是否是数字/数字：

```
char *test = "asdf1234";
int i;

for (i = 0; i < strlen (test); i++)
{
    if (isdigit (test[i]))
        fprintf (stdout, "test[%d] is a digit!\n", i);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-24T04:55:35.233

输入将被强制转换以适合您使用 cin 存储的变量。因为您在 num1 和 num2 （它们是浮点数）上使用 cin，所以无论用户输入什么数字（在一定程度上），它都将是一个浮点数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-24T06:24:18.093

始终读取字符串中的数字并检查以下内容：-

```
template <class out_type, class in_type>
out_type convert(in_type const& t)
{
  std::stringstream stream;
  stream << t; // insert value to stream
  // store conversion’s result here
  out_type result;
  stream >> result; // write value to result
  // if there is a failure in conversion the stream will not be empty
  // this is checked by testing the eof bit
  if (! stream.eof() ) // there can be overflow also
  { // a max value in case of conversion error
    result = std::numeric_limits<out_type>::max();
  }
  return result;
} 
```

它被用作

```
int iValue = convert<int>(strVal);
if (std::numeric_limits<int>::max() == iValue)
{
  dValue = convert<double>(strVal);
} 
```

这是一种现代的做法:-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-01T00:22:45.527

我想验证输入并需要确保输入的值是数字，以便可以将其存储在数字变量中。最后这对我有用（来源：[http ://www.cplusplus.com/forum/beginner/2957/](http://www.cplusplus.com/forum/beginner/2957/)

```
int number;
do{
      cout<<"enter a number"<<endl;
      cin>>number;
      if ((cin.fail())) {
         cout<<"error: that's not a number!! try again"<<endl;
         cin.clear(); // clear the stream
         //clear the buffer to avoid loop (this part was what I was missing)
         cin.ignore(std::numeric_limits<int>::max(),'\n');
         cout<<"enter a number"<<endl; //ask again
         cin>>number;
      }

 } while (cin.fail()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T07:09:17.673

您可以将输入存储到字符串中，然后创建如下函数：

```
bool GetInt(const char *string, int *out)
{
    字符 * 结束；

    如果（！字符串）
        返回假；

    int ret_int = strtoul(string, &end, 10);

    如果（*结束）
        返回假；

    *out = ret_int;
    返回真；
}

```

GetInt("1234", &somevariable) 返回 true 并将 somevariable 设置为 1234。GetInt("abc", &somevariable) 和 GetInt("1234aaaa", &somevariable) 都返回 false。顺便说一下，这是 float 的版本：

```
HOT RESULT_MUST_BE_CHKED NONNULL bool GetFloat(const char *string, float *out)
{
    字符 * 结束；

    如果（！字符串）
        返回假；

    浮动 ret_float = (float)strtod(string, &end);

    如果（*结束）
        返回假；

    *out = ret_float;
    返回真；
}

```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-08-24T00:57:18.177

```
//Just do a type cast check
if ((int)(num1) == num1){
//Statements
} 
```

# nhibernate - 在 NHibernate 中限制结果

> ID：784564
> 
> 赞同：5
> 
> 时间：2009-04-24T04:51:22.653
> 
> 标签：nhibernate

如何限制NHibernate中返回的行数？

我正在寻找类似[SetMaxResult](https://stackoverflow.com/questions/568865/limiting-number-of-results-when-using-nhibernate) () 的东西，但在 Nhibernate 命名空间中找不到它！

**注意：我想使用`NHibernate.Criterion`，而不是`NHibernate.IQuery`，所以最好你能提供那个例子。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T05:04:03.357

我可以用

```
public void GetByCriteria(ICriterion criterion)
{
var criteria= ISession.CreateCiteria(typeof(T)).SetMaxResults(maxResult);
criteria.Add(criterion);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T05:03:42.267

ICriteria 有一个 SetMaxResults 方法。

# cruisecontrol.net - ccnet 中的出版商问题

> ID：784570
> 
> 赞同：0
> 
> 时间：2009-04-24T04:54:18.623
> 
> 标签：cruisecontrol.net

我刚接到一个要求，只有当我检测到编译中的错误时，我才应该向相关开发人员发送邮件。如果没有错误，则不需要将邮件发送给任何人。那么有什么方法可以在 ccnet.config 文件中配置这些东西。

向麦迪致以亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T11:39:52.423

Maddy，您应该在“构建”失败的任何时候发送电子邮件，不管它是否在编译时失败，或者你有任何测试，或者其他什么。不要限制它编译。仅仅因为代码编译并不能使它正确。

这是文档的[链接](http://confluence.public.thoughtworks.org/display/CCNET/Email+Publisher)，这是一个示例

```
<email from="CruiseControlBuild@yourcompany.com" mailhost="yourmailserver.com" includeDetails="True">
            <users />
            <groups>
                <group name="buildmaster" notification="failed"/>
            </groups>
            <converters>
                <regexConverter find="DOMAIN\\" replace="" />
                <regexConverter find="$" replace="@yourcompany.com" />
            </converters>
            <modifierNotificationTypes>
                <NotificationType>Failed</NotificationType>
            </modifierNotificationTypes>
        </email> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T05:01:31.787

只有编译中的错误，或者您的意思是一般的构建失败？构建失败的原因有很多，不仅仅是因为编译错误。

对于失败的构建（和/或其他构建状态），您可以使用[电子邮件发布者。](http://confluence.public.thoughtworks.org/display/CCNET/Email+Publisher)

# iphone - 一个 Xcode 项目，两个目标，两个应用程序，两个 Default.png 文件？

> ID：784575
> 
> 赞同：9
> 
> 时间：2009-04-24T04:56:45.450
> 
> 标签：iphone, xcode

> **可能重复：**
> [iPhone - 多个目标多个启动图像噩梦](https://stackoverflow.com/questions/10056794/iphone-multiple-targets-multiple-launch-images-nightmare)

我正在开发一款带有“Lite”和“Pro”版本的 iPhone 应用程序。为此，我使用了具有相同项目和代码库的两个目标。我想为`Default.png`应用程序的两个版本使用不同的“加载”图像，但我不确定如何在构建每个目标之前手动覆盖文件。有什么方法可以在构建过程中自动完成吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-24T05:19:37.737

想通了 - 最简单的解决方案是创建两个单独的目录，一个“lite”和一个“pro”，并在每个目录中放置一个 Default.png。仅将“pro”导入“pro”目标，将“lite”仅导入“lite”目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T05:17:05.917

对于其中一个目标，您可以更改构建阶段，以便加载不同的`Default.png`文件。转到目标的`Copy Bundle Resources`构建阶段以更改它复制的资源。（位于*TargetName*`Groups & Files`下的窗格中）`Targets ->` *`-> Copy Bundle Resources`*

 *# iphone - 确定 iPhone 互联网连接是否可用的最简单方法？

> ID：784582
> 
> 赞同：12
> 
> 时间：2009-04-24T05:02:25.983
> 
> 标签：iphone

我正在寻找确定 iPhone 上是否有可用的互联网连接。无论是 wifi 还是 EDGE 或其他任何应用程序，都无关紧要。

使用 SeismicXML 示例中的代码似乎不起作用，而来自 Apple 的 Reachability 示例代码似乎对应用程序来说有点矫枉过正......

有没有一种快速简便的方法来确定 iPhone 上的网络可用性？

谢谢，本

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2010-12-27T06:27:38.820

**遵循以下 3 个简单步骤 -**

**第 1 步：**在您的项目中包含“SystemConfiguration.framework”框架

**第 2 步：**从 Reachability 示例中包含 Apple 的 Reachability.h 和 Reachability.m

**第 3 步：**现在将此代码添加到您的 .m 中的任何位置。

```
Reachability* wifiReach = [[Reachability reachabilityWithHostName: @"www.apple.com"] retain];
NetworkStatus netStatus = [wifiReach currentReachabilityStatus];

switch (netStatus)
{
    case NotReachable:
    {
        NSLog(@"Access Not Available");
        break;
    }

    case ReachableViaWWAN:
    {
        NSLog(@"Reachable WWAN");
        break;
    }
    case ReachableViaWiFi:
    {
        NSLog(@"Reachable WiFi");
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-24T06:43:08.813

我从他们的 Reachability 示例中包含了 Apple 的 Reachability.h 和 .m 以及上面提到的 SystemConfiguration 框架，然后将以下代码添加到我的应用程序中，这与上述答案相比有两个优点 - 它为您提供了更多信息，并且您获得了异步网络状态变化的通知。

在您的应用程序委托或类似内容中，在您启动时添加：

```
[self startReachability]; 
```

然后添加这个方法，当网络发生变化时会调用它：

```
#pragma mark Reachability changed
- (void)reachabilityChanged:(NSNotification*)aNote
{
self.remoteHostStatus = [[Reachability sharedReachability] remoteHostStatus];

switch (self.remoteHostStatus)
{
case NotReachable:
  debugForComponent(kDebugMaskApp,@"Status changed - host not reachable");
  break;

case ReachableViaCarrierDataNetwork:
  debugForComponent(kDebugMaskApp,@"Status changed - host reachable via carrier");
  break;

case ReachableViaWiFiNetwork:
  debugForComponent(kDebugMaskApp,@"Status changed - host reachable via wifi");     
  break;

default:
  debugForComponent(kDebugMaskApp,@"Status changed - some new network status");
  break;
}
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-24T06:34:52.953

在尝试将 SystemConfiguration.framework 复制到中时，我在破坏 XCode 后发现了这一点……这是任何可能感兴趣的人的解决方案……

将 SystemConfiguration.framework 添加到您的项目中，执行 #import <SystemConfiguration/SystemConfiguration.h>，然后添加以下代码：

```
SCNetworkReachabilityFlags flags;
BOOL receivedFlags;

SCNetworkReachabilityRef reachability = SCNetworkReachabilityCreateWithName(CFAllocatorGetDefault(), [@"google.com" UTF8String]);
receivedFlags = SCNetworkReachabilityGetFlags(reachability, &flags);
CFRelease(reachability);

if (!receivedFlags || (flags == 0) )
{
    // internet not available
} else {
    // internet available
} 
```

好吧，无论如何希望这对某人有所帮助...似乎是拒绝应用程序的常见方式...

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-09-24T09:03:26.867

**链接到可达性示例；**
[http://developer.apple.com/iphone/library/samplecode/Reachability/index.html](http://developer.apple.com/iphone/library/samplecode/Reachability/index.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-12T17:59:07.100

这是解决您的问题的最快和最简单的解决方案：

```
([NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.google.com"]]!=NULL)?YES:NO; 
```

`YES`如果已连接或未连接，它将返回`NO`。它只是尝试加载 google，如果成功则返回`YES`。

然后你可以有一个`if`带有返回值的语句，这样你就可以抛出一个通知或任何你喜欢的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T05:21:15.673

我的第一个想法是看看我是否可以连接到谷歌。

# python - 通过 Python 和 PHP 说服 Ruby 的其他人

> ID：784584
> 
> 赞同：2
> 
> 时间：2009-04-24T05:02:50.613
> 
> 标签：python, ruby

伙计们。我正在尝试在工作中介绍 Ruby，并且有一些人对此感兴趣。但是，我被要求介绍 Ruby 相对于 Python 和 PHP 的优势。

我将其分为两部分：1）展示 Python 和 Ruby 相对于 PHP 的优势；2) 展示 Ruby 相对于 Python 的优势。

第一个很容易。我将解释以下内容：

*   一切都是对象。
*   Python 和 Ruby 更易于阅读和编写。

第二，我在想：

*   Ruby 有很多便利，这使得它更易于阅读和编写。例如：可选括号，并且能够打开内置插件，允许像 2.days.from_now 这样的东西
*   RSpec 远远领先于 Python 的 TDD 和 BDD 框架。
*   GitHub 和 RubyForge 是查找、发布和协作软件的绝佳资源。

你有什么建议吗？我全是耳朵！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-24T05:24:47.567

如果您的目标是说明为什么语言 X比语言 Y**更好**，那么您将陷入没有正确答案的主观领域。

不，Ruby 并不**比**PHP 或 Python 好。它可能更适合特定目的，为此您可以举出具体的例子。PHP 不是编写 SMTP 服务器的最佳选择；Ruby 和 Python 会更好地为您服务（事实上，在 Python 中它可以只用几行代码就可以完成，但不能代表 Ruby）。另一方面，PHP 比 Ruby 更适合为电子邮件提交表单编写一次性的简短后端。代码短，易于维护，快速编写等。

PHP 拥有绝对庞大的开发人员基础，这使得程序员很容易找到，如果您想外包开发链的任何方面，这将派上用场。另一方面，用 PHP 编写糟糕的代码也非常容易，而且这种情况已经足够了。

Python 拥有比 Ruby 大得多的用户群，并且确实是 RedHat 用于开发系统工具的主要语言。因此，如果您使用的是 RedHat 派生服务器（从统计上看，如果您使用的是 Linux，那么您很有可能就是这样），那么 Python 就可以保证已经就位并正常工作，等等。

简而言之，权衡利弊，做出决定，但不要假设人们会同意你；毕竟这只是一个意见。

* * *

**编辑**

我突然想到我没有说明全部要点：你不应该试图**说服**其他人他们应该使用 Ruby 而不是 Python/PHP。相反，您应该尝试**确定**是否应该使用 Ruby 而不是 Python/PHP。

你不能在已经确定答案的情况下进行这样的事实调查——这没有帮助。相反，您应该收集有关每种语言的优缺点的信息，并将其与您公司的要求进行权衡。一旦你得出结论，你就会有大量证据表明它是正确的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-24T05:36:57.600

不要陷入比较争论——除非你对所有三种语言都有经验，否则你只会暴露你的无知——尤其是在声称“X 不能做 Y”时。真正的粉丝会让你失望。

相反，炫耀 ruby​​ 可以做什么。这是一门很棒的语言，但这与人们谈论它的程度无关。重要的是代码。所以炫耀一下。使用该语言展示您的生产力、可靠性和灵活性。让它成为代码审查中最容易遵循的事情。有成套的测试。如果需要，请阅读[RedHanded](http://redhanded.hobix.com/)的偷偷摸摸的技巧。用你的代码赢得你的同事——它会比你的话更有说服力。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-24T05:22:12.503

嗯，作为一名活跃在所有三种语言中的程序员，我根本不同意任何一种都比另一种更好的观点。当然，Python 和 Ruby 更面向对象，但这并不是更好的要求，只是为了方便。您无法击败 PHP 社区和代码的遗留（无论好坏），也不能忽视 PHP 未来的发展方向、大量支持、为其做好准备的分布式服务器等等。

如果您想专注于语法，那么这三个都有其优点和缺点。如果要谈论后端技术，那么由于这三个都在移动活跃的开源项目，所以真的没有赢家。

除了你，程序员，谁可以混合和选择最适合你的东西。请记住，即使*您*认为 Ruby 是自 NAND 门以来最好的东西，但这并不意味着其他人会效仿。还要记住，我们都是不同的；有些人实际上*喜欢*Java 和 .Net，就像其他人喜欢 LISP 一样。我们都是不同的，我怀疑任何 Ruby/Python/PHP 的竞争者都比另一个更好。对不起。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-24T05:47:07.560

恶魔的拥护者也许...

> *   一切都是对象。

这是 Ruby 的一个特性，但对于为什么这是一个好处，它并不是不言自明的。你需要预先准备一个论据，说明为什么这是一个好处。当说服某人某物的优越性时，始终考虑展示其好处，而不是功能。

> *   Python 和 Ruby 更易于阅读和编写。

这是一个非常大的主张，如果没有大量可信的客观第三方证据支持这一点，我会不愿意提出这样的主张。如果不是，并且我怀疑这样的声明确实无法支持，我会谨慎行事并避免提出这样的声明。提出如此重要的主张，但仅以个人观点或轶事证据支持它并不是一个好主意。

> *   Ruby 有很多便利，这使得它更易于阅读和编写。例如：可选括号，并且能够打开内置插件，允许像 2.days.from_now 这样的东西

同样，您需要考虑好处，而不是功能。它可能有可选的括号，但你不能只提及一个特性，你必须解释它的好处——为什么这个特性比任何其他方法都好。就个人而言，我不确定“可选”语法是否是一个好主意，并且需要相当多的证据来说服我它是一个好主意。

> *   GitHub 和 RubyForge 是查找、发布和协作软件的绝佳资源。

那挺好的。Ruby 之外的其他语言也有类似的资源——同样，您不仅需要提及这些资源的存在，还需要解释它们如何比其他语言更好。

祝你好运。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-24T09:02:39.913

如果您真的想展示 Ruby 更好（假设它适用于您的应用程序！），为什么不在他们面前尝试从头开始编写一个小应用程序呢？它不必很大，但与您最终将使用它的用途相关的东西是一个好主意。

用所有三种语言编写应用程序，包括服务器的任何配置（我假设您在这里使用 DJango/Rails/PHP 编写 Web 应用程序，对吗？）并显示您的速度有多快，代码有多清洁等. ...假设是 ;-)

您可以通过询问他们想要添加什么来完成，然后如果这是一个小的更改，请尝试添加该功能。没有什么比观众参与更重要了——人们喜欢为自己鼓掌。如果你让他们参与进来，他们更有可能接受获胜者。

作为记录，我已经尝试了所有这三种方法，并且同意 Ruby 和 Python 似乎都会产生更清晰的代码。不过，我会选择 Python 而不是 Ruby——当我尝试使用 Python 时，Ruby 的语法有些笨拙，我只是没有体验过。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-24T10:07:43.377

您将很难对 python 进行销售。*顺便说一下，* GitHub 是用Ruby 编写*的*，而不是Ruby 本身。

 *对于 python，一个有 BitBucket（尽管我更喜欢 git），还有 pypi。

如果我错了，请纠正我，但听起来你还没有看太多 Python 代码。（顺便说一下，我已经编写了 python 和 Ruby 的存储桶）我发现它更具可读性，尤其是当您处理不属于您自己的代码时。

无论如何，并没有真正回答您的问题，也不想为火焰战争做出更多贡献。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-24T10:11:06.490

实际上，没有人（至少直接）说服我使用一种或另一种编程语言。

我曾经对清晰性有一定的需求（如果你可以这样称呼它）和其他一些标准，一种*语言*及其**生态系统**应该满足。而且您最终会使用一些 stdlib 和第三方资源，因此您可能还想研究它们（并将它们用作参数）。

我是 ruby​​ 和 python 的粉丝（这些语言的设计、不断的进步和社区都让我信服）。脚本语言的一般概念使它们同样具有吸引力。我发现`gem`它是我用过的最慢的软件之一。就个人而言，我认为 pythons stdlib 比 ruby​​s 组织得更好。但我喜欢 Ruby Mixins，它们在很多时候都是优雅且安全的。

简而言之：您可以将您的同事的兴趣指向一些当前的热点，在这些热点中编码很困难，然后在 ruby​​ 中展示一些替代方案。`Rake`也是一个很棒的工具，展示它......只要`rationally`对它充满热情..剩下的会来..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-24T05:28:22.190

所有 3 种语言都有自己的位置。与任何编程任务一样，您必须选择最适合该任务的语言。Python 有列表推导，php 在嵌入和生成 html 时要好得多。Ruby 也是一门很棒的语言。我发现自己在 ruby​​ 中使用过几次的其中一件事是 'a'...'zzzzz' 来生成所有可能的大小为 1 - 5 的字符串。它们都有自己的优势，并且都比其他特定的更好任务。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-24T05:40:46.780

如果您倾向于一种语言或软件，那么与其他人相比，您往往只会看到好东西。如果您想进行真正的比较，那么比较利弊，看看 Ruby 是否在您希望在公司中使用该语言实现的目标方面是明显的赢家。如果您这样做并且您的公司看到了 Ruby 的好处，那么他们肯定会使用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-24T06:05:32.180

```
Happy programmers == productive programmers
Ruby              == Happy Programmers 
```

所以这一定意味着

```
Ruby == productive programmer 
```

说服他们这两个陈述都是真的，你就在那里。当然，假设 Ruby 会让你成为一个快乐的程序员。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-08-04T12:12:15.163

This kind of post gives Ruby programmers a bad name. Ruby is Beethoven, Python is Bach. If you prefer one style to the other, fine, but don't try to argue the superiority of one over the other.

# language-agnostic - 检查文件是否相同的最快方法是什么？

> ID：784585
> 
> 赞同：38
> 
> 时间：2009-04-24T05:02:57.183
> 
> 标签：language-agnostic, file, comparison

如果您有 1,000,0000 个源文件，您怀疑它们都是相同的，并且您想比较它们目前比较这些文件的禁食方法是什么？假设它们是 Java 文件，并且进行比较的平台并不重要。cksum 让我哭了。当我的意思是相同时，我的意思是所有相同。

**更新：**我知道生成校验和。差异是可笑的......我想要速度。

**更新：**不要拘泥于它们是源文件的事实。例如，假设您运行了一百万次输出非常规范的程序。您想证明输出的所有 1,000,000 个版本都是相同的。

**更新：**读取块数而不是字节数？立即扔掉那些？这比查找字节数更快吗？

**更新：**这与比较两个文件的最快方法有什么不同吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-24T05:12:01.093

我会选择类似于`cmp`程序采用的方法：打开两个文件（比如文件 1 和文件 2），从每个文件中读取一个块，然后逐字节比较它们。如果它们匹配，则从每个块中读取下一个块，逐字节比较它们，等等。如果您到达两个文件的末尾而没有检测到任何差异，则查找文件 1 的开头，关闭文件 2 并打开文件 3在它的位置，并重复，直到您检查了所有文件。如果它们实际上都是相同的，我认为没有任何方法可以避免读取所有文件的所有字节，但我认为这种方法是（或接近于）检测可能存在的任何差异的最快方法。

**OP 修改：提升了**[Mark Bessey](https://stackoverflow.com/users/17826/mark-bessey)的重要评论

“如果文件预计大部分相同，并且如果它们相对较小，则另一个明显的优化是将其中一个文件完全保留在内存中。这减少了尝试一次读取两个文件时的颠簸。”

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-24T14:40:06.437

大多数人在他们的回答中都忽略了文件必须反复比较的事实。因此，校验和更快，因为校验和计算一次并存储在内存中（而不是顺序读取文件 n 次）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-24T06:01:42.143

假设期望文件是相同的（听起来就是这种情况），那么处理校验和/哈希是浪费时间 - 它们很可能是相同的，你必须重新 -阅读文件以获得最终证明（我还假设因为你想“证明......它们是相同的”，让它们散列到相同的值是不够的）。

如果是这种情况，我认为[David 提出的解决方案](https://stackoverflow.com/questions/784585/what-is-the-fastest-way-to-check-if-files-are-identical/784604#784604)非常接近您需要做的。可以做一些事情来优化比较，增加复杂性：

*   在进行比较之前检查文件大小是否相同
*   尽可能使用最快的 memcmp()（比较单词而不是字节 - 大多数 C 运行时应该已经这样做了）
*   使用多个线程进行内存块比较（直到系统上可用的处理器数量，超过会导致您的线程相互争用）
*   使用重叠/异步 I/O 以使 I/O 通道尽可能繁忙，但也要仔细分析，以便尽可能少地在文件之间颠簸（如果文件在几个不同的磁盘和 I/O 端口之间划分，所有更好）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-24T05:52:39.980

*更新：不要拘泥于它们是源文件的事实。例如，假设您运行了一百万次输出非常规范的程序。您想证明输出的所有 1,000,000 个版本都是相同的。*

如果您可以控制输出，让创建文件/输出的程序即时创建一个 md5 并将其嵌入文件或输出流中，甚至通过一个程序通过管道输出输出，该程序沿途创建 md5 并将其存储在一边数据不知何故，重点是当字节已经在内存中时进行计算。

如果你不能做到这一点，那么就像其他人所说的那样，检查文件大小，然后对相同大小的文件进行逐字节比较，我看不出任何类型的二进制除法或 md5 计算比直接比较，您将不得不触摸每个字节以证明相等性以任何方式切割它，因此您不妨减少每个字节所需的计算量，并获得在发现不匹配时立即切断的能力。

如果您打算稍后再将这些与新输出进行比较，md5 计算将很有用，但您基本上回到了我尽快计算 md5 的第一点

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-24T05:33:39.107

首先比较所有百万的文件长度。如果您有一种便宜的方法，请从最大的文件开始。如果它们都通过了，则使用二进制除法模式比较每个文件；这将在相似但不相同的文件上更快地失败。有关此比较方法的信息，请参阅[Knuth-Morris-Pratt 方法](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-24T05:35:08.150

有许多程序通常会比较一组文件以找到相同的文件。FDUPES 是一个不错的选择：[Link](http://premium.caribe.net/~adrian2/fdupes.html)。根据输入的确切性质，一百万个文件应该不是问题。我认为 FDUPES 需要 Linux，但对于其他平台还有其他此类程序。

我尝试自己编写一个更快的程序，但除特殊情况外，FDUPES 更快。

无论如何，一般的想法是从检查文件的大小开始。大小不同的文件不可能相等，因此您只需查看大小相同的文件组。如果您想要获得最佳性能，情况就会变得更加复杂：如果文件可能不同，您应该比较文件的一小部分，希望尽早发现差异，这样您就不必阅读其余部分。但是，如果文件可能相同，则读取每个文件以计算校验和会更快，因为这样您就可以从磁盘顺序读取，而不是在两个或多个文件之间来回跳转。（这里假设普通磁盘，所以 SSD:s 可能不同。）

在我的基准测试中，当尝试制作一个更快的程序时（令我惊讶的是）首先读取每个文件以计算校验和，然后如果校验和相等，则通过交替读取​​块来直接比较文件从每个文件中，而不是在没有先前校验和计算的情况下交替读取块！原来，在计算校验和时，Linux 将两个文件缓存在主内存中，顺序读取每个文件，第二次读取速度非常快。从交替读取开始时，文件不是（物理上）顺序读取的。

编辑：

有些人表示惊讶，甚至怀疑两次读取文件是否比只读取一次更快。也许我没有设法非常清楚地解释我在做什么。我说的是缓存预加载，以便在以后以在物理磁盘驱动器上执行速度很慢的方式访问文件时将文件保存在磁盘缓存中。[这](http://aass.oru.se/~tpy/texts/surprising-compare/index.html)是一个网页，我试图用图片、C 代码和测量进行更详细的解释。

但是，这与原始问题（充其量）具有边际相关性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-24T05:05:47.643

使用`cksum`不如使用类似`md5sum`. 但我会选择最大的可靠性，这意味着使用`cmp`.

对于所有检查方法，您必须读取两个文件中的每个字节，因此您不妨选择最可靠的一个。

作为第一遍，您可以检查目录列表以查看大小是否不同。这是一种快速获得不同文件反馈的快速方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-24T05:08:44.267

那么最佳算法将取决于重复文件的数量。

假设一些是相同的，但大多数是不同的并且文件很大。

使用简单的文件长度检查过滤掉明显不同的那些。

从文件中选择随机字节，计算哈希并进行比较（最小化磁盘寻道）

紧随其后的是一个完整的文件 SHA1。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-24T05:34:36.483

我认为散列不会比逐字节比较快。可以通过流水线读取和比较字节来优化逐字节比较，也可以在并行线程中比较文件的多个部分。它会是这样的：

*   检查文件大小是否不同
*   将文件块异步读入内存
*   将它们交给工作线程进行比较

或者只是并行运行一个 cmp（或您的操作系统的等效程序）。这可以很容易地编写脚本，并且您仍然可以获得并行性的好处。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-07T19:46:02.440

使用布隆过滤器的概念。这里有一个简单的解释：http: [//crzyjcky.com/2013/01/03/the-magical-bloom-filter/](http://crzyjcky.com/2013/01/03/the-magical-bloom-filter/)

它为您提供恒定的比较时间。但是这种方法不能单独使用。Apache Cassandra 和 HBase 在内部使用这种技术。

它基本上以非常快速的方式告诉你文件并不相同。如果它说文件相同，则必须使用可靠的方法进行另一轮检查。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-24T05:10:13.407

我会运行这样的东西

```
find -name \*.java -print0 | xargs -0 md5sum | sort 
```

然后查看哪些文件具有不同的 MD5 和。这将按校验和对文件进行分组。

如果您愿意，您可以替换 md5sum which sha1sum 甚至 rmd160。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-24T05:21:01.477

为什么要重新发明轮子？第三方应用怎么样？当然，它没有 API，但我不认为您经常将自己置于这种情况下。我喜欢这个应用程序[doublekiller](http://www.bigbangenterprises.de/en/doublekiller/)只是在你开始之前做一个备份。:) 它又快又免费！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-24T05:39:33.117

超越比较，同步两个文件夹，超快！我们每天都在使用它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2010-05-07T10:23:22.820

我刚刚编写了 ac# 应用程序，它的功能与您想要的类似。我的代码的作用是这样的。

将每个文件的所有大小读入列表或数组。

使用 for 循环检查这些大小是否相同。如果它们大小相同，则将一个文件的一个字节与另一个文件的一个字节进行比较。如果两个字节相同，则移动到下一个字节。如果发现差异，则返回文件不同。

如果到达两个文件的末尾，并且最后两个字节相同，则文件必须相同。

我已经尝试比较文件的 MD5 哈希值，而不是逐个字节地检查，我发现这种方法经常会遗漏相同的文件，但它的速度要快得多。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-11-29T04:15:14.410

在我看来，这是一个文件系统操作。因此，首先，请谨慎选择您的文件系统。接下来，去重。然后比较inode。像：

```
% find / -inum "$(ls -di "./test.file" | grep -E '^[0-9]*')"
<list of identical files provided in a few seconds to a minute> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-06-25T14:01:45.260

如果要逐个比较文件，请使用 ExamDiff。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-02-21T04:16:00.793

我将首先创建一个数据库表，其中包含 file_contents 的列路径名和 sha_1，
所有文件并存储路径名和 sha_1，
然后在随后存储时将其放入数据库中，
sha_1 文件检查 sha_1 是否存在于 db 中，
如果在 db 中，则
输出到该文件以路径名存在的日志，
用它做任何事情大声笑创建一个符号链接。
在文件上传时在您的验证中实施它，

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2009-04-24T05:07:40.230

MD5 散列会比比较快，但比正常的 CRC 检查要慢。您必须找出比较所需的可靠性。

# javascript - 在 JavaScript 中将特殊字符转换为 HTML

> ID：784586
> 
> 赞同：141
> 
> 时间：2009-04-24T05:03:20.723
> 
> 标签：javascript

如何在 JavaScript 中将特殊字符转换为 HTML？

例子：

*   `&`(&) 变成`&amp`.
*   `"`（双引号）变为`&quot`when`ENT_NOQUOTES`未设置。
*   `'`（单引号）`&#039`仅在`ENT_QUOTES`设置时变为。
*   `<`（小于）变成`&lt`。
*   `>`（大于）变为`&gt`。

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2009-04-24T06:06:38.777

我认为最好的方法是使用浏览器内置的 HTML 转义功能来处理许多情况。为此，只需在 DOM 树中创建一个元素并将`innerText`该元素的 设置为您的字符串。然后检索`innerHTML`元素的。浏览器将返回一个 HTML 编码的字符串。

```
function HtmlEncode(s)
{
  var el = document.createElement("div");
  el.innerText = el.textContent = s;
  s = el.innerHTML;
  return s;
} 
```

测试运行：

```
alert(HtmlEncode('&;\'><"')); 
```

输出：

```
&amp;;'&gt;&lt;" 
```

[Prototype JS 库](http://www.prototypejs.org/)也使用了这种转义 HTML 的方法，尽管与我给出的简单示例不同。

注意：您仍然需要自己转义引号（双引号和单引号）。您可以使用此处其他人概述的任何方法。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2009-04-24T05:15:00.587

你需要一个函数来做类似的事情

```
return mystring.replace(/&/g, "&amp;").replace(/>/g, "&gt;").replace(/</g, "&lt;").replace(/"/g, "&quot;"); 
```

但考虑到您对单引号/双引号的不同处理的愿望。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-04-24T06:45:00.777

此通用函数将每个非字母字符编码为其 HTML 代码（[数字字符引用](https://en.wikipedia.org/wiki/Numeric_character_reference)(NCR)）：

```
function HTMLEncode(str) {
    var i = str.length,
        aRet = [];

    while (i--) {
        var iC = str[i].charCodeAt();
        if (iC < 65 || iC > 127 || (iC>90 && iC<97)) {
            aRet[i] = '&#'+iC+';';
        } else {
            aRet[i] = str[i];
        }
    }
    return aRet.join('');
} 
```

[**编辑 2022** ] 更现代的方法：

```
const toHtmlEntities = (str, showInHtml = false) => 
  [...str].map( v => `${showInHtml ? `&amp;#` : `&#`}${v.charCodeAt(0)};`).join(``);
const str = `&Hellõ Wórld`;

document.body.insertAdjacentHTML(`beforeend`, `<ul>
  <li>Show the entities (<code>toHtmlEntities(str, true)</code>): <b>${
    toHtmlEntities(str, true)}</b></li>
  <li>Let the browser decide (<code>toHtmlEntities(str)</code>): <b>${
    toHtmlEntities(str)}</b></li>
  <li id="textOnly"></li></ul>`);
document.querySelector(`#textOnly`).textContent = `As textContent: ${
  toHtmlEntities(str)}`;
```

```
body {
  font: 14px / 18px "normal verdana", arial;
  margin: 1rem;
}

code {
  background-color: #eee;
}
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2019-01-24T12:16:46.490

对于那些想要**解码**字符串中的整数字符代码的人`&#xxx;`，请使用此函数：

```
function decodeHtmlCharCodes(str) { 
  return str.replace(/(&#(\d+);)/g, function(match, capture, charCode) {
    return String.fromCharCode(charCode);
  });
}

// Will output "The show that gained int’l reputation’!"
console.log(decodeHtmlCharCodes('The show that gained int&#8217;l reputation&#8217;!'));
```

## ES6

```
const decodeHtmlCharCodes = str => 
  str.replace(/(&#(\d+);)/g, (match, capture, charCode) => 
    String.fromCharCode(charCode));

// Will output "The show that gained int’l reputation’!"
console.log(decodeHtmlCharCodes('The show that gained int&#8217;l reputation&#8217;!'));
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2009-04-24T05:25:17.427

创建一个使用字符串的函数`replace`

```
function convert(str)
{
  str = str.replace(/&/g, "&amp;");
  str = str.replace(/>/g, "&gt;");
  str = str.replace(/</g, "&lt;");
  str = str.replace(/"/g, "&quot;");
  str = str.replace(/'/g, "&#039;");
  return str;
} 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2013-01-04T19:19:38.390

来自 Mozilla...

> 请注意，charCodeAt 将始终返回小于 65,536 的值。这是因为较高的代码点由一对（较低值的）“代理”伪字符表示，这些伪字符用于组成真实字符。因此，为了检查或再现值 65,536 及以上的单个字符的完整字符，对于此类字符，不仅需要检索 charCodeAt(i)，还需要检索 charCodeAt(i+1)（就像检查/ 用两个 > 字母复制一个字符串）。

最佳解决方案

```
/**
 * (c) 2012 Steven Levithan <http://slevithan.com/>
 * MIT license
 */
if (!String.prototype.codePointAt) {
    String.prototype.codePointAt = function (pos) {
        pos = isNaN(pos) ? 0 : pos;
        var str = String(this),
            code = str.charCodeAt(pos),
            next = str.charCodeAt(pos + 1);
        // If a surrogate pair
        if (0xD800 <= code && code <= 0xDBFF && 0xDC00 <= next && next <= 0xDFFF) {
            return ((code - 0xD800) * 0x400) + (next - 0xDC00) + 0x10000;
        }
        return code;
    };
}

/**
 * Encodes special html characters
 * @param string
 * @return {*}
 */
function html_encode(string) {
    var ret_val = '';
    for (var i = 0; i < string.length; i++) { 
        if (string.codePointAt(i) > 127) {
            ret_val += '&#' + string.codePointAt(i) + ';';
        } else {
            ret_val += string.charAt(i);
        }
    }
    return ret_val;
} 
```

使用示例：

```
html_encode("✈"); 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-12-11T19:54:12.860

正如[dragon 提到的](https://stackoverflow.com/questions/784586/convert-special-characters-to-html-in-javascript#comment12409492_784698)，最干净的方法是使用[jQuery](https://en.wikipedia.org/wiki/JQuery)：

```
function htmlEncode(s) {
    return $('<div>').text(s).html();
}

function htmlDecode(s) {
    return $('<div>').html(s).text();
} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2011-01-03T16:30:05.467

```
function char_convert() {

    var chars = ["©","Û","®","ž","Ü","Ÿ","Ý","$","Þ","%","¡","ß","¢","à","£","á","À","¤","â","Á","¥","ã","Â","¦","ä","Ã","§","å","Ä","¨","æ","Å","©","ç","Æ","ª","è","Ç","«","é","È","¬","ê","É","­","ë","Ê","®","ì","Ë","¯","í","Ì","°","î","Í","±","ï","Î","²","ð","Ï","³","ñ","Ð","´","ò","Ñ","µ","ó","Õ","¶","ô","Ö","·","õ","Ø","¸","ö","Ù","¹","÷","Ú","º","ø","Û","»","ù","Ü","@","¼","ú","Ý","½","û","Þ","€","¾","ü","ß","¿","ý","à","‚","À","þ","á","ƒ","Á","ÿ","å","„","Â","æ","…","Ã","ç","†","Ä","è","‡","Å","é","ˆ","Æ","ê","‰","Ç","ë","Š","È","ì","‹","É","í","Œ","Ê","î","Ë","ï","Ž","Ì","ð","Í","ñ","Î","ò","‘","Ï","ó","’","Ð","ô","“","Ñ","õ","”","Ò","ö","•","Ó","ø","–","Ô","ù","—","Õ","ú","˜","Ö","û","™","×","ý","š","Ø","þ","›","Ù","ÿ","œ","Ú"]; 
    var codes = ["&copy;","&#219;","&reg;","&#158;","&#220;","&#159;","&#221;","&#36;","&#222;","&#37;","&#161;","&#223;","&#162;","&#224;","&#163;","&#225;","&Agrave;","&#164;","&#226;","&Aacute;","&#165;","&#227;","&Acirc;","&#166;","&#228;","&Atilde;","&#167;","&#229;","&Auml;","&#168;","&#230;","&Aring;","&#169;","&#231;","&AElig;","&#170;","&#232;","&Ccedil;","&#171;","&#233;","&Egrave;","&#172;","&#234;","&Eacute;","&#173;","&#235;","&Ecirc;","&#174;","&#236;","&Euml;","&#175;","&#237;","&Igrave;","&#176;","&#238;","&Iacute;","&#177;","&#239;","&Icirc;","&#178;","&#240;","&Iuml;","&#179;","&#241;","&ETH;","&#180;","&#242;","&Ntilde;","&#181;","&#243;","&Otilde;","&#182;","&#244;","&Ouml;","&#183;","&#245;","&Oslash;","&#184;","&#246;","&Ugrave;","&#185;","&#247;","&Uacute;","&#186;","&#248;","&Ucirc;","&#187;","&#249;","&Uuml;","&#64;","&#188;","&#250;","&Yacute;","&#189;","&#251;","&THORN;","&#128;","&#190;","&#252","&szlig;","&#191;","&#253;","&agrave;","&#130;","&#192;","&#254;","&aacute;","&#131;","&#193;","&#255;","&aring;","&#132;","&#194;","&aelig;","&#133;","&#195;","&ccedil;","&#134;","&#196;","&egrave;","&#135;","&#197;","&eacute;","&#136;","&#198;","&ecirc;","&#137;","&#199;","&euml;","&#138;","&#200;","&igrave;","&#139;","&#201;","&iacute;","&#140;","&#202;","&icirc;","&#203;","&iuml;","&#142;","&#204;","&eth;","&#205;","&ntilde;","&#206;","&ograve;","&#145;","&#207;","&oacute;","&#146;","&#208;","&ocirc;","&#147;","&#209;","&otilde;","&#148;","&#210;","&ouml;","&#149;","&#211;","&oslash;","&#150;","&#212;","&ugrave;","&#151;","&#213;","&uacute;","&#152;","&#214;","&ucirc;","&#153;","&#215;","&yacute;","&#154;","&#216;","&thorn;","&#155;","&#217;","&yuml;","&#156;","&#218;"];

    for(x=0; x<chars.length; x++){
        for (i=0; i<arguments.length; i++){
            arguments[i].value = arguments[i].value.replace(chars[x], codes[x]);
        }
    }
 }

char_convert(this); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2010-01-30T11:12:17.453

```
function ConvChar(str) {
    c = {'&lt;':'&amp;lt;', '&gt;':'&amp;gt;', '&':'&amp;amp;',
         '"':'&amp;quot;', "'":'&amp;#039;', '#':'&amp;#035;' };

    return str.replace(/[&lt;&amp;>'"#]/g, function(s) { return c[s]; });
}

alert(ConvChar('&lt;-"-&-"->-&lt;-\'-#-\'->')); 
```

结果：

```
<-"-&-"->-<-'-#-'->

```

在 testarea 标签中：

```
<-"-&-"->-<-'-#-'->

```

如果您只是更改长代码中的几个字符...

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-02-24T11:25:13.343

如果您需要支持[**所有标准化的命名字符引用**](https://html.spec.whatwg.org/multipage/syntax.html#named-character-references)、[**Unicode**](https://mathiasbynens.be/notes/javascript-unicode)和[**模棱两可的 & 符号**](https://mathiasbynens.be/notes/ambiguous-ampersands)，那么[***he***](https://github.com/mathiasbynens/he)库是我所知道的唯一 100% 可靠的解决方案！

* * *

### 示例使用

```
he.encode('foo © bar ≠ baz  qux');
// Output: 'foo &#xA9; bar &#x2260; baz &#x1D306; qux'

he.decode('foo &copy; bar &ne; baz &#x1D306; qux');
// Output: 'foo © bar ≠ baz  qux' 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-09-21T01:13:09.097

在标签中 - 以及大多数其他 HTML 标签中 - 使用输出重定向字符 (和)`PRE`的批处理文件的纯文本会破坏 HTML，但这**是我的提示**：元素中的任何内容 - 它不会破坏 HTML，主要是因为我们在一个由操作系统实例化和处理的控件内部，因此 HTML 引擎不会解析它的内容。`<``>`**`TEXTAREA`**

 **例如，假设我想使用 JavaScript 突出显示批处理文件的语法。我只是将代码粘贴到 textarea 中，而不用担心 HTML 保留字符，并让脚本处理`innerHTML`textarea 的属性，该属性评估文本，并将 HTML 保留字符替换为相应的[ISO 8859-1](https://en.wikipedia.org/wiki/ISO/IEC_8859-1)实体。

`innerHTML`当您检索元素的(and `outerHTML`) 属性时，浏览器将自动转义特殊字符。使用 textarea（谁知道呢，可能是文本类型的输入）只是让您免于进行转换（手动或通过代码）。

我使用这个技巧来测试我的语法荧光笔，当我完成创作和测试时，我只是从视图中隐藏了 textarea。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-02-28T08:38:46.293

一种解决方法：

```
var temp = $("div").text("<");
var afterEscape = temp.html(); // afterEscape == "&lt;" 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2011-04-11T21:50:22.990

采用：

```
var swapCodes   = new Array(8211, 8212, 8216, 8217, 8220, 8221, 8226, 8230, 8482, 169, 61558, 8226, 61607);
var swapStrings = new Array("--", "--", "'",  "'",  '"',  '"',  "*",  "...", "&trade;", "&copy;", "&bull;", "&bull;", "&bull;");

var TextCheck = {
    doCWBind:function(div){
        $(div).bind({
            bind:function(){
                TextCheck.cleanWord(div);
            },
            focus:function(){
                TextCheck.cleanWord(div);
            },
            paste:function(){
                TextCheck.cleanWord(div);
            }
        });
    },
    cleanWord:function(div){
        var output = $(div).val();
        for (i = 0; i < swapCodes.length; i++) {
            var swapper = new RegExp("\\u" + swapCodes[i].toString(16), "g");
            output = output.replace(swapper, swapStrings[i]);
        }
        $(div).val(output);
    }
} 
```

我们现在使用的另一种有效。上面的那个我让它调用一个脚本并返回转换后的代码。它只适用于小文本区域（意味着文章、博客等不完整）

* * *

对于上述。它适用于大多数角色。

```
var swapCodes   = new Array(8211, 8212, 8216, 8217, 8220, 8221, 8226, 8230, 8482, 61558, 8226, 61607, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 338, 339, 352, 353, 376, 402);
var swapStrings = new Array("--", "--", "'",  "'",  '"',  '"',  "*",  "...", "&trade;", "&bull;", "&bull;", "&bull;", "&iexcl;", "&cent;", "&pound;", "&curren;", "&yen;", "&brvbar;", "&sect;", "&uml;", "&copy;", "&ordf;", "&laquo;", "&not;", "&shy;", "&reg;", "&macr;", "&deg;", "&plusmn;", "&sup2;", "&sup3;", "&acute;", "&micro;", "&para;", "&middot;", "&cedil;", "&sup1;", "&ordm;", "&raquo;", "&frac14;", "&frac12;", "&frac34;", "&iquest;", "&Agrave;", "&Aacute;", "&Acirc;", "&Atilde;", "&Auml;", "&Aring;", "&AElig;", "&Ccedil;", "&Egrave;", "&Eacute;", "&Ecirc;", "&Euml;", "&Igrave;", "&Iacute;", "&Icirc;", "&Iuml;", "&ETH;", "&Ntilde;", "&Ograve;", "&Oacute;", "&Ocirc;", "&Otilde;", "&Ouml;", "&times;", "&Oslash;", "&Ugrave;", "&Uacute;", "&Ucirc;", "&Uuml;", "&Yacute;", "&THORN;", "&szlig;", "&agrave;", "&aacute;", "&acirc;", "&atilde;", "&auml;", "&aring;", "&aelig;", "&ccedil;", "&egrave;", "&eacute;", "&ecirc;", "&euml;", "&igrave;", "&iacute;", "&icirc;", "&iuml;", "&eth;", "&ntilde;", "&ograve;", "&oacute;", "&ocirc;", "&otilde;", "&ouml;", "&divide;", "&oslash;", "&ugrave;", "&uacute;", "&ucirc;", "&uuml;", "&yacute;", "&thorn;", "&yuml;", "&#338;", "&#339;", "&#352;", "&#353;", "&#376;", "&#402;"); 
```

* * *

我创建了一个具有很多功能的 javascript 文件，包括上述功能。 [http://www.neotropicsolutions.com/JSChars.zip](http://www.neotropicsolutions.com/JSChars.zip)

包括所有需要的文件。我添加了 jQuery 1.4.4。只是因为我在其他版本中看到了问题，还没有尝试过。

```
Requires: jQuery & jQuery Impromptu from: http://trentrichardson.com/Impromptu/index.php

1\. Word Count
2\. Character Conversion
3\. Checks to ensure this is not passed: "notsomeverylongstringmissingspaces"
4\. Checks to make sure ALL IS NOT ALL UPPERCASE.
5\. Strip HTML

    // Word Counter
    $.getScript('js/characters.js', function(){
        $('#adtxt').bind("keyup click blur focus change paste",
            function(event){
                TextCheck.wordCount(30, "#adtxt", "#adtxt_count", event);
        });
        $('#adtxt').blur(
            function(event){
                TextCheck.check_length('#adtxt'); // unsures properly spaces-not one long word
                TextCheck.doCWBind('#adtxt'); // char conversion
        });

        TextCheck.wordCount(30, "#adtxt", "#adtxt_count", false);
    });

    //HTML
    <textarea name="adtxt" id="adtxt" rows="10" cols="70" class="wordCount"></textarea>

    <div id="adtxt_count" class="clear"></div>

    // Just Character Conversions:
    TextCheck.doCWBind('#myfield');

    // Run through form fields in a form for case checking.
    // Alerts user when field is blur'd.
    var labels = new Array("Brief Description", "Website URL", "Contact Name", "Website", "Email", "Linkback URL");
    var checking = new Array("descr", "title", "fname", "website", "email", "linkback");
    TextCheck.check_it(checking, labels);

    // Extra security to check again, make sure form is not submitted
    var pass = TextCheck.validate(checking, labels);
    if(pass){
        // Do form actions
    }

    //Strip HTML
    <textarea name="adtxt" id="adtxt" rows="10" cols="70" onblur="TextCheck.stripHTML(this);"></textarea> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-07-23T06:33:47.677

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>html</title>

        <script>
            $(function() {
                document.getElementById('test').innerHTML = "&amp;";
            });
        </script>
    </head>

    <body>
        <div id="test"></div>
    </body>
</html> 
```

您可以使用上面的代码简单地将特殊字符转换为 HTML。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-11-19T09:28:57.890

这是一个很好的库，我发现在这种情况下非常有用。

[https://github.com/mathiasbynens/he](https://github.com/mathiasbynens/he)

据其作者称：

> 它支持按照 HTML 的所有标准化命名字符引用，像浏览器一样处理模棱两可的 & 和其他边缘情况，具有广泛的测试套件，并且 - 与许多其他 JavaScript 解决方案相反 - 他可以很好地处理星体 Unicode 符号

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-08-30T21:13:59.170

```
function escape (text)
{
  return text.replace(/[<>\&\"\']/g, function(c) {
    return '&#' + c.charCodeAt(0) + ';';
  });
}

alert(escape("<>&'\"")); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-01-18T00:52:47.353

这并不能直接回答您的问题，但是如果您正在使用`innerHTML`以在元素中编写文本并且遇到编码问题，请使用`textContent`，即：

```
var s = "Foo 'bar' baz <qux>";

var element = document.getElementById('foo');
element.textContent = s;

// <div id="foo">Foo 'bar' baz <qux></div> 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-07-26T13:57:49.853

以下是我无需[jQuery](https://en.wikipedia.org/wiki/JQuery)即可使用的几种方法：

您可以对字符串中的**每个字符进行编码**：

```
function encode(e){return e.replace(/[^]/g, function(e) {return "&#" + e.charCodeAt(0) + ";"})} 
```

或者只是针对主要的**安全编码字符**来担心（&、inebreaks、<、>、“和'），例如：

```
function encode(r){
    return r.replace(/[\x26\x0A\<>'"]/g, function(r){return "&#" + r.charCodeAt(0) + ";"})
}

test.value = encode('How to encode\nonly html tags &<>\'" nice & fast!');

/*************
* \x26 is &ampersand (it has to be first),
* \x0A is newline,
*************/
```

```
<textarea id=test rows="9" cols="55">www.WHAK.com</textarea>
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-11-05T07:08:16.457

我们可以使用 JavaScript 的`DOMParser`特殊字符转换。

```
const parser = new DOMParser();
const convertedValue = (parser.parseFromString("&#039 &amp &#039 &lt &gt", "application/xml").body.innerText; 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-12-16T07:25:48.953

以下是在 JavaScript 中对 XML 转义字符进行编码的函数：

```
Encoder.htmlEncode(unsafeText); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-10-04T06:02:50.350

如果您使用的是[Lodash](https://lodash.com/)，您可以这样做（从文档中复制粘贴）：

```
_.escape('fred, barney, & pebbles');
// => 'fred, barney, &amp; pebbles' 
```

更多信息： _. *[escape([string=''])](https://lodash.com/docs/4.17.15#escape)*

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-01-13T17:52:17.953

我自己为此苦苦挣扎了很长一段时间，但我决定使用这个否定匹配正则表达式来匹配所有特殊字符并将它们转换为相关的字符代码：

```
var encoded = value.replace(/[^A-Za-z0-9]/g, function(i) {
    return '&#' + i.charCodeAt(0) + ';';
}); 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2009-04-24T05:35:27.340

```
<html>
    <body>
        <script type="text/javascript">
            var str = "&\"'<>";
            alert('B4 Change: \n' + str);

            str = str.replace(/\&/g, '&amp;');
            str = str.replace(/</g,  '&lt;');
            str = str.replace(/>/g,  '&gt;');
            str = str.replace(/\"/g, '&quot;');
            str = str.replace(/\'/g, '&#039;');

            alert('After change: \n' + str);
        </script>
    </body>
</html> 
```

使用它来测试：[http ://www.w3schools.com/js/tryit.asp?filename=tryjs_text](http://www.w3schools.com/js/tryit.asp?filename=tryjs_text)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2010-03-03T15:13:51.683

是的，但是如果您需要将结果字符串插入某处而不将其转换回来，则需要执行以下操作：

```
str.replace(/'/g,"&amp;amp;#39;"); // and so on 
```

* * *

## 回答 #25

> 赞同：-4
> 
> 时间：2012-06-07T06:31:05.273

使用 JavaScript 函数[escape()](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Functions#escape_and_unescape_functions)，它可以让您对字符串进行编码。

**例如，**

```
escape("yourString"); 
```

# asp.net - 来自数据层的基于授权的内容

> ID：784592
> 
> 赞同：0
> 
> 时间：2009-04-24T05:06:11.370
> 
> 标签：asp.net, asp.net-mvc

我正在一个网络论坛上工作，或者很好，尝试使用 ASP.NET MVC 设计一个。然而，与简单地使用 [Authorize] 属性相比，基于用户角色的内容是一个更大的挑战，因为给定的输出因访问角色而异。

因此，虽然版主角色的用户成员应该能够看到秘密子板，但普通成员角色的用户部分不应该。

为此，我需要正确设计我的数据层，但它让我很困惑如何做到这一点，因为我真的想遵循 MVC 模式并在控制器中应用过滤，但问题出现在嵌套的内容和关系上。

因为如果 IList 中的 Category.Forum 对给定用户不可见，那么我将需要使用单个数据库查询来获取 Category.Forum，而适当的数据层会尝试将其拆分为两个 DA 模块、类别DA 和ForumDA。

另一件事是通过会员系统对用户角色的整个应用，因为一个用户可以有多个角色。

这有点难以解释，但我想很多人都熟悉典型的公告板，也许可以给我一些想法，如何正确设计我的数据访问层。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-07T20:49:15.300

创建自己的操作过滤器来进行授权可能比使用基本的 [Authorize] 属性更容易。像这样：

```
public class CheckPermission : ActionFilterAttribute
{
    public override void OnActionExecuting
        (ActionExecutingContext filterContext)
    {
        try
        {
            // do your security checks here
            // if NOT allow, throw NOTAUTHORIZED exception
        }
        catch (Exception ex)
        {
            // handle how to redirect - auto logout, etc
        }
        finally
        {
            base.OnActionExecuting(filterContext);
        }
    }
} 
```

# flash - 动作脚本 3 中的奇怪数学？

> ID：784594
> 
> 赞同：-1
> 
> 时间：2009-04-24T05:07:17.220
> 
> 标签：flash, actionscript, floating-point

### 复制：

> *   [为什么我看到一个双变量初始化为 21.4 之类的某个值作为 21.399999618530273？](https://stackoverflow.com/questions/177506/why-do-i-see-a-double-variable-initialized-to-some-value-like-21-4-as-21-39999961)
> *   [JavaScript 的数学是坏的吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)
> *   对于每种语言和平台，许多其他问题都有相同的答案。

* * *

```
trace( ">> " + (399.6-(Math.floor(399.6))) ); 
```

打印出来

```
>> 0.6000000000000227 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T05:12:00.593

浮点舍入错误。浮点数不能准确地表示某些值，所以您看到的是使用 FP 数的局限性。尾数（FP num 中给出精度的部分）只有一定数量的位，当某些东西不能精确表示时，你会得到类似上面的结果。我知道 0.1 不能准确表示，所以 0.6 也不能准确表示是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T05:39:41.010

本质上，浮点数的小数部分是求和：

```
1/2 + 1/4 + 1/8 + ... 
```

其中每个分数都是浮点表示的一位。正如paintballbob 提到的，这意味着有些数字无法表示（例如0.1）。

据我所知，AS3 没有内置定点小数（尽管有第三方库）。

# .net - Windows 到 Mac 的转换

> ID：784598
> 
> 赞同：1
> 
> 时间：2009-04-24T05:09:05.763
> 
> 标签：.net, macos

我只是在 .Net 和 Windows 方面有开发经验……现在我真的很想有一些在 Mac 上开发的经验。那么，伙计们，我该如何进行（好吧，我会先获得Mac），请提出建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T05:12:48.813

我建议你先学习Objective-C。它是基于 C 的语言，具有主要从 smalltalk 继承的面向对象的功能。

我发现[这](https://rads.stackoverflow.com/amzn/click/com/0321213149)本书很棒。（我认为第三版即将到来）

当然，您必须习惯 XCode 和 Apple 提供的开发工具（gdb、instruments）。我想你会想念 Visual Studio（在我看来它比 XCode 更可靠），但你会得到 Cocoa 经验的回报。您可以让您的应用程序看起来非常整洁，无需太多工作。

这样做的好处是您也可以为 iPhone 开发。虽然不是完全相同的框架（Cocoa 与 Cocoa Touch），但它们共享基本概念和编程语言。

# algorithm - 新闻聚类

> ID：784602
> 
> 赞同：13
> 
> 时间：2009-04-24T05:10:26.493
> 
> 标签：algorithm, cluster-analysis

Google 新闻和 Techmeme 如何对相似的新闻项目进行聚类？是否有任何众所周知的算法用于实现这一目标？

感谢你的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T05:22:14.640

基于内容对文本进行聚类的一种相当常见的方法是对词向量使用主[成分分析](http://en.wikipedia.org/wiki/Principal_components_analysis)（一个 n 维向量，其中每个可能的词代表一个维度，并且对于每个向量，每个方向上的大小是该特定文章中的单词），然后是简单的聚类，例如 K-Means。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-05T09:16:53.953

算法基础是凝聚聚类或类似的东西。但除此之外还有许多启发式方法。例如，向量空间肯定由单词和短语（单词 n-gram）组成。将搜索限制在严格的时间段内也非常重要。识别名称，更多地衡量标题和段落标题也是关键部分。

在切线相关的注释上。如果您有兴趣查找几乎重复的文章，那么有许多更易于实施的方法，例如[此处描述的方法](http://glinden.blogspot.com/2008/08/clever-method-of-near-duplicate.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T20:16:08.237

有几种不同的方法可以做到这一点。标准是做“词袋”分析（加权TF-IDF），然后做余弦相似度和k-means。

我在这篇论文上取得了成功：http: //ieeexplore.ieee.org/xpl/articleDetails.jsp?reload=true&arnumber= [4289851](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?reload=true&arnumber=4289851)

它的伟大之处在于：1）它是增量的，这对新闻来说非常有用。使用标准 k-means，您需要拥有整个数据集。对于新闻，您通常会有文章随着时间的推移而到达。增量算法解决了这个问题。2）它是基于短语的。所以它依赖于短语而不仅仅是单词。

最近，出现了一些使用语义而不是单词的技术（例如，通过从每篇文章中提取 Wikipedia 或 DBPedia 概念，并使用它们而不只是单词）。

# c# - 大型 WCF Web 服务请求因 (400) HTTP 错误请求而失败

> ID：784606
> 
> 赞同：75
> 
> 时间：2009-04-24T05:12:56.707
> 
> 标签：c#, .net, wcf, web-services

我遇到了这个明显常见的问题，但一直无法解决。

**如果我在数组参数中使用相对较少的项目调用我的 WCF Web 服务（我已经测试了多达 50 个），那么一切都很好。**

**但是，如果我使用 500 个项目调用 Web 服务，则会收到错误请求错误。**

有趣的是，我在服务器上运行了[Wireshark](http://www.wireshark.org/)，看起来请求甚至没有到达服务器——客户端正在生成 400 错误。

**例外是：**

> System.ServiceModel.ProtocolException：远程服务器返回意外响应：（400）错误请求。---> System.Net.WebException：远程服务器返回错误：（400）错误请求。

**我的客户端配置文件的`system.serviceModel`部分是：**

```
 <system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IMyService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="2147483647"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="None">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        establishSecurityContext="true" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://serviceserver/MyService.svc"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IMyService"
            contract="SmsSendingService.IMyService" name="WSHttpBinding_IMyService" />
    </client>
</system.serviceModel> 
```

**在服务器端，我的 web.config 文件有以下`system.serviceModel`部分：**

```
<system.serviceModel>
    <services>
        <service name="MyService.MyService" behaviorConfiguration="MyService.MyServiceBehaviour" >
            <endpoint address="" binding="wsHttpBinding" bindingConfiguration="MyService.MyServiceBinding" contract="MyService.IMyService">
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="MyService.MyServiceBinding">
          <security mode="None"></security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
            <behavior name="MyService.MyServiceBehaviour">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

我已经[查看](https://stackoverflow.com/questions/740039/c-wcf-wcf-service-returning-a-404-bad-request-when-sending-an-array-of-items)了[这个问题](http://www.experts-exchange.com/Programming/Languages/.NET/Web_Services/Q_24002313.html)的[相当](https://stackoverflow.com/questions/323551/http-bad-request-error-when-requesting-a-wcf-service-contract) [多](http://rajaramtechtalk.wordpress.com/2008/05/29/systemservicemodelprotocolexception-the-remote-server-returned-an-unexpected-response-400-bad-request/)的[答案](http://www.stonejunction.com/post/2008/12/01/WCF-Call-gives-400-Bad-Request-response.aspx)，但[没有成功](http://joewirtley.blogspot.com/2007/08/maximum-string-content-length-and.html)。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2009-04-24T06:00:16.077

尝试在服务器上设置 maxReceivedMessageSize，例如设置为 4MB：

```
<binding name="MyService.MyServiceBinding" maxReceivedMessageSize="4194304"> 
```

默认值（我相信是 65535）如此之低的主要原因是为了降低拒绝服务 (DoS) 攻击的风险。您需要将其设置为大于服务器上的最大请求大小和客户端上的最大响应大小。如果您在 Intranet 环境中，DoS 攻击的风险可能很低，因此使用远高于您预期需要的值可能是安全的。

顺便说一下，解决连接到 WCF 服务的问题的一些技巧：

*   如[本 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms733025.aspx)中所述，在服务器上启用跟踪。

*   [使用客户端上的Fiddler](http://www.fiddler2.com/fiddler2/)等HTTP 调试工具检查 HTTP 流量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-11-12T11:58:28.310

我也遇到了这个问题，但是上面没有一个对我有用，因为我在长时间挖掘后使用自定义绑定（用于 BinaryXML）我在这里找到了答案：[Sending large XML from Silverlight to WCF](https://stackoverflow.com/questions/2882465)

在使用 customBinding 时，必须在 web.config 中 binding 元素下的 httpTransport 元素上设置 maxReceivedMessageSize：

```
<httpsTransport maxReceivedMessageSize="4194304" /> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-01-26T18:39:25.517

值得一提的是，使用 .NET 4.0 时的另一个考虑因素是，如果在您的配置中找不到有效端点，则会自动创建和使用默认端点。

默认端点将使用所有默认值，因此如果您认为您的服务配置具有较大的 maxReceivedMessageSize 等值，但配置有问题，您仍然会收到 400 Bad Request，因为默认端点将是创建和使用。

这是静默完成的，因此很难检测到。如果您在服务器上打开跟踪但没有其他指示（据我所知），您将看到有关此效果的消息（例如“未找到服务的端点，创建默认端点”或类似的）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2011-05-12T16:55:33.037

在 web.config 中的 .NET 4.0 服务器中，您还需要更改默认绑定。设置以下 3 个参数：

```
<basicHttpBinding>  
    <!-- http://www.intertech.com/Blog/post/NET-40-WCF-Default-Bindings.aspx  
         Enable transfer of large strings with maxBufferSize, maxReceivedMessageSize and maxStringContentLength
    -->  
       <binding **maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"**>  
          <readerQuotas **maxStringContentLength="2147483647"**/>            
       </binding>
</basicHttpBinding> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-24T05:28:25.577

调试客户端可能很有用，关闭 Tools\Options\Debugging\General\'Enable Just My Code'，单击 Debug\Exceptions\'catch all first-chance exceptions' 以获取托管 CLR 异常，然后查看是否有在协议异常之前和消息到达网络之前，客户端上的异常。（我的猜测是某种序列化失败。）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-26T22:39:45.800

您还可以打开 WCF 日志记录以获取有关原始错误的更多信息。这帮助我解决了这个问题。

将以下内容添加到您的 web.config，它将日志保存到 C:\log\Traces.svclog

```
<system.diagnostics>
    <sources>
        <source name="System.ServiceModel"
                  switchValue="Information, ActivityTracing"
                  propagateActivity="true">
            <listeners>
                <add name="traceListener"
                     type="System.Diagnostics.XmlWriterTraceListener"
                     initializeData= "c:\log\Traces.svclog" />
            </listeners>
        </source>
    </sources>
</system.diagnostics> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-04-26T20:58:48.150

只想指出

除了 MaxRecivedMessageSize 之外，ReaderQuotas 下还有一些属性，您可能会达到项目数量限制而不是大小限制。MSDN 链接在[这里](http://msdn.microsoft.com/en-us/library/ms731325.aspx)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-03-05T05:13:57.870

我找到了 Bad Request 400 问题的答案。

这是默认的服务器绑定设置。您需要添加到服务器和客户端默认设置。

```
<binding name="" openTimeout="00:10:00" closeTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00" maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647" maxBufferSize="2147483647">
    <security mode="None"/>
    <readerQuotas maxStringContentLength="2147483647"/>
</binding> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-03-03T12:57:33.247

就我而言，即使尝试了所有解决方案并将所有限制设置为最大值，它也无法正常工作。最后，我发现在 IIS/网站上安装了一个 Microsoft IIS 过滤模块[Url Scan 3.1](https://www.iis.net/downloads/microsoft/urlscan "网址扫描 3.1")，它有自己的限制，可以根据内容大小拒绝传入的请求并返回“404 Not found page”。

它的限制可以通过设置为所需的值在`%windir%\System32\inetsrv\urlscan\UrlScan.ini`文件中更新。`MaxAllowedContentLength`

例如。以下将允许最多 300 mb 的请求

MaxAllowedContentLength=314572800

希望它会帮助别人！

# sql - SQL严格执行日期列的顺序

> ID：784607
> 
> 赞同：0
> 
> 时间：2009-04-24T05:13:03.757
> 
> 标签：sql

我有一个具有以下架构的表（比如 TableA）

```
A(int)    B(int)    D (varchar)    C(date) 
```

如果我写查询

```
select A, C from TableA where A >=0 order by A asc, B asc, D asc, C asc. 
```

查询的最后一行将具有最大的 C 日期列（我的意思是最新的大于所有其他日期）。那是对的吗？我已经通过对表的小查询进行了验证，但想要验证，根据日期查询强制执行严格的排序是唯一的选择

```
select A, C from TableA where A >=0 order by C asc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T05:19:28.313

order-by 优先级是从左到右的，因此，如果您希望 date 成为主要的排序字段，则需要以下内容。

```
select A, C from TableA where A >=0 order by C asc, A asc, B asc, D asc 
```

您提供的第二个查询按日期顺序执行，但您丢失了所有其他排序条件。

# winforms - 如何在 Windows 窗体中实现安全组件？

> ID：784608
> 
> 赞同：8
> 
> 时间：2009-04-24T05:13:25.410
> 
> 标签：winforms, security, user-management

从 ASP.NET 进入 WindowsForms 应用程序开发，我期待看到类似的控件可以使用。令我惊讶的是，我没有看到任何安全控制（登录、用户管理等）

我是否遗漏了什么，或者我必须为应用程序实现自己的安全性（基于角色的安全性、用户管理等）？

该应用程序供内部使用（10 -20 个用户），但由于敏感数据，安全性非常重要。（MSSQL Server 2005 在后端，.NET 3.5）

任何信息，将不胜感激。

### 编辑：

我想我的问题是“在 WinForms 中是否有类似 ASP.NET 的成员资格提供程序？”

### 编辑2：

经过一些谷歌搜索后，我找到[了这篇文章](http://forums.asp.net/p/953477/1168282.aspx#1168282)，我会尝试一下，任何其他建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-23T16:29:02.890

由于您没有公认的答案，并且由于我在研究另一个问题时偶然发现了这个问题，因此我将尽力为您提供一些指示。

正如已经指出的那样，win forms应用程序中的用户管理和基于角色的安全性并不是真正可以在客户端工作的东西。在网络类比中，想象一下尝试仅使用 javascript 和 cookie 来实现所有安全性，而不在服务器端保留任何信息。默认情况下它是不安全的。

正如还建议的那样，您可以在数据库上实施安全性，并让您的用户从您的 win 表单直接连接到数据库。我强烈建议您不要参加这样的课程。用户管理将成为一场噩梦。你*需要*一个中间层。

您应该做的是构建一个实现基于角色的安全性的 Web 服务（因为您熟悉它 - 那里有更好的授权选项）并具有自定义身份验证存储。如果您使用 WCF 构建 Web 服务，则可以使用与 ASP.NET 中相同的 RoleProvider 和 MembershipProvider 类。

该 Web 服务处理系统的所有业务逻辑，并负责连接到数据库。它提供了一个安全的抽象层，并减少了管理用户所需的数据库管理量。您的 win forms 应用程序变成了一个 UI 外壳，只负责处理用户交互和前期数据验证（您还应该在中间层进行验证），不负责其他任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T11:45:45.323

微软发布了客户端应用程序服务来做我认为你正在寻找的东西......

[http://msdn.microsoft.com/en-us/library/bb384297.aspx](http://msdn.microsoft.com/en-us/library/bb384297.aspx)是官方文档 [http://aspalliance.com/1595_Client_Application_Services__Part_1](http://aspalliance.com/1595_Client_Application_Services__Part_1)是一个不错的教程（带有屏幕截图等）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-28T10:39:11.453

大多数情况下，Windows 窗体应用程序用于具有 Windows 域帐户的内部网络。
在这种情况下，您应该使用“集成安全性”连接到数据库并测试用户是否通过了身份验证

```
 WindowsIdentity winIdentCurrent = WindowsIdentity.GetCurrent();
 if (winIdentCurrent != null)
 {
      Console.Write("WindowsIdentity.GetCurrent(): ");
      Console.WriteLine(winIdentCurrent.Name);
      Console.Write("WindowsIdentity.GetCurrent() IsAuthenticated: ");
      Console.WriteLine(winIdentCurrent.IsAuthenticated);
      // Everything is fine, trust Windows API :-)
 } 
```

否则
通过您自己的方法验证用户/通行证（数据库调用）

1.  使用通用连接字符串
    （不推荐）
2.  将连接字符串的用户/密码设置为经过身份验证的用户/密码

并将 Thread.CurrentPrincipal 设置为您自己的 Principal 对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-28T12:09:19.100

我一直在寻找相同的东西，直到现在才找到任何东西。看一下这个：

这里不多：WinForms 中的 NET 提供程序 [http://windark.net/blog/PermaLink,guid,5341a7d0-4eab-473d-9143-a3fa6c41db90.aspx](http://windark.net/blog/PermaLink,guid,5341a7d0-4eab-473d-9143-a3fa6c41db90.aspx)

解决方案在这里。一个很好的示例（在 VB 中）：在 Windows 窗体应用程序中使用 ASP.NET 成员资格提供程序 [http://www.theproblemsolver.nl/usingthemembershipproviderinwinforms.htm](http://www.theproblemsolver.nl/usingthemembershipproviderinwinforms.htm)

但后来我想，是否有人也为 Winforms 编写了等效的 aspnet 控件？开头是 MSDN Mag 文章：Unify Windows Forms and ASP.NET Providers for Credentials Management [http://msdn.microsoft.com/en-us/magazine/cc163807.aspx](http://msdn.microsoft.com/en-us/magazine/cc163807.aspx)

我希望这回答了你的问题 ;）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T05:33:54.317

如果您直接连接到数据库（无中间层），则需要在数据库级别应用您的安全性。

如果您有更多关于您是否计划从客户端计算机或通过 Web 服务等直接连接到数据库的信息，我可以更新我的答案以反映这一点。

直接连接到数据库时，您需要确保数据库不仅对您的应用程序而且对任何可以连接到 SQL Server 的人都是安全的。您可以使用 Windows 身份验证连接到 SQL Server 并基于此设置角色。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T05:54:23.253

对于登录表单，我使用我自己的组件，它是对 CredentialsUIPromptForCredentials (credui.dll) 的 ap/invoke 调用的包装，有关更多信息，请参阅[此 MSDN 文章](http://www.microsoft.com/indonesia/msdn/credmgmt.aspx)。它提供了安全记住用户密码等功能。

令人惊讶的是，这在框架中不可用。可能是因为 credui.dll 仅在 XP 及更高版本上可用，在这种情况下，我们可能会在框架的未来版本中看到它。

至于基于角色的安全性，它在客户端应用程序中本质上是不安全的，因为聪明的用户可以使用反汇编程序访问您的源代码。

因此，虽然您可以在 WinForms 应用程序中使用 ASP.NET RoleManager，但并不积极鼓励它。使用 RoleManager，用户只需在配置文件中用他自己更自由的实现替换您的 RoleManager，即可绕过您精心设计的授权规则。

安全的方法是提示输入凭据（或使用 Windows 凭据），并将这些传递给服务层（直接数据库，或例如 Web 服务）进行身份验证。

# c# - 使用 Unity 框架对数据访问层进行单元测试

> ID：784609
> 
> 赞同：0
> 
> 时间：2009-04-24T05:14:16.530
> 
> 标签：c#, visual-studio-2008, unit-testing, dependency-injection, unity-container

我接近完成我的数据库，到目前为止，16 个表，我需要为这个 ASP.NET 项目对我的 DAO 层进行单元测试。

我正在使用 Unity 框架来解耦层，所以我希望我应该能够将 DAO 层分配给我的单元测试，这将针对接口进行测试，因为注入了具体的类。

我正在使用 C# 2008 Express 进行单元测试。

我从未尝试过针对接口创建测试，我希望它会起作用，但我会在最终更好地实现 DAO 层后尝试它。

使用 VS2008 Express 附带的单元测试框架是否可以正常工作？

编辑：正如前面提到的，Express 版本没有单元测试选项，所以我将使用 NUnit 进行单元测试并将直接进入数据库，这样我就可以测试数据库中的所有功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T07:14:21.093

我的印象是没有与 Express Edition 捆绑的单元测试框架，但是您显然拥有一个。

当使用 Unity Framework 时，编写单元测试应该没有问题。这应该是提供适当的配置文件或手动填充容器的问题。我发现使用[Rhino Mocks创建 Mocks 和 Stubs 并使用 Unity 容器的](http://ayende.com/projects/rhino-mocks.aspx)[RegisterInstance](http://msdn.microsoft.com/en-us/library/cc440947.aspx#ks_existingobject)方法将它们注册到容器中的组合允许非常彻底和灵活的测试。

# mobile - 智能手机推荐

> ID：784614
> 
> 赞同：0
> 
> 时间：2009-04-24T05:18:22.323
> 
> 标签：mobile, smartphone

我正在寻找最有可能从 at&t（当前提供商）获得智能手机，并且我希望能够自由地为它编写小型应用程序。我不想要 iPhone，但对几乎任何其他人都持开放态度。

**对于哪些智能手机易于编程或最适合编程，您有什么建议吗？**

*请说明这些手机的编程语言。这并不重要，但我很好奇*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T05:29:47.070

我知道诺基亚并不是美国最热门的智能手机选择，但 S60 第 5 版设备中的新[Web Runtime Widgets](http://www.forum.nokia.com/info/sw.nokia.com/id/fd9cc12e-5eed-40ec-a439-c77f845fed73/Web_Developers_Library.html)让开发变得异常简单！借助小部件运行时，您可以仅使用 HTML/CSS/Javascript 制作非常酷的功能应用程序。

我个人有一个支持 WRT 1.0 的诺基亚 E51 (S60 3.2)，它允许您制作可以像本地 symbian 应用程序一样安装的简单小部件，但是 S60 第 5 版设备（5800、N97）带有 WRT 1.1，它允许 Javascript 访问手机的内部资源（日历、联系人等，甚至是加速度计！），这些资源为一些非常酷的应用程序提供了基础，这些应用程序开发起来非常简单！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T05:22:26.277

除了 iPhone……你还有……运行 Android 的 T-Mobile 的 G1。那是用Java编程的。

Palm 即将推出 Pre（未来几个月），运行 WebOS 并使用 Javascript 编程？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T10:03:58.113

正如 Tommi Forsström 所说，Nokia 5800 拥有最新的 Symbian OS。或者，我认为 E71 在 AT&T 上可用。

在 symbian 手机上，您现在可以使用以下运行时进行开发：

*   原生 Symbian OS C++
*   打开更接近ANSI标准的C/C++
*   红宝石
*   JavaME
*   Python
*   Webkit 小部件
*   Opera 小部件
*   .Net 2.0
*   基本型
*   可能仍然有可用的 OPL 解释器。

随着平台的开源，应该很快就会有更多/更好的编程语言可用。

无耻插件：如果您想开始使用 Symbian OS C++，最新的努力将开发人员尽可能容易地介绍到 Symbian 生态系统是[http://developer.symbian.com/quick](http://developer.symbian.com/quick)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T09:18:01.970

我发现这篇文章内容丰富：[智能手机平台的开发者视角](http://www.tmcnet.com/usubmit/2009/01/20/3927631.htm)。它写于 2009 年 1 月，涵盖 iPhone、Android、黑莓、诺基亚 Symbian 和 Windows Mobile 设备。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T05:49:45.883

我很快就会得到我自己的G1。我目前正在为公司的 G1 开发应用程序 - 使用 Java。我认为它是比 iPhone 更好的平台，因为 Java 比 Objective-C IMO 更容易、更普及。随着即将到来的 1.5 Cupcake 更新将成为更加可行的选择。

# reverse-engineering - 发布一个游戏 MMORPG 的程序在道德上是否合理？

> ID：784617
> 
> 赞同：24
> 
> 时间：2009-04-24T05:20:13.380
> 
> 标签：reverse-engineering, botnet

我大概已经编写了一些第一批代码来修改流行的新 MMORPG 的内存，从而创建一个宏框架，允许高级自动化反应、技能/级别增益、大规模数据检索和机器人。

以这种方式自动化任务是我最大的荣幸，我不禁认为任何手动方法都是“坏掉的”。事实上，我发现自己什至无法完成单人游戏，然后再剖析他们的机制并进行游戏，以一种专门的只读（不是作弊，本身）鼠标和键盘输入的方式。用我自己的编程知识补充我朝着游戏相关目标的进步似乎很自然，否则真的不*好玩*，就像在 FPS 中忽略你的枪支一样。

由于我喜欢这种形式的逆向工程，我认为其他人也会这样做，他们至少会欣赏最终结果。我倾向于觉得一个项目应该以某种方式“发布”：被出售、开源或免费分发。“独乐乐不如众乐乐。” 否则只有我和我的时间槽。

**问题**是这种性质的项目涉及几种道德立场：

1.  一个邪恶被释放到虚拟世界。有程序的人有优势，游戏不平衡，你要使用，只是为了平起平坐。它不再是关于游戏，而是工具，一场军备竞赛。就像所有其他 MMORPG 一样。因此，请将代码保密。

2.  以上是*不可避免*的，所以发布一个强制性的免费发行版，让玩家平等地获得优势，并可能拒绝其他人更邪恶的™（例如精英​​、商业等）版本。在邪恶之间，选择最少的，尽管它的必要性是令人不快的。

3.  出售程序，从你的倾向中获益，这是你应该得到补偿的工作，公平交易（并且不管是否违反了 ToS）。关注 WoWGlider 之类的。人手越少越好吗？

4.  将代码保密。至少尊重您同意的公司服务条款。

什么是道德上可辩护的方法？我没有考虑什么？根据我的经验，ToS 协议在很大程度上是一种无效的劝阻形式，MMORPG 的游戏（以及随后在#1 中描述的结果）确实是不可避免的，但有一些话要说，不要自己扣动扳机——或者它不是那么糟糕?

* * *

我在这个问题的原始措辞/标题上做得很差，我真的很想看看是否有特殊情况在道德上*是可以*辩护的，而不是*通常*是否可以，希望我的代码可以有建设性的目的.

作为一个新用户，在我更新之前，我没有意识到 99% 的响应会是即时的。也就是说，我仍然收到了一些关于商业化的非常有用的答案，并且最初的问题值得提供的答案，所以：在这方面做得很好。

我*确实*有我的答案：尽管机器人不可避免，但不要自己扣动扳机！改变，等等（＃3从来没有在我个人的桌子上，但引出了一些精彩的答案。）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-24T05:28:43.517

你需要非常小心。

[MMOGlider](http://www.mmoglider.com/)直到最近还是一个流行的魔兽世界机器人。我用 C# 为它编写了一个名为[GliderTools (GliderTools.net)](http://www.glidertools.net)的插件，它赚了很多钱。

暴雪最近[以 600 万美元起诉 MMOGlider 并胜诉](http://virtuallyblind.com/2008/09/29/mdy-blizzard-damages/)。现在有反对编写机器人并进行商业销售的法律先例。与此相关的金钱损失是惊人的。值得注意的是，暴雪能够让 MMOGlider 启动的犯罪行为并不是“打假”，而是侵犯版权。他们声称，由于机器人客户端必须访问和复制正在运行的游戏内存的某些部分，这构成了版权侵权。

考虑到 MDY（MMOGlider 的创造者）的收入不到 200 万美元，他们头上的代价是沉重的。MDY 的原始创建者和创始人迈克尔·唐纳利不受其 LLC 许可的保护，他**个人**对这 600 万美元负责。这种债务不会随着破产而消失。他终生拥有它。一旦你加上法律费用、上诉等，这是一个危险的游戏。

我个人*喜欢*写机器人。对我来说，一个游戏并不好玩，除非我对它进行了拆解，为它写了一个补丁程序或以某种方式自动化它。这让游戏对我来说很有趣，而不是游戏本身。第一次看到你的机器人自动运行真是太棒了。但是，如果您制作商业产品并将其出售给其他人，那就另当别论了。

所以，如果你决定制作一个机器人，我强烈建议你要么从美国境外发布它，要么在朋友之间保密。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-24T05:32:26.720

在令人讨厌的数百万其他玩家身上赚钱，在几乎被视为非法的事情上，在你的简历上也不好看。

将您的技能用于善™，而不是恶。

我个人认为流行游戏的僵尸软件就像编写僵尸网络蠕虫一样。你浪费了其他人的时间和精力（通常是金钱）。

你会写病毒来赚钱吗？

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-24T05:57:31.747

仅仅因为其他人会制造类似的机器人并不意味着它在道德上是好的。

归根结底，这些游戏应该很有趣。正如您所说，机器人将游戏变成了军备竞赛，特别是如果游戏具有任何竞争成分。

以下是我在魔兽世界的经验中的一个例子：我想要制作一个特定的物品。在我的服务器上，这方面的材料非常昂贵；大量的有钱玩家（他们可能合法地获得了也可能没有合法地获得黄金）将价格推高到我买不起的地步。

我唯一的选择是自己耕种这些材料。其中许多需要一次杀死大量怪物数天。一件特定物品的掉落几率约为 1%。几乎每一个农业点都由机器人连续运行。

很难与不睡觉或不休息的东西竞争。你不能简单地等待他们离开，因为他们没有。因为我遵守规则，所以我的目标变得比本来应该的要难得多。

如果有人出于懒惰和贪婪而愿意破坏您的体验，就很难在游戏中获得乐趣。

所以不，我会说这在道德上是站不住脚的。你很清楚你创造的东西会伤害人们。

真正的问题是，你有这个问题吗？

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-04-24T09:21:04.613

十多年来，我一直在为在线扑克和国际象棋构建（但从未销售）机器人（在此处插入促销网络链接），所以这个问题引起了我的注意。我同意@Simucal 的观点，因为您需要小心行事，尤其是在涉及 MMORPG 的情况下。暴雪尤其对自动化持严厉态度。

[450 万份符合 EULA 的间谍软件](http://www.rootkit.com/blog.php?newsid=358)

再说一次，**私人公司的 TOS/EULA = LAW 的想法有点从众**。当该公司跨越国际边界向全球受众进行营销时，更是如此。这给 TOS/EULA 带来了额外的复杂性，这首先已经是一个模糊的法律术语。通常的做法是构建 TOS/EULA，使其尽可能具有侵略性、全面性和广泛性。这只是良好的法律意识。这并不一定意味着 TOS 的每一行都具有法律约束力。TOS 是一种威慑，公司将插入他们认为可以逃脱的任何语言，并希望它在/如果它在法庭上经过测试时能坚持下去。

这没什么错。

同时，构建机器人本身在道德或伦理上都没有错误。有一个非常有力和令人信服的论点，只要你的机器人实际上没有“破解服务器”，**你就有权在你的机器上运行任何你喜欢的软件，在家中的隐私**。当服务器被机器人淹没时尤其如此，因此不运行机器人会使自己处于不利地位。Everquest PVP（例如）从一开始就几乎以机器人为主。

在任何地方，都有两个重要的标准需要考虑：

*   机器人是否依赖于其他玩家没有的信息？
*   机器人是否能够实现超人的反应、耐力或协调？

这将壁垒（不公平的信息）和瞄准机器人（超人的反应）牢牢地归为“不公平/作弊”类别。另一方面，**一个简单的农场机器人很可能不会作弊**，因为该机器人无法访问任何内幕信息，并且它不允许您做您原本无法做的事情。如果你愿意，你可以每天在那里坐上 10 个小时，然后种植矿石或树根之类的。这不是很有趣，但你可以很容易地做到这一点。

对于您对自动化的使用是否越界，这是一个很好的测试。试图欺骗别人是个坏主意。但是编写一个机器人来避免腕管是可以理解的，它实际上可以是一个有益的项目。

但同样，我不建议实际**销售**机器人。因为如果你在上面赚到钱，你就会对@simucal 提到的那种报复敞开心扉。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-24T05:32:54.117

如果你在这里描述了你的真实感受，那么乐趣就在于解决问题，而不是创造产品。如果其他人欣赏这种事情，他们会自己做。

在我看来，当你为了解决你感兴趣的问题，同意了禁止你发布你的作品的条款和条件时，你不可能有一个道德上的辩护立场。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-24T08:18:14.263

这样做的问题在于它将大部分游戏缩减为一件事：最终内容。

以魔兽世界为例，我喜欢玩它，我喜欢升级角色。当然，在这个过程中有一些乏味的地方，但总的来说，它很有趣。

现在，如果我安装了一个机器人，然后把它用于升级我的角色，至少做所有重复的工作，让我偶尔去拜访一个训练师 NPC 并获得我的新技能，那么我就剩下了是我80级能做的事情。

此外，我作为一个人（不是我的角色）应该在此过程中学到的所有技能都被抛到了窗外。

在 Counterstrike 中有两种类型的人非常出色，例如，使用机器人的人，以及刚刚玩得如此之好的人。

一旦你决定使用机器人，你几乎注定要继续使用它们，并试图自动化你的最终内容播放，因为你真的没有在那个级别玩的经验。

因此，基本上，您将整个游戏简化为编程竞赛。

即使您只为自己编写代码，您所证明的只是您可以编程。你还没有证明你可以玩这个游戏。

那么最后，你玩那个游戏到底有什么意义呢？

正如其他人所说，如果您只想创建软件来使事情自动化，那么您有很多选择。

话虽如此，我分享了你控制我的环境的一些乐趣。我经常在《魔兽世界》中使用很多插件，但它们并没有像机器人那样让我比其他人更有优势。它们可能让我更容易组织我的库存，让我在游戏中记笔记，或者只是美化用户界面，但最终，仍然是我按下按钮来响应游戏事件。

这就是游戏对我的意义。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-24T06:11:16.677

> 在我看来，ToS 不会阻碍任何人 [...]

因此，通过使用 MMO，您同意 ToS；但是可以打破规则，因为您不同意ToS？很好的双重思考，但法院可能会在这样的争论中拒绝。

你看，ToSes无处不在的基本理念是“这是我们的方式或高速公路”——通过使用服务，您同意遵守服务的规则；如果您不喜欢规则，没有人强迫您使用该服务，您可以自由走开。

此外，不要仅仅因为它的管辖权允许就试图变得“聪明”并在 Elbonia 发布机器人：ToS 可能声明服务器的管辖权适用（如果你决定[访问相关国家，](http://en.wikipedia.org/wiki/Sklyarov)这可能会咬你一口，甚至另一个与其有引渡协议的国家）。

免责声明：IANAL

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-24T07:43:44.473

进步需要不道德的选择。我的建议是继续前进，“从你的倾向中获益，这是你应该得到补偿的工作 [...]”。为什么你总是担心这个？如果可以的话，释放猎犬，让其他人与之战斗。拿一本历史书来看成千上万的类似决定。它推动人类前进。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-24T08:39:13.810

我自己是一个大型多人游戏玩家，玩过很多 MMORPG。

当我看到有人在网络游戏中作弊时，我的嘴里只有一句话“真是个手淫！”

从道德上讲，破坏别人的乐趣是错误的，如果你想从中赚钱，那也比经营一家**垃圾邮件公司**好不了多少。

老实说，我个人并不关心农场机器人，无论如何，玩一个需要不断耕种的游戏对我来说听起来很愚蠢。但是仍然有很多人在乎，而这些工具肯定会破坏他们的乐趣。

我知道这是一个有趣的挑战，保持私密，享受乐趣，告诉你的朋友和炫耀，但不要扼杀其他人的乐趣。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-24T05:27:48.153

如果您一直关注暴雪与 MDY 的案例以及最近的结果，如果您位于美国或任何有知识产权法的国家/地区，我强烈建议您将代码保密。

还有#3，卖掉它只会给你带来麻烦。MDY破产了，他们的产品被禁止出售，不得不交出源代码，并向暴雪支付了600万美元的损失。

作者迈克尔·唐纳利（Michael Donnelly）很可能会在他的余生中成为部门。

我建议您将其保密。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-24T06:07:46.217

与 Blizzard 和 WoW 不同，看看 Ultima Online 和 OSI 是否允许使用 3rd 方工具，甚至支持它们（Tugsoft 的 UOAssist）。

对我来说，这在道德上是好的，如果游戏的设计方式是打磨一件东西只会导致打磨另一件东西，而且如果打磨一般是以非常不愉快的方式完成的，那么，嘿，为什么不呢？如果允许，每个人都有*平等*的机会，因为每个人都可以使用特定支持的 3rd 方产品，这是一个鸡蛋问题。

这主要是被禁止的，因为它减少了你需要花在游戏中的时间，有效地减少了你为他们的服务付费的时间，所以，贪婪还是乐趣？

* * *

作为旁注，我*完全反对*无人值守的宏，这是有人值守和无人值守之间的巨大差异。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-24T08:28:26.767

是的，对游戏进行逆向工程和进行自动化很有趣。从你的问题听起来你在问从那里去哪里。

A) 它违反了 ToS，所以你不应该自己使用它。

B) 它违反了 ToS，所以你不应该出售它。

我的印象是，您正在寻找可以做这两件事中的一件，同时承认编写它的乐趣。我建议你从写东西中获取娱乐价值，并假设你的“有趣”时间不值得一分钱。尤其是以牺牲他人为代价。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-24T05:24:21.780

ToS 没有人退缩？与暴雪核实，他们对这样的事情不满意。绝对在他们的服务条款中不运行任何与 WoW 混淆的程序）。运行这些 MMO 的公司非常努力地阻止此类程序，因为它们会导致不公平的优势并破坏经济。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-08-03T18:35:45.227

如果你喜欢做这些事情，你也可以看看非 MMO。有很多游戏（例如 TES:Oblivion 和 Fallout 3）拥有非常活跃的模组社区，游戏开发者可以容忍甚至支持这些社区。

# java - 继承和java Beans有什么区别？

> ID：784629
> 
> 赞同：-5
> 
> 时间：2009-04-24T05:26:33.507
> 
> 标签：java

继承和JavaBeans有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T05:41:27.247

继承是一个通用的面向对象的编程概念，其中一个类型可以与另一个对象具有相同的类型，但会引入新的属性和行为（即 Lion 类可以继承自 Mammal 类），而 JavaBeans 只是遵循一组公约。来自维基百科：

> *   该类必须具有公共默认构造函数。这允许在编辑和激活框架内轻松实例化。
>     
>     
> *   必须遵循标准命名约定，使用 get、set 和其他方法（所谓的访问器方法和 mutator 方法）来访问类属性。这允许在框架内轻松自动检查和更新 bean 状态，其中许多框架包括用于各种类型属性的自定义编辑器。
>     
>     
> *   该类应该是可序列化的。这允许应用程序和框架以独立于 VM 和平台的方式可靠地保存、存储和恢复 bean 的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T05:41:36.433

不确定您的意思，但是当人们谈论 bean 与继承时，通常意味着命名约定与继承。

Bean 使用匹配的 get 和 set 方法定义它的属性，也可以选择使用 BeanInfo，因此使用自省（反射）来访问属性。另一方面，当对象扩展类或实现接口时，可以通过该接口（超类）访问属性/方法。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T05:42:22.877

Java Bean 是一个简单的类，它包含一些属性（即数据元素）和“getter 和 setter”（getProperty1()、setProperty1(myValue)）来读取和写入这些属性。

继承是一种面向对象的原则，其中一个类展示另一个类的属性和行为。据说是从其他类**继承的。**

# asp.net - 该字符串未被识别为有效的日期时间

> ID：784638
> 
> 赞同：0
> 
> 时间：2009-04-24T05:31:23.307
> 
> 标签：asp.net

objfile.dateFileDate=convert.ToDatetime(格式(txtdate.text,"MM/dd/yyyy hh:mm"))

以下错误即将到来

> 该字符串未被识别为有效的日期时间。有一个从 0 开始的未知单词。

我应该怎么做才能保存这个日期时间，请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T05:42:06.167

您不能使用日期时间格式来格式化普通文本。

尝试

**C＃**

```
objfile.dateFileDate=DateTime.ParseExact(txtdate.text, "MM/dd/yyyy hh:mm", null); 
```

**VB.NET**

```
objfile.dateFileDate=DateTime.ParseExact(txtdate.text, "MM/dd/yyyy hh:mm", Nothing) 
```

这是假设 dateFileDate 是 DateTime 类型并且 txtdate.text 是上述格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T05:51:07.240

如果您的程序被国际人群使用，请继续阅读:)

来自不同文化的人会以不同的格式写日期，所以如果你总是要解析可能会变得粘滞的字符串。考虑使用压延控制？我这样说是基于个人经验。还要找出你当前失败的原因，我会做一个 DateTime.Now.ToString() 并将其与文本框中的内容进行比较，这样你就可以看到当前输入错误的内容（当然调试时，以帮助追踪问题）

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-04-24T05:42:13.080

尝试 hh:nn 而不是 hh:mm

我相信 mm 是两位数格式的月份，而 nn 是两位数格式的分钟。

# multicast - 在 Linux 上进行多播时选择接口

> ID：784657
> 
> 赞同：3
> 
> 时间：2009-04-24T05:41:04.377
> 
> 标签：multicast

我正在使用运行 Debian 4 的大约 40 个节点的集群。每个节点都运行一个守护程序，该守护程序位于并侦听多播 IP。

我编写了一些客户端软件，通过 LAN 与群集在同一交换机上的客户端计算机发送多播，以便群集中的每个节点都会接收数据包并做出响应。

它工作得很好，除非我在具有 LAN 和 WAN 接口的计算机上运行客户端软件。如果有 WAN 接口，则多播不起作用。很明显，我认为多播错误地通过 WAN 接口 (eth0)，而不是 LAN (eth1)。所以，我使用 SO_BINDTODEVICE 套接字选项强制多播套接字使用 eth1，一切都很好。

但我认为内核的路由表应该确定 LAN (eth1) 显然是多播的成本较低的目的地。是否有某些原因我必须明确强制套接字使用 eth1？而且，是否有某种方式（可能是 ioctl 调用）可以让应用程序自动确定特定接口是 LAN 还是 WAN？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-02-06T04:44:41.733

> 如果您没有显式绑定到接口，我相信 Linux 使用该接口作为默认单播路由进行多播发送。

Linux 需要多播路由，如果不存在，您将收到 EHOSTUNREACH 或 ENETUNREACH 错误。[LCM 项目](http://lcm.googlecode.com/svn/www/reference/lcm/multicast-setup.html)记录了这个可能的问题。如果您使用套接字选项 IP_MULTICAST_IF 或 IPV6_MULTICAST_IF，路由将被覆盖。您应该能够通过IPv6 地址中的[scope-id 字段指定接口，但并非所有平台都正确支持它。](http://en.wikipedia.org/wiki/IPv6_address#Link-local_addresses_and_zone_indices)正如 dameiss 所指出的，Stevens 的 Unix Network Programming 书籍涵盖了这些细节，您可以通过 Google Books 免费浏览大部分关于多播的章节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-10-01T13:44:43.023

如果您没有显式绑定到接口，我相信 Linux 使用该接口作为默认单播路由进行多播发送。所以我的猜测是你的默认路由是通过 WAN 接口。

Richard Stevens 的“Unix Network Programming, Vol. 1”第 17 章（至少在第 3 版中）有一些很好的信息和如何枚举网络接口的示例。

# hibernate - hibernate 懒惰的解决方案。这样对吗？

> ID：784664
> 
> 赞同：0
> 
> 时间：2009-04-24T05:43:05.510
> 
> 标签：hibernate, lazy-evaluation

我正在使用以下方法来解决休眠中的延迟初始化问题。请告诉我它是否会起作用。由于某些原因，我必须在我的持久层强制执行我的事务。

```
public class CourseDAO {

    Session session = null;

    public CourseDAO() {
        session = HibernateUtil.getSessionFactory().getCurrentSession();
    }

    public Course findByID(int cid) {
        Course crc = null;
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            Query q = session.createQuery(
                "from Course  as course where course.cid = "+cid+" "
            );
            crc = (Course) q.uniqueResult();
            //note that i am not commiting my transcation here.
            //Because If i do that i will not be able to do lazy fetch
        }
        catch (HibernateException e) {
            e.printStackTrace();
            tx.rollback();
            throw new DataAccessLayerException(e);
        }
        finally {
            return crc;
        }
    }

} 
```

在过滤器中我使用以下代码

```
session = HibernateUtil.getSessionFactory().getCurrentSession(); 
if(session.isOpen())
    session.getTransaction().commit(); 
```

这种方法对吗？能不能有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T06:58:54.003

确保您始终提交或回滚，然后始终关闭您的会话。基本上，无论如何都应该释放您的资源（事务和会话），例如，它们可以放置在适当的 finally 块内（在会话的情况下）或在 try 和 catch 块中（在事务的情况下）。

一般来说，跨不同应用层的资源分配和释放是反模式的——如果你的架构迫使你应用反模式，那么这里还有更多问题要问......例如，想想你应该在你的“过滤器”如果会话碰巧被关闭...

# linq - 更新 SubmitChanges() - 不更新

> ID：784677
> 
> 赞同：1
> 
> 时间：2009-04-24T05:55:24.233
> 
> 标签：linq, linq-to-sql

使用此代码，我的数据库没有任何变化。运行上述代码时，不再创建新条目，也不会更新条目。

```
public void UpdateCallback(callback cb_)
    {
        callback call = context.callbacks.Single(c => c.callbackID == cb_.callbackID);

            //call.callbackID = cb_.callbackID;
            call.status = cb_.status;
            call.contactName = cb_.contactName;
            call.company = cb_.company;
            call.phone = cb_.phone;
            call.calledDate = cb_.calledDate;
            call.callback1 = cb_.callback1;
            call.notes = cb_.notes;

        try
        {
            context.SubmitChanges();
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T07:15:44.320

这篇[文章](https://stackoverflow.com/questions/206532/linq-not-updating-on-submitchanges)和你的很相似。

在他的情况下，更新不起作用，因为表没有主键。

您是否验证过 CallbackId 被定义为数据库中的 PK？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T06:59:18.917

没有什么能立即向我跳出来。我发现使用 DataContext 的 Log 属性来查看正在生成的 SQL 很有用。

请参阅[http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx)

然后，您可以在调试时使用类似下面的代码将 SQL 输出到 Visual Studio 调试窗口。

```
/// <summary>
/// Implementation of a <see cref="TextWriter"/> that outputs to the debug window
/// </summary>
public class DebugTextWriter : TextWriter
{
    public override void Write(char[] buffer, int index, int count)
    {
        System.Diagnostics.Debug.Write(new string(buffer, index, count));
    }

    public override void Write(string value)
    {
        System.Diagnostics.Debug.Write(value);
    }

    public override Encoding Encoding
    {
        get { return System.Text.Encoding.Default; }
    }
} 
```

# openid - OpenID 及其缺陷

> ID：784682
> 
> 赞同：1
> 
> 时间：2009-04-24T05:59:57.297
> 
> 标签：openid

OpenID 的安全漏洞有哪些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T06:04:55.083

[在我的站点上使用 OpenID 作为身份验证方法是否存在与我相关的安全风险？](https://stackoverflow.com/questions/182258/are-there-any-security-risks-associated-with-me-using-openid-as-the-authenticatio)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T06:07:05.983

我不知道这样的*缺陷*，但仍然存在一些*风险*......

*   在 OpenID 提供商处获得对您帐户的访问权限的攻击者可能会获得对您使用该帐户来识别自己的任何站点的访问权限。在这方面，为多个站点重复使用相同的 OpenID 帐户具有相同的单点故障，就像您在多个站点中重复使用相同的密码并且该密码已泄露一样。

*   OpenID 依靠 OpenID 提供商的 DNS 永远不会脱离受信任方的控制或以任何方式受到损害。如果您的 OpenID 提供商倒闭并且他们的域丢失，那么攻击者可能会接管该域并获得对您使用该 OpenID 的任何站点的访问权限。显然，如果这是像 Google 或 MyOpenID 这样的主要提供商，那么这不是问题，因为他们会保留该域，但对于较小的提供商，尤其是使用委托的博客等，这是需要注意的，其中服务可能会在将来关闭，或者他们可能会终止您的帐户并将地址重新分配给其他人。而且，如果您对自己的域名使用委托，则最好确保您不会被黑客入侵，并且您永远保留对该域名的控制权。

# javascript - 模态对话框选项

> ID：784686
> 
> 赞同：0
> 
> 时间：2009-04-24T06:01:33.953
> 
> 标签：javascript

我正在打开一个窗口作为模式。window.showModalDialog(" [http://www.google.com](http://www.google.com) ","","dialogWidth:500px;dialogHeight:500px")

当我设置高度时，还有哪些其他可用选项？像选项按钮、菜单等我可以在哪里找到教程？

**编辑**

*它可以在 Mozilla firefox 中使用，但人们说它不行！*

我的代码是

请有人编辑我的示例代码以用于显示目的

```
<html>
<head>
<script>
    function abc() {
        window.showModalDialog("3.htm", "", "dialogWidth:500px;dialogHeight:500px");
    }
</script>
</head>
<body>
<input type="button" id="check" name="check" onclick="abc()" value="open"/>
</body>
</html> 
```

**第二次编辑**

第 3 页的代码.htm

```
 <html>
<head>
<script>
function abc(){
close()
}
</script>
</head>
<body>
<input type="button" id="check" name="check" onclick="abc()" value="close"/>
</body>
</html> 
```

查看火狐上的两个代码！然后告诉我。

**第三次编辑**

好的，它在 corme 和 opera 中不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T06:10:57.860

请注意，showModalDialog 是特定于 IE 的，不一定适用于其他浏览器。如果您想要跨浏览器模式对话框，您需要使用 div 来隐藏页面的其余部分并将对话框覆盖在顶部。使用已经处理此问题的现有 javascript 库会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T06:16:03.123

我建议不要在网络应用程序中使用弹出窗口。改用浮动 div，它看起来像一个模态对话框，但比弹出窗口更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T08:15:20.667

[JQuery UI](http://jqueryui.com/demos/dialog/)有一个不错的弹出/模态对话框 API，我使用过很容易实现的[Boxy插件。](http://onehackoranother.com/projects/jquery/boxy/)

它们是跨浏览器且易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T14:22:59.817

要使用 boxy 加载页面，请使用：

```
var boxyPopup;
Boxy.load("aPage.html",
            {title: "Title",
            modal: true,
            fixed: false,
            afterShow: function(){
                boxyPopup = this;}}); 
```

我不确定你的意思是它不在同一个四四方方的窗口上打开一个新页面，但使用上面的内容，你有 boxyPopup var 作为对打开的四四方方对象的引用，并且可以使用它访问/更改内容。

# .net - 用于 SAP R/3 RFC 的 ERPConnect - 有什么好处吗？

> ID：784692
> 
> 赞同：5
> 
> 时间：2009-04-24T06:03:49.267
> 
> 标签：.net, saprfc, sap-dotnet-connector, sap-r3

我们正在考虑是否应该建议使用[Theobald Software 的](http://theobald-software.com/) [ERPConnector](http://www.theobald-software.com/cms/en/erpconnect.net/erpconnect.net-sap-und-.net-nahtlos-verb.html)工具来为我们的 .NET 代码提供一种与 SAP RFC 对话的方式。有没有人有任何一起使用这些的经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T06:23:34.883

我还没有尝试过 ERPConnector。但是，我使用`SAP .NET Connector 2.0`SAP（免费）提供的 RFC 与 SAP 交谈。

在项目中，我用它来：

*   将 IDOC 发送到 SAP
*   设置服务器以接收来自 SAP 的 IDOC

使用 SAP .NET Connector 2.0 软件，这很简单。

# business-objects - 业务对象 - 用于将对象添加到查询面板的条件部分的快捷键

> ID：784700
> 
> 赞同：0
> 
> 时间：2009-04-24T06:07:28.323
> 
> 标签：business-objects

在业务对象中，是否有任何快捷键可以将对象添加到查询面板的条件部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-01-21T06:57:30.507

我不相信有。到目前为止我还没有遇到过。

马特

# .net - 从接口或基础继承注释

> ID：784704
> 
> 赞同：3
> 
> 时间：2009-04-24T06:09:39.393
> 
> 标签：.net, inheritance, comments

我注意到在 Java(doc) 中存在类似@inheritDoc 的东西，因此来自最近的可继承类的注释被显式复制。

.Net 中是否存在类似的东西？我知道这可以通过 GhostDoc 实现。GhostDoc 的缺点是“基本”注释的更改没有体现出来......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T09:48:15.857

你看过沙堡吗？我相信它现在在那里得到支持。

[http://www.ewoodruff.us/shfbdocs/html/79897974-ffc9-4b84-91a5-e50c66a0221d.htm](http://www.ewoodruff.us/shfbdocs/html/79897974-ffc9-4b84-91a5-e50c66a0221d.htm)

# ultrawingrid - 在 UltraGrid 中添加复选框

> ID：784709
> 
> 赞同：1
> 
> 时间：2009-04-24T06:11:32.960
> 
> 标签：ultrawingrid

如何在基础设施 UltraGrid 中动态添加复选框

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T06:13:51.613

只需确保您要绑定的列的数据类型是 bool 类型。它将自动为该列创建复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T19:01:36.410

尝试以下

```
 //get the data from db
 var ds = GetDataFromDatabase();

  ds.Tables[0].Columns.Add("Check", typeof(bool)); //this will create checkbox col

  foreach(Datarow row in ds.Tables[0].Rows)
  {
      row["Check"] = true; // make all rows checked just to see it works

  }

  DataView dv = ds.Tables[0].DefaultView; //set it as a dataview

  ultraGrid1.DataSource = dv; //set the dataview as the datasource for your grid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T09:34:09.777

确保列数据类型为`bool`（True/False 或 0/1），然后设置：

```
grid.DisplayLayout.Bands[0].Columns["column_name"].Style = Infragistics.Win.UltraWinGrid.ColumnStyle.CheckBox; 
```

那应该行得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-20T20:37:36.780

在将数据绑定到网格时，您可以通过以下查询调用数据表的集合：

“从 [TABLE_NAME] 中选择 Convert(bit,0) 作为 IsChecked，[OTHER_COLUMNS]”

这将返回一个带有第一列复选框的数据表。

使用数据源将其与您的网格绑定。

# iphone - 拖出屏幕时会发生什么？

> ID：784714
> 
> 赞同：2
> 
> 时间：2009-04-24T06:13:31.473
> 
> 标签：iphone, cocoa-touch

我有一个可以拖动的对象。一旦用户的手指离开屏幕并返回，我就失去了拖动对象的能力。如果用户然后再次触摸和拖动，一切都很好。

一旦用户的手指拖回屏幕上，我怎样才能得到通知？由于 touchesBegan 没有触发，我没有收到任何通知。

这是我在 touchesBegan 中调用的 touchesMoved：

```
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [[event allTouches] anyObject];
CGPoint location = [touch locationInView:touch.view];

    //stop object dragging at edge of screen
if(location.x > 35){
    myboject.center = location;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T10:40:20.087

所描述的行为对我来说似乎很正常，所有内置的 Apple 应用程序的行为方式都相同。由于触摸屏之外没有触摸屏（是的），我相信设备无法区分触摸开始或从屏幕外部移动。

# sql-server-2008 - Subsonic 2.2 为 SQL Server 2008 生成的属性日期

> ID：784716
> 
> 赞同：1
> 
> 时间：2009-04-24T06:14:09.570
> 
> 标签：sql-server-2008, date, subsonic

我使用的是用 VS 2008 编译的最新 SVN 2.2 版本。当我使用 Sonic.exe 构建我的 VB 类时，任何**Date**类型的列（不是**Datetime**）都会生成为“System.String”。有没有其他人发现这个问题并有解决方案，或者这是 Subsonic 的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-10-07T00:38:08.217

这仍然是一个悬而未决的问题，但它很容易解决。如果您有 SubSonic 源代码，请进行一些编辑。

-- src\SubSonic\DataProviders\SqlDataProvider.cs。
在“案例日期时间”上方的第 1010 行周围添加：

```
 case "date":
                return DbType.Date; 
```

-- src\SubSonic\ActiveRecord\AbsractList.cs 在“else if (dbType == DbType.DateTime)”上方的第 85 行周围添加：

```
 else if (dbType == DbType.Date)
        {
            DateTime dX = Convert.ToDateTime(xVal);
            DateTime dY = Convert.ToDateTime(yVal);
            result = dX.CompareTo(dY);
        } 
```

-- src\SubSonic\CodeLanguage\CSharpCodeLanguage.cs 在“case DbType.DateTime”上方的第 222 行周围添加：

```
 case DbType.Date: 
```

我 99% 认为这些是所需的主要更改，如果没有这些更改，最后一个版本将无法正确支持 SQL Server 2008“DATE”数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T15:07:42.190

在此处提交问题：[http ://code.google.com/p/subsonicproject/issues/list](http://code.google.com/p/subsonicproject/issues/list)

# c# - C# 2005：从表单的标题栏中删除图标

> ID：784717
> 
> 赞同：29
> 
> 时间：2009-04-24T06:15:00.473
> 
> 标签：c#, forms, titlebar

一位客户要求我从表单的标题栏中删除该图标。因为他们不想显示任何图标。但是我猜测当我单击图标属性时，您必须浏览到某个图标。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2009-04-24T06:18:12.617

将表单的**ShowIcon**属性设置为**False**以查看这是否是您的客户想要的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-24T06:22:53.137

有两种方法。

首先是创建一个空图标文件，然后**选择表单->右键单击->转到属性->转到图标->选择您的文件。**

另一种方法是将表单的**FormBorderStyle设置为****FormBorderStyle.SizableToolWindow**或**FormBorderStyle.FixedToolWind**

 ****另一种方法是将**ShowIcon**属性设置为**false**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-24T06:17:11.293

放

`FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedDialog`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-24T06:28:50.267

您可以设置 ControlBox = false。但是，这不仅会删除图标，还会从标题栏中删除最大化和最小化按钮。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-12T06:46:48.873

似乎有一个更新的过程。遵循所选答案中的步骤不会将我引导至上传图标的选项。该选项可以在 Microsoft 的网站上找到：https: [//support.office.com/en-us/article/add-a-custom-title-or-icon-to-a-database-0e43e135-dd0d-4451-84ea -4f547e14480e](https://support.office.com/en-us/article/add-a-custom-title-or-icon-to-a-database-0e43e135-dd0d-4451-84ea-4f547e14480e)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-02T12:24:30.093

你也可以试试这个：

```
this.Icon = null; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-08T05:51:52.403

```
Icon  >  False 
```

这可能是一个好方法，但这些也很好：

```
this.Icon = null;

//Or

FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedDialog

//Or

Select Your Form -> Right-Click -> Properties -> Icon -> Select file 
```

这就是我所拥有的一切，我希望这对你有帮助。

# php - 根据另一个下拉列表的值加载下拉列表 - 无需在 PHP 中刷新页面

> ID：784718
> 
> 赞同：0
> 
> 时间：2009-04-24T06:15:19.380
> 
> 标签：php, javascript

我在 PHP 中创建了一个页面，因为我需要加载与 dropdown1 的值相对应的 dropdown2 而无需刷新页面。这些下拉列表的值来自数据库。

我不想每次点击都刷新页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T06:22:13.793

二当您将页面发送到客户端时，PHP 就完成了。你得到的只有 JavaScript。

1.  Ajax：当您选择第一个下拉菜单时，您可以使用 Ajax 调用。define a function in JavaScript, so when an option in the first dropdown is selected, it will call a URL, and send the ID of the selected item to that URL, and fetch the XML result and use that to populate the second dropdown.

2.  JavaScript Arrays：这种方法和其他方法一样，不同之处在于两个下拉菜单的所有数据都已经在页面中发送到客户端，作为 Javascript 对象或数组。通过从第一个下拉列表中选择一个选项，您的 JavaScript 函数将使用本地数组或对象填充第二个下拉列表，而不是调用 Ajax 调用。

第二种方法的好处是更改第二个下拉列表更快，并且不需要另一个连接。但是第一次加载页面需要更长的时间，因为你所有的下拉数据都应该先加载。我在我的一些页面中使用了第二种方法，但是如果您要为第一个下拉菜单的每个选项获取大量数据，那么更好的方法是第一种。

我建议为这些使用众所周知的框架，例如 jQuery。它会减轻你所有的工作。您可以调用 ajax 调用，并轻松更改第二个下拉列表的子项。

编辑：

在第一种方法（AJAX 调用）中，我说从 XML 加载数据。我的意思是建立一个到服务器的 AJAX 连接，到一些接受参数的 PHP 页面，比如第一个 select 标记中 selected 选项的值，然后在服务器上搜索数据库，获取相关结果并返回一个 XML 文档拥有第二个选择标签的所有值。在发出 Ajax 请求的 JavaScript 函数中，您可以解析该 XML 并根据结果 XML 即时为第二个选择标签创建选项标签。您的 PHP 脚本接受一个值，并且可以根据该值执行任何操作。XML部分，只是一个传输工具。

# wpf - 如何对 WPF DataGrid 进行分页？

> ID：784726
> 
> 赞同：44
> 
> 时间：2009-04-24T06:20:00.197
> 
> 标签：wpf, datagrid, pagination

如何在 wpf 中设置分页`DataGrid`？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2011-02-11T22:51:36.340

上面的代码项目文章非常适合使用 ADO 表完成此操作。虽然对于大多数应用程序来说，它可能工作得很好，而且很容易理解，但也有一种更“类似于 WPF zen”的方式来做到这一点，那就是使用 CollectionViews。与上面的示例相比，使用 CollectionView 的优势在于，它在您放入网格中的数据方面更加通用（并不是说您不能使该示例更通用），并且非常适合使用通用的 WPF 数据绑定模型。如果您需要，它为您提供了一个支持常见操作（如排序、分组等）的地方。

我整理了一个非常简短的示例，说明绑定到 .NET 4.0 DataGrid 控件的几乎无法正常工作的 PagingCollectionView。尽管该示例本身非常简单，但它至少向您展示了如何开始，因为您有一个围绕实际数据集合的代理，您可以在该代理上执行诸如 MoveToNextPage 和 MoveToPreviousPage 之类的简单操作。

这是 Window 事件处理和 PagingCollectionView 的 C#：

```
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows;
using System.Windows.Data;

namespace GridPagingExample
{
    public partial class MainWindow : Window
    {
        private readonly PagingCollectionView _cview;

        public MainWindow()
        {
            InitializeComponent();
            this._cview = new PagingCollectionView(
                new List<object>
                {
                    new { Animal = "Lion", Eats = "Tiger" },
                    new { Animal = "Tiger", Eats =  "Bear" },
                    new { Animal = "Bear", Eats = "Oh my" },
                    new { Animal = "Wait", Eats = "Oh my isn't an animal" },
                    new { Animal = "Oh well", Eats = "Who is counting anyway" },
                    new { Animal = "Need better content", Eats = "For posting on stackoverflow" }
                },
                2
            );
            this.DataContext = this._cview;
        }

        private void OnNextClicked(object sender, RoutedEventArgs e)
        {
            this._cview.MoveToNextPage();
        }

        private void OnPreviousClicked(object sender, RoutedEventArgs e)
        {
            this._cview.MoveToPreviousPage();
        }
    }

    public class PagingCollectionView : CollectionView
    {
        private readonly IList _innerList;
        private readonly int _itemsPerPage;

        private int _currentPage = 1;

        public PagingCollectionView(IList innerList, int itemsPerPage)
            : base(innerList)
        {
            this._innerList = innerList;
            this._itemsPerPage = itemsPerPage;
        }

        public override int Count
        {
            get 
            { 
                if (this._innerList.Count == 0) return 0;
                if (this._currentPage < this.PageCount) // page 1..n-1
                {
                    return this._itemsPerPage;
                }
                else // page n
                {
                    var itemsLeft = this._innerList.Count % this._itemsPerPage;
                    if (0 == itemsLeft)
                    {
                        return this._itemsPerPage; // exactly itemsPerPage left
                    }
                    else
                    {
                        // return the remaining items
                        return itemsLeft;
                    }
                }
            }
        }

        public int CurrentPage
        {
            get { return this._currentPage; }
            set
            {
                this._currentPage = value;
                this.OnPropertyChanged(new PropertyChangedEventArgs("CurrentPage"));
            }
        }

        public int ItemsPerPage { get { return this._itemsPerPage; } }

        public int PageCount
        {
            get 
            { 
                return (this._innerList.Count + this._itemsPerPage - 1) 
                    / this._itemsPerPage; 
            }
        }

        private int EndIndex
        {
            get
            {
                var end = this._currentPage * this._itemsPerPage - 1;
                return (end > this._innerList.Count) ? this._innerList.Count : end;
            }
        }

        private int StartIndex
        {
            get { return (this._currentPage - 1) * this._itemsPerPage; }
        }

        public override object GetItemAt(int index)
        {
            var offset = index % (this._itemsPerPage); 
            return this._innerList[this.StartIndex + offset];
        }

        public void MoveToNextPage()
        {
            if (this._currentPage < this.PageCount)
            {
                this.CurrentPage += 1;
            }
            this.Refresh();
        }

        public void MoveToPreviousPage()
        {
            if (this._currentPage > 1)
            {
                this.CurrentPage -= 1;
            }
            this.Refresh();
        }
    }
} 
```

这是窗口的 XAML：

```
<Window x:Class="GridPagingExample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" Grid.Row="0">
            <Label Grid.Row="0" Margin="2">
                <Label.Content>
                    <Binding Path="CurrentPage">
                        <Binding.StringFormat>Current Page: {0}</Binding.StringFormat>
                    </Binding>
                </Label.Content>
            </Label>
            <Button Content="Next" Click="OnNextClicked" Margin="2"/>
            <Button Content="Previous" Click="OnPreviousClicked" Margin="2"/>
        </StackPanel>
        <DataGrid ItemsSource="{Binding}" Grid.Row="1">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Animal" Width="*" Binding="{Binding Animal}"/>
                <DataGridTextColumn Header="Eats" Width="*" Binding="{Binding Eats}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

您可以构建此 CollectionView 以支持更多功能，一些微不足道的功能，如 MoveToLastPage 和 MoveToFirstPage，以及一些需要更多考虑您希望它如何表现的功能，例如排序。希望它是有帮助的。

# c# - 如何在隐式运算符中使用泛型？

> ID：784728
> 
> 赞同：4
> 
> 时间：2009-04-24T06:22:00.783
> 
> 标签：c#, generics, operator-overloading

我有一个非常简单的 c++ 类：

```
struct Pt_t
{
    T x, y;
    template <class T2> operator Pt_t<T2>() { Pt_t<T2> pt = {x, y}; return pt; }
}; 
```

这使我可以创建一个具有 T 为我想要的任何类型的 pt。我也可以`Pt_t<s8> = Pt_t<u64>;`没有问题。我如何在 C# 中做同样的事情？我尝试了以下并得到了一个错误：

```
 class Pt<T>
    {
        public T x, y;
        //between operator and <T2>, error CS1031: Type expected
        public static implicit operator<T2> Pt<T>(Pt<T2> v) {
            Pt<T> r = new Pt<T>();
            r.x = v.x;
            r.y = v.y;
            return r; 
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T06:40:59.210

不，我不认为这是可能的。您可能需要添加一个方法，例如`To<T>`.

下一个问题将是“如何从`T2`to `T`- 你不能只分配它们。一个选项可能是转换委托：

```
public Pt<TDestination> To<TDestination>(
    Converter<T, TDestination> converter)
{
    if (converter == null) throw new ArgumentNullException("converter");
    Pt<TDestination> t = new Pt<TDestination>();
    t.x = converter(x);
    t.y = converter(y);
    return t;
}
...
var p = new Pt<int> { x = 1, y = 2 };
var p2 = p.To(t => t.ToString()); // a Pt<string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-03-08T16:09:43.430

您可以使用 Nemerle：（[http://github.com/rsdn/nemerle](http://github.com/rsdn/nemerle)）：

```
using System.Console;

class A[T]
{
    public static @:[From](x : A[From]) : A[T]
    {
      A()
    }
}

class Base{}
class Derived{}

def a = A.[Derived]();
def b : A[Base] = a;

WriteLine($"$a $b"); 
```

* * *

输出：

```
A`1[Derived] A`1[Base] 
```

代码反射器：

```
internal class A<T>
{
    public static implicit operator A<T><From>(A<From> x)
    {
        return new A<T>();
    }
}

public class a
{
    public static void Main()
    {
        A<Derived> a = new A<Derived>();
        A<Base> a2 = (A<Base>) a;
        Console.WriteLine(Convert.ToString(a) + " " + Convert.ToString(a2));
    }
} 
```

# wpf - Using WPF Imaging classes - Getting image dimensions without reading the entire file

> ID：784734
> 
> 赞同：20
> 
> 时间：2009-04-24T06:23:35.507
> 
> 标签：wpf, image, image-processing, file-io, metadata

Link [this](https://stackoverflow.com/questions/111345/getting-image-dimensions-without-reading-the-entire-file) post I want to be able to read an image files height and width without reading in the whole file into memory.

In the post Frank Krueger mentions there is a way of doing this with some WPF Imaging classes. Any idea on how to do this??

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-04-24T10:53:34.250

This should do it:

```
var bitmapFrame = BitmapFrame.Create(new Uri(@"C:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Winter.jpg"), BitmapCreateOptions.DelayCreation, BitmapCacheOption.None);
var width = bitmapFrame.PixelWidth;
var height = bitmapFrame.PixelHeight; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-08-05T23:55:27.597

Following Sir Juice's recommendation, here is some alternative code that avoids locking the image file:

```
using (var stream = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read))
{
    var bitmapFrame = BitmapFrame.Create(stream, BitmapCreateOptions.DelayCreation, BitmapCacheOption.None);
    var width = bitmapFrame.PixelWidth;
    var height = bitmapFrame.PixelHeight;
} 
```

# c# - 自定义属性描述符和扁平化层次结构

> ID：784742
> 
> 赞同：3
> 
> 时间：2009-04-24T06:29:55.930
> 
> 标签：c#, binding, propertydescriptor

我有一个自定义属性描述符，用于支持扁平化对象层次结构。

为了实现这一点，我进行了子类`PropertyDescriptor`化并将链接列表存储到我想要检索其值的“下一个”（子）属性。

这使我能够以“平面”方式将子属性绑定到网格（导出到 excel，等等）。

例如。网格（绑定属性，标题）

```
Col1:Customer.Name(Customer)
Col2:Customer.Address(Address)
Col3:Customer.OutstandingOrders.Count(Outstanding Orders) 
```

问题是，一旦我添加了一个具有重复名称的列，无论它有一个唯一的标题，它都会检索第一个标题的属性，但仍将正确的标题放入：

```
Col4:Customer.Company.Name(Company) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T06:53:14.530

> 问题是，一旦我添加了一个具有重复名称的列，无论它有一个唯一的标题，它都会检索第一个的属性，但仍然会放入正确的标题。

你能澄清那条线吗？我以前这样做过，但我使用了虚构名称中的导航路径——即我可能有`PropertyDescriptor.Name`报告`Customer_Company_Name`而不是`Name`，并使用`.DisplayName`报告更易读的内容。

# xpath - 使用 XPath 访问 XML 中的注释

> ID：784745
> 
> 赞同：52
> 
> 时间：2009-04-24T06:31:01.947
> 
> 标签：xpath

如何使用 XPath 访问 XML 文档中的注释？

例如：

```
<table>
<length> 12 </length>
<!--Some comment here-->
</table> 
```

我想访问“这里的一些评论”。

谢谢...

编辑：我正在使用 MSXML DOM ActiveX 并且命令 comment() 似乎失败了......知道为什么吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-04-24T06:37:06.393

随着路径

```
/foo/bar/comment() 
```

您可以选择 /foo/bar 元素中的所有注释。当然，可能取决于您选择的语言。但通常这就是你的做法。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-04-24T06:40:06.607

使用 comment() 函数例如：-

```
/table/length/following::comment()[1] 
```

选择跟在长度元素后面的第一个注释。

**编辑**

Manoj 在对此答案的评论中询问为什么这在 MSXML 中不起作用。原因是您使用的是 MSXML3。默认情况下，MSXML3 不使用 XPath 作为其选择语言，它默认使用更早的弱得多的语言（XSL 模式）。您需要通过 DOMDocument 的 setProperty 方法将 XPath 设置为选择语言。例如（在 JScript 中）：-

```
var dom = new ActiveXObject("MSXML2.DOMDocument.3.0");
dom.setProperty("SelectionLanguage", "XPath"); 
```

现在完整的 XPath 语言将在您的查询中工作（注意一个重大变化是索引器谓词在 XPath 中为 1，而在 XSL 模式中为 0）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-24T07:47:27.303

根据 OP 对已发布答案的评论（以及我对为什么这个简单的事情不起作用的好奇心），这是我的建议：

使用[@Anthony](https://stackoverflow.com/questions/784745/accessing-comments-in-xml-using-xpath/784755#784755)建议的 XPath 表达式，我能够使用以下 JS 函数成功加载评论节点：

```
function SelectComment(s)
{
  var xDoc = new ActiveXObject("MSXML2.DOMDocument.6.0");
  if (xDoc)
  {
    xDoc.loadXML(s);
    var selNode = xDoc.selectSingleNode("/table/length/following::comment()[1]");
    if (selNode != null)
      return selNode.text;
    else
      return "";
  }
} 
```

示例调用：

```
SelectComment("<table><length> 12</length><!--Some comment here--></table>"); 
```

输出：

```
"Some comment here" 
```

**笔记：**

一种。您的 MSXML 版本可能会有所不同。请适当使用。

湾。这种代码绝对不推荐，因为它只适用于 IE。但是，由于这是您明确声明的要求，因此我使用了 ActiveXObject。

C。您没有在评论中提到建议的 XPath 表达式中失败的地方。我的猜测是您没有查询`text`检索到的节点的属性。请记住，SelectSingleNode 始终返回 an`IXmlNode`并且您需要查询其`data`或`text`属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T06:47:22.283

也许这可以帮助，此示例删除了评论

```
XmlNodeList list = xmlDoc.SelectNodes("//comment()");
foreach(XmlNode node in list)
node.ParentNode.RemoveChild(node); 
```

从这里开始[链接文本](http://snippets.dzone.com/posts/show/4001)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-01-20T11:40:21.503

```
<adjustment>
<!-- krishna k -->
<name>FX Update USD</name>
<!-- Since this plan updates existing adj's no ajd's will be created using this id -->
<id>7206</id>
Am facing the similar Issue my application is reading comments which causes stack crash. How can I avoid reading comments by DOM. 
```

# sockets - 原始套接字接收缓冲区

> ID：784748
> 
> 赞同：2
> 
> 时间：2009-04-24T06:32:38.637
> 
> 标签：sockets, queue

我们目前正在测试基于 IP 的电信应用程序。我们打开一个原始套接字并从远程端接收消息（msgrate@750+msgs/秒，大小约为 180 字节，不包括 IP）。

在原始套接字之上有一个称为 SCTP（就像 TCP）的层，它时不时地指示它丢失了一些数据包。现在，我们在接收节点上运行 Wireshark，我们可以在 Wireshark 中看到该数据包。

在我看来，套接字的接收缓冲区很小，导致 IP(?) 丢弃消息。但是，IP Pegs(netstat -sv) 显示没有丢弃的数据包。我们尝试将套接字接收队列设置为 40000，但没有成功。

我将不胜感激任何关于我们应该配置 IP 层的选项（如果有的话）的指针，或者我们需要设置任何特定的套接字选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T13:15:09.550

感谢您的投入。但是，我们已经能够“解决”这个问题。之前，我描述了我们如何阅读消息。一旦 select 返回，我们就会运行一个循环（根据要读取的原始消息的数量，在我们的例子中是 >1）。1) 我们调用 ioctl(FIONREAD) 来查找要读取的字节数；2) 通过调用 recvfrom 读取那么多字节 3) 将字节发送给用户 4) 再次进入循环并调用 ioctl(FIONREAD) 然后重复这些步骤

但是，在第 4 点，ioctl(FIONREAD) 使用返回 0。我们的代码进行了防御性检查。预期，来自 ioctl(FIONREAD) 的 0 字节意味着发送者发送了一个有效负载为 0 的 IP 标头。因此，它使用调用 recvfrom(bytes to read=0) 来清除 IP 标头，以免 select 会再次对此进行设置。

在时间 t0，ioctl(FIONREAD) 返回 0 作为要读取的字节数 在时间 t1，调用 recvfrom(bytes to read=0)。有时，在 t0 和 t1 之间，实际数据用于在套接字接收队列中排队并用于在我们调用 recvFrom(bytes=0) 时被丢弃。

设置 rawMsgsToRead=1 的数量已经“解决”了这个问题。但是，我的猜测是它会影响我们的表现。他们是否有任何 ioctl 调用可以区分队列中的八位字节为 0 和有效负载为 0 的 IP 标头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T08:23:07.030

我有几个问题和一些事情要考虑。1）您正在使用哪种 SCTP 实现以及在哪个操作系统上。一些 SCTP 实现比其他实现更健壮。2) SCTP 是否否定地确认丢弃的数据包？在wireshark 中搜索gapack。3）你在wireshark中看到丢弃的数据包你确定这些不是重传吗？4）wireshark监控系统在哪里？如果它与您的应用程序不在同一条线上，那么它可能会看到您的应用程序没有看到的消息。5) SCTP 给出的具体指示是什么？

如果您认为 IP 套接字 rx 缓冲区溢出，那么您可以考虑减小 SCTP RX 窗口的大小；这通常可以在 sctp 堆栈中进行配置。Rx 窗口限制了等待确认的未完成数据量，因此限制了 IP 缓冲区中的数据量。您还可以尝试提高 SCTP 任务的优先级，以便它更快地从 IP 缓冲区中读取消息（这可能是最容易尝试的事情，我认为这是一件好事）。

问候

# sqlite - PRAGMA journal_mode=OFF 不起作用。为什么？

> ID：784756
> 
> 赞同：4
> 
> 时间：2009-04-24T06:40:16.467
> 
> 标签：sqlite, sqlite-journal-mode

我正在运行 SQLite3 版本 sqlite-3.6.12 并且我已成功将其移植到我的操作系统。我看到的问题是，当我执行命令“PRAGMA journal_mode = OFF”时，它返回“OFF”，但我仍然看到正在创建 *.db-journal 文件。至关重要的是，这些文件不是为了我的项目而创建的。当我逐步执行代码 sqlite3PagerJournalMode 正在返回 PAGER_JOURNALMODE_OFF 所以我想知道设置 journal_mode=OFF 是否仍应生成这些文件，或者是否还有其他我遗漏的东西。请帮助

我也尝试了 PRAGMA main.journal_mode = OFF 和 PRAGMA journal_mode = MEMORY。但是日志文件是这样创建的！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-10-01T17:35:16.510

> 许多 pragma 既有临时形式也有永久形式。临时表单在其生命周期内仅影响当前会话。永久表单存储在数据库中并影响每个会话。

[何时在 sqlite 上使用编译指示？](https://stackoverflow.com/questions/2883527/when-to-use-pragmas-on-sqlite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-26T13:11:09.520

尝试设置独占访问（PRAGMAlocking_mode=exclusive），有时会为外部锁定创建日志。

# php - PHP：如何生成一个 xml2assoc 数组结果中的树？

> ID：784762
> 
> 赞同：1
> 
> 时间：2009-04-24T06:43:35.833
> 
> 标签：php, tree

我见过很多关于如何生成`<ul><li>`标签的 PHP 函数，但我猜我的数组输入相当复杂。它是从名为[xml2assoc的自定义函数返回的数组](http://www.php.net/manual/en/class.xmlreader.php#88264)

我的问题是如何`<ul><li>`使用 PHP 将返回的 xml2assoc 数组结果转换为格式化的 HTML 代码。

谢谢。

```
$tree = array(
    0 => array(
        'tag' => 'NavigationMode',
        'value' => array(
            0 => array(
                'tag' => 'Title',
                'value' => 'Introduction'
            ),
            1 => array(
                'tag' => 'NavigationNode',
                'value' => array(
                    0 => array(
                        'tag' => 'Title',
                        'value' => 'Sub Intro'
                    )
                )
            )
        )
    ),
    1 => array(
        'tag' => 'NavigationMode',
        'value' => array(
            0 => array(
                'tag' => 'Title',
                'value' => 'Module 1'
            )
        )
    )
); 
```

我需要生成的最终输出是这样的：

```
<ul>
    <li>
    Introduction
    <ul>
        <li>Sub Intro</li>
    </ul>
    </li>

    <li>Module 1</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T07:08:21.873

如果您有 XML 作为输入，为什么不使用 XSLT 将其转换为`<ul>`?

我猜你的输入看起来像这样（我假设“导航模式”是一个*错字*）：

```
<tree>
  <NavigationNode>
    <title>Introduction</title>
    <NavigationNode>
      <title>Sub Intro</title>
    </NavigationNode>
  </NavigationNode>
  <NavigationNode>
    <title>Module 1</title>
  </NavigationNode>
</tree> 
```

使用一个小的 XSLT 1.0 样式表：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output omit-xml-declaration="yes" indent="yes" />

  <xsl:template match="/tree">
    <ul>
      <xsl:apply-templates select="NavigationNode" />
    </ul>
  </xsl:template>

  <xsl:template match="NavigationNode">
    <li>
      <xsl:value-of select="title" />
      <xsl:if test="NavigationNode">
        <ul>
          <xsl:apply-templates select="NavigationNode" />
        </ul>
      </xsl:if>
    </li>
  </xsl:template>

</xsl:stylesheet> 
```

产生此输出：

```
<ul>
  <li>
    Introduction
    <ul>
      <li>Sub Intro</li>
    </ul>
  </li>
  <li>Module 1</li>
</ul> 
```

[PHP 文档展示了如何使用 XSLT。](http://www.php.net/manual/en/xsl.examples.php)这很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T07:14:11.237

这是您的数组结构的快速 PHP 实现，可帮助您入门：

```
function create_html_list($nodes)
{
    echo '<ul>';

    foreach ($nodes as $node) {
        $childNodes = $node['value'];
        $titleNode = array_shift($childNodes);

        echo "<li>", $titleNode['value'];

        if (count($childNodes) > 0) {
            create_html_list($childNodes);
        }

        echo "</li>";
    }

    echo '</ul>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T07:20:58.113

我没有针对演示数据的变化对其进行测试...

```
<?php

function getTitle($node) {
    foreach ($node['value'] as $cnode) {
            if ($cnode['tag'] == 'Title') {
                return $cnode['value'];
            }
    }

    return 'untitled';
}

function getCNodes($node) {
    $cnodes = array();

    foreach ($node['value'] as $cnode) {
        if ($cnode['tag'] == 'NavigationNode') {
            $cnodes[] = $cnode;
        }
    }

    return $cnodes;
}

function runTree($node) {
    $title  = getTitle($node);
    $cnodes = getCNodes($node);

    if (count($cnodes) > 0) {
        $out = '<li>' . $title . "\n" . '<ul>';
        foreach ($cnodes as $cnode) {
            $out .= runTree($cnode);
        }
        $out .= '</ul>' . "\n" . '</li>' . "\n";

        return $out;
    } else {
        return '<li>' . $title . '</li>' . "\n";
    }
}

$tree = array(
    0 => array(
        'tag' => 'NavigationMode',
        'value' => array(
                0 => array(
                        'tag' => 'Title',
                        'value' => 'Introduction'
                ),
                1 => array(
                        'tag' => 'NavigationNode',
                        'value' => array(
                                0 => array(
                                        'tag' => 'Title',
                                        'value' => 'Sub Intro'
                                )
                        )
                )
        )
    ),
    1 => array(
        'tag' => 'NavigationMode',
        'value' => array(
                0 => array(
                        'tag' => 'Title',
                        'value' => 'Module 1'
                )
        )
    )
);

echo '<ul>';
foreach ($tree as $node) {
    echo runTree($node);
}
echo '</ul>';

?> 
```

# c - 哪些 C 编译器有指针减法下溢？

> ID：784764
> 
> 赞同：2
> 
> 时间：2009-04-24T06:43:47.517
> 
> 标签：c, arrays, pointers, compiler-construction, pointer-arithmetic

因此，正如我从[Michael Burr](https://stackoverflow.com/users/12711/michael-burr)[对此答案](https://stackoverflow.com/questions/784417/c-reverse-a-string/784455#784455)的评论中了解到的那样，C 标准不支持从数组中第一个元素（我想包括任何分配的内存）的指针中减去整数。

来自[组合 C99 + TC1 + TC2](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf) (pdf) 的第 6.5.6 节：

> 如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则计算不应产生溢出；否则，行为是未定义的。

我喜欢指针算术，但这从来不是我以前担心过的事情。我一直假设：

```
 int a[1];
 int * b = a - 3;
 int * c = b + 3; 
```

那个`c == a`。

因此，虽然我相信我以前做过这种事情并且没有被咬，但这一定是由于我使用过的各种编译器的好意——它们已经超出了标准所要求的使指针算术按我想象的方式工作。

所以我的问题是，这有多普遍？是否有常用的编译器对我不那么友好？超出数组边界的正确指针算术是事实上的标准吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T06:57:10.030

MSDOS FAR 指针有这样的问题，通常通过在实模式中“巧妙地”使用段寄存器与偏移寄存器的重叠来解决。那里的效果是 16 位段是左移 4 位，并添加到 16 位偏移量，这给出了一个可以寻址 1MB 的 20 位物理地址，这已经足够了，因为每个人都知道没有人会需要高达 640KB 的 RAM。;-)

在保护模式下，段寄存器实际上是内存描述符表的索引。典型的 DOS 扩展运行时通常会安排一些事情，以便可以像在实模式下一样对待许多段，这使得从实模式移植代码变得容易。但它有一些缺陷。首先，分配*之前*的段不是分配的一部分，因此它的描述符甚至可能无效。

在处于保护模式的 80286 上，仅使用会导致加载无效描述符的值加载段寄存器将导致异常，无论描述符是否实际用于引用内存。

在分配后的一个字节处可能会发生类似的问题。指针上的最后一个 ++ 可能已经转移到段寄存器，导致它加载新的描述符。在这种情况下，期望内存分配器可以在分配范围的末尾安排*一个*安全描述符是合理的，但期望它安排更多的内容是不合理的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T06:56:17.533

这不是标准的“实现定义”，这是标准的“未定义”。这意味着你不能指望一个支持它的编译器，你不能说，“好吧，这个代码在编译器 X 上是安全的”。通过调用未定义的行为，您的程序是未定义的。

实际的答案不是“我如何（在哪里、何时、在什么编译器上）我可以摆脱这个”；实际的答案是“不要这样做”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-06T22:57:03.710

另一个原因是，有可选的保守垃圾收集器（如 boehm-weiser GC）假定指针始终在分配的范围内，如果不在分配范围内，则允许它们随时释放内存。

有一个流行的商业质量和使用的库确实打破了这一假设，它是 HP 的 Judy Trees 库，它使用指针算法来实现非常复杂的哈希结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T21:13:52.823

[用于 TI Explorer 的ZETA-C](http://www.bitsavers.org/bits/TI/Explorer/zeta-c/)；指针被实现为数组和索引或置换数组，IIRC，所以你的例子可能不起作用。从`zcprim>pointer-subtract`in开始`zcprim.lisp`弄清楚行为会是什么。不知道这是否符合标准，但我的印象是正确的。

# .net - 包含 DataTable 的类的 XML 架构

> ID：784767
> 
> 赞同：1
> 
> 时间：2009-04-24T06:47:01.003
> 
> 标签：.net, xml, serialization, datatable, xsd

我有一个类，它的字段类型为`DataTable`。

我想为这门课写 XSD。我的问题是数据结构不固定。列是动态添加的。如何为这样的类编写 XSD？

一旦定义了 XSD，我想针对 XSD 验证序列化为 XML 的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T16:46:04.370

听起来您需要一种元格式，其中架构定义了一种定义列的方式，而不是定义特定的列本身。

这种 xml 往往是丑陋和冗长的（例如，考虑 xmlrpc 和 soap）。这也意味着架构无法验证实际的列，只能验证它们是否已正确定义。

XML 看起来像这样：

```
<DataTable>
  <column name="..." value="..."/>
  <column name="..." value="..."/>
</DataTable> 
```

XSD 将是这样的：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="DataTable">
    <xs:complexType>
      <xs:sequence minOccurs="0" maxOccurs="unbounded">
        <xs:element name="column">
          <xs:complexType>
            <xs:attribute name="name" type="xs:string"/>
            <xs:attribute name="value" type="xs:string"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

当然，如果您需要结构化值（不仅仅是字符串），那么您将需要一些更复杂的东西。如果您需要任意对象，则可以将它们表示为每个对象的映射，其值可以依次映射等。元素模式定义需要是递归的，因此它可以包含自身的另一个实例。这基本上就是 xmlrpc 和 soap 所做的。

*编辑*这不适合你的“列”，但一个例子是：

```
<object name="contact">
  <object name="home">
    <object name="tel">
       <string name="area" value="910"/>
       <string name="num" value="1234 5678"/>
    </object>
  </object>
  <object name="work">
    <object name="tel">
       <string name="area" value="701"/>
       <string name="num" value="8888 8888"/>
    </object>
    <object name="fax">
       <string name="area" value="701"/>
       <string name="num" value="9999 9999"/>
    </object>
  </object>
</object> 
```

语法的基本思想：

```
V --> string | O      // a Value is a string or an Object
O --> (K V)*          // an Object is list of named values (Key-Value pairs) 
```

改变了，所以根始终是一个对象，并命名为：

```
O ==> (string K | O)* K 
```

用于此的 XSD：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="object">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">

        <xs:element name="string">
          <xs:complexType>
            <xs:attribute name="name" type="xs:string"/>
            <xs:attribute name="value" type="xs:string"/>
          </xs:complexType>
        </xs:element>

        <xs:element ref="object"/>

      </xs:choice>
      <xs:attribute name="name" type="xs:string"/>
    </xs:complexType>
  </xs:element>

</xs:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T07:00:57.867

如果您要针对 XSD 验证序列化的 xml，这意味着它必须符合某种结构，但它可以非常灵活。您需要学习如何创建 XSD 以及各种属性和参数。无论您想要什么结构都可以开始定义它，一旦您开始这个过程，它就不会那么困难了。在提出具体问题后，SO 社区将提供帮助。

XSD 基础教程[http://www.w3schools.com/Schema/](http://www.w3schools.com/Schema/) 你可以在 Liquid xml studio 中创建 XSD。它的免费和基于 GUI 的[http://www.liquid-technologies.com/](http://www.liquid-technologies.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T08:42:38.653

一般来说，如果列是动态的，那么 XSD 也必须是动态的。一种解决方案可能是对创建表列的函数实现补充函数，该函数为适当的 xls 元素（表示类表）动态创建 xls 语句。当然，必须提前定义 xsd 的静态部分，并将其与动态创建的 xsd 部分合并。

使用 XML 我建议你使用 Stylus Studio。

# linq - 使用 LINQ 表达式而不是 NHIbernate.Criterion

> ID：784770
> 
> 赞同：3
> 
> 时间：2009-04-24T06:47:29.567
> 
> 标签：linq, nhibernate

如果我要根据某些条件选择一些行，我可以使用`ICriterion`object in `NHibernate.Criterion`，例如：

```
 public List<T> GetByCriteria()
  {
  SimpleExpression newJobCriterion =
    NHibernate.Criterion.Expression.Eq("LkpStatu", statusObject);
  ICriteria criteria = Session.GetISession().CreateCriteria(typeof(T)).SetMaxResults(maxResults);
  criteria.Add(newJobCriterion );
  return criteria.List<T>();
  } 
```

或者我可以使用 LINQ 的 where 子句来过滤我想要的内容：

```
 public List<T> GetByCriteria_LINQ()
  {

  ICriteria criteria = Session.GetISession().CreateCriteria(typeof(T)).SetMaxResults(maxResults);

  return criteria.Where(item=>item.LkpStatu=statusObject).ToList();
  } 
```

当然，我更喜欢第二个。因为

1.  它给了我强大的打字能力
2.  我不需要以 NHibernate 的形式学习另一种语法

问题是第一个比第二个有什么性能优势吗？据我所知，第一个将创建 SQL 查询，因此它会在传递到内存之前过滤数据。这种性能节省是否足以证明其使用的合理性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T07:55:11.217

像往常一样，这取决于。首先请注意，在您的第二个代码段中，`.List()`紧随其后的是`return criteria`并且还请注意，您不会在两个示例中获得相同的结果。第一个执行 where 然后返回 top maxResults，但是第二个首先选择 top maxResults 然后执行 where。

如果您的预期结果集相对较小，并且您可能会在延迟加载中使用某些结果，那么实际上最好采用第二种方法。因为通过会话加载的所有实体都将保留在其一级缓存中。

但是，通常您不会这样做，而是使用第一种方法。

也许您想使用 NHibernate.Linq（位于[Contrib 项目](http://sourceforge.net/projects/nhcontrib/)中）。哪个为您将 linq 翻译为标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-13T09:38:40.343

我把两者结合起来做了这个：

```
var crit = _session.CreateCriteria(typeof (T)).SetMaxResults(100);
return (from x in _session.Linq<T>(crit) where x.field == <something> select x).ToList(); 
```

# c++ - 静态库、动态库、DLL、入口点、头文件……如何活着摆脱这个困境？

> ID：784781
> 
> 赞同：7
> 
> 时间：2009-04-24T06:54:24.450
> 
> 标签：c++, architecture, dynamic, static

我最近不得不在 Windows 下为一个大学项目编写 C++，我对静态和动态库系统、编译器需要什么、链接器需要什么、如何构建库......有什么好的文档吗？这个在外面吗？我对 *nix 库系统也很困惑（所以，dylibs，ar 工具，如何编译它们......），你能指出一份关于各种架构上当前库技术的评论文档吗？

注意：由于我所知甚少，此消息可能包含错误概念，请随时编辑。

谢谢

**随意添加更多参考，我会将它们添加到摘要中。**

* * *

**参考**

由于你们中的大多数人都发布了 *nix 或 Windows 特定的参考资料，我将在这里总结最好的参考资料，我会将 Wikipedia 的答案标记为已接受的答案，因为这是一个很好的起点（并且内部也有参考资料）来介绍这些内容。

[程序库 Howto](http://www.dwheeler.com/program-library/Program-Library-HOWTO/) (Unix)

[动态链接库（来自 MSDN）](http://msdn.microsoft.com/en-us/library/ms682589.aspx)（Windows）

[DLL 信息 (StackOverflow)](https://stackoverflow.com/questions/124549/dll-information) (Windows)

用 C (Unix)[编程](http://www.cs.cf.ac.uk/Dave/C/)

[编译和链接概述](http://edn.embarcadero.com/article/29930)(Windows)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T06:58:46.170

[从维基百科](http://en.wikipedia.org/wiki/Library_(computing))开始——那里有很多信息，还有很多其他有用资源的链接。

PS但也许最好只问一个关于你目前遇到的问题的具体问题。学习如何解决它可能对教你一般概念大有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T08:06:38.770

[您可以在此处](http://encyclopedia.kids.net.au/page/dy/Dynamically_linked_library)找到本文的一些背景信息。它为您提供了基本背景。我正在尝试用图表找到一些东西。这应该是一个开始的好地方。

静态库和 DLL 之间的根本区别在于，使用静态库，代码被编译到最终的可执行文件中，而动态链接库涉及链接到“存根”库（到您的应用程序）中，该库包含到单独的函数的映射文件 (.dll)。

[这是有关创建静态 Win32 库](http://msdn.microsoft.com/en-us/library/ms235627.aspx)的 MSDN 条目，它也可能对您有所帮助。..另一个指向 MSDN 的链接，用于[创建动态链接库](http://msdn.microsoft.com/en-us/library/ms235636.aspx)..

刚刚发现[这个网站](http://edn.embarcadero.com/article/29930)基本上涵盖了你引用的所有方面的定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T07:37:09.713

看看这些是否有用：

*   [静态和动态库](http://www.learncpp.com/cpp-tutorial/a1-static-and-dynamic-libraries/)
*   [程序库 HOWTO](http://www.dwheeler.com/program-library/Program-Library-HOWTO/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T07:48:56.910

Windows 相关的东西总是有 MSDN：dll 的首页 - > [http://msdn.microsoft.com/en-us/library/ms682589](http://msdn.microsoft.com/en-us/library/ms682589)

对于 Unix，我最喜欢的参考手册：Programming in C, UNIX System Calls and Subroutines using C -> [http://www.cs.cf.ac.uk/Dave/C/](http://www.cs.cf.ac.uk/Dave/C/)

R M

# java - EHCache 似乎不起作用

> ID：784787
> 
> 赞同：0
> 
> 时间：2009-04-24T06:57:47.953
> 
> 标签：java, hibernate, ehcache

我已经在使用 Spring 和 Hibernate 的 Java 应用程序上设置了 ehcache。但是，当我运行 Junit 测试并打印统计信息时，缓存中似乎没有任何内容：

每个缓存的缓存管理器统计信息的输出：

COM.****.SERVICES.CLARITY.DOMAIN.ACTIONITEM.BYRESOURCEUNIQUENAME：getCacheHits：0 getCacheMisses：0 getObjectCount：0

COM.****.SERVICES.CLARITY.DOMAIN.ACTIONITEM：getCacheHits：0 getCacheMisses：0 getObjectCount：0

COM.****.SERVICES.CLARITY.DOMAIN.RESOURCE：getCacheHits：0 getCacheMisses：0 getObjectCount：0

映射文件的内容（仅部分，太大，无法全部粘贴）：

```
<class name="ActionItem" table="CAL_ACTION_ITEMS" mutable="false" lazy="false" >
<cache region="com.****.services.clarity.domain.ActionItem" usage="read-only" include="all" /> 
```

[...]

```
<query name="byResourceUniqueName" cacheable="true" cache-region="com.****.services.clarity.domain.ActionItem.byResourceUniqueName" read-only="true">
    FROM ActionItem WHERE id IN (
        SELECT DISTINCT actionItemId FROM ActionItemAssignee as aia WHERE assigneeId IN (
            SELECT userId FROM Resource WHERE uniqueName = :uniqueName
        )
    )
    ORDER BY dueDate
</query> 
```

EHCACHE.XML 的内容：

```
<cache
    name="com.****.services.clarity.domain.ActionItem"
    maxElementsInMemory="2000" eternal="false" timeToIdleSeconds="0"
    timeToLiveSeconds="600" overflowToDisk="false" />

<cache
    name="com.****.services.clarity.domain.ActionItem.byResourceUniqueName"
    maxElementsInMemory="2000" eternal="false" timeToIdleSeconds="0"
    timeToLiveSeconds="60" overflowToDisk="false" />

<defaultCache maxElementsInMemory="200" eternal="false"
    timeToIdleSeconds="120" timeToLiveSeconds="120" overflowToDisk="true"
    memoryStoreEvictionPolicy="LRU" /> 
```

休眠配置：

```
 <property name="hibernateProperties">
        <value>
            hibernate.format_sql=true
            hibernate.dialect=org.hibernate.dialect.OracleDialect
            hibernate.cache.provider_class=net.sf.ehcache.hibernate.EhCacheProvider
            hibernate.cache.use_query_cache=true
            hibernate.show_sql=true
        </value>
    </property>
</bean> 
```

关于如何填充缓存的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-08T09:22:08.330

通常，这些项目会由 Hibernate 自动填充到缓存中。

我在您的配置中注意到的一件事是您没有启用统计信息。添加属性

```
hibernate.generate_statistics=true 
```

到你的会话工厂的配置，看看你的输出中是否出现了数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-14T06:59:39.057

是的，当你在 hibernate 中使用第二个缓存时，当你查询时，你必须像这样设置：

```
Query q=....
q.setCacheable(tre); 
```

如果你春天你必须这样写

```
getHibernateTemplate().setCacheQueries(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T19:11:24.757

首先，你确定 s 的缓存使用`ActionItem`应该是 s`read-only`吗？这些项目最初是如何填充的？而且，即使这对您的业务模型是正确的，也请考虑将其更改为`nonstrict-read-write`，以查看它是否会更改您的测试中的任何内容。

然后，您是否尝试过`byResourceUniqueName`在启用缓存的情况下执行查询：

```
Query q = getSession().getNamedQuery("byResourceUniqueName");
q.setCacheable(true);
List result = q.list(); 
```

即使`cacheable`参数应该只影响查询结果集的缓存，同样，看看它是否改变了任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-02T06:25:04.647

尝试使用 net.sf.ehcache.hibernate.SingletonEhCacheProvider 而不是 net.sf.ehcache.hibernate.EhCacheProvider

# c# - 最佳实践 - 格式化多种货币

> ID：784794
> 
> 赞同：17
> 
> 时间：2009-04-24T07:00:02.067
> 
> 标签：c#, internationalization, currency, cultureinfo, regioninfo

下面列出的方案的最佳做法是什么？

我们有一个希望支持多种货币的应用程序。该软件将尊重用户的区域设置和区域设置以指示正确的数字格式，即 $10,000.00 或 10.000,00₴ 等。

然而，我们希望能够根据货币 ID（可能是三个字母的 ISO4217 代码）格式化不同的数字。我们的想法是在数据库中存储一个包含每种货币的表，然后请求用户选择将使用的货币符号。然后程序将根据区域设置/区域设置格式化所有数字，但将使用我们程序中定义的货币符号。

因此，给定以下值和货币
10000 AUD
5989.34 USD
450 EUR

该程序将输出
$10,000.00
$5,989.34
€450.00

或者使用将数字格式化为 #####,##$ 的区域设置，结果将是；
10000,00$
5989,34$
450,00€

尊重区域设置/区域编号格式但显示不同的货币，对此的最佳做法是什么？

我希望这是有道理的。

使用的技术是 c# .NET 2.0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-07-01T21:33:33.827

我认为这个 Q 是关于你应该做什么的一个很好而明确的答案

[SO - 不显示文化的本国货币时的正确货币格式](https://stackoverflow.com/questions/850673/proper-currency-format-when-not-displaying-the-native-currency-of-a-culture)

这个 Q 对如何在 C# 中执行此操作有一个很好的答案

[SO - 货币格式](https://stackoverflow.com/questions/1071273/currency-formatting/1071302)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T09:37:43.153

听起来您已经掌握了格式化数据的最佳实践。如果我是你，我不会担心技术上的标准是什么，而是更多地关注你的用户习惯了什么。

如果您在用户对不同货币相当精通的市场中运营，那与拥有更多单一文化用户是完全不同的事情。根据具体情况，您将需要以不同的方式设计您的界面。

此外，如果您的要求是在**任何**区域显示**任何**货币，那么[ISO4217](http://en.wikipedia.org/wiki/ISO_4217)标准是您的最佳选择。它是在世界各地的货币兑换商店、货币兑换、发票等上显示的内容。否则，显示货币符号可能会让某些用户感到困惑，并且该符号本身并不表示实际金额是什么货币。

 **我还将参考以下 SO 问题。并非所有这些都与您的问题直接相关，但他们对支持多种货币所涉及的问题进行了很好的元讨论。

*   [如何在 Java 中四舍五入货币值](https://stackoverflow.com/questions/522855/how-do-i-round-up-currency-values-in-java)
*   [用 Java 表示货币价值](https://stackoverflow.com/questions/285680/representing-monetary-values-in-java)
*   [如何处理 Java BigDecimal 性能？](https://stackoverflow.com/questions/611732/what-to-do-with-java-bigdecimal-performance)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T09:38:42.650

您可以存储每个货币代码的文化字符串，而不是只存储货币符号，所以 AUD --> en-AU

```
CultureInfo ci = new CultureInfo("en-AU");
currencyValue.ToString( "c", ci ); 
```

我不确定可用格式有多大的灵活性。

不确定这是否有帮助：

[为特定文化格式化数字数据](http://msdn.microsoft.com/en-us/library/syy068tk(VS.71).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T07:07:53.653

您可以将货币值存储为小数，然后在 UI 上附加货币符号。

[Fowler 在此处讨论企业应用程序架构模式](http://www.martinfowler.com/books.html#eaa)中的金钱模式：http : [//www.martinfowler.com/eaaCatalog/money.html](http://www.martinfowler.com/eaaCatalog/money.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T14:31:41.997

我遇到了类似的情况。我找到了一种方法，不知道它对你有多大用处。但它解决了我的问题。我为每个登录身份验证的每个地方设置了一个会话字符串，例如 Session["cur"]="0.000" 或 "0.00"。在系统中出现货币时，我使用 .ToString[Session["cur"].ToString()] 来处理模型变量。它对我有用。希望它对你也有帮助。

# linq - 更新子级时父级“LastUpdatedOn”字段上的 LINQ UpdateCheck

> ID：784795
> 
> 赞同：0
> 
> 时间：2009-04-24T07:00:21.567
> 
> 标签：linq

是否可以在更新子对象时将“UpdateCheck”设置为父对象的“LastUpdatedOn”字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-06-24T22:07:47.220

我对这个问题感到非常困惑。ColumnAttribute UpdateCheck 只能设置为以下之一：Never、WhenChanged、Always。

如果您尝试在子对象中的属性更改时为父对象添加时间戳，则可以使用部分方法来捕获更改事件并在那里运行其他语句。

```
public partial class MyObject
{
    partial void OnMyPropertyChanging(string value)
    {
        // fire set other linq against parent here  
    }
} 
```

# sql - SQL函数问题

> ID：784804
> 
> 赞同：2
> 
> 时间：2009-04-24T07:06:46.400
> 
> 标签：sql, tsql, logic

为这个问题想出搜索参数时遇到了麻烦，所以我自己找不到答案。

```
      X 栏             |      
留言（信息1）|
消息（信息 2）（信息 1）|

```

以上是我需要处理的一栏的内容。查询的结果应该只是括号内的部分。问题是，有一个程序将两组信息保存在括号中，在这种情况下，LATTER ( **info 1** ) 是我们想要的第一列，除此之外，我们必须为**info 2**添加第二列。

因此，我想象我需要将 if 子句与一个变量结合起来，例如，我可以依靠它来计算有多少左括号。*如果 left_parentheses = 2，则 .... 否则，如果 left_parentheses = 1，则 ....*

但我不知道如何在 SQL 中做到这一点，我也不知道如何在示例中的**info 1 / 2之间进行分隔。**

该示例的结果如下所示：

```
第 1 栏| 第 2 栏
 信息 1 |
 信息 1 | 信息 2

```

像往常一样，我会在这里等待提示的同时尝试寻找答案。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T07:15:19.657

查看内置函数`charindex`、`patindex`和`substring`。

`charindex`查找指定字符、`patindex`模式`substring`的位置，按位置返回字符串的一部分。

我的建议是在 X 所在的表列上编写一个视图，该视图使用上述函数提供两个计算列。那么你可以`insert into result table select info1, info2 from columnX'stable;`。

至少计算的列`info2`将涉及一个 case 语句来处理源中只有一个带括号的“信息”的情况，这些情况如下：

```
case when [some test using patindex too check for two parenthesized infos]
then [some combination of patidex and substring to extract the second info]
else null; 
```

特别是，当找不到模式时 patindex 返回零：

```
patindex('%(%)%(%)%', columnX) 
```

将为您的第一个示例返回零，但不是您的第二个示例。

您还需要考虑如何处理错误数据，特别是 1) 没有括号的行，2) 具有不相等数量的左括号和右括号，3) 在两个带括号的“信息”之间有额外的文本，4) 有额外的右括号后的文本。

我鼓励您将所有这些可能性的示例以及正确格式化的 columnXes 添加到您的测试数据中，然后测试该视图是否在所有情况下都能满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T07:48:21.980

如果您有大量数据，这将需要很长时间，但我怀疑使用 SQL 是否有许多更好的替代方案。

```
DECLARE @Table TABLE (TableID INT PRIMARY KEY, ColumnX VARCHAR(32))

INSERT INTO @Table VALUES (1, '(Info 1) (Info 2)');
INSERT INTO @Table VALUES (2, '(Info 1)');
INSERT INTO @Table VALUES (3, '(Info 10) (Info 20)');
INSERT INTO @Table VALUES (4, '(Info1')
INSERT INTO @Table VALUES (5, '(Info1) (Info2')
INSERT INTO @Table VALUES (6, '(Info1) Info2)')
INSERT INTO @Table VALUES (7, 'Info1')
INSERT INTO @Table VALUES (8, 'Info1)')
INSERT INTO @Table VALUES (9, NULL);

SELECT 
  TableID
  , [Column1] = CASE WHEN PATINDEX('%(%)%', ColumnX) = 1 
                THEN SUBSTRING(ColumnX
                               , CHARINDEX('(', ColumnX) + 1
                               , CHARINDEX(')', ColumnX) 
                                 - CHARINDEX('(', ColumnX) - 1
                             ) 
                ELSE NULL END
  , [Column2] = CASE WHEN PATINDEX('%(%)%(%)%', ColumnX) = 1 
                THEN SUBSTRING(ColumnX
                               , CHARINDEX('(', ColumnX, CHARINDEX('(', ColumnX) + 1) + 1
                               , CHARINDEX(')', ColumnX, CHARINDEX(')', ColumnX) + 1) 
                                 - CHARINDEX('(', ColumnX, CHARINDEX('(', ColumnX) + 1) - 1
                              )
                ELSE NULL END
FROM @Table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T07:41:58.313

这是我在 SQL 2005 语法中使用公用表表达式的方法。我没有声称它的正确性或效率，并且我对您希望它如何工作做出了一些假设。

```
WITH BracketIndeces AS
(
  SELECT 
    ColumnX AS ColVal,
    CHARINDEX('(', ColumnX) as first_open_bracket,
    CHARINDEX('(', ColumnX, CHARINDEX('(', ColumnX)+1) as second_open_bracket,
    CHARINDEX(')', ColumnX) as first_close_bracket,
    CHARINDEX(')', ColumnX, CHARINDEX(')', ColumnX)+1) as second_close_bracket
  FROM SomeTable
)
SELECT
  CASE
    WHEN second_close_bracket = 0 THEN
        SUBSTRING(ColVal, first_open_bracket+1, first_close_bracket - first_open_bracket-1)
    ELSE
        SUBSTRING(ColVal, second_open_bracket+1, second_close_bracket - second_open_bracket-1)      
  END AS Column1,
  CASE
    WHEN second_close_bracket = 0 THEN
        NULL
    ELSE
        SUBSTRING(ColVal, first_open_bracket+1, first_close_bracket - first_open_bracket-1)
  END AS Column2
FROM BracketIndeces
WHERE first_open_bracket <> 0
AND first_close_bracket <> 0
AND first_open_bracket < first_close_bracket
AND (
  (second_open_bracket = 0 AND second_close_bracket = 0) 
  OR
  (second_open_bracket < second_close_bracket 
    AND second_open_bracket > first_close_bracket
  )
) 
```

底部的 where 子句只是过滤掉任何不包含括号或以奇怪的顺序包含括号的列，并且当只有一组括号存在时，它在 Column2 中使用 NULL。

# javascript - 弹出页面作为模态的解决方案

> ID：784815
> 
> 赞同：1
> 
> 时间：2009-04-24T07:14:09.193
> 
> 标签：javascript, asp.net-mvc, thickbox

我正在使用 window.showModalDialog() 但不适用于所有浏览器。

人们向我推荐 jquery、[thickbox](http://jquery.com/demo/thickbox/)以及这个[联系人示例](http://www.ericmmartin.com/simplemodal/)

但问题是当我提交页面时，服务器会向我发送另一个页面，并且该页面将替换我原来的页面！

所以实际上它不符合我的要求。我的要求是按钮单击模式页面应该打开，它可以重定向到同一窗口上的其他页面，而不会干扰我的原始页面，并且当我关闭我的原始页面时会得到反射。那么有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T07:19:47.087

听起来您需要一个简单的 html target="_blank" 在指向其他页面的链接中。

[http://www.htmlcodetutorial.com/linking/_A_TARGET_95y98y108y97y110y107y.html](http://www.htmlcodetutorial.com/linking/_A_TARGET_95y98y108y97y110y107y.html)

# ruby-on-rails - 是否有可以使用测试数据填充数据库的 gem/插件？

> ID：784828
> 
> 赞同：1
> 
> 时间：2009-04-24T07:19:36.463
> 
> 标签：ruby-on-rails, ruby-on-rails-plugins, gem

是否有可以使用测试数据填充数据库的 gem 或插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T08:22:06.143

与以往一样，Ryan Bates 有一个关于这个主题的[Railscast ，其中涵盖了使用](http://railscasts.com/episodes/126-populating-a-database)[Faker](http://faker.rubyforge.org/)和[Populator](http://populator.rubyforge.org/) gem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T19:08:37.133

对于测试，我是[thoughtbot 工厂女孩](http://www.thoughtbot.com/projects/factory_girl)的粉丝。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T07:54:07.083

看看 Rails 中的 Fixtures。它带有标准的 Rails 套件。

另请参阅：[测试 Rails 应用程序指南](http://guides.rubyonrails.org/testing.html)- 请参阅第 2.3 节

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T08:11:45.107

我认为[Red Gate 的 SQL 数据生成器](http://www.red-gate.com/products/SQL_Data_Generator/index.htm)会做到这一点。我使用他们的 SQL Prompt 产品。看起来很受欢迎的产品。甚至[Scott Gu](http://weblogs.asp.net/scottgu/archive/2006/05/22/Red_2D00_Gate-SQL-Query-Intellisense-Tool-_2800_Free-Download_2900_.aspx)也写过关于他们的博客。

[编辑] 哦，除非你的意思是导轨... 8|

# asp.net-mvc - asp.net mvc 模块化应用程序操作指南/建议

> ID：784837
> 
> 赞同：7
> 
> 时间：2009-04-24T07:25:07.060
> 
> 标签：asp.net-mvc

有人推荐以可插拔模块化方式构建 ASP.Net MVC 应用程序吗？我的意思是一些博客文章/教程等。我刚刚阅读了[Hammet 的 MEF 和 ASP.NET MVC 示例博客文章](http://blogs.msdn.com/hammett/archive/2009/04/23/mef-and-asp-net-mvc-sample.aspx)，但我发现 MEF 还不够成熟，无法在生产中使用它。我无法在谷歌上搜索出有关此主题的任何其他相关帖子...

我知道我可以实现模块化实现自定义 ControllerProvider 和一些插件检查机制，但我想在开始重新实现轮子之前研究更多方法/最佳实践:)

* * *

我的意思是这个主题的模块化应该只涵盖 Web 应用程序的观点 - 没有其他类似模块化应用程序模型/服务等。我想找到最好的方法将一个 Web 应用程序分成多个包含附加控制器的程序集，视图、资源、JS+CSS 文件、图像等。所以应该有一些主要的 Web 应用程序项目来寻找可用的可插入 Web 应用程序程序集、加载它们、发布它们的控制器、使它们的视图和其他资源可用并且可能准备一些菜单每个 Web 应用程序模块的条目。

我不想在这里讨论任何模型+服务的可插拔架构——只是 ASP.Net M **VC**部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T07:49:13.693

模块化是一个相当广泛的概念，我认为您的问题的答案必须是主观的。您要问的是一个架构决策，没有一种好的方法可以解决这个问题。根据项目的不同，您可能对系统的不同部分有不同的优先级和重要性。我认为 MVC 模式提供了足够的关注点分离，这实际上是每个模块化架构的目的。

如果您希望能够在现有应用程序中轻松插入新模块，那么您如何定义模块？我认为您应该稍微缩小问题范围，以获得一些不模糊且有意义的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-29T12:06:04.533

作为起点，您可以从本文中获得一些想法：

[Spark View Engine - 模块化](http://sparkviewengine.com/usage/modularity)

以及示例代码：

[spark / src / 样本/模块](http://github.com/loudej/spark/tree/master/src/Samples/Modules)

代码在 Spark View Engine 树中（这是一个非常好的和强大的项目），但与它没有太大关系。它使用 Castle 来建立依赖关系和所有这些东西。

顺便说一句，我一直在搞乱 MEF，但我现在并没有真正看到好处，我需要做的事情可以使用 Castle 和一些工具（查询程序集的助手和类似的东西）来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-30T08:55:45.837

[MVC Portable Areas](http://lostechies.com/erichexter/2009/11/01/asp-net-mvc-portable-areas-via-mvccontrib/)可以很好地解决这个问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T16:05:15.837

我发现一篇文章解决了您谈到的一些基本要求。不幸的是，这篇文章已经过时了大约一年，使用的是 ASP.NET MVC 3，所以我重写了它并测试了使其与 ASP.NET MVC 4 一起使用的方法。你可以[在这里阅读它](http://geekswithblogs.net/cokobware/archive/2013/01/15/asp.net-mvc-4-pluggable-application-modules.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T08:09:35.517

模块化的基本论点总是相同的......

*   可测试性
*   可维护性
*   易于部署

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-30T21:56:41.483

我知道这个问题已经回答了。但是，我一直在寻找有关此主题的更多最新答案。正如原始答案所暗示的那样，我查看了 Areas，但也遇到了 Liviu Ignat 的以下链接（[第 1](http://www.codeproject.com/Articles/358360/NET-4-0-ASP-NET-MVC-3-plug-in-architecture-with-e)部分和[第 2 部分](http://www.codeproject.com/Articles/614767/NET-ASP-NET-MVC-plug-in-architecture-with-embedded)），它从可插入模块的角度回答了这个问题。

# vb.net - 从 dd/mm/yyyy 转换为 mm/dd/yyyy

> ID：784844
> 
> 赞同：2
> 
> 时间：2009-04-24T07:28:24.510
> 
> 标签：vb.net, datetime

我使用了以下代码。

```
string result = DateTime.ParseExact("24/5/2009 3:40:00 AM",
                                    "d/M/yyyy h:mm",
                                     CultureInfo.InvariantCulture)
                        .ToString("M/d/yyyy h:mm"); 
```

> 在 12'0 时钟之后的文本框中时间（例如：24/5/2009 14:00）我想转换为格式为 24/5/2009 2:00 PM。有人可以提供适当的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T07:34:37.100

假设您的原始日期以字符串开头并且您希望它以另一个字符串结尾，您可以在 C# 中执行以下操作：

```
string from = "24/5/2009 3:40:00 AM";
DateTime dt = DateTime.ParseExact(from, "d/M/yyyy h:mm:ss tt", , System.Globalization.CultureInfo.InvariantCulture);
string to = dt.ToString("MM/dd/yyyy hh:mm:ss tt", System.Globalization.CultureInfo.InvariantCulture); 
```

*编辑：修复了格式化字符串。它假定您的原始字符串只有一位数的日、月和小时值，当它们都小于 10 时。它还假定您希望它们全部为结果的 2 位值。

这是有关该主题的 MSDN 文档：[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T07:41:44.540

```
Dim result As String = DateTime.ParseExact("24/5/2009 3:40:00 AM",
                                    "d/M/yyyy h:mm:ss tt",
                                     CultureInfo.InvariantCulture)
                               .ToString("M/d/yyyy h:mm:ss tt") 
```

也可以看看：

*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)
*   [.NET 字符串格式备忘单](http://acodingfool.typepad.com/blog/dotnet-string-formatting-cheat-sheet.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T08:11:31.473

值`DateTime`根本没有格式，因此如果源是日期时间值，则它实际上不是转换，而只是格式化输出的问题。

您可以使用自定义格式字符串`"M'/'d'/'yyyy h':'mm':'ss tt"`来获得该格式。（您的问题提到了两种不同的格式，所以我假设它是您想要的示例数据所代表的格式；具有秒数的格式。）

例子：

```
Dim result As String = source.ToString("M'/'d'/'yyyy h':'mm':'ss tt") 
```

如果源是一个字符串，因此它实际上是您需要的转换，您可以使用字符串操作将字符串拆分为组件并重新排列它们，或者您可以将字符串解析为一个`DateTime`值并将其重新格式化为一个新字符串。

例子：

```
Dim source As String = "24/5/2009 3:40:00 AM"
Dim d As DateTime = DateTime.ParseExact(source, "d'/'M'/'yyyy h':'mm':'ss tt", CultureInfo.InvariantCulture)
Dim result As String = d.ToString("M'/'d'/'yyyy h':'mm':'ss tt") 
```

或者：

```
Dim source As String = "24/5/2009 3:40:00 AM"
Dim d As String() = source.Split("/".ToCharArray(), 3)
string result = d(1) + "/" + d(0) + "/" + d(2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T09:41:35.957

用这个

```
 sql = "INSERT INTO emp(ID, firstname, lastname, DOB) VALUES(Null, '" & txtFirstName.Text.Trim & "','" & txtLastName.Text.Trim & "', '" & dpDOB.Value.Date.ToString("yyyy-MM-dd") & "');"

    mMySQLConnection.Open();
    comm = New MySqlCommand(sql, mMySQLConnection);

    comm.CommandType = CommandType.Text;
    comm.ExecuteNonQuery();
    mMySQLConnection.Close(); 
```

# sql-server - NHibernate 映射参考表

> ID：784845
> 
> 赞同：1
> 
> 时间：2009-04-24T07:28:58.080
> 
> 标签：sql-server, nhibernate

我有一个相当复杂的场景/设计需要整理，非常感谢一些建议或见解。

我正在尝试映射以下内容，但没有取得多大成功。

```
<class name="CalEvent" table="tb_calEvents" lazy="false" >

<id name="id" column="id">
  <generator class="hilo"/>
</id>

<property name="summary"/>
---snip----

<bag name="categories"  table="tb_calEvent_category" lazy="false">
  <key column="parentID"/>
  <one-to-many class="Category"/>
</bag> 
```

/////////////////

```
<class name="Category" table="tb_calEvent_category" lazy="false">

<id name="id" column="id" unsaved-value="0">
  <generator class="hilo"/>
</id>

<property name="categoryID"/>

<property name="parentID"/>

<property name="categoryType"/> 
```

类别表

[id] bigint NULL [parentID] bigint NULL [categoryType] nvarchar(255) NULL [categoryID] int NULL 约束 [tb_calEvent_category_fk] 外键 ([parentID])

上面的 tb_calEvent_category 表似乎已设置为一种查找表。在各自的表格中有 3 种不同的类别；categoryType 是对该类别所在的表的引用，而 categoryID 是对该表主键的引用。

我在检索 calEvents 时没有问题，但无法干净地添加或更新。

有没有人想过我可以如何映射这个？可能吗？还是我将不得不跳过几个圈才能成功地将 calEvents 添加和更新到数据库？

我认为这个表是这样设置的，以减少连接，或者可以添加其他类别。嗯..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T07:36:55.003

我认为这是你的主要问题：

```
<id name="id" column="id" unsaved-value="0">   
    <generator class="hilo"/> 
</id>

<property name="categoryID"/> 
```

当您尝试设置类别 ID 两次时。

这可能更像您需要的：

```
 <id name="id" column="categoryID" unsaved-value="0">   
    <generator class="hilo"/> 
 </id> 
```

另外，最好使用 sqlserver 标识生成器（本机），确保列设置为 sqlserver 中的标识符，并确保 FK 关系是应有的。

# silverlight - Silverlight 3 托管

> ID：784847
> 
> 赞同：3
> 
> 时间：2009-04-24T07:30:51.897
> 
> 标签：silverlight

我对托管 Silverlight 应用程序有点困惑。

一方面，我看到我可以在只定义 mime 类型的[Linux 服务器](https://stackoverflow.com/questions/471139/are-there-any-gotchas-for-hosting-a-silverlight-app-on-a-linux-server)上托管 silverlight 应用程序，另一方面，我看到一些托管站点说它们与 silverlight 兼容。

而且我还想玩弄silverlight 3的“浏览器外”功能。我需要做什么？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-24T12:56:24.970

为了托管在服务器上，Silverlight 所需要的只是 XAP 文件和 mime 类型集。就是这样。如果您希望您的应用程序“脱离浏览器”运行，那么您的服务器也不需要支持任何特定的东西。

如果您希望 Silverlight 应用程序与您的 WCF 服务通信或托管在 ASP 页面中，您需要托管在 IIS 中的那些服务......但 Silverlight 本身只是一个用于其分发的二进制文件，可以托管在任何具有 MIME 类型的站点。

除此之外的营销流行语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T07:53:05.963

[有关 Silverlight 3 中新功能的详细概述，请参见此处](http://timheuer.com/blog/archive/2009/03/18/silverlight-3-whats-new-a-guide.aspx)。特别是，您可能希望查看 Out of Browser 和 Offline 功能。

您不需要任何特定工具即可在浏览器之外使用 Silverlight 3，您所需要做的就是调用`Application.Current.Detach()`方法来分离应用程序。

可以使用 object-tag 在任何 HTML 页面中托管 Silverlight 应用程序。因此，将它托管在 Linux 服务器上应该可以正常工作。[请参阅此处了解概述](http://msdn.microsoft.com/en-us/library/cc189089(VS.95).aspx)(msdn)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T12:51:59.613

“silverlight 兼容”我认为只是意味着他们有 MIME 条目，主要是营销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T19:47:56.543

托管 microsoft 产品的最佳方式是使用运行 Windows 操作系统的托管，然后您可以将其部署在 IIS 下并设置 MIME。您应该能够通过谷歌搜索找到推荐的 Windows 操作系统托管服务提供商

# c# - 在 EDM 负载上请求 AspNetHostingPermission 失败

> ID：784848
> 
> 赞同：1
> 
> 时间：2009-04-24T07:32:30.787
> 
> 标签：c#, .net, security, entity-framework, permissions

我在我正在处理的应用程序中使用实体框架，但是当我尝试从另一个用户的机器启动它时，在尝试加载 EDM 时，我收到一个异常，指出对 AspNetHostingPermission 的请求失败。这些程序集位于网络共享上。

程序集没有签名，据我所知，自 3.5 SP1 起，网络共享上的程序集在完全信任下运行。出了什么问题？

编辑：这似乎是一个普遍的信任问题，考虑到我也收到了关于 ReflectionPermission 的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T10:22:11.893

这绝对是一个信任问题。[从网络共享运行时，](http://www.telerik.com/community/forums/aspnet/upload/system-web-aspnethostingpermission-exception.aspx)[其他人](http://forums.iis.net/t/1154825.aspx)也报告了同样的错误。

# java - 你知道任何包装常见 Linux OS API 的 JNI 包装器工具包或库吗？

> ID：784855
> 
> 赞同：4
> 
> 时间：2009-04-24T07:39:07.697
> 
> 标签：java, linux, java-native-interface

我正在寻找一个库或工具包（所以我不必编写它），它将允许我在 Linux 中执行以下常见操作：

*   获取用户名的 uid。
*   获取用户/组成员信息。
*   获取有关磁盘驱动器上可用空间的信息。
*   任何其他可能有用的 API 调用通常在 Java 中不可用，因为它们破坏了可移植性。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T07:45:42.487

不是任何特定库的包装器，而是[JNA（Java 本机访问）](https://github.com/twall/jna/) “使 Java 程序能够轻松访问本机共享库（Windows 上的 DLL），而无需编写除 Java 代码之外的任何内容”

> 不需要 JNI 或本机代码。此功能可与 Windows 的 Platform/Invoke 和 Python 的 ctypes 相媲美。访问在运行时是动态的，无需代码生成。
> 
> JNA 允许您使用自然 Java 方法调用直接调用本机函数。Java 调用看起来就像在本机代码中一样。大多数调用不需要特殊处理或配置；不需要样板文件或生成的代码。
> 
> JNA 库使用小型本地库存根来动态调用本地代码。开发人员使用 Java 接口来描述目标本地库中的函数和结构。这使得利用本机平台特性变得非常容易，而不会产生为多个平台配置和构建 JNI 代码的高开销。

使用 JNA，您应该能够直接调用 Linux API（与从 C 中调用相同）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T07:42:54.817

至少，[POSIX for Java听起来像是一个不错的起点。](http://www.bmsi.com/java/posix/package.html)请记住，您列出的大多数东西都不是“Linux”，它们只是普通的旧 POSIX。

# login - 没有用户名和密码的站点管理员

> ID：784857
> 
> 赞同：1
> 
> 时间：2009-04-24T07:41:02.997
> 
> 标签：login, web, admin

现在我正在建立一个个人网站/博客，并且几乎按照我想要的方式得到了它，除了我对如何添加帖子有两种想法。

只有我会添加帖子，对我来说，拥有用户名/用户名密码来登录似乎已经过时了；）。

我正在寻找替代方案来玩耍和试验，我的一个想法是：

生成一个非对称密钥，我个人保留私有密钥，站点拥有公钥。当我尝试添加帖子或修改任何内容时，该站点将生成一个随机字符串，用公钥对其进行加密并显示它。我使用一个小应用程序对此进行解密，我可以将其组合在一起并将未加密的字符串传递回允许修改继续的站点。

我只是想知道我应该注意的任何警告，或者如果有人认为这是一个坏主意，也许我可以尝试另一种选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-24T07:52:00.787

为什么不只是有一个用户名和密码，或者让您的网络浏览器记住登录名，或者发回一个不会过期的身份验证 cookie。使用自签名 SSL 证书来保护通信通道。如果您想使用公钥/私钥加密，只需设置一个 SSH 隧道并从您的服务器上的本地主机发布。相信我，重复使用已知的良好加密/安全性比尝试自己动手要好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-24T08:08:04.680

为什么不比您的建议更进一步，将加密的字符串放入 URL 中呢？

例如，将当前日期和时间转换为字符串 - 例如。0904240905 - 使用您的私钥对其进行加密并将其添加到 URL，例如加密字符串`http://yoursite.com/admin/dksjfh4d392s`在哪里。`dksjfh4d392s`然后，您的站点有一个 servlet，它从 URL 中提取加密字符串，验证它是否解密到最近的时间，然后为您提供会话 cookie，同时允许您执行管理任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T08:01:08.953

我认为非对称密钥是一个优雅的解决方案——但用户名/密码几乎肯定会更容易实现。

如果您正在构建自己的网站，那么您只是为了好玩（否则您将使用 WordPress、Drupal、Django 等），那么为什么不做一些不同的事情呢？

如果您发现自己想写博客但又无法证明自己的身份，您可能会发现必须随身携带您的 keymat 应用程序可能会受到一些限制。

但是，话虽如此，@Kurt 对加密的想法是正确的——几乎可以肯定，DIY 比使用已经尝试和测试过的东西更糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T08:06:30.877

我听过的关于安全的最明智的说法之一是“不要试图重新发明它”。

在线安全经历了如此多的迭代，以至于您提出的任何好主意都极有可能存在一些先前已被发现、考虑和修复的缺陷。

如果您想要“随意”的安全性，请使用用户名和密码保护您的站点。如果您想要“强大”的安全性，请在其上粘贴 SSL 证书。如果您想要“银行”安全性，请添加防击键安全性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T11:16:15.850

SSL 客户端证书无论如何都会这样做。为什么不只使用其中之一？

更多人不使用 SSL 客户端证书的主要原因是它们是管理方面的噩梦——您必须让最终用户创建密钥，然后签署他们的证书，然后确保最终用户不会丢失他们的密钥（当他们丢失笔记本电脑时，升级到新的操作系统等），他们通常会这样做，所以当最终用户丢失他们的私钥时，你必须签署 YET MORE 证书。

# .net - 使用最新的 Windows 操作系统与 MIME 电子邮件交互的 .NET 推荐做法是什么？

> ID：784860
> 
> 赞同：2
> 
> 时间：2009-04-24T07:42:03.663
> 
> 标签：.net, parsing, mime

我们在当前项目中使用 CDO 互操作 (cdont.dll) 来解析传入的 mime 邮件，但面临一些西里尔语代码页转换的错误。在寻找任何支持 MS 的替代品时，我们注意到所有可用的消息解析 dll 在 MSDNLib 中都标有“请勿使用”（显然是 CDO、CDOex、CDOnt，但用于“WinXP 及更高版本”的 inetcomm.dll 都标有）。即使在最近的 Windows Mail 客户端中使用了 inetcomm.dll，但 MSDN 建议避免在客户端应用程序中使用它——“可能在未来的版本中被删除”。

好的。但是，对于解析 MIME 格式的消息（所有 RFC 到 RFC2822），推荐的替代方法是什么？我看到了许多开放和商业解析器，但我想知道微软解析 MIME 消息的“官方推荐方式”是什么（我知道 .NET FW 有 mime 解析器，但所有类都标记为内部，所以我们不能正式使用它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T08:05:35.450

再挖掘一点，我们找到了部分解决方案：

[Microsoft.Exchange.Data.Common.dll](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.mime.aspx)

[哑剧文档：](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.mime.mimedocument.aspx)

> 此类实现一个符合 MIME RFC 2822 的解析器并保存生成的文档对象模型 (DOM)。MimeDocument 对象包含 MIME 文档的内存树表示，并启用该文档的导航和编辑。

只剩下一点问题了——根据这篇[文章](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/87f5502f-53c6-456c-a4d3-78353becef94)和 MSFT 成员的评论，它不是正式可再分发的（2007 年 =））。

任何人都知道 - 自 2007 年以来它是否发生了变化？需要研究一些许可证 =(.

# c# - 从 XmlDocument 的 NodeList 中获取属性？

> ID：784882
> 
> 赞同：2
> 
> 时间：2009-04-24T07:53:27.333
> 
> 标签：c#, xml, xmldocument

我有 XmlDocument Example.xml 的一部分，如下所示：

```
<rapaine dotoc="palin" domap="rattmin">
  <derif meet="local" />
  <derif meet="intro" />
.
.
.
</rapaine> 
```

在这里，我正在创建一个节点列表并获取元素 raplin 以获取其属性。

现在我想确定属性“dotoc”和“domap”是否是 rapaine 的属性，其各自的值始终是固定的。然后只有我可以访问 childNodes 的“deriff”及其属性“meet”。这里的值只会改变。
我已经编写了一部分代码，没有编译错误，但在调试时我发现它没有进入 for 循环来检查它的属性和子节点。

```
XmlNodeList listOfSpineRootNodes = opfXmlDoc.GetElementsByTagName("rapine");
for (int x = 0; x < listOfSpineRootNodes.Count; x++)
  {
    XmlAttributeCollection spineAttributes = listOfSpineRootNodes[x].Attributes;
    string id = spineAttributes[0].Value;
    if (spineAttributes != null)
    {
      XmlNode attrToc = spineAttributes.GetNamedItem("dotoc");
      XmlNode attrPageMap = spineAttributes.GetNamedItem("domap");
      if (attrToc.Value == "palin" && attrPageMap.Value == "rattmine")
      {
        if (listOfSpineRootNodes != null)
        {
          foreach (XmlNode spineNodeRoot in listOfSpineRootNodes)
          {
            XmlNodeList listOfSpineItemNodes = spineNodeRoot.ChildNodes;
            if (listOfSpineItemNodes != null)
            {
              foreach (XmlNode spineItemNode in listOfSpineItemNodes)
              {
                if (spineItemNode.NodeType == XmlNodeType.Element
                  && spineItemNode.Name == "derif")
                {
                  XmlAttributeCollection spineItemAttributes = spineItemNode.Attributes;

                  if (spineItemAttributes != null)
                  {
                    XmlNode attrIdRef = spineItemAttributes.GetNamedItem("meet");
                    if (attrIdRef != null)
                    {
                      spineListOfSmilFiles.Add(attrIdRef.Value);
                    }
                  }
                }
              }
            }
          }
        }
      }
    } 
```

你能告诉我哪里出错了..谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T09:31:19.753

您可以使用 XPath 使用以下代码执行此操作。由于 XPath 是一种专门为查询 XML 文档而设计的语言，因此您应该考虑学习它。大多数新手喜欢在[W3schools](http://www.w3schools.com/xpath/)开始学习。

这是代码：

```
XmlNodeList meetList = opfXmlDoc.SelectNodes("/rapaine[(@dotoc = 'palin') and (@domap = 'rattmin')]/derif/@meet")
if (meetList.Count > 0)
{
  foreach (XmlNode meet in meetList)
  {
    spineListOfSmilFiles.Add(meet.Value);
  }
} 
```

供您参考，XPath 表达式：

```
/rapaine[(@dotoc = 'palin') and (@domap = 'rattmin')]/derif/@meet 
```

可以解释为：

a) 查找所有具有值为“palin”的属性和值为“rattmin”的属性的`rapaine`根级元素。`dotoc``domap`

b) 在这些`rapaine`元素中，找到所有`derif`子元素。

c) 在这些`derif`元素中，检索所有`meet`属性。

请注意代码变得多么简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T07:58:44.983

你不能用一个简单的 XPath 表达式来解决这个问题吗？

所有带有条件的嵌套循环都只是自找麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T08:16:20.073

根据您使用的 .NET 版本，LINQ 可能会简化这一点。

# c# - 需要 UltraTree 克隆方法 - 参考问题

> ID：784886
> 
> 赞同：0
> 
> 时间：2009-04-24T07:54:56.020
> 
> 标签：c#, infragistics, ultratree

我有在设计时创建的ultraTree（基础设施树），它有自定义类作为“标签”。我有 List 作为成员变量。我有两个组合框。根据组合选择，我将检查列表的每个项目“标签”。如果列表包含，我就选择它，否则我创建一个新的 UltraTree 并将其添加到列表中，然后分配给在设计时创建的树。

我的问题是，我添加到集合中的内容得到了引用，并且集合中的所有项目都被最后一项覆盖。UltraTree 没有任何克隆方法。

我没有找到使用此控件进行克隆的任何方法。

我的解决方案是什么:(

我的示例代码是

```
// My custom class
SelectedDeviceState treeState = new SelectedDeviceState(
    firstDevice, secondDevice);

UltraTree tree = new UltraTree();

// This will clone the root node
// (it will be executed only once -> Root)
foreach (UltraTreeNode nod in tvwNavigation.Nodes)
{
    UltraTreeNode tnode = nod.Clone() as UltraTreeNode;
    tree.Nodes.Add(tnode);
}

//Adding the custom class as TAG
tree.Tag = treeState;

// Assigned and added
tvwNavigation = tree;
_treeCollection.Add(tree); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T08:01:29.827

他想知道如何获取对象的副本，而不是对象引用的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T08:01:46.190

您可以通过编写一个创建您的类型的新实例然后从原始对象为其分配值的方法来执行手动克隆。

就树结构而言，您需要编写一个递归克隆，例如。

```
private ItemType CloneDeep(ItemType node)
{
    ItemType clone = new ItemType();
    clone.Property1 = node.Property1;
    clone.Property2 = node.Property2;

    foreach ( ItemType child in node.Nodes)
    {
        clone.Nodes.add(CloneDeep(child));
    }
    return clone;
} 
```

也许看看[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T08:16:26.280

您可以使用一些基于反射的方法来深度复制自定义对象，谷歌搜索“反射深度复制”。这篇文章，例如：[http](http://alpatrick.blogspot.com/2005/01/prototype-pattern-using-reflection.html) ://alpatrick.blogspot.com/2005/01/prototype-pattern-using-reflection.html ，克隆了所有标有自定义属性 [DeepCopy] 的属性，但您可以自己轻松更改该行为.

另外，SO上有一个类似的线程：[How to deep copy between objects of different types in C#.NET](https://stackoverflow.com/questions/569154/how-to-deep-copy-between-objects-of-different-types-in-c-net)

**[编辑]**请注意，在您的示例中，简单地创建树节点的完整深层副本可能**并不明智。**一个节点可能包含对树的引用，以及其他可能是唯一的并且不会复制到不同节点的内部内容。

在这种情况下，您应该简单地**创建一个新节点**（使用构造函数），从源节点**分配数据**，然后**将新节点添加**到树中。

总体而言，最好的方法是将您的树绑定到您的数据，这样您就**永远不会**手动更改树，而是在您更改数据时自动更新。检查有关“数据绑定”的 Infragistics 文档，这应该是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-12T10:01:47.190

您可以使用 UltraTree 的 SaveToBinary() 方法进行克隆。

代码应如下所示：

```
void CloneTree() 
{
            //save the current tree into stream
            var savedTree = new MemoryStream();
            ultraTree1.SaveAsBinary(savedTree);
            byte[] buffer = savedTree.ToArray();
            savedTree.Close()

            //create a clone from the stream
            UltraTree newTree = new UltraTree();
            newTree.LoadFromBinary(new MemoryStream(buffer));
} 
```

我希望这有帮助 ：-）

# vb.net - 从 web.config 存储和检索值

> ID：784890
> 
> 赞同：24
> 
> 时间：2009-04-24T07:57:33.813
> 
> 标签：vb.net, web-config, asp.net-3.5

我建立了一个小网站，只有一个管理员，所以在管理面板中，我要求输入一个我没有从数据库中检索到的值的密码，我只是在后面的代码中将它硬编码在函数中，我知道这是错误的，虽然我不知道为什么。

那么在 web.config 中对其进行硬编码是正确的做法吗？如何？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-04-24T08:07:53.713

至于它是错误的......问题是如果您需要更改它，并且它在您的代码隐藏中硬编码，您需要重新编译，重新发布，重新部署您的网站，而对 web.config 的更改可以不这样做就可以完成。

您可以像这样将它放在 web.config 中的 AppSetting 中。

```
<appSettings>
   <add key="AdminPassword" value="ASDF1234" />
</appSettings> 
```

并使用此代码检索它

```
System.Configuration.ConfigurationManager.AppSettings["AdminPassword"].ToString() 
```

虽然我会看看这个。

[http://aspnet.4guysfromrolla.com/articles/021506-1.aspx](http://aspnet.4guysfromrolla.com/articles/021506-1.aspx)

它涵盖了 web.config 的加密部分

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T08:46:25.960

Eoin 对小型项目的建议没有错，但是如果您的项目有一天可能需要超过 1 个管理员和不同类型的用户角色。我会接受打击并设置 ASP 会员资格。

[http://msdn.microsoft.com/en-us/library/ms998347.aspx](http://msdn.microsoft.com/en-us/library/ms998347.aspx)

您可以将其集成到 Windows 中或使用数据库，并且设置起来并不难。特别是如果您使用 IIS 中的内置配置工具。

# java - Java 和 SEO URL

> ID：784891
> 
> 赞同：5
> 
> 时间：2009-04-24T07:57:38.807
> 
> 标签：java, seo, spring-mvc

我正在使用 spring MVC 构建一个 webapp，并且很好奇是否有任何干净的方法来制作 SEO url。

例如，而不是[http://mysite.com/articles/articleId](http://mysite.com/articles/articleId)等，有：

[http://mysite.com/articles/my-article-subject](http://mysite.com/articles/my-article-subject)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-03-17T22:14:01.773

如果您使用新的 Spring-MVC 注释，则可以使用 @RequestMapping 和 @PathVariable 注释：

```
@RequestMapping("/articles/{subject}")
public ModelAndView findArticleBySubject(@PathVariable("subject") String subject)
{
   // strip out the '-' character from the subject
   // then the usual logic returning a ModelAndView or similar
} 
```

我认为仍然有必要去掉 - 字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-24T08:10:31.803

您可能会对此感兴趣：

[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)

如果您熟悉 Apache 服务器上的 mod_rewrite，这是一个类似的概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T08:20:34.773

[http://mysite.com/articles/my-article-subject](http://mysite.com/articles/my-article-subject)是一个比[http://mysite.com/articles/articleId](http://mysite.com/articles/articleId)更强大的 URL - 特别是如果标题和标题标签也匹配“my-article-subject”并且页面内容中有“我的”、“文章”和“主题”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T08:29:48.620

例如，如果您想要网址

http:///blog/11/12/2009/my-hello-world-post/

然后配置servlet映射

<servlet>
<servlet-class>com.blog.Blog</servlet-class>
<servlet-name>blog</servlet-name>
<servlet-class>com.blog.Blog</servlet-class>
</servlet >
<servlet-mapping>
<servlet-name>blog</servlet-name>
<url-pattern>/blog/*</url-pattern>
</servlet-mapping>

并在 servlet 代码中

字符串 url = request.getPathInfo();
StringTokenizer 令牌 = new StringTokenizer(url,"/");
while(tokens.hasMoreTokens()){
out.println("
"+tokens.nextToken());
}

使用这些参数从数据库中获取数据并显示给用户

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-27T18:49:07.623

标准的 Java Web 框架还没有为这些 URL 做好准备。

AFAIK，SpringMVC 不支持这种 URL。

我确信有两个框架支持这种 URL：Mentawai 和 VRaptor。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T08:29:11.493

如果您只是在寻找 SEO 优化，您可以这样设计您的 URL：

[http://mysite.com/articles/my-article-subject/articleId](http://mysite.com/articles/my-article-subject/articleId)

或者

[http://mysite.com/articles/articleId/my-article-subject](http://mysite.com/articles/articleId/my-article-subject)

并在评估网址时忽略 my-article-subject 部分。

亚马逊对他们的 URL 做了类似的事情：

[http://www.amazon.com/Dark-Crystal-Jean-Pierre-Amiel/dp/B00000JPH6/ref=sr_1_1?ie=UTF8&s=dvd&qid=1240561659&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/B00000JPH6)

这里的文本“Dark-Crystal-Jean-Pierre-Amiel”是完全不相关的，因为该文章由 id B00000JPH6 标识。

**编辑：**事实上，我刚刚注意到，就在这里，这种精确的技术用于生成对 SEO 友好的 URL...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T13:47:43.557

我在我们的应用程序中使用了漂亮的面孔[http://ocpsoft.org/prettyfaces/](http://ocpsoft.org/prettyfaces/)，因为它是基于 JSF 的。这是一个非常巧妙的解决方案。不确定它是否适用于 Spring MVC 看看我们的 URL

[http://www.skill-guru.com/cat/certification-mock-test](http://www.skill-guru.com/cat/certification-mock-test)

[http://www.skill-guru.com/test/81/core-spring-3.0-certification-mock](http://www.skill-guru.com/test/81/core-spring-3.0-certification-mock)

[http://www.skill-guru.com/tutor/Pro+ESL](http://www.skill-guru.com/tutor/Pro+ESL)

早些时候，我们有非 SEO 友好的 URL，并附加了 jsession Id。现在，在漂亮的过滤器的帮助下，一切都变得干净整洁。这非常符合 wordpress url。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2010-12-31T18:34:34.677

生成包含 id 和 description 的 url 像这个 url `http://stackoverflow.com/questions/784891/java-and-seo-urls`。在 servlet 中解析 url，然后使用 id 从数据库中获取数据。同样的技术也适用于这个 stackoverflow 页面。看看网址。然而，`http://stackoverflow.com/questions/784891/java-and-seo-urls` 它只考虑 questionId 并忽略描述。尝试`http://stackoverflow.com/questions/784891`或`http://stackoverflow.com/questions/784891/abcdxyz`。你会得到相同的页面。这是生成 seo url 的非常好的技术

# sql - sql数据源向导问题

> ID：784899
> 
> 赞同：0
> 
> 时间：2009-04-24T08:02:01.637
> 
> 标签：sql, datasource, wizard

大家好，我的 sqldatasource 有错误。

当我单击 sqldatasource 的 updatequery 属性时，Visual Studio 会出现错误：

* * *

## 微软视觉工作室

## 无法加载文件或程序集“C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\%DXROOT%\ProductionTools\BuildComponents.dll”或其依赖项之一。该系统找不到指定的文件。

这是什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T08:34:21.730

看起来您应该对 Visual Studio 进行“修复”安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T09:07:34.800

修复安装听起来是个好主意。

你也试过搜索文件**BuildComponents.dll**。如果可以找到，请尝试将其复制到 C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\%DXROOT%\ProductionTools 文件夹，看看是否有帮助。

# sql - 为什么没有数据库完全支持 ANSI 或 ISO SQL 标准？

> ID：784900
> 
> 赞同：47
> 
> 时间：2009-04-24T08:03:59.010
> 
> 标签：sql, database, database-design, standards, ansi-sql

如果我正在设计一家炼油厂，我不会期望来自不同供应商的材料不会以微妙而重要的方式不符合已发布的标准。来自一家供应商的管道、阀门和其他组件将配备符合 ANSI 标准的法兰和壁厚，任何其他供应商的相同零件也是如此。因此，互操作性和系统安全性得到了保证。

那么，为什么通用数据库对它们所遵循的标准的哪些部分如此挑剔，为什么没有 100% 符合标准的系统脱颖而出呢？标准是否“被破坏”、缺乏范围或太难设计？

得出结论；ANSI（或 ISO）定义 SQL 标准的意义何在？

编辑：[常见数据库之间的实现差异列表](http://troels.arvin.dk/db/rdbms/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-24T18:45:57.873

在软件行业，有些标准是真正的标准，即不符合这些标准的产品就无法工作。文件规范属于该类别。但是您也有更像指南的“标准”：它们可能定义为具有逐点定义的标准，但通常仅部分实施或具有显着差异。Web 开发充满了这样的“标准”，例如 HTML、CSS 和“ECMAScript”，不同的供应商（即 Web 浏览器）以不同的方式实现这些标准。

这种变化会让人头疼，但标准化仍然会带来好处。想象一下，如果根本没有 HTML 标准并且每个浏览器都使用自己的标记语言。同样，想象一下如果没有 SQL 标准并且每个数据库供应商都使用自己完全专有的查询语言。将会有更多的供应商锁定，开发人员将很难使用多个产品。

所以，不，ANSI SQL 与 ANSI 标准在其他行业中的用途不同。但它确实有一个有用的目的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-24T08:07:57.317

可能是因为标准一致性对数据库系统购买者的优先级较低。他们更感兴趣的是：

*   与他们已经拥有的东西的兼容性
*   表现
*   价格
*   操作系统支持

仅举几个因素。

编程语言也是如此——很少有（如果有的话）编译器支持当前 ANSI C 和 C++ 标准的每一个特性。

至于为什么要使用标准，大多数供应商最终都会提供标准支持。例如，大多数供应商或多或少都支持 SQL89。这允许供应商在他们的规格表上勾选一个（相对不重要的）复选框，也允许像我这样对编写可移植代码感兴趣的人这样做，尽管不得不放弃很多花里胡哨的东西。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2010-08-02T11:10:45.347

请参阅文章“ [SQL 是否成为真正的标准？”](http://www.wiscorp.com/is_sql_a_real_standard.pdf) 有关 SQL 标准当前（2005 年）问题的讨论。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-27T07:59:05.940

事实上，ANSI SQL 标准并不经常被遵循。只需阅读 SO：大多数 SQL 线程从不参考标准，例如，关于网络协议的讨论通常包括相关 RFC 的实际引用、章节和经文。

我一直怀疑其中一个原因是 SQL 标准不能自由分发。简单地得到它并非易事。各种[非官方副本](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)四处流传。）

另一个原因是它是一个非常复杂的文本并且组织不好。它使用了一个奇怪的词汇（例如“authID”而不是“user”）。您需要书籍来理解标准（“SQL 标准指南”，CJ Date，Hugh Darwen - Addison-Wesley）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-24T08:08:30.153

我不具体了解 ANSI SQL 的历史。但似乎很多时候在软件开发中，标准是在主要参与者已经实现了他们自己的专有版本之后编写的。一旦一家公司投资于自己的做事方式，就很难证明改变或删除人们为了遵守标准而依赖的功能是合理的。Web 标准是这种现象的主要例子。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-08-02T08:13:18.500

[Mimer SQL](http://www.mimer.com/)有很好的标准支持，但它却鲜为人知。它在几个大型地点生产，主要在瑞典。但我认为很多网站正在迁移到其他网站。

详细的支持声明：

*   [SQL-99](http://developer.mimer.com/validator/parser99/core-sql-99.tml)
*   [SQL-2003](http://developer.mimer.com/validator/parser200x/core-sql-200x.tml)
*   PSM
*   根据 SQL:1999 的数据库触发器和函数
*   根据 SQL:1999 支持二进制和字符大对象 (BLOB/CLOB/NCLOB)
*   符合 Open Group 的 XA 标准的多数据库事务（两阶段提交）
*   支持 Java ME CDC Foundation Profile 和 Java ME CLDC/MIDP

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-24T11:32:18.197

几年前，就管道和连接器相互兼容而言，最糟糕的行业之一是消防设备。从字面上看，有几十个相互不兼容的软管与泵连接。当互助在消防员中变得司空见惯时，他们必须携带数十个适配器才能与他们的设备互操作。

9 月 11 日，警察和消防员都拥有专用无线网络，用于人员之间的相互通信。但猜猜怎么了？这两个系统并不相互兼容。因此，从一种公共安全服务人员到另一种公共安全服务人员的信息交流存在不必要的延误。

如果你回溯到足够远的地方，你会发现纽约市的某个时候，大约一半的电网是直流电，受到爱迪生的青睐，另一半是交流电，受到西屋公司的青睐。

标准有时会自行产生，被称为事实上的标准。更常见的是，标准必须由专门授权的机构制定。对于 SQL 标准，一些最大的供应商早于该标准。为了符合标准，他们将不得不投入不利于现有客户群的工程费用。更糟糕的是，它们最终可能会与自己之前的产品不兼容。

完全符合 SQL 标准可能还会发生，但不太可能。即使是这样，在新 SQL 标准的发展和遵守它之间也有一段延迟时间。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-24T08:30:46.200

恕我直言，数据库供应商推动 ANSI SQL 标准在他们的领域内包含新功能和结构，而不是 ANSI 告诉数据库供应商“一种真正的方式”。

数据库市场由功能、可扩展性和成本驱动。通过等待 ANSI 批准语法来放弃和延迟技术优势（即分区、透视、UPSERT、复制）并不是商业优先事项。到完成的时候，已经有大量专有语法的安装。

话虽如此，大多数数据库供应商在过去几年中都大大改进了他们的核心“ANSI SQL”支持。（带有 SELECT FROM INFORMATION_SCHEMA 的 SQL Server 和 Oracle 的 ANSI 联接实际上与 CBO 下的本机联接一样有效）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-03-25T01:08:18.680

根据 HSQLDB 手册，[它是最符合标准的 RDBMS](http://hsqldb.org/doc/guide/sqlgeneral-chapt.html#sgc_standards)。

*   几乎支持 SQL-92 到高级级别的所有语法特性
*   SQL:2008 核心和该标准的许多可选特性

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-26T20:18:55.933

真正的原因：大多数“开发人员”都是以客户为中心的编码人员，因此既不理解也不关心 Codd 博士的 12 条规则。这也是为什么在 webKiddie 开发中经常可以看到在任何意义上都不是关系数据库的 MySql。这样的开发人员只需要基本的 SELECT、UPDATE、DELETE 解析。他们避开任何形式的约束，更喜欢“在应用程序中执行”。Reactionary 1960 的应用程序就是你所得到的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-24T11:56:52.290

他们中的大多数都非常合规。但这里有个坏消息，IMO - 标准滋生平庸。供应商希望您被锁定在他们的扩展中，并且通常有充分的理由对非标准事物进行处理。实际上，您将 Oracle 转储到 SQL Server 的可能性有多大，反之亦然？除非您构建您的客户可以针对其他数据库使用的产品，否则您作为企业不太可能更换数据库。太痛苦了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-08-28T17:20:38.393

公司通常倾向于使用一个供应商来避免支持一堆不同且可能不兼容的系统。培训您的开发人员/系统工程师使用一个数据库供应商的工具也比使用 3 套不同的工具便宜得多。稍后，这家公司可能会变得足够大，可以收购一些竞争对手。这将意味着您必须管理、集成等另一套完全不同的工具。

这是很多工作。

想象一下，你有一个可移植层，而不是那个，所以你真的不在乎下面是什么。那会好很多。

# silverlight - Silverlight 客户端如何访问 Azure 存储的数据？

> ID：784914
> 
> 赞同：1
> 
> 时间：2009-04-24T08:08:43.977
> 
> 标签：silverlight, entity-framework, azure

我正在考虑开发一个 Silverlight 应用程序，并希望使用 Windows Azure 进行数据存储（以及可扩展性等）。但我不确定如何使用 Silverlight 从 Azure 获取数据。我应该研究哪些技术？对于这种情况，推荐的方法是什么？

我应该考虑使用 Silverlight 的实体框架吗？但是，EF 如何从 Azure 获取数据，更重要的是如何将更改保存回来？还是我需要去一些更定制的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T08:12:43.623

查看[.NET RIA 服务](http://www.microsoft.com/downloads/details.aspx?FamilyID=76bb3a07-3846-4564-b0c3-27972bcaabce&displaylang=en)：

[使用 .Net RIA 服务构建简单的应用程序 (Silverlight 3)](http://blogs.microsoft.co.il/blogs/bursteg/archive/2009/04/04/build-a-simple-application-with-net-ria-services-silverlight-3.aspx)

[使用 .NET RIA 服务创建应用程序第 1 部分 - 简介](http://www.silverlightshow.net/items/Creating-applications-with-.NET-RIA-Service-Part-1-Introduction.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-02T00:55:58.813

基本上，如果您有非常大 (> 64K) 的数据元素，您将使用 Azure 表存储来存储数据和 Blob 存储。表存储和 Blob 存储具有 REST 接口，您应该查看 Azure SDK 中的 StorageClient 示例，作为对数据进行 CRUD 的一种方式。如果您不打算公开公共 API，则可以专门使用这些接口（表和 Blob）。

但是，假设您想成为下一个 Twitter，并且您想向公众公开一个 REST 接口......即使 Azure 表存储有它自己的 REST 接口，您也可以在一个 Web 角色中创建一个小型 WCF 服务，它会公开一些以更引人注目的方式使用特定的 WCF 方法。您还可以以 JSON 格式发布数据，这对非 Windows 数据使用者可能更有用。

这是一个我发现非常有用的页面：

[Azure 应用程序第 3 部分：在 Silverlight 中公开 (REST) Web 服务和使用](http://blogs.msdn.com/bags/archive/2009/04/17/azure-application-part-3-expose-rest-web-service-and-consume-in-silverlight.aspx)。

如果您想查看我的示例，[http://www.netalerts.mobi/traffic](http://www.netalerts.mobi/traffic)会公开存储在 Azure 表存储中的数据。 [http://www.netalerts.mobi/traffic/api.aspx](http://www.netalerts.mobi/traffic/api.aspx)描述了公开的 REST api。在我的实现中，我通过 REST 调用表存储，操作数据，然后在公共 api 中再次提供它。

# .net - ASMX Web 服务第一次请求慢

> ID：784918
> 
> 赞同：24
> 
> 时间：2009-04-24T08:11:11.380
> 
> 标签：.net, web-services, asmx

我在一个 IIS 应用程序中运行了一堆 .NET Web 服务。这些 Web 服务由另一个 IIS 应用程序（前端）使用。第一次通话很慢，大约 5 到 10 秒。在那之后它只是几毫秒。第一次调用被认为是性能问题。

我们已经尝试过调用所有这些 web 服务的应用程序，但这显然不能解决任何问题。所以问题不是默认的应用程序回收。我创建了一个应用程序，它只是多次初始化服务并测量创建一个实例所需的时间。在运行此应用程序之前，我确保我的 web 服务应用程序已启动/回收，然后我运行该应用程序。第一次初始化需要 2 到 4 秒，其他的只是毫秒。

另一个想法是我们在前端应用程序中创建一个页面来启动所有 Web 服务，并且我们在任何用户进入之前调用这个页面。我不认为这是一个优雅的解决方案，我还能尝试什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-04-24T21:18:11.130

客户端第一次调用 Web 服务时遇到的延迟是由于默认情况下需要编译 Web 服务的 XmlSerializers dll 造成的。这导致初始呼叫需要 2-4 秒。当然，当 web 服务应用程序已经在运行时，就会出现这种情况，如果不是，您将进行回收。在这种情况下，其他答案可能会有所帮助。

为了加快初始调用，您可以在编译时创建 XmlSerializers dll。您可以通过将项目构建“生成序列化程序集”设置为打开来完成此操作。这会生成一个包含 Web 服务信息的 MyApplication.XmlSerializers.dll。现在初始调用下降到 300 毫秒，大概是 dll 的加载。之后的所有呼叫都需要 0 毫秒。

在 Visual Studio 中，右键单击您的项目并选择“属性”。转到“构建”选项卡。在“输出”部分，您可以选择“生成序列化程序集”。如果将值更改为“On”，则将在编译期间生成序列化程序集。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-24T08:18:08.117

第一次调用 web 服务，或者长时间延迟后的第一次，需要启动 web 服务。这是您看到延迟的地方。在那之后，它已经开始并且会非常快速地响应呼叫。这是标准的 Web 服务行为。

您可以将 IIS 配置为 keepalive = true - 这可能会提高性能。

**根据要求提供更多信息。**

可能是在运行时创建序列化程序集。您可以使用项目属性窗口的 Build 窗格底部的下拉菜单更改序列化程序集的设置。

可能是您编写了 Web 服务以在应用程序启动时执行大量操作，这将在第一次调用服务上的方法时发生。

可能是操作非常慢，但是您正在缓存响应，这使得后续调用更快。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-08-13T16:58:20.890

我最近发现在我们的 ASMX 文件中我们只提到了类名。我们在每个 ASMX 文件的不同程序集中获得了服务实现。这会导致 .NET 框架扫描整个 bin 文件夹以查找包含实现的程序集。随着您的 Web 服务应用程序的增长，这将消耗更多时间。这不仅可以通过在您的 ASMX 定义中包含类名而且还包括程序集名称来解决。

我们的 ASMX 看起来像这样：

`<%@ WebService Language=”C#” CodeBehind=”MyService.cs” Class=”MyWebservice” %>`

如果您将其更改为包含包含实现的程序集，它将如下所示。这为我们节省了大约 10% 的 Web 服务应用程序初始负载。

`<%@ WebService Language=”C#” CodeBehind=”MyService.cs” Class=”MyWebservice, MyWebservice.Implementation.Assembly” %>`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-24T08:19:21.640

这是典型的，因为 ASP.NET 应用程序会在第一次请求时编译 bin\ 目录并将其加载到内存中。

首先要做的事情：

删除 bin 目录中所有不必要的 dll。（我见过人们发布 nunit.dll）

预编译您的 ASP.NET 应用程序，以便 IIS 不需要。请参阅“ [VS 2008 Web 部署项目支持发布](http://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx)”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-24T08:20:46.037

不确定这是否会解决“第一次”时 WS 的缓慢启动问题，因为我假设有大量编译和 .net DLL 正在加载，但您几乎可以通过确保应用程序池来消除任何未来的冷启动WS 所在的配置正确。

默认情况下，IIS6 在空闲时“重生”，经过几分钟或“回收”事件，每次都有效地重新启动 WS。如果您对服务稳定感到满意，则不需要这些。

强烈建议确保 WS 拥有自己的专用应用程序池（不共享不合适的池）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-28T14:48:02.313

经过几个小时的疯狂测试，我已经能够将同一 IP 类中的两个主机（低于 300 毫秒）的 Web 服务首次运行执行时间减少到最低限度。

起初，我在第一次 web 服务调用时经历了 2-3 秒的初始延迟，比来自同一进程的任何后续调用都非常快。

在我的案例中理解延迟的关键是客户端如何处理 WEB PROXY ！

这是我在 app.config 文件中的新绑定：

```
 <basicHttpBinding>
    <binding name="CreateContextSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
        receiveTimeout="01:00:00" sendTimeout="01:00:00" allowCookies="false"
        bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="16777216" maxBufferPoolSize="524288" maxReceivedMessageSize="16777216"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="false">
      <readerQuotas maxDepth="32" maxStringContentLength="1048576" maxArrayLength="16384"
          maxBytesPerRead="65536" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding> 
```

我想第一次网络调用执行要慢得多，因为传输通道需要在初始化时发现代理配置，以便透明地连接到互联网。这通常不需要进入 Intranet 环境，因此我更改了这些绑定设置以避免使用默认代理（从资源管理器设置中自动发现）：

**bypassProxyOnLocal="假"**

**使用DefaultWebProxy="假"**

首次呼叫连接时间现在大大减少。希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-06T15:31:03.100

抱歉添加了死灵，但这对我来说也是一场持续的斗争，我想在图片中添加一些信息。VisualStudio 本身为时间添加了一个相当大的组件。这是基本测试，涉及一个基本的表单应用程序和一个在公司服务器内部托管的已经运行的 Web 服务（所有测试的 Generate Serialization Assembly 设置为 true）：

```
Running in VS, Debug:
    First Call: 400 ms to set up client object, 450 to call function
    Second Call: 1 ms to set up client object, 14 to call function
Running as .exe, Release:
    First Call: 20 ms to set up client object, 70 to call function
    Second call: 1 ms to set up client object, 4 to call function
Running the Debug's .exe file outside of vs:
    First Call: 20 ms to set up client object, 80 to call function
    Second call: 1 ms to set up client object, 4 to call function
Running as Release within VS:
    Similar results to Debug in VS -- very slow 
```

短篇故事？Visual Studio 正在为图片添加大量时间。而不是约 90 毫秒，它需要将近一秒钟。因此，如果您正在进行性能调整，请确保在 VisualStudio 环境之外进行测试。

# c# - 如何避免VS2008中的点

> ID：784920
> 
> 赞同：0
> 
> 时间：2009-04-24T08:11:22.533
> 
> 标签：c#, visual-studio-2008

在 VS2008 中编写 C# 代码时不小心按了一些键，空格字符被替换为 . 并用一些方框替换输入键，现在我该如何重置编辑器 ![替代文字](https://lh4.ggpht.com/_M5W2QFQgto4/SfFzUDSaH5I/AAAAAAAADUg/cieNm6UXXHQ/dots.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T08:14:09.860

您可能正在查看空格，此处重复主题：

[我该如何摆脱这些点！](https://stackoverflow.com/questions/784039/how-do-i-get-rid-of-the-dots)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T08:14:38.390

按 Ctrl+R、Ctrl+W 切换此设置（不释放 Ctrl 键）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T08:14:57.940

也许您打开了“查看空白”。要更改此设置，请转到编辑 -> 高级 -> 查看空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T08:15:20.713

检查菜单编辑->高级->查看空白

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-04-24T08:16:37.810

工具->导入和导出设置->重置所有设置

# php - 令人困惑的mysql问题

> ID：784925
> 
> 赞同：0
> 
> 时间：2009-04-24T08:12:40.720
> 
> 标签：php, mysql, mysql-error-1451

我有两个表的问题：

```
 CREATE TABLE IF NOT EXISTS `addresses` ( 
  `adr_id` int(11) NOT NULL auto_increment, 
  `per_id` int(11) NOT NULL, 
  `adr_street` varchar(50) NOT NULL, 
  `adr_houseno` int(11) default NULL, 
  `adr_housenoadd` varchar(10) default NULL, 
  `adr_postalcode` varchar(25) NOT NULL, 
  `adr_city` varchar(20) NOT NULL, 
  `adr_type` varchar(45) default NULL, 
  `cnt_id` int(11) NOT NULL, 
  `adr_date` date default NULL, 
  `sys-mut-dt` timestamp NULL default NULL, 
  `sys-mut-user` varchar(20) default NULL, 
  `sys-mut-id` int(11) NOT NULL default '0', 
  PRIMARY KEY  (`adr_id`), 
  KEY `per_id` (`per_id`), 
  KEY `cnt_id` (`cnt_id`) 
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ; 
-- 
-- RELATIES VOOR TABEL `addresses`: 
--   `cnt_id` 
--       `countries` -> `cnt_id` 
--   `per_id` 
--       `persons` -> `per_id` 
-- 

CREATE TABLE `events` ( 
  `evt_id` int(11) NOT NULL auto_increment, 
  `evt_name` varchar(50) NOT NULL, 
  `evt_description` varchar(100) default NULL, 
  `evt_startdate` date NOT NULL, 
  `evt_enddate` date default NULL, 
  `evt_starttime` time default NULL, 
  `evt_endtime` time default NULL, 
  `evt_amtpersons` int(11) default NULL, 
  `sts_id` int(11) NOT NULL, 
  `adr_id` int(11) default NULL, 
  `evt_amtPersonsSubs` tinyint(4) NOT NULL default '0', 
  `evt_photo` varchar(50) default NULL, 
  `sys-mut-dt` timestamp NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP, 
  `sys-mut-user` varchar(20) default NULL, 
  `sys-mut-id` int(11) NOT NULL default '0', 
  PRIMARY KEY  (`evt_id`), 
  KEY `sts_id` (`sts_id`), 
  KEY `adr_id` (`adr_id`) 
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

问题是，当我尝试从地址表中删除记录时，出现以下错误

```
DELETE
FROM    addresses
WHERE   per_id = 45

1451 - Cannot delete or update a parent row: a foreign key constraint fails (`site/events`, CONSTRAINT `adr_id` FOREIGN KEY (`adr_id`) REFERENCES `addresses` (`adr_id`) ON DELETE NO ACTION ON UPDATE NO ACTION) ; 
```

奇怪的是事件表中没有具有相同 per_id 或 adr_id 的记录。

那么这里发生了什么？

我该如何解决这个问题？;-)

```
/* I think it means "How can I solve this?" */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T08:25:31.110

听起来可能很愚蠢，但您确定没有子行吗？

你能运行这个吗：

```
SELECT  e.*
FROM    addresses a
JOIN    events e
ON      e.adr_id = a.adr_id
WHERE   a.per_id = 45 
```

# javascript - 是什么 ！！JavaScript 中的（不是不是）运算符？

> ID：784929
> 
> 赞同：3783
> 
> 时间：2009-04-24T08:13:58.470
> 
> 标签：javascript, operators

我看到一些代码似乎使用了我不认识的运算符，以两个感叹号的形式出现，如下所示：`!!`. 有人可以告诉我这个操作员是做什么的吗？

我看到这个的背景是，

```
this.vertical = vertical !== undefined ? !!vertical : this.vertical; 
```

* * *

## 回答 #1

> 赞同：3370
> 
> 时间：2009-04-24T08:18:07.963

转换`Object`为`boolean`. 如果它是假的（例如，，，`0`等`null`）`undefined`，它将是`false`，否则，`true`。

```
!oObject  // inverted boolean
!!oObject // non inverted boolean so true boolean representation 
```

所以`!!`不是运算符，它只是`!`运算符两次。

真实世界示例“测试 IE 版本”：

```
const isIE8 = !! navigator.userAgent.match(/MSIE 8.0/);  
console.log(isIE8); // returns true or false 
```

如果你⇒</p>

```
console.log(navigator.userAgent.match(/MSIE 8.0/));  
// returns either an Array or null 
```

但是如果你⇒</p>

```
console.log(!!navigator.userAgent.match(/MSIE 8.0/));  
// returns either true or false 
```

* * *

## 回答 #2

> 赞同：945
> 
> 时间：2009-09-10T17:28:36.633

这是进行类型转换的一种非常晦涩的方法。

`!`表示*不*。如此，如此。`!true`_ 是，并且是。`false``!false``true``!0``true``!1``false`

因此，您将一个值转换为布尔值，然后将其反转，然后再次反转它。

```
// Maximum Obscurity:
val.enabled = !!userId;

// Partial Obscurity:
val.enabled = (userId != 0) ? true : false;

// And finally, much easier to understand:
val.enabled = (userId != 0); 
```

* * *

## 回答 #3

> 赞同：544
> 
> 时间：2012-05-15T09:06:18.150

`!!expr`（两个`!`运算符后跟一个表达式）根据表达式的*真实性*`true`返回一个布尔值（或） 。在非布尔类型上使用时更有意义。考虑这些示例，尤其是第三个示例及以后的示例：`false`

 *```
 !!false === false
           !!true === true

              !!0 === false
!!parseInt("foo") === false // NaN is falsy
              !!1 === true
             !!-1 === true  // -1 is truthy
          !!(1/0) === true  // Infinity is truthy

             !!"" === false // empty string is falsy
          !!"foo" === true  // non-empty string is truthy
        !!"false" === true  // ...even if it contains a falsy value

     !!window.foo === false // undefined value is falsy
      !!undefined === false // undefined primitive is falsy
           !!null === false // null is falsy

             !!{} === true  // an (empty) object is truthy
             !![] === true  // an (empty) array is truthy; PHP programmers beware! 
```

* * *

## 回答 #4

> 赞同：186
> 
> 时间：2013-02-22T23:45:27.920

**泡茶：**

`!!`不是运算符。它是`!`-- 的双重用途，它是逻辑“非”运算符。

* * *

**理论上：**

**`!`**确定值不是什么的“真相”：

*   事实是`false`不是`true`（这就是为什么`!false`结果**`true`**）

*   事实是`true`不是`false`（这就是为什么`!true`结果**`false`**）

* * *

**`!!`**确定一个值*不是*什么的“真相” ：

*   事实`true`并非*如此* `true`（这就是为什么`!!true`结果**`true`**）

*   事实`false`并非*如此* `false`（这就是为什么`!!false`结果**`false`**）

* * *

我们希望在比较中确定的是*关于*引用值的“真相”，而不是引用本身的*值。*有一个用例，我们可能想知道一个值的真相，即使我们期望该值是*`false`*（或错误的），或者如果我们期望该值不是 typeof `boolean`。

* * *

**在实践中：**

考虑一个简洁的函数，它通过**[动态类型](http://en.wikipedia.org/wiki/Type_system#Dynamic_typing)**（又名“鸭子类型”）检测特性功能（在这种情况下是平台兼容性）。我们想编写一个函数，`true`如果用户的浏览器支持 HTML5`<audio>`元素，则返回该函数，但我们不希望函数在`<audio>`未定义时抛出错误；而且我们不想用它`try ... catch`来处理任何可能的错误（因为它们很严重）；*而且*我们不希望在函数内部使用一个不能始终揭示特性真相的检查（例如，即使不支持HTML5，`document.createElement('audio')`仍会创建一个名为的元素）。`<audio>``<audio>`

* * *

以下是三种方法：

```
// this won't tell us anything about HTML5 `<audio>` as a feature
var foo = function(tag, atr) { return document.createElement(tag)[atr]; }

// this won't return true if the feature is detected (although it works just fine)
var bar = function(tag, atr) { return !document.createElement(tag)[atr]; }

// this is the concise, feature-detecting solution we want
var baz = function(tag, atr) { return !!document.createElement(tag)[atr]; }

foo('audio', 'preload'); // returns "auto"
bar('audio', 'preload'); // returns false
baz('audio', 'preload'); // returns true 
```

每个函数都接受 a`<tag>`和 an的参数`attribute`来查找，但它们每个都根据比较确定的内容返回不同的值。

**但是等等，还有更多！**

你们中的一些人可能已经注意到，在这个特定的示例中，人们可以简单地使用**[性能](http://jsperf.com/hasownproperty-vs-comparison)**稍高的方法来检查所讨论的对象是否*具有*属性。有两种方法可以做到这一点：

```
// the native `hasOwnProperty` method
var qux = function(tag, atr) { return document.createElement(tag).hasOwnProperty(atr); }

// the `in` operator
var quux = function(tag, atr) { return atr in document.createElement(tag); }

qux('audio', 'preload');  // returns true
quux('audio', 'preload'); // returns true 
```

**我们离题...**

不管这些情况多么罕见，可能存在一些场景，其中最简洁、最高效、因此最优选的`true`从非布尔值、可能未定义的值获取的方法确实是使用`!!`. 希望这可笑地清除它。

* * *

## 回答 #5

> 赞同：111
> 
> 时间：2009-09-10T17:26:53.457

`!!`将其右侧的值转换为其等效的布尔值。（想想穷人的“类型转换”方式）。它的*意图*通常是向读者传达代码并不关心变量中的值是什么，而是它的*“*[真实”值](http://11heavens.com/falsy-and-truthy-in-javascript)是什么。

* * *

## 回答 #6

> 赞同：87
> 
> 时间：2009-09-10T21:15:16.510

`!!foo`应用一元非运算符两次，用于转换为布尔类型，类似于使用一元加号`+foo`转换为数字并连接空字符串`''+foo`以转换为字符串。

除了这些技巧，您还可以使用与原始类型对应的构造函数（*不*使用`new`）来显式转换值，即

```
Boolean(foo) === !!foo
Number(foo)  === +foo
String(foo)  === ''+foo 
```

* * *

## 回答 #7

> 赞同：81
> 
> 时间：2015-04-29T18:14:43.853

这么多答案做了一半的工作。是的，`!!X`可以理解为“X [表示为布尔值] 的真实性”。但是`!!`，实际上，对于确定单个变量是（或者即使许多变量是）真还是假来说，这并不是那么重要。`!!myVar === true`和刚才一样`myVar`。与`!!X`“真正的”布尔值相比并不是很有用。

您获得的唯一好处是能够以可重复的、标准化的（和 JSLint 友好的）方式`!!`检查多个变量的真实性*。*

### 简单地铸造:(

那是...

*   `0 === false`是`false`。
*   `!!0 === false`是`true`。

上面的用处不大。`if (!0)`给你同样的结果`if (!!0 === false)`。我想不出将变量转换为布尔值然后与“真实”布尔值进行比较的好案例。

[请参阅JSLint 的指示中的](http://old.jslint.com/lint.html)“== 和！=” （注意：Crockford 正在稍微移动他的网站；该链接可能会在某个时候失效）以了解原因：

> == 和 != 运算符在比较之前进行强制类型转换。这很糟糕，因为它会导致 ' \t\r\n' == 0 为真。这可以掩盖类型错误。JSLint 无法可靠地确定 == 是否被正确使用，因此最好不要使用 == 和 != 并始终使用更可靠的 === 和 !== 运算符。
> 
> 如果你只关心一个值是真还是假，那么使用简写形式。代替
> `(foo != 0)`
> 
> 说啊
> `(foo)`
> 
> 而不是
> `(foo == 0)`
> 
> 说
> `(!foo)`

请注意，在将布尔值与数字进行比较时，存在一些[不直观的情况](https://stackoverflow.com/a/3619813/1028230)，即布尔值将被强制转换为数字（`true`被强制转换为`1`和`false`to `0`）。在这种情况下，`!!`可能在精神上有用。但是，**在这些情况下，您将非布尔值与硬类型的布尔值进行比较，这在 imo 中是一个严重的错误。** `if (-1)`仍然是这里的路。

```
╔═══════════════════════════════════════╦═══════════════════╦═══════════╗
║               Original                ║    Equivalent     ║  Result   ║
╠═══════════════════════════════════════╬═══════════════════╬═══════════╣
║ if (-1 == true) console.log("spam")   ║ if (-1 == 1)      ║ undefined ║
║ if (-1 == false) console.log("spam")  ║ if (-1 == 0)      ║ undefined ║
║   Order doesn't matter...             ║                   ║           ║
║ if (true == -1) console.log("spam")   ║ if (1 == -1)      ║ undefined ║
╠═══════════════════════════════════════╬═══════════════════╬═══════════╣
║ if (!!-1 == true) console.log("spam") ║ if (true == true) ║ spam      ║ better
╠═══════════════════════════════════════╬═══════════════════╬═══════════╣
║ if (-1) console.log("spam")           ║ if (truthy)       ║ spam      ║ still best
╚═══════════════════════════════════════╩═══════════════════╩═══════════╝ 
```

根据您的引擎，事情会变得更加疯狂。例如，WScript 赢得了奖项。

```
function test()
{
    return (1 === 1);
}
WScript.echo(test()); 
```

由于[某些历史悠久的 Windows jive](https://stackoverflow.com/a/14462348/1028230)，这将在消息框中输出 -1 ！在 cmd.exe 提示符下试试看！但`WScript.echo(-1 == test())`仍然给你 0，或 WScript 的`false`. [移开视线。太可怕了](https://www.google.com/search?q=look+away+I%27m+hideous)

### 比较真实性:)

但是，如果我有两个值需要检查相等的真/假怎么办？

假设我们有`myVar1 = 0;`和`myVar2 = undefined;`。

*   `myVar1 === myVar2`是`0 === undefined`而且显然是错误的。
*   `!!myVar1 === !!myVar2`是`!!0 === !!undefined`而且是真的！一样的真实！（在这种情况下，两者都“具有虚假的真实性”。）

因此，您真正需要使用“布尔转换变量”的唯一地方是，如果您遇到一种情况，即检查两个变量是否具有*相同*的真实性，对吧？也就是说，**如果您需要查看两个 vars 是否*****都为真或都为假*****（或不是），即*****相等*****（或不）*****真*****值，请使用。`!!`**

 ***我想不出一个伟大的、非人为的用例来做这个副手。也许您在表单中有“链接”字段？

```
if (!!customerInput.spouseName !== !!customerInput.spouseAge ) {
    errorObjects.spouse = "Please either enter a valid name AND age " 
        + "for your spouse or leave all spouse fields blank.";
} 
```

所以现在，如果你的配偶姓名和年龄都为真，*或者*配偶的名字和年龄都为假，你可以继续。否则，您只有一个具有价值的字段（或非常早的包办婚姻），并且需要在您的`errorObjects`收藏中创建一个额外的错误。

尽管即使在这种情况下，也`!!`确实是多余的。一个`!`足以转换为布尔值，而您只是在检查相等性。

* * *

**编辑 2017 年 10 月 24 日，19 年 2 月 6 日：**

## 需要显式布尔值的 3rd 方库

这是一个有趣的案例......`!!`当第 3 方库需要明确的布尔值时可能很有用。

### 反应

例如，[JSX (React) 中的 False 有一个特殊的含义](https://react-cn.github.io/react/tips/false-in-jsx.html)，它不会因简单的虚假而触发。如果您尝试在 JSX 中返回类似以下内容，则期待 int in `messageCount`...

`{messageCount && <div>You have messages!</div>}`

`0`...当您有零消息时，您可能会惊讶地看到 React 渲染 a 。您必须显式返回 false 才能使 JSX 不呈现。上面的语句返回`0`，JSX 会愉快地呈现它，就像它应该的那样。它不能告诉你没有`Count: {messageCount}`。

*   一种解决方法涉及 bangbang，它强制`0`转换为`!!0`，即`false`：
    `{!!messageCount && <div>You have messages!</div>}`

*   JSX 的文档建议您更加明确，编写自注释代码，并使用比较来强制为布尔值。
    `{messageCount > 0 && <div>You have messages!</div>}`

*   我更愿意自己用三元处理虚假——
    `{messageCount ? <div>You have messages!</div> : false}`

### 打字稿

Typescript 中的相同处理：如果您有一个返回布尔值的函数（或者您正在为布尔变量分配一个值），那么您 [通常] 不能返回/分配一个 boolean-y 值；它必须是强类型的布尔值。这意味着，**iff`myObject`是强类型**的，`return !myObject;`适用于返回布尔值的函数，但`return myObject;`不是。您必须`return !!myObject`（或以另一种方式转换为正确的布尔值）才能匹配 Typescript 的期望。

> Typescript 的例外？如果`myObject`是`any`，那么您就回到了 JavaScript 的狂野西部，并且可以在没有 的情况下返回它`!!`，即使您的返回类型是布尔值。

请记住，**这些*是 JSX 和 Typescript 约定*，而不是 JavaScript 固有的**约定。

但是，如果您`0`在渲染的 JSX 中看到奇怪的 s，请考虑松散的虚假管理。

* * *

## 回答 #8

> 赞同：61
> 
> 时间：2009-04-24T08:18:49.317

它只是逻辑 NOT 运算符，两次 - 它用于将某些内容转换为布尔值，例如：

```
true === !!10

false === !!0 
```

* * *

## 回答 #9

> 赞同：33
> 
> 时间：2009-09-10T17:27:47.033

它将后缀转换为布尔值。

* * *

## 回答 #10

> 赞同：30
> 
> 时间：2009-09-10T17:28:46.493

这是一个双重`not`操作。第一个`!`将值转换为布尔值并反转其逻辑值。第二个`!`反转逻辑值。

* * *

## 回答 #11

> 赞同：29
> 
> 时间：2009-04-24T08:20:19.190

似乎`!!`运算符导致双重否定。

```
var foo = "Hello World!";

!foo // Result: false
!!foo // Result: true 
```

* * *

## 回答 #12

> 赞同：28
> 
> 时间：2011-03-23T11:53:45.190

它模拟了`Boolean()`强制转换函数的行为。`NOT`无论给出什么操作数，第一个都返回一个布尔值。第二个`NOT`否定该`Boolean`值，因此给出`true`变量的布尔值。`Boolean()`最终结果与对值使用函数相同。

* * *

## 回答 #13

> 赞同：27
> 
> 时间：2017-06-24T04:16:23.667

`!!`它`NOT`一起使用操作两次，`!`将值转换为 a`boolean`并将其反转，因此使用它两次，显示该值的布尔值（假或真）。这是一个简单的例子，看看它是如何`!!`工作的：

首先，你有的地方：

```
var zero = 0; 
```

然后你这样做`!0`，它将被转换为布尔值并被评估为`true`，因为 0 是`falsy`，所以你得到反转的值并转换为布尔值，所以它被评估为`true`。

```
!zero; //true 
```

但是我们不想要反转的**布尔版本**的值，所以我们可以再次反转它来得到我们的结果！这就是为什么我们使用另一个`!`.

基本上，`!!`请确保我们得到的值是布尔值，而不是虚假、真实或字符串等......

所以这就像`Boolean`在 javascript 中使用函数，但是将值转换为布尔值的简单而短的方法：

```
var zero = 0;
!!zero; //false 
```

* * *

## 回答 #14

> 赞同：23
> 
> 时间：2009-09-10T17:29:18.247

！是“布尔非”，它本质上将“启用”的值类型转换为其布尔值的对立面。第二 ！翻转这个值。因此，`!!enable`意味着“不启用”，为您`enable`提供布尔值。

* * *

## 回答 #15

> 赞同：20
> 
> 时间：2016-05-25T10:18:34.720

我认为值得一提的是，与逻辑 AND/OR 结合的条件不会返回布尔值，而是在 && 的情况下最后成功或第一次失败，在 || 的情况下第一次成功或最后失败 的条件链。

```
res = (1 && 2); // res is 2
res = (true && alert) // res is function alert()
res = ('foo' || alert) // res is 'foo' 
```

为了将条件转换为真正的布尔文字，我们可以使用双重否定：

```
res = !!(1 && 2); // res is true
res = !!(true && alert) // res is true
res = !!('foo' || alert) // res is true 
```

* * *

## 回答 #16

> 赞同：17
> 
> 时间：2009-09-10T21:19:09.403

这不是一个操作员，而是两个。它等效于以下内容，是一种将值转换为布尔值的快速方法。

```
val.enabled = !(!enable); 
```

* * *

## 回答 #17

> 赞同：17
> 
> 时间：2014-04-09T04:29:23.453

该`!!`构造是将任何 JavaScript 表达式转换为其布尔等效项的简单方法。

例如：`!!"he shot me down" === true`和`!!0 === false`。

* * *

## 回答 #18

> 赞同：12
> 
> 时间：2019-03-10T18:43:26.100

这个问题已经得到了相当彻底的回答，但我想补充一个我希望尽可能简化的答案，使 !! 尽可能简单地掌握。

因为 javascript 具有所谓的“真”和“假”值，所以有些表达式在其他表达式中求值时会产生真或假条件，即使被检查的值或表达式实际上不是`true`or `false`。

例如：

```
if (document.getElementById('myElement')) {
    // code block
} 
```

如果该元素确实存在，则表达式将评估为真，并且将执行代码块。

然而：

```
if (document.getElementById('myElement') == true) {
    // code block
} 
```

...不会产生真条件，并且即使元素确实存在，代码块也不会被执行。

为什么？因为`document.getElementById()`是一个“真实”的表达式，将在此`if()`语句中评估为真，但它不是`true`.

在这种情况下，双重“不”非常简单。它只是两个`not`背靠背。

第一个简单地“反转”真值或假值，产生一个实际的布尔类型，然后第二个“反转”它再次回到它的原始状态，但现在是一个实际的布尔值。这样你就有了一致性：

```
if (!!document.getElementById('myElement')) {} 
```

和

```
if (!!document.getElementById('myElement') == true) {} 
```

正如预期的那样，两者都会返回true。

* * *

## 回答 #19

> 赞同：11
> 
> 时间：2009-04-24T08:33:39.750

我怀疑这是 C++ 的遗留物，人们会覆盖 ! 运算符，但不是布尔运算符。

因此，在这种情况下，要获得否定（或肯定）答案，您首先需要使用 ! 运算符获取布尔值，但如果您想检查肯定的情况，请使用 !!。

* * *

## 回答 #20

> 赞同：11
> 
> 时间：2016-03-06T14:46:50.283

`if`and`while`语句和`?`运算符使用真值来确定要运行的代码分支。例如，零和 NaN 数字和空字符串为假，但其他数字和字符串为真。对象为真，但未定义的值和`null`都为假。

双重否定运算符`!!`计算一个值的真值。它实际上是两个运算符，其中的`!!x`意思是`!(!x)`，并且行为如下：

*   如果`x`是假值，`!x`是`true`，`!!x`是`false`。
*   如果`x`是一个真值，`!x`是`false`，并且`!!x`是`true`。

`if`当在布尔上下文（ 、`while`或`?`）的顶层使用时，`!!`运算符在行为上是无操作的。例如，`if (x)`和`if (!!x)`意思是一样的。

## 实际用途

然而，它有几个实际用途。

一种用途是将对象有损地压缩为其真值，这样您的代码就不会持有对大对象的引用并使其保持活动状态。分配`!!some_big_object`给一个变量而不是`some_big_object`让垃圾收集器放弃它。这对于产生对象或错误值（例如`null`或未定义值）的情况很有用，例如浏览器功能检测。

[我在关于 C 的相应`!!`operator](https://stackoverflow.com/a/35525827/2738262)的回答中提到的另一个用途是使用“lint”工具来查找常见的拼写错误和打印诊断。例如，在 C 和 JavaScript 中，布尔运算的一些常见拼写错误会产生其他行为，其输出与布尔运算不同：

*   `if (a = b)`是赋值，然后使用 的真值`b`；`if (a == b)`是相等比较。
*   `if (a & b)`是按位与；`if (a && b)`是逻辑与。`2 & 5`是`0`（假值）；`2 && 5`是真的。

`!!`操作员向 lint 工具保证你写的就是你的意思：做这个操作，然后取结果的真值。

第三种用途是产生逻辑 XOR 和逻辑 XNOR。在 C 和 JavaScript 中，`a && b`执行逻辑与（如果双方都为真，则为真），并`a & b`执行按位与。`a || b`执行逻辑或（如果至少有一个为真，则为真），并`a | b`执行按位或。有一个按位异或（异或）作为`a ^ b`，但没有用于逻辑异或的内置运算符（如果恰好一侧为真，则为真）。例如，您可能希望允许用户在两​​个字段之一中输入文本。您可以做的是将每个转换为真值并进行比较：`!!x !== !!y`.

* * *

## 回答 #21

> 赞同：10
> 
> 时间：2010-12-02T20:21:14.550

双布尔否定。通常用于检查值是否未定义。

* * *

## 回答 #22

> 赞同：10
> 
> 时间：2015-12-04T12:50:49.500

`!!x`是简写`Boolean(x)`

第一个 bang 强制 js 引擎运行`Boolean(x)`，但也有反转值的副作用。所以第二次爆炸消除了副作用。

* * *

## 回答 #23

> 赞同：10
> 
> 时间：2016-10-19T21:00:36.023

我只是想补充一点

```
if(variableThing){
  // do something
} 
```

是相同的

```
if(!!variableThing){
  // do something
} 
```

但是当某些东西未定义时，这可能是一个问题。

```
// a === undefined, b is an empty object (eg. b.asdf === undefined)
var a, b = {};

// Both of these give error a.foo is not defined etc.
// you'd see the same behavior for !!a.foo and !!b.foo.bar

a.foo 
b.foo.bar

// This works -- these return undefined

a && a.foo
b.foo && b.foo.bar
b && b.foo && b.foo.bar 
```

这里的技巧是`&&`s 的链将返回它找到**的第一个 false 值**——这可以提供给 if 语句等。所以如果 b.foo 是未定义的，它将返回未定义并跳过该`b.foo.bar`语句，我们得到 no错误。

上面的返回 undefined 但如果你有一个空字符串，false, null, 0, undefined 这些值将返回，并且一旦我们在链中遇到它们——`[]`并且`{}`都是“真实的”，我们将继续所谓的“ && 链”到右边的下一个值。

**PS**执行上述 ( `b && b.foo`) 的另一种方法是`(b || {}).foo`. 这些是等价的，因为如果 b 未定义，`b || {}`则将是`{}`，并且您将访问空对象中的值（无错误），而不是尝试访问“未定义”中的值（导致错误）。

所以,`(b || {}).foo`与 相同,`b && b.foo`与`((b || {}).foo || {}).bar`相同`b && b.foo && b.foo.bar`。

* * *

## 回答 #24

> 赞同：10
> 
> 时间：2018-07-25T03:52:52.473

它强制所有东西都是布尔值。

例如：

```
console.log(undefined); // -> undefined
console.log(!undefined); // -> true
console.log(!!undefined); // -> false

console.log('abc'); // -> abc
console.log(!'abc'); // -> false
console.log(!!'abc'); // -> true

console.log(0 === false); // -> undefined
console.log(!0 === false); // -> false
console.log(!!0 === false); // -> true 
```

* * *

## 回答 #25

> 赞同：9
> 
> 时间：2014-04-24T13:05:49.720

这里有很多很好的答案，但如果你已经读到这里，这有助于我“明白”。在 Chrome（等）上打开控制台，然后开始输入：

```
!(!(1))
!(!(0))
!(!('truthy')) 
!(!(null))
!(!(''))
!(!(undefined))
!(!(new Object())
!(!({}))
woo = 'hoo'
!(!(woo))
...etc, etc, until the light goes on ;) 
```

当然，这些都与仅键入 !!someThing 相同，但添加的括号可能有助于使其更易于理解。

* * *

## 回答 #26

> 赞同：6
> 
> 时间：2017-03-29T07:15:21.490

在看到所有这些很棒的答案之后，我想添加另一个使用 `!!`. 目前我正在使用 Angular 2-4 (TypeScript)，我想`false`在我的用户未通过身份验证时返回一个布尔值。如果他未通过身份验证，则令牌字符串将为`null`or `""`。我可以通过使用下一个代码块来做到这一点：

```
public isAuthenticated(): boolean {
   return !!this.getToken();
} 
```

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2015-03-04T08:25:35.550

这是来自angular js的一段代码

```
var requestAnimationFrame = $window.requestAnimationFrame ||
                                $window.webkitRequestAnimationFrame ||
                                $window.mozRequestAnimationFrame;

 var rafSupported = !!requestAnimationFrame; 
```

他们的意图是根据 requestAnimationFrame 中函数的可用性将 rafSupported 设置为 true 或 false

通常可以通过以下方式检查来实现：

```
if(typeof  requestAnimationFrame === 'function')
rafSupported =true;
else
rafSupported =false; 
```

简短的方法可能是使用！

```
rafSupported = !!requestAnimationFrame ; 
```

因此，如果 requestAnimationFrame 被分配了一个函数，那么 !requestAnimationFrame 将是 false 并且还有一个！这将是真的

如果 requestAnimationFrame 是未定义的，那么 !requestAnimationFrame 将是真的，而且还有一个！这将是错误的

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2016-07-15T10:25:01.600

使用逻辑非运算符两次
**意味着** `!true = false` **和** `!!true = true`

* * *

## 回答 #29

> 赞同：5
> 
> 时间：2017-07-11T07:03:50.793

* * *

## 回答 #30

> 赞同：5
> 
> 时间：2021-01-21T13:52:49.983

记住对**JavaScript**`true`的评估很重要：`false`

 ***   具有“价值”的一切都是`true`（即**真**），例如：

    *   `101`,
    *   `3.1415`,
    *   `-11`,
    *   `"Lucky Brain"`,
    *   `new Object()`
    *   而且当然，`true`
*   没有“价值”的一切都是`false`（即**falsy**），例如：

    *   `0`,
    *   `-0`,
    *   `""`（空字符串），
    *   `undefined`,
    *   `null`,
    *   `NaN`（不是数字）
    *   而且当然，`false`

应用“**逻辑非**”运算符 ( `!`) 计算操作数，将其转换为`boolean`然后取反。应用它两次将否定否定，有效地将值转换为`boolean`. 不应用运算符将​​只是对确切值的常规分配。例子：

```
var value = 23; // number
var valueAsNegatedBoolean = !value; // boolean falsy (because 23 is truthy)
var valueAsBoolean = !!value; // boolean truthy
var copyOfValue = value; // number 23

var value2 = 0;
var value2AsNegatedBoolean = !value2; // boolean truthy (because 0 is falsy)
var value2AsBoolean = !!value2; // boolean falsy
var copyOfValue2 = value2; // number 0 
```

*   `value2 = value;`分配确切的对象`value`，即使它不是`boolean`因此`value2`不一定最终成为`boolean`.
*   `value2 = !!value;`分配一个保证`boolean`作为操作数的双重否定的结果，`value`它等价于以下但更短且可读性：

```
if (value) {
  value2 = true;
} else {
  value2 = false;
}
```

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2015-07-01T07:29:12.637

JavaScript 中的一些运算符执行隐式类型转换，有时用于类型转换。

一元运算`!`符将其操作数转换为布尔值并将其取反。

这一事实导致您可以在源代码中看到以下成语：

```
!!x // Same as Boolean(x). Note double exclamation mark 
```

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2019-10-29T19:56:49.890

要将 JavaScript 变量转换为布尔值，

```
var firstname = "test";
//type of firstname is string
var firstNameNotEmpty = !!firstname;
//type of firstNameNotEmpty is boolean 
```

javascript **false** for "",0,undefined and null

javascript**适用**于除零以外的数字，而不是空字符串、{}、[] 和 new Date() 所以，

```
!!("test") /*is true*/
!!("") /*is false*/ 
```

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2014-06-28T03:35:13.250

```
a = 1;
alert(!a) // -> false : a is not not defined
alert(!!a) // -> true : a is not not defined 
```

对于`!a`，它检查是否`a`未定义**，**同时`!!a`检查变量是否已定义。

`!!a`是一样的`!(!a)`。如果`a`定义，`a`是`true`，`!a`是`false`，`!!a`是`true`。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2017-04-17T14:47:47.180

`!!`类似于使用[*布尔构造函数*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)，或者可以说更像[*布尔函数。*](https://www.w3schools.com/js/js_booleans.asp)

```
console.log(Boolean(null)); // Preferred over the Boolean object

console.log(new Boolean(null).valueOf()); // Not recommended for coverting non-boolean values

console.log(!!null); // A hacky way to omit calling the Boolean function, but essentially does the same thing. 

// The context you saw earlier (your example)
var vertical;

function Example(vertical)
{
        this.vertical = vertical !== undefined ? !!vertical : 
        this.vertical; 
        // Let's break it down: If vertical is strictly not undefined, return the boolean value of vertical and set it to this.vertical. If not, don't set a value for this.vertical (just ignore it and set it back to what it was before; in this case, nothing).   

        return this.vertical;
}

console.log( "\n---------------------" )

// vertical is currently undefined

console.log(new Example(vertical).vertical); // The falsey or truthy value of this.vertical
console.log(!!new Example(vertical).vertical); // Coerced value of this.vertical

vertical = 12.5; // set vertical to 12.5, a truthy value.
console.log(new Example(vertical).vertical); // The falsey or truthy value of this.vertical which happens to be true anyway
console.log(!!new Example(vertical).vertical); // Coerced value of this.vertical

vertical = -0; // set vertical to -0, a falsey value.
console.log(new Example(vertical).vertical); // The falsey or truthy value of this.vertical which happens to be false either way
console.log(!!new Example(vertical).vertical); // Coerced value of this.vertical
```

*javascript 中的*Falsey 值***强制**为*false*，而*真值* **强制**为*true 。*假值和真值也可以在`if`语句中使用，并且本质上将“映射”到它们相应的布尔值。但是，您可能不会发现自己必须经常使用正确的布尔值，因为它们的输出（返回值）大多不同。*

 *> 尽管这可能看起来类似于强制转换，但实际上这可能*仅仅是*巧合，并不是“构建”或特意为布尔类型转换而制造的。所以我们不要这样称呼它。

* * *

### 为什么以及如何工作

简而言之，它看起来像这样：`！(!null)`。而 `null` 是 **falsey**，所以 `!null` 会是 **true**。那么 `!true` 将是 **false** 并且它基本上会*反转回* 到它之前的状态，除了这次是*正确的布尔值*（或者甚至*反之亦然*具有*真实值*，如 ` {}` 或 `1`）。

### 回到你的例子

总的来说，你看到的上下文只是根据是否定义了 `vertical` 来调整 `this.vertical`，如果定义了；它将被设置为垂直的结果布尔值，否则它不会改变。换句话说，如果定义了“垂直”；`this.vertical` 将被设置为它的布尔值，否则，它将保持不变。我想这本身就是一个示例，说明您将如何使用 `!!` 以及它的作用。

### 垂直 I/O 示例

运行此示例并调整输入中的垂直值。查看结果强制转换为什么，以便您可以完全理解上下文的代码。在输入中，输入任何有效的 javascript 值。 **如果您正在测试字符串，请记住包含引号。**不要太在意 CSS 和 HTML 代码，只需运行此代码段并使用它。但是，您可能想查看非 DOM 相关的 javascript 代码（使用 Example 构造函数和垂直变量）。

```
var vertical = document.getElementById("vertical");
var p = document.getElementById("result");

function Example(vertical)
{
        this.vertical = vertical !== undefined ? !!vertical : 
        this.vertical;   

        return this.vertical;
}

document.getElementById("run").onclick = function()
{

  p.innerHTML = !!( new Example(eval(vertical.value)).vertical );

}
```

```
input
{
  text-align: center;
  width: 5em;
} 

button 
{
  margin: 15.5px;
  width: 14em;
  height: 3.4em;
  color: blue;
}

var 
{
  color: purple;
}

p {
  margin: 15px;
}

span.comment {
  color: brown;
}
```

```
<!--Vertical I/O Example-->
<h4>Vertical Example</h4>
<code id="code"><var class="var">var</var> vertical = <input type="text" id="vertical" maxlength="9" />; <span class="comment">// enter any valid javascript value</span></code>
<br />
<button id="run">Run</button>
<p id="result">...</p>
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2018-09-15T04:37:21.030

有时需要检查我们在函数中是否有值，数量本身对我们来说并不重要，而是它是否重要。例如，我们要检查用户是否有专业，我们有一个功能，就像：

```
hasMajor(){return this.major}//it return "(users major is)Science" 
```

但答案对我们来说并不重要，我们只想检查它是否有专业，我们需要一个布尔值（真或假）我们如何得到它：

像这样：

```
hasMajor(){ return !(!this.major)} 
```

或同样

```
hasMajor(){return !!this.major)} 
```

如果 this.major 有一个值，则`!this.major`返回 false，但是因为该值已经退出，我们需要返回 true，我们使用 ! 两次返回正确答案`!(!this.major)`

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2020-07-01T09:18:27.210

```
const foo = 'bar';
console.log(!!foo); // Boolean: true
```

！否定（反转）一个值并且总是返回/产生一个布尔值。所以 !'bar' 会产生 false （因为 'bar' 是真的 => 否定 + boolean = false）。随着额外的！运算符，该值再次被否定，因此 false 变为 true。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2021-11-12T03:56:02.860

！！不是运算符，它只是 ! 操作员两次

但是使用javascript，应用！在大多数情况下，将 Object 转换为布尔值是冗余和冗长的，因为：

> 值不是 undefined 或 null 的任何对象，包括值为 false 的布尔对象，在传递给条件语句时评估为 true

前任： `if ({}) { console.log("{} is true")} // logs: "{} is true"`

* * *

## 回答 #38

> 赞同：-4
> 
> 时间：2012-04-24T12:22:05.990

这是检查未定义、“未定义”、“空”、“空”、“”的一种非常方便的方法

```
if (!!var1 && !!var2 && !!var3 && !!var4 ){
   //... some code here
} 
```

# ruby - 在 Ruby 中重新映射哈希的最佳方法是什么？

> ID：784943
> 
> 赞同：4
> 
> 时间：2009-04-24T08:16:42.193
> 
> 标签：ruby, hash, remap

是否有一种简单的方法可以通过以下方式在 ruby​​ 中重新映射哈希：

从：

```
{:name => "foo", :value => "bar"} 
```

到：

```
{"foo" => "bar"} 
```

最好以一种在迭代这种类型的哈希数组时使执行此操作变得简单的方式：

从：

```
[{:name => "foo", :value => "bar"}, {:name => "foo2", :value => "bar2"}] 
```

到：

```
{"foo" => "bar", "foo2" => "bar2"} 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T08:31:07.620

```
arr = [ {:name=>"foo", :value=>"bar"}, {:name=>"foo2", :value=>"bar2"}]

result = {}
arr.each{|x| result[x[:name]] = x[:value]}

# result is now {"foo2"=>"bar2", "foo"=>"bar"} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T14:22:15.527

Vanson Samuel 代码的修改版本可以达到预期目的。这是一个单行，但很长。

```
arr = [{:name=>"foo", :value=>"bar"}, {:name=>"foo2", :value=>"bar2"}]

arr.inject({}){|r,item| r.merge({item['name'] => item['value']})}

# result {"foo" => "bar", "foo2" => "bar2"} 
```

不过，我不会说它比 Gishu 的版本更漂亮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T17:44:57.477

作为一般的经验法则，如果你有一个 {:name => "foo", :value => "bar"} 形式的哈希，你通常最好使用 ["foo", "酒吧”]。

```
arr = [["foo", "bar"], ["foo2", "bar2"]]
arr.inject({}) { |accu, (key, value)| accu[key] = value; accu } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T05:30:15.430

我知道这是旧的，但实现这一点的最巧妙方法是将哈希数组映射到元组数组，然后使用 Hash[] 从中构建哈希，如下所示：

```
arr = [{:name => "foo", :value => "bar"}, {:name => "foo2", :value => "bar2"}]
Hash[ array.map { |item| [ item[:name], item[:value] ] } ]

# => {"foo"=>"bar", "foo2"=>"bar2"} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-06T10:32:41.623

有点晚了，但是：

```
[{ name: "foo", value: "bar" },{name: "foo2", value: "bar2"}].map{ |k| k.values }.to_h 
```

# sql - 在创建后使用表：对象不存在

> ID：784953
> 
> 赞同：2
> 
> 时间：2009-04-24T08:19:24.963
> 
> 标签：sql, sql-server, sql-server-2005, tsql, ssms

我在 T-SQL 中有一个脚本，如下所示：

```
create table TableName (...)
SET IDENTITY INSERT TableName ON 
```

在第二行我得到错误：

找不到对象“TableName”，因为它不存在或您没有权限。

我从 Management Studio 2005 执行它。当我在这两行之间加上“GO”时，它就可以工作了。但我想要完成的是不要使用“GO”，因为我想在它完成时将此代码放在我的应用程序中。

所以我的问题是如何在不使用“GO”的情况下完成这项工作，以便我可以从我的 C# 应用程序以编程方式运行它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-24T08:21:59.433

如果不使用 GO，以编程方式，您将需要进行 2 次单独的数据库调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T08:23:28.353

一个接一个地运行这两个脚本 - 使用来自您的应用程序的两个调用。

无论如何，您应该只在第一个成功运行后才运行第二个，因此您可以运行第一个脚本并成功运行第二个脚本。必须先创建表才能使用它，这就是为什么需要管理工作室中的 GO。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-24T09:12:08.253

来自 BOL：“ *SQL Server 实用程序将 GO 解释为它们应该将当前批次的 Transact-SQL 语句发送到 SQL Server 的信号*”。因此，正如 Jose Basilio 已经指出的那样，您必须进行单独的数据库调用。如果这有帮助，我也遇到了同样的问题，我不得不编写一个小（非常基本的）解析器来将每个脚本拆分成一堆迷你脚本，这些脚本一次一个地发送到数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T21:25:45.340

比 tpdi 的临时表更好的是变量表。它们以闪电般的速度运行，一旦超出范围就会自动掉落。

这就是你制作的方法

```
declare @TableName table (ColumnName int, ColumnName2 nvarchar(50)) 
```

然后插入你就这样做

```
insert into @TableName (ColumnName, ColumnName2)
select 1, 'A' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T08:35:48.450

考虑编写一个存储过程来创建一个临时表并使用它做任何需要的事情。如果您创建一个真实的表，您的应用程序将无法多次运行该脚本，除非它也删除了该表——在这种情况下，您完全拥有临时表的功能。

# java - Openoffice3/jodconverter 停止工作

> ID：784957
> 
> 赞同：1
> 
> 时间：2009-04-24T08:20:22.857
> 
> 标签：java, openoffice.org, jodconverter

我已经在我们的服务器上安装了 Openoffice.org3，它以无头模式运行。我们将它与 jodconverter 一起使用来转换 word 和 Excel 文件。

它曾经工作正常，但有一天它停止工作了，我真的不明白为什么。

当我运行 /usr/local/bin/java -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar

在 .xls 文件上将其转换为 .csv 文件，它只是给了我：

线程“主”com.artofsolving.jodconverter.openoffice.connection.OpenOfficeException 中的异常：转换失败：无法保存输出文档；OOo 错误代码：3088

如果我在 word 文件上运行 jodconverter，它只会给我一个空的输出文件或其他错误代码。那要看。

我们的服务器同时安装了 openoffice 2.4 和 3.0，但现在都没有工作。（他们都有同样的问题）所以这不是 openoffice 安装的直接问题。

我什至尝试在服务器上创建一个新用户，并以他的身份运行 openoffice，但这也不起作用。

那么有没有人对可能出了什么问题有任何想法，或者我如何让 openoffice.org 生成某种日志文件/控制台输出，这样我就可以了解发生了什么。

我使用 /opt/openoffice.org3/program/soffice.bin -headless -nofirststartwizard -accept="socket,host=localhost,port=8100;urp;" &

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-09-11T16:30:49.087

有时，soffice 正在运行，但所有转换尝试都失败。

我的解决方法是运行：

`Runtime.getRuntime("killtask /IM soffice.bin /F")`

关闭操作系统进程。而在这之后，

`Runtime.getRuntime("c:\\path\\start-openoffice-uno.bat")`.

值得我使用的是 OO 3.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-27T21:30:44.723

好吧，我最终删除了旧的 openoffice 安装并安装了新版本，现在它又可以工作了。我仍然不明白为什么它停止工作，但有时你只需要接受重新安装是一种解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T11:14:07.940

对我来说，它在清理 /tmp 中与 OpenOffice 相关的所有文件后开始工作

# asp.net-mvc - 当字段不在表单数据中时，为什么默认模型绑定器不验证字段？

> ID：784960
> 
> 赞同：2
> 
> 时间：2009-04-24T08:21:17.627
> 
> 标签：asp.net-mvc

假设您有这样的简单对象：

```
public class MyObject {
    public int Test { get; set; }
} 
```

并且您依靠默认模型绑定器来确保用户在发布如下表单时不会将“测试”字段留空：

```
<form method="post" action="/test">
    <p>
        <%=Html.TextBox("Test") %>
        <%=Html.ValidationMessage("Test") %>
    </p>
    <input id="Submit1" type="submit" value="submit" />
 </form> 
```

而这个动作：

```
[AcceptVerbs(HttpVerbs.Post)]
 public ActionResult Test(MyObject o) {
     return View();
 } 
```

当表单数据包含“测试”的键（如“ `Test=val`”或“ `Test=`”）时，这一切都按预期工作

但如果键不在表单数据中，则不会发生验证。因此，在一个空的发布请求或带有`AnotherField=foo`模型对象属性等数据的请求的情况下，默认为类型的默认值（在本例中为 0）。并`ModelState.IsValid`返回真。

这是，IMO，不是人们所期望的行为。
那么你有什么建议来改变这种行为呢？

**编辑：** 请记住，恶意用户可以使用[FireBug](http://getfirebug.com/)或[Tamper Data](https://addons.mozilla.org/firefox/addon/966)插件轻松篡改表单数据，以通过默认模型绑定器的验证，这可能会导致一些安全问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-19T21:04:14.073

不幸的是，它没有通过设计验证字段。请查看我发现并评论的这个[Codeplex 问题。](http://aspnet.codeplex.com/WorkItem/View.aspx?WorkItemId=4858)

真的很不幸，MS 认为这是他们的模型绑定器的正确行为。

我相信默认模型绑定器应该验证整个*实体*，而不仅仅是发布的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T12:23:09.120

您可能会考虑使用[xVal](http://xval.codeplex.com/)来执行客户端和服务器端验证的必要组合。有了它，您可以向您的 Test 属性添加一个属性，指定适用于它的验证规则（必需、正则表达式验证等），然后再做一些工作，让它为您生成 JavaScript 规则以及很容易执行模型验证。

你已经意识到你违反了开发规则——永远不要相信客户的输入。真的没有办法解决。

客户端验证（防止往返以发现有错误）是很好的，服务器端验证验证事情是否真的井井有条是必须的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-30T01:21:30.353

我希望它是设计使然，因为我即将开始依赖这种行为！

在一种情况下，我有两个控件，它们回发以下字段：

```
ShippingAddress.FirstName
ShippingAddress.LastName
ShippingAddress.Line1
ShippingAddress.Line2

BillingAddress.Email
BillingAddress.FirstName
BillingAddress.LastName
BillingAddress.Line1
BillingAddress.Line2 
```

注意：帐单地址没有显示电子邮件，即使底层模型当然仍然有它

如果我的模型中有电子邮件作为 [必需] 数据注释，那么它只会在帐单地址中缺少它时抱怨。

但我绝对明白你的意思！我只是依靠它来解决这个场景！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-30T02:17:40.330

在研究了将表单值放入我的控制器方法的所有不同方法之后，我发现“最安全的”是将每个表单字段显式定义为控制器的参数。副作用是，如果表单没有其中一个字段，它将引发异常 - 这将解决您的问题。

# subsonic - 如何在亚音速中获得多行

> ID：784971
> 
> 赞同：0
> 
> 时间：2009-04-24T08:26:18.113
> 
> 标签：subsonic

我正在使用以下

产品 objProduct = new Product("active_flag","true");

这将导致多行，我如何访问多行？ObjProduct 将只有一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-24T09:15:06.670

如果您使用的是 2.1 或更高版本，您可以执行以下操作：

```
ProductCollection products = DB.Select().From(Product.Schema)
  .Where(Product.Columns.active_flag).IsEqualTo(true)
  .ExecuteAsCollection<ProductCollection>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-29T04:17:46.033

另一种方式...

```
ProductCollection products = new ProductCollection()
   .Where(Product.Columns.active_flag, true)
   .Load(); 
```

# excel - Excel 宏 - 如何获取自动筛选行的范围？

> ID：784973
> 
> 赞同：0
> 
> 时间：2009-04-24T08:27:36.847
> 
> 标签：excel, filter, vba

好的，所以我已经为整个活动工作表 ( `UsedRange.AutoFilter Field:=1, Criteria1:= [blah blah]`)设置了 AutoFilter 属性

应用过滤器后，如果行和列是过滤器的结果，我如何以编程方式选择范围。

我检查了UsedRange，但这给出了整个（未过滤的）范围。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T13:05:14.403

知道了。

```
Set rng = Worksheets("Sheet1").Range("A1").CurrentRegion.SpecialCells(xlVisible) 
```

# c# - 在 C# 应用程序中处理多个表单

> ID：784975
> 
> 赞同：2
> 
> 时间：2009-04-24T08:28:12.540
> 
> 标签：c#, .net, winforms, architecture

我正在尝试修改使用多个表单的 C# WinForms 应用程序。启动时，将显示一个登录窗口。如果用户使用正确的用户名和密码组合登录，则具有三个不同选项卡的表单将显示为一种管理员视图。如果没有提供密码或用户名，将显示一个非常简化的 GUI。它基本上由两个按钮组成，根据按下的按钮依次显示这两种形式：

按钮 1：允许用户访问由多个文本框组成的表单，用户可以在其中输入将保存到数据库的信息。成功执行 DB 操作后，将再次显示带有两个按钮的第一个表单。

按钮 2：显示一个表单，用户可以在其中输入将写入 DB 的代码。数据库操作结束后，用户将通过两个按钮自动返回原始表单。

两种形式也将有一个返回按钮，让用户回到第一个形式。我有很多逻辑，但我不确定如何最好地处理所有涉及的表格。我应该在哪里实例化第一个（登录）表单？完成登录验证后，有两种可能的方法。显示选项卡式管理表单（如果用户名和密码正确）或带有两个大按钮的简化用户表单。还应该可以从管理表单中注销，以便显示简化的 GUI。

我希望我在这里有意义。我只需要一种很好的方法来处理它们之间的所有表单和导航。目前，实际上不需要在它们之间传输数据，但这可能是未来的一个问题，因此考虑到这一点的解决方案将是非常好的。

我在想，真正需要的是一个从一开始就处理表单的显示和处理的类，但我不太确定我应该把这个处理类的实例化放在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-24T09:03:07.713

我只是做了类似的事情。我有一组表单作为规范所称的“页面”进行管理。我也有严格的页面流程，比你的要复杂一些。我会告诉你的。

我将交互的每个“页面”设计为一个 UserControl，并创建了一个“OuterForm”和一个“Controller”。控制器有一个 Navigate(string pageName) 方法，外部表单包含一个面板，并有一个 Display(Control page) 方法，该方法清除面板上的子项并添加替换。

我使用 Spring.NET 来配置控制器和表单，并使用 setter 注入在两者之间创建双向链接。这意味着我的主要方法可以向 Spring 请求表单并使用 Application.Run(form); 显示它。

我创建了一个方便的方法来从事件处理程序访问控制器，并且会执行例如 Controller.Instance.Navigate(chosenPage); 控制器还使用 Spring.NET 为 selectedPage 加载正确的 UserControl，然后在主窗体上调用 Display() 它加载的实例。任何用户控件中都没有 Spring.NET 代码，也没有新关键字；-)

使用 Spring.NET 对我来说的优势是我有一个表单类，它只监视一些业务逻辑并显示进度指示。我能够实现一次并配置该表单的许多实例，这些实例注入了它将监视的不同业务逻辑。此外，我需要为特定领域的硬件和 Web 服务的接口存根。最终，我也将页面流移到了配置中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-24T08:41:18.407

表单管理可能是一个棘手的问题。有一些不同的方法可以去：

*   只需让表格在屏幕上浮动。让一些静态类保存对不同表单的引用并公开方法来激活它们。
*   将表单实现为 ​​UserControls，将它们放在同一个表单上，并根据需要显示和隐藏控件（这也可以通过加载表单、剥离表单边框等并将其父级设置为面板或类似的东西来实现；这几乎会使它们表现得像用户控件，但只是几乎）
*   当然，还有许多其他方法；o)

在管理登录表单时，我会在 Main 方法中执行此操作；显示登录表单，检查凭据，然后实例化您要显示的 UI 并将其传递给 Application.Run 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-26T10:06:26.297

您是否考虑过使用复合 UI 框架？在您的情况下，您可以将 WinForms 与[CAB](http://en.wikipedia.org/wiki/Composite_UI_Application_Block "复合 UI 应用程序块")一起使用。

一大优势是支持基于角色的身份验证。经过身份验证的会话可以匹配一个角色，未经身份验证的会话可以匹配另一个角色。因此，您可以根据用户的角色显示不同的屏幕。

另一个优点是解决了谁负责实例化屏幕的问题。这是由控制器管理的，屏幕上的动作（例如按钮点击）可以向该控制器发送事件。

最后但同样重要的是，有一些很好的示例可用，并且肯定支持更高级的场景。

# c# - IExtenderProvider 和 WinForms 设计器文件

> ID：784985
> 
> 赞同：1
> 
> 时间：2009-04-24T08:31:23.623
> 
> 标签：c#, .net, winforms

C# 3.5 Winforms...

所以我最近发现了 IExtenderProvider 以及如何使用它来扩展具有附加属性的控件。

在我设置的原型项目中，我在我的扩展属性的“设置”方法上设置了一个断点，并且随着表单的加载，我可以看到表单上的每个控件都在执行“设置”方法；这正是我想要的。在成功原型之后，我将扩展器组件实现到我的主项目中。我项目中的所有表单都继承自我添加了扩展器组件的基本表单。在基本表单上，我将扩展器组件的修饰符设置为 public，以便继承此基本表单的表单可以访问它。

在我为我的扩展属性的“设置”方法添加断点之前做同样的事情，但该方法不会为表单中的控件执行（但仅适用于基本表单中的控件）。帮助！

我可能应该在这一点上补充一点，我已经对我的表单进行了源代码控制，因此大多数表单都已签入（即锁定修改）。对于我检查并修改了 provider 属性的表单；我在设计器文件中注意到所有控件都有一个附加语句，该语句调用提供程序属性的“设置”方法。

this.MyProvider1.SetMyProperty(this.txtTextBox1, false);

我是否认为要使扩展器组件正常工作，它必须对设计器文件进行物理修改，还是应该能够处理锁定的文件并因此动态调用 set 方法？我想如果它确实必须修改设计器文件，那么对于新表单或在将扩展器组件添加到项目后修改的表单来说这不是问题——但是当你有 101 个表单全部被源锁定时就会出现问题-安全的...

我会很感激任何想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-24T06:09:43.113

> > 扩展器提供程序（IExtenderProvider）在什么时候扩展扩展器的“类型”（在我的例子中是一个 winforms 控件）；在设计时还是在运行时？

**设计**器负责从IExtenderProvider接口的属性编辑器
方法中向你展示扩展器的属性`bool CanExtend(object)`

> > 我是否认为要使扩展器组件正常工作，它必须对设计器文件进行物理修改，还是应该能够处理锁定的文件并因此动态调用 set 方法？

它必须物理修改设计器文件，并在那里写入扩展属性

> > 我想如果它确实必须修改设计器文件，那么对于新表单或在将扩展器组件添加到项目后修改的表单来说这不是问题——但是当你有 101 个表单全部被源锁定时就会出现问题-安全的...

这对于新表格不是问题，**对于旧表格**也不是问题。
如果要设置一些扩展属性，请打开旧表单并设置扩展属性（需要签出文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-26T08:00:20.227

这确实证实了我的怀疑，非常感谢。但这确实留下了一个问题，即只有在对旧形式进行一些物理更改时才会扩展组件。

我试图劫持 Set 属性方法来添加和删除组件的事件处理程序（如果组件是控件）。Image 该属性是一个布尔值，当设置为 false 时，它​​会添加事件句柄，因此会添加默认行为（设置为 true 不会添加事件处理程序）

长话短说，作为新添加表单的一部分的控件会自动添加一个事件处理程序，即使我没有将属性显式设置为 false，但旧表单的设计器文件从不修改，因此没有添加事件处理程序。

作为一些背景，我试图为所有控件添加全局事件处理 [程序 用户帮助的所有控件的全局事件处理程序](https://stackoverflow.com/questions/772079/global-event-handler-for-all-controls-for-user-help)

这里的主题是为我的表单添加上下文帮助这里的扩展器示例（事件处理程序作为最终初始化程序的一部分添加）

公共部分类 HelpProvider：组件、IExtenderProvider、ISupportInitialize

...省略了扩展器的其他代码...

```
 #region ISupportInitialize Members

    public void BeginInit()
    {
        // do nothing
    }

    public void EndInit()
    {
        if (DesignMode)
            return;

        foreach (Component item in _disableOnlineHelp)
        {
            if (item == null)
                continue;

            if (GetDisableOnlineHelp(item)) // developer has decide to set property to TRUE
                continue;

            Control control = item as Control;

            if (control != null)
                continue;

            control.HelpRequested += new HelpEventHandler(HelpProvider_HelpRequested);
            _toolTip.SetToolTip(control, GetHelpText(control));
        }
    }

    #endregion

    #region DisableOnlineHelp Provider Property

    public virtual bool GetDisableOnlineHelp(Component component)
    {
        object flag = _disableOnlineHelp[component];

        if (flag == null)
            return false;

        return (bool)flag;
    }

    public virtual void SetDisableOnlineHelp(Component component, bool value)
    {
        _disableOnlineHelp[component] = value;
    }

    #endregion 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-05-25T16:12:44.143

一个问题可能是方法中的`foreach`循环`EndInit`：

```
Control control = item as Control;

if (control != null)
    continue; 
```

如果该项目实际上是一个控件，则在执行此代码之前退出循环：

```
control.HelpRequested += new HelpEventHandle(HelpProvider_HelpRequested);
_toolTip.SetToolTip(control, GetHelpText(control)); 
```

因此您永远不会将事件处理程序或工具提示添加到任何控件。哎呀：）

谢谢，约翰

# asp.net - Web 内容可访问性指南 (WCAG) 2.0 与 1.0

> ID：784990
> 
> 赞同：0
> 
> 时间：2009-04-24T08:33:50.653
> 
> 标签：asp.net, accessibility

我刚刚意识到可以使用 2.0 版的指南。

最近刚刚使我的网站符合 1.0 的指导方针，我想知道 1.0 和新版本的指导方针之间有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T09:12:48.050

[http://www.w3.org/WAI/WCAG20/from10/diff.php](http://www.w3.org/WAI/WCAG20/from10/diff.php)

和

[http://www.w3.org/WAI/WCAG20/from10/comparison/](http://www.w3.org/WAI/WCAG20/from10/comparison/)

# c# - 将非托管 c++ 类库暴露给 c#

> ID：784991
> 
> 赞同：3
> 
> 时间：2009-04-24T08:34:11.933
> 
> 标签：c#, c++, unmanaged

我实际上有两个未损坏的 c++ 库，其中一个使用了另一个。两者都很大，所以重写不是我的选择。

我读了一些关于创建一个包含非托管代码的托管 c++ 库的内容。但我真的不知道如何开始，以及如何将所有这些东西结合到一个项目中......

是否有任何分步指南或易于理解的示例来说明如何执行此操作？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-27T23:06:25.633

您可能会考虑使用 ATL 为您的 C++ 代码编写一个 COM 包装器。[我在一篇博文](http://www.moserware.com/2008/01/finally-understanding-com-after.html)中展示了如何做到这一点。这就是微软公开他们用 C++ 编写的功能（例如 Windows 7 库功能）的方式。COM 很容易被 .NET/C# 使用（参见[这篇文章](http://www.moserware.com/2009/04/using-obscure-windows-com-apis-in-net.html)）。如果你走这条路，如果你不需要与其他人共享你的包装器，你可能会考虑[注册免费的 COM 。](http://blogs.msdn.com/junfeng/archive/2006/05/17/registration-free-com-net-interop.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T08:47:07.580

我认为这取决于您实际需要公开多少库功能。

我不知道如何创建托管 C++ 包装器，但我个人使用了另外两种方法来解决这个问题：

1.  使用[SWIG](http://www.swig.org/)为您的 C++ 类自动生成 C# PInvoke 包装器。这种工作，但只有当你需要暴露**很多**类和成员时才真正值得。根据我的经验，自动生成的代码仍然需要手动进行一些调整。

2.  只为您需要的功能编写非托管 C 包装器，从 DLL 中导出它们，然后手动编码您需要导入 C# 的几个 PInvoke 包装器。我发现这在某些情况下更合适，例如，有一个大型 C++ 类库可以执行不同类型的图像文件转换，但您真正想要公开的只是一个函数`DoTheConversion(LPWSTR inputFile)`。我的 C# 程序不需要了解底层类库的所有复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T08:53:33.087

您可以在同一个项目中编写托管和非托管 C++。因此，您可以在 Managed C++ 中编写一个包装器来调用您的本机 c++ 类等。然后在 C# 中，您的托管 C++ 类将与任何其他 .net 引用一样出现。在这种情况下无需使用 P/Invoke。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-27T22:56:39.027

您有两种选择，一种称为 ijw “它可以正常工作”，您可以在其中编写托管 c++ 并调用非托管 c++。另一个选项需要使用 pinvoke。

如果你使用 pinvoke 你会有这样的东西

C＃

```
somefunction("str1", "str2", "str3", "str4"); 

[DllImport(@"myproj.dll", EntryPoint = "somefunction")]
public static extern IntPtr SomeFunction([MarshalAs(UnmanagedType.LPWStr)]string jarg1, [MarshalAs(UnmanagedType.LPWStr)]string jarg2, [MarshalAs(UnmanagedType.LPWStr)]string jarg3, [MarshalAs(UnmanagedType.LPWStr)]string jarg4); 
```

C++

```
extern "C" __declspec(dllexport) void* __stdcall somefunction(wchar_t * jarg1, wchar_t * jarg2, wchar_t * jarg3, wchar_t * jarg4) 
{
//do some stuff with strings
} 
```

如果你使用 SWIG，swig 会尝试自动生成上面的代码，但它是一个苛刻的大师。

我曾经使用过托管 c++，但我不记得我是怎么想的了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T08:51:26.993

阅读其中一些文章可能是一个开始 - 这是一个相当广泛的主题，并且没有“完美”的方法来做到这一点：

[http://www.ondotnet.com/pub/a/dotnet/2004/03/29/mcpp_part3.html](http://www.ondotnet.com/pub/a/dotnet/2004/03/29/mcpp_part3.html) [http://www.codeguru.com/cpp/cpp/cpp_managed/interop/article.php/c6867](http://www.codeguru.com/cpp/cpp/cpp_managed/interop/article.php/c6867)

这些方法都没有使用 p/invoke，这是我们在我工作的项目中使用的一种方法，我们需要连接一个非常旧的 c++ 服务库。

# objective-c - 如何在 Objective-C 中使用 @encode() 获取 @"NSArray"

> ID：784992
> 
> 赞同：0
> 
> 时间：2009-04-24T08:34:21.403
> 
> 标签：objective-c, runtime

我正在使用运行时函数来获取属性的类型（感谢 eJames 帮助我找出这种方法）。属性的属性字符串如下所示：

> T@"NSArray",&,Vstuff

我需要检查属性类型是否为数组，目前我正在这样做：

```
 - (BOOL)valueForKeyIsArray:(NSString *)key fromTagret:(id)target
{
    NSString *lowerCaseKey = [self convertToKVCKey:key];

    objc_property_t property = class_getProperty([target class], [lowerCaseKey UTF8String]);
    NSString *propertyAttrs = [NSString stringWithUTF8String:property_getAttributes(property)];
    NSString *encodedType = @"@\"NSArray\"";

    NSRange range = [propertyAttrs rangeOfString:encodedType options:NSLiteralSearch];
    return range.location != NSNotFound;
} 
```

但是由于Apple可以随时更改类型定义字符串，所以我想生成这个@“NSArray”类型字符串。我用@encode() 试过了，但是没有用：

```
NSString *encodedType = [NSString stringWithUTF8String:@encode(NSArray *)]; 
```

那么如何生成这种类型的字符串呢？或者有没有更好的方法来检查这个属性属性是否包含数组类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T10:14:21.407

没有办法检查这一点。在 Objective-C 源代码中，被键入的变量`NSArray *`仅用于编译器发出警告。它没有任何意义，并且在运行时不存在。如果您将 an 错误地键入`NSArray`为`NSString`，您会在编译时收到很多警告，但您的代码在运行时的行为会完全一样。在运行时，所知道的只是 ivar/property 是“一个对象”。

另一种思考方式是，一旦编译了 Objective-C，所有对象引用都是`id`引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-25T02:25:13.757

只需接受如果运行时发生更改，您的代码将中断并继续前进。`NSMutableArray *`但是，我认为您可能对、`CFArrayRef`或类型的 ivars 进行了错误分类`CFMutableArrayRef`。您似乎还假设所有键都直接对应于声明的属性。

最干净的解决方案可能是断言用于测试的样本对象（目标）必须具有该键的非零值，并且只需获取该值并对其进行测试`[[target valueForKey:key] isKindOfClass:[NSArray class]]`。

# content-management-system - 最容易使用的网页内容管理系统

> ID：784995
> 
> 赞同：0
> 
> 时间：2009-04-24T08:34:29.983
> 
> 标签：content-management-system

我必须选择一个内容管理系统来允许动态更新网站内容。大多数这些系统所需的配置量和学习曲线似乎远远超出了应有的水平。

我几乎已经用 Alfresco SURF 建立了这个网站——但我只是发现它让简单的事情变得比他们应该做的更难。

我听说过 Drupal、Joomla 和 Plone - 但我希望的是设置和使用都非常简单的东西。我听说这些不是。

我们只需要能够更改即将发生的事件的日期等内容。不需要支持导航模板更改（但如果支持并且软件仍然易于使用，那么它是一个加号）。

您能否只推荐非常简单易用的应用程序，或者解释一下我所要求的是否存在某些原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T08:38:32.187

试试 Wordpress——它不仅适用于博客，而且如果你有非常简单的要求，它也可以作为 CMS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T08:41:18.123

为了使安装更容易，您可以尝试使用[BitNami 堆栈](http://bitnami.org/stacks)。Drupal 和 Joomla 都在那里。

基本上它们是作为独立实例安装的，旨在不干扰您现有的其他系统（安装自己的数据库和网络服务器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T09:06:06.473

Drupal 非常易于使用（我知道，因为我在上面运行了我的个人站点和我妻子的站点）- 模块安装实际上是在提取一个文件夹。内部有一个很棒的系统，可以告诉您所有内容的更新。现在使用 Microsoft 在 Mix 发布的 Web 平台安装程序在 IIS 上安装非常容易（就像安装应用程序一样难）。如果您想要手动方法，它基本上是创建空数据库，提取文件，转到站点，按照提示操作。也非常简单，但是 Web 平台安装程序会为您处理获取先决条件以及服务器的配置。

我相信Joomla也在上面，但我没有用过。

顺便说一句，我为我妻子的网站做的事情是使用 Drupal 并设置使其有用的模块，然后我为她创建了所有页面并在她用来编辑页面的机器上设置了 Windows Live Writer . 通过这种方式，她可以控制内容，但她不必了解有关网站的任何信息。她的网站不是博客，而是普通的商业网站，但使用 WLW 可以轻松实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-24T08:56:35.013

你看过[ModX](http://modxcms.com/)吗？您可以在一刻钟内安装它，并在几个小时内拥有一个工作站点，并且有大量教程可供使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-24T08:39:18.957

我会用wordpress来做这类事情。它安装简单，使用起来也很方便。你不必使用它的博客部分

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-24T09:22:17.340

> 大多数这些系统的学习曲线似乎真的比应该需要的要多得多

我明白。当我尝试使用一个时，我也有同样的感觉。如果您只想抛出一些简单的信息，则需要经过大量的术语和配置（安装、用户设置、访问权限等）。

如果我是你，我只会使用**wiki**。这样做的好处是您可以随心所欲地创建流程，而不必担心 CMS 系统的规则。以后你可以把它带到任何你想去的地方。例如[Python 维基](http://wiki.python.org/moin/)。

我推荐的两个 wiki 是[MoinMoin](http://moinmo.in/)，因为它呈现得非常好（例如 Python wiki）、易于使用（完整的所见即所得编辑器选项）、可定制（CSS 等）并使用平面文件（因此没有数据库管理员或 SQL 中的隐藏内容）。它是用 Python 编写的，我建议使用 fastcgi 或 mod_python 让它变得非常快。

如果您不喜欢，[WakkaWiki](http://docs.wikkawiki.org/WikkaFeatures)非常棒。虽然它是带有 SQL 后端的 PHP。易于设置，易于使用良好的功能（例如嵌入思维导图）。

# c# - 从 C# 启动电子邮件应用程序 (MAPI)（带附件）

> ID：784997
> 
> 赞同：6
> 
> 时间：2009-04-24T08:36:13.770
> 
> 标签：c#, c++, email, outlook, mapi

过去，我使用 MAPISendMail 从带有文件附件的 C++ 应用程序启动 Outlook（或任何所需的 MAPI 电子邮件应用程序）。（类似于 Microsoft Word 的发送电子邮件功能）。

我需要在 C# 应用程序中做同样的事情，并让它在 XP、Vista、Server 2008（我想是 Windows 7）上运行时工作。

MAPISendMail 在 Vista/2008 下是不行的，因为当 Outlook 正在运行并且托管代码不支持 MAPI 时，它总是返回 MAPI_E_FAILURE。即使在检查了此修复程序之后：http: [//support.microsoft.com/kb/939718](http://support.microsoft.com/kb/939718) 我也无法让它可靠地工作。

**我知道 Microsoft Word 和 Adob​​e Reader 9 都可以在 Vista 下启动带有附件的 Outlook。**

**AC# 兼容的解决方案将是首选，但我会对任何有效的解决方案感到满意（不必使用 MAPI）。我似乎找不到当前的“解决方案”是什么。Stack Overflow 上现有的答案似乎也没有涵盖这一点。**

***编辑：***

我知道 MAPI 和 C# 不能一起工作，所以我将采用在 Vista 和 Server 2008 中**不**以管理员身份运行时工作的 C/C++ 解决方案。请参阅 Adob​​e Reader 9 和 Microsoft Word 作为有效示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T12:03:42.287

在工作中，我们使用 VSTO 成功完成了这项工作。

下面是我们在带有 Outlook 2007 的 VISTA 上运行的一些行的片段：（代码在 VB.net 中）。

请注意，在对 Outlook 对象执行某些操作时，该用法是安全锁定的。（将地址、身体和其他财产标记为安全风险）。我们使用第 3 方组件（赎回）来绕过这种安全性。如果您不使用某种安全管理器，Outlook 会弹出一个小窗口，提示外部正在尝试访问它，您可以在一段时间内授予它访问权限。

Outlook 界面的导入。

```
Imports Outlook = Microsoft.Office.Interop.Outlook 
```

这个例子是给你一些方向，而不是一个完整的工作例子。

```
dim MailItem As Microsoft.Office.Interop.Outlook.MailItem

' Lets initialize outlook object '
MailItem = OutlookSession.Application.CreateItem(Outlook.OlItemType.olMailItem)
MailItem.To = mailto

MailItem.Subject = communication.Subject
MailItem.BodyFormat = Outlook.OlBodyFormat.olFormatHTML
MailItem.HTMLBody = htmlBody

MailItem.Attachments.Add(filename, Outlook.OlAttachmentType.olByValue)

' If True is supplied to Display it will act as modal and is executed sequential. '
SafeMail.Display(True) 
```

上例中的 OutlookSession 来自此属性：

```
 Public ReadOnly Property OutlookSession() As Outlook.NameSpace
        Get
            If Not OutlookApplication Is Nothing Then
                Return OutlookApplication.GetNamespace ("MAPI")
            Else
                Return Nothing
            End If
        End Get
    End Property 
```

如您所见，它为此使用了 MAPI。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-16T17:31:16.343

只要您只是在电子邮件中设置属性而不阅读它们，您就不需要像上面建议的那样兑换 VB。这是一个简单的 VB 函数，用于通过 Outlook 显示/发送带有附件的电子邮件。（此代码引用 Microsoft Outlook 12.0 对象库，例如“C:\Program Files\Microsoft Office\Office12\MSOUTL.OLB”）。

```
Sub DoMail()
    Set objOL = CreateObject("Outlook.Application")
    Set objNewMail = objOL.CreateItem(olMailItem)

    Dim filename As String
    filename = "C:\\temp\\example.txt"

    With objNewMail
        .To = "cjoy@spam_me_not.com"
        .Subject = "test"
        .Body = "Test Body"
        .Attachments.Add filename, Outlook.OlAttachmentType.olByValue
    End With

    objNewMail.Display

    'objNewMail.Send
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T08:43:40.350

位低技术方法，但使用 mailto 处理程序你可以做到这一点

```
System.Diagnostics.Process.Start("mailto:something@somewhere.com?subject=hello&attachment=c:\\chicken.xls"); 
```

**注意**：正如所指出的，这可能不适用于所有客户端，因为它不是[mailto URL 规范](http://www.rfc-editor.org/rfc/rfc2368.txt)的一部分。最重要的是（至少在我的世界里）是 Outlook 2007 不支持它，而旧版本则支持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-26T09:36:03.587

我不确定您是否需要在 Outlook 中打开电子邮件，或者您是否只想从 c# 发送带有附件的电子邮件。我知道你在 Outlook 中写了 open，但你可能认为这是唯一的方法。如果您只想发送带有附件的电子邮件，可以执行如下操作。

```
#using System.Net.Mail;

SmtpClient smtpClient = new SmtpClient(host, port);

MailMessage message = new MailMessage(from, to, subject, body);
Attachment attachment = new Attachment(@"H:\attachment.jpg");
message.Attachments.Add(attachment);

System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential(username, password);
smtpClient.UseDefaultCredentials = false;
smtpClient.Credentials = SMTPUserInfo;
smtpClient.Send(message); 
```

您也可以在没有身份验证位的情况下执行此操作，具体取决于您的电子邮件服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-07T20:01:19.813

通过 Outlook 发送电子邮件的 C# 代码；不会出现安全警告。

```
var outlook = new ApplicationClass();
MailItem mailItem = (MailItem)outlook.Session.Application.CreateItem(Outlook.OlItemType.olMailItem);

mailItem.Display(false); 
```********************