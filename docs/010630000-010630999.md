# StackOverflow 问答 10630000-10630999

# jquery - 如何根据 onload 函数的结果显示 html 内容

> ID：10630001
> 
> 赞同：0
> 
> 时间：2012-05-17T04:52:21.240
> 
> 标签：jquery, html, jsp

我有 mainmenu.jsp、login.jsp 和 logout.jsp。流程如下

> login.jsp --->mainmenu.jsp ---> logout.jsp

第一个用户可以看到 login.jsp，成功登录后用户可以看到 mainmenu.jsp，点击注销按钮的用户会被转发到 logout.jsp 文件。在 logout.jsp 文件中，如果使用单击浏览器后退按钮，他/她可以看到上一页（mainmenu.jsp），但我想显示 login.jsp 页面。为了避免这种情况，我在加载主 menu.jsp 时使用 ajax 调用检查变量。我可以将页面重定向到 login.jsp。这是一个类似闪烁问题的问题。在服务器返回结果之前，我的 mainmenu.jsp 文件被加载。服务器返回结果后，页面被重定向到登录页面。我想限制当前页面加载，直到任何响应来自服务器。我怎样才能做到这一点？我在主菜单的加载中使用以下代码

```
$(window).load(function() {

                $.ajaxSetup({async:false});  //execute synchronously
                var isSessionExists = ""; 

                $.post("getSession", {}, function(data, textStatus, xhrObject) {
                    isSessionExists = data.split("=")[1];

                });
                $.ajaxSetup({async:true});
                if((isSessionExists.indexOf('NO')>=0)){
//                    alert("...inside condition...")
                    top.location="index.jsp";
                }else{
                    alert("....BREAK..."+isSessionExists)
                }

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:04:29.683

尝试在您的 jsp 中添加以下代码片段

```
<%
   response.setHeader("Pragma","no-cache"); // HTTP 1.0
   response.setHeader("Cache-Control","no-store"); // HTTP 1.1
   response.setDateHeader("Expires", 0);
%> 
```

还要通过这个出色的解释[防止注销后返回](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)

# c++ - 使用 C++ 的 OOP 设计模式

> ID：10630006
> 
> 赞同：1
> 
> 时间：2012-05-17T04:52:43.333
> 
> 标签：c++, oop, design-patterns

美好的一天

在哪里可以找到一份关于使用 C++ 的 OOP 设计模式的优秀介绍材料？

专门针对以下模式：

*   复合图案
*   观察者模式
*   蝇量级模式
*   序列化模式
*   单态模式
*   命令模式

任何信息、网站或书籍的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:00:05.220

我想你可以在很多书籍和资源中找到这些信息，我将向你指出一些你可以在网上找到的纸质和 PDF 格式的书籍：

1.  “设计模式，由“四人组”（Addison-Wesley，1994 年）。模式的权威指南。它在 C++ 和 Smalltalk 中都有示例，尽管可能有点难以理解。

2.  “Design Patterns for dummies”，Steve Holdner（Willey Publisinh Inc.，2006 年）这本书更简单，更容易理解/遵循。从计算机科学的角度来看，它可能有点“弱”或非正式，但我相信您可以从通过本书了解给定设计模式开始，并通过 GoF 出版物获得更详细/正式的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:57:29.647

[http://www.vincehuston.org/dp/](http://www.vincehuston.org/dp/)

# android - 我想删除列表项

> ID：10630007
> 
> 赞同：2
> 
> 时间：2012-05-17T04:52:54.287
> 
> 标签：android, listview

我正在制作一个显示新闻的应用程序。如果我不想显示“news_item1”，如何将其从列表中删除？有没有办法为“news_item1”设置不可见？

```
public View getView(int position, View convertView, ViewGroup parent) {
// Log.e("www", "getView " + position);
v = convertView;
if (v == null) {
    int res = 0;
    if (mItems.get(position).iType == 0)
        res = R.layout.news_item;
        else
            res = R.layout.news_item1;
        v = inflater.inflate(res, parent, false);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:43:19.783

尝试这个

```
if (v == null) {
    int res = 0;
    if (mItems.get(position).iType == 0){
        res = R.layout.news_item;
        v = inflater.inflate(res, parent, false);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:09:09.430

你可以访问这个链接

[http://developer.android.com/reference/android/view/View.html#attr_android:visibility](http://developer.android.com/reference/android/view/View.html#attr_android:visibility)

在那个 goto android:visibility 窗格中检查一下

android:visibility = “隐形”</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:12:33.563

只需将其添加到 XML 文件中。

```
android:visibility = "invisible" 
```

在 Java 代码中，使用`textView.setVisibility(View.VISIBLE);`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:25:18.903

使用列表适配器获取所需的子视图/列表项并将其从适配中删除，现在再次填充列表，即

```
listview.setAdapter(adapter); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T05:03:47.247

不过，它不是很清楚的问题，我知道您需要显示从索引 1 到数组大小的项目。

为此，请执行以下操作：

在 Adapter 中重写 getCount 方法并返回 size-1

在 Adapter 中重写 getItem 方法并返回 arr[position+1]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T05:05:12.897

当您获得列表视图的位置 1 时，您应该使用视图的 setVisibility 属性

```
v = inflater.inflate(res, parent, false);
v.setVisibility(View.GONE); 
```

# c# - 4层架构的工厂模式

> ID：10630008
> 
> 赞同：2
> 
> 时间：2012-05-17T04:52:59.747
> 
> 标签：c#, design-patterns

在我的项目中，我有 4 层演示文稿、BL、DL 和 dataObjects。我想实现抽象工厂模式来获得我想要的对象（医生/工程师）。下面的代码是否实现了工厂模式？

```
 public interface IProfessional //The Abstract Factory interface. 
{
    IProfession CreateObj();
}

// The Concrete Factory  class1.
public class DocFactory : IProfessional
{
    public IProfession CreateObj()
    {
        return new Doctor();
    }
}

// The Concrete Factory  class2.
public class EngFactory : IProfessional
{
    public IProfession CreateObj()
    {
        // IMPLEMENT YOUR LOGIC
        return new Engineer();
    }
}
// The Abstract Item class
public interface IProfession
{       
}

// The Item class.

public class Doctor : IProfession
{
  public int MedicalSpecialty
 {
  get; set; 
 }
  public int AreaofExpertise
 { 
  get; set; 
  }

}
// The Item class.
public class Engineer : IProfession
{
  public string Title{
     get;set;
}
  public int AreaofExpertise 
{ 
 get; set; 
}

}

// The Client class.
public class AssignProfession
{
    private IProfession _data;

    public AssignProfession(DataType dataType)
    {
        IProfessional factory;
        switch (dataType)
        {
            case DataType.Doc:
                factory = new EngFactory();
                _data = factory.CreateObj();//from here i will get engineer

                break;
            case DataType.Eng:
                factory = new DocFactory();
                _data = factory.CreateObj();//from here i will get doctor

                break;
        }
    }

    public IProfession GiveProfessional()
    {
        return _data;
    }
}

//The DataType enumeration.
public enum DataType
{
    Doc,
    Eng
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:15:03.363

您的代码确实实现了该模式，但没有达到 C# 允许的全部范围，换句话说 - 您没有使用 C# 语言的重要优势。

这是一个如何做得更好的示例：

```
 class Program
{
    static void Main(string[] args)
    {
        var myEngineer = ProfessionFactory.CreateProffession<Engineer>();
        var myDoctor = ProfessionFactory.CreateProffession<Doctor>();
        myEngineer.EnginerringStuff();
        myDoctor.HealingPeople();

        var myEngineer2 = (Engineer)ProfessionFactory.CreateProffession("Engineer");
        //using the other method I still have to cast in order to access Engineer methods.
        //therefore knowing what type to create is essential unless we don't care about engineer specific methods,
        //in that case we can do:
        var myEngineer3 = ProfessionFactory.CreateProffession("Engineer");
        //which is useless unless we start involving reflections which will have its own price..
    }

    public interface IProfessionFactory
    {
        IProfession CreateObj(); 
    }

    public interface IProfession : IProfessionFactory
    {
        string ProfessionName { get; }
    }

    public abstract class ProfessionFactory : IProfessionFactory
    {
        public abstract IProfession CreateObj();

        public static T CreateProffession<T>() where T:IProfessionFactory, new()
        {
            return (T)new T().CreateObj();
        }

        public static IProfession CreateProffession(object dataObj)
        {
            if (dataObj == "Engineer")
                return CreateProffession<Engineer>();
            if (dataObj == "Doctor")
                return CreateProffession<Doctor>();
            throw new Exception("Not Implemented!");
        }
    }

    public class Engineer : IProfession
    {
        public string ProfessionName
        {
            get { return "Engineer"; }
        }

        public IProfession CreateObj()
        {
            return new Engineer();
        }

        public void EnginerringStuff()
        {}
    }

    public class Doctor : IProfession
    {
        public string ProfessionName
        {
            get { return "Doctor"; }
        }

        public IProfession CreateObj()
        {
            return new Doctor();
        }

        public void HealingPeople()
        {}
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:01:16.003

它似乎具有该模式的所有元素，但是您的 IProfession 是空的。我将假设这只是一个占位符，您将用一些代表所有职业共有的行为的方法来填充它。[与 Allen Holub 的书中](http://www.holub.com/goodies/patterns/)给出的示例进行对比， 他提到 Collection 作为 AbstractFactory，Iterator 作为抽象产品，Tree 作为具体工厂，迭代器作为具体产品返回。

# unity3d - 使用 touchmove 将 texture2d 旋转到 540 度

> ID：10630014
> 
> 赞同：0
> 
> 时间：2012-05-17T04:53:51.930
> 
> 标签：unity3d

我的 gui 屏幕上有一个 2d 纹理。我想用手指触摸旋转这个纹理直到 +540 和 -540 度。超过这个限制它应该停止旋转。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:45:18.037

我相信你不能旋转 GUI 纹理。我想做你想做的最好的方法是将一个平面作为一个孩子分配给面向它的相机，然后根据需要旋转那个平面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T06:32:54.180

```
public Texture2D steering;
    public static TouchControl Instance;
    public float angleRotate=0f;
    public float carRotation=0f;
    public int finger;

    private Matrix4x4 savedMatrix;  
    private float steerAngleRad;
    public float steerAngleDeg;
    private float steerAngleRadTemp;
    public float steerAngleDegTemp;
    private float dx=0f;
    private float dy=0f;
    private int i;
    private float newAngle =0f;
    private float initAngle;
    private float rotationLimit=540f;
    public float secondWheelRot=0f;
    private float preRotDeg=0f;
    private float angleDiff=0f;
    private bool clockWheel=false;
    private bool onlyOnce=false;

    private Vector2 steeringPos;
    private Vector2 centre;
    private bool inXRange=false;
    private bool inYRange=false;
//  private bool moving=false;
    private float steeringWidth=0f;
    private float steeringHeight=0f;

    private float gobackSpeed=20f;

    void Start()
    {
        Instance=this;
        i=0;
        finger=3;
        steeringPos=new Vector2(Screen.width*0.025f,Screen.height*0.68f);
        steeringWidth=Screen.width*0.12f;
        steeringHeight=steeringWidth;
        centre = new Vector2(steeringPos.x + steeringWidth / 2, steeringPos.y + steeringHeight / 2);
    }

    void Update()
    {

        if(Input.touchCount>0 && (!PauseButton.pauseFlag && !DamageBar.Instance.levelLost && !GameTimer.Instance.levelLost && !CommonIndicator.Instance.levelComplete))
        {   
            for(i=0;i< Input.touchCount; ++i)
            {
                if(Input.GetTouch(i).position.x > 0f && Input.GetTouch(i).position.x < steeringWidth+Screen.width*0.1f)
                {
                    inXRange=true;
                }
                else
                {
                    inXRange=false;
                }
                if(Input.GetTouch(i).position.y > 0f && Input.GetTouch(i).position.y < Screen.height-(steeringPos.y))
                {
                    inYRange=true;
                }
                else
                {
                    inYRange=false;
                }

                ///////////////if touch is in the range/////////////////////
                if(inXRange && inYRange)
                {
                    if(Input.GetTouch(i).phase==TouchPhase.Began)
                    {
                        finger=Input.touches[i].fingerId;
                        dx=Input.GetTouch(i).position.x-centre.x;
                        dy=Input.GetTouch(i).position.y-(Screen.height-centre.y);
                        steerAngleRadTemp=Mathf.Atan2(dy,dx);
                        steerAngleDegTemp=-steerAngleRadTemp*Mathf.Rad2Deg;
                    }
                    if((Input.GetTouch(i).phase==TouchPhase.Stationary || Input.GetTouch(i).phase==TouchPhase.Moved))
                    {
                        preRotDeg=newAngle;
                        if(preRotDeg<-180f && preRotDeg>-360f)
                        {
                            preRotDeg+=360f;
                        }
                        if(preRotDeg>180f && preRotDeg<360f)
                        {
                            preRotDeg-=360f;
                        }
                        dx=Input.GetTouch(i).position.x-centre.x;
                        dy=Input.GetTouch(i).position.y-(Screen.height-centre.y);
                        steerAngleRad=Mathf.Atan2(dy,dx);
                        steerAngleDeg=-steerAngleRad*Mathf.Rad2Deg;
                        angleRotate=steerAngleDeg-steerAngleDegTemp;
                        newAngle=angleRotate;
                        if(newAngle<-180f && newAngle>-360f)
                        {
                            newAngle+=360f;
                        }
                        if(newAngle>180f && newAngle<360f)
                        {
                            newAngle-=360f;
                        }
                        if(!onlyOnce)
                        {
                            onlyOnce=true;
                            if(newAngle>preRotDeg)
                                clockWheel=true;
                            else
                                clockWheel=false;
                        }
                        if(clockWheel && preRotDeg>0f && newAngle < 0f)
                        {
                            clockWheel=true;
                        }
                        else if(clockWheel && preRotDeg<0f && newAngle >0f)
                        {
                            clockWheel=true;
                        }
                        else if(!clockWheel && preRotDeg>0f && newAngle <0f)
                        {
                            clockWheel=false;
                        }
                        else if(!clockWheel && preRotDeg<0f && newAngle >0f)
                        {
                            clockWheel=false;
                        }
                        else if(newAngle>preRotDeg)
                        {
                            clockWheel=true;
                        }
                        else if(newAngle<preRotDeg)
                        {
                            clockWheel=false;
                        }
                        if(Mathf.Abs(newAngle)>Mathf.Abs(preRotDeg))
                        {
                            angleDiff=Mathf.Abs(newAngle)-Mathf.Abs(preRotDeg);
                        }
                        else
                        {
                            angleDiff=Mathf.Abs(preRotDeg)-Mathf.Abs(newAngle);
                        }
                        if(clockWheel)
                        {
                            carRotation+=angleDiff;
                            secondWheelRot+=angleDiff;
                            if(secondWheelRot>rotationLimit)
                            {
                                secondWheelRot=rotationLimit;
                            }
                        }
                        else
                        {
                            carRotation-=angleDiff;
                            secondWheelRot-=angleDiff;
                            if(secondWheelRot<-rotationLimit)
                            {
                                secondWheelRot=-rotationLimit;
                            }   
                        }
                    }
//                  else
//                  {
//                      steeringToZero();                       
//                  }
                    if(Input.GetTouch(i).phase==TouchPhase.Ended)// && Input.touches[i].fingerId != AccControl.Instance.finger)
                    {
                        onlyOnce=false;
                        carRotation=0f;
                        angleRotate=0f;
                        newAngle=0f;
                        steeringToZero();
                        finger=3;
                    }
                }
                else if(!AccControl.Instance.onPadTouch && finger==3)
                {
                    steeringToZero();                       
                }
            }
        }
        else if(Input.touchCount==0)
        {
            steeringToZero();
        }
        if(Input.touchCount==1 && AccControl.Instance.onPadTouch)
        {
            steeringToZero();
        }
        if (Input.GetKeyDown(KeyCode.Escape) && !PauseButton.pauseFlag) 
        { 
            Application.LoadLevel("MainMenu");
        }
    }
    void steeringToZero()
    {
        if(secondWheelRot>0)
        {
            secondWheelRot-=gobackSpeed/(Input.touchCount+1);
        }
        else if(secondWheelRot<0)
        {
            secondWheelRot+=gobackSpeed/(Input.touchCount+1);
        }
        if(secondWheelRot<gobackSpeed && secondWheelRot>-gobackSpeed)
        {
            secondWheelRot=0f;
        }

    }

    void OnGUI() 
    {
        savedMatrix = GUI.matrix;
        GUIUtility.RotateAroundPivot(carRotation,centre);
        GUI.DrawTexture(new Rect(steeringPos.x,steeringPos.y, steeringWidth, steeringHeight), steering);
        GUI.matrix = savedMatrix;
    } 
```

# c# - 性能意义上哪个更正确

> ID：10630018
> 
> 赞同：-1
> 
> 时间：2012-05-17T04:53:58.450
> 
> 标签：c#

我有一个问题..

哪个有更有效的性能？或者哪些需要更少的时间来执行，**为什么**？

```
session["var"].ToString() 
```

或者

```
(string)session["var"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:01:41.070

取决于此会话 var 的对象类型，如果您知道它是字符串，则选项 2 是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:01:44.147

ToString() 是一种方法， (string) 是强制转换（显式）。IMO 铸造总是很快

> 引用类型之间的强制转换操作不会改变底层对象的运行时类型；它只会更改用作对该对象的引用的值的类型。
> 来源：[显式转换](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

.ToString() 可以从任何对象调用。该方法继承自对象类，可以重载

.(string) 是强制转换，它不是函数调用。当确定对象已经在字符串中时应该使用它，当它无法转换为包含null的字符串时会抛出异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:02:27.123

后者表现更好，只需将值转换为不同的类型。前者涉及方法调用和/或新对象的创建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:07:51.900

这两个调用正在执行非常不同的操作（除非您确定该值是字符串）。因此，询问哪个更快并不完全正确。

两种方式都有参数，其中一种会更快，因为这两种操作都需要调用函数。正确的方法是原型和测量。

请注意，从 Session 访问数据将成为您的主要性能瓶颈是不可能的（尤其是在 SQL 或其他进程外会话状态的情况下）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T05:34:40.417

ToString() 在对象为空时引发异常。因此在 object.ToString() 的情况下，如果 object 为 null，则会引发 NullReferenceException。Convert.ToString() 在 null 对象的情况下返回 string.Empty。(string) cast 在 null 的情况下分配对象。所以万一

```
MyObject o = (string)NullObject; 
```

但是当你使用 o 访问任何属性时，它会引发 NullReferenceException。

Convert.ToString 在内部使用 value.ToString。转换为字符串更便宜，因为它不需要外部函数调用，只需要内部类型检查。将 Object 转换为 String 至少比调用 Object.toString() 快两倍

# ruby-on-rails - wicked_pdf 在 css 文件中使用图像标签助手

> ID：10630020
> 
> 赞同：2
> 
> 时间：2012-05-17T04:54:04.103
> 
> 标签：ruby-on-rails, css, asset-pipeline, wicked-pdf

我将 wicked_pdf 插件与 rails 3.2 项目和资产管道一起使用。我想在 pdf.css.erb 中定义我的图片

这是我使用布局文件的控制器代码：

```
 respond_to do |format|
      format.html
      format.pdf do
        render :pdf => "Cars.pdf",
        :template => "reports/cars.html.haml",
        :page_size => "A4",
        :layout => "pdf.html",
        :handlers => [:haml]
      end
    end 
```

这是我的布局文件，其中包含我的 pdf.css.erb 文件。

```
!!!
%html
    %head
        = wicked_pdf_stylesheet_link_tag "pdf"
        = csrf_meta_tag
    %body
        .contentbg
            .logo
            .content= yield 
```

最后这是我的 CSS

```
.logo {
    background: wicked_pdf_image_tag "logo.jpg";
    width: 100px;
    height: 80px;
} 
```

这没有找到 logo.jpg。如果我将 wicked_pdf_image_tag "logo.jpg" 行直接放在我的 pdf.html.haml 模板布局文件中，那么它会在生成的 pdf 中呈现我的徽标。

是否可以在 css.erb 文件中使用 wicked_pdf_image_tag 助手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:48:31.987

这在 css.erb 文件中不起作用，首先是因为它缺少 erb 标签，但主要是因为 wicked_pdf_image_tag 会将其扩展为：

```
.logo {
  background: <img src="file://foo/bar/public/images/logo.jpg">;
} 
```

这不是有效的CSS。最好的办法是手动构建它，如下所示：

```
.logo {
  background: url(<%= Rails.root.join('assets','images','logo.jpg').to_s %>);
} 
```

拥有直接文件访问路径的原因是 wkhtmltopdf 不必发出网络请求来获取资产，因此加载速度更快。

# c# - 如何解决 .Net SqlClient 数据提供程序中发生的错误？

> ID：10630021
> 
> 赞同：1
> 
> 时间：2012-05-17T04:54:14.377
> 
> 标签：c#

请任何人帮助我：

我运行我的应用程序是用 C# 创建的，用于导出数据源 t XML 文档，我还使用 try catch 方法来纠正数据库访问错误（`adapter.Fill(ds)`）。问题如下图所示。

```
n_org:SELECTs_department.did,s_department.name,s_department.fk_deptFROMs_department

Index #0
Message: Incorrect syntax near ','.
LineNumber: 1
Source: .Net SqlClient Data Provider
Procedure: 
```

请提供建议或任何正确的代码都可以。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:15:26.420

您的`SELECT`陈述完全错误-任何地方都没有空格！

而不是你现在拥有的：

```
SELECTs_department.did,s_department.name,s_department.fk_deptFROMs_department 
```

使用**具有**必要空格的语句 - 如下所示：

```
SELECT s_department.did, s_department.name, s_department.fk_dept FROM s_department 
```

# visual-studio - 如何使用英特尔 Visual Fortran 编译器在 Visual Studio 2008 中自动完成 Fortran90 代码？

> ID：10630024
> 
> 赞同：4
> 
> 时间：2012-05-17T04:54:29.643
> 
> 标签：visual-studio, fortran

众所周知，Visual Studio 对 C# 代码自动完成和 IntelliSense 提供了很好的支持。

现在我已经将 Intel Visual Fortran Compiler 集成到 Visual Studio 2008 中，并且想让 Visual Studio 也提供对 Fortran 90 代码 IntelliSense 的支持！

如何处理？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-05T13:50:03.823

有点晚了，但您可能想查看[Fortran Code Nav](http://publicwiki.deltares.nl/display/FCN/Home)

它是 Visual Studio（2008、2010 和 2012）的（免费）插件，为 Fortran 90 提供 Intellisense。此外，它还具有一些“受 ReSharper 启发”的跳转/搜索功能。

我在业余时间为一些同事创建了这个工具，所以它不是生产质量，但它应该能够解析大多数 fortran 结构，并且据我所知，它在更大的解决方案上也能顺利执行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T10:54:58.970

它没有 -从英特尔软件网络中看到[这个线程。](http://software.intel.com/en-us/forums/showthread.php?t=78879)英特尔当时并没有计划支持 Fortran 的 IntelliSense，如今情况也没有太大变化。他们的 Fortran 编辑器甚至缺少一些基本的东西，比如`end ...`语句的自动缩进。

我不是 Windows Fortran 用户，但我会寻找更好的 IDE。Eclipse + [Photran](http://www.eclipse.org/photran/)怎么样？我认为它支持 Intel Fortran 编译器并提供了一些不错的编辑功能，包括一些高级（对于 Fortran IDE）重构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:42:44.413

可悲的是（？）你会徒劳地寻找 Fortran 中的 Intellisense。自从写下[这个问题的答案](https://stackoverflow.com/questions/3473854/best-fortran-ide)以来，我认为情况没有改变。

我，我所有的 Fortran 编写和编辑都使用 Emacs，Visual Studio 主要用于管理 Fortran 编译、调试等。

# wpf - Creating a custom Stackpanel with Transparent "Windows"

> ID：10630031
> 
> 赞同：1
> 
> 时间：2012-05-17T04:55:25.890
> 
> 标签：wpf, c#-4.0, wpf-controls

Good evening. I have been researching my issue for about two days now, and have tried at least a dozen variations of the problem. Every single last one of them has been a complete total failure, so I won't bother posting any code here.

What I need is a StackPanel for a Border-less Window. The StackPanel needs to have an opaque background, and the children need to have a transparent background. I need the transparency to carry ALL the way through the child element, StackPanel, and underlying main window.

Does anyone have any idea as to how to go about this, and where I should start? I am an intermediate level programmer, and have hit a solid wall here. I have tried to inherit from Panel Class, over-riding the usual suspects; MeasureOverride, ArangeOveride, OnRender, etc..

One of the thoughts I also had, was using some form or another of CombinedGeometry between the parent, and all child nodes.

Thanks in advance!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:23:02.023

What you are probably missing is [`Window.AllowsTransparency="True"`](http://msdn.microsoft.com/en-us/library/system.windows.window.allowstransparency%28v=vs.100%29.aspx). Sad to say that you have to build your own window title and border because `WindowStyle` property must be set to `None`.

I've created a sample for you:

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStyle="None"
        WindowStartupLocation="CenterScreen">
    <Border BorderBrush="Black" BorderThickness="1">        
        <DockPanel>
            <Menu DockPanel.Dock="Top">
                <MenuItem Header="Application">
                    <MenuItem Header="_Close" Click="MenuItem_Click"/>
                </MenuItem>
            </Menu>
            <ToolBar DockPanel.Dock="Bottom">
                <Button>sample button</Button>
            </ToolBar>
            <StackPanel>
                ... your whiteboard ...
            </StackPanel>
        </DockPanel>
    </Border>
</Window> 
```

.

```
private void MenuItem_Click(object sender, RoutedEventArgs e)
{
    this.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:13:05.690

好的，所以经过许多小时的蛮力“黑客攻击”，我设法找到了一种方法来完成我所需要的。

```
<Border Name="OuterBorder" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" BorderBrush="Orange" BorderThickness="1.5">
    <Border Name="FillerStrip" BorderBrush="Black" BorderThickness="20">
        <Border Name="InnerBorder" BorderBrush="Orange" BorderThickness="1.5">
            <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent">
                <local:GlassBoardControl BorderBrush="Orange"            BorderThickness="2" AxisBrush="LawnGreen" AxisThickness="15" x:Name="screen" />

            </StackPanel>
        </Border>    
    </Border>
</Border> 
```

现在我唯一的问题是我到底该如何创建一个自定义面板作为它的边框？关于我应该从哪里开始的任何想法将不胜感激。

# javascript - 使用 jQuery 的目标伪类

> ID：10630037
> 
> 赞同：2
> 
> 时间：2012-05-17T04:56:35.850
> 
> 标签：javascript, jquery, css, pseudo-class

我无法访问的样式表中有以下两种样式：

```
a:link {
  font-size: 150%;
}

a:hover {
  font-size: 150%;
} 
```

使用 jQuery，如何将 a:link 和 a:hover 的字体大小更改为 100%。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T05:17:21.077

@Phil 在上面的评论中是正确的，可以直接添加规则。`<style/>`可以在运行时附加一个元素，该元素`<head/>`将触发页面重新渲染（？）并且将应用新样式！[从小提琴](http://jsfiddle.net/ovfiddle/hxADc/)：

```
$('head').append('<style type="text/css">a:hover{color:red !important;}</style>'); 
```

出于某种原因，`head`选择器对我来说看起来不正确，但是嘿，它有效！在 5 秒内将鼠标悬停在链接上（为了论证），它将被样式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:59:49.030

假设您只需要 jQuery，您可以使用以下代码（只需确保在从远程文件导入上述 css 后编写此脚本）

```
$(document).ready(function(){
    $('a').on('hover',function(){
        $(this).css({'font-size':'100%'});
    }).css({'font-size':'100%'});    
});​ 
```

虽然您也可以通过向页面添加简单样式并附`!important`加到规则来做到这一点

```
<style type="text/css">
a:link {
  font-size: 100% !important;
}

a:hover {
  font-size: 100% !important;
}
</style> 
```

[JSFiddle 示例](http://jsfiddle.net/lonewolfs/S48SG/)

# c# - C#: Why are accessibility modifiers for members optional (rather than required)?

> ID：10630039
> 
> 赞同：1
> 
> 时间：2012-05-17T04:56:58.783
> 
> 标签：c#, access-specifier

I've read this very well written [blog post](http://blogs.msdn.com/b/ericlippert/archive/2010/06/10/don-t-repeat-yourself-consts-are-already-static.aspx) by Eric Lippert, but it doesn't explain the specific case of accessibility modifiers.

Conventional stackoverflow [wisdom](https://stackoverflow.com/a/8479237/297451) says to always specify "private" explicitly, which would imply that members should have required the modifier.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:04:38.440

好吧，如果未定义，就没有设置默认修饰符。在 C# 中，即使您没有指定，也会设置默认修饰符，有时您可能想知道您的程序执行方式的默认修饰符（预期结果）。

, `enum`, `struct`or`class`将默认为`internal`在典型条件下（在命名空间中或仅在文件中单独坐在那里），但`private`在结构或类中声明时将默认为。

所有方法、字段和属性都具有默认访问修饰符为“私有”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:16:18.373

可能 C# 的设计者想要并喜欢关于是否包含退款访问修饰符的“宗教”斗争？

（在只有一个访问级别可能的情况下，访问修饰符通常是*不允许*的：例如，接口或枚举的成员始终是`public`但不允许编写它。`partial`方法始终是`private`但您不能编写它。由于`static`构造函数不能被显式调用，因此没有有意义的访问级别。显式接口实现对于直接调用并不真正可见，但可以通过接口类型自由访问（如果接口类型从外部可见）。命名空间可以没有访问修饰符。）

与您建议的相反规则当然是一条规则，即不允许指定不改变任何内容的修饰符。这意味着命名空间的直接成员（包括隐含的“全局命名空间”）不能显式声明`internal`，并且类或结构的成员（包括嵌套类型）不能具有关键字`private`。有些人使用这个约定。

请注意，属性和索引器的 getter 和 setter 不能指定冗余访问级别。这里唯一允许的是两个访问器中的一个（在这种情况下必须有两个）来指定更严格的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-19T21:18:43.363

与此类问题的通常情况一样，确定的答案只能来自创建该语言的人（当然，假设文档中没有解决）。

但可以肯定地假设这是因为，[用 David Naugler 的话来说](https://en.wikipedia.org/wiki/C_Sharp_(programming_language)#cite_note-influenced_by_CPP-6)，除了是一种基于 C 的语言之外，“ *C# 还受到 Java [和] C++ 的强烈影响，最好将其视为两者的后代（ ……）。* ”

作为旁注，Turbo Pascal 的原作者和 Delphi 的首席架构师[Anders Hejlsberg也是](https://en.wikipedia.org/wiki/Anders_Hejlsberg)[创建 C#](https://en.wikipedia.org/wiki/C_Sharp_(programming_language)#History)背后的首席架构师。

我意识到这是在回避这个问题，所以你现在可能会问为什么 C++ 最初允许可选的可见性修饰符 =p

# sas - How do you specify a variable to be binary in SAS?

> ID：10630043
> 
> 赞同：0
> 
> 时间：2012-05-17T04:57:16.373
> 
> 标签：sas

Suppose we have the following:

```
 proc optmodel;
     var  x{1..3} <= 1 integer; 
```

I want the variables to be 0 and 1 only. How do I specify this in the above statement?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:22:21.083

认为您可以直接指定如下：

```
proc optmodel;
 var  x{1..3} binary; 
```

# google-sheets - 使用单元格值为 Google Docs 中的单元格着色

> ID：10630044
> 
> 赞同：-1
> 
> 时间：2012-05-17T04:57:20.133
> 
> 标签：google-sheets, cmyk

任何人都知道是否可以用它们的值为 Google Docs 电子表格的单元格着色？单元格填充有 CMYK 代码。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:28:40.360

我为 Rails 编写了一个粗略的 CMYK 到 RGB 转换器，该逻辑可以应用于任何地方。见下文。

```
def paint(co1)
  c1, m1, y1, k1 = co1.split(",") 
  c2, m2, y2, k2 = co2.split(",") 

  c1 = c1.to_i*2.55 
  m1 = m1.to_i*2.55 
  y1 = y1.to_i*2.55 
  k1 = k1.to_i*2.55 

  if c1.to_i + k1.to_i < 255 
    @r1 = 255 - (c1.to_i + k1.to_i) 
  else 
    @r1 = 0 
  end 

  if m1.to_i + k1.to_i < 255 
    @g1 = 255 - (m1.to_i + k1.to_i) 
  else 
    @g1 = 0 
  end 

  if y1.to_i + k1.to_i < 255 
    @b1 = 255 - (y1.to_i + k1.to_i) 
  else 
    @b1 = 0 
  end 

  return @r1, @b1, @g1
end 
```

# c# - Regular Expression to split a string with comma and double quotes in c#

> ID：10630049
> 
> 赞同：3
> 
> 时间：2012-05-17T04:57:43.487
> 
> 标签：c#, regex, string

I have tried a regular expression to split a string with comma and space. Expression matches all the cases except only one. The code I have tried is:

```
 List<string> strNewSplit = new List<string>();
        Regex csvSplit = new Regex("(?:^|,)(\"(?:[^\"]+|\"\")*\"|[^,]*)", RegexOptions.Compiled);
        foreach (Match match in csvSplit.Matches(input))
        {
            strNewSplit.Add(match.Value.TrimStart(','));
        }
        return strNewSplit; 
```

**CASE1: "MYSQL,ORACLE","C#,ASP.NET"**

**EXpectedOutput:**

"MYSQL,ORACLE"

"C#,ASP.NET"

**RESULT : PASS**

**CASE2: "MYSQL,ORACLE", "C#,ASP.NET"**

**ExpectedOutput:**

"MYSQL,ORACLE"

"C#,ASP.NET"

**Actual OutPut:**

"MYSQL,ORACLE"

"C#

ASP.NET"

**RESULT: FAIL.**

If I provide a space after a comma in between two DoubleQuotes then I didn't get appropriate output. Am I missing anything? Please provide a better solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:20:37.230

我通常写下我的输入的 EBNF 来解析。

在你的情况下，我会说：

List = ListItem {Space* , Space* ListItem}*;

ListItem = """ 标识符 """; // 标识符就是一切“

空格 = [\t]+;

这意味着一个 List 由一个 ListItem 组成，该 ListItem 后跟零个或多个 (*) ListItems，这些 ListItems 用空格分隔，逗号和空格。

这将我引向以下内容（您正在搜索 ListItems）：

```
static void Main(string[] args)
{
    matchRegex("\"MYSQL,ORACLE\",\"C#,ASP.NET\"").ForEach(Console.WriteLine);
    matchRegex("\"MYSQL,ORACLE\", \"C#,ASP.NET\"").ForEach(Console.WriteLine);
}
static List<string> matchRegex(string input)
{
    List<string> strNewSplit = new List<string>();
    Regex csvSplit = new Regex(
        "(\"(?:[^\"]*)\")"
        , RegexOptions.Compiled);
    foreach (Match match in csvSplit.Matches(input))
    {
       strNewSplit.Add(match.Value.TrimStart(','))
    }
    return strNewSplit;
} 
```

哪个返回你想要的。希望我理解正确。

# asp.net - 什么是错误？（在 asp.net 中发送电子邮件）

> ID：10630050
> 
> 赞同：0
> 
> 时间：2012-05-17T04:57:51.153
> 
> 标签：asp.net, email, dns, smtpclient

我正在使用此代码在 asp.net 中发送电子邮件：

使用 System.Net.Mail

```
public string SendEmail()
{
    SmtpClient obj = new SmtpClient();
    MailMessage Mailmsg = new MailMessage();
    Mailmsg.To.Clear();

    Recievers = new MailAddressCollection();
    Recievers.Add(txtToAddress.Text);
    SenderName = "Info";
    SenderEmail = txtFromAddress.Text;
    Subject = "subj";
    Body = "body";
    UseBcc = false;

    if (UseBcc)
    {
        foreach (MailAddress RecieverItem in Recievers)
        {
            Mailmsg.Bcc.Add(RecieverItem);
        }
    }
    else
    {
        foreach (MailAddress RecieverItem in Recievers)
        {
            Mailmsg.To.Add(RecieverItem);
        }
    }

    Mailmsg.From = new MailAddress(SenderEmail, SenderName, System.Text.Encoding.UTF8);
    Mailmsg.Subject = Subject;
    Mailmsg.SubjectEncoding = Encoding.UTF8;
    Mailmsg.BodyEncoding = System.Text.Encoding.UTF8;
    Mailmsg.IsBodyHtml = false;

    obj.Host = mail.domain.com;

    System.Net.NetworkCredential BasicAuthenticationInfo = new System.Net.NetworkCredential("info@domain.com", "password");

    obj.UseDefaultCredentials = false;
    obj.Credentials = BasicAuthenticationInfo;

    Mailmsg.Body = Body;
    Mailmsg.IsBodyHtml = true;
    try
    {
        obj.Send(Mailmsg);
        return "sent";
    }
    catch (Exception ex)
    {
        return ex.ToString();
    }
} 
```

它正确地向我的域中定义的接收者发送电子邮件（如**mail@domain.com**），但我无法将电子邮件发送到其他邮件服务器（如**mail@yahoo.com**）。

我的代码有什么问题？

（它可能与 SmtpClient 属性有关吗？我已将 smtpclient.host 设置为**mail.mydomain.com** 并使用在我的域中定义的我的一个邮件帐户的用户名和密码）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T05:02:55.367

它必须与您的交换服务器有关。作为交换，有一些传输规则定义了您如何与外界通信。

[http://www.msexchange.org/articles_tutorials/exchange-server-2007/management-administration/restricting-users-send-receive-external-messages-exchange-server-2007.html](http://www.msexchange.org/articles_tutorials/exchange-server-2007/management-administration/restricting-users-send-receive-external-messages-exchange-server-2007.html)

您在向外部网络发送电子邮件时一定遇到了一些异常

```
System.Net.Mail.SmtpFailedRecipientException: Mailbox unavailable. The server response was: 5.1.1 User unknown
   at System.Net.Mail.SmtpTransport.SendMail(MailAddress sender, MailAddressCollection recipients, String deliveryNotify, SmtpFailedRecipientException& exception) 
```

如果这是错误，则表示您的交易所不支持直接向外部网络发送电子邮件。因为我不是 MS 交换专家，但我一直在使用在我的网络中配置的交换服务器，它无法向外部网络发送电子邮件，但我们启用了将电子邮件转发给联系人。

可能这可以帮助你。[http://www.petri.co.il/configuring-exchange-2007-send-connectors.htm](http://www.petri.co.il/configuring-exchange-2007-send-connectors.htm)

我也建议你在[https://serverfault.com/上分享这个问题](https://serverfault.com/)

# windows - Win 7 64bit gmcs hello.cs -pkg:gtk-sharp-2.0 上的 Mono 开发环境找不到文件

> ID：10630051
> 
> 赞同：3
> 
> 时间：2012-05-17T04:57:56.380
> 
> 标签：windows, mono, gtk#

我下载了 Mono 并将其安装在 Win 7 64bit 上

我去了这个网站按照说明[http://www.mono-project.com/Mono_Basics](http://www.mono-project.com/Mono_Basics)

我打开单声道命令提示符并编译并运行控制台 hello world

然后我尝试用

```
gmcs hello.cs -pkg:gtk-sharp-2.0 
```

我明白了

```
C:\Code\NoControl\Mono>gmcs hello.cs -pkg:gtk-sharp-2.0
error CS0006: Metadata file `C:/PROGRA\~2/MONO-2\~1.8/lib/mono/gtk-sharp-2.0/pango-sharp.dll' could not be found
error CS0006: Metadata file `C:/PROGRA\~2/MONO-2\~1.8/lib/mono/gtk-sharp-2.0/atk-sharp.dll' could not be found
error CS0006: Metadata file `C:/PROGRA\~2/MONO-2\~1.8/lib/mono/gtk-sharp-2.0/gdk-sharp.dll' could not be found
error CS0006: Metadata file `C:/PROGRA\~2/MONO-2\~1.8/lib/mono/gtk-sharp-2.0/gtk-sharp.dll' could not be found
error CS0006: Metadata file `C:/PROGRA\~2/MONO-2\~1.8/lib/mono/gtk-sharp-2.0/glib-sharp.dll' could not be found
Compilation failed: 5 error(s), 0 warnings 
```

我该如何解决？

这与此处[无法使用](https://stackoverflow.com/questions/9136748/cannot-compile-hello-cs-for-gtk-using-mono-command-prompt)未回答的单命令提示符为 gtk# 编译 hello.cs 的问题类似。

*   -pkg 在 Windows 上工作吗？
*   我需要下载一些额外的东西吗？
*   缩写路径提到 ~1.8/ 是否应该说 ~10.8 表示我的单声道版本是 2.10.8？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T00:54:39.930

这些是指出问题根本原因的有用答案。但是，到目前为止，最简单的解决方案是将 Mono 安装到名称中没有空格的文件夹中。安装时，只需选择“C:\SDK\Mono”之类的内容。问题解决了，不需要任何时髦的解决方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T15:34:04.677

我发现在 Windows 7 上工作的解决方法是 Mono 已安装为“程序文件”的子目录，即在 C: 的根目录中创建一个文件夹来保存目录链接（例如称为 MonoLinks .. NB 没有空间在名称中），然后从命令提示符进入该目录并创建一个目录连接，为其命名不包含空格。

```
C:\MonoLinks>mklink /J Mono "C:\Program Files\Mono-2.10.8" 
```

这具有创建名为 Mono 的可遍历目录（链接）的效果，该目录不仅会显示 Mono 安装的内容，而且程序可以访问而无需转换为其原始路径名。这可以很容易地在 C: 的根目录中创建，但是如果需要，在那里有一个通用文件夹 (MonoLinks) 允许在其中创建其他链接，而不会弄乱 C: 的根目录。

接下来的事情（无论如何都必须完成，因为在安装期间未更新 PATH 环境变量）是更新 PATH 环境变量，使其指向安装中的 bin 目录。在控制面板的用户帐户中，选择更改我的环境变量并编辑要包含的 PATH 变量`C:\MonoLinks\Mono\bin`（即在 PATH 属性文本的末尾添加分号和路径）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T18:41:24.020

`-pkg`在 Windows 上似乎有缺陷。在干净的命令提示符下，如果`Program Files\Mono\bin`您输入 PATH，`gmcs`将会阻塞语法并给出关于`Files\Mono\...`的错误，指示与路径名中的空格相关的错误。如果您`PROGRA~1\MONO\bin`使用 PATH 或使用 Mono 命令提示符，它将阻塞并给出有关`PROGRA\~1/MONO/...`的错误，指示与波浪号（等）相关的错误并转义它们。

请注意，尽管我给出了 32 位示例，但没有理由不将其应用于 64 位版本，`PROGRA~2`并且`Program Files (x86)`.

我发现的一种解决方法是`-r[eference]`使用完整路径根据 pkg-config 返回的信息为 gmcs 提供单个参数。尝试：

```
gmcs hello.cs -r:C:/PROGRA~2/MONO-2~1.8/lib/mono/gtk-sharp-2.0/gtk-sharp.dll
              -r:C:/PROGRA~2/MONO-2~1.8/lib/mono/gtk-sharp-2.0/gdk-sharp.dll
              ... 
```

或者更好：

```
gmcs hello.cs -r:"C:\Program Files (x86)\Mono-2.10.8\lib\mono\..." -r:"..." 
```

（即完整路径）

如果您使用的是 NAnt，请尝试删除`<pkg-references/>`并添加：

```
<include name="C:\Program Files\Mono\lib\mono\gtk-sharp-2.0\gtk-sharp.dll" />
<include name="C:\Program Files\Mono\lib\mono\gtk-sharp-2.0\gdk-sharp.dll" />
... 
```

下`<references/>`。

请原谅我使用不一致和不完整的路径名；此答案旨在作为指南，而不是复制粘贴解决方案。

# python - How to trigger a reminder mail for an event using Plone 4.1

> ID：10630056
> 
> 赞同：1
> 
> 时间：2012-05-17T04:58:23.090
> 
> 标签：python, plone

I would like to trigger a mail as reminder for an event, 2 days before the actual event occurs. How do I achieve this. Is there any sample code for the same which I could access.I am using Plone 4.1 with default zope. In short it should be a time based event.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:33:33.000

我还没有尝试过，但我相信这个插件应该做你想做的事[http://plone.org/products/collective.topicitemsevent](http://plone.org/products/collective.topicitemsevent)

# bash - 为什么这个简单的 bash 陷阱会失败

> ID：10630059
> 
> 赞同：4
> 
> 时间：2012-05-17T04:58:39.263
> 
> 标签：bash, bash-trap, shell-trap

我对 bash 脚本还是很陌生，我很难弄清楚为什么这个简单的陷阱没有按预期工作。

**目标**- 创建一个可以通过按`CTRL`+跳过的可选等待期`C`。

**按`CTRL`+`C`** - 的预期结果立即回显“没有时间打盹！” 并退出。

**按`CTRL`+`C`** - 的实际结果立即回显“小睡时间结束”。并退出。

```
#!/bin/bash

nonap() {
    echo "No time for napping!"
    exit
}

trap nonap INT

echo "Sleeping for 5 seconds, hit ctrl-c to proceed now."
sleep 5 
echo "Naptime over." 
```

为什么我的陷阱函数没有被调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T06:03:10.687

我刚刚尝试过（在带有 bash 3.2.25 的古老 RHEL Linux 上）并将您的代码保存在`trap.sh`、运行`bash trap.sh`并得到：

```
 Sleeping for 5 seconds, hit ctrl-c to proceed now. 
```

其次是：

```
No time for napping! 
```

当我打断时，正如你所料。当我让它运行而不中断时，我得到了预期的消息：

```
Naptime over. 
```

然后你评论道：

> 至少我知道它*应该*按预期工作。我正在使用最新版本的 Tinycore Linux 和 GNU bash，版本 4.0.33(1)-release (i686-pc-linux-gnu)。打开一个新终端后，`declare -f nonap`两者`trap`都没有返回任何输出。运行此脚本并获得“午睡时间结束”后。输出，`trap`返回`trap -- 'nonap' SIGINT`并`declare -f nonap`返回我的脚本中定义的函数。

我对此作出回应：

那你是如何运行这个脚本的呢？使用`source`还是`.`阅读？是啊; 你一定是。我刚试过，采购时的中断给了我`Naptime over.`；输入另一个中断虽然给了我`No time for napping!`并且shell退出了。第二次表现如预期；我不确定在打点脚本时中断是怎么回事。那是意想不到的行为。

你为什么要采购或点这个？为什么不将它用作普通的旧脚本？

> 没有理由来源......我只是在测试时使用它来运行它。我想我在使用 . 以前，但我还是个新手。我看到的结果与您相同，如果我使用 bash 运行它，它会在第一次中断时按预期工作。

嗯，下面的建议有一个“医生，医生，我的头撞到墙上很痛”的部分，但也有基本的实用主义。

您使用`source`（在 C shell 或中`bash`）或`.`（在 Bourne、Korn、POSIX shell 或`bash`中）让脚本影响调用 shell 的环境，而不是作为子 shell 运行。解决问题（尽管主要靠侥幸）的好处是当您报告运行脚本后，您已经定义了函数；除非您使用`source`. 在这种情况下，很明显您不希望`trap`调用 shell 中的集合。当我运行它时（从`ksh`with prompt `Toru JL:`），我得到：

```
Toru JL: bash
bash-3.2$ trap
bash-3.2$ source trap.sh
Sleeping for 5 seconds, hit ctrl-c to proceed now.

Naptime over.
bash-3.2$ trap
trap -- 'nonap' INT
bash-3.2$ No time for napping!
Toru JL: 
```

“没时间打盹！” 当我再次按下中断键时出现消息，它终止了`bash`我要运行的。如果您继续将它与 一起使用`source`，您可能希望添加`trap INT`到脚本的末尾，并且您可能还想取消定义该函数。

但是，我认为最好将其全部隔离在一个外壳中并将其作为子进程运行。

但是......你发现当脚本来源时这种东西会玩有趣的游戏很有趣。这是 的行为中的一个小异常`bash`。我不确定它会上升到“错误”的水平；在声称“错误”之前，我必须相当仔细地阅读大量手册（可能多次）并咨询其他知识渊博的人。

我不确定这是否会带来任何安慰，但我尝试`ksh`了你的脚本，`.`它的工作方式符合我们的预期：

```
Toru JL: ksh
$ . trap.sh
Sleeping for 5 seconds, hit ctrl-c to proceed now.
No time for napping!
Toru JL: 
```

# css - 某些浏览器中页面底部的额外空间

> ID：10630060
> 
> 赞同：0
> 
> 时间：2012-05-17T04:58:40.023
> 
> 标签：css, html

我在页面底部出现“额外空间”的问题。在 Opera 和 Firefox 中。在 IE 上，有时会发生这种情况，有时它在 chrome 上始终无法正常工作。我是 css 和 html5 的新手，最重要的是。好久没做网页设计了。过去只使用表格和旧的html。我遇到问题的网站是

[http://jconstruction.us.cloudlogin.co/index2.php](http://jconstruction.us.cloudlogin.co/index2.php)

我尝试了一切，现在我放弃了。它是一个修改过的模板，模板在所有浏览器中都能正常工作，所以我的猜测是我的一些修改。我遇到问题的模板来自这里

[http://www.jonathansconstruction.com](http://www.jonathansconstruction.com)

如果有人可以提供帮助会很高兴。在此先感谢我真的需要这花了很多时间但没有成功

编辑

非常感谢所有的帮助.....我确实设法解决了大多数浏览器上的问题，但是，在 IE 上仍然很难，如果有人能提供帮助将不胜感激（已经快把我的头发拉出来了）大声笑..我什至尝试验证。尽管有一些错误，但我尝试将错误排除在外，结果仍然相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:05:35.347

这是因为您可能`top:-***px;`在 CSS 中使用过任何`<div>`. 尝试使用绝对定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:09:28.060

我发现了问题，设置这个属性

```
 .ui-datepicker
         {
          position:absolute;
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:08:25.160

为此，我通常为页面创建两个部分：

```
<body>
    <div id="main-part"></div>
    <div id="footer"></div>
</body> 
```

然后样式它：

```
#main-part { height: 100%; padding-bottom: 110px; }
#footer { height: 100px; margin-top: -100px; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:47:56.857

尝试使用 100% 高度的固定页眉和页脚`div`，这样空间不会在任何浏览器中混乱。如果您也可以尝试`position:relative`并尝试`margin-top`为空间设置值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-31T12:40:47.427

我也有同样的问题。我通过更改 CSS 找到了解决方案：

```
.Zebra_DatePicker.dp_hidden {
  visibility: hidden;
  filter: alpha(opacity=0);
  -khtml-opacity: 0;
  -moz-opacity: 0;
  opacity: 0
} 
```

Instead of **`visibility: hidden;`** use **`display:none;`** and it will work perfectly.

# ruby-on-rails-3 - 如何正确定义 Ability.rb (CanCan)？

> ID：10630070
> 
> 赞同：0
> 
> 时间：2012-05-17T05:00:57.417
> 
> 标签：ruby-on-rails-3, cancan

我试图将我的能力定义如下：

```
class Ability
  include CanCan::Ability

  def initialize(user)

    user ||= User.new # guest user (not logged in)

    if user.role == 'admin'
      can :manage, :all
    elsif user.role == 'member'
      can :manage, [User,Post] , :id => user.id
      cannot :index, User # list users page
    else
      can :read, :all
    end
  end
end 
```

并已包含`load_and_authorize_resource`在我的`PostsController`.

如果我理解这些定义，来宾用户不应该有权访问该`create`操作，`PostsController`但他们可以。

对这种行为有什么解释吗？

**编辑**

解决了！

刚刚意识到我忘记添加一个，`before_filter :authenticate_user!`因为我正在使用设计进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:30:21.860

解决了！

刚刚意识到我忘记添加一个，`before_filter :authenticate_user!`因为我正在使用设计进行身份验证。

# excel - Partial duplicate detection in Excel

> ID：10630072
> 
> 赞同：0
> 
> 时间：2012-05-17T05:01:07.050
> 
> 标签：excel

I have customer file in Excel (using 2003) with about 16000 rows. The columns are name, phone, email etc. Some of the customers work for the same company, and I need to create a second spread sheet that lists each company with multiple contacts and those contacts. I thought a great way to do this would be to find a formula that would look at each email address and highlight duplicate email domains. Basically what ever is after the @. If each duplicate was high lighted, I could go in a CTRL+F each email domain to identify the duplicates. Is this possible to do in Excel?

Many thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:39:33.593

如果您的电子邮件在（例如）列 D 中，您可以在右侧插入一列，将其添加到 E2 并填写

```
=MID(D2, SEARCH("@",D2)+1,50) 
```

# c - 如果 bool 是 int 的宏，为什么它的大小不同？

> ID：10630080
> 
> 赞同：9
> 
> 时间：2012-05-17T05:01:50.483
> 
> 标签：c, memory, int, boolean

我希望有人能解释为什么

```
#include <stdbool.h>

printf("size of bool %d\n", sizeof(bool));
printf("size of int %d\n", sizeof(int)); 
```

输出到

```
size of bool 1
size of int 4 
```

我查看了[http://pubs.opengroup.org/onlinepubs/009695399/basedefs/stdbool.h.html](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/stdbool.h.html)这似乎表明 bool 本质上是 _Bool 的宏，当设置为 true 或 false 时，实际上只是整数常量的宏。如果是整数，为什么大小不一样？

我问是因为调试一个我们没有分配足够内存的程序花了我们太长时间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T05:21:22.887

C99 中的`_Bool`类型（`typedef`'ed to `bool`in `stdbool.h`）没有标准定义的大小，但根据 C99 标准的第 6.2.5 节：

```
2 An object declared as type _Bool is large enough to store the values 0 and 1. 
```

在 C 中，最小的可寻址对象（除了位域）是`char`，它至少有 8 位宽，并且`sizeof(char)`总是`1`.

`_Bool`因此`bool`具有`sizeof`至少`1`，并且在我见过的大多数实现中，`sizeof(bool)`/`sizeof(_Bool)`是`1`。

如果你看一下 GCC's `stdbool.h`，你会得到这个：

```
 #define bool    _Bool
 #if __STDC_VERSION__ < 199901L && __GNUC__ < 3
 typedef int _Bool;
 #endif

 #define false   0
 #define true    1 
```

所以如果在编译的时候使用老版本的GCC和老版本的C标准，你会使用`int`作为`_Bool`类型。

当然，作为一件有趣的事情，看看这个：

```
#include <stdio.h>
#include <stdbool.h>

int main() {
   printf("%zu\n", sizeof(_Bool));
   printf("%zu\n", sizeof(true));
   printf("%zu\n", sizeof(false));

} 
```

输出：

```
λ > ./a.out 
1
4
4 
```

GCC 4.2.4、Clang 3.0 和 GCC 4.7.0 都输出相同。正如 trinithis 指出的那样，`sizeof(true)`并`sizeof(false)`产生更大的尺寸，因为它们采用 int 文字的大小，至少是`sizeof(int)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T05:15:36.050

C99标准介绍了`_Bool`类型。`_Bool`保证足够大以容纳整数常量 0 或 1 ，这并不一定意味着它是一个 int。实际大小取决于编译器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T05:10:48.777

我很确定它取决于您的编译器，也许您的编译器使用的是字节而不是 int 作为 bool？无论哪种方式，如果您使用 sizeof() 来知道要分配多少内存，您都不应该有内存分配问题，例如，如果您想分配 10 个布尔值的内存，请不要分配 10 * 4，执行 10 * sizeof (bool) 所以你不会出错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T06:33:38.707

正如我从将代码从 Windows 移植到 Unix 中所知道的那样，您永远无法确定数据类型的大小。它取决于操作系统，有时甚至取决于您使用的编译器。

stdbool.h 的规范只说 TRUE 和 FALSE 映射到一个整数（1 和 0）。这并不意味着数据类型 bool 是 int 类型。根据我的经验， bool 是可用的最小数据类型（即 char 或 byte）：

```
bool flag = TRUE; -> byte flag = 0x01; 
```

在 eclipse CDT 和 Visual Studio 中，您可以按照宏定义来查看数据类型背后的真正含义。

所以我建议你总是向你的编译器询问分配足够内存所需的内存空间（这也是我在很多库中看到的）：

```
malloc(4*sizeof(bool)); 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T05:26:45.417

它是一个整数，但不是`int`. `char`, `short`, `int`, `long`,`long long`等都是整数。保证大小为 1。其余的至少与 char 一样大（如果不大于 char `char`，很难想象如何使 I/O 系统正常工作）。`int`还有一个从`char`to 到的必需顺序`long long`（与我在上面列出的顺序相同），其中每种类型的范围必须至少与其前辈一样多。

但是，除此之外，您不能保证整数类型的大小。具体来说，`char`它是唯一一种具有保证大小的“基本”类型（尽管有类似`int8_t`和`int32_t`具有保证大小的类型）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T05:16:17.727

_Bool 是编译器原生的，在 C99 中定义，可以像这样激活`gcc -std=c99`；stdbool.h #define bool 为 _Bool，true 和 false 为简单的 int 字面量，非常适合该 _Bool。

# iphone - 如何更改导航工具栏的颜色

> ID：10630087
> 
> 赞同：1
> 
> 时间：2012-05-17T05:03:09.390
> 
> 标签：iphone, ios, uinavigationbar, uitoolbar

我正在尝试将导航工具栏的颜色更改为黑色。但是，由于某种原因，我不确定我用来尝试执行此操作的代码不起作用。

这是我正在使用的代码，

```
[self.navigationController.toolbar barStyle:UIBarStyleBlack]; 
```

我已经阅读了苹果关于如何使用 barStyle.. 的文档，值是 UIBarStyledefault 和 Black..

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:07:20.650

我不确定这个 bt 试试这个：

在您的 viewDidLoad 方法或 viewController 中的任何方法中尝试此操作：

```
UINavigationBar *bar = [self.navigationController navigationBar];

[bar setTintColor:[UIColor redColor]]; 
```

看看这个也

[http://groups.google.com/group/iphonesdkdevelopment/browse_thread/thread/4df6af5c0c7f4caf](http://groups.google.com/group/iphonesdkdevelopment/browse_thread/thread/4df6af5c0c7f4caf)

# php - 如何替换php中字符串的位置？

> ID：10630093
> 
> 赞同：1
> 
> 时间：2012-05-17T05:03:55.060
> 
> 标签：php

```
$text = "abc def ghi abc def ghi abc def ghi abc"
$search = "abc";
$regex = '/(\s)'.$search.'(\s)/i';
$array_key = array();
if(preg_match_all($regex, $text, $tmp)) {
    $array_key = $tmp[0];
    $n = count($tmp[0]);
    for($i=0; $i<$n; $i++) {
        if($n % 2 == 0) {
            $content = str_replace($array_key[$i], 'ABC', $text);
        }
} 
```

当我 echo $content 输出时：

" `ABC def ghi ABC def ghi ABC def ghi ABC`"

但我想要的结果是“ `ABC def ghi abc def ghi ABC def ghi abc`”，因为`$n % 2 == 0`，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:14:59.243

问题是 str_replace 替换了所有出现的针。

另外..你必须使用正则表达式吗？你看过这个[http://bluedogwebservices.com/replace-every-other-occurrence-with-str_replace/](http://bluedogwebservices.com/replace-every-other-occurrence-with-str_replace/)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:15:37.707

一种方法是使用`preg_replace_callback`, 和一个全局变量来跟踪迭代。这是下面采取的方法。

```
$replacer_i = 0;
function replacer( $matches ) {
  global $replacer_i;
  return $replacer_i++ % 2 === 0 
    ? strtoupper($matches[0]) 
    : $matches[0];
}

$string = "abc def ghi abc def ghi abc def ghi abc";
$string = preg_replace_callback( "/abc/", "replacer", $string );

// ABC def ghi abc def ghi ABC def ghi abc
print $string; 
```

另一种方法是拆分字符串，并用大写形式替换“abc”的所有其他实例，然后将这些部分重新粘合在一起形成一个新字符串：

```
$string = "abc def ghi abc def ghi abc def ghi abc";
$aparts = explode( " ", $string );
$countr = 0;

foreach ( $aparts as $key => &$value ) {
  if ( $value == "abc" && ( $countr++ % 2 == 0 ) ) {
    $value = strtoupper( $value );
  }
}

// ABC def ghi abc def ghi ABC def ghi abc
print implode( " ", $aparts ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-17T05:40:49.537

尝试这个：

```
<?php
$text = "abc def ghi abc def ghi abc def ghi abc";
$search = "ghi";
$regex = '/('.$search.')(.*)/i';
$array_key = array();
if(preg_match($regex, $text, $tmp)) {
    $c = strtoupper($tmp[1]);
    $content = str_replace( $tmp[1] . $tmp[2], $c .  $tmp[2], $tmp[0] );
    $content = str_replace( $tmp[1] . $tmp[2], $content, $text );
}

echo $content;
?> 
```

希望能帮助到你。

# java - 如何在 replaceregexp 中指定属性

> ID：10630095
> 
> 赞同：1
> 
> 时间：2012-05-17T05:04:11.403
> 
> 标签：java, android, regex, ant

我不知道如何为 my.property=anything * 指定通配符？？？？

我还需要知道如何设置将 my.property 设置为空值的替换？

这是一个例子：

```
 <replaceregexp file="./project.properties"
                        match='someproperty.value="(.*)"'
                        replace='somepropert.value=othervalue'
                        byline="false">         
    </replaceregexp> 
```

我要问的真的很简单。如何使用 ant 脚本中的 replaceregexp 在属性文件中设置和取消设置属性。而已。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:33:04.947

您必须将实体用于“

```
&#34; 
```

并逃脱点

```
\. 
```

比赛看起来

```
match='someproperty\.value=&#34;.*&#34;' 
```

括号是不必要的。

# asp.net - asp.net 会员资格，当帐户即将到期时通知管理员

> ID：10630096
> 
> 赞同：0
> 
> 时间：2012-05-17T05:04:13.163
> 
> 标签：asp.net, asp.net-membership

我有一个要求，即应该经常（仍有待确定）通知某个电子邮件分发列表关于即将到期的用户帐户。

我想知道实现这一点的最佳方法，我知道在 asp.net 中生成另一个线程来处理这种类型的事情通常是一个坏主意，所以我在想也许一个简单的服务是可行的方法，但是为了某些东西这么小，这似乎有点矫枉过正。

理想情况下，我想要不需要太多保姆的东西（例如，检查服务正在运行）。

我还建议在网站上设置一个包含此类信息的页面，但可能要过几天才能检查。我们也不能让用户延长他们自己的有效期。

有没有其他可行的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:13:41.917

最合适的工作方法是

创建一个应用程序，它将根据您的要求选择帐户到期日期在附近（例如，从今天起 10 天）的所有用户的列表。

此应用程序将安排为每日执行（您将创建一个带有日志文件的 exe，以显示在一次执行中出现的错误和发送的电子邮件总数。）

此应用程序将根据标准获取所有记录，并使用基本 HTML 模板将电子邮件发送给您的所有人。发送电子邮件后，您将更新`notificationFlag`数据库中的一列 ( )，就`1`好像您在过去 10 天内发送过一次一样。否则默认情况下它将是`0`

您可以在每天上午 12:10 安排 exe（以防您的数据库服务器和网络服务器不及时匹配）。.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:16:49.313

这是我所做的，类似于 Prescott 对您的回答的评论。

我有一个带有管理页面的网站，该页面报告了一堆到期日期。此页面还接受 QueryString 参数 SEND_EMAILS，因此，只要站点的管理用户传递 QueryString 参数 SEND_EMAILS=true，就会有一堆电子邮件发送给所有即将到期的用户。

然后我添加了一个每天运行的 Windows 计划任务，并使用 SEND_EMAILS=true 参数加载页面。

这是我用来在计划任务中从控制台发出 webrequest 的简单代码：

```
namespace CmdLoadWebsite
{
    class Program
    {
        static void Main(string[] args)
        {
            string url = "http://default/site/";
            if (args.Length > 0)
            {
                url = args[0];
            }
            Console.WriteLine(GetWebResult(url));
        }

        public static string GetWebResult(string url)
        {
            byte[] buff = new byte[8192];            
            StringBuilder sb = new StringBuilder(); 

            HttpWebRequest request = (HttpWebRequest) WebRequest.Create(url);
            HttpWebResponse response = (HttpWebResponse) request.GetResponse();
            Stream webStream = response.GetResponseStream();

            int count = 0;
            string webString;

            do
            {
                count = webStream.Read(buff, 0, buff.Length);
                if (count != 0)
                {
                    webString = Encoding.ASCII.GetString(buff, 0, count);
                    sb.Append(webString);
                }
            }
            while (count > 0);

            return(sb.ToString());
        }
    }
} 
```

# java - AES算法的奇怪行为

> ID：10630099
> 
> 赞同：1
> 
> 时间：2012-05-17T05:04:23.493
> 
> 标签：java, android, encryption, aes

我使用以下代码加密数据

```
final SecretKeySpec keySpec = new SecretKeySpec(key.getBytes(),
        "AES");
        final String myIV = "89ABCDEF01234567"; 
        Cipher c = null;
        try {
            try {
                c = Cipher.getInstance("AES/CBC/PKCS5Padding");
            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NoSuchPaddingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            c.init(Cipher.ENCRYPT_MODE, keySpec, new IvParameterSpec(
                    myIV.getBytes()));

            byte[] encrypted = c.doFinal(msgfromEB.getBytes(),0,msgfromEB.getBytes().length); 
```

我像这样解密

```
c.init(Cipher.DECRYPT_MODE, keySpec, new IvParameterSpec(
                    myIV.getBytes()));  

            byte[] decryptedBytes = c.doFinal(encrypted ,0,encrypted .length);

            System.out.println("decrypted string is"+new String(decryptedBytes)); 
```

它正在工作，我能够正确加密和解​​密

但是如果我正在转换成这样的字符串

```
String myString = new String (encrypted); 
```

并再次获得这样的字节数组

```
byte[] newbytearray = myString.getBytes(); 
```

现在我正在尝试解密

```
c.init(Cipher.DECRYPT_MODE, keySpec, new IvParameterSpec(
                    myIV.getBytes()));  

            byte[] decryptedBytes = c.doFinal(newbytearray ,0,newbytearray .length);

            System.out.println("decrypted string is"+new String(decryptedBytes)); 
```

现在我得到一个错误

javax.crypto.IllegalBlockSizeException：最后一个块在解密中不完整

如果我使用 base64 转换它工作正常，但我不想这样做，因为它增加了长度。有没有其他的选择来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:39:53.653

另一种方法是传输字节而不是字符串。

当您这样做`new String(bytes)`时，您要求使用平台的默认编码将字节和字节序列解释为字符。问题是所有字节和字节序列都不代表有效字符。因此该算法是有损的。这有点像将彩色图片转换为黑白，然后尝试从黑白转换为彩色。它不起作用。因此需要base64。

另一个问题是您没有指定任何显式编码，这意味着如果发送方和接收方不在完全相同的平台上，它们可能会使用不同的编码。

# asp.net - Umbraco：从 xslt 设置文档属性

> ID：10630102
> 
> 赞同：0
> 
> 时间：2012-05-17T05:04:43.333
> 
> 标签：asp.net, umbraco

是否可以直接从 xslt 设置文档类型属性的值？我的页面的页面标题需要根据 xslt 结果进行更改，并且页面标题是通过属性设置的。

谷歌搜索了一段时间，但没有找到我要找的东西，所以我想我会在这里问 umbraconians！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:32:13.110

如上所述，XSLT 是只读的，因此无法以在页面呈现时会受到影响的方式修改属性。

但是，您可以编写一个附加的 XSLT 宏，放置在标题标签之间。该宏可以使用匹配模板。这允许您执行不同的操作，具体取决于您正在处理的 XML 节点。

由于数据在 Umbraco 4.7.x 中的存储方式，“文档类型别名”被用作 XML 节点。这意味着我们可以匹配您的搜索页面（只要它有自己的 DocType）。

只需将“搜索”更新为您的文档类型的名称。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:umb="urn:umbraco.library"
exclude-result-prefixes="umb"
>

  <xsl:output method="xml" omit-xml-declaration="yes"/>
  <xsl:param name="currentPage"/>

  <!-- Match Templates -->
  <xsl:template match="/">
    <xsl:apply-templates select="$currentPage" />
  </xsl:template>

  <!-- Search -->
  <xsl:template match="search">
    WooHoo! I'm the Search page! 
  </xsl:template>

  <!-- All other pages -->
  <xsl:template match="*[@isDoc]">
    <xsl:value-of select="@nodeName" />
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:01:58.323

据我所知， xslt 是只读的。您可以有条件地更改在宏中显示为标题的内容（如果是，则显示属性中的标题，否则显示其他标题），或者如果您真的想设置属性，我建议使用剃须刀脚本：[Umbraco - how使用 razor 脚本设置属性的值](https://stackoverflow.com/questions/10619214/umbraco-how-to-set-the-value-of-a-property-using-razor-script)

# memory - 使用段表将逻辑地址转换为物理地址

> ID：10630109
> 
> 赞同：2
> 
> 时间：2012-05-17T05:05:40.590
> 
> 标签：memory

如果为我提供 0-4 段，BASE 分别为 515、1250、825、2500、60，LENGTH 分别为 300、99、400、319、80，我将如何将逻辑地址转换为物理地址？

```
Logical Address  Physical Address
2, 175          -     ?
4, 61           -     ?
5, 75           -     ?
0, 2            -     ?
3, 920          -     ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:03:37.273

好吧，我不确定这个答案。请告诉我我是否正确。在第一种情况下：2,175 - 页码为 2，偏移量为 175。要转换为物理页码，将页码替换为帧号 825（段 2），175（偏移量保持不变）

所以最后 825,175 是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-31T19:31:49.640

让我解释一下，这里取第一个逻辑地址 2,175，这意味着引用段 2 的第 175 个字节。现在检查这个 175 是否小于段表（base，limit）中的 400（limit）。如果为真，则将基址寄存器值与偏移量相加。825+175= 1000 所以1000是物理地址空间中的地址

如果为假，则为陷阱或未命中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-27T00:49:54.493

不完全的。您需要将基地址添加到偏移量。(825+175 = 1000)。这没关系，因为 175<400=length。O/w 答案是“陷阱”。

# asp.net - 如何使用特定字符串自动生成用户名？

> ID：10630110
> 
> 赞同：0
> 
> 时间：2012-05-17T05:05:42.783
> 
> 标签：asp.net, mysql, database

我正在使用 asp.net2008 和我的 SQL。

我想自动生成字段用户名的值，格式为

```
"SISI001", "SISI002", 
```

每当要插入新记录时，在 SQL 中等等。

我该怎么做？

什么可以是 SQL 查询？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:06:55.487

添加具有自动增量整数数据类型的列
然后使用“Max()”函数获取表中该列的最大值并将该值分配给整数变量（让变量为“x”）。
之后

```
string userid = "SISI";
x=x+1;
string count = new string('0',6-x.ToString().length);
userid=userid+count+x.ToString(); 
```

用作`userid`您的`username`
希望它有帮助。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:17:27.603

**计划 A>** 您需要保留一个表（键），其中包含为各种实体生成的最后一个数字 ID。在这种情况下，实体是“用户”。所以该表将包含两个列，即。实体 varchar(100) 和 lastid int。

然后，您可以编写一个函数来接收实体名称并返回递增的 ID。使用此 ID 与要传递给 MySQL 以插入数据库的字符串组件“SISI”连接。

以下是 MySQL 表 tblkeys：

```
CREATE TABLE `tblkeys` (
  `entity` varchar(100) NOT NULL,
  `lastid` int(11) NOT NULL,
  PRIMARY KEY (`entity`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

MySQL函数：

```
DELIMITER $$

CREATE FUNCTION `getkey`( ps_entity VARCHAR(100)) RETURNS INT(11)
BEGIN
    DECLARE ll_lastid INT;
    UPDATE tblkeys SET lastid = lastid+1 WHERE tblkeys.entity = ps_entity;
    SELECT tblkeys.lastid INTO ll_lastid FROM tblkeys WHERE tblkeys.entity = ps_entity;
    RETURN ll_lastid;
    END$$

DELIMITER ; 
```

示例函数调用：

```
SELECT getkey('user') 
```

示例插入命令：

```
insert into users(username, password) values ('SISI'+getkey('user'), '$password') 
```

**方案 B>** 这样 ID 会大一点，但不需要任何额外的表。使用以下 SQL 获取新的唯一 ID：

```
SELECT ROUND(NOW() + 0) 
```

您可以将其作为插入命令的一部分传递，并将其与“SISI”的字符串组件连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:40:15.713

我不是`asp.net`开发人员，但我可以帮助你
你可以做这样的事情......

在你的mysql数据库中创建一个序列——

```
CREATE SEQUENCE "Database_name"."SEQUENCE1" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 001 START WITH 21 CACHE 20 NOORDER NOCYCLE ; 
```

然后在插入时使用这个查询-----

```
 insert into testing (userName) values(concat('SISI', sequence1.nextval)) 
```

它可以帮助你解决你的疑问......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:46:18.647

试试这个：

```
CREATE TABLE Users (
 IDs int NOT NULL IDENTITY (1, 1),
 USERNAME AS 'SISI' + RIGHT('000000000' + CAST(IDs as varchar(10)), 4), --//getting uniqueness of IDs field
 Address varchar(150) 
) 
```

（未测试）

# pdf - 在我的应用程序中下载黑莓中的pdf文件？

> ID：10630112
> 
> 赞同：0
> 
> 时间：2012-05-17T05:06:02.580
> 
> 标签：pdf, blackberry, download

我正在开发一个用于下载任务的示例 BB 应用程序。

我的应用程序中有互联网连接设置。现在我的任务“点击一个按钮，我想在我的设备中下载一个 PDF 文件作为从链接下载的普通文件”

我已经搜索了很多关于这个查询但没有得到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:27:26.010

由于此处提供的代码很长，请查看此[url](http://clusterlessons.blogspot.in/2011/09/invoke-blackberry-browser.html)并使用您的 pdf url 调用黑莓浏览器。

# svg - 将纬度/经度值转换为小地图

> ID：10630116
> 
> 赞同：0
> 
> 时间：2012-05-17T05:06:49.713
> 
> 标签：svg, latitude-longitude

我有一个由世界各地城市组成的纬度/经度坐标列表。我整理了一张美国的 SVG 地图，我想将世界主要城市显示为 SVG 地图顶部的图钉。到目前为止，我已经发现我正在显示的地图投影是美国的墨卡托投影，所以下一步是如何获得每个城市地图的 X/Y 坐标？一旦我从纬度/经度得到墨卡托投影，那么它如何转换为 X/Y 值，然后根据我的地图大小转换为相对 X/Y 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:16:54.553

[关于墨卡托投影](http://en.wikipedia.org/wiki/Mercator_projection)的 Wikipedia 文章提供了您需要实现的方程。墨卡托投影将 lat/long 转换为 x/y，这就是地图投影所做的。一旦有了 x/y 值，您所要做的就是将它们转换为（在您的情况下）像素或您使用的任何度量。

# iphone - 如何在没有用户交互的情况下以编程方式拍摄照片

> ID：10630118
> 
> 赞同：-1
> 
> 时间：2012-05-17T05:06:50.743
> 
> 标签：iphone, ios, security, camera

我想以编程方式拍摄照片，而不使用**相机应用程序**，甚至不通知用户。实际上这是用于安全应用程序。请让我知道它是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:56:20.673

不能在没有前台应用的情况下拍照

# uitableview - Selenium Webdriver - 获取表数据

> ID：10630120
> 
> 赞同：16
> 
> 时间：2012-05-17T05:06:53.937
> 
> 标签：uitableview, selenium, webdriver, html-table

我想从 UI 中的表中获取数据。我知道使用“tr”和“td”循环遍历行和列。但是我的桌子是这样的：

```
<table>
 <tbody>
  <tr><td>data</td><th>data</th><td>data</td><td>data</td></tr>
  <tr><td>data</td><th>data</th><td>data</td><td>data</td></tr>
  <tr><td>data</td><th>data</th><td>data</td><td>data</td></tr>
 </tbody>
</table> 
```

如何使我的代码通用，以便可以处理中间出现“TH”的情况。目前，我正在使用此代码：

```
// Grab the table
WebElement table = driver.findElement(By.id(searchResultsGrid));

// Now get all the TR elements from the table
List<WebElement> allRows = table.findElements(By.tagName("tr"));
// And iterate over them, getting the cells
for (WebElement row : allRows) {
 List<WebElement> cells = row.findElements(By.tagName("td"));
 for (WebElement cell : cells) {
 // And so on
 }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T11:06:23.860

您可以在不区分 td 和 th 的情况下查找 tr 元素的所有子元素。所以而不是

```
List<WebElement> cells = row.findElements(By.tagName("td")); 
```

我会用

```
List<WebElement> cells = row.findElements(By.xpath("./*")); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-09T11:28:58.133

也许对于这个问题的所有者来说为时已晚，但对其他人有帮助。

```
List<WebElement> cells = row.findElements(By.xpath(".//*[local-name(.)='th' or local-name(.)='td']")); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-07T11:22:02.523

```
// Grab the table
WebElement table = driver.findElement(By.id("searchResultsGrid"));

// Now get all the TR elements from the table
List<WebElement> allRows = table.findElements(By.tagName("tr"));
// And iterate over them, getting the cells
for (WebElement row : allRows) {
    List<WebElement> cells = row.findElements(By.tagName("td"));
    for (WebElement cell : cells) {
        System.out.println("content >>   " + cell.getText());
    }
} 
```

使用`cell.getText()`会简单地工作

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-11T21:05:55.130

您不需要遍历元素。相反，使用 ByChained 定位器。

如果您的表格如下所示：

```
<table>
  <tbody>
    <tr><th>Col1</th><th>Col2</th><th>Col3</th></tr>
    <tr><td>data</td><td>data</td><td>data</td></tr>
    <tr><td>data</td><td>data</td><td>data</td></tr>
    <tr><td>data</td><td>data</td><td>data</td></tr>
  </tbody>
</table> 
```

定位是这样的：

```
By tableBodyLocator = By.xpath(".//table/tbody");
By headerRowLocator = By.xpath(".//tr[position()=1]");
By dataRowsLocator = By.xpath(".//tr[not(position()=1)]");

By headerRowLocator = new ByChained(tableBodyLocator, headerRowLocator);
List<WebElement> weHeaders = driver.findElement(headerRowLocator)
       .findElements(By.xpath(".//th");
List<WebElement> allRowData = driver.findElements(tableBodyLocator, dataRowsLocator);

WebElement row1Data = allRowData.get(0);
WebElement row2Data = allRowData.get(1);

etc. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-18T05:21:57.767

是的，它适用于带有 selenium 的 c#...

```
IList<IWebElement> cells = row.findElements(By.xpath(".//*[local-name(.)='th' or local-name(.)='td']")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-30T11:46:40.623

```
IWebElement table = driver.FindElement(By.Id("id"));
List<IWebElement> allRows = new List<IWebElement> (table.FindElements(By.TagName("tr")));

foreach (var Row in allRows)
{
    List<IWebElement> cells = new List<IWebElement>( Row.FindElements(By.TagName("td")));
    foreach (var cel in cells)
    {
        string test = cel.Text;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-05T05:20:47.453

下面的代码不仅可以获取表格的行和列，还可以获取它们在浏览器中的顺序，如果您在 TD 列中有嵌套结构，这主要是方便的。

```
 public DataTable StoreHtmlTableToDataTable(IWebElement tblObj,bool isFirstRowHeader = true)
        {
            DataTable dataTbl = new DataTable();
            int rowIndex = 0;

            try
            {               
                //_tblDataCollection = new List<TableDataCollection>();

                var tblRows = ((IJavaScriptExecutor)DriverContext.Driver).ExecuteScript("return arguments[0].rows; ", tblObj);

                if (tblRows != null)
                {
                    //Iterate through each row of the table
                    foreach (IWebElement tr in (IEnumerable)tblRows)
                    {                        
                        int colIndx = 0;
                        DataRow dtRow =  dataTbl.NewRow();
                        // Iterate through each cell of the table row
                        var tblCols = ((IJavaScriptExecutor)DriverContext.Driver).ExecuteScript("return arguments[0].cells; ", tr);
                        foreach (IWebElement td in (IEnumerable)tblCols)
                        {
                            //add the header row of the table as  the datatable column hader row
                            if (rowIndex == 0)
                            {
                                dataTbl.Columns.Add("Col" + colIndx.ToString(), typeof(string));
                            }

                            dtRow["Col"+colIndx.ToString()] = td.Text;

                            //loop through any child or nested table structures if you want using the same approach for example links,radio buttons etc inside the cell

                            //Write Table to List : This part is not done yet                           
                            colIndx++;
                        }
                        dataTbl.Rows.Add(dtRow);
                        rowIndex++;
                    }

                }

            }
            catch (Exception)
            {
                throw;
            }

            //if first row is the header row then assign it as a header of the datatable
            if (isFirstRowHeader)
            {
                dataTbl = this.AssignDataTableHeader(dataTbl);
            }

            return dataTbl;
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-22T16:58:58.620

TableDriver ( [https://github.com/jkindwall/TableDriver.Java](https://github.com/jkindwall/TableDriver.Java) ) 支持带有 td 和 th 标签的单元格。将 TableDriver 与您的示例表一起使用将如下所示：

```
Table table = Table.createWithNoHeaders(driver.findElement(By.id(searchResultsGrid), 0);
List<TableRow> allRows = table.getRows();
for (TableRow row : allRows) {
    List<TableCell> cells = row.getCells();
    for (TableCell cell : cells) {
        // Access the cell's WebElement like this: cell.getElement()
    }
} 
```

# c++ - cvQueryFrame(capture) 总是返回 null

> ID：10630123
> 
> 赞同：0
> 
> 时间：2012-05-17T05:07:21.457
> 
> 标签：c++, opencv, video-capture

有谁知道为什么我不断收到空帧？我尝试跳过前五个，但仍然为空。

```
int _tmain(int argc, char** argv)
{
CvCapture *capture  = cvCaptureFromFile(argv[1]);

int fps = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);
IplImage* frame;
cvNamedWindow("video", CV_WINDOW_AUTOSIZE);
while(1)
{
    frame = cvQueryFrame(capture);
    if(!frame)
        break;
    cvShowImage("video", frame);
    char c = cvWaitKey(1000/fps);
    if(c == 33)
        break;
}
cvReleaseCapture( &capture);
cvDestroyWindow( "video" );

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:38:33.750

视频文件必须是 UNCOMPRESSED avi！所以实际上我得到了空帧，因为 cvCapture 返回了一个空值，因为我的输入视频文件没有解压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:32:28.237

我使用您的代码进行测试，然后它与“xvid”格式的视频一起运行良好。我认为 OpenCV 的“捕获”功能可能会处理一些流行和旧格式的视频。格式为“H264”的视频可能无法播放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:06:40.460

失败时`cvCaptureFromFile()`返回`NULL`，我怀疑它失败了：

```
CvCapture *capture  = cvCaptureFromFile(argv[1]);
if (!capture)
{
    // print error, quit application
} 
```

它通常由于以下原因之一失败：它找不到文件，或者 OpenCV 不知道如何打开它。例如，`.mkv`OpenCV 不支持文件。

# c# - 减少内存泄漏的最佳方法是什么？

> ID：10630131
> 
> 赞同：0
> 
> 时间：2012-05-17T05:08:35.997
> 
> 标签：c#, memory-leaks, memorystream

在运行时，我发现我的应用程序使用了非常大的内存..

但似乎我只使用了 3~4 `MemoryStream`s，其中一个有时充满了 81 Mb..

其他的主要是20mb、3mb和1mb的容器……

但是应用程序仍然使用 525.xx MB 内存...

我也尝试使用`using(...)`语句，但没有任何运气..

所以，我在这里要求最有效的方法来减少内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:19:34.870

在托管 .NET 应用程序中，通常不会出现原始意义上的内存“泄漏”，除非您正在分配非托管资源句柄并且没有正确处理它们。但这听起来不像你在做什么。

更有可能的是，您持有对不再需要的对象的引用，这使内存“活动”的时间比您预期的要长。

例如，如果您将 5MB 的数据放入内存流中，然后将该内存流分配给静态字段，那么 5MB 将在应用程序的生命周期内永远不会消失。当您不再需要它指向的内容时，您需要将 null 分配给引用内存流的静态字段，以便垃圾收集器释放并回收该 5MB 内存。

同样，局部变量在函数退出之前不会被释放。如果您分配大量内存并将其分配给局部变量，然后调用另一个运行数小时的函数，则局部变量将始终保持活动状态。如果您不再需要该内存，请将 null 分配给局部变量。

您如何确定您的应用程序存在内存泄漏？如果您正在查看任务管理器显示的进程虚拟内存分配，那不是很准确。应用程序的内存管理器可能会从操作系统分配大块内存，并在内部释放它们以供应用程序内的其他用途使用，而不会将它们释放回操作系统。

使用常识实践。酌情调用 dispose 或 close 并在不再需要变量内容时将 null 分配给变量。

仅仅因为垃圾收集环境会让你变得懒惰并不意味着你不应该注意代码中的内存分配和释放模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:19:32.980

您对内存泄漏的定义似乎不寻常......以下代码将产生您正在观察的效果，但它很少称为内存泄漏：

```
var data = new byte[512*1024*1024];
data = null; 
```

但是您实际上可能有合法的泄漏。内存分析器很容易显示它们，但可以通过代码审查来追踪巨大的。如果您已经知道您有少量的内存流 - 检查您是否通过存储在某个列表或简单地存储在成员变量中来保持它们处于活动状态。还要检查您的大型阵列是否因类似原因而无法存活。

# sql - 在 SQL 中对 XML 属性进行排序

> ID：10630136
> 
> 赞同：0
> 
> 时间：2012-05-17T05:09:28.943
> 
> 标签：sql, sql-server, xml, xquery, xquery-sql

如何在 SQL 中对 XML 属性进行排序？

例如对于这个 XML：

```
<books><book b='' c='' a=''/></books> 
```

我想：

```
<books><book a='' b='' c=''/></books> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:22:53.603

来自[http://msdn.microsoft.com/en-us/library/ms187107%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms187107%28v=sql.90%29.aspx)：

> 不保留 XML 属性的顺序。当您查询存储在 xml 类型列中的 XML 实例时，生成的 XML 中的属性顺序可能与原始 XML 实例不同。

因此，即使您能找到一种对属性进行排序的方法，您也不能相信 SQL Server 中的 XML 数据类型会保留您想要的顺序。

# caching - 以编程方式清除 WinInet DNS 缓存

> ID：10630139
> 
> 赞同：3
> 
> 时间：2012-05-17T05:09:49.537
> 
> 标签：caching, dns, httprequest, wininet

WinINet 库缓存通过它访问的任何 URL 的 IP 地址。因此，当该 URL 的 IP 地址发生更改时，WinInet 库也会`HttpSendRequest`使用旧 IP 地址。

而且，如果旧 IP 正在响应，则 WinINet 将仅将所有 http 请求发送到旧 IP。

有什么方法可以强制清除 WinInet 的 DNS 缓存？

或者

有什么方法可以强制 WinINet 将 HTTP 请求发送到指定的 IP 地址（因为我们可以使用 获取更新的 IP `gethostbyname()`）？

笔记 ：

1.  [gethostbyname](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx)给了我更新的 IP 地址，所以这种行为发生在 WinINet 的缓存中。
2.  我已经尝试过[这篇 MS 文章](http://support.microsoft.com/kb/263558)中建议的“方法 2” ，但没有帮助
3.  [示例代码](http://codepad.org/ga7xA4nL)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:19:07.070

您可以尝试在连接时使用该[标志](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383661%28v=vs.85%29.aspx#INTERNET_FLAG_DONT_CACHE)：

> INTERNET_FLAG_DONT_CACHE = 0x04000000 不将返回的实体添加到缓存中。这与首选值 INTERNET_FLAG_NO_CACHE_WRITE 相同。

或者您可以在[此处查看WinInet 文档中的 DeleteUrlCacheEntry](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385473%28v=vs.85%29.aspx)

我相信这应该可以解决问题。

**- 更新**

从[这个文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384233%28v=vs.85%29.aspx)中我看到有一个更好的标志可以使用它，看看：

> INTERNET_FLAG_PRAGMA_NOCACHE 强制请求由源服务器解析，即使代理上存在缓存副本。

**- 更新**

正如@Pradeep 测试的那样，您可以更改此注册表项以使其工作：HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\DnsCacheEnabled ServerInfoTimeOut 和 DnsCacheTimeout 为 0。

# asp.net-mvc-3 - 在mvc3中单击按钮上的文本框设置焦点

> ID：10630141
> 
> 赞同：0
> 
> 时间：2012-05-17T05:10:06.093
> 
> 标签：asp.net-mvc-3

我在 MVC 中制作了一个表单并包含了选项卡。所以我想重定向到不在默认选项卡中的按钮 lcik 上的文本。那我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:41:43.250

Write some jquery:

```
$('#buttonId').click(function(){
    $('#textboxtofocusId').focus();
}) 
```

# blackberry - 黑莓应用程序未完全签名？

> ID：10630142
> 
> 赞同：1
> 
> 时间：2012-05-17T05:10:10.943
> 
> 标签：blackberry

嗨，到目前为止，我已经成功签署了我的黑莓申请，但在过去的 2 到 3 天里，我无法签署申请。在 212 个签名密钥中，210 个已成功签名，只剩下两个，我的电脑挂起，没有对应用程序签名，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T07:41:14.213

我解决了安装 JDK 降级到 1.6 的问题，然后在*C:\Program Files (x86)\Research In Motion\BlackBerry WebWorks SDK 2.3.1.5\bin\bbwp.properties*文件中更新它，因此它指向这个特定的 java 版本：

`<java>C:\Program Files (x86)\Java\jdk1.6.0</java>`

# sql - 聚合几行并在oracle中显示

> ID：10630143
> 
> 赞同：0
> 
> 时间：2012-05-17T05:10:13.820
> 
> 标签：sql, oracle11g, aggregate

我有一张桌子`ZXC`

```
select NAME, MONTH, YEAR, DEPT, MONTHVAL, YEARVAL from ZXC 
```

该列`MONTHVAL`有一些值。我想根据名称、部门和月份的组合聚合一些行，并在`YEARVAL`列中显示聚合值。

例如，如果我有桌子

```
Name   Month  Year Dept Monthval  Yearval

BLAKE   Jan   2011 100   124.542    0 
KING    Feb   2011 200   234.542    0 
KING    Jan   2011 200   27764.464  0 
BLAKE   March 2011 100   0          0 
BLAKE   Feb   2011 400   0          0 
SCOTT   Jan   2011 500   24564.464  0 
KING    March 2011 200   1265.542   0 
KING    April 2011 200   1065.542   0 
```

然后我想看到结果

```
Name   Month  Year Dept Monthval  Yearval

BLAKE   Jan   2011 100  124.542    124.542
KING    Jan   2011 200  27764.464  27764.464  
SCOTT   Jan   2011 500  24564.464  24564.464 
KING    Feb   2011 200  234.542    27999.006 
BLAKE   Feb   2011 100  0          124.542 
KING    March 2011 200  1265.542   29264.548 
BLAKE   March 2011 100  0          124.542 
KING    April 2011 200  1065.542   30330.09 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:00:53.963

What about this:

```
SELECT name
     , dept
     , year
     , SUM( monthval ) yearval
FROM   zxc
GROUP  BY name
        , dept
        , year; 
```

This would produce a total of monthly values for each year. I am not really sure if this is what you needed, but looks like it to me.

You can make it even fancier by using `ROLLUP()` or `CUBE()` functions in `GROUP BY` functions (multiple level of aggregations).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:04:24.350

听上去像：

```
select NAME,
       MONTH,
       YEAR,
       DEPT,
       MONTHVAL,
       SUM(MONTHVAL) OVER (PARTITION BY YEAR) YEARVAL
  from ZXC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:28:12.447

根据您的输出，您似乎想要每个人的运行总数。基本上，以下查询显示了一个通用解决方案：

```
SELECT
  Name,
  Month,
  Year,
  Dept,
  Monthval,
  SUM(Monthval) OVER (PARTITION BY Name, Dept ORDER BY Year, Month) AS Yearval
FROM ZXC 
```

但是 order by 可能存在问题`Month`，因为月份似乎在您的表中存储为名称，而不是数字。然后我会像这样更改上面的内容：

```
SELECT
  Name,
  Month,
  Year,
  Dept,
  Monthval,
  SUM(Monthval) OVER (
    PARTITION BY Name, Dept
    ORDER BY **TO_DATE(Year || '-' || SUBSTR(Month, 1, 3), '-01', 'YYYY-MON-DD')**
  ) AS Yearval
FROM ZXC 
```

# c - 在 C 套接字中需要多个连接

> ID：10630149
> 
> 赞同：2
> 
> 时间：2012-05-17T05:10:40.713
> 
> 标签：c, linux, sockets, unix, network-programming

我编写了以下代码作为连接两个程序的中间代码。在两个不同的系统上运行一个服务器程序和一个客户端程序。该代码有望充当这两个程序之间的中间体。

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netdb.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

//Connect with program on server side
char * serv_con(char app_data[50])
{
int sock, bytes_recieved;  
char send_data[1024];
char *recv_data = malloc(1024);
struct hostent *host;
struct sockaddr_in server_addr;  
host = gethostbyname("10.47.3.249");
if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1)
{

    perror("Socket");
    exit(1);

}
server_addr.sin_family = AF_INET;     
server_addr.sin_port = htons(3128);   
server_addr.sin_addr = *((struct in_addr *)host->h_addr);
bzero(&(server_addr.sin_zero),8); 
if (connect(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr)) == -1) 
{

    perror("Connect");
    exit(1);

}
bytes_recieved=recv(sock,recv_data,1024,0);
recv_data[bytes_recieved] = '\0';
send(sock, app_data, 50, 0);
return recv_data;
//close(sock);

}

//Connect with client app
char * cli_con(char ser_data[50])
{
int sock, connected, bytes_recieved , true = 1;  
char send_data [1024];
char *recv_data = malloc(1024);       
struct sockaddr_in server_addr,client_addr;    
int sin_size;
if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1)
{

    perror("Socket");
    exit(1);

}
if (setsockopt(sock,SOL_SOCKET,SO_REUSEADDR,&true,sizeof(int)) == -1)
{

    perror("Setsockopt");
    exit(1);

}
server_addr.sin_family = AF_INET;         
server_addr.sin_port = htons(5000);     
server_addr.sin_addr.s_addr = INADDR_ANY; 
bzero(&(server_addr.sin_zero),8); 
if (bind(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr)) == -1)
{

    perror("Unable to bind1");
    exit(1);

}
if (listen(sock, 5) == -1)
{

    perror("Listen");
    exit(1);

}
sin_size = sizeof(struct sockaddr_in);
connected = accept(sock, (struct sockaddr *)&client_addr,&sin_size1);
printf("\n I got a connection from (%s , %d)",inet_ntoa(client_addr.sin_addr),ntohs(client_addr.sin_port));
bytes_recieved = recv(connected,recv_data,1024,0);
recv_data[bytes_recieved] = '\0';   
send(connected, ser_data,50, 0);
//close(sock);

}

int main()
{

char *ser_data, *app_data;
int pid = fork();
while(1)
{

    if(pid == 0)
        app_data = serv_con(ser_data);

    else
        ser_data = cli_con(app_data);

}

} 
```

在客户端应用程序运行之前它工作正常。但是一旦客户端应用程序运行，代码就会退出并给出错误：

```
Unable to bind: Address already in use
I got a connection from (192.168.0.3 , 45691) 
```

我应该在代码中进行哪些修改以纠正此错误？我正在研究Linux。提前致谢。

编辑：我已经从函数中删除了评论`close(sock)`并添加`close(connect)`了`cli_con`。客户端的代码如下：

```
int sock, bytes_recieved;  
char send_data[1024],recv_data[1024];
struct hostent *host;
struct sockaddr_in server_addr;  
host = gethostbyname("192.168.0.2");
if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1)
{
    perror("Socket");
    exit(1);
}
server_addr.sin_family = AF_INET;     
server_addr.sin_port = htons(5555);   
server_addr.sin_addr = *((struct in_addr *)host->h_addr);
bzero(&(server_addr.sin_zero),8); 
if (connect(sock, (struct sockaddr *)&server_addr,
sizeof(struct sockaddr)) == -1) 
{
    perror("Connect");
    exit(1);
}
while(1)
{
    //necessary codes
    if (connect(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr)) == -1) 
    {
        close(sock);
        goto connct;
    }
} 
```

但是现在运行时，第一个程序没有退出，甚至没有打印

```
I got a connection from (192.168.0.3 , 45691) 
```

但只是继续运行而不打印任何消息。但另一方面，客户端退出并显示错误：

```
Connect: Connection reset by peer 
```

我现在该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:28:10.377

当客户端断开连接时，您创建一个新的服务器套接字并将其绑定到同一端口。如果服务器端套接字未关闭，则端口仍在使用中，因此`bind`失败。

通常套接字程序的服务器端有一个循环，`accept`以允许它处理来自许多客户端的连接。这种方式`bind`只`listen`被调用一次。

```
while (connected = accept(sock, (struct sockaddr *)&client_addr,&sin_size1)) {
    printf("\n I got a connection from (%s , %d)",inet_ntoa(client_addr.sin_addr),ntohs(client_addr.sin_port));
    bytes_recieved = recv(connected,recv_data,1024,0);
    recv_data[bytes_recieved] = '\0';   
    send(connected, ser_data,50, 0);
    close(connected);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T05:27:43.340

这意味着您正在尝试侦听端口 5000，但是已经有一个程序正在侦听该端口（可能是您的程序的早期版本没有正确关闭该端口。）将端口号更改为另一个值，或关闭任何侦听端口的应用程序。

由于您在 Linux 下，您可以以 root 身份使用“netstat -nlp”来查看哪些程序打开了哪些端口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T05:54:40.193

给您的一个指针是，您应该关闭侦听套接字和从接受调用获得的套接字。

```
close(connected);
close(sock); 
```

此外，套接字在使用后需要一段时间才能被操作系统释放，因此它可能会因“地址已在使用”错误而失败。如果代码的 SO_REUSEADDR 部分正确执行，您可以再次正确检查代码。

此外，由于您可以尝试在主函数本身中添加侦听套接字创建代码，并将其作为参数传递给 cli_con 函数。通常遵循的机制是创建一个侦听套接字并使用它来接受来自客户端的多个连接。

我希望在您的原始代码中，您对 ser_data 和 app_data 有适当的内存分配、初始化等。

# cakephp - Cakephp MeioUpload removeOrginal

> ID：10630154
> 
> 赞同：2
> 
> 时间：2012-05-17T05:11:04.563
> 
> 标签：cakephp, thumbnails, cakephp-2.1, meio-upload

removeOriginal 不适用于 MeioUpload ！

我的帖子模型中有这段代码：

/model/post.php

```
 public $actsAs = array(
            'MeioUpload.MeioUpload' => array(
              'avatar' =>array(
                 'thumbnails' => true ,
                 'thumbsizes' => array('small'  => array('width'=>100, 'height'=>100)),
                 'thumbnailQuality' => 75, 
                 'thumbnailDir' => 'thumb',
                 'removeOriginal' => true 

               )
            )
        ); 
```

我只想上传拇指，我不需要源图片。

(cakephp 2.1.2)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:44:32.267

此行为已弃用且不再受支持（[https://github.com/jrbasso/MeioUpload](https://github.com/jrbasso/MeioUpload)），但我遇到了同样的问题，还不需要迁移。

对于与我同船的任何人，您可以按以下方式修复它：

*   打开模型/行为/MeioUploadBehavior.php
*   查找出现两次的代码块：

    ```
    // If the file is an image, try to make the thumbnails
    if ((count($options['thumbsizes']) > 0) && count($options['allowedExt']) > 0 && in_array($data[$model->alias][$fieldName]['type'], $this->_imageTypes)) {
        $this->_createThumbnails($model, $data, $fieldName, $saveAs, $ext, $options);
    } 
    ```

*   在第二次出现后插入以下代码（确实已经出现在第一次出现下）：

    ```
    if ($options['removeOriginal']) {
       $this->_removeOriginal($saveAs);
    } 
    ```

我在我的项目中这样做了，到目前为止似乎工作得很好！

# magento - 升级到 Magento 1.7 时出错

> ID：10630155
> 
> 赞同：1
> 
> 时间：2012-05-17T05:11:13.367
> 
> 标签：magento, magento-1.6

我收到以下错误：

`SQLSTATE[23000]: Integrity constraint violation: 1052 Column ‘position’ in order clause is ambiguous`

我有 Magento 1.4 版本，首先我成功将其升级到 1.6.2，但是当我尝试将其升级到 1.7 时，我想出了上述错误。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:22:46.910

你可以试试这个解决方案：

1.  在 phpmyadmin 中找到`eav_attribute`与`catalog_eav_attribute`. `position`在表中定位列`eav_attribute`并将其删除。

2.  清除所有缓存并重新索引所有数据

3.  现在访问首页。现在您可能会收到一个新错误：

> SQLSTATE [42S22]：未找到列：1054 'where 子句'中的未知列'main_table.include_in_menu'</p>

1.  找到并打开文件`app/code/core/Mage/Catalog/Model/Resource/Category/Flat.php`

注释掉以下行：267

```
->where(‘main_table.is_active = ?’, ’1′)
// ->where(‘main_table.include_in_menu = ?’, ’1′)
->order(‘main_table.position’); 
```

您可以在以下位置找到分步指南：expertmagentodevelopers[dot]com/blog/how-to-upgrade-from-magento-1-6-1-to-1-7-0-using-connect-manager/

上述解决方案是基于我自己的经验。

# jquery - 从 url 中提取网站元数据

> ID：10630156
> 
> 赞同：-1
> 
> 时间：2012-05-17T05:11:14.753
> 
> 标签：jquery

我正在尝试模拟 facebook 或linkedin 的链接发布行为。即当我发布链接时，标题、缩略图和其他信息是动态生成的。有没有办法使用 jquery 做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:14:27.633

这个插件可能有一些用处：

[jQuery 元数据插件](http://docs.jquery.com/Plugins/Metadata)

# javascript - 如何在 JavaScript 中使用 arc4random？

> ID：10630166
> 
> 赞同：-2
> 
> 时间：2012-05-17T05:12:26.893
> 
> 标签：javascript, arc4random

如何`arc4random`在 JavaScript 中使用？我尝试使用`var randomNumber = (arc4random() % 83) + 1;`，但我`UncaughtReferenceError: arc4random is not defined.`不确定要包含哪些库来使用 arc4random。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:34:58.577

`arc4random()`在 JavaSaript 中没有定义。要在 JavaScript 中生成随机数，您可以使用`Math.random()`. 但我认为您可以轻松模拟`arc4random()`为：

```
function arc4random(){
  return Math.random()*4294967296;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T05:24:02.843

我不相信这是可能的，因为所有研究都指出 arc4random 不是一个 js 函数，而是一个内置于 Objective-c 或 ios 的函数。我开始相信你对这件事几乎没有研究。甚至 SO 上的标签 wiki 条目也说了这么多。

# android - 在android中交换标签

> ID：10630169
> 
> 赞同：2
> 
> 时间：2012-05-17T05:12:46.930
> 
> 标签：android, tabview

我想在 3 个选项卡之间通过拖动进行交换或切换，每个选项卡都有一个单独的 Activity。我用 ScrollView 尝试过，但它不起作用......希望有人能帮助我......

当我在屏幕上从右到左移动手指时，应该会显示下一个标签内容。我是否清楚我尝试过 GestureListener 但失败了。

M 对不起，如果这个问题已经被问过，我只是找不到完美的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:45:45.567

将您`Activity`的 s 转换为`Fragment`s ，然后使用 a `ViewPager`with `TabHost`。

你可以在网上得到一些很好的例子。但是对于初学者来说，这会很好 -

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

[http://android-developers.blogspot.in/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)

# android - 如何将我的操作栏显示给 android 中的另一个应用程序？

> ID：10630177
> 
> 赞同：0
> 
> 时间：2012-05-17T05:14:21.570
> 
> 标签：android, android-intent, android-emulator, android-widget

我的应用程序包含一个操作栏，它在后台运行。当我单击另一个第三方应用程序时，如何将我的操作栏共享或查看到该应用程序。可以用源代码回复。谢谢...

# asp.net - 使用 Sharepoint API 的文档管理系统

> ID：10630180
> 
> 赞同：0
> 
> 时间：2012-05-17T05:14:45.660
> 
> 标签：asp.net, sharepoint, document-management

我正在考虑创建一个文档管理系统。我希望我的用户能够从服务器打开文档，进行更改，然后当他们完成点击 Office 中的保存按钮后，应该将文档保存回服务器，同时保留在进行更改之前存在的版本.

有没有人为此使用过Sharepoint？我不想让用户看到 Sharepoint 界面，我只想将它用于文档管理功能，这些功能应该允许使用 API 打开、签出、更改、签入功能。

如果有人能指出我的任何例子，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:04:52.260

这是 SharePoint 开箱即用的功能 - 只需为相关库打开版本控制。

[http://office.microsoft.com/en-us/windows-sharepoint-services-help/introduction-to-versioning-HA010021576.aspx](http://office.microsoft.com/en-us/windows-sharepoint-services-help/introduction-to-versioning-HA010021576.aspx)

# javascript - 重新单击按钮时返回原始状态

> ID：10630181
> 
> 赞同：1
> 
> 时间：2012-05-17T05:14:47.263
> 
> 标签：javascript, jquery

所以我有几个不同的 div id'ed “sstroke” “pixel” “bstroke” “inside” “textbox” “text” 和 “piccars”。我的代码如下：

```
$(document).ready(function(){
    $("img#buttoncar").click(function(){
        $("div#sstroke").animate({width:168},300,"linear",function(){
            $("div#pixel").animate({width:28},150,"linear",function(){
                $("div#bstroke").animate({width:1000},1300,"linear",function(){
                    $("div#inside").animate({height:450},700);
                    $("div#textbox").animate({height:435},700,function(){
                    $("#text").delay(500).animate({opacity:1},2000);
                    $("#piccars").delay(500).animate({opacity:1},2000);
                    });
                });
            });
        });
    });
}); 
```

我的目标是让他们再次点击“buttoncar”（最初释放所有部署元素的愤怒的按钮）或点击另一个按钮（与其他 div 做同样的事情）回到原来的状态)，按照**与它们的部署方式相反**的顺序（即从“piccars”开始，然后是“text”，一直回到“sstroke”）。

我尝试以相反的方式书写相同的内容，但它刚刚展开并在折叠后立即展开，我尝试了 .toogle() 东西，但它做了一些奇怪的事情（对角线而不是水平或垂直部署）。

有人有解决方案吗？我很卡..

**更新：**这里是 jsFiddle：http: [//jsfiddle.net/TSEJP/](http://jsfiddle.net/TSEJP/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:10:19.343

我想这就是你要找的。我希望这可以帮助您或给您提示以继续:)

有Go Back按钮可以恢复所有div的位置

[http://jsfiddle.net/ipsjolly/RhsgR/1/](http://jsfiddle.net/ipsjolly/RhsgR/1/)

更新动画：P

[http://jsfiddle.net/ipsjolly/RhsgR/2/](http://jsfiddle.net/ipsjolly/RhsgR/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:42:44.520

经过几个小时的尝试（我不是那么好..），我找到了一个适合我需要的解决方案，希望能帮助其他程序员！开始！诀窍是使用 4 个不同的脚本（我没有参与重新单击相同按钮并将所有内容折叠回该操作的部分，但仍然......）。

让我们总结一下我们所拥有的：

*   我们将使用 2 张图片作为按钮：“id="b1"" 和 "id="b2""

*   6个div：3个关联到b1（“div11”“div12”和“div13”），3个关联到b2（“div21”“div22”和“”div23”）我们需要的是div 11、12和13单击 b1 时“展开”，单击 b2 时重新折叠，使 div 21、22 和 23 展开（重新单击 b1 时也是如此，等等）。

所以我们开始吧：

*   脚本 1：单击 b1 时展开

```
>$(document).ready(function(){
    $("#b1").click(function(){
        $("#div11").animate({width:100},500,"linear",function(){
            $("#div12").animate({width:150},750,"linear",function(){
                $("#div13").animate({height:200},1000,linear,function(){
                });
            });
        });
    });
    }); 
```

*   脚本 2：点击 b2 时展开

```
$(document).ready(function(){
    $("#b2").click(function(){
        $("#div21").animate({width:100},500,"linear",function(){
            $("#div22").animate({width:150},750,"linear",function(){
                $("#div23").animate({height:200},1000,linear,function(){
                });
            });
        });
    });
    }); 
```

*   **脚本 3：在 b1上按与它们出现相反的顺序**单击时折叠 b2

```
`$(document).ready(function(){
        $("#b2").click(function(){
        $("#div23").animate({width:0},500,"linear",function(){
            $("#div22").animate({width:0},375,"linear",function(){
                $("#div21").animate({height:0},275,linear,function(){
                });
            });
        });
    });
    });` 
```

***   **脚本 4：在 b2上按与它们出现相反的顺序**单击时折叠 b1

```
`$(document).ready(function(){
    $("#b1").click(function(){
        $("#div13").animate({width:0},500,"linear",function(){
            $("#div12").animate({width:0},375,"linear",function(){
                $("#div11").animate({height:0},275,linear,function(){
                });
            });
        });
    });
    });` 
```

***   HTML

```
<html>
   <head>
    <link rel="shortcut icon" href="images/rocherico.ico"/>
    <title>fold-unfold</title>
    <link rel="stylesheet" type="text/css" href="css/fold-unfold.css"/>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
    </script>
    <script type="text/javascript" src="scripts/script1.js"></script>
    <script type="text/javascript" src="scripts/script2.js"></script>
    <script type="text/javascript" src="scripts/script3.js"></script>
    <script type="text/javascript" src="scripts/script4.js"></script>
   </head>
    <body>
    <div id="div11"></div>
    <div id="div12"></div>
    <div id="div13"></div>
    <div id="div21"></div>
    <div id="div22"></div>
    <div id="div23"></div>
    </body>
    </html> 
```

*   CSS

```
#div11 {background:"red";height:100px;width:0px;position:absolute;top:10px;left:100px}
#div12 {background:"red";height:130px;width:0px;position:absolute;top:10px;left:200px}
#div13 {background:"red";height:70px;width:0px;position:absolute;top:10px;left:350px}
#div21 {background:"blue";height:100px;width:0px;position:absolute;top:250px;left:100px}
#div22 {background:"blue";height:130px;width:0px;position:absolute;top:250px;left:200px}
#div23 {background:"blue";height:70px;width:0px;position:absolute;top:250px;left:350px} 
```

我们开始了：折叠/展开 1 单击即可！
适应您网站所需的任何需求（动画高度、位置等）！

为帮助过的人喝彩！****

# iphone - 在后台线程中上传批量图像

> ID：10630187
> 
> 赞同：3
> 
> 时间：2012-05-17T05:15:37.323
> 
> 标签：iphone, image, web-services, upload

我想知道我们如何在 iPhone 中使用带有后台线程或进程的 web 服务上传大量图像。我在我的 iPhone 应用程序中存储大量图像，我想使用 .net 网络服务上传（发布）这些图像。现在，我正在使用 Web 服务发布单个图像，但我想在后台进程中发布多个图像。请帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:31:45.907

我认为您需要使用 ASIHTTP 请求，该请求用于异步调用服务器并将多个图像存储到服务器。

对于此方法之后该方法的实现，用于上传图像。

```
- (IBAction)btnPostImages_Clicked:(id)sender {

     if ([arrImages count] > 0) {
               NSString *strURL = @"Write Your URL Here.";
               ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:strURL]];
               [request setDelegate:self];
               [request setPostValue:@"This is sample text..." forKey:@"text"];
               for (int i = 0; i < [arrImages count]; i++) {
                         [request addData:[arrImages objectAtIndex:i] withFileName:@"image.jpg" andContentType:@"image/jpeg" forKey:[NSString stringWithFormat:@"image%d", i + 1]];
               }
[request startAsynchronous];
     }
     else {
              UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Message" message:@"Please select images..." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alertView show];
            [alertView release];
    }
} 
```

您也可以按照本教程来实现 ASIHttp As Asynchronous

[参考网址在这里](http://bit.ly/Khen7k)

# asp.net - 如何使用 Moq 模拟 HTTPcontext

> ID：10630192
> 
> 赞同：0
> 
> 时间：2012-05-17T05:16:37.193
> 
> 标签：asp.net, .net, moq

我公司有自己的 SDK，其中包含以下类：

```
public class SharePointContext(System.Web.HttpContext context)
{

} 
```

如何使用 Moq 模拟要传入参数的 HttpContext？来自互联网的示例使用 HttpContextBase 显然它会引发错误，因为您不能为具体类分配抽象类。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:28:35.833

对于最新的起订量，这样的东西应该可以工作。似乎 Moq 需要一个抽象类或接口，或者至少需要一个未密封的类。所有这些都使嘲笑变得困难`HttpContext`。

```
//class that returns all the mock objects you need..
public static class MockHelpers
{
   public static HttpContextBase GetFakeContext()
   {
       var context = new Mock<HttpContextBase>();
       //we need these for our context 
       var request = new Mock<HttpRequestBase>();
       var response = new Mock<HttpResponseBase>();
       var session = new Mock<HttpSessionStateBase>();
       var server = new Mock<HttpServerUtilityBase>();

       context.Setup(ct => ct.Request).Returns(request.Object);
       context.Setup(ct => ct.Response).Returns(response.Object);
       context.Setup(ct => ct.Session).Returns(session.Object);
       context.Setup(ct => ct.Server).Returns(server.Object);

       return context.Object;
   }
} 
```

然后你像这样使用它：

```
public class SharePointContext(MockHelpers.GetFakeContext()); 
```

# android - 如果屏幕关闭，为什么 GPS 在某些设备上不起作用？

> ID：10630194
> 
> 赞同：5
> 
> 时间：2012-05-17T05:16:40.877
> 
> 标签：android, gps

我正在开发一个 Android 应用程序。如果屏幕关闭，我发现 GPS 无法在某些设备上运行（三星 Galaxy S 版本 2.2.1、三星 Galaxy Ace 版本 2.3.6 Gingerbread、摩托罗拉 Diffy 2.2）。即使屏幕关闭，它也可以在其他设备（HTC Wildfire 2.3.3）上正常工作。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:24:42.813

我不确定这是否会发生，但我在加速度计上遇到了类似的问题。当屏幕锁定时，它不会给出任何传感器读数。所以我所做的是，每当我想要传感器读数时，我只需每 5 分钟进行一次唤醒锁定，这样屏幕就会打开，然后我就会得到传感器读数。应该对你有用。用户无需手动执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:12:15.517

[这](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK) `WakeLock`使您可以在屏幕关闭时使用传感器（与其他唤醒锁不同）。它所做的只是让 CPU 一直保持运转。

# python - 使用正则表达式匹配我的字符串内容？

> ID：10630197
> 
> 赞同：1
> 
> 时间：2012-05-17T05:16:58.447
> 
> 标签：python, regex, python-2.7

我想我应该使用正则表达式来匹配文件中的内容。

我想替换所有序列，`w=<DIGIT>`例如我想要实现的很多

```
s.replace('w=99923123','')
s.replace('w=23123','')
s.replace('w=123','') 
```

所以我想知道你是否可以建议一个与我的表达相匹配的正则表达式？

更新

我尝试了明显的，它似乎工作

```
>>> import re
>>> s='m=2&w=3'
>>> s=re.sub('w=\d', '', s)
>>> s
'm=2&' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:20:07.847

```
import re
pat = re.compile('w=[0-9]+')  # or you can use \d+
s = pat.sub('', s) 
```

* * *

## 更新

然后你需要注意，如果这是一个更复杂的，我的正则表达式也匹配 tw=123 和 tw=123a456，但不符合你的要求。相反，也许你根本不应该使用正则表达式（如果你有问题，然后使用正则表达式，你现在有两个问题，他们说）。你可以试试这个：

```
import urlparse
import urllib

s = 'w=123&q=456&tw=123&w=123abc&foo=bar&w=12'

# s here must be key=value&key=value only
parsed = urlparse.parse_qsl(s, keep_blank_values=True)
filtered = [ i for i in parsed if not (i[0] == 'w' and i[1].isdigit()) ]
s = urllib.urlencode(filtered) 
```

值得注意的是，它仅删除那些值仅由数字组成的 w=value 对。

# android - 降低滑动抽屉速度

> ID：10630203
> 
> 赞同：4
> 
> 时间：2012-05-17T05:18:08.447
> 
> 标签：android, slidingdrawer

我在我的代码中包含了滑动抽屉。想让它的动画比实际速度慢一点。有谁知道如何降低速度？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:26:11.853

根据我读过的所有内容，您需要在您的应用程序中重新创建 SlidingDrawer 类并在那里进行修改。

关于这个的另一个[问题](https://stackoverflow.com/questions/6884917/slidingdrawer-animation-velocity)。

还有一个指向[SlidingDrawer 类](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/widget/SlidingDrawer.java.htm)的链接。

希望这会有所帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:28:39.073

您应该看到以下链接：

1.  [滑动抽屉](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

2.  [SlidingDrawer 动画速度](https://stackoverflow.com/questions/6884917/slidingdrawer-animation-velocity)

你应该`animateToggle()`为此使用。

# javascript - XMLHttpRequest 在 Chrome 19 中的行为不同——“伪造”请求？

> ID：10630204
> 
> 赞同：3
> 
> 时间：2012-05-17T05:18:14.857
> 
> 标签：javascript, google-chrome, xmlhttprequest

这是一些示例代码。依次向同一个 url 发出四个 xmlhttprequests()。在这种情况下，我希望有四个请求通过网络进行，有四个不同的响应，因为在这种情况下，URL 在每次调用时都会返回一个新的 UUID。在 Chrome 18、Firefox 和 Safari 中，会发生这种情况。

然而，在 Chrome 19 中，只有一个请求通过网络传输，但浏览器的行为就好像所有四个请求都返回了相同的值。也就是说，回调执行了四次，但每次都使用相同的响应文本。开发者工具和 Wireshark 都确认实际上只发出了一个请求。

我认为这可能与浏览器缓存行为有关，但同时使用客户端（编译指示：无缓存）和服务器端（缓存控制：无缓存）并没有帮助。为每个请求添加一个不同的虚假查询参数确实会强制它发出所有四个实际请求，但我仍然很好奇发生了什么变化以及处理它的另一种方法可能是什么（除了 URL 参数）。我也怀疑我在做一些奇怪或错误的事情，因为我找不到其他人在谈论这件事。

```
<!doctype HTML>
<script>
  function doOne(i) {
    var xh =  new XMLHttpRequest();
    xh.open("GET", "/uuid", true);
    xh.setRequestHeader("pragma", "no-cache");
    xh.onreadystatechange = function() {
      if (xh.readyState == 4) {
        var p = document.createElement('p');
        p.innerHTML = xh.responseText;
        document.body.appendChild(p);
      }
    }
    xh.send(null);
  }
  window.onload = function() {
    for (var i = 0; i < 4; i++) {
      doOne(i);
    }
  }
</script> 
```

作为参考，这是我用于此测试用例 (web.py) 的示例服务器的内容：

```
#!/usr/bin/env python

import uuid
import web

urls = (
  '/uuid', 'Uuid',
)

class Uuid():
  def GET(self):
    web.header('Cache-Control', 'no-cache');
    return str(uuid.uuid1())

app = web.application(urls, globals())

if __name__ == '__main__':
  app.run() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:11:03.127

我在我的 Rails 应用程序中使用 Chrome 19 时看到了同样的问题。要修复它，这段代码对我来说很好：

```
before_filter :set_cache_buster
def set_cache_buster
  if request.xhr?
    response.headers["Cache-Control"] = "no-cache, no-store, max-age=0, must-revalidate"
    response.headers["Pragma"] = "no-cache"
    response.headers["Expires"] = "Fri, 01 Jan 1990 00:00:00 GMT"
  end
end 
```

它禁用每个 XMLHttpRequest 的缓存。

学分：http: [//blog.serendeputy.com/posts/how-to-prevent-browsers-from-caching-a-page-in-rails/](http://blog.serendeputy.com/posts/how-to-prevent-browsers-from-caching-a-page-in-rails/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T10:53:55.970

最近也偶然发现了这一点，并没有找到强制 Chrome 不重用响应的好方法。Firefox 似乎没有这种行为。

我已经提交了一个[铬问题](https://code.google.com/p/chromium/issues/detail?id=333804)，希望有人能说明这是预期的行为还是错误。

# php - 在 PHPUnit (CIUnit) 中使用 YAML 文件作为数据提供者

> ID：10630214
> 
> 赞同：4
> 
> 时间：2012-05-17T05:20:17.583
> 
> 标签：php, codeigniter, phpunit, yaml

我正在使用 PHP CodeIgniter 框架编写应用程序。我正在尝试通过扩展 PHPUnit 使用 CI_Unit 测试应用程序。为了测试模型，我尝试加载 PHPUnit 文档中定义的 YAML 数据提供程序，但收到错误消息。如果我捏造数据提供者对象，我会得到另一个错误。如果我为它提供一个普通的 PHP 数组，它会按预期运行。

我究竟做错了什么？这样做的正确方法是什么？以下是我的结果：

如果我返回`PHPUnit_Extensions_Database_DataSet_YamlDataSet`下面的 Yaml 文件的对象，我会得到：

> 数据集“客户”无效。

如果我循环返回的对象`PHPUnit_Extensions_Database_DataSet_YamlDataSet`并返回：我收到此错误：

> PHPUnit_Framework_Exception：“models.php”和“models.php”都无法打开。在第 100 行的 /Users/eric/pear/share/pear/PHPUnit/Util/Skeleton/Test.php

如果我为它提供一个普通的 PHP 数组，测试运行得很好。我用来运行测试的命令是：

> phpunit 模型

下面是我的 YAML 文件的示例。

```
Clients:
    1:
        client_id: 1
        client_information: "info number 1"
        client_key: 48fb10b15f3d44a09dc82d
    2:
        client_id: 2
        client_information: "info number 2"
        client_key: 48fb10b15f3d44addd 
```

我正在使用 PHP 5.3、PHPUnit 3.6.10、DBUnit 1.1.2、CodeIgniter 2.1.0 和与 CI 2.1.0 关联的 CI_unit。

编辑：附件是我的模型/Test.php 文件：

```
/**
 * test_add_client
 * @dataProvider add_client_provider
 */
public function test_add_client($client_id,$company_id,$software_id,$client_information,$client_key)
{
    $data = array('software_id' => $software_id,
                  'client_information' => $client_information,
                  'client_key'         => $client_key);
    try {
        $id = $this->_m->add_client($company_id,$data);
        $this->assertEquals(true, is_int($id));
    } catch (Exception $e){
        $this->assertEquals(true,false);
    }
}

public function add_client_provider()
{
    $result = new PHPUnit_Extensions_Database_DataSet_YamlDataSet(
        dirname(__FILE__)."/../fixtures/Clients.yml");

    // Case #1 returns this $result
    //return $result;

    foreach($result as $key => $value){
        if($key == 'Clients'){
            $substructure = $value;
        }
    }

    // Case #2 return the inner structure that is the table
    return $substructure;

    // Case #3 return an array of arrays
    $data = array(
                array(1,1,1,'test','text 2'),
                array(1,2,1,'test 3', 'test 3'));
    return $data;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T21:03:54.860

如[数据提供者](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)的 PHPUnit 文档中所述：

> 数据提供者方法必须`public`返回一个数组数组或一个实现`Iterator`接口并为每个迭代步骤生成一个数组的对象。对于集合中的每个数组，将调用测试方法，并将数组的内容作为其参数。

根据您的`Test.php`源代码，您似乎想要这样的东西：

```
 /**
     * test_add_client
     * @dataProvider add_client_provider
     */
    public function test_add_client($data)
    {
        $company_id = 0;
        $id = $this->_m->add_client($company_id, $data);
        $this->assertEquals(true, is_int($id));
    }

    public function add_client_provider()
    {
        $result = new PHPUnit_Extensions_Database_DataSet_YamlDataSet(
            dirname(__FILE__)."/../fixtures/Clients.yml");          

        // Return the Clients data
        $clients = array();
        $tbl = $result->getTable('Clients');
        for ($i = 0; $i < $tbl->getRowCount(); $i++) {
            $clients[] = $tbl->getRow($i);
        }
        return $clients;
    } 
```

似乎 PHPUnit 应该提供一个函数来将数据集表直接转换为数组数组，但快速浏览后我什么也没看到。

据我所知，该`phpunit.xml`文件无关紧要，可以从您的问题中删除。

您也不需要`try/catch`PHPUnit 测试方法中的块 - PHPUnit 会为您处理这些。

请注意，您`$company_id`的未定义，因此我将其设置为 0。您上面的方法参数和 YAML 数据似乎也不完全匹配，但这应该很容易解决。

通过将数组传递给测试函数，该函数会立即传递给`add_client`方法，您的代码也更加干燥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-12T15:11:06.340

**PHPUnit 提供程序自动加载器**

> 在 PHPUnit 中自动加载 CSV、JSON、PHP、XML 和 YAML 数据提供程序的魔术助手。

**安装**

```
composer require redaxmedia/phpunit-provider-autoloader 
```

**用法**

为您的测试套件创建 TestCaseAbstract：

```
<?php
namespace ExampleProject\Tests;

use PHPUnitProviderAutoloader;

/**
 * TestCaseAbstract
 *
 * @since 2.0.0
 *
 * @package ExampleProject
 * @category Tests
 */

abstract class TestCaseAbstract extends PHPUnitProviderAutoloader\TestCaseAbstract
{
    /**
     * directory of the provider
     *
     * @var string
     */

    protected $_providerDirectory = 'tests' . DIRECTORY_SEPARATOR . 'provider';

    /**
     * namespace of the testing suite
     *
     * @var string
     */

    protected $_testNamespace = __NAMESPACE__;
} 
```

从 TestCaseAbstract 扩展以自动加载 ExampleTest{_testMethod}.{csv|json|php|xml|yml} 文件：

```
<?php
namespace ExampleProject\Tests;

/**
 * ExampleTest
 *
 * @since 2.0.0
 *
 * @package ExampleProject
 * @category Tests
 */

class ExampleTest extends TestCaseAbstract
{
    /**
     * testMethod
     *
     * @since 2.0.0
     *
     * @param string $expect
     *
     * @dataProvider providerAutoloader
     */

    public function testMethod(string $expect = null)
    {
        $this->assertEquals($expect, 'test');
    }
} 
```

**阅读更多**

相关仓库：[https ://github.com/redaxmedia/phpunit-provider-autoloader](https://github.com/redaxmedia/phpunit-provider-autoloader)

示例集成：[YAML 测试](https://github.com/redaxmedia/phpunit-provider-autoloader/blob/master/tests/phpunit/Autoloader/YamlTest.php)自动加载[YAML 类提供者](https://github.com/redaxmedia/phpunit-provider-autoloader/blob/master/tests/provider/Autoloader/YamlTest.yml)和[YAML 方法提供者](https://github.com/redaxmedia/phpunit-provider-autoloader/blob/master/tests/provider/Autoloader/YamlTest_testMethod.yml)

# iphone - iphone sdk 上的网络服务

> ID：10630217
> 
> 赞同：0
> 
> 时间：2012-05-17T05:20:31.060
> 
> 标签：iphone, json, web-services

我是 iPhone 新手。我想了解网络服务，我的要求是我必须将注册详细信息存储到服务器中。我在服务器中有我的 php 脚本。如何存储这些详细信息并在另一个中获取这些详细信息`view`。我想使用 JSON 网络服务。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:34:42.010

我想你想要 JsonKit 请[使用这个链接](https://github.com/johnezang/JSONKit)，它支持 ios4 和 iOS 5

How to Implement json in your project (means Example)[使用这个链接](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)，这很有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:57:17.710

您可以使用[ASIHttp](http://allseeing-i.com/ASIHTTPRequest/How-to-use)进行服务器调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T05:59:34.537

输入注册详细信息并按下注册按钮后，您可以向 PHP 服务器发送 HTTP POST 请求，并将注册详细信息加密为 HTTP 参数，然后将其保存到数据库中。然后当您移动到下一个视图并想要获取注册详细信息时：-

**1.**如果不想保存在ios app上，可以使用Keychain在本地保存。[查看此处](http://mobiledevelopertips.com/core-services/using-keychain-to-store-username-and-password.html)了解如何存储 **2**的详细实现。如果您希望将它们保存到服务器，然后使用 HTTP 请求将它们获取到另一个视图，请发送 HTTP 请求并获取加密的（出于安全考虑）JSON，然后使用[SBJson对其进行解析框架。](http://stig.github.com/json-framework/)

# jsf-2 - 如何在 facelet 页面中包含外部 javascript 文件？

> ID：10630218
> 
> 赞同：2
> 
> 时间：2012-05-17T05:20:31.637
> 
> 标签：jsf-2, primefaces

在使用这样的 Facelet 模板的 Facelet 页面中：

```
<h:head>
    <h:outputScript name="custom.js" library="javascript" target="head"/>
</h:head>
<ui:composition template="../../WEB-INF/Template.xhtml">

</ui:composition> 
```

您如何包含自定义 javascript？在上面的代码中，由于 ui:composition facelet 标记，我的 custom.js 被忽略了。

我不想通过将我的 javascript 放入其中来弄乱我的页面，因此我将其外部化到我的资源文件夹中。

但是我如何实现我的目标？

**更新：**

我基本上有这个按钮，我想在我的 primefaces 按钮的 oncomplete 事件上添加自定义 javascript。

```
<p:commandButton value="Save"
        actionListener="#{memberManagedBean.save}"
        oncomplete="handleSaveNewMember(xhr, status, args)"
        update=":memberListForm:membersTable"
        process="@form" /> 
```

但是我没有将我的代码放入其中，而是将其外部化到我的 custom.js

```
function handleSaveNewMember(xhr, status, args) {
    /*More Code*/
    addMemberDlg.hide();
} 
```

但是查看为我的按钮生成的 HTML，我的自定义 javascript 代码不包括在内，只添加了函数名称。

```
<button id="createupdateform:j_idt18" oncomplete:function(xhr, status, args){handleSaveNewMember(xhr, status, args);}});return false;" type="submit"><span class="ui-button-text">Save</span></button> 
```

为什么你认为会这样？

**更新 2**

您应该将脚本插入 ui:define facelet 标记内，而不是 ui:composition 内。

```
<ui:composition template="../../WEB-INF/Template.xhtml">
    <ui:define name="content">
        <h:outputScript name="showmembers.js" library="javascript" target="head"/>
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:28:33.790

你可以把它放在你的`<ui:composition`

```
<ui:composition template="../../WEB-INF/Template.xhtml">
    <h:outputScript name="custom.js" library="javascript" target="head"/>
</ui:composition> 
```

或放置`<h:outputScript`在您的`Template.xhtml`

反正`<h:head>`最好放在你`Template.xhtml`唯一的...

# email - 如何确定是否显示outlook项目

> ID：10630220
> 
> 赞同：2
> 
> 时间：2012-05-17T05:20:36.213
> 
> 标签：email, post, outlook, vsto

我正在 Visual Studio 2010 中构建一个 Outlook 加载项，使用 VSTO 和 VB.net。

现在我正在处理邮件和邮寄项目。有没有办法确定当前显示的是邮件项目还是帖子项目？

我要做的就是关闭所有显示（打开）的项目（如果有的话），然后再将它们从当前文件夹移动到另一个文件夹。

我用谷歌搜索了很多，但我找不到我的问题的答案。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:13:03.333

您只需要检查该[`MailItem.EntryID`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.entryid)属性以查看一个邮件项目是否存在于 的集合中，[`Application.Inspectors`](http://msdn.microsoft.com/en-us/library/office/ff868935%28v=office.15%29.aspx)并且与它有一个[`Inspector.CurrentItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._inspector.currentitem.aspx) 关联`EntryID`。下面是我过去使用过的一个有用的辅助方法。

**注意：**此技术[不适用于新邮件（撰写），因为新邮件项目`EntryID`在保存/发送之前](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.entryid)不包含。

```
internal static bool HasInspector(Outlook.MailItem mailItem)
{
    bool HasInspector = false;
    try {
        if (mailItem == null || string.IsNullOrEmpty(mailItem.EntryID)) return HasInspector; // short-circuit invalid params or new mail message (no entryid since it's not saved)
        foreach (Outlook.Inspector inspector in Globals.ThisAddIn.Application.Inspectors)
        {
            Outlook.MailItem currentMailItem = inspector.CurrentItem as Outlook.MailItem;
            if (currentMailItem != null && !string.IsNullOrEmpty(currentMailItem.EntryID))
            {
                HasInspector = Globals.ThisAddIn.Application.Session.CompareEntryIDs(currentMailItem.EntryID, mailItem.EntryID);
                Marshal.ReleaseComObject(currentMailItem); currentMailItem = null; // resource RCW cleanup
            }
        }         
    }
    catch { } // attempt to request inspector for mailitem
    return HasInspector;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-13T12:30:11.760

到目前为止，我发现的唯一解决方案是循环遍历`Application.Inspectors`（记住它是基于 1 的集合，而不是基于 0 的集合）并查看是否有任何检查员的值`CurrentItem`等于您的邮件项目。

您不能使用`MailItem.GetInspector`，因为如果邮件项尚不存在，这将为邮件项创建一个检查器窗口。

如果存在的话，希望有人能够提供更好的解决方案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-13T16:35:02.880

遍历 Application.Inspectoes 集合中的检查器，为每个检查器读取 CurrentItem 属性（它可以返回不同类型的对象，例如 MailItem、ContactItem 等）。读取 EntryID 属性并使用 Namespace.CompareEntryIDs 将其与相关项目的条目 ID 进行比较。

# ruby - 为什么我的 gem 需要这么长时间才能加载？

> ID：10630221
> 
> 赞同：14
> 
> 时间：2012-05-17T05:20:38.533
> 
> 标签：ruby, rubygems

我正在开发我的第一个 gem，称为[t_time_tracker](https://github.com/christiangenco/t_time_tracker)（哇哦！）。一切进展顺利；我尽可能地对其进行了优化，以尽可能少地减少执行时间：

```
t_time_tracker[master*]% time ruby -Ilib ./bin/t_time_tracker 
You're not working on anything
0.07s user 0.03s system 67% cpu 0.141 total 
```

（这是我的应用程序的“hello world”——不带参数调用它只会打印出“你没有在做任何事情”）

大约十分之一秒，占用了我 67% 的 CPU - 很酷，我可以忍受。感觉相当瞬间。让我们构建它：

```
$ gem build t_time_tracker.gemspec
$ gem install ./t_time_tracker-0.0.0.gem 
```

并对已安装的二进制文件执行完全相同的操作：

```
$ time t_time_tracker
You're not working on anything
t_time_tracker  0.42s user 0.06s system 93% cpu 0.513 total 
```

半秒？！那个是从哪里来的？！让我们添加一些调试输出并包含开发二进制文件中的系统 gem，看看瓶颈在哪里：

```
t_time_tracker[master*]% time ruby ./bin/t_time_tracker  
(starting binary)
(require 'time' and 'optparse')
0.041432
(before `require 't_time_tracker')
0.497135
(after `require 't_time_tracker')
(Gem.loaded_specs.keys = t_time_tracker)
(initializing TTimeTracker class)
You're not working on anything
ruby ./bin/t_time_tracker  0.44s user 0.07s system 91% cpu 0.551 total 
```

好吧，所以 `require 't_time_tracker' 行似乎是罪魁祸首。让我们在 irb 中再次尝试以进一步缩小范围：

```
$ irb
>> t=Time.now; require 't_time_tracker'; puts Time.now-t
0.046792
=> nil 
```

...什么？但这只是半秒钟的时间！让我们尝试使用调试输出构建 gem：

```
$ gem build t_time_tracker.gemspec
$ gem install ./t_time_tracker-0.0.0.gem
$ time t_time_tracker
(starting binary) <---noticeable half second delay before this line shows up
(require 'time' and 'optparse')
0.050458
(before `require 't_time_tracker')
0.073789
(after `require 't_time_tracker')
(Gem.loaded_specs.keys = t_time_tracker)
(initializing TTimeTracker class)
You're not working on anything
t_time_tracker  0.42s user 0.06s system 88% cpu 0.546 total 
```

所以是的，这个 0.5 秒的延迟是从哪里来的？我通常不会在意，但这是我每天要调用大约 50 次来更新我正在做的事情的事情。50 * 0.5 秒 * 365 天 * 70 年 = 失去生命的 15 天。

系统信息：

Mac OS X 10.7.3。2 GHz 英特尔酷睿 2 双核。4 GB 内存。红宝石 1.9.2p290。

```
% gem -v
1.8.10<---noticeable half second delay before this line shows up
% gem list | wc -l
209 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T16:03:33.523

自从我看到这个以来已经有一段时间了，但是 RubyGems 在过去（也许是现在）已经花费了很长时间来加载，主要有两个原因：

*   它会通过'yaml'加载许多相对昂贵的库，如'time'。通常你不在乎，因为它本身相对于 ruby​​ 很慢，与许多脚本的运行时间相比并不慢。
*   它将扫描所有已安装的 gem 并将最新的 gemspecs 加载到内存中。如果你有很多宝石，这需要很长时间。

这些问题可能仍然存在，也可能不存在。但是，您*总是*会从 RubyGems 中获得一些开销。如果您真的需要性能，那么只需自己设置加载路径！如您所知，没有 RubyGems 的 Ruby 非常快。

要查看 gem 的安装位置：

```
gem list -d YOUR_GEM_NAME 
```

您将看到安装目录。您的 gem 将位于 INSTALL_DIR/gems/GEM_NAME-VERSION 所以尝试执行：

```
time ruby -IINSTALL_DIR/gems/GEM_NAME-VERSION/lib INSTALL_DIR/gems/GEM_NAME-VERSION/bin/t_time_tracker 
```

这很多，但您应该能够将其包装在一个单独的脚本中，如下所示（将其命名为 t_time_tracker）：

```
#!/usr/bin/env ruby -IINSTALL_DIR/gems/GEM_NAME-VERSION/lib
load 'INSTALL_DIR/gems/GEM_NAME-VERSION/bin/t_time_tracker' 
```

然后：

```
chmod +x t_time_tracker
time ./t_time_tracker 
```

并将该文件放在 PATH 中的任何位置。RubyGems 会自动为您完成，但您当然会接受 RubyGems 的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:59:49.973

在您的`$LOAD_PATH`宝石中使用的可能是罪魁祸首。理想情况下，您的`lib`文件夹的路径首先位于该阵列上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T08:49:11.640

这可能是因为您拥有“来自本地”的宝石。所以 ruby​​ 在接他之前必须检查其他路径。

例如。如果您在执行时将有名为 json.rb 的文件和全局安装的 gem 称为 json

```
require 'json' 
```

他会找到第一个宝石并加载它:)。最后加载本地路径。如果您将 gem 捆绑并安装，您将看到由于 gem 中的不同位置而大大提高了速度。我不会担心开发中缺少加载时间。

# c# - Try/Catch/Finally，在 finally 中使用 Catch 的异常？

> ID：10630223
> 
> 赞同：1
> 
> 时间：2012-05-17T05:20:46.520
> 
> 标签：c#, try-catch-finally

我`try catch finally`在这里查看了其他一些问题，但我不确定这个问题是否已得到解答。做类似的事情是否闻起来很糟糕：

```
Exception? ex = null;
try { //something }
catch (Exception e) { ex = e ;}
finally {
    DoSomething();        
}
... //more code

//end of method
if (ex !=null) { throw ex; } 
```

基本上，我试图确保某些代码（在 try/catch/finally 之外）运行，并且如果发生异常则抛出异常，但直到所述代码运行之后。我不能将所有代码都放在`finally`块中，因为它超出了某些条件。

如果这样做，事实上，闻起来很糟糕（我怀疑它确实如此），人们将如何实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T05:28:09.987

这绝对是一种代码味道。在方法末尾重新抛出异常将覆盖异常的调用堆栈，因此看起来所有异常都发生在方法末尾而不是真正发生的地方。

如果你不能将额外的代码放在现有的 finally 中，你可以创建嵌套的 try..finally 块：

```
try {
  try { //something }
  finally {
      DoSomething();        
  }
   ... //more code
}
finally {
  // cleanup code
} 
```

***来自 OP 的注释：***请参阅[此代码](http://pastie.org/3924037)以了解此答案的作者让我正确得出的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:24:42.263

既然你想在发生异常的情况下运行“更多代码”，为什么不把“更多代码”放在最后呢？这本质上就是 finally 的用途——即使发生异常也保证执行

所以：

```
try {
    // something 
} catch (Exception e) {

    ***// more code here***

    DoSomething();
    throw;
} 
```

存储前任并抛出前任；会吞下内心的期待。你想扔；以确保堆栈中的任何内容都不会被吞下。

# javascript - 点击时翻译 div

> ID：10630224
> 
> 赞同：2
> 
> 时间：2012-05-17T05:20:49.710
> 
> 标签：javascript, jquery, translate-animation

我需要让 div 在单击时移出，然后它们会在绑定到的第二个事件上移回。现在，这工作得很好，但只是第一次。它需要能够在多次点击时反复出现。

这样做的方法似乎是 with`translate`但它全部在 Css 上，它不喜欢点击。（我试过了，但它不起作用）。

谁能给我指出一个可以解释如何的网站，或者只是帮助我自己？谢谢

编辑：好的，这是脚本...

```
$('li, .thumbs').on('click', function() {
        $("#myVid").css("-webkit-transform","translate(-2070px, 0px)");
                //click plays a video
//some stuff happens
$('#myVid').bind("playing", function() {
        $("#myVid").css("-webkit-transform","translate(0px, 0px)"); 
```

这实际上是与问题相关的所有内容...... **编辑：所以，我将其更改为 CSS `addClass`，`removeClass`这是当前脚本

```
$('li, .thumbs').on('click', function() {
        $("#myVid").addClass('move');
//stuff happens
$('#myVid').bind("playing", function() {
        $("#myVid").removeClass('move'); 
```

然后是 CSS

```
.move {
    -webkit-transform: translateX(2000px);
} 
```

但是当它起作用时，它会闪烁*很多*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:35:41.340

我刚刚制作了这个 jsfiddle ......希望它有所帮助。

我喜欢将 CSS 类添加到需要更改的元素（或父元素以触发一整套更改）。

在示例中，只需向我的 div 添加和删除“已移动”类，它将调整必要的空间。

[http://jsfiddle.net/fvgaK/5/](http://jsfiddle.net/fvgaK/5/)

[编辑：更新以使其与 ie 兼容]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T05:50:25.750

您可以使用 CSS3。但它不能在所有浏览器上运行。

您可以利用此处的信息。 [http://www.w3.org/TR/css3-2d-transforms/](http://www.w3.org/TR/css3-2d-transforms/)

你也可以这样做。

```
.rotate {
    -webkit-transform: rotate(30deg); /* safari and chrome */
    -moz-transform: rotate(30deg);/*firefox browsers */
    transform: rotate(30deg);/*other */
    -ms-transform:rotate(30deg); /* Internet Explorer 9 */
    -o-transform:rotate(30deg); /* Opera */
} 
```

[http://jsfiddle.net/jJdxc/](http://jsfiddle.net/jJdxc/)

编辑：

我在互联网上搜索时看到了这个 javascript 插件。这对翻译过程非常有用。

[http://fabricjs.com/](http://fabricjs.com/)

[http://fabricjs.com/kitchensink/](http://fabricjs.com/kitchensink/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T15:07:33.403

要解决可能发生的闪烁/抖动问题，您可以尝试将 css 属性设置`backface-visibility`为`hidden`动画元素。

在你的情况下：

```
#myVid {
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  backface-visibility: hidden;
} 
```

这解决了我的“闪烁”元素问题。

更多信息： [https ://developer.mozilla.org/en-US/docs/Web/CSS/backface-visibility](https://developer.mozilla.org/en-US/docs/Web/CSS/backface-visibility)

# android - “未安装应用程序”，是 ADT 的错误吗？

> ID：10630226
> 
> 赞同：1
> 
> 时间：2012-05-17T05:20:54.183
> 
> 标签：android, adt, android-install-apk, message-digest

我在 Eclipse 中通过 ADT 导出了一个 apk，并尝试将此 apk 安装到 avd 中，但它引发了“未安装应用程序”。

我检查了logcat，发现了这个：

```
W/PackageParser(59): java.lang.SecurityException: META-INF/MANIFEST.MF has invalid digest for res/drawable-mdpi/ic_launcher.png in /data/app/vmdl25264.tmp
E/PackageParser(59): Package com.ep.android has no certificates at entry res/drawable-mdpi/ic_launcher.png; ignoring! 
```

在apk的“META-INF/MANIFEST.MF”文件中，我发现了这个：

```
Name: res/drawable-mdpi/ic_launcher.png
SHA1-Digest: 4ss2KZ3FzkmfE6HAAsVu0aJKx1U= 
```

所以我尝试使用自己的Java编程为png文件生成一个SHA1-Digest，结果是“sjmKOs4BYDXg7COdeTc8tIfPBR0=”，这是完全不同的。我用于生成 SHA1-Digest 的 Java 代码是：

```
public static void main(String[] filename) throws NoSuchAlgorithmException,
        Exception {

    MessageDigest md = MessageDigest.getInstance("SHA1");
    FileInputStream in =  new FileInputStream("./ic_launcher.png");
    int bytes = 0;
    while ((bytes = in.read()) != -1) {
        md.update((byte)bytes);
    }

    in.close();
    byte[] thedigest = md.digest();
    System.out.println(Base64Encoder.encode(thedigest));
} 
```

似乎 avd 和我的代码都认为 apk 的 MANIFEST.MF 中的 SHA1-Digest 无效。所以，我猜 ADT 中的 SHA1-Digest 生成器在这里做错了。它是一个错误吗？还是我错过了什么？

# c - 将程序集转换为等效的 c 代码

> ID：10630232
> 
> 赞同：0
> 
> 时间：2012-05-17T05:21:31.920
> 
> 标签：c, assembly

请帮我将以下代码转换为等效的 C 代码。提前致谢。该模块返回一个 uint 值。代码如下。

```
inline uint jpeg_decoder::huff_extend(uint i, int c)
{
  _asm
  {
    mov ecx, c
    mov eax, i
    cmp eax, [ecx*4+extend_mask]
    sbb edx, edx
    shl edx, cl
    adc eax, edx
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:18:31.617

可能你不熟悉`sbb`and`adc`指令，即*借位减法*和*进位加法*。
`sbb edx,edx`是设置`edx`为 -1 的常见构造，如果设置了进位 - 一条指令否定进位标志并将其移动到寄存器中（开发人员手册不会告诉你）。
移位指令再次移入进位 - 仅当实际存在移位时。

所以这个功能基本上是在做：

```
if ( extend_mask[c] > i ) 
    return i + (c != 0);
else
    return i; 
```

# vb.net - 如何克服共享点中的访问被拒绝错误？

> ID：10630234
> 
> 赞同：0
> 
> 时间：2012-05-17T05:22:09.957
> 
> 标签：vb.net, sharepoint

这是代码，我正在使用此代码在共享点的列表中插入数据。如果用户有权限，则此代码将数据插入列表。如果用户没有权限，那么它会引发错误访问被拒绝。如何克服这一点？

```
Protected Sub Btn_Registration_Click(ByVal sender As Object, ByVal e As                                                      System.EventArgs) Handles Btn_Registration.Click
    SPSecurity.RunWithElevatedPrivileges(AddressOf TcregistrationRun)
End Sub
Public Sub TcregistrationRun()     
            Dim _TCNricNum As String = Session("IC").ToString
            Dim _Msite As SPSite = New SPSite(SPContext.Current.Site.Url)
            Dim _MWeb As SPWeb = _Msite.OpenWeb("/Admin")
            _MWeb.AllowUnsafeUpdates = True              
            NewEnTry.Update()
            _MWeb.AllowUnsafeUpdates = False 
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:35:49.980

试试这个...在调用中创建一个新的 Web 实例和一个新的站点实例，以便以提升的权限运行。这将确保您拥有更高权限下的新实例。如果您允许在您的网站上进行匿名访问，它应该可以工作。[请参阅此处](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/59937fe2-64fe-4a0f-9cc6-176efd096b9c)的线程。您还需要记住在方法调用中获取列表的实例。

```
using (SPSite site = new SPSite(SPContext.Current.Site.ID)) 
{ 
   using (SPWeb web = site.AllWebs[SPContext.Current.Web.ID]) 
   { 
      web.AllowUnsafeUpdate = true; 

      // Get instance of list item and set the values 

      // Call update on the list item

      web.AllowUnsafeUpdate = false;
   } 
} 
```

# android - 单选按钮 setId 存储并能够在不同的 Activity 之间获取

> ID：10630241
> 
> 赞同：0
> 
> 时间：2012-05-17T05:22:56.490
> 
> 标签：android

我开始学习安卓编程。我创建了一些单选按钮并在单选组中。我在这个网站上搜索，其他程序说我可以将 id 设置为单选按钮。我怎样才能得到它，它是否能够存储和进入不同的活动，因为我想将它们设置为 MCQ 或调查的答案！非常感谢

```
int id[] = new int[10];
RadioGroup AnswerRG = (RadioGroup) findViewById(R.id.AnswerRG);
AnswerRG.setOnCheckedChangeListener(this);
for(int i=0; i<10; i++)
{
    rb1[i] = new RadioButton(this);
    AnswerRG.addView(rb1[i]);
    rb1[i].setText("Option " + i +":" );
    rb1[i].setId(id[i]);
}
public void onCheckedChanged(RadioGroup rg, int arg1)
{
    switch(arg1)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:33:13.927

您可以使用共享首选项存储其值。这样你就可以在差异活动中获得它的价值：

检查这个[链接](http://developer.android.com/reference/android/content/SharedPreferences.html)

# facebook - 在 Lion MacOSX 上将 facebook SDK 与 XCode 4.3.2 集成时出错

> ID：10630244
> 
> 赞同：0
> 
> 时间：2012-05-17T05:23:16.287
> 
> 标签：facebook, ios5, osx-lion, xcode4.3

根据 facebook 的开发文档：

创建 iOS Facebook SDK 静态库

如果您创建一个启用了自动引用计数 (ARC) 的 iOS 应用程序，那么您应该使用 iOS Facebook SDK 的静态库版本，而不是从 src 文件夹中拖入文件。iOS Facebook SDK 的最新版本包含一个 shell 脚本，您可以运行该脚本来构建静态库。您可以通过命令行调用脚本目录下的 build_facebook_ios_sdk_static_lib.sh 构建脚本来执行此操作，例如：

% ~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh

但是当我尝试运行上述脚本时，我收到一条错误消息：

在 /Applications/XCode.app/Contents/Developer/usr/bin 中找不到 xcodebuild

我尝试打开脚本并发现导致错误的代码价格：

```
# The Xcode bin path
if [ -d "/Developer/usr/bin" ]; then
    # < XCode 4.3.1
XCODEBUILD_PATH=/Developer/usr/bin
else
    # >= XCode 4.3.1, or from App store
XCODEBUILD_PATH=/Applications/XCode.app/Contents/Developer/usr/bin
fi

XCODEBUILD=$XCODEBUILD_PATH/xcodebuild
test -x "$XCODEBUILD" || die "Could not find xcodebuild in $XCODEBUILD_PATH" 
```

我该如何调整脚本来解决上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T20:35:52.917

确保您的 xcode 4.3.2 已安装在默认位置（/Applications/Xcode.app），因为 Facebook 在搜索 xcodebuild 二进制文件时会做出该假设。

如果 xcode 4.3.2 位于不同的文件夹中，只需修改上述脚本即可。

顺便说一句，在我的系统上，我确实有 xcodebuild；它位于：/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild

# xaml - 如何使用 XAML 和 C# 为 Windows 8 Metro 风格应用程序创建一个时间屏幕（如条款和条件屏幕）

> ID：10630245
> 
> 赞同：1
> 
> 时间：2012-05-17T05:23:16.783
> 
> 标签：xaml, windows-8, windows-runtime, windows-store-apps, winrt-xaml

我是 Windows-8 Metro 应用程序开发的新手，我正在使用 XAML 和 C# 开发我的应用程序。我的目标是创建一个屏幕（或一些对话框），它将显示一些内容，用户必须接受或退出。

在按钮接受单击应用程序中的其他页面将出现，退出时，应用程序将被终止。

此屏幕（条款和条件屏幕）在接受一次后将不再出现。

我的问题是，使用 Popup 或 XAML 页面或其他更好的方法来开发这种类型的屏幕的最佳方法是什么？

我能够创建一个弹出窗口（看起来不太好）和 XAML（看起来不错）。

请指教。

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:31:20.977

您决定应用程序首次打开时显示哪个页面，因此您可以检查您的法律信息页面是否已显示并接受以决定是否显示它，因此它可以只是应用程序启动后的第一页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T22:40:26.263

[我认为http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples)上提供的示例应用程序包中的启动屏幕示例示例将具有您正在寻找的内容。

# wpf - WPF C#将xaml对象作为参数传递

> ID：10630255
> 
> 赞同：1
> 
> 时间：2012-05-17T05:24:49.827
> 
> 标签：wpf, xaml, user-controls, parameter-passing

我有 MyUserControl 类，它扩展了 UserControl，带有一个参数：

```
namespace MyNameSpace
{
    public partial class MyUserControl: UserControl
    {
        public MyUserControl()
        {
            InitializeComponent();
        }

        private Control _owner;
        public Control Owner
        {
            set { _owner = value; }
            get { return _owner; }
        }
    }
} 
```

例如，如何将 XAML 中的 Grid 作为该参数传递？

```
<Window x:Class="MyNameSpace.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:my="clr-namespace:MyNameSpace">
    <Grid x:Name="grid1">
        <my:MyUserControl x:Name="myUserControl1" Parent="*grid1?*" />
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:48:47.073

您需要将*Owner*属性实现为**DependencyProperty**。这是用户控件所需的代码：

```
public static readonly DependencyProperty OwnerProperty =
    DependencyProperty.Register("Owner", typeof(Control), typeof(MyUserControl), 
    new FrameworkPropertyMetadata(null, OnOwnerPropertyChanged)
);

private static void OnOwnerPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
{
    ((MyUserControl)source).Owner = (Control)e.NewValue;
}

public Control Owner
{
    set { SetValue(OwnerProperty, value); }
    get { return (Control)GetValue(OwnerProperty); }
} 
```

然后在 XAML 中，您将能够按预期设置属性：

```
<Button x:Name="Button1" Content="A button" />
<my:MyUserControl Owner="{Binding ElementName=Button1}" x:Name="myUserControl1" /> 
```

（请注意，您的示例不起作用，因为*grid1*继承自类型*FrameworkElement*，而不是*Control*。您需要将*Owner*属性更改为类型*FrameworkElement*才能将其设置为*grid1*。）

有关依赖属性的更多信息，请参阅这个优秀的教程： http: [//www.wpftutorial.net/dependencyproperties.html](http://www.wpftutorial.net/dependencyproperties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:52:03.937

你应该使用 DependancyProperty 进行绑定，如之前所述，你也可以使用*RelativeSource*

```
Parent={Binding RelativeSource={RelativeSource AncestorType=Grid}} 
```

# ios - 无法在设备上加载我的 iOS 应用程序的图像

> ID：10630258
> 
> 赞同：0
> 
> 时间：2012-05-17T05:25:07.053
> 
> 标签：ios

在我的 iOS 应用程序中，我有一些图像，当在模拟器上运行应用程序时，会显示图像，但在 iPod 上运行它时，不会显示图像。是什么原因？请告诉我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:35:33.690

发生此问题的 99% 的可能性是由于文件名。您必须在代码中使用准确的文件名（考虑字母的大写/小写），因为它在您的资源中。

例如，在资源中，如果您指定“MyImage.png” `[UIImage imageNamed:@"myimage.png"];`，它将在模拟器上运行 - 没有问题，但它不会在设备上运行。对于设备，您必须使用`[UIImage imageNamed:@"MyImage.png"];`它才能使其工作。

祝你好运！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:49:23.730

右键单击您的应用程序文件 (.app) 选择取消存档并查看文件夹中的图像文件名。可能与您的姓名不同（大写/小写）。

# python - 如何在一组 N 深的对象中创建一个列表或每个排列

> ID：10630259
> 
> 赞同：1
> 
> 时间：2012-05-17T05:25:09.310
> 
> 标签：python, list, python-2.7

我有一个 Action 对象的元组

我想创建一个包含所有可能的 Action 对象 N 排列的列表。

即，如果我有吃、睡、喝和 N = 2 的动作

清单将是

```
[[Eat, Eat],
 [Eat, Sleep],
 [Eat, Drink],
 [Sleep, Eat],
 [Sleep, Sleep],
 [Sleep, Drink],
 [Drink, Eat],
 [Drink, Sleep],
 [Drink, Drink]] 
```

现在，我有一个比三个动作大得多的列表，N 可能是 3 或更多。

我将如何在 Python 2.7 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T05:29:19.167

听起来你想要一个列表的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)本身。使用[`itertools.product()`](http://docs.python.org/library/itertools.html)：

```
>>> import itertools, pprint
>>> mylist = ["Eat","Sleep","Drink"]
>>> my_combination = list(itertools.product(mylist, repeat = 2))
>>> pprint.pprint (my_combination)
[('Eat', 'Eat'),
 ('Eat', 'Sleep'),
 ('Eat', 'Drink'),
 ('Sleep', 'Eat'),
 ('Sleep', 'Sleep'),
 ('Sleep', 'Drink'),
 ('Drink', 'Eat'),
 ('Drink', 'Sleep'),
 ('Drink', 'Drink')] 
```

可选`repeat`参数控制列表的“深度”。

请注意，列表的大小会随着深度呈指数增长`N`。不要一次实现整个列表 - 相反，一次使用一个元素。

```
# Don't do this - will crash Python with out-of-memory error
list(itertools.product(my_list, repeat = 100000))

# Iterate over the list instead
for one_combination in itertools.product(my_list, repeat = 100000):
    print (one_combination) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:59:24.083

```
>>> import itertools
>>> actions='eat','sleep','drink'
>>> mylist=[]
>>> [mylist.append(list(i)) for i in list(itertools.product(actions,repeat=2))]
[None,None, None, None, None, None, None, None, None]
>>> mylist
[['eat', 'eat'], ['eat', 'sleep'], ['eat', 'drink'], ['sleep', 'eat'], ['sleep', 'sleep'],   ['sleep', 'drink'], ['drink', 'eat'], ['drink', 'sleep'], ['drink', 'drink']] 
```

# c# - 我想在单独的数据库中更新带有假期的日历

> ID：10630260
> 
> 赞同：0
> 
> 时间：2012-05-17T05:25:11.653
> 
> 标签：c#, asp.net-mvc, razor

我正在使用 C#.net 和 MVC + razor 引擎。

我想更新日历。假期保存在 SQL 中的单独表中。我需要获取该数据并更新日历，以便用户能够看到不同颜色的假期。

我可以用jquery吗？

# alfresco - Alfresco 默认属性的最大和最小长度，例如 cm:name, cm:title

> ID：10630263
> 
> 赞同：2
> 
> 时间：2012-05-17T05:25:37.237
> 
> 标签：alfresco

我想获取在高级搜索页面中显示的默认属性 cm:name、cm:title、cm:description、cm:modified 和 cm:modifier 的露天最大和最小长度。

我知道可以使用内容模型约束来给出属性约束。[http://wiki.alfresco.com/wiki/Content_Model_Constraints](http://wiki.alfresco.com/wiki/Content_Model_Constraints)但我没有找到默认属性。

谁能给我提示或解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:02:15.733

The limitation of the field size for d:text will be decided by the column type of your database.

For example, if you're using an Oracle database with d:text mapping to a varchar2 column [data type](https://docs.oracle.com/cd/B28359_01/server.111/b28320/limits001.htm), you will have a maximum of 4000 bytes. That doesn't mean a length of 4000 characters. Alfresco requires UTF-8 encoding which means [each character will take up 1-4 bytes](https://stackoverflow.com/questions/1049139/do-certain-characters-take-more-bytes-than-others).

Updated: 9/29/2016 Corrected this answer.

# c++ - C++ 远程单元测试

> ID：10630269
> 
> 赞同：3
> 
> 时间：2012-05-17T05:26:24.090
> 
> 标签：c++, unit-testing, eclipse-cdt

我正在开发一个开发和目标环境完全不同的项目。目标环境有不同的外围设备、IO 卡等，我的项目经常使用这些外围设备。而我的开发环境缺少这些外围设备。因此，我的开发箱上的单元测试大部分时间都是无用的。

我正在使用 Eclipse CDT 和远程调试插件，并且正在通过网络进行调试，我想更好地利用单元测试，并且基于上述事实，我想知道我最好的选择是什么。到目前为止，我一直在为我添加的每个新功能编写测试程序，并通过远程调试对其进行测试，这似乎是一种低效的测试方式，因为编写测试和执行测试需要大量时间。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:37:51.050

在这种环境下，如果没有昂贵的工具是很难做到的。我认为最好的解决方案是像您一样编写测试程序，但是将它们全部组合成一个程序，您可以启动一次并让它运行所有测试而无需人工干预。我为此使用了[Boost Test 库](http://www.boost.org/doc/libs/1_49_0/libs/test/doc/html/index.html)。

真正的关键是弄清楚如何编写测试，以便它们可以自检。您不希望您的测试代码执行需要您手动验证结果的操作。这可能意味着要在其他地方运行第二个程序，该程序监视目标环境外围设备的输出，并在它与测试代码应该发送的内容不匹配时抱怨。测试毕竟是为了验证正确性，而不仅仅是证明某些东西不会崩溃。

当然，测试也需要聪明地编写。如果您正在设计通信协议和网络驱动程序，您可能需要远程测试代码来确认从网络端口发送的正确字节，但您不需要它来测试您的通信协议。测试代码可以创建一个虚拟网络设备并在其上运行协议测试（甚至可以在您的开发环境中运行），因此您应该能够在开发环境中本地测试除硬件驱动程序之外的所有内容。

# c# - 使用 .NET 程序集的 Delphi 出现 OLE 错误 8013150A（以管理员身份运行奇怪）

> ID：10630274
> 
> 赞同：2
> 
> 时间：2012-05-17T05:26:58.333
> 
> 标签：c#, delphi, ole, code-access-security

我已经构建了一个 .NET 程序集来访问我们的一个数据库，并传递给另一个程序员在他们的 Delphi 应用程序中使用。

在以用户登录（没有管理员权限）运行的 Vista 和 Windows 7 机器上，运行 Delphi EXE 失败并显示“Ole 错误 8013150A”，但在我们测试的所有其他操作系统类型上都可以正常工作。

Delphi EXE 在以管理员身份运行时工作。

一旦 EXE 以管理员身份运行*一次*，从那时起它在正常运行时将正常工作。

我在想在需要管理员权限的 Delphi 应用程序中实例化 COM 接口时需要在注册表中写入一些内容，但是一旦写入就不需要再次完成......或者类似的东西？

错误 8013150A 似乎与我能在上面找到的少量信息中的安全错误有关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:05:55.653

问题原来是 .NET 程序集中的以下代码

```
string cs = "ANameDoesntExist";
EventLog elog = new EventLog();
if (!EventLog.SourceExists(cs))
{
    EventLog.CreateEventSource(cs, "Application");
}
elog.Source = cs;
elog.EnableRaisingEvents = true; 
```

在通过用户帐户登录的 Vista 和 Windows 7 机器中，只需将此代码放在基本表单上，就会导致 System.Security.Security 异常。

它将在管理员中工作，当然在创建之后在用户安全中工作！

具有讽刺意味的是，添加此日志记录是为了尝试找出我们在代码中遇到其他问题的原因！

该错误也出现在 StackOverflow 中[C#: Simple Windows Service Gives Security Exception](https://stackoverflow.com/questions/1373887/c-simple-windows-service-gives-security-exception)但当然我最初是在追踪 OLE 异常！

谢谢您的帮助

# javascript - json调用后重定向？

> ID：10630275
> 
> 赞同：1
> 
> 时间：2012-05-17T05:27:12.120
> 
> 标签：javascript, ajax, json, jquery

我的应用程序上有一个登录窗口。用户输入登录详细信息，并将其发送到服务器，如下所示：

```
$.ajax({
            url: href,
            dataType: 'json',
            type: 'POST',
            data: form.serializeArray(),
            success: function (json, textStatus, XMLHttpRequest) {
                json = json || {};
                if (json.success) {
                    switch (action) {
                        case "xxx":

                        <more code here>

                        default:
                            location = json.redirect || location.href;
                    }
                } else { 
```

当我跟踪代码时，我看到它转到以“location =”开头的行。我看到 json.redirect 设置为 null 并且 location.href 设置为当前 URL。

我希望它重定向到正确的 URL，但是当我允许代码继续时，它什么也不做，也不会转到任何新的 URL。

我做重定向的方式是否遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:29:11.390

已经有一段时间了，但是您不需要使用`window.location`not just`location`吗？

# silverlight - 从 Silverlight 应用程序获取上次激活的 Excel 实例

> ID：10630277
> 
> 赞同：1
> 
> 时间：2012-05-17T05:27:27.220
> 
> 标签：silverlight, silverlight-5.0

我有一个在浏览器中运行的 Silverlight 应用程序，它具有可用于 Silverlight 5 中的浏览器内应用程序的提升信任功能。我想使用该应用程序将数据传递给已经运行的 Excel 实例（即Excel 不是由 Silverlight 应用程序本身启动的）。最重要的是，当有多个实例时，我想获得最后一个激活（选定）的 Excel 实例。

我在常规的 .NET 桌面应用程序中做过类似的事情；对这些问题的讨论总结[在这里](https://stackoverflow.com/questions/770173/how-to-get-excel-instance-or-excel-instance-clsid-using-the-process-id)。不幸的是，这个示例使用了 Silverlight 中没有的 .NET 类，例如`System.Diagnostics.Process`. 在 Silverlight 中还有其他方法可以解决这个问题吗？

请注意，我已经知道如何获取 Excel 的第一个运行实例：

> 使用 System.Runtime.InteropServices.Automation；
> 
> ...
> 
> 动态 excel = AutomationFactory.GetObject("Excel.Application");

# cocoa - 如何在 Cocoa 的 Web 视图中加载 nib/xib 文件？

> ID：10630279
> 
> 赞同：0
> 
> 时间：2012-05-17T05:27:54.803
> 
> 标签：cocoa

如何在 Cocoa 的 Web 视图中加载 nib/xib 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:44:44.443

xib 是一种被编译成 nib 的 xml 表单。nib 是设计人员自动创建原生 iOS UIViews 的一种方式。

UIWebView 是一个加载网页内容的 UIView（不是原生 iOS UIViews）。将其视为某些网页内容的窗口。nib/xib 只是一种布局原生视图的方式，该视图包含 UIWebView，它是 Web 内容的一个窗口。UIWebView 加载网页内容而不是原生 UIViews。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

> 您可以使用 UIWebView 类将 Web 内容嵌入到您的应用程序中。为此，您只需创建一个 UIWebView 对象，将其附加到窗口，并向其发送加载 Web 内容的请求。您还可以使用该类在网页历史中前后移动，甚至可以通过编程方式设置一些网页内容属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:37:37.270

如果您真的打算在网页中加载基于 nib/xib 的环境（无论它是否在可可网络视图中），那么[卡布奇诺框架](http://cappuccino.org/)就是为了做到这一点。请注意，这实际上是 html 代码。

# java - 在 Android 中使用 speex 消除回声时遇到麻烦

> ID：10630280
> 
> 赞同：1
> 
> 时间：2012-05-17T05:28:00.417
> 
> 标签：java, android, speex, aec

我正在尝试取消回声，但即使使用一个非常简单的示例也无法取消。帧大小 160 平铺长度 100

```
audioRecord.read(mic,0,mic.length);
audioData = speex.encode(mic,0,mic.length);
speakerData=speex.decode(audioData);
audioTrack.write(speakerData, 0, speakerData.length);
speex.DoAEC(mic,speakerData,outref);
fos.write(outref); 
```

为什么上面的代码示例没有取消回声我错过了什么吗？当我播放文件时，没有删除任何回声。

也遵循简单的例子没有工作仍然有回声。

```
 short[] buf=new short[160];
audioRecord.read(buf,0,buf.length);
if(sData==null){
sData=buf;
}
short[] outref=new short[160];

speex.cancelecho(buf,sData,outref);
audioTrack.write(outref, 0, outref.length);
sData=buf; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T22:55:49.667

您需要了解 AEC 工作的要求 - 所有这些都记录在 Speex 文档中 - 并知道如何调试您的流程以实现这一目标。

您可以从我的回答中获得更多指示： [Android Speex 回声消除问题](https://stackoverflow.com/questions/10080808/android-speex-echo-cancellation-problems)

另外，我有一个项目可以对 Speex AEC 进行环回样本 - 视频报道在这里： [http ://www.youtube.com/watch?v=e1-HwidHMy0](http://www.youtube.com/watch?v=e1-HwidHMy0)

这是一个完整的项目，因此没有必要试图将其挤到答案中，但我给出的建议应该给你一个开始——视频证明这是可能的。

# jquery - 放置 Nivo-Slider 加载屏幕

> ID：10630284
> 
> 赞同：0
> 
> 时间：2012-05-17T05:28:14.337
> 
> 标签：jquery, html, css

我目前在我的网站上启动并运行了 Nivo-Slider。加载后效果很好 - 但在加载时，它被放置在我屏幕的左上角。加载后 - 它会转到我在 CSS 中指定的位置。我试图找出加载屏幕的 CSS 容器，但我不确定从哪里开始。

加载问题图片：http: [//i46.tinypic.com/szdg7s.jpg](http://i46.tinypic.com/szdg7s.jpg)

我希望加载功能在我的布局中看起来像什么：http: [//i50.tinypic.com/uyfyb.jpg](http://i50.tinypic.com/uyfyb.jpg)

我在索引中的 Nivo 代码：

```
<!--/ Run Nivo-->
<script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider({
        effect: 'fade', // Specify sets like: 'fold,fade,sliceDown'
        slices: 15, // For slice animations
        boxCols: 8, // For box animations
        boxRows: 4, // For box animations
        animSpeed: 500, // Slide transition speed
        pauseTime: 3000, // How long each slide will show
        startSlide: 0, // Set starting Slide (0 index)
        directionNav: true, // Next & Prev navigation
        directionNavHide: true, // Only show on hover
        controlNav: true, // 1,2,3... navigation
        controlNavThumbs: false, // Use thumbnails for Control Nav
        controlNavThumbsFromRel: false, // Use image rel for thumbs
        controlNavThumbsSearch: '.jpg', // Replace this with...
        controlNavThumbsReplace: '_thumb.jpg', // ...this in thumb Image src
        keyboardNav: true, // Use left & right arrows
        pauseOnHover: true, // Stop animation while hovering
        manualAdvance: false, // Force manual transitions
        captionOpacity: 0.8, // Universal caption opacity
        prevText: 'Prev', // Prev directionNav text
        nextText: 'Next', // Next directionNav text
        randomStart: false, // Start on a random slide
        beforeChange: function(){}, // Triggers before a slide transition
        afterChange: function(){}, // Triggers after a slide transition
        slideshowEnd: function(){}, // Triggers after all slides have been shown
        lastSlide: function(){}, // Triggers when last slide is shown
        afterLoad: function(){} // Triggers when slider has loaded
    });
});
</script>

<script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider();
});
</script>

 <!--/ Show Nivo--> 

<div class="slider-wrapper theme-default">
    <div class="ribbon"></div>
    <div id="slider" class="nivoSlider">
    <img src="/dev/images/scs-logo.jpg" alt="" />
    <img src="/dev/images/signage.jpg" alt="" />
    <img src="/dev/images/wsop.jpg" alt="" />

</div> 
```

加载后放置 Nivo 幻灯片的 CSS 代码：

```
/*Nivo-Slider Div*/

#slider {
    position: absolute;
    margin-left: auto; 
    margin-right: auto;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:03:47.447

确保您没有添加`#slider`到`.nivoSlider`CSS 中的类。这就是我解决定位问题的方法。我在 CSS 中添加`#slider`了`.nivoSlider`类，它所做的就是将我的幻灯片带到屏幕的左上角。:\

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:44:42.457

试试这个：

```
#slider { margin:0 auto; float:left; width:100%; } 
```

# c# - 如何在 php web 和 c# WP7 之间传递参数

> ID：10630293
> 
> 赞同：-1
> 
> 时间：2012-05-17T05:28:47.237
> 
> 标签：c#, php, windows-phone-7

我正在使用我的 WP7 应用程序和 PHP 服务器。我想知道如何在 PHP 和 WP7 应用程序之间“对话”？我可以将参数或参数列表（这是构造函数）从 PHP 服务器传递到 WP7 服务器吗？它是这样的：复制代码

结构用户 {int id, pass};

如果有人知道，请教我。非常感谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:33:36.703

最好在 PHP 中创建一个 web 服务并在 WP7 应用程序中使用它。我有类似的问题并投入了大量时间，但最终使用网络服务解决了它:)

希望这个回复对你有帮助。

# objective-c - 如何在objective-c中将击键发送到另一个进程

> ID：10630299
> 
> 赞同：1
> 
> 时间：2012-05-17T05:29:49.440
> 
> 标签：objective-c, macos, cocoa, keystroke

我知道这里有一些关于这个的问题，但我有这个类方法可以将击键发送到另一个进程，但它似乎部分工作。如果我发送一个@“mystring”的NSString，我会返回“mmmmmmmm”（即总是第一个字母乘以原始字符串的长度倍）。这是我的代码，请有人告诉我我缺少什么。顺便说一下，字符的 NSLog 显示缓冲区变量中的正确字符。我看过的其他问题 1\. [CGEventCreateKeyboardEvent 和 CGEventTapLocation](https://stackoverflow.com/questions/7691044/cgeventcreatekeyboardevent-and-cgeventtaplocation) 2.- [CGEventPostToPSN - 如何发送具有不同键盘区域设置的键？](https://stackoverflow.com/questions/6217952/cgeventposttopsn-how-to-send-keys-with-different-keyboard-locales)

```
+(void)writeString:(NSString *)valueToSet withFlags:(int)flags intoProcess:(ProcessSerialNumberPtr) process 
{

  CGEventSourceRef source = CGEventSourceCreate(kCGEventSourceStatePrivate);
  CGEventRef keyEventDown = CGEventCreateKeyboardEvent(source, 1, true);
  CGEventRef keyEventUp = CGEventCreateKeyboardEvent(source, 1, false);
  CGEventSetFlags(keyEventDown,0);                
  CGEventSetFlags(keyEventUp,0);
  UniChar buffer;
  CFRelease(source);
  for (int i = 0; i < [valueToSet length]; i++) {
    buffer = [valueToSet characterAtIndex:i];
    NSLog(@" %i place Character: %c",i,buffer);
    CGEventKeyboardSetUnicodeString(keyEventDown, 1, &buffer);
    CGEventKeyboardSetUnicodeString(keyEventUp, 1, &buffer);

    CGEventSetFlags(keyEventDown,flags);
    CGEventPostToPSN(process, keyEventDown);
    [NSThread sleepForTimeInterval: 0.01];
    CGEventSetFlags(keyEventUp,flags);
    CGEventPostToPSN(process, keyEventUp);
    [NSThread sleepForTimeInterval: 0.01];

  }
  CFRelease(keyEventUp);
  CFRelease(keyEventDown);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:35:43.530

您是否在同一线程的代码中的其他位置设置了事件点击？如果是，这就是可能发生的情况：

您发布了一个事件，但是应该处理它们并通过事件链发送它们的线程被阻塞了。所以基本上你发送事件并同时阻止它们。如果是这种情况，您应该使用计时器并一一发送事件，以允许您的事件点击处理您刚刚发送的相同事件。

# java - Java - Linux 的 Process.destroy() 源代码

> ID：10630303
> 
> 赞同：15
> 
> 时间：2012-05-17T05:30:15.507
> 
> 标签：java, linux, process, kill

我需要检查代码以查看它在 Linux 上的子进程`Process.destroy()`究竟如何。`kill`

有谁知道这种方法的作用或有其来源的链接？我检查了`jdk`源代码，`Process`它只是一个抽象类，该`destroy`方法尚未实现，似乎没有任何子类的链接`extends`或`implements` `Process`. 任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-17T11:21:26.600

进程管理和所有类似的操作都由操作系统完成。因此，JVM 必须调用适当的系统调用才能销毁进程。显然，这会因操作系统而异。

在 Linux 上，我们有`kill`系统调用来执行此操作 - 或者`exit`如果我们想终止当前正在运行的进程。当然，JDK 源代码中的本地方法是根据 JVM 将要运行的操作系统分开的。如前所述，`Process`有一个`public void destroy()`方法。在 Linux 的情况下，此方法由[`UNIXProcess`](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/jdk7-b147/src/solaris/classes/java/lang/UNIXProcess.java.linux). 该`destroy()`方法的实现几乎是这样的：

```
private static native void destroyProcess(int pid);
public void destroy() {
    destroyProcess(pid);
} 
```

`destroyProcess()`反过来，本机方法定义[`UNIXProcess_md.c`](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/jdk7-b147/src/solaris/native/java/lang/UNIXProcess_md.c)如下：

```
JNIEXPORT void JNICALL
Java_java_lang_UNIXProcess_destroyProcess(JNIEnv *env, jobject junk, jint pid)
{
    kill(pid, SIGTERM);
} 
```

Linux 系统调用在哪里`kill`，其源代码在 Linux 内核中可用，更准确地说是在文件`kernel/signal.c`. 它被声明为`SYSCALL_DEFINE2(kill, pid_t, pid, int, sig)`。

快乐阅读！:)

# html - 根据定义的类别将文件上传到目标文件夹

> ID：10630304
> 
> 赞同：0
> 
> 时间：2012-05-17T05:30:25.040
> 
> 标签：html, jsp, multipartform-data

我想根据下拉列表中定义的类别将文件上传到指定的文件夹。我使用 o'reilly api 上传文件，这些文件会将文件存储到单个位置。我使用了 2 个下拉列表（主要类别和子类别）。如果用户定义了他的选项，那么路径应该改变，文件应该上传到指定的文件夹，例如：“c:\output\aero\int”。路径将是动态的，并且会根据用户 input.my 上传文件的代码

```
<%@page import="javax.ejb.DuplicateKeyException"%>
<%@ page   import="java.io.*,java.sql.*,java.util.zip.*,com.oreilly.servlet.*,com.oreilly.servlet.MultipartRequest,javax.servlet.http.HttpServletResponse" %>
<!DOCTYPE html>

<%
 ResultSet rs=null;

Connection connection = null;
String connectionURL = "jdbc:mysql://localhost:3306/ksa";
PreparedStatement psmnt = null;
    PreparedStatement psmnt1=null;
    PreparedStatement psmnt2=null;
    String path;
    path="/home/adapco/Desktop/output";
    MultipartRequest request2=new MultipartRequest(request,path,1024*1024*1024);

String filename=request2.getFilesystemName("file");
String file1=request2.getParameter("file1");
String selectedValue=request2.getParameter("sel1");
String select1=request2.getParameter("sel2");
String concat=selectedValue+"." +select1;
File f=request2.getFile("file");
//out.println(f.exists()+"----------------"+f.getAbsolutePath());
//out.print(filename);

  Class.forName("com.mysql.jdbc.Driver").newInstance();

 connection = DriverManager.getConnection(connectionURL, "root", "root");
 try
 {  

  java.sql.Date sqlDate = new java.sql.Date(new java.util.Date().getTime());

  psmnt1 = connection.prepareStatement("insert into   file12(id,file_description,file_path,file_date) values(?,?,?,'"+ sqlDate+"')");

  psmnt1.setString(1, concat);
  psmnt1.setString(2, file1);
  psmnt1.setString(3, f.getPath());
  //psmnt.setString(3, "sqlDate");
 //String query="select * from file12";
  int s=psmnt1.executeUpdate();
  if(s>0)
  {
 System.out.println("Uploaded successfully !");
 }
 else
  {
 System.out.println("Error!");
 }
 psmnt=connection.prepareStatement("select * from file12");
 rs=psmnt.executeQuery();
 }

 catch(Exception e)
 {
 out.print(" the file already exist"+e);
 }

 %>
 <table cellpadding="15" border="1">
 <%
  while(rs.next()){
  %>
 <tr>
<td><%=rs.getString(1)%> </td>
<td><%=rs.getString(2)%> </td>
<td><%=rs.getString(3)%> </td>
<td><%=rs.getString(4)%></td>
</tr>
<%}%>
 <a href="index.jsp">home</a><br>
  <a href="sample.jsp">upload file</a>
 </table>
 <%
 response.sendRedirect("index.jsp");
 %> 
```

带有下拉菜单的设计部分：

```
<FORM ENCTYPE="multipart/form-data" ACTION="sample2.jsp" METHOD=POST>
<center>
 <table bgcolor=#38ACEC>
 <tr>
  <center><td colspan="2" align="center"><B>UPLOAD THE FILE</B><center></td>
  </tr>
  <tr><td colspan="2" align="center"> </td></tr>
 <tr><td><b>Choose the file To Upload:</b></td>
 <td><INPUT NAME="file" TYPE="file"></td>
   </tr>
  <!--<tr><td><b>Choose the destination folder:</b></td>
   <td><INPUT NAME="file1" TYPE="file"></td>
  </tr>-->
   <tr><td><select name="sel1">
 <option value="1">Aerospace</option>
 <option value="2">Automotive</option>
 <option value="3">Energy</option>
 <option value="4">IC Engines</option>
 <option value="5">Wind</option>
 <option value="6">Turbo</option>
 <option value="7">IT</option>
 <option value="8">Training</option>
 </select>
 <br>
 <select name="sel2">
 <option value="1">Internal</option>
 <option value="2">Demos</option>
 <option value="3">Best Practice</option>
 <option value="4">Marketing</option>
 <option value="5">Papers & public</option>
 <option value="6">Validation</option>
 <option value="7">Training</option>
 </select></td></tr>
 <tr><td colspan="2" align="center"> </td></tr>
 <tr><td colspan="2" align="center"><input type="submit" value="Send File"> </td></tr>
 </table>
 </center>
 </form> 
```

我想做的是：

```
 MultipartRequest request2=new MultipartRequest(request,"/home/adapco/Desktop/output",1024*1024*1024);

String filename=request2.getFilesystemName("file");
String file1=request2.getParameter("file1");
String selectedValue=request2.getParameter("sel1");
String select1=request2.getParameter("sel2");
String concat=selectedValue+"." +select1;
File f=request2.getFile("file");
//out.println(f.exists()+"----------------"+f.getAbsolutePath());
//out.print(filename);
Double double1=Double.parseDouble(concat);
if(double1==1.1)
           {
                request2=new MultipartRequest(request,"/home/adapco/Desktop/output/aero/int",1024*1024*1024);
           } 
```

上面的代码显示错误

```
 java.io.IOException: Corrupt form data: premature ending 
```

如果仅创建了多部分对象，它会显示给我

```
 request2 is not initialized. 
```

我正在比较串联值以获得用户定义的类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-28T16:58:12.227

是的，可以上传具有特定文件夹名称的文件。

步骤 1\. 使用 ajax 请求提交您的表单，并使用您正在使用文件夹创建的 url 发布参数。例子：

```
var url ="test?folder1=f1&folder2=f2"
$('form').attr('action',url); 
```

使用 ajax 或 javascript form.submit 提交表单后；

并阅读文件夹名称`request.getParameter('folder1'),request.getParameter('folder2')`

它工作正常。

# html - 让表格填满整个窗口

> ID：10630311
> 
> 赞同：20
> 
> 时间：2012-05-17T05:31:26.353
> 
> 标签：html, css, internet-explorer, stylesheet

如何使 HTML 表格水平和垂直填充整个浏览器窗口？

该页面只是一个标题和一个应该填满整个窗口的分数。（我意识到固定字体大小是一个单独的问题。）

```
<table style="width: 100%; height: 100%;">
    <tr style="height: 25%; font-size: 180px;">
        <td>Region</td>
    </tr>
    <tr style="height: 75%; font-size: 540px;">
        <td>100.00%</td>
    </tr>
</table> 
```

当我使用上面的代码时，表格宽度是正确的，但高度会缩小以适合两行文本。

我很可能被迫使用*Internet Explorer 8*或*9*来展示这个页面。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-17T05:35:18.883

您可以使用这样的位置来跨父容器拉伸元素。

```
<table style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;">
    <tr style="height: 25%; font-size: 180px;">
        <td>Region</td>
    </tr>
    <tr style="height: 75%; font-size: 540px;">
        <td>100.00%</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-17T05:43:21.303

您可以在[http://jsfiddle.net/CBQCA/1/上查看解决方案](http://jsfiddle.net/CBQCA/1/)

或者

```
<table style="height:100%;width:100%; position: absolute; top: 0; bottom: 0; left: 0; right: 0;border:1px solid">
     <tr style="height: 25%;">
        <td>Region</td>
    </tr>
    <tr style="height: 75%;">
        <td>100.00%</td>
    </tr>
</table>​ 
```

我删除了字体大小，以显示列已扩展。我添加`border:1px solid`只是为了确保表格被扩展。你可以删除它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-25T20:44:57.030

这对我来说很好：

```
<style type="text/css">
#table {
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
	height: 100%;
	width: 100%;
}
</style>
```

对我来说，仅将高度和宽度更改为 100% 对我来说并不能做到这一点，将左、右、上和下设置为 0 也不行，但是将它们一起使用就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-11T10:11:53.033

下面的行帮助我解决了表格滚动条的问题；问题是页面中的 2 个滚动条很尴尬。应用于表格时，以下样式对我来说效果很好。
`<table Style="position: absolute; height: 100%; width: 100%";/>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-10T15:44:04.963

尝试使用

```
<html style="height: 100%;">
    <body style="height: 100%;">
        <table style="height: 100%;">
        ... 
```

为了强制元素的所有父`table`元素扩展可用的垂直空间（这将消除使用`absolute`定位的需要）。

适用于 Firefox 28、IE 11 和 Chromium 34（因此可能也适用于 Google Chrome）

来源： [http ://www.dailycoding.com/posts/howtoset100tableheightinhtml.aspx](http://www.dailycoding.com/posts/howtoset100tableheightinhtml.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-09T19:45:57.660

那是因为，当然，没有实际的页面高度。请记住，您垂直滚动页面的内容而不是水平滚动，从而创建有限的宽度但无限的高度。选择的答案所做的是让桌子占据可见区域并无论如何都呆在那里（绝对定位）。所以理论上你想要做的事情是不可能的

# html - 调整大小单选按钮

> ID：10630314
> 
> 赞同：7
> 
> 时间：2012-05-17T05:31:37.090
> 
> 标签：html, css, radio-button

我想仅使用 HTML 和/或 CSS 更改单选按钮控件的大小。

不使用图像可以吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-17T05:40:49.210

调整单选按钮大小的一种快速解决方案是对其进行转换：

```
input[type='radio'] {
    transform: scale(2);
} 
```

这导致所有单选按钮的大小增加一倍。与往常一样，检查[浏览器支持](http://caniuse.com/#search=scale)。

### 原始答案（2012 年 5 月 27 日）

您不能更改单选按钮的大小。通常人们会设计一个自定义的 UI 元素来替换复选框/单选按钮的 UI 方面。单击它会导致单击底层复选框/单选按钮。

在此处查看示例：[http://webdesign.maratz.com...radio-buttons/jquery.html](http://webdesign.maratz.com/lab/fancy-checkboxes-and-radio-buttons/jquery.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T05:42:34.997

不是真的，不是跨浏览器的方式。在 Firefox、Safari 和 Chrome 中，您可以通过设置`appearance:none;`（使用供应商前缀）删除默认的单选按钮样式，然后您可以随意设置它的样式。但是 IE 和 Opera 还不支持这个。

实现样式复选框的唯一可靠方法是使用 javascript 使不同的元素充当复选框。但是，当然，那么你就是在用禁用 javascript 来欺骗人们。最后，这个问题很棘手，以至于我倾向于让复选框没有样式，除了定位。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-06T15:21:42.373

给定类似于以下内容的 HTML：

```
<label>
    <input type="radio" name="group1" /><span class="radio1"></span>label 1 text</label>
<label>
<!-- and so on... --> 
```

以下 CSS 允许您添加一个类来调整“假”`radio`元素的大小：

```
/* Hiding the radio inputs: */
input[type=radio] {
    display: none;
}
/* styling the spans adjacent to the radio inputs: */
input[type=radio] + span {
    display: inline-block;
    border: 1px solid #000;
    border-radius: 50%;
    margin: 0 0.5em;
}
/* styling the span following the checked radio: */
input[type=radio]:checked + span {
    background-color: #ffa;
}
/* defining the height/width for the span-radio: */
.radio1 {
    width: 0.5em;
    height: 0.5em;
}
/* and so on... */ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Hfw72/)。

上面的版本确实需要添加一个元素，这感觉没有必要，但允许从and元素中省略`for`and`id`属性（分别）。但是，如果您能够使用这些属性，则不需要这些元素，这允许 HTML 如下所示：`label``input``span`

```
<input id="r1" type="radio" name="group1" class="radio1" />
<label for="r1">label 1 text</label> 
```

使用 CSS：

```
input[type=radio] {
    display: none;
}
/* Creating the psuedo-element to replace the radio inputs: */
input[type=radio] + label::before {
    content: '';
    display: inline-block;
    border: 1px solid #000;
    border-radius: 50%;
    margin: 0 0.5em;
}
/* styling the checked 'radio': */
input[type=radio]:checked + label::before {
    background-color: #ffa;
}
/* defining the height/width of the 'radio' according to the class of
   the radio input element: */
.radio1 + label::before {
    width: 0.5em;
    height: 0.5em;
}
/* and so on... */ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Hfw72/1/)。

当然，不言而喻，这些方法需要能够理解`:checked`伪类的浏览器，并且在后一种方法的情况下，还需要一个实现伪元素的浏览器。考虑到这一点，遗憾的是，在 Internet Explorer 第九版之前（当它开始实现选择器时），这些方法都不能在 Internet Explorer 中使用`:checked`。

参考：

*   [Quirksmode 上的“CSS 选择器”](http://quirksmode.org/css/selectors/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T05:43:33.500

单选按钮的样式不像其他表单元素那么容易，但你仍然可以在 css 的帮助下完成，通过设置高度和宽度，但设计与浏览器不同 大小外观可以更改，参考此链接以供参考, [http://www.456bereastreet.com/lab/styling-form-controls-revisited/radio-button/](http://www.456bereastreet.com/lab/styling-form-controls-revisited/radio-button/)

您可以更喜欢 javascript 或 UI 图像来进行清晰的更改。

谢谢 ..

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-17T07:19:40.883

如果你不关心 IE8，你可以这样做：

HTML：

```
<div class="cb_wrap">
  <input type="checkbox" />
  <div class="cb_dummy"></div>
</div>​ 
```

CSS：

```
.cb_wrap{
  position: relative            
}

input{
  opacity: 0;  
  position: relative;
  z-index: 10;
}

.cb_dummy{
  position: absolute;
  top: 0;
  left: 0;
  z-index: 0;  
  width: 15px;
  height: 15px;
  background: #f00;    /* use some image */
}

input:checked + .cp_dummy{
  background: #0f0;   /* use some image */
} 
```

演示：http: [//jsfiddle.net/FKqj3/](http://jsfiddle.net/FKqj3/)

# c# - 邀请会员加入网站的验证

> ID：10630320
> 
> 赞同：0
> 
> 时间：2012-05-17T05:32:09.887
> 
> 标签：c#, asp.net, c#-4.0, asp.net-4.0, webforms

我有我的页面的网址，例如：

```
http://www.ab.com/test.aspx?invitationID=XXXX 
```

我检查了我的 Page_Load 邀请是否真的有效：

```
if(!IsPostback)
{
   //login for validation. If not valid invitationID do a server.Transfer to 404 page
} 
```

这很好用。但是，一旦用户单击注册页面上的提交按钮。他被重定向到 RegistrationSuccessful 页面。到这里为止它运作良好。但是现在，如果他由于缓存而按下浏览器的后退按钮，他会再次看到该页面并且他可以再次注册。这是一个错误。

我确实添加了：

```
 HttpContext.Current.Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
  HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
  HttpContext.Current.Response.Cache.SetNoStore(); 
```

在我的 Page_Load 中，它似乎工作正常。但是，你们认为这种方法有什么安全威胁吗？邀请的验证逻辑是否`!IsPostback`正确，或者无论是否回发，我都应该这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:35:16.670

好吧，你在哪里保存`invitationID`一些？如果您将其保存在 db 中，它可能会有所帮助，这样您就可以`invitationID`通过将其标记为在 db 中使用来了解它已被使用。这样您就可以验证双重注册。

我使用了这种邀请注册，我向 url 链接发送一封电子邮件，然后单击该链接我进行验证。在发送链接之前，我生成一个唯一的字符串并将其保存在关于该用户的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:58:14.977

是“http://www.ab.com/test.aspx”的RegistrationPage吗？如果是，则不得对缓存进行任何移动。因为对于注册用户 - RegistrationPage 必须自动重定向到 HomePage。您必须仅在 RegistrationProcedure 中检查 InvitationId：

```
Regsister(..., Request.QueryString["invitationID"]); 
```

是的，正如 FosterZ 所说 - 您必须将 InvitationId 与数据库中的用户帐户相关联。

# javascript - 使用 AJAX 和 JSP 错误检查用户名可用性

> ID：10630322
> 
> 赞同：0
> 
> 时间：2012-05-17T05:32:12.890
> 
> 标签：javascript, ajax, jsp, jquery

我想检查用户名是否可用，我有这个 jquery 调用我的 jsp，它是通过单击按钮调用的

```
 function lookup(inputString) 
 {
        $.post("CheckUsername.jsp",{user: ""+inputString+""},function(data){
        $('#autoSuggestionsList').html(data).show();
        });
 } 
```

在我的 CheckUsername.jsp 我有一个简单的数组，我检查 inputString 的现有名称

```
 for (int i = 0; i < names.length; i++) 
 {
      if (str.equalsIgnoreCase(names[i])) count++;  
 } 
 if(count==0)
 { 
      out.println("UserName is Available"); 
 }
 else 
 {
      out.println("Username is not available"); 
 } 
```

问题是，一旦我单击页面上的按钮，它什么也不做，但是当我第二次单击它时，它可以正常工作。为什么会这样。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T07:17:58.390

我通过将 POST 更改为 GET 来实现它

```
 function lookup(inputString) 
 {
    $.get("CheckUsername.jsp",{user: ""+inputString+""},function(data){
    $('#autoSuggestionsList').html(data).show();
    });
 } 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:22:47.817

我从不使用 jquery 帖子。jQuery.ajax 对我来说很好用：

```
jQuery.ajax({
   url: "<c:url value='CheckUsername.jsp'/>",
   type: "POST",
   data: "yourdata"
   success: function() {
       jQuery('#autoSuggestionsList').html(data).show();
   }
}); 
```

当我想要 POST 时，jQuery.ajax 从不给我 GET。

# regex - 复杂的字符串解析问题

> ID：10630323
> 
> 赞同：1
> 
> 时间：2012-05-17T05:32:20.867
> 
> 标签：regex, string, parsing

我有以下 PHP 字符串：

> "{'blah':1178,'blah':0,'blah':260,'blah':0,'needWrapper':
> 
> > {'NEED':'TEXTNEED','NEED':'TEXTNEED'},'blah':'blah'}"

编辑：我把它拆开，希望让它更具可读性

我需要从中获取“NEED：TEXTNEED”和“NEED：TEXTNEED”子字符串。我觉得有一个很好的方法可以使用正则表达式或使用爆炸或其他东西，但我不能完全拼凑出一个优雅/有效的解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:37:51.613

如果把单引号换成双引号，可以用json解析：

```
import json

s = "{'blah':1178,'blah':0,'blah':260,'blah':0,'needWrapper':{'NEED':'TEXTNEED','NEED':'TEXTNEED'}, 'blah':'blah'}"

print json.loads(s.replace("'", '"'))
# {u'blah': u'blah', u'needWrapper': {u'NEED': u'TEXTNEED'}} 
```

现在您可以访问对象。

如果源来自 php，它应该能够生成带有双引号对象的有效 JSON： [http ://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

# java - 如何正确配置 Google App Engine Java 应用程序？

> ID：10630329
> 
> 赞同：1
> 
> 时间：2012-05-17T05:33:15.890
> 
> 标签：java, google-app-engine, sdk, settings

我正在关注关于创建您的第一个 GAE Java 项目的[Google 教程。](https://developers.google.com/appengine/docs/java/gettingstarted/creating)当我创建它与他们的完全相同时，我得到了很多错误。我认为这是导致错误的应用程序配置。以下是我的配置文件：

***appengine-web.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application>my_app_id</application>
  <version>1</version>
</appengine-web-app> 
```

***appengine-web.xml***

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" version="2.5">
    <servlet>
        <servlet-name>guestbook</servlet-name>
        <servlet-class>guestbook.GuestbookServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>guestbook</servlet-name>
        <url-pattern>/guestbook</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>guestbook.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:44:21.720

您需要的可能是通过[启用使用并发请求来击败邪恶的僵尸巫师](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests)

> 默认情况下，App Engine 将请求串行发送到给定的网络服务器。您可以通过将元素添加到以下位置来配置 App Engine 以并行发送多个请求`appengine-web.xml`：

在你的`appengine-web.xml`：

```
<threadsafe>true</threadsafe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T07:23:31.553

只是为了更好的可读性，您可能希望使用 app.yaml [https://cloud.google.com/appengine/docs/flexible/java/configuring-your-app-with-app-yaml配置 GAE/J](https://cloud.google.com/appengine/docs/flexible/java/configuring-your-app-with-app-yaml)

GAE 将使用 app.yaml 生成 web.xml 和 appengine-web.xml。我还发现 app.yaml 语法更容易阅读。

# css - 智能 gwt 删除 hilite 并更改背景颜色

> ID：10630330
> 
> 赞同：1
> 
> 时间：2012-05-17T05:33:26.287
> 
> 标签：css, colors, smartgwt, listgrid

我有一个 ListGrid，我为所有工作正常的单元格分配了 hilite[] 。

但是现在当我选择那个特定的单元格/记录时，我已经改变了单元格的颜色。

我创建了如下hilites。此处所选单元格的颜色不会变为蓝色。但一开始它的绿色或红色。请帮忙

```
Hilite[] selected = new Hilite[]{

            new Hilite() {
                {
                    setFieldNames("checkStationName");
                    //setCriteria(new Criterion("status", OperatorId.EQUALS, DetectFilesConstants.CHCK_STATUS_FAIL));
                    setCriteria(new Criterion(OperatorId.AND, new Criterion[]{
                              new Criterion("checkStationName", OperatorId.NOT, selectedRecord),
                              new Criterion("status", OperatorId.EQUALS, DetectFilesConstants.CHCK_STATUS_FAIL)       
                    }));
                    setTextColor("#FF0000");
                    setCssText("background-color: red;");
                    setId("55");
                }
            }   ,
            new Hilite() {
                {
                    setFieldNames("checkStationName");
                    //setCriteria(new Criterion("status", OperatorId.EQUALS, DetectFilesConstants.CHCK_STATUS_SUCCESS));
                    setCriteria(new Criterion(OperatorId.AND, new Criterion[]{
                              new Criterion("checkStationName", OperatorId.NOT_CONTAINS, selectedRecord),
                              new Criterion("status", OperatorId.EQUALS, DetectFilesConstants.CHCK_STATUS_SUCCESS)        
                    }));
                    setTextColor("#FF0000");
                    setCssText("background-color: #4CC417;");
                    setId("57");
                }
            }   ,
            new Hilite() {
                {
                    setFieldNames("checkStationName");
                    setCriteria(new Criterion(OperatorId.AND, new Criterion[]{
                              new Criterion("checkStationName", OperatorId.EQUALS, selectedRecord),
                              new Criterion(OperatorId.OR, new Criterion[]{
                                      new Criterion("status", OperatorId.EQUALS, DetectFilesConstants.CHCK_STATUS_FAIL),
                                      new Criterion("status", OperatorId.EQUALS, DetectFilesConstants.CHCK_STATUS_SUCCESS)
                              })}));
                    setTextColor("#FF0000");
                    setCssText("background-color: black;");
                    setId("58");
                }
            }
    }; 
```

# javascript - Backbone - 渲染客户端视图，然后在保存时创建它们

> ID：10630331
> 
> 赞同：0
> 
> 时间：2012-05-17T05:33:29.010
> 
> 标签：javascript, backbone.js

我完全不知道如何让它发挥作用。我可以创建模型，但之后我无法在它们上运行 create 或任何东西。我已经在这里呆了 6 个小时了...请告诉我哪里出错了:(！

1）创建一个 WorkflowCollection `this.workflows = new WorkflowCollection();` `workflows.length = 0`。

2) 为每个工作流 id ( `var workflow = [1,2,3]`) 添加空工作流：

```
for(var i =0;i<workflow.length;i++;) { 
       this.workflows.add(new Workflow({fk_workflow_id: workflow[i]})); 
} 
```

3) `workflows.length = 3`。渲染当前工作流的视图：

```
var self = this; 
this.workflows.each(function(model) {
       self.renderView(model.get("fk_workflow_id"), model);
}); 
```

以 renderView 为例，调用一个函数：

```
if(this.kit) this.kit.close();
        this.kit = new Workflow.PostageView({
            model: model
        // posView may change el? check later
        }); 
```

4) 获取新数据以更新视图的模型。不工作。

```
this.workflows.fetch({
    success: function () {
        self.workflows.each(function (model) {
            self.renderView(model.get("fk_workflow_id"), model);
        });
    }
}); 
```

5\. 尝试保存模型： `FileApp.workflowRouter.pos.create is not a function`

怎么不能访问create？！完整代码：http: [//jsfiddle.net/8upZK/](http://jsfiddle.net/8upZK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:51:41.857

啊。6 小时后，这是因为我应该使用 COLLECTION 来创建/更新，而不是视图。我不知道为什么我选择了视图（第 5 步）。

IE FileApp.workflowRouter.workflows.create()。创建/添加到 COLLECTION，而不是视图。福巴。

# css - 清除 CSS 过渡

> ID：10630338
> 
> 赞同：15
> 
> 时间：2012-05-17T05:34:07.343
> 
> 标签：css, twitter-bootstrap, css-transitions

我使用一个 CSS 框架，它在将鼠标移动到输入元素上时应用过渡。我有一门课，我不想有这个过渡。这可能吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-17T05:44:31.940

只需放置过渡：无；在 css 中并使其优先级高于其他。

例子：

html:

```
<div class="a"></div>
<div class="a b"></div> 
```

​ CSS：

```
div.a {
    width: 200px;
    height: 100px;
    border: 1px solid black;
    background-color: #EEE;
    -webkit-transition: background-color 0.5s;
}
div.a:hover {
    background-color: #069;
}
div.a.b {
    -webkit-transition: none;
}​ 
```

# agile - 用于安装反敏捷的 DDL 脚本？

> ID：10630339
> 
> 赞同：0
> 
> 时间：2012-05-17T05:34:13.850
> 
> 标签：agile, ddl

我听说使用 DDL 脚本进行数据库安装是反敏捷的。这是真的吗？如果是，为什么？我一直在网上寻找我的答案，但找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T01:17:37.457

我不知道您的确切上下文，但我会说 DDL 非常支持敏捷，因为它支持可重复的安装过程。也许他们的意思是在开发之前设计整个数据库是反敏捷的。我倾向于同意这个评估，但 DDL 本身并没有什么反敏捷的。

希望有帮助！

布兰登

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:14:15.400

支持增量更新更方便，也允许可重复的构建。

这允许数据库被“重构”或“进化”——因为对它的更改被视为对基本模式的一系列小调整。

这允许持续升级，而无需自己显式管理数据库版本控制。数据库是其自身版本的来源，升级过程仅在需要时应用适当的增量。

有几个工具可以帮助解决这个问题——最好的工具可能是 ruby​​ on rails[活动记录迁移](http://guides.rubyonrails.org/migrations.html)。对于 java 环境，那么[dbdeploy](http://code.google.com/p/dbdeploy/)非常好（我认为 .net 和 php 环境也有 dbdeploy 的版本）。

# linux - 与“[”“]”的字符串连接导致shell脚本中的0

> ID：10630340
> 
> 赞同：1
> 
> 时间：2012-05-17T05:34:17.623
> 
> 标签：linux, bash, shell

在以下代码中 echo $d 打印值 0

```
#!/bin/sh
printf "Enter the IP address: "
read server
a=":"
b="["
c="]"
d=$b$server$c
echo $d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:14:45.680

如果您`echo`是一个变量而不引用它，则内容会受到全局扩展的影响。shell 将一个由左方括号和右方括号以及它们之间的东西组成的 glob 视为一种模式，它是其中任何字符的选择。

这是一个演示：

```
$ mkdir newdir
$ cd newdir
$ var='[192.168.0.1]'
$ echo $var     # unquoted
[192.168.0.1]
$ touch 0
$ echo $var     # unquoted
0
$ echo "$var"   # quoted
[192.168.0.1] 
```

如您所见，目录中有一个`touch`名为“0”的文件（在命令之后）。方括号内有一个“0”匹配。方括号内的字符序列很简单，不是字符串（当变量不加引号时），但重复项被忽略。在这个例子中，`[192.680]`是等价的。

课程？您的目录中有一个名为“0”的文件。解决方案？***在消耗变量时始终***引用变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T05:16:52.213

您已经在使用`printf`. 使用`printf`而不是`echo`. 这工作得很好：

```
printf "Enter the IP address: "
read server
a=":"
b="["
c="]"
d="${b}${server}${c}"
printf "%s\n"  $d 
```

每当您遇到问题时`echo`，您都可以`printf`像我展示的那样使用它。其实我推荐你用它来代替echo。这是一个例子：

```
echo -n "Enter a string: "
read string
echo "$string" 
```

看起来很简单，但是如果我`-foo`作为字符串输入呢？回声将失败。但是，这将起作用：

```
printf "%s" "Enter a string: "
read string
printf "%s\n" $string 
```

无论您输入什么`$string`。

我确实`$d`通过使用引号和花括号更改了设置。如果您在设置时不使用引号`d`，并且有人输入`this * is a string`您的 IP 地址，您的程序将扩展`*`以匹配目录中的所有文件。可能是你不想要的东西。花括号只是让变量像这样混合在一起时更容易看到。另外，它可能会将每个单词放在自己的行中。

输入`this * is a test`您的 IP 地址并尝试设置`$d`不带引号，然后带引号，看看会发生什么。

# mysql - MySQL：对具有数据类型 varchar 的字段应用 ORDER BY

> ID：10630342
> 
> 赞同：1
> 
> 时间：2012-05-17T05:34:38.627
> 
> 标签：mysql

我有一个像这样的数据库表：

```
----------------------------
id  name        cat
============================
1   20.gif      logo
2   21.gif      logo
3   22.gif      logo
4   15.gif      web
5   16.gif      web
6   17.gif      web
7   23.gif      logo
8   18.gif      web
9   19.gif      web 
```

我想获取最高（每只猫的最新插入记录），例如：

```
----------------------------
id  name        cat
============================
7   23.gif      logo
9   19.gif      web 
```

为此我询问：

```
SELECT id, name, cat FROM portfolio GROUP BY cat ORDER BY name DESC 
```

但因为名称字段是一个字符串，所以我不能在名称上应用 ORDER BY。

任何的想法..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:46:09.557

```
SELECT id, name, cat 
FROM portfolio 
GROUP BY cat 
ORDER BY cast(substring(name, 1, INSTR(name, '.') - 1) as signed) DESC 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/29009/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:53:20.443

是的，我找到了解决方案：

```
select id, name, cat from (select * from portfolio ORDER BY id DESC) AS x GROUP BY cat 
```

我从[检索每个组中的最后一条记录中获得了帮助](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)

感谢[Stackoverflow](https://stackoverflow.com/)，它真的让开发人员的生活变得轻松 :)

# java - 如何访问不同文件夹中的图像？

> ID：10630348
> 
> 赞同：1
> 
> 时间：2012-05-17T05:34:56.003
> 
> 标签：java, image, embedded-resource

如何访问 Java 中不同文件夹中的图片？我有一系列图片，它们会根据用户输入而改变，这就是`x`目的。

```
picture.setIcon(new ImageIcon("\\resources\\icons\\pictures\\"+x+".png")); 
```

图片位于资源/图标/图片中（来自 .class 文件），但上面的代码不起作用。的值`x`不是问题，因为它可以正常工作。我以正确的方式调用图片吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T23:20:03.623

> 我以正确的方式调用图片吗？

可能不是。如果它们是（嵌入的）应用程序资源，它们通常位于 Jar 中，并且无法通过`String`基于构造函数的`ImageIcon`（期望`String`等于`File`路径）。

对于嵌入式资源，通过 访问它们`URL`。

```
URL urlToImg = this.getClass().
    getResource("/resources/icons/pictures/"+x+".png");
picture.setIcon(new ImageIcon(urlToImg)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:52:30.780

我相信你应该使用正斜杠而不是反斜杠。

```
new ImageIcon("/resources/icons/pictures/"+x+".png") 
```

这是表示资源文件路径的标准 Java 跨平台方式。它仍然适用于 Windows - Java 运行时库为您处理转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T23:35:54.503

> 图片位于资源/图标/图片中（来自 .class 文件）

那是个问题。系统不关心类文件在哪里，而是从哪里调用程序。

通过命令行指定资源文件夹，

```
java -jar myJar.jar C:\\home\\of\\the\\images 
```

或通过属性

```
java -jar myJar.jar -DImageHome=/foo/bar/images 
```

或来自属性文件是最灵活的。

如果您喜欢将图像放入 jar 中，请使用 Andrews 的建议，getClass().getRessource("...");

顺便说一句：我确定，正斜杠是可移植的。反斜杠，afaik，不是。

# java - SQL Statement 对象在哪些情况下会自动关闭？

> ID：10630350
> 
> 赞同：3
> 
> 时间：2012-05-17T05:35:02.553
> 
> 标签：java, sql, jdbc

我的问题与此声明有关：

> 立即释放此 Statement 对象的数据库和 JDBC 资源，而不是等待它自动关闭时发生。 [http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#close%28%29](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#close%28%29)

那么，Statement对象在哪些情况下会自动关闭呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:45:09.253

对于 JDBC 4.0 及更早版本（Java 6 及更早版本）：

*   关闭连接时关闭语句

JDBC 4.1 (Java 7) 添加了以下内容：

*   如果`closeOnCompletion()`已调用语句并且`ResultSet`从该语句创建的语句已被读取到最后一行之外（并且该读取发生*在*启用 closeOnCompletion 之后） ，则该语句将关闭

我不认为*'try-with-resources'*会自动关闭连接，但'只是'语法糖 `try ... finally`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T05:44:35.203

> 您可以使用 try-with-resources 语句自动关闭 java.sql.Connection、java.sql.Statement 和 java.sql.ResultSet 对象，无论是否引发了 SQLException 或任何其他异常。一个 try-with-resources 语句由一个 try 语句和一个或多个声明的资源（用分号分隔）组成。来源：[使用 try-with-resources 语句自动关闭 JDBC 资源](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/jdbc_41.html)

以下语句是一个 try-with-resources 语句，它声明了一个资源 stmt，该资源将在 try 块终止后自动关闭：

```
try (Statement stmt = con.createStatement()) {

  // ...

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T05:41:24.040

当创建它的连接关闭时，它就关闭了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T05:47:19.400

如果您担心确定关闭连接、资源等，我会简单地使用 spring jdbc。它增加了很少的开销，很容易实现，并且会让你摆脱那些繁琐的 try-catch-finally 结构，只是为了进行简单的查询。

# php - PHP网站的快速书籍集成

> ID：10630353
> 
> 赞同：0
> 
> 时间：2012-05-17T05:35:20.343
> 
> 标签：php, mysql, quickbooks-online

我是一名 PHP Web 开发人员。我有一个带有付款部分的项目。我的客户要求我将此部分与 QuickBooks 集成。我对 QuickBooks 一无所知。是否有集成 QuickBooks 的框架？另外，如何将 QuickBooks 数据实现到 PHP Mysql 网站中？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:43:30.727

Quickbooks 是一个会计软件包。多年来，很多人都链接到 Quickbooks 以进行自定义应用程序。将其实施到基于 Web 的应用程序将取决于您的要求。

通常，用户需要将记录导出到 CSV 文件或 QIF 文件，然后再导入。如果没有完成一些基本的工作，您可以使用将 Quickbooks 与 PHP 集成。例如[http://www.consolibyte.com/download.php?ID=5](http://www.consolibyte.com/download.php?ID=5)。这里还有一个很棒的 stackoverflow 问题[https://stackoverflow.com/questions/151216/php-quickbooks-integration-api](https://stackoverflow.com/questions/151216/php-quickbooks-integration-api)。就像我说的，这取决于你的要求。

# c# - c#异步调用UI没有响应

> ID：10630358
> 
> 赞同：0
> 
> 时间：2012-05-17T05:35:57.480
> 
> 标签：c#, datagridview, asynchronous-wcf-call

这是我的要求：

单击按钮时，我需要从数据库中获取数据并填充到 datagridview 中，为此我使用了一个函数。由于检索可能需要很长时间并且我想同时使用 UI，我希望这个函数在单独的线程中运行。为此，我使用异步回调。但在`begininvoke()`and`endinvoke()`函数之间。我没有写任何代码（我不知道写什么来让 UI 响应）。

datagridview 正在正确填充，但是当我在函数检索数据时尝试访问它时 UI 被阻止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:47:36.967

我建议*不要*从 UI 线程开始长时间运行的操作。首先启动另一个线程，然后在该单独的线程中执行长时间运行的操作。完成后，使用 Form.Invoke() 方法将结果发布回 UI。这样，UI 线程不会直接受到影响。

除了手动创建另一个线程，您还可以使用[BackgroundWorker](http://www.google.com.tr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&sqi=2&ved=0CGQQFjAB&url=http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx&ei=PJC0T_q3HYTl4QSE0vTxDQ&usg=AFQjCNFwLYOqQ7vrjVJ7SroICXQH-GDyEQ&sig2=gVz3dKEymQWHl1pY0q1k1A)之类的构造。

如果您确实从 UI 线程开始长时间运行的操作，则需要定期调用 Application.DoEvents()（例如在循环内）。但是，如果长时间运行的操作是 IO 密集型的——这意味着你大部分时间都在等待 IO 操作——那么你就不会像你想要的那样频繁地调用 Application.DoEvents()。这将使 UI 看起来反应迟钝或生涩。正如我上面提到的，单独的线程在这方面是一种更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:47:19.193

如果您使用 a来`loop`填充您的.`DataGridView``Application.DoEvents()``loop``DataGridView`

## 更新

正如您所说，问题不在于循环，我认为最好的方法是使用`BackgroundWorker`该类。

如果发生以下情况，您可以`DataGridView`在哪里填充`DoWork()``BackgroundWorker`

您可以在代码`BackgroundWorker.DoWork()`活动期间开始活动`button_click`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:34:02.860

首先，我应该在 UI 表单本身中创建异步回调函数，而不是在中间层，在我的例子中是 DataMgr。另外，我应该为 begininvoke 函数添加最后两个参数，并在我传递空值的地方添加适当的值。它应该是

```
MethodDelegate dlgt = new MethodDelegate(DataMgr.countIssuingEntities);
 TempValueHolder tmp = new TempValueHolder();
 AsyncCallback cb = new AsyncCallback(MyAsyncCallBack);
  IAsyncResult ar = dlgt.BeginInvoke(issueGroupId, element.ControlType, (EvaluatingEntityCombo.SelectedItem as CIQHydCore.RefData.RefDataInfo).Id, (IssuingEntityCombo.SelectedItem as CIQHydCore.RefData.RefDataInfo).Id, str1, str2,**cb,dlgt**); 
```

在 MyAsyncCallBack 函数中，我们需要使用从末尾检索到的值填充 datgridview

# c++ - 进度条委托上的自定义颜色

> ID：10630360
> 
> 赞同：3
> 
> 时间：2012-05-17T05:36:00.413
> 
> 标签：c++, qt

一直在尝试这样做很长一段时间，并从我能找到的每个论坛帖子中获取建议，但我仍然无法解决它。这是我当前的代码，我真的很想更改进度条上块的颜色。除颜色外，其他所有设置均正常工作。

在我的工作区对象中，它填充了 MainWindow 上的一个子视图。

```
Workspace::Workspace( QWidget* parent) : QWidget( parent )
{
    QTableView* tableView = new QTableView();
    // ...
    tableView->setItemDelegate(new ProgressBarDelegate);
} 
```

delegate.cpp 看起来像这样：

```
ProgressBarDelegate::ProgressBarDelegate( QObject* parent )
: QStyledItemDelegate(parent)
{
}

void ProgressBarDelegate::paint( QPainter *painter,
                                 const QStyleOptionViewItem &option,
                                 const QModelIndex &index) const
{
    if (index.column() == 2)
    {
        int progressPercentage = index.model()->data(index, Qt::DisplayRole).toInt();

        QStyleOptionProgressBarV2 progressBarOption;
        progressBarOption.rect = QRect(option.rect.x(), option.rect.y() + 5 , option.rect.width(), option.rect.height() / 1.5);
        progressBarOption.minimum = 0;
        progressBarOption.maximum = 100;
        progressBarOption.progress = progressPercentage;
        QPalette pal = progressBarOption.palette;
        QColor col = QColor(35, 35,25);
        pal.setColor(QPalette::Highlight, col); // or QPalette::Window doesnt matter
        progressBarOption.palette = pal;

        if(option.state & QStyle::State_Selected)
        {
        }

        QApplication::style()->drawControl( QStyle::CE_ProgressBar,
                                            &progressBarOption,
                                            painter);
    }
    else
    {
        QStyledItemDelegate::paint(painter, option, index);
    }
} 
```

目前，无论我做什么，颜色都不会从 OSX 标准浅灰色改变。

如果重要的话，运行 OSX 10.6.7 和 Qt 4.8.1。谢谢你！

编辑：

我能够做到以下几点：

```
app.setStyleSheet("QScrollBar:horizontal { border: 2px solid green;background: cyan;height: 15px;margin: 0px 20px 0 20px;}"); 
```

但是当我这样做时：

```
app.setStyleSheet("QProgressBar:horizontal { border: 1px solid gray; border-radius: 3px; background: white; padding: 1px; }"); 
```

进度条上没有任何变化。理论上我没有创建任何进度条对象，我只是设置了我在委托中查看数据的样式。但可以肯定的是，我不能成为第一个想要这样做的人吗？

另外，如果这不起作用，我该如何在表格视图中执行此操作（具有样式化的进度条）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T05:46:32.020

您应该使用[Qt Style Sheet](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-reference.html)，它允许我们自定义许多控件的 UI，以提供跨平台的独特外观。[检查这个](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-examples.html#customizing-qprogressbar)。

创建一个新的简单 Qt Gui 项目，打开 UI 表单编辑器并从工具窗口的“显示小部件”下添加一个进度条控件。`MainWindow`现在在..的构造函数中编写以下代码

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent), ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    // Customize progress-bar's style..

    QString style = "QProgressBar {border: 2px solid grey; border-radius: 5px; text-align: center;}";
    style += "QProgressBar::chunk {background-color: #CD96CD; width: 10px; margin: 0.5px;}";

    // Assuming objectName is 'progressBar'..
    ui->progressBar->setStyleSheet(style);
} 
```

编译并运行。

如果您只想更改单个`QProgressBar`控件，那么上述方法就足够了，但是如果您想在应用程序级别应用样式（例如所有`QProgressBar`控件和其他一些控件），那么正确的方法是创建一个`*.css`文件，使用[Qt Style编写样式工作表参考](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-reference.html)，然后在 Qt 中读取该文件并调用

`QApplication::setStyleSheet(QString style)`.

此外，样式表使用与 CSS 相同的语法，也支持各种选择器。

***编辑：***

我同意上述方法仅适用于控件而不适用于委托。我也为代表们找到了一些东西。尝试以下`paint`功能。

```
void ProgressBarDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    if (index.column() == 2)
    {
        QProgressBar renderer;
        int progressPercentage = index.model()->data(index, Qt::DisplayRole).toInt();

        // Customize style using style-sheet..

        QString style = "QProgressBar { border: 2px solid grey; border-radius: 5px; }";
        style += "QProgressBar::chunk { background-color: #05B8CC; width: 20px; }";

        renderer.resize(option.rect.size());
        renderer.setMinimum(0);
        renderer.setMaximum(100);
        renderer.setValue(progressPercentage);

        renderer.setStyleSheet(style);
        painter->save();
        painter->translate(option.rect.topLeft());
        renderer.render(painter);
        painter->restore();
    }
    else
        QStyledItemDelegate::paint(painter, option, index);
} 
```

所以这里的重点是`QStyleOption`，我们可以直接将控件本身用作渲染器，而不是使用 。希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:15:00.857

代替`pal.setColor(QPalette::Window, col);`

采用`pal.setColor(QPalette::Highlight, col);`

这应该`work`。

我在 Paintevent 中使用了代码

```
 void Dialog::paintEvent(QPaintEvent *e)
   {
    QPainter painter(this);
    connect(ui->pushButton,SIGNAL(clicked()),this,SLOT(ShowPrintDialog()));
    QStyleOptionProgressBarV2 progressBarOption;
    progressBarOption.rect = QRect(20,20,30,30);
    progressBarOption.minimum = 0;
    progressBarOption.maximum = 100;
    progressBarOption.progress = 75;
    QPalette pal = progressBarOption.palette;
    QColor col = QColor(0,255,0);
    pal.setColor(QPalette::Highlight, col);
    progressBarOption.palette = pal;

    QApplication::style()->drawControl(QStyle::CE_ProgressBar,&progressBarOption, &painter);
    } 
```

# java - 如何每小时执行一项任务？

> ID：10630365
> 
> 赞同：2
> 
> 时间：2012-05-17T05:37:01.333
> 
> 标签：java, android

我一直在开发一个 Android 应用程序，我需要每小时执行 1 个任务。我使用以下代码：

```
private static final long ALARM_PERIOD = 1000L;

public static void initAlarmManager(Context context) {

    Editor editor=PreferenceManager.getDefaultSharedPreferences(context).edit();
    editor.putBoolean(context.getString(R.string.terminate_key), true).commit();

    AlarmManager manager = (AlarmManager) context.getSystemService(context.ALARM_SERVICE);
    Intent i = new Intent(context, AlarmEventReceiver.class);
    PendingIntent receiver = PendingIntent.getBroadcast(context, 0, i, 0);
    manager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
            SystemClock.elapsedRealtime(), ALARM_PERIOD, receiver);
} 
```

它对我有用，但我的客户告诉我，该任务只工作 1 次，不会工作 1 小时。我在哪里犯了错误？请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T05:55:02.900

根据您的代码，ALARM_PERIOD 为 1000L，作为重复间隔。所以我怀疑警报会每 1000 毫秒设置一次。

如果您设置每小时的重复间隔，则应为 3600000L。请注意，如果手机重新启动，除非您重新启动，否则您的警报管理器将不再工作。

这是我的代码：

```
private void setAlarmManager() {
    Intent intent = new Intent(this, AlarmReceiver.class);
    PendingIntent sender = PendingIntent.getBroadcast(this, 2, intent, 0);
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    long l = new Date().getTime();
    if (l < new Date().getTime()) {
        l += 86400000; // start at next 24 hour
    }
    am.setRepeating(AlarmManager.RTC_WAKEUP, l, 86400000, sender); // 86400000
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T06:08:55.920

您是否在 manifest.xml 的应用程序标记中添加了接收器标记
`<receiver android:name=".AlarmReceiver" android:process=":remote"/>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T05:45:51.027

我建议您使用[**Android-TimerTask而不是 Alram-Manager**](http://developer.android.com/reference/java/util/TimerTask.html)

该类`TimerTask`表示要在指定时间运行的任务。该任务可以运行一次或重复运行。它非常适合您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:08:44.180

尝试通过`setRepeating()`像这样更改您的方法来修改您的代码

```
manager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,SystemClock.elapsedRealtime(), SystemClock.elapsedRealtime()+(60*60*1000), receiver); 
```

或者

测试它每分钟重复一次

```
manager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,Calendar.getInstance().getTimeInMillis(), Calendar.getInstance().getTimeInMillis()+(1*60*1000), receiver); 
```

# iphone - UIViewController 中的继承

> ID：10630369
> 
> 赞同：0
> 
> 时间：2012-05-17T05:37:11.757
> 
> 标签：iphone, ios, uiviewcontroller

我正在努力继承 UIViewControllers 但遇到了问题。下面是我使用的 ViewController 列表及其流程。

**头文件**

```
MainViewController : UIViewController {

} 
```

* * *

```
CustomerTicketViewController : UIViewController {

}
@property (nonatomic, retain) NSArray *listTickets; 
```

* * *

```
CustomerEditTicketViewController : CustomerTicketViewController {

} 
```

* * *

**实施文件**

```
@implementation MainViewController

- (void)loadCustomer {
        CustomerTicketViewController *customerTicketViewController = [[CustomerTicketViewController alloc] initWithNibName:@"CustomerTicketViewController" bundle:nil];
        [customerTicketViewController setListTickets:myTickets];
        [self presentModalViewController:customerTicketViewController animated:YES];
        [customerTicketViewController release];
}

@end 
```

* * *

```
@implementation CustomerTicketViewController

    - (void)editCustomer {
        CustomerEditTicketViewController *customerEditTicketViewController = [[CustomerEditTicketViewController alloc] initWithNibName:@"CustomerEditTicketViewController" bundle:nil];
        NSLog(@"ParentView.listTickets: %@", listTickets);
        [self presentModalViewController:customerEditTicketViewController animated:NO];
        [customerEditTicketViewController release];
    }

    @end 
```

* * *

```
@implementation CustomerEditTicketViewController

- (void)viewDidLoad {
    NSLog(@"listTickets: %@", listTickets);
    NSLog(@"super.listTickets: %@", super.listTickets);
    NSLog(@"self->listTickets: %@", self->listTickets);
    NSLog(@"self.listTickets: %@", self.listTickets);
}

@end 
```

* * *

子类中的日志打印 null 但根据我的理解，它们应该打印与 ParentView 中相同的值。如果我在某些地方错了，请指导我。

```
 ParentView.listTickets: (
    "<CustomerTicket: 0x4c75d90>",
    "<CustomerTicket: 0x4c76310>"
)

listTickets: (null)
super.listTickets: (null)
self->listTickets: (null)
self.listTickets: (null) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:47:30.037

您的编辑视图控制器是一个单独的对象。它从超类继承的只是它有一个名为 listTickets 的数组属性，而不是属性的*值*。这是面向对象编程的一个（？）基本点。

您必须在创建视图控制器后设置值，就像创建第一个视图控制器时一样：

```
CustomerEditTicketViewController *customerEditTicketViewController = [[CustomerEditTicketViewController alloc] initWithNibName:@"CustomerEditTicketViewController" bundle:nil];

customerEditTicketViewController.listTickets = self.listTickets; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:19:20.547

您的视图控制器的 editCustomer 方法永远不会对子控制器的属性进行分配。

# ios - 如何在iOS上实现页面滑动效果

> ID：10630370
> 
> 赞同：0
> 
> 时间：2012-05-17T05:37:16.330
> 
> 标签：ios, animation, gesture, epub

我正在创建一个 ePub 阅读器，它可以读取 ePub 文件。我想实现类似于实体书的页面滑动效果。[例如](http://www.youtube.com/watch?v=Jy8vLAzyecE).

这是什么动画？这不起作用：

```
- (void)loadPage{

[UIView beginAnimations:nil context:nil]; 
    //change to set the time 
    [UIView setAnimationDuration:1]; 
    [UIView setAnimationBeginsFromCurrentState:YES]; 
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES]; 

    // do your view swapping here 
    [UIView commitAnimations];
} 
```

滑动时：

```
- (void)swipeRightAction:(id)ignored
{
    NSLog(@"Swipe Right");
    if (_pageNumber>0) {

        _pageNumber--;
        [self loadPage];
    }

}

- (void)swipeLeftAction:(id)ignored
{
    NSLog(@"Swipe Left");

    if ([self._ePubContent._spine count]-1>_pageNumber) {

        _pageNumber++;
        [self loadPage];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:46:41.187

我对第三方 api 做了同样的事情。您可以从以下网址获取参考

[https://github.com/jemmons/PageCurl](https://github.com/jemmons/PageCurl)

[https://github.com/xissburg/XBPageCurl](https://github.com/xissburg/XBPageCurl)

[https://github.com/brow/leaves](https://github.com/brow/leaves)

# android - Android 图像视图捏缩放

> ID：10630373
> 
> 赞同：73
> 
> 时间：2012-05-17T05:37:35.297
> 
> 标签：android, android-layout, android-intent, android-widget

我正在使用[Make Sense of Multitouch](http://android-developers.blogspot.in/2010/06/making-sense-of-multitouch.html)中的代码示例 来缩放图像视图。在 ScaleListener 上，我添加`ScaleGestureDetector.getFocusX() and getFocusY()`了内容以围绕手势的焦点进行缩放。它工作正常。

***问题是，在第一次多点触摸时，整个图像绘制位置正在更改为当前触摸点并从那里缩放。你能帮我解决这个问题吗？***

这是我的 TouchImageView 代码示例。

```
public class TouchImageViewSample extends ImageView {

private Paint borderPaint = null;
private Paint backgroundPaint = null;

private float mPosX = 0f;
private float mPosY = 0f;

private float mLastTouchX;
private float mLastTouchY;
private static final int INVALID_POINTER_ID = -1;
private static final String LOG_TAG = "TouchImageView";

// The ‘active pointer’ is the one currently moving our object.
private int mActivePointerId = INVALID_POINTER_ID;

public TouchImageViewSample(Context context) {
    this(context, null, 0);
}

public TouchImageViewSample(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;

// Existing code ...
public TouchImageViewSample(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // Create our ScaleGestureDetector
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());

    borderPaint = new Paint();
    borderPaint.setARGB(255, 255, 128, 0);
    borderPaint.setStyle(Paint.Style.STROKE);
    borderPaint.setStrokeWidth(4);

    backgroundPaint = new Paint();
    backgroundPaint.setARGB(32, 255, 255, 255);
    backgroundPaint.setStyle(Paint.Style.FILL);

}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    // Let the ScaleGestureDetector inspect all events.
    mScaleDetector.onTouchEvent(ev);

    final int action = ev.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN: {
        final float x = ev.getX();
        final float y = ev.getY();

        mLastTouchX = x;
        mLastTouchY = y;

        mActivePointerId = ev.getPointerId(0);
        break;
    }

    case MotionEvent.ACTION_MOVE: {
        final int pointerIndex = ev.findPointerIndex(mActivePointerId);
        final float x = ev.getX(pointerIndex);
        final float y = ev.getY(pointerIndex);

        // Only move if the ScaleGestureDetector isn't processing a gesture.
        if (!mScaleDetector.isInProgress()) {
            final float dx = x - mLastTouchX;
            final float dy = y - mLastTouchY;

            mPosX += dx;
            mPosY += dy;

            invalidate();
        }

        mLastTouchX = x;
        mLastTouchY = y;
        break;
    }

    case MotionEvent.ACTION_UP: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_CANCEL: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_POINTER_UP: {
        final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        final int pointerId = ev.getPointerId(pointerIndex);
        if (pointerId == mActivePointerId) {
            // This was our active pointer going up. Choose a new
            // active pointer and adjust accordingly.
            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
            mLastTouchX = ev.getX(newPointerIndex);
            mLastTouchY = ev.getY(newPointerIndex);
            mActivePointerId = ev.getPointerId(newPointerIndex);
        }
        break;
    }
    }

    return true;
}

/*
 * (non-Javadoc)
 * 
 * @see android.view.View#draw(android.graphics.Canvas)
 */
@Override
public void draw(Canvas canvas) {
    super.draw(canvas);
    canvas.drawRect(0, 0, getWidth() - 1, getHeight() - 1, borderPaint);
}

@Override
public void onDraw(Canvas canvas) {
    canvas.drawRect(0, 0, getWidth() - 1, getHeight() - 1, backgroundPaint);
    if (this.getDrawable() != null) {
        canvas.save();
        canvas.translate(mPosX, mPosY);

        Matrix matrix = new Matrix();
        matrix.postScale(mScaleFactor, mScaleFactor, pivotPointX,
                pivotPointY);
        // canvas.setMatrix(matrix);

        canvas.drawBitmap(
                ((BitmapDrawable) this.getDrawable()).getBitmap(), matrix,
                null);

        // this.getDrawable().draw(canvas);
        canvas.restore();
    }
}

/*
 * (non-Javadoc)
 * 
 * @see
 * android.widget.ImageView#setImageDrawable(android.graphics.drawable.Drawable
 * )
 */
@Override
public void setImageDrawable(Drawable drawable) {
    // Constrain to given size but keep aspect ratio
    int width = drawable.getIntrinsicWidth();
    int height = drawable.getIntrinsicHeight();
    mLastTouchX = mPosX = 0;
    mLastTouchY = mPosY = 0;

    int borderWidth = (int) borderPaint.getStrokeWidth();
    mScaleFactor = Math.min(((float) getLayoutParams().width - borderWidth)
            / width, ((float) getLayoutParams().height - borderWidth)
            / height);
    pivotPointX = (((float) getLayoutParams().width - borderWidth) - (int) (width * mScaleFactor)) / 2;
    pivotPointY = (((float) getLayoutParams().height - borderWidth) - (int) (height * mScaleFactor)) / 2;
    super.setImageDrawable(drawable);
}

float pivotPointX = 0f;
float pivotPointY = 0f;

private class ScaleListener extends
        ScaleGestureDetector.SimpleOnScaleGestureListener {

    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        pivotPointX = detector.getFocusX();
        pivotPointY = detector.getFocusY();

        Log.d(LOG_TAG, "mScaleFactor " + mScaleFactor);
        Log.d(LOG_TAG, "pivotPointY " + pivotPointY + ", pivotPointX= "
                + pivotPointX);
        mScaleFactor = Math.max(0.05f, mScaleFactor);

        invalidate();
        return true;
    }
} 
```

以及我如何在我的活动中使用它。

```
ImageView imageView = (ImageView) findViewById(R.id.imgView);

int hMargin = (int) (displayMetrics.widthPixels * .10);
int vMargin = (int) (displayMetrics.heightPixels * .10);

RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(displayMetrics.widthPixels - (hMargin * 2), (int)(displayMetrics.heightPixels - btnCamera.getHeight()) - (vMargin * 2));
params.leftMargin = hMargin;
params.topMargin =  vMargin;
imageView.setLayoutParams(params);
imageView.setImageDrawable(drawable); 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-17T08:44:45.383

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub

    ImageView view = (ImageView) v;
    dumpEvent(event);

    // Handle touch events here...
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
        savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());
        Log.d(TAG, "mode=DRAG");
        mode = DRAG;
        break;
    case MotionEvent.ACTION_POINTER_DOWN:
        oldDist = spacing(event);
        Log.d(TAG, "oldDist=" + oldDist);
        if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM");
        }
        break;
    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_POINTER_UP:
        mode = NONE;
        Log.d(TAG, "mode=NONE");
        break;
    case MotionEvent.ACTION_MOVE:
        if (mode == DRAG) {
            // ...
            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY()
                    - start.y);
        } else if (mode == ZOOM) {
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 10f) {
                matrix.set(savedMatrix);
                float scale = newDist / oldDist;
                matrix.postScale(scale, scale, mid.x, mid.y);
            }
        }
        break;
    }

    view.setImageMatrix(matrix);
    return true;
}

private void dumpEvent(MotionEvent event) {
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
            "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);
    if (actionCode == MotionEvent.ACTION_POINTER_DOWN
            || actionCode == MotionEvent.ACTION_POINTER_UP) {
        sb.append("(pid ").append(
                action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }
    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }
    sb.append("]");
    Log.d(TAG, sb.toString());
}

/** Determine the space between the first two fingers */
private float spacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/** Calculate the mid point of the first two fingers */
private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
} 
```

并且不要忘记将`scaleType`属性设置为`ImageView`标记矩阵，例如：

```
<ImageView
    android:id="@+id/imageEnhance"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginBottom="15dp"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="15dp"
    android:background="@drawable/enhanceimageframe"
    android:scaleType="matrix" >
</ImageView> 
```

使用的变量是：

```
// These matrices will be used to move and zoom image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// Remember some things for zooming
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;
String savedItemClicked; 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-09-16T07:18:10.703

你可以使用这个类：[TouchImageView](https://github.com/MikeOrtiz/TouchImageView)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-09-18T02:41:31.687

## 使用[ScaleGestureDetector](https://developer.android.com/reference/android/view/ScaleGestureDetector)

在学习新概念时，我不喜欢使用库或代码转储。[我在这里](https://medium.com/quick-code/pinch-to-zoom-with-multi-touch-gestures-in-android-d6392e4bf52d)和如何通过捏合调整图像大小的[文档](https://developer.android.com/training/gestures/scale#scale)中找到了很好的描述。这个答案是一个稍微修改的摘要。稍后您可能希望添加更多功能，但它会帮助您入门。

![动画 gif：缩放图像示例](../Images/8588f0ae0ee3450098ce2b4a73ae9af7.png)

## 布局

只是使用应用程序徽标，`ImageView`因为它已经可用。不过，您可以将其替换为您喜欢的任何图像。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@mipmap/ic_launcher"
        android:layout_centerInParent="true"/>

</RelativeLayout> 
```

## 活动

我们`ScaleGestureDetector`在活动上使用 a 来监听触摸事件。当检测到缩放（即捏合）手势时，缩放因子用于调整`ImageView`.

```
public class MainActivity extends AppCompatActivity {

    private ScaleGestureDetector mScaleGestureDetector;
    private float mScaleFactor = 1.0f;
    private ImageView mImageView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // initialize the view and the gesture detector
        mImageView = findViewById(R.id.imageView);
        mScaleGestureDetector = new ScaleGestureDetector(this, new ScaleListener());
    }

    // this redirects all touch events in the activity to the gesture detector
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return mScaleGestureDetector.onTouchEvent(event);
    }

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {

        // when a scale gesture is detected, use it to resize the image
        @Override
        public boolean onScale(ScaleGestureDetector scaleGestureDetector){
            mScaleFactor *= scaleGestureDetector.getScaleFactor();
            mImageView.setScaleX(mScaleFactor);
            mImageView.setScaleY(mScaleFactor);
            return true;
        }
    }
} 
```

## 笔记

*   尽管 Activity 在上面的示例中具有手势检测器，但它也可以在图像视图本身上设置。
*   您可以使用类似的东西来限制缩放的大小

    ```
    mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f)); 
    ```

*   再次感谢[在 Android 中使用多点触控手势进行捏合缩放](https://medium.com/quick-code/pinch-to-zoom-with-multi-touch-gestures-in-android-d6392e4bf52d)

*   [文档](https://developer.android.com/training/gestures/scale#scale)
*   在模拟器中使用`Ctrl`+ 鼠标拖动来模拟捏合手势。

## 继续

您可能想要做其他事情，例如平移和缩放到某个焦点。您可以自己开发这些东西，但如果您想使用预制的自定义视图，请将其复制[`TouchImageView.java`](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/ortiz/touch/TouchImageView.java)到您的项目中并像普通`ImageView`. 它对我来说效果很好，我只遇到了一个[错误](https://stackoverflow.com/questions/52380787/touchimageview-doesnt-show-image-until-after-a-pinch-gesture)。我计划进一步编辑代码以删除警告和我不需要的部分。你也可以做到的。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-06-01T23:05:35.250

我用捏缩放制作了自己的自定义图像视图。[Chirag Raval](https://stackoverflow.com/a/6650484/1888162)的代码没有限制/边界，因此用户可以将图像拖出屏幕。这将解决它。

这是 CustomImageView 类：

```
 public class CustomImageVIew extends ImageView implements OnTouchListener {

    private Matrix matrix = new Matrix();
    private Matrix savedMatrix = new Matrix();

    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;

    private int mode = NONE;

    private PointF mStartPoint = new PointF();
    private PointF mMiddlePoint = new PointF();
    private Point mBitmapMiddlePoint = new Point();

    private float oldDist = 1f;
    private float matrixValues[] = {0f, 0f, 0f, 0f, 0f, 0f, 0f, 0f, 0f};
    private float scale;
    private float oldEventX = 0;
    private float oldEventY = 0;
    private float oldStartPointX = 0;
    private float oldStartPointY = 0;
    private int mViewWidth = -1;
    private int mViewHeight = -1;
    private int mBitmapWidth = -1;
    private int mBitmapHeight = -1;
    private boolean mDraggable = false;

    public CustomImageVIew(Context context) {
        this(context, null, 0);
    }

    public CustomImageVIew(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public CustomImageVIew(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.setOnTouchListener(this);
    }

    @Override
    public void onSizeChanged (int w, int h, int oldw, int oldh){
        super.onSizeChanged(w, h, oldw, oldh);
        mViewWidth = w;
        mViewHeight = h;
    }

    public void setBitmap(Bitmap bitmap){
        if(bitmap != null){
            setImageBitmap(bitmap);

            mBitmapWidth = bitmap.getWidth();
            mBitmapHeight = bitmap.getHeight();
            mBitmapMiddlePoint.x = (mViewWidth / 2) - (mBitmapWidth /  2);
            mBitmapMiddlePoint.y = (mViewHeight / 2) - (mBitmapHeight / 2);

            matrix.postTranslate(mBitmapMiddlePoint.x, mBitmapMiddlePoint.y);
            this.setImageMatrix(matrix);
        }
    }

    @Override
    public boolean onTouch(View v, MotionEvent event){
        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            savedMatrix.set(matrix);
            mStartPoint.set(event.getX(), event.getY());
            mode = DRAG;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            oldDist = spacing(event);
            if(oldDist > 10f){
                savedMatrix.set(matrix);
                midPoint(mMiddlePoint, event);
                mode = ZOOM;
            }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            break;
        case MotionEvent.ACTION_MOVE:
            if(mode == DRAG){
                drag(event);
            } else if(mode == ZOOM){
                zoom(event);
            } 
            break;
        }

        return true;
    }

   public void drag(MotionEvent event){
       matrix.getValues(matrixValues);

       float left = matrixValues[2];
       float top = matrixValues[5];
       float bottom = (top + (matrixValues[0] * mBitmapHeight)) - mViewHeight;
       float right = (left + (matrixValues[0] * mBitmapWidth)) -mViewWidth;

       float eventX = event.getX();
       float eventY = event.getY();
       float spacingX = eventX - mStartPoint.x;
       float spacingY = eventY - mStartPoint.y;
       float newPositionLeft = (left  < 0 ? spacingX : spacingX * -1) + left;
       float newPositionRight = (spacingX) + right;
       float newPositionTop = (top  < 0 ? spacingY : spacingY * -1) + top;
       float newPositionBottom = (spacingY) + bottom;
       boolean x = true;
       boolean y = true;

       if(newPositionRight < 0.0f || newPositionLeft > 0.0f){
           if(newPositionRight < 0.0f && newPositionLeft > 0.0f){
               x = false;
           } else{
               eventX = oldEventX;
               mStartPoint.x = oldStartPointX;
           }
       }
       if(newPositionBottom < 0.0f || newPositionTop > 0.0f){
           if(newPositionBottom < 0.0f && newPositionTop > 0.0f){
               y = false;
           } else{
               eventY = oldEventY;
               mStartPoint.y = oldStartPointY;
           }
       }

       if(mDraggable){
           matrix.set(savedMatrix);
           matrix.postTranslate(x? eventX - mStartPoint.x : 0, y? eventY - mStartPoint.y : 0);
           this.setImageMatrix(matrix);
           if(x)oldEventX = eventX;
           if(y)oldEventY = eventY;
           if(x)oldStartPointX = mStartPoint.x;
           if(y)oldStartPointY = mStartPoint.y;
       }

   }

   public void zoom(MotionEvent event){
       matrix.getValues(matrixValues);

       float newDist = spacing(event);
       float bitmapWidth = matrixValues[0] * mBitmapWidth;
       float bimtapHeight = matrixValues[0] * mBitmapHeight;
       boolean in = newDist > oldDist;

       if(!in && matrixValues[0] < 1){
           return;
       }
       if(bitmapWidth > mViewWidth || bimtapHeight > mViewHeight){
           mDraggable = true;
       } else{
           mDraggable = false;
       }

       float midX = (mViewWidth / 2);
       float midY = (mViewHeight / 2);

       matrix.set(savedMatrix);
       scale = newDist / oldDist;
       matrix.postScale(scale, scale, bitmapWidth > mViewWidth ? mMiddlePoint.x : midX, bimtapHeight > mViewHeight ? mMiddlePoint.y : midY); 

       this.setImageMatrix(matrix);

   }

    /** Determine the space between the first two fingers */
    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);

        return (float)Math.sqrt(x * x + y * y);
    }

    /** Calculate the mid point of the first two fingers */
    private void midPoint(PointF point, MotionEvent event) {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

} 
```

这是您可以在活动中使用它的方式：

```
CustomImageVIew mImageView = (CustomImageVIew)findViewById(R.id.customImageVIew1);
mImage.setBitmap(your bitmap); 
```

和布局：

```
<your.package.name.CustomImageVIew
        android:id="@+id/customImageVIew1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="15dp"
        android:layout_marginLeft="15dp"
        android:layout_marginRight="15dp"
        android:layout_marginTop="15dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" 
        android:scaleType="matrix"/> // important 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-05-16T05:52:16.490

在 build.gradle 中添加以下行：

```
compile 'com.commit451:PhotoView:1.2.4' 
```

或者

```
compile 'com.github.chrisbanes:PhotoView:1.3.0' 
```

在 Java 文件中：

```
PhotoViewAttacher photoAttacher;
photoAttacher= new PhotoViewAttacher(Your_Image_View);
photoAttacher.update(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-27T18:35:27.707

Kotlin 中的自定义缩放视图

```
 import android.content.Context
 import android.graphics.Matrix
 import android.graphics.PointF
 import android.util.AttributeSet
 import android.util.Log
 import android.view.MotionEvent
 import android.view.ScaleGestureDetector
 import android.view.ScaleGestureDetector.SimpleOnScaleGestureListener
 import androidx.appcompat.widget.AppCompatImageView

 class ZoomImageview : AppCompatImageView {
var matri: Matrix? = null
var mode = NONE

// Remember some things for zooming
var last = PointF()
var start = PointF()
var minScale = 1f
var maxScale = 3f
lateinit var m: FloatArray
var viewWidth = 0
var viewHeight = 0
var saveScale = 1f
protected var origWidth = 0f
protected var origHeight = 0f
var oldMeasuredWidth = 0
var oldMeasuredHeight = 0
var mScaleDetector: ScaleGestureDetector? = null
var contex: Context? = null

constructor(context: Context) : super(context) {
    sharedConstructing(context)
}

constructor(context: Context, attrs: AttributeSet?) : super(context, attrs) {
    sharedConstructing(context)
}

private fun sharedConstructing(context: Context) {
    super.setClickable(true)
    this.contex= context
    mScaleDetector = ScaleGestureDetector(context, ScaleListener())
    matri = Matrix()
    m = FloatArray(9)
    imageMatrix = matri
    scaleType = ScaleType.MATRIX
    setOnTouchListener { v, event ->
        mScaleDetector!!.onTouchEvent(event)
        val curr = PointF(event.x, event.y)
        when (event.action) {
            MotionEvent.ACTION_DOWN -> {
                last.set(curr)
                start.set(last)
                mode = DRAG
            }
            MotionEvent.ACTION_MOVE -> if (mode == DRAG) {
                val deltaX = curr.x - last.x
                val deltaY = curr.y - last.y
                val fixTransX = getFixDragTrans(deltaX, viewWidth.toFloat(), origWidth * saveScale)
                val fixTransY = getFixDragTrans(deltaY, viewHeight.toFloat(), origHeight * saveScale)
                matri!!.postTranslate(fixTransX, fixTransY)
                fixTrans()
                last[curr.x] = curr.y
            }
            MotionEvent.ACTION_UP -> {
                mode = NONE
                val xDiff = Math.abs(curr.x - start.x).toInt()
                val yDiff = Math.abs(curr.y - start.y).toInt()
                if (xDiff < CLICK && yDiff < CLICK) performClick()
            }
            MotionEvent.ACTION_POINTER_UP -> mode = NONE
        }
        imageMatrix = matri
        invalidate()
        true // indicate event was handled
    }
}

fun setMaxZoom(x: Float) {
    maxScale = x
}

private inner class ScaleListener : SimpleOnScaleGestureListener() {
    override fun onScaleBegin(detector: ScaleGestureDetector): Boolean {
        mode = ZOOM
        return true
    }

    override fun onScale(detector: ScaleGestureDetector): Boolean {
        var mScaleFactor = detector.scaleFactor
        val origScale = saveScale
        saveScale *= mScaleFactor
        if (saveScale > maxScale) {
            saveScale = maxScale
            mScaleFactor = maxScale / origScale
        } else if (saveScale < minScale) {
            saveScale = minScale
            mScaleFactor = minScale / origScale
        }
        if (origWidth * saveScale <= viewWidth || origHeight * saveScale <= viewHeight) matri!!.postScale(mScaleFactor, mScaleFactor, viewWidth / 2.toFloat(), viewHeight / 2.toFloat()) else matri!!.postScale(mScaleFactor, mScaleFactor, detector.focusX, detector.focusY)
        fixTrans()
        return true
    }
}

fun fixTrans() {
    matri!!.getValues(m)
    val transX = m[Matrix.MTRANS_X]
    val transY = m[Matrix.MTRANS_Y]
    val fixTransX = getFixTrans(transX, viewWidth.toFloat(), origWidth * saveScale)
    val fixTransY = getFixTrans(transY, viewHeight.toFloat(), origHeight * saveScale)
    if (fixTransX != 0f || fixTransY != 0f) matri!!.postTranslate(fixTransX, fixTransY)
}

fun getFixTrans(trans: Float, viewSize: Float, contentSize: Float): Float {
    val minTrans: Float
    val maxTrans: Float
    if (contentSize <= viewSize) {
        minTrans = 0f
        maxTrans = viewSize - contentSize
    } else {
        minTrans = viewSize - contentSize
        maxTrans = 0f
    }
    if (trans < minTrans) return -trans + minTrans
    if (trans > maxTrans) return -trans + maxTrans
    return 0f
}

fun getFixDragTrans(delta: Float, viewSize: Float, contentSize: Float): Float {
    if (contentSize <= viewSize) {
        return 0f
    } else {
        return delta
    }
}

override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec)
    viewWidth = MeasureSpec.getSize(widthMeasureSpec)
    viewHeight = MeasureSpec.getSize(heightMeasureSpec)
    //
    // Rescales image on rotation
    //
    if (oldMeasuredHeight == viewWidth && oldMeasuredHeight == viewHeight || viewWidth == 0 || viewHeight == 0) return
    oldMeasuredHeight = viewHeight
    oldMeasuredWidth = viewWidth
    if (saveScale == 1f) {
        //Fit to screen.
        val scale: Float
        val drawable = drawable
        if (drawable == null || drawable.intrinsicWidth == 0 || drawable.intrinsicHeight == 0) return
        val bmWidth = drawable.intrinsicWidth
        val bmHeight = drawable.intrinsicHeight
        Log.d("bmSize", "bmWidth: $bmWidth bmHeight : $bmHeight")
        val scaleX = viewWidth.toFloat() / bmWidth.toFloat()
        val scaleY = viewHeight.toFloat() / bmHeight.toFloat()
        scale = Math.min(scaleX, scaleY)
        matri!!.setScale(scale, scale)
        // Center the image
        var redundantYSpace = viewHeight.toFloat() - scale * bmHeight.toFloat()
        var redundantXSpace = viewWidth.toFloat() - scale * bmWidth.toFloat()
        redundantYSpace /= 2.toFloat()
        redundantXSpace /= 2.toFloat()
        matri!!.postTranslate(redundantXSpace, redundantYSpace)
        origWidth = viewWidth - 2 * redundantXSpace
        origHeight = viewHeight - 2 * redundantYSpace
        imageMatrix = matri
    }
    fixTrans()
}

companion object {
    // We can be in one of these 3 states
    const val NONE = 0
    const val DRAG = 1
    const val ZOOM = 2
    const val CLICK = 3
}
 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-06T09:57:53.153

在`TouchImageViewSample`类中，缩放发生在枢轴点周围。属于轴心点的像素不受图像缩放的影响。当您更改轴心点时，视图会重新绘制，并且会围绕新的轴心点进行缩放。这会改变前一个枢轴点的位置，您会看到这一点，因为每次您触碰图像时图像都会发生变化。您必须通过平移图像来补偿这种移动误差。看看我的`ZoomGestureDetector.updatePivotPoint()`方法是如何做到的。

### 缩放手势检测器

我创建了自定义缩放手势检测器类。它可以同时进行缩放、平移和旋转。它还支持投掷动画。

![](../Images/40c34b732581581ae964854fc0df90da.png)

```
import android.graphics.Canvas
import android.graphics.Matrix
import android.view.MotionEvent
import android.view.VelocityTracker
import androidx.core.math.MathUtils
import androidx.dynamicanimation.animation.FlingAnimation
import androidx.dynamicanimation.animation.FloatValueHolder
import kotlin.math.PI
import kotlin.math.abs
import kotlin.math.atan2

class ZoomGestureDetector(private val listener: Listener) {

    companion object {
        const val MIN_SCALE = 0.01f
        const val MAX_SCALE = 100f
        const val MIN_FLING_VELOCITY = 50f
        const val MAX_FLING_VELOCITY = 8000f
    }

    // public
    var isZoomEnabled: Boolean = true
    var isScaleEnabled: Boolean = true
    var isRotationEnabled: Boolean = true
    var isTranslationEnabled: Boolean = true
    var isFlingEnabled: Boolean = true

    // local
    private val mDrawMatrix: Matrix = Matrix()
    private val mTouchMatrix: Matrix = Matrix()
    private val mPointerMap: HashMap<Int, Position> = HashMap()
    private val mTouchPoint: FloatArray = floatArrayOf(0f, 0f)
    private val mPivotPoint: FloatArray = floatArrayOf(0f, 0f)

    // transformations
    private var mTranslationX: Float = 0f
    private var mTranslationY: Float = 0f
    private var mScaling: Float = 1f
    private var mPivotX: Float = 0f
    private var mPivotY: Float = 0f
    private var mRotation: Float = 0f

    // previous values
    private var mPreviousFocusX: Float = 0f
    private var mPreviousFocusY: Float = 0f
    private var mPreviousTouchSpan: Float = 1f

    // fling related
    private var mVelocityTracker: VelocityTracker? = null
    private var mFlingAnimX: FlingAnimation? = null
    private var mFlingAnimY: FlingAnimation? = null

    fun updateTouchLocation(event: MotionEvent) {
        mTouchPoint[0] = event.x
        mTouchPoint[1] = event.y
        mTouchMatrix.mapPoints(mTouchPoint)
        event.setLocation(mTouchPoint[0], mTouchPoint[1])
    }

    fun updateCanvasMatrix(canvas: Canvas) {
        canvas.setMatrix(mDrawMatrix)
    }

    fun onTouchEvent(event: MotionEvent): Boolean {
        if (isZoomEnabled) {
            // update velocity tracker
            if (isFlingEnabled) {
                if (mVelocityTracker == null) {
                    mVelocityTracker = VelocityTracker.obtain()
                }
                mVelocityTracker?.addMovement(event)
            }
            // handle touch events
            when (event.actionMasked) {
                MotionEvent.ACTION_DOWN -> {
                    // update focus point
                    mPreviousFocusX = event.x
                    mPreviousFocusY = event.y
                    event.savePointers()
                    // cancel ongoing fling animations
                    if (isFlingEnabled) {
                        mFlingAnimX?.cancel()
                        mFlingAnimY?.cancel()
                    }
                }
                MotionEvent.ACTION_POINTER_DOWN -> {
                    updateTouchParameters(event)
                }
                MotionEvent.ACTION_POINTER_UP -> {
                    // Check the dot product of current velocities.
                    // If the pointer that left was opposing another velocity vector, clear.
                    if (isFlingEnabled) {
                        mVelocityTracker?.let { tracker ->
                            tracker.computeCurrentVelocity(1000, MAX_FLING_VELOCITY)
                            val upIndex: Int = event.actionIndex
                            val id1: Int = event.getPointerId(upIndex)
                            val x1 = tracker.getXVelocity(id1)
                            val y1 = tracker.getYVelocity(id1)
                            for (i in 0 until event.pointerCount) {
                                if (i == upIndex) continue
                                val id2: Int = event.getPointerId(i)
                                val x = x1 * tracker.getXVelocity(id2)
                                val y = y1 * tracker.getYVelocity(id2)
                                val dot = x + y
                                if (dot < 0) {
                                    tracker.clear()
                                    break
                                }
                            }
                        }
                    }
                    updateTouchParameters(event)
                }
                MotionEvent.ACTION_UP -> {
                    // do fling animation
                    if (isFlingEnabled) {
                        mVelocityTracker?.let { tracker ->
                            val pointerId: Int = event.getPointerId(0)
                            tracker.computeCurrentVelocity(1000, MAX_FLING_VELOCITY)
                            val velocityY: Float = tracker.getYVelocity(pointerId)
                            val velocityX: Float = tracker.getXVelocity(pointerId)
                            if (abs(velocityY) > MIN_FLING_VELOCITY || abs(velocityX) > MIN_FLING_VELOCITY) {
                                val translateX = mTranslationX
                                val translateY = mTranslationY
                                val valueHolder = FloatValueHolder()
                                mFlingAnimX = FlingAnimation(valueHolder).apply {
                                    setStartVelocity(velocityX)
                                    setStartValue(0f)
                                    addUpdateListener { _, value, _ ->
                                        mTranslationX = translateX + value
                                        updateDrawMatrix()
                                        listener.onZoom(mScaling, mRotation, mTranslationX to mTranslationY, mPivotX to mPivotY)
                                    }
                                    addEndListener { _, _, _, _ ->
                                        updateTouchMatrix()
                                    }
                                    start()
                                }
                                mFlingAnimY = FlingAnimation(valueHolder).apply {
                                    setStartVelocity(velocityY)
                                    setStartValue(0f)
                                    addUpdateListener { _, value, _ ->
                                        mTranslationY = translateY + value
                                        updateDrawMatrix()
                                        listener.onZoom(mScaling, mRotation, mTranslationX to mTranslationY, mPivotX to mPivotY)
                                    }
                                    addEndListener { _, _, _, _ ->
                                        updateTouchMatrix()
                                    }
                                    start()
                                }
                            }
                            tracker.recycle()
                            mVelocityTracker = null
                        }
                    }
                }
                MotionEvent.ACTION_MOVE -> {
                    val (focusX, focusY) = event.focalPoint()
                    if (event.pointerCount > 1) {
                        if (isScaleEnabled) {
                            val touchSpan = event.touchSpan(focusX, focusY)
                            mScaling *= scaling(touchSpan)
                            mScaling = MathUtils.clamp(mScaling, MIN_SCALE, MAX_SCALE)
                            mPreviousTouchSpan = touchSpan
                        }
                        if (isRotationEnabled) {
                            mRotation += event.rotation(focusX, focusY)
                        }
                        if (isTranslationEnabled) {
                            val (translationX, translationY) = translation(focusX, focusY)
                            mTranslationX += translationX
                            mTranslationY += translationY
                        }
                    } else {
                        if (isTranslationEnabled) {
                            val (translationX, translationY) = translation(focusX, focusY)
                            mTranslationX += translationX
                            mTranslationY += translationY
                        }
                    }
                    mPreviousFocusX = focusX
                    mPreviousFocusY = focusY
                    updateTouchMatrix()
                    updateDrawMatrix()
                    event.savePointers()
                    listener.onZoom(mScaling, mRotation, mTranslationX to mTranslationY, mPivotX to mPivotY)
                }
            }
            return true
        }
        return false
    }

    // update focus point, touch span and pivot point
    private fun updateTouchParameters(event: MotionEvent) {
        val (focusX, focusY) = event.focalPoint()
        mPreviousFocusX = focusX
        mPreviousFocusY = focusY
        mPreviousTouchSpan = event.touchSpan(focusX, focusY)
        updatePivotPoint(focusX, focusY)
        updateTouchMatrix()
        updateDrawMatrix()
        event.savePointers()
        listener.onZoom(mScaling, mRotation, mTranslationX to mTranslationY, mPivotX to mPivotY)
    }

    // touch matrix is used to transform touch points
    // on the child view and to find pivot point
    private fun updateTouchMatrix() {
        mTouchMatrix.reset()
        mTouchMatrix.preTranslate(-mTranslationX, -mTranslationY)
        mTouchMatrix.postRotate(-mRotation, mPivotX, mPivotY)
        mTouchMatrix.postScale(1f / mScaling, 1f / mScaling, mPivotX, mPivotY)
    }

    // draw matrix is used to transform child view when drawing on the canvas
    private fun updateDrawMatrix() {
        mDrawMatrix.reset()
        mDrawMatrix.preScale(mScaling, mScaling, mPivotX, mPivotY)
        mDrawMatrix.preRotate(mRotation, mPivotX, mPivotY)
        mDrawMatrix.postTranslate(mTranslationX, mTranslationY)
    }

    // this updates the pivot point and translation error caused by changing the pivot point
    private fun updatePivotPoint(focusX: Float, focusY: Float) {
        // update point
        mPivotPoint[0] = focusX
        mPivotPoint[1] = focusY
        mTouchMatrix.mapPoints(mPivotPoint)
        mPivotX = mPivotPoint[0]
        mPivotY = mPivotPoint[1]
        // correct pivot error
        mDrawMatrix.mapPoints(mPivotPoint)
        mTranslationX -= mTranslationX + mPivotX - mPivotPoint[0]
        mTranslationY -= mTranslationY + mPivotY - mPivotPoint[1]
    }

    private fun MotionEvent.focalPoint(): Pair<Float, Float> {
        val upIndex = if (actionMasked == MotionEvent.ACTION_POINTER_UP) actionIndex else -1
        var sumX = 0f
        var sumY = 0f
        var sumCount = 0
        for (pointerIndex in 0 until pointerCount) {
            if (pointerIndex == upIndex) continue
            sumX += getX(pointerIndex)
            sumY += getY(pointerIndex)
            sumCount++
        }
        val focusX = sumX / sumCount
        val focusY = sumY / sumCount
        return focusX to focusY
    }

    private fun MotionEvent.touchSpan(
        currentFocusX: Float,
        currentFocusY: Float
    ): Float {
        var spanSumX = 0f
        var spanSumY = 0f
        var sumCount = 0
        val ignoreIndex = if (actionMasked == MotionEvent.ACTION_POINTER_UP) actionIndex else -1
        for (pointerIndex in 0 until pointerCount) {
            if (pointerIndex == ignoreIndex) continue
            spanSumX += abs(currentFocusX - getX(pointerIndex))
            spanSumY += abs(currentFocusY - getY(pointerIndex))
            sumCount++
        }
        if (sumCount > 1) {
            val spanX = spanSumX / sumCount
            val spanY = spanSumY / sumCount
            return spanX + spanY
        }
        return mPreviousTouchSpan
    }

    private fun scaling(currentTouchSpan: Float): Float {
        return currentTouchSpan / mPreviousTouchSpan
    }

    private fun MotionEvent.rotation(
        currentFocusX: Float,
        currentFocusY: Float
    ): Float {
        var rotationSum = 0f
        var weightSum = 0f
        for (pointerIndex in 0 until pointerCount) {
            val pointerId = getPointerId(pointerIndex)
            val x1 = getX(pointerIndex)
            val y1 = getY(pointerIndex)
            val (x2, y2) = mPointerMap[pointerId] ?: continue
            val dx1 = x1 - currentFocusX
            val dy1 = y1 - currentFocusY
            val dx2 = x2 - currentFocusX
            val dy2 = y2 - currentFocusY
            // dot product is proportional to the cosine of the angle
            // the determinant is proportional to its sine
            // sign of the rotation tells if it is clockwise or counter-clockwise
            val dot = dx1 * dx2 + dy1 * dy2
            val det = dy1 * dx2 - dx1 * dy2
            val rotation = atan2(det, dot)
            val weight = abs(dx1) + abs(dy1)
            rotationSum += rotation * weight
            weightSum += weight
        }
        if (weightSum > 0f) {
            val rotation = rotationSum / weightSum
            return rotation * 180f / PI.toFloat()
        }
        return 0f
    }

    private fun translation(
        currentFocusX: Float,
        currentFocusY: Float
    ): Pair<Float, Float> {
        return (currentFocusX - mPreviousFocusX) to (currentFocusY - mPreviousFocusY)
    }

    private fun MotionEvent.savePointers() {
        mPointerMap.clear()
        for (pointerIndex in 0 until pointerCount) {
            val id = getPointerId(pointerIndex)
            val x = getX(pointerIndex)
            val y = getY(pointerIndex)
            mPointerMap[id] = x to y
        }
    }

    interface Listener {
        fun onZoom(scaling: Float, rotation: Float, translation: Position, pivot: Position)
    }

}

typealias Position = Pair<Float, Float> 
```

我使用`ZoomGestureDetector`如下`FrameLayout`。

```
import android.content.Context
import android.graphics.Canvas
import android.util.AttributeSet
import android.view.MotionEvent
import android.view.View
import android.widget.FrameLayout

class ZoomLayout @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = 0
) : FrameLayout(context, attrs, defStyleAttr),
    ZoomGestureDetector.Listener {

    private val gestureDetector = ZoomGestureDetector(this)

    var isZoomEnabled
        get() = gestureDetector.isZoomEnabled
        set(value) {
            gestureDetector.isZoomEnabled = value
        }

    var isScaleEnabled
        get() = gestureDetector.isScaleEnabled
        set(value) {
            gestureDetector.isScaleEnabled = value
        }

    var isRotationEnabled
        get() = gestureDetector.isRotationEnabled
        set(value) {
            gestureDetector.isRotationEnabled = value
        }

    var isTranslationEnabled
        get() = gestureDetector.isTranslationEnabled
        set(value) {
            gestureDetector.isTranslationEnabled = value
        }

    var isFlingEnabled
        get() = gestureDetector.isFlingEnabled
        set(value) {
            gestureDetector.isFlingEnabled = value
        }

    override fun onInterceptTouchEvent(event: MotionEvent): Boolean {
        if (isZoomEnabled) return true
        gestureDetector.updateTouchLocation(event)
        return super.onInterceptTouchEvent(event)
    }

    override fun onTouchEvent(event: MotionEvent): Boolean {
        return gestureDetector.onTouchEvent(event)
    }

    override fun drawChild(canvas: Canvas, child: View, drawingTime: Long): Boolean {
        gestureDetector.updateCanvasMatrix(canvas)
        return super.drawChild(canvas, child, drawingTime)
    }

    override fun onZoom(scaling: Float, rotation: Float, translation: Position, pivot: Position) {
        invalidate()
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-24T13:52:43.700

我使用zoomageview为imageview制作了捏缩放的代码。因此用户可以将图像拖出屏幕并放大，缩小图像。

您可以按照此`link`获取`Step By Step`代码并给出输出屏幕截图。

[https://stackoverflow.com/a/58074642/11613683](https://stackoverflow.com/a/58074642/11613683)

# css - 负边距值不适用于 IE6

> ID：10630374
> 
> 赞同：-1
> 
> 时间：2012-05-17T05:37:38.680
> 
> 标签：css, internet-explorer-6

我有一个标题徽标，我在该徽标的左侧添加了一张图片。我已经使用`margin-left`了属性，并且在除 IE6 之外的所有主要浏览器中都能完美运行。作为一项研究，我使用`position:relative`属性来修复这个负值。但没有运气。这是我使用的代码。

在`<body>`我使用这个的部分

```
<div id="logo">
<span style="position:relative;margin-left:-400px"><img src="image path"/>
</span>
</div> 
```

现在 DIV id="logo" 具有以下 css 样式

```
#logo {
    background: url("../images/logo.jpg") repeat scroll 0 0 transparent;
    border: 0 solid black;
    float: right;
    height: 70px;
    margin-top: 10px;
    padding: 0;
    width: 387px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:46:26.993

以下代码在我的 IETester - IE6 模式下运行良好。

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <style type='text/css'>
#logo {
    background: url("logo.png") repeat scroll 0 0 #EEE;
    border: 0 solid black;
    float: right;
    height: 70px;
    margin-top: 10px;
    padding: 0;
    width: 387px;
}
#logo span {
    position:relative;
    left:-400px;
    background:blue;
}
</style>
</head>
<body>
  <div id="logo">
<span><img src="logo.png" alt="" />
</span>
</div>
</body>
</html> 
```

PS也许你应该使用这样的东西：

```
<div id="logo-wrapper">
    <div id="logo" style="float:right;"></div>
    <div style="float:right;"><img src="logo.png" /></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:50:21.723

如果元素有浮动，在这种情况下，IE6 会将边距值加倍。所以如果你想向左移动400px，你应该单独为IE6写`margin-left: -200px`

```
#logo{position:relative}
span {position:absolute:left:-400px} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:09:13.993

是的，IE6 不支持负边距填充值，因此您可以使用左右位置负或正来进行定位以获得所需的结果......

像这样：-

HTML

```
<div id="logo">
<span>span</span>
</div> 
```

**CSS**

```
 #logo {
    background: red;
    border: 0 solid black;
    float: right;
    height: 70px;
    margin-top: 10px;
    padding: 0;
    width: 387px;
}

#logo span {
position:relative;
left:-200px;
background:yellow;
    width:50px;
    height:50px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:56:06.827

您可以尝试使用`position:relative`with`left`或`right`属性将其放置在正确的位置。或者为IE浏览器编写特定的样式。

```
 .header{
     position:relative;
     left: -200px;
   } 
```

# actionscript-3 - 双击flex后如何在datagrid中保留多行选择

> ID：10630375
> 
> 赞同：0
> 
> 时间：2012-05-17T05:37:46.097
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我以编程方式在 datagrid 中选择了一些行，然后当我通过双击编辑 DataGrid 中的某些字段时，我丢失了所有多选的行。双击单元格后如何保持多选行。我通过使用 setInterval 区分单击和双击，并使数据网格在双击时可编辑。当我使用 ctrl 键选择多行时，双击单元格多选是完美的工作。但是当我以编程方式设置选定行时，双击单元格多选就会丢失。有人可以告诉我如何保持多选行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:46:51.250

有MouseEvent.DOUBLE_CLICK，你试过了吗？（您无法知道目标机器上的确切双击长度。）
要保留选择，您可以将这些行的索引存储在数组中并在双击后恢复选择。

# java - 如何从 POJO 或 JavaBean 创建 Backbone 模型？

> ID：10630379
> 
> 赞同：3
> 
> 时间：2012-05-17T05:37:51.830
> 
> 标签：java, model-view-controller, backbone.js, pojo, utility

我有一个名为 Person.java 的 POJO，是否有任何 bash 或实用程序允许我从 Person.java 创建一个名为 person.js 的[主干](http://documentcloud.github.com/backbone/)模型，这样我就不必再次重新键入所有字段？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T02:31:44.963

如果您使用 Jackson JSON 处理器[http://jackson.codehaus.org/](http://jackson.codehaus.org/)将 POJO 模型代码转换为 JSON，则不必重新创建 Backbone 模型上的任何属性。一个简单的例子：

```
public String getPerson(){
    Person personPOJOInstance = new Person();
    ObjectMapper mapper = new ObjectMapper();
    StringWriter sw = new StringWriter();

    try{
        mapper.writeValue(sw, personPOJOInstance);
        pojoJSON = sw.getBuffer().toString();
    }
    catch(IOException exc){

    }
    return pojoJSON;
} 
```

如果您使用 Spring MVC 控制器并使用以下 @RequestMapping 注释标记您的控制器方法，您甚至不必担心这样做，如下所示：

```
@RequestMapping(method= RequestMethod.GET, produces = "application/json", value="/path/to/controller/method")
public @ResponseBody getPerson(){
    return new Person();
} 
```

最后，您的主干模型非常简单：

```
var Person = Backbone.Model.extend({
    url: '/path/to/controller/method'
}); 
```

*您不需要在 Backbone 模型上指定任何默认属性，尽管这样做可能是个好主意。*

现在，当您获取模型时，您可以访问来自 Backbone 模型上原始 POJO 的任何属性，如下所示：

```
//instantiate and fetch your model.
var person = new Person();
person.fetch();
...
//access properties on your model.
var name = person.get('name'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T18:35:10.733

github 中有一个很有前途的项目，它有望做到这一点：

[https://github.com/juhasipo/JMobster](https://github.com/juhasipo/JMobster)

# jquery - 页面重定向，在ajax调用成功之前

> ID：10630380
> 
> 赞同：0
> 
> 时间：2012-05-17T05:37:56.607
> 
> 标签：jquery, asp.net, ajax, web-services, firefox

我正在使用 jquery 1.7.2 进行一些 ajax 调用 onloud 的 aspx 页面。ajax 调用网络服务方法。如果用户在 ajax 调用仍在进行中且尚未成功时按下刷新按钮或单击某个菜单以重定向到另一个页面，则在 firebug 控制台中显示的错误没有意义。当用户试图离开页面时，我能做些什么来杀死 ajax 挂起的请求？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T05:43:35.663

你可以这样做，例如你的ajax调用函数

```
var call = $.ajax({
    type: "POST",
    url: "mywebservice.aspx",
    data: "some data you are passing ",
    success: function(msg){
      // do stuff on sucess
    }
}); 
```

你可以调用它来终止进程。

```
call.abort() 
```

# java - 我的警报对话框生成器类有什么问题？

> ID：10630381
> 
> 赞同：0
> 
> 时间：2012-05-17T05:38:02.010
> 
> 标签：java, android, dialog, android-alertdialog

我想在另一个对话框中显示一个对话框，它工作正常，但是当我单击添加或编辑按钮时没有响应。我已经发布了下面的代码

```
 private Dialog myTextDialog(final String title) {
    final AlertDialog.Builder builder=new AlertDialog.Builder(this);

    builder.setView(getCurrentFocus());
    builder.setPositiveButton("ADD", new OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            myAddCategory(title);
        }
    });
    builder.setNegativeButton("EDIT", new OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            mAdapter = new MyExpandableListAdapter(MyGraphicalActivity.this, listOptionGroup, listOptionChild);
        }
    });
    return builder.create();
 }  

private Dialog myAddCategory(final String title) {
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);

    final View viewMessEdit = inflater.inflate(R.layout.add_category,(ViewGroup) findViewById(R.id.alertlayout));

    builder.setView(viewMessEdit);                  
   //viewMessEdit.setBackgroundResource(R.color.grayy);

    builder.setPositiveButton("ADD", new Dialog.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {

            final EditText savedText = ((EditText) viewMessEdit.findViewById(R.id.inputbox));   
            newcategory=savedText.getText().toString();
            newcategory = checkCategory(newcategory);
            if(newcategory!="null" && newcategory.length()>0)
            {            
            Pattern pattern;                         
            pattern=Pattern.compile("[A-Z | a-z]*");
            Matcher matcher=pattern.matcher(newcategory);       
                if(!matcher.matches()) 
                {               
                    myTextDialog(title).show();
                    Toast.makeText(getBaseContext(),"Invalid Category name!",Toast.LENGTH_LONG).show();
                }
                else
                {               
                    Intent addcategorylist_intent=new Intent(MyGraphicalActivity.this,addcategorylist.class);
                    startActivity(addcategorylist_intent);
                    Toast.makeText(getBaseContext(), "ADDED", Toast.LENGTH_SHORT).show();
                }
            }
            else
            {
                myTextDialog(title).show();
                Toast.makeText(getBaseContext(),"You Can not give Blank & already specified Category!",Toast.LENGTH_LONG).show();            
            }
        }
    });
    builder.setNegativeButton("CANCEL",new Dialog.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {

        }             
    });

    return builder.create();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:42:30.193

更改以下代码

```
builder.setPositiveButton("ADD", new OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        myAddCategory(title);
    }
}); 
```

到

```
builder.setPositiveButton("ADD", new OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        myAddCategory(title).show();
    }
}); 
```

# php - 从 php 脚本问题调用 javascript

> ID：10630389
> 
> 赞同：2
> 
> 时间：2012-05-17T05:39:01.910
> 
> 标签：php, javascript, mysql

我有一个 php 脚本，它正在编辑 mysql 表中的记录。我在通过传递记录号使用 javascript 刷新页面时遇到问题。

请检查下面是我的 php 脚本的几行：

```
if ($mode == "edit")
{
$ids=$_POST[prs_rid];
$edt1=mysql_query("SELECT * FROM ECRDTL_edit WHERE id='$ids'");
$edt2=mysql_fetch_assoc($edt1);

echo "<script>var x=document.getElementById('prs_rid').value</script>";
    echo "<script> alert (x);</script>";
echo "<script>document.location.href='ecr-detail-edit.php?prs_mode=edit&prs_id='+x;</script>";
} 
```

我已经使用警报来查看变量“x”是否正在获取记录值，这很好用。但是当我在下一行中使用相同的，它没有在我的 php.ini 的编辑模式中显示相同的记录。

但是，如果我在这样的浏览器的地址栏中输入同一行，它就可以正常工作： [http ://www.mydomain.com/ecr-detail-edit.php?prs_mode=edit&prs_id=27](http://www.mydomain.com/ecr-detail-edit.php?prs_mode=edit&prs_id=27)

请检查可能是什么问题，或者是否有任何其他方法可以刷新传递记录号的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:49:21.523

只需使用`location.href`（在[MDN window.location](https://developer.mozilla.org/en/DOM/window.location)中指定）属于该对象的`window`对象，而不是`document`.

所以你的最后一行代码应该是这样的：

```
echo "<script>location.href='ecr-detail-edit.php?prs_mode=edit&prs_id='+x;</script>"; 
```

另一方面，您将使用脚本标签获得更好的浏览器支持`<script type="text/javascript">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:42:25.477

```
document.location.href='ecr-detail-edit.php?prs_mode=edit&prs_id='+x; 
```

应该

```
location.href='ecr-detail-edit.php?prs_mode=edit&prs_id='+x; 
```

并且您应该使用`mysql_real_escape_string()`来逃避用户可能传递给您的脚本的恶意数据。

因此改变

```
$ids = $_POST['prs_rid']; 
```

到

```
$ids = mysql_real_escape_string($_POST[prs_rid]); 
```

您缺少脚本类型，当您想使用 javascript 时，您需要告诉浏览器声明的代码是 javascript，您需要更改

```
<script> 
```

到

```
<script type="text/javascript"> 
```

您的 POST 数据中缺少单引号。在下面添加单引号。

```
$ids = $_POST['prs_rid']; 
```

最后一件事是我永远不会用 PHP 输出 javascript。最好让 javascript 和 PHP 保持不同。例如您上面的代码可以更改为。

```
<?php
if ($mode == "edit"):
    $ids  = mysql_real_escape_string($_POST['prs_rid']);
    $result = mysql_query("SELECT * FROM ECRDTL_edit WHERE id='$ids'") or die(mysql_error());
    $row = mysql_fetch_assoc($result);
?>
<script type="text/javascript">
    var x = document.getElementById('prs_rid').value
    alert(x);
    location.href = 'ecr-detail-edit.php?prs_mode=edit&prs_id='+x;
</script>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:45:04.450

问题是 window.location 需要一个绝对的 http:// URL。使用以下代码：

```
window.location=window.location=location.protocol+'//'+location.host+location.pathname+"?get_variables_here"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:49:45.360

分配给 时，相对 URL 不起作用`location.href`，它应该是绝对的或完全限定的。

在你的情况下，绝对会做：

```
location.href = location.pathname + '?prs_mode=edit&prs_id=' + 
    encodeURIComponent(x) 
```

给出查询分隔符（问号）之前的`location.pathname`路径（以 开头）。`/`

我还添加`encodeURIComponent(x)`了确保`x`必要时正确转义的值。

**执行**

```
echo "<script>location.href = location.pathname + '?prs_mode=edit&prs_id=' + encodeURIComponent(x);</script>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T06:04:47.857

试试这个..

```
echo "<script type='text/javascript'>window.location.href='ecr-detail-edit.php?prs_mode=edit&prs_id='+x;</script>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T06:09:45.200

为了成功执行这一行，`var x=document.getElementById('prs_rid').value`在 PHP 中，应该首先加载 html dom，否则它将给出错误，这可能是这里的问题。

# gwt - GWT 没听说过 java.io.BufferedReader？

> ID：10630393
> 
> 赞同：0
> 
> 时间：2012-05-17T05:39:35.697
> 
> 标签：gwt, java-io

当我构建用于部署的 war 文件（ant war）时，GWT 编译器的行为就好像它从未听说过 java.io.Reader 或 java.io.BufferedReader。当我为devmode（ant javac）进行开发构建时，它们构建得很好。我正在使用 GWT 2.4.0。有谁知道发生了什么？

```
 gwtc:
         [java] Compiling module com.foo.Foo
         [java]    Validating newly compiled units
         [java]       [ERROR] Errors in 'file:[...]/Foo/src/com/foo/shared/ReaderLineIterator.java'
         [java]          [ERROR] Line 13: No source code is available for type java.io.BufferedReader; did you forget to inherit a required module?
         [java]          [ERROR] Line 21: No source code is available for type java.io.Reader; did you forget to inherit a required module?
         [java]    [ERROR] Aborting compile due to errors in some input files

    BUILD FAILED 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T05:45:03.997

`java.io`GWT不支持完整的包。

有关详细信息，请参阅[JRE 仿真参考](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T06:21:03.230

GWT 的客户端无法访问整个 Java API。java.io 就是其中之一。当你运行或编译它会给你`did you forget to inherit a required module?`错误。但是您绝对可以在 GWT 的服务器端使用它。[您可以在此处](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)找到可在客户端使用的类列表。

# web-services - Coldfusion如何验证WWEx的webservice getShipmentSimpleQuote？

> ID：10630394
> 
> 赞同：0
> 
> 时间：2012-05-17T05:39:39.663
> 
> 标签：web-services, coldfusion, shipping

**如何从“全球快递货运报价网络服务”** 调用“getShipmentSimpleQuote”网络服务？我正在尝试调用/使用此 Web 服务，但出现**“身份验证信息无效”**的错误消息。这里是 wsdl 文件数据

**- WWEXFreightQuoteService.wsdl**

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://www.wwexship.com" xmlns:impl="http://www.wwexship.com" xmlns:intf="http://www.wwexship.com" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
<!--WSDL created by Apache Axis version: 1.4
Built on Apr 22, 2006 (06:55:48 PDT)-->
 <wsdl:types>
  <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.wwexship.com" elementFormDefault="qualified">
   <complexType name="AuthenticationToken">
    <sequence>
     <element name="loginId" nillable="true" type="xsd:string"/>
     <element name="password" nillable="true" type="xsd:string"/>
     <element name="licenseKey" nillable="true" type="xsd:string"/>
     <element name="accountNumber" nillable="true" type="xsd:string"/>
    </sequence>
   </complexType>
   <element name="AuthenticationToken" type="impl:AuthenticationToken" maxOccurs="1"/>   
   <complexType name="QuoteLineItem">
    <sequence>
     <element name="nmfcClass" nillable="true" type="xsd:string"/>
     <element name="weight" nillable="true" type="xsd:string"/>
    </sequence>
   </complexType>
   <complexType name="ArrayOfQuoteLineItem">
    <sequence>
     <element name="lineItem" nillable="true" type="impl:QuoteLineItem" maxOccurs="unbounded"/>
    </sequence>
   </complexType>
   <complexType name="FreightShipmentQuoteRequest">
    <sequence>
     <element name="senderCity" nillable="true" type="xsd:string"/>
     <element name="senderState" nillable="true" type="xsd:string"/>
     <element name="senderZip" nillable="true" type="xsd:string"/>
     <element name="receiverCity" nillable="true" type="xsd:string"/>
     <element name="receiverState" nillable="true" type="xsd:string"/>
     <element name="receiverZip" nillable="true" type="xsd:string"/>
     <element name="lineItems" nillable="true" type="impl:ArrayOfQuoteLineItem"/>
     <element name="hazmatShipment" nillable="true" type="xsd:string"/>
     <element name="insidePickup" nillable="true" type="xsd:string"/>
     <element name="liftgatePickup" nillable="true" type="xsd:string"/>
     <element name="residentialPickup" nillable="true" type="xsd:string"/>
     <element name="tradeshowPickup" nillable="true" type="xsd:string"/>
     <element name="constructionSitePickup" nillable="true" type="xsd:string"/>
     <element name="insideDelivery" nillable="true" type="xsd:string"/>
     <element name="liftgateDelivery" nillable="true" type="xsd:string"/>
     <element name="residentialDelivery" nillable="true" type="xsd:string"/>
     <element name="tradeshowDelivery" nillable="true" type="xsd:string"/>
     <element name="constructionSiteDelivery" nillable="true" type="xsd:string"/>
     <element name="notifyBeforeDelivery" nillable="true" type="xsd:string"/>
    </sequence>
   </complexType>
   <element name="freightShipmentQuoteRequest" type="impl:FreightShipmentQuoteRequest"/>
   <complexType name="ErrorDescription">
    <sequence>
     <element name="errorDescription" nillable="true" type="xsd:string" maxOccurs="unbounded"/>
    </sequence>
   </complexType>
   <complexType name="CarrierQuoteResult">
    <sequence>
     <element name="carrierName" nillable="true" type="xsd:string"/>
     <element name="carrierSCAC" nillable="true" type="xsd:string"/>
     <element name="totalPrice" nillable="true" type="xsd:string"/>
     <element name="transitDays" nillable="true" type="xsd:string"/>
     <element name="interline" nillable="true" type="xsd:string"/>
     <element name="guaranteedService" nillable="true" type="xsd:string"/>
     <element name="highCostDeliveryShipment" nillable="true" type="xsd:string"/>
     <element name="nmfcRequired" nillable="true" type="xsd:string"/>
    </sequence>
   </complexType>
   <complexType name="ArrayOfCarrierQuoteResult">
    <sequence>
     <element name="carrierQuoteResult" nillable="true" type="impl:CarrierQuoteResult" maxOccurs="unbounded"/>
    </sequence>
   </complexType>
   <complexType name="FreightShipmentQuoteResponse">
    <sequence>
     <element name="responseStatusCode" nillable="true" type="xsd:string"/>
     <element name="responseStatusDescription" nillable="true" type="xsd:string"/>
     <element name="errorDescriptions" nillable="true" type="impl:ErrorDescription"/>
     <element name="quoteResults" nillable="true" type="impl:ArrayOfCarrierQuoteResult"/>
    </sequence>
   </complexType>
   <element name="freightShipmentQuoteResponse" type="impl:FreightShipmentQuoteResponse"/>
  </schema>
 </wsdl:types>
 <wsdl:message name="getShipmentSimpleQuoteResponse">
  <wsdl:part name="freightShipmentQuoteResponse" element="impl:freightShipmentQuoteResponse"/>
 </wsdl:message>
 <wsdl:message name="FreightShipmentQuoteRequestHeaders">
  <wsdl:part name="authenticationToken" element="impl:AuthenticationToken"/>
 </wsdl:message>
 <wsdl:message name="getShipmentSimpleQuoteRequest">
  <wsdl:part name="freightShipmentQuoteRequest" element="impl:freightShipmentQuoteRequest"/>
 </wsdl:message>
 <wsdl:portType name="FreightShipmentQuote">
  <wsdl:operation name="getShipmentSimpleQuote" parameterOrder="freightShipmentQuoteRequest">
   <wsdl:input name="getShipmentSimpleQuoteRequest" message="impl:getShipmentSimpleQuoteRequest"/>
   <wsdl:output name="getShipmentSimpleQuoteResponse" message="impl:getShipmentSimpleQuoteResponse"/>
  </wsdl:operation>
 </wsdl:portType>
 <wsdl:binding name="FreightShipmentQuoteSoapBinding" type="impl:FreightShipmentQuote">
  <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
  <wsdl:operation name="getShipmentSimpleQuote">
   <wsdlsoap:operation soapAction=""/>
   <wsdl:input name="getShipmentSimpleQuoteRequest">
    <wsdlsoap:body use="literal"/>
    <wsdlsoap:header message="impl:FreightShipmentQuoteRequestHeaders" part="authenticationToken" use="literal">
    </wsdlsoap:header>
   </wsdl:input>
   <wsdl:output name="getShipmentSimpleQuoteResponse">
    <wsdlsoap:body use="literal"/>
   </wsdl:output>
  </wsdl:operation>
 </wsdl:binding>
 <wsdl:service name="FreightShipmentQuoteService">
  <wsdl:port name="FreightShipmentQuote" binding="impl:FreightShipmentQuoteSoapBinding">
   <wsdlsoap:address location="http://www.wwexship.com/webServices/services/FreightShipmentQuote"/>
  </wsdl:port>
 </wsdl:service>
</wsdl:definitions> 
```

我使用/调用网络服务的coldfusion代码是
**-consume.cfm**

```
<!--- items data --->
<cfset items = arrayNew(1) /> 
<cfset str = structNew() /> 
<cfset str.nmfcClass = "apple" />
<cfset str.weight = "15" />
<cfset arrayAppend(items, str) />

<!--- freightShipmentQuoteRequest data--->
<cfset st = structNew() /> 
<cfset st.senderCity = "Freeport" />
<cfset st.senderState = "NY" />
<cfset st.senderZip = "11520" />
<cfset st.receiverCity = "Staten Island" />
<cfset st.receiverState = "NY" />
<cfset st.receiverZip = "10314" />
<cfset st.lineItems = "#items#" />
<cfset st.hazmatShipment = "N" />
<cfset st.insidePickup = "N" />
<cfset st.liftgatePickup = "N" />
<cfset st.residentialPickup = "N" />
<cfset st.tradeshowPickup = "N" />
<cfset st.constructionSitePickup = "N" />
<cfset st.insideDelivery = "N" />
<cfset st.liftgateDelivery = "N" />
<cfset st.residentialDelivery = "N" />
<cfset st.tradeshowDelivery = "N" />
<cfset st.constructionSiteDelivery = "N" />
<cfset st.notifyBeforeDelivery = "N" />

<cfoutput>
<cfset shipService = CreateObject("webservice","http://www.wwexship.com/webServices/services/FreightShipmentQuote?wsdl")>
<cfdump var="#shipService#">
<cfset response1=shipService.getShipmentSimpleQuote(#st#)>
<cfset response=shipService.getShipmentSimpleQuote(#st#)>
<cfdump var="#response#">
<cfdump var="#response.getResponseStatusCode()#">
<cfdump var="#response.getResponseStatusDescription()#">
<cfdump var="#response.getErrorDescriptions()#">
</cfoutput> 
```

我无法验证此网络服务我的登录凭据是-
(1) loginId = copssship
(2) 密码 = 密码
(3) licenseKey = hhrWQ7RMJEDKJMh4
(4) accountNumber = W922601302

请建议如何验证此网络服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:04:36.623

我已经用 PHP 实现了[http://www.wwexship.com](http://www.wwexship.com)网络服务。它工作正常。

```
<?php

$items = array();
$items[] = array('nmfcClass' => '50','weight' => '10');
$items[] = array('nmfcClass' => '50','weight' => '20');
$auth = Array('loginId' => "your Id", 'password' => "Your Pass",'licenseKey'=>'Your key','accountNumber'=>'Your account no,') ;
$client = new SoapClient('wsdl.xml',array( 'trace' =>1));
$header = new SoapHeader('http://www.wwexship.com','AuthenticationToken',$auth,false);
$client->__setSoapHeaders(array($header));
$result = $client->getShipmentSimpleQuote(array('senderCity' => 'Freeport','senderState'=>'NY','senderZip'=>'11520','receiverCity'=>'Staten Island','receiverState'=>'NY', 'receiverZip'=>'10314','lineItems'=>$items));
echo '<pre>';
print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:16:19.083

我想我可能有答案。身份验证信息被指定为标头。ColdFusion 为此类情况提供了[AddSoapRequestHeader()](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_a-b_03.html)方法。它似乎需要文本或 XML 形式的值。下面的代码将运行并为您提供成功代码。请注意，除了添加标题之外，我还将 NMFC 代码更改为 300，将权重更改为 2。该服务抱怨初始值。

```
shipService = CreateObject("webservice","http://www.wwexship.com/webServices/services/FreightShipmentQuote?wsdl");

doc = XmlNew();
doc.xmlRoot = XmlElemNew(doc, "http://www.wwexship.com", "AuthenticationToken");

loginId = XmlElemNew(doc, "http://www.wwexship.com", "loginId");
loginId.XmlText = "copssship";
loginId.XmlAttributes["xsi:type"] = "xsd:string";
doc.xmlRoot.XmlChildren[1] = loginId;

password = XmlElemNew(doc, "http://www.wwexship.com", "password");
password.XmlText = "password";
password.XmlAttributes["xsi:type"] = "xsd:string";
doc.xmlRoot.XmlChildren[2] = password;

licenseKey = XmlElemNew(doc, "http://www.wwexship.com", "licenseKey");
licenseKey.XmlText = "hhrWQ7RMJEDKJMh4";
licenseKey.XmlAttributes["xsi:type"] = "xsd:string";
doc.xmlRoot.XmlChildren[3] = licenseKey;

accountNumber = XmlElemNew(doc, "http://www.wwexship.com", "accountNumber");
accountNumber.XmlText = "W922601302";
accountNumber.XmlAttributes["xsi:type"] = "xsd:string";
doc.xmlRoot.XmlChildren[4] = accountNumber;

AddSOAPRequestHeader(shipService,"http://www.wwexship.com","authenticationToken",doc);

response=shipService.getShipmentSimpleQuote(st); 
```

# php - 如何制作一个正则表达式来计算这样的东西 5.5 + 0.5 * 56

> ID：10630395
> 
> 赞同：0
> 
> 时间：2012-05-17T05:39:45.847
> 
> 标签：php, regex

当你在谷歌搜索中输入如下内容：

```
5.5 + 0.5  * 56 
```

谷歌计算一下

```
5.5 + (0.5 * 56) = 33.5 
```

这是非常棒的正则表达式模式，但我不太擅长正则表达式:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:42:52.450

谷歌所做的是*解析*数学表达式，它不使用匹配模式。

为此，您需要一个递归下降解析器：[具有优先级的方程（表达式）解析器？](https://stackoverflow.com/questions/28256/equation-expression-parser-with-precedence)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:48:25.797

据我所知，正则表达式不能进行这样的计算......而且谷歌不会仅通过使用正则表达式来开发他的搜索引擎。要完成此类工作，您需要自己实现一个表达式计算器。几年前我开发了一个简单的，它工作得很好。在网上有大量的例子可以做到这一点......希望它有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:26:48.883

[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)用于根据模式搜索和操作文本。同样不是它可以识别的所有模式。它只能理解基于[常规语言的模式（](http://en.wikipedia.org/wiki/Regular_language)[乔姆斯基层次结构](http://en.wikipedia.org/wiki/Chomsky_hierarchy)中的 Type-3 语法）。

您在此处显示的内容是由数学表达式解析器完成的。只需谷歌它，你会发现很多免费提供。如果您正在使用的浏览器中有 JavaScript 控制台，只需使用它`eval`来解析表达式。

```
var expression = "5.5 + 0.5  * 56";
eval( expression );
// 33.5 
```

# perl - 无法使用 www:Mechanize 登录网站

> ID：10630396
> 
> 赞同：2
> 
> 时间：2012-05-17T05:39:49.520
> 
> 标签：perl

我正在使用 WWW:Mechanize 尝试登录网站。

代码

```
use WWW::Mechanize;
my $mech = WWW::Mechanize->new();

$mech->get("https://www.amazon.com/gp/css/homepage.html/");
$mech->submit_form(
form_name => 'yaSignIn',
fields => {
email => 'email',
qpassword=> 'pass'
}
);

print $mech->content(); 
```

但是，它没有被登录到该站点。我究竟做错了什么。网站重定向并说请启用 cookie 以继续。我怎么做 。

![在此处输入图像描述](../Images/ff3532c494786fdb5fbdb0d066300a7f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T05:50:08.227

试着把这个块放在你得到之前。

```
$mech->cookie_jar(
        HTTP::Cookies->new(
            file           => "cookies.txt",
            autosave       => 1,
            ignore_discard => 1,
    )
); 
```

**SuperEdit2**：我自己尝试过，它似乎有效。试试看。（将表格编号更改为3并添加了代理别名）

```
use strict;
use warnings;
use WWW::Mechanize;

# Create a new instance of Mechanize
my $bot = WWW::Mechanize->new();
$bot->agent_alias( 'Linux Mozilla' );
# Create a cookie jar for the login credentials
$bot->cookie_jar(
        HTTP::Cookies->new(
            file           => "cookies.txt",
            autosave       => 1,
            ignore_discard => 1,
    )
);
# Connect to the login page
my $response = $bot->get( 'https://www.amazon.com/gp/css/homepage.html/' );
# Get the login form. You might need to change the number.
$bot->form_number(3);
# Enter the login credentials.
$bot->field( email => 'email' );
$bot->field( password => 'pass' );
$response = $bot->click();

print $response->decoded_content; 
```

# java - XSD 三个元素之间的选择

> ID：10630399
> 
> 赞同：1
> 
> 时间：2012-05-17T05:40:04.297
> 
> 标签：java, xsd, xsd-validation

我有三个元素 A、B 和 C。我想创建一个 XSD，其架构应该是 [A]**或**[B **&** C]**或**[A **&** B **&** C]的选择

```
Can anyone please help me to create an xsd for the above option. 
```

提前致谢。MK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:50:13.050

您可以创建三个独立的元素组，例如 [A]、[B&C] 和 [A,B & C]。并在这些组之间定义一个compleType，就像XSD一样。不确定它是否有效。我没有 XSD 创作工具来验证它是否存在。

```
<xs:group name="Group1">
    <xs:sequence>
        <xs:element name="A"/>
    </xs:sequence>
</xs:group>

<xs:group name="Group2">
    <xs:sequence>
        <xs:element name="B"/>
        <xs:element name="C"/>
    </xs:sequence>
</xs:group>

<xs:group name="Group3">
    <xs:sequence>
        <xs:element name="A"/>
        <xs:element name="B"/>
        <xs:element name="C"/>
    </xs:sequence>
</xs:group>

<xs:complexType name="choice1">
    <xs:choice minOccurs="1" maxOccurs="1">
      <xs:group ref="Group1" />
      <xs:group ref="Group2"/>
      <xs:group ref="Group3"/>
    </xs:choice>
</xs:complexType> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:08:47.257

这满足您的要求；想一想你为什么会问，这可能与独特的粒子属性有关；下面的可选序列充当“虚拟”选择。

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="root">
        <xsd:complexType>
            <xsd:choice>
                <xsd:sequence>
                    <xsd:element name="A"/>
                    <xsd:sequence minOccurs="0">
                        <xsd:element name="B"/>
                        <xsd:element name="C"/>
                    </xsd:sequence>
                </xsd:sequence>
                <xsd:sequence>
                    <xsd:element name="B"/>
                    <xsd:element name="C"/>
                </xsd:sequence>
            </xsd:choice>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

![XSD 图](../Images/aa366385b2d22d97a49e9993e88247ed.png)

# iphone - iPhone方向改变视图框架

> ID：10630400
> 
> 赞同：-1
> 
> 时间：2012-05-17T05:40:04.637
> 
> 标签：iphone

我想以编程方式设置 UILable 的位置取决于方向。但是当我回到肖像时，它不起作用。

这是我的代码：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortrait || [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortraitUpsideDown)
    {
        lblUserName.frame = CGRectMake(20, 200, 280, 44); 
        lblPassword.frame = CGRectMake(20, 246, 280, 44); 
    }

    else
    {
        lblUserName.frame = CGRectMake(20, 220, 280, 44); 
        lblPassword.frame = CGRectMake(20, 266, 280, 44); 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:16:02.450

有两种可能性。您可以以编程方式设置标签。并检查 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{} 中的方向条件

方法。否则，您可以使用自动调整大小的蒙版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:49:50.927

试试这个 IF 条件：

```
 if ( UIInterfaceOrientationIsPortrait(toInterfaceOrientation))
 { 

 } 
 else {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T05:52:05.030

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
//write code here
return YES;
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
//write code here
} 
```

旋转设备时使用这两种方法设置标签。

# silverlight - WebClient.UploadStringAsync 未正确 POST 数据到服务器

> ID：10630408
> 
> 赞同：2
> 
> 时间：2012-05-17T05:40:56.697
> 
> 标签：silverlight, windows-phone-7, c#-4.0

我正在尝试将电子邮件地址和密码发布到服务器以接收 JSON。但是，以下代码从服务器接收到响应，表明未收到 POST 数据。

```
private void BtnSignIn_Click(object sender, RoutedEventArgs e)
{
    String email = Email.Text;
    String password = Password.Password;

    String data = "email=" + email + "&password=" + password;

    WebClient wc = new WebClient();
    Uri uri = new Uri("http://api.server.com/login");

    wc.UploadStringCompleted += new UploadStringCompletedEventHandler(wc_UploadStringCompleted);
    wc.UploadStringAsync(uri, "POST", data);
} 
```

该字符串`data`以格式正确生成`email=test@test.com&password=hunter2`。

和事件处理函数...

```
private void wc_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
{
    MessageBox.Show(e.Result);
} 
```

我需要做些什么来确保将字段正确发布到服务器？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T10:53:47.170

您需要在代码中添加`wc.Headers["Content-Type"] = "application/x-www-form-urlencoded";`和 `wc.Encoding = Encoding.UTF8;`。这会将您的数据正确发布到服务器。请参阅下面的代码，这将帮助您...

```
private void BtnSignIn_Click(object sender, RoutedEventArgs e)
{
    String email = Email.Text;
    String password = Password.Password;
    String data = "email=" + email + "&password=" + password;
    WebClient wc = new WebClient();
    Uri uri = new Uri("http://api.server.com/login");
    wc.UploadStringCompleted += new ploadStringCompletedEventHandler(wc_UploadStringCompleted);
    wc.Headers["Content-Type"] = "application/x-www-form-urlencoded";
    wc.Encoding = Encoding.UTF8;
    wc.UploadStringAsync(uri, "POST", data);
} 
```

# c# - XobotOS：为什么 C# 二叉树基准测试使用结构？

> ID：10630409
> 
> 赞同：11
> 
> 时间：2012-05-17T05:41:00.477
> 
> 标签：c#, mono, benchmarking, xobotos

对xobotos 中著名的[性能提升](http://blog.xamarin.com/2012/05/01/android-in-c-sharp/)感到好奇，我查看了二叉树[基准代码](https://github.com/zanew/MonovsDalvik)。

[二叉树节点](https://github.com/zanew/MonovsDalvik/blob/master/BintreesDalvik/src/bintrees/dalvik/BintreesDalvikActivity.java)的Java版本是：

```
private static class TreeNode
{
    private TreeNode left, right;
    private int item;
} 
```

[C# 版本](https://github.com/zanew/MonovsDalvik/blob/master/BintreesMonoDroid/BintreesMonoDroid/BintreesMonodroidActivity.cs)是：

```
struct TreeNode
{
  class Next
  {
    public TreeNode left, right;
  }

  private Next next;
  private int item;
} 
```

我想知道在这里使用结构有什么好处，因为 Next 和 Previous 指针仍然封装在一个类中。

好吧，有一个 - 叶节点是纯值类型，因为它们不需要左右指针。在一半节点是叶子的典型二叉树中，这意味着对象数量减少了 50%。尽管如此，列出的性能提升似乎要大得多。

问题：还有更多吗？

此外，由于我不会想到在 C# 中以这种方式定义树节点（感谢 Xamarin！）还有哪些其他数据结构可以从以非显而易见的方式使用结构中受益？（尽管这有点离题且开放式。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:23:27.577

I just ran across this odd code and had the same question. If you change the code to match the Java version it will run just slightly slower. I believe most of the 'struct TreeNode' will get boxed and allocated anyway, except for the bottom row. However, each node results in 2 allocations: boxed TreeNode and class Next. The allocation savings quickly disappear. IMO, this is not an appropriate use of struct.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:16:47.307

This groups two nodes into one allocation, ideally halving the number of total allocations.

IMO this makes the comparision pretty meaningless.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:27:35.223

结构可以在堆栈而不是堆上分配（尽管并非在所有情况下），这意味着它们一旦超出范围就会被取消分配 - 垃圾收集器不会参与该场景。这可能会导致更小的内存压力和更少的垃圾收集。此外，堆栈（大部分）是内存的连续区域，因此访问它具有更好的局部性，这可以（再次，可能）提高 CPU 级别的缓存命中率。

Microsoft 关于[在类和结构之间进行选择的](http://msdn.microsoft.com/en-us/library/ms229017.aspx)指南：

*   结构应该很小（通常为 16 字节）且寿命短
*   它们应该是不可变的

如果满足这些条件，那么在类上使用结构将导致性能提升。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T07:27:21.833

我不认为在这里使用 struct 有什么不同。特别是在查看 TreeNode 的源代码后，TreeNode 的实例总是在构造函数和递归的 bottomUpTree 调用中复制。

# iphone - 组合纹理

> ID：10630414
> 
> 赞同：0
> 
> 时间：2012-05-17T05:41:19.407
> 
> 标签：iphone, cocos2d-iphone

我正在尝试制作带有纹理的精灵，但我不知道精灵的大小。据我所知，我可以用自定义矩形初始化一个带有框架的精灵：

```
CCSpriteFrame *frame = [[CCSpriteFrame alloc] initWithTextureFilename:@"name.png" rect:CGRectMake(0, 0, 10, 10)];
sprite = [[CCSprite alloc] initWithSpriteFrame:frame]; 
```

如果纹理的大小应该更大，那么图像的大小，我需要把这个图像（或它的一部分）与第一个并排放置。**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:40:07.780

我找到了解决方案。有一个开源工具包用于绘制任何形状的 CCNode/CCSprite 并用任何纹理填充它：[PRKit](https://github.com/asinesio/cocos2d-PRKit)。但它不适用于 cocos2d v2.0。为了解决这个问题，用这个替换`draw`PRFilledPolygon.m 中的方法：

```
-(void) draw {
    ccGLBindTexture2D( [self.texture name] );

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position | kCCVertexAttribFlag_TexCoords );

    [prog use];
    [prog setUniformForModelViewProjectionMatrix];

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, sizeof(CGPoint), areaTrianglePoints);
    glVertexAttribPointer(kCCVertexAttrib_TexCoords, 2, GL_FLOAT, GL_FALSE, sizeof(CGPoint), textureCoordinates);

    glDrawArrays(GL_TRIANGLES, 0, areaTrianglePointCount);
} 
```

并且`prog (CCGLProgram *)`定义在`initWithPoints:andTexture:usingTriangulator:`

```
prog = [[CCShaderCache sharedShaderCache] programForKey:kCCShader_PositionTexture]; 
```

* * *

另外，如果您使用 Box2D，要使此 PRFilledPolygon 与 b2Body 兼容，请执行以下操作（这是一种惰性方法。我建议您遵循 OOP 并正确执行此操作）：

1.  CCSprite 的子类 PRFilledPolygon（默认为 CCNode）
2.  制作一个由 box2d 模板生成的 PhysicsSprite 的克隆，并将其从 PRFilledPolygon 子类化（默认为 CCSprite）
3.  当你初始化你的身体时，使用这个新类而不是 PhysicsSprite，就像你之前做的那样。

# c# - 如何从 C# 应用程序调用带有指向 void 的指针的 C++ 函数？

> ID：10630419
> 
> 赞同：5
> 
> 时间：2012-05-17T05:41:32.983
> 
> 标签：c#, char, dllimport

我有一个`.dll`用 C++ 编写的动态库 () 导出我想在我的 C# 应用程序中使用的函数：

```
int SendText(void* pControl, char* sText); 
```

鉴于它需要一个指向 void 的指针，我该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T05:51:12.293

因为`void*`您可以使用`IntPtr`，
字符串将与`MarshalAs`属性一起使用：

```
[DllImport("MyDll.dll", CharSet = CharSet.Ansi)]
public static extern int SendText(IntPtr pControl, [MarshalAs(UnmanagedType.LPStr)] string sText); 
```

# jquery - 验证取决于复选框？

> ID：10630423
> 
> 赞同：0
> 
> 时间：2012-05-17T05:42:16.103
> 
> 标签：jquery

我的表单中有一个部分，仅在选中复选框时才会显示。因此，我对 tho 字段的验证仅在选中复选框时才适用。我的代码不起作用。

这是我到目前为止得到的，并在以下位置找到了这些信息：

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

```
// Validation

function validateForm() {
    $('#frmMain').validate({
        rules: {

            SuretyFullName: { required: '#chkSurety:checked' } //if required: true it works all the time.
        },
        messages: {
            SuretyFullName: { required: 'Required' }
        },

        submitHandler: function (form) {
            $('#btnSubmit').click();

        }
    });
} 
```

代码编辑：以下建议：表单变得无响应：

```
$(document).ready(function(){
  $("#btnSubmit").click(function(){
if($('#chkSurety').is(":checked"))
{  
function validatesurety(){
 $('#frmMain').validate({
 rules: {       
            SuretyFullName: { required: true } 
            },
        messages: {
            SuretyFullName: { required: 'Required' } 
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:48:58.683

你可以检查它是否检查然后运行你的函数

```
 $(document).ready(function(){
 //the submit click 
      $("#submit").click(function(){
    if($('#checkboxid').is(":checked"))// check if the checkbox checked if yes 
    {
    //then call you function 
    function validateForm() ;
    }
      });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:22:55.953

把它放在你的`validateForm`函数中：

```
// set the default rules
var rules = {
    SuretyFullName: { required: false },
    SuretyIDNumber: { required: true}, 
    SuretyPhysicalAddress: { required: true }, 
    SuretyHomeTel: { required: true}, 
    SuretyPlace: { required: true}, 
    SuretyDay: { required: true }, 
    SuretyMonth: { required: true } 
 };

 // override the full name rule, based on the checkbox
 rules.SuretyFullName.required = $('#chkSurety').is(':checked');

 $('#fmrMain').validate({
      rules: rules,
      ...
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T13:05:00.790

```
function validateForm() {
    $('#frmMain').validate({
        rules: {

           SuretyFullName: { required: function (element) { if ($('#chkSuretyShip').is(':checked')) { return true } else { return false} } },           
        },
        messages: {
            SuretyFullName: { required: 'Required' }
        },

        submitHandler: function (form) {
            $('#btnSubmit').click();

        }
    });
} 
```

# perl - 使用 perl 并行打开一个新的命令提示符并在其中执行一个文件

> ID：10630425
> 
> 赞同：0
> 
> 时间：2012-05-17T05:42:25.297
> 
> 标签：perl, fork, multiprocessing, command-prompt

在 perl 文件（比如 main.pl）的执行中，我想创建一个新的命令提示符（windows os）并在其中执行一个文件（比如 sub.pl），与 main.pl 的执行并行。

我想我可能需要为此创建一个新进程并从新进程中调用 system() 命令。但是，我无法弄清楚这个 system(...) 命令会调用一个新终端，该终端运行一个新文件，并且可能在“sub.pl”执行完成时关闭。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:01:42.697

那是一个Windows问题。

请尝试以下方法：

```
my $cmd = "perl -w otherscript.pl"; 
my $result = system( "start $cmd" ); 
```

这将在 Windows 中打开一个新的“cmd”终端。

# ruby-on-rails - 载波，Excon::Errors::MovedPermanently 在 RegistrationsController#update 错误

> ID：10630430
> 
> 赞同：7
> 
> 时间：2012-05-17T05:42:57.277
> 
> 标签：ruby-on-rails, devise, carrierwave

我一直在尝试让carrierwave 与亚马逊s3 合作。代替

```
storage :s3 
```

我有

```
storage :fog 
```

将其更改为 storage :s3 会立即出现错误

[https://stackoverflow.com/questions/10629827/carrierwave-cant-convert-nil-into-string-typeerror-when-using-s3](https://stackoverflow.com/questions/10629827/carrierwave-cant-convert-nil-into-string-typeerror-when-using-s3)

所以我把它改成了 storage :fog 就像下面的 rdoc 说的那样。

[http://rubydoc.info/gems/carrierwave/frames](http://rubydoc.info/gems/carrierwave/frames)

但是，当我尝试上传图片时，我收到了这个疯狂的错误。我也在使用设计宝石。

我的完整堆栈跟踪是

```
Excon::Errors::MovedPermanently in RegistrationsController#update

Excon::Errors::MovedPermanently (Expected(200) <=> Actual(301 Moved Permanently)
  request => {:connect_timeout=>60, :headers=>{"Content-Length"=>95472, "Content-Type"=>"image/jpeg", "x-amz-acl"=>"private", "Cache-Control"=>"max-age=315576000", "Date"=>"Thu, 17 May 2012 05:28:55 +0000", "Authorization"=>"AWS AKIAIN6SC3YSGBSUKV4Q:kZOG9mG01jYn48ImFMYbgxAAQRk=", "Host"=>"user.a.777.s3-eu-west-1.amazonaws.com:443"}, :instrumentor_name=>"excon", :mock=>false, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>"/Users/sasha/.rvm/gems/ruby-1.9.3-p125/gems/excon-0.13.4/data/cacert.pem", :ssl_verify_peer=>true, :write_timeout=>60, :host=>"user.a.777.s3-eu-west-1.amazonaws.com", :path=>"/uploads%2Fuser%2Fimage%2F59%2Fidea.jpg", :port=>"443", :query=>nil, :scheme=>"https", :body=>#<File:/Users/sasha/Desktop/rails_projects/blue_eyes/public/uploads/tmp/20120516-2228-19160-9893/idea.jpg>, :expects=>200, :idempotent=>true, :method=>"PUT"}
  response => #<Excon::Response:0x007fd72a146820 @body="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error><Code>PermanentRedirect</Code><Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message><RequestId>F5F5AF888E837622</RequestId><Bucket>user.a.777</Bucket><HostId>IShK3GIthzCQysLOKXnR+ijJiHmMuUtXBOpFxQM4uCvJgkEHfmFn43LL4oWmpT82</HostId><Endpoint>s3.amazonaws.com</Endpoint></Error>", @headers={"x-amz-request-id"=>"F5F5AF888E837622", "x-amz-id-2"=>"IShK3GIthzCQysLOKXnR+ijJiHmMuUtXBOpFxQM4uCvJgkEHfmFn43LL4oWmpT82", "Content-Type"=>"application/xml", "Transfer-Encoding"=>"chunked", "Date"=>"Thu, 17 May 2012 05:29:00 GMT", "Connection"=>"close", "Server"=>"AmazonS3"}, @status=301>):
  app/controllers/registrations_controller.rb:30:in `update' 
```

我什至不知道那是什么意思。

在我的初始化程序/carrierwave.rb 我有..

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',       # required
    :aws_access_key_id      => 'somekey',       # required
    :aws_secret_access_key  => 'secretkey',       # required
    :region                 => 'eu-west-1'  # optional, defaults to 'us-east-1'
  }
  config.fog_directory  = 'bucket.name'                     # required
  #config.fog_host       = 'https://s3.amazonaws.com'            # optional, defaults to nil
  config.fog_public     = false                                   # optional, defaults to true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}  # optional, defaults to {}
end 
```

我的上传文件有

```
 #storage :s3
  storage :fog
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end 
```

我的宝石文件有

```
gem 'carrierwave'
gem 'thin'
gem 'fog' 
```

当我启动我的服务器而不是 webrick 时，它也在开发中使用瘦。

我的配置错了吗？帮助将不胜感激！我一直被这个carrierwave/s3问题困住了

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T04:00:04.500

我今天早些时候遇到了这个问题，这是该地区的问题。把它拿出来，让它默认设置。

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',       # required
    :aws_access_key_id      => 'somekey',       # required
    :aws_secret_access_key  => 'secretkey'       # required
  }
  config.fog_directory  = 'bucket.name'                     # required
  #config.fog_host       = 'https://s3.amazonaws.com'       # optional, defaults to nil
  config.fog_public     = false                             # optional, defaults to true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'} # optional, defaults to {}
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:38:29.347

对我来说，这个配置

```
config.fog_directory  = 'bucket_name'                   
config.fog_host       = 'https://s3-eu-west-1.amazonaws.com/bucket_name' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-26T07:26:16.397

我有同样的问题。

遵循以下 3 个步骤对我有用。

1.创建桶时更改默认区域

2.编辑我的`carrierwave.rb`文件（如下图）

`initializers/carrierwave.rb`：

```
if Rails.env.production?
  CarrierWave.configure do |config|
    config.fog_credentials = {
      :provider              => 'AWS',
      :aws_access_key_id     => ENV['S3_ACCESS_KEY'],
      :aws_secret_access_key => ENV['S3_SECRET_KEY'],
      :region => ENV['S3_REGION']
    }
    config.fog_directory     =  ENV['S3_BUCKET']
  end
end 
```

3.在命令行中配置heroku，如下所示：`heroku config:set S3_REGION='your region'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-09T16:52:22.270

就像@Jason Bynum 所说，不要指定区域并让它默认。

如果还是失败，别着急，这个时候heroku会给你点赞`your region specified is wrong and should be xxx`

而且您现在知道如何填充该区域:)

以下对我有用：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
      provider:              'AWS',                        # required
      aws_access_key_id:     ENV['S3_KEY'],                        # required
      aws_secret_access_key: ENV['S3_SECRET'],                        # required
      region:                'ap-southeast-1',                  # optional, defaults to 'us-east-1'

  }
  config.fog_directory  = 'your_bucket_name'                          # required
  config.fog_public     = false                                        # optional, defaults to true
  config.fog_attributes = { 'Cache-Control' => "max-age=#{365.day.to_i}" } # optional, defaults to {}
end 
```

宝石文件：

```
gem 'carrierwave', '0.10.0'
gem 'fog', '1.36.0' 
```

# xamarin.ios - 单点触控层

> ID：10630432
> 
> 赞同：0
> 
> 时间：2012-05-17T05:43:07.090
> 
> 标签：xamarin.ios, layer

我是 monotouch 和 iOS 开发环境的新手。我阅读了 Quartz 2D 编程指南，但我仍然不知道是否可以在屏幕上绘制 2 层，第一层将始终在顶部显示星形或某些形状并保持透明，第二层将绘制圆圈人们触摸屏幕的地方。

我希望第一层总是在顶部，因为它没有改变，所以不应该重新绘制。

我在哪里可以找到这个或文档的例子？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:18:39.097

也许你应该看看 Xamarin Seminar [Getting Started with CoreGraphics](http://www.youtube.com/watch?v=MNxVMYKaZP0&list=PL35E8B636BEC8411D&context=C3dd5e8eADOEgsToPDskKXtJdk_pmgW6xcxVUiHFjQ)还有几本书，其中有一个非常好的 CoreGraphics 部分

*   [使用 MonoTouch 为 .NET 开发人员开发适用于 iPhone 和 iPad 的 C# 应用程序](http://www.apress.com/9781430231745)
*   [学习 MonoTouch：使用 C# 和 .NET 构建 iOS 应用程序的动手指南](https://rads.stackoverflow.com/amzn/click/com/0321719921)

还有很多你可以在网上找到的 Objective-c 示例，它们在 c# 上很容易实现，因为暴露的 API 非常相似。

希望这有助于您入门。

亚历克斯

# parsing - NSIS 替换文件中的行：从不读取文件并且从不识别正确的行

> ID：10630437
> 
> 赞同：2
> 
> 时间：2012-05-17T05:43:26.547
> 
> 标签：parsing, installation, nsis

我正在尝试替换文件中的一行。

**我的问题：**我永远无法在文件中找到我要查找的行。我的函数找到了我要替换的行，但没有正确地将其识别为我要替换的行，或者它可能无法打开文件（文件的路径正确）。

如果您使用以下简单的文本文件测试 my 函数，它仍然会失败：

> abc
> 测试
> 数据

你能帮我让我的函数正确替换文件中的一行吗？

```
# usage that fails to work
Push "C:\Users\blah\Desktop"
Push "test.txt"
Push "abc"
Push "def"
Call ReplaceLineInFile

Function ReplaceLineInFile
    # T-3 = nDir
    # T-2 = nFile
    # T-1 = targetLine
    # TOP = replaceLine  # TOP is top of stack
    # $4  = tempName
    # $5  = numTargetLinesFound

    Pop $3  # replaceLine
    Pop $2  # targetLine
    Pop $1  # nFile
    Pop $0  # nDir
    StrCpy $1 "$0\$1" # create the string 'C:\users\blah\mytext.txt'
    IntOp $5 0 + 0
    MessageBox MB_OK "ReplaceLineInFile: dir: $0$\r$\nfile: $1$\r$\ntarget: $2$\r$\nreplace: $3" 

    ClearErrors
    FileOpen $8 $1 "r"                         ; open target file for reading
    GetTempFileName $4                         ; get new temp file name
    FileOpen $7 $4 "w"                         ; open temp file for writing
    loop:
       FileRead $8 $6                          ; read line from target file
       IfErrors done                           ; check if end of file reached
       MessageBox MB_OK "Line: $6$\r$\nTarg: $2"
       StrCmp $6 "$2$\r$\n" 0 +3               ; compare line with search string with CR/LF
          StrCpy $6 "$3$\r$\n"                 ; change line
          IntOp $5 $5 + 1
       StrCmp $6 "$2" 0 +3                     ; compare line with search string without CR/LF (at the end of the file)
          StrCpy $6 "$3"                       ; change line
          IntOp $5 $5 + 1
       FileWrite $7 $6                         ; write changed or unchanged line to temp file
       Goto loop

    done:
       FileClose $8                            ; close target file
       FileClose $7                            ; close temp file
       Delete $1                               ; delete target file
       CopyFiles /SILENT $4 $1                 ; copy temp file to target file
       Delete $4                               ; delete temp file
       MessageBox MB_OK "Targets found: $5"

FunctionEnd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:56:54.280

您应该检查 NSIS 的 LineFind 宏：http: [//nsis.sourceforge.net/LineFind](http://nsis.sourceforge.net/LineFind)

要替换文件中的行，您可以尝试使用：

```
Name "Text Replacer"
OutFile "TextReplacer.exe"

;[DEFINES] You define String To Find and String To Replace

!include "TextFunc.nsh" 
!insertmacro LineFind 
!include "Sections.nsh" 

!define STRTOFIND  "BaseLine1: TextThatShouldBeChanged"
!define STRTOREPL  "BaseLine1: TextHasBeenCHANGED!!!"
!define STRTOFIND2  "[BaseLine2=TextThatShouldBeChanged;"
!define STRTOREPL2  "[BaseLine2=TextCHANGED!!!;"

;[Functions] You create Line Replace Functions for each line

Function LineFindCallback
    StrLen $0 "${STRTOFIND}"
    StrCpy $1 "$R9" $0
    StrCmp $1 "${STRTOFIND}" 0 End
    StrCpy $R9 "${STRTOREPL}$\r$\n"
    End:
    Push $0
FunctionEnd
Function LineFindCallback2
    StrLen $0 "${STRTOFIND2}"
    StrCpy $1 "$R9" $0
    StrCmp $1 "${STRTOFIND2}" 0 End
    StrCpy $R9 "${STRTOREPL2}$\r$\n"
    End:
    Push $0
FunctionEnd

;[Sections] You call function for specific line in specific file
;Input and Output file can be same or different
;If Output file name is different (new file is created)
;then every next LineFind call should take Previous Output file as Input file

Section "Replace 1" Section1
SectionIn 1 +2
${LineFind} "$EXEDIR\FILE.ini" "$EXEDIR\FILE.ini" "1:-1" "LineFindCallback"
    IfErrors 0 +2
    MessageBox MB_OK "Error"
${LineFind} "$EXEDIR\FILE.ini" "$EXEDIR\FILE.ini" "1:-1" "LineFindCallback2"
    IfErrors 0 +2
    MessageBox MB_OK "Error"
SectionEnd 
```

创建`FILE.ini`包含并将其保存在您将拥有的同一文件夹中`TextReplacer.exe`：

```
This is File.ini file
That line will not be changed
BaseLine1: TextThatShouldBeChanged
This line=is just a dummy line
[BaseLine2=TextThatShouldBeChanged;
File.ini end 
```

# javascript - 如何修复表头并允许数据垂直移动，同时允许表头和数据垂直移动

> ID：10630438
> 
> 赞同：0
> 
> 时间：2012-05-17T05:43:29.800
> 
> 标签：javascript, jquery, html, css

我遇到了一个问题，我有一张使用标签制作的表格。问题是我必须在浏览器上而不是在 div 上提供垂直滚动条。当我移动垂直滚动条时，应该只允许移动该表的数据，但不允许移动标题。如果我们移动水平滚动条，那么标题和数据都应该移动。我想我需要使用一些 Java Script 或 JQuery 。但我是这个设计部分的新手，所以我不太清楚我是如何做到这一点的，请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:15:19.950

如果您想在滚动时将标题保持在顶部，请为其提供 css 属性`position:fixed;`

这是一个简单的例子：http: [//jsfiddle.net/DigitalBiscuits/ymevS/1/](http://jsfiddle.net/DigitalBiscuits/ymevS/1/)

# python - 按超出范围的索引为列表分配一个值

> ID：10630442
> 
> 赞同：3
> 
> 时间：2012-05-17T05:43:47.073
> 
> 标签：python, list

```
mylist = ["a", "apple", "b", "ball", "c", "cat"]
mylist[6] = "value"
print(mylist) 
```

错误：

```
IndexError: list assignment index out of range 
```

我记得在javascript中按索引分配值，它在python中不起作用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T05:46:05.560

Python 的列表是 0 索引的。您的列表中有 6 个元素，因此您可以使用从`0`到的任何内容对它们进行索引`5`。尝试超出这些范围将不适用于普通`list`类型，但您似乎希望将索引用作隐式列表扩展。

为此，您需要一个稀疏容器，这是一个子类列表的快速实现。

```
class SparseList(list):
    def __setitem__(self, index, value):
        """Overrides list's __setitem__ to extend the list
           if the accessed index is out of bounds."""
        sparsity = index - len(self) + 1
        self.extend([None] * sparsity)
        list.__setitem__(self, index, value) 
```

像这样使用：

```
In [8]: sl = SparseList()

In [9]: print(sl)
[]

In [10]: sl[3] = "hi"

In [11]: print(sl)
[None, None, None, 'hi'] 
```

还有你的具体例子：

```
In [11]: mylist = SparseList(["a", "apple", "b", "ball", "c", "cat"])

In [12]: print mylist
['a', 'apple', 'b', 'ball', 'c', 'cat']

In [13]: mylist[6] = "value"

In [14]: print mylist
['a', 'apple', 'b', 'ball', 'c', 'cat', 'value'] 
```

如果你想要少一点自制的东西，试试[`blist`](http://pypi.python.org/pypi/blist)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T05:48:19.960

在 python 中，如果索引不存在，则单一分配不起作用。Javascript 数组是*“稀疏的”*，您可以在任何索引处存储一个值。相反，python 列表具有定义的大小，并且仅允许在现有索引中分配。

如果要在最后添加，请使用`mylist.append(value)`,

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T06:38:08.453

如 birye 所述，您可以使用 SparseList 完成您的要求。或者你总是可以使用附加。在 python 字典中，虽然你可以有任何索引分配说，

```
dic = {}
dic['1'] = 100
dic['2'] = 200 
```

所以你能做的就是这样写，

```
list = {}
i = 1 #Your index
list[str(i)] = value #Your value 
```

这可能会稍微增加执行时间。如果您引用任何未分配的索引，则会引发 IndexError 异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:50:42.817

您可以通过首先创建一个对象列表来实现这一点`None`，但这可能不是最好的做事方式。

```
mylist = [None] * 10
mylist[0:5] = ["a", "apple", "b", "ball", "c", "cat"]
mylist[6] = "value" 
```

或者，您可以只将元素附加到列表的末尾。

```
mylist = ["a", "apple", "b", "ball", "c", "cat"]

# create 7th element
mylist += ["value"]

# create 10th element
mylist += [None] * 2 + ["value2"] 
```

# android - 如何在android的listview中附加arraylist并显示

> ID：10630443
> 
> 赞同：4
> 
> 时间：2012-05-17T05:43:47.943
> 
> 标签：android

我从列表视图中显示的 webservice 前 50 条记录中获取值。我在页脚中有加载按钮。如果用户单击加载按钮，我将从 webservice 获取下一个 50 记录。如何附加前 50 和第二个 50 ..n 并在列表视图中显示它任何人都可以告诉怎么做

**我正在使用数据对象的arraylist**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:46:47.543

您只需将新的 50 条记录添加到您已传递给列表适配器的数组列表中，然后调用适配器的 notifydatasetchanged 方法来刷新列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:46:07.840

如果您正在谈论 ArrayList 合并，那么您可以使用`addAll()`List 的方法合并它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:58:53.880

在另一个临时数组列表中获取其他 50 条记录，并通过调用原始数组列表的 addAll() 方法将这些记录附加到原始数组列表中，然后再次将您的 listView 与具有您的 mearged 数组列表的适配器重新绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:01:40.650

ListView listView = (ListView)findViewById( R.id.myListView );
final ArrayList listItems = new ArrayList();
final ArrayAdapter 适配器 = new ArrayAdapter(this, android.R.layout.simple_list_item_1, listItems);
listView.setAdapter( 适配器 );

希望对你有帮助！！

# hadoop - hadoop：0 reducer 和 identity reducer 的区别？

> ID：10630447
> 
> 赞同：25
> 
> 时间：2012-05-17T05:44:24.130
> 
> 标签：hadoop, mapreduce

我只是想确认我对 0 reducer 和 identity reducer 之间区别的理解。

*   0 reducer 表示将跳过 reduce 步骤，mapper 输出将是最终输出
*   身份缩减器意味着洗牌/排序仍然会发生吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-17T08:35:08.560

你的理解是正确的。我将其定义如下：如果您不需要对地图结果进行排序 - 您设置 0 减少，并且该作业仅称为地图。
如果您需要对映射结果进行排序，但不需要任何聚合 - 您选择身份归约器。
为了完成这幅图，我们有第三种情况：我们确实需要聚合，在这种情况下，我们需要 reducer。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T21:51:33.460

使用 Identity Reducer 的另一个用例是将所有结果合并到 <# of reducers> 输出文件中。如果您使用 Amazon Web Services 直接写入 S3，这会很方便，特别是当映射器输出很小（例如 grep/搜索记录），并且您有很多映射器（例如 1000 个）时。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T08:17:05.920

这取决于您的业务需求。如果您正在计算字数，您应该减少地图输出以获得总结果。如果您只想将单词更改为大写，则不需要减少。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-11T07:06:53.517

*“No Reducer” （mapred.reduce.tasks=0）*和“Standard reducer”（即 IdentityReducer *（mapred.reduce.tasks=1 等））*之间的主要区别在于，当您使用“No reducer”时，MAP 之后没有分区和改组过程阶段。因此，在这种情况下，您将从映射器获得“纯”输出，而无需任何进一步处理。它有助于开发和调试目的，但不仅如此。

# android - 预期图像但返回空值

> ID：10630459
> 
> 赞同：0
> 
> 时间：2012-05-17T05:45:22.547
> 
> 标签：android

我正在尝试从我的画廊加载图像文件，但得到的是 null 而不是预期的图像。这是我正在使用的代码：

```
public static Bitmap decodeSampledBitmapFromStreem(InputStream is,
        int reqWidth, int reqHeight) {
    Bitmap b = null;
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(is, null, options);
    options.inSampleSize = calculateInSampleSize(options, reqWidth,
            reqHeight);
    options.inJustDecodeBounds = false;
    b = BitmapFactory.decodeStream(is, null, options);
    return b;
}
public static int calculateInSampleSize(BitmapFactory.Options options,
        int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float) height / (float) reqHeight);
        } else {
            inSampleSize = Math.round((float) width / (float) reqWidth);
        }
    }
    return inSampleSize;
} 
```

你能看出我的代码有什么问题吗？为什么我会为空？

请注意，如果我评论第 6 行，我的代码适用于小图像，但是根据我的错误日志，我收到较大图像的错误：

```
05-17 11:37:46.277: E/AndroidRuntime(9224): FATAL EXCEPTION: AsyncTask #3
05-17 11:37:46.277: E/AndroidRuntime(9224): java.lang.RuntimeException: An error occured while executing doInBackground()
05-17 11:37:46.277: E/AndroidRuntime(9224):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at java.lang.Thread.run(Thread.java:1019)
05-17 11:37:46.277: E/AndroidRuntime(9224): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-17 11:37:46.277: E/AndroidRuntime(9224):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at com.giftcard.GiftCard.decodeSampledBitmapFromStreem(GiftCard.java:454)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at com.giftcard.GiftCard$MyBitmapDecoder.doInBackground(GiftCard.java:500)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at com.giftcard.GiftCard$MyBitmapDecoder.doInBackground(GiftCard.java:1)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-17 11:37:46.277: E/AndroidRuntime(9224):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-17 11:37:46.277: E/AndroidRuntime(9224):     ... 4 more
05-17 11:37:49.387: I/Process(9224): Sending signal. PID: 9224 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:52:35.943

这可能是由于多次使用 isputStream 尽量避免首次使用**BitmapFactory.decodeStream(is, null, options);**

```
public static Bitmap decodeSampledBitmapFromStreem(InputStream is,
        int reqWidth, int reqHeight) {
    Bitmap b = null;
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    **BitmapFactory.decodeStream(is, null, options);**
    options.inSampleSize = calculateInSampleSize(options, reqWidth,
            reqHeight);
    options.inJustDecodeBounds = false;
    b = BitmapFactory.decodeStream(is, null, options);
    return b;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:32:14.577

这是内存泄漏的问题。

您会在这里找到解决方案：

[将图像加载到 Bitmap 对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:33:22.277

要从图库中获取图像，请尝试以下代码

```
public class SelectPhotoFromGallery extends Activity 
{

private static final int SELECT_PICTURE = 1;
private String selectedImagePath="";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = new Intent();
  intent.setType("image/*");
  intent.setAction(Intent.ACTION_GET_CONTENT);
  intent.addCategory(Intent.CATEGORY_OPENABLE);
  intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
  startActivityForResult(intent, SELECT_PICTURE); 
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE)
        {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);

        File imgFile = new  File(selectedImagePath);
 if(imgFile.exists()){

Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

ImageView myImage = (ImageView) findViewById(R.id.imageviewTest);
myImage.setImageBitmap(myBitmap);

 }}}}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:50:13.530

您是否尝试过使用 decodeByteArray 代替？

# .net - SQL 报告 - 多页 EMF 报告问题

> ID：10630462
> 
> 赞同：7
> 
> 时间：2012-05-17T05:45:35.997
> 
> 标签：.net, sql-server-2008, reporting-services, sql-server-2008-r2, sql-server-2012

我希望有人就这个问题提供帮助。这个问题一直是许多人的烦恼，因为以编程方式呈现 EMF 格式报告在 SQL2008 R2 和 SQL2012 中不起作用。

这是通过此处的 MS 连接记录的：[https ://connect.microsoft.com/SQLServer/feedback/details/560911/sql-2008-r2-reportexecutionservice2005-broken-with-image-emf#tabs](https://connect.microsoft.com/SQLServer/feedback/details/560911/sql-2008-r2-reportexecutionservice2005-broken-with-image-emf#tabs)

总之，当调用 ReportExecutionService 对象的 Render 方法时，它会返回第一页以及流 ID 的数组（通过输出参数）以映射后续页。然后为每个后续页面调用该流上的 RenderStream 方法。在 2008 年工作得很好。在 2008 R2 / 2012 年，流 ID 数组返回为空，这意味着您只能获得第一页 - 使其无用。

我很高兴看到 MS 发布了 2012 年的修补程序来修复它：http: [//support.microsoft.com/kb/2637802](http://support.microsoft.com/kb/2637802)

但是，安装修补程序/重新启动/等后，我仍然有问题。有没有人让热修复工作？有过同样的经历吗？知道大型报告的可行解决方案吗？

感谢您的任何帮助。史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:35:11.680

对于具有多个页面的 EMF，您必须使用`rs:PersistedStreams=True`和`rs:GetNextStream=True`URL 访问参数。有关此处的更多信息：[http://blogs.msdn.com/b/jgalla/...](http://blogs.msdn.com/b/jgalla/archive/2007/05/24/emf-rendering-and-persisted-streams.aspx)

不幸的是，这不会立即为您提供帮助，因为您无法使用 SSRS 执行 Web 服务中的 URL 访问参数。

您将必须构造一个 WebRequest，如上述[博客](http://blogs.msdn.com/b/jgalla/archive/2007/05/24/emf-rendering-and-persisted-streams.aspx)所示（您需要自己将整个 url 放在一起）或使用 ReportViewer 控件，如下所示：http: [//blogs.msdn.com/b/brianhartman/.. .](http://blogs.msdn.com/b/brianhartman/archive/2009/02/27/manually-printing-a-report.aspx)

这里也是[关于多页 EMF 问题的讨论](http://social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/402c7816-6d20-4f19-81b9-23cc06a935dd)。上面的链接也包括在那里。

最后一点，我在安装 SQL 2008 R2 上进行了测试，后来添加了 SP1，然后是 SP1 CU6。SP1 CU6 包含根据[此](http://support.microsoft.com/kb/2637802/en-us)的修补程序。如前所述，在所有情况下，EMF 的 streamIDs 参数都为空。无论如何，在我的机器上之前安装了 SQL 2005，并且可能在某个时候安装了 2008。一些帖子表明以前安装的 SQL Server 可能存在问题，因此安装干净的操作系统可能会有所帮助。如果你迫切希望这个工作。

# iphone - 我们可以在单个 UIPickerview 中隐藏/取消隐藏一个或多个组件吗？

> ID：10630463
> 
> 赞同：1
> 
> 时间：2012-05-17T05:45:37.603
> 
> 标签：iphone, xcode

我有`UIPickerview`2 个组件。现在我想知道是否可以在单击按钮时隐藏/取消隐藏一个组件。是否可以 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T06:11:49.120

是的，这是可能的。单击按钮时，告诉选择器`reloadAllComponents`然后在数据源方法中返回不同数量的组件（即一个 1 而不是 2）。

您需要将隐藏状态存储在 BOOL 中，以便您知道要在数据源方法中返回什么。

# c# - 在 .NET 4 上运行 .NET 3.5 应用程序时崩溃

> ID：10630464
> 
> 赞同：1
> 
> 时间：2012-05-17T05:45:43.577
> 
> 标签：c#, .net, .net-4.0, clr, compatibility

我们的应用程序是在 .NET 3.5 上使用 WinForms 构建的

这是专门在 Windows XP 上测试的，虽然我不确定它是否与操作系统相关。

每当我在仅使用 .NET 4 的机器上运行它时，它就会崩溃，说它找不到版本为 3.5 的 .NET 程序集。

我想知道为什么这不会自动发生。例如，一些 3rd 方库安装了某种策略，即当安装较新版本时，将使用它，即使您的应用程序是针对旧版本编译的。

**更新：**确切的错误消息是：

**“无法找到运行此应用程序的运行时版本”。**

我的问题是：

1.  为什么这与 .NET 框架不一样？
2.  解决方案是在配置文件中添加元素？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:51:58.540

一般来说，情况*不*应该是这样：

> [http://msdn.microsoft.com/en-us/library/ff602939.aspx](http://msdn.microsoft.com/en-us/library/ff602939.aspx)
> 
> 向后兼容性意味着为特定平台版本开发的应用程序将在该平台的更高版本上运行。.NET Framework 试图最大化向后兼容性：为 .NET Framework 的一个版本编写的源代码应该在 .NET Framework 的更高版本上编译，在 .NET Framework 的一个版本上运行的二进制文件在更高版本上的行为应该相同.NET 框架的。
> 
> ...
> 
> .NET Framework 4 向后兼容使用 .NET Framework 版本 1.1、2.0、3.0 和 3.5 构建的应用程序。换句话说，使用以前版本的 .NET Framework 构建的应用程序和组件将在 .NET Framework 4 上运行。

建议：

1）阅读这些链接：

*   [http://msdn.microsoft.com/en-us/library/ff602939.aspx](http://msdn.microsoft.com/en-us/library/ff602939.aspx)

*   [http://msdn.microsoft.com/en-us/library/dd889541.aspx](http://msdn.microsoft.com/en-us/library/dd889541.aspx)

*   [http://msdn.microsoft.com/en-us/library/ee461502.aspx](http://msdn.microsoft.com/en-us/library/ee461502.aspx)

2）看看你是否可以用最小的 .Net 3.5 Winforms 应用程序重现问题

3) 剪切/粘贴确切的错误消息和任何相关代码（例如，来自您的独立应用程序）

4) 如果一切都失败了，请考虑添加`<startup useLegacyV2RuntimeActivationPolicy="true" >`到您的 CLR 启动配置中。我*不*建议将此作为临时解决方法：

*   [http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx](http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:29:58.050

如果您的计算机没有安装 .NET 3.5，则没有 CLR 可以为您的应用程序启动。由于潜在的兼容性问题，.NET 4.0 不会自动用于您的应用程序。首先测试您的应用程序是否使用 .NET 4.0 运行，然后将此部分添加到您的 app.config 以告诉 CLR 更喜欢运行 .NET 4.0（如果存在）。

```
<configuration>
   <startup>
      <supportedRuntime version="v4.0.30319"/>
   </startup>
</configuration> 
```

如果 .NET 4 不作为后备存在，则编译应用程序所针对的 CLR 版本将用作后备。如果全部失败，您将收到消息“无法找到运行此应用程序的运行时版本”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T05:59:26.243

.NET 4.0 引入了新的 CLR。所以基本上拥有 4.0 对运行 3.5 应用程序没有多大帮助。 [这里已经提到过](https://stackoverflow.com/questions/148833/will-net-4-0-include-a-new-clr-or-keep-with-version-2-0)

# mfc - 在 Windows CE 中跟踪鼠标悬停事件

> ID：10630468
> 
> 赞同：0
> 
> 时间：2012-05-17T05:45:56.903
> 
> 标签：mfc, windows-ce

如何在将鼠标移到菜单或其他窗口上时跟踪鼠标悬停事件？我试过 TrackMouseEvent，但 Win CE 不支持。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:53:32.757

您可以使用 Tooltip 控件：

[MSDN 文章关于 WinCE 中的工具提示](http://msdn.microsoft.com/en-us/library/ms926239.aspx)

或者直接使用 WM_MOUSEMOVE 消息并自己做。使用鼠标消息并不难，因为您可以使用 WindowFromPoint() 函数来了解鼠标悬停在哪个窗口上。

# asp.net - 无法识别的属性“targetFramework”。请注意，属性名称区分大小写

> ID：10630473
> 
> 赞同：115
> 
> 时间：2012-05-17T05:46:18.087
> 
> 标签：asp.net, iis-7, web-config

我刚刚安装了 vs 2010，然后在窗口 7 中安装了 IIS。在 .net framework 4.0 中构建网站并将其转换为 IIS 中的应用程序时，它会显示此错误

![在此处输入图像描述](../Images/cd211725d03b948c1b71ff2646ef3840.png)

如果我`targetFramework="4.0"`从 web 配置文件中删除它，那么它会向我显示与`linq`参考错误有关的第二个错误

![在此处输入图像描述](../Images/6854a425ed05f7d7bbdb4c0693ca2e5c.png)

当我使用 localhost 运行我的网站时，这一切都发生了，但是每当我在 vs 2010 中只使用 f5 时，它就会完美运行。

当我想附加我的流程时，`aspnet_wp.exe`我在我的列表中找不到这个流程。

我在这里搜索了很多答案。我错过了什么。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-05-17T05:53:34.203

问题可能是：

*   您站点的应用程序池配置为 .NET Framework 版本 = v2.0.XXXXX
*   .NET 4 未安装在您的服务器上。

也可以看看

*   [无法识别的属性“targetFramework”](https://stackoverflow.com/questions/7530725/) ...
*   [如何添加 ASP.NET 4.0](https://stackoverflow.com/questions/4890245/) ...

...这帮助我解决了类似的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T05:50:48.440

您可能需要使用 IIS 重新注册 ASP.Net 版本 4。

导航到您的 .net framework 4.0 文件夹，然后运行`aspnet_regiis.exe -i`

例如，我的 .net framework 4.0 文件夹（Server 2k8 R2 x64）位于：C:\Windows\Microsoft.NET\Framework64\v4.0.30319

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-07T01:25:52.903

从控制面板打开 IIS 管理器-> 在左侧选择“应用程序池”-> 现在在中间部分显示您的项目列表然后选择您的项目，例如“MvcApplication1”-> 从右侧选择“设置应用程序池默认值”-> 现在更改.Net Framework 版本从 V2.0 到 V4.0

这对我有用，但请确保您已经安装了 .Net Framework 4.0 。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-02T19:07:59.450

运行以下命令来解决此问题。

开始 --> 运行：

%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe –i

如果您收到有关管理员权限的错误，您需要执行以下操作。

```
1\. CTRL+SHIFT+ENTER from the RUN menu will run as ADMIN
2\. START --> PROGRAMS --> ACCESSORIES --> Right-click on command prompt and "run as administrator" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-26T10:45:01.020

您还可以在 VS 中打开项目属性页，并在“构建”部分选择“目标框架”-.NET Framework 4。它帮助我解决了同样的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-11T22:35:56.300

打开您的 IIS，单击您的应用程序池并更改那里的设置。如果存在版本 4.0，请单击 defaultAppPool 并检查 .Net Clear 版本。您也许可以将管道模式更改为集成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-29T09:05:40.147

*   您当前的 .Net Framework 2.0 版。
*   您的服务器上未安装 .Net Framework 版本 4.0（或超过 4.0）。
*   更新您的 .Net 框架版本。如果尚未解决，您必须更改 IIS .Net Framework 版本设置并选择 .Net Framework 4.0 版。

# javascript - Javascript：在不破坏未来事件处理程序的元素的情况下替换 html 中的字符串

> ID：10630477
> 
> 赞同：1
> 
> 时间：2012-05-17T05:46:37.057
> 
> 标签：javascript

我有这段代码可以搜索给定的字符串 ( `_aff.tractionsCode`) 并将其替换为另一个字符串 ( `tractionsId`)，如下所示：

```
content = document.body.innerHTML.replace(_aff.tractionsCode, tractionsId);
document.body.innerHTML = content; 
```

这是一个例子：

假设`_aff.tractionsCode`等于 {tractionsCode}

```
<div class="affiliate" rel="{tractionsCode}">{tractionsCode}</div> 
```

它需要替换 {tractionsCode} 的两个实例

但是，问题是一旦发生这种情况，它就会替换加载的 html，因此我可能或（很可能）可能无法访问的其他 javascript 事件处理程序不再正常运行。

有没有办法查看 html（包括 rel 等属性）并在不覆盖所有 html 的情况下运行替换？

还是完全有更好的方法？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:13:19.507

哎哟! 您尝试做的事情可能通过大量工作和迭代节点（而不是元素）来实现......但是为什么要打扰呢？通过将范围限定为 DOM 的一个子部分的模板和使用委托的事件处理程序相结合，这样的工作变得最简单。

JSRender（https://github.com/BorisMoore/jsrender）是之前的jQuery模板插件（https://github.com/jquery/jquery-tmpl）的替代品，但是jquery-tmpl还是比较好用的（我相信潘多拉仍然使用它）。您可以使用非 javascript 类型将模板存储在脚本块中，并轻松提取该内容以呈现和替换 DOM 的特定子部分：

```
<script id="affiliateThing" type="text/x-jquery-tmpl">
<div class="affiliate" rel="${transactionsCode}">${transactionsCode}</div>
</script>
<script>
    jQuery("#affiliateThing").
        tmpl([{'transactionsCode': 'wee'}]).
        appendTo("#someElement");
</script> 
```

为确保替换此标记不会破坏任何事件处理程序，请确保通过父元素委托事件：

```
jQuery("#someElement").on("click", ".affiliate", function(event){alert('wee');}); 
```

此语句将事件处理程序绑定到“#someElement”而不是单个“.affiliate”元素，但仅当事件源自“.affiliate”元素时才会触发处理程序。

享受！

编辑：这个和模板系统的后端库是完全不重要的。然而，这项技术是。混合作用域模板和委托事件，你就很成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:51:59.650

通过`innerHTML`将`body`覆盖所有内容。您需要搜索要替换的特定文本节点。

就像是..

```
document.getElementBy..('identifier').innerHTML 
```

在 jQuery 中，

```
$('.className').text('text to insert'); 
```

# javascript - getTime() 在 Chrome 中不起作用

> ID：10630483
> 
> 赞同：1
> 
> 时间：2012-05-17T05:47:14.123
> 
> 标签：javascript, google-chrome

我有以下在 IE 和 firefox 中运行良好的 javascript 代码

```
var dt = new Date("17/05/2012 05:22:02").getTime(); 
```

但在 chrome 中，dt 的值为 NaN。我无法找到问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:55:31.107

在 Safari 和 Chrome 中，dd/mm 格式似乎是一个已知问题 - [http://code.google.com/p/chromium/issues/detail?id=5704](http://code.google.com/p/chromium/issues/detail?id=5704)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:01:04.587

试试这个，

```
var dt = new Date("05/17/2012 05:22:02").getTime() 
```

我建议使用 unixtimestamp 作为日期，因为每个浏览器都以不同的方式对待它们或使用[http://www.datejs.com/](http://www.datejs.com/)库

# ios - 没有 ARC 的 Apple 可达性

> ID：10630491
> 
> 赞同：6
> 
> 时间：2012-05-17T05:47:41.317
> 
> 标签：ios, xcode, compiler-errors, automatic-ref-counting

我想在我的应用程序中检查 Internet 连接。所以我使用苹果的可达性示例代码。

但是因为使用 ARC 存在一些错误。我纠正了其中的一些错误，但我的代码中仍然存在其他错误。

![在此处输入图像描述](../Images/0e4c08e6412d5d0220f97dfb20595701.png)

我应该如何解决这个问题？有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-17T06:11:18.870

您可以基于每个文件禁用 ARC。

1.  在文件列表中选择项目
2.  选择目标
3.  单击构建阶段选项卡
4.  打开编译源阶段
5.  向下滚动，直到找到您的源文件（或使用搜索字段）
6.  双击该文件的编译器标志列
7.  进入`-fno-objc-arc`

现在 ARC 已针对该文件禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:05:42.520

尝试将此用于您的 ARC 版本代码 ->[可达性 (iOS) ARCified](https://gist.github.com/1182373)

# ios - iOS asihttp请求如何记录表单

> ID：10630493
> 
> 赞同：0
> 
> 时间：2012-05-17T05:47:45.393
> 
> 标签：ios, forms, post, asihttprequest

我需要发送一个 ASI http 请求，一个 post 表单，

当我检查我的请求的正文时，它似乎是空的，如何检查正文是什么？为什么它是空的？

谢谢！

```
- (void)sendUnsentEntries {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    if (!sendingEntries) {

        sendingEntries = YES;
        Reachability *reachability = [Reachability reachabilityForInternetConnection];

        BOOL errorsSending = NO;
        NSInteger unsentCount = 0;

        if ([Client unsubmittedCount] > 0 && [reachability isReachable]) {            

            NSString *host = [self apiHost];

             for (Client* clientToSend in [Client allUnsubmitted]) {

                 NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@", host]];

                 ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url]; 
                 [request setValidatesSecureCertificate:NO];
                 request.requestMethod = @"POST";

                 [request setPostValue:clientToSend.name forKey:@"name"];
                 [request setPostValue:clientToSend.territory forKey:@"territory"];

                 NSLog(@"name:: %@", clientToSend.name);

                 //LOGING THE FOR THE REQUEST
                 NSString *requ = [[[NSString alloc] initWithData:[request postBody] encoding:NSUTF8StringEncoding] autorelease];

                 NSLog(@"request body: %@", requ);

                 [request startSynchronous];

                 NSError *error = [request error];
                 if (!error) {
                     NSString *responseString = [request responseString];

                     NSLog(@"response :::%@",responseString);

                     if ([responseString isEqualToString:@"true"]) {
                         clientToSend.submitted = [NSNumber numberWithBool:YES];
                     }              

                 } else {
                     NSLog(@"error: %@", [error description]);
                 }

                 [[self managedObjectContext] save:nil];

        }

        unsentCount += [Client unsubmittedCount];

        [[UIApplication sharedApplication] setApplicationIconBadgeNumber:unsentCount];

        if (errorsSending && showSendingErrors) {

        }

    }

    sendingEntries = NO;

    [pool release];
}

} 
```

所以我得到了我的 log of::`request body:`一个空响应，

这是记录表单正文的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:16:59.943

在表单提交到服务器之前，不会构建帖子正文。

你有两个选择：

1.  之后记录帖子正文`[request startSynchronous];`
2.  `[request buildPostBody];`在 NSLog 之前调用

# android - 通过 AsyncTask 中的 publishProgress() 将一对字符串和整数传递给 onProgressUpdate()

> ID：10630494
> 
> 赞同：0
> 
> 时间：2012-05-17T05:47:51.110
> 
> 标签：android, android-asynctask

这是场景。

我有两个进度元素：1） `ProgressBar`（进度）和 2）`TextView`（状态）。

到目前为止，为了一起传递状态和进度，我已经创建了一个 AsyncTask，方法是像`extends AsyncTask<String,JSONObject, String>`. 它也在工作。

但是，有没有一种有效的方法来传递 `String`and `Integer`而`onProgressUpdate()`不是将它们解析为 JSON ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:50:26.403

你可以看看[`Pair`](http://developer.android.com/reference/android/util/Pair.html)课堂。

# selenium - Selenium 2：- selenium.isTextPresent 在 IE8 中通过 Chrome 或 firefox 时的断言失败

> ID：10630495
> 
> 赞同：1
> 
> 时间：2012-05-17T05:47:53.940
> 
> 标签：selenium, selenium-webdriver, junit4

我正在尝试使用以下命令在 Selenium Junit 4 测试用例中检查链接配置文件（在配置文件 - 编辑配置文件下）的字符串“教育 + 添加学校”：

assertTrue(selenium.isTextPresent("教育 + 添加学校"));

当我查看网页源时，搅拌出现在：

## 教育 +**添加**学校

assertTrue 在 chrome 中按预期返回 True 或通过验证。但是在 IE 8 中我得到 assertionFailedError。我使用的是 windows 7 和 Selenium 2.21.0 。

我不确定为什么不同浏览器的行为不同。

代码如下所示：

公共类 test12 扩展 SeleneseTestCase {

```
 @Before
    public void setUp() throws Exception {selenium = new DefaultSelenium("localhost", 4444, "*iexplore", "https://www.linkedin.com/");
    selenium.start();
    }

@Test
public void testTest12() throws Exception {
    selenium.open("/uas/login?goback=&trk=hb_signin");
    selenium.type("id=session_key-login", "xxxxx");
    selenium.type("id=session_password-login", "xxxxxx");
    selenium.click("id=btn-primary");
    selenium.waitForPageToLoad("30000");

    selenium.click("link=Edit Profile");
    selenium.waitForPageToLoad("30000");

    assertEquals("Improve your Profile", selenium.getText("css=a  [name=\"guidedEdit\"] > span"));
    assertTrue(selenium.isElementPresent("id=yui-gen8"));

    //the below assertion failes in I.E 8,but it runs fine in chrome
    assertTrue(selenium.isTextPresent("Education + Add a school"));

    assertTrue(selenium.isElementPresent("css=#yui-gen7 > span.edit"));
    assertEquals("Edit Profile | Linked", selenium.getTitle());

}

@After
public void tearDown() throws Exception {
    selenium.stop();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:52:57.883

这可能与您的 IE8 设置有关。

在 IE 中运行 selenium 时，您应该将 Internet 选项下的安全选项更改为全部选中或全部取消选中“启用保护模式”（对于 Internet、本地、受信任和受限制）。另一个可能干扰的设置是兼容模式。运行测试时在 IE8 浏览器中按 F12 并查看浏览器和文档模式。如果其中任何一个说兼容模式​​，您应该找到兼容模式设置并将其关闭。

如果您找不到这些设置中的任何一个，请告诉我，我可以为您截屏（尽管我正在运行 IE9），如果它不起作用，请说明，因为那时我很想知道解决方案！:)

编辑：

通过访问元素并检查元素中的文本来解决。使用代码：

```
 String checkForEducation = selenium.getText("id=yui-gen10"); 
 assertEquals("Education + Add a school", checkForEducation); 
```

# c - const char* 的 scanf 分段错误

> ID：10630497
> 
> 赞同：1
> 
> 时间：2012-05-17T05:47:59.603
> 
> 标签：c, string, pointers, constants

我已将变量声明为

```
const char* mode; 
```

我想`mode`从用户那里获得价值。当我使用

```
scanf("%s",mode) 
```

我得到一个分段错误。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T06:11:01.310

您*应该*在`scanf`通话中收到警告。

通过声明

```
const char* mode; 
```

你创建`mode`了一个指向 const char 的指针，这意味着你不能修改`mode`指向的数据。

然后你打电话：

```
scanf("%s",mode); 
```

它试图修改`mode`指向的数据。

gcc 对此发出警告：

```
warning: writing into constant object (argument 2) [-Wformat] 
```

所以`mode`需要一个指向*非常量*字符的指针。而且，正如其他人所提到的，它需要指向一些实际数据，以便`scanf`可以修改该数据。这可能是导致您的分段错误的原因，但是由于您没有向我们展示如何`mode`初始化，所以很难说。

`mode`通常会指向数组的第一个字符。那么该阵列必须有多大？由于您使用`scanf`的是`"%s"`格式，因此它可能不够大。 从 .指向的缓冲区中`scanf("%s", mode)`读取一个以空格分隔的字符串。您无法避免会溢出缓冲区的输入。`stdin``mode`

*（如果这是一个初学者的练习，你现在*可以忽略缓冲区溢出问题；只需`mode`指出一个相当大的缓冲区，并避免提供很长的输入。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T05:51:02.000

您需要为指针分配内存以便能够用它做一些有意义的事情。将其声明为：

```
#define MAX_LENGTH 256
char *mode = malloc(MAX_LENGTH); 
```

此外，如果需要的内存不是太大，最好进行堆栈分配：简单地说，

```
char mode[MAX_LENGTH]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T05:54:33.770

分段错误通常是试图访问 CPU 无法物理寻址的内存。

那是因为你没有为你的变量分配内存。
注意：
但是一些像 Turbo C++ 这样的 c 编译器允许你这样做，甚至不需要分配内存。

# c# - 主页面/内容页面和 Request.Form / 控件名称

> ID：10630498
> 
> 赞同：2
> 
> 时间：2012-05-17T05:48:05.203
> 
> 标签：c#, asp.net, master-pages, name-attribute

我最近更改了网站的结构以使用母版页。第一个问题是所有的 javascript 都不起作用，因为所有的 id 都发生了变化，所以 document.getElementById('id') 可以找到 id，因为现在 id 是 ct100_something_id。我通过使用 ClientIDMode="Static" 解决了这个问题，但现在我发现我在回发时遇到了另一个问题，因为我使用 Request.Form 并且所有名称属性仍然更改为 ct100_....

据我所见，没有 ClientNameMode，那么如何阻止 asp.net 创建“花哨”名称属性。我无法在服务器控件上显式设置名称属性。

只是为了澄清：

有没有办法做到这一点：

```
<asp:HiddenField runat="server" ID="hdnUsername" Value="" /> 
```

...呈现为：

```
<input type="hidden" name="hdnUsername" id="hdnUsername" value="" /> 
```

...而不是：

```
<input type="hidden" name="ctl00$bodyContent$hdnUsername" id="hdnUsername" value="" /> 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:17:38.377

如果您正在访问控件，那么您不需要使用`Request.Form`并且直接访问控件。例如`this.TextBoxName.Text`

如果这对您没有帮助，那么我过去所做的是创建自己的`TextBox`控件，该控件在使用时更改 name 属性以匹配 id 属性`ClientIdMode=Static`

如果您查看我的博客[http://timjames.me/modify-asp.net-textbox-name-attribute](http://timjames.me/modify-asp.net-textbox-name-attribute)

这是我的代码，虽然它是 vb.net，所以你需要更改为 c#

您可以对此进行调整`HiddenFields`，然后再满足您的需求。

```
Public Class CleanNamesTextBox
    Inherits TextBox

    Private Class CleanNamesHtmlTextWriter
        Inherits HtmlTextWriter

        Sub New(writer As TextWriter)
            MyBase.New(writer)
        End Sub

        Public Overrides Sub AddAttribute(key As System.Web.UI.HtmlTextWriterAttribute, value As String)
            value = value.Split("$")(value.Split("$").Length - 1)
            MyBase.AddAttribute(key, value)
        End Sub

    End Class

    Protected Overrides Sub Render(writer As System.Web.UI.HtmlTextWriter)
        Dim noNamesWriter As CleanNamesHtmlTextWriter = New CleanNamesHtmlTextWriter(writer)
        MyBase.Render(noNamesWriter)
    End Sub

    Sub New(id As String, text As String, cssClass As String, clientIDMode As ClientIDMode)
        MyBase.New()
        Me.ID = id
        Me.CssClass = cssClass
        Me.ClientIDMode = clientIDMode
        Me.Text = text
    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T09:17:16.933

对不起，它是 ASP.net 属性通过添加唯一键作为前缀到控件的 id 来唯一标识客户端的服务器控件。

# java - 从我的 Java Web 服务器正确获取图像

> ID：10630502
> 
> 赞同：3
> 
> 时间：2012-05-17T05:48:29.190
> 
> 标签：java, webserver

我用 Java 创建了一个简单的 HTTP 服务器。当浏览器向我的 Web 服务器发送 GET 请求以获取图像文件时，假设为 .jpg。目前我的浏览器无法正确获取图像。

究竟必须设置哪些标头字段？

目前我有日期、服务器、内容类型、内容长度、连接。我使用以下方法设置长度：

```
fin = new FileInputStream(fileName);
contentLength = fin.available(); 
```

Content-Type 设置为正确的 mime-type，所以没有问题。

我使用以下方法编写文件数据：

```
public void sendFile (FileInputStream fin, DataOutputStream out) 
{
    byte[] buffer = new byte[1024];
    int bytesRead;
    int strCnt = 0;
    try
    {
        int cnt = 0;
        while ((bytesRead = fin.read(buffer)) != -1)
        {
             out.write(buffer, 0, bytesRead);
        }
        fin.close();
    }
    catch (IOException ex)
    {

    }
} 
```

这是我的 Chrome 浏览器收到的内容

[![铬获取](../Images/2f451464c36db806f2f9345a37a66df8.png)](https://i.stack.imgur.com/pLAqE.jpg)

它似乎没有下载完整的内容长度。

图像文件的实际大小为 2.73KB。

如果没有缺少标题字段，那么可能导致问题的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:04:35.203

看起来你没有发送所有数据。尝试添加 out.flush(); out.close(); 在 fin.close() 之前：

```
out.flush();
out.close();
fin.close(); 
```

我还建议您将 DataOutputStream 包装到 BufferedOutputStream 中。从我的实践来看，在写入 hd/network 时，它比 DataOutputStream 工作得更快。

# javascript - Jquery - 在一个简单的下拉菜单中操作类

> ID：10630511
> 
> 赞同：0
> 
> 时间：2012-05-17T05:49:41.943
> 
> 标签：javascript, jquery, drop-down-menu

全部，

我之前发布了一个[问题](https://stackoverflow.com/questions/10605797/transversing-replacing-classes)，但没有得到答案（诚然是由于措辞不佳）。在更新/测试代码后重新发布。

我想建立一个简单的下拉菜单。[提琴](http://jsfiddle.net/gUh7V/8/)。

**问题**：

菜单下拉并在重新单击选项卡时很好地折叠起来。然而，当菜单被关闭并且另一个选项卡被点击时，事情会变成梨形，即另一个菜单不会下拉。

我已经使用 firebug 对 jquery 代码进行了广泛的测试，并且注意到了很多异常。例如，出于我的目的，我认为 jquery code: `$('ul', curTab).***`将与 相同`$(curTab).children(0).***`，有时此代码运行良好，有时则不然。

我一直注意到“addClass”和“removeClass”方法没有按预期添加和删除类。

`if ($('.cTabActive')){...}`不起作用，语法错误 ？
如果我这样做`if ($('.cTabActive', aFileTabs)){...}`，这也不起作用......

对于这个所谓的简单代码，我完全束手无策。帮助将不胜感激。

代码：（请查看上面的 jsfiddle.net 代码）

**HTML**：

```
 <div id="filemenu">                     <!-- right tabs menu -->
            <ul id="fm_ul">
                <li class="filetabs">File
                    <ul class='cDropDownItems'>
                        <li class="m_items"><a href="#"><span class="aHeading">New</span><span class="shortcutK">Ctrl-U</span></a></li>
                        <li class="m_items"><a href="#"><span class="aHeading">Open</span><span class="shortcutK">Ctrl-Z</span></a></li>
                    </ul></li><li class="filetabs">Edit
                    <ul class='cDropDownItems'>
                        <li class="m_items"><a href="#"><span class="aHeading">Undo</span><span class="shortcutK">Ctrl-M</span></a></li>

                    </ul></li><li class="filetabs cLastFileTabs">Settings
                    <ul class='cDropDownItems'>
                        <li class="m_items m_itemsCK" id="frontView"><a href="#"><img src="Img/tickB&W1.png" alt="tick" /><div class="filler"></div><span class="aHeading">Front View</span><span class="shortcutK">Ctrl-A</span></a></li>
                    </ul></li>
            </ul>
        </div>                    <!-- close -> 'filemenu' div -->
    </div>                    <!-- close -> 'menu_bars' div --> 
```

**JAVASCRIPT**：

```
$('.filetabs').on('click', function (e) {
        function abc() {
            if ($(curTab).hasClass ('cLastFileTabs')) {
                $('ul', curTab).css ({left: '-66.6%'});
                $('ul',curTab).animate ({opacity: 1}, 125, 'linear');
            }    else     {
                $('ul', curTab).css ({left: 0});
                $('ul', curTab).animate ({opacity: 1}, 125, 'linear');
            }  }

    var aFileTabs = $('.filetabs');
    var curTab = $(this);
    if ($('.cTabActive'))   {
        var prevDropDown = $('.cTabActive').parent();
        var prevDDChild = $(prevDropDown).children(0);
        $(prevDDChild).removeClass('cTabActive').addClass('cPrevTabActive');  }
    if ($('ul',aFileTabs).hasClass('cPrevTabActive'))  {
        $('.cPrevTabActive',aFileTabs).animate ({opacity: 0}, 500, 'linear', function ()  {
            $('ul', aFileTabs).css ({left: '9999px'});
            $('ul', aFileTabs).removeClass ('cPrevTabActive');   }); }
    if ($(prevDropDown).get(0) !== $(curTab).get(0))  {
        $(curTab).children(0).addClass ('cTabActive');
        abc();
    } else  {
        return;
    }  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:35:25.870

凯约特，

这是一个工作示例。我添加了 .length()，重新编写了 If 逻辑，并使用了 setTimeout 函数，因此淡入和淡出不会发生冲突。

[演示](http://jsfiddle.net/N6uad/)
祝你好运！

# ios - 当我触摸后退按钮时，我想退出后台线程。在ios中

> ID：10630514
> 
> 赞同：0
> 
> 时间：2012-05-17T05:49:52.143
> 
> 标签：ios, multithreading, grand-central-dispatch

我的程序由 gcd 运行。

```
-(void) viewdidLoad {

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0),
    ^ {
        for(int i=0; i<screenshotNum ; i++)
        {
            NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];  

            NSString * url=[detailItem.mScreenshot objectAtIndex:i];

            NSDictionary *args=[NSDictionary dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt:i], @"screenNum",
                                [NSString stringWithString:url],@"url",
                                nil];

                               [self loadImageScreenshot:args];

            [pool release]; 
        }
    });
} 
```

当我`dismissModalViewController`.

当我触摸后退按钮时，我想退出这些后退线程。

```
-(void) BackButtonPressed:(id)sender
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

如何添加代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:41:21.213

没有定义的 API 来取消调度队列的操作，但是如果需要，您可以定义某个终止点。

查看此线程以获取详细描述 - [在 iOS 中杀死 dispatch_async 队列中的项目](https://stackoverflow.com/questions/9546385/kill-items-in-a-dispatch-async-queue-in-ios)

# java - 如何使用相同的 log4j 记录器为不同的包创建不同的日志文件？

> ID：10630522
> 
> 赞同：14
> 
> 时间：2012-05-17T05:50:39.243
> 
> 标签：java, logging, log4j

我正在尝试为不同的包设置单独的日志文件。我正在为`log4j`记录器使用 Wrapper 类。我的应用程序中的每个类都调用相同的包装类。我的包装类：

```
public class MyLogger
{
    private static Logger logger = Logger.getLogger(MyLogger.class.getName());
    ....
    ....
} 
```

它是这样调用的：

```
MyLogger.write(, , ); 
```

**有没有办法配置 log4j 以便将不同包的日志记录输出到不同的文件？**

谢谢！

**编辑：**

这是我的`log4j.properties`文件：

```
log4j.rootLogger=DEBUG, infoout, aar
log4j.logger.com.businessservice.datapopulation=DEBUG, aar
log4j.additivity.com.businessservice.datapopulation=false

log4j.appender.infoout = org.apache.log4j.RollingFileAppender
log4j.appender.infoout.file=/app/aar_frontend.log
log4j.appender.infoout.append=true
log4j.appender.infoout.Threshold=DEBUG
log4j.appender.infoout.MaxFileSize=2MB
log4j.appender.infoout.MaxBackupIndex=10
log4j.appender.infoout.layout = org.apache.log4j.PatternLayout
log4j.appender.infoout.layout.ConversionPattern = %m%n

log4j.appender.aar = org.apache.log4j.RollingFileAppender
log4j.appender.aar.file=/app/aar/aar_backend.log
log4j.appender.aar.append=true
log4j.appender.aar.Threshold=DEBUG
log4j.appender.aar.MaxFileSize=2MB
log4j.appender.aar.MaxBackupIndex=10
log4j.appender.aar.layout = org.apache.log4j.PatternLayout
log4j.appender.aar.layout.ConversionPattern = %m%n 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T07:15:25.373

如果您在 MyLogger 类中创建一个静态 Logger，那么您将拥有一个 Logger 实例，其名称设置为 MyLogger。当您从其他包调用该记录器时，Log4j 无法确定这些调用的来源，因为它们都使用相同的记录器。

处理它的最好方法是在每个类中定义一个单独的 Logger，但是如果你想使用一个类作为与 Log4j 的联系点，那么你可以这样做：

```
package com.daniel.logger;
import org.apache.log4j.Logger;

import com.daniel.package1.ClassA;
import com.daniel.package2.ClassB;

public class MyLogger{

    public static void write(String message, Class<?> clazz){
        Logger.getLogger(clazz).info(message);
    }

    public static void main(String[] args){
        ClassA.log();
        ClassB.log();
    }
} 
```

然后，使用它的类之一可能如下所示：

```
package com.daniel.package1;

import com.daniel.logger.MyLogger;

public class ClassA {

    public static void log(){
        MyLogger.write("ClassA",ClassA.class);
    }
} 
```

该`log4j.properties`文件看起来像：

```
log4j.appender.package1=org.apache.log4j.FileAppender 
log4j.appender.package1.File=package1.log
log4j.appender.package1.layout=org.apache.log4j.PatternLayout

log4j.appender.package2=org.apache.log4j.FileAppender
log4j.appender.package2.File=package2.log
log4j.appender.package2.layout=org.apache.log4j.PatternLayout

log4j.logger.com.daniel.package1=DEBUG,package1
log4j.logger.com.daniel.package2=DEBUG,package2 
```

如果您不想从 ClassA 传递类，则可以使用带有反射的讨厌技巧，以获取调用类的名称，但由于性能下降，我不建议这样做：

```
public class MyLogger
{

    public static void write(String message){
        StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace();
        Logger.getLogger(stackTraceElements[2].getClassName()).info(message);
    }

    public static void main(String[] args){
        ClassA.log();
        ClassB.log();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:58:23.850

你可以这样做（com.myco.a 和 com.myco.b 是你的 2 个不同的包）：

```
log4j.logger.com.myco.a=DEBUG, infoout 
log4j.logger.com.myco.b=DEBUG, aar 
```

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:19:29.997

从每个包的属性文件中读取所需的自定义文件位置。然后您可以使用以下给定的方法来更新 log4j 属性文件中设置的 log4j 文件位置：

```
private void updateLog4jConfiguration(String logFile) { 
    java.util.Properties properties = new Properties(); 
    try { 
        InputStream configStream = getClass().getResourceAsStream( "/log4j.properties");
        properties.load(configStream); 
        configStream.close();
        } 
    catch (IOException e) {
        System.out.println("Error: Cannot laod configuration file "); 
        } 
    properties.setProperty("log4j.appender.FILE.file", logFile); 
    org.apache.log4j.LogManager.resetConfiguration(); 
    org.apache.log4j.PropertyConfigurator.configure(properties); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:04:07.100

创建 2 个附加程序和 2 个记录器可以满足您的要求。

# c# - Windows phone 7 中的日历控件？

> ID：10630524
> 
> 赞同：-2
> 
> 时间：2012-05-17T05:50:39.630
> 
> 标签：c#, silverlight, windows-phone-7

请推荐一个好的日历控件，我可以在 Windows Phone 7 的应用程序中使用它。

我的要求是更改所选日期的背景颜色，并且还具有多选选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:57:18.507

当我需要日历控件时，我找到了这些。

[http://maheshprasad.blogspot.in/2010/12/calendar-control-for-windows-phone-7.html](http://maheshprasad.blogspot.in/2010/12/calendar-control-for-windows-phone-7.html)

[http://wpcontrols.codeplex.com/](http://wpcontrols.codeplex.com/)

但我最终制作了自己的自定义日历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:57:21.967

我们的日历应该做你想做的事：http: [//www.componentone.com/SuperProducts/CalendarPhone/](http://www.componentone.com/SuperProducts/CalendarPhone/)。但它不是免费的

# javascript - 浏览器下载 JSON 结果而不是传回脚本

> ID：10630531
> 
> 赞同：1
> 
> 时间：2012-05-17T05:51:06.467
> 
> 标签：javascript, asp.net-mvc-3, file-upload

我编写了一个使用[Valums fileuploader](http://valums.com/ajax-upload/)的 MVC3 应用程序。当用户上传文件时，服务器会传回一个 JSON 对象，指示成功/失败以及可能的错误消息。一些用户报告他们的浏览器要求他们采取行动，就像下载文件（保存/打开）一样，而不是将 JSON 传递给 javascript。

我正在使用分布式上传器，我的 C# 控制器返回一个 JSONResult 像这样

```
return JSON(new { success = true }, "application/json"); 
```

或者如果出现问题

```
return JSON(new { success = false, error = exception.Message }); 
```

我无法重现这一点，并收到了来自 IE9 和 Chrome 用户的报告。有没有人发生过这种情况，你做了什么来解决它？或者我应该从哪里开始故障排除？

**编辑：** 文件上传器将在`onComplete`事件中运行它：

```
function(id, filename, responseJson) {
  if(responseJson.success != true) {
    alert("An error occurred: " + responseJson.error);
    return false;
  }
  return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:28:22.727

试试这个：

```
return Json(new { success = true }, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:16:45.387

原来问题是 IE 不处理`application/json`内容类型。将其设置为`text/html`使其工作，尽管它非常糟糕。

# winforms - 如何在 Windows 窗体中将不同的图像应用于 DataGridViewImageColumn

> ID：10630533
> 
> 赞同：0
> 
> 时间：2012-05-17T05:51:39.600
> 
> 标签：winforms, image, datagridview

我正在使用 DataGridView ，我在其中动态创建了一个图像列，我想根据以下条件在此列中显示通过和失败图像是代码，

DataGridViewImageColumn img = new DataGridViewImageColumn();

```
 img.Name = "img";
                    img.HeaderText = "Image Column";

                    dataGridView1.DataSource = dt;
                    dataGridView1.Columns.Add(img);

                    int number_of_rows = dataGridView1.RowCount;

                    for (int i = 0; i < (number_of_rows - 1); i++)
                    {
                        if (dataGridView1.Rows[i].Cells[2].Value.ToString() == "Pass")
                        {

                            Image image = global::Instore.Properties.Resources.pass;
                            img.Image = image;
                            dataGridView1.Rows[i].Cells["img"].Value = image;

                        }
                        else if (dataGridView1.Rows[i].Cells[2].Value.ToString() == "Fail")
                        {
                            Image image2 = global::Instore.Properties.Resources.fail;
                            img.Image = image2;
                            dataGridView1.Rows[i].Cells["img"].Value = image2;

                        }
                    } 
```

我在运行它时附加了代码，它在所有行中显示 Pass.png 而它应该在某些行中显示失败图像..

请帮助...

谢谢斯内哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:42:26.587

删除这两行：

```
img.Image = image;

...

img.Image = image2; 
```

# php - 无法从 php 中的变量向数组添加字符串：

> ID：10630535
> 
> 赞同：0
> 
> 时间：2012-05-17T05:51:46.093
> 
> 标签：php, arrays, json, string, xmlhttprequest

我是 php 新手。我一直在尝试在 php 中构造一个数组并将其编码为 JSON。这将`xmlhttprequest`在客户端使用。

但有一个问题。我无法将变量写入数组。

这就是我想要做的。

```
$name=$_GET['username'];
if ( strcmp( $name, 'harry' ) ) {
  $arr['status'] = 'success';
  $arr['name'] = $name;
  echo json_encode($arr);
} 
```

但是当我在客户端提出请求时。我得到一个空值代替变量。数组中的其他所有内容都很好，除了这个值。

我得到的响应文本是

```
{"status":"success","username":null} 
```

我在分配值时做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:56:58.537

您发送到客户端的数组中没有“用户名”键，您应该改用 $arr['name']

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:59:06.860

我不知道在这种情况下使用 strcmp() 的好处，但这将解决您的问题

```
if ( strcmp( $name, 'harry' ) === 0) { 
```

strcmp() 的用法在这里有点反直觉，所以你可以使用

```
if ( $name === 'harry' ) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:01:13.323

以下代码对我有用...检查一下

```
$name=$_GET['username'];
if(strcmp($name,'harry')==0)
{
$arr['status']= 'success';
$arr['name']=$name;
echo json_encode($arr);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:10:36.823

```
$name=$_GET['username'];
if ( strcmp( $name, 'harry' )===0 ) {
  $arr['status'] = 'success';
  $arr['username'] = $name; <---------- changed the index in $arr from 'name' to 'username'
  echo json_encode($arr);
} 
```

`strcmp`如果两个字符串相等，则返回 0（**记住区分大小写**）

# spring - 使用 Spring MVC 在服务器上上传 pdf

> ID：10630544
> 
> 赞同：1
> 
> 时间：2012-05-17T05:52:58.690
> 
> 标签：spring, pdf, spring-mvc, file-upload

我尝试创建一个网站，它将为用户提供上传 pdf 文件的选项。我希望将此 pdf 保存在具有特定 url 的服务器上。例如：

用户选择标题。

用户上传文件。

我希望在这些操作之后可以通过特定的 url/name_the_user_give 访问文件。

我看到 Spring MVC 为文件上传提供了非常简单的界面。我已经看过很多关于这个的教程，但我的问题是如何将文件保存到服务器中。我还希望通过浏览器的工具打开 pdf。任何人都可以给我的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:04:05.477

要将文件保存在服务器路径上，您只需将文件流写入由描述的路径

```
request.getServletContext().getRealPath("your directory name here"); 
```

然后使用您获得的真实路径创建文件。

要使用浏览器插件显示 pdf 文件，您应该在控制器方法中使用以下内容。

```
@RequestMapping(value="url to map", produces={"application/pdf"}) 
```

希望这对您有所帮助。

干杯。

# linux - arm架构的编译库

> ID：10630547
> 
> 赞同：2
> 
> 时间：2012-05-17T05:53:18.213
> 
> 标签：linux, cross-platform, arm, cross-compiling

我想知道如何交叉编译 ARM 架构的库。假设我有 Intel 架构的 libcurl 库，现在我想使用这个库在 ARM 架构中运行应用程序。我需要为此交叉编译执行哪些步骤。我正在使用 Ubuntu 32 位机器。我已经完成了基本步骤，例如

```
./configure --host= ...
make 
make install 
```

但无法得到完整的想法。请提供一些有用的链接，或者如果有人可以解释这些事情。任何帮助将不胜感激。

我知道在 SO 中已经有一个帖子“http://stackoverflow.com/questions/5832734/cross-compiling-a-library-from-intel-to-arm”，但我没有得到澄清这个。

平台：linux，gcc编译器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:19:01.713

您需要为您的架构提供工具链主机参数，例如对于基本上具有 arm 架构的[arm-1808 ，主机参数将是 arm-none-linux。](http://www.ti.com/product/am1808)我为我的架构使用了以下配置命令，它编译成功，我可以在我的 arm 板上运行应用程序。

**0。**

如果工具链不在您的 PATH 中，那么您可以使用如下命令包含它：

```
 export PATH=/home/user/CodeSourcery/Sourcery_G++_Lite/bin/:$PATH 
```

**1.**

```
./configure --host=arm-none-linux-gnueabi --build=i686-linux CFLAGS='-Os' --with-ssl=/usr/bin/openssl --enable-smtp 
```

**2.**

```
make 
```

**3.**

```
sudo make install 
```

**4.**现在是构建应用程序的时候了。

```
 arm-none-linux-gnueabi-gcc -o email smtp-multi.c -I/usr/local/include -L/usr/local/lib -lcurl 
```

基本上你需要在编译你的应用程序时给出 CPP 和 CF 标志，要找出 CF 和 CPP 标志，你可以分别使用以下命令：

```
curl-config --cflags  

curl-config --libs 
```

如果上述命令不起作用，请尝试：

```
arm-none-linux-gnueabi-gcc -o email smtp-multi.c -lcurl 
```

# php - CData 字符串未完成？

> ID：10630548
> 
> 赞同：1
> 
> 时间：2012-05-17T05:53:20.067
> 
> 标签：php, xml-parsing, simplexml

我有一个脚本来解析产品的 XML 文件，但我似乎无法掌握解析它的窍门。我有代码：

```
$file = $shop_path.'datafeeds/MC-B01.xml';

$xml = simplexml_load_file($file, null, LIBXML_NOCDATA);
$items = $xml->Items;

for($i = 0; $i < 17000; $i++) {
    $name = $items[$i]->Product_Name;
    echo $name.'<br />';
} 
```

但是我得到了各种奇怪的错误：

```
PHP Warning: in file C:/xampp/htdocs/trow/tools/rip.php on line 188: simplexml_load_file() [function.simplexml-load-file]: ./../datafeeds/MC-B01.xml:172439: parser error : CData section not finished
PHP Warning: in file C:/xampp/htdocs/trow/tools/rip.php on line 188: simplexml_load_file() [function.simplexml-load-file]: ons&#44; in or out of the water. Cleanup is a snap after the fun with Pipedream
PHP Warning: in file C:/xampp/htdocs/trow/tools/rip.php on line 188: simplexml_load_file() [function.simplexml-load-file]: ^
PHP Warning: in file C:/xampp/htdocs/trow/tools/rip.php on line 188: simplexml_load_file() [function.simplexml-load-file]: ./../datafeeds/MC-B01.xml:172439: parser error : PCDATA invalid Char value 3
PHP Warning: in file C:/xampp/htdocs/trow/tools/rip.php on line 188: simplexml_load_file() [function.simplexml-load-file]: ons&#44; in or out of the water. Cleanup is a snap after the fun with Pipedream 
PHP Warning: in file C:/xampp/htdocs/trow/tools/rip.php on line 188: simplexml_load_file() [function.simplexml-load-file]: ^
PHP Warning: in file C:/xampp/htdocs/trow/tools/rip.php on line 188: simplexml_load_file() [function.simplexml-load-file]: ./../datafeeds/MC-B01.xml:172439: parser error : Sequence ']]>' not allowed in content 
```

奇怪的是，包含错误显示文本的 CData 块似乎是正确格式的块。（我不能在这里发布，因为它是成人性质的。）

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:37:02.480

CDATA 并不意味着您可以输入任何内容，这意味着可能会与标记符号混淆的内容可以被解析器忽略。因此，您在 CDATA 中的字符必须包含除 TAB、CR、LF 或特殊 FFFE、FFFF 字符之外的一些控制字符。删除它们，您将度过美好的一天！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:18:15.163

您应该尝试将该文档保存为本地工作站上的 xml 文件，然后在 Internet Explorer 或 Firefox 浏览器（或可以解析和验证 XML 文档的工具）中打开该文件，以及遇到需要修复的任何错误。

对我来说，它看起来像是一些非标准字符，它通过介于两者之间的某个位置来保持您的 CDATA 部分不完整。

# java - 如何直接从 Java 访问 Azure / IIS 证书？

> ID：10630550
> 
> 赞同：1
> 
> 时间：2012-05-17T05:53:23.033
> 
> 标签：java, iis, azure, certificate, keystore

从 Azure / Windows 方面...

当您按照[http://msdn.microsoft.com/en-us/library/windowsazure/ff795779.aspx#upload](http://msdn.microsoft.com/en-us/library/windowsazure/ff795779.aspx#upload)中的步骤操作时，ServiceConfiguration.Cloud.cscfg 包含例如

```
<Certificates>
  <Certificate name="www.myserver.com" 
    thumbprint="ad513653e4560fe4afce5bdac88c744fbcf93525" 
    thumbprintAlgorithm="sha1"/>
</Certificates> 
```

和 ServiceDefinition.build.csdef 包含，例如

```
<Endpoints>
  <InputEndpoint name="HttpIn" port="80" protocol="tcp" />
  <InputEndpoint name="HttpsIn" protocol="tcp" port="443"/>
</Endpoints>
<Certificates>
  <Certificate name="www.myserver.com" 
    thumbprint="AD513653E4560FE4AFCE5BDAC88C744FBCF93525" 
    thumbprintAlgorithm="sha1" />
</Certificates> 
```

并且带有此指纹的证书通过 Azure 平台 Web 控制台上传到我们的托管服务，然后在 Azure 实例启动时将证书部署到 IIS 中的服务器证书。我们可以 RDP 进入实例并在 IIS 控制台的 Server Certificates 中查看证书。

从Java方面...

当您使用 Java 连接到“Windows-MY”密钥库时

```
KeyStore keystore = KeyStore.getInstance("Windows-MY");
keystore.load(null, null); 
```

然后寻找可用的密钥库，你看不到这个证书。如果我们 RDP 进入 Azure 实例并通过 certmgr.msc 手动添加证书，那么我们的 Java 进程确实会看到使用“Windows-MY”密钥库的证书。

我看到了许多 Java / Azure 证书集成的示例 - 例如[http://blogs.msdn.com/b/avkashchauhan/archive/2010/11/07/adding-ssl-https-security-with-tomcat-java-solution- in-windows-azure.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2010/11/07/adding-ssl-https-security-with-tomcat-java-solution-in-windows-azure.aspx) - 证书被导出到密钥库文件，然后与 azure 包一起部署，但我们希望找到一种方法，可以独立于包构建并使用标准 Azure 来管理证书证书管理方法。请注意，我们无权访问要使用的证书，因为它是由另一方管理的。

我还看到了如何使用 .net 代码获取此证书的示例 - 例如，[如何在 Windows Azure 上的代码中获取证书](https://stackoverflow.com/questions/5661925/how-can-you-get-a-certificate-in-code-on-windows-azure)。

您将如何直接从 Java 访问此 Azure 部署的证书？它是否部署到“Windows-MY”以外的另一个密钥库中？您可以直接从 Java 访问 IIS 中的服务器证书中的证书吗？

谢谢，

**更新（5 月 20 日）**

我们从某人那里得到了使用 ServiceDefinition.csdef 文件中的 storeLocation="CurrentUser" 的提示，这听起来应该可以完成这项工作，例如

```
<Certificate name="www.myserver.com" 
  storeLocation="CurrentUser" storeName="My" /> 
```

但是由于某种原因，Azure 似乎没有将证书部署到 CurrentUser 存储。如果 storeLocation 设置为 LocalMachine （如上所述），我只会看到部署到服务器的证书，这最终会出现在 Java 似乎无法访问的本地机器证书存储中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:28:25.683

根据[这篇文章](http://java.sun.com/developer/technicalArticles/J2SE/security/)，只有 Windows-MY 和 Windows-ROOT 作为 Windows 可能的证书存储提供程序。Azure 管理的证书存储在本地计算机的个人证书中，因此似乎无法通过 Keystore API 访问。

作为一种解决方法，您可以尝试通过本机 api（例如，通过 JNI 或[jna](https://github.com/twall/jna)）获取证书，或者编写一个包装可执行文件（例如，用本机 c++ 或 .net 编写），为您的 java 进程提供所需的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:55:00.657

您可以执行以下操作：

[Java 从 Windows 密钥库访问中间 CA？](https://stackoverflow.com/questions/5476974/java-access-to-intermediate-cas-from-windows-keystores)

在那里，他们正在使用来自其他商店的证书构建证书链。因此，使用它，我认为您将能够访问证书。

# silverlight - 在 AutoCompleteBox 中触发填充事件

> ID：10630552
> 
> 赞同：0
> 
> 时间：2012-05-17T05:53:36.203
> 
> 标签：silverlight, autocompletebox

我有一个 Silverlight 对话框，它包含一个自动完成框。当对话框打开时，我希望自动完成框填充文本，并打开带有预先填充的建议的对话框，而无需任何用户输入。

有谁知道如何做到这一点？我正在寻找一种触发填充事件的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:15:44.323

找到了这个问题的答案。您需要在下划线文本框中设置文本，当您这样做时，将显示自动完成下拉框。您需要使用 VisualTreeHelper 来获取文本框。DependencyObject o = VisualTreeHelper.GetChild(autocompleteBox, 0); o = VisualTreeHelper.GetChild(o,0); ((TextBox)(o)).Text = "yourtexthere";

# ruby-on-rails - 最新版本的 Rails 是否要求我的数据库迁移文件具有数据库的“关闭”（撤消）命令？

> ID：10630555
> 
> 赞同：0
> 
> 时间：2012-05-17T05:53:43.907
> 
> 标签：ruby-on-rails, migration, dbmigrate

因为它确实看起来不像。当我生成一个模型并检查它的 db 迁移文件时（我有点菜鸟，请原谅我的无知），没有自动生成的“down”代码。这是因为最新的 Rails 版本已经知道如何自动为我处理这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:55:46.713

最新版本的 rails 支持一种名为`change`; 如果 Rails 可以仅通过此迁移的内容计算出如何反转迁移——如果你只使用内置的迁移方法通常可以——那么你不需要定义`down`方法。

如果你需要做一些自定义的事情，或者 Rails 不知道如何逆向迁移，你需要编写`up`and`down`方法而不是`change`.

# vb.net - 我们可以使用具有所需列数的 vb.net 创建一个 csv 文件吗？

> ID：10630558
> 
> 赞同：0
> 
> 时间：2012-05-17T05:54:07.383
> 
> 标签：vb.net, csv

我正在使用这种方法使用 vb.net 创建一个 csv 文件。

```
 protected void btnExportCSV_Click(object sender, EventArgs e)
{
    Response.Clear();
    Response.Buffer = true;
    Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.csv");
    Response.Charset = "";
    Response.ContentType = "application/text";

    GridView1.AllowPaging = false;
    GridView1.DataBind();

    StringBuilder sb = new StringBuilder();
    for (int k = 0; k < GridView1.Columns.Count; k++)
    {
        //add separator
        sb.Append(GridView1.Columns[k].HeaderText + ',');
    }
    //append new line
    sb.Append("\r\n");
    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        for (int k = 0; k < GridView1.Columns.Count; k++)
        {
            //add separator
            sb.Append(GridView1.Rows[i].Cells[k].Text + ',');
        }
        //append new line
        sb.Append("\r\n");
    }
    Response.Output.Write(sb.ToString());
    Response.Flush();
    Response.End();
} 
```

此代码正在创建 csv 文件。但我不想在 csv 中有任何额外的列。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:56:58.070

是的当然！

```
 ...
  for (int k = 0; k < GridView1.Columns.Count - 1; k++)
  {
    //add separator
     sb.Append(GridView1.Rows[i].Cells[k].Text + ',');
  }
  //add final element
  sb.Append(GridView1.Rows[i].Cells[GridView1.Columns.Count - 1].Text );
  //append new line
  sb.Append("\r\n");
  ... 
```

# php - MySQL PHP：基于列返回行

> ID：10630564
> 
> 赞同：0
> 
> 时间：2012-05-17T05:54:31.720
> 
> 标签：php, mysql

这看起来很简单，但还没有找到神奇的搜索词。

一张桌子

```
ID | UserID | Mod_number

1      43      1
2      43      2
3      43      3 
4      43      4
5      55      1
6      55      2 
```

我想返回一个如下所示的查询：

```
UserID | Mod_1&ID | Mod_2&ID ....  [EDITED below]

43     |   1&1    |  2&2 ....
55     |   1&5    |  2&6 .... 
```

Mod 编号是固定的（其中有 7 个）。

我知道如何进行连接，将值重新排列成行让我很头疼。

任何帮助或方向都会很棒，谢谢！:)

======================= **编辑：**

希望否决票缺乏清晰度而不是问题的质量-让我尝试更好地解释。

这是针对在 Joomla 中开发的评估工具。每个模块（部分）都由主管检查。发生这种情况时，会记录一个 ID、一个用户 ID 和一个 ModID（以及其他数据）。

这会产生一个如下所示的表：

```
ID | UserID | Mod_number

1      43      1
2      43      2
3      43      3 
4      43      4
5      55      1
6      55      2
7      61      2
8      61      4 
```

每个 UserID 都是一个用户。我需要将其形成一个数组，其中每一行是一个用户，并且还包含每个模块的 ID。我认为这个演示文稿可能更清楚（跳过串联）：

```
UserID | ID_M1 | ID_M2 | ID_M3 |ID_M4

43     |   1    |   2  |   3   |   4
55     |   5    |   6  |  
61     |        |   7  |       |   8 
```

因此，现在每行都有一个唯一的 UserID（可以被认为是一个键），并为每个模块编号记录了 ID。作为一个可能看起来像`array(UserID=>array(ID_M1, ID_M2, ID_M3, ID_M4))`. 但是将这些数据放入其中让我感到困惑。

此外，如果您对构建数据有其他建议，我很乐意听到 - 我对 php/mysql/Joomla 开发人员有点陌生，可能有更简单的方法可以做到这一点。

希望这更有意义，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T01:06:12.700

这是一个数据透视表。你可以看看这个寻求帮助。[http://www.artfulsoftware.com/infotree/queries.php#787](http://www.artfulsoftware.com/infotree/queries.php#787)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:49:53.833

跟风怎么样？

```
SELECT 
UserID,
IF (ID > 0 && Mod_Number = 1, ID, null) ID_M1,
IF (ID > 0 && Mod_Number = 2, ID, null) ID_M2,
IF (ID > 0 && Mod_Number = 3, ID, null) ID_M3,
IF (ID > 0 && Mod_Number = 4, ID, null) ID_M4
from <YourTable> 
```

这里的 IF ID_M 部分您可以通过 PHP 以编程方式生成，因为我认为这将是动态的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T06:08:30.260

我想，您可以在其中编写一个非常丑陋的查询，`GROUP BY UserID`然后进行一些复杂的字符串操作。但是您最好直接获取这些数据，然后在 PHP 中将其重组为一个数组。

```
$rows; // say this is an array direct from the db with id, user_id, mod_id fields
$grouped = array(); // we will build this array from your data

foreach ($rows as $row)
{
    if (!isset($grouped[$row['user_id']]))
    {
        $grouped[$row['user_id']] = array();
    }

    $grouped[$row['user_id']]['mod_' . $row['mod_id']] = $row['id'];
} 
```

现在，当它运行时，您应该有一个以 user_id 为键的数组，其中包含以 'mod_1'、'mod_2' 等为键的数组，其中值为 'id'。我想这基本上就是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:21:20.537

像下面这样的东西应该会有所帮助：

SELECT user_id, GROUP_CONCAT(ID) as MOD_ID, GROUP_CONCAT(mod_number) as MOD_Number FROM GROUP BY user_id

# ruby-on-rails - 设置 Facebook redirect_uri

> ID：10630569
> 
> 赞同：0
> 
> 时间：2012-05-17T05:54:53.347
> 
> 标签：ruby-on-rails, facebook

我正在制作一个 FB Canvas 应用程序。

问题：用户认证后，他们返回到应用程序的非 Canvas 版本。这是我的代码：

`provider :facebook, CONFIG['app_id'], CONFIG['secret_key'], :scope => "publish_stream, rsvp_event"`

```
match "/auth/facebook/callback" => "sessions#oauth_create"
match "/auth/facebook", :as => "facebook"
match "/auth/failure" => "sessions#oauth_failure" 
```

当用户从 Facebook 返回时，他们会被发送到`oauth_create`（下面）- 但是，他们是通过普通（非画布）应用程序 url ( `localhost:3000`) 发送给它的，而不是画布应用程序 ( `apps.facebook.com/my-app-namespace`)，所以`redirect_to root_path`下面只是将它们发送到常规应用程序。

```
def oauth_create
  auth = request.env["omniauth.auth"]
  t = auth["credentials"]["token"]
  session[:facebook_token] = t
  redirect_to root_path
end 
```

我正在使用omniauth-facebook gem。

如何告诉 FB 在身份验证后将用户发送到画布应用程序？

# php - php中的相对URL/路径

> ID：10630570
> 
> 赞同：5
> 
> 时间：2012-05-17T05:55:02.660
> 
> 标签：php

嗨，这是我第一次在这里问问题。

我有一个图像 src

```
src="images//images/pixel.gif" 
```

但我不明白 src 中的这个双斜杠（**//**）。

还有什么是“ **./** ”和“ **../** ”在相对文件路径中的含义，如下面的src：

```
src="./images/pixel.gif" 
src="../images/pixel.gif" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T06:08:43.443

首字母`/`表示网页的根。

具有名称的目录条目`.`表示相同的目录。如果它在开头，它通常意味着类似于“这里”的意思，主要用于说明路径是相对于当前位置的。

带有名称的目录条目`..`表示父目录。所以，这意味着要往上爬目录树。

如果两个或更多`/`是连续的，这将取消所有先前的路径并替换为网页的根。

也就是说，

`src="images//images/pixel.gif"`表示`/images/pixel.gif`（直接在根目录下，一个名为 的文件夹`images`，然后是文件。

`src="./images/pixel.gif"`表示`images`加载页面所在的同一目录内的目录（包含对图像的引用）。记住*这里*的概念。也可以直接写`src="images/pixel.gif"`。

`src="../images/pixel.gif"`意味着上到加载页面所在的父目录，然后下到名为`images`. 记住*父*概念。

希望有所帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T05:57:57.007

1.  在大多数情况下 // 将与 / 相同。
2.  '。' 表示当前目录，“..”表示父目录。

    /app/test/files/somefile.php, /app/test/files/another.php, /app/test/css/somecss.css

如果您想访问 somefile.php 中的 somecss.css 并且您不知道应用程序根目录的绝对路径，那么您可以编写。

../css/somecss.css -> 转到父文件夹 test 然后是 css 文件夹，最后是 somecss.css 文件

同样，如果你想访问 another.php 你写

./another.php 或只是 another.php

# iphone - Core Data BLOB 数据存储在“外部存储”中时是否加密？

> ID：10630574
> 
> 赞同：3
> 
> 时间：2012-05-17T05:55:19.423
> 
> 标签：iphone, ios, core-data, encryption

我正在使用 Core Data 来存储一些敏感信息。到目前为止，我已经对 Persistent Store Coordinator 使用的 SQLite 文件应用了硬件文件加密。我通过设置它的文件属性（NSFileProtectionKey 到 NSFileProtectionComplete）来做到这一点。

我将一些图像数据作为二进制数据存储在核心数据库中，并且我已经检查了“允许外部存储”和“存储在外部记录文件中”，以防止我的 SQLite 数据存储膨胀并提高性能。

我假设 Core Data 自动存储在 SQLite 数据库之外的数据文件不会被加密，我需要自己加密这些文件。有谁知道这是否正确？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:07:40.003

幸运者777，

当用户使用屏幕锁定时，每个预装的 iOS 版本都会对每个文件进行硬件加密。关于你关于外部核心数据存储的问题，你为什么不看看文件呢？将数据从手机移动到您的开发系统非常简单。然后尝试打开其中一个外部文件。我希望它是加密的。（如果不是，那是 Core Data 加密政策中一个相当大且明显的漏洞。我怀疑它是否存在。）

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-17T14:45:58.173

隐藏，但未**加密**！它当前（iOS 11.2）保存数据的文件夹位于*Documents/.SingleViewCoreData_SUPPORT/_EXTERNAL_DATA*
那里，您可以看到所有文件，但它们的扩展名没有令牌名称。但是，所有数据都没有改变。您只需添加文件扩展名或使用正确的应用程序即可查看任何文件。

是的，屏幕锁定时设备数据被加密，但连接到 Xcode，您可以非常轻松地下载容器并访问所有数据。如果您的应用程序包含敏感数据，则“设备已加密”将根本不存在。只有`SingleViewCoreData.sqlite`文件似乎是加密的。

# ruby-on-rails - 如何避免ruby第二次读取数据库？

> ID：10630575
> 
> 赞同：1
> 
> 时间：2012-05-17T05:55:19.723
> 
> 标签：ruby-on-rails

我正在使用 ruby​​ on rails 开发一个网站。我搜索谷歌找到了一种 CSS 方法来使我的图片圆形边框。它确实有效，但是它读取了两次数据库，你们无论如何只能读取一次吗？例如，将图像存储到像 @img 这样的临时局部变量中？这是代码：

```
<p style="background-image: url(<%= micropost.photo.url(:large) %>)">
<%= image_tag micropost.photo.url(:large) rescue "<p>No image</p>"%>
</p> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:00:01.540

你的答案在问题中！只需将 url 存储在变量中。

# jquery - 我正在使用 jquery 来查找我的网站访问者的地理位置，我希望它在 .cs 文件中运行，因为我想将输出存储在数据库中

> ID：10630580
> 
> 赞同：0
> 
> 时间：2012-05-17T05:55:57.743
> 
> 标签：jquery, asp.net

我正在使用 jquery 来查找我的网站访问者的地理位置，我希望它在 .cs 文件中运行，因为我想将输出存储在数据库中......

```
<!-- Require jQuery / Anyversion --><script type="text/javascript" language="Javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<!-- Require EasyJQuery After JQuery --><script type="text/javascript" language="Javascript" src="http://api.easyjquery.com/easyjquery.js"></script>
<script type="text/javascript" language="Javascript">
    // 1\. Your Data Here
    function my_callback(json) {
        alert("IP :" + json.IP + " nCOUNTRY: " + json.COUNTRY);
    }

    function my_callback2(json) {
        // more information at http://api.easyjquery.com/test/demo-ip.php
        alert("IP :" + json.IP + " nCOUNTRY: " + json.COUNTRY + " City: " + json.cityName + " regionName: " + json.regionName);
    }

    // 2\. Setup Callback Function
   // EasyjQuery_Get_IP("my_callback"); // fastest version
    EasyjQuery_Get_IP("my_callback2","full"); // full version 
```

# android - 经度和纬度不显示

> ID：10630581
> 
> 赞同：0
> 
> 时间：2012-05-17T05:56:06.133
> 
> 标签：android, gps

我正在尝试使用 GPS 显示用户的位置。我编写了以下代码，以便如果设备上禁用了 GPS，则用户应通过设置启用它。如果已启用，则应显示用户的当前位置。我在安卓设备上运行应用程序。运行应用程序时我没有收到任何错误，但不会显示位置。请帮忙------------主要活动--------

```
package com.android.disasterAlertApp;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

import android.util.Log;
import android.widget.Toast;

public class MainActivity extends Activity {
/** Called when the activity is first created. */

protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
LocationListener ll = new mylocationlistener();
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);

if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
Toast.makeText(this, "GPS is Enabled in your devide", Toast.LENGTH_SHORT).show();
  }
  else{
    showGPSDisabledAlertToUser();
   }
  }

  private void showGPSDisabledAlertToUser(){
  AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
  alertDialogBuilder.setMessage("GPS is disabled.Do you want to enable it?")
 .setCancelable(false)
 .setPositiveButton("Goto Settings Page To Enable GPS",
 new DialogInterface.OnClickListener(){
 public void onClick(DialogInterface dialog, int id){
 Intent callGPSSettingIntent = new Intent(
 android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
 startActivity(callGPSSettingIntent);
    }
  });
 alertDialogBuilder.setNegativeButton("Cancel",
 new DialogInterface.OnClickListener(){
 public void onClick(DialogInterface dialog, int id){
 dialog.cancel();
  }
 });
 AlertDialog alert = alertDialogBuilder.create();
 alert.show();
 }

  private class mylocationlistener implements LocationListener {
    public void onLocationChanged(Location location) {
      if (location != null) {
   Log.d("LOCATION CHANGED", location.getLatitude() + "");
Log.d("LOCATION CHANGED", location.getLongitude() + "");
Toast.makeText(MainActivity.this,
    location.getLatitude() + "" + location.getLongitude(),
    Toast.LENGTH_LONG).show();
     }
   }

   public void onProviderDisabled(String provider) {
  }
   public void onProviderEnabled(String provider) {
  }
   public void onStatusChanged(String provider, int status, Bundle extras) {
  }
  }
 } 

 ------------Manifest-----------------

 <uses-sdk android:minSdkVersion="8" />

<application
   android:icon="@drawable/ic_launcher"
android:label="@string/app_name" >
<activity
    android:name=".Splash"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

       <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.android.disasterAlertApp.MAINACTIVITY" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
     </activity>

 </application>   
   <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"></uses-permission>
    <uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"></uses-permission>
 </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:02:10.073

获取 GPS 位置需要时间，如果您在建筑物内很难获取 gps 值，如果设备位于建筑物外部，我们可以获得 gps 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:05:06.683

确保您的设备 GPS 硬件正常工作。我有 2 部全新的 LG Lucid 手机，但 GPS 无法在其中任何一部上工作。在位置设置上只检查 GPS 框，然后启动谷歌地图，看看它是否可以获取位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:19:47.060

在清单文件中添加此权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

# wpf - 尝试从另一个线程、wpf、c# 访问对象时出现跨线程异常

> ID：10630583
> 
> 赞同：2
> 
> 时间：2012-05-17T05:56:19.193
> 
> 标签：wpf, multithreading, c#-4.0

我有一个 wpf 应用程序。在应用程序运行期间，当我使用某些方法时，我会触发执行某些操作的事件。在这种情况下，我必须访问与 Database 一起使用的 DLL 实例，它会抛出异常，告诉另一个线程拥有该对象。处理这个问题的最佳方法是什么？

```
//this is in the main thread - in MainWindow.cs - code behind
 MyDataBaseManager DB_manager = new MyDataBaseManager(connectionString);

//event handler
 void MainWindow_MyCustomEvent(object sender, MainWindow.MyCustomEventArgs e)
    {
        try
        {

            if (str1 == str2)
            {
                //getting exception when trying to perform this statement 
                DB_manager.UpdateTable(this.textBlock_MyTextBlock.Text, DateTime.Now, currenrUser);

                theNextstring = DB_manager.GetTheNextString();

                if (theNextstring != string.Empty)
                {
                    this.textBlock_theNextstring.Text = theNextstringף
                }

            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "Error", MessageBoxButton.OKCancel, MessageBoxImage.Error);
        }
    } 
```

当我在 if 语句中比较两个字符串时，它不会抛出异常，但是当我想使用 DB_manager 或使用 UI 组件时，我得到 -

```
The calling thread cannot access this object because a different thread owns it. 
```

我应该将连接字符串传递给事件并在对象中创建一个新实例吗？还是有另一种更好的解决方案？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:00:56.800

最好的方法是使用 Dispatcher.Invoke 方法 ... this.textBlock_theNextstring.Dispatcher.Invoke。

示例 - [http://social.msdn.microsoft.com/forums/en-US/wpf/thread/360540eb-d756-4434-86f9-a3449f05eb55](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/360540eb-d756-4434-86f9-a3449f05eb55)

# visual-c++ - CPropertyPage 中的 CEdit 只读背景颜色

> ID：10630586
> 
> 赞同：0
> 
> 时间：2012-05-17T05:56:31.627
> 
> 标签：visual-c++, mfc

放置在某些 CPropertyPage 中的 CEdit 控件的默认背景颜色是什么？令我困惑的是，当大量 CEdit 更改时，背景颜色会有所不同。也就是说，如果其中有一个带有 CEdit 的 CTabCtrl 对话框，则只读 CEdit 的背景是灰色的（我想它是 Windows 中的默认设置）。但是，如果使用 CPropertySheet 和 CPropertyPage 而不是 CDialog，则只读 CEdit 的背景为白色。使用 CDialog： ![CDialog 中的默认行为](../Images/b62b73f6a2da1379d3816cdbbfe5bca5.png)

并使用 CPropertySheet： ![在此处输入图像描述](../Images/e06f71f08b5b75d7c9de206b7ede0e92.png)

用于构建这些窗口的代码：

**基于 CDialog**

```
// DialogWithEdit.h
#pragma once

class CDialogWithEdit : public CDialog
{
    DECLARE_DYNAMIC(CDialogWithEdit)    
public:
    CDialogWithEdit(CWnd* pParent = NULL);   // standard constructor
    virtual ~CDialogWithEdit();
    enum { IDD = IDD_DIALOG1 };
protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support
    virtual BOOL OnInitDialog();
    DECLARE_MESSAGE_MAP()    
private:
    CEdit m_regularEdit;
    CEdit m_readOnlyEdit;
};

// DialogWithEdit.cpp : implementation file

#include "stdafx.h"
#include "PropertySheetTest.h"
#include "DialogWithEdit.h"
#include "afxdialogex.h"

IMPLEMENT_DYNAMIC(CDialogWithEdit, CDialog)

CDialogWithEdit::CDialogWithEdit(CWnd* pParent /*=NULL*/)
    : CDialog(CDialogWithEdit::IDD, pParent){    }

CDialogWithEdit::~CDialogWithEdit(){    }

void CDialogWithEdit::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CDialogWithEdit, CDialog)
END_MESSAGE_MAP()

BOOL CDialogWithEdit::OnInitDialog ()
    {
    BOOL retVal = CDialog::OnInitDialog ();

    WCHAR tabStr[5] = {0};
    wcscpy (tabStr, L"Tab1");

    TCITEM tab1 = {0};
    tab1.mask = TCIF_TEXT;
    tab1.cchTextMax = 5;
    tab1.pszText = tabStr;
    CTabCtrl * tabCtrl = (CTabCtrl*) GetDlgItem (IDC_TAB1);
    tabCtrl->InsertItem (0, &tab1);
    RECT tabRc = {0};
    tabCtrl->GetItemRect (0, &tabRc);

    m_readOnlyEdit.Create (WS_CHILD | WS_VISIBLE | WS_TABSTOP | WS_BORDER | ES_AUTOHSCROLL|ES_READONLY, CRect (10, 30, 100, 50), GetDlgItem (IDC_TAB1), 5);
    m_readOnlyEdit.SetWindowText (L"read only");
    m_regularEdit.Create (WS_CHILD | WS_VISIBLE | WS_TABSTOP | WS_BORDER | ES_AUTOHSCROLL, CRect (110, 30, 200, 50), GetDlgItem (IDC_TAB1), 5+1);
    m_regularEdit.SetWindowText (L"editable");
    return retVal;
    } 
```

**基于 CPropertySheet**

```
// SheetX.h
#pragma once
#include "PageX.h"

class CSheetX : public CPropertySheet
{
    DECLARE_DYNAMIC(CSheetX)    
public:
    CSheetX(UINT nIDCaption, CWnd* pParentWnd = NULL, UINT iSelectPage = 0);
    CSheetX(LPCTSTR pszCaption, CWnd* pParentWnd = NULL, UINT iSelectPage = 0);
    virtual ~CSheetX();    
protected:
    DECLARE_MESSAGE_MAP()    
private:
    CPageX m_pageX;
};

// SheetX.cpp : implementation file

#include "stdafx.h"
#include "PropertySheetTest.h"
#include "SheetX.h"

IMPLEMENT_DYNAMIC(CSheetX, CPropertySheet)

CSheetX::CSheetX(UINT nIDCaption, CWnd* pParentWnd, UINT iSelectPage)
    :CPropertySheet(nIDCaption, pParentWnd, iSelectPage)
{ AddPage (&m_pageX);   }

CSheetX::CSheetX(LPCTSTR pszCaption, CWnd* pParentWnd, UINT iSelectPage)
    :CPropertySheet(pszCaption, pParentWnd, iSelectPage)
{ AddPage (&m_pageX);   }

CSheetX::~CSheetX() { }    

BEGIN_MESSAGE_MAP(CSheetX, CPropertySheet)
END_MESSAGE_MAP()

// PaheX.h
#pragma once

class CPageX : public CPropertyPage
{
    DECLARE_DYNAMIC(CPageX)    
public:
    CPageX();
    virtual ~CPageX();
    enum { IDD = IDD_PAGEX };    
protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support
    virtual BOOL OnInitDialog ();
    DECLARE_MESSAGE_MAP()    
private:
    CEdit m_readOnlyEdit;
    CEdit m_regularEdit;
};
// PageX.cpp : implementation file

#include "stdafx.h"
#include "PropertySheetTest.h"
#include "PageX.h"    

#define ID_EDITCTRL     151    
IMPLEMENT_DYNAMIC(CPageX, CPropertyPage)

CPageX::CPageX()
    : CPropertyPage(CPageX::IDD){    }

CPageX::~CPageX(){    }

void CPageX::DoDataExchange(CDataExchange* pDX)
{
    CPropertyPage::DoDataExchange(pDX);
}

BOOL CPageX::OnInitDialog ()
    {
    BOOL retVal = CPropertyPage::OnInitDialog ();
    m_readOnlyEdit.Create (WS_CHILD | WS_VISIBLE | WS_TABSTOP | WS_BORDER | ES_AUTOHSCROLL|ES_READONLY, CRect (10,10,100,30), this, ID_EDITCTRL);
    m_readOnlyEdit.SetWindowText (L"read only");
    m_regularEdit.Create (WS_CHILD | WS_VISIBLE | WS_TABSTOP | WS_BORDER | ES_AUTOHSCROLL, CRect (110,10,200,30), this, ID_EDITCTRL+1);
    m_regularEdit.SetWindowText (L"editable");
    return retVal;
    }

BEGIN_MESSAGE_MAP(CPageX, CPropertyPage)
END_MESSAGE_MAP() 
```

我可以通过在 CPropertyPage 中处理 WM_CTLCOLORSTATIC 并返回默认对话框背景颜色的画笔来添加白色背景颜色的解决方法。但这对我来说似乎不对。另一方面， [msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787524%28v=vs.85%29.aspx)表示将 WM_CTLCOLORSTATIC 发送给父级，以便它指定背景颜色。由于有问题的 CEdit 控件的父级是 CPropertyPage 我猜这就是它返回白色画笔的原因。或者我在 CPropertyPage 上做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:56:03.077

这是默认的 Windows 行为。因此必须选择：坚持默认的窗口行为或将 WM_CTLCOLORSTATIC 消息从 CPropertyPage 传输到 CPropertySheet，后者返回其背景颜色（默认为灰色）。在经典主题上一切正常，因为 CPropertyPage 的颜色是灰色的。

# silverlight - 隔离存储站点设置和应用程序设置有什么区别？

> ID：10630595
> 
> 赞同：3
> 
> 时间：2012-05-17T05:57:45.807
> 
> 标签：silverlight, isolatedstorage

想知道独立存储站点设置和应用程序设置之间的区别吗？何时在 Silverlight 的应用程序中使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:30:46.990

站点和应用程序以及在其上构建的相应设置都有独立的存储空间。

站点存储在从同一域运行的所有应用程序之间共享，其中应用程序存储仅在从同一 uri 运行的所有应用程序之间共享 - 通常只有一个应用程序。

只要我相信用户没有明确删除它们，两者都存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:54:21.943

As per MSDN says and on my previous experience:

*SiteSettings are specific to a user, but are shared across applications in the same sub-domain. For example, an application at [http://www.contoso.com/site1/application.xap](http://www.contoso.com/site1/application.xap) will share SiteSettings with an application at [http://www.contoso.com/site2/application.xap](http://www.contoso.com/site2/application.xap). However, SiteSettings for applications at www.contoso.com/ will be isolated from applications at dev.contoso.com/ because they are hosted on different sub-domains.*

So you can use two different XAPs on the same domain but on application you will be isolated from that.

# javascript - 两个具有不同行为的相等 jQuery 脚本

> ID：10630600
> 
> 赞同：2
> 
> 时间：2012-05-17T05:58:33.693
> 
> 标签：javascript, jquery

我有一个脚本，当单击一个按钮时会做很多事情并重命名一些元素，所以起初我使用第一个脚本，我看到有时工作，有时不工作，所以将它更改为第二个脚本并且所有时间都运行良好，但是有一个问题。这两个脚本是否相同？有什么区别，而不是我的所有脚本，我只是用第二个替换第一个。

这是第一个脚本

```
$(CloneTarget).find(':input[name="' + MainName + '"]').attr('name', NewSelectName); 
```

第二个：

```
$(CloneTarget).find(':input').each(function () {
    if ($(this).attr('name') == MainName) {
        $(this).attr('name', NewSelectName);
    }
}); 
```

第一个问题出在哪里？

**编辑**

我也用这个：

```
 $(CloneTarget).find(':input[id="' + MainId + '"]').attr('id', NewSelectId); 
```

每件事都很好，我在这里真的很困惑，我必须提到`MainName`并且`MainId`非常相似：差异是关于性格`MainName = Model.Phones[0]`还是其他任何事情？`MainId = Model_Phones[0]``.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T06:07:24.930

是，有一点不同。`name`您的第二个代码片段在元素的属性和 的值之间执行字符串比较`MainName`。第一个直接将 的值注入`MainName`到[Attribute Equals](http://api.jquery.com/attribute-equals-selector/)选择器中。

`MainName`因此，如果碰巧包含以下内容，第一个片段将失败：

*   一个单引号字符`'`，
*   双引号字符`"`，
*   需要在选择器中转义的字符，例如`[`or `\`。

# java - 使用异常通知用户名是否可用

> ID：10630607
> 
> 赞同：1
> 
> 时间：2012-05-17T05:59:33.560
> 
> 标签：java, exception, exception-handling

假设我有一个表（登录），其中包含用户名（唯一密钥）和密码，用于登录目的。

现在，在注册模块中（通过在登录表中添加一个新行来创建一个新帐户），如果我只执行插入并在 SQLException() 引发时检查用户名是否已经在表中，可以吗？ . 这是一个好习惯吗？？？

这是注册模块的示例：

```
enter code here
String uname = request.getParameter("username");
String passwd = request.getParameter("password");
try
{
  statement.executeUpdate("insert into login(username,password) values (" + uname + "," + passwd + ")");
}
catch(SQLException e)
{
   if((e.getErrorCode())==1) //error code when primary key violated
   {
      // username already exists....
   }    
   //some other code
 }

 //username is available....rest of the code goes here 
```

首先，我想到了一个选择查询来检查用户名（用户在注册时输入）是否已经在表中......但这对我来说似乎是多余的

因为我认为，即使这样做也不会阻止 DBMS 检查唯一性违规，对吗？？？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:03:39.997

我建议在插入之前进行验证，以防您更改底层数据库，从而更改[SQLException.getErrorCode()](http://docs.oracle.com/javase/7/docs/api/java/sql/SQLException.html#getErrorCode%28%29)中的错误代码。这也使您能够在用户提交表单之前进行验证。您可以创建一个自定义异常，通知您的服务调用者用户名已在使用中。

> 检索此 SQLException 对象的特定于供应商的异常代码。

```
SELECT COUNT(*) FROM LOGIN WHERE USERNAME = :username 
```

通过服务方法，例如：

```
public class UserService {

    public boolean isValidUsername(String username) {
        //validate
    }
    public void registerUser(User user) throws UsernameInUseException {
        if(!isValidUsername(user.getUsername()) {
            throw new UsernameInUseException("Usernaame " + user.getUsername() + " is already in use.");
        }
        // continue
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:05:15.550

如果您可以在提交表单之前使用 AJAX 调用告诉用户用户名已经存在，那将会很酷。

# sencha-touch - Sencha Touch：使用按钮滚动面板后，当滚动结束时再次点击它回到初始位置

> ID：10630609
> 
> 赞同：4
> 
> 时间：2012-05-17T05:59:49.593
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试使用按钮点击滚动面板，并且面板正在根据需要滚动。但我的问题是，

**滚动结束后，它再次回到初始位置，不会粘在新位置**。

为什么会出现这种行为，我该如何获得休假？

**我使用的代码** *（工作得很好）*

```
var container = this.getDealdetails();
container.getScrollable().getScroller().scrollTo(x , y, true); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T13:11:28.450

如果滚动到位置大于容器的高度，则可滚动容器将向后滚动。

最好用一个例子来说明这一点。运行这个小提琴：[http ://www.senchafiddle.com/#8Qnt8](http://www.senchafiddle.com/#8Qnt8)

使您的浏览器窗口的高度变小，并注意它的行为方式。希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T11:51:12.860

```
var panel= Ext.getCmp('iObserveCreateRecords');
panel.getScrollable().getScroller().scrollTo(0, 0, true); 
```

//iObserveCreateRecords 是面板 id

# asp.net - ASP.NET 示例网站

> ID：10630611
> 
> 赞同：0
> 
> 时间：2012-05-17T06:00:12.807
> 
> 标签：asp.net

我主要使用数据驱动的应用程序。网上有没有地方可以找到完整的 ASP.NET 数据网站，以便我可以将这些 Web 应用程序的一部分合并到我自己的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:40:24.447

www.asp.net 本身就有很多样例应用，你也可以试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:10:30.340

.net 宠物店。 [http://www.microsoft.com/en-us/download/details.aspx?id=16693](http://www.microsoft.com/en-us/download/details.aspx?id=16693)

这个托管在 codeplex 上的是 .net 3.5 [http://petshopvnext.codeplex.com/releases/view/9782](http://petshopvnext.codeplex.com/releases/view/9782)

# java - 在 netbeans 中创建的 Jar 文件不起作用

> ID：10630614
> 
> 赞同：0
> 
> 时间：2012-05-17T06:00:24.633
> 
> 标签：java, netbeans, jar

我已经使用我的 mac 在 Netbeans 中创建了一个项目，现在当我需要将项目交付给客户端但不幸的是我无法运行 jar 文件时，我通过 Run->Repeat Build /Run 创建了 jar 文件但是当我尝试运行项目它给出以下错误

```
 5/17/12 9:54:09.340 AM [0x0-0xa80a8].com.apple.JarLauncher: Exception in thread "main" 
    5/17/12 9:54:09.341 AM [0x0-0xa80a8].com.apple.JarLauncher: java.lang.UnsupportedClassVersionError: pos/Login : Unsupported major.minor version 51.0 
```

请帮忙看看为什么会出现这个错误？我很担心，因为我需要处理这个项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:05:27.517

您正在尝试使用较旧版本的 JVM 运行您的 jar 文件。您在 JDK7 下编译并尝试在 JDK6 或更早版本下运行。您需要将 Netbeans 中的目标 Java 版本设置为与您的客户端环境匹配的版本。

# iframe - 自定义 iframe 形状

> ID：10630615
> 
> 赞同：-1
> 
> 时间：2012-05-17T06:00:24.980
> 
> 标签：iframe

我想将 iFrame 部分的形状从矩形更改为我自己的自定义形状：

```
<html>
<body>
<p>dfsdfsdf</p>
<iframe  src="http://forum.jquery.com/topic/jquery-mobile-and-iframes-to-load-external-websites">
  <p>Your browser does not support iframes.</p>
</iframe>

</body>
</html> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:21:16.633

`iframes`总是矩形的。没有办法改变它。

一般来说，尽管您可能希望将透明度、z-index 和绝对定位视为一种可能的解决方法，具体取决于您希望实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-15T06:59:12.917

我同意 iframe 通常是常规的，但您始终可以从一些 java 脚本和 CSS 框架中获得帮助来修改您的 iframe 属性。

例如这个学习网站将提供更多关于如何使用 j-query 库来修改 iframe 的详细信息。

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
    </script>
    <script src="src/jquery.youtubebackground.js"></script>
````````````````````````````````````````````````````````````````````````````````````````````````````
    <div id="video"></div> 
```

# 调用插件函数，你的轮播就准备好了。

```
$('#video').YTPlayer({
fitToBackground: true,
videoId: 'LSmgKRx5pBo'
}); 
```

# 需要自定义一些 CSS 以使其成为背景

```
#video{
position: relative;
background: transparent;
}

.ytplayer-container{
 position: absolute;
 top: 0;
 z-index: -1;
} 
```

### 与 Youtube Javascript API 一起使用

### Youtube Javascript API 选项

*任何 youtube 选项都必须放在 playerVars 对象中。*

```
$('#video').YTPlayer({
fitToBackground: true,
videoId: 'LSmgKRx5pBo'
playerVars: {
  modestbranding: 0,
  autoplay: 1,
  controls: 1,
  showinfo: 0,
  branding: 0,
  rel: 0,
  autohide: 0,
  start: 59
}
}); 
```

**使用播放器访问 YouTube 的所有 API 事件和方法：**

```
var player = $('#background-video').data('ytPlayer').player;
player.pauseVideo();
player.playVideo();

player.addEventListener('onStateChange', function(data){
console.log("Player State Change", data);
}); 
```

# 更多可以在下面的链接中找到::

[https://github.com/rochestb/jQuery.YoutubeBackground](https://github.com/rochestb/jQuery.YoutubeBackground)

[https://www.learningjquery.com/2016/03/10-jquery-youtube-plugins](https://www.learningjquery.com/2016/03/10-jquery-youtube-plugins)

# c# - 如果列表中抛出异常 .ForEach，迭代是否停止？

> ID：10630619
> 
> 赞同：9
> 
> 时间：2012-05-17T06:00:42.977
> 
> 标签：c#, exception, foreach

如果我有以下代码：

```
List<MyClass> list = GetList();
list.ForEach(i => i.SomeMethod()); 
```

假设`SomeMethod()`抛出异常。`ForEach`是继续迭代，还是就停在那里？

如果它确实终止了，有没有办法让集合中的其余项目运行它们的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T06:02:12.913

是的，如果抛出异常，则循环退出。如果您不想要这种行为，则应将异常处理放入您的委托中。您**可以**轻松地为此创建一个包装器方法：

```
public static Action<T> SuppressExceptions<T>(Action<T> action)
{
    return item =>
    {
        try
        {
            action(item);
        }
        catch (Exception e)
        {
            // Log it, presumably
        }
    };
} 
```

老实说，如果可能的话，我会*尽量*避免这种情况。捕获*所有*这样的异常是不愉快的。它也不会记录失败的项目或异常等。您确实需要更详细地考虑您的要求：

*   你需要收集失败的物品吗？
*   您需要收集异常吗？
*   您想捕获哪些异常？

几乎可以肯定的是，创建一个使用普通`foreach`循环的单独方法会更干净，处理错误并在执行过程中收集错误。就我个人而言，我通常更喜欢使用`foreach`over-`ForEach`您也可能希望阅读[Eric Lippert 对此的想法](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T06:03:19.010

它会抛出一个错误。您也正在重新实现`foreach`. 怎么样：

```
foreach (var item in list)
{
    try
    {
        // dangerous thing with item
    }
    catch (Exception e)
    {
        // how do you want to log this?
    }
} 
```

这样做的好处是可以在大多数版本的 .NET 中工作，并且显然会产生副作用。当然，您可以将此代码直接放在`ForEach`委托中，但我只建议将其作为方法本身（而不是 lambda 函数）。

* * *

一个合理的替代方法是创建自己的`ForEachWithCatch`扩展来捕获所有异常并将它们发送回调用者：

```
public static IEnumerable<Tuple<T,Exception>> ForEachWithCatch<T>(this IEnumerable<T> items, Action<T> action)
{
    var exceptions = new List<Tuple<T,Exception>>();

    foreach(var item in items)
    {
        try
        {
            action(item);
        }
        catch(Exception e)
        {
            exceptions.Add(Tuple.Create(item, e));
        }
    }

    return exceptions;
} 
```

这会发回每个失败的项目的可枚举及其相应的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:18:23.853

如果您`SomeMethod`已经实现了 try-catch 块，那么 foreach 将继续

```
void SomeMethod()
{
  try
  {
    //Some operation on i 
  }
  catch(Exception ex)
  {
  }
} 
```

但如果不是，那么 foreach 就会中断。

这样做的一个方法是

```
list.ForEach(i => 
     {
         try
         {
             i.SomeMethod();
         }
         catch(Exception ex)
         {
         }
     }); 
```

但是在你的代码中有零个 try-catch 块总是好的。否则，您将永远找不到罪魁祸首。

# c# - RTL 语言（希伯来语、阿拉伯语等）字符串以何种顺序存储在内存中？

> ID：10630623
> 
> 赞同：1
> 
> 时间：2012-05-17T06:01:05.600
> 
> 标签：c#, string, memory, right-to-left

操作系统如何知道是否对字符串应用双向算法以进行显示？

我知道希伯来语可能以 ISO 逻辑形式出现，但操作系统如何知道如何指出特定字符串包含希伯来语（或任何其他 RTL 语言）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:06:04.337

根据[如何检测字符是否属于从右到左的语言？](https://stackoverflow.com/questions/4330951/how-to-detect-whether-a-character-belongs-to-a-right-to-left-language)- 似乎它们是从左到右存储的，是字符代码决定了它是否是 RTL 语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:16:01.843

如今，按照 Unicode 标准的建议，这样做的方法是以逻辑顺序存储文本（[这里](http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=IWS-Chapter04a#f618274b)有很好的解释），这意味着读取它的顺序。

操作系统通过查看字符代码知道特定字符串包含希伯来语。它应用[Unicode 双向算法](http://www.unicode.org/reports/tr9/)来确定正确的显示顺序。通常，操作系统会首先对字符串进行快速扫描，以查看是否有任何从右到左的字符或限制顺序的控制代码。如果不是，则字符串不需要重新排序。

# php - 在 YII 框架上创建一致的控制器

> ID：10630626
> 
> 赞同：2
> 
> 时间：2012-05-17T06:02:06.600
> 
> 标签：php, model-view-controller, yii

我正在使用带有动作控制器的 yii 框架，控制器中的每个动作都发出相同的请求，但有一些细微的变化。我正在使用我的控制器来调用 API（我制作的扩展）。而且我想知道如何自动设置控制器以调用 API，但具有适合该控制器的特定值和属性。所以我不需要将每个代码复制粘贴到所有控制器。

我想知道如何使用 accesssControl 过滤器做同样的事情（配置一个类/函数和所有控制器组件的所有规则）。

例子：

```
 <?php
    public function actionLoadDataUser()
{

            //Set model
    $model = new User_DataForm;

    $function = "LoadDataUser";           //Set Method to set or get from (API)

            //Set model name
            $model_name = get_class($model);

    // collect user input data
    if(isset($_POST[$model_name]))
    {       

                    $model->attributes = $_POST[$model_name];
                                        $response = Yii::app()-API->SendRawData($function,  $model->attributes);    // server and get response by function and data
                switch ($response)
                {
        case 'OK':
            Yii::app()->user->setFlash('info','OK');
            $this->refresh();
        break;
        default: 
            Yii::app()->user->setFlash('info','Error!');
            $this->refresh();
                }
    }

    // display the page
    $this->render('index', array('model'=>$model));
}

    public function actionLoadDataAdmin()
{

            //Set model
    $model = new Admin_DataForm;

    $function = "LoadDataAdmin";           //Set Method to set or get from (API)

            //Set model name
            $model_name = get_class($model);

    // collect user input data
    if(isset($_POST[$model_name]))
    {       

                    $model->attributes = $_POST[$model_name];
                    $response = Yii::app()-API->SendRawData($function,  $model->attributes);    // server and get response by function and data
                switch ($response)
                {
        case 'OK':
            Yii::app()->user->setFlash('info','OK');
            $this->refresh();
        break;
                    case 'NOT_ADMIN':
            Yii::app()->user->setFlash('info','Access Denied');
            $this->refresh();
        break;
        default: 
            Yii::app()->user->setFlash('info','Error!');
            $this->refresh();
                }
    }

    // display the page
    $this->render('admin', array('model'=>$model));
}
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:44:56.763

编辑：使用一个单独的操作来执行 API 调用，具体取决于您传递给它的参数。

```
public function actionLoadData()
{
    $modelName = $_POST['model'];
    $model     = new $modelName;
    $function  = $_POST['function'];

    if(isset($_POST[$modelName]))
    {
        $model->attributes = $_POST[$modelName];
        $response = Yii::app()->API->SendRawData($function,  $model->attributes);
        switch ($response)
        {
            case 'OK':
                Yii::app()->user->setFlash('info', 'OK');
                $this->refresh();
                break;
            default: 
                Yii::app()->user->setFlash('info', 'Error!');
                $this->refresh();
        }
    }

    $this->render($_POST['view'], array('model' => $model));
} 
```

请注意，此代码不安全。确保添加一些验证。

# computer-vision - 图像对应 - 图像的匹配区域

> ID：10630634
> 
> 赞同：0
> 
> 时间：2012-05-17T06:02:33.037
> 
> 标签：computer-vision

我有 2 张内容相同的图像，但可能有不同的比例或旋转。问题是，我必须找到这些图像的区域并将它们相互匹配。例如，如果我在 image1 上有一个圆圈，我必须在 image2 中找到相应的圆圈。

我只想问解决这个问题的正确方法是什么。我正在查看 opencv 的 matchShapes。我相信这个问题是图像对应，但我真的不知道如何解决它！

提前致谢！

我有以下图片：模板图片=> [https://lh6.googleusercontent.com/-q5qeExXUlpc/T7SbL9yWmCI/AAAAAAAByg/gV_vM1kyLnU/w348-h260-nk/1.labeled.jpg](https://lh6.googleusercontent.com/-q5qeExXUlpc/T7SbL9yWmCI/AAAAAAAAByg/gV_vM1kyLnU/w348-h260-n-k/1.labeled.jpg)

示例图片 => [https://lh4.googleusercontent.com/-x0IWxV7JdbI/T7SbNjG5czI/AAAAAAAByw/WSu-y5O7ee4/w348-h260-nk/2.labeled.jpg](https://lh4.googleusercontent.com/-x0IWxV7JdbI/T7SbNjG5czI/AAAAAAAAByw/WSu-y5O7ee4/w348-h260-n-k/2.labeled.jpg)

请注意，图像上的数字对应于区域的正确匹配。比较图像时这些不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:20:23.797

与通常的计算机视觉问题一样，您永远不能提供太多信息并对打算分析的数据做出太多假设。解决一般问题几乎是不可能的，因为我们无法用计算机进行人类水平的模式识别。你的问题集看起来如何？一些示例对于尝试提供好的答案非常有帮助。

您提到图像具有相同的内容，但颜色不同。如果这意味着它是在不同光照条件下从不同角度拍摄的同一个场景，您可能需要先进行[严格的图像配准](http://en.wikipedia.org/wiki/Image_registration)，因此两张图像中的特征点应该重叠。如果您的图像上的形状相互比较可能有多个变形，您可能会对非刚性图像配准感兴趣。

如果您已经知道要查找的对象，则可以简单地在两个图像中搜索这些对象，例如使用`chamfer matching`或任何其他匹配算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T14:16:07.513

使用 OpenCV 的 ORB 特征检测器。获得描述符后，使用具有规范类型 NORM_HAMMING 的 BFMatcher。

# ruby-on-rails - 动态下拉菜单：D

> ID：10630635
> 
> 赞同：1
> 
> 时间：2012-05-17T06:02:43.833
> 
> 标签：ruby-on-rails

如何以最简单的方式在rails中制作动态下拉菜单？例如，我有两个下拉菜单，第二个根据第一个菜单上的值列出不同的内容。谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:28:18.720

通过这个，它将帮助您创建菜单[http://railscasts.com/episodes/88-dynamic-select-menus](http://railscasts.com/episodes/88-dynamic-select-menus)

# c++ - 如何使用分布在大型项目中的多个#include 文件预处理单个源文件？

> ID：10630639
> 
> 赞同：2
> 
> 时间：2012-05-17T06:03:09.703
> 
> 标签：c++, g++, c-preprocessor

为了获得预处理的输出，使用以下命令：

```
g++ -E a.cpp > temp.cpp 
```

如果文件不在同一个文件夹中，那么我们使用`a.cpp`：`#include`

```
g++ -I <directory> -E a.cpp > temp.cpp 
```

现在，有几个`.cpp`文件我想要一个预处理输出。每个 .cpp 文件和头文件
也有巨大的依赖关系，分布在几个不同的子目录中；`#include`所以以下选项非常麻烦：

```
g++ -I <dir1> -I <dir2> -I <dir3> ... -E a.cpp > temp.cpp 
```

有没有更简单的方法（最好不使用`Makefile`）？
（假设`dir1, dir2, ...`在一个目录下）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:42:06.720

You need the same set of `-I` for preprocessing and for compiling.

When you actually compile the code, you surely use some set of `-I` parameters (probably generated by a make file).
So just use the same (or compile, and copy&paste the `-I` parameters).

The only alternative I see is restructuring your header directories to be in a common directory (with sub-directories, using `#include <subdir/header.h>`).
But this is much more work (though it may be worth the effort).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:06:29.273

一种方法是您提供所有子目录所在的 TOP 目录。这样你就不必给很多 -I。但这会减慢它的速度。

# java - Node.js Web 应用程序与 Java Web 应用程序（Tomcat 6 上的 Spring MVC）

> ID：10630645
> 
> 赞同：-1
> 
> 时间：2012-05-17T06:03:47.763
> 
> 标签：java, node.js

我正在尝试重写使用 tomcat 服务器的 Spring MVC 3 上编写的 Java Web App。

Web 应用程序用于处理来自手机应用程序的休息请求。Java Web 应用程序还有一个前端在 JSP 中呈现页面。

现在我已经开始使用 express 框架在节点上。现在我可以期望 node-app 比 Java web-app 性能更好吗？我如何对两者进行压力测试并得出结论？

以下是我的网络应用必须处理的典型请求

1.  从数据库中获取分页记录
2.  获取两个地理点之间的大圆距离，作为参数传递给其余服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:04:36.597

尝试使用[ab](http://httpd.apache.org/docs/2.0/programs/ab.html "抗体")进行压力加载，页面加载速度有多快。如果可以的话，从不同的机器上做。

你也有[nodeload](https://github.com/benschmaus/nodeload "节点负载")项目，这很好。

# javascript - 正则表达式匹配最后一对括号中的内容

> ID：10630647
> 
> 赞同：1
> 
> 时间：2012-05-17T06:04:00.290
> 
> 标签：javascript, regex

使用 JavaScript 正则表达式，如何匹配最后一组括号中的内容？

```
input = "the string (contains) things like (35) )( with (foobar) and )( stuff";

desired_output = "foobar" 
```

我尝试过的一切都过度匹配或完全失败。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:12:55.750

一种选择是匹配不包含其他括号的括号，例如：

```
var tokens = input.match(/\([^()]*\)/g);
var last = tokens.pop(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:29:48.633

或者作为一个班轮...

```
var last = input.match(/\([^()]*\)/g).pop().replace(/(\(|\))/g,"").replace(/(^\s+|\s+$)/g,""); 
```

# c - 函数调用约定 Powerpc vs Intel

> ID：10630649
> 
> 赞同：1
> 
> 时间：2012-05-17T06:04:22.707
> 
> 标签：c, segmentation-fault, stack-trace, intel, powerpc

我需要以下信息：

powerpc 和 intel 处理器在调用函数时如何分配堆栈？- 在每种情况下确定堆栈大小的基础是什么，即 powerpc 和 intel x86 处理器 - 参数和返回地址存储在堆栈上的位置。

基本上我需要在每种情况下堆叠布局。

我有一种情况，我的程序在英特尔机器中崩溃（分段错误）并且在 powerpc 上运行良好。我找到了崩溃的原因，代码片段如下：

```
int function_a(int a)
{
   int local_var = 1;
   int ret_var;

   ret_var = function_b(&local_var);

}

int function_b (int* local_var_in_calld_fn)
{

   while (some_condition)
   {
      *local_var_in_calld_fn = some_computed_value; /* Cause of crash */
      local_var_in_calld_fn++; 
   }
   return something;
} 
```

某些值在“可能”在堆栈上并因此崩溃的地址上更新。代码完全不会在位置崩溃，但是当在 x86 机器上退出此功能后，在 gdb 中调试时会在外部某处崩溃。

我怀疑它破坏了堆栈，但它并没有在 powerpc 上崩溃。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:37:08.033

这里有一个明显的堆栈溢出。
`function_a`获取指向单个 的指针`int`，递增（因此它指向堆栈中的其他位置），然后写入。

堆栈溢出的结果是非常不可预测的。它取决于调用约定，还取决于编译器决策，例如变量排序和内联，这些都没有以任何方式标准化。

我不会纠结于为什么它在一种情况下崩溃而不是在另一种情况下崩溃。
最好只是修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:27:41.647

*操作系统负责分配堆栈，而不是处理器。*PowerPC 处理器甚至不知道也不关心堆栈。按照惯例，“堆栈指针”是`r1`一个完全正常的寄存器，但这取决于平台。您还没有说明这是在哪个平台上运行的。

在这种情况下，崩溃是由 line 引起的`local_var_in_calld_fn++;`，这是未定义的行为（也许你的意思是`*local_var_in_calld_fn++;`）。那么问题是“为什么未定义的行为不会崩溃？” 答案很简单：

**未定义的行为是*未定义*的，所以*绝对有*可能发生任何事情，包括不崩溃。**

除此之外，为什么它不崩溃的最简单解释是因为`some_condition`在 PPC 上评估为 false（因为它是单核的，所以锁争用较少，所以你还没有注意到崩溃）。

我还可以想出一个不会崩溃的案例：

*   在这个特定的平台上，堆栈长大（我不确定是否有任何常见的这样做）。这意味着写入`*local_var_in_calld_fn`有效地增加了堆栈并且可能会破坏`function_b()`堆栈，但不会破坏任何调用者的堆栈。
*   `function_b()`是一个“叶函数”（即不进行任何函数调用），因此 LR 不需要保存在堆栈中。这意味着写入`*local_var_in_calld_fn`不会破坏返回地址。
*   `some_condition`很快就会变成假，以至于你不会用完堆栈。

# wcf - 如何将 WCF Web 服务的绑定详细信息发布到 Internet 上的客户端？

> ID：10630651
> 
> 赞同：0
> 
> 时间：2012-05-17T06:04:28.417
> 
> 标签：wcf, web-services, wsdl, wcf-binding, wcf-client

我想`WCF`在公共域（在 Internet 上）托管我的 Web 服务，以便任何客户端应用程序（java、.net 等）都可以使用它。

将`WSDL`提供服务的详细信息（它提供什么等）。但，

1.  如何将`binding`详细信息告知客户？ **我想知道当您在互联网上并且您不知道客户是谁时，我们如何将绑定细节告知外界。WSDL 给出了服务的细节；同样，有什么机制可以通知与服务通信所需的绑定。**

2.  当我想通过 Internet 发布我的 Web 服务以便任何人都可以使用它时，我是否需要坚持一些特定的绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:21:54.377

1.  svcutil 或 Visual Studio（在后台使用 svcutil）将了解元数据交换绑定提供的绑定规范（[看这里](http://msdn.microsoft.com/en-us/library/aa751951.aspx)）
2.  它不会。如果您希望您的 Web 服务被 .NET 以外的技术使用，您不应该使用 .NET 特定的实现。
3.  basicHttpBinding 适用于soap 1.1。带有soap 1.2 和WS-* 的wsHttpBinding。如果您希望您的 Web 服务可互操作，则不应使用其他绑定。

# batch-file - 批处理文件无法复制特定行

> ID：10630658
> 
> 赞同：0
> 
> 时间：2012-05-17T06:05:04.313
> 
> 标签：batch-file

我在批处理文件中尝试了此代码，但无法正常工作。我想从 DefaultGateway.txt 中取出第一行并替换 NewFile.txt 中的第三行 ip 地址。

**批处理文件代码：**

```
ipconfig /all | findstr Gateway > "C:\Program Files (x86)\""Wireless Guard\""DefaultGateway.txt"
SetLocal EnableDelayedExpansion
type nul > NewFile.txt
set "Default" =Start Line of Paragraph
set "254"=End Line which is not Included
set Flag=0
for /f "tokens=* delims=" %%a in ('type DefaultGateway.txt') do (
if /i "%StartText%" EQU "%%a" (set Flag=1) 
if /i "%EndText%" EQU "%%a" (set Flag=0) 
if !Flag! EQU 1 echo %%a >> NewFile.txt
) 
```

**默认网关.txt：**

```
Default Gateway . . . . . . . . . : 172.20.128.254
Default Gateway . . . . . . . . . : 
Default Gateway . . . . . . . . . : 
```

**新文件.txt：**

```
remarks:This document is for Linksys for version v4.30.5, the auto sensing part.
"C:\Program Files (x86)\Wireless Guard\wget" --http-user= --http-password=admin 
[this is not a link]http://192.168.1.1/WClientMACList.htm
REM del WClientMACList.txt
REM del arp.txt
REM del Intruder1.txt
copy WClientMACList.htm WClientMACList.txt
del WClientMACList.htm
REM del WL_ActiveTable.asp
REM do ping for 20 seconds
REM ping -n localhos 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:55:42.503

Your question/example have missed several details, so I made some assumptions. The Batch file Below:

1- Does not create the DefaultGateway.txt at all, but take the same output.

2- Read first line from that output and get the text after the colon as ipAddr.

3- Read third line of NewFile.txt and replace the text between // and / with previous ipAddr. The result is in NewFile.new file.

**EDIT**: I fixed a couple problems...

```
@echo off
setlocal EnableDelayedExpansion
REM ipconfig /all | findstr Gateway > "C:\Program Files (x86)\""Wireless Guard\""DefaultGateway.txt"
for /F "tokens=2 delims=:" %%a in (DefaultGateway.txt) do (
   set ipAddr=%%a
   goto continue
)
:continue
set num=0
(
for /F "delims=" %%a in (NewFile.txt) do (
   set "line=%%a"
   set /A num+=1
   if !num! equ 3 (
      for /F "tokens=1-3 delims=/" %%b in ("%%a") do (
         set "line=%%b//%ipAddr:~1%/%%d"
      )
   )
   echo(!line!
)
) > NewFile.new 
```

This is the resulting NewFile when the program run with your data above:

```
remarks:This document is for Linksys for version v4.30.5, the auto sensing part.
"C:\Program Files (x86)\Wireless Guard\wget" --http-user= --http-password=admin 
[this is not a link]http://172.20.128.254/WClientMACList.htm
REM del WClientMACList.txt
REM del arp.txt
REM del Intruder1.txt
copy WClientMACList.htm WClientMACList.txt
del WClientMACList.htm
REM del WL_ActiveTable.asp
REM do ping for 20 seconds
REM ping -n localhos 
```

Note that you must replace the right (full path) name of the DefaultGateway.txt file in the FOR command. If this name include a right parentheses, like `(x86)`, you must escape it with a caret character this way: `(x86^)`. Why not create this file in the current directory? It seems to be just an auxiliary file, right?

Another possibility is to put in this place the `'ipconfig /all | findstr'` command, so the auxiliary file is entirely avoided (like I done in the first version of my program).

# algorithm - 表示重新排序的算法，作为对象移动的最小数量

> ID：10630659
> 
> 赞同：1
> 
> 时间：2012-05-17T06:05:08.920
> 
> 标签：algorithm, synchronization

这个问题出现在对象数组（有序集）的同步中。

具体来说，考虑一组项目，同步到另一台计算机。用户在我背后移动一个或多个对象，从而重新排列数组。当我的程序唤醒时，我看到了新的顺序，我知道了旧的顺序。我必须将更改传输到另一台计算机，在那里复制新订单。这是一个例子：

```
index         0    1    2
old order     A    B    C
new order     C    A    B 
```

*将移动*定义为将给定对象移动到给定的新索引。问题是通过在通信链路上传输最小数量的*移动*来表达重新排序，这样另一端可以通过以旧顺序获取未移动的对象并将它们移动到新的尚未使用的索引中来*推断*剩余的移动顺序，从最低指数开始向上。这种传输方法在少量对象在大型阵列中移动的情况下会非常有效，从而置换大量对象。

不挂断。让我们继续这个例子。我们有

```
CANDIDATE 1
Move A to index 1
Move B to index 2
Infer moving C to index 0  (the only place it can go) 
```

请注意，需要传输前两个*动作。*如果我们不*将 Move B 传输到索引 2*，则 B 将被推断为索引 0，我们最终会得到 BAC，这是错误的。我们需要传递两个动作。让我们看看我们是否可以做得更好……</p>

```
CANDIDATE 2
Move C to index 0
Infer moving A to index 1  (the first available index)
Infer moving B to index 2  (the next available index) 
```

在这种情况下，我们得到了正确的答案 CAB，只传输了一个动作，*将 C 移动到索引 0*。因此，候选人 2 比候选人 1 好。还有四个候选人，但显然至少需要一步才能做任何事情，我们现在可以停下来宣布候选人 2 获胜。

我想我可以通过强行尝试所有可能的候选者来做到这一点，但是对于 N 个项目的数组，有 N 个！（N 阶乘）可能的候选者，即使我足够聪明，可以像示例中那样截断不必要的搜索，但在可能包含数百个对象的典型数组中，事情可能仍然会变得相当昂贵。

只传输整个命令的解决方案是不可接受的，因为为了兼容性，我需要模拟另一个程序的传输。

如果有人可以写下答案，那就太好了，但是建议*去阅读计算机科学教科书 XXX 的第 N 章*是完全可以接受的。我不知道那些书，因为，我，嘿，*只是*一名电气工程师。

谢谢！

杰里·克里诺克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:31:30.527

我认为这个问题可以归结为[最长公共子序列问题](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)，只需找到这个公共子序列并传输不属于它的移动。没有最优性的证明，只是我的直觉，所以我可能是错的。即使我错了，这可能是一些更花哨的算法的一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:51:27.777

**基于信息论的方法**

首先，有一个位系列，0 对应于“常规顺序”，11 对应于“不规则条目”。每当出现不规则条目时，还要添加下一个条目的原始位置。

例如。对于以下情况，假设 ABCDE 的原始顺序

ABDEC: 001 **3** 01 **2**

BCDEA：1 **1** 0001 **0**

现在，如果进行“移动”的概率为 p，则此方法大约需要 n + n*p*log(n) 位。

请注意，如果 p 很小，则 0 的数量会很高。您可以将结果进一步压缩为：

n*(p*log(1/p) + (1-p)*log(1/(1-p))) + n*p*log(n) 位

# c# - 通信对象 System.ServiceModel.Channels.ServiceChannel 不能用于通信，因为它处于故障状态

> ID：10630662
> 
> 赞同：1
> 
> 时间：2012-05-17T06:05:17.950
> 
> 标签：c#, .net, wcf, c#-4.0

我收到如下错误

“通信对象 System.ServiceModel.Channels.ServiceChannel 无法用于通信，因为它处于故障状态。”

```
using (SecurityClient securityClient = new SecurityClient())
{                        
    SecurityService.GetIncomingPermissionsByIdRequest securityRequest =
        new GetIncomingPermissionsByIdRequest(Convert.ToInt32(recordId));
    SecurityService.GetIncomingPermissionsByIdResponse securityResponse =
        securityClient.GetIncomingPermissionsById(securityRequest);
    incomingPermissions = securityResponse.GetIncomingPermissionsByIdResult;
    SetPermissionFields();
    SetPermissionList();                  
    securityClient.Close();
} 
```

在上面的代码中，我能够发送请求，但是当涉及到 Response 行并试图获得响应时，它会移动到故障状态并得到上面提到的错误。我在 SecurityClient 移动到响应之前检查了它的状态行，那么它处于创建状态。但是当试图获得响应时，它会进入故障状态。

有人能帮帮我吗？我尝试了堆栈中提到的一些方法，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T20:26:57.453

问题是使用...

简单的解决方案：

```
SecurityClient securityClient = new SecurityClient();

SecurityService.GetIncomingPermissionsByIdRequest securityRequest = new GetIncomingPermissionsByIdRequest(Convert.ToInt32(recordId));
SecurityService.GetIncomingPermissionsByIdResponse securityResponse = securityClient.GetIncomingPermissionsById(securityRequest);
incomingPermissions = securityResponse.GetIncomingPermissionsByIdResult;
SetPermissionFields();
SetPermissionList();                  
securityClient.Close();
securityClient.Dispose(); 
```

更优雅的解决方案：

创建 WCF 扩展：

```
using System;
using System.ServiceModel;

namespace MyNamespace
{
    public static class WcfExtensions
    {
        public static void Using<T>(this T client, Action<T> work)
            where T : ICommunicationObject
        {
            try
            {
                work(client);
                client.Close();
            }
            catch (CommunicationException e)
            {
                client.Abort();
            }
            catch (TimeoutException e)
            {
                client.Abort();
            }
            catch (Exception e)
            {
                client.Abort();
                throw;
            }          
        }
    }
} 
```

然后使用以下语法进行实例化：

```
 new SecurityClient().Using(securityClient => 
        {
            SecurityService.GetIncomingPermissionsByIdRequest securityRequest = new GetIncomingPermissionsByIdRequest(Convert.ToInt32(recordId));
            SecurityService.GetIncomingPermissionsByIdResponse securityResponse = securityClient.GetIncomingPermissionsById(securityRequest);
            incomingPermissions = securityResponse.GetIncomingPermissionsByIdResult;
            SetPermissionFields();
            SetPermissionList();                  
        }); 
```

[避免使用语句的问题](http://msdn.microsoft.com/en-us/library/aa355056.aspx)

# iphone - 在 iphone SDK 中获取我所在位置的海拔高度（距海平面的高度）

> ID：10630664
> 
> 赞同：5
> 
> 时间：2012-05-17T06:05:23.087
> 
> 标签：iphone, gps, cllocation, altitude

我正在尝试在我的应用程序中获取我所在位置的高度。但是每次我尝试对象`altitude`的属性时，`CLLocation`我都会得到`0.00`结果。

我用谷歌搜索我的查询，我在[这里](https://stackoverflow.com/questions/4870480/ios-corelocation-altitude)和[这里](https://stackoverflow.com/questions/5788328/altitude-problem-ios)得到了类似的问题。这个链接是说如果我用 wifi 或手机信号塔访问 CLLocation 它将为空。即使我尝试设置`desireAccuracy`为最好，也不能确保该应用程序将使用 GPS。它还说，如果我在室内，我将无法访问 GPS。

在很多情况下，它不确定应用程序是否会仅使用 GPS。我也想要一些从 wifi 或手机信号塔获取海拔高度的方法。为此，我在 Google 上进行了更多搜索，并获得了[Google Earth API](https://developers.google.com/earth/documentation/ocean)，但我认为这仅适用于 Microsoft .net 技术。

现在根据这种情况，我认为对于一个解决方案，我可以在 Microsoft Technology 中创建一个 Web 服务并在那里传递我的位置，我可以获得高度作为响应，但我不想这样做。

谁能建议我如何从 ios 获取我所在位置的高度。有没有可用的方法？如果是，请按正确的方向导航我。

提前致谢。

**编辑1**

我用于`CLLocationManager`更新位置，当我得到我的位置时，我需要高度。

**编辑2**

根据@fishinear 的回答，我尝试了以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    manager = [[CLLocationManager alloc] init];
    [manager setDesiredAccuracy:kCLLocationAccuracyBestForNavigation];
    [manager setDistanceFilter:kCLDistanceFilterNone];
    [manager setDelegate:self];
    [manager startUpdatingLocation];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    if ([newLocation verticalAccuracy] >= 0) {
        NSLog(@"Altitude = %lf",newLocation.altitude);
    }
    NSLog(@"Vertical Accuracy : %lf",newLocation.verticalAccuracy);
} 
```

`verticalAccuracy`总是`-1`。即使将应用程序运行到最后 30 分钟，它也不会改变。我在我的 3GS 上运行 ios 4.3.2。我在室内，所以我认为它甚至没有使用此代码访问 GPS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:27:20.467

要回答您最初的问题：如果您在配置 CLLocationManager 时将 desiredAccuracy 设置为 Best 或 BestForNavigation，并将 distanceFilter 设置为 kCLDistanceFilterNone，则将始终使用 GPS。然后，您还将在 CLLocation 事件中获得高度值。

然而，GPS 需要很短的时间才能“锁定”到足够多的卫星以报告高度。在此期间，它将报告没有高度值的 CLLocation 事件。因此，您应该忽略前几个事件，直到verticalAccuracy 值对您来说足够好。另外，检查时间戳，因为有时第一个 CLLocation 事件是旧事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T06:21:11.983

请参阅[Android - 通过经度和纬度获取高度？](https://stackoverflow.com/questions/1995998/android-get-altitude-by-longitude-and-latitude)有一个 Android 解决方案，但它很容易适应 iOS。

答案是使用[USGS Elevation Query Web Service](http://gisdata.usgs.gov/)

从那里的最佳答案开始，基本上您只需将 HTML Web 请求发送到：

```
http://gisdata.usgs.gov/xmlwebservices2/elevation_service.asmx/getElevation?X_Value=" + 
             String.valueOf(longitude)   + 
             "&Y_Value=" + String.valueOf(latitude)             
             + "&Elevation_Units=METERS&Source_Layer=-1&Elevation_Only=true"; 
```

`<double>...</double>`然后你可以从标签之间解析出响应文本

**编辑：** 看起来您可能正试图在美国以外的地方获得海拔。

[Google Maps API 确实在https://developers.google.com/maps/documentation/javascript/elevation](https://developers.google.com/maps/documentation/javascript/elevation)提供了海拔服务和文档

# extjs4 - extjs 4 组合框，如何禁用选项卡并输入密钥

> ID：10630667
> 
> 赞同：0
> 
> 时间：2012-05-17T06:05:43.473
> 
> 标签：extjs4

我正在使用 extjs 4.0.7。当用户使用 Combobox 时，我想禁用选项卡和 Enter 键事件。我尝试使用 keyUp 和 KeyDown 事件。但我没有得到任何警报。

这是我的代码：

```
{
  xtype: 'combo',
  store: ds,
  id:'UserBO_SelectComponentId',
  displayField: 'displayName',
  valueField: 'userId',
  typeAhead: false,
  hideLabel: true,
  disabled: false,
  hideTrigger:true,
  multiSelect:true,
  delimiter: ";",
  anchor: '100%',
  triggerAction: 'all',
  listeners: {
     change: function( comboField, newValue, oldValue, eOpts ){
       selectUserCallBack2(newValue,'UserBO_SelectComponentId',comboField,oldValue);
     },
     select:function(comboField,oldValue){
        testRec(comboField,oldValue)
     },
     keypress:function(comboField,e){
        disabledKeysOnKeyup(comboField,e)
     }
  },
  listConfig: {
     loadingText: 'Searching...',
     enableKeyEvents: true,
     emptyText: 'No matching posts found.'
  }, 
  pageSize: 10 
} 
```

谁能建议这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:47:27.877

keyup、keydown 和 keypressed 事件仅在 enableKeyEvents 设置为 true 时触发。默认设置为 false，因此您需要添加`enableKeyEvents:true`到组合框配置中。然后对 enter 和 tab 键进行特殊处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T13:34:45.020

你不需要听关键事件并进入它。你想要做的是设置`autoSelect`为假。默认情况下是真的。当设置为 false 时，用户必须在按 enter 或 tab 键选择它之前手动突出显示一个项目（除非 typeAhead 的值是 true），或者使用鼠标选择一个值。

[http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.form.field.ComboBox-cfg-autoSelect](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.form.field.ComboBox-cfg-autoSelect)

# php - 向表中插入数据 - 主键约束

> ID：10630670
> 
> 赞同：0
> 
> 时间：2012-05-17T06:06:05.537
> 
> 标签：php, mysql

我有一个像这样创建的数据库表

```
CREATE TABLE products(id INT,   
                      name varchar(32),   
                      PRIMARY KEY(id,name),   
                      quantity int,   
                      avail varchar(5) ); 
```

如果我在命令提示符下使用以下命令，则会正确插入该值：

```
INSERT INTO products(name,quantity,avail) VALUES('stuffed bear doll',100,'OF_ST'); 
```

虽然 id 是重复的

但是当我把它留在这样的函数中时

```
$query=sprintf("INSERT INTO products(name,quantity,avail) VALUES('%s',%d,'%s');",
                   $name,
                   $quan,
                   $avail);

mysql_query($query); 
```

然后根本没有插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:16:28.490

您需要在创建表语法中的 id 字段上设置 auto_increment。您可以编辑列以添加它。

此外，如果 $quan 无效，您的 SQL 语法将给您一个错误。在它周围加上引号：`VALUES('%s','%d','%s')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:21:34.533

您的查询没有问题，但我认为`name field is duplicate`. 由于您的表结构`id-name is primary`意味着两行不能具有相同的值`id`和`name`字段。一次，一个字段值可以相同，但不能两者都相同。并且在您的表中，`id`字段的值始终`0`如此，因此如果在字段的任何行值中`name`重复，它将不会插入该行。并且请`id`作为主要和自动增量，这样会更好。

谢谢

# java - 设备“Mobile Intel(R) 4 Series Express Chipset Family”(\\.\DISPLAY1) 初始化失败：

> ID：10630672
> 
> 赞同：0
> 
> 时间：2012-05-17T06:06:47.827
> 
> 标签：java, browser, embedded-resource, javafx-2, embedded-browser

我试过下面的程序在我的本地机器上执行..但它不起作用。

[http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm](http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm) 我还尝试了 JavaFx2.1 附带的示例程序 我尝试使用 jdk1.6u32 和 jdk7u4 运行程序。对于这两个版本，我都收到以下错误

```
Device "Mobile Intel(R) 4 Series Express Chipset Family" (\\.\DISPLAY1) initialization failed : 
WARNING: bad driver version detected, device disabled. Please update your driver to at least version 6.14.10.5303 
```

在上述错误程序正常工作后，但没有打开任何 URL/网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:36:25.520

它开始工作正常，我发现这是一个问题，因为我的 java 编译器和 java 运行时版本不匹配。

# java - Apache POI 设置单元格字体和字体颜色

> ID：10630677
> 
> 赞同：1
> 
> 时间：2012-05-17T06:07:26.470
> 
> 标签：java, apache-poi

我正在`xlsx`使用 Apache POI 的 XSSF 读取文件。当读取特定单元格的字体并在新单元格中应用该字体时，该字体应用于整个工作表而不是该特定单元格。我想要例如：

```
 column1 column2      column3 
row1    ARIAL   TIMES ROMAN  ARIAL

row2    TIMES ROMAN ARIAL   ARIAL   

row3     ARIAL   ARIAL   ARIAL 
```

我希望在原始文件中的每个单元格中使用相同的字体。

我的代码是：

```
public XSSFCellStyle setFontOnCell(XSSFCellStyle cellStyle, XSSFCell cell)
    {
        try {
            font = cell.getCellStyle().getFont();
            new_font.setFontName(font.getFontName());
            new_font.setBoldweight(font.getBoldweight());
            new_font.setFontHeight((short)font.getFontHeight());
            new_font.setFamily(font.getFamily());
            cellStyle.setFont(new_font);
            return cellStyle;
        } catch (Exception e) {
            //System.out.println(e.getMessage());
            return cellStyle;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:13:29.900

你`new_font`似乎是一个全局变量，你不断地改变它，然后将它注入到单元格中。它应该是本地的，`setFontOneCell()`以便每个单元格都有自己的`Font`实例，而不是所有单元格实际上都使用相同的对象，

# jquery-ui - jquery 中的 Tab Widget - Seaside- Pharo smalltalk

> ID：10630678
> 
> 赞同：2
> 
> 时间：2012-05-17T06:07:45.220
> 
> 标签：jquery-ui, smalltalk, pharo, seaside

使用加载了最新海滨版本的 Pharo Smalltalk 1.4 版图像，我有：

1.  在我的项目中加载了 JQDeploymentLibrary 和 JQUiDeploymentLibrary。
2.  使用 Seaside 的“javascript/jquery-ui”示例中的“Tab Widget”示例代码。

我没有显示 Tab 小部件，而是看到了一些项目符号文本，链接。有没有人遇到过类似的问题？有什么解决方案的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:02:11.343

您可能错过了添加 CSS 主题。`JQBaseTheme`将多个子类之一添加到应用程序的库中。

# android - OnSetContentView 无法在带有 admob 的 andengine 中工作

> ID：10630679
> 
> 赞同：2
> 
> 时间：2012-05-17T06:07:46.420
> 
> 标签：android, admob, andengine

我一直在尝试在我的 andengine 游戏中实现 admob。我使用以下代码设置视图。在我的`onSetContentView()`其他游戏中没有给我任何错误，但在我的其他游戏中给出了以下错误。

```
@Override
protected void onSetContentView() {
    //Creating the parent frame layout:
    final FrameLayout frameLayout = new FrameLayout(this);
    //frameLayout.
    //Creating its layout params, making it fill the screen.
    final FrameLayout.LayoutParams frameLayoutLayoutParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT,
                    FrameLayout.LayoutParams.FILL_PARENT);

   System.out.println("enter on setContentview");

   final AdView adView = new AdView(this, AdSize.BANNER, "a14fb36149e903c");
        adView.refreshDrawableState();
            adView.setVisibility(AdView.VISIBLE);

            try{

                  // Create an ad request.
                   AdRequest adRequest = new AdRequest();
                  // Set<String> s = "AdRequest.TEST_EMULATOR ";

                   adRequest.addTestDevice("E20D4AA1FE0CA3F46CD22145AD392B87");
                   // Fill out ad request.

                   // Add the AdView to the view hierarchy. The view will have no size
                   // until the ad is loaded.

                  // Start loading the ad in the background.
               adView.loadAd(adRequest);
            }catch(Exception e){
                System.out.println("this si the error"+e.toString());
            }
    //Creating the banner layout params. With this params, the ad will be placed in the bottom of the screen, middle horizontally.
    final FrameLayout.LayoutParams bannerViewLayoutParams =
            new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT,
                    FrameLayout.LayoutParams.WRAP_CONTENT,
                    Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL);

    //Creating AndEngine's view.
    this.mRenderSurfaceView = new RenderSurfaceView(this);
    mRenderSurfaceView.setRenderer(this.mEngine);

    System.out.println("enter on setContentview 2222");
    //createSurfaceViewLayoutParams is an AndEngine method for creating the params for its view.
    final android.widget.FrameLayout.LayoutParams surfaceViewLayoutParams =
            new FrameLayout.LayoutParams(super.createSurfaceViewLayoutParams());

    //Adding the views to the frame layout.
    frameLayout.addView(this.mRenderSurfaceView, surfaceViewLayoutParams);
   // frameLayout.addView(adView, bannerViewLayoutParams);

    System.out.println("enter on setContentview 2198613948632");
    //Setting content view
    this.setContentView(frameLayout, frameLayoutLayoutParams);

    System.out.println("enter on setContentview 33344");
} 
```

带有 onSetContentView 的代码我得到一个致命错误，如下所示：

```
05-16 11:56:42.421: E/AndroidRuntime(18552): java.lang.NullPointerException
05-16 11:56:42.421: E/AndroidRuntime(18552):    at org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:179)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:85)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2056
05-16 11:56:42.421: E/AndroidRuntime(18552):    at android.view.View.dispatchWindowFocusChanged(View.java:3788)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:658)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1930)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at android.os.Looper.loop(Looper.java:143)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at android.app.ActivityThread.main(ActivityThread.java:4701)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at java.lang.reflect.Method.invokeNative(Native Method)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at java.lang.reflect.Method.invoke(Method.java:521)05-16 11:56:42.421: E/AndroidRuntime(18552):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:859)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:617)
05-16 11:56:42.421: E/AndroidRuntime(18552):    at dalvik.system.NativeStart.main(Native Method) 
```

我使用 onSetContentView 的方式与 Jong 建议的方式完全相同。此外，我尝试调试，我意识到我的游戏中的第一个场景已经运行，但在进入第二个场景之前它崩溃了。我的第一个场景的代码如下

```
@Override
public Scene onLoadScene() {

     sceneGameSplash = new Scene();

    System.out.println("size of height and width is : "+this.getHeight + "   "+this.getWidth);

    final Sprite spriteGameSplash = new Sprite(0, 0,
            gameSplashScreenRegion);

    spriteGameSplash.setWidth(display.getWidth());

    spriteGameSplash.setHeight(display.getHeight());

    sceneGameSplash.attachChild(spriteGameSplash);

    sceneGameSplash.registerUpdateHandler(new TimerHandler(5f, true,
            new ITimerCallback() {

                @Override
                public void onTimePassed(final TimerHandler pTimerHandler) {
                    System.out.println("5");
                    sceneGameSplash.unregisterUpdateHandler(pTimerHandler);
                    sceneGameSplash.detachChildren();
                    sceneGameSplash.clearTouchAreas();
                    sceneManagerUnjumble.loadMain();

                }
            }));

    System.out.println("6");
    return sceneGameSplash;
} 
```

任何对为什么会有 nullPointerException 有任何想法的人

# google-drive-api - 文档的 ACL 提要

> ID：10630681
> 
> 赞同：1
> 
> 时间：2012-05-17T06:08:15.990
> 
> 标签：google-drive-api

由于没有 api 可以检索 Google Drive 中文档的 ACL 提要，因此我使用 Google Document Api 来完成它。我尝试了这里提到的协议方法[https://developers.google.com/google-apps/documents-list/#retrieving_the_acl_for_a_document_file_or_collection](https://developers.google.com/google-apps/documents-list/#retrieving_the_acl_for_a_document_file_or_collection)，但我收到错误**Invalid Request URI**即使我遵循上面链接中提到的相同方法使用正确的访问令牌...我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:07:44.010

您必须`resource_id`在下面的 URI 中替换为您要为其检索 ACL 的资源的 id：

```
GET https://docs.google.com/feeds/default/private/full/resource_id/acl 
```

如果您这样做但仍然无法正常工作，请向我们显示您正在使用的 URI。

# java - 以 16 为基数进行 pi 计算

> ID：10630683
> 
> 赞同：1
> 
> 时间：2012-05-17T06:08:19.527
> 
> 标签：java, hex, pi, digit

晚上。我有一个关于 Java 中 base-16 计算的问题。我正在寻找一种合理的算法来计算 pi 到 N 位数，并对允许的位数有一些限制（思考像 15-20 之类的东西）。最终这将只是以后计算器的一个功能。

我不是在寻找荒谬的精度水平，也不需要算法方面的帮助。我知道它有一个神奇的 API 方法，但我宁愿自己做。

公式：[Bailey-Borwein-Plouffe](http://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula)公式。据我了解，它以十六进制计算 pi。

那么，我的问题是什么？我不太擅长Java。我上过的课程（直到并包括数据结构）实际上只使用了我所知道的语言作为达到目的的手段，而没有关注任何特定于语言的内容。 **我想将 pi 计算为十六进制的第 n 位，然后将该值转换为字符串以进行显示。**

关于从哪里开始的任何建议？我在 Java 中编码的经验大约是 20 周，而我所坚持的似乎是 Java 特定的东西。

如果我在任何地方错了，一定要指出来。我是来学习的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:13:24.663

我将`BigDecimal`首先使用您当前的算法。当这令您满意时，您可以考虑替换 BigDecimal 提供的功能（假设您想编写自己的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:33:43.950

我不确定什么可以帮助你，但这是我的建议。由于您向我展示了一个公式，因此您可以使用 RECURSION 而不是使用 while 循环进行迭代。代码示例：

```
public static int series(int a, int b, int loopCount) {
    int sumTemp = a + b;
    b = sumTemp;

    loopCount--;
    if (loopCount > 0) {
        return series(a, b, loopCount);
    }
    else
    {
        return sumTemp;
    }
}

public static void main(String[] args) {
     int sum = series(5, 10, 3);
     System.out.println("Sum = " + sum);
} 
```

**笔记：**

*   请注意，这个简单公式的初始值是 5 和 10。函数系列在循环中对这两个值求和。
*   在我的系列函数中，新的总和存储在参数 b 中。这种技术是强加给我的，因为 Java 通过值而不是引用传递。
*   参数 loopCount 跟踪循环#。
*   最后，变量 sum 是返回值。

最后，使用 Math.pow 函数进行 16 次幂计算。数学课对你的学习非常有用。

祝你好运，

汤米奎

# c# - 如何在没有 NuGet 的情况下安装和设置 RESTSharp？

> ID：10630685
> 
> 赞同：10
> 
> 时间：2012-05-17T06:08:36.473
> 
> 标签：c#, .net, restsharp

我正在使用 Visual Studio C# 2010 Express 并且正在学习。RESTSharp 应该由 NuGet 安装，但 NuGet 不能与 Express 版本一起使用。我仍然可以手动安装和配置 RESTSharp，如何安装？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-13T11:26:04.187

[从https://github.com/restsharp/RestSharp/downloads](https://github.com/restsharp/RestSharp/downloads)获取 dll

并将其添加为您的项目的参考

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T06:16:10.697

NuGet Visual Studio 插件不能与 Express 一起使用，但您可以[从命令行安装 NuGet 包](http://blog.davidebbo.com/2011/01/installing-nuget-packages-directly-from.html)。您需要从[NuGet CodePlex 站点](http://nuget.codeplex.com/releases/view/58939)下载命令行引导程序。

安装后就可以使用了

```
nuget Install SomePackageName 
```

它会将包及其依赖项获取到本地磁盘。不过，AFAIK，您需要手动添加项目引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:16:31.753

您可以从 github 获取代码并进行编译

# git - 在主项目存储库下维护不同的存储库

> ID：10630686
> 
> 赞同：0
> 
> 时间：2012-05-17T06:08:43.753
> 
> 标签：git, version-control, perforce

我们进入了一个涉及许多开源库及其代码的项目。我们的应用程序使用所有这些库代码来构建 X 应用程序。当个别库更新时问题就出现了，我们必须支持这些更新的库，这导致大量手动复制最新代码并合并我们对更新库的先前版本所做的更改。

我们有自己的版本控制（perforce），但它的存储库只是为了对我们的更改以及我们使用的开源库的所有代码进行版本控制。

有没有一种方法可以通过 perforce 通过自己的版本控制系统（他们可能使用他们自己选择的 git、svn 等版本控制系统）更新各个库 .. 我的意思是我们给出一个同步命令在 perforce 上，它是否使用各自的版本控制工具在各个库上同步？

如果 perforce 无法做到这一点，是否还有其他工具可以做到这一点？哪一个是此类用例的首选工具？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:11:17.890

您可能想看看[chromium 项目](http://dev.chromium.org/developers/how-tos/get-the-code)是如何做到这一点的——它们有*数百*个第三方依赖项，以及一组本地开发的脚本来为它们维护单独的检出（当然，在固定的修订版中，来自他们自己的镜像）。主存储库不是强制的，但脚本在 git 和 svn 上都可以正常工作，因此它们也应该适用于 p4。

# amazon-s3 - 访问被拒绝的联合用户 Amazon S3

> ID：10630700
> 
> 赞同：2
> 
> 时间：2012-05-17T06:10:55.517
> 
> 标签：amazon-s3, amazon-iam

每当我尝试通过我的 .NET 应用程序访问 amazon s3 时，都会被拒绝访问。我有一个 IAM 用户，如果我使用他的凭据，它就可以正常工作。但是，如果我使用他的凭据创建联合用户，则生成的用户将无法访问 Amazon s3 中的存储桶。需要注意的一件事是，我没有在我的代码中为我的联合用户指定策略。我希望他拥有与 IAM 用户相同的访问级别。但是，如果我在代码中指定策略值，我可以访问和列出存储桶。任何指针？

```
 private static SessionAWSCredentials GetTemporaryFederatedCredentials(
                                string accessKeyId, string secretAccessKeyId)
        {
            var config = new AmazonSecurityTokenServiceConfig();
            var stsClient = 
                new AmazonSecurityTokenServiceClient(
                                             accessKeyId, secretAccessKeyId, config);
            var federationTokenRequest =
                                     new GetFederationTokenRequest();
            federationTokenRequest.Name = "User1";
//            federationTokenRequest.Policy =
//                @"{
//                              ""Statement"":
//                              [
//                                {
//                                  ""Action"":[""s3:ListAllMyBuckets""],
//                                  ""Effect"":""Allow"",
//                                  ""Resource"":""arn:aws:s3:::*""
//                                                }
//                                              ]
//                                            }";
            federationTokenRequest.DurationSeconds = 3600; 
         GetFederationTokenResponse federationTokenResponse = 
                         stsClient.GetFederationToken(federationTokenRequest);
            GetFederationTokenResult federationTokenResult = 
                             federationTokenResponse.GetFederationTokenResult;
            Credentials credentials = federationTokenResult.Credentials;

            var sessionCredentials =
                new SessionAWSCredentials(credentials.AccessKeyId,
                                          credentials.SecretAccessKey,
                                          credentials.SessionToken);
            return sessionCredentials;
        }

    }
} 
```

# c# - Windows 8 Metro 应用程序共享目标问题以将图像保存在磁盘 C#

> ID：10630701
> 
> 赞同：1
> 
> 时间：2012-05-17T06:11:00.927
> 
> 标签：c#, windows-8

我有一个问题，我在 Metro 应用程序中通过 URI 共享图像，而我的目标应用程序显示共享图像，但我想将该图像保存在磁盘的本地文件夹中。请帮我

这是我的分享源代码

```
void DataRequested(DataTransferManager sender, DataRequestedEventArgs e)
{
    e.Request.Data.Properties.Title = this.dataPackageTitle;
//    e.Request.Data.Properties.Description = this.dataPackageDescription;
    if (this.dataPackageThumbnail != null)
    {
        e.Request.Data.Properties.Thumbnail = this.dataPackageThumbnail;
// Share Image Through URI       
      e.Request.Data.SetUri(imageHolder.BaseUri); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:46:12.307

您可以通过 url 从互联网下载图像；但不是来自本地驱动器。您可以通过位图将图像从本地共享到本地文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:45:30.367

看看这个[样本](http://code.msdn.microsoft.com/Blob-Sample-0e35889e/sourcecode?fileId=43594&pathId=603010513)。它在 JavaScript 中，但技术应该是相同的。基本上，您调用 HttpClient（而不是本示例中的 XHR）来获取图像，然后使用 Windows.Storage.KnownFolders.picturesLibrary.createFileAsync 将其写出。

查看此[示例](http://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)了解如何使用 HttpClient 进行下载。

# android - 错误：在此行找到多个注释：

> ID：10630704
> 
> 赞同：1
> 
> 时间：2012-05-17T06:11:17.923
> 
> 标签：android, xml

在此行找到多个注释：-[辅助功能] 图像上缺少 contentDescription 属性

我的xml代码是：

```
 <?xml version="1.0" encoding="utf-8"?>
  <ImageView xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@+id/iv_Seelct_Image"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:src="@drawable/select_image"/>
  <GridView  
          android:id="@+id/gridview"
          android:layout_width="fill_parent" 
          android:layout_height="fill_parent"
          android:columnWidth="270dp"
          android:numColumns="auto_fit"
          android:verticalSpacing="10dp"
          android:horizontalSpacing="10dp"
          android:stretchMode="columnWidth"
          android:gravity="center"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:16:12.593

您需要将`android:contentDescription="@string/desc"`其作为属性添加到 ImageView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:17:50.080

您的 xml 文件必须具有像 LinearLayout 或 RelativeLayout 这样的根布局

```
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

<your imageview>
<your gridview>

</RelativeLayout> 
```

# wcf - 通过 Web 浏览器调用操作合同

> ID：10630707
> 
> 赞同：1
> 
> 时间：2012-05-17T06:11:33.867
> 
> 标签：wcf, url, browser, uritemplate, webget

由于我是 WCF 的新手，并且在 IIS 中的虚拟目录`Api`（网址类似于**[http://localhost/api/taskapi.svc](http://localhost/api/taskapi.svc)**）中配置了 WCF 服务端点，因此我正在寻找通过 Web 浏览器发出请求的方法，例如`http://localhost/api/taskapi.svc/GetCompleted`会响应JSON 列出了所有已完成的任务，因此这里的这两篇文章给了我一些答案

*   [通过浏览器调用 WCF 服务方法](https://stackoverflow.com/questions/802518/invoking-wcf-service-method-through-a-browser)

*   [如何在运行时通过 URL 使用 WCF Web 服务？](https://stackoverflow.com/questions/1193124/how-to-consume-wcf-web-service-through-url-at-run-time)

*   [WCF：使用带有 & 的 URL 中的参数调用服务](https://stackoverflow.com/questions/6408041/wcf-call-service-using-parameter-in-url-with)

好的，所以我将我的 OperationContract 更改为如下所示

```
 [OperationContract]
    [WebGet(UriTemplate = "/GetCompleted", ResponseFormat = WebMessageFormat.Json)]
    IList<Task> GetCompleted(); 
```

但`http://localhost/api/tasksapi.svc/GetCompleted`浏览器中的 url 仍然以`400 Bad Request`.

### 服务合约

```
[ServiceContract]
public interface ITaskContract
{

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "/task", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    TaskLibrary.Task CreateTask(TaskLibrary.Task myTask);

    [OperationContract]
    [WebInvoke(Method = "GET", UriTemplate = "/task", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    IList<TaskLibrary.Task> GetTasks();

    [OperationContract]
    [WebInvoke(Method = "DELETE", UriTemplate = "/task", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    bool DeleteTask(string taskId);

    [OperationContract]
    [WebInvoke(Method = "PUT", UriTemplate = "/task", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    bool UpdateTask(TaskLibrary.Task myTask);

    [OperationContract]
    [WebInvoke(Method = "GET", UriTemplate = "/task/{taskId}", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    IList<TaskLibrary.Task> GetById(string taskId);

    [OperationContract]
    [WebInvoke(UriTemplate = "/task/completed", ResponseFormat = WebMessageFormat.Json, Method = "GET", RequestFormat = WebMessageFormat.Json)]
    IList<TaskLibrary.Task> GetCompleted();

} 
```

### 服务配置

```
 <system.serviceModel>
    <services>
      <service behaviorConfiguration="TaskApi.ServiceBehavior" name="TaskService.TaskService">
        <endpoint address="" binding="wsHttpBinding" contract="TaskService.ITaskContract">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="TaskApi.ServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

### 参考指令

`<%@ ServiceHost Language="C#" Debug="true" Service="TaskService.TaskService" %>`

该服务是从作为 WCF 服务库输出的程序集中挑选的

### Url 重写以隐藏**svc**扩展

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <rewrite>
      <rules>
        <rule name="Svc Extension remove pattern">
          <match url="^([0-9a-zA-Z\-]+)/([0-9a-zA-Z\-\.\/\(\)]+)" />
          <action type="Rewrite" url="{R:1}.svc/{R:2}" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

*   我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:45:31.487

好的，您的绑定是 wsHttpBinding。您需要将其更改为 webHttpBinding（或添加另一个端点）。然后你需要在行为部分添加一个endpointBehavior，如下所示

```
 <endpointBehavior>
       <behavior name="rest">
           <webHttp/>
       </behavior>
   </endpointBehavior> 
```

此行为连接到将 Uris 映射到方法的功能。然后，您需要使用 behaviorConfiguration XML 属性从 webHttpBinding 端点引用此行为

# image - OpenCV：如何从网络摄像头获取原始 YUY2 图像？

> ID：10630710
> 
> 赞同：4
> 
> 时间：2012-05-17T06:11:50.963
> 
> 标签：image, opencv, webcam, yuv

您知道如何使用 OpenCV-DirectShow（无 VFW）从网络摄像头获取**原始 YUY2图像吗？**

[http://opencv.willowgarage.com/wiki/CameraCapture](http://opencv.willowgarage.com/wiki/CameraCapture) ：我使用示例成功获取 IPL 图像（英特尔处理库图像）。

使用代码中的函数 cvShowImage()，图像在屏幕上很漂亮。但我不想在屏幕上显示图像，也不想 IPL 格式，我只想要 YUYV 原始数据......

wiki 页面的第二部分将是我想要的，但 deviceSetupWithSubtype() 在 OpenCV 2.4 中似乎不再存在（甚至谷歌也不知道）。

编辑：我发现：它在页面上链接的 rar 文件中！Google 不会在 rar 文件中“看到”。这是链接：[http](http://opencv.willowgarage.com/wiki/CameraCapture?action=AttachFile&do=get&target=Camera+property+Settings.rar) ://opencv.willowgarage.com/wiki/CameraCapture?action=AttachFile&do=get&target=Camera+property+Settings.rar 。我要研究这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-13T19:11:22.377

以防其他人偶然发现：

ffmpeg 有一个很好的 Windows API，允许捕获原始 YUV 图像。无论是 CLI：

```
ffmpeg.exe -f dshow -i video="your-webcam" -vframes 1 test.yuv 
```

或他们的 c API：

```
AVFormatContext *camera = NULL;
  AVPacket packet;
  avdevice_register_all();
  AVInputFormat *inFrmt = av_find_input_format("dshow");
  int ret = avformat_open_input(&camera, "video=your-webcam", inFrmt, NULL);
  av_init_packet(&packet);

  while (int ret = av_read_frame(camera, &packet) >= 0) {
    // packet.data has raw image data
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T03:44:44.097

通常，opencv 使用 directshow 从 Windows 中的网络摄像头获取 RGB 帧。Opencv VideoCapture 类获取 CV_CAP_PROP_CONVERT_RGB 属性（布尔标志，指示是否应将图像转换为 RGB），但它不适用于我的所有网络摄像头。

[而不是编写 DirectShow 代码并制作您自己的示例抓取器和回调来获取这里](http://www.infognition.com/blog/2013/accessing_raw_video_in_directshow.html)描述的 YUY2 数据（他们已经制作了很棒的工具来简化 directshow 开发。）我修改[了 CameraDs](http://wiki.opencv.org.cn/index.php/%E4%BD%BF%E7%94%A8DirectShow%E9%87%87%E9%9B%86%E5%9B%BE%E5%83%8F)和（[setup Doc](http://blog.csdn.net/b5w2p0/article/details/8826016)）类（网页是中文的）获取 YUY2 数据。

在 CameraDs.cpp 中更改`mt.subtype = MEDIASUBTYPE_RGB24;`为`mt.subtype = MEDIASUBTYPE_YUY2;`（检查您的网络摄像头是否支持此）

并制作 2 通道 YUY2 图像而不是 RGB 3 通道。

```
m_pFrame = cvCreateImage(cvSize(m_nWidth, m_nHeight), IPL_DEPTH_8U, 2); 
```

并在外部获取 YUY2 数据并使用 opencv 接口将其更改为 RGB，例如：

```
{
               //query frame
               IplImage * pFrame = camera. QueryFrame();

               //change them to rgb
               Mat yuv (480, 640,CV_8UC2 ,pFrame-> imageData);
               Mat rgb (480, 640,CV_8UC3 );

               cvtColor(yuv ,rgb, CV_YUV2BGRA_YUY2);

               //show image
               //cvShowImage("camera", rgb);
               imshow("camera" ,rgb);

               if ( cvWaitKey(20 ) == 'q')
                      break;
        } 
```

# iphone - 将 UIView 导入 UIViewController

> ID：10630715
> 
> 赞同：0
> 
> 时间：2012-05-17T06:12:35.737
> 
> 标签：iphone, ios, ipad

我正在开发一个 iPad 绘图应用程序。我是否有一个 UIView 类，我将它导入到 UIView 控制器。但我收到`[self.view drawPic:image];`类似错误的错误：uiview 实例消息的接收器类型未声明具有选择器“drawPic”的方法。

请在下面找到我的完整代码：

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface signPage : UIViewController<UIImagePickerControllerDelegate>{ 

    }
@property (retain, nonatomic) IBOutlet UIImageView * myImg;

@end

#import "signPage.h"
#import "DrawView.h"

@implementation signPage
@synthesize myImg;

- (void)viewDidLoad {
    [super viewDidLoad];
}

- (IBAction)clear {
    [self.view cancelDrawing];
}

- (IBAction)saveDrawing {
    UIGraphicsBeginImageContext(self.view.bounds.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *finishedPic = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    UIImageWriteToSavedPhotosAlbum(finishedPic, self, @selector(exitProg:didFinishSavingWithError:contextInfo:), nil);
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo {

    [self dismissModalViewControllerAnimated:YES];

    [self.view drawPic:image];

}   

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {

    [self dismissModalViewControllerAnimated:YES];

}

-(void)exitProg:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo {

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Success" message:@"Your picture has been saved" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
    [alertView show];

}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

@end

@interface DrawView : UIView {

    UIImage *myPic;
    NSMutableArray *myDrawing;
}

@end

#import "DrawView.h"

@implementation DrawView

-(void)drawPic:(UIImage *)thisPic {

    myPic = thisPic;

    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect {

    float newHeight;
    float newWidth;

    if (!myDrawing) {
        myDrawing = [[NSMutableArray alloc] initWithCapacity:0];
    }
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    if (myPic != NULL) {
        float ratio = myPic.size.height/151;
        if (myPic.size.width/302 > ratio) {
            ratio = myPic.size.width/302;
        }

        newHeight = myPic.size.height/ratio;
        newWidth = myPic.size.width/ratio;

        [myPic drawInRect:CGRectMake(109,552,newWidth,newHeight)];
    }
    if ([myDrawing count] > 0) {
        CGContextSetLineWidth(ctx, 5);

        for (int i = 0 ; i < [myDrawing count] ; i++) {
            NSArray *thisArray = [myDrawing objectAtIndex:i];

            if ([thisArray count] > 2) {
                float thisX = [[thisArray objectAtIndex:0] floatValue];
                float thisY = [[thisArray objectAtIndex:1] floatValue];

                CGContextBeginPath(ctx);
                CGContextMoveToPoint(ctx, thisX, thisY);

                for (int j = 2; j < [thisArray count] ; j+=2) {
                    thisX = [[thisArray objectAtIndex:j] floatValue];
                    thisY = [[thisArray objectAtIndex:j+1] floatValue];

                    CGContextAddLineToPoint(ctx, thisX,thisY);
                }
                CGContextStrokePath(ctx);
            }
        }
    }
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    [myDrawing addObject:[[NSMutableArray alloc] initWithCapacity:4]];

    CGPoint curPoint = [[touches anyObject] locationInView:self];
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]];
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]];
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPoint curPoint = [[touches anyObject] locationInView:self];
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]];
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]];

    [self setNeedsDisplay];
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPoint curPoint = [[touches anyObject] locationInView:self];
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.x]];
    [[myDrawing lastObject] addObject:[NSNumber numberWithFloat:curPoint.y]];

    [self setNeedsDisplay];

}

-(void)cancelDrawing {

    [myDrawing removeAllObjects];
    [self setNeedsDisplay];

}

@end 
```

请建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:22:12.293

你`drawPic:`只为你的`DrawView`班级定义了，你似乎没有在`UIViewController`. 如果您希望每个`UIView`类都可以访问该函数，则应将其定义`DrawPic`为[category](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:15:17.883

将您的属性名称从 view 更改为 mView 或其他名称

```
@class DrawView;
@interface signPage : UIViewController<UIImagePickerControllerDelegate>{ 

    }
@property (retain, nonatomic) IBOutlet UIImageView * myImg;

@property (retain, nonatomic)DrawView * mView;

@end 
```

在实施中：

```
@synthesize mView = _mView; 
```

现在调用：

```
[self.mView drawRect]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:08:57.677

在 SignPage.xib IBOutlet 中添加一个 UIView（类类型 DrawView），将其与 .h 文件中的 drawView 链接

```
@interface signPage : UIViewController<UIImagePickerControllerDelegate>{

    IBOutlet    UIView      *drawView;
}

@property (retain, nonatomic) IBOutlet UIImageView * myImg;

@end 
```

您需要在 signPage.m 中调用的地方访问 DrawView 方法，如下所示：

```
DrawView*dView = (DrawView*)drawView;
[dView drawPic:image]; 
```

顺便说一句：signPage 类应该是 SignPage（首字母大写）

# javascript - 如何在智能移动工作室中创建屏幕外图像？

> ID：10630716
> 
> 赞同：5
> 
> 时间：2012-05-17T06:12:50.053
> 
> 标签：javascript, smart-mobile-studio

处理图形时，如何在 smart mobile studio 中创建屏幕外图像？我想绘画以创建图像，绘画到画布上 - 然后将该图形复制到游戏项目中的显示器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:00:44.100

[http://op4js.optimalesystemer.no/2012/01/10/how-do-i-move-graphics-from-the-canvas-to-an-image/](http://op4js.optimalesystemer.no/2012/01/10/how-do-i-move-graphics-from-the-canvas-to-an-image/)

简而言之：

```
var image  := TW3Image.Create(self);
//create temp graphic and canvas to draw on
var graph  := TW3GraphicContext.Create(NIL);
graph.Allocate(image.Width, image.Height);
var canvas := TW3Canvas.Create(graph);
// Draw some text on the canvas
canvas.font:='10pt verdana';
canvas.FillStyle:='rgb(255,255,255)';
canvas.FillTextF('This was generated on a canvas!',10,20,MAXINT);
//You can load it in as a picture
image.LoadFromUrl(canvas.toDataUrl('')); 
```

# php - 如何从 PayPal 获取支付 API 密钥以进行自适应支付

> ID：10630721
> 
> 赞同：1
> 
> 时间：2012-05-17T06:13:06.683
> 
> 标签：php, cakephp, paypal, paypal-adaptive-payments

我束手无策，试图完成这项工作，但无法理解。我必须在使用 cakephp 框架创建的 webapp 中使用自适应支付。我有 API 凭据，例如 API 用户名、密码和签名。但我面临的主要问题是如何调用支付 API 来获取 API 密钥，这是完成这项工作所需的第一件事。我是新手，所以我对此知之甚少，在谷歌大量挖掘之后，我问了这个问题。有人可以提供使用自适应付款的步骤吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:21:08.377

您只需执行三个步骤：

1-您向 PayPal 发送 PayRequest 消息

> {"returnUrl":"http://example.com/returnURL.htm", \"requestEnvelope":{"errorLanguage":"en_US"},"currencyCode":"USD", \"receiverList":{"receiver ":[{"email":"david@example.com", \"amount":"10.00",}]},"cancelUrl":"http://example.com/cancelURL.htm",\"actionType “：“支付”}

2-您收到带有支付密钥的响应。

> {"responseEnvelope":\ {"timestamp":"2009-10-06T14:30:39.383-07:00","ack":"Success",\"correlationId":"cfe8f8783f1d3","build":"DEV "},\ "payKey":"AP-17266198048308436","paymentExecStatus":"已创建"}

3- 您必须将发件人的浏览器重定向到 PayPal 以批准付款。

这将是第 1 步的示例代码（它适用于我的本地服务器）：

```
<?php

//turn php errors on
ini_set("track_errors", true);

//set PayPal Endpoint to sandbox
$url = trim("https://svcs.sandbox.paypal.com/AdaptivePayments/Pay");

$api_appid = 'APP-80W284485P519543T';   // para sandbox

//PayPal API Credentials
$API_UserName = "sbapi_1287090601_biz_api1.paypal.com"; //TODO
$API_Password = "1287090610"; //TODO
$API_Signature = "ANFgtzcGWolmjcm5vfrf07xVQ6B9AsoDvVryVxEQqezY85hChCfdBMvY"; //TODO
$receiver_email = "fake@email.com"; //TODO
$amount = 25; //TODO

//Default App ID for Sandbox    
$API_AppID = "APP-80W284485P519543T";

$API_RequestFormat = "NV";
$API_ResponseFormat = "NV";

//Create request payload with minimum required parameters
$bodyparams = array (   "requestEnvelope.errorLanguage" => "en_US",
                  "actionType" => "PAY",
                  "cancelUrl" => "http://cancelUrl",
                  "returnUrl" => "http://returnUrl",
                  "currencyCode" => "EUR",
                  "receiverList.receiver.email" => $receiver_email,
                  "receiverList.receiver.amount" => $amount
    );

// convert payload array into url encoded query string
$body_data = http_build_query($bodyparams, "", chr(38));

try
{

//create request and add headers
$params = array("http" => array(
    "method" => "POST",                                                 
    "content" => $body_data,                                             
    "header" =>  "X-PAYPAL-SECURITY-USERID: " . $API_UserName . "\r\n" .
                 "X-PAYPAL-SECURITY-SIGNATURE: " . $API_Signature . "\r\n" .
                 "X-PAYPAL-SECURITY-PASSWORD: " . $API_Password . "\r\n" .
                 "X-PAYPAL-APPLICATION-ID: " . $API_AppID . "\r\n" .
                 "X-PAYPAL-REQUEST-DATA-FORMAT: " . $API_RequestFormat . "\r\n" .
                 "X-PAYPAL-RESPONSE-DATA-FORMAT: " . $API_ResponseFormat . "\r\n"
));

//create stream context
 $ctx = stream_context_create($params);

//open the stream and send request
 $fp = @fopen($url, "r", false, $ctx);

//get response
 $response = stream_get_contents($fp);

//check to see if stream is open
 if ($response === false) {
    throw new Exception("php error message = " . "$php_errormsg");
 }

//close the stream
 fclose($fp);

//parse the ap key from the response

$keyArray = explode("&", $response);

foreach ($keyArray as $rVal){
    list($qKey, $qVal) = explode ("=", $rVal);
        $kArray[$qKey] = $qVal;
}

//print the response to screen for testing purposes
If ( $kArray["responseEnvelope.ack"] == "Success") {

     foreach ($kArray as $key =>$value){
    echo $key . ": " .$value . "<br/>";
}
 }
else {
    echo 'ERROR Code: ' .  $kArray["error(0).errorId"] . " <br/>";
  echo 'ERROR Message: ' .  urldecode($kArray["error(0).message"]) . " <br/>";
}

}

catch(Exception $e) {
echo "Message: ||" .$e->getMessage()."||";
}

?> 
```

你在这里有很多例子：[https ://www.x.com/developers/paypal/documentation-tools/paypal-code-samples](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples)

# opengl - 用定向光源计算反射矢量

> ID：10630726
> 
> 赞同：1
> 
> 时间：2012-05-17T06:13:51.207
> 
> 标签：opengl, glsl, phong

我正在使用一种简单形式的 Phong 着色模型，其中场景由在方向 -y 上照射的定向光照亮，单色光强度为 1。视点无限远，沿着向量给定的方向看（- 1, 0, -1)。

在这种情况下，阴影方程由下式给出

```
I = k_d*L(N dot L)+k_s*L(R dot V)^n_s 
```

哪里`L`是定向光源，`kd`，`ks`两者都是`0.5`和`n_s = 50`

在这种情况下，我该如何计算`R`向量？

我很困惑，因为为了计算有限向量，我们需要有限坐标。在定向光的情况下，它在 -y 方向上无限远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:27:08.770

这些方程使用法线向量。所以在你的情况下，当你使用定向光时，它只是意味着 L 是常数并且等于 [x=0, y=1, z=0] （或 [0, -1, 0]，我不记得了，你应该检查你的方程 L 是指向该点还是远离该点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:50:18.920

反射向量可以通过使用`reflect`GLSL 中的函数来计算。

```
vec3 toEye = normalize(vec3(0.0) - vVaryingPos);    
vec3 lightRef = normalize(reflect(-light, normal)); 
float spec = pow(dot(lightRef, toEye), 64.0f);  
specularColor = vec3(1.0)*max(spec, 0.0); 
```

计算是在眼睛空间中完成的......所以 eyePos 在 vec3(0.0)

# android - ICS 中的 Widevine DRM

> ID：10630727
> 
> 赞同：1
> 
> 时间：2012-05-17T06:13:51.650
> 
> 标签：android, drm

谁能告诉我在 ICS 中有widevine 支持。ICS 中是否有任何与widevine 相关的代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T11:22:29.940

查看使用内置 Widevine 支持可能遇到的问题：[Android：DrmManager 服务器死机](https://stackoverflow.com/questions/18104050/android-drmmanager-server-died/18312568#18312568)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T14:39:13.540

是的，Widevine 支持作为插件（Widevine DRM 插件）集成到 ICS 中，该插件建立在[Android DRM 框架](http://source.android.com/devices/drm.html)之上，该框架在 Android 3.0 及更高版本中。

我从他们的网站引用：

> 为了在 Android 设备上提供该数字内容并确保在所有设备上至少有一个一致的 DRM 可用，Google 在兼容的 Android 设备上免费提供 Widevine DRM。在 Android 3.0 及更高版本的平台上，Widevine DRM 插件与 Android DRM 框架集成，并使用硬件支持的保护来保护电影内容和用户凭据。

[您可以在此处](http://developer.android.com/reference/android/drm/package-summary.html)找到有关 Android DRM 框架的更多信息。

# android - 我怎么知道按钮显示在 RemoteViews 中？

> ID：10630728
> 
> 赞同：0
> 
> 时间：2012-05-17T06:13:54.150
> 
> 标签：android, show, visible

我必须测试我的广播课女巫有一个远程视图。我想检查远程视图天气中的按钮是否显示。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:18:03.713

我得到了这样的看法。希望有所帮助。

```
final LayoutInflater inflater = LayoutInflater.from(mContext); 
ViewGroup view = (ViewGroup) inflater.inflate( R.layout.widget, null); 
View v = view .findViewById(R.id.text); 

assertFalse(v.isShown()); 
```

* * *

# javascript - 如何更改面板内锚标记的样式属性？

> ID：10630729
> 
> 赞同：0
> 
> 时间：2012-05-17T06:13:56.160
> 
> 标签：javascript, css, extjs, panel, anchor

我在面板中添加了一个锚标记为

```
formListPanel.add({
        xtype: 'component',
        autoEl: {
            tag: 'a',
            href: 'javascript: _addTab(\'' + appName + '\', \''+ formName + '\')',
            html: formName,
            style: 'position:absolute;left:'+left+';top:'+top
        }
    }) 
```

我通过更改*left*和*top*变量添加了许多这样的标签。

现在我想改变每个标签的样式。

我用了

```
formListPanel.items.each(function(item){
        item.autoEl.style = 'position:absolute;left:'+left+';top:'+top;
    }) 
```

但我认为我们不能只分配价值并期望它得到反映。请告诉我如何更改样式属性的值。我也没有找到任何*setStyle*功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:31:57.360

autoEl 仅用于创建。

```
item.el.dom.style = 'position:absolute;left:'+left+';top:'+top; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:18:57.913

`item.el.applyStyles('position:absolute;left:'+left+';top:'+top);`

这工作正常

# sql - 是否有更简洁的方法来实现具有以下要求的多租户数据库？

> ID：10630733
> 
> 赞同：2
> 
> 时间：2012-05-17T06:14:20.943
> 
> 标签：sql, database-design, multi-tenant

我已经与 Salesforce.com 合作了几年，为了进行心理锻炼/挑战，我试图想出一个类似的解决方案来处理他们的“数据库”（是的，我知道他们并没有真正使用表格和视图，但元数据）。事实证明，这比最初预期的更具挑战性。

请记住，我并不是要重新发明 SFDC。我只是想探索多租户实现的解决方案。

要求

1.  必须能够处理多个客户/租户，而不会将客户特定数据暴露给其他客户，并且不使用客户特定数据库。
2.  所有客户都必须具有对一组标准表格的标准化访问权限（即 Select * from Account 返回与请求客户关联的所有帐户）
3.  所有客户都必须能够将自定义字段添加到所有标准表。
4.  所有客户都必须能够添加自定义表格。
5.  任何客户的自定义字段必须只对该客户可见，即使“添加”到标准表中也是如此。
6.  任何客户的自定义表格只能对该客户可见。
7.  理想情况下，此解决方案不会特定于一个 RDBMS。（不能依赖 PostgreSQL 的 search_path）

我的解决方案

1.  创建多模式数据库设计，其中标准表存储在“主”模式 ( `Primary.TrueAccounts`) 中。
2.  为每个客户创建一个带有基表的单独模式，以保存将它们链接回`Primary.TrueAccounts`( `Cust1.AccountCustomFields`) 的 FK。此表将添加任何自定义字段。
3.  客户的自定义表只会添加到他们的架构中。
4.  对于每个标准表，在客户模式中创建一个视图，将标准列与该客户的自定义列 ( `CREATE VIEW Cust1.Accounts AS SELECT t1.field1, t1.field2, t2.* FROM Primary.TrueAccounts AS t1 LEFT JOIN Cust1.AccountCustomFields AS t2 ON t1.id = tw.Accountid WHERE t1.CustomerId = 1`)

我已经在 MySQL 工作台中模拟了这个基本解决方案，所以我知道它至少是可能的。

我的终极问题是“我是怎么做到的？”。是否有更好/标准/不那么难看/更有效的方式来满足上述要求？

# javascript - 在单个 HTML 页面中绘制多个 HTML Canvas 元素

> ID：10630735
> 
> 赞同：1
> 
> 时间：2012-05-17T06:14:49.540
> 
> 标签：javascript, html, canvas

我有一个 html 页面，我需要在其中添加超过 1 个画布元素并将其加载到页面加载中。

```
function draw()
{
var c=document.getElementById("myCanvas");
var padding = 20;
var ctx=c.getContext("2d");
var grd=ctx.createLinearGradient(0,0,175,50);
grd.addColorStop(0,"#E05D1B");
grd.addColorStop(1,"#00FF00");
ctx.fillStyle=grd;
ctx.fillRect(0,0,275,50);
}

<canvas id="myCanvas" width="250" height="8" style="margin-bottom:10px;margin-left:10px;">
<img src="images\gradient1.png" style="margin-bottom:10px;margin-left:10px;"/>
</canvas> 
```

我正在添加这样具有不同 id 的代码，但我需要重新编码 javascript；我怎样才能减少它？

```
<canvas id="myCanvas1" width="250" height="8" style="margin-bottom:10px;margin-left:10px;"> <img src="images\gradient1.png" style="margin-bottom:10px;margin-left:10px;"/> </canvas> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T08:27:39.347

您可以将单独的画布元素的上下文作为参数传递给您的绘图函数（[小提琴](http://jsfiddle.net/GhXr4/1/)）：

```
function draw(ctx)
{
    var grd=ctx.createLinearGradient(0,0,175,50);
    grd.addColorStop(0,"#E05D1B");
    grd.addColorStop(1,"#00FF00");
    ctx.fillStyle=grd;
    ctx.fillRect(0,0,275,50);
}

draw(document.getElementById("canvas_1").getContext("2d"));
draw(document.getElementById("canvas_2").getContext("2d")); 
```

[或者，根据您拥有的画布元素数量，在循环（小提琴](http://jsfiddle.net/GhXr4/2/)）上调用您的绘图函数可能更有效：

```
function draw(ctx)
{
    var grd=ctx.createLinearGradient(0,0,175,50);
    grd.addColorStop(0,"#E05D1B");
    grd.addColorStop(1,"#00FF00");
    ctx.fillStyle=grd;
    ctx.fillRect(0,0,275,50);
}

var i = 1;
while (document.getElementById("canvas_" + i)) {
   draw(document.getElementById("canvas_" + i).getContext("2d"));
   i ++;       
} 
```

# python - 没有名为 Image tk 的模块

> ID：10630736
> 
> 赞同：30
> 
> 时间：2012-05-17T06:14:51.500
> 
> 标签：python

我是 python 新手，任何人都可以帮忙

```
D:\python\sub>python app.py
Traceback (most recent call last):
  File "app.py", line 2, in <module>
    import ImageTk
ImportError: No module named ImageTk 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-01-24T20:47:36.627

这表示 python 安装在非标准位置，因此操作系统无法在标准位置找到 ImageTk。您可以在标准位置重新安装 Python，具体位置取决于您使用的操作系统和安装程序，或者将此位置附加到 sys.path。我正在使用 Ubuntu 13.04，我只需使用以下终端安装 ImageTk 包：

```
sudo apt-get install python-imaging-tk 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-15T03:31:56.160

我不得不单独导入 PIL.ImageTk 模块。代码行

```
 import PIL 
```

没有导入 PIL.ImageTk 模块，我不得不另外使用

```
 from PIL import ImageTk 
```

然后它在 Python 2.7 的 Enthought Canopy 1.0 发行版中运行良好。

这个 redhat 错误解决方案建议需要该解决方案：[https ://bugzilla.redhat.com/show_bug.cgi?id=247171](https://bugzilla.redhat.com/show_bug.cgi?id=247171)

这也可以通过`import PIL.ImageTk`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-17T06:26:06.227

您使用的代码应该与正常的 python 安装分开安装，实际上来自 PIL libray（Python Imaging Library），它是一个外部库，一个附加组件。

请注意，PIL 库不适用于 python 3.0 及更高版本，但仍仅适用于 python 2.x 系列，因此如果您安装了 python 3.x，则应首先安​​装 python 2.x，然后下载并安装相应的 PIL 库。

这里是[PIL](http://www.pythonware.com/products/pil/)库的链接，你可以从这里下载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T06:18:13.153

您需要确保已安装 ImageTK 模块。它是 Python Imaging Library (PIL) 的一部分，可在[此处找到](http://www.pythonware.com/products/pil/)

我还建议您阅读有关[Modules](http://docs.python.org/tutorial/modules.html)的官方 Python 教程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-09T14:11:57.577

对于 windows（使用 Anaconda 和 Python 3.x），这里提出了解决方案： [Pillow installation for python 3.x [and Anaconda]](https://stackoverflow.com/questions/7407185/pil-for-python-3-2-on-windows-or-alternatives)

下载 whl 文件后用 pip 安装 Pillow

# java - 如何停止通过实现可运行接口创建的线程？

> ID：10630737
> 
> 赞同：68
> 
> 时间：2012-05-17T06:14:51.507
> 
> 标签：java, multithreading, thread-safety

我通过实现可运行接口创建了类，然后在我项目的其他一些类中创建了许多线程（近 10 个）。
如何停止其中一些线程？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-17T06:22:57.913

最*简单*的方法是`interrupt()`它，这将导致`Thread.currentThread().isInterrupted()`return ，并且在线程正在*等待*的某些情况下`true`也可能抛出一个，例如，等。`InterruptedException`*`Thread.sleep()``otherThread.join()``object.wait()`*

 *在`run()`方法内部，您需要捕获该异常和/或定期检查该`Thread.currentThread().isInterrupted()`值并执行某些操作（例如，突破）。

注意：虽然`Thread.interrupted()`看起来与 相同，但它有一个讨厌的`isInterrupted()`副作用：调用会`interrupted()` **清除**`interrupted`标志，而调用`isInterrupted()`不会。

其他非中断方法涉及使用`volatile`正在运行的线程监视的“停止”() 标志。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-17T12:23:24.590

> 如何停止通过实现可运行接口创建的线程？

有很多方法可以停止线程，但它们都需要特定的代码来执行此操作。停止线程的典型方法是拥有一个`volatile boolean shutdown`线程经常检查的字段：

```
 // set this to true to stop the thread
  volatile boolean shutdown = false;
  ...
  public void run() {
      while (!shutdown) {
          // continue processing
      }
  } 
```

您还可以中断导致`sleep()`,`wait()`和其他一些方法抛出的线程`InterruptedException`。您还应该使用以下内容测试线程中断标志：

```
 public void run() {
      while (!Thread.currentThread().isInterrupted()) {
          // continue processing
          try {
              Thread.sleep(1000);
          } catch (InterruptedException e) {
              // good practice
              Thread.currentThread().interrupt();
              return;
          }
      }
  } 
```

请注意，中断线程*不一定*`interrupt()`会立即引发异常。只有当你在一个可中断的方法中时才会被抛出。*`InterruptedException`*

 *如果你想为`shutdown()`你的类添加一个实现的方法`Runnable`，你应该定义你自己的类，如：

```
public class MyRunnable implements Runnable {
    private volatile boolean shutdown;
    public void run() {
        while (!shutdown) {
            ...
        }
    }
    public void shutdown() {
        shutdown = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-17T06:36:02.930

*在使用中途停止*线程`Thread.stop()`不是一个好习惯。更合适的方式是让线程以编程方式返回。让 Runnable 对象在方法中使用共享变量`run()`。每当您希望线程停止时，将该变量用作标志。

编辑：示例代码

```
class MyThread implements Runnable{

    private Boolean stop = false;

    public void run(){

        while(!stop){

            //some business logic
        }
    }
    public Boolean getStop() {
        return stop;
    }

    public void setStop(Boolean stop) {
        this.stop = stop;
    }       
}

public class TestStop {

    public static void main(String[] args){

        MyThread myThread = new MyThread();
        Thread th = new Thread(myThread);
        th.start();

        //Some logic goes there to decide whether to 
        //stop the thread or not. 

        //This will compell the thread to stop
        myThread.setStop(true);
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-17T06:23:02.280

如果你使用`ThreadPoolExecutor`，并且你使用[submit()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/AbstractExecutorService.html#submit%28java.lang.Runnable%29)方法，它会给你一个`Future`回报。您可以在返回的 Future 上调用[cancel()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)来停止您的`Runnable`任务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T06:21:01.707

不建议中途停止（杀死）线程。API 实际上已被弃用。

但是，您可以在此处获取更多详细信息，包括解决方法：[How do you kill a Thread in Java?](https://stackoverflow.com/questions/671049/how-do-you-kill-a-thread-in-java)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-01-04T06:49:03.433

> **Thread.currentThread().isInterrupted() 运行良好。但这段代码只是暂停计时器。**
> 
> **此代码是停止并重置线程计时器。** **h1 是处理程序名称。** 此代码添加在您的按钮单击侦听器中。w_h =分钟 w_m =毫秒 i=计数器

```
 i=0;
            w_h = 0;
            w_m = 0;

            textView.setText(String.format("%02d", w_h) + ":" + String.format("%02d", w_m));
                        hl.removeCallbacksAndMessages(null);
                        Thread.currentThread().isInterrupted();

                        }

                    });

                }` 
```**

# java - 如何使用 Font 类在 Java 中设置 String 的字体大小、样式？

> ID：10630738
> 
> 赞同：8
> 
> 时间：2012-05-17T06:14:53.270
> 
> 标签：java, fonts

假设我有一个字符串“Hello World”。我想将此字符串的样式更改为 BOLD 字体，并将所有字符的大小设置为 12 到 18 [pt]。之后我想在 a`JLabel`和中使用这个字符串`JButton`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-17T06:20:04.797

`Font myFont = new Font("Serif", Font.BOLD, 12);`，然后在您的组件上使用 setFont 方法，例如

```
JButton b = new JButton("Hello World");
b.setFont(myFont); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-17T06:16:51.687

看这里[http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#deriveFont%28float%29](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#deriveFont%28float%29)

JComponent 有一个 setFont() 方法。您将在那里控制字体，而不是在字符串上。

如

```
JButton b = new JButton();
b.setFont(b.getFont().deriveFont(18.0f)); 
```

# php - PHP：未定义的变量

> ID：10630743
> 
> 赞同：1
> 
> 时间：2012-05-17T06:15:19.167
> 
> 标签：php, class, variables, scope

我有下面的代码。出于某种原因，当我运行此代码时，它说变量 rsLinks 未定义。但是很明显，您可以看到它是在构造函数中定义的。你能告诉我我做错了什么吗？

```
 require_once "..\Models\Links.php";

class Navigator
{
    public $rsLinks;

    public function __construct() 
    { 
        $rsLinks = new rsLinks();
    }

    public function getLinks()
    {
        $links = $rsLinks;
    }
}

$navigator = new Navigator();
$navigator->getLinks(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T06:17:15.237

改为使用`$this->rsLinks;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:21:43.720

```
public function getLinks()
{
    //$links = $rsLinks;
    $links = $this->rsLinks;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:17:54.277

`$rsLinks`是具有函数作用域的常规局部变量。
要访问*对象属性*，请使用`$this->rsLinks`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:19:32.140

PHP 不是 Java。您需要使用 $this。

```
$this->rsLink 
```

在这两种情况下。

# c# - 为什么无法正确计算 Amazon S3 授权

> ID：10630745
> 
> 赞同：2
> 
> 时间：2012-05-17T06:15:27.293
> 
> 标签：c#, amazon-s3, amazon-web-services, hmacsha1

我在[这里关注官方的 Amazon S3 REST API 文档，](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/RESTAuthentication.html#RESTAuthenticationExamples)并且在计算它们在示例中显示的相同授权值时遇到问题。他们在第一个示例中显示的 base64 HMAC-SHA1 哈希是：

```
xXjDGYUmKxnwqr5KXNPGldn5LbA= 
```

但我不断提出：

```
bWq2s1WEIj+Ydj0vQ697zp+IXMU= 
```

我在这里扯头发。我可能做错了什么？

从他们的第一个例子：

```
static string TestS3(string key, string request) 
{
  var hash = new HMACSHA1(Encoding.UTF8.GetBytes(key));
  var data = hash.ComputeHash(Encoding.UTF8.GetBytes(request));
  return Convert.ToBase64String(data);
}

static void Main(string[] args)
{
  string key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY";
  string request = "GET\n\n\nTue, 27 Mar 2007 19:36:42 +0000\n/johnsmith/photos/puppy.jpg";         
  Console.Write(TestS3(key, request));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:22:47.140

好的，我发现了问题。示例中使用的键[是错误](https://forums.aws.amazon.com/thread.jspa?messageID=331348&#331348)的。

# android - 将 *.lm 转换为 *.dmp 文件以构建语音识别的语言模型

> ID：10630747
> 
> 赞同：2
> 
> 时间：2012-05-17T06:15:34.217
> 
> 标签：android, speech-recognition

执行命令时出现以下给定错误`sudo sphinx_lm_convert -i 9055.lm -o 9055.dmp`。

```
sphinx_lm_convert: error while loading shared libraries: libsphinxbase.so.1: cannot open shared object file: No such file or directory 
```

我不明白原因。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:43:31.230

此错误表示系统无法在安装位置找到共享库。很可能您使用默认前缀 /usr/local/lib 安装它，该前缀未包含在库搜索路径中。您可以通过以下方式修复它：

*   设置 LD_LIBRARY_PATH 环境变量指向安装 sphinxbase 的位置（通常是 /usr/local/lib）
*   修改 /etc/ld.so.conf 以包含 /usr/local/lib
*   使用 /usr 前缀而不是 /usr/local/lib 编译和安装 sphinxbase

要了解有关共享库和系统范围配置的更多信息，请阅读动态库：

[http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)

# c# - DirectorySearcher.FindAll() 有时有效，有时无效

> ID：10630748
> 
> 赞同：1
> 
> 时间：2012-05-17T06:15:47.443
> 
> 标签：c#, active-directory, directoryservices

我正在尝试从 Active Directory 获取用户列表。基本搜索过滤器是：

```
objectCategory=person  
objectClass=user  
name=*'username'* 
```

这是代码：

```
public static List<User> GetByUserName(string userName)
{
    DirectorySearcher ds = new DirectorySearcher();
    List<User> userList = new List<User>();
    try
    {
        ds.SearchRoot = new DirectoryEntry("LDAP://domain","user_name", "password");
        ds.Filter = "(|(&(objectCategory=person)(objectClass=user)(name=*" + userName + "*)))";
        ds.PropertyNamesOnly = true;
        ds.PropertiesToLoad.Add("samaccountname");
        ds.PropertiesToLoad.Add("name");
        ds.PropertiesToLoad.Add("mail");
        ds.Sort = new SortOption("name", SortDirection.Ascending);    
        foreach (SearchResult sr in ds.FindAll())
        {
            DirectoryEntry de = sr.GetDirectoryEntry();
            User newUser = new User();
            newUser.Name = de.Name.Substring(3);
            newUser.AccountName = (string)de.Properties["samaccountname"].Value ?? " <Undefined>";
            newUser.EmailAddress = (string)de.Properties["mail"].Value ?? "<Undefined>";
            userList.Add(newUser);
        }
    }
    catch (Exception ex)
    {
        throw new Exception("There was a problem search the Active Directory: " + ex.Message);
    }   
    return userList;
} 
```

问题是，有时我得到结果，但有时不是相同的用户名。这很奇怪。
当它工作时，我在 10-15 秒内得到结果。
但有时它正在搜索 120 秒，然后我收到超时。或者更早，如果我设置 ServerTimeLimit。
我不知道为什么它有时可以正常工作，为什么有时不能。似乎是随机的。
是代码有问题还是其他地方有问题？
感谢帮助。

# java - 如何使用 POI 从基于 java 中的某些唯一值的 excel 中读取特定行？

> ID：10630749
> 
> 赞同：2
> 
> 时间：2012-05-17T06:15:59.193
> 
> 标签：java, excel

我试图根据一些独特的价值来获得记录。

例子; 它有一个带有emp名称，emp id，emp地址的值表，我想根据emp id获取记录。

这是我尝试过的代码，也是从文件中读取数据的代码，而不是从头开始。

```
package org.xlsx.read;

import java.io.File;
import java.io.FileInputStream;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

/**
 * 015 * @author giftsam 016
 */
public class ExcelSheetReader {

    /**
     * 021 * This method is used to read the data's from an excel file. 022 * @param
     * fileName - Name of the excel file. 023
     */
    private void readExcelFile(String fileName) {
        /**
         * Create a new instance for cellDataList
         */
        List cellDataList = new ArrayList();
        try {
            /**
             * 033 * Create a new instance for FileInputStream class 034
             */
            FileInputStream fileInputStream = new FileInputStream(fileName);

            /**
             * Create a new instance for POIFSFileSystem class
             */
            POIFSFileSystem fsFileSystem = new POIFSFileSystem(fileInputStream);

            /*
             * 043 * Create a new instance for HSSFWorkBook Class 044
             */
            HSSFWorkbook workBook = new HSSFWorkbook(fsFileSystem);
            HSSFSheet hssfSheet = workBook.getSheetAt(0);

            /**
            * Iterate the rows and cells of the spreadsheet 050 
             * * to get
             * all the datas
             */
            Iterator rowIterator = hssfSheet.rowIterator();

            while (rowIterator.hasNext()) {
                HSSFRow hssfRow = (HSSFRow) rowIterator.next();
                Iterator iterator = hssfRow.cellIterator();
                List cellTempList = new ArrayList();
                while (iterator.hasNext()) {
                    HSSFCell hssfCell = (HSSFCell) iterator.next();
                    cellTempList.add(hssfCell);
                }
                cellDataList.add(cellTempList);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        /**
         * Call the printToConsole method to print the cell data in the console.
         */
        printToConsole(cellDataList);
    }

    /**
     * This method is used to print the cell data to the console.
     * 
     * @param cellDataList
     *            - List of the data's in the spreadsheet.
     */
    private void printToConsole(List cellDataList) {
        for (int i = 0; i < cellDataList.size(); i++) {
            List cellTempList = (List) cellDataList.get(i);
            for (int j = 0; j < cellTempList.size(); j++) {
                HSSFCell hssfCell = (HSSFCell) cellTempList.get(j);
                String stringCellValue = hssfCell.toString();
                System.out.print(stringCellValue + "\t");
            }
            System.out.println();
        }
    }

    public static void main(String[] args) {
        String fileName = "D:/workspace/ReadExlsx/xlsx/Access_Control_Report_01-04-2012to30-04-2012.xls";
        new ExcelSheetReader().readExcelFile(fileName);
    }
} 
```

这段代码像这样打印出来。

```
292 Manikiruban Jaganathan  001 Esg     05/04/2012  09:11:28    19:06:06        
292 Manikiruban Jaganathan  001 Esg     06/04/2012  09:01:07    19:02:37        
292 Manikiruban Jaganathan  001 Esg     09/04/2012  09:02:08    19:39:29        
292 Manikiruban Jaganathan  001 Esg     10/04/2012  09:13:20    18:54:05        
292 Manikiruban Jaganathan  001 Esg     11/04/2012  09:31:55    18:33:03 
```

我的 excel 表如下所示：

```
Sling Media Pvt Ltd                                             
First and Last Record Details Report From 01/04/2012 to 30/04/2012                                              
Report Prepared on: 10/05/2012 at 12:51                                             

EmpID   EmpName SiteCode    Department  Type    Date    First   Last    Location                
1   Kr Veerappan    123 Hardware Team       02/04/2012  10:30:39    20:23:14                    
1   Kr Veerappan    123 Hardware Team       03/04/2012  09:46:01    19:58:16                    
1   Kr Veerappan    123 Hardware Team       04/04/2012  10:06:26    19:58:31                    
1   Kr Veerappan    123 Hardware Team       05/04/2012  11:38:51    19:32:17                    
1   Kr Veerappan    123 Hardware Team       06/04/2012  10:43:06    21:02:06                    
1   Kr Veerappan    123 Hardware Team       09/04/2012  11:02:32    22:05:14                    
1   Kr Veerappan    123 Hardware Team       10/04/2012  10:49:41    19:07:48                    
1   Kr Veerappan    123 Hardware Team       11/04/2012  10:16:42    20:30:13                    
1   Kr Veerappan    123 Hardware Team       12/04/2012  10:15:54    19:54:51                    
1   Kr Veerappan    123 Hardware Team       13/04/2012  10:18:30    19:05:55                    
1   Kr Veerappan    123 Hardware Team       18/04/2012  10:52:37    18:50:36                    
1   Kr Veerappan    123 Hardware Team       19/04/2012  10:24:59    20:29:59                    
1   Kr Veerappan    123 Hardware Team       20/04/2012  10:29:47    18:58:23                    
1   Kr Veerappan    123 Hardware Team       23/04/2012  10:24:31    20:11:29                    
1   Kr Veerappan    123 Hardware Team       24/04/2012  10:13:18    19:05:25 
```

谢谢安东尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:34:43.990

假设您要获取其 的员工`eid = 1`，那么您可以在打印时进行检查，`console.` 因为您不知道哪一行包含 eid=1 。所以您必须解析每一行。

的索引`eid`就像`2`从输出中看到的那样。

因此可以执行以下更改。

```
private void printToConsole(List cellDataList) {
        for (int i = 0; i < cellDataList.size(); i++) {
            List cellTempList = (List) cellDataList.get(i);
            if((HSSFCell) cellTempList.get(2).toString().equals("1"))
            {
            for (int j = 0; j < cellTempList.size(); j++) {

                HSSFCell hssfCell = (HSSFCell) cellTempList.get(j);
                String stringCellValue = hssfCell.toString();

                System.out.print(stringCellValue + "\t");
            }
            }
            else { 
             i++;
            }
            System.out.println();
        }
    } 
```

# c# - 如何在c#中使用角度参数捕获屏幕

> ID：10630750
> 
> 赞同：0
> 
> 时间：2012-05-17T06:16:02.063
> 
> 标签：c#, .net, image

我知道如何在[捕获活动窗口的屏幕截图中捕获屏幕？](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)，但我想知道如何以特定角度捕获屏幕。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:28:20.137

为什么不捕获屏幕`bitmap`并将位图转换为您需要的矩形形状？

假设您将屏幕捕获作为位图`originalbitmap`

现在将旋转和变换应用于原始图像位图的图形上下文并将其存储在另一个位图中`originalbitmap2`

假设您要定义和查看旋转位图的矩形区域。将矩形信息存储在：（比如说）`rect1`

```
 Bitmap bmp = new Bitmap(<your width>,<your height>); //your final image bitmap
 Graphics g = Graphics.FromImage(bmp);
 g.DrawImage(originalbitmap2,0,0,rect1,GraphicsUnit.Pixel);
 g.Dispose(); 
```

现在，你可以使用这个位图了！

# elasticsearch - “必须”功能在弹性搜索中不起作用

> ID：10630754
> 
> 赞同：0
> 
> 时间：2012-05-17T06:16:13.857
> 
> 标签：elasticsearch

我是 Elasticsearch 的新手，并且正在使用数据库。我想做这样的查询：

`curl -X GET http://localhost:9200/project/flat_order/_search?pretty=true -d' { query:{ bool:{ must:{range:{created_at:{gte:"2012-01-01 00:00:00",lte:"2012-02-01 00:00:00"}}}}, {should:[{term:{status:"canceled"}}],minimum_number_should_match:1} } } }'`

我得到一个错误。 `"error" : "SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[YfeNrRnOTOqLOtQt65uPVw][project][1]: SearchParseException[[project][1]: from[-1],size[-1]: Parse Failure [Failed to parse source [ { query:{ bool:{ must:{range:{created_at:{gte:\"2012-01-01 00:00:00\",lte:\"2012-02-01 00:00:00\"}}}}, {should:[{term:{status:\"canceled\"}}],minimum_number_should_match:1} } } }]]]; nested: QueryParsingException[[project] Failed to parse]; nested: JsonParseException[Unexpected character ('{' (code 123)): was expecting either valid name character (for unquoted name) or double-quote (for quoted) to start field name\n at [Source: [B@3742925a; line: 1, column: 102]]; }{[YfeNrRnOTOqLOtQt65uPVw][project][2]: SearchParseException[[project][2]: from[-1],size[-1]: Parse Failure [Failed to parse source [ { query:{ bool:{ must:{range:{created_at:{gte:\"2012-01-01 00:00:00\",lte:\"2012-02-01 00:00:00\"}}}}, {should:[{term:{status:\"canceled\"}}],minimum_number_should_match:1} } } }]]]; nested: QueryParsingException[[project] Failed to parse]; nested: JsonParseException[Unexpected character ('{' (code 123)): was expecting either valid name character (for unquoted name) or double-quote (for quoted) to start field name\n at [Source: [B@3742925a; line: 1, column: 102]]; }]", "status" : 500 }`

该怎么办？提前致谢。

这是我在没有那些大括号的情况下得到的错误（封闭应该） `"error" : "SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[YfeNrRnOTOqLOtQt65uPVw][project][0]: SearchParseException[[project][0]: query[created_at:[1325376000000 TO 1328054400999]],from[-1],size[-1]: Parse Failure [Failed to parse source [ { query:{ bool:{ must:{range:{created_at:{gte:\"2012-01-01 00:00:00\",lte:\"2012-02-01 00:00:00\"}}}}, should:[{term:{status:\"canceled\"}}],minimum_number_should_match:1 } } }]]]; nested: SearchParseException[[project][0]: query[created_at:[1325376000000 TO 1328054400999]],from[-1],size[-1]: Parse Failure [No parser for element [term]]]; }{[YfeNrRnOTOqLOtQt65uPVw][project][4]: SearchParseException[[project][4]: query[created_at:[1325376000000 TO 1328054400999]],from[-1],size[-1]: Parse Failure [Failed to parse source [ { query:{ bool:{ must:{range:{created_at:{gte:\"2012-01-01 00:00:00\",lte:\"2012-02-01 00:00:00\"}}}}, should:[{term:{status:\"canceled\"}}],minimum_number_should_match:1 } } }]]]; nested: SearchParseException[[project][4]: query[created_at:[1325376000000 TO 1328054400999]],from[-1],size[-1]: Parse Failure [No parser for element [term]]]; }]", "status" : 500 }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:48:40.710

查看错误详细信息，我认为问题在于您的`should`子句有额外的嵌套级别，而这是您不应该拥有的。代替：

```
must: { ... },
{ should: { ... },
  minimum_number_should_match:1}
} 
```

尝试：

```
must: { ... },
should: { ... },
minimum_number_should_match:1} 
```

编辑：您编辑的代码看起来像这是您的查询：

```
query:{ bool:{ must:{range:{created_at:{gte:\"2012-01-01 00:00:00\",
lte:\"2012-02-01 00:00:00\"}}}}, should:[{term:status:\"canceled\"}}],
minimum_number_should_match:1 } 
```

格式化后，它将是：

```
query:{ 
 bool:{ 
  must:{
   range:{created_at:{gte:\"2012-01-01 00:00:00\",lte:\"2012-02-01 00:00:00\"}}
  }
 },
 should: [
  {term:{status:\"canceled\"}}
 ],
 minimum_number_should_match:1
} 
```

... 有`should` *外面*的`bool`部分。换句话说，您的`must`子句后面有太多右大括号。我认为应该是：

```
query:{ 
 bool:{ 
  must:{
   range:{created_at:{gte:\"2012-01-01 00:00:00\",lte:\"2012-02-01 00:00:00\"}}
  },
  should: [
   {term:{status:\"canceled\"}}
  ],
  minimum_number_should_match:1
 } 
} 
```

# iphone - 在表格视图单元格中显示重复对象的数组

> ID：10630755
> 
> 赞同：0
> 
> 时间：2012-05-17T06:16:16.110
> 
> 标签：iphone, uitableview, nsarray

我有一个大小为 11 的 NSArray，如下所示。

`labels = [NSMutableArray arrayWithObjects:@"DIN #",@"Brand Name",@"Full Name", @"Strength", @"Medication Type", @"Presciption ID", @"Next Dosage", @"Required Dosage", @"ada", @"dasdada", @"dasdasad", nil];`

但是当我在 tableview 单元格中显示这个数组时使用这个代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {static NSString *CellIdentifier = @"Cell";
  UITableViewCell *cell = [tableView dueueReusableCellWithIdentifier:CellIdentifier];   
UILabel* nameLabel = nil;

if(cell == nil) {   cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];nameLabel = [[UILabel alloc] initWithFrame:CGRectMake( 7.0, 10.0, 160.0, 44.0 )];

    nameLabel.text =[labels objectAtIndex:indexPath.row]; 

    nameLabel.lineBreakMode = UILineBreakModeWordWrap;

    nameLabel.numberOfLines =0;
    [nameLabel sizeToFit];
    CGSize expectedlabelsize = [nameLabel.text sizeWithFont:nameLabel.font constrainedToSize:nameLabel.frame.size lineBreakMode:UILineBreakModeWordWrap];
    CGRect newFrame =nameLabel.frame;
    newFrame.size.height =expectedlabelsize.height;

   [cell.contentView addSubview: nameLabel];

return cell;} 
```

O/P 如下。

DIN

品牌

全名

力量

药物类型

处方ID

下一个剂量

所需剂量

**DIN**

**品牌**

**全名**

**再次查看所需剂量 DIN，品牌名称，显示全名，已显示**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:11:19.733

使用`viewWithTag`方法，我使用了以下方法。像这样试试。我想这会对你有所帮助。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"myCell";
    UILabel* nameLabel = nil;
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    }
    else
    {
        UILabel *titleLbl = (UILabel *)[cell viewWithTag:1];
        [titleLbl removeFromSuperview];
    }
    nameLabel = [[UILabel alloc] initWithFrame:CGRectMake( 7.0, 10.0, 160.0, 44.0 )];
    nameLabel.text = [labels objectAtIndex:indexPath.row];

    nameLabel.lineBreakMode = UILineBreakModeWordWrap;
    nameLabel.tag =1;
    nameLabel.numberOfLines =0;
    [nameLabel sizeToFit];
    CGSize expectedlabelsize = [nameLabel.text sizeWithFont:nameLabel.font constrainedToSize:nameLabel.frame.size lineBreakMode:UILineBreakModeWordWrap];
    CGRect newFrame =nameLabel.frame;
    newFrame.size.height =expectedlabelsize.height;
    [cell.contentView addSubview: nameLabel];
    return cell;
} 
```

# api - Asana：在创建项目时将任务添加到项目中

> ID：10630756
> 
> 赞同：3
> 
> 时间：2012-05-17T06:16:20.000
> 
> 标签：api, asana

我正在尝试使用 Asana API 创建分配给我并添加到现有项目的任务。

我尝试过不按照其他人的建议指定工作区，但任务创建仍然失败。

我正在使用的[json如下；](http://www.json.org/)

```
{ "data": 
{
"name":"Testing Project",
"followers":[10112, 141516],
"workspace":6789,
"assignee":12345,
"project": 1234
}
} 
```

如果我创建任务，然后使用以下内容向[API](https://app.asana.com/api/1.0/tasks/%20+%20taskID%20+%20/addProject)`jSon`发送另一个调用，则它可以工作，但这意味着我每次创建任务时都需要进行 2 次 API 调用。

```
{
"project": 1234
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-21T12:23:41.040

相当老的问题，但它可能会帮助某人。是的，您可以在创建过程中使用“项目”（不是如上所述的“项目”）参数将任务附加到项目，并传递其 ID。

您还可以将任务附加到许多项目，在 'projects' => {22, 33, 44} 处声明一个数组。

这一切都在[https://asana.com/developers/api-reference/tasks](https://asana.com/developers/api-reference/tasks)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:30:50.313

（我为 Asana 工作）

可以在此处找到任务的规范：[https](https://asana.com/developers/api-reference/tasks) : //asana.com/developers/api-reference/tasks 值得注意的是，您不能在创建期间指定项目 - 您必须为要添加的每个项目执行 addProject 调用。

如果关于另一个 SO 问题的信息相互矛盾，我深表歉意，因为这可能是在没有首先仔细检查实现的情况下编写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-10T17:11:53.610

实际的问题是您传递的是 int 而不是“项目”的字符串。一些属性可以很好地用作字符串或整数（例如“assignee”或“workspace”），但不能用作“projects”。

..所以将您的json更正为以下内容：

```
{ 
    "data": 
    {
        "name":"Testing Project",
        "followers":[10112, 141516],
        "workspace":6789,
        "assignee":12345,
        "project": "1234"
    }
} 
```

我浪费了半天时间-.-'

# javascript - 如何根据每个元素的长度对数组进行排序？

> ID：10630766
> 
> 赞同：117
> 
> 时间：2012-05-17T06:17:09.243
> 
> 标签：javascript, arrays, string, sorting

我有一个这样的数组：

```
arr = []
arr[0] = "ab"
arr[1] = "abcdefgh"
arr[2] = "abcd" 
```

排序后，输出数组应为：

```
arr[0] = "abcdefgh"
arr[1] = "abcd"
arr[2] = "ab" 
```

我想按`descending`每个元素的长度顺序。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-05-17T06:24:48.797

您可以使用[`Array.sort`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)方法对数组进行排序。将字符串长度作为排序标准的排序函数可以使用如下：

```
arr.sort(function(a, b){
  // ASC  -> a.length - b.length
  // DESC -> b.length - a.length
  return b.length - a.length;
}); 
```

* * *

注意：`["a", "b", "c"]`不保证按字符串长度排序返回`["a", "b", "c"]`。根据[规格](https://www.ecma-international.org/ecma-262/6.0/#sec-array.prototype.sort)：

> 排序不一定是稳定的（也就是说，比较相等的元素不一定保持原来的顺序）。

如果目标是按长度排序，那么按字典顺序，您必须指定附加条件：

```
["c", "a", "b"].sort(function(a, b) {
  return a.length - b.length || // sort by length, if equal then
         a.localeCompare(b);    // sort by dictionary order
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-07-04T19:35:56.703

我们可以使用**[Array.sort](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)**方法对这个数组进行排序。

## ES5 解决方案

```
var array = ["ab", "abcdefgh", "abcd"];

array.sort(function(a, b){return b.length - a.length});

console.log(JSON.stringify(array, null, '\t'));
```

> 对于**升序**排序：`a.length - b.length`
> 
> 对于**降序**排序：`b.length - a.length`

## ES6 解决方案

**注意：并不是所有的浏览器都能理解 ES6 代码！**

在 ES6 中我们可以使用**[箭头函数表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)**。

```
let array = ["ab", "abcdefgh", "abcd"];

array.sort((a, b) => b.length - a.length);

console.log(JSON.stringify(array, null, '\t'));
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T06:29:02.420

这是排序，具体取决于您询问的带有 javascript 的字符串的长度：

[用冒泡排序解决问题][1]

[1]：http: [//jsfiddle.net/sssonline2/vcme3/2/](http://jsfiddle.net/sssonline2/vcme3/2/)`enter code here`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-23T17:07:55.927

```
#created a sorting function to sort by length of elements of list
def sort_len(a):
    num = len(a)
    d = {}
    i = 0
    while i<num:
        d[i] = len(a[i])
        i += 1
    b = list(d.values())
    b.sort()
    c = []
    for i in b:
        for j in range(num):
            if j in list(d.keys()):
                if d[j] == i:
                    c.append(a[j])
                    d.pop(j)
    return c 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-06T05:07:35.543

如果要保留与原始数组长度相同的元素的顺序，请使用冒泡排序。

```
Input = ["ab","cdc","abcd","de"];

Output  = ["ab","cd","cdc","abcd"] 
```

功能：

```
function bubbleSort(strArray){
  const arrayLength = Object.keys(strArray).length;
    var swapp;
    var newLen = arrayLength-1;
    var sortedStrArrByLenght=strArray;
    do {
        swapp = false;
        for (var i=0; i < newLen; i++)
        {
            if (sortedStrArrByLenght[i].length > sortedStrArrByLenght[i+1].length)
            {
               var temp = sortedStrArrByLenght[i];
               sortedStrArrByLenght[i] = sortedStrArrByLenght[i+1];
               sortedStrArrByLenght[i+1] = temp;
               swapp = true;
            }
        }
        newLen--;
    } while (swap);
  return sortedStrArrByLenght;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-04T20:00:16.777

使用现代 JavaScript，您可以这样做：

**降序**

```
const arr = [
  "ab",
  "abcdefgh",
  "abcd",
  "abcdefghijklm"
];

arr.sort((a, b) => b.length - a.length);

console.log(JSON.stringify(arr, null, 2));
```

**升序**`a`-只需切换`b`

```
const arr = [
  "ab",
  "abcdefgh",
  "abcd",
  "abcdefghijklm"
];

arr.sort((a, b) => a.length - b.length);

console.log(JSON.stringify(arr, null, 2));
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-24T14:55:45.983

根据萨尔曼的回答，我编写了一个小函数来封装它：

```
function sortArrayByLength(arr, ascYN) {
        arr.sort(function (a, b) {           // sort array by length of text
            if (ascYN) return a.length - b.length;              // ASC -> a - b
            else return b.length - a.length;                    // DESC -> b - a
        });
    } 
```

然后只需调用它

```
sortArrayByLength( myArray, true ); 
```

请注意，不幸的是，函数可以/不应该添加到数组原型中，如[本页](https://stackoverflow.com/questions/948358/adding-custom-functions-into-array-prototype)所述。

此外，它修改了作为参数传递的数组并且不返回任何内容。这将强制阵列的重复，并且对于大型阵列来说不是很好。如果有人有更好的想法，请发表评论！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-25T22:27:03.090

我改编了@shareef 的答案以使其简洁。我用，

`.sort(function(arg1, arg2) { return arg1.length - arg2.length })`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-16T15:03:10.280

这段代码应该可以解决问题：

```
var array = ["ab", "abcdefgh", "abcd"];

array.sort(function(a, b){return b.length - a.length});

console.log(JSON.stringify(array, null, '\t')); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-04T12:02:37.850

```
let array = [`ab`, `abcdefgh`, `abcd`];
let newArray = array.sort((a,b) => {
    return b.length - a.length
})
console.log(newArray); 
```

请输入以下代码

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-22T06:20:47.253

```
let arr  = [5,2,100,1,20,3];
arr.sort((a,b)=>{
  return a-b 
})

console.log(arr) //[1, 2, 3, 5, 20, 100] 
```

在返回值上，sort 方法将执行交换元素的功能

```
return < 0  { i.e -ve number then  a comes before b}
return > 0  { i.e +ve number then  b comes before a}
return == 0 { order of a and b remains same } 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2012-05-17T06:44:37.400

```
<script>
         arr = []
         arr[0] = "ab"
         arr[1] = "abcdefgh"
         arr[2] = "sdfds"
         arr.sort(function(a,b){
            return a.length<b.length
         })
         document.write(arr)

</script> 
```

您传递给 sort 的匿名函数告诉它如何对给定数组进行排序。希望这会有所帮助。我知道这很令人困惑，但是您可以通过将函数作为参数传递给 sort 函数来告诉它如何对数组的元素进行排序它该怎么做

# ruby-on-rails-3 - 未定义的方法 `database_authenticable' for #

> ID：10630768
> 
> 赞同：26
> 
> 时间：2012-05-17T06:17:15.587
> 
> 标签：ruby-on-rails-3, activerecord, ruby-on-rails-3.1, devise, activeadmin

我正在为基于 Quiz 的小型应用程序使用 Active Admin gem。但是当我执行**rake db:migrate**时，它​​给了我错误。以下是命令的跟踪：

```
$ rake db:migrate RAILS_ENV=production --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:migrate
==  DeviseCreateAdminUsers: migrating =========================================
-- create_table(:admin_users)
rake aborted!
An error has occurred, all later migrations canceled:

undefined method `database_authenticatable' for #<ActiveRecord::ConnectionAdapters::TableDefinition:0x9dee690>
/home/users/Documents/Quiz/db/migrate/20120509055635_devise_create_admin_users.rb:4:in `block in change'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/schema_statements.rb:160:in `create_table'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/connection_adapters  /abstract_mysql_adapter.rb:432:in `create_table'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:466:in `block in method_missing'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:438:in `block in say_with_time'
/home/users/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/benchmark.rb:295:in `measure'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:438:in `say_with_time'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:458:in `method_missing'
/home/users/Documents/Quiz/db/migrate/20120509055635_devise_create_admin_users.rb:3:in `change'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:407:in `block (2 levels) in migrate'
/home/users/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/benchmark.rb:295:in `measure'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:407:in `block in migrate'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:119:in `with_connection'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:389:in `migrate'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:528:in `migrate'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:720:in `block (2 levels) in migrate'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:777:in `call'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:777:in `ddl_transaction'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:719:in `block in migrate'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:700:in `each'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:700:in `migrate'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:570:in `up'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/migration.rb:551:in `migrate'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/activerecord-3.2.3/lib/active_record/railties/databases.rake:153:in `block (2 levels) in <top (required)>'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/users/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/users/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/users/.rvm/gems/ruby-1.9.2-p318/bin/rake:19:in `load'
/home/users/.rvm/gems/ruby-1.9.2-p318/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate 
```

以下是我的 GemFile ：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
gem 'devise'
gem 'activeadmin', :git => 'https://github.com/gregbell/active_admin.git'
gem 'therubyracer'
gem 'formtastic'
gem 'haml'
gem 'paperclip'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

**20120509055635_devise_create_admin_users.rb**的内容是

```
class DeviseCreateAdminUsers < ActiveRecord::Migration
  def change
    create_table(:admin_users) do |t|
      t.database_authenticatable :null => false
      t.recoverable
      t.rememberable
      t.trackable

      # t.encryptable
      # t.confirmable
      # t.lockable :lock_strategy => :failed_attempts, :unlock_strategy => :both
      # t.token_authenticatable

      t.timestamps
    end

    # Create a default user
    AdminUser.create!(:email => 'admin@example.com', :password => 'password', :password_confirmation => 'password')

    add_index :admin_users, :email,                :unique => true
    add_index :admin_users, :reset_password_token, :unique => true
    # add_index :admin_users, :confirmation_token,   :unique => true
    # add_index :admin_users, :unlock_token,         :unique => true
    # add_index :admin_users, :authentication_token, :unique => true
  end

end 
```

我搜索了上述问题并得到了[这个](https://github.com/plataformatec/devise/issues/833)，但这并没有帮助我。我到处都找到了这个解决方案。以前有没有人遇到过这个问题，如果有，你做了什么来解决这个问题？对此的任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-24T04:30:15.147

当我尝试部署到新的登台服务器时，我在现有应用程序上也遇到了这个问题。

最后是 Devise gem 已更新到 2.1，我没有修复迁移以在新版本中正常工作。

请务必在他们的 wiki 上通读他们到 2.1 文档的迁移——https: [//github.com/plataformatec/devise/wiki/How-To: -Upgrade-to-Devise-2.1](https://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.1)

此外，请务必通读文档以了解如何正确调整现有迁移 - [https://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.0-migration-schema-style](https://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.0-migration-schema-style)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-05T21:14:37.057

我已经遇到了两次，并且有一个非常简单的解决方案 - 而不是 db 迁移，运行这个：

```
heroku run rake db:create 
# optionally with --app your_apps_name if you have multiple apps. 
```

然后：

```
rake db:schema:load 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-18T02:32:59.503

我只是遇到了同样的问题，我更新了我的 gem，并删除了我的数据库，后来我收到了一个非常相似的消息，然后我创建了一个新的 rails 应用程序只是为了比较，结果发现迁移文件已更改，现在它包括列而不是调用方法。

我希望它有所帮助。

干杯!

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-31T14:38:53.717

我认为这个问题可能是由于 Devise 2.0 迁移模式样式的变化造成的。在下面的链接中查看新的架构格式。相应地更新迁移并重试。这对我来说尤其适用于#heroku

[https://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.0-migration-schema-style](https://github.com/plataformatec/devise/wiki/How-To:-Upgrade-to-Devise-2.0-migration-schema-style)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-03T15:50:23.007

正如您从我的代表那里看到的那样，这个网站的新手。John Kamuchau 是正确的，您需要根据您的版本更改 xxxx_devise_create_users.rb 迁移。

例如，我刚刚将 rails 3.2 更新到 4.2 相应地更新了设计，我不得不更改已弃用的 -

```
t.database_authenticatable :null => false 
```

为了 -

```
## Database authenticatable
t.string :email,              null: false, default: ""
t.string :encrypted_password, null: false, default: "" 
```

老问题，但希望如果有人来找这会有所帮助。

# c# - C# 获取目录名称

> ID：10630773
> 
> 赞同：0
> 
> 时间：2012-05-17T06:17:33.933
> 
> 标签：c#

我有一个文件夹，`c:\program files(x86)\company\application\`其中包含所有应用程序文件。

我怎样才能得到这样的路径`C:\program files(x86)\company`？

我不能使用`Application.Startuppath`，因为它会返回`c:\program files)x86)\company\application`。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:20:43.887

采用[`Directory.GetParent(string path)`](http://msdn.microsoft.com/en-us/library/system.io.directory.getparent)

在您的应用程序中包含`System.IO`命名空间

```
using System.IO; 
```

并使用

```
string desired_path = Directory.GetParent(Application.StartupPath);
                       // will return c:\program files(x86)\company
        // because app path will have c:\program files(x86)\company\application\ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:20:01.653

请参阅此 MSDN 内容[`System.IO.Path.GetDirectoryName(string)`](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)

所以，包括：

```
using System.IO; 
```

现在你的代码：

```
string ApplicationPath = Application.StartupPath;
string YourPath = Path.GetDirectoryName(ApplicationPath);
// This will get "C:\program files(x86)\company" from "C:\program files(x86)\company\application" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:24:44.540

最好使用`Environment.CurrentDirectory`，它会帮助你。

请参考[http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory%28v=vs.71%29.aspx)

更多细节。

# ruby-on-rails - 在另一个任务中使用 rake db:migrate 会留下挂起的迁移

> ID：10630774
> 
> 赞同：5
> 
> 时间：2012-05-17T06:17:35.417
> 
> 标签：ruby-on-rails, ruby, rake, task, dbmigrate

我是**rake**新手，我正在尝试找到自动化某些任务的方法。所以我写了我的第一个*rake 任务*并且失败了：

```
namespace :app do
  desc "Leaves application like new"
  task :reset => :environment do
    Rake::Task['db:drop:all'].invoke
    Rake::Task['db:create:all'].invoke
    Rake::Task['db:migrate'].invoke
    Rake::Task['db:seed'].invoke
  end
end 
```

我想知道为什么这不起作用。调用后：

```
rake app:reset 
```

一切运行良好，我可以在屏幕上看到迁移消息，如下所示：

```
==  CreateGalerias: migrating =================================================
-- create_table(:galerias)
NOTICE:  CREATE TABLE will create implicit sequence "galerias_id_seq" for serial column "galerias.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "galerias_pkey" for table "galerias"
   -> 0.1191s
==  CreateGalerias: migrated (0.1194s) ======================================== 
```

但是，最后我收到这条消息：

```
You have 11 pending migrations:
  20110704052637 CreatePersonas
  20110709100632 CreateOrganizaciones
  20110709100646 CreateEventos
  20110816102451 CreateMembresias
  20110816155851 CreateCelebraciones
  20110822135820 ActsAsTaggableOnMigration
  20120410063100 CreateDocumentos
  20120507200516 CreateUsuarios
  20120515214226 ActivaUnnaccent
  20120516091228 CreateGalerias
  20120517004708 SetupHstore
Run `rake db:migrate` to update your database then try again. 
```

不是刚迁移数据库吗？为什么抱怨它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:51:03.320

请记住 db:drop:all 和 db:create:all 可在所有环境中运行，而 db:migrate 和 db:seed 则不能，因此您可能正在一个非预期的环境中进行迁移。尝试将 db:drop:all 更改为 db:drop 并将 db:create:all 更改为 db:create，然后运行指定特定环境的任务，例如：

```
rake RAILS_ENV=production app:reset 
```

# objective-c - NSString 运算符（如果字符串大于另一个字符串）

> ID：10630775
> 
> 赞同：0
> 
> 时间：2012-05-17T06:17:36.760
> 
> 标签：objective-c, ios4, nsstring, operators

我有 3 个字符串。

```
NSString *hour1 = @"10:00";
NSString *hour2 = @"6:00";
NSString *hour3 = @"9:00"; 
```

如何检查哪个字符串具有更大的值？-> 10:00 > 9:00 > 6:00

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:30:52.673

将字符串添加到数组中，

```
NSString *hour1 = @"10:00";
NSString *hour2 = @"6:00";
NSString *hour3 = @"9:00";

NSArray *hours = [NSArray arrayWithObjects:hour1, hour2, hour3, nil]; 
```

然后对数组进行排序，

```
NSArray *result = [hours sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2){
    return ([obj1 compare:obj2 options:NSNumericSearch] == NSOrderedAscending);
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:30:09.513

```
NSString *hour1 = @"10:00";
NSString *hour2 = @"6:00";
NSString *hour3 = @"9:00";

// Convert the hours over to int's such as 1000, 600, and 900.
int hour1AsInt = [[hour1 stringByReplacingOccurrencesOfString:@":" withString:@""] intValue];
int hour2AsInt = [[hour2 stringByReplacingOccurrencesOfString:@":" withString:@""] intValue];
int hour3AsInt = [[hour3 stringByReplacingOccurrencesOfString:@":" withString:@""] intValue];

// Make the comparison's...  This could be more efficient but works well and is easy to follow:
if (hour1AsInt > hour2AsInt) {
    if (hour1AsInt > hour3AsInt) {
        NSLog(@"Hour 1 is biggest");
        return;
    }
}

if (hour2AsInt > hour1AsInt) {
    if (hour2AsInt > hour3AsInt) {
        NSLog(@"Hour 2 is biggest");
        return;
    }
}

if (hour3AsInt > hour1AsInt) {
    if (hour3AsInt > hour2AsInt) {
        NSLog(@"Hour 3 is biggest");
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:30:56.947

您应该能够使用[localizedStandardCompare：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

```
NSLog(@"%ld",[hour1 localizedStandardCompare:hour2]); 
```

# iphone - UIViewController 不在 ARC 项目中调用 dealloc？

> ID：10630785
> 
> 赞同：1
> 
> 时间：2012-05-17T06:18:25.437
> 
> 标签：iphone, objective-c, automatic-ref-counting

在 ARC 项目中`addObserver`，`viewDidLoad:`我`removeObserver:`在`dealloc`. 但是在我弹出 viewController 之后，`dealloc`并没有执行。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(refreshData)
                                                 name:MyNotification
                                               object:nil];
}

- (void)dealloc
{
    NSLog(@"==================");//There is nothing print out.
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MyNotification
                                                  object:nil];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T06:27:49.790

这可能是您启用了 nszobie 对象，禁用它们。我不知道为什么，但是如果在 arc 中启用了 nszombie，则不会调用 dealloc。

转到产品>编辑方案>取消选中启用僵尸

# php - Excel下载卡住188kb

> ID：10630789
> 
> 赞同：1
> 
> 时间：2012-05-17T06:19:20.743
> 
> 标签：php, mysql, excel, export

嗨，我正在以 excel 格式导出我的 mysql 数据，目前我有 14k+ 记录，但问题是它卡在@188kb 但是当我尝试将结果缩减为 100 条记录时，它不会中断下载。

这是我的代码：

```
function xlsBOF() { 
    echo pack("ssssss", 0x809, 0x8, 0x0, 0x10, 0x0, 0x0);  
    return; 
} 

function xlsEOF() { 
    echo pack("ss", 0x0A, 0x00); 
    return; 
} 

function xlsWriteNumber($Row, $Col, $Value) { 
    echo pack("sssss", 0x203, 14, $Row, $Col, 0x0); 
    echo pack("d", $Value); 
    return; 
} 

function xlsWriteLabel($Row, $Col, $Value ) { 
    $L = strlen($Value); 
    echo pack("ssssss", 0x204, 8 + $L, $Row, $Col, 0x0, $L); 
    echo $Value; 
return; 
}

  mysql_connect($dbhost,$dbuser,$dbpass); 
  //mysql_select_db($dbname) or die("Unable to select database"); 
  $result = mysql_db_query($dbname, "select id, or_number, name, client_code, address, vehicle_info, vehicle_color, plate_num, sticker_type, application_date, amount_paid, traffic_violations, delivery_date, edited_by, phase, version FROM owner order by application_date desc");

// Send Header
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");;
header("Content-Disposition: attachment;filename=epal.xls"); // à¹à¸¥à¹‰à¸§à¸™à¸µà¹ˆà¸à¹‡à¸Šà¸·à¹ˆà¸­à¹„à¸Ÿà¸¥à¹Œ
header("Content-Transfer-Encoding: binary ");

            xlsBOF(); 
            xlsWriteLabel(0,0,"Current SLVA Owner List:");
            xlsWriteLabel(2,0,"#");
            xlsWriteLabel(2,1,"OR #");
            xlsWriteLabel(2,2,"Name");
            xlsWriteLabel(2,3,"Client Code");
            xlsWriteLabel(2,4,"Address");
            xlsWriteLabel(2,5,"Vehicle Info");
            xlsWriteLabel(2,6,"Vehicle Color");
            xlsWriteLabel(2,7,"Plate #");
            xlsWriteLabel(2,8,"Sticker Type");
            xlsWriteLabel(2,9,"Application Date");
            xlsWriteLabel(2,10,"Amount Paid");
            xlsWriteLabel(2,11,"Traffic Violations");
            xlsWriteLabel(2,12,"Delivery Date");
            xlsWriteLabel(2,13,"Edited By");
            xlsWriteLabel(2,14,"Phase");
            xlsWriteLabel(2,15,"Version");

            $xlsRow = 3;
            while(list($id, $or_number, $name, $client_code, $address, $vehicle_info, $vehicle_color, $plate_num, $sticker_type, $application_date, $amount_paid, $traffic_violations, $delivery_date, $edited_by, $phase, $version) = mysql_fetch_row($result)) {
                      xlsWriteLabel($xlsRow,0, $id);
                      xlsWriteLabel($xlsRow,1,$or_number);
                      xlsWriteLabel($xlsRow,2,$name);
                      xlsWriteLabel($xlsRow,3,$client_code);
                      xlsWriteLabel($xlsRow,4,$address);
                      xlsWriteLabel($xlsRow,5,$vehicle_info);
                      xlsWriteLabel($xlsRow,6,$vehicle_color);
                      xlsWriteLabel($xlsRow,7,$plate_num);
                      xlsWriteLabel($xlsRow,8,$sticker_type);
                      xlsWriteLabel($xlsRow,9,$application_date);
                      xlsWriteLabel($xlsRow,10,$amount_paid);
                      xlsWriteLabel($xlsRow,11,$traffic_violations);    
                      xlsWriteLabel($xlsRow,12,$delivery_date);   
                      xlsWriteLabel($xlsRow,13,$edited_by); 
                      xlsWriteLabel($xlsRow,14,$phase);      
                      xlsWriteLabel($xlsRow,15,$version);  

                  $xlsRow++;
                } 
                 xlsEOF();
             exit(); 
```

我去了几个站点/线程，但仍然没有找到解决方案。:'(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:26:37.207

这只是一个疯狂的猜测，但您可能需要提前计算文档大小并设置“内容长度”标题

```
header("Content-length: " . strlen($document)); 
```

您必须将输出存储在字符串中，以便计算长度（输出缓冲可能有助于捕获您对 xlsWriteLabel 的使用）

```
ob_start();
xlsBOF();
xlsWriteLabel();
// etc etc
xlsEOF();
$document = ob_get_contents();
ob_end_clean();
header("Content-length: " . strlen($document));
echo $document;
exit(); 
```

# c# - 导航到另一个页面时将值从列表传递到列表

> ID：10630790
> 
> 赞同：-2
> 
> 时间：2012-05-17T06:19:27.943
> 
> 标签：c#, windows-phone-7

我们有一个包含一般数据的列表，我们可以将这些数据视为行，当用户选择一行时，它将导航到另一个页面，该页面包含该行索引的其余详细信息，这些详细信息位于另一个列表中。

如果此行索引 ????? 我如何选择特定索引来检索其余详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:59:04.263

如果您使用 ListBox 控件，则在*OnSelectionChanged*事件上，执行以下操作：

```
//cast to ListItemObject, in my case "Products"
var fav = (cast to ListItemObject)listFavoriti.SelectedItem;
//send data to another page using querystring
NavigationService.Navigate(new Uri("/ProductDetails.xaml?id=" + fav.ProductID, UriKind.Relative)); 
```

在您的详细信息页面中，使用以下方法处理查询字符串数据：

```
string getIdFromQuerystring()
{
     string queryStringData = "";
     if (NavigationContext.QueryString.TryGetValue("id", out queryStringData))
     {
     }

     return queryStringData;
} 
```

# android - 在 Java 中以编程方式签署 Apk 文件

> ID：10630796
> 
> 赞同：3
> 
> 时间：2012-05-17T06:19:52.753
> 
> 标签：android, code-signing, android-source

我需要修改文件夹中现有的 .apk 文件`/data/app`。`Meta-INF`修改后，文件夹中的签名会发生变化。因此，为了确保 apk 正常工作，我需要使用正确的 md5sum 对它们进行签名。

是否可以通过java以编程方式退出apks，仅通过代码生成私钥和证书？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-12T21:51:18.777

我正在使用 Bouncy Castle 和这个[类](https://gist.github.com/mmuszkow/10288441)。重新签名示例：

```
SignedJar bcApk = new SignedJar(
    new FileOutputStream("out.apk"), signChain, signCert, signKey);
JarFile jsApk = new JarFile(new File("in.apk"));
Enumeration<JarEntry> entries = jsApk.entries();
while (entries.hasMoreElements()) {
    JarEntry entry = entries.nextElement();
    String name = entry.getName();
    if (!entry.isDirectory() && !name.startsWith("META-INF/")) {
        InputStream eis = jsApk.getInputStream(entry);
        bcApk.addFileContents(name, IOUtils.toByteArray(eis));
        eis.close();
    }
}
jsApk.close();
bcApk.close(); 
```

# c - 非常简单的 C 程序崩溃

> ID：10630801
> 
> 赞同：0
> 
> 时间：2012-05-17T06:20:14.463
> 
> 标签：c, printf, exe, scanf, procedure

我有一个简单的问题，我的 C 可执行文件在尝试从用户那里获取输入后崩溃。

该程序的想法是填充一个数组并最终在该数组上生成一些数据。到目前为止，我试图在 exe 崩溃后立即从用户那里获取输入。我还暂时编辑了代码，同时尝试调试问题所在，但没有成功。我已经很多年没有接触过 c 了，上次接触的时候还很年轻，而且还是个新手。

有人可以就为什么会崩溃的任何可能解决方案提供建议吗？

```
#include <stdio.h>
#include <stdbool.h>

double get_double(char prompt[50])
{
    double tempDouble = 0;
    printf("%s", prompt);
    scanf("%d", tempDouble);
    return tempDouble;
}

void populate_array(double *pData[])
{
    int i = 0;
    *pData[0] = get_double("Please Enter A Number : "); 
    //for(i = 0; i < sizeof(*pData); i++)
    //{
        //*pData[i] = get_double("Please Enter A Number : ");   
    //}
}

double get_sum(double data[10])
{
    int i = 0;
    double result = 0;
    for (i = 0; i < sizeof(data); i++)
    {
        result += data[i];
    }
    return result;
}

int main()
{
    //Variable Declarations
    bool running = true;
    bool playAgain = false;
    double numbers[10];
    double sum, min, max, var, dev;

    //Process
    populate_array(&numbers);
    sum = get_sum(numbers);
    printf("%d",sum);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T06:22:49.860

您的代码包含：

```
scanf("%d", tempDouble); 
```

您需要添加`&`到您使用的参数中`scanf()`。并且`%d`与整数一起使用。当你想使用时，`double`你需要使用 `%lf`；与 a `float`，你会使用`%f`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T06:23:25.040

`void populate_array(double *pData[])`接受一个指针数组，而您只传递一个数组，它应该是：

```
void populate_array(double pData[])
{
    int i = 0;
    pData[0] = get_double("Please Enter A Number : "); 
} 
```

此外，当您阅读双精度时，它应该是：

```
// as proposed by Jonathan, the format string should contain '%lf' for double, I overlooked it.
scanf("%lf", &tempDouble); 
```

如果您通过`scanf`just `tempDouble`，它将其值视为地址，这当然是无效地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:06:01.717

```
for (i = 0; i < sizeof(data); i++) 
```

这将在您到达数组的边界后进行迭代。

```
for (i = 0; i < sizeof(data)/sizeof(double); i++) 
```

这可能有效，但并不优雅

```
double get_sum(int numberOfElements, double data[10])
{
    int i = 0;
    double result = 0;
    for (i = 0; i < numberOfElements; i++)
    {
        result += data[i];
    }
        return result;
} 
```

这是更好的方法

```
sum = get_sum(10, numbers); 
```

在主函数中调用 get_sum 函数，如下所示

# iphone - TWRequest post 回复 NSURLErrorDomain

> ID：10630806
> 
> 赞同：4
> 
> 时间：2012-05-17T06:20:45.367
> 
> 标签：iphone, twitter, twrequest, nsurlerrordomain

`TWRequest`我在使用api发送推文回复时遇到问题。我能够成功发布新的推文/状态，但回复失败并出现以下错误。请指教

我在回复帖子中收到的错误是：

```
Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. 

(NSURLErrorDomain error -1012.)" UserInfo=0x6c67900 {NSErrorFailingURLKey=https://api.twitter.com/1/statuses/update.json, NSErrorFailingURLStringKey=https://api.twitter.com/1/statuses/update.json, 

NSUnderlyingError=0x6ce28a0 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error -1012.)"} 
```

下面的示例代码：

```
NSDictionary *paramDict = nil;
if(isReply)
{
  paramDict = [NSDictionary dictionaryWithObjectsAndKeys:
  in_reply_to_status_id, @"in_reply_to_status_id",
  status, @"status",
  nil];
  NSLog(@"Status is %@ %@",status,in_reply_to_status_id);
}
  else
{
paramDict = [NSDictionary dictionaryWithObject:status forKey:@"status"];
}

TWRequest *sendTweet = [[TWRequest alloc]
initWithURL:[NSURL URLWithString:@"https://api.twitter.com/1/statuses/update.json"]
parameters:paramDict
requestMethod:TWRequestMethodPOST];
sendTweet.account = self.account;
[sendTweet performRequestWithHandler:^(NSData *responseData,
NSHTTPURLResponse *urlResponse,
NSError *error) {
if ([urlResponse statusCode] == 200) {
dispatch_sync(dispatch_get_main_queue(), ^{

NSLog(@"Sent tweet: %@", status);
});
}
else {
NSLog(@"Problem sending tweet: %@", error);
}
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T09:52:59.787

停止寻找有关 TWRequest 的任何帮助 iOS 6.0 已弃用 Twitter.framework 任何参考请访问 dev.twitter.com

1.  如果您只需要发布推文或带有推文的图像，请使用 Social.Framework，您可以为此目的使用 SLComposeViewController。

2.  在其他情况下，例如回复推文或收藏，甚至嵌入试试这个单例类： [https](https://github.com/fhsjaagshs/FHSTwitterEngine) ://github.com/fhsjaagshs/FHSTwitterEngine 阅读它的描述并启动演示和你的所有设置

# c# - 如何执行直接添加到 SSDT sqlproj 的 SQLCLR UDF 并解决引用错误 SQL71501

> ID：10630808
> 
> 赞同：1
> 
> 时间：2012-05-17T06:20:50.950
> 
> 标签：c#, sql, sql-server-2008-r2, sqlclr

我一直试图找到这个简单问题的答案——但到目前为止还没有弄清楚。

假设我有 MyDb.sqlproj，其中包含各种 sql 内容（存储过程、视图、触发器等）。

我通过 Add-> New item -> SQL CLR C#, User Defined Function 添加了一个新的 UDF。

例如：

```
namespace MyNameSpace
{
 public class MyClass
 {
    [SqlFunction(DataAccess = DataAccessKind.Read)]
    //I use different attributes here, but it doesn't matter
    public static int Method1()
    {
       return 0;
    }
 }
} 
```

在 MyDb.sqlproj Properties 中，SQLCLR 选项卡 MyDb 是程序集的名称和默认命名空间

在我的 sql 代码中，我使用**EXTERNAL NAME**调用 clr 方法：

```
CREATE PROCEDURE ClrMethod1
  RETURNS [int] WITH EXECUTE AS CALLER
AS EXTERNAL NAME [MyDb].[MyNamespace.MyClass].[Method1] 
```

我似乎尝试了一切来编译最后一行。它无法解析引用并获取：

> SQL71501：函数：[我的 sql 函数的名称] 对程序集 [MyDb] 有未解析的引用

请指出正确的方法来让它工作。我会错过什么？

我正在使用 VS2010 SP1 和最新版本的 SSDT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:08:41.740

您必须添加包含 CLR 代码的已编译 DLL 作为参考。因此，在您的 MyDb SSDT 项目->参考（右键单击）->添加参考下，浏览到 DLL。

如果您在同一个解决方案中有 CLR（类库）项目，您可能会通过引用项目而不是 DLL 而侥幸，但在我的情况下，我引用的是 DLL（为单独的解决方案编译）。

至于`AS EXTERNAL NAME`行的格式：

`AS EXTERNAL NAME [AssemblyName].[ClassName].[FunctionName]`

**注意：**对于 CLR 对象，我从类/代码周围删除命名空间只是为了简化事情，因为这一步通常是最有问题的。AssmeblyName/DLL Name/Namespace 很容易混淆。通过访问 Project Properties->Application->"Assembly Name:"，可以在 CLR 类库项目中找到 AssemblyName。我会从中删除任何非字母数字/空格，以简化名称并将其排除为问题。

所以我会尝试，一旦你开始工作，如果你真的想要命名空间，那么你可以添加命名空间并从那里找出语法，至少你知道其他部分是正确的。

* * *

好的，意识到您实际上在同一个 SSDT 项目中有一个 *.cs 文件。所以在这种情况下，如果你的代码是这样的：

CS文件：

```
public partial class UserDefinedFunctions
{
    [Microsoft.SqlServer.Server.SqlFunction]
    public static SqlString SqlFunction1()
    {
        // Put your code here
        return new SqlString (string.Empty);
    }
} 
```

SQL 文件：

```
CREATE PROCEDURE ClrMethod1
  RETURNS [int] WITH EXECUTE AS CALLER
AS EXTERNAL NAME [MyDB].[UserDefinedFunctions].[SqlFunction1] 
```

这为我编译。 **注意：**同样没有使用命名空间。当我添加新项目时...生成的代码没有命名空间。

# android - Android：Listview空指针异常无故

> ID：10630809
> 
> 赞同：-1
> 
> 时间：2012-05-17T06:20:59.767
> 
> 标签：android, listview, scroll, nullpointerexception

我正在尝试从 Application 类中定义的 ArrayList 中显示 ListView。但是，每当我在 Logcat 中没有给出原因的情况下滚动时，我都会遇到 NullPointerException。

**LogCat 输出：**

```
05-17 11:05:35.365: W/System.err(2173): java.lang.NullPointerException
05-17 11:05:35.375: W/System.err(2173):     at in.net.maloo.HomeScreenListView$myAdapter.getView(HomeScreenListView.java:66)
05-17 11:05:35.385: W/System.err(2173):     at android.widget.AbsListView.obtainView(AbsListView.java:1294)
05-17 11:05:35.385: W/System.err(2173):     at android.widget.ListView.makeAndAddView(ListView.java:1727)
05-17 11:05:35.395: W/System.err(2173):     at android.widget.ListView.fillDown(ListView.java:652)
05-17 11:05:35.395: W/System.err(2173):     at android.widget.ListView.fillGap(ListView.java:623)
05-17 11:05:35.395: W/System.err(2173):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:2944)
05-17 11:05:35.405: W/System.err(2173):     at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:2485)
05-17 11:05:35.405: W/System.err(2173):     at android.os.Handler.handleCallback(Handler.java:587)
05-17 11:05:35.405: W/System.err(2173):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-17 11:05:35.415: W/System.err(2173):     at android.os.Looper.loop(Looper.java:123)
05-17 11:05:35.415: W/System.err(2173):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-17 11:05:35.415: W/System.err(2173):     at java.lang.reflect.Method.invokeNative(Native Method)
05-17 11:05:35.425: W/System.err(2173):     at java.lang.reflect.Method.invoke(Method.java:521)
05-17 11:05:35.425: W/System.err(2173):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-17 11:05:35.425: W/System.err(2173):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-17 11:05:35.425: W/System.err(2173):     at dalvik.system.NativeStart.main(Native Method) 
```

**代码：**

```
package in.net.maloo;

import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class HomeScreenListView extends ListActivity {

    private static class myAdapter extends BaseAdapter{
        private LayoutInflater mInflater;

        public myAdapter(Context context){
            mInflater = LayoutInflater.from(context);

        }

        public int getCount() {
            // TODO Auto-generated method stub
            return myApp.feedLength(0);
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View conertView, ViewGroup parent) {
            ViewHolder holder;

            if (conertView == null) {
                conertView = mInflater.inflate(R.layout.listview_homescreen, null);
                holder = new ViewHolder();

                holder.text1 = (TextView) conertView.findViewById(R.id.hs_listview_symbol);
                holder.text2 = (TextView) conertView.findViewById(R.id.hs_listview_price);
                holder.text3 = (TextView) conertView.findViewById(R.id.hs_listview_unit);
                holder.text4 = (TextView) conertView.findViewById(R.id.hs_listview_change);
                holder.text5 = (TextView) conertView.findViewById(R.id.hs_listview_pcp);
            } else {

                holder = (ViewHolder) conertView.getTag();
            }

            String com, ltp, volume, ltq, pcp;
            com = myApp.getFuturesData(position, "Commodity", 0) + " - " + myApp.getFuturesData(position, "Expiry", 0);
            ltp = myApp.getFuturesData(position, "LTP") + "";
            ltq = "LTQ: " + myApp.getFuturesData(position, "LTQ");
            volume = "Volume: " + myApp.getFuturesData(position, "Volume");
            pcp = "PCP: " + myApp.getFuturesData(position, "PCP");

            try {

            holder.text1.setText(com);
            Log.e("Position", com);
            holder.text2.setText(ltp);
            holder.text3.setText(volume);
            holder.text4.setText(ltq);
            holder.text5.setText(pcp);
            return conertView;
            }
            catch (NullPointerException e){
                e.printStackTrace();
            }
            finally {
                return conertView;
            }
        }

        static class ViewHolder {
            TextView text1;
            TextView text2;
            TextView text3;
            TextView text4;
            TextView text5;
        }
    }

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setListAdapter(new myAdapter(this));        

}
} 
```

**listview_homescreen 布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="75dip" >

        <TextView
            android:id="@+id/hs_listview_symbol"
            android:layout_width="200dip"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_alignRight="@+id/hs_listview_change"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@android:color/tertiary_text_light"
            android:textSize="17dip" />

        <TextView
            android:id="@+id/hs_listview_price"
            android:layout_width="75dip"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="28,788"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15dip" />

        <TextView
            android:id="@+id/hs_listview_unit"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Vol"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
            android:id="@+id/hs_listview_pcp"
            android:layout_width="75dip"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:text="PCP"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
            android:id="@+id/hs_listview_change"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:text="Small Text"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </RelativeLayout>

</LinearLayout> 
```

显然，convertView.getTag() 方法由于某种原因返回 null，因此是所有问题。当我之前使用直接引用 myApp 中定义的数组时，相同的代码运行良好，但后来我切换到使用包含不同数据类型的自定义类的 ArrayList。

如果重要，ListView 活动包含在包含 3 个选项卡的 Tabhost 中。

对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:29:48.483

```
if (conertView == null) {
   conertView = mInflater.inflate(R.layout.listview_homescreen, null);
   holder = new ViewHolder();

   holder.text1 = (TextView) conertView.findViewById(R.id.hs_listview_symbol);
   holder.text2 = (TextView) conertView.findViewById(R.id.hs_listview_price);
   holder.text3 = (TextView) conertView.findViewById(R.id.hs_listview_unit);
   holder.text4 = (TextView) conertView.findViewById(R.id.hs_listview_change);
   holder.text5 = (TextView) conertView.findViewById(R.id.hs_listview_pcp);
   **conertView.setTag(holder);**
} else {
  holder = (ViewHolder) conertView.getTag();
} 
```

你错过了**conertView.setTag(holder);**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:24:38.300

你似乎失踪了`convertView.setTag(yourtag);`，所以当然`getTag()`是返回 null。

`if (conertView == null)`只需在您的末尾添加`else`.

# flex4 - Flex 组件未刷新

> ID：10630810
> 
> 赞同：0
> 
> 时间：2012-05-17T06:21:00.577
> 
> 标签：flex4, flash, refresh

嗨，我们在 UI 端的项目中使用 Flex 4。在加载应用程序仪表板时，我们得到一组 pod。我们单击一个 pod，然后 pod 视图打开。此 pod 视图包含数据网格，其中第一列作为超链接。当您单击超链接时，会打开另一个屏幕，这是我们的模块屏幕。

该模块屏幕顶部有一个提交按钮和几个数据网格。现在我们使用 RemoteObject 在网格中加载数据。每个网格的父容器都是一个 WindowShade 组件。

现在我们的要求是用户可以在一个或两个网格中进行修改，然后单击提交。根据用户修改的网格，我想将相应的 Window shade 设置为只读。如果用户修改了两个网格，我需要将两个 Window Shade 组件设为只读并禁用 SUBMIT 按钮。**用户应该能够在单击提交时立即看到此更改，而无需关闭屏幕或离开屏幕。**

当用户第一次打开屏幕时，我们会从后端获得一些状态，根据这些状态，我将 Window shades 设置为只读并启用/禁用按钮。当我单击提交时，我仍然点击后端并获取状态，但没有启用/禁用按钮或窗帘。

我在创建 swf 的 mxml 文件的 updateComplete 方法中编写了启用/禁用的逻辑。

updateComplete 在用户第一次打开屏幕时被调用。当用户点击提交时它不会被调用。为什么会这样？

我尝试使用 Loader 和 SWFLoader 来加载我的 SWF 文件，如下所示，但它也不起作用。var request:URLRequest = new URLRequest("com/citi/risk/credit/maintenance/view/widgets/CRCMaintenanceModule.swf"); var loader:Loader = new Loader(); loader.load（请求）；

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:19:29.137

您可能需要考虑两件事：

1) 简而言之，`FlexEvent.UPDATE_COMPLETE`被调度的事件本身已经完成渲染（经历了一个 Flex 组件生命周期）。这可能会发生一次或多次，具体取决于组件更改的频率以及需要重新渲染其状态。

此事件的频率/时间将根据调度它的对象而有所不同。例如，正在调整大小的容器将多次分派。一个从不改变的标签可能只做一次。

相反，您应该考虑添加一个“creationComplete”( `FlexEvent.CREATION_COMPLETE`) 事件侦听器。“creationComplete”只发生一次，您可以将侦听器添加到包含提交按钮的任何对象。

2) 当您单击提交时，您添加“updateComplete”侦听器的对象可能还没有改变到足以通过 Flex 的组件生命周期。所以没有事件被调度。

为什么这不会发生的答案实际上取决于您将事件侦听器添加到哪个对象。

您是否尝试过在提交按钮上使用“单击”处理程序，以便在单击按钮时禁用适当的元素？同样，与“updateComplete”不同，“click”事件只会发生一次；）

# asp.net - 无法使用数据适配器设置参数以选择命令

> ID：10630817
> 
> 赞同：0
> 
> 时间：2012-05-17T06:21:29.080
> 
> 标签：asp.net, ado.net

这是我的代码。我无法设置 TableName 变量，它抛出异常 **必须声明表变量“@TableName”**

```
public DataTable getAllDataFromTable(String TableName)
        {

            cmd.CommandText = "select * from @TableName";
            cmd.Parameters.AddWithValue("@TableName", TableName);
            da.SelectCommand = cmd;
            da.Fill(dt);
            return dt;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:26:54.290

您不能以这种方式使用参数。实现您正在寻找的最佳方法是使用 string.Format() 方法来创建您的选择语句。唯一真正的缺点是您将方法打开到 SQL 注入。

公共数据表 getAllDataFromTable（字符串表名）{

```
 cmd.CommandText = string.Format("select * from {0}", TableName)";
        da.SelectCommand = cmd;
        da.Fill(dt);
        return dt;

    } 
```

这是一个类似的线程。

[SqlParameter C#上的表名和表字段？](https://stackoverflow.com/questions/3128582/table-name-and-table-field-on-sqlparameter-c)

# excel - 将数据从分隔文件插入整个 Excel 工作表范围

> ID：10630822
> 
> 赞同：0
> 
> 时间：2012-05-17T06:21:46.897
> 
> 标签：excel, vba

我们正在从事一项工作，该工作需要将数据从分隔的文本文件插入到 Excel 工作表中。代码已经准备好并且可以工作了，但是它会逐个单元格地插入数据，这使得它的过程非常缓慢。请建议一种将数据一次性插入整个范围的方法，这应该会使操作更快。

找到下面的代码片段。

```
 Open FName For Input Access Read As #1

While Not EOF(1)
    Line Input #1, WholeLine
    If Right(WholeLine, 1) <> Sep Then
        WholeLine = WholeLine & Sep
    End If
    ColNdx = SaveColNdx
    Pos = 1
    NextPos = InStr(Pos, WholeLine, Sep)
    While NextPos >= 1
        TempVal = Mid(WholeLine, Pos, NextPos - Pos)
        Cells(RowNdx, ColNdx).Value = TempVal
        Pos = NextPos + 1
        ColNdx = ColNdx + 1
        NextPos = InStr(Pos, WholeLine, Sep)
    Wend
    RowNdx = RowNdx + 1
Wend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:09:35.493

您可以尝试在 Excel 中将分隔文件作为 csv/txt 文件打开：这很快。
或者，您可以逐个单元格地创建和填充二维变量数组，然后将变量数组分配给 Excel 范围。这将快得多，因为它最大限度地减少了对象模型的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:15:36.403

为什么不能像在 Excel 中一样打开 csv 文件（或变体）

下面的代码将每一行作为变量数组导入，然后逐行转储到 Excel。在将数据输入 Excel 之前，我可能应该更进一步，将每个行数组转储到一个组合数组中，但我这样做是因为我不清楚你为什么忽略单个整体输入

另外，我认为这些行是多余的，因为它只是在最右边的单元格中添加了一个空白“记录”。

```
 If Right(WholeLine, 1) <> Sep Then    
 WholeLine = WholeLine & Sep   
 End If 
```

**主要代码**

```
Sub Test()

Dim fName As String
Dim Sep As String
Dim WholeLine As String
Dim lngCnt As Long
Dim aRRSplit()

fName = "c:\test.csv"
Sep = ","

Open fName For Input Access Read As #1

While Not EOF(1)
    Line Input #1, WholeLine
    If Right$(WholeLine, 1) <> Sep Then
        WholeLine = WholeLine & Sep
    End If
    aRRSplit = Application.Transpose(Split(WholeLine, Sep))
    lngCnt = lngCnt + 1
    Cells(lngCnt, 1).Resize(1, UBound(aRRSplit)) = Application.Transpose(aRRSplit)
Wend
Close #1
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:31:51.830

这是我在网上找到的一些代码，对我来说很快。

```
Function doFileQuery(fileName As String, outSheet As String) As Boolean

Dim rootDir As String

rootDir = "W:\Development"

Dim connectionName As String

connectionName = "TEXT;" + rootDir + "\" + fileName

With Worksheets(outSheet).QueryTables.Add(Connection:=connectionName, Destination:=Worksheets(outSheet).Range("A5"))

    .Name = fileName
    .FieldNames = True
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .RefreshStyle = xlOverwriteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .TextFilePromptOnRefresh = False
    .TextFilePlatform = 437
    .TextFileStartRow = 1
    .TextFileParseType = xlDelimited
    .TextFileTextQualifier = xlTextQualifierDoubleQuote
    .TextFileConsecutiveDelimiter = False
    .TextFileTabDelimiter = False
    .TextFileSemicolonDelimiter = False
    .TextFileCommaDelimiter = False
    .TextFileSpaceDelimiter = False
    .TextFileOtherDelimiter = "|"
    .Refresh BackgroundQuery:=False

End With
doFileQuery = True
End Function 
```

希望这可以帮助！

# glsl - 如何在 150 版中获取纹理坐标到 GLSL？

> ID：10630823
> 
> 赞同：8
> 
> 时间：2012-05-17T06:21:50.693
> 
> 标签：glsl, shader, textures

在 GLSL 版本 110 中，我可以在 gl_TexCoord[] 中获取坐标，但在 150 中已弃用。

OpenGL代码：

```
shader.setupShaderFromFile(GL_VERTEX_SHADER, "t.vert");
shader.setupShaderFromFile(GL_FRAGMENT_SHADER, "t.frag");
shader.linkProgram();

glGetFloatv(GL_MODELVIEW_MATRIX, modelview_mat_);
glGetFloatv(GL_PROJECTION_MATRIX, projectionview_mat_);

shader.begin();

glUniformMatrix4fv( glGetUniformLocation(shader.getProgram(), "MVMatrix"), 1, GL_FALSE, modelview_mat_);
glUniformMatrix4fv( glGetUniformLocation(shader.getProgram(), "MPMatrix"), 1, GL_FALSE, projectionview_mat_);

glBegin(GL_QUADS);
    glTexCoord2f(0, 0);glVertex2f(0, 0);
    glTexCoord2f(1, 0);glVertex2f(100, 0);
    glTexCoord2f(1, 1);glVertex2f(100, 100);
    glTexCoord2f(0, 1);glVertex2f(0, 100);
glEnd();

shader.end(); 
```

着色器代码：

顶点-

```
#version 150
in vec3 in_vertex;
in vec2 in_coord;
uniform mat4 MVMatrix;
uniform mat4 MPMatrix;

out vec2 tex_coord;

void main()
{
    vec4 v = vec4( in_vertex, 1.0 );

    tex_coord = in_coord;
    gl_Position = MPMatrix * MVMatrix * v;
} 
```

分段：

```
#version 150

in vec2 tex_coord;

out vec4 frgcolor;

void main()
{
    frgcolor = vec4( tex_coord, 0.0, 1.0);
} 
```

最后的屏幕是一个红色的四边形。

如何将纹理坐标传递给着色器？还是我的代码错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T07:00:32.050

如果您不想使用已弃用的方法，则必须停止使用 glTexCoord2f，并使用自定义属性。

如果您想保持即时模式，您将使用[glVertexAttrib2f](http://www.opengl.org/sdk/docs/man/xhtml/glVertexAttrib.xml)。

通过在着色器链接后查询索引，将其与新变量“in_coord”配对：

```
int program = glCreateProgram();
//create shader as normal
int texcoord_index = glGetAttribLocation(program, "in_coord");

glBegin(GL_QUADS);
glVertexAttrib2f(texcoord_index, 0, 0); ... 
```

如果你想改用 VA/VBO，你改用的函数是 glEnableVertexAttribArray/glVertexAttribPointer

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T08:07:10.493

在您的情况下，只需查看`gl_TexCoord[0]`您的顶点着色器即可。绝对适用于着色器模型 1.5

在 C++ 中：

```
glActiveTexture(GL_TEXTURE0 );
glBindTexture(GL_TEXTURE_2D, id);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

glMatrixMode(GL_TEXTURE);
glLoadIdentity();

glBegin(GL_QUADS);
    glTexCoord2f(0, 0);glVertex2f(0, 0);
    glTexCoord2f(1, 0);glVertex2f(100, 0);
    glTexCoord2f(1, 1);glVertex2f(100, 100);
    glTexCoord2f(0, 1);glVertex2f(0, 100);
glEnd(); 
```

在顶点着色器中：

```
gl_TexCoord[0]=gl_MultiTexCoord0; 
```

在片段着色器中：

```
vec4 c = texture2D(texSampler, gl_TexCoord[0].st ); 
```

# c# - 在运行时将项目添加到 ToolStrip

> ID：10630828
> 
> 赞同：7
> 
> 时间：2012-05-17T06:22:29.040
> 
> 标签：c#, toolstripitem, toolstripmenu

您好，我有一个带有“收藏夹”菜单的 ToolStripMenu，我想在运行时在 WinForms 应用程序中添加子项。我有一个datagridview，我右键单击它以显示一个具有“添加到收藏夹”选项的上下文菜单。当该事件被触发时，我想使用来自 datagriview 的选定行中的一些文本（我已经知道如何做）添加一个项目到此收藏夹菜单。棘手的部分是我需要为我的`newlyCreatedToolStripMenuItem_Click`活动创建代码。稍后我将确定如何保存我的收藏夹列表。

所以我们要：

右键单击`datagridview`“John Smith”的行

选择“添加到收藏夹”`ContextMenu`

收藏夹`ToolStripMenu`中添加了一个新项目，上面写着“约翰·史密斯”

单击“John Smith”`ToopStripMenuItem`会触发一个动作（例如在 daragridview 行中选择该行等）

有什么好的开始想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T07:43:37.277

如果我理解正确，我想这正是您想要的：

```
 private void buttonAddFav_Click(object sender, EventArgs e)
    {
        ToolStripItem item = new ToolStripMenuItem();
        //Name that will apear on the menu
        item.Text = "Jhon Smith";
        //Put in the Name property whatever neccessery to retrive your data on click event
        item.Name = "GridViewRowID or DataKeyID";
        //On-Click event
        item.Click += new EventHandler(item_Click);
        //Add the submenu to the parent menu
        favToolStripMenuItem.DropDownItems.Add(item);
    }

    void item_Click(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T06:38:16.147

This is quite simple. You just have to setup a callback method which is used for all favorite `ToolStripMenuItem`'s. In this method you compare the `item.Text` or `item.Name` attributes and execute the different favorite methods.

```
private void FavoriteToolStriptem_Click(object sender, EventArgs e) {
    ToolStripMenuItem item = sender as ToolStripMenuItem;
    MessageBox.Show("You clicked on the menu item called " + item.Name + " shown as " + item.Text);
} 
```

# jquery - 将表格包装在 div 中然后附加一个新的 div

> ID：10630829
> 
> 赞同：1
> 
> 时间：2012-05-17T06:22:32.717
> 
> 标签：jquery

如何将表格包装在 div 中？

我正在使用 $("table").each(function() 来定位表，然后我需要将其包含在 div 中这是我的代码片段

```
 var strToAppend = "<div>Blah Blah</div>
     $(this).wrap(function(){
       return "<div class = 'tabDiv'  id='tabDiv' + tNum +">" + $(this) + "</div>" +   strToAppend;
   }); 
```

this crates [object Object] 在表格之前但没有 strToAppend

在网页中看到 [object Object] 我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:25:41.897

```
$('#yourtableid').wrap('<div class="tabDiv">'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:29:49.873

```
 var strToAppend = "<div>Blah Blah</div>";  

   $("table").each(function(){

    $(this).wrap('<div class="wrapper_div" />');
    $(this).parent('.wrapper_div').prepend(strToAppend);

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:22:49.860

您的目标似乎可以通过以下方式实现，这可能看起来比附加字符串更复杂，但仍然非常简单：

```
$('table').each(
    function(i){
        var that = $(this),
            tabDiv = $('<div />',
                       {'class' : 'tabDiv',
                        'id' : 'tabDiv' + i}),
            newDiv = $('<div />').text('some text in a div element');
        that.wrap(tabDiv);
        that.parent().append(newDiv);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sCwp4/1/)。

参考：

*   [`each()`](http://api.jquery.com/each/).
*   [`parent()`](http://api.jquery.com/parent/).
*   [`text()`](http://api.jquery.com/text/).
*   [`wrap()`](http://api.jquery.com/wrap/).

# wpf - 在应用动画之前，如何将故事板从新值立即动画化回原始值？

> ID：10630830
> 
> 赞同：1
> 
> 时间：2012-05-17T06:22:38.163
> 
> 标签：wpf, animation, storyboard

简而言之，我知道如何*从*当前值动画到新值，但我不知道该怎么做（也找不到）是如何动画回动画运行之前的值。

换句话说，假设我当前的背景是黄色的。我想根据某种逻辑将背景闪烁为红色，但我希望它再次从红色变回黄色。透明在这里不起作用，因为它用“透明”替换背景值，而不是淡入淡出。

另外，我不是指 FillBehavior 属性，您可以在它运行后使用它来“取消应用”动画值，也不是指自动反转动画，因为这意味着它必须向前运行我们会逐渐变红，而不是我们想要的瞬间脉冲。

到目前为止，我发现的唯一方法是在代码隐藏中执行此操作，但这会在逻辑安排方面引入其自身的问题。我只想将“To”值设置为动画前的值。怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:04:29.320

仅在此示例中使用[ColorAnimation.From 属性：](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.coloranimation.from.aspx)

```
<StackPanel>
    <StackPanel.Resources>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <EventTrigger RoutedEvent="MouseEnter">
                    <BeginStoryboard>
                        <BeginStoryboard.Storyboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Background.Color"
                                                From="Red" Duration="0:0:1" />
                            </Storyboard>
                        </BeginStoryboard.Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Style.Triggers>
        </Style>
    </StackPanel.Resources>
    <TextBox Text="AAA" Background="Yellow" />
    <TextBox Text="BBB" Background="Blue" />
</StackPanel> 
```

# php - PHP复杂字符串解析，JSON'able？

> ID：10630834
> 
> 赞同：1
> 
> 时间：2012-05-17T06:22:52.107
> 
> 标签：php, json, string, parsing

所以我有以下PHP字符串：

```
$output = {"playerId":1178,"percentChange":0.1,"averageDraftPosition":260,"percentOwned":0.1,"mostRecentNews":{"news":"Accardo was called up from Columbus on Monday, the Indians' official Twitter feed reports.","spin":"He'll replace Dan Wheeler on the active roster after carrying a 2.76 ERA over 13 appearances with the Clippers to start the season.","date":"Mon May 14"},"fullName":"Jeremy Accardo"} 
```

我需要的是：“印第安人官方推特报道称，周一，阿卡尔多从哥伦布被召来。” “他将在本赛季开始时在快船队出场 13 次以 2.76 的 ERA 取代现役名单上的丹·惠勒。” 作为子串。但我似乎无法找出最好和最优雅的方式来做到这一点。我尝试对字符串进行 JSON_decode，但没有返回任何内容。有任何想法吗？（我正在使用 PHP）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:34:50.033

那不是一个`string`. 试试这样：

```
$output = '{"playerId":1178,"percentChange":0.1,"averageDraftPosition":260,"percentOwned":0.1,"mostRecentNews":{"news":"Accardo was called up from Columbus on Monday, the Indians\' official Twitter feed reports.","spin":"He\'ll replace Dan Wheeler on the active roster after carrying a 2.76 ERA over 13 appearances with the Clippers to start the season.","date":"Mon May 14"},"fullName":"Jeremy Accardo"}';

$object = json_decode($output);
$array = json_decode($output, true);
$string = json_encode($array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:35:02.497

你有几个未转义的字符串，这导致了错误。一个简单的格式可以节省您的时间。

```
$output = '{
    "playerId":1178,
    "percentChange":0.1,
    "averageDraftPosition":260,
    "percentOwned":0.1,
    "mostRecentNews": {
        "news":"Accardo was called up from Columbus on Monday, the Indians official Twitter feed reports",
        "spin":"Hell replace Dan Wheeler on the active roster after carrying a 2.76 ERA over 13 appearances with the Clippers to start the season.",
        "date":"Mon May 14"
    },
    "fullName":"Jeremy Accardo"
}';
$json = json_decode($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:32:31.717

你试过这个吗？

```
$output = '{"playerId":1178,"percentChange":0.1,"averageDraftPosition":260,"percentOwned":0.1,"mostRecentNews":{"news":"Accardo was called up from Columbus on Monday, the Indians\' official Twitter feed reports.","spin":"He\'ll replace Dan Wheeler on the active roster after carrying a 2.76 ERA over 13 appearances with the Clippers to start the season.","date":"Mon May 14"},"fullName":"Jeremy Accardo"}';

$array = json_decode($output, true);

echo $array['mostRecentNews']['news'];
echo $array['mostRecentNews']['spin']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:40:56.317

json_encode 仅使用 UTF8。你在用 utf8 吗？你有语法错误。如果您手动定义 json 变量，它可能是这样的；

```
<?php
$output=<<<JSONSTR
{"playerId":1178,"percentChange":0.1,"averageDraftPosition":260,"percentOwned":0.1,"mostRecentNews":{"news":"Accardo was called up from Columbus on Monday, the Indians' official Twitter feed reports.","spin":"He'll replace Dan Wheeler on the active roster after carrying a 2.76 ERA over 13 appearances with the Clippers to start the season.","date":"Mon May 14"},"fullName":"Jeremy Accardo"}
JSONSTR;
$variable = json_decode($output);
var_dump($variable);
?> 
```

# html - 当我在本地使用视频文件时，HTML5 视频在 Firefox 和 IE 中不起作用

> ID：10630835
> 
> 赞同：0
> 
> 时间：2012-05-17T06:22:52.977
> 
> 标签：html, video, html5-video

也许有人遇到过这样的问题？我只是尝试使用 Video-JS 播放器。我第一次使用以下标记：

```
<video id="example_video_1" class="video-js vjs-default-skin" controls preload="none" 
        width="640" height="264"
        poster="http://video-js.zencoder.com/oceans-clip.png"
        data-setup="{}">
    <source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4' />
    <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm' />
    <source src="http://video-js.zencoder.com/oceans-clip.ogv" type='video/ogg' />
    <track kind="captions" src="captions.vtt" srclang="en" label="English" />
</video> 
```

一切都很好。然后我下载了这三个文件——mp4、webm和ogv，并将它们本地放到了我网站的目录中。标记：

```
<video id="example_video_1" class="video-js vjs-default-skin" controls preload="none" 
  width="640" height="264"
  poster="http://video-js.zencoder.com/oceans-clip.png"
  data-setup="{}">
      <source src="/Content/Images/Data/Media/oceans-clip.mp4" type='video/mp4' />
      <source src="/Content/Images/Data/Media/oceans-clip.webm" type='video/webm' />
      <source src="/Content/Images/Data/Media/oceans-clip.ogv" type='video/ogg' />
      <track kind="captions" src="/Scripts/video-js/captions.vtt" srclang="en" 
            label="English" />
</video> 
```

现在它在 Chrome 中运行良好，但在 Firefox 和 IE 中无法运行。在我尝试使用其他 HTML5 播放器 - Leanpack 之前，我遇到了同样的行为。问题的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:45:48.687

您的服务器（即使它是本地主机）需要设置为提供正确的 mime 类型，否则更麻烦的浏览器将无法播放文件。[有关更多信息，请参阅深入了解 html5](http://diveintohtml5.info/video.html#video-mime-types)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:41:29.783

将文件扩展名从 .ogv 更改为 .ogg。它运作良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:35:36.550

将绝对路径添加到 mp4 文件，IE9 将播放它。 [请参阅 Jonas 的 video.js 帮助指南上的答案](http://help.videojs.com/discussions/problems/1339-can-get-to-work-in-everything-but-ie9)

# php - PHP + Forms + wordpress：在搜索提交时从 $_GET['s'] 中删除重音字符

> ID：10630836
> 
> 赞同：0
> 
> 时间：2012-05-17T06:22:54.980
> 
> 标签：php, forms, wordpress, get, special-characters

我在我的主题中使用以下搜索功能。

我想通过删除任何重音字符（如 é、ó、í 等）来操纵放入 URL 中的 $_GET 变量。关键是 URL 中没有任何特殊字符。Wordpress 有一个功能`remove_accents`可以完成将重音字符转换为非重音字符的功能，但我不确定其余的......

谢谢！

我怎样才能做到这一点？

```
// SEARCH FORM
function bam_search_form($echo = true) {
    do_action( 'get_search_form' );

    $uri = $_SERVER["REQUEST_URI"];

    global $blog_id;
    $searchtext = 'Buscá';

    $search_form_template = locate_template('searchform.php');
    if ( '' != $search_form_template ) {
        require($search_form_template);
        return;
    }

    $form = '<form role="search" method="get" id="searchform" action="' . esc_url( home_url( '/' ) ) . '" >
    <div><input type="text" value="'.$searchtext.'" name="s" class="s c1 caps c3h" />';

    $form .= form_extend($uri, $form);

    $form .= '<input type="submit" id="searchsubmit" class="c1" value="." />
    </div>
    </form>';

    if ( $echo )
        echo apply_filters('get_search_form', $form);
    else
        return apply_filters('get_search_form', $form);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:26:37.367

您可以实现一个提交 javascript 函数来替换搜索字符串字符

改变

```
$form = '<form role="search" method="get" id="searchform" action="' . esc_url( home_url( '/' ) ) . '" >
    <div><input type="text" value="'.$searchtext.'" name="s" class="s c1 caps c3h" />'; 
```

至

```
$form = '<form role="search" onsubmit="changeSearch()" method="get" id="searchform" action="' . esc_url( home_url( '/' ) ) . '" >
    <div><input type="text" id="searchvalue" value="'.$searchtext.'" name="s" class="s c1 caps c3h" />'; 
```

并添加这个 javascript

```
function changeSearch(){
    var field = document.getElementById('searchvalue');
    var r= field.value.toLowerCase();
    r = r.replace(new RegExp(/\s/g),"");
    r = r.replace(new RegExp(/[àáâãäå]/g),"a");
    r = r.replace(new RegExp(/æ/g),"ae");
    r = r.replace(new RegExp(/ç/g),"c");
    r = r.replace(new RegExp(/[èéêë]/g),"e");
    r = r.replace(new RegExp(/[ìíîï]/g),"i");
    r = r.replace(new RegExp(/ñ/g),"n");                
    r = r.replace(new RegExp(/[òóôõö]/g),"o");
    r = r.replace(new RegExp(/œ/g),"oe");
    r = r.replace(new RegExp(/[ùúûü]/g),"u");
    r = r.replace(new RegExp(/[ýÿ]/g),"y");
    r = r.replace(new RegExp(/\W/g),"");
    field.value = r;
} 
```

您还可以添加更多替换模式。

# linux - 如何在 bash shell 脚本中从文件中添加两行数字？

> ID：10630840
> 
> 赞同：1
> 
> 时间：2012-05-17T06:23:06.303
> 
> 标签：linux, shell

我试图从 shell 中的文件中添加数字，但我有点卡住了。我是 bash 新手，我不知道该怎么做。我的文件示例是这样的。

猫温度

23 49

35 50

我想做的是添加 23 和 35 以及添加 49 和 50。任何想法都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T06:28:36.507

使用`awk`：

```
 awk '{f1+=$1;f2+=$2} END{print f1" "f2}' temp 
```

> 如果我想将 f1 和 f2 保存到另一个名为 temp1 的文件中，我该怎么做？

将标准输出重定向到 file `temp1`。

```
 awk '{f1+=$1;f2+=$2} END{print f1" "f2}' temp > temp1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:36:36.680

您可以使用 bc 来评估任何数值表达式：

```
echo "32 + 33" | bc 
```

或者对于整个文件：

```
sed 's/ /+/' < temp|bc 
```

# php - 尝试同时循环遍历 2 个数组

> ID：10630842
> 
> 赞同：1
> 
> 时间：2012-05-17T06:23:19.010
> 
> 标签：php, html, loops, foreach

> **可能重复：**
> [PHP foreach 循环中的多个索引变量](https://stackoverflow.com/questions/4157810/multiple-index-variables-in-php-foreach-loop)

我正在尝试使用 mysqli、php 和 html 创建前后图像显示。我正在使用 mysqli 和 php 从数据库中提取记录，并尝试使用 foreach 循环在无序列表中查看结果。

我有我的 2 个数组，它们是在 mysqli 查询的 while 循环中创建的。该数组将仅包含 5 个结果（用于分页，以后可能会更改）。

```
$before_array[] = '
<div class="highslide-gallery">
<li>
<a href="'.$beforeurl.'" class="highslide" onclick="return hs.expand(this)">
<img src="'.$beforeurl.'" width="100px" height="125px" alt="Highslide JS">
</a>
</li>';

$after_array[] = '
<li><a href="'.$afterurl.'" class="highslide" onclick="return hs.expand(this)">
<img src="'.$afterurl.'" width="100px" height="125px" alt="Highslide JS">
</a>
</li>'; 
```

在页面视图中，我有以下代码来显示前后图片。

```
<div id="hoverwrap">
<ul class="hoverbox">;

<?php 
foreach ($before_array as $value) {
    echo $value; 
 }

foreach ($after_array as $value) {
  echo $value;
}
?>

</ul>

</div><!-- end of hoverwrap div--> 
```

使用当前代码，它正在显示图片：之前-之前-之前-之前-之前-之后-之后-之后-之后-之后。

我希望它在哪里显示：之前 - 之后 - 之前 - 之后等等等等。

我在考虑一个while循环，但无论我尝试以哪种方式实现它，它都会产生类似的显示。任何正确方向的帮助或指示将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:25:21.190

一个`for`循环将在这里解决问题：

```
$x = count($before_array);
for($i = 0; $i < $x; $i++) {
    print $before_array[$i];
    print $after_array[$i];
} 
```

为什么不能在 mysql 循环本身中打印它？

# python - 如何在 python 中使用 urllib2 和 urllib 来制作一个自动登录我的 wordpress 博客的脚本？

> ID：10630845
> 
> 赞同：1
> 
> 时间：2012-05-17T06:23:40.237
> 
> 标签：python, http

我正在学习使用 urllib2 和 urllib。我根据[http://docs.python.org/howto/urllib2.html](http://docs.python.org/howto/urllib2.html)的给定示例编写了相同的脚本。但是好像不行。响应的是登录页面的源代码！我用firebug检查是否返回相同的源代码，答案是肯定的！但是我仍然可以在浏览器上登录我的博客!我需要知道什么样的知识？网址？或者 ......

```
#! /usr/bin/python
# -*- coding: utf-8 -*-

import urllib2
import urllib

url='http://www.mywordpressblog.com/wp-login.php'
values={'log':'my login name',
        'pwd':'my password'}
data=urllib.urlencode(values)
req=urllib2.Request(url,data)
response=urllib2.urlopen(req)
the_page=response.read()
print the_page 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:21:15.900

我不确定这个原则是否适用于 Wordpress，但是要使用基本的 http 身份验证来扩充您的代码，您应该：

```
import urllib2
import urllib
import base64

USERNAME="user"
PASSWORD="password"

url='http://www.mywordpressblog.com/wp-login.php'
req = urllib2.Request(url)

# create http header with base64 encoded user and password
base64string = base64.encodestring(
    '%s:%s' % (USERNAME, PASSWORD))[:-1]
authheader =  "Basic %s" % base64string
req.add_header("Authorization", authheader)

response =urllib2.urlopen(req)
the_page=response.read()
print the_page 
```

要获取更多信息，请查看[基本身份验证教程](http://www.voidspace.org.uk/python/articles/authentication.shtml)

**更新**

`POST`您应该发出带有标题字段的https请求，并`User-Agent`模拟浏览器之一和 urlencoded 凭据，如下所示：

```
import urllib2
import urllib

url='https://en.wordpress.com/wp-login.php'

headers = [
  ("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5")]

data = [
    ("log","YOURNAME"), 
    ("pwd","YOURPASSWORD"), 
    ("testcookie",1), 
    ("submit","Log In"), 
    ("redirect_to","http://wordpress.com/"), 
    ("rememberme","forewer")]

req = urllib2.Request(url, urllib.urlencode(dict(data)), dict(headers))
response = urllib2.urlopen(req)

the_page=response.read()
print the_page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:40:57.387

You must use HTTPBasicAuthHandler for login into your blog. See docs at "Basic Authentication" section.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T19:48:44.617

使用[`requests`](http://docs.python-requests.org/en/latest/index.html).

```
data = {'username': 'foo', 'password': 'secret'}
url = 'http://www.example.com/'
r = requests.post(url, data=data) 
```

# jquery - 更改jquery数据表“显示10个条目”选择框的值

> ID：10630853
> 
> 赞同：62
> 
> 时间：2012-05-17T06:25:08.960
> 
> 标签：jquery, datatables

默认情况下，jquery 数据表默认显示 10 并且有

选项：**10,25,50,100**

如何更改这些选项？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-04-18T15:17:02.107

不要忘记更改 iDisplayLength 为好：

```
$(document).ready(function() {
    $('#tbl_id').dataTable({
        "aLengthMenu": [[25, 50, 75, -1], [25, 50, 75, "All"]],
        "iDisplayLength": 25
    });
} ); 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-05-17T06:37:28.090

```
$(document).ready(function() {
    $('#example').dataTable( {
    "aLengthMenu": [[25, 50, 75, -1], [25, 50, 75, "All"]],
    "pageLength": 25
    } );
} ); 
```

aLengthMenu ：此参数允许您在启用分页时 DataTables 显示的长度下拉菜单中轻松指定条目。它可以是一维数组，用于显示的选项和值，也可以是二维数组，将第一个位置的数组用作值，第二个位置的数组作为显示的选项（适用于语言字符串，例如“All”）。

**更新**

从 DataTables v1.10 开始，您正在寻找的选项是`pageLength`和`lengthMenu`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-03T07:07:22.980

就我而言，**aLengthMenu**不起作用。所以我用了这个。它正在工作。

```
jQuery('#dyntable3').dataTable({            
            oLanguage: {sLengthMenu: "<select>"+
            "<option value='100'>100</option>"+
            "<option value='200'>200</option>"+
            "<option value='300'>300</option>"+
            "<option value='-1'>All</option>"+
            "</select>"},
            "iDisplayLength": 100

        }); 
```

谢谢

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-22T15:29:23.920

根据[datatables.net](https://datatables.net/examples/advanced_init/length_menu.html)，正确的方法是添加带有值数组的 lengthMenu 属性。

```
$(document).ready(function() {
    $('#example').dataTable( {
        "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]
    } );
} ); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-07-17T11:55:27.410

```
 $('#tblSub1View').dataTable({
                    "bJQueryUI": true,
                    "sPaginationType": "full_numbers",
                    "bDestroy": true,
                    "aoColumnDefs": [{
                        'bSortable': false,
                        'aTargets': [0, 1]
                    }],
                    "aLengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
                    "iDisplayLength": 10,
                }); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-14T02:23:18.690

如果你点击一些按钮，然后改变数据表的显示长度，你可以试试这个：</p>

```
 $('.something').click( function () {
var oSettings = oTable.fnSettings();
oSettings._iDisplayLength = 50;
oTable.fnDraw();
});

oTable = $('#example').dataTable(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-19T11:12:27.327

如果您想将“lengthMenu”与按钮（复制、导出）一起使用，则必须使用此选项 dom：“lBfrtip”。在这里[https://datatables.net/reference/option/dom](https://datatables.net/reference/option/dom)您可以找到每个符号的含义。例如，如果您将像这样使用 'Bfrtip'，lengthMenu 将不会出现。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-17T11:35:18.507

您无需编写 Js 即可轻松实现此目的。只需添加一个名为 data-page-length={put your number here} 的属性。请参见下面的示例，例如，我使用了 100

```
<table id="datatable-keytable" data-page-length='100' class="p-table table table-bordered" width="100%"> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-30T06:47:33.563

[![在此处输入图像描述](../Images/b7bc4579b3b4ecc5f1cbce28de6d8c2a.png)](https://i.stack.imgur.com/TvyAR.png) 页面长度：50，

为我工作谢谢

供参考的版本

jquery-3.3.1.js

/1.10.19/js/jquery.dataTables.min.js

/buttons/1.5.2/js/dataTables.buttons.min.js

# android - 想要在一个文本字段中以 dd/mm/yyyy hh:mm 格式在 android 中一起打印日期和时间

> ID：10630858
> 
> 赞同：0
> 
> 时间：2012-05-17T06:25:26.980
> 
> 标签：android, android-layout

我是android的新手，正在努力实现这一目标。

我想选择日期和时间，还想在一个文本字段中添加选定的日期和时间，格式为 dd/mm/yyyy hh:mm。

我对此进行了搜索，但找不到我想要实现的目标。

任何关于代码或链接的指南将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:27:10.067

您可以使用[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)来格式化*Date*。

```
String format = "dd-MM-yyyy";

SimpleDateFormat sdf = new SimpleDateFormat(format);
System.out.println(sdf.format(yourdate)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:23:21.803

如果您需要制作自定义日期和时间选择器，那么您可以看到他们是如何制作的。[Android 日期滑块](http://code.google.com/p/android-dateslider/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:34:38.357

使用这个你可以你想要的格式

```
String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date()); 
```

像这样**2012 年 5 月 17 日下午 12:03:09**

# ios - 计算 iOS SDK 大小

> ID：10630859
> 
> 赞同：0
> 
> 时间：2012-05-17T06:25:35.850
> 
> 标签：ios, frameworks, sdk, size

我正在使用这个包构建我自己的 iOS 框架：[https ://github.com/kstenerud/iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)

这可能是一个非常愚蠢的问题，但我如何计算我的输出 SDK 的大小？换句话说，`du -sh`.framework 目录的大小是规范的“SDK 大小”，还是在将 SDK 与应用程序链接并捆绑后进行了一些压缩，从而导致更小的大小？

如果我的问题不清楚，我会提前道歉，我很乐意澄清它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:23:39.650

在与一些开发人员交谈后，“标准”似乎是在没有你的框架的情况下编译一个应用程序，归档到一个 IPA 并查看大小，然后做同样的事情，但包含你的框架并考虑 IPA 大小的差异是您的 SDK 大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:31:23.547

XCode Project Navigator 中应该有一个 products 文件夹（左侧窗口）

展开它并单击产品，它应该显示产品的大小，在这种情况下是框架。

# iphone - CoreText 手动换行：如何定位文本，垂直对齐？

> ID：10630863
> 
> 赞同：1
> 
> 时间：2012-05-17T06:25:58.027
> 
> 标签：iphone, ios, uilabel, core-text

我正在尝试创建一个自定义标签子类来绘制富文本并且我可以在其中设置不同的参数。我最大的要求之一是关于换行。在 UILabel 中是固定的，有时它不符合图形要求。
因此，在 Apple 网站上帮助自己编写了一个小片段，我开始编写自己的课程，并且它（以某种方式）有效，但我遇到了一个问题：

1.  如果只有一行，文本不垂直对齐，它总是从屏幕的左上角开始

这是我到目前为止编写的代码：

```
- (void)drawRect:(CGRect)rect
{
    if (_text) {

        if (!_attribstring) {
            [self createAttributedString];
        }
        if (self.lineBreakValue == 0) {
            self.lineBreakValue = 9;
        }

        CGContextRef ctx = UIGraphicsGetCurrentContext();
        CGContextTranslateCTM(ctx, 0, self.bounds.size.height);
        CGContextScaleCTM(ctx, 1.0, -1.0); 
        CGContextSetShouldSmoothFonts(ctx, YES);
        CGContextSetShouldAntialias(ctx, YES);
        CGRect textRect = CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height);

        //Manual Line braking
        BOOL shouldDrawAnotherLine = YES;
        double width = textRect.size.width;
        CGPoint textPosition = CGPointMake(textRect.origin.x, textRect.origin.y+textRect.size.height-self.lineBreakValue);
        ;
        // Initialize those variables.

        // Create a typesetter using the attributed string.
        CTTypesetterRef typesetter = CTTypesetterCreateWithAttributedString((__bridge CFAttributedStringRef )  self.attribstring);

        // Find a break for line from the beginning of the string to the given width.
        CFIndex start = 0;
        while (shouldDrawAnotherLine) {

            CFIndex count = CTTypesetterSuggestLineBreak(typesetter, start, width);

            // Use the returned character count (to the break) to create the line.
            CTLineRef line = CTTypesetterCreateLine(typesetter, CFRangeMake(start, count));

            // Get the offset needed to center the line.
            float flush = 0.5; // centered
            double penOffset = CTLineGetPenOffsetForFlush(line, flush, width);

            // Move the given text drawing position by the calculated offset and draw the line.
            CGContextSetTextPosition(ctx, textPosition.x + penOffset, textPosition.y);
            CTLineDraw(line, ctx);
            if (line!=NULL) {
                CFRelease(line);
            }
            // Move the index beyond the line break.

            if (start + count >= [self.attribstring.string length]) {
                shouldDrawAnotherLine = NO;
                continue;
            }
            start += count;
            textPosition.y-=self.lineBreakValue;
        }
        if (typesetter!=NULL) {
            CFRelease(typesetter);

        }

    }

} 
```

有人可以指出我正确的方向吗？问候，
安德里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:33:24.657

对于垂直对齐的文本布局，您需要知道行的总高度，`y position`第一行的高度为：

```
(self.bounds.size.height - (totalLineHeight)) / 2 - font.ascent; 
```

因此，您的代码中需要 2 个循环，一个用于计算线条的总高度（您还可以保存每条线的字符数以供以后在另一个循环中用于绘图），另一个肯定用于从使用`y position`计算的开始绘制线条上式。

注意：每行的高度可以是字体大小，也可以在行与行之间添加行间距，您需要确保在计算行高和绘制这些行时保持一致`y position`。

# c# - xunit 测试是否完全隔离运行？

> ID：10630872
> 
> 赞同：2
> 
> 时间：2012-05-17T06:26:38.240
> 
> 标签：c#, xunit.net

如果我有一个静态类：

```
public static class Foo
{
    public static string Bar = "baz";
} 
```

在 xunit 测试中，我做了这样的事情（人为）：

```
public class FooTests
{
    [Fact]
    public void Bar_can_be_set_to_buz()
    {
        Foo.Bar = "buz";
    }

    [Fact]
    public void Some_other_test()
    {
        //Is Foo.Bar "buz", or is there isolation ?
    }
} 
```

两个测试共享外部静态类，还是测试之间完全隔离？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T22:00:10.140

每个测试都会获得一个新的测试类实例。任何静态状态都将在所有测试之间共享。

# android - Spinner 未使用 AsyncTask 在 Android 中显示项目列表

> ID：10630873
> 
> 赞同：0
> 
> 时间：2012-05-17T06:26:43.997
> 
> 标签：android, android-asynctask, spinner, android-arrayadapter

我有一个活动，在 AsyncTask 的帮助下，我使用 Spinner 从 WebService 调用中填充它。我的问题是，在 logcat 中，我可以看到所有`ArrayAdapter<String>`项目，但是当我将此适配器提供给我的 Spinner 时，它不显示下拉列表项目。这是我的代码片段：

```
 public static ArrayAdapter<String> adapter;
    Spinner spnrCourseType;
    spnrCourseType.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                new DownloadCourseTypesList().execute(training_id);
                return true;
            }
        });

        spnrCourseType.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                ting("You Selected : " + adapter.getItem(arg2));
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });
    /** Thread AsyncTask Class */
    private class DownloadCourseTypesList extends AsyncTask<String,Void,ArrayList<String>> {

        ProgressDialog progressDialog = new ProgressDialog(CorporateTrainingInquiryActivity.this);
        protected void onPreExecute(){
            actionBar.setProgressBarVisibility(View.VISIBLE);
            progressDialog.setTitle("Course Types Loading..");
            progressDialog.setMessage("Please Wait..");
            progressDialog.show();  
        }

        protected ArrayList<String> doInBackground(String... params) {          

            trainingList = new TrainingList(params[0]);
            ArrayList<String> values = trainingList.getTrainingList();    
//          adapter = new ArrayAdapter<String>(CorporateTrainingInquiryActivity.this,android.R.layout.simple_spinner_item,values);

            return values;
        }

        protected void onPostExecute(ArrayList<String> values) {
            actionBar.setProgressBarVisibility(View.GONE);
            adapter = new ArrayAdapter<String>(CorporateTrainingInquiryActivity.this,android.R.layout.simple_spinner_item,values);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            adapter.insert("Select Course Type",0);
            spnrCourseType.setAdapter(adapter);

            for(int i=0;i<adapter.getCount();i++){
                System.out.println("Item in adapter at position : " + i + adapter.getItem(i));
            }

            adapter.notifyDataSetChanged();
            if(progressDialog.isShowing()){
                progressDialog.dismiss();
            }
        }      
    } 
```

当我执行上述代码时，ProgressDialog 变得可见，并且只有第一项，即“选择课程类型”在 Spinner 本身上可见，但在下拉列表项中不可见。关于它的任何线索。从昨天开始，我就陷入了困境:( ![在此处输入图像描述](../Images/99499422bc19832bbb6d7ee4b4228ad8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:32:05.823

这段代码： -

```
 spnrCourseType.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            new DownloadCourseTypesList().execute(training_id);
            return true;
        }
    }); 
```

可能会导致某种竞争条件，当您按下微调器时，您的任务将被执行，但它可能无法足够快地填充微调器以让您看到结果。

我建议将此代码移至其他地方，例如 onCreate 方法或等效方法。

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    new DownloadCourseTypesList().execute(training_id);
} 
```

希望有帮助。

# jquery - 需要将可折叠项目的标题放在 Jquery Mobile 1.1.0 的中心

> ID：10630876
> 
> 赞同：0
> 
> 时间：2012-05-17T06:26:54.840
> 
> 标签：jquery, html, jquery-mobile

我有这样的可折叠内容[http://jsfiddle.net/coderslay/Ae5CU/](http://jsfiddle.net/coderslay/Ae5CU/)

因为摘要在左侧对齐。我需要在中心对齐摘要。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:32:39.997

尝试这样的事情：

```
.ui-collapsible-heading a {text-align:center;}​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:38:14.317

您是指摘要中的内容还是标题本身？

如果它的内容下面的css似乎可以解决问题。虽然没有完全测试。

将此添加到 jsFiddle 中的 CSS 部分（只会更新 summaryid 标头）

```
​#summaryid .ui-btn-text​ { text-align:center;margin:0px auto; display:inline-block; }​ 
```

对于所有可折叠标题的全局更新，请使用

.ui-collapsible-heading .ui-btn-text { text-align:center; 边距：0px 自动；显示：内联块；}​</p>

标头正在由 jQuery Mobile 转换为以下 HTML 输出

```
 <h2 id="summaryid" class="ui-collapsible-heading ui-collapsible-heading-collapsed">
<a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-up-c ui-fullsize ui-btn-icon-right ui-corner-top ui-corner-bottom ui-btn-up-null" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="plus" data-iconpos="right" data-theme="null" data-mini="false">
    <span class="ui-btn-inner ui-corner-top ui-corner-bottom">
        <span class="ui-btn-text">
            <span>
                Summary
            </span>
            <span class="ui-collapsible-heading-status"> 
                click to expand contents
            </span>
        </span>
        <span class="ui-icon ui-icon-plus ui-icon-shadow">&nbsp;</span>
    </span>
</a> 
```

因此，沿着 DOM 走下去，我们可以找到 id 'summaryid' 然后是类 'ui-btn-text' 的子级，它是带有单词 summary 的跨度。您需要做的是将跨度设置为出现在中心。为此，请使用 margin:0px auto 和 display:inline-block。

现在我还没有用较小的分辨率或长标题对此进行测试，但这应该可以帮助您入门。

干杯，

尼科

# maven - org.eclipse.equinox 的 Maven 构建失败

> ID：10630877
> 
> 赞同：2
> 
> 时间：2012-05-17T06:27:08.147
> 
> 标签：maven

在 [1.0.0-v20070606] 中找不到匹配范围 [1.0.0,2.0.0) org.eclipse.equinox:app:jar:null 的版本

```
 <dependency>
            <groupId>org.eclipse.xsd</groupId>
            <artifactId>edit</artifactId>
            <version>2.3.0-v200706262000</version>
    </dependency>
    <dependency>
            <groupId>org.eclipse.emf</groupId>
            <artifactId>common</artifactId>
            <version>2.1.0</version>
</dependency>   

    <dependency>
        <groupId>org.eclipse.equinox</groupId>
        <artifactId>app</artifactId>
        <version>1.0.0-v20070606</version>
    </dependency> 
```

# iphone - 如何使用 Dropbox iOS SDK 1.1 检查某个用户的 Dropbox 帐户中是否存在 File？

> ID：10630880
> 
> 赞同：3
> 
> 时间：2012-05-17T06:27:20.677
> 
> 标签：iphone, ios, dropbox, dropbox-api

我目前正在开发一个使用*Dropbox iOS SDK 1.1 版的应用程序。*我正在为 iOS 5.0 及更高版本开发应用程序。我浏览了 SDK 中包含的*DBRESTClient.h*文件中的所有方法。我找不到允许我检查给定文件是否存在于目录中给定位置的方法。我在想是否可以在*DBRESTClient.h*文件中使用以下方法来做同样的事情

```
- (void)loadMetadata:(NSString*)path; 
```

在这里，我想到了使用 Path 参数中的 Location/FileName 来找出给定文件是否存在。

我完全不确定这样做的正确方法。如果这不正确，请提出一些更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:43:31.677

Dropbox SDK 不支持搜索（它只支持 Dropbox API 的一个子集）。要高效地做您需要的事情，请直接调用 REST API 的搜索方法

[https://www.dropbox.com/developers/reference/api#search](https://www.dropbox.com/developers/reference/api#search)

如果您想坚持使用 SDK，您可以为每个文件夹级别递归调用 loadMetadata，直到找到您要查找的文件。但我不建议这样做（想象一下，当您拨打数十或数百个电话时，您的用户在手机网络上）。

# android - 如何重置动画师？

> ID：10630883
> 
> 赞同：2
> 
> 时间：2012-05-17T06:27:28.053
> 
> 标签：android, animation, drawing

我正在使用单个 Animator 实例来平滑地向下或向右滚动视图。首先，我在自定义 View 实现中使用通用参数对其进行设置：

```
private ObjectAnimator animator = new ObjectAnimator();
{
    animator.setTarget(this);
    animator.setDuration(moveDuration);
} 
```

然后我使用两种方法向下和向右移动

```
public void moveRight() {

    if( animator.isRunning() ) animator.end();

    animator.setPropertyName("scrollX");
    animator.setIntValues(getScrollX(), getScrollX() + cellWidth);
    animator.start();
}

public void moveDown() {

    if( animator.isRunning() ) animator.end();

    animator.setPropertyName("scrollY");
    animator.setIntValues(getScrollY(), getScrollY() + cellHeight);
    animator.start();
} 
```

我发现，只有第一个调用的方法才能正常工作。另一个工作错误，好像第一次运行的方法在 animator 对象中留下了一些痕迹。

如何删除这些痕迹并重新编程动画师从右到下滚动，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:34:21.237

我也有这个问题。出于某种原因，第二次使用 setPropertyName() 似乎并没有清除以前的属性和/或值。

使用 setProperty() 来解决这个问题，例如：

```
Property<View, Float> mTranslationXProperty = Property.of(View.class, 
   Float.class, "translationX");
Property<View, Float> mScaleXProperty = Property.of(View.class, 
   Float.class, "scaleX");
...
animator.setProperty(mTranslationXProperty);
animator.setFloatValues(500f, 0f); 
animator.start();
...
animator.setProperty(mScaleXProperty);
animator.setFloatValues(1f, 0f); 
animator.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T09:15:47.530

我能够使用以下代码重置值：

```
final AnimatorSet animate = (AnimatorSet) AnimatorInflater.loadAnimator(this, R.anim.anim_move);
List<Animator> animations = animate.getChildAnimations();
for (int i = 0; i < animations.size(); i++) {
    ObjectAnimator animator = (ObjectAnimator) animations.get(i);
    if (animator.getPropertyName().contentEquals("y")) {
        animator.setFloatValues(0f, 500f);
    }
}
animate.setTarget(starlightImageView);
animate.start(); 
```

# php - 正则表达式匹配固定单词的任何大写或小写字母

> ID：10630886
> 
> 赞同：2
> 
> 时间：2012-05-17T06:27:49.560
> 
> 标签：php, regex

我需要匹配`abcd`可能包含的文本：

`abcd`ssss

ffff `abcd`ksdks

`AbCd`fdjb

`aBCd`

简而言之，任何匹配都是合格的，它可以将大写或无大写与文本与其他文本或作为单独的词匹配

## 编辑

环境：PHP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:36:35.633

这是您的 PHP 解决方案：

```
if (preg_match('/abcd/i', $subject)) {
    # Successful match
} else {
    # Match attempt failed
} 
```

根据您的要求，它可以`abcd`在任何地方找到，包括作为单词的一部分。`i`由于后缀，它也不区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:31:13.103

如果您想在输入中的任何位置搜索字符串`abcd`（甚至作为其他单词的一部分），您可以使用正则表达式

```
if(preg_match('/abcd/i',$input)) {
  // $input has abcd somewhere in some case.
} 
```

但是你想要`abcd`而不是作为其他词的一部分，你可以使用：

```
if(preg_match('/\babcd\b/i',$input)) {
  // $input has abcd word somewhere in some case.
} 
```

# sql - 如何在 SQL Server 2008 中导入表而不丢失索引和键

> ID：10630888
> 
> 赞同：5
> 
> 时间：2012-05-17T06:27:53.283
> 
> 标签：sql, sql-server

当我使用导入/导出向导时，它会丢失键和索引。我需要导入许多表。请帮忙。

我还通过生成脚本然后进行导入来创建表，但出现验证错误。也许我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T06:53:11.117

首先，您创建一个创建脚本来创建表、键、索引。如果您右键单击数据库，在上下文菜单中您可以单击在数据库调用向导上创建脚本。

使用此脚本，您可以创建新数据库。之后您按原样导入数据，但您的 SSIS（又名 DTS）向导不会创建表，而只是导入数据。

备注：如果您有 FOREIGN KEYS，则需要确保您的 SSIS 数据导入部分以正确的顺序导入！

我自己制作了一个大的 sql 文本文件，该文件创建了所有结构，其中每个部分由 GO 分隔，另一个文件在其中创建数据（这可以由您的向导替换）。

# nhibernate - NHibernate：插入后总是驱逐实体

> ID：10630889
> 
> 赞同：0
> 
> 时间：2012-05-17T06:28:00.813
> 
> 标签：nhibernate

插入特定类型的实体后，我想确保它始终从会话中逐出。

看来我可以用 IPostInsertEventListener 做到这一点，但我不确定它是否安全。

这会起作用吗：

```
public class LogUpdatesPostInsertEventListener : IPostInsertEventListener
{
    public void OnPostInsert(PostInsertEvent insertEvent)
    {
        var entity = insertEvent.Entity;

        if (entity is Foo)
        {
            insertEvent.Session.Evict(entity);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:48:48.157

我认为鉴于您想要实现的代码看起来是正确的。我想知道您是否应该添加显式`Session.Flush()`以确保插入已提交到数据库，但这取决于您的要求。

此外，请确保您在一个工作单元中只使用一个会话，例如一个 HTTP 请求。

# bonjour - 在 PlayBook / Blackberry 上使用 Bonjour / Zeroconf / jmDNS 在网络上查找设备

> ID：10630890
> 
> 赞同：6
> 
> 时间：2012-05-17T06:28:07.750
> 
> 标签：bonjour, blackberry-playbook, zeroconf, jmdns

我想开发一个可以在 Blackberry PlayBook 上运行的 Android 应用程序。应用程序需要在本地网络上找到运行相同应用程序的其他设备。

我正在考虑实施 Bonjour / Zeroconf / jmDNS 协议来查找设备，但是......

我刚知道android权限

**android.permission.CHANGE_WIFI_MULTICAST_STATE**

黑莓或 PlayBook 不支持。（jmDND（Bonjour）协议需要优先权才能工作。）

[https://bdsc.webapps.blackberry.com/android/apisupport/](https://bdsc.webapps.blackberry.com/android/apisupport/)

你能给我一些建议吗？在 PlayBook 上实现这一目标的最佳方法是什么。有没有其他选择？

如果使用本机 SDK 或 Adob​​e AIR 构建，Bonjour 是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T19:49:46.057

您可以在 Blackberry world 尝试[mDNS 服务发现](http://appworld.blackberry.com/webstore/content/29042893/)。

这是描述的副本：

> mDNS Service Discovery 基于 Avahi 开源项目。它是一个通过 mDNS/DNS-SD 协议套件促进本地网络上的服务发现的系统。这使您能够将笔记本电脑或计算机插入网络，并立即能够查看可以与之聊天的其他人、查找要打印到的打印机或查找共享的文件。Apple MacOS X（品牌 Bonjour，有时还有 Zeroconf）中可以找到兼容的技术。
> 
> 源代码可在 BlackBerry GitHub 门户上获得。
> 
> mDNS 服务发现是 PlayCloud 应用程序的一部分 - 用于查找打印机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:55:43.503

不幸的是，PlayBook 上还没有对 Bonjour / Zeroconf 的原生支持，[请查看此线程](http://supportforums.blackberry.com/t5/Native-Development/Is-there-a-library-for-Bonjour-mdns-connectivity/m-p/1740173#M4441)

# java - Java：将字符串转换为整数时出现 NumberFormatException

> ID：10630892
> 
> 赞同：1
> 
> 时间：2012-05-17T06:28:18.130
> 
> 标签：java

我想从文本框中检索值并将其转换为整数。我编写了以下代码，但它抛出了`NumberFormatException`.

```
String nop = no_of_people.getText().toString();
System.out.println(nop);
int nop1 = Integer.parseInt(nop);
System.out.println(nop1); 
```

第一次调用`System.out.println`打印我的数字，但转换为整数给出了一个例外。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T06:35:18.550

请注意，如果您的字符串中有任何空格，解析将失败。您可以先使用该`.trim`方法修剪字符串，或者使用`.replaceAll("\\s+", "")`.

如果您想避免此类问题，我建议您使用[Formatted Text Field](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)或[Spinner](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)。

后一个选项将保证您拥有数值，并且应该避免您使用 try catch 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:41:01.947

Your TextBox may contain number with a white space. Try following edited code. You need to trim the TextBox Value before converting it to Integer. Also make sure that value is not exceeding to integer range.

```
String nop=(no_of_people.getText().toString().trim());
System.out.println(nop);
int nop1 = Integer.parseInt(nop);
System.out.println(nop1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:42:17.940

Try this:

```
int nop1 = Integer.parseInt(no_of_people.getText().toString().trim());
System.out.println(nop1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:59:32.227

我建议将所有`non-digit characters`从 String 首先转换为`int`：

```
replaceAll("\\D+", ""); 
```

您可以使用以下代码：

```
String nop=(no_of_people.getText().toString().replaceAll("\\D+", ""));
System.out.printf("nop=[%s]%n", nop);
int nop1 = Integer.parseInt(nop);
System.out.printf("nop1=[%d]%n", nop1); 
```

# windows-8 - 如何在 WinJS 模板中动态显示/隐藏 div

> ID：10630893
> 
> 赞同：9
> 
> 时间：2012-05-17T06:28:18.443
> 
> 标签：windows-8, winjs

我有一个 Windows 8 应用程序，其模板包含一个 div，我想根据`data-win-control="WinJS.Binding.Template"`. 我没有运气就尝试了以下方法：

```
<div data-win-bind="visible: isMore"> ..content... </div> 
```

其中`isMore`是数据绑定项的布尔属性。

我怎样才能做到这一点？我猜可见属性不存在？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T16:45:41.370

您是对的 - 该`visible`属性不存在，但您可以使用 CSS 和绑定转换器控制外观。

首先，用于`WinJS.Binding.converter`创建一个转换器函数，将布尔值转换为 CSS 显示属性的值，如下所示：

```
var myConverter = WinJS.Binding.converter(function (val) {
    return val ? "block" : "none";
}); 
```

确保该功能在全球范围内可用 - 我`WinJS.Namespace.define`用来创建可以在全球范围内访问的这些转换器的集合。

现在您可以在数据绑定中使用转换器来控制 CSS 显示属性，如下所示：

```
<div data-win-bind="style.display: isMore myConverter"> ..content... </div> 
```

# asp.net - 如何制作可点击的 Flash 视频或通过点击 asp.net 中的 Flash 视频打开一个 url？

> ID：10630897
> 
> 赞同：1
> 
> 时间：2012-05-17T06:28:30.320
> 
> 标签：asp.net, flash

我有 Flash 对象（视频）。我想在点击它时打开一个页面。我通过将其放入 div 并单击 div 来打开页面。但它不适用于 chrome 和 IE。它在 Firefox 中运行良好。我的代码如下：

```
<div class="HouseImage" onclick="window.open('Contact','_self')" style="height: 300px;
                overflow: hidden;">
                <object id="FlashID" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="351"
                    height="332">
                    <param name="movie" value="Flash/Banner.swf" />
                    <param name="quality" value="high" />
                    <param name="wmode" value="opaque" />
                    <param name="swfversion" value="6.0.65.0" />
                    <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don’t want users to see the prompt. -->
                    <param name="expressinstall" value="Scripts/expressInstall.swf" />
                    <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->
                    <!--[if !IE]>-->
                    <object type="application/x-shockwave-flash" data="Flash/Banner.swf" width="351"
                        height="332">
                        <!--<![endif]-->
                        <param name="quality" value="high" />
                        <param name="wmode" value="opaque" />
                        <param name="swfversion" value="6.0.65.0" />
                        <param name="expressinstall" value="Scripts/expressInstall.swf" />
                        <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
                        <div>
                            <h4>
                                Content on this page requires a newer version of Adobe Flash Player.</h4>
                            <p>
                                <a href="http://www.adobe.com/go/getflashplayer">
                                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"
                                        alt="Get Adobe Flash player" width="112" height="33" /></a></p>
                        </div>
                        <!--[if !IE]>-->
                    </object>
                    <!--<![endif]-->
                </object>
            </div> 
```

请尽快帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:12:24.600

最好的方法是通过 Flash 打开链接。如果您无权访问代码，您可以编写“特殊”闪存加载程序，它会在自身内部加载 Flash/Banner.swf，并使用 onclick 事件加载页面。

您也可以尝试将透明的 div 或 gif 放在 flash 动画上方，但涉及绝对定位会很麻烦，而且它可能不适用于所有浏览器。

# android - 如何在android中动态绘制一条线

> ID：10630898
> 
> 赞同：2
> 
> 时间：2012-05-17T06:28:35.777
> 
> 标签：android, line

> **可能重复：**
> [如何在android中画一条线](https://stackoverflow.com/questions/3616676/how-to-draw-a-line-in-android)

我必须匹配两个选项，就像我们使用铅笔匹配列一样。如果我单击一列中的一行并将该行与另一列中的其他合适行匹配，则应在两行之间动态绘制该行。首先，我使用了拖放功能。但是我不能动态地画线。这怎么可能？请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:40:56.173

获取`Touch Events`两个行元素，如果它们匹配，则绘制水平线使用以下代码：

```
canvas.drawLine(10, 10, 90, 10, paint);
canvas.drawLine(10, 20, 90, 20, paint); 
```

编辑：请参阅**[如何在 android 中画一条线](https://stackoverflow.com/questions/3616676/how-to-draw-a-line-in-android)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:36:11.060

使用 MapView 中的 Projection 将 GeoPoints 转换为“屏幕”点。之后，您可以使用 Path 绘制您想要的线条。第一个点应使用 path.moveTo(x, y) 指定，其余点应使用 path.lineTo(x, y) 指定。最后你调用 canvas.drawPath(path) 就完成了。

下面是我的 draw() 方法的代码，它围绕一组点绘制多边形。请注意，您不必像我在代码中那样使用 path.close() 。

```
public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow)
{
if(shadow){
    if(isDrawing == false){
        return;
    }
    Projection proj = mapView.getProjection();

    boolean first = true;
    /*Clear the old path at first*/
    path.rewind();
    /* The first tap */
    Paint circlePaint = new Paint();
    Point tempPoint = new Point();
    for(GeoPoint point: polygon){
        proj.toPixels(point, tempPoint);
        if(first){
            path.moveTo(tempPoint.x, tempPoint.y);
            first = false;
            circlePaint.setARGB(100, 255, 117, 0);
            circlePaint.setAntiAlias(true);
            canvas.drawCircle(tempPoint.x, tempPoint.y, FIRST_CIRCLE_RADIOUS, circlePaint);
        }
        else{
            path.lineTo(tempPoint.x, tempPoint.y);
            circlePaint.setARGB(100, 235, 0, 235);
            circlePaint.setAntiAlias(true);
            canvas.drawCircle(tempPoint.x, tempPoint.y, CIRCLE_RADIOUS, circlePaint);
        }
    }
    /* If indeed is a polygon just close the perimeter */
    if(polygon.size() > 2){
        path.close();
    }
    canvas.drawPath(path, polygonPaint);
    super.draw(canvas, mapView, shadow);
} 
```

}

参考：[Android MapView中多个GeoPoints之间动态画线](https://stackoverflow.com/questions/7955411/dynamically-draw-lines-between-multiple-geopoints-in-android-mapview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:17:51.787

在你的两列之间放置一个自定义视图，并准备好你的画布来绘制任何东西。当你做出了成功的选择。获取这两个选定视图的边界，并使用画布从起始视图的右端和下端到第二个视图的顶部和左侧画线。

# gwt - 使用 columnformatter 抛出 Invalid Argument 的 gwt 宽度

> ID：10630903
> 
> 赞同：1
> 
> 时间：2012-05-17T06:29:19.293
> 
> 标签：gwt, gwt2

我正在使用 flextable 开发一个数据表，我想设置宽度，我为每个单元格做了它工作正常。由于性能问题，我想将单元格级别移动到列级别，所以我使用了 ColumnFormatter 但它抛出了

> com.google.gwt.core.client.JavaScriptException：（错误）：无效参数

```
ft.getColumnFormatter().setWidth(col, widths[col] + "px"); 
```

猜猜出了什么问题？

我为表格设置了表格布局：固定和边框折叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:12:03.873

```
Invalid argument 
```

让我们看看它是哪个参数：

```
ft.getColumnFormatter().setWidth(col, widths[col] + "px"); 
```

在这里，论据之一是`null`。
最有可能`col`。

通过调试检查流程`eclipse`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T15:50:54.257

我遇到了同样的问题，发现将宽度设置为零是问题所在。将其更改为...

```
if (widths[col] > 0) {    
   ft.getColumnFormatter().setWidth(col, widths[col] + "px");
} 
```

解决了这个问题。

请注意，**这只发生**在使用 IE11 时！

# php - Apache Web 服务器没有重新启动？用php？

> ID：10630904
> 
> 赞同：0
> 
> 时间：2012-05-17T06:29:22.110
> 
> 标签：php, windows-7, apache2, installation

我成功安装了 Apche 网络服务器。当我在浏览器中运行本地主机时，它工作正常。

但我把 #LoadModule php5_module "D:/php/php5apache2.dll" AddHandler application/x-httpd-php .php

# 配置php.ini的路径

PHPIniDir "D:/php"

在配置文件中。每当我重新启动服务器时，请求都会失败

感谢 Adavnce 请帮助我克服这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:49:12.377

您的 apache 配置文件中需要以下内容（使用适当的路径）。

```
LoadModule php5_module "C:/Program Files/PHP/php5apache2_2.dll"
AddType application/x-httpd-php .php
PHPIniDir "c:/Program Files/PHP" 
```

您只需`sample.php`根据您的 apache 配置将其放在适当的位置。

# atk4 - 带有 MD5 的 ATK 4.2 Auth 与密码不匹配

> ID：10630905
> 
> 赞同：1
> 
> 时间：2012-05-17T06:29:28.540
> 
> 标签：atk4

在 4.2 中使用带有 md5 加密的 Basic Auth 时，它不会让我登录。

做了一些调试，问题似乎出在 Auth_Basic 中的 encryptPassword 函数中：

```
 if(is_callable($this->password_encryption)){
       $e=$this->password_encryption;
        return $e($password,$salt);
    } 
```

由于 md5 是一个可调用函数，这将加密密码并将数据恢复为原始格式，这意味着它与 db 记录不匹配。

评论这一点会让一切正常。

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:42:38.700

你能试试：

```
if(!is_string($this->password_encryption) && is_callable($this->password_encryption)){
    $e=$this->password_encryption;
    return $e($password,$salt);
} 
```

让我们知道它是否有效？

# oracle - tnsping 结果超过 0 ms。什么是解决方案？

> ID：10630907
> 
> 赞同：0
> 
> 时间：2012-05-17T06:29:30.817
> 
> 标签：oracle, networking

我通过 tnsping ping 我的 oracle 数据库。其本地数据库。这不在本地网络中。我预计为 0 毫秒，但它给出的时间超过了 0 毫秒。这是 tns ping 20 次的结果；

```
C:\Documents and Settings\sdemirkeser>tnsping belsoft 20

TNS Ping Utility for 32-bit Windows: Version 10.2.0.1.0 - Production on 17-MAY-2
012 09:23:32

Copyright (c) 1997, 2005, Oracle.  All rights reserved.

 Used parameter files:
 C:\oracle\product\10.2.0\db_1\network\admin\sqlnet.ora

 Used TNSNAMES adapter to resolve the alias
 Attempting to contact (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)
 (HOST = 127.0.0.1)(PORT = 1521))) (CONNECT_DATA = (SERVICE_NAME = BELSOFT)))
OK (20 msec)
OK (10 msec)
OK (20 msec)
OK (0 msec)
OK (10 msec)
OK (20 msec)
OK (10 msec)
OK (0 msec)
OK (20 msec)
OK (20 msec)
OK (10 msec)
OK (0 msec)
OK (20 msec)
OK (10 msec)
OK (20 msec)
OK (10 msec)
OK (0 msec)
OK (20 msec)
OK (10 msec)
OK (20 msec) 
```

您如何看待为什么它可能超过 0 毫秒。还是正常？

我用正常的 ping 命令 ping，但它比 1 ms 快

```
C:\Documents and Settings\sdemirkeser>ping localhost

32 bayt veri ile sdemirkeser [127.0.0.1] 'ping' ediliyor:

127.0.0.1 cevabı: bayt=32 süre<1ms TTL=128
127.0.0.1 cevabı: bayt=32 süre<1ms TTL=128
127.0.0.1 cevabı: bayt=32 süre<1ms TTL=128
127.0.0.1 cevabı: bayt=32 süre<1ms TTL=128

127.0.0.1 için Ping istatistiği:
    Paket: Giden = 4, Gelen = 4, Kaybolan = 0 (0% kayıp),
Mili saniye türünden yaklaşık tur süreleri:
    En Az = 0ms, En Çok = 0ms, Ortalama = 0ms 
```

如果不正常我会怎么做

感谢所有对真诚的 Suleyman Demirkeser 感兴趣的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:50:49.020

如果您登录到数据库服务器，请使用 IPC 连接而不是 TCP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:40:49.293

如果没有损坏，请不要修复它。> 0ms ping时间有问题吗？我不这么认为。Oracle 可能还有其他事情要做（例如，编写重做日志或其他一些管理任务；我认为它从来没有真正空闲过）。
只要它不影响您的工作，就不必担心这个微不足道的响应时间。由于您使用的是 32 位 Windows，无论如何它很可能不是生产环境。
我的本地 TNSPing 时间在 10 毫秒和 40 毫秒之间变化，而 ping 本地主机显示平均 0 毫秒响应时间。

# iis-7 - 如何在 IIS 7.0 上使用 net.tcp 绑定托管工作流服务 (.xamlx)？

> ID：10630909
> 
> 赞同：1
> 
> 时间：2012-05-17T06:29:38.397
> 
> 标签：iis-7, workflow-foundation-4

我在具有 net.tcp 绑定的 iis 7.0 上托管工作流服务。我的配置文件就像

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <appSettings>
    <add key="SMTPAddress" value="000.00.0.00"/>
    <add key="ToAddress" value="abc@abc.com"/>
    <add key="FromAddress" value="abc@abc.com"/>
    <add key="SMTPUserName" value="abc@abc.com"/>
    <add key="SMTPPassword" value ="abc@abc.com"/>
  </appSettings>
  <connectionStrings>
       <add name="RewindConnectionString" connectionString="Data Source=xxx;User Id=xxx;Password=xxx;Connection Timeout=5" providerName="Oracle.DataAccess.Client" />

  </connectionStrings>
  <system.serviceModel>
    <tracking>
      <profiles>
        <trackingProfile name="Sample Tracking Profile">
          <workflow activityDefinitionId="*">
            <workflowInstanceQueries>
              <workflowInstanceQuery>
                <states>
                  <state name="*"/>
                </states>
              </workflowInstanceQuery>
            </workflowInstanceQueries>
            <activityStateQueries>
              <activityStateQuery activityName="*">
                <states>
                  <state name="*"/>
                </states>
                <variables>
                  <variable name="*"/>
                </variables>
              </activityStateQuery>
            </activityStateQueries>
            <activityScheduledQueries>
              <activityScheduledQuery activityName="*" childActivityName="*"/>
            </activityScheduledQueries>
            <faultPropagationQueries>
              <faultPropagationQuery faultSourceActivityName="*" faultHandlerActivityName="*"/>
            </faultPropagationQueries>
            <customTrackingQueries>
              <customTrackingQuery name="*" activityName="*"/>
            </customTrackingQueries>
          </workflow>
        </trackingProfile>
      </profiles>
    </tracking>
    <services>
      <service name="RewindTest" behaviorConfiguration="RewindTest_Behavior">
        <endpoint address="RewindTest"
        binding="netTcpBinding" contract="IRewindTestService" name="RewindTestNetTcpEndPoint" bindingConfiguration="RewindTestBinding" />

        <endpoint address="wce"
        binding="netTcpBinding" kind="workflowControlEndpoint" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:9095/Service.Workflow.RewindTest/RewindTest" />
          </baseAddresses>
        </host>
        <endpoint address="mex"
            binding="mexTcpBinding"
            name="MEX"
            contract="IMetadataExchange" />
      </service>

    </services>
    <bindings>
      <netTcpBinding>
        <binding portSharingEnabled="true" name="RewindTestBinding" closeTimeout="00:10:00" openTimeout="00:10:00"
                 sendTimeout="00:10:00" maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
                 maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="Transport">
            <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
            <message clientCredentialType="Windows" />
          </security>
        </binding>
      </netTcpBinding>
    </bindings>    
    <standardEndpoints>
      <workflowControlEndpoint>
        <standardEndpoint/>
      </workflowControlEndpoint>
    </standardEndpoints>
    <extensions>
      <behaviorExtensions>
        <add name="oracleInstanceStore" type="Devart.Data.Oracle.Activities.Configuration.OracleInstanceStoreElement, Devart.Data.Oracle.WorkflowFoundation" />
        <add name="oracleTracking" type="Devart.Data.Oracle.Activities.Configuration.OracleTrackingElement, Devart.Data.Oracle.WorkflowFoundation" />
      </behaviorExtensions>
    </extensions>
    <behaviors>
      <serviceBehaviors>
        <behavior name="RewindTest_Behavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="false"/>

          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>

          <oracleTracking
                        connectionString="User Id=xxx;Password=xxx;Server=xxx;"
                        profileName="Sample Tracking Profile" />

          <oracleInstanceStore
             connectionString="User Id=xxx;Password=xxx;Server=xxx;"
             instanceEncodingOption="None"
             instanceCompletionAction="DeleteNothing"
             instanceLockedExceptionAction="NoRetry"
             hostLockRenewalPeriod="00:00:30"
             runnableInstancesDetectionPeriod="00:00:05" />
          <workflowIdle timeToUnload="0"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

现在我的问题是我无法通过 net.tcp 绑定生成代理，但我可以通过 http 生成它。[http://testsrv.com/RewindService/RewindTest.xamlx?wsdl](http://testsrv.com/RewindService/RewindTest.xamlx?wsdl)。然后我无法调用接收操作方法。虽然它与本地控制台主机工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:13:32.410

众所周知，工作流服务类似于 wcf 服务。所以我决定重新考虑我的部署步骤。我找到了一个非常好的链接，并仔细检查每一步，并能够解决我的问题。

[http://galratner.com/blogs/net/archive/2010/10/08/setting-up-a-nettcpbinding-enabled-wcf-service-in-iis-7.aspx](http://galratner.com/blogs/net/archive/2010/10/08/setting-up-a-nettcpbinding-enabled-wcf-service-in-iis-7.aspx)

我的配置没问题并更新了 tcp 端口号。它就像一个魅力。

# google-app-engine - 如何知道 Google App Engine（python）中实体的现有子项？

> ID：10630912
> 
> 赞同：0
> 
> 时间：2012-05-17T06:29:46.073
> 
> 标签：google-app-engine

我在父子关系中创建了实体：

```
# Create Employee entity
employee = Employee()
employee.put()

# Set Employee as Address entity's parent directly...
address = Address(parent=employee)

# ...or using its key
e_key = employee.key()
address = Address(parent=e_key)

# Save Address entity to datastore
address.put() 
```

那么，假设我们只知道地址实体，想要获取父（员工）。我们可以得到地址的父母：

```
address.key().parent() 
```

但是，当我只知道员工时，我不知道如何获得员工的孩子。我发现 Key.from_path(...) 方法是从父子关系中获取 Key 的，但我不知道如何处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:02:06.593

`.ancestor()`您可以使用查询过滤器查询（直接或间接）子项，如下所示：

```
 addresses = Address.all().ancestor(emp).fetch() 
```

# csv - 从 csv 文件导入时，数据存储区设置了不同的 ID 值

> ID：10630920
> 
> 赞同：0
> 
> 时间：2012-05-17T06:30:46.760
> 
> 标签：csv, import, datastore, bulkloader

我正在使用 appcfg.py 将数据从 csv 文件导入数据存储区

我的问题是插入数据存储区的 ID 值与 csv 文件中的值不同。

我认为错误在 bulkloader.yaml 中，我不知道如何导入该值。

这是我的 csv 文件： [http ://pastebin.com/embed_js.php?i=xC9UVVty](http://pastebin.com/embed_js.php?i=xC9UVVty)

这是我的 bulkloader.yaml： [http ://pastebin.com/embed_js.php?i=W3t9c6qd](http://pastebin.com/embed_js.php?i=W3t9c6qd)

这是数据存储区中的结果：

```
ID/Name = id=1121   
casillaEspecial = N     
claveEntidad = aghzfmhheS1mb3IYCxIRRW50aWRhZEZlZGVyYXRpdmEiATEM
EntidadFederativa: name=1
.
.
.

ID/Name = id=1122   
casillaEspecial = N     
claveEntidad = aghzfmhheS1mb3IYCxIRRW50aWRhZEZlZGVyYXRpdmEiATEM
EntidadFederativa: name=1
.
.
.

ID/Name = id=1123   
casillaEspecial = N     
claveEntidad = aghzfmhheS1mb3IYCxIRRW50aWRhZEZlZGVyYXRpdmEiATEM
EntidadFederativa: name=1
.
.
. 
```

如您所见，csv 文件中的 ID 为：1、2、3，而数据存储区中的 ID 为 1121、1122、1123

我希望你能帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T00:31:15.503

好像有什么问题。我只是将我的应用程序的计费状态更改为启用，一切都开始进行得很好。更改状态后，我尝试再次上传 csv 文件，神奇地 ID 没有更多问题，导入正确。

# python - 在 python 中使用 matplotlib 在同一窗口中绘制 2 个图形

> ID：10630921
> 
> 赞同：0
> 
> 时间：2012-05-17T06:30:49.630
> 
> 标签：python, graph, matplotlib

我正在绘制一个折线图和一个条形图，`matplotlib`并且两者都单独使用我的脚本。
但我面临一个问题：
1\. 如果我想在同一个输出窗口中绘制两个图
2\. 如果我想将显示窗口自定义为 1024*700

在第一种情况下，我使用 subplot 在同一个窗口中绘制两个图，但我无法为这两个图提供它们各自的 x 轴和 y 轴名称以及它们各自的标题。我失败的代码是：

```
import numpy as np
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt
xs,ys = np.loadtxt("c:/users/name/desktop/new folder/x/counter.cnt",delimiter = ',').T
fig = plt.figure()
lineGraph = fig.add_subplot(211)
barChart = fig.add_subplot(212)

plt.title('DISTRIBUTION of NUMBER')
lineGraph = lineGraph.plot(xs,ys,'-')  #generate line graph
barChart = barChart.bar(xs,ys,width=1.0,facecolor='g') #generate bar plot

plt.grid(True)
plt.axis([0,350,0,25])  #controlls axis for charts x first and then y axis.

plt.savefig('new.png',dpi=400)
plt.show() 
```

但有了这个，我无法正确标记这两个图。
还请提供一些关于如何将窗口大小调整为 1024*700 的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:51:20.383

当你说

> 我正在使用 subplot 在同一个窗口中绘制两个图表，但我无法为这两个图表提供它们各自的 x 轴和 y 轴名称以及它们各自的标题。

你的意思是你想设置轴标签？如果是这样，请尝试使用`lineGraph.set_xlabel`and `lineGraph.set_ylabel`。或者，在创建绘图之后和创建任何其他绘图之前调用[`plt.xlabel`](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_xlabel)and 。[`plot.ylabel`](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_ylabel)例如

```
# Line graph subplot
lineGraph = lineGraph.plot(xs,ys,'-')
lineGraph.set_xlabel('x')
lineGraph.set_ylabel('y')

# Bar graph subplot
barChart = barChart.bar(xs,ys,width=1.0,facecolor='g')
barChart.set_xlabel('x')
barChart.set_ylabel('y') 
```

这同样适用于标题。调用`plt.title`将为*当前活动的情节*添加标题。这是您创建的最后一个绘图或您使用的最后一个绘图[`plt.gca`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.gca)。如果您想要特定子图上的标题，请使用子图句柄：`lineGraph.set_title`或`barChart.set_title`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:12:50.497

`fig.add_subplot`返回一个 matplotlib Axes 对象。如 Chris 所述，该对象上的方法包括`set_xlabel`and 。[您可以在http://matplotlib.sourceforge.net/api/axes_api.html](http://matplotlib.sourceforge.net/api/axes_api.html)`set_ylabel`查看 Axes 对象上可用的全套方法。

# php - 使用 PHP 中的多个文件上传按钮上传 Ajax 文件

> ID：10630925
> 
> 赞同：1
> 
> 时间：2012-05-17T06:31:18.630
> 
> 标签：php, jquery, ajax, file-upload

**这是我的代码：**

```
<script type="text/javascript">    
 $(function(){
   var btnUpload=$('#browse');
   var adinfoid=$('#adinfoid').val();

   new AjaxUpload(btnUpload, {
     action: '<?php echo base_url()?>index.php/post/upload_editmainimage/'+adinfoid,
     name: 'uploadfile',
     onSubmit: function(file, ext){
       if (! (ext && /^(jpg|png|jpeg|gif|JPG|PNG|JPEG|GIF)$/.test(ext))){
         $("#mainphotoerror").html('Only JPG, PNG, GIF, files are allowed');
         $("#mainphotoerror").css('display','block');
         return false;
       }        
     },
     onComplete: function(file, response){
       //alert(response);
       if(response){
         alert('success');
       }else{
         alert("error");
       }
     }
   });  
 });    
</script> 
```

**HTML 部分**

```
<table width="200" border="1">
  <?php 
   for($i=0;$i<20;i++){
  ?>
  <tr>
    <td>Add Photo <?php echo $i;?></td>
    <td>
      <input type="button" 
             id="browse<?php echo $i;?>" 
             class="browse_media" 
             value="Browse">
    </td>
  </tr>
  <?php
   }
  ?>
</table> 
```

当我点击第一个浏览按钮时，会显示文件打开窗口，但是从第二个到最后，没有显示用于选择图像的打开窗口。

我的代码中的问题在哪里？

我已经为 ajax 上传加载了 .js 文件？

如何使用 ajax 从多个文件浏览器按钮上传图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:00:55.580

You can try using this plugin [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

This is the best I have found so far. You can add as many files as you want with one add `files button`, it has both global and local progress bar and many other options.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:34:42.740

您应该了解 HTML 上的 id 标签，它必须是唯一的 IDentifier

尝试这个：

```
var btnUploads=$('input.browse_media');
var adinfoid=$('#adinfoid').val();
new AjaxUpload(btnUploads, { 
```

并在 php

```
<td><input type="button" id="browse<?php echo $i?>" class="browse_media" value="Browse"></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:36:11.567

对于多个文件上传，请使用 Jquery 插件 uploadify() 检查演示链接：[http ://www.uploadify.com/demos/](http://www.uploadify.com/demos/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:48:27.373

```
as Sergey mentioned id should be unique with in a html page and with in the ready function of jquery try this code of uploadify :

$(function() {
<?php for($i=0;$i<20;i++){?>

   $("#browse<?php echo $i?>").uploadify({
        height        : 30,
        swf           : '/uploadify/uploadify.swf',
        uploader      : '/uploadify/uploadify.php',
        width         : 120
    });
<?php }?>
}); 
```

更多检查uploadify网站

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-03T08:36:20.403

对于多个上传设置参数'multi'：ture

```
 $(function() {
      $("#file_upload").uploadify({
        'multi'    : true,
        'swf'      : '/uploadify/uploadify.swf',
        'uploader' : '/uploadify/uploadify.php'
      });
   }); 
```

# macos - 在 OS X 10.7 上构建 SDL2：“ranlib：文件：……没有符号”

> ID：10630929
> 
> 赞同：0
> 
> 时间：2012-05-17T06:31:29.623
> 
> 标签：macos, makefile, sdl

在 Lion 上构建 SDL2 时，我在运行 makefile 时遇到了以下问题：

```
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_audiodev.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_yuv_mmx.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_render_d3d.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_libgl2D.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_ndsrender.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_render_gles.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_render_gles2.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_shaders_gles2.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_getenv.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_malloc.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_qsort.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_stdlib.o) has no symbols
/usr/bin/ranlib: file: build/.libs/libSDL2.a(SDL_x11opengles.o) has no symbols
libtool: link: ranlib build/.libs/libSDL2.a
ranlib: file: build/.libs/libSDL2.a(SDL_audiodev.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_yuv_mmx.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_render_d3d.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_libgl2D.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_ndsrender.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_render_gles.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_render_gles2.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_shaders_gles2.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_getenv.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_malloc.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_qsort.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_stdlib.o) has no symbols
ranlib: file: build/.libs/libSDL2.a(SDL_x11opengles.o) has no symbols 
```

我不知道这是否与它有关，但以前我必须进行[此修复](https://bbs.archlinux.org/viewtopic.php?id=137822)以阻止它抱怨`SDL_x11sym.h:106:1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T05:06:22.163

好的，这就是我所做的：

1.  `$ ./autogen.sh`在终端中运行。

2.  `./Xcode/SDL/SDL.xcodeproj`在 Xcode 中打开。

3.  运行`Framework`目标：

    ![SDL2 框架目标](../Images/1712063813b38a63f9e18c7e8ecaa1cb.png)

4.  在 finder 中打开生成的框架：

    ![在查找器中打开框架](../Images/7a0b87a860a1f22573d1f919369830c5.png)

5.  复制`SDL2.framework`到`/Library/Frameworks/`：

    ![复制框架](../Images/f8c75a84536934a2ae8e30a363275cf9.png)

![呜呜](../Images/87a6cfdf193856476fb0f1a11acd0c0c.png)

# android - 布局充气机未检测到 xml 布局

> ID：10630930
> 
> 赞同：0
> 
> 时间：2012-05-17T06:31:36.540
> 
> 标签：android

我有一个列表视图，我正在根据主题更改列表视图的行，但是布局充气机没有检测到布局，请指导我做错了什么。我已经清理了项目并关闭并重新打开了 Eclipse，但同样的问题仍然存在。请指导我。

```
 LayoutInflater inflater   = getLayoutInflater();
                View row = null;                        
                if(theme.equals("blue")){
                    row = inflater.inflate(R.layout.bluerow, parent, false);                    
                }else if (theme.equals("green")){
                //  row = inflater.inflate(R.layout.bluerow, parent, false);                    

                }else if (theme.equals("orange")){

                }else if (theme.equals("purple")){

                }else if (theme.equals("red")){

                }else if (theme.equals("pink")){

                } 
```

例如，bluerow.xml 在布局中但未检测到，类似的 orangerow.xml 和 row on 在布局文件夹中但未检测到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:38:14.737

use this code

```
LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
row = inflater.inflate(R.layout.row, parent, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:47:17.873

试试这个

```
LayoutInflater mInflater = LayoutInflater.from(context);

public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.example, null);
            holder = new ViewHolder();
            holder.txt1= (TextView) convertView
                    .findViewById(R.id.txt1);
            holder.txt2 = (TextView) convertView
                    .findViewById(R.id.txt2);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();

        }
              }

class ViewHolder {
        TextView txt1, txt2;
        int ref;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:59:46.710

使用下面的代码来扩展您的布局，然后您可以将该视图用于任何目的。这将为您提供 xml 文件的最父级布局。相应地键入 cast 并使用。

```
View headerView = View.inflate(this, R.layout.layout_name, null); 
```

就像我想在相对布局中转换上面的视图一样

```
RelativeLayout rl_layout = (RelativeLayout) headerView; 
```

希望它会帮助你。

再清理一件事并再次构建您的项目。

# r - 在“来自服务器的空回复”错误后，如何使用 knitr 和 R Markdown 将图像上传到 imgur？

> ID：10630931
> 
> 赞同：3
> 
> 时间：2012-05-17T06:31:36.460
> 
> 标签：r, knitr

我正在尝试从 RStudio 0.96 中的 R Markdown knitr 文档上传图像。我尝试运行[以下代码](https://raw.github.com/yihui/knitr/master/inst/examples/knitr-upload.Rmd)，这只是一个最小的示例。但是，我收到以下错误消息：

```
List of 1
 $ message: logi FALSE

label: md-cars (with options) 
List of 1
 $ message: logi FALSE

Error in process_file(text) : 
  Quitting from lines 31-34: Error in function (type, msg, asError = TRUE)  : Empty reply from server
Calls: knit -> process_file

Execution halted

knitr terminated with status 1 
```

*   什么可能导致此错误消息？
*   如何使用 knitr 将图像上传到 Imgur 并避免出现此错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:11:46.463

[该答案](https://stackoverflow.com/a/2665814/180892)表明该错误可能与防火墙和代理服务器有关。当我测试上面的代码时，我在一所大学工作，那里有这样的东西。当我在家里通过不同的网络尝试它时，代码有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:25:00.763

确保在代码中包含这一行：

`opts_knit$set(upload.fun = imgur_upload)`

# php - 将值推送到数组 PHP 的正确方法？

> ID：10630936
> 
> 赞同：0
> 
> 时间：2012-05-17T06:32:15.597
> 
> 标签：php, arrays, json

我遇到了一个有点烦人的问题。这是我的PHP代码。忽略变量的来源。这适用于购物车功能，但它适用于许多不同的领域。

```
$data_set = json_decode(stripslashes($_POST['varA']), true);
$pid = $pid['product_id'];
$quantity = $pid['quantity'];

$_SESSION['cartid'] = $_SESSION['cartid'] + 1;

$product_data = array("Product_ID" = > $pid, "quantity" = > $quantity, "cartid" = > $_SESSION['cartid']); 
```

我的问题发生在代码中的这个地方。我首先检查 Session 变量中是否有值，如果没有，则继续创建关联数组。

```
if (empty($_SESSION['cart_items'])) {
    $_SESSION['cart_items'] = array("items" = > $product_data);
} else {
    array_push($_SESSION['cart_items']['items'], $product_data);
}

echo json_encode($_SESSION['cart_items']); 
```

“添加”第一项后的最终结果如下所示：

```
{
    "items": {
        "Product_ID": "2",
        "quantity": "1",
        "cartid": 1
    }
} 
```

但是，经过几次第一次添加后，每个值都会得到一个键：

```
{
    "items": {
        "0": {
            "Product_ID": "2",
            "quantity": "1",
            "cartid": 2
        },
        "1": {
            "Product_ID": "2",
            "quantity": "1",
            "cartid": 3
        },
        "Product_ID": "2",
        "quantity": "1",
        "cartid": 1
    }
} 
```

如何防止这些键出现？这可能吗？如果没有，如何重新编写以便每次都添加密钥？这是否可以在前端的 JS 中解析和循环？

对不起，我有很多问题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:42:14.193

In the first iteration, the `$_SESSION['cart_items']` is empty, so you run this:

```
$_SESSION['cart_items'] = array("items" => $product_data); 
```

This creates `$_SESSION['cart_items']['items']` but you populate it with just the product by itself; you should define it as an array instead:

```
$_SESSION['cart_items'] = array("items" => array($product_data)); 
```

This creates an array with a single item which you can later extend with `array_push`.

Having said that, you can replace the whole condition with just:

```
$_SESSION['cart_items']['items'][] = $product_date; 
```

PHP will automatically create an empty array if it didn't exist yet, followed by adding the product data as the next element.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:40:02.493

You don't need the `items`, try the below way.

```
if (empty($_SESSION['cart_items'])) {
    $_SESSION['cart_items'] = array($product_data);
} else {
    $_SESSION['cart_items'][] = $product_data;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:36:53.963

这是因为这一行：

```
$_SESSION['cart_items'] = array("items" = > $product_data); 
```

您基本上在该行中说“项目”键具有产品数据，而不是项目中的键。它应该是：

```
$_SESSION['cart_items']['items'] = array($product_data); 
```

键 - 将 - 总是出现，除非您希望数据覆盖另一个。如果您不想要键（0,1 等），那么唯一的其他选择是合并数据。在这种情况下，它将是：

$_SESSION['cart_items']['items']+=$product_data;

..但我不认为那是你想要的。

# c# - 原始的 Scintilla 和 ScnitillaNet 控件之间有什么重大区别吗？

> ID：10630938
> 
> 赞同：1
> 
> 时间：2012-05-17T06:32:24.087
> 
> 标签：c#, .net, scintilla

我正在尝试创建一个支持 Windows 语音的编辑器，现在试图弄清楚我是否应该使用 ScintillaNet 或原始 Scintilla 作为我的基础。如果有人能告诉我它们之间是否有任何重大差异以及它们是什么，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:53:09.603

考虑“原始 Scintilla”没有多大意义，它是用 C 编写的。你不能在 C# 项目中直接使用用 C 编写的代码，你必须使用 pinvoke。因此，您最终将编写一组隐藏丑陋的 pinvoke 代码的 C# 类。并重新发明 ScintillaNET。

如果您需要调整 ScintillaNET 包装器，那么可以使用源代码。只是不要从头开始，C接口*并不*漂亮。

# asp.net - 如何在asp.net C#中datalist中的项目模板的工具提示中显示数据？

> ID：10630939
> 
> 赞同：1
> 
> 时间：2012-05-17T06:32:24.837
> 
> 标签：asp.net, tooltip, datalist

我想在鼠标悬停时在工具提示中显示一些数据。我在 asp.net 中使用数据列表。如何在工具提示中显示动态数据。数据将基于数据库表。这是我的数据列表的代码，我希望在项目模板上显示工具提示。工具提示数据将包含 3 个项目，即可用数量、现有数量和订购数量。

编辑：我尝试了在回答这个问题时提供的方法，但它们不起作用。有什么方法可以使用 JQuery 和 Web 服务来做同样的事情吗？如果是的话，请指导我正确的方式......

```
<asp:DataList ID="dlvProductSpecification" runat="server" RepeatColumns="10" HeaderStyle-Font-Size="16px"
                                            Font-Size="Smaller" OnItemCommand="dlvProductSpecification_ItemCommand" OnItemCreated="dlvProductSpecification_ItemCreated"
                                            OnItemDataBound="dlvProductSpecification_ItemDataBound">
                                            <ItemStyle Font-Size="Smaller" />
                                            <HeaderStyle HorizontalAlign="Center">  </HeaderStyle>
                                            <HeaderTemplate>
                                                <table class="header_dl">
                                                    <tr>
                                                        <td>
                                                            SPECIFICATION HEADER
                                                        </td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <ItemTemplate>
                                                <%--<table style="text-align: center;">--%>
                                                <table class="style_dl" onmouseover="showtooltip()" onmouseout="hidetooltip()">
                                                    <tr>
                                                        <td class="style_dl_td">
                                                            <asp:Label ID="lblReferenceNo" CssClass="labeltitle_dl" runat="server"><%# Eval("ReferenceNo")%></asp:Label>
                                                            <br />
                                                            <asp:Label ID="Label1" runat="server"><%# Eval("Specification")%></asp:Label>
                                                            <br />
                                                            <br />
                                                            <asp:HiddenField ID="hdnSpecificationID" runat="server" Value='<%# Eval("ProductSpecificationID")%>' />
                                                            <asp:HiddenField ID="hdnSpecification" runat="server" Value='<%# Eval("Specification")%>' />
                                                            <asp:HiddenField ID="hdnReferenceNo" runat="server" Value='<%# Eval("ReferenceNo")%>' />
                                                            <asp:HiddenField ID="hdnGTIN" runat="server" Value='<%# Eval("GTIN")%>' />
                                                            <asp:HiddenField ID="hdnAvailableQty" runat="server" Value='<%# Eval("AvailableQty")%>' />
                                                            <asp:Button ID="btnAddQty" runat="server" CommandName="GetData" Text="Add" /><br />
                                                        </td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:22:54.873

您可以在 ItemDataBound 事件上执行此操作。尝试这个：

```
protected void dlvProductSpecification_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item ||e.Item.ItemType== ListItemType.AlternatingItem)
        {
            e.Item.ToolTip = "Tool Tip";
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:22:31.757

在您的项目模板的标签内放置一个工具提示属性并像这样绑定它：

```
<asp:Label ID="Label1" runat="server" ToolTip='<%# Eval("Specification") %>'><%# Eval("Specification")%></asp:Label> 
```

希望它有效。

# android - 使用谷歌 API 绘制从我的位置到目的地位置的路线

> ID：10630941
> 
> 赞同：1
> 
> 时间：2012-05-17T06:32:38.470
> 
> 标签：android, google-maps, routes

我试图制作一个使用位置的谷歌地图，我得到了我的位置的 lon，lat。这是我的代码

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);  
Location myLocation = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
String uri = "http://maps.google.com/maps?saddr=" + (myLocation.getLatitude())+","+(myLocation.getLongitude())+"&daddr="+destLat+","+destLon;

Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));

intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

它运行但什么也没有发生。只是显示我的位置。谁能告诉我声明中的错误在哪里？请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T06:50:25.793

这是[https://github.com/frogermcs/RoutePathExample](https://github.com/frogermcs/RoutePathExample)上的完整源代码，了解如何在两个地理位置之间绘制路径。我使用这段代码完全没有任何问题。你应该检查一下

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T07:47:32.683

试试这个

```
private boolean gps_enabled = false;
private boolean network_enabled = false;
private LocationListener locListener = new MyLocationListener();
LocationManager locManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    try {
        gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex) {
    }
    try {
        network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex) {
    }

    // don't start listeners if no provider is enabled
    if (!gps_enabled && !network_enabled) {

    }

    if (gps_enabled) {
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 10, locListener);
    }
    if (network_enabled) {
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 10, locListener);
    }

class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {

            currentLocation = location;

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

然后，一旦您获得位置，您就可以使用

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
Uri.parse("http://maps.google.com/maps?saddr=<start lat>,<start lon>&daddr=<dest lat>,<dest lon>"));
startActivity(intent); 
```

# html - IE9中的渐变+圆角CSS问题

> ID：10630944
> 
> 赞同：1
> 
> 时间：2012-05-17T06:32:48.577
> 
> 标签：html, css

在我当前的项目中，我在我的 CSS 文件中使用了 CSS3 渐变。为了支持 IE 浏览器，我也使用了 filter 属性。以下是我的代码：

```
.card.active .content.back {
  background: #333; /* Old browsers */
  background: -moz-linear-gradient(top, #333 0%, #0e0e0e 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#333), color-stop(100%,#0e0e0e)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #333 0%,#0e0e0e 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #333 0%,#0e0e0e 100%); /* Opera11.10+ */
  background: -ms-linear-gradient(top, #333 0%,#0e0e0e 100%); /* IE10+ */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#333333', endColorstr='#0e0e0e',GradientType=0 ); /* IE6-9 */
  background: linear-gradient(top, #333 0%,#0e0e0e 100%); /* W3C */

} 
```

但是当我`filter`在上面的代码中使用该属性时，该`border-radius`属性不起作用。如果有人知道解决此问题的方法，请与我分享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:48:49.307

您可以使用**PIE.htc**获得所需的结果。

PIE 代表渐进式 Internet Explorer。它是一种 IE 附加行为，当应用于元素时，它允许 IE 识别和显示许多 CSS3 属性。

PIE 目前为 IE 6 到 8 添加了对以下 CSS3 功能的全部或部分支持：

```
border-radius
box-shadow
border-image
multiple background images
linear-gradient as background image 
```

此外，PIE 为 IE 9 添加了对边框图像和线性渐变的支持，IE 9 已经原生支持其他功能。

**http://css3pie.com/**

或查看演示：- [http://jsfiddle.net/ZxzSs/1/](http://jsfiddle.net/ZxzSs/1/)

为了支持 PIE.htc，您必须将 PIE.htc 文件保留在您的根文件夹中，而不是为您的网站工作....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:48:22.830

您应该能够将渐变应用于具有圆角的元素的子元素。我无法在我的家用机器上访问 IE9，但这应该可以：

```
.element {
    background: linear-gradient(top, #333 0%,#0e0e0e 100%); /* W3C */
    border-radius: 10px;
}
.element .ie-helper {
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#333333', endColorstr='#0e0e0e',GradientType=0 );
} 
```

HTML：

```
<div class="element">
    <!--[if lt IE 9]><div class="ie-helper"><![endif]-->
    <p>Your content with gradient and rounded corners...</p>
    <!--[if lt IE 9]></div><![endif]-->
</div> 
```

如果在 IE10+ 或其他浏览器中查看页面，渐变和圆角都将应用于同一元素（假设您从代码示例中带回供应商特定的前缀）。[由于使用了条件注释](http://www.quirksmode.org/css/condcom.html)，内部`div.ie-helper`只会在 IE9 及更低版本上呈现。

这并不理想，但可以完成工作，但是由于您需要完全支持如此广泛的浏览器，这是一个合理的解决方法

# android - 如何在不向用户显示浏览器的情况下连接到谷歌服务？

> ID：10630952
> 
> 赞同：0
> 
> 时间：2012-05-17T06:34:05.463
> 
> 标签：android

嗨，我想连接到谷歌服务。我是连接到它的 OAuth 客户端 API。我使用的重定向 uri 是“http://localhost”

但是当我选择“允许访问”时，我想开始另一个活动。但是只要我按下“允许访问”，它就会打开带有以下选项的意图选择器：1）浏览器 2）项目名称

它显示了这一点，因为我已经使用“查看”操作启动了活动，并使用“浏览”类别声明了目标活动。

但是当我删除“BROWSABLE”类别时，它会直接显示浏览器，因此页面不会加载。

我正在使用的代码是：

```
String authenticationUrl= "https://accounts.google.com/o/oauth2/auth?   
scope=https://www.googleapis.com/"+
        "auth/userinfo.email+https://www.googleapis.com/auth/userinfo."+
            "profile";
    OAuthClientRequest request = null;
    try {
        request = OAuthClientRequest
               .authorizationLocation(authenticationUrl)
               .setClientId(CLIENT_ID)
               .setRedirectURI(REDIRECT_URI)
                .buildQueryMessage();
    } catch (OAuthSystemException e) {
        e.printStackTrace();
    }
    Intent intent = new Intent(Intent.ACTION_VIEW,
            Uri.parse(request.getLocationUri() + "&response_type=code"));
    startActivity(intent); 
```

在清单中，我已经像这样声明了目标活动：

```
 <activity android:name=".TestActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.VIEW"/>
            <category android:name="android.intent.category.DEFAULT" />
                        <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" android:host="localhost"/>
        </intent-filter>
    </activity> 
```

我的问题是，当用户在获得身份验证后选择“允许访问”按钮时，我不想打开意图选择器。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:59:04.217

而不是使用这个：

```
Intent intent = new Intent(Intent.ACTION_VIEW,
            Uri.parse(request.getLocationUri() + "&response_type=code")); 
```

您应该创建一个 webview 并加载 url 的内容。这就是 facebook 或 twitter 进行身份验证的方式。如果您选择使用 webview，我建议您使用 WebViewClient，因为它可以让您进行大量自定义。

# java - 代码中的 Android 内存泄漏

> ID：10630954
> 
> 赞同：1
> 
> 时间：2012-05-17T06:34:17.763
> 
> 标签：java, android, memory, memory-leaks

我试图理解内存泄漏的概念。我尝试了这段代码并尝试了从相关帖子中找到的几种方法，但我无法解决问题。需要帮助了解此代码中发生内存泄漏的位置。我的应用程序只有 2 个活动

//第一个活动

```
package com.pace.mat;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class MATDemoActivity extends Activity implements OnClickListener {

    private Dialog dialog1;
    private Button btnSubmit;
    private Context myClassContext;
    private ImageView RedImage,BlueImage,Yellow,Orange,Green;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myClassContext = this;

        RedImage = (ImageView) findViewById(R.id.Red);
        BlueImage = (ImageView) findViewById(R.id.Blue);
        Yellow = (ImageView) findViewById(R.id.Yellow);
        Orange = (ImageView) findViewById(R.id.Orange);
        Green = (ImageView) findViewById(R.id.Green);

       RedImage.setImageResource(R.drawable.red);
       BlueImage.setImageResource(R.drawable.blue);
       Yellow.setImageResource(R.drawable.yellow);
       Orange.setImageResource(R.drawable.orange);
       Green.setImageResource(R.drawable.green);

        btnSubmit = (Button)findViewById(R.id.btnSubmitAtFirst);
        btnSubmit.setOnClickListener(this);

    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        if(arg0 == (View)btnSubmit)
        {
            dialog1=new Dialog(myClassContext); 
            Window window = dialog1.getWindow(); 
            window.setBackgroundDrawableResource(android.R.color.transparent); 
            window.requestFeature(window.FEATURE_NO_TITLE);                     
            dialog1.setContentView(R.layout.progress_indicator); 
            dialog1.show();     

            // Doing a network intensive task

            if(dialog1 !=null)
            {
                dialog1 = null;
                myClassContext =  null;
                window = null;
            }

            Intent i = new Intent(MATDemoActivity.this,SecondActivity.class);
            startActivity(i);
        }
    }

    @Override
    public void onStop() {    
        super.onStop();  
        myClassContext =  null;
        dialog1 = null;
        RedImage = null;
        BlueImage = null;
        Yellow = null;
        Orange = null;

        Green=null;
        this.finish();   
    }       

    @Override
    public void onPause() {
        super.onPause();
         myClassContext =  null;
            dialog1 = null;
            RedImage = null;
            BlueImage = null;
            Yellow = null;

            Orange = null;
            Green=null;
         this.finish(); 
    }           

    @Override
    public void onDestroy() {
        super.onDestroy();
         myClassContext =  null;
            dialog1 = null;
            RedImage = null;
            BlueImage = null;

            Yellow = null;
            Orange = null;
            Green=null;
        this.finish();
    }

} 
```

// 第二个活动

```
package com.pace.mat;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class SecondActivity extends Activity implements OnClickListener {

    private Dialog dialog1;
    private Button btnSubmit;
    private Context myClassContext1;
    private ImageView RedImage,BlueImage,Yellow,Orange,Green;

     /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.secondactivity);

        myClassContext1 = this;

        RedImage = (ImageView) findViewById(R.id.Red);
        BlueImage = (ImageView) findViewById(R.id.Blue);
        Yellow = (ImageView) findViewById(R.id.Yellow);
        Orange = (ImageView) findViewById(R.id.Orange);
        Green = (ImageView) findViewById(R.id.Green);

       RedImage.setImageResource(R.drawable.red);
       BlueImage.setImageResource(R.drawable.blue);
       Yellow.setImageResource(R.drawable.yellow);
       Orange.setImageResource(R.drawable.orange);
       Green.setImageResource(R.drawable.green);

        btnSubmit = (Button)findViewById(R.id.btnSubmitAtFirst);
        btnSubmit.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v == (View)btnSubmit)
        {
            dialog1=new Dialog(myClassContext1); 
            Window window = dialog1.getWindow(); 
            window.setBackgroundDrawableResource(android.R.color.transparent); 
            window.requestFeature(window.FEATURE_NO_TITLE);                     
            dialog1.setContentView(R.layout.progress_indicator); 
            dialog1.show();     

            // Uploading an Image to network 

            if(dialog1 !=null)
            {
                dialog1 = null;
                myClassContext1 =  null;
                window = null;
            }

            Intent i = new Intent(this,MATDemoActivity.class);
            startActivity(i);
        }
    }

    @Override
    public void onStop() {    
        super.onStop();  

        this.finish();   
    }       

    @Override
    public void onPause() {
        super.onPause();

         this.finish(); 
    }           

    @Override
    public void onDestroy() {
        super.onDestroy();
         myClassContext1 =  null;
            dialog1 = null;
            RedImage = null;
            BlueImage = null;

            Yellow = null;
            Orange = null;
            Green=null;
        this.finish();
    }

} 
```

// 当我从第一个活动转到第二个活动时，记录 CAT 数据

```
05-17 12:12:43.323: E/WindowManager(2264): Activity com.pace.mat.SecondActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f63b88 that was originally added here
05-17 12:12:43.323: E/WindowManager(2264): android.view.WindowLeaked: Activity com.pace.mat.SecondActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f63b88 that was originally added here
05-17 12:12:43.323: E/WindowManager(2264):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
05-17 12:12:43.323: E/WindowManager(2264):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
05-17 12:12:43.323: E/WindowManager(2264):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
05-17 12:12:43.323: E/WindowManager(2264):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
05-17 12:12:43.323: E/WindowManager(2264):  at android.app.Dialog.show(Dialog.java:241)
05-17 12:12:43.323: E/WindowManager(2264):  at com.pace.mat.SecondActivity.onClick(SecondActivity.java:54)
05-17 12:12:43.323: E/WindowManager(2264):  at android.view.View.performClick(View.java:2408)
05-17 12:12:43.323: E/WindowManager(2264):  at android.view.View$PerformClick.run(View.java:8816)
05-17 12:12:43.323: E/WindowManager(2264):  at android.os.Handler.handleCallback(Handler.java:587)
05-17 12:12:43.323: E/WindowManager(2264):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-17 12:12:43.323: E/WindowManager(2264):  at android.os.Looper.loop(Looper.java:123)
05-17 12:12:43.323: E/WindowManager(2264):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-17 12:12:43.323: E/WindowManager(2264):  at java.lang.reflect.Method.invokeNative(Native Method)
05-17 12:12:43.323: E/WindowManager(2264):  at java.lang.reflect.Method.invoke(Method.java:521)
05-17 12:12:43.323: E/WindowManager(2264):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-17 12:12:43.323: E/WindowManager(2264):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-17 12:12:43.323: E/WindowManager(2264):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:56:04.983

您的代码似乎没有任何内存泄漏。并且大多数时候内存泄漏是由于保持对**[Context](http://developer.android.com/reference/android/content/Context.html)****的长期引用。**

这是 Romain Guy 的一篇好文章，它将帮助您详细了解内存泄漏。 [检查出来](http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/)。

希望它会有所帮助。

**编辑：根据您更新的问题**

查看您的日志后，似乎没有内存泄漏，它的窗口泄漏异常。在您完成活动之前关闭或关闭您的对话框。这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:16:55.090

从日志中，我认为问题的原因是您显示了一个对话框但没有关闭它，然后您将对话框分配为 null 并开始另一个活动。

```
if(dialog1 !=null)
{
    dialog1 = null;
    myClassContext1 =  null;
    window = null;
} 
```

所以活动会泄漏对话框（对话框是窗口）。无论如何，如果您不需要显示对话框，则应将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:51:46.173

看起来你正在重复地从另一个活动中调用一个活动，就像你正在循环进入活动并切换它们。

`MATDemoActivity`来电

```
Intent i = new Intent(MATDemoActivity.this,SecondActivity.class); 
            startActivity(i); 
```

然后`SecondActivity`你打电话

```
Intent i = new Intent(this,MATDemoActivity.class);   
        startActivity(i); 
```

此外，您正在重新创建每个活动中的所有对象，而不是在两个活动之间共享它们。

尝试解决这些问题，看看是否可行。

# php - 使用 jQuery 可排序插件中的 PHP 更新数据库中的排序顺序

> ID：10630961
> 
> 赞同：0
> 
> 时间：2012-05-17T06:34:45.303
> 
> 标签：php, jquery, jquery-ui-sortable

我正在使用 jQuery 插件对产品订单进行排序。它在客户端站点上运行良好，但我也想更新数据库中的订单。这是我的尝试： HTML：

```
<ul id="item_list" >
<li id="item_1">Item One</li>
<li id="item_2">Item Two</li>
<li id="item_3">Item Three</li>
<li id="item_4">Item Four</li>
</ul> 
```

jQuery：

```
$("#item_list").sortable({stop:function(i) {
  $.ajax({
    type: "GET",
    url: "server_items_reorder.php",
    data: $("#item_list").sortable("serialize")
  });
  foreach($_GET['item'] as $key=>$value) {
    mysql_query("UPDATE my_items" SET position = '" . $key . "' WHERE id ='" .         $value . "'"); 
```

但我这样做，它会抛出一个错误：为 foreach 显示无效的争论。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:34:17.860

看起来您的代码可能基于[Wil Linssen 的帖子](http://linssen.me/entry/extending-the-jquery-sortable-with-ajax-mysql/)。

不管是不是，“foreach 的无效参数”都意味着它`$_GET['item']`是空的，或者格式不正确。尝试将其打印在`server_items_reorder.php`：

```
print "$_GET[item]"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:33:14.600

mm ..我认为querystring var的名称是item_list

试试这个重命名

```
$('#item_list').sortable('serialize',{key:'item'}) 
```

您确定 #item_list 包含 ids 值吗？

# mysql - MySQL 查询缓存：大型网站建设平台是或否

> ID：10630967
> 
> 赞同：3
> 
> 时间：2012-05-17T06:35:05.910
> 
> 标签：mysql, lamp, query-cache

翻阅关于 MySQL 查询缓存的大量信息和相互冲突的建议可能真的让人不知所措，很难说出它与我的用例有何关系。

我们有一个大型定制平台，运行在托管许多网站的 LAMP 堆栈上。每个网站都将其内容存储在表格行中。在大多数情况下，它们都在同一张桌子上。我读过每当更新表时所有缓存的查询都会失效，但我也读过关于它的冲突内容。

假设有人访问网站 A，其内容从数据库中加载并在此过程中缓存。另一个人随后访问，由于数据被缓存，因此网站加载速度更快。现在B网站的内容发生了变化，和A网站在同一个表中的一行。A网站的所有缓存数据现在都失效了吗？如果是这样，我们真的会通过完全关闭查询缓存来提高性能吗？

我一直在阅读有关调整查询缓存的内容，而且非常不知所措。我尝试了一些东西，但很难说它们有多大的影响。这是来自 MySQLTunerscript 的当前粘贴：

```
-------- General Statistics --------------------------------------------------
[--] Skipped version check for MySQLTuner script
[OK] Currently running supported MySQL version 5.1.62-cll
[OK] Operating on 64-bit architecture

-------- Storage Engine Statistics -------------------------------------------
[--] Status: +Archive -BDB -Federated +InnoDB -ISAM -NDBCluster
[--] Data in MyISAM tables: 4G (Tables: 1977)
[--] Data in InnoDB tables: 384K (Tables: 16)
[!!] Total fragmented tables: 33

-------- Security Recommendations  -------------------------------------------
[OK] All database users have passwords assigned

-------- Performance Metrics -------------------------------------------------
[--] Up for: 5d 1h 30m 33s (53M q [122.486 qps], 1M conn, TX: 125B, RX: 13B)
[--] Reads / Writes: 83% / 17%
[--] Total buffers: 8.1G global + 5.5M per thread (500 max threads)
[OK] Maximum possible memory usage: 10.8G (46% of installed RAM)
[OK] Slow queries: 0% (2K/53M)
[OK] Highest usage of available connections: 5% (28/500)
[OK] Key buffer size / total MyISAM indexes: 8.0G/1.2G
[OK] Key buffer hit rate: 99.7% (1B cached / 3M reads)
[!!] Query cache efficiency: 16.2% (6M cached / 41M selects)
[!!] Query cache prunes per day: 2869188
[OK] Sorts requiring temporary tables: 0% (11 temp sorts / 609K sorts)
[OK] Temporary tables created on disk: 0% (11K on disk / 2M total)
[OK] Thread cache hit rate: 99% (28 created / 1M connections)
[!!] Table cache hit rate: 1% (1K open / 88K opened)
[OK] Open file limit used: 3% (2K/65K)
[OK] Table locks acquired immediately: 99% (41M immediate / 41M locks)
[OK] InnoDB data size / buffer pool: 384.0K/8.0M

-------- Recommendations -----------------------------------------------------
General recommendations:
    Run OPTIMIZE TABLE to defragment tables for better performance
    Enable the slow query log to troubleshoot bad queries
    Increase table_cache gradually to avoid file descriptor limits
Variables to adjust:
    query_cache_limit (> 6M, or use smaller result sets)
    query_cache_size (> 96M)
    table_cache (> 1024) 
```

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:50:16.503

上次我查看查询缓存时，这对我来说绝对是禁忌。虽然增加了缓存结果的能力，但它也会使 MySQL 变慢一点，因为它需要时间来使缓存条目无效。除非您针对它测试您的工作负载，否则我不建议您明确打开它（如手册所示：[http](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html) ://dev.mysql.com/doc/refman/5.1/en/query-cache.html ）。

测试它的好方法是快照数据库并捕获接下来 1 小时的请求。通过这种方式，您可以设置另一台服务器并在那里运行所有测试，而不会给您的生产机器带来大量负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:37:23.520

答案是肯定的。

它是无效的，并且它是完全透明的，除非您禁用`query_cache_wlock_invalidate`您可能想要检查的内容，因为如果您使用 MyISAM 表，它仍然值得禁用。

然而，它节省了 16% 的读取查询并立即解决它们而不会打扰存储引擎，这在 MyISAM 的情况下通常意味着也不会打扰 I/O 系统。这已经足够了！事实上，查询缓存是使用 RAM 进行缓存的最佳选择，因此将查询缓存设置为 128 MB 左右，在进行一些正常/繁重的操作后，`SHOW GLOBAL STATUS LIKE '%qcache%'`显示低或高`Qcache_free_memory`：如果低，增加查询缓存，即使以牺牲其他数据库缓存（如 InnoDB 缓冲池）为代价；如果它很高，请将您的查询缓存减少几乎那么多，因为不幸的是您不会在您的工作集中使用更多它。

# facebook - Facebook 支付对话框：处理您的付款时出现问题

> ID：10630971
> 
> 赞同：0
> 
> 时间：2012-05-17T06:35:52.100
> 
> 标签：facebook, dialog, payment

我已使用以下代码在 Facebook 上为我的应用程序应用程序打开 Facebook 支付对话框，**但出现错误：**

```
<div id="fb-root"></div>
      <script src="http://connect.facebook.net/en_US/all.js"></script>
<p> <a onclick="placeOrder(); return false;">Buy</a></p>

<script> 
    FB.init({appId: 367311903326028, status: true, cookie: true});

    function placeOrder() {
      // If using mobile, this is where you place the
      // iOS native app check for credits (see below)

      // Assign an internal ID that points to a database record
      var order_info = 'abc123';

      // calling the API ...
      var obj = {
        method: 'pay',
        order_info: order_info,
        action: 'buy_item',
        dev_purchase_params: {'oscif': true}
      };

      FB.ui(obj, callback);
    }

    var callback = function(data) {
      if (data['order_id']) {
        return true;
      } else {
        //handle errors here
        return false;
      }
    };

    function writeback(str) {
      document.getElementById('output').innerHTML=str;
    }
</script>

<br> 
```

**错误 ：**

处理您的付款时出现问题
抱歉，我们在处理您的付款时遇到了问题。
您没有为此交易支付任何费用。请再试一次。

请任何人都可以建议我这里出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T08:10:05.117

在我看来，您正在使用旧货币付款，这是一个坏主意，因为它们将在两个月内被弃用。

检查您的 FB 应用程序设置中您没有使用新的本地货币支付，就好像您已启用它（这是现在的默认设置），那么您可以进行购买的唯一方法是使用新的方式。使用旧方法将失败。停用新的付款方式将允许您同时使用新的和旧的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:54:07.563

如果没有更多信息，真的很难知道这里的问题是什么。具体来说，您对 payment_status_update 请求提供什么响应？您能否向我们展示处理这些请求的代码，或者您的响应示例？

在我们的回调对 payment_status_update 请求的响应不正确的情况下，我个人已经看到了该错误消息，但也可能是其他原因。

# php - 两个数组的foreach循环？

> ID：10630972
> 
> 赞同：0
> 
> 时间：2012-05-17T06:36:01.413
> 
> 标签：php

我有两个数组。一个用于输入框，另一个用于复选框。

输入框[] 复选框[]

输入框[] 复选框[] 。. . . 提交按钮

当我填写复选框1并在输入框1中填写值并尝试提交时。Foreach 失败，因为它通过了输入框的所有索引，但只通过了选中的复选框。

```
foreach(array_combine($checkbox, $inputbox) as $check => $input) 
```

请告诉我我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:38:55.793

遍历文本框（保证所有文本框都存在），然后获取相应的复选框（可能通过 ID，如果它们之间有某种 ID 对应关系 - 你应该这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:48:41.023

如果您可以控制 HTML 表单，则可以按以下方式制作表单

```
<input type="text" name="name[1]" />
<input type="checkbox" name="check[1]" />
<input type="text" name="name[2]" /> 
<input type="checkbox" name="check[2]" /> 
<input type="text" name="name[3]" />
<input type="checkbox" name="check[3]" />
<input type="text" name="name[4]" />
<input type="checkbox" name="check[4]" /> 
```

在这种情况下，您将通过以下方式获得 post 数组

```
Array
(
    [name] => Array
        (
            [1] => Swapnil
            [2] => 
            [3] => Sarwe
            [4] => Swapnil Sarwe
        )

    [check] => Array
        (
            [1] => on
            [3] => on
        )

) 
```

现在您可以遍历名称（输入框），然后检查 isset 的 isset($_POST['check'][$key]) 并设置默认值

# android - 安卓脸书认证

> ID：10630986
> 
> 赞同：5
> 
> 时间：2012-05-17T06:37:14.407
> 
> 标签：android, facebook, facebook-android-sdk

我正在开发一个 android 应用程序，通常应用程序包含一个登录屏幕，在我的应用程序中不会有登录屏幕，只有一个图标，例如 Facebook 图标。如果我按下该图标，它应该直接使用 Facebook 用户名和密码登录，它应该登录到应用程序。有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:22:01.100

是的，您可以这样做，但只有一个条件是您必须将**单点登录**集成到您的应用程序中，并且您的移动设备中应该有**Facebook 原生应用程序**。

从此[链接下载 Facebook 图书 SDK。](https://github.com/facebook/facebook-android-sdk)

下载后按照这个[步骤](http://developers.facebook.com/docs/mobile/android/build/)

在 Facebook 帐户中注册您的应用程序。然后按照步骤创建设置登录页面。

使用 Keytool创建用于启用[单点登录的哈希键。](http://developers.facebook.com/docs/mobile/android/build/#sig)

**注意**：如果您想在不提供登录详细信息的情况下启动您的应用程序，则应安装 Facebook 原生应用程序并登录。

**否则，您将在第一次时**要求登录，下次您的应用程序将自动启动而不要求登录凭据。

这也取决于访问令牌，因此请相应地处理它。

有关[访问令牌的更多参考](http://developers.facebook.com/docs/mobile/android/build/#token)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:03:03.913

您好，您可以尝试以下示例 1) [http://android10.org/index.php/articleslibraries/290-facebook-integration-in-your-android-application](http://android10.org/index.php/articleslibraries/290-facebook-integration-in-your-android-application)

2) 从 Github [https://github.com/facebook/facebook-android-sdk下载最新的 SDK](https://github.com/facebook/facebook-android-sdk)

您想要的功能称为单点登录。查看更多相关问题

# android - Android Nine patch Image

> ID：10630987
> 
> 赞同：2
> 
> 时间：2012-05-17T06:37:25.887
> 
> 标签：android, nine-patch

Why we use nine patch image ? without using nine patch we can also use another .png image .Actually i want to know what is the basic requirement of nine patch ? I have searched lot but not clear.

# drupal-6 - Block a specific page in Robots.txt

> ID：10630989
> 
> 赞同：1
> 
> 时间：2012-05-17T06:37:31.263
> 
> 标签：drupal-6, seo, robots.txt, google-search

According to this [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

`Disallow: /page1/`
all page1 URLs will be disallowed i.e page1/foo/bar will also get blocked.
`Disallow: /page1`

Only `page1` will be blocked and `page1/foo/bar will` be allowed.
But this is not happening , how can I block only `page1` and allow `page1/foo/bar` to be crawled

EDIT : Actual Issue is that same Page is crawled twice in different paths as `/page` and `/page/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:01:35.867

Why don't you just add a robots metatag?

```
<meta name="robots" content="noindex, nofollow, noarchive"/> 
```