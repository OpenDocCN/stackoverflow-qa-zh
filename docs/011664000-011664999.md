# StackOverflow 问答 11664000-11664999

# javascript - Javascript - 收到警报消息后停止继续

> ID：11664000
> 
> 赞同：0
> 
> 时间：2012-07-26T06:56:58.093
> 
> 标签：javascript, spring, jsp, alert

在我的 Web 应用程序中，在登录页面中，我有一个复选框。输入用户名/密码后，如果用户没有勾选复选框（T&C），他不应该被带到主页，并且会显示警告错误消息。

我已经尝试了以下代码。但它不起作用。即，显示警告消息。但是用户被带到下一页（主页）。我尝试返回 false，但没有运气。

谁能告诉如何解决这个问题？

```
function doSubmit() {
    var checkbox = document.getElementById("terms");
    if (!checkbox.checked) {
        alert("error message here!");
        return;
    }
    document.getElementById("f").submit();
}​ 
```

我正在调用 doSubmit 从

```
<input id="proceed" onclick="doSubmit()" type="submit" value="${fn:escapeXml(submit_label)}" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:37:56.577

不要`onclick`在输入中使用，而是尝试在表单标签中使用以下内容：

```
onsubmit="return doSubmit()" 
```

js的功能如下：

```
function doSubmit() {
    var checkbox = document.getElementById("terms");
    if (!checkbox.checked) {
        alert("error message here!");
        return false;
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:29:46.103

尝试将输入类型更改为**button**而不是**submit**，将提交操作委托给 JS 函数：

```
<input id="proceed" onclick="doSubmit()" type="button" value="${fn:escapeXml(submit_label)}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:02:48.087

在提交表单之前，您应该检查`checkbox`的状态，如果未检查，请阻止提交。在 jQuery 中，以下代码可以解决问题。

```
$(form).submit(function(e){
    if($(this).find("#terms").is('checked')){
        e.preventDefault();
        alert('error messge goes here');
    }
} 
```

# php - 调度 PHP 文件无法发送电子邮件

> ID：11664004
> 
> 赞同：0
> 
> 时间：2012-07-26T06:57:15.020
> 
> 标签：php, email, scheduled-tasks

我有以下用于发送简单电子邮件的 PHP 文件，我尝试通过浏览器打开此 php 文件，因此执行它，我可以成功接收电子邮件。但是，当我尝试发送它购买窗口调度程序时，我无法这样做。我在调度程序中打开文件的方式是 C:/xampp/htdocs/mail.php，我试图检查 Mercury 的日志，但 Mercury 没有收到邮件，所以可能 mail.php 没有被执行。请问为什么不能安排运行？

这是我的mail.php：

```
<?php
mail('me@gmail.com', 'Mercury test mail', 'If you can read this, everything was fine!');
?> 
```

![我的日程安排正在运行](../Images/2a9e4d0377c94d84f84a023c015bde4e.png)

采纳了我已经做出更改的建议，但仍然无法发送电子邮件

![在此处输入图像描述](../Images/dfd3f5a559b6c2194f5b09d22a59ce63.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:03:23.177

看来您的安排不正确。

要使用 Windows 调度程序或从命令行运行 PHP 文件，您需要使用以下格式：

```
C:\path\to\your\php.exe -f 'C:\path\to\your\actual.php' 
```

然后应该运行你的脚本。

此外，您经常`php.ini`将 CLI 使用的配置不同，因此请确保您的 SMTP 等设置在它们之间保持一致。

最后，如果您想知道脚本期间发生了什么，您可以让它们回显文本（因此使用`\n`新行等内容，并输出到如下文本文件：

```
C:\path\to\your\php.exe -f 'C:\path\to\your\actual.php' > 'C:\path\to\where\you\want\logfile.txt' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:03:01.323

从命令提示符运行 PHP 文件。试试这个命令

> "C:\xampp\php\php.exe" "C:\xampp\htdocs\test\Yourmailscript.php"

# c++ - 以不同用户身份运行的两个 exe 如何使用 COM（组件对象模型）进行通信

> ID：11664010
> 
> 赞同：1
> 
> 时间：2012-07-26T06:57:30.903
> 
> 标签：c++, windows, com

我是 COM 新手。你能告诉我两个作为不同用户（一个作为系统，另一个作为管理员或非管理员）运行的 exe 如何使用 COM（组件对象模型）进行通信？如果您有一些演示代码的链接，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:06:16.957

本文是[关于](http://www.cs.umd.edu/~pugh/com/)基础知识的，但解释了一些基础问题，例如您要求的 IPC。通信通道通过[Windows COM SCM](http://www.peterindia.net/COMOverview.html)自动提供的代理进行。

# c# - C# 和 VB.net 中的 App.config

> ID：11664017
> 
> 赞同：1
> 
> 时间：2012-07-26T06:57:49.173
> 
> 标签：c#, vb.net, app-config

C#.net 项目的 app.config 文件和 vb.net 项目的 app.config 文件有什么区别。我的 C# 项目工作正常。但是当我将其转换为 VB.net 时，app.config 文件设置正在产生问题，因为它没有按预期工作。我只是将 XML 设置复制粘贴到 vb.net 项目的应用程序配置中，但它仍然无法正常工作。任何建议

*（注意，编辑：配置文件中的相关部分，为了清楚起见，从下面的评论中复制）：*

```
<trace autoflush="true"/>
    <sources>
        <source name="Logger" >
            <listeners>
                <add name="eventlogListener" 
                     type="System.Diagnostics.EventLogTraceListener" 
                     initializeData="Application">
                    <filter type="System.Diagnostics.EventTypeFilter" 
                            initializeData="Error"/>
                </add>
                <add name="textfileListener"
                     type="System.Diagnostics.TextWriterTraceListener" 
                     initializeData="ErrorLog.log" />
                <remove name="Default"/>
            </listeners>
        </source>
    </sources> 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-06-01T12:40:16.790

我认为 c# 和 vb.net app.config 之间存在很大差异，因为 app.config 是 XML 配置:)

```
<?xml version="1.0"?>
<configuration>
<startup>
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client"/>
</startup>
</configuration> 
```

# extjs - 我们可以在sencha touch中将转换后的base64图像调整为自定义大小吗

> ID：11664025
> 
> 赞同：2
> 
> 时间：2012-07-26T06:58:24.207
> 
> 标签：extjs, sencha-touch, sencha-touch-2, base64

我已将图像转换为 base64 图像，此图像原始大小`height: 200`为`width: 150`. 我需要将此图像大小转换为`height: 133`and `width: 100`。我经历了 sencha io 图像调整大小的概念。它没有转换，而且一旦我将 sencha io 应用于 url，它就不会显示图像。谁能告诉我如何在 sencha touch2 样式中自定义转换后的 base64 图像的大小。

**这是我的代码：**在下面`height: 133px; width: 100px;`分配的代码中，但是为此图像的某些部分即将到来。原始图像大小为`height: 200px; width: 150px;`. 我需要将此自定义为`height: 133px; width: 100px;`

```
 .aboutclsT{
     background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAADICAYAAAAKhRhlAAAAGXRFWHRTb2Z0d2Fy......K5CYII') !important;
     background-repeat: no-repeat;
     height: 133px;
     width: 100px;
 } 
```

**SenchaIO 镜像代码：**

```
background: url('http://src.sencha.io/100/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAADICAYAAAAKhRhlAAAAGXRFWHRTb2Z0d2Fy......K5CYII') !important;
     background-repeat: no-repeat;
     height: 133px;
     width: 100px;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T11:07:44.143

我已经解决了这个问题。我已经添加`background-size: 100px 133px;`它工作正常。你们可以指定需要多少高度和宽度。

****这里是代码。****

```
.aboutclsT{
     background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAADICAYAAAAKhRhlAAAAGXRFWHRTb2Z0d2Fy......K5CYII'') !important;
     background-repeat: no-repeat;
     **background-size:100px 133px;**
     height: 133px;
     width: 100px;
 } 
```

# iphone - 在OpenGL中检测图像纹理上的触摸

> ID：11664027
> 
> 赞同：0
> 
> 时间：2012-07-26T06:58:31.117
> 
> 标签：iphone, objective-c, animation, opengl-es, glkit

我正在尝试使用 openGL 开发游戏，其中我使用 GLTextureLoader 类加载图像，并且这些精灵以一些计算的速度从左到右移动，我需要检测这些图像上的触摸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:27:40.583

由于您的目的非常简单，您所要做的就是将您拥有的任何对象绘制两次，一个可见的，另一个只在不可见的缓冲区上绘制颜色。然后你检查用户在不可见缓冲区中按下的位置，看看它是什么颜色，你有你的对象。

[http://www.lighthouse3d.com/opengl/picking/index.php3?color1](http://www.lighthouse3d.com/opengl/picking/index.php3?color1)

这就是基本理论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:04:13.417

OpenGL 是一个渲染 API。它只画东西。像 lighthouse3d 这样的技术确实有效，但 glReadPixels 很慢。

你应该在 CPU 上检查一下；也就是说，对于每个绘制的精灵，测试触摸位置是否在内部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:12:27.373

根据我的要求，我发现了如何做到这一点，正如我所说，我不是 openGL 的专家，但设法以某种方式做到了。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [[touches allObjects] objectAtIndex:0];
CGPoint touchLocation = [touch locationInView:self.view];
touchLocation = touchLocation = CGPointMake(touchLocation.x, 320 - touchLocation.y);
//self.player.moveVelocity = GLKVector2Make(50, 50);
//NSLog(@"Location in view %@", NSStringFromCGPoint(touchLocation));
//NSLog(@"bounding box is %@",NSStringFromCGRect([self.player boundingBox]));

GameSprite *temp;
for (GameSprite *tempSprite in self.children) {
    if (CGRectContainsPoint([tempSprite boundingBox], touchLocation)) {
        NSLog(@"touched the player");

        temp =tempSprite;
    }  
}

[self.children removeObject:temp];

}

- (CGRect)boundingBox {
CGRect rect = CGRectMake(self.position.x, self.position.y, self.contentSize.width, self.contentSize.height);
return rect;
} 
```

# php - 将权限分配给直接使用 php 中的 root 级别访问权限

> ID：11664028
> 
> 赞同：0
> 
> 时间：2012-07-26T06:58:33.940
> 
> 标签：php, permissions, fileserver

我正在开发一个有 2 台服务器的应用程序。**第一个是 Web Server**，我保存我的 PHP 文件，**另一个是 File Server**，我存储用户上传的所有文件。

我想在运行时将写权限分配给目录，以便我可以上传文件，上传文件后我需要将其权限更改为之前的状态。

当我尝试`chomod(FILE_PATH, 0755)`. 它向我显示了一个错误。`Assign write permission as root`. 我有文件服务器的管理员级别凭据。

我想要的是“通过**在运行时****登录来授予目录777权限`root`**”

如果有任何代码示例可用，请提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:17:07.043

您不想让您的服务器以`root`. 让我再说一遍。您真的不希望您的网络服务器以 root 身份登录。如果你这样做了，任何控制 PHP 的人都可以在服务器上做任何事情。这是非常不可取的。

您要做的是将文件夹的所有者更改为网络服务器，或者将其分配到同一组中，以便网络服务器可以愉快地更改您的文件夹选项等。

您可以使用`sudo chown username somedir`来更改所有者。本文[也](http://www.tuxfiles.org/linuxhelp/fileowner.html)可能有助于为您清除权限。

编辑：试试[这篇博客文章](http://www.trainsignal.com/blog/linux-file-permissions)，以获得一篇关于 linux 权限的相当广泛的文章。

# java - 使用 AlarmManager 为不同时区设置闹钟

> ID：11664030
> 
> 赞同：1
> 
> 时间：2012-07-26T06:58:41.450
> 
> 标签：java, android, calendar, timezone, alarmmanager

我的`Android`应用程序需要在接下来的几周内使用`AlarmManager`. 截至目前，我计划使用一组日历对象对这些日期/时间进行硬编码。

我面临的问题是，我如何处理不同的时区？假设我为 设置了闹钟 `2nd August 2012 15:00 GMT`，我如何确保在其他地方（比如印度，即 GMT+5.30）使用该应用程序的人在收到闹钟`2nd August 2012 20:30`

有没有一种方法可以让应用程序获得该特定设备的时区差异（即“+5.30”部分），以便在设置闹钟之前，`Calendar`我可以向每个对象添加该差异，然后设置闹钟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:07:12.050

我建议你使用`System.currentTimeMillis()`，哪个应该返回你的系统时间取决于手机所在的时区

# eclipse - Eclipse 中的文件过滤器插件（在 Package Explorer - Navigator 中）

> ID：11664035
> 
> 赞同：0
> 
> 时间：2012-07-26T06:59:06.253
> 
> 标签：eclipse, filter, directory, filefilter

我想为我的 Eclipse 项目创建一些自定义过滤器。我认为这可以通过扩展插件来完成。

例如，.asm 文件应该转到 ASM 过滤器，.c 文件应该转到 C 过滤器，等等。

我所有的输入文件都存储在 Source 文件夹中（在我的计算机上）。

但是我只需要这个过滤器来更好地管理文件，在包资源管理器中。

请，如果有人对此问题有一个起点......我将不胜感激。

越早越好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:36:36.687

您可能想看看这个： [Eclipse Common Navigator Framework](http://www.techjava.de/topics/2009/04/eclipse-common-navigator-framework/)

并阅读本教程以创建自定义导航： [自定义导航器](http://cvalcarcel.wordpress.com/2009/10/18/writing-an-eclipse-plug-in-part-7-creating-a-custom-navigator/) （这是第 7 部分，但一开始有很多理论。找到你个人的起点）

我希望这是您正在寻找的东西，或者您至少可以从中获得一些有用的东西...

# python-imaging-library - PIL 裁剪/缩略图的填充颜色

> ID：11664038
> 
> 赞同：13
> 
> 时间：2012-07-26T06:59:16.593
> 
> 标签：python-imaging-library

我正在拍摄图像文件并使用以下 PIL 代码对其进行缩略图和裁剪：

```
 image = Image.open(filename)
        image.thumbnail(size, Image.ANTIALIAS)
        image_size = image.size
        thumb = image.crop( (0, 0, size[0], size[1]) )
        offset_x = max( (size[0] - image_size[0]) / 2, 0 )
        offset_y = max( (size[1] - image_size[1]) / 2, 0 )
        thumb = ImageChops.offset(thumb, offset_x, offset_y)                
        thumb.convert('RGBA').save(filename, 'JPEG') 
```

这很好用，除非图像的纵横比不同，否则差异会用黑色填充（或者可能是 alpha 通道？）。我对填充没问题，我只想能够选择填充颜色——或者更好的是一个 alpha 通道。

输出示例：

![输出](../Images/f249683503400c9c4b73bff9cb8e1f7b.png)

如何指定填充颜色？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-29T09:18:15.217

我稍微修改了代码以允许您指定自己的背景颜色，包括透明度。代码将指定的图像加载到 PIL.Image 对象中，从给定大小生成缩略图，然后将图像粘贴到另一个全尺寸表面。 *（请注意，用于颜色的元组也可以是任何 RGBA 值，我刚刚使用了 alpha/透明度为 0 的白色。）*

* * *

```
# assuming 'import from PIL *' is preceding
thumbnail = Image.open(filename)
# generating the thumbnail from given size
thumbnail.thumbnail(size, Image.ANTIALIAS)

offset_x = max((size[0] - thumbnail.size[0]) / 2, 0)
offset_y = max((size[1] - thumbnail.size[1]) / 2, 0)
offset_tuple = (offset_x, offset_y) #pack x and y into a tuple

# create the image object to be the final product
final_thumb = Image.new(mode='RGBA',size=size,color=(255,255,255,0))
# paste the thumbnail into the full sized image
final_thumb.paste(thumbnail, offset_tuple)
# save (the PNG format will retain the alpha band unlike JPEG)
final_thumb.save(filename,'PNG') 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-29T10:00:39.140

`paste`将您重新调整大小的缩略图图像放到新图像上会更容易一些，这就是您想要的颜色（和 alpha 值）。

您可以创建一个图像，并在一个元组中指定它的颜色，`RGBA`如下所示：

```
Image.new('RGBA', size, (255,0,0,255)) 
```

这里没有透明度，因为 alpha 波段设置为 255。但背景将是红色的。使用此图像粘贴到上，我们可以创建任何颜色的缩略图，如下所示：

![在此处输入图像描述](../Images/026c1a03931871a66c1dbad03ee8b606.png)

如果我们将 alpha 波段设置为`0`，我们可以`paste`在透明图像上，并得到：

![在此处输入图像描述](../Images/c4604d696120e73009650cba8df29848.png)

示例代码：

```
import Image

image = Image.open('1_tree_small.jpg')
size=(50,50)
image.thumbnail(size, Image.ANTIALIAS)
# new = Image.new('RGBA', size, (255, 0, 0, 255))  #without alpha, red
new = Image.new('RGBA', size, (255, 255, 255, 0))  #with alpha
new.paste(image,((size[0] - image.size[0]) / 2, (size[1] - image.size[1]) / 2))
new.save('saved4.png') 
```

# c# - 组合数字和名称集合

> ID：11664040
> 
> 赞同：0
> 
> 时间：2012-07-26T06:59:17.080
> 
> 标签：c#, c#-4.0, .net-4.0

我有 2 个列表集合。一个包含数字，其他名称。数字的数量是名称的两倍（总是）。我想从集合中获取名字和从另一个集合中获取前两个数字，然后将它们放在（VentriloUser）的第三个用户集合中。然后第二个名字需要与第三个和第四个数字匹配，依此类推。

我在想一些带有 for 或 foreach 循环的东西，但我现在无法理解它。

```
public class VentriloUser
    {
        public VentriloUser(string name, int seconds, int ping)
        {
            Name = name; Seconds = seconds; Ping = ping;
        }
        public string Name { get; set; }
        public int Ping { get; set; }
        public int Seconds { get; set; }
    }

public class Ventrilo
    {
        public Ventrilo(string statusurl)
        {
            StatusURL = statusurl;
        }

        public string StatusURL { get; set; }

        public string HTML { get; set; }

        public List<VentriloUser> Users { get; set; }

        private Regex findNumbers = new Regex("\\<td width=\"10%\" bgcolor=\"#\\w{6}\"\\>\\<font color=\"#000000\">\\<div style=\"overflow:hidden;text-overflow:ellipsis\"\\>-?\\d+\\<");
        private Regex findNames = new Regex("\\<td width=\"20%\" bgcolor=\"#\\w{6}\"\\>\\<font color=\"#000000\">\\<div style=\"overflow:hidden;text-overflow:ellipsis\"\\>\\b\\w+\\<");

        private WebClient wClient = new WebClient();

        public void DownloadHTML()
        {
            HTML = wClient.DownloadString(StatusURL);
        }

        public List<int> GetNumbers()
        {
            var rawnumbers = findNumbers.Matches(HTML);
            var numbers = new List<int>();

            foreach (var rawnumber in rawnumbers)
            {
                var match = Regex.Match(rawnumber.ToString(), "\\>\\-?\\d+\\<");

                string number = Regex.Replace(match.ToString(), "\\<|\\>", "");

                numbers.Add(Convert.ToInt32(number));
            }

            return numbers;
        }
        public List<string> GetNames()
        {
            var rawnames = findNames.Matches(HTML);
            var names = new List<string>();

            foreach (var rawname in rawnames)
            {
                var match = Regex.Match(rawname.ToString(), "\\>\\w+<");

                string name = Regex.Replace(match.ToString(), "\\<|\\>", "");

                names.Add(name);
            }

            return names;
        }

        public List<VentriloUser> GenerateUsers()
        {
            var numbers = GetNumbers();
            var names = GetNames();

            var users = new List<VentriloUser>();
        }

    } 
```

我是一个业余爱好者，但希望有一天能从事一份事业。任何帮助深表感谢。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:08:59.283

使用 LINQ：

```
var users = names.Select((name,idx) => new VentriloUser(name, numbers[idx*2], numbers[idx*2+1]))
                 .ToList(); 
```

使用循环：

```
var users = new List<VentriloUser>();
for (int i = 0; i < names.Count; i++)
{
    var name = names[i];
    int j = i * 2;
    if (j >= numbers.Count - 1)
        break; // to be safe...
    users.Add(new VentriloUser(name, numbers[j], numbers[j + 1]));
} 
```

# ios - 无法在 iOS 中连接 SQLite 数据库

> ID：11664043
> 
> 赞同：2
> 
> 时间：2012-07-26T06:59:23.087
> 
> 标签：ios, sqlite

我对 SQLite 和 iOS 完全陌生。我正在关注如何在 iOS 中使用 SQLite 的基本教程：

[http://www.switchonthecode.com/tutorials/using-sqlite-on-the-iphone#comment-11617](http://www.switchonthecode.com/tutorials/using-sqlite-on-the-iphone#comment-11617)

在上面的链接中，他们将数据库指定为：

```
sqlite3 *database;

int result = sqlite3_open("/myExampleDatabase.db", &database); 
```

但是当我使用上面的代码替换我的数据库名称时，我收到了后续警报视图中指定的错误。

我的问题是，我是否必须将数据库文件添加到我的资源文件夹中？如果没有，我是否必须将我的数据库文件放在 iOS 可以访问的地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T07:22:43.953

我建议对 SQLite 使用 FMDB 包装器： [https ://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T17:27:38.230

如果你想打开一个 sqlite 数据库，你可能想：

1.  确保将数据库包含在包中。

2.  以编程方式将数据库从您的包复制到您的文档（如果用户要修改数据库，这尤其重要；如果您只是阅读，您可以继续打开包中的版本）。

3.  如果你在你的模拟器中运行它，你可以继续检查 bundle 和 Documents 文件夹，如果事情不正确，只是为了确保一切都在它应该在的地方。您的模拟器文件夹类似于“~/Library/Application Support/iPhone Simulator/5.1/Applications/”（将 5.1 替换为您正在使用的模拟器的任何版本）。`chflags nohidden ~/Library`您可能必须通过在`Terminal`命令行窗口中运行来取消隐藏您的库文件夹（如果您还没有） 。

因此，获取数据库路径的代码（如果还没有，则将其复制到 Documents）可能如下所示：

```
NSString *databaseName = kDatabaseName; // obviously, replace this with your database filename, e.g., @"myExampleDatabase.db"

NSString *documentsFolder          = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *databaseFullDocumentPath = [documentsFolder stringByAppendingPathComponent:databaseName];
NSString *databaseFullBundlePath   = [[NSBundle mainBundle] pathForResource:databaseName ofType:@""];

NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:databaseFullDocumentPath])
{
    NSAssert([fileManager fileExistsAtPath:databaseFullBundlePath], @"Database not found in bundle");

    NSError *error;
    if (![fileManager copyItemAtPath:databaseFullBundlePath toPath:databaseFullDocumentPath error:&error])
        NSLog(@"Unable to copy database from '%@' to '%@': error = %@", databaseFullBundlePath, databaseFullDocumentPath, error);
} 
```

然后，如果您正在执行自己的 sqlite 调用，它将类似于：

```
sqlite3 *database;
if (sqlite3_open_v2([databaseFullDocumentPath UTF8String], &database, SQLITE_OPEN_READWRITE, NULL) == SQLITE_OK)
{

    // do whatever you want to do
} 
```

或者，或者，如果您使用的是 FMDB，它将类似于：

```
FMDatabase *db = [[FMDatabase alloc] initWithPath:databaseFullDocumentPath];
NSAssert(db, @"Unable to open create FMDatabase");
BOOL success = [db open];
NSAssert(success, @"Unable to open database");
if (success)
{
    // do whatever you want to do
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:09:24.237

在大多数情况下，我完全支持前面的答案，但是：

**你确定你必须使用`sqlite3`而不是`Core Data`？**

有几个讨论可以让您了解何时使用数据库包装器（如[fmdb](https://github.com/ccgus/fmdb)）以及何时使用`Core Data`. （就个人而言，我喜欢使用 fmdb，但它总是会导致更多的代码、复杂性和大多数时候性能更差）

*   [核心数据与 SQLite 3](https://stackoverflow.com/questions/523482/core-data-vs-sqlite-3)
*   [在 iPhone 上使用 CoreData 或 SQLite？](https://stackoverflow.com/questions/1318467/use-coredata-or-sqlite-on-iphone)
*   [核心数据与 Sqlite 和性能](https://stackoverflow.com/questions/1045238/core-data-vs-sqlite-and-performance)
*   [核心数据与 SQLite 3](https://stackoverflow.com/questions/523482/core-data-vs-sqlite-3)
*   [是否值得在 iphone 上使用一个简单的 sqlite 应用程序使用核心数据，该应用程序只有一个表，没有关系或复杂的子表/视图？](https://stackoverflow.com/questions/1043706/is-it-worth-using-core-data-for-a-simple-sqlite-app-on-the-iphone-with-one-table)
*   [面向 SQL 经验丰富的开发人员的 Core Data 与 SQLite](https://stackoverflow.com/questions/840634/core-data-vs-sqlite-for-sql-experienced-developers)

一些开始使用的链接`Core Data`：

*   [核心数据编程指南（Apple）](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)
*   [iOS 核心数据教程 (Apple)](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)

# html - CSS +将文本放入输入类型=文本

> ID：11664044
> 
> 赞同：0
> 
> 时间：2012-07-26T06:59:32.240
> 
> 标签：html, css

我有以下代码，它在所有浏览器中都能正常工作：

```
 <input type="text" id="fileUploadTextBox" value="Browse My Computer"/> 
```

说到 IE，我想将文本稍微更改为

```
 <input type="text" id="fileUploadTextBox" value="Browse My Computer (Double Click)"/> 
```

我可以使用 CSS 做到这一点吗？我知道如何为 IE 运行一个单独的 CSS 文件。

还是有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:04:05.570

通过使用[**条件注释**](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)，您可以这样做：

**对于其他浏览器：**

```
<!--[if !IE]><!-->
    <input type="text" id="fileUploadTextBox" value="Browse My Computer"/>
<!--<![endif]--> 
```

**对于 IE 浏览器：**

```
<!--[if IE]>
    <input type="text" id="fileUploadTextBox" value="Browse My Computer (Double Click)"/>
<![endif]--> 
```

[**看演示**](http://jsfiddle.net/akhurshid/V2RtS/)

或者你可以使用 Javascript/jQuery 来实现它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T07:03:53.867

这个带有 jQ​​uery 的 Javascript 应该可以工作：

```
if ( $.browser.msie ) {
  <input type="text" id="fileUploadTextBox" value="Browse My Computer (Double Click)"/>
} else {
  <input type="text" id="fileUploadTextBox" value="Browse My Computer"/>
} 
```

# zend-framework - 优化zend框架+Doctrine2 web应用

> ID：11664045
> 
> 赞同：0
> 
> 时间：2012-07-26T06:59:38.013
> 
> 标签：zend-framework, optimization, frameworks, doctrine-orm

我们有一个用 PHP+js+mysql 编写的大型应用程序。我们的一些老板决定（犯了一个大错误，因为他们不是开发人员）将这个应用程序外包给开发人员公司重写它。他们用 Zend Framework+ Doctrine 重写了应用程序，给了我们一个非常非常慢的应用程序，如果在旧的模块上的应用程序加载需要 1 秒现在需要 4 秒。

到目前为止，我们已经做了不可能的事情来加快速度：激活缓存服务器，将应用程序迁移到 linux，缓存一切可能的东西，但它仍然非常慢非常慢。

**我需要所有开发人员的经验如何优化和加快这个用 zend 框架和 doctrin2 编写的应用程序（我们不能删除学说，我们已经实现了缓存系统）？提示技巧，任何anwser的想法都将受到欢迎。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:49:42.967

对于所有网站应用程序使用这个萤火虫的插件来优化你的代码，你真的可以在性能上取胜！

[雅虎 Yslow 插件](http://developer.yahoo.com/yslow/)

[谷歌 PageSpeed 插件](https://developers.google.com/speed/pagespeed/)

在那里，您的页面有一个符号，并列出了改进您最快的应用程序的列表。

之后，对于 Doctrine2 ，您可以将 fetchArray() 用于一些小请求，（全局，用户使用 fetchAll() ）。对于请求，FetchArray 比 fetchAll 更快，因为 fetchArray 只返回一个数组，而 fetchAll 返回请求中链接的所有对象......（很多时候，数组就足够了）。

希望我能帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:29:46.510

与任何 PHP 应用程序相同：

*   在您的开发机器上启用 Xdebug 并进行一些分析以查看瓶颈在哪里
*   开启MySQL慢查询日志，看看查询是否可以改进

您还可以查看数据库分析功能，`Zend_Db`以查看应用程序是否执行了不必要的查询或加载了超出其需要的数据。

# jquery - 使用 jquery 和 java 脚本对中继器控件中的 asp 文本框值求和并在结果 asp 标签中显示结果？

> ID：11664050
> 
> 赞同：1
> 
> 时间：2012-07-26T06:59:49.280
> 
> 标签：jquery, asp.net, javascript-events

*此处强调文本*我使用 jquery 和 java 脚本对转发器控件中的 asp 文本框值求和，并在结果 asp 标签中显示结果。我想知道如何在 jquery 的 asp 标签中设置值。在这里我得到了错误名称'lblTotal'在当前上下文中不存在......

```
if (objIndex == 0) {
                    objData = new Array();
                }
                objData[objIndex] = txtBoxValue;
                alert(secName);
                totamt = 120000;
                var Tot = 0;
                for (var i = 0; i < objData.length; i++) {
                    Tot = parseInt(Tot) + parseInt(objData[i]);
                }

                if (parseInt(Tot) > parseInt(totamt)) {
                        var a = $("#<%= lblTotal.ClientID%>").val('totamt');
                    alert(a);

                }
                else if (parseInt(Tot) <= parseInt(totamt)) {
                var b = $("#<%= lblTotal.ClientID%>").val('Tot');
                    alert(b);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:26:02.203

如果您想使用客户端（JQuery 代码）执行此操作，您应该为您的标签提供一个类，您可以使用它来轻松选择它们。例如，来自您的转发器模板：

```
<ItemTemplate>
    ...
    <asp:Label runat='server' Text='' CssClass='class1 class2 totalable' />
    ...
</ItemTemplate> 
```

然后在您的客户端代码中，*在*转发器呈现后，您可以遍历所有具有`totalable`该类的标签并进行添加。

因此，在您想要合计这些值时：

```
var total = 0;

$('.totalable').each(function () {
    //alert($(this).html());
    total+=  parseInt($(this).html());
    ....
});

alert('Total = ' + total); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:04:31.137

你`label`在里面`Repeater`所以它不直接可见因此你不能使用

```
<%= lblTotal.ClientID%> 
```

你应该找到这样的控制

```
 var controls = yourParentControl.getElementsByTagName("SPAN");
//this will give you array of controls after that you should iterate in that 
//collection and find out the label you want to set total to. 
```

SPAN 因为`labels`呈现为`SPANs`

# android - Android 2.2 上的片段标签

> ID：11664058
> 
> 赞同：0
> 
> 时间：2012-07-26T07:00:21.807
> 
> 标签：android, tabs, fragment

任何人都有适用于 Android 2.2 并支持 ICS 的片段选项卡的工作示例？即使添加了兼容性包，那里的每个示例似乎都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:03:34.897

有一个使用 Activity 的示例，其中包含选项卡内的 TabHost 和 Fragments。它使用兼容性库并适用于当前和旧版本的 Android。

如果您使用 Android SDK 安装了支持库和示例，您的磁盘上已经有了它：

/extras/android/compatibility/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:16:03.423

[http://developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T03:10:28.273

查看 ActionBarSherlock 库的[FragmentsTabs](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java)和[FragmentTabsPager](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)示例。我在 Android 2.3 和 4.1 上测试过。它工作得很好并且完全可以重复使用。

# xcode - 从 C++ 应用程序创建 OSx .app

> ID：11664060
> 
> 赞同：4
> 
> 时间：2012-07-26T07:00:31.510
> 
> 标签：xcode, macos

我使用命令行工具项目模板创建了一个 OpenGL 应用程序。现在输出项目显然是一个 unix 可执行文件。

我的问题是如何将此可执行文件转换为 bundle .app？我要添加另一个目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:47:12.720

如果您创建了一个命令行工具，那么它就是一个命令行工具。我不知道有什么方法可以轻松地将它捆绑到应用程序中。

如果我是你，并且你将开始编写 Mac OpenGL 应用程序，那么请使用 SFML 进行设置。它极大地简化了窗口的创建，是跨平台的并且有一个很棒的社区。此外，获取 mac .app 包中的资源路径有点棘手，它们提供的模板允许您通过调用访问任何文件：

```
loadFile(resourcePath() + "filename.txt"); 
```

而不必跟踪所有内容。另外，整个资源路径代码都是用目标 C 编写的，这对一些 C++ 程序员来说可能是一件痛苦的事情。

整个框架非常健壮，但保持了简单的风格和自己的命名空间。用你想要的，不要用你不需要的。最新版本（仍然是 beta）2.0，带有 Xcode 模板。只需创建一个模板并在项目的构建设置中滚动到底部。您会看到 SFML_LINK_DYLIBS_SUFFIX，它的值为“-d”。删除“-d”，它应该可以编译。

然后，如果您正在分发，请添加一个副本文件构建阶段并链接您使用的 .dylib(s)。

# jquery - Jquery Easy UI 分别访问行中的数据以进行自定义 ajax 调用

> ID：11664061
> 
> 赞同：0
> 
> 时间：2012-07-26T07:00:37.300
> 
> 标签：jquery, jquery-ui, crud, jquery-easyui

在 jquery-easyui-1.2.6 的演示文件 datagrid2.html 中，我试图通过 javascript 访问行中的数据，以便我可以使用它来构造我的 ajax url 以在服务器端保存 UI 更改。

整个html代码如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Editable DataGrid - jQuery EasyUI Demo</title>
    <link rel="stylesheet" type="text/css" href="../themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="../themes/icon.css">
    <link rel="stylesheet" type="text/css" href="demo.css">
    <script type="text/javascript" src="../jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="../jquery.easyui.min.js"></script>
    <script>
        var products = [
            {productid:'FI-SW-01',name:'Koi'},
            {productid:'K9-DL-01',name:'Dalmation'},
            {productid:'RP-SN-01',name:'Rattlesnake'},
            {productid:'RP-LI-02',name:'Iguana'},
            {productid:'FL-DSH-01',name:'Manx'},
            {productid:'FL-DLH-02',name:'Persian'},
            {productid:'AV-CB-01',name:'Amazon Parrot'}
        ];
        function productFormatter(value){
            for(var i=0; i<products.length; i++){
                if (products[i].productid == value) return products[i].name;
            }
            return value;
        }
        $(function(){
            var lastIndex;
            $('#tt').datagrid({
                toolbar:[{
                    text:'Add New',
                    iconCls:'icon-add',
                    handler:function(){
                        $('#tt').datagrid('endEdit', lastIndex);
                        $('#tt').datagrid('appendRow',{
                            itemid:'',
                            productid:'',
                            listprice:'',
                            unitprice:'',
                            attr1:'',
                            status:'P'
                        });
                        lastIndex = $('#tt').datagrid('getRows').length-1;
                        $('#tt').datagrid('selectRow', lastIndex);
                        $('#tt').datagrid('beginEdit', lastIndex);
                    }
                },'-',{
                    text:'Delete',
                    iconCls:'icon-remove',
                    handler:function(){
                        var row = $('#tt').datagrid('getSelected');
                        if (row){
                            var index = $('#tt').datagrid('getRowIndex', row);
                            $('#tt').datagrid('deleteRow', index);
                        }
                    }
                },'-',{
                    text:'Edit Save',
                    iconCls:'icon-save',
                    handler:function(){     
                        $('#tt').datagrid('acceptChanges');                     
                    }
                },'-',{
                    text:'Undo',
                    iconCls:'icon-undo',
                    handler:function(){
                        $('#tt').datagrid('rejectChanges');
                    }
                },'-',{
                    text:'GetChanges',
                    iconCls:'icon-search',
                    handler:function(){
                        var rows = $('#tt').datagrid('getChanges');
                        alert('changed rows: ' + rows.length + ' lines');
                    }
                }],
                onBeforeLoad:function(){
                    $(this).datagrid('rejectChanges');
                },
                onClickRow:function(rowIndex){
                    if (lastIndex != rowIndex){
                        $('#tt').datagrid('endEdit', lastIndex);
                        $('#tt').datagrid('beginEdit', rowIndex);
                    }
                    lastIndex = rowIndex;
                }
            });
        });
    </script>
</head>
<body>
    <h2>Editable DataGrid</h2>
    <div class="demo-info" style="margin-bottom:10px">
        <div class="demo-tip icon-tip"></div>
        <div>Click the row to start editing.</div>
    </div>

    <table id="tt" style="width:700px;height:auto"
            title="Editable DataGrid" iconCls="icon-edit" singleSelect="true"
            idField="itemid" url="datagrid_data2.json">
        <thead>
            <tr>
                <th field="itemid" width="80">Item ID</th>
                <th field="productid" width="100" formatter="productFormatter" editor="{type:'combobox',options:{valueField:'productid',textField:'name',data:products,required:true}}">Product</th>
                <th field="listprice" width="80" align="right" editor="{type:'numberbox',options:{precision:1}}">List Price</th>
                <th field="unitcost" width="80" align="right" editor="numberbox">Unit Cost</th>
                <th field="attr1" width="250" editor="text">Attribute</th>
                <th field="status" width="60" align="center" editor="{type:'checkbox',options:{on:'P',off:''}}">Status</th>
            </tr>
        </thead>
    </table>

</body>
</html> 
```

让我知道更多说明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:48:10.193

我正在使用easyui网格。这是easyui演示网格示例代码。你把数据放到网格上了吗？你想要什么？你的问题很肮脏。请写清楚，我可以帮助你。

首先，我正在使用带有 ajax 的 asp.net Web 服务，并且我没有使用数据网格的 url(saveUrl,updateUrl 等) 属性。您不必使用 datgrid 的 url 属性。您可以使用这样的功能；

```
function savechanges(parmetervalue)
        {
            $.ajax({
                type: "POST",
                url: WEBSERVISURL + "/WEB_SERVIS_METHOD_NAME",
                data: "{WebServisParameterName:" + parmetervalue + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var data = eval("(" + msg.d + ")");
                },
                error: function (msg) {

                }                    
            });
        } 
```

您可以使用 datagrid "getSelected" 方法获取 savechanges 函数的 "parmetervalue" 参数，就像这样；

```
var row = $('#yourgrid').datagrid('getSelected '); 
```

并且您可以获得行的所有值；

例如 ---- > row.ID 、 row.Name 、 row.SurName 等

最后你可以像这样更新你的行；

```
savechanges(row.Name) 
```

# android - 蓝牙耳机按键事件

> ID：11664064
> 
> 赞同：1
> 
> 时间：2012-07-26T07:01:05.237
> 
> 标签：android, events, button, bluetooth, headset

**我回复我的答案，我检查源代码“BluetoothHandsfree.java”，这是不可能的，除非重新编译源代码添加特殊广播或添加一些标志来做。我真的希望谷歌可以在蓝牙 Api 上添加自定义按钮事件，我们可以在蓝牙耳机按钮事件上做任何事情。只需点击按钮，我们可以使用语音命令和控制手机中的任何应用程序。不是触摸屏。或与人工智能程序对话，我们可以在自己的应用程序中添加功能，可以按下按钮说某事或做某事。这很容易，但是现在 .......：（**

我想捕捉蓝牙耳机按钮单击或双击事件。我们都知道，当双击蓝牙耳机的按钮时，电话会拨打最后一个号码。所以我在“onReceived（）”中添加过滤广播“Intent.ACTION_NEW_OUTGOING_CALL”我收到了广播。所以当点击按钮时，收到它，但我发现我不知道是谁在广播这条消息？电话或蓝牙耳机。

在android 4.0.3中，当相机被激活时，双击蓝牙按钮手机（HTC）会拍照，但我仍然无法捕捉到事件？我怎么能抓住它？还是不可能？接收 AT 命令并在我的应用程序中做某事？？？

跟踪日志：

**07-26 11:07:21.958: I/蓝牙 AT recv(1798): AT+BLDN**

**07-26 11:07:21.958: I/蓝牙 HS/HF(1798): +BLDN**

**07-26 11:07:21.958: D/Bluetooth HS/HF(1798): searchKeyString input=ActivityRecord{4124aef0 com.htc.launcher/.Launcher}, key=com.android.camera/.CameraEntry**

07-26 11:07:22.138: D/PhoneUtils(1798): checkAndCopyPhoneProviderExtras: 缺少部分或全部附加功能。

07-26 11:07:22.328: W/memalloc(1444): 回退到 ashmem

07-26 11:07:22.328: D/memalloc(1444): ashmem: 分配的缓冲区基数:0x41b15000 大小:294912 fd:59

07-26 11:07:22.328: D/memalloc(2137): ashmem: 映射缓冲区基数:0x52eb1000 大小:294912 fd:102

07-26 11:07:22.328: I/ActivityManager(1590): 启动 proc net.dinglisch.android.taskerm 广播 net.dinglisch.android.taskerm/.ReceiverStaticCallRewriter: pid=4089 uid=10140 gids={1015, 1006 , 3001, 3002, 3003}

07-26 11:07:22.338: I/Adreno200-EGLSUB(1444): : Android 图像

07-26 11:07:22.338: I/Adreno200-EGLSUB(1444): : RGBA_8888

07-26 11:07:22.378：I/dalvikvm(4089)：为目标 SDK 打开 JNI 应用程序错误解决方法 07-26 11:07:22.408：D/dalvikvm(4089)：调试器已分离；对象注册表有 1 个条目

**07-26 11:07:22.478: D/WirelessDisplayService(1590): CallReceiver: actionandroid.intent.action.NEW_OUTGOING_CALL**

# sas - 根据其他数据集有条件地创建 SAS 数据集

> ID：11664065
> 
> 赞同：1
> 
> 时间：2012-07-26T07:01:06.970
> 
> 标签：sas

我有 6 个相同的 SAS 数据集。它们仅在观察值方面有所不同。

如何创建一个输出数据，找到每个单元格的所有 6 个数据集的最大值？

该`update`语句似乎是一个不错的候选者，但它不能设置条件。

数据1

```
v1 v2 v3
1  1  1
1  2  3 
```

数据2

```
v1 v2 v3
1  2  3
1  1  1 
```

结果

```
v1 v2 v3
1  2  3
1  2  3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:44:14.713

```
If need be the following could be automated by "PUT" statements or variable arrays.
***ASSUMES DATA SETS ARE SORTED BY ID;

Data test; 
 do until(last.id);
   set a b c;
    by id;
 if v1 > updv1 then updv1 = v1;
 if v2 > updv2 then updv2 = v2;
 if v3 > updv3 then updv3 = v3;
 end;
drop v1-v3;
rename updv1-updv3 = v1-v3;
run; 
```

要为 Rico 的问题提供更完整的解决方案（假设 6 个数据集，例如 d1-d6），可以这样做：

```
 Data test; 
  array v(*) v1-v3;
  array updv(*) updv1-updv3;
  do until(last.id);
   set d1-d6;
   by id;
    do i = 1 to dim(v);
      if v(i) > updv(i) then updv(i) = v(i);
    end;
  end;
  drop v1-v3;
  rename updv1-updv3 = v1-v3;
  run;

  proc print; 
  var id v1-v3;
  run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:32:27.770

这是另一个可以针对任意数量的数据集和变量进​​行扩展的尝试。这次我也添加了一个 ID 变量。就像@vasja 的回答一样，这里使用了一些高级技术。这两种解决方案实际上非常相似，我使用“调用执行”而不是宏来创建视图。我的解决方案还要求将数据集名称存储在数据集中。

```
/* create dataset of required dataset names */
data datasets;
input ds_name $;
cards;
data1
data2
;
run;

/* dummy data */
data data1;
input id v1 v2 v3;
cards;
10  1  1  1
20  1  2  3
;
run;

data data2;
input id v1 v2 v3;
cards;
10  1  2  3
20  1  1  1
;
run;

/* create dataset, macro list and count of variables names */
proc sql noprint;
create table variables as 
select name as v_name from dictionary.columns 
            where libname='WORK' and upcase(memname)='DATA1' and upcase(name) ne 'ID';
select name, count(*) into  :keepvar separated by ' ', 
                            :numvar 
            from dictionary.columns
            where libname='WORK' and upcase(memname)='DATA1' and upcase(name) ne 'ID';
quit;

/* create view that joins all datasets, renames variables and calculates maximum value per id */
data _null_;
set datasets end=last;
if _n_=1 then call execute('data data_all / view=data_all; merge');
    call execute (trim(ds_name)|| '(rename=(');
        do i=1 to &numvar.;
        set variables point=i;
        call execute(trim(v_name)||'='||catx('_',v_name,_n_));
        end;
        call execute('))');
if last then do;
        call execute('; by id;');
        do i=1 to &numvar.;
        set variables point=i;
        call execute(trim(v_name)||'='||'max(of '||trim(v_name)||':);');
        end; 
        call execute('run;');
end;
run;

/* create dataset of maximum values per id per variable */
data result (keep=id &keepvar.);
set data_all;
run; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:35:23.517

见下文。对于 SAS 初学者来说可能太复杂了。我希望评论能解释一下。

```
/* macro rename_cols_opt to generate cols_opt&n variables 
 - cols_opt&n contains generated code for dataset RENAME option for a given (&n) dataset
*/
%macro rename_cols_opt(n);
    %global cols_opt&n max&n;

    proc sql noprint;
    select catt(name, '=', name, "&n") into: cols_opt&n separated by ' '
    from dictionary.columns
        where libname='WORK' and memname='DATA1'
            and upcase(name) ne 'MY_ID_COLUMN'
    ;
    quit;

%mend;

/* prepare macro variables = pre-generate the code */
%rename_cols_opt(1)
%rename_cols_opt(2)
%rename_cols_opt(3)
%rename_cols_opt(4)
%rename_cols_opt(5)
%rename_cols_opt(6)

/* create macro variable keep_list containing names of output variables to keep (based on DATA1 structure, the code expects those variables in other tables as well */
proc sql noprint;
select trim(name) into: keep_list separated by ' '
from dictionary.columns
    where libname='WORK' and memname='DATA1'
;
quit;
%put &keep_list;

/* macro variable maxcode contains generated code for calculating all MAX values */
proc sql noprint;
select cat(trim(name), ' = max(of ', trim(name), ":)") into: maxcode separated by '; '
from dictionary.columns
    where libname='WORK' and memname='DATA1'
        and upcase(name) ne 'MY_ID_COLUMN'
;
quit;
%put "&maxcode";

data result1 / view =result1;
merge
    data1 (in=a rename=(&cols_opt1)) 
    data2 (in=b rename=(&cols_opt2))
    data3 (in=b rename=(&cols_opt3))
    data4 (in=b rename=(&cols_opt4))
    data5 (in=b rename=(&cols_opt5))
    data6 (in=b rename=(&cols_opt6))
;
by MY_ID_COLUMN;
&maxcode;
keep &keep_list;
run;

/* created a datastep view, now "describing" it to see the generated code */
data view=result1;
describe;
run; 
```

# c# - 如何将xml数据插入到c#中的现有xml中？

> ID：11664066
> 
> 赞同：0
> 
> 时间：2012-07-26T07:01:10.670
> 
> 标签：c#, .net, xml

我在我的 Windows 应用程序中添加了 xml 文件，我想从文本框中添加值。我使用了以下代码，

```
string path = "codedata.xml";
        XmlDocument doc = new XmlDocument();
        if (!System.IO.File.Exists(path))
        {
            //Create neccessary nodes
            XmlDeclaration declaration = doc.CreateXmlDeclaration("1.0", "UTF-8", "yes");
            XmlComment comment = doc.CreateComment("This is an XML Generated File");
            doc.AppendChild(declaration);
            doc.AppendChild(comment);
        }
        else //If there is already a file
        {
            //    //Load the XML File
            doc.Load(path);
        }

        //Get the root element
        XmlElement root = doc.DocumentElement;

        XmlElement Subroot = doc.CreateElement("data");
        XmlElement Companycode = doc.CreateElement("Companycode");
        XmlElement Productcode = doc.CreateElement("Productcode");
        XmlElement Productname = doc.CreateElement("Productname");
        XmlElement Brandcode = doc.CreateElement("Brandcode");
        XmlElement Brandname = doc.CreateElement("Brandname");

        Companycode.InnerText = txt_companycode.Text;
        Productcode.InnerText = txt_productcode.Text;
        Productname.InnerText = txt_productname.Text;
        Brandcode.InnerText = txt_brandcode.Text;
        Brandname.InnerText = txt_brandname.Text;

        Subroot.AppendChild(Companycode);
        Subroot.AppendChild(Productcode);
        Subroot.AppendChild(Productname);
        Subroot.AppendChild(Brandcode);
        Subroot.AppendChild(Brandname);
        root.AppendChild(Subroot);
        doc.AppendChild(root);

        //Save the document
        doc.Save(path);

        //Show confirmation message
        MessageBox.Show("Details  added Successfully"); 
```

它在 root.AppendChild(Subroot) 附近显示错误；任何人都可以帮助我，我犯了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:11:26.523

您可以使用 Linq to XML，这是一个示例：

```
var xDoc = XElement.Load("FilePath");
if (xDoc == null)
   return;

var myNewElement = new XElement("ElementName"
   new XAttribute("AttributeName", value1),
   new XAttribute("AttributeName", value2)
   //And so on ...
);
xDoc.Add(myNewElement);
xDoc.Save("FilePath"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:09:28.263

为`root`空。创建 XML 文件时尝试添加 Root 元素。

```
 if (!System.IO.File.Exists(path))
        {
            //Create neccessary nodes
            XmlDeclaration declaration = doc.CreateXmlDeclaration("1.0", "UTF-8", "yes");
            XmlComment comment = doc.CreateComment("This is an XML Generated File");
            doc.AppendChild(declaration);
            doc.AppendChild(comment);
            doc.AppendChild(doc.CreateElement("Root"));
        } 
```

或者使用 LINQ-XML

```
string _file=@"c:\sample.xml";
XDocument doc;

if (!File.Exists(_file))
{
    doc = new XDocument();
    doc.Add(new XElement("Root"));
}
else
{
    doc = XDocument.Load(_file);
}

doc.Root.Add(
      new XElement("data",
                   new XElement("CompanyCode","C101"),
                   new XElement("ProductCode","P101")
            ) 
      );
doc.Save(_file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:08:34.667

在 null XML`DocumentElement`中是`null`. 尝试添加`Subroot`到文档：

```
~~XmlElement root = doc.DocumentElement;~~

root.AppendChild（子根）；
doc.AppendChild(root); 
```

```
`// new code
doc.AppendChild(Subroot);` 
```

# magento - 类别菜单“未包含在导航栏中”

> ID：11664069
> 
> 赞同：0
> 
> 时间：2012-07-26T07:01:21.353
> 
> 标签：magento, magento-1.4, magento-1.5

如果我是对的，在 Magento 中，该`renderCategoriesMenuHtml()`功能有助于显示“导航菜单栏中**包含的类别”菜单。**

我想修改 renderCategoriesMenuHtml() 函数以显示“导航菜单栏中**未包含的类别”的菜单。**

简而言之，我需要在管理面板中显示一个将属性**`"Include in navigation menu"`**设置为**no的类别菜单。**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:48:03.373

Magento 具有用于更改或添加类功能的工具，称为类覆盖或类重写。以下示例假定命名空间为“Custom”，模块名称为“Nav”。

首先，注册一个模块：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- app/etc/modules/whatever.xml -->
<config>
    <modules>
        <Custom_Nav><!-- must match your namespace & module folder names -->
            <active>true</active>
            <codePool>local</codePool>
        </Custom_Nav>
    </modules>
</config> 
```

基于上述内容，应用程序将为您的模块查找配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- app/code/local/Custom/Nav/etc/config.xml -->
<config>
    <global>
        <blocks>
            <catalog>
                <rewrite>
                    <navigation>Custom_Nav_Block_Rewrite_Navigation</navigation>
                </rewrite>
            </catalog>
        </blocks>
    </global>
</config> 
```

这样做是在块创建工厂方法中重写类名。目录导航块添加到`catalog.xml`布局更新 XML ( `<block type="catalog/navigation" .../>`) 中。上面的 xpath 将导致类名映射到`Custom_Nav_Block_Rewrite_Navigation`而不是通常的`Mage_Catalog_Block_Navigation`，而正是这个类将被实例化。

最后一步是创建类定义，为了可维护性和遵守 DRY 从原始类扩展：

```
<?php
/* app/code/local/Custom/Nav/Block/Rewrite/Navigation.php */

class Custom_Nav_Block_Rewrite_Navigation extends Mage_Catalog_Block_Navigation
{
    //custom method overrides & additions belong here
} 
```

清除 config 和 block_html 缓存，更改应该是可见的。要验证，请通过管理面板启用模板路径提示 + 块类名称，或在站点根目录中创建一个简单的脚本：

```
<?php
/* test.php in Magento root folder */
ini_set('display_errors',true);

include 'app/Mage.php';
Mage::setIsDeveloperMode(true);
Mage::app();

var_dump(Mage::getConfig()->getBlockClassName('catalog/navigation')); 
```

将浏览器指向`http://site.com/test.php`，输出应显示重写的类名。

# scala - 让 Scala 在 .net 上运行的分步指南？

> ID：11664072
> 
> 赞同：6
> 
> 时间：2012-07-26T07:01:36.140
> 
> 标签：scala, scala-2.9

我从未使用过 .Net 框架，需要向某人证明 Scala 确实适用于 .Net。我需要使用 Scala 在一些现有的 JVM Scala 代码上进行“快速而肮脏”的 .Net 设置。我找不到这方面的分步指南。我会很感激这方面的一些资源：

1.  如何安装最小的 .Net 以及让 Scala 工作的版本。
2.  如何安装 Scala 的 .Net 变体以及使用哪个版本（首选 2.9）。
3.  如何让 hello world 运行。

提前致谢。有问题的平台：Windows 7 专业版 32 位。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T11:20:58.677

自解释文件

# helloworld.scala

```
/*
see https://github.com/magarciaEPFL/scaladotnet#readme
quick test
==========
1\. Name this file helloworld.scala and put it in c:\scala-dotnettest
2\. Download binaries from https://github.com/magarciaEPFL/scaladotnet/downloads and unpack the zipped files to the directory c:\scala-dotnet
3\. Compile with: c:\scala-dotnet\scalacompiler -d c:\scala-dotnettest -target:exe -Xassem-extdirs c:\scala-dotnet -Xassem-name helloworld.exe -Xshow-class HelloWorld helloworld.scala
4\. Copy runtime dependencies scalalib.dll, IKVM.OpenJDK.Core.dll, IKVM.OpenJDK.Util.dll and IKVM.Runtime.dll (or all IKVM*.dll) from c:\scala-dotnet to c:\scala-dotnettest
5\. run helloworld
C:\scala-dotnettest>helloworld
Hello World!
*/ 
object HelloWorld extends App {
  println("Hello World!")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:52:18.277

这里有一些说明：

[http://lampwww.epfl.ch/~magarcia/ScalaNET/2011Q2/PreviewScalaNET.pdf](http://lampwww.epfl.ch/~magarcia/ScalaNET/2011Q2/PreviewScalaNET.pdf)

连同对在这里工作的米格尔·加西亚 (Miguel Garcia) 的采访

[http://www.scala-lang.org/node/10299/](http://www.scala-lang.org/node/10299/)

# r - 将 dat 文件导入 R

> ID：11664075
> 
> 赞同：58
> 
> 时间：2012-07-26T07:02:05.750
> 
> 标签：r, import

为这个问题的简单性提前道歉。我正在尝试使用以下代码将 .dat 文件从网站导入 R：

```
www = "http://www.nilu.no/projects/ccc/onlinedata/ozone/CZ03_2009.dat"
data <- read.delim(www, header = TRUE, sep="\t") 
```

我想访问 data.frame 的 Value 部分，但是，我不确定 data.frame 的尺寸，如果我输入 ncol(data) 它会返回 1，我期望它是 3。如何访问此 data.frame 的“第三”列？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-26T07:05:51.980

dat 文件在实际数据之前有一些额外的信息行。用参数跳过它们`skip`：

```
read.table("http://www.nilu.no/projects/ccc/onlinedata/ozone/CZ03_2009.dat", 
           header=TRUE, skip=3) 
```

如果您不熟悉数据集，一个简单的检查方法是首先`readLines`检查几行，如下所示：

```
readLines("http://www.nilu.no/projects/ccc/onlinedata/ozone/CZ03_2009.dat", 
          n=10)
# [1] "Ozone data from CZ03 2009"   "Local time: GMT + 0"        
# [3] ""                            "Date        Hour      Value"
# [5] "01.01.2009 00:00       34.3" "01.01.2009 01:00       31.9"
# [7] "01.01.2009 02:00       29.9" "01.01.2009 03:00       28.5"
# [9] "01.01.2009 04:00       32.9" "01.01.2009 05:00       20.5" 
```

在这里，我们可以看到实际数据从 开始`[4]`，所以我们知道要跳过前三行。

# 更新

如果您*真的*只想要该`Value`列，您*可以*通过以下方式做到这一点：

```
as.vector(
    read.table("http://www.nilu.no/projects/ccc/onlinedata/ozone/CZ03_2009.dat",
               header=TRUE, skip=3)$Value) 
```

同样，`readLines`它有助于帮助我们找出我们将要导入的列的实际名称。

但是与读取整个数据集并稍后提取相比，我认为这样做并没有*太大优势。*

# java - 单身人士什么时候不能作为单身人士工作？

> ID：11664076
> 
> 赞同：0
> 
> 时间：2012-07-26T07:02:06.003
> 
> 标签：java, singleton

> **可能重复：**
> [用其他方式破解单例](https://stackoverflow.com/questions/11654876/cracking-singleton-with-other-ways)

谁能告诉我什么时候 a`Singleton`不能作为 a 工作`Singleton`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T07:06:12.537

作者**Joshua Fox在**[Sun](http://oracle.com/technetwork/articles/java/singleton-1577166.html)网站上发表了一篇非常好的文章。请通过这个。

 **以下是其中一些您的`Singleton`行为不正常时的情况。

1.  两个或更多虚拟机中的多个单例
2.  不同的类加载器同时加载多个单例
3.  垃圾收集销毁的单例类，然后重新加载
4.  故意重载单例类
5.  已经历序列化和反序列化的单例对象的副本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T07:05:54.793

如果给定的类由多个类加载器加载，则单例（在 Java 领域）将无法作为单例工作。由于单个类可以在多个类加载器中存在（或可以加载），因此对于给定的 JVM 实例，很有可能拥有“假定”单例类的“多个”实例。但这是一个非常罕见的情况，并且不会发生很多。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:08:08.043

如果您能够创建多个类的实例，那么它不会通过使用克隆、反序列化等方式保持单例。**

# android - 在 Android 上的 ListView 中操作 RadioButton

> ID：11664077
> 
> 赞同：1
> 
> 时间：2012-07-26T07:02:08.843
> 
> 标签：android, listview, radio-button

我使用自定义适配器在每行上创建了一个带有 radioButton 的自定义 ListView。我想在检查其父视图（列表项）时以编程方式检查单选按钮，然后取消选中其他 ListView 项中的其他 RadioButtons。任何人都可以为我提供解决方案吗？

**更新**

这是我的 getView()

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LinearLayout v = null;

    final Item i = items.get(position);

    EntryItem ei = (EntryItem) i;
    v = (LinearLayout) vi.inflate(R.layout.list_item_entry, null);
    final TextView title = (TextView) v
                    .findViewById(R.id.list_item_entry_title);
    final TextView subtitle = (TextView) v
                    .findViewById(R.id.list_item_entry_summary);

    RadioButton radioButton = new RadioButton(context);
    radioButton.setFocusable(false);
    radioButton.setFocusableInTouchMode(false);
    v.addView(radioButton); 

    if (title != null)
                title.setText(ei.title);
    if (subtitle != null)
                subtitle.setText(ei.subtitle);

    convertView = v;
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:06:05.907

如果应该选择单个项目，您可以使用一个 int 变量，用 -1 初始化；

```
int index =-1; 
```

在getView方法中添加一行：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LinearLayout v = null;

    final Item i = items.get(position);

    EntryItem ei = (EntryItem) i;
    v = (LinearLayout) vi.inflate(R.layout.list_item_entry, null);
    final TextView title = (TextView) v
                    .findViewById(R.id.list_item_entry_title);
    final TextView subtitle = (TextView) v
                    .findViewById(R.id.list_item_entry_summary);

    RadioButton radioButton = new RadioButton(context);
    radioButton.setFocusable(false);
    radioButton.setFocusableInTouchMode(false);
    radioButton.setChecked(index==position);
    radioButton.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {                       
                    @Override
                    public void onCheckedChanged(CompoundButton arg0, boolean arg1) {

                    }
                });
                v.addView(radioButton);
            } 
            if (title != null)
                title.setText(ei.title);
            if (subtitle != null)
                subtitle.setText(ei.subtitle);
        }

    convertView = v;
    return convertView;
} 
```

在监听器的 OnItemClick 方法中，执行：

```
index=position;
adapter.notifyDataSetInvalidated(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:08:22.920

要重置单选按钮，请在`getView`方法中进行。

在`ListView.onsetOnItemClickListener()`：

```
listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) { 
        //get the radio button and check it
                    view.findViewById(); ....   
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:54:09.837

您可以在列表视图的点击事件中管理它...在 setOnClickListener 事件中，您可以通过视图获取单选按钮..然后您可以管理它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T07:07:12.153

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:ellipsize="marquee" /> 
```

以上代码来自 android.R.layout.simple_spinner_dropdown_item

它完全符合您的要求。可能这对你有帮助。

# asp.net - 基于权限的访问控制

> ID：11664078
> 
> 赞同：2
> 
> 时间：2012-07-26T07:02:09.780
> 
> 标签：asp.net, security

我正在尝试在 ASP.NET 中实现基于权限的访问控制。为了实现这一点，我创建了一些数据库表，其中包含有关哪些角色分配了哪些权限以及哪些角色分配给了哪些用户的所有信息。

我正在检查业务访问层中的权限。现在我创建了一个检查用户权限的方法。如果用户有权限，那么没关系，否则它会重定向到另一个页面。

我想知道以下事情是否可能？

```
class User
{
    [PremissionCheck(UserID,ObjectName,OperationName)]
    public DataTable GetUser()
    {
        //coding for user
    }
} 
```

我在 MVC3 中见过它。我可以在 ASP.NET 中创建它吗？如果是，那么我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:06:39.250

任何权限系统都需要两个组件——授权和访问控制。授权是证明用户身份的手段。这通常通过某种用户和密码存储来完成，但您可以使用 OpenID 等系统或任意数量的联合身份系统（Active Directory/Kerberos/等）来完成同样的事情。

一旦您知道用户是谁，就会有访问控制，它会对该用户执行权限。

现在，在 ASP.NET 的情况下，您不能只在某物上粘贴一个属性，因为属性不运行代码。为了让验证代码运行，您需要编写某种插件来为您执行此验证。Webforms 已经支持身份验证和访问控制机制；为什么要重新发明轮子？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:37:15.307

> 我想知道以下事情是否可能？

```
class User {
    [PremissionCheck(UserID,ObjectName,OperationName)]
    public DataTable GetUser()
    {
        //coding for user
    } } 
```

**不，这在 ASP.Net 网络表单中是不可能的**

**但是**，我已经使用 MasterPage、BasePage 类和 RoleBasedAccessControl 数据库模型在经典的 3 层 ASP.Net 3.5 Web 表单应用程序上实现了基于角色的访问控制。

**例子**

用户“jtirado”被分配角色“HR-Assistant”，可以访问路由“mywebapp/employee.aspx?id=1452”来编辑员工（id:1452）数据。

作为“HR-Assistant”，该用户可以更改员工电话号码和电子邮件，可以查看员工工资但不能编辑金额。

电话号码、电子邮件、工资是数据库字段，由 ASPX 页面上的“asp.net-control”表示/呈现。所以我想根据用户的角色限制对这些控件的访问。

**MasterPage**根据分配的角色构建用户可以访问的选项菜单。我所有的内部页面都使用它。

```
 protected void Page_Load(object sender, System.EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            CargaItemMenu(MnuPrincipal, Convert.ToInt32(Session["IdPais"]), Convert.ToInt32(Session["IdRol"]), Convert.ToInt32(Session["IdUsuario"]));
            Session.Add("MenuDinamico", MnuPrincipal);
            if (MnuPrincipal.Items.Count < 1)
            {
                MenuItem menuItems = new MenuItem();
                menuItems.Text = "Principal";
                menuItems.Value = "1";
                menuItems.NavigateUrl = "";
                menuItems.Selectable = true;
                MnuPrincipal.Items.Add(menuItems);
            }

        }
    }

    private void CargaItemMenu(Menu ctrlmenu, int v_IdPais, int v_IdRol, int v_IdUsuario)
    {
        oBEOpcionRol = new SEGU.Entities.ENOpcionRol();
        oBLOpcionRol = new SEGU.BusinessLogic.BLOpcionRol();
        List<ParametroGenerico> ArrayParam;
        ArrayParam = CargarParamentrosOpcionRol(v_IdPais, v_IdRol, v_IdUsuario);
        List<SEGU.Entities.ENOpcionRol> ListaMenuItems = oBLOpcionRol.ListaxIdPaisxIdRolxIdUsuario(ArrayParam);

        foreach (SEGU.Entities.ENOpcionRol objOpcionRol in ListaMenuItems)
        {
            if (objOpcionRol.IdOpcion.IdOpcion.Equals(objOpcionRol.IdOpcion.IdMenu))
            {
                MenuItem mnuMenuItem = new MenuItem();
                mnuMenuItem.Value = objOpcionRol.IdOpcion.IdOpcion.ToString();
                mnuMenuItem.Text = objOpcionRol.IdOpcion.Nombre.ToString();
                if (objOpcionRol.IdOpcion.RutaFormulario != "")
                {
                    mnuMenuItem.NavigateUrl = objOpcionRol.IdOpcion.RutaFormulario.ToString();// +"?IdOpcion=" + Convert.ToString(objOpcionRol.IdOpcion.IdOpcion);
                }

                if (objOpcionRol.IdOpcion.PageNew == "1")
                {
                    mnuMenuItem.Target = "_blank";
                }

                //mnuMenuItem.Target = "iframePrincipal"
                if (objOpcionRol.IdOpcion.Imagen.Trim() != "")
                {
                    mnuMenuItem.ImageUrl = "Seguridad/ImagenesMenus/" + objOpcionRol.IdOpcion.Imagen.Trim();
                }

                if ((mnuMenuItem.NavigateUrl.Trim().Length > 0))
                {
                    mnuMenuItem.Selectable = true;
                }
                else
                {
                    mnuMenuItem.Selectable = false;
                }
                ctrlmenu.Items.Add(mnuMenuItem);
                AddMenuItem(mnuMenuItem, ListaMenuItems);
            }
        }
    }
    private void AddMenuItem(MenuItem mnuMenuItem, List<SEGU.Entities.ENOpcionRol> listaOpcionRol)
    {
        foreach (SEGU.Entities.ENOpcionRol objOpcionRol in listaOpcionRol)
        {
            if (objOpcionRol.IdOpcion.IdMenu.ToString().Equals(mnuMenuItem.Value) && !objOpcionRol.IdOpcion.IdOpcion.Equals(objOpcionRol.IdOpcion.IdMenu))
            {
                MenuItem mnuNewMenuItem = new MenuItem();
                mnuNewMenuItem.Value = objOpcionRol.IdOpcion.IdOpcion.ToString();
                mnuNewMenuItem.Text = objOpcionRol.IdOpcion.Nombre.ToString();
                if (objOpcionRol.IdOpcion.RutaFormulario != "")
                {
                    mnuNewMenuItem.NavigateUrl = objOpcionRol.IdOpcion.RutaFormulario.ToString();// +"?IdOpcion=" + Convert.ToString(objOpcionRol.IdOpcion.IdOpcion);
                }

                if (objOpcionRol.IdOpcion.PageNew == "1")
                {
                    mnuNewMenuItem.Target = "_blank";
                }

                mnuMenuItem.ChildItems.Add(mnuNewMenuItem);
                //mnuNewMenuItem.Target = "iframePrincipal"
                if (objOpcionRol.IdOpcion.Imagen.Trim() != "")
                {
                    mnuNewMenuItem.ImageUrl = "Seguridad/ImagenesMenus/" + objOpcionRol.IdOpcion.Imagen.Trim();
                }

                if ((mnuNewMenuItem.NavigateUrl.Trim().Length > 0))
                {
                    mnuNewMenuItem.Selectable = true;
                }
                else
                {
                    mnuNewMenuItem.Selectable = false;
                }
                AddMenuItem(mnuNewMenuItem, listaOpcionRol);
            }
        }

    } 
```

**BasePage**类检查用户是否有权访问所需的页面。所有需要授权的页面都继承自这个 BasePage 类。

```
public class PaginaBase : System.Web.UI.Page
{
    SEGU.BusinessLogic.BLOpcionRol oBLOpcionRol;

    protected void Page_InitComplete(object sender, System.EventArgs e) {
    string Url = this.Page.AppRelativeVirtualPath;
    oBLOpcionRol = new SEGU.BusinessLogic.BLOpcionRol();
    int b = oBLOpcionRol.AutentificarUrl(Convert.ToInt32(System.Web.HttpContext.Current.Session["IdPais"]), Convert.ToInt32(System.Web.HttpContext.Current.Session["IdUsuario"]), Convert.ToInt32(System.Web.HttpContext.Current.Session["IdRol"]), Url);
    System.Web.HttpContext.Current.Session["IdOpcion"] = b;            
        if( b <= 0 ){
            System.Web.HttpContext.Current.Response.Redirect("~/Seguridad/Acceso.aspx");
        return;
        }
    }
.
.
} 
```

最后，在**Customers.aspx** **Page_Load**事件中，我调用了一个函数 ( **oBLPermisoOpcionRol.ValidarPermisos** )，它检查哪些接收 Page 实例作为参数并迭代其控件（例如：DdlClientType、TxtLastName、ChkIsActive）以检查用户可以编辑哪些控件，启用，禁用或隐藏它们。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            SetNodosMenu(TrvMenu, "");
            if (this.TrvMenu.Nodes.Count < 1)
            {
                PrimerNodos(this.TrvMenu);
            }
            ListarModuloxAnulado(GvModulo, Convert.ToString(RblAnuladoModuloBusqueda.SelectedValue), Convert.ToInt32(0), Convert.ToInt32(DdlNroPaginaModulo.SelectedValue));

            oBLPermisoOpcionRol = new SEGU.BusinessLogic.BLPermisoOpcionRol();
            oBLPermisoOpcionRol.ValidarPermisos(Page, Convert.ToInt32(Session["IdRol"]), Convert.ToInt32(Session["IdOpcion"]));
        }
    }

public void ValidarPermisos(System.Web.UI.Page v_Page, int v_IdRol, int v_IdOpcion)
{        
    BusinessLogic.BLPermisoOpcionRol oBLPermisoOpcionRol = new BusinessLogic.BLPermisoOpcionRol();
    List<ParametroGenerico> ArrayParam ;
    ArrayParam = CargarParametros(v_IdRol, v_IdOpcion);        
    List<SEGU.Entities.ENPermisoOpcionRol> Lista = oBLPermisoOpcionRol.ListaxIdRolxIdOpcion(ArrayParam);        
    for(int Fila= 0; Fila< Lista.Count; Fila++){
        bool v_Anulado= true;
        if (Lista[Fila].Anulado == "1") {
            v_Anulado = true;
        }else if (Lista[Fila].Anulado == "0") {
            v_Anulado = false;
        }
        bool v_ControlVisibleDisabled = true;
        if (Lista[Fila].VisbleDisabled == "1") // Control Disabled
        {
            v_ControlVisibleDisabled = true;
        }
        else if (Lista[Fila].VisbleDisabled == "0") // Control Visible
        {
            v_ControlVisibleDisabled = false;
        }
        SetControls(v_Page, Lista[Fila].IdPermiso.Control, v_Anulado, v_ControlVisibleDisabled);
    }
}
public void SetControls(System.Web.UI.Control parentControl, string v_Control, bool permitir, bool v_Permitir_ControlVisibleDisabled)
{
    foreach(System.Web.UI.Control c in parentControl.Controls){
        if( (c) is Button ){
            if( ((Button)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((Button)c).Enabled = false;
                    }else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((Button)c).Visible = false;
                    }                        
                }else{                        
                    ((Button)c).Visible = true;
                }
            }
        }else if( (c) is CheckBox ){
            if( ((CheckBox)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((CheckBox)c).Enabled = false;
                    }else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((CheckBox)c).Visible = false;
                    }
                }else{
                    ((CheckBox)c).Visible = true;
                }
            }
        }else if( (c) is Label ){
            if( ((Label)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((Label)c).Enabled = false;
                    }else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((Label)c).Visible = false;
                    }
                }else{
                    ((Label)c).Visible = true;
                }
            }
        }else if( (c) is TextBox ){
            if( ((TextBox)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((TextBox)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((TextBox)c).Visible = false;
                    }
                }else{
                    ((TextBox)c).Visible = true;
                }
            }
        }else if( (c) is GridView ){
            if( ((GridView)c).ID == v_Control ){
                if( permitir == true ){
                     if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((GridView)c).Enabled = false;
                    }else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                         ((GridView)c).Visible = false;
                     }
                }else{
                    ((GridView)c).Visible = true;
                }
            }
        }else if( (c) is ImageButton ){
            if( ((ImageButton)c).ID == v_Control ){
                if (permitir == true)
                {
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((ImageButton)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((ImageButton)c).Visible = false;
                    }
                }
                else
                {
                    ((ImageButton)c).Visible = true;
                }
            }
        }else if( (c) is HyperLink ){
            if( ((HyperLink)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((HyperLink)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((HyperLink)c).Visible = false;
                    }
                }else{                        
                    ((HyperLink)c).Visible = true;
                }
            }
        }else if( (c) is DropDownList ){
            if( ((DropDownList)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((DropDownList)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((DropDownList)c).Visible = false;
                    }
                }else{
                    ((DropDownList)c).Visible = true;
                }
            }
        }else if( (c) is ListBox ){
            if( ((ListBox)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((ListBox)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((ListBox)c).Visible = false;
                    }
                }else{
                    ((ListBox)c).Visible= true;
                }
            }
        }else if( (c) is DataList ){
            if( ((DataList)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((DataList)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((DataList)c).Visible = false;
                    }
                }else{
                    ((DataList)c).Visible = true;
                }
            }
        }else if( (c) is CheckBoxList ){
            if( ((CheckBoxList)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((CheckBoxList)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((CheckBoxList)c).Visible = false;
                    }
                }else{
                    ((CheckBoxList)c).Visible = true;
                }
            }
        }else if( (c) is RadioButton ){
            if( ((RadioButton)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((RadioButton)c).Enabled= false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((RadioButton)c).Visible = false;
                    }
                }else{                        
                    ((RadioButton)c).Visible = true;
                }
            }
        }else if( (c) is RadioButtonList ){
            if( ((RadioButtonList)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((RadioButtonList)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((RadioButtonList)c).Visible = false;
                    }
                }else{                        
                    ((RadioButtonList)c).Visible = true;
                }
            }
        }else if( (c) is Image ){
            if( ((Image)c).ID == v_Control ){
                if( permitir == true ){                        
                    ((Image)c).Visible = false;                        
                }else{                        
                    ((Image)c).Visible = true;
                }
            }
        }else if( (c) is Panel ){
            if( ((Panel)c).ID == v_Control ){
                if (permitir == true)
                {
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((Panel)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((Panel)c).Visible = false;
                    }
                }
                else
                {
                    ((Panel)c).Visible = true;
                }
            }
        }else if( (c) is Table ){
            if( ((Table)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((Table)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((Table)c).Visible = false;
                    }
                }else{
                    ((Table)c).Visible= true;
                }
            }
        }else if( (c) is LinkButton ){
            if( ((LinkButton)c).ID == v_Control ){
                if( permitir == true ){
                    if (v_Permitir_ControlVisibleDisabled == true)
                    {
                        ((LinkButton)c).Enabled = false;
                    }
                    else if (v_Permitir_ControlVisibleDisabled == false)
                    {
                        ((LinkButton)c).Visible = false;
                    }
                }else{                        
                    ((LinkButton)c).Visible = true;
                }
            }

        }else if( (c) is System.Web.UI.HtmlControls.HtmlInputButton ){
            if( ((System.Web.UI.HtmlControls.HtmlInputButton)c).ID == v_Control ){
                if( permitir == true ){
                    ((System.Web.UI.HtmlControls.HtmlInputButton)c).Visible = false;
                    ((System.Web.UI.HtmlControls.HtmlInputButton)c).Attributes.Add("disabled", "disabled");
                }else{
                    ((System.Web.UI.HtmlControls.HtmlInputButton)c).Visible = true;
                    ((System.Web.UI.HtmlControls.HtmlInputButton)c).Attributes.Remove("disabled");
                }
            }

        }else if( (c) is System.Web.UI.HtmlControls.HtmlAnchor ){
            if( ((System.Web.UI.HtmlControls.HtmlAnchor)c).ID == v_Control ){
                if( permitir == true ){
                    ((System.Web.UI.HtmlControls.HtmlAnchor)c).Visible = false;
                    // CType(c, System.Web.UI.HtmlControls.HtmlAnchor).Attributes.Add("disabled", "disabled")
                }else{
                    ((System.Web.UI.HtmlControls.HtmlAnchor)c).Visible = true;
                    //CType(c, System.Web.UI.HtmlControls.HtmlAnchor).Attributes.Remove("disabled") '' etiqueta <a runat="server" ID="id1">
                }
            }

        }else if( (c) is System.Web.UI.HtmlControls.HtmlGenericControl ){
            if( ((System.Web.UI.HtmlControls.HtmlGenericControl)c).TagName.ToUpper() == "DIV".ToUpper() ){
                if( ((System.Web.UI.HtmlControls.HtmlGenericControl)c).ID == v_Control ){
                    if( permitir == true ){
                        ((System.Web.UI.HtmlControls.HtmlGenericControl)c).Visible = false;
                        //CType(c, System.Web.UI.HtmlControls.HtmlGenericControl).Attributes.Add("disabled", "disabled")
                    }else{
                        ((System.Web.UI.HtmlControls.HtmlGenericControl)c).Visible = true;
                        //CType(c, System.Web.UI.HtmlControls.HtmlGenericControl).Attributes.Remove("disabled") '' etiqueta <div runat="server" ID="iddiv">
                    }
                }
            }

        }
        SetControls(c, v_Control, permitir, v_Permitir_ControlVisibleDisabled);
    }
} 
```

这样，我不必使用 if-then 语句来检查权限，而且我可以创建任意数量的角色，给他们任何权限，而无需更改任何 C# 代码。

您还可以查看这些帖子：

[ASP.NET 基于角色的安全性是真正的基于角色的访问控制系统吗？](https://stackoverflow.com/questions/5792462/is-asp-net-role-based-security-a-true-role-based-access-control-system?rq=1)

[基于角色的访问控制——我应该在数据库中也有权限列表还是只在代码中（例如枚举）？](https://stackoverflow.com/questions/7834136/role-based-access-control-should-i-have-the-permission-list-in-the-db-as-well?rq=1)

[如何控制对 ASP.Net MVC 3 视图上的表单字段的访问？](https://stackoverflow.com/questions/12164937/how-to-control-access-to-forms-fields-on-a-asp-net-mvc-3-view)

# ruby-on-rails - Ruby on rails 登录时重定向

> ID：11664079
> 
> 赞同：0
> 
> 时间：2012-07-26T07:02:13.843
> 
> 标签：ruby-on-rails

我正在关注[http://ruby.railstutorial.org上的教程](http://ruby.railstutorial.org)

当用户在访问受限页面时被提示登录然后在登录后被重定向回受限页面时，我已经设法获得了部分。

但是，登录后，我已经注销并与另一个用户登录，我将被重定向回页面，而不是新会话的默认主页。

我的会话控制器

```
class SessionsController < ApplicationController

def new

end

def create
  user = User.find_by_email(params[:session][:email])
if user && user.authenticate(params[:session][:password])
   sign_in user
   redirect_back_or user
  # Sign the user in and redirect to the user's show page.
else
  # Create an error message and re-render the signin form.
  flash.now[:error] = 'Invalid email/password combination'
    render 'new'
end
end
....
end 
```

我的会话助手

```
module SessionsHelper
....
def redirect_back_or(default)
  redirect_to(session[:return_to] || default)
  session.delete(:return_to)
end

def store_location
  session[:return_to] = request.fullpath
end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:34:20.153

添加`session.delete(:return_to)`到创建方法

```
def create
  user = User.find_by_email(params[:session][:email])
  if user && user.authenticate(params[:session][:password])
    sign_in user
    session.delete(:return_to)
    redirect_back_or user
    # Sign the user in and redirect to the user's show page.
  else
    # Create an error message and re-render the signin form.
    flash.now[:error] = 'Invalid email/password combination'
    render 'new'
  end
end 
```

# iphone - 获得零宽度和高度的视图？

> ID：11664080
> 
> 赞同：1
> 
> 时间：2012-07-26T07:02:24.693
> 
> 标签：iphone, xcode, ipad, ipod

我有一个主视图，在其中我可以拖放另一个名为 firstview 的视图。

我的视图宽度和高度为零，如下例所示。

```
NSLog(@"  WIDTH =%d",firstview.frame.size.width);
NSLog(@"  HEIGHT =%d",firstview.frame.size.height); 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:15:36.683

我同意@waheeda，我猜你还没有连接 firstview 的 IBOutlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:07:35.470

你有拖放另一个视图..所以界面生成器中可能存在视图连接问题

# php - `spl_autoload_extension()`和`spl_autoload_register()`的用法是什么？

> ID：11664083
> 
> 赞同：1
> 
> 时间：2012-07-26T07:02:33.510
> 
> 标签：php, function, spl-autoload-register

我正在使用[`spl_autoload_register()`](http://www.php.net/manual/en/function.spl-autoload-register.php)函数来包含所有文件。我希望任何具有扩展名`.class.php`或`.php`将直接包含的类。我做了下面的课程并注册了两个不同的功能，一切正常，**但是**

我认为有一些方法可以让我只需要注册一个函数就可以将两个扩展包含在一起。

请查看我的功能并告诉我我缺少什么

### 我的文件夹结构

```
project
      -classes
           -alpha.class.php
           -beta.class.php
           -otherclass.php
      -includes
           - autoload.php
      -config.inc.php // define CLASS_DIR and include 'autoload.php' 
```

### 自动加载.php

```
var_dump(__DIR__); // 'D:\xampp\htdocs\myproject\includes' 
var_dump(CLASS_DIR); // 'D:/xampp/htdocs/myproject/classes/' 
spl_autoload_register(null, false);
spl_autoload_extensions(".php, .class.php"); // no use for now
/*** class Loader ***/
class AL
{
     public static function autoload($class)
     {
          $filename = strtolower($class) . '.php';
          $filepath = CLASS_DIR.$filename;
          if(is_readable($filepath)){
              include_once $filepath;
          }
//          else {
//                trigger_error("The class file was not found!", E_USER_ERROR);
//            }
    }

    public static function classLoader($class)
    {
        $filename = strtolower($class) . '.class.php';
        $filepath = CLASS_DIR . $filename;
        if(is_readable($filepath)){
              include_once $filepath;
          }
    }

}
spl_autoload_register('AL::autoload');
spl_autoload_register('AL::classLoader'); 
```

**注意：**对线没有影响`spl_autoload_extensions();`。为什么？

我也读[了这个博客](http://joshosopher.tumblr.com/post/1271596379/the-new-keyword-autoloading-and-namespaces-in-php-5-3)，但不明白如何实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:13:23.043

你这样做的方式没有任何问题。两种类文件的两个不同的自动加载器很好，但我会给它们稍微描述性的名称；）

> 注意：对线没有影响`spl_autoload_extensions();`。为什么？

这只会影响内置的自动加载[`spl_autoload()`](http://php.net/spl-autoload)。

毕竟使用单个加载器可能更容易

```
 public static function autoload($class)
 {
      if (is_readable(CLASS_DIR.strtolower($class) . '.php')) {
          include_once CLASS_DIR.strtolower($class) . '.php';
      }  else if (is_readable(CLASS_DIR.strtolower($class) . '.class.php')) {
          include_once CLASS_DIR.strtolower($class) . '.class.php';
      }
} 
```

你也可以省略整个班级

```
spl_autoload_register(function($class) {
    if (is_readable(CLASS_DIR.strtolower($class) . '.php')) {
        include_once CLASS_DIR.strtolower($class) . '.php';
    }  else if (is_readable(CLASS_DIR.strtolower($class) . '.class.php')) {
        include_once CLASS_DIR.strtolower($class) . '.class.php';
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:07:23.907

也许这会有所帮助：

[http://php.net/manual/de/function.spl-autoload-extensions.php](http://php.net/manual/de/function.spl-autoload-extensions.php)

> 杰里米库克 03-Sep-2010 06:46
> 
> 任何使用此功能添加自己的自动加载扩展的人的快速说明。我发现如果我在不同的扩展名（即'.php，.class.php'）之间包含一个空格，该函数将不起作用。为了让它工作，我必须删除扩展名之间的空格（即'.php，.class.php'）。这在 Windows 上的 PHP 5.3.3 中进行了测试，我正在使用 spl_autoload_register() 而不添加任何自定义自动加载函数。
> 
> 希望对某人有所帮助。

# c++ - C ++在位置4插入1个字母怎么做

> ID：11664086
> 
> 赞同：-5
> 
> 时间：2012-07-26T07:02:40.480
> 
> 标签：c++

C ++在位置4插入1个字母怎么做

我有一个字符串

欧元兑美元

我如何将其转换为欧元/美元

我尝试了类似的东西

```
string result;
result = "EURUSD";

result.insert(3,"/"); 
```

它不起作用。

```
main.cpp:202:24: error: passing ‘const string {aka const std::basic_string<char>}’ as ‘this’ argument of ‘std::basic_string<_CharT, _Traits, _Alloc>& std::basic_string<_CharT, _Traits, _Alloc>::insert(std::basic_string<_CharT, _Traits, _Alloc>::size_type, const _CharT*) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>, std::basic_string<_CharT, _Traits, _Alloc> = std::basic_string<char>, std::basic_string<_CharT, _Traits, _Alloc>::size_type = unsigned int]’ discards qualifiers [-fpermissive]
main.cpp:203:2: error: expected ‘;’ before ‘cout’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:04:21.767

您是否尝试插入 with [`string::insert`](http://en.cppreference.com/w/cpp/string/basic_string/insert)？就像是：

```
str.insert(??, '/'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:21:52.497

这是要走的路：

```
#include <string>
#include <iostream>

int main()
{
  std::string my_string("EURUSD");

  // insert '/' after 'EUR'
  my_string.insert(3, 1, '/');

  // print result
  std::cout << my_string << std::endl;

  return 0;
} 
```

std::string::insert 的参数：

*   3：插入字符的位置
*   1：插入字符多少次
*   '/'：要插入的字符。

另请参阅[http://www.cplusplus.com/reference/string/string/insert/](http://www.cplusplus.com/reference/string/string/insert/)以供参考。

# scala - 类型安全堆栈scala错误

> ID：11664087
> 
> 赞同：2
> 
> 时间：2012-07-26T07:02:43.270
> 
> 标签：scala, compiler-errors

我第一次使用[http://typesafe.com/stack/](http://typesafe.com/stack/)，并创建了简单的 akka 项目。我的 scala 版本是 2.9.2 我收到以下错误。

```
[info] Done updating.
[info] Compiling 1 Scala source to /Users/hrishikeshparanjape/git-public/web-service/target/scala-2.9.2/classes...
[info] 'compiler-interface' not yet compiled for Scala 2.9.2\. Compiling...
sbt appears to be exiting abnormally.
  The log file for this session is at /var/folders/26/hqgjyf0j7192hmjdsz17f3v80000gn/T/sbt2587622650679130928.log
java.lang.OutOfMemoryError: PermGen space
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at sbt.CompletionService$$anon$1.take(CompletionService.scala:29)
    at sbt.Execute.next$1(Execute.scala:74)
    at sbt.Execute.processAll(Execute.scala:77)
    at sbt.Execute.runKeep(Execute.scala:57)
    at sbt.EvaluateTask$.run$1(EvaluateTask.scala:109)
    at sbt.EvaluateTask$.runTask(EvaluateTask.scala:124)
    at sbt.Aggregation$$anonfun$7.apply(Aggregation.scala:87)
    at sbt.Aggregation$$anonfun$7.apply(Aggregation.scala:85)
    at sbt.EvaluateTask$.withStreams(EvaluateTask.scala:87)
    at sbt.Aggregation$.runTasks(Aggregation.scala:85)
    at sbt.Aggregation$$anonfun$applyDynamicTasks$1.apply(Aggregation.scala:141)
    at sbt.Aggregation$$anonfun$applyDynamicTasks$1.apply(Aggregation.scala:136)
    at sbt.Command$$anonfun$applyEffect$2$$anonfun$apply$3.apply(Command.scala:64)
    at sbt.Command$$anonfun$applyEffect$2$$anonfun$apply$3.apply(Command.scala:64)
    at sbt.Command$.process(Command.scala:92)
    at sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(Main.scala:121)
    at sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(Main.scala:121)
    at sbt.State$$anon$1.process(State.scala:154)
    at sbt.MainLoop$$anonfun$next$1.apply(Main.scala:121)
    at sbt.MainLoop$$anonfun$next$1.apply(Main.scala:121)
    at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
    at sbt.MainLoop$.next(Main.scala:121)
    at sbt.MainLoop$.run(Main.scala:114)
    at sbt.MainLoop$$anonfun$runWithNewLog$1.apply(Main.scala:103)
    at sbt.MainLoop$$anonfun$runWithNewLog$1.apply(Main.scala:100)
    at sbt.Using.apply(Using.scala:25)
    at sbt.MainLoop$.runWithNewLog(Main.scala:100)
    at sbt.MainLoop$.runAndClearLast(Main.scala:83)
    at sbt.MainLoop$.runLoggedLoop(Main.scala:67)
    at sbt.MainLoop$.runLogged(Main.scala:60)
Error during sbt execution: java.lang.OutOfMemoryError: PermGen space 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:01:14.683

您的项目需要更多内存才能执行（这就是`java.lang.OutOfMemoryError: PermGen space`告诉您的内容）。我从来没有使用过类型安全堆栈，因此我不知道是否可以直接配置内存参数。

但是如果你运行 Linux，你可以输入

```
env JAVA_OPTS="-Xms512m -Xmx1024m -Xss1M -XX:MaxPermSize=512" <command> 
```

其中 command 是执行项目的命令（可能是`sbt`）。当然，如果您需要更多/更少的空间，您可以更改参数的大小。

# android - 即使在使用支持屏幕之后，如何在 android 上支持更小的屏幕？

> ID：11664088
> 
> 赞同：0
> 
> 时间：2012-07-26T07:02:44.143
> 
> 标签：android, android-screen-support

我需要我的应用程序在各种尺寸的屏幕上工作。它在我的 SII 上完美运行，但完整的应用程序未在 Galaxy Y 上显示。我在清单中使用支持屏幕代码。我找不到什么问题。

这是清单中的代码：

```
<uses-sdk android:minSdkVersion="8" 
    android:targetSdkVersion="13"/>

<supports-screens android:resizeable="true"
              android:smallScreens="true" 
              android:normalScreens="true" 
              android:largeScreens="true"

              android:anyDensity="true"
              /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:47:03.097

声明屏幕尺寸并不是唯一需要的。您还需要为每个屏幕尺寸提供布局和可绘制对象。请参阅[如何支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html#support)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:41:21.907

我*从来*不需要使用`<supports-screens>`标签。只需忽略它，您就会自动支持每种屏幕尺寸。

# c# - 如何使用 Mono for Android 模仿 Android/IOS 的联系人

> ID：11664089
> 
> 赞同：2
> 
> 时间：2012-07-26T07:02:46.253
> 
> 标签：c#, android, xamarin.android

我需要创建一个类似于联系人显示方式的活动。我需要显示来自 SQLite 表的数据，而不是显示联系人。我还需要按字母顺序划分数据。右侧带有搜索的导航器也是需要的。我必须使用哪些小部件或布局来实现/模仿这样的界面？

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:48:23.473

Android SDK 文档提供了有关如何通过在[ListView](https://developer.android.com/reference/android/widget/ListView.html) [Adapter中实现](https://developer.android.com/reference/android/widget/Adapter.html)[SectionIndexer](https://developer.android.com/reference/android/widget/SectionIndexer.html)来实现此类列表的文档。

[在Mono for Android Samples 存储库](https://github.com/xamarin/monodroid-samples/tree/master/LabelledSections)中还有一个完整的示例，说明如何实现这样的 ListView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T09:29:04.123

[在android中](http://www.motzwrit.es/post/18090937895/listview-fastscroll-with-sectionindexer-in-mono-for)参考本 节索引器

# objective-c - 如何将视频（图像）输入与外部源同步？

> ID：11664094
> 
> 赞同：1
> 
> 时间：2012-07-26T07:03:19.220
> 
> 标签：objective-c, ios, performance, image-processing, video-processing

让我们假设有一个 LED。它以 0.5 秒的周期闪烁。所以在第二个 0 => 0.5 它打开，从第二个 0.5 => 1 它关闭，从第二个 1 => 1.5 它再次打开。

假设我想从外部相机（比如 iPhone 相机）读取输入。我所做的是： 1\. 获取输入流，从中制作图像，扫描图像是否存在一定数量的白色像素，如果存在，则 LED 亮起，我将“1”写入我的文件。如果它不在那里，我写“0”。我每秒读取两次输入流。所以一般来说，如果一切顺利并且我的处理不会在某个地方滞后，我会得到很好的结果。但想象一下，如果：

0 => 0.5 LED 亮 0.49 => 我的相机将信息读取为“1”

0.5 => 1.0 LED 熄灭 0.99 => 我的相机将信息读取为“0”

1.0 => 1.5 LED 亮起 1.51 => 我的相机滞后并将其读取为“0”

所以我们这里有数据损坏。问题是，我如何同步读取，以便它最好进入此窗口的中间，以获得更大的误差范围。还想象一下，如果我尝试每秒执行 10 次。窗口变得更小了。

我可以阅读有关该主题的哪些内容？我该怎么做才能使它更可靠？

一种可能的解决方案似乎是每秒读取 4 次输入，并使用基于 2 个输入组的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:54:04.903

听起来您可能想了解编码时间码的方法。 [http://en.wikipedia.org/wiki/Timecode](http://en.wikipedia.org/wiki/Timecode)

*   LTC（音频信号）：[http ://en.wikipedia.org/wiki/Linear_timecode](http://en.wikipedia.org/wiki/Linear_timecode)
*   VITC（模拟视频信号）：[http ://en.wikipedia.org/wiki/Vertical_interval_timecode](http://en.wikipedia.org/wiki/Vertical_interval_timecode)

它们中的每一个都以选定的帧速率（例如 30fps）传输 80 位数据。我不确定在你的情况下你会怎么做。

显然，窗口更小更准确。使用 LTC，由于音频通常以 44kHz 左右的频率进行采样，因此几乎可以准确地得到它。

如果 iPhone 相机每秒只能拍摄 2 张​​照片，我想知道您是否可以尝试以不同的时间间隔（例如，甚至 0.7 秒）拍摄照片，并以某种方式计算是否应该打开或关闭（作为LED 仍以 0.5s 交替）。在几秒钟内，它可能与每 0.1 秒采样一次一样吗？（我只是从天空中提取数字，但我想你可以计算出类似的东西）

另一个想法：您可以使用相机中的视频而不是一系列照片吗？你也许可以这样获得30fps？（我不确定——还没有研究过）iOS 6.0 中也可能对此进行了改进（如果您是开发人员，则值得检查）。

# c++ - 在 OpenCV 中更新 Mat 的子矩阵

> ID：11664097
> 
> 赞同：25
> 
> 时间：2012-07-26T07:03:33.550
> 
> 标签：c++, opencv

我正在使用 OpenCV 和 C++。我有一个像这样的矩阵 X

```
Mat X = Mat::zeros(13,6,CV_32FC1); 
```

我只想更新一个 4x3 的子矩阵，但我对如何以有效的方式访问该矩阵有疑问。

```
Mat mat43= Mat::eye(4,3,CV_32FC1);  //this is a submatrix at position (4,4) 
```

我需要逐个元素更改吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-26T07:09:51.320

最快的方法之一是设置一个标题矩阵，指向要更新的列/行的范围，如下所示：

```
Mat aux = X.colRange(4,7).rowRange(4,8); // you are pointing to submatrix 4x3 at X(4,4) 
```

现在，您可以将矩阵复制到 aux（但实际上您会将其复制到 X，因为 aux 只是一个指针）：

```
mat43.copyTo(aux); 
```

就是这样。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-26T07:10:10.983

首先，您必须创建一个指向原始矩阵的矩阵：

```
Mat orig(13,6,CV_32FC1, Scalar::all(0));

Mat roi(orig(cv::Rect(1,1,4,3))); // now, it points to the original matrix;

Mat otherMatrix = Mat::eye(4,3,CV_32FC1);

roi.setTo(5);                // OK
roi = 4.7f;                  // OK
otherMatrix.copyTo(roi);     // OK 
```

请记住，**任何**涉及直接归因的操作，使用来自另一个矩阵的“=”符号会将 roi 矩阵源从 orig 更改为另一个矩阵。

```
// Wrong. Roi will point to otherMatrix, and orig remains unchanged
roi = otherMatrix; 
```

# c# - 基类不能修改的类的基类方法？

> ID：11664100
> 
> 赞同：1
> 
> 时间：2012-07-26T07:03:51.943
> 
> 标签：c#, .net, entity-framework

我正在使用实体框架生成一个“CClass”实体，如下所示：

```
public partial class CClass: EntityObject
{
    #region Factory Method

    #region Primitive Properties
} 
```

我剩下的部分类实现是

```
public partial class CClass : IDemoralize
{
    public Value xValue { get; set; }

    public void IDemoralize.Demoralize()
    {
        // implementation

    }
    public void IDemoralize.Demoralize(Func<IDemoralize, bool> CustomDemoralization)
    {
        bool success = CustomDemoralization(this);

        if (!success)
            throw new ApplicationException();
    }

    public void IDemoralize.WriteModel()
    {
        // implementation
    }

    public void IDemoralize.WriteModel(Func<IDemoralize, bool> Write)
    {
        bool success = Write(this);
        if (!success)
            throw new ApplicationException();
    }
} 
```

现在，由于下面列出的两种方法在整个设计中确实有共同的实现，我想将它们移动到一个名为 DemoralizeBase 的基类中，因此如果代码需要更改，那么一致性就变得易于管理。

```
// in DemoralizeBase 
public void Demoralize(Func<IDemoralize, bool> CustomDemoralization)
{
    //implementation
}

public void WriteModel(Func<IDemoralize, bool> Write)
{
    // implementation
} 
```

有没有办法做到这一点，或者我应该使用现有的设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:11:55.820

您可以将它们编写为扩展方法：

```
public static class Demoralize {
    public static void Demoralize(this IDemoralize obj,
         Func<IDemoralize, bool> CustomDemoralization) {...}
    public static void WriteModel(this IDemoralize obj,
         Func<IDemoralize, bool> Write) {...}
} 
```

然后这将*像*一个实例方法一样工作，即

```
var foo = new CClass();
foo.Demoralize(...); 
```

需要注意的一件事：在**当前**实例上调用扩展方法时，`this.`（通常是可选的）是***必需***的，即

```
Demoralize(...); // does not work
this.Demoralize(...); // works 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:32:02.230

我会在这里进行一些**依赖注入**。IDemoralize 定义了 4 种方法，其中 2 种在您的框架中具有通用实现。我要做的是：从 IDemoralize 中提取一个新接口，并将依赖项添加到一个对象，该对象将该接口实现到 CClass 中。

```
public interface IDemoralizeBase
{
    void Demoralize(Func<IDemoralize, bool> CustomDemoralization);
    void WriteModel(Func<IDemoralize, bool> Write);
} 
```

将对象 IDemoralizeBase 添加到 CClass，并定义一个构造函数，让您可以注入依赖项

```
public class CClass : IDemoralize
{
    public IDemoralizeBase MyDemoralizer {get; private set;}

    public CClass(IDemoralizeBase basicDemoralizer)
    {
        MyDemoralizer = basicDemoralizer;
    }

    public void Demoralize(Func<IDemoralize, bool> CustomDemoralization)
    {
        MyDemoralizer.Demoralize(CustomDemoralization);
    }

    public void WriteModel(Func<IDemoralize, bool> Write)
    {
        MyDemoralizer.WriteModel(Write);
    }
} 
```

这将允许您创建一个或*n*个实现 IDemoralizeBase 的类，这样，如果您在某些特殊情况下获得一些特殊实现，您可以注入一个特殊的依赖项。

干杯，

拉斐尔

# java - 测试类只能有一个构造函数

> ID：11664108
> 
> 赞同：5
> 
> 时间：2012-07-26T07:04:15.367
> 
> 标签：java, eclipse, junit

有人遇到这个错误

初始化错误（junit.framework.TestSuite）：测试类只能有一个构造函数

用例。

我在一个测试套件中有 2 个测试脚本。如果我动态创建 TestSuite 然后添加 2 个 testScripts 并调用它

```
Result result = JUnitCore.runClasses(clazz); 
```

其中 clazz 是 TestSuite 类。

但是，如果我在每 2 个 TestScript 上调用 JUnitCore.runClasses 就没有问题。

我使用了 JUnit3。

我对这个 JUnit 错误有类似的问题[- IllegalArgumentException:Test class can only have one constructor](https://stackoverflow.com/questions/9415325/junit-error-illegalargumentexceptiontest-class-can-only-have-one-constructor)，但我的涉及动态创建测试套件类。原因是有一个用例我可以在测试套件中包含 1 个测试脚本，或者我可以在测试套件中包含 2 个测试脚本。

**更新代码：**

```
public class ScriptTest1 extends TestCase { 
    private ScriptTest1() { }   
    public void testMethod1() {
        Assert.assertEquals(true, true);
    }
}

public class ScriptTest2 extends TestCase { 
    private ScriptTest2() { }   
    public void testMethod2() {
        Assert.assertEquals(true, true);
    }
} 
```

然后在另一个班级

```
File file = new File("file to ScriptTest.class");
Class<?> clazz = Class.forName(className, true, Thread.currentThread().getContextClassLoader());

//construct a new test suite
TestSuite ts = new TestSuite("Sample Test Suite with only ScriptTest1");
ts.addTestSuite((Class<? extends TestCase>) clazz);

Result result = JUnitCore.runClasses(ts.getClass());
HashSet<String> failureMethod = new HashSet<String>();
for (Failure failure : result.getFailures()) {
     System.out.println("Failure: " + failure.toString());      
} 
```

失败会输出：initializationError(junit.framework.TestSuite): Test class can only have one constructor 但是如果我直接这样做，它会运行良好。

```
File file = new File("file to ScriptTest.class");
Class<?> clazz = Class.forName(className, true, Thread.currentThread().getContextClassLoader());
Result result = JUnitCore.runClasses(clazz); 
```

我在 JUnit4 中创建了测试类，并且我运行我的主程序也依赖于 JUnit4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:59:52.983

您正在将类 junit.framework.TestSuite.class 传递给 JUnitCore.runClasses()。JUnitCore.runClasses 尝试实例化该类。为避免出现问题，它要求您传递的任何类都只有一个构造函数 [*]。TestSuite 有多个公共构造函数。

尝试：

```
TestResult result = new TestResult();
ts.run(result);

for (Enumeration<TestFailure> failures = result.failures(); failures.hasMoreElements();) {
    TestFailure testFailure = failures.nextElement();
    System.out.println("Failure: " + testFailure.toString());      
} 
```

同时，考虑将您的测试用例从 JUnit 3 升级到 JUnit 4，JUnit 3 现在已经很老了。

[*] 除了参数化测试等。在 OP 的用例中，这是真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-25T01:46:54.600

在您的测试类中，如果您要注入依赖项，`private final Whatever whatever;`

擦除`final`并擦除构造函数。

这对我有用

# oracle - Play Framework，RAW 字段无法正常工作

> ID：11664111
> 
> 赞同：0
> 
> 时间：2012-07-26T07:04:24.627
> 
> 标签：oracle, playframework, playframework-1.x

我有一个像这样的用户模型

```
@Entity
@Table(name="SHOPPER")
public class User extends GenericModel {

    @Id
    @Column(name="SHRFNBR")
    @GeneratedValue(generator="SEQ_SHP", strategy=GenerationType.SEQUENCE)
    @SequenceGenerator(name="SEQ_SHP", sequenceName="SEQ_SHP", allocationSize=1)
    public Long id;

    @Column(name="SHLOGID")
    public String email;

    @Column(name="SHLPSWD")
    public String password;

    public static User isUser(String user, String pass){
        return User.find("byEmailAndPassword", user, pass).first();
    }
} 
```

在 DB 密码上它的 RAW 类型和在控制器上它是用 RSA 编码的。

最主要的是它没有找到任何结果，因为进入数据库的二进制文件似乎与现场的二进制文件不同。

起初我认为这可能是应用程序上的一些字符编码问题，但后来我指向同一个数据库，但在生产中并且它有效。所以我检查了开发数据库，​​发现另一个字符集而不是**ISO-8859-1** (prod) 是**ISO-8859-15** (devel)，这似乎没什么不同。

更新开发字符集后，情况是一样的。还有其他地方的 RSA 字符串在 DB 上编码错误吗？

**进度解析：**

该过程是一个登录过程，用户插入电子邮件和密码，最后一个使用 RSA 编码，并将结果发送到 DB 进行比较。
DB 上的字段包含如下值：

CB4F3ECB7763C98EF67CA761700D1FB255F90E4473B1BB594B2238756307DF2D155D57A2CBA2930C‌162CB0634765D48EA111F743F6825F2457340148F680E300

**更多信息：**

*   数据库甲骨文 10g
*   播放框架 1.2.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:48:39.030

不要将二进制数据映射到字符串，而是使用 byte[]，这样您就不会遇到任何字符编码问题。

# ios - 无法同时满足约束，将尝试通过打破约束来恢复

> ID：11664115
> 
> 赞同：153
> 
> 时间：2012-07-26T07:04:35.363
> 
> 标签：ios, objective-c, debugging, nslayoutconstraint

以下是我在调试区域收到的错误消息。它运行良好，除了我收到此错误之外没有任何问题。这会阻止苹果接受该应用程序吗？我如何解决它？

```
2012-07-26 01:58:18.621 Rolo[33597:11303] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x887d630 h=--& v=--& V:[UIButtonLabel:0x886ed80(19)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x887d5f0 h=--& v=--& UIButtonLabel:0x886ed80.midY == + 37.5>",
    "<NSAutoresizingMaskLayoutConstraint:0x887b4b0 h=--& v=--& V:[UIButtonLabel:0x72bb9b0(19)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x887b470 h=--& v=--& UIButtonLabel:0x72bb9b0.midY == - 0.5>",
    "<NSLayoutConstraint:0x72bf860 V:[UILabel:0x72bf7c0(17)]>",
    "<NSLayoutConstraint:0x72c2430 UILabel:0x72bfad0.top == UILabel:0x72bf7c0.top>",
    "<NSLayoutConstraint:0x72c2370 UILabel:0x72c0270.top == UILabel:0x72bfad0.top>",
    "<NSLayoutConstraint:0x72c22b0 V:[UILabel:0x72bf7c0]-(NSSpace(8))-[UIButton:0x886efe0]>",
    "<NSLayoutConstraint:0x72c15b0 V:[UILabel:0x72c0270]-(NSSpace(8))-[UIRoundedRectButton:0x72bbc10]>",
    "<NSLayoutConstraint:0x72c1570 UIRoundedRectButton:0x72bbc10.baseline == UIRoundedRectButton:0x7571170.baseline>",
    "<NSLayoutConstraint:0x72c21f0 UIRoundedRectButton:0x7571170.top == UIButton:0x886efe0.top>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x72bf860 V:[UILabel:0x72bf7c0(17)]>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2015-05-07T09:09:46.640

我建议调试并找到哪个约束是**“你不想要的”**。假设您有以下问题：

![在此处输入图像描述](../Images/0b83ffe153ae55e1520d92c9cdd08f48.png)

**始终的问题是如何找到以下约束和视图。**

**有两种解决方案如何做到这一点：**

1.  **DEBUG VIEW HIERARCHY** *（不推荐这种方式）*

由于您知道在哪里可以找到意外约束 (PBOUserWorkDayHeaderView)，因此有一种方法可以很好地做到这一点。让我们在红色矩形中找到`UIView`和。`NSLayoutConstraint`因为我们知道他们**在内存中的 id，**所以这很容易。

*   **使用Debug View Hierarchy**停止应用程序：

![在此处输入图像描述](../Images/fc3471b75ecfc203dbe96180af790bcf.png)

*   找到合适的 UIView：

![在此处输入图像描述](../Images/e5f03a3655d2c5a95ef6eebfcdf52d76.png)

*   接下来就是找到我们关心的NSLayoutConstraint：

![在此处输入图像描述](../Images/e2abcc0272d7529949cfd7eab7b8ebfd.png)

如您所见，内存指针是相同的。所以我们知道现在发生了什么。此外，您可以`NSLayoutConstraint`在视图层次结构中找到。由于它在 View 中被选中，它也在 Navigator 中被选中。

![在此处输入图像描述](../Images/a4ed6b6768fb2b5eb9e87d2adbd9ac6a.png)

如果您需要，您还可以使用地址指针在控制台上打印它：

```
(lldb) po 0x17dce920
<UIView: 0x17dce920; frame = (10 30; 300 24.5); autoresize = RM+BM; layer = <CALayer: 0x17dce9b0>> 
```

您可以对调试器指向您的每个约束执行相同的操作:-) 现在您决定如何处理它。

2.  **更好地打印** *（我真的推荐这种方式，这是 Xcode 7 的）*

    *   为视图中的每个约束设置唯一标识符：

[![在此处输入图像描述](../Images/c815e9684945adc96f221aca087f18e6.png)](https://i.stack.imgur.com/z8aun.png)

*   创建简单的扩展`NSLayoutConstraint`：

**斯威夫特**：

```
extension NSLayoutConstraint {

    override public var description: String {
        let id = identifier ?? ""
        return "id: \(id), constant: \(constant)" //you may print whatever you want here
    }
} 
```

**目标-C**

```
@interface NSLayoutConstraint (Description)

@end

@implementation NSLayoutConstraint (Description)

-(NSString *)description {
    return [NSString stringWithFormat:@"id: %@, constant: %f", self.identifier, self.constant];
}

@end 
```

*   再次构建它，现在您有了更多可读的输出：

[![在此处输入图像描述](../Images/76db69714735255579a6e0fbc3956f7f.png)](https://i.stack.imgur.com/8KBHI.png)

*   一旦你得到你的，你可以在你的**Find Navigator**`id`中简单地点击它：

 **[![在此处输入图像描述](../Images/6c62167ad5c9b12cadcaa1247d3aeef6.png)](https://i.stack.imgur.com/pNnmB.png)

*   并迅速找到它：

[![在此处输入图像描述](../Images/9cf9f8f5954576a7c7b0bcbe529f4399.png)](https://i.stack.imgur.com/DhWnR.png)

**如何简单地解决这种情况？**

*   尝试将**优先级**更改`999`为破坏约束。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-08-24T11:53:27.630

您遇到的问题是 NSAutoresizingMaskLayoutConstraints 不应该在那里。这是旧的弹簧和支柱系统。要摆脱它，请在您要约束的每个视图上运行此方法：

```
[view setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-10-29T21:15:43.947

**请注意**，不要在同一方向和类型上使用多个约束。

例如： **尾随的垂直约束 = 15，另一个是 >= 10。**

有时，Xcode 会创建**一些您没有注意到的约束**。你必须**摆脱多余的约束**，日志警告肯定会消失。

![在此处输入图像描述](../Images/82b6e7d79645ada1a5505c24f4c74b79.png)

另外，您可以直接**从日志****中读取和检测**某些特定原因：

 **> NSLayoutConstraint:0xa338390 V:|-(15)-[UILabel:0xa331260]（名称：'|':UILabel:0xa330270）>

我们可以将其解读为 UILabel 约束中的问题，它导致垂直约束的长度为 15pt。

> NSLayoutConstraint:0x859ab20 H:-(13)-|[UIView:0x85a8fb0]...

这将是尾随水平约束等。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-22T14:11:23.683

我很难弄清楚是什么限制导致了这个错误。这是一种更简单的方法。

我正在使用 Xcode 6.1.1

1.  “Command + A”选择所有的UILabels，UIImages等。
2.  点击 Editor -> Pin > (Select...) to Superview
3.  再次单击编辑器 -> 解决自动布局问题 -> 添加缺少的约束或重置为建议的约束。这取决于你的情况。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-24T23:15:39.160

我抛出了很多这样的异常，我发现解决它们的最快和最简单的方法是在异常中找到唯一值，然后在情节提要源代码中搜索这些值。这有助于我找到导致问题的实际视图和约束（我在所有视图上使用有意义的 userLabels，这使得跟踪约束和视图变得更加容易）......

因此，使用上述例外情况，我将在 xcode（或其他编辑器）中将情节提要作为“源代码”打开并寻找我能找到的东西......

```
<NSLayoutConstraint:0x72bf860 V:[UILabel:0x72bf7c0(17)]> 
```

.. 这看起来像是对值为 (17) 的 UILabel 的垂直 (V) 约束。

浏览我也发现的异常

```
<NSLayoutConstraint:0x72c22b0 V:[UILabel:0x72bf7c0]-(NSSpace(8))-[UIButton:0x886efe0]> 
```

看起来 UILabel(0x72bf7c0) 接近 UIButton(0x886efe0) 并具有一些垂直间距 (8)..

希望这足以让我在故事板源代码中找到特定的视图（可能最初通过在文本中搜索“17”），或者至少找到一些可能的候选者。从那里我应该能够真正弄清楚这些视图在情节提要中哪些视图，这将使识别问题变得更加容易（寻找“重复的”固定或与尺寸限制冲突的固定）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-02-22T11:55:15.627

快速使用此代码

```
view.translatesAutoresizingMaskIntoConstraints = false 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-05-05T17:27:38.847

我遇到了这个问题，因为我的`.xib`文件使用了自动布局。

在文件检查器中，第一个选项卡。取消勾选“使用自动布局”解决了这个问题。

![自动布局文件检查器](../Images/bcc8c27317e33f73e911029902d7beac.png)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-03-22T21:13:44.150

这是我的经验和解决方案。我没碰过代码

1.  选择视图（UILabel、UIImage 等）
2.  Editor > Pin > (Select...) to Superview
3.  编辑器 > 解决自动布局问题 > 添加缺少的约束

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-02-13T08:17:09.560

我遵循了每个搜索查询的 SO 问题和答案。但它们都与特定的相关。

基本上，我的意思是在你写下一种格式（可能是一种简单的格式）之前，它会给你一个警告。

从 iOS 8.0 开始，默认视图是大小类。即使您禁用大小类，它仍然会包含一些自动布局约束。

因此，如果您打算使用 VFL 通过代码设置约束。然后你必须照顾一个下面的线。

```
// Remove constraints if any.
[self.view removeConstraints:self.view.constraints]; 
```

我在 SO 中进行了很多搜索，但解决方案在于[Apple Sample Code](https://developer.apple.com/library/ios/samplecode/TaggedLocations/Introduction/Intro.html)。

因此，您必须在计划添加新约束之前删除默认约束。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-29T21:25:10.447

对我来说，这个问题的主要原因是我忘记`AutoLayout`在`Xib`编辑器中取消选中。事实上，我对`XIB`in 代码做了很多调整。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-02-13T02:19:31.787

上述答案都对我的情况没有帮助。我正在运行 XCode 10.1 并在模拟器上为“iPad（第 5 代）”测试我的应用程序。模拟器运行 iOS 12.1。

我的故事板中有一个简单的根视图，有两个 UITextField 子视图。故事板中根本没有使用任何约束。而且我在应用程序或情节提要中没有 UIButtonBarView 对象。

当应用程序启动并放置根视图时，不会打印任何消息。旋转模拟设备时无。

但是在模拟器中，当我单击其中一个文本字段时，键盘扩展会从屏幕底部出现，尽管不是全键盘，它似乎从未出现在模拟器中。但是在终端上打印出以下内容：

```
Unable to simultaneously satisfy constraints.
Probably at least one of the constraints in the following list is one you don't want. 
Try this: 
    (1) look at each constraint and try to figure out which you don't expect; 
    (2) find the code that added the unwanted constraint or constraints and fix it. 
(Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
"<NSAutoresizingMaskLayoutConstraint:0x6000034e7700 h=--& v=--& UIKeyboardAssistantBar:0x7f9c7d714af0.height == 0   (active)>",
"<NSLayoutConstraint:0x6000034aba20 V:|-(0)-[_UIUCBKBSelectionBackground:0x7f9c7d51ec70]   (active, names: '|':_UIButtonBarButton:0x7f9c7d51de40 )>",
"<NSLayoutConstraint:0x6000034aba70 _UIUCBKBSelectionBackground:0x7f9c7d51ec70.bottom == _UIButtonBarButton:0x7f9c7d51de40.bottom   (active)>",
"<NSLayoutConstraint:0x6000034fb3e0 V:|-(0)-[_UIButtonBarStackView:0x7f9c7d715880]   (active, names: '|':UIKeyboardAssistantBar:0x7f9c7d714af0 )>",
"<NSLayoutConstraint:0x6000034fb750 V:[_UIButtonBarStackView:0x7f9c7d715880]-(0)-|   (active, names: '|':UIKeyboardAssistantBar:0x7f9c7d714af0 )>",
"<NSLayoutConstraint:0x6000034abc00 'UIButtonBar.maximumAlignmentSize' _UIButtonBarButton:0x7f9c7d51de40.height == UILayoutGuide:0x600002ef4e00'UIViewLayoutMarginsGuide'.height   (active)>",
"<NSLayoutConstraint:0x6000034d7cf0 'UIView-bottomMargin-guide-constraint' V:[UILayoutGuide:0x600002ef4e00'UIViewLayoutMarginsGuide']-(9)-|   (active, names: '|':_UIButtonBarStackView:0x7f9c7d715880 )>",
"<NSLayoutConstraint:0x6000034d7c50 'UIView-topMargin-guide-constraint' V:|-(10)-[UILayoutGuide:0x600002ef4e00'UIViewLayoutMarginsGuide']   (active, names: '|':_UIButtonBarStackView:0x7f9c7d715880 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x6000034aba70 _UIUCBKBSelectionBackground:0x7f9c7d51ec70.bottom == _UIButtonBarButton:0x7f9c7d51de40.bottom   (active)>

Make a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKitCore/UIView.h> may also be helpful. 
```

在我看来，所有这一切都与我的应用程序中的任何内容无关，并且与 Apple 如何创建自己的键盘视图有关，即使我的小扩展声明与它相结合。

所以问题仍然存在，作为应用程序开发人员，我是否有责任做一些事情（假设这是一堆值得关注的事情）还是只是苹果自己的问题/错误？

FWIW，在模拟较新的 iPad 型号时不会出现此约束问题消息，例如 iPad Pro 12.9 英寸（第 3 代）。但是在模拟 iPad Pro 9.7 英寸时确实会显示该消息。所有人都声称他们正在运行 iOS 12.1。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-10-29T12:32:02.103

```
 for(UIView *view in [self.view subviews]) {
    [view setTranslatesAutoresizingMaskIntoConstraints:NO];
} 
```

这帮助我抓住了导致问题的观点。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-04-08T22:51:13.377

我遇到了同样的错误，但仅在特定视图上，当我触摸第一个文本字段，然后触摸下一个文本字段时。

我正在为 iOS 13.4 编写 SwiftUI

```
 Unable to simultaneously satisfy constraints.
        Probably at least one of the constraints in the following list is one you don't want. 
        Try this: 
            (1) look at each constraint and try to figure out which you don't expect; 
            (2) find the code that added the unwanted constraint or constraints and fix it. 
    (
        "<NSLayoutConstraint:0x2809b6760 'assistantHeight' TUISystemInputAssistantView:0x105710da0.height == 44   (active)>",
        "<NSLayoutConstraint:0x2809ccff0 'assistantView.bottom' TUISystemInputAssistantView:0x105710da0.bottom == _UIKBCompatInputView:0x10525ae10.top   (active)>",
        "<NSLayoutConstraint:0x2809cccd0 'assistantView.top' V:|-(0)-[TUISystemInputAssistantView:0x105710da0]   (active, names: '|':UIInputSetHostView:0x105215010 )>",
        "<NSLayoutConstraint:0x2809ca300 'inputView.top' V:|-(0)-[_UIKBCompatInputView:0x10525ae10]   (active, names: '|':UIInputSetHostView:0x105215010 )>"
    )

    Will attempt to recover by breaking constraint 
    <NSLayoutConstraint:0x2809ccff0 'assistantView.bottom' TUISystemInputAssistantView:0x105710da0.bottom == _UIKBCompatInputView:0x10525ae10.top   (active)>

    Make a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.
    The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKitCore/UIView.h> may also be helpful. 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-28T06:01:14.037

对于 xib 中的 viewCircle，我也遇到了同样的问题，即打破日志中的约束。我几乎尝试了上面列出的所有东西，但没有任何东西对我有用。然后我尝试更改日志中中断的高度约束的优先级（通过在 xib 上添加约束的标识符来确认）[在此处输入图像描述](https://i.stack.imgur.com/8Q8Gl.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-05-05T21:01:05.027

需要注意的一件事（至少这让我绊倒了）是我从错误的视图中删除了约束。我试图删除的约束不是我的视图的子约束，所以当我这样做时

```
myView.removeConstraint(theConstraint) 
```

它实际上并没有删除任何东西，因为我需要打电话

```
myView.superView.removeConstraint(theConstraint) 
```

因为约束在我看来是技术上的兄弟约束。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-12-02T15:15:33.777

基本上，您只需从关联视图中删除该约束。例如，如果高度约束发出警告，只需将其从您的视图中删除；它不会影响视图。

* * *

## 回答 #17

> 赞同：-4
> 
> 时间：2018-12-04T04:17:20.960

迅速 4

我只是在 viewDidLoad 中添加了这一行，然后就可以正常工作了。

```
view.removeConstraints(view.constraints) 
```****

# android - 使用 Rails 服务器推送通知

> ID：11664116
> 
> 赞同：11
> 
> 时间：2012-07-26T07:04:47.950
> 
> 标签：android, iphone, ruby-on-rails, push-notification

我有一个 Rails 服务器和一个后端。是否可以使用我的 Rails 服务器向 iPhone 和 android 应用程序发送推送消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T07:32:30.430

是的，有可能。以下是我最近在项目中使用的 gem：[Android 推送服务](https://github.com/dondeng/gcm_on_rails)和[Apple 推送服务](https://github.com/jpoz/APNS)

它们有据可查，因此您不应该在设置方面遇到大麻烦。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T14:54:04.727

我创建了一个 gem 来创建一个中央推送通知，它目前支持 iOS 和 Android，但我会添加更多平台。

也许这会帮助你

这是链接：[https ://github.com/NicosKaralis/pushmeup](https://github.com/NicosKaralis/pushmeup)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-12T05:50:45.983

尝试将[grocer gem](https://github.com/grocer/grocer)用于 ios 推送通知。这很容易设置和开始。

# iphone - 中心的图标徽章和远程通知

> ID：11664117
> 
> 赞同：0
> 
> 时间：2012-07-26T07:04:50.853
> 
> 标签：iphone, objective-c, push-notification, apple-push-notifications

我对应用程序图标徽章和远程通知有疑问。当我收到远程通知时，iOS 正确设置了徽章值。如果我直接从远程通知（存储在通知中心）启动应用程序，应用程序会将徽章设置为值 0（以清除图标徽章）。完成此过程后，系统会清除中心的所有通知，所以我的问题是，即使我将徽章值设置为 0，如何在中心存储通知？我希望仅通过清除按钮将清除通知存储在中心。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:38:46.467

我猜你不能，重置徽章号码会从通知中心删除所有通知。

Facebook 会这样做，在您打开应用程序后，它会重置徽章并要求服务器提供数据。现在删除了所有其他通知，并且 facebook 在应用程序中实现了自己的逻辑来查看通知。

# ios - 子视图添加到导航栏ios

> ID：11664120
> 
> 赞同：0
> 
> 时间：2012-07-26T07:05:09.493
> 
> 标签：ios, ipad, subview, navbar

我在 Ipad 上的 navigationController.view 上将视图显示为子视图时遇到问题。我需要在我的viewController（带有navBar）上显示具有透明背景的视图，但是当我改变方向时，我的navBar 在我的视图的前景上变得可见；我创建了简单的基于视图的应用程序。这是我添加到项目中的代码：

```
AppDelegate.h:

 UINavigationController *_navController;

@property (strong, nonatomic) UINavigationController *navController;

AppDelegate.m:

_navController = [[[UINavigationController alloc] initWithRootViewController:self.viewController] autorelease];
    self.window.rootViewController = _navController;

ViewController.m:

- (void)viewDidLoad
{
    [super viewDidLoad];
    UIView *view = [[[UIView alloc] initWithFrame:self.view.frame] autorelease];
    [view setBackgroundColor:[UIColor redColor]];

    [self.navigationController.view addSubview:view];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:23:09.407

尝试将视图推送到导航控制器

```
 YourAppDelegate *del = (YourAppDelegate *)[UIApplication sharedApplication].delegate;
[del.navigationController pushViewController:nextViewController animated:YES]; 
```

或者

```
UINavigationController* navigation = [[UINavigationController alloc] init];
 iVkViewController *overviewViewController = [[iVkViewController alloc] init];
 overviewViewController.title = @"First";
 [navigation pushViewController:overviewViewController animated:NO]; 
```

# android - 环境 仍在正常屏幕中运行

> ID：11664122
> 
> 赞同：1
> 
> 时间：2012-07-26T07:05:23.663
> 
> 标签：android, android-manifest

任何人都可以说如何解决这个问题。或者它会自动在 Google Play 中对用户隐藏..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:15:09.723

没有什么异常。

```
Setting <support-screens android:normalScreens=“false” /> still runs in Normal Screens 
```

如果您`<supports-screen>`在清单中进行定义，那么如果请求的设备具有正常的屏幕尺寸，那么在*Google Playstore*中将不会*列出此应用程序。*

# android - 在 Android 中为地图创建 onTab 侦听器类

> ID：11664127
> 
> 赞同：0
> 
> 时间：2012-07-26T07:05:45.563
> 
> 标签：android, android-mapview

我正在 Android 中开发一个 Map 项目。在这个应用程序中，一些集群图标被放置在地图上。我想为集群图标点击设置一个监听器。所以我决定在我的自定义覆盖类（比如 ClusterMarker）中覆盖一个方法 onTap()。我怎么能为此设置监听器类？请为我提供正确的方法来做到这一点......

比如，ClusterMarker（我的自定义 Overlay 类）

```
 @Override
    public boolean onTap(GeoPoint p, MapView mapView) {

        Projection pro = mapView.getProjection();
        Point ct = pro.toPixels(center_, null);
        Point pt = pro.toPixels(p, null);
//....
....
...
        return false;
    } 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:03:37.987

我找到了如何为 onTap 事件创建监听器类。但实际上这里不需要监听器类。因为我的自定义覆盖反过来做这项工作。为此，我必须将自定义叠加对象添加到 mapview。

# java - 在企业中管理 Java 插件

> ID：11664131
> 
> 赞同：0
> 
> 时间：2012-07-26T07:05:57.617
> 
> 标签：java, plugins

我的公司有很多项目，每个项目都有自己的一组 Java 插件和版本。有没有办法更好地管理所有应用程序的插件以确保它们都是最新的？

这个概念类似于补丁管理系统，它存储有关所有服务器的补丁级别的信息，并且您可以在所有机器上统一应用补丁。

我想为我们的开发环境建立一个类似的基础设施。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:20:55.793

您可以尝试使用 maven 作为项目的构建系统，并设置一个中央 nexus/artifactory 服务器，您可以在其中设置所有需要的依赖项。

在您的 pom.xml 中，您可以定义要使用的主要/次要版本。（在这里回答：[如何告诉 Maven 使用最新版本的依赖项？](https://stackoverflow.com/questions/30571/how-do-i-tell-maven-to-use-the-latest-version-of-a-dependency)）

# c# - XML 反序列化：对象具有默认值

> ID：11664132
> 
> 赞同：1
> 
> 时间：2012-07-26T07:05:58.497
> 
> 标签：c#, .net, xml, serialization

我的 XML 序列化程序有一个奇怪的行为。
在读取 XML 并将其反序列化为对象后，所有属性都设置为其默认值，而不是 xml 文件中声明的值。
序列化程序不会抛出异常并正常运行。xml 文件格式正确并适合类结构。
任何人都知道这是怎么回事，或者我怎么能找到问题的根源？
谢谢

编辑：我没有告诉你整个故事。问题是，我得到的 XML 来自另一个组件。我能够反序列化 XML 文件，现在我得到了不同的格式。由于该文件大约有 3000 行，我无法发布整个代码。但这里有区别：可
反序列化：

`<?xml version="1.0" encoding="utf-8"?>`
`<rootElem xmlns:cfg="namespace1" xmlns:office="namespace2" xmlns="namespace3">`
`<Prop1 xmlns="">6</Prop1>`
`<Prop2 xmlns="">string</Prop2>`
`</rootElem>`

不可反序列化

`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>`
`<rootElem xmlns:cfg="namespace1" xmlns:office="namespace2" xmlns="namespace3">`
`<Prop1>6</Prop1>`
`<Prop2>string</Prop2>`
`</rootElem>`

我真的不明白为什么我可以解组第一个示例，因为**每个**元素中都有 xmlns 标记，为什么我不能解组第二个示例......

***edit2：***刚刚意识到只有顶级元素有这些奇怪的 xmlns="" 属性。但是 C# 类声明与所有其他类没有什么不同……这很奇怪。

C# 类是这样的：

```
using namespace1;

namespace namespace3
{
  [System.SerializableAttribute()]
  [System.ComponentModel.DesignerCategoryAttribute("code")]
  [System.Xml.Serialization.XmlTypeAttribute(Namespace="namespace3")]
  [System.Xml.Serialization.XmlRootAttribute(Namespace="namespace3", IsNullable=true)]
  public partial class rootElem: BaseObject
  {
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public int Prop1
    {
      //...
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:08:32.527

一个具体的例子（都是 c# ad xml）在这里会有很长的路要走。最有可能是以下之一：

*   名称不是 xml 和 c# 之间的精确（区分大小写）匹配（允许通过属性等进行名称覆盖）
*   xml 属性/元素之间存在混淆
*   xml 命名空间存在差异（通常存在于 xml 中而在 c# 中缺失）

* * *

通过您的编辑，它变得更加清晰。XML 命名空间**非常**重要；`<foo xmlns="abc"/>`并且`<foo/>`完全不相关。此外，xml 命名空间是**继承**的，所以在：

```
<rootElem xmlns:cfg="namespace1" xmlns:office="namespace2" xmlns="namespace3">
<Prop1>6</Prop1>
<Prop2>string</Prop2>
</rootElem> 
```

正是这种情况，`Prop1`并且`Prop2`位于`namespace3`它们从父级继承的命名空间中。为了让 c# 清楚地知道您希望它们位于子命名空间（而不是空命名空间）中，请**告诉它**：

```
[Serializable]
[DesignerCategory("code")]
[XmlType(Namespace = Namespace3)]
[XmlRoot(Namespace = Namespace3, IsNullable = true)]
public partial class rootElem
{
    private const string Namespace3 = "namespace3"; // to avoid repetition

    [XmlElement(Namespace = Namespace3)]
    public int Prop1 { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:50:38.233

经过进一步调查，我能够找到问题所在。我仍然不明白为什么序列化程序的行为方式如此。据我了解命名空间的声明你必须定义没有前缀的“xmlns”属性来设置默认命名空间（[W3Schools](http://www.w3schools.com/xml/xml_namespaces.asp)）。正如我的问题中所述，它被定义（除了其他命名空间）：

```
<rootElem xmlns:cfg="namespace1" xmlns:office="namespace2" xmlns="namespace3"> 
```

由于根元素的所有直接子元素都（再次）声明了 xmlns 属性，我的解释是找不到默认命名空间。
所以我所做的是明确地为根元素定义一个命名空间，以便像这样生成根元素：

```
<root:rootElem xmlns:cfg="namespace1" xmlns:office="namespace2" xmlns:root="namespace3"> 
```

瞧，正确生成了 xml（从直接子项中删除了 xmlns 属性）并且序列化程序能够读取数据。
但仍然存在一些问题：

*   为什么序列化程序没有使用默认命名空间正确生成 xml？
*   如果序列化程序无法读取数据并将其放入我的实例中，我预计会出现异常（为什么要创建一个“空”实例）

# sql - MS Sql 服务器中的累计总数

> ID：11664142
> 
> 赞同：-1
> 
> 时间：2012-07-26T07:06:31.477
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

> **可能重复：**
> [在 SqlServer 中计算运行总计](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver)

我需要获取 ms-sql 服务器中一列的累积（运行）总数。即如果有一个名为“Marks”的列，那么对应于每一行的累积总和将是当前行和之前行的总和。我们可以在不使用连接的情况下获得结果吗？因为我的查询很大。

我已经包含了一个示例表和数据：

```
CREATE TABLE "SCORE_CHART" 
   (    
        "STUDENT_NAME" NVARCHAR(20), 
        "MARKS" INT
   )

INSERT INTO SCORE_CHART (STUDENT_NAME, MARKS) VALUES ('STUD1', 95);
INSERT INTO SCORE_CHART (STUDENT_NAME, MARKS) VALUES ('STUD2', 90);
INSERT INTO SCORE_CHART (STUDENT_NAME, MARKS) VALUES ('STUD3', 98);

SELECT STUDENT_NAME, MARKS FROM SCORE_CHART; 
```

预期结果： ![在此处输入图像描述](../Images/d935c7587dc7ae8a86290df8f75720a5.png)

在 oracle 中很容易写成：

```
SELECT 
  STUDENT_NAME,
  MARKS,
  SUM(MARKS) OVER (ORDER BY STUDENT_NAME) CUM_SUM
FROM SCORE_CHART
ORDER BY STUDENT_NAME; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T07:11:50.553

从 2012 年起支持相同的查询。在旧版本中，有几种方法。请参阅此[http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals](http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:49:54.303

尝试这个：

你可以通过加入同一个表本身来获得累积和

```
SELECT S1.STUDENT_NAME, S1.MARKS ,sum(S2.MARKS) CUM_SUM
FROM SCORE_CHART S1 join SCORE_CHART S2
on S1.STUDENT_NAME>=S2.STUDENT_NAME
group by S1.STUDENT_NAME, S1.MARKS 
order by S1.STUDENT_NAME, S1.MARKS 
```

[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/bb758/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:36:31.547

你说不加入，那申请呢？;)

```
SELECT STUDENT_NAME, MARKS, running.total
FROM SCORE_CHART a
cross apply 
(
    select SUM(marks) total 
    from score_chart b
    where b.student_name <= a.student_name
) running
ORDER BY STUDENT_NAME; 
```

用student_name上的索引速度应该没问题！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T09:10:04.077

检查递归 CTE 的查询。

```
;with CTE as (select ROW_NUMBER() over (order by (select 0)) as id,STUDENT_NAME,MARKS from SCORE_CHART)
,CTE1 as (

select id,STUDENT_NAME,marks,marks as CUM_SUM from CTE where id=1
UNION ALL
select c.id,c.STUDENT_NAME,c.marks,c.marks+c1.CUM_SUM as CUM_SUM from CTE1 c1 inner join CTE c on c.id-1=c1.id)
select * from CTE1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T07:40:06.107

只是进行连接似乎并不能保证顺序，但得出的最终答案是好的：

```
select 
  x.STUDENT_NAME
  , sum(y.marks) marks
from 
    SCORE_CHART x
       join SCORE_CHART y
          on x.STUDENT_NAME <= y.STUDENT_NAME
group by x.STUDENT_NAME
order by x.STUDENT_NAME 
```

只是看起来没有加入规则 - 会重新思考

**编辑**- 现在运行正常：[LIVE FIDDLE HERE](http://sqlfiddle.com/#!3/b568a/2)

创建数据

```
CREATE TABLE "SCORE_CHART"     
(             
  "STUDENT_NAME" NVARCHAR(20),          
  "MARKS" INT    
)  
INSERT INTO SCORE_CHART (STUDENT_NAME, MARKS) 
VALUES 
('STUD1', 95),
('STUD2', 90),
('STUD3', 98) 
```

使用递归 CTE：

```
 ;WITH 
    init_cte(row,STUDENT_NAME,MARKS) 
    AS
        (
        SELECT 
        ROW_NUMBER() OVER (ORDER BY STUDENT_NAME),
        STUDENT_NAME,
        MARKS
        FROM SCORE_CHART
        )
    ,MinMax_cte(MinRow,MaxRow)  AS (SELECT MIN(row),MAX(row) FROM init_cte)

    ,recursive_cte (row,STUDENT_NAME,MARKS,RUNNING_MARKS) AS 
      (
         SELECT row,STUDENT_NAME,MARKS,MARKS 
            FROM init_cte 
            WHERE row = (SELECT MinRow FROM  MinMax_cte) 
         UNION ALL
         SELECT Y.row,y.STUDENT_NAME,y.MARKS,x.RUNNING_MARKS + y.MARKS
            FROM recursive_cte x
            INNER JOIN init_cte y
                ON y.row = x.row + 1
            WHERE y.row <= (SELECT [MaxRow] from MinMax_cte)
      )
SELECT * FROM recursive_cte 
```

正如在对您的评论中提到的，OP 有一个类似的问题[HERE ON SO](https://stackoverflow.com/questions/860966/calculate-a-running-total-in-sqlserver) 在那个问题中，Sam Saffron 提出了一种非常优雅的方式来使用`UPDATE`. 这适用于您的数据：

使用上面创建的相同数据，但使用 UPDATE 技巧：

```
CREATE TABLE #t ( ROW int, STUDENT_NAME NVARCHAR(20) , MARKS int, MARKS_RUNNING int) 
INSERT INTO #t
SELECT
        ROW_NUMBER() OVER (ORDER BY STUDENT_NAME),
        STUDENT_NAME, 
        MARKS,
        0
FROM SCORE_CHART

DECLARE @total int  
SET @total = 0 
UPDATE #t SET marksrunning = @total, @total = @total + MARKS   

SELECT * FROM #t 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T07:14:37.577

使用递归 CTE 来实现这一点。

# ibatis - 尝试在 MyBatis 中读取多个游标值并在 DTO 中设置这些值但出现错误

> ID：11664143
> 
> 赞同：0
> 
> 时间：2012-07-26T07:06:32.170
> 
> 标签：ibatis, mybatis

我试图在 MyBatis 中读取多个游标值并在 DTO 中设置这些值，但出现错误。我的 SP 返回 3 个游标，每个游标值我试图用一个 DTO 映射。代码如下

**AccountDSSpMapper.xml**

```
 <resultMap type="com.Role_Test" id="Role">
            <result property="roleID" column="Role_ID" />
            <result property="accountID" column="Account_ID" />
            <result property="roleName" column="Role_Name" />
            <result property="roleDesc" column="Description" />
 </resultMap>
 <resultMap type="com.Feature_Test" id="Feature">
            <result property="featureID" column="Feature_ID" />
            <result property="featureName" column="Feature_Name" />
 </resultMap>
  <resultMap type="com.Privilege_Test" id="Privilege">
            <result property="privilegeID" column="Privilege_ID" />
            <result property="privilegeName" column="Privilege_Name" />
 </resultMap>

 <select id="roleResults" resultMap="Role,Feature,Privilege" statementType="CALLABLE">
            { call Get_RoleDetails(#{accountID, mode=IN, jdbcType=INTEGER}, #{roleID, mode=IN,     jdbcType=INTEGER})}
 </select> 
```

**AccountDSSpMapper.java**

```
 @MapKey("roleResults")
 public List<List<ArrayList<Object>>> getRoleDetails(Integer accountID, Integer roleID); 
```

> 异常 - java.lang.IllegalArgumentException：映射语句集合不包含 com.AccountDSSpMapper.getRoleDetails 的值

有人可以建议这里有什么问题或正确的方法来处理 MyBatis 中的多个光标值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:02:41.087

得到这个工作

```
<select id="getRoleDetails" resultMap="Role,Feature,Privilege" statementType="CALLABLE">
        { call Get_RoleDetails(#{accountID, mode=IN, jdbcType=INTEGER}, #{roleID, mode=IN,         jdbcType=INTEGER})}
 </select>

 public List<List<ArrayList<Object>>> getRoleDetails(Integer accountID, Integer roleID); 
```

# c# - SQLite 外键未激活

> ID：11664146
> 
> 赞同：4
> 
> 时间：2012-07-26T07:06:49.050
> 
> 标签：c#, .net, entity-framework-4, sqlite, system.data.sqlite

我正在使用实体框架工作，而休闲是我的创建上下文方法，每当调用它时我都启用了外键，但令我惊讶的是值变量始终为 0

```
private static DataBaseEntity CreateContext()
{
    var context = new DataBaseEntity("name=DataBaseEntity");
    context.ExecuteStoreCommand("PRAGMA foreign_keys = ON");

    var value = context.ExecuteStoreCommand("PRAGMA foreign_keys");
    return context;
} 
```

我想对删除功能进行级联，但由于未设置外键约束，我无法获得它

我将 SQLite 3.6.23.1 与 ado.net 提供程序一起使用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T14:48:03.633

仅在数据库连接的生命周期内启用外键。默认情况下，只要您通过调用 、 或其他方式与数据库交互，就会打开`ObjectContext`一个连接并关闭它。如果您不想要这种行为，那么您必须手动打开连接，并在完成对象后最好将其关闭。`SaveChanges()``ExecuteStoreCommand()``ObjectContext`

我自己更喜欢在连接字符串中打开外键，这样我就不必担心上述任何问题。

例如，在您的 app.config 文件中，您将有类似这样的内容（查找属性`foreign keys=True`的末尾）：`connectionString`

```
<configuration>
  <connectionStrings>
    <add name="DataBaseEntity"
         connectionString="metadata=res://*/m.csdl|res://*/m.ssdl|res://*/m.msl;provider=System.Data.SQLite;provider connection string=&quot;data source=C:\foo.db;foreign keys=True&quot;" 
         providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

我认为这应该适用于您的 ADO .Net 提供商，但我不能做出承诺。如果您升级到[SQLite 网站上提供的最新版本](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)，您会增加它正常工作的几率。

# .net - 如何在 Orchard CMS 中显示形状的一部分

> ID：11664151
> 
> 赞同：2
> 
> 时间：2012-07-26T07:07:03.990
> 
> 标签：.net, c#-4.0, razor, orchardcms

在自己为果园创建的管理主题中的 Layout.cshtml 文件中，它包含以下用于显示管理 UI 标题的代码：

```
 @if (Model.Header != null) {
   <div id="header" role="banner">
      @Zone(Model.Header)
   </div>
 } 
```

考虑到`Model.Header`包含两个显示部分：`User.cshtml`和`Header.cshtml`。现在我想做的是永久显示标题，换句话说，我只想显示形状中`User.cshtml`存在的部分。`Model.Header`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:01:41.997

Bertrand 的回答是针对前端主题的，但正如您所指的自定义管理主题，我`Layout.cshtml`在 TheAdmin 中查看过。

就在您发布的代码段之前，有以下几行构建了页眉和页脚区域：

```
Model.Header.Add(Display.Header());

Model.Header.Add(Display.User(CurrentUser: WorkContext.CurrentUser));
Model.Footer.Add(Display.OrchardVersion()); 
```

删除第一行，标题区域将只包含用户形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:44:51.510

只是不要一开始就添加它。将用户形状添加到标题区域的代码就在 layout.cshtml 模板中。我不知道您使用的是什么主题，但在主题机中，就是这行代码：

```
WorkContext.Layout.Footer.Add(New.User(), "10") 
```

# apache - 使用 sed 取消注释 httpd.conf 中的一行

> ID：11664152
> 
> 赞同：5
> 
> 时间：2012-07-26T07:07:05.077
> 
> 标签：apache, bash, shell, config, zsh

我正在尝试编写一个小 shell 脚本来完成在新安装的 Mountain Lion 上启用 apache 和 php 所需的步骤。我坚持的步骤是进入`/etc/apache2/httpd.conf`并取消注释这一行：`#LoadModule php5_module libexec/apache2/libphp5.so`

从到目前为止的谷歌搜索来看，我认为 sed 是这样做的方式，但我无法获得正确的语法。我试过这个：

```
cd /etc/apache2
sudo sed -i '/s/#LoadModule php5_module libexec\/apache2\/libphp5.so/LoadModule php5_module libexec\/apache2\/libphp5.so' httpd.conf 
```

我认为它将用未注释的行替换注释行（转义斜杠）。但是当我运行它时，我只会收到以下消息，并且文件中没有结果：

`sed: 1: "httpd.conf": extra characters at the end of h command`

我对这种类型的脚本不了解，我该如何完成这项任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T07:20:34.297

您可以使用逗号。

```
sed -i 's,#LoadModule php5_module libexec/apache2/libphp5.so,LoadModule php5_module libexec/apache2/libphp5.so,g' 
```

或者

```
sed -i 's,#\(LoadModule php5_module libexec/apache2/libphp5.so\),\1,g' foo.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:00:02.903

还有另一种方式：

```
sudo sed -i '/#LoadModule php5_module libexec\/apache2\/libphp5.so/s/#//' httpd.conf 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:18:52.110

删除第一个`/`：

```
sed -i 's/...' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:23:51.097

正确的语法是

```
's/#LoadModule php5_module libexec\/apache2\/libphp5.so/LoadModule php5_module libexec\/apache2\/libphp5.so/' 
```

斜杠 / 可以由另一个字符（例如 - ）更改以避免转义斜杠 dot 。必须在模式（左侧）中转义，否则表示任何字符

```
's-#LoadModule php5_module libexec/apache2/libphp5\.so-LoadModule php5_module libexec/apache2/libphp5.so-' 
```

# iphone - 在一个查询中从两个表中删除

> ID：11664157
> 
> 赞同：-1
> 
> 时间：2012-07-26T07:07:13.353
> 
> 标签：iphone, sqlite

我有两个表图像，注意两个都有 Noteid 列，所以如何在两个表中删除 Noteid = 2...我的查询是`"delete from Note,Images where Noteid = "2""`但它不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:12:46.603

```
delete from Note, Images where Noteid = 2 
```

这应该适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:22:36.333

您需要为此创建一个触发器。

```
//This will work for you open your databse in any database managers and create this trigger
CREATE TRIGGER Images_delete AFTER DELETE ON Note
FOR EACH ROW
BEGIN
    DELETE FROM Images WHERE Noteid = old.Noteid;
END 
```

您只需要从 Note 表中删除即可。

欲了解更多信息，请阅读此处

[http://www.sqlite.org/lang_createtrigger.html](http://www.sqlite.org/lang_createtrigger.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:14:36.107

您必须编写如下两个查询才能从两个表中删除

```
 DELETE FROM Note WHERE Noteid = '2';
  DELETE FROM Images WHERE Noteid  = '2'; 
```

这可能对你有用。

# java - 基于输入参数标准的 Spring 安全授权

> ID：11664158
> 
> 赞同：9
> 
> 时间：2012-07-26T07:07:18.020
> 
> 标签：java, spring, security, spring-security, authorization

我有一个场景，我需要根据用户的权限和传递的输入参数的组合来授权用户。

这是当前的情况

```
public void bookTicket(String bookingType)
    {
    if (bookingType == "AIR"){
         bookAirTicket();
    }else{
         bookBusTicket();
    }
    }

@PreAuthorize("hasRole('BOOK_AIR')")
private void bookAirTicket(){
}

@PreAuthorize("hasRole('BOOK_BUS')")
private void bookBusTicket(){
} 
```

我们可以有一些像

```
@PreAuthorize(("hasRole('BOOK_AIR')" AND bookinType='AIR') OR ("hasRole('BOOK_BUS')"  AND bookinType='BUS'))
public void bookTicket(String bookingType)
    {
    if (bookingType == "AIR"){
         bookAirTicket();
    }else{
         bookBusTicket();
    }
    } 
```

基本上我需要基于输入参数的授权

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-28T12:36:41.793

是的你可以。参数可以作为 Spring EL 变量访问。事实上，参考手册给出[了几个使用方法参数的例子](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#el-pre-post-annotations)。该类需要在存在调试符号的情况下进行编译（通常是这种情况）。

请注意，注释值是单个表达式字符串：

```
"(hasRole('BOOK_AIR') and #bookinType == 'AIR') or (hasRole('BOOK_BUS') and #bookinType='BUS')" 
```

在实践中，使用复杂的表达式相当容易出错。您还可以使用更简单的表达式，例如

```
"@accessChecker.check('book', #bookinType)" 
```

您的应用程序上下文中的 bean 在哪里`accessChecker`具有“检查”方法，该方法根据是否允许提供的操作信息返回 true 或 false（您可以通过自己访问安全上下文来检查当前用户的角色 - 您会发现在别处讨论过关于 SO）。

您也可以考虑编写自己的功能`AccessDecisionManager`或`AccessDecisionVoter`在那里插入功能，但这需要更多的内部知识。

# dynamics-crm-2011 - Dynamics CRM 2011：将 CrmSvcUtil.exe 与基于 IFD 声明的身份验证结合使用

> ID：11664159
> 
> 赞同：2
> 
> 时间：2012-07-26T07:07:19.033
> 
> 标签：dynamics-crm-2011, dynamics-crm, claims-based-identity

我们有一个带有 IFD + 基于声明的身份验证设置的 Dynamics CRM 2011 单服务器开发环境。

努力运行 CrmSvcUtil 命令而没有收到以下“拒绝访问”错误。我们以管理员身份运行该实用程序，他也是 Dynamics CRM 2011 中的系统管理员。

我们正在运行的命令是：

```
CrmSvcUtil.exe /url:https://myorg.deepspace9.com:444/myorg/XRMServices/2011/Organization.svc /out:MyOutputFile.cs /username:"deepspace9\administrator" /password:password*1 
```

我们最终得到了错误：

```
CrmSvcUtil : CRM Service Utility [Version 5.0.9690.2165]
c 2011 Microsoft Corporation.  All rights reserved.

CrmSvcUtil.exe Error: 0 : Exiting program with exit code 2 due to exception : System.ServiceModel.Security.SecurityAccessDeniedException: Access is denied.

Server stack trace: 
   at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.Xrm.Sdk.IOrganizationService.Execute(OrganizationRequest request)
   at Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.ExecuteCore(OrganizationRequest request)
   at Microsoft.Crm.Services.Utility.SdkMetadataProviderService.RetrieveEntities(IOrganizationService service)
   at Microsoft.Crm.Services.Utility.SdkMetadataProviderService.Microsoft.Crm.Services.Utility.IMetadataProviderService.LoadMetadata()
   at Microsoft.Crm.Services.Utility.CrmSvcUtil.Run()
   at Microsoft.Crm.Services.Utility.CrmSvcUtil.Main(String[] args) 
```

我们还尝试在以下位置运行说明：http: [//community.adxstudio.com/products/adxstudio-portals/developers-guide/knowledge-base/crmsvcutilexe/claims-based-authentication-workaround-for-sdk-ver/](http://community.adxstudio.com/products/adxstudio-portals/developers-guide/knowledge-base/crmsvcutilexe/claims-based-authentication-workaround-for-sdk-ver/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:21:07.853

设法让它工作。[按照http://blog.thinketg.com/blog/ben-klopfer/strongly-typed-code-file-generation-with-crmsvcutilexe-for-crm-2011-ifd-configurations-code](http://blog.thinketg.com/blog/ben-klopfer/strongly-typed-code-file-generation-with-crmsvcutilexe-for-crm-2011-ifd-configurations-code)上的说明进行操作

我不得不运行 HTML 解码来摆脱 HTML 标签，而且我没有费心创建批处理文件 - 我只是直接运行命令：

```
CrmSvcUtil.exe /metadataproviderservice:"MetadataProvider.IfdMetadataProviderService, MetadataProvider" /codecustomization:"Microsoft.Xrm.Client.CodeGeneration.CodeCustomization, Microsoft.Xrm.Client.CodeGeneration" /url:"https://myorg.deepspace9.com:444/XRMServices/2011/Organization.svc" /out:"outputOrganizationXrm.cs" /namespace:OrganizationXrm /serviceContextName:XrmServiceContext /serviceContextPrefix:Xrm /u:"deepspace9\administrator" /p:password*1 
```

# jquery - 如何使用 1 个 jquery 实现两个功能

> ID：11664163
> 
> 赞同：0
> 
> 时间：2012-07-26T07:07:28.770
> 
> 标签：jquery

我是 jquery 的新手.....我对下面给出的代码有疑问.....如果我单击 btn，则相应的父 div 只应该移动。检查下面给出的代码。提前致谢。

```
<script type="text/javascript"> 
     $(document).ready(function(e) { 
         $('.btn').click(function(){ 
             $('.aaa').animate({'left':'500'},500); 
             return false;
         }); 
     });
</script> 
</head> 
<body> 
   <div class="cnt">
      <div class="aaa" style="width:50px; height:50px; background-color:red; position:relative"></div>
      <a href="#" class="btn">Btn</a>
   </div>
   <div class="cnt">
      <div class="aaa" style="width:50px; height:50px; background-color:red; position:relative"></div>
      <a href="#" class="btn">Btn</a></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:13:53.830

```
 $(document).ready(function(e) { 
     $('.btn').click(function(){ 
         // the siblings .aaa of this button.
         $(this).siblings('.aaa').animate({'left':'500'},500); 
         return false;
     }); 
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:14:49.340

```
$('.btn').click(function(){ 
  $('.aaa',this).animate({'left':'500'},500); 
  return false; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:16:56.670

CSS 属性 LEFT 应该有一个包含 PX 后缀的值

```
$('.aaa').animate({'left':'500'},500); return false;}); }); 
```

尝试将其更新为：

```
$('.aaa').animate({'left':'500px'},500)}); return false;}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:12:49.873

试试这样：

```
$(this).prev('.aaa').animate({'left':'500'},500); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T07:13:46.583

您可以使用[prev()](http://api.jquery.com/prev/)来匹配单击按钮的上一个兄弟，这将是适当的`<div>`元素：

```
 $(".btn").click(function() { 
     $(this).prev().animate({
         left: "500px"
     }, 500); 
     return false;
 }); 
```

# c++ - 我怎样才能弄清楚为什么特定版本的库在依赖项中？

> ID：11664165
> 
> 赞同：2
> 
> 时间：2012-07-26T07:07:41.343
> 
> 标签：c++, linux, ubuntu, glibc, libc

我正在 ubuntu 12.04 上使用 cmake 构建一个大型 C++ 项目，然后获取生成的二进制包并尝试在 ubuntu 11.04 上运行它。但是程序失败说它需要 glibc 2.14 版，但只能找到 2.13 版。我怎样才能确切地知道为什么需要 glibc=>2.14？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:38:08.063

与大多数库不同，glibc 对其符号进行版本化。每个符号都标有一个值（例如“GLIBC_2.3.4”），表示上次更改其接口的库版本。这允许库包含给定符号的多个版本，并支持针对旧版本编译的二进制文件，同时保留进化的能力。您可以使用 来查看此详细信息`objdump -T /lib/libc.so.6`。

基本上，您的应用程序中的某些内容与自 11.04 以来更改的符号相关联。试试`objdump -T`你的二进制文件，看看它在寻找什么标签。

但从广义上讲，向后兼容性在 Linux 中并不像那样工作。如果你想在旧软件上运行某些东西，你应该在旧软件上构建它。可以在更新的发行版上设置向后兼容的工具链，但这不是默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:13:35.083

当您构建您的 C++ 项目时，它将链接到您安装的 12.04 上的 glibc 库版本。构建命令中的链接器选项是什么？

在不确切知道您正在构建什么的情况下，我会说您最好在 11.04 上构建然后在 12.04 上运行。

# android - Android：如何在 AlertDialog 中包含带有图像的复选框列表

> ID：11664167
> 
> 赞同：3
> 
> 时间：2012-07-26T07:07:49.033
> 
> 标签：android, android-alertdialog

![在此处输入图像描述](../Images/25df68bf54d1ab7cfa0dc24731d67e91.png)

我需要像上图一样的 AlertDialog 但**带有复选框**

我检查了这篇[文章](https://stackoverflow.com/questions/3211927/android-image-inside-single-select/3281239#3281239)，并创建了以下代码

**动物文本.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:padding="10dp" android:layout_height="fill_parent"    android:layout_width="fill_parent" android:orientation="horizontal"     android:id="@+id/layout_root" xmlns:android="http://schemas.android.com/apk/res/android">

<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/miastorow_text"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple"
    android:paddingLeft="6dip"
    android:paddingRight="6dip"
    android:textColor="#000"/>
</LinearLayout> 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

**ImageActivity.java**

```
package com.imagetest;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.DialogInterface.OnClickListener;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckedTextView;
import android.widget.ListAdapter;

public class ImageActivity extends Activity {
    /** Called when the activity is first created. */
    private static final String TAG = "HelloWorld";
    Animal[] _animals;
    Button btnStart;
    public static int count =0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.out.println("on create");
        setContentView(R.layout.main); 
        loadAnimals();
        btnStart = (Button)findViewById(R.id.button1);
        final Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                 System.out.println("##########");
                 handlePush(v);
            }
        });
        //btnStart.setOnClickListener((android.view.View.OnClickListener) btnStartListener);
        System.out.println("on create after main");
        System.out.println("on create before load animals");

    }   

    private void loadAnimals() {
         System.out.println("########## 1  ");
        _animals = new Animal[3];

        // define the display string, the image, and the value to use
        // when the choice is selected
        _animals[0]  = new Animal( "dog", getImg( R.drawable.dog),"dog_sitting" );
        _animals[1]  = new Animal( "cat", getImg( R.drawable.cat),"cat_sitting" );
        _animals[1]  = new Animal( "bird", getImg( R.drawable.bird),"bird_sitting" );

    }

    private Drawable getImg( int res )
    {
         System.out.println("########## 3  ");
        Drawable img = getResources().getDrawable( res );
        img.setBounds( 0, 0, 48, 48 );
        return img;
    }

    public void handlePush( View target ) {
     System.out.println("##########  button clicked handle push");
    // define the list adapter with the choices
        ListAdapter adapter = new AnimalAdapter( this, _animals );

        final AlertDialog.Builder ad = new AlertDialog.Builder(this);
        // define the alert dialog with the choices and the action to take
        // when one of the choices is selected
        ad.setSingleChoiceItems( adapter, -1, new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                // a choice has been made!
                String selectedVal = _animals[which].getVal();
                Log.d(TAG, "chosen " + selectedVal );
                dialog.dismiss();
            }
        });
        ad.show();
   }

    static class AnimalAdapter extends ArrayAdapter<Animal> {

        private static final int RESOURCE = R.layout.animal_text;
        private LayoutInflater inflater;

        static class ViewHolder {
            CheckedTextView nameTxVw;
        }

        //@SuppressWarnings("unchecked")
        public AnimalAdapter(Context context, Animal[] objects)
        {
            super(context, RESOURCE, objects);
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            count=count+1;
             System.out.println("################ "+count+" position  "+position+" parent "+parent);
            ViewHolder holder;
            System.out.println("##########  getview outside if 1 "+count);
            if ( convertView == null ) {
                 System.out.println("##########  getview if 1 "+count);
                // inflate a new view and setup the view holder for future use
                convertView = inflater.inflate( RESOURCE, null );

                holder = new ViewHolder();
                holder.nameTxVw =
                    (CheckedTextView) convertView.findViewById(R.id.miastorow_text);
                convertView.setTag( holder );
            }  else {
                System.out.println("##########  getview else 1 "+count+"  convert "+convertView.toString());
                // view already defined, retrieve view holder
                holder = (ViewHolder) convertView.getTag();
            }

            Animal cat = (Animal) getItem( position );
            if ( cat == null ) {
                System.out.println("##########  getview if 2");
                //Log.e( TAG, “Invalid category for position: ”+position);
            }
            holder.nameTxVw.setText( cat.getName() );
            holder.nameTxVw.setCompoundDrawables( cat.getImg(), null, null, null );

            return convertView;
        }
    }

    class Animal {
        private String   _name;
        private Drawable _img;
        private String   _val;

        public Animal( String name, Drawable img, String val ) {

             System.out.println("##########  2");
            _name = name;
            _img = img;
            _val = val;
        }

        public String getName() {
            return _name;
        }

        public Drawable getImg() {
            return _img;
        }

        public String getVal() {
            return _val;
        }
    }    

} 
```

我得到一个**空指针异常**..我不知道如何解决它，因为我是 Android 新手..请尽快帮助我。

我的logcat详细信息如下

```
07-26 12:14:12.436: DEBUG/AndroidRuntime(13275): Shutting down VM
07-26 12:14:12.436: WARN/dalvikvm(13275): threadid=1: thread exiting with uncaught exception (group=0x400205a0)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275): FATAL EXCEPTION: main
07-26 12:14:12.456: ERROR/AndroidRuntime(13275): java.lang.NullPointerException
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at com.imagetest.ImageActivity$AnimalAdapter.getView(ImageActivity.java:130)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.AbsListView.obtainView(AbsListView.java:1409)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1264)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.ListView.onMeasure(ListView.java:1127)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.View.measure(View.java:8526)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3228)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.View.measure(View.java:8526)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3228)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at com.android.internal.widget.WeightedLinearLayout.onMeasure(WeightedLinearLayout.java:60)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.View.measure(View.java:8526)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3228)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.View.measure(View.java:8526)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3228)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.View.measure(View.java:8526)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.ViewRoot.performTraversals(ViewRoot.java:902)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.os.Looper.loop(Looper.java:150)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at android.app.ActivityThread.main(ActivityThread.java:4277)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at java.lang.reflect.Method.invokeNative(Native Method)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at java.lang.reflect.Method.invoke(Method.java:507)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-26 12:14:12.456: ERROR/AndroidRuntime(13275):     at dalvik.system.NativeStart.main(Native Method)
07-26 12:14:12.476: WARN/ActivityManager(124):   Force finishing activity com.imagetest/.ImageActivity
07-26 12:14:12.976: WARN/ActivityManager(124): Activity pause timeout for HistoryRecord{4081ff48 com.imagetest/.ImageActivity}
07-26 12:14:13.056: INFO/CarouselTimeLog(259): onStart() finish: 1343285053068 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:59:53.183

//你复制粘贴出错了

```
 _animals[0]  = new Animal( "dog", getImg( R.drawable.dog),"dog_sitting" );
_animals[1]  = new Animal( "cat", getImg( R.drawable.cat),"cat_sitting" );
_animals[1]  = new Animal( "bird", getImg( R.drawable.bird),"bird_sitting" ); 
```

//改变如下 _animals[2] = new Animal( "bird", getImg( R.drawable.bird),"bird_sitting" );

// 删除下面的任何一行

```
 btnStart = (Button)findViewById(R.id.button1);
 final Button button = (Button) findViewById(R.id.button1); 
```

# javascript - MongoDB 的 map reduce javascript 有参考吗？

> ID：11664180
> 
> 赞同：1
> 
> 时间：2012-07-26T07:08:49.693
> 
> 标签：javascript, mongodb, nosql

我的文件中有一些日期并试图操纵它们。我期待 JavaScript 支持标准日期方法，例如`toISOString()`，但令我惊讶的是，我得到了一个错误`Database command 'mapreduce' failed: (assertion: 'invoke failed: JS Error: TypeError: entry.start.toISOString is not a function nofile_b:0'; assertionCode: '9004'; errmsg: 'db assertion failure'; ok: '0.0').`

如何找出 Map Reduce 运行时环境支持的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:51:41.157

我发现调试 map reduce 的最简单方法是分解组件并使用控制台。

不幸的是，在嵌入式蜘蛛猴引擎中似乎没有 toISOString

```
> d = new Date()
> d.to<tab-complete>
  d.toDateString(        d.toLocaleString(      d.toTimeString(
  d.toGMTString(         d.toLocaleTimeString(  d.toUTCString(
  d.toLocaleDateString(  d.toString(            d.tojson( 
```

所以你必须自己生成，我使用 to json 和使用 substr 作弊：

```
> d.tojson().substr(9, 24)
  2012-07-26T09:42:11.403Z 
```

# wpf - 如何用条件填充WPF中2条折线之间的区域

> ID：11664184
> 
> 赞同：1
> 
> 时间：2012-07-26T07:09:06.227
> 
> 标签：wpf, intersection, polyline

我正在开发一个图表应用程序，其中有 2 条折线，例如折线 A（在下图中显示为红色线）和折线 B（在下图中显示为蓝色线）。

![例子](../Images/638463f9aa18a958eede48d7b3d4a2cd.png)

图表中可能有 2 个条件：

*   当红线从上方与蓝线相交然后停留在蓝线下方时，我想用一些颜色填充该区域。

*   当红线从下方与蓝线相交然后停留在蓝线上方时，我想用其他颜色填充该区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:25:35.340

没有做过这个，我可以想象你可以通过填充[路径](http://msdn.microsoft.com/en-us/library/ms615632)并以适当的方式设置它的[剪辑来做你想做的事情而无需太多的数学。](http://msdn.microsoft.com/en-us/library/system.windows.uielement.clip)

假设您用绿色填充红线下方的整个区域。因此，您将设置一个填充`Path`，其`Data`几何形状是一个封闭的多边形，由红线的所有点加上视口的两个下角点组成。在此基础上，`Path`您可以将该`Clip`属性设置为另一个封闭的多边形几何体，该几何体将由蓝线中的所有点加上视口的两个上方点组成。对于红色填充，您将再次执行相同的操作，但使用交换的折线。

直接的方法当然是找到交点，确定交点的方向，从上下线点加上适当的交点创建闭合多边形，并根据交点方向填充这些多边形。

祝你好运！

# python - python urllib2.urlopen(url) 进程块

> ID：11664185
> 
> 赞同：0
> 
> 时间：2012-07-26T07:09:18.837
> 
> 标签：python, urlopen

我正在使用`urllib2.urlopen()`并且我的进程被阻止

我知道`urllib2.urlopen()`有默认超时。

如何使通话不可阻止？

回溯是

```
(gdb) bt 
#0 0x0000003c6200dc35 in recv () from /lib64/libpthread.so.0 
#1 0x00002b88add08137 in ?? () from /usr/lib64/python2.6/lib-dynload/_socketmodule.so 
#2 0x00002b88add0830e in ?? () from /usr/lib64/python2.6/lib-dynload/_socketmodule.so 
#3 0x000000310b2d8e19 in PyEval_EvalFrameEx () from /usr/lib64/libpython2.6.so.1.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:04:06.393

**如果您的问题是您需要 urllib 才能完成阅读**

read() 操作是 Python 中的阻塞操作。

如果要创建异步请求

*   在非主线程中阅读[http://docs.python.org/library/threading.html](http://docs.python.org/library/threading.html)

*   使用`requests`库和异步请求[http://docs.python-requests.org/en/latest/user/advanced/#asynchronous-requests](http://docs.python-requests.org/en/latest/user/advanced/#asynchronous-requests)

**如果您的问题需要设置超时**

同样，使用`requests`上面提到的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:18:19.900

您可以尝试使用[`strace`](http://en.wikipedia.org/wiki/Strace)（或类似的）工具来找出阻止您的 python 脚本的实际*系统*调用是什么，例如在 linux 上：`$ strace python yourscript.py`

你的脚本.py：

```
from urllib2 import urlopen
urlopen("http://somesite.local/foobar.html") 
```

`$ strace python yourscript.py`

```
... lots of system call stripped ...
socket(PF_INET, SOCK_STREAM, IPPROTO_TCP) = 3
connect(3, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr("127.0.0.1")}, 16 
```

# solr - Solr 中的表达式排序

> ID：11664189
> 
> 赞同：0
> 
> 时间：2012-07-26T07:09:45.587
> 
> 标签：solr

我正在使用 solr 进行搜索。我需要执行一个表达式排序，这样：

> ORDER BY (IF(COUNTRY=1,100,0) + IF(AVAILABLE=2,1000,IF(AVAILABLE=1,60,0)) + IF (交货在 (5,6,7),100,IF (交货在(80,90),50,0))) DESC

谁能告诉我这怎么可能？

# objective-c - 给iphone中的tableview单元格提供超链接

> ID：11664192
> 
> 赞同：2
> 
> 时间：2012-07-26T07:09:56.037
> 
> 标签：objective-c, database, ipad, uitableview, hyperlink

我有表视图。在 tableview 单元格中，我有一些链接。我想打开那些链接。问题是表格视图单元格的内容来自数据库。那么如何给链接呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:59:50.657

我有一个 UITableViewCell 中的超链接解决方案。为此，创建一个具有`UITextView *txtView`. 然后在自定义单元格中添加此代码或更改界面中的属性：

```
txtView.editable = NO;
txtView.dataDetectorTypes = UIDataDetectorTypeLink; 
```

现在使用 UITableView 中的自定义单元格，因为链接将显示为超链接，双击它们将在 Safari 中打开

# c# - 带有惰性元数据的 Autofac

> ID：11664195
> 
> 赞同：2
> 
> 时间：2012-07-26T07:10:13.463
> 
> 标签：c#, metadata, lazy-loading, autofac

我试图了解 autofac 使用强类型元数据消费。

在[文档](http://code.google.com/p/autofac/wiki/Metadata#Consuming_Metadata "文档")中它说：

> 在 .NET 4.0 中，Autofac 支持 Meta 和 System.Lazy 类型来使用来自强类型接口的值：

但是 System 中没有需要两个类型参数的类型 Lazy，只有 Lazy。

我错过了什么吗？

我尝试完成以下任务：

```
IEnumerable<Meta<Lazy<IService>, IServiceTypMeta>> services 
```

这工作正常。元信息可以在服务实例化之前被使用。但是如果我正确理解文档应该能够写：

```
IEnumerable<Lazy<IService, IServiceTypMeta>> services 
```

在没有与 autofac 相关的 Meta 类的情况下完成相同的操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:15:51.140

它在 System.ComponentModel.Composition.dll 中。请参阅：[Lazy< T, TMetadata > 类](http://msdn.microsoft.com/en-us/library/dd986615%28v=vs.95%29.aspx)

# javascript - Javascript：输入框 - 首字母自动大写，但可以覆盖

> ID：11664196
> 
> 赞同：3
> 
> 时间：2012-07-26T07:10:19.573
> 
> 标签：javascript, jquery, input, capitalize

我有一个姓名输入框。我想在用户键入时自动大写名称的第一个字母，但允许用户覆盖对名称的更改，例如“de Salis”。

我[在这里](https://stackoverflow.com/questions/3046284/how-can-i-capitalize-the-first-letter-of-an-input)看到这对于 CSS 是不可能的，因为`text-transform:capitalize;`它将大写每个单词并且不能被覆盖。

处理程序可以在`.keyup`您键入时修复第一个字母，这里有很多解决方案[可以](https://stackoverflow.com/questions/2017456/with-jquery-how-do-i-capitalize-the-first-letter-of-a-text-field-while-the-user)做到这一点。

我看不到如何轻松覆盖原始大写。我想我需要一个标志，但如果该函数是一个可以附加到多个元素的函数，那么标志应该在哪里？我可以附加一个 DOM 元素作为标志，但这看起来很丑陋。

[在这里](http://jsfiddle.net/tpgHx/)可以找到非覆盖模型的小提琴。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:58:05.633

要让输入框只显示***第一个大写字母***，您可以`keyCode`直接使用 ，因为它始终为***大写***格式。

仅此一项就可以减轻对昂贵`regex`和`.replace()`使用方法的要求。

**jQuery：**

```
$('.auto').one('keyup', function(e) {
    $(this).val(String.fromCharCode(e.keyCode));
}); 
```

**参考：** [**jsFiddle**](http://jsfiddle.net/M4vS8/)

* * *

以下答案已修改为包括`Tab Key`要求，单击输入框内部并通过上下文菜单粘贴，使用键盘粘贴方法（Ctrl + V）并直接输入。它消除了角色`keyCodes`，因此承认了***国际支持。***jQuery 选择器是[**在这里**](https://stackoverflow.com/a/7106392/1195891)获得的。

**重新修订：** [**jsFiddle**](http://jsfiddle.net/XfaPn/1/)（*提交时不强制大写字母。*）

# ios - 在 iOS 上从 MP3 文件获取专辑插图

> ID：11664199
> 
> 赞同：2
> 
> 时间：2012-07-26T07:10:39.500
> 
> 标签：ios, audio, mp3, audiotoolbox

我正在尝试从用户添加到应用程序中的 mp3 文件中获取专辑插图。这是我正在使用的代码。

```
 NSURL * fileURL=[NSURL fileURLWithPath:filePath];
NSString *fileExtension = [[fileURL path] pathExtension];
if ([fileExtension isEqual:@"mp3"]||[fileExtension isEqual:@"m4a"])
{
    AudioFileID fileID  = nil;
    OSStatus err        = noErr;

    err = AudioFileOpenURL( (__bridge CFURLRef) fileURL, kAudioFileReadPermission, 0, &fileID );
    if( err != noErr ) {
        NSLog( @"AudioFileOpenURL failed" );
    }
    UInt32 id3DataSize  = 0;
    err = AudioFileGetPropertyInfo( fileID,   kAudioFilePropertyID3Tag, &id3DataSize, NULL );

    if( err != noErr ) {
        NSLog( @"AudioFileGetPropertyInfo failed for ID3 tag" );
    }
    NSDictionary *piDict = nil;
    UInt32 piDataSize   = sizeof( piDict );
    err = AudioFileGetProperty( fileID, kAudioFilePropertyInfoDictionary, &piDataSize, &piDict );
    if( err != noErr ) {
        NSLog( @"AudioFileGetProperty failed for property info dictionary" );
    }
    CFDataRef AlbumPic= nil;
    UInt32 picDataSize = sizeof(picDataSize);
    err =AudioFileGetProperty( fileID,   kAudioFilePropertyAlbumArtwork, &picDataSize, &AlbumPic);
    if( err != noErr ) {
        NSLog( @"Get picture failed" );
    }
    NSData* imagedata= (__bridge NSData*)AlbumPic;
    UIImage* image=[[UIImage alloc]initWithData:imagedata];
    NSString * Album = [(NSDictionary*)piDict objectForKey:
                        [NSString stringWithUTF8String: kAFInfoDictionary_Album]];
    NSString * Artist = [(NSDictionary*)piDict objectForKey:
                         [NSString stringWithUTF8String: kAFInfoDictionary_Artist]];
    NSString * Title = [(NSDictionary*)piDict objectForKey:
                        [NSString stringWithUTF8String: kAFInfoDictionary_Title]];
    NSLog(@"%@",Title);

    NSLog(@"%@",Artist);

    NSLog(@"%@",Album);

    NSLog(@"Artwork Image%@",image); 
```

以下代码`mp3`通过`id3`标签从文件中获取信息。对于始终为*Null*的艺术品图像，一切都将返回接受。我知道有一种方法可以做到这一点`kAudioFilePropertyAlbumArtwork`，但它永远不会奏效。

# c++ - C++ 中嵌套 C 结构的 offsetof()

> ID：11664201
> 
> 赞同：2
> 
> 时间：2012-07-26T07:10:45.320
> 
> 标签：c++, c, sockets, struct, offsetof

我正在尝试在 C++ (Linux) 中的一个套接字中添加一个套接字过滤器。在套接字过滤器中，我需要获取嵌套在另一个结构中的*struct fork_proc_event的偏移量。*定义如下所示（cn_proc.h）：

```
结构 proc_event {
    ...
    联合{
        ...
        结构 fork_proc_event {
            __kernel_pid_t parent_pid;
            ...
        } 叉子;
        ...
    } 事件数据；
    ...
};
```

在 CI 中会这样做：

`int off = offsetof(struct fork_proc_event, parent_pid);`

但是我正在用 C++ 开发。如果我尝试这样做：

`int off = offsetof(proc_event::fork_proc_event, parent_pid);`

我收到以下错误：

```
错误：预期的类型说明符
错误：预期的“，”
错误：在 ',' 标记之前应为 `)'
```

offsetof() 线应该如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T07:13:51.050

`offsetof`考虑一下宏的实现可能会如何进行可能会有所帮助。这是一个例子：

```
#define offsetof(TYPE, MEMBER) \
    ((uintptr_t)&(((TYPE*)0)->MEMBER)) 
```

换句话说，`0`用作指向您感兴趣的类型的指针，并简单地获取结构字段的地址......

因此，如果您想要`parent_pid`相对于的偏移量`fork`（这是我最初解析您的问题的方式）：

```
((char*)&((struct proc_event*)0)->event_data.fork.parent_pid) - ((char*)&((struct proc_event*)0)->event_data.fork) 
```

在第二次阅读时，听起来您可能只想要`parent_pid`相对于`struct proc_event`. 改编上面的例子是：

```
((uintptr_t)&((struct proc_event*)0)->event_data.fork.parent_pid) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T07:28:27.977

我并不完全理解所有这些技巧的必要性，因为您所要做的就是为您的嵌套`union`类型命名。任何名称，只是为了能够在 C++ 代码中引用它

```
struct proc_event {
    ...
    union whatever {
        ...
        struct fork_proc_event {
            __kernel_pid_t parent_pid;
            ...
        } fork;
        ...
    } event_data;
    ...
}; 
```

然后你就可以`proc_event::whatever::fork_proc_event`在`offsetof`C++ 代码中引用它

```
size_t off = offsetof(proc_event::whatever::fork_proc_event, parent_pid); 
```

如果您对`parent_pid`从开头的偏移量感兴趣`proc_event`，您可以执行

```
size_t off = offsetof(proc_event, event_data.fork.parent_pid); 
```

如果您不能更改声明，您可以通过执行计算`parent_pid`inside的偏移量`fork_proc_event`

```
size_t off = 
  offsetof(proc_event, event_data.fork.parent_pid) - 
  offsetof(proc_event, event_data.fork); 
```

（虽然我不能马上说最后两个是否是正式的合法`offsetof`使用示例，但它们通常可以在实践中正常工作，没有任何问题。）

# java - Ant 构建期间的部署错误

> ID：11664206
> 
> 赞同：0
> 
> 时间：2012-07-26T07:11:33.227
> 
> 标签：java, web-services, spring, ant

我正在使用 spring 和 webservice 。所以我将 web.xml 定义为

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="service" default="deploy">
    <property name="builddir" value="build" />
    <property name="srcdir" value="../src" />
    <property name="deploydir" value="deploy" />
    <property name="wardir" value="../WebContent"/>
    <property name="libdir" value="${wardir}/WEB-INF/lib/" />

    <target name="cleanstart">
        <delete dir="${builddir}" failonerror="true" />
        <echo message="Creating build directories" />
        <mkdir dir="${builddir}" />
        <mkdir dir="${builddir}/service/WEB-INF/classes" />
        <mkdir dir="${deploydir}" />
    </target>

    <target name="service.war">

        <path id="basepath">
            <!--<fileset dir="${libdir}">
                <include name="**/*.jar" />
            </fileset>
            -->
            <fileset dir="${wardir}/WEB-INF/lib">
                <include name="**/*.jar" />
            </fileset>

        </path>
        <javac srcdir="${srcdir}/" destdir="${builddir}/service/WEB-INF/classes">
            <classpath refid="basepath" />
        </javac>

        <war warfile="${builddir}/service.war" webxml="${wardir}/WEB-INF/web.xml" update="update">
            <classes dir="${builddir}/service/WEB-INF/classes" />
            <fileset dir="${wardir}">
                <exclude name="**/*web.xml" />
            </fileset>

        </war>
    </target>

    <target name="deploy" depends="cleanstart, service.war">
        <copy file="${builddir}/service.war" todir="${deploydir}">
        </copy>
    </target>

</project> 
```

并为 spring 定义 beans.xml 并使用以下代码加载 spring：

```
ServletConfig servletConfig ;
ServletContext servletContext = servletConfig.getServletContext();
WebApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(servletContext); 
```

在 ant 构建期间，我遇到如下异常：

```
 service.war:
            [javac] /home/vshankar/service_spring/buildTools/build.xml:36: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
            [javac] Compiling 20 source files to /home/vshankar/service_spring/buildTools/build/service/WEB-INF/classes
            [javac] /home/vshankar/service_spring/src/com/f/a/services/servicename/Service.java:6: package javax.servlet does not exist
            [javac] import javax.servlet.ServletConfig;
            [javac]                     ^
            [javac] /home/vshankar/service_spring/src/com/f/a/services/servicename/Service.java:7: package javax.servlet does not exist
            [javac] import javax.servlet.ServletContext;
            [javac]                     ^
            [javac] /home/vshankar/service_spring/src/com/f/a/services/servicename/Service.java:49: cannot find symbol
            [javac] symbol  : class ServletConfig
            [javac] location: class com.f.a.services.servicename.Service
            [javac]     ServletConfig servletConfig ;
            [javac]     ^
            [javac] /home/vshankar/service_spring/src/com/f/a/services/servicename/Service.java:50: cannot find symbol
            [javac] symbol  : class ServletContext
            [javac] location: class 
com.f.a.services.servicename.Service
            [javac]     ServletContext servletContext = servletConfig.getServletContext();
            [javac]     ^
            [javac] 4 errors 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:12:57.253

在构建项目时，您需要将 servlet jar 文件放到类路径中。（请注意，不鼓励将此文件打包到您的 ear/war 文件中）

# android - 如何将bean类一个活动传递给android上的另一个活动

> ID：11664210
> 
> 赞同：1
> 
> 时间：2012-07-26T07:11:57.770
> 
> 标签：android

嗨，这是我的列表视图 onClicklister。

当我单击列表项时，我将从 bean 类一个活动获取的 arraylist 传递给另一个活动，如下所示。

但我想知道我们可以将 bean 类传递给下一个活动吗？

```
listViewRoutes.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
          long arg3) {
        RouteBean bean = routeList.get(arg2);
        ArrayList<Double> fromLatitude = bean.getFromLatitude();
        ArrayList<Double> fromLongitude= bean.getFromLongitude();
        ArrayList<Double> toLatitude = bean.getToLatitude();
        ArrayList<Double> toLongitude= bean.getToLongitude();
        Intent intent =new Intent("MapActivityView");
        intent.putExtra("fromLon", fromLongitude);
        intent.putExtra("fromLat", fromLatitude);
        intent.putExtra("toLat", toLatitude);
        intent.putExtra("toLon", toLongitude);
        startActivity(intent);
      }
    }); 
```

如果我通过“Route Bean”，我会得到下一个活动的值。

是否可以通过 bean 类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T07:17:11.620

您可以使用类传递您的对象`Parcelable`..

就像是，

```
public class RouteBean implements Parcelable {

} 
```

一旦你实现`Parcelable`了你的对象，只需将它们放入你的 Intent 中`putExtra()`：

```
Intent i = new Intent();
i.putExtra("object", Parcelable_Object); 
```

然后您可以使用以下命令将它们拉回来`getParcelableExtra()`：

```
Intent i = getIntent();
RouteBean bean = (RouteBean) i.getParcelableExtra("object"); 
```

有关更多信息，请查看这个 SO question [How to pass an object from an Activity to another on Android](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:14:51.080

我认为这是可能的。你必须像这样发送你班级的对象，

```
 intent.putExtra("RouteBean", bean); 
```

在你的下一个活动中像这样检索它，

```
getIntent().getSerializableExtra("RouteBean"); 
```

但是你的类必须实现`Serializable`接口。

或者你可以使用 Parcelable 接口，

这是一个例子，

[https://stackoverflow.com/a/6923794/603744](https://stackoverflow.com/a/6923794/603744)

对于第一种方法，你的类应该是这样的，

```
public class RouteBean implements Serializable 
{

} 
```

而对于下一个，

```
public class RouteBean implements Parcelable 
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:15:33.457

使您的 RouteBean 类实现`Parcelable`接口。然后，您可以将您的自定义类对象作为包传递给其他活动。

然后你可以使用 -

class RouteBean 实现 Parceable 然后在调用意图时。

```
Bundle bundle = new Bundle();
RouteBean yourObj = new RouteBean();
bundle.putParcelable("bundlename", yourObj); 
```

在下一个活动中，您可以使用

```
RouteBean yourObj bundle.getParcelable("bundlename"); 
```

有关 Parceable [http://developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:21:25.367

是的，您可以通过`in1.putExtra("beanObject", bean)`.

```
public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long id) {

            bean = (ActivitiesBean) adapter.getItem(position); //ActivitiesBean is the name of the bean class

            Intent in1 = new Intent(firstclass.this, secondclass.class);
            in1.putExtra("beanObject", bean);
            startActivity(in1);
        }

    }); 
```

并将其用于 secondclass.java

```
ActivitiesBean bean =  (ActivitiesBean) getIntent().getSerializableExtra("beanObject");
txt_title.setText(bean.getTitle());  //txt_title is the object of the textview 
```

# javascript - 像幻灯片一样的内容滑块

> ID：11664211
> 
> 赞同：1
> 
> 时间：2012-07-26T07:11:59.103
> 
> 标签：javascript, jquery

我有几乎相同的内容滑块，如下[所示](http://www.webdeveloperjuice.com/2010/01/12/lightest-jquery-content-slider-ever-made-380-bytes/)：

我怎样才能让它自动旋转？我尝试了不同的方法，但我无法让它发挥作用。我试过点击链接，但它不起作用：

```
i=1;
function autoplay(){
$('#navPoveznica'+i).click();
i++;
if(i>5){i=0};
setTimeout(autoplay, 2000);
} 
```

当我真的没有想法时，我调用了这个函数`.ready()`
，为什么这不起作用？我可以选择这种方式吗？
我应该使用链接的类`.each()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:45:27.140

您可以做的是制作一个包含所有需要滑动的 div 的数组

```
//Define Variables
var divArray = [];
var delay: 6000;
var autoPlay: true;
var totalDivs: 5;
i = 1;

function createDivArray(){
    $('#content_slider_container').find("div").each( function () {
        divArray.push(this.attr('id'));
    });
} 
```

然后像这样编写一个自动播放函数：

```
function autoPlay(divArray) {
  ContentSlider = setInterval(function play(){
      $(divArray).eq(i).slideLeft();
      if (i >= totalDivs){
        i = 0;
      } else {
        i++;
      }
    }
  }, options.delay); 
```

并像这样运行函数

```
autoPlay(divArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:25:04.277

它对我来说很好。请查看[演示](http://jsfiddle.net/nsjithin/5f8dM/)。

请完整粘贴您的 html，js，以便我们可以检查或在 jsfiddle 中进行设置。

# java - 线程：执行具有线程的完整方法，一旦方法执行完成，启动另一个方法

> ID：11664212
> 
> 赞同：-1
> 
> 时间：2012-07-26T07:12:00.597
> 
> 标签：java, android, multithreading

我必须执行 2 种方法

1.  `await()`
2.  `signal()`

条件是在完成方法执行后，`await()`只`signal()`应调用该方法。

在我的情况下，应用程序正在强制关闭。

**我在这里写了示例：**

```
 private final Object lock = new Object();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    signal();
    try {
        await();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("Method: after await");
}

public void signal() {
    synchronized (lock) {
        System.out.println("Method before ");
        **lock.notify();**
        System.out.println("Method await after signal ");
    }
}

public void await() throws InterruptedException {
    // synchronized (lock) {

    Thread t = new Thread() {
        public void run() {
            System.out.println("Method await before wait ");
            try {
                **lock.wait();**
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                System.out.println("Method in exception ");
            }
            System.out.println("Method await after wait ");
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:37:13.020

好的，这里有很多问题：

*   你永远不会开始你的`Thread`. 添加行

    ```
    t.start(); 
    ```

    创建`Thread`.

*   `wait()`不是从同步代码中调用的。这给了我一个`IllegalMonitorStateException`尝试执行代码的时间。

*   您可能想在`await()`之前调用`signal()`，并在两者之间等待一秒钟左右，以确保`await()`首先获得锁。如果没有，程序将阻塞。

# jquery - Fancybox 正在显示所有画廊图像

> ID：11664213
> 
> 赞同：0
> 
> 时间：2012-07-26T07:12:01.053
> 
> 标签：jquery, jquery-plugins, fancybox, fancybox-2

我正在使用花哨的框 2，但是当我单击链接打开幻灯片时，所有图像都会立即显示。有时它会添加一个滚动条....见下面的代码

[http://jsfiddle.net/Tx3AF/](http://jsfiddle.net/Tx3AF/)

抱歉，我无法添加fancyboox JS 来显示画廊。任何帮助将不胜感激...我在互联网上搜索过，但没有运气...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:28:47.117

if you are using this

```
$(".fancybox").fancybox({
    openEffect: 'none',
    closeEffect: 'none'
});​ 
```

then just add the `class` fancybox to all `<a>` tags that target an image of the same gallery.

Your first link

```
<a class="fancybox" href="#morephotos">This shows ... 
```

should actually target the first image of the gallery

```
<a class="fancybox" href="firstImage.jpg" rel="gallery">This shows.... 
```

... otherwise will show whatever is inside the `<div>` with `id="morephotos"`.

Don't forget to wrap your custom fancybox script within the .ready() method like

```
 $(document).ready(function(){
    $(".fancybox").fancybox({
        openEffect: 'none',
        closeEffect: 'none'
    });​ // fancybox
  }); // ready 
```

# html - 不能让非常小的 div 居中

> ID：11664214
> 
> 赞同：0
> 
> 时间：2012-07-26T07:12:09.190
> 
> 标签：html, css

示例：http: [//jsfiddle.net/nDWRm/4/](http://jsfiddle.net/nDWRm/4/)

我想使用 css 或 text 或 svg 制作一个加号和减号按钮。

我尝试使用`css`和 使用文本`+`和`-`标志，但发现那些*从来没有*排队。问题是我可以让它在 100% 缩放时看起来相当不错，但是当缩放改变时`left`，`top`值也需要改变以使 div 再次居中。我还没有尝试过svg。我只是想知道为什么这似乎不可能。

**css**

```
#container{
    height: 1.5em;
    width: 1.5em;
    border-radius: 5px;
    border: 0.1em solid black;
    cursor: pointer;    
}

.vert{
    top: 0.25em;
    left: 0.65em;
    position:absolute;
    width: 0.3em;
    height: 1.1em;
    background-color: #424A49;
    display: block;
}

.horz{
    top: 0.65em;
    left: 0.25em;
    position:absolute;
    width: 1.1em;
    height: 0.3em;
    background-color: #424A49;
    display: block;
} 
```

**html** ​</p>

```
<div id="container">
  <div class="vert"></div>
  <div class="horz"></div>
</div>​ 
```

使用monotype字体我做了这个小提琴：

[http://jsfiddle.net/nDWRm/17/](http://jsfiddle.net/nDWRm/17/)

例如，如果您将字体大小更改`#container2`为 ，`5em`您会看到它无法正确呈现。在美学上，`+`标志有圆角而`-`没有，这不是很令人愉快：P。

这个小提琴非常清楚地显示了字体的问题：http: [//jsfiddle.net/nDWRm/25/](http://jsfiddle.net/nDWRm/25/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:06:19.263

你不能只使用随机的 EM 值。您必须计算它们才能被浏览器转换为圆形像素值：

[http://jsfiddle.net/meo/p7WMW/](http://jsfiddle.net/meo/p7WMW/)

（当然你可以不用scss，例如使用[http://pxtoem.com/ ）](http://pxtoem.com/)

在 js fiddle 上，基本字体大小为 16px。所以你需要它来计算你的 EM 值。

**scss**

```
$base-font-size: 16px;

@function px2em($px, $contextPXSize : $base-font-size ){
    @return ( $px / $contextPXSize ) * 1em;
}

a {
    position: relative;
    display: block;
    margin: 2em;
    width: px2em(40px); height: px2em(40px);
    background: rgba(0,0,0,.1);
    outline: 1px solid #000;
    &:after, &:before {
        content: "";
        position: absolute;
        background: black;
        left: 50%; top: 50%;   
    }
    &:after {
        height: px2em(30px); width: px2em(4px);
        margin: px2em(-15px) 0 0 px2em(-2px);        
    }
    &:before {
        height: px2em(4px); width: px2em(30px);
        margin: px2em(-2px) 0 0 px2em(-15px); 
    }
    &:hover:after {
        display: none;        
    }
} 
```

会导致什么：

**css**

```
a{
   position:relative;
   display:block;
   margin:2em;
   width:2.5em; height:2.5em;
   background:rgba(0, 0, 0, .1);
   outline:1px solid #000
}
a:after,a:before{
   content:"";
   position:absolute;
   background:#000;
   left:50%; top:50%
}
a:after{
   height:1.875em;
   width:.25em;
   margin:-.938em 0 0 -.125em
}
a:before{
   height:.25em;
   width:1.875em;
   margin:-.125em 0 0 -.938em
}
a:hover:after{
   display:none
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:23:42.923

您可以使用像 Courier 这样的 Monotype 字体和 jQuery 中的显示开关来获得您想要的效果。还使用行高和 text-align: center; 在文本上让它在多个缩放中工作。内部 div 使用 100% 的高度和宽度，因此将始终填充容器。不需要位置，您可以增加字体大小以使符号更大:)

CSS：

```
#container{
    height: 1.5em;
    width: 1.5em;
    border-radius: 5px;
    border: 0.1em solid black;
    cursor: pointer;    
    font-family: Courier;
}

.vert,
.horz{
    margin: 0 auto;
    width: 100%;
    height: 100%;
    color: #424A49;
    text-align: center;
    line-height: 1.5em;
}

.vert
{
    display: none;
}
​ 
```

[http://jsfiddle.net/Kyle_Sevenoaks/nDWRm/13/](http://jsfiddle.net/Kyle_Sevenoaks/nDWRm/13/)

# c++ - 使用 cppunit 时出错

> ID：11664215
> 
> 赞同：2
> 
> 时间：2012-07-26T07:12:11.763
> 
> 标签：c++, cppunit

我正在使用 cppunit 来测试我的项目代码。在某些地方的代码中，我放置了一些打印语句用于调试目的，例如，

```
void TestSample()
{  
   //getting value from registry
   if( false == getvalue())
     printf("Error : Getting value form registry failed.");
   //.....
} 
```

当我运行此代码时，我遇到了错误，并且项目因 EXEC 错误而失败。

```
 EXEC : Error : Getting value form registry failed. 
```

实际上这不是代码的问题。它仅与该打印语句一起使用。当我更换它时，`printf`它工作正常。唯一的问题是打印语句中的“错误：”关键字。

我该如何解决这个问题？打印语句无法删除。我认为在 VS2010 中会有一个选项来避免这样的错误。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:17:53.633

这就是我想要的答案

[http://blogs.msdn.com/b/dsvc/archive/2012/02/29/output-from-exec-task-resulting-in-build-failure.aspx](http://blogs.msdn.com/b/dsvc/archive/2012/02/29/output-from-exec-task-resulting-in-build-failure.aspx)

# java - ANTLR：多个 AST 使用相同的歧义语法？

> ID：11664216
> 
> 赞同：2
> 
> 时间：2012-07-26T07:12:21.830
> 
> 标签：java, antlr

我正在为一种小型查询语言构建一个 ANTLR 解析器。查询语言根据定义是模棱两可的，我们需要所有可能的解释 (AST) 来处理查询。

```
Example:

    query   : CLASSIFIED_TOKEN UNCLASSIFIED_TOKEN 
            | ANY_TOKEN UNCLASSIFIED_TOKEN 
            ; 
```

在这种情况下，如果输入与两个规则都匹配，我需要获得 2 个具有两种解释的 AST。ANTLR 将返回第一个匹配的 AST。

你知道一种简单的方法来获得相同语法的所有可能的 AST 吗？我正在考虑多次运行解析器，在迭代之间“关闭”已经匹配的规则；这似乎很脏。有更好的主意吗？也许其他具有 java 支持的 lex/parser 工具可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:23:07.520

如果我是你，我会消除歧义。您通常可以通过使用上下文信息来确定实际触发的语法规则来做到这一点。例如，在

```
C* X; 
```

在 C 中（不是您的语言，但这只是为了说明一点），您无法判断这是否只是无意义的乘法（用 C 编写是合法的），还是声明类型为“指向 C 的指针”的变量 X ”。因此，有两个有效（模棱两可）的解析。但是，如果您知道 C 是一种类型声明（从某些上下文，可能是更早的代码声明），您可以破解解析器以消除不适当的选择，并最终得到一个“正确”的解析，没有歧义。

如果您真的没有上下文，那么您可能需要一个 GLR 解析器，它会在您的最终树中愉快地生成两个解析。我不知道有任何可用于 Java 的。

我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html) [不是基于 Java 的产品] 具有 GLR 解析支持，我们一直使用它来解析具有歧义的困难语言。我们处理上面的 C 示例的方式是生成两个解析，因为 GLR 解析器很乐意这样做，然后如果我们有其他信息（例如符号表），则对树进行后处理以删除不适当的解析。

DMS 旨在支持任意语言的自定义分析和转换，例如您的查询语言，并且可以轻松定义语法。一旦你有了上下文无关的语法（是否有歧义），DMS 就可以解析代码，你可以决定以后做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:16:43.217

我怀疑您是否会让 ANTLR 返回多个解析树，而无需大规模重写代码。

我相信您将不得不将歧义划分为自己的明确语法并多次运行解析。如果歧义产生式的总数很大，您可能会拥有一组难以管理的不同语法。例如，对于三个二元歧义（两个选择），您最终会得到 8 个不同的语法，但如果一个歧义分支消除了一个或多个其他歧义，则可能会稍微少一些。

祝你好运

# opencv - 无法使用 brew 安装 opencv？

> ID：11664218
> 
> 赞同：2
> 
> 时间：2012-07-26T07:12:26.763
> 
> 标签：opencv, homebrew, osx-mountain-lion, xcode4.4

我刚刚将我的 Mac 更新为 Mountain Lion，将 XCode 更新为 ver4.4

出现了几个围绕无法解决 #include 的问题。所以我决定使用 Homebrew 删除并重新安装我的 python 和 opencv 库。

但是，在安装 Python 之后，我在使用 home-brew 安装 opencv 时遇到了错误。

有谁知道如何解决这个问题？附件是运行的输出日志

```
brew install -v opencv

/usr/bin/env python -c import numpy
==> Downloading http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.2/OpenCV-2.4.2.tar.bz2
Already downloaded: /Library/Caches/Homebrew/opencv-2.4.2.tar.bz2
/usr/bin/tar xf /Library/Caches/Homebrew/opencv-2.4.2.tar.bz2
==> cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/Cellar/opencv/2.4.2 -DCMAKE_BUILD_TYPE=None -DCMAKE_FIND_FRAMEWORK=LAST -Wno-dev -DPYTHON_LIBRARY='/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Python' -DPYTHON_INCLUDE_DIR='/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Headers' -DPYTHON_PACKAGES_PATH='/usr/local/Cellar/opencv/2.4.2/lib/python2.7/site-packages'
cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/Cellar/opencv/2.4.2 -DCMAKE_BUILD_TYPE=None -DCMAKE_FIND_FRAMEWORK=LAST -Wno-dev -DPYTHON_LIBRARY='/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Python' -DPYTHON_INCLUDE_DIR='/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Headers' -DPYTHON_PACKAGES_PATH='/usr/local/Cellar/opencv/2.4.2/lib/python2.7/site-packages'
-- The CXX compiler identification is Clang 4.0.0
-- The C compiler identification is Clang 4.0.0
-- Check for working CXX compiler: /usr/bin/clang++
-- Check for working CXX compiler: /usr/bin/clang++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working C compiler: /usr/bin/clang
-- Check for working C compiler: /usr/bin/clang -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Extracting svn version, please wait...
-- SVNVERSION: exported
-- Looking for fseeko
-- Looking for fseeko - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of off64_t
-- Check size of off64_t - failed
-- Performing Test HAVE_C_WNO_ATTRIBUTES
-- Performing Test HAVE_C_WNO_ATTRIBUTES - Success
-- Performing Test HAVE_C_WNO_STRICT_PROTOTYPES
-- Performing Test HAVE_C_WNO_STRICT_PROTOTYPES - Success
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES - Success
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS - Success
-- Looking for assert.h
-- Looking for assert.h - found
-- Looking for fcntl.h
-- Looking for fcntl.h - found
-- Looking for io.h
-- Looking for io.h - not found
-- Looking for jbg_newlen
-- Looking for jbg_newlen - not found
-- Looking for mmap
-- Looking for mmap - found
-- Looking for search.h
-- Looking for search.h - found
-- Looking for string.h
-- Looking for string.h - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE - Success
-- Performing Test HAVE_C_WNO_UNDEF
-- Performing Test HAVE_C_WNO_UNDEF - Success
-- Performing Test HAVE_C_WNO_UNUSED
-- Performing Test HAVE_C_WNO_UNUSED - Success
-- Performing Test HAVE_C_WNO_SIGN_COMPARE
-- Performing Test HAVE_C_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_C_WNO_CAST_ALIGN
-- Performing Test HAVE_C_WNO_CAST_ALIGN - Success
-- Performing Test HAVE_C_WNO_SHADOW
-- Performing Test HAVE_C_WNO_SHADOW - Success
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED - Success
-- Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST
-- Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST - Success
-- Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST
-- Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST - Success
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER - Success
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION - Success
-- Performing Test HAVE_C_WNO_UNINITIALIZED
-- Performing Test HAVE_C_WNO_UNINITIALIZED - Success
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- Found CUDA: /usr/local/cuda (found suitable version "4.1", required is "4.1") 
-- CUDA detected: 4.1
-- CUDA NVCC target flags: -gencode;arch=compute_11,code=sm_11;-gencode;arch=compute_12,code=sm_12;-gencode;arch=compute_13,code=sm_13;-gencode;arch=compute_20,code=sm_20;-gencode;arch=compute_20,code=sm_21;-gencode;arch=compute_20,code=compute_20
-- Found PythonInterp: /usr/local/bin/python2 (found suitable version "2.7.3", required is "2.0") 
-- Found PythonLibs: /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Python (found suitable version "2.7.3", required is "2.7.3") 
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named sphinx
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Success
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
-- 
-- General configuration for OpenCV 2.4.2 =====================================
-- 
--   Platform:
--     Host:                        Darwin 12.0.0 i386
--     CMake:                       2.8.8
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               None
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/clang++
--     C++ flags (Release):         -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8    -O3 -DNDEBUG 
--     C++ flags (Debug):           -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8    -g 
--     C Compiler:                  /usr/bin/clang
--     C flags (Release):           -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8    -O3 -DNDEBUG 
--     C flags (Debug):             -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8    -g 
--     Linker flags (Release):      -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib
--     Linker flags (Debug):        -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib
--     Precompiled headers:         NO
-- 
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree gpu legacy photo python stitching ts videostab
--     Disabled:                    -
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java world
-- 
--   GUI: 
--     QT 4.x:                      NO
--     Cocoa:                       YES
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        build (ver 1.2.6)
--     JPEG:                        build (ver 62)
--     PNG:                         build (ver 1.5.9)
--     TIFF:                        build (ver 42 - 4.0.1)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     QuickTime:                   NO
--     QTKit:                       YES
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     NO
--     Use Cuda:                    YES (ver 4.1)
--     Use Eigen:                   NO
-- 
--   NVIDIA CUDA:                   (ver 4.1)
--     Use CUFFT:                   YES
--     Use CUBLAS:                  NO
--     NVIDIA GPU arch:             11 12 13 20 21
--     NVIDIA PTX archs:            11 12 13 20 21
--     NVIDIA GPU features:         11 12 13 20 20 20
-- 
--   Python:
--     Interpreter:                 /usr/local/bin/python2 (ver 2.7.3)
--     Libraries:                   /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Python (ver 2.7.3)
--     numpy:                       /Library/Python/2.7/site-packages/numpy/core/include (ver 1.6.2)
--     packages path:               /usr/local/Cellar/opencv/2.4.2/lib/python2.7/site-packages
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/texbin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    NO
-- 
--   Install path:                  /usr/local/Cellar/opencv/2.4.2
-- 
--   cvconfig.h is in:              /tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2
-- -----------------------------------------------------------------
-- 
CMake Warning at CMakeLists.txt:785 (message):
  The source directory is the same as binary directory.  "make clean" may
  damage the source tree

-- Configuring done
-- Generating done
-- Build files have been written to: /tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2
==> make
make 
Scanning dependencies of target zlib
Scanning dependencies of target libjpeg
[  0%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/adler32.c.o
[  0%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcapimin.c.o
[  0%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/compress.c.o
[  0%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcapistd.c.o
[  0%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/crc32.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jccoefct.c.o
[  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/deflate.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jccolor.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcdctmgr.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jchuff.c.o
[  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzclose.c.o
[  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzlib.c.o
[  1%] [  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzread.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcinit.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmainct.c.o
[  2%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzwrite.c.o
[  2%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmarker.c.o
[  2%] [  2%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inflate.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmaster.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcomapi.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcparam.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcphuff.c.o
[  3%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/infback.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcprepct.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcsample.c.o
[  3%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inftrees.c.o
[  3%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inffast.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jctrans.c.o
[  3%] [  3%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/trees.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdapimin.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdapistd.c.o
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdatadst.c.o
[  4%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/uncompr.c.o
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdatasrc.c.o
[  5%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/zutil.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdcoefct.c.o
Linking C static library ../lib/libzlib.a
[  5%] Built target zlib
Scanning dependencies of target libjasper
[  5%] [  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdcolor.c.o
Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_cm.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jddctmgr.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdhuff.c.o
[  5%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_debug.c.o
[  5%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_getopt.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdinput.c.o
[  5%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_icc.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmainct.c.o
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmarker.c.o
[  6%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_iccdata.c.o
[  6%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_image.c.o
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmaster.c.o
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmerge.c.o
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdphuff.c.o
[  6%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_init.c.o
[  6%] [  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdpostct.c.o
Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_malloc.c.o
[  7%] [  7%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_seq.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdsample.c.o
[  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdtrans.c.o
[  7%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_stream.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jerror.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctflt.c.o
[  8%] [  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_string.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctfst.c.o
[  8%] [  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_tmr.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctint.c.o
[  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_tvp.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctflt.c.o
[  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_version.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctfst.c.o
[  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jp2_cod.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctint.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctred.c.o
[  9%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jp2_dec.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jmemansi.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jp2_enc.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jmemmgr.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_bs.c.o
[ 10%] [ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jquant1.c.o
Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_cs.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jquant2.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_dec.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jutils.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/transupp.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_enc.c.o
Linking C static library ../lib/liblibjpeg.a
[ 10%] Built target libjpeg
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_math.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_mct.c.o
[ 11%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_mqcod.c.o
[ 11%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_mqdec.c.o
[ 11%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_mqenc.c.o
Scanning dependencies of target libpng
[ 11%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/png.c.o
[ 11%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_qmfb.c.o
[ 11%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngerror.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngget.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngmem.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngpread.c.o
[ 12%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t1cod.c.o
[ 12%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t1dec.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngread.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngrio.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngrtran.c.o
[ 12%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t1enc.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngrutil.c.o
[ 12%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t2cod.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngset.c.o
[ 13%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t2dec.c.o
[ 13%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t2enc.c.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngtest.c.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngtrans.c.o
[ 14%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_tagtree.c.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngwio.c.o
[ 14%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_tsfb.c.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngwrite.c.o
[ 14%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_util.c.o
Linking C static library ../lib/liblibjasper.a
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngwtran.c.o
[ 14%] Built target libjasper
[ 14%] Building NVCC (Device) object modules/core/CMakeFiles/cuda_compile.dir/src/cuda/./cuda_compile_generated_matrix_operations.cu.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngwutil.c.o
/tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2/modules/core/src/cuda/matrix_operations.cu:0: error: bad value (native) for -march= switch
/tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2/modules/core/src/cuda/matrix_operations.cu:0: error: bad value (native) for -mtune= switch
CMake Error at cuda_compile_generated_matrix_operations.cu.o.cmake:200 (message):
  Error generating
  /tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2/modules/core/CMakeFiles/cuda_compile.dir/src/cuda/./cuda_compile_generated_matrix_operations.cu.o

make[2]: *** [modules/core/CMakeFiles/cuda_compile.dir/src/cuda/./cuda_compile_generated_matrix_operations.cu.o] Error 1
make[1]: *** [modules/core/CMakeFiles/opencv_core.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
Linking C static library ../lib/liblibpng.a
[ 14%] Built target libpng
make: *** [all] Error 2
==> Exit Status: 2
https://github.com/mxcl/master/blob/master/Library/Formula/opencv.rb#L70
==> Build Environment
HOMEBREW_VERSION: 0.9.2
HEAD: 92393f1526b443e86b78629fae795eb4d8e3a6a5
CPU: dual-core 64-bit penryn
OS X: 10.8-x86_64
Xcode: 4.4
CLT: 4.4.0.0.1.1249367152
X11: 2.7.2 @ /opt/X11
CC: /usr/bin/clang
CXX: /usr/bin/clang++ => /usr/bin/clang
LD: /usr/bin/clang
CFLAGS: -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8
CXXFLAGS: -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8
CPPFLAGS: -I/usr/local/Cellar/gettext/0.18.1.1/include -isystem /usr/local/include
LDFLAGS: -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib
MACOSX_DEPLOYMENT_TARGET: 10.8
MAKEFLAGS: -j2
Error: Failed executing: make (opencv.rb:70)
These existing issues may help you:
    https://github.com/mxcl/homebrew/issues/13603
Otherwise, this may help you fix or report the issue:
    https://github.com/mxcl/homebrew/wiki/bug-fixing-checklist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:43:05.713

看起来问题来自编译器标志 -march=native。

我的解决方案是编辑 opencv 的自制配方以覆盖编译标志。

```
brew edit opencv 
```

只需在“def install”部分的末尾添加以下语句

```
args << "-DCMAKE_CXX_FLAGS='-Os -w -pipe -Qunused-arguments -mmacosx-version-min=10.8'"
args << "-DCMAKE_C_FLAGS='-Os -w -pipe -Qunused-arguments -mmacosx-version-min=10.8'" 
```

就在之前

```
system 'cmake', '.', *args
system "make"
system "make install" 
```

# java - 在 cassandra 中导出/导入数据

> ID：11664223
> 
> 赞同：1
> 
> 时间：2012-07-26T07:13:04.433
> 
> 标签：java, cassandra

我想从单个节点 cassandra 集群中导出一个包含整个数据的密钥，就像我们在 mysql 中所做的那样，并将其恢复到另一个单节点集群上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:40:43.647

在文档中有说明，您可以制作快照或使用工具`sstable2json`和`json2sstable`.

有关更多信息，您可以搜索文档： [http ://wiki.apache.org/cassandra/Operations#Backing_up_data](http://wiki.apache.org/cassandra/Operations#Backing_up_data)

关于快照工具：[http ://www.datastax.com/docs/1.0/operations/backup_restore](http://www.datastax.com/docs/1.0/operations/backup_restore)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:41:51.350

使用出色的 Priam 工具集可以完成备份/恢复和许多其他事情：[https](https://github.com/Netflix/Priam) ://github.com/Netflix/Priam 。我想说，设置过程相当复杂，但无论如何它比所有节点上的 sstable-to-json 转换更容易。

# performance - umbraco 4.7.1 中的性能问题

> ID：11664228
> 
> 赞同：1
> 
> 时间：2012-07-26T07:13:24.437
> 
> 标签：performance, caching, umbraco

在我的一个项目中，我使用了 Umbraco v4.7.1、asp.net 4、Windows 7、SQL Server 2008 和 IIS 7。我在不止一页中遇到了速度问题。当我对我的代码进行跟踪时，我发现性能问题是由代码引起的

```
myDocument.Publish(createdUser);
umbraco.library.UpdateDocumentCache(myDocument.Id); 
```

我发现它花了〜21秒。

请任何人帮助我提高性能

```
TraceStart beforepublish 26/07/2012 12:01:59  0.715882046461212  0.000089
Traceend   afterpublish  26/07/2012 12:02:19 21.5144408018338   20.798559 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:10:22.373

可能存在许多问题，但对我影响最大的更改是设置宏缓存。

如果您能够识别所有页面通用的宏（例如顶级导航），请转到开发人员部分，选择该宏并为缓存周期设置一个值（介于 600 秒或更高之间）。

![Umbraco 宏缓存](../Images/61d9271b0c438c09edac10b695204582.png)

这里发生的情况是，当对您的页面发出第一个请求时，Umbraco 将完整运行宏并生成所需的输出 - 在大多数情况下，这将是某种 HTML 标记。然后，Umbraco 会将此输出转储到 ASP.NET 缓存中并将其保留在那里。在给定的缓存周期（上例中为 600 秒）内进入的下一个请求将使用缓存中存在的内容，而不是运行宏。

另一种可能的选择可能是打开跟踪并查看那里是否有任何东西。将以下查询字符串添加到 URL：`?umbDebugShowTrace=true`并查找任何错误或警告。

# ruby-on-rails - 如何在rails中创建一个递归函数，它将返回父母的所有孩子，以及所有孩子的孩子等等......到N级

> ID：11664233
> 
> 赞同：7
> 
> 时间：2012-07-26T07:13:52.570
> 
> 标签：ruby-on-rails

我有一个如图所示的方法：

```
def all_pages_and_its_n_level_child

     @parent_pages = Page.where(:parent_id => params[:page_id])
     #this will give me all child of this page
     for page in @parent_pages
          child_exists=Page.where(:parent_id=>page.id)
          #this will give all children of that page
          #*I want to make this loop further so that i can check to N-levels,
          #this is only for two levels*
     end

end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-08-21T15:04:05.827

在现代 RDB 上，递归 CTE 可用于处理递归结构。

```
class Page < ApplicationRecord; end

Page.find_by_sql(
  "WITH RECURSIVE r AS (
     #{Page.where(id: 2).to_sql}
     UNION ALL
     #{Page.joins('JOIN r').where('r.id = pages.parent_id').to_sql})
   SELECT * FROM r")

#  Page Load (0.7ms)  WITH RECURSIVE r AS (
#     SELECT `pages`.* FROM `pages` WHERE `pages`.`id` = 2
#     UNION ALL
#     SELECT `pages`.* FROM `pages` JOIN r WHERE (r.id = pages.parent_id))                                                              
#   SELECT * FROM r
#    => [#<Page id: 2, parent_id: 1, created_at: "2018-08-21 15:00:43", updated_at: "2018-08-21 15:00:43">, #<Page id: 3, parent_id: 2, created_at: "2018-08-21 15:00:50", updated_at: "2018-08-21 15:00:50">] 
```

据我所知，mysql、postgres、sqlite3都支持递归CTE。

* * *

编辑@2020/12/17

在 postgresql 上，您需要具备以下条件：

```
Page.find_by_sql(
  "WITH RECURSIVE r AS (
     #{Page.where(id: 2).to_sql}
   UNION ALL
     #{Page.joins('JOIN r ON r.id = pages.parent_id').to_sql})
   SELECT * FROM r") 
```

（感谢@Dan 指出）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T08:04:07.623

这是一些示例（未经测试！但它会给你一些线索）：

```
def all_children(children_array = [])
  children = Page.where(parent_id: self.id)
  children_array += children.all
  children.each do |child|
    child.all_children(children_array)
  end
  children_array
end 
```

所以这是递归，它将尝试从父级中找到所有子级（也嵌套）。我知道它非常丑陋且效率低下，但我希望 ii 能给您提供有关查找嵌套元素的线索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-29T14:30:04.363

这是一个恰当的例子。我用谷歌搜索了这个因为我懒得去想它，但是因为我在这里找到了这个，所以我决定正确地做。下面是一个代码，您可以使用默认方式进行 Rails 关联。

```
def all_children(children_array = [])
    children_array += self.children
    children.each do |child|
        return child.all_children(children_array)
    end
    return children_array
end 
```

请注意 there **return**的两种用途。如果你错过了内部的，你最终只会得到一层深的树。

干杯!

# android - 需要当前位置坐标

> ID：11664239
> 
> 赞同：2
> 
> 时间：2012-07-26T07:14:18.863
> 
> 标签：android, gps, location

包 com.demo.location；

```
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class MyLocation  extends Activity
{
    LocationManager mlocManager;
    LocationListener mlocListener;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /* Use the LocationManager class to obtain GPS locations */
        mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        mlocListener = new MyLocationListener();
        mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
    }

    /* Class My Location Listener */
    public class MyLocationListener implements LocationListener
    {

        //@Override
        public void onLocationChanged(Location loc)
        {
            Log.e("","HERE It IS");
            loc.getLatitude();
            loc.getLongitude();

            Log.e("","LAT"+loc.getLatitude());
            Log.e("","LONG"+loc.getLongitude());
            String Text = "My current location is: " +
            "Latitud = " + loc.getLatitude() +
            "Longitud = " + loc.getLongitude();

            Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
        }

        //@Override
        public void onProviderDisabled(String provider)
        {
            Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
        }

        //@Override
        public void onProviderEnabled(String provider)
        {
            Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
        }

        //@Override
        public void onStatusChanged(String provider, int status, Bundle extras)
        {

        }
    }
}

Manifest File

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

我只需要用户所在的确切位置。运行此应用程序后，我无法从模拟器和设备中获得任何信息……（Samsung Galaxy GT S5360）。此外，我只需要 lat & long & 需要将其作为参数传递给其他方法，因此也欢迎任何其他解决方案。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:19:26.943

利用

```
locManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 
```

伊斯特多夫

```
locManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener); 
```

就我而言，这对我很有帮助。

还请添加以下权限。

```
android.permission.INTERNET
android.permission.ACCESS_COARSE_LOCATION
android.permission.ACCESS_FINE_LOCATION
android.permission.ACCESS_MOCK_LOCATION 
```

# javascript - 使用 javascript 代码不是用于 id，而是用于类

> ID：11664240
> 
> 赞同：3
> 
> 时间：2012-07-26T07:14:19.913
> 
> 标签：javascript, html, class

我有一个 javascript 函数`MyFunc()`，它与`id="item_for_MyFunc"`. 在函数中有一个

```
var elem = document.getElementById("item_for_MyFunc"); 
```

和 html 正文有：

```
<body onload="MyFunc()">
<p id="item_for_MyFunc"> 
```

一切正常，但我想将此功能用于页面上的几个项目。这就是为什么我应该`<p class="item_for_MyFunc">`在要被这个函数处理的页面上使用几次，所以使用 id 不是一个解决方案。

应该对功能进行哪些更改才能对其进行更改`class="item_for_MyFunc"`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T07:21:26.127

所以你在那里做的事情很简单。让我给你一个更强大的版本：

```
document.addEventListener('load', function(){

    var elements = document.querySelectorAll('.myClassName');
    for(var i=0, len=elements.length; i<len; i++){
        MyFunc.call( elements[i] );
    }

}, false); 
```

所以旧版本的 IE，具体来说是 6 和 7，没有 querySelectorAll。我假设你不担心他们。如果你是，还有其他方法可以做到这一点，如果你需要，我可以告诉你如何做。

基本上，我们给所有元素一个“myClassName”类，querySelectorAll 找到所有元素并返回一个DOM 元素数组。

然后我们遍历列表，并在每个元素上执行 MyFunc。

*编辑* 因此，编写好的 javascript 的一个关键原则是尽可能将 js 代码与 html 标记分开。您几乎不应该再使用像 onload="myFunc" 这样的内联事件处理程序。使用 js 本身编写的事件处理程序。

如果您可以选择，您应该使用 jQuery 库。它使*很多*这些东西变得非常简单，对非常旧的浏览器有很好的支持，并在数十万个网站上使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T07:17:30.113

```
document.getElementsByClassName 
```

将使用类名返回所有 HTML 元素的数组。迭代结果，你就设置好了。除 IE <= 8, FF < 3 外的所有浏览器均受支持。与 document.querySelectorAll 一样工作（在 IE >= 7, FF >=3.5 中工作）

有关兼容性图表，请参阅：http: [//quirksmode.org/dom/w3c_core.html#gettingelements](http://quirksmode.org/dom/w3c_core.html#gettingelements) 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:19:53.520

你可以试试：

`var elems = document.getElementsByClassName('myClass');`

我以前没有用过那个，但你可以使用 jQuery，因为它更简单；

`var elems = $('.myClass');`

# asp.net - 使用反射映射类的所有属性

> ID：11664241
> 
> 赞同：0
> 
> 时间：2012-07-26T07:14:22.507
> 
> 标签：asp.net, system.reflection

我有两个域类

```
public class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Address Address { get; set; }

}
public class Address
{
    public string HouseName { get; set; }
    public string StreetName { get; set; }
    public string PinCode { get; set; }
} 
```

我想将 Employee 类的对象映射到另一个类。我正在使用反射将 empData 对象映射到另一个对象。我使用的代码是

```
private void GetValues(object empData)
{
    System.Type type = empData.GetType();

    foreach (PropertyInfo pInfo in type.GetProperties())
    {
        //do some stuff using this pInfo. 
    }
} 
```

我可以轻松地映射除 emp 对象中的 Address 属性之外的所有属性，该 emp 对象是另一个类的对象。那么，无论其类型如何，我如何映射所有属性？即，如果地址包含另一个类的对象，它也应该被映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:19:45.107

你不能使用[AutoMapper](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)来映射类吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:20:27.520

您可以知道要映射的属性类型

```
if (propertyInfo.PropertyType == typeof(Address))
    { // do now get all properties of this object and map them} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:21:52.280

假设您希望能够在任何类型的对象上执行此操作，而不仅仅是这个特定的对象，您应该使用某种递归解决方案。但是，如果它只是为了这个对象 - 你为什么还要使用反射？对我来说，它只是给一些简单的事情增加了不必要的复杂性，比如将六个属性映射到另一组对象。

如果您想在代码示例方面获得更具体的帮助，您必须给我们更多的上下文。为什么名为“GetValues”的方法的返回类型为 void？考虑到这一点，我很难编写一个示例。:)

# java - JPA Hibernate 中的全局 setMaxResult

> ID：11664244
> 
> 赞同：0
> 
> 时间：2012-07-26T07:14:48.473
> 
> 标签：java, hibernate, jpa, limit, sybase

App使用JPA Hibernate，数据库是Sybase；每个域类型都有几个搜索屏幕。我知道 query.setMaxResult(limit) 会阻止查询返回太多。在 Sybase 的情况下，我相信它会被翻译成使用：

```
select top n from table --n = limit 
```

但是，**是否有**我可以配置的全局设置，以便应用程序的所有查询都能识别此限制，它是什么以及如何使用？

后续问题是，然后我将配置 1 或 2 个查询以使其 setMaxResults 为限制 + 1000，执行 query.setMaxResult(limit+1000) 将**覆盖全局设置**正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:08:54.667

没有全局设置，你真的不想要这样的设置。确实，`setMaxResults()`对于大量查询没有意义。

特别是，如果查询加载了一个实体并且至少是一对多关联，`setMaxResults()`则不应使用。它限制从数据库返回的行数，而不是从查询返回的实体数。因此，假设您有具有以下关联的实体 A 和 B：

```
A1 - B1
A1 - B2
A1 - B3
A2 - B4
A2 - B5
A2 - B6 
```

并成像您执行以下查询`select a from A a left join fetch a.b`：如果将最大结果设置为 4，则返回的行可能是

```
A1 - B1
A1 - B2
A1 - B3
A2 - B4 
```

你最终会得到 A1 实体及其所有 B，而 A2 实体只有一个 B 而不是全部 3 个。

不过，没有什么能阻止您实现某种可重用的查询模板，它会自动应用最大结果。但是盲目地将其应用于所有查询是错误的。

# vba - Excel 2010 宏创建图表

> ID：11664246
> 
> 赞同：1
> 
> 时间：2012-07-26T07:14:49.057
> 
> 标签：vba, excel, charts, building

我正在尝试创建宏以在 Excel 2010 中构建图表。

如果我录制一个宏，它会给我以下代码：

```
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range("'Sheet1'!$A$1:$I$15")
ActiveChart.ChartType = xlColumnStacked 
```

但是当我重新运行它时，它给了我以下错误：

> 运行时错误“1004”：应用程序定义或对象定义错误。

我尝试了许多不同的变化：

```
With ActiveSheet.ChartObjects.Add _
        (Left:=100, Width:=690, Top:=75, Height:=375)
    With .Chart
       .Parent.Name = "Chart MVO"
       .HasTitle = True
       .ChartTitle.Text = "MVO (628) CF and DS Delivery Performance"
    End With
 End With 
```

但是每个都给出不同的运行时错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:27:52.420

你没有重命名你的工作表吗？你确定你有一张活跃的工作表吗？当我尝试您的代码时，它运行没有问题。

当你运行你的代码并且它给你一个错误时，在出现的窗口中选择 Debug 并检查它在哪一行崩溃。然后将鼠标悬停在该行的不同变量上，看看它们是否都有效。

# android - 尝试创建电子邮件客户端但无法连接到 pop3 服务器

> ID：11664250
> 
> 赞同：0
> 
> 时间：2012-07-26T07:15:08.317
> 
> 标签：android, jakarta-mail, pop3, email-client

我正在尝试创建电子邮件客户端，但无法连接到 pop3 服务器。我使用以下链接发送电子邮件：

[http://java.sun.com/developer/onlineTraining/JavaMail/contents.html](http://java.sun.com/developer/onlineTraining/JavaMail/contents.html)

[http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

我从模拟器和真实设备发送电子邮件。现在，我正在尝试连接到 pop3 服务器以读取具有以下属性的消息：

```
 props.setProperty("mail.transport.protocol", "pop3");   
    props.setProperty("mail.host", server);   
    props.put("mail.pop3.auth", "true");  // smtp authentication - default on  
    props.put("mail.pop3.port", "110");   
    props.put("mail.pop3.socketFactory.port", "110");   
    props.put("mail.pop3.socketFactory.class",   
            "javax.net.ssl.SSLSocketFactory");   
    props.put("mail.pop3.socketFactory.fallback", "false");   
    props.setProperty("mail.pop3.quitwait", "false");   
    props.put("mail.debug", "true"); // debug mode on or off - default off 

    session = Session.getDefaultInstance(props, this); 
```

但应用程序无法连接到服务器。我附上了 logCat，它显示它无法加载 javamail.providers 然后它加载默认提供程序。然后它无法加载 javamail.address，尝试连接到 pop3.gmail.com 但无法连接。

我是android新手，谁能指导我？

![logCat_Image1](../Images/19791c3d5f8ef9a890abdd7f2954bc51.png)![image1 的剩余部分](../Images/ae2c54d2432886d4e9e9f585fda4c6ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:50:45.680

问题已解决，我的属性不正确。从以下链接获得帮助

[如何在android中使用java邮件将应用程序电子邮件同步到服务器电子邮件](https://stackoverflow.com/questions/9953252/how-to-synchronize-application-email-to-server-email-using-java-mail-in-android?rq=1)

# c#-4.0 - Oracle 查询在 C# 中不起作用

> ID：11664253
> 
> 赞同：2
> 
> 时间：2012-07-26T07:15:14.927
> 
> 标签：c#-4.0, oracle11g

当我运行此代码时，它总是返回零，而当我在 oracle sql 客户端中运行此查询时，它返回 1。

```
 var strSQL = string.Format("SELECT COUNT(*) FROM GANTNER.GAT_REASONS WHERE CODE ='{0}'", StatusCode);    
 objCmd = new OracleCommand(strSQL, objConn);
 objCmd.CommandType = CommandType.Text;
 int val = int.Parse(objCmd.ExecuteScalar().ToString()); 
```

为了尝试，我删除了列名上的条件`CODE`并且它有效，但是当我输入列名`CODE`时它没有然后我试图让`"CODE"` `'CODE'`所有不工作的东西总是返回零，而它应该返回 1，因为行存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:25:24.493

可能是字母*大小写*问题。`UPPER/UCASE`尝试功能进行比较。

```
var strSQL = string.Format("SELECT COUNT(*) FROM GANTNER.GAT_REASONS
              WHERE UCASE(CODE) ='{0}'", StatusCode.ToUpper()); 
```

或者

```
var strSQL ="SELECT COUNT(*) FROM GANTNER.GAT_REASONS WHERE CODE =:code";
objCmd = new OracleCommand(strSQL, objConn);
objCmd.Parameters.AddWithValue("code",StatusCode.ToUpper()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:22:16.057

尝试这个：

```
OracleCommand cmd = conn.createCommand();
// parametrized sql query
cmd.CommandText = "SELECT COUNT(*) FROM GANTNER.GAT_REASONS WHERE CODE = :status";
// add parameter for the query
cmd.Parameters.AddWithValue("status", StatusCode); 
int val = int.Parse(objCmd.ExecuteScalar().ToString()); 
```

# css - -webkit-transform-style：preserve-3d 不工作

> ID：11664255
> 
> 赞同：13
> 
> 时间：2012-07-26T07:15:20.067
> 
> 标签：css, webkit

我正在尝试对此链接[code_on_jsfiddle](http://jsfiddle.net/54Pa7/)使用效果。效果是显示硬币旋转时的厚度。代码似乎在 jsfiddle 上运行良好，但是当我尝试在我的代码库中使用它时，它就不起作用了。请有人向我建议preserve-3d 可能无法工作或可能出现其他问题的各种场景。

我试图找出问题可能是什么，我在 w3c.org 上找到了[链接](http://dev.w3.org/csswg/css3-3d-transforms/#transform-style)，其中写道“因此在 3D 空间中保留元素的层次结构要求层次结构中的每个祖先都具有值 'preserve-3d' for ' transform-style”，所以我认为可能是我的任何祖先 div 可能没有保留 3d 样式，但是当我尝试模拟这样一种情况时，祖先没有保留 3d 样式，即使所需的转换正在工作[链接](http://jsfiddle.net/cETBj/4/). 使用 webkit 查看悬停时的过渡。请帮忙

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T14:04:29.447

我遇到了同样的问题。preserve-3d 似乎在某些深度嵌套的代码部分中没有效果。在调整了所有的父元素之后，我找到了罪魁祸首！

```
overflow: hidden 
```

这条线压平了一切。

你可以在这里试试。[http://www.webkit.org/blog-files/3d-transforms/transform-style.html](http://www.webkit.org/blog-files/3d-transforms/transform-style.html) 如果你在父类中添加溢出：隐藏，preserve-3d 将停止生效。

```
.parent {
    overflow: visible !important;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
} 
```

应该解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-13T09:46:34.703

我发现`filter`对父元素的影响导致preserve-3d 被忽略。

`filter: blur()`当它们从查看器“远离”旋转时，我用来逐渐模糊项目。

移动过滤器子元素解决了问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:45:10.793

试试这个 - [jsFiddle](http://jsfiddle.net/W3e5T/)

我做了什么：

```
.coin {
    background-image: url("http://www.coolemails4u.com/wp-content/uploads/2010/10/indian_rupee.png");
    background-size: 100% 100%;
    border-radius: 100%;
    height: 100px;
    margin: 50px auto;
    position: relative;
    width: 100px;
    -webkit-transition: .5s linear;
    -webkit-transform-style: preserve-3d;
    -webkit-backface-visibility: hidden; /* I added this */
} 
```

我希望这会有所帮助！

# ios - 获取关系的结果

> ID：11664257
> 
> 赞同：0
> 
> 时间：2012-07-26T07:15:33.517
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

我有一个包含人员和项目实体的简单对象图。我从人和物品之间有一对多的关系，反之亦然。我想使用获取的结果控制器在表格视图中显示属于所选人员的所有项目，这样我就不必在添加和删除等时更新表格视图。我该怎么做？这让我疯狂。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:16:26.037

我假设您可以正常设置和使用`NSFetchedResultsController`，还是乐于参考 Apple 示例代码和文档？所以我猜你是在问如何构造一个`NSFetchRequest`来获取特定人的 Item 对象，然后你可以将其传递给 fetched results 控制器？如果是这样，这里有一个如何完成的示例。

```
Person *person1 = [self someMethodThatReturnsTheRightPersonObject];
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Item"];
// Assumes the inverse relationship Item -> Person is named "person"
request.predicate = [NSPredicate predicateWithFormat:@"person==%@", person1];
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"someKindOfOrderingAttibute" ascending:YES]]; 
```

# ruby-on-rails - 如何使 simple_form 与 twitter-bootstrap-rails 一起工作；引导程序中的一般形式

> ID：11664260
> 
> 赞同：3
> 
> 时间：2012-07-26T07:15:53.980
> 
> 标签：ruby-on-rails, twitter-bootstrap, validation, simple-form

1) 如何使用简单的表单和 twitter-bootstrap-rails 构建表单，以便它们显示很酷的引导样式验证错误？

2) 如何在 twitter-bootstrap-rails 中构建表单，以便它们显示很酷的引导样式验证错误？

3) 我尝试使用 simple_form 构建表单。但是验证没有显示任何错误消息。我正在尝试在用户模型和表单上添加验证`Devise`

技术：Rails 3.2.7.rc1、1.9.2、twitter-ootstrap-rails 2.1.1、simple-form 2.0.2

代码：

```
 <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %>

        <%= f.error_notification %>
    <%= f.input :fname, :placeholder=>"First name", :input_html => { :class => "enroll_input span4"} %>
    <%= f.input :lname, :placeholder=>"Last name", :input_html => { :class => "enroll_input span4"} %>
    <%= f.input :email,:placeholder=>"Email",:input_html => { :class => "enroll_input span4"}  %>
    <%= f.input :password, :placeholder=>"Password",:input_html => { :class => "enroll_input span4"} %>
    <div class="enroll_button"> <%= f.submit "  Enroll  ", :class=>"btn btn-primary pull-right btn-large" %></div>
        <% end %> 
```

我不确定这是否不起作用或`jquery`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:16:00.980

尝试这个：

```
<%= f.input :email do %>
   <%= f.input_field :email %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:50:39.707

在这里您可以找到有关两者集成的说明，示例应用程序，实时应用程序：

[https://github.com/plataformatec/simple_form/#twitter-bootstrap](https://github.com/plataformatec/simple_form/#twitter-bootstrap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:19:02.573

尝试这个 ：：

**simple_form + 引导程序**

[https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)

# android-intent - 有意启动 VLC Beta NEON？

> ID：11664263
> 
> 赞同：2
> 
> 时间：2012-07-26T07:16:08.247
> 
> 标签：android-intent, udp, package, vlc, neon

刚刚遇到一个问题，我无法使用 Intent 启动 VLC Beta (NEON)。首先，我试图通过 ACTION.VIEW 做出间接意图，但它不起作用。之后，我决定使用以下代码明确意图：

```
try
{
    String Package="org.videolan.vlc.betav7neon";
    Uri uri = Uri.parse("udp://@111.111.11.11:1111");
    Intent i = new Intent("android.intent.action.VIEW");
    i.setPackage(Package);
    i.setDataAndType(uri, "video/*");
    startActivity(i);

    //Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("udp://@111.111.11.11:1111"));
    //startActivity(intent);
}
catch(Exception e)
{
    e.printStackTrace();
} 
```

但是明确的意图也不起作用。任何想法如何解决这个问题？

# bash - 用于进入目录下最近访问的子目录的一个衬垫

> ID：11664271
> 
> 赞同：0
> 
> 时间：2012-07-26T07:16:33.480
> 
> 标签：bash

我有一个不满意的解决方案，例如：

```
tmp=$(ls -lrt | tail -l) |  awk '{ print $NF }')
cd $tmp 
```

我认为那里必须有更好的解决方案，所以在这里提出问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T13:30:16.973

```
cd `ls -du */.|head -1` 
```

或者

```
read < <(ls -du */.); cd $REPLY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:43:51.380

我想出了这个：

```
cd $(ls -tF |grep -m1 '/$') 
```

GNU grep 和 coreutils 需要，我担心，因为`ls -F`和`grep -m1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:29:34.803

An alternative using `find`:

```
tmp=`find ./*/ -maxdepth 0 | xargs stat -c '%n %X' | \
   sort -r -k2 | cut -d' ' -f1 | head -1` 
```

# javascript - Canvas toDataUrl 是否有可能在所有浏览器中返回相同的字符串？

> ID：11664272
> 
> 赞同：4
> 
> 时间：2012-07-26T07:16:36.833
> 
> 标签：javascript, jquery, html, canvas

我观察到 Canvas.toDataUrl 在浏览器之间返回不同的值。我的 Canvas.toDataURL 方法是否有可能在所有浏览器中返回相同的字符串？（无论是使用客户端代码还是服务器代码）。

Firefox 中的空白画布，

data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAAA3CAYAAABXVTXhAAAApklEQVR4nO3TMQEAIAzAsPk3DQLWH45EQZ/OAZZ5HQA/MgYEY0AwBgRjQDAGBGNAMAYEY0AwBgRjQDAGBGNAMAYEY0AwBgRjQDAGBGNAMAYEY0AwBgRjQDAGBGNAMAYEY0AwBgRjQDAGBGNAMAYEY0AwBgRjQDAGBGNAMAYEY0AwBgRjQDAGBGNAMAYEY0AwBgRjQDAGBGNAMAYEY0AwBgRjQDAGhAtrCYfA7BeW0wAAAABJRU5ErkJggg==

Chrome 中的空白画布，

data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAAA3CAYAAABXVTXhAAABgElEQVR4Xu3VIRKAQAwEQfj/owFLgRi/jY5J56Y4r+c7fAQIvAROYXgRBL4CwvAqCPwICMOzICAMb4BAE/DHaE6mxgSEMXZw6zYBYTQnU2MCwhg7uHWbgDCak6kxAWGMHdy6TUAYzcnUmIAwxg5u3SYgjOZkakxAGGMHt24TEEZzMjUmIIyxg1u3CQijOZkaExDG2MGt2wSE0ZxMjQkIY+zg1m0CwmhOpsYEhDF2cOs2AWE0J1NjAsIYO7h1m4AwmpOpMQFhjB3cuk1AGM3J1JiAMMYObt0mIIzmZGpMQBhjB7duExBGczI1JiCMsYNbtwkIozmZGhMQxtjBrdsEhNGcTI0JCGPs4NZtAsJoTqbGBIQxdnDrNgFhNCdTYwLCGDu4dZuAMJqTqTEBYYwd3LpNQBjNydSYgDDGDm7dJiCM5mRqTEAYYwe3bhMQRnMyNSYgjLGDW7cJCKM5mRoTEMbYwa3bBITRnEyNCQhj7ODWbQLCaE6mxgSEMXZw6zaBG4pF21yd2aa+AAAAAElFTkSuQmCC

# magento - 如何在 Magento 中将报价属性转换为订单？

> ID：11664275
> 
> 赞同：5
> 
> 时间：2012-07-26T07:17:03.010
> 
> 标签：magento, attributes, magento-1.6, quote

我已经花了两天时间，我觉得我已经尝试了一切，但我还是一直碰壁。

我有两个属性（module_job_id、module_channel_id），我很想添加到报价和订单中。我设法得到的是报价属性工作正常，我可以看到它们存储在数据库中并且可以很好地检索它们。

剩下的唯一一件事就是将值从报价移动到订单。我究竟做错了什么？

这是我的模块配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>

    <modules>
        <Company_Module>
            <version>0.1.9</version>
        </Company_Module>
    </modules>

    <global>
        <fieldsets>
            <sales_convert_quote>
                <module_job_id>
                    <to_order>*</to_order>
                </module_job_id>

                <module_channel_id>
                    <to_order>*</to_order>
                </module_channel_id>
            </sales_convert_quote>
        </fieldsets>

        <resources>
            <company_module>
                <setup>
                    <module>Company_Module</module>
                    <class>Mage_Sales_Model_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </company_module>
        </resources>

    </global>
</config> 
```

安装文件sql/company_module/mysql4-install-0.1.0.php：

```
<?php
    $installer = $this;
    $installer->startSetup();

    $installer->getConnection()->addColumn($installer->getTable('sales/quote'), 'module_job_id',
        'VARCHAR(255) NULL DEFAULT NULL');
    $installer->getConnection()->addColumn($installer->getTable('sales/quote'), 'module_channel_id',
        'VARCHAR(255) NULL DEFAULT NULL');

    $installer->getConnection()->addColumn($installer->getTable('sales/order'), 'module_job_id',
        'VARCHAR(255) NULL DEFAULT NULL');
    $installer->getConnection()->addColumn($installer->getTable('sales/order'), 'module_channel_id',
        'VARCHAR(255) NULL DEFAULT NULL');

    $installer->addAttribute('order', 'module_job_id', array('type' => 'varchar'));
    $installer->addAttribute('quote', 'module_job_id', array('type' => 'varchar'));

    $installer->addAttribute('order', 'module_channel_id', array('type' => 'varchar'));
    $installer->addAttribute('quote', 'module_channel_id', array('type' => 'varchar'));

    $installer->endSetup(); 
```

我已经在安装文件中尝试了 addAttribute 和 addColumns 的所有可能组合。结果是我在 sales_flat_quote 和 sales_flat_order 中都有这两个属性作为列。但是，eav_attribute 中没有任何属性。我不确定这是否可以。

我尝试的另一件事是在 sales_convert_quote_to_order 观察者中明确设置订单属性值。这没有用：

```
public function salesConvertQuoteToOrder($observer)
{
    $order = $observer->getEvent()->getOrder();

    $order->setModuleJobId('123');
    $order->setModuleChannelId('456');
} 
```

我不知道这是否重要，但这些是我系统上的实体类型（只有订单，没有报价......）：

```
mysql> SELECT entity_type_id, entity_type_code FROM eav_entity_type;
+----------------+------------------+
| entity_type_id | entity_type_code |
+----------------+------------------+
|              3 | catalog_category |
|              4 | catalog_product  |
|              7 | creditmemo       |
|              1 | customer         |
|              2 | customer_address |
|              6 | invoice          |
|              5 | order            |
|              8 | shipment         |
+----------------+------------------+ 
```

此外， eav_entity 是空的。我也希望没问题。

```
mysql> select * from eav_entity;
Empty set (0.00 sec) 
```

这是在 Magento 1.6.2.0 上。多谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T05:37:54.527

在 Magento 1.6.2.0 上，订单保存在 sales_flat_order 上，报价保存在 sales_flat_quote 上。他们不再使用 eav 结构 AFAIK 所以我会说没关系。您应该查看 Mage_Sales_Model_Convert_Quote 类并添加调试代码：

```
public function toOrder(Mage_Sales_Model_Quote $quote, $order=null)
{
    if (!($order instanceof Mage_Sales_Model_Order)) {
        $order = Mage::getModel('sales/order');
    }
    /* @var $order Mage_Sales_Model_Order */

    $order->setIncrementId($quote->getReservedOrderId())
        ->setStoreId($quote->getStoreId())
        ->setQuoteId($quote->getId())
        ->setQuote($quote)
        ->setCustomer($quote->getCustomer());

    Mage::helper('core')->copyFieldset('sales_convert_quote', 'to_order', $quote, $order);

    Mage::dispatchEvent('sales_convert_quote_to_order', array('order'=>$order, 'quote'=>$quote));

    //I add my debug code here using Mage::log, you can debug using your own method
    Mage::log($order->getData());

    return $order;
} 
```

查看是否在此处设置了 module_job_id 和 module_channel_id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T19:49:49.230

请检查以下对我有用的代码（但是我的 Magento 安装是 1.7.0.2）。我认为问题出在您的模型资源上。

> 应用程序/代码/本地/最终/测试/etc/config.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<config>
<modules>
    <Final_Test>
        <version>0.0.1</version>
    </Final_Test>
</modules>
<frontend>
    <routers>
        <test>
            <use>standard</use>
            <args>
                <module>Final_Test</module>
                <frontName>test</frontName>
            </args>
        </test>
    </routers>
</frontend>
<global>
    <models>
        <test>
            <class>Final_Test_Model</class>
            <resourceModel>test_resource</resourceModel>
        </test>
        <test_resource>
            <class>Final_Test_Model_Resource</class>
            <deprecatedNote>test_mysql4</deprecatedNote>
        </test_resource>
    </models>
    <resources>
        <test_setup>
            <setup>
                <module>Final_Test</module>
                <class>Final_Test_Model_Resource_Setup</class>
            </setup>
        </test_setup>
    </resources>
    <fieldsets>
        <sales_convert_quote>
            <final_test1>
                <to_order>*</to_order>
            </final_test1>
            <final_test2>
                <to_order>*</to_order>
            </final_test2>
        </sales_convert_quote>
        <sales_convert_order>
            <final_test1>
                <to_quote>*</to_quote>
            </final_test1>
            <final_test2>
                <to_quote>*</to_quote>
            </final_test2>
        </sales_convert_order>
    </fieldsets>
</global>
</config> 
```

您的安装程序应该是 Mage_Sales_Model_Resource_Setup 的一个实例，所以我创建了自己的类，它只是扩展了上述类

> app/code/local/Final/Test/Model/Resource/Setup.php

```
<?php
    class Final_Test_Model_Resource_Setup extends Mage_Sales_Model_Resource_Setup{

    }
?> 
```

最后我的安装脚本是这样的

> app/code/local/Final/Test/sql/test_setup/install-0.0.1.php

```
<?php
$installer=$this;
$installer->startSetup();
$entitiesToAlter = array('quote','order');
$attributes = array(
    'final_test1' => array(
        'type' => Varien_Db_Ddl_Table::TYPE_INTEGER,
        'default' =>5
        ),
    'final_test2' => array(
        'type' => Varien_Db_Ddl_Table::TYPE_INTEGER,
        'default' =>0
        )
    );

foreach ($entitiesToAlter as $entityName) {
    foreach ($attributes as $attributeCode => $attributeParams) {
        $installer->addAttribute($entityName, $attributeCode, $attributeParams);
    }
}
$installer->endSetup();
?> 
```

您可以参考 sql 文件夹下的 Mage_Sales_Model_Resource_Setup 和 Mage_Sales 模块安装程序文件，以更好地了解正在发生的事情

# xml - xml如何替换字符串mysql xslt xpath中的[元素]？

> ID：11664281
> 
> 赞同：0
> 
> 时间：2012-07-26T07:17:13.920
> 
> 标签：xml, xml-parsing, xmlhttprequest

大家好，我无法确定我可以使用什么脚本来替换 xml 中的部分字符串，例如这里的数据是 xml

```
<product>
<image>
path/to/image.jpg
</image>
<url>
http://website.com/imformation?x=[id]&y=[op]
</url>
<price>
99.99
</price>
</product> 
```

所有这些信息都将被导入数据库，但我对如何替换 url 中的元素有点困惑我知道如何使用 xslt 和 xpath 编辑节点等，但我不确定如何替换 [id]我到处搜索，但无法为我的生活找到有关如何执行此操作的解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:47:34.680

您可以使用 XSLT 替换所有内容。

## XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:variable name="replacedURL">
            <xsl:call-template name="string-replace-all">
                <xsl:with-param name="text" select="/product/url/text()"/>
                <xsl:with-param name="replace" select="'[id]'"/>
                <xsl:with-param name="by" select="'Hello'"/>
            </xsl:call-template>
        </xsl:variable>
        <xsl:value-of select="$replacedURL"/>
    </xsl:template>
    <xsl:template name="string-replace-all">
        <xsl:param name="text"/>
        <xsl:param name="replace"/>
        <xsl:param name="by"/>
        <xsl:choose>
            <xsl:when test="contains($text, $replace)">
                <xsl:value-of select="substring-before($text,$replace)"/>
                <xsl:value-of select="$by"/>
                <xsl:call-template name="string-replace-all">
                    <xsl:with-param name="text" select="substring-after($text,$replace)"/>
                    <xsl:with-param name="replace" select="$replace"/>
                    <xsl:with-param name="by" select="$by"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$text"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

在上面的 XSLT 中，我使用了一个名为**"string-replace-all"**的模板。此模板会将所有匹配项替换为所需的值。

## 模板：

```
<xsl:template name="string-replace-all">
    <xsl:param name="text"/>
    <xsl:param name="replace"/>
    <xsl:param name="by"/>
    <xsl:choose>
        <xsl:when test="contains($text, $replace)">
            <xsl:value-of select="substring-before($text,$replace)"/>
            <xsl:value-of select="$by"/>
            <xsl:call-template name="string-replace-all">
                <xsl:with-param name="text" select="substring-after($text,$replace)"/>
                <xsl:with-param name="replace" select="$replace"/>
                <xsl:with-param name="by" select="$by"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

## 如何调用模板？

```
<xsl:call-template name="string-replace-all">
    <xsl:with-param name="text" select="/product/url/text()"/>
    <xsl:with-param name="replace" select="'[id]'"/>
    <xsl:with-param name="by" select="'Hello'"/>
</xsl:call-template> 
```

这里：

*   `text`: http://website.com/imformation?x=[id]&y=[op]
*   `replace`： [ID]
*   `by`： 你好

## 输出：

```
http://website.com/imformation?x=Hello&y=[op] 
```

也这样做`[op]`。

# jquery - 如何在 jQuery File Upload 中为每个图像发送标题

> ID：11664289
> 
> 赞同：2
> 
> 时间：2012-07-26T07:18:18.290
> 
> 标签：jquery, jquery-plugins, file-upload, ruby-on-rails-3.1

我正在为我的 Rails 应用程序使用 jQuery File Upload 来使用浏览按钮和拖放来上传多个文件。下面是演示站点的链接

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

当我添加 3 个文件并单击“开始上传”时，表单被提交了 3 次，我一个接一个地获取文件对象，即每次提交一个。

我需要一些更改，例如每个图像都需要一个标题文本字段，并且应该为该特定图像保存标题。

假设我设置文本字段的名称，因为它在每个表单提交中`'caption'`发送第三个值。`'caption'`

当我设置文本字段的名称时，`'caption[]'`它正在发送每个表单提交中所有三个的值，`'captions'`但我无法选择哪个图像具有哪个标题。

我正面临这个问题，因为我对 jQuery 和 HTML-5 非常陌生。这个问题有什么解决办法吗？

任何帮助表示赞赏。

# c# - 使用 MVVM 处理 WPF TreeView 鼠标双击

> ID：11664293
> 
> 赞同：1
> 
> 时间：2012-07-26T07:18:41.527
> 
> 标签：c#, wpf, mvvm, .net-4.0

我创建了一个依赖属性来处理树视图的鼠标双击事件。它的部分作用在于，当您双击树视图项时，在我的视图模型中调用所需的方法，现在我想做的是将单击的项（XmlElement）传递给此方法。我添加了另一个依赖属性对于参数，但每次我双击树视图项时，方法中的 XmlElement 参数都是`null`.

有许多外部库，例如：

1) [Expression.Sample.Interactivity](http://expressionblend.codeplex.com/releases/view/30080)和

2)[附加命令行为](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)

但我被要求自己实现一些东西，如果有人能建议我哪里出错了，我将不胜感激。我在下面提供了必要的来源：

**处理依赖属性的类：**

```
 public static class CommandBehavior
  {

  public static readonly DependencyProperty DoubleClickCommand =
  EventBehaviourFactory.CreateCommandExecutionEventBehaviour(
  TreeView.MouseDoubleClickEvent,
  "DoubleClickCommand",
 typeof(CommandBehavior));

public static void SetDoubleClickCommand(DependencyObject o, ICommand value)
{
    o.SetValue(DoubleClickCommand, value);
}

public static ICommand GetDoubleClickCommand(DependencyObject o)
{
    return o.GetValue(DoubleClickCommand) as ICommand;
}

public static readonly DependencyProperty CommandParameterProperty =
DependencyProperty.RegisterAttached("CommandParameter", 
typeof(object),
typeof(CommandBehavior),
new FrameworkPropertyMetadata((object)null,
    new PropertyChangedCallback(OnCommandParameterChanged)));

public static object GetCommandParameter(DependencyObject d)
{
    return (object)d.GetValue(CommandParameterProperty);
}

public static void SetCommandParameter(DependencyObject d, object value)
{
    d.SetValue(CommandParameterProperty, value);
}

private static void OnCommandParameterChanged(DependencyObject d,  DependencyPropertyChangedEventArgs e)
{
} 
```

}

```
 public static class EventBehaviourFactory
 {
 public static DependencyProperty CreateCommandExecutionEventBehaviour(RoutedEvent routedEvent, string propertyName, Type ownerType)
 {
    DependencyProperty property = DependencyProperty.RegisterAttached(propertyName, typeof(ICommand),
        ownerType, new PropertyMetadata(null,
            new ExecuteCommandOnRoutedEventBehaviour(routedEvent).PropertyChangedHandler));
    return property;
} 
```

}

```
public class ExecuteCommandOnRoutedEventBehaviour : ExecuteCommandBehaviour
{
   private readonly RoutedEvent _routedEvent;
   public ExecuteCommandOnRoutedEventBehaviour(RoutedEvent routedEvent)
   {
      _routedEvent = routedEvent;
   }

 protected override void AdjustEventHandlers(DependencyObject sender, object oldValue,   object newValue)
 {
    UIElement element = sender as UIElement;
    if (element == null)
        return;

    if (oldValue != null)
    {
        element.RemoveHandler(_routedEvent, new RoutedEventHandler(EventHandler));
    }
    if (newValue != null)
    {
        element.AddHandler(_routedEvent, new RoutedEventHandler(EventHandler));
    }
}

protected void EventHandler(object sender, RoutedEventArgs e)
{
    HandleEvent(sender, e);
} 
```

}

```
public abstract class ExecuteCommandBehaviour
{
protected DependencyProperty _property;
protected abstract void AdjustEventHandlers(DependencyObject sender, object oldValue, object newValue);
protected void HandleEvent(object sender, EventArgs e)
{
    DependencyObject dp = sender as DependencyObject;
    if (dp == null)
        return;

    DelegateCommand<XmlElement> command = dp.GetValue(_property) as DelegateCommand<XmlElement>;
    if (command == null)
    {
        return;
    }
    command.Execute(sender as XmlElement);
}

public void PropertyChangedHandler(DependencyObject sender, DependencyPropertyChangedEventArgs e)
{
    if (_property == null)
        _property = e.Property;

    object oldValue = e.OldValue;
    object newValue = e.NewValue;
    AdjustEventHandlers(sender, oldValue, newValue);
} 
```

}

**相关 XAML：**

```
<TreeView Name="treeView1"
          local:CommandBehavior.DoubleClickCommand="{Binding ClickedItem}"
          local:CommandBehavior.CommandParameter="{Binding ElementName=treeView1, Path=SelectedItem}"> 
```

**查看型号：**

```
 public partial class FieldTreeViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged = delegate { };

        private DelegateCommand<XmlElement> _clickedItem;
        public DelegateCommand<XmlElement> ClickedItem 
        {
            get { return _clickedItem; }
            set 
            { 
                _clickedItem = value;
                OnPropertyChanged("ClickedItem");
            }
        }

        public FieldTreeViewModel()
        {
            ClickedItem = new DelegateCommand<XmlElement>(InsertContentControl);
        }

        protected virtual void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private void InsertContentControl(XmlElement selectedElement)
        {
            //The method always get's executed when tree view item is double clicked but
            //the selectedElement parameter is always null
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T07:49:14.063

在这一行放一个断点

```
command.Execute(sender as XmlElement); 
```

您会注意到发件人不是类型`XmlElement`（它是树视图），因此您`null`一直得到。您必须检索要绑定的`CommandParameter`（即）并将其指定给调用。`XmlElement``Execute`

# c# - 如何编写正则表达式？

> ID：11664295
> 
> 赞同：1
> 
> 时间：2012-07-26T07:18:45.150
> 
> 标签：c#, .net, regex

**已编辑**

如何编写正则表达式来检查字符串的长度是否为 8 或更多并且它只包含数字，那么它应该包含至少一个字母字符。例如：

1.  1234567 - 有效
2.  1234a5678 - 有效
3.  12345678 - 无效，因为它的长度是 8 并且不包含任何字母

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:19:29.770

因为问题改变了我最初的正则表达式解决方案不再起作用。事实上，现在很难使用单个正则表达式。所以另一种选择：

```
bool Validate(string s) {
    int numDigits = s.Count(c => char.IsNumber(c));
    if (numDigits <= 7) {
        return numDigits == s.Length;
    } else {
        int numLetters = s.Count(c => char.IsLetter(c));
        return numLetters > 0 && numDigits + numLetters == s.Length;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:28:11.513

试试这个`Regex`：

```
^(\d{0,7}|(\d*[a-zA-Z]\d*)+)$ 
```

你的代码可以是这样的：

```
var str = new List<string> {"1234567", "1234a5678", "12345678"};
foreach (string s in str)
{
    var isValid = Regex.IsMatch(s, @"^(\d{0,7}|(\d*[a-zA-Z]\d*)+)$");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:41:53.427

```
int Digits(string input) {
{
   int count = 0;
   foreach (char c in str)
   {
      if (c > '0' && c < '9')
          count++;
   }
   return count;
}

bool IsValid(string input)
{
    if (Digits(input) <= 8) {
        // is numeric
        return Regex.IsMatch(input, @"^[0-9]+$");
    }
    else {
        // has alpha && is alpha-numeric
        return Regex.IsMatch(input, @"[a-zA-Z]+") && Regex.IsMatch(input, @"^[0-9a-zA-Z]+$");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:43:53.550

如果你想创建和测试你的正则表达式，不要犹豫使用这个[regex.powertoy.org](http://regex.powertoy.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T08:54:20.160

如果您使用的是 c#，您可以简化您的生活并使用两个单独的正则表达式：

```
bool res = false;
string str = // your string
if (str < 8) 
{
    res = Regex.IsMatch(str, @"^[0-9]+$");
}
else 
{
    res = Regex.IsMatch(str, @"^(?=[a-zA-Z0-9]*[a-zA-Z])[a-zA-Z0-9]*$");
} 
```

# android - 将列表视图与蓝牙遥控器一起使用

> ID：11664297
> 
> 赞同：1
> 
> 时间：2012-07-26T07:19:09.073
> 
> 标签：android

经过 1 1/2 小时的搜索，我找到了一个实际上在 stackoverflow 上运行的列表视图示例。至少对我来说，谷歌教程没有这样的运气，人们在上面提到的大部分内容显然早已被无法编译的内容所取代。无论如何，我得到了它的工作。然后我添加了我的代码以允许我的蓝牙答题器工作。没有喜悦。

我需要控制平板电脑而不触摸它。它将在玻璃后面，我想要一个 ESC 代码在我的按钮或列表中前进，另一个按钮来执行突出显示的内容。我的应用程序的一个简单的两个按钮界面。该应用程序正在运行，但我想添加一个功能，该功能要求用户从不确定的位置列表（用户提供）中进行选择。所以看起来列表是个好主意。该列表有效，但是当我将蓝牙拦截器代码放入时，它甚至不会手动滚动。经过三个小时试图找出一个列表是否是解决我的问题的正确方法后，我正在寻求帮助。

```
package com.example.listview2;
import android.app.Instrumentation;
import android.app.ListActivity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.widget.ArrayAdapter;

public class HelloListView extends ListActivity {
String[] listItems = {"item 1", "item 2 ", "list","item 1", "item 2 ", "list","item 1",         "item 2 ", "list", "android", "item 3", "foobar", "bar", }; 
@Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.temp);
     setListAdapter(new ArrayAdapter(this,  android.R.layout.simple_list_item_1, listItems));
 }

@Override
public boolean dispatchKeyEvent(KeyEvent ke){
    int keyCode = ke.getKeyCode();
    if(ke.getAction() == KeyEvent.ACTION_DOWN){
        switch (keyCode)
        {

            case 59:

                return true;
            case 19:
                new Thread(new Runnable() {         
                    @Override
                    public void run() {                 
                        new Instrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_TAB);
                    }   
                }).start();
                return true;
            case 20:
                new Thread(new Runnable() {         
                    @Override
                    public void run() {                 
                        new Instrumentation().sendKeyDownUpSync(KeyEvent.KEYCODE_DPAD_CENTER);
                    }   
                }).start();
                return true;
        }
    }
    else if(ke.getAction() == KeyEvent.ACTION_UP){
        switch (keyCode){
            case 59:
            case 19:
            case 20:
                return true;
        }
    }

    return super.dispatchKeyEvent(ke);
} 
```

}

XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/LinearLayout01"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android">
<ListView android:id="@+id/ListView01"
android:layout_width="wrap_content"
android:layout_height="wrap_content" />
</LinearLayout> 
```

# php - queryString 在 PHP 网站上不起作用

> ID：11664299
> 
> 赞同：0
> 
> 时间：2012-07-26T07:19:14.470
> 
> 标签：php, json

我在 PHP 中`var`使用`queryString`，但它没有获取值

[http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=ali40](http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=ali40)

```
$linkID = mysql_connect($host, $user, $pass) or die("Could not connect to host.");
mysql_select_db($database, $linkID) or die("Could not find database.");

if (!function_exists('json_encode'))
{
    function json_encode($a=false)
    {
        if (is_null($a)) return 'null';
        if ($a === false) return 'false';
        if ($a === true) return 'true';
        if (is_scalar($a))
        {
            if (is_float($a))
            {
                // Always use "." for floats.
                return floatval(str_replace(",", ".", strval($a)));
            }

            if (is_string($a))
            {
                static $jsonReplaces = array(array("\\", "/", "\n", "\t", "\r", "\b", "\f", '"'), array('\\\\', '\\/', '\\n', '\\t', '\\r', '\\b', '\\f', '\"'));
                return '"' . str_replace($jsonReplaces[0], $jsonReplaces[1], $a) . '"';
            }
        else
            return $a;
        }

        $isList = true;
        for ($i = 0, reset($a); $i < count($a); $i++, next($a))
        {
            if (key($a) !== $i)
            {
                $isList = false;
                break;
            }
        }

        $result = array();
        if ($isList)
        {
            foreach ($a as $v) $result[] = json_encode($v);
            return '[' . join(',', $result) . ']';
        }
        else
        {
            foreach ($a as $k => $v) $result[] = json_encode($k).':'.json_encode($v);
            return '{' . join(',', $result) . '}';
        }
    } 
}

$user_id=$_GET['user_id'];
echo($user_id);

$query = mysql_query("SELECT s.*, u.user_id FROM survey_master AS s JOIN user_profile AS u on u.user_id = s.user_id where s.user_id='".$user_id."' ");

$rows = array();
while($row = mysql_fetch_assoc($query)) {
    $rows[] = $row;
}

echo json_encode($rows); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:23:49.817

你为什么不先试试这个？

```
<?php
 echo $_GET['user_id'];
?> 
```

这将起作用，因此您可以通过消除找到有问题的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:24:23.330

尝试执行`var_dump($_GET);`以查看 _GET 数组中的内容。

你确定查询返回的东西是`s.user_id = ali40`?

也尝试查询结果的 var_dump，或`var_dump(mysql_errors());`获取任何 mysql 错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:27:21.497

$user_id 未设置。要设置这个：

```
 <?php
   $user_id = $_REQUEST['user_id']; 
   // OR use Strict the super global GET
   $user_id = $_GET['user_id'];
   .... 
```

# postgresql - 更新视图时如何更新表？

> ID：11664302
> 
> 赞同：2
> 
> 时间：2012-07-26T07:19:36.713
> 
> 标签：postgresql, postgis

我想在她的视图更新时更新表格。我使用 postgresql/postgis。

我创建视图。

```
CREATE VIEW filedata_view
AS SELECT num, id, ST_TRANSFORM(the_geom,900913)
FROM filedata 
```

现在，当它更新时，我想用这些数据更新 TABLE。但我听说触发器不能放在 VIEW 中。那么如何做到这一点呢？

现在我使用这个功能

```
CREATE OR REPLACE FUNCTION update_table() RETURNS TRIGGER AS ' 
BEGIN 
UPDATE filedata SET id=NEW.id, the_geom=ST_TRANSFORM(NEW.st_transform,70066) where num=NEW.num ;
END;
' LANGUAGE plpgsql; 
```

没关系。但另一个问题。如何添加触发器来查看我这样做

```
CREATE TRIGGER up_table AFTER UPDATE ON filedata_view
FOR EACH ROW EXECUTE PROCEDURE update_table (); 
```

但得到错误

```
ERROR: "filedata_view" is not a table. 
```

**更新**

`AS SELECT num, id, ST_TRANSFORM(the_geom,900913)`如果我使用它，如何设置列名我得到`num`列：`id`和`st_transform`。如何将第三列的名称设置为`the_geom`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T08:51:11.830

对于 PostgreSQL 9.1 及更高版本，在视图上使用[DO INSTEAD 触发器](http://www.postgresql.org/docs/current/static/sql-createtrigger.html)。视图触发器很难正确处理，并且不太容易出现多重评估等奇怪问题。

对于 PostgreSQL 9.0 及更低版本，您应该使用[规则系统](http://www.postgresql.org/docs/current/static/rules.html)- 请参阅[CREATE RULE ... DO INSTEAD](http://www.postgresql.org/docs/current/static/sql-createrule.html)。如果可能的话，通常最好更新到 9.1 并使用视图触发器，尤其是对于新用户。规则是棘手的事情。

# c# - 在“if”语句之外访问变量

> ID：11664303
> 
> 赞同：6
> 
> 时间：2012-07-26T07:19:38.207
> 
> 标签：c#

我怎样才能`insuranceCost`在`if`声明之外提供？

```
if (this.comboBox5.Text == "Third Party Fire and Theft")
{
    double insuranceCost = 1;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T07:20:36.887

在 if 语句之外定义它。

```
double insuranceCost;
if (this.comboBox5.Text == "Third Party Fire and Theft")
        {
          insuranceCost = 1;
        } 
```

如果您从方法中返回它，那么您可以为其分配默认值或 0，否则您可能会收到错误“使用未分配的变量”；

```
double insuranceCost = 0; 
```

或者

```
double insuranceCost = default(double); // which is 0.0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T07:22:35.633

除了其他答案之外，您可以`if`在这种情况下内联（仅为清楚起见添加括号）：

```
double insuranceCost = (this.comboBox5.Text == "Third Party Fire and Theft") ? 1 : 0; 
```

如果条件不匹配，则替换`0`为您要初始化的任何值。`insuranceCost`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T07:20:49.393

```
 double insuranceCost = 0; 
    if (this.comboBox5.Text == "Third Party Fire and Theft") 
    { 
        insuranceCost = 1; 

    } 
```

在 if 语句之前声明它，并给出一个默认值。在 if 中设置值。如果你不给双精度值一个默认值，你会在编译时得到一个错误。例如

```
double GetInsuranceCost()
{
        double insuranceCost = 0; 
        if (this.comboBox5.Text == "Third Party Fire and Theft") 
        { 
            insuranceCost = 1; 

        } 
        // Without the initialization before the IF this code will not compile
        return insuranceCost;
} 
```

# android - 显示按下 BACK 按钮后输入的内容

> ID：11664304
> 
> 赞同：0
> 
> 时间：2012-07-26T07:19:41.890
> 
> 标签：android, android-layout, android-intent, android-emulator, android-fragments

我有两个片段。

`FirstFragment`显示输入表单

```
Class FirstFragment extends Fragment {
   ...
} 
```

用户提交上述表格后`FirstFragment`，将`SecondFragment`显示。

```
Class SecondFragment extends Fragment{
 ...
} 
```

现在，当用户按下物理**BACK**按钮时，`FirstFragment`表单再次显示。

此时，我还想显示用户之前输入的内容，并将输入内容填写在表单中，以便用户无需再次输入所有内容。

如何在我的两个 Fragment 中实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:31:24.663

覆盖 onSaveInstanceState()，确保调用 super.onSaveInstanceState() 来保留片段。在 onCreate()、onCreateView() 或 onActivityCreated() 中恢复状态。请参阅[处理片段生命周期](http://developer.android.com/guide/components/fragments.html#Lifecycle)和[保存活动状态](http://developer.android.com/guide/components/activities.html#SavingActivityState)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:20:34.593

如果您从后台堆栈返回片段，它不会重新创建片段，而是重新使用相同的实例并在片段生命周期中以 onCreateView() 开始，请参阅片段生命周期。

所以如果你想存储状态，你应该使用实例变量而不是依赖 onSaveInstanceState()。

# routing - 错误 691 VPN Windows Server 2011 SBS

> ID：11664310
> 
> 赞同：1
> 
> 时间：2012-07-26T07:20:06.727
> 
> 标签：routing, vpn, dmz, windows-sbs

我们的网络建立在 ESXi 5 上，该 ESXi 5 通过 IPCop 连接到第二个 NIC。在第一个 NIC 上，它通过一个交换机与我的所有客户端连接。

在 ESXi 上，我有一个带有 2 个 NIC 的 Windows Server SBS 2011 Standard。一个用于我的专用网络，另一个用于连接到互联网。

我已经设法让它与 RRAS 一起工作，但不知何故我无法通过 VPN 连接到我的服务器。我总是得到 691 错误。我使用 PPTP 作为协议，我正在转发所需的端口……我什至禁用了 Windows 防火墙进行测试。

错误告诉我检查我是否输入了正确的用户名或密码，否则 RAS 服务器可能不允许 authenticationprotocoll... 但是在我的 RAS 设置中，我为 ras 和路由激活了 pptp 端口。

对此有什么帮助吗？

# magento - 为什么我的 Magento 付款方式不出现在后端

> ID：11664311
> 
> 赞同：1
> 
> 时间：2012-07-26T07:20:11.690
> 
> 标签：magento, module, payment

这听起来像是一个愚蠢的问题，但我找不到解决方案。这是我的情况：

我正在根据本教程（http://www.magentocommerce.com/wiki/5_-_modules_and_development/payment/create-payment-method-module）为 Magento 开发一个新的付款方式模块，但由于某种原因它没有显示在后端。我已经检查了教程下方的故障排除，但我找不到问题。

于是我又开始阅读和阅读。然后我发现了这一行：“确保 app/code/local 在 include_path 中。”

现在是我的问题：我在哪里可以为我自己的自定义模块定义这条路径？

# sql - 如何使用 INNER JOIN 在 sqlite 中更新？

> ID：11664312
> 
> 赞同：0
> 
> 时间：2012-07-26T07:20:13.653
> 
> 标签：sql, sqlite

我有一些数据要在 SQLite 中更新，这些数据来自多个表。SELECT SQL 工作正常，但 UPDATE SQL 不起作用。我不想使用子查询分别更新每条记录。有没有办法使用连接更新 SQLite 中的多条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:31:15.363

我得到了答案。

这是通过子查询完成的，无需单独更新每条记录。

```
 SELECT records from tbl1 inner join tbl2 ON tbl1.col1=tbl2.col1 inner join tbl3 ON tbl2.col3=tbl3.col1 inner join tbl4 ON tbl4.col3=tbl2.col1 where condition; UPDATE query UPDATE tbl1 SET col1= (select col3 from tbl2,tbl3,tbl4 where tbl1.col1=tbl2.col1 AND tbl4.col3=tbl2.col1 AND tbl2.col3=tbl3.col1) 
```

# perl - 如何在 perl 中将哈希 [of hashes]* 打印为 CSV

> ID：11664313
> 
> 赞同：2
> 
> 时间：2012-07-26T07:20:17.697
> 
> 标签：perl, csv, hash-of-hashes

我想将散列的散列（具有无法定义的深度）打印为 CSV。

想象一下，我有一个由 foos、bars、cars 组成的结构……其中最深哈希的键指向一个数字标量。

我想打印这个结构看起来像这样：

```
foo1;bar1;car1;345
foo1;bar1;car2;25347
foo1;bar2;car1;23
foo2;bar1;car1;863
......
...... 
```

当您不知道哈希结构的深度时（也可能有额外的火星和战争等等），有人知道该怎么做吗？

到目前为止我尝试了什么？

```
sub print_csv {
    my $subj = shift;
    if ( ref($subj) eq "HASH" ) {
        for ( keys $subj ) {
            print "$_;";
            print_csv( $subj->{$_} );
        }
    }
    else {
        print "$subj\n";
    }
} 
```

这是我的一般想法，但哈希的键在第一个之后不会重复。

提前致谢！！！

**编辑**
我已经在使用 perl 5.14。我的问题是，哈希的键在首次出现后不会重复。我当前的输出如下所示：

```
foo1;bar1;4
foo2;bar2;12060
bar3;24
bar1;152
foo3;bar3;1
bar1;815 
```

foo2 有 3 个条（bar1、bar2、bar3），但它的名称“foo2”在第 3 行和第 4 行中没有重复。与 foo3 相同。它有两个条形图（bar1 和 bar3），但第 6 行中缺少它的名称“foo3”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:13:00.987

现在明白了，我想这就是你想要的：

```
sub print_csv {
    my $subj = shift;
    my $prefix = shift || "";
    if ( ref($subj) eq "HASH" ) {
        for ( keys %$subj ) {
            print_csv( $subj->{$_}, $prefix ."$_;");
        }
    }
    else {
        print "$prefix$subj\n";
    }
} 
```

数据：

```
my %hash = ();
my %hash2 = ();
my %hash3 = ();

$hash3{"test3Key"}="test5";
$hash2{"test2Key"}=\%hash3;
$hash2{"test2Key2"}="test2Key2Value";
$hash{"testSimpleKey"} = "test2";
$hash{"testHashRefKey"}=\%hash2; 
```

结果：

```
testSimpleKey;test2
testHashRefKey;test2Key;test3Key;test5
testHashRefKey;test2Key2;test2Key2Value 
```

# asp.net - 没有按钮的文本框搜索和检索数据

> ID：11664321
> 
> 赞同：0
> 
> 时间：2012-07-26T07:20:47.943
> 
> 标签：asp.net, visual-studio-2010

我将 VS 2010 与 C#.NET 一起使用。我需要对文本框（不是富文本框控件）的搜索实现，当用户输入字符串时，他会在下面获得相关列表。类似于谷歌搜索。

例如：当他说键入“AS”时，在文本框下方我需要“ASP.NET”以及类似的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:22:42.123

使用`Ajax` `AutoComplete`控制

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

# jquery - ListBox 和 CheckBoxList，在没有 for 循环的情况下提醒选中的项目

> ID：11664325
> 
> 赞同：0
> 
> 时间：2012-07-26T07:20:55.577
> 
> 标签：jquery

我得到了 ASP.NET ListBox 和 CheckBoxList，并且 onchange 我必须提醒在以下代码片段中完成的选定项目，但是我想摆脱 for 循环。你能帮忙吗？

```
<asp:ListBox ID="ListBox1" runat="server" Width="10%" SelectionMode="Multiple">
    <asp:ListItem Selected="True" Value="1">White</asp:ListItem>
    <asp:ListItem Selected="False" Value="2">Black</asp:ListItem>
    <asp:ListItem Value="3">Red</asp:ListItem>
    <asp:ListItem Value="4">Green</asp:ListItem>
    <asp:ListItem Value="5">Blue</asp:ListItem>
</asp:ListBox>
<br />
<br />
<asp:CheckBoxList ID="CheckBoxList1" runat="server" Width="10%">
    <asp:ListItem Selected="True" Value="1">White</asp:ListItem>
    <asp:ListItem Selected="False" Value="2">Black</asp:ListItem>
    <asp:ListItem Value="3">Red</asp:ListItem>
    <asp:ListItem Value="4">Green</asp:ListItem>
    <asp:ListItem Value="5">Blue</asp:ListItem>
</asp:CheckBoxList> 
```

JavaScript

```
$(document).ready
(
    function () 
    {
        $("#ListBox1").change
        (
            function () 
            {
                for (var i = 0; i < $("#ListBox1 :selected").length; i++) 
                {
                    alert("ListBox Number of Items: " + $("#ListBox1 option").length + "\n"
                    + "ListBox Number of Selected Items: " + $("#ListBox1 :selected").length + "\n"
                    + "ListBox Value: " + $("#ListBox1 :selected")[i].value + "\n"
                    + "ListBox Text: " + $("#ListBox1 :selected")[i].text);
                }
            }
        );
    }
);

$(document).ready
(
    function () 
    {
        $("#CheckBoxList1").change
        (
            function () 
            {
                for (var i = 0; i < $("#CheckBoxList1 :input").length; i++) 
                {
                    if ($("#CheckBoxList1 :input")[i].checked) 
                    {
                        alert("CheckBoxList Number of Items: " + $("#CheckBoxList1 :input").length + "\n"
                            + "CheckBoxList Number of Checked Items: " + $("#CheckBoxList1 input:checked").length + "\n"
                            + "CheckBoxList Value: " + $("#CheckBoxList1 :input")[i].value + "\n"
                            + "CheckBoxList Text: " + $("#CheckBoxList1 label")[i].innerHTML);
                    }
                }
            }
        );
    }
); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:31:24.210

可以使用[`.each()`](http://api.jquery.com/each/)循环遍历元素的方法，`this`在迭代中引用当前元素。

```
$(document).ready
(
    function () 
    {
        $("#ListBox1").change
        (
            function () 
            {
                $("#ListBox1 :selected").each(function()
                {
                    alert("ListBox Number of Items: " + $("#ListBox1 option").length + "\n"
                    + "ListBox Number of Selected Items: " + $("#ListBox1 :selected").length + "\n"
                    + "ListBox Value: " + this.value + "\n"
                    + "ListBox Text: " + this.text);
                }
            }
        );
        $("#CheckBoxList1").change
        (
            function () 
            {
                $("#CheckBoxList1 :input").each(function()
                {
                    if (this.checked) 
                    {
                        alert("CheckBoxList Number of Items: " + $("#CheckBoxList1 :input").length + "\n"
                            + "CheckBoxList Number of Checked Items: " + $("#CheckBoxList1 input:checked").length + "\n"
                            + "CheckBoxList Value: " + this.value + "\n"
                            + "CheckBoxList Text: " + this.innerHTML);
                    }
                }
            }
        );
    }
); 
```

# google-drive-api - 读取 Google Drive 中公共共享文件的内容

> ID：11664332
> 
> 赞同：5
> 
> 时间：2012-07-26T07:21:48.990
> 
> 标签：google-drive-api

我正在开发 Google Drive 应用程序。

该应用程序需要读取某人的 Google Drive 中公开共享文件的内容。

我怎样才能做到这一点？

有没有 API 可以实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T13:03:13.960

使用 Google Drive API 时，将文件的 ACL 设置为公开后，您可以使用`webContentLink`文件元数据的属性直接访问文件，当文件公开时，不需要任何身份验证/授权。

这是一个 feil 元数据示例：[https ://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

这是使用通用客户端库获取文件元数据的方法：[https ://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T21:03:10.893

虽然 webContentLink 确实提供了在浏览器中下载或查看内容的链接，但在我看来，它仍然需要身份验证或者用户已经登录才能查看文件，即使它被共享为“公共”

我希望计划是按照上述方式进行这项工作，无需任何身份验证即可查看公共文件。

# c++ - Qt Creator 不支持 Qwt Mingw 插件？

> ID：11664339
> 
> 赞同：0
> 
> 时间：2012-07-26T07:22:16.977
> 
> 标签：c++, qt, qwt

当我构建 qwt，并希望将其变为 Qt 创建器的 Qt Desiner 时，但发生错误：预期构建密钥“Windows msvc 发布完整配置”，得到“Windows mingw 调试完整配置”，这是图片为了它。发生了什么？

![在此处输入图像描述](../Images/681a7baa9fbe02c84d0aaff3311df4c3.png)

![在此处输入图像描述](../Images/4c6b8e190550881da26c1679ef97ed6b.png)

# hadoop - 当我尝试在 Apache Mahout 中运行示例时，此错误是什么？

> ID：11664341
> 
> 赞同：3
> 
> 时间：2012-07-26T07:22:21.950
> 
> 标签：hadoop, config, mahout

我使用 mahout 配置并运行示例，但出现以下错误：

> hadoop binary is not in PATH,HADOOP_HOME/bin,HADOOP_PREFIX/bin, running local 初始化VM时出错

在我的, 中`.bashrc`，我定义了以下别名：

> JAVA_HOME,HADOOP_CONF_DIR,MAHOUT_CONF_DIR,HADOOP_HOME

我已经在以下位置进行了配置`/etc/bash.bashrc`：

*   `export JAVA_HOME=/usr/lib/jvm/java-6-openjdk-i386`
*   `export PATH=$PATH:$JAVA_HOME/bin`
*   `export HADOOP_HOME=/home/user/hadoop-0.20.2`
*   `export PATH=$PATH:$HADOOP_HOME/bin`
*   `export MAHOUT_HOME=/home/user/mahout/trunk`
*   `export classpath=$classpath:$MAHOUT_HOME/src/conf`
*   `export HADOOP_CONF_DIR=/home/user/hadoop-0.20.2/conf`
*   `export classpath=$classpath:$HADOOP_CONF_DIR`

但是，我有以下错误：

`MAHOUT_LOCAL is set, so we don't add HADOOP_CONF_DIR to classpath. Error: Could not find or load main class classpath MAHOUT_LOCAL is set, running locally Error occurred during initialization of VM Could not reserve enough space for object heap Could not create the Java virtual machine.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:46:32.427

这与 Mahout 或 Hadoop 无关，而与您的 shell 无关。例如，您似乎在某处使用`HADOOP_HOME`而不是`$HADOOP_HOME`在路径表达式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-22T16:45:58.887

也许您可以尝试：取消设置 MAHOUT_LOCAL

# iphone - 由于“无法在捆绑中加载 NIB”，iOS 应用程序崩溃

> ID：11664343
> 
> 赞同：6
> 
> 时间：2012-07-26T07:22:24.450
> 
> 标签：iphone, ios, xcode

当我运行模拟器时出现崩溃，我不知道为什么它给我这个“由于未捕获的异常'NSInternalInconsistencyException'而终止应用程序，原因：'无法在包中加载NIB：'NSBundle（已加载）'名称为' ViewController_iPhone''" 谁能帮助我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T07:27:29.440

您确定“ViewController_iPhone.xib”文件已添加到您的项目中吗？

将其添加到您的项目/目标中，或者（如果它已经存在）检查您在导致崩溃的语句中使用的 nib 名称，或者如果在启动时发生崩溃，请检查您的 info.plist 文件。

如果一切正确，请清理您的项目并重新构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T16:45:47.287

在iOS7上工作时我得到了同样的结果，在iOS6上运行时崩溃了

要解决它：

如果您使用的是 xCode5，您应该转到您的 Xib 文件并将“Interface Builder Document”更改为以 iOS6.1 或更早版本查看，或者将“opens in”xcode 版本更改为 4.6 而不是 5.0

它为我解决了这个问题

# entity-framework - EF 迁移 - 现有数据库但想从头开始部署

> ID：11664346
> 
> 赞同：0
> 
> 时间：2012-07-26T07:22:33.140
> 
> 标签：entity-framework, entity-framework-migrations

我有一个包含架构和数据的现有开发数据库。我使用 microsoft 实用程序（即 CodeFirst 类）创建了这些类。然后我启用了迁移。

现在我对 -IgnoreChanges 的行为感到困惑。如果初始迁移没有 Up() 和 Down() 逻辑，那么当我部署到 prod db 时会发生什么？

EF 是否只是忽略所有迁移并直接从模型中从头开始构建？

如果我不输入 -IgnoreChanges，那么所有的 Up() 和 Down() 逻辑都在那里。但是在更新数据库时，它会抛出一个关于已经存在的同名表的异常。

我正在使用 EF 5 RC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:09:18.987

`IgnoreChanges`适用于您拥有现有应用程序（在 dev 和 prod 中）并且想要开始使用迁移的场景。`IgnoreChanges`将[简化向](http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/)现有数据库添加初始迁移。如果您处于不存在生产数据库的情况下，则不能使用忽略更改。

对于您的情况，最直接的选择是从现有数据库创建实体，并继续处理由您从这些实体迁移创建的另一个数据库，因为您需要在`Up`方法（和`Down`方法）中为所有这些实体创建表。

# ruby - 如果工作时间过长，如何终止 ruby 函数执行？

> ID：11664348
> 
> 赞同：4
> 
> 时间：2012-07-26T07:22:33.530
> 
> 标签：ruby, timeout, execution, terminate

我有一些这样的红宝石代码：

```
result1 = function_1(params)
result2 = function_2(params)
result3 = function_3(params) 
```

但有时其中一些可能需要太多时间才能工作（此功能取决于互联网连接速度）。如果需要超过 5 秒，我需要终止函数的执行。我应该如何用 ruby​​-way 做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-26T07:28:30.953

```
require 'timeout'
timeout_in_seconds = 20
begin
  Timeout::timeout(timeout_in_seconds) do
    #Do something that takes long time
  end
rescue Timeout::Error
  # Too slow!!
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T07:25:11.093

您可以使用[Timeout](http://ruby-doc.org/stdlib-1.9.3/libdoc/timeout/rdoc/Timeout.html)。

```
require 'timeout'
status = Timeout::timeout(5) {
  # Something that should be interrupted if it takes too much time...
} 
```

# asp.net - 在 aspx 的新标签页中打开网站

> ID：11664354
> 
> 赞同：0
> 
> 时间：2012-07-26T07:22:45.890
> 
> 标签：asp.net

我想使用 aspx**在新选项卡中打开网站这是我的代码：-**

```
 hlWebsite.Text = "<a href='http://" + objStudent.Website + "'  OnClientClick='aspnetForm.target ='_blank''> " + objStudent.Website + "</a>"; 
```

当前代码它在同一浏览器中打开。我想在新标签中打开任何人都可以帮助我。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:13:49.637

您无法控制新窗口是作为选项卡还是作为窗口打开。这是用户偏好。如果您通过 javascript 指定窗口的尺寸，`window.open`那么您将获得一个新窗口，但您不能强制使用选项卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:28:24.253

`hlWebsite`如果是超链接，您只需要这样做：

```
 hlWebsite.Text = objStudent.Website;
 hlWebsite.NavigateUrl = objStudent.Website;
 hlWebsite.Target = "_blank"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:28:24.723

你为什么用一个`Label`？An`Hyperlink`会更适合：

```
<asp:HyperLink runat="server" Target="_blank" id="hlWebsite" /> 
```

和

```
hlWebsite.NavigateUrl = objStudent.Website;
hlWebsite.Text = objStudent.Website; 
```

无论如何，您之前的代码不起作用，因为 OnClienClick 是服务器属性。您正在编写原始 html，因此该属性在 html 输出中按原样呈现（并被浏览器忽略）。

~~您可以将其更改为：~~

 ~~```
hlWebsite.Text = "<a href='http://" + objStudent.Website + "'  target='_blank'> " + objStudent.Website + "</a>"; 
```~~  ~~（已删除，因为 Text 属性将在呈现之前进行 html 编码）。

但我认为第一种方法更清楚。~~

# multithreading - 为什么 J2ME Midlet Suite 和 HTTPConnection 需要在不同的线程中

> ID：11664355
> 
> 赞同：1
> 
> 时间：2012-07-26T07:22:56.053
> 
> 标签：multithreading, networking, java-me, midp, eclipseme

我想从 J2ME midlet 调用一个 Servlet，所以我为 Servlet URL 编写了 HTTPConnection 代码来调用 GET 方法。

当 Midlet 套件尝试连接到 Servlet URL 时，我在模拟器中收到以下消息，

```
{#MyMidlet} Midlet Suite wants to connect to {#Servlet URL} using air time,
  this may result in charges, Is it ok to use airtime ? 
```

如果我单击“否”或“是”，则什么都没有发生，它只是被挂起，我使用的是 EclipseME 和 SUN WTK 2.5.2。在控制台中有一个警告，

```
Warning: To avoid potential deadlock, operations that may block, such as 
 networking, should be performed in a different thread than the 
 commandAction() handler. 
```

这意味着，如果我在单独的线程中创建 HttpConnection，问题会得到解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:34:34.380

> 如果我确实在单独的线程中创建 HttpConnection，问题会得到解决吗？

如果你做得对 - 是的，问题将得到解决。这是一个典型的问题，有标准的解决方案。

您提到的警告表示您的 midlet 中的设计问题。您有“重量级”活动（http 连接），它与 UI 在同一线程中运行，阻止它并使其无响应。

避免 UI 事件线程中的负载过重。`commandAction`当or `keyPressed`or etc内部有很多事情要做时`pointerPressed`，只需生成一个新线程即可。为了更好地理解为什么会这样，请考虑学习本教程以了解如何正确地做到这一点：

[网络、用户体验和线程](http://developers.sun.com/mobility/midp/articles/threading/)

> ^(本文解释了 MIDlet 如何在不影响用户界面的情况下建立网络连接。它包括六个迭代示例，说明多线程网络和等待屏幕的使用...)

*   在教程 ( `PrimitiveMidlet`) 中的第一个示例之后，甚至还有对您遇到的问题的详细说明：

    > ...程序员为自己的冗长处理劫持了一个系统线程。当用户选择一个命令时，系统调用他的 commandAction() 方法。调用该方法的线程属于系统，不属于开发者。如果该方法执行得很快，这不会构成犯罪，但在这种情况下，网络连接可能会长时间占用系统的线程。
    > 
    > 在 J2SE 应用程序编程甚至 servlet 编程中，系统会为您创建一个线程，并且对您的处理时间几乎没有限制。MIDlet 线程的规则简单而严格：唯一属于您的线程是您自己创建的线程。
    > 
    > 在 MIDlet 中，您正在编写系统将从其自己的线程之一调用的代码。例如，当您的 MIDlet 的 startApp()、pauseApp()、destroyApp() 和事件处理程序方法被调用时，它们在系统线程中运行。您的方法必须快速返回，以便系统线程可以继续其其他工作。任何不能快速完成的任务都必须移出系统线程。
    > 
    > 这种编程风格可能需要一些时间来适应，因为您实际上只是在编写从系统线程调用的代码。但是，如果您进行过任何其他 GUI 编程，那么您会很熟悉这种技术。AWT 和 Swing 有一个事件分派线程，用于处理操作系统事件并在您的代码中调用事件处理程序。规则是一样的：事件处理程序应该快速执行并将控制权返回给事件调度线程，这样界面的其余部分就不会被锁定......

教程中的更多代码示例展示了如何修复上述设计错误以及如何使 MIDlet 用户界面与网络活动顺利互操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:37:25.150

将其连接创建为单独的线程，如下所示：

```
Thread myConnection = new Thread(new Runnable() {

        public void run() {
            // TODO open connection here

            HttpConnection conn = null;

            try {

                        conn = (HttpConnection) Connector.open(serverURL,
                                Connector.READ_WRITE, true);

                        conn.setRequestMethod(HttpConnection.GET); // or POST method

                    } catch (Exception e) {

                // TODO: handle exception

            } finally {

                // close connection here
            }

        }
    });
    myConnection.start(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-26T09:16:10.337

在 J2ME 中，网络操作放在单独的线程中。
将网络模块放在单独的线程中。如果将网络模块放在单独的线程中，则不会出现以下消息。

```
Warning: To avoid potential deadlock, operations that may block, such as 
 networking, should be performed in a different thread than the 
 commandAction() handler. 
```

在 J2ME 中（j2me 的所有者 Sun/oracle）给出了一些限制。为了安全，一些 API 需要受信任方证书。为此，一些手机在用户单击“是”时会询问用户许可，否则它将不允许。
以下是一些 API 是在 FileConnection（读取/写入文件）api、HttpConnection、HttpsConnection 等场景下出现的。
你检查你的设备是否支持自签名证书。如果支持意味着你使用自签名证书。
可信方证书成本高昂。其最低成本为每年 10000 卢比。以下是一些可信方供应商 Thawte、Verizon、Semantec 等

# jquery - 获取“removeattr 不是函数”异常

> ID：11664359
> 
> 赞同：2
> 
> 时间：2012-07-26T07:23:26.727
> 
> 标签：jquery

我正在使用 jquery-1.7.2.min.js

我收到类型错误：

```
$("#TextBox1").removeattr is not a function [Break On This Error]   
$("#TextBox1").removeattr("disabled"); 
```

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T07:24:16.857

正确的函数名称是[`removeAttr()`](http://api.jquery.com/removeAttr/)，而不是`removeattr`：

```
$("#TextBox1").removeAttr("disabled"); 
```

但从 jQuery 1.6 开始，最好使用[`.prop()`](http://api.jquery.com/prop/)设置原生属性的方法，例如`disabled`和`checked`：

```
$('#TextBox1').prop('disabled', false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:26:42.643

尝试这个

```
$("#TextBox1").removeAttr("disabled"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-12T15:00:54.353

正确的函数名称是`removeAttr()`，而不是`removeattr()`：

```
$("#TextBox1").removeAttr("disabled"); 
```

这是骆驼案。

# c# - 使用 C# 提取 .exe 文件

> ID：11664371
> 
> 赞同：-1
> 
> 时间：2012-07-26T07:24:35.900
> 
> 标签：c#, extract, unzip

这可能是一个简单的问题...我正在尝试提取或解压缩 exe 文件。我尝试使用 winzip 手动解压缩我的 exe 文件，它提取了许多`.mst, .cam, .exe files in a folder cache-2012.1.2.702-win_x64`我想通过使用 c# 以编程方式执行此操作的内容。

我从这个链接得到这个示例代码：[http ://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)

任何人都可以提供一些代码来提取或解压缩 exe 文件，然后我想从提取的文件中启动特定的 exe( `cache_x86.msi`) 文件。

下面制作了一个 zip 文件，它没有提取 .exe 文件。

```
var sfxFileToCreate = @"D:\2012.1.2.702\64\cache-2012.1.2.702-win_x64.exe";
            using (var zip = new ZipFile())
            {
                var filesToAdd = System.IO.Directory.GetFiles(".", "*.cs");
                zip.AddFiles(filesToAdd, "");
                var sfxOptions = new SelfExtractorSaveOptions
                {
                    Flavor = SelfExtractorFlavor.WinFormsApplication,
                    Quiet = false,
                    Copyright = "(c) 2011 Test",
                    Description = "This is a test",
                    SfxExeWindowTitle = "My SFX Window title" 
                };
                zip.SaveSelfExtractor(sfxFileToCreate, sfxOptions);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:28:31.253

我建议使用 7zip.exe 控制台应用程序。您可以使用 Process 类启动它。

[编辑]

这是教程： http: [//www.dotnetperls.com/7-zip-examples](http://www.dotnetperls.com/7-zip-examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T06:07:58.643

```
 output = StartProcessing("MySelfExtractExeFile.exe", " /auto " + sOutputFilePath);

    private string StartProcessing(string sProcessingFile, string Arguments)
    {
        try
        {
            Process p = new Process();
            p.StartInfo.FileName = sProcessingFile;// "cmd.exe";
            p.StartInfo.Arguments = Arguments;// " /auto " + sOutputFilePath;

            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.UseShellExecute = false;
            //make the window Hidden 
            p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            p.Start();
            string output = p.StandardOutput.ReadToEnd();
            p.WaitForExit();
            return output;
        }
        catch (Exception ex)
        {

            return ex            
        }
    } 
```

# facebook-graph-api - 通过 Facebook API 获取用户最近喜欢的照片

> ID：11664375
> 
> 赞同：0
> 
> 时间：2012-07-26T07:25:02.687
> 
> 标签：facebook-graph-api

我想通过 facebook graph api 获取用户喜欢的最近照片（持续时间：1 周）。我搜索了很多，但找不到任何合适的资源。

在 facebook graph api 文档中，我找到了以下链接：

[https://graph.facebook.com/me/likes?access_token=](https://graph.facebook.com/me/likes?access_token=) ...

但这仅显示我喜欢的页面。我该如何解决这个问题？请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:12:37.750

没有 API 可以返回您正在寻找的信息 - 要查看用户是否喜欢特定照片，您必须通过 API 检查照片本身并查看用户是否喜欢它。

# django - 使用自定义 m2m“通过”访问 django 反序列化对象中的旧 m2m_data

> ID：11664380
> 
> 赞同：1
> 
> 时间：2012-07-26T07:25:17.993
> 
> 标签：django, django-orm, django-serializer

如果 m2m 关系是使用自定义“通过”建立的，如何在反序列化的 Django 模型实例中访问旧的 m2m_data？

反序列化对象中的 m2m_data 字段不包含具有自定义“通过”的 m2m 字段，如果我尝试访问 deserialized_object.object.filed 中的该字段 - ORM 对 DB 进行查询并返回该 m2m 关系的当前记录...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:29:28.713

解决方案是——自定义序列化器；只需从您喜欢使用的序列化程序的 handle_m2m_field 方法中删除这一行：

```
 if field.rel.through._meta.auto_created: 
```

# database - 远程连接 PostgreSQL 时出错

> ID：11664385
> 
> 赞同：0
> 
> 时间：2012-07-26T07:25:46.053
> 
> 标签：database, postgresql, postgresql-9.1, pgadmin

当我尝试使用 PostgreSQL 数据库进行远程连接时遇到问题。我在本地 PC 上工作，我在服务器中有数据库。在服务器中，我同时配置了 pg_hba.conf 和 postgresql.conf。第一个文件如下所示：

```
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
host    all             all             46.18.24.0/22           trust
host    all             all             193.106.180.0/22        trust
host    all             all             193.146.230.62/32       trust 
```

第二个：

```
listen_addresses = '*'                  
port = 5432             
max_connections = 100 
```

我确定在服务器端打开了端口 5432。

但是，当我尝试通过 pgAdmin III 从我的 PC (193.146.230.62) 连接时，我不能。问题可能是什么？

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:17:27.153

服务器上是否有防火墙，或者 PC 上是否有第三方附加防火墙？

如果服务器是 Linux，请检查`sudo iptables -L`那里是否有任何东西。默认的无防火墙配置是：

```
Chain INPUT (policy ACCEPT) target     
prot opt source               destination         

Chain FORWARD (policy ACCEPT) target     
prot opt source               destination         

Chain OUTPUT (policy ACCEPT) target     
prot opt source               destination 
```

在 Windows 服务器上，检查 Windows 防火墙以确保`postgres.exe`允许侦听和/或端口已打开。

在 Windows 客户端上，检查是否安装了第 3 方“互联网安全”或防火墙程序。如果只有 Windows 防火墙在那里就可以了，那不会是问题。但是，一些第 3 方防火墙会阻止*传出*连接，这可能是您问题的根源。

检查服务器是否可以`ping`。

如果这没有帮助，**请编辑您的问题以添加您收到的错误消息的确切文字以及您***如何*连接的描述（psql、PgAdmin-III、JDBC 等等）。

连接正常后，请**确保更改`trust`回`md5`并设置用户密码**。以`trust`模式运行几乎会说“嘿，任何可以进入我网络的人，如果你愿意，可以来窃取或破坏我的数据”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:14:17.777

详细请看 PostgreSQL 的日志，可能是你应该设置 $PGDATA/postgresql.conf 文件的参数 log_connections=on 和 log_disconnections=on

顺便说一下，我建议你使用md5认证方式而不是trust。</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T11:02:44.007

如何尝试更改 pg_hba.conf。只需将 127.0.0.1/32 更改为 0.0.0.0/0

```
# IPv4 local connections:
host    all             all             0.0.0.0/0               md5
host    all             all             46.18.24.0/22           trust
host    all             all             193.106.180.0/22        trust
host    all             all             193.146.230.62/32       trust 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:44:24.623

按照 PresleyDias 的建议，尝试更改`listen_addresses`为您的服务器的本地 ip 并`/24`在 中指定掩码。`pg_hba.conf`

# version-control - Mercurial 在“普通”虚拟主机上

> ID：11664386
> 
> 赞同：0
> 
> 时间：2012-07-26T07:25:48.333
> 
> 标签：version-control, mercurial, ftp

我已经在我所有的网站项目中使用了一段时间的 mercurial。我主要使用中央存储库（Bitbucket）并在需要时将项目克隆到我的本地开发盒中。在我的开发环境中，我总是使用 (S)FTP 将网站或更改上传到实时服务器。但是由于大多数实时网站会随着时间的推移而发生变化（上传的文件、ini 文件、其他开发人员等），因此我也希望将实时网站置于版本控制之下。不幸的是，我的大多数客户都使用（便宜的）普通的旧虚拟主机，只有 FTP 访问（如果我幸运的话是 SFTP）。我一直在阅读：

[https://www.mercurial-scm.org/wiki/PublishingRepositories#hgweb](https://www.mercurial-scm.org/wiki/PublishingRepositories#hgweb)

[https://www.mercurial-scm.org/wiki/StaticHTTP](https://www.mercurial-scm.org/wiki/StaticHTTP)

[https://www.mercurial-scm.org/wiki/HgWebDirStepByStep](https://www.mercurial-scm.org/wiki/HgWebDirStepByStep)

以及谷歌向我抛出的一些结果。我不知何故觉得我完全误解了这一切，未能提出一个好的工作流程。对于这种情况，什么是好的工作流程，我将如何设置它？如果需要，我不介意更改为，例如，Bazaar 或 Git（老实说，我有点害怕 Git，我读到的关于 Git 的所有内容似乎比我读到的关于 Mercurial 或 Bazaar 的任何内容技术含量高 10 倍，并将其安装在 Windows 上似乎意味着安装各种辅助软件，但那是另一回事。我提到它只是为了表明 Git 是我最后的手段）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:08:50.357

经过更多研究后，我决定目前最好的方法（直到我能想出更好的解决方案）是将 ftp 文件夹与本地文件夹同步（使用第三方软件，例如 goodsync）。这样我就可以将网站视为（第二个）本地存储库。所以我现在的工作流程是：

1.  在本地同步的实时站点上创建存储库
2.  克隆到开发文件夹
3.  在开发和实时同步文件夹之间推送/更新更改
4.  开发完成后，自动脚本将提交并将实时同步文件夹上的更改推送到 bitbucket。

如果有人能想到更好的方法来做到这一点，我会全力以赴；-)

# selenium-ide - 如何在firefox浏览器中获取excel文件数据？

> ID：11664388
> 
> 赞同：0
> 
> 时间：2012-07-26T07:26:02.860
> 
> 标签：selenium-ide

我想在 selenium ide 中自动化时从 excel 表中获取数据。我想为此编写一个 java 脚本，这将有助于从 excel 表中检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:20:04.573

Webdriver 是更好的选择。

# android - 生成永远不会更改的可靠设备 ID

> ID：11664389
> 
> 赞同：2
> 
> 时间：2012-07-26T07:26:04.297
> 
> 标签：android

我需要生成一个可靠的设备 ID。我现在正在使用`Secure.getString(this.getContentResolver(), Secure.ANDROID_ID)`，但是在恢复出厂设置或刷新另一个 ROM 后它会改变。您能否建议一个真正无法更改的硬件 ID？

更新：到目前为止建议的解决方案都没有帮助：建议的 ID 要么可以更改，要么不总是可用，或两者兼而有之。而且我也绝对需要它来重新安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:29:24.770

您可以像这样获取 IMEI 号码：

```
TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String imei = tm.getDeviceId(); 
```

在您的 AndroidManifest.xml 中：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

IMEI 号码保证是唯一的，并且永远不会在任何设备上更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:25:32.840

我没有找到比`Secure.getString(this.getContentResolver(), Secure.ANDROID_ID)`这更好的东西了，尽管它有缺点，但必须继续使用它。

# c# - TextBox 忽略“空格”键输入。为什么？

> ID：11664391
> 
> 赞同：4
> 
> 时间：2012-07-26T07:26:07.400
> 
> 标签：c#, silverlight, windows-phone-7

我正在为 Windows Phone 7 开发应用程序，但标准文本框遇到了一个非常奇怪的问题：我无法键入“空格”。所有其他键都可以正常工作，但“空格”键会被忽略，不会弹出任何错误。

我动态填充文本框。这是负责此操作的代码：

```
var newComment = new TextBox()
{
    Width = 378,
    MaxLength = 128,
    AcceptsReturn = true,
    /*Tag = ... ,*/
    /*Style = ... ,*/
    /*BorderBrush = ... ,*/
    Margin = new Thickness(-12, 0, 0, 0)
};

newComment.InputScope = new InputScope();
newComment.InputScope.Names.Add(new InputScopeName() { NameValue = InputScopeNameValue.Text });

newComment.KeyDown += (sender, args) =>
{
    if (args.Key == System.Windows.Input.Key.Enter)
    {
        args.Handled = true;
        /* ... */
    }
};

container.Items.Add(newComment); 
```

我注释掉了一些（我认为）无关的东西。“容器”是 ListBox 的一个实例。

当我在“KeyDown”事件处理程序中放置一个断点并按“Space”时，它`args.Key`是“Unknown”（`args.PlatformKeyCode`是“160”）。我在我的应用程序的其他地方有文本框（虽然不是动态的），它们工作得很好。

在模拟器和设备上进行了测试（如果这有什么不同，我有 HTC Mozart）。为芒果开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:14:40.387

事实证明，问题是由于`TextBox`在 a 内部引起的`Button`（因为我需要能够点击整个“东西”）。将其置于已`Button`解决的问题之外。

# java - 行的非阻塞 (NIO) 读取

> ID：11664393
> 
> 赞同：14
> 
> 时间：2012-07-26T07:26:34.843
> 
> 标签：java, file, nio

我需要使用 逐行读取文件`java.nio`，但`nio`没有像`readline()`一次读取一个完整行的方法。有哪些解决方案？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-05-28T12:52:49.857

我知道你们不喜欢限制，但如果询问者无权访问 IO 包或由于某种原因不允许导入它，那么最佳答案没有帮助......

完全免费的两种方法：

1.  `java.nio.file.Files.lines`, 返回一个行流，它是 .util 包的一部分，而不是像 bufferedReader 这样的 .io 包。

2.  `java.nio.file.Files.readAllLines` , 返回可迭代的行集合。继续使用`iterator`或`for each`提取单行。

干杯

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-13T11:48:04.173

为什么？NIO 不支持读线。你可以每秒阅读数百万行，`BufferedReader.readLine().`我认为这就足够了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-29T17:02:21.987

Oracle 在教程中介绍了一个示例。 [https://docs.oracle.com/javase/tutorial/essential/io/file.html#streams](https://docs.oracle.com/javase/tutorial/essential/io/file.html#streams)

```
Path file = ...;
try (InputStream in = Files.newInputStream(file);
    BufferedReader reader =
      new BufferedReader(new InputStreamReader(in))) {
    String line = null;
    while ((line = reader.readLine()) != null) {
        System.out.println(line);
    }
} catch (IOException x) {
    System.err.println(x);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-15T22:27:03.967

使用[`java.nio.file.Files`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html)您可以执行以下操作：

```
Path path = FileSystems.getDefault().getPath("/path/to", "file.txt");
Files.lines(path).forEach(line ->
    // consume line
); 
```

当该`lines(path)`方法返回 a[`Stream`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html)时，您可以利用 Stream API 的任何其他方法，例如仅读取第一行（如果存在）：

```
Optional<String> firstLine = Files.lines(path).findFirst(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-07T10:52:43.380

这个对我有用....

```
 public static void main(String[] args) throws IOException 
    {
        RandomAccessFile aFile = new RandomAccessFile
                ("F:\\DetailsMy1.txt", "r");
        FileChannel inChannel = aFile.getChannel();
        ByteBuffer buffer = ByteBuffer.allocate(1);
        StringBuffer line = new StringBuffer();
        while(inChannel.read(buffer) > 0)
        {
            buffer.flip();
            for (int i = 0; i < buffer.limit(); i++)
            {
                char ch = ((char) buffer.get());
                if(ch=='\r'){
                    System.out.print(line+"[EOL]");
                    line=new StringBuffer();
                }else{
                    line.append(ch);
                }
            }
            buffer.clear(); // do something with the data and clear/compact it.
        }
        inChannel.close();
        aFile.close();
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-14T17:47:21.883

为了支持 EJP 和上面的其他内容，您可以参考这篇文章：[http ://www.javaworld.com/article/2078654/java-se/java-se-five-ways-to-maximize-java-nio-and- nio-2.html](http://www.javaworld.com/article/2078654/java-se/java-se-five-ways-to-maximize-java-nio-and-nio-2.html)

特别是：“虽然 NIO 经常因其性能优势而被宣传，但更准确的说法是它具有高响应性。在某些情况下，NIO 的性能实际上比基本的 Java I/O 还要差。例如，对于小文件的简单顺序读取和写入, 一个简单的流实现可能比相应的面向事件的基于通道的编码快两到三倍。此外, 非多路复用通道 - 即单独线程中的通道 - 可能比注册其选择器的通道慢得多在一个线程中。”

我要强调 NIO***在某些情况下 [...] 的性能比基本 Java I/O 差***。作者随后列出了一系列问题，以推动快速分析 NIO 是否是正确的选择。如果您（或接下来的人）仍然决定追求 NIO，那么可以通过代码示例很好地解释它的使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-17T06:21:51.473

1）您可以使用 lines 方法将 BufferedReader 转换为 Stream

```
List<String> list = new ArrayList<>();

try (BufferedReader br = new BufferedReader(new FileReader(file))) {
    list = br.lines().collect(Collectors.toList());    
} 
```

2) 直接使用 Files.lines 方法获取一个 Stream：

```
try (Stream<String> stream = Files.lines(Paths.get(fileName))) {
    stream
        .filter(s -> s.endswith("/"))
        .map(String::toUpperCase)
        .forEach(System.out::println);
} 
```

正如 DanielBraun 在他的回答中指出的那样，您也可以使用 readAllLines 方法而不是 lines 方法，区别在于，直接来自文档：

> 与 readAllLines 不同，此方法不会将所有行读入 List，而是在使用流时延迟填充。

Java 文档中的[包摘要](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html)页面提供了关于 Streams 的简洁明了的概述，[本文](https://stackabuse.com/reading-a-file-line-by-line-in-java/)还列出了一些其他在 Java 中逐行读取文件的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-26T14:42:33.063

NIO 通常用于执行直接内存访问或块介导的批量数据传输。它确实做其他事情，但其他功能更多地与阻塞和非阻塞数据访问有关。

因此，您可能希望使用 NIO 快速（或以非阻塞方式）获取数据；但是，如果您想“逐行读取”，则最好在 NIO 读取可用数据后进行行检测。这可以通过在 NIO 刚刚读取的缓冲区上放置一个“行读取”外观来轻松实现。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-05-12T07:32:53.783

只需使用： [https ://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-)

编辑（人类可读的翻译，关于 MeetTitan）：这意味着：使用`java.nio.file.Files.lines(Path)`- 它返回一个`Stream<String>`代表文件行的。它是 Java API 提供的一种方法。可以查阅 Javadoc 以查看详细信息。因此，最相关的信息是：`Files.lines()`自 Java 1.8 以来就存在。用它。

# python - wxPython 相机输入

> ID：11664394
> 
> 赞同：0
> 
> 时间：2012-07-26T07:26:41.793
> 
> 标签：python, camera, wxpython

我对使用 wxPython 比较陌生，想知道是否有人可以告诉我在哪里可以找到教程或文本来学习如何使用它。特别是我需要知道如何将相机连接到 wxPython GUI 并显示来自相机的输入以及将输入存储到列表中。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:46:15.403

也许你应该看看以下，

[集成视频捕获到 wxPython](http://wxpython-users.1045709.n5.nabble.com/OpenCV-2-1-Integration-video-capture-into-wxPython-td3281960.html)

该软件包可在此处获得：[pyopencv](http://pypi.python.org/pypi/pyopencv)

# guice - shiro & guice - 如何注入 AuthenticationStrategy？

> ID：11664396
> 
> 赞同：1
> 
> 时间：2012-07-26T07:26:41.920
> 
> 标签：guice, shiro

我正在使用 Shiro 和 guice。Shiro有两个活跃的领域。

默认的 shiro AuthenticationStrategy 是“AtLeastOneSuccessfulStrategy”。这种策略的基本思想很好，但问题是它忽略了大量异常。这意味着如果 Realm1 抛出 IncorrectCredentialsException ，则无法知道它，因为它由 AuthenticationException 包装，并带有非领域支持令牌的消息。

如何用 FirstSuccessfulStrategy 替换策略？

目前这是我在 ShiroWebModule 中所拥有的：

```
 @Override
    protected void configureShiroWeb() {
       Multibinder<Realm> multibinder = Multibinder.newSetBinder(binder(), Realm.class);
        multibinder.addBinding().to(RealmA.class);
        multibinder.addBinding().to(RealmB.class);
        bind( HashedCredentialsMatcher.class );
        bind( CredentialsMatcher.class ).to( HashedCredentialsMatcher.class );
        bindConstant().annotatedWith( Names.named( "shiro.hashAlgorithmName" ) ).to( Md5Hash.ALGORITHM_NAME );
        addFilterChain( "/login.jsp", AUTHC_REST );
    }

    @Override
    protected void bindSessionManager( AnnotatedBindingBuilder<SessionManager> bind ) {
        bind.to( ServletContainerSessionManager.class );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:42:33.970

通过添加解决

```
 bind(Authenticator.class).toInstance(new ModularRealmAuthenticator());
   bind(AuthenticationStrategy.class).to(FirstSuccessfulStrategy.class); 
```

到 configureShiroWeb() 方法。

# jquery - 从中获取更改的值使用 jQuery 我正在尝试使用 jQuery 获取 <select>输入的更改值。更改前</select> <option value="Administrator">Administrator</option> <option value="Faculty" selected="selected" &<="" h1="">> ID：11664399
> 
> 赞同：4
> 
> 时间：2012-07-26T07:26:51.357
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T07:37:43.830

去做：

```
var valueBeforeChange = $('select[name="inputUserRoles[]"]').val();

$('select[name="inputUserRoles[]"]').change(function(e) {
  var inputUserRoles = $(this).val();

  //you can compare here with value before change
  ...

  valueBeforeChange = inputUserRoles;
}); 
```</option>

# python - 如何使用编码保存临时文件

> ID：11664400
> 
> 赞同：-1
> 
> 时间：2012-07-26T07:27:05.630
> 
> 标签：python, openerp

前几天，我曾问过如何存储我们填写的字段A的数据也出现在字段B中。我找到了，但是出现了问题。这是我的代码

```
def _compute_dept(self, cr, uid, ids, deposit, available, arg, context=None):
    result = {}
    for r in self.browse(cr, uid, ids, context=context):
       avail=0
       if r.deposit:
            avail = r.deposit
            print avail
       result[r.id] = avail
    return result
_columns = {
    'name': fields.many2one('res.partner','Partner'),
    'date':fields.date('Date of Deposit'),
    'deposit': fields.float('Deposit'),
    'available': fields.function(_compute_dept, type='float', method=True, store=True, string='Available', readonly=True),
    'note': fields.text('Description'),
} 
```

但出现的问题。如果我在字段 A 中输入“10”，那么字段 B 也会出现“10”，但是当我在字段 A 中再次输入“20”时，字段 B 会出现“20”......好吧，它应该显示 30，因为 10 + 20。那么如何在编码温度中保留数字 10。字段 B 显示数字 30

PS：A区是存款，B区是可用的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:53:38.023

你应该改变你的设计。

你需要一个`bank_account`with many (many2one) `deposits`。然后在模型中创建一个`available`函数字段。`bank_account`

# magento-1.6 - 将 magento 站点移动到另一个域时需要在数据库中进行更改

> ID：11664401
> 
> 赞同：0
> 
> 时间：2012-07-26T07:27:18.757
> 
> 标签：magento-1.6

请告诉我，在我将 Magento 网站移动到任何其他域时，我必须在数据库中更改域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:03:53.023

在 core_config_data 表中进行更改。

将 web/unsecure/base_url 的值设置为 http://“您的网站名称” 将 web/secure/base_url 的值设置为 http://“您的网站名称”

您还可以在管理面板中进行手动更改（只是为了确认您的更改）。转到系统-> 配置-> 网络-> 不安全-> 基本 URL：http://“您的网站名称”和

系统->配置->网络->安全->基本URL：http://“你的网站名称”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:39:25.423

你要找的桌子是`core_config_data`

您正在寻找的两条路径是：

*   `web/unsecure/base_url` - （不安全，即 http://）

*   `web/secure/base_url` - （安全即 https://）

假设您有一个商店，您可以使用以下查询..

```
update core_config_data set value = 'YOUR_UNSECURE_BASE_URL_HERE' where path = 'web/unsecure/base_url';
update core_config_data set value = 'YOUR_SECURE_BASE_URL_HERE' where path = 'web/secure/base_url'; 
```

最后，清除 var/cache 目录

# php - 点击保存文件

> ID：11664402
> 
> 赞同：6
> 
> 时间：2012-07-26T07:27:19.647
> 
> 标签：php, html, save

我希望能够在单击时下载 csv 文件而不是在浏览器中打开

我把这段代码

```
<a href="file.csv">download file</a> 
```

但单击它会在浏览器中打开 v 文件。在 localhost 中，当我单击链接时，它正在下载，但在服务器上时，它在浏览器中打开

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T07:30:07.863

You have to set [headers](http://php.net/manual/en/function.header.php) in order to inform web-browser for opening file-save dialog.

download.php

* * *

```
 <?php
    header("Content-Type: application/octet-stream");
    header("Content-Disposition: attachment; filename=sample.csv");
    readfile('file.csv');
   ?> 
```

showlinks.php

* * *

```
<a href="download.php">Download file</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:53:35.463

HTML5 为您提供了另一种方式——`download`属性。问题是目前只有 Chrome 支持它。它将需要一些时间才能成为广泛使用的解决方案。

所以现在我会推荐你​​@AVD 的 PHP 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:31:36.777

尝试使用以下 JS 代码：

```
<a href="javascript:void(0);" onclick="javascript:document.execCommand('SaveAs','1','file.csv')>download file</a> 
```

# ruby - Ruby 是否提供了一种使用指定编码执行 File.read() 的方法？

> ID：11664403
> 
> 赞同：38
> 
> 时间：2012-07-26T07:27:20.693
> 
> 标签：ruby, file, encoding

在 ruby​​ 1.9.x 中，我们可以使用`File.open('filename','r:iso-8859-1')`. 如果我直接将许多短文件读入字符串，我通常更喜欢使用单行 File.read()。有没有办法可以直接指定编码，或者我必须诉诸以下方法之一？

```
str = File.read('filename')
str.force_encoding('iso-8859-1') 
```

或者

```
f = File.open('filename', 'r:iso-8859-1')
s = ''
while (line = f.gets)
    s += line
end
f.close 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-26T07:39:24.597

来自[精美手册](http://ruby-doc.org/core/IO.html#method-c-read)：

> **读取（名称，[长度[，偏移量]]，open_args）→字符串**
> 
> 打开文件，可选择查找给定的`offset`，然后返回`length`字节（默认为文件的其余部分）。`read`确保文件在返回之前关闭。
> 
> 如果最后一个参数是一个哈希，它指定内部 open() 的选项。

所以你可以这样说：

```
s = File.read('pancakes', :encoding => 'iso-8859-1')
s.encoding
#<Encoding:ISO-8859-1> 
```

# java - 如何处理与边界'\\G'相关的这个正则表达式？

> ID：11664405
> 
> 赞同：1
> 
> 时间：2012-07-26T07:27:24.103
> 
> 标签：java, regex

最近在学习`regex`Java的部分，今天遇到一个关于boundry使用的问题`\\G`，下面是我的代码：

```
 String input = "abcdec";
  System.out.println(String.format("Before :'%s' ; after replace : '%s'", input , input.replaceAll("\\Gx?", "!"))); 
```

当它打印`Before :'abcdec' ; after replace : '!abcdec'`时，我不知道为什么它打印这个，在它第一次与字符串的开头匹配之后，它用一个字符'！'替换了这个地方 ，但为什么不能再次匹配？我认为正则表达式'\ Gx？可以匹配每个地方。

我需要你的帮助，感谢每一个帮助！谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:39:24.207

[我从这里](http://www.javaregex.com/tutorial4.html)引用：`If you wish one search to pick up where the last one left off you can use the "\G" pattern element.` 这意味着如果没有执行搜索，那么 \G 只是告诉搜索从字符串的开头开始并在第一个匹配时停止。

这是另一个[例子](http://ideone.com/j80TZ)。请注意，由于第一次替换没有从 0 开始移动起始位置，所以再次在字符串的请求中添加了一个感叹号。

你对你的计划有什么期待？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:51:09.537

编辑：好的，明白了。删除了错误的假设。

* * *

会发生什么：

1.  `replaceAll`从输入的开头开始（索引`0`）
2.  `\G`匹配初始起始值`0`
3.  `x`找不到 - 没关系，这是有条件的
4.  到了终点。`0`从到成功的第一场比赛`0`！
5.  将替换添加`!`到输出
6.  下一次迭代，从一个字符开始（索引`1`）
7.  最后一场比赛的结局是`0`。`\G`，申请的职位`1`，**不匹配**！
8.  ...遍历整个字符串，它永远不会匹配。
9.  返回输出字符串：`!abc...`

当我阅读[Regex Boundary Matchers Java Tuturial](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)中的最后一个示例时，我更清楚了。

# java - 将值传递给 RESTful Web 服务发布方法

> ID：11664409
> 
> 赞同：0
> 
> 时间：2012-07-26T07:27:44.443
> 
> 标签：java, xml, rest, xml-parsing, jax-rs

我成功创建了 RESTful Web 服务并将其部署在 Apache Tomcat 7.0 中。成功部署后，我启动我的服务器。通过使用以下命令，我调用了 Web 服务。

```
WebResource resource = client.resource("http://localhost:8080/rest/samp/create"); 
```

我的网络方法是

```
@POST
@Path("/create")
@Produces(MediaType.TEXT_XML)
@Consumes(MediaType.TEXT_XML)
public final String sample(final String xmlMessage) {

    return "<xml version=1.0><welcome>"+xmlmessage+"</welcome>";    
} 
```

在这里，我将 XML 内容作为参数传递并获取 XML 内容作为响应。

现在我需要的是如何将 XML 内容传递给 web 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:33:52.163

你可以试试卷曲：

```
http://curl.haxx.se/ 
```

使用 post 发送数据的简单命令行：

```
curl -d "here puts data" -X POST http://mysite/create 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:40:40.993

我猜这里使用的图书馆是泽西岛。

您必须使用构建器来设置适当的 HTTP 标头、方法和实体主体。

```
WebResource resource = client.resource("http://localhost:8080/rest/samp/create");
String request = "<your_xml>...</your_xml>";
String response = resource.accept(
     MediaType.TEXT_XML).
     header("X-FOO", "BAR"). //this line is not necessary, just an example
     type(MediaType.TEXT_XML).
     post(String.class, request); 
```

但我建议改用 JAXB。将 XML 创建为纯字符串只是粗略且不必要的烦人。它没有在这样一个简单的示例中显示（获取整个 XML 并用另一个标记包装它），但它很快就会出现。

[本教程](http://www.vogella.com/articles/REST/article.html)应该可以帮助您入门。

# vba - 使用 VBA 从 Excel 中的剪贴板访问文本文件

> ID：11664416
> 
> 赞同：0
> 
> 时间：2012-07-26T07:28:05.647
> 
> 标签：vba, excel, clipboard

我尝试为 excel 创建一个宏，它读取文本文件的内容，创建一个新的工作簿，然后使用创建的工作簿中的特定部分。为了能够轻松访问所需的列，我使用了 Workbook.OpenText。但是，我不想为我的文件插入一个修复路径，而是想获取我复制到剪贴板的文件的路径。我的问题是，我不知道如何访问 Windows 的剪贴板。[我在这里](http://www.cpearson.com/excel/Clipboard.aspx)找到了有关使用剪贴板的教程，但我无法访问预期的库。我还在我的计算机上搜索了一个名为 FM20.DLL 的文件，如本[论坛](http://www.pcreview.co.uk/forums/do-add-vba-reference-microsoft-forms-2-0-object-library-t3365334.html)中所述，但找不到任何内容。这是我的代码：

```
Workbooks.OpenText Filename:="C:\path\to.txt", Origin _
        :=-535, StartRow:=16, DataType:=xlFixedWidth, FieldInfo:=Array(Array(0, 1 _
        ), Array(14, 1), Array(58, 1), Array(68, 1)), TrailingMinusNumbers:=True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:50:47.757

**假设您根本不需要任何用户表单**

![第1步](../Images/b958321b928d05bb22835db90621bb38.png)

![第2步](../Images/314c65ca80464e999f0688794f7761a1.png)

![第 3 步](../Images/97e985cc711f4e9e58d2f1172d375d3f.png)

**现在添加代码**

```
Sub ShowClipboardData()
    'In the VBA editor, go to Tools, References, and set a reference to the "Microsoft Forms 2.0 Object Library"
    Dim MyDataObject As DataObject
    Set MyDataObject = New DataObject
    MyDataObject.GetFromClipBoard
    MyDataObject.GetText
    MsgBox CStr(MyDataObject.GetText)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:57:19.740

我只是以不同的方式解决了这个问题。我不再使用 OpenText 方法。我使用以下代码从剪贴板插入到我的工作表中：

```
Range("A1").Select
ActiveSheet.Paste 
```

这不是我的问题的答案，但对我来说看起来更容易作为之前的答案。它也有效，但我必须手动导入库并编写更多代码。我必须访问代码的方式现在是另一种方式。我从一行跳到另一行，将行保存在变量中，从字符串中删除空格

```
stringLine = Replace(Range("A" & row).Value, " ", "") 
```

并通过使用创建一个具有多个值的数组

```
anArray = Split(stringLine, "|") 
```

无论如何，谢谢你的帮助；）

# iphone - 如何从 UITextView 中获取检测到的文本？

> ID：11664417
> 
> 赞同：-1
> 
> 时间：2012-07-26T07:28:09.783
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [从 UITextView 获取检测到的数据](https://stackoverflow.com/questions/11648542/getting-detected-data-from-the-uitextview)

我昨天发布了同样的问题，但我没有得到想要的答复，所以我再次发布这个问题，并提供更多的说明。抱歉。我正在使用 UITextView 。我制作了 UITextView 来检测所有链接、地址、事件和电话号码。很好，它给了我想要的输出，如下所示： ![在此处输入图像描述](../Images/a036986caaa57a06e7383d12fe397115.png)

现在我的要求是将这些电话号码（123456）和电子邮件（abc@mail.com）保存到单独的变量中。是否有任何规定或方法可以从 textview 获取唯一检测到的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:02:07.753

看看`NSDataDetector`（可用的 iOS 4.0+，OS X 10.7+） [https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html)

您应该能够将文本从`UITextView`as 中取出`NSString`，然后通过`NSDataDetector`. 您应该能够通过搜索找到有关 Stack Overflow 和网络的更多信息`NSDataDetector`。

# mysql - Do PDO (non-emulated) statements keep track of earlier statements?

> ID：11664427
> 
> 赞同：-2
> 
> 时间：2012-07-26T07:28:45.713
> 
> 标签：mysql, pdo

In other words, are the scenarios different performance-wise?

**A:**

```
for($i = 0; $i < 10; $i++)
{
    $pdo->prepare("SELECT :foo;")->execute(['foo' => 'test']);
} 
```

**B:**

```
$sth    = $pdo->prepare("SELECT :foo;");

for($i = 0; $i < 10; $i++)
{
    $sth->execute(['foo' => 'test']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:35:44.537

不，pdo 没有这样的缓存机制，在场景 A 中，您每次都在创建 pdo 语句。

# php - Select records from 3 tables

> ID：11664431
> 
> 赞同：0
> 
> 时间：2012-07-26T07:28:57.900
> 
> 标签：php, mysql, sql, join

I have these 3 tables with the following columns:

1.  `employee`: empId (PK), hireDate, jobTitle, department (FK), status (FK)
2.  `status`: statusId, statusDesc
3.  `department`: departmentId, deptName, supervisorId, deptHeadId

What I want to do is to display the following columns: `hireDate`, `jobTitle`, `deptName`, `statusDesc`

The problem that I'm encountering is that it does not display the `statusDesc` and `deptName` records.

Here's my code/sql query:

```
$empId = $_GET['empId'];

$result = mysql_query("SELECT e.empId, e.hireDate, e.jobTitle, d.deptName, s.statusDesc 
                        FROM employee e , department d, status s
                        WHERE e.department = d.departmentId AND e.status = s.statusId AND e.empId = $empId;"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:35:24.923

从您的查询中，如果员工有一个有效的部门和一个有效的状态 - 如果列是空白的，那么这是因为部门和状态表中的描述符字段是空的（deptName 和 statusDesc）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:50:16.953

尝试这个。

```
$empId = $_GET['empId'];

$result = mysql_query("SELECT e.empId, e.hireDate, e.jobTitle, d.deptName, s.statusDesc 
                        FROM employee e 
                        INNER Join department d on e.department = d.departmentId
                        INNER Join status s on e.status = s.statusId
                        WHERE e.empId = $empId;"); 
```

# javascript - CDN Support for bundling

> ID：11664432
> 
> 赞同：2
> 
> 时间：2012-07-26T07:28:59.687
> 
> 标签：javascript, asp.net-mvc, cdn

Is there CDN Support for bundling in asp.net MVC4 ?

For example I don't want to host my own version of jquery locally and i would like to use Google CDN.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:30:54.290

No, you will have to build your own CDN. You could have a dedicated domain that will host all your bundled scripts served throughout an ASP.NET MVC 4 application. This way all your applications could reference the static resources from this CDN. But don't expect to be able to upload your custom scripts on Google CDN any time soon.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:46:02.907

阅读这篇文章，其中展示了如何设置捆绑包的 CDN 路径以及设置后备表达式以防 CDN 出现故障 [http://codebetter.com/howarddierking/2012/10/20/new-web-optimization-pre -release-package-on-nuget/](http://codebetter.com/howarddierking/2012/10/20/new-web-optimization-pre-release-package-on-nuget/)

# java - Maven conflict between interface and class with same naming and packaging

> ID：11664433
> 
> 赞同：0
> 
> 时间：2012-07-26T07:29:00.267
> 
> 标签：java, maven, dependencies, package

I have 2 projects to be merged in one maven project

One project has a java class with name

```
com.xyz.XyzManager 
```

and the other project has an interface with the name

```
com.xyz.XyzManager 
```

in the code I use

```
XyzManager manager = new XyzManagerImpl(); 
```

where XyzManagerImpl is an implementation of the interface

and also in the same code I use

```
XyzManager manager = new XyzManager(); 
```

where I use the class not the interface

I get compilation errors when I incluse both projects as it has conflict either when I use XyzManager as an interface or XyzManager as a java class

hope the issue is explained clear

# c - how fprintf behavior when multi-threaded and multi-processed?

> ID：11664434
> 
> 赞同：2
> 
> 时间：2012-07-26T07:29:08.147
> 
> 标签：c, linux, printf

Here is process `a` and `b`, both of which are multithreaded.

1.  `a` forks `b` and `b` immediatly execs one new program;
2.  `a` `dup`s and `freopen`s stderr to the logfile (`a` is defacto apache's httpd2.22)
3.  `b` inherits the opened stderr from `a`. ( i am adapting apache httpd, `b` is my program), and `b` uses `fprintf(stderr....)` for logging
4.  so `a`, `b` share the same file for logging
5.  there is no lock mechanism for `a`, `b` to write log

I found that some log msg are interleaving, and a little bit of log msg got lost.

Can the two writers to the same file implicitly lock each other out?

The more important question is: If we use `fprintf` only within one single multithreaded process, `fprintf` is thread safe, i.e. one call of `fprintf` won't intervene another `fprintf` call in another thread? Many articles said this, but this is not easy to ensure myself, so I ask for help here.

A: the code for duplicate the fd is like this:

```
......
rv = apr_file_dup2(stderr_log, s_main->error_log, stderr_p);//dup the stderr to the logfile
apr_file_close(s_main->error_log);//here ,2 fd point to the same file description,so close one of 
```

then

B:apache it self use this manner for logging:

```
......
if (rv != APR_SUCCESS) {
    ap_log_error(APLOG_MARK, APLOG_CRIT, rv, s_main, "........."); 
```

C:for convenience,i logging in this way:

```
fprintf(stderr,".....\n") 
```

I am quite sure apache and me use the same fd for file writing.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T07:51:57.087

如果您使用单个`FILE`对象对打开的文件执行输出，则对该文件的整个`fprintf`调用`FILE`将是原子的，即`FILE`在调用期间保持锁定`fprintf`。由于 a`FILE`对单个进程的地址空间是本地的，因此这种设置仅适用于多线程应用程序；它不适用于多进程设置，其中几个不同的进程正在访问`FILE`引用同一底层打开文件的单独对象。即使您在`fprintf`这里使用，每个进程都有自己的`FILE`它可以锁定和解锁，而其他人看不到更改，因此写入最终可能是交错的。有几种方法可以防止这种情况发生：

1.  在共享内存中分配一个同步对象（例如进程共享的信号量或互斥锁），并使每个进程在写入文件之前获得锁（因此一次只能写入一个进程）；或者

2.  使用文件系统级别的咨询锁定，例如`fcntl`锁定或（非 POSIX）BSD`flock`接口；或者

3.  不要直接写入日志文件，而是写入另一个进程将馈送到日志文件的管道。只要它们小于`PIPE_BUF`字节长度，就可以保证（通过 POSIX）对管道的写入是原子的。在这种情况下您不能使用`fprintf`（因为它可能会执行多个底层写入操作），但您可以使用`snprintf`-sized`PIPE_BUF`缓冲区，后跟`write`.

# javascript - Is there a svg library for generating line graphs like in Google Analytics?

> ID：11664435
> 
> 赞同：1
> 
> 时间：2012-07-26T07:29:10.097
> 
> 标签：javascript, html, svg

I really like the line graph used in Google Analytics and I think it's done in SVG. Is there a library for generating line graphs like that of Google Analytics?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:55:44.683

**[d3.js](http://d3js.org/)**是一个强大的库，可以处理任何类型的图形。

你可以试一试，看看它是否适合你的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:31:26.243

糟糕，看起来 Google 让您使用[Google Charts拥有它](https://developers.google.com/chart/interactive/docs/gallery/linechart)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:33:15.177

我偶然发现了一些 JS 库，它们允许您构建类似于 Google Analytics 的图表。尝试[莫里斯](http://oesmith.github.com/morris.js/)作为开始，当我找到我的武器库中的其余部分时，我会更新答案

# android - how to make emulator for testing Nfc in android

> ID：11664436
> 
> 赞同：0
> 
> 时间：2012-07-26T07:29:09.170
> 
> 标签：android, nfc

I have downloaded OpenNFC Android SDK addon from [http://sourceforge.net/projects/open-nfc/files/](http://sourceforge.net/projects/open-nfc/files/)

its give some structure of folders ,please specify me how to install that add-ons on sdk. i have to make Nfc enable emulator for testing Nfc.

folder contain following structure

```
Hierarchy 
├── Demo - ChangePolicy 
├── Kernel 
│ ├── kernel_for_AOSP 
│ │ └── nfc 
│ └── kernel_for_NFCRealDevice 
│ └── nfc 
├── libnfc-opennfc 
│ ├── java 
│ │ ├── jni 
│ │ └── src 
│ │ └── com 
│ │ └── opennfc 
│ │ └── extension 
│ │ └── nfc 
│ │ └── api 
│ ├── ndef 
│ ├── open_nfc 
│ │ ├── hardware 
│ │ │ └── libhardware 
│ │ │ ├── include 
│ │ │ │ └── hardware 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:37:37.043

//Android 模拟器有一些限制

模拟器的功能限制包括：

```
No support for placing or receiving actual phone calls. You can simulate phone calls (placed and received) through the emulator console, however.
No support for USB connections
No support for device-attached headphones
No support for determining network connected state
No support for determining battery charge level and AC charging state
No support for determining SD card insert/eject
No support for Bluetooth
No Support for NFC adapter or NFC capabilities to run in emulator. 
```

# c# - How to split a string into an array based on length

> ID：11664437
> 
> 赞同：0
> 
> 时间：2012-07-26T07:29:12.577
> 
> 标签：c#, vcf-vcard

I wanted to split a string of length 200 characters and place them in the request DTO data member noteline1---noteline18\. I want to make sure that only 78 characters are allowed and the remaining characters should be moved to another data member(if noteline1 is filled with 78 characters, then it should fill the remaining characters to another empty noteline). I have used the following code

```
if (requestNoteReason.Length < 78)
 {
     if (reqPropertyInfo.Name.ToLower() == null)
      {
            reqPropertyInfo.SetValue(request, requestNoteReason, null);
           break;
      }
 }

      else
      {
          reqPropertyInfo.SetValue(request, requestNoteReason.Substring(0, 78), null);
          requestNoteReason = requestNoteReason.Substring(78, requestNoteReason.Length - 78);
          i++;

         continue;
     } 
```

The above code work fine but I want that it should not place the remaining string character on the non-empty noteline data member. It should first find the remaining empty Noteline(noteline1---noteline18) and then assign the remaining characters on them. How will I achieve it?

# objective-c - iOS-6 UI Issues and Orientation Support

> ID：11664438
> 
> 赞同：2
> 
> 时间：2012-07-26T07:29:18.720
> 
> 标签：objective-c, ios, xcode, ipad, ios6

I have tested my application(iPhone and iPad) on iOS 5.1, till here it was working fine. But now when I downloaded iOS 6.0 SDK Beta and tested my apps on the Simulator, UI of the application is getting worst. Orientation is also not working fine with the iPad App.

**Note - Maybe it is because of UIKit changes Apple has made in iOS 6\. But then the question is how do we make it compatible with the latest iOS? Do I need to make some changes in Code? Searched at some places but didn't get any exact solution to this problem.**

Thanks Ak

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T12:17:49.040

```
self.tableView.backgroundView = nil; 
tableView.alpha = 1.0; 
```

非常适合我。

# android - TTS engine pause(),resume() without store into sdcard in android

> ID：11664440
> 
> 赞同：2
> 
> 时间：2012-07-26T07:29:25.717
> 
> 标签：android

I am using TTS engine for converting text to speech and i want to pause TTS voice and resume back voice..I tried to using sdcard for save TTS engine voice using synthesizetofile() and it works fine..But my requirement is to pause,resume TTS engine voice without stored into sd card...Please give me any solution

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-27T02:53:02.823

```
private void Teks_Ke_Suara_Kontak() {
    String text = textkontakAuto.getText().toString();

     HashMap<String, String> myHash = new HashMap<String, String>();
     myHash.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, "done");
     String[] splitspeech = text.split(" : ");
    for (int i = 0; i < splitspeech.length; i++)
     {
     if (i == 0) 
     { // Use for the first splited text to flush on audio stream
         SuaraKeTeks.speak(splitspeech[i].toString().trim(),TextToSpeech.QUEUE_FLUSH, myHash);
     } 
    else 
     { // add the new test on previous then play the TTS
        SuaraKeTeks.speak(splitspeech[i].toString().trim(), TextToSpeech.QUEUE_ADD,myHash);
     }
     SuaraKeTeks.playSilence(750, TextToSpeech.QUEUE_ADD, null);

     }
} 
```

# android - 如何每天在某个特定时间启动我的应用程序？

> ID：11664442
> 
> 赞同：2
> 
> 时间：2012-07-26T07:29:28.407
> 
> 标签：android, automation, background-process

我想创建一个应用程序，它基本上应该在某个特定时间启动自己，在后台做一些事情，然后杀死自己。

我需要提示移动方向和阅读内容。我很抱歉有点转储问题，但我是 android 的初学者。所以任何回复都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T07:36:22.883

你应该使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

你也可以参考这个线程[Android：如何使用AlarmManager](https://stackoverflow.com/questions/1082437/android-alarmmanager)

# python - How to read multiple lines of raw input?

> ID：11664443
> 
> 赞同：78
> 
> 时间：2012-07-26T07:29:29.517
> 
> 标签：python, input, user-input

I want to create a Python program which takes in multiple lines of user input. For example:

```
This is a multilined input.
It has multiple sentences.
Each sentence is on a newline. 
```

How can I take in multiple lines of raw input?

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-07-26T07:47:56.870

```
sentinel = '' # ends when this string is seen
for line in iter(input, sentinel):
    pass # do things here 
```

要将每一行作为字符串，您可以执行以下操作：

```
'\n'.join(iter(input, sentinel)) 
```

* * *

蟒蛇2：

```
'\n'.join(iter(raw_input, sentinel)) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-05-01T10:21:41.573

或者，您可以尝试`sys.stdin.read()`返回整个输入，直到`EOF`：

```
import sys
s = sys.stdin.read()
print(s) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-26T07:46:24.547

继续阅读行，直到用户输入一个空行（或更改`stopword`为其他内容）

```
text = ""
stopword = ""
while True:
    line = raw_input()
    if line.strip() == stopword:
        break
    text += "%s\n" % line
print text 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-18T12:59:53.710

只需扩展此答案[https://stackoverflow.com/a/11664652/4476612](https://stackoverflow.com/a/11664652/4476612) 而不是任何停用词，您就可以检查是否有一行

```
content = []
while True:
    line = raw_input()
    if line:
        content.append(line)
    else:
        break 
```

您将获得列表中的行，然后加入 \n 以获得您的格式。

```
print '\n'.join(content) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-24T23:34:37.287

*我自己在这个问题上苦苦挣扎了很长时间，因为我想找到一种方法来读取多行用户输入，而无需用户使用 Control D（或停用词）来终止它。最后，我在 Python3 中找到了一种方法，使用 pyperclip 模块（您必须使用 pip install 安装）以下是一个采用 IP 列表的示例 *

```
import pyperclip

lines = 0

while True:
    lines = lines + 1 #counts iterations of the while loop.

    text = pyperclip.paste()
    linecount = text.count('\n')+1 #counts lines in clipboard content.

    if lines <= linecount: # aslong as the while loop hasn't iterated as many times as there are lines in the clipboard.
        ipaddress = input()
        print(ipaddress)

    else:
        break 
```

对我来说，这正是我想要的；接受多行输入，执行所需的操作（这里是简单的打印），然后在处理最后一行时中断循环。希望它对你也同样有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-27T09:31:22.680

尝试这个

```
import sys

lines = sys.stdin.read().splitlines()

print(lines) 
```

**输入：**

1

2

3

4

**输出：** ['1'，'2'，'3'，'4']

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-09T04:16:51.900

当您知道要让 python 读取*的确切行数时，从提示/控制台读取多行的最简单方法是***list comprehension**。

`lists = [ input() for i in range(2)]`

上面的代码读取 2 行。并将输入保存在列表中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-07T08:29:21.393

Python Prompt Toolkit 实际上是一个很好的答案，但上面的示例并没有真正显示出来。一个更好的例子是示例目录中的*get-multiline-input.py*：

```
#!/usr/bin/env python
from prompt_toolkit import prompt
from prompt_toolkit.formatted_text import HTML

def prompt_continuation(width, line_number, wrap_count):
    """
    The continuation: display line numbers and '->' before soft wraps.
Notice that we can return any kind of formatted text from here.
The prompt continuation doesn't have to be the same width as the prompt
which is displayed before the first line, but in this example we choose to
align them. The `width` input that we receive here represents the width of
the prompt.
    """
    if wrap_count > 0:
        return " " * (width - 3) + "-> "
    else:
        text = ("- %i - " % (line_number + 1)).rjust(width)
        return HTML("<strong>%s</strong>") % text

if __name__ == "__main__":
    print("Press [Meta+Enter] or [Esc] followed by [Enter] to accept input.")
    answer = prompt(
    "Multiline input: ", multiline=True, prompt_continuation=prompt_continuation
)
    print("You said: %s" % answer) 
```

使用此代码，您可以获得多行输入，即使在输入后续行之后，也可以在其中编辑每一行。还有一些不错的附加功能，例如行号。输入通过按退出键然后按回车键结束：

~/Desktop ❯ py prompt.py
按 [Meta+Enter] 或 [Esc] 然后按 [Enter] 接受输入。
多行输入：第一行文本，然后输入
- 2 - 第二行文本，然后输入
- 3 - 第三行文本，箭头键可以移动，输入
- 4 - 可以根据需要编辑行，直到您
- 5 - 按退出键，然后按回车键
你说：第一行文字，然后输入
第二行文字，然后输入
第三行文字，箭头键可以左右移动，输入
和行可以根据需要编辑，直到你
按退出键，然后按回车键
~/Desktop ❯</p>

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-29T03:47:22.977

你觉得这个怎么样？我模仿了telnet。该片段是高度不言自明的:)

```
#!/usr/bin/env python3

my_msg = input('Message? (End Message with <return>.<return>) \n>> ')

each_line = ''
while not each_line == '.':
    each_line = input('>> ')
    my_msg += f'\n{each_line}'

my_msg = my_msg[:-1]  # Remove unwanted period.

print(f'Your Message:\n{my_msg}') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-05T13:01:08.250

一种更简洁的方法（没有停用词 hack 或 CTRL+D）是使用[Python Prompt Toolkit](https://github.com/prompt-toolkit/python-prompt-toolkit)

然后我们可以这样做：

```
from prompt_toolkit import prompt

if __name__ == '__main__':
    answer = prompt('Paste your huge long input: ')
    print('You said: %s' % answer) 
```

即使是长的多行输入，它的输入处理也非常有效。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-10T16:37:52.793

> 它是在 python > 3.5 版本中编写代码的最佳方式

```
a= int(input())
if a:
    list1.append(a)
else:
    break 
```

*即使你想限制你可以去的值的数量*

```
while s>0:
a= int(input())
if a:
    list1.append(a)
else:
    break
s=s-1 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-23T16:44:56.787

sys.stdin.read() 可用于从用户获取多行输入。例如

```
>>> import sys
>>> data = sys.stdin.read()
  line one
  line two
  line three
  <<Ctrl+d>>
>>> for line in data.split(sep='\n'):
  print(line)

o/p:line one
    line two
    line three 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-04T12:02:01.737

使用 Python 3，您可以将每一行分配给`data`：

```
while data := input():
    print("line", data) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2022-02-27T09:33:24.473

```
def sentence_maker(phrase):
    return phrase

results = []
while True:
    user_input = input("What's on your mind: ")
    if user_input == '\end':
        break
    else:
        results.append(sentence_maker(user_input))

print('\n'.join(map(str, results))) 
```

# google-bigquery - bigquery UDF support

> ID：11664449
> 
> 赞同：1
> 
> 时间：2012-07-26T07:30:03.187
> 
> 标签：google-bigquery

I am very new to BigQuery by google

I want to parse time stamp (`yyyy/mm/dd:hh:mm:ss`) based on the day and the month wish to bucket days into weeks. I didn't find any BigQuery function which does this.

Hence, I was wondering if there was a way in which I can write a `UDF` and then access it in a BigQuery query

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T06:12:45.730

这里有两个问题，所以有两个答案：

*   BigQuery**确实**支持 UDF：[docs](https://cloud.google.com/bigquery/user-defined-functions)。（当我第一次回答这个问题时没有。）

*   即使没有 UDF，日期分桶仍然可行。BigQuery 具有一次性解析函数 ，`PARSE_UTC_USEC`它期望以 形式输入`YYYY-MM-DD hh:mm:ss`。您需要使用`REGEXP_REPLACE`将您的日期转换为正确的格式。完成此操作后，`UTC_USEC_TO_WEEK`会将事情限制在几周内，并且您可以按此分组。因此，将所有这些联系在一起，如果您的表有一个名为 的列`timestamp`，您可以通过类似的方式按周计算

    ```
    SELECT week, COUNT(week)
    FROM (SELECT UTC_USEC_TO_WEEK(
                   PARSE_UTC_USEC(
                     REGEXP_REPLACE(
                       timestamp, 
                       r"(\d{4})/(\d{2})/(\d{2}):(\d{2}):(\d{2}):(\d{2})", 
                       r"\1-\2-\3 \4:\5:\6")), 0) AS week
          FROM mytable) 
    GROUP BY week; 
    ```

    请注意，`0`这里是使用一周中的哪一天作为“开始”的参数；我已经使用了星期日，但对于“业务”-y 使用`1`（即星期一）的事情可能更有意义。

以防万一您需要它，文档中[有关时间戳功能的部分](https://developers.google.com/bigquery/docs/query-reference#timestampfunctions)很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T21:33:23.957

BigQuery 中的 UDF 支持现已推出！ [https://cloud.google.com/bigquery/user-defined-functions](https://cloud.google.com/bigquery/user-defined-functions)

下面是一些将字符串时间说明符转换为 JavaScript Date 对象并从中提取一些属性的代码；有关 JS 日期可用属性的信息，请参阅[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date 。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)

QUERY（用您的表替换嵌套选择）：

```
SELECT day_of_week, month_date
FROM parseDate(select '2015/08/01 12:00:00' as date_string); 
```

代码：

```
function parsedate(row, emit) {
  var d = new Date(row.date_string);
  emit({day_of_week: d.getDay(),
        month_date: d.getDate()});
}

bigquery.defineFunction(
  'parseDate',                           // Name of the function exported to SQL
  ['date_string'],                    // Names of input columns
  [{'name': 'day_of_week', 'type': 'integer'},
   {'name': 'month_date', 'type': 'integer'}],
  parsedate
); 
```

# android - Twitter4j API 在 android 中按下后退按钮时不会重定向到应用程序

> ID：11664461
> 
> 赞同：4
> 
> 时间：2012-07-26T07:31:19.990
> 
> 标签：android, twitter, twitter4j

我在 android 中使用 Twitter4j API，当我从 twitter 浏览器屏幕按后退按钮取消授权时，它带我回到 PrepareRequestTokenActivity 的 onResume() （由 twitter4j api 提供的活动），我正在从 onResume 完成此活动，但是当授权成功，然后它也将转到 onResume() ，然后转到同一活动的 onNewIntent() 方法，但活动从恢复完成并且身份验证失败。有什么方法可以从 twitter 浏览器屏幕捕获后退按钮？下面是活动。

```
public class PrepareRequestTokenActivity extends Activity {

        public static final String CONSUMER_KEY = "Hr8aDOFeDdY9UbvQB0w2w";
        public static final String CONSUMER_SECRET= "wfZOJYkYVEYrmdmltOaKfRdnUfSiUkr2MQdjRUY2xU";

        public static final String REQUEST_URL = "http://twitter.com/oauth/request_token"; //"https://api.twitter.com/oauth/request_token"
        public static final String ACCESS_URL = "http://twitter.com/oauth/authorize"; //"https://api.twitter.com/oauth/authorize"
        public static final String AUTHORIZE_URL = "http://twitter.com/oauth/access_token"; //"https://api.twitter.com/oauth/access_token"

        final public static String OAUTH_CALLBACK_SCHEME = "droidnotify-oauth-twitter";
        final public static String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME + "://callback";

        private boolean _debug = false;
    private OAuthConsumer _consumer; 
    private OAuthProvider _provider;

        @Override
        public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                _debug = Log.getDebug();
                if (_debug) Log.v("PrepareRequestTokenActivity.onCreate()");
        try {
                _consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
            //_provider = new CommonsHttpOAuthProvider(REQUEST_URL, ACCESS_URL, AUTHORIZE_URL);
            _provider = new DefaultOAuthProvider(REQUEST_URL, ACCESS_URL, AUTHORIZE_URL);
        } catch (Exception ex) {
                if (_debug) Log.e("PrepareRequestTokenActivity.onCreate() Error creating consumer / provider: " + ex.toString());
                }
        if (_debug) Log.v("PrepareRequestTokenActivity.onCreate() Starting task to retrieve request token.");
                new OAuthRequestTokenTask(this, _consumer, _provider).execute();
        }

        @Override
        public void onNewIntent(Intent intent) {
                super.onNewIntent(intent); 
                if (_debug) Log.v("PrepareRequestTokenActivity.onNewIntent()");
                SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
                final Uri uri = intent.getData();
                if (uri != null && uri.getScheme().equals(OAUTH_CALLBACK_SCHEME)) {
                        if (_debug) Log.v("PrepareRequestTokenActivity.onNewIntent() Callback received : " + uri);
                        if (_debug) Log.v("PrepareRequestTokenActivity.onNewIntent() Retrieving Access Token");
                        new RetrieveAccessTokenTask(this, _consumer, _provider, prefs).execute(uri);
                        finish();       
                }
        }

        public class RetrieveAccessTokenTask extends AsyncTask<Uri, Void, Void> {

                private Context _context;
                private OAuthProvider _provider;
                private OAuthConsumer _consumer;
                private SharedPreferences _prefs;

                public RetrieveAccessTokenTask(Context context, OAuthConsumer consumer,OAuthProvider provider, SharedPreferences prefs) {
                        _context = context;
                        _consumer = consumer;
                        _provider = provider;
                        _prefs=prefs;
                }

                @Override
                protected Void doInBackground(Uri...params) {
                        final Uri uri = params[0];
                        final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
                        try {
                                _provider.retrieveAccessToken(_consumer, oauth_verifier);
                                final Editor edit = _prefs.edit();
                                edit.putString(OAuth.OAUTH_TOKEN, _consumer.getToken());
                                edit.putString(OAuth.OAUTH_TOKEN_SECRET, _consumer.getTokenSecret());
                                edit.commit();
                                String token = _prefs.getString(OAuth.OAUTH_TOKEN, "");
                                String secret = _prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");
                                _consumer.setTokenWithSecret(token, secret);
                                //_context.startActivity(new Intent(_context, AndroidTwitterSample.class));
                                //executeAfterAccessTokenRetrieval();
                                Toast.makeText(_context, "Twitter Authentication Successfull", Toast.LENGTH_LONG);
                                Toast.makeText(_context, "OAuth.OAUTH_TOKEN KEY: " + OAuth.OAUTH_TOKEN + ", OAuth.OAUTH_TOKEN Value: " + _consumer.getToken(), Toast.LENGTH_LONG);
                                Toast.makeText(_context, "OAuth.OAUTH_TOKEN_SECRET KEY: " + OAuth.OAUTH_TOKEN_SECRET + ", OAuth.OAUTH_TOKEN_SECRET Value: " + _consumer.getTokenSecret(), Toast.LENGTH_LONG);
                                if (_debug) Log.v("OAuth - Access Token Retrieved");

                        } catch (Exception ex) {
                                if (_debug) Log.e("OAuth - Access Token Retrieval Error: " + ex.toString());
                        }
                        return null;
                }

        }       

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:02:20.723

只需将一个布尔标志初始化为 false 使其在 PrepareRequestTokenActivity 的 onNewIntent() 函数中为真，并在 onResume 函数中添加一个 if 条件，如果此标志为假则完成活动，如果为真则不执行任何操作，即当您单击返回按钮时从浏览器直接转到onResume，此时您的标志将为false，然后此活动将完成，当成功或不，谢谢，它将首先转到onNewIntent（）然后onResume，所以如果为true，则活动将不会完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:18:13.133

使用下面的代码作为 CALLBACK_URL ＆如果您对此有任何疑问，请告诉我。

```
public static final String  OAUTH_CALLBACK_SCHEME = "x-oauthflow-twitter";
public static final String  OAUTH_CALLBACK_HOST = "callback";
public static final String  CALLBACK_URL = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST; 
```

# c# - 从 sql server 2008 将两个 2 个表合并为 1 个 C# 语句

> ID：11664468
> 
> 赞同：0
> 
> 时间：2012-07-26T07:32:17.853
> 
> 标签：c#, sql

大家好，目前我有这个代码。我想`GivenName"`在语句中添加另一个字段“，但问题是它来自另一个表。如何在不改变原始查询输出的情况下将两个数据库表合并到该语句中。

```
namespace Test
{
    public partial class frmSales : Form
    {
        public frmSales()
        {
            InitializeComponent();
        }

        private void dtpFrom_ValueChanged(object sender, EventArgs e)
        {

        }

        private void btnExtract_Click(object sender, EventArgs e)
        {

            SqlConnection objConn = new SqlConnection("Data Source=abcdefg;Initial Catalog=hello;Persist Security Info=True;User ID=sa;Password=");

                         objConn.Open();

            SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), InvDate,3) AS InvDate,InvoiceNo,EmployerCode,TaxAmount + SubTotal AS Amount,'' AS Payment FROM Invoice WHERE (InvDate >= CONVERT(datetime, '" + dtpFrom.Text + "', 105 )) AND (InvDate <= CONVERT(datetime, '" + dtpTo.Text + "', 105))", objConn);

            SqlDataReader objReader;
            objReader = objCmd.ExecuteReader();

            System.IO.FileStream fs = new System.IO.FileStream("C:\\CMSExportedData\\Sales-" + DateTime.Now.ToString("dd-MM-yyyy") + ".txt", System.IO.FileMode.Create);
            System.IO.StreamWriter sw = new System.IO.StreamWriter(fs, System.Text.Encoding.Default);

            int count = 0;
            while (objReader.Read())
            {

                for (int i = 0; i < 5; i++)
                {
                    if (!objReader.IsDBNull(i))
                    {
                        string s;
                        s = objReader.GetDataTypeName(i);
                        //MessageBox.Show(s);
                        if (objReader.GetDataTypeName(i) == "char")
                        {
                            sw.Write(objReader.GetString(i));
                        }
                        else if (objReader.GetDataTypeName(i) == "money")

                        {
                            sw.Write(objReader.GetSqlMoney(i).ToString());
                        }
                        else if (objReader.GetDataTypeName(i) == "nvarchar")
                        {
                            sw.Write(objReader.GetString(i));
                        }
                    }
                    if (i < 4)
                    {
                        sw.Write("\t");
                    }

                }
                count = count + 1;
                sw.WriteLine();

            }
            sw.Flush();
            fs.Close();
            objReader.Close();
            objConn.Close();
            MessageBox.Show(count + " records exported successfully.");
            this.Close();
        }

        private void groupBox1_Enter(object sender, EventArgs e)
        {

        }

        private void dtpTo_ValueChanged(object sender, EventArgs e)
        {

        }

        private void frmSales_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:34:26.147

更改 SQL 语句，以便[将](http://msdn.microsoft.com/en-us/library/aa213233%28v=sql.80%29.aspx)2 个表连接在一起。然后，您可以访问另一列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:39:04.923

使用`JOIN`：

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), InvDate,3) AS InvDate,InvoiceNo,EmployerCode,TaxAmount + SubTotal AS Amount,'' AS Payment 
                                    FROM Invoice inv INNER JOIN
                                         [YourOtherTable] tab ON inv.[SomeID] = tab.[SomeID]
                                    WHERE (InvDate >= CONVERT(datetime, '" + dtpFrom.Text + "', 105 )) 
                                    AND (InvDate <= CONVERT(datetime, '" + dtpTo.Text + "', 105))", objConn); 
```

`INNER JOIN`如果它是一`NOT NULL`列并且`LEFT JOIN`当该列是`NULL`.

因此，您将添加以下内容：

```
FROM Invoice inv INNER JOIN
    [YourOtherTable] tab ON inv.[SomeID] = tab.[SomeID] 
```

**编辑：**

好吧，看来[MedicalRecordID] 是最明显的。

```
FROM [Invoice] inv INNER JOIN 
[PatientDetails] tab ON inv.[MedicalRecordID] = tab.[MedicalRecordID] 
```

请记住，如果您要查找特定`PatientDetails`记录，则需要`AND`在`WHERE`子句中添加另一个记录。

就像是：

```
AND tab.[LastName] = 'SomeLastName' 
```

**编辑：**

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(80), inv.[InvDate],3) AS InvDate
                                         , inv.[InvoiceNo]
                                         , inv.[TaxAmount] + inv.[SubTotal] AS Amount
                                         , '' AS Payment 
                                    FROM [Invoice] inv LEFT JOIN 
                                         [PatientDetails] tab ON inv.[MedicalRecordID] = tab.[MedicalRecordID] 
                                    WHERE (inv.[InvDate] >= CONVERT(datetime, '" + dtpFrom.Text + "', 105 )) 
                                    AND (inv.[InvDate] <= CONVERT(datetime, '" + dtpTo.Text + "', 105))", objConn); 
```

# html - 使用 CSS 添加虚线分隔符/填充

> ID：11664469
> 
> 赞同：5
> 
> 时间：2012-07-26T07:32:22.567
> 
> 标签：html, css

我在一家餐馆网站上工作。该设计要求在菜单项和价格之间使用典型的虚线填充。我已经在网上搜索并弄乱了一个小时左右，似乎无法找到任何仅使用 CSS 的好方法。我在这里找到了其他几个解决方案，如果您有纯色背景，它们会很好用，但是在这个站点上它使用背景图像并且这些解决方案不起作用。

示例：[菜单样式“....” - 用句点填充](https://stackoverflow.com/questions/7278030/menu-style-fill-in-with-periods?lq=1)有一个很好的解决方案，但它将菜单项的背景颜色和价格设置为白色以隐藏它们后面的虚线，但我正在构建的页面有背景图像，因此任何纯色背景都会看起来很糟糕。

我尝试在元素上使用各种表格行/表格单元格或任何其他类型的 CSS 显示属性和宽度设置组合，但没有骰子。

这是一些假样本标记：

```
<ul> 
    <li><span>Soup</span><span class="dots">&nbsp;</span><span>$2.99</span></li>
    <li><span>Ice cream</span><span class="dots">&nbsp;</span><span>$5.99</span></li>
    <li><span>Steak</span><span class="dots">&nbsp;</span><span>$20.99</span></li>
</ul> 
```

我一直试图通过使用带有底部边框的“点”类元素来填补空白，但我没有尝试过任何工作。我也只是在 LI 元素上放置了一个底部边框，一直到每一行的底部，但这不是设计师想要的。我只能想到在 javascript 中做它作为最后的手段，但想看看你们是否有任何想法。或者，我可以只使用表格，但也真的想避免这种情况。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:51:35.523

我可以通过使用定义列表（[小提琴](http://jsfiddle.net/akhurshid/rPs3j/)）来实现：

HTML：

```
<div id="wrap">
    <div class="inner">
        <dl>
            <dt>$2.89</dt>
            <dd><em>Lorem ipsum dolor sit amet </em></dd>
        </dl>
        <dl>
            <dt>$21.89</dt>
            <dd><em>In porta nisl id nisl varius ullamcorper</em></dd>
        </dl>
        <dl>
            <dt>$5.99</dt>
            <dd><em>Suspendisse augue mauris, mattis ac, commodo quis, lobortis vel, mauris. Etiam dolor neque, iaculis sit amet, tincidunt nec, elementum ut, lorem.</em></dd>
        </dl>
        <dl>
            <dt>$8.99</dt>
            <dd><em>Donec sed felis sit amet risus</em></dd>
        </dl>
        <dl>
            <dt>$11.50</dt>
            <dd><em>Maecenas ante. Suspendisse pharetra, metus in tempus egestas, purus ante pellentesque purus, at gravida metus elit nec nunc. Etiam ante ligula, porttitor et, euismod commodo, pulvinar id, pede. Curabitur et magna. Vestibulum leo nibh, viverra sed, imperdiet non,</em></dd>
        </dl>
        <dl>
            <dt>$5.99</dt>
            <dd><em>Etiam ante ligula,</em></dd>
        </dl>
        <dl>
            <dt>$5.99</dt>
            <dd><em>Fusce condimentum</em></dd>
        </dl>
        <dl>
            <dt>$7.55</dt>
            <dd><em>Morbi nibh velit, sodales eu</em></dd>
        </dl>
        <dl>
            <dt>$6.50</dt>
            <dd><em>Etiam ante ligula,</em></dd>
        </dl>
        <dl>
            <dt>$11.50</dt>
            <dd><em>Fusce condimentum</em></dd>
        </dl>
        <dl>
            <dt>$2.50</dt>
            <dd><em>Morbi nibh velit, sodales eu</em></dd>
        </dl>
        <dl>
            <dt>$21.50</dt>
            <dd><em>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. In porta nisl id nisl varius ullamcorper.</em></dd>
        </dl>
    </div>
</div> 
```

CSS：

```
* {margin:0;padding:0}
h1,h2{padding:10px 20px 0}
#wrap{
    width:500px;
    border:1px solid #eff2df;
    margin:20px 20px;
    background:#809900;
}
* html #wrap {width:502px;w\idth:500px;}
#wrap .inner{
    padding:20px 40px;
    border:1px solid #4c7300;
    position:relative;
    left:-2px;
    top:-2px;
    background:#eff2df;
    color:#4c7300;
    width:418px;
}
* html #wrap .inner{width:500px;w\idth:418px;}
#wrap dl{
    position:relative;
    width:100%;
    border-bottom:1px solid #eff2df;
}
#wrap dd{
    line-height:1.2em;
    position:relative;
    padding:0 5em 0 0;
    text-align:left;
    border-bottom:1px dotted #000;
    clear:both;
    margin:0 0 .4em 0;
    min-height:0;
}
* html #wrap dd{
    border:none;
    background: url(images/dotted-leader.gif) repeat-x left bottom;
    height:1%;
}
#wrap dt{
    background:#eff2df;
    padding:1px 0 1px 5px;
    color:#809900;
    position:absolute;
    bottom:0px;
    right:-1px;
    z-index:99;
}
#wrap dd em{
    margin:0 ;
    position:relative;
    top:.25em;
    padding:0 5px 0 0;
    background:#eff2df;
} 
```

[**参考链接**](http://www.pmob.co.uk/search-this/list-with-dotted-leader-dltest.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T08:12:20.850

我会用这样的东西：

**[示例小提琴](http://jsfiddle.net/poikl/atXgr/6/)**

它使用`.dots`元素上的虚线边框并将其移动一些像素到顶部。

```
ul li {
    display:table-row;
    width:15em;
}
ul li span{
  display:table-cell;   
}
.dots{
    min-width:10em;
    position:relative;
    bottom:4px;
 border-bottom:1px dotted #777;   
} 
```

很好的副作用 - 你不需要浮动元素。但是，此解决方案使用`display:table-cell`，因此这在旧 IE (<IE8) 中不起作用。
根据背景，您可以使用[li-border 解决方案](http://jsfiddle.net/poikl/atXgr/)并将 span-elements 上的纯色替换为 background-image 本身。

# netbeans-7 - Netbeans 7.2 不反映对 html、jsp 页面的修改

> ID：11664472
> 
> 赞同：0
> 
> 时间：2012-07-26T07:32:32.737
> 
> 标签：netbeans-7

最近我从 netbeans 6.9 迁移到 Netbeans 7.2，在使用 6.9 时，如果我在 html 或 jsp 页面中进行修改，我可以在部署项目后使用方便的功能，我可以在浏览器中刷新页面时看到。但是在使用 7.2 时它不可用，所以每次我需要构建和部署以进行更改时都会更新。

所以我有一些建议，比如 1) 检查->在项目属性中保存时编译取消选中->在项目属性中保存时部署，但它仍然无法正常工作。

知道我错过了什么。提前致谢。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:39:52.677

我必须说这种情况对我来说很好——我没有看到任何问题。您正在使用哪种项目 - 基于 Ant 或基于 Maven？最好的办法是您可以在 netbeans.org 错误数据库中提交 P2 问题，以便我们进行调查。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T06:46:05.083

这也发生在我身上。我尝试将项目重命名为新名称而不是项目文件夹并重新运行。它对我有用。自己试试。

尼丁。

# html - 如何在表格中找到重复的ID？

> ID：11664473
> 
> 赞同：10
> 
> 时间：2012-07-26T07:32:46.223
> 
> 标签：html, forms, field

我创建了一个包含大约 800 个字段的表单。不知不觉中，我为表单中的几个字段提供了相同的 id。如何追踪它们？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T07:40:53.957

**[http://validator.w3.org/](http://validator.w3.org/)**将是方便的解决方案。但是使用**jquery**你可以做这样的事情：

```
//See your console for duplicate ids

$('[id]').each(function(){
  var id = $('[id="'+this.id+'"]');
  if(id.length>1 && id[0]==this) {
    console.log('Duplicate id '+this.id);
    alert('duplicate found');
  }
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:36:37.883

这可能会帮助你

[来源：在 HTML 页面上查找重复的 ID](http://dev.enekoalonso.com/2011/05/06/finding-duplicate-ids-on-an-html-page/)

> 在 HTML 页面上查找重复的 ID
> 
> 作者 Eneko Alonso 于 2011 年 5 月 6 日
> 
> 看起来有时我们忘记了元素 ID 在 HTML 页面上是唯一的。这是我刚刚编写的用于在页面上查找重复 ID 的一些代码（在浏览器的 javascript 控制台上运行代码）：

```
var idList = {};
var nodes = document.getElementsByClassName('');
for (var i in nodes) {
  if (!isNaN(i) && nodes[i].id) {
    idList[nodes[i].id] = idList[nodes[i].id]? idList[nodes[i].id]+1:1;
  }
}
for (var id in idList) {
  if (idList[id] > 1) console.log("Duplicate id: #" + id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:51:57.500

我创建了一个示例供您查看，它会在页面上的表单/元素中找到所有重复的 ID，并将重复的 ID 名称打印到控制台。

数组`contains`方法取自[这篇文章](https://stackoverflow.com/a/237176/365796)。

```
<html>
    <body>
        <form id="frm">
            <input type="text" id="a" />
            <input type="text" id="b" />
            <input type="text" id="c" />
            <input type="text" id="d" />
            <input type="text" id="e" />
            <input type="text" id="f" />
            <input type="text" id="a" />
            <input type="text" id="h" />
            <input type="text" id="i" />
            <input type="text" id="j" />
            <input type="text" id="d" />
            <input type="text" id="l" />            
        </form>
    </body>
    <script type="text/javascript">
        Array.prototype.contains = function(obj) { //Add a 'contains' method to arrays
            var i = this.length;
            while (i--) {
                if (this[i] === obj) {
                    return true;
                }
            }
            return false;
        }

        frm = document.getElementById('frm'); //Get the form
        els = frm.getElementsByTagName('input'); //Get all inputs within the form

        ids = new Array(els.length); //Create an array to hold the IDs

        for(e = 0; e < els.length; e++) { //Loop through all of the elements
            if(ids.contains(els[e].id)) //If teh array already contains the ID we are on
                console.log('Duplicate: '+els[e].id); //Print 'Duplicate: {ID}' to the console

            ids.push(els[e].id); //Add the ID to the array
        }

    </script>
</html> 
```

上面的代码将输出以下内容：

> 重复：一个
> 
> 重复：d

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-07T10:16:25.937

仅使用数组方法的 One-ish 班轮：

```
[].map.call(document.querySelectorAll("[id]"), 
     function (e) {
        return e.id;
     }).filter(function(e,i,a) {
        return ((a.lastIndexOf(e) !== i) && !console.log(e));
     }) 
```

记录每个重复项并返回一个包含 id 的数组（如果找到）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-18T07:45:28.757

有一个名为 Dup-ID 的 Chrome 扩展，如果你安装它，你只需要按下按钮来检查重复的 id。安装链接：[https ://chrome.google.com/webstore/detail/dup-id-scans-html-for-dup/nggpgolddgjmkjioagggmnmddbgedice](https://chrome.google.com/webstore/detail/dup-id-scans-html-for-dup/nggpgolddgjmkjioagggmnmddbgedice)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-26T07:38:29.770

默认情况下， [Notepad++](http://notepad-plus-plus.org/)具有语法突出显示功能，如果您双击一个单词来选择它，它将突出显示同一单词的所有其他出现。您将不得不做一些（可能很多）手动工作来重命名事物，我的意思是因为字段无法提出自己的唯一名称。

# iphone - 如何在iphone中打印十进制值？

> ID：11664475
> 
> 赞同：0
> 
> 时间：2012-07-26T07:32:51.200
> 
> 标签：iphone, ios

我有一个 47 的 double 值。我将它除以 60，但是当我尝试打印它时它显示 0.0000。
它应该显示 0.7858

我怎样才能做到这一点？有什么帮助吗？

这是我的代码：

```
int minutes = decimal * 60;
float min = (minutes)/60;
NSLog(@"%.4f",min); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:53:11.160

尝试这个 ：

```
double decimal = 47.0 / 60.0;     // Just so minutes is 47
double minutes = decimal * 60.0;
double min = minutes / 60.0;
NSLog(@"%.4f",min); 
```

在 Objective C（以及 C 和 C++）中，当左右操作数都是整数时应用整数除法，因此`minutes / 60 = 0`. 如果要进行浮点运算，请使用浮点文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:52:34.700

尝试这个：

```
 int minutes = 40;
  float min = (minutes * 1.0f)/60.0f;
  NSLog(@"%.4f",min); 
```

或者

```
 int minutes = 40;
  float min = (float)minutes/60.0f;
  NSLog(@"%.4f",min); 
```

# perl - 如何在 perl 中使用 POST 方法？

> ID：11664477
> 
> 赞同：-4
> 
> 时间：2012-07-26T07:33:13.367
> 
> 标签：perl

我必须获取网页中的所有链接，但所有链接都是使用 post 方法加载的。

请提供任何解决方案以获取所有链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:40:07.900

使用[LWP](http://www.perl.com/pub/2002/08/20/perlandlwp.html)：

```
use warnings;
use strict;
use LWP::UserAgent;
my $linkid = "link identifier";

my $browser = LWP::UserAgent->new;
my $response = $browser->post(
  'http://sitewithlinks/linkget.php',
  [
    'linkid'  => $linkid,
    'hidden' => 'somethinghidden'
  ],
);
die "Error: ", $response->status_line
 unless $response->is_success;

print "GOT THIS: $response->content"; 
```

# iphone - 如何基于现有的类文件创建新的类文件 - 在 Xcode

> ID：11664478
> 
> 赞同：1
> 
> 时间：2012-07-26T07:33:13.493
> 
> 标签：iphone, ios, xcode

有没有办法基于项目中已经存在的另一个类创建一个新类？

理想情况下，可以只复制一个组（可能包括 .h、.m -xib）并更改该副本上的任何代码以创建一个新类。

目前我创建一个新组，用它的新名称创建新类，然后复制这些文件的代码 - 立即将旧类名重命名为新类名

另一种方法是执行“在Finder中显示”并为文件创建副本，将它们拖回xCode，创建一个新组并将它们拖到那里......

**有没有更好的方法来做到这一点？**

ps 在 Eclipse 中，菜单中甚至有一个明确的选项用于此目的

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:00:59.737

我认为您应该为此使用子类。创建一个新的 Objective-C 类，并选择您的旧类作为父类。

看看这个，如果你不熟悉它可能会帮助你理解这个原理：[http ://www.techotopia.com/index.php/Objective-C_Inheritance](http://www.techotopia.com/index.php/Objective-C_Inheritance)

> 继承的概念为编程带来了一些真实的世界观。它允许定义具有特定特征集（例如方法和实例变量）的类，然后创建从该类派生的其他类。派生类继承父类的所有特性，然后通常添加自己的一些特性。

我不知道 xib 文件会发生什么，但至少你可以尽可能多地重用你的类！

# asp.net - 找不到文件'c:\windows\Temp\xxxxxx.dll'

> ID：11664484
> 
> 赞同：5
> 
> 时间：2012-07-26T07:33:28.793
> 
> 标签：asp.net, web-services, iis

我们有一个 ASP.NET Web 服务（net 2.0/3.5），使用几周后会显示一条消息

“ **System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> System.IO.FileNotFoundException：找不到文件'c:\windows\Temp\xxxxxx.dll** '”

其中文件名 xxxxxx.dll 是一个随机字符串，每次出现问题时都会发生变化。

一旦发生错误，即使是“iisreset”命令也不能解决问题。服务器重新启动解决了几个星期的问题。但随后又来了。

我已经看到很多链接，其中临时文件存储是 XmlSerializer 动态编译的结果。我们的 Web 服务代码使用 Java Web 服务，除此之外，没有明确使用 XmlSerializer 类。

有什么想法/建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:53:31.783

这篇博文肯定解决了我们面临的问题（[这将描述我们面临的问题](https://stackoverflow.com/questions/15634000/error-could-not-find-file-c-windows-temp-xxxxxx-dll/15635175#15635175)）。- [http://devatheart.azurewebsites.net/2011/04/18/troubleshooting-xmlserializer-failure/](http://devatheart.azurewebsites.net/2011/04/18/troubleshooting-xmlserializer-failure/)

我们有这段代码

```
System.Diagnostics.Process.Start(RetrievedURL); 
```

它在按钮单击和打开网页的背景中生成 IE 进程（因为 IE 是网络服务器上的默认浏览器）。

这不是一件聪明的事情，但我们删除了该代码，它肯定会在后台停止 IE 进程。

上面的帖子解释了它是如何与 XML 序列化失败相关联的。感谢您的研究和这篇博文 Slobodan Stipic，又名 Slobo。

希望此解决方案将来对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:36:49.490

尝试将此文件夹的完全权限授予您用于运行应用程序的帐户。

# php - 搜索框的我的 SQL 查询

> ID：11664486
> 
> 赞同：0
> 
> 时间：2012-07-26T07:33:33.180
> 
> 标签：php, mysql, sql

我有这张桌子

```
 date      | Expedition | Destination 
________________________________________
12/05/2012 |  UPS       |  New York
12/05/2012 |  DHL       |  New York
13/06/2012 |  ATLAS     |  Atlanta
14/06/2012 |  JNE       |  Chicago 
```

我想创建搜索结果，这是我的代码

```
 <form method="post" action="sales.php?ID=expLocal">
   Pencarian <input type="text" name="KUNCI" width="300"/><input type="submit" name="CARI"        value="CARI" />
 </form>

 <?php

  if (empty($_POST[CARI]))
  {
   $sql = "SELECT * FROM tb_exp_local";//this query for open all the data
  }
   else if (isset($_POST[KUNCI]))
  {
   $kunci=$_POST[KUNCI];
   $sql="SELECT * FROM tb_exp_local WHERE MATCH (expedition,destination,date)       AGAINST ('+$kunci' IN BOOLEAN MODE)"; // this is query for serching the data
  } 

   ?> 
```

查询运行良好，但如果搜索框填满日期，则查询不会运行。谁能告诉我如何纠正这个问题？（列日期的数据类型是 varchar）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:50:46.213

CARI 和 KUNCI 是否在您的 sales.php 中的任何位置定义？

否则，您需要使用检查它们的值

*   $_POST["CARI"]
*   $_POST["KUNCI"]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:45:39.450

1.  $kunci=$_POST["KUNCI"];
2.  [注意这里](https://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)的 Mysql 匹配语法
3.  当出现问题时尝试查看 mysql 查询 - 一个简单的 echo $sql 会这样做；

# user-controls - 哪个 Dll 或 OCx 包含 VB 6.0 控件的实现

> ID：11664490
> 
> 赞同：1
> 
> 时间：2012-07-26T07:33:51.010
> 
> 标签：user-controls, vb6

我有“ocx”（在 VB 6.0 中开发），它有如下各种用户控件，

1.  用户控件内部有 VB 6.0 文本框
2.  Usercontrol 内部有 VB 6.0 标签
3.  用户控件内部有 VB 6.0 Combobox
4.  Usercontrol 内部有 VB Tree 控件，我为其引用 MSCOMCT2.OCX

声明为：

```
Object={86CF1D34-0C5F-11D2-A9FC-0000F8754DA1}#2.0#0; MSCOMCT2.OCX 
```

在 Windows 7 64 位机器中，第四个控件被正确加载，但不是前 3 个控件没有被加载。

加载 VB 6.0 控件需要什么 ocx 或 dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:34:06.333

您需要将全套[vb6 运行时](http://www.microsoft.com/en-us/download/details.aspx?id=24417)安装并注册到 32 位系统文件夹 ( `C:\Windows\SysWow64`)。请注意，在 Vista+ 上，这些已安装并受到保护，不会被替换。

# php - 我的响应文本中的空格（请求 wp7，响应 php）

> ID：11664498
> 
> 赞同：0
> 
> 时间：2012-07-26T07:34:43.643
> 
> 标签：php, windows-phone-7, response, whitespace

嗨！我正在从 wp7 向 php 发送请求。当 php 发送响应时，WP7 应用程序收到的响应包含大量空白字符和换行符。

这是我的 WP7 响应回调：

```
void GetResponseCallback(IAsyncResult asynchronousResult)
    {
        try
        {
            HttpWebRequest request = asynchronousResult.AsyncState as HttpWebRequest;
            HttpWebResponse response = request.EndGetResponse(asynchronousResult) as HttpWebResponse;
            using (StreamReader sr = new StreamReader(response.GetResponseStream()))
            {
                string responseText = sr.ReadToEnd();
                Debug.WriteLine(responseText);
                SaveResponseText(responseText);                  
            }
        }
        catch (WebException e)
        {
        }
    } 
```

这是我的 php 代码详细信息：

```
if ($_POST["event"] == "riaszt")
  {
if($count != 0)
{         
    {
      echo ok;

    } 
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:27:53.003

我不知道这是否对您有帮助，但是对于所有响应的服务器，我使用此代码 =>

```
 HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
    // End the operation
    HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
    Stream streamResponse = response.GetResponseStream();
    StreamReader streamRead = new StreamReader(streamResponse);
    string responseString = streamRead.ReadToEnd();
    Debug.WriteLine("response ==> [" + responseString + "]"); 
```

但是，您的代码是好的，您确定您的服务器发送响应了吗？当您在浏览器中调用您的网址时，您有回应吗？可能是编码问题...

# javascript - 在 Internet Explorer 中动态创建文件输入

> ID：11664504
> 
> 赞同：3
> 
> 时间：2012-07-26T07:35:15.373
> 
> 标签：javascript, internet-explorer, file-upload, cross-browser

单击我的自定义按钮后，下面的代码会动态创建文件输入，生成名称为 photo[] 且 id 为 photo'x'（x 作为变量）的文件输入。该代码在除全能 IE 之外的所有浏览器上都可以正常工作。在 IE 中，我可以单击自定义上传按钮添加文件，当我提交表单时，文件输入将被清除。它将提交表单，但文件输入将为空白。但它适用于其他浏览器。

这是一个错误吗？还是安全的东西？如果是，我该如何解决这个问题？

```
var x = 0;
addFile = function(addFileButton) {
    var form = document.getElementById('form');
    var box = document.createElement('input');
    box.type = 'file';
    box.name = 'photo[]';
    box.id = 'photo' + x;
    box.style.cssText = 'position:absolute; top:-200px;';
    box.onchange = function() {
        checkFileDup(this.value, x - 1);
    };
    form.appendChild(box);
    jQuery("#photo" + x).trigger('click');
    x++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T07:43:22.373

这是 IE 的问题，通过 javascript 创建的 input[type=file] 不能通过表单提交。

我的解决方案是在页面中制作一组隐藏的 input[type=file] 元素，并在需要时使它们可见。

# asp.net-mvc - 从不同的项目调用局部视图

> ID：11664505
> 
> 赞同：3
> 
> 时间：2012-07-26T07:35:16.363
> 
> 标签：asp.net-mvc, asp.net-mvc-partialview

在项目中，我使用此代码`@Html.Partial("../ReferenceChangeLog/ReferenceChangeLogPopUp")`来调用控制器和操作。

这里 ReferenceChangeLog 是控制器名称。`ReferenceChangeLogPopUp(ReferenceChangeLogPopUp.cshtml)`是部分视图名称。

如何设置调用另一个项目的控制器和操作的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:32:45.877

开箱即用不支持。默认情况下，仅在当前项目中解析 Razor 视图，这是您在 IIS 中部署为 ASP.NET 应用程序的项目。如果您需要实现这一点，则必须编写一个自定义 Razor 视图引擎，该引擎能够从文件系统上的任意位置检索视图。例如，这里[有一篇文章](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)解释了如何将 Razor 视图嵌入到程序集中并在多个项目中重用它们。

# c# - 由 Workflow.Invoker 引起的 AccessViolationException

> ID：11664507
> 
> 赞同：0
> 
> 时间：2012-07-26T07:35:21.773
> 
> 标签：c#, .net, workflow, workflow-foundation-4

我有大约 12,000 条记录。

在我的一个工作流活动中，我对所有 12,000 条记录进行交互，并在每条记录上手动调用另一个活动。

该行看起来像：

```
IDictionary<string, object> results = WorkflowInvoker.Invoke(childActivity, args); 
```

在大约第 11,500 条记录中，我收到 AccessViolationException 并显示我已到达受保护内存的消息。

我可以在任务管理器的性能选项卡中看到内存消耗上升。

如何防止上述代码在每次记录交互时增加内存，最终节省内存？

谢谢，约书亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:17:16.817

您要在不同的工作流程中调用全新的工作流程？

放弃这个。创建一个 NativeActivity 并在[Execute方法中使用](http://msdn.microsoft.com/en-us/library/dd781091.aspx)[NativeActivityContext.ScheduleFunc](http://msdn.microsoft.com/en-us/library/dd987633.aspx)安排您的子活动（该工作流程）。在回调中，对结果执行您需要的操作，然后安排下一条记录。

# iphone - iTunes Connect 中的 iPhone 二进制文件无效

> ID：11664512
> 
> 赞同：0
> 
> 时间：2012-07-26T07:35:46.497
> 
> 标签：iphone, appstore-approval

我在 iTunes Connect 上上传了一个 1.4 版的应用程序，但在 iTunes 上显示“无效二进制”。我尝试了更多次，但它不固定。我检查了图标、appid、构建设置等。我撤销了证书并再次生成并配置配置文件，我使用的是与以前版本相同的应用程序 ID。猜猜这里可能出了什么问题？我的应用程序在一个通用应用程序中。

这是来自苹果的消息

亲爱的开发者，

我们发现您最近为“MyApp”提交的二进制文件存在一个或多个问题。在审核您的应用之前，必须先纠正以下问题：

损坏的 PNG 文件 - PNG 图标文件 icon-72.png 似乎已损坏。

更正这些问题后，请转到“版本详细信息”页面并单击“准备上传二进制文件”。继续提交过程，直到应用程序状态为等待上传，然后使用 Application Loader 上传更正后的二进制文件。

问候，

App Store 团队

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:12:58.523

我得到了我的答案，项目 > 目标 > 构建设置 > 显示全部 > 我搜索“pack”的 Packaging 标题下的第一项将 Compress PNG Files 切换为 NO 一切正常

# asp.net-mvc - 如何将选择元素的第一个选项值设置为 0 而不是空选项值？

> ID：11664516
> 
> 赞同：1
> 
> 时间：2012-07-26T07:36:03.103
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想将第一个选项值设置为 0 而不是将其留空。我该如何设置？IE

```
<select id="PatentId" name="ParentId">
     <option value="0">--Select--</option>
     <option value="1">Books</option>
      // other options
</select> 
```

我的代码是

```
<div class="editor-field">
     @Html.DropDownList("ParentId","--Select--")
     @Html.ValidationMessageFor(model => model.ParentId)
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:37:32.367

你不能用内置的助手来做到这一点。您将不得不编写自定义帮助程序或硬代码或其他任何东西。

或者简单地使用一个视图模型和一个可为空的整数：

```
[Required]
public int? ParentId { get; set; } 
```

现在您将不再有任何问题或需要使用 0 作为首选。

此外，最好使用强类型版本的助手：

```
@Html.DropDownListFor(model => model.ParentId, Model.Parents, "--Select--") 
```

但是，如果出于其他原因（我目前没有看到）您需要使用 0 作为第一个选项，那么您在荒野中独自一人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:42:29.690

最后我发现下面的代码工作

```
private SelectList AddFirstItem(SelectList list)
{
   List<SelectListItem> _list = list.ToList();
   _list.Insert(0, new SelectListItem() { Value = "0", Text = "--Select--" });
   return new SelectList((IEnumerable<SelectListItem>)_list, "Value", "Text", list.SelectedValue);
} 
```

保留“值”和“文本”。最后一个`list.SelectedValue`是保持选定的值不变。

您可以使用上述功能

```
public ActionResult Create()
{
    ViewBag.ParentId = AddFirstItem(new SelectList(db.Categories, "Id", "Name"));
    return View();
} 
```

有效。

# android - Android - WebService 连接丢失

> ID：11664517
> 
> 赞同：0
> 
> 时间：2012-07-26T07:36:11.397
> 
> 标签：android, web-services, axis2, connectivity

我开发了一个带有后端服务器支持的 Android 应用程序。服务器是用 Java/Axis2/Hibernate 编写的。

我遇到了一个奇怪的情况......有时Android设备与服务器的连接丢失，但问题是我可以在服务器日志中看到相关的WebService API正在执行，因此在服务器中收到了数据包，但是Android 设备未收到响应。

我想消除问题出在服务器上的最坏情况。

有什么想法我该怎么做？也许有人有同样的问题？

约夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T00:57:53.947

您的意思是要保证响应成功发送到设备或避免执行无法回复的请求查询？

# c# - && 运算符用于双精度

> ID：11664518
> 
> 赞同：2
> 
> 时间：2012-07-26T07:36:13.503
> 
> 标签：c#

我需要一些关于 if 语句和运算符的帮助。我怎么能这样做：

```
double AgePenalty = 0;
if (AgeOfCustomer <= 21)
{
    AgePenalty = 15;
}
if (AgeOfCustomer <= 30 && AgeOfCustomer => 21) // cant use && operator with double
{
    AgePenalty = 10;
} 
```

这只是说如果客户年龄小于 21 岁，则应用某个价格标签；如果客户年龄在 21 至 25 岁之间，则应用较小的价格标签等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T07:38:12.747

您的检查`AgeOfCustomer => 21`是错误的，应该是：`AgeOfCustomer >= 21` 只需将您的`if`声明更改为

```
 if (AgeOfCustomer <= 30 && AgeOfCustomer >= 21) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T07:38:19.503

这不是`&&`问题所在 - 这是您的大于或等于运算符，即`>=`, not `=>`。

```
if (AgeOfCustomer <= 30 && AgeOfCustomer >= 21) 
```

`=>`用于[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。

（不清楚为什么你认为这与双打有关……）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T07:44:05.103

最好用下面的方式写

```
double AgePenalty = 0;
        if (AgeOfCustomer <= 21)
        {
            AgePenalty = 15;
        }
        else if (AgeOfCustomer <= 30) // as check is done for 21 already.
        {
            AgePenalty = 10;
        } 
```

上面的代码几乎没有优化。

# android - Android：我正在使用 mapview 和 ItemizedOverlay。我正在绘制一个drawable，它没有显示正确的位置

> ID：11664520
> 
> 赞同：1
> 
> 时间：2012-07-26T07:36:15.037
> 
> 标签：android, android-layout, android-mapview, android-maps

Android：我正在使用 mapview 和 ItemizedOverlay。我正在绘制一个drawable，它没有显示正确的位置。完全放大时它在地图上显示正确的位置，但当它缩小时，标记正在从正确的位置移动。任何人都可以知道解决方案。我是否需要在 ItemizedOverlay 的绘制中做些什么？

有谁知道解决办法。请帮我。

问候，佛法

# java - 为什么我们不能在静态方法中使用“this”关键字

> ID：11664522
> 
> 赞同：45
> 
> 时间：2012-07-26T07:36:20.963
> 
> 标签：java, oop, static, this

```
class Sub {
    static int y;
    public static void foo() {
         this.y = 10;
    }
} 
```

我知道它`this`代表调用该方法的对象，并且静态方法不绑定到任何对象。但在上述情况下，变量 y 也是静态的。

如果我们可以在类对象上调用静态方法，为什么我们不能允许静态方法设置类的静态变量。

这个附加约束的目的是什么？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-07-26T07:41:40.087

因为`this`是指对象实例。静态方法的调用中没有对象实例。但是当然你可以访问你的静态字段（只有静态字段！）。只需使用

```
class Sub {
    static int y;
    public static void foo() {
         y = 10;
    }
} 
```

如果要确保获得的是静态字段`y`而不是同名的局部变量，请使用类名来指定：

```
class Sub {
    static int y;
    public static void foo(int y) {
         Sub.y = y;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-01T06:21:59.750

我们不能在静态方法上下文中使用“this”的主要原因：-

this :- “this” 表示当前类 OBJECT ，因此很明显，“this”仅在我们打算创建该类的 Object 时出现在图片中。

静态方法：- 无需创建对象即可使用静态方法。根据 Java 规则，表示“实例”或对象创建对“静态”没有任何意义。

所以会有矛盾，如果我们一起使用（静态和这个）。这就是我们不能在静态方法中使用“this”的原因。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-26T07:40:54.797

`this`指的是对象的这个实例`Sub`。由于方法是`static`，没有`Sub`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-26T07:39:31.333

为了让你的代码工作，这样写：

```
class Sub {
    static int y;
    public static void foo() {
         Sub.y = 10;
    }
} 
```

您可以在静态方法中设置静态字段，但您无法`this`在静态方法中访问，因为`this`它代表对象的当前实例，而在静态方法中您没有实例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-26T07:40:31.427

这意味着“这个”对象，但没有一个。在您的情况下，您可以按照@tibtof 的建议使用类名。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-08T06:34:07.307

“this”关键字仅适用于创建对象实例的情况。并且在静态方法中没有创建实例，因为静态方法属于类区域。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-16T03:25:44.447

静态方法为静态字段设置值没有问题。

唯一的问题是*这个*关键字的使用。请注意，由于静态方法是在类加载时处理的，因此几乎可以肯定在该时间点不存在“ *this* ”，这就是为什么在静态上下文中不允许使用*this*关键字的唯一合乎逻辑的原因.

另一方面，可以从对象调用静态方法，因为它可以被对象访问。*静态*数据成员和行为背后的意图是使该类的所有实例都通用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-26T08:10:31.967

关键字“this”指的是您正在操作的对象。在您的情况下，this 在任何非静态方法或构造函数中（如果您有一个并且如果您在其中使用“this”），那么“this”指的是 Sub 类的特定实例。所以它仅适用于对象被创建。但是在类的静态上下文中的任何内容，您甚至可以在不为此创建对象的情况下使用它，因为它在类加载期间被解析。“this”仅在创建对象时才解决（您甚至可以动态地说出哪个对象）。所以“this”在静态上下文中是有意义的。希望能帮助到你。上帝保佑。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-19T17:15:57.090

当我们声明变量和方法是静态的，那么 this 被对象共享，其中 this 关键字仅指向当前对象。假设您已经创建了 foo 类的五个对象，然后所有对象都只创建了一个由 (int y) 制成的副本。因此，如果您使用此关键字访问 int y，则编译器会不确定哪个对象必须指向，因为静态 int y 是共享的被所有人反对。您可以使用类名访问静态变量。

# c# - Ajaxtoolkit Calendar Extender 只显示一个月的日期：

> ID：11664523
> 
> 赞同：1
> 
> 时间：2012-07-26T07:36:21.920
> 
> 标签：c#, asp.net, visual-studio-2010, gridview, calendarextender

我有一个名为“gvDate”的 GridView，它有 12 列，例如 1 月、2 月、3 月、......等等，直到 12 月。我有一个名为“btnAddNew”的按钮，它将向 GridView“gvDate”添加一个新行

我的 GridView 列是这样的：

```
<Columns>
<asp:TemplateField HeaderText="April">
     <ItemTemplate>
         <asp:TextBox ID="txtApr" runat="server" Text='<%#Bind("April")%>' contentEditable="false" Width="65px" Font-Size="Smaller"></asp:TextBox>
         <ajaxToolkit:CalendarExtender ID="AjaxAprCal" runat="server" TargetControlID="txtApr" Format="dd MMM yyyy" PopupButtonID="AprImg" PopupPosition="BottomRight" CssClass="custom-calendar">
         </ajaxToolkit:CalendarExtender>
         <asp:ImageButton ID="AprImg" runat="server" ImageUrl="../App_Themes/RIBO/Images/calendar.png" />
     </ItemTemplate>
</asp:TemplateField>
.........
.........
.........
</Columns> 
```

同样，我在 GridView 中有 12 列。

添加新行后，我需要选择相应月份的日期。但是日历扩展器只显示相应月份的日期。它不应该显示下一个或之前或其他一些月份的日期。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:30:32.793

```
Change Format="dd MMM yyyy" to Format="dd/MM/yyyy" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:41:06.333

我已经下载了 AjaxControlToolkit 4.1.50731。在此版本中，CalendarExtender 具有 StartDate 和 EndDate 等属性。所以这解决了我的问题。谢谢你们。

# android - 蓝牙 RFCOMM 通道 - Android

> ID：11664529
> 
> 赞同：1
> 
> 时间：2012-07-26T07:36:42.940
> 
> 标签：android, bluetooth

我已经设法通过改编 Android SDK 提供的蓝牙聊天示例代码来设置蓝牙服务器。我有一个关于如何找到创建的蓝牙服务器套接字的通道的问题。当我启动服务器时，我的调试器说如下：

![在此处输入图像描述](../Images/5ef812840a45c0a366bf322fd444811a.png)

我可以肯定地说 RFCOMM 频道是`64`吗？通过查看 logcat 的第二行？我需要这个特定的频道，因为我需要为我的非安卓蓝牙设备制作一个配置文件，它将连接并向我发送一些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:01:32.157

the channel should be exchanged via SDP

# asp.net - 实体框架 - 使用 .Include() 和 .Select() “急切加载” - 如何使用 LEFT JOIN 而不是 INNER JOIN？

> ID：11664532
> 
> 赞同：4
> 
> 时间：2012-07-26T07:36:51.853
> 
> 标签：asp.net, sql, entity-framework, ef-code-first, eager-loading

这是我正在使用 .NET 4.0 在 Entity Framework 5.0.0 RC（代码优先）中处理的查询

我是 Entity Framework 的新手，所以我仍然在思考如何构建查询，特别是在选择“子”相关数据方面。

我正在使用“急切加载”，因此我可以一次获取所有相关数据。但是我遇到了一个问题，并不是所有的 Drops 都被检索到了。

```
var loads = context.Loads
            .Include(
                p => p.Device
            )
            .Include(
                p => p.Drops.Select(
                    a => a.Customer
                )
            ).Include(
                q => q.Drops.Select(
                   b => b.Items.Select(
                       c => c.Product
                   )
                )
            ).Where(
                u => u.Id.Equals(id)
            ); 
```

问题是，在生成的 SQL 查询中，客户被 INNER JOINED 到 Drops，因此不包括没有客户的 Drops。

那么如何让它在这两个实体之间进行 LEFT JOIN 呢？

.Include 似乎做左连接 - 那么为什么不 .Select 呢？

除了 .Select 之外，还有其他方法可以用来执行 LEFT JOIN 吗？

* * *

**更新**

与 Amiram 聊天后，我意识到我的 Drop 模型设置不正确。我需要将 CustomerID 列设置为可选：

```
public class Drop
{
    public int Id { get; set; }
    public int? CustomerId { get; set; }
    public int LoadId { get; set; }
    public DateTime Date { get; set; }

    public virtual Customer Customer { get; set; }
    public virtual ICollection<DropItem> Items { get; set; }
} 
```

我应该立即想到这一点，但老实说，我被 .Include() 总是执行 LEFT JOIN 的事实所推迟，而不管模型关系的基数如何。我在想 .Select() 必须有一些类似的行为，但不，它只是遵守模型的配置方式:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:31:27.650

由于 Drop.CustomerID 是 int 类型且不可为空的 int 类型，因此 Drop.CustomerID 与客户内部连接（在聊天中查看）。

# php - 致命错误：调用未定义的方法 mysqli_result::fetch_all()

> ID：11664536
> 
> 赞同：23
> 
> 时间：2012-07-26T07:37:24.270
> 
> 标签：php, mysqli, fetchall, mysqlnd

我在 Ubuntu 10.04 中遇到了 PHP 问题。当我尝试使用 mysqli_result::fetch_all 时出现此错误：

**调用未定义的方法 mysqli_result::fetch_all()**

但是，它适用于 Windows XP。

编码：

```
$result = $this->dbh->query('SELECT [...] ');
return $result->fetch_all(MYSQLI_ASSOC); 
```

我不想将**fetch_assoc**与循环一起使用，因为我将结果发送到另一层进行处理。

我正在使用 PHP 5.4.4。和**php -m | grep mysql**没有出现的 mysqlnd 模块。我该如何安装它？这可能是问题吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-26T07:47:41.253

> mysqli_result::fetch_all() 需要 MySQL 本机驱动程序 (mysqlnd)。

您可能会错过它。

看看这个帖子，可能对你有帮助。

[mysqli fetch_all() 不是一个有效的函数？](https://stackoverflow.com/questions/6694437/mysqli-fetch-all-not-a-valid-function)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T05:02:11.123

`fetch_all`比 fetch_array() 消耗更多的内存并且有其他不利的副作用，所以与其 fix `fetch_all`，**不如使用`fetch_array`or`fetch_assoc`**。

详细来自 PHP 文档：

> 仅适用于 mysqlnd。
> 
> 由于 mysqli_fetch_all() 在单个步骤中将所有行作为数组返回，因此它可能比一些类似的函数（例如 mysqli_fetch_array()）消耗更多的内存，后者一次只从结果集中返回一行。此外，如果您需要对结果集进行迭代，您将需要一个循环结构来进一步影响性能。由于这些原因，mysqli_fetch_all() 应该只用于那些将获取的结果集发送到另一层进行处理的情况。

如果你真的要使用它，你必须使用本机驱动（mysqlnd）安装 mySQL 示例安装：

```
./configure --with-mysql=mysqlnd \
--with-mysqli=mysqlnd \
--with-pdo-mysql=mysqlnd \ 
```

在 Ubuntu 上你可以做

```
sudo apt-get install php5-mysqlnd 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T07:50:43.767

[http://www.php.net/manual/en/mysqli-result.fetch-all.php](http://www.php.net/manual/en/mysqli-result.fetch-all.php)

> 仅适用于 mysqlnd。

关于启用的说明`mysqlnd`：[http ://www.php.net/manual/en/mysqlnd.install.php](http://www.php.net/manual/en/mysqlnd.install.php)

# java - Java JFrame在失去焦点时显示初始化内容

> ID：11664537
> 
> 赞同：1
> 
> 时间：2012-07-26T07:37:24.630
> 
> 标签：java, swing, jframe, jpanel, jmenubar

我的应用程序使用 BorderLayout 在框架中显示内容。我在顶部还有一个菜单栏，因此可以切换显示其他框架。当我启动应用程序时，框架的这些内容区域中的每一个都有一个 JPanel，其中心加载了一个“启动屏幕”，一旦完成了一些后台初始化，面板就会更改为开始显示初始化后的信息。然后此面板每秒更新 5 次，由循环控制。

当我选择菜单栏时，中心面板的显示恢复到启动屏幕的显示。当我取消选择菜单栏时，面板将恢复为要显示的正确面板。调试这会导致整个 Eclipse 环境崩溃。

有谁知道可能是什么原因造成的？我不确定要在此处显示什么代码，因此如果您需要更多信息，我将对其进行编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:55:53.467

1.查看[Initial Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)，确保创建的 GUI 特别可见`invokeLater()`

2.Swing GUI 构造函数中的最后一行代码为

代码

```
 myFrame.pack();
   myFrame.setVisible(true);
} 
```

3.为了更好的帮助，请尽快发布[SSCCE](http://sscce.org/)

# mysql - 一个日期范围内的mysql用户连接数

> ID：11664541
> 
> 赞同：0
> 
> 时间：2012-07-26T07:37:39.277
> 
> 标签：mysql, count, connection

有一个数据库。如何获取用户的连接总数？例如，数据库名称：north_wind 数据库用户：smuwanga

我怎么知道 smuwanga 在过去 3 个月内与数据库建立了 200 个连接？

问候，西蒙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:09:27.080

我设法绕过它。我做了一个`grep 'mysql_username' /path/to/mysql.log |grep Connect | wc -l`

似乎在安装 mysql 时我将所有内容都保留为默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:40:23.793

MySQL 默认不保留连接日志。但是，如果您想找出当前的连接和用户，您可以使用`SHOW FULL PROCESSLIST`.

如果您仍然坚持记录用户连接，您可能需要[查看此博客文章，其中包含](http://mysqlhints.blogspot.sg/2011/01/how-to-log-user-connections-in-mysql.html)有关如何完成此操作的步骤。

# c# - 不确定类型的变量

> ID：11664544
> 
> 赞同：-4
> 
> 时间：2012-07-26T07:37:58.823
> 
> 标签：c#

我有一个包含不确定类型变量的类，它必须在运行时被覆盖，我该怎么做？

对不起这个令人作呕的问题（例如：

```
public class MyClass 
{
     public e_Type TypeValue;
     public (variable of indeterminate type) Value;
}

public enum e_Type
{
    string, int, bool, byte
} 
```

在运行时变量 TypeValue 应该确定变量 Value 的类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:40:51.040

根据您的实际意思，您应该使用`var`或`dynamic`。

该`var`关键字只是让编译器负责决定您实际使用的类型。如果您要分配的数据在运行时是真正动态的，**那么它对您没有多大好处**。您应该主要将`var`其视为语法糖（即使有时它可能是非常非常有用的糖） - 即它只是节省您的打字时间。

该`dynamic`关键字允许您创建一个真正动态的对象，也就是说，无论您尝试分配什么，都不会出现编译器或运行时错误。当您尝试调用其上不存在的属性时，运行时错误将在以后发生。这本质上是你告诉编译器“*嘿，看，不要对这个对象大惊小怪，让我给它分配任何东西并调用它。如果我搞砸了，那是我的问题，而不是你的问题。* ”

我认为每当您考虑使用时，都`dynamic`应该考虑手头的问题，看看是否可以以更好的方式解决它（接口、泛型等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:41:04.733

听起来你*真的*很喜欢泛型：

```
class Foo<T>
{
    public T Value { get; set; };
} 
```

然后您可以为不同类型创建实例：

```
Foo<string> x = new Foo<string>();
x.Value = "fred";

Foo<int> y = new Foo<int>();
y.Value = 10; 
```

这仍然在编译时修复类型 - 但是在编译*使用*该类型的代码时。

`var`这里是完全错误的——`var`只用于[隐式类型的局部变量](http://msdn.microsoft.com/en-us/library/bb384061.aspx)。特别是，您不能将其应用于字段。

您*可能*想要`dynamic`，但目前您的问题还不是很清楚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T07:41:28.730

> 我知道这必须使用关键字 var

不，那不是`var`。有 3 件事让我想到*会*起作用：

*   `object`; 可以存储任何东西，但需要反射来做任何有用的事情
*   `dynamic`; 对象的特殊情况，编译器执行巫术，以便`obj.SomeMethod()`（等）在运行时解析
*   泛型，即类为`SomeType<T>`，变量类型为`T`; 通用约束可以`T`通过声明它必须具有的特性（接口）来使其更有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:49:11.533

`var`目的是*引用*任何东西，而不是*声明*任何东西。这是相反的方式。

我曾经利用`System.Dynamic.ExpandoObject`（仅限 C# 4！）完成了这个，它允许在不声明它们的情况下随意添加属性，并且它们将在运行时解析（它类似于 PHP 处理对象的方式，我是它的忠实粉丝） .

一个简单的例子：

```
dynamic myObject = new ExpandoObject();
myObject.myProperty = "You can declare properties on-the-fly inside me !";
Console.WriteLine(myObject.myProperty); 
```

# javascript - 从 ASP.NET MVC 部分视图中卸载/删除 javascript 函数

> ID：11664549
> 
> 赞同：1
> 
> 时间：2012-07-26T07:38:16.420
> 
> 标签：javascript, jquery, asp.net-mvc, partial-views

在部分视图中，我加载了一个这样的 javascript 文件：

```
<script src="@Url.Content("~/Scripts/Testing.js")" type="text/javascript"></script> 
```

在 中`Testing.js`，定义了一些函数 就可以了，文件中定义的函数就可以使用了。

现在我在我的应用程序中执行一个操作，我的控制器返回另一个（我不加载任何 js 文件）部分视图。中定义的函数`Testing.js`在此局部视图中仍然可用。

有没有办法“删除”第一个视图中加载的功能？

谢谢，

**更新 1**

我在局部视图中尝试过，但错误： *无法直接请求文件“~/Views/xxxx.cshtml”，因为它调用了“RenderSection”方法。*

```
@section MyScript {
    <script src="@Url.Content("~/Scripts/Testing.js")" type="text/javascript"></script>
}
@RenderSection("MyScript", false) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T09:09:05.513

您应该避免在部分中引用任何脚本。您可以在布局中定义一个部分，例如在关闭之前`</body>`允许视图包含一些自定义脚本：

```
 <script type="text/javascript" src="@Url.Content("~/scripts/some_common_script_that_will_be_used_by_all_views_such_as_jquery_for_example")"></script>
    @RenderSection("scripts", false)
</body>
</html> 
```

然后在视图中（不是在局部视图中）覆盖此部分以包含此视图可能需要的任何脚本：

```
@section scripts {
    <script src="@Url.Content("~/Scripts/Testing.js")" type="text/javascript"></script>
} 
```

# jquery - 同位素高级过滤

> ID：11664553
> 
> 赞同：0
> 
> 时间：2012-07-26T07:38:31.193
> 
> 标签：jquery, filter, filtering, jquery-isotope

我正在使用 Isotope 在页面上显示产品。我希望用户能够对项目进行排序（没问题）和过滤项目。简单的过滤（即`".Brand1,.Brand2,.Color1"`返回带有 Brand1 的所有产品和带有 Brand2 的所有产品以及带有 Color1 的所有产品）工作正常。

但我需要实现的是高级过滤器，即`(Brand1 or Brand2) AND Color1`. 我的主要问题是我可以拥有数十种品牌和数十种颜色以及数十种其他可能的过滤器类别，因此遍历所有这些以创建类似的过滤器`".Brand1.Color1, Brand2.Color1"`可能需要很多时间。

你知道有什么方法可以像`(Brand1 or Brand2) AND Color1`Isotope 那样创建条件过滤器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:50:20.103

```
$(".foo, .bar").somemethod(someargument); 
```

匹配具有类 foo 或类 bar 的元素，

```
$(".foo.bar").somemethod(someargument); 
```

匹配具有类 foo 和类 bar 的元素，

```
$(".foo, .bar").not(selector) 
```

可能是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T14:17:47.347

Isotope 将 jQuery 对象作为过滤器。所以如果你想应用这个条件`(Brand1 or Brand2) AND Color1`，首先过滤你的元素：

```
var $elements = $('.element').filter('.Brand1, .Brand2').filter('.Color1');
```

并将其传递给 isotope 以更新视图：

```
$grid.isotope({ filter: $elements });
```

你就完成了:)

# java - com.sun.mail.smtp.SMTPSendFailedException: 452 4.4.5 磁盘空间不足；稍后再试

> ID：11664558
> 
> 赞同：1
> 
> 时间：2012-07-26T07:38:41.820
> 
> 标签：java, linux, email

我正在尝试通过Linux Centos 下的 Java 中的**org.apache.commons.mail** api 发送电子邮件。

我能够发送电子邮件，但现在当我尝试发送电子邮件时突然出现错误 -

```
com.sun.mail.smtp.SMTPSendFailedException: 452 4.4.5 Insufficient disk space; try again later
at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:2114)
at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1618)
at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1119)
at javax.mail.Transport.send0(Transport.java:195)
at javax.mail.Transport.send(Transport.java:124) 
```

我不明白为什么会这样。谁能帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:50:55.683

我想您的 SMTP 服务器中没有足够的空间。来自[RFC821](http://www.ietf.org/rfc/rfc821.txt)的错误代码 452证实了这一点。因此，请检查 SMTP 服务器中的存储空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:49:42.820

在我看来，错误消息本身就很清楚：您尝试从中发送邮件的服务器没有足够的磁盘空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:49:51.307

邮件服务器无法写入允许您收集邮件所需的临时文件。

您应该要求您的 ISP 检查服务器上的磁盘使用情况和分配情况。

# linux - readlink -f 带空格

> ID：11664559
> 
> 赞同：5
> 
> 时间：2012-07-26T07:38:46.230
> 
> 标签：linux, shell, unix

我正在编写一个 shell 脚本，其中参数将是一个位置的路径。我正在使用 readlink -f 命令获取用户发送的路径的绝对路径。假设用户发送的路径有空格，例如，

```
 /home/stack over flow/location 
```

我排除用户发送报价，例如

```
 "/home/stack over flow/location" 
```

我这里有2个问题，

1）即使路径是用引号传递的，当我遍历 $@ 时，引号也会被抑制并得到不带引号的路径。

2）我做了一个工作来检查参数是否包含空格，我明确地添加了喜欢

```
 if [[ $1 = *\ * ]] ; then
           temp=\"$1\"
    fi 
```

我在其中明确添加了引号 "，但现在我面临的问题是，即使我添加了带空格的变量，现在 readlink 也不起作用。当我这样做时

```
 full_path=`readlink -f ${temp}` 
```

它的说法用法：readlink [-n] [-f] symlink

如果我在 shell 中将其作为普通的 unix 命令执行，例如

```
 readlink -f "/home/stack over flow/location" 
```

这是有效的，我正在获得完整的路径。为什么即使我附加空格 readlink 在 shell 脚本中也不起作用？这个你能帮我吗。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T07:49:34.163

好吧，在脚本参数中获得不带引号的路径是有道理的：引号是用于处理脚本*调用*的 shell，而不是脚本本身。我假设你这样调用命令：

```
./test "/home/stack over flow/location" 
```

其中“测试”是您实现的脚本。路径周围的引号确保执行此命令的 shell 将路径视为一个单独的参数，而不是像没有引号那样将其视为三个单独的字符串。但是引号不被视为参数本身的一部分。因此，当将参数移交给您的脚本时，您会得到一个包含整个路径的参数，而不是包含基于路径的修改字符串的参数：带有填充引号的字符串。

您可以毫无问题地使用该参数。只需再次引用它：

```
readlink -f "$@" 
```

将保护指定路径中包含的空白，就像在原始调用中一样。

# image - r: dprint: 表格变更图像的大小

> ID：11664562
> 
> 赞同：3
> 
> 时间：2012-07-26T07:38:55.610
> 
> 标签：image, r, format, image-resizing, knitr

我正在使用`dprint`带有 的包`knitr`，主要是为了突出显示表格中的行，我已经开始工作了，但是输出图像为脚注留下了相当大的空间，并且占用了不必要的空间。

有办法摆脱它吗？

另外，由于我对 dprint 还很陌生，如果有人对如何突出显示表格并在没有任何脚注的情况下使它们看起来很漂亮有更好的想法/建议……或者整理我的代码的方法，那就太好了！

Rmd 文件代码的示例如下...

```
```{r fig.height=10, fig.width=10, dev='jpeg'}
library("dprint")
k <- data.frame(matrix(1:100, 10,10))
CBs <- style(frmt.bdy=frmt(fontfamily="HersheySans"), frmt.tbl=frmt(bty="o", lwd=1),
        frmt.col=frmt(fontfamily="HersheySans", bg="khaki", fontface="bold", lwd=2, bty="_"),
        frmt.grp=frmt(fontfamily="HersheySans",bg="khaki", fontface="bold"),
        frmt.main=frmt(fontfamily="HersheySans", fontface="bold", fontsize=12),
        frmt.ftn=frmt(fontfamily="HersheySans"),
        justify="right", tbl.buf=0)

x <- dprint(~., data=k,footnote=NA, pg.dim=c(10,10), margins=c(0.2,0.2,0.2,0.2), 
              style=CBs, row.hl=row.hl(which(k[,1]==5), col='red'), 
               fit.width=TRUE, fit.height=TRUE,  
                showmargins=TRUE, newpage=TRUE, main="TABLE TITLE")

``` 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:06:10.763

我以前没有使用`dprint`过，但我看到了一些可能导致问题的不同事物：

*   您的代码块的开头已经定义了图像的宽度和高度，这`dprint`似乎正在尝试使用。
*   您同时设置`fit.height`和`fit.width`。我认为只使用了其中一个（换句话说，生成的图像没有被拉伸以适应高度*和*宽度，而只是似乎最有意义的一个，在这种情况下是宽度）。

在修补了一分钟后，这就是我所做的，以最大限度地减少脚注。但是，我不知道是否有更有效的方法来做到这一点。

```
```{r dev='jpeg'}
library("dprint")
k <- data.frame(matrix(1:100, 10,10))
CBs <- style(frmt.bdy=frmt(fontfamily="HersheySans"), 
             frmt.tbl=frmt(bty="o", lwd=1),
        frmt.col=frmt(fontfamily="HersheySans", bg="khaki", 
                      fontface="bold", lwd=2, bty="_"),
        frmt.grp=frmt(fontfamily="HersheySans",bg="khaki", 
                      fontface="bold"),
        frmt.main=frmt(fontfamily="HersheySans", fontface="bold", 
                       fontsize=12),
        frmt.ftn=frmt(fontfamily="HersheySans"),
        justify="right", tbl.buf=0)

x <- dprint(~., data=k, style=CBs, pg.dim = c(7, 4.5), 
            showmargins=TRUE, newpage=TRUE, 
            main="TABLE TITLE", fit.width=TRUE)

``` 
```

# 更新

到处玩以确定图像的大小是一个总拖累。但是，如果您在 R 中运行代码并查看 的结构`x`，您会发现以下内容：

```
str(x)
# List of 3
#  $ cord1  : num [1:2] 0.2 6.8
#  $ cord2  : Named num [1:2] 3.42 4.78
#   ..- attr(*, "names")= chr [1:2] "" ""
#  $ pagenum: num 2 
```

或者，简单地说：

```
x$cord2

# 3.420247 4.782485 
```

这些是您生成的图像的尺寸，这些信息可能很容易插入到一个函数中，以使您的绘图更好。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:59:10.303

所以这是我的解决方案......有一些例子......

我刚刚复制并粘贴了我的 Rmd 文件来演示如何使用它。

您应该能够将其复制并粘贴到空白 Rmd 文件中，然后编织到 HTML 以查看结果...

理想情况下，我希望将它变成一个很好的简洁功能，而不是将其分成两部分（即 setup.table 和 print.table），但是由于块选项不能按照[Yihui](https://stackoverflow.com/questions/11668904/how-to-change-knitr-options-mid-chunk)的建议在块中间更改，它必须分成两个功能......

```
`dprint` +  `knitr` Examples to create table images
===========

```{r}
library(dprint)
# creating the sytle object to be used
CBs <- style(frmt.bdy=frmt(fontfamily="HersheySans"), 
             frmt.tbl=frmt(bty="o", lwd=1),
        frmt.col=frmt(fontfamily="HersheySans", bg="khaki", 
                      fontface="bold", lwd=2, bty="_"),
        frmt.grp=frmt(fontfamily="HersheySans",bg="khaki", 
                      fontface="bold"),
        frmt.main=frmt(fontfamily="HersheySans", fontface="bold", 
                       fontsize=12),
        frmt.ftn=frmt(fontfamily="HersheySans"),
        justify="right", tbl.buf=0)

# creating a setup function to setup printing a table (will probably put this function into my .Rprofile file)
setup.table <- function(df,width=10, style.obj='CBs'){
  require(dprint)
  table.style <- get(style.obj)
  a <- tbl.struct(~., df)
  b <- char.dim(a, style=table.style)
  p <- pagelayout(dtype = "rgraphics", pg.dim = NULL, margins = NULL)
  f <- size.simp(a[[1]], char.dim.obj=b, loc.y=0, pagelayout=p)
  # now to work out the natural table width to height ratio (w.2.h.r) GIVEN the style
  w.2.h.r <- as.numeric(f$tbl.width/(f$tbl.height +b$linespace.col+ b$linespace.main))
  height <- width/w.2.h.r

  table.width <- width
  table.height <- height

  # Setting chunk options to have right fig dimensions for the next chunk
  opts_chunk$set('fig.width'=as.numeric(width+0.1))
  opts_chunk$set('fig.height'=as.numeric(height+0.1))

  # assigning relevant variables to be used when printing
  assign("table.width",table.width, envir=.GlobalEnv)
  assign("table.height",table.height, envir=.GlobalEnv)
  assign("table.style", table.style, envir=.GlobalEnv)
}

# function to print the table (will probably put this function into my .Rprofile file as well)
print.table <- function(df, row.2.hl='2012-04-30', colour='lightblue',...) {
  x <-dprint(~., data=df, style=table.style, pg.dim=c(table.width,table.height), ..., newpage=TRUE,fit.width=TRUE, row.hl=row.hl(which(df[,1]==row.2.hl), col=colour))
}
```

```{r}
# Giving it a go!
# Setting up two differnt size tables
small.df <- data.frame(matrix(1:100, 10,10))
big.df <- data.frame(matrix(1:800,40,20))
```

```{r}
# Using the created setup.table function
setup.table(df=small.df, width=10, style.obj='CBs')
```

```{r}
# Using the print.table function
print.table(small.df,4,'lightblue',main='table title string') # highlighting row 4
```

```{r}
setup.table(big.df,13,'CBs') # now setting up a large table
```

```{r}
print.table(big.df,38,'orange', main='the big table!') # highlighting row 38 in orange
```

```{r}
d <- style() # the default style this time will be used
setup.table(big.df,15,'d')
```

```{r}
print.table(big.df, 23, 'indianred1') # this time higlihting row 23
``` 
```

# c++ - 带有模板的“虚拟”方法

> ID：11664565
> 
> 赞同：1
> 
> 时间：2012-07-26T07:39:07.687
> 
> 标签：c++, templates

我有以下基类：

```
template <template<class Type> class T2>
class FundamentalClass {
    typename T2<double> *_compose1;
    typename T2<int> *_compose2;

protected:
    FundamentalClass(); // Insert constructors here.

    template<class Strategy>
    T2<typename Strategy::Type> *Construct(void);

public:
    template <class Strategy>
    T2<typename Strategy::Type> *GetComposedObject(void);

}; 
```

和

```
template< template<class Type> class T2>
template<>
T2<double> *FundamentalClass<T2<double> >::GetComposedObject<DoubleStrategy>(void) {
    if( NULL == _compose1) {
        _compose1 = Construct<DoubleStrategy>(void);
    }
    return _compose1;
} 
```

以及每个组合对象的其他专业化。

但是，我需要构造由派生类实现。没有模板，Construct 应该是虚拟的。我怎样才能实现这个目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:57:58.030

[您可以通过奇怪的重复模板模式 (CRTP)](https://stackoverflow.com/questions/4173254/what-is-the-curiously-recurring-template-pattern-crtp)使用编译时多态性来做到这一点：

```
template <template<class Type> class T2, class Derived>
class FundamentalClass {
    ...

    template<class Strategy>
    T2<typename Strategy::Type> *Construct() {
        return static_cast<Derived *>(this)->DoConstruct<Strategy>();
    } 
```

在 中`Derived`，写：

```
template <template<class Type> class T2>
class Derived: public FundamentalClass<T2, Derived<T2> >
{
public:
    template<class Strategy>
    T2<typename Strategy::Type> *DoConstruct() {
        ...
    } 
```

# android - 项目没有 project.properties 文件！编辑项目属性以设置一个

> ID：11664568
> 
> 赞同：11
> 
> 时间：2012-07-26T07:39:23.533
> 
> 标签：android

由于一些问题，我恢复了我的 XP。但现在我的一些项目不起作用。它给了我以下错误：

`"Project has no project.properties file! Edit the project properties to set one."`

我不知道该怎么办？请帮助。在此先感谢！！！！
我还从系统驱动器备份了我的 .android 文件夹。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-14T10:59:14.250

转到`Properties`→`Android`并设置目标将不起作用，因为设置目标不会创建 project.properties 文件。

解决方法是：

*   在项目根文件夹中手动创建一个空的 project.properties 文件。
*   打开`Properties`→`Android`
*   设置所需的目标
*   刷新项目

在此之后，错误应该消失了。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-26T07:46:57.603

你应该检查[这个](https://stackoverflow.com/questions/3857576/project-has-no-default-properties-file-edit-the-project-properties-to-set-one)。

不要将其导入 Eclipse，使用从 Eclipse 中的现有源创建新项目

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-07T02:37:09.003

将鼠标悬停在您的 java 导入行中的任何错误上，然后按下`F2`、向下滚动并选择`Fix project setup`。将出现一个项目设置修复对话框，然后按确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:40:58.823

右键单击项目，然后选择属性-> 选择 android-> 设置目标。

# java - 处理由异步休息请求提供的大量期货

> ID：11664572
> 
> 赞同：0
> 
> 时间：2012-07-26T07:39:32.210
> 
> 标签：java, multithreading, rest, jersey

我想使用 jersey-client 来创建异步休息请求，该函数为我提供 Futures，所以我可以根据我的理解调用 get，如果请求完成，它将返回一些东西。

所以我在想，我可以将期货存储在地图中，并通过一个线程不时查看它们。或者也许我应该在每次有人发送异步请求时创建一个新线程。还有一个要求是它不应该永远持续（超时）。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:43:55.873

我经常使用 a`List<Future<Void>>`来存储期货。作为`get()`块，我只是循环浏览它们而不是轮询它们。

> 还有一个要求是它应该永远持续（超时）。

我想你的意思是它*不应该*永远持续下去。这需要您用来发出请求的库中的支持。如果它们可以被打断，您可以在您的等待线程或另一个 ScheduledExecutorService 中取消（true）未来。如果它们不能成为中断，您可能必须 stop() 线程，但*只能作为最后的手段*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:50:48.303

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)说：

> Future 表示异步计算的结果。提供了检查计算是否完成、等待其完成以及检索计算结果的方法。结果只能在计算完成后使用方法 get 检索，必要时阻塞，直到它准备好。

因此，您可以选择采用哪种策略：这主要取决于您想对这些请求做什么。

`Future`在遍历它们之前，您可以将这些s 放在任何可迭代的结构中。`get`如果您可以非常快速地处理每个结果并且确实需要在等待时检查是否已经返回了其他期货，则阻止每个可能是一种策略。

# .net - 展开/折叠 WPF DataGrid 上的行

> ID：11664573
> 
> 赞同：2
> 
> 时间：2012-07-26T07:39:34.877
> 
> 标签：.net, wpf, wpfdatagrid

我正在 WPF 中寻找 DataGrid，其中用户应该能够展开/折叠行，如下图所示。网格还应该支持所有 CRUD 操作，例如添加/删除/更新/删除行。

![在此处输入图像描述](../Images/ac5e0fd3c15fa05672c162e58d8f31bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:51:55.730

分层 DataGrid 没有随 WPF 一起提供。有几个非免费控件（通过[Telerik](http://www.telerik.com/products/wpf/treelistview.aspx)、[DevExpress](http://www.devexpress.com/Products/NET/Controls/WPF/Grid/)、[Infragistics](http://www.infragistics.com/products/wpf/data-grid/)、[Xceed](http://www.xceed.com/Grid_WPF_Intro.html)等）

如果您正在寻找免费控件，您可能想[看看这里](http://blogs.microsoft.co.il/blogs/davids/archive/2010/04/17/hierarchical-grid-with-wpf.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:49:08.840

如果您愿意花几美元，那么 Telerik [TreeListView 可以满足](http://www.telerik.com/products/wpf/treelistview.aspx)您的需求。

# sql - 生成分区名称列表

> ID：11664574
> 
> 赞同：0
> 
> 时间：2012-07-26T07:39:44.177
> 
> 标签：sql, oracle, date, range, database-partitioning

我想生成一个分区列表，而不必手动键入它们，我还可以选择要创建多少个分区。我正在使用按范围分区。请看下面的例子。

```
P_PARTITION_20120830 VALUES LESS THAN ('2012-08-30')
P_PARTITION_20120930 VALUES LESS THAN ('2012-09-30')
P_PARTITION_20121030 VALUES LESS THAN ('2012-10-30')
...
and so on 
```

这就是我到目前为止所提出的。

```
select  'P_PARTITION_' || to_char(add_months(sysdate, 1),'YYYYMMDD')
|| ' VALUES LESS THAN ' || to_char(sysdate, '(''YYYY-MM-DD'')') 
from dual; 
```

对于任何反馈，我们都表示感谢。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:49:06.497

这将生成十二个月的分区名称。调整 CONNECT BY 子句中的界限以产生您需要的数字。

```
select  'P_PARTITION_' || to_char(add_months(sysdate, level),'YYYYMMDD') 
|| ' VALUES LESS THAN ' || to_char(sysdate, 'YYYY-MM-DD')  
from dual
connect by level <= 12; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:58:52.787

您使用的是哪个版本的 Oracle？如果您使用的是 11g，您可以让 Oracle 根据需要为您创建分区。这意味着 DBA 的工作量减少了。

Oracle 将此称为“间隔分区”。

有关语法，请参阅[http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#BABJDACD](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#BABJDACD)，而有关示例，请参阅[http://docs.oracle.com/cd/E11882_01/server .112/e25523/part_admin001.htm#autoId3](http://docs.oracle.com/cd/E11882_01/server.112/e25523/part_admin001.htm#autoId3)

# sql - 将 access BackEnd 切换到 sql express 的好处

> ID：11664575
> 
> 赞同：0
> 
> 时间：2012-07-26T07:39:49.620
> 
> 标签：sql, ms-access, sql-server-express

我有一个访问数据库，它分为后端和前端，在 60 个表中有 ca 100000 条记录。

我有这个想法，我可以将我的后端切换到 MSSQL Server Express。

我想知道尝试这个想法是否值得。如果我的后端是 SQL Express 和前端访问，我有什么优势。

谢谢你的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:54:30.893

绝对值得换成 SQL Server 或 MySQL 的版本。从 Access 迁移后可能需要一段时间才能掌握窍门，但使用 MS Sql Server 将允许您轻松导入表，并且您将拥有一个更加面向未来的应用程序。为我们工作得很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:45:39.320

这取决于有多少用户同时使用您的数据库，以及您的后端是位于 LAN 上还是本地数据库。Access 无法处理的记录数（100000）。

如果您的数据库位于 LAN 位置或者如果您有并发用户，那么迁移到 SqlServer 应该会获得一些优势，但是需要对代码进行一些管道和重新检查。

请记住，Access 可以快速且轻松地构建应用程序，但其核心是适用于低并发情况的个人数据库。有时（我倾向于责怪程序员而不是 Access 本身）它不适合并发使用。如果您的应用程序至关重要，那么与每个数据库解决方案一样，良好的灾难恢复计划和快速的维护干预时间是强制性的。

# ruby-on-rails - Ruby 编程 - 使用命名范围时避免代码重复

> ID：11664576
> 
> 赞同：0
> 
> 时间：2012-07-26T07:39:57.037
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2

我的模型中有多个命名范围。它们具有不同的名称，但具有相同的参数。现在，当我根据条件使用这些命名范围时，我必须一直复制整个参数。有没有办法避免这种情况？

**例如：** 在我说的产品模型中：

```
named_scope :example1, lambda{ |parameter1, parameter2|{
 //some code here//
 }
}

named_scope :example2, lambda{ |parameter1, parameter2|{
 //some code here//
 }
}

named_scope :example3, lambda{ |parameter1, parameter2|{
 //some code here//
 }
} 
```

现在，我想根据条件使用这些

```
if(condition)

Product.example1(param1, param2)

elsif (condition)

Product.example2(param1, param2)

else

Product.example3(param1, param2) 
```

**有没有办法在红宝石中这样称呼它：**

```
variable = example1 //I can get the name of named_scope here

Product.variable(param1, param2). //The relevant named_scope should be used. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:46:45.757

您可以使用[Object#send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)向 Product 发送消息（也称为调用方法）。

```
Product.send(variable,param1,param2) 
```

# web-crawler - 从 Google Play 网站提取数据

> ID：11664579
> 
> 赞同：0
> 
> 时间：2012-07-26T07:40:09.283
> 
> 标签：web-crawler, google-play

我在 Google Play 上有一些应用程序。现在，当我登录时，我可以看到**Total User Installs**和**Active User Installs**等统计信息。我可以手动检查这些数字，但有没有办法可以编写代码，使用我的登录凭据自动提取这些数据？

我尝试使用名为 Jsoup 的 Java 第三方工具，但谷歌似乎不允许任何此类工具访问它看起来的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:52:27.783

目前，有一个官方的 Google Play Android Developer API，但它的功能相当有限。参考：[https ://developers.google.com/android-publisher/](https://developers.google.com/android-publisher/)

此外，还有一个非官方的 API：[http](http://code.google.com/p/android-market-api/) ://code.google.com/p/android-market-api/它做的更多，但认为它不足以完成您想要提取的内容。

有关更多信息，请参阅以下问题：[https ://stackoverflow.com/questions/10661434/does-google-play-have-an-api](https://stackoverflow.com/questions/10661434/does-google-play-have-an-api)

# ruby-on-rails - Solr 太阳黑子多值字段获取匹配元素

> ID：11664580
> 
> 赞同：1
> 
> 时间：2012-07-26T07:40:10.020
> 
> 标签：ruby-on-rails, solr, sunspot

我正在使用 solr 和 EdgeNGram 开发自动完成功能并创建多值字段

这是来自 schema.xml 的详细信息

......

```
<fieldType name="autocomplete" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <!--tokenizer class="solr.KeywordTokenizerFactory"/-->
    <!--tokenizer class="solr.NGramTokenizerFactory" minGramSize="2" maxGramSize="50"/-->
    <tokenizer class="solr.WhitespaceTokenizerFactory" minGramSize="2" maxGramSize="50"/>
    <filter class="solr.LowerCaseFilterFactory"/>
   <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="25" />
 </analyzer>
 <analyzer type="query">
   <tokenizer class="solr.WhitespaceTokenizerFactory"/>
   <filter class="solr.LowerCaseFilterFactory"/>
 </analyzer>
</fieldType> 
```

…………

```
<dynamicField name="*_ac" type="autocomplete" indexed="true"  stored="true" multiValued="true" /> 
```

这就是我声明用户模型的方式

类用户 < ActiveRecord::Base attr_accessible :email, :name

可搜索 do text :email text :name 自动完成 :text_ac, :as => :text_ac, :multiple => true do [self.email,self.name] end end

结尾

而我正在寻找的是获得“命中”价值的方法

当我查询 solr 时

```
Sunspot.search(User, Post) do with(:user_id, 1);
 adjust_solr_params do |p| p[:q] = 'text_ac:"some s"'; p[:fq] = '' end 
end.results 
```

我可以获取实例（用户、帖子）

，但我怎样才能得到命中值 - 多值字段中的确切行 - 数组元素

# php - 如何编写 sql 查询以根据选择的来自不同表的条件来显示 2 个表中的项目

> ID：11664595
> 
> 赞同：0
> 
> 时间：2012-07-26T07:41:06.000
> 
> 标签：php, mysql, inner-join

如何编写一个 sql 查询以根据选择的来自不同表的条件来显示 2 个表中的项目。

我有的表：

1.  **客户**表有列 CustomerID、Name、Address、Tel
2.  **CustomerOrder**表包含 CustomerID、OrderID、Date、TotalAmount、Status 列
3.  **OrderItem**表包含 OrderID、ProductCode、UnitPrice、Qty、TotalPrice 列

因此，选择CustomerId时，我希望订单显示加入这3个表。如下所示，它应该显示客户曾经下过的所有订单。我尝试使用查询：

```
Select CustomerOrder.*, OrderItem.*
From CustomerOrder
INNER JOIN OrderItem Where Customer.CustomerID = $CustomerID 
```

但它不起作用。在查询以及使用 php 正确显示数据时需要帮助。

任何人都可以帮忙吗？

例如

```
CustomerID:__________

OrderID:__1____ Date:______ TotalAmount:______ Status:_____
ProductCode:__ UnitPrice:___ Qty:_____TotalPrice:__________
ProductCode:___ UnitPrice:______ Qty:_____ TotalPrice:_________

OrderID:___2___ Date:______ TotalAmount:______ Status:_____
ProductCode:__ UnitPrice:___ Qty:_____TotalPrice:__________
ProductCode:___ UnitPrice:______ Qty:_____ TotalPrice:_________ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:54:39.697

试试这样： `SELECT co.OrderID,date,TotalAmount,ProductCode, UnitPrice,Qty,TotalPrice,Status FROM CustomerOrder AS co INNER JOIN OrderItem AS oi ON oi.orderID = co.OrderID INNER JOIN Customer AS c ON c.CustomerID = co.CustomerID WHERE c.CustomerID = $customer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:15:11.490

由于您不需要在此步骤显示客户信息，因此您可以查询：

```
SELECT co.OrderID
,co.Date
,co.TotalAmount
,co.Status
,ci.ProductCode
,ci.UnitPrice
,ci.Qty
,ci.TotalPrice
FROM CustomerOrder AS co
INNER JOIN OrderItem AS ci ON (ci.orderID = co.OrderID)
WHERE co.CustomerID = $customer
ORDER BY co.OrderID, ci.ProductCode 
```

由于您不想在输出中重复订单信息，因此您的 PHP 代码应该是这样的：

```
$current_order_id = false;
foreach ($data as $row) {
   if ($current_order_id!==$row['OrderID']) {
        $current_order_id = $row['OrderID'];
        echo "OrderID: ".$row['OrderID']." , Date: ".$row['Date']." , TotalAmount: ".$row['TotalAmount']." , Status: ".$row['Status']." <br>";
   }
   echo "ProductCode: ".$row['ProductCode']." , UnitPrice: ".$row['UnitPrice']." , Qty: ".$row['Qty']." , TotalPrice: ".$row['TotalPrice']." <br>";
} 
```

`CustomerOrder`另一种方法是首先从only获取所有 Orders 信息。然后循环结果并获取`OrderItem`每个订单的项目信息。

# c++ - C++ 如何避免动态转换？

> ID：11664597
> 
> 赞同：0
> 
> 时间：2012-07-26T07:41:18.463
> 
> 标签：c++, dynamic-cast

我对 dynamic_casting 做了一些研究，我读到它创建了一个叫做 RTTI 的东西，它在启动时也被加载到 RAM 中。我认为在某些平台上也不支持此功能。所以我想知道是否有任何好的解决方案来避免它。

假设我有 Statement 类

```
class Statement
{
    std::list<Operand*> operands;
}; 
```

操作数是一个具有更多子类的类，如内存地址、寄存器等。（有些人想知道，我正在尝试制作一个汇编程序。：P

我不能使用 dynamic_cast 进行向下转换，如果可以的话，这也很糟糕。但是如果我向 Operand 添加一个枚举，它定义了它的类型，所以我可以使用它的类型来向下转换 static_cast。

我可以使它成为一个常量，并在每个子类的构造函数中定义它，对吗？

我期待着大家的想法。

基督教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:44:05.793

制作类型 - 是一种选择。

但考虑`interface`为`Operand`. 因此，您的`memory address`, `register`, ect 将实现该接口，您将能够将它们视为多态。

如果你不能发明这样`interface`的 - 考虑重新设计你的类，因为它们看起来不需要有一个公共接口。

如果您需要代码重用 - 使用`composition`，而不是`inheritance`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:56:42.450

如果您决定要向下转换，则可以考虑使用接口来获取适当的类型。但是，您也可以明确列出子类。

```
class Operand {
public:
    enum Type { OT_Address, OT_Register, /*...*/ };
    virtual Type type () const = 0;
    virtual AddressOperand * isAddress () { return 0; }
    virtual RegisterOperand * isRegister () { return 0; }
    //...
}; 
```

然后，您只需调用与该类型关联的方法，而不是向下转换。派生类将实现它：

```
class AddressOperand : public Operand {
public:
    Operand::Type type () const { return Operand::OT_Address; }
    AddressOperand * isAddress () { return this; }
    //...
}; 
```

# php - Symfony2 + SonataPageBundle

> ID：11664601
> 
> 赞同：2
> 
> 时间：2012-07-26T07:41:34.457
> 
> 标签：php, symfony

我尝试在 Symfony2 上安装 SonataPageBundle，但在捆绑配置过程中出现错误...

当我运行以下命令时，我按照官方文档安装包并在 3.3 步骤：

```
php app/console sonata:page:create-snapshots -site=all 
```

我收到此错误：

> 致命错误：在第 2631 行的 /var/www/Symfony/app/cache/dev/appDevDebugProjectContainer.php 中找不到类“Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher”

你对我的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:54:42.337

您可能使用 Symfony 2.0，但缺少

```
Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher 
```

[您可以在https://github.com/symfony/symfony](https://github.com/symfony/symfony)下载包 symfony 2.1 或 master

将文件夹中的 ContainerAwareEventDispatcher.php文件复制`Symfony\Component\EventDispatcher`到 Symfony 2.0 ( `vendor\symfony\src\Symfony\Component\EventDispatcher`)

我做到了，效果很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:00:33.783

您需要更换所有

`Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher`

在项目中

`Symfony\Bundle\FrameworkBundle\ContainerAwareEventDispatcher`

我刚做了这个，它奏效了！

# jsp - JSP 通过 servlet 重定向

> ID：11664604
> 
> 赞同：0
> 
> 时间：2012-07-26T07:41:42.490
> 
> 标签：jsp, servlets, redirect

我在 jsp 应用程序中的重定向存在一些问题。

我的重定向方法是这样的：

```
public static void redirectUrl(String url,HttpServletRequest request,HttpServletResponse response) throws ServletException,IOException
{
    request.getSession().getServletContext().getRequestDispatcher("/" + url).forward(request,response);
} 
```

当我在 localhost 上启动应用程序时，一切正常，但是当我将它部署到服务器上时，它会因以下异常而崩溃：

```
Servlet error
java.lang.IllegalStateException: Response has already been committed
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.3.0)].server.http.EvermindHttpServletResponse.resetBuffer(EvermindHttpServletResponse.java:1933)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.3.0)].server.http.ServletRequestDispatcher.forward(ServletRequestDispatcher.java:221)
at app.framework.request.Controller.doPost(Controller.java:50)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.3.0)].server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:835)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.3.0)].server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:341)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.3.0)].server.http.ServletRequestDispatcher.forward(ServletRequestDispatcher.java:230)
at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.3.0)].server.http.GetParametersRequestDispatcher.forward(GetParametersRequestDispatcher.java:257) 
```

我在每次重定向调用之后都放了 return 语句，但它不起作用。

有人能告诉我为什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:59:03.023

```
java.lang.IllegalStateException: Response has already been committed 
```

当响应已经写入时会出现此错误。

请参阅这篇文章中的[答案](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe)。

您使用的术语“重定向”不是根据您的代码重定向。它称为“转发”。

尝试：

```
request.getRequestDispatcher("/" + url).forward(request, response); 
```

编辑（详细解释）：

`request.getRequestDispatcher(“url”)`表示调度是相对于当前的 HTTP 请求的。

```
RequestDispatcher reqDispObj = request.getRequestDispatcher("/home.jsp"); 
```

路径参数不必以“/”开头

`getServletContext().getRequestDispatcher(“url”)`表示调度是相对于`ServletContext`.

```
RequestDispatcher reqDispObj = getServletContext().getRequestDispatcher("/ContextRoot/home.jsp"); 
```

路径参数必须以“/”开头

# php - Fancybox - 无法在 iframe 中打开类似 facebook 的框

> ID：11664607
> 
> 赞同：3
> 
> 时间：2012-07-26T07:42:21.960
> 
> 标签：php, javascript, jquery, ajax, fancybox

我是 js 新手，并试图在我的网站第一次加载时打开一个包含我的 facebook 粉丝页面的 fancybox iframe，但没有成功。我已经对fancybox中的js文件和标题部分中的适当css进行了所有调用我试图在索引页面中包含代码以便在页面加载时显示iframe但没有成功，iframe只是不显示. 这是我使用的代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".iframe" ).fancybox({
        'width'             : '75%',
        'height'            : 440,
        'autoScale'         : false,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'type'              : 'iframe',
        'href'              : "www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FPalindrom%2F104421159704142&amp;width=600&amp;height=258&amp;colorscheme=dark&amp;show_faces=true&amp;border_color=%2399c844&amp;stream=false&amp;header=false&amp;appId=391204344279942"
    });
$(".iframe").eq(0).trigger('click');​        
});
</script>

<a id="iframe"></a> 
```

解决了！多谢你们！设法使用 $.fancybox 打开它，而不需要锚点。这是我使用的代码，也许它会对 jquery 和 fancybox 的新手有所帮助（我还添加了一个延迟计时器）：

```
<script type="text/javascript">
setTimeout(function() {
  // Do something after 5 seconds

$.fancybox({
    'width'             : 620,
    'height'            : 260,
    'autoScale'         : true,
    'transitionIn'      : 'fade',
    'transitionOut'     : 'elastic',
    'openEffect'        : 'fade',
    'closeEffect'       : 'elastic',
    'type'              : 'iframe',
    'href'              : "http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FPalindrom%2F104421159704142&width=600&height=258&colorscheme=light&show_faces=true&border_color=%2399c844&stream=false&header=false&appId=391204344279942"
});
}, 5000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:54:24.140

`http://`之前添加`www`呢？

所以这个选项

```
'href'  : "www.facebook.com/.... 
```

应该看起来像

```
'href'  : "http://www.facebook.com/... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:34:45.803

```
<script>
$(document).ready(function() {
    $(".iframe" ).fancybox({ // .iframe - defined class here
        'width'             : '75%',
        'height'            : 440,
        'autoScale'         : false,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'type'              : 'iframe',
        'href'              : "www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FPalindrom%2F104421159704142&amp;width=600&amp;height=258&amp;colorscheme=dark&amp;show_faces=true&amp;border_color=%2399c844&amp;stream=false&amp;header=false&amp;appId=391204344279942"
    });
$(".iframe").eq(0).trigger('click');​        
});
</script>

<a id="iframe"></a> <!-- #iframe - defined an ID here --> 
```

也许您可以尝试将 id 更改`<a id="iframe"></a>`为 class of`<a class="iframe"></a>`

JsFiddle 演示[在这里](http://jsfiddle.net/agriboz/sZzyn/2102/)

# iphone - NSMutableRequest 和 Flickr API 用于上传图片

> ID：11664612
> 
> 赞同：2
> 
> 时间：2012-07-26T07:43:05.073
> 
> 标签：iphone, ios, upload, flickr, nsmutableurlrequest

我为我的应用程序使用 Flickr API 来管理用户的照片。我决定使用 Apple 的类进行身份验证，它对我来说效果很好。现在我的应用程序已经过身份验证，并拥有所有必要的令牌和密钥，因此可以通过 flickr.photos.search、flickr.test.login 等方法的身份验证执行 GET 请求。但我花了几天时间尝试使用[http://api.flickr.com/services/upload/](http://api.flickr.com/services/upload/) 和他们的说明[来](http://www.flickr.com/services/api/upload.example.html)执行上传。他们说请求应该有参数“照片”，并且这个参数不应该包含在签名中。这很清楚，但我不知道如何在请求中实现这个参数。

```
#import "FlickrUploader.h"
#import "HMACSH1.h"
#import "Prefs.h"
#import "NSString+URLEncode.h"

@implementation FlickrUploader

- (void)uploadPhotoAtPath:(NSString*)filePath {

    NSString *upload_api_url = @"http://api.flickr.com/services/upload/";
    NSString *oauth_nonce = [NSString stringWithFormat:@"%d", 10000000 + arc4random()%1000000];
    NSString *oauth_timestamp   = [NSString stringWithFormat:@"%d", (long)[[NSDate date] timeIntervalSince1970]];
    NSString *oauth_consumer_key = CONSUMER_KEY;
    NSString *oauth_signature_method = @"HMAC-SHA1";
    NSString *oauth_version = @"1.0";
    NSString *oauth_token = [[NSUserDefaults standardUserDefaults] objectForKey:OAUTH_ACCESS_TOKEN_KEY];
//creating basestring to make signature without a 'photo' argument according to API   
    NSMutableString *basestring = [[NSMutableString alloc] initWithCapacity:8];

    [basestring appendFormat:@"&oauth_consumer_key=%@",oauth_consumer_key];
    [basestring appendFormat:@"&oauth_nonce=%@",oauth_nonce];    
    [basestring appendFormat:@"&oauth_signature_method=%@",oauth_signature_method];
    [basestring appendFormat:@"&oauth_timestamp=%@",oauth_timestamp];
    [basestring appendFormat:@"&oauth_token=%@", oauth_token];
    [basestring appendFormat:@"&oauth_version=%@",oauth_version];
//this is may class to make HMAC-SHA1 signature (it works for authentication and for GET requests)
    HMACSH1 *hMACSH1 = [[HMACSH1 alloc] init];

    NSMutableString *urlEncodedBaseString = [[NSMutableString alloc] initWithCapacity:3];
    [urlEncodedBaseString appendString:@"POST"];
    [urlEncodedBaseString appendFormat:@"&%@",[upload_api_url urlEncodedString]];
    [urlEncodedBaseString appendFormat:@"&%@",[basestring urlEncodedString]];

    NSString *oauth_token_secret = [[NSUserDefaults standardUserDefaults] objectForKey:OAUTH_TOKEN_SECRET_KEY];

    NSString *hash_key = [CONSUMER_SECRET stringByAppendingFormat:@"&%@",oauth_token_secret];

    NSString *oauth_signature = [hMACSH1 hmacSH1base64ForData:urlEncodedBaseString keyValue:hash_key];

//creating url for request    
    NSMutableString *urlString = [[NSMutableString alloc] initWithCapacity:8];

    [urlString appendFormat:@"%@",upload_api_url];
    [urlString appendFormat:@"?"];
    [urlString appendString:basestring];
    [urlString appendFormat:@"&oauth_signature=%@", oauth_signature];

    NSURL *authURL = [[NSURL alloc] initWithString:urlString]; 

    NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:authURL
                                                           cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                       timeoutInterval:30.0];
    request.HTTPMethod = @"POST";

    UIImage *img = [UIImage imageNamed:filePath];
    NSData *imgData = UIImageJPEGRepresentation(img, 0.8);

//here I don't know what to do :((( perhaps NSOutputStream

} 
```

# excel - 是否有根据今天日期更改单元格颜色的公式？

> ID：11664614
> 
> 赞同：0
> 
> 时间：2012-07-26T07:43:20.417
> 
> 标签：excel, date, spreadsheet, google-docs

我在 Google Docs 中有一个电子表格，其中每天都有一个新列，标题是填写日期。

我想将具有今天之前的标题/日期的每一列的背景颜色设置为灰色。

（注意：我要设置背景颜色的单元格不包含日期。它只是列的标题）

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T18:42:37.760

新的 Google 表格可以做到这一点。按照此处的说明进行操作：https: [//support.google.com/drive/answer/78413?hl=en](https://support.google.com/drive/answer/78413?hl=en)

虽然它不能完全解决问题，但您将能够根据单元格的值定义一种列颜色。

希望它有所帮助。

Ps：当我在测试它时，我在这个功能中遇到了一些错误，所以很可能它不会真正有用。走着瞧...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:52:16.967

不确定这是否适用，因为我不使用 Google Docs，但它适用于 excel。

```
Left column                  right column

Tuesday, July 24, 2012       =IF(B1<B3,1,0)
Wednesday, July 25, 2012     =IF(B2<B3,1,0)
Thursday, July 26, 2012      =IF(B3<B3,1,0) 
```

结果：

```
Left column                  right column

Tuesday, July 24, 2012       1
Wednesday, July 25, 2012     1
Thursday, July 26, 2012      0 
```

现在根据右列的值应用条件格式。

单元格是否包含日期并不重要。该日期仅对条件评估是必需的。将有条件地格式化背景的代码可以轻松地对单元格范围进行操作。

# matlab - 如何使用 matlab 将 .hdr 转换为 .pfm？

> ID：11664616
> 
> 赞同：0
> 
> 时间：2012-07-26T07:43:23.700
> 
> 标签：matlab, hdr

有没有办法（或一段代码）可以将 .hdr 格式的图像转换为 .pfm 格式？

我有一个读取 .pfm 文件的代码，但我想让它与 .hdr 文件一起运行。在 Photoshop 上将 .hdr 文件转换为 .pfm 并不幸阅读下一个选项不是一种选择。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:08:11.703

www.advancedhdrbook.com 或[https://github.com/banterle/HDR_Toolbox/](https://github.com/banterle/HDR_Toolbox/)上的 HDR 工具箱具有读取和写入 .hdr 和 .pfm 的功能还有一个用于写入和读取 HDR 图像的高级功能：hdrimwrite和 hdrimread

# iphone - 将数据从 json 解析到 iphone 应用程序

> ID：11664617
> 
> 赞同：0
> 
> 时间：2012-07-26T07:43:31.620
> 
> 标签：iphone, xcode, json

我正在将来自 iphone 应用程序的数据解析为来自服务器的 json，但它没有从 json 获取数据

我正在使用以下代码

从 json 获取数据

这是我的json数据的链接

[http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=ali40](http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=ali40)

```
 NSString*user=@"ali40";
 NSString *url=[NSString stringWithFormat:@"http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=%@",user];
 NSLog(url);
 NSArray *tempArray =[[DataManager staticVersion] startParsing:url];
 for (int i = 0; i<[tempArray count]; i++) {

    id *item = [tempArray objectAtIndex:i];
    NSDictionary *dict = (NSDictionary *) item;
    ObjectData *theObject =[[ObjectData alloc] init];
    [theObject setUser_id:[dict objectForKey:@"user_id"]];
    [theObject setSurvey_id:[dict objectForKey:@"survey_id"]];
    [theObject setSurvey_title:[dict objectForKey:@"survey_Title"]];
    [theObject setSurvey_Description:[dict objectForKey:@"survey_Description"]];    
    [theObject setDate_Created:[dict objectForKey:@"date_Created"]];
    [surveyList addObject:theObject];
    [theObject release];
    theObject=nil;
    int count =[surveyList count];
    NSLog(@"Total is %d",count); 
```

数据管理器类

数据管理器 *实例；

```
 + (id)staticVersion{

if(!theInstance){
    theInstance = [[DataManager alloc] init];
}
return theInstance;
   }

  - (NSMutableArray *) startParsing:(NSString *)theURLString {

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",theURLString]];
NSString *fileContent= [NSString stringWithContentsOfURL:url];
SBJSON *parser = [[SBJSON alloc] init];  
NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil];  
NSArray *items = (NSArray *) data ;  

return items;

    int count=[items count];

    NSLog(@"This is testing %d",count);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:50:14.453

你的json不正确。它应该是这样的：

```
{"ali40":[{"user_id":"ali40","survey_id":"1","survey_title":"Resturant Survey","survey_description":"Survey To get feedback from clients about food quality and any suggestion to improve the service","date_created":"2012-07-24 22:39:14","color":"[UIColor GrayColor]"},{"user_id":"ali40","survey_id":"2","survey_title":"Travel Servey","survey_description":"Toursim Survey","date_created":"2012-07-25 00:43:42","color":"[UIColor greyColor]"}]} 
```

此代码返回非空结果

```
 NSString*user=@"ali40";
    NSString *url=[NSString stringWithFormat:@"http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=%@",user];
    NSLog(@"%@",url);
    NSData* data = [NSData dataWithContentsOfURL:
                    [NSURL URLWithString: url]];
    __autoreleasing NSError* error = nil;
    id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    if (error != nil) NSLog(@"%@",error);
    NSLog(@"%@",result); 
```

输出：

```
2012-07-26 10:26:22.226 test[2511:f803] (
        {
        color = "[UIColor GrayColor]";
        "date_created" = "2012-07-24 22:39:14";
        "survey_description" = "Survey To get feedback from clients about food quality and any suggestion to improve the service";
        "survey_id" = 1;
        "survey_title" = "Resturant Survey";
        "user_id" = ali40;
    },
        {
        color = "[UIColor greyColor]";
        "date_created" = "2012-07-25 00:43:42";
        "survey_description" = "Toursim Survey";
        "survey_id" = 2;
        "survey_title" = "Travel Servey";
        "user_id" = ali40;
    }
) 
```

如果你 json 返回许多记录，你需要修改你的 json 文件

```
 {"users":[{"user_id":"ali40","survey_id":"1","survey_title":"Resturant Survey","survey_description":"Survey To get feedback from clients about food quality and any suggestion to improve the service","date_created":"2012-07-24 22:39:14","color":"[UIColor GrayColor]"},{"user_id":"ali40","survey_id":"2","survey_title":"Travel Servey","survey_description":"Toursim Survey","date_created":"2012-07-25 00:43:42","color":"[UIColor greyColor]"}]} 
```

然后你得到记录数组：

```
 NSArray *allItems = [result objectForKey:@"users"];
    for (int i=0; i<allItems.count; ++i) {
        NSDictionary *item = [allItems objectAtIndex:i]; //here you get every user
        NSString *user_id=[item objectForKey:@"user_id"];
        NSLog(@"user_id %@",user_id);
    } 
```

# cuda - 与第 3 方 CUDA 库链接会减慢 cudaMalloc

> ID：11664627
> 
> 赞同：9
> 
> 时间：2012-07-26T07:44:14.213
> 
> 标签：cuda, gpgpu, gpu

`cudaMalloc` 在 CUDA 4.x 上，第一次调用可能非常慢（这被报告了好几次），这似乎是 CUDA 驱动程序中的一个错误，这已经不是什么秘密了。

最近，我注意到奇怪的行为：运行时间`cudaMalloc` 直接取决于我链接到我的程序的第 3 方 CUDA 库的数量（请注意，我不使用这些库，只是将我的程序与它们链接）

我使用以下程序运行了一些测试：

```
int main() {
  cudaSetDevice(0);
  unsigned int *ptr = 0;
  cudaMalloc((void **)&ptr, 2000000 * sizeof(unsigned int));   
  cudaFree(ptr);
return 1;
} 
```

结果如下：

*   链接：-lcudart -lnpp -lcufft -lcublas -lcusparse -lcurand 运行时间：5.852449

*   链接：-lcudart -lnpp -lcufft -lcublas 运行时间：1.425120

*   链接：-lcudart -lnpp -lcufft 运行时间：0.905424

*   链接：-lcudart 运行时间：0.394558

根据'gdb'，时间确实进入了我的cudaMalloc，所以它不是由一些库初始化例程引起的..

我想知道是否有人对此有合理的解释？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T08:46:26.907

在您的示例中，`cudaMalloc`调用会在 GPU 上启动惰性上下文建立。当包含运行时 API 库时，必须检查它们的二进制有效负载，并将它们包含的 GPU 精灵符号和对象合并到上下文中。库越多，您预计该过程所需的时间就越长。此外，如果任何 cubin 中存在架构不匹配并且您拥有向后兼容的 GPU，它还可以触发目标 GPU 的设备代码的驱动程序重新编译。在一个非常极端的情况下，我看到一个与旧版本 CUBLAS 链接的旧应用程序在 Fermi GPU 上运行时需要 10 秒来加载和初始化。

您可以通过发出`cudaFree`如下调用来显式强制建立惰性上下文：

```
int main() {
    cudaSetDevice(0);
    cudaFree(0); // context establishment happens here
    unsigned int *ptr = 0;
    cudaMalloc((void **)&ptr, 2000000 * sizeof(unsigned int));   
    cudaFree(ptr);
  return 1;
} 
```

如果您使用计时器分析或检测此版本，您应该会发现第一次`cudaFree`调用会消耗大部分运行时，并且`cudaMalloc`调用几乎是免费的。

# iphone - TTPostController.textView 的长度限制？

> ID：11664631
> 
> 赞同：0
> 
> 时间：2012-07-26T07:44:33.187
> 
> 标签：iphone, objective-c

我有 ttpostcontroller，我想限制 ttpostcontroller.textView 的长度。

我有这个方法：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

NSUInteger newLength = [textView.text length] + [text length] - range.length;
return (newLength > 500) ? NO : YES;

} 
```

我尝试将 TTPostController 的 textView.delegate 连接到，`self`但这不起作用：

```
postController.textView.delegate = self; 
```

我怎样才能将长度限制在 500 个包机之内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:03:25.287

子类化`TTPostController`，然后**在您的自定义类中实现此委托方法**

# java-native-interface - 运行 JNI 程序

> ID：11664633
> 
> 赞同：1
> 
> 时间：2012-07-26T07:44:48.837
> 
> 标签：java-native-interface, runtime-error

我在 ubuntu 中运行我的第一个程序。

但是当我尝试运行它时出现错误：

```
 public class HelloWorld {
 public native String nativeHelloWorld();    

 static {
     System.loadLibrary("HelloWorld");
 }

 public void print(){
 {
 String str = nativeHelloWorld();
 System.out.println(str);
 }  
 }

 public static void main(String[] args) {
     (new HelloWorld()).print();
      return;
 }
 } 
```

发现此错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError:HelloWorld.nativeHelloWorld()Ljava/lang/String; 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:08:41.560

对于在 android 中运行 JNI 程序，您应该查看[此处](http://developer.android.com/tools/sdk/ndk/overview.html#samples)描述的步骤，您需要使用此命令构建本机代码

```
cd <ndk-root>/samples/hello-jni
<ndk_root>/ndk-build 
```

成功构建后，您将在此目录中获得 .so 文件，

```
\hello-jni\libs\armeabilib\hello-jni.so 
```

假设您正在尝试从 SDK 执行 HelloJNi 示例程序。在 libs 目录中获得该文件后，使用 eclipse 简单运行按钮运行项目，您将拥有 HelloWorld :)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:45:45.217

这些行取自[来自 SUN 站点的 Getting Stated JNI](http://java.sun.com/docs/books/jni/html/start.html)

> 确保本机库位于本机库路径中的目录之一中。如果您在 Solaris 系统上运行，则 LD_LIBRARY_PATH 环境变量用于定义本机库路径。确保它包含包含 libHelloWorld.so 文件的目录的名称。如果 libHelloWorld.so 文件在当前目录中，您可以在标准 shell (sh) 或 KornShell (ksh) 中发出以下两个命令来正确设置 `LD_LIBRARY_PATH`环境变量：
> 
> ```
> LD_LIBRARY_PATH=.
> export LD_LIBRARY_PATH 
> ```

# jquery - 可观察的 beforeShowDay jqui datepicker 事件

> ID：11664636
> 
> 赞同：1
> 
> 时间：2012-07-26T07:45:19.590
> 
> 标签：jquery, datepicker, knockout.js

我正在使用 rpn (http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html) 制作的日期选择器绑定。在整合 beforeShowDay 事件时，我有点挣扎。

我想突出显示日历中的日子，所以我添加

```
beforeShowDay: function (currentDay) { //logic  if currentDay is within observableArray then highlight }; 
```

但该逻辑取决于来自 ajax 调用的数据（observableArray）。

当 beforeShowDay 函数中使用的 observableArray 更新时，我如何告诉 datepicker 更新其突出显示的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:47:11.290

订阅您的 observableArray 更改并在事件函数中刷新 datepicker 以重新呈现其内容。

```
self.YourArray.subscribe(function (newValue) {
    // re-init or re-render datepicker
}); 
```

# url - Symfony：处理 URL 中的“%”转义符号

> ID：11664639
> 
> 赞同：0
> 
> 时间：2012-07-26T07:45:34.883
> 
> 标签：url, escaping, symfony-1.4

我有 Symfony 1.4 网络应用程序。假设我的应用托管在 example.com 上，并且那里有常见问题解答页面。

当我这样引用我的应用程序时：[http](http://example.com/faq#faq1) ://example.com/faq#faq1一切正常。但是当“#”被转义时：[http ://example.com/faq%23faq1](http://example.com/faq%23faq1)

我在 symfony 生成的日志中看到以下消息：

```
[err] {sfError404Exception} Empty module and/or action after parsing the URL "/faq#faq1" (/). 
```

因此，看起来 Symfony 识别出“#”但未能正确路由它。

**路由.yml：**

```
faq:
  url: /faq
  param: { module: static, action: faq }
  requirements:
    sf_method: [get] 
```

如何使 Symfony 正确路由带有转义字符的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:10:56.077

这不是 Symfony 的问题。这不是你的问题。问题来自于逃避的人`#`。

我举了几个例子：

*   好的 - [http://www.rue89.com/faq#5.7](http://www.rue89.com/faq#5.7)
*   挪威克朗 - [http://www.rue89.com/faq%235.7](http://www.rue89.com/faq%235.7)
*   好的 - [http://www.openbsd.org/faq/faq1.html#WhatIs](http://www.openbsd.org/faq/faq1.html#WhatIs)
*   挪威克朗 - [http://www.openbsd.org/faq/faq1.html%23WhatIs](http://www.openbsd.org/faq/faq1.html%23WhatIs)
*   好的 - [http://www.copyright.gov/help/faq/faq-general.html#register](http://www.copyright.gov/help/faq/faq-general.html#register)
*   挪威克朗 - [http://www.copyright.gov/help/faq/faq-general.html%23register](http://www.copyright.gov/help/faq/faq-general.html%23register)

等等……等等……

# java - 错误使用异常 - 从 catch 中返回值

> ID：11664647
> 
> 赞同：4
> 
> 时间：2012-07-26T07:45:53.640
> 
> 标签：java, exception

这是一段代码。

```
 private boolean CheckTerm()
      {
          String str = lGskCompoundNumber;
          if (lPrefix.trim() == "" || lNumber.trim() == "")
              return false;

          try
          {
              Integer.parseInt(lNumber);
          }
          catch (Exception ex)
          {
              return false;
          }
          if (lHasAmpersand)
              str = lGskCompoundNumber.replace("&", "");
          return str.equals(lPrefix + lInitSep + lNumber + lEndSep + lSuffix);
      } 
```

我应该从 catch 块返回某个值还是使用正确？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T07:51:47.570

这段代码是正确的，看起来并不可疑。当解析失败时（请注意，`NumberFormatException`在这种情况下，您应该捕获最窄的异常），整个验证失败，因此您将返回`false`. 否则，您将执行额外的检查（在`catch`块之后）并返回它们的结果。这段代码很好。

如果您觉得它有点难以阅读，请考虑以下重构：

```
private boolean checkTerm() {
    try
        {
            String str = lGskCompoundNumber;
            if (lPrefix.trim() == "" || lNumber.trim() == "")
                return false;
            Integer.parseInt(lNumber);
            if (lHasAmpersand)
                str = lGskCompoundNumber.replace("&", "");
            return str.equals(lPrefix + lInitSep + lNumber + lEndSep + lSuffix);
        }
        catch (NumberFormatException ex)
        {
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T07:59:03.157

您的代码没有任何问题，但我总是更喜欢在我的方法中有一个退出点，所以我更喜欢编写如下内容：

```
private boolean CheckTerm()
{
    boolean res = false;
    String str = lGskCompoundNumber;
    if (lPrefix.trim() == "" || lNumber.trim() == "")
    {
    }
    else
    {
        try
        {
            Integer.parseInt(lNumber);
            if (lHasAmpersand)
                str = lGskCompoundNumber.replace("&", "");
            res = str.equals(lPrefix + lInitSep + lNumber + lEndSep + lSuffix);
        }
        catch (NumberFormatException ex)
        {
        }

    }
    return res;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T07:56:40.233

我相信如果你知道你想要返回什么就可以了。如果我可以提示您使用的退出（返回）数量。我会使用一个布尔字段，然后在 try / catch 块之后返回一次

```
private boolean CheckTerm()
{
  boolean b = true;
  String str = lGskCompoundNumber;
      if (lPrefix.trim() == "" || lNumber.trim() == "")
          b = false;

      try
      {
          Integer.parseInt(lNumber);
      }
      catch (Exception ex)
      {
          b =  false;
      }
      if (lHasAmpersand)
          str = lGskCompoundNumber.replace("&", "");
      b = str.equals(lPrefix + lInitSep + lNumber + lEndSep + lSuffix);
      return b;
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T07:52:16.860

你可以在 catch 块中返回一些值，甚至在 finally 块中。

完全没问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T07:52:31.070

如果其中一个条件应该`CheckTerm`是`lNumber`整数，那么您的代码是可以的，但是如果您期望`lNumber`是整数而事实并非如此，则最好抛出异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T07:53:03.850

就好像我会以不同的方式捕获异常一样。

您调用的那个方法会引发[NumberFormatException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/NumberFormatException.html)

似乎只返回 false 就可以了，我会做一些日志记录来跟踪异常，尽管[讨论了如何处理你的异常](https://stackoverflow.com/questions/4410107/what-is-the-proper-way-to-handle-a-numberformatexception-when-it-is-expected)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-26T08:06:41.230

如果你害怕没有默认返回，使用finally，然后返回一些东西。

```
try
    {
        Integer.parseInt(lNumber);
        if (lHasAmpersand)
            str = lGskCompoundNumber.replace("&", "");
        res = str.equals(lPrefix + lInitSep + lNumber + lEndSep + lSuffix);
    }
    catch (NumberFormatException ex)
    {
       return false;
    }finally{return false;} 
```

# javascript - socket.io + express 网络错误：404

> ID：11664651
> 
> 赞同：0
> 
> 时间：2012-07-26T07:46:18.197
> 
> 标签：javascript, node.js, express, socket.io

> **可能重复：**
> [socket.io：加载资源失败](https://stackoverflow.com/questions/11653237/socket-io-failed-to-load-resource)

一个简单的 express + socket.io hello world 应用程序似乎不起作用，我不断收到

> “网络错误：404 未找到 - http://localhost:3002/socket.io/socket.io.js”

有人知道这个问题吗？

代码：

应用程序.js

```
var express = require('express'),
http = require('http');

var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

app.configure(function () {
app.use(express.static(__dirname + '/public'));
});

app.listen(3002);

io.sockets.on('connection', function(socket) {
socket.emit('news', {hello: 'world'});
socket.on('my other event', function (data) {
    console.log(data);
});
}); 
```

索引.html

```
<script src="/socket.io/socket.io.js"></script>
<script>
var socket = io.connect('http://localhost');
socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my:'data' });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:00:41.027

您的 Socket.IO 服务器正在侦听 port `3002`，但您连接到：

```
var socket = io.connect('http://localhost'); 
```

默认情况下使用标准端口`80`。尝试这个：

```
var socket = io.connect('http://localhost:3002'); 
```

此外，您可能必须更改`localhost`机器的 IP。

**旁注：**如果您在同一端口上运行 Express Server 和 Socket.IO 服务器，那么您可以简单地执行以下操作：

```
var socket = io.connect(); 
```

# iphone - 当我打开通知托盘查看通知时 UILocalNotification 触发

> ID：11664653
> 
> 赞同：3
> 
> 时间：2012-07-26T07:46:31.607
> 
> 标签：iphone, objective-c, ios

我使用了本地通知并安排了触发日期，但是当应用程序在后台并且我打开通知托盘查看通知时，本地通知会自动触发但触发日期仍然存在..有什么解决方案可以解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:38:43.200

这听起来像你有两个问题。首先，本地通知是在过去设置的触发日期创建的 - 这就是为什么它会在您打开应用程序时立即出现。

其次，您可能将通知的 repeatInterval 设置为非零值，这将导致它多次出现。

请参阅以下代码以将本地通知设置为在下午 3 点触发：

```
UILocalNotification *localNotification = [[UILocalNotification alloc] init];
localNotification.alertBody = @"This is a test alert";
NSCalendar *currentCalendar = [NSCalendar currentCalendar];

NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setHour: 15];
[comps setMinute: 0];
[comps setSecond: 0];
NSDate *threePM = [currentCalendar dateFromComponents:comps];

// Test if the current time is after three or not:
if(threePM != [threePM earlierDate: [NSDate date]])
{
  comps = [[NSDateComponents alloc] init];
  [comps setDay: 1];
  threePM = [currentCalendar dateByAddingComponents: comps toDate: threePM options: 0];
}

localNotification.fireDate = threePM;
localNotification.repeatInterval = 0;

[[UIApplication sharedApplication] scheduleLocalNotification: localNotification]; 
```

# php - PDO 和 MySQLi 是否使用抽象层下的 MySQL 函数？

> ID：11664656
> 
> 赞同：4
> 
> 时间：2012-07-26T07:46:47.760
> 
> 标签：php, mysql, pdo, mysqli

*免责声明：这个问题完全是关于支持它的 mysql 和数据库抽象层。*

PHP 网站指出，`mysql_`强烈建议不要使用 PHP 的功能。相反，它鼓励开发人员使用`PDO`or `MySQLi`。

这是我的问题：关于 mysql，在所有抽象下，PDO 和 MySQLi 是否只是一个更安全、更面向对象的`mysql_`函数包装器？

如果这是真的，那么像 CodeIgniter 和 Symfony 这样的框架是不是通过在 MySQLi 之上放置一个层来创建不必要的包装量，然后在原生 PHP 之上放置一个层`mysql_`？

如果不是这样，我想知道为什么不鼓励有经验的开发人员使用，以及在抽象下实际做了`mysql_`什么。`PDO``MySQLi`

（另外，请不要告诉我去看代码）将给予+100赏金。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:55:18.083

`PDO`函数和`MySQLi`类方法是对 C 级 API 的绑定。由于准备好的语句，通常建议使用此函数：[在 PDO](http://www.php.net/manual/en/pdo.prepared-statements.php)中，[在 MySQLi 中](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)。使用准备好的语句是防止 SQL 注入的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:00:52.530

> 这是我的问题：关于 mysql，在所有抽象下，PDO 和 MySQLi 是否只是 mysql_ 函数的更安全、更面向对象的包装器？

不。就像 xdazz 说的那样，MySQLi 和 PDO 都是用 C 实现的，这意味着它们不只是包装 mysql_* 函数。

> 如果这是真的，那么像 CodeIgniter 和 Symfony 这样的框架不是通过在 MySQLi 之上放置一个层然后在原生 PHP mysql_ 之上放置一个层来创建不必要的包装量吗？

还有另一个需要考虑的原因：CodeIgniter 和 Symfony 可能在默认接口上创建了一个接口，因为默认接口不够用（从他们的角度来看）。我自己在 PDO 上编写了一个层，它设置了一些默认设置（例如错误模式，因为 PDO 默认情况下是安静的）并完全创建了一个更直观的 API。PDO 是一款非常不错的软件，但它`setAttribute( $attr, $value )`真的不是我喜欢的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:49:44.077

不，PDO 和 MySQLi 不是函数的包装器`mysql_`，它们是在 C 级别实现的，不同的扩展。

试想一下，如果它们是包装器，`--with-mysqli`等等是没有必要的。

# bash - Bash Tarball 脚本退出失败

> ID：11664657
> 
> 赞同：0
> 
> 时间：2012-07-26T07:46:49.250
> 
> 标签：bash, shell, unix, tar

谁能告诉我为什么以下脚本失败了？我想不通。

```
#!/bin/bash

D="$(date +%V).tar.bz2"
E="$(date +%V).tar"
P="mnt/Xendata/Weekly/"

tar cjvf $P"dbtime_week_"$D --newer="1 weeks ago" mnt/DBTime

tar cjvf $P"pounds_week_"$D --newer="1 weeks ago" mnt/Pounds

tar cjvf $P"fts_week_"$D --newer="1 weeks ago" mnt/FTS/DB\ Backups

tar cjvf $P"projects_week_"$D --newer="1 weeks ago" mnt/Projects

tar czvf $P"groups_week_"$E --newer="1 weeks ago" --ignore-case --exclude=*Expo*Films* --exclude=*/Promo\ Material/* mnt/Groups

tar czvf $P"users_week_"$E --newer="1 weeks ago" --ignore-case \
--exclude=*cache* \
--exclude=*dvdproj* \
--exclude=*iDVD* \
--exclude=*IMAP* \
--exclude=*Temporary.localized* \
--exclude=*.app* \
--exclude=*Spotlight* \
--exclude=*iTunes* \
--exclude=*/Library/PubSub* \
--exclude=*/Downloads/* \
--exclude=*.mpg \
--exclude=*.mov \
--exclude=*.mp4 \
--exclude=*.m4v \
--exclude=*/dev/* \
--exclude=*ladmin* \
--exclude=*/widgets/* \
mnt/Users

exit $? 
```

这是输出。大部分都通过了，但后来失败了：

```
tar: mnt/Groups/~$xxxxxx.xls: file is unchanged; not dumped
tar: Option --after-date: Treating date `1 weeks ago' as 2012-07-19 17:29:42.104908153
tar:  : Cannot stat: No such file or directory
tar: Exiting with failure status due to previous errors
tarball_weekly: line 25: --exclude=*Spotlight*: command not found
tarball_weekly: line 29: --exclude=*.mpg: command not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:24:07.137

您确定行尾的反斜杠后没有字符吗：

```
cat -ve tarball_weekly 
```

查看 $（行尾）之前是否有 ^M 个字符，例如（格式 dos）

# grails - log4j 重复记录 grails

> ID：11664663
> 
> 赞同：0
> 
> 时间：2012-07-26T07:47:11.347
> 
> 标签：grails, log4j

我正在从我的 grails 1.3.7 应用程序登录，并且在日志中看到基本上重复的记录：

```
12/07/25 23:57:39 TRACE querium.SearchService: setting snippet for posting 1855803974 [null] 54: document 1534340330 [632]
25 Jul 2012 23:57:39,943     7851 TRACE pool-1-thread-1 SearchService:? gene 60258782 - setting snippet for posting 1855803974 [null] 54: document 1534340330 [632] 
```

我的日志记录是这样配置的：

```
appenders {
    // appender for usage tracking
    appender new org.apache.log4j.RollingFileAppender(
        name:"usageAppender",
        maxFileSize:"100KB",
        maxBackupIndex: 10000,
        file:"usage.log",   // "/tmp/logs/usage.log",
        layout:pattern(conversionPattern: '%d{DATE} %5p %c{1}:%L - %m%n')
    )
    appender new org.apache.log4j.RollingFileAppender(
        name:"querium",
        maxFileSize:"1000KB",
        maxBackupIndex: 10000,
        file:"querium.log",   // "/tmp/logs/querium.log",
        layout:pattern(conversionPattern: '%d{DATE} %8X{memoryused} %5p %t %c{1}:%L %X{username} %X{request} - %m%n')
    )
    console name:'stdout', layout:pattern(conversionPattern: '%d{DATE} %8X{memoryused} %5p %t %c{1}:%L %X{username} %X{request} - %m%n')
}
root {
    error 'querium', 'stdout'
}

error  'org.codehaus.groovy.grails.web.servlet',  //  controllers
       'org.codehaus.groovy.grails.web.pages', //  GSP
       'org.codehaus.groovy.grails.web.sitemesh', //  layouts
       'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
       'org.codehaus.groovy.grails.web.mapping', // URL mapping
       'org.codehaus.groovy.grails.commons', // core / classloading
       'org.codehaus.groovy.grails.plugins', // plugins
       'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
       'org.springframework',
       'org.hibernate' 

warn  'org.mortbay.log'
debug 'grails.app.service'
trace 'grails.app.service.backgroundservice'
error 'org.hibernate.SQL'
trace 'grails.app.controller.com.fxpal.querium.UiController'
trace 'grails.app.controller.com.fxpal.querium.CommentController'
warn  'grails.app.controller.com.fxpal.querium.TopicController'
off 'grails.app.service.com.fxpal.redis.RedisService'
trace 'grails.app.service.com.fxpal.querium.SearchService'
debug   'com.fxpal.cloudwork.docubrowse.SearchDocubrowse'
off 'grails.app.service.com.fxpal.proxy.ProxyService'

debug 'org.codehaus.groovy.grails.plugins.springsecurity.*'
debug 'com.fxpal.querium.CiteSeerDocumentParser'

debug 'com.fxpal.querium.LoggingFilters'
    info 'usageAppender':'usage.gui' 
```

正确的数据将发送到`usageAppender`. 在这个奥秘中练习的人可以弄清楚为什么我得到双倍的记录，但略有不同，其余记录的记录？

**2012 年 7 月 26 日编辑**：添加了其余的日志记录配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:20:32.713

您看到的输出看起来好像有两个不同的控制台附加程序附加到您的根记录器（或者可能一个附加到根记录器，另一个附加到记录器树下方的某个位置）。您看到的第二行是您自己的`stdout`记录器格式，但第一行与模式布局一致

```
%d{yy/MM/dd HH:mm:ss} %p %c{1}: %m%n 
```

这不是 Grails 的默认格式。检查 Grails log4j DSL 解析器的代码，我注意到它在开始处理 DSL 之前*不会*重置日志记录配置。因此，我怀疑您的类路径中的某处有一个流浪`log4j.properties`或`log4j.xml`文件（在`src/java`或类似的地方，或埋在您的应用程序所依赖的 JAR 文件之一中），它在 DSL 解析器运行之前创建了这个额外的附加程序。您可以`BootStrap.init`通过这样做来确定这一点

```
this.getClass().getClassLoader().getResources("log4j.properties").each {
  println it
} 
```

（同样适用于 log4j.xml）。如果它被证明在一个 JAR 中并且你不能轻易地删除它，你可以尝试`LogManager.loggerRepository.resetConfiguration()`在你的闭包中首先调用它`log4j`（在你自己的`appenders`部分之前）。

# php - 步骤 1 后的 CodeIgniter 验证

> ID：11664668
> 
> 赞同：0
> 
> 时间：2012-07-26T07:47:28.880
> 
> 标签：php, codeigniter-2

CI 验证有一个非常烦人的怪癖；

1.  我有一个 4 步表单，必须以这种方式进行用户交互。

2.  步骤 1 有两个下拉菜单；您选择数据，单击下一步，这将转到第 2 步

3.  在第 2 步中，有进一步的验证（仅针对第 2 步），但是来自第 1 步的带有 2 个 POST 值的始终会触发第 2 步表单验证，甚至在尝试对第 2 步进行任何尝试之前都会发生这种情况。

想知道人们是如何解决这个问题的，这使得以阶梯形式使用 CI 验证有点问题！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:56:51.187

您可以更改它以适合您的实际逻辑，但是......将您的提交按钮分别命名为“step1”、“step2”、“step3”和“step4”，并检查提交的是哪个按钮，如下所示：

```
if (isset($_POST['step1']))
{
    // validate for Step 1
}
elseif (isset($_POST['step2']))
{
     // validate for Step 2
}

// etc. 
```

您可以对隐藏的输入字段执行相同的操作，告诉您要提交哪个表单。

# hibernate - Spring Security（和休眠）中基于组织层次结构的访问控制

> ID：11664671
> 
> 赞同：7
> 
> 时间：2012-07-26T07:47:37.487
> 
> 标签：hibernate, spring-security, access-control

我正在从事的一个项目中有一个场景，其中有一个中央数据库，组织内的各个分支机构和子单位都在访问该数据库。除了我知道如何处理的基于角色的权利（如操作员、管理员、批准者等）之外，还需要在组织单位级别过滤数据。

例如，参见下图所示的组织结构： ![在此处输入图像描述](../Images/595f52029f225176918821b3720e1839.png)

在这种情况下，在总部级别工作的任何用户都可以访问用户有权访问的那些屏幕中跨分支的所有数据（基于角色）。但是，分支 1 中的任何人都只能看到单元 1.1、1.2 和 1.3 的数据。分支 2 也是如此。当我们将其推广到下一个级别时，Unit 1.1 中的用户只能访问 Unit 1.1 的数据，而不能访问其他单元的数据。

那么，这种访问控制是否可以通过 Domain Object Security 或 Spring Security 中的任何其他机制实现？

我也正在探索在 Hibernate 中使用拦截器进行必要过滤的可能性。在这方面的任何帮助也会有用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-24T07:08:44.453

打开此链接：

[https://github.com/taylorleese/google-app-engine-jappstart](https://github.com/taylorleese/google-app-engine-jappstart)

这是项目。你可以看到spring安全文件:: [https://github.com/taylorleese/google-app-engine-jappstart/blob/master/src/main/webapp/WEB-INF/applicationContext-security.xml](https://github.com/taylorleese/google-app-engine-jappstart/blob/master/src/main/webapp/WEB-INF/applicationContext-security.xml)

# c# - 使用 REST-Services - 第一次需要更长的时间作为后续调用

> ID：11664677
> 
> 赞同：0
> 
> 时间：2012-07-26T07:48:09.787
> 
> 标签：c#, .net, rest, .net-3.5

我通过以下方式使用需要 Bacis-Authentication 的 REST-Services：

```
private void button1_Click(object sender, EventArgs e) {
    try {
        var url = "http://172.34.1.111:8088/ustrich/rest/projects/pid/1234";
        using (var wc = this.CreateWebClient(url)) {
            var stopWatch = new Stopwatch();
            stopWatch.Start();
            var s = wc.DownloadString(url);
            stopWatch.Stop();
            this.label1.Text = stopWatch.Elapsed.ToString();
            this.textBox1.Text = s;
        }
    } catch (Exception ex) {
        this.textBox1.Text = ex.ToString();
    }
}

protected WebClient CreateWebClient(string url) {
    var webClient = new WebClient();
    var cache = new CredentialCache { { new Uri(url), "Basic", new NetworkCredential("rest", "rest") } };
    webClient.Credentials = cache;
    webClient.Headers.Add("Content-Type", "text/xml; charset=utf-8");
    webClient.Encoding = Encoding.UTF8;
    return webClient;
} 
```

现在的问题是，当我启动我的测试应用程序并执行此代码时，第一次在 wc.DownloadString(url) 上大约需要 5 秒。以下调用，当我点击按钮上的第二次等时间时，只需要 300 毫秒。现在我的问题是：我的代码有问题吗？我可以在那里优化一些东西来解决第一次通话需要 5 秒的问题吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:55:44.760

第一次点击代码时，它会被预编译。这次总是很慢。我相信您可以在构建代码时使用 MSBUILD 来执行此操作，但这只是将时间转移到流程的不同部分。在生产中，这只会在每次工作进程重新启动时发生。

# backbone.js - Backbone.js: Collection.Get(id) -> 忽略大小写

> ID：11664678
> 
> 赞同：0
> 
> 时间：2012-07-26T07:48:13.003
> 
> 标签：backbone.js

我有以下模型和集合：

```
var UserModel = Backbone.Model.extend({
    url: 'api/user',
    idAttribute:'username',
    defaults: {
        username:'',
        password:'',
        email:'',
        tags:''
    }
});
var UserCollection= Backbone.Collection.extend({
    url: 'api/user',
    model: UserModel
}); 
```

当我使用以下方法从集合中检索用户时：

```
var myUser  =   collection.get(username); 
```

用户名必须是正确的大小写，否则我只会得到 null 结果。

有没有办法告诉骨干忽略这样的某些操作的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:54:00.597

当然，您只需要更改相关代码即可。它位于以下行`240-242`（`backbone.js`对于记录的 0.9.2 版本）：

```
get: function(attr) {
  return this.attributes[attr];
}, 
```

将其更改为：

```
get: function(attr) {
   // will skip if null or undefined -- http://stackoverflow.com/questions/5113374/javascript-check-if-variable-exists-which-method-is-better
   if (this.attributes[attr] != null) {
       return this.attributes[attr];
   }
   // and then try to return for capitalized version -- http://stackoverflow.com/questions/1026069/capitalize-the-first-letter-of-string-in-javascript
   else {           
       return this.attributes[attr.charAt(0).toUpperCase() + attr.slice(1)];
   }
}, 
```

用于收藏变更

```
get: function(id) {
  if (id == null) return void 0;
  return this._byId[id.id != null ? id.id : id];
}, 
```

像这样的东西可能会起作用：

```
get: function(id) {
  if (id == null) return void 0;
  var firstCase = this._byId[id.id != null ? id.id : id];
  if (firstCase != null) {
      return firstCase;
  }
  else {
      return this._byId[capitalize(id.id) != null ? capitalize(id.id) : capitalize(id)];
  }
}, 
```

# php - MySQL 搜索查询不工作

> ID：11664679
> 
> 赞同：0
> 
> 时间：2012-07-26T07:48:18.907
> 
> 标签：php, mysql, search-engine

我正在尝试构建一个基于 MySQL FULL TEXT 的搜索引擎，但我没有得到任何搜索结果。我正在研究 MySQL 版本是 5.5.24，它支持 Innodb 的全文。所以我将数据库类型保留为 Innodb 以提高速度，我的排序规则也是 utf8mb4_unicode_ci。

我已将字段“标题”类型设置为 TEXT 并更改了表“test_table”之类的。

```
ALTER TABLE `test_table` ADD FULLTEXT (`title`) 
```

我正在写这样的查询，但没有显示结果。

```
 require_once('../global/includes/connect.php');
$db = mysql_select_db($database,$connection) or trigger_error("SQL", E_USER_ERROR);

$sqlquery = mysql_query("SELECT title FROM test_table WHERE MATCH(title) AGAINST ('%keyword%')");
while($row=mysql_fetch_assoc($sqlquery)){
echo $row['title'];
echo"</br>";
} 
```

对于这样的查询

```
 $sqlquery = mysql_query("SELECT title FROM test_table ");
while($row=mysql_fetch_assoc($sqlquery)){
echo $row['title'];
echo"</br>"; 
```

结果显示。

我尝试将数据库更改为 MyISAM，但同样的问题。

请建议我在这里做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:52:32.007

尝试使用以下内容：

```
require_once('../global/includes/connect.php');
$db = mysql_select_db($database,$connection) or trigger_error("SQL", E_USER_ERROR);

$sqlquery = mysql_query("SELECT MATCH(title) FROM test_table WHERE MATCH(title) AGAINST ('security')") OR die(mysql_error());
while($row=mysql_fetch_assoc($sqlquery)){
echo $row['title'];
echo"</br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:28:15.047

明白了，修改查询

```
$sqlquery = mysql_query("SELECT title FROM test_table WHERE MATCH (title) AGAINST ('keyword' IN BOOLEAN MODE) ")or die (mysql_error()); 
```

希望这对其他人也有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:32:12.527

你以前失踪`$`了`keyword`。

```
$sqlquery = mysql_query("SELECT title FROM test_table 
                         WHERE MATCH(title) AGAINST ('%$keyword%')"); 
                                                       ^ 
```

也读[`this`](http://dev.mysql.com/doc/refman/5.0/en/fulltext-query-expansion.html)。

# php - Symfony 2.0.9 和错误的 PropelBundle 版本

> ID：11664680
> 
> 赞同：0
> 
> 时间：2012-07-26T07:48:26.917
> 
> 标签：php, symfony1, propel, vendors

我在使用 Symfony 2.0.9 的 PropelBundle 版本时遇到问题。

> ErrorException: User Deprecated: PropelBundle 使用新的分支模型，您应该切换到 1.0 分支（1.0.x 版本）。更多信息请阅读：[https](https://github.com/propelorm/PropelBundle/wiki) ://github.com/propelorm/PropelBundle/wiki/home/project_path/vendor/bundles/Propel/PropelBundle/PropelBundle.php第28行

但是，在 deps 文件中，PropelBundle 版本设置为 1.0，就像这里推荐的一样：[https ://github.com/propelorm/PropelBundle/wiki](https://github.com/propelorm/PropelBundle/wiki)

> [PropelBundle] git=git://github.com/propelorm/PropelBundle.git target=/bundles/Propel/PropelBundle version=origin/1.0
> 
> [phing] git=git://github.com/Xosofox/phing.git 目标=/phing
> 
> [推进] git=git://github.com/propelorm/Propel.git target=/propel version=origin/1.0
> 
> [教义-fixtures] git=http://github.com/doctrine/data-fixtures.git
> 
> [DoctrineFixturesBundle] git=http://github.com/doctrine/DoctrineFixturesBundle.git target=/bundles/Symfony/Bundle/DoctrineFixturesBundle version=origin/2.0

我试图重新安装供应商，但没有任何改变。

**编辑**：感谢威廉姆斯我解决了这个问题，但是现在我有这个错误：

> ./composer.phar update nothing 初始化 PEAR 存储库[http://pear.phing.info](http://pear.phing.info) 更新依赖项 您的需求无法解析为一组可安装的软件包。
> 
> 问题 1 - 您的系统中缺少请求的 PHP 扩展 ext-mongo *。问题 2 - 学说/mongodb dev-master 需要 ext-mongo * -> 找不到匹配的包。- 学说/mongodb-odm-bundle dev-master 需要学说/mongodb-odm dev-master -> 可以满足学说/mongodb-odm dev-master。- 教义/mongodb-odm dev-master 需要教义/mongodb dev-master -> 可由教义/mongodb dev-master 满足。- 对教义/mongodb-odm-bundle dev-master 的安装请求 -> 可以由教义/mongodb-odm-bundle dev-master 满足。
> 
> 潜在原因： - 包名称中的拼写错误 - 根据您的最低稳定性设置，该包在足够稳定的版本中不可用，请参阅[https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/讨论](https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion)更多细节。

我正在尝试安装的 AdminGenerator 需要这些软件包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T12:55:08.930

看来您使用的是旧版本的供应商。

首先，删除您的 Phing 配置，并使用官方存储库：[https ://github.com/phingofficial/phing](https://github.com/phingofficial/phing)

然后，删除您的 PropelBundle 供应商 (rm -rf vendor/.../PropelBundle) 并重新安装它。仅当您跟踪主分支时才会出现此消息。

# embedded-jetty - Jetty-Maven-Plugin 读取 jettyXml 并仍然启动默认上下文

> ID：11664682
> 
> 赞同：0
> 
> 时间：2012-07-26T07:48:35.047
> 
> 标签：embedded-jetty, maven-jetty-plugin

我正在使用 Jetty 8.1.4.v20120524 和 Maven 3。我的 pom 中有以下配置：

```
 <plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.4.v20120524</version>
    <configuration>
      <jettyXml>${project.basedir}/src/main/resources/jetty.xml</jettyXml>
    </configuration>
  </plugin> 
```

在我的 jetty.xml 中，我定义了一个上下文：

```
<Set name="handler">
  <New class="org.eclipse.jetty.server.handler.HandlerList">
    <Set name="handlers">
      <Array type="org.eclipse.jetty.server.Handler">
        <Item>
          <New class="org.eclipse.jetty.server.handler.ResourceHandler">
            <Set name="welcomeFiles">
              <Array type="String"><Item>index.xml,index.xhtml,index.html</Item></Array>
            </Set>
          </New>
        </Item>
        <Item>
          <New id="Contexts" class="org.eclipse.jetty.webapp.WebAppContext">
            <Set name="resourceBase"><SystemProperty name="jetty.home" default="src/main/webapp" /></Set>
            <Set name="contextPath">/</Set>
          </New>
        </Item>
      </Array>
    </Set>
  </New>
</Set> 
```

这按预期工作，并在 / 处启动我的应用程序：

```
INFO:oejs.Server:jetty-8.1.4.v20120524
INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/<MY_DIRECTORY>/src/main/webapp/}
INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/<MY_DIRECTORY>/src/main/webapp/} 
```

但是，在此之后，jetty-maven-plugin 似乎尝试启动默认上下文，该上下文因找不到类而失败-它还尝试绑定到“/”，这显然是我不想要的。

```
WARN:oejs.Holder:java.lang.ClassNotFoundException: org.basex.http.rest.RESTServlet
INFO:oejpw.PlusConfiguration:No Transaction manager found - if your webapp requires one, please configure one.
INFO:oejsh.ContextHandler:started o.m.j.p.JettyWebAppContext{/,file:/<MY_DIRECTORY>/src/main/webapp/},file:/<MY_DIRECTORY>/src/main/webapp/
INFO:oejsh.ContextHandler:started o.m.j.p.JettyWebAppContext{/,file:/<MY_DIRECTORY>/src/main/webapp/},file:/<MY_DIRECTORY>/src/main/webapp/
INFO:oejsh.ContextHandler:started o.m.j.p.JettyWebAppContext{/,file:/<MY_DIRECTORY>/src/main/webapp/},file:/<MY_DIRECTORY>/src/main/webapp/ 
```

如何停止此上下文的启动？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:02:44.537

根据 Jan Bartel 在邮件列表 (http://dev.eclipse.org/mhonarc/lists/jetty-users/msg02419.html) 上的回答，目前无法单独使用 jetty.xml 配置 Web 应用程序。

因此，我通过将与 Web 应用程序相关的东西（资源库和上下文路径）移动到 maven pom.xml 来解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:17:31.797

我正在使用 jetty-maven-plugin 的 8.1.4.v2012052 版本，并尝试在 pom.xml 中设置 contextPath，例如：

```
<configuration>
<webAppConfig>
    <contextPath>${application.contextpath}</contextPath>
</webAppConfig> 
...
</configuration> 
```

然而，contextPath 仍然默认为“/”。

我降级到版本 7.5.1.v20110908，在 pom.xml 中具有相同的配置。预期的 contextPath 确实显示了。

因此，我认为这可能是通过降级解决的 8.1.4 版本的问题。

# php - 如何通过一个查询批量更新 mysql 数据？

> ID：11664684
> 
> 赞同：47
> 
> 时间：2012-07-26T07:48:37.583
> 
> 标签：php, mysql

```
$query = mysql_query("UPDATE a SET fruit = '**apple**' WHERE id = '**1**' ");
$query2 = mysql_query("UPDATE a SET fruit = '**orange**' WHERE id = '**2**' ");
$query3 = mysql_query("UPDATE a SET fruit = '**peach**' WHERE id = '**3**' "); 
```

有没有办法将其简化为一个查询？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-09-24T13:46:06.870

我找到了以下解决方案：

```
INSERT into `table` (id,fruit)
    VALUES (1,'apple'), (2,'orange'), (3,'peach')
    ON DUPLICATE KEY UPDATE fruit = VALUES(fruit); 
```

Id 必须是唯一的或主键。但不知道性能。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-07-26T07:51:01.940

是的，您可以使用以下查询来做到这一点：

```
UPDATE a 
SET fruit = (CASE id WHEN 1 THEN 'apple'
                     WHEN 2 THEN 'orange'
                     WHEN 3 THEN 'peach'
             END)
WHERE id IN(1,2 ,3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-31T16:06:05.960

根据警告信息

```
'VALUES function' is deprecated and will be removed in a future release. Please use an alias (INSERT INTO ... VALUES (...) AS alias) and replace VALUES(col) in the ON DUPLICATE KEY UPDATE clause with alias.col instead 
```

[可以考虑对Yaroslav](https://stackoverflow.com/a/18983420/13119339)的解决方案进行轻微修改，如下所示：

```
INSERT into `table` (id,fruit)
VALUES (1,'apple'), (2,'orange'), (3,'peach') as tb
ON DUPLICATE KEY UPDATE fruit = tb.fruit; 
```

它做同样的事情，但使警告消息静音。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-02T20:55:14.417

在 MySQL 中使用 IF() 函数可以实现为

```
UPDATE a
SET fruit = IF (id = 1, 'apple', IF (id = 2, 'orange', IF (id = 3, 'peach', fruit))); 
```

# javascript - 具有 WWW-Authenticate 标头的相同来源和 CORS

> ID：11664686
> 
> 赞同：0
> 
> 时间：2012-07-26T07:48:50.863
> 
> 标签：javascript, ajax, http, cross-domain

我在我的应用程序服务器上实现了一个摘要身份验证，在我的客户端中，我发出一个 get http 请求，我的服务器返回 WWW-Authenticate 标头，在我的 javascript 中使用此标头，我进行摘要质询并将其发送到服务器。一切都很好，因为我正在使用 CORS 进行测试，服务器和客户端不在同一个来源（所有带有 Allow 标头的策略都运行正常）。但我的问题是当我在同源上下文中测试它时。浏览器捕获服务器的响应并放置典型的登录窗口，但我不希望浏览器这样做。

任何人都知道为什么浏览器会在同一来源捕获它并绘制窗口？会以某种方式避免吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:44:42.790

就像在这个[链接](https://stackoverflow.com/questions/86105/how-can-i-supress-the-browsers-authentication-dialog)中一样，这个问题没有一个好的解决方案。也许更改了 401 未经授权的代码，浏览器不会捕获并弹出窗口。

[在这个链接](http://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary&groupby=&sort=&id=31582)中有一个关于code.google的讨论，讨论了xhr.mozBackgroundRequest = true的firefox的解决方案，但在Chrome中没有解决方案。

我将 401 更改为另一个代码，或者我将 WWW-Authenticate 标头更改为另一个自定义标头。

# iphone - 在 iOS 上使用 Phonegap 将图像转换为 Base64 字符串

> ID：11664688
> 
> 赞同：2
> 
> 时间：2012-07-26T07:49:06.997
> 
> 标签：iphone, ios, cordova, base64

我正在 iOS 上开发应用程序。我正在为我的应用程序使用 Phonegap 和 jQuery Mobile。目前，当用户单击图像或使用 Phonegap 从图库中选择图像并在本地保存 URI 时，我正在检索图像的 URI。我需要通过将这些图像转换为 Base64 字符串来在服务器上提交这些图像。为了将它们转换为 Base64，我使用了 Phonegap 提供的示例。

```
<!DOCTYPE html>
<html>
  <head>
    <title>FileReader Example</title>
    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8">
    // Wait for Cordova to load
    //
    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }
    // Cordova is ready
    //
    function onDeviceReady() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    }
    function gotFS(fileSystem) {
        fileSystem.root.getFile("readme.txt", null, gotFileEntry, fail);
    }
    function gotFileEntry(fileEntry) {
        fileEntry.file(gotFile, fail);
    }
    function gotFile(file){
        readDataUrl(file);
        readAsText(file);
    }
    function readDataUrl(file) {
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read as data URL");
            console.log(evt.target.result);
        };
        reader.readAsDataURL(file);
    }
    function readAsText(file) {
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read as text");
            console.log(evt.target.result);
        };
        reader.readAsText(file);
    }
    function fail(evt) {
        console.log(evt.target.error.code);
    }
    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Read File</p>
  </body>
</html> 
```

在示例中，我传递的不是“readme.txt”，而是在模拟器上进行测试的本地图像 URI `fileSystem.root.getFile("image.png", null, gotFileEntry, fail);`。但是我收到以下错误：

> 错误回调中的错误：File2 = TypeError:'undefined' is not an object。

我也尝试了图像的绝对路径，但得到了同样的错误。我不明白会出什么问题？我错过了什么吗？我需要尽快解决这个问题。

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:51:40.783

我认为必须首先创建您的文件，如果您确定是这种情况，您可以通过指定 getFile 方法的第二个参数来访问它，如下所示：

```
fileSystem.root.getFile("image.png", {'create' : false}, gotFileEntry, fail); 
```

{'create': false} 将告诉 phonegap 不创建文件，这是我认为的默认情况。

# compiler-construction - Clojure 中编译器开发的习惯用法

> ID：11664693
> 
> 赞同：4
> 
> 时间：2012-07-26T07:49:16.120
> 
> 标签：compiler-construction, clojure

我想探索 Clojure 在编译器开发中的强大功能，但我找不到可以开始的示例。

我是一个完全的新手（来自 Ruby），但我相信 Clojure 应该是实现此目的的理想选择。

让我们准确地说我在寻找什么：

*   从**clojure 中定义的简单 AST**开始（比如说一种简单的顺序语言：if、while、func、assign、expression）
*   **这个 AST 的**简单访问者（例如漂亮的打印机）
*   我对词法分析/解析并不感兴趣（因为我认为 s-expression 足以满足我的 DSL 语法）

Clojure 中的正确成语是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T08:49:32.993

这是我能想到的最简单的简单示例，它使用由 s 表达式和关键字运算符构建的 AST 树：

```
;; functions map, can be easily extended with new functions
;; map is of keyword -> code generating function
(def funcs {:if 
                 (fn [cond exp1 exp2] `(if ~cond ~exp1 ~exp2))
            :neg 
                 (fn [exp1] `(- 0 ~exp1))
            :plus 
                 (fn [& exps] `(+ ~@exps))})

;; compile directly to Clojure source code
(defn my-compile [code]
 (cond 
   (sequential? code)   ;; if we have a list, look up the function in funcs
     (cons (funcs (first code)) (map compile (rest code))) 
   :else                ;; treat anything else as a constant literal
     code))

;; example compilation to a Clojure expression
(my-compile `(:if true (:neg 10) (:plus 10 20 30)))
=> (if true (clojure.core/- 0 10) (clojure.core/+ 10 20 30))

;; evaluate compiled code
(eval (my-compile `(:if true (:neg 10) (:plus 10 20 30))))
=> -10 
```

希望这足以给你一些想法/让你开始。要考虑的明显扩展是：

*   使用元数据编译为 AST 树，而不是直接编译为 Clojure 源。Clojure`defrecord`可能适合作为 AST 节点表示
*   添加其他运算符、循环结构、“goto”等。
*   简单的优化，例如在编译时评估常量表达式
*   具有某种形式的执行上下文，允许赋值、动态变量查找等。编译器输出可以是一个将初始上下文作为输入并返回最终上下文的函数。

# visual-c++ - Visual C++ 2010 中的 LNK1104 错误

> ID：11664695
> 
> 赞同：2
> 
> 时间：2012-07-26T07:49:27.590
> 
> 标签：visual-c++, linker-errors

我不断收到此编译器错误。编译正在工作，然后突然停止并给我这个错误和警告：

```
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppClean.targets(74,5): warning : Access to the path 'C:\Users\Mohammad\Documents\Visual Studio 2010\Projects\CS HR\Debug\CS HR.exe' is denied.

LINK : fatal error LNK1104: cannot open file 'C:\Users\Mohammad\Documents\Visual Studio 2010\Projects\CS HR\Debug\CS HR.exe' 
```

显然，拒绝访问导致编译器无法打开文件，但我不知道为什么拒绝访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:53:11.523

该`CS HR.exe`进程仍在运行，因此链接器无法覆盖可执行文件。

尝试使用任务管理器找到正在运行的进程并将其杀死，然后再次构建您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:59:13.137

我认为exe的进程正在运行，所以先关闭进程，然后尝试链接它。

# sql - 复制 oracle 序列到测试模式，转换为 PL/Sql 过程

> ID：11664696
> 
> 赞同：1
> 
> 时间：2012-07-26T07:49:30.667
> 
> 标签：sql, oracle, sequence

我有这个 sql，它复制（实际上是重新创建）一个从生产方案到 Oracle 中的测试方案的序列，我如何从中制作一个我可以使用如下的过程？假设所有授权都正常，并且测试方案中的所有名称都相同。

所需的语法

```
copy_sequence <name_of_sequence> <connectstring_prod_scheme> <connectstring_test_scheme> 
```

sql

```
connect test/testpw@db.srv;

declare
 val    number(21);
 s_sql varchar2(200);
begin
 --use the select on the productive db to get the current value
 select prod.seq.nextval into val from dual;
 s_sql := 'drop sequence seq';
 execute immediate s_sql;
 s_sql := 'create sequence seq minvalue 1 maxvalue 999999999999999999999 start with '||val||' increment by 1';
 execute immediate s_sql;
end;
/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:01:28.567

您可以使用 DBMS_METADATA 来提取序列的 DDL：

```
declare
procedure copy_sequence(p_SequenceName in varchar2,
                                          p_SourceSchema in varchar2,
                                          p_TargetSchema in varchar2) is
  doc clob;
  h   number;
  th  number; -- handle
begin
  -- Specify the object type.
  h := DBMS_METADATA.OPEN('SEQUENCE');

  -- Use filters to specify the particular object desired.
  DBMS_METADATA.SET_FILTER(h,
                           'SCHEMA',
                           p_SourceSchema);
  DBMS_METADATA.SET_FILTER(h,
                           'NAME',
                           p_SequenceName);

  -- Request that the schema name be modified.
  th := DBMS_METADATA.ADD_TRANSFORM(h,
                                    'MODIFY');
  DBMS_METADATA.SET_REMAP_PARAM(th,
                                'REMAP_SCHEMA',
                                p_SourceSchema,
                                p_TargetSchema);

  -- Request that the metadata be transformed into creation DDL.
  th := DBMS_METADATA.ADD_TRANSFORM(h,
                                    'DDL');

  -- Fetch the object.
  doc := DBMS_METADATA.FETCH_CLOB(h);

  -- Release resources.
  DBMS_METADATA.CLOSE(h);
  -- debug output
  dbms_output.put_line(doc);
  -- execute it
  execute immediate doc;
end;

begin
  copy_sequence(sequence_name, source_schema, target_schema);
end; 
```

如果您想将其放入一个包中，您可能需要额外的资助才能使其工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T07:56:06.957

假设您的测试/测试用户具有适当的权限（选择任何表，创建序列）并且模式位于同一数据库中：

```
create procedure copy_sequence(seq VARCHAR2, prod_scheme VARCHAR2, test_scheme VARCHAR2)
as
 val    number(21);
 s_sql varchar2(200);
begin
 --either use the select on the productive db to get the current value + 1 
 execute immediate 'select '||prod_scheme||'.'||seq||'.nextval from dual' INTO val;
 --or use the select on ALL_SEQUENCES.LAST_NUMBER to get the current value (from APC's comment)
 execute immediate 'select last_number from all_sequences where sequence_owner = upper('''||prod_scheme||''') and sequence_name = upper('''||seq||''')' INTO val;
 s_sql := 'drop sequence '||test_scheme||'.'||seq;
 execute immediate s_sql;
 s_sql := 'create sequence '||test_scheme||'.'||seq||' minvalue 1 maxvalue 999999999999999999999 start with '||val||' increment by 1';
 execute immediate s_sql;
end;
/ 
```

但是您不会使用连接字符串而是使用模式名称来调用它：

```
-- first connect
connect test/testpw@db.srv;
-- then execute procedure
exec copy_sequence( <name_of_sequence>, <prod_scheme>, <test_scheme>);
-- or execute procedure more than once
begin
 copy_sequence( <name_of_sequence1>, <prod_scheme>, <test_scheme>);
 copy_sequence( <name_of_sequence2>, <prod_scheme>, <test_scheme>);
end;
/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T10:57:05.433

如果您有正确的授权，您可以使用：

```
CREATE PROCEDURE MIGRATE_SEQUENCE(
  in_sequence_name IN ALL_SEQUENCES.SEQUENCE_NAME%TYPE,
  in_current_owner IN ALL_SEQUENCES.SEQUENCE_OWNER%TYPE,
  in_new_owner     IN ALL_SEQUENCES.SEQUENCE_OWNER%TYPE
)
IS
  p_sql VARCHAR2(4000);
BEGIN
  SELECT 'CREATE SEQUENCE "' || in_new_owner || '"."' || sequence_name || '"'
         || ' MINVALUE ' || min_value
         || ' MAXVALUE ' || max_value
         || ' INCREMENT BY ' || increment_by
         || ' START WITH ' || ( last_number + 1 )
         || ' ' || CASE cycle_flag WHEN 'N' THEN 'NO' END || 'CYCLE'
         || ' ' || CASE order_flag WHEN 'N' THEN 'NO' END || 'ORDER'
         || ' ' || CASE cache_size WHEN 0 THEN 'NOCACHE' ELSE 'CACHE ' || cache_size END
  INTO   p_sql
  FROM   ALL_SEQUENCES
  WHERE  SEQUENCE_NAME  = in_sequence_name
  AND    SEQUENCE_OWNER = in_current_owner;

  -- DBMS_OUTPUT.PUT_LINE( p_sql );

  /*
  -- Delete the sequence if it already exists
  DECLARE
    SEQUENCE_NOT_EXIST EXCEPTION;
    PRAGMA EXCEPTION_INIT( SEQUENCE_NOT_EXIST, -2289 );
  BEGIN
    EXECUTE IMMEDIATE 'DROP SEQUENCE "' ||in_new_owner|| '"."' ||in_sequence_name|| '"';
  EXCEPTION
    WHEN SEQUENCE_NOT_EXIST THEN
      NULL;
  END;
  */

  EXECUTE IMMEDIATE p_sql;
EXCEPTION
  WHEN NO_DATA_FOUND THEN
    DBMS_OUTPUT.PUT_LINE(
      in_current_owner || '.' || in_sequence_name || ' does not exist.'
    );
END;
/
SHOW ERRORS; 
```

# android - 如何在android中显示像消息屏幕这样的联系人？

> ID：11664698
> 
> 赞同：0
> 
> 时间：2012-07-26T07:49:34.490
> 
> 标签：android

我想显示存储在联系人列表中的人员的姓名和号码，例如 android mobile 中的消息屏幕。请参阅此链接[http://imgur.com/dErrn](http://imgur.com/dErrn)。我想在我的应用程序中这样做。我们怎么能这样做？我使用 检索了联系人`ContactsContract`。我正在显示联系人`AutoCompleteTextView`，但它只显示号码。我希望有相同的下拉菜单，就像我附上姓名和号码的链接一样。如果有人知道这件事，请帮助我。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:11:53.717

您应该阅读消息传递应用程序的源代码。这将帮助您了解它是如何完成的。这可在 AOSP 源代码中免费获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:17:59.020

看看[AutoCompleteTextView。](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:19:13.597

您应该覆盖 AutoCompleteTextView 下拉列表项

# c++ - 注册表中的 Internet Explorer

> ID：11664699
> 
> 赞同：-1
> 
> 时间：2012-07-26T07:49:35.797
> 
> 标签：c++, internet-explorer, registry

我试图在 IE 中注入一个 DLL（科学应用程序，请参阅：[CreateInstance() with detour DLL Injection](https://stackoverflow.com/questions/11613739/createinstance-with-detour-dll-injection)）

但是......我只是放弃了，因为我认为我找到了一种更简单的方法......看，我需要做的事情可以在提示符中完成：withdll.exe /d:[DLL] [path\iexplore.exe]

（我已经有 DLL）

我所需要的只是 CreateInstance(NULL, IID_IWebBrowser2, [...] 调用上面的而不是简单的 [path\iexplore.exe] 我认为这应该在注册表中的某个地方。

有人我应该看什么钥匙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:31:25.397

不知道为什么会有反对票。[Interface](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680091%28v=vs.85%29.aspx)注册表项结构已正式记录。

# asp.net - 类似电子邮件客户端的环境 (asp.net) 的 ajax 地址字段

> ID：11664700
> 
> 赞同：0
> 
> 时间：2012-07-26T07:49:37.510
> 
> 标签：asp.net, asp.net-ajax, components

雅虎邮件中有一个神奇的收件人地址字段，您可以在其中输入名称并显示自动完成列表，单击名称然后字段中会出现一个块，每个块都有一个小x标记您可以从该字段中删除名称，并将所有剩余的块向左移动以填充它的位置！

如何在我的应用程序中以最小的努力在 asp.net 上实现地址字段的这种行为？

加：我主要寻找一个最好是免费使用的.net组件，商业的很受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:00:48.833

Rather than a .NET component, take a look at some client side plugins. TagIt, for JQuery, is a good one for doing just what you are talking about doing. Here is a demo: [http://webspirited.com/tagit/](http://webspirited.com/tagit/)

You can also wire up a web service and retrieve values from the server based on the input the user has entered (auto complete functionality). It's definitely one close to what you are referring to.

# c# - 在 Asp.net 中模拟上传文件

> ID：11664710
> 
> 赞同：1
> 
> 时间：2012-07-26T07:50:27.557
> 
> 标签：c#, asp.net, security, iis-7, impersonation

请考虑这种情况：

我有一个托管在`IIS 7.0`. 几乎每个`IIS`设置都是默认设置。我有一个用于上传文件的文件夹，`ASP.Net`用户对其具有写访问权限。当前`IIS`经理取消此写访问权限，他想添加一个本地用户`Windows Server`，该用户可以对该文件夹具有写访问权限。现在我的问题是如何在 asp.net 中模拟用户以及这种方法是否安全？我希望根据默认`IIS`用户在服务器上执行所有请求，但我只想模拟上传文件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:57:11.893

您需要的是部分模仿。您不需要模拟所有请求，但只应模拟几个呼叫。我想你必须看看这篇文章。

[http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

这就是它如何在登录用户的凭据下模拟一段代码，而其余的调用将使用默认的应用程序池身份进行处理

```
System.Security.Principal.WindowsImpersonationContext impersonationContext;
impersonationContext = 
    ((System.Security.Principal.WindowsIdentity)User.Identity).Impersonate();

//Insert your code that runs under the security context of the authenticating user here.

impersonationContext.Undo(); 
```

# html - 具有 100% 宽度和可变居中 div 的 3 列布局

> ID：11664730
> 
> 赞同：1
> 
> 时间：2012-07-26T07:51:23.273
> 
> 标签：html, css, layout

我想创建一个 3 列布局，其中一个居中 div，一个左一个右 div。左右 div 应该从居中的 div 扩展到页面的左右端。居中的 div 包含具有透明区域的元素，因此居中的 div 不应与左右 div 重叠。如果居中的 div 具有固定宽度，我设法创建了一个解决方案。问题是，是否可以创建一个类似的布局，但具有动态宽度的居中 div？

[jsFiddle 链接](http://jsfiddle.net/FCR64/)

这是固定宽度的代码。

CSS：

```
#divCenter{
  position:absolute;
  top:0%;
  left:0;
  right:0;
  height:50px;
  width:500px;
  margin:0 auto;
  border: 1px solid #aaaaff;
  background:#aaaaff;
  z-index:2;
}
#divLeft{
  position:absolute;
  top:0;
  left:0%;
  width:50%;
  border: 1px solid #aaffaa;
  z-index:1;
}
#divLeftInner{
  height:60px;
  margin-right:250px;
  background:#aaffaa;
}
#divRight{
  position:absolute;
  top:0;
  right:0%;
  width:50%;
  border: 1px solid #ffaaaa;
  z-index:1;
}
#divRightInner{
  height:60px;
  margin-left:250px;
  background:#ffaaaa;
} 
```

HTML：

```
<div id="divCenter">
</div>
<div id="divLeft">
  <div id="divLeftInner">
  </div>
</div>
<div id="divRight">
  <div id="divRightInner">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:55:06.430

将所有列向左浮动并将左右列设置为具有相等的宽度 - 使用 JavaScript。

**HTML**

```
<div id="wrapper">
    <div id="left" class="col"></div>
    <div id="mid" class="col"></div>
    <div id="right" class="col"></div>
</div>​ 
```

**CSS**

```
.col {float:left;height:200px;}
#left, #right {width:30%;background:red;}
#mid {width:40%;background:blue;} 
```

**jQuery**

```
//extra verbose for clarity's sake
var setWidths = function() {
    var wrapWidth = $("#wrapper").width();
    var midWidth = $("#mid").width();
    var leftOverWidth = wrapWidth - midWidth;
    var sideColWidth = leftOverWidth/2;
    $(".sidecol").width(sideColWidth);
}

//set new sizes whenever the window is resized
$(window).on("resize", setWidths);

$(function() {
    setWidths(); //set correct sizes when the DOM has loaded
});​ 
```

[http://jsfiddle.net/GYGL3/37/](http://jsfiddle.net/GYGL3/37/)

# iphone - Apple 的 SimplePing 不适用于 3G

> ID：11664731
> 
> 赞同：0
> 
> 时间：2012-07-26T07:51:26.970
> 
> 标签：iphone, ios

我正在使用 Apple 的 SimplePing 来 ping iPhone 上的主机。我希望以下委托方法能够工作。

```
(1) - (void)simplePing:(SimplePing *)pinger didSendPacket:(NSData *)packet;
(2) - (void)simplePing:(SimplePing *)pinger didReceivePingResponsePacket:(NSData *)packet;
(3) - (void)simplePing:(SimplePing *)pinger didReceiveUnexpectedPacket:(NSData *)packet;
(4) - (void)simplePing:(SimplePing *)pinger didFailToSendPacket:(NSData *)packet error:(NSError *)error; 
```

结果是...

1.  **模拟器**：方法（1）和（2或3或4）被调用（正确）
2.  **设备**（使用 WiFi）：方法（1）和（2 或 3 或 4）被调用（正确）
3.  **设备**（使用 3G）：仅调用方法 (1)。（不正确，我希望（2 或 3 或 4）也能得到 calleA）

我尝试了AppStore 中提供的一些应用程序（ [Network Ping Lite](http://itunes.apple.com/in/app/network-ping-lite/id289967115?mt=8)、[Free Ping](http://itunes.apple.com/in/app/free-ping/id430758871?mt=8)、[Ping Free ）。](http://itunes.apple.com/in/app/ping-free/id430640666?mt=8)他们的结果与我的相似。

我不知道这是否是 Apple 的 SimplePing 示例代码中的错误，还是我需要做一些其他配置？

**下面是我用过的代码**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.simplePing = [SimplePing simplePingWithHostName:@"www.google.com"];
    [self.simplePing setDelegate:self];
    [self.simplePing start];
}

- (void)simplePing:(SimplePing *)pinger didStartWithAddress:(NSData *)address {
    [self.simplePing sendPingWithData:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:36:45.097

**简单地：**

您无法验证特定运营商是否支持通过移动网络进行 ping。

# python - python中的因式分解

> ID：11664738
> 
> 赞同：1
> 
> 时间：2012-07-26T07:51:41.890
> 
> 标签：python, factorization

这段代码工作正常。说 1980 年它给出的结果是**2 ^ 2 *3 ^ 2 *5 ^ 1 *7 ^ 0 *11 ^ 1 ***（最后还有一个额外的星号。我可以删除它。这与我的问题无关。代码是：

```
prime=[2,3,5]
f=7
def next_prime(f):
    j=0
    while j==0:
        for x in prime:
            if f%x==0:
                f+=2
                break
        else:
            j=1
    return f;
def factorization(n):
    list=[2,3,5]
    power=[]
    x=0
    while x<len(list):
        j=0
        while n%list[x]==0:
            j+=1
            n=n/list[x]
        power.append(j)
        x+=1
    if n!=1:
        while n!=1:
            g=next_prime(f)
            j=0
            while n%g==0:
                j+=1
                n=n/g
            else:
                power.append(j)
                prime.append(g)
    x=0
    while x<len(power):
        print(prime[x],"^",power[x],"*",end="")
        x+=1

factorization(1980) 
```

然后，如果我想从结果中删除项**7 ^ 0**因此所有具有零幂的素数，我在第 31 行进行了更改（**如果 j！= 0:**而不是**else:**）。然后代码不起作用。它适用于像 13860 这样的数字，其中没有素数的幂为零，而不是像 1980 这样的数字。我找不到问题！更改后的代码是：

```
prime=[2,3,5]
f=7
def next_prime(f):
    j=0
    while j==0:
        for x in prime:
            if f%x==0:
                f+=2
                break
        else:
            j=1
    return f;
def factorization(n):
    list=[2,3,5]
    power=[]
    x=0
    while x<len(list):
        j=0
        while n%list[x]==0:
            j+=1
            n=n/list[x]
        power.append(j)
        x+=1
    if n!=1:
        while n!=1:
            g=next_prime(f)
            j=0
            while n%g==0:
                j+=1
                n=n/g
            if j!=0:
                power.append(j)
                prime.append(g)
    x=0
    while x<len(power):
        print(prime[x],"^",power[x],"*",end="")
        x+=1

factorization(1980) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:17:57.000

我没有分析你的逻辑，但是你`else`错误地使用了子句。`while .. else`只有当你`break`在你的`while`. 在您的第一个代码示例中，`else`始终执行分支。

例如，即使以下代码也会运行`else`分支：

```
while False:
    print 'while'
else:
    print 'else' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:14:49.757

如果您只对获取数字的质因数感兴趣，可以尝试：

```
def primefactors(x):
    factorlist=[]
    loop=2
    while loop<=x:
        if x%loop==0:
            x/=loop
            factorlist.append(loop)
        else:
            loop+=1
    return factorlist 
```

例如：

```
primefactors(1980)
[2, 2, 3, 3, 5, 11]
primefactors(13860)
[2, 2, 3, 3, 5, 7, 11] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:40:32.423

要添加到 imsc 的答案，实际上有一种算法使用 loop =6 和 loop +=6 然后尝试运行更好的 loop+1 和 loop-1。不过，必须先手动尝试 2 和 3。

# java - java：如何设置全局线程ID？

> ID：11664741
> 
> 赞同：2
> 
> 时间：2012-07-26T07:51:47.133
> 
> 标签：java, multithreading, log4j, distributed

是否有可能为线程设置唯一 ID？在分布式系统中，在许多不同的机器上创建线程（例如通过 RMI）？

我需要它来创建日志消息。根据我的研究，我知道可以使用 log4j mdc/ndc 来完成，但只能在单线程中完成。我的问题是必须在创建线程时设置 ID（为不同 JVM 上的线程使用相同的 ID，但用于相同的请求）

我是分布式系统的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:56:23.493

如果您想拥有一个全局唯一的请求 id，您可以使用带有计数器的 prcoessAndName（见下文）并将其与您的消息/请求一起传递，并使用它来设置线程名称。

```
public void processRequest(String uniqueRequestId, args) {
    Thread t = Thread.currrentThread();
    String tName = t.getName();
    try {
        t.setName("Processing " + uniqueRequestId);
        // preform process request
    } finally {
        t.setName(tName);
    }
} 
```

这样，线程的名称将包含请求 ID，无论它在哪个线程/机器中运行。如果您在日志中包含线程的名称，它将被包含在内。

* * *

您可以使用设置线程的名称

```
String processAndHost = ManagementFactory.getRuntimeMXBean().getName() 
```

您可以在此附加一个描述性名称或计数器。

这样，您的所有线程名称都将是唯一的。

您可以假设此名称是全局唯一的，前提是，a）您有一个唯一的主机名 b）进程没有重新启动，因此经常存在两个客户端（在不同时间）在同一主机上具有相同进程 ID 的重大风险问题。

这可以与本地唯一 id 结合，以获得分布式唯一 id。

```
ExecutorService service = Executors.newCachedThreadPool(new ThreadFactory() {
    final String processName = ManagementFactory.getRuntimeMXBean().getName();
    final AtomicLong counter = new AtomicLong();
    @Override
    public Thread newThread(Runnable r) {
        String name = processName+"-"+counter.getAndIncrement();
        return new Thread(r, name);
    }
});
for(int i=0;i<10;i++)
    service.submit(new Runnable() {
        @Override
        public void run() {
            System.out.println("["+Thread.currentThread().getName()+"] - Hello World.");
            Thread.yield();
        }
    });
service.shutdown(); 
```

印刷

```
[9480@myhost-0] - Hello World.
[9480@myhost-3] - Hello World.
[9480@myhost-2] - Hello World.
[9480@myhost-1] - Hello World.
[9480@myhost-5] - Hello World.
[9480@myhost-4] - Hello World.
[9480@myhost-6] - Hello World.
[9480@myhost-7] - Hello World.
[9480@myhost-0] - Hello World.
[9480@myhost-7] - Hello World. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:56:45.197

您可以为线程命名（请参阅 class 的不同构造函数`java.lang.Thread`）。您可以为每个线程组成一个名称，例如计算机名称加上一个唯一编号。

如果您正在使用例如创建线程`ExecutorService`，那么您可以传递`ExecutorService`您自己的实现`java.util.concurrent.ThreadFactory`来创建线程并设置它们的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:19:46.710

并非没有不可接受的线程创建开销。

您应该通过请求 ID 或会话 ID 进行记录，而不是一些甚至不存在的无法实现的全局线程 ID。

我认为您需要对点击跟踪日志进行一些研究。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:58:43.787

您可以为线程设置名称，但不能从 Thread 的 getId 方法的 java 文档中设置/更改线程的 ID

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#getId](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#getId) ()

“返回此线程的标识符。线程ID是创建此线程时生成的正长数。线程ID是唯一的，在其生命周期内保持不变。当一个线程终止时，该线程ID可能会被重用。”

# android - 如何在android中隐藏sdcard的系统文件夹？

> ID：11664746
> 
> 赞同：1
> 
> 时间：2012-07-26T07:52:12.077
> 
> 标签：android, listview, gridview

嗨，我想做一个简单的文件资源管理器，它可以使用 listview 显示 sdcard 的所有文件夹，并且只使用 gridview 显示图像文件。我把这一切都做得很好。在屏幕截图中显示。但在此之后我处理了 sdcard 的所有文件夹结构。反转过程也将成功处理。但是当我单击系统文件夹时出现问题`.android_secure`，`secure`然后`asec`显示空指针异常。但是如果文件夹为空，则我会处理此问题，然后显示消息文件夹为空。那我现在能做什么？如何处理这个问题。首先我想隐藏这个文件夹意味着不在列表视图中显示。但不能成功。请给我指路。

![在此处输入图像描述](../Images/7f14597ede8821afcccc98b15aeda599.png)

**第一个错误图像**

![在此处输入图像描述](../Images/f9c41278cb86c35c62564eb2cd709d58.png)

现在我在其中添加下一个点，我想删除特定的文件夹。所以我使用**`file.delete()`**但如果文件夹不为空，那该怎么办？我还想删除这个文件夹，其中所有包含它的 android2.2 都可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:02:40.097

如果您使用文件，请尝试

```
File file;
if(file.isfolder && file.list[] != null && file.isreadable()){ // check read,write access 
imageView.setVisible(Visible)
}else{
// hide your list item data
} 
```

或先检查适配器数据，然后将其放入适配器。

```
File files
// ... check files
Adapter adapter = new Adapter(files)
setListAdapter(adapter) 
```

# c# - 通过查询字符串传递二进制数据

> ID：11664749
> 
> 赞同：0
> 
> 时间：2012-07-26T07:52:20.737
> 
> 标签：c#, asp.net, .net, handler

我正在为我工​​作的办公室的人力资源部门建立一个系统。这将是对我们开发的现有项目/员工管理应用程序的增强。有一些现有的功能可以处理如下所示的文档。这都是基于 C#/ASP.NET 的。

```
 //Check for document being available
            if (ed.ContentType == null || ed.DocumentData == null)
            {
                Response.Redirect(Request.UrlReferrer.ToString());
            }
            else
            {
                strExtenstion = ed.ContentType.ToString();
                strFilename = ed.Filename.ToString();
                docData = ed.DocumentData;

                byte[] bytFile = (byte[])docData.ToArray();

                Response.Clear();
                Response.Buffer = true;

                if (strExtenstion == ".doc")
                {
                    Response.ContentType = "application/vnd.ms-word";
                }
                else if (strExtenstion == ".docx")
                {
                    Response.ContentType = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";
                }
                else if (strExtenstion == ".pdf")
                {
                    Response.ContentType = "application/pdf";
                }

                Response.AddHeader("content-disposition", "attachment;filename=" + strFilename.ToString());
                Response.ContentEncoding = System.Text.Encoding.UTF8;
                Response.Charset = "";
                Response.Cache.SetCacheability(HttpCacheability.NoCache);

                Page.Response.OutputStream.Write(bytFile, 0, bytFile.Length - 1);  //Drop final byte to enable inclusion of MS Office 2007 types
                Response.Flush();
                Response.Close();

                Response.End();
            } 
```

对于可以处理的每种类型的文档，我们都有一个类，例如；新闻文档、费用文件、业务程序和我刚刚创建了一个将处理员工评估/审查的类。我希望能够创建一个**不会依赖的通用文档处理程序**根据查询字符串值调用类的实例以确定对象。我们只需传入带有查询字符串的文档 ID 来确定要公开哪些类方法。我的一个想法是省略对象身份查询字符串，但实际上传递二进制文档数据和 mime 类型，因此响应将告诉浏览器需要在客户端计算机上打开哪个应用程序。这是我应该指出的内部 Intranet 系统，我的经验非常有限，因此请原谅任何愚蠢/不良的思维习惯。

我的问题是；

考虑通过查询字符串传递二进制数据是一个坏主意吗？

是否有更好的方法来构建通用文档句柄，以在本地机器上打开相关应用程序（MS Office 和 PDF mime 类型）？

谢谢

# android - Android如何在另一个线程上执行数据库插入？

> ID：11664750
> 
> 赞同：0
> 
> 时间：2012-07-26T07:52:22.953
> 
> 标签：android, sqlite, csv

我必须将一个大型在线 csv（30k+ 行）文件导入我的应用程序数据库。如何在另一个线程或异步任务中执行此操作？

我正在处理这段代码。它继续`onCreate`：

```
final ProgressDialog Dialog = ProgressDialog.show(
            this, "Updating schedule", "This may take a few minutes...", true, false);

    Thread thread = new Thread(new Runnable() {
        public void run() {
            DatabaseHandler db = new DatabaseHandler(MainActivity.this);

            //**How do I begin transaction here?**

            URL myURL;
            try {
                myURL = new URL("http://www.meralco.com.ph/pms/pms.csv");

                BufferedReader so = new BufferedReader(new InputStreamReader(myURL.openStream()));
                while (true) {
                    String output = so.readLine();
                    if (output != null) {
                        String[] sched = output.split(",");
                        db.addRow(sched[INDEX_SIN], sched[INDEX_CITY], 
                                sched[INDEX_START_DATE], sched[INDEX_START_TIME], 
                                sched[INDEX_END_DATE], sched[INDEX_END_TIME], 
                                sched[INDEX_DETAILS], sched[INDEX_REASON]);
                    }
                    else {
                        break;
                    }
                }

                //**How do I close transaction here?**
                so.close();
            }
            catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 

            runOnUiThread(new Runnable() {
                public void run() {
                    while (!Dialog.isShowing());
                    Dialog.dismiss();
                }
            });
        }

    });
    thread.start(); 
```

**数据库处理程序.java**：

```
public class DatabaseHandler{

public static final String KEY_SIN = "sched_sin";
public static final String KEY_CITY = "sched_city";
public static final String KEY_START_TIME = "sched_start_time";
public static final String KEY_START_DATE= "sched_start_date";
public static final String KEY_END_TIME = "sched_end_time";
public static final String KEY_END_DATE = "sched_end_date";
public static final String KEY_DETAILS = "sched_details";
public static final String KEY_REASON = "sched_reason";
public static final String KEY_ROWID = "_id";

private static final String TAG = "DatabaseHandler";
private SQLiteDatabase mDb;

private static final String DATABASE_NAME = "schedule_database";
private static final String DATABASE_TABLE = "schedule";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE =
    "create table " + DATABASE_TABLE + " (" + KEY_ROWID + " integer primary key autoincrement, "
    + KEY_SIN +" text not null, " + KEY_CITY + " text not null, " 
    + KEY_START_DATE +" text not null, " + KEY_START_TIME + " text not null, " 
    + KEY_END_DATE +" text not null, " + KEY_END_TIME + " text not null, "
    + KEY_DETAILS +" text not null, " + KEY_REASON + " text not null);";

private final Context mCtx;

public DatabaseHandler(Context ctx) {
    this.mCtx = ctx;

    // create or open the database
    DatabaseHelper helper = new DatabaseHelper(ctx);
    this.mDb = helper.getWritableDatabase();
}

public void addRow(String sin, String city, String start_date, String start_time, 
        String end_date,String end_time, String details, String reason)
{
    // this is a key value pair holder used by android's SQLite functions
    ContentValues values = new ContentValues();

    values.put(KEY_SIN, sin);
    values.put(KEY_CITY, city);
    values.put(KEY_START_DATE, start_date);
    values.put(KEY_START_TIME, start_time);
    values.put(KEY_END_DATE, end_date);
    values.put(KEY_END_TIME, end_time);
    values.put(KEY_DETAILS, details);
    values.put(KEY_REASON, reason);

    // ask the database object to insert the new data 
    try
    {
        this.mDb.insert(DATABASE_TABLE, null, values);
    }
    catch(Exception e)
    {
        Log.e("DB ERROR", e.toString()); // prints the error message to the log
        e.printStackTrace(); // prints the stack trace to the log
    }
}

public ArrayList<ArrayList<Object>> getAllRowsAsArrays()
{
    // create an ArrayList that will hold all of the data collected from
    // the database.
    ArrayList<ArrayList<Object>> dataArrays = new ArrayList<ArrayList<Object>>();

    // this is a database call that creates a "cursor" object.
    // the cursor object store the information collected from the
    // database and is used to iterate through the data.
    Cursor cursor;

    try
    {
        // ask the database object to create the cursor.
        cursor = this.mDb.query(
                DATABASE_TABLE,
                new String[]{KEY_ROWID, KEY_SIN, KEY_CITY, KEY_START_DATE, KEY_START_TIME, KEY_END_DATE, KEY_END_TIME, KEY_DETAILS, KEY_REASON},
                null, null, null, null, null
        );

        // move the cursor's pointer to position zero.
        cursor.moveToFirst();

        // if there is data after the current cursor position, add it
        // to the ArrayList.
        if (!cursor.isAfterLast())
        {
            do
            {
                ArrayList<Object> dataList = new ArrayList<Object>();

                dataList.add(cursor.getLong(0));
                dataList.add(cursor.getString(1));
                dataList.add(cursor.getString(2));
                dataList.add(cursor.getString(3));
                dataList.add(cursor.getString(4));
                dataList.add(cursor.getString(5));
                dataList.add(cursor.getString(6));
                dataList.add(cursor.getString(7));
                dataList.add(cursor.getString(8));

                dataArrays.add(dataList);
            }
            // move the cursor's pointer up one position.
            while (cursor.moveToNext());
        }
    }
    catch (SQLException e)
    {
        Log.e("DB Error", e.toString());
        e.printStackTrace();
    }

    // return the ArrayList that holds the data collected from
    // the database.
    return dataArrays;
}

private static class DatabaseHelper extends SQLiteOpenHelper {  

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.i(TAG, "Creating DataBase: " + DATABASE_CREATE);
        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }
}
} 
```

**编辑** 另外，我在使用时遇到问题`beginTransaction()`，`endTransaction`因为我不能在线程内使用它。它说下面的方法是未定义的....

```
public void beginTransaction(){
    this.mDb.beginTransaction();
}

public void endTransaction(String sql){
    this.mDb.endTransaction();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:55:33.377

像：

```
public final class DownloadFile extends AsyncTask<Void, Long, Boolean> {

private Context context;
private ProgressDialog progressDialog;

public DownloadFile (Context context) {
    this.context = context;
}

/* 
 * @see android.os.AsyncTask#onPreExecute()
 */
@Override
protected void onPreExecute() {
    try {
        progressDialog = ProgressDialog.show(context, "", "message", true);
    } catch (final Throwable th) {
        //TODO
    }
}

protected Boolean doInBackground(Void... arg0) {
    DatabaseHandler db = new DatabaseHandler(context);

            //**How do I begin transaction here?**

        URL myURL;
        try {
            myURL = new URL("http://www.meralco.com.ph/pms/pms.csv");

            BufferedReader so = new BufferedReader(new InputStreamReader(myURL.openStream()));
            while (true) {
                String output = so.readLine();
                if (output != null) {
                    String[] sched = output.split(",");
                    db.addRow(sched[INDEX_SIN], sched[INDEX_CITY], 
                            sched[INDEX_START_DATE], sched[INDEX_START_TIME], 
                            sched[INDEX_END_DATE], sched[INDEX_END_TIME], 
                            sched[INDEX_DETAILS], sched[INDEX_REASON]);
                }
                else {
                    break;
                }
            }

            //**How do I close transaction here?**
            so.close();
            return true;
        }
        catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        } 
 }

protected void onPostExecute(Boolean result) {
    progressDialog.dismiss();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:51:45.307

下面是对我有用的代码。我注意到使用`Threads`而不是下载时下载速度更快，`AsyncTask`所以我选择了前者。正如@JoxTraex 指出的那样，我使用了一个 csv 解析器（在这种情况下，我使用了[OpenCSV](http://opencsv.sourceforge.net/)的阅读器）而不是一个完整的工作块。它消除了我在每个逗号处拆分的问题，即使一个值包含在一对双引号中。

```
Thread downloadThread = new Thread(new Runnable() {

    public void run() {

        db = new DatabaseHandler(MainActivity.this);
        db.beginTransaction();

        try {
            URL url = new URL(csvFileName);

            Log.i("dl", "start");

            InputStream input = url.openStream();
            CSVReader reader = new CSVReader(new InputStreamReader(input));

            String [] sched;
            while ((sched = reader.readNext()) != null) {
                if(sched[INDEX_CITY].equals("")) sched[INDEX_CITY]="OTHERS";
                try {

                    db.addRow(sched[INDEX_SIN], sched[INDEX_CITY], 
                            sched[INDEX_START_DATE], sched[INDEX_START_TIME], 
                            sched[INDEX_END_DATE], sched[INDEX_END_TIME], 
                            sched[INDEX_DETAILS], sched[INDEX_REASON]);
                } catch (IndexOutOfBoundsException e) {
                    db.addRow(sched[INDEX_SIN], sched[INDEX_CITY], 
                            sched[INDEX_START_DATE], sched[INDEX_START_TIME], 
                            sched[INDEX_END_DATE], sched[INDEX_END_TIME], 
                            "", sched[INDEX_REASON]);
                    //e.printStackTrace();
                }
            }
            input.close();
            Log.i("dl", "finished");

        } catch (MalformedURLException e) {
            e.printStackTrace();
            db.endTransaction();
        } catch (IOException e) {
            e.printStackTrace();
            db.endTransaction();
        } 
        Log.d("Count", ""+db.count());
        db.setTransactionSuccessful();
        db.endTransaction();

        writeUploadDateInTextFile();

    }

}); 
```

在我的数据库处理程序类中，

```
public void beginTransaction(){
    this.mDb.beginTransaction();
}

public void endTransaction(String sql){
    this.mDb.endTransaction();
} 
```

# c# - C#正则表达式：如何从字符串中提取内容？

> ID：11664753
> 
> 赞同：-2
> 
> 时间：2012-07-26T07:52:26.683
> 
> 标签：c#, regex

我有一个字符串如下：

```
...[down]&lt;a title="Download: Click Here" href="http://www.domain.com/T60B8JK2WT/" target="_blank"&gt;&lt;strong&gt; blah blah (2011)(1 - 22)&lt;/strong&gt;&lt;/a&gt; &lt;a title="Download: Click Here" href="http://www.domain.com/5FBLQYBQTV/" target="_blank"&gt;&lt;strong&gt; blah blah (2011) &lt;/strong&gt;&lt;/a&gt;[/down]... 
```

如何`[down][/down]`从字符串中找到标签并获取 [down][/down] 标签中的所有`href`属性 &`text of each link`并将其放入 a`data table`中，表格的每一行都包含标题和 url 字段？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:51:06.107

你的代码应该是这样的：

```
foreach (Match match in Regex.Matches(inputString, 
                                      @"\[down\](?<content>.+)\[/down\]"))
{
    var content = match.Groups["content"].Value;

    var hrefs = new List<string>();

    foreach (Match matchhref in Regex.Matches(t, @"href=""(?<href>[^""]+)"""))
    {
        hrefs.Add(matchhref.Groups["href"].Value);
    }
} 
```

# javascript - 如何在javascript中替换所有%s字符串

> ID：11664760
> 
> 赞同：1
> 
> 时间：2012-07-26T07:52:40.377
> 
> 标签：javascript, regex

> **可能重复：**
> [等效于 printf/string.format 的 JavaScript](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format)
> [替换字符串中的所有匹配项](https://stackoverflow.com/questions/6064956/replace-all-occurrences-in-a-string)

见标题。看到下面的变量，我怎样才能用其他字符串替换所有的 '%s'？

```
var s = 'qwer%sqwer%s'; 
```

请指教

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T07:54:32.967

使用`.replace`方法。

```
var s = 'qwer%sqwer%s';
s = s.replace(/%s/g, 'other'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:55:16.317

试试这个：

```
s.replace(/%s/g,'x') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:55:46.023

您可以使用 replace() 函数替换字符串 Ex。

```
 var getnewstring = s.replace("%s","YOUR STRING"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:58:34.383

使用 .replace 方法

```
var s = 'qwer%sqwer%s';
s=s.replace('%s','your string')
document.write(s); 
```

# php - 拆分正则表达式php

> ID：11664761
> 
> 赞同：2
> 
> 时间：2012-07-26T07:52:45.917
> 
> 标签：php, regex

我有一个这样的字符串：

```
 0d(Hi)i(Hello)4d(who)i(where)540d(begin)i(began) 
```

我想把它做成一个数组。我尝试先添加分隔符，以便使用 php 函数爆炸。

```
 ;0,d(Hi),i(Hello);4,d(who),i(where);540,d(begin),i(began) 
```

它有效，但问题是我想最小化分隔符以节省磁盘空间。因此，我想通过使用 preg_split 正则表达式来了解是否有可能在不使用分隔符的情况下拥有像这样的巨大数组：

```
 Array ( [0] => Array ( [0] => 0 [1] => d(hi) [2] => i(Hello) ) 
         [1] => Array ( [0] => 4 [1] => d(who) [2] => i(where) )
         [2] => Array ( [0] => 540 [1] => d(begin) [2] => i(began) )
       ) 
```

我尝试了一些代码和正则表达式，但我看到正则表达式中的值在最终结果中不存在（如explode函数，在最终数组中我们没有分隔符。）

此外，我在构建正则表达式时遇到了一些困难。这是我做的一个：

```
 $modif = preg_split("/[0-9]+(d(.+))?(i(.+))?/", $data); 
```

我必须指出 d() 和 i() 不能出现（但至少有一个）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:13:28.903

如果你这样做

```
preg_match_all('/(\d+)(d\([^()]*\))?(i\([^()]*\))?/', $subject, $result, PREG_SET_ORDER); 
```

在您的原始字符串上，然后您将获得一个数组，其中

```
$result[$i][0] 
```

包含第`i`th 个匹配项（即`$result[0][0]`会是`0d(Hi)i(Hello)`）以及在哪里

```
$result[$i][$c] 
```

包含第th 匹配`c`的第 th 个捕获组（即is 、is和is ）。`i``$result[0][1]``0``$result[0][2]``d(Hi)``$result[0][2]``i(Hello)`

那是你想要的吗？

# ios5 - 单元格动画停止分数必须大于开始分数

> ID：11664766
> 
> 赞同：31
> 
> 时间：2012-07-26T07:53:10.693
> 
> 标签：ios5

我在表格视图单元格中使用动画...当单元格完全可见时动画工作正常。如果由于动画当时任何单元格部分可见，我的应用程序在 [_Mytableviewobject endUpdates] 行崩溃；

崩溃日志=由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“单元格动画停止分数必须大于开始分数”

代码部分：

```
-(void)sectionHeaderView:(SectionHeaderView*)sectionHeaderView sectionOpened:(NSInteger)sectionOpened
{
     //ENSLog(self, _cmd);
    [_caseTable reloadData];
    NSInteger countOfRowsToInsert = 1;
    SectionInfo *sectionInfo = [self.sectionInfoArray objectAtIndex:sectionOpened];
    sectionInfo.open = YES;

    NSMutableArray *indexPathsToInsert = [[[NSMutableArray alloc] init] autorelease];
    for (NSInteger i = 0; i < countOfRowsToInsert; i++) 
    {
        [indexPathsToInsert addObject:[NSIndexPath indexPathForRow:i inSection:sectionOpened]];
    }

    NSMutableArray *indexPathsToDelete = [[[NSMutableArray alloc] init] autorelease];
    NSInteger previousOpenSectionIndex = self.openSectionIndex;
    if (previousOpenSectionIndex != NSNotFound)
    {
        SectionInfo *previousOpenSection = [self.sectionInfoArray objectAtIndex:previousOpenSectionIndex];
        previousOpenSection.open = NO;
        [previousOpenSection.headerView toggleOpenWithUserAction:NO];
        NSInteger countOfRowsToDelete = 1;
        for (NSInteger i = 0; i < countOfRowsToDelete; i++)
        {
            [indexPathsToDelete addObject:[NSIndexPath indexPathForRow:i inSection:previousOpenSectionIndex]];
        }
    }

    // Style the animation so that there's a smooth flow in either direction.
    UITableViewRowAnimation insertAnimation;
    UITableViewRowAnimation deleteAnimation;
    if (previousOpenSectionIndex == NSNotFound || sectionOpened < previousOpenSectionIndex) 
    {
        insertAnimation = UITableViewRowAnimationTop;
        deleteAnimation = UITableViewRowAnimationBottom;
    }
    else
    {
        insertAnimation = UITableViewRowAnimationTop;
        deleteAnimation = UITableViewRowAnimationTop;
    }

    // Apply the updates.
    [_caseTable beginUpdates];
    [_caseTable deleteRowsAtIndexPaths:indexPathsToDelete withRowAnimation:deleteAnimation];
    [_caseTable insertRowsAtIndexPaths:indexPathsToInsert withRowAnimation:insertAnimation];
    [_caseTable endUpdates];
    //ExNSLog(self, _cmd);

    self.openSectionIndex = sectionOpened;
    //ExNSLog(self, _cmd);

}

-(void)sectionHeaderView:(SectionHeaderView*)sectionHeaderView sectionClosed:(NSInteger)sectionClosed
{
     //ENSLog(self, _cmd);
    SectionInfo *sectionInfo = [self.sectionInfoArray objectAtIndex:sectionClosed];
    sectionInfo.open = NO;
    NSInteger countOfRowsToDelete = [_caseTable numberOfRowsInSection:sectionClosed];
    if (countOfRowsToDelete > 0)
    {
        NSMutableArray *indexPathsToDelete = [[[NSMutableArray alloc] init] autorelease];
        for (NSInteger i = 0; i < countOfRowsToDelete; i++) 
        {
            [indexPathsToDelete addObject:[NSIndexPath indexPathForRow:i inSection:sectionClosed]];
        }
        [_caseTable deleteRowsAtIndexPaths:indexPathsToDelete withRowAnimation:UITableViewRowAnimationTop];
    }
    self.openSectionIndex = NSNotFound;
     //ExNSLog(self, _cmd);
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-11-08T14:43:16.230

在尝试使用虚拟页脚删除潜在的“空”表格视图单元格时，我遇到了同样的崩溃。

解决方案是摆脱

```
tableView:viewForFooterInSection:
tableView:heightForFooterInSection: 
```

并在 viewDidLoad 中用以下内容替换它们：

```
tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-26T10:03:06.933

是的，我也面临这种类型的问题，做一件事只是删除页脚视图。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-28T08:54:05.983

它似乎在设置时发生`tableview`

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section

-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section 
```

而`tableview`样式集`Plain`而不是`Grouped`样式

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-24T09:50:07.737

在 ios 7 更新后我遇到了同样的问题：在我的表格视图中展开/折叠内容的“deleteRowsAtIndexPaths”期间出现了崩溃。

令人惊讶的是，我通过使用 heightForHeaderInsection 而不是 heightForFooterInSection 解决了这个问题。

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    返回 1；// 修复前为 0
}

-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section{
    返回0；// 在修复之前是 1
}

```

已报告此问题 ( [https://devforums.apple.com/message/795349](https://devforums.apple.com/message/795349) )。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-06T10:13:34.770

您可以使用下一部分的标题我的相同答案在这里

*   创建空白部分
*   使用它的页眉而不是页脚

[https://stackoverflow.com/a/12297703/788798](https://stackoverflow.com/a/12297703/788798)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-28T20:29:05.583

对于 iOS 7 更新后遇到此问题的人：检查部分页脚视图的视图框架。如果它与 tableview 单元格重叠。系统抛出此异常。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-04-08T18:25:19.337

这是 iOS 中的一个错误。我提交了一个错误报告，他们回来说它是 14898413 的副本。这个错误在苹果错误报告器中仍然标记为打开。

修复选项：1) 删除页脚 2) 开始和结束更新不是删除行，而是重新加载表

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-05T00:35:12.027

每当我滚动到 tableview 的底部并尝试删除单元格并插入部分时，我都会遇到相同的错误和崩溃，我的解决方案是在`[tableview beginsUpdates]`使用 tableviews 内容偏移量调用之前将 tableview 滚动回顶部。有了这个解决方案，我根本不需要更改我的部分页眉或页脚。

```
[self.tableView setContentOffset:CGPointZero animated:NO]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-15T12:20:45.100

我通过在最后一节调用 reloadData() 解决了这个错误：

```
func expandSectionPressed(sender: UIButton) {
    let object = items[sender.tag]
    object.expanded = !object.expanded
    sender.selected = object.expanded
    var indexPaths = [NSIndexPath]()
    for i in 0..<7 {
        indexPaths.append(NSIndexPath(forRow: i, inSection: sender.tag))
    }
    if object.expanded {
        tableView.insertRowsAtIndexPaths(indexPaths, withRowAnimation: .Fade)
    } else {
        // strange crash when deleting rows from the last section //
        if sender.tag < numberOfSectionsInTableView(tableView) - 1 {
            tableView.deleteRowsAtIndexPaths(indexPaths, withRowAnimation: .Fade)
        } else {
            tableView.reloadData()
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-17T07:31:54.063

我遇到了同样的问题 - [[self tableView] endUpdates] 中的异常“单元格动画停止分数必须大于开始分数”；我通过捕获异常并第二次进行 endUpdates 来解决它。

```
[[self tableView] beginUpdates];
@try
{
    [[self tableView] endUpdates];
}
@catch (NSException* exception)
{
    [[self tableView] endUpdates];
} 
```

# javascript - 将图像添加到单词列表

> ID：11664770
> 
> 赞同：1
> 
> 时间：2012-07-26T07:53:13.583
> 
> 标签：javascript, jquery, html, jquery-ui

我目前有一个随机的单词列表，其中每个单词都有声音。我也想链接图片，但是当我尝试以与声音相同的方式进行操作时。

```
<ul style="display:none;" id="wordlist">
  <li data-word="cat" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav" data-pic="http://rlv.zcache.com/design_your_own_cartoon_cat_photosculpture-p153525514006078077bfpmd_400.jpg"></li>
  <li data-word="mat" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav"></li>
  <li data-word="dog" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav"></li>
  <li data-word="fig" data-audio="http://www.wav-sounds.com/cartoon/porkypig1.wav"></li>
  <li data-word="fog" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav"></li>
  <li data-word="mum" data-audio="http://www.wav-sounds.com/cartoon/daffyduck1.wav"></li>
</ul> 
```

这是单击我的按钮时将其拉出的脚本...

```
var audio = $("#mysoundclip")[0];
$("button").click(function() {
var noExist = $('td[data-word=' + rndWord + ']').hasClass('wordglow2');
if (noExist) {
    $('#pickNext').click();
} else {
    $("#mysoundclip").attr('src', listOfWords[rndWord]);
    audio.play();
}
});

var pic = $("#mypic")[0];
$("button").click(function() {
var noExist = $('td[data-word=' + rndWord + ']').hasClass('wordglow2');
if (noExist) {
    $('#pickNext').click();
} else {
    $("#mypic").attr('src', listOfWords[rndWord]);
    pic.show();
}
}); 
```

所以音频的脚本有效，但图片无效......

```
<img id="mypic" preload="auto">
<audio id="mysoundclip" preload="auto"></audio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:00:36.303

当你说这不起作用时，你是什么意思？您的 HTML 看起来有效（您已将图像的 url 存储在 LI 标记的标记中），您如何尝试使用该值，是否有一些 JavaScript 代码试图访问它？如果是这样，请向我们展示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:25:17.340

您忘记添加属性...

```
for(i = 0; i < ul.children.length; ++i){
listOfWords[ul.children[i].getAttribute("data-word")] = ul.children[i].getAttribute("data-audio", "data-pic")
} 
```

希望这可以帮助

# javascript - jQuery微调器使用问题

> ID：11664777
> 
> 赞同：1
> 
> 时间：2012-07-26T07:53:46.277
> 
> 标签：javascript, jquery, html, spinner

我怎么了？这是代码：

```
<script type="text/javascript"
    src="<c:url value='/resources/js/jquery-1.7.js'/>"></script>
<script type="text/javascript"
    src="<c:url value='/resources/js/jquery-ui-1.8.21.custom.min.js'/>"></script>
<script type="text/javascript"
    src="<c:url value='/resources/js/jquery.ui.spinner.js'/>"></script>
<script type="text/javascript"
    src="<c:url value='/resources/js/myscript.js'/>"></script>

<input id="spinner" type="text" value="0" /> 
```

mysript.js 代码：

```
$(document).ready(function() {

    $(function() {
        $('#spinner').spinner({min: -100, max: 100});
    });

}); 
```

它仍然不起作用

顺便说一句，它说： TypeError: this._super is not a function

this._super（键，值）；

jquery...nner.js (line375)

类型错误：this._super 不是函数

this._super( 选项 );

jquery...nner.js（第 389 行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:32:19.143

工作示例：http: [//jsfiddle.net/KaaaT/](http://jsfiddle.net/KaaaT/)

所以你需要：

*   jQuery
*   jQuery 用户界面
*   jQuery UI CSS
*   微调器

单击`manage resources`上面的 jsfiddle 链接以查看我在示例中使用了哪个 URL。

jQuery代码：

```
$('#spinner').spinner({ min: -100, max: 100 }); 
```

HTML 代码：

```
<input type="text" id="spinner" value="0" /> 
```

Jsfiddle 使用 jQuery UI 1.8.18。Google 的内容交付网络托管了一个较新的网络。所以我建议你使用这些网址：

*   [https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js)
*   [https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)
*   [http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/themes/ui-lightness/jquery-ui.css](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/themes/ui-lightness/jquery-ui.css)
*   [http://btburnett.com/spinner/ui.spinner.min.js](http://btburnett.com/spinner/ui.spinner.min.js)

**编辑：**问题可能是您在下载它时忘记将小部件功能添加到您的自定义 jQuery UI 库中。试试由 Google 的 CDN 托管的那个。或者重新下载 jQuery UI 并`widget`选中该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:16:34.970

你的代码没问题，看：[这是你的代码](http://jsfiddle.net/yhc13429826359/4tfwK/)

# c# - 如何在 MVC 中对 Create 方法执行单元测试？

> ID：11664778
> 
> 赞同：1
> 
> 时间：2012-07-26T07:53:47.520
> 
> 标签：c#, asp.net-mvc-3, unit-testing

如何对 MVC 应用程序执行单元测试？

我已经创建了控制器位置。它具有 LocationName、Area、City、PinCode 等属性。

现在，我想执行单元测试以检查 Location 是否保存在 DB 中。如何检查它。

我浏览了大量的视频，他们只是在每个地方都对数学运算进行单元测试，例如加法、除法、减法......

我想知道如何执行 MVC 的 Create 方法的单元测试

我有类似下面的代码

```
 [HttpPost]
    public ActionResult Create(Location location)
    {
        if (ModelState.IsValid)
        {
            db.Locations.Add(location);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:43:47.813

为了使您的代码可测试，您应该抽象控制器的依赖关系。[使用存储库](http://martinfowler.com/eaaCatalog/repository.html)模式来抽象数据访问非常方便。[将您的存储库注入](http://mytechworld.officeacuity.com/index.php/2011/05/ninject-and-entity-framework-code-first-easy-repository-patterns/)控制器：

```
public class LocationController : Controller
{
    private ILocationRepository _locationRepository;

    public LocationController(ILocationRepository locationRepository)
    {
         _locationRepository = locationRepository;
    }
} 
```

现在您可以模拟您的存储库。这是使用[Moq](http://code.google.com/p/moq/wiki/QuickStart)框架和[MvcContrib](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)的示例测试：

```
// Arrange
Mock<ILocationRepository> repository = new Mock<ILocationRepository>();
var controller = new LocationController(repository.Object);
Location location = new Location("New York);
// Act
var result = controller.Create(location);
// Assert
result.AssertActionRedirect()
      .ToAction<LocationController>(c => c.Index());
repository.Verify(r => r.Add(location));
repository.Verify(r => r.Save()); 
```

你可以实现代码，这将通过这个测试：

```
[HttpPost]
public ActionResult Create(Location location)
{
    if (ModelState.IsValid)
    {
        _locationRepository.Add(location);
        _locationRepository.Save();
        return RedirectToAction("Index");  
    }
} 
```

您可以在此处阅读有关实现存储库和测试 MVC 应用程序的更多信息： [在 ASP.NET MVC 应用程序中实现存储库和工作单元模式](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。不错的功能也是[每个请求都有工作单元](http://www.mindscapehq.com/blog/index.php/2008/05/12/using-the-unit-of-work-per-request-pattern-in-aspnet-mvc/)。

# jquery - 调整弹出窗口大小时，jquery 的内部内容不会调整大小

> ID：11664780
> 
> 赞同：2
> 
> 时间：2012-07-26T07:53:57.663
> 
> 标签：jquery, html, jquery-ui-dialog

![在此处输入图像描述](../Images/12c6ee6dfbad1aab37afa92699eab5da.png)

每当我尝试使用 jquery resizable 函数调整 jquery 弹出窗口的大小时。但弹出内容页面的内部高度不会调整大小。任何想法如何调整内部内容的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:47:41.927

您可以为弹出窗口使用调整大小事件并设置 div 的宽度和高度：

```
$("#popup").resize(function() {

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:03:08.757

您可以锚定内容 div，我已经设置了一个[小提琴](http://jsfiddle.net/Yoeri/CR3uU/)来这样做

锚定是通过使用绝对定位与上、下和左、右来实现的

# azure-sql-database - 如何将本地 SQL Azure 数据库迁移到 Microsoft Acess

> ID：11664783
> 
> 赞同：0
> 
> 时间：2012-07-26T07:54:03.700
> 
> 标签：azure-sql-database

是否可以将本地 Sql azure 数据库迁移到 Microsoft Access？如果是的话，有人可以指导我。谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T07:58:11.933

您可以使用 SSMA。这是我几个月前编写的将 Access 迁移到 SQL Azure 的分步指南，如果这就是您的意思： http: [//blogs.solidq.com/pdoshi/post.aspx ?id=9&title=migrating+microsoft+访问+数据库+to+sql+azure+使用+sql+server+迁移+助手++%28ssma%29](http://blogs.solidq.com/pdoshi/post.aspx?id=9&title=migrating+microsoft+access+database+to+sql+azure+using+sql+server+migration+assistant++%28ssma%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:49:27.633

本地 SQL Azure 是什么意思？您是否有一个想要在本地获取然后转换为访问权限的 SQL Azure 数据库？如果是这样，您可以使用 Redgates SQL Azure 备份进行备份 - [http://www.red-gate.com/products/dba/sql-azure-backup/discontinued](http://www.red-gate.com/products/dba/sql-azure-backup/discontinued)到本地 SQL Server，然后迁移数据以进行访问。

# javascript - 在 javascript 中的表单提交上传递一个额外的参数

> ID：11664784
> 
> 赞同：1
> 
> 时间：2012-07-26T07:54:06.657
> 
> 标签：javascript, jsp, url

我有一个 javascript 函数说`newFn()`。我需要检查一些情况`if else`。

```
function newFn(formName)
{
 var codeParam = document.getElementById('code').value; 
 var windowForm = document.forms[formName];     
   windowForm.submit(); 
 return true;           
} 
```

**我的要求是：**

`if(codeParam == null)`我需要在 . 上再传递一个参数说else `codeParam=null`。 简而言之，在 url 中我需要一个额外的参数。这可能吗？`codeParam=codeParam``windowForm.submit();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:58:22.690

为什么不直接这样设置它的值：

```
if (codeParam == null) {
    document.getElementById('code').value = 'null';
} 
```

这会将**codeParam=null**表单数据发送到您的操作 url。

但是我注意到这段代码永远不会被执行，元素的`value`属性`input`永远不会是 value `null`，当没有提供输入时，`value`属性的值是**空字符串 ('')**，所以也许你应该改变你的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:05:45.037

我不明白你想要完成什么但是

```
function newFn(formName) {
    var codeParam = document.getElementById('code').value;
    if (!codeParam) {
        codeParam = null;
    }
    document.forms[formName].codeParam = codeParam;
    var windowForm = document.forms[formName];     
    windowForm.submit(); 
    return true;
} 
```

如果（假设“code”是一个文本字段）为空，则将 codeParam 设置为 null，如果它有值，则将 codeParam 设置为该值。（我也在表单中添加了属性，所以它会被提交，我不知道它是不是你想要的）

你可以看看这个 [Fiddle的输出](http://jsfiddle.net/eZB93/)

# vbscript - 使用 VBScript 获取已连接的操纵杆列表

> ID：11664786
> 
> 赞同：0
> 
> 时间：2012-07-26T07:54:17.093
> 
> 标签：vbscript, joystick

我正在寻找一种可以通过 VBScript 获取已连接操纵杆列表的方法，如下图所示（我的意思是它们的顺序非常重要）：

![joy.cpl 列出连接的操纵杆](../Images/2bb8c2724e0f61da1fef862e3803080f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:11:22.773

这是执行此操作的代码...在网上很难找到...

```
strComputer = "." Set objWMIService = GetObject("winmgmts:" _ &
"{impersonationLevel=impersonate}!\\" & strComputer & "oot\cimv2")

Set colItems = objWMIService.ExecQuery("Select * from
Win32_PnPEntity")

For Each objItem in colItems

Wscript.Echo "Class GUID: " & objItem.ClassGuid
Wscript.Echo "Description: " & objItem.Description
Wscript.Echo "Device ID: " & objItem.DeviceID
Wscript.Echo "Manufacturer: " & objItem.Manufacturer
Wscript.Echo "Name: " & objItem.Name
Wscript.Echo "PNP Device ID: " & objItem.PNPDeviceID
Wscript.Echo "Service: " & objItem.Service

Next 
```

希望[这](http://www.microsoft.com/technet/scriptcenter/scripts/hardware/devices/hwdevbo3.mspx)会有所帮助

# f# - 根据成员基础类型过滤包含有区别的联合成员的记录列表

> ID：11664791
> 
> 赞同：1
> 
> 时间：2012-07-26T07:54:30.683
> 
> 标签：f#

有没有办法做到这一点？

```
type EntryDetails = 
| ADetails of TypeADetails
| BDetails of TypeBDetails
| ...

type Entry = { A, B, C, ... Details:EntryDetails}

let filter (list:list<Entry>) myType = List.filter (fun x -> x.Details is myType) 
```

请注意我希望 myType 是一个参数而不是硬编码类型。

我试过这个，但它显然不起作用：

```
let filterDetails (entry:Entry) detailType = match entry.Details with 
                                               | detailType -> true 
                                               | _ -> false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:53:05.280

这不是您问题的确切解决方案，但它非常接近且易于实现 - 如何使用带有 的部分活动模式`List.choose`，如下所示：

```
type EntryDetails =
    | ADetails of int
    | BDetails of byte
    | CDetails of string

type Entry = { Foo : unit; Bar : unit; Details : EntryDetails; }

module Patterns =
  let (|ADetails|_|) x =
      match x.Details with
      | ADetails _ -> Some x
      | _ -> None

  let (|BDetails|_|) x =
      match x.Details with
      | BDetails _ -> Some x
      | _ -> None

  let (|CDetails|_|) x =
      match x.Details with
      | CDetails _ -> Some x
      | _ -> None

module internal Test =
    let private testData =
        let baseData = { Foo = (); Bar = (); Details = ADetails 0; }
        [   { baseData with Details = ADetails 10; };
            { baseData with Details = BDetails 7uy; };
            { baseData with Details = BDetails 92uy; };
            { baseData with Details = ADetails 32; };
            { baseData with Details = CDetails "foo"; };
            { baseData with Details = BDetails 2uy; };
            { baseData with Details = ADetails 66; };
            { baseData with Details = CDetails "bar"; };
            { baseData with Details = CDetails "baz"; }; ]

    let results =
        testData
        |> List.choose Patterns.(|ADetails|_|) 
```

如果将该代码粘贴到`fsi`中，您应该得到以下输出：

```
(* Snip ... removed irrelevant type signatures *)
module internal Test = begin
  val private testData : Entry list =
    [{Foo = null;
      Bar = null;
      Details = ADetails 10;}; {Foo = null;
                                Bar = null;
                                Details = BDetails 7uy;};
     {Foo = null;
      Bar = null;
      Details = BDetails 92uy;}; {Foo = null;
                                  Bar = null;
                                  Details = ADetails 32;};
     {Foo = null;
      Bar = null;
      Details = CDetails "foo";}; {Foo = null;
                                   Bar = null;
                                   Details = BDetails 2uy;};
     {Foo = null;
      Bar = null;
      Details = ADetails 66;}; {Foo = null;
                                Bar = null;
                                Details = CDetails "bar";};
     {Foo = null;
      Bar = null;
      Details = CDetails "baz";}]

  val results : Entry list =
    [{Foo = null;
      Bar = null;
      Details = ADetails 10;}; {Foo = null;
                                Bar = null;
                                Details = ADetails 32;};
     {Foo = null;
      Bar = null;
      Details = ADetails 66;}]
end 
```

如您所见，`Test.results`列表已过滤，因此它仅包含字段类型为 的`Entry`项目。`Details``ADetails`

# jquery - jquery 停止工作 wp_enqueue_script

> ID：11664796
> 
> 赞同：0
> 
> 时间：2012-07-26T07:54:44.910
> 
> 标签：jquery, wordpress

在我的 wp 主题中，我在 head 中直接引用了 jquery 和各种脚本。一切都很完美。

后来我将其更改为包含脚本的 wordpress 方式，从而转到 functions.php 并从那里注册所有 js。

从头部删除重复的 js 后，没有任何效果！

有任何想法吗？我感觉它与 wp 的无冲突模式有关，但我可能是错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:51:58.383

如果您引用自己的 jQuery，我发现 wordpress 天生就有冲突问题（至少对我而言）。所以我通常会删除 jQuery 的 wordpress 包含（在 functions.php 文件中）并在 header.php 中添加我自己的动态引用 - 试试看，它通常会修复我所有的 wordpress jQuery 疑虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:27:19.103

WordPress 附带的 jQuery 版本确实调用了 noConflict()。如果您从 Google 的服务器加载 jQuery，您将获得一个没有 noConflict 麻烦的版本。

不过，您仍然可以让 WordPress 处理脚本的实际包含，例如在 functions.php 中使用类似这样的内容：

```
function fix_noconflict() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery' , 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js' );
}
add_action( 'wp_enqueue_scripts' , 'fix_noconflict' ); 
```

# bitmap - GNUPLOT 每个直方图条都有不同的颜色

> ID：11664797
> 
> 赞同：10
> 
> 时间：2012-07-26T07:54:45.153
> 
> 标签：bitmap, gnuplot, histogram

我想可视化位图文件的不同颜色的数量。

我的数据表如下所示：

```
1 163073164
4 185122087
3 255242000
8 255255255
3 000162232
1 181230029
1 127127127
1 136000021
3 200191231 
```

我想使用 gnu plot histogram 样式以自己的颜色绘制每个颜色条。

我只是通过使用“lc变量”来尝试一些东西，但它不起作用。:-(

我现在的 GNUPLOT 脚本：

```
set style data histograms 
set boxwidth 1
set grid
set style histogram cluster gap 0  
set style fill solid 1.0 border -1
set yrange [0:*]
set xrange [0:*]
set xtics border in scale 0,10  nomirror rotate by -45  offset character 0, 0, 0 left
plot "histo.dat" using 1:xticlabels(2) lc variable no title
#EOF 
```

我收到此错误消息：

```
gnuplot> plot "histo.dat" using 1:xticlabels(2) lc variable no title
                                              ^
         "histo.plt", line 9: Bad data on line 1 
```

任何人都可以给我一个提示或正确的命令吗？

最好的问候罗伯特

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T12:46:34.197

好问题。我已经设法使用与您最初使用的`boxes`样式相反的样式使其工作。`histogram`我不认为这应该有太大的不同：

```
set boxwidth 1
set grid
set style fill solid 1.0 border -1
set yrange [0:*]
set xrange [-.5:*]
set xtics border in scale 0,10  nomirror rotate by -45  
plot "histo.dat" using ($0):1:($0):xticlabels(2) w boxes lc variable notitle
                        #^boxes centered on 0,1,2,3,....
                           #^data column
                              #^ linecolor column.  first box has linecolor corresponding to ls 0, second box has linecolor corresponding to ls 1, etc ...
                                   #^ xticlabels (apparently) come last. 
```

如果您不熟悉伪列 0，它（本质上）是数据文件中的行号。我通常不发布这些东西的输出，但这会产生一个非常丰富多彩的情节！

![彩色条形图](../Images/57baf9c385cb9cace8627fc02048702f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:44:01.570

我只是编辑了一些东西，现在它可以工作了。

```
set boxwidth 1
set grid
set style fill solid 1.0 border -1
set yrange [0:*]
set xrange [-.5:*]
set xtics border in scale 0,10  nomirror rotate by -45 left
plot "histo.dat" using ($0):1:($2):xticlabels(3) w boxes lc rgb variable notitle
                        #^boxes centered on 0,1,2,3,....
                           #^data column
                              #^ linecolor column.  first box has linecolor corresponding to ls 0, second box has linecolor corresponding to ls 1, etc ...
                                   #^ xticlabels (apparently) come last. 
```

# css - 需要在 css 中创建带有三角形的容器

> ID：11664798
> 
> 赞同：0
> 
> 时间：2012-07-26T07:54:51.110
> 
> 标签：css

![设计元素](../Images/cea4ab967b0a46944b519b5dbe72c5b3.png)
我有这样的设计元素。如何在页面上创建它？我的第一个猜测是创建三角形图像并将其添加到我的元素的右侧，如下所示：

```
.profile-menu :hover
{
    background-color: #50BBFF;
    background-image: url("/Images/menu-triangle.png") ;
    background-position: right center; 
    background-repeat: no-repeat; 
    background-position: 145px 15px;
} 
```

但是这里的问题是三角形在通过元素的边界后隐藏了。z-index 在这里没有帮助。我知道肯定有几种方法可以实现这一目标，但找不到一种。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:08:29.107

首先，你可以看看[http://cssarrowplease.com/](http://cssarrowplease.com/) 你永远不能让背景图片超出包含它的 div，所以为什么不把整个按钮制作成一张图片，包括蓝色框和三角形?

或者，如果您绝对想要两个对象，则可以将它们包裹起来。

```
<div>
    <div class="blue-box"></div>
    <div class="triangle"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:13:38.797

实际上，您可以使用 CSS3 的多个背景图像仅使用背景图像来做到这一点。

我昨天举了一个例子，你可以在这里看到。如果您知道盒子的尺寸，则可以使用此方法。

[http://jsfiddle.net/spacebeers/T8Yzj/39/](http://jsfiddle.net/spacebeers/T8Yzj/39/)

```
.box3 {
    z-index: 100;
    border: none;
    padding: 10px 0 30px 0;    
    background-image: url("http://test.mark-design.co.uk/4ik4e7ic.png"), url('http://test.mark-design.co.uk/line.png');
    background-position: 50% -1px, left top;
    background-repeat: no-repeat, repeat-x;
} 
```

**编辑：**

你也可以在没有任何图像的情况下做你想做的事 - [http://jsfiddle.net/spacebeers/T8Yzj/55/](http://jsfiddle.net/spacebeers/T8Yzj/55/)

```
.box2 {
    width: 100px;
    height: 50px;
    background: red;
    color: white;
    position:relative
}

.box2:after {
    content: "";
    position:absolute;
    width: 0;
    height: 0;
    bottom: 25%;
    left:100px;
    border-left: 10px solid #000;
    border-right: 10px solid transparent;   
    border-bottom: 10px solid transparent;    
    border-top: 10px solid transparent;
} 
```

# c# - 这个 lambda 变量怎么可能为空？

> ID：11664800
> 
> 赞同：0
> 
> 时间：2012-07-26T07:54:56.950
> 
> 标签：c#, linq, list, where, nullreferenceexception

有一个从另一个线程写入的项目列表。

项目被同步删除。我在删除部分有以下 lambda

```
var deleteList = this.Items.Where(d => d.Id == guid).ToList(); 
```

有时，我会得到 d 的 NullReferenceException。

我怎样才能了解更多信息？

**有关上下文的更多信息**

删除或添加时，我有一个简单的锁 lock(myLock) 在添加部分，我已经检查了项目是否为空（if (item != null) ）

在 where 子句中有一个简单的 (d != null) 不会阻止项目首先变为 null。在我看来，该列表应该已经处于“适当的状态”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:57:20.067

线程与否，引用中的引用始终可以为空。如果要从同一个列表中删除项目，则需要先锁定项目（或集合），然后再对其进行处理。

没有多线程：

```
var deleteList = this.Items.Where(d => d != null && d.Id == guid).ToList(); 
```

像这样锁定集合（请注意，有多种方法可以做到这一点）：

```
lock(this.Items)
{
    var deleteList = this.Items.Where(d => d != null && d.Id == guid).ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:00:22.860

尝试添加检查以查看 d 是否为空

```
d => d != null && d.Id.Equals(guid) 
```

# objective-c - 基于视图的 NSTableview 的奇怪行为（跳行）

> ID：11664802
> 
> 赞同：0
> 
> 时间：2012-07-26T07:55:15.247
> 
> 标签：objective-c, cocoa, nstableview

我正在尝试在 Cocoa 中创建一个基于单列视图的 NSTableview。我希望表的第一行是一个组行，并且我将 NSTableRowView 子类化以创建一个透明的组行。到目前为止，一切都很好。然后我希望第二行是一个包含一些内容的自定义单元格。第三行应该再次成为组行（表示新部分的开始）。

这是我的 tableview 的委托方法的代码：

```
- (BOOL)tableView:(NSTableView *)tableView isGroupRow:(NSInteger)row 
{
    if ((row == 0) || (row == 2)) return YES;
    return NO;
}

- (NSTableRowView *)tableView:(NSTableView *)tableView rowViewForRow:(NSInteger)row
{
    TransparentGroupRowView *rowView = [[TransparentGroupRowView alloc] initWithFrame:NSMakeRect(0, 0, 100, 100)];
    return rowView;    
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
{
    if (row == 0) {
        NSTableCellView *cellView = [tableView makeViewWithIdentifier:@"headerCell" owner:self];
        cellView.textField.stringValue = @"Propagation Dimension";
        return cellView;
    } else if (row == 1) {
        NSTableCellView *cellView = [tableView makeViewWithIdentifier:@"propagationDimensionCell" owner:self];
        if (self.geometry.propagationDimension) cellView.textField.stringValue = self.geometry.propagationDimension;
        return cellView;
    } else if (row == 2) {
        NSTableCellView *cellView = [tableView makeViewWithIdentifier:@"headerCell" owner:self];
        cellView.textField.stringValue = @"Transverse Dimensions";
        return cellView;
    }
} 
```

不幸的是，结果是第一行绘制在第二行之上。而不是第一行，我得到一个空白空间。这是一个更奇怪的行为。如果我为第一行的方法 isGroupRow 返回 NO，它会显示在正确的位置，但显然它看起来与我想要的不同。

在我看来，这几乎是一个指针问题，但我看不出问题出在哪里。

![如您所见，横向尺寸以透明背景正确显示。 传播维度被绘制在第二行（灰色）的顶部。 顶部的空白区域是第一组行（传播维度）应该在的位置。](../Images/d0eff0115a10aed7f0ec411b35804ebb.png)

如您所见，横向尺寸以透明背景正确显示。传播维度被绘制在第二行（灰色）的顶部。顶部的空白区域是第一组行（传播维度）应该在的位置。

# telerik-mvc - 使用局部视图搜索 Telerik MVC 2.0 Grid

> ID：11664804
> 
> 赞同：0
> 
> 时间：2012-07-26T07:55:16.073
> 
> 标签：telerik-mvc

我想搜索 Telerik MVC 2.0 GridView 我有一个“*索引*”视图，首先在该视图上呈现一个网格，然后单击“*显示历史*”`Ajax.ActionLink`打开一个 PartialView“ *SearchGrid* ”。

在此视图中，有 2 个 Telerik MVC DatePickers 和一个提交按钮。单击提交按钮时，会将 DatePicker 值发送回 UploadFiles 控制器的 `SearchByDates( DateTime? frmDate,DateTime? toDate)`操作。

在此操作中，我使用 WorkerService 类和 Services 类从 DB获取 UpdateDates 之间的更新记录，**即** *frmDate 和 toDate值。*

到目前为止一切正常，但我的问题是 Ajax ，在 UploadFilesViewModel 的 GetUploadDescriptor 与 UploadFilesGrid 绑定后，再次调用 SearchByDates action ，再次调用 JS 代码上的 url.Action 并且不传递参数。最初调用此操作时，FormCollection 不包含任何内容，但下一次进行新调用时，FormCollection 值包含 frmDate,toDate。

最后显示一个空的 Grid。我不知道我做错了什么..

源代码 ：-

```
 My GridView:-
<div id="result">
   <div>
      <%: Ajax.ActionLink ( "Show History", "SearchGrid", null, new AjaxOptions { HttpMethod = "Get",  InsertionMode = InsertionMode.Replace, UpdateTargetId = "renderForm", OnSuccess = "updateTarget" }, new { @class = "t-button" } )%>
    </div>
  <div id="di">
   <% Html.Telerik().Grid<UploadedFilesDescriptor>()
         .Name("UploadedFilesGrid")
       .DataKeys(datakeys => datakeys.Add(m => m.Id))
      .ClientEvents ( events => events.OnDataBound ( "rebindFileListGrid" ) )

        columns.Bound(c => c.UploadedDate)
                .HtmlAttributes(new { @style = "text-align:center;" })
                .Width(100);                   
           })
            .DataBinding(databinding => databinding
                                 .Ajax()
                                 .Select("GetUploadedFilesList",     "UploadFiles"))
                                  .EnableCustomBinding ( true )                
                      .Render();
                     %>
                   </div>
             </div>

 : My SearchGrid PartialView :-

 <% using (Ajax.BeginForm( "SearchByDates","UploadFiles",new AjaxOptions{UpdateTargetId ="divUploadGrid",LoadingElementId = "LoadingImage"},new {@id= "itemForm"}))
{ %>
      //Two Telerik MVC DatePickers named "frmDate" and " toDate"
  <input type="submit" id="ProfileSearchSubmit" name="ProfileSearchSubmit" onclick="aClick();" value="Search" /> 

  <div id="divUploadFileGrid">
   --I am again Rendering the Serached Grid with same model, columns 
  </div> 

    //my Javascript Jquery Ajax Function 
        function aClick() {
         debugger;
          var to = $('#toDate').val().toString();
         var frm = $('#frmDate').val().toString();
         var params = "frmDate=" + frm + "&toDate=" + to;
        if (params != null) {
           $.ajax({
              url: '<%= Url.Action("SearchByDates","UploadFiles") %>'+"?"+params,
              cache: false,               
             success: function (html) {
             $("#divUploadGrid").show();
               },                
             complete: function () {
              $("#LoadingImage").css("display", "none");
             $("#divUploadGrid").css("display", "block");
              $("#result").hide();
                }
              });
           }
            };

    :- Controller Action :-
      public ActionResult SearchByDates( DateTime? frmDate, DateTime?  toDate,FormCollection colletion)
           {
           try
             {
                DateTime? fromDate = frmDate.Value;
                DateTime? toDates = toDate.Value;
               UploadedFilesViewModel model = new UploadedFilesViewModel ( );
               model.GetUploadFileDescriptor = _workerService.GetUploadGridByDates(fromDate, toDates );
               return PartialView ( "SearchGrid", model );                   
            }
          catch (Exception ex)
           {
             throw ex;
           }
         return null;
         }

     :- GridAction to bind records in GridView
              public ActionResult GetUploadedFilesList ( DateTime? frmDate, DateTime? toDate )
            {        
                try
                {
                if (Request.IsAjaxRequest()&& frmDate==null&&toDate==null)
                    {
                    return View ( new GridModel ( _workerService.GetUploadedFilesList ( ) ) );
                    }
                else
                    {
                    return View ( new GridModel ( _workerService.GetUploadGridByDates ( frmDate, toDate ) ) ); 
                    }
                }
                catch (Exception ex)
                {
                    bool reThrow = ExceptionPolicyWrapper.HandleException(ex, ExceptionPolicies.MVCPolicy);
                    if (reThrow)
                        throw;
                }
                return null;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:43:00.317

您不应在提交按钮上定义 onclick 事件处理程序。Ajax.BeginForm 构造通过您的 DatePickers 的值自行发出 ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:36:02.230

您同时收到 2 个请求：

*   通过 Ajax.BeginForm；

*   通过定义 onclick="aClick();" 提交按钮中的属性（“aClick”函数在其主体内触发另一个 ajax 请求）。

我建议您从提交按钮中删除 onclick 属性。如果您需要在提交 ajax 表单之前运行 javascript 路由，您可以定义 AjaxOptions.OnBegin 选项：

新的 AjaxOptions{ ..., OnBegin="onBegin" }

```
function onBegin(e){
  ...
} 
```

在此函数中，您可以执行以下操作：

*   更改请求的正文值；
*   通过返回 false 值取消提交。

如果您的 DatePicker 控件位于 <% 内部，则使用 (Ajax.BeginForm("SearchByDates","UploadFiles".. 构造这些都是所需的更改。否则，您需要以这种方式定义 onBegin 函数：

```
function onBegin(e){

var to = $('#toDate').val();
var frm = $('#frmDate').val();

var req = e.get_request();
var req_body = req.get_body();
req_body += "&frmDate=" + frm + "&toDate=" + to;

req.set_body(req_body);

return true;
} 
```

这可以确保您的 DatePickers 值也被提交。

# xcode - 是否可以将 xcode 项目从一台 mac 复制到另一台 mac？

> ID：11664807
> 
> 赞同：1
> 
> 时间：2012-07-26T07:55:28.613
> 
> 标签：xcode, macos

我正在开发 iphone 应用程序，使用 xcode 4.2 现在我已经在另一台计算机上安装了 mac，在那台计算机上我已经安装了 xcode 4.3.3。现在我需要将开发的 xcode 应用程序从我的 xcode 4.2 mac 计算机移动或复制到 xcode 4.3.3 mac 计算机。可以这样做吗？

我做了以下两个步骤：

1.  压缩并从 xcode 4.2 mac 计算机发送邮件，然后从 xcode 4.3.3 mac 计算机下载。
2.  我只是将项目复制到笔式驱动器并粘贴到另一台计算机上。

有没有其他方法可以从一台 mac 计算机复制或移动到另一台计算机？请指导我，我正在尝试过去一周。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:12:32.240

是的，您可以这样做，但需要考虑一些事项。首先，请，请，请使用源代码管理。如果您想要 Xcode 内置支持的简单内容，请使用易于设置的[Subversion 。](http://subversion.apache.org/)如果你想要更强大的东西（我怀疑你现在还不会），那么就有 Git。一旦你设置了版本控制，你就不需要复制或通过电子邮件发送任何东西——你只需将更改从一台机器“提交”到存储库，然后在另一台机器上“签出”源代码。如果您在另一台机器上进行了任何更改，那么您也可以将其签入，然后在第一台机器上“更新”以接收该更改。

至于 Xcode，您可以在另一台机器上使用相同的项目文件，甚至可以使用不同版本的 Xcode。您必须确保项目中文件的路径是相对的而不是绝对的。如果路径是绝对的，那么这意味着它不太可能在另一台机器上构建，除非路径相同。较新版本的 Xcode 将其作为默认行为要好得多。

如果有任何文件具有绝对路径，您可以通过在 Project Navigator 中选择文件然后在右侧显示 Utilities 面板来更改它。在“身份和类型”组中有一个位置设置，您可以将其设置为绝对或相对。

# php - 仅服务器上的 HTML 特殊字符问题，在本地没问题

> ID：11664809
> 
> 赞同：0
> 
> 时间：2012-07-26T07:55:41.517
> 
> 标签：php, html, apache, character-encoding

我的`<meta charset="utf-8">`

而且我在网络服务器（生产）上只有我的本地服务器（[Wamp](http://www.wampserver.com/en/)）上有特殊的字符问题 html 内容，这很好

例如，这`India’s`在本地看起来不错，但在服务器上看起来像这样`Indiaâ€™s`

而且我有很多用于大型网站的 html 内容。如果我要手动修复每个字符，这将需要时间，而且我在本地看不到这个问题，所以每次我需要修复并上传到服务器以检查问题是否已解决

**我的问题**

*   如何使我的本地服务器能够显示带有字符问题的 html`Indiaâ€™s`
*   有没有办法自动解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:07:19.857

这也可能是您的 Web 服务器的默认字符集配置的问题。如果你使用 apache put

```
AddDefaultCharset UTF-8 
```

在根目录的 .htaccess 文件中。

[http://www.askapache.com/htaccess/setting-charset-in-htaccess.html](http://www.askapache.com/htaccess/setting-charset-in-htaccess.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:00:03.603

保存文件时需要将页面编码为 UTF-8 格式（不仅仅是添加到元）

# php - Jquery只计算字符串中的数字

> ID：11664818
> 
> 赞同：6
> 
> 时间：2012-07-26T07:56:21.587
> 
> 标签：php, javascript, jquery

我的问题是：我如何才能只计算字符串中的数字，例如，如果我有：(55)-555-34 以获得输出 7，我的意思是排除破折号和括号。干杯!

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T07:57:42.220

您可以将[.match()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)与`/\d/g` *正则表达式*一起使用：

```
"(55)-555-34".match(/\d/g).length
//result=>7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T08:08:58.017

用 删除所有非数字[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)，并得到结果字符串的长度：

```
str.replace(/\D/g,"").length 
```

与应用程序相比，这具有[`match`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)您不需要检查`null`结果（以防找不到匹配项）的优势。

# xml - 使用 unix 脚本/命令将 xml 文件中的值提取为字段分隔符格式

> ID：11664831
> 
> 赞同：0
> 
> 时间：2012-07-26T07:57:07.087
> 
> 标签：xml, shell, unix, xml-parsing

这是示例文件，我们需要将值转换为分隔符格式的文件：-

测试.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
 <testjar>

 <testable>
 <trigger>Trigger1</trigger>
 <message>2012-06-14T00:03.54</message>
 <sales-info>
 <san-a>no</san-a>
 <san-b>no</san-b>
 <san-c>no</san-c>
 </sales-info>
 </testable>

  <testable>
  <trigger>Trigger2</trigger>
  <message>2012-06-15T00:03.54</message>
  <sales-info>
  <san-a>yes</san-a>
  <san-b>yes</san-b>
  <san-c>no</san-c>
  </sales-info>
 </testable>

 </testjar> 
```

每条记录都应从新行开始。示例结果集应该是这样的 sample.txt

```
Trigger1|2012-06-14T00:03.54|no|no|no  
Trigger2|2012-06-15T00:03.54|yes|yes|no 
```

注意：- xmlstarlet 没有安装在我的服务器上，是否可以在没有 xmlstarlet 的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:41:08.450

这是一个纯粹的 bash 解决方案：

```
egrep '<trigger>|<message>|<san-.>' test.xml | sed -e 's/<[^>]*>//g' | while read line; do [ $((++i % 5)) -ne 0 ] && echo -n "$line|" || echo $line ; done 
```

但是，它仅适用于您的示例中格式化的文件（每个元素位于单独的行中），它​​甚至不如涉及正确 XML 解析/转换的其他答案那样灵活/可靠。

虽然可以在一定程度上增强...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:56:42.190

如果您安装了[xmlstarlet](http://xmlstar.sourceforge.net/)，您可以尝试：

```
me@home$ xmlstarlet sel -t -m "//testable" -v trigger -o "|" -v message -o "|" -m sales-info -v san-a -o "|" -v san-b -o "|" -v san-c -n test.xml
Trigger1|2012-06-14T00:03.54|no|no|no
Trigger2|2012-06-15T00:03.54|yes|yes|no 
```

命令分解：

```
xmlstarlet sel -t 
    -m "//testable"       # match <testable>
      -v trigger -o "|"     # print out value of <trigger> followed by |
      -v message -o "|"     # print out value of <message> followed by | 
      -m sales-info         # match <sales-info>
        -v san-a -o "|"       # print out value of <san-a> followed by |
        -v san-b -o "|"       # print out value of <san-b> followed by | 
        -v san-c              # print out value of <san-c>
    -n                   # print new line
    test.xml             # INPUT XML FILE 
```

要定位在 内变化的标签`<testable>`，您可以尝试以下返回所有叶节点的文本：

```
ma@home$ xmlstarlet sel -t -m "//testable" -m "descendant::*[not(*)]" -v 'text()' -i 'not(position()=last())' -o '|' -b -b -n test.xml 
Trigger1|2012-06-14T00:03.54|no|no|no
Trigger2|2012-06-15T00:03.54|yes|yes|no 
```

命令的Beakdown：

```
xmlstarlet sel -t 
    -m "//testable"                         # match <testable>
      -m "descendant::*[not(*)]"              # match all leaf nodes
        -v 'text()'                             # print text
        -i 'not(position()=last())' -o '|'      # print | if not last item
        -b -b                                   # break out of nested matches
    -n                                      # print new line
    test.xml                                # INPUT XML FILE 
```

* * *

如果您无法访问`xmlstarlet`，请查看您可以使用的其他工具。其他选项包括 xsltproc （请参阅[mzjn 的答案](https://stackoverflow.com/questions/11664831/extracting-values-from-xml-file-into-field-delimiter-format-using-unix-script-co/11665754#11665754)）和[xpath](http://pwet.fr/man/linux/commandes/p/xpath)。

如果这些工具不可用，我建议使用更高级的语言（Python、Perl），它可以让您访问适当的 XML 库。

虽然可以使用 手动解析它`regex`，但这样的解决方案并不理想^(^([†](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)))特别是在输入不一致的情况下。例如，以下（假设你有`gawk`and `sed`）接受你的输入，并应该输出预期的输出：

```
me@home$ gawk 'match($0, />(.*)</, a){printf("%s|",a[1])} /<\/testable>/{print ""}' test.xml | sed 's/.$//'
Trigger1|2012-06-14T00:03.54|no|no|no
Trigger2|2012-06-15T00:03.54|yes|yes|no 
```

但是，如果输入格式发生变化，这将非常失败，因此**不是我通常推荐的解决方案**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:56:50.350

这是一个 XSLT 样式表，可以满足您的需求（保存在 test.xsl 中）：

```
<?xml version='1.0'?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0">

<xsl:output method="text"/>
<xsl:strip-space elements="*"/>

 <xsl:template match="testable">
   <xsl:value-of select='trigger'/><xsl:text>|</xsl:text>
   <xsl:value-of select='message'/><xsl:text>|</xsl:text>
   <xsl:value-of select='sales-info/san-a'/><xsl:text>|</xsl:text>
   <xsl:value-of select='sales-info/san-b'/><xsl:text>|</xsl:text>
   <xsl:value-of select='sales-info/san-c'/><xsl:text>&#xA;</xsl:text>
 </xsl:template>

</xsl:stylesheet> 
```

命令（这里我假设你已经安装了 libxml2 和 libxslt；[xsltproc](http://xmlsoft.org/xslt/xsltproc2.html)是一个使用这些库的命令行工具）：

```
xsltproc -o sample.txt test.xsl test.xml 
```

sample.txt的内容：

```
Trigger1|2012-06-14T00:03.54|no|no|no
Trigger2|2012-06-15T00:03.54|yes|yes|no 
```

# designer - 获取框架集名称

> ID：11664834
> 
> 赞同：0
> 
> 时间：2012-07-26T07:57:29.630
> 
> 标签：designer, formula, lotus-domino, lotus

我在框架的页面上有一个计算字段，我需要该字段根据框架集名称更改值。或者，如果有其他方法可以做到这一点，那也很好。

谢谢你，我很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:19:39.883

由于您没有提供足够的详细信息，因此很难回答。我断言它是一个 Web 应用程序：您有一个显示在框架（框架或 iframe？）中的表单，客户端您应该执行以下操作： [如何从 javascript 访问父 iframe](https://stackoverflow.com/questions/935127/how-to-access-parent-iframe-from-javascript) 或[无法访问另一个框架的内容在 Chrome](https://stackoverflow.com/questions/5777289/cant-access-content-of-another-frame-in-chrome) 然后，如果您需要*根据*框架集显示：在隐藏字段中放入*不同*的选项。根据您在客户端获得的值动态显示。

# ruby - Mountain Lion rvm 安装 1.8.7 x11 错误

> ID：11664835
> 
> 赞同：60
> 
> 时间：2012-07-26T07:57:31.160
> 
> 标签：ruby, rvm, x11, osx-mountain-lion

更新到 Mountain Lion 后，我尝试安装 1.8.7，但出现错误。X11 文件未找到，我安装了 Xquarkz，但没有任何改变。怎么了？

```
Fail to find [tclConfig.sh, tkConfig.sh]
Use MacOS X Frameworks.

Find Tcl/Tk libraries. Make tcltklib.so which is required by Ruby/Tk.
clang -I. -I../.. -I../../. -I../.././ext/tk -DHAVE_RB_SAFE_LEVEL -DHAVE_RB_HASH_LOOKUP -DHAVE_RB_PROC_NEW -DHAVE_RB_OBJ_TAINT -DHAVE_ST_PTR -DHAVE_ST_LEN -DRUBY_VERSION=\"1.8.7\" -DRUBY_RELEASE_DATE=\"2012-06-29\"  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -DWITH_TCL_ENABLE_THREAD=0 -fno-common -g -O2  -fno-common -pipe -fno-common   -c stubs.c
In file included from stubs.c:10:
/usr/include/tk.h:78:11: fatal error: 'X11/Xlib.h' file not found
#       include <X11/Xlib.h>
                ^
1 error generated.
make[1]: *** [stubs.o] Error 1
make: *** [all] Error 1 
```

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-07-26T09:12:37.697

尝试通过[http://xquartz.macosforge.org/landing/](http://xquartz.macosforge.org/landing/)安装 X11为编译器设置 X11 库的正确路径：

```
export CPPFLAGS=-I/opt/X11/include 
```

然后尝试重新安装 ruby​​，传递给 gcc-4.2 所在的编译器：

```
CC=/usr/local/bin/gcc-4.2 rvm reinstall 1.8.7 
```

没有`CC`我有很多分段错误。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-09T17:09:28.543

我设法在 OSX 10.8.2 上毫无问题地进行了以下操作：

```
rvm install 1.8.7 --with-gcc=clang --without-tcl --without-tk 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-03T04:17:59.140

如果您不需要 tcl 或 tk 并且正在使用 rbenv，这应该可以工作：

```
brew install https://raw.github.com/Homebrew/homebrew-dupes/master/apple-gcc42.rb

CC=/usr/local/bin/gcc-4.2 CONFIGURE_OPTS="--without-tcl --without-tk" rbenv install 1.8.7-p358 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-09T07:10:49.620

即使在 X11 修复之后，我也收到了这个编译错误。

```
compiling stubs.c
In file included from stubs.c:16:
/usr/include/tk.h:23:3: error: #error Tk 8.5 must be compiled with tcl.h from Tcl 8.5
make[2]: *** [stubs.o] Error 1
make[1]: *** [ext/tk/all] Error 2
make: *** [build-ext] Error 2 
```

经过多次挠头后，我在 make 输出中注意到了这一行。

```
Use ActiveTcl libraries (if available). 
```

原来我几年前安装了 ActiveTcl 8.4，但它从 /usr/include 获取 tk.h，它是 8.5 版。

我不知道如何安全地卸载 ActiveTcl 并且[ActiveTcl 卸载说明不正确](http://docs.activestate.com/activetcl/8.5/at.install.html#uninstall)，但我确实安装了 ActiveTcl 8.5 并且解决了这个问题。 [ActiveTcl](http://www.activestate.com/activetcl/downloads)在这里下载。

令人沮丧。无论如何，希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T22:19:18.737

这是我的 .rvmrc 引导文件，希望对您有所帮助：

```
if (uname -a | grep '12.0.0 Darwin' >/dev/null); then
    CC=/usr/local/bin/gcc-4.2 CPPFLAGS=-I/opt/X11/include rvm --install --create --disable-tcl --disable-tk use ree@gemset_name
else
    rvm --install --create --disable-tcl --disable-tk use ree@gemset_name
fi

if ! which bundle >/dev/null; then
    gem install bundler --pre --no-ri --no-rdoc && bundle install
fi

if ! bundle check >/dev/null; then
    bundle install
fi 
```

# asp.net - 在c#中从给定的日期时间中找到最大的日期时间

> ID：11664837
> 
> 赞同：0
> 
> 时间：2012-07-26T07:57:40.817
> 
> 标签：asp.net, c#-4.0

我将关联生产和非生产详细信息的信息存储在数据库（SQL Server）中。我的任务是，如果它们是当前日期的数据库中的任何记录（在生产表或非生产表或两者中），请获取两个表中的任务提交时间。到目前为止，我已经完成了。

```
if ((_timeEntryId > 0) || (_timeEntryIDNonProduction > 0))
{
    if (_timeEntryId > 0)
    {
        DateTime lastProductiontaskTIme = _production.GetLastTaskTime(Convert.ToInt32(_timeEntryId));
    }

    if (_timeEntryIDNonProduction > 0)
    {
        DateTime lastNonProductionTime= _nonProduction.GetLastTaskTime(Convert.ToInt32(_timeEntryId));
    }
} 
```

现在我的要求是从 lastProductiontaskTIme 和 lastNonProductionTime 中识别最大的 DateTime（最新）。我如何从两者中找到最新的。请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:23:04.817

您也可以使用数学：

```
lastTime = new DateTime(Math.Max(lastProductiontaskTime.Ticks, lastNonProductionTime.Ticks)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:00:32.443

```
DateTime lastTime;
if ((_timeEntryId > 0) || (_timeEntryIDNonProduction > 0))
{
    DateTime lastProductiontaskTime;
    if (_timeEntryId > 0)
    {
        lastProductiontaskTime = _production.GetLastTaskTime(Convert.ToInt32(_timeEntryId));
    }
    DateTime lastNonProductionTime;
    if (_timeEntryIDNonProduction > 0)
    {
        lastNonProductionTime = _nonProduction.GetLastTaskTime(Convert.ToInt32(_timeEntryId));
    }
    lastTime = lastProductiontaskTime > lastNonProductionTime  ? lastProductiontaskTime  : lastNonProductionTime;
} 
```

这将获得两者中的最高值。`DateTime`结构可以像整数一样进行比较，最高值在时间上较晚。

# algorithm - 给定 zig zag 排列的字典序最小排列

> ID：11664838
> 
> 赞同：2
> 
> 时间：2012-07-26T07:57:41.563
> 
> 标签：algorithm, complexity-theory, permutation

这是我正在研究的一个问题。我尝试了很多，但没有比 O(n^2) 更好。

```
 You are given a set of numbers from 1 to K.And you need to find 
 the minimum possible lexicographical set of numbers with following
 constraints.You are given K numbers of sets of Yes 'Y' or NO 'N' from
 1 to K.And the swap is only possible if the value is 'Y'.Sorry for my
 poor English.Hope this example helps get you the problem. 
 NOTE: 1 < K < 101
 Take an example:
 K=3
Given set of numbers is :  3 1 2
                           N N Y
                           N N N
                           Y N N
     Here you can swap j and i+2 element since the value is Y.

Thus,the output would be   2 1 3 
```

有人可以建议我比这更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:26:50.393

只需考虑由可交换元素给出的矩阵。我认为可以公平地假设如果 arr[i][j] 表示表示 i 是否可以与 j 交换的元素，那么

```
arr[i][j] = arr[j][i] ; for all i, j pairs 
```

此外，如果*i*可以与*j*交换并且*j*可以与*k*交换，则可以通过*j将**i*与*k*交换。

 *使用这些信息，我们可以看到，如果我们可以构造一组索引，使得对于集合中的每个元素*i*，至少存在一个可以与之交换的元素*j* ，那么我们可以简单地将这些索引处的值排列在排序顺序，这将是这些索引可能的字典最小排列。如果我们继续考虑所有这样的集合，那么我们最终会得到字典上最小的排列。

看待问题的另一种方法（而不是将这些视为不相交集的集合）是将其视为图形问题。如果每个索引是一个节点和两个索引之间的一条边（如果它们可以交换），那么我们需要找到不同的**强连通分量**（SCC）并对每个这样的分量中的元素进行排序。这很明显，如果您注意到强连接组件中的任何索引都不能与该组件之外的位置交换，因此我们可以对每个 SCC 本身进行排序并获得所需的结果。

[CodeSprint3](https://cs3.interviewstreet.com/challenges/dashboard/#problem/4f846fced75d3)中也提出了这个问题，我的解决方案是：-

```
#include <iostream>
#include <algorithm>
#include <set>
#include <queue>
#include <cstring>

using namespace std;

void sccSetInsertions (set<int>& indexSet, set<int>& valSet, const int& i, const int& val)
{
    indexSet.insert (i);
    valSet.insert(val);
}

void checkSCCMembers(const int& i, const int& k, int *arr, int *swaps, queue<int>& bfsQ,
                     set<int>& sccVals, set<int>& sccIndices, int *considered)
{
    for (int j = 0; j < k; j++)
    {
        if (swaps[j] == 1)
        {
            if (considered[j] == 0)
            {
                bfsQ.push(j);
                sccSetInsertions(sccIndices, sccVals, j, arr[j]);
                considered[j] = 1;
            }           
        }
    }
}

int main (void)
{
    int k, i, j;    
    cin >> k;   
    int arr[k];
    int swaps[k][k];

    for(i = 0; i < k; i++)
    {
        cin >> arr[i];
    }

    char c;    
    for(i = 0; i < k; i++)
    {
        for (j = 0; j < k; j++)
        {
            cin >> c; 
            swaps[i][j] = (c == 'Y');
        }   
    }

    set<int> sccIndices, sccVals;
    queue<int> bfsQ;        
    int considered[k], tmp;

    bzero (considered, sizeof(int) * k);

    for (i = 0; i < k; i++)
    {   
        if (considered[i] == 1)
            continue;
        else
        {

            sccSetInsertions(sccIndices, sccVals, i, arr[i]);
            considered[i] = 1;            
        }
        checkSCCMembers (i, k, arr, swaps[i], bfsQ, sccVals, sccIndices, considered);
        while (bfsQ.size() > 0)
        {
            tmp = bfsQ.front();
            bfsQ.pop();            
            checkSCCMembers(tmp, k, arr, swaps[tmp], bfsQ, sccVals, sccIndices, considered);
        }

        set<int>::iterator itVal = sccVals.begin(), itIndex = sccIndices.begin();
        for(; itIndex != sccIndices.end(); itIndex++, itVal++)
        {
            arr[*itIndex] = *itVal;        
        }
        sccIndices.clear();
        sccVals.clear();
    }

    for (i = 0; i < k; i++)
    {
        cout << arr[i];
        if (i != k - 1)
            cout << " ";
    }
    cout << endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:21:14.533

您可以使用任何排序算法。你只需要限制你的交换。因此，您可以使用 QuickSort、HeapSort 等`O(nlgn)`通过交换约束来处理复杂性。*

# forms - Zend 表单：验证失败后如何恢复正确的视图？

> ID：11664840
> 
> 赞同：0
> 
> 时间：2012-07-26T07:57:44.430
> 
> 标签：forms, validation, zend-framework

Zend 表单验证失败后重新显示视图时遇到问题。

我最初的行动看起来像

```
public function test1Action() {
    // get a form and pass it to the view
    $this->view->form = $this->getForm(); 

    // extra stuff I need to display 
    $this->view->name = "Bob";
} 
```

和视图

```
Hello <?= $this->name?>
<?php echo $this->form;?> 
```

当提交表单后调用的操作“test2”出现验证错误时，问题就出现了：

```
public function test2Action() {
    if (!$this->getRequest()->isPost()) {
        return $this->_forward('test1');
    }

    $form = $this->getForm();
    if (!$form->isValid($_POST)) {
        $this->view->form = $form;
        return $this->render('test1'); // go back to test1
    }
} 
```

实际上，变量“名称”丢失了，视图不正确。它不是说“Hello Bob”，而是说“Hello”。

我应该如何处理？我应该重定向到 test1 而不是再次渲染 test1 吗？如何 ？

**编辑**

根据 Coder 先生的回答，我得到了以下结果：

控制器：

```
 public function getForm() {
        // what is important is that the form goes to action test3 and not test4
        // SNIP form creation with a field username
        return $form;
    }

    public function test3Action()
    {
        $this->view->form = $this->getForm();
        $this->view->name = "Bob";

        if(!$this->getRequest()->isPost())return;

        if($this->view->form->isValid($_POST))
        {
            //save the data and redirect
            $values = $this->view->form->getValues();
            $username = $values["username"];

            $defaultSession = new Zend_Session_Namespace('asdf');
            $defaultSession->username = $username;

            $this->_helper->redirector('test4');
        }
    }

    public function test4Action()
    {
        $defaultSession = new Zend_Session_Namespace('asdf');
        $this->view->username = $defaultSession->username;
    } 
```

test3.phtml

```
Hello <?= $this->name?>
<?php echo $this->form;?> 
```

test4.phtml

```
success for <?php echo $this->username;?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:46:14.363

把你的鲍勃带回来做

```
public function test2Action() {
    if (!$this->getRequest()->isPost()) {
        return $this->_forward('test1');
    }

    $form = $this->getForm();
    if (!$form->isValid($_POST)) {
        $this->view->form = $form;
        $this->view->name = 'bob';        
        return $this->render('test1'); // go back to test1
    }
} 
```

但我会建议我处理表格的解决方案，类似于

```
public function test2Action()
{

   $this->view->form = new My_Form();

   if(!$this->getRequest()->isPost())return;   

  if($this->view->form->isValid())
   {
    //save the data and redirect 
       $this->_helper->redirector('success');
   }

  } 
```

在你的 test2.phtml 里面

```
<?php echo $this->form ?> 
```

}

这种方法使您免于创建多个操作来保存一个表单和手动更改视图。

# mysql - Mysql查询内连接

> ID：11664841
> 
> 赞同：0
> 
> 时间：2012-07-26T07:57:49.593
> 
> 标签：mysql

两张桌子

tblEatables 和 tblConfirm_Eatables

**餐桌**

```
斯诺名称  
1 苹果
2个橙子
3 木瓜
4 菠萝蜜
5 菠萝
6芒果

```

**tblConfirm_Eatables**

```
Eatbles_Id Confirm_Status
     1 0
     2 1
     3 0
     4 0

```

问题 1

为什么下面的查询会带来重复的记录集

```
SELECT E.Name         
FROM Eatables E INNER JOIN 
Confirm_Eatables CE ON CE.Eatbles_Id != E.Sno 
```

为什么尽管我使用了<>，但下面的查询会带来所有可食用的食物

```
SELECT E.Name         
FROM Eatables E INNER JOIN 
      Confirm_Eatables CE ON E.Sno != CE.Eatbles_Id
GROUP BY E.Name 
```

**OP**

```
姓名
苹果
菠萝蜜
芒果
橘子
番木瓜
菠萝

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:09:46.843

我想你想要的是：

```
SELECT a.Name
FROM tblEatables a
LEFT JOIN tblConfirm_Eatables b ON a.Sno = b.Eatables_Id
WHERE b.Eatables_Id IS NULL 
```

这将获得所有`tblEatables`不在的行`tblConfirm_Eatables`。

要更好地理解其工作原理，请参阅[**此链接**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)以获得在 SQL 中使用联接的良好视觉指南；特别是第四个，我们使用`LEFT JOIN`/`IS NULL`技术检索表 A 中与表 B 中不匹配的所有记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:08:10.467

页面顶部有不同 JOIN 的绝佳示例 [http://www.sql-tutorial.ru/en/book_explicit_join_operations/page1.html](http://www.sql-tutorial.ru/en/book_explicit_join_operations/page1.html)

对我来说，最好在连接查询中使用 = 并在它之后使用，除了。以你的方式：

```
 SELECT E.Name FROM Eatables 
                EXCEPT ALL
  SELECT E.Name FROM Eatables E INNER JOIN 
         Confirm_Eatables CE ON CE.Eatbles_Id = E.Sno 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:02:39.657

你应该在子句中使用这个`E.Sno != CE.Eatbles_Id`条件。`WHERE`

在连接中使用`!=`运算符会给您带来意想不到的结果。

# url - file_get_contents 使用直接键入的 url 而不是自动获取的 url

> ID：11664842
> 
> 赞同：0
> 
> 时间：2012-07-26T07:57:50.223
> 
> 标签：url, static, file-get-contents

**我对file_get_contents**有一个奇怪的情况。网络服务返回一个**url**，因此我使用该**url** **file_get_contents** () 从该 url 获取文件的内容。

就像是：

```
$url = $result_from_webservice->url;

if( file_get_contents( $url ) ){
    echo 'ok';
}
else{
    echo 'error';
} 
```

那段代码的结果是“**错误**”。

所以我尝试直接设置**$url** var。我已经显示了 url 结果

```
echo $result_from_webservice->url; 
```

从女巫那里我得到了这样的网址： [https ://site.com/page.php?foo1=bar1&foo2=bar2](https://site.com/page.php?foo1=bar1&foo2=bar2)

然后我使用了直接结果，例如：

```
$url = 'https://site.com/page.php?foo1=bar1&foo2=bar2'; 
```

和惊喜..有效（结果=“ok”）。

然后我尝试应用 urldecode，认为我的智能浏览器已尝试平滑页面内容。

```
$url = $result_from_webservice->url;
    $url = urldecode( $url ); 
```

但没有成功。

我允许 php 打印所有错误，没有错误，没有警告，没有通知。

有人知道这里发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:20:07.107

在使用之前尝试将 URL 转换为字符串：

```
$url = (string)$result_from_webservice->url; 
```

# android - Android 首选项数组

> ID：11664844
> 
> 赞同：0
> 
> 时间：2012-07-26T07:57:54.460
> 
> 标签：android, arrays, preferences

我正在编写一个简单的 android 应用程序，它需要存储 2 个孩子的详细信息，即姓名、年龄、玩具。我打算使用共享首选项来做到这一点。这是我的xml：

```
prefs.xml
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
  <PreferenceScreen android:title="Edit Child Details">
    <PreferenceScreen android:title="Edit Child 1 Details">
      <EditTextPreference android:title="Name" android:dialogTitle="Name of Child 1" android:key="name1" />
      <EditTextPreference android:title="Age" android:dialogTitle="Age of Child 1" android:key="age1" />
      <EditTextPreference android:title="Toy" android:dialogTitle="Toy of Child 1" android:key="toy1" />
    </PreferenceScreen>
    <PreferenceScreen android:title="Edit Child 2 Details">
      <EditTextPreference android:title="Name" android:dialogTitle="Name of Child 2" android:key="name2" />
      <EditTextPreference android:title="Age" android:dialogTitle="Age of Child 2" android:key="age2" />
      <EditTextPreference android:title="Toy" android:dialogTitle="Toy of Child 2" android:key="toy2" />
    </PreferenceScreen>
  <ListPreference android:entries="@array/child_array" android:entryValues="@array/child_array" android:key="child_selector" android:title="Select Child"/>
</PreferenceScreen>

strings.xml
<string-array name="child_array">
      <item >1</item>
      <item >2</item>   
</string-array> 
```

我知道这在 sqllite 数据库或本地存储中可能会更好，但它只是一个基本的应用程序，我仍然是初学者。

然后我在代码中尝试做的是查询 child_selector（即用户将选择孩子 1 或 2）首选项，然后我阅读了我的应用程序的相应孩子的详细信息。

不太确定这是否是做事的最佳方式，因此欢迎任何建议，因为我不确定如何参考孩子的详细信息。我有一些基本的 unix 脚本技能，我知道这不是一个数组，但不确定使用 ${string}[$number] 的 java 等价物是否可行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:04:11.867

我不确定您的问题是什么，但是如果您不需要首选项屏幕而只需要共享首选项，您也可以这样做。您可以像这样直接保存到共享首选项：

```
// Retrieve an editor to modify the shared preferences.
SharedPreferences.Editor editor = mySharedPreferences.edit();
// Store new primitive types in the shared preferences object.
editor.putBoolean("isTrue", true);
editor.putFloat("lastFloat", 1f);
editor.putInt("wholeNumber", 2);
editor.putLong("aNumber", 3l);
editor.putString("textEntryValue", "Not Empty");
// Commit the changes.
editor.commit(); 
```

希望对你有帮助

* * *

## **更新**

共享首选项是保存一些快速数据的最简单方法。或者，您也可以保存到文件中，但我不建议这样做。还有数据库……与共享偏好相比，它需要大量的代码行。

因此，如果只是为了快速测试，我会使用共享偏好。

如果您不需要在应用程序退出时保存数据，您也可以创建自己的子类列表。但是只有在您关闭应用程序之前数据才可用。

BR

# hadoop - HBase：运行 PerformanceEvaluation 时发生 PrivilegedActionException

> ID：11664849
> 
> 赞同：1
> 
> 时间：2012-07-26T07:58:36.280
> 
> 标签：hadoop, hbase, cloudera

我在 Hadoop 集群中安装了 HBase（版本 0.90.6-cdh3u4）。我想测试性能。但是我跑了

```
hbase org.apache.hadoop.hbase.PerformanceEvaluation sequenalWrite 2 
```

从运行 HMaster 的机器上，性能评估向 Hadoop 提交一个 map-reduce 作业。但这项工作因以下消息而失败：

> 2012-07-26 12:45:17,733 错误 org.apache.hadoop.security.UserGroupInformation：PriviledgedActionException as：root (auth:SIMPLE) 原因：org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException：失败 22193 操作：服务器问题：test-8:60020, 2012-07-26 12:45:17,734 WARN org.apache.hadoop.mapred.Child: Error running child org.apache.hadoop.hbase.client.RetriesExhaustedWithDetailsException: Failed 22193 actions: 服务器问题：test-8:60020，在 org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchOfPuts(HConnectionManager. java:1499) 在 org.apache.hadoop.hbase 的 org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:859)。PerformanceEvaluation$Test.testTakedown(PerformanceEvaluation.java:754) at org.apache.hadoop.hbase.PerformanceEvaluation$Test.test(PerformanceEvaluation.java:771) at org.apache.hadoop.hbase.PerformanceEvaluation.runOneClient(PerformanceEvaluation.java: 1098）在 org.apache.hadoop.hbase.PerformanceEvaluation$EvaluationMapTask.map(PerformanceEvaluation.java:400) 在 org.apache.hadoop.map(PerformanceEvaluation.java:447) .mapreduce.Mapper.run(Mapper.java:144) 在 org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:647) 在 org.apache.hadoop.mapred.MapTask.run(MapTask.java:323 ) 在 org.apache.hadoop.mapred.Child$4.run(Child.java:270) 在 java.security.AccessController.doPrivileged(Native Method) 在 javax.security.auth.Subject.doAs(Subject.java:396) 在 org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1177) 在 org.apache.hadoop.mapred.Child.main(Child.java:264) 2012-07-26 12:45 ：17,740 INFO org.apache.hadoop.mapred.Task：为任务运行清理

然后我尝试了其他一些 map-reduce 作业，它们都可以成功完成。所以我认为 Hadoop 本身运行良好。

此外，Hbase Shell 中的操作也可以。我可以创建表，放置一些数据......这个异常只在运行 PerformanceEvaluation 时发生。

谁能知道如何解决它？

# twitter-bootstrap - 使用 Bootstrap 进行 Google Prettify：行号不显示

> ID：11664850
> 
> 赞同：9
> 
> 时间：2012-07-26T07:58:40.597
> 
> 标签：twitter-bootstrap, prettify, google-code-prettify

我正在使用带有 Twitter Bootstrap 的 Google Prettify。它正在工作，但由于某种原因，行号没有出现。

这是标记：

```
<pre class="prettyprint linenums">
    <ol class="linenums">
        <li class="L0">
            <span class="kwd">public</span>
            <span class="pln"> </span>
            <span class="kwd">override</span>
            <span class="pln"> </span>
            <span class="kwd">void</span>
            <span class="pln"> </span>
            <span class="typ">Dispose</span>
            <span class="pun">()</span>
        </li>
        <li class="L1">
            <span class="pln"> </span>
            <span class="pun">{</span>
        </li>
        <li class="L2">
            <span class="pln"> </span>
            <span class="kwd">base</span>
            <span class="pun">.</span>
            <span class="typ">Dispose</span>
            <span class="pun">();</span>
        </li>
            <li class="L3">
            <span class="pln"> </span>
            <span class="pun">}</span>
        </li>
    </ol>
</pre> 
```

我这样称呼它：

```
<script type="text/javascript">
    $(document).ready(function () {
        prettyPrint();
    });
</script> 
```

我没有任何自定义 CSS .. 仅使用 Bootstrap CSS ..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T11:36:37.603

我建议您使用这两个文件：

[http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css](http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css)

[http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js](http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js)

并将其添加到您的页脚中：

```
<script>
  !function ($) {
    $(function(){
      window.prettyPrint && prettyPrint()   
    })
  }(window.jQuery)
</script> 
```

在[http://twitter.github.com/的](http://twitter.github.com/)[application.js](http://twitter.github.com/bootstrap/assets/js/application.js)中找到

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T01:17:48.303

确保你没有 list-style: none; CSS 文件中的任何位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T19:07:39.360

默认样式表的操作部分是

```
li.L0,
li.L1,
li.L2,
li.L3,
li.L5,
li.L6,
li.L7,
li.L8 { list-style-type: none } 
```

这会关闭索引为 i 的所有项目的列表项目符号，其中 (i % 10) ∉ (4,9)。

添加高优先级样式将覆盖 prettify.css 中的默认样式，因此您无需提出自己的主题。

```
<style>
li.L0,
li.L1,
li.L2,
li.L3,
li.L5,
li.L6,
li.L7,
li.L8 { list-style-type: decimal !important }
</style> 
```

应该这样做。

# android - 在多 Activity 应用程序中释放 MediaPlayer

> ID：11664852
> 
> 赞同：0
> 
> 时间：2012-07-26T07:58:47.180
> 
> 标签：android, android-mediaplayer

我正在设计一个游戏，它有多个`Activities`和一个`MediaPlayer`通过整个应用程序播放音乐的游戏。现在我的问题很简单：我什么时候发布`MediaPlayer`？我不能把电话放在任何`Activity`的，`onDestroy()`因为它会杀死`MediaPlayer`所有其他的`Activities`。任何解决方法？提前致谢。

# ruby-on-rails - 如果登录失败，则无法取消重定向（设计 gem）

> ID：11664866
> 
> 赞同：2
> 
> 时间：2012-07-26T08:00:14.083
> 
> 标签：ruby-on-rails, devise, overriding

我正在使用弹出注册（usign Bootstrap），如果用户无法登录，则需要取消重定向。

我尝试使用本教程 - [http://casperfabricius.com/site/2010/09/30/ajax-sign-in-and-sign-up-with-devise/](http://casperfabricius.com/site/2010/09/30/ajax-sign-in-and-sign-up-with-devise/)，但它失败了。

****我认为我的问题 - CustomFailure 类不会覆盖标准类。****

**我有会话控制器：**

 **```
 class SessionsController < Devise::SessionsController

 def sign_in_and_redirect(resource_or_scope, resource=nil)
   scope = Devise::Mapping.find_scope!(resource_or_scope)
   resource ||= resource_or_scope
   redirect_url = stored_location_for(scope)
   respond_to do |format|
   format.js do
    sign_in(scope, resource) unless warden.user(scope) == resource
    if redirect_url.present?
      redirect_url = "#{redirect_url}.js" unless redirect_url[-3..-1] == '.js'
      redirect_url += redirect_url.match(/\?/) ? '&' : '?'
      redirect_url += "after_authentication=true"
      redirect_to redirect_url
    else
      render(:update) do |page|
        page << render('/shared/after_authentication')
      end
    end
    end
    format.html { super }
   end
  end
 end 
```

在我的 routes.rb 中：

```
devise_for :users, :controllers => {:registrations => 'registrations', :sessions => 'sessions'} 
```

我在 lib 文件夹中创建 custom_failure.rb 文件：

```
 class CustomFailure < Devise::FailureApp
    # Never do http authentication through Devise
   def http_auth?
     false
    end
    def redirect_url
     send(:"new_#{scope}_session_path", :format => (request.xhr? ? 'js' : nil ))
    end
   end 
```

最后在我的 devise.rb 中：

```
 require 'custom_failure'
       config.warden do |manager|
         manager.failure_app = CustomFailure
       end 
```

添加到我的 application.rb"

```
 config.autoload_paths += %W(#{config.root}/lib) 
```

我做错了什么？是职位年龄问题还是失败课程问题？**

# php - 当从另一个下拉列表中选择一个选项时，将输入文本字段更改为下拉列表

> ID：11664867
> 
> 赞同：0
> 
> 时间：2012-07-26T08:00:19.110
> 
> 标签：php, drop-down-menu, populate

> **可能重复：**
> [第一个下拉菜单自动更改第二个下拉菜单的选项](https://stackoverflow.com/questions/11237900/first-drop-down-menu-to-auto-change-the-options-of-a-second-dropdown)

这是我的视图条目（搜索）页面。该页面显示一个输入字段和一个包含 ID、类别、标题的下拉列表。我的问题是当我选择类别选项时，输入字段必须更改为包含不同类别的下拉列表。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:02:35.663

阿贾克斯是你的答案。使用 jQuery 或纯 javascript Ajax 是您的选择。给你完整的代码是一个很大的问题。在 Google 上进行简单搜索将为您提供大量教程。我的建议 - 选择 jQuery + Ajax，因为它大大减少了工作量

更新：

创建一个 div 并给它一个 id `result`。将您的文本框（您想将其更改为下拉菜单）放入其中。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">

$(function(){

    $('select[name="put select tag name here"]').change(function(){

        var value = $(this).val();

        if(value == 'Category')
        {
            $.ajax({
                type:'post',
                url:'getCatgories.php',
                data:'cat='+value,
                success:function(data)
                {
                    $('div#result').html(data);
                }
            });
        }

    });

});

</script> 
```

在您的`getCategories.php`文件中，获取类别`$cat = $_POST['cat'];`，然后使用 $cat 从数据库中获取结果并将其填充到`select`标签中。

# visual-studio-2010 - 无法从 Visual Studio 2010 连接到共享点站点

> ID：11664868
> 
> 赞同：0
> 
> 时间：2012-07-26T08:00:20.233
> 
> 标签：visual-studio-2010, sharepoint-2010

我的桌面上有 SharePoint 2010 Foundation 和 Visual Studio 2010。SharePoint Server 2010 安装在服务器机器中的虚拟机中。我已将自己添加为 VM 管理员，将自己添加为场管理员，并为数据库所有者提供了对 SharePoint 内容数据库的访问权限。我需要通过 VS 2010 创建一个 SharePoint 2010 空 SharePoint 项目，并在“您要使用哪个本地站点进行调试？”框中提供共享点服务器（虚拟机）的 url？ - 'http://serappsp/'并选择部署为场解决方案。当我单击“验证”时，提示的错误是：“无法连接到 SharePoint 网站：“http://serappsp/”。确保站点 URL 有效，SharePoint 站点正在本地计算机上运行，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:35:28.000

您正在尝试制作一个农场解决方案，因为您的 Visual Studio 位于另一台机器上。您需要在安装了 SharePoint 的同一虚拟机上安装和使用 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T09:15:00.220

在调查同一问题时遇到了这个问题。错误消息表明存在站点问题，但通过授予自己对 sql server 中 SP__Content 数据库的权限来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T18:06:45.530

如果您想从另一台机器上为 SharePoint 编程，您必须使用客户端对象模型。尝试像这样实例化站点：

```
string siteUrl = "http://MyServer/sites/MySiteCollection";

ClientContext clientContext = new ClientContext(siteUrl);
Web oWebsite = clientContext.Web; 
```

# vb.net - 使抽绳部分加粗

> ID：11664871
> 
> 赞同：4
> 
> 时间：2012-07-26T08:00:23.743
> 
> 标签：vb.net, graphics, treeviewitem, drawstring

早上好。

我创建了一个自定义的树视图控件，它可以在屏幕上绘制一个普通的树视图，以及其他各种东西。在绘制事件期间，我使用以下方法将 node.text 字符串绘制到树视图控件。

```
node.text = "ABCDEFG"
g.DrawString(node.Text, tvFont, Brushes.Black, strPosX + 10, bothPosY) 
```

基本上我想要做的是使 node.text 斜体的一部分，以便它像这样呈现在屏幕上......

```
AB*CDE*FG 
```

就我个人而言，我会以这样一种方式来处理它，它可以有效地绘制三个不同的字符串......两个非斜体和一个斜体，但这需要额外的定位。

我希望可以有效地连接字体格式的字符串，然后将其作为drawstring中的第一个参数，这真的可能吗？如果是这样，我将如何去做和/或是否有任何资源可以帮助我。

我正在使用winforms和visualbasic .net framework 3.5（不幸的是，上述内容不能更改，因为它是一个工作项目，这是软件设计的环境）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:46:17.777

> 我希望可以有效地连接字体格式的字符串，然后将其作为drawstring中的第一个参数，这真的可能吗？

不，这是不可能的。该`DrawString`函数将使用您指定的格式标志绘制您指定的所有文本。这是一个全有或全无的事情。

如果您想让某些部分加粗而其他部分不加粗，则需要多次调用该`DrawString`函数。实现这一点需要一些额外的定位，但这应该不会太难。只有 x 坐标在变化；y 坐标应保持不变。除非你做一些花哨的事情，比如改变*字体*，否则[你的基线会被弄乱，你必须补偿它以防止结果看起来像一个丑陋的不匹配](https://web.archive.org/web/20141006045800/http://bobpowell.net/formattingtext.aspx)。

除此之外，请允许我建议您改用 [`TextRenderer.DrawText` 函数](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.textrenderer.drawtext) `Graphics.DrawString` 函数。前者的优点是它使用 GDI 绘制文本，这与内置的原生控件绘制文本的方式相同。这种一致性有很多优点，其中最重要的是令人愉悦和和谐的视觉外观。

如果您正在使用`TextRenderer.DrawText`，您还需要确保将它与 结合起来[`TextRenderer.MeasureText`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.textrenderer.measuretext)，因为测量值将不同于[`Graphics.MeasureString`](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.graphics.measurestring)使用 GDI+ 绘制的返回值。

`TextRenderer.DrawText`有关和之间区别的更多信息，请参阅[此问题](https://stackoverflow.com/questions/7268238/drawing-text-in-net)`Graphics.DrawString`的答案。应保留用于打印，并应用于所有屏幕元素。`Graphics.DrawString``TextRenderer.DrawText`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-04T23:17:17.417

怎么样：

```
private void Form1_Paint(object sender, PaintEventArgs e)
{
    using (Font normal = new Font("Tahoma", 10, FontStyle.Regular))
    using (Font bold = new Font("Tahoma", 10, FontStyle.Bold))
    using (StringFormat format = 
        (StringFormat)StringFormat.GenericTypographic.Clone())
    {
        format.FormatFlags |= StringFormatFlags.MeasureTrailingSpaces;
        Rectangle temp = ClientRectangle;

        DrawString(e.Graphics, SystemBrushes.WindowText, ref temp, format, "AB", normal);
        DrawString(e.Graphics, SystemBrushes.WindowText, ref temp, format, "CDE ", bold);
        DrawString(e.Graphics, SystemBrushes.WindowText, ref temp, format, "FG", normal);
    }
}

void DrawString(Graphics g, Brush brush, ref Rectangle rect, StringFormat format, string text, Font font)
{
    using (StringFormat copy = (StringFormat)format.Clone())
    {
        copy.SetMeasurableCharacterRanges(new CharacterRange[] {
        new CharacterRange(0, text.Length)});
        Region[] regions = g.MeasureCharacterRanges(text, font, rect, copy);

        g.DrawString(text, font, brush, rect, format);

        int width = (int)(regions[0].GetBounds(g).Width);
        rect.X += width;
        rect.Width -= width;
    }
} 
```

从[这里](http://social.msdn.microsoft.com/Forums/vstudio/en-US/8a050039-d74a-4ab5-9237-98615e10e303/how-to-paint-a-bold-text-and-normal-text)获得。

# jquery - 没有溢出隐藏的图片库

> ID：11664878
> 
> 赞同：1
> 
> 时间：2012-07-26T08:00:57.007
> 
> 标签：jquery, slider

**设计如下：**

图片库就像任何 jquery 滑块一样。该画廊上会有左右导航图标。我查看过的所有画廊都显示图像并且左/右的左 div 被隐藏。

**我用什么：**

大多数情况下，我使用 sliderkit 插件来满足我的 jquery 需求。

**我在设计中所做的：**

必须显示左右 div/图像，以便画廊达到 100%，并使用白色覆盖 png，以便突出显示滑块中心的图像，而其他图像会显得有些沉闷。

如果我能想出一个想法来解决关于此的sliderkit插件，那么它会很棒，或者如果有任何其他jquery插件已经具有此功能，那么我会非常乐意下载/使用它。

# javascript - 用户控件内的 RegisterStartupScript

> ID：11664879
> 
> 赞同：1
> 
> 时间：2012-07-26T08:00:58.583
> 
> 标签：javascript, asp.net, .net, user-controls, registerstartupscript

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ChatUserControl.ascx.cs"
    Inherits="MetamorphismApp.ChatUserControl" %>
<asp:Timer ID="timer1" runat="server" OnTick="timer1_Tick" Interval="5000">
</asp:Timer>
<div id="divChatWindow" class="clChatWindow">
    <div>
        <asp:Label runat="server" Text='<%# Eval("username") %>' class="divHeader" ID="lblChatFriend"></asp:Label>
        <asp:Image ID="imgFriend" runat="server" CssClass="classFriendImage"/>
        <asp:LinkButton ID="lbClose" runat="server" CommandName="Close" CssClass="lbClose"
            OnClick="lbClose_Click">Close</asp:LinkButton></div>
    <div class="chatText" id="idChatText" runat="server">
        <asp:UpdatePanel ID="UpdatePanel" runat="server">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="timer1" EventName="Tick" />
                <asp:AsyncPostBackTrigger ControlID="btnSendChat" EventName="Click" />
            </Triggers>
            <ContentTemplate>
                <asp:Repeater runat="server" ID="rpChatMessages">
                    <ItemTemplate>
                        <asp:Image ID="imageForFriend" runat="server" CssClass="clFriendsImage" ImageUrl='<%# "HttpImageHandler.jpg?username=" +  DataBinder.Eval(Container.DataItem,"fromusername").ToString() %>' />
                        <asp:Label ID="chatMessage" runat="server" Text='<%# Eval("Message") %>'></asp:Label>
                        <br>
                    </ItemTemplate>
                </asp:Repeater>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    <asp:TextBox ID="txtChatMessage" runat="server" Width="142px" CssClass="clChatMessage"
        TextMode="MultiLine"></asp:TextBox>
    <asp:LinkButton ID="btnSendChat" runat="server" CommandName="Insert" CommandArgument='<%# Eval("username") %>'
        OnClick="btnSendChat_Click">Send</asp:LinkButton>
</div>

protected void btnSendChat_Click(object sender, EventArgs e)
    {
        TextBox txt = this.FindControl("txtChatMessage") as TextBox;
        string username = lblChatFriend.Text;            
        ucc.InsertMessage(Session["username"].ToString(), username, txt.Text);

        string javaScript = "<script type='text/javascript'>\n" + "CallScroller();\n" + "</script>";
        ScriptManager.RegisterStartupScript(this, typeof(ChatUserControl), "startUpScript", javaScript, false);
    } 
```

btnSendChat 函数位于用户控制代码隐藏文件中。CallScroller 函数不会被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:13:52.407

这是因为`RegisterStartupScript`在加载 DOM 时调用，与 jQuery 等效：

```
$(function () { ... }); 
```

由于您正在`UpdatePanel`使用触发器内的按钮捕获事件，因此您实际上是在*部分渲染您的视图*，这就是为什么注册的脚本`RegisterStartupScript`永远不会在这种情况下运行的原因

备择方案：

## 对 Sys.load 事件做出反应

每次部分呈现页面时都会引发此事件。

处理事件如下：

```
 <asp:ScriptManager runat="server" ID="sm">

    </asp:ScriptManager>
    <script type="text/javascript">
        function callScroller() {
            alert("call scroller called");
        }
        Sys.Application.add_load(function () {
            if ($get("hidden").getAttribute("value") == "1") {
                callScroller();
            }
        });
    </script> 
```

`HiddenField`在您的内部添加一个`UpdatePanel.ContentTemplate`将其用作标志以指示*何时调用 JavaScript 函数*，没有它，您的函数将在每个帖子上被调用

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:HiddenField  runat="server" ID="hidden" Value="0" />
        .... 
```

最后，在最适合您需要的情况下，在后面的代码中*打开标志：*

```
 protected void btnSendChat_Click(object sender, EventArgs e)
    {
        this.hidden.Value = "1";
    } 
```

就是这样

# java - 隐藏EditText焦点上的虚拟键盘丢失

> ID：11664881
> 
> 赞同：0
> 
> 时间：2012-07-26T08:01:09.573
> 
> 标签：java, android

我知道这个问题已被问过数百万次，但我无法为我的具体问题找到直接的解决方案。

在我的 SearchActivity 中，有一个`EditText`& a `ListView`。

我希望即使用户触摸除 EditText 之外的任何地方，键盘也应该关闭。

我所做的是`TouchListener`在 ListView 上设置一个 & 每当它被触摸时，键盘就会关闭。

但它产生了一个问题，当我触摸 ListView 的任何元素时，键盘隐藏，但列表的元素变得不可见。

请提出比这更好的方法。

我的代码：

```
public class SearchActivity extends Activity implements OnTouchListener {

    RelativeLayout rlSearchLayout;
    EditText etSearchBar;
    ListView lvSearchResult;
    private static String searchText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);
        setTitle("SearchActivity.java");

        etSearchBar = (EditText) findViewById(R.id.etSearchBar);
        lvSearchResult = (ListView) findViewById(R.id.lvSearchResult);

        searchText = etSearchBar.getText().toString();
        lvSearchResult.setOnTouchListener(this);

        String[] objects = { "One", "two" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, objects);
        lvSearchResult.setAdapter(adapter);
    }

    @Override
    public boolean onTouch(View paramView, MotionEvent paramMotionEvent) {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(etSearchBar.getWindowToken(), 0);

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:37:44.273

将此添加到您的布局文件中。

```
 <ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#80000000"
    /> 
```

现在在您的活动`TouchListener`中为此添加一个。`imageView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:04:48.887

试试这个

```
<Your EditView>.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        If(!hasfocus)
          hideSoftKeyboard()
    }
}); 
```

# javascript - 如何在生成的 HTML 页面中隐藏 JavaScript 注释？

> ID：11664884
> 
> 赞同：2
> 
> 时间：2012-07-26T08:01:32.137
> 
> 标签：javascript, comments

有没有办法隐藏结果页面源上的 JS 注释？JS是通用的...

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:03:15.037

当然。只需使用 JSMin 之类的工具缩小您的 javascript：[http ://www.crockford.com/javascript/jsmin.html](http://www.crockford.com/javascript/jsmin.html)

或 UglifyJS：[https](https://github.com/mishoo/UglifyJS/) ://github.com/mishoo/UglifyJS/ 或 Google Closure：[https ://developers.google.com/closure/](https://developers.google.com/closure/)

它们都去掉了注释和多余的空格。有些人甚至会以疯狂的方式更改您的变量名称以节省字节。

或者用编译为 JS 的语言编写你的 JS，比如咖啡脚本[http://coffeescript.org/](http://coffeescript.org/)，它会在编译时去掉注释。

# full-text-search - ElasticSearch 搜索查询分隔符

> ID：11664887
> 
> 赞同：0
> 
> 时间：2012-07-26T08:01:39.380
> 
> 标签：full-text-search, elasticsearch

我在索引中有一个简单的记录

```
CharacterId=847 
```

*   查询`CharacterId=8`返回结果（看起来它分别搜索`CharacterId`和`8`
*   查询`CharacterId=`返回结果
*   查询`CharacterId=*`不返回任何内容
*   查询`Character*`返回结果
*   查询`CharacterId=8*`不返回任何内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T14:31:50.723

我会假设您的问题是“为什么 elasticsearch 这样做”？为了回答这个问题，我们需要看看您的记录是如何被索引的。假设您使用的是默认分析器，我们可以看到您的记录被索引为两个词`characterid`和`847`：

```
$ curl "localhost:9200/twitter/_analyze?pretty=true" -d 'CharacterId=847'
{
  "tokens" : [ {
    "token" : "characterid",
    "start_offset" : 0,
    "end_offset" : 11,
    "type" : "<ALPHANUM>",
    "position" : 1
  }, {
    "token" : "847",
    "start_offset" : 12,
    "end_offset" : 15,
    "type" : "<NUM>",
    "position" : 2
  } ]
} 
```

现在让我们看看您的查询：

```
$ curl "localhost:9200/twitter/_validate/query?explain=true&pretty=true" -d '{
    "query_string": {"query":"CharacterId=8"}
}' 
{
  "valid" : true,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0
  },
  "explanations" : [ {
    "index" : "twitter",
    "valid" : true,
    "explanation" : "_all:characterid _all:8"
  } ]
} 
```

你是对的，这个查询正在搜索 term`characterid`或 for the term `8`。该术语`characterid`与您的记录的第一个术语匹配，您将返回结果。

第二个查询具有类似的效果，但它只搜索一个 term `characterid`。

```
$ curl "localhost:9200/twitter/_validate/query?explain=true&pretty=true" -d '{
    "query_string": {"query":"CharacterId="}
}' 
...
    "explanation" : "_all:characterid"
... 
```

第三个查询作为通配符查询处理：

```
$ curl "localhost:9200/twitter/_validate/query?explain=true&pretty=true" -d '{
    "query_string": {"query":"CharacterId=*"}
}'
...
    "explanation" : "_all:characterid=*"
... 
```

如您所见，它搜索所有以 characters 开头的术语`characterid=`。您的索引没有任何此类术语，因此它什么也找不到。

第四个查询再次作为通配符查询处理：

```
$ curl "localhost:9200/twitter/_validate/query?explain=true&pretty=true" -d '{
    "query_string": {"query":"Character*"}
}'   
...
    "explanation" : "_all:character*"
... 
```

但是，这一次，它搜索以 开头`character`的词，因此它匹配词`characterid`。

最后一个查询与第三个查询类似：

```
$ curl "localhost:9200/twitter/_validate/query?explain=true&pretty=true" -d '{
    "query_string": {"query":"CharacterId=8*"}
}'
...
    "explanation" : "_all:characterid=8*"
... 
```

没有以 开头的术语，`characterid=8`因此不会返回任何记录。

如果这不是您需要的行为，您可能需要考虑根本不分析此字段，或者只使用小写分析器。

# liferay - 如何获取 liferay 的网络内容速度模板中选择的项目的值和文本？

> ID：11664888
> 
> 赞同：0
> 
> 时间：2012-07-26T08:01:42.590
> 
> 标签：liferay, structure, velocity, liferay-velocity, webcontent

我有 1 个选择列表和 1 个多选列表的结构

```
<dynamic-element name="mySLMenu" type="list" index-type="keyword" repeatable="false">
    <dynamic-element name="itemOne" type="0" index-type="" repeatable="false"></dynamic-element>
    <dynamic-element name="itemTwo" type="1" index-type="" repeatable="false"></dynamic-element>        
</dynamic-element>
<dynamic-element name="myMSMenu" type="multi-list" index-type="" repeatable="false">
    <dynamic-element name="itemOne" type="0" index-type="" repeatable="false"></dynamic-element>
    <dynamic-element name="itemTwo" type="1" index-type="" repeatable="false"></dynamic-element>    
</dynamic-element> 
```

对于选择列表，我在速度中使用以下内容：

```
$mySLMenu.getData() 
```

对于多选列表：

```
#if($myMSMenu.getOptions().size() >0)
    <select multiple>
    #foreach($item in $myMSMenu.getOptions())
        <option> $item </option>
    #end
    </select>
#end 
```

但它只返回我所选项目的类型，我想同时获取类型（值）和文本（名称），请告诉我方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:09:25.673

的信息`name`不存储在数据库中的 JournalArticle 中，在数据库中您只有以下类型：

```
<dynamic-content>\u000a\u0009\u0009\u0009<option><![CDATA[0]]></option>\u000a\u0009\u0009\u0009<option><![CDATA[1]]></option>\u000a\u0009\u0009</dynamic-content>\u000a\u0009</dynamic-element> 
```

但是，您不能简单地从多列表元素中保存此信息。

建议：如果这足以满足您的要求，您可以采取以下`type`措施`name`：

```
<dynamic-element name="myMSMenu" type="multi-list" index-type="" repeatable="false">
    <dynamic-element name="itemOne" type="itemOne" index-type="" repeatable="false"></dynamic-element>
    <dynamic-element name="itemTwo" type="itemTwo" index-type="" repeatable="false"></dynamic-element>    
</dynamic-element> 
```

# android - android - 表格布局对齐

> ID：11664889
> 
> 赞同：2
> 
> 时间：2012-07-26T08:01:56.247
> 
> 标签：android, alignment, android-linearlayout, android-tablelayout

![在此处输入图像描述](../Images/9918b3ba907eaa305c4b0a62f5d5bf16.png) 如何正确对齐产品名称和产品等级。我从 db 中检索产品名称，因为名称太长对齐不在同一位置。请帮忙谢谢

```
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:shrinkColumns="*"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/birdnesttoppanel"
        android:gravity="center_horizontal" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <LinearLayout
            android:layout_span="6"
            android:gravity="center" >

            <ImageButton
                android:id="@+id/preview"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_gravity="center"
                android:background="@drawable/newclick"
                android:text="Click here to view the picture" />
        </LinearLayout>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textSize="18dp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow6new"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >
        <LinearLayout
            android:layout_span="6"
            android:gravity="center" >

        <TextView
            android:id="@+id/ProductName1"
            android:text="@string/ProductName"
            android:textStyle="bold"
            android:typeface="serif" 
            android:layout_width="wrap_content"
                android:layout_height="wrap_content">
        </TextView>

        <TextView
            android:id="@+id/ProductName2"
            android:text=":"
            android:textStyle="bold"
            android:typeface="serif" 
            android:layout_width="wrap_content"
                android:layout_height="wrap_content">
        </TextView>

        <TextView
            android:id="@+id/ProductName3"
            android:text=""
            android:textStyle="bold"
            android:typeface="serif" 
            android:layout_width="wrap_content"
                android:layout_height="wrap_content">
        </TextView>
        </LinearLayout>
    </TableRow>

    <TableRow>

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="6"
            android:gravity="center"
            android:textSize="2dp"
            android:textStyle="bold"
            android:typeface="serif" >
        </TextView>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow6new1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >
        <LinearLayout
            android:layout_span="6"
            android:gravity="center" >

        <TextView
            android:id="@+id/ProductGrade1"
            android:text="@string/ProductGrade"
            android:textStyle="bold"
            android:typeface="serif"
            android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
        </TextView>

        <TextView
            android:id="@+id/ProductGrade2"
            android:text=":"
            android:textStyle="bold"
            android:typeface="serif"
            android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
        </TextView>

        <TextView
            android:id="@+id/ProductGrade3"
            android:text=""
            android:textStyle="bold"
            android:typeface="serif"
            android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
        </TextView>
        </LinearLayout>
    </TableRow> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:29:56.157

有点难以区分 XML 文件中对应的标签，但让我猜一下：

因此，对于 TableRows：

```
`android:id="@+id/tableRow6new"` and `android:id="@+id/tableRow6new1"` 
```

将重力改为左：**android:gravity="left"**

另外，我看到两个 TableRows 都有一个 LinearLayout：

```
<LinearLayout
            android:layout_span="6"
            android:gravity="center" > 
```

将它们的重力也更改为左： android:gravity="left"

希望它能解决问题。

# django - 在 Django 中以调试模式关闭缓存

> ID：11664892
> 
> 赞同：8
> 
> 时间：2012-07-26T08:02:01.960
> 
> 标签：django

我在一些非常计算和数据库密集的视图上为我的生产服务器使用 memcached 视图缓存，如下所示：

```
urlpatterns = ('',
    (r'^foo/(\d{1,2})/$', cache_page(60 * 15)(my_view)),
) 
```

有没有办法在 Settings.py 中的 DEBUG==True 时关闭缓存，这样我就不必担心缓存过时的视图输出并且可以使用我的 IDE 调试器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T08:37:54.087

您可以有条件地在 中设置缓存`settings.py`，如下所示：

```
if not DEBUG:
    CACHES = {
        'default': {
            'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
            'LOCATION': '127.0.0.1:11211',
        }
    }
else:
    CACHES = {
        'default': {
            'BACKEND': 'django.core.cache.backends.dummy.DummyCache',
        }
    } 
```

# java - Jackson - 使用泛型类反序列化

> ID：11664894
> 
> 赞同：206
> 
> 时间：2012-07-26T08:02:16.180
> 
> 标签：java, json, generics, jackson

我有一个 json 字符串，我应该将其反序列化为以下类

```
class Data <T> {
    int found;
    Class<T> hits
} 
```

我该怎么做？这是通常的方式

```
mapper.readValue(jsonString, Data.class); 
```

但是我该如何提及 T 代表什么？

* * *

## 回答 #1

> 赞同：338
> 
> 时间：2012-07-26T11:49:19.193

您需要为`TypeReference`您使用的每个泛型类型创建一个对象，并将其用于反序列化。例如 -

```
mapper.readValue(jsonString, new TypeReference<Data<String>>() {}); 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2012-07-27T04:39:43.283

你不能这样做：你必须指定完全解析的类型，比如`Data<MyType>`. `T`只是一个变量，as没有意义。

但是，如果您的意思`T`是已知的，而不是静态的，则需要`TypeReference`动态地创建等效的。引用的其他问题可能已经提到了这一点，但它应该类似于：

```
public Data<T> read(InputStream json, Class<T> contentClass) {
   JavaType type = mapper.getTypeFactory().constructParametricType(Data.class, contentClass);
   return mapper.readValue(json, type);
} 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-01-07T10:06:28.433

你要做的第一件事是序列化，然后你可以反序列化。
因此，当您进行序列化时，您应该使用`@JsonTypeInfo`让杰克逊将类信息写入您的 json 数据。你可以做的是这样的：

```
Class Data <T> {
    int found;
    @JsonTypeInfo(use=JsonTypeInfo.Id.CLASS, include=JsonTypeInfo.As.PROPERTY, property="@class")
    Class<T> hits
} 
```

然后，当您反序列化时，您会发现 jackson 已将您的数据反序列化为一个类，您的变量在运行时实际命中该类。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2019-07-16T21:44:41.513

从 Jackson 2.5 开始，一种优雅的解决方法是使用 [TypeFactory.constructParametricType(Class parametrized, Class... parameterClasses)](https://fasterxml.github.io/jackson-databind/javadoc/2.8/com/fasterxml/jackson/databind/type/TypeFactory.html#constructParametricType(java.lang.Class,%20java.lang.Class...))`JavaType`方法，该方法允许通过指定参数化类及其参数化类型 来直接定义 Jackson 。

假设你想反序列化到`Data<String>`，你可以这样做：

```
// the json variable may be a String, an InputStream and so for...
JavaType type = mapper.getTypeFactory().constructParametricType(Data.class, String.class);
Data<String> data = mapper.readValue(json, type); 
```

请注意，如果该类声明了多个参数化类型，则不会更难：

```
class Data <T, U> {
    int found;
    Class<T> hits;
    List<U> list;
} 
```

我们可以这样做：

```
JavaType type = mapper.getTypeFactory().constructParametricType(Data.class, String.class, Integer);
Data<String, Integer> data = mapper.readValue(json, type); 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-03-16T18:28:38.277

For class Data<>

```
ObjectMapper mapper = new ObjectMapper();
JavaType type = mapper.getTypeFactory().constructParametrizedType(Data.class, Data.class, Parameter.class);
Data<Parameter> dataParam = mapper.readValue(jsonString,type) 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-10-09T03:59:22.590

只需在 Util 类中编写一个静态方法。我正在从文件中读取 Json。您也可以将 String 提供给 readValue

```
public static <T> T convertJsonToPOJO(String filePath, Class<?> target) throws JsonParseException, JsonMappingException, IOException, ClassNotFoundException {
        ObjectMapper objectMapper = new ObjectMapper();
        return objectMapper.readValue(new File(filePath), objectMapper .getTypeFactory().constructCollectionType(List.class, Class.forName(target.getName())));
} 
```

用法：

```
List<TaskBean> list =  Util.<List<TaskBean>>convertJsonToPOJO("E:/J2eeWorkspaces/az_workspace_svn/az-client-service/dir1/dir2/filename.json", TaskBean.class); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-07-26T11:32:38.083

您可以将它包装在另一个知道泛型类型的类中。

例如，

```
class Wrapper {
 private Data<Something> data;
}
mapper.readValue(jsonString, Wrapper.class); 
```

这里Something是一个具体的类型。每个具体类型都需要一个包装器。否则杰克逊不知道要创建什么对象。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-02-20T08:10:42.203

需要反序列化的 JSON 字符串必须包含有关参数的类型信息`T`。
您必须在可以作为参数传递`T`给类的每个类上放置 Jackson 注释，以便 Jackson可以从 JSON 字符串读取/写入`Data`有关参数类型的类型信息。`T`

让我们假设它`T`可以是任何扩展抽象类的类`Result`。

```
class Data <T extends Result> {
    int found;
    Class<T> hits
}

@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_OBJECT)
@JsonSubTypes({
        @JsonSubTypes.Type(value = ImageResult.class, name = "ImageResult"),
        @JsonSubTypes.Type(value = NewsResult.class, name = "NewsResult")})
public abstract class Result {

}

public class ImageResult extends Result {

}

public class NewsResult extends Result {

} 
```

一旦可以作为参数传递的每个类（或其公共超类型）都被注释，Jackson 将在 JSON 中`T` 包含有关参数的信息。`T`然后可以`T`在编译时不知道参数的情况下反序列化此类 JSON。
这个[Jackson 文档链接](https://github.com/FasterXML/jackson-docs/wiki/JacksonPolymorphicDeserialization)讨论了多态反序列化，但对于这个问题也很有用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-05T12:13:27.177

```
public class Data<T> extends JsonDeserializer implements ContextualDeserializer {
    private Class<T> cls;
    public JsonDeserializer createContextual(DeserializationContext ctx, BeanProperty prop) throws JsonMappingException {
        cls = (Class<T>) ctx.getContextualType().getRawClass();
        return this;
    }
    ...
 } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-24T09:49:43.183

如果您使用 scala 并且在编译时知道泛型类型，但不想在所有 api 层中的任何地方手动传递 TypeReference，您可以使用以下代码（使用 jackson 2.9.5）：

```
def read[T](entityStream: InputStream)(implicit typeTag: WeakTypeTag[T]): T = {

    //nathang: all of this *crazy* scala reflection allows us to handle List[Seq[Map[Int,Value]]]] without passing
    // new TypeReference[List[Seq[Map[Int,Value]]]]](){} to the function

    def recursiveFindGenericClasses(t: Type): JavaType = {
      val current = typeTag.mirror.runtimeClass(t)

      if (t.typeArgs.isEmpty) {
        val noSubtypes = Seq.empty[Class[_]]
        factory.constructParametricType(current, noSubtypes:_*)
      }

      else {
        val genericSubtypes: Seq[JavaType] = t.typeArgs.map(recursiveFindGenericClasses)
        factory.constructParametricType(current, genericSubtypes:_*)
      }

    }

    val javaType = recursiveFindGenericClasses(typeTag.tpe)

    json.readValue[T](entityStream, javaType)
  } 
```

可以这样使用：

```
read[List[Map[Int, SomethingToSerialize]]](inputStream) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-03-11T14:01:54.413

要使用 Jackson 将通用 JSON 字符串反序列化为 Java 对象，您需要：

1.  定义一个 JSON 类。

2.  执行属性映射。

最终代码，经过测试，可以使用：

```
static class MyJSON {

    private Map<String, Object> content = new HashMap<>();

    @JsonAnySetter
    public void setContent(String key, Object value) {
        content.put(key, value);
    }
}

String json = "{\"City\":\"Prague\"}";

try {

    MyPOJO myPOJO = objectMapper.readValue(json, MyPOJO.class);

    String jsonAttVal = myPOJO.content.get("City").toString();

    System.out.println(jsonAttVal);

} catch (IOException e) {
    e.printStackTrace();
} 
```

**重要提示：**
`@JsonAnySetter`注释是强制性的，它确保了通用的 JSON 解析和填充。

对于嵌套数组的更复杂情况，请参阅 Baeldung 参考： [https ://www.baeldung.com/jackson-mapping-dynamic-object](https://www.baeldung.com/jackson-mapping-dynamic-object)

# php - PHPsoap方法传递参数

> ID：11664897
> 
> 赞同：0
> 
> 时间：2012-07-26T08:02:27.750
> 
> 标签：php, soap

我是 SOAP 新手，并尝试调用托管在其他地方的 web 服务。

我正在尝试调用“IsUniqueUser”网络服务来检查用户是否是唯一的。

以下是服务架构..

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ser="some service" xmlns:xsd="some xsd" xmlns:xsd1="">
 <soap:Header/>
 <soap:Body>
  <ser:isUniqueUser>
     <!--Optional:-->
     <ser:request>
    <xsd:userName>SomeValidUserName</xsd:userName>
 </ser:request>
 </ser:isUniqueUser>
 </soap:Body>
 </soap:Envelope> 
```

我正在尝试使用以下代码在 php 中调用此服务

```
 $client = new SoapClient('Some.wsdl'); 
```

在 http 身份验证之后，我尝试调用 isUniqueUser 方法并将“userName”作为参数传递。

```
 $unique = $client->__soapCall('isUniqueUser',  array('userName' =>'vish123')); 
```

但没有任何结果，我收到以下错误

```
 stdClass Object
 (
[return] => stdClass Object
    (
        [errorCode] => 11ARPMWS1004
        [errorMessage] => null. null
        [status] => Failure
        [uniqueUser] => 
    )

) 
```

我已经尝试以多种方式传递参数，例如

```
 $params = array('UserName' =>$_POST['userName']);
    $unique = $client->__soapCall("isUniqueUser", $params); 
```

或者

```
 $unique = $client->isUniqueUser($params); 
```

或者

```
 $unique = $client->_soapCall('isUniqueUser', array('paramaters'=>$params)); 
```

或者

```
 $unique = $client->_soapCall('isUniqueUser', array('request'=>$params)); 
```

我仍然遇到同样的错误。我已就此问题与提供商联系，他们说在传递参数时代码有问题。

谁能告诉我如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:22:37.243

我可以从您的请求中看到您在“ser：request”下有 xsd：userName 节点，您可以尝试创建具有 userName 数组的请求数组。

```
$params = array('UserName' =>$_POST['userName']);
$paramsrequest = array('request' =>$param);
$unique = $client->__soapCall("isUniqueUser",$paramsrequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T17:17:10.320

我有同样的问题。我尝试了你所做的一切。

这个为我解决了：

```
$result = $soapClient->somefunction(array(
    "param1" => "value1",
    "param2" => "value2"
));
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:27:22.750

在我的一个项目中，我使用了这个：

```
 $soapClient = new SoapClient($wsdl,$params);
    $reponseclient=$soapClient->authentification($username,$password);
    if($reponseclient->demandeRealisee===false){
         error_log("Couldn't log ".$username);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:09:01.077

看看这是否有帮助：

```
<?php
    $sClient = new SoapClient('Some.wsdl');
    $wrapper = null;
    $wrapper->isUniqueUser->request->userName = new SoapVar('SomeValidUserName', XSD_STRING);
    $result = $sClient->isUniqueUser($wrapper);
    echo $sClient->__getLastResponse();
?> 
```

另外，您是否尝试过使用诸如[soapUI 之](http://www.soapui.org)类的肥皂客户端手动触发？它在工作吗？

# c++ - 如何创建一个一维数组来保存多个二维数组？

> ID：11664904
> 
> 赞同：1
> 
> 时间：2012-07-26T08:02:46.410
> 
> 标签：c++, arrays

我有一个我一直在做的游戏。这是一款基于文本的RPG冒险游戏。我希望让玩家使用简单的文本命令来导航世界。我已将其设置为将世界划分为“区域”或数组。每个区域都是自定义数据类型 Location 并由一个二维数组组成。我将使用两个变量来跟踪玩家位置，它们实际上是“区域”网格上的点位置的两个索引值。当玩家输入诸如“北”、“南”、“东”或“西”之类的方向命令时，它将增加或减少这些值以“移动”玩家。当他们到达过渡区时，它将把他们移动到另一个“区域”。我在想我可以有一个包含所有区域的数组。过渡区域只会提高或降低主阵列的索引以“过渡”到下一个区域。我当然会让过渡空间有一个值来存储玩家最终会在下一个区域的网格上的位置。我只是想知道如何制作这个“主阵列”来保存区域阵列。只是问我是否有什么我没有解释得不够好。先感谢您。

```
struct Location
{
    int type, destX, destY;
    // 1 = battlefield
    //  areas where random encounters will at some future date occur
    // 2 = town
    //  areas where hopefully the foolhardy adventurer will be able to speak
    // to merchants and towns folk
    // 3 = dungeon
    //  areas with long travel times and the promise of an end boss
    //  but more importantly really awesome loot
    // 4 = transition points
    //
    string name, desc;
}; 
```

这就是我的设想。

EgForest

[][][]
[][][]
[][][]
^过渡区将使用存储的值 destX 和 destY SRavine
将玩家移动到以下“区域”中的目的地， 该地点是目的地 V [][ ][][][] [][][][][][][] [][][][] [][][][]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:18:44.970

Just regarding the headline of your question, this is you create one dimensional arrays of two-dimensional arrays in C++:

```
std::vector<std::vector<std::vector<Entity>>> v; 
```

That's a multidimensional where each sub-array can have a size that is independent of each other.

Note that C++ has also fixed-size-arrays (one-dimensional, too):

```
std::array<std::array<std::array<int,16>,16,16>> 
         array_16_of_array_16_of_array_16_of_int; 
```

Generally, prefer standard-containers over direct arrays. This opens you up for a world of algorithms (e.g. the `algorithm` header) and helper methods (`.size()`).

Unfortunately, C++ has no builtin multidimensional containers, but some libraries provide them, or you could make your own. A basic implementation may look like this:

```
template <typename T>
class surface {
public:
    typedef size_t size_type;

    surface(size_type w, size_type h) : width_(w), height_(h), data_(w*h) {}

    size_type width()  const { return width_;  }
    size_type height() const { return height_; }
    size_type size()   const { return width_*height_; }

    // These are for when you need to loop over all elements
    // without interest in coordinates.
    T  operator[] (size_type i) const { return data_[i]; }
    T& operator[] (size_type i)       { return data_[i]; }

    T  operator() (size_type x, size_type y) const { return data_[y*width_+x]; }
    T& operator() (size_type x, size_type y)       { return data_[y*width_+x]; }

    T at(size_type i) const {
        if (i>=size()) throw std::out_of_range(....);
        return (*this)[i];
    }
    T& at(size_type i) {
        if (i>=size()) throw std::out_of_range(....);
        return (*this)[i];
    }
    T at(size_type x, size_type y) const {
        if (x>=width_ || y>=height_) throw std::out_of_range(....);
        return (*this)(x,y);
    }
    T& at(size_type x, size_type y) {
        if (x>=width_ || y>=height_) throw std::out_of_range(....);
        return (*this)(x,y);
    }

private:
    size_type width_, height_;
    std::vector<T> data_;
};

...

surface<Foo> x(256,256);

x(16,12) = Foo();
x[16+12*256] = Foo(); 
```

Depending on the size and access ordering on your array, you may use other indexers (e.g. Morton/Z-Order indexing).

```
template <typename T, typename Indexer=LinearIndexer>
...
    T  operator() (size_type x, size_type y) const { return data_[Indexer()(x,y)]; }

...

surface<int, Morton> foo(102400, 102400); 
```

And possibly you even templatize the container too allow for exotic cases like containers that can just-in-time-load/save from/to disk.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:18:57.997

3 dimensional array is the answer.

```
int world[4][5][6]; 
```

4 is the amount of regions, 5 and 6 the 2D array. If you need variable sizes for the areas, use pointers and allocate the amount you need.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:33:21.013

您可以将所有矩阵简化为一个大的一维数组。对于每个区域，您都知道它在数组中的偏移量，以及它的宽度和高度。区域内的导航很简单，+ `1`/- 表示东/西，+ `region_width`/- 表示南/北。遍历区域边界时需要特殊代码，以防止它或跳转到另一个区域。

我建议你把世界从一堆矩阵变成一张图。图中的一个位置至少有 4 个（但可能更多）出口槽。插槽将有一个方向标识符（除了 n、s、e、w，可能有“上”、“下”、“门”、“楼梯”和任何你喜欢的东西），或者是隐式的（以插槽而闻名） ) 或显式（与插槽一起存储），以及此插槽通向的位置的标识符。该标识符可以是“一个大的一维数组”中的位置索引。这种方法的缺点是更多的簿记。这样做的好处是你有更多的自由来创造你的世界。该图在特殊情况下会发光。您可能有超过 4 个出口、单向通道或令人难以置信的区域，例如下水道，您认为您会往北走，但它会带您向西，或类似的地方。

# php - wamp服务器上的imagegrabwindow错误

> ID：11664906
> 
> 赞同：1
> 
> 时间：2012-07-26T08:03:03.977
> 
> 标签：php, com, screenshot, wamp

我正在尝试使用 imagegrabwindow 功能截屏。但它会出现警告并且不保存图像。这是我的代码和输出。有谁知道我该如何解决这个问题？

注意：我将 apache 服务设置（允许服务与桌面交互）更改为选中状态。

```
<?php
 $browser = new COM("InternetExplorer.Application");
 $handle = $browser->HWND;
 $browser->Visible = true;
 $browser->Navigate("http://www.brove.net");

 /* Still working? */
 while ($browser->Busy) {
    com_message_pump(4000);
 }
 $im = imagegrabwindow($handle, 0);
 $browser->Quit();
 imagepng($im, "iesnap.png");
 imagedestroy($im);
?> 
```

![在此处输入图像描述](../Images/852bb41edf2f7fad67b30da6772c0ee7.png)

# php - 类常量的 PHP 表达式

> ID：11664909
> 
> 赞同：3
> 
> 时间：2012-07-26T08:03:23.417
> 
> 标签：php, string, constants

我试图弄清楚为什么我得到这个代码和异常。

```
class Test {
    const test = "Two " .
                 "rows.";
} 
```

我在包含 const 的行上出现异常：

> 解析错误：语法错误，意外的 '.'，期待 ',' 或 ';' 在第 X 行的 /home/BZUMUL/prog.php 中

我打算切换到heredoc，但后来我太好奇了，所以我无法停止尝试解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:08:51.740

根据[类常量](http://php.net/language.oop5.constants)：

> 该值必须是常量表达式，而不是（例如）变量、属性、数学运算的结果或函数调用。

因此，您不能对常量值使用表达式。

# r - R 的保留内存是已分配数组大小的两倍

> ID：11664911
> 
> 赞同：6
> 
> 时间：2012-07-26T08:03:33.243
> 
> 标签：r, memory-management

我发现了以下行为。假设我创建了以下多维数组：

```
spam = array(runif(96*48*60*360), dim = c(96,48,60,360)) 
```

R 应该为此使用多少内存是完全可以预测的，即 (96*48*60*360) * 4 字节 = 759.4 Mbyte。使用该`lsos`功能很好地确认了这一点（请参阅[这篇文章](https://stackoverflow.com/questions/1358003/tricks-to-manage-the-available-memory-in-an-r-session)）：

```
> lsos()
         Type      Size PrettySize Rows Columns
spam    array 796262520   759.4 Mb   96      48
lsos function       776  776 bytes   NA      NA 
```

然而，R 作为一个进程使用更多的内存，大约是大小的两倍：

```
$ top | grep rsession
82:17628 hiemstra  20   0 1614m **1.5g** 8996 S  0.3 40.4   0:04.85 rsession 
```

为什么R会这样做？我假设分配额外的保留内存是为了让 R 可以更快地访问它？有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T08:14:54.903

因为垃圾收集器还没有运行。
所以有很多垃圾，可能是在创建大数组的过程中产生的，必须清除。

如果您通过调用`gc()`函数强制进行垃圾收集，您将看到已使用的内存将非常接近数组的大小：

```
> memory.size()
[1] 775.96 
```

# opengl - 扫描特定颜色的 gltexture 的最快方法是什么？

> ID：11664915
> 
> 赞同：1
> 
> 时间：2012-07-26T08:03:59.157
> 
> 标签：opengl

假设我有一个纹理位于视频内存中，并且隐藏在这个纹理中的某个地方可能是一个或多个具有特定颜色的像素。在 C++ 中，我想在这个 gltexture 上调用一个函数来检查这个颜色的存在，然后简单地返回 true 或 false。**最快**的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T08:11:57.347

我想最好的性能/简单性比率是在 CPU 上保留一份副本并测试每个纹素，可选地使用 SSE。

您也可以在 OpenGL 中执行此操作：

*   创建与纹理大小相同的渲染目标
*   在其中对您的纹理进行全屏渲染 - 也就是说，每个纹素将匹配渲染目标的一个片段。禁用任何精美的纹理采样
*   渲染时，使用着色器丢弃除具有所需颜色的纹素之外的任何纹素
*   使用遮挡查询计算渲染片段的数量。

我不确定它的性能，但它可能会以最快的速度到达 GPU 端。请注意，虽然速度很快，但此方法有滞后：通常只能在 1 或 2 帧后获得遮挡查询的结果（不过，您也可以忙着等待）。

# c# - 从数据库中获取数据并传递给另一个表单

> ID：11664924
> 
> 赞同：-4
> 
> 时间：2012-07-26T08:04:17.783
> 
> 标签：c#

我想将整数值存储在标签中并传递给另一种形式。但是 value 被传递了，但它通过了`system.data.dataset`。下面是我的代码。请帮我解决一下这个。

```
con.Open();
SqlCommand cmd1 = new SqlCommand("select balance from customer where namee='" + textBox1.Text + "'", con);
SqlDataAdapter adapter = new SqlDataAdapter(cmd1);
DataSet ds = new DataSet();
adapter.Fill(ds, "loki");
label4.Text = ds.ToString();
options frm = new options(label4.Text);
frm.Show();
con.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:08:16.500

您必须在 label.Text 中传递余额字段值

而不是这个

```
label4.Text = ds.ToString(); 
```

你已经这样做了

```
label4.Text = ds.Tables[0].Rows["balance"].ToString(); 
```

> 请注意，它将作为字符串存储在标签的 Text 属性中，因此当您在另一个表单上检索它时，您必须使用[Int32.TryParse将其转换为 int](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:08:08.357

您想获得“标量”值而不是数据集。

```
con.Open();
SqlCommand cmd1 = new SqlCommand("select balance from customer where namee='" 
                        + textBox1.Text + "'", con);
object balance = cmd.ExecuteScalar();
label4.Text = balance.ToString();

options frm = new options(label4.Text);
frm.Show();
con.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:10:54.940

尝试

```
con.Open();
SqlCommand cmd1 = new SqlCommand("select balance from customer where namee='" 
                        + textBox1.Text + "'", con);
label4.Text = cmd1.ExecuteScalar(); 
```

# plone - 启动时最初加载克隆站点时如何订阅

> ID：11664925
> 
> 赞同：3
> 
> 时间：2012-07-26T08:04:18.497
> 
> 标签：plone

我想以编程方式进行一些注册，这些注册取决于存储在 plone.app.registry 中的数据。具体来说，我想将 menuItems 添加到对象的显示菜单中，这通常是通过 zcml 完成的。

这种“克隆加载”事件的“标准”方法是什么？

我考虑过的方法是：

*   在站点根目录上使用预遍历钩子，进行注册，然后设置某种标记以防止重新注册
*   监听 zope 启动事件（如 zope.processlifetime.IProcessStarting），然后在 ZODB 中找到所有 Plone 站点并执行注册

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:50:20.187

我会使用一个事件处理程序来挂钩站点遍历，并带有一个切换：

```
_menuItemsRegistered = set()

def beforeSiteTraverse(site, event, _handled=set()):
    if site.getPhysicalPath() not in _handled:
        registerMenuItems(site)
        __handled.add(site.getPhysicalPath()) 
```

现在`registerMenuItems`每个 Plone 站点只执行一次，执行起来非常便宜。

如果每个实例只需要处理一个 Plone 站点，则可以（进一步）减少这种情况；只需在第一次触发后取消订阅您的处理程序。

这比处理`IProcessStarting`事件更好，因为您必须`setSite`在每个 Plone 站点上设置本地注册表（调用），然后才能访问注册表实用程序。

# c# - AJAX 自动完成中的 AutoComplete.asmx 错误

> ID：11664926
> 
> 赞同：1
> 
> 时间：2012-07-26T08:04:21.763
> 
> 标签：c#, asp.net-ajax

我正在尝试为文本框实现 AJAX 自动完成。

但

```
<asp:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server"
 BehaviorID="AutoCompleteEx"
 TargetControlID="myTextBox"
 ServicePath="AutoComplete.asmx" >
 </asp:AutoCompleteExtender> 
```

文件 AutoComplete.asmx 未找到。我对此感到困惑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:11:07.157

[从 ASP.NET AJAX 使用 AutoComplete 的教程](http://www.asp.net/ajaxlibrary/act_AutoComplete_simple.ashx)。尽管本教程使用页面方法而不是专用 Web 服务。

# android - 微调器和碎片

> ID：11664927
> 
> 赞同：0
> 
> 时间：2012-07-26T08:04:27.297
> 
> 标签：android, android-fragments, android-spinner

我正在开发一个包含三个的应用程序`Fragments`

```
 [HeaderFragment] 

 [MainFragment] 

 [FooterFragment] 
```

这是一个相当大的应用程序，*MainFragment*将显示超过 30 个 other `Fragments`。为了创建动态流程，我介绍了一些快捷方式。这些是*FooterFragment*`ImageViews`中的 5 个，它们映射到*MainFragment*内部的一个。一切正常，并且建立起来非常干净和直接。*`Fragment`*

 ****问题**

我希望用户自定义快捷方式。在每个`LongClick`快捷方式-ImageViews 上，我想显示一个`Spinner`将弹出可用快捷方式列表的内容。当我选择一个项目时，这个项目将被设置。

**1）**我以前从未与a合作`Spinner`过。我知道它的外观以及如何实现它。但我有一些自定义要求：我不想要`Spinner`-dropdownbox 视图。我的意思是，当我`LongClick`对我的一个快捷方式图像执行 a 时，我想弹出将显示一些内容的列表。这可能吗？

**2）**因为我正在使用`Fragments`.. 我的动作在页脚中处理。当`Spinner`-list 弹出打开时，我希望它覆盖整个屏幕。可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:35:49.447

您可能只想从`Dialog`添加到它们列表中的项目开始正常：

```
final CharSequence[] items = {"Red", "Green", "Blue"};

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Pick a color");
builder.setItems(items, myOnClickListener) 
```

这将导致：![在此处输入图像描述](../Images/c4a4093393e095089a8c2ec0da67cf66.png)

来源：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

您可能想使用：

```
builder.setView(myView) 
```

设置您自己的`ListView`位置，您可以控制列表的外观。**

# c# - 使用 Observable 限制异步轮询

> ID：11664933
> 
> 赞同：0
> 
> 时间：2012-07-26T08:05:15.133
> 
> 标签：c#, system.reactive, polling

也许我在这里推动了 Rx 的合理范围，但我想做的是轮询远程状态，但将轮询速度限制在合理的范围内。

我目前拥有的伪代码：

```
IObservable<data> RemoteObservable(Remote remote) 
{
   var onceonly = Observable.FromAsyncPattern(remote.Begin, remote.End);
   return Observable.Defer(() => onceonly())
                    .ObserveOn(Scheduler.ThreadPool)
                    .Repeat();
} 
```

我无法确定 using`Throttle`或`Interval`in there 是否有帮助。在我看来，节流是关于限制传入事件，而不是限制重复率。

* * *

**编辑**：我问/回答了一个关于下面子问题的单独问题：[如何使“延迟”的 observable 只订阅第一个订阅者？](https://stackoverflow.com/q/11684370/11410).

*子问题：有没有办法允许对这种 Observable 进行两次订阅，而不会创建两倍的远程调用？我问是因为我想在 UI 中持续显示状态，但也在某些活动期间对其进行监控（这是我尝试使用 Observables 执行此操作的原因之一）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:26:48.977

怎么样：

```
var onceOnly = Observable.FromAsyncPattern(remote.Begin, remote.End);

Observable.Timer(TimeSpan.Zero, TimeSpan.FromSeconds(5))
    .SelectMany(_ => onceOnly()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:08:23.423

对于子问题，听起来您可以让一件事监听该对象的事件（我不熟悉 Observables，因此不确定它是如何工作的），然后让该事物触发自己的事件，您可以多次订阅该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:36:51.960

我设法在[这里找到](http://social.msdn.microsoft.com/Forums/pl-PL/rx/thread/52e3744e-cb18-4745-951f-51596a0f3b2d)了一个类似的问题，我的代码的更新示例如下所示：

```
return Observable.Defer(() => onceonly())
                 .ObserveOn(Scheduler.ThreadPool)
                 .Concat(Observable.Empty<data>().Delay(TimeSpan.FromSeconds(5)))
                 .Repeat(); 
```

这*似乎*有效。

（但是我发现我的`remote`对象在每次调用时都需要重新实例化`FromAsyncPattern`。不知道我该怎么`Repeat`做）

# ruby - 仅从 ruby 中的哈希中获取符号

> ID：11664936
> 
> 赞同：-1
> 
> 时间：2012-07-26T08:05:32.727
> 
> 标签：ruby

鉴于我在红宝石中有这样的哈希

```
MyHash = { 
  :item1 => { :key1 => :value1, .... },
  :item2 => { :key1 => :value1, .... },
  ...
} 
```

打电话时，`MyHash[:item1]`我得到了完整的对象。我怎样才能只得到`:item1`符号呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:13:18.683

如果你只是在寻找钥匙，你可以这样做

```
MyHash.each_key do |key|
  puts key
end

# Output
item1
item2
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:14:14.067

您可以使用[Hash#keys](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-keys)，例如`MyHash.keys.first`.

# c - C - 这条线在这个结构中是什么意思？

> ID：11664938
> 
> 赞同：-4
> 
> 时间：2012-07-26T08:05:48.190
> 
> 标签：c

> **可能重复：**
> [关于套接字编程头文件中使用的语法的查询](https://stackoverflow.com/questions/3829435/query-regarding-syntax-used-in-a-header-file-for-socket-programming)

```
struct sockaddr_un 
{
   __SOCKADDR_COMMON (sun_);
   char sun_path[108];/* Path name. */ 
}; 
```

`__SOCKADDR_COMMON (sun_);` 我想知道这条线是什么意思

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T08:10:04.050

`_SOCKADDR_COMMON`是一个宏。

```
#define __SOCKADDR_COMMON(p)  sa_family_t p##family 
```

所以这个电话：

```
__SOCKAXDDR_COMMON(sun_) 
```

将扩展为：

```
sa_family_t sun_family; 
```

# javascript - 在缓存中输入文本？

> ID：11664939
> 
> 赞同：0
> 
> 时间：2012-07-26T08:05:52.540
> 
> 标签：javascript, jquery, browser, web, validation

我正在`type="text"`使用 JavaScript (jQuery) 验证一些输入 () 框。

它们位于`$('').dialog()`您单击按钮时出现的框上。

当我第一次显示对话框时，我的验证码一切正常：

```
function verifyContactForm() {
    formValid = true;
    txtSubject = $('#txtSubject');
    txtRoom = $('#txtRoom');
    txtMessage = $('#txtMessage');

    if (txtSubject.val() == "") {
       formValid = false;
       txtSubject.css('border-color', 'red');
    }
    else
       txtSubject.css('border-color', 'lightgray');

    if (txtRoom.val() == "") {
       formValid = false;
       txtRoom.css('border-color', 'red');
    }
    else
       txtRoom.css('border-color', 'lightgray');

    if (txtMessage.val() == "") {
       formValid = false;
       txtMessage.css('border-color', 'red');
    }
    else
       txtMessage.css('border-color', 'lightgray');

    return formValid;
} 
```

在用户结束对话并且一切都有效后，它使用 ajax 调用将数据发送到服务器。

现在，当用户第二次打开对话框而不重新加载页面时，在我的文本元素中，旧文本仍然存在。文本未显示在输入框中，但是当我选择带有`.val()`它的文本时，其中仍然包含旧文本。

有人知道为什么会这样吗？

我认为这与缓存有关，但我不确定，所以我在问这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:17:30.333

这个问题可以用这个解决方案解决。

主要问题是当您没有正确关闭对话框并将其从 DOM 中删除时，您会遇到一些问题......

[jquery：如何在关闭时完全删除对话框](https://stackoverflow.com/questions/2864740/jquery-how-to-completely-remove-a-dialog-on-close)

这个链接说明了我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:21:24.577

`form_element.reset()`打开对话框或发送数据后调用。

# android - 如何在带有自定义 ArrayAdapter 的 ListView 中使用 ViewPropertyAnimator？

> ID：11664942
> 
> 赞同：0
> 
> 时间：2012-07-26T08:06:08.987
> 
> 标签：android, android-animation

我有一个自定义`ArrayAdapter`填充一个`ListView`. 这里是：

```
public class FilesAdapter extends ArrayAdapter<PutioFileLayout> {

    Context context;
    int layoutResourceId;
    List<PutioFileLayout> data = null;

    public FilesAdapter(Context context, int layoutResourceId, List<PutioFileLayout> data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        FileHolder holder = null;

        if (row == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new FileHolder();
            holder.textName = (TextView) row.findViewById(R.id.text_fileListName);
            holder.textDescription = (TextView) row.findViewById(R.id.text_fileListDesc);
            holder.imgIcon = (ImageView) row.findViewById(R.id.img_fileIcon);

            row.setTag(holder);
        } else {
            holder = (FileHolder) row.getTag();
        }

        PutioFileLayout file = data.get(position);
        holder.textName.setText(file.name);
        holder.textDescription.setText(file.description);
        holder.imgIcon.setImageResource(file.icon);

        return row;
    }

    static class FileHolder {
        TextView textName;
        TextView textDescription;
        ImageView imgIcon;
    }
} 
```

我有一个`Fragment`首先用一个项目初始化自定义适配器，上面写着“正在加载”，然后做一些网络工作，最后用真实信息更新适配器。

当加载完成并且真实信息进入时，我想要某种动画。也许是一个简单的淡出。但是我不知道发生这种情况时如何`.animate()`在我的任何`ListView`行上使用。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:12:57.857

在您回电时，只需执行以下操作： listView.getChildAt(...).animate();

# php - 来自服务器和本地时间的 PHP 或 Javascript 日期和时间代码

> ID：11664944
> 
> 赞同：4
> 
> 时间：2012-07-26T08:06:10.233
> 
> 标签：php, javascript, jquery

有没有人有一个简单的代码来显示从网络服务器获取的周数、日期和时间？

然后是另一个从本地计算机获取时间的代码？

我正在寻找 JS 或 PHP 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:18:40.737

On server side you can use (`PHP`)

```
$currentWeekNumber = (int)date('w'); // ISO-8601 week number of the year
$date = date('H:i:s d-m-Y'); // for example (you can use different format) 
```

JS implementation is not so trivial. There is no built-in function, but here is an example of what is done.

```
function getWeek (getdate) { 
        var a, b, c, d, e, f, g, n, s, w; 

        $y = getdate.getFullYear(); 
        $m = getdate.getMonth() + 1; 
        $d = getdate.getDate(); 

        if ($m <= 2) { 
            a = $y - 1; 
            b = (a / 4 | 0) - (a / 100 | 0) + (a / 400 | 0); 
            c = ((a - 1) / 4 | 0) - ((a - 1) / 100 | 0) + ((a - 1) / 400 | 0); 
            s = b - c; 
            e = 0; 
            f = $d - 1 + (31 * ($m - 1)); 
        } else { 
            a = $y; 
            b = (a / 4 | 0) - (a / 100 | 0) + (a / 400 | 0); 
            c = ((a - 1) / 4 | 0) - ((a - 1) / 100 | 0) + ((a - 1) / 400 | 0); 
            s = b - c; 
            e = s + 1; 
            f = $d + ((153 * ($m - 3) + 2) / 5) + 58 + s; 
        } 

        g = (a + b) % 7; 
        d = (f + g - e) % 7; 
        n = (f + 3 - d) | 0; 

        if (n < 0) { 
            w = 53 - ((g - s) / 5 | 0); 
        } else if (n > 364 + s) { 
            w = 1; 
        } else { 
            w = (n / 7 | 0) + 1; 
        } 

        $y = $m = $d = null; 

        return w; 
    } 

weeknumber = getWeek(new Date()); 
```

* * *

**UPD:** Today, [**momentjs**](http://momentjs.com/) is capable of many things regarding dates in JS.

# javascript - 如何从 HTML5 输入中删除验证错误？

> ID：11664945
> 
> 赞同：2
> 
> 时间：2012-07-26T08:06:15.757
> 
> 标签：javascript, html, validation

客户端有一个使用 AJAX 回调提交的联系表单。完成 AJAX 请求后，表单字段将被清除。

这就是问题的表现：清空的表单字段立即被浏览器标记为错误。

有没有办法使用 JavaScript 消除验证错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:18:59.040

Don't clear individual values, just use the `reset()` function on the form element. This clears the form to its original (empty) state and no errors appear.

# c# - C# 超出范围处理多个 sql 语句

> ID：11664946
> 
> 赞同：1
> 
> 时间：2012-07-26T08:06:16.427
> 
> 标签：c#, sql

我有这个代码片段：

变量 m 是一个字符串，设置为第一个 sql 命令返回的 Name，即关闭，然后第二个用于返回其他详细信息。此时 m 用于填充视图，但 Visual Studio 说它是一个未分配的变量。我该如何解决？

```
SqlCommand mcom = new SqlCommand("SELECT * FROM [Rica].[dbo].[MaritialStatus] WHERE ID=" + myReader["MaritalStatusID"], mnner);

SqlDataReader mread = null;
mread = mcom.ExecuteReader();

while (mread.Read())
{
    m = mread["Name"].ToString();
}
mnner.Close();

user_table.Text = user_table.Text + "<tr><td>"+ myReader["PostCode"] +"</td>";

//user details
SqlConnection inner = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["RicaConnectionString"].ConnectionString);
inner.Open();

SqlCommand icom = new SqlCommand("SELECT * FROM [Rica].[dbo].[User] WHERE ID=" + myReader["ID"], inner);

SqlDataReader iread = null;
iread = icom.ExecuteReader();

while (iread.Read())
{
    user_table.Text = user_table.Text + "<td>" + iread["NamePrefix"] + " " + iread["FirstName"] + " " + iread["LastName"] + "</td><td>" + iread["Username"] + "</td><td>" + g + "</td><td>" + m + "</td></tr>";
}

iread.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:10:13.747

未分配的编译器是完全正确`m`的。例如，可能**没有返回行**。只需设置要用于无行情况的初始值，例如：

```
string m = null; 
```

更具体地说，对于 a `while`/ `foreach`etc 中的赋值， / 之后的`while`“确定赋值”与*之前*`foreach`的“确定赋值”相同，因为可能没有执行迭代（即 a在空集上，或者测试立即返回）。*`foreach``while``false`*

 *我还必须观察到您当前的代码中存在**很多**问题；很多缺失`using`，SQL 注入漏洞（这些都是潜在的大问题），等等，xss 漏洞（这也是一个大问题）。

使用像 dapper-dot-net 这样的工具可以修复 SQL 注入，允许非常简单的参数化和读取，并处理命令/读取器的正确处理。xss 问题应该通过正确的 html 编码来解决。尽管事实上，很少有 SQL 代码和 HTML 代码像这样彼此相邻。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:09:06.970

局部变量*最初是*未分配的，因此您需要在使用之前分配/初始化*它们*。

```
string m=string.Empty; 
```*

# android - 为什么下载我的应用程序的用户数量下降

> ID：11664948
> 
> 赞同：-3
> 
> 时间：2012-07-26T08:06:19.310
> 
> 标签：android, google-play

几个月前，我在 Google Play 上发布了一个应用程序。在上个月，我开始平均每天获得 10 次下载（仍然不是很多，但你必须从哪里开始）。5天前突然下载量下降到每天0-1次。

我不知道为什么会这样。我还想说，我的评分如下：
5 - 16 个用户。
2 - 1 个用户。
1 - 1 个用户。

我在 5 天前获得了 1 星评级。这是下载量下降的原因吗？
这只是巧合吗？
我该怎么做才能改变它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:08:53.667

您的评分是告诉您的用户有关您的应用程序的信息。如果您对少数用户反映不佳，那么您显然会缺乏下载。

以批判的眼光查看您的应用程序，找出您的应用程序存在哪些问题，然后对其进行增强并修复这些问题。它是一个过程。还要注意用户发送给您的日志以及用户对您的应用的评价。仔细聆听以了解用户遇到的应用程序的具体问题，然后修复它。

# iphone - 如何通过soap消息发送多个参数两个Web服务？

> ID：11664949
> 
> 赞同：0
> 
> 时间：2012-07-26T08:06:22.743
> 
> 标签：iphone, web-services

我能够发送一个参数及其工作..但我使用两个参数的方式相同但它不起作用。请查看下面的代码,,,,,

```
NSString *soapMessage = 

    [NSString stringWithFormat:
     @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
     "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
     "<soap:Body>"
     "<hospitalDetails xmlns=\"http://tempuri.org/\">"
     "<stateName>%@</stateName>"
     "<hospitalName>%@</hospitalName>"
     "</hospitalDetails>"
     "</soap:Body>"
     "</soap:Envelope>",state,hospital]; 
```

# c# - 如何通过属性值更改 linq 中 XML 文档的值？

> ID：11664952
> 
> 赞同：0
> 
> 时间：2012-07-26T08:06:42.790
> 
> 标签：c#, xml, linq, replace

示例 XML 文件

```
<SiEventSchedule deleteStart="2012/01/21 00:00:00" deleteEnd="2012/01/21 23:59:59">
</SiEventSchedule> 
```

代码：

```
var el = doc.Descendants(ns + "SiEventSchedule").Select(x => x.Attribute("deleteStart").Value).First();
string[] s = el.ToString().Split(' ');
s[0] = today.ToString("yyyy/MM/dd");
String s5 = String.Join(" ", s);
el.Replace(el, s5); // This line is not working 
```

只有代码的最后一行不起作用，其他一切都在起作用。谁能建议如何更新这个值？

```
<SiEventSchedule deleteStart="2012/01/21 00:00:00" deleteEnd="2012/01/21 23:59:59">
</SiEventSchedule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:11:23.413

那 ？

```
using System.Xml.Linq; 

XDocument xmlFile = XDocument.Load("books.xml");  

var query = from c in xmlFile.Elements("catalog").Elements("book")     
            select c;  

foreach (XElement book in query)  
{ 
   book.Attribute("attr1").Value = "MyNewValue"; 
} 

xmlFile.Save("books.xml"); 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:11:23.580

不太确定您要对选择做什么，但是如果您想更改属性的值，方法如下：

```
 XAttribute attr = doc.Descendants(ns + "SiEventSchedule").Select(x => x.Attribute("deleteStart")).First();
        attr.SetValue(attr.Value.Replace(oldValue, newValue)); 
```

# javascript - 如何在 Javascript 中的 JSON 字符串中编码/解码阿拉伯语？

> ID：11664953
> 
> 赞同：0
> 
> 时间：2012-07-26T08:06:55.070
> 
> 标签：javascript, unicode, urlencode

我想先编码一个 JSON 字符串（它有一些**阿拉伯语单词**），然后在我的 JavaScript 文件中对其进行解码。

PS：如果 JSON 字符串只有英文单词，这段代码可以正常工作。但我希望它也适用于**阿拉伯语单词**。

编码：

```
<input type="hidden" id="cei-nav-urlparam-ceiIndex" value='<%= URLEncoder.encode(ceiIndexTree, "UTF-8") %>' /> 
```

解码：

```
 this.initFiltersValues = function(ceinavUrlPara) {
    ceinavUrlParams = unescape(ceinavUrlPara);
    ceinavUrlParams = ceinavUrlParams.replace(/\+/g, " ");
    var res = $.parseJSON(ceinavUrlParams);
    console.log('INITIAL FILTER FROM URL: '+ceinavUrlParams);
    return res;
   }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:14:44.830

**正确的方式**

您正在将数据插入 HTML 文档，而不是 URL。使用[`org.apache.commons.lang.StringEscapeUtils escapeHtml()`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#escapeHtml%28java.io.Writer,%20java.lang.String%29)或其他 HTML 编码功能。

然后你不需要做任何事情来将它解码为 JSON 字符串——浏览器会这样做。直接去就行了`parseJSON`。

**修复你的方式**

请参阅[手册`unescape`](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Functions#escape_and_unescape_functions)中的说明：

> escape 和 unescape 函数不适用于非 ASCII 字符，已被弃用。在 JavaScript 1.5 及更高版本中，使用 encodeURI、decodeURI、encodeURIComponent 和 decodeURIComponent。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:00:52.623

您的页面如何获取数据？通过 ajax 请求还是通过普通提交？在不知道这一点的情况下，我只能给你一个常见的建议。使您的页面成为 utf8 页面。这样，浏览器将处理转换。在我的项目中，这样做后显示俄语或中文字符没有问题。浏览器完成了这项工作。我只需要告诉他我正在使用 utf-8 数据。

所以将它添加到您的 html 页面：

```
<title>
 <meta http-equiv="Content-Type" CONTENT="text/html; charset=utf-8">
</title> 
```

这对你的html-forms：

```
<form name="xxx" id="yyy" accept-charset="UTF-8" method="POST" > 
```

并使用它来使您的 ajax 请求与 utf-8 兼容：

```
setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8"); 
```

这对我有帮助。我还必须“手动”将服务器响应（用于 ajax 请求）设置为 utf-8。我不得不更改 http 标头“Content-Encoding”="utf-8"。如何实现这一点取决于您的解决方案。就我而言，我必须这样做。在 jsp 或 php 中可能有其他方法可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T05:06:05.917

使用 UTF-8 而不是 ISO-8859-1 解决了这个目的。

# c# - 如何在 WPF 中创建设计时属性？

> ID：11664956
> 
> 赞同：2
> 
> 时间：2012-07-26T08:07:06.063
> 
> 标签：c#, wpf, xaml

如何使用设计时属性制作自己的 UserControl？我想要像这样的功能

```
<MyControl MyNormalProperty="..." d:MyDesignProperty="..."></MyControl> 
```

我注意到在这样的 Blend 属性中使用`mc:Ignorable="d"`（在运行时加载 XAML 时忽略它们）和`xmlns:d="some namespace"`，但我无法弄清楚如何在我的代码隐藏文件中为 UserControl 定义这样的属性。

我可能可以像这样做 AttachedProperty

```
<MyControl Whatever.MyDesignProperty="..."></MyControl> 
```

但我希望有更统一的解决方案。

提前致谢

# apache - Apache Lucene 索引

> ID：11664957
> 
> 赞同：0
> 
> 时间：2012-07-26T08:07:12.710
> 
> 标签：apache, lucene

我正在学习 Apache Lucene，我对索引的性能有一些疑问，

1.  我正在根据数据库中的数据构建索引，数据库的架构是 Lucene 文档的架构。
2.  我有两个选项可以回复搜索。首先是搜索索引并用索引响应值，否则搜索索引，获取结果的id（即表的主键）并查询数据库。对于前者，我需要将表的值存储在索引中，以便我可以使用 Index.Store.Yes 检索值，而对于后者，它足以索引数据而不是使用 Index.Store 存储数据。不，所以索引不会更大。
3.  使用前一种技术会影响性能（通过存储所有值来搜索索引）或搜索索引并查询数据库（通过存储所有值）会影响性能。
4.  哪个是最好的方法，或者是否有任何其他解决方案可以解决上述问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:11:07.603

这真的取决于，如果您要拥有一个庞大的数据集，通常最好保持索引尽可能轻，并按照您的描述查询数据库。但是，如果数据集很小，也可以存储它们......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T05:26:07.233

Apache Lucene 中搜索操作的性能取决于索引文件的权重。尽量保持轻量。那么在你的情况下，我建议对这两种情况进行时间戳测试。至少进行 20 次以上的观察。计算一个平均值。然后得到的统计数据肯定会帮助您做出决定。

# javascript - jQuery 回调 - 严格违反

> ID：11664958
> 
> 赞同：6
> 
> 时间：2012-07-26T08:07:16.223
> 
> 标签：javascript, jquery, callback, this, strict

我得到了关于不在此处概述的基本想法，`this`但[老实说](https://stackoverflow.com/questions/7300005/javascript-jslint-what-to-replace-jquerythis-with-when-using-use-strict)，它有点博学。所以，用更平淡的术语来说：`method``strict mode`

我有一个像这样的处理程序：

```
$('.myClass').one('keyup', function() {
    var $this = $(this);
    etc etc
}); 
```

我想把它改成这样：

```
function myFunction () {
    var $this = $(this);
    etc etc
};
$('.myClass1').one('keyup', myFunction);
$('.myClass2').one('keyup', myFunction); etc 
```

它不喜欢它，`strict mode`因为我在方法`this`之外使用它。我明白了。

但是，我需要`myFunction`与处理程序分开，因为（1）它附加到各种类/元素和（2）我用来在各个点`.off().one('keyup', myFunction)`重置`one`各种类的处理程序。

那么如何在不违反`this`业务的情况下绕过单独的回调函数呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T08:13:00.650

> 在严格模式下，我得到了关于这不是一种方法的基本想法......

是的，但是您混淆了两个不相关的东西：严格模式和 JSLint。它们在很大程度上是不相关的（除了 JSLint 可以选择要求严格模式）。

您的代码在严格模式下没有问题。它是完全有效和适当的（因为 jQuery 的使用方式`this`）。[示例](http://jsbin.com/ijeqey)那里**没有**“严格违规”。

JSLint 不喜欢它，但是 JSLint 不喜欢很多完全有效和适当的东西。*JSLint 检测到一些被广泛认为是问题的事物（如缺少分号）和 Douglas Crockford 从风格*角度不喜欢的事物的组合。克罗克福德聪明又见多识广，但并不是每个人都同意他的风格选择。

Lint 工具非常有用，是工具包的重要组成部分。JSLint 通过将实质问题与样式问题混为一谈（尽管理所当然地认为这是一条很好的路线，在我看来），但 JSLint 的帮助并不大（在我看来）。您可以考虑使用[JSHint](http://jshint.com)，这是一个可以让您更好地控制检查内容的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:13:10.103

你不能改用事件对象吗？

IE

```
function myFunction (e) {
    var $this = $(e.currentTarget);
}; 
```

示例：http: [//jsfiddle.net/gRoberts/cRnb3/](http://jsfiddle.net/gRoberts/cRnb3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:15:15.157

您可以读取通过的事件对象的 currentTarget ，例如：

```
function myFunction (event) {
    var $this = $(event.currentTarget);
    etc etc
};
$('.myClass1').one('keyup', myFunction);
$('.myClass2').one('keyup', myFunction); etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:24:10.300

尝试这个

```
function myFunction () {
    var $this = $(this);
    etc etc
};
var obj=  $('.myClass1');
obj.myFunction =myFunction ;

obj.one('keyup', myFunction);
obj.one('keyup', myFunction); etc 
```

# actionscript-3 - Flash Shoutcast 播放器

> ID：11664964
> 
> 赞同：0
> 
> 时间：2012-07-26T08:07:39.293
> 
> 标签：actionscript-3, actionscript-2, flash-cs5, flash

我有以下代码，来自在线教程，但在 Flash 播放器中播放流时遇到问题。

代码：

```
import flash.net.URLRequest;
import flash.media.Sound;
import flash.ui.Mouse;
import flash.media.SoundChannel;

var loadSnd:URLRequest = new URLRequest("http://s7.voscast.com:7174/");
var thisSnd:Sound = new Sound();
//////////////////////////////////////////////// Stop Button
var sndTranse:SoundChannel = new SoundChannel();
thisSnd.load(loadSnd);

play_Btn.addEventListener(MouseEvent.CLICK,playF);
stop_Btn.addEventListener(MouseEvent.CLICK,stopF);
stop_Btn.visible = false;

function playF(event:MouseEvent):void{
SoundMixer.stopAll();
sndTrans = thisSnd.play();
play_Btn.visible = false;
stop_Btn.visible = true;
}

function stopF(event:MouseEvent):void{
//SoundMixer.stopAll();
sndTrans.stop();
play_Btn.visible = true;
stop_Btn.visible = false;
} 
```

我尝试过： [Flex/Flash Shoutcast 播放器](https://stackoverflow.com/questions/1704121/flex-flash-shoutcast-player) [如何在 Flash 中流式传输广播电台广播（Shoutcast Flash Player）](https://stackoverflow.com/questions/1273454/how-to-stream-a-shoutcast-radio-broadcast-in-flash-shoutcast-flash-player)

我正在使用最新的带有 AS3 的 Flash Builder。

有人可以告诉我播放音频的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T14:39:19.503

这是关于错误的变量；您声明为 sndTranse 但您在函数中使用了 sndTrans。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:50:38.110

在 URL 的末尾添加一个分号。

var loadSnd:URLRequest = new URLRequest("http://s7.voscast.com:7174/;");

如果 SHOUTcast 服务器在您的用户代理中检测到“Mozilla”，它们将返回一个管理面板。这解决了这个问题。

在另一个论坛上找到了这个。

# php - 在清理数据时，SQL LIKE 查询是否需要特别注意？

> ID：11664971
> 
> 赞同：0
> 
> 时间：2012-07-26T08:08:10.573
> 
> 标签：php, mysql, sql, pdo

在简单的场景中，用户输入用于使用 SQL LIKE 过滤数据，是否有我应该注意的特殊字符？

```
$input  = filter_input(INPUT_POST, 'name', FILTER_SANITIZE_STRING);

// Should I strip characters like '%'?

$sth    = $db->prepare("SELECT `id` FROM `names` WHERE `name` LIKE :name");
$sth->execute(['name' => $input . '%']); 
```

我指的是任何可能显着减慢查询/占用 CPU 并因此被用于恶意目的的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:16:23.437

您需要关心**$input**，它将包含逗号或引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:38:57.067

您应该转义用于通配符匹配的字符。

请参阅[转义 MySQL 通配符](https://stackoverflow.com/questions/3683746/escaping-mysql-wild-cards)以获得关于这样做的很好的讨论。

# ios - iOS GDB 将检查寄存器命令的输出存储到变量

> ID：11664975
> 
> 赞同：2
> 
> 时间：2012-07-26T08:08:46.100
> 
> 标签：ios, gdb, jailbreak, mach

在 iOS GDB 我有这个：

```
(gdb) x/s $r1
0x3154129c:  "_receivedStatusBarData:actions:" 
```

如何将字符串存储到GDB`_receivedStatusBarData:actions:`中的变量中？`$1`请指教谢谢。

编辑：

我想我从[Delorie](http://www.delorie.com/gnu/docs/gdb/gdb_56.html)那里找到了答案，它提到了

> x 命令打印的地址和内容不会保存在值历史记录中，因为它们通常太多了，它们会妨碍。相反，GDB 将这些值作为便利变量 $_ 和 $__ 的值，供后续在表达式中使用。在 x 命令之后，检查的最后一个地址可用于方便变量 $_ 中的表达式。经检查，该地址的内容在便利变量 $__ 中可用。

# android - Android XML 可以输入“@”吗？

> ID：11664983
> 
> 赞同：1
> 
> 时间：2012-07-26T08:08:58.843
> 
> 标签：android, xml, android-xml

我想用 ABC@gmail.com 之类的电子邮件语法对字符串资源进行硬编码。但是，eclipse 弹出一个错误，说不能包含“@”。

'@' 如何包含在字符串资源中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:14:49.960

试试这个：

在 strings.xml 中添加字符串：

```
<string name="email">xyz@gmail.com</string> 
```

并尝试在活动中将其设置为：

```
textView.setText(R.string.email); 
```

# jquery - 如何检查 bootstrap 的 jquery-plugin 是否正常工作？

> ID：11664990
> 
> 赞同：3
> 
> 时间：2012-07-26T08:09:24.043
> 
> 标签：jquery, twitter-bootstrap

有没有办法检查`twitter-bootstrap`的`jquery`插件是否正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:33:18.300

采用

```
if (typeof jQuery != 'undefined') {

    alert("jQuery library is loaded!");

}else{

    alert("jQuery library is not found!");

} 
```

或者

```
if (jQuery) {  

   alert("jQuery library is loaded!");

} else {

   alert("jQuery library is not found!");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T00:49:41.170

一个更好的答案已经在这里：[如何检查 Twitter Bootstrap 是否已加载](https://stackoverflow.com/questions/13933000/how-to-check-if-twitter-bootstrap-is-loaded)。如果 jQuery 也有问题，例如当您从上面的链接运行代码时没有定义“$”字符，或者如果您想检查 jQuery 本身是否正在加载，请在此处尝试：[jQuery is not defined](https://stackoverflow.com/questions/2194992/jquery-is-not-defined)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:51:45.060

我遇到了同样的问题。这是我如何从 CDN 加载引导程序或失败到本地的方法。

```
 <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/js/bootstrap.min.js"></script>
    <script>if ($('body').popover) { document.write('bootstrap loaded from cdn') }
            else { document.write('cdn bootstrap failed, going local');
                   document.write('<script src="js/vendor/bootstrap.min.js"><\/script>') }
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-17T18:52:33.627

如果 bootstrap.js 正确加载并正常工作，如何检查 Python 和 Appium。

# vb.net - 停止滚动查看器向上/向下滚动键

> ID：11664992
> 
> 赞同：1
> 
> 时间：2012-07-26T08:09:33.847
> 
> 标签：vb.net, xaml, silverlight-4.0, scroll

我有一个包含子视图的滚动查看器。如果该子视图中的任何内容具有焦点并且我按下向下/向上键，则内容向下/向上滚动。

如果我没有刚刚实现基于箭头键的导航系统，这不会是一个问题。所以我使用这 4 个箭头键更容易地在对象之间导航。现在的问题是当用户向上或向下按下时内容会滚动。我想禁用滚动行为。

我已经尝试了几件事：

*   将 KeyDown 事件添加到滚动查看器，但它永远不会被击中。
*   在滚动查看器上将 istabstop 设置为 false
*   在我的滚动查看器内的网格上将 keyeventargs “handled”设置为 true，它会在我的代码被执行（导航）之前被调用，所以也不能使用它。

**编辑**

这是在 XAML 中处理事件的方式：

```
<i:Interaction.Behaviors>
    <catel:KeyPressToCommand Command="{Binding CancelCellInputCommand}" Key="Escape" />
    <catel:KeyPressToCommand Command="{Binding LeftArrowNavigationCommand}" Key="Left"/>
    <catel:KeyPressToCommand Command="{Binding UpArrowNavigationCommand}" Key="Up"/>
    <catel:KeyPressToCommand Command="{Binding RightArrowNavigationCommand}" Key="Right"/>
    <catel:KeyPressToCommand Command="{Binding DownArrowNavigationCommand}" Key="Down"/>
</i:Interaction.Behaviors> 
```

我可能会尝试阻止我的内容向上/向下滚动的任何其他解决方案？

**编辑2：**

经过更多研究，我发现项目符号点 1 这样做的原因是因为滚动查看器吃掉了 keydown 事件，可能是为了使滚动发生。不过，我还没有找到解决它的方法。有人说他将他的“IsTabStop”设置为假，但这根本没有区别。捕捉 KeyUp 确实有效，但为时已晚，无法阻止键滚动。我最后的手段是不使用向上/向下键来满足我的需求，但是在单元格中向上和向下需要向上/向下键，这只是逻辑。

我将不胜感激任何帮助和想法，因为我真的被困在这件事上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:34:53.863

如果您处理按键隧道事件 PreviewKeyDown，您可以获得该事件的 OriginalSource，然后尝试找到它的可视祖先，即 ScrollViewer。如果您找不到 ScrollViewer 祖先，请像以前一样处理您的密钥。如果你找到了，那就什么都不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:18:08.160

终于在[Silverlight 论坛](http://forums.silverlight.net/post/272190.aspx)上找到了一些东西。

毕竟，它类似于 Vincent Piels 解决方案，它使用 PreviewKeyDown 事件，但它需要一个自定义子 (contentcontrol) 事件才能在 XAML 中使用。

# php - opencart 中的网络服务

> ID：11664993
> 
> 赞同：2
> 
> 时间：2012-07-26T08:09:36.410
> 
> 标签：php, web-services, opencart, nusoap

我正在尝试在 opencart 中制作 nusoap 网络服务。为此，我下载了 nusoap 库并将其复制到 system/library/lib 中，然后我在结帐模块中创建了一个控制器类，如下所示

> ```
>  <?php
>     class ControllerCheckoutCamero extends Controller { 
>       public function index() {
>                //require_once('lib/nusoap.php');
>               $this->load->library('lib/nusoap');
> 
>     // Create the server instance
>     $server = new soap_server();
>     // Initialize WSDL support
>     $server->configureWSDL('hellowsdl', 'urn:hellowsdl');
> 
>     // Register the method to expose
>     $server->register('hello',                // method name
>         array('name' => 'xsd:string'),        // input parameters
>         array('return' => 'xsd:string'),      // output parameters
>         'urn:hellowsdl',                      // namespace
>         'urn:hellowsdl#hello',                // soapaction
>         'rpc',                                // style
>         'encoded',                            // use
>         'Says hello to the caller'            // documentation
>     );
>     // Define the method as a PHP function
>     function hello($name) {
>             return 'Hello, ' . $name;
>     }
>     // Use the request to (try to) invoke the service
>     $HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '';
>     $server->service($HTTP_RAW_POST_DATA);     
> 
>             }
>     }
>     ?> 
> ```

然后我通过访问 localhost/myopencart/index.php?route=checkout/camero 检查了我的控制器

我得到这样的nusoap默认webservice页面![在此处输入图像描述](../Images/a3886757666a6442d3efedcf02c9bb29.png)

但是当我单击该页面上的 WSDL 链接时，我被重定向到 opnecart 主页

我认为opencart路由器会出现这个问题，但我不知道如何处理它，我刚刚开始探索opencart。我在[这里](https://stackoverflow.com/questions/7644541/nusoap-implementation-for-opencart)找到了类似的问题，但我没有找到正确的答案。任何人都可以提供一些建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:59:09.960

我认为你的代码是正确的。我自己尝试过，如果你去 localhost/myopencart/index.php?route=checkout/camero&wsdl 它应该可以工作

nusoap 代码将使用 PHP_SELF，因此不会为您的服务放置完整的 URL。

此外，在编写客户端代码时，使用 $client = new nusoap_client('http://localhost/myopencart/index.php?route=checkout/camero&wsdl', true); ...

希望有帮助

# android - Android 通用图像加载器问题

> ID：11664994
> 
> 赞同：0
> 
> 时间：2012-07-26T08:09:39.480
> 
> 标签：android, download, imageview

好的，参考[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。这个应用程序列出了 array.xml 中的所有 url。[是否可以按照http://getablogger.blogspot.com/2008/01/android-download-image-from-server-and.html](http://getablogger.blogspot.com/2008/01/android-download-image-from-server-and.html)的指南在 array.xml 中不指定 URL 的情况下列出图像，该指南仅指定一个服务器 ip 以检索所有图像。

**来自 getablogger 的代码**

```
ImageView imView;
String imageUrl="http://11.0.6.23/";
Random r;
/** Called when the activity is first created. */ 
@Override
public void onCreate(Bundle icicle) {
super.onCreate(icicle);
setContentView(R.layout.main);
r= new Random();

Button bt3= (Button)findViewById(R.id.get_imagebt);
bt3.setOnClickListener(getImgListener);
imView = (ImageView)findViewById(R.id.imview);
} 

View.OnClickListener getImgListener = new View.OnClickListener()
{

@Override
public void onClick(View view) {
// TODO Auto-generated method stub

//i tried to randomize the file download, in my server i put 4 files with name like
//png0.png, png1.png, png2.png so different file is downloaded in button press
int i =r.nextInt()%4;
downloadFile(imageUrl+"png"+i+".png");
Log.i("im url",imageUrl+"png"+i+".png");
}

}; 
```

**通用图像加载器中的代码**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="heavy_images">
        <item>https://lh6.googleusercontent.com/-jZgveEqb6pg/T3R4kXScycI/AAAAAAAAAE0/xQ7CvpfXDzc/s1024/sample_image_01.jpg</item>
        <item>https://lh4.googleusercontent.com/-K2FMuOozxU0/T3R4lRAiBTI/AAAAAAAAAE8/a3Eh9JvnnzI/s1024/sample_image_02.jpg</item>
        <item>https://lh5.googleusercontent.com/-SCS5C646rxM/T3R4l7QB6xI/AAAAAAAAAFE/xLcuVv3CUyA/s1024/sample_image_03.jpg</item>
        <item>https://lh6.googleusercontent.com/-f0NJR6-_Thg/T3R4mNex2wI/AAAAAAAAAFI/45oug4VE8MI/s1024/sample_image_04.jpg</item>
        <item>https://lh3.googleusercontent.com/-n-xcJmiI0pg/T3R4mkSchHI/AAAAAAAAAFU/EoiNNb7kk3A/s1024/sample_image_05.jpg</item>
        <item>https://lh3.googleusercontent.com/-X43vAudm7f4/T3R4nGSChJI/AAAAAAAAAFk/3bna6D-2EE8/s1024/sample_image_06.jpg</item>
        <item>https://lh5.googleusercontent.com/-MpZneqIyjXU/T3R4nuGO1aI/AAAAAAAAAFg/r09OPjLx1ZY/s1024/sample_image_07.jpg</item>
        <item>https://lh6.googleusercontent.com/-ql3YNfdClJo/T3XvW9apmFI/AAAAAAAAAL4/_6HFDzbahc4/s1024/sample_image_08.jpg</item>
        <item>https://lh5.googleusercontent.com/-Pxa7eqF4cyc/T3R4oasvPEI/AAAAAAAAAF0/-uYDH92h8LA/s1024/sample_image_09.jpg</item>
        <item>https://lh4.googleusercontent.com/-Li-rjhFEuaI/T3R4o-VUl4I/AAAAAAAAAF8/5E5XdMnP1oE/s1024/sample_image_10.jpg</item>
        <item>https://lh5.googleusercontent.com/-_HU4fImgFhA/T3R4pPVIwWI/AAAAAAAAAGA/0RfK_Vkgth4/s1024/sample_image_11.jpg</item>
        <item>https://lh6.googleusercontent.com/-0gnNrVjwa0Y/T3R4peGYJwI/AAAAAAAAAGU/uX_9wvRPM9I/s1024/sample_image_12.jpg</item>
        <item>https://lh3.googleusercontent.com/-HBxuzALS_Zs/T3R4qERykaI/AAAAAAAAAGQ/_qQ16FaZ1q0/s1024/sample_image_13.jpg</item>
        <item>https://lh4.googleusercontent.com/-cKojDrARNjQ/T3R4qfWSGPI/AAAAAAAAAGY/MR5dnbNaPyY/s1024/sample_image_14.jpg</item>
        <item>https://lh3.googleusercontent.com/-WujkdYfcyZ8/T3R4qrIMGUI/AAAAAAAAAGk/277LIdgvnjg/s1024/sample_image_15.jpg</item>
        <item>https://lh6.googleusercontent.com/-FMHR7Vy3PgI/T3R4rOXlEKI/AAAAAAAAAGs/VeXrDNDBkaw/s1024/sample_image_16.jpg</item>
        <item>https://lh4.googleusercontent.com/-mrR0AJyNTH0/T3R4rZs6CuI/AAAAAAAAAG0/UE1wQqCOqLA/s1024/sample_image_17.jpg</item>
        <item>https://lh6.googleusercontent.com/-z77w0eh3cow/T3R4rnLn05I/AAAAAAAAAG4/BaerfWoNucU/s1024/sample_image_18.jpg</item>
        <item>https://lh5.googleusercontent.com/-aWVwh1OU5Bk/T3R4sAWw0yI/AAAAAAAAAHE/4_KAvJttFwA/s1024/sample_image_19.jpg</item>
        <item>https://lh6.googleusercontent.com/-q-js52DMnWQ/T3R4tZhY2sI/AAAAAAAAAHM/A8kjp2Ivdqg/s1024/sample_image_20.jpg</item>
        <item>https://lh5.googleusercontent.com/-_jIzvvzXKn4/T3R4t7xpdVI/AAAAAAAAAHU/7QC6eZ10jgs/s1024/sample_image_21.jpg</item>
        <item>https://lh3.googleusercontent.com/-lnGi4IMLpwU/T3R4uCMa7vI/AAAAAAAAAHc/1zgzzz6qTpk/s1024/sample_image_22.jpg</item>
        <item>https://lh5.googleusercontent.com/-fFCzKjFPsPc/T3R4u0SZPFI/AAAAAAAAAHk/sbgjzrktOK0/s1024/sample_image_23.jpg</item>
        <item>https://lh4.googleusercontent.com/-8TqoW5gBE_Y/T3R4vBS3NPI/AAAAAAAAAHs/EZYvpNsaNXk/s1024/sample_image_24.jpg</item>
        <item>https://lh6.googleusercontent.com/-gc4eQ3ySdzs/T3R4vafoA7I/AAAAAAAAAH4/yKii5P6tqDE/s1024/sample_image_25.jpg</item>
        <item>https://lh5.googleusercontent.com/--NYOPCylU7Q/T3R4vjAiWkI/AAAAAAAAAH8/IPNx5q3ptRA/s1024/sample_image_26.jpg</item>
        <item>https://lh6.googleusercontent.com/-9IJM8so4vCI/T3R4vwJO2yI/AAAAAAAAAIE/ljlr-cwuqZM/s1024/sample_image_27.jpg</item>
        <item>https://lh4.googleusercontent.com/-KW6QwOHfhBs/T3R4w0RsQiI/AAAAAAAAAIM/uEFLVgHPFCk/s1024/sample_image_28.jpg</item>
        <item>https://lh4.googleusercontent.com/-z2557Ec1ctY/T3R4x3QA2hI/AAAAAAAAAIk/9-GzPL1lTWE/s1024/sample_image_29.jpg</item>
        <item>https://lh5.googleusercontent.com/-LaKXAn4Kr1c/T3R4yc5b4lI/AAAAAAAAAIY/fMgcOVQfmD0/s1024/sample_image_30.jpg</item>
        <item>https://lh4.googleusercontent.com/-F9LRToJoQdo/T3R4yrLtyQI/AAAAAAAAAIg/ri9uUCWuRmo/s1024/sample_image_31.jpg</item>
        <item>https://lh4.googleusercontent.com/-6X-xBwP-QpI/T3R4zGVboII/AAAAAAAAAIs/zYH4PjjngY0/s1024/sample_image_32.jpg</item>
        <item>https://lh5.googleusercontent.com/-VdLRjbW4LAs/T3R4zXu3gUI/AAAAAAAAAIw/9aFp9t7mCPg/s1024/sample_image_33.jpg</item>
        <item>https://lh6.googleusercontent.com/-gL6R17_fDJU/T3R4zpIXGjI/AAAAAAAAAI8/Q2Vjx-L9X20/s1024/sample_image_34.jpg</item>
        <item>https://lh3.googleusercontent.com/-1fGH4YJXEzo/T3R40Y1B7KI/AAAAAAAAAJE/MnTsa77g-nk/s1024/sample_image_35.jpg</item>
        <item>https://lh4.googleusercontent.com/-Ql0jHSrea-A/T3R403mUfFI/AAAAAAAAAJM/qzI4SkcH9tY/s1024/sample_image_36.jpg</item>
        <item>https://lh5.googleusercontent.com/-BL5FIBR_tzI/T3R41DA0AKI/AAAAAAAAAJk/GZfeeb-SLM0/s1024/sample_image_37.jpg</item>
        <item>https://lh4.googleusercontent.com/-wF2Vc9YDutw/T3R41fR2BCI/AAAAAAAAAJc/JdU1sHdMRAk/s1024/sample_image_38.jpg</item>
        <item>https://lh6.googleusercontent.com/-ZWHiPehwjTI/T3R41zuaKCI/AAAAAAAAAJg/hR3QJ1v3REg/s1024/sample_image_39.jpg</item>
    </string-array>
    <string-array name="light_images">
        <item>http://tabletpcssource.com/wp-content/uploads/2011/05/android-logo.png</item>
        <item>http://simpozia.com/pages/images/stories/windows-icon.png</item>
        <item>https://si0.twimg.com/profile_images/1135218951/gmail_profile_icon3_normal.png</item>
        <item>http://www.krify.net/wp-content/uploads/2011/09/Macromedia_Flash_dock_icon.png</item>
        <item>http://radiotray.sourceforge.net/radio.png</item>
        <item>http://www.bandwidthblog.com/wp-content/uploads/2011/11/twitter-logo.png</item>
        <item>http://weloveicons.s3.amazonaws.com/icons/100907_itunes1.png</item>
        <item>http://weloveicons.s3.amazonaws.com/icons/100929_applications.png</item>
        <item>http://t2.gstatic.com/images?q=tbn:ANd9GcTJixLIo_zlOPOILuxNWc5evK333pZCH8rugaTtv3SZSfiI39T0-3vWYQ</item>
        <item>http://www.idyllicmusic.com/index_files/get_apple-iphone.png</item>
        <item>http://www.frenchrevolutionfood.com/wp-content/uploads/2009/04/Twitter-Bird.png</item>
        <item>http://3.bp.blogspot.com/-ka5MiRGJ_S4/TdD9OoF6bmI/AAAAAAAAE8k/7ydKtptUtSg/s1600/Google_Sky%2BMaps_Android.png</item>
        <item>http://www.desiredsoft.com/images/icon_webhosting.png</item>
        <item>http://goodereader.com/apps/wp-content/uploads/downloads/thumbnails/2012/01/hi-256-0-99dda8c730196ab93c67f0659d5b8489abdeb977.png</item>
        <item>http://1.bp.blogspot.com/-mlaJ4p_3rBU/TdD9OWxN8II/AAAAAAAAE8U/xyynWwr3_4Q/s1600/antivitus_free.png</item>
        <item>http://cdn3.iconfinder.com/data/icons/transformers/computer.png</item>
        <item>http://cdn.geekwire.com/wp-content/uploads/2011/04/firefox.png?7794fe</item>
        <item>https://ssl.gstatic.com/android/market/com.rovio.angrybirdsseasons/hi-256-9-347dae230614238a639d21508ae492302340b2ba</item>
        <item>http://androidblaze.com/wp-content/uploads/2011/12/tablet-pc-256x256.jpg</item>
        <item>http://www.theblaze.com/wp-content/uploads/2011/08/Apple.png</item>
        <item>http://1.bp.blogspot.com/-y-HQwQ4Kuu0/TdD9_iKIY7I/AAAAAAAAE88/3G4xiclDZD0/s1600/Twitter_Android.png</item>
        <item>http://3.bp.blogspot.com/-nAf4IMJGpc8/TdD9OGNUHHI/AAAAAAAAE8E/VM9yU_lIgZ4/s1600/Adobe%2BReader_Android.png</item>
        <item>http://cdn.geekwire.com/wp-content/uploads/2011/05/oovoo-android.png?7794fe</item>
        <item>http://icons.iconarchive.com/icons/kocco/ndroid/128/android-market-2-icon.png</item>
        <item>http://thecustomizewindows.com/wp-content/uploads/2011/11/Nicest-Android-Live-Wallpapers.png</item>
        <item>http://c.wrzuta.pl/wm16596/a32f1a47002ab3a949afeb4f</item>
        <item>http://macprovid.vo.llnwd.net/o43/hub/media/1090/6882/01_headline_Muse.jpg</item>
        <!-- Special cases -->
        <item>file:///mnt/sdcard/Temp/UniversalImageLoader.png</item> <!-- Local image -->
        <item>http://upload.wikimedia.org/wikipedia/ru/b/b6/Как_кот_с_мышами_воевал.png</item> <!-- Link with special UTF-8 symbols -->
        <item>https://www.iabti.org/images/M_images/Twitter_Image/follow_twitter_button_d.png</item> <!-- Image from HTTPS -->
        <item>http://bit.ly/soBiXr</item> <!-- Redirect link -->
        <item></item> <!-- Empty link -->
        <item>http://wrong.site.com/corruptedLink</item> <!-- Wrong link -->
    </string-array>

</resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:48:56.180

您只需将这些 URL 保存在一个数组中并在您想要的位置调用它，而不是调用它的 ID `heavy_image`（它将是 something `R.id.something`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:18:43.207

然后简单地试试这个 -

```
private static final String TAG = "Image";
@SuppressWarnings("unused")
private boolean isImage = false;
private String reviewImageLink;

/** Called when the activity is first created. */
@SuppressWarnings("unused")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    reviewImageLink = getString(R.string.ImageURI);   // ImageURL
    URL reviewImageURL;
    String name = reviewImageLink.substring(reviewImageLink
            .lastIndexOf("/") + 1);
    try {
        reviewImageURL = new URL(reviewImageLink);
        if (!hasExternalStoragePublicPicture(name)) {
            isImage = false;
            new DownloadImageTask().execute(reviewImageURL);
            Log.v("log_tag", "if");
            isImage = true;
            File sdImageMainDirectory = new File(Environment
                    .getExternalStorageDirectory(), getResources()
                    .getString(R.string.directory)); // Storing Directory
            sdImageMainDirectory.mkdirs();
            File file = new File(sdImageMainDirectory, name);
            Log.v("log_tag", "Directory created");
        }

    } catch (MalformedURLException e) {
        Log.v(TAG, e.toString());
    }

}

private class DownloadImageTask extends AsyncTask<URL, Integer, Bitmap> {
    // This class definition states that DownloadImageTask will take String
    // parameters, publish Integer progress updates, and return a Bitmap
    protected Bitmap doInBackground(URL... paths) {
        URL url;
        try {
            url = paths[0];
            HttpURLConnection connection = (HttpURLConnection) url
                    .openConnection();
            int length = connection.getContentLength();
            InputStream is = (InputStream) url.getContent();
            byte[] imageData = new byte[length];
            int buffersize = (int) Math.ceil(length / (double) 100);
            int downloaded = 0;
            int read;
            while (downloaded < length) {
                if (length < buffersize) {
                    read = is.read(imageData, downloaded, length);
                } else if ((length - downloaded) <= buffersize) {
                    read = is.read(imageData, downloaded, length
                            - downloaded);
                } else {
                    read = is.read(imageData, downloaded, buffersize);
                }
                downloaded += read;
                publishProgress((downloaded * 100) / length);
            }
            Bitmap bitmap = BitmapFactory.decodeByteArray(imageData, 0,
                    length);
            if (bitmap != null) {
                Log.i(TAG, "Bitmap created");
            } else {
                Log.i(TAG, "Bitmap not created");
            }
            is.close();
            return bitmap;
        } catch (MalformedURLException e) {
            Log.e(TAG, "Malformed exception: " + e.toString());
        } catch (IOException e) {
            Log.e(TAG, "IOException: " + e.toString());
        } catch (Exception e) {
            Log.e(TAG, "Exception: " + e.toString());
        }
        return null;

    }

    protected void onPostExecute(Bitmap result) {
        String name = reviewImageLink.substring(reviewImageLink
                .lastIndexOf("/") + 1);
        if (result != null) {
            hasExternalStoragePublicPicture(name);
            saveToSDCard(result, name);
            isImage = true;

        } else {
            isImage = false;

        }
    }
}

public void saveToSDCard(Bitmap bitmap, String name) {
    boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        mExternalStorageAvailable = mExternalStorageWriteable = true;
        Log.v(TAG, "SD Card is available for read and write "
                + mExternalStorageAvailable + mExternalStorageWriteable);
        saveFile(bitmap, name);
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
        Log.v(TAG, "SD Card is available for read "
                + mExternalStorageAvailable);
    } else {
        mExternalStorageAvailable = mExternalStorageWriteable = false;
        Log.v(TAG, "Please insert a SD Card to save your Video "
                + mExternalStorageAvailable + mExternalStorageWriteable);
    }
}

private void saveFile(Bitmap bitmap, String name) {
    String filename = name;
    ContentValues values = new ContentValues();
    File sdImageMainDirectory = new File(Environment
            .getExternalStorageDirectory(), getResources().getString(
            R.string.directory));
    sdImageMainDirectory.mkdirs();
    File outputFile = new File(sdImageMainDirectory, filename);
    values.put(MediaStore.MediaColumns.DATA, outputFile.toString());
    values.put(MediaStore.MediaColumns.TITLE, filename);
    values.put(MediaStore.MediaColumns.DATE_ADDED, System
            .currentTimeMillis());
    values.put(MediaStore.MediaColumns.MIME_TYPE, "image/png");
    Uri uri = this.getContentResolver().insert(
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI,

            values);
    try {
        OutputStream outStream = this.getContentResolver()
                .openOutputStream(uri);
        bitmap.compress(Bitmap.CompressFormat.PNG, 95, outStream);

        outStream.flush();
        outStream.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private boolean hasExternalStoragePublicPicture(String name) {
    File sdImageMainDirectory = new File(Environment
            .getExternalStorageDirectory(), getResources().getString(
            R.string.directory));
    File file = new File(sdImageMainDirectory, name);
    if (file != null) {
        file.delete();
    }
    return file.exists();
} 
```

在我的情况下`strings.xml`

```
<string name="ImageURI">http://cdn.sstatic.net/stackoverflow/img/tag-logo-android.png</string>
<string name="directory">/DCIM</string> 
```

从此您可以直接提供 imageUrl`reviewImageLink`或提供`String`资源。这也将是相同的`directory`。

希望这对你有很大帮助。

# iphone - 合并两张图片

> ID：11664996
> 
> 赞同：0
> 
> 时间：2012-07-26T08:09:43.660
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [在杯子上合并和包装 UIImage](https://stackoverflow.com/questions/11737828/merge-and-wrap-uiimage-on-mug)

我有两个图像，我想合并这两个图像，就像我有一个杯子的图像，第二个图像是任何图像现在我想与它合并到杯子我怎么能做到这一点![在此处输入图像描述](../Images/76809dd32ea8d6057a0e1189791e04d0.png)

现在假设杯子是完全白色的，然后我将另一个图像与它合并我应该如何实现这一点？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:19:43.310

Well you could make a custom `UIView` and override the `- (void)drawRect:(CGRect)rect` and write something like this:

```
CGContextRef con = UIGraphicsGetCurrentContext();
[self.img1 drawInRect:self.bounds blendMode:kCGBlendModeNormal alpha:1];
[self.img2 drawInRect:self.bounds blendMode:kCGBlendModeDarken alpha:1]; 
```

img1 is a `UIImage` containing the mug image and img2 is another `UIImage` containing the overlay.

Also, check out the other blend modes supported by iOS. (`kCGBlendModeDarken` compares each pixel from img1 and img2 and selects the darkest one). For a much better explanation of blendmodes, then the one offered by apple, see [http://en.wikipedia.org/wiki/Blend_modes](http://en.wikipedia.org/wiki/Blend_modes)

# asp.net-mvc - 企业库滑动过期时间

> ID：11664999
> 
> 赞同：1
> 
> 时间：2012-07-26T08:09:56.953
> 
> 标签：asp.net-mvc, caching, enterprise-library

我的 Web 应用程序使用企业库缓存模块。我在下面为 Enterprise Library 4.0 设置了一个配置值。

```
<cacheOptions>
    <add name="Cache" cachePartition="Content" slidingExpirationTime="30" cachePrioriy="High" />
</cacheOptions> 
```

如果用户在网页按钮上单击 24 次是否意味着缓存过期将仅在 24*30min 之后发生？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:23:35.327

不，这意味着一个项目在 30 分钟内未被访问时从缓存中删除。

假设您将一个项目添加`A`到缓存中`t0`。如果您`A`在接下来的 30 分钟内未从缓存中检索，它将在`t0 + 30`. 但是，假设您在 检索项目`t0 + 10`。现在过期时间“滑动”了 10 分钟，您的物品将在`t0 + 40`.

缓存项目在最后一次访问后 30 分钟被删除。