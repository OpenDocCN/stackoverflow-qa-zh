# StackOverflow 问答 11956000-11956999

# javascript - 主干视图不会加载 JST

> ID：11956005
> 
> 赞同：1
> 
> 时间：2012-08-14T15:42:52.027
> 
> 标签：javascript, backbone.js, coffeescript, jst

我有一个使用 Backbone.js 的应用程序。一切工作正常，但最近我将 RequireJS 添加到我的项目中，这当然让一切都崩溃了，所以我正在定义我的依赖项并使一切重新工作。

我得到的错误是`Uncaught ReferenceError: JST is not defined.`

我有以下 CoffeeScript 视图文件。注意 JST 行：

```
define ["app"], (App) ->
  Snip.Views.Appointments ||= {}

  class Snip.Views.Appointments.IndexView extends Backbone.View
    template: JST["backbone/templates/appointments/index"]

    initialize: () ->
      @options.appointments.bind('reset', @addAll)

    addAll: () =>
      @options.appointments.each(@addOne)

    addOne: (appointment) =>
      view = new Snip.Views.Appointments.AppointmentView({model : appointment})
      @$("ul").append(view.render().el) 
```

我的“应用程序”依赖项本身具有 Backbone 和 Underscore 作为依赖项，所以我认为问题不在于 Backbone 不存在：

```
define ["underscore", "backbone"], (_, Backbone) ->
  window.Snip =
    Models: {}
    Collections: {}
    Routers: {}
    Views: {} 
```

当我加载页面时，我得到`Uncaught ReferenceError: JST is not defined`.

我需要做什么才能让我的脚本了解 JST？

**编辑：这是我的路径和东西**

```
require
  paths:
    jquery: "jquery-1.7.2.min"
    underscore: "lodash.min"
    appointment: "backbone/models/appointment"
    appointmentIndexView: "backbone/views/appointments/index_view"
    appointmentsRouter: "backbone/routers/appointments_router"
    relational: "backbone-relational"
  shim:
    "underscore":
      exports: "_"
    "backbone":
      deps: ["underscore", "jquery"]
      exports: "Backbone"
    "relational":
      deps: ["backbone"]

requirejs ["appointmentsRouter"], (AppointmentsRouter) ->
  window.router = new Snip.Routers.AppointmentsRouter({appointments: []})
  Backbone.history.start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:04:45.177

我有类似的问题。我的主干视图出现错误：

> 未捕获的 ReferenceError：未定义 JST。

下面是我为使其工作所做的工作：

1.  在我的 config/requirejs.yml 我坐在：

    ```
    modules:
        - name: "products/product_price_tmpl" 
    ```

2.  我的视图定义：

    ```
    define ['jquery', 'underscore', 'backbone', 'products/product_price_tmpl'] , ($, _, Backbone) ->

    Backbone.View.extend

        template: JST['products/product_price_tmpl']

        tagName: 'li'

        render: ->
            @$el.html(@template(@model.attributes))
            @ 
    ```

3.  我所有的模板都在 assets/templates 目录中。如果 requirejs 在此目录中找不到您的模板，您可以将模板目录移动到 assets/javascripts 文件夹或将此行添加到 config/application.rb 文件中：

    ```
    config.assets.paths << "#{Rails.root}/app/assets/templates" 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:53:05.460

`JST`加载相关模块时，没有可用的变量调用。

您需要将 JST -library 的路径添加到`paths`-attribute in 中`require.config`。

然后很可能您需要将其添加到`shim`also 并使其 export `JST`。

在 require.js 中，当你在模块中使用一些外部资源时，你的警钟应该开始响起。

A. 在该`define`模块的 - 部分中导入

B. 通过`require`该模块内部导入

C. 在你的`require.config`-function中提到

### 更新

您需要创建一个新模块（如 templates.js），它返回一个变量（例如`JST`）。

```
define([
  ...
], function( ... ) {

  var JST = {};

  JST['template/name'] = "<div class='my-template'><%= my-content %></div>";

  ...

  return JST;
} 
```

然后在你想要使用这些模板的模块中：

```
define([
  ...
  'path/to/your/JST/module',
  ...
], function(..., JST, ...) {

// Et voilà, now you can use the templates like they should be used

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T13:59:09.903

虽然[Jason Swett](https://stackoverflow.com/users/199712/jason-swett)使用的是 AMD/require.js，但由于问题标题并不具体，我想我会代表 CommonJS/Browserify 用户回答，因为我在谷歌搜索同一问题后最终来到了这里。

将我的 Backbone 应用程序移动到 Browserify 后，出现“未定义错误中的 JST”。[wawka](https://stackoverflow.com/users/1534205/wawka)上面的回答帮助我把事情整理好。

在我有之前：

```
JST["path/to/template"]({...}); 
```

我现在有：

```
var template = require("path/to/template");
...
template({...}) 
```

希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T23:01:21.317

我正在使用 Backbone Boilerplate，它将模板编译成一个名为 templates.js 的文件。JST 在 templates.js 中定义。使用 templates.js 配置路径解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-19T16:45:19.040

指定正确的加载顺序

**需要配置**

```
require.config({
    paths: {

        // specify templates
        templates: 'compiled-templates'
    }
})

// firstly load templates
require(['templates'], function() {

    // then load you app
    require(['core/Core']);
}); 
```

# ruby - 如何在 OS X 上将 Arial 字体与 Prawn 一起使用？

> ID：11956008
> 
> 赞同：14
> 
> 时间：2012-08-14T15:42:58.763
> 
> 标签：ruby, ruby-on-rails-3, prawn

我正在尝试使用 ruby​​ 在 OS X 上使用 Prawn 生成 PDF。我有以下内容：

```
font 'Arial' 
```

Arial 安装在我的 Mac 上。但是当我尝试生成 PDF 时，出现以下错误：

```
Prawn::Errors::UnknownFont in ProjectsController#show
Arial is not a known font. 
```

我怎样才能让这种常用字体在 Prawn 中工作？事实上，除了 Helvetica 或 Times New Roman 之外，几乎任何其他东西都会引发同样的错误。这是 Rails 3.2 应用程序的一部分。

如果我尝试直接加载字体 ttf 文件，根据 Ashish 在下面的建议，我会收到一条`Bad font family`消息：

```
RuntimeError (Bad font family):
  app/pdfs/quote_sheet_pdf.rb:29:in `page_top'
  app/pdfs/quote_sheet_pdf.rb:12:in `initialize'
  app/controllers/projects_controller.rb:9:in `new'
  app/controllers/projects_controller.rb:9:in `block (2 levels) in show'
  app/controllers/projects_controller.rb:7:in `show'
  config/initializers/quiet_assets.rb:7:in `call_with_quiet_assets' 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-18T20:45:45.540

如果您使用`:style`选项来调用`text`，例如

```
text "Hello World", :style => :italic 
```

那么你当时使用的字体需要有一个关联的字体系列，否则你会得到你看到的“Bad font family”错误，例如：

```
Prawn::Document.generate("output.pdf") do
  font "/Library/Fonts/Arial.ttf"
  text "Hello World", :style => :italic
end 
```

产生：`Bad font family (RuntimeError)`。

解决此问题的一种方法是每次要更改样式时始终指定所需的确切字体文件，例如

```
font "/Library/Fonts/Arial Italic.ttf"
text "Hello World" 
```

更好的选择是创建具有所需样式的字体系列：

```
Prawn::Document.generate("output.pdf") do

  font_families.update("Arial" => {
    :normal => "/Library/Fonts/Arial.ttf",
    :italic => "/Library/Fonts/Arial Italic.ttf",
    :bold => "/Library/Fonts/Arial Bold.ttf",
    :bold_italic => "/Library/Fonts/Arial Bold Italic.ttf"
  })

  font "Arial"
  text "Hello World"
  text "Hello World", :style => :italic
  text "Hello World", :style => :bold
  text "Hello World", :style => :bold_italic
end 
```

设置好字体系列后，您可以将`Arial`其用作字体名称，并且可以轻松使用不同的样式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-07T10:41:07.867

我在尝试加载这样的字体时遇到了同样的问题。

```
@pdf.font_families.update(
    'Arial' => { :normal => Rails.root.join('public/arial.ttf'),
                 :bold   => Rails.root.join('public/arialbd.ttf') }
) 
```

事实证明 Rails.root.join 没有返回明确的 String 对象。解决方案是在表达式末尾添加 to_s。

```
@pdf.font_families.update(
  'Arial' => { :normal => Rails.root.join('public/arial.ttf').to_s,
               :bold   => Rails.root.join('public/arialbd.ttf').to_s }
) 
```

由 TheR

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T17:11:24.743

尝试将 arial.ttf 的完整路径传递给字体函数，如下所示 -

```
Prawn::Document.generate("custom_font_usage.pdf") do
  font "/path/to/fonts/arial.ttf"
  text "this is a test " * 20 
end 
```

另请参阅一些相关的链接 -

1.  [Prawn 中有多少种字体可用？](https://stackoverflow.com/questions/5599904/how-many-fonts-are-available-in-prawn)
2.  大虾文档 - [http://rubydoc.info/gems/prawn/0.12.0/frames](http://rubydoc.info/gems/prawn/0.12.0/frames)

# c# - 卸载过程中连接服务器失败

> ID：11956009
> 
> 赞同：1
> 
> 时间：2012-08-14T15:43:00.313
> 
> 标签：c#, sql-server, windows-installer

我有一个安装包（Visual Studio 安装程序）。在安装过程中，我使用 SMO 将数据库附加到 MS Sql 服务器。卸载过程开始时，会出现对话框“应在继续安装之前关闭以下应用程序（“SQL 服务器（MSSQLServer）”）”。该对话框有两个选项“自动关闭应用程序并在设置完成后尝试重新启动它们”和“不要关闭应用程序（可能需要重新启动）”。如果我选择第一个选项，我会看到错误“无法在服务器上连接”。使用第二个选项一切正常。在我的自定义操作的 unistall 方法中，我使用 SqlCommand（命令文本：DROP DATABASE [baseName]）来删除数据库。卸载方法代码：

```
using(var con=new SqlConnection(_server.ConnectionContext.ConnectionString))
          {
              con.Open();
              string sqlCommandText = string.Format("DROP DATABASE [{0}]", DATABASE_NAME);
              var sqlCommand = new SqlCommand(sqlCommandText, con);
              sqlCommand.ExecuteNonQuery();
          } 
```

如何避免对话框“以下应用程序...”并始终使用第二个选项？或者也许我还有其他方法可以删除数据库？

# java - Eclipse/Java 新手：现在找不到包，但它是昨天

> ID：11956012
> 
> 赞同：7
> 
> 时间：2012-08-14T15:43:13.997
> 
> 标签：java, eclipse, import

我将第一次参与 Java 开发。该应用程序将构建在一组称为 UDOP 的 Eclipse 插件和包上。这套教程附带教程，我正在学习。

昨天一切都很好，在我的示例代码中，我能够导入某个包，并扩展它包含的一个类。今天启动 Eclipse 时，import 语句中的一个包下面有一条红线，有一条悬停消息告诉我无法解析导入。目标平台是正确的，并且我的依赖项符合教程的要求。我已经运行了更新类路径。

细节：

1.  导入语句是

    ```
    import com.tdkc.udop.extensionpoints.views.ViewPartBase; 
    ```

2.  红色波浪线位于*com.tdkc.udop.extensionpoints*下。

3.  *com.tdkc.udop*设置为依赖项。

4.  目标平台是.../UDOP_SDK，

5.  在此之下我可以找到文件 .../UDOP_SDK/plugins/com.tdkc.udop_1.7.0/com/tdkc/udop/extensionpoints/views/ViewPartBase.class

6.  *com.tdkc.udop*出现在包资源管理器中，我可以从 PE 中向下导航并查看 ViewBasePart.class。

虽然我是 Eclipse 和 Java 的新手，但我对 c++、Objective-C 和 Cocoa 有一定的经验。

找不到导入的可能原因是什么？我应该检查什么？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T15:55:23.010

如果自从上次一切都很好之后没有任何变化，那可能只是做一个`Project -> Clean`然后选择`Clean all projects`这样的问题：

![在此处输入图像描述](../Images/038908418e3b6484e05dc09cfabc2a49.png)

最后，单击`OK`，Eclipse 应该清除所有项目并构建所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T15:48:00.527

在有问题的项目上（“包资源管理器”中 Eclipse 的左侧），右键单击项目名称并选择“构建路径”>“配置构建路径...”。

在左侧，选择“Java Build Path”，然后选择“Libraries”选项卡。从那里，“添加 JAR...”并指向包含您的类的 JAR 文件。从那里尝试构建/清理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:38:41.760

如果您使用的是该 import 语句，则语法错误。它应该是： `import com.tdkc.udop.extensionpoints.views.ViewPartBase;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-06T12:49:30.463

将光标移动到错误行（在您的情况下为 com.tdkc.udop.extensionpoints.），然后 Eclipse 将显示您可以从中摆脱该错误的列表。向下滚动找到 Fix Project Setup，然后 Eclipse 会建议可以添加的 jar 文件来解决依赖问题。通过单击确定添加这些依赖项。

错误将消失。

# ant - 使用 Ant 标记 CVS 中的构建

> ID：11956014
> 
> 赞同：0
> 
> 时间：2012-08-14T15:43:20.107
> 
> 标签：ant, cvs

我正在构建 HEAD，并且对于 CVS 的每个提取物，我想使用 Ant 来标记我提取的点，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:26:05.733

是的。想想它“倒退”，它变得容易。首先让 Ant 标记 HEAD 中的代码。然后让 Ant 从标签中拉出。

您必须颠倒顺序的原因是有人可以在您拉动后更改 HEAD。如果您首先标记，则您有一个定义的点可以从中提取。

# conflict - Meteor 中的 Etherpad 样式同步？

> ID：11956021
> 
> 赞同：7
> 
> 时间：2012-08-14T15:43:39.480
> 
> 标签：conflict, meteor, collaboration, etherpad

研究 Meteor 来创建一个协作文档编辑应用程序，因为 Meteor 默认在多个客户端之间同步数据非常棒。

但是当使用文本区域时，例如 Sameer Kalburgi 的示例
[http://www.skalb.com/2012/04/16/creating-a-document-sharing-site-with-meteor-js/](http://www.skalb.com/2012/04/16/creating-a-document-sharing-site-with-meteor-js/)
[http://docshare -tutorial.meteor.com/](http://docshare-tutorial.meteor.com/)
体验欠佳。

我尝试与同事同时打字，但当她打字时，我的更改会被覆盖，反之亦然。所以在冲突解决中还没有合并算法，我想？

这是为该功能计划的吗？目前有没有办法实现这一点？Etherpad 似乎很好地处理了这个问题。在 Meteor 中使用此功能将使创建协作文档编辑应用程序更容易访问。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T11:16:14.223

所以我进一步研究了它，Etherpad 中使用的算法被称为操作转换：

> 解决方案是运营转型 (OT)。如果你没听说过，OT是一类做多站点实时并发的算法。OT 就像实时 git。它适用于任何延迟（从零到延长假期）。它允许用户以低带宽进行实时、并发编辑。OT 为您提供多个用户之间的最终一致性，无需重试、无错误且不会覆盖任何数据。
> 
> 不幸的是，实施 OT 很糟糕。有一百万种算法具有不同的权衡，主要被困在学术论文中。正确实施这些算法非常困难且耗时。我们需要一些好的库，所以任何项目都可以在需要时插入 OT。

那是来自[sharejs](http://sharejs.org/)的网站。一个基于 node.js 的 ot 服务器客户端，您可以将其挂接到现有客户端。

OT 也在 Node.js 的 Racer 模型同步引擎中实现，它构成了 Derby 的基础。目前，derby.js 还没有透明地提供它，但他们也在计划，来自[Derby 文档](http://derbyjs.com/#conflict_resolution)：

> 目前，Racer 默认按收到的顺序应用所有事务，即最后写入者获胜。(...) Racer *[还]*支持通过软件事务内存 (STM)、操作转换 (OT) 和 Diff-match-patch 技术的组合解决冲突。
> 
> 这些功能尚未完全实现，但 Racer 演示展示了 STM 和 OT 的初步示例。

巧合的是，sharejs 和 derbyjs 团队都有一位前 Google-waver 加入。Meteor 在其核心团队中有一个前 etherpad/Google Waver。由于 Etherpad 是最知名的 OT 实现之一，我想象 Meteor 肯定会在某个时候也支持它……</p>

* * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-25T19:48:15.247

我创建了一个集成了 ShareJS 的 Meteor 智能包：

> [https://github.com/mizzao/meteor-sharejs](https://github.com/mizzao/meteor-sharejs)

现在还很初步，但是您可以将其导入您的应用程序，放入`textarea`s 中，它“就可以工作”。请尝试一下并通过拉取请求提交一些新功能:)

在此处查看演示：

> [http://documents.meteor.com](http://documents.meteor.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:39:32.527

你所描述的似乎超出了我的 Meteors 范围。它不是建立协作可能性的工具！

它提供的是一种透明地处理服务器数据库子集的方法。但是特定于用例的合并功能的实现是应用程序的工作，而不是框架的工作。

# wpf - 如何使最后一个DataGrid的列占据整个左侧空间？

> ID：11956023
> 
> 赞同：14
> 
> 时间：2012-08-14T15:43:39.480
> 
> 标签：wpf, wpfdatagrid

第一的！我知道这似乎是一种[欺骗](https://stackoverflow.com/questions/4389630/how-to-make-the-last-column-in-wpf-datagrid-take-all-the-left-space-always)，但事实并非如此。

我有一个网格作为`DataGrid.RowDetails`. 它有三列：两列 with`Width="Auto"`和 3d with`Width="*"`

```
<DataTemplate x:Key="NotEmptyDistributionsTemplateKey">
    <DataGrid ItemsSource="{Binding SoftwareVersionDistributions}"
        CanUserAddRows="False"
        CanUserDeleteRows="False"
        CanUserReorderColumns="False"
        CanUserResizeColumns="True"
        CanUserSortColumns="False"
        IsReadOnly="True"
        CanUserResizeRows="False"
        AutoGenerateColumns="False"
        RowHeaderWidth="0"
        Margin="20,5"
        HorizontalAlignment="Stretch">
        <DataGrid.Columns>
            <DataGridTextColumn 
                Header="Architecture" 
                Binding="{Binding SoftwareArchitecture.Name, TargetNullValue=Все, FallbackValue=Все}"
                Width="Auto"/>
            <DataGridTextColumn 
                Header="Language" 
                Binding="{Binding SysCodepage.Title, TargetNullValue=Все, FallbackValue=Все}" 
                Width="Auto"/>
            <DataGridHyperlinkColumn 
                Header="Link" 
                Binding="{Binding DownloadLink}"
                Width="*" 
                CanUserResize="False"/>
        </DataGrid.Columns>
    </DataGrid>
</DataTemplate> 
```

如果 Grid 嵌套在单元格中，则此模板正好显示 3 列。但是当它被用作`RowDetaislTemplate`第 4 个空列时出现。这让我很生气。

有人知道为什么会发生这种情况吗？

**更新 1**。它的外观：

![在此处输入图像描述](../Images/70fb90e3d8695dfd299cf6c5e383c62b.png)

**更新 2**。

最后我找到了灵魂。刚刚添加`ScrollViewer.HorizontalScrollBarVisibility="Disabled"`

现在好啦：

![在此处输入图像描述](../Images/04870ec988fb9579af6571ddc3497f00.png)

但我无法理解这种奇怪的行为。

**更新 3**（可能对某人有帮助）

最近我们发现了一个我们的用户有而开发人员没有的错误。该错误再次与 DataGrid 的宽度和对齐方式有关。好吧，这可能不是真正的错误，但我们有不同的控件行为。
研究表明，在安装 .net framework 4.5 时，安装程​​序还更新了 .net framework 4.0。此更新以某种方式改变了 DataGrid 的行为。（对预期的）
我们要求我们的用户安装框架 4.5 并且问题消失了。虽然我们的应用程序仍然以 .net 4.0 为目标

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T19:55:59.027

最后我找到了灵魂。

刚刚添加`ScrollViewer.HorizontalScrollBarVisibility="Disabled"`

对于那些以 Framework v4.0 为目标的人
最近我们发现了一个错误，我们的用户有，而开发人员没有。该错误再次与 DataGrid 的宽度和对齐方式有关。好吧，这可能不是真正的错误，但我们有不同的控件行为。研究表明，在安装 .net framework 4.5 时，安装程​​序还更新了 .net framework 4.0。此更新以某种方式改变了 DataGrid 的行为。（对预期的）我们要求我们的用户安装框架 4.5，问题就消失了。虽然我们的应用程序仍然以 .net 4.0 为目标

# google-drive-api - Google 文档是否支持通过驱动器使用 .zip 格式？

> ID：11956024
> 
> 赞同：3
> 
> 时间：2012-08-14T15:43:41.333
> 
> 标签：google-drive-api

现在，我的应用程序通过 GData API 将文档下载为 zip-archive。

我想切换到驱动器的新“exportLinks”功能，但在支持的格式列表中没有看到 zip 格式。

或者是否有不同的方式将文档导出为 HTML，包括图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:36:35.933

目前还没有计划支持 ZIP 导出，但我只是提交了一个功能，以便团队可以对其进行审查并确定优先级。

现在您可以使用 HTML 导出链接，它将为您提供 HTML 格式的 Google 文档，其中所有图像都是托管在 Google 服务器上的外部链接（一些`https://lhX.googleusercontent.com/<longID>`URL）然后您必须编写一个脚本来获取所有这些链接HTML 然后获取它们。

# tinymce - 如何在 Umbraco 中启用 tinyMCE 以添加具有类属性的 div 并包含段落？

> ID：11956031
> 
> 赞同：0
> 
> 时间：2012-08-14T15:43:55.943
> 
> 标签：tinymce, umbraco

我需要允许在 Umbraco 的 tinyMCE 中添加一个具有类属性的 div。我可以添加一个 div，但 div 中的所有内容都只是文本。我需要那个文本有一个段落，最后为 div 添加一个类属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:00:11.343

有点难以理解你在问什么，但我认为这应该会有所帮助。

[http://our.umbraco.org/wiki/recommendations/recommended-reading-for-content-editors/adding-styles-to-the-tinymce](http://our.umbraco.org/wiki/recommendations/recommended-reading-for-content-editors/adding-styles-to-the-tinymce)

您基本上可以将样式表与 tinyMCE 关联，然后向其中添加样式，这些样式将出现在样式下拉列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:14:14.307

您可以使用

```
tinymce.activeEditor.execCommand('insertHTML', false, '<div class="section'></div>'); 
```

这会将指定的 html 插入到编辑器的本地插入符号位置。请注意，您的[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)和[valid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)配置设置不会从您插入的 html 中删除任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:30:09.360

如果您可以粘贴您的模板代码，那么我们可以为您提供更多帮助。

你想要做的是包装你的`<umbraco:Item field="aliasOfYourRTE" runat="server" />`

使用您想要的 div，因此在您的情况下，您的代码将如下所示：

```
<div class="YOURCLASSNAMEHERE">
  <umbraco:Item field="bodyText" runat="server" />
</div> 
```

插入内容时，umbraco RTE 会自动吐出`<p> </p>`标签。此外，请确保您正在发布您的节点，以便您的内容在前端可见。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-16T10:20:21.860

转到设置 - 样式。在数据类型 Richtexteditor 中打开带有 TinyMCE 格式下拉菜单样式的样式表。使用别名 div.class 添加样式，例如 div.alert alert-danger。如果您然后在段落上单击 TinyMCE，然后在“格式”下拉列表中选择此样式，则该段落的格式如下：

```
<div class="alert alert-danger"> ... </div> 
```

这是你想做的吗？

# java - 当并发会话过多时，Java Web 容器的内存会发生什么变化？

> ID：11956038
> 
> 赞同：4
> 
> 时间：2012-08-14T15:44:22.027
> 
> 标签：java, tomcat, webserver

今天上班遇到一个问题：

想象一下，我有很多并发用户访问我的网站，每个用户都将自己的数据存储在用户会话中。考虑到我的 JVM 中可用的内存量有限，当并发活动会话达到容器 JVM 内存不足的点时会发生什么或应该发生什么？

我试图在 servlet 规范中找到关于**应该**发生什么的内容，但其中没有任何确定性，它只是说开发人员将有权访问会话对象等。这让我认为它必须是特定于提供者的。

以Tomcat为例，webserver是不是刚开始扔`OutOfMemoryException`s？或者它处理这个问题的方式更聪明，例如将会话分页到另一个缓存？或者其他方式一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:11:47.683

servlet 规范没有说明任何有关内存考虑的内容，因此您不会得到任何帮助。

除非特别配置，否则 Tomcat 将允许您使用 HttpSession 对象（实际上是它们的内容）用尽所有可用内存，最终 JVM 将开始抛出`OutOfMemoryError`s，可能会使您的服务器停机（尽管 JVM 将继续运行，许多事情都会表现得......不可预测且不幸的是）。

如果单个请求开始在局部变量等中使用大量内存，则请求处理线程将受到影响`OutOfMemoryError`并停止处理当前请求。（我相信在这种情况下，请求处理线程实际上会被Tomcat请求处理线程池回收）。垃圾收集器可能会在此后不久运行并重新声明该请求使用的内存，并且您的服务器将稳定下来。

另一方面，如果你用完大量内存并将这些对象存储到用户的 s`HttpSession`中，那么 GC 将无法释放任何内存，并且您的服务器将不断遭受`OutOfMemoryError`s 的影响。虽然 Tomcat 会在指定的时间表上过期会话（默认是在 30 分钟不活动之后），但会话清理线程可能会遇到一个`OutOfMemoryError`during operation 并因此无法执行其职责，从而使整个情况更加复杂（因为实际上，`HttpSession`s 永远不会到期）。

有几种方法可以缓解上述不幸的情况。哪一个对您有意义取决于您的要求和环境。

1.  增加堆大小。这显然只会让你到目前为止。如果您正在用相关对象填充 16GiB 堆`HttpSession`，那么您将达到商品硬件的极限，您不能简单地购买更大的盒子。

2.  减少会话过期时间（默认为 30 分钟）。如果会话没有显式终止（例如，通过注销功能），则`HttpSession`对象及其所有内容会一直存在，直到过期间隔过去。如果您在大量废弃会话中拥有大量数据，则减少会话到期时间可能会给您一些喘息的空间。

3.  停止将这么多数据放入用户的`HttpSession`. 虽然这似乎是一个令人讨厌的建议（“停止这样做”），但它确实是一个有效的建议：你真的需要在会话本身中存储这么多东西吗？使用某种数据存储（关系数据库、非关系数据库如 Cassandra、webcache 等）怎么样？也许将数据存储在磁盘上的文件中？虽然这些建议肯定会限制您*快速*访问数据的能力，但它们肯定是比让您的服务器在会话中大量内容的重压下崩溃更好的选择。

4.  使用 Tomcat 的[`PersistentManager`](http://tomcat.apache.org/tomcat-7.0-doc/config/manager.html)，它是一个会话管理器，能够将活动（但空闲）会话交换到某些外部存储（默认情况下可以使用基于文件和基于 JDBC 的存储机制）。当您找到其他地方将您推送的所有数据放入用户会话时，这可以让您走得很远。

除了 #4 之外的所有内容都适用于任何 servlet 容器。#4 应该对 JBoss 用户可用，因为 JBoss 在内部使用 Tomcat。对于其他容器，您可能会发现存在类似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:16:30.017

通常，这取决于供应商。然而，容器经常可以自行决定将会话序列化到磁盘（*如果*会话数据可以序列化）。

如果容器可以做到这一点，它可以在需要时推出非活动会话，并在需要时再次恢复它们，更好地使用内存，从而推迟任何 OutOfMemoryExceptions。

# css - 是否可以使图像在渐变中透明？

> ID：11956042
> 
> 赞同：2
> 
> 时间：2012-08-11T11:04:06.337
> 
> 标签：css, transparency

我想用 CSS 来做。我不希望整个图像在每个像素上都具有相同的透明度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:08:48.153

您可以使用 CSS3 Mask 属性。一篇很好的文章：[http ://css-tricks.com/webkit-image-wipes/](http://css-tricks.com/webkit-image-wipes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:04:36.100

可以办到！

```
/* using the mozilla kit */
background-image: -moz-linear-gradient(
  rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0) 95%
);

/* using webkit */
background-image: -webkit-gradient(
  linear, left top, left bottom, from(rgba(50,50,50,0.8)),
  to(rgba(80,80,80,0.2)), color-stop(.5,#333333)
); 
```

这些应该适用于所有浏览器：http: [//www.leon-zinger.com/css-tricks/css3-gradients-with-opacity-works-with-ie](http://www.leon-zinger.com/css-tricks/css3-gradients-with-opacity-works-with-ie)和[http://lea.verou.me/2009/02 /bulletproof-cross-browser-rgba-backgrounds/](http://lea.verou.me/2009/02/bulletproof-cross-browser-rgba-backgrounds/)

# c++ - 如何将连接关节的位置转换为相对增量旋转

> ID：11956049
> 
> 赞同：5
> 
> 时间：2012-08-14T15:45:08.530
> 
> 标签：c++, quaternions

我目前正在实现一个 C++ 解决方案来跟踪多个对象的运动。在那里，我在帧序列中跟踪了这些对象的点，使得每帧中有多个点。因此，我有整个帧序列的这些点的 x、y、z 坐标。通过研究一个已经生成的模型，我了解到它由一个相对于彼此移动的关节系统组成。每个关节都有一个父节点，它们的运动相对于其父节点以四元数格式写入。因此，我想将我的 x、y、z 坐标（相对于同一原点在 3D 空间中）转换为相对于其父级写入的四元数格式。然后我可以使用四元数为它们设置动画。

我不明白如何计算它需要的角度。您能否提供一个示例代码（在 C++ 中）或任何有用的资源来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:24:42.033

所以我们有一个连接关节系统，我们想找出关节从一帧到另一帧的相对增量旋转。我将把相对旋转称为**局部旋转**，因为它本身的“相对旋转”并不能告诉我们它相对于什么。（它是相对于一个物体，还是相对于宇宙的中心等？）

### 假设

我将假设一个关节的树形结构，这样每个关节只有一个父节点，我们只有一个根节点（没有父节点）。如果每个关节有多个父母，您应该能够使用相同的解决方案，但是您将每个关节将每个父母进行一次相对旋转，并且您需要为每个父母进行一次计算。如果你有几个没有父节点的关节，那么每个关节都可以被认为是它自己的树中的一个根，该树由连接的关节组成。

我假设你有一个四元数数学库可以；从轴和角度创建，设置为恒等、逆和累积四元数。如果不这样做，您应该从 Wikipedia 或 Google 中找到实施它们所需的所有信息。

### 计算旋转

下面的代码首先计算关节在帧开始和结束时的局部旋转。它使用两个向量进行此计算；来自它的父母的向量和从祖父母到父母的向量。然后为了计算增量旋转，它使用反向开始旋转通过应用它的反向旋转从结束旋转中“移除”开始旋转。所以我们最终得到了该帧的局部增量旋转。

对于联合层次结构的前两个级别，我们有可以直接解决的特殊情况。

### 伪代码

out 参数是一个名为*result*的多维数组。
注意：*startPosition、endPosition、parentStartPosition、parentEndPosition、grandParentStartPosition、grandParentStartPosition*都必须为循环的每次迭代更新。为了关注问题的核心，**未**显示该更新。

```
for each frame {
  for each joint {

    if no parent {
      // no parent means no local rotation
      result[joint,frame] = identityQuaternion
    } 
    else {
      startLink = startPosition - parentStartPosition
      endLink = endPosition - parentEndPosition

      if no grandParent {
        // no grand parent - we can calculate the local rotation directly
        result[joint,frame] = QuaternionFromVectors( startLink, endLink )
      } 
      else {
        parentStartLink = parentStartPosition - grandParentStartPosition
        parentEndLink = parentEndPosition - grandParentEndPosition

        // calculate the local rotations 
        // = the difference in rotation between parent link and child link
        startRotation = QuaternionFromVectors( parentStartLink, startLink )
        endRotation = QuaternionFromVectors( parentEndLink, endLink )

        // calculate the delta local rotation
        // = the difference between start and end local rotations
        invertedStartRotation = Inverse( startRotation )
        deltaRotation = invertedStartRotation.Rotate( endRotation )
        result[joint,frame] = deltaRotation 
      }
    }
  }
}

QuaternionFromVectors( fromVector, toVector ) 
{
  axis = Normalize( fromVector.Cross( toVector ) )
  angle = Acos( fromVector.Dot( toVector ) )
  return Quaternion( axis, angle )
} 
```

### C++ 实现

下面是 C++ 中未经测试的递归实现。对于每一帧，我们从*JointData*树的根开始，然后通过递归调用*JointData::calculateRotations()*函数遍历树。

为了使代码更易于阅读，我有一个从联合树节点*JointData*到*FrameData*的访问器。您可能不希望在您的实现中具有如此直接的依赖关系。

```
// Frame data holds the individual frame data for a joint
struct FrameData
{
    Vector3 m_positionStart;
    Vector3 m_positionEnd;

    // this is our unknown
    Quaternion m_localDeltaRotation;
}

class JointData
{
public:
    ...
    JointData *getChild( int index );
    int getNumberOfChildren();

    FrameData *getFrame( int frameIndex );

    void calculateDeltaRotation( int frameIndex, JointData *parent = NULL, 
                                 Vector3& parentV1 = Vector3(0), 
                                 Vector3& parentV2 = Vector3(0) );
    ...
}

void JointData::calculateDeltaRotation( int frameIndex, JointData *parent, 
                                        Vector3& parentV1, Vector3& parentV2 )
{
    FrameData *frameData = getFrame( frameIndex );

    if( !parent ) 
    {
        // this is the root, it has no local rotation
        frameData->m_localDeltaRotation.setIdentity();
        return;
    }

    FrameData *parentFrameData = parent->getFrame( frameIndex );

    // calculate the vector from our parent
    // for the start (v1) and the end (v2) of the frame
    Vector3 v1 = frameData->m_positionStart - parentFrameData->m_positionStart;
    Vector3 v2 = frameData->m_positionEnd - parentFrameData->m_positionEnd;

    if( !getParent()->getParent() )
    {
        // child of the root is a special case, 
        // we can calculate it's rotation directly          
        frameData->m_localDeltaRotation = calculateQuaternion( v1, v2 );
    }
    else
    {
        // calculate start and end rotations
        // apply inverse start rotation to end rotation 
        Quaternion startRotation = calculateQuaternion( parentV1, v1 );
        Quaternion endRotation = calculateQuaternion( parentV2, v2 );       
        Quaternion invStartRot = startRotation.inverse();

        frameData->m_localDeltaRotation = invStartRot.rotate( endRotation );
    }

    for( int i = 0; i < getNumberOfChildren(); ++i )
    {
        getChild( i )->calculateRotations( frameIndex, this, v1, v2 );
    }
}

// helper function to calulate a quaternion from two vector
Quaternion calculateQuaternion( Vector3& fromVector, Vector3& toVector )
{
    float angle = acos( fromVector.dot( toVector ) );
    Vector3 axis = fromVector.cross( toVector );
    axis.normalize();
    return Quaternion( axis, angle );   
} 
```

代码是为了可读性而编写的，而不是最佳的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:54:06.873

```
Point3d Controller::calRelativeToParent(int parentID,Point3d point,int frameID){
if(parentID == 0){
    QUATERNION temp = calChangeAxis(-1,parentID,frameID);
    return getVect(multiplyTwoQuats(multiplyTwoQuats(temp,getQuat(point)),getConj(temp)));
}else{
    Point3d ref = calRelativeToParent(originalRelativePointMap[parentID].parentID,point,frameID);
    QUATERNION temp = calChangeAxis(originalRelativePointMap[parentID].parentID,parentID,frameID);  
    return getVect(multiplyTwoQuats(multiplyTwoQuats(temp,getQuat(ref)),getConj(temp)));
}}
QUATERNION Controller::calChangeAxis(int parentID,int qtcId,int frameID){ //currentid = id of the position of the orientation to be changed
if(parentID == -1){
    QUATERNION out = multiplyTwoQuats(quatOrigin.toChange,originalRelativePointMap[qtcId].orientation);
    return out;
}
else{
    //QUATERNION temp = calChangeAxis(originalRelativePointMap[parentID].parentID,qtcId,frameID);
    //return multiplyTwoQuats(finalQuatMap[frameID][parentID].toChange,temp);
    return multiplyTwoQuats(finalQuatMap[frameID][parentID].toChange,originalRelativePointMap[qtcId].orientation);  
}} 
```

这是我使用的算法。我首先计算了每个帧与其父帧的相对向量。这里根的父ID为0。然后我计算了模型中每个关节的相对向量。这被称为递归。

# mod-rewrite - 我如何使用 mod_rewrite 来做到这一点

> ID：11956052
> 
> 赞同：0
> 
> 时间：2012-08-14T15:45:23.973
> 
> 标签：mod-rewrite

我想在我的网站上获取一个网址：

[http://mysite.com/jk/drawing](http://mysite.com/jk/drawing)

但在操作上删除“jk”目录并让我的用户看到：

[http://mysite.com/drawing](http://mysite.com/drawing)

这可能吗？如果是这样，有人可以给我一个如何完成的例子吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:34:40.917

您需要做的第一件事是将所有链接从看起来像这样：`http://mysite.com/jk/drawing`更改为看起来像这样：`http://mysite.com/drawing`。如果不这样做，人们仍然会在`/jk/`任何地方看到所有 URL，您唯一能做的就是确保您已更改所有链接。然后将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} mysite.com [NC]
RewriteCond %{REQUEST_URI} !^/jk/
RewriteRule ^(.*)$ /jk/$1 [L] 
```

为了纠正仍然指向`/jk/`您无法控制的所有链接：

```
RewriteCond %{HTTP_HOST} mysite.com [NC]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /jk/([^\ ]*)
RewriteRule ^ /%1 [R=301,L] 
```

# c# - 自定义 Wrappanels 以拉伸内容

> ID：11956061
> 
> 赞同：2
> 
> 时间：2012-08-14T15:46:01.030
> 
> 标签：c#, wpf, wrappanel

我正在尝试拉伸包装面板中的内容，而不会失去其多行功能。我的意图是，如果内容小于屏幕的宽度，那么它将拉伸任何未定义的内容以进行填充。这可能吗？有没有在其他地方做过？

到目前为止我写的代码：

```
 protected override System.Windows.Size ArrangeOverride(System.Windows.Size finalSize)
    {
        if (this.Children.Count == 0)
            return base.ArrangeOverride(finalSize);
        if (FlexibleColumn == null)
            return base.ArrangeOverride(finalSize);

        double totalWidth = 0;

        for (int i = 0; i > Children.Count; i++)
        {
            if (i == FlexibleColumn)
                continue;
            totalWidth = totalWidth + Children[i].DesiredSize.Width;
        }

        if (totalWidth < finalSize.Width)
        {
            Children[FlexibleColumn].DesiredSize.Width = finalSize.Width - totalWidth;
        }

        return base.ArrangeOverride(finalSize);
    } 
```

然而，Children 仅用于获取，而非设置。任何其他方式来操纵它作为这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:37:49.847

有许多自定义包装面板：（[http://www.codeproject.com/Articles/32629/A-better-panel-for-data-binding-to-a-WrapPanel-in](http://www.codeproject.com/Articles/32629/A-better-panel-for-data-binding-to-a-WrapPanel-in)）

基本上你必须覆盖方法 MeasureOverride

提示是设置 WrapPanel 中存在的 ItemWidth 属性。例如：

```
if (Orientation == Orientation.Horizontal)
{
    double supostWidth = 0.0;
    foreach (UIElement el in Children)
    {
       el.Measure(availableSize);
       Size next = el.DesiredSize;
       if (!(Double.IsInfinity(next.Width) || Double.IsNaN(next.Width)))
       {
            supostWidth = Math.Max(next.Width, supostWidth);
       }
    }

    double totalWidth = availableSize.Width;

    if (!double.IsNaN(supostWidth) && !double.IsInfinity(supostWidth) && supostWidth > 0)
    {
        var itemsPerRow = (int)(totalWidth / supostWidth);
        if (itemsPerRow > 0)
        {
            ItemWidth = totalWidth / itemsPerRow;
        }
    }
} 
```

# php - 从乘法行中获取总和

> ID：11956069
> 
> 赞同：0
> 
> 时间：2012-08-14T15:46:33.047
> 
> 标签：php, mysql, sql, sum

如何在我的数据库中获取多于一行的总和？

目前我有这个：

```
$result = mysql_query('SELECT SUM(alertpay_cashout,paypal_cashout,okpay_cashout) AS value_sum FROM users'); 
$row = mysql_fetch_assoc($result); $sum = $row['value_sum']; 
```

如您所见，我希望从我的所有用户那里获得 alertpay_cashout、paypal_cashout 和 okpay_cashout 的总和。

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:47:37.097

添加它们`+`

```
SELECT SUM(alertpay_cashout + paypal_cashout + okpay_cashout) AS value_sum 
FROM users 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:49:18.560

```
SELECT (SUM(alertpay_cashout) + SUM(paypal_cashout) + SUM(okpay_cashout))  `SUM` 
FROM users 
```

# javascript - 失焦时如何使超时在 Chrome 中运行？

> ID：11956070
> 
> 赞同：1
> 
> 时间：2012-08-14T15:46:33.687
> 
> 标签：javascript, ajax, google-chrome

我在一个映射程序上工作，该程序依赖于 AJAX 调用来更新数据并在（谷歌）地图上移动标记。我们的一些客户使用 2 台显示器 - 他们将网站放在 Chrome 的一个屏幕上，然后在另一个屏幕上工作。不幸的是，Chrome 似乎在 OOF 时停止运行 javascript timeout()，导致地图数据落后于实时。如何强制 Chrome 更加关注？在 FF 和 IE 中一切正常，但我们希望避免为人们选择浏览器（它之前曾导致问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:57:51.477

这里有一些 Web Worker 链接 [所以你可以接受我的回答]

[http://en.wikipedia.org/wiki/Web_worker](http://en.wikipedia.org/wiki/Web_worker)

[https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers?redirectlocale=en-US&redirectslug=Using_web_workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers?redirectlocale=en-US&redirectslug=Using_web_workers)

[http://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

:)

# java - 如何解组未包装的集合以使用 jaxb 映射

> ID：11956071
> 
> 赞同：3
> 
> 时间：2012-08-14T15:46:36.667
> 
> 标签：java, xml, jaxb

我有一个这样的 xml 文件

```
<info>
  <item key=1>value1</item>
  <item key=2>value2</item>
</info> 
```

我想要一个像这样的绑定课程

```
class Info {
    @XmlJavaTypeAdapter(MapAdapter.class)
    private Map<Integer,Item> map;

    public setMap...
    public getMap...
}

class Item{
    @XmlAttribute
    private Integer key;

    @XmlValue
    private String value;

    //get,set method...
} 
```

它与包裹的字段一起工作很有趣

```
<info>
  <map>
    <item key=1>value1</item>
    <item key=2>value2</item>
  </map>
</info> 
```

当我摆脱它时`<map>`，它失败了，没有错误。MapAdapter 没有工作。

```
public Map<Integer, Item> unmarshal(MapType myMapType) throws Exception {
    HashMap<Integer, Item> hashMap = new HashMap<Integer, Item>();
    for (Item myEntryType : myMapType.getEntry()) {
        hashMap.put(myEntryType.getKey(), myEntryType);
    }
    return hashMap;
} 
```

myMapType 总是为空。

我可以用这个 xml 做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:03:19.840

你`Info`是`Map`. 在您的示例中，它在地图上没有任何价值。我看到两种选择：

1.  删除`Info`，移动你`map`的替换用途`info`。

2.  写你`@XmlJavaTypeAdapter`的`Info`而不是地图。让它编组/解组内部`map`- 你已经在做什么，只需将它提升一个级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:10:55.690

我的解决方案是

1.  将地图保留为@XmlTransient
2.  创建另一个属性

完整的 mavenized 项目在这里[http://code.google.com/p/jinahya/source/browse/trunk/com.googlecode.jinahya/stackoverflow](http://code.google.com/p/jinahya/source/browse/trunk/com.googlecode.jinahya/stackoverflow)

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.NONE)
public class Info {

    @XmlElement(name = "item")
    private List<Item> getItems() {
        return new ArrayList<Item>(getMap().values());
    }

    private void setItems(final List<Item> items) {
        getMap().clear();
        for (Item item : items) {
            getMap().put(item.getKey(), item);
        }
    }

    public Map<Integer, Item> getMap() {
        if (map == null) {
            map = new HashMap<Integer, Item>();
        }
        return map;
    }

    private Map<Integer, Item> map;
} 
```

测试

```
@Test
public void testXml() throws JAXBException {

    final JAXBContext context = JAXBContext.newInstance(Info.class);

    final Info marshall = new Info();
    marshall.getMap().put(1, Item.newInstance(1, "value1"));
    marshall.getMap().put(2, Item.newInstance(2, "value2"));

    final Marshaller marshaller = context.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

    final ByteArrayOutputStream baos = new ByteArrayOutputStream();

    marshaller.marshal(marshall, baos);
    System.out.println(new String(baos.toByteArray()));

    final Unmarshaller unmarshaller = context.createUnmarshaller();

    final Info unmarshal = (Info) unmarshaller.unmarshal(
        new ByteArrayInputStream(baos.toByteArray()));

    for (Item item : unmarshal.getMap().values()) {
        System.out.println(item);
    }
} 
```

印刷

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<info>
    <item key="1">value1</item>
    <item key="2">value2</item>
</info>

key=1&value=value1
key=2&value=value2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:03:30.657

标识地图成员。地图成员上的 @XmlValue 注释可能有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T21:06:23.547

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以利用 MOXy 的`@XmlPath`扩展来支持您的用例。

**信息**

```
package forum11956071;

import java.util.Map;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
class Info {
    @XmlJavaTypeAdapter(MapAdapter.class)
    @XmlPath(".")
    private Map<Integer,String> map;

} 
```

**地图适配器**

```
package forum11956071;

import java.util.*;
import java.util.Map.Entry;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class MapAdapter extends XmlAdapter<MapAdapter.AdaptedMap, Map<Integer, String>>{

    public static class AdaptedMap {
        public List<Item> item = new ArrayList<Item>();
    }

    public static class Item {
        @XmlAttribute Integer key;
        @XmlValue String value;
    }
    @Override
    public AdaptedMap marshal(Map<Integer, String> map) throws Exception {
        AdaptedMap adaptedMap = new AdaptedMap();
        for(Entry<Integer, String> entry : map.entrySet()) {
            Item item = new Item();
            item.key = entry.getKey();
            item.value = entry.getValue();
            adaptedMap.item.add(item);
        }
        return adaptedMap;
    }

    @Override
    public Map<Integer, String> unmarshal(AdaptedMap adaptedMap) throws Exception {
        Map<Integer, String> map = new HashMap<Integer, String>();
        for(Item item : adaptedMap.item) {
            map.put(item.key, item.value);
        }
        return map;
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要`jaxb.properties`在与您的域模型相同的包中拥有一个名为 file 的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy- as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11956071;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Info.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11956071/input.xml");
        Info info = (Info) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(info, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<info>
   <item key="1">value1</item>
   <item key="2">value2</item>
</info> 
```

# ruby - 如何在 Ruby 字符串中插入项目符号字符？

> ID：11956073
> 
> 赞同：5
> 
> 时间：2012-08-14T15:46:43.850
> 
> 标签：ruby

我正在尝试创建一个带有项目符号字符的 Ruby 1.9.3 字符串。

```
str = "•" + " hello world" 
```

但是，当我输入它时，我收到关于非 ASCII 字符的语法错误。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T15:49:22.733

您可以将 Unicode 字符放在那里。

```
str = "\u2022" + " hello world" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:49:13.957

为我工作（红宝石 1.9.3）

```
str = "•" + " hello world" 
str # => "• hello world" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:49:52.790

不要使用 ASCII 字符串——但你没有说明你使用的是什么版本的 Ruby。如果您使用的是 1.8，您还可以使用 Unicode 字符 ，`"\u2022"`或者在下面的入门中查看其他选项。

在 1.9 中，这应该可以正常工作。您还可以使用`encode`和/或强制 UTF-8 `force_encoding`。

[Ruby 1.9 编码入门](http://yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/)。

# asp.net - User.Identity.Name 的替代品

> ID：11956083
> 
> 赞同：1
> 
> 时间：2012-08-14T15:47:07.827
> 
> 标签：asp.net, visual-studio-2010, visual-studio

整个下午，

我在网页上显示用户名以说明谁已锁定网页以进行编辑。我正在使用以下代码...

```
 If String.IsNullOrEmpty(lock.LockedBy) Then

         lock.LockedBy = User.Identity.Name
         hdnIsLockedBy.Value = User.Identity.Name
         lock.AgendaID = Integer.Parse(lblAgendaNumber.Text)

  End If 
```

我了解 User.Identity.Name 带回了域名\名称。我想知道我是否可以只因为我看不到任何合适的替代品而撤回用户名？

问候贝蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:49:51.400

如果您可以假设所有用户的域名都相同，只需将其从`User.Identity.Name`使用中剥离即可`String.Replace`

```
User.Identity.Name.Replace("MyDomainName\", "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:58:13.880

我会做这样的事情：

```
lock.LockedBy = User.Identity.Name.Contains("\\")? User.Identity.Name.Substring(name.IndexOf("\\")+1):User.Identity.Name; 
```

如果这是您经常做的事情，请将其移至函数中。

# ios - 连接到 ibaction 的选项卡栏项

> ID：11956086
> 
> 赞同：0
> 
> 时间：2012-08-14T15:47:18.593
> 
> 标签：ios, uitabbaritem

我正在尝试找到一种方法使 TabBar 的项目充当“UIbutton”。我想在按下这个项目时让它作为一个 ibaction 方法工作。

我尝试了几种实现方式：

```
 -(void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item{
   } 
```

但是我无法使该方法起作用。

例如，伪造标签栏的项目功能并使其打开 UIActionSheet 的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:58:23.477

尝试在 viewController 中使用 IBOutlet 和 UITabBarDelegate。

```
@interface MyViewController : UIViewController <UITabBarDelegate> {
  IBOutlet UITabBar* tabBar;
}
@end 
```

将 UITabBar 连接到 Interface Builder 中的 IBOutlet。

在 viewController 的 viewDidLoad 方法中将委托设置为“self”：

```
-(void)viewDidLoad {
  [super viewDidLoad];
  // Do any additional setup after loading the view.
  tabBar.delegate = self;
} 
```

并以某种方式设置委托方法来区分选项卡：

```
-(void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
  NSLog(item.title);
  if([item.title isEqualToString:@"some label"]) {
     // do something for this specific button
  }
} 
```

（这是一篇旧帖子，但我有同样的问题。希望这可以为其他人省去同样的麻烦。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:08:01.743

看一下这个！这些人创建了一个带有 uibutton 的 tabBar！[http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)

完整源代码： [https ://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar)

我前段时间尝试了代码，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:56:14.357

您可以尝试**tabBarController shouldSelectViewController**委托方法。覆盖这个。在要从中显示 ActionSheet 的选项卡上返回 NO，而是在此方法中实例化 ActionSheet。

您将需要有一个占位符 UIViewController 来代替此选项卡。

如上所述，这违反了 Apple HIG，并且可能是您的应用被拒绝的原因。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T15:52:11.303

Call your action method in the `viewDidLoad` method of the view of the tab bar item selected.

# javascript - Javascript函数不返回结果

> ID：11956087
> 
> 赞同：2
> 
> 时间：2012-08-14T15:47:19.140
> 
> 标签：javascript, jquery

我有一个函数没有按照我想要的方式返回值。该函数所做的是获取从 PHP 页面（PHP 页面具有 SQL 查询）回显的信息并返回它。这里是代码：

```
function getValues(var1,var2) {
  $.post("http://url/to/file.php", {var1:var1,var2:var2}, function(data) {
    values = data.split(',');
    return values[0];
  });
} 
```

我知道 PHP 文件正在工作，因为如果我要编写`alert(data);`或者`alert(values);`我可以看到那里的值。例如，当我调用该函数时，`var result = getValues(5,6);`结果是未定义的。也许是因为它们不在列表或数组中？感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T15:48:53.997

因为 AJAX 调用是异步的（AJAX 的第一个 A），因此它执行一个回调函数，它不返回结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:50:25.083

正如 KayKay 所指出的，异步方法永远不会返回任何数据。然而，如果你真的必须得到那个回报，你可以将'async'设置为false。

# ruby-on-rails - jruby -S bundle 没有运行，因为它说 jruby-openssl gem 丢失

> ID：11956088
> 
> 赞同：2
> 
> 时间：2012-08-14T15:47:22.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, openssl, jruby

我正在使用 Jruby 1.6.7 和 ruby​​ >1.9。当我运行`jruby -S bundle 时，我看到以下错误

```
Fetching gem metadata from https://rubygems.org/.JRuby limited openssl loaded. http://jruby.org/openssl
gem install jruby-openssl for full support.
Unfortunately, a fatal error has occurred. Please see the Bundler
troubleshooting documentation at .... Thanks!
LoadError: OpenSSL::SSL requires the jruby-openssl gem 
```

我的 Gemfile 已经有这个 open-ssl

```
source 'https://rubygems.org'
gem 'rails', '3.2.6'
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
gem 'activerecord-jdbcsqlite3-adapter'
gem 'activerecord-oracle_enhanced-adapter', '~>1.4.1'
gem 'jruby-openssl' 
```

这是我的 Gemfile.lock 的一部分

```
 jdbc-sqlite3 (3.7.2)
    journey (1.0.4)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    jruby-jars (1.6.7.2)
    jruby-openssl (0.7.7)
      bouncy-castle-java (>= 1.5.0146.1)
    jruby-pageant (1.1.1-java)
    jruby-rack (1.1.7)
    json (1.7.3-java) 
```

为什么我仍然收到这个错误，说缺少 open-ssl？[这个问题与这个](https://stackoverflow.com/questions/11940055/deploying-a-rails-application-on-tc-server)问题完全相关，如果我能够在`jurby -S bundle`这里执行，我的问题将得到解决。

# 更新：

错误在我运行后开始`bundle install --deployment`。

所以我跑了`bundle install --no-deployment`，`bundle install`..`jurby -S bundle`一切正常。我无法理解这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:27:04.340

在运行命令`jruby -S gem install jruby-openssl` *之前*执行。`bundle`

# iphone - 通过 Segue 会出错

> ID：11956093
> 
> 赞同：0
> 
> 时间：2012-08-14T15:47:39.990
> 
> 标签：iphone, ios, ios4, sdk

嗨，我目前已经推动了选择以让我的表格视图推送到详细视图。我也有这个代码来发送选定的表格单元格的名称：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *acell = [tableView cellForRowAtIndexPath:indexPath];
    selectedCell = acell.textLabel.text;

    DetailViewController *myDetViewCont = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];

    myDetViewCont.navigationItem.title = selectedCell;
    [self.navigationController pushViewController:myDetViewCont animated:YES];

} 
```

它构建成功，但在模拟器中它抛出一个错误：

```
@autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
Thread: 1 signal: SIGABRT 
```

我查找了类似的问题，但还没有找到解决方案。有什么帮助吗？

好的有关错误的其他信息：

```
[self.navigationController pushViewController:myDetViewCont animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:31:58.300

如果您使用情节提要，则以下行没有意义：

```
DetailViewController *myDetViewCont = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]]; 
```

您的项目中是否调用了 NIB 文件`DetailViewController.xib`？大概不会。因此`myDetViewCont`将是`nil`，你会得到一个例外。如果你确实有那个NIB，那么push segue 是什么（因为你不能从storyboard 到NIB）？

假设您真的想使用情节提要，而不是 NIB，如果您已经在控制器之间有一个 push segue，请给该 segue 一个标识符（您在 Interface Builder 中执行此操作；在我下面的代码中，我将仅将`youridentifier`其用作占位符无论您指定什么，都将用正确的标识符替换），然后您应该使用 segue 进行转换：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *acell = [tableView cellForRowAtIndexPath:indexPath];
    [self performSegueWithIdentifier:@"youridentifier" sender:acell];
} 
```

如果您想将数据发送到新控制器，您`prepareForSegue`可以这样做：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"youridentifier"])
    {
        if ([sender isKindOfClass:[UITableViewCell class]])
        {
            UITableViewCell *selectedCell = sender;
            UIViewController *myDetViewCont = segue.destinationViewController;
            myDetViewCont.navigationItem.title = selectedCell.textLabel.text;
        }
        else
        {
            NSLog("%s Was expecting sender to be a tableviewcell", __FUNCTION__);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T00:23:38.820

找到了解决方案。你需要在你的故事板中有一个 UINavigationController。为此，请使用您的第一个场景，单击它并转到 xcode 顶部的选项卡并执行编辑器>嵌入>导航控制器，选中按钮以将导航控制器设置为初始场景。添加以下代码以隐藏顶部的导航栏。

```
self.navigationController.navigationBar.hidden = YES;
self.navigationController.navigationBar.translucent = NO; 
```

# ruby-on-rails - 如何停止rails应用程序中的链接以域为前缀

> ID：11956094
> 
> 赞同：2
> 
> 时间：2012-08-14T15:47:45.293
> 
> 标签：ruby-on-rails, url, content-tag

这两个：

```
<%= content_tag("a", @a_model_instance.name, :href => @a_model_instance.url) %>
<a href="<%= @a_model_instance.url %>"><%= @a_model_instance.url %></a> 
```

导致 URL 的 href 值为：

```
0.0.0.0:3000/model_name/www.the_url_i_want.com 
```

您如何防止这种情况获得值为 的`a`标签？ 返回字符串。`href``www.the_url_i_want.com``@a_model_instance.url``www.the_url_i_want.com`

**编辑 - 一种解决方案**

这有效：

```
<%= content_tag("a", @a_model_instance.name, :href => "http://#{@a_model_instance.url}") %>
<a href="http://<%= @a_model_instance.url %>"><%= @a_model_instance.url %></a> 
```

但似乎很不合规矩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:02:01.973

如果不存在，您可以在 url 前面加上协议：

```
module UrlHelper
  def url_with_protocol(url)
    /^http/.match(url) ? url : "http://#{url}"
  end
end 
```

进而：

```
link_to @a_model_instance.name, url_with_protocol(@a_model_instance.url) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:02:11.840

如果您在 url 的开头添加 http 它不应该在我认为的域之前添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:57:36.250

您可以插入 url raw

```
 <%= link_to "Visit Stackoverflow", "http://www.stackoverflow.com/" %> 
```

或尝试

```
<%= link_to "My url string", "#{@a_model_instance.url}" %> 
```

# ruby - 刷新从更新文件中读取的 sinatra 应用程序

> ID：11956096
> 
> 赞同：0
> 
> 时间：2012-08-14T15:47:46.883
> 
> 标签：ruby, sinatra, refresh, readfile

我正在用 ruby​​ 编写一个 sinatra 应用程序，它将有关我的网络的信息收集到两个不同的文件中。第一个是 .csv，收集有关网络中所有工作站的 IP 地址和名称的信息。第二个，.txt，读入 Asterisk 服务器并收集有关链接到指定 IP 地址的活动 SIP 通道的信息。

我的应用程序只是从这两个文件中编译信息并在网页上创建表格，以匹配当前登录到特定站点的用户。但是，我希望该应用程序能够假装实时使用。我有两个文件每 5 分钟自动更新一次，但是由于应用程序正在读取的文件被覆盖，应用程序的输出不会改变。有没有办法安装它，以便应用程序在写入后读取“新”文件？

我已经在堆栈溢出方面进行了研究，并且我已经看到提到 Kqueue 的事情，python 用户可以在重写它们之前简单地观察这些文件中的变化，这真的很好。有红宝石版本吗？此外，我希望该应用程序始终可以访问，并且可能仅在需要更新某些内容时“刷新”，这样才有意义。

当我意识到我在阅读文件后从不关闭文件时，我也有了一个有趣的小顿悟。我不会发布整个应用程序，但这里是我阅读文件的地方：

```
#Pulls active SIP channels from Asterisk
$sip = {}
File.open('sip.txt').each do |line|
  userid,ip = line.split(" ")
  $sip[ip] = userid[0..3]
end

#Prepares hash of all stations, ip addresses
$machines = {}
CSV.foreach('/Volumes/Scripts/report-51.csv') do |row|
  name = row[1]
  address = row[0]
  $machines[name] = address
end 
```

是否有可能因为我从不关闭文件，程序从不打开“新”文档？只是想在这里集思广益。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:11:04.690

很难说出正在发生的事情的整体结构，但是，是的，每 5 分钟调用一次任何代码，然后读取文件，我会确保在每次调用时关闭并在该代码中重新打开文件。那应该可以解决您的问题。

您还可以考虑切换到数据库方法以获得更可靠的结果。

# ms-access - MS Access 错误 3151 ODBC 错误 --> ORACLE 11G

> ID：11956101
> 
> 赞同：1
> 
> 时间：2012-08-14T15:48:14.903
> 
> 标签：ms-access, odbc, oracle11g, dao

我有一个由现已离开的承包商创建的 MS Access 2003 数据库。数据库使用链接表和 DAO 连接到 ORACLE 后端。在我们最近将 ORACLE 版本从 10g 升级到 11g 之前，它一直可以正常工作。作为升级的一部分，我们必须将我们相当过时的“Microsoft ODBC for ORACLE”驱动程序更新为“Oracle in instantclient11_1”，它构成了 ORACLE Instant Client 的一部分。

当我们运行 VBA 时，它返回错误代码 3151 并说“ODBC --connection to 'MYDB' failed. 我做了一些谷歌搜索，发现代码 3151 是通用代码。但是有时这有效，有时（80%时间）它没有。

它安装在 MS Xp SP3 32 位机器上，驱动程序是 32 位的。当我运行测试连接时，从 ODBC 管理器总是成功，我可以从 excel 中查询数据库并使用“导入外部数据”

知道如何解决这个问题吗？

# javascript - 使用 jquery.val() 更改值的事件

> ID：11956103
> 
> 赞同：0
> 
> 时间：2012-08-14T15:48:26.097
> 
> 标签：javascript, jquery, javascript-events

我有一个`<input type="text">`使用该方法为许多其他脚本 jquery 更新值的方法`.val("value here")`。我需要在 的值`input`更新后运行一个新脚本。如何关联一个适合我的事件？

这是我的代码：
`$('#PedidoTotalDescontoPadrao').change(function() { console.log('test'); });`

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:09:53.797

该`change()`方法不适用于`<input type="text">`html 标签。你可能不想用`keyup()`.

```
$('#PedidoTotalDescontoPadrao').keyup(function() {
 console.log('test');
 // and this is how you'd trigger the other events you want 
 $('.something').trigger('click');     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:57:46.967

我认为您使用错误的事件处理程序来满足您的需要。

试试这个。

[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

# ruby-on-rails - Rails 3\. Carrierwave 上传的图片在生产中不显示

> ID：11956105
> 
> 赞同：0
> 
> 时间：2012-08-14T15:48:28.280
> 
> 标签：ruby-on-rails, ruby, carrierwave

我正在将 Carrierwave 图像上传到 app/assets/images 目录。为了显示它们，我这样做......

```
 <%= image_tag "/assets/#{File.basename(@user.image_url(:thumb).to_s)}" %> 
```

生成的 HTML`<img src="/assets/thumb_1_1_leonel.jpg">` 在开发中完美运行，而不是在生产中。图片实际上是上传的。

上传图片的权限为`-rw-r--r--`.

我已经尝试设置`config.serve_static_assets`为 true (http://stackoverflow.com/questions/10612914/carrierwave-doesnt-render-path-exists-but-image-doesnt-show-up)，然后重新启动 Unicorn 和 ngnix，但我没有看到改变。

为什么它们不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-19T10:12:48.533

在production.rb中添加这个

```
config.serve_static_assets = true 
```

# html - 多使用相同名称的标签。可以吗？

> ID：11956110
> 
> 赞同：0
> 
> 时间：2012-08-14T15:48:48.543
> 
> 标签：html, asp.net-mvc

我有两个使用相同名称的字段。当使用 Google Chrome 将这两个输入字段发布到 ASP.NET MVC 控制器时，最靠近页面顶部的输入字段优先。这是一种理想的行为，但我可以安全地假设这种行为与 IE6 一样旧的旧浏览器是一致的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:50:55.023

拥有多个同名字段没问题。无论浏览器版本如何，它们都会被发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T15:51:32.317

您可以有多个具有相同名称的字段，但是是的，因为您注意到第一个字段将覆盖其他字段（您可能能够读取它们，具体取决于您的服务器软件，我不知道 ASP.NET）。

如果需要，您可以添加`[]`名称以使其成为数组。

```
<input name="test[]" />
<input name="test[]" /> 
```

我不了解 ASP.NET，但在 PHP`$_POST['input']`中现在将是一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:59:25.950

是也不是，这**可能**很好，但**可能会**导致问题。

从淘汰手册（[链接](http://knockoutjs.com/documentation/uniqueName-binding.html)）：

> *   其他技术可能依赖于某些元素具有名称的假设，即使在您使用 KO 时名称可能无关紧要。例如，jQuery Validation 目前只会验证有名字的元素。要将其与 Knockout UI 一起使用，有时需要应用 uniqueName 绑定以避免混淆 jQuery Validation。查看一个使用 KO 的 jQuery Validation 的示例。
>     
>     
> *   如果单选按钮没有名称属性，IE 6 不允许检查它们。大多数情况下，这无关紧要，因为您的单选按钮元素将具有名称属性以将它们放入互斥组中。但是，以防万一您没有添加 name 属性，因为它在您的情况下是不必要的，KO 将在内部对这些元素使用 uniqueName 以确保可以检查它们。

# php - Yii ajaxLink() 只工作一次

> ID：11956111
> 
> 赞同：1
> 
> 时间：2012-08-14T15:48:49.957
> 
> 标签：php, ajax, listview, yii

我有一个在文件`CListView`中使用的。`ajaxLink()``_view`

查看 (index.php)

```
<?php

Yii::app()->clientScript->registerScript('ajaxUpdate',
"
//javascript function to update the listview using ajax
function updateItemList(){
    $.fn.yiiListView.update('itemList');
    return false;
}

", CClientScript::POS_READY);

?>
<?php $this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view',
    'id'=>'itemList',

)); ?> 
```

部分（_view.php）

```
<?php echo CHtml::ajaxLink('Delete',array('libdbitems/delete','id'=>$data->id),
                array('type'=>'POST','success'=>'function(){updateItemList()}'),
                array('confirm'=>'Are you sure you want to delete this item?',
                    'id'=>'delete-'.$data->id));  ?> 
```

控制器基本上只是`actionIndex()`使用 Gii 生成的默认值。

`Delete`这是问题所在：当我在页面加载后第一次单击我的链接时，它的行为符合预期。之后，单击`Delete`什么也不做。（它会刷新 ListView，但没有进行任何更改。）

我很确定问题在于 Yii 如何将`click()`事件绑定到我在 javascript 中的链接，但我不知道如何解决它。我已尝试`live=true`按照其他人的建议使用该选项，但它什么也没做。

有谁知道如何解决此问题，以便我的删除链接可以多次工作而无需重新加载页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:15:23.767

您的删除链接是否是刷新的项目列表的一部分？如果是这种情况，则在创建新链接时脚本不会重新注册新链接。

两种选择：

1）确保您的链接没有被刷新，并且是页面的一个永久方面

2) 编写一个自定义的 jQuery 处理程序，而不是使用 Yii 的 ajaxLink。您需要使用[.on](http://api.jquery.com/on/)和委托事件。某种形式的东西：

```
$("#parentContainer").on("click", ".deleteLinkClass', updateItemList) 
```

其中`parentContainer`是页面上的永久项目，并且`deleteLinkClass`将是您需要分配给您正在使用的删除链接的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:22:44.170

嗯，一个愚蠢的修复。我意识到`CHtml::$liveEvents = false`当我还处于故障排除阶段的早期时，我不小心在控制器中留下了一个。

解决方案是离开`CHtml::$liveEvents = true`（默认）并确保所有链接都有唯一的 ID。

# .net - powershell函数中的非模态表单创建

> ID：11956112
> 
> 赞同：0
> 
> 时间：2012-08-14T15:48:49.900
> 
> 标签：.net, winforms, powershell

Powershell 2 中有没有办法创建非模态 Windows.Form / Dialog？表单应在函数内创建并保持打开状态，直到手动关闭。然而，函数的执行必须继续。即使任何脚本的执行完成并且用户返回到交互模式，也应该让表单保持打开状态。

我试过这样，但它甚至没有创建带有 start-job 的表单。直接调用 makeform ，但是按预期工作。

```
function makeform { 
        [void][reflection.assembly]::LoadWithPartialName("System.Windows.Forms")
        [System.Windows.Forms.Application]::EnableVisualStyles();

        $form = New-Object Windows.Forms.Form
        $form.Text = 'Test Form'

        $form.Add_Shown({$form.Activate()})
        $form.ShowDialog()
}

function show  {
    start-job { makeform }
}

show  # does show nothing :| (expected the form to appear) 

start-job { makeform } -Name 'myjob' # expect the form to appear here - but it doesn't either :| 
Write-Host "Cont..."
# simulate some long running task 
[Threading.Thread]::Sleep(10000)

Wait-job myjob
Remove-job myjob
Write-Host "Done..."
Get-Job 
```

我正在使用 .NET 4（通过配置）运行 Powershell 2，以防它很重要。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T02:38:33.697

工作方法是正确的，但你有一个错误。作业在一个全新的范围内运行，并且不会继承当前范围内定义的任何变量或函数。因此`makeform`，您的工作不知道该功能。你可以在这里验证：

```
Start-Job { makeform } | Wait-Job | Receive-Job 
```

一些解决方法：

在脚本块中声明`makeform`，并将该块作为`-InitializationScript`

```
$lib = {
  function makeform {     
          [void][reflection.assembly]::LoadWithPartialName("System.Windows.Forms")    
          [System.Windows.Forms.Application]::EnableVisualStyles();    

          $form = New-Object Windows.Forms.Form    
          $form.Text = 'Test Form'    

          $form.Add_Shown({$form.Activate()})    
          $form.ShowDialog()    
  }
}

Start-Job { makeform } -InitializationScript $lib 
```

或者您可以将`makeform`函数本身的脚本块作为作业的内容传递：

```
Start-Job $function:makeform 
```

请参阅 SO question [In PowerShell Form.Show() 无法正常工作，但 Form.ShowDialog() 可以](https://stackoverflow.com/questions/5986681/in-powershell-form-show-does-not-work-right-but-form-showdialog-does)

# javascript - ie8 中的 e.preventDefault()

> ID：11956113
> 
> 赞同：0
> 
> 时间：2012-08-14T15:48:51.113
> 
> 标签：javascript, jquery, web, internet-explorer-8

我已经读过 [这个](https://stackoverflow.com/questions/1000597/event-preventdefault-function-not-working-in-ie)，但我仍然无法让它工作。'e' 只是没有属性'returnValue'。怎么了？

### html

```
<img id="vtkPicImg" style="display: none;" jQuery17102915111663214694="47"/> 
```

### 这里的js代码：

```
var vtk = $("#vtkPicImg");

vtk.bind('mousedown', function(e) {
    e.preventDefault ? e.preventDefault() : e.returnValue = false;
    vtk_mouseDown(e);
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:10:08.077

***更新***

关于您更新的问题，单击元素时没有“默认”行为`<img>`，因此自然没有什么可以阻止的。

* * *

由于您使用的是 jQuery，因此您只需要...

```
e.preventDefault(); 
```

跨浏览器问题已修复。

您的问题可能是您正在`mousedown`使用没有默认行为的元素的事件上执行此操作`mousedown`。

* * *

为了防止您试图阻止的任何默认行为，您可能需要使用`click`事件来执行此操作。

```
var vtk = $("#vtkPic");

vtk.bind('click', function(e) {
     e.preventDefault();

})
   .bind('mousedown', function(e) {
        vtk_mouseDown(e);
    }); 
```

# ruby-on-rails - MiniProfiler 未显示在页面上

> ID：11956123
> 
> 赞同：11
> 
> 时间：2012-08-14T15:49:27.907
> 
> 标签：ruby-on-rails, mvc-mini-profiler

我在让 MiniProfiler 向我显示报告时遇到问题。我只是在开发环境中，应该一直显示它。添加`?pp=help`确实会打开帮助页面。在 tmp/miniprofile 中有大量的 mp_timers_ 文件。显然那里正在发生一些事情。

起初我认为这是一个奇怪的 CSS 问题，就像我的导航栏覆盖了它一样。我尝试在没有 CSS 的情况下加载页面，但 MiniProfile 框仍然没有出现。

万一这很重要，我没有`before_filter`设置。但是，当我使用他们文档中的简单文档时，它没有任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-06T18:24:39.427

我的第一个想法是默认情况下它是禁用的。如果是这种情况，您将无法看到帮助页面。从你描述的情况来看，它似乎正在工作。所以我的解决方案是在浏览器中输入这个，看看会发生什么。

```
http://localhost:3000/?pp=enable 
```

之后，您应该能够访问帮助页面。

```
http://localhost:3000/?pp=help 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-10T00:48:33.933

我知道这已经很晚了，但是可能导致此问题的另一个潜在问题是 JS 错误。

如果有任何未解决的 JS 错误，徽章可能不会显示。

所以在拔头发之前一定要把它们压扁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-03T09:41:48.003

我也没有显示它，因为旧版本的 gem 没有当前需要的初始化程序。

为了解决这个问题，我只运行了生成器，它添加了一个初始化程序来在开发中设置 rack-mini-profiler：

`bundle exec rails g rack_profiler:install`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-19T16:11:27.677

MiniProfiler 也可以默认隐藏

```
# config/initializers/mini_profiler.rb   
Rack::MiniProfiler.config.start_hidden = true 
```

# php - 用户的自定义配置文件字段

> ID：11956124
> 
> 赞同：0
> 
> 时间：2012-08-14T15:49:31.907
> 
> 标签：php, mysql, pdo

我目前正在开发一个系统，该系统允许用户为他们添加的联系人添加额外的自定义字段。

我想知道添加这种能力的最佳和最有效的方法是什么？

现在我在想的是每个用户有一个表（外键到“主”联系人表），然后为用户添加的每个自定义字段添加一列（因为我不希望有超过 100每个数据库分片-200 个用户[分片很容易，因为每个用户在这个系统中都看不到彼此的内容]），尽管我不能 100% 确定这是否是解决此类问题的正确解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:52:54.413

也许您可以尝试使用一个单独的表来存储对用户的引用以及字段名称和值，这样您就可以拥有很多自定义字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:56:53.677

如果您使用[Boyce-Codd](http://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form)，则将信息分开并将它们存储到表中。表示为所有具有外键的用户提供一个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:56:48.890

每个用户一张表将导致数百或更多表可能重复信息。

您需要有一个名为 USERS 的表来存储用户的 id 和您可能想要的固定信息。然后，您可以有一个 CONTACT 表，它存储用户可能创建的联系人类型，以及一个匹配表 USER_CONTACT，该表将用户唯一 ID 与创建的联系人 ID 匹配。

有了这个，您可以对存储的所有信息进行高级数据挖掘，例如现在每个用户创建了多少联系人，谁创建了更多等等......

# ruby - Ruby 程序 - 创建菜单

> ID：11956127
> 
> 赞同：0
> 
> 时间：2012-08-14T15:49:47.953
> 
> 标签：ruby

我有以下课程，我将使用它作为我的程序的菜单：

```
class Application
  # To change this template use File | Settings | File Templates.
  def initialize
    mainMenu
  end

  def navigateTo(what)
    what.new.display
    mainMenu
  end

  def mainMenu
    puts "What would you like to do?
      1: Add module to a scheme
      2: Remove module from a scheme
      3: Query modules
      4: Modify module
      5: Register a student on a scheme
      6: Remove a student from a scheme
      7: Register a student on a module
      8: Remove a student from a module"
case gets.strip
  when "1"
    navigateTo Module
    addModule
  when "2"
    navigateTo Module
  when "3"
    navigateTo Module
  when "4"
    navigateTo Module
  when "5"
    navigateTo Student
  when "6"
    navigateTo Student
  when "7"
    navigateTo Student
end
end
Application.new
end 
```

但是，当我运行课程时，我尝试从菜单中选择选项 1，并在控制台中打印出这一行：

```
#<Module:0x1bd2c90>What would you like to do? 
```

然后再次打印菜单。

选项 1 应该导航到我的 Module 类，如下所示：

```
class Module
  # To change this template use File | Settings | File Templates.
  @@moduleScheme = nil
  @@moduleYear = nil
  #@moduleTitle = ""

  def self.moduleYear
    @@moduleYear
  end

  def initialize(v)
    @val = v
  end
  # Set and get the @val object value
  def set (v)
    @val = v
  end
  def get
    return @val
  end

  def addModule
    moduleName = Module.new(30)
    moduleRefNo = Random(100)
    #moduleTitle = @moduleTitle
    moduleYear(4)

    print "What is the name of the module you would like to add?"
    moduleName = gets
    moduleRefNo
    printf "Which year does the module belong to?"
    @@moduleYear = gets
    puts "#{moduleName}, belonging to #{@@moduleYear} has been added to the system, with reference number #{moduleRefNo}."
    navigateTo Application

  end

  def addModuleToScheme
    moduleName.moduleScheme = schemeName
  end
  def removeModuleFromScheme
    moduleName.moduleScheme = nil
  end

  def queryModule

  end

end 
```

一旦用户从主菜单中选择了选项 1，并且程序已经导航到 Module 类，我希望它完全运行该类，即向用户显示提示，并读取他们在键盘上键入的任何内容，然后导航回菜单，如行所示

```
navigateTo Application 
```

在我的“addModule”函数结束时。但是，由于某种原因，它似乎要么没有导航到 Module 类，要么只是直接跳到它的末尾。谁能指出我在这里做错了什么？

**编辑 2012 年 8 月 16 日 14:53**

好的，所以我进行了建议的更改并更改了以下函数以包含 (v)：

```
def navigateTo(what)
what.new(v).display
mainMenu
  end 
```

但是，我现在得到一个错误列表：

1.  （应用程序类文件路径）在'mainMenu'未初始化的常量应用程序：：CourseModules（nameError）

这发生在菜单`navigateTo CourseModules`下方的行上。`when "1"`

1.  然后在初始化方法的行上有另一个错误`mainMenu`，它只是说 from (filepath) in 'initialize'

2.  一个类似的，它只是`Application.new`在 Application.rb 类末尾的行中从 (filepath) 'new' 中说，以及在同一行的 'class:Application' 中说的

3.  然后我在第一行有一个在“顶部（必需）”中显示（文件路径）

4.  最后，我还有另外两个与前面的完全不同的错误：

    > 从 -e:1:in '加载'
    > 
    > > 从 -e:1:in 'main'

关于我现在做错的任何其他想法？

* ***2012 年 8 月 16 日 16:15 编辑 ****

我的 Application.rb 类的完整脚本是：

```
class Application
  # To change this template use File | Settings | File Templates.
  def initialize
    mainMenu
  end

  def navigateTo(what)
    what.new(v).display
    mainMenu
  end

  def mainMenu
    puts "What would you like to do?
          1: Add module to a scheme
          2: Remove module from a scheme
          3: Query modules
          4: Modify module
          5: Register a student on a scheme
          6: Remove a student from a scheme
          7: Register a student on a module
          8: Remove a student from a module"
    case gets.strip
  when "1"
    navigateTo CourseModules
  when "2"
    navigateTo CourseModules
  when "3"
    navigateTo CourseModules
  when "4"
    navigateTo CourseModules
  when "5"
    navigateTo Student
  when "6"
    navigateTo Student
  when "7"
    navigateTo Student
end
  end
  Application.new
end 
```

我的 courseModules.rb 类的完整脚本是：

```
class CourseModules
# To change this template use File | Settings | File Templates.
   @@moduleScheme = nil
   @@moduleYear = nil
   #@moduleTitle = ""

   def self.moduleYear
     @@moduleYear
   end

   def initialize(v)
     @val = v
   end
   # Set and get the @val object value
   def set (v)
     @val = v
   end
   def get
     return @val
   end

   def addModule
     moduleName = Module.new(30)
     moduleRefNo = Random(100)
     #moduleTitle = @moduleTitle
     moduleYear(4)

     print "What is the name of the module you would like to add?"
     moduleName = gets
     moduleRefNo
     printf "Which year does the module belong to?"
     @@moduleYear = gets
     puts "#{moduleName}, belonging to #{@@moduleYear} has been added to the system, with reference number #{moduleRefNo}."
     navigateTo Application

   end

   def addModuleToScheme
     moduleName.moduleScheme = schemeName
   end
   def removeModuleFromScheme
     moduleName.moduleScheme = nil
   end

   def queryModule

   end

 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:09:38.607

您的应用程序从不显示 CourseModules 菜单（即从不调用`addModule`）的原因是因为它卡在 Application.mainMenu 方法中。当您按“1”时，将`Application.navigateTo`调用该方法。这将输出 CourseModules 对象，也就是`#<Module:0x1bd2c90>`您所看到的，然后再次显示 mainMenu。你一直这样做，这就是为什么你永远不会到达 addModule 行。

代码有很多问题，所以我不确定如何提出修复建议。例如，

1)`what.new.display`由于 CourseModules 初始化方法需要 1 个参数而失败，但您没有传入

2）`addModule`由于Application类中不存在该方法，您要从mainMenu方法调用的方法将失败。

3) 该`addModule`方法将失败，因为 CourseModules 类不存在 navigateTo 方法。

我认为你需要重新评估你是如何组织代码的。也许将所有与接口相关的方法放在一个类中。该类将处理显示提示并将任何输入传递给适当的类进行处理。

# wpf - 如何只允许管理员关闭 Windows 中的程序

> ID：11956135
> 
> 赞同：1
> 
> 时间：2012-08-14T15:50:01.093
> 
> 标签：wpf, windows, security

我不知道这是否与程序的编程方式或设置方式或启动方式有关。

但是我在 WPF 中创建了一个程序，我想确保计算机上的普通用户都不会关闭它。

普通用户需要能够与之交互，但他们不应该能够关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:11:13.427

正确的方法是将应用程序作为具有管理员设置的权限的服务运行，以不允许用户操作该服务。否则，您将遇到用户启动的关闭和阻止应用程序终止的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:03:13.027

如果 OP 想要阻止操作系统的可见性，则创建类似终端的体验。最好的方法是创建一个 shell 替换。

然后用户不会直接将操作系统视为窗口。

# jquery - Jquery UI Selectable 的自定义验证

> ID：11956136
> 
> 赞同：3
> 
> 时间：2012-08-14T15:50:04.823
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, jquery-validate

我有以下代码使

```
for(somecollection){
    <ol id="someId@(index)" class="selectableList">
       <li value="1">1</li>
       <li value="2">2</li>
       <li value="3">3</li>
    </ol>
} 
```

在 javascript 部分：

```
$(".selectableList").selectable(
            {
                stop: function (event, ui) {
                    $(".ui-selected:first", this).each(function () {
                        $(this).siblings().removeClass("ui-selected");
                        var refreshVal = $(this).attr("value");
                        var cid = $(this).attr("id");
                        SetValue(@(Model.Id),refreshVal, cid);
                    });
                }
            }
        );

$("#positionCultureForm").on("submit", function () {
        if (!$(this).valid()) {
            return false;
        }
    }); 
```

我不确定如何为此设置验证，以便在提交表单时检查是否至少有一个项目是**ui-selected**。

已编辑：我需要对集​​合中的每个项目进行单独的验证。

编辑：自定义验证：

```
jQuery.validator.messages.required = "";

    $.validator.addMethod("isOneSelected", function (value, element, arg) {
        return false;
    }, 'test');

    $("#someForm").validate();

    $("#someForm").on("submit", function () {
        if (!$(this).valid()) {
            return false;
        }
    }); 
```

在 HTML 中：

```
<ol id="someId@(index)" class="selectableList isOneSelected"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:30:45.527

应用 .selectable() 后，您的 ol 将与此类似：

```
<ol id="someId@(index)" class="selectableList ui-selectable">
<li class="ui-widget-content ui-selectee">Item 1</li>
<li class="ui-widget-content ui-selectee">Item 2</li>
<li class="ui-widget-content ui-selectee">Item 3</li>
<li class="ui-widget-content ui-selectee ui-selected">Item 4</li>
<li class="ui-widget-content ui-selectee">Item 5</li>
<li class="ui-widget-content ui-selectee">Item 6</li>
<li class="ui-widget-content ui-selectee">Item 7</li>
</ol> 
```

从那里你可以看到 .ui-selected 类出现了，要找出有多少被选中，只需创建一个选择器并使用 .length 来获取它返回的项目数。

```
if($("#someId@(index) .ui-selected").length){} // if 1 or more are selected 
```

如果你需要为它们中的每一个做一些特别的事情，你总是可以循环遍历它。

```
$("#someId@(index) .ui-selected").each(function()
{
    // your validation
} 
```

在您的代码中，您似乎正在删除此类，`.removeClass("ui-selected");` 然后您可以简单地`$(this).addClass("foo")`使用 .foo 制作您的选择器

# javascript - Netbeans 自动完成功能无法完全与当前的 jQuery.js (v1.8.0) 一起使用

> ID：11956138
> 
> 赞同：7
> 
> 时间：2012-08-14T15:50:23.140
> 
> 标签：javascript, jquery, netbeans, autocomplete

我刚开始使用netbeans（Win7/64位下的NetBeans IDE 7.2（Build 201207171143））来尝试jQuery开发。特别是自动完成似乎非常方便..

我使用了本教程：[http://netbeans.org/kb/docs/web/js-toolkits-jquery.html](http://netbeans.org/kb/docs/web/js-toolkits-jquery.html) 我做了本教程中的所有操作，但使用了当前版本的 jQuery.js (v1.8.0) 而不是较旧的 1.4.2 修订版。

让我们看一下以下代码：

```
<script type="text/javascript">
  $(document).ready(function(){
    $("h1").click(function(){ alert ("HI!"); });
  });
</script> 
```

自动补全适用于“$(document)”。并建议“准备好”。到现在为止还挺好...

第 3 行以 "$("h1")" 开头。在该选择器后跟“。” 我得到了很多建议，但不是“点击”；当我使用较旧的 jQuery-1.4.2.js 时，它的工作原理如下面的教程截图所示：http: [//netbeans.org/images_www/articles/69/web/js-toolkits-jquery/code-completion。 PNG](http://netbeans.org/images_www/articles/69/web/js-toolkits-jquery/code-completion.png)

问题：

*   这里实际上有什么问题？
*   我们能以某种方式让它与当前版本的 jQuery 一起工作吗？如果是这样：如何？
*   谁可能在这里负责... jQuery 或 netbeans 中的错误？

问候，斯特凡

- - 更新 - -

仅当您将 a 添加`<script type="text/javascript" src="js/jquery.js"></script>`到源代码时才会出现此问题。如果您省略包含，它会正常工作。所以这似乎是Netbeans的问题。并引导我们提出以下改编的问题：

问题：不包括 jquery.js 只是一种解决方法。有没有办法解决这个问题？也许我们需要在项目的某个地方禁用一些“自动包含所有”选项？

--- 更新 #2：解决方案 ---

它甚至是包含脚本的名称`<script type="text/javascript" src="jq.js"></script>`，但任何以“jquery.js”结尾的资源名称都不起作用，而`<script type="text/javascript" src="jquery-1.8.0.js"></script>`工作！所以它实际上是 Netbeans 中的一种错误，它是由一些硬编码的东西引起的。解决方案是以某种方式重命名 JavaScript 文件，例如它仍然包含修订。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T20:45:18.223

看起来您正在使用 jQuery 的缩小版本，因为您可能会从 JS 核心获得代码完成，因此如果您将代码推送到生产，以获取 jQuery 代码完成和 API 规范。看这个：

![jQuery 1.18 代码完成演示](../Images/c507c17457ecb5a5c076115e76cfbe10.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:17:51.283

一个可能的问题可能是`click()`已经贬值了，`on()` 当然`click()`没有参数仍然用于触发事件，所以我可能错了，但看看这个自动完成是否正确：

```
$("h1").on("click",function(){ alert ("HI!"); }); 
```

注意： [`on()`](http://api.jquery.com/on/)在[1.7 版本中引入](http://api.jquery.com/category/version/1.7/)

# iphone - iOS 中 PDF Reader 和 Writer 中的文本格式

> ID：11956147
> 
> 赞同：2
> 
> 时间：2012-08-14T15:51:01.130
> 
> 标签：iphone, ios, ipad, ios4, core-graphics

在我的应用程序中，我必须显示一个 PDF 阅读器（来自服务器的 PDF）并将所有内容复制到另一个 PDF。我正在使用[阅读器](https://github.com/vfr/Reader/)来显示 PDF。

但它无法格式化 PDF 中的文本。**粗体**文本以除粗体之外的一些不同的窄字体显示。你能给我一个解决方案吗？

同样，在写作时，我正在使用[使用 Quartz 将 PDF 文档保存到磁盘](https://stackoverflow.com/questions/3780745/saving-a-pdf-document-to-disk-using-quartz)。但在这里我面临同样的问题。新 PDF 显示的字体与源 PDF 中使用的字体不同。

我也尝试了下面的代码。我仍然得到相同的 O/P。请帮我解决一下这个。我还没有使用斜体/下划线等其他文本字体对其进行测试。它也应该适用于这些字体。

```
- (void) generatePdfWithFilePath: (NSString *)thefilePath {
  UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, NULL);
  BOOL done = NO;

  do {
    //Start a new page.
    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"MyPdf" ofType:@"pdf"];
    CFURLRef url = (CFURLRef)[NSURL fileURLWithPath:filePath];
    CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL(url);
    CGPDFPageRef page = CGPDFDocumentGetPage(pdf, 1);
    CGRect paperSize = CGPDFPageGetBoxRect(CGPDFDocumentGetPage (pdf, 1), kCGPDFMediaBox);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(context, 0, paperSize.size.height);
    CGContextScaleCTM(context, 1.0, -1.0); 
    CGContextDrawPDFPage(context, page);
    done = YES;
  } while (!done);

  UIGraphicsEndPDFContext();
} 
```

如果源 PDF 是从 iOS 设备以外的源生成的，则会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:35:01.513

几个想法：

1.  您要显示的字体不在任何`iOS devices`.pdf 文件中，也不嵌入在 PDF 中。因此，它替换了它认为相似的字体。
2.  您不必使用 Reader 来显示 PDF，您可以使用 Web 视图、`UIDocumentInteraction`Controller 或`CGPDFController`. 使用这些内置显示器之一，而不是阅读器，您可能会更幸运。

# c++ - VS2010 重载成员函数未找到

> ID：11956156
> 
> 赞同：1
> 
> 时间：2012-08-14T15:51:31.573
> 
> 标签：c++, visual-studio-2010, syntax-error

在阅读了 C++ 网站上的课程教程后，我学习了以下代码，然后我尝试使用它：

```
class CVector {
  public:
    int x,y;
    CVector () {};
    CVector (int,int);
    CVector operator + (CVector);
};

CVector::CVector (int a, int b) {
  x = a;
  y = b;
} 
```

之后我编写了以下代码，以便学习有效地编写 C++ 类并编写更简洁的代码：

```
class Player {
public:
    string name;
    int level;
};

Player::Player(int y) {
    level = y;
} 
```

但是它给了我错误 C2511: 'Player::Player(int)' : 在 'Player' 中找不到重载的成员函数。我已经搜索了该错误，但没有找到解决方法。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T15:52:56.163

您需要声明单参数构造：

```
class Player {
public:
    Player(int y);
    std::string name;
    int level;
}; 
```

一旦你这样做，将不再有一个编译器合成的默认构造函数，所以如果你需要一个，你将不得不自己编写。如果`explicit`您不想从`int`.

```
class Player {
public:
    explicit Player(int y); // no implicit conversions from int
    Player() :name(), int() {} // default constructor and implementation
    std::string name;
    int level;
}; 
```

此外，如果可能的话，更喜欢构造函数初始化列表而不是在构造函数主体中分配值。关于这个主题有很多 SO 问题，所以我不会在这里详细说明。你会这样做：

```
Player::Player(int y) : level(y) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T15:52:46.103

在你的类中为这个构造函数添加声明。

```
class Player {
public:
    Player( int y );
    string name;
    int level;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:54:12.607

```
class Player 
{ 
public:
 Player(int );    
 string name;
 int level;
 }; 
```

# objective-c - iOS 5 中带有 UIPageControl 的网格视图？

> ID：11956157
> 
> 赞同：1
> 
> 时间：2012-08-14T15:51:31.900
> 
> 标签：objective-c, ios5, gridview, dynamic, uipagecontrol

我知道有很多适用于 iOS 和 Objective-c 的网格视图，但我找不到适合我的。目前我使用一个名为`UIGridView`. 它只包含两个文件，实现起来非常简单。但是，它的单元格不能超过它在屏幕上的容量。我想要一个动态网格视图，我可以在其中`UIPageControl`拥有多个带有单元格的页面。我喜欢，`UITableView`但是对于这个项目，使用网格视图会更有效。

我目前使用这个网格视图： http: [//www.chupamobile.com/products/details/380/Interactive+Grid+View/](http://www.chupamobile.com/products/details/380/Interactive+Grid+View/)

是否有带有页面控制的简单网格视图？或者我可以把我当前的网格视图放在一个`UIPageControl`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:09:41.353

您是否尝试`CHGridView`过[https://github.com/camh/CHGridView](https://github.com/camh/CHGridView)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:21:46.143

我选择了 MMGridView。它具有水平页面控制滚动。我只是根据自己的喜好修改了单元格。你可以在这里找到 git 源：[https ://github.com/provideal/MMGridView](https://github.com/provideal/MMGridView)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-24T07:44:43.217

我目前正在使用**`AQGridView`**，所以我推荐它，因为它是最少的错误，它的功能与`UITableView`.

此外，如果您尝试在没有**XIB**的情况下执行此操作，则处理它会有点困难，但您可以使用 Xib 文件创建视图控制器来创建您选择的界面。[这是有关如何以最佳方式完成此操作的](http://vimeo.com/46408155)视频 `Evadne Wu`。这是示例[项目](https://github.com/evadne/gridViewNibTest)

**现在对于** AQGridView 中的分页控件，您只需要设置分页启用，它会自动完成其余的工作。希望有帮助。

# php - 比较并仅返回数组中的匹配项

> ID：11956158
> 
> 赞同：1
> 
> 时间：2012-08-14T15:51:34.073
> 
> 标签：php, arrays

我正在寻找一种方法（在 PHP 中）使用两个不同的数组来获取匹配项的结果。数组是运动统计数据。一个数组包含统计数据的定义，另一个是 stat_id 和玩家的统计值。每个数组中的匹配项是 stat_id。我正在寻找仅在两个数组中匹配项的结果。

第一个数组包含统计定义。这是统计定义数组的一部分...

```
[stat] => Array
    (
        [0] => SimpleXMLElement Object
            (
                [stat_id] => 4
                [enabled] => 1
                [name] => Passing Yards
                [display_name] => Pass Yds
                [sort_order] => 1
                [position_type] => O
            )

        [1] => SimpleXMLElement Object
            (
                [stat_id] => 5
                [enabled] => 1
                [name] => Passing Touchdowns
                [display_name] => Pass TD
                [sort_order] => 1
                [position_type] => O
            )

        [2] => SimpleXMLElement Object
            (
                [stat_id] => 6
                [enabled] => 1
                [name] => Interceptions
                [display_name] => Int
                [sort_order] => 0
                [position_type] => O
            )

        [3] => SimpleXMLElement Object
            (
                [stat_id] => 9
                [enabled] => 1
                [name] => Rushing Yards
                [display_name] => Rush Yds
                [sort_order] => 1
                [position_type] => O
            )

        [4] => SimpleXMLElement Object
            (
                [stat_id] => 10
                [enabled] => 1
                [name] => Rushing Touchdowns
                [display_name] => Rush TD
                [sort_order] => 1
                [position_type] => O
            )

        [5] => SimpleXMLElement Object
            (
                [stat_id] => 12
                [enabled] => 1
                [name] => Reception Yards
                [display_name] => Rec Yds
                [sort_order] => 1
                [position_type] => O
            )

        [6] => SimpleXMLElement Object
            (
                [stat_id] => 13
                [enabled] => 1
                [name] => Reception Touchdowns
                [display_name] => Rec TD
                [sort_order] => 1
                [position_type] => O
            )

        [7] => SimpleXMLElement Object
            (
                [stat_id] => 15
                [enabled] => 1
                [name] => Return Touchdowns
                [display_name] => Ret TD
                [sort_order] => 1
                [position_type] => O
            )

        [8] => SimpleXMLElement Object
            (
                [stat_id] => 16
                [enabled] => 1
                [name] => 2-Point Conversions
                [display_name] => 2-PT
                [sort_order] => 1
                [position_type] => O
            )

        [9] => SimpleXMLElement Object
            (
                [stat_id] => 18
                [enabled] => 1
                [name] => Fumbles Lost
                [display_name] => Fum Lost
                [sort_order] => 0
                [position_type] => O
            )

        [10] => SimpleXMLElement Object
            (
                [stat_id] => 57
                [enabled] => 1
                [name] => Offensive Fumble Return TD
                [display_name] => Fum Ret TD
                [sort_order] => 1
                [position_type] => O
            )

        [11] => SimpleXMLElement Object
            (
                [stat_id] => 19
                [enabled] => 1
                [name] => Field Goals 0-19 Yards
                [display_name] => FG 0-19
                [sort_order] => 1
                [position_type] => K
            )

        [12] => SimpleXMLElement Object
            (
                [stat_id] => 20
                [enabled] => 1
                [name] => Field Goals 20-29 Yards
                [display_name] => FG 20-29
                [sort_order] => 1
                [position_type] => K
            )

    ) 
```

这是玩家统计值数组。

```
[stat] => Array
    (
        [0] => SimpleXMLElement Object
            (
                [stat_id] => 4
                [value] => 0
            )

        [1] => SimpleXMLElement Object
            (
                [stat_id] => 5
                [value] => 0
            )

        [2] => SimpleXMLElement Object
            (
                [stat_id] => 6
                [value] => 0
            )

        [3] => SimpleXMLElement Object
            (
                [stat_id] => 9
                [value] => 0
            )

        [4] => SimpleXMLElement Object
            (
                [stat_id] => 10
                [value] => 0
            )

        [5] => SimpleXMLElement Object
            (
                [stat_id] => 12
                [value] => 0
            )

        [6] => SimpleXMLElement Object
            (
                [stat_id] => 13
                [value] => 0
            )

        [7] => SimpleXMLElement Object
            (
                [stat_id] => 15
                [value] => 0
            )

        [8] => SimpleXMLElement Object
            (
                [stat_id] => 16
                [value] => 0
            )

        [9] => SimpleXMLElement Object
            (
                [stat_id] => 18
                [value] => 0
            )

        [10] => SimpleXMLElement Object
            (
                [stat_id] => 57
                [value] => 0
            )

    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:56:43.947

我认为您正在寻找 array_intersect 函数之一：

*   [http://www.php.net/manual/en/function.array-intersect.php](http://www.php.net/manual/en/function.array-intersect.php)
*   [http://www.php.net/manual/en/function.array-intersect-assoc.php](http://www.php.net/manual/en/function.array-intersect-assoc.php)
*   [http://www.php.net/manual/en/function.array-intersect-key.php](http://www.php.net/manual/en/function.array-intersect-key.php)

这些允许您比较数组并根据匹配值、匹配键或两者查找重叠。

# indexeddb - Linq 2 IndexedDB：如何检索最后插入的自动递增键？

> ID：11956161
> 
> 赞同：0
> 
> 时间：2012-08-14T15:51:39.210
> 
> 标签：indexeddb, winjs

我在我的 Windows8 应用程序中使用 IndexedDB（通过 Linq2IndexedDB 块）来处理本地存储。我需要检索插入到本地数据库中的最后一个自动递增的 ID（相当于 mysql_insert_id）。我该如何进行？

我检索我的记录：

```
db.linq.from("favoriteSearches").select().then(function(searches) {
    // ....
}); 
```

但我在*搜索*中没有找到关键的踪迹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:42:46.323

如果对象存储有 keyPath，则该对象将包含 key path 中定义的属性中的 key。

如果您没有定义数据库配置，linq2indexeddb 将在自动生成模式下运行。这意味着对象存储和索引会在您需要时创建。如果是这种情况并且对象存储是自动创建的，则对象存储的 keyPath 是“Id”，在返回数据中，您应该在“Id”属性中找到键值

编辑：如果您使用最新版本的 linq2indexedDB lib 1.0.13，您将在插入数据时返回密钥

```
db.linq.from("favoriteSearches").insert(data).then(function (args){ 
    var key = args.key;
    var data = args.data;
}) 
```

# java - 如何在 JAVA 中获得正确的 HTTP 响应？

> ID：11956163
> 
> 赞同：0
> 
> 时间：2012-08-14T15:51:49.327
> 
> 标签：java, sockets, httpresponse, urlconnection

我想在网页上获取一些数据，所以我使用 java 向服务器发送 http 请求

我已经尝试过 URLConnection 和 Jsoup，但它们都无法得到正确的响应

如果在浏览器浏览 url

[http://www.hkprinters.org/sc/member_search.asp?page=1&mode=view](http://www.hkprinters.org/en/member_search.asp?page=1&mode=view)

响应正确，得到搜索结果

但是使用java，我只能得到搜索，没有结果。

为什么响应不正确以及如何获得正确的响应？

```
import java.io.*;
import java.util.*;
import java.net.*;
import org.json.*;

class HttpRequest
{
    public static void main(String[] args) throws Exception
    {
        URL url = new URL("http://www.hkprinters.org/en/member_search.asp?page=1&mode=view");
        URLConnection conn = url.openConnection();
        conn.setDoOutput(true);
        OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        wr.flush();

        BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream("station.txt")));

        String line;
        while((line=rd.readLine())!=null)
        {
            out.write(line);
        }
        out.close();
    }

}

import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;
import org.jsoup.*;

public class read_line2 {

    public static void main(String args[]) {
        try {
            Document doc = Jsoup.connect("http://www.hkprinters.org/en/member_search.asp?page=1&mode=view").get();
            Document doc = Jsoup.parse(input, null);
            Elements newHeadlines = doc.select("*");
            System.out.println(newHeadlines);

        } catch (Exception e) {
        }
    }
} 
```

* * *

更新：

我想先解释正确和错误的结果。

正确的是搜索表单+搜索结果数据（如公司名称、地址、电话），我要这些数据。

不正确的是：

```
<title>db</title>
<title>func</title>
<!DOCTYPE HTML PUBLIC
........
<input type="hidden" name="hdnMode" value="search"/></form>
</table>
<font size="2"><br/> 
```

如果用浏览器查看，只能看到搜索表单，看不到结果。

新发现是：我现在可以使用浏览器得到不正确的结果。如果您关闭浏览器并再次打开，然后浏览[http://www.hkprinters.org/en/member_search.asp?page=1&mode=view](http://www.hkprinters.org/en/member_search.asp?page=1&mode=view)

那么你会得到不正确的结果，这个结果和 JAVA 的结果完全一样

```
<title>db</title>
<title>func</title>
<!DOCTYPE HTML PUBLIC
........
<input type="hidden" name="hdnMode" value="search"/></form>
</table>
<font size="2"><br/> 
```

现在，如果您可以点击提交（无需输入任何内容），那么搜索结果将再次显示，现在即使您只浏览[http://www.hkprinters.org/en/member_search.asp?page=1&mode=view](http://www.hkprinters.org/en/member_search.asp?page=1&mode=view) ( get 方法），搜索结果仍然显示。

所以我猜这个页面在我第一次点击提交按钮时会将帖子数据保存到会话中，之后，每次我浏览这个页面时，它都会从会话中找到搜索键，所以即使我使用 get 方法发送页面和模式，它仍然给我搜索结果。

但我不知道如何使用 JAVA 实现相同的会话，有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:18:30.397

如果您没有在请求中发送任何内容，请评论以下几行：

```
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.flush(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:04:59.200

尝试使用 java.net.HttpURLConnection 而不是 URLConnection。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:59:28.917

我建议使用[Apache http 客户端。](http://hc.apache.org/httpclient-3.x/)
您将更好地控制正在使用的 HTTP 方法（GET、PUT 等...）
此 HTTP 客户端被广泛使用。
您将拥有更好的 API 来处理响应（当然可以使用 URLConnection，但是这个框架简化了事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T16:41:05.553

我检查了提供的 URL 的源代码。它在 HTML 标记中有一些错误。这可能是在某些浏览器中未提交表单的原因。这取决于您的浏览器对不良标记的宽容程度。例如，元素定义在 /tr 和 tr 元素之间，这意味着在表中：

```
...
</tr>
<form action="member_search.asp" method="post" name="frmSearch" 
    onSubmit="return checkSearchForm();">
<tr class="copy"> 
... 
```

我还可以看到用于提交的方法是 POST，但我在您的代码中没有看到任何设置来提供搜索表单中显示的搜索参数。

我的建议是，您尝试检查您的客户对不同页面的请求，您可以证明该页面生成良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T11:11:46.890

在你写完之后调用 HttpURLConnection.getResponseCode()，如果你需要写任何东西，这看起来很可疑，但是在你读任何东西之前，如果你真的需要读任何东西，这也可能是可疑的。如果你只是做 I/O，你会受到一些 HTTP 状态码被映射到 IOExceptions 的摆布。

# wpf - 安装VS2012RC后参考错误

> ID：11956164
> 
> 赞同：0
> 
> 时间：2012-08-14T15:51:51.520
> 
> 标签：wpf, visual-studio-2010, visual-studio-2012, assembly-resolution, csc

我们使用 dmake 构建机器，使用 VS2010 进行本地构建。一切正常，然后我安装了 VS2012 RC（终极版）。

它在 Visual Studio 中构建正常，尽管我收到了一堆这样的警告：

```
There was a mismatch between the processor architecture of the project being built "MSIL" 
and the processor architecture of the reference "MyAssembly, Version=1.0.0.0, Culture=neutral, processorArchitecture=x86", "x86". 
This mismatch may cause runtime failures. 
Please consider changing the targeted processor architecture of your project through the Configuration Manager so as to align the processor architectures between your project and references, 
or take a dependency on references with a processor architecture that matches the targeted processor architecture of your project. 
```

但是，dmake 会抛出一堆错误消息，它们看起来都是这样的：

```
SomeFile.cs(172,16): error CS0433: The type 'System.Windows.Input.ICommand' exists in both
 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\System.dll' and
 'd:\SomeLocalDirectory\external\microsoft.net\framework\v4.0\PresentationCore.dll'
Windows\Microsoft.NET\Framework\v4.0.30319\System.dll: (Location of symbol related to previous error)
d:\SomeLocalDirectory\external\microsoft.net\framework\v4.0\PresentationCore.dll: (Location of symbol related to previous error) 
```

从错误消息中，您可以看出我们使用的是.NET 的签入版本（因此我们有一个稳定的测试环境），并且似乎安装了 VS2012 导致了 VS2010（或至少 CSC VS2010 附带的）来查找 WPF 程序集的其他副本。

还有其他人遇到这个吗？我知道有几种方法可以开始解决这个问题，但我希望有一种更直接的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:23:57.007

我建议从控制面板中的程序和功能**修复Visual Studio 2010 安装。**

# ruby - Is it possible to combine with_options and :if for conditional validations?

> ID：11956168
> 
> 赞同：4
> 
> 时间：2012-08-14T15:52:07.927
> 
> 标签：ruby, validation, activerecord

I'm trying to use with_options to group my conditional validations together for admin users. The second validation for username uniqueness ends up overriding the with_options condition.

Is there a better way to do this? Or should I just forget about with_options and write two separate statements?

```
with_options :if => Proc.new { |user| user.admin? } do |admin|
  admin.validates :email, :presence => true
  admin.validates :username, :uniqueness => true, :if => Proc.new { |user| user.category == "customized_username" }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:18:12.020

如果您只有这两个验证，我认为删除 with_options 块并将条件直接添加到每个验证并不是一个坏主意：

```
admin.validates :email, :presence => true, :if => Proc.new { |user| user.admin? }
admin.validates :username, :uniqueness => true, :if => Proc.new { |user| user.admin? && user.category == "customized_username" } 
```

您可能要考虑的另一件事是单表继承 (STI)，而不是使用布尔字段。如果您发现自己在`user.admin?`整个应用程序中都在做，我会推荐这个。使用 STI，您将拥有普通用户和管理员用户，并且每个用户都可以为每个类包含不同的逻辑。您需要进行的唯一真正更改是将“admin”字段更改为“type”并将其设为字符串：

```
class User < ActiveRecord::Base
end

class AdminUser < User
  validates :email, :presence => true
  validates :username, :uniqueness => true, :if => Proc.new { |user| user.category == "customized_username" }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T01:01:18.533

您应该使用两行代码，但是，有方法比在 Proc 中重复相同的逻辑更简洁。

```
validates :email, :presence => true, :if => :admin?
validates :username, :uniqueness => true, :if => [:admin?, :custom_user?]

def custom_user?
   category == "customized_username"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-15T14:05:00.213

改为使用`unless`：

```
with_options :unless => Proc.new { |user| !user.admin? } do |admin|
  admin.validates :email, :presence => true
  admin.validates :username, :uniqueness => true, :if => Proc.new { |user| user.category == "customized_username" }
end 
```

# java - setTitle(string) - 黑莓

> ID：11956170
> 
> 赞同：1
> 
> 时间：2012-08-14T15:52:11.013
> 
> 标签：java, blackberry

我有一个间接继承自的类`MainScreen`，并且`setTitle(string)`不工作。以下是我的层次结构：

```
public class Class1 extends MainScreen { 
    super( MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLLBAR );
     ... 
} 
public class Class2 extends Class1 { 
    setTitle("Hello World"); 
     ...
} 
```

我也试过了`super.setTitle(string)`。

它编译正确，但屏幕上不显示标题。

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:44:19.683

评论转换为答案：

我不记得这种方法有任何问题，而且很简单。很可能你打电话给`setTitle`其他地方。请搜索您的代码。

# sql - calendar month dates in horizontal line and show data in group by format

> ID：11956171
> 
> 赞同：0
> 
> 时间：2012-08-14T15:52:16.553
> 
> 标签：sql, oracle

I am trying to show oracle data in following format (need to produce in form of report- may be crystal report);

![enter image description here](../Images/179b825634a7250b483b857d58689da6.png)

Table has following fields:

![enter image description here](../Images/56700b55c0d027b273921020692393ea.png)

I am able to produce following results so far:

![enter image description here](../Images/d779c640a535cbf69a7b85fc17e1514c.png)

Query:

```
SELECT to_date('01/01/1999','dd/mm/yyyy') LOGDATE,
    to_date('01/01/1999','dd/mm/yyyy') MONTH ,
    ''EMPCODE,
    to_number('0') PROJECTCODE , 
    ''ACTIVITY,
    to_number('0')TOTALTIME, 
    ''ENTEREDBY, 
    ''PROJECTDESC, 
    ''SUB_SUBACT_SHORT_DESC,
    B.* 
FROM
(
    select '1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31' 
    from dual
    UNION ALL
    select to_char(TO_DATE(:MONTH,'DD/MM/YYYY'),'DY'),
        to_char(TO_DATE(:MONTH ,'DD/MM/YYYY') + 1,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+2,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+3,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+4,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+5,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+6,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+7,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+8,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+9,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+10,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+11,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+12,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+13,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+14,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+15,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+16,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+17,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+18,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+19,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+20,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+21,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+22,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+23,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+24,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+25,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+26,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+27,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+28,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+29,'DY'),
        to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+30,'DY')
    from dual

) B
UNION ALL
SELECT LOGDATE,TRUNC(LOGDATE,'MM') as period,
    EMPCODE,
    PROJECTCODE,ACTIVITYCODE || '.' || SUBACTIVITY_CODE || '.' || SUB_SUBACTIVITY_CODE AS ACTIVITY,
    TOTALTIME ,ENTEREDBY, 
    PROJECTDESC,
    SUB_SUBACT_SHORT_DESC,
    CASE WHEN to_char(logdate,'dd') = '01' THEN to_char(TOTALTIME) END d1,
    CASE WHEN to_char(logdate,'dd') = '02' THEN to_char(TOTALTIME) END d2,
    CASE WHEN to_char(logdate,'dd') = '03' THEN to_char(TOTALTIME) END d3,
    CASE WHEN to_char(logdate,'dd') = '04' THEN TO_CHAR(TOTALTIME) END d4,
    CASE WHEN to_char(logdate,'dd') = '05' THEN TO_CHAR(TOTALTIME) END d5,
    CASE WHEN to_char(logdate,'dd') = '06' THEN TO_CHAR(TOTALTIME) END d6,
    CASE WHEN to_char(logdate,'dd') = '07' THEN TO_CHAR(TOTALTIME) END d7,
    CASE WHEN to_char(logdate,'dd') = '08' THEN TO_CHAR(TOTALTIME) END d8,
    CASE WHEN to_char(logdate,'dd') = '09' THEN TO_CHAR(TOTALTIME) END d9,
    CASE WHEN to_char(logdate,'dd') = '10' THEN TO_CHAR(TOTALTIME) END d10,
    CASE WHEN to_char(logdate,'dd') = '11' THEN TO_CHAR(TOTALTIME) END d11,
    CASE WHEN to_char(logdate,'dd') = '12' THEN TO_CHAR(TOTALTIME) END d12,
    CASE WHEN to_char(logdate,'dd') = '13' THEN TO_CHAR(TOTALTIME) END d13,
    CASE WHEN to_char(logdate,'dd') = '14' THEN TO_CHAR(TOTALTIME) END d14,
    CASE WHEN to_char(logdate,'dd') = '15' THEN TO_CHAR(TOTALTIME) END d15,
    CASE WHEN to_char(logdate,'dd') = '16' THEN TO_CHAR(TOTALTIME) END d16,
    CASE WHEN to_char(logdate,'dd') = '17' THEN TO_CHAR(TOTALTIME) END d17,
    CASE WHEN to_char(logdate,'dd') = '18' THEN TO_CHAR(TOTALTIME) END d18,
    CASE WHEN to_char(logdate,'dd') = '19' THEN TO_CHAR(TOTALTIME) END d19,
    CASE WHEN to_char(logdate,'dd') = '20' THEN TO_CHAR(TOTALTIME) END d20,
    CASE WHEN to_char(logdate,'dd') = '21' THEN TO_CHAR(TOTALTIME) END d21,
    CASE WHEN to_char(logdate,'dd') = '22' THEN TO_CHAR(TOTALTIME) END d22,
    CASE WHEN to_char(logdate,'dd') = '23' THEN TO_CHAR(TOTALTIME) END d23,
    CASE WHEN to_char(logdate,'dd') = '24' THEN TO_CHAR(TOTALTIME) END d24,
    CASE WHEN to_char(logdate,'dd') = '25' THEN TO_CHAR(TOTALTIME) END d25,
    CASE WHEN to_char(logdate,'dd') = '26' THEN TO_CHAR(TOTALTIME) END d26,
    CASE WHEN to_char(logdate,'dd') = '27' THEN TO_CHAR(TOTALTIME) END d27,
    CASE WHEN to_char(logdate,'dd') = '28' THEN TO_CHAR(TOTALTIME) END d28,
    CASE WHEN to_char(logdate,'dd') = '29' THEN TO_CHAR(TOTALTIME) END d29,
    CASE WHEN to_char(logdate,'dd') = '30' THEN TO_CHAR(TOTALTIME) END d30,
    CASE WHEN to_char(logdate,'dd') = '31' THEN TO_CHAR(TOTALTIME) END d31
FROM TIMESHEET
WHERE PROJECTCODE = 2274
    AND LOGDATE >= TO_DATE('01/08/2011','dd/mm/yyyy')
    AND LOGDATE <= TO_DATE('31/08/2011','dd/mm/yyyy')
    AND TOTALTIME>0 
```

**>Is this possible to group the results by Activity?** So 'pojectx' will be activity 1.11.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:54:43.347

像这样的东西应该可以解决问题。除了 Oracle 不稳定的日期函数之外，它是非常标准的 SQL，应该适用于大多数现代 SQL 实现（只要它们支持子查询作为`from`子句中的虚拟表）：

```
select p.name as project_name  ,
       a.name as activity_name ,
       t.*
from ( select extract(year,t.year)   as year        ,
              extract(month,t.month) as month       ,
              t.project              as project_id  ,
              t.activity             as activity_id ,
              sum( case extract(day,t.month) when  1 then t.time     end ) as time_01        , -- summarize time by each day of the month 
              sum( case extract(day,t.month) when  2 then t.time     end ) as time_02        , -- days with no data will have NULL
              sum( case extract(day,t.month) when  3 then t.time     end ) as time_03        , --   |
              ...                                                                              --   |
              sum( case extract(day,t.month) when 28 then t.time     end ) as time_28        , --   |
              sum( case extract(day,t.month) when 29 then t.time     end ) as time_29        , --   |
              sum( case extract(day,t.month) when 30 then t.time     end ) as time_30        , --   |
              sum( case extract(day,t.month) when 31 then t.time     end ) as time_31        , --   >
              sum( t.activity                                            ) as total_activity ,
              sum( t.time                                                ) as total_time     ,
       from some_table t
       where extract(year,t.month) = 2012
       group by extract(year  , t.month ) ,
                extract(month , t.month ) ,
                t.project ,
                t.activity
     ) summary
join project  p on p.project_id  = summary.project_id
join activity a on a.activity_id = summary.activity_id
order by t.year  ,
         t.month ,
         p.name  ,
         a.name 
```

这涵盖了所有年份、所有月份、所有项目和所有活动：在`where`虚拟表的子句中添加适当的条件以过滤源数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:26:34.923

在做了一些研究并在此链接上的旧帖子的一些指导下，我得到了我正在寻找的结果。

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:124812348063](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:124812348063)

**询问：**

选择'日期'活动，'1'，'2'，'3'，'4'，'5'，'6'，'7'，'8'，'9'，'10'，'11'， '12','13','14','15','16','17','18','19','20','21','22','23','24 ','25','26','27','28','29','30','31' , 0 总计

从双

联合所有

选择'DAYS'活动，to_char（TO_DATE（：MONTH，'DD/MM/YYYY'），'DY'），to_char（TO_DATE（：MONTH，'DD/MM/YYYY'）+ 1，'DY'）， to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+2,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+3,'DY'), to_char(TO_DATE( :MONTH,'DD/MM/YYYY')+4,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+5,'DY'), to_char(TO_DATE(:MONTH,' DD/MM/YYYY')+6,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+7,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/ YYYY')+8,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+9,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+ 10,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+11,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+12,'DY '), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+13,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+14,'DY'), to_char(TO_DATE(:MONTH,'DD /MM/YYYY')+15,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+16,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY ')+17,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+18,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+19 ,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+20,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+21,'DY' ), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+22,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+23,'DY'), to_char( TO_DATE(:MONTH,'DD/MM/YYYY')+24,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+25,'DY'), to_char(TO_DATE(:MONTH ,'DD/MM/YYYY')+26,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+27,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+28,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+29,'DY'), to_char(TO_DATE(:MONTH,'DD/MM/YYYY')+30,'DY'),

0 总计

从双

联合所有

选择活动，

MAX（解码（DT，'01'，HRS，NULL））c1，MAX（解码（DT，'02'，HRS，NULL））c2，MAX（解码（DT，'03'，HRS，NULL））c3 ，MAX（解码（DT，'04'，HRS，NULL））c4，MAX（解码（DT，'05'，HRS，NULL））c5，MAX（解码（DT，'06'，HRS，NULL）） c6，MAX（解码（DT，'07'，HRS，NULL））c7，MAX（解码（DT，'08'，HRS，NULL））c8，MAX（解码（DT，'09'，HRS，NULL） ）c9，MAX（解码（DT，'10'，HRS，NULL））c10，MAX（解码（DT，'11'，HRS，NULL））c11，MAX（解码（DT，'12'，HRS，NULL） ））c12，MAX（解码（DT，'13'，HRS，NULL））c13，MAX（解码（DT，'14'，HRS，NULL））c14，MAX（解码（DT，'15'，HRS， NULL））c15，MAX（解码（DT，'16'，HRS，NULL））c16，MAX（解码（DT，'17'，HRS，NULL））c17，MAX（解码（DT，'18'，HRS , NULL)) c18, MAX(解码 (DT, '19'，HRS，NULL））c19，MAX（解码（DT，'20'，HRS，NULL））c20，MAX（解码（DT，'21'，HRS，NULL））c21，MAX（解码（DT， '22'，HRS，NULL））c22，MAX（解码（DT，'23'，HRS，NULL））c23，MAX（解码（DT，'24'，HRS，NULL））c24，MAX（解码（DT , '25', HRS, NULL)) c25, MAX(DECODE (DT, '26', HRS, NULL)) c26, MAX(DECODE (DT, '27', HRS, NULL)) c27, MAX(DECODE ( DT，'28'，HRS，NULL））c28，MAX（解码（DT，'29'，HRS，NULL））c29，MAX（解码（DT，'30'，HRS，NULL））c30，MAX（解码(DT, '31', HRS, NULL)) c31,MAX（解码（DT，'25'，HRS，NULL））c25，MAX（解码（DT，'26'，HRS，NULL））c26，MAX（解码（DT，'27'，HRS，NULL））c27 ，MAX（解码（DT，'28'，HRS，NULL））c28，MAX（解码（DT，'29'，HRS，NULL））c29，MAX（解码（DT，'30'，HRS，NULL）） c30，MAX（解码（DT，'31'，HRS，NULL））c31，MAX（解码（DT，'25'，HRS，NULL））c25，MAX（解码（DT，'26'，HRS，NULL））c26，MAX（解码（DT，'27'，HRS，NULL））c27 ，MAX（解码（DT，'28'，HRS，NULL））c28，MAX（解码（DT，'29'，HRS，NULL））c29，MAX（解码（DT，'30'，HRS，NULL）） c30，MAX（解码（DT，'31'，HRS，NULL））c31，

nvl(sum(hrs),0) 总计

从

(

SELECT * FROM ( SELECT to_char(LOGDATE,'dd') as DT,TO_CHAR(TOTALTIME) AS HRS, ACTIVITYCODE || '.' || SUBACTIVITY_CODE || '.' || SUB_SUBACTIVITY_CODE 作为活动

从工作表中 PROJECTCODE = 2274 AND LOGDATE >= TO_DATE('01/08/2011','dd/mm/yyyy') AND LOGDATE <= TO_DATE('31/08/2011','dd/mm/yyyy')和总时间> 0）按活动分组，DT，HRS

)

按活动分组

**结果：**

![在此处输入图像描述](../Images/e2d9488ea6a8312dfe19cfc63cc7eb0f.png)

# java - Running ffmpeg from java with lowpriority

> ID：11956172
> 
> 赞同：0
> 
> 时间：2012-08-14T15:52:18.167
> 
> 标签：java, ffmpeg

I am trying to convert a flv file to mp3 using ffmpeg from java.

I am running the following command

cmd.exe /C start /BELOWNORMAL /WAIT /B /ffmpeg -i "C:\Documents and Settings\user\My Documents\Bob Dylan - Spanish Harlem Incident(LD).flv" "C:\Documents and Settings\user\My Documents\Bob Dylan - Spanish Harlem Incident(LD).mp3"

I am getting this error "The system cannot find the file and."

I am using the following code to execute commands [http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=4](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=4)

When i run it outside of java, from cmd console i have no problems

Any ideas would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:13:51.957

您是否正确转义了特殊字符？如果您只是将它作为字符串粘贴到代码中，它应该是这样的：

```
String command = "cmd.exe /C start /BELOWNORMAL /WAIT /B /ffmpeg -i \"C:\\Documents and Settings\\user\\My Documents\\Bob Dylan - Spanish Harlem Incident(LD).flv\""; 
```

如果您是，但它仍然无法正常工作，我建议您将命令分开，如下所示：

```
Runtime.getRuntime().exec(new String[] {"cmd.exe", "/C", "start", "BELOWNORMAL", "/WAIT", "/B", "ffmepg", "-i", "C:\\Documents and Settings\user\\My Documents\\Bob Dylan - Spanish Harlem Incident(LD).flv"}); 
```

这将消除引用文件名的需要。

或者，为了增加可读性并排除文件系统的问题，您可以使用 File 类来包装位置，因此：

```
 File f = new File("C:\\Documents and Settings\\user\\My Documents\\Bob Dylan - Spanish Harlem Incident(LD).flv");
    Runtime.getRuntime().exec(new String[] {"cmd.exe", "/C", "start", "BELOWNORMAL", "/WAIT", "/B", "ffmepg", "-i", f.getAbsolutePath()}); 
```

# php - 是否有任何 php 函数用字符串值填充数组？

> ID：11956173
> 
> 赞同：3
> 
> 时间：2012-08-14T15:52:19.123
> 
> 标签：php, arrays

我的代码：

```
$a = array_fill(5, 6, 'banana'); 
```

印刷

```
Array
(
    [5]  => banana
    [6]  => banana
    [7]  => banana
    [8]  => banana
    [9]  => banana
    [10] => banana
) 
```

但我想要它像下面

```
Array
(
    [5]  => banana 1
    [6]  => banana 2
    [7]  => banana 3
    [8]  => banana 4
    [9]  => banana 5
    [10] => banana 6
) 
```

上面还有其他的php函数可以实现吗？如果是，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:56:35.023

不是开箱即用，但您可以自己轻松编写：

```
<?php
function custom_array_fill($start_index, $num, $value) {
    $result = array();
    for($i = 1; $i < $num + 1; $i++) {
        $result[$start_index + $i - 1] = $value . " " . $i;
    }
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:07:53.630

```
function test_print_value($item2, $key, $some_value)
{
    echo $some_value." $item2<br />\n";
}

array_walk(range(0,10), 'test_print_value', 'Banana Apple '); 
```

输出：

```
Banana Apple 0
Banana Apple 1
Banana Apple 2
Banana Apple 3
Banana Apple 4
Banana Apple 5
Banana Apple 6
Banana Apple 7
Banana Apple 8
Banana Apple 9
Banana Apple 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:58:37.237

也许你可以使用 array_walk 函数？

```
$a = array_fill(5, 6, 'banana');
array_walk($a, function(&$item, $key) {
    $item = sprintf('%s %d', $item, ($key-4));//subtract 4 from key to get 'banana 1'
}); 
```

只是不要忘记传递*$item*作为参考（使用*&*字符）。否则，您将不会修改您的阵列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T15:58:10.837

```
function myFillArray($index,$size,$value){
    $array = array();
    for($i = 0; $i < $size; $i++){
        $array[$index + $i] = $value." ".$i;        
    }
    return $array;
} 
```

# android - Can I develop android applications using Eclipse IDE for Java EE?

> ID：11956176
> 
> 赞同：4
> 
> 时间：2012-08-14T15:52:40.437
> 
> 标签：android, eclipse, android-2.2-froyo

I have downloaded Eclipse Helios for Java EE on my Mac. Now I want to develop an Android application. Can I use the same IDE for developing that android application?

I am using Eclipse IDE for Java EE to create webservices for applications. Also, now I got requirement to develop Android applications. Thats why, I want to use same IDE for both. Is that possible?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:57:45.670

是的，您只需要从这里获取 Android SDK：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)然后您需要通过帮助 > 安装新软件并输入链接来获取 Eclipse 插件：[https](https://dl-ssl.google.com/android/eclipse/) ://dl-ssl.google.com/android/eclipse/ 。这将为您提供所需的插件。

所有这些都可以在这里找到：http: [//developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T15:58:01.933

最新的 Android SDK 与最新版本的 Eclipse 一起工作（几个月前你会遇到问题，尤其是在 Linux 中）。

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html) 这真的很翔实。你也可以找到任何你想开始开发的东西。玩得开心

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:54:00.283

You should be able to. Just make sure you download the Android SDK and ADT.

# php - Remember me plugin is not working on Joomla2.5

> ID：11956186
> 
> 赞同：0
> 
> 时间：2012-08-14T15:53:21.963
> 
> 标签：php, joomla2.5

anybody please help me. Actually I am using Joomla2.5\. In this I have used Remember Me Plugin. But the Remember Me functionality is not working. Actually what is the requirement means If the particular user click the Remember Me check box, after log out immediately if he want to login again means the username and password should be appear automatically. Please help me anybody...

srinivas.p joomla learner.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:13:54.163

在这种情况下，问题是我的 php.ini 中的 session.cookie_lifetime 值

php.ini 不是 Joomla 文件系统的一部分。许多主机不允许操作此文件。但是有一个解决方法。

我怎么说你不能经常改变 php.ini 中的值，尤其是通过廉价的托管包。但是您可以更改本地的值。

首先，您需要将文件上传到您的 joomlaroot 目录

调用文件 phpinfo.php

在此文件中，您编写以下行：

```
Code:

<?php phpinfo(); ?> 
```

该文件将帮助您查看您的 session.cookie_lifetime 值是如何设置的。

然后你打开你的网站

youresite.com/phpinfo.php

然后将打开一个列表。比你看的条目：session.cookie_lifetime

如果这两个值都为 0，那么您就有答案了，为什么您记得不工作。

下一步你再次进入你的文件 phpinfo.php 并添加一些代码。之后它看起来像这样：

```
Code:

<?php ini_set('session.cookie_lifetime', 536*60*60); phpinfo(); ?> 
```

你已经添加了比这部分：

```
Quote:

ini_set('session.cookie_lifetime', 536*60*60); 
```

这个新零件你将需要在另一个地方。您将在 index.php 中需要它

他们将在下面直接添加：

代码：

536 停留数小时。因此，536 小时的 cookie 将持续 1 个月。如果您想在两个文件中或多或少地更改它或保留它。但不要更改其他值。它的安全风险比。

我希望它对你有所帮助。我在那个解决方案之后很久搜索

# ajax - 如何ajaxify Zend_Form 验证

> ID：11956188
> 
> 赞同：1
> 
> 时间：2012-08-14T15:53:31.150
> 
> 标签：ajax, json, zend-framework, zend-form

我有一个 Zend_Form 子类。一些元素被设置为属于数组。

```
class My_Form extends Zend_Form {
   public function __construct() {
       $elem = $this->createElement('text','PROJECT_NAME',                
           array(
              'required' => true
       ));
       $elem->setBelongsTo('project');
       $this->addElement($elem);

       $elem = $this->createElement(
                'text','PLANNED_END_DATE',
                array(
                    'required' => true
                )
        );
        $elem->setBelongsTo('project');
        $elem->addValidator(new Zend_Validate_Date(array('format'=>'yyyy-MM-dd')));        
        $this->addElement($elem);     
        //and so on
   }

} 
```

我有一个通用验证控制器，它确实创建表单并检查错误，并以 json 格式返回它们：

```
class ValidateController extends Zend_Controller_Action
{

    public function formAction()
    {
         $params = $this->_getAllParams();
         if (isset($params['_frm'])) {
            $formName   = detect_the_form_class($params['_frm']);
            if (class_exists($formName)) {
                $form = new $formName();
                if ($form instanceof Zend_Form) {
                    $result = $form->isValidPartial($params);

                    $messages = $form->getMessages();

                    $this->getResponse()
                            ->setHeader('Content-Type', 'application/json')
                            ->setBody(json_encode(array(
                                'result' => $result,
                                'messages' => $messages
                            )));
                } else {
                    $this->getResponse()->setHttpResponseCode(500);
                }
            }

         }    
    }
} 
```

这个控制器非常适用于非数组表单，但我现在需要验证 hase 数组的表单，例如名称为“project[PROJECT_NAME]”的元素。

但是 $form->getMessages() 返回以元素的基本名称为索引的消息，没有数组前缀。

实际结果是：

```
{ result: false,
  messages: {
     PROJECT_NAME: {isEmpty: "Value is required"},
     PROJECT_END_DATE: {isEmpty: "Value is required"}
  }
} 
```

我需要的结果是：

```
{ result: false,
  messages: {
     "project[PROJECT_NAME]": {isEmpty: "Value is required"},
     "project[PROJECT_END_DATE]": {isEmpty: "Value is required"}
  }
} 
```

或类似的东西，所以我可以找到验证消息的元素。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:11:22.657

对于子表单使用`Zend_Form_Subform`类：

```
class My_Form extends Zend_Form
{

    public function init()
    {
        $subForm = new Zend_Form_SubForm();

        $elem = $this->createElement('text', 'PROJECT_NAME', array(
            'required' => true
            ));
        $subForm->addElement($elem);

        $elem = $this->createElement('text', 'PLANNED_END_DATE', array(
            'required' => true
            ));

        $subForm->addElement($elem);
        $this->addSubForm($subForm, 'project');
    }
} 
```

回复：

```
{
    "project":{
        "PROJECT_NAME":{"isEmpty":"Value is required and can't be empty"},
        "PLANNED_END_DATE":{"isEmpty":"Value is required and can't be empty"}
    }
} 
```

1.  对于表单配置，建议使用`init()`方法。

2.  对于 json 响应，您可以使用内置操作助手： `$this->_helper->json($form->getMessages());`

# java - Hibernate：插入具有相同 ID 的已删除行

> ID：11956199
> 
> 赞同：0
> 
> 时间：2012-08-14T15:54:07.210
> 
> 标签：java, hibernate

**我的用例：**

1.  我的 Hibernate 配置使用自动增量生成器进行插入，我不想更改它。
2.  一个用户删除了一个 ID:10 的对象，我把这个删除的对象保存到了某个地方。
3.  稍后，用户决定用相同的 ID:10 恢复这个已删除的对象。
4.  由于这个 ID:10 的对象已从数据库中删除，我如何使用 Hibernate 将其插入回数据库，同时使用自动增量生成器进行休眠配置（请记住：我需要在数据库中为该对象保留相同的 ID）？

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:00:48.633

如果您不更改生成器，我怀疑 Hibernate 会让您这样做。插入它然后使用直接 SQL 更新它并使任何休眠缓存无效怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:55:59.693

我怀疑 Hibernate 不会允许你这样做。但是，您可以编写 sql 查询来更新表 [如果您使用过表生成器] 来更改可以使用的当前索引位置，但这将是复杂的逻辑，因为您将始终必须跟踪哪个索引记录不是展示

# nginx - Rewrite dynamic Magento URL

> ID：11956200
> 
> 赞同：0
> 
> 时间：2012-08-14T15:54:07.877
> 
> 标签：nginx, magento-1.4

I have a Magento v1.4.1.1 installation on Nginx web server. I'm trying to rewrite the following dynamic URL:

```
#5028 is the dynamic id passed in the URL
$baseUrl/design/index/index/design_id/5028 
```

To:

```
$baseUrl/my/design/5028 
```

I have used the Magento's "URL Rewrite Management" to rewrite static URLs, without a problem. But it seems I cannot use dynamic parameters.

I've also tried to do the following on Nginx configuration inside my `server{}` location

```
rewrite ^/my/designs/([0-9]+)$ /design/index/index/design_id/$1 last; 
```

But it's not getting catch, I keep getting 404 errors if I try to access `http://mysite.com/my/design/5028`

Another rule right next to this one works perfectly

```
rewrite ^(/fb)/design/([0-9]+)$ $1/landing_no_contest.php?design_id=$2? last; 
```

Thanks for any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:45:05.610

Yes, Magento's "URL Rewrite Managment" does *not* support dynamic links, afaik.

You could programmatically add static rewrites per `design_id` to it, though:

```
$iStoreId = 1;
$sOptions = 'RP'; // 'RP' for a 301, or 'R' for a 302
$aDesignId = array(5026, 5027, 5028);

foreach ($aDesignId as $iDesignId) {
    Mage::getModel('core/url_rewrite')
        ->setStoreId($iStoreId)
        ->setCategoryId(null)
        ->setProductId(null)
        ->setIdPath(str_replace('0.', '', str_replace(' ', '_', microtime())))
        ->setRequestPath('design/index/index/design_id/' . $iDesignId)
        ->setTargetPath('my/design/' . $iDesignId)
        ->setIsSystem(0)
        ->setOptions($sOptions)
        ->save();
} 
```

# jquery - Transparent PNG Fix for IE8

> ID：11956202
> 
> 赞同：3
> 
> 时间：2012-08-14T15:54:26.770
> 
> 标签：jquery, internet-explorer-8, png, transparent

I have black text over a transparent area and in ie8 it has funky fuzzy black outlines around the text. Is there a way to get rid of this? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:40:50.633

我假设透明图层，您的意思是具有不透明度设置的图层？

你试了一下这个解决方案？ [IE8 中的 PNG 透明度问题](https://stackoverflow.com/questions/1251416/png-transparency-problems-in-ie8)

去这里：[http ://css3please.com/](http://css3please.com/)

并使用 .box_rgba 规则生成不透明度，而不是常规的 'filter: alpha(opacity=50);' 方法。

# mysql - MySQL, multi column indexes

> ID：11956203
> 
> 赞同：0
> 
> 时间：2012-08-14T15:54:43.450
> 
> 标签：mysql, indexing

I have two MySQL queries which I use to help me arrange news on my website. All the fields here indicated are numeric (int or tinyint) and all have an index on them. Can somebody help me build the multi column indexes which will speed up the two queries please?

```
SELECT MAX(content_time) AS content_time 
  FROM cm_data 
 WHERE content_time < UNIX_TIMESTAMP() 
   AND page = '1' 
   AND (content_type = '1' OR content_type = '5')

SELECT content_id 
  FROM cm_data
 WHERE (content_time < UNIX_TIMESTAMP() 
       OR (hp_time >= UNIX_TIMESTAMP() AND content_time < UNIX_TIMESTAMP()
          )
       )
   AND page = '1' 
   AND (content_type = '1' OR content_type = '5')
 ORDER BY hp_time DESC
     , content_time DESC
 LIMIT 20 
```

And here is the DB schema:

```
CREATE TABLE IF NOT EXISTS `cm_data` (
  `content_id` mediumint(8) NOT NULL AUTO_INCREMENT,
  `content_time` int(11) DEFAULT NULL,
  `hp_time` int(11) NOT NULL DEFAULT '0',
  `content_type` tinyint(2) DEFAULT NULL,
  `page` tinyint(2) NOT NULL DEFAULT '1',
  PRIMARY KEY (`content_id`),
  KEY `content_time` (`content_time`),
  KEY `content_type` (`content_type`),
  KEY `page` (`page`),
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:08:31.233

索引并不总是答案（尤其是在`INSERT`需要许多语句的情况下）。话虽如此，您可以做几件事来优化这些查询：

1）确保您的约束正确形成。在第二个查询中，您基本上有`Case1 OR ( Case2 AND Case1 )`，可以将其简化为`Case1`（布尔代数）。*确保在查询优化器查看之前*尽可能减少这些问题，不仅可以减少优化器所需的工作量，还可以捕获它无法解决的情况。

2）检查约束的顺序。由于它没有在文档中的任何地方说明查询优化器将以任何特定顺序检查非唯一键的约束，因此可以使用一点优化知识来潜在地加速查询。一般来说，非整数约束的评估成本很高（字符串等）。在您的情况下， UNIX_TIMESTAMP() 返回一个 UNSIGNED INT，而该字段被指定为一个 INTEGER。这将导致对每一行进行强制转换操作，这将是昂贵的。因此，如果您可以减少必须进行比较的次数（通过首先过滤出具有更简单约束的行），则必须执行更少的操作，从而缩短执行时间。

2a) MySQL 不支持函数索引，因此您可以将字段的数据类型更改为 UNSIGNED INT（如果可用，则首选），或者创建一个附加列，该列使用包含该字段的 UNSIGNED INT 等效项的触发器进行更新, 并将其编入索引。后者并不理想，但可以以增加表大小为代价提供一些性能提升。

# c# - HttpWebRequest not sending UserAgent

> ID：11956204
> 
> 赞同：3
> 
> 时间：2012-08-14T15:54:45.380
> 
> 标签：c#, post, httpwebrequest

I'm new to looking at the whole Web side of .net, and I've run into a slight issue.

I'm trying to do a HttpWebRequest as below:

```
String uri = "https://skyid.sky.com/signup/";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
request.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)";
request.Method = "GET";
request.GetResponse(); 
```

Where the uri is pointing to a HTTPS site. But once I look at this in Fiddler, it has removed my UserAgent and only shows Host and Connection: Keep-Alive.

```
CONNECT skyid.sky.com:443 HTTP/1.1
Host: skyid.sky.com
Connection: Keep-Alive 
```

Is this normal with HTTPS or am I simply missing something? Maybe I'm even missing something in Fiddler that it's not showing this to me.

Any help will be appreciated, thanks all!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:41:10.433

我不认为您正在查看正确的 Fiddler 行。您所显示的是`CONNECT`动词，而不是`GET`. `UserAgent`应该使用该属性正确设置`request.UserAgent`。调试请求的另一种方法是在您的应用程序级别[配置网络跟踪](http://msdn.microsoft.com/en-us/library/ty48b824.aspx)，与 Fiddler 相比，我个人更喜欢：

```
<configuration>
    <system.diagnostics>
        <sources>
            <source name="System.Net" tracemode="protocolonly" maxdatasize="1024">
                <listeners>
                    <add name="System.Net"/>
                </listeners>
            </source>
        </sources>
        <switches>
            <add name="System.Net" value="Verbose"/>
        </switches>
        <sharedListeners>
            <add 
                name="System.Net"
                type="System.Diagnostics.TextWriterTraceListener"
                initializeData="network.log"
            />
        </sharedListeners>
        <trace autoflush="true"/>
    </system.diagnostics>
</configuration> 
```

# javascript - I don't want circles in my line Highchart

> ID：11956205
> 
> 赞同：6
> 
> 时间：2012-08-14T15:54:48.207
> 
> 标签：javascript, highcharts

I'm new at using HighCharts in javascript. I'm doing a line chart, but the chart put me some circles in the graphics by default like this:

[![chart](../Images/32bc40524cd9caae36be68bf34d7819e.png)](https://i.stack.imgur.com/jgX9m.gif)
[(source: [misoproject.com](http://misoproject.com/images/examples/highchart.gif))]

But i don't want that, i want to quit those circles. What can i do to quit those circles in my graphic?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:00:09.510

添加此配置选项：

```
plotOptions: {
  series: {
    marker: {
      enabled: false
    }
  }
} 
```

到图表配置的根目录。

# sql - Doctrine 2 - 单表继承 - 子实体的访问属性

> ID：11956206
> 
> 赞同：6
> 
> 时间：2012-08-14T15:54:49.000
> 
> 标签：sql, inheritance, doctrine-orm

我对我的实体有简单的表继承，比如：

```
/** 
* @InheritanceType("SINGLE_TABLE")
* @DiscriminatorColumn(name="type", type="string")
* @DiscriminatorMap({"base"="BaseArticle", "extended"="ExtendedArticle"}) 
*/         
class BaseArticle extends \Models\BaseModel{
   ...
}
class ExtendedArticle extends BaseArticle{
    /**
    * @column(type="string")
    */
    protected $extendedProperty;
} 
```

我需要对所有文章类型进行查询，但在某些类型中，通过某些属性限制查询，即在扩展的 ExtendedArticle 中，即：

```
SELECT a FROM BaseArticle a WHERE (a INSTANCE OF BaseAricle) OR (a INSTANCE OF ExtendedArticle AND a.extendedProperty = "xy") 
```

这给了我以下例外：

> [语义错误] line 0, col 406 near 'extendedProperty="xy"))': Error: Class Models\Articles\BaseArticle 没有名为 location 的字段或关联

所以问题是，如何在对父类的查询中访问孩子的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:51:37.303

你不能。这是一个解决方法：

```
SELECT a
FROM BaseArticle a
WHERE
    a INSTANCE OF BaseAricle
    OR a.id IN (
        SELECT ea.id
        FROM ExtendedArticle ea
        WHERE ea.extendedProperty = "xy"
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:41:03.193

我已经通过添加和使用 getter/setter 来有效地在我的实体和生命周期回调中隐藏这个属性来处理 NULLABLE 来`$extendedProperty`解决这个问题。但这确实是一个糟糕的解决方案，因为继承几乎毫无意义。`BaseArticle``BaseArticle`

# asp.net-mvc - 带有 Asp.Net 开发 Web 服务器的 Firebug 网络流量选项卡

> ID：11956212
> 
> 赞同：1
> 
> 时间：2012-08-14T15:55:08.673
> 
> 标签：asp.net-mvc, firebug, browser-cache, yslow, network-traffic

我使用 F5（开始调试）启动 Web 应用程序，每次使用 F5 刷新页面时，缓存似乎都已刷新。

我使用带有 YSlow 的 Firebug 来跟踪网络流量，每次在浏览器中按 F5 时，所有的 http 请求都不是灰色的；像 javascript 这样的文件总是被重新下载。

当我按下 Ctrl+F5 时缓存不应该被刷新？

我使用 YSlow 来关注我的本地主机以外的网站，即使按 F5，文件也会保留在缓存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:07:08.717

如果您在浏览器中按 F5，这是预期的行为，因为按 F5 您基本上是在告诉浏览器获取所有内容。如果您想查看输出缓存的效果（我假设这就是您希望看到“灰色项目”的原因），那么只需从页面导航到而不使用 F5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:07:10.737

无论您是重新加载页面还是第一次加载，YSlow 都会根据其 HTTP 标头显示文件缓存信息。这意味着这些文件将在即将访问分析页面时被缓存。

# php - 使用 php 将图像和文本作为电子邮件发送

> ID：11956214
> 
> 赞同：0
> 
> 时间：2012-08-14T15:55:14.740
> 
> 标签：php

我有以下 php 电子邮件联系表，我想让用户能够包含将与其他文本一起发送的图像。例如，而不是 first_name 有一个图像。提前致谢！

```
<?php
if(isset($_POST['email'])) {

    $email_to = "youremail@someone.com";
    $email_subject = "yourSubject";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['last_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');
    }

    $first_name = $_POST['first_name']; // required
    $last_name = $_POST['last_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);
?>

Thank you for contacting us. We will be in touch with you very soon.

<?php
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:01:11.123

您可能想制作一个 html 电子邮件。

添加：`$headers .= "Content-type: text/html\r\n";`

然后为您的图像使用标准的 img 标签

`<img src="your_url />"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:40:31.617

我相信这就是你要找的。请参阅标题为“发送带有附件的电子邮件”的部分 [http://webcheatsheet.com/php/send_email_text_html_attachment.php](http://webcheatsheet.com/php/send_email_text_html_attachment.php)

# sql - Oracle SQL：为什么我的函数输出为空？

> ID：11956215
> 
> 赞同：3
> 
> 时间：2012-08-14T15:55:17.270
> 
> 标签：sql, oracle, plsql

```
CREATE OR REPLACE FUNCTION get_status_by_member_id
(p_member_id NUMBER) 
RETURN CHAR
AS
  v_status CHAR(1);
BEGIN
  select status
  into v_status
  from members
  where member_id = p_member_id;
  if v_status is null then
    return v_status || 'N';
  else
     return v_status;
  end if;
END get_status_by_member_id; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T17:07:05.130

您的问题有时是由 Oracle 的一个恼人的怪癖引起的。也就是说，如果在 SQL 中调用 PL/SQL 函数并返回错误，则`null`返回，而不是其他任何内容。

如果我创建一个非常简单的表......

```
create table a ( b number, c varchar2(1) );
insert into a values (1,'Y'); 
```

...和两个功能。一种*没有*异常处理

```
create or replace function tmp_ben_fn (PId number) return char is
   l_status varchar2(1);   
begin  

   select c
     into l_status
     from a
    where b = PId;

   return coalesce(l_status, 'N');

end;
/ 
```

一个具有异常处理功能。

```
create or replace function tmp_ben_fn2 (PId number) return char is
   l_status varchar2(1);   
begin  

   select c
     into l_status
     from a
    where b = PId;

   return coalesce(l_status, 'N');

   exception when no_data_found then
      return 'A';

end;
/ 
```

然后，我们使用这两个函数来选择数据。请记住，我们只有一行，所以我们只期望`Y`或被`N`返回：

```
SQL> -- Expected output Y
SQL> select tmp_ben_fn(1) from dual;

TMP_BEN_FN2(1)
-------------------------------------------------

Y

SQL> -- Expected output, Error no_data_found
SQL> -- as row 2 does not exist.
SQL> select tmp_ben_fn(2) from dual;

TMP_BEN_FN(2)
-------------------------------------------------

SQL> -- Expected output, the same as tmp_ben_fn
SQL> select tmp_ben_fn2(2) from dual;

TMP_BEN_FN2(2)
-------------------------------------------------

A

SQL> 
```

正如您在没有错误处理的函数中看到的那样，当发生`no_data_found`异常时`null`会返回 a 。当我们捕获异常时，我们得到的是预期的`A`。

我怀疑`member_id`您尝试选择的 不存在。

作为一般规则：始终注意何时可能发生异常，`select into...`这是一个特别令人担忧的例子，有机会选择太多行和没有行。如果您的表是唯一的，`member_id`那么您应该按如下方式更改您的功能：

```
CREATE OR REPLACE FUNCTION get_status_by_member_id (p_member_id NUMBER) 
RETURN CHAR IS
  v_status CHAR(1);
BEGIN
  select status
  into v_status
  from members
  where member_id = p_member_id;

  return v_status;

-- If the member_id does not exist
-- return N
exception when no_data_found then
   return 'N';
END get_status_by_member_id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:46:10.313

尝试在代码中添加异常处理程序，如下所示：

```
CREATE OR REPLACE FUNCTION get_status_by_member_id 
  (p_member_id NUMBER) RETURN CHAR 
as 
  v_status CHAR(1); 
begin 
  BEGIN
    select status 
      into v_status 
      from members 
      where member_id = p_member_id;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      v_status := NULL;
    WHEN TOO_MANY_ROWS THEN
      v_status := NULL;
  END;

  if v_status is null then 
    return 'N'; 
  else 
    return v_status; 
  end if; 
end get_status_by_member_id; 
```

这将处理没有与 p_member_id 匹配的数据或有多个行与 p_member_id 匹配的情况。这可能会或可能不会纠正您看到的问题。如果您编辑您的帖子并添加您正在使用 which calls 的代码，这将很有帮助`get_status_by_member_id`。

分享和享受。

# google-drive-api - 如何获取上传到 Google Drive 的 PDF 的缩略图？

> ID：11956223
> 
> 赞同：1
> 
> 时间：2012-08-14T15:55:46.630
> 
> 标签：google-drive-api

我可以使用 Google SDK 将文件上传到 Google Drive。但我收到的回复不包含“thumbnailLink”字段。

我想为通过我的应用程序上传的每个文件显示预览图像。我该怎么办？

这是我的请求代码：

```
File driveFile = new File();
driveFile.setTitle("File Title");
driveFile.setMimeType(userFile.getContentType());

FileContent driveFileContent = new FileContent(userFile.getContentType(), userFile.asFile());                
File insertedDriveFile = driveService.files().insert(driveFile, driveFileContent).setConvert(true).execute(); 
```

这是我的回应：

```
{
    "alternateLink" : "https://docs.google.com/file/d/...",
    "createdDate" : {
        "dateOnly" : false,
        "tzShift" : 0,
        "value" : 1345031115877
    },
    "description" : "Some Text",
    "downloadUrl" : "...",
    "editable" : true,
    "etag" : "\"qZporUffWgr4KlPui79y_IN18w8/MTM0NTAzMTExNjI1OA\"",
    "fileExtension" : "",
    "fileSize" : 15666,
    "id" : "0B4FbUv8OusD1Q3V2aFM2M2pVaEk",
    "kind" : "drive#file",
    "labels" : { "hidden" : false,
        "restricted" : false,
        "starred" : false,
        "trashed" : false,
        "viewed" : true
     },
    "lastModifyingUserName" : "Regis Bamba",
    "lastViewedByMeDate" : { "dateOnly" : false,
    "tzShift" : 0,
    "value" : 1345031115769
  },
    "md5Checksum" : "0baac1165bd1a004fa52eb9777e455df",
    "mimeType" : "application/pdf",
    "modifiedByMeDate" : { "dateOnly" : false,
        "tzShift" : 0,
        "value" : 1345031116258
      },
    "modifiedDate" : { "dateOnly" : false,
        "tzShift" : 0,
        "value" : 1345031116258
      },
    "originalFilename" : "Test File",
    "ownerNames" : [ "Regis" ],
    "parents" : [ { "id" : "0AIFbUv8OusD1Uk9PVA",
          "isRoot" : true,
          "kind" : "drive#parentReference",
          "parentLink" : "...",
    "selfLink" : "..."
  } ],
  "quotaBytesUsed" : 15666,
  "selfLink" : "...",
  "title" : "Test File",
  "userPermission" : { "etag" : "\"qZporUffWgr4KlPui79y_IN18w8/S0oJPFvxJQWU-e8QPUGRAAa4JaA\"",
  "id" : "me",
  "kind" : "drive#permission",
  "role" : "owner",
  "selfLink" : "https://www.googleapis.com/drive/v2/files/0B4FbUv8OusD1Q3V2aFM2M2pVaEk/permissions/me",
  "type" : "user"
},
  "webContentLink" : "https://docs.google.com/uc?id=0B4FbUv8OusD1Q3V2aFM2M2pVaEk&export=download",
  "writersCanShare" : true
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:06:17.700

缩略图创建过程是异步的，因此该`thumbnailLink`字段不包含在文件上传调用返回的元数据中。稍等片刻后尝试检索相同的文档，它应该包含该字段。

# java - 以比特特定的顺序发送带有 UDP 数据包的电话号码 Java

> ID：11956224
> 
> 赞同：1
> 
> 时间：2012-08-14T15:55:52.060
> 
> 标签：java, udp, bit-manipulation, datagram

我正在创建一个 UDP 数据包以在 java 中配置 GPS 调制解调器。数据包的其中一个部分是电话号码，我得到了以下信息：

电话号码是 64 位。

字节 7 = 0x00（大端）。

字节 4-6 = 区号（小端）。

字节 0-3 = 其他数字（小端序）。

到目前为止我做了什么：

电话号码是：123 4567890 我将字节部分转换为十六进制：123 = 0x00007B 4567890 = 0x0045B352

```
 ByteBuffer UDPConfigModem = ByteBuffer.allocate(8);

    byte areaCode1 = (0x00007B >> 8) & 0xFF;
    byte areaCode2 = (0x00007B >> 16) & 0xFF;

    UDPConfigModem.putInt((byte) 0x0045B352).order(ByteOrder.LITTLE_ENDIAN);
    UDPConfigModem.put((byte) areaCode2).order(ByteOrder.LITTLE_ENDIAN);
    UDPConfigModem.put((byte) areaCode1).order(ByteOrder.LITTLE_ENDIAN);
    UDPConfigModem.put((byte) 0x00007B).order(ByteOrder.LITTLE_ENDIAN);     
    UDPConfigModem.put((byte) 0x00); 
```

因为其他数字需要 4 个字节，所以我只使用了 putInt 并订购了字节，我很确定这不是问题。

区号需要 3 个字节，并且没有我知道的变量，所以我阅读了位移位并使用了[如何将 24 位整数转换为 3 字节数组中的逻辑？](https://stackoverflow.com/questions/4378218/how-do-i-convert-a-24-bit-integer-into-a-3-byte-array)转移它。这就是我认为我的问题所在。

字节 7 非常简单。

如果电话号码发送正确，我应该会从调制解调器得到响应，但是当在 Wire Shark 上监控它时，我看到数据包已发送，但没有发回响应。

我想知道你们是否可以看到任何错误或更好的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:23:07.727

您的代码令人困惑。一个字节不是小端或大端。字节序仅适用于表示较大数字的字节序列，例如整数。`.order`on`ByteBuffer`交换不是您想要的整个缓冲区。

`putInt((byte) 0x0045B352)`是行不通的——你可能只会得到那个整数的低字节。我建议你使用这个答案[https://stackoverflow.com/a/4378416/116509](https://stackoverflow.com/a/4378416/116509)并将字节一个接一个地放入（应该没有理由使用强制转换）。

# eclipse - 当我使用 Eclipse 的 p2 Director 应用程序的 -shared 参数时，出现依赖错误

> ID：11956234
> 
> 赞同：0
> 
> 时间：2012-08-14T15:56:58.033
> 
> 标签：eclipse, eclipse-rcp, eclipse-plugin, p2

如果您想了解更多关于我为什么这样做的信息，请参阅此线程... [http://dev.eclipse.org/mhonarc/lists/p2-dev/msg04735.html](http://dev.eclipse.org/mhonarc/lists/p2-dev/msg04735.html)

好的，我们开始...

我正在尝试使用名为 p2 Director Application 的 Eclipse 命令行工具从我自己的 p2 存储库中安装一个功能，就像这样......

```
C:\SomeDirectory\eclipsec.exe -application org.eclipse.equinox.p2.director -repository http://my.domain.com/myapp/ -installIU com.mydomain.myapp.feature.group -destination C:\SomeDirectory -profile DefaultProfile -shared 
```

注意最后的 -shared 参数。如果我删除它，一切正常，但是当它在那里时，我会在错误日志中得到它......

```
!ENTRY org.eclipse.equinox.p2.director 4 1 2012-08-14 10:30:03.212
!MESSAGE Cannot complete the install because one or more required items could not be found.
!SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2012-08-14 10:30:03.212
!MESSAGE Software being installed: My Application Feature 1.0.1.20120813-1851 (com.mydomain.myapp.feature.group 1.0.1.20120813-1851)
!SUBENTRY 1 org.eclipse.equinox.p2.director 4 0 2012-08-14 10:30:03.212
!MESSAGE Missing requirement: AMX Application Plugin 1.0.1.20120813-1851 (com.mydomain.myapp 1.0.1.20120813-1851) requires 'bundle org.eclipse.core.runtime 0.0.0' but it could not be found
!SUBENTRY 1 org.eclipse.equinox.p2.director 4 1 2012-08-14 10:30:03.212
!MESSAGE Cannot satisfy dependency:
!SUBENTRY 2 org.eclipse.equinox.p2.director 4 0 2012-08-14 10:30:03.212
!MESSAGE From: My Application Feature 1.0.1.20120813-1851 (com.mydomain.myapp.feature.group 1.0.1.20120813-1851)
!SUBENTRY 2 org.eclipse.equinox.p2.director 4 0 2012-08-14 10:30:03.212
!MESSAGE To: com.mydomain.myapp [1.0.1.20120813-1851] 
```

我尝试使用 Eclipse p2 在我的 RCP 应用程序中提供的 GUI 从同一个更新站点安装相同的功能，它工作正常。问题是我需要安装此功能，而我的应用程序用户不必使用 GUI 安装它。

我尝试在没有 -shared 参数的情况下从同一个更新站点安装相同的功能，它工作正常。问题是当我打开 Windows UAC 时，由于写入 C:\Program Files\ 目录的权限问题，它不起作用。

我正在尝试弄清楚如何使用此 -shared 参数，因此当用户将我的应用程序安装在 Windows 的 C:\Program Files\ 目录中时，我可以使用 p2 Director 应用程序通过命令行成功安装此功能。 UAC 设置为其默认级别，这会阻止 Eclipse 将 IU 安装到典型位置。

如果您想了解更多关于我在这里处理的内容，这里有一些更多的背景信息......

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=249133](https://bugs.eclipse.org/bugs/show_bug.cgi?id=249133)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=322929](https://bugs.eclipse.org/bugs/show_bug.cgi?id=322929)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=343768](https://bugs.eclipse.org/bugs/show_bug.cgi?id=343768)

因此，如果您对在将 RCP 应用程序安装到 C:\Program Files\ 目录时如何绕过 Windows 中的 UAC 有任何想法，我很乐意听取您的意见。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:14:03.137

我不知道为什么，但是以逗号分隔列表的形式向 -repository 参数添加更多存储库，解决了这个问题。我不知道为什么它只在使用 -shared 参数时不起作用。产生的有效命令如下所示。

```
C:\SomeDirectory\eclipsec.exe -application org.eclipse.equinox.p2.director -repository http://my.domain.com/myapp/,http://my.domain.com/my-other-p2repo/ -installIU com.mydomain.myapp.feature.group -destination C:\SomeDirectory -profile DefaultProfile -shared 
```

# facebook - 如何强制 facebook 读取元数据？

> ID：11956239
> 
> 赞同：0
> 
> 时间：2012-08-14T15:57:18.330
> 
> 标签：facebook

当您从网站获取链接然后将其发布到您的 facebook 状态时，它似乎会从该页面获取元数据。我看到的是，如果该网页具有指向另一个站点的规范链接，它似乎从另一个站点获取元数据，是否有强制 facebook 从您发布在您的 facebook 提要上的链接读取元数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:59:44.460

不，您明确告诉 Facebook 通过规范标签或`og:url`元标签获取哪个 URL。

如果您想要一些“临时”或“保留”页面来累积喜欢、评论等，但重定向到其他地方 - 让该 URL 将正确的元数据返回给 Facebook，但重定向到达该 URL 的其他客户端。

# django - Django 翻译 templatetag 字符串参数

> ID：11956246
> 
> 赞同：4
> 
> 时间：2012-08-14T15:57:44.913
> 
> 标签：django, gettext, django-templates

是否有一个简单的解决方案来标记一个`inclusion_tag`（或一般的模板标签）的字符串参数以进行翻译？在这个例子中，我想标记第二个参数进行翻译：

```
{% render_tile_section qs "Foo" %} 
```

使用这样的inclusion_tag 显然是行不通的：

```
from django.utils.translation import ugettext_lazy as _

@register.inclusion_tag('content/includes/tile_section.html')
def render_tile_section(qs, headline=''):
    return {'qs': qs,
            'headline': u'%s' % _(headline) if headline else ''} 
```

我的第一个想法是子类化`inclusion_tag`并使其像`trans`字符串参数的标记一样工作。但据我所知，Django 的`makemessages`命令只会在模板中进行评估`trans`，`blocktrans`或者我有办法扩展它吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T10:31:36.157

该功能已经内置到 Django 的模板标签中。[在文档](https://docs.djangoproject.com/en/1.0/topics/i18n/#in-template-code)中完全错过了这一点：

```
{% some_special_tag _("Page not found") value|yesno:_("yes,no") %} 
```

# android - Android SDK Fragments - 在多个活动中保留状态

> ID：11956249
> 
> 赞同：0
> 
> 时间：2012-08-14T15:57:58.373
> 
> 标签：android, android-layout, android-fragments

我正在开发一个应用程序，其中我的主要活动包含在显示产品的片段的左侧。根据选择，横向视图的右侧部分显示详细信息，其中可以彻底指定产品的属性。如果应用程序在横向模式下运行，就会出现这种情况。如果方向更改为纵向模式，则用户首先选择一个产品，然后通过单独的专用活动指定产品的属性，其中每个活动恰好包含前面提到的横向视图的一个片段。

当我在运行时旋转屏幕时，问题就出现了。假设我以纵向模式启动应用程序，并选择第一个产品（Activity A，Fragment A）。下一个屏幕（单独的 Activity，称为 Activity B）将包含一个片段 B，我可以在其中指定产品的属性 1。现在我旋转屏幕。然后应用程序将显示选择第一个产品的横向视图，并且专用于产品配置的所有片段都显示在右侧。有没有一种解决方案，我可以保留用户在单独的活动（即片段B，活动B）中完成的配置，以便横向视图接收状态，以便详细信息视图可以正确显示迄今为止所做的配置？

总结一下：

我在活动 A 中，只包含一个产品列表（片段 A）我选择第一个然后我进入一个新的活动 B，其中显示片段 B 然后我旋转我的屏幕然后我回到活动 A，现在包含左侧 Fragment A（列表）和右侧（以及其他） Fragment B。我希望 Activity B 中的 Fragment B 的状态在 Activity A、Fragment B 中可用。

希望我能完全说明我的问题。

TIA杰拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:17:15.747

我现在能想到的解决方案有两种：

1.  在这种情况下忘记 2 个活动，只用 1 个活动来解决这个场景。我有多个项目都具有这些要求。在纵向模式下，我使用 ViewSwitcher 或 ViewFlipper 来全屏显示 Fragment A 或 Fragment B。在风景上，事情和你描述的一样。这样 2 个片段可以相互通信，片段 B 可以更新片段 A 上的选择。

2.  使用 .startActivityForResult() 启动 Activity B，因此它可以为 Activity A 提供包含当前选择的结果。

# python - 如何在 PyGTK 的几个按钮中禁用“按钮焦点”？

> ID：11956250
> 
> 赞同：0
> 
> 时间：2012-08-14T15:57:58.813
> 
> 标签：python, button, pygtk, pygobject

我想禁用窗口所有按钮的*焦点*。我可以禁用一个按钮，`widget.set_can_focus(False)`但我想知道将此功能应用于窗口中所有按钮的规范方法。

仅供参考，我正在使用`HBox`和`VBox`容器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T03:57:21.643

我会遍历按钮列表，然后使用“鸭子打字”来禁用它们的焦点。

例如：

```
button_widgets = [button1, button2, ..., buttonN]

for button in button_widgets:
    button.set_can_focus(False) 
```

更新：

如何遍历 HBox 或 VBox 中的所有元素以查找按钮：

如果您在包含按钮的最低层有 HBoxes 或 VBoxes 的名称，您可以简单地遍历它们，检查按钮，然后将它们添加到列表中。这是我打印出 HBox 中的所有按钮的示例：

```
import gtk
import pygtk
hbox = gtk.HBox()
button1 = gtk.Button('1')
button2 = gtk.Button('2')
hbox.add(button1)
hbox.add(button2)
for i in hbox:
    if type(i) == gtk.Button: print i 
```

输出：

```
<gtk.Button object at 0x1909320 (GtkButton at 0x171e8e0)>
<gtk.Button object at 0x19093c0 (GtkButton at 0x171e9a0)> 
```

# vb.net - 您如何防止 Nvidia 的 3D Vision 发挥作用？（如何从 .NET 调用 NVAPI）

> ID：11956252
> 
> 赞同：1
> 
> 时间：2012-08-14T15:58:04.477
> 
> 标签：vb.net, 3d, directx, nvidia

我通常会在 nvidia 的开发者论坛上发布此内容，但由于上个月的黑客攻击，它们仍然处于离线状态。如果有人知道针对此类问题的另一个好的社区，我很想知道他们。

我正在开发一些旨在测试人类视觉的软件。现在我写了两个测试，一个使用 nvidia 的 3D vision v.2 眼镜呈现立体图像，另一个测试在屏幕上显示字母，类似于您在眼科医生检查室看到的图表。我的问题是在“图表测试”期间，3D 视觉被触发并导致屏幕看起来很暗。我可以通过 nvidia 控制面板在运行不同的测试之间启用和禁用 3D 视觉，但这是一个不太优雅的解决方案。我正在使用 DX9 和 Visual Basic 来开发我的代码。为了在立体测试中触发 3D，我使用了[此处描述的 NV_STEREO_IMAGE_SIGNATURE 方法](https://stackoverflow.com/questions/7377861/nv-stereo-image-signature-and-directx-10-11-nvidia-3d-vision "NV_STEREO_IMAGE_SIGNATURE 和 DirectX 10/11 (nVidia 3D Vision)"). 基本上，该方法涉及制作一个两倍于屏幕宽度的后备缓冲区，并在中间添加一列额外的像素数据，在其中插入一个特殊签名，告诉视频卡它是立体图像，后备缓冲区的左半部分应该显示给左眼，右半部分显示给右眼。我在“图表测试”的代码中没有做任何这些，但 3d 视觉仍然被触发，我不知道为什么。有没有办法告诉视频卡暂时禁用代码中的 3d Vision 功能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:36:05.687

我想我可能已经找到了解决我自己问题的方法。Nvidia 提供了一个名为 NVAPI 的库，可以静态加载并包含诸如 NVAPI_STEREO_ENABLE 和 NVAPI_STEREO_DISABLE 之类的调用。可以在[此处](http://developer.nvidia.com/nvapi "链接到 NVAPI")找到有关 NVAPI 的下载和信息。完成解决方案后，我将使用实际代码示例编辑这篇文章。

编辑：因为 C#/Visual Basic 不允许静态加载 .lib 文件，我必须创建一个 Visual C++ 来包装 NVAPI.lib 文件。在引用 lib 文件并将包含头文件添加到我的包装器项目后，我编写了以下代码。

```
#include "stdafx.h"
#include "nvapi.h"

public ref class NvApiWrapper
{   
public: 
    static bool NvApiWrapper_Initialize(){
    if (NvAPI_Initialize() == 0){
        return true;
    } else {
        return false;
    }
    }

    static bool NvApiWrapper_Stereo_Enable(){
    if (NvAPI_Stereo_Enable() == 0){
        return true;
    } else {
        return false;
    }
    }

    static bool NvApiWrapper_Stereo_Disable(){
    if (NvAPI_Stereo_Disable() == 0){
        return true;
    } else {
        return false;
    }
    }
}; 
```

我只对这两个立体方法感兴趣，所以我没有添加任何其他内容，但是可以调用很多有趣的方法。您必须在任何其他调用之前调用 NvAPI_Initialize()。

# sql - SQL 查询 - 拉取用户成就

> ID：11956253
> 
> 赞同：1
> 
> 时间：2012-08-14T15:58:07.703
> 
> 标签：sql, informix

首先，我很抱歉，因为我无法为这个问题想出更好的标题。

我的网站上有一个徽章/成就系统，社区用户根据他们在网站上的活动获得特定的徽章奖励，下面的 sql 示例我用来提取至少发表 100 个论坛帖子的用户数量（我使用的是 informix db版本 10)

```
SELECT tjm.userid::INTEGER AS user_id, 
  EXTEND(DBINFO("UTC_TO_DATETIME",tjm.creationdate/1000), year to fraction) 
    AS earned_date
FROM TABLE(
  MULTISET(
    SELECT jm.userid, jm.creationdate, (
      SELECT COUNT(*) from TABLE(
        MULTISET(
          SELECT userid, creationdate
          FROM jive:jivemessage
        )
      ) AS i 
      WHERE i.userid = jm.userid AND i.creationdate < jm.creationdate
    ) + 1 AS row_num
    FROM jive:jivemessage jm 
  )
) AS tjm 
WHERE tjm.row_num=100 
```

这条 sql 执行大约需要 30 多分钟，我们有一个非常大的社区，并且有数百万个论坛帖子。

我想知道是否有提高查询性能的解决方案？我试图减少执行时间，因为我有 40 个与此类似的 sql 查询，但针对不同的表和活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:26:46.603

我现在不使用 Informix DB，但下面的查询应该按照您的要求进行，它是 ANSI SQL（除了 EXTEND 部分，我从您的原始查询中复制了它）。

```
SELECT
  jm.userid
  ,EXTEND(DBINFO("UTC_TO_DATETIME",tjm.creationdate/1000), year to fraction) AS earned_date
FROM
  (
  -- This sub-query will return all Users who have 100 messages or more
  SELECT
    jm.userid
    ,count(jm.userid) as totalmessages
  FROM
    jive:jivemessage jm
  GROUP BY
    jm.userid
  HAVING
    count(jm.userid) >= 100) AS MessageCount 
```

以上可能无需使用子查询即可完成。我使用它的唯一原因是根据原始查询在结果集中拥有 DateEarned。将它添加到子查询将需要将其添加到 GROUP BY，如果查询运行两天（例如，在 23:59:59），则会产生不可预测的结果。

**更新 2012/08/14 - 根据新要求重写查询**

正如我之前所说，我根本不了解 Informix，因此以下查询可能会运行，也可能不会运行。

```
SELECT
  UsersWithBadge.userid
  ,MAX(UsersWithBadge.creationdate) as dateearned
FROM
  (
  SELECT FIRST 100
    jm.userid
    ,jm.creationdate
  FROM
    jive:jivemessage jm
    JOIN
    (-- This sub-query will return all Users who have 100 messages or more
    SELECT
      jm.userid
      ,count(jm.userid) as totalmessages
    FROM
      jive:jivemessage jm
    GROUP BY
      jm.userid
    HAVING
      count(jm.userid) >= 100)
    AS MessageCount ON
      (MessageCount.userid = jm.userid)
  ) AS UsersWithBadge     
GROUP BY
  UsersWithBadge.userid 
```

# java - 如何使用 JTable 使用 MessageFormat 打印多个标题行

> ID：11956254
> 
> 赞同：6
> 
> 时间：2012-08-14T15:58:07.327
> 
> 标签：java, swing, printing, jtable, messageformat

我有一个名为的表`table`，其中填充了数据，我还有一个`MessageFormat`标题我想用作标题来打印`JTable`这是`MessageFormat`：

```
MessageFormat header = new  MessageFormat("Product: "
                    + task.getProductName() + "  Job: "
                    + task.getJobNumber() + "  Task: " + task.getTaskID()
                    ); 
```

**我想在标题中打印 3 行，一行用于 Product、Job 和 Task**

我打印的方式`table`是这样的：

```
table.print(JTable.PrintMode.FIT_WIDTH, header, null); 
```

我似乎无法弄清楚如何在 3 个单独的行中打印标题，我尝试使用`\n`创建一个新行，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T17:45:05.930

这将是一个很长的答案（代码方面），因为我发现的唯一解决方案是实现自定义`Printable`. 当然下面的代码不是我自己写的，主要是把我从jdk源码中提取的代码复制过来，做了一些调整。

我们到了：

这就是您所说的调用 print 方法的方式：

```
DefaultTableModel dtm = new DefaultTableModel(new String[] { "Column 1" }, 1);

JTable table = new JTable(dtm) {
@Override
    public Printable getPrintable(PrintMode printMode, MessageFormat headerFormat, MessageFormat footerFormat) {
       return new TablePrintable(this, printMode, headerFormat, footerFormat);
    }
}; 
```

以下课程在哪里`TablePrintable`（抱歉这里不简洁）：

```
static class TablePrintable implements Printable {

    private final JTable table;
    private final JTableHeader header;
    private final TableColumnModel colModel;
    private final int totalColWidth;
    private final JTable.PrintMode printMode;
    private final MessageFormat headerFormat;
    private final MessageFormat footerFormat;
    private int last = -1;
    private int row = 0;
    private int col = 0;
    private final Rectangle clip = new Rectangle(0, 0, 0, 0);
    private final Rectangle hclip = new Rectangle(0, 0, 0, 0);
    private final Rectangle tempRect = new Rectangle(0, 0, 0, 0);
    private static final int H_F_SPACE = 8;
    private static final float HEADER_FONT_SIZE = 18.0f;
    private static final float FOOTER_FONT_SIZE = 12.0f;
    private final Font headerFont;
    private final Font footerFont;

    public TablePrintable(JTable table, JTable.PrintMode printMode, MessageFormat headerFormat,
            MessageFormat footerFormat) {

        this.table = table;

        header = table.getTableHeader();
        colModel = table.getColumnModel();
        totalColWidth = colModel.getTotalColumnWidth();

        if (header != null) {
            // the header clip height can be set once since it's unchanging
            hclip.height = header.getHeight();
        }

        this.printMode = printMode;

        this.headerFormat = headerFormat;
        this.footerFormat = footerFormat;

        // derive the header and footer font from the table's font
        headerFont = table.getFont().deriveFont(Font.BOLD, HEADER_FONT_SIZE);
        footerFont = table.getFont().deriveFont(Font.PLAIN, FOOTER_FONT_SIZE);
    }

    @Override
    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {

        // for easy access to these values
        final int imgWidth = (int) pageFormat.getImageableWidth();
        final int imgHeight = (int) pageFormat.getImageableHeight();

        if (imgWidth <= 0) {
            throw new PrinterException("Width of printable area is too small.");
        }

        // to pass the page number when formatting the header and footer
        // text
        Object[] pageNumber = new Object[] { Integer.valueOf(pageIndex + 1) };

        // fetch the formatted header text, if any
        String headerText = null;
        if (headerFormat != null) {
            headerText = headerFormat.format(pageNumber);
        }

        // fetch the formatted footer text, if any
        String footerText = null;
        if (footerFormat != null) {
            footerText = footerFormat.format(pageNumber);
        }

        // to store the bounds of the header and footer text
        Rectangle2D hRect = null;
        Rectangle2D fRect = null;

        // the amount of vertical space needed for the header and footer
        // text
        int headerTextSpace = 0;
        int footerTextSpace = 0;

        // the amount of vertical space available for printing the table
        int availableSpace = imgHeight;

        // if there's header text, find out how much space is needed for it
        // and subtract that from the available space
        if (headerText != null) {
            graphics.setFont(headerFont);
            int nbLines = headerText.split("\n").length;
            hRect = graphics.getFontMetrics().getStringBounds(headerText, graphics);

            hRect = new Rectangle2D.Double(hRect.getX(), Math.abs(hRect.getY()), hRect.getWidth(),
                    hRect.getHeight() * nbLines);

            headerTextSpace = (int) Math.ceil(hRect.getHeight() * nbLines);
            availableSpace -= headerTextSpace + H_F_SPACE;
        }

        // if there's footer text, find out how much space is needed for it
        // and subtract that from the available space
        if (footerText != null) {
            graphics.setFont(footerFont);
            fRect = graphics.getFontMetrics().getStringBounds(footerText, graphics);

            footerTextSpace = (int) Math.ceil(fRect.getHeight());
            availableSpace -= footerTextSpace + H_F_SPACE;
        }

        if (availableSpace <= 0) {
            throw new PrinterException("Height of printable area is too small.");
        }

        // depending on the print mode, we may need a scale factor to
        // fit the table's entire width on the page
        double sf = 1.0D;
        if (printMode == JTable.PrintMode.FIT_WIDTH && totalColWidth > imgWidth) {

            // if not, we would have thrown an acception previously
            assert imgWidth > 0;

            // it must be, according to the if-condition, since imgWidth > 0
            assert totalColWidth > 1;

            sf = (double) imgWidth / (double) totalColWidth;
        }

        // dictated by the previous two assertions
        assert sf > 0;

        // This is in a loop for two reasons:
        // First, it allows us to catch up in case we're called starting
        // with a non-zero pageIndex. Second, we know that we can be called
        // for the same page multiple times. The condition of this while
        // loop acts as a check, ensuring that we don't attempt to do the
        // calculations again when we are called subsequent times for the
        // same page.
        while (last < pageIndex) {
            // if we are finished all columns in all rows
            if (row >= table.getRowCount() && col == 0) {
                return NO_SUCH_PAGE;
            }

            // rather than multiplying every row and column by the scale
            // factor
            // in findNextClip, just pass a width and height that have
            // already
            // been divided by it
            int scaledWidth = (int) (imgWidth / sf);
            int scaledHeight = (int) ((availableSpace - hclip.height) / sf);

            // calculate the area of the table to be printed for this page
            findNextClip(scaledWidth, scaledHeight);

            last++;
        }

        // create a copy of the graphics so we don't affect the one given to
        // us
        Graphics2D g2d = (Graphics2D) graphics.create();

        // translate into the co-ordinate system of the pageFormat
        g2d.translate(pageFormat.getImageableX(), pageFormat.getImageableY());

        // to save and store the transform
        AffineTransform oldTrans;

        // if there's footer text, print it at the bottom of the imageable
        // area
        if (footerText != null) {
            oldTrans = g2d.getTransform();

            g2d.translate(0, imgHeight - footerTextSpace);

            String[] lines = footerText.split("\n");
            printText(g2d, lines, fRect, footerFont, imgWidth);

            g2d.setTransform(oldTrans);
        }

        // if there's header text, print it at the top of the imageable area
        // and then translate downwards
        if (headerText != null) {
            String[] lines = headerText.split("\n");
            printText(g2d, lines, hRect, headerFont, imgWidth);

            g2d.translate(0, headerTextSpace + H_F_SPACE);
        }

        // constrain the table output to the available space
        tempRect.x = 0;
        tempRect.y = 0;
        tempRect.width = imgWidth;
        tempRect.height = availableSpace;
        g2d.clip(tempRect);

        // if we have a scale factor, scale the graphics object to fit
        // the entire width
        if (sf != 1.0D) {
            g2d.scale(sf, sf);

            // otherwise, ensure that the current portion of the table is
            // centered horizontally
        } else {
            int diff = (imgWidth - clip.width) / 2;
            g2d.translate(diff, 0);
        }

        // store the old transform and clip for later restoration
        oldTrans = g2d.getTransform();
        Shape oldClip = g2d.getClip();

        // if there's a table header, print the current section and
        // then translate downwards
        if (header != null) {
            hclip.x = clip.x;
            hclip.width = clip.width;

            g2d.translate(-hclip.x, 0);
            g2d.clip(hclip);
            header.print(g2d);

            // restore the original transform and clip
            g2d.setTransform(oldTrans);
            g2d.setClip(oldClip);

            // translate downwards
            g2d.translate(0, hclip.height);
        }

        // print the current section of the table
        g2d.translate(-clip.x, -clip.y);
        g2d.clip(clip);
        table.print(g2d);

        // restore the original transform and clip
        g2d.setTransform(oldTrans);
        g2d.setClip(oldClip);

        // draw a box around the table
        g2d.setColor(Color.BLACK);
        g2d.drawRect(0, 0, clip.width, hclip.height + clip.height);

        // dispose the graphics copy
        g2d.dispose();

        return PAGE_EXISTS;
    }

    private void printText(Graphics2D g2d, String[] lines, Rectangle2D rect, Font font, int imgWidth) {

        g2d.setColor(Color.BLACK);
        g2d.setFont(font);

        for (int i = 0; i < lines.length; i++) {
            int tx;

            // if the text is small enough to fit, center it
            if (rect.getWidth() < imgWidth) {
                tx = (int) (imgWidth / 2 - g2d.getFontMetrics().getStringBounds(lines[i], g2d).getWidth() / 2);

                // otherwise, if the table is LTR, ensure the left side of
                // the text shows; the right can be clipped
            } else if (table.getComponentOrientation().isLeftToRight()) {
                tx = 0;

                // otherwise, ensure the right side of the text shows
            } else {
                tx = -(int) (Math.ceil(rect.getWidth()) - imgWidth);
            }

            int ty = (int) Math.ceil(Math.abs(rect.getY() + i * rect.getHeight() / lines.length));
            g2d.drawString(lines[i], tx, ty);
        }
    }

    private void findNextClip(int pw, int ph) {
        final boolean ltr = table.getComponentOrientation().isLeftToRight();

        // if we're ready to start a new set of rows
        if (col == 0) {
            if (ltr) {
                // adjust clip to the left of the first column
                clip.x = 0;
            } else {
                // adjust clip to the right of the first column
                clip.x = totalColWidth;
            }

            // adjust clip to the top of the next set of rows
            clip.y += clip.height;

            // adjust clip width and height to be zero
            clip.width = 0;
            clip.height = 0;

            // fit as many rows as possible, and at least one
            int rowCount = table.getRowCount();
            int rowHeight = table.getRowHeight(row);
            do {
                clip.height += rowHeight;

                if (++row >= rowCount) {
                    break;
                }

                rowHeight = table.getRowHeight(row);
            } while (clip.height + rowHeight <= ph);
        }

        // we can short-circuit for JTable.PrintMode.FIT_WIDTH since
        // we'll always fit all columns on the page
        if (printMode == JTable.PrintMode.FIT_WIDTH) {
            clip.x = 0;
            clip.width = totalColWidth;
            return;
        }

        if (ltr) {
            // adjust clip to the left of the next set of columns
            clip.x += clip.width;
        }

        // adjust clip width to be zero
        clip.width = 0;

        // fit as many columns as possible, and at least one
        int colCount = table.getColumnCount();
        int colWidth = colModel.getColumn(col).getWidth();
        do {
            clip.width += colWidth;
            if (!ltr) {
                clip.x -= colWidth;
            }

            if (++col >= colCount) {
                // reset col to 0 to indicate we're finished all columns
                col = 0;

                break;
            }

            colWidth = colModel.getColumn(col).getWidth();
        } while (clip.width + colWidth <= pw);

    }
} 
```

这是结果（我希望这是你所期望的）： ![打印时具有多行标题的 JTable](../Images/e692856cea02e9ded1714db4e068d02b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T07:41:35.053

基本上，@aymeric 的答案是正确的：没有办法绕过自定义可打印实现。用稍微少一点的 c&p 来做到这一点的一种方法是有一个自定义实现

*   接管页眉/页脚打印
*   委托表打印本身到默认可打印

该方法的技巧是使用自定义 pageFormat 欺骗委托 tablePrintable 使其相信页面比实际小

[更多细节（和代码）](https://stackoverflow.com/a/6343475/203657)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T19:02:44.390

如果您使用该[`getPrintable`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getPrintable%28javax.swing.JTable.PrintMode,%20java.text.MessageFormat,%20java.text.MessageFormat%29)方法而不添加页眉/页脚文本，则可以`Printable`在其中包含/装饰返回的内容，您可以更好地控制页眉，并且可以指定多行页眉。请参阅该方法的javadoc，其中提到

> 将此 Printable 包装在另一个中以创建复杂的报告和文档是完全有效的。您甚至可以要求将不同的页面呈现到不同大小的可打印区域。实现必须准备好处理这个问题（可能通过动态进行布局计算）。但是，当 PrintMode.NORMAL 必须跨页面分布列时，为每个页面提供不同的高度可能无法很好地工作。

我没有足够的经验`Printable`来帮助您进一步了解如何实际执行此操作

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T19:32:05.383

你可以试试

```
StringBuilder builder = new StringBuilder();
builder.append("Product: ");
builder.append(task.getProductName());
builder.append(System.getProperty("line.separator"));
builder.append("Job: ");
builder.append(task.getJobNumber());
builder.append(System.getProperty("line.separator"));
builder.append("Task: ");
builder.append(task.getTaskID();

MessageFormat header = new MessageFormat(builder.toString()); 
```

如果这不起作用，那么您将不得不设置自己的打印机作业，并根据需要精确地布局标题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-01T17:45:14.840

我使用了两个`MessageFormat`数组作为该问题的巧妙解决方案。您会在下面找到最终结果的打印输出：

[![在此处输入图像描述](../Images/5d63736a2400bdd64f4cd58306bbaed1.png)](https://i.stack.imgur.com/RzOY8.jpg)

代码概述如下：

```
try    
{
    PrinterJob job = PrinterJob.getPrinterJob();

    MessageFormat[] header = new MessageFormat[6];

    // Assign the arrays with 6 String values for the headers
    header[0] = new MessageFormat("");
    header[1] = new MessageFormat(theExamSelection);
    header[2] = new MessageFormat("");
    header[3] = new MessageFormat("Scrud 60 - Grade Returns - Random Sample");
    header[4] = new MessageFormat("");
    header[5] = new MessageFormat(theSubjectSelection+" - "+theLevelSelection+" - "+thePaperSelection);

    MessageFormat[] footer = new MessageFormat[4];

    // Assign the 4 Strings to the footer array
    footer[0] = new MessageFormat("Assistant Examiner Signature:______________  Date:___ /___ /_____ ");
    footer[1] = new MessageFormat("");
    footer[2] = new MessageFormat("");
    footer[3] = new MessageFormat("Advising  Examiner Signature:______________  Date:___ /___ /_____ ");

    //here you place the JTable to print 
    // in this case its called randomSample_gradeBreakdown_jTable
    // along with the header and footer arrays
    job.setPrintable(new PrintTableMultiLine(randomSample_gradeBreakdown_jTable, JTable.PrintMode.FIT_WIDTH, header, footer ));

    job.print();

} 
catch (java.awt.print.PrinterException e) 
{
    System.err.format("Cannot print %s%n", e.getMessage());

    JOptionPane.showMessageDialog(this,
            "Check that your printer is working correctly","PRINT ERROR",JOptionPane.ERROR_MESSAGE
            );
} 
```

# android - android EMFILE（打开的文件太多）

> ID：11956256
> 
> 赞同：3
> 
> 时间：2012-08-14T15:58:10.883
> 
> 标签：android, file

我实现了一个文件缓存来为长网格视图加载小图像。滚动一段时间后，我得到了很多`libcore.io.ErrnoException: open failed: EMFILE (Too many open files)`

我该如何避免这种情况？这是读取一个位图的代码：

```
File fullCacheDir = new File(Environment.getExternalStorageDirectory().toString(), cacheDir);
File file = new File(fullCacheDir.toString(), fileName);

if (!file.exists()) {
    return null;
}

Bitmap bm = BitmapFactory.decodeFile(file.toString()); 
```

这是为了保存一个位图：

```
FileOutputStream outputStream = new FileOutputStream(fileUri);
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);
outputStream.flush();
outputStream.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:08:32.877

由于异常，您的 close() 呼叫没有被接通吗？我通常这样编码：

```
try {
  new FileOutputStream(fileUri);
  bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);
  outputStream.flush();
} finally {
  try {
    outputStream.close();
  } catch (Exception ignored) {
    // ignore exceptions generated by close()
  }
} 
```

我看不出第一个代码片段有任何明显错误。

# macos - sudo 被后台而不是命令

> ID：11956259
> 
> 赞同：0
> 
> 时间：2012-08-14T15:58:27.030
> 
> 标签：macos, macports, bash

我的 ~/.profile 文件中有以下内容...

`alias mysqlstart='sudo /opt/local/bin/mysqld_safe5 &'`

但是，当我键入`$ mysqlstart`. 我没有被要求输入密码并且 mysql 没有启动。当我把工作放在前台时，它一直在询问我的密码。

有没有办法设置别名所以`/opt/local/bin/mysqld_safe5`不是背景`sudo`？

这是我的 shell 的版本信息：

`GNU bash, version 4.2.37(2)-release (i386-apple-darwin11.3.0)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:00:35.227

从[`sudo`手册页](http://linux.die.net/man/8/sudo)：

> -b（后台）选项告诉 sudo 在后台运行给定的命令。请注意，如果您使用 -b 选项，您将无法使用 shell 作业控制来操作该进程。大多数交互式命令将无法在后台模式下正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:28:23.147

我不知道这个`sudo -b`选项，这听起来像是更好的解决方案。

我以前使用过类似下面的东西，我认为它的优点是它允许 shell 控制作业：

`alias mysqlstart='sudo true; sudo /opt/local/bin/mysqld_safe5 &'`

第一个命令`sudo true`应该提示您输入密码，但实际上并没有做任何事情，但允许第二个`sudo`命令在不提示您输入密码的情况下执行。

# symfony - 拒绝除某些 url 之外的匿名连接

> ID：11956262
> 
> 赞同：0
> 
> 时间：2012-08-14T15:58:36.100
> 
> 标签：symfony

除了某些 url，我需要拒绝匿名连接。

```
firewalls:
        install:
            pattern:    ^/install/.*
            security:  false
        main:
            pattern: ^/
            form_login:
                provider:    fos_userbundle
                login_path:    /login
                check_path:    /login_check
                use_forward:    true
                always_use_default_target_path: true
                default_target_path:            /
                post_only:    true
            logout:    true
            anonymous:    ~

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/login_check, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/install/, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/*, roles: ROLE_USER } 
```

听起来像“-{路径：^/*，角色：ROLE_USER}”行可以完成这项工作，但会覆盖我的防火墙“安装”，因为它们共享相同的根（模式/）。

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:07:07.933

一种快速的方法是从防火墙中排除`/install`路径：`main`

```
firewalls:
        install:
            pattern:    ^/install/.*
            security:  false
        main:
            pattern: ^/(?!install/)
            ... 
```

# rss - 外部 RSS 图像非常模糊

> ID：11956264
> 
> 赞同：0
> 
> 时间：2012-08-14T15:58:39.530
> 
> 标签：rss, simplepie

我有一个网站，我正在使用 Simple Pie 引入外部 rss 提要。我正在显示图像，但它们显示得非常模糊。当我点击进入故事时，它们在原始网站上看起来不错。为什么它们在我的网站上显示模糊？

这是我的网站： http: [//leadgenixhosting.com/~freepub/](http://leadgenixhosting.com/~freepub/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:28:00.227

这些图像“模糊”的原因是它们比您将它们缩放到的尺寸小得多。没有看到您正在使用的提要，就无法知道是否可以修复，但我怀疑提要中仅包含缩略图。

# jquery - 从两个特定单词之间的大字符串中获取第一次出现的数字？

> ID：11956269
> 
> 赞同：0
> 
> 时间：2012-08-14T15:59:00.030
> 
> 标签：jquery, regex, coffeescript

我有以下字符串（`field_data`）：

```
<fieldset>
    <div class='control-group'>
        <h5>New Side Dish</h5>
        <input id="menu_dishes_attributes_1344897592128_side_dishes_attributes_70308623619760_name" name="menu[dishes_attributes][1344897592128][side_dishes_attributes][70308623619760][name]" placeholder="Name" size="30" type="text" />
        <input id="menu_dishes_attributes_1344897592128_side_dishes_attributes_70308623619760__destroy" name="menu[dishes_attributes][1344897592128][side_dishes_attributes][70308623619760][_destroy]" type="hidden" value="false" />
        <input id="menu_dishes_attributes_1344897592128_side_dishes_attributes_70308623619760_price" name="menu[dishes_attributes][1344897592128][side_dishes_attributes][70308623619760][price]" placeholder="Price" size="30" type="text" />
        <input id="menu_dishes_attributes_1344897592128_side_dishes_attributes_70308623619760_restaurant_id" name="menu[dishes_attributes][1344897592128][side_dishes_attributes][70308623619760][restaurant_id]" type="hidden" />
        <a href="#" class="remove_fields">X</a>
    </div>
</fieldset> 
```

**我想获取和之间的数字`[side_dishes_attributes]`，`[restaurant_id]`它是`70308623619760`第一次出现或最后一次出现，但我基本上只需要它的一个实例。**

我知道您可以使用正则表达式和过滤器，但是每当我使用其中任何一个时，它要么返回字符串中的所有数字，要么在不正确的输出中显示所有数字集。

我抓取的数字不是静态的，因此它会更改代码的每次迭代，但名称`side_dishes_attributes`和`restaurant_id`是恒定的。

这是我到目前为止尝试过的，这里是输出：

```
field_data = $(this).data('fields')

start_pos = field_data.indexOf("side_dishes_attributes][")
end_pos = field_data.indexOf("][_destroy]", start_pos)
result_text = field_data.substring(start_pos, end_pos)
console.log("Result:", result_text) 
```

输出：

```
Result: side_dishes_attributes][70208369492160][name]&quot; placeholder=&quot;Name&quot; size=&quot;30&quot; type=&quot;text&quot; /&gt;    &lt;input id=&quot;menu_dishes_attributes_70208370296900_side_dishes_attributes_70208369492160__destroy&quot; name=&quot;menu[dishes_attributes][70208370296900][side_dishes_attributes][70208369492160 
```

我试过了：

```
result = field_data.replace(/[^0-9]/g, "")
console.log(result) 
```

输出：

```
227020836200328070208362003280702083620032803070208... 
```

我也试过玩这个：

[http://rubular.com/r/r5iowGGmw4](http://rubular.com/r/r5iowGGmw4)

但我不太了解正则表达式以使其正常工作。

我会很感激任何指示。我在 jQuery Coffeescript 中完成了所有这些工作（但如果你只用 jQuery 给我看代码，我也可以转换它）。

## 可能的答案？

```
start_pos = field_data.indexOf("side_dishes_attributes][") + 24
end_pos = field_data.indexOf("][name]", start_pos)
result_text = field_data.substring(start_pos, end_pos)
console.log("Result", result_text) 
```

我使用它得到了正确的输出，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:11:52.210

如果您的 HTML 字符串存储在变量中，例如`str`，您可以执行以下操作：

```
var matches = str.match(/side_dishes_attributes_(\d+)_/);
var number = matches[1]; 
```

这将为您提供一个包含两个元素的数组。第一个是匹配正则表达式“side_disshes_attributes_70308623619760”的完整字符串，第二个是括号捕获的字符串，“70308623619760”。`matches[1]`将包含您的号码。

通过省略`g`修饰符，表达式只匹配一次，因此它将返回`id`第一个输入中包含的数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:06:15.713

虽然我同意@Luke 和@jackwanders 的观​​点，其他方法更可取，*但如果*你真的只有字符串中的数据，我相信这里有一个正则表达式可以解决问题：

```
data.match /\[side_dishes_attributes\]\[(.*)\]\[restaurant_id\]/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:11:20.847

尝试这个：

```
$('.control-group input').each(function() {
    var match = $(this).attr('id').match(/side_dishes_attributes_(\d*)_restaurant_id/);
    if (match) {
        alert(match[1]); // -> 70308623619760
        return false;
    }
});​ 
```

如果找到匹配项，它将遍历所有输入元素并中断。

[**小提琴**](http://jsfiddle.net/rSghe/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:04:59.363

我假设您正在从服务器构建此 ID。那么为什么不在另一个 html 属性中添加这个数字`rel`呢？

# java - 在共享偏好中保存意图

> ID：11956271
> 
> 赞同：4
> 
> 时间：2012-08-14T15:59:05.237
> 
> 标签：java, android

我有一个应用程序，我可以从中启动手机上安装的其他应用程序，通过长按我得到应用程序选择器，结果我收到一个意图数据，我如何保存它以便用户在关闭时返回我的应用程序有相同的快捷方式设置吗？

我保存其他类似的东西

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
  SharedPreferences.Editor editor = settings.edit();
  editor.putInt("Counter1", counter);
  editor.putBoolean("FirstRun", firstRun);
  editor.putString("Label2", label2S);

  editor.commit(); 
```

但我不能这样做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:48:35.833

好的，我找到了一种方法来保存这样的意图

```
SharedPreferences settings = getSharedPreferences(PREFERENCES, 0);
                SharedPreferences.Editor editor = settings.edit();
                String uriString = data.toUri(requestCode); 
                editor.putString("Contacts_app", uriString);
                editor.commit(); 
```

然后我像这样检索它

```
SharedPreferences settings = getSharedPreferences(PREFERENCES, 0);
    String contactsApp = settings.getString("Contacts_app", null);
    try {
        telApp = Intent.parseUri(contactsApp, 0);
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:03:32.510

您可以将对象序列化为字符串，并将生成的字符串保存在首选项中。一种简单的方法是将其序列化为 json 格式，例如使用[Google Gson](http://code.google.com/p/google-gson/)。

# json - JBoss中Jettison和Jackson的区别

> ID：11956274
> 
> 赞同：13
> 
> 时间：2012-08-14T15:59:21.433
> 
> 标签：json, jackson, jboss7.x, jettison, badgerfish

**在Jackson**上使用 RestEasy JSON Provider Jettison（**Badgerfish 映射**）之间的根本区别是什么？

 **使用其中一个的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T13:49:10.973

杰蒂森老了。

Jackson 可以说是处理 JSON 的标准 Java 库。杰克逊包含在 Glassfish 中。

还有一些开发人员警告我不要使用 Badgerfish。

您可以在 Resteasy 中实现 Jackson，请参见[此处。](http://docs.jboss.org/resteasy/docs/1.1.GA/userguide/html/json.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:46:33.507

[http://wiki.fasterxml.com/JacksonFAQ#Which_mappings_.28Badgerfish.2C_natural.2C_....29_does_Jackson_implement.3F](http://wiki.fasterxml.com/JacksonFAQ#Which_mappings_.28Badgerfish.2C_natural.2C_....29_does_Jackson_implement.3F)

Jackson 实现了哪些映射（Badgerfish、natural、...）？

没有任何。Jackson 是“100% JSON”，不会试图模仿或模仿 XML。属性名称映射基于标准 Java Bean 命名约定（尽管可以使用注释或自定义命名策略覆盖）。

有一些支持兼容性特性——例如可以选择使用 JAXB 注释的能力——但从根本上说，Jackson 是一个纯 JSON/Java 数据映射器，并试图最小化 JSON 和 Java 数据模型之间的阻抗。**

# colors - 使用 NSCoder 保存颜色？

> ID：11956282
> 
> 赞同：1
> 
> 时间：2012-08-14T15:59:28.533
> 
> 标签：colors, nscoder

如何使用 NSCoder 保存（我的意思是编码和解码）颜色，例如 ccc3、ccc4 等？

好像不支持。我能够解决它的唯一方法是保存整数，然后当我需要颜色时，我会从整数生成它们。

有没有使用 NSCoder 保存 ccc3、ccc4 颜色的正式方法？

即，我想保存；

```
ccColor4B topColor;
ccColor4B bottomColor; 
```

但似乎没有办法用 NSCoder 对它们进行编码或解码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:47:11.473

现在没关系，我会继续对整数进行编码/解码，然后在我的代码中处理颜色。

# android - 将字符串日期转换为另一种日期格式

> ID：11956283
> 
> 赞同：0
> 
> 时间：2012-08-14T15:59:35.723
> 
> 标签：android, simpledateformat

我有一个来自服务器的日期格式`01/01/2012 12:00:00PM`，我想将该日期转换为，但是当我尝试解析日期时`ISO8601 format`我不断收到`Parse Exception`

我的代码

```
DateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mmZ");
Date timestamp = null;
try{
    timestamp = format.parse(startDate);

    startDate = format.format(timestamp);
}catch(ParseException e){

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:05:31.993

首先解析您的字符串并使用传入格式创建日期对象。

```
DateFormat format = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss a"); 
```

然后使用您要查找的格式创建另一种日期格式并格式化日期对象。

```
DateFormat format2 = new SimpleDateFormat("yyyy-MM-dd'T'HH:mmZ");

 startDate = format2.format(timestamp); 
```

# windows-firewall - 如何使用自定义组名添加 Windows 防火墙规则？

> ID：11956291
> 
> 赞同：6
> 
> 时间：2012-08-14T16:00:03.103
> 
> 标签：windows-firewall, windows-networking

我知道我可以使用`netsh advfirewall firewall add rule`或`wf.msc`创建新的防火墙规则；但是当我以这种方式创建规则时，它不会有**groupName**，因此我无法同时管理多个规则。

有没有办法为某些防火墙规则指定**组名**？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-07-16T13:21:18.570

以下 Powershell 单行代码为 DisplayName='GTA V' 的规则添加/重命名组名称。适用于 Windows 8+

`Get-NetFirewallRule -DisplayName 'GTA V' | ForEach { $_.Group = 'games'; Set-NetFirewallRule -InputObject $_ }`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T16:11:39.350

好的！我知道我现在应该怎么做 :)
使用`PowerShell`，`WMI COM-Objects`我可以做我想做的事！
这是`ps1`我编写的用于添加防火墙规则的脚本，以便我可以`SQL Server`远程连接到我的。

```
function isFirewallPortOpen {
    param( [int] $port )
    $fw = New-Object -ComObject hnetcfg.fwpolicy2 
    if ($fw.Rules | Where {$_.LocalPorts -eq $port }) {
        return [bool]$true
    } else {
        return [bool]$false
    }
}

function existsFirewallRule {
    param( [string] $name )
    $fw = New-Object -ComObject hnetcfg.fwpolicy2 
    if ($fw.Rules | Where { $_.Name -eq $name }) {
        return [bool]$true
    } else {
        return [bool]$false
    }
}

function addFirewallRule {
    param(
        [string] $name,
        [int] $port,
        [int] $protocol
    )
    $fw = New-Object -ComObject hnetcfg.fwpolicy2 
    if (isFirewallPortOpen $port -or existsFirewallRule $name) {
        Write-Host -ForegroundColor:Red "**Rule Already Exists or Port Already Open."
    } else {
        $rule = New-Object -ComObject HNetCfg.FWRule

        $rule.Name = $name
        $rule.Protocol = $protocol # 6=NET_FW_IP_PROTOCOL_TCP and 17=NET_FW_IP_PROTOCOL_UDP
        $rule.LocalPorts = $port
        $rule.Enabled = $true
        $rule.Grouping = "SQL Server"
        $rule.Profiles = 7 # all
        $rule.Action = 1 # NET_FW_ACTION_ALLOW
        $rule.EdgeTraversal = $false

        $fw.Rules.Add($rule)
        Write-Host -ForegroundColor:Blue "A rule named '$name' has been added to Windows' Firewall."
    }
}

addFirewallRule -name:"Transact SQL Debugger" -port:135 -protocol:6
addFirewallRule -name:"SQL Traffic" -port:1433 -protocol:6
addFirewallRule -name:"SQL Browser Traffic" -port:1434 -protocol:17
addFirewallRule -name:"SQL Analytics Traffic" -port:2383 -protocol:6
addFirewallRule -name:"SQL Broker Traffic" -port:4022 -protocol:6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T02:50:35.470

```
$fw= New-Object -ComObject hnetcfg.fwpolicy2
$fw.rules | ? {$_.name -like "*sql*"} | ft name,grouping
$fw.rules | ? {$_.name -like "*sql*"} | % {$gn="_mssqlservices";$_.grouping = $gn}
$fw.rules | ? {$_.name -like "*sql*"} | ft name,grouping 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-18T00:03:04.463

```
$rule = Get-NetFirewallRule -Name 'nameme'; $rule.Group = 'nameme'; $rule | Set-NetFirewallRule; 
netsh advfirewall firewall show rule name=nameme
netsh advfirewall set allprofiles state on
netsh advfirewall set allgroups on
netsh advfirewall firewall add rule name="nameme" dir=out action=Allow
netsh advfirewall export "C:\temp\WFconfiguration.wfw"
netsh advfirewall import "C:\temp\WFconfiguration.wfw" 
```

注意：您必须先在 Windows 防火墙中创建规则名称，然后更改`nameme`为名称运行 PowerShell 管理员。

对于组名=任何

[![截屏](../Images/02826bdbc78961304c10f2d8ff2d58af.png)](https://i.stack.imgur.com/kRpod.png)

管理 Windows 防火墙现在比以往任何时候都更容易 去下载吧

# c# - 有没有办法使用 C# 压缩分页的 .tiff 文件？

> ID：11956295
> 
> 赞同：0
> 
> 时间：2012-08-14T16:00:31.570
> 
> 标签：c#, compression, tiff

在我的过程结束时，我需要将几个分页的 .tiff 文件图像上传到网站。当我上传文件时，文件需要非常小，500kb 或更少。

问题是，即使我对它们进行了很多调整，但同时能够阅读其中一些文本中的几行文本，它们每个大约 1mb 左右。

我首先调整进入 tiff 文件的所有图像的大小，但这还不够。我需要一种方法来改变它们的质量以减小它们的大小。

C# 可以做到这一点还是我需要第三方软件来做到这一点？

上传的文件必须是 .tiff。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:27:12.057

您没有提供有关数据的太多详细信息，因此只能对您可能需要查看的内容进行一些猜测。

首先，你能放松一些决心吗？可以把图片变小吗？

第二，你能松一些颜色深度吗？当双级或灰度图像就足够时，您是否以彩色格式保存文件？

第三，这些图像有多干净？它们是照片、扫描文件还是什么？如果它们是文本或绘图的扫描文档，则进行一些去除噪声的预处​​理可能会在尺寸上产生显着差异。

最后，你用什么压缩方法保存文件？在大多数情况下，只有有损格式才能为您提供最高程度的压缩。

根据您的跟进：

1）如果你可以做得更小，这当然可以节省大量的存储空间。确定他们需要的**最低可接受分辨率并以此为标准。**

2）如果您需要保留颜色，那么此步骤可能不会那么有效，因为您必须在压缩之前通过算法将图像中使用的颜色的动态范围降低到可接受的水平。如果您不确定这意味着什么，那么您最好完全跳过考虑这一点，除非您可以花时间学习更多关于图像处理和/或使用可以为您简化这一点的图像处理库。

3）我不认为你在你的评论中提到了这个。如果您需要更精确的帮助，您应该更新您的原始问题并添加更多关于您要完成的任务的详细信息。提供一些关于您需要做什么/为什么要做的解释，以帮助确定哪些权衡是有意义的。

4）是的，JPG 是一种有损格式，但我认为您可能会混淆一些不同的东西（或者我可能无法从您的描述中理解您的意图）。如果您首先将原始图像的大小调整为新的 JPG 文件（中间图像文件），那么您正在构建一个 TIFF 文件并将调整大小的 JPG 作为源图像插入到多页 TIFF 中并保存，那么您需要要意识到中间文件中文件如何压缩的过程与TIFF文件中使用的压缩格式不一定有任何关系。根据您用于构建和创建 TIFF 文件的内容，TIFF 中使用的压缩格式是单独完成的，您可能需要在保存该文件时指定这些参数。如果这是你正在做的，

# android - 为什么我的第一个 TextView 不能缩小以容纳第二个？

> ID：11956301
> 
> 赞同：0
> 
> 时间：2012-08-14T16:00:54.703
> 
> 标签：android, textview, android-relativelayout, graphical-layout-editor

尝试`RelativeLayout`在较小的屏幕尺寸上呈现以下内容时。在图形布局编辑器中，第二个`TextView`完全隐藏，但第一个完全展开，显示完整的文本内容。我知道这`TextViews`应该是可滚动的。

有什么方法可以使用`RelativeLayout`并给每个屏幕的相等部分，或者我应该只使用 a `LinearLayout`and use`layout_weight`吗？从 Android 文档中的指导来看，我的印象是应该避免`LinearLayout`使用`RelativeLayout`.

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tv1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:fillViewport="true"
        android:gravity="center"
        android:text="Lorem ipsum dolor sit amet, onsectetur adipiscing elit. Curabitur molestie tempor ante non interdum. Nullam sit amet diam ligula. Suspendisse ultricies commodo felis in rutrum. Lorem ipsum dolor sit amet, onsectetur adipiscing elit. Curabitur molestie tempor ante non interdum. Nullam sit amet diam ligula. Suspendisse ultricies commodo felis in rutrum.Lorem ipsum dolor sit amet, onsectetur adipiscing elit. Curabitur molestie tempor ante non interdum. Nullam sit amet diam ligula. Suspendisse ultricies commodo felis in rutrum."
        android:scrollbars="vertical"
        android:maxlines="100"
        android:textSize="22dp" >
    </TextView>

    <TextView
        android:id="@+id/tv2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tv1"
        android:fillViewport="true"
        android:gravity="center"
        android:scrollbars="vertical"
        android:maxlines="100"
        android:text="Lorem ipsum dolor sit amet, onsectetur adipiscing elit. Curabitur molestie tempor ante non interdum. Nullam sit amet diam ligula. Suspendisse ultricies commodo felis in rutrum. Lorem ipsum dolor sit amet, onsectetur adipiscing elit. Curabitur molestie tempor ante non interdum. Nullam sit amet diam ligula. Suspendisse ultricies commodo felis in rutrum.Lorem ipsum dolor sit amet, onsectetur adipiscing elit. Curabitur molestie tempor ante non interdum. Nullam sit amet diam ligula. Suspendisse ultricies commodo felis in rutrum."
        android:textSize="22dp" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:13:01.537

由于您在第一个 TextView 中使用了“wrap_content”，它会填满所有可用空间，然后就没有空间留给第二个 TextView。如果您希望同时拥有它们，则可以将它们放在具有相同权重的 LinearLayout 中，或者您可以在“layout_height”字段中指定特定大小。PS 如果您希望它们在所有设备上都相同，那么 LinearLayout 是您最好的选择。如果您想添加任何其他相对于它们的小部件，您也可以在 RelativeLayout 中使用 LinearLayout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:49:18.740

*支持*的方式，如果你可以这样称呼的话，将是使用 LinearLayout 和布局权重。另一个答案中的某个人有一个[绝妙的主意](https://stackoverflow.com/a/7784186/403455)。创建一个不可见的视图，将其居中并将两个文本视图放置在该视图的两侧。

也就是说，它*始终*是 50/50 的拆分，并且不会像布局权重那样为您提供足够的灵活性（收缩/增长），但这取决于您的需要。

# string - 为什么要测试这些数字 (2^16, 2^31 ....)

> ID：11956302
> 
> 赞同：6
> 
> 时间：2012-08-14T16:00:56.060
> 
> 标签：string, testing, numbers, integer, long-integer

通过[Elisabeth Hendrickson 的测试启发式备忘](http://testobsessed.com/wp-content/uploads/2011/04/testheuristicscheatsheetv1.pdf)单，我看到了以下建议：

**号码**: 32768 (2^15) 32769 (2^15+ 1) 65536 (2^16) 65537 (2^16 +1) 2147483648 (2^31) 2147483649 (2^31+ 1) 4294967296 (2^32) 4294967297 (2^32+ 1)

有人知道测试所有这些案例的原因吗？我的直觉与开发人员可能使用的数据类型有关（整数、长整数、双精度......）

同样，使用 Strings ：

**长**（255、256、257、1000、1024、2000、2048 或更多字符）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:05:35.853

这些代表边界

**整数**

*   2^15 在有符号 16 位整数的范围内
*   2^16 在无符号 16 位整数的范围内
*   2^31 在有符号 32 位整数的范围内
*   2^32 在无符号 32 位整数的范围内

测试接近公共边界的值测试是否正确处理了溢出（在各种整数类型的情况下算术溢出，或者在可能会溢出缓冲区的长字符串的情况下缓冲区溢出）。

**字符串**

*   255/256 在可以用 8 位表示的数字的范围内
*   1024 在可以用 10 位表示的数字的范围内
*   2048 在可以用 11 位表示的数字的范围内

我怀疑诸如 255、256、1000、1024、2000、2048 之类的建议是基于经验/观察，一些开发人员可能会分配一个他们认为“无论如何都足够大”并且无法检查输入的固定大小的缓冲区. 这种态度导致了[缓冲区溢出攻击](http://en.wikipedia.org/wiki/Buffer_overflow)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T16:05:42.393

这些是接近最大有符号`short`、最大`unsigned short`和相同的边界值`int`。测试它们的原因是发现靠近典型数据类型边界值的错误。

例如，您的代码使用有符号`short`，并且您有一个测试，该测试恰好低于和高于此类类型的最大值。如果第一个测试通过而第二个测试失败，您可以很容易地判断出溢出/截断`short`是原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T16:06:41.257

这些数字是围栏两侧的边界案例（+1、0 和 -1），用于“整体和圆形”计算机数字，它们始终是 2 的幂。这些 2 的幂也不是随机的，代表标准选择对于整数精度 - 为 8、16、32 等位宽。

# asp.net - 具有 IIS Express 奇数重定向行为的 MVC 3

> ID：11956306
> 
> 赞同：1
> 
> 时间：2012-08-14T16:01:11.577
> 
> 标签：asp.net, asp.net-mvc-3, iis, iis-express

我有一个简单的 MVC 3 webapp，最近给我带来了麻烦——而且我看起来似乎没有任何信息可以帮助我。我一直有两个问题似乎与他们的行为方式有关。

在开发中，它在 localhost (http://localhost:53268/) 上开始正常并适用于索引，但在此之外执行任何操作都会使 IIS 返回 404，而忽略任何重定向到应该是正确 URL 的内容。

现在，在生产中，它的行为有所不同。同样，索引页面工作正常，它具有正确的 URL，但任何其他页面（通过链接或直接转到 URL）都会重定向到 localhost (https://localhost/)。对我来说奇怪的是，它在开发中正常工作（给了我通常得到 404 时应该看到的内容），但在其他机器上它完全没有提供任何东西。

我从一个已经离开的同事那里继承了这个，但给了我使用 IIS Express 让它从开发方面工作的建议。这已经在生产中工作了，但现在......不是那么多。

**编辑** global.aspx 文件

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new ElmahHandleErrorAttribute());
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

**编辑** 知道了。事实证明，Web.Config 存在一些问题，而且它所在的服务器弄错了。现在工作正常。

# c# - c#不要在表单加载时调用editValueChanged

> ID：11956307
> 
> 赞同：0
> 
> 时间：2012-08-14T16:01:24.640
> 
> 标签：c#, devexpress, edit

由于我从数据库加载数据并将其放入 FormLoad 上的 DevExpress TextEdit 控件中，因此调用了事件处理程序 TextEdit_EditValueChanged。是否可以在事件处理程序中进行任何检查，或防止引发事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:10:01.923

像这样的东西：

```
bool dataLoaded = false;

private void LoadData()
{
    // do the loading and set the Text property of the textEdit
    dataLoaded = true;
}

private void TextEdit_EditValueChanged(object sender, EventArgs e)
{
    if (dataLoaded == false) return;
    // the code after this comment will run only after the data was loaded
} 
```

或者您可以在加载完成后添加事件处理程序，如下所示：

```
private void LoadData()
{
    // do the loading and set the Text property of the textEdit
    TextEdit.EditValueChanged += TextEdit_EditValueChanged;
}

private void TextEdit_EditValueChanged(object sender, EventArgs e)
{
    // the code after this comment will run only after the data was loaded
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-12T12:17:37.053

使用属性

```
private void TextEdit_EditValueChanged(object sender, EventArgs e)
{
    if (!this.IsLoaded) return;
    // the code after this comment will run only after the data was loaded
} 
```

# ios - 当精灵到达特定位置时破坏焊接接头

> ID：11956312
> 
> 赞同：0
> 
> 时间：2012-08-14T16:01:49.293
> 
> 标签：ios, cocos2d-iphone, box2d, physics, box2d-iphone

我在我的代码中的两个精灵之间创建了一个weldJoint（参见下面的更新方法），我还创建了一个方法，该方法在释放mouseJoint 时返回精灵的确切位置。我想将精灵的当前位置与 spritePositionRelease 值进行比较，如果 y 值相同而 x 值不同，则销毁weldJoint。请帮忙。

spritePositionRelease：

```
- (CGPoint)spritePositionRelease    {

for(b2Body *b = mouseJoint->GetBodyB(); b; b=b->GetNext())    {
    if (b->GetUserData() != NULL)
    {
        CCSprite *mySprite = (CCSprite*)b->GetUserData();
        if (mySprite.tag == 1) {
            mySprite.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);
            CGPoint spritePosition = mySprite.position;
            CCLOG(@"the sprite position is x:%0.2f , y:%0.2f", spritePosition.x, spritePosition.y);

            return spritePosition;

        }
    }
}
} 
```

ccTouchesEnd:

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

if (mouseJoint)
{
    [self spritePositionRelease];

    world->DestroyJoint(mouseJoint);
    mouseJoint = NULL;
}
} 
```

更新：

```
-(void) update: (ccTime) dt
{
//It is recommended that a fixed time step is used with Box2D for stability
//of the simulation, however, we are using a variable time step here.
//You need to make an informed choice, the following URL is useful
//http://gafferongames.com/game-physics/fix-your-timestep/

int32 velocityIterations = 8;
int32 positionIterations = 1;

// Instruct the world to perform a single step of simulation. It is
// generally best to keep the time step and iterations fixed.
world->Step(dt, velocityIterations, positionIterations);

// using the iterator pos over the set
std::set<BodyPair *>::iterator pos;

for(pos = bodiesForJoints.begin(); pos != bodiesForJoints.end(); ++pos)
{
    b2WeldJoint         *weldJoint;
    b2WeldJointDef      weldJointDef;

    BodyPair            *bodyPair = *pos;
    b2Body              *bodyA = bodyPair->bodyA;
    b2Body              *bodyB = bodyPair->bodyB;

    weldJointDef.Initialize(bodyA,
                            bodyB,
                            bodyA->GetWorldCenter());

    weldJointDef.collideConnected = false;
    weldJoint = (b2WeldJoint*) world->CreateJoint(&weldJointDef);

    // Free the structure we allocated earlier.
    free(bodyPair);

    // Remove the entry from the set.
    bodiesForJoints.erase(pos);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:40:07.557

你确定 mouseJoint->GetBodyB() 总是会返回正确的身体吗？也许你应该检查 mouseJoint->GetBodyA() 到？

无论如何，您的检查将非常简单：

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

if (mouseJoint)
{
   CGPoint releasePoint = [self spritePositionRelease];
   CGPoint touchPoint = [[touches anyObject] locationInView:[[touches anyObject] view]];
   if((releasePoint.y==touchPoint.y) &&(releasePoint.x!=touchPoint.x))
   {
//Destroy weld joint
   }
    world->DestroyJoint(mouseJoint);
    mouseJoint = NULL;
}
} 
```

# php - PHP file_get_contents 使用变量

> ID：11956314
> 
> 赞同：1
> 
> 时间：2012-08-14T16:01:57.400
> 
> 标签：php, javascript, jquery, file-get-contents

我正在尝试使用 file_get_contents 发送 javascript 文件的内容。我遇到的问题是 javascript 包含一些 PHP 变量：

```
<script>
jQuery('document').ready(function($){
    $('a.ajax_link').click(function(){
        $.ajax({
            type: 'DELETE',
            url: '/groups/$org_ID/leave/$member_ID',

            success: function(data){
                var data = $('<div>').html(data);
                var msg1 = data.find('#msg1');

                $('#data_box1').html(msg1).hide().fadeIn(500).delay(2000).fadeOut(500);
                setTimeout('window.location.href =\"/groups/\"',3000);
            }
        });

    });
});
</script> 
```

具体来说，就是 url: 行。那只是纯文本，所以我的脚本失败了。我现在明白这是 file_get_contents 的行为，但我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:08:53.240

使用输出缓冲和`require`：

```
$org_ID = 5;
$member_ID = 10;
ob_start();
require '/path/to/javascript_file.php';
$js_code = ob_get_clean(); 
```

在 javascript 文件中，您必须使用 php 标签：

```
url: '<?php echo "/groups/$org_ID/leave/$member_ID"; ?>' 
```

# drupal-6 - 在drupal 6中向视图添加日期过滤器

> ID：11956317
> 
> 赞同：0
> 
> 时间：2012-08-14T16:02:03.893
> 
> 标签：drupal-6

我正在使用视图 api 来显示某个节点列表。现在我想添加一个日期过滤器，以便它有助​​于过滤在开始日期和结束日期之间创建的节点。我的日期也应该包含时间信息以进一步完善它。我怎样才能做到这一点？基本上，我想公开一个日期过滤器开始和结束日期，它将过滤显示的节点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:11:50.940

您可以添加“节点修订：创建日期”作为过滤器，并可以公开过滤器。这样过滤器就会出现在前端，使用它我们可以显示在两个给定日期之间创建的节点。

# regex - 密码验证reg exp

> ID：11956320
> 
> 赞同：0
> 
> 时间：2012-08-14T16:02:12.253
> 
> 标签：regex, passwords

我需要一个密码的正则表达式来满足以下要求：

*   它必须至少有 6 个字符长
*   必须有 1 个数字字符
*   第一个和最后一个字符必须是字母字符
*   没有特殊字符

我发现了一些接近于此的表达式，但没有一个符合我的需要。您能提供的任何帮助将不胜感激。

我已经尝试过了，但它不太符合要求：

```
^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:12:11.613

*   断言一个字符串有 6 个或更多字符：

    `(?=.{6,})`

*   断言一个字符串至少有 1 个数字字符：

    `(?=.*\d)`

*   在第一个和最后一个位置匹配一个字母字符：

    `^[A-Za-z].*[A-Za-z]$`

结合以上所有，产生以下最终表达式：

```
(?=.{6,})(?=.*\d)[A-Za-z][A-Za-z0-9]*[A-Za-z] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:09:19.910

尝试这样的事情

```
(?=.*\d)^[A-Za-z][0-9A-Za-z]{4,}[A-Za-z]$ 
```

或者如果你只想要一个数字，那就是这个

```
(?=[^\d]*\d[^\d]*$)^[A-Za-z][0-9A-Za-z]{4,}[A-Za-z]$ 
```

# jquery - 1.7.2 中的顺序 jQuery 动画

> ID：11956323
> 
> 赞同：1
> 
> 时间：2012-08-14T16:02:36.140
> 
> 标签：jquery, jquery-animate

我在使用 jQuery 1.7.2 触发顺序动画时遇到问题。这里还有很多关于这个的其他问题，但如果你使用最新版本的 jQuery 暗示 API 发生了变化，它们似乎都被打破了。

我有零对多的元素，我想按顺序对淡入淡出进行动画处理。我当前的代码看起来像：

```
var divs = $('div');
divs.css('opacity',0);
divs.animate({
  opacity: 1
},{
  duration: 1000,
  queue: 'myQueue'
}); 
```

随着 jQuery 1.7 引入命名队列，我有点天真地假设这会将每个元素的动画排队到命名队列中然后执行它，但显然这不起作用。

你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:09:56.553

试试这个 -[**演示**](http://jsfiddle.net/QVVzE/1/)

```
$('div').each(function(i) {
    $(this).delay((i + 1) * 1000).fadeIn(1000);
}); 
```

# apache - 使用 Pubby / Apache Tomcat 显示主页

> ID：11956327
> 
> 赞同：0
> 
> 时间：2012-08-14T16:02:44.340
> 
> 标签：apache, tomcat, tomcat6

当 Pubby 是 Apache Tomcat 的根目录时，有谁知道如何显示自定义主页？

我当前的设置是`\Tomcat 6.0\webapps\ROOT\`<- Pubby 文件夹`WEB-INF`并且`static`在这个文件夹中。

虽然为例如创建自定义页面`localhost:8080/About`完全没问题，（我只是在我的 webapps 文件夹中创建一个名为“About”的文件夹，并将我的 index.html 放在那里），但我不知道如何获取自定义 index.html 以显示何时我导航到`localhost:8080`

我尝试在我的目录中粘贴 index.html 文件，但`localhost:8080`无法解决其中任何一个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:40:00.117

的索引文件`http://localhost:8080/`将在 $CATALINA_BASE/webapps/ROOT/WEB-INF/web.xml 中定义，默认值取自 $CATALINA_BASE/conf/web.xml

假设 ROOT 应用程序没有指定任何欢迎页面，那么放置在 $CATALINA_BASE/webapps/ROOT/index.html 的 index.html 应该可以解决问题。

# javascript - Facebook 分享按钮返回空 url

> ID：11956332
> 
> 赞同：0
> 
> 时间：2012-08-14T16:03:18.900
> 
> 标签：javascript, facebook-sharer

我想首先说我上次检查时一切正常（比如 2 个月前），但似乎 facebook 对他们的 appi 做了一些改变。

发送回共享表单的 URL 为 NULL，并且计数不再起作用。

[您可以在此页面](http://www.tips4design.com/2010/08/tips-10-tips-that-will-help-you-win-on.html)上看到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:55:50.767

虽然仍然可用，但当 facebook 启动“like”按钮时，FB Share 按钮已被弃用。喜欢按钮包含 URL 的喜欢、分享和消息的总和。FB之类的按钮更容易实现。你可以在这里查看：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# javascript - 在服务器上加载资源失败？

> ID：11956337
> 
> 赞同：0
> 
> 时间：2012-08-14T16:03:25.113
> 
> 标签：javascript

我这里有一个例子来说明我的问题。

[http://www.ttmt.org.uk/forum/k/](http://www.ttmt.org.uk/forum/k/)

它只是一行图像，当您单击它们时，顶部会显示更大的图像。

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>index</title>

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>

      <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">

      <style type="text/css">
        ul#gallery {
            margin:100px 0 0 0;
            background:#333;
            float:left;
            height:550px;
            margin-right:-20000px;
        }
        ul#gallery li{
          display:inline;
        }
        ul#gallery li img{
          float:left;
          opacity:0.5;
          height:100%;
        }
        #header{
          position:fixed;
          margin:20px 0 0 20px;
        }
        #header img,
        #header ul#info{
          float:left;
        }
        #header ul#info{
          margin:5px 0 0 50px;
        }
        #header ul#info li{
          color:#aaa;
          font:.95em/1.5em Helvetica, sans-serif;
        }
        #header ul#info li a{
          color:#aaa;
          text-decoration:none;
        }
        #header ul#info li a:hover{
          color:#333;
          color:orange;
        }
        #header select{
          margin:20px 0 0 50px;
        }
        #lightbox {
            position:fixed; 
            top:0; 
            left:0; 
            width:100%; 
            height:100%; 
            background:url(overlay.png) repeat; 
            text-align:center;
        }
        #lightbox p {
            text-align:right; 
            color:#fff; 
            margin-right:20px; 
            font-size:12px; 
        }
        #lightbox img {
            box-shadow:0 0 15px #111;
            -webkit-box-shadow:0 0 15px #111;
            -moz-box-shadow:0 0 15px #111;
            max-width:940px;
        }
        #content img{
          height:90%;
          max-width:100%;
        }

      </style>

      </head>

    <body>

        <ul id="gallery">
          <li><a href="images/car01.jpg" class="lightbox_trigger"><img src="images/car01.jpg" alt="" /></a></li>
          <li><a href="images/car02.jpg" class="lightbox_trigger"><img src="images/car02.jpg" alt="" /></a></li>
          <li><a href="images/car03.jpg" class="lightbox_trigger"><img src="images/car03.jpg" alt="" /></a></li>
          <li><a href="images/car04.jpg" class="lightbox_trigger"><img src="images/car04.jpg" alt="" /></a></li>
          <li><a href="images/car05.jpg" class="lightbox_trigger"><img src="images/car05.jpg" alt="" /></a></li>
          <li><a href="images/car06.jpg" class="lightbox_trigger"><img src="images/car06.jpg" alt="" /></a></li>
          <li><a href="images/car07.jpg" class="lightbox_trigger"><img src="images/car07.jpg" alt="" /></a></li>
        </ul>

    <script>

      jQuery(document).ready(function($) {

        $('#gallery img').hover(function(){
          $(this).css('opacity',1);
        })
        $('#gallery img').hover(
          function () {
            $(this).css('opacity',1)
          }, 
          function () {
            $(this).css('opacity',.5);
          }
        );

        $('.lightbox_trigger').click(function(e) {
            e.preventDefault();
            var image_href = $(this).attr("href");
            if ($('#lightbox').length > 0) {
                $('#content').html('<img src="' + image_href + '" />');
                $('#lightbox').fadeIn('1000');
            }
            else { 
                var lightbox = 
                '<div id="lightbox">' +
                    '<div id="content">' + 
                        '<img src="' + image_href +'" />' +
                    '</div>' +  
                '</div>';
                $('body').append(lightbox);
            }

        });

        $('#lightbox').live('click', function() { 
            $('#lightbox').hide();
        });

      });
      </script>
    </body>

    </html> 
```

一切都在这里工作，但我希望图像是随机的。

我在这里有一个示例，其中使用此 javascript 从数组中随机添加图像

```
 <script type="text/javascript">

      var numImages = 6;

      var images_Arr = ['images/car01.jpg','images/car02.jpg','images/car03.jpg','images/car04.jpg','images/car05.jpg',
      'images/car06.jpg','images/car07.jpg','images/car08.jpg','images/car09.jpg','images/car10.jpg']

      function firstImg(){
        for(i=1; i<numImages; i++){
          var ranNum = Math.floor(Math.random()*images_Arr.length);
          var img = images_Arr[ranNum];
          document.write("<li><a href=" +img+ " class='lightbox_trigger'><img src=" +img+ "/></a></li>");
          images_Arr.splice(ranNum,1);
        }
      }    

    </script> 
```

[http://www.ttmt.org.uk/forum/k/index1.html](http://www.ttmt.org.uk/forum/k/index1.html)

在此示例中，图像不会加载，但如果您单击块，则会加载更大的图像。

在本地这工作正常。

Safari 中的错误控制台显示 - 加载资源失败：服务器响应状态为 404（未找到）

谁能解释为什么它在本地工作而不是在服务器上工作？

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>index</title>

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>

      <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">

      <style type="text/css">
        ul#gallery {
            margin:100px 0 0 0;
            background:#333;
            float:left;
            height:550px;
            margin-right:-20000px;
        }
        ul#gallery li{
          display:inline;
        }
        ul#gallery li img{
          float:left;
          opacity:0.5;
          height:100%;
        }
        #header{
          position:fixed;
          margin:20px 0 0 20px;
        }
        #header img,
        #header ul#info{
          float:left;
        }
        #header ul#info{
          margin:5px 0 0 50px;
        }
        #header ul#info li{
          color:#aaa;
          font:.95em/1.5em Helvetica, sans-serif;
        }
        #header ul#info li a{
          color:#aaa;
          text-decoration:none;
        }
        #header ul#info li a:hover{
          color:#333;
          color:orange;
        }
        #header select{
          margin:20px 0 0 50px;
        }
        #lightbox {
            position:fixed; 
            top:0; 
            left:0; 
            width:100%; 
            height:100%; 
            background:url(overlay.png) repeat; 
            text-align:center;
        }
        #lightbox p {
            text-align:right; 
            color:#fff; 
            margin-right:20px; 
            font-size:12px; 
        }
        #lightbox img {
            box-shadow:0 0 15px #111;
            -webkit-box-shadow:0 0 15px #111;
            -moz-box-shadow:0 0 15px #111;
            max-width:940px;
        }
        #content img{
          height:90%;
          max-width:100%;
        }

      </style>

      <script type="text/javascript">

        var numImages = 6;

        var images_Arr = ['images/car01.jpg','images/car02.jpg','images/car03.jpg','images/car04.jpg','images/car05.jpg',
        'images/car06.jpg','images/car07.jpg','images/car08.jpg','images/car09.jpg','images/car10.jpg']

        function firstImg(){
          for(i=1; i<numImages; i++){
            var ranNum = Math.floor(Math.random()*images_Arr.length);
            var img = images_Arr[ranNum];
            document.write("<li><a href=" +img+ " class='lightbox_trigger'><img src=" +img+ "/></a></li>");
            images_Arr.splice(ranNum,1);
          }
        }    

      </script>

      </head>

    <body>
        <div id="header">

        </div>

        <ul id="gallery">
          <script type="text/javascript">
            window.onload = firstImg();
          </script>
        </ul>

    <script>

      jQuery(document).ready(function($) {

        $('#gallery img').hover(function(){
          $(this).css('opacity',1);
        })
        $('#gallery img').hover(
          function () {
            $(this).css('opacity',1)
          }, 
          function () {
            $(this).css('opacity',.5);
          }
        );

        $('.lightbox_trigger').click(function(e) {
            e.preventDefault();
            var image_href = $(this).attr("href");
            if ($('#lightbox').length > 0) {
                $('#content').html('<img src="' + image_href + '" />');
                $('#lightbox').fadeIn('1000');
            }
            else { 
                var lightbox = 
                '<div id="lightbox">' +
                    '<p>Click to close</p>' +
                    '<div id="content">' + 
                        '<img src="' + image_href +'" />' +
                    '</div>' +  
                '</div>';
                $('body').append(lightbox);
            }

        });

        $('#lightbox').live('click', function() { 
            $('#lightbox').hide();
        });

      });
      </script>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:07:36.263

因为在这一行：

```
 document.write("<li><a href=" +img+ " class='lightbox_trigger'><img src=" +img+ "/></a></li>"); 
```

您忘记了图像源的正确字符串终止，请使用：

```
document.write("<li><a href= '" +img+ "' class='lightbox_trigger'><img src= '" +img+ "' /></a></li>"); 
```

# outlook - 如何理解outlook 2007数据存储的命名空间

> ID：11956345
> 
> 赞同：4
> 
> 时间：2012-08-14T16:03:55.790
> 
> 标签：outlook, vsto, outlook-addin, outlook-2007

首先，我是outlook插件开发的新手，最近我从MSDN或其他教程中阅读了一些学习资料，首先让我感到困惑的是，如果我想从收件箱中找到某个**约会**或**会议请求**之类的东西，我应该首先用于`Application.GetNameSpace(“MAPI”)`获取 a`NameSpace`而不是获取某种对象，例如`Folder`或`Appointment`Collections 等。

我不了解加载项开发中 Outlook 2007 的数据存储访问模式。我希望有人可以帮助我更好地了解 Outlook 2007 的数据存储访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:47:32.947

与 Outlook 数据存储交互需要MAPI**[会话。](http://msdn.microsoft.com/en-us/library/office/cc842468.aspx)**[`Application.Session`](http://msdn.microsoft.com/en-us/library/office/ff866436.aspx)可与 互换`Application.GetNamespace("MAPI")`。您可以将会话视为与 Outlook 数据存储的连接。

要检索约会，您可以使用[`Namespace.GetDefaultFolder`](http://msdn.microsoft.com/en-us/library/office/ff866724).

```
Outlook.Folder appointmentStore = Globals.ThisAddIn.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderCalendar) as Outlook.Folder;
string apptSubject = string.Empty;
foreach (Outlook.AppointmentItem appt in appointments.Items.OfType<Outlook.AppointmentItem>())
  apptSubject = appt.Subject; 
```

# c# - 在 C# 中找出调用进程的名称？

> ID：11956353
> 
> 赞同：0
> 
> 时间：2012-08-14T16:04:38.360
> 
> 标签：c#, .net

> **可能重复：**
> [如何以托管方式在 .NET 中获取父进程](https://stackoverflow.com/questions/394816/how-to-get-parent-process-in-net-in-managed-way)

我有一个从另一个 C# 可执行文件调用的 C# 可执行文件。有没有办法确定调用当前正在运行的可执行文件的可执行文件的名称？我想一定有某种方法，但在谷歌搜索时遇到了麻烦。我想我一定使用了错误的术语。

# jquery - Jqplot Gauge Meter 问题

> ID：11956354
> 
> 赞同：0
> 
> 时间：2012-08-14T16:04:39.290
> 
> 标签：jquery, jqplot

我试图在我的仪表板上显示 jqplot 仪表，我设法让一个仪表工作，但我的数据就像需要 4 个不同的仪表，

有谁知道如何绘制超过 1 个 guage ，我的代码如下：

数据 = [20,12,12,23]；

```
 $.each(data,function(key,value) {

    plot3 = $.jqplot('dashboard',[[value]],{
        seriesDefaults: {
            renderer:$.jqplot.MeterGaugeRenderer,
            rendererOptions: {
                min: 0,
                max: 50,
                intervals:[200, 300, 400, 500],
                label: "Pounds",
                intervalColors:['#66cc66', '#93b75f', '#E7E658', '#cc6666']
            }
        }
    });

 });` 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:22:14.733

```
plot1 = $.jqplot('chart_1', [[value]],{
[snip]

plot2 = $.jqplot('chart_2', [[other_value]] ,{
[snip] 
```

在您的 HTML 中：

```
<div id="chart_1" style="height:240px;width:380px;"></div>

<div id="chart_2" style="height:240px;width:380px;"></div> 
```

应该做你。

# asp.net-mvc-3 - 处理服务此请求所需的配置文件期间发生错误

> ID：11956356
> 
> 赞同：0
> 
> 时间：2012-08-14T16:04:48.730
> 
> 标签：asp.net-mvc-3, web-config, iis-7.5

这个错误发生在我身上，我找不到它的原因。唯一发生的更改是一些数据库架构更改，没有任何 webconfig 更改，而且我正在使用自定义角色提供程序，该提供程序在一段时间内没有更改。我收到以下错误页面：

“/”应用程序中的服务器错误。

配置错误

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：调用目标已引发异常。

源错误：

第 55 行： 第 56 行： 第 57 行： 第 58 行： 第 59 行：

源文件：...\web.config 行：57

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

我在某处读到这可能是我的自定义角色提供者的构造函数问题，但到目前为止我无法修复它，所以对于任何想知道以下是构造函数的人：

```
 private IProviderRepository _providerRepository;

    public CustomRoleProvider() : this(new ProviderRepository()){}

    public CustomRoleProvider(IProviderRepository providerRepository)
    {
        _providerRepository = providerRepository;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:55:28.290

似乎在`ProviderRepository`类内部，您正在私有字段中实例化一个新的数据库上下文：

```
internal class ProviderRepository : IProviderRepository 
{ 
    private readonly DatabaseDataContext _dc = new DatabaseDataContext(); 

    public string[] GetUserRoles(string username) { ... } 
} 
```

并且您在 web.config 中错误地为其定义了连接字符串。

# android - 我应该将 ical4j.properties 文件放在 Eclipse Android 项目中的什么位置？

> ID：11956364
> 
> 赞同：1
> 
> 时间：2012-08-14T16:05:31.207
> 
> 标签：android, eclipse, properties-file, ical4j

我有一个独立运行的 Eclipse Android 项目。

[我已经包含了一个名为ical4j](http://wiki.modularity.net.au/ical4j/)的外部库（我已将所需的 jar 文件复制到我的 libs 文件夹中，该文件夹已由 Eclipse 自动添加到 Android Dependencies 中），我可以很好地使用它。嗯，有点。还有另一个问题可能与此有关，也可能无关，但我宁愿为此提出另一个问题。

但是，每当我使用 ical4j 时，它总是抱怨找不到 ical4j.properties 文件。我收到以下错误：

```
08-14 17:45:02.430: I/Configurator(17046): ical4j.properties not found. 
```

Wchich 显然是由 ical4j 的 Configurator.java 文件中的这一行引起的：

```
CONFIG.load(Configurator.class.getResourceAsStream("/ical4j.properties")); 
```

ical4j Wiki 显示该文件应[位于*src*文件夹](http://wiki.modularity.net.au/ical4j/index.php?title=Android)中。但是，这不起作用。

我尝试将文件放在以下项目文件夹中：*src*、*res*、*libs*、*assets*、 Android 根文件夹、*bin*、*bin/res*，甚至放在*src*文件夹内的所有包中。但是没有任何效果。它根本看不到它。

那么这个文件应该在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:29:33.380

信不信由你，问题是在非主线程中创建[CalendarBuilder对象。](http://build.mnode.org/projects/ical4j/apidocs/net/fortuna/ical4j/data/CalendarBuilder.html)来自 ical4j 的 CalendarBuilder 不是线程安全的，因此会导致各种问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T13:34:27.313

您应该将文件夹：“Projectname/target/classes/ical4j.properties”放入文件资源管理器中，而不是IDE。这对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-09T11:23:44.633

在 Eclipse Proton 中，解决方案是将 ical4j.properties 放入*ProjectName* /bin 文件夹中。

# ubuntu - 我可以与不同的操作系统共享 VirtualBox+Ubuntu 12.04/Guest Additions 吗？

> ID：11956371
> 
> 赞同：0
> 
> 时间：2012-08-14T16:05:43.483
> 
> 标签：ubuntu, virtualbox, ubuntu-12.04

我目前在 OS X 上安装了 VirtualBox+Ubuntu/Guest Additions。是否可以与安装在 Windows 上的 VirtualBox 共享我的 vdi？

换句话说，Guest Additions 是专门为 OS X 安装的，还是专门为 Ubuntu 安装的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:23:15.447

我的理解是，它们由设备驱动程序和系统应用程序组成，可优化客户操作系统以获得更好的性能和可用性。在您的场景中，它们特定于 Ubuntu，因此您应该能够使用虚拟机。我想如果硬件有很大不同（例如从 AMD 转移到 Intel），那么可能会有问题。

[此处](http://www.virtualbox.org/manual/ch04.html#idp11962400)的 Virtuabox 文档更详细地讨论了访客添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:45:55.410

以我的经验，虚拟机不是特定于硬件的，它应该适合你。通过简单地导出和导入“设备”（您在菜单中有该选项），我已经成功地将虚拟机从一台机器移动到另一台完全不同的硬件机器。尽管硬件完全不同，但两台机器都运行 Ubuntu，但版本不同。然而，主要的 Virtual Box 层应该完全隐藏真正的操作系统，因此即使在不同的操作系统之间也应该可以正常工作。

因此，您需要做的就是启动 VM Virtual Box，选择您的来宾虚拟机（不要启动它，只需选择它），然后从菜单中：

**文件 -> 导出设备**

并按照说明进行操作。来宾虚拟盒子将保存在您选择的目的地的压缩文件中。

在另一台机器上，执行相同操作，但在菜单中选择：

**文件 -> 导入设备**

并选择您在上一步中准备的来宾虚拟框。

# c++ - for 循环与带有 lambda 的 std::for_each

> ID：11956374
> 
> 赞同：36
> 
> 时间：2012-08-14T16:05:52.430
> 
> 标签：c++, lambda, c++11

让我们考虑一个用 C++11 编写的模板函数，它迭代一个容器。请排除范围循环语法，因为我正在使用的编译器尚不支持它。

```
template <typename Container>
void DoSomething(const Container& i_container)
  {
  // Option #1
  for (auto it = std::begin(i_container); it != std::end(i_container); ++it)
    {
    // do something with *it
    }

  // Option #2
  std::for_each(std::begin(i_container), std::end(i_container), 
    [] (typename Container::const_reference element)
    {
    // do something with element
    });
  } 
```

`std::for_each`for循环与以下方面的优缺点是什么：

一场表演？（我不希望有任何区别）

b) 可读性和可维护性？

在这里我看到了很多缺点`for_each`。它不会接受 c 风格的数组，而循环会。lambda 形式参数的声明非常冗长，无法在`auto`此处使用。是不可能突破的`for_each`。

在 C++11 之前的日子里，反对`for`的论点是需要指定迭代器的类型（不再成立），并且很容易错误地输入循环条件（我在 10 年内从未犯过这样的错误）。

作为结论，我的想法`for_each`与普遍观点相矛盾。我在这里想念什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-15T08:30:22.497

我认为到目前为止，答案还没有涵盖其他一些差异。

1.  a`for_each`可以接受*任何*适当的可调用对象，允许为不同的 for 循环“回收”循环体。例如（伪代码）

    ```
    for( range_1 ) { lengthy_loop_body }    // many lines of code
    for( range_2 ) { lengthy_loop_body }    // the same many lines of code again 
    ```

    变成

    ```
    auto loop_body = some_lambda;           // many lines of code here only
    std::for_each( range_1 , loop_body );   // a single line of code
    std::for_each( range_2 , loop_body );   // another single line of code 
    ```

    从而避免重复并简化代码维护。（当然，在有趣的风格组合中，也可以对`for`循环使用类似的方法。）

2.  另一个不同之处在于跳出循环（在循环中`break`或`return`在`for`循环中）。据我所知，在`for_each`循环中，这只能通过抛出异常来完成。例如

    ```
    for( range )
    {
      some code;
      if(condition_1) return x; // or break
      more code;
      if(condition_2) continue;
      yet more code;
    } 
    ```

    变成

    ```
    try {
      std::for_each( range , [] (const_reference x)
                    {
                      some code;
                      if(condition_1) throw x;
                      more code;
                      if(condition_2) return;
                      yet more code;
                    } );
    } catch(const_reference r) { return r; } 
    ```

    对于具有循环体和函数体（循环周围）范围的对象调用析构函数具有相同的效果。

3.  恕我直言，它的主要好处`for_each`是，当普通迭代效率不高时，可以为某些容器类型重载它。例如，考虑一个包含数据块链表的容器，每个块包含一个连续的元素数组，类似于（省略不相关的代码）

    ```
    namespace my {
      template<typename data_type, unsigned block_size>
      struct Container
      {
        struct block
        {
          const block*NEXT;
          data_type DATA[block_size];
          block() : NEXT(0) {}
        } *HEAD;
      };
    } 
    ```

    那么这种类型的适当前向迭代器将需要在每个增量处检查块的结尾，并且比较运算符需要比较块指针和每个块内的索引（省略不相关的代码）：

    ```
    namespace my {
      template<typename data_type, unsigned block_size>
      struct Container
      {
        struct iterator
        {
          const block*B;
          unsigned I;
          iterator() = default;
          iterator&operator=(iterator const&) = default;
          iterator(const block*b, unsigned i) : B(b), I(i) {}
          iterator& operator++()
          {
            if(++I==block_size) { B=B->NEXT; I=0; }    // one comparison and branch
            return*this;
          }
          bool operator==(const iterator&i) const
          { return B==i.B && I==i.I; }                 // one or two comparisons
          bool operator!=(const iterator&i) const
          { return B!=i.B || I!=i.I; }                 // one or two comparisons
          const data_type& operator*() const
          { return B->DATA[I]; }
        };
        iterator begin() const
        { return iterator(HEAD,0); }
        iterator end() const
        { return iterator(0,0); }
      };
    } 
    ```

    这种类型的迭代器可以与`for`and一起正常工作`for_each`，例如

    ```
    my::Container<int,5> C;
    for(auto i=C.begin();
        i!=C.end();              // one or two comparisons here
        ++i)                     // one comparison here and a branch
      f(*i); 
    ```

    但每次迭代需要两到三个比较以及一个分支。更有效的方法是重载`for_each()`函数以分别循环块指针和索引：

    ```
    namespace my {
      template<typename data_type, int block_size, typename FuncOfDataType>
      FuncOfDataType&&
      for_each(typename my::Container<data_type,block_size>::iterator i,
               typename my::Container<data_type,block_size>::iterator const&e,
               FuncOfDataType f)
      {
        for(; i.B != e.B; i.B++,i.I=0)
          for(; i.I != block_size; i.I++)
            f(*i);
        for(; i.I != e.I; i.I++)
          f(*i);
        return std::move(f);
      }
    }
    using my::for_each;     // ensures that the appropriate
    using std::for_each;    // version of for_each() is used 
    ```

    大多数迭代只需要一次比较，并且没有分支（请注意，分支可能会对性能产生不良影响）。请注意，我们不需要在命名空间中定义它`std`（这可能是非法的），但可以确保适当的`using`指令使用正确的版本。这相当于`using std::swap;`专门`swap()`针对某些用户定义的类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T16:20:29.087

关于性能，您的`for`循环`std::end`反复调用，而`std::for_each`不会。这可能会也可能不会导致性能差异，具体取决于所使用的容器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T18:05:35.707

*   该`std::for_each`版本将只访问每个元素一次。阅读代码的人一看到就知道，因为`std::for_each`在 lambda 中没有什么可以做的事情来弄乱迭代器。在传统的 for 循环中，您必须研究循环体中的异常控制流 ( `continue`, `break`, `return`) 并使用迭代器进行处理（例如，在这种情况下，使用 跳过下一个元素`++it`）。

*   您可以简单地更改 lambda 解决方案中的算法。例如，您可以创建一个访问每个第 n 个元素的算法。在许多情况下，你并不真正想要一个 for 循环，而是一个不同的算法，比如`copy_if`. 使用算法+lambda，通常更易于更改并且更简洁。

*   另一方面，程序员更习惯于传统的 for 循环，因此他们可能会发现 algorithm+lambda 更难阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:17:19.043

首先，我看不出这两者之间有多大区别，因为 for_each 是使用 for 循环实现的。但请注意 for_each 是一个有返回值的函数。

其次，在这种情况下，一旦可用，我将使用范围循环语法，因为无论如何这一天很快就会到来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T17:06:55.127

确实; 在使用 Lambda 表达式的情况下，您必须声明参数类型和名称，因此没有任何收获。

但是只要你想用这个调用一个（命名的）函数或函数对象，它就会很棒。（请记住，您可以通过 . 组合类似函数的东西`std::bind`。）

Scott Meyers 的书（我相信它是[*Effective STL*](http://www.aristeia.com/books.html)）非常清楚地描述了这种编程风格。

# html - 忽略 UIWebView 某些元素的缩放和滚动？

> ID：11956376
> 
> 赞同：1
> 
> 时间：2012-08-14T16:06:00.167
> 
> 标签：html, ios, uiwebview, scroll

我希望能够放大和滚动图像，但不影响浮动在顶部的按钮。这可能吗？

通过设置 html 的视口元标记，我在滚动和缩放方面取得了成功：

```
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.1, minimum-scale=1.1, maximum-scale=1.8, user-scalable=yes"/> 
```

# java - Java 套接字，所有写入的内容都保留在内存中

> ID：11956377
> 
> 赞同：-2
> 
> 时间：2012-08-14T16:06:08.830
> 
> 标签：java, sockets, inputstream, outputstream

我正在使用这样的 ByteArrayOutputStreams 通过套接字发送图像。

```
ImageIO.write(image, "gif", byteArrayO);
       byte [] byteArray = byteArrayO.toByteArray();
       Connection.pw.println("" + byteArray.length);
       int old = Connection.client.getSendBufferSize();
       Connection.client.setSendBufferSize(byteArray.length);
       Connection.client.getOutputStream().write(byteArray, 0, byteArray.length); 
```

一切正常，图像最终像 130kb，我收到它是这样的

```
int nbrToRead = Integer.parseInt(slave.input.readLine().trim());
            int old = slave.socket.getReceiveBufferSize();
            slave.socket.setReceiveBufferSize(nbrToRead);
            byte[] byteArray = new byte[nbrToRead];
            int nbrRd = 0;
            int nbrLeftToRead = nbrToRead;
            while (nbrLeftToRead > 0) {
                int rd = slave.socket.getInputStream().read(byteArray, nbrRd, nbrLeftToRead);
                if (rd < 0)
                    break;
                nbrRd += rd; 
                nbrLeftToRead -= rd;
            }

            ByteArrayInputStream byteArrayI = new ByteArrayInputStream(byteArray);

            BufferedImage img = ImageIO.read(byteArrayI); 
```

它运行良好，但是发送到 java 内存堆的每个图像都会增加 50 mb。我尝试设置接收缓冲区大小，但它仍然保持不变。它在堆中达到最大值，然后停留一段时间然后停止。

如何清除缓冲区，以便在收到字节后将其处理掉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:15:37.340

有几件事浮现在脑海：

*   您可能会保留对对象的引用，而垃圾收集不会清理它。如果正在做这项工作的类是单例，这是一个很常见的问题。
*   确保在您使用的任何 IO 类（如 BufferedInputSteam）上调用 close()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:07:07.320

我发表了评论，但也将其作为答案。

当您创建 in-memory时`BufferedImage`，您必须在完成后调用`flush()`它们。我非常怀疑您的内存泄漏来自于此。

而且，正如 Malached 所说，确保所有内容（BufferedImages、I/O 引用等）都没有`gc`为他们的作品留下任何类型的引用。

`System.gc()`如果不是你的物理内存真的比你的`memory-leak-free`程序小，这不是一个解决方案，所以你必须在自己工作之前尝试它`gc`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:21:18.387

我愿意打赌`Connection`持有`ObjectOutputStream`. 如果这是真的，那么您需要调用`reset()`该流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T17:40:27.160

您还没有向我们展示您的所有方法，但是在等待下一张图像时，您可能已经在范围内拥有大内存局部变量。

尝试这个：

```
// after you've finished with the input, dereference the memory-heavy objects...
byteArray = null;
byteArrayI = null; 
```

此外，您可以通过调用和让​​出线程来“推动”JVM 进行垃圾收集（您不能*将其设为垃圾收集）。*`System.gc()`如果单独归零不起作用，请尝试添加此

```
System.gc(); // "suggest" garbage collection to execute
Thread.yield(); // I have seen this encourage garbage collection to execute 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T16:50:50.687

确保您的对象在发送后被取消引用，因为剩余的引用会将您的图像保留在内存中。您可以通过将该对象的所有实例设置为`null`.

此外，调用`flush()`和`close()`完成后可以极大地帮助您使用内存。

我希望这有帮助！

# android - 在 Android 上使用 Camera API 尽可能快地拍照

> ID：11956378
> 
> 赞同：13
> 
> 时间：2012-08-14T16:06:10.470
> 
> 标签：android, android-camera, surfaceview

**设想：**

我需要尽快拍照并将其保存到 SD 卡中。如果我能在大约 0.2 秒内完成拍照和保存，那就太棒了。

**到目前为止我做了什么：**

像往常一样，我创建了一个 SurfaceView 来处理相机预览并初始化相机对象。图像的质量不需要非常高，这就是为什么我没有使用尽可能大的分辨率，也不需要自动对焦。我这样设置参数：

```
 Parameters parameters = camera.getParameters();
 parameters.set("jpeg-quality", 70);

 parameters.setPictureFormat(ImageFormat.JPEG);
 List<Camera.Size> sizes = parameters.getSupportedPictureSizes();
 Size size = sizes.get(Integer.valueOf((sizes.size()-1)/2)); //choose a medium resolution
 parameters.setPictureSize(size.width, size.height);
 camera.setParameters(parameters);
 camera.setDisplayOrientation(90);

 List<Size> sizes2 = parameters.getSupportedPreviewSizes();
 Size size2 = sizes.get(0);

 parameters.setPreviewSize(size2.width, size2.height);
 camera.setPreviewDisplay(holder);
 camera.startPreview(); 
```

我非常简单地将图像保存到 SD 卡：

```
PictureCallback handlePictureStorage = new PictureCallback() {
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            FileOutputStream outStream = null;

            try {
                outStream = new FileOutputStream(String.format("/sdcard/%d.jpg", System.currentTimeMillis()));
                outStream.write(data);
                outStream.close();       
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
            }
        }
    }; 
```

在我的 Galaxy Nexus 上进行了一些测试后，结果如下所示：

> *   将图片大小设置为： wigth=1600 height=1200
> *   Jpeg质量：70，图片格式JPEG
> *   火灾拍照时间：00:13:23.603
> *   开始在 SD 卡上保存图片：00:13:23.956
> *   00:13:23.990 完成将图片保存到 SD 卡

这几乎是 0.4 秒。有没有办法进一步调整相机参数以获得更快的速度？分辨率还可以，画质也还行。我知道市场上有每秒 30 张图片的应用程序，但我认为他们使用缓冲来达到这个速度。但是，您可能会看到，拍照而不是将其保存到卡中浪费了最大的时间。如果我能再调整一下就好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T16:10:22.057

在我对多个参数进行了一些测试之后，结论是没有多少工作要做。以下是我设置的一些参数：

```
 //set color efects to none
 cameraParameters.setColorEffect(Camera.Parameters.EFFECT_NONE);

  //set antibanding to none
 if (cameraParameters.getAntibanding() != null) {
 cameraParameters.setAntibanding(Camera.Parameters.ANTIBANDING_OFF);
 }

 // set white ballance
 if (cameraParameters.getWhiteBalance() != null) {
 cameraParameters.setWhiteBalance(Camera.Parameters.WHITE_BALANCE_CLOUDY_DAYLIGHT);
 }

  //set flash
 if (cameraParameters.getFlashMode() != null) {
 cameraParameters.setFlashMode(Camera.Parameters.FLASH_MODE_OFF);
 }

  //set zoom
 if (cameraParameters.isZoomSupported()) {
 cameraParameters.setZoom(0);
 }

 //set focus mode
 cameraParameters.setFocusMode(Camera.Parameters.FOCUS_MODE_INFINITY); 
```

但是，最好的办法是获取相机支持的参数的完整字符串列表，并尝试调整它们。获取字符串，使用Camera.Parameters的flatten方法——http: [//developer.android.com/reference/android/hardware/Camera.Parameters.html#flatten](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#flatten) ()

但是为了真正快速地获取图像，我不得不使用带缓冲区的预览，并且对于拍摄的每一帧，尝试将其保存在线程中的 sd 卡上。图片质量不是很好，但它是一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:12:29.143

如果质量无关紧要，也许你可以考虑使用 JPEG 以外的东西并比较执行时间：http: [//developer.android.com/reference/android/graphics/ImageFormat.html](http://developer.android.com/reference/android/graphics/ImageFormat.html)

# activemq - 如何从 ActiveMQ 代理获取主题列表？

> ID：11956379
> 
> 赞同：1
> 
> 时间：2012-08-14T16:06:09.940
> 
> 标签：activemq

我在 ActiveMQ 教程中找到了这个：http: [//activemq.apache.org/how-can-i-get-a-list-of-the-topics-and-queues-in-a-broker.html](http://activemq.apache.org/how-can-i-get-a-list-of-the-topics-and-queues-in-a-broker.html)

但我真的不知道如何获得主题。你能给我一个例子吗，我的意思是，以编程方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:34:07.187

答案在一定程度上取决于您要在这里做什么。ActiveMQ 具有广泛的[JMX API](http://activemq.apache.org/jmx.html)用于监控管理代理，有大量关于使用它们列出队列和主题的文章，谷歌快速搜索找到[了这个](http://java.dzone.com/articles/managing-activemq-jmx-apis)。如果您不想使用 JMX， 也可以利用 ActiveMQ 的[咨询主题。](http://activemq.apache.org/advisory-message.html)

# apache-flex - SWF 加载 SWF 未连接到 Internet

> ID：11956383
> 
> 赞同：0
> 
> 时间：2012-08-14T16:06:22.953
> 
> 标签：apache-flex, flash

所以我正在构建一个包含 3 个其他 swf 文件的主 swf 文件。住在主人的 3 个需要使用代理 + url + nocache 连接到互联网

在本地，当我制作/编译包含其他 3 个的主 swf 文件时，这 3 个中的每一个也可以正常工作。但是当我把它放在我们使用代理的播放器上时，它给了我一个沙盒错误 2048。

请指教。谢谢你。

编辑：本地意味着：当我编译和调试或当我在我的机器上的浏览器中打开 swf 时（它工作）

把它放在我们的播放器上：我们有一个基于 LINUX 的播放器，它获取主 swf 文件并使用代理在浏览器中运行它。

错误类型：安全错误-气泡：假-取消：假-事件阶段：2-错误#2048

是的 3 个 swf 文件之一尝试获取 twitter 提要，我已将 Security.loadPolicyFile("http://www.twitter.com/crossdomain.xml") 添加到运行所有 3 个的主 swf 和一个特定于推特。

# python - 使用 virtualenv 时 django settings.py 中 TEMPLATE_DIRS 的路径是什么

> ID：11956385
> 
> 赞同：9
> 
> 时间：2012-08-14T16:06:32.063
> 
> 标签：python, virtualenv

我正在使用 virtualenv，我想知道`TEMPLATE_DIRS`in`settings.py`应该是什么，例如，如果我在项目文件夹的根目录中创建了一个模板文件夹。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T17:03:00.640

您需要指定模板文件夹的绝对路径。始终使用正斜杠，即使在 Windows 上也是如此。

例如，如果您的项目文件夹是“/home/djangouser/projects/myproject”（Linux）或“C:\projects\myproject\”（Windows），那么您的 TEMPLATE_DIRS 如下所示：

```
 # for Linux
    TEMPLATE_DIRS = (
        '/home/djangouser/projects/myproject/templates/',
    )

    # or for Windows; use forward slashes!
    TEMPLATE_DIRS = (
        'C:/projects/myproject/templates/',
    ) 
```

或者，您可以使用指定的 PROJECT_ROOT 变量并通过将其与模板文件夹的相对路径连接来生成绝对路径。这样做的好处是，如果您将项目复制到不同的位置，您只需要更改 PROJECT_ROOT。您需要导入 os 模块以使其工作：

```
# add at the beginning of settings.py
import os

# ...

TEMPLATE_DIRS = (
    os.path.join(PROJECT_ROOT, 'templates/'),
) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-10-20T04:22:13.870

如果您使用的是较新版本的 Django，您可能必须将其添加到位于 TEMPLATES 下的 settings.py 内的 DIR 列表中。

```
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': ['[project name]/templates'], # Replace with your project name
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-11T20:29:41.230

PROJECT_DIR 尚未定义... PROJECT_DIR 不是变量。它是文件夹“模板”所在的目录/路径。这应该有帮助

```
import os
PROJECT_DIR = os.path.dirname(os.path.dirname(__file__))
TEMPLATE_DIRS = os.path.join(PROJECT_DIR, 'templates') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-30T06:22:47.463

如果您使用的是 Django 1.9，建议使用 BASE_DIR 而不是 PROJECT_DIR。

```
# add at the beginning of settings.py
import os

# ...

TEMPLATE_DIRS = (
    os.path.join(BASE_DIR, 'templates/'),
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-17T07:10:44.983

> **TEMPLATE_DIRS** deprecated 自 Django 1.8 版起，此设置已被弃用。

`deprecated`

```
""" settings.py """

TEMPLATE_DIRS = (
    os.path.join(BASE_DIR, 'templates/'),
) 
```

`correct`

```
""" settings.py """

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [ os.path.join(BASE_DIR, 'templates') ],
        'APP_DIRS': True,
        ...
    },
] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-02-25T12:40:48.217

在 web/settings.py 中添加它为我解决了所有问题。希望它也能帮助你。

```
import os
BASE_DIR = os.path.dirname(os.path.dirname(__file__))
from os.path import join
TEMPLATE_DIRS = (
    join(BASE_DIR,  'templates'),
) 
```

# asp.net - aspx 菜单项链接

> ID：11956386
> 
> 赞同：2
> 
> 时间：2012-08-14T16:06:34.607
> 
> 标签：asp.net, menu, menuitem

我有多个使用母版页的 aspx 页面。（工作正常）现在我想在链接到主母版页的每个 aspx 中添加另一个菜单。

例如，每个 aspx 将有另一个独特的菜单。

我创建了一个独特的菜单项，例如

```
<asp:Menu ID="Menu1" runat="server">
  <Items>
   <asp:MenuItem Text="page1" Value="page1" NavigateUrl="~/page1.aspx"></asp:MenuItem>
   <asp:MenuItem Text="page2" Value="page2" NavigateUrl="~/page2.aspx"></asp:MenuItem>
  </Items>
</asp:Menu> 
```

相同的 aspx 页面将有一个容器，内容将在其中显示

```
 <div id="output"></div> 
```

因此，当单击菜单时，来自 NavigateUrl 的结果将填充到 div 中

我如何将它们连接在一起？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:59:46.740

换一种方法怎么样。与其使用菜单导航到独立的 .aspx 页面并尝试将它们放入 div 中，不如使用[.ascx UserControls](http://msdn.microsoft.com/en-us/library/system.web.ui.usercontrol%28v=vs.100%29.aspx)来代替？

UserControls 允许您在任意数量的其他页面上重复使用同一页面块。同样，您可以将一打它们放在一个页面上并使它们全部不可见。然后您可以使用按钮或单选按钮来控制 ascx 控件的可见性。

只是一个建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:02:11.183

像这样的东西

```
 <asp:MenuItem Text="page1" Value="page1" 
NavigateUrl="~/page1.aspx?value1=abc&value2=pqr"></asp:MenuItem> 
```

**代码背后**：page1.aspx

```
private void Page_Load(object sender, System.EventArgs e)
{
   String getFirstValue = Request.QueryString["value1"];
   String getSecondValue = Request.QueryString["LastName"];
} 
```

这里这些字符串变量从查询字符串中检索值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:15:46.473

根据您需要的不同菜单的数量，您可以在母版页中放置十几个不同的菜单，每个菜单的 visible = false。

然后，每个 Page1.aspx.cs Page_Load 打开它应该显示的菜单的可见性。

# jquery - 居中的 DIV 出现在 IE 的右侧

> ID：11956392
> 
> 赞同：1
> 
> 时间：2012-08-14T16:06:54.270
> 
> 标签：jquery, html, css, jquery-ui

下面的代码在 FF、CH 等中运行良好，但在 IE 中没有居中。它朝向屏幕的右侧。

知道为什么吗？

```
<html>
    <head>
        <title>Sliding DIVs</title>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
        <style>
            * {
                margin:0px;
                padding:0px;
                font-family:arial;
                font-size:12px;
            }
            #cover {
                width:100%;
                height:400px;
                background:#EEEEEE;
                text-align:center;
            }
            #slides {
                width:1024px;
                height:400px;
                margin:0px auto;
            }
            .slide {
                width:1024px;
                height:400px;
                display:none;
                position:absolute;
                border:1px solid #000000;
            }
            .slide img {
                width:1024px;
                height:400px;
            }
            .first {
                display:block;
            }
        </style>
        <script type="text/javascript">
            $(document).ready(function()
            {
                var timeoutId;                                                              //To store timeout id

                var slideImage = function(step)
                {
                    if (step == undefined) step = 1;                                        //If undefined then set default value

                    clearTimeout(timeoutId);                                                //Clear timeout if any

                    var indx = $('.slide:visible').index('.slide');                         //Get current image's index

                    if (step != 0)                                                          //If step == 0, we don't need to do any fadein our fadeout
                    {
                        $('.slide:visible').fadeOut();                                      //Fadeout this slide
                    }

                    indx = indx + step;                                                     //Increment for next slide

                    if (indx >= $('.slide').length)                                         //Check bounds for next slide
                    {
                        indx = 0;
                    }
                    else if (indx < 0)
                    {
                        indx = $('.slide').length - 1;
                    }

                    if (step != 0)                                                          //If step == 0, we don't need to do any fadein our fadeout
                    {
                        $('.slide:eq(' + indx + ')').fadeIn();                              //Fadein next slide
                    }

                    timeoutId = setTimeout(slideImage, 2000);                               //Set Itmeout
                };

                slideImage(0);                                                              //Start sliding

                $('#prev').click(function()                                                 //When clicked on prev
                {
                    slideImage(-1);                                                         //SlideImage with step = -1
                });

                $('#next').click(function()                                                 //When clicked on next
                {
                    slideImage(1);                                                          //SlideImage with step = 1
                });

                $('#stop').click(function()                                                 //When clicked on Pause
                {
                    clearTimeout(timeoutId);                                                //Clear timeout

                    $(this).hide();                                                         //Hide Pause and show Play
                    $('#play').show();
                });

                $('#play').click(function()                                                 //When clicked on Play
                {
                    slideImage(0);                                                          //Start slide image

                    $(this).hide();                                                         //Hide Play and show Pause
                    $('#stop').show();    
                });
            });
        </script>
    </head>

    <body>
        <div id="cover">
            <div id="slides">
                <div class="slide first">1</div>
                <div class="slide">2</div>
                <div class="slide">3</div>
                <div class="slide">4</div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:11:42.673

幻灯片类具有绝对位置并将其移出容器。

添加：

```
#slides {
    position:relative;
} 
```

（如前所述）然后：

```
 .slide {
    left:0px;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:14:33.733

添加这个，这样你就有了一个相对容器`.slides`

```
#slides {
  position: relative;
 } 
```

这是你想要的吗？

[http://jsfiddle.net/CXKSC/2/](http://jsfiddle.net/CXKSC/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:34:33.683

试试这个代码。我认为和@xivo 说的差不多。在 IE 中工作，但幻灯片在过渡时会跳动一点。

```
<html> 
    <head> 
        <title>Sliding DIVs</title> 
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/> 
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script> 
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
        <style> 
            * { 
                margin:0px; 
                padding:0px; 
                font-family:arial; 
                font-size:12px; 
            } 
            #cover { 
                width:100%; 
                height:400px; 
                background:#EEEEEE; 
                text-align:center; 
                position:absolute
            } 
            #slides { 
                width:1024px; 
                height:400px; 
                margin:0px auto; 
            } 
            .slide { 
                width:1024px; 
                height:400px; 
                display:none; 
                position:relative;
                border:1px solid #000000; 
            } 
            .slide img { 
                width:1024px; 
                height:400px; 
            } 
            .first { 
                display:block; 
            } 
            </style> 
    <script type="text/javascript"> 
        $(document).ready(function() 
        { 
            var timeoutId;                                                              //To store timeout id 

            var slideImage = function(step) 
            { 
                if (step == undefined) step = 1;                                        //If undefined then set default value 

                clearTimeout(timeoutId);                                                //Clear timeout if any 

                var indx = $('.slide:visible').index('.slide');                         //Get current image's index 

                if (step != 0)                                                          //If step == 0, we don't need to do any fadein our fadeout 
                { 
                    $('.slide:visible').fadeOut();                                      //Fadeout this slide 
                } 

                indx = indx + step;                                                     //Increment for next slide 

                if (indx >= $('.slide').length)                                         //Check bounds for next slide 
                { 
                    indx = 0; 
                } 
                else if (indx < 0) 
                { 
                    indx = $('.slide').length - 1; 
                } 

                if (step != 0)                                                          //If step == 0, we don't need to do any fadein our fadeout 
                { 
                    $('.slide:eq(' + indx + ')').fadeIn();                              //Fadein next slide 
                } 

                timeoutId = setTimeout(slideImage, 2000);                               //Set Itmeout 
            }; 

            slideImage(0);                                                              //Start sliding 

            $('#prev').click(function()                                                 //When clicked on prev 
            { 
                slideImage(-1);                                                         //SlideImage with step = -1 
            }); 

            $('#next').click(function()                                                 //When clicked on next 
            { 
                slideImage(1);                                                          //SlideImage with step = 1 
            }); 

            $('#stop').click(function()                                                 //When clicked on Pause 
            { 
                clearTimeout(timeoutId);                                                //Clear timeout 

                $(this).hide();                                                         //Hide Pause and show Play 
                $('#play').show(); 
            }); 

            $('#play').click(function()                                                 //When clicked on Play 
            { 
                slideImage(0);                                                          //Start slide image 

                $(this).hide();                                                         //Hide Play and show Pause 
                $('#stop').show();     
            }); 
        }); 
    </script> 
</head> 

    <body> 
        <div id="cover"> 
            <div id="slides"> 
                <div class="slide first">1</div> 
                <div class="slide">2</div> 
                <div class="slide">3</div> 
                <div class="slide">4</div> 
            </div> 
        </div> 
    </body> 
</html> 
```

# php - 当我尝试使用 Memcached 设置值时，为什么总是返回 Memcached::RES_NO_SERVERS？

> ID：11956395
> 
> 赞同：1
> 
> 时间：2012-08-14T16:06:56.347
> 
> 标签：php, memcached

```
$ sudo service memcached start
Starting memcached: memcached.

$ php-shell.sh 
PHP-Shell - Version 0.3.1, with readline() support
(c) 2006, Jan Kneschke <jan@kneschke.de>

>> use '?' to open the inline help 

>> $mc = new Memcached('start')
Memcached::__set_state(array(
))
>> $mc->set('x','y')
false
>> $mc->getResultCode()
20
>> Memcached::RES_NO_SERVERS
20 
```

我已经启动了 memcached，所以大概有一个服务器正在运行，不是吗？我是否需要做其他事情才能找到服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:14:37.067

您需要先连接到服务器...

[http://www.php.net/manual/en/memcached.addserver.php](http://www.php.net/manual/en/memcached.addserver.php)

```
Memcached::addServer('localhost', 11211); 
```

# c++ - C++ SQLite3如何知道选择是否返回0行

> ID：11956397
> 
> 赞同：5
> 
> 时间：2012-08-14T16:07:08.687
> 
> 标签：c++, sqlite

C++ SQLite3如何知道选择是否返回0行

我有一个 SQLite3 的 select 语句，我怎么知道如果在执行 sql 语句后，结果是 0 rows ，没有找到匹配等。

我如何修改我的代码，以便如果找到 0 行，它将不会执行将结果放入向量的部分。

我的代码如下：

```
sqlstatement = "SELECT * from abe_account where department="+quotesql(department)+" AND name="+quotesql(name)+";";

    std::vector< std::vector < std:: string > > result;
    for( int i = 0; i < 4; i++ )
    result.push_back(std::vector< std::string >());

    sqlite3_prepare( db, sqlstatement.c_str() , -1, &stmt2, NULL );//preparing the statement
    sqlite3_step( stmt2 );//executing the statement

    while( sqlite3_column_text( stmt2, 0 ) )
{
    for( int i = 0; i < 4; i++ )
    result[i].push_back( std::string( (char *)sqlite3_column_text( stmt2, i ) ) );
    sqlite3_step( stmt2 );
    counter ++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T16:22:29.140

`sqlite3_step``SQLITE_DONE`当没有（更多）行要处理时返回：

```
int stat = sqlite3_step(stmt2);
if (stat == SQLITE_DONE) {
    // no rows to process
} 
```

记住也要检查错误，例如：

```
if (stat != SQLITE_DONE && stat != SQLITE_ROW) {
    // there's probably a problem
} 
```

您可以[在手册中找到完整的结果代码列表](http://www.sqlite.org/capi3ref.html#SQLITE_ABORT)。

最后，在使用 SQLite3 时应该使用“v2”接口。[从手册](http://www.sqlite.org/capi3ref.html#sqlite3_prepare)：

> 建议所有新程序使用 sqlite3_prepare_v2() 和 sqlite3_prepare16_v2() 接口。保留两个较旧的接口是为了向后兼容，但不鼓励使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:12:44.467

先做一个 SQL Count，如果它返回 0，你可以停止执行，而不需要查询 select 语句。

# java - 正则表达式 - 转义或字符块？

> ID：11956398
> 
> 赞同：3
> 
> 时间：2012-08-14T16:07:19.497
> 
> 标签：java, regex

例如，如果字符串中需要一个问号，那么最好的方法是什么。

```
...[?]... 
```

或者

```
...\?... 
```

例子：

文本`bla?bla`将与模式`bla[?]bla`和`bla\?bla`（`bla?bla`不明显）匹配，但有什么理由使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:48:10.153

没有技术上的理由偏爱其中之一：它们是等价的表达方式。字符类仅用于避免输入反斜杠，因此恕我直言，转义版本“更干净”

然而，原因可能是避免在输入时双重转义斜线。在像 java 这样的语言中，转义版本的文字版本如下所示：

```
// in java you need to escape a backslash with another backslash :(
String regex = "...\\?..."; 
```

可能是正则表达式来自哪里都有类似的问题，并且`[?]`比`\\?`

# for-loop - 是否可以在 CMD 中使用两个空格作为单个分隔符？

> ID：11956402
> 
> 赞同：1
> 
> 时间：2012-08-14T16:07:36.277
> 
> 标签：for-loop, cmd, wmic

我认为这是不可能的，但我希望能够做到这一点，或者可能使用另一种方法......

我有一个批处理文件；

```
for /f "usebackq tokens=*" %%a in (`wmic process get description, commandline`) do (
*Some Code*
) 
```

我需要能够从每一行中获取两个答案，并单独使用它们（基本上，使用描述来检查进程是否正在运行，然后在我杀死进程并完成一些文件清理工作之后，重新加载包括任何命令行参数的原始进程。

我可能需要结束/重新打开的进程的一个输出示例可能是：

```
"C:\some folder\some other folder\some_application" -cmd_parameter                process_name.exe 
```

请注意，描述是由多个空格明确定义的。

所以有没有一种说法

```
for /f "tokens=* delims=  "    <--(The delims is TWO spaces, not space OR space) 
```

另一种可能更好的方法可能是使用特殊字符（即从未在进程或路径中使用的）复制多个空格的所有实例，然后将其用作我的分隔符......虽然我不知道是否这甚至是可能的..

我也对任何替代方法持开放态度，只要我可以获得进程名称（检查预定义的进程列表、exe 的完整路径以及给出的任何命令行参数。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:23:49.767

直接回答您的问题：不，您不能指定 2 个空格作为分隔符。您可以使用 SET 搜索和替换将 2 个空格更改为某个唯一字符，但确定一个永远不会出现在您的描述或命令行中的唯一字符说起来容易做起来难。

更好的选择是将 WMIC 的输出格式更改为 LIST - 每行一个值，格式为`propertyName=Value`. 每个属性值都可以存储在一个变量中，然后当记录了流程的最后一个属性时，您可以使用变量值执行操作。WMIC 输出使用 Unicode，这会导致在每个变量分配的末尾附加一个 CarriageReturn 字符。必须剥离 CarriageReturn 才能获得正确的结果。

```
@echo off
setlocal
for /f "tokens=1* delims==" %%A in ('"wmic process get description, commandline /format:list"') do (
  if "%%A"=="CommandLine" (
    set "cmd=%%B"
  ) else if "%%A"=="Description" (
    set "desc=%%B"
    setlocal enableDelayedExpansion
    set "desc=!desc:~0,-1!"
    set "cmd=!cmd:~0,-1!"
    echo(
    echo Do whatever you need to do with the description and command line.
    echo description=!desc!
    echo command line=!cmd!
    endlocal
  )
) 
```

您需要注意一些事项。

1) 对于同一个图像名称，您可以有多个进程。如果您通过图像名称（描述）杀死一个进程，那么您将删除所有它们。如果你也根据命令行重启它，那么当下一个同名进程被杀死时，它会再次被杀死。最好通过进程 ID 终止进程。

2）如果您知道进程的图像名称（描述），那么您可以使用 WMIC WHERE 子句限制您的输出。

3) WMIC 报告的命令行并不总是可靠的。该进程能够修改作为命令行报告的值。

这是一个检索特定描述的进程 ID 和命令行的解决方案。
*编辑 - 我修复了下面的代码*

```
@echo off
setlocal
for /f "tokens=1* delims==" %%A in ('"wmic process where description='MyApp.exe' get processId, commandline /format:list"') do (
  if "%%A"=="CommandLine" (
    set "cmd=%%B"
  ) else if "%%A"=="ProcessId" (
    set "id=%%B"
    setlocal enableDelayedExpansion
    set "id=!id:~0,-1!"
    set "cmd=!cmd:~0,-1!"
    echo(
    echo Do whatever you need to do with the process id and command line.
    echo process Id=!id!
    echo command line=!cmd!
    endlocal
  )
) 
```

注意 - WMIC WHERE 子句使用 SQL 语法。它可以使用 AND 和 OR 条件使其变得复杂，并且它支持使用 % 和 _ 作为通配符的 LIKE 运算符。我相信当它变得复杂时，整个表达式需要用双引号括起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-25T15:42:04.973

# 前言

我只是想为未来的读者添加这个，因为我遇到了这个问题，我自己解决了它，我认为仅仅展示如何简单地做到这一点会很有用。首先，`dbenham`他的回答是绝对正确的，*“不，你不能指定 2 个空格作为分隔符。”* . 由于您不能直接使用批处理 for 循环来执行此操作，因此您可以简单地制作自己的来完成这项工作。再次`dbenham`是正确的说法

> *“您可以使用 SET 搜索和替换将 2 个空格更改为某个唯一字符”*

这与我所做的有点相似（有一些差异），但为了完整起见，我认为将其记录在案是件好事。问题是，简单地将所有出现的双空格设置为其他字符并不总能解决问题。有时我们有两个以上的空格，而我们真正想要的是用多个空格分隔字符串。我试图在这里解决的问题更像这样（来自 OP）`Ricky Payne`

> *“另一种可能更好的方法可能是使用特殊字符（即从未在进程或路径中使用的）复制多个空间的所有实例，然后将其用作我的分隔符......虽然我不知道如果这是可能的话..”*

答案是这是可能的，而且一点也不难。你所需要的只是能够

A. 遍历字符串的每个字符

B. 区分单空格和双（或更多）空格

C. 遇到双空格时打开标志

D. 将双（或更多）空格转换为可以分隔的特殊字符或字符序列。

# 编码

为此，我编写了代码供自己使用（为清晰起见进行了编辑）：

```
FOR /F "tokens=* delims=*" %%G IN ('<command with one line output>') DO (SET 
"LineString=%%G")
SET /A "tempindex=0"
:LineStringFOR
    SET "currchar=!LineString:~%tempindex%,1!"
    IF "!currchar!"=="" (goto :LineStringFOREND)
    SET /A "tempindex=!tempindex!+1"
    SET /A "BeforeSpacePosition=!tempindex!"
    SET /A "AfterSpacePosition=!tempindex!+1"
    IF NOT "!LineString:~%BeforeSpacePosition%,2!"=="  " (goto :LineStringFOR)
    :LineStringSUBFOR
        IF "!LineString:~%BeforeSpacePosition%,2!"=="  " (
        SET LineString=!LineString:~0,%BeforeSpacePosition%!!LineString:~%AfterSpacePosition%!
        GOTO :LineStringSUBFOR
        ) ELSE (
        SET LineString=!LineString:~0,%BeforeSpacePosition%!;!LineString:~%AfterSpacePosition%!
        GOTO :LineStringSUBFOREND
        )
    :LineStringSUBFOREND
    GOTO :LineStringFOR
:LineStringFOREND
ECHO Final Result is "!LineString!" 
```

因此，如果您的输入（FOR 中命令的输出，或者您可以更改该 FOR 循环以接收字符串）是：

"abcab c"

输出应采用以下格式：

“a;b;c;ab c”

我已经在我自己的代码上对此进行了测试。但是，对于我在这里的回答，我删除了所有评论并更改了一些变量名称以清楚起见。如果在输入命令后此代码不起作用，请随时告诉我，我会更新它，但它应该可以工作。在此处格式化可能会阻止直接复制粘贴。

# 只是为了展示实际发生的事情

程序流程基本上是这样的：

```
FOR each character
:TOP
grab the next character
set a variable to the current index
set another variable to the next index
IF this or the next character are not spaces, goto the TOP
:Check for 2 spaces again
IF this and the next character are both spaces then
    get the string up to (but not including) the current index AS A
    get the string after the current index AS B
    set the string to A+B
    goto Check for 2 spaces again
ELSE we have turned the double or more space into one space
    get the string up to (but not including) the current index AS A
    get the string after the current index AS B
    set the string to A + <char sequence of choice for delimiting> + B
goto TOP to grab the next character
After all characters are looped over
RETURN the string here (or echo it out like I did) 
```

# 额外的

`dbenham`在他对这种方法的回答中说：

> “您可以使用 SET 搜索和替换将 2 个空格更改为某个唯一字符，但确定一个永远不会出现在您的描述或命令行中的唯一字符说起来容易做起来难。”

虽然这在过去可能是正确的，但我承认（至少对于我的方法，如果我在其他情况下错了，请纠正我）你实际上可以使用一个绝对不会出现在你的输入中的分隔符。这是通过使用多字符分隔符来完成的。这不允许您使用标准的 FOR 循环，但是您可以很容易地手动执行此操作。此处对此进行了更深入的描述：

["delims=#+#" - 超过 1 个字符作为分隔符](https://stackoverflow.com/questions/32690206/delims-more-then-1-character-as-delimiter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-21T06:30:19.287

伟大的线程！

这让我开始思考，我想出了一个稍微横向的解决方案，它可能对某人有用，就像对我一样。

由于最初的问题是针对 WMIC 命令的，并且输出可以是 CSV 格式，为什么不通过使用 /format:csv 开关并设置逗号作为分隔符并结合“usebackq”来规避空间处理？

当然，如果来自 WMIC 的数据本身有逗号，但在我只想要 BootOptionOnWatchDog 状态的实例中，这可能不起作用

看起来像这样：

```
FOR /F "usebackq skip=1 tokens=1-31 delims=," %a IN (`%windir%\system32\wbem\wmic computersystem list /format:csv`) DO echo %f 
```

返回：

```
BootOptionOnWatchDog
Normal boot 
```

我结束了使用'skip = 2'，这将返回“正常启动”

顺便说一句，不要经常在这里发帖，因此作为客人发帖，但认为把这个放在这里是谨慎的，因为正是这篇文章帮助我找到了上面的答案。

干杯-史蒂夫（新西兰）

# core-data - ViewController 在自定义初始化后丢失数据

> ID：11956404
> 
> 赞同：0
> 
> 时间：2012-08-14T16:07:40.117
> 
> 标签：core-data, viewcontroller, init

所以这是交易：我有一个名为 FieldFormVC 的自定义 UIViewController。为了呈现它，我将这段代码称为：

```
FieldFormVC *fieldFormVC = [[FieldFormVC alloc] initWithFieldForm:(FieldForm *)[self getForm] andManagedObjectContext: managedObjectContext];
fieldFormVC.trackManager = self;

fieldFormVC.thisTrackNumber = currentScreenIndex;
fieldFormVC.textSize = textSize;

[navigationController pushViewController:fieldFormVC animated:YES]; 
```

其中 [self getForm] 返回一个 FieldForm 对象。initWithFieldForm: andManagedObjectContext: 方法的代码是：

```
-(id)initWithFieldForm: (FieldForm *) f  andManagedObjectContext: (NSManagedObjectContext *) moc
{
    if (self = [super init])
    {
        fieldForm = f;
        managedObjectContext = moc;
    }

    return self;

} 
```

我设置了一些断点，当调用 initWithFieldForm: andManagedObjectContext: 时，参数“f”和“moc”包含实际值。在方法结束时， fieldFormVC 具有它需要的所有值。

现在当它回到第一段代码并调用

```
fieldFormVC.trackManager = self; 
```

fieldFormVC 中的所有值都转到 0x00000000。fieldFormVC 的所有属性都使用@property（非原子，保留）设置，并且它们也是@synthesize'd。

奇怪的是我使用了类似的 initWith.. 方法，结果很好，而且我以前从未见过这个问题。如果有帮助，我将在我的项目中使用 Core Data，而 FieldForm 是我模型中的某个实体。感谢您的任何建议和帮助！

**更新：**

getForm 方法的代码：

```
-(NSObject *) getForm
   {
    WrapperForm *wrapperForm = (WrapperForm *)[[_fetchedResultsController fetchedObjects]objectAtIndex:currentScreenIndex.intValue];

    FieldForm *fieldForm = wrapperForm.fieldForm;
    PictureForm *pictureForm = wrapperForm.pictureForm;

    if (fieldForm != nil)
    {
        NSLog(@"Class: %@", [wrapperForm.fieldForm.class description]);

        return fieldForm;

    }else if(pictureForm != nil)
    {
        NSLog(@"Class: %@", [wrapperForm.pictureForm.class description]);

        return pictureForm;
    }

    return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:58:38.367

`FieldForm`尽管您的方法`getForm`实际上应该返回一个`FieldForm`类，但您正在转换。该方法很可能`getForm`没有返回正确的对象。

# sql - 如何在 Oracle 的包中获取已定义类型的列表？

> ID：11956406
> 
> 赞同：0
> 
> 时间：2012-08-14T16:07:43.410
> 
> 标签：sql, database, oracle, oracle11g

> **可能重复：**
> [关于 PL/SQL 包级记录类型的元数据](https://stackoverflow.com/questions/8804285/metadata-regarding-pl-sql-package-level-record-types)

我在 Oracle 数据库的一些包中定义了一些自定义类型。我需要一个 SQL 查询来从该 Oracle 数据库中获取特定包中所有已定义类型的列表。此外，通过知道一个类型的对象 ID，我想从 Oracle 数据库中获取该类型的所有属性。我需要知道每种类型的完整规范，包括其名称、属性以及每个属性的完整规范，包括名称、类型、位置等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:30:35.687

```
select * from user_types;
select * from user_type_attrs;
select * from user_type_methods;
select * from user_procedures;
select * from user_source; 
```

# javascript - 单击标记时显示丰富的花式框弹出窗口

> ID：11956408
> 
> 赞同：1
> 
> 时间：2012-08-14T16:07:48.363
> 
> 标签：javascript, jquery, html, google-maps-markers, fancybox-2

单击谷歌标记时，我想显示一些信息和一些图像。我正在使用**花式框**来做到这一点，但是否可以用花式框显示此类信息，因为我知道花式框仅用于显示图像。

所以我的问题是：**是否可以显示丰富的花哨的弹出框（可能使用 html 标签）？**

如果是这样怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:05:54.397

简单的答案是肯定的。

使用 fancybox，除了图像，您还可以显示 HTML 元素（内联 HTML 内容）、SWF 电影、Iframe（外部 html 文档）以及 Ajax 请求、PDF、谷歌地图、youtube 或 vimeo 视频等。

如果您想使用 v1.3.4，请访问[http://fancybox.net/](http://fancybox.net/)以获取此类内容的演示（主页）（请参阅这些示例的源代码[http://fancybox.net/js/web.js](http://fancybox.net/js/web.js)）

...或访问[http://fancyapps.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples)如果您想使用 v2.x（页面上有 html 和 js 代码）

# c++ - 如何在 Qt 的 QMenu 中更改带有 CSS 样式表的选定项目的右箭头图像？

> ID：11956412
> 
> 赞同：4
> 
> 时间：2012-08-14T16:07:58.500
> 
> 标签：c++, css, qt, user-interface, qmenu

我的应用程序中有一个 Qt QMenu，由两个级别组成（子菜单的顶层，然后是每个包含操作的子菜单），我们有一个自定义的深灰色样式，菜单背景为灰色，文本颜色为白色，以及右箭头是白色的。当突出显示子菜单项（鼠标悬停）时，项目背景为白色，文本为黑色，我也希望右箭头切换为黑色图像。我正在使用 CSS 样式表来执行此操作。但是，我似乎找不到正确的语法来为项目选择状态设置备用右箭头图像。我的 CSS 看起来像这样：

```
QMenu
{
  background-color: rgb( 24, 24, 24 );
  color: white;
}

QMenu::item:selected
{
  background-color: white;
  color: black;
}

QMenu::right-arrow
{
  image: url(Resources/MenuRight.png);
} 
```

我在上面的代码之后尝试了以下添加（其中`MenuRightSelected.png`是 的反色图像`MenuRight.png`）：

```
QMenu::right-arrow:selected
{
  image: url(Resources/MenuRightSelected.png);
} 
```

和

```
QMenu::item::right-arrow:selected
{
  image: url(Resources/MenuRightSelected.png);
} 
```

这些都不影响显示的 QMenu。有谁知道是否有可能做我所追求的，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:27:02.837

可能您只需要更改 css 文件中项目的顺序。我曾经听说 Qt 从上往下解析 css 文件。更上层的项目会覆盖更下层项目的行为。

# php - PHP中的XML符合换行符

> ID：11956415
> 
> 赞同：1
> 
> 时间：2012-08-14T16:08:08.723
> 
> 标签：php, xml, validation, xsd

我正在生成 XML，其中主要数据来自 xsl 转换（但这不是问题，这只是我不使用 PHP DOM 或 SimpleXML 的原因）。

像这样：

```
$xml =  '<?xml version="1.0" encoding="utf-8"?>' . PHP_EOL;
$xml .= '<rootElement>';

foreach($xslRenderings as $rendering) {
    $xml .= $rendering;
}

$xml .= '</rootElement>'; 
```

生成的 XML 在此处针对其 XSD 进行验证[http://www.freeformatter.com/xml-validator-xsd.html](http://www.freeformatter.com/xml-validator-xsd.html)和此处[http://xsdvalidation.utilities-online.info/](http://xsdvalidation.utilities-online.info/)。

但在这里失败：[http](http://www.xmlforasp.net/schemavalidator.aspx) ://www.xmlforasp.net/schemavalidator.aspx ，

```
Unexpected XML declaration. The XML declaration must be the first node in the 
document, and no white space characters are allowed to appear before it. 
Line 2, position 3. 
```

如果我确实手动删除了 PHP_EOL 产生的换行符并点击返回，它会验证。

我假设这是最后一个模式验证器中的错误。还是 PHP_EOL（或 PHP 中的手动中断）对某些验证器来说是个问题？如果是，如何解决？

我问是因为生成的 XML 将被发送到 .NET 服务，并且最后一个验证器是用 NET 构建的。

**编辑**

XML 看起来像这样，Scheme 可以在这里找到[http://cb.heimat.de/interface/schema/interfaceformat.xsd](http://cb.heimat.de/interface/schema/interfaceformat.xsd)

```
<?xml version="1.0" encoding="utf-8"?>
<dataset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://cb.heimat.de/interface/schema/interfaceformat.xsd">
<production foreignId="1327" id="0" cityId="6062" productionType="3" subCategoryId="7013" keywords="" productionStart="" productionEnd="" url=""><title languageId="1">
...
</production> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:49:17.963

您确实必须将生成的 XML 视为二进制流来了解发生了什么。我会试着解释你应该看什么......

我将向您展示无效 XML 的转储（类似于您的）以帮助说明：

![在此处输入图像描述](../Images/89b6e69559c02b4756c8d1672a59bb6e.png)

前三个字节是字节顺序标记，可能会遇到文本文件和流（在本例中为 UTF-8）。这些字节永远不会导致兼容的 XML 解析器出错，因为它们被用作理解编码方案的提示。

接下来的两个字节（0x0D0A）是 Windows 平台上的新行。这些**应该**会导致任何 XML 解析器无法通过格式良好的规则。根据当前的 XML 1.0 标准，在 XML 声明之前不允许有空格。

在 .NET 上，您会收到如您所描述的错误。Java（基于 xerces）会说一些更神秘的东西：`The processing instruction target matching "[xX][mM][lL]" is not allowed. [2]`

在第一次删除之前删除**任何**空白**`<`**应该可以修复此错误消息。你所要做的就是了解那个空白是如何到达那里的......

根据您的描述，XML PI 在使用 XML 之前似乎以某种方式被丢弃了。

# .net - 如何在 .NET 中检测无效的 unicode 代码点？

> ID：11956417
> 
> 赞同：3
> 
> 时间：2012-08-14T16:08:16.267
> 
> 标签：.net, unicode, invalid-characters

我正在使用一些 PInvoke 调用（特别是`GetWindowText()`），有时我会得到一个字符串，其中包含无效的 Unicode 代码点（可能是由于我正在查看其窗口的程序中的错误）。当我稍后尝试将该字符串写入 XML 时，我得到了一个异常。所以我想事先检查这些无效字符，如果可能的话，将它们从字符串中删除。

不幸的是，我在 .NET 的默认函数中找不到任何可以让我这样做的东西。我错过了什么？

# reporting-services - RDLC：无分页符 - 表格/tablix 中的四个子报告

> ID：11956418
> 
> 赞同：0
> 
> 时间：2012-08-14T16:08:21.553
> 
> 标签：reporting-services, ssrs-2008, reporting, rdlc, rdl

我有一种情况，我必须根据复选框显示四个报告。因此用户可以从四个报告中选择不同的组合。

我的问题是分页符。我尝试了不同的选项（见下文），其中两个选项（选项 1 和 2）根本不提供分页符，无论您是否不想看到该报告，选项 3 是否为每个 tablix 提供分页符。无论该 tablix 中没有要显示的数据，报告都会为每个 tablix 提供空白页面。

使用选项 3，如果我选择要显示的所有报告，那么一切都很完美。

我已经尝试过这些选项

# 选项 1（分页符不起作用）

主 Tablix -> 每行：tablix 每一行内矩形内的所有子报表

# 选项 2（分页符不起作用）

主 Tablix -> 每一行 -> 在 tablix 的每一行内按 ID 分组的另一个 tablix，然后在每个 tablix 内进行子报表。我在每个 tablix 上应用了分页符结尾。

# 选项 3（分页符有效，但为未选择的报告提供空白页）

A List group by ID -> 在此列表的单行中，我为每个子报表按 ID 放置了四个 tablix 组。

选项 3 有效，但为那些未选择的报告提供空分页符。例如，从四个报告中，如果您选择要显示的最后两个报告，那么您将在报告的开头获得两个空白页，第三个报告在第三个报告上，第四个报告在第四个页面上，这是正确的。我尝试使用隐藏的表格和隐藏的组属性来隐藏 tablix，但仍然会出现分页符。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:15:10.030

我已经解决了这个问题。对于那些在同样情况下苦苦挣扎的人，这是我的工作。

我放置了一个列表框，然后连续放置了四个表，并在这些表中放置了子报表。我没有在这里应用任何分页符。我在这里只根据报告选择显示和隐藏表格。

技巧在子报表中。由于每个报告中有很多表格和分组，所以我在每个子报告的末尾放置了一个表格。

此表应该只有一个单元格。我删除了不需要的标题和 2 个额外的列。为此表选择数据集。我不想传递虚拟的空数据集，所以我选择了我的数据集，但我在从父报表传递的参数上创建了分组，它的值为 1。所以现在这个表将只显示 1 个空行。降低桌子的高度。另外，我删除了单元格内文本框的边框。我检查了“最后分页符”选项。在隐藏表达式中，我使用了以下代码来检查在此（当前）报告之后是否有任何可见的报告。如果是，那么不要隐藏这个表意味着你想要分页，否则隐藏它意味着没有分页。

```
=iif(Parameters!AddReport_2.Value,false
,iif(Parameters!AddReport_3.Value,false
,iif(Parameters!AddReport_4.Value,false
,true))) 
```

这个解决方案对我有用。

我很想听听更好的解决方案。

# android - iOS 和 Android 上的 GPS 定位

> ID：11956423
> 
> 赞同：0
> 
> 时间：2012-08-14T16:08:43.833
> 
> 标签：android, ios, gps, coordinates

我对 Android 应用程序的编程经验有限，对于 iOS 完全没有。我未来项目的一部分是让我的应用程序能够在 Android 和 iOS 上使用 GPS 记录当前位置。

GPS 坐标是否可以像谷歌地球那样在两个平台上采用“通用横轴墨卡托”格式？如果没有，有什么方法可以计算出这种格式的坐标吗？

编辑：有没有人知道他们各自的 API 中的函数返回什么格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:37:23.473

API 将提供一个位置对象（`Location`适用于 Android 和`CLLocation`iOS 的类）。两个 API 都有获取纬度和经度的方法，它们是`floats`. 纬度和经度是 WGS84 参考椭球的 GPS 坐标。

如果您需要将这些转换为其他坐标系，则网络中应该有很多参考资料。

# javascript - 在另一个窗口的链接上触发点击事件

> ID：11956425
> 
> 赞同：0
> 
> 时间：2012-08-14T16:08:48.153
> 
> 标签：javascript, jquery, events, click, window

所以我能够使用以下方法在另一个窗口的跨度上触发点击事件：

```
var openerBody = $(window.opener.document.body);
$('.thespan', openerBody).click(); 
```

但是当我将该跨度对象更改为`<a>`标签时，点击触发器停止工作......

有没有办法从`<a>`标签上的另一个窗口触发点击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:15:01.433

有些浏览器不允许您调用`click`标签`a`，以防止您过度操纵用户的浏览器。但是您可以使用该`href`属性来重定向用户。

```
window.location.href = $('.thespan', openerBody).attr('href'); 
```

# iphone - 跟踪分配测试结果 - 看起来好还是不太好？

> ID：11956427
> 
> 赞同：0
> 
> 时间：2012-08-14T16:08:54.673
> 
> 标签：iphone, ios, xcode, ios5

我正在尝试记忆测试我的应用程序。

我已经关注了题为**“恢复您已放弃的内存”的****Organizer - Documentation**文章，但我不确定结果是使我的测试页面好还是坏，或者介于两者之间。

 **（我的测试涉及：导航到第 2 页，返回第 1 页，按“Mark Heap” - 重复 25 次以获得良好的测量结果。）

**附件是我的分配测试的屏幕截图。大多数#Persistent 值为0。但也有一些异常。这些是典型的吗？**

（最后一个 Heapshot，26，是在停止记录后拍摄的，并在跟踪结束时按“Mark Heap” - 如文档中所建议的那样。）

我将非常感谢一些建议。谢谢。

![在此处输入图像描述](../Images/ad07df3d39b226d45f9a3dfdd1b45ab4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:19:35.693

我相信您使用的是 ARC，如果您使用的是 ARC，则无需担心堆，它会处理所有事情。

以下是使用 ARC 时需要牢记[的 Apple 文档中的 9 个简单点：](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

> ARC 强加了一些在使用其他编译器模式时不存在的新规则。这些规则旨在提供一个完全可靠的内存管理模型；在某些情况下，它们只是强制执行最佳实践，在另一些情况下，它们简化了您的代码，或者是您不必处理内存管理的明显推论。如果你违反了这些规则，你会立即得到一个编译时错误，而不是一个在运行时可能会变得明显的细微错误。
> 
> 1.  您不能显式调用 dealloc，或者实现或调用 retain、release、retainCount 或 autorelease。禁止扩展到使用@selector(retain)、@selector(release) 等。
>     
>     
> 2.  如果您需要管理资源而不是释放实例变量，您可以实现一个 dealloc 方法。您不必（实际上您不能）释放实例变量，但您可能需要在系统类和其他未使用 ARC 编译的代码上调用 [systemClassInstance setDelegate:nil]。ARC 中的自定义 dealloc 方法不需要调用 [super dealloc]（它实际上会导致编译器错误）。到 super 的链接是由编译器自动执行的。
>     
>     
> 3.  您仍然可以将 CFRetain、CFRelease 和其他相关功能与 Core Foundation 样式一起使用
>     
>     
> 4.  您不能使用 NSAllocateObject 或 NSDeallocateObject。
>     
>     
> 5.  您使用 alloc 创建对象；运行时负责释放对象。
>     
>     
> 6.  您不能在 C 结构中使用对象指针。您可以创建一个 Objective-C 类来管理数据，而不是使用结构。id 和 void * 之间没有随意转换。
>     
>     
> 7.  您必须使用特殊类型转换来告诉编译器对象的生命周期。您需要这样做才能在作为函数参数传递的 Objective-C 对象和 Core Foundation 类型之间进行转换。有关详细信息，请参阅“管理免费桥接”。</p>
>     
>     
> 8.  您不能使用 NSAutoreleasePool 对象。ARC 提供了 @autoreleasepool 块。这些具有比 NSAutoreleasePool 更高效的优势。
>     
>     
> 9.  您不能使用内存区域。没有必要再使用 NSZone 了——无论如何，现代的 Objective-C 运行时都忽略了它们。**

# java - 如何使用 swing 显示多个参数

> ID：11956428
> 
> 赞同：-1
> 
> 时间：2012-08-14T16:08:59.187
> 
> 标签：java, swing

我有一个必须显示许多参数（50/70）的应用程序，如果所有参数都在 gui 中，它看起来会非常难看。我正在考虑一个按钮，它可以从文件中加载参数值并将它们显示在新的 jpanel 中......我想知道是否有一些标准方法来解决这样的问题，或者是否有人面临同样的问题已经到达更好/更聪明的解决方案。

最好的，西蒙娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:50:31.707

对参数进行分类，然后为每个类别制作 jpanels。

# javascript - 单击链接时添加另一个选项

> ID：11956432
> 
> 赞同：0
> 
> 时间：2012-08-14T16:09:02.970
> 
> 标签：javascript, jquery

我有这个功能，

```
function add_to_team_confirm(a, b) {
    result = window.confirm("Sure?");
    if (result) {
        window.location = "url";
    }
    return result;
} 
```

一旦我点击一个锚标签，我就会调用它，

```
<a href="#" onclick="return add_to_team_confirm(' a ', 'b ');">Add to team</a> 
```

单击此按钮时，将显示一个提示，其中只有两个选项，确定和取消。现在，我想要添加另一个选项，例如使用积分，因为使用积分等功能可以将球员添加到团队中。现在我的问题是，是否可以添加另一个选项？该选项的值是什么，以便在单击它时显示其值，然后单击它后我可以处理我想要的任何进程。我不是很擅长解释，但我希望你能明白。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:11:47.433

对于这样的事情，选项非常灵活。这是使用 jQuery 执行此操作的简单模式：

在您的 onclick 声明中：

```
onclick="handle_team_confirm_click();"

function handle_team_confirm_click() {
    var returnData = add_to_team_confirm(' a ', 'b ');
    var myOptions = {val1 : returnData };
    var mySelect = $('#mySelect');
    $.each(myOptions, function(val, text) {
        mySelect.append(
            $('<option></option>').val(val).html(text)
        );
    });
} 
```

现在你可以得到这样的值：

```
$("#mySelect").click(function() {
    $("#mySelect option:selected").val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:22:28.180

你可以试试 window.showModalDialog

参考资料和有用的页面：

*   [“showModalDialog 方法（窗口）JavaScript” [help.dottoro.com]](http://help.dottoro.com/ljdlgxbu.php)
*   [Google 搜索：“showmodaldialog 示例”](http://www.google.ca/#hl=en&sugexp=efrsh&gs_nf=1&cp=17&gs_id=1t&xhr=t&q=showmodaldialog+example&pf=p&sclient=psy-ab&oq=showmodaldialog+e&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=c8555e532373c719&biw=1680&bih=944)

[[引用历史记录](http://bit.ly/OrHltC)]

# ios - 在 UITableView 中显示数据

> ID：11956433
> 
> 赞同：-2
> 
> 时间：2012-08-14T16:09:12.343
> 
> 标签：ios, uitableview, xib

我有一个用于 iPad 的拆分视图控制器，左侧有一个向下钻取表。我能够填充我的第一个表格视图，当我单击一个单元格时，这会将我带到我的第二个表格视图。我可以使用 NSLog 命令在命令寡妇的表视图输出中看到返回的记录计数和我希望看到的实际数据。我没有看到表格视图中的实际数据。相反，我看到 UITableViewCellAccessoryDisclosureIndicator 返回的每一行但没有实际数据。

我正在使用 xib 文件，并且我已经为要在钻取中显示的产品创建了此文件。在我的 Product.xib 文件中，我将 File's Owner Outlets 作为 productsTableView 链接到产品（我的 UITableView 控件）和链接到 View 的视图。视图的引用插座具有链接到产品的数据源，链接到产品的委托，最后链接到文件所有者的视图。

我在这里错过了什么吗？就像我说的，我把所有的数据都拿回来了，只是没有绑定到网格上。

```
@interface ProductViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> {

NSMutableArray *listOfItems;
NSMutableArray *dataArray;
IBOutlet UITableView *productsTableView;
}

@property(nonatomic, strong) IBOutlet UITableView *productsTableView;

@end

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Set up the cell...
NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
cell.textLabel.text = cellValue;

return cell;
} 
```

为了全面起见，我还将发布此内容，以显示我在哪里获取数据以及我是如何做到这一点的......

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection {

NSError *error = nil;
// Get the JSON data from the website
id result = [NSJSONSerialization JSONObjectWithData:receivedData options:kNilOptions error:&error];

if ([result isKindOfClass:[NSArray class]]) {

    for (NSArray *item in result) {
        NSArray *products = [item valueForKey:@"ProductDescription"];
        [dataArray addObject:products];
        [listOfItems addObject:products];
    }
}
else {
    NSDictionary *jsonDictionary = (NSDictionary *)result;

    for(NSDictionary *item in jsonDictionary)
        NSLog(@"Item: %@", item);
}

[self performSelector:(@selector(refreshDisplay:)) withObject:(self.productsTableView) afterDelay:1.0];
NSLog(@"Finished");
} 
```

我的 NSLog 在这里：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
NSLog(@"Dictionary: %@", dataArray);
return [dataArray count];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:46:48.380

简单的混...

```
 NSString *cellValue = [dataArray objectAtIndex:indexPath.row]; 
```

代替

```
 NSString *cellValue = [listOfItems objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:50:38.837

您正在将`products`（这是一个`NSArray`）添加到`listOfItems`. 稍后`cellForRowAtIndexPath`，您会说`cellValue`( `NSString`) = `[listOfItems objectAtIndex:indexPath.row]`（这可能是一个 `NSArray'）。那将如何运作？

# c# - 动态安装多个 MSI 的 Visual Studio C#

> ID：11956438
> 
> 赞同：0
> 
> 时间：2012-08-14T16:09:42.827
> 
> 标签：c#, visual-studio-2010, windows-installer, installation

我有三个基于 Windows 的应用程序。我需要将它们部署到单个 msi 文件中。前两个文件有点像检查正确的计算机，例如特定的计算机名称和登录用户名。我遇到的问题是如何将所有这三个应用程序部署到一个 msi 文件中。安装过程是这样的： 1：安装窗口应用程序 A 2：如果应用程序没有正确安装，则停止安装并删除应用程序 B 和应用程序 C。但是，如果一切正常，则安装最终的主应用程序，应用程序 C。

附加信息：应用程序 A 和应用程序 B 基本上有点检查计算机的用户名和正确名称，然后将指定的值打印到注册表中。

提前感谢帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:37:37.007

如果您使用的是 VS Setup Project 安装程序，这会比它必须的要困难一些，但不会差太多。

您应该做的第一件事是选择一个“主要”应用程序。该应用程序的安装程序将由用户调用以安装所有三个，并将控制另外两个。

现在，将其他两个应用程序部署到它们的 MSI 文件中。这个过程相对简单；您唯一需要做的就是确保可以使用命令行参数定义安装向导可能需要的任何自定义信息，并且可以以无人值守的方式执行安装。VS Setup Projects 允许这两者；您必须在向导中定义任何自定义字段的参数名称，但鉴于无人值守功能是“免费的”。构建这些 MSI 后，将它们作为要安装的文件添加到主应用程序的主应用程序目录。

现在，您必须在主应用程序的安装程序中定义自定义操作。这是通过创建一个继承自 System.Configuration.Install.Installer 的类，用 RunInstaller 属性装饰它，并将此 Installer 类的项目指定为安装程序的一组自定义操作来完成的。

在 Installer 类中，重写 OnAfterInstall、OnBeforeUninstall 和 OnRollback 方法。在 OnAfterInstall 方法中，调用 Process.Start 以调用带有 /I 选项的 MsiExec.exe 进行安装，传递第一个应用程序的 MSI 的路径和名称，并指定“/q”选项以静默执行安装以及任何必须设置的属性（安装参数；路径、安装级别/组件、应用程序设置等）。对其他应用程序重复此过程，然后使用 OnBeforeUninstall 和 OnRollback 方法重复该过程，但指定 /x 选项以卸载 MSI。

完成后，您应该有一个包含其他两个 MSI 的 MSI，安装时会静默安装其他两个，卸载时会卸载其他两个。对于更高级的安装控制，您可以通过检查处理程序中的 savedState 字典来区分“安装”和“修改/修复”（在修复期间，您应该修复子应用程序而不是尝试重新安装它们），并且您可以在安装过程中使用“组件”对话框使其他两个应用程序的安装成为可选（该信息将传递给自定义操作处理程序，也可用于选择是否将一个或两个 MSI 复制到主应用程序目录）。最后，您可以选择覆盖 OnAfterCommit 并删除 MSI（但如果您这样做，

# c - C: 无效数组*

> ID：11956439
> 
> 赞同：2
> 
> 时间：2012-08-14T16:09:50.030
> 
> 标签：c, void-pointers

我正在使用`openCV`并且需要一些回调函数。这些`callback`函数只接受有限的参数。因此，如果我需要为这些函数提供更多变量，我必须创建一个全局变量并在函数之间转换它。

例如，这里是回调函数：

```
 void mouse_callback(int event, int x, int y, int flags, void* param);
// params : addition parameter, and just one, I need more parameters for this callback.
// but cannot, so make global variable. 
```

而且因为我不应该这样做（制作全局变量），所以我决定制作数组，`(void*)`但我担心 C 无法做到这一点，因为每个成员的大小可能不同。

我的问题是：我们可以制作（void *）的数组吗，如果没有，我该如何克服我的问题：使用回调函数并且不需要制作全局变量。

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:12:19.473

定义一个`struct`能够保存所有必要值并将其地址作为`param`参数传递的：

```
struct my_type
{
    int i;
    char c;
};

void my_mouse_callback(int event, int x, int y, int flags, void* param)
{
    struct my_type* t = param;
} 
```

不确定注册机制是什么，但您需要确保指向的对象的生命`param`周期在回调函数的调用期间有效：

```
struct my_type* mouse_param = malloc(sizeof(*mouse_param));
mouse_param->i = 4;
mouse_param->c = 'a';

register_mouse_callback(my_mouse_callback, mouse_param); 
```

具体来说，不要这样做：

```
{
    struct my_type mouse_param = { 4, 'a' };
    register_mouse_callback(my_mouse_callback, &mouse_param);
} /* 'mouse_param' would be a dangling pointer in the callback. */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T16:12:15.140

您可以制作数组，`void *`因为指针具有确定的大小，但是，您不能在不强制转换的情况下使用这些指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:16:59.273

您需要发送一个指向带有参数的结构的 void* 。在回调函数中，您使用如下参数将此类型 (void*) 转换回 struct*：

```
typedef struct {
  int event;
  int x;
  int y;
  int flags;
} params;

void mouse_callback(void *data) {
   params* param  = (params*) data;
   // now you can use param->x or param->y to access the parameters
} 
```

要传递参数，您需要创建一个 paramstruct 并将其地址转换为 (void*)：

```
paramstruct myparams;
myparams.x = 2;
myparams.y = 1;

mouse_callback( (void*) &myparams ); 
```

# php - 基于两个变量的组合字符截断文本

> ID：11956445
> 
> 赞同：0
> 
> 时间：2012-08-14T16:10:11.047
> 
> 标签：php, wordpress, function, truncate

我正在使用一个自定义函数来根据一个参数截断文本，该参数说明允许的字符数。这是我的代码：

```
function bm_best_excerpt($length, $ellipsis, $content) {
$text = $content;
$text = strip_tags($text);
$text = substr($text, 0, $length);
$text = substr($text, 0, strripos($text, " "));
$text = $text.$ellipsis;
return $text;
} 
```

在任何页面上，我都可以通过抓取一个 Wordpress 自定义字段（其中包含一个文本字符串）并通过这个函数运行它来截断文本，如下所示：

```
<?php $excerpt = get_field('long_description'); ?>
<p><?php echo bm_best_excerpt(70, ' ... ', $excerpt); ?></p> 
```

这很好用，并显示`$excerpt`. 我想修改这个函数，所以它首先计算标题中的字符数（在描述之上），然后使用任何剩余的字符来进行描述。

为了说明这一点，假设我想总共允许 80 个字符。我的原始 HTML 如下：

这是一个相当长的标题

以下是一些 Lorem ipsum dolor sit amet、consectetur adipisicing elit、sed do eiusmod tempor incididunt ut labore et dolore magna aliqua 的描述。

我希望标题和描述之间的字符总数为 80。标题有 35 个字符，剩下 45 个字符用于描述。

我将如何修改上述函数以允许对附加内容变量（作为参数）进行计数，然后对`$length`? 我希望函数看起来像这样：

```
function bm_best_excerpt($length, $ellipsis, $content1, $content2) { 
```

`$content1`标题和`$content2`描述在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:23:57.003

试试这个把字符串加在一起并作为一个处理：

```
function bm_best_excerpt($length, $ellipsis, $content, $content2='') {
    // default content2 to empty string, allowing use of old method to still be valid
    $text = $content.' '.$content2; // add the second content to the end of the first 
```

# android - android - db.rawquery“order by”不起作用

> ID：11956447
> 
> 赞同：3
> 
> 时间：2012-08-14T16:10:22.580
> 
> 标签：android, sqlite, sql-order-by

我想在我的数据库表中使用“ORDER BY”对我的所有数据库条目进行排序。我不知道我做错了什么，但它不起作用。
这是我的代码：

```
class NoteHelper extends SQLiteOpenHelper {

private static final String DATABASE_NAME = "note.db";
private static final int SCHEMA_VERSION = 1;

public NoteHelper(Context context){
    super(context, DATABASE_NAME, null, SCHEMA_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db){
    db.execSQL("CREATE TABLE Notes (_id INTEGER PRIMARY KEY AUTOINCREMENT, note TEXT);");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){
    //no-op, since will not be called until 2nd schema
    //version exists
}

public void insert(String note) {

    ContentValues cv = new ContentValues();
    cv.put("note", note);
    //you must pass it at lease one name of a colum
    getWritableDatabase().insert("Notes", "note", cv);
}

public void update(String id, String note){
    ContentValues cv = new ContentValues();
    String[] args = {id};

    cv.put("note", note);
    getWritableDatabase().update("Notes", cv, "_id=?", args);
}

public void delete(String id){
    getWritableDatabase().delete("Notes", "_id=?", new String[] {id});
}

public Cursor getAll(){
    return (getReadableDatabase().rawQuery("SELECT _id, note FROM Notes",  null));
}

public Cursor getAllSorted(){
    return (getReadableDatabase().rawQuery("SELECT note  FROM Notes  ORDER BY note  COLLATE NOCASE", null));

}

public String getNote(Cursor c){
    return(c.getString(1));
}

public Cursor getById(String id) {
    String[] args = {id};

    return(getReadableDatabase().rawQuery("SELECT _id, note FROM Notes WHERE _id=?", args));
}

 } 
```

如果有人知道问题出在哪里，请帮助我，谢谢。

好的，这是主要代码：

```
NoteAdapter adapter = null;
NoteHelper helper = null;
Cursor dataset_cursor = null;
EditText editNote = null;
//this is how track which note we are working on
String noteId = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    try{

    setContentView(R.layout.history);

    ListView list = (ListView)findViewById(R.id.list);
    editNote = (EditText)findViewById(R.id.myEditText);

    helper = new NoteHelper(this);
    dataset_cursor = helper.getAll();
    startManagingCursor(dataset_cursor);
    adapter = new NoteAdapter(dataset_cursor);
    list.setAdapter(adapter);
class NoteAdapter extends CursorAdapter {
    NoteAdapter(Cursor c){
        super(Ztutorial11.this, c);

    }

    public void bindView(View row, Context ctxt, Cursor c) {
        NoteHolder holder = (NoteHolder)row.getTag();
        holder.populateFrom(c, helper);
    }

    public View newView(Context ctxt, Cursor c, ViewGroup parent) {
        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.row, parent, false);
        NoteHolder holder = new NoteHolder(row);

        row.setTag(holder);
        return (row);
    }
}

static class NoteHolder {
    private TextView noteText = null;

    NoteHolder(View row){
        noteText = (TextView)row.findViewById(R.id.note);

    }

    void populateFrom(Cursor c, NoteHelper helper) {
        noteText.setText(helper.getNote(c));
    }
}

   public boolean onCreateOptionsMenu(Menu menu){
super.onCreateOptionsMenu(menu);
MenuInflater awesome = getMenuInflater();
awesome.inflate(R.menu.menu_expresions, menu);
return true;

   }
   public boolean onOptionsItemSelected(MenuItem item){
switch(item.getItemId()){
case R.id.Az:

    //something to do
    helper.getAllSorted();
    //update the view
    dataset_cursor.requery();
    return true;
case R.id.Za:

    //something to do

    return true;
case R.id.deleteall:

    //something to do
    helper.deleteAll();
    dataset_cursor.requery();
    return true;
case R.id.undo:

    //something to do

    return true;

}

return false;
 }

 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:56:36.750

```
dataset_cursor = helper.getAll(); 
```

你没有用`getAllSorted()`...

此外，`onOptionsItemSelected()`没有在任何地方被调用，即使被调用，调用的返回值`getAllSorted()`也没有被使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:10:42.333

试试这样：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.Az:
            dataset_cursor = helper.getAllSorted();
            adapter.changeCursor(dataset_cursor);
            return true;
        case R.id.Za:
            // something to do
            return true;
        case R.id.deleteall:
            // something to do
            helper.deleteAll();
            dataset_cursor.requery();
            adapter.notifyDataSetChanged();
            return true;
        case R.id.undo:
            // something to do
            return true;
    }
    return false;
} 
```

首先将新的排序结果分配给`dataset_cursor`适配器，然后告诉适配器光标已更改。该`deleteall`案例可能需要`adapter.notifyDataSetChanged();`我在那里添加的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:33:04.577

我不知道，但这里有一些猜测/尝试。

1) note 之后和 COLLATE 之前似乎有两个空格。不确定这是否会有所作为。（事实上​​，该 SQL 字符串的几个不同位置似乎有额外的空格）

2) 当您删除 COLLATE NOCASE 子句时会发生什么？只是想知道这是否是问题所在，或者是否是实际的 ORDER BY 子句失败了。

3）COLLATE NOCASE后是否需要指定ASC/DESC？

# java - 一个星期的价值是多少？

> ID：11956448
> 
> 赞同：3
> 
> 时间：2012-08-14T16:10:25.390
> 
> 标签：java, long-integer

`System.currentTimeMillis()`与预先记录的长值相比，我想取 2 个长值。

我想看看是否较大-较小是否大于或等于一周的值。

但是一周的价值是多少？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T16:11:39.110

如果我们说的是毫秒，那么[谷歌就会为我们提供答案](https://www.google.ca/search?q=milliseconds+in+a+week&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)。

`604800000 ms`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T16:11:50.970

7 天，24 小时，60 分钟，60 秒，1000 毫秒，最重要`L`的是长时间

```
long millisForAWeek = 7*24*60*60*1000L 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:27:04.403

即使 Date.setDate() 已弃用，我也尝试了以下方法，

```
 long now = System.currentTimeMillis();
    System.out.println(now); //'now' being the 14th of the month
    Date day = new Date();
    System.out.println(day);
    day.setDate(21); // one week later
    long day2 = day.getTime();
    System.out.println(day2); 

    long week = day2-now;
    System.out.println(week); 
```

结果如下

> 2012 年 8 月 14 日星期二 11:26:34 CDT
> 1345566394008
> 604800000

# java - 使用 JdbcTemplate 时转义单引号

> ID：11956451
> 
> 赞同：5
> 
> 时间：2012-08-14T16:10:34.870
> 
> 标签：java, oracle, spring, escaping, jdbctemplate

我们正在使用[JdbcTemplate](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/JdbcTemplate.html)来修改我们的底层 Oracle 数据库。我们通过方法来做到这一点[`update(String sql)`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/JdbcTemplate.html#update%28java.lang.String%29)。

代码看起来像下面这样：

```
String name = "My name's yellow";
String sql = "update FIELD set NAME = '" + name "' where ID = 10
jdbcTemplate.update(sql); 
```

这会导致错误：

```
java.sql.SQLException: ORA-00933: SQL command not properly ended 
```

问题是变量`'`中的未转义。`name`

逃避这个角色最方便和**正确的方法是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T16:12:05.450

使用[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。这样，您指定一个占位符，JDBC 驱动程序将通过向数据库发送语句以及作为参数的参数来正确执行此操作。

```
 String updateStatement =
    "update " + dbName + ".COFFEES " +
    "set TOTAL = TOTAL + ? " +
    "where COF_NAME = ?";

    PreparedStatement updateTotal = con.prepareStatement(updateStatement);
    updateTotal.setInt(1, e.getValue().intValue());
    updateTotal.setString(2, e.getKey()); 
```

上面的问号代表占位符。

因为这些值是作为参数传递的，所以引用不会有问题，它也可以保护您免受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T12:27:26.290

尝试名称：

```
if ( name.contains("'") ){
    name.replaceAll("'", "''");
} 
```

# c# - 在 DropDownList 选择中具有重复值会导致选择不匹配

> ID：11956452
> 
> 赞同：0
> 
> 时间：2012-08-14T16:10:47.460
> 
> 标签：c#, asp.net

我有一个`DropDownList`绑定到数据库的 . 列表中的值`DropDownList`可能类似于：

> 卧室1
> 卧室2
> 厨房1
> 厨房2

当这些项目在列表中`DropDownList`时，选择了“Bedroom2”，选择了“Bedroom1”本身，但选择了“Kitchen2”，选择了“Kitchen1”。

这`DropDownList`进一步绑定了另一个`DropDownList`。我已经为这两个`DropDownList`s 设置了 AutoPostBack。我已经从后面的代码中绑定了数据源。

可能出了什么问题？

数据绑定代码：

```
SqlDataAdapter myda = new SqlDataAdapter("Select * FROM " + Label3.Text, con);
DataSet ds = new DataSet();
myda.Fill(ds, "Table");
LOC_LIST2.DataSource = ds.Tables[0];
LOC_LIST2.DataTextField = ds.Tables[0].Columns["Location_Instance"].ColumnName.ToString(); 
LOC_LIST2.DataValueField=ds.Tables[0].Columns["Location_Type"].ColumnName.ToStri??ng(); 
LOC_LIST2.DataBind(); 
LOC_LIST2.Items.Insert(0, new ListItem("---Choose One Location---", "-1")); 
```

因此，在上面的代码中 Location_Instance 是添加并存储在数据库中的位置（Location_Type）的数量，并且在上面检索到相同的数量`DropDownList`。

这是一个非常严重的问题，有人可以尽快帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:31:30.643

如果您在回发后在 DropDownList 中获得重复项，请在设置 DropDown 的 DataSource 之前尝试将其添加到绑定代码中：

```
LOC_LIST2.Items.Clear(); 
```

这将从 DropDownList 中清除所有项目，然后您当前的绑定代码将运行并重新添加所需的项目。因此，新代码将显示为：

```
SqlDataAdapter myda = new SqlDataAdapter("Select * FROM " + Label3.Text, con);
DataSet ds = new DataSet();
myda.Fill(ds, "Table");
LOC_LIST2.Items.Clear();
LOC_LIST2.DataSource = ds.Tables[0];
LOC_LIST2.DataTextField =     ds.Tables[0].Columns["Location_Instance"].ColumnName.ToString(); 
LOC_LIST2.DataValueField=ds.Tables[0].Columns["Location_Type"].ColumnName.ToStri??ng(); 
LOC_LIST2.DataBind(); 
LOC_LIST2.Items.Insert(0, new ListItem("---Choose One Location---", "-1")); 
```

此外，在旁注中，您可能希望查看使用参数化 SQL 语句来帮助防止诸如 SQL 注入之类的事情。来自 MSDN 的示例：

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.selectcommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.selectcommand.aspx)

# .net - Error .Net VB -- 远程服务器返回错误：(501) 参数或参数中的语法错误

> ID：11956454
> 
> 赞同：0
> 
> 时间：2012-08-14T16:10:48.997
> 
> 标签：.net, vb.net, ftp

我编写了一段代码只是为了测试将 ASCII 类型的 txt 文件发送到 FTP 服务器，但不断收到以下错误。

## 远程服务器返回错误：(501) 参数或参数中的语法错误。

我确定用户名和密码是正确的，我尝试将 UsePassive 设置为 true 和 false，但得到相同的错误。

以下是我使用的代码。

```
Imports System.IO
Imports System.Text
Imports System.Net

Module Module1

Sub Main()
    Dim lPOSByteArray() As Byte
    Dim lEncoding As New ASCIIEncoding
    Dim lPOSFlatFile As String
    lPOSFlatFile = System.IO.File.ReadAllText("C:\\Users\\somebody\\Desktop\\Test.config.XML")
    lPOSByteArray = lEncoding.GetBytes(lPOSFlatFile)

    Dim lFTPrequest As System.Net.FtpWebRequest

    lFTPrequest = DirectCast(WebRequest.Create("ftp://" & "199.222.111.111" & "/" & "Test.txt"), System.Net.FtpWebRequest)
    lFTPrequest.Proxy = Nothing
    lFTPrequest.Credentials = New NetworkCredential("userxxx", "passyyy")
    lFTPrequest.Method = WebRequestMethods.Ftp.UploadFile
    lFTPrequest.UseBinary = False
    lFTPrequest.UsePassive = True
    lFTPrequest.ContentLength = lPOSByteArray.Length

    'ERROR happened on following line
    Dim lFTPrequestStream As Stream = lFTPrequest.GetRequestStream()
    lFTPrequestStream.Write(lPOSByteArray, 0, lPOSByteArray.Length)
    lFTPrequestStream.Close()

    Dim response As System.Net.FtpWebResponse = DirectCast(lFTPrequest.GetResponse(), System.Net.FtpWebResponse)

End Sub 
```

端模块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:36:38.090

我认为您的代码是正确的。问题出在其他地方，例如网络或 ftp 服务器。我尝试使用我的 FTP 服务器并更改了线路

```
 lPOSByteArray = lEncoding.GetBytes(lPOSFlatFile) 
```

到

```
 lPOSByteArray = lEncoding.GetBytes("test") 
```

并且工作正常。你能用像 FileZila 这样的 ftp 客户端读/写这个文件吗？

# java - playframework 1.2.5，继续，如何关闭响应/套接字？

> ID：11956455
> 
> 赞同：0
> 
> 时间：2012-08-14T16:10:56.937
> 
> 标签：java, playframework, playframework-1.x

我有一些像他们这样的例子的代码（尚未测试）......

```
 Promise<Object> promise = new Promise<Object>();
    response.contentType = "application/json";
    JsonStreamer streamer = new JsonStreamer(columns, promise);
    while(streamer.hasMoreData()) {
          await(promise);
          response.writeChunk(streamer.nextDataChunk());
    } 
```

我不明白的是如何释放客户端打开的套接字？我正在将一些非常大的数据流回 json 中。写完最后一个块后，我需要某种 response.releaseSocket() 。我看到 WebSockets 有，但是当我使用 await 的东西时呢？

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:14:22.780

啊，我认为我注意到我从未调用 await 并在这种情况下关闭套接字。如果我调用 await，它知道保持套接字打开。那讲得通。

# python - 如何在 python numpy 中编写：b = sum(v) - a 作为隐式元素（向量）计算？

> ID：11956458
> 
> 赞同：3
> 
> 时间：2012-08-14T16:11:15.433
> 
> 标签：python, vector, numpy

我将从问题的陈述开始。之后，我将演示一个简短的编码序列，逐步构建解决方案，直到解决问题。显然，这里的目标是计算 b。我在问如何最有效地做到这一点，理想情况下使用元素 numpy 向量表达式，根本没有迭代或循环：

```
b = sum(v)-a
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib64/python2.6/site-packages/numpy/core/fromnumeric.py", line 1251, in sum
return _wrapit(a, 'sum', axis, dtype, out)
File "/usr/lib64/python2.6/site-packages/numpy/core/fromnumeric.py", line 37, in _wrapit
result = getattr(asarray(obj),method)(*args, **kwds)
File "/usr/lib64/python2.6/site-packages/numpy/core/numeric.py", line 230, in asarray
return array(a, dtype, copy=False, order=order)
ValueError: setting an array element with a sequence. 
```

这是我尝试执行的导致该错误的代码的最佳版本。为了清楚起见，我添加了一些打印语句：

```
a = array([0,1,0,1,1])
b = +a
print b
array([0, 1, 0, 1, 1])

b = array([sum(a[0:2]), sum(a[0:3]), sum(a[1:4]), sum(a[2:5]), sum(a[3:5])])
print b
array([1, 1, 2, 2, 2])

b = array([sum(a[0:2])-a[0], sum(a[0:3])-a[1], sum(a[1:4])-a[2], sum(a[2:5])-a[3], sum(a[3:5])-a[4]])
print b
array([1, 0, 2, 1, 1])

v = [a[0:2], a[0:3], a[1:4], a[2:5], a[3:5]]
print v
[array([0, 1]), array([0, 1, 0]), array([1, 0, 1]), array([0, 1, 1]), array([1, 1])] 
```

注意 v 是一个视图列表。这些视图是指支持数组 a。

```
print a
array([0, 1, 0, 1, 1])

a[0]=9
print v
[array([9, 1]), array([9, 1, 0]), array([1, 0, 1]), array([0, 1, 1]), array([1, 1])]

a[0]=0
print v
[array([0, 1]), array([0, 1, 0]), array([1, 0, 1]), array([0, 1, 1]), array([1, 1])] 
```

到目前为止一切都很好：变量 v 是一个真实的视图，这意味着当 a 更新时 v 也会更新。

```
b = array([sum(v[0])-a[0], sum(v[1])-a[1], sum(v[2])-a[2], sum(v[3])-a[3], sum(v[4])-a[4]])
print b
array([1, 0, 2, 1, 1]) 
```

太好了，到目前为止还不错。现在让我们进一步简化代码行……请注意变量 b、v 和 a 都具有相同数量的元素。

```
b = sum(v)-a
Traceback (most recent call last)...(error messages)... 
```

哦，哦，糟糕的代码！现在，我也尝试了其他的方式来表达b，但它们同样是错误的，我不需要在这里展示更多糟糕的代码。问题是如何正确且最有效地表达赋值表达式。如果在这个特定的应用程序中可能的话，对计算特别有帮助，那就是在设置视图之后完全避免循环表达式并避免列表推导。

在这个应用程序中可以使用慢循环设置视图。观点不会经常改变。后备数组 a 会经常变化，而且会非常大。

感谢您的阅读和您的任何最佳建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:22:33.163

对于`v`您发布的特定视图，计算可以表示为与内核的[卷积](http://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html#numpy-convolve)`[1, 1, 1]`：

```
In [78]: import numpy as np    

In [80]: a = np.array([0,1,0,1,1])

In [81]: b = np.convolve(a, [1,1,1], 'same') - a

In [82]: b
Out[82]: array([1, 0, 2, 1, 1]) 
```

你没有说你是如何`v`随时间变化的，但也许如果它们相似，你可以继续将计算表示为内核变化的卷积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:48:36.030

关于什么：

```
b = [sum(i) for i in v] - a 
```

（之所以有效，是因为`v`与 的项目数量相同`a`，并且它们都是一维的）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T23:24:59.587

我认为[unutbu](https://stackoverflow.com/a/11956632/577088)的答案是正确的。但只是为了多样性，这里有一种在基本数组上使用滚动窗口的方法，这`a`也是一种视图。这假设我们事先知道 的长度`a`。

首先我们创建一个过度分配的数组：

```
>>> datalen = 5
>>> base = numpy.zeros(datalen + 2, dtype='i8') 
```

然后我们定义`a`为该数组的截断视图并对其进行初始化：

```
>>> a = base[1:-1]
>>> a[:] = [0, 1, 0, 1, 1] 
```

现在我们使用`stride_tricks`. 形状数组的正常`(5, 3)`步幅`dtype='i8'`为`(24, 8)`; 通过减少`24`到`8`，我们确保每一行的起点向前移动一项而不是 3。

```
>>> window = numpy.lib.stride_tricks.as_strided(base, shape=(5, 3), 
                                                      strides=(8, 8))
>>> window
array([[0, 0, 1],
       [0, 1, 0],
       [1, 0, 1],
       [0, 1, 1],
       [1, 1, 0]]) 
```

现在我们可以调用`sum(axis=1)`：

```
>>> window.sum(axis=1) - a
array([1, 0, 2, 1, 1]) 
```

`a`并`window`指向相同的内存，因此更新可以正常工作：

```
>>> a[0] = 9
>>> window
array([[0, 9, 1],
       [9, 1, 0],
       [1, 0, 1],
       [0, 1, 1],
       [1, 1, 0]])
>>> window.sum(axis=1) - a
array([1, 9, 2, 1, 1]) 
```

我还要指出，对于您在此处提供的*特定*示例，就像这样简单的工作：

```
>>> base[:5] + base[-5:]
array([1, 9, 2, 1, 1])
>>> a[0] = 0
>>> base[:5] + base[-5:]
array([1, 0, 2, 1, 1]) 
```

但我想你的实际需求更复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:15:13.257

怎么样：

```
numpy.vectorize(sum)(v) - a 
```

例如：

```
>>> import numpy
>>> a = numpy.array([0,1,0,1,1])
>>> v = [a[0:2], a[0:3], a[1:4], a[2:5], a[3:5]]
>>> numpy.vectorize(sum)(v) - a
array([1, 0, 2, 1, 1]) 
```

# asp.net-mvc-3 - Url.Action MVC3 在建立链接时无法识别路由参数

> ID：11956459
> 
> 赞同：2
> 
> 时间：2012-08-14T16:11:17.803
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, url.action

在向我的路由参数添加自定义路由约束时，我发现它破坏了我用来构建链接的 Url.Action 方法。如果路由约束只是一个正则表达式，那么 Url.Action 方法将继续识别参数，但是如果它是我定义的自定义约束，则 Url.Action 方法将我的参数作为请求参数。

这是我的路线定义：

```
routes.MapRoute(
            "Event",
            "Events/{strDate}",
            new { controller = "Events", action = "Index", strDate = DateTime.Today.ToString("yyyy-MM-dd") },
            new { strDate = new IsValidDateConstraint() },
            new[] { "MyProject.Controllers" }
        );

routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new[] { "MyProject.Controllers" }
        ); 
```

IsValidDateConstraint 类继承自 IRouteConstraint，如果 strDate 参数正确解析为 DateTime 对象，则返回 true 或 false：

```
public class IsValidDateConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        if (routeDirection == RouteDirection.IncomingRequest)
        {
            DateTime dt = new DateTime();

            if (DateTime.TryParse(values["strDate"].ToString(), out dt))
                return true;
        }

        return false;
    }
} 
```

使用 Url.Action 方法构建 URL：

```
@Url.Action("Index", "Events", new { strDate = ViewBag.CurrentDate.AddDays(1).ToString("yyyy-MM-dd") }) 
```

结果链接是：/Events?strDate=2012-08-15

如果我输入 /Events/2012-08-15，一切都会正确路由，只是 Url.Action 方法没有识别 strDate 是我的路由中定义的参数，只有当我应用我的自定义路由约束时。如果我注释掉自定义路由约束，那么 Url.Action 方法会正确映射 URL。

当我定义了自定义路由约束时，关于为什么 Url.Action 无法识别我的路由参数的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:21:04.997

您尚未展示您的`IsValidDateConstraint`外观，但请确保您正在对`yyyy-MM-dd`格式进行文化不变的解析：

```
public class IsValidDateConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        DateTime date;
        return DateTime.TryParseExact(
            values[parameterName] as string, 
            "yyyy-MM-dd", 
            CultureInfo.InvariantCulture, 
            DateTimeStyles.None, 
            out date
        );
    }
} 
```

还要确保将此路由放置在默认路由之前：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Event",
        "Events/{strDate}",
        new { controller = "Events", action = "Index", strDate = DateTime.Today.ToString("yyyy-MM-dd") },
        new { strDate = new IsValidDateConstraint() },
        new[] { "MyProject.Controllers" }
    );

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

也`DateTime.Parse(ViewBag.CurrentDate.ToString())`看起来有点 WTFkish 代码。如果`ViewBag.CurrentDate`已经是 DateTime 你可以直接写：

```
@Url.Action(
    "Index", 
    "Events", 
    new { 
        strDate = ViewBag.CurrentDate.AddDays(1).ToString("yyyy-MM-dd") 
    }
) 
```

显然更好的解决方案是使用视图模型：

```
@Url.Action(
    "Index", 
    "Events", 
    new { 
        strDate = Model.CurrentDate.AddDays(1).ToString("yyyy-MM-dd") 
    }
) 
```

* * *

更新：

现在您已经显示了代码，问题来自您在约束中设置的 if 条件：

```
if (routeDirection == RouteDirection.IncomingRequest) 
```

当使用`Url.Action`助手时，这个条件永远不会满足。仅在解析传入 url 时。因此，如果您希望此约束与 url 帮助程序一起使用，则必须将其删除。

# javascript - JavaScript 在 Chrome 和 Safari 中在后台而不是前台打开窗口

> ID：11956461
> 
> 赞同：0
> 
> 时间：2012-08-14T16:11:23.817
> 
> 标签：javascript, jquery

当用户单击链接时，我正在使用以下 JavaScript 函数打开一个新窗口。

```
function popWinSimple(url,features) {
    win = window.open(url,'',features);
    win.focus();
} 
```

此功能在 Firefox 上打开前台窗口，但在 Safari 和 Chrome 上不这样做。

造成这种行为差异的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:13:15.253

据我所知，您无法更改此行为，因为这是由每个浏览器中的用户设置处理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:28:57.597

在 OSX Lion 上的几乎库存配置中使用 Safari 和 Chrome，我正在加载以下页面。我观察到的行为是选项卡在案例 1 和 2 的前面加载，案例 3 闪烁到前面，然后焦点返回到调用选项卡。对于这种情况，我认为没有比 javascript 的 focus() 和 blur() 调用更强大或更可靠的方法。

```
<html>
    <body>
        <a href="." onclick="javascript:var w = window.open('foo.html'); return false;">click normal</a>
        <br />
        <a href="." onclick="javascript:var w = window.open('foo.html'); w.focus(); return false;">click and focus</a>
        <br />
        <a href="." onclick="javascript:var w = window.open('foo.html'); w.blur(); window.focus(); return false;">click and unfocus</a>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-06T06:42:17.537

每当从 iframe 中进行 window.open 调用时，我也会遇到这个特定于 Chrome 的问题。我找到了一种解决方法，即使在 Chrome 中也会使弹出窗口在前台打开（Firefox 和 Safari 没有这个问题）：

1.  将事件参数传递给您的 onclick 处理程序：

    ```
    <button onclick="popWinSimple(event, 'url', 'features')">Popup window</button> 
    ```

2.  在事件上调用 preventDefault：

    ```
    function popWinSimple(event, url, features) {
      event.preventDefault();
      win = window.open(url, '', features);
      win.focus();
    } 
    ```

注意：我认为您不需要调用 win.focus() 因为默认情况下新的弹出窗口将成为焦点。此外，出于安全原因，在 Chrome 中 win.focus() 被禁用。

# git - 哪些 git setup 和命令可以帮助管理公共 Github 上的私人内容？

> ID：11956462
> 
> 赞同：2
> 
> 时间：2012-08-14T16:11:27.033
> 
> 标签：git, open-source, github, markdown

[我正在 PHP 中构建一个“CMS”（轻度使用），我通过Github repo](https://github.com/joshcanhelp/plain-text-site)作为开源提供。我正在将它构建为我公司的新主页，其各种形式的内容为如何使用各种类和函数提供了一个很好的示例。

起初，我把我的内容留在那里（所有内容都存储为 Markdown 文本文件）——关于页面、客户端示例、博客文章——但后来我感到害怕并添加了 Lorem Ipsum 和假图片。出于某种原因，尽管这一切都将在我们的 URL 上向公众开放，但让设计、内容和其他一切都如此容易访问似乎是个坏主意。尽管如此，（a）将所有东西都放在一个 repo 中会很好，（b）说“嘿，我的就是你的”是一个很好的姿态，特别是因为我们专注于开源，并且（c）只是让已经成为可能的东西（窃取我们的设计和内容）只是稍微容易一些。

git repo 有什么方法可以管理（半）私有内容，同时仍将其发布在公共 repo 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:45:01.777

[如“托管在 github 上的开源代码可以闭源吗？](https://stackoverflow.com/questions/2614511/can-open-source-code-hosted-at-github-be-closed-source) ”中详述：

> GitHub 本身与您如何许可代码无关。因此，您可以决定停止通过 GitHub 发布您的源代码，但是在您最初使用的开源许可证下，从那里分叉和克隆的所有内容当然仍然“存在”。

所以更多的是：

*   可访问性：每个人都可以访问/阅读您的代码是否重要？
*   许可：您对该回购的内容附加了什么样的许可？

我更喜欢保持分开：

*   模板文件（相当于你的 Lorem Ipsum 文件）
*   能够生成实际值文件的脚本文件

来自价值文件本身（具有实际“公司”数据的文件）。
我将这些存储在远离 GitHub 的地方。

这样，我可以声明一个内容过滤器驱动程序，它会在结帐时自动为我生成最终文件。

![内容过滤器驱动程序](../Images/0bc9ecad04b0ca5bc157164c261cdc5e.png)

（有关更多信息，请参阅“[推送到 git-hub 存储库时自动忽略选定的代码更改](https://stackoverflow.com/questions/11914741/automatically-ignore-selected-code-changes-when-pushing-to-a-git-hub-repository/11915604#11915604)”）

# jquery - 如何使用 jquery 读取通用 xml

> ID：11956463
> 
> 赞同：0
> 
> 时间：2012-08-14T16:11:32.593
> 
> 标签：jquery, xml, xml-parsing

我有一个通用 xml，如下所示

```
 <Results>
  <Columns>
    <Column>Center ID</Column>
    <Column>Center Name</Column>
   /Columns>
  <Result>
    <Data>32452368</Data>
    <Data>Center1</Data>
  </Result>
  <Result>
    <Data>32452368</Data>
    <Data> Center2</Data>
  </Result>

</Results> 
```

我正在尝试使用 jquery 从这个 xml 中读取数据。

```
 $(xml).find("Results/Result").each(function()
    {
    } 
```

但是我需要知道一些方法来按顺序阅读它们，就像第一个数据总是中心 ID。有什么建议么...

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:20:45.660

你在右边，`each`方法迭代一个jQuery对象，按顺序为每个匹配的元素执行一个函数，但是`find`方法中选择器的语法不正确，试试这个：

```
$(xml).find('Results > Result').each(function(){
   // do something here
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:27:33.380

像这样的东西怎么样：

```
var columns = [];

// Go through the first Result tag and record the order of the columns:
$(xml).find('Results > Result:first').each(function() {
    $(this).children('Data').each(function() {
        columns.push( $(this).text() );
    });
});

var results = [];
$(xml).find('Results > Result:not(:first)').each(function() {
    // Result will map column names to values:
    var result = {};
    $(this).children('Data').each(function(i) {
        result[ columns[i++] ] = $(this).text();
    });
    results.push(result);
});

// Now results is an array of objects:
// [
//   { 'Center ID': 32452368', 'Center Name': 'Center1' },
//   { 'Center ID': 32452368', 'Center Name': 'Center2' }
// ] 
```

唯一让你走错路的是`/`在你的选择器中使用，它不是一个有效的 CSS/jQuery 选择器。`>`用于表示父/子关系。`Results > Result`是关键。

# javascript - 使用 jQuery UI 手风琴显示 couchDB 数据库搜索结果的问题

> ID：11956467
> 
> 赞同：1
> 
> 时间：2012-08-14T16:11:44.607
> 
> 标签：javascript, html, jquery-ui, couchdb

我正在尝试创建一个页面，显示提交给英国计算网格的计算作业的作业信息。该页面旨在以易于访问的格式显示来自 couchDB 的工作信息。我想使用 jQuery 手风琴来显示信息，这样我最初只能看到最相关的工作信息，然后如果需要，用户可以浏览其他部分以获取更多详细信息。

为此，我有两个文件：

1.  我有一个 HTML 文件（job.html）：

    ```
    <html>
      <!-- source jquery, jquery.couch, bootstrap scripts //-->
      <script type="text/javascript" src="job.js"></script>
      <!-- script to define accordion //-->  
      <body>
        <div id="content">
          <h1 id="jobhead">Job Description : </h1>
          <hr/>
          <div id="accordion">
          </div>
        </div>
      </body>
    </html> 
    ```

2.  [我有一个查询](https://stackoverflow.com/questions/4057174/populate-jquery-ui-accordion-with-xml-binding-problem "问题")数据库、打开正确的作业文件并将 HTML 代码附加到手风琴的 javascript 文件 (job.js) ：

    ```
    //define function 'get_parameter_by_name'

    //code to define database name $db

    var record_id = get_parameter_by_name('id');
    $(document).ready(function() {

        //Destroy accordion first:
        $('#accordion').accordion('destroy');
        //clear records
        $('#accordion').empty();

        //use .openDoc method to get job information, then append html
        $db.openDoc(record_id, {
        success: function(data) {
            //check correct data is accessed
            console.log(data);

            //html content of accordion appended, e.g
            html = '<h3><a href="#">Key Information:</a></h3>'; //Header 1
            html += '<div>'; //Start of content 1
            html += '<table id="keyData">';
            html += '<tr><td>Module</td><td>' + data.module + '</td></tr>';
            ...

            //append html
            $('#accordion').append(html);

            },
                error: function(e) {
                alert('Error loading from database: ' + e);
            }
        });
        //Remake accordion
        $('#accordion').accordion({ header: "h3", collapsible: true });
    }); 
    ```

我的问题是 html 被很好地附加，但它没有被格式化为手风琴 - 即所有附加的 HTML 一次显示并且标题不能展开/折叠。

在玩弄了一些命令之后，我发现如果我附加 HTML 的代码放在`db.openDoc()`方法之外，它就可以正常工作。这仅适用于文本，但我需要显示在此方法中定义的许多变量（不仅仅是显示的变量）。

所以我的问题是是否可以存储我需要的变量，以便可以在`openDoc()`方法之外访问它们。或者，如果有一种方法可以在方法中附加 HTML，以便它与手风琴一起使用。

您可以提出的任何答案将不胜感激。同样，我只学了几个星期的 javascript/HTML，所以如果您可以建议一种更简单的方法，我也很乐意在这里。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:47:58.910

每次从 db 获得结果时，都需要销毁手风琴。

```
//Remake accordion
$('#accordion').accordion('destroy').accordion({ header: "h3", collapsible: true }); 
```

检查这个[jsfiddle](http://jsfiddle.net/6dv7t/)

此外，您不需要在页面加载时破坏手风琴，因此删除以下行：

```
//Destroy accordion first:
$('#accordion').accordion('destroy'); 
```

编辑：正如@Shmiddty 提到的，您需要将重新制作手风琴的路线放入成功回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:21:38.023

我假设“openDoc”方法是一个异步调用，对吗？

如果是这样，则在附加任何 HTML 之前，将调用“重新制作”手风琴的代码。

尝试这个：

```
$(document).ready(function() {

    //Destroy accordion first:
    $('#accordion').accordion('destroy');
    //clear records
    $('#accordion').empty();

    //use .openDoc method to get job information, then append html
    $db.openDoc(record_id, {
    success: function(data) {
        //check correct data is accessed
        console.log(data);

        //html content of accordion appended, e.g
        html = '<h3><a href="#">Key Information:</a></h3>'; //Header 1
        html += '<div>'; //Start of content 1
        html += '<table id="keyData">';
        html += '<tr><td>Module</td><td>' + data.module + '</td></tr>';
        ...

        //append html
        $('#accordion').append(html);

        //Remake accordion
        $('#accordion').accordion({ header: "h3", collapsible: true });

        },
            error: function(e) {
            alert('Error loading from database: ' + e);
        }

    });

}); 
```

如果要将多个项目填充到手风琴中，则需要对其进行修改，以便仅在添加最后一个项目后才调用重新制作手风琴的代码。或者，如果您要动态添加项目，则每次都销毁并创建手风琴（尽管我不确定销毁是否必要）。

# android - 从菜单点击强制关闭android？附上日志

> ID：11956471
> 
> 赞同：0
> 
> 时间：2012-08-14T16:12:01.617
> 
> 标签：android, logging, nullpointerexception, android-activity

所以几周前我把这个项目放在一边，它运行得很好。我今天早些时候对其中一项活动进行了一些更改，将其加载到模拟器中，但在进入我的菜单屏幕后它就死了（启动画面 --> 菜单 --> 新活动）。所以在两次崩溃之后，我尝试了不同的活动。一个工作。后退...点击了另一个没有被触摸过的东西，砰。强制关闭/崩溃。我没有更改菜单 java 或 XML 文件中的任何内容，也没有更改清单。

这到底是什么原因造成的？Eclipse 中没有错误，我认为我没有更改任何内容以使其执行此操作。

附上日志：

* * *

```
08-14 14:34:45.301: W/KeyCharacterMap(343): No keyboard for id 0
08-14 14:34:45.301: W/KeyCharacterMap(343): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
08-14 14:35:40.461: D/AndroidRuntime(343): Shutting down VM
08-14 14:35:40.471: W/dalvikvm(343): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-14 14:35:40.491: E/AndroidRuntime(343): FATAL EXCEPTION: main
08-14 14:35:40.491: E/AndroidRuntime(343): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.tomcat.performance/com.tomcat.performance.TireTemps}: java.lang.NullPointerException
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.os.Looper.loop(Looper.java:123)
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-14 14:35:40.491: E/AndroidRuntime(343):  at java.lang.reflect.Method.invokeNative(Native Method)
08-14 14:35:40.491: E/AndroidRuntime(343):  at java.lang.reflect.Method.invoke(Method.java:521)
08-14 14:35:40.491: E/AndroidRuntime(343):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-14 14:35:40.491: E/AndroidRuntime(343):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-14 14:35:40.491: E/AndroidRuntime(343):  at dalvik.system.NativeStart.main(Native Method)
08-14 14:35:40.491: E/AndroidRuntime(343): Caused by: java.lang.NullPointerException
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.app.Activity.findViewById(Activity.java:1637)
08-14 14:35:40.491: E/AndroidRuntime(343):  at com.tomcat.performance.TireTemps.<init>(TireTemps.java:25)
08-14 14:35:40.491: E/AndroidRuntime(343):  at java.lang.Class.newInstanceImpl(Native Method)
08-14 14:35:40.491: E/AndroidRuntime(343):  at java.lang.Class.newInstance(Class.java:1429)
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-14 14:35:40.491: E/AndroidRuntime(343):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
08-14 14:35:40.491: E/AndroidRuntime(343):  ... 11 more 
```

* * *

轮胎温度.JAVA

```
package com.tomcat.performance;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
package com.tomcat.performance;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class TireTemps extends Activity implements OnClickListener {
    EditText tempLFouterString = ((EditText) findViewById(R.id.tempLFouter)),
            tempLFmiddleString = ((EditText) findViewById(R.id.tempLFmiddle)),
            tempLFinnerString = ((EditText) findViewById(R.id.tempLFinner)),
            tempRFinnerString = ((EditText) findViewById(R.id.tempRFinner)),
            tempRFmiddleString = ((EditText) findViewById(R.id.tempRFmiddle)),
            tempRFouterString = ((EditText) findViewById(R.id.tempRFouter)),
            tempRRinnerString = ((EditText) findViewById(R.id.tempRRinner)),
            tempRRmiddleString = ((EditText) findViewById(R.id.tempRRmiddle)),
            tempRRouterString = ((EditText) findViewById(R.id.tempRRouter)),
            tempLRouterString = ((EditText) findViewById(R.id.tempLRouter)),
            tempLRmiddleString = ((EditText) findViewById(R.id.tempLRmiddle)),
            tempLRinnerString = ((EditText) findViewById(R.id.tempLRinner));

    TextView tempNoseAverageString = ((TextView) findViewById(R.id.tempNoseAverage)),
            tempLFaverageString = ((TextView) findViewById(R.id.tempLFaverage)),
            tempRFaverageString = ((TextView) findViewById(R.id.tempRFaverage)),
            tempLRaverageString = ((TextView) findViewById(R.id.tempLRaverage)),
            tempRRaverageString = ((TextView) findViewById(R.id.tempRRaverage)),
            tempRearAverageString = ((TextView) findViewById(R.id.tempRearAverage)),
            tempRFLRaverageString = ((TextView) findViewById(R.id.tempRFLRaverage)),
            tempLFRRaverageString = ((TextView) findViewById(R.id.tempLFRRaverage)),
            tempRSaverageString = ((TextView) findViewById(R.id.tempRSaverage)),
            tempLSaverageString = ((TextView) findViewById(R.id.tempLSaverage));

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tiretemps);

        Button calculate = ((Button) findViewById(R.id.calculate));
        calculate.setOnClickListener( new View.OnClickListener() {
            public void onClick(View arg0) {
                double tempLFouter, tempLFmiddle, tempLFinner, tempRFinner, tempRFmiddle, 
                       tempRFouter, tempLRouter, tempLRmiddle, tempLRinner, tempRRinner, 
                       tempRRmiddle, tempRRouter, tempNoseAverage, tempLFaverage, tempRFaverage, 
                       tempLRaverage, tempRRaverage, tempRearAverage, tempRFLRaverage, tempLFRRaverage, 
                       tempLSaverage, tempRSaverage;

                try {
                    tempLFouter = Double.parseDouble(tempLFouterString.getText().toString());
                    tempLFinner = Double.parseDouble(tempLFinnerString.getText().toString());
                    tempLFmiddle = Double.parseDouble(tempLFmiddleString.getText().toString());
                    tempRFouter = Double.parseDouble(tempRFouterString.getText().toString());
                    tempRFmiddle = Double.parseDouble(tempRFmiddleString.getText().toString());
                    tempRFinner = Double.parseDouble(tempRFinnerString.getText().toString());
                    tempRRouter = Double.parseDouble(tempRRouterString.getText().toString());
                    tempRRmiddle = Double.parseDouble(tempRRmiddleString.getText().toString());
                    tempRRinner = Double.parseDouble(tempRRinnerString.getText().toString());
                    tempLRouter = Double.parseDouble(tempLRouterString.getText().toString());
                    tempLRmiddle = Double.parseDouble(tempLRmiddleString.getText().toString());
                    tempLRinner = Double.parseDouble(tempLRinnerString.getText().toString());

                    tempLFaverage = ((tempLFinner + tempLFmiddle + tempLFouter) / 3);
                    tempRFaverage = ((tempRFinner + tempRFmiddle + tempRFouter) / 3);
                    tempLRaverage = ((tempLRinner + tempLRmiddle + tempLRouter) / 3);
                    tempRRaverage = ((tempRRinner + tempRRmiddle + tempRRouter) / 3);
                    tempNoseAverage = ((tempLFaverage + tempRFaverage) / 2);
                    tempRearAverage = ((tempLRaverage + tempRRaverage) / 2);
                    tempRFLRaverage = ((tempRFaverage + tempLRaverage) / 2);
                    tempLFRRaverage = ((tempLFaverage + tempRRaverage) / 2);
                    tempLSaverage = ((tempLFaverage + tempLRaverage) / 2);
                    tempRSaverage = ((tempRFaverage + tempRRaverage) / 2);

                    tempNoseAverageString.setText(String.valueOf(String.format("%.1f", tempNoseAverage)) + "°");
                    tempLFaverageString.setText(String.valueOf(String.format("%.1f", tempLFaverage)) + "°");
                    tempRFaverageString.setText(String.valueOf(String.format("%.1f", tempRFaverage)) + "°");
                    tempLRaverageString.setText(String.valueOf(String.format("%.1f", tempLRaverage)) + "°");
                    tempRRaverageString.setText(String.valueOf(String.format("%.1f", tempRRaverage)) + "°");
                    tempRearAverageString.setText(String.valueOf(String.format("%.1f", tempRearAverage)) + "°");
                    tempRFLRaverageString.setText(String.valueOf(String.format("%.1f", tempRFLRaverage)) + "°");
                    tempLFRRaverageString.setText(String.valueOf(String.format("%.1f", tempLFRRaverage)) + "°");
                    tempLSaverageString.setText(String.valueOf(String.format("%.1f", tempLSaverage)) + "°");
                    tempRSaverageString.setText(String.valueOf(String.format("%.1f", tempRSaverage)) + "°");

                } catch (NumberFormatException e) {
                    Toast andEggs = Toast
                            .makeText(TireTemps.this,
                             "Please verify only numbers are used in your inputs with no blank data.",
                             Toast.LENGTH_LONG);
                    andEggs.show();
                } catch (NullPointerException n) {
                    Toast andEggs = Toast.makeText(TireTemps.this, "Please enter all temperature data for each tire.",
                            Toast.LENGTH_LONG);
                    andEggs.show();
                }
            }
        });

        Button reset_temps = ((Button) findViewById(R.id.reset_temps));
        reset_temps.setOnClickListener( new View.OnClickListener() {
            public void onClick(View arg0) {
                tempLFouterString.setText("");
                tempLFinnerString.setText("");
                tempLFmiddleString.setText("");
                tempRFouterString.setText("");
                tempRFmiddleString.setText("");
                tempRFinnerString.setText("");
                tempRRouterString.setText("");
                tempRRmiddleString.setText("");
                tempRRinnerString.setText("");
                tempLRouterString.setText("");
                tempLRmiddleString.setText("");
                tempLRinnerString.setText("");

                tempNoseAverageString.setText("");
                tempLFaverageString.setText("");
                tempRFaverageString.setText("");
                tempLRaverageString.setText("");
                tempRRaverageString.setText("");
                tempRearAverageString.setText("");
                tempRFLRaverageString.setText("");
                tempLFRRaverageString.setText("");
                tempLSaverageString.setText("");
                tempRSaverageString.setText("");

                Toast andEggs = Toast.makeText(TireTemps.this, "All data has been reset.", Toast.LENGTH_LONG);
                andEggs.show();

            }
        });
    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }
} 
```

编辑：添加了 TireTemps.java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:14:06.343

findviewbyid 仅在您完成 setContentView 后才起作用。但是您在类实例化本身实例化所有 EditTexts。findviewbyid 无法知道在哪里查找 id。

将您在字段实例化中完成的所有 findviewbyid 移动到 Oncreate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:53:11.740

Tiretemps.java 第 25 行正在访问一个尚未实例化的变量，或者在访问它时为空。

这可以基于您声明变量的方式，您根本没有将它们设置为值，或者在您的其他生命周期函数中它们被清除，例如`onPause`或`onResume`

# wpf - 根据另一个属性的输入更新数据网格中的属性值

> ID：11956478
> 
> 赞同：0
> 
> 时间：2012-08-14T16:12:24.590
> 
> 标签：wpf, vb.net, wpfdatagrid

我有一个绑定到数据网格的可观察集合。在数据网格行上，当我编辑一个属性的值时，我需要该行上的另一个属性来根据计算更新它的值。这样做的最佳方法是什么。我尝试创建一个 collectionchanged 方法，如下所示：

```
 Public WithEvents Tickets As ObservableCollection(Of Ticket)

Public Sub Tickets_CollectionChanged(ByVal sender As Object, ByVal e As NotifyCollectionChangedEventArgs) Handles TicketCollection.CollectionChanged
    CalculatedVariable = determineCalculation()
End Sub 
```

但是，它仅在添加或删除新项目时调用，而不是在编辑行中的属性时调用。我查看的另一种方法是在每个属性的设置器中调用计算方法，但知道我需要调用该方法并更新我需要它的几个不同属性的属性，这似乎很混乱。有没有一种简单有效的方法可以完成我想做的事情？感谢您的任何反馈:)

```
 public property MyVariable
 Get 
     return _MyVariable
 Set(value)
     _MyVariable = value
     CalculatedVariable = determineCalculation()
     RaisePropertyChange("MyVariable") , ect..
 EndProperty 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:23:02.890

ObservableCollection 列出的元素的类必须实现 INotifyPropertyChanged。您必须在您的设置器中引发 PropertyChanged 事件。然后你可以在你的类中订阅这个事件并在回调中进行计算。我发现它比在每个 setter 中进行计算要干净一些，无论如何，如果您希望在更改对象的任何属性时更新 UI，则需要实现 INotifyPropertyChanged。

# apache - HTTP PUT 删除芝麻中的三元组

> ID：11956479
> 
> 赞同：2
> 
> 时间：2012-08-14T16:12:26.307
> 
> 标签：apache, tomcat, curl, put, sesame

我正在尝试通过 cURL 使用 http PUT 来更新我在 openrdf-sesame 中的三重存储，但是我遇到了一个我找不到解决方案的问题。

使用 POST 时，三重数据完美上传。

但随后使用 PUT，而不是添加提供的数据，它会从我的存储库中删除所有数据。我在详细模式下运行了 cURL，它返回了预期的 HTTP 状态代码。

我已经添加

```
<init-param>
<param-name>readonly</param-name>
<param-value>false</param-value>
</init-param> 
```

对于 Apache Tomcat 的 web.xml，我也尝试过这里的指南：[HTTP PUT Guide](http://www.codereye.com/2010/12/configure-tomcat-to-accept-http-put.html)，但这也没有帮助。

**编辑** 这是我的批处理文件中的 cURL 命令：

```
call "%curl%" -# -X POST %endpoint%/statements -H "Content-Type:application/x-trig;charset=UTF-8" -d @%%X
call "%curl%" -# -X PUT %endpoint%/statements -H "Content-Type:application/x-trig;charset=UTF-8" -d @%%X 
```

本质上是：

```
curl.exe -# -X POST http://myendpoint/statements -H "Content-Type:application/x-trig;charset=UTF-8" -d @MyTrigFile.trig
curl.exe -# -X PUT http://myendpoint/statements -H "Content-Type:application/x-trig;charset=UTF-8" -d @MyTrigFile.trig 
```

目前，我已经禁用了身份验证，否则我也会包含一个`-u user:password`参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:52:45.407

我刚刚使用您调用 curl 的确切方式运行了一些测试，但我无法重现该问题（使用 Sesame 版本 2.6.8）：它在这里按预期工作。

我能想到的唯一可能的原因是您的 TriG 文件有一个语法错误，Sesame 无法报告回来。

另一个可能的问题是您的期望：执行该命令时将完全清除*整个*存储库并将数据替换为 TriG 文件的内容。你可能期待别的东西吗？

为了进一步调试，您可以查看 Sesame 服务器日志并告诉我们它是否显示任何警告或错误？通过`http://<server:port>/openrdf-sesame/` 在浏览器中并单击左侧菜单中的“系统”可以查看服务器日志。

# mysql - 选择要运行查询的特定记录

> ID：11956485
> 
> 赞同：1
> 
> 时间：2012-08-14T16:12:35.280
> 
> 标签：mysql, sql

我正在尝试在一个较大的数据库中选择少量记录并对其运行一些查询。

我对编程非常陌生，所以我很迷茫。

我需要做的是选择 Registraton# 列等于某个数字的所有记录，然后仅对这些结果运行查询。

如果需要，我可以提出数据库的外观和更详细的解释，尽管我认为这可能是一些我只是想念的简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:17:50.553

过滤数据库中的记录是使用 WHERE 子句完成的。

例如，如果您想从 Persons 表中获取所有记录，其中 FirstName = 'David"

```
SELECT 
  FirstName, 
  LastName, 
  MiddleInitial, 
  BirthDate, 
  NumberOfChildren 
FROM 
  Persons 
WHERE 
  FirstName = 'David' 
```

***您的问题表明您已经弄清楚了很多，但只是错过了下一部分。***

如果您需要在上述结果集的结果中查询只包括有两个以上孩子的人，您只需使用 AND 关键字添加到 WHERE 子句中。

```
SELECT 
  FirstName, 
  LastName, 
  MiddleInitial, 
  BirthDate, 
  NumberOfChildren 
FROM 
  Persons 
WHERE 
  FirstName = 'David'
   AND
   NumberOfChildren > 3 
```

现在，在某些情况下您确实需要使用子查询。例如：

假设每个人都有一个PersonId，每个人都有一个FatherId，对应另一个人的PersonId...

```
PersonId  FirstName  LastName FatherId...
1         David      Stratton  0
2         Matthew    Stratton  1

Select FirstName, 
  LastName 
FROM 
  Person 
WHERE 
 FatherId IN (Select PersonId 
              From Person 
              WHERE FirstName = 'David') 
```

将与一位名叫大卫的父亲一起归还所有孩子。（使用样本数据，将返回 Matthew。）

[http://www.w3schools.com/sql/sql_where.asp](http://www.w3schools.com/sql/sql_where.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:15:49.377

我不知道你到目前为止做了什么，但我想你有一个 SQL 查询，比如

```
SELECT col1, col2, col3
FROM table 
```

附加 where 子句

```
SELECT col1, col2, col3
FROM table
WHERE "Registraton#" = number 
```

请参阅 SO question [SQL standard to escape column names？](https://stackoverflow.com/questions/2901453/sql-standard-to-escape-column-names).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:15:49.117

这对你有用吗？

```
SELECT * from table_name WHERE Regestration# = number 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:16:02.353

试试这个：

```
SELECT *
FROM tableName
WHERE RegistrationNo = 'valueHere' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T16:17:28.930

我不确定我的解决方案。我建议您使用视图。您根据需要的记录创建视图。然后进行所需的查询，然后您可以删除该视图。

视图描述：视图包含行和列，就像真实的表一样。视图中的字段是来自数据库中一个或多个真实表的字段。

例子：

```
CREATE VIEW view_name AS
SELECT column_name(s)
FROM table_name
WHERE condition 
```

欲了解更多信息：[http ://www.w3schools.com/sql/sql_view.asp](http://www.w3schools.com/sql/sql_view.asp)

# javascript - Blackberry Webworks：Cookie 未保存在 OS 5 上

> ID：11956494
> 
> 赞同：0
> 
> 时间：2012-08-14T16:12:57.947
> 
> 标签：javascript, jquery, cookies, blackberry-webworks

我正在尝试使用 cookie 在两个页面之间传递数据。我使用原生 javascript (document.cookie) 和 jquery (cookie 插件) 来保存它们，但仍然出现错误。

在真实设备上进行测试时不会保存任何 cookie。这些值从未设置，因此它们为空。

他们完美地在模拟器上工作。奇怪的是，如果我在保存 cookie 之前加载远程内容（例如：来自 Google CDN 的脚本），它就可以工作。

我还没有在这个问题上找到任何东西。

*   设备：黑莓9700 OS 5
*   黑莓网络软件 SDK：2.3.1.5
*   模拟器：黑莓 9700 / 8520 OS 5

更新：这是我用来保存 cookie 的测试代码。

```
<script>

    function getCookie(c_name)
    {
    if (document.cookie.length>0)
      {
      c_start=document.cookie.indexOf(c_name + "=");
      if (c_start!=-1)
        {
        c_start=c_start + c_name.length+1;
        c_end=document.cookie.indexOf(";",c_start);
        if (c_end==-1) c_end=document.cookie.length;
        return unescape(document.cookie.substring(c_start,c_end));
        }
      }
    return "";
    }

    function setCookie(c_name,value,expiredays)
    {
    var exdate=new Date();
    exdate.setDate(exdate.getDate()+expiredays);
    document.cookie=c_name+ "=" +escape(value)+
    ((expiredays==null) ? "" : ";expires="+exdate.toUTCString());
    }        

    $(document).ready(function(){
        $("#next").click(function(){
            var opt = $("#options option:selected").val();
            setCookie("option",opt,100);                
            window.location.href = "two.html";
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:56:19.810

尝试使用此处概述的方法...

[http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Cookie-support-in-OS5/mp/1448253#M18924](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Cookie-support-in-OS5/m-p/1448253#M18924)

来自黑莓论坛。

# python - 简单的python程序的问题

> ID：11956499
> 
> 赞同：1
> 
> 时间：2012-08-14T16:13:25.370
> 
> 标签：python, windows, string, if-statement, boolean

我有一个程序可以问我行星离太阳有多远。唯一的问题是，无论我给出什么答案，它总是显示为正确的。这是我的代码的链接：http: [//pastebin.com/MimECyjm](http://pastebin.com/MimECyjm)

如果可能的话，我想要一个更简单的答案，因为我还不太精通 python

有问题的代码：

```
mercury = "57.9"
mercury2 = "57900000"

def Mercury():
    ans = raw_input("How far is Mercury from the sun? ")
    if mercury or mercury2 in ans:
        print "Correct!"
        time.sleep(.5)
        os.system("cls")
        main()
    else:
        print "Incorrect!"
        Mercury() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T16:17:16.943

问题是你有：

```
if mercury or mercury2 in ans: 
```

这个 if 语句将是`True`if`mercury`评估为`True`（它总是如此）或 when `mercury2 in ans`is `True`。

`mercury`是一个非空字符串 ( `mercury = "57.9"`)，其计算结果为`True`. 例如，尝试`bool("57.9")`查看 Python 总是计算`True`非空字符串。如果字符串为空，则为`False`.

所以无论用户回答什么，你的代码总是会说它是正确的。这是你可以写的：

```
if mercury in ans or mercury2 in ans: 
```

但写起来可能更好（见下面评论中的讨论）：

```
if ans in [mercury, mercury2]: 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T16:19:36.963

你有这个：

```
if mercury or mercury2 in ans: 
```

而不是这个：

```
if ans in (mercury, mercury2): 
```

但是你有一个**更深层次的问题**。像这样的代码

```
def Mercury():
    ans = raw_input("How far is Mercury from the sun? ")
    if mercury or mercury2 in ans:
        print "Correct!"
        time.sleep(.5)
        os.system("cls")
        main()
    else:
        print "Incorrect!"
        Mercury() 
```

最终会导致**stackoverflow**。这是因为您正在调用函数，但从未**从它们返回！**

您应该重组代码以使用[`while`](http://docs.python.org/reference/compound_stmts.html#the-while-statement)循环

您还应该考虑从程序中删除一些重复项

例如，您可以使用这样的功能

```
def main():
    while True:    
        print "Planetary Distance from the Sun"
        time.sleep(.5)
        rand = random.randint(1,1)
        if rand==1:
            ask_planet_distance("Mercury", mercury, mercury2)
        elif rand==2:
            ask_planet_distance("Venus", venus, venus2)
        ...

def ask_planet_distance(planet_name, distance1, distance2):
    while True:
        ans = raw_input("How far is {} from the sun? ".format(planet_name))
        if ans in (distance1, distance2):
            break
        else:
            print "Incorrect!"
    print "Correct!"
    time.sleep(.5)
    os.system("cls") 
```

您可以通过将行星数据存储在一个`list`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T16:18:02.173

问题在于您的 if 语句条件。

例子：

```
if ans == venus or venus2: 
```

这应该是：

```
if ans == venus or ans == venus2: 
```

# gpl - 重新分发开源代码

> ID：11956502
> 
> 赞同：-1
> 
> 时间：2012-08-14T16:13:43.673
> 
> 标签：gpl

我正在开发有助于立即开始网站开发的应用程序`CodeIgniter`。熟悉的人都`CodeIgniter`知道，“开箱即用”只启用了核心模块。我的应用程序将询问用户预期的功能，并生成引导程序以快速启动。

我已经工作`CodeIgniter`了很长时间，所以我有自己的开发来增强功能。同样，如果需要，我想使用一些开源的第三方库来包含它们。

然后我将在 GPL 许可证上分发我的应用程序。

我的问题是关于法律方面的。

有了`CodeIgniter`框架，一切都很清楚，因为他们有`licence.txt`文件，其中清楚地说明了所有重新分配的要求。

但是没有任何关于再分发的信息的第三方库呢？我是否必须联系他们的作者，或者我可以无耻地将他们的代码用于我自己的目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:22:17.390

大多数开源代码都有某种许可安排。换句话说，他们会在一些文件中说明使用条款是什么。这篇散文可以在自述文件中，甚至可以在代码头中。

这是一篇关于开源许可的文章，描述了最流行的类型。[http://www.smashingmagazine.com/2010/03/24/a-short-guide-to-open-source-and-similar-licenses/](http://www.smashingmagazine.com/2010/03/24/a-short-guide-to-open-source-and-similar-licenses/)

如果您的 3rd 方包中没有此类信息，您可能需要联系作者。大多数人都非常自由地使用他们的代码，否则他们将拥有商业许可证。

编辑：这个答案假设您项目中的所有代码都是开源的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:23:13.703

你可以按照我对 Symfony 所做的操作：

我使用框架和插件 (sfAltumoPlugin) 创建了一个空白项目 (read to go)： [https ://github.com/homer6/blank_altumo](https://github.com/homer6/blank_altumo)

它包含在一个 git 子模块中： [https ://github.com/homer6/sfAltumoPlugin](https://github.com/homer6/sfAltumoPlugin)

然后包含独立于框架的库： [https ://github.com/homer6/altumo](https://github.com/homer6/altumo)

因此，可重用且独立于项目但依赖于框架（在您的情况下为代码点火器）的代码将进入插件。独立于框架的代码将放在主库中（在我的例子中是 altumo）。

因此，当它像这样分开时，您可以清楚地列出在您的 readme.md 中的许可标题中使用的许可。如果可以的话，尽量坚持自由的 OSS 许可证，比如 MIT。但是，如果是 OSS，则无需联系库维护人员。因此，即使 GPL 也允许您将库集成到您的库中（因为您正在重新分发您的库和他们的库的整个源代码）。

希望有帮助...

# python - 如何使用 python json 模块处理带有转义 Unicode 字符的 JSON？

> ID：11956503
> 
> 赞同：-1
> 
> 时间：2012-08-14T16:13:47.630
> 
> 标签：python, json, google-app-engine, unicode

编辑：错误不会出现在提示中，而是出现在以下 Google App Engine 环境中。 ![代码执行环境](../Images/7d57a777d6a19897e7ee5c5a312ea045.png) 我有以下 json

```
>>>dat = r"""{"name":"Something", "data":"For youth \n\nBe a hero! Donate blood!\n\u091c\u092f \u0939\u093f\u0902\u0926! \u0935\u0928\u094d\u0926\u0947 \u092e\u093e\u0924\u0930\u092e\u094d"}""" 
```

它包含 unicode 转义字符。我想解析这个。所以我做了

```
>>>jsDat = json.loads(js) 
```

然后以下作品

```
>>>name = jsDat.get('name')
>>>name = name.encode('ascii') #This is because json module handles in unicode
>>>print name
Something 
```

但是尝试使用 unicode 数据的字段，即“数据”，则会显示错误

```
>>>data = jsDat.get('data')
UnicodeEncodeError: 'ascii' codec can't encode characters in position 366-367: ordinal not in range(128) 
```

我应该如何解析数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:26:18.180

如果字符超出 ASCII 字符集，则无法将 unicode 编码为 ASCII。如果要强制转换并丢失数据，可以执行以下操作：

```
data = jsDat.get('data')
data = data.encode('ascii', 'ignore') 
```

有关忽略的更多详细信息，请参阅[str.encode的文档。](http://docs.python.org/library/stdtypes.html#str.encode)

顺便说一句，我不确定您为什么要尝试编码为 ASCII - JSON 模块似乎可以很好地处理该原始字符串？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:01:59.167

该错误来自您的“打印”行，只是因为您尝试打印到不理解编码的“终端”。对 JSON 对象执行任何其他操作都不会产生错误。

# forms - Joomla 2.5寄存器形式的链式组合

> ID：11956507
> 
> 赞同：0
> 
> 时间：2012-08-14T16:14:05.547
> 
> 标签：forms, joomla, registration, joomla2.5

早上好。我正在使用 joomla 2.5，我需要在我的用户表单注册中添加额外的字段，我使用用户配置文件插件并添加 2 个额外的字段 SQL 类型，此时一切正常，但我需要，这些字段像链式一样工作组合即：当我选择一个**Departamento**（部门）时，我需要字段**Municipio**（Municipalitie）只显示属于该部门的市政当局。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:24:48.507

由于您没有指定您希望使用哪种语言完成此操作[。Mike Tuupola](http://www.appelsiini.net/2010/jquery-chained-selects)可以使用一个 jquery 插件来执行此操作。你可能想检查一下。

# java - Eclipse 插件开发 - 使用许多文件，将 MultiPageEditor 标记为脏抛出异常

> ID：11956510
> 
> 赞同：0
> 
> 时间：2012-08-14T16:14:13.490
> 
> 标签：java, exception, eclipse-plugin

我正在写eclipse插件。我有 MultiPageEditor，其中有 5 页。在第一页有一个扩展 GraphicalEditor(geEx) 的编辑器，在第二页有 2(logicInputEditor, logicOutputEditor) GroovyEditor 的 org.codehaus.groovy.eclipse.editor.GroovyEditor)。geEx 正在处理一个文件（例如 first.qwe），而 logicEditors 正在处理另外两个文件（in.groovy、out.groovy）。在 geEx 中有一个代码：

```
 @Override
                public void commandStackChanged(EventObject event) {
                        firePropertyChange(IEditorPart.PROP_DIRTY);
                        super.commandStackChanged(event);
                } 
```

当我首先编辑文件时。qwe MultiPageEditor 知道某些内容已被修改并标记它并允许保存文件 - 一切都很好。

我将侦听器添加到 GrooveEditors：

```
 logicInputEditor.addPropertyListener(new IPropertyListener() {
                                @Override
                                 public void propertyChanged(Object source, int propId) {
                                         if (propId == IEditorPart.PROP_DIRTY){
                                                 firePropertyChange(IEditorPart.PROP_DIRTY);
                                         }
                                 }
                         }); 
```

我无法覆盖 commandStackChanged 函数，因为 GrooveEditor 没有实现 CommandStackListener。

每次我在 GroovyEditor 中编辑某些内容时，MultiPageEditor 都会将其状态更改为脏 - 这就是我想要的，但控制台上也会打印异常。所以-它按我的意愿工作，但是每次用户在编辑器中键入某些内容时抛出和捕获异常很慢而且通常很糟糕。

消息是：

```
Problem trying to determine classpath of project Test:
 Java Model Exception: Java Model Status [Test does not exist]
 at org.eclipse.jdt.internal.core.JavaElement.newNotPresentException(JavaElement.java:495)
 at org.eclipse.jdt.internal.core.JavaModelManager.getPerProjectInfoCheckExistence(JavaModelManager.java:2287)
 at org.eclipse.jdt.internal.core.JavaProject.getPerProjectInfo(JavaProject.java:1914)
 at org.eclipse.jdt.internal.core.JavaProject.getOutputLocation(JavaProject.java:1741)
 at org.eclipse.jdt.core.util.CompilerUtils.calculateClasspath(CompilerUtils.java:209)
 at org.eclipse.jdt.core.util.CompilerUtils.setGroovyClasspath(CompilerUtils.java:152)
 at org.eclipse.jdt.core.util.CompilerUtils.setGroovyClasspath(CompilerUtils.java:117)
 at org.codehaus.jdt.groovy.model.GroovyCompilationUnit.buildStructure(GroovyCompilationUnit.java:260)
 at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:258)
 at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:526)
 at org.eclipse.jdt.internal.core.CompilationUnit.makeConsistent(CompilationUnit.java:1100)
 at org.codehaus.jdt.groovy.model.GroovyReconcileWorkingCopyOperation.makeConsistent(GroovyReconcileWorkingCopyOperation.java:60)
 at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:89)
 at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
 at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:788)
 at org.codehaus.jdt.groovy.model.GroovyCompilationUnit.reconcile(GroovyCompilationUnit.java:423)
 at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1231)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:133)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:108)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:89)
 at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:151)
 at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:86)
 at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:104)
 at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:77)
 at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:206) 
```

或者：

```
!ENTRY org.eclipse.jdt.core 4 4 2012-08-13 20:33:29.402
 !MESSAGE Problem with build structure for in.groovy
 !STACK 1
 Java Model Exception: Java Model Status [Test does not exist]
 at org.eclipse.jdt.internal.core.JavaElement.newJavaModelException(JavaElement.java:505)
 at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:246)
 at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:526)
 at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:255)
 at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:241)
 at org.eclipse.jdt.internal.core.JavaProject.getJavaProjectElementInfo(JavaProject.java:1646)
 at org.eclipse.jdt.internal.core.JavaProject.newNameLookup(JavaProject.java:2334)
 at org.eclipse.jdt.internal.core.SearchableEnvironment.<init>(SearchableEnvironment.java:59)
 at org.eclipse.jdt.internal.core.SearchableEnvironment.<init>(SearchableEnvironment.java:66)
 at org.eclipse.jdt.internal.core.CancelableNameEnvironment.<init>(CancelableNameEnvironment.java:26)
 at org.eclipse.jdt.internal.core.CompilationUnitProblemFinder.process(CompilationUnitProblemFinder.java:178)
 at org.codehaus.jdt.groovy.model.GroovyCompilationUnit.buildStructure(GroovyCompilationUnit.java:338)
 at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:258)
 at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:526)
 at org.eclipse.jdt.internal.core.CompilationUnit.makeConsistent(CompilationUnit.java:1100)
 at org.codehaus.jdt.groovy.model.GroovyReconcileWorkingCopyOperation.makeConsistent(GroovyReconcileWorkingCopyOperation.java:60)
 at org.eclipse.jdt.internal.core.ReconcileWorkingCopyOperation.executeOperation(ReconcileWorkingCopyOperation.java:89)
 at org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:728)
 at org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:788)
 at org.codehaus.jdt.groovy.model.GroovyCompilationUnit.reconcile(GroovyCompilationUnit.java:423)
 at org.eclipse.jdt.internal.core.CompilationUnit.reconcile(CompilationUnit.java:1231)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:133)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.access$0(JavaReconcilingStrategy.java:108)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy$1.run(JavaReconcilingStrategy.java:89)
 at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:87)
 at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconcile(JavaReconcilingStrategy.java:151)
 at org.eclipse.jdt.internal.ui.text.CompositeReconcilingStrategy.reconcile(CompositeReconcilingStrategy.java:86)
 at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.reconcile(JavaCompositeReconcilingStrategy.java:104)
 at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconciler.java:77)
 at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread.run(AbstractReconciler.java:206)
 !SUBENTRY 1 org.eclipse.jdt.core 4 969 2012-08-13 20:33:29.402
 !MESSAGE Test does not exist 
```

问题是 - 我该如何解决这个问题？我应该如何向 MultiPageEditor 发送“消息”，GroovyEditor 之一是“脏”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:36:25.780

终于解决了——问题不在我的代码中，而是在 GroovyEditor 中——如果项目性质是 Java 项目性质（可能 Groovy 项目性质也可以）一切都很好，否则 GroovyEditor 会抛出异常。我已经向 Groove Editor 问题跟踪器报告了错误，并且已经解决了，所以在下一个版本中一切都应该没问题。现在唯一的解决方案是将 java 项目性质添加到项目的性质中。

# css - 块内的绝对定位 div，具有位置：固定和滚动条

> ID：11956513
> 
> 赞同：5
> 
> 时间：2012-08-14T16:14:17.827
> 
> 标签：css, scroll, css-position

我有一个 div `position: fixed`，其中包含其他两个 div：一个包含内容，第二个必须始终位于主 div 的底部。

这是一个例子：

```
.scroller {
  position: fixed;
  border: 1px solid #ddd;
  width: 240px;
  height: 100px;
  top: 0;
  bottom: 0;
  overflow: auto;
}
.footer {
  position: absolute;
  bottom: 0;
}
```

```
<div class="scroller">
  <div class="content">
    <div>content</div><div>content</div><div>content</div><div>content</div>
    <div>content</div><div>content</div><div>content</div><div>content</div>
    <div>content</div><div>content</div><div>content</div><div>content</div>
  </div>
  <div class="footer">FOOTER</div>
</div>
```

问题是当用户滚动主块的内容时，页脚开始与其他内容一起移动，尽管 position:absolute 页脚块。

有没有办法在不改变 html 结构的情况下将页脚粘贴到主固定块的底部？

如果主 div 包含许多子元素，而其中只有最后一个是我们需要固定在底部的页脚怎么办？例子：

```
.scroller {
  position: fixed;
  border: 1px solid #ddd;
  width: 240px;
  height: 100px;
  top: 0;
  bottom: 0;
  overflow: auto;
}
.footer {
  position: absolute;
  bottom: 0;
}
```

```
<div class="scroller">
  <div class="content">
    <div>content</div><div>content</div><div>content</div><div>content</div>
  </div>
  <div class="content">
    <div>content</div><div>content</div><div>content</div><div>content</div>
  </div>
  <div class="content">
    <div>content</div><div>content</div><div>content</div><div>content</div>
  </div>
  <div class="footer">FOOTER</div>
</div>
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T16:19:08.820

由于绝对定位的元素在内部`.scroller`，并且您不希望它在滚动时移动，因此可滚动容器应该`.content`改为`.scroller`.

```
.content {
  height: 100px;
  overflow: auto;
} 
```

此外，您应该`bottom: 0`从固定包装中移除，以便其高度由其内容给出，即`100px`.

```
.scroller {
  position: fixed;
  border: 1px solid #ddd;
  width: 240px;
}
.content {
  height: 100px;
  overflow: auto;
}
.footer {
  position: absolute;
  bottom: 0;
}
```

```
<div class="scroller">
  <div class="content">
    <div>content</div><div>content</div><div>content</div><div>content</div>
    <div>content</div><div>content</div><div>content</div><div>content</div>
    <div>content</div><div>content</div><div>content</div><div>content</div>
  </div>
  <div class="footer">FOOTER</div>
</div>
```

如果您想要多个`.content`元素并且不想单独滚动每个元素，您可以将它们全部包装在一个`.scroller-inner`容器中，并将上面的样式设置为它。

```
.scroller {
  position: fixed;
  border: 1px solid #ddd;
  width: 240px;
}
.scroller-inner {
  height: 100px;
  overflow: auto;
}
.footer {
  position: absolute;
  bottom: 0;
}
```

```
<div class="scroller">
  <div class="scroller-inner">
    <div class="content">
      <div>content</div><div>content</div><div>content</div><div>content</div>
    </div>
    <div class="content">
      <div>content</div><div>content</div><div>content</div><div>content</div>
    </div>
    <div class="content">
      <div>content</div><div>content</div><div>content</div><div>content</div>
    </div>
  </div>
  <div class="footer">FOOTER</div>
</div>
```

或者，如果您知道页眉的高度，则可以将页脚设为固定元素，并使用边距来更正其位置。不过，这有点 hacky。

```
.scroller {
  position: fixed;
  border: 1px solid #ddd;
  width: 240px;
  height: 100px; /* val1 */
  top: 0; /* val2 */
  overflow: auto;
}
.footer {
  position: fixed;
  white-space: nowrap;
  top: 100px; /* val1 + val2 */
  line-height: 20px; /* val3 */
  font-size: 16px; /* val4 */
  margin-top: -18px; /* val3/2 + val4/2 */
}
```

```
<div class="scroller">
  <div class="content">
    <div>content</div><div>content</div><div>content</div><div>content</div>
  </div>
  <div class="content">
    <div>content</div><div>content</div><div>content</div><div>content</div>
  </div>
  <div class="content">
    <div>content</div><div>content</div><div>content</div><div>content</div>
  </div>
  <div class="footer">FOOTER</div>
</div>
```

# apache - 如何使用 Apache 2.4 重写 XML 中的 URL？

> ID：11956514
> 
> 赞同：3
> 
> 时间：2012-08-14T16:14:23.803
> 
> 标签：apache, mod-proxy, mod-proxy-html

Apache 2.4 包含[mod_proxy_html](http://httpd.apache.org/docs/2.4/mod/mod_proxy_html.html)，这很棒，它可以捕获从服务器返回的 HTML 中的各种 URL 并修复它们。但是我有一个 Seam 应用程序，它有时会使用完全限定的 URL 将文本/xml 文件发送回客户端，这些 URL 也需要重写，而 mod_proxy_html 不能修复它们。

显然有一个[mod_proxy_xml](http://apache.webthing.com/mod_proxy_xml/)曾经与 mod_proxy_html 分开存在，但 Apache 没有包含它。有没有办法让 mod_proxy_html 配置为做同样的事情？我需要它来修复从服务器返回的 HTML 和 XML 文件中的 URL。

跟进：

我继续与此作斗争，我尝试了一些不同的解决方案但没有成功，包括使用 mod_substitute （不知何故我配置不正确，因为它似乎永远不会用任何东西代替任何东西）和使用强制标志 mod_proxy_html 必须尝试强制它执行某个路径下的所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-20T22:02:38.063

这是一个老问题，但我刚刚遇到了同样的问题。我尝试使用 mod_proxy_html，编译 mod_proxy_xml，但没有任何效果。

@JonLin 的建议是正确的，它适用于 mod_sed。唯一的 if 是 mod_sed 被记录在目录节点内工作。如果您声明一个 Location 并执行 SetOutputFilter 而不是 AddOutputFilter （需要 mime 类型），它会很好地工作。

有效的配置是：

```
<Location "/">
    SetOutputFilter Sed
    OutputSed "s,http://internal:80,https://external.com,g"
</Location> 
```

# c - GCC 和 makefile：只显示错误和警告

> ID：11956518
> 
> 赞同：14
> 
> 时间：2012-08-14T16:14:39.583
> 
> 标签：c, gcc, makefile

我有一个编译项目中每个 .c 文件的 makefile。对于每个文件，我都会将整个编译命令打印到 shell 中，其中包含所有选项和标志。这是一个文件的示例输出：

> arm-none-eabi-gcc -c -mcpu=cortex-m3 -O0 -dM -g -gdwarf-2 -mthumb -fomit-frame-pointer -fverbose-asm -Wa,-ahlms=src/sim/sim_configuration.lst -包括 ./lib/stm32core/stm32f2xx_conf.h -I 。-I./lib/ARMStandardLibrary -I./lib/LwIP -I./lib/LwIP/src/include -I./lib/LwIP/src/include -I./lib/LwIP/src/include/ipv4 - I./lib/LwIP/src/include/ipv6 -I./lib/FatFS -I./lib/stm32core -I./src -I./src/sim -I./src/sd -I./src /tftp src/sim/sim_configuration.c -o src/sim/sim_configuration.o

问题是各种警告在这整个混乱的命令输出中丢失了。有没有办法*只*打印出现的警告和错误（*不是*原始命令）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-14T16:18:03.347

`make`使用`-s`选项执行。从[手册页](http://linux.die.net/man/1/make)。

```
-s, --silent, --quiet
    Silent operation; do not print the commands as they are executed. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T16:15:47.740

只需在命令前面[加上`@`符号](http://www.gnu.org/software/make/manual/make.html#Echoing)。

如果您依赖[内置的隐式规则](http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules)，则必须使它们显式，或者在您的特定情况下，您可以使用：

```
.SILENT: *.o 
```

用于使用于构建`%.o`目标的所有命令静音。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-14T16:20:22.193

您始终可以过滤来自 的所有输出`stdout`，这应该会给您留下所有错误`stderr`：

```
make 1>/dev/null 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-14T16:16:12.260

在命令之前使用`@`来隐藏它：

```
rule1:
  @gcc someting 
```

# r - R knitr Markdown：For循环内的输出图

> ID：11956520
> 
> 赞同：69
> 
> 时间：2012-08-14T16:14:53.667
> 
> 标签：r, ggplot2, knitr, rstudio

我想创建一个自动 knitr 报告，该报告将为我的数据框中的每个数字字段生成直方图。我的目标是在不必指定实际字段的情况下执行此操作（此数据集包含 70 多个，我还想重用该脚本）。

我尝试了几种不同的方法：

*   将绘图保存到对象，`p`然后`p`在循环 后调用
    *   这仅绘制最终图
*   创建一个绘图数组`PLOTS <- NULL`，并将绘图附加到循环中`PLOTS <- append(PLOTS, p)`
    *   从循环中访问这些图根本不起作用
*   甚至尝试将每个文件保存到`.png`文件中，但宁愿不必处理保存然后重新访问每个文件的开销

恐怕情节装置的复杂性正在逃避我。

## 问题

如何使以下块输出循环中的每个图到报告中？目前，我能做到的最好的结果是通过将其保存到一个对象并在循环之外调用该对象来生成最终绘图的输出。

`knitr`在 RStudio 中使用的 R 降价块：

```
```{r plotNumeric, echo=TRUE, fig.height=3}
suppressPackageStartupMessages(library(ggplot2))
FIELDS <- names(df)[sapply(df, class)=="numeric"]
for (field in  FIELDS){
  qplot(df[,field], main=field)  
}
``` 
```

从这一点来说，我希望进一步定制情节。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-15T09:46:05.637

包`qplot`进去`print`。

`knitr`如果在循环之外，将为您执行此操作`qplot`，但是（至少我安装的版本）在循环内没有检测到这一点（这与 R 命令行的行为一致）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-07-18T21:20:31.267

希望添加一个快速说明：不知何故，我用谷歌搜索了同样的问题并进入了这个页面。现在在 2018 年，只需`print()`在循环中使用。

```
for (i in 1:n){
...
    f <- ggplot(.......)
    print(f)
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-14T09:52:19.040

我在 markdown 中使用子 Rmd 文件，也适用于 sweave。

在 Rmd 中使用以下代码段：

```
```{r run-numeric-md, include=FALSE}
out = NULL
for (i in c(1:num_vars)) {
  out = c(out, knit_child('da-numeric.Rmd'))
}
``` 
```

da-numeric.Rmd 看起来像：

```
Variabele `r num_var_names[i]`
------------------------------------

Missing :  `r sum(is.na(data[[num_var_names[i]]]))`  
Minimum value : `r min(na.omit(data[[num_var_names[i]]]))`  
Percentile 1 : `r quantile(na.omit(data[[num_var_names[i]]]),probs = seq(0, 1, 0.01))[2]`  
Percentile 99 : `r quantile(na.omit(data[[num_var_names[i]]]),probs = seq(0, 1, 0.01))[100]`  
Maximum value : `r max(na.omit(data[[num_var_names[i]]]))`  

```{r results='asis', comment="" }
warn_extreme_values=3
d1 = quantile(na.omit(data[[num_var_names[i]]]),probs = seq(0, 1, 0.01))[2] > warn_extreme_values*quantile(na.omit(data[[num_var_names[i]]]),probs = seq(0, 1, 0.01))[1]
d99 = quantile(na.omit(data[[num_var_names[i]]]),probs = seq(0, 1, 0.01))[101] > warn_extreme_values*quantile(na.omit(data[[num_var_names[i]]]),probs = seq(0, 1, 0.01))[100]
if(d1){cat('Warning : Suspect extreme values in left tail')}
if(d99){cat('Warning : Suspect extreme values in right tail')}
```

``` {r eval=TRUE,  fig.width=6, fig.height=2}
library(ggplot2)

v <- num_var_names[i]
hp <- ggplot(na.omit(data), aes_string(x=v)) + geom_histogram( colour="grey", fill="grey", binwidth=diff(range(na.omit(data[[v]]))/100))

hp + theme(axis.title.x = element_blank(),axis.text.x = element_text(size=10)) + theme(axis.title.y = element_blank(),axis.text.y = element_text(size=10))

``` 
```

在 github 上查看我的 datamineR 包 [https://github.com/hugokoopmans/dataMineR](https://github.com/hugokoopmans/dataMineR)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-12T04:30:38.427

作为 Hugo 出色答案的补充，我相信在 2016 年您还需要包含一个[`print`命令](http://allican.be/blog/2016/02/07/rmarkdown_loops_and_knitr.html)：

```
```{r run-numeric-md, include=FALSE}
out = NULL
for (i in c(1:num_vars)) {
  out = c(out, knit_child('da-numeric.Rmd'))
}

`r paste(out, collapse = '\n')`
``` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-04T15:52:53.190

对于将 Rmd 编​​织成 HTML，我发现有一个数字列表更方便。在这种情况下，我得到了理想的输出，`results='hide'`如下所示：

> ```
> ---
> title: "Make a list of figures and show it"
> output: 
>   html_document
> ---
> 
> ```{r}
> suppressPackageStartupMessages({
>   library(ggplot2)
>   library(dplyr)
>   requireNamespace("scater")
>   requireNamespace("SingleCellExperiment")
> })
> ```
> 
> ```{r}
> plots <- function() {
>   print("print")
>   cat("cat")
>   message("message")
>   warning("warning")
>   
>   # These calls generate unwanted text
>   scater::mockSCE(ngene = 77, ncells = 33) %>%
>     scater::logNormCounts() %>%
>     scater::runPCA() %>%
>     SingleCellExperiment::reducedDim("PCA") %>%
>     as.data.frame() %>%
>     {
>       list(
>         f12 = ggplot(., aes(x = PC1, y = PC2)) + geom_point(),
>         f22 = ggplot(., aes(x = PC2, y = PC3)) + geom_point()
>       )
>     }
> }
> ```
> 
> ```{r, message=FALSE, warning=TRUE, results='hide'}
> plots()
> ``` 
> ```

仅显示绘图和警告（您也可以将其关闭）。

# ruby - 是否有适用于 Ruby 的轻量级通用验证库/DSL？

> ID：11956522
> 
> 赞同：1
> 
> 时间：2012-08-14T16:15:06.467
> 
> 标签：ruby, database, validation, testing

我正在对各种数据源进行大量批量数据验证，我发现自己正在编写这样的样板代码：

```
if summed_payments != row['Total']
  raise "The sum of the payments, #{summed_payments} != #{row['Total']}"
end 
```

我想知道是否有一种方法可以应用 DSL，例如 Minitest，但将其用于不涉及应用程序测试的目的？例如，在批量数据导入和验证脚本期间查找和记录错误......这是一个快速而肮脏的脚本，我不想为其编写测试套件，但我想做一些不同的类型的验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:28:17.763

我认为独立的 ActiveModel 应该对此有好处。

观看此 railscast 了解更多信息：[http ://railscasts.com/episodes/219-active-model](http://railscasts.com/episodes/219-active-model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T20:25:26.993

如果您愿意，可以查看[http://rubygems.org/gems/validates_simple](http://rubygems.org/gems/validates_simple)，这是一个用于对哈希进行简单验证的 gem，试图模仿活动模型验证方法的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T21:52:33.573

我知道这有点老了，但我们的[Veto](https://github.com/kodio/veto) gem 可能是您正在寻找的：[https ://github.com/kodio/veto](https://github.com/kodio/veto)

普通旧 ruby​​ 对象的独立验证，没有依赖关系。

# python - 在 Python 中将 json 解析为自定义结构（类似于 Java JAXB）

> ID：11956524
> 
> 赞同：1
> 
> 时间：2012-08-14T16:15:09.753
> 
> 标签：python, json, binding

我知道我可以使用 json 或 simplejson 库在 Python 中解析 json。但是，我的理解是，目前这些库将填充通用数据结构（列表和字典）。

在 Python 中是否有一些用于 JSON 的东西，例如 Java 中的 JAXB 用于 XML ？

例如，

我的一个 JSON 如下所示。

```
json_content  =  {'return': {'status':'active', 'memory' : { 'total': 21547878238, 'remaining':234787342, 'transferred': 7877482472}}, 'id': 'some-id'} 
```

# ios - 创建 NSFetchedResultsController 时获取 objc_exception_throw

> ID：11956528
> 
> 赞同：0
> 
> 时间：2012-08-14T16:15:18.250
> 
> 标签：ios, core-data

创建 NSFetchedResultsController 对象时出现以下错误

**编辑**

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Subscriptions" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20]; 
```

**编辑结束**

```
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];

#0  0x977109c6 in __pthread_kill ()
#1  0x96296f78 in pthread_kill ()
#2  0x96287bdd in abort ()
#3  0x0022eb71 in uncaught_exception_handler ()
#4  0x024b70fc in __handleUncaughtException ()
#5  0x0264af0f in _objc_terminate ()
#6  0x052fb8de in safe_handler_caller ()
#7  0x052fb946 in std::terminate ()
#8  0x052fcab2 in __cxa_throw ()
#9  0x0264ade1 in objc_exception_throw ()
#10 0x00617f39 in -[NSFetchedResultsController initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:] () 
```

我应该开始寻找问题的任何想法。这个错误没有任何帮助。

我已经放了一个断点并且已经检查了输入 init 函数有两个输入，一个是托管对象，第二个是获取请求。

与下面的答案中提到的不同，这两个对象都是有效的。

** 解决方案 ** 看来排序描述符是强制性的，多亏了 Rog

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:52:55.510

实际上，这是一个非常有用的错误。如果你打算在 Objective-C 中编程，你需要习惯于阅读那些堆栈跟踪。

它说你给了 initWithFetchRequest 一些不好吃的东西。事实上，它太糟糕了，它抛出了一个异常。此外，我们知道您没有异常处理程序，因为调用了 std::terminate，最终程序中止。

您可以@catch 异常并自己处理以查看问题，或者，更好的是，放置一个断点来捕获所有异常（这是一个很好的建议，因为在 Objective-c 中，异常实际上是异常的）。

单击断点窗格（在左侧，带有右箭头图标）。在底部是一个小+。点击它。选择“添加异常断点”并让它在所有异常被抛出时中断。

现在，您可以查看实际的异常，它会为您提供指导。最有可能的是，它会告诉您获取请求配置不正确。也可能是你给它喂了一个糟糕的 MOC 或其他参数。

# xml - 使 XSLT 结果文档由“父”XSLT 文档递归处理

> ID：11956531
> 
> 赞同：3
> 
> 时间：2012-08-14T16:15:22.800
> 
> 标签：xml, xslt

我有文件grandchild.xml，它的结果用granchild.xsl处理后必须转发到child.xsl，然后必须最终由parent.xsl处理输出。

我尝试向`xml-stylesheet`结果文档添加一个元素，期望它被引用的 XSL 样式表处理，但没有发生任何事情。

完成这项任务的正确声明是什么？我在互联网上搜索了很多，没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:39:03.247

**以下是浏览器中的多遍转换示例**：

**让我们有这个源 XML 文档**：

```
<?xml-stylesheet title="XSL_formatting"
  type="text/xsl" href="MultiPassBrowser.xsl"?>
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**让我们进行这两个 XSLT 转换**：

# MultiPassBrowser1.xsl

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="num/text()">
  <xsl:value-of select=". *2"/>
 </xsl:template>
</xsl:stylesheet> 
```

和

# MultiPassBrowser2.xsl

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" mode="pass2">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*" mode="pass2"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="num" mode="pass2">
  <p><xsl:value-of select=". +1"/></p>
 </xsl:template>
</xsl:stylesheet> 
```

第一个转换“按原样”复制 XML 文档，但每个`num`元素的字符串值都乘以 2。

第二个转换“按原样”复制 XML 文档，但每个`num`元素的字符串值都递增。

如果将第二个变换应用于第一个变换的结果，则从初始`num`元素获得的最终值必须是 3、5、7、...、21。

**这是将这两者粘合在一起的转换**：

# MultiPassBrowser.xsl

```
<xsl:stylesheet version="1.0" 
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common"
 xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
 exclude-result-prefixes="ext msxsl">
 <xsl:import href="file:///C:/Temp/delete/MultiPassBrowser1.xsl"/>
 <xsl:import href="file:///C:/Temp/delete/MultiPassBrowser2.xsl"/>
 <xsl:output method="html"/>
 <xsl:strip-space elements="*"/>

 <msxsl:script language="JScript" implements-prefix="ext">
     this['node-set'] =  function (x) {
      return x;
      }
 </msxsl:script>

 <xsl:template match="/">
  <html>
      <xsl:variable name="vrtfPass1">
        <xsl:apply-templates select="/*"/>
      </xsl:variable>

      <xsl:apply-templates select="ext:node-set($vrtfPass1)/*/*"
                           mode="pass2"/>
  </html>
 </xsl:template>
</xsl:stylesheet> 
```

**当使用 IE、Firefox、Safari 和 Opera 打开 XML 文件时，结果是正确的、预期的结果**：

```
<html>
   <p>3</p>
   <p>5</p>
   <p>7</p>
   <p>9</p>
   <p>11</p>
   <p>13</p>
   <p>15</p>
   <p>17</p>
   <p>19</p>
   <p>21</p>
</html> 
```

**说明**：

1.  主要样式表模块（XML 文档 PI 中引用的那个）导入包含单独转换的两个样式表模块。

2.  第一次转换的结果被捕获在 variavle 中`$vrtfPass1`。

3.  在 XSLT 1.0 中，此类变量属于臭名昭著的“RTF”（结果树片段）类型，不能直接操作（只能`string()`在 RTF 上使用复制和函数）。在这里，我们使用`xxx:node-set()`扩展功能的可移植变体，它可以在 IE 和其他四种主要浏览器中运行。**这个可移植的扩展首先由@DavidCarlisle 提出，原文可以在[他的博客](http://dpcarlisle.blogspot.com/2007_05_01_archive.html)**中找到。

4.  然后将模式“pass2”中的模板应用于节点集，我们在上面的步骤中将 RTF 变量转换为该节点集。第二个导入的样式表模块中的所有模板都处于“pass2”模式，因此它们被选中执行。

5.  最终结果产生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:56:21.843

除非有人知道得更好，否则我相信在浏览器上递归处理 XSLT 输出的能力是不可能的。

为了证明这一点，我刚刚在 IE8、FF14 和 Chrome 中尝试了以下...

**level1.xml**

```
<?xml version="1.0" encoding="utf-8" ?> 
<?xml-stylesheet title="XSL_formatting" type="text/xsl" href="level1.xsl"?>
<data>
  <id>Level 1 data</id>
</data> 
```

**level1.xsl**

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="/">
     <?xml-stylesheet title="XSL_formatting" type="text/xsl" href="level2.xsl"?>
     <data2>
       <id2>Level 2: <xsl:value-of select="/data/id"/></id2>
     </data2>
   </xsl:template>   
</xsl:stylesheet> 
```

**level2.xsl**

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="/">
     <html>
       <body>
         <b>Level 3:</b> <xsl:value-of select="/data2/id2"/>
       </body>
     </html>
   </xsl:template>   
</xsl:stylesheet> 
```

所有 3 个浏览器的结果只是显示`Level 2: Level 1 Data`.

# regex - 如何解决用正则表达式添加

> ID：11956537
> 
> 赞同：0
> 
> 时间：2012-08-14T16:15:41.297
> 
> 标签：regex, math

我只想通过 1+2+3 等加法得到数学方程并返回其结果。我有以下代码，问题是它不处理双精度数（我不能写 2.2+3.4） 我试图将正则表达式更改为`([\+-]?\d+.\d+)([\+-])(-?(\d+.\d+))`，现在它不处理整数（我不能写 2+4）。处理双精度和整数的正确正则表达式应该是什么？感谢代码：

```
 regEx = new Regex(@"([\+-]?\d+)([\+-])(-?(\d+))");
        m = regEx.Match(Expression, 0);
        while (m.Success)
        {
            double result;
            switch (m.Groups[2].Value)
            {
                case "+":

                    result = Convert.ToDouble(m.Groups[1].Value) + Convert.ToDouble(m.Groups[3].Value);

                    if ((result < 0) || (m.Index == 0)) Expression = regEx.Replace(Expression, DoubleToString(result), 1);
                    else Expression = regEx.Replace(Expression, "+" + result, 1);
                    m = regEx.Match(Expression);
                    continue;
                case "-":
                    result = Convert.ToDouble(m.Groups[1].Value) - Convert.ToDouble(m.Groups[3].Value);
                    if ((result < 0) || (m.Index == 0)) Expression = regEx.Replace(Expression, DoubleToString(result), 1);
                    else Expression = regEx.Replace(Expression, "+" + result, 1);
                    m = regEx.Match(Expression);
                    continue;
            }
        }
        if (Expression.StartsWith("--")) Expression = Expression.Substring(2);
        return Expression;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:21:04.073

正如评论所说，RegEx*不是*解决这个问题的好方法。使用简单的拆分语句（如果您只想支持`+`and`-`运算符）或实际的解析器（如果您想支持实际的数学表达式）会好得多。

但是，为了解释一些正则表达式，您的问题是`\d+.\d+`匹配“一个或多个数字，后跟任何字符，后跟一个或多个数字”。如果你给它一个大于 99 的整数，它会起作用，因为你匹配的是`.`（任何​​字符）而不是`\.`（特别是点字符）。

一个更简单的版本是`[\d\.]+`，它匹配一个或多个数字或点。问题是它允许多个点，所以`8.8.8.8`是一个有效的匹配。所以你真正想要的是`\d+\.?\d*`，它匹配一个或多个数字、一个或零个点和零个或多个数字。因此`2`,`2.`和`2.05`都是有效匹配。

# javascript - 在正则表达式模式中需要帮助

> ID：11956542
> 
> 赞同：2
> 
> 时间：2012-08-14T16:15:54.183
> 
> 标签：javascript, regex

我有这个正则表达式模式

```
\=[a-zA-Z\.\:\[\]_\(\)\&\$\%#\-\@\!0-9;=\?/\+\xBF\~]+[?\s+|?>] 
```

我有这个 HTML

```
1.<a href="mailto: abc@xyz.com?subject=Long Term Care Enrollment">esc@xyz.com</a>
2.<a href="mailto: abc@xyz.com?subject=LongTerm Care Enrollment">johnross@zys.com</a>
3.<a href="mailto: abc@xyz.com?subject=LongTermCareEnrollment">johnross@wen.com</a> 
```

这里的问题是，我需要避免第一个和第二个，因为它也有空格并且它是有效的属性。但只有第三个正在工作，因为它没有空格。表示不应使用上述模式选择任何内容。

这是测试的直接链接

```
http://regexr.com?31r61 
```

请帮忙！谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:28:05.370

那是一个邪恶的角色类......

你为什么不尝试一些更合理的东西。试试这个...

```
\=".*?(?<!\\)" 
```

如果那是你想要得到的，那将匹配 href 之后括号中的任何内容。如果您要寻找的不止于此，则可以轻松修改此正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:28:34.213

**编辑：** 如果您只想匹配未引用的属性，这应该有效：

```
[<\s]+[\w]+(=[^\"][^\s>]*) 
```

有点不雅，但让我知道这是否符合您的要求。

* * *

您要匹配哪种模式？三个都？如果有，是哪一部分？主题还是电子邮件？如果您只是想匹配主题，请尝试将其用作匹配模式：

```
\=\"mailto:[^?]*\?subject=([^\"]*)\"\> 
```

这将返回一个匹配，其中组是主题本身。

# smarty - Smarty 模板继承只提供局部范围变量？

> ID：11956543
> 
> 赞同：0
> 
> 时间：2012-08-14T16:15:57.537
> 
> 标签：smarty, scope

使用带有模板继承的最新版本的 Smarty 3 我想在子模板中设置一个变量并在父模板中使用它：

列表.tpl

```
{extends file="page.tpl"}

{block name="head"}
    {$page_var = array("abc", "xyz")}
{/block}

{block name="content"}
    <div>...</div>
{/block} 
```

页面.tpl

```
<!DOCTYPE html>
<html>
<head>
    {block name="head"}
        {$page_var = array()}
    {/block}

    {mytemplatefunc foo=array("bar") + $page_var}
    ... 
```

主页面模板初始化一个变量，如果需要，子页面设置该变量。然后，主页模板将在调用模板函数时使用该变量。但`$page_var`总是空的。 **就好像模板变量的范围总是本地的。回到`{include}`唯一的解决方案？**

我已经尝试过`{assign scope='global'}`，`{assign scope='parent'}`即使它们是用于包含的。我也尝试使用我自己的静态类方法和变量（挂在值上），但它从来没有用过。在其他地方，有人建议尝试使用外部变量，`{block}`但这直接违背了文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:00:51.643

为什么要在模板扩展 (list.tpl) 中重新定义 $page_var？

您是否尝试过向原始 $page_var 添加值？

所以而不是

```
$page_var = array("abc", "xyz") 
```

你可以做

```
array_push($page_var, "abc", "xyz") 
```

# mysql - 跟踪服务器 my 而不是 iTunesConnect 上的购买

> ID：11956546
> 
> 赞同：1
> 
> 时间：2012-08-14T16:16:09.470
> 
> 标签：mysql, in-app-purchase, app-store-connect

我正在开发一个应用程序，其中有超过 700 多个潜在购买。

我想做的是在 iTunesConnect 上设置一个 tier1 密钥，并为所有购买重复使用相同的密钥，从而使用我的数据库/服务器来跟踪购买的内容；这意味着密钥会给你某种信用，然后你会选择你想解锁的内容，然后信用在服务器端使用，直到你从 IAS 购买另一个。

用户显然必须通过应用程序注册和登录，因此所有这些都可以被跟踪。

这是一个好习惯吗？我还想避免使用本地 plist 文件来防范越狱的 iphone 和这类黑客。

我在正确的轨道上吗？

# jquery - Fancybox beforeLoad 回调：Javascript、jQuery 和引用 $this？

> ID：11956547
> 
> 赞同：0
> 
> 时间：2012-08-14T16:16:09.957
> 
> 标签：jquery, callback, fancybox, fancybox-2

我不确定如何完成我想要做的事情，这在开始时似乎很简单。我想在将`'visited'`链接的内容调用到fancybox iframe 之前向单击的链接添加一个类。

只要我`beforeLoad`挂断电话，Fancybox 就可以正常工作。添加后，页面只是重新加载窗口，绕过 Fancybox。

我不确定我的`beforeLoad`函数（这里称为`add_visited`）是否允许使用 jQuery（如 中`addClass`），或者我是否需要坚持使用直接的 javaScript 功能（`element.setAttribute("className", "visited")`）。此处粘贴的代码用于 jQuery，并引用了传入`this`的`theClicked`.

因此，如您所见，我也不确定如何`$(this)`在函数中引用。`this`本质上，我想从实际`$.fancybox()`通话中结转。

而且，为了清楚起见，`.clinical_trial_link`是一个应用于锚点的类。在实际代码中是`a.clinical_trial_link`.

为了更清楚起见，我在这里阅读了一些对话，讨论了这种将链接*标记*为已访问的方法的相对优点。我得到了简单使用一个类的缺点，但是在一个像这个链接一样重的网站上，查看已经被点击的内容是必不可少的。

最后，有问题的页面位于：http: [//pull4parkinsonsfoundation.org/clinical_trials/](http://pull4parkinsonsfoundation.org/clinical_trials/)

当然，当我继续像带键盘的鲭鱼一样四处乱窜时，js 将与此处粘贴的内容有所不同。;-)

任何帮助将不胜感激，并提前感谢你们在**stackoverflow**上所做的出色工作。这是我多年来第一次真正不得不***发布***问题！

这是我的代码：

```
function add_visited(theclicked) {
    $(this).addClass('visited');
}

$(document).ready(function() {
    $('.clinical_trial_link').fancybox({
        'beforeLoad': add_visited($this),
        'maxWidth': 1222,
        'maxHeight': 1222,
        'fitToView': true,
        'width': '80%',
        'height': '90%',
        'topRatio': 0.2,
        'autoSize': false,
        'closeClick': false,
        'openEffect': 'elastic',
        'closeEffect': 'elastic'
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T18:41:18.880

如果您想要做的是将 a 添加`class`到绑定到 fancybox 的选择器中，请`$(this.element)`在任何 fancybox 回调中引用该元素，例如

```
$('.clinical_trial_link').fancybox({
  'beforeLoad': function(){
    $(this.element).addClass("visited");
  },
  'maxWidth': 1222,
  // other API options etc
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:20:12.230

当你这样做时：

```
'beforeLoad': add_visited($(this)), 
```

`$(this)`成为函数的参数。所以使用参数 --`this`在函数中没有上下文。

```
function add_visited(theclicked) {
    $(theclicked).addClass('visited');
} 
```

或者，您也可以这样做：

```
$('.clinical_trial_link').fancybox({
    'beforeLoad': function(){
        $(this).addClass('visited');
    }, 
```

有关更多信息`this`，请参阅[这篇文章](http://www.digital-web.com/articles/scope_in_javascript/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-20T15:08:43.013

在您的fancybox参数中使用它：

```
'beforeLoad': function() { 
     alert('test'); 
}, 
```

# java - 休眠获取结果集中行的位置

> ID：11956549
> 
> 赞同：1
> 
> 时间：2012-08-14T16:16:13.157
> 
> 标签：java, mysql, sql, hibernate

我需要得到一个可以使用 Hibernate 运行的等效 SQL。由于@ 等特殊字符，它无法正常工作。

```
SELECT place from (select @curRow := @curRow + 1 AS place, time, id FROM `testing`.`competitor` JOIN (SELECT @curRow := 0) r order by time) competitorList where competitorList.id=4; 
```

我的应用程序正在管理跑步比赛的结果。上面的查询是为特定的竞争对手选择的，它的位置基于他/她的总时间。

为简单起见，我将仅列出 COMPETITOR 表结构（仅列出相关字段）。我的实际查询涉及一些连接，但它们与问题无关：

```
CREATE TABLE competitor {
    id INT,
    name VARCHAR,
    time INT
} 
```

请注意，竞争对手尚未按时间排序，因此，ID 不能用作排名。同样，可能有两个竞争对手的总时间相同。

知道如何使用 Hibernate 进行这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:23:00.630

没有模式很难说，但你可以使用类似的东西

```
SELECT COUNT(*) FROM testing ts 
WHERE ts.score < $obj.score 
```

我使用 $ 代表您需要引用活动对象的任何 Hibernate 符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T02:51:24.483

我找不到任何方法来做到这一点，所以我不得不改变我计算位置的方式。我现在正在获取最佳结果，并在 Java 中创建梯子，而不是在 SQL 查询中。

# .net - 如何在.Net中将会话ID http保持为https

> ID：11956550
> 
> 赞同：0
> 
> 时间：2012-08-14T16:16:15.197
> 
> 标签：.net, iis-7, sessionid

当我从 http 页面调用 https 页面时，我的会话 ID 会发生变化。如何保持它们之间？注意：我的服务器位于托管公司，因此我无法在服务器或 IIS 上进行设置。我检查并回答了[如何在 http 和 https 之间共享 asp.net 会话，](https://stackoverflow.com/questions/567535/how-can-i-share-an-asp-net-session-between-http-and-https) 但结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:37:01.950

我用 Cookie 解决了我的问题。我将数据写入 cookie 文件并从 cookie 中读取它们。

# java - Java 代理类型错误？

> ID：11956552
> 
> 赞同：0
> 
> 时间：2012-08-14T16:16:47.277
> 
> 标签：java, eclipse, proxy

我正在为 Java 使用 Eclipse。尝试连接到 HTTP 代理时，我收到此代码的以下错误：

`Proxy httpProxy = new Proxy(Proxy.Type.HTTP, addr);`

`Type cannot be resolved or is not a field`

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:20:28.197

您导入的代理类可能不是“java.net.Proxy”，请检查您的包声明。

# c# - 报表服务器 Web 服务：将订阅连接到计划

> ID：11956553
> 
> 赞同：0
> 
> 时间：2012-08-14T16:16:57.393
> 
> 标签：c#, wcf, reporting-services, sql-server-2008-r2

我目前正在为连接到 ReportService2010.asmx Web 服务的客户端开发一个面向前端的 ASP 应用程序。我们使用的是 SQL Server 2008 R2。

我已经弄清楚如何获取所有计划并通过接口在我们端创建它们，但我不知道如何创建一个订阅，然后连接到该计划以便它在当时运行。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:53:30.753

最后我发现，除非将一些自定义程序集添加到报表服务器，否则订阅不会连接到计划，并且是两个不同的东西。

# java - 使用wsdl生成的java对象发出soap请求时如何添加soap头

> ID：11956562
> 
> 赞同：7
> 
> 时间：2012-08-14T16:17:31.233
> 
> 标签：java, web-services, soap, soap-client, soapheader

我使用 JAX-WS RI 生成了客户端 java 对象。我正在尝试向 Web 服务发出 SOAP 请求。服务需要在标头中进行身份验证，如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Header>
<xsd:authHeader>
<xsd:user>username@gmail.com</xsd:user>
<xsd:password>password1</xsd:password>
</xsd:authHeader>
</soapenv:Header>
<soapenv:Body>
<ns:searchAssetsParam>
<ns:includeSubfolders>true</ns:includeSubfolders>
<ns:resultsPage>2</ns:resultsPage>
</ns:searchAssetsParam>
</soapenv:Body>
</soapenv:Envelope> 
```

生成的 java 对象具有调用服务、创建对象和构造标头的方法。但是，我在拨打电话时无法设置标题。

这是我正在使用的代码：

```
IpsApiService service = new IpsApiService();
IpsApiPortType port = service.getIpsApiSoapPort();
SearchAssetsParam searchAssetsParam = buildSearchAssetsParam();
SearchAssetsReturn response = port.searchAssets(searchAssetsParam); 
```

buildSearchAssetsParam() 构造请求对象。我按如下方式创建了标头对象：

```
AuthHeader header = new AuthHeader();
header.setUser("username@gmail.com");
header.setPassword("password1"); 
```

如何将此 AuthHeader 设置为服务请求？

谢谢，维努

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T16:24:29.037

一旦我遇到了同样的问题。我需要`JAX-WS`在每次请求时修改 Web 服务 SOAP 标头。为了解决这个问题，我创建了一个这样的处理程序：

```
public class MyHandler implements SOAPHandler<SOAPMessageContext> {

    private static final Logger LOGGER = LoggerFactory.getLogger(MyHandler.class);

    private String username;

    private String password;

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        try {
            SOAPMessage message = context.getMessage();
            SOAPHeader header = message.getSOAPHeader();
            SOAPEnvelope envelope = message.getSOAPPart().getEnvelope();
            if (header == null) {
                header = envelope.addHeader();
            }
            QName qNameUserCredentials = new QName("https://your.target.namespace/", "UserCredentials");
            SOAPHeaderElement userCredentials = header.addHeaderElement(qNameUserCredentials);

            QName qNameUsername = new QName("https://your.target.namespace/", "Username");
            SOAPHeaderElement username = header.addHeaderElement(qNameUsername );
            username.addTextNode(this.username);
            QName qNamePassword = new QName("https://your.target.namespace/", "Password");
            SOAPHeaderElement password = header.addHeaderElement(qNamePassword);
            password.addTextNode(this.password);

            userCredentials.addChildElement(username);
            userCredentials.addChildElement(password);

            message.saveChanges();
            //TODO: remove this writer when the testing is finished
            StringWriter writer = new StringWriter();
            message.writeTo(new StringOutputStream(writer));
            LOGGER.debug("SOAP message: \n" + writer.toString());
        } catch (SOAPException e) {
            LOGGER.error("Error occurred while adding credentials to SOAP header.", e);
        } catch (IOException e) {
            LOGGER.error("Error occurred while writing message to output stream.", e);
        }
        return true;
    }

    //TODO: remove this class after testing is finished
    private static class StringOutputStream extends OutputStream {

        private StringWriter writer;

        public StringOutputStream(StringWriter writer) {
            this.writer = writer;
        }

        @Override
        public void write(int b) throws IOException {
            writer.write(b);
        }
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        LOGGER.debug("handleFault has been invoked.");
        return true;
    }

    @Override
    public void close(MessageContext context) {
        LOGGER.debug("close has been invoked.");
    }

    @Override
    public Set<QName> getHeaders() {
        LOGGER.debug("getHeaders has been invoked.");
        return null;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

它将所需的参数添加到我的`SOAP`标头中，并在每个请求上调用。您需要做的就是修改`handleMessage`方法以满足您的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-08T11:07:12.810

它通过覆盖该`public void setAttribute(String namespace, String localName, String value)`方法对我有用。

```
import javax.xml.namespace.QName;
import org.apache.axis.Constants;
import org.apache.axis.message.SOAPHeaderElement;

@SuppressWarnings("serial")
public class ADESHeaderElement  extends SOAPHeaderElement 
{

     public ADESHeaderElement(QName qname, Object value)
        {
            super(qname, value);
        }

     @Override
     public void setAttribute(String namespace, String localName, String value) 
     {
       if (!Constants.ATTR_MUST_UNDERSTAND.equals(localName)) 
       {  // Or any other attribute name you'd want to avoid
         super.setAttribute(namespace, localName, value);
       }
     }
} 
```

像这样创建标题元素：

```
 ADESHeaderElement custheader = new ADESHeaderElement(qname, clientserv);          
        custheader.setActor(null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-09T22:40:18.517

当您从 cxf 生成的类创建服务时，添加自定义拦截器

```
Service service = new MyService(wsdlURL, new QName("http://myservice.com/MyService/", "MyService"));
MyPort port = service.getMyPort();
Client client = ClientProxy.getClient(port);
// adding interceptor programmatically
client.getOutInterceptors().add(new MyHeaderHandler()); 
```

您可以扩展 AbstractSoapInterceptor 以实现您的自定义拦截器来处理消息。

```
import javax.xml.bind.JAXBException;
import javax.xml.namespace.QName;

import org.apache.cxf.binding.soap.interceptor.AbstractSoapInterceptor;
import org.apache.cxf.headers.Header;
import org.apache.cxf.jaxb.JAXBDataBinding;
import org.apache.cxf.phase.Phase;

import com.rpc.core.utils.DomainContext;

public class MyHeaderHandler extends AbstractSoapInterceptor {

    /**
    * Constructor
    */
    public MyHeaderHandler() {
        super(Phase.PRE_LOGICAL);

    }

    @Override
    public void handleMessage(org.apache.cxf.binding.soap.SoapMessage message) throws org.apache.cxf.interceptor.Fault {
        try {
            message.getHeaders().add(new Header(new QName("MyCustomHeader"),"value", new JAXBDataBinding(String.class)));
             } catch (JAXBException e) {
                 e.printStackTrace();
             }
         };
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T11:28:26.333

是的，我和 Rangappa Tungal 做了同样的事情，下面这个例子：

```
Service w = new ServiceLocator();  
ServiceSoap ws = new ServiceSoapStub(new URL(w.getServiceSoapAddress()),w); Stub mystub = (Stub) ws;
AuthHeader up = new AuthHeader("user","pass");
mystub.setHeader("namespace", "AuthHeader", up);
ws.get***(); 
```

[链接到示例！](http://forums.devshed.com/java-help-9/java-axis-soap-auth-header-213041.html)

# alpha - NSColor alpha 值使颜色变暗

> ID：11956563
> 
> 赞同：0
> 
> 时间：2012-08-14T16:17:36.263
> 
> 标签：alpha, nscolor

我正在尝试用半透明颜色填充子视图中的 NSRect。我在用：

[[NSColor colorWithCalibratedWhite:1 alpha:0.5]set];

但是 alpha 值不会使其透明，只会变暗。使用 0 的 alpha 值只会给出黑色。我以前多次使用过这段代码，但我不知道为什么它不起作用。

提前谢谢你，本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:23:26.483

颜色看起来更暗，因为上下文本身不透明，您会看到黑色在透明度后面渗出。您需要使用此操作：

```
NSRectFillUsingOperation(theRect, NSCompositeSourceOver); 
```

# javascript - jquery在自定义方法中使用if语句进行验证

> ID：11956570
> 
> 赞同：0
> 
> 时间：2012-08-14T16:18:02.860
> 
> 标签：javascript, jquery, jquery-validate

我正在为 jquery 使用 validate 插件并具有以下自定义方法：

```
$.validator.addMethod("username", function(value, element) {
    if (element.prop("required")) {  
        var re = new RegExp('^([FG]?\\d{5}|\\d{5}[AB])$');
    } else  {
        var re = new RegExp('^'+element.defaultValue+'|^([FG]?\\d{5}|\\d{5}[AB])$');
    }
    return re.test(value);
}); 
```

if 语句返回错误`element.prop is not a function`。

我也尝试过 $(this).prop... 虽然我没有收到任何错误，但它总是运行语句的 else 部分。

还有什么我可以用来代替的吗？

编辑：

这是电话：

```
$("#myform").validate({
    debug: true,
    ignore: ".ignore",
    rules: {
        field: {
            required: {
                 depends: function() {
                     return $(this).prop("required");
                 }
            },
            username: true,
        }
    },
    messages: {
        field: {
            username: "Enter a valid username"
        }
    },
    success: function(label) {
        label.text("Good result!");
    },
    submitHandler: function() {
        alert("submitted!");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:22:10.980

我认为你应该使用：

```
if ($(element).prop("required")) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:22:39.640

您可能正在使用旧的 jQuery 版本：

试试 $(element).attr("required")

# sql - 在 asp 中执行时 MS SQL 返回错误的结果

> ID：11956571
> 
> 赞同：0
> 
> 时间：2012-08-14T16:18:08.540
> 
> 标签：sql, select, count, group-by

我在经典 ASP 中使用的 MS SQL 语句遇到了一些问题。当我在 Microsoft SQL SMS 中使用该语句时 - 我得到了正确的答案 (4) 但在 ASP 中我只得到了结果 2..

我想要的结果是有多少不同的艺术家拥有一个或多个已发布的项目。

我使用的声明 -

```
SELECT Count(*) AS CountArtists 
FROM Tekster 
WHERE Published='True' 
GROUP BY Artist 
```

数据 - 表格（文本）

```
Artist    -   Published  
Person1       yes  
Person1       no  
Person1       yes  
Person2       yes  
Person3       yes  
Person3       no  
Person3       yes  
Person4       no  
Person4       no  
Person4       no  
Person5       no  
Person5       yes  
Person6       no 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:20:39.863

确保两个查询的连接字符串相同。您访问的数据库可能与您认为的不同。

另外，请注意您的查询正在检查`True`，但您的数据显示`yes/no`。它是哪一个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:21:22.697

当数据包含“是”和“否”时，为什么要说“已发布 = 'true'”。

尝试使用已发布 = 'yes' 运行查询。

此外，如果您想要值 4，那么您应该执行“count(distinct artist)”而不是 count(*)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:22:47.283

如果您修复该`where`子句，您的原始查询将为您提供每个艺术家的表中所有行的计数 where `published`is `yes|true`。您可能会得到一些零值。

要获得您想要的结果并回答“有多少不同的艺术家拥有一个或多个已发布项目？”的问题，您需要执行以下操作：

```
select count(*)
from ( select artist
       from Tekster
       where published = 'yes'
       group by artist
       having count(*) > 1
     ) published_artist pa 
```

虚拟表（子查询）为您提供一组已发布的艺术家。外部查询为您提供已发布艺术家的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:23:21.573

从 Tekster WHERE Published='True' 选择 COUNT(DISTINCT Artist) 作为 CountArtists

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T16:27:46.453

如果已发布字段数据类型为位，则使用已发布 = 1

# cookies - 饼干是哪里来的？

> ID：11956574
> 
> 赞同：0
> 
> 时间：2012-08-14T16:18:21.067
> 
> 标签：cookies, httpwebrequest

我以前从来没有访问过一个网站，第一次访问这个网站并尝试登录，我使用 fiddler 监控帖子数据，

在 http post header 中，已经有 cookie。那怎么会发生？

如何生成 cookie 以自动登录网站？

以下是原始标题。

```
POST https://us.battle.net/login/en/?ref=&app= HTTP/1.1
Host: us.battle.net
Connection: keep-alive
Content-Length: 64
Cache-Control: max-age=0
Origin: https://us.battle.net
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko)        Chrome/21.0.1180.77 Safari/537.1
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: https://us.battle.net/login/en/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,en-GB;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: perm=1; __utma=134253166.2032096419.1344959743.1344959743.1344959743.1; __utmb=134253166.2.10.1344959743; __utmc=134253166; __utmz=134253166.1344959743.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided)

accountName=aaaa%40me.com&password=password&persistLogin=on 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:20:59.590

当您访问登录页面时，cookie 可能已在`GET`请求中生成。

或者，虽然您没有直接访问过某个网站，但它可能已集成到您访问过的另一个网站中，例如在 iframe 中。例如，这在广告网络中很常见。

# django - Django：尽管选择了语言，表单仍然依赖 LANGUAGE_CODE 来格式化日期时间（包括演示）

> ID：11956576
> 
> 赞同：1
> 
> 时间：2012-08-14T16:18:23.983
> 
> 标签：django, datetime, localization, internationalization

我创建了一个小演示来展示这个问题。

当您单击英式英语时，您可以看到日期和时间格式是如何相应变化的，这很棒。

现在，如果您单击添加，您将看到当前日期和时间是如何为您填充的。但是，它们仍然采用美国日期格式，而不是所选的英国语言。

`LANGUAGE_CODE = 'en-us'`解决此问题的唯一方法是`LANGUAGE_CODE = 'en-gb'`在 settings.py中更改。这种方法显然是无用的，因为它不再是动态的，并且有利于一个群体而不是另一个群体。这应该是最后一个优先级，因为所选语言应该具有更高的优先级。

我已经创建了自定义来覆盖[文档](https://docs.djangoproject.com/en/dev/topics/i18n/formatting/#creating-custom-format-files)中描述`formats.py`的日期和时间格式，`en`所以我不知道我还能做什么。`en_GB`

请善待并从[我的 dropbox](https://dl.dropbox.com/u/44307777/Sandbox.zip)下载我的演示 (22 kb) ：您所要做的就是编辑 settings.py 并调整 sqlite.db 的路径。

我是否忽略了某些东西，或者这是一个 Django 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:30:24.497

固定的！！嗨，Kave，经过一段时间的调查，我终于找到了解决方案。

*   首先，您应该使用 activate(language_code) 切换到新语言。
*   您必须同时设置为本地化：字段和小部件：

示例切换语言：

```
def display_current_language(request):
    if request.LANGUAGE_CODE == 'en-gb':
        lang = "You prefer to read British English {code}.".format(
                  code=request.LANGUAGE_CODE )
        activate(request.LANGUAGE_CODE)
    elif request.LANGUAGE_CODE == 'en-us':
        lang = "You prefer to read American English {code}.".format(
                  code=request.LANGUAGE_CODE )
        activate('en-us')    
    else:
        lang = "You prefer to read Deutsch {code}.".format( 
                   code=request.LANGUAGE_CODE )
        activate(request.LANGUAGE_CODE)    
    return lang 
```

使用您的模型（公司）和您的字段（日期）进行示例：

```
class CompanyForm(ModelForm):        
    class Meta:
        model = Company 

    def __init__(self, *args, **kwargs):
        super(CompanyForm, self).__init__(*args, **kwargs)
        self.fields['date'].localize = True
        self.fields['date'].widget.is_localized = True 
```

# javascript - 用javascript在画布上预渲染动画

> ID：11956577
> 
> 赞同：0
> 
> 时间：2012-08-14T16:18:24.727
> 
> 标签：javascript, html, animation, canvas, rendering

我有一个网络应用程序，它使用画布为绘制到屏幕上的树设置动画。它通过连续进行多次三角计算来实现。当您单击“增长”按钮时，会出现一个树生长的动画，该动画具有用户可以更改的某些属性。您可以在此处查看应用程序[http://pastehtml.com/view/c85mxfgcj.html](http://pastehtml.com/view/c85mxfgcj.html)。

问题是，如果您将“年龄”（要通过的迭代次数）设置得太高，由于计算机必须执行的计算，动画开始滞后。我想知道两件事：

1.  有没有办法在向用户显示之前预渲染动画？
2.  有没有办法做到这一点，如果我有一棵已经渲染过的树并且我想让它在屏幕上移动，我可以做到这一点，而不必在每一帧都重新绘制树？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:24:47.360

1：您可能想查看`var fragment = document.createDocumentFragment();`
2：是的，通过 css 更快！

我认为[这个 youtube 视频](http://www.youtube.com/watch?v=_RRnyChxijA)值得您花时间。

祝你好运

**更新：2013 年 1 月 9 日** 刚刚偶然发现这一点。
在 css3 中有一个使用步骤的动画功能。
基本上，您创建一个精灵（在画布中），然后使用 css3 使用元素上的背景属性为精灵设置动画。非常酷（并且应该使用优化的浏览器自己的代码来执行此操作，因此不会像使用 javascript/canvas 那样加载用户 cpu）。
然而，它仍然没有创建动画 gif（但我认为即使使用库也应该是可能的，因为 gif 和 pnp 非常相似，然后使用`data:image/gif`协议提供该 gif），但最终结果在（现代）浏览器。

HTML： `<div class="hi"></div>`或`<img src="transparent.gif" class="hi">`

CSS3：

> .hi { 宽度：50px; 高度：72px；背景图像：url（“http://files.simurai.com/misc/sprite.png”）；
> 
> ```
> -webkit-animation: play 1s steps(10) infinite;
>    -moz-animation: play 1s steps(10) infinite;
>     -ms-animation: play 1s steps(10) infinite;
>      -o-animation: play 1s steps(10) infinite;
>         animation: play 1s steps(10) infinite; } 
> ```
> 
> @-webkit-keyframes 播放 { from { background-position: 0px; } 到 { 背景位置：-500px; } }
> 
> @-moz-keyframes 播放 { from { background-position: 0px; } 到 { 背景位置：-500px; } }
> 
> @-ms-keyframes 播放 { from { background-position: 0px; } 到 { 背景位置：-500px; } }
> 
> @-o-keyframes 播放 { from { background-position: 0px; } 到 { 背景位置：-500px; } }
> 
> @keyframes 播放 { from { background-position: 0px; } 到 { 背景位置：-500px; } }

示例[jsfiddle](http://jsfiddle.net/zR5HP/)。

# asp.net - ASP.NET 4.0 路由忽略 .js .css 等

> ID：11956582
> 
> 赞同：2
> 
> 时间：2012-08-14T16:18:51.167
> 
> 标签：asp.net, routing

我正在一个似乎可以正常工作的网站上设置 url 路由，但我无法让它忽略我的 javascript 文件。我在使用 ASP.NET 开发服务器和 IIS 7 时遇到了同样的问题。我没有使用 mvc。

我已尝试以下各项来忽略 javascript，但均未成功

```
 routes.Add(new Route("Scripts/", new StopRoutingHandler()));
    routes.Add(new Route("Scripts/{*pathInfo}", new StopRoutingHandler()));
    routes.Add(new Route("{resource}.js", new StopRoutingHandler()));
    routes.Add(new Route("{resource}.js/{*pathInfo}", new StopRoutingHandler()));
    routes.Add(new Route("*.js", new StopRoutingHandler()));
    routes.Ignore("Scripts/{*pathInfo}");
    routes.Ignore("{file}.js");
    routes.Ignore("{resource}.js/{*pathInfo}");
    routes.Ignore("Scripts/{*pathInfo}");
    routes.Ignore("{folder}/{*pathInfo}", new { folder = "Scripts" });
    routes.Ignore("{*alljs}", new { alljs = @".*\.js(/.*)?" });
    RouteTable.Routes.Ignore("{resource}.js/{*pathInfo}");
    RouteTable.Routes.RouteExistingFiles = false; 
```

下面是我创建的用于隔离问题的基本测试页面

Global.asax 包含

```
void Application_Start(object sender, EventArgs e) {
    RegisterRoutes(RouteTable.Routes);
}

void RegisterRoutes(RouteCollection routes){
    routes.Ignore("{*alljs}", new { alljs = @".*\.js(/.*)?" });        
    routes.MapPageRoute("testpage", "testpage", "~/testpage.aspx");
    routes.MapPageRoute("area", "testpage/area/{name}", "~/testpage.aspx");
} 
```

testpage.aspx:-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="testpage.aspx.cs" Inherits="testpage" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Test.aspx</title>
        <script type="text/javascript" src="./Scripts/test.js"></script>
</head>
<body>
    <form id="form1" runat="server">
        <p id="jsLoaded">false</p>
    </form>
</body>
</html> 
```

测试页.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class testpage : System.Web.UI.Page{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Page.RouteData.Values.ContainsKey("name")) { Response.Write(Page.RouteData.Values["name"].ToString()); }
    } 
```

}

测试.js

```
window.onload = function () {
    if (document.getElementById('jsLoaded')) {
        document.getElementById('jsLoaded').innerHTML = 'test.js loaded';
    }
} 
```

导航到 site/testpage/area/areaname 显示路由工作但未加载 javascript 文件。这快把我逼疯了！

亨利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:34:39.467

IIS 正在接管这些文件的服务。您必须限制它们在 IIS 中提供服务，并忽略到该位置的任何路由。一个选项是转到 IIS -> 请求过滤 -> 规则并添加一个新规则来限制访问。但是，我确定您知道，如果您限制提供这些文件，则脚本将永远不会为客户端运行，如果要发生这种情况，为什么不将网站之外的物理文件移动到无法访问的位置?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:44:11.447

你为什么不使用`ResolveUrl`这样的 javascript 文件？

```
<script type='text/javascript' src='<%= ResolveUrl("~/Scripts/test.js") %>'></script> 
```

你也试过，

```
RouteTable.Routes.IgnoreRoute("{*alljs}", new {alljs=@".*\.js(/.*)?"}); 
```

参考：[http ://haacked.com/archive/2008/07/14/make-routing-ignore-requests-for-a-file-extension.aspx](http://haacked.com/archive/2008/07/14/make-routing-ignore-requests-for-a-file-extension.aspx)

# windows-phone-7 - Windows Phone 7 - 向默认应用程序添加警报？

> ID：11956583
> 
> 赞同：0
> 
> 时间：2012-08-14T16:18:55.863
> 
> 标签：windows-phone-7, alarm

我怀疑这个问题的答案是否定的，但是否可以以编程方式将警报添加到 Windows Phone 7 上的默认警报应用程序中？

我希望避免构建我的应用程序的一部分只是为了重新创建现有应用程序中的功能！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:05:13.320

通过使用 Phone.scheduler 命名空间并初始化新的警报实例，您可以在手机上设置警报，而无需使用您自己的代码。

# jquery - 使用 JSON 填充/构建 JQuery 树视图

> ID：11956584
> 
> 赞同：0
> 
> 时间：2012-08-14T16:19:00.133
> 
> 标签：jquery, json

我想知道是否有一种内置方法可以将如下所示的 JSON 转换为具有 ul 和 li 的树。

示例 JSON：

```
{
{parent=-1,id=0,name='root'},
{parent=0,id=1,name='x'},
{parent=0,id=2,name='y'},
{parent=1,id=3,name='z'},
{parent=1,id=4,name='w'},
{parent=1,id=5,name='c'},
{parent=2,id=6,name='d'}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:26:43.170

这是一个我故意不解释的函数。

```
function buildNestedList(treeNodes, rootId) {
  var nodesByParent = {};

  $.each(treeNodes, function(i, node) {
    if (!(node.parent in nodesByParent)) nodesByParent[node.parent] = [];
    nodesByParent[node.parent].push(node);
  });

  function buildTree(children) {
    var $container = $("<ul>");

    if (!children) return;
    $.each(children, function(i, child) {
      $("<li>", {text: child.name})
      .appendTo($container)
      .append( buildTree(nodesByParent[child.id]) );
    });
    return $container;
  }
  return buildTree(nodesByParent[rootId]);
} 
```

它变成了这个

```
var treeNodes = [
    {parent:-1,id:0,name:'root'},
    {parent:0,id:1,name:'x'},
    {parent:0,id:2,name:'y'},
    {parent:1,id:3,name:'z'},
    {parent:1,id:4,name:'w'},
    {parent:1,id:5,name:'c'},
    {parent:2,id:6,name:'d'}
]; 
```

进入这个

```
<ul>
  <li>x
    <ul>
      <li>z</li>
      <li>w</li>
      <li>c</li>
    </ul>
  </li>
  <li>y
    <ul>
      <li>d</li>
    </ul>
  </li>
</ul> 
```

在这里看到它：http: [//jsfiddle.net/Tomalak/uUBKf/](http://jsfiddle.net/Tomalak/uUBKf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-04T14:02:01.303

您可以在上述内部函数的一行中添加**超链接：**`<li>`

```
$("<li><a href ='#'>"+child.name+"</>", {text: child.name}) 
```

# c# - 如何确定重叠日期范围的最大数量？

> ID：11956589
> 
> 赞同：1
> 
> 时间：2012-08-14T16:19:21.713
> 
> 标签：c#, date, date-range

这个问题可能类似于：

*   [确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)
*   [重叠的多个日期范围比较：如何有效地进行？](https://stackoverflow.com/questions/4910617/multiple-date-range-comparison-for-overlap-how-to-do-it-efficiently)

但是，我怎样才能获得重叠日期范围的最大数量？（最好在 C# 中）

示例：（从 - 到）

```
01/01/2012 - 10/01/2012
03/01/2012 - 08/01/2012
09/01/2012 - 15/01/2012
11/01/2012 - 20/01/2012
12/01/2012 - 14/01/2012 
```

结果 = 3 个最大重叠日期范围

**解决方案**：@AakashM 提出的解决方案的可能实现

```
List<Tuple<DateTime, int>> myTupleList = new List<Tuple<DateTime, int>>();

foreach (DataRow row in objDS.Tables[0].Rows) // objDS is a DataSet with the date ranges
{
    var myTupleFrom = new Tuple<DateTime, int>(DateTime.Parse(row["start_time"].ToString()), 1);
    var myTupleTo = new Tuple<DateTime, int>(DateTime.Parse(row["stop_time"].ToString()), -1);
    myTupleList.Add(myTupleFrom);
    myTupleList.Add(myTupleTo);
}

myTupleList.Sort();

int maxConcurrentCalls = 0;
int concurrentCalls = 0;
foreach (Tuple<DateTime,int> myTuple in myTupleList)
{
    if (myTuple.Item2 == 1)
    {
        concurrentCalls++;
        if (concurrentCalls > maxConcurrentCalls)
        {
            maxConcurrentCalls = concurrentCalls;
        }
    }
    else // == -1
    {
        concurrentCalls--;
    }
} 
```

`maxConcurrentCalls`并发日期范围的最大数量在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:25:10.170

*   对于每个范围，创建两个`Tuple<DateTime, int>`带有值的 s`start, +1`和`end, -1`
*   按日期对元组集合进行排序
*   遍历排序列表，将元组的数字部分添加到运行总计中，并跟踪运行总计达到的最大值
*   返回运行总计达到的最大值

`O(n log n)`由于排序而执行。可能有更有效的方法。

# vb.net - 从 vb.net 访问 JavaScript 对象

> ID：11956593
> 
> 赞同：0
> 
> 时间：2012-08-14T16:19:35.810
> 
> 标签：vb.net, mshtml, dom, marshalbyrefobject, comobject

我正在开发一个与（第三方提供的）网络应用程序交互的 vb.net 应用程序，以提供额外的功能（例如删除菜单项、从页面中提取信息等）。该网络应用程序完全由 javascript 驱动，但托管在 asp.net 中，并且仅与 Internet Explorer 一起使用。

我正在尝试从 javascript 对象中读取属性并执行它的一些功能。通过获取脚本所在的 iframe 的 mshtml.HTMLDocument 并使用以下代码，我设法获取了 javascript 对象：

```
Dim jsObject as Object
jsObject = htmldoc.Script.jsObject 
```

jsObject 作为 {System.__ComObject} 存在，我可以使用它来执行它的任何功能或读取它的属性，如下所示：

```
Dim value as String = jsObject.FunctionThatReturnsAString()
jsObject.FunctionTHatDoesSomethingInWebApp("Param1", "Param2") 
```

这很好用。但是，当我离开带有 jsObject 的页面/框架并返回到它时，当再次从框架中获取 javascript 对象时（即执行以下行），相同的代码会引发异常：

```
jsObject = htmldoc.Script.jsObject 
```

例外：未找到成员。（来自 HRESULT 的异常：0x80020003 (DISP_E_MEMBERNOTFOUND)）

如果我停止调试并重新启动，它会再次工作（直到我离开页面等）。就我的应用而言，我不确定发生了什么导致 javascript 对象消失。我假设这是由于我的应用程序持有对 COM 对象的引用，我需要以某种方式释放它（特别是因为它有 MarshalByRefObject 的基本类型 - 这很有意义，因为它在应用程序域之间传递）。

为什么会这样？有没有更好的方法来访问 javascript 对象，它的属性和函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:44:27.897

在我的情况下，我发现了什么是实现我需要的更好的方法。我不是直接将 jsObject 作为 COM 对象访问（并担心编组等），而是使用：

*   execScript 调用没有返回值的函数或
*   在我正在工作的框架中创建一个隐藏的 div 元素，将该 div 的 innerHTML 设置为等于我有兴趣使用 execScript 的任何 javascript 变量/函数返回值，然后从 DOM 中单独读取该值

要读取变量/函数返回，我使用以下 vb.net 函数：

```
Private Function getJScriptVariable(ByVal JScript As String)
    Dim command As New StringBuilder()
    command.Append("var e = document.getElementById('Matt_JScriptReturn');")
    command.Append("if (e == null) {")
    command.Append("var e = document.createElement('div');")
    command.Append("e.id = 'Matt_JScriptReturn';")
    command.Append("e.type = 'hidden';")
    command.Append("document.body.appendChild(e);")
    command.Append("}")
    command.Append("e.innerHTML = ")
    command.Append(JScript)
    command.Append(";")

    'fMaster is the frame containing the javascript's mshtml.IHTMLWindow2
    fMaster.execScript(command.ToString(), "JScript")

    'N.B. fMaster_Document is the fMaster's mshtml.HTMLDocument
    Return fMaster_Document.getElementById("Matt_JScriptReturn").innerHTML

    'Optionally execScript to remove element from DOM at this point
End Function 
```

然后我将按如下方式使用该功能（尊重我在原始问题中的示例）：

```
Dim value as String = getJScriptVariable("jsObject.FunctionThatReturnsAString()") 
```

要执行 javascript 代码而不需要返回值，我只需按如下方式执行它：

```
fMaster.execScript("jsObject.FunctionTHatDoesSomethingInWebApp('Param1', 'Param2')") 
```

我仍然很想知道为什么我之前遇到了 javascipt 对象在离开页面并返回后无法访问的问题，但是这解决了我的问题，所以我现在很高兴！我希望这在某些时候对其他人有所帮助。

# sql - 数据组的 SQL 多个条件

> ID：11956596
> 
> 赞同：0
> 
> 时间：2012-08-14T16:19:55.887
> 
> 标签：sql, sql-server-2008

我正在尝试为以下数据集编写验证：

```
SSYS | Material_Number | Characteristic | Description
001  | 000000000001111 | SH_DESC        | TEST
001  | 000000000001111 | DESIGN_TYPE    | NULL
001  | 000000000001111 | VOLTAGE        | NULL
001  | 000000000009999 | SH_DESC        | TEST2
001  | 000000000009999 | OPER_METHOD    | LIGHT
001  | 000000000009999 | FILTER_TYPE    | Filter element,Air
001  | 000000000014560 | SH_DESC        | Horn,Signal
001  | 000000000014560 | DIMENSION_SIZE | NULL
001  | 000000000014560 | FILTER_TYPE    | NULL 
```

如果在 Material_Number 组中，SH_DESC 描述不为空且所有其他特性的描述为空，我想按 Material_Number 分组并计为 1（即 true）。所以，在这种情况下，我的结果是：

```
SSYS | Material_Number | Characteristic | Description  | COUNT
001  | 000000000001111 | SH_DESC        | TEST         |  1
001  | 000000000009999 | SH_DESC        | TEST2        |  0 
001  | 000000000014560 | SH_DESC        | Horn,Signal  |  1 
```

我的尝试：

```
Select COUNT (*), SSYS, Material_Number, Characteristic, Description
 From myDB where (Characteristic = 'SH_DESC' AND DESCRIPTION IS NOT NULL) AND (Characteristic NOT IN ('SH_DESC') IS NULL)
GROUP BY SSYS, Material_Number, Characteristic, Description HAVING COUNT (*) < 2 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:28:35.650

尝试：

```
Select SSYS, 
       Material_Number, 
       'SH_DESC' Characteristic, 
       MAX(CASE WHEN Characteristic = 'SH_DESC' THEN Description END) Description,
       CASE WHEN MAX(CASE WHEN Characteristic = 'SH_DESC' THEN Description END) IS NOT NULL AND
                 MAX(CASE WHEN Characteristic <>'SH_DESC' THEN Description END) IS NULL 
            THEN 1
            ELSE 0
       END COUNT
From myDB
GROUP BY SSYS, Material_Number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:28:54.720

试试这个：

```
select ssys, material_number, 'SH_DESC' as characteristic,
       (case when sum(case when characteristic is not null and characteristic<> 'SH_DESC' and description is null then 1 else 0 end) = count(*) - 1
             then 1
             else 0
        end) as count
from t
group by ssys, material_number 
```

它按材料分组并计算描述为空的具有非空特征的行数。它相应地设置计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:31:42.377

`GROUP BY`和选项的替代`SUM(CASE WHEN)`...

```
 SELECT
  *,
  CASE WHEN Description IS NULL THEN 0
       WHEN EXISTS (SELECT *
                      FROM myDB as lookup
                     WHERE lookup.SSYS            = myDB.SSYS
                       AND lookup.Material_Number = myDB.Material_Number
                       AND lookup.Characteristic <> 'SH_DESC'
                       AND lookup.Description    IS NOT NULL) THEN 0
       ELSE 1 END as myCount
FROM
  myDB
WHERE
  Characteristic = 'SH_DESC' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T17:10:01.877

试试这个——在这里我猜你不能得到描述，因为没有什么可以过滤特定的描述。

CREATE TABLE yourtable(SSYS varchar(10),Material_Number varchar(100),Characteristic varchar(100),Description varchar(100))

```
INSERT INTO yourtable 
VALUES('001','000000000001111','SH_DESC','TEST'),
('001','000000000001111','DESIGN_TYPE','NULL'),
('001','000000000001111','VOLTAGE','NULL'),
('001','000000000009999','SH_DESC','TEST2'),
('001','000000000009999','SH_DESC','LIGHT'),
('001','000000000009999','FILTER_TYPE','Filter element,Air'),
('001','000000000014560','SH_DESC','Horn,Signal'),
('001','000000000014560','DIMENSION_SIZE','NULL'),
('001','000000000014560','FILTER_TYPE  ','NULL')

select max(SSYS),
       max(Material_Number),
       'SH_DESC' as Characteristic,
       CASE WHEN SUM(CASE WHEN Characteristic='SH_DESC' and Description is not null then 1 else 0 end) = 1 then 1 else 0 end  as cnt
from yourtable
group by Material_Number 
```

# c - 如何将 C 文件编译成可执行 (.exe) 文件？

> ID：11956597
> 
> 赞同：4
> 
> 时间：2012-08-14T16:20:07.560
> 
> 标签：c, makefile, executable, exe

我不确定在 Windows 7 下使用 Cygwin 将 C 文件编译成可执行文件。

谁能告诉我该怎么做？

我已经阅读了一些教程，但仍然不明白。我知道我需要一个 Makefile，但是在编译过程之后我应该在其中写入什么以获得可执行文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:27:50.763

一开始我会说安装 MinGW 就足够了。如果你已经安装了它，你会在 bin 文件夹中找到一个 gcc.exe，它是编译器。将 PATH 变量设置为 bin 文件夹或直接转到此文件夹。在终端使用中：

```
 gcc your_C_file.c 
```

输出将是一个exe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:26:14.927

问：如何将 c 文件编译成可执行 (.exe) 文件？

答：获取并使用 C 编译器。

GCC/Cygwin 是一种可能性。MS Visual Studio 是另一个：您可以在此处下载免费的“MSVS Express”：http: [//www.microsoft.com/visualstudio/en-us/products/2010-editions/express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)。

*如何*与编译器交互是另一个问题。

您当然可以使用命令行。

您可以使用带有或不带有“Make”的命令行：您可以让“Makefiles”为您完成“繁重的工作”，您可以使用 .bat 文件，或者您可以手动输入所有内容。

使用图形 IDE 是另一种可能性。“Eclipse”和“MS Visual Studio”是 Windows 的两个流行替代品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:29:16.693

有几种编译 c 文件的方法。Makefile 只是一种可能性。但正如你提出的那样......这是Makefiles的两个教程：

1.  [http://makepp.sourceforge.net/1.19/makepp_tutorial.html](http://makepp.sourceforge.net/1.19/makepp_tutorial.html)
2.  [http://mrbook.org/tutorials/make/（2012](http://mrbook.org/tutorials/make/)年的内容可通过[waybackmachine](https://web.archive.org/web/20120817090250/http://mrbook.org/tutorials/make/)访问）

但请注意，您还需要一个编译器（安装在 cygwin 下）。

另一种可能性是使用 Dev-C++，一种用于 C++ 的 IDE（集成开发环境）。安装后，您可以创建一个项目并添加源代码，然后编译该项目。它还包含一个名为 mingw 的 c++ 编译器（也支持 C）。需要的makefile 是自动生成的。所以这对初学者来说更简单。

你可以在这里下载 Dev-Cpp：http: [//www.bloodshed.net/devcpp.html](http://www.bloodshed.net/devcpp.html)

注意：当您谈到 cygwin 时，我假设您使用的是 Windows。Dev++只能在windows下工作，不需要cygwin。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2020-11-04T13:10:57.297

更简单的解决方案是 A86 Assembler。它的老派，但在右手中完美运行；）

# algorithm - 使用 LRS 数组增强的因子 oracle 查找多个字符串的最长公共子字符串

> ID：11956604
> 
> 赞同：6
> 
> 时间：2012-08-14T16:20:29.567
> 
> 标签：algorithm, automata, suffix-tree, suffix-array

我们可以使用带有后缀链接的因子-oracle（[此处为论文](http://www-igm.univ-mlv.fr/~lecroq/articles/awoca2000.pdf)）来计算多个字符串的最长公共子字符串吗？这里，*子字符串*表示原始字符串的任何部分。例如“abc”是“ffabcgg”的子字符串，而“abg”不是。

我找到了一种方法来计算两个字符串的最大长度公共子字符串`s1`和`s2`. 它通过使用不在其中的字符连接两个字符串来工作，例如'$'。`s`然后对于长度为 的连接字符串的每个前缀`i >= |s1| + 2`，我们计算其 LRS（最长重复后缀）长度`lrs[i]`和`sp[i]`（其 LRS 第一次出现的结束位置）。最后，答案是

```
max{lrs[i]| i >= |s1| + 2 and sp[i] <= |s1|} 
```

我已经编写了一个使用这种方法的 C++ 程序，它可以在我的笔记本电脑上`|s1|+|s2| <= 200000`使用因子 oracle 在 200 毫秒内解决问题。

```
s1 = 'ffabcgg'
s2 = 'gfbcge'
s = s1+'$'+s2 
  = 'ffabcgg$gfbcge'
p: 0 1 2 3 4 5 6 7 8 9 10 11 12 13
s:  f f a b c g g $ g f  b  c  g  e
sp: 0 1 0 0 0 0 6 0 6 1  4  5  6  0
lrs:0 1 0 0 0 0 1 0 1 1  1  2  3  0

ans = lrs[13] = 3 
```

我知道使用 suffix-array 和 suffix-tree 可以高效地解决这两个问题，但是我想知道是否有使用因子 oracle 的方法来解决它。我对此感兴趣是因为因子 oracle 很容易构造（用 30 行 C++，suffix-array 需要大约 60，而 suffix-tree 需要 150），并且它比 suffix-array 和 suffix-tree 运行得更快。

您可以在[此 OnlineJudge](http://www.spoj.pl/problems/LCS2/)中测试您的第一个问题的方法，并在[此处](http://www.spoj.pl/problems/LCS/)测试第二个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-21T06:45:59.490

> 我们可以使用带有后缀链接的因子-oracle（此处为论文）来计算多个字符串的最长公共子字符串吗？

我不认为该算法非常适合（它旨在考虑单个字符串），但您可以通过将原始字符串与唯一分隔符连接来使用它。

给定`abcdefg`and `hijcdekl`，`mncdop`找出最长的公共子串`cd`：

```
# combine with unique joiners
>>> s = "abcdefg" + "1" + "hijcdekl" + "2" + "mncdop" 
>>> factor_oracle(s)
"cd" 
```

作为其线性时间和空间算法的一部分，factor-oracle 快速重新发现输入字符串之间的断点，作为其搜索公共因子的一部分（独特的连接器提供并立即提示停止扩展迄今为止找到的最佳因子） .

# solr - Sphinx 用户正在切换到 Solr

> ID：11956608
> 
> 赞同：0
> 
> 时间：2012-08-14T16:20:52.633
> 
> 标签：solr, sphinx

我是 Sphinx 用户 3 年了。我现在遇到的问题是集群和方面的支持。

关于方面的支持，我知道我也可以用 sphinx 制作它并且它会运行，但集群对我来说是未来的一个非常大的问题。

我真的很喜欢 Sphinx，因为它易于使用且速度非常快，但我需要在接下来的几个月内更改为 Solr。

如果有人有时间解释我，我想知道一些基础知识。我将在 Sphinx 中发布一些示例，希望您能给我在 Solr 中的示例。

在安装时，我在 Debian 上选择了 Solr 和 Tomcat：

apt-get install solr-tomcat curl -y

Tomcat的这个选项比Jetty更好（更快，更稳定......）吗？两者都支持集群吗？

其次，我用这个生成了一个 Dataimport Handler：

```
<dataSource type="JdbcDataSource"
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://localhost/database"
              user="root"
              password="root" 
      batchSize="-1"/>

<document name="doc">
    <entity name="de_job"
              query="select * from de_job">
        <field column="title" name="title" />
    <field column="description" name="description" />
    <field column="job_id" name="id" />
    </entity>
</document> 
```

当我打电话时：

[http://domain.com:8080/solr/dataimport?command=full-import](http://domain.com:8080/solr/dataimport?command=full-import)

然后我在 5 分钟内索引了超过 1,6M 的数据行。这很棒。

这是我现在的问题：

1.  我在 sphinx 中有超过 1 个索引，并且想在不同时间重新索引它们，而不是一次全部。

    ```
    index de_jobs
    {
     source                  = de_jobs
     path                    = /usr/local/sphinx/var/data/jobs_de
     docinfo                 = extern
     charset_type            = utf-8
     charset_table           = 0..9, A..Z->a..z, _, a..z, U+410..U+42F->U+430..U+44F, \
                    U+430..U+44F,U+C5->U+E5, \
                    U+E5, U+C4->U+E4, U+E4, U+D6->U+F6, U+F6, U+16B, U+0c1->a, U+0c4->a, U+0c9->e, U+0cd->i, \
                    U+0d3->o, U+0d4->o, U+0da->u, U+0dd->y, U+0e1->a, U+0e4->a, U+0e9->e, U+0ed->i, U+0f3->o, \
                    U+0f4->o, U+0fa->u, U+0fd->y, U+104->U+105, U+105, U+106->U+107, U+10c->c, U+10d->c, \
                    U+10e->d, U+10f->d, U+116->U+117, U+117, U+118->U+119, U+11a->e, U+11b->e, U+12E->U+12F, \
                    U+12F, U+139->l, U+13a->l, U+13d->l, U+13e->l, U+141->U+142, U+142, U+143->U+144, \
                    U+144,U+147->n, U+148->n, U+154->r, U+155->r, U+158->r, U+159->r, U+15A->U+15B, U+15B, \
                    U+160->s, U+160->U+161, U+161->s, U+164->t, U+165->t, U+16A->U+16B, U+16B, U+16e->u, \
                    U+16f->u, U+172->U+173, U+173, U+179->U+17A, U+17A, U+17B->U+17C, U+17C, U+17d->z, \
                    U+17e->z, U+DC->U+FC, U+DF, U+FC,
    min_word_len            = 3
    min_infix_len           = 7
    stopwords               = /usr/local/sphinx/var/stopwords/stop_words_de.txt

    }

    index at_jobs
    {
     source                  = at_jobs
     path                    = /usr/local/sphinx/var/data/jobs_at
     docinfo                 = extern
     charset_type            = utf-8
     charset_table           = 0..9, A..Z->a..z, _, a..z, U+410..U+42F->U+430..U+44F, \
                    U+430..U+44F,U+C5->U+E5, \
                    U+E5, U+C4->U+E4, U+E4, U+D6->U+F6, U+F6, U+16B, U+0c1->a, U+0c4->a, U+0c9->e, U+0cd->i, \
                    U+0d3->o, U+0d4->o, U+0da->u, U+0dd->y, U+0e1->a, U+0e4->a, U+0e9->e, U+0ed->i, U+0f3->o, \
                    U+0f4->o, U+0fa->u, U+0fd->y, U+104->U+105, U+105, U+106->U+107, U+10c->c, U+10d->c, \
                    U+10e->d, U+10f->d, U+116->U+117, U+117, U+118->U+119, U+11a->e, U+11b->e, U+12E->U+12F, \
                    U+12F, U+139->l, U+13a->l, U+13d->l, U+13e->l, U+141->U+142, U+142, U+143->U+144, \
                    U+144,U+147->n, U+148->n, U+154->r, U+155->r, U+158->r, U+159->r, U+15A->U+15B, U+15B, \
                    U+160->s, U+160->U+161, U+161->s, U+164->t, U+165->t, U+16A->U+16B, U+16B, U+16e->u, \
                    U+16f->u, U+172->U+173, U+173, U+179->U+17A, U+17A, U+17B->U+17C, U+17C, U+17d->z, \
                    U+17e->z, U+DC->U+FC, U+DF, U+FC,
    min_word_len            = 3
    min_infix_len           = 7
    stopwords               = /usr/local/sphinx/var/stopwords/stop_words_de.txt

    } 
    ```

如何在 Solr 2 或更多不同的索引中启用？

这是下表中的不同实体吗？

```
<entity name="de_job"
              query="select * from de_job">
        <field column="title" name="title" />
    <field column="description" name="description" />
    <field column="job_id" name="id" />
    </entity>

<entity name="at_job"
              query="select * from at_job">
        <field column="title" name="title" />
    <field column="description" name="description" />
    <field column="job_id" name="id" />
    </entity> 
```

1.  如何仅重新索引一个索引？重新索引查询中是否有任何参数： 例如[http://domain.com:8080/solr/dataimport?command=full-import](http://domain.com:8080/solr/dataimport?command=full-import) where to select only de_job？

2.  我在狮身人面像： min_word_len 和 min_infix_len 。如何在 Solr 中使用它？我在哪里可以配置它？

3.  我在 Sphinx 中定义了自定义停用词。如何在 Solr 中为每个索引定义和使用它们？

4.  在 sphinx 中，我必须定义 charset_table，因为 sphinx 无法搜索例如德语变音符号或其他 UTF-8 字符，如果它们不是由 charset_table 翻译的。我在 Solr 中也需要同样的东西吗？

5.  在索引中，当我旋转索引时，sphinx 正在创建一个 tmp 文件，重新索引数据并即时旋转它。通过这种方式，我的应用程序在 sphinx 重新索引所有内容的时间运行。如何用 Solr 解决这个问题？当我查看 Solr 的日志文件时，当索引正在重建时，则停留在：

从索引中删除所有文档

有什么不好的，因为我的应用程序将无法运行。我怎样才能以优雅的方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:45:33.943

1.  为每个索引创建单独的核心。然后每个人都会有自己的数据导入 URL。

2.  (a) min_word_len，忽略这个，不需要。(b) min_infix_len，现在可以忽略，除非您执行 lt 通配符查询。如果你这样做，那么考虑使用 Ngrams。

3.  在您的架构中，定义一个停用词过滤器并将您的停用词放在一个文件中。更好的是，不要使用停用词。这些是 32 位计算机和 40 兆字节磁盘遗留下来的坏习惯。

4.  您可以在架构中使用 ISOLatin1AccentFilterFactory (http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.ISOLatin1AccentFilterFactory)。

5.  这是正常的，直到索引完成并提交新内容后才会真正发生删除。

# android - 不需要的 Toast 通知

> ID：11956611
> 
> 赞同：0
> 
> 时间：2012-08-14T16:21:16.783
> 
> 标签：android, toast

安卓 4.0 3\. HTC 感知 3.6。我的 SD 卡上安装了一些应用程序（195 个中的 1 个），它会在启动/SD 安装时弹出一个 toast 通知，上面写着“祝你有美好的一天！” 并持续近一分钟。有谁知道一个简单的方法让我弄清楚是什么应用程序导致了这种情况？由于 toasts 不是一种权限，因此插件检测器之类的应用程序将无法运行。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:28:11.730

这不是一个特定于编程的问题。然而，我相信我知道你可以如何解决这个问题。如果您使用 DDMS 安装了 Eclipse（[我认为它与 ADK 一起提供](http://developer.android.com/tools/sdk/eclipse-adt.html)），您可以看到所有正在运行的应用程序，因此是您正在寻找的应用程序。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:39:14.810

做 a`adb shell dumpsys`并搜索`android.intent.action.BOOT_COMPLETED`under `Registered Receivers:`。
记下已为此意图注册的所有包。然后做同样的事情`android.intent.action.MEDIA_MOUNTED`（如果在安装媒体时吐司来了）。这应该缩小包的范围。如果在广播其他意图时发生这种情况，那么您应该能够进一步缩小范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:31:01.193

是的，也认为最简单的方法（或者可能是唯一的方法）是等待“事件”并在 eclipse 的设备日志中查找它。

# ios - 以 Tab Bar 控制器为根的情节提要崩溃，但仅当自定义控制器是不是第一个选项卡的选项卡时

> ID：11956612
> 
> 赞同：0
> 
> 时间：2012-08-14T16:21:19.663
> 
> 标签：ios, crash, uitabbarcontroller, storyboard, uigesturerecognizer

情况：

*   在所有情况下都可以正常工作的自定义控制器……除了 1 种情况
*   以标签栏控制器为根的情节提要
*   除了自定义控制器之外，故事板中的所有内容都是在 IB 中建立的纯原型。除了我的自定义控制器，没有代码，只是拖到故事板上的东西。（我正处于 UI 原型设计阶段。）
*   当我将自定义控制器设置为选项卡栏控制器中的第一个选项卡时，它工作正常。
*   将自定义控制器连接到情节提要中的任何其他位置时，例如。作为其他选项卡的模态控制器或导航链中的控制器，它也可以正常工作。
    *   当我使自定义控制器成为选项卡栏控制器中不是第一个选项卡的选项卡时，它会崩溃。

调试器只说'BAD ACCESS'。堆栈跟踪仅显示 objc_msgSend 和 UIApplicationMain 中的崩溃。没有打印出有用的调试信息。

有什么建议么？

谢谢，汤姆

# android - 将字符串转换为 JSON 的问题

> ID：11956617
> 
> 赞同：0
> 
> 时间：2012-08-14T16:21:28.187
> 
> 标签：android, json

我在 javascript 中创建了这个 JSONObject。

```
 var jsonBack = {id:userID,"dateToday":today, dateYesterday:yesterday,
                   wbsArrayToday:[{wbs:"13232323"}, {wbs:"13232324"}, {wbs:"13232325"}],
                   wbsArrayYesterday:[{wbs:"13232333"}, {wbs:"13232334"}, {wbs:"13232335"}]}; 
```

然后我在我的android应用程序中调用它。

```
 JSONObject jsonObj = null;
    // Henter response data fra server vha. httpResponse
    HttpEntity entity1 = response.getEntity();
    if (entity1 != null) {
        InputStream is = null;
        try {
            is = entity1.getContent();
            // convert stream to string
            String result = Converter.convertStreamToString(is);

            //Remove []
            //if(result.startsWith("["))
            //  result = result.substring(1, result.length()-1);
            // Create JSON Object
            jsonObj = new JSONObject(result);
        } catch (IllegalStateException e) {
            e.printStackTrace();
            throw new HttpNodeClientException("HttpNodeClientException/IllegalStateException - createResponse():" + e.getMessage());
        } catch (IOException e) {
            e.printStackTrace();
            throw new HttpNodeClientException("HttpNodeClientException/IOException - createResponse():" + e.getMessage());
        } catch (JSONException e) {
            e.printStackTrace();
            throw new HttpNodeClientException("HttpNodeClientException/JSONException - createResponse():" + e.getMessage());
        } catch (ConverterException e){
            e.printStackTrace();
            throw new HttpNodeClientException("HttpNodeClientException/ConverterException - createResponse():" + e.getMessage());
        } 
```

我得到一个 JSONException。我设计的 JSON 错误吗？

继承人例外：

```
08-14 16:14:18.522: I/LoginActivity(418): HttpNodeClientException/JSONException - createResponse
():Value {"id":"11111111","dateToday":"14082012","dateYesterday":"13082012","wbsArrayToday":
[{"wbs":"13232323"},{"wbs":"13232324"},{"wbs":"13232325"}],"wbsArrayYesterday":
[{"wbs":"13232333"},{"wbs":"13232334"},{"wbs":"13232335"}]} of type java.lang.String cannot be 
converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:28:32.043

请改用[JSONTokener](http://developer.android.com/reference/org/json/JSONTokener.html)类。它解析一个字符串并返回一个 JSON 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:54:45.307

您需要修复的唯一行是这一行：

```
jsonObj = new JSONObject(result); 
```

进入这个：

```
jsonObj = new JSONObject(new JSONTokener(result)); 
```

# sharepoint - 这种数据访问模式在 SharePoint 中是否可接受？

> ID：11956619
> 
> 赞同：1
> 
> 时间：2012-08-14T16:21:32.093
> 
> 标签：sharepoint, design-patterns, sharepoint-2010, caml

我正在创建一个 SharePoint 应用程序，并希望尽可能多地以正确的方式做事。

我正在站点定义中部署一系列列表，并且我想将数据访问锁定到一系列 Get() 方法以维护约定。

我的一些列表在列表定义中设置了 SecurityBits="22"，因为我希望仅在 UI 中修改列表项条目。

我想避免滥用`SPSecurity.RunWithElevatedPrivileges`. 我还想回避`SPSecurity.RunWithElevatedPrivileges`你不能在代表中拥有`return`功能的限制。

这似乎是执行此操作的好方法。如果您正在调用列表以获取具有正常安全性的列表项，则可以调用`var PostList = CoreLists.Posts`. 如果您需要使用提升的权限调用同一个列表，您可以调用`var PostList = CoreLists.SystemAccount.Posts`

这是一个好方法吗？

```
public static class CoreLists
{
    public static SPList Posts()
    {
        return SPContext.Current.Web.GetList(SPContext.Current.Web.ServerRelativeUrl + "/lists/CommunityPost");
    }
    public static class SystemAccount
    {
        public static SPList Posts()
        {
            using (var elevatedSite = new SPSite(SPContext.Current.Site.ID, SPContext.Current.Site.SystemAccount.UserToken))
            using (var web = elevatedSite.OpenWeb())
                return web.GetList(web.ServerRelativeUrl + "/lists/CommunityPost");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:23:04.613

我认为只要您的安全上下文有意义（即安全性最低的用户可以使用这些方法访问列表项），第一类看起来就很好。我很好奇第二个中的 using 语句如何影响调用它的代码。

ElevatePriveleges 的问题是，有时当您拥有广泛使用的数据访问代码时，如果您不想直接在 SharePoint UI 中授予他们对列表的访问权限，但想要拥有在其上下文中执行的代码访问用户控件等的列表项。

需要记住的几件事： 1\. 始终注意 SharePoint 中的列表访问代码的内存泄漏。在您的课程中，您处理了这两种情况以及处理任何 SPRequest 处理。2\. 你几乎不想在你的代码中使用 SPList.Items。如果您以这种方式显示列表并且您不管理调用列表的代码，您可能会遇到较大列表的性能问题，因为调用 .Items 属性而不是特定查询会为每个项目加载每个项目和字段那个清单。

希望这可以帮助

# php - 从 Amazon S3 安全地提供文件

> ID：11956622
> 
> 赞同：8
> 
> 时间：2012-08-14T16:21:50.457
> 
> 标签：php, amazon-s3

我有一个将用户文件上传到 S3 的应用程序。目前，文件夹和文件的 ACL 设置为私有。

我创建了一个存储以下信息的数据库表（称为 docs）：

```
id
user_id
file_name (original file as specified by the user)
hash_name (random hash used to save the file on amazon) 
```

因此，当用户想要下载文件时，我首先在 db 表中检查他们有权访问文件。我不希望先将文件下载到我的服务器然后发送给用户——我希望他们能够直接从亚马逊获取文件。

依赖非常长的哈希名是否可以（使任何人基本上不可能随机猜测文件名）？在这种情况下，我可以将每个文件的 ACL 设置为公共读取。

或者，我可以使用其他选项来提供文件同时保持它们的私密性吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T16:27:54.400

请记住，一旦链接出现，没有什么能阻止用户与其他人共享该链接。再说一次，没有什么能阻止用户将文件保存在其他地方并共享指向文件副本的链接。

最佳方法取决于您的具体需求。

**选项 1 - 限时下载 URL**

如果适用于您的方案，您还可以创建指向 S3 内容的过期（限时）自定义链接。这将允许用户在有限的时间内下载内容，之后他们必须获得一个新的链接。

[http://docs.amazonwebservices.com/AmazonS3/latest/dev/S3_QSAuth.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/S3_QSAuth.html)

**选项 2 - 混淆 URL**

如果您重视避免通过您的 Web 服务器运行该文件，而不考虑有意共享一个 URL（无论多么晦涩）的风险，那么请使用难以猜测的链接名称。这将允许链接“永远”保持有效，这意味着该链接可以“永远”共享。

**选项 3 - 通过您的服务器下载**

如果您担心链接被共享，并且肯定希望用户通过您的网站进行身份验证，则在验证用户凭据后通过您的网站提供内容。

此选项还允许链接“永远”保持有效，但需要用户登录（或者可能只是在浏览器中有一个身份验证 cookie）才能访问该链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-23T23:01:38.620

如果有人有同样的问题，我只想用代码发布 PHP 解决方案。

这是我使用的代码：

```
$aws_access_key_id = 'AKIAIOSFODNN7EXAMPLE';
$aws_secret_key = 'YourSecretKey12345';
$aws_bucket = 'bucket';
$file_path = 'directory/image.jpg';
$timeout = '+10 minutes';

// get the URL!
$url = get_public_url($aws_access_key_id,$aws_secret_key,$aws_bucket,$file_path,$timeout);

// print the URL!
echo($url);

function get_public_url($keyID, $s3Key, $bucket, $filepath, $timeout)
{
    $expires = strtotime($timeout);
    $stringToSign = "GET\n\n\n{$expires}\n/{$aws_bucket}/{$file_path}";       
    $signature = urlencode(hex2b64(hmacsha1($s3Key, utf8_encode($stringToSign))));

    $url = "https://{$bucket}.s3.amazonaws.com/{$file_path}?AWSAccessKeyId={$keyID}&Signature={$signature}&Expires={$expires}";
    return $url;
}

function hmacsha1($key,$data)
{
    $blocksize=64;
    $hashfunc='sha1';
    if (strlen($key)>$blocksize)
        $key=pack('H*', $hashfunc($key));
    $key=str_pad($key,$blocksize,chr(0x00));
    $ipad=str_repeat(chr(0x36),$blocksize);
    $opad=str_repeat(chr(0x5c),$blocksize);
    $hmac = pack(
        'H*',$hashfunc(
            ($key^$opad).pack(
                'H*',$hashfunc(
                    ($key^$ipad).$data

                    )
                )
            )
        );
    return bin2hex($hmac);
}

function hex2b64($str)
{
  $raw = '';
  for ($i=0; $i < strlen($str); $i+=2)
  {
      $raw .= chr(hexdec(substr($str, $i, 2)));
  }
  return base64_encode($raw);
} 
```

# python - 为什么我不能在 GAE 中的 Python 会话变量中存储用户 ID（users.get_current_user()）？

> ID：11956634
> 
> 赞同：1
> 
> 时间：2012-08-14T16:22:45.933
> 
> 标签：python, google-app-engine

我正在尝试将 UserID 存储在 Google App Engine (Python) 的会话变量中。

会话变量功能工作正常。事实上，我什至可以将密钥存储在会话中。这有效：

```
 self.session['Xuser'] = user.key.id() 
```

这不起作用：

```
 self.session['Xuser'] = users.get_current_user() 
```

我什至尝试通过先将 UserID 放入另一个变量来欺骗系统。这也不起作用：

```
 tempcode = users.get_current_user()
    self.session['Xuser'] = tempcode 
```

当我尝试将 UserID 放入会话变量时，问题仅出在第二行。谁能告诉我为什么以及我需要做什么才能将 UserID 存储在会话变量中，以便我可以比较它

我需要这样做，因为我有一个 UserSupplement 类型，并且我不希望用户能够为同一个 UserID 输入多个条目。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:18:44.783

尝试

```
self.session['Xuser'] = users.get_current_user().user_id() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:28:01.083

您要存储在会话中的所有对象都必须是可序列化的。`User`显然不是。

# php - mysql 结果检索列名和值

> ID：11956642
> 
> 赞同：1
> 
> 时间：2012-08-14T16:23:20.550
> 
> 标签：php, mysql

我正在尝试制作一个将mysql查询结果转换为数组的函数

在下面的函数中，我假设有字段`isbn, title and rank`，但情况并非总是如此。

有没有办法在事先不知道任何这些信息的情况下检索字段名称和值？以便此函数可以与任何 mysql 查询结果一起使用。

**功能**

```
function mysqlToArray($result){

   $arr = array();
   $numRows = mysql_num_rows($result);//count
   if($numRows>0){
      for($i=0; $i<$numRows; $i++){
         $arr[] = array(
            "isbn"      => mysql_result($result, $i, "isbn"),
            "title"     => mysql_result($result, $i, "title"),
            "rank"      => mysql_result($result, $i, "rank"),                   
         );
      }
   }        

   return $arr;
} 
```

**使用示例**

```
function getProfitableBooks(){
    $q = "SELECT isbn, title, rank FROM ".TBL_BOOKS;

    $result = mysql_query($q, $this->connection);
    if(!$result || (mysql_numrows($result) < 1)){  
        return null;
    }
    return $this->mysqlToArray($result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:29:05.923

试试看这个[mysql_fetch_array](http://php.net/manual/es/function.mysql-fetch-array.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:28:09.267

有一个很棒的 PHP 函数`mysql_fetch_array`

您可以[在 PHP 手册中查看示例 mysql_fetch_array](http://www.php.net/manual/en/function.mysql-fetch-array.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:29:38.143

尝试这样的事情来获取 cols 的名称。

```
my $table = 'name';
my $sth = $dbh->prepare("SELECT * FROM $table WHERE 1=0;");
$sth->execute;
my @cols = @{$sth->{NAME}}; # or NAME_lc if needed
$sth->finish;
foreach ( @cols ) {
    printf( "Note: col : %s\n", $_ );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T16:29:51.693

你检查过[PHP手册](http://php.net/manual/en/ref.mysql.php)吗？

[mysql_fetch_assoc](http://php.net/mysql_fetch_assoc)在这里会有所帮助：

```
function mysqlToArray($result)
{
   $arr = array();
   while($arr[] = mysql_fetch_assoc($result));

   return $arr;
} 
```

# sharepoint - 这种对象转换模式在 SharePoint 中是否可接受？

> ID：11956644
> 
> 赞同：1
> 
> 时间：2012-08-14T16:23:26.570
> 
> 标签：sharepoint, design-patterns, sharepoint-2010

我正在创建一个 SharePoint 应用程序，并且正在尝试一些新的东西来创建相当于 API 的数据访问以保持一致性和约定。

我以前没见过这个，这让我觉得它可能很糟糕:)

我已经重载了构造函数，`class Post`只接受一个`SPListItem`作为参数。然后我有一个嵌入的通用列表，`Post`它在方法签名中采用 SPListItemCollection。

我以更有效的语句遍历项目`for`，这意味着如果我需要添加或修改`Post`对象的转换方式，我可以在单个源的类定义中完成。

```
class Post
{
    public int ID { get; set; }
    public string Title { get; set; }

    public Post(SPListItem item)
    {
        ID = item.ID;
        Title = (string)item["Title"];
    }
    public static List<Post> Posts(SPListItemCollection _items)
    {
        var returnlist = new List<Post>();
        for (int i = 0; i < _items.Count; i++) {returnlist.Add(new Post(_items[i]));}
        return returnlist;
    }
} 
```

这使我能够执行以下操作：

```
 static public List<Post> GetPostsByCommunity(string communityName) 
    {
        var targetList = CoreLists.SystemAccount.Posts(); //CAML emitted for brevity
        return Post.Posts(targetList.GetItems(query)); //Call the constructor
    } 
```

这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:20:59.083

这种方法可能是合适的，但 FOR 循环引起了一些担忧。_items.Count 将强制 SPListItemCollection 从数据库中检索列表中的所有项目。对于大型列表，这可能 a) 导致限制异常，或 b) 占用大量资源。为什么不使用 FOREACH 循环？有了这个，我认为 SPListItems 一次被检索和处理一个。

如果我正在写这篇文章，我将有一个“Posts”类以及“Post”，并为它提供接受 SPListItemCollection 的构造函数。

不过，老实说，我见过几次尝试包装 SharePoint SPListItems 的人，结果总是看起来付出的努力多于其价值。

此外，如果您使用的是 SharePoint 2010，您是否考虑过使用[SPMetal](http://msdn.microsoft.com/en-us/library/ee538255.aspx)？

# java - Jenkins 如何在 Mac 上内部设置 JAVA_HOME？

> ID：11956645
> 
> 赞同：4
> 
> 时间：2012-08-14T16:23:33.000
> 
> 标签：java, build, jenkins, osx-mountain-lion, java-home

我有一个有趣的问题。在 Linux 上使用 Jenkins 构建主节点，并拥有一个 Mac Mountain Lion 节点（此处描述的内容在 Linux 和 Windows 上运行良好，但仅在这台 Mac 机器上存在问题，同时使用 SSH 连接和 Java Web Start。

在客户端机器上：

*   我已经安装了 JDK（并验证了它）。
*   我设置了 JAVA_HOME 槽 .profile 用于与 Jenkins 通信的构建用户
*   可以从 shell 和 Maven 访问 Java

但是 Jenkins 总是在开始作业后设置另一个 JAVA_HOME ($JENKINS_HOME/tools/JDK/jdk1.6)，但该文件夹是空的（在 Linux 节点上，应该在此文件夹内部署 JDK，并且是，但不是在 Mac 上）。

有谁知道在詹金斯中改变这种行为是可能的吗？在 Jenkins 配置中设置自定义 JAVA_HOME 都没有帮助，使用 .profile 文件，在作业中即时导出变量等。

我正在使用最新版本 1.477

**2012 年 8 月 15 日更新和修复**

所以，在 Mac 上运行作业时有一行，说

*JDK安装跳过：未知CPU名称：mac os x*

关键是甲骨文不会为 Mac 发布 JDK，这是一种“功能”。

我为解决此问题所做的步骤是：

*   在 Jenkins 和 Mac 节点之间配置 SSH 连接
*   将JDK手动安装到Mac
*   添加到节点配置 Java 作为工具并指定 Mac 节点上 JDK 主目录的路径
*   从节点配置中删除 Maven 作为工具（因为它已经从节点上的 Lion 版本中导出，如果您不删除它，您的 Maven 内容将因任何冲突原因而失败）。

这解决了狮子和山狮的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:06:49.153

所以，在 Mac 上运行作业时有一行，说

JDK安装跳过：未知CPU名称：mac os x

关键是甲骨文不会为 Mac 发布 JDK，这是一种“功能”。

我为解决此问题所做的步骤是：

1.  在 Jenkins 和 Mac 节点之间配置 SSH 连接
2.  将JDK手动安装到Mac
3.  添加到节点配置 Java 作为工具并指定 Mac 节点上 JDK 主目录的路径
4.  从节点配置中删除 Maven 作为工具
    （因为它已经从节点上的 Lion 版本中导出，如果您不删除它，
    您的 Maven 内容将因任何冲突原因而失败）。

这解决了狮子和山狮的问题。

# php - 对照其他值检查 preg_match 结果？

> ID：11956647
> 
> 赞同：0
> 
> 时间：2012-08-14T16:23:38.927
> 
> 标签：php, preg-match

我的 PHP 脚本需要一些帮助。所以这里是交易。

我有一个 preg_match，它检查每 30 分钟左右更改一次的 .txt 文件中的以下文本：LYBE_TWR,LYBE_APP,LYBA_CTR,LYPG_TWR,LYPG_APP,LYTV_TWR,LYNI_APP)

它运行完美，如果存在上述字符串，则可以获取它们。

但我需要做的更进一步并检查已找到七种组合中的哪一种，因为并非所有组合都始终存在。示例：当前文本文件包含 LYBE_TWR、LYBE_APP、LYPG_TWR。preg_match 做了它的事情，我可以回显 3 个值，但我需要这个。

```
LYBE_TWR : PRESENT/NOT PRESENT
LYBE_APP: PRESENT/NOT PRESENT
LYBA_CTR PRESENT/NOT PRESENT
LYPG_TWR PRESENT/NOT RESENT 
etc. 
```

因此，如果在文本文件中找到它，它会回显存在，如果不是，则回显不存在。正确的结果是：

```
LYBE_TWR : PRESENT
LYBE_APP: PRESENT
LYBA_CTR NOT PRESENT
LYPG_TWR PRESENT 
```

例如，如果我这样做，`if ($string == "LYBE_TWR") { echo 'present'; } else { echo 'not present'}`它将回显 the 的正确值，`LYBE_TWR`但它会说后者不存在，因为它们实际上不是我想要的。

我希望你能理解，因为我自己也不确定了（rofl）

编辑：这是当前代码..记住它仍然是 WIP，所以还没有完成，会有一些错误[http://pastebin.com/z1r4A78E](http://pastebin.com/z1r4A78E) 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:31:17.390

这是假设您对字符串是否出现在文件中而不是行中感兴趣的代码。我将字符串拆分为前缀和后缀，我忽略了任何数值。为了可读性，我没有复制你所有的代码

```
$prefixes = array("LYBA", "LYBE", "LYPG", "LYNI", "LYTV");
$suffixes = array("TWR", "APP", "CTR");

foreach($prefixes as $prefix)
{
    foreach($suffixes as $suffix)
    {
        $results[$prefix."_".$suffix] = 0;
    }
}

if(preg_match('/^('.implode("|",$prefixes).'|)_[A-Z0-9]*_*('.implode("|",$suffixes).')/', $line, $matches))
{
    (... your code ...)
    $match_string = $matches[1]."_".$matches[2];
    $results[$match_string]++;

}

foreach($results as $key => $value)
{
    echo $key;
    if($value > 0)
    {
        echo " PRESENT";
    }
    else
    {
        echo " NOT PRESENT";
    }
    echo "<br/>";
} 
```

# propel - DDL - 不能使用分隔符？

> ID：11956650
> 
> 赞同：0
> 
> 时间：2012-08-14T16:23:57.750
> 
> 标签：propel

我正在尝试通过将它们添加到从 sqldb.map 调用的 sql 文件中来创建一些数据库触发器创建数据库后。

但是，要创建触发器，我需要使用 delimiter 命令将分隔符更改为分号以外的内容。这失败了，结果触发器创建失败，标准都是`you have a syntax error message.`. 我可以通过这种方式运行一个简单的 sql 语句，但它不喜欢分隔符。

有什么想法吗？

```
delimiter //

CREATE TRIGGER `SHOW_ADD_NEWS_ITEM` 
AFTER INSERT ON `show`
FOR EACH ROW 
    BEGIN
        declare username varchar(255);
        IF NEW.privacy_key IS NOT NULL AND NEW.privacy_key <> 'PRIVATE' and (NOT EXISTS (select id from feed_friend_activity 
                where location_identifier = NEW.uuid and user_id = NEW.user_id and event_type = 'published show')) THEN
            select concat(user.first_name,user.last_name) into username from user where user.id = NEW.user_id;
            insert into feed_friend_activity 
                (location_identifier,user_id,event_type,user_name,item_name,created_on) 
                values (NEW.uuid,NEW.user_id,'published show',username,NEW.name,NEW.created_on);
        END IF;
    END
// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:32:40.687

Propel 1.6.7 现在支持`DELIMITER`. 有关更多信息，请参阅[此拉取请求](https://github.com/propelorm/Propel/pull/381)。如果您的 SQL 是有效的，那么它将在 1.6.7 或更高版本上正常工作。

# c++ - 排序和连接数百万或十亿 STL 向量的最快方法

> ID：11956658
> 
> 赞同：4
> 
> 时间：2012-08-14T16:24:30.397
> 
> 标签：c++, vector

将百万或十亿 STL 向量排序和连接成单个 STL 向量的最佳方法是什么？目前，我这样做的方式是迭代向量并执行每个操作。

这是伪代码

```
typedef unsigned long long int ULLInt;

ULLInt N = 1000000;

vector<vector<ULLInt> > vecVec( N, vector<ULLInt>() );
vector<ULLInt>          concatVec;

// ...
// ... fill vectors inside vecVec here 
// ..  we also get here the total number of values inserted in all vectors (count)
// ...

// reserve the space
concatVec.reserve( count);

// sort each vector and concatenate them in sequence
for( ULLInt i=0; i<N; i++)
  sort( vecVec[i].begin(), vecVec[i].end() );
  concatVec.insert( concatVec.end(), vecVec[i].begin(), vecVec[i].end() );
end for 
```

请注意，不需要对 concatVec 进行排序。感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:53:40.197

我要做的一件事是询问您是否真的需要连接一百万个 std::vectors。如果您将每个向量添加到列表中并创建自己的迭代器来遍历每个向量中的每个元素会怎样？对于大多数算法来说，这与一个大向量无法区分。而且，根据负载，在自定义迭代器中完成的额外工作将远远少于实际连接所有向量所需的所有工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:35:26.473

每次代码插入其中一个向量的内容时，它必须确保目标向量有足够的内存来保存结果。这意味着它将经常为目标向量重新分配内存。这意味着复制它的内容，而代码最终会这样做很多很多次。将目标向量的内存预分配到最终的完整大小会快得多**。**阅读有关`vector::reserve()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:59:23.373

这个怎么样：

*   将向量拆分为*核心*堆。计算每桩所需的尺寸
*   在向量中为所有数据保留空间
*   将此向量拆分为*核心*部分。
*   将零件和桩送入螺纹以进行合并。

一些快速代码（可能无法编译，但您可能明白了）：

```
typedef vector<vector<ULLINT>> ManyVectors; 

void merge(ManyVectors vector_of_vectors) {
  const int cores = 16;
  std::array<ManyVectors, cores> piles = split_vector(vector_of_vectors,cores);
  std::array<size_t, cores> sizes = calculate_sizes(piles,cores);
  std::vector<ULLINT> result;
  result.reserve(sum_of_sizes(sizes));
  int used = 0; 
  int core = 0;
  for (ManyVectors& pile: piles) {
    std::thread(merge_vectors, pile, result.begin()+used);
    used += sizes[core];
    core += 1;  
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T17:46:15.983

如果 vecVec 中的向量按升序填充（正如我从聊天中了解到的那样 - 那是您的用例），那么您可以尝试使用一个向量而不是许多小向量，在单独的索引数组中维护每个向量的开始索引。通过在适当的位置“构建”子向量，这将避免昂贵的连接。

```
#include <vector>
#include <algorithm>
#include <cstdlib>
#include <iterator>

int main(int argc,char *argv[])
{
    using namespace std;
    typedef int Payload;
    vector<Payload> vec;
    vector<size_t> indices;
    for(unsigned i=0;i!=100;++i)
    {
        indices.push_back(vec.size()); // begin index of current vector
        // filling current sub-vector
        generate_n(back_inserter(vec),777+i,rand);
    }
    indices.push_back(vec.size()); // end of last vector, or begin of
                                   // one-past last vector

    // sorting each sub vector
    for(size_t i=0;i+1!=indices.size();++i)
    {
        // can be done in parallel. be aware of possible false sharing
        sort(vec.begin()+indices[i],vec.begin()+indices[i+1]);
    }
    return 0;
} 
```

# javascript - 在网站上使用 Facebook 状态

> ID：11956659
> 
> 赞同：0
> 
> 时间：2012-08-14T16:24:37.313
> 
> 标签：javascript, jquery, facebook

有没有办法在我的网站上向我的访问者显示我的访问者的 Facebook 状态？（谷歌搜索了几个小时，找不到任何东西）

# android - 从外部应用程序打开 Android SQLite db 时出现“错误：文件已加密或不是数据库”

> ID：11956660
> 
> 赞同：0
> 
> 时间：2012-08-14T16:24:37.580
> 
> 标签：android, sqlite

我正在尝试使用 SQLite 数据库来保存来自消息传递应用程序的日志信息。

我正在使用 SQLiteOpenHelper 并使用以下命令将数据库强制到无根设备的 SD 卡*上*：

```
public LogDatabase(Context context, String dbname) {
  super(context, 
    Environment.getExternalStorageDirectory().getAbsolutePath() + 
      "/" + dbname, null, 3);
} 
```

这似乎工作正常：数据库适当增长，应用程序在写入时不会抛出任何异常。

当我通过 USB 安装设备并尝试从外部应用程序（例如，来自 Ubuntu 命令行的 sqlite3）打开数据库时，就会出现问题。错误始终相同：“错误：文件已加密或不是数据库”。

Android 对 SQLite 的处理有什么奇怪的吗？还是我在管理数据库的方式上遗漏了一些根本性的问题？

编辑：有问题的原始设备是运行 v2.3.5 的 HTC Desire S。

编辑：我已经在替代设备（运行 v2.3.4 的摩托罗拉 ET1）上重新运行测试，但问题*没有*发生。我可以通过 Ubuntu 挂载设备，通过 sqlite3 命令行随意浏览数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:24:08.107

好吧，我似乎找到了答案。一旦我怀疑它可能是特定于供应商的，我就发现了这个堆栈问题：

[HTC Desire HD 的 Sqlite 问题](https://stackoverflow.com/questions/4718934/sqlite-issues-with-htc-desire-hd)

这表明 HTC 可能在其设备上启用了预写日志记录 (WAL)。

假设这是真的，我提取了一个最新版本的 SQLite 并构建了 v3.7.14，它可以成功地打开问题数据库。这与 SQLite 的 v3.6.22 相反，后者不能。

# java - 如何在 Java 中注释掉整个类？

> ID：11956664
> 
> 赞同：6
> 
> 时间：2012-08-14T16:24:45.633
> 
> 标签：java

不是说我永远需要这个，而是你如何在以下内容之后评论整个课程：

```
public class yadayada extends yadayadasquared {

    /**
     * Says Hello
     **/
    public String sayHello() {
        return "Hello";
    }
} 
```

当类中有很好的注释/记录的方法时？

让我们想象一下，为了避免整个分叉讨论只有五分钟......

是的，你们这些纯粹主义者，我看到了！

[https://stackoverflow.com/questions/123423/do-you-leave-historical-code-commented-out-in-classes-that-you-update](https://stackoverflow.com/questions/123423/do-you-leave-historical-code-commented-out-in-classes-that-you-update)

假设这是一个 5 分钟的测试。回购工作？没有。删除？喜欢控制斜线的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T16:32:10.297

定义“整个班级”。

选择类的内容，点击`Command`+ `/`^*，你的 IDE 应该单行注释所有内容。这样，您仍然可以使用该类，只是没有功能。或者选择整个班级。或者重命名文件。或者......但最终，有什么意义？删除文件。

^(* 或者无论您的 IDE 的单行注释顺序是什么。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:31:48.290

如果使用 ide：可以先做“ + `ctrl`” `a`，然后再做“ `ctrl`++ ”，这样会注释掉所有代码。`shift``/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:31:47.810

如果您使用包含类主体的多行注释，文档注释或任何多行注释将成为问题，因为它们以`*/`. 结尾，但现代 IDE 有一些注释/取消注释代码的快捷方式。在 NetBeans 中，您只需标记代码并键入`Ctrl`+ `/`。所以，我会评论我需要的东西，使用代码而不是撤消更改（评论）。如前所述，重命名文件扩展名也是一件好事`@su-`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T16:33:15.370

在 Eclipse 中，您可以使用`Ctrl+/`在选定行上切换单行注释。如果您使用的是另一个 IDE，您可能有类似的东西。只需选择整个班级并按下热键！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-14T02:53:36.153

注释解决方案的一个快速替代方法是将文件重命名为`MyClass.java.txt`或类似的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T16:30:29.683

您可以使用多行注释`/*`

```
/*public class Foo extends Bar
{
    public string SayFoo()
    {
        return "Foo";
    }
}*/ 
```

但是，如果您的代码包含文档并且您使用的是 IDE，那么它们中的大多数都支持“切换评论”功能。我知道 Eclipse 和 Netbeans 都支持该功能。

但真正的解决方案是使用某种版本控制系统来跟踪您的代码。我会推荐 git，因为它不需要使用服务器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T16:39:56.880

试试这个`Eclipse IDE`... 在类主体中选择**代码**主体。（即。`between { and }`）

**评论：**

```
 Ctrl + Shift + / 
```

**取消注释：**

```
 Ctrl + Shift + \ 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-14T16:27:01.860

关于什么

```
@Deprecated 
```

那样有用吗？

# angularjs - AngularJS 拦截和扩展控制器 $scope

> ID：11956667
> 
> 赞同：10
> 
> 时间：2012-08-14T16:24:53.023
> 
> 标签：angularjs

我在我的应用程序中定义了许多可重用的功能，每个控制器都使用 $scope 变量。我不必每次都创建一个共享服务，有没有办法扩展 $scope 变量，以便我可以在任何地方使用我的扩展代码？

就像是：

```
//I've tested this out and it doesn't work, but this is what I want to do.
angular.module('App',[]).config(['$scopeProvider',function($scope) {
  $scope.method1 = function() { ... };
  $scope.method2 = function() { ... };
}]); 
```

然后稍后：

```
var HomeCtrl = function($scope) {
  $scope.method1();
}; 
```

这可能吗？还是我需要创建一个共享服务，然后让 $scope 从每个控制器的第一行扩展？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T17:01:04.023

而不是`.config`try `.run`，这将完全符合您的要求。

```
angular.module('App', []).run(['$rootScope', function($rootScope) {
  $rootScope.foo = function() {
     alert("WIN!");
  };
}]);

angular.module('App').controller('HomeCtr', ['$scope', function($scope) {
  $scope.foo(); #will call the alert
}]); 
```

**注意**我只是`module.controller`因为我喜欢才使用它，`var HomeCtrl = function($scope) {`会有同样的效果。

# aptana - 带有自动换行的高亮代码错误

> ID：11956668
> 
> 赞同：0
> 
> 时间：2012-08-14T16:24:58.033
> 
> 标签：aptana, highlighting

在自动换行行上突出显示代码时，我有一个奇怪的情况，在 100 列（大约）之后，其余代码没有着色......有白色文本......

如果我在白色文本之前插入新行，我会突出显示这一行。

那么有一个选项可以增加着色代码的列数吗？

我对“colorer”没有意见，但我喜欢 aptana 的 php 编辑器，所以我认为是错误或隐藏参数？

谢谢。乔斯

* * *

Aptana Studio 3，构建：3.2.1.201207261642

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:53:35.343

为了提高性能，在 Aptana Studio 编辑器关闭语法着色之前，有一个最大列数的设定值；默认值为 200。在即将发布的 3.2.2 版本中，它将提供一个首选项，您可以在其中自定义设置。请参阅相关[票证](https://jira.appcelerator.org/browse/APSTUD-4867)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-28T11:08:38.343

从 v3.6.1 及更高版本开始，它位于**Windows > Preferences > Aptana Studio > Editors > Syntax Coloring -> Max columns to color per line (-1 等于 no max)**

# facebook - Facebook“向我发送电子邮件”权限

> ID：11956669
> 
> 赞同：1
> 
> 时间：2012-08-14T16:25:03.257
> 
> 标签：facebook, permissions

我对 Facebook 权限有疑问。

我希望让我的网站用户“使用 Facebook 登录”。我创建了一个应用程序，但是我希望用户明确同意让我的应用程序向他们发送电子邮件（见下图）

![](../Images/b341df2e6ac7897727c3810e268fa410.png)

我检查了 facebook 开发人员页面（[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)），似乎找不到对过去可用的“向我发送电子邮件”权限的引用。

我可以在已弃用但在当前文档中找不到的 REST API 文档中看到它。

任何有关使用许可的帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:03:12.140

如果您通过[增强的身份验证对话框](https://developers.facebook.com/docs/opengraph/authentication/)（位于您的应用程序设置 > 身份验证对话框中）设置权限对话框，只需在配置“用户和朋友权限”部分时使用[Facebook 文档中所述的“电子邮件”权限。](https://developers.facebook.com/docs/authentication/permissions/#user_friends_perms)

如果您使用 sdk 来提示权限对话框，只需将“电子邮件”添加到逗号分隔列表中。

# xml - 你怎么知道一个文件是什么版本的 CGM？

> ID：11956671
> 
> 赞同：0
> 
> 时间：2012-08-14T16:25:05.067
> 
> 标签：xml, graphics, apache-fop

我一直在搜索，虽然我可以找到许多不同版本的 CGM 文件的描述，但我试图找到一种方法来判断特定文件的 CGM 版本。

我在打印包含 CGM 图像的 pdf 文档时遇到了一些问题。大多数会打印，有些不会。有人告诉我我们只支持 CGM 版本 1，所以我正在寻找一种方法来判断这些未打印的图像是什么 CGM 版本。

我们使用[Apache FOP](http://xmlgraphics.apache.org/fop/) 和[jcgm 插件](http://jcgm.sourceforge.net/index.html)将 xml 文件、xsl 文件和一些图形转换为 pdf 文件。

有什么方法可以告诉 cgm 文件是什么版本，以便我可以确定这是我遇到的问题还是其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:25:28.373

CGM 文件的版本在其标头中编码：METAFILE VERSION 命令包含版本号（1、2、3、4）。

jcgm 库提供对 CGM 文件的所有命令的访问：CGM 类具有可用于打印它们的[showCGMCommands方法。](http://jcgm.sourceforge.net/api/net/sf/jcgm/core/CGM.html#showCGMCommands%28%29)

对于不打印的图像，您可以检查他们正在使用的命令是否被库支持，因为 jcgm 不支持所有命令：[jcgm implemented commands](http://jcgm.sourceforge.net/features.html)。

# ios - UITableView 删除按钮没有出现

> ID：11956673
> 
> 赞同：2
> 
> 时间：2012-08-14T16:25:11.463
> 
> 标签：ios, uitableview, ipad, editing

当我按下编辑按钮时，我会在项目左侧看到圆形删除图标。当我按下单元格中的删除图标时，它会“转动”，但删除按钮没有显示，因此我的 commitEditingStyle 永远不会被调用，因为我没有可按的删除按钮。

只是为了好玩...我将单元格更改为 Insert 我得到加号图标...我按下它并调用 commitEditingStyle。

我不明白为什么我没有得到删除按钮。

我有一个 UIViewController 我在弹出窗口中显示。我正在添加一个 UITableView 来喜欢这样......

```
audioTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, 303)];
audioTable.delegate = self;
audioTable.dataSource = self;
[self.view addSubview:audioTable]; 
```

我正在使用一个带有两个标签的自定义单元格来显示文本。

这是自定义单元格 initWithFrame ...

```
primaryLabel = [[UILabel alloc]initWithFrame:CGRectMake(25 ,8, 275, 25)];
primaryLabel.font = [UIFont systemFontOfSize:14];

secondaryLabel = [[UILabel alloc]initWithFrame:CGRectMake(25 ,28, 275, 25)];
secondaryLabel.font = [UIFont systemFontOfSize:12];

[self.contentView addSubview:primaryLabel];
[self.contentView addSubview:secondaryLabel];

[self.contentView sendSubviewToBack:primaryLabel];
[self.contentView sendSubviewToBack:secondaryLabel]; 
```

我在连接到编辑调用的视图控制器的工具栏中有一个删除按钮。这是我在编辑调用中所做的事情，因为我在单元格中得到了删除符号，所以它被调用得很好......

```
if([self.audioTable isEditing]) {
    [button setTitle:@"Edit"];
    [super setEditing:NO animated:NO];
    [self.audioTable setEditing:NO animated:YES];
} else {
    [button setTitle:@"Done"];
    [super setEditing:YES animated:NO];
    [self.audioTable setEditing:YES animated:YES];
} 
```

我已经实现了以下...

```
-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
     return UITableViewCellEditingStyleDelete;
}

-(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    //i don't think i need to implement this really
    return YES;
}

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //do delete stuff
    }
} 
```

就像我说的一切正常，按钮按下和所有工作......只是没有删除按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:27:33.180

我不得不使用不同的机制来解决它。我做了一个测试，当我使用它时`UITableViewController`它工作正常。当我将 a 添加`UITableView`到 a`UIViewController`时，实现与 a 相同的`UITableViewController`操作，它不起作用。我不知道我错过了什么，但使用而`UIViewController`不是`UITableViewController`导致删除按钮不出现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T14:51:52.510

我遇到了同样的问题。问题是我的 tableView 的框架没有在弹出框内正确调整大小。实际上，删除按钮正在显示，但它超出了弹出框的范围，因此无法看到。

我通过确保`tableView`适当调整大小来解决此问题。对我来说，这意味着像这样设置 tableView `autoresizingMask`：

```
self.tableView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

其他人能够通过切换到 a 来解决此问题的原因`UITableViewController`是它`tableView`已正确调整大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-01T17:35:14.560

我知道您使用 a 修复了它，`UITableViewController`但在我的情况下我不能。

环顾四周，我刚刚在[这里](https://discussions.apple.com/thread/1751270?start=0&tstart=0)找到了答案，您需要更多管道才能完成工作。幸运的是它很容易。将此添加到`UIViewController`包含对您的引用的`UITableView`

```
// objc
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];
    [tableView setEditing:editing animated:animated];
}

// swift
override func setEditing(editing: Bool, animated: Bool) {
    super.setEditing(editing, animated: animated)
    self.tableView.setEditing(editing, animated: animated)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T16:49:24.720

记得设置删除按钮的样式

```
-(UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellEditingStyleDelete;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T17:11:08.180

问题是您正在使用 addSubview: 将标签添加到单元格的内容视图中，并且当它们最后添加时，它们隐藏了单元格的其他部分。通过调用将它们推到后台：

```
[cell.contentView sendSubviewToBack:label]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-01T22:05:23.480

`UIViewController.editButtonItem`在按钮栏中使用 （它会自动更改视图控制器的编辑属性）时，我遇到了同样的问题。当我使用带有 UITableView 的 UIViewController 时，我需要将 setEditing 委托给 tableview，例如

```
override func setEditing(_ editing: Bool, animated: Bool) {
    super.setEditing(editing, animated: animated)
    tableView.setEditing(editing, animated: animated)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-14T23:35:08.687

如果您使用的是自定义表格视图而不是 TVController。您必须设置至少三个代表

斯威夫特 4.2

```
func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCell.EditingStyle, forRowAt indexPath: IndexPath) {
    if editingStyle == .insert {

    } else if editingStyle == .delete {

    }
}

func tableView(_ tableView: UITableView, editingStyleForRowAt indexPath: IndexPath) -> UITableViewCell.EditingStyle {
    return .delete
}

func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -> Bool {
    return true
} 
```

最重要的是在 viewDidload 中添加 'tableView.isEditing = true' :)

# c# - C# 的命名空间范围问题

> ID：11956675
> 
> 赞同：0
> 
> 时间：2012-08-14T16:25:19.437
> 
> 标签：c#, namespaces

所以我有一个程序是一个 3 层程序，即 UI、BLL（业务逻辑层），当然还有 DAL（数据访问层）。UI 总是与 BLL 对话，BLL 使用 DAL 检索数据单元，以某种格式组装它们并将它们返回给 UI。

因为这是我的工作，所以我想确保始终使用约定（不是每个人都可以在任何地方编写自己的风格的忠实粉丝！）。所以我认为有这样的东西会很好。

```
using (Bll.MyService service = new Bll.MyService()) {
    //My Sweet Code
} 
```

但！！！如果 Bll 位于我的 UI 不在的命名空间中，则这不是一个选项。这是我的意思的一个更冗长的例子。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MyApp;

//Entry point
namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            //I want to be able to do a using MyApp and access the Bll objects!
            Bll.ApiService service = new Bll.ApiService(); //ERROR LINE
        }
    }
}

//Data access layer
namespace MyApp.DAL
{
    class ApiDataAccessor
    {
        public int MyVar = 1;
    }
}

//The bacon letuce layer of course
namespace MyApp.Bll
{
    class ApiService
    {
        public void MyFunction()
        {
            //todo: make more awesome
        }
    }
} 
```

如果有人有任何建议，那就太好了！谢谢！

## 编辑：

在代码中的注释中添加了`//ERROR LINE`，以使错误显而易见。我还发现了一个黑客。 `using Bll = MyApp.Bll`这将强制`Bll.ApiService`使用。我不知道我是否喜欢这个解决方案（因为它很容易搞砸和生气，直到我意识到我没有给命名空间起别名）。

## 编辑（再次）：

有几个解决方案。

1.  `using Bll = MyApp.Bll`在顶部，然后必须引用该命名空间中的所有对象，`Bll.MyObject`这就是我们想要的！

2.  需要完全限定的名称。 `MyApp.Bll.MyObject`. 这是我们不想要的（因为它可能会因大命名空间而变得冗长）

3.  只需在顶部包含名称空间。 `using MyApp.Bll`.

总而言之，我们希望以`using MyApp`某种方式允许我们引用所有这些命名空间及其对象`Bll.ThisObject`，`Dal.ThatObject`但是，如果这是所需的解决方案，那么实现这一目标的唯一方法是包含 2 个 using 语句，它们是别名。 `using Dal = MyApp.Dal`和`using Bll = MyApp.Bll`

感谢大家的帮助。

这是解决方案

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MyApp;
using Bll = MyApp.Bll;

//Entry point
namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            //I want to be able to do a using MyApp and access the Bll objects!
            Bll.ApiService service = new Bll.ApiService(); // <-- it works.
        }
    }
}

//Data access layer
namespace MyApp.DAL
{
    class ApiDataAccessor
    {
        public int MyVar = 1;
    }
}

//The bacon letuce layer of course
namespace MyApp.Bll
{
    class ApiService
    {
        public void MyFunction()
        {
            //todo: make more awesome
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:31:37.033

好吧，让我们来看看：

1.  如果这些层是在不同的程序集（`Class Library`项目）上实现的，那么您必须确保引用它们（右键单击项目 > 添加引用 > 项目）。UI 应参考 BLL，即应参考 DAL
2.  如果它们有不同的命名空间，您必须声明一个`using Namespace;`语句或使用*完整的限定*名，例如`Namespace.Class`
3.  为了在`using(obj){...}`块中使用，`obj`必须实现`IDisposable`接口。这是语言*的设计*要求

请注意，我注意到这是最好的方法，您也不应该在项目中更改任何内容。如果您有更广泛的问题，例如“这是最好的解决方案”，那么我们也许可以讨论它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:39:54.640

我认为混乱就在这里：你没有*一个*名为`Bll`. 您有一个名为`MyApp.Bll`.

无论是否有`using MyApp`指令，您都需要添加`using MyApp.Bll`指令，然后`ApiService`直接在代码中引用，或者将类完全限定为`MyApp.Bll.ApiService`.

如果您所追求的只是能够`MyApp.Bll`使用符号引用命名空间`Bll`，则可以为命名空间设置别名：

`using Bll = MyApp.Bll`

此外，基于对问题的评论和各种答案，值得指出的是[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)，它提供了一种方便的方式来声明和清理非托管资源，并在您的代码中显示为一个块，与[using 指令](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)不同导入命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:34:01.263

你可以用它们的命名空间来完全限定你的类型名：

```
MyApp.Bll.ApiService service = new MyApp.Bll.ApiService(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:37:36.510

就个人而言，我更喜欢使用更具体的陈述。正如 Andre 所提到的，您最终可能会将它们放在单独的类库中，然后根据需要将它们包含到您的项目中，但无论如何我通常使用以下语句：

```
using MyApp.Bll;
using MyApp.DAL; 
```

如果您包含多个名称空间，其中类引用不明确（即 ApiService 在您正在使用的多个名称空间中定义），那么您将明确标识该类。

```
MyApp.Bll.ApiService service = new MyApp.Bll.ApiService(); 
```

# cassandra - 两个节点 Cassandra 集群（最新版本）因“不是基于时间的 UUID”而失败

> ID：11956677
> 
> 赞同：1
> 
> 时间：2012-08-14T16:25:26.533
> 
> 标签：cassandra

我一直在 1.1.3 运行一个节点 cassandra 集群（在 Windows 上）。我也在 1.1.3 添加了第二个节点（在 ubuntu 上）。

当我启动第一个节点时一切都很好，但是当我启动第二个节点时，我在第一个节点上收到错误：“UnsupportedOperationException：不是基于时间的 UUID。

研究这个错误，如果在同一个集群中混合较旧和较新的 cassandra，似乎可能会出现错误，但这里不是这种情况。

两台机器上的 cassandra.yaml 文件是 vanilla 的（即除了相关的 IP 地址外，与下载相同）。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:03:28.123

AFAIK，不支持在同一集群中混合具有不同操作系统的节点。

[阅读 Cassandra 的创建者之一 jbellis 的答案](https://stackoverflow.com/q/7353159/964592)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:26:16.973

发生这种情况的原因是 Windows 机器与 Unix 上的 little-endian 与 big-endian。

# database - 如何使用 django 更新会计应用程序中的余额？

> ID：11956679
> 
> 赞同：4
> 
> 时间：2012-08-14T16:25:29.567
> 
> 标签：database, django, database-design, model, accounting

我正在学习 Django，尝试做一个会计应用程序来跟踪我的开支等。

我用两种模型创建了数据库，一种用于帐户，一种用于操作。但我不知道如何在每次操作中保持我的余额更新。

我在想，也许每次我保存一个新操作时，我都会通过覆盖操作模型的保存方法来更新余额？但是在这种情况下，如果我犯了一个错误并且必须删除一个操作，那么我的余额将不会更新，对吗？

我想我也可以创建一个 BalanceHistory 模型，其中包含所有余额的历史记录，但在删除操作的情况下也会出现同样的问题..

我看到的最好的选择是每次我想显示它时动态更新我的余额，添加当时的所有操作..但我不知道我该怎么做..

因此，如果有人对此有所了解，那就太好了。我知道这不是纯粹与 Django 相关的问题，但由于我正在使用 Django，如果我能找到使用 Django 功能的想法会更好！

提前感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:32:15.710

你说得对，这很棘手——没有办法保证准确的余额，除非根据帐户的整个历史记录在每次读取时动态计算余额。

如果您选择这样做，您可以使用 Django ORM 的[聚合功能](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-over-a-queryset)来计算操作的总和。例如，如果您的操作有一个名为`amount`（表示该操作余额变化的正数或负数）的字段，您可以计算余额，如下所示：

```
Operation.objects.filter(account=my_account).aggregate(balance=Sum('amount')) 
```

如果您出于某种原因不想这样做，您还可以使用`save`您所描述的自定义方法来保持运行平衡。您可以使用类似处理单个项目删除的[`delete`方法。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.delete)`save`

但是，如果您曾经使用批量插入、更新或删除或原始 SQL 操作，该方法将导致问题，因为这些不会调用`save`and`delete`方法。但是，如果您需要使用这些功能，您可以使用混合方法——在执行一次性事务时使用`save`and选项，并通过聚合定期触发完全重新计算以修复错误或在执行操作后立即`delete`知道会搞砸平衡。

# performance - SqlAlchemy：在多行或函数上构建查询是否存在性能差异？

> ID：11956681
> 
> 赞同：1
> 
> 时间：2012-08-14T16:25:39.737
> 
> 标签：performance, sqlalchemy

如果我使用多个查询对象、代码行或函数来构建最终查询，sqlalchemy 的效率如何？执行每个步骤时是否会影响性能，或者它是否足够聪明，可以弄清楚发生了什么并只执行最终查询？

例如说我有这样做的代码：

```
get_shiniest_robots(self, polish_date):
    """Get robot_ids for robots with recently polished spikes."""
    return session.query(Robots.robot_id).filter_by(spike_polish_date > polish_date) 
```

然后我有另一个功能

```
get_dullest_robots(self, polish_date):
    """Get robot_ids for robots that have not been polished lately."""
    return session.query(Robots.robot_id).filter_by(~Robots.robot_id.in_(get_shiniest_robots(polish_date))).values(Robots.robot_id) 
```

get_dullest_robots() 是否会向数据库发送两个查询而不是一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:05:25.923

> 执行每个步骤时是否会影响性能，或者它是否足够聪明，可以弄清楚发生了什么并只执行最终查询？

查询具有明确定义的 SQL 发出点：

1.  当您对其进行迭代时，即“对于查询中的项目：”

2.  当你打电话时`.all()`，`.one()`。`.first()`, `.scalar()`, `.values()`, `.count()`, 有时`.get()`.

3.  大多数其他方法就是我们所说的“生成”，也称为“方法链接”。[http://docs.sqlalchemy.org/en/latest/orm/query.html](http://docs.sqlalchemy.org/en/latest/orm/query.html)中列出的方法应该给出一个提示，如果不是明确的，如果你正在返回一个`Query`带有额外状态的新的，或者如果你是获取 SQL 发出的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:27:56.537

您可以通过打开 sqlalchemy 回显并运行查询来自行检查。当您连接到数据库时，`echo`使用类似`create_engine(dbstring, echo=1)`.

然后运行您的查询。

get_shiniest_robots:

> INFO sqlalchemy.engine.base.Engine SELECT t_robots.robot_id AS t_robots_id FROM t_robots 加入 t_spike_maintenance ON t_robots.robot_id = t_spike_maintenance.robot_id WHERE t_spike_maintenance."spike_polish_date" > ?

get_dullest_robots

> INFO sqlalchemy.engine.base.Engine SELECT t_robots.robot_id AS t_robots_id FROM t_robots JOIN t_spike_maintenance ON t_robots.robot_id = t_spike_maintenance.robot_id WHERE t_robots.robot_id NOT IN (SELECT t_robots.robot_id AS t_robots_robot_id FROM t_robots JOIN t_spike_maintenance ON t_robots.robot_id = t_spike_maintenance. robot_id WHERE t_spike_maintenance."pike_polish_date" > ?)

您可以看到 sqlalchemy 正在创建一个子查询，而不是执行两个单独的查询，这似乎很正常。它只执行一次 SQL。

# scala - scala 的类型泛型可以找出匹配/案例吗？

> ID：11956685
> 
> 赞同：0
> 
> 时间：2012-08-14T16:26:08.937
> 
> 标签：scala, types

我有一些类似于以下的代码：

```
class testClass {
    class A(val next:Option[A]){
        def printA=println("A called")

    }

    class B(val someValue:Int){
        def printB=println("B called with value "+someValue)
    }

    def printStuff[T](obj:T):Any={
        obj match{
        case a:A=>{ a.printA
                    return new A(Some(a))
                    }
        case b:B=>{ b.printB
                    return  if (b.someValue==0) new B(0) else
                        printStuff(new B(b.someValue-1))
                    }
        }
    } 
```

在这里，我希望我的方法 printStuff 返回一个与输入具有相同类型的对象。但是，在尝试编译时，我收到以下错误：

```
error: type mismatch;
found   : a.type (with underlying type testClass.this.A)
required: T
return a 
```

有类似的错误`return b`。我意识到我可以将返回类型设置为 Any，但是在我的“真实”代码中，我以递归下降的方式应用该函数，所以它会迫使我添加很多`asInstanceOf`s，这是我想要的避免。

是否有可能让 Scala 的类型系统找出我正在尝试编写的内容，而无需完全重写该函数？

编辑：我试图编辑我的示例以显示在我的真实代码中可能很重要的东西：

*   它是递归的事实

*   它的返回类型取决于参数之一的事实。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:05:47.673

为什么不简单地`printStuff`为每个参数类型重载，因为这实际上就是你正在做的事情？

```
def printStuff(a : A) = {a.printA; new A(Some(a))}
def printStuff(b : B) = {b.printB; new B(b.someValue - 1)} 
```

或者，如果您想抽象出一些常见的行为，因此保留单个方法，您可以沿着 typeclass 路线走：

```
trait Cloneable[T] { def clone(t : T) : T }
object Cloneable {
  implicit object AIsCloneable extends Cloneable[A] { def clone(a : A) = new A(Some(a)) }
  implicit object BIsCloneable extends Cloneable[B] { def clone(b : B) : B = if (b.someValue == 0) new B(0) else new B(b.someValue -1) }
}

def printStuff[T : Cloneable](t : T) = implicitly[Cloneable[T]].clone(t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:34:51.937

您可以将 asInstanceOf 添加到返回中。这会导致您的生产代码出现问题吗？

就像是：

```
def printStuff[T](obj:T):T={
    obj match{
      case a:A=>{ a.printA
        a.asInstanceOf[T]
      }
      case b:B=>{ b.printB
        b.asInstanceOf[T]
      }
    }
  } 
```

# arduino - 在 Java 中与 Arduino 通信

> ID：11956689
> 
> 赞同：0
> 
> 时间：2012-08-14T16:26:21.143
> 
> 标签：arduino, communication

如何在[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)和 Java 应用程序之间进行通信？

我找到了*[Arduino 和 Java](http://arduino.cc/playground/Interfacing/Java)*，但这对我来说并不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:29:53.577

好的，我将修改相同的代码以帮助您理解。（我将删除监听器并添加一个替换，这不好。你应该使用监听器）

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent;
import gnu.io.SerialPortEventListener;
import java.util.Enumeration;

public class SerialTest implements SerialPortEventListener {

    SerialPort serialPort;
    private static final String PORT = "COM32";
    private InputStream input;
    private OutputStream output;
    private static final int TIME_OUT = 2000;
    private static final int DATA_RATE = 9600;

    public void initialize() {
        CommPortIdentifier portId = null;
        Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();
        while (portEnum.hasMoreElements()) {
            CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
            if (currPortId.getName().equals(PORT)) {
                portId = currPortId;
                break;
            }
        }
        if (portId == null) {
            System.out.println("Could not find COM port.");
            return;
        }
        try {
            // open serial port, and use class name for the appName.
            serialPort = (SerialPort) portId.open(this.getClass().getName(),
                    TIME_OUT);

            // set port parameters
            serialPort.setSerialPortParams(DATA_RATE,
                    SerialPort.DATABITS_8,
                    SerialPort.STOPBITS_1,
                    SerialPort.PARITY_NONE);

            // open the streams
            input = serialPort.getInputStream();
            output = serialPort.getOutputStream();
        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }

    /**
     * This should be called when you stop using the port.
     * This will prevent port locking on platforms like Linux.
     */
    public synchronized void close() {
        if (serialPort != null) {
            serialPort.removeEventListener();
            serialPort.close();
        }
    }

    public static void main(String[] args) throws Exception {
        SerialTest main = new SerialTest();
        main.start();
    }

    public void start() throws IOException {
        initialize();
        System.out.println("Started");
        byte[] readBuffer = new byte[400];
        while (true) {
            int availableBytes = input.available();
            if (availableBytes > 0) {
                // Read the serial port
                input.read(readBuffer, 0, availableBytes);
                // Print it out
                System.out.print(new String(readBuffer, 0, availableBytes));
            }
        }
    }
} 
```

运行此程序并将代码加载到 Arduino，该代码写入串行。然后这些值将由程序显示。（您可能需要相应地更改端口）

# svn - svn 提交后钩子第一个计时器

> ID：11956691
> 
> 赞同：0
> 
> 时间：2012-08-14T16:26:21.963
> 
> 标签：svn, post-commit-hook

我找到了我的 repo 文件并开始编辑我*的 post-commit.tmpl*。这是现在里面的东西：

```
REPOS="$1"
REV="$2"

#"$REPOS"/hooks/mailer.py commit "$REPOS" $REV "$REPOS"/mailer.conf

cd /var/www/domains/mywebsite.com
svnlook dirs-changed $REPOS -r $REV | xargs /user/bin/svn up -N 
```

我试图让我的所有网络文件提交到我的网站，但只有网络文件。我认为这会更容易，但看起来我有点不知所措.. 如何在提交时将 .php、.html 等文件发送到我的 Web 文件夹？还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:51:43.873

自从我不得不处理 svn 钩子以来已经有几年了......你需要用 svnlook 做的是：

```
$FILE_LIST = `svnlook changed -r $REV $REPOS |
grep '^(A|U|D).*(\.php|\.html)$' |
sed 's/\s\s*/ /g' |
cut -d' ' -f2` 
```

这将为您提供一系列文件，您可以将这些文件 svn checkout 到您的 web 目录中。

# javascript - 如何打印javascript标头上的变量？

> ID：11956693
> 
> 赞同：0
> 
> 时间：2012-08-14T16:26:26.457
> 
> 标签：javascript

我的以下代码无法正常工作，我需要检查它发生了什么。问题是大部分代码都是在 html 标头上完成的。如何打印变量以检查问题所在？

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Highstock Example</title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
$(function() {
$.getJSON('http://localhost/teste04.php', function(data) {

    // split the data set into ohlc and volume
    var ohlc = [],
        volume = [],
        dataLength = data.length;

    for (i = 0; i < dataLength; i++) {
        ohlc.push([
            data[i][0], // the date
            data[i][1], // open
            data[i][2], // high
            data[i][3], // low
            data[i][4] // close
        ]);

        volume.push([
            data[i][0], // the date
            data[i][5] // the volume
        ]);
    }

    // set the allowed units for data grouping
    var groupingUnits = [[
        'week',                         // unit name
        [1]                             // allowed multiples
    ], [
        'month',
        [1, 2, 3, 4, 6]
    ]];

    // create the chart
    chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container',
            alignTicks: false
        },

        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'AAPL Historical'
        },

        yAxis: [{
            title: {
                text: 'OHLC'
            },
            height: 200,
            lineWidth: 2
        }, {
            title: {
                text: 'Volume'
            },
            top: 300,
            height: 100,
            offset: 0,
            lineWidth: 2
        }],

        series: [{
            type: 'candlestick',
            name: 'AAPL',
            data: ohlc,
            dataGrouping: {
                units: groupingUnits
            }
        }, {
            type: 'column',
            name: 'Volume',
            data: volume,
            yAxis: 1,
            dataGrouping: {
                units: groupingUnits
            }
        }]
    });
});
});
    </script>
</head>
<body>
<script src="js/highstock.js"></script>
<script src="js/modules/exporting.js"></script>

<div id="container" style="height: 500px; min-width: 500px"></div>

</body>
</html> 
```

编辑：例如，我想打印“datalength”。

在此先感谢，路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:49:49.673

您作为参数回调传递给 $.getJSON 的匿名函数中的变量仅存在于其范围内。
您可以在该函数中使用诸如 console.log(dataLength) 之类的东西，其当时的值将显示在浏览器的控制台中。
您可以使用 javascript 调试器（firefox 中的 firebug，Chrome 中的 Javascript Console），在该函数内的第一行设置一个断点并逐步执行它以查看每个变量中的值。

Chrome，恕我直言，拥有最好的控制台和调试器，所以试试这个：

```
$.getJSON('http://localhost/teste04.php', function(data) {
    console.log(data);
    // split the data set into ohlc and volume
    var ohlc = [],
    ............ 
```

在 chrome 上按 F12，刷新页面并在控制台中查看数据对象中的所有值

# .net - 将内存流读入字节数组

> ID：11956697
> 
> 赞同：2
> 
> 时间：2012-08-14T16:26:52.543
> 
> 标签：.net, vb.net

我在读取块中的内存流时遇到了一些麻烦。

```
Dim ByteBuffer(4096) As Byte

While ProcessedBytes < FileLength

    BytesRead = MemoryStream.Read(ByteBuffer, 0, 4096)
    'Write the buffer to an output stream
    ProcessedBytes += BytesRead

End While 
```

'MemoryStream.Read(ByteBuffer, 0, 4096)' 总是返回零。我查看了“MemoryStream.Length”，流中肯定有一些字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:29:38.143

如果您只是想从 中获取`byte[]`数据`MemoryStream`，可以调用[MemoryStream.ToArray()](http://msdn.microsoft.com/en-us/library/system.io.memorystream.toarray.aspx)：

```
Dim ByteBuffer() as Byte = MemoryStream.ToArray() 
```

否则，请确保在读取之前将您`MemoryStream`的[Position设置为 0。](http://msdn.microsoft.com/en-us/library/system.io.memorystream.position.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:30:13.440

也许它返回 0 因为您到达了流的末尾。确保在开始读取流之前将位置设置为 0。

```
MemoryStream.Position = 0 
```

或者

```
MemoryStream.Seek(0, SeekOrigin.Begin) 
```

# javascript - 如何将json传递给选择输入

> ID：11956701
> 
> 赞同：0
> 
> 时间：2012-08-14T16:27:02.467
> 
> 标签：javascript, jquery, select

我只知道我们可以有一个`each`循环并`<option ...>`一个一个地添加到一个`<select>`元素中。

有没有类似的绑定`$('select#name').val(data)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:09:12.747

不，`val`只需设置 a 的选定值`select`。但是，您可以在字符串中构建所有选项，并使用以下命令将它们注入您的选择中`html`：

```
$('select#name').html(`<option>1</option><option>2</option>`); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:16:01.570

默认情况下，jQuery 没有任何方法。您可以使用如下所示的插件

[http://www.rvdevsign.net/ressources/javascript/documentation-jquery-jselect.html](http://www.rvdevsign.net/ressources/javascript/documentation-jquery-jselect.html)

`<option>abc</option><option>def</option>`或者从服务器端代码传递选项字符串并将其附加到使用`$('select#name').html(response)`.

我建议您不要犹豫为此编写循环，因为即使您使用上述任何方法，也需要在某处循环。

# javascript - jQuery How to make a color palette with RGB?

> ID：11956707
> 
> 赞同：1
> 
> 时间：2012-08-14T16:27:21.857
> 
> 标签：javascript, jquery, colors

Not sure if the title explains itself, but probably not!

Anyway, I have 50 divs and I would like to set the background color from White to Dark Yellow. The first div would be white and the last dark yellow.

The RGB value for white is 255, 255, 255 The RGB value for dark Yellow is 227, 151, 4

How could I do that with javascript (jQuery) so iterate through each div and make it gradually get darker?

Here's a screen shot ![enter image description here](../Images/d4ae80f69d70589ce7d176faa2e1cd9e.png) Thanks a lot

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:47:51.083

```
var divs = $('div'),
    len = divs.length;

var targ_R = 227,
    targ_G = 151,
    targ_B = 4,

    inc_R = (255 - targ_R) / len,
    inc_G = (255 - targ_G) / len,
    inc_B = (255 - targ_B) / len;

divs.css("backgroundColor", function(i, curr) {
    return "#" + toHex(255 - (i * inc_R)) +
                 toHex(255 - (i * inc_G)) +
                 toHex(255 - (i * inc_B));
});

function toHex(n) {
    var h = (~~n).toString(16);
    if (h.length < 2)
        h = "0" + h;
    return h;
} 
```

***DEMO:*** [http://jsfiddle.net/RSyCM/](http://jsfiddle.net/RSyCM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:39:09.290

Try this - [**DEMO**](http://jsfiddle.net/BBujc/)

```
var r, g, b;

for (var i = 0, count = $("div").length; i < count; i++) {
    r = 255 - i * 3;
    g = 255 - i * 10;
    b = 255 - i * 25;

    $("div").eq(i).css("background", "rgb(" + r + ", " + g + ", " + b + ")");
} 
```

**UPDATE**

To make the last one `rgb(227, 151, 4)` - [**DEMO**](http://jsfiddle.net/BBujc/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:30:58.693

Here's a variation of Zoltan Toth's answer using the [pusher.color library](http://surfacecurve.org/libraries/color), in case you want to use a library to handle the parsing and blending.

[**DEMO**](http://jsfiddle.net/bcronin/UEHUX/5/)

```
var color0 = pusher.color('white');
var color1 = pusher.color('rgb', 227, 151, 4);

for (var i = 0, count = $("div").length; i < count; i++) {
    var amount = i / (count-1);
    var result = color0.blend(color1, amount);
    $("div").eq(i).css("background", result.html());
} 
```

​</p>

# perl - $ARGV [1] Perl 问题

> ID：11956708
> 
> 赞同：1
> 
> 时间：2012-08-14T16:27:27.317
> 
> 标签：perl

我目前正在尝试使用 Perl 中的命令行参数设置调试标志，我似乎遇到了一些我认为很容易的问题。

```
 my $debugvalue;

    my $file = $ARGV[0] or die;

    if ($ARGV[1] == "debug")
    {
        $debugvalue = 1;
    }else
    {
        $debugvalue = 0;
    } 
```

我希望输入一个文件，后跟一个纯粹说调试的词，如果没有，则将标志设置为 0。

```
test.pl file.txt debug 
```

*   将标志设置为1

    test.pl file.txt 调试

*   将标志设置为0

我会假设你是如何做到这一点的，除了输入什么，它总是落入 if 的第一部分并将标志设置为 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T16:32:41.360

这可以正常工作，但您需要使用字符串比较`eq`，而不是数字比较，`==`。

```
if ($ARGV[1] eq "debug") 
```

此外，您可以将其缩短为：

```
my $debugvalue = $ARGV[1] eq "debug"; 
```

不过，总的来说，我更喜欢使用环境进行调试设置。

```
my $debugvalue = $ENV{DEBUG} || 0; 
```

然后您可以执行以下操作：

```
DEBUG=1 test.pl file.txt 
```

或在 bash 或 zsh 中为每次运行设置测试：

```
export DEBUG=1
test.pl file.txt
test.pl file2.txt
test.pl file3.txt 
```

如果您需要积极的调试输出来帮助诊断特定问题，甚至有多个调试级别：

```
DEBUG=3 test.pl file.txt 
```

并在您的代码中：

```
warn "Fiddly Detail $x\n" if $debugvalue > 2; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T16:37:52.923

我几乎总是使用 Getopt 或 Getopt::Long。两者都在 CPAN 中，超级简单易用且非常标准化。例如：

```
#!/usr/bin/perl

use strict;
use warnings;

use Getopt::Long;

my $debug = 0;

my $result = GetOptions(
    debug => \$debug
);

my $file = shift;

if ( $debug ) {
    print( "debug is on for processing $file..." );
} 
```

当然，因为它使用标准语法，你可以这样称呼它：

```
#> test.pl file.txt --debug 
```

或者

```
#> test.pl --debug file.txt 
```

**- - 编辑 - -**

@zostay 提出了一个很好的观点，各个级别的调试非常有用。因此，可以将其添加到 Getopot::Long 方法中：

```
#!/usr/bin/perl

use strict;
use warnings;

use Getopt::Long;

my $debug = 0;

my $result = GetOptions(
    "debug+" => \$debug
);

my $file = shift;

if ( $debug > 2 ) {
    print( "debug is at least level 2 for processing $file..." );
} 
```

并且，对于 2 级调试，将调用：

#> test.pl --debug --debug file.txt

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T16:30:18.097

`eq`您应该使用not进行字符串比较`==`。

```
if ($ARGV[1] eq "debug") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T17:06:45.897

正如人们已经指出的那样，“eq”应该用于字符串比较和其他支持调试功能的方式，我要添加的唯一其他建议是在开发过程中使用 perl 的 -w（警告）标志也有助于查找像你这样的问题：

```
#!/usr/bin/perl -w 
```

在您最初的示例中，它会返回如下警告：

> ./foo.pl 第 7 行的数字 eq (==) 中的参数“调试”不是数字。

在比较中使用它之前检查 $ARGV[1] 的存在也可能更清晰：

```
if ($ARGV[1] && $ARGV[1] eq "debug")
{
    $debugvalue = 1;
... 
```

# git - git restore 删除后未提交的已删除文件

> ID：11956710
> 
> 赞同：926
> 
> 时间：2012-08-14T16:27:38.177
> 
> 标签：git

我删除了一些文件。

我还没有提交。

我想重置我的工作区以恢复文件。

我做了一个`git checkout .`。

但是删除的文件仍然丢失。

并`git status`显示：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    cc.properties
#   deleted:    store/README
#   deleted:    store/cc.properties
# 
```

为什么不`git checkout .`将工作区重置为`HEAD`？

* * *

## 回答 #1

> 赞同：862
> 
> 时间：2012-08-14T16:29:32.557

输出告诉你你需要做什么。`git reset HEAD cc.properties`等等

这将取消 rm 操作。之后，`git status`再次运行 a 将告诉您需要执行 a`git checkout -- cc.properties`才能取回文件。

更新：我的配置文件中有这个

```
$ git config alias.unstage
reset HEAD 
```

我通常用来取消舞台的东西。

* * *

## 回答 #2

> 赞同：234
> 
> 时间：2012-08-14T16:31:12.267

您已经进行了删除，因此您需要执行以下操作：

```
git checkout HEAD cc.properties store/README store/cc.properties 
```

`git checkout .`仅从已进行删除的索引中签出。

* * *

## 回答 #3

> 赞同：209
> 
> 时间：2014-01-23T11:57:05.850

做就是了`git checkout path/to/file-I-want-to-bring-back.txt`

* * *

## 回答 #4

> 赞同：176
> 
> 时间：2014-11-12T17:29:51.137

要一次自动恢复所有**未暂存**的删除，而无需指定每个路径：

```
git ls-files -z -d | xargs -0 git checkout -- 
```

要一次自动恢复所有**分阶段**删除，无需指定每个路径：

```
git status | grep 'deleted:' | awk '{print $2}' | xargs git checkout -- 
```

* * *

## 回答 #5

> 赞同：90
> 
> 时间：2012-12-21T19:54:46.330

由于您正在执行`git checkout .`，因此您似乎正在尝试将分支恢复到上次提交状态。

您可以通过`git reset HEAD --hard`

# 警告

这样做可能会删除您的所有最新修改并取消您的修改，例如，您可能会丢失工作。这*可能*是您想要的，但请查看[文档](http://git-scm.com/book/ch2-4.html)以确保。

* * *

## 回答 #6

> 赞同：81
> 
> 时间：2016-03-31T15:21:10.767

如果你用过

```
git rm filename 
```

然后删除文件

```
git checkout path/to/filename 
```

不起作用，所以在这种情况下

```
git checkout HEAD^ path/to/filename 
```

应该管用

* * *

## 回答 #7

> 赞同：31
> 
> 时间：2014-03-15T20:55:16.240

这是在我的 Mac 上帮助我的命令。我尝试了其他一些解决方案，但它们对我不起作用。

**OSX Mavericks 上的 Git 版本**

```
mac-pro:main chris$ git version
git version 1.8.5.2 (Apple Git-48) 
```

**命令**

```
git checkout HEAD -- path/to/file/file.cc 
```

* * *

## 回答 #8

> 赞同：24
> 
> 时间：2020-02-12T19:04:03.167

以下是不同的案例作为帮助他人的参考：

如果**尚未提交**删除，则下面的命令将在工作树中恢复已删除的文件。

```
$ git checkout -- <file> 
```

您可以使用以下命令获取工作树**中所有已删除文件的列表。**

```
$ git ls-files --deleted 
```

如果删除**已经提交**，找到它发生的提交，然后从这个提交中恢复文件。

```
#find the commit hash where it had this file deleted
$ git rev-list -n 1 HEAD -- <file> 
```

它应该给你类似的东西`c46e81aa403ecb8a0f7a323a358068345`，现在将这个提交哈希与父运算符 ( `^`) 一起使用，如下所示：

```
$ git checkout <commit>^ -- <file> 
```

例子：

```
$ git checkout c46e81aa403ecb8a0f7a323a358068345^ -- <file> 
```

如果您正在寻找要恢复的文件的路径，以下命令将显示所有已删除文件的摘要。

```
$ git log --diff-filter=D --summary 
```

如果您只想显示文件列表：

```
git log --diff-filter=D --summary | grep "delete mode" 
```

* * *

## 回答 #9

> 赞同：23
> 
> 时间：2015-02-10T14:39:55.950

## 如果您想一次恢复所有文件

请记住使用句点，因为它告诉 git 抓取所有文件。

此命令将重置头部并取消暂存所有更改：

```
$ git reset HEAD . 
```

然后运行它来恢复所有文件：

```
$ git checkout . 
```

然后做一个 git status，你会得到：

```
$ git status
On branch master
Your branch is up-to-date with 'origin/master'. 
```

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2015-04-17T20:51:46.067

```
git checkout HEAD -- client/src/pp_web/index.cljs 
```

* * *

## 回答 #11

> 赞同：18
> 
> 时间：2018-06-20T00:35:33.607

用于`git ls-files`检出已删除 (-d) 或修改 (-m) 的文件。

```
git checkout $(git ls-files -d) 
```

请参阅[如何在 git checkout 上仅恢复已修改的文件？](https://stackoverflow.com/questions/7415098/how-can-i-restore-only-the-modified-files-on-a-git-checkout)

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2016-09-02T15:38:15.533

你想看看[这个吗](https://stackoverflow.com/a/39296006/5869837)

这适用于您使用的情况

```
git checkout -- . 
```

在你提交某事之前。

您可能还想删除尚未创建的已创建文件。而你不想要它们。和 ：

```
git reset -- . 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2015-03-02T23:14:31.050

如果您还没有提交任何更改，您所要做的就是存储这些更改，您将返回到最后一个工作提交。

```
git stash
git stash clear
git clean 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2015-09-15T17:14:52.883

在寻找有关如何取消删除从另一个分支合并后在我的工作目录中删除的文件的答案时找到了这篇文章。合并后还没有提交。由于这是一个正在进行的合并，我不能只使用以下方法将其添加回来：

```
$ git reset <commitid#-where-file.cpp-existed> file.cpp 
```

除了重置之外，我还必须执行另一个步骤才能恢复文件：

```
$ git checkout -- file.cpp 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-06-08T13:52:56.627

如果您正在寻找已删除的目录。

```
 git checkout ./pathToDir/* 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-08-13T17:44:41.610

较新的 git（我的是 2.27.0）更友好，实际命令显示在“git status”期间。例如，如果您删除了文件 tf.c，那么

```
$ git status
...
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
      deleted:    tf.c 
```

您将使用“git restore tf.c”将其取回，因为它是saz。不用再找了！

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-06-08T13:44:14.277

对我来说有效的是`git checkout {SHA1 of commit with version to restore} "{path to file to restore}"`

例如`git checkout 5a6b3179e58edff9c90326b9a04284b02fd67bd0 "src-ui/views/includes/radar.pug"`

（在我们希望文件进入的分支中执行）

该命令执行后，恢复的文件将存在于原始位置（需要commited）

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-03-09T12:22:18.840

1.找到您要恢复的特定提交：

```
 git log
This command will give you a list of commits done by you . 
```

2.使用以下命令恢复到该提交：

```
 git revert <commit id> 
```

现在您的本地分支将特别包含所有文件

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-12-07T16:12:26.113

如果您已经安装了 ToroiseGIT，那么只需为父文件夹弹出菜单选择“Revert...”菜单项。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-04-11T20:58:30.330

**注意：首先提交您希望保留的任何工作。**

您可以**重置**您的工作区（并恢复已删除的文件）

```
git checkout ./* 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-11-02T21:18:39.427

这对我来说是最简单的方法：

```
git checkout HEAD~1 path/to/myfile.rb 
```

我在[这里](https://careerkarma.com/blog/git-restore-deleted-file/)找到了。

* * *

另一种对我也有用的方法：

```
git reset HEAD path/to/myfile.rb
git restore path/to/myfile.rb 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2022-02-28T22:40:51.170

我碰巧将一些 json 文件从一个文件夹移动（而不是复制）到同一个存储库中的另一个文件夹。然后我重命名了这些文件并在新位置更改了一些内容。但是我很快了解到我没有从以前的位置复制并完全删除文件。

简单的解决方案：

```
git reset HEAD <oldfilepath_which_was_moved>
git restore <oldfilepath_which_was_moved> 
```

对所有文件都这样做了，它们又回来了。

您还可以包含多个以空格分隔的文件。

```
git reset HEAD file_1_path file_2_path file_3_path 
```

轻松修复，顺便说一句，这不会更改/删除新文件。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-12-05T09:32:05.323

我遇到了同样的问题，但是上述解决方案都不适合我。我最终做的是：
- 创建一个同名的空文件
- 将此文件与其本地历史记录进行比较
- 将历史记录复制到空文件。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2020-01-15T22:22:02.480

我遇到了同样的问题，我在这里尝试的答案也没有对我有用。我正在使用 Intellij，并且我检查了一个新分支`git checkout -b minimalExample`，通过删除一堆文件并修改项目中的一堆其他文件，在某个问题的新分支上创建一个“最小示例”。不幸的是，即使我没有在新的“最小示例”分支上提交任何更改，当我再次检查“原始”分支时，“最小示例”分支中的所有更改和删除都发生在“原来的”分支（或者它出现了）。根据`git status`删除的文件刚刚从两个分支中消失。

幸运的是，即使 Intellij 警告我“删除这些文件可能无法完全恢复”，我还是能够通过右键单击项目并选择本地历史来恢复它们（在实际删除它们的最小示例分支上） > 显示历史记录（然后在我想要的最近的历史记录项上恢复）。在 Intellij 恢复“最小示例”分支中的文件后，我将分支推送到原点。然后我切换回我的“原始”本地分支并跑到`git pull origin minimalExample`让他们回到“原始”分支。

# wordpress - Fancybox 禁用/卡住

> ID：11956716
> 
> 赞同：0
> 
> 时间：2012-08-14T16:28:03.153
> 
> 标签：wordpress, fancybox

我正在运行一个网络，看看这个[http://scout-katz.web.id/gallery/picture/](http://scout-katz.web.id/gallery/picture/)

fancybox 卡在 Chrome 或 Firefox 上，我尝试用 JetPack 插件替换它，就像我现在使用的一样，但每次我点击图片时，它仍然在运行 FancyBox（当然卡住了）。

请任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:57:48.590

您是否希望消除 Fancybox 并坚持使用 JetPack？（我不熟悉。）如果是这样，您应该摆脱页面中包含的 Fancybox `<head>`。您需要删除三行以完全消除 Fancybox：

```
<link rel="stylesheet" href="http://scout-katz.web.id/wp-content/themes/doover/js/fancybox/jquery.fancybox-1.3.4.css?ver=2.1.1" media="screen" />
<script type='text/javascript' src='http://scout-katz.web.id/wp-content/themes/doover/js/fancybox/jquery.mousewheel-3.0.4.pack.js?ver=2.1.1'></script>
<script type='text/javascript' src='http://scout-katz.web.id/wp-content/themes/doover/js/fancybox/jquery.fancybox-1.3.4.pack.js?ver=2.1.1'></script> 
```

如果将它们删除，Fancybox 肯定不会加载。

# jquery - 当我的幻灯片过渡到下一张幻灯片时，如何为图像设置动画

> ID：11956722
> 
> 赞同：1
> 
> 时间：2012-08-14T16:28:11.263
> 
> 标签：jquery, html, css

我正在使用[jQuery Cycle 插件](http://jquery.malsup.com/cycle/)。

这些是插件提供的选项。[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

我有 5 张不同的幻灯片。但是每张幻灯片在幻灯片中都有两到三个图像，应该在幻灯片中的不同位置进行动画处理，我该如何实现呢？或者是否有另一个 jQuery 插件可以让你这样做？

**例如。** 我有一张幻灯片，上面有汽车、云和太阳。因此，当用户悬停或到达此幻灯片时。汽车将动画到中心，然后云和太阳将动画并在汽车动画后自行定位。

![在此处输入图像描述](../Images/4792d1c7845b82d0f25feae261fcfb31.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:31:05.723

您需要一个视差滑块。[在这里](http://tympanus.net/Development/ParallaxContentSlider/)你可以看到一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:25:02.510

视差可能是一个潜在的解决方案，但我会更多地关注 Cycle 提供的选项。

看看这个例子：http: [//jquery.malsup.com/cycle/int2.html](http://jquery.malsup.com/cycle/int2.html)

它在幻灯片回调之前和之后提到了底部。所以理论上，你可以调用一个函数来将所有内容设置为动画，然后当下一张幻灯片出现时，为下一张幻灯片调用下一个动画（如果有的话）。

如果您的滑块在计时器上，这可能会很麻烦。要时刻铭记在心。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-14T16:37:08.633

那么你可以做几件事。你可以这样做，当鼠标悬停在图像上时，它会变成一个动画自己的 gif。

```
.background:hover {
background-image: url('<filepath>/animate.gif');
} 
```

或者你可以做一个 jQuery 事件，当单击按钮或鼠标悬停时（在我看来有点棘手），每个单独的元素（可能通过 z-index 分层的单个图像）将动画和滑动超过。

如果您使用的是 jQuery 插件，我会推荐第一个选项。

# gdb - gdb 在将某个字符串写入 std:cerr 之前中断

> ID：11956727
> 
> 赞同：2
> 
> 时间：2012-08-14T16:28:24.977
> 
> 标签：gdb

我正在调试一个大型应用程序，我想在将某个字符串写入`std::cerr`. 我有办法做到这一点吗？

代码中有很多地方都写了这个字符串。字符串并不总是形式

```
std::cerr << "some error code"; 
```

它可能是其他形式，例如

```
std::cerr << write_error_code(); 
```

另请注意，有很多东西被写入，`std::cerr`所以我不能只是中断`std::cerr`。

我也有同样的问题，`std::cout`但是如果答案也不适用，我会发布另一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:04:32.100

这是我在 Linux 上制作的 С++ 示例。该示例是使用 gcc 4.3 构建的。

```
#include <iostream>
#include <stdio.h>
#include <setjmp.h>

void write_error_code()
{
  std::cerr << "some error code";
}

int main()
{
  std::cout << "Start, main()\n";
  std::cerr << "some error code" << std::endl;
  std::cerr << "some error code?" << std::endl;
  std::cerr << "some error code?" << std::endl;
  write_error_code();
  std::cout << "End, main()\n";

  return 0;
} 
```

我看了一下 disassemble ，发现这`std::cerr << ""`是一个带有符号 name 的函数`_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc`。
该函数有 2 个参数：`__out`和`__s`.
所以我创建了一个`.gdbinit`文件：

```
host: srv2-x64rh5-02, OS: Linux 2.6.18-238.el5>more .gdbinit
file a.out
b _ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc
commands
silent
if strcmp(__s, "some error code") == 0
  print "Some error code has been given as an arg"
  bt
  c
else
  c
end
end
r
quit 
```

在这里我测试我的程序：

```
host: srv2-x64rh5-02, OS: Linux 2.6.18-238.el5>gdb -q ./a.out
Reading symbols from /import/home/sergey.kurenkov/src/linux.x64.5.0/tests/test.br_on_std_cerr/a.out...done.
Breakpoint 1 at 0x400710
warning: no loadable sections found in added symbol-file system-supplied DSO at 0x2aaaaaaab000
Start, main()
$1 = "Some error code has been given as an arg"
#0  std::operator<< <std::char_traits<char> > (__out=..., __s=0x400a4c "some error code")
    at /home/zalex/test/gcc_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/ostream:509
#1  0x0000000000400873 in main () at main.cpp:13
some error code
some error code?
some error code?
$2 = "Some error code has been given as an arg"
#0  std::operator<< <std::char_traits<char> > (__out=..., __s=0x400a4c "some error code")
    at /home/zalex/test/gcc_build/x86_64-unknown-linux-gnu/libstdc++-v3/include/ostream:509
#1  0x000000000040084f in write_error_code () at main.cpp:7
#2  0x00000000004008f5 in main () at main.cpp:18
some error codeEnd, main()

Program exited normally. 
```

# iphone - 用 uipicker 制作组合框

> ID：11956728
> 
> 赞同：0
> 
> 时间：2012-08-14T16:28:28.637
> 
> 标签：iphone, xcode, uipickerview, uipicker

我注意到在一些苹果应用程序中，当您单击文本框或标签时，uipicker 会加载，然后当您进行选择时它会消失。我本质上是在尝试重新创建它。但有点困难。想知道是否有人有任何此类教程的链接，或者可以提供有关如何重新创建相同教程的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:52:52.697

Picker 只是一个`UIView`，你可以随心所欲地做任何类型的动画

```
[UIView animateWithDuration:duration  animation:^{
      //custom animation you need. For example show from the bottom. Of course, you need to set the origin frame of picker to somewhere under the screen.
      myPicker.frame = CGRectMake(0, self.view.bounds.height.y - myPicker.frame.size.height, myPicker.frame.size.width, myPicker.frame.size.height);
}]; 
```

它可以从底部弹出或淡入/淡出。任何事物。然后您可以使用相反的动画将其关闭。

# python - python中的re.sub有时不起作用

> ID：11956729
> 
> 赞同：1
> 
> 时间：2012-08-14T16:28:30.083
> 
> 标签：python, regex

我有以下西班牙语句子。

> Oye , si te parece quedamos en El Corte Inglés de Nuevos Ministerios este martes , a las 18:30 , y me ayudas con las compras , te parece los sofás no sé si comprarlos en Zara Home o en la web , que es [http:/ /zara-home.es](http://zara-home.es)。De todas maneras , dame un toque al +00 000 000 000 y lo hablamos。Te dejo también mi correo ，用户名@domain .com。文加，hasta luego。

从这句话中，我想删除“单词和逗号”和“单词和句号”之间的空格。我正在使用以下代码来完成这项工作。它适用于大多数其他句子，但不适用于上述句子。

```
sentence = 'Oye , si te parece quedamos en El Corte Inglés de Nuevos Ministerios este martes , a las 18:30 , y me ayudas con las compras , te parece los sofás no sé si comprarlos en Zara Home o en la web , que es http://zara-home.es . De todas maneras , dame un toque al +00 000 000 000 y lo hablamos. Te dejo también mi correo , username@domain .com. Venga , hasta luego.'
full_stop = re.compile(u"(?<=\s)([\w\d\@\-\:\/\.]+\s[\.,])", re.UNICODE)
words_changed = ["".join(full_stops.split()) for full_stops in full_stop.findall(sentence)]
for i,words in enumerate(full_stop.findall(sentence)):
    words = re.sub('\s.','\s\.',words, flags=re.UNICODE)
    sentence = re.sub(words, words_changed[i], sentence, flags=re.UNICODE)
print sentence 
```

为什么 re.sub 并不总是像在 python 中那样起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:13:24.163

这能满足您的需要吗？

```
>>> s = u'Oye , si te parece quedamos en El Corte Inglés de Nuevos Ministerios este martes , a las 18:30 , y me ayudas con las compras , te parece los sofás no
sé si comprarlos en Zara Home o en la web , que es http://zara-home.es . De todas maneras , dame un toque al +00 000 000 000 y lo hablamos. Te dejo también mi c
orreo , username@domain .com. Venga , hasta luego.'
>>> import re
>>> s = re.sub(r'\s+([,.])', r'\1', s)
>>> print s
Oye, si te parece quedamos en El Corte Inglés de Nuevos Ministerios este martes, a las 18:30, y me ayudas con las compras, te parece los sofás no sé si comprarl
os en Zara Home o en la web, que es http://zara-home.es. De todas maneras, dame un toque al +00 000 000 000 y lo hablamos. Te dejo también mi correo, username@d
omain.com. Venga, hasta luego.
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:33:02.553

您的代码应该是：

```
for i, words in enumerate(full_stop.findall(sentence)):
    word = re.sub('\s\.','\s\.', words, flags=re.UNICODE)
    word = re.sub('\s\,','\s\,', word, flags=re.UNICODE)
    sentence = re.sub(word, words_changed[i], sentence, flags=re.UNICODE)
print sentence 
```

但是您的原始正则表达式没有检测到第一个单词：'Oye，'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:38:17.617

你的正则表达式看起来过于复杂。这是一个有效的方法：

```
>>> sentence = "Oye , si te parece quedamos en El Corte Inglés de Nuevos Ministerios este martes , a las 18:30 , y me ayudas con las compras , te parece los sofás no sé si comprarlos en Zara Home o en la web , que es http://zara-home.es . De todas maneras , dame un toque al +00 000 000 000 y lo hablamos. Te dejo también mi correo , username@domain .com. Venga , hasta luego."
>>> re.sub(r"\s*([\.,])\s*, r"\1", sentence)
'Oye,si te parece quedamos en El Corte Ingl\xc3\xa9s de Nuevos Ministerios este martes,a las 18:30,y me ayudas con las compras,te parece los sof\xc3\xa1s no s\xc3\xa9 si comprarlos en Zara Home o en la web,que es http://zara-home.es.De todas maneras,dame un toque al +00 000 000 000 y lo hablamos.Te dejo tambi\xc3\xa9n mi correo,username@domain.com.Venga,hasta luego.'
>>> print _
Oye,si te parece quedamos en El Corte Inglés de Nuevos Ministerios este martes,a las 18:30,y me ayudas con las compras,te parece los sofás no sé si comprarlos en Zara Home o en la web,que es http://zara-home.es.De todas maneras,dame un toque al +00 000 000 000 y lo hablamos.Te dejo también mi correo,username@domain.com.Venga,hasta luego. 
```

# actionscript-3 - Flex 4 Itemrenderer 更新事件？

> ID：11956733
> 
> 赞同：0
> 
> 时间：2012-08-14T16:28:36.677
> 
> 标签：actionscript-3, flash, apache-flex, listview, flex4

我的`<s:List>`Flex 4.6 项目中有一个使用 itemrenderer 的项目。我的应用程序偶尔会在 this 上推送更多项目`<s:List>`，并且 itemrenderer 会按预期获取并应用此更改。我的列表如下所示：

```
<s:List borderVisible="false" contentBackgroundAlpha="0" 
        dataProvider="{this.data.root.item}" id="reviews"
        itemRenderer="renderers.pages.ReviewRenderer" minHeight="1"
        top="10" width="100%">
  <s:layout>
    <s:VerticalLayout gap="35" requestedMinRowCount="1" useVirtualLayout="false/>
  </s:layout>
</s:List> 
```

...我将更多数据附加到数据提供者对象上，如下所示：

```
this.data.root.item.addItem(this.form.reviewData); 
```

我想知道，每当该`addItem()`方法将更多数据推送到对象上以供`<s:List>`显示时，是否有可以监听的事件。

我知道我可以使用该`FlexEvent.VALUE_COMMIT`事件，但是根据文档，只要数据首次应用于列表，并且任何项目用户与列表的交互都会更新其属性之一（例如选择列表项之一），它就会调度.

`addItem()`因此，为了清楚起见，我正在寻找一个仅在将数据附加到数据提供程序时才调度的事件。

**注意：**我使用的`<s:List>`是 Web 项目的组件，而不是移动优化版本。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:43:23.920

如果列表中的`dataProvider`(`this.data.root.item`在您的示例中) 是`ArrayCollection`, `XMLListCollection`，或者它会在集合更改时`ListCollectionView`分派。`CollectionEvent.COLLECTION_CHANGE`

[CollectionEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/events/CollectionEvent.htm)有一个`kind`您需要检查的属性，因为有各种更改（请参阅[CollectionEventKind](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/events/CollectionEventKind.html)类）。特别是，您可能对`CollectionEventKind.ADD`.

另一种方法是覆盖`addItem()`dataProvider 的方法并调度您自己的“itemAdded”事件：

```
override public function addItem(item:Object):void
{
    super.addItem(item);
    dispatchEvent(new Event("itemAdded"));
} 
```

# android - 存储状态数据的更好方式/位置（列表视图）

> ID：11956739
> 
> 赞同：4
> 
> 时间：2012-08-14T16:29:04.883
> 
> 标签：android

我对 Android 比较陌生，我对列表、片段和存储一些状态数据的位置有一些疑问。我在一个示例中工作，其中我有一个使用片段的列表视图和一个详细视图。当我第一次打开应用程序时，我加载（从 Web 服务）项目列表（使用 asyntask）。我想“保存”那个列表，所以如果我需要回到这个活动（列表），我不需要再次执行异步任务。在哪里“保存”这个列表更好？Application 对象是个好地方吗？

然后，当我从列表中单击一个项目时，我想打开一个新活动并从该对象加载详细数据。将该对象传递给详细信息活动的最佳方式是什么？使用 Application 对象并从列表中获取所选项目（例如使用来自 onItemSelectedListener 的位置参数）（如果我有一个包含应用程序对象中项目的列表）？让我的“项目”对象实现 Parcelable 接口并将整个对象传递给意图？还有其他想法吗？

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:35:14.637

如果您想永久保存数据，SQLite 是正确的选择。

如果你想临时缓存数据，savedInstanceState Bundle 就在这里。我向您展示了一个使用 Fragment 和 ListView 的示例。

```
public static final String BUNDLE_CACHE = "ListFragment.BUNDLE_CACHE";

private ArrayList<ListItem> mCachedData;
private ListView mListView;
private ListItemAdapter mListAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if ((savedInstanceState != null) && savedInstanceState.containsKey(BUNDLE_CACHE)) {
        this.mCachedData = savedInstanceState.getParcelableArrayList(BUNDLE_CACHE);
    }

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);

    LinearLayout layout = (LinearLayout) inflater.inflate(
            R.layout.layout_fragment, null);

    this.mListAdapter = new ListAdapter(inflater.getContext(), 
            R.layout.item_list_topic_categories);

    this.mListView = (ListView) layout.findViewById(R.id.listView);
    this.mListView.setAdapter(this.mListAdapter);
    this.mListView.setOnItemClickListener(this.mItemClickListener);

    if (this.mCachedData == null) {
        Log.d("onCreateView", "I make the request");
        this.downloadData();
        ... // After download is finished, you put somewhere:
        this.mCachedData = downloadedData;
    } else {
        Log.d("onCreateView", "Cool, the data is cached");
        this.buildList(this.mCachedData);
    }

    return layout;
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    // You put the content of your list, which is this.mCachedData, in the state
    outState.getParcelableArrayList(BUNDLE_CACHE, this.mCachedData);
} 
```

我还在我的一些应用程序上使用了 web 服务，并且 savedInstanceState 对于在我在片段之间切换视图时不再进行 web 服务调用非常有用。这种情况适用于片段视图被销毁但片段仍然存在的情况。再次创建视图时，它将使用缓存的数据，而不是从 Web 服务再次下载。

* * *

要将 Parcelable 从 Activity 发送到片段（根据 biovamp 的示例），您可以使用：

```
Bundle args = new Bundle();
args.putParcelable("keyName", parcelableObject);
fragment.setArguments(args); 
```

在您的片段中，您使用它来获取您的 Parcelable：

```
this.getArguments().getParcelable("keyName"); 
```

为了创建 Parcelable，请参考本教程，例如：[http ://techdroid.kbeanie.com/2010/06/parcelable-how-to-do-that-in-android.html](http://techdroid.kbeanie.com/2010/06/parcelable-how-to-do-that-in-android.html)

现在，你说：

> 然后，当我从列表中单击一个项目时，我想打开一个新活动

因此，如果您仍想从 ListFragment 创建 DetailsActivity，则使用 Intent 发送数据：

```
ListItem item = ... // get your item data
intent.putExtra("keyItem", item); 
```

并使用以下方法将其放入新创建的 DetailsActivity 中：

```
Bundle extras = getIntent().getExtras();
if (extras !=null) {
    ListItem value = (ListItem) extras.getParcelable("keyItem");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:39:19.867

您应该将列表保存在任何持久存储中（并且应用程序不是持久存储）。SQLite 数据库将最适合您的情况。

与其创建新的活动，不如创建新的片段，将其添加到活动中，然后调用一些（`loadMyItem()`例如）所需的对象作为参数的（自定义）函数。这样它就不需要 Intent 并且看起来更具可读性（以及今天推荐的方式）

**例子**

主要思想是，当您对其执行某些操作（例如单击 ListView 的项目）时，`SectionsFragment`它会调用它的 parent `Activity`，它`Activity`决定应该加载什么以及在哪里加载。在此示例中，`Activity`调用`DetailFragment`以在其中加载一些数据。

您的活动课程：

```
public class MainActivity extends Activity{

    private DetailFragment mDetailFragment;
    private SectionsFragment mSectionsFragment;

    /*initialization stuff, it's not interesting now*/

    //Section is just custom class for example - it can be whatever you want
    public void setSection(Section section){
        mDetailFragment.loadSection(section);
    }
} 
```

您的 SectionsFragment：

```
public class SectionsFragment extends Fragment{

    /*initialization is also skipped*/

    /**This method may be called when ListView's item is touched or somwhere else - it's doesn't matter*/
    private void setSection(Section section){
        if(!(getActivity() instanceof MainActivity))
            throw new ClassCastException("This fragment can be created only by MainActivity");
        MainActivity activity = (MainActivity) getActivity();
        activity.setSection(section);
    }
} 
```

还有你的 DetailFragment：

```
public class DetailFragment extends Fragment{

    /*initialization*/

    public void loadSection(Section section){
        //Here your fragment decides what exactly it should load
        //for this section. Maybe do some networking, or load data from database
        //whatever you want
    }
} 
```

# javascript - IE9 中的 JavaScript 日期对象允许无效日期

> ID：11956740
> 
> 赞同：2
> 
> 时间：2012-08-14T16:29:04.930
> 
> 标签：javascript, internet-explorer-9

当通过 JavaScript Date() 对象的构造函数传递无效日期时，IE9 似乎正在构造一个有效日期，例如“2009 年 8 月 56 日”返回一个日期对象实例。相比之下，Chrome 则不然。

阅读了有关 IE9 中 Date 对象的 MSDN 文档（下面的链接），并且有一段说明：

> JavaScript 在日期格式方面相当灵活。它允许诸如 8-24-2009、August 24, 2009 和**24 Aug 2009**等变体。有关详细信息，请参阅格式化日期和时间字符串 (JavaScript)。

以上段落摘自： http: [//msdn.microsoft.com/en-us/library/ee532932 (v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ee532932%28v=vs.94%29.aspx)

以下代码片段用于检查日期是否有效。它适用于 Chrome，但不适用于 IE9：

```
function validateDate(d) {
    var dt = new Date(d);
    if (Object.prototype.toString.call(dt) !== "[object Date]") return false;

    return !isNaN(dt.getTime());
} 
```

运行此代码时：

```
console.log(new Date("56 Aug 2009")); 
```

**IE9 结果**

```
Fri Sep 25 00:00:00 UTC+0100 2009 
```

**铬结果**

```
Invalid Date 
```

这是一个带有更详细示例的 JsFiddle：

[http://jsfiddle.net/WKMdc/8/](http://jsfiddle.net/WKMdc/8/)

这种行为是出乎意料的（可能是由于不正确的假设或验证中的错误而未被注意到！）。

有什么替代方法可以验证日期是否有效，可以在 IE9 中使用并允许使用本机浏览器功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:42:13.597

正如 João 的回答中所指出的那样，问题是当通过构造函数创建一个新的 Date 对象时，浏览器将通过执行存在差异的天数来“帮助”，例如 2013 年 2 月 29 日不是有效日期（2013 年 2 月只有 28 天）将变为 2013 年 3 月 1 日，或从原始日期起 + 1 天。

这并不是很有帮助，因为在我的场景中，我想将 2013 年 2 月 29 日标记给用户作为无效条目。

尝试构建以下日期：

```
var parsedDate = new Date("29 Feb 2013"); 
```

每个浏览器返回以下 Date 对象：

> **IE9** - 2013 年 3 月 1 日星期五 00:00:00 UTC
> 
> **Safari** - 2013 年 3 月 1 日星期五 00:00:00 GMT+0000 (GMT)
> 
> **Chrome** - 2013 年 3 月 1 日星期五 00:00:00 GMT+0000（GMT 标准时间）

具有“更不正确”日期的相同测试：

```
var parsedDate = new Date("32 Aug 2013"); 
```

每个浏览器返回以下 Date 对象：

> **IE9** - 2012 年 9 月 1 日星期二 00:00:00 UTC+0100
> 
> **Safari** - 无效日期
> 
> **Chrome** - 无效日期

NB IE 似乎更宽松/灵活！

建议的解决方案只是检查解析的月份是否与预期的月份相同。如果没有，那么可以得出结论，已经添加了一个日期，并且应该抛出一条验证消息：

```
function dateIsValid(dateString) {

     var month = dateString.split(" ")[1],
         year =  dateString.split(" ")[2];

     var parsedDate = new Date(dateString);

     // create a date object with the day defaulted to 01
     var expectedMonth = new Date("01 " + month + " " + year);

     // if the month was changed by the Date constructor we can deduce that the date is invalid!
     if (parsedDate.getMonth() === expectedMonth.getMonth()) {
          return true;
     }

     return false;
} 
```

运行以下命令会在浏览器中产生一致的结果：

```
console.log(dateIsValid("01 Aug 2009")); // returns true
console.log(dateIsValid("56 Aug 2009")); // returns false
console.log(dateIsValid("29 Feb 2012")); // returns true
console.log(dateIsValid("29 Feb 2013")); // returns false 
```

*免责声明：*这当然是一种解决方法。但这很简单，适用于我的场景！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:32:15.210

您可以使用正则表达式来验证日期的格式，如果它是有效日期，则从中创建一个日期对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:37:33.250

这是一个非常有趣的结果。似乎 IE9 按预期解析`Aug 2009`为`August 1, 2009`，然后将字符串 ( `56`) 的第一部分添加到该日期，即：

`August 1, 2009 + 56 days = September 25, 2009`

就像说一月的*第32*天是2月1日。看来这是一个设计决定；如果您尝试解析其他日期格式，您将得到相同的行为：

```
console.log(new Date("08/32/2009")); // August 32, 2009
// LOG: Tue Sep 1 00:00:00 UTC+0100 2009 
```

因此，您可以使用自定义正则表达式验证您的日期，也可以使用 IE9解决这个*问题。*

# firefox - 从正在运行的 Flash SWF 文件中提取图像？

> ID：11956742
> 
> 赞同：12
> 
> 时间：2012-08-14T16:29:16.053
> 
> 标签：firefox, firefox-addon, flash

有没有办法从浏览器中已经运行的 SWF 文件中提取原始图像文件？

通过安装 FlashFirebug (Firefox 14.0.1) 然后执行以下操作，我取得了有限的成功：

1.  使用“检查器”选择位图对象的树层次结构
2.  单击所有无关的对象并将它们拖放到视图之外
3.  截屏

有谁知道导出*原始*图像文件的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-19T17:44:17.670

首先，保存 swf 文件（您可以在网络选项卡中找到 url）。有一些 flash 反编译器，例如[http://www.sothink.com/product/flashdecompiler/](http://www.sothink.com/product/flashdecompiler/)

您可以下载免费试用版

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:31:54.010

你试过这个[http://www.softpedia.com/get/Internet/WEB-Design/Flash/SWF-Picture-Extractor.shtml](http://www.softpedia.com/get/Internet/WEB-Design/Flash/SWF-Picture-Extractor.shtml)吗？

另外，请阅读这篇文章[如何从 swf 文件中提取图像？](https://stackoverflow.com/questions/9448188/extracting-image-from-swf-file)

# java - 如何使用 Java 以编程方式测试 WSDL 的可用性

> ID：11956750
> 
> 赞同：2
> 
> 时间：2012-08-14T16:30:03.133
> 
> 标签：java, web-services, wsdl

这意味着我不会使用 SoapUI 或任何其他应用程序来测试 WSDL。

我正在查看[wsdl4j](http://sourceforge.net/projects/wsdl4j/)，因为这可能是唯一的一个，除非我错过了 jdk 中可用的东西。

这是我尝试过的：

类：WSDLtestvip.java

```
import java.net.HttpURLConnection;
import java.net.URL;

public class WSDLtestvip {

    public boolean isWSDLAvailable(String wsdlAddr) {
        HttpURLConnection c = null;
        try {
            URL u = new URL(wsdlAddr);
            c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("HEAD");
            c.getInputStream();
            return c.getResponseCode() == 200;
        } catch (Exception e) {
            return false;
        } finally {
            if (c != null)
                c.disconnect();
        }

    }
} 
```

类：WsdlTester.java

```
public class WsdlTester {

    public static void main(String[] args) {

        WSDLtestvip wstvip = new WSDLtestvip();
        boolean result = wstvip
                .isWSDLAvailable("https://a.b.c/aaa?wsdl");

        System.out.println(result);

    }

} 
```

它总是给我假的我如何将它用于https

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:47:30.373

建议：

```
 private boolean isWSDLAvailable(String wsdlAddr) {
            HttpURLConnection c = null;
            try {
                URL u = new URL(wsdlAddr);
                c = (HttpURLConnection) u.openConnection();
                c.setRequestMethod("HEAD");
                c.getInputStream();
                return c.getResponseCode() == 200;
            } catch (Exception e) {
                return false;
            } finally {
                if (c != null) c.disconnect();
            }    
    } 
```

如果需要，您也可以检查内容类型。

# firefox-addon - 如何获取/设置 nsIProcess runAsync() 的工作目录

> ID：11956753
> 
> 赞同：1
> 
> 时间：2012-08-14T16:30:16.630
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在使用插件 SDK 编写一个 Firefox 扩展，它需要启动一个 bash 脚本，然后从它在当前目录中创建的文件中读取其输出，如下所示：

```
echo "bash script output" >file.txt 
```

我在 main.js 中按如下方式启动 bash 脚本：

```
function runBashScript(scriptFile) {
    var localFile = Cc["@mozilla.org/file/local;1"]
        .createInstance(Ci.nsILocalFile)
    localFile.initWithPath('/bin/bash');

    var process = Cc["@mozilla.org/process/util;1"]
        .createInstance(Ci.nsIProcess);
    process.init(localFile);

    var args = [ scriptFile ];
    var rc = process.runAsync(args, args.length, 
        function(subject, topic, data) {
            console.log('subject=' + subject + ', topic=' + topic + ', data=' + data);
            console.log('bash script finished executing, returned ' + process.exitValue);
    });

    return rc;
} 
```

我的问题是我如何以编程方式从 main.js 中找出当脚本回显时 file.txt 将存储在哪里？那么启动进程的当前工作目录是什么？无论如何要检索或更改它吗？

[nsIProcess](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess?redirectlocale=en-US&redirectslug=nsIProcess) online 上的文档没有提到任何关于此的内容。

我已经确定（通过搜索 FS）file.txt 在使用 cfx run 运行扩展时以及在将其安装为 XPI 后在 Firefox 中运行时结束的位置。但我想在启动时确定这些信息，甚至可能控制它最终存储的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:10:30.507

这是一个限制`nsIProcess`- 它总是使用应用程序范围的当前目录执行应用程序。[`nsIDirectoryServiceProvider`您可以使用接口](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIDirectoryServiceProvider)获取此目录：

```
var currDir = Cc["@mozilla.org/file/directory_service;1"]
                .getService(Ci.nsIDirectoryServiceProvider)
                .getFile("CurWorkD", {}).path; 
```

您的问题仍然是该目录通常不可写。虽然您可以通过 js-ctypes 更改此目录，但这绝对是不可取的 - 您可能会破坏其他依赖于当前目录未更改的代码。另一种方法是让 bash 在执行脚本之前更改当前目录：

```
var args = ["-c", "cd /tmp && . " + scriptFile.replace(/\W/g, "\\$&")]; 
```

请注意，该`replace()`部分对于转义所有异常字符很重要 - 否则文件名的部分可能会被解释为附加命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:41:08.867

open 调用给出了文件的路径。如果您未能提供完整路径，它将默认为运行该命令的进程的当前工作目录。进程可以使用系统调用更改其当前工作目录，因此它在以后启动时所在的位置可能会不一样。如果您关心文件的位置，则应指定完整路径。

要将文件写入 Unix/Linux 上的临时目录，请执行以下操作：

```
echo "bash script output" >/tmp/file.txt 
```

例如，您不应该将文件写入用户的主目录，因为它可能会覆盖同名的不同文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T18:23:01.900

现在有[subprocess](https://github.com/bit/subprocess)，它允许您执行此操作。

# mysql - 在 model.py 中导入 GAE API 时出错

> ID：11956759
> 
> 赞同：0
> 
> 时间：2012-08-14T16:30:49.127
> 
> 标签：mysql, django, google-app-engine, django-models, google-cloud-sql

在我的 model.py 中，我正在导入图像以生成图片的 url，如下所示。

```
from google.appengine.api import images

class Picture(models.Model):
    picture_blob_key = models.TextField()

    def picture_url(self):
        return images.get_serving_url(self.picture_blob_key) 
```

哪个工作正常。我得到了我想要的结果。但是，每当我尝试同步数据库时，它都会给我一个错误：

$ python manage.py syncdb Traceback（最近一次调用最后）：文件“manage.py”，第 14 行，在 execute_manager(settings) 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/ Resources/google_appengine/lib/django_1_3/django/core/management/ **init** .py”，第 438 行，在 execute_manager utility.execute() 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/资源/google_appengine/lib/django_1_3/django/core/management/ **init**.py”，第 379 行，在执行 self.fetch_command(subcommand).run_from_argv(self.argv) 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3 /django/core/management/base.py"，第 191 行，在 run_from_argv self.execute(*args, ** **options.dict**) 在执行 self.validate( ) 验证 num_errors = get_validation_errors( s，应用程序）文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/core/management/validation.py”，第 35 行，在 get_validation_errors 中get_app_errors().items() 中的 (app_name, error)：文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/db/models/loading.py”，第 146 行，在 get_app_errors self._populate() 文件“/Applications/GoogleAppEngineLauncher. app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/db/models/loading.py”，第 64 行，在 _populate self.load_app(app_name) 文件“/Applications/GoogleAppEngineLauncher .app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/db/models/loading.py”，第 78 行，在 load_app models = import_module('.models', app_name)文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/django_1_3/django/utils/importlib.py"，第 35 行，在 import_module 中**导入**（名称）文件“/Users/taelimoh/Dropbox/gluwa_test/society/models.py”，第 10 行，从 google.appengine.api 导入图像文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default .bundle/Contents/Resources/google_appengine/google/appengine/api/images/ **init** .py”，第 48 行，从 google.appengine.api 导入 blobstore 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default .bundle/Contents/Resources/google_appengine/google/appengine/api/blobstore/ **init**.py”，第 23 行，从 blobstore 导入 * 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/blobstore/blobstore.py”，第 38 行，从 google.appengine.api 导入数据存储文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/datastore.py”，第 62 行，从 google.appengine.datastore 导入 datastore_query 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_query.py”，第 64 行，在从 google.appengine.datastore 导入 datastore_index 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_index.py”，第 60 行，从 google.appengine.api 导入验证文件“/Applications/GoogleAppEngineLauncher.app/ Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/validation.py”，第 51 行，在 import yaml ImportError: No module named yaml没有名为 yaml 的模块没有名为 yaml 的模块

因此，现在我必须在使用 syncdb 时将 GAE API 导入注释掉，然后将其重新导入。任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:08:25.363

你得到的错误是因为`import yaml`失败了。该库与 GAE 捆绑在一起，每当您启动一个工具时，它都会修复 sys 路径以便找到它。

您可以做的是手动安装 yaml 包。

# mysql - MySQL SELECT DISTINCT ... ORDER BY 没有临时表或文件排序

> ID：11956761
> 
> 赞同：1
> 
> 时间：2012-08-14T16:30:55.867
> 
> 标签：mysql, database

我有一个查询在一个有一百万行的表上运行。我在列 (wafer_name, date) 上有一个名为wafer_name_date 的复合索引。通过添加索引，此查询现在需要 0.06 秒，但仍使用临时表和文件排序进行报告。有没有办法避免这种情况？谢谢！

```
EXPLAIN SELECT DISTINCT wafer_name FROM flash ORDER BY date\G 
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: flash
         type: range
possible_keys: NULL
          key: wafer_name_date
      key_len: 767
          ref: NULL
         rows: 4308
        Extra: Using index for group-by; Using temporary; Using filesort 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:22:22.547

您的查询有点尴尬，因为结果集中不包含“日期”。但是，您是按日期订购的。我希望是这样的：

```
select wafer_name, min(date)
from flash
group by wafe_name
order by min(date) 
```

正如解释所说，执行计划使用分组（不同）值的索引。这会为wafer_name 生成一个值，并为date 生成一个任意值。它从索引中提取任意日期（而不是在相应页面上查找）。

但是，它需要按日期对结果进行排序。它不能使用您定义的索引，因为这是首先按晶片名称，并且每个晶片名称只有一个日期。所以它保存数据并进行排序。

我想不出办法解决这个问题。

# database-project - 使用 GenerateDropsIfNotInProject 部署的数据库项目会删除数据库项目中的用户

> ID：11956771
> 
> 赞同：2
> 
> 时间：2012-08-14T16:31:22.803
> 
> 标签：database-project

我创建了一个包含用户的数据库项目：

TimTestUser.user.sql

```
CREATE USER [TimTestUser]
      FOR LOGIN [TimTestLogin] 
```

并且还在服务器项目 TimTestLogin.login.sql 中创建了一个登录名

```
CREATE LOGIN TimTestLogin WITH PASSWORD = 'tim' 
```

在我选择的 Database.sqldeployment 中：为目标数据库中的对象生成删除语句

当我部署数据库项目~~时，用户会被删除然后重新创建，这会导致登录到用户链接失败并且用户成为孤立用户。~~

更新：

当我部署数据库项目时，会生成 Revoke connect to [TimTestUser]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T20:33:06.097

在 Visual Studio 2013 中使用 SQL Server 数据库项目时，可以通过在将数据库导入项目时选中“导入权限”选项（默认情况下未选中）来避免此问题。

这样做会在 Security 目录中创建一个 Permissions.sql 文件，其中包含每个用户的 GRANT 语句：

```
GRANT CONNECT TO [MyUser] AS [dbo]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:10:45.773

我无法让上面的 sqlpermissions 解决方案正常工作。但是，向用户脚本添加授予权限语句对我有用。例如：

`GRANT CONNECT TO [TimTestUser]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T21:12:08.193

在尝试添加 GRANT CONNECT 作为部署后脚本，并在 SQL Server Management Studio 2014 中手动设置连接权限后尝试重新生成全新的 .sqlproj 后，我发现[BunnyStrider](https://stackoverflow.com/users/2690556/bunnystrider)是正确的：您必须添加 GRANT连接到 CREATE USER 所在的同一个脚本文件。下面是代码，都在 Security 文件夹中一个名为 TimTestUser.sql 的文件中：

```
CREATE USER [TimTestUser]
      FOR LOGIN [TimTestLogin];
GO
GRANT CONNECT TO [TimTestUser];
GO 
```

然后，我通过删除包含 GRANT CONNECT 的导入向导生成的 Permissions.sql 以及我添加的部署后脚本来确认此代码，并且连接仍然有效。然后我重新生成了部署脚本（双击 *.Publish.xml 文件并单击生成脚本）并验证 REVOKE CONNECT TO [TimTestUser] 已消失。

我们正在使用 SQL Server 2014、Visual Studio 2012 和 SSDT 11.1.50717.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T10:28:31.283

Sql server 在创建用户时隐式授予 Connect

```
CREATE USER [TimTestUser] 
```

db项目构建部署时，在Database.sqlpermissions文件中找不到CONNECT权限

解决方案是显式设置 Connect Database.sqlpermissions

```
<PermissionStatement Action ="GRANT">
  <Permission>CONNECT</Permission>
  <Grantee>TimTestUser</Grantee>
</PermissionStatement> 
```

# gridview - 具有 Gridview 选定行的 MVP

> ID：11956776
> 
> 赞同：1
> 
> 时间：2012-08-14T16:31:42.317
> 
> 标签：gridview, mvp, passive-view

我正在尝试为我正在处理的项目实施 MVP 模式（使用 webforms），但是我陷入了事件之后该怎么做的困境，特别是源自 gridview 的事件。目前，视图实现了一个接口，以便演示者可以调用视图上的方法。

我的gridview 包含了本质上是一些缩减的员工对象（尽管它不知道这一点），每个对象都有一个我已经必须隐藏在网格中的ID。

当在网格行上按下某些按钮时，可能会发生不同的事件（例如，删除、添加到作业等）。演示者需要访问员工 ID 才能执行功能（这可能会触发具有所述 ID 的服务层命令）。我试图让视图保持被动，但我认为在这个例子中这是不可能的。

在我看来，只有少数几种方法可以做到这一点。

1.  在gridrow select上，在View的状态（不是gridrow id）中填充一个“选定的ID字段”，并触发通知演示者（事件或演示者调用）。演示者随后将访问此字段。选择事件需要从 gridview 推断 ID。

2.  将 Id 直接传递给演示者，通过演示者通知上的参数（或事件参数，如果使用事件通知演示者）。选择事件需要从 gridview 推断 ID。

如果这是一个下拉列表，那将很容易，因为您可以只使用 GetSelectedValue，并在此周围有一个包装器方法（实现视图接口方法）。

希望你能帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:09:15.140

好的，最后我不得不为 UI 指定一点逻辑，并做了以下事情：

对于我希望由网格（或类似的东西）填充的任何类型的复杂列表对象，我正在通过接口传递 DTO 版本。
例如：

`interface IPersonView {`

`SetPersonList(List<PersonDTO> personList);`

`event Action PersonDeleteClicked;`

`PersonDTO GetSelectedPerson()`

`void HidePersonId() }`

1.  UI 接受它并用它填充网格。

2.  如果演示者愿意，可以使用一些方法来隐藏列（例如 HideId 列）。

3.  在触发 GridView 按钮事件时，我的 UI 检索选定的行对象，并将其转换为我的列表 PersonDTO，并将选定的 ID 存储在它自己的状态中。

4.  然后我触发 PersonDeleteClicked 事件。

5.  监听此事件的演示者现在调用接口方法：

    `PersonDTO GetSelectedPerson()`

6.  UI 通过使用保存的 PersonSelectedID 获取 PersonDTO 进行响应

# spring - ActiveMQ 队列的并发消费者

> ID：11956779
> 
> 赞同：4
> 
> 时间：2012-08-14T16:31:49.687
> 
> 标签：spring, activemq

我尝试使用 grails 中 ActiveMQ 队列中的消息。我已经为连接配置了一些 spring bean，到目前为止一切都很好。

当我尝试设置`concurrentConsumers`上述 8 时，问题就开始了。似乎将 8 设置为一个客户端的最大值 - 如果我配置超过 8 个，ActiveMQ 资源管理器仍然显示队列的 8 个使用者。如果我为超过 8 的不同队列配置两个侦听器`concurrentConsumers`，则 ActiveMQ oszillate 显示的消费者数量，但总和始终为 8。

我究竟做错了什么？配置示例显示并发消费者最多为 50...

下面是我的配置，写成groovy DSL，我猜看没问题...

```
jmsFactory(org.apache.activemq.pool.PooledConnectionFactory) { bean ->
    bean.destroyMethod = "stop"
    connectionFactory = { org.apache.activemq.ActiveMQConnectionFactory cf ->
        brokerURL = "tcp://localhost:61616"
    }
}
jmsTemplate(org.springframework.jms.core.JmsTemplate) {
    connectionFactory = jmsFactory
}
jmsMessageListener(org.springframework.jms.listener.adapter.MessageListenerAdapter, ref("messageService")) {
    defaultListenerMethod = "onMessage"
}
jmsContainer(org.springframework.jms.listener.DefaultMessageListenerContainer) {
    connectionFactory = jmsFactory
    concurrency="10"
    concurrentConsumers="15"
    destinationName = "demoQueue"
    messageListener = jmsMessageListener
    transactionManager = ref("transactionManager")
    autoStartup = false
}    
jmsMessageListener2(org.springframework.jms.listener.adapter.MessageListenerAdapter, ref("messageService")) {
    defaultListenerMethod = "onMessage2"
}
jmsContainer2(org.springframework.jms.listener.DefaultMessageListenerContainer) {
    connectionFactory = jmsFactory
    destinationName = "demoQueue2"
    messageListener = jmsMessageListener2
    transactionManager = ref("transactionManager")
    autoStartup = false
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:55:52.150

由于 Petter 指出 ActiveMQ 或 Spring 配置不会有问题，因此我在 java 中创建了一个 spring 消费者，并试图找到与我的 grails 消费者不同的地方。

java 消费者按预期工作，但不使用事务管理器。所以我从我的 grails confid 中删除了事务管理器，它可以工作了！

然后我用谷歌搜索了一下，发现了 cacheLevel 设置的提示：[http ://static.springsource.org/spring/docs/2.0.8/api/org/springframework/jms/listener/DefaultMessageListenerContainer.html#setCacheLevel%28int %29](http://static.springsource.org/spring/docs/2.0.8/api/org/springframework/jms/listener/DefaultMessageListenerContainer.html#setCacheLevel%28int%29)

使用事务管理器时，cacheLevel 设置为 none - 宾果游戏！如果我现在将 cacheLevel 设置为 CACHE_CONSUMER，一切都会按预期工作......

# c# - 将数字序列转换为范围

> ID：11956780
> 
> 赞同：2
> 
> 时间：2012-08-14T16:31:51.343
> 
> 标签：c#

我在 C# 中有以下字符串：

```
string a="1,2,3,4,5,6,7,8,9,10,22,45,66,88,100,101,102,103,104,105,140,199"; 
```

我想生成以下输出：

1-10,22,45,66,88,100-105,140,​​199 以这种方式将连续数字分组为范围

“initialnumber-endnumber”，其余的保持原样。

你能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:38:31.540

```
IEnumerable<string> Rangify(IList<int> input) {
    for (int i = 0; i < input.Count; ) {
        var start = input[i];
        int size = 1;
        while (++i < input.Count && input[i] == start + size)
            size++;

        if (size == 1)
            yield return start.ToString();
        else if (size == 2) {
            yield return start.ToString();
            yield return (start + 1).ToString();
        } else if (size > 2)
            yield return start + " - " + (start + size - 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:59:55.667

好的，第一步，将字符串枚举为有序整数。

```
var numbers = a.Split(',').Select(int.Parse()).OrderBy(i => i); 
```

因此，我们可以使用这两个函数来枚举这样的范围。

```
private static string RangeToString(int first, int last)
{
    if ( last != first )
    {
        return string.Format("{0}-{1}", first, last);
    }
    else
    {
        return last.ToString();
    }
}

private static IEnumerable<string> GetRanges(IEnumerable<int> numbers)
{
    var last = numbers.First();
    var first = last;
    foreach(var number in numbers.Skip(1))
    {
        if (lastNumber + 1 != number)
        {
            yield return RangeToString(first, last);
            first = number;
        }

        last == number;
    }

    yield return RangeToString(first, last);
} 
```

然后我们可以像这样把它放在一起，

```
public static string GetRangedList(string list)
{
    var numbers = list.Split(',').Select(int.Parse()).OrderBy(i => i);
    return string.Join(",", GetRanges(numbers));
} 
```

显然你会这样称呼

```
var b = GetRangedList(a); 
```

# actionscript-3 - Adobe Flash Builder 能否用于调试和分析 OpenLaszlo SWF10/SWF11 应用程序？

> ID：11956784
> 
> 赞同：3
> 
> 时间：2012-08-14T16:32:03.210
> 
> 标签：actionscript-3, flash, adobe, profiling, openlaszlo

我读过 Adob​​e 的[Flash Builder 4.0+ 支持对 ActionScript 3](http://help.adobe.com/en_US/flashbuilder/using/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7e46.html)应用程序的分析。那么是否可以使用 Flash Builder 相应地分析 OpenLaszlo SWFx 运行时应用程序？

OpenLaszlo 的 LZX 源代码到 SWF 文件的转换分多个步骤进行，编译器在此过程中生成 ActionScript 源代码。该源代码如何用于调试 Flash Builder 中的应用程序？

![在此处输入图像描述](../Images/faef522f0913ca9cd89dcb39cbe498de.png)

根据我对 Flash Builder、ActionScript 3 应用程序和 OpenLaszlo 的了解，一旦源代码存在，编译和分析应用程序应该不难。甚至应该可以远程调试 Adob​​e AIR for Android 应用程序，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:59:15.947

OpenLaszlo Wiki 有一个[页面，其中包含](http://wiki.openlaszlo.org/FlexProfiling)有关如何编译 SWF 以便能够对应用程序进行概要分析的一些信息。您必须使用命令行编译器编译 LZX 文件，例如

```
lzc --flex-options=debug --runtime=swf10 your-app.lzx 
```

如果您使用 OpenLaszlo 的 flex4.6 分支（目前仅[夜间构建可用](http://download.openlaszlo.org/nightly/flex4.6/)），您可以使用 swf11 运行时开关为 Flash Player 11 编译您的应用程序：

```
lzc --flex-options=debug --runtime=swf11 my-app.lzx 
```

Flash Builder 4.6 仍可免费获得 60 天试用期，但现在只有 Windows 和 OS X 版本可用（Linux 版本已停产）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T23:00:33.580

我[在 Github 上创建了一个项目，](https://github.com/raju-bitter/openlaszlo-flashbuilder-project)其中包含一个 Ant 构建脚本以及在 Windows 或 Mac 上使用 Flash Builder 4.6 分析和调试 OpenLaszlo 应用程序所需的文件。

下面是在分析器中运行的 OpenLaszlo 应用程序的屏幕截图：

![在此处输入图像描述](../Images/e87c9179048a415dfd8d97d6e3899196.png)

我创建了一个包含完整教程的 PDF，该教程展示了如何调试和分析 OpenLaszlo SWF11 运行时应用程序，包括 SWF11 LFC 类。[可以从 GitHub 下载](https://github.com/raju-bitter/openlaszlo-flashbuilder-project)标题为“使用 Flash Builder 分析 OpenLaszlo 应用程序”的文档。

# sql - 指定时间日期运行sql脚本或存储过程

> ID：11956792
> 
> 赞同：0
> 
> 时间：2012-08-14T16:32:43.123
> 
> 标签：sql, sql-server

我想在指定的时间和日期运行从数据库中的表获取的 sql 脚本或存储过程。如果此表有一行被插入或更新，则计划将被更新。请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:59:41.717

您可以使用 SQL Server 代理创建作业。

![在此处输入图像描述](../Images/2f960f0afc984782a0ae88f76e21446d.png)

然后您将右键单击 Jobs 文件夹以打开菜单，选择 New Job：

![在此处输入图像描述](../Images/45421a4047d8e8e32a252aa1da261f70.png)

当您创建新工作时，将打开一个窗口，您将提供您想要创建的工作的详细信息。包含：

*   名称 - 在常规选项卡中
*   步骤 - 可以运行 SQL 脚本、SSIS 包等
*   计划 - 以您选择的频率重复、每周、每天等。

[创建 SQL 作业的分步指南](http://www.dailycoding.com/Posts/step_by_step_guide_to_add_a_sql_job_in_sql_server_2005.aspx)

# regex - 正则表达式从字符串中提取温度和温度范围

> ID：11956793
> 
> 赞同：1
> 
> 时间：2012-08-14T16:32:49.483
> 
> 标签：regex, coldfusion

好的，我有这个字符串：

```
-64.5(Ethylene glycol monobutyl ether acetate)- -24.4 deg C(N-Methylpyrrolidone) 
```

我正在寻找的最终结果是：

```
-64.5 - -24.4 deg C 
```

在化学名称和负数中包含破折号以及用于指示温度范围的破折号分隔符让我死了！！

任何帮助将不胜感激！！

示例输入：

```
> 1000 °C ( > 1832 °F )
> -64,6 deg C (Ethylene glycol monobutyl ether acetate)
-30 to -15 deg C ( -22 to 5 deg F )
-64.5(Ethylene glycol monobutyl ether acetate)- -24.4 deg C(N-Methylpyrrolidone) 
```

预期产出：

```
two results: > 1000 deg C and > 1832 deg F
> -64.6 deg C
-31 - -15 deg C
-64.5 - -24.4 deg C 
```

抱歉，如果我没有很好地描述我正在努力完成的事情！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:35:16.883

看起来您只想删除括号内的任何内容。

只需删除任何匹配的内容`\(.*?\)`

并不是说这不适用于嵌套括号。如果这不是问题，那么这种方法应该可以正常工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:31:35.213

这似乎可以满足您的要求，尽管到目前为止它还没有拆分/删除括号中的温度，因为尚不清楚为什么示例 1 应该有两个结果，而示例 3 只有一个结果？（一个是范围而另一个不是范围是否相关？）

它的工作原理是删除您不想要的位，只留下相关信息 - 它使用正则表达式负前瞻来执行此操作`(?!`..`)`以指定如果当前位置与前瞻匹配，则不应将其视为该位置的匹配。

（此外，它会根据`to`您的预期值更改。）`-``°C to deg C`

```
<cfsavecontent variable="TempsRx">(?x)

    ## Exclude numbers, "deg", "C", "F", and GT sign.
    (?!
        \d+(?:[.,]\d+)?
    |
        \bdeg\b
    |
        \b[CF]\b
    |
        >
    )

    ## Match words
    \b[\w]+[\w-]*\b

</cfsavecontent>

<cfsavecontent trim variable="Inputs">
> 1000 °C ( > 1832 °F )
> -64,6 deg C (Ethylene glycol monobutyl ether acetate)
-30 to -15 deg C ( -22 to 5 deg F )
-64.5(Ethylene glycol monobutyl ether acetate)- -24.4 deg C(N-Methylpyrrolidone)
</cfsavecontent>

<cfloop index="CurIn" array=#Inputs.split('\n')# >

    <!---
        Replace 1/2: Normalise to/- and °/deg as per expected values
        Replace 3: Remove unwanted words
        Replace 4: Cleanup leftover parens
    --->
    <cfset Out = CurIn
        .replaceAll(' to ',' - ')
        .replaceAll('°(?=[CF]\b)','deg ')
        .replaceAll(TempsRx,'')
        .replaceAll('\(\s*\)',' ')
         />

    <cfdump var=#[CurIn,Out]# />

</cfloop> 
```

# android - 移除全息主题中的活动背景渐变。像疯了一样扔 SIGSEGV

> ID：11956796
> 
> 赞同：3
> 
> 时间：2012-08-14T16:33:04.227
> 
> 标签：android

因此，我的应用在其清单中有 android:hardwareAccelerated="true" 标志，我还将它设置为使用 Holo Dark 主题进行我的主要活动：

android:theme="@style/Theme.NoTitle"

我的样式文件（API Lvl > 11）：

```
<style name="Theme.NoTitle" parent="@android:style/Theme.Holo">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowContentOverlay">@null</item>
</style> 
```

上述样式文件没有问题，但是我仍然得到 Holo 主题中使用的深蓝色/灰色渐变活动背景。因此，根据文档，我通过添加 windowBackground 属性来更改我的样式文件：

```
<style name="Theme.NoTitle" parent="@android:style/Theme.Holo">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowBackground">@android:color/black</item>
</style> 
```

这很有效，因为它用纯黑色代替了 Holo 背景渐变。但是我的应用程序会随机开始左右抛出 SIGNAL 11 SIGSEGV 崩溃。在我进行这个简单的更改之前，我的应用程序是坚如磐石且可靠的。

我也尝试将窗口背景设置为透明，我也遇到了同样的问题。

有没有什么方法可以改变全息主题应用程序中的活动背景而不会像疯了一样崩溃？

# wpf - 如何从 XAML 中的多个源填充 WrapPanel

> ID：11956799
> 
> 赞同：1
> 
> 时间：2012-08-14T16:33:18.167
> 
> 标签：wpf, xaml

我需要这样的东西：

```
<WrapPanel Orientation="Horizontal">
    <TextBlock Text="{Binding Path=Person.Name}" Style="style1"/>
    <TextBlock Text="{Binding Path=Project.Name}" Style="style2" />
    foreach item in {Binding Path=Tags}
    {
        <TextBlock Text={Binding item.Name} Style="style3" />
    }
</WrapPanel> 
```

我已经通过代码完成了它，但我更喜欢在 XAML 中使用它，因为这是一些常见且基本的功能 + 我希望在设计器中看到它以及我的示例数据以很好地设置它的样式。

我试图用来`ItemsControl`填充集合，但它总是创建自己的面板，这显然会破坏包装。

我想人们也可以要求在那里扔另一个收藏。

不写代码怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:37:40.683

为什么不使用带有`WrapPanel`as 的项目控件[`ItemsControl.ItemsPanel`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx)？对于多个来源，您可以使用 将[`CompositeCollection`](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)它们分组以显示在您的项目控件中。

# android - getID() 是否总是返回一个常量值？

> ID：11956800
> 
> 赞同：2
> 
> 时间：2012-08-14T16:33:19.753
> 
> 标签：android, constants

对于我的 Android 项目，我正在使用该`getID()`方法来检索 View 的数值并将该值存储在我的数据库中。我相信`getID()`对于特定视图的这种方法将始终在生产环境中的多次执行以及多年来的后续应用程序更改中返回相同的常量值。我的假设正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:41:57.913

`View#getId()`是`R.id.xyz`您在布局 xml 文件中定义的值。在您重新编译您的应用程序之前，它们不会更改，因为这会更改生成的 R.java 文件（但不一定会更改数字 id 值）。

> 在生产环境中多次执行

是的，如果应用程序未更新

> 以及多年来的后续应用程序更改

也许，但我不会假设。也许有一种方法可以设置您的工具以生成预定的修复 id 值，因为 Android 本身具有稳定的[资源 id](http://developer.android.com/reference/android/R.id.html)，但我知道这是如何完成的。

# python - 从列 qtablewidget 检索数据

> ID：11956803
> 
> 赞同：1
> 
> 时间：2012-08-14T16:33:41.913
> 
> 标签：python, pyqt, qtablewidget, qtablewidgetitem

我想要一个表格小部件，它可以根据某些条件和阈值对某些行进行着色。例如，如果一列中的数据超过 20，它将为该 20 所在的行着色。我只通过 Qtablewidgetitem 搜索它并没有做我想要它做的事情。

```
def setmydata(self):
    for n, key in enumerate(self.data):
        for m, item in enumerate(self.data[key]):
            newitem = QtGui.QTableWidgetItem(item)
            c = newitem.column() + 2
            print c
            for items in item:
                if newitem.text() >= '20' or newitem.text() == 'WARNING':
                    newitem.setBackground(QtGui.QBrush(QtCore.Qt.yellow))
                else:
                    pass
            self.setItem(m, n, newitem) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:38:22.033

如果您的单元格包含整数，您应该尝试：

```
int(newitem.text()) >= 20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T18:13:53.063

对于一个包含数据的现有表，您希望在其中迭代特定列，您可以执行以下操作：

```
def process_column(table, processCol=0):
    for row in xrange(table.rowCount()):
        item = table.item(row, processCol)
        text = str(item.text())

        if (text.isdigit() and int(text) >= 20) or text == 'WARNING':
            item.setBackground(QtGui.QBrush(QtCore.Qt.yellow)) 
```

或者要设置整行颜色，您需要遍历列以在匹配时获取每个行项目：

```
def process_column(table, processCol=0):
    colCount = table.rowCount()

    for row in xrange(table.rowCount()):
        item = table.item(row, processCol)
        text = str(item.text())

        if (text.isdigit() and int(text) >= 20) or text == 'WARNING':
            for col in xrange(colCount):
                item = table.item(row, col)
                item.setBackground(QtGui.QBrush(QtCore.Qt.yellow)) 
```

正如其他问题也指出的那样，您需要将 int 与 int 进行比较，而不是字符串比较。我在这里所做的是首先检查该单元格实际上是一个 int 首先使其保存。因为如果您的单元格实际上是“警告”，那么首先将其转换为 int 会崩溃。

无论如何，您都需要对 的引用`QTableWidget`，即使该函数位于不同的类中。这意味着您需要提前设置您的信号并参考表格，如果其他类永远不会特别知道它。这方面的一个示例是使用`partial`将表绑定到其中的回调：

```
from functools import partial 

class Foo:
    def __init__(self):
        self.the_table = QTableWidget()

        # create a callback with the table bound as first arg
        callback = partial(process_column, self.the_table)

        # set some signal that emits a column number
        self.process_column_signal.connect(callback)

    def some_method(self):
        # process column 0
        self.process_column_signal.emit(0)

# will get called by process_column_signal with the table
def process_column(table, processCol):
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:59:20.267

Joaquin 的观点是您正在将一个字符串 (newitem.text()) 与另一个字符串 ('20') 进行比较。这是一个字母比较——`'3' > '200'`例如，即使数字 3 < 数字 200。您描述的规则是数字之间的比较，因此您需要将 newitem.text() 转换为数字。

请注意，即使您在小部件中输入“数字”，它们也会作为字符串存储和检索。`int(newitem.text())`把它变回一个数字。

# javascript - Javascript动态将参数化函数分配给onclick

> ID：11956805
> 
> 赞同：0
> 
> 时间：2012-08-14T16:33:45.023
> 
> 标签：javascript, function, dynamic, onclick

我必须根据从其他地方获取的一些数据（json）动态创建一系列链接，单击时更改一些其他元素的属性（src、类、文本）。

我有这样一段代码：

```
 // this is data I need processed
  screenshots = report_data.screenshots;
  // for each I'd like to create a link
  for (var i=0; i < screenshots.length; i++) {
      document.write('<a href="" onclick="{document.getElementById(\'the_screenshot\').src = \''+ screenshots[i].screenshotFile + '\'; ' + 'return false;}">' + screenshots[i].screenshotTitle + '</a>');
  }); 
```

然而，正确逃脱所有这些角色花了我两个小时。我想在那里调用其他地方定义的参数化函数。然后我只需要输入参数。

我尝试了许多我在 stackoverflow.com 上找到的各种组合，这让我非常头疼。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:53:43.630

偶然地，经过几个小时的尝试和重试，我问我的朋友，他聪明的头脑告诉我用更复杂的方式来做：

*   在纯 JavaScript 中创建参数化函数。
*   使用闭包 - 仅将调用上述具有足够参数的匿名函数分配给 onclick。
*   创建标签的模式字符串以传递给 document.write(html)，并为 onclick 函数代码提供类似变量的部分。
*   使用 string.replace(A,toB) 函数：创建一个带有函数代码的字符串来分配。
*   如果需要，对函数参数执行相同的技巧。
*   将填充的模式传递给 document.writa(html) 函数。

最终的解决方案是这样的（可能不完全相同，但思路很明确）：

```
// function to call by closure
onLinkClick = function(SRC) {
    document.getElementById('the_screenshot').src = SRC;
    // and here one can place as much code as he needs // plain js
    // and I did it
}

// this is data I need processed
screenshots = report_data.screenshots;
for (var i=0; i < screenshots.length; i++) {
    // first enlist every basic part with it's inner parameters as text
    var pattern = '<a href="" onclick=ONCLICK>TEXT</a>'
    var onclick = '(function (){onLinkClick(PARAM); return false;})()';
    var text = screenshots[i].screenshotTitle;
    var param = screenshots[i].screenshotFile;
    // now inject them - without any more escaping via replace
    onclick = onclick.replace('PARAM', param);
    pattern = pattern.replace('ONCLICK', onclick);
    pattern = pattern.replace('TEXT', text);
    document.write(pattern);
}); 
```

这样代码看起来比第一种方法更优雅。我希望这对那些将来不得不面对 javascript 的人有所帮助。

还有一件事，我曾经考虑过一个细节，但结果却是一个非常严肃的问题：语法。要使闭包函数起作用：

*   像往常一样写一个函数
*   用括号括起来
*   后面跟着另一对空括号

像这样：

```
(function(){return false;})() 
```

现在它是一个匿名函数，而不仅仅是一个匿名函数调用。现在它可以工作了。

# c - 为什么控制进入“其他”部分？

> ID：11956806
> 
> 赞同：-1
> 
> 时间：2012-08-14T16:33:45.653
> 
> 标签：c

> **可能重复：**
> [float 和 double 比较奇怪输出的最有效方法，](https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison)
> [将 float 与 float 文字进行比较](https://stackoverflow.com/questions/1839422/strange-output-in-comparison-of-float-with-float-literal)

```
int main() 
{
  float a = 0.8;
  if (a == 0.8)
    printf("x\n");
  else 
    printf("y\n");

  return 0;
} 
```

虽然**a**等于**0.8**，但它输出 y。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T16:36:16.540

0.8 不能用二进制浮点数准确表示。您的代码`if (a == 0.8)`基本上将单精度 0.8 与双精度 0.8 进行比较，它们不相等。

要亲自查看，请尝试以下代码：

```
int main()
{
    double a = 0.8f;
    double b = 0.8;

    printf("%lX\n", *(long *)&a);
    printf("%lX\n", *(long *)&b);
} 
```

它输出：

```
3FE99999A0000000
3FE999999999999A 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T16:36:12.703

```
if (a==0.8f) 
```

试试这个。默认情况下，类型被认为是双精度误差比较。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T16:36:02.100

您使用的是文字 0.8，但这并不一定意味着它是一个浮点数。尝试使用：

```
if (a==0.8F) 
```

反而

此外，由于计算机内部使用 base-2，表示数字的小数部分是出了名的容易出错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T16:37:17.537

浮点数不是精确值。您不应该使用 == 和 != 来比较它们。使用具有一些相当小的 epsilon 的大于和小于运算符：

```
if ((a > 0.79) && (a < 0.81)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T16:36:11.010

这是因为浮点数不能准确地表示小数，所以它不完全是 0.8。并且您将 0.8 舍入为浮点数与 0.8 舍入为小数进行比较，这不一定相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T16:38:07.693

浮点数并不总是 100% 准确，它们不可能是因为它们的存储方式。如果你说`float a = 0.8`，a 可能真的是`0.800000000001`或类似的东西。为了弥补这一点，您应该使用某种阈值。试试`if (fabs(a-0.8) < 1.0e-5)`吧

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T16:38:36.403

因为对于浮点数 0.8 并不真正意味着 0.8 但它是 0.799999999 所以它会发生 **为什么它是 0.79999999**
这取决于浮点值的存储。十进制值将以二进制形式存储 (....,2^3,2^2,2^1,2^0,.,2^-1,2^-2,2^-3,.. .)

因此，当 0.8 以 2 的倍数存储为 .101b（不是 0.8 而是 0.799999988）时。因此它的值将小于 0.8。

```
if (a > 0.8) 
```

这也是`False`为什么。

为您的结果尝试

```
if (a == 0.8f) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T16:59:40.557

您正在比较 2 个不同类型的值：`a`is of type `float`，`0.8`is of type `double`。

在比较之前，该`float`值被转换为`double`... 但从`double`to`float`和 back 转换不一定会产生相同的值

```
if (0.8 == (double)(float)0.8) /* ... */ 
```

# android - 我们在 Google Play 商店中启动了我们的应用程序，但除非我们在搜索栏中指定，否则它不会显示。这是怎么回事？

> ID：11956807
> 
> 赞同：0
> 
> 时间：2012-08-14T16:33:48.947
> 
> 标签：android, google-play, android-market-filtering

我们昨晚启动了它，它没有出现在任何地方，除非我们像这样专门寻找它：“App.io”而不是仅仅搜索“App”。

这是怎么回事？我们搜索了与该应用程序相关的所有类别，但没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:38:34.183

如果我没记错的话，我的应用程序花了几天时间才“可搜索”。我记得我可以直接从 google play 的链接访问它。希望有帮助，给它一天左右，它应该会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:43:42.827

由于您的应用程序是新的，它将位于所有列表的底部。即使您正在搜索类别，Google Play 也会根据应用的受欢迎程度（下载次数）对应用进行排序。我们发布了一个应用程序，然后搜索了它的确切名称，它仍然排在第 20 位。随着您的应用程序获得更多下载，它将变得更加明显。由于 Google Play 上有大量应用程序，按类别搜索并不是一个好方法。如果您搜索游戏，愤怒的小鸟很有可能成为第一名，而您的应用可能根本不会出现。这是一个很难过去的阶段，因为您需要下载才能在列表中上移，但当 Google Play 用户无法轻松访问您的应用时，很难获得它们。当我们的第二个应用因为“

# sql-server - 使用 XQuery/SQL Server 提取元素

> ID：11956815
> 
> 赞同：0
> 
> 时间：2012-08-14T16:34:27.767
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005

我从下面的 XML 提取中的 /ShippingDocumentationNotification/ShippingBusinessDocument/ShipmentInformation/DeclarationInformation 节点解析 PartnerDescription 元素的成功率为零。我最近的尝试：

```
SELECT  x.item.value('PartnerName[1]', 'VARCHAR(20)') AS PartnerName
FROM    @Data.nodes('/ShippingDocumentationNotification/ShippingBusinessDocument/ShipmentInformation/DeclarationInformation/PartnerDescription/FullPartner/PartnerIdentification/PartnerName')
        AS x ( item ) 
```

其中@Data 是一个XML 变量，用于存储XML 提取的一个实例。最终，我想解析（即展平）每个 PartnerDescription 节点的 PartnerIdentification 和 PhysicalAddress 子节点中包含的数据。我已经查看了所有谷歌和 SO - 如果有人能让我开始，我将非常感激。

```
<tns:ShippingDocumentationNotification 
    xmlns:sha="urn:rosettanet:specification:domain:Shared:xsd:schema:01.17" xmlns:dfpt="urn:rosettanet:specification:domain:Logistics:FreightPaymentTerms:xsd:codelist:01.03" xmlns:uc="urn:rosettanet:specification:universal:Country:xsd:codelist:01.02" xmlns:drl="urn:rosettanet:specification:domain:Logistics:RouteLocation:xsd:codelist:01.03" xmlns:tns="urn:rosettanet:specification:interchange:ShippingDocumentationNotification:xsd:schema:02.07" xmlns:dcst="urn:rosettanet:specification:domain:Logistics:CustomsType:xsd:codelist:01.03" xmlns:dtrt="urn:rosettanet:specification:domain:Logistics:TrackingReferenceType:xsd:codelist:01.06" xmlns:ssdh="urn:rosettanet:specification:system:StandardDocumentHeader:xsd:schema:01.23" xmlns:uci="urn:rosettanet:specification:universal:ContactInformation:xsd:schema:01.04" xmlns:updi="urn:rosettanet:specification:universal:ProductIdentification:xsd:schema:01.04" xmlns:upi="urn:rosettanet:specification:universal:PartnerIdentification:xsd:schema:01.16" xmlns:ucs="urn:rosettanet:specification:universal:CountrySubdivision:xsd:codelist:01.02" xmlns:uuom="urn:rosettanet:specification:universal:UnitOfMeasure:xsd:codelist:01.04" xmlns:ulc="urn:rosettanet:specification:universal:Locations:xsd:schema:01.04" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:upri="urn:rosettanet:specification:universal:ProcessRoleIdentifier:xsd:codelist:01.11" xmlns:dsd="urn:rosettanet:specification:domain:Logistics:ShippingDocument:xsd:codelist:01.02" xmlns:udct="urn:rosettanet:specification:universal:DocumentType:xsd:codelist:01.13" xmlns:upd="urn:rosettanet:specification:universal:PhysicalDimension:xsd:schema:01.07" xmlns:pfx24="http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/ADB/OTMflex" xmlns:udc="urn:rosettanet:specification:universal:Document:xsd:schema:01.12" xmlns:rat="urn:rosettanet:specification:domain:Shared:AmountType:xsd:codelist:01.03" xmlns:dat="urn:rosettanet:specification:domain:Procurement:ActionType:xsd:codelist:01.04" xmlns="http://xyz/" xmlns:dl="urn:rosettanet:specification:domain:Logistics:xsd:schema:02.22" xmlns:dic="urn:rosettanet:specification:domain:Logistics:Incoterms:xsd:codelist:01.03" xmlns:dsm="urn:rosettanet:specification:domain:Logistics:ShipmentMode:xsd:codelist:01.05" xmlns:ume="urn:rosettanet:specification:universal:MonetaryExpression:xsd:schema:01.06" xmlns:dpts="urn:rosettanet:specification:domain:Procurement:PaymentTerms:xsd:codelist:01.04" xmlns:rssl="urn:rosettanet:specification:domain:Shared:ShippingServiceLevel:xsd:codelist:01.01" xmlns:ucr="urn:rosettanet:specification:universal:Currency:xsd:codelist:01.03" xmlns:dp="urn:rosettanet:specification:domain:Procurement:xsd:schema:02.28" xmlns:dsh="urn:rosettanet:specification:domain:Procurement:SpecialHandling:xsd:codelist:01.04">
      <ssdh:DocumentHeader>
        <ssdh:DocumentInformation>
          <ssdh:Creation>2012-05-08T05:12:57-07:00</ssdh:Creation>
          <ssdh:DocumentIdentification>
            <ssdh:Identifier>25163</ssdh:Identifier>
            <ssdh:Type>TRUCK CLOSE</ssdh:Type>
            <ssdh:StandardDocumentIdentification>
              <ssdh:Standard>RosettaNet</ssdh:Standard>
              <ssdh:Version>11.11</ssdh:Version>
            </ssdh:StandardDocumentIdentification>
          </ssdh:DocumentIdentification>
        </ssdh:DocumentInformation>
        <ssdh:Receiver>
          <upi:PartnerIdentification>
            <upi:PartnerName />
            <DUNS xmlns="urn:rosettanet:specification:universal:DataType:xsd:schema:01.04">894694306</DUNS>
          </upi:PartnerIdentification>
        </ssdh:Receiver>
        <ssdh:Sender>
          <upi:PartnerIdentification>
            <upi:PartnerName>CISCO</upi:PartnerName>
            <DUNS xmlns="urn:rosettanet:specification:universal:DataType:xsd:schema:01.04">678543210</DUNS>
          </upi:PartnerIdentification>
        </ssdh:Sender>
      </ssdh:DocumentHeader>
      <tns:ShippingBusinessDocument>
        <dat:ActionType>ADD</dat:ActionType>
        <tns:HeaderInformation>
          <tns:PackingList>
            <udc:DateTime>2012-03-01T00:39:54-07:00</udc:DateTime>
            <udct:DocumentType>SHD</udct:DocumentType>
            <udc:Identifier>0</udc:Identifier>
            <udc:Line>0</udc:Line>
            <udc:Revision>F</udc:Revision>
          </tns:PackingList>
          <tns:ShippingDocument>
            <udc:DateTime>2012-03-01T00:39:54-07:00</udc:DateTime>
            <udct:DocumentType>SAO</udct:DocumentType>
            <udc:Identifier>51548069</udc:Identifier>
            <udc:Line>1</udc:Line>
            <udc:Revision>Standard - JPN</udc:Revision>
          </tns:ShippingDocument>
          <tns:ShippingOrderInformation>
            <dl:OrderInformation>
              <ulc:AlternativeIdentifier>
                <ulc:Authority>Cisco Systems</ulc:Authority>
                <ulc:Identifier />
              </ulc:AlternativeIdentifier>
              <dl:OrderAllocationDate>2012-03-16T00:00:00-07:00</dl:OrderAllocationDate>
              <dl:OrderReference>
                <udc:DateTime>2012-05-08T05:12:57-07:00</udc:DateTime>
                <udct:DocumentType>PUO</udct:DocumentType>
                <udc:Identifier>X9055411-K2501</udc:Identifier>
              </dl:OrderReference>
              <dl:TotalAmount>
                <ume:Amount>6422.09</ume:Amount>
                <ucr:Currency>USD</ucr:Currency>
              </dl:TotalAmount>
            </dl:OrderInformation>
            <tns:RequestingOrderInformation>
              <udc:BusinessDocumentReference>
                <udct:DocumentType>SAO</udct:DocumentType>
                <udc:Identifier>51548069-1</udc:Identifier>
              </udc:BusinessDocumentReference>
              <tns:IsOrderToBeMerged>0</tns:IsOrderToBeMerged>
              <tns:OrderReference>
                <udc:DateTime>2012-05-08T05:12:57-07:00</udc:DateTime>
                <udct:DocumentType>SNC</udct:DocumentType>
                <udc:Identifier>0</udc:Identifier>
                <udc:Line>1</udc:Line>
                <udc:Revision>1</udc:Revision>
                <udc:SubLine>1</udc:SubLine>
              </tns:OrderReference>
            </tns:RequestingOrderInformation>
            <tns:RequestingOrderInformation>
              <udc:BusinessDocumentReference>
                <udct:DocumentType>SAO</udct:DocumentType>
                <udc:Identifier>51548069-1</udc:Identifier>
              </udc:BusinessDocumentReference>
              <tns:IsOrderToBeMerged>0</tns:IsOrderToBeMerged>
              <tns:OrderReference>
                <udc:DateTime>2012-05-08T05:12:57-07:00</udc:DateTime>
                <udct:DocumentType>SNC</udct:DocumentType>
                <udc:Identifier>0</udc:Identifier>
                <udc:Line>1</udc:Line>
                <udc:Revision>1</udc:Revision>
                <udc:SubLine>2</udc:SubLine>
              </tns:OrderReference>
            </tns:RequestingOrderInformation>
          </tns:ShippingOrderInformation>
        </tns:HeaderInformation>
        <tns:ShipmentInformation>
          <tns:ContainerTotalCount>1</tns:ContainerTotalCount>
          <dl:CustomsInformation>
            <dl:Customs>
              <uc:Country>US</uc:Country>
              <dcst:CustomsType>EXP</dcst:CustomsType>
              <dl:EntryNumber>77-0059951</dl:EntryNumber>
              <dl:Identifier />
            </dl:Customs>
          </dl:CustomsInformation>
          <tns:DeclarationInformation>
            <tns:Declarant>
              <upi:SpecifiedFullPartner schemaVersion="this choice is requried" />
            </tns:Declarant>
            <tns:IsInformationComplete>1</tns:IsInformationComplete>
            <upi:PartnerDescription>
              <upi:FullPartner>
                <uci:ContactInformation>
                  <uci:Contact />
                  <uci:Phone />
                </uci:ContactInformation>
                <ulc:Location>
                  <ulc:AlternativeIdentifier>
                    <ulc:Authority>Cisco Systems</ulc:Authority>
                    <ulc:Identifier>CCI+CI+PL+PL2+SLI</ulc:Identifier>
                  </ulc:AlternativeIdentifier>
                </ulc:Location>
                <upi:PartnerIdentification>
                  <upi:PartnerName>CISCO SYSTEMS G.K.</upi:PartnerName>
                  <ulc:AlternativeIdentifier>
                    <ulc:Authority>Cisco Systems</ulc:Authority>
                    <ulc:Identifier>68268</ulc:Identifier>
                  </ulc:AlternativeIdentifier>
                </upi:PartnerIdentification>
                <ulc:PhysicalAddress>
                  <ulc:AddressLine1>Midtown Tower</ulc:AddressLine1>
                  <ulc:AddressLine2>9-7-1, Akasaka</ulc:AddressLine2>
                  <ulc:AddressLine3>Minato-ku</ulc:AddressLine3>
                  <ulc:AddressLine4 />
                  <ulc:AddressLine5 />
                  <ulc:CityName>Tokyo, 107-6227</ulc:CityName>
                  <uc:Country>JP</uc:Country>
                  <ucs:CountrySubdivision />
                  <ulc:PostalCode />
                  <ulc:PostOfficeBox />
                </ulc:PhysicalAddress>
                <upri:ProcessRoleIdentifier>IMB</upri:ProcessRoleIdentifier>
              </upi:FullPartner>
            </upi:PartnerDescription>
            <upi:PartnerDescription>
              <upi:FullPartner>
                <uci:ContactInformation>
                  <uci:Contact>None</uci:Contact>
                  <uci:Phone />
                </uci:ContactInformation>
                <ulc:Location>
                  <ulc:AlternativeIdentifier>
                    <ulc:Authority>Cisco Systems</ulc:Authority>
                    <ulc:Identifier>CCI+CI+PL+PL2+SLI</ulc:Identifier>
                  </ulc:AlternativeIdentifier>
                </ulc:Location>
                <upi:PartnerIdentification>
                  <upi:PartnerName>CISCO SYSTEMS G.K.</upi:PartnerName>
                  <ulc:AlternativeIdentifier>
                    <ulc:Authority>Cisco Systems</ulc:Authority>
                    <ulc:Identifier />
                  </ulc:AlternativeIdentifier>
                </upi:PartnerIdentification>
                <ulc:PhysicalAddress>
                  <ulc:AddressLine1>C/o Schenker Logistics</ulc:AddressLine1>
                  <ulc:AddressLine2>MIDTOWN TOWER</ulc:AddressLine2>
                  <ulc:AddressLine3>9-7-1, AKASAKA</ulc:AddressLine3>
                  <ulc:AddressLine4 />
                  <ulc:AddressLine5 />
                  <ulc:CityName>MINATO-KU</ulc:CityName>
                  <uc:Country>JP</uc:Country>
                  <ucs:CountrySubdivision>TOKYO</ucs:CountrySubdivision>
                  <ulc:PostalCode>107-6227</ulc:PostalCode>
                  <ulc:PostOfficeBox />
                </ulc:PhysicalAddress>
                <upri:ProcessRoleIdentifier>ITT</upri:ProcessRoleIdentifier>
              </upi:FullPartner>
            </upi:PartnerDescription> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:14:22.120

试试这两个例子：

```
-- Use namespace wildcard
SELECT  x.item.value('.', 'VARCHAR(20)') AS PartnerName 
FROM    @Data.nodes('//*:PartnerName') AS x ( item ) 

-- Specify all namespaces (longhond)
;WITH XMLNAMESPACES(
'urn:rosettanet:specification:interchange:ShippingDocumentationNotification:xsd:schema:02.07' AS tns,
'urn:rosettanet:specification:universal:PartnerIdentification:xsd:schema:01.16' AS upi )           
SELECT  x.item.value('.', 'VARCHAR(20)') AS PartnerName 
FROM    @Data.nodes('/tns:ShippingDocumentationNotification/tns:ShippingBusinessDocument/tns:ShipmentInformation/tns:DeclarationInformation/upi:PartnerDescription/upi:FullPartner/upi:PartnerIdentification/upi:PartnerName') 
        AS x ( item ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:43:35.153

试试这个：

```
;WITH XMLNAMESPACES(
'urn:rosettanet:specification:interchange:ShippingDocumentationNotification:xsd:schema:02.07' AS tns,
'urn:rosettanet:specification:universal:PartnerIdentification:xsd:schema:01.16' AS upi,
'urn:rosettanet:specification:universal:Locations:xsd:schema:01.04' AS ulc )
SELECT 
    pid.c.value('(upi:PartnerName/text())[1]', 'VARCHAR(20)') AS PartnerName,
    pa.c.value('(ulc:AddressLine1/text())[1]', 'VARCHAR(50)') AS AddressLine1,
    pa.c.value('(ulc:AddressLine2/text())[1]', 'VARCHAR(50)') AS AddressLine2,
    pa.c.value('(ulc:AddressLine3/text())[1]', 'VARCHAR(50)') AS AddressLine3,
    pa.c.value('(ulc:AddressLine4/text())[1]', 'VARCHAR(50)') AS AddressLine4,
    pa.c.value('(ulc:AddressLine5/text())[1]', 'VARCHAR(50)') AS AddressLine5,
    pa.c.value('(ulc:CityName/text())[1]', 'VARCHAR(50)') AS CityName,
    pa.c.value('(ulc:Country/text())[1]', 'VARCHAR(50)') AS Country,
    pa.c.value('(ulc:CountrySubdivision/text())[1]', 'VARCHAR(50)') AS CountrySubdivision,
    pa.c.value('(ulc:PostalCode/text())[1]', 'VARCHAR(50)') AS PostalCode,
    pa.c.value('(ulc:PostOfficeBox/text())[1]', 'VARCHAR(50)') AS PostOfficeBox

FROM @Data.nodes('/tns:ShippingDocumentationNotification/tns:ShippingBusinessDocument/tns:ShipmentInformation/tns:DeclarationInformation/upi:PartnerDescription/upi:FullPartner') fp(c)
    CROSS APPLY fp.c.nodes('upi:PartnerIdentification') AS pid(c) 
    CROSS APPLY fp.c.nodes('ulc:PhysicalAddress') AS pa(c) 
```

# arrays - Matlab 查看整个命令窗口

> ID：11956816
> 
> 赞同：1
> 
> 时间：2012-08-14T16:34:28.910
> 
> 标签：arrays, matlab

我试图在命令窗口中显示一个大数组，但它被截断了，因为命令窗口只显示了这么多行。有没有办法更改设置以显示命令窗口中打印的所有内容？

我目前这样称呼显示器：

```
disp(array); 
```

此变量是函数中的临时变量，因此它不会保存到工作区变量中，这就是我寻找打印替代品的原因。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:33:13.637

也来看看吧[`dlmwrite`](http://www.mathworks.se/help/techdoc/ref/dlmwrite.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:39:52.267

[更好的方法是使用fprintf()](http://www.mathworks.com/help/techdoc/ref/fprintf.html)将其保存到文本文件中，而不是弄乱你的命令窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:41:12.390

如果您想查看整个数组，您可以随时将其写入文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T09:04:02.053

如前所述，我个人会使用 FPRINTF，但仅供参考，您可以使用[DIARY](http://www.mathworks.com/help/techdoc/ref/diary.html)命令将所有命令窗口输出输出到文件。这不会被截断。

# ruby-on-rails - 设计基本信息

> ID：11956817
> 
> 赞同：0
> 
> 时间：2012-08-14T16:34:29.620
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, devise

我正在尝试使用设计构建一个应用程序，其中将有多个角色。

这样有用户/管理员。如果我正确理解了文档设计的工作方式，并且您为一个角色构建了一个名为 user 的新模型/控制器，并为管理员构建了一个新模型/控制器。他相当简单，但我遇到的问题是

route.rb 我有以下

```
 devise_for :admins
  devise_for :customers
  resources :events
  root :to => 'events#index' 
```

但是，在控制器中，我将其放置

```
 before_filter :authenticate_customer! 
```

我也尝试关注

```
 before_filter :authenticate_customer! || :authenticate_admin! 
```

但是，如果我登录有管理员，这两种技术仍然会将我重定向到登录页面。我应该怎么做才能说话，除非我创建了两个不同的网站，然后结果证明它是无用的。

这里还有几个问题。当我进入编辑时，它要求我输入 current_password，我怎样才能删除这个功能？

我还有办法停止会员或注册（又名管理员）

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:59:58.297

我现在正在制作一个具有多个角色（管理员、学生、教师等）的应用程序。您需要意识到 Devise 是一种**身份验证**解决方案，它验证用户是真实的。对于基于角色的权限，您需要一个**授权**解决方案，该解决方案授权用户执行某些操作。Devise 支持管理员角色，但除此之外，您还需要一个授权解决方案。

[康康舞](https://github.com/ryanb/cancan/)是我建议的宝石。我在为我的应用程序设置它时使用[了本教程。](http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/)您可能会觉得[本教程](http://www.tonyamoyal.com/2010/09/29/rails-authentication-with-devise-and-cancan-part-2-restful-resources-for-administrators/)的第 2 部分很有趣。设置起来也不是太难（大约 8 个月前我自己也在学习 Rails）。

# c# - 如果现有 XML 文件已经存在，则覆盖它

> ID：11956819
> 
> 赞同：4
> 
> 时间：2012-08-14T16:34:35.303
> 
> 标签：c#, xml, filestream, file-permissions

如果它已经存在，我正在尝试覆盖现有的 xml 文件。

我正在使用下面的代码来检查文件是否存在，如果存在则覆盖它。现有文件是隐藏的，所以我在尝试覆盖之前取消隐藏它。

文件没有发生更改，但是覆盖不起作用。

这是我在下面使用的代码减去我正在编写新的 xml 数据的部分。

```
if(File.Exists(filePath))
{
     File.SetAttributes(filePath,FileAttributes.Normal);
     FileIOPermission filePermission = 
              new FileIOPermission(FileIOPermissionAccess.AllAccess,filePath);

     FileStream fs = new FileStream(filePath, FileMode.Create);

     XmlWriter w = XmlWriter.Create(fs);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:51:23.563

尝试像这样写入文件：

```
if(File.Exists(filePath))
{
     File.SetAttributes(filePath,FileAttributes.Normal);
     FileIOPermission filePermission = 
              new FileIOPermission(FileIOPermissionAccess.AllAccess,filePath);

     using(FileStream fs = new FileStream(filePath, FileMode.Create))
     {
         using (XmlWriter w = XmlWriter.Create(fs))
         {
             w.WriteStartElement("book");
             w.WriteElementString("price", "19.95");
             w.WriteEndElement();
             w.Flush();
         }
     }     
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:13:51.323

正如@Tommy 提到的 - 我看不到代码，`FileStream`我认为在 using 语句中包装外部资源总是更好。除此之外，是否会发生以下顺序？

1.  您第一次创建 xml 文件
2.  您尝试在同一会话中重新创建相同的文件。
3.  `FileStream`从 p.1 开始仍然锁定文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T15:07:56.187

我这样做了，无论`XDocument`您使用哪个，它都能保持动态：

```
private void WriteToXml(XDocument xDoc, string filePath)
{
    // Gets the root XElement of the XDocument
    XElement root = xDoc.Root;

    // Using a FileStream for streaming to a file:
    // Use filePath.
    // If it's a new XML doc then create it, else open it.
    // Write to file.
    using (FileStream writer = 
           new FileStream(filePath, FileMode.OpenOrCreate, FileAccess.Write))
    {
        // For XmlWriter, it uses the stream that we created: writer.
        using (XmlWriter xmlWriter = XmlWriter.Create(writer))
        {
            // Creates a new XML file. The false is for "StandAlone".
            xmlWriter.WriteStartDocument(false);

            // Writes the root XElement Name.
            xmlWriter.WriteStartElement(root.Name.LocalName);

            // Foreach parent XElement in the Root...
            foreach (XElement parent in root.Nodes())
            {
                // Write the parent XElement name.
                xmlWriter.WriteStartElement(parent.Name.LocalName);

                // Foreach child in the parent...
                foreach (XElement child in parent.Nodes())
                {
                    // Write the node with XElement name and value.
                    xmlWriter.WriteElementString(child.Name.LocalName, child.Value);
                }
                // Close the parent tag.
                xmlWriter.WriteEndElement();
            }
            // Close the root tag.
            xmlWriter.WriteEndElement();
            // Close the document.
            xmlWriter.WriteEndDocument();

            // Good programming practice, manually flush and close all writers
            // to prevent memory leaks.
            xmlWriter.Flush();
            xmlWriter.Close();
        }
        // Same goes here.
        writer.Flush();
        writer.Close();
    }
} 
```

我希望这有帮助！

# ios - 在子 UITableView 中选择选项并返回父 UiTableView 的简单方法

> ID：11956820
> 
> 赞同：0
> 
> 时间：2012-08-14T16:34:37.903
> 
> 标签：ios, uitableview

我正在尝试实现一个选择系统，用户可以单击 UITableView 中名为“选择水果”的单元格，然后将您带到另一个选择了水果的 UiTableView。选择水果后，我希望用户返回到原来的 UiTableView，但这次单元格的标题是“Apple or Orange”而不是“Select Fruit”。

我知道如何通过使用单例等来实现它:(但我在想是否有更简单的方法。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:48:17.197

这很简单

1.  把你的 UITableView 和水果放在一个新的 UIViewController 子类中，我们称之为 FruitSelectionViewController。还要向它添加一个名为“delegate”或“parent”或适当的成员变量。

2.  加载时，在您的第一个视图控制器（保存“选择水果”单元格的那个）中创建水果控制器的实例。还将这个第一个 viewcontroller 设置为新创建的 FruitSelectionViewController 的父级或委托。

3.  当用户单击第一个视图控制器中的“选择水果”单元格时，将 FruitSelectionViewController 显示为模态视图控制器（使用 presentModalViewController）

4.  当用户选择一个水果时，关闭 modalviewcontroller（使用dismissModalViewController），并将单元格的文本更改为所选水果的名称。（您可以通过通过您在步骤 2 中设置的父成员访问的方法将此值报告回第一个视图控制器）

# javascript - 加载内容的 HTML 顺序和 JavaScript

> ID：11956822
> 
> 赞同：0
> 
> 时间：2012-08-14T16:34:43.627
> 
> 标签：javascript, jquery, html

我有一个注册页面，有的JS只针对这个页面，有的JS针对3个不同的页面。所以，这个页面的 JS 只有我写了 inside 标签，第二个 in 和 external 文件，它包含在 body 标签中

代码示例

```
HTML
...
<script type="text/javascript" scr="src.js"></script>
<script type="text/javascript">
//some JS and jQuery code
</script> 
```

浏览器按什么顺序加载网页？如果它正在读取 HTML，当它找到第一个脚本时是否加载此脚本，等到它完全加载然后继续读取 HTML？

因为在内部 JS 中我使用了外部脚本中的一些函数，例如 jQuery $(document).ready() 函数，我想知道，如果这个事件在 DOM 就绪时触发，所以这意味着该函数是外部 JavaScript ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T16:41:40.887

现代浏览器在读取**外部标签**（带有`src`属性的标签）时，会**异步**下载此脚本，即在下载脚本时继续读取/解析 HTML。

但是，浏览器会阻止所有后续脚本的执行（注意不是下载），想想一个**脚本执行队列**，所有脚本都会排入队列并一一执行，但下载是异步的。

早期的浏览器（主要是 IE6 和 IE7）不同，它们会阻塞 HTML 解析过程，等待脚本下载并执行，然后继续解析剩余的 HTML。

总结：**下载**和**执行**是脚本的不同阶段，现代浏览器阻塞**执行**阶段，**下载**可以是异步和并行的以提高性能，早期浏览器阻塞**下载**阶段，这使得页面解析效率降低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:38:17.060

`wait until he isn't completely loaded and continue reading HTML`

这不是它的工作方式，页面是异步加载的。

`in internal JS I use some functions from external script, and in internal script is jQuery $(document).ready() function, and I want to know, if this event is triggered, when DOM is ready, so this mean even external JavaScript?`

当调用附加到文档就绪事件时，它们会按照添加顺序附加到队列中，然后按该顺序调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:38:47.100

每当它到达一个脚本标签时，浏览器将停止加载其他内容，直到它被解释。这意味着它会阻塞（等待）并且在完成之前不会开始获取图像或其他内容。

只要代码存在，在你调用它（比如函数调用）之前，它就不会给你任何错误。只要定义了 $(document).ready() 函数，在使用它之前，所有从 $(document).ready() 调用的代码都应该是安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:38:31.657

是的，如果触发了*DOM 就绪*事件，则意味着您的所有 JavaScript 都已加载并解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T16:44:28.273

浏览器将首先解析头部。它将解析 html 中的 html `<head>`，并执行它遇到的任何脚本。这将阻止页面的加载。在 之后`<head>`，它将`<body>`以类似的方式解析 。`onload`这就是为什么如果你想访问 dom将你的代码放在一个函数中并调用它很重要的原因。

希望这可以帮助！如果您需要其他任何内容，请在下面发表评论。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T16:44:44.013

脚本正在按照给出的顺序加载。所以在你的情况下，你的内联脚本

```
<script type="text/javascript">
//some JS and jQuery code
</script> 
```

**可以**使用您包含的脚本中定义的对象`"src.js"`。

您不能在创建 DOM 对象之前对其进行操作。

```
<body>
  <div id="div1"></div>

  <script>
    // this code can work with div1
    // but cannot work with div2
  </script>

  <div id="div2"></div>
</body> 
```

因此，如果您的脚本适用于 DOM，您可以：

*   将其放在末尾`<body>`（仅当它是内联脚本时）
*   仅在构建整个 DOM 后调用它：

    `<body onload="myFunctionThatManipulatesDOM();">`

当然，第二种方式更干净。将您的脚本包含在该部分中，然后在事件`<head>`加载页面后启动它们。`body.onload`

# json - AngularJS 拦截所有 $http JSON 响应

> ID：11956827
> 
> 赞同：49
> 
> 时间：2012-08-14T16:35:06.977
> 
> 标签：json, angularjs, interceptor

我有一个使用 AngularJS 构建的应用程序和一个以 JSON 形式提供所有请求的服务器端后端。每个请求都包装在一个 JSON 容器中，该容器包含一个数据变量，其中包含特定于请求的数据。其他数据，用于在应用程序中保持状态和控制，检查错误和成功消息，并检查会话标志。所有这些其他变量都随每个请求一起提供，并且在数据变量之前首先检查。

现在我有一种方法可以先检查 JSON 响应的内容，然后再检查数据本身。

```
$http.get('something.json').success(function(response) {
   var data = examineJSONResponse(response);
   //do the data stuff
}); 
```

这有效，examineJSONResponse 会查看代码，如果有问题，它会抛出异常并使用 window.location.href 重新加载页面。

有什么方法可以在 AngularJS 中自动执行此操作，以便每次进行 $http 调用时都会对其进行检查并仅将数据变量内容作为 JSON 响应返回？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-14T17:38:45.490

`$httpProvider.interceptors`您可以通过使用 Angular 1.1.4+添加拦截器来拦截响应（请参阅[此处](https://code.angularjs.org/1.2.18/docs/api/ng/service/$http)的文档搜索拦截器）。

对于像 json 这样的特定内容类型，即使调用成功，您也可能会拒绝更改或抛出异常。您也可以在此处修改`response.data`将传递给您的控制器代码的内容：

```
myModule.factory('myHttpInterceptor', function ($q) {
    return {
        response: function (response) {
            // do something on success
            if(response.headers()['content-type'] === "application/json; charset=utf-8"){
                // Validate response, if not ok reject
                var data = examineJSONResponse(response); // assumes this function is available

                if(!data)
                    return $q.reject(response);
            }
            return response;
        },
        responseError: function (response) {
            // do something on error
            return $q.reject(response);
        }
    };
});
myModule.config(function ($httpProvider) {
    $httpProvider.interceptors.push('myHttpInterceptor');
}); 
```

* * *

**注意：**这是 1.1.4 之前版本的原始答案（`responseInterceptors`Angular 1.1.4 已弃用）：

也许有更好的方法，但我认为您可以使用 http 响应拦截器（[在此处](http://docs.angularjs.org/api/ng.$http)描述）（对于特定的内容类型，如 json）执行类似于[这篇文章](https://stackoverflow.com/questions/11786764/track-to-see-when-a-view-changes-in-angularjs)的操作，即使调用成功，您也可能拒绝更改或抛出异常. 您也可以在此处修改将传递给您的控制器代码的内容。`response.data`

```
myModule.factory('myHttpInterceptor', function ($q) {
    return function (promise) {
        return promise.then(function (response) {
            // do something on success
            if(response.headers()['content-type'] === "application/json; charset=utf-8"){
                // Validate response if not ok reject
                var data = examineJSONResponse(response); // assumes this function is available

                if(!data)
                    return $q.reject(response);
            }
            return response;
        }, function (response) {
            // do something on error
            return $q.reject(response);
        });
    };
});
myModule.config(function ($httpProvider) {
    $httpProvider.responseInterceptors.push('myHttpInterceptor');
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T02:28:25.297

另一种解决方案是创建一个服务并在 $http 变量周围使用它。

```
angular.module('App', [])
  .factory('myHttp',['$http',function($http) {
    return function(url, success, failure) {
      $http.get(url).success(function(json) {
          var data = examineJSONResponse(json);
          data && data.success ? success() : failure();
        }).error(failure);
      );
    }
}]); 
```

现在可以这样称呼：

```
myHttp(url, onSuccess, onFailure); 
```

# sql - SQL Server 联合功能？

> ID：11956828
> 
> 赞同：1
> 
> 时间：2012-08-14T16:35:12.407
> 
> 标签：sql, sql-server-2005

我有一个关于我尝试在 sql server 中组合两个表的问题......

我有一个大约有 30 列的表（表 a），还有一个大约有 5 列的表（表 b），这 5 个表存在于 30 列的表中。我希望能够将表 b 添加到表 a 的末尾，并且只对新行中不存在的列使用 0 值。

有没有办法做到这一点？显然，如果我想将其他列保留在表 a 中，则常规联合将不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:36:45.270

基本思想是这样的，假设`col3`不存在于`TableB`：

```
select col1, col2, col3 from TableA

union all

select col1, col2, 0 as col3 from TableB 
```

请注意保持每列中的数据类型相同。

要在最后保留`TableB`记录，请执行以下操作：

```
select col1, col2, col3
from (
    select 1 as Rank, col1, col2, col3 from TableA

    union all

    select 2 as Rank, col1, col2, 0 as col3 from TableB
) a
order by Rank 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:52:30.733

您可以将行插入：

```
insert into A(col1, col2, col3, col4, col5)
    select col1, col2, col3, col4, col5
    from B 
```

这将为其余列应用默认值。默认值通常为 NULL，但可以在 create table 语句中更改。为了获得 0，您必须包含列并指定值：

```
insert into A(col1, col2, col3, col4, col5, col6 . . . col30)
    select col1, col2, col3, col4, col5, 0 . . . 0
    from B 
```

# asp.net-mvc - 如何通过 ActionLink 传递模型值

> ID：11956831
> 
> 赞同：2
> 
> 时间：2012-08-14T16:35:19.560
> 
> 标签：asp.net-mvc

我有一个简单的模型来模拟车辆实体。它具有属性：模型制作颜色注册板

在创建视图上，我希望用户能够使用注册板执行服务器查找以自动填写型号/品牌/颜色信息。

因此，我正在尝试创建一个像这样的操作链接：

```
@Html.ActionLink("Look up registration", "RegLookup", "Vehicle", Model.Registration) 
```

RegLookup 是车辆控制器中的一个 get ActionResult 方法，该方法会根据传递给它的注册字段查找模型/品牌/颜色信息。品牌/型号/颜色信息是从单独的数据库中检索的。

然而，目前在渲染视图时——甚至在到达操作链接之前——抛出一个异常，表明模型为空。

我想要传递的实际上是代表注册的文本框中的值：

```
@Html.EditorFor(model => model.Registration) 
```

我如何传递这个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:45:27.480

在您的 CreateView 中，通常您的模型属性应该大部分是空的，除了一些预先填充的值，如 dropdowns 。您应该使用的是使用 jQuery ajax 对操作方法进行异步调用，该方法根据车牌返回相关数据并将其填写在表单中

您可以像这样保留操作链接

```
@Html.ActionLink("Look up registration", "RegLookup", "Vehicle",
                                                      new {@id="check"},null) 
```

并将一个javascript函数附加到它的click事件以进行ajax调用

```
$(function(){

  $("#check").click(function(e){
    e.preventDefault();
    var item=$(this);
    var regPlateVal=$("#RegistrationPlate").val();
    $.getJSON(item.attr("href")+"?registration="+regPlateVal,function(data){
       if(data.Status=="success")
       {
         $("#Color").val(data.Color);
         $("#Model").val(data.Model);
       }
    });
  });

}); 
```

假设您的`RegLookUp`操作方法接受一个参数（带有名称`registration`）并以`JSON`如下格式返回数据

```
{
  "Status": "success",
   "Color": "Red",
   "Model": "2011"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:45:37.870

您需要在查询字符串中传递属性：

```
@Html.ActionLink(
    "Look up registration", 
    "RegLookup", 
    "Vehicle", 
    new {
        registration = Model.Registration
    }
) 
```

然后控制器动作可以采用这个`registration`参数：

```
public ActionResult RegLookup(string registration)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:51:58.113

你需要做一个普通的 POST 或 AJAX 一个来将车牌号发送到服务器。在您看来，在设计时您没有用户输入的值。

# less - LESS Mixin 模板？

> ID：11956832
> 
> 赞同：1
> 
> 时间：2012-08-14T16:35:22.020
> 
> 标签：less

我很好奇是否有人知道 LESS 的任何带有 mixins 的模板，让您开始使用有用的 mixins（有点像 Sublime Text 中的片段）。我已经创建了很多类似[here](http://css3please.com/)的 mixin ，所以如果它们已经存在，创建我自己的相同可能是浪费时间。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:06:26.537

[我从http://designshack.net/articles/css/10-less-css-examples-you-should-steal-for-your-projects/](http://designshack.net/articles/css/10-less-css-examples-you-should-steal-for-your-projects/)复制了一些到我自己的项目中。

这似乎有一个文件要下载： http: [//lesselements.com/](http://lesselements.com/)（我还没用过这个）

# vba - MS Access 中的进度条

> ID：11956834
> 
> 赞同：28
> 
> 时间：2012-08-14T16:35:24.767
> 
> 标签：vba, ms-access

我有一个在 Microsoft Access 2010 中运行的查询，它需要 30 多分钟才能正常运行。我想向最终用户展示一些查询状态。进度条会很好，但不是必需的。访问似乎线程很差，并且在执行查询期间锁定得很紧，否定了我尝试的任何更新。虽然我宁愿抽出 VS 并编写自己的应用程序来做到这一点，但我不得不使用 Access。

我曾经从填充数据库的批处理脚本中运行它，但我希望它在 Access 中完全独立。具体来说，“查询”实际上是一个 ping 一系列主机的 VBA 脚本。所以我不太关心优化时间本身，而只是让最终用户知道它没有被锁定。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-14T16:52:33.893

我经常做这样的事情

```
Dim n As Long, db As DAO.Database, rs As DAO.Recordset

'Show the hour glass
DoCmd.Hourglass True

Set db = CurrentDb
Set rs = db.OpenRecordset("SELECT ...")

rs.MoveLast 'Needed to get the accurate number of records

'Show the progress bar
SysCmd acSysCmdInitMeter, "working...", rs.RecordCount

rs.MoveFirst
Do Until rs.EOF
    'Do the work here ...

    'Update the progress bar
    n = n + 1
    SysCmd acSysCmdUpdateMeter, n

    'Keep the application responding (optional)
    DoEvents

    rs.MoveNext
Loop
rs.Close: Set rs = Nothing
db.Close: Set db = Nothing

'Remove the progress bar
SysCmd acSysCmdRemoveMeter

'Show the normal cursor again
DoCmd.Hourglass False 
```

注意：当然，您必须以编程方式完成工作才能使其正常工作。您无法在 Access 中查看代码或类似内容中的运行查询。可能您可以将慢速查询的工作拆分成更小的部分，以便有机会更新进度条。但是你总是可以展示沙漏；这告诉用户正在发生一些事情。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-01-30T20:34:15.627

如果其他人可能觉得这很有用，这里是我为此目的编写的一个类。我一直在我的 Access 开发项目中使用它。只需将其放入您的项目中名为 的类模块`clsLblProg`中，然后像这样使用它：

![在此处输入图像描述](../Images/72b45b50f7c86358c846046847411972.png)

这会产生一个不错的小进度条：

![在此处输入图像描述](../Images/f24a769dcda41b1e24c6cc817b73b6fd.png)

在您的表单上，您只需要三个标签。将背面标签设置为所需大小，并将其他两个隐藏。其余的由班级完成。

![在此处输入图像描述](../Images/eef7812e19e4741b8292f7902ef3e23b.png)

这是代码`clsLblProg`：

```
Option Compare Database
Option Explicit

' By Adam Waller
' Last Modified:  12/16/05

'Private Const sngOffset As Single = 1.5    ' For Excel
Private Const sngOffset As Single = 15      ' For Access

Private mdblMax As Double   ' max value of progress bar
Private mdblVal As Double   ' current value of progress bar
Private mdblFullWidth As Double ' width of front label at 100%
Private mdblIncSize As Double
Private mblnHideCap As Boolean  ' display percent complete
Private mobjParent As Object    ' parent of back label
Private mlblBack As Access.Label     ' existing label for back
Private mlblFront As Access.Label   ' label created for front
Private mlblCaption As Access.Label ' progress bar caption
Private mdteLastUpdate As Date      ' Time last updated
Private mblnNotSmooth As Boolean    ' Display smooth bar by doevents after every update.

' This class displays a progress bar created
' from 3 labels.
' to use, just add a label to your form,
' and use this back label to position the
' progress bar.

Public Sub Initialize(BackLabel As Access.Label, FrontLabel As Access.Label, CaptionLabel As Access.Label)

    On Error GoTo 0    ' Debug Mode

    Dim objParent As Object ' could be a form or tab control
    Dim frm As Form

    Set mobjParent = BackLabel.Parent
    ' set private variables
    Set mlblBack = BackLabel
    Set mlblFront = FrontLabel
    Set mlblCaption = CaptionLabel

    ' set properties for back label
    With mlblBack
        .Visible = True
        .SpecialEffect = 2  ' sunken. Seems to lose when not visible.
    End With

    ' set properties for front label
    With mlblFront
        mdblFullWidth = mlblBack.Width - (sngOffset * 2)
        .Left = mlblBack.Left + sngOffset
        .Top = mlblBack.Top + sngOffset
        .Width = 0
        .Height = mlblBack.Height - (sngOffset * 2)
        .Caption = ""
        .BackColor = 8388608
        .BackStyle = 1
        .Visible = True
    End With

    ' set properties for caption label
    With mlblCaption
        .Left = mlblBack.Left + 2
        .Top = mlblBack.Top + 2
        .Width = mlblBack.Width - 4
        .Height = mlblBack.Height - 4
        .TextAlign = 2 'fmTextAlignCenter
        .BackStyle = 0 'fmBackStyleTransparent
        .Caption = "0%"
        .Visible = Not Me.HideCaption
        .ForeColor = 16777215   ' white
    End With
    'Stop

    Exit Sub

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Initialize", Erl
            Resume Next ' Resume at next line.
    End Select

End Sub

Private Sub Class_Terminate()

    On Error GoTo 0    ' Debug Mode

    On Error Resume Next
    mlblFront.Visible = False
    mlblCaption.Visible = False
    On Error GoTo 0    ' Debug Mode

    Exit Sub

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Class_Terminate", Erl
            Resume Next ' Resume at next line.
    End Select

End Sub

Public Property Get Max() As Double

    On Error GoTo 0    ' Debug Mode

    Max = mdblMax

    Exit Property

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Max", Erl
            Resume Next ' Resume at next line.
    End Select

End Property

Public Property Let Max(ByVal dblMax As Double)

    On Error GoTo 0    ' Debug Mode

    mdblMax = dblMax

    Exit Property

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Max", Erl
            Resume Next ' Resume at next line.
    End Select

End Property

Public Property Get Value() As Double

    On Error GoTo 0    ' Debug Mode

    Value = mdblVal

    Exit Property

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Value", Erl
            Resume Next ' Resume at next line.
    End Select

End Property

Public Property Let Value(ByVal dblVal As Double)

    On Error GoTo 0    ' Debug Mode

    'update only if change is => 1%
    If (CInt(dblVal * (100 / mdblMax))) > (CInt(mdblVal * (100 / mdblMax))) Then
        mdblVal = dblVal
        Update
    Else
        mdblVal = dblVal
    End If

    Exit Property

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Value", Erl
            Resume Next ' Resume at next line.
    End Select

End Property

Public Property Get IncrementSize() As Double

    On Error GoTo 0    ' Debug Mode

    IncrementSize = mdblIncSize

    Exit Property

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "IncrementSize", Erl
            Resume Next ' Resume at next line.
    End Select

End Property

Public Property Let IncrementSize(ByVal dblSize As Double)

    On Error GoTo 0    ' Debug Mode

    mdblIncSize = dblSize

    Exit Property

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "IncrementSize", Erl
            Resume Next ' Resume at next line.
    End Select

End Property

Public Property Get HideCaption() As Boolean

    On Error GoTo 0    ' Debug Mode

    HideCaption = mblnHideCap

    Exit Property

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "HideCaption", Erl
            Resume Next ' Resume at next line.
    End Select

End Property

Public Property Let HideCaption(ByVal blnHide As Boolean)

    On Error GoTo 0    ' Debug Mode

    mblnHideCap = blnHide

    Exit Property

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "HideCaption", Erl
            Resume Next ' Resume at next line.
    End Select

End Property

Private Sub Update()

    On Error GoTo 0    ' Debug Mode

    Dim intPercent As Integer
    Dim dblWidth As Double
    'On Error Resume Next
    intPercent = mdblVal * (100 / mdblMax)
    dblWidth = mdblVal * (mdblFullWidth / mdblMax)
    mlblFront.Width = dblWidth
    mlblCaption.Caption = intPercent & "%"
    'mlblFront.Parent.Repaint    ' may not be needed

    ' Use white or black, depending on progress
    If Me.Value > (Me.Max / 2) Then
        mlblCaption.ForeColor = 16777215   ' white
    Else
        mlblCaption.ForeColor = 0  ' black
    End If

    If mblnNotSmooth Then
        If mdteLastUpdate <> Now Then
            ' update every second.
            DoEvents
            mdteLastUpdate = Now
        End If
    Else
        DoEvents
    End If

    Exit Sub

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Update", Erl
            Resume Next ' Resume at next line.
    End Select

End Sub

Public Sub Increment()

    On Error GoTo 0    ' Debug Mode

    Dim dblVal As Double
    dblVal = Me.Value
    If dblVal < Me.Max Then
        Me.Value = dblVal + 1
        'Call Update
    End If

    Exit Sub

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Increment", Erl
            Resume Next ' Resume at next line.
    End Select

End Sub

Public Sub Clear()

    On Error GoTo 0    ' Debug Mode

    Call Class_Terminate

    Exit Sub

ErrHandler:

    Select Case Err.Number
        Case Else
            LogErr Err, "clsLblProg", "Clear", Erl
            Resume Next ' Resume at next line.
    End Select

End Sub

Private Function ParentForm(ctlControl As Control) As String

    ' returns the name of the parent form
    Dim objParent As Object

    Set objParent = ctlControl

    Do While Not TypeOf objParent Is Form
       Set objParent = objParent.Parent
    Loop

    ' Now we should have the parent form
    ParentForm = objParent.Name

End Function

Public Property Get Smooth() As Boolean
    ' Display the progress bar smoothly.
    ' True by default, this property allows the call
    ' to doevents after every increment.
    ' If False, it will only update once per second.
    ' (This may increase speed for fast progresses.)
    '
    ' negative to set default to true
    Smooth = mblnNotSmooth
End Property

Public Property Let Smooth(ByVal IsSmooth As Boolean)
    mblnNotSmooth = Not IsSmooth
End Property

Private Sub LogErr(objErr, strMod, strProc, intLine)
    ' For future use.
End Sub 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-08T16:41:34.960

只需将我的部分添加到上述集合中，以供将来的读者使用。

如果您追求更少的代码并且可能是酷的用户界面。查看我的[GitHub 以获取 VBA 的进度条](https://github.com/krishKM/VBA_TOOLS/blob/master/README.md#show-cool-progressbar) [![在此处输入图像描述](../Images/d379e4cda4e80aeeec72b19bf4159b5c.png)](https://i.stack.imgur.com/M7CHk.png)

一个可定制的：

[![在此处输入图像描述](../Images/3dc7709d60c8cffe2ddf56e318c0f92c.png)](https://i.stack.imgur.com/bGvul.png)

该 Dll 被认为适用于 MS-Access，但应在所有 VBA 平台上工作，只需稍作改动。所有代码都可以在示例数据库中找到。

该项目目前正在开发中，并未涵盖所有错误。所以期待一些！

您应该担心第 3 方 dll，如果您担心，请在实施 dll 之前随意使用任何受信任的在线防病毒软件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-04T09:39:45.893

由于可用控件的问题，我使用 2 个矩形创建了一个自制的进度条。一个边框和实心条，随着事情的进展而调整大小。边框前面的进度矩形。使用

```
If pbar Is Nothing Then
    Set pbar = New pBar_sub
    pbar.init Me.Progressbar_border, Me.ProgressBar_Bar
End If
pbar.value = 0
pbar.show
pbar.max = 145 ' number of interations
...
...
Do While Not recset.EOF
    count = count + 1
    pbar.value = count
'   get next 
    recset.MoveNext
Loop 
```

可以将状态行与通知正在处理的元素的进度条相关联。赞：123\. District SomeWhere，销售代理 WhomEver

======== 进度条替代 pBar_sub ===============

```
Option Compare Database
Option Explicit

Dim position    As Long
Dim maximum     As Long
Dim increment   As Single
Dim border      As Object
Dim bar         As Object

Sub init(rect As Object, b As Object)
    Set border = rect
    Set bar = b
    bar.width = 0
    hide
End Sub
Sub hide()
    bar.visible = False
    border.visible = False
End Sub
Sub show()
    bar.visible = True
    border.visible = True
End Sub
Property Get Max() As Integer
    Max = maximum
End Property
Property Let Max(val As Integer)
    maximum = val
    increment = border.width / val
End Property
Property Get value() As Integer
    value = position
End Property
Property Let value(val As Integer)
    position = val
    bar.width = increment * value
End Property 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-29T09:44:51.527

更新进度条 (acSysCmdUpdateMeter) 后使用命令**DoEvents 。**

如果有大量记录，则仅每 x 次执行一次 DoEvents，因为这会稍微减慢您的应用程序的速度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-18T12:02:15.000

这不是一种专业的方式，但如果你喜欢它可以应用。如果您使用的是表单，您可以在方便的位置放置一个默认为绿色的小文本框。

假设文本框名称为`TxtProcessing`，
属性可以如下。

```
Name : TxtProcessing
Visible : Yes
Back color : Green
Locked: Yes
Enter Key Behavior : Default 
```

1) 在您的 VB 脚本中，您可以将`Me.TxtProcessing.BackColor = vbRed`红色表示为进程中的任务。
2) 你可以编写所有的脚本
3) 最后你可以把`Me.TxtProcessing.BackColor = vbGreen`

```
Me.TxtProcessing.BackColor = vbRed
Me.TxtProcessing.SetFocus
Me.Refresh

Your Code here.....

Me.TxtProcessing.BackColor = vbGreen
Me.TxtProcessing.SetFocus 
```

:-) 有趣但目的达到了。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-09-06T08:45:28.400

首先在 MS Access 窗体中拖动进度条控件，然后将进度条的名称更改为`aa`.

然后转到代码`form property`中的计时器`:write`

```
me.aa.value=me.aa.value+20 
```

时间间隔 300 根据您的选择。运行表单你会看到进度条

# c# - 子控件后的C#进程快捷键

> ID：11956836
> 
> 赞同：1
> 
> 时间：2012-08-14T16:35:29.607
> 
> 标签：c#, winforms, events, keyboard-shortcuts

我的**WinForms**应用程序中有快捷键，但我想在子控件**之后处理它们。**

我在主控件中使用 KeyDown 事件，'g' 键用于显示网格。但是在主控件内的编辑框中，当我按下“g”键时，会显示网格并且编辑框会收到“g”。如果我设置快捷键处理的“g”键，编辑框不会收到“g”键。

=> 我的目标是让所有的键首先由孩子处理，然后由主窗口处理，如果还没有处理的话。

这是一个代码片段：

```
public ShortCutManager(Control Control, string Title)
{
    _Control = Control;
    _Control.KeyDown += OnKeyDown;
}

private void OnKeyDown(object Sender, KeyEventArgs KeyEventArgs)
{               
    if (KeyEventArgs.KeyCode == Keys.G)
    {
        // What I need
        SendKeyEventToChildren(KeyEventArgs);

        if (KeyEventArgs.Handled == false)
        {
            DoShortcutCommand();
            KeyEventArgs.Handled = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:03:40.917

我正在做的是覆盖我的表单中的[`ProcessDialogKey`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.processdialogkey.aspx)，类似于[此 SO 帖子](https://stackoverflow.com/questions/3300977/arrow-key-events-not-arriving)中描述的方法：

```
protected override bool ProcessDialogKey(Keys keyData)
{
    // Example: Handle Ctrl+C.
    if ((keyData & Keys.Control) == Keys.Control && (keyData & Keys.C) == Keys.C)
    {
        // Do some processing here...

        return true;
    }

    return base.ProcessDialogKey(keyData);
} 
```

# grails - 使用 grails spring security 控制直接图像访问

> ID：11956837
> 
> 赞同：0
> 
> 时间：2012-08-14T16:35:37.633
> 
> 标签：grails, spring-security, tomcat7

我的图像文件夹中有一个子目录，它是网络驱动器的符号链接。这使我们能够将数千张图像存储在更适合的地方。

如果经过身份验证的用户访问了加载这些图像的页面，则未经身份验证的用户可以从浏览器访问图像的直接 url 路径。

例如，如果图像路径是： [http ://some.server.com:8080/SomeApp/static/images/gpfscc/data_storage/frameburglar/img/33/1761/some_image.jpg](http://some.server.com:8080/SomeApp/static/images/gpfscc/data_storage/frameburglar/img/33/1761/some_image.jpg)

全世界都可以访问。

我尝试使用 staticRules、悲观锁定和interceptUrlMap 以几种不同的方式对其进行配置。

我当前的 config.groovy 看起来像这样：

```
//Too ristrictive? Could not get past login
//grails.plugins.springsecurity.rejectIfNoRule = true

//grails.plugins.springsecurity.controllerAnnotations.staticRules = [
//        '/images/gpfscc/**': ['IS_AUTHENTICATED_REMEMBERED'],
//        '/static/images/gpfscc/**': ['IS_AUTHENTICATED_REMEMBERED']
//
//]

grails.plugins.springsecurity.interceptUrlMap = [
//        '/images/gpfscc/**': ['IS_AUTHENTICATED_REMEMBERED'],
//        '/static/images/gpfscc/**': ['IS_AUTHENTICATED_REMEMBERED'],
        '/secUser/**':         ['IS_AUTHENTICATED_REMEMBERED'],
        '/secUserSecRole/**':     ['IS_AUTHENTICATED_REMEMBERED'],
        '/trip/**':         ['IS_AUTHENTICATED_REMEMBERED'],
        '/collection/**':   ['IS_AUTHENTICATED_REMEMBERED'],
        '/secRole/**':         ['IS_AUTHENTICATED_REMEMBERED'],
        '/vehicle/**':      ['IS_AUTHENTICATED_REMEMBERED'],
        '/login/**':        ['IS_AUTHENTICATED_ANONYMOUSLY'],
        '/logout/**':       ['IS_AUTHENTICATED_ANONYMOUSLY'],
        '/*':               ['IS_AUTHENTICATED_ANONYMOUSLY']
] 
```

最终结果是控制器和页面应用了适当的安全性，但“静态”资源永远不会检查身份验证。

我需要保证，如果您提前知道该网址，则您无法在未登录和正确组的情况下访问该图像。

谢谢你。

# javascript - 在 setTimeout() 完成之前忽略新输入

> ID：11956838
> 
> 赞同：0
> 
> 时间：2012-08-14T16:35:47.417
> 
> 标签：javascript, settimeout

我有一个 javascript 函数，当您将鼠标悬停在图像上时，它会将该图像的 id 更改为具有关键帧动画的图像，因此它会飞来飞去 10 秒，然后回到它开始的位置。此时，您应该能够再次将鼠标悬停，并且它以相同的方式飞行。

我的问题是如何让它在它飞来飞去时忽略更多的鼠标悬停？我现在有这样的事情：

```
<script>
  function fly(element){
    element.id="flynow";
    setTimeout( function(){stopflying(element)}, 10000 );
  }

  function stopflying(element){ 
    element.id="";
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:38:02.667

我为此编写了自己的测试函数，虽然我没有使用与您相同的输出方法，但 onmouseover 事件应该是相同的。

我所做的只是创建一个全局变量来存储一个布尔值。这告诉您是否在飞行途中。我假设您一次只希望 1 个元素飞行，对吗？

我的代码：

```
var isFlying = false;
function fly(element){
    if(!flying){
        flying=true;
        element.id="flynow";
        setTimeout(function(){stopflying(element)} , 10000);
    }
}

function stopflying(){
    flying=false;
    element.id="";
} 
```

这应该只允许一次飞行 1 个元素，而不管 onmouseover 会被调用多少次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T21:43:42.463

如果您也没有调整超时毫秒，它似乎已经忽略了超时。

例如：

```
setTimeout("smoothscroll" , 1000)
setTimeout("smoothscroll" , 1000)
setTimeout("smoothscroll" , 1000)
setTimeout("smoothscroll" , 1000)
setTimeout("smoothscroll" , 1000) 
```

不会间隔 1 秒触发五个函数，而是同时触发所有函数，并且在 1 秒内它们将同时响应，看起来好像超时已被忽略。

```
setTimeout("smoothscroll" , 1000)
setTimeout("smoothscroll" , 2000)
setTimeout("smoothscroll" , 3000)
setTimeout("smoothscroll" , 4000)
setTimeout("smoothscroll" , 5000) 
```

将立即解雇它们，但它们会间隔一秒钟做出响应，这是预期的结果。

这种现象是在循环中创建还是作为单个命令创建是无关紧要的。

希望这可以帮助。

尼科

# ssl - 如何通过 Spring Security 使用 ssl 证书进行身份验证

> ID：11956842
> 
> 赞同：1
> 
> 时间：2012-08-14T16:35:56.697
> 
> 标签：ssl, spring-security, ldap, x509

我正在开发一个使用 spring 安全性来实现 ldap 目的的 grails web 应用程序。我们需要设置一种情况，而不是使用用户输入用户名和密码证书来代替（或者如果没有找到证书，甚至回滚到用户名和密码将是理想的设置）。我在网上查过，一直在尝试无济于事，我就是无法让它工作。不确定我是否没有正确生成证书，或者我在 spring security 中的配置设置是否错误。有人可以帮忙吗？谢谢

编辑：我的 Config.groovy 文件看起来像这样

```
System.setProperty("javax.net.ssl.trustStore","/Library/Java/JavaVirtualMachines/1.6.0_31-b04-415.jdk/Contents/Home/lib/security/cacerts")
 System.setProperty("javax.net.ssl.trustStorePassword","changeit")

 grails.plugins.springsecurity.ldap.context.managerDn = 'cn=administrator,cn=users,dc=ldap,dc=example,dc=com'
 grails.plugins.springsecurity.ldap.context.managerPassword = 'password'

grails.plugins.springsecurity.ldap.context.server = 'ldaps://ldap.example.com:636/'

grails.plugins.springsecurity.ldap.authorities.ignorePartialResultException = true // typically needed for Active Directory

   grails.plugins.springsecurity.ldap.search.base = 'dc=ldap,dc=example,dc=com'
   grails.plugins.springsecurity.ldap.search.filter="sAMAccountName={0}" // for Active Directory you need this
   grails.plugins.springsecurity.ldap.search.searchSubtree = true
   grails.plugins.springsecurity.ldap.auth.hideUserNotFoundExceptions = false 
```

# oracle - 连接多列且一列为空时的空格 - Oracle

> ID：11956844
> 
> 赞同：8
> 
> 时间：2012-08-14T16:36:09.443
> 
> 标签：oracle, null, concatenation, space

我需要将几列连接成一列，每个值之间有空格。问题是当一个值为空时，我最终会在两个值之间出现一个双空格。

例子

```
SELECT (FIRST_NAME || ' ' || MIDDLE_NAME || ' ' || LAST_NAME
  FROM TABLE_A; 
```

如果中间名恰好是 NULL，那么我最终会在名字和姓氏之间有两个空格。有什么办法可以解决这个问题，当有空值时只有一个空格？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T16:39:37.563

```
SELECT TRIM(TRIM(FIRST_NAME || ' ' || MIDDLE_NAME) || ' ' || LAST_NAME)   
FROM TABLE_A; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-24T21:26:43.247

来自 Oracle 的文档：

> CONCAT_WS（分隔符，str1，str2，...）
> 
> CONCAT_WS() 代表 Concatenate With Separator，是 CONCAT() 的一种特殊形式。第一个参数是其余参数的分隔符。在要连接的字符串之间添加分隔符。分隔符可以是字符串，其余参数也可以。如果分隔符为 NULL，则结果为 NULL。

还有非常重要的评论：

> CONCAT_WS() 不会跳过空字符串。但是，它会跳过分隔符参数之后的任何 NULL 值。

所以在你的情况下应该是：

```
CONCAT_WS(',', FIRST_NAME, MIDDLE_NAME, LAST_NAME); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T17:34:18.583

```
with indata as
(
select 'John' as first_name, 'W' as middle_name, 'Smith ' as last_name from dual
union
select null as first_name, null as middle_name, 'Adams' as last_name from dual
union
select 'Tom' as first_name, null as middle_name, 'Jefferson' as last_name from dual
)
select
regexp_replace(trim(indata.first_name || ' ' || indata.middle_name || ' ' || indata.last_name), '\s{2,}', ' ')
from indata; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-16T22:59:36.377

这就是我通常在 Oracle 中连接多个字段并删除空格的方式：

`TRIM(REGEXP_REPLACE(HOUSE_NO || ' ' || PREFIX || ' ' || STREET_NAME || ' ' || STREET_TYPE || ' ' || SUFFIX, ' +', ' '))`

1.  连接所有必要的字段，每个字段之间有一个空格。空字符串和 NULL 值将导致两个或多个空格；
2.  使用正则表达式将任何出现的多个空格 [' +'] 更改为单个空格 [' '];
3.  最后，从结果字符串的开头和/或结尾修剪任何空格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T16:45:03.703

您可以使用[`RPAD()`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions140.htm)添加空格字符：

```
SELECT RPAD(first_name, LENGTH(first_name)+1, ' ')||RPAD(middle_name, LENGTH(middle_name)+1, ' ')||last_name
FROM TABLE_A; 
```

当任何参数为`RPAD`NULL 时，结果将为 NULL，并且在 Oracle 中将 NULL 附加到字符串会返回原始字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T16:49:04.463

另一种选择是使用 decode ：

```
SELECT decode(FIRST_NAME,'','',FIRST_NAME ||' ') ||
       decode(MIDDLE_NAME,'','',MIDDLE_NAME ||' ') || LAST_NAME
FROM TABLE_A; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T18:28:31.793

或者您可以简单地使用 REPLACE 功能：

```
with indata as 
  (select 'John' as first_name, 'W' as middle_name, 'Smith ' as last_name from dual 
   union 
   select null as first_name, null as middle_name, 'Adams' as last_name from dual 
    union 
    select 'Tom' as first_name, null as middle_name, 'Jefferson' as last_name from dual) 
SELECT REPLACE(TRIM(indata.first_name || ' ' || indata.middle_name || ' ' || indata.last_name), '  ', ' ')
  FROM indata 
```

（感谢@tbone 提供示例数据:-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T17:18:19.050

还有一个选择：

```
SELECT first_name
       || DECODE(middle_name
          ,      NULL, NULL
          ,      ' ' || middle_name)
       || DECODE(last_name
          ,      NULL, NULL
          ,      ' ' || last_name) full_name
FROM   table_a
; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-15T20:32:24.123

不要低估 CASE 语句的简单功能，它可以连接起来。这是一个可以按原样运行的独立示例：

```
SELECT
CASE WHEN x.FIRST_NAME IS NULL THEN x.FIRST_NAME ELSE x.FIRST_NAME || ' ' END || 
CASE WHEN x.MIDDLE_NAME IS NULL THEN x.MIDDLE_NAME ELSE x.MIDDLE_NAME  || ' ' END || 
x.LAST_NAME
FROM (SELECT 'John' AS FIRST_NAME, NULL AS MIDDLE_NAME, 'Doe' AS LAST_NAME FROM DUAL) x; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-14T10:25:20.303

我有这个例子。希望这可以帮助。只需转到 SQL 服务器，选择新查询和 CP 以下查询：

```
DECLARE @NULL_SAMLES TABLE
       (
       NS_ID INT IDENTITY(1,1) PRIMARY KEY CLUSTERED NOT NULL
      ,COL_01 VARCHAR(10) NULL
      ,COL_02 VARCHAR(10) NULL
      ,COL_03 VARCHAR(10) NULL
      ,COL_04 VARCHAR(10) NULL
   )

   INSERT INTO @NULL_SAMLES(COL_01,COL_02,COL_03,COL_04)
   VALUES
    ('A','B','C','D')
   ,(' ' ,'B','C','D')
   ,(' ',NULL,'C','D')
   ,('A','B',NULL,'D')
   ,('A','B','C',NULL)
   ,(NULL,'B',NULL,'D')
   ,(NULL,'B','C',NULL)
   ,('A',NULL,'C',NULL)
   ,('A',NULL,NULL,'D')
   ,('A',NULL,NULL,NULL)
   ,(NULL,'B',NULL,NULL)
   ,(NULL,NULL,'C',NULL)
   ,(NULL,NULL,NULL,'D')

   SELECT
        NS.COL_01
       ,NS.COL_02
       ,NS.COL_03
       ,NS.COL_04,
      Stuff(  
        Coalesce(', ' + nullif(NS.COL_01, ''), '') 
      + Coalesce(', ' + nullif(NS.COL_02, ''), '') 
      + Coalesce(', ' + nullif(NS.COL_03, ''), '') 
      +Coalesce(', ' + nullif(NS.COL_04, ''), '')
      , 1, 1, '') AS CONC_COLS
   FROM @NULL_SAMLES NS 
```

# ruby - 读取 ruby 中的所有 shell 变量

> ID：11956850
> 
> 赞同：3
> 
> 时间：2012-08-14T16:36:30.470
> 
> 标签：ruby, bash, shell, awk, zsh

## 问题：

我在 ruby​​ 脚本中将 shell 脚本作为子进程运行，在运行脚本后，我希望有一个选项来检查 shell 的所有环境变量，包括数组变量。

到目前为止，我想出了：

```
set | awk -F= 'BEGIN            {v=0;}
  /^[a-zA-Z_][a-zA-Z0-9_]*=/    {v=1;}
  v==1 && $2~/^['\''\$]/        {v=2;}
  v==1 && $2~/^\(/              {v=3;}
  v==2 && /'\''$/ && !/'\'\''$/ {v=1;}
  v==3 && /\)$/                 {v=1;}
  v                             {print;}
  v==1                          {v=0;}
' 
```

这很好地只显示了变量，包括数组、多行字符串和过滤掉的函数。

但这并不总是使用相同的格式，尤其是数组变量在 BASH 和 ZSH 中的表示方式不同。

这是我当前的实现：[https ://github.com/mpapis/tf/blob/master/lib/tf/environment.rb](https://github.com/mpapis/tf/blob/master/lib/tf/environment.rb)

## 问题：

有没有一种简单的方法来显示所有将在 BASH 和 ZSH / 可能其他 shell 中持续工作的变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T19:18:16.780

很高兴再次见到你 mpapis ;-)

不幸的是[，POSIX.1-2008 没有涵盖数组和关联数组](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18)，并且您发现 和 之间存在一些令人讨厌的细微`bash`差别`zsh`。因此，没有单一的方法可以在所有 POSIX shell 中执行此操作，我们需要检查`$BASH_VERSION`等，正如您已经指出的那样。

我决定最好避免编写 Ruby 来解析`set`或其他`shell`内置函数的输出。输出不方便解析，而且无论如何 shell 最了解自己的数据，所以我认为将大部分智能放在 shell 代码中是有意义的。因此，我提出了[一个解决方案](https://github.com/aspiers/shell-vars-to-ruby/tree/yaml)，它使用 shell 代码将数据结构输出为[YAML](http://www.yaml.org/)，然后将 YAML 直接加载到 Ruby 中。

首先，我将您的参考实现和测试导入到独立存储库[的`master`分支中](https://github.com/aspiers/shell-vars-to-ruby)。然后我加强了测试套件并进行了一些调整。这表明多行处理仍然存在问题。

然后我创建了一个新[`yaml`分支](https://github.com/aspiers/shell-vars-to-ruby/tree/yaml)并开发了自己的实现。我再次扩展了测试。他们都通过了 ;-) 请注意，我使用了一些不同的技巧在`zsh`and中进行自省`bash`：

*   `zsh`有一个`zsh/parameter`模块，它提供包含其所有参数的名称和类型的关联数组。
*   `bash`具有`declare -p`易于解析的形式。它也有`compgen -A variable`，但最后我没有使用它。

`ksh`我认为添加支持也很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:47:15.607

`set`返回所有*shell*变量，而不是环境变量。要获取环境变量，请使用`env`命令。请注意，bash 不会将数组导出到环境中。

# oracle - 连接 Oracle 自定义 jsp 和来自 Oracle R12 的标准

> ID：11956852
> 
> 赞同：0
> 
> 时间：2012-08-14T16:36:36.320
> 
> 标签：oracle, jsp, quotes

我一直在使用 Oracle 电子商务 R12。在之前的 11i 工作中，我实现了一个报价搜索 .jsp，它搜索特定的表并以表的形式返回数据。我想知道是否有一种方法可以创建一个超链接，将 jsp 链接到标准 Oracle 搜索页面并搜索相同的报价并显示其内容？重申一下，我希望自定义报价搜索链接到标准报价搜索。

谢谢

# c# - 超时已过。在从池中获取连接之前超时时间已过。

> ID：11956861
> 
> 赞同：-2
> 
> 时间：2012-08-14T16:37:12.623
> 
> 标签：c#, asp.net, ado.net

**超时已过。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。**

每当我在资源管理器上加载我的项目时，我都会遇到错误。any1 可以帮我解决这个超时错误吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:54:14.087

这通常发生在连接使用后未关闭时。你在使用 DataReader 吗？如果是这样，请确保它已关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-30T13:00:51.880

当相同的 SQL 查询字符串反复运行多次（例如在循环中）时，也会出现此异常。

要解决此问题，请尝试使用 Connect Timeout 、 Max Pool Size 等属性修改 Web 服务中使用的连接字符串。

> “集成安全 = True；服务器 = 服务器名称；初始目录 = 数据库名称；连接超时 = 20000；池化 = '真'；最大池大小 = 20000”

# linux - 在 linux 中从 groovy 执行 bash 脚本

> ID：11956864
> 
> 赞同：1
> 
> 时间：2012-08-14T16:37:17.727
> 
> 标签：linux, groovy, echo

我的服务器上有一个 bash 脚本，它从 github 获取 master 分支，构建它并将工件部署到 tomcat。我决定写一个 github web URL hook 来调用这个 sh。当我的服务器运行 Java 时，我正在使用 groovy。`test.sh`我写了一个测试脚本`/home/madhead/scripts`：

```
echo "SHELL"
touch /home/madhead/test_`date +%d_%m_%Y_%H_%M_%S` # To see if script is actually called 
```

环境变量`SCRIPTS`设置为`/home/madhead/scripts`in `/home/madhead/.bashrc`。在我的 groovlet 中，我有

```
println "GROOVY"
println '$SCRIPTS/test.sh'.execute().text
println `whoami'.execute().text` //Prints madhead
println `env'.execute().text` //Prints all environment variables for madhead, SHELL is /bin/bash and SCRIPTS is /home/madhead/scripts in this output. 
```

“GROOVY”是 html 中的打印端，但是当我调用 groovlet 时没有“SHELL”并且没有创建测试文件。所以，脚本没有被调用。我试过

```
println '/home/madhead/scripts/test.sh'.execute().text 
```

在 groovlet 中没有任何效果。我如何从 groovy/java 调用 bash 脚本？此外，`println 'echo test'.execute().text`将 test 打印到 html，但`println 'echo $SCRIPTS'.execute().text`不打印任何内容。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:02:20.873

也许要获取您需要的环境变量：

```
def env = System.getenv()
println env.SCRIPTS 
```

在我的盒子里，这个人工作：

```
groovy -e ' def env = System.getenv(); println env.JAVA_HOME ' 
```

# jquery - 显示 JSON 数据

> ID：11956865
> 
> 赞同：2
> 
> 时间：2012-08-14T16:37:20.070
> 
> 标签：jquery, json

我真的有些莫名其妙：

我在一个名为的文件中有以下 JSON 数据：data.json

```
{
   "locations": [
      {
         "title": "The Space Needle",
         "latitude": 47.619,
         "longitude": -122.348
      },
      {
         "title": "Albany",
         "latitude": 46,
         "longitude": -74
      }
   ]
} 
```

当我使用以下代码尝试显示数据时，我什么也得不到：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Another gone south</title>
<script src="http://code.jquery.com/jquery-1.8.0.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
/* <![CDATA[ */
$(document).ready(function(){
    $.getJSON("data.json",function(data){
        $.each(data.locations, function(i,location){
                content += '<p>' + location.title + '</p>';
                content += '<p>' + location.latitude + '</p>';
                content += '<p' + location.longitude + '</p>';
                content += '<br/>';
                alert('aler called');
                $(content).appendTo("#loc");
        });
    });   
});
/* ]]> */
</script>
</head>
<body>
        <div class="container">
                <div class="span-24">
                       <h2>Check out the following locations:</h2>
                                        <div id="loc">
                                        </div>
                </div>
        </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:54:41.357

假设您的 json 返回您的循环似乎很好~~，您可能需要做的唯一一件事就是在使用它之前解析您的 JSON 结果~~：

在说完之后，我再次查看了这个`JayC`，我将 JSON 值添加到我的示例中到一个字符串 (d'oh)，当然，我把它变成了一个对象，每个都工作得很好。

使用 JSON 对象（不是字符串）查看[**演示**](http://jsfiddle.net/9HDJy/)

基本上，您的代码应该可以正常工作，这意味着请求会产生错误，或者您什么也得不到。

检查浏览器中的调试控制台是否有任何错误。在 FF 中您可以使用 FireBug 或在 Chrome 和 IE 中使用内置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:24:31.550

只是一个狂野的镜头，你使用的是什么浏览器？不是铬吗？Firefox 也不能正常工作吗？因为我已经在 Firefox 中尝试过了，它可以正常工作，同时显示数据和警报。在 Chrome 中我得到错误

> XMLHttpRequest 无法加载 file:///PATH。Access-Control-Allow-Origin 不允许 Origin null。

经过一番挖掘，我发现它可能是 chrome 的问题，你可能需要运行它

> chrome.exe --allow-file-access-from-file

您可能还需要定义变量“内容”（对于 chrome），例如：

```
$(document).ready(function(){
    content = $(this).html();
    $.getJSON("data.json",function(data){
        $.each(data.locations, function(i,location){
                content += '<p>' + location.title + '</p>';
                content += '<p>' + location.latitude + '</p>';
                content += '<p' + location.longitude + '</p>';
                content += '<br/>';
               alert('aler called');
             $(content).appendTo("#loc");
        });
    });   
}); 
```

这样它适用于 Chrome 和 Firefox（在我的电脑上）。总结一下：Chrome似乎有问题，应该在外部服务器上工作。

[Chrome 问题链接](https://stackoverflow.com/questions/2541949/problems-with-jquery-getjson-using-local-files-in-chrome)

# c++ - 在课堂上使用枚举时，它会是公开的吗？为什么？

> ID：11956866
> 
> 赞同：5
> 
> 时间：2012-08-14T16:37:24.013
> 
> 标签：c++, enums, private, public

我正在为我正在研究的课程使用枚举，并且正在使用 Google 查找示例以确保我正确使用了枚举。我去了几个站点，包括 MSDN 站点，枚举列在公共而不是私有下。我一直认为数据成员是私有的。我离开基地了吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T16:39:10.153

枚举是一种类型，而不是数据成员。如果该课程的用户需要了解它，您应该将其公开；否则，将其设为私有。用户需要了解它的典型情况是当它用作公共成员函数的参数类型时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T16:42:49.343

枚举不是数据成员，它们是常量/类型。如果您不将它们公开，则其他类无法与`enum`使用枚举名称定义的类交互：

```
class A {
  public:
    void func(enumtype e) { if (e == e1) dostuff(); }
  private:
    typedef enum {e1, e2} enumtype;
};

int main() {
  A a;
  a.func(e1); // error: enumtype is private, e1 is not visible here
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T16:39:26.580

这些枚举可能在类接口中使用，对吧？否则，保留它们确实会更清洁`private`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T18:41:09.323

公共`enum`数据在**模板元编程**中大量使用（参见[Boost.MPL](http://www.boost.org/doc/libs/1_50_0/libs/mpl/doc/index.html)）

```
#include <iostream>

template <int N>
struct Factorial {
    enum { value = N * Factorial<N - 1>::value };
};

template <>
struct Factorial<0> {
    enum { value = 1 };
};

int main()
{
    auto const f10 = Factorial<10>::value; // done at compile-time
    std::cout << f10 << "\n";              // prints 3628800

    return 0;
} 
```

在[Ideone](http://ideone.com/YpXlO)上输出。此处公开使用的原因`enum`是该结构只是将中间计算传输到顶级调用者的简单工具，并且不需要封装。它是编译时函数求值的粗略形式，其中`struct`充当函数范围，`enum`充当返回值。

# android - ScanResult 能力解读

> ID：11956874
> 
> 赞同：11
> 
> 时间：2012-08-14T16:37:43.087
> 
> 标签：android, android-wifi

我想分析 ScanResult 的功能字符串。但是，其中的名称最多可分组在四个方括号中，例如

```
[WPA-PSK-TKIP+CCMP][WPA2-PSK-TKIP-CCMP][WPS][ESS] 
```

考虑到某些名称可能出现在各种括号中，是否有某种文档描述了哪个括号与什么相关。如果某个地方也有所有可能功能的列表，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-03T02:27:25.890

该字符串由 wpa_supplicant 生成。不幸的是，这方面的文档很少，但至少我们可以查看精确的代码！有三个主要函数负责创建我们在 Android 中看到的字符串：

*   [wpa_supplicant_ctrl_iface_scan_result](http://w1.fi/cgit/hostap/tree/wpa_supplicant/ctrl_iface.c?id=7b42862ac87f333b0efb0f0bae822dcdf606bc69#n2169)：这需要一个`struct wpa_bss`as 参数，其中包含有关一个网络的信息，并将其转换为字符串。您可以看到诸如`[ESS]`和`WPA2`正在添加的标签。它还（间接）调用以下两个函数。所以这个功能增加了网络的一般能力。
*   [wpa_supplicant_ie_txt](http://w1.fi/cgit/hostap/tree/wpa_supplicant/ctrl_iface.c?id=7b42862ac87f333b0efb0f0bae822dcdf606bc69#n2034)：这会添加`[PSK]`和/或`[EAP]`标签。换句话说，正在使用的握手类型。
*   [wpa_write_ciphers](http://w1.fi/cgit/hostap/tree/src/common/wpa_common.c#n1463)：添加正在使用的 WPA1 或 WPA2 加密类型。所以`TKIP`或`CCMP`。只有当网络是 WPA1 或 WPA2 时才会调用它。

通过阅读这三个函数，您将确切地知道字符串中可以预期的参数类型。您始终可以通过创建自己的网络并确认与您自己的网络对应的字符串来确认您的理解！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T18:15:57.293

去年有一个关于这个问题的话题。[您可以在这个 stackoverflow 答案](https://stackoverflow.com/a/7019338)中找到一些帮助。事实上，几乎没有关于 WiFi 接入点功能的 Android 文档。即使在官方 Javadoc 中，关于信号级别，该属性`level`也仅记录在：

> 以 dBm 为单位的检测到的信号电平。**至少这些是 TI 驱动程序使用的单位**。

这似乎是关于 Android 中 WiFi 处理的一个非常不稳定的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-27T11:09:36.080

我发现了这个话题：

[如何在 Android 中使用未知加密算法连接到 WiFi 网络？](https://stackoverflow.com/questions/21607815/how-do-i-connect-to-a-wifi-network-with-an-unknown-encryption-algorithm-in-andro)

问这个问题的用户似乎知道这是什么意思：

> 根据一些研究，我假设这些是括号分隔的功能，并且每个功能的第一项是 - 分隔的字符串，显示：
> 
> 【认证算法-密钥管理算法-成对密码】

# html - 奇怪的导航问题 - 只有一项不工作

> ID：11956876
> 
> 赞同：1
> 
> 时间：2012-08-14T16:37:46.373
> 
> 标签：html, css

嗨——我在我的网站上遇到了导航问题（[链接在这里](http://goo.gl/9Xt2b)）。如果你点击菜单项，除了“按下”按钮（与 div #medias 相关）外，它们都可以工作。出于某种原因，当单击此按钮时，页面会直接滚动到页面/div“联系人”，而不是 div #medias。我不明白这个问题，因为我的菜单项链接指向正确的 DIV，而且 CSS 看起来也不错。任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:54:55.380

通过删除`style.css`文件中第 293 行中的模棱两可的字符，#media`div`可以正常运行。

# c# - 试图弄清楚用户控制是如何工作的

> ID：11956877
> 
> 赞同：0
> 
> 时间：2012-08-14T16:37:46.610
> 
> 标签：c#, user-controls

我制作了一个控件库和两个用户控件。

```
userControl_1 contains a Panel and an ImageList that I have "loaded" with
images in design time.

userControl_2 contains a PictureBox 
```

我已将 userControl_1 放在 Windows 窗体上。userControl_2 位于 userControl_1 的面板区域。

目标是从 imageList 中选择一个图像并用 pictureBox 显示它，如下所示：

```
nameOfPictureBox.Image = nameOfList.Image[number] 
```

但我不让它工作。我不明白如何在用户控件之间进行通信？我猜上面的代码应该在userControl_1里面？但是我应该把代码放在哪里，在 userControl_1.cs 类文件或 userControl_1.Designer.cs 文件中？

一些帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:50:54.390

设计器文件一般只用于 web 控件定义，并且是生成的，所以不应该是你的代码的地方。

您将希望将任何功能扩展到用户控件的代码隐藏文件 (.cs) 中。

从用户控件公开数据的一种简单方法是在用户控件后面的代码中创建公共属性，以封装控件的知识但仍公开数据。

在 UserControl_2 类上是这样的：

```
public Image PictureBoxImage{
    get { return pictureBox.Image; }
    set { pictureBox.Image = value; }
} 
```

然后，您可以使用一个简单的属性来隐藏控件的内部结构，但仍然允许您的 UserControl_1 代码在后面设置它。

然后可以调整 KDiTraglia 的代码以执行以下操作：

```
foreach(var item in this.Panel)
{
    if (item is UserControl_2)
    {
         var ctrl = (UserControl_2)item;
         ctrl.PictureBoxImage = ...
    }
} 
```

然后，这允许用户控件向下委派给适当的内部控件，而 UserControl_1 不需要了解该结构。

# php - mysql 查询循环，结果存储在数组中

> ID：11956878
> 
> 赞同：0
> 
> 时间：2012-08-14T16:37:47.603
> 
> 标签：php, mysql, arrays, loops

我有一个正在处理的运输模块，我正在尝试查询一个 mysql 表，计算 PO 上给定行项目的行数，并将结果存储在一个数组中。我认为我不能在 mysql 中进行分组，因为它不会为没有任何发货的订单项提供结果。目的是获取原始订单数量，通过我的查询计算发货的单位数量，然后从原始数量中减去发货的单位，以提供要根据该行项目发货的剩余单位。

为了确保即使没有发货的行项目我也能收到零数量并将其存储在数组中，我试图循环我的查询并将每个单个结果作为一个值存储在我的数组中。如果有更好的方法，我愿意接受有关改变方法的建议。

这是我的查询：

```
// I have a previous query that provides the number of line items for a given po.  that number is stored in variable $num1 
$a=1;
$LiShipped = array();

while($a<$num1){

$query2="SELECT count(E3_SN) AS SCount FROM Shipped WHERE Cust_Ord_Num = '$SO_Num' AND LineItem=$a";
$LiShipped[] = mysql_fetch_array($query2);
$a++;
} 
```

不幸的是，当我遍历我的数组时，它看起来好像没有存储在数组中。

```
<?php
echo $LiShipped[0]; //results nothing
echo var_dump($LiShipped); // results array(1) { [0]=> NULL } array(2) { [0]=> NULL [1]=> NULL } array(3) { [0]=> NULL [1]=> NULL [2]=> NULL }
?> 
```

看起来像所有空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:39:49.087

[`mysql_query()`](http://php.net/mysql_query)在尝试检索结果之前，您需要执行查询（通过调用）：

```
$query2="SELECT count(E3_SN) AS SCount FROM Shipped WHERE Cust_Ord_Num = '$SO_Num' AND LineItem=$a";
$query2 = mysql_query( $query_2); // <-- NEED THIS
$LiShipped[] = mysql_fetch_array( $query2); 
```

请注意，上面省略了 SQL 查询的基本错误检查和清理以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:41:52.010

你没有执行你的查询，它不能工作。试试这个代码：

```
// I have a previous query that provides the number of line items for a given po.  that number is stored in variable $num1 
$a=1;
$LiShipped = array();

while($a<$num1){
    $query2="SELECT count(E3_SN) AS SCount FROM Shipped WHERE Cust_Ord_Num = '$SO_Num' AND LineItem=$a";
    $res = mysql_query($query2);
    while($LiShipped[] = mysql_fetch_array($res));
    $a++;
} 
```

# c# - Office 2003 和 extensibility.dll 部署蓝调

> ID：11956881
> 
> 赞同：0
> 
> 时间：2012-08-14T16:38:06.697
> 
> 标签：c#, vsto, office-addins

我一直在尝试为 C# Outlook 2003 加载项创建部署。它只需要 NET 2.0 并依赖于`IDTExtensibility2`（Extensibility.dll）。在确保安装了 Office 2003 PIA 后，加载项仍然不会注册，因为`Could not load file or assembly 'Extensibility, Version=7.0.3300.0, Culture=nuetral, PublicKeyToken=b03f57f11d50a3a' or one of its dependencies. Strong name validation failed. (Exception from HRESULT: 0x8013141A)`

我不认为部署 Extensiblity.dll 是合法的，即使它是合法的，我也无法使其工作。那么如何确保它在目标 PC 上可用呢？

我在任何地方都找不到合适的解决方案。

该解决方案是在 VS 2010 中开发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:49:01.687

经过一番搜索后，我发现了这篇提供解决方案的[Microsoft 支持文章。](http://support.microsoft.com/kb/908002)

简单来说：

> 当您使用 Microsoft Visual Studio 2005 创建加载项、智能文档或智能标记时，您可能会遇到以下症状：
> 
> *   **加载项、智能文档或智能标记无法加载到任何 Microsoft Office 应用程序中。**
> *   加载项、智能文档或智能标记不在任何版本的 Microsoft Office 中运行。

及其决议：

> 要为 Visual Studio 2005 开发人员解决此问题，可以使用 Visual Studio 2005 更新的可再发行版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:17:01.317

如果您的 Outlook 加载项使用强名称密钥进行签名，那么您引用的任何外部库也需要进行强名称签名。

过去我遇到过与您类似的问题，即第 3 方库未使用强名称签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T20:10:37.047

在中找到 Extensibility.dll

\Visual Studio Tools for Office\PIA\Common

文件夹。将其复制到项目文件夹中。

我有 VSTO 2010。添加了对我的项目的引用，编译错误消失了。相同版本的错误：7.0.3300.0。VSTO 由 Microsoft 为开发人员免费分发，用于为 Microsoft Office 创建解决方案，但 VSTO 2010 随附的许可文档不允许您复制它，除非您自己使用。话虽这么说，我会纠缠微软关于 dll 的问题，显然你的项目需要它。显然，他们应该在许可证中添加一条允许开发人员分发 dll 的条款。

# linux - 为什么在启动时设置 mem 参数会大大减少可寻址 RAM 的数量？

> ID：11956886
> 
> 赞同：0
> 
> 时间：2012-08-14T16:38:18.310
> 
> 标签：linux, bootloader

由于模块的一些问题，在启动时我必须设置 mem=4096M。但是，当这种情况发生时，这是可用的内存：

MemTotal：3354504 kB SwapTotal：1670724 kB

与

MemTotal：4057728 kB SwapTotal：1670724 kB

为什么RAM的数量下降这么多？它不应该只是保持在 4057728kB 还是假装有更多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:57:02.890

内存映射 I/O（例如视频、声音、磁盘等）占用一定数量的物理地址。通常，它后面的 RAM 映射到其他地方，但是由于您人为地限制了操作系统可用的物理地址的数量，因此操作系统无法实际*访问*该 RAM。

# java - 为什么我收到错误“无法从静态上下文引用的非静态变量”？

> ID：11956896
> 
> 赞同：2
> 
> 时间：2012-08-14T16:38:35.773
> 
> 标签：java, static, inner-classes

我已经阅读了有关`non-static variable this cannot be referenced from a static context`错误的信息，但我不明白为什么在我的情况下得到它（行`return new CommandParser1(command);`）？我只是创建类的实例。就这样。问题是什么？

```
public class ProtocolUtility {

    public static CommandParser createParser(String command) throws Exception {           
        switch (command) {
            case COMMAND_1:
                return new CommandParser1(command);                  
            case COMMAND_2:
               return new CommandParser2(command);
            default:
                return null;
        }
    }

   public abstract class CommandParser {

       protected String command;

       public String getCommand() {
          return command;
       }       
   }

   public  class CommandParser1 extends CommandParser {       
       public CommandParser1 (String command){
           //...
       }       
   }

   public  class CommandParser2 extends CommandParser {      
       public CommandParser2 (String command)  {
           //...
       }      
   } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:42:24.247

`CommandParser`是一个*内部类*，这意味着它需要创建一个外部类 ( `ProtocolUtility`) 的实例。将其声明更改为：

```
public static abstract class CommandParser { 
```

或者`CommandParser`在单独的`.java`文件中声明。

`createParser()`如果不是`static`在这种情况下，您的代码也可以工作，`ProtocolUtility`您当前所在的实例将用作外部实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:42:08.287

当`createParser`以静态方式（即`ProtocolUtility.createParser(...)`）调用时，您无法从内部定义的类中实例化对象，`ProtocolUtility`因为这需要您拥有该类的实例（您没有）。这也可以通过制作内部类来解决`static`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:43:14.707

**1.** `Static method` **无法**访问`Non-static method or variable.`

您的代码`return new CommandParser1(command);` 在**静态方法** `public static` `CommandParser createParser(String command)`中，因此**导致错误。**

**2.**当你试图访问`CommandParser1(command)`哪个是**哪个是它的**`inner class`， 你**现在可以直接访问它** 但是假设，当你试图**从外部访问它时**，你需要**创建一个外部类实例来访问这个内部类方法。**`class ProtocolUtility` **`outer class`****`ProtocolUtility class`******

 ******* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:43:12.533

因为 CommandParser1() 不是静态的。您需要一个 CommandParser1 实例来调用 CommandParser1() 或将其定义为静态。******

# java - 创建一个类实例

> ID：11956898
> 
> 赞同：0
> 
> 时间：2012-08-14T16:38:39.410
> 
> 标签：java, netbeans

我刚开始使用Java。我正在使用 NetBeans，在我的 .pkg1 文件中我有两个 .java 文件。顺便说一句，我正在学习 Coursera 算法课程，所以我的代码引用了以下内容：

CourseraAlgorithmsWeek1.java

```
package coursera.algorithms.week.pkg1;

public class CourseraAlgorithmsWeek1 {
    public static void main(String[] args) {
        QuickFindUF mystuff(10); // DOES NOT WORK!
    }  
} 
```

QuickFindUF.java

```
public class QuickFindUF {
    private int[] id;

    public QuickFindUF(int N){
        id = new int[N];
        for(int i =0; i< N; i++){
            id[i] = i;
        }
    }
} 
```

我的问题是我的 main 函数的第一行无法识别 QuickFindUF 对象的创建。我读到我需要将第二个文件编译成 .class 文件，然后编译成 .jar 文件。我怎么能用netbeans做到这一点？

我还阅读了一些有关 Classpath 的信息。我只能将 .jar 文件添加到类路径吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:42:23.903

改变

```
QuickFindUF mystuff(10); 
```

至

```
QuickFindUF mystuff = new QuickFindUF(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:44:39.957

您也可以将目录添加到类路径中。你可以做类似的事情

```
export CLASSPATH = "." 
```

这将包括您当前所在的目录。这应该允许您在该目录中编译和执行代码。

如果类路径设置正确，您可以通过在页面顶部添加以下声明将 QuickFindUF 类移动到 coursera.algorithms.week.pkg1 包中：

```
package coursera.algorithms.week.pkg1; 
```

或者，您可以使用声明导入类：

```
import coursera.algorithms.week.pkg1.CourseraAlgorithmsWeek1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:42:05.470

通过添加移动`QuickFindUF.java`到主类的同一个包

`package coursera.algorithms.week.pkg1;`

在类定义之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T16:50:39.147

**1.**使用`Composition`。

```
QuickFindUF  q = new QuickFindUF();
q.mystuff(10); 
```

# asp.net - T4 运行时模板部署

> ID：11956900
> 
> 赞同：0
> 
> 时间：2012-08-14T16:38:42.440
> 
> 标签：asp.net, .net, templates, t4

我正在使用这种新的（对我而言）技术，即 T4 模板。简单地说，我需要实现的是一种生成电子邮件文本的方法，让用户自定义邮件中的文本，但有一些“占位符”可以在运行时替代。在我看来，这听起来 T4 运行时模板应该是一个不错的选择。事实上，它就像一个魅力，除了我不明白如何部署解决方案这一事实。我想将我的**.tt**文件作为外部文件部署在生产服务器上（这意味着不嵌入在**dll**文件中），以便能够简单地用记事本打开该文件，更改电子邮件的文本，以及让系统开始使用新模板。

我尝试将 tt 文件的**构建操作**`Content`属性设置为并将**复制到输出**属性设置为`Copy always`：据我所知，第一个根本没有做任何有用的事情；第二个复制 bin 文件夹中的**.tt**和底层**.cs**文件。

有没有一种*干净*的方法来实现这样的部署？**.tt**文件的编辑是否会启动应用程序的重新启动，例如更改**web.config**或类似文件时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:13:01.553

这不是 T4 支持的方案。

如果您的方案允许“固定”模板，但数据可变，那么运行时 T4 模板是一个很好的解决方案。但是，T4 的实际模板生产部分仅被许可在 Visual Studio 获得许可的情况下使用，而且既未经测试也不支持在服务器或任何多线程环境中运行。

还有一大堆其他模板库在更广泛的场景中进行了测试，这些场景可能更适合这个特定的应用程序。例如， Microsoft 有[Razor](http://msdn.microsoft.com/en-us/library/system.web.mvc.razor%28v=vs.98%29.aspx)，如果您实际生成 HTML 格式的电子邮件，它可能会特别好用，因为它专门针对尖括号场景，并且非常适用于服务器，因为它是设计运行的地方。

# asp.net - 如何使用任何行中特定列的数据？

> ID：11956909
> 
> 赞同：0
> 
> 时间：2012-08-14T16:39:16.370
> 
> 标签：asp.net

我正在使用 VS 2010 C# ASP.NET 4 和 SQL Server 2008 R2

在 aspx 上，我从数据库中读取数据并将其呈现为网格视图。网格视图和数据源都是 aspx 的一部分。

没有问题。

现在，我希望使用相同的数据源，并呈现驻留在特定列和一行中的数据（任何行 = 该列在每一行上都有相同的值）

我怎么做？

我想使用中继器，并限制它的提前，但我没有找到办法做到这一点。

我写道：

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="DataSource1">
    <ItemTemplate>
        <%# Eval("Col").ToString() %>
    </ItemTemplate>
</asp:Repeater> 
```

一次迭代后如何停止转发器？

因为我发现无法限制/停止转发器，所以我得到了一行相同数字的结果。

如何仅从该 clumn 中获取第一个、最后一个或任何其他值，但仅获取一个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:51:25.143

这是一个提示，而不是一个答案。查看 asp:Repeater 事件。特别是 ItemDataBoundEvent。拦截 ItemDataBoundEvent 后，您可以通过 slso 方法控制转发器。我希望它有帮助

# javascript - 如何返回可用的历史状态数

> ID：11956924
> 
> 赞同：0
> 
> 时间：2012-08-14T16:40:03.967
> 
> 标签：javascript, jquery, history.js

我在 iPad 网络应用程序中使用[Ben Luptons 的 History.js 。](https://github.com/balupton/History.js/)在全屏应用程序模式下，我有一个后退按钮，点击时会调用`History.back();`

这很好用，除非你已经没有状态可以返回了。本质上，在初始加载时，或者如果您回击足够多的时间以返回到加载的原始页面。

我需要返回可用状态的数量，并且只有在有可用状态时才返回。例如：

```
if( pagesAvailable > 0 )
    History.back(); 
```

我希望这是有道理的，有人可以提供一些帮助

谢谢，

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:42:33.927

`window.history.length`根据 MDN：[https ://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history 返回历史对象中的条目数](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

但是，正如@PRNDL 链接到的问题中提到的那样，这似乎是不可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:43:59.767

您可以尝试检查推荐人？

```
if (document.referrer == "") {
    window.close()
} else {
    history.back()
} 
```

# java - JSTL 使用一种语言版本的资源包“卡住”了

> ID：11956933
> 
> 赞同：0
> 
> 时间：2012-08-14T16:40:58.880
> 
> 标签：java, jakarta-ee, web-applications, internationalization, jstl

问题：当我认为 JSTL 应该在它们之间切换时，JSTL 使用资源包的一种语言版本“卡住”了；不仅是一个会话，还包括新会话。同一页面上的Struts`bean:message`标记使用相同的资源包并按预期切换语言。

这与问题无关（我认为？），但是 Struts1 Action 检查是否在 URL 中传递了参数以在英语和法语之间切换语言。

```
String localeSwitch = request.getParameter("locale");
if (localeSwitch != null) {
    if (localeSwitch.equalsIgnoreCase("en")) {
        Locale locale = new Locale(Locale.ENGLISH.getLanguage(), Locale.CANADA.getCountry());
        request.getSession().setAttribute(Globals.LOCALE_KEY, locale);
        Config.set(request.getSession(), Config.FMT_LOCALE, locale);
    } else if (localeSwitch.equalsIgnoreCase("fr")) {
        Locale locale = new Locale(Locale.FRENCH.getLanguage(), Locale.CANADA.getCountry());
        request.getSession().setAttribute(Globals.LOCALE_KEY, locale);
        Config.set(request.getSession(), Config.FMT_LOCALE, locale);
    }
} 
```

`Config.FMT_LOCALE`适用于 JSTL，`Globals.LOCALE_KEY`适用于 Struts。

在 JSP 中（因为我真的很困惑），我有：

```
<%
out.println("Config.FMT_LOCALE="+Config.get(request.getSession(), Config.FMT_LOCALE));
%>
<fmt:bundle basename="proj.resources.Resource">
    <fmt:message var="mymessage" key="mymessage" />
</fmt:bundle>
${mymessage}
<%
out.println("Config.FMT_LOCALE="+Config.get(request.getSession(), Config.FMT_LOCALE));
%> 
```

资源文件称为`Resource.properties`和`Resource_fr.properties`。

在以下各项之间，应用程序服务器 (JBoss) 已重新启动：

*   （预期行为）未指定语言的访问页面：`Config.FMT_LOCALE=null`输出，显示英文消息。
*   （预期行为）指定英语的访问页面：`Config.FMT_LOCALE=en_CA`输出，显示英语消息。
*   （预期行为）访问页面指定法语：`Config.FMT_LOCALE=fr_CA`输出，显示法语消息。
*   （意外行为）访问页面而不指定语言，然后访问指定法语的页面： `Config.FMT_LOCALE=fr_CA`输出，显示英文消息。
*   （意外行为）访问指定英语的页面，然后访问指定法语的页面： `Config.FMT_LOCALE=fr_CA`输出，显示英文消息。
*   （意外行为）访问指定法语的页面，然后访问指定英语的页面： `Config.FMT_LOCALE=en_CA`输出，显示英文消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:08:50.550

问题似乎是由使用 Struts 打包的 JAR 引起的，这些 JAR 也执行 JSTL：jstl-1.0.2.jar 和 standard-1.0.2.jar。

在创建 WAR 文件（导致使用 JBoss jstl.jar）时更改我的构建文件以排除这些文件可以解决问题。

# html - 滚动时如何加载更多表格行？

> ID：11956934
> 
> 赞同：0
> 
> 时间：2012-08-14T16:40:58.990
> 
> 标签：html, ruby, sinatra, erb

我的猜测是我必须在我的 .rb 文件中添加一个 'post do' 语句，尽管我还是 Sinatra 的新手并且不熟悉浏览器滚动到页面底部后如何加载更多内容。

这是我的 .rb 文件的示例：

```
get '/' do
  @arr = []
  (1..1000).each{ |x| @arr << x }
  erb :test
end 
```

这是我的 .erb 文件的示例：

```
<table>

  <thead>
    <tr><td>Number</td></th>
  </thead>

  <tbody>
  <% @arr.each do |number| %>
    <tr><td><%= number %></td></tr>
  <% end %>
  </tbody>

</table> 
```

当然，我不希望加载所有 1,000 行。相反，最好只加载前 10 个，然后当用户滚动到底部时再加载下 10 个，依此类推。

有谁知道我如何为 Sinatra 学习这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:02:47.703

我不知道 Sinatra，但您可以嵌入触发滚动事件的 Javascript 函数。

[Javascript onscroll 事件帮助](http://help.dottoro.com/ljurkcpe.php)

# jquery - 折叠和展开的 DIV 问题

> ID：11956937
> 
> 赞同：0
> 
> 时间：2012-08-14T16:41:05.560
> 
> 标签：jquery, css

我试图改变代码，但由于某种原因它没有按预期工作。我想将 DIV 放在中间，在折叠/展开时我希望它平滑地向下或向上滑动。如果您单击显示/隐藏页面切换，我似乎无法弄清楚原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:44:48.927

移位是滚动条根据网页高度显示或隐藏的结果。您可以保留滚动条，因此不会发生移位

```
html {
       overflow-y: scroll;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:45:28.660

我没有看到任何变化，但是为了居中，给它（#sd 规则）一个宽度（除了 95%——更接近图像宽度的东西，比如 550px）并将边距设置为`margin:0 auto`. 也摆脱`align:center`规则。

```
#sd {
    width: 550px;
    margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:52:28.917

页面正在移动，因为当公告展开时，它会显示垂直滚动条，因此将页面内容向左移动 18px（通常）。有几种方法可以克服这个问题，快速而肮脏的解决方法是将您的页面最小高度设置为 Announcement 展开时的高度，或者您可以通过设置`overflow-y:scroll`在 body 上来达到相同的结果。有更清洁的解决方案，但是现在如果您知道原因，我相信您会为您的特定要求找到一个好的解决方案。

# ios - 获取对本地符号的引用（即使其成为外部符号）

> ID：11956938
> 
> 赞同：1
> 
> 时间：2012-08-14T16:41:05.840
> 
> 标签：ios, linker, extern, symbols, mach-o

我有一个静态库，其中一个对象定义了一个符号：

```
nm mylib.a
...
00007340 t _a_local_symbol
... 
```

我需要从我的 C 代码中访问该函数。显然，我没有库的源代码，所以我只能使用手头的存档文件。

这进一步受到 iOS 链接器的限制。

多一点上下文。该库是Objective-C++，所讨论的函数是纯C。我没有原始标题，但我已经恢复了函数签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:54:20.740

`objcopy`有一个标志可以做你想做的事：

`--globalize-symbol <name> Force symbol <name> to be marked as a global`

不确定 objcopy 是否适用于 iOS 对象文件。

# mongodb - 是否可以在 mongo 中获取地图减少进度通知？

> ID：11956942
> 
> 赞同：3
> 
> 时间：2012-08-14T16:41:13.810
> 
> 标签：mongodb, mapreduce

在 Mongo 中 Map Reduce 很慢。这是给定的。所以，我想知道是否可以接收地图减少进度通知。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T16:45:21.720

我不知道任何内置功能。但是，您可以在单独的脚本中`db.currentOp()`每隔一段时间运行一次，读取 map-reduce 进度并通知相关方。

这是我可以看到的一个例子：

```
> db.currentOp()
{
    "inprog" : [
        {
            "opid" : 249198781,
            "active" : true,
            "lockType" : "read",
            "waitingForLock" : false,
            "secs_running" : 14,
            "op" : "query",
            "ns" : "mydb.mycoll",
            "query" : {
                "mapreduce" : "mycoll",
                "map" : function cf__9__f_() {
    emit(this.aid, 1);
},
                "reduce" : function cf__10__f_(k, vals) {
    var result = 0;
    vals.forEach(function (v) {result += v;});
    return result;
},
                "out" : {
                    "inline" : 1
                }
            },
            "client" : "127.0.0.1:44254",
            "desc" : "conn",
            "threadId" : "0x7e98f24e4700",
            "connectionId" : 1958947,
            "msg" : "m/r: (1/3) emit phase 644165/7670157 8%",
            "progress" : {
                "done" : 644165,
                "total" : 7670157
            },
            "numYields" : 644
        }
    ]
} 
```

# java - Java - 从字符文件中提取子序列

> ID：11956943
> 
> 赞同：0
> 
> 时间：2012-08-14T16:41:16.900
> 
> 标签：java

我有一个 1.99 GB 的字符文件。现在，我想从该文件中随机提取数百万个子序列，例如从位置 90 到 190、10 到 110、50000 到 50100 等（每个 100 个字符长）。任何人都可以帮助我如何以一种好的方式做到这一点。

注意：我没有足够的内存将整个文件放入内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:46:30.597

将文件拆分为几个固定大小的文件（例如每个 16K）。

读取 char n 时，执行 n /filesize 获取文件。使用 n % filesize 获取文件中的起始字符。为了读取文件尾部，您可以添加额外的逻辑并读取下一个文件，或者只是在每个文件中添加以下 100 个字符（并在下一个文件中复制它们）。

当然，只有使用原始文件并`seek`每次打开/执行的选项。但我不确定它的性能，并且它可能因不同的操作系统而有很大差异。

选项 2：生成大量随机索引并对它们进行排序。然后只需扫描文件（RandomAccessFile 或 FileInputStream）并获取所有链。它将最小化 HD 时间，问题将是控制存储索引所需的内存/订购它们所需的时间。当一个角色属于两个或多个链时，情况也会增加复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:49:30.257

您可以尝试[RandomAccessFile](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html) - 它允许将文件搜索到随机位置并读取所需数量的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:24:28.703

按起始索引对所需的子序列进行排序。

现在开始穿过它们。使用 RandomAccessFile 从所需的下一个子序列的起点开始抓取一块磁盘。

块的大小取决于你的命中率（块的其余部分有多少可能有用） - 命中率越高，块应该越大（当然，在一定程度上）。您可能会考虑在子序列列表中向前看并相应地调整块大小。将所有可能的子序列拉出块。重复直到完成。

我不明白其他地方提到的大于 2GB 的文件有什么问题。

# jquery - 在 Galleria jquery 插件中创建我自己的导航

> ID：11956945
> 
> 赞同：0
> 
> 时间：2012-08-14T16:41:20.283
> 
> 标签：jquery, api, navigation, galleria

因此，我试图在 Galleria 插件中创建自己的导航，但无法弄清楚单击导航链接时如何转到我指定的幻灯片。我在[这里](http://galleria.io/docs/)查看了文档和 API，但我找不到这样做的方法。我正在寻找类似于 supersized 的 goto api 函数的东西。

我认为您不需要我的代码，因为它只是导航链接，但如果有帮助，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:26:37.877

我想你正在寻找`.show()`： http: [//galleria.io/docs/api/methods/#show-index](http://galleria.io/docs/api/methods/#show-index)

示例：http: [//jsfiddle.net/4PdZJ/](http://jsfiddle.net/4PdZJ/)

# javascript - 具有对数搜索时间的 JavaScript 集数据结构

> ID：11956946
> 
> 赞同：0
> 
> 时间：2012-08-14T16:41:20.043
> 
> 标签：javascript, algorithm, data-structures

> **可能重复：**
> [Javascript 中是否有用于 Set 数据类型的库？](https://stackoverflow.com/questions/2342749/is-there-a-library-for-a-set-data-type-in-javascript)

有没有办法创建一个模仿 c++ 集的 JavaScript 数据结构？我需要在 log(n) 时间内执行搜索，但找不到任何可以很好服务的语言。我已经看到几个问题说我应该将集合表示为一个对象。那会奏效吗？数组的键和有效负载是数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:25:00.000

对于无序集，使用哈希表实现可能会更好。只要哈希表没有过载，它们就会进行 O(1) 查找。

对于有序的内存集，标准答案似乎是陷阱（平均时间好，标准差高）和红黑树（平均时间差，标准差低）。这些都是 O(logn) 查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:55:24.213

如果你需要有序集（它允许你按照你定义的顺序从最小元素循环到最大元素），你可以在 JS 中实现你自己的数据结构。我无法提供更多信息，因为我没有亲身体验过。

如果您对无序集感到满意，则可以按如下方式实现：

1.  定义要存储在集合中的对象的规范化字符串表示。如果您需要带有数字的集合，只需使用数字的字符串表示形式。如果您需要一组用户定义的对象，您可以挑选出定义对象身份的属性，并在规范化的字符串表示中使用它们。
2.  通过将规范化的字符串表示映射到实际对象来创建一个要使用的 JS 对象。
3.  可以通过使用字符串表示检查属性名称来完成搜索。
4.  可以通过以下方式插入到集合中：首先通过搜索检查字符串表示是否已经存在，如果对象尚未在集合中，则将字符串表示映射到实际对象。
5.  删除可以使用 来完成`delete`，属性名称是要删除的对象的字符串表示形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:42:58.630

它必须，在 javascript 中，一切都是对象。

# c# - 解析“查询字符串”格式数据的最简单方法

> ID：11956948
> 
> 赞同：32
> 
> 时间：2012-08-14T16:41:39.800
> 
> 标签：c#, asp.net, query-string, postdata

使用以下代码：

```
string q = "userID=16555&gameID=60&score=4542.122&time=343114"; 
```

解析值的最简单方法是什么，最好不编写我自己的解析器？我正在寻找与`Request.querystring["gameID"]`.

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-08-14T16:43:34.270

很简单...使用[HttpUtility.ParseQueryString 方法](http://msdn.microsoft.com/en-us/library/ms150046.aspx)。

未经测试，但这应该有效：

```
var qs = "userID=16555&gameID=60&score=4542.122&time=343114";
var parsed = HttpUtility.ParseQueryString(qs);
var userId = parsed["userID"]; 
//  ^^^^^^ Should be "16555".  Note this will be a string of course. 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-14T16:51:43.563

你可以像这样使用 linq 来做到这一点。

```
string query = "id=3123123&userId=44423&format=json";

Dictionary<string,string> dicQueryString = 
        query.Split('&')
             .ToDictionary(c => c.Split('=')[0],
                           c => Uri.UnescapeDataString(c.Split('=')[1]));

string userId = dicQueryString["userID"]; 
```

**编辑**

如果您可以使用[HttpUtility.ParseQueryString](http://msdn.microsoft.com/en-us/library/ms150046.aspx)那么它将更加直接，并且不会像 LinQ 那样区分大小写。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-01T13:40:36.730

As has been mentioned in each of the previous answers, if you are in a context where you can add a dependency to the System.Web library, using [HttpUtility.ParseQueryString](http://msdn.microsoft.com/en-us/library/ms150046.aspx) makes sense. (For reference, the relevant source can be found in the [Microsoft Reference Source](https://referencesource.microsoft.com/#system.web/HttpValueCollection.cs,222f9a1bfd1f9a98,references)). However, if this is not possible, I would like to propose the following modification to [Adil's](https://stackoverflow.com/a/11957114/1603383) answer which accounts for many of the concerns addressed in the comments (such as case sensitivity and duplicate keys):

```
var q = "userID=16555&gameID=60&score=4542.122&time=343114";
var parsed = q.TrimStart('?')
    .Split(new[] { '&' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(k => k.Split('='))
    .Where(k => k.Length == 2)
    .ToLookup(a => a[0], a => Uri.UnescapeDataString(a[1])
      , StringComparer.OrdinalIgnoreCase);
var userId = parsed["userID"].FirstOrDefault();
var time = parsed["TIME"].Select(v => (int?)int.Parse(v)).FirstOrDefault(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-16T14:30:18.940

如果您想避免使用[HttpUtility.ParseQueryString](https://msdn.microsoft.com/en-us/library/ms150046.aspx)所需的对 System.Web 的依赖，您可以`Uri`使用.`ParseQueryString``System.Net.Http`

请注意，您必须将响应正文转换为有效的`Uri`，这样才能`ParseQueryString`正常工作。

另请注意，在 MSDN 文档中，该方法是 Uri 类的扩展方法，因此您需要引用程序集 System.Net.Http.Formatting（在 System.Net.Http.Formatting.dll 中）。我尝试通过名称为“System.Net.Http.Formatting”的nuget包安装它，它工作正常。

```
string body = "value1=randomvalue1&value2=randomValue2";

// "http://localhost/query?" is added to the string "body" in order to create a valid Uri.
string urlBody = "http://localhost/query?" + body;
NameValueCollection coll = new Uri(urlBody).ParseQueryString(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-05T11:22:12.373

这怎么样

```
using System.Text.RegularExpressions;

// query example
//   "name1=value1&name2=value2&name3=value3"
//   "?name1=value1&name2=value2&name3=value3"
private Dictionary<string, string> ParseQuery(string query)
{
    var dic = new Dictionary<string, string>();
    var reg = new Regex("(?:[?&]|^)([^&]+)=([^&]*)");
    var matches = reg.Matches(query);
    foreach (Match match in matches) {
        dic[match.Groups[1].Value] = Uri.UnescapeDataString(match.Groups[2].Value);
    }
    return dic;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-04T22:04:28.673

System.Net.Http ParseQueryString 扩展方法对我有用。我正在使用 OData 查询选项并尝试解析一些自定义参数。

```
options.Request.RequestUri.ParseQueryString(); 
```

似乎给了我我需要的东西。

# c - while 语句中的睡眠函数

> ID：11956954
> 
> 赞同：2
> 
> 时间：2012-08-14T16:42:04.007
> 
> 标签：c

我不明白为什么这段代码不会每秒钟打印一次当前时间。这里有什么问题 ？

```
#include <stdio.h>
#include <unistd.h>
#include <time.h>

int main(int argc, const char * argv[])
{
    while (1) {
        sleep(1);
        time_t tm;
        struct tm *t_struct;
        tm = time(NULL);
        t_struct = localtime(&tm);

        printf("%.2d:%.2d:%.2d", t_struct->tm_hour, t_struct->tm_min, t_struct->tm_sec);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T16:43:40.190

`stdout`可能是行缓冲的，因此您可能需要`fflush`在输出文本后使用它，或者打印换行符以使更改可见。

# xml - 解析 XML 并查找字符串的所有实例

> ID：11956960
> 
> 赞同：3
> 
> 时间：2012-08-14T16:42:23.703
> 
> 标签：xml, powershell, csv

我正在使用类似于以下内容的 xml 文件。然而，它是以下数千倍。我将使用 powershell 来解析 xml

我需要找到字符串“c:\”出现的所有任务的任务名称。虽然如果字符串可能只显示一个区域，这可能很容易，但它可以完全显示在整个任务中。在这个特定的任务中，我将 C:\ 放在了 4 个不同的时间。

我希望得到任务名称的输出，以及给定路径被引用的位置......

```
<Task ID="00000000" Name="Task name goes here" Active="0" NextEID="22" CacheNames="random" AR="0" TT="COS">
        <Info>
            <Description>
            </Description>
            <Notes>
            </Notes>
        </Info>
        <Parameters>
            <moreParameters>C:\pathGoesHere</moreParameters>
        </Parameters>
        <Schedules/>
        <Source HostID="0" Type="FileSystem" Path="C:\path" FileMask="[Parm:parameter].txt" DeleteOrig="0" NewFilesOnly="0" SearchSubdirs="0" Unzip="0" RetryIfNoFiles="0" UseDefRetryCount="1" UseDefRetryTimeoutSecs="1" UseDefRescanSecs="1" UDMxFi="1" UDMxBy="1" ID="11"/>
        <For ID="13">
            <Destination HostID="000000" Type="siLock" FolderID="" FolderType="4" FolderName="Home/[Parm:parameter]/" Subject="" FileName="[OnlyName]_[YYYY][MM][DD].bai" UseOrigName="0" ForceDir="1" OverwriteOrig="1" UseRelativeSubdirs="1" Zip="0" UseDefRetryCount="1" UseDefRetryTimeoutSecs="1" UseDefUser="1" UseDefClientCert="1" ID="12"/>
            <If ID="14">
                <When>
                    <Criteria>
                        <comp a="[ErrorCodeFile]" test="NEQ" b="0"/>
                    </Criteria>
                    <UpdOrig Action="d" ID="15"/>
                    <Destination HostID="0000000000" Type="Share" Path="C:\anotherCPath" FileName="[Parm:parameter]_[YYYY][MM][DD].bai" UseOrigName="0" ForceDir="1" OverwriteOrig="1" UseRelativeSubdirs="1" Zip="0" UseDefRetryCount="1" UseDefRetryTimeoutSecs="1" ID="17"/>
                </When>
            </If>
        </For>
        <If ID="19">
            <When>
                <Criteria>
                    <comp a="[ErrorCodeTask]" test="NNE" b="0"/>
                </Criteria>
                <Email HostID="385322183" Subject="[TaskStatus]-[TaskName]" Message="" AddressTo="email@address.com" Attachment = "C:\path\" UseDefRetryCount="1" UseDefRetryTimeoutSecs="1" ID="20"/>
            </When>
        </If>
    </Task> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T17:14:35.120

假设 XML 位于`file.xml`，然后`XPath`返回您的`Name`属性： String "C:\" 可能位于：

```
//Task[contains(text(), "C:\") or //*[contains(text(), "C:\")] or //*[@*[contains(., "C:\")]]]/@Name 
```

说明：

*   `Task`标签的文字
*   任何孩子的文字
*   在任何孩子的任何属性中

PowerShell 示例：

```
#read xml
$xml = [xml](gc -Encoding utf8 .\test.xml) 

#process it
$xml | 
   Select-Xml '//Task[contains(text(), "C:\") or //*[contains(text(), "C:\")] or //*[@*[contains(., "C:\")]]]/@Name' | 
   % { $_.Node."#text" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:05:14.550

当您转换为 [xml] 时，您可以使用非常好的“属性”语法访问所有内容。具有相同标签的多个节点将作为数组公开。然后，您可以使用 InnerXml 属性获取定义当前节点的原始 XML 字符串。然后你只需要对你的搜索字符串做一个简单的“-like”匹配。

假设您在一个文件中的单个“任务”节点下有多个“任务”节点：

```
$tasks = [xml] (Get-Content .\Tasks.xml)
$tasks.Tasks.Task |?{ $_.InnerXml -like '*C:\*' } | select -expand Name 
```

或者，如果多个文件中的每个文件中都有一个任务节点：

```
dir *.xml |%{ [xml] (Get-Content $_) } |?{ $_.Task.InnerXml -like '*C:\*' } | select -expand Name 
```

这些将为您提供任务名称。获取节点中包含搜索字符串的每一行有点棘手。这是一个 hacky 正则表达式方法（我知道我知道，不要用正则表达式解析 XML ......）。同样，假设每个 XML 文件中有一个 Task 节点：

```
$taskXmls = dir *.xml |%{ [xml](Get-Content $_) }

foreach($taskXml in $taskXmls)
{
   if($taskXml.Task.InnerXml -like '*C:\*')
   {
       $hits = [Regex]::Matches($taskXml.Task.InnerXml, '<[^<]*C:\\[^>]*>')
       $hitList = $null
       if($hits)
       {
            $hitList = $hits | select -expand Value
       }
       new-object psobject -prop @{TaskName = $taskXml.Task.Name; Hits = $hitList}
   }
} 
```

# android - 如何让椭圆大小并排使用三个文本视图

> ID：11956963
> 
> 赞同：1
> 
> 时间：2012-08-14T16:42:30.430
> 
> 标签：android, textview

我已经花了几个小时试图解决这个问题，也许我错过了一些明显的东西......

我试图让三个 TextView 并排放置。我希望它们都一样大，无论它们包含什么文本，如果文本不适合其中一个，则文本应在该特定文本视图的末尾替换为“...”（使用椭圆的帮助）。

| <>TextView>> <>TextView>> <>TextView> |

正如我所说，我需要它们在任何时候都同样大。这可以通过使用权重的 LinearLayout “轻松”完成，但是 ellipsize 将不起作用（或者至少我不会让它工作），因为看起来你需要一个绝对宽度大小才能让它工作。

我一直在尝试使用 LinearLayouts、RelativeLayouts、TableLayouts，最后我结合了 xml 布局和编程方法（这似乎比它需要的要先进得多，但这是我能够成为的唯一方法关闭）。但是，现在我使用绝对宽度（以编程方式设置），但虽然我将它与适当的密度乘数相乘，但它在不同的屏幕上看起来会有所不同。在 4.3 英寸的屏幕上会有一些我可以使用的空间，另一方面，在 2.7 英寸的屏幕上看起来相当不错。

那么有什么想法可以通过布局来实现吗？我也一直在论坛上环顾四周，问题是大多数人只希望一个 textview 具有 ellipsize 功能，而不是全部...

下面你会发现我第一次尝试让它工作，但因为我认为需要一个绝对宽度才能让 ellipsize 工作，所以它不会工作。例如，将宽度设置为“1dp”也不会真正起到作用。

任何建议将不胜感激！

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:layout_marginTop="10dip"

    >
         <TextView
          android:layout_width="0dp"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:editable="true"
          android:ellipsize="end"
          android:singleLine="true"
          >
          </TextView>

      <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:editable="true"
        android:singleLine="true"
        android:ellipsize="end"
         >
       </TextView>

      <TextView
          android:layout_width="0dp"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:gravity="right"
          android:editable="true"       
          android:ellipsize="end"
          android:singleLine="true"       
        >
      </TextView>   
      </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:15:10.660

当我卸下`android:editable="true"`零件时，它对我有用。

如果您希望它成为用户可编辑的字段，请`EditText`改用。那个（afaik）虽然不支持椭圆形。

# highcharts - Highcharts - 使用系列数据进行样条向下钻取的列

> ID：11956965
> 
> 赞同：0
> 
> 时间：2012-08-14T16:42:31.923
> 
> 标签：highcharts, series, drilldown

感谢 stackoverflow 和其他资源，只要样条图只有一组数据，我就能够管理将柱形图向下钻取到样条图。

我现在希望柱形图向下钻取到带有系列数据的样条曲线，以便样条曲线图显示多条线，但我似乎无法让它工作。

这是 JSFiddle：http: [//jsfiddle.net/phdjsep/qjQPm/3/](http://jsfiddle.net/phdjsep/qjQPm/3/)

如果你能弄清楚这一点，你能提供一个简短的解释吗？这几天我一直在桌子上敲我的头。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T01:59:55.967

请看一下这个例子，我必须添加一个额外的 js 函数才能让下钻正常工作：http: [//jsfiddle.net/5De8h/6/](http://jsfiddle.net/5De8h/6/)

```
 function setChartMultiSeries(name, categories, series, color, level, type) {
        chart.xAxis[0].setCategories(categories);
        for(x = 0; x < chart.series.length; x++)
        {
            chart.series[x].remove();
        }
        for(x = 0; x < chart.series.length; x++)
        {
            chart.series[x].remove();
        }      

        for(x = 0; x < series.length; x++)
        {
            chart.addSeries({
                color: series[x].color,
                name: series[x].name,
                level: level,
                data: series[x].data,
                type: type
            });
        }

    } 
```

亚当

# php - 在 PHP 网站上获取 worldpay 支付响应

> ID：11956971
> 
> 赞同：1
> 
> 时间：2012-08-14T16:43:04.200
> 
> 标签：php, worldpay

我正在使用 HTML 重定向方法将 Worldpay 支付网关集成到 PHP 电子商务网站。现在，如果交易成功或失败，我可以通过 Worldpay 的 resultC 和 resultY html 文件通过 GET 方法获得正确的响应。

这是 ResultY.html 代码

```
<meta http-equiv="refresh" content="2;url=<website_url>/response.php?transId=
<WPDISPLAY> ITEM=transId>&cartId=<WPDISPLAY ITEM=cartId>&transStatus=<WPDISPLAY ITEM=transStatus>" 
```

但我的问题是这种方法是安全的，因为它涉及交易，并且根据我从这个 url 获得的结果，我必须为该特定订单更新我的数据库，同时向用户显示他的交易状态。

如果有人有更好的方法，请告诉我。谢谢。

# jquery - jQuery单击后网站导航消失并重新出现（在Chrome中）

> ID：11956973
> 
> 赞同：0
> 
> 时间：2012-08-14T16:43:11.947
> 
> 标签：jquery, html, google-chrome, flicker, nav

单击屏幕左下角的时事通讯时，将运行此功能：

```
$('#newsletterbtn').click(function() {
    $('#newsletterbtn').hide();
    $('.sub').fadeIn('slow');
    $('#email').fadeIn('slow');
    $('#email').animate({width:'97'},'slow');
}); 
```

可以在[www.pickmixmagazine.com/wordpress/上看到](http://www.pickmixmagazine.com/wordpress/)

它在 Safari 和 Firefox 中运行良好，但在 Chrome 中导航会暂时消失并在一秒钟后重新出现，我似乎不明白为什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T03:15:52.177

为了解决这个问题，我确保我的函数返回`false`：

```
$('#newsletterbtn').click(function() {
    $('#newsletterbtn').hide();
    $('.sub').fadeIn('slow');
    $('#email').fadeIn('slow');
    $('#email').animate({width:'97'},'slow');

    return false
}); 
```

# javascript - 当出现弹出窗口时，在后台运行的脚本会停止

> ID：11956977
> 
> 赞同：0
> 
> 时间：2012-08-14T16:43:31.453
> 
> 标签：javascript

我有这个需要在后台运行的javascript方法

```
window.setInterval(function(){
 validateCaseStatus();
}, 3000); 
```

在同一页面上，我有一个按钮，询问用户是否要提交上传的文档。但是我注意到当 popUp msg(alert) 出现时，页面上的脚本不会运行。

有没有办法让脚本继续运行？

我使用此方法检查案例状态是否已更改并禁用 window.onbeforeunload。我的问题是，即使显示弹出警报，是否有办法让上面的脚本保持运行。

```
//cancels onbefore close popup when docs are submitted
function validateCaseStatus(){

     caseStatus = sforce.apex.execute("IFAP_WebService","CheckCaseStatus", {!$caseId});  

    if (caseStatus == "Uploaded" || caseStatus == "Submitted")
    {
         submitted = true; 
        window.onbeforeunload  = null;
        validateCaseStatus = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:47:11.460

尝试使用 WebWorkers。这是一个新的 html5 概念，需要更多的工作，但它们很容易理解并且很有帮助。请参阅[https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers?redirectlocale=en-US&redirectslug=Using_web_workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers?redirectlocale=en-US&redirectslug=Using_web_workers) http://ejohn.org/blog/web-workers/ 和[http://www.html5rocks .com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

# unix - 如何使用 crontab 执行此命令？

> ID：11956979
> 
> 赞同：-1
> 
> 时间：2012-08-14T16:43:36.750
> 
> 标签：unix, cron, crontab

我使用以下命令运行测试列表：“./kaboom testlist”，它是用 Python 编写的。

该命令只能在/e/m/user/testing3/kaboom目录下执行

我想在每晚午夜使用 cronjob 运行这个命令。我在网上找到的唯一示例是预先编写的 shell 脚本。因此，我不确定如何将其格式化为 crontab 以便它执行我想要的操作。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:47:00.727

假设您想每天晚上 10 点运行一项工作，那么 crontab 将如下所示：

```
00 10 * * * (cd  /e/m/user/testing3/kaboom ; ./kaboom testlis ) > /tmp/cronjob.log 2>&1 
```

crontab 条目只包含您要执行的命令。

有关时间的示例，请查看此[geekStuff 链接](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)。

# ajax - 通过ajax设置电话号码

> ID：11956984
> 
> 赞同：0
> 
> 时间：2012-08-14T16:43:55.980
> 
> 标签：ajax, jquery, asp.net-ajax

我正在尝试调用其他文档以获取电话号码。不幸的是，它似乎无法正常工作，并且不会提取正确的电话号码。有没有办法只在代码中设置电话号码？目前我的代码如下所示：

```
 function setTollNo() {
        $.ajax({
            type: "POST",
            url: "/PURLService.asmx/GetTollNo",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(html) {
                $("[id*=tollNo]").html(html.d);
            },
            error: function() { alert('error'); }
        });
    } 
```

我可以按照以下内容提出一些内容吗？

收费号 = 18005557755

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:51:14.080

我想你正在寻找

```
function setTollNo() {
    $.ajax({
        type: "POST",
        data: { tollNo: '18005557755' },
        url: "/PURLService.asmx/GetTollNo",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(html) {
            $("[id*=tollNo]").html(html.d);
        },
        error: function() { alert('error'); }
    });
} 
```

转到[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)文档并搜索“示例”。

# git-svn - git-svn：如何在 dcommit 上更改 svn 用户名？

> ID：11956986
> 
> 赞同：5
> 
> 时间：2012-08-14T16:44:00.363
> 
> 标签：git-svn

我使用`git svn clone`. 那时，我在那个站点没有用户名，因此没有`--username`使用`clone`. 因为我现在可以使用我的新用户名提交到 SVN 存储库，所以我想添加该用户名。没有它，`dcommit`就会失败：

```
% LANG=C git svn dcommit 
Committing to <THE URL> ...
RA layer request failed: Server sent unexpected return value (405 Method Not Allowed) in response to MKACTIVITY request for '/svn/!svn/act/0ceca4c5-f7b4-4432-94be-0485559a6040' at /usr/lib/git-core/git-svn line 945. 
```

有没有办法告诉 git 一个新的用户名？[git-svn 手册](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)似乎没有帮助：只允许在`init`and上添加用户名`branch`。我不知道 git 在内部如何与 SVN 一起工作，但我想应该有一种方法可以在之后添加用户名。

请注意，我在 http 上使用 SVN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-09T07:00:58.430

您可以在`dcommit`命令中指定用户名，例如

```
git svn dcommit --username=isapir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:59:53.507

我认为您可以使用此过程（来自 git svn 手册页）创建现有 svn 存储库的克隆，但更改 git svn init 步骤以指定用户名。然后，您的新 git-svn 存储库将有一个用户名。

```
# Clone locally - make sure the refs/remotes/ space matches the server

    mkdir project
    cd project
    git init
    git remote add origin server:/pub/project
    git config --replace-all remote.origin.fetch '+refs/remotes/*:refs/remotes/*'
    git fetch
# Prevent fetch/pull from remote git server in the future,
# we only want to use git svn for future updates
    git config --remove-section remote.origin
# Create a local branch from one of the branches just fetched

    git checkout -b master FETCH_HEAD
# Initialize 'git svn' locally (be sure to use the same URL and -T/-b/-t options as were used on server)
    git svn init --username my_new_name http://svn.example.com/project
# Pull the latest changes from Subversion
    git svn rebase 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-28T06:11:05.337

请注意，如果您指定用户名，则无法在 Git 2.16.x/2.17（2018 年第一季度）之前提交合并提交。
这是因为 " `git svn dcommit`" 没有考虑这样一个事实，即 带有 a （通常用于推送）的`svn+ssh://`URL引用相同的 SVN 存储库而没有设置选项时会失败 。`username@``username@``svn.pushmergeinfo`

请参阅[Jason Merrill (](https://github.com/jwmerrill) [)的](https://github.com/jwmerrill)[提交 8aaed89](https://github.com/git/git/commit/8aaed892fd50f2d82caebe964994e0d55695667a)（2017 年 9 月 15 日） 。^(（由)^([Jason Merrill合并](https://github.com/jwmerrill))^([——](https://github.com/jwmerrill))^在^([提交 8aaed89](https://github.com/git/git/commit/8aaed892fd50f2d82caebe964994e0d55695667a))^(中，2017 年 9 月 17 日）)[`jwmerrill`](https://github.com/jwmerrill)
^([`jwmerrill`](https://github.com/jwmerrill))

> ## `git-svn`：修复用户名`svn.pushmergeinfo`的处理`svn+ssh`。
> 
> 以前，`svn dcommit`与`svn.pushmergeinfo`set 合并会收到错误消息，例如
> 
> ```
> merge parent <X> for <Y> is on branch svn+ssh://gcc.gnu.org/svn/gcc/trunk, 
> which is not under the git-svn root svn+ssh://jason@gcc.gnu.org/svn/gcc!" 
> ```
> 
> 所以，`remove_username`在`svn info`比较 rooturl 和`branchurl`.

# rest - 支持 RESTful 服务 - 我应该使用 Pragma、Cookie、自定义标头还是其他东西来识别客户端会话和事务？

> ID：11956991
> 
> 赞同：6
> 
> 时间：2012-08-14T16:44:11.623
> 
> 标签：rest, soa

**问题**

我们正在构建一个对服务采用 RESTful 方法的 SOA。一旦系统投入生产，我们将有许多客户使用该接口，包括内部和第三方系统。

我们希望能够在客户端应用程序提供的响应信息中消费和回显，例如：-

*   会话 ID - 可以是 Java EE 会话 ID 或任何特定于客户端的内容，这对于支持团队和调试客户端问题以在我们所有的系统中跟踪它们很有用。
*   Transaction Id - 请求的唯一标识符，如果客户端异步调用服务或我们实现 202 Accepted 样式的长时间运行流程，我们可以将其回显给客户端以帮助客户端进行请求/响应关联。

**潜在的解决方案**

因此，坚持 RESTful 约束意味着我们需要利用 HTTP 来实现这一点，并且我们可以实现几个选项。

*   Pragma header - 为 transaction-id、session-id 等实现 extension-pragmas。这似乎是纯粹的解决方案，因为它使用了标准的 HTTP 标头，尽管我担心它会成为我们无法打扰的所有东西的倾销场好好想想。
*   X-My-Header - 我们需要的每个字段的自定义标题。可能被代理剥离，而不是核心 HTTP，所以感觉反休息
*   在查询字符串或 XML/JSON 表示中 - 将字段添加到我们的所有资源中。因为它是一个操作参数，所以感觉它应该作为元数据而不是资源提供。
*   Cookies - 使用 Cookie 和 Set-Cookie 来保存自定义键值；在会话 id 的情况下很有用，因为大多数实现已经使用 cookie。每次都必须重新发送以支持客户端相关性，这会破坏使用 cookie 的意义。

**答案**

这有什么先例吗？我们疯了吗？在我的所有研究中，我是否缺少明显的东西？没有人真正关心部署后他们将如何支持他们的服务吗？我应该闭嘴走开吗？

我希望有人能帮忙。

PS对不起，如果这是一篇文章，建议确实说“具体”....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:16:28.027

哦，这很痛苦。我也去过那里。

好吧，交易、会话等元数据的想法是个好主意。至少对于日志记录。

问题是要设置符合各种公司策略和 SOA 基础架构的东西。

在 HTTP 的情况下，需要在最佳设计和最大互操作性之间进行权衡。

安全路径是在消息本身中对元数据进行编码。不是很好，而且这样的解决方案最终看起来有点像 SOAP，您有一个包含所有消息标题的信封。

我最终使用 X-header 来获取诸如事务 ID 之类的信息。但是，正如您所提到的，代理/b2b 网关等可能会剥离标头，您可以使用所有指定的开发框架、COTS 应用程序等来检索它们并不明显。因此，如果您这样做，您应该避免强制元数据运行解决方案 - 只是“很高兴拥有”。

饼干只不过是痛苦。它们可能很烦人，有时甚至对浏览器交互很有用，但在 SOA 场景中，这将是一个坏主意。很多事情都可能出错，调试跨组织是一件痛苦的事。

我还会避免将查询字符串与 POST 或 PUT 数据一起使用。根据 HTTP 规范，这是可能的。但在随机框架中实施时则不然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T20:05:19.320

您可以使用 GUID 并让客户端生成它并将其作为启动工作流/业务流程的任何请求的一部分传递。此 GUID 可用于跨参与工作流的多个组件进行关联。

# javascript - Dojo 加载程序不加载回调中使用的小部件依赖项？

> ID：11956992
> 
> 赞同：1
> 
> 时间：2012-08-14T16:44:13.287
> 
> 标签：javascript, dojo, js-amd

我在使用 Dojo 的加载程序时遇到了真正的问题。我发现在这里粘贴代码真的很困难，因为这是一个涉及整个应用程序的问题。我创建了一个名为的小部件`LoginForm`，它的开头如下：

```
define([
"dojo/_base/declare",
"app/globals",
"app/stores",
"dijit/form/Form",
"dijit/_WidgetBase",
"dijit/_TemplatedMixin",
"dijit/_WidgetsInTemplateMixin",
"dijit/layout/TabContainer",
"dijit/layout/StackContainer",
"dijit/layout/ContentPane",
"dijit/layout/BorderContainer",
"dijit/form/Button",
"app/widgets/ValidationPassword",
"app/widgets/ValidationEmail",
"app/widgets/AlertBar",
"app/widgets/StackFading",
"app/widgets/TabFading",
"dojo/_base/lang",
"app/widgets/BusyButton",
"dojo/_base/json",
"dojo/_base/fx",
"dojo/text!app/widgets/templates/LoginForm.html",

], function(
  declare,
 ...
 , json
 , baseFx
 , templateString
 ){
// Create the "login" pane, based on a normal ContentPane
return declare('app.LoginForm', [_WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin ], {

  widgetsInTemplate: true,

  templateString:  templateString, 
```

这是一个使用模板的简单小部件，在模板中还有一些子小部件，如此处所述。

现在......我正在尝试在 Ajax 回调中创建一个 Loginform 类型的对象。然而，装载机让我失望了。

应用程序的主屏幕如下所示：

```
define([
"dojo/_base/declare",
"dijit/_WidgetBase",
"dijit/_TemplatedMixin",
"dijit/_WidgetsInTemplateMixin",
"app/widgets/Dashboard",
"app/globals",
"dijit/layout/BorderContainer",
"dijit/layout/StackContainer",
"dijit/layout/TabContainer",
"dijit/layout/ContentPane",
"app/widgets/SearchPage",

 ], function(
 declare
 , _WidgetBase
...
 , SearchPage

){
// Create the "login" pane, based on a normal ContentPane
return declare('AppMainScreen', [_WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin ], { 
```

...

第三个小部件 Dashboard 只有一个按钮：

```
define([
"dojo/_base/declare",
"app/globals",
"app/defaultSubmit",
"app/stores",
"dijit/form/Form",
"dijit/_WidgetBase",
"dijit/_TemplatedMixin",
"dijit/_WidgetsInTemplateMixin",
"app/widgets/AlertBar",
"app/widgets/BusyButton",
"dojo/_base/json",
"dojo/domReady!",

], function(
  declare
 , g
 , ds
 , stores
 , Form
 , _WidgetBase
 , _TemplatedMixin
 , _WidgetsInTemplateMixin
 , AlertBar
 , BusyButton
 , json
){
// Create the "login" pane, based on a normal ContentPane
return declare('app.Dashboard', [_WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin ], {

widgetsInTemplate: true,

templateString: '' +
    '<div>' +
    '  <div data-dojo-type="app.AlertBar" data-dojo-attach-point="alertBar"></div>' +
    '  <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="form" method="POST"> ' +
    '    <input type="submit" data-dojo-attach-point="button" data-dojo-type="app.BusyButton" label="Create!" />' +
    '  </form>' +
    '</div>', 
```

该表单的 onSubmit 然后链接到一个函数，`"app/defaultSubmit",`其中读取：

```
define([
'app/globals',
'dijit/registry',
'dojo/query',
'dojo/aspect',
'dojo/_base/lang',  
'dojo/_base/json',
'dijit/Tooltip',
'dijit/Dialog',
'app/widgets/LoginForm',
],function(
g
, registry
, query
, aspect
, lang
, json
, Tooltip
, Dialog
, LoginForm
){ 
```

问题是 LoginForm 不起作用，因为 LoginForm 的构造函数不起作用：它说它不能实例化依赖类之一。

现在，如果我将此添加到应用程序的 mainScreen 的 postCreate：

```
var loginForm = new LoginForm({}); 
```

然后，在回调中，LoginForm() 神奇地工作（！）。

我知道我没有发布所有代码，但是就 AMD 中如何处理依赖项而言，我需要了解什么魔法吗？如何确保在回调中解析模块...？

再见，

默克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:14:15.830

*这些评论不会真正适合评论部分。*

我在您的代码中看不到缺陷，但这里有一些需要注意的地方。

**AMD 加载程序的注意事项**

不要对加载顺序做出假设。

```
require(["foo", "bar", function (foo, bar) {
  // use foo and bar
}); 
```

要么 要么`foo`可能`bar`首先加载和调用，因为加载是异步的。唯一可以保证的是它们都会在调用回调函数时被加载。事情`"foo"`解决的是它的`define`函数返回什么；如果这是`undefined`确保函数返回一个值。

避免循环依赖。

```
//bar.js
define(["foo"], function (foo) {
  return {};
});

//foo.js
define(["bar"], function (bar) {
  return {};
}); 
```

行为已定义（请参阅[有关模块的文档](http://dojotoolkit.org/documentation/tutorials/1.7/modules/)），但可能难以管理。检查您是否没有通过传递依赖项（`A`-> `B`-> `C`-> `A`。）

在尝试[解析](http://dojotoolkit.org/reference-guide/1.7/dojo/parser.html)模板之前加载传递模板依赖项。

```
define(["dojo/_base/declare", "dijit/_WidgetBase", "dojo/parser",
        "dijit/form/Button" //need to load this even though it is
                            //not referenced in the function
       ],
        function(declare, _WidgetBase, parser) {

    // pretend this is some custom template format (e.g. DTL)
    var template = "<div data-dojo-type='dijit.form.Button'></div>";

    return declare("foo.Foo", [_WidgetBase, _TemplatedMixin], {
        postCreate: function() {
            this.domNode.innerHTML = template;
            parser.parse(this.domNode);
        }
    });

}); 
```

`_WidgetsInTemplateMixin`在适当的地方使用标准[模板小部件](http://dojotoolkit.org/documentation/tutorials/1.7/templated/)。

此外，请务必阅读[1.7 发行说明](http://dojotoolkit.org/reference-guide/1.8/releasenotes/1.7.html)中的​​问题和注意事项。

*注意：此代码未经测试。*

* * *

*顺便说一句，数组上的尾随逗号将导致 IE7 中的错误。*

# sas - SAS SQL 日期格式

> ID：11956993
> 
> 赞同：1
> 
> 时间：2012-08-14T16:44:26.710
> 
> 标签：sas

只是想知道如何更改以下查询以我想要的格式显示日期。我正在使用 SAS 来提取这些数据。

现有日期格式：15MAR2011:09:05:16.000000

我想要的格式：15MAR2011:09:05:16

我正在使用的查询：

```
proc sql;
create table data.test as
select       * from connection to odbc
(
select     ID,
             DATE AS CREATION_DATE,

from         maintable
);
quit; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:59:10.030

A`format`影响 SAS 显示变量值的方式。它不影响实际值本身。

因此，假设变量 CREATION_DATE 是一个日期时间值，只需将其指定为 DATETIME20 格式。显示是你想要的：

```
proc sql; 
   create table data.test as
   select ID, CREATION_DATE format=datetime20.
   from connection to odbc 
   ( select ID, DATE AS CREATION_DATE
     from maintable );
quit; 
```

但是，某些 ODBC 接口会将您的日期列作为字符串返回，因此您需要确保它在 SAS 端显示为正确的日期时间值。

# ruby-on-rails - @font-face 无法选择我的自定义字体

> ID：11956995
> 
> 赞同：0
> 
> 时间：2012-08-14T16:44:30.323
> 
> 标签：ruby-on-rails, fonts, font-face

我正在使用 CSS 中的以下行在我的 rails 应用程序中导入一些自定义字体：

```
@font-face
{
  font-family: "SquareSlabLite";
  src: url("/assets/squareslablite.ttf");
}

@font-face
{
 font-family: "SquareSlabBold";
 src: url("/assets/squareslabheavy.ttf");
}

@font-face
{
  font-family: "SquareSlabMedium";
  src: url("/assets/squareslabmed.ttf");
} 
```

当我转到位置 localhost:3000/assets/ *font* .ttf 时，会显示相应的字体以供下载。但是，当我尝试使用字体时，例如：

```
h2{
  font-family: "SquareSlabLite";
  } 
```

此行仅在我使用 SquareSlabBold 时有效。当我尝试使用此文本的 Lite 或 Med 版本时，我什么也得不到，只是出现了一个通用字体。当我检查萤火虫时，会出现粗体，但不会出现精简版或中等版本。我很困惑。我检查了拼写，重新下载了文件，但什么也没有。

用 squareslab medium 和 lite 来解决这个问题是不可能的吗？即使我从不同的来源下载了 ttf 文件，它们是否有问题？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:49:59.470

并非所有地方都支持 TTF。而且，如果您使用 IE 来查看此字体，则很难准备 TTF 以使其在每个 IE 中都能正常工作。尝试[http://www.fontsquirrel.com/fontface/generator/](http://www.fontsquirrel.com/fontface/generator/)从您的 TTF 生成适当的网络字体。