# StackOverflow 问答 11527000-11527999

# asp.net-mvc-3 - KendoUI 网格过滤器不起作用

> ID：11527001
> 
> 赞同：2
> 
> 时间：2012-07-17T16:38:25.627
> 
> 标签：asp.net-mvc-3, filtering, kendo-ui

我刚从剑道 UI 开始。我有一个包含 Kendo Grid 的 .NET MVC Razor 项目。我的页面加载良好并且看起来不错 - 数据在网格中，但我有两个问题：

1.  当我单击“过滤器”图标时，什么也没有发生（没有弹出，什么都没有）

2.  当我运行该页面时，我在 kendo.all.min.js 文件中的 Visual Studio 中出现错误（`Error: Microsoft JScript runtime error: Object doesn't suport this action. Code highlighted reads "d.transport=new n.data.transports[a.type](c(h,{data:i}))"` 在 firebug 中运行会出现此错误：`"n.data.transports[a.type] is not a constructor"`

我正在使用 List(CustomViewModel) 类型的模型。我已将以下脚本和 css 添加到我的 _Layout 部分视图中：

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/kendo.all.min.js")" type="text/javascript"></script> 
```

（我尝试使用“kendo.web.min”和“kendo.aspnetmvc.min”代替“kendo.all.min”，得到相同的结果，但错误出现在 kendo.web.min.js 中）

我的页面如下所示：

```
@model List<CustomViewModel>
...
@(Html.Kendo().Grid(Model)
    .Name("applicantGrid")
    .Columns(columns =>
    {
        columns.Bound(p => p.ApplicationID);
        columns.Bound(p => p.FirstName);
        columns.Bound(p => p.LastName);            
    })
.Sortable()
.Filterable()  
.Pageable()        
) 
```

我的视图模型如下所示：

```
public class CustomViewModel
{
    [ScaffoldColumn(false)]
    public Guid CustomViewModelID { get; set; }

    [Display(Name = "First Name")]
    public string FirstName { get; set; }

    [Display(Name = "Last Name")]
    public string LastName { get; set; }
} 
```

我注意到在剑道示例（[http:](http://demos.kendoui.com/web/grid/local-data.html) //demos.kendoui.c​​om/web/grid/local-data.html ）中，当光标位于过滤器图标上时，它是一只手。在我的页面上，光标在过滤器图标上时是一个箭头。

排序工作正常。我还稍微调整了这个示例以使选择和编辑按钮正常工作，但过滤器无法正常工作。

我尝试在剑道论坛上发帖，但没有得到回应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:03:57.220

试试这个：

添加到您的 ASP.NET MVC 布局页面：

```
<script src="@Url.Content("~/Scripts/kendo.web.min.js")"></script>
<script src="@Url.Content("~/Scripts/kendo.aspnetmvc.min.js")"></script> 
```

有关更多信息，请参阅：[http ://www.kendoui.c​​om/documentation/asp-net-mvc/introduction.aspx](http://www.kendoui.com/documentation/asp-net-mvc/introduction.aspx)

并下载最后一个脚本版本。显然早期版本`kendo.web.min`没有 .Filterable() 选项。

# iphone - iPhone应用程序在单击按钮时崩溃

> ID：11527006
> 
> 赞同：0
> 
> 时间：2012-07-17T16:38:36.967
> 
> 标签：iphone, ios, xcode, object, nib

我在情节提要中制作了项目，由于自定义 UITableViewCell 的问题，我制作了一个新项目，将所有数据复制到我的新类中，并将我的按钮、图像等从情节提要视图复制到新项目的 nib/xib 文件中。

现在，当我单击任何按钮时，我的应用程序崩溃而没有任何错误，它会打开委托文件并突出显示这行代码

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([ThisOrThatAppDelegate class])); 
```

我已经为从 IB 到控制器的所需操作建立了连接。我也尝试过 Command+Shift+K 来获得干净的代码。但问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:40:43.190

您必须首先找出问题所在：

*   使用调试构建配置并使用 lldb 或 gdb
*   确保所有异常都有断点
*   确保您启用了左上角的“断点”按钮。
*   运行应用程序

你应该闯入调试器。您需要达到调试器捕获异常的程度。

然后编辑您的问题并告诉我们您遇到了什么异常。我猜你会得到一个 objc_msgSend() 错误，这意味着某个对象正在尝试向一个不存在或已解除分配的对象发送消息。如果事实证明这是真的，那么您可以启用“僵尸”（让所有对象都留在周围）并查看其中一个是否收到消息。

如果似乎没有任何帮助，那么您需要做的是开始添加 NSLog 消息以在您的应用程序出现时跟踪它（或使用断点，您的选择）。这需要很长时间，因此您可能会向后工作 - 查看您的 appDelegate application:didFinishLaunchingWithOptions: 是否被调用，以及是否已完成。

不幸的是，这类问题可能需要花费大量时间才能找到。一些对象可能已经为主队列中的另一个对象排队了一条消息，所以当你遇到崩溃时，你看不到谁在什么时候做了什么。

此外，对于 objc_msgSend 问题，当调试器停止时，您无法轻松查看收到消息的对象 - 但如果您关闭调试器并让应用程序实际崩溃，您可以在控制台应用程序中找到崩溃报告并从中获取更多信息。

# javascript - 有没有更好的方法来访问使用 JQuery 选择器选择的第一个元素？

> ID：11527007
> 
> 赞同：0
> 
> 时间：2012-07-17T16:38:38.477
> 
> 标签：javascript, jquery, html

有没有更好的方法来写这个，所以我不必使用 [0] ，所以我可以通过 JQuery Text 而不是 innerText 访问文本？我不想使用 innerText 来实现跨浏览器兼容性。

```
$('#' + controlBestPractice)[0].innerText 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T16:39:57.660

如果您的选择器返回多个元素（我们真的不知道里面是什么，例如它可能是），[请先](http://api.jquery.com/first/)使用：`controlBestPractice``#div-id p`

```
$('#' + controlBestPractice).first().text() 
```

正如 bhamlin 在评论中指出的那样，您似乎正在使用 id 选择器，所以*应该*只有一个元素，所以这应该可以工作：

```
$('#' + controlBestPractice).text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:40:59.617

你可以尝试这样的事情：

```
$('#' + controlBestPractice + ':eq(0)').text(); 
```

或者

```
$('#' + controlBestPractice).first().text() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T16:42:54.440

你们为什么要这样做`.first()`？这是一个ID，应该只有一个。

```
$('#' + controlBestPractice).text() 
```

会很好用

[演示](http://jsbin.com/ojojih)

我想您可能需要`.first()`在以下情况下，但这只是一种糟糕（令人困惑）的选择方式：

```
<div id="foo">
    <div class="bar">a</div>
    <div class="bar">b</div>
    <div class="bar">c</div>
</div>

controlBestPractice = "foo .bar";
$('#' + controlBestPractice).text(); // returns abc
$('#' + controlBestPractice).first().text() // returns a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T16:43:11.583

你不需要在`[0]`最后添加，因为它是一个 id 选择器。表示您通过`#`id 进行选择，并且由于 id 是唯一的，因此 jQuery 将只返回一个元素。

# .net - ViewFinity 的 .Net 代码签名

> ID：11527010
> 
> 赞同：0
> 
> 时间：2012-07-17T16:38:41.980
> 
> 标签：.net, code-signing

我的公司使用 ViewFinity 来验证允许以管理员权限运行的应用程序。

我有一个需要管理员权限的 C# 应用程序，它将分发到我们公司内的每个桌面。因此我们需要在 ViewFinity 中创建一个规则来授权这个应用程序。我们希望验证应用程序的发布者，因此它不仅仅是某人在他们的桌面上重命名的一些随机应用程序。

我们使用 Microsoft 证书服务生成了一个证书，我使用该证书（pfx 文件）签署了我的应用程序。这不是一个自签名的应用程序，这是一个合法的证书。

我可以运行 StrongName 验证工具来验证应用程序是否有效。我可以查看清单并查看公钥。如果我右键单击可执行文件并单击属性，我看不到“数字签名”选项卡，所以显然我做错了。

当我运行应用程序时，ViewFinity 看不到应用程序的作者（或发布者）。我需要做什么才能让 ViewFinity 确定发布者。它不应该从证书中提取该信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:50:18.163

好的，我通过单击 Visual Studio 中签名选项卡上的复选框对其进行签名。这还不够。我仍然必须运行 signtool 控制台应用程序。一旦我这样做了，当我右键单击 exe 并选择属性时，我实际上可以看到“数字签名”选项卡。

# jquery - JQuery JSignature 重新创建

> ID：11527014
> 
> 赞同：0
> 
> 时间：2012-07-17T16:38:53.617
> 
> 标签：jquery, jquery-plugins

我正在使用 JQuery JSignature。当我通过创建签名时

```
 $("#signature").jSignature("setData", strval, 'image'); 
```

其中 strval 是您在下面看到的字符串 - 我收到错误消息。（jQuery.jSignature 上不存在方法 setData）。我的问题是我应该用 jSignature 重新创建一个签名：

“数据：图像/png；base64，iVBORw0KGgoAAAANSUhEUgAAAcIAAABkCAYAAAAVKjACAAAID0lEQVR4nO3dO4gdVQDG8Q + tLO2DpNRWRTtBEcUiiJBCQaIgioVgVGRLFYxiYWGvIGilYmM6YxVRSSKID9TCiC + IrmZJsknu7t47azE73JvZmTmPOWde5 / + + DqZKde87MvfPNec1IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACk7LCkmaS5pMXelk1wm0v6MdAxAwAM1GXtD7Jdttot2zteM5 + DDQDo33XKWzoEXviALFqRz1mfDQBAJ9aUt2L6DotUt6IVuWk6UQCAcC6oXauvPF62UN7amSkfI0zFV1q2oEO3oot97nRWGwCYuC25Xayzvb Bn23FDci5pKOd1QYARmout4vsQtI7vZQ0HccVvhWZSfqyy0oAwJAVLRGX8Huxl5Ji1UMKE5AL0VIEkCCX8Cu61TAeMy2XsRCKALBnU27hx6SLaflE7i1 / QhHAZNis9SP80kEoAkjKTIQf6hGKACbtFxF + sEcoApiUNVWHIGDjqNyeIMSSDACDQwgiFEIRwOhUdW8BIfh0nz7bS0kBJKvqIrXWa4kwVT4tRcanAURV9Yi0K72WCKlwbSkWD18HgGCqlklw940 + uIZiEYyX + igsgGn4VNVjM0DfHpT74954rB8AZ8wQxVhckl9rkS5 + ALXKFxVCEGNCaxFAK1UXkId7LRHgb0d + b8wAkLDyRYHJBpiK3 + S + XhFAYsrrt5ghiimzeYMKgQgkpnxRAFJxWeZQJBCBBBCEgLQl8 + QaABNFEAJLO6KFCCSHIAT2MwUiY + nAhBCEQL2mQMwk / dpf0QCEQhACZqZABDBiBCFgR + rNLPxugJEjCAE3h8RLq4FJIQgBP / x2gIngxwz44bcDTET5x8xzRgE7BCEwETPt / 0HzehrArCkIH5W0rXwBfvGKqLFtC + WzZR9peZyAUaga + GdKOHCt1XBzfc3T1LYiLOeSzrc5qMCQEIZm5Td1YDou6tqWW99BM / atOI48gQejU77QF9t2n4UaEMaEpoWWXbfBeMLutAD921b9Fzl1BOG4nVS84CuPq / 3UUZ26ELK1nCl / 08eQnFJ + ztqO5y6UdxV / 323xEct3qv8ip9w6JAjHZ0t + F + / yBa5pH6l7RcsgcQnLWJPy1rU / 0PpuEVd9r + aS7o50DBBQ3Rco1dYhQTgOrl2emfLZ01XqHqlW / N1bsSoxEVWz0stbm1dbva9pdHFnYtLRoM1Uf / KG1sURG0E4TD5dnpmkdxv22fSi3kzSZvhqTNqHaj5HmaQ7LfYzN + xnClvRC4EBonWYbr2HyLXLs + iKMrlq2G / KQwOh1E3K29W1YfivwoVe3RrJU5Hq + IXy71ubLtpM0sFI5UMLTa3D / 3osVxfKLQSCsFu / Y + 9CUtflWWYKQO7Qw2vqdm7TkjrWZSVasunWPdhX4dCs7sRN + WJRrusD / RZn8o7Ib + zH1OVZZgpAbnjiuSD / FL / RwlrvvNTxfKvq40E3 / ICltMyi / OWcYh2HwGf8x7bLs8wmAJ / 2rwoqbKhd8KXy6MentL / + + GLAjah47HPt4Sl3Yc4EMo83SBt + JWgRgd 6X / 4zOTHl3eKqYmDdCTYPfxZd6TGOITfV5vcdyjV2b4GvbGjBN4ycAw9hU + wkuUx5isUUQjpRtf / 9C0sv9FLGRzUXaduIFcm2Cb6G8x6Etm5s0AtCfb6uvOMdV / 3a40xoMT / m4cGMwQi53hH0 / bmlbdmVlTNCOb / AVxzhUV5jNIm4C0J9Pqy + TdHZlH3UheLWTGgxX1cz8i72WCK3tyC0Ui7U9n0csk234cSdm9ofaBd + VwOUxtf4IQD9vy7 / FV6XqPHGzKT0jrkGT9pjsLlKmH5bv5vo5dIHWe0 / + 3Z2hg0 +雅/ 1xQXHnO4P3bNXOVlRdBzg3OY5LYob2bMBMvDfNxPVGJlbwuZSHmxp7Hyhsq68KIViPJVqJu6J + QpHwM3Pt2o4ZfJL9GCQXV3u3yP1RdacdP + N0zWdwnqSvVX1sDvRZKAzDBS27Zny6N6t + vFNY19iFf2R / vGMvcHbpnqP15862Ve17w3ir0nwKlY26ANyVuXsZQES2ra3HI3z2Gfl1mad + QfWxoebgW0i6ueVnNIVsKk + IqdIUgLuS3uivaABMi83 / DPQ5J5S3zNuME9P689PUDZpJ + ijAZ5je3 / hCgM / o2jHlDwTZUr68Y3XbXNleatjHKZl / Y3fEKT4Ak3XV / zBtu5K3FPeN4EUrZaNNRRPX1EILMVa + 07D / sT0u7WP5fYeLMfUbVvZFAAIDV3f3HmopStvgezJe1ZNxUc3H2VUxYcn2uzD0cfkDivOyX9MaWwIQGIihLGFhIlN4TS1Am27QYn2m73dk6GO3n6m / 2eq3d1A / AA5i / + iLbaE87N7splpJekLmi3tVN6hrK890vofoPvnVb676F / 26vCyaAAQGrE24zRV / 7SDMbJa8FAFVvIYqRGtoLMuSfpZdfTNJ55Uv + 6jzt + W + CEAA6MC67AIw9XW4prrdVPE3PyjMsQMABLY6O7dti64uGBaSXu2qQpE1LRcJNREs0 / INESDL / wYACCxG6L3WaQ26FeNmoRx + q46X /吨/ 1caoFAOlqG3oxX3E2RKFCL5N0zuLz7pL0zcrf3hOuKgAAye3izUPl / QLvr5afeW5vf9tyf0A5AACj97yW4crTkAAAyTmkZRCe6bksAAB07kZJ9 + 5TT / VcFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOvI / oiQ3tI2E + lUAAAAASUVORK5CYII =”

我如何

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:22:58.517

采用 ：

```
$("#signature").jSignature("importData",strval); 
```

# jquery - 另一个 jQuery 移动重定向

> ID：11527016
> 
> 赞同：1
> 
> 时间：2012-07-17T16:39:00.447
> 
> 标签：jquery, redirect, mobile

我有一个网站`header()`在提交表单后使用奇怪的 PHP 命令重定向到另一个页面。jQuery mobile 重定向没有问题并显示正确的页面。

它不做的是更新 'data-role="page"' div；它似乎只更新 'data-role="content"' div 中的任何内容。这会混淆网站的位置。如果我在重定向页面（第 2 页）上点击刷新，我最终会得到重新加载表单的页面（第 1 页）。

经过大量搜索，我发现如果我在表单上使用 'data-ajax="false"'，这可以解决问题。问题是，这是最好的方法，还是有办法在 ajax 中执行重定向？我可以将其更改`header()`为其他更 jQuery mobile/ajax 友好的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:48:50.950

除了 ajax false 我知道解决这个问题的唯一方法是添加`data-url='redirect_url_here'`到 div 中`data-role='page'`。

# asp.net - IIS 7.5 中无扩展 url 的 ASP MVC 2 处理程序不起作用

> ID：11527020
> 
> 赞同：1
> 
> 时间：2012-07-17T16:39:16.170
> 
> 标签：asp.net, asp.net-mvc-2, iis-7.5, httphandler

我有一个带有 HttpHandler 的项目，它应该在`localhost/foo/bar`请求这样的无扩展名 url 时执行。我在本地 Visual Studio 开发服务器上正常工作（通过使用`<httpHandlers>`in`<system.web>`而不是`<system.webServer><handlers>`）但是当部署到 IIS 7.5 时此功能不起作用（标准 404 错误：http: [//i.imgur.com/YuNjT.jpg](http://i.imgur.com/YuNjT.jpg)） . 此问题不仅限于无扩展名 URL（我可能会在最后添加任何扩展名并且问题仍然存在），但我想要的功能是在这种情况下使用无扩展名 url。我用谷歌搜索了一些信息，即无扩展名 URL 可能会导致一些问题，这就是我在这里提到它的原因。AppPool 设置为集成。我做了aspnet_regiis.exe -i。我在 IIS 服务器上安装了 Http 重定向功能。这是我的处理程序配置：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
        <add name="FileDownloadHandler" path="/Home/Files/*" verb="*" type="MvcApplication1.FileDownloadHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode" />
    </handlers>
    <directoryBrowse enabled="true" />
</system.webServer> 
```

这是我的路由设置：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.IgnoreRoute("home/files/{*pathInfo}");

routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

我猜代码没问题，但我的 IIS 配置出了点问题。谁能指导我正确的方向？我已经用谷歌搜索了几天，但找不到对我有帮助的解决方案。这是一个示例项目（适用于本地 VS 开发服务器，但不适用于我的 IIS）： http: [//mapman.pl/MvcApplication1.zip](http://mapman.pl/MvcApplication1.zip)

当您构建（并部署到本地 IIS）时，上述解决方案尝试请求这样的 url：`http://localhost/MvcApplication1/Home/Files/foobar`

提前致谢， 巴特克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:43:53.857

在您的 web.config 中替换：

```
path="/Home/Files/*" 
```

和：

```
path="Home/Files/*" 
```

这样做的原因是，当您在 IIS 中托管应用程序时，会有一个虚拟目录名称，并且正确的路径是`/MvcApplication1/Home/Files/*`而不是`/Home/Files/*`. `path`通过在属性中使用相对 url，可以轻松解决此问题。

# objective-c - 动态 UIView 到 UIImage 是空白的

> ID：11527021
> 
> 赞同：0
> 
> 时间：2012-07-17T16:39:19.010
> 
> 标签：objective-c, ios

我正在尝试创建一个 UIView，在其中添加 2 个 UIImageView 并从中创建一个 UIImage 。这是我使用的方法，但我得到一个空白的 UIImage。

这是我使用的代码：

```
-(UIImage*)getFinalImage{

    CGRect rect = CadreImage.frame;

    UIView *dynaView = [[UIView alloc] initWithFrame:rect];
    UIImageView *frontCadre = [[UIImageView alloc] initWithImage:TheImage];

    [dynaView addSubview:frontCadre];

    UIGraphicsBeginImageContextWithOptions(dynaView.bounds.size, dynaView.opaque, 0.0);
    [dynaView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return img;
} 
```

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:50:12.520

这是我用来抓取图层/屏幕截图的代码（注意这是针对整个屏幕而不是特定图层+处理视网膜显示）：

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
    UIGraphicsBeginImageContextWithOptions(self.view.window.bounds.size, NO, [UIScreen mainScreen].scale);
else
    UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

是否也可以设置断点，通过程序跳转来验证TheImage不为nil？

# gmail - 谷歌驱动器使用谷歌驱动器查看器（谷歌应用程序脚本）下载整个文件夹内容

> ID：11527024
> 
> 赞同：6
> 
> 时间：2012-07-17T16:39:22.980
> 
> 标签：gmail, google-apps-script, email-attachments, google-drive-api

我创建了一个谷歌脚本，它可以转到我的邮件并获取附件并将​​其放入一个文件夹（与任何有链接的人共享），并与任何给定的电子邮件共享文件夹的链接。但是当其他人打开带有链接的文件夹时，它会在谷歌驱动器查看器（在线）中打开。必须打开每个文件才能下载。有什么办法可以让他们以更轻松的方式下载整批？我已经尝试在该文件夹（文件夹父级）内创建一个文件夹（比如说文件夹子级），然后将所有文件放在文件夹子级中。但仍然是同样的问题。必须打开该文件夹子并在其中打开文件并一一下载。压缩附件不是我的解决方案的选项。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:16:21.280

他们应该回到自己的驱动器，选择“与我共享”选项，勾选所需文件夹并使用“更多”->“下载”选项下载压缩文件中的所有内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-16T07:55:08.560

如果您通过 Google 驱动器共享地图并通过电子邮件发送链接，则您的链接具有以下格式的 URL： [https://drive.google.com/a/FOO/folderview?id=BAR&usp=sharing_eid](https://drive.google.com/a/FOO/folderview?id=BAR&usp=sharing_eid) 其中 FOO 是您的组织和 BAR 是文件夹的唯一 ID（类似于 i3AV_u1UsLmTa-dOm22I2XXgioDR8）

将此网址更改为以下 [https://drive.google.com/drive/#folders/BAR](https://drive.google.com/drive/#folders/BAR)

现在您可以单击文件夹的名称并下载所有文件。注意：这是今天（2015 年 1 月）在 GAFE（Google Apps For Education）环境中有效的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-03T04:21:39.567

右上角有 OPEN IN DRIVE 选项（如果您使用 google 帐户登录）。它会在你的谷歌驱动器上放置一个同名的文件夹。然后您可以右键单击该文件夹并选择下载选项（将制作并下载 zip 文件）:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T13:53:40.013

当他们在他们的谷歌驱动器中查看文件夹时，他们没有选择它的选项，点击“更多”按钮并选择“下载”吗？

如果没有，这似乎是 Drive 上的一个错误，您应该在 Drive 论坛/问题跟踪器中报告它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-11T12:55:06.880

首先选择文件，我在选择要下载的文件后得到该选项；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-21T12:44:59.723

我没有足够的声誉来评论 user906489。他的 URL 有效，除非在使用多个 google 帐户*并且*URL 不应*引用*第一个帐户的情况下。

在这种情况下，只需插入`u/USERID/`after `https://drive.google.com/drive/`，这样 `https://drive.google.com/drive/#folders/BAR` 就变成 `https://drive.google.com/drive/u/USERID/#folders/BAR` 了 USERID 是您的谷歌帐户的数字（大于零）。

# python - MacPort：全局不接受 --set

> ID：11527032
> 
> 赞同：0
> 
> 时间：2012-07-17T16:39:56.297
> 
> 标签：python, macports

我正在尝试将我的默认 python 更改为 python27，我执行`sudo port --set python27`但最终在我的 Mac Lion 10.7 上出现以下错误`Error: global does not accept --set`。我试图查看 MacPorts 是否已弃用 --set 命令并引入了一个新命令。但我无法在他们的新闻网站上找到与此相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:59:11.680

-set 仍然存在。您遇到的问题是您缺少命令的几个参数。

应该是`sudo port select --set python python27`port命令采取一个动作，这里是select。port select --set 然后将在这种情况下为 python 选择的组作为第一个参数。

# xcode - iOS Xcode - 可达性 (TonyMillion) - 如果 iOS 应用程序没有网络连接，则显示警报

> ID：11527034
> 
> 赞同：0
> 
> 时间：2012-07-17T16:39:58.183
> 
> 标签：xcode, ios5, reachability, network-connection

我一直在尝试将这个（[https://github.com/tonymillion/Reachability/](https://github.com/tonymillion/Reachability/)）实现到我的 iOS iPhone 应用程序中 4 个小时。我已经看到了关于它的其他问题，但没有一个明确显示如何实现代码。有人可以帮忙吗？

我想要做的就是在它们未连接（或失去连接）到网络（WiFi 或蜂窝网络）时显示警报。

有人可以告诉我把什么代码放在哪里吗？非常感谢！如果需要，我可以发布代码或任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:49:12.277

在此处查看 Apple 可达性示例代码：http: [//developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_ReachabilityAppDelegate_m.html#//apple_ref/doc/uid/DTS40007324-Classes_ReachabilityAppDelegate_m-DontLinkElementID_4](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_ReachabilityAppDelegate_m.html#//apple_ref/doc/uid/DTS40007324-Classes_ReachabilityAppDelegate_m-DontLinkElementID_4)

我希望这会有所帮助，如果您需要问什么，请将其放在评论中，我将编辑我的答案。

# windows - 选择日期范围以使用 RowFilter 过滤 DGV

> ID：11527037
> 
> 赞同：1
> 
> 时间：2012-07-17T16:40:21.340
> 
> 标签：windows, vb.net, date, datagridview, datepicker

我正在通过日期选择器控件获取日期，但没有取得任何成功，任何人都有任何建议。

我试过了：

```
Dim fromDate As New DateTime(startdate_picker_search_supplierinvoice.Text)
Dim toDate As New DateTime(enddate_picker_search_supplierinvoice.Text)

query &= "supplier_invoice_date >= '" & fromDate & "' AND supplier_invoice_date <= '" & toDate & "'"
invoicesresults_datagrid_search_supplierinvoice.DataSource = SelectDataTable(dt, query) 
```

**错误：**从字符串“2012 年 7 月 17 日星期二”到类型“Long”的转换无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:55:38.403

不要使用`.Text`返回完整写出日期的属性。而是使用：

```
Dim fromDate As DateTime = startdate_picker_search_supplierinvoice.Value
Dim toDate As DateTime = enddate_picker_search_supplierinvoice.Value 
```

然后是“.ToString”扩展名。

```
query &= "supplier_invoice_date >= '" & fromDate.ToShortDateString & "' AND supplier_invoice_date <= '" & toDate.ToShortDateString & "'"
invoicesresults_datagrid_search_supplierinvoice.DataSource = SelectDataTable(dt, query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:01:54.530

问题是您正在声明一个 DateTime 对象，并且您正在使用的构造函数是预期的（记为 Long）。你应该使用

```
Dim toDate As DateTime
toDate = enddate_picker_search_supplierinvoice.Value 
```

请注意，.Value 返回日期，而不是字符串。

# c++ - C++：关于内存管理，指针本身是如何处理的？

> ID：11527038
> 
> 赞同：1
> 
> 时间：2012-07-17T16:40:33.203
> 
> 标签：c++, memory, pointers, memory-management, memory-leaks

我有一个相当简单的问题；我有包含指向对象的指针的数组。我有时会从这些数组创建变异数组，并且只在一个方法中使用它们。后来我就不需要了。在这种情况下，我不希望在继续使用原始数组时破坏指向的数据。我不完全理解的是在我的临时数组中创建的指针（不是数据本身，而是指针）会发生什么？内存如何处理它们。据我所知，指针只能指向一个地址。你不能“删除”它们。

谁能给我更多的见解？一直以来，我都觉得我的记忆力有问题。

在这种情况下，列表是我的“包”，它是数组实现的对象包装器。但是，由于它包含索引之间的间隙，我使用 getGapless 来获取一个不包含 nullptr 索引的包。

我最后删除了我的包，但它并没有删除实际的内容（这是用不同的方法完成的）。

那么我的“玩家”包中的那些指针什么时候超出范围？

```
virtual void processEntities(artemis::ImmutableBag<artemis::Entity*>& bag)
{
    artemis::Bag<artemis::Entity*> * list  = (artemis::Bag<artemis::Entity*>*)this->world->getGroupManager()->getEntities("HUMAN");
    if(list == nullptr) return;//Kill function

    artemis::Bag<artemis::Entity*> * players = list->getGapless();

    for(int i=0; i<players->getCount(); i++)
    {
        for(int j=i+1; j < players->getCount(); j++)
        {
            if(intersects(*players->get(i),*players->get(j))){
                std::cout << "Collide YEAH \n";
            }
        }
    }
    delete players;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T16:45:13.550

不，别担心！您可以将指针视为以与`int`s 或`double`s 相同的方式进行管理（至少在内存方面）。指针本身就像一个`int`恰好包含某个其他对象或对象数组的地址的指针。一旦指针从作用域中消失，指针本身的内存将自动恢复。

例外情况是，如果您正在执行类似的操作`int** p = new int*[1]`，即使用 . 创建指针`new`。然后你会在某些时候需要`delete p`。

如果您正在创建指针`int* p = new int[size];`（这可能是您想要的），那么`p`它本身就在**堆栈**上，这意味着您不需要关心内存释放，但是`p`指向的数组在**堆上**，这意味着您将需要在某个时候释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:47:46.437

指针是普通变量。它们没有以任何特殊方式处理。指针变量和整数变量在这方面没有区别，因为指针数组和整数数组在这方面没有区别。

语言中所有变量的内存管理完全取决于您。如果你声明一个局部变量，当控制离开它的块时它会被自动销毁。如果您动态分配/创建对象，那么您必须明确地取消分配/销毁它们。等等。指针绝对没有什么特别之处。它们就像任何其他变量一样。

基本上，不清楚您为什么要问这个问题，因为您的问题似乎解决的问题实际上并不存在。你能举个例子说明你问这个的原因吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:53:29.057

指针只保存地址，'int' 保存整数的方式相同。如果你有一个整数数组，并且你使用基于它的变异数组，然后去掉变异数组，原始数组保持不变；在这里真的没有什么不同。

变异数组中的值消失了，但由于它们是副本（无论它们是整数还是指针或其他），它不会影响原始数组。

# iphone - 如何使用 CFMutableArray

> ID：11527040
> 
> 赞同：0
> 
> 时间：2012-07-17T16:40:36.070
> 
> 标签：iphone, objective-c, core-foundation, cftypes

我正在使用 AVFoundation 框架读取视频文件并将图像缓冲区作为 CMSampleBuferRef，我使用 CFArrayAppendValue() 函数在 CFMutableArrayRef 中添加了缓冲区。

但是如果我想从那个数组中检索，有什么办法吗？

[CFMutableArrayRef](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFMutableArrayRef/Reference/reference.html)的 Apple 文档没有提供从数组中检索的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T16:47:59.133

您正在寻找 CFArray function`CFArrayGetValueAtIndex`或类似的东西。CFMutableArray 的“继承”自 CFArrays，而 CFMutableArray 上的文档仅包含与 CFArray 不同的 API。

[请参阅此处](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/doc/uid/20001192)的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T16:57:47.667

除了使用 Matt 指出 (+1) 的 API 之外，`CFMutableArray`它还与`NSMutableArray`. 您可以简单地将 a 的实例`CFMutableArray`转换为 an`NSMutableArray`并使用`NSMutableArray`'s 方法（或相反）。继施以至`NSMutableArray`，即可使用`-[NSArray objectAtIndex:]`。

许多 Foundation 类型都有 CoreFoundation 对应的免费桥接。作为免费的桥接类型，演员表不会引入促销或转换。将它们视为相同的类型，并且可以将实例转换/转换为它们的 CF-NS 对应物，而不会引入开销或更改实例。从技术上讲，如果您的实现使用 NS 类型而不是 ARC 下的 CF 类型，则可能会引入隐式引用计数。

如果您使用 ObjC 编写并且更熟悉 ObjC API，这可能会很有用。

# java - Vaadin JPAContainer JDBC 连接使用

> ID：11527049
> 
> 赞同：3
> 
> 时间：2012-07-17T16:41:18.743
> 
> 标签：java, jdbc, vaadin

一旦像这样创建了一个 JPAContainer

JPAContainer users = JPAContainerFactory.make(User.class, "persistenceUnitName");

现在我假设“用户”容器将使用一个 EntityManager，而后者又使用连接池中的一个 JDBC 连接。

资源利用（附加到附加到 JPAContainer 的 EntityManager 的 jdbc 连接）发生在 httprequest 的生命周期内，或者 entityManager/connection 的使用有另一个生命周期？

您能否帮助我了解一个 JPAContainer 实例与何时以及如何通过 EntityManager 使用 jdbc 连接之间的差距？

我阅读了 vaadin jpa 容器教程，但在那里找不到此信息。谢谢你。

[https://vaadin.com/forum/-/message_boards/view_message/1601953](https://vaadin.com/forum/-/message_boards/view_message/1601953)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-26T08:39:07.220

JPAContainer 初始化通过：

```
JPAContainerFactory.make(User.class, "persistenceUnitName"); 
```

在整个应用程序生命周期中使用一个且仅一个 EntityManager，即使其他会话也使用相同的 EntityManager。此外，此 EntityManager 已打开一个 DB 连接，并且似乎一直很忙。这种方法不是非常理想，它可能成为应用程序性能的瓶颈。

好吧，JPAContainer 可以通过以下方式初始化：

```
JPAContainerFactory.make(User.class, (EntityManager)enityManager); 
```

在这种方法中，您必须处理何时创建新的 EntityManager (EM)。您可以为每个用户/会话或每个用户/会话和实体创建新的 EM，这取决于您。这看起来很有希望，但 JPAContainer 还有其他瓶颈。JPAContainer 每个 EntityManager 使用一个繁忙的连接。因此，如果您使用自己的 entityManager 创建 100 个 JPAContainer，您的连接池将包含 100 个繁忙的连接，这是一个大问题。因此，您必须将连接释放模式设置为“after_transaction”，这将强制 JPAContainer 在每次查询后释放连接。

**持久性.xml**

```
<property name="hibernate.connection.release_mode" value="after_transaction" /> 
```

无论如何，这些只是技巧，这使得 JPAContainer 非常有用，但不要指望魔术。JPAContainer 还有更多其他问题

*   不支持延迟加载
*   不支持批量加载，每个条目由一个查询+每个关系一个查询加载
*   如果您想刷新 JPAContainer 它会自行循环并需要永远刷新

看看这个帖子。最好将纯 JPA 或 Hibernate namedQuery 或 CriteriaBuilder 与 BeanItemContainer 一起使用。 [保存对数据库 vaadin](https://stackoverflow.com/questions/17624438/save-changes-to-database-vaadin/17846489#17846489)的更改。

# java - 基于正则表达式从pdf文件中提取文本？

> ID：11527050
> 
> 赞同：1
> 
> 时间：2012-07-17T16:41:27.293
> 
> 标签：java, parsing, pdf, itext

我有一个 pdf 文件，它有 300 页，每组页面都包含一个人的识别信息，例如社会安全号码。

假设 1-4 的页面用于社交号码 987-65-4320，5-6 的页面用于 987-65-4321

我想提取**从**第**一个社交号码位置** 到**第二个社交号码位置**的第一个员工的所有信息，然后将它们保存在一个新的 pdf 文件中。

我看到的所有示例都是关于从 pdf 文件中提取所有文本，而不是基于像这样的特定标准：

[从pdf文件中提取文本](https://stackoverflow.com/questions/4026614/extract-text-from-pdf-files)

请告知如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:52:28.397

这不是一种自动化技术，但您能否获取文本（我可能只是将 pdf 复制粘贴到文本文件中），并使用正则表达式查找您想要的信息？

在 Java 中，一些解析可能如下所示：

```
// Matches 3 digits, a dash, 2 digits, a dash, and four digits, and then all text
// until it finds another SSN
String text = "987-65-4320 some info 987-65-4321 other \ninfo";
Pattern p = Pattern.compile("(\\d{3}-\\d{2}-\\d{4})((?:.(?!\\d{3}-\\d{2}-\\d{4}))*)", Pattern.DOTALL);
Matcher m = p.matcher(text);
while (m.find())
    System.out.println(m.group(1) + ": " + m.group(2)); 
```

但是没有**看到您要保存的信息，**我无法帮助您获取它。

如果我想要一个新的 PDF，我会将信息放入 Microsoft Word 或 Google Docs 并保存一个 PDF。

**或者**，如果您只想从一系列员工中“提取所有信息”，那么创建一个删除了一些页面的原始 PDF 副本是否可行？我见过允许您这样做的网站，但 Chrome 的（您可以使用它毫无问题地打开本地 PDF）打印对话框可以让您指定一系列页面，并将其保存为 PDF。

# android - 使用 dialogfragment 从 datepicker 获取日期

> ID：11527051
> 
> 赞同：54
> 
> 时间：2012-07-17T16:41:27.777
> 
> 标签：android, datepicker, android-dialog, android-datepicker

我正在使用谷歌示例使用对话框片段
[http://developer.android.com/guide/topics/ui/controls/pickers.html在我的应用程序中插入一个日期选择器](http://developer.android.com/guide/topics/ui/controls/pickers.html)

但我不确定如何在设置日期后获取日期（不是 java 专家）。对话框和日期选择器运行正常，我可以记录正确设置的日期，但是，我怎样才能在父活动上执行回调？

这是我的对话框片段

```
public class DatePickerFragment extends DialogFragment implements
        DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        **Log.w("DatePicker","Date = " + year);**
    }
} 
```

...我从我的活动中调用对话...

```
public void showDatePickerDialog(View v) {
    DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getSupportFragmentManager(), "datePicker");
} 
```

在我的父活动中调用方法而不是 Log.w 的正确方法是什么？我想这与将回调作为参数或其他东西传递有关，但我在互联网上找到的大多数参考资料都是关于没有对话片段的先前版本

编辑：不确定它是否重要，但父活动被声明为：

```
public class EditSessionActivity extends FragmentActivity { 
```

**解决方案：感谢 Lecho 用户，这是这样做的方法**

DatePickerFragment.class

```
public class DatePickerFragment extends DialogFragment{

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), (EditSessionActivity)getActivity(), year, month, day);
    }

} 
```

...和父活动 EditSessionActivity.class ...

```
public class EditSessionActivity extends FragmentActivity implements OnDateSetListener {
...
    @Override
    public void onDateSet(DatePicker view, int year, int month, int day) {
        //do some stuff for example write on log and update TextField on activity
        Log.w("DatePicker","Date = " + year);
        ((EditText) findViewById(R.id.tf_date)).setText("Date = " + year);
    } 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-17T17:18:08.790

`DatePickerDialog`构造函数fo`DatePickerDialog.OnDateSetListener`作为第二个参数，所以也许你应该在你的父活动`EditSessionActivity`（而不是`DatePickerFragment`）中实现该接口并更改这一行：

```
return new DatePickerDialog(getActivity(), this, year, month, day); 
```

进入这个：

```
return new DatePickerDialog(getActivity(), (EditSessionActivity)getActivity(), year, month, day); 
```

然后您的活动应如下所示：

```
public class EditSessionActivity extends FragmentActivity implements
        DatePickerDialog.OnDateSetListener{

    public void onDateSet(DatePicker view, int year, int month, int day) {
        //use date in your activity
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-07T12:58:13.593

我在显示日期选择器的类中简单地覆盖了日期选择器创建中的 onDateSet。请参见下面的代码：

```
 private OnClickListener onDateClicked() {
    return new OnClickListener() {
          @Override
          public void onClick(View v) {
             DialogFragment newFragment = new DatePickerFragment() {
                @Override
                public void onDateSet(DatePicker view, int year, int month, int day) {
                  salePaymentCustomView.setBtDateText("" + day + "/" + month+1 + "/" + year);
                }
             };
             newFragment.show(getActivity().getSupportFragmentManager(), "datePicker");
    }
  };
 } 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-05-11T23:14:58.443

该问题也可以在不将`onDateSet`方法移动到父活动的情况下解决。你只需要告诉在`DatePickerFragment`哪里搜索视图：

```
public class DatePickerFragment extends DialogFragment implements
    DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        // do some stuff for example write on log and update TextField on activity
        Log.w("DatePicker","Date = " + year);
        ((TextView) getActivity().findViewById(R.id.tf_date)).setText("Date = " + year);
    }
} 
```

我还将演员的目标从 更改`EditText`为`TextView`。这样，您可以为不同类型的视图重用您的实现，而不仅仅是`EditText`.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-01-25T06:50:14.767

我对上述答案有一个更正。而不是像这样返回 DatePickerDialog

> return new DatePickerDialog(getActivity(), (EditSessionActivity)getActivity(), year, month, day);

你应该以更通用的方式返回它

> return new DatePickerDialog(getActivity(), (OnDateSetListener)getActivity(), 年月日);

只需确保您的活动实现 OnDateSetListener 接口并覆盖函数 onDateSet

```
@Override
public void onDateSet(DatePicker view, int year, int monthOfYear,int dayOfMonth) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-26T11:13:54.303

```
public void onDate(View view) {

        DialogFragment fragment = new SelectDateFragment();
        fragment.show(getFragmentManager(), "Date Picker");
    }

//  @SuppressLint("NewApi")
    class SelectDateFragment extends DialogFragment implements
            DatePickerDialog.OnDateSetListener {

        public Dialog onCreateDialog(Bundle savedInstanceState) {

            System.out.println("entrering on create dialog");;

            return new DatePickerDialog(getActivity(), this, mYear, mMonth,
                    mDay);//it will return dialog setting date with mYera,MMonth and MDay

        }

        @Override
        public void onDateSet(android.widget.DatePicker view, int year,
                int monthOfYear, int dayOfMonth) {
            System.out.println("year=" + year + "day=" + dayOfMonth + "month="
                    + monthOfYear);
            mYear=year;
            mMonth=monthOfYear;
            mDay=dayOfMonth;

            onPopulateSet(year, monthOfYear + 1, dayOfMonth);

        }
// set the selected date in the edit text  
        private void onPopulateSet(int year, int i, int dayOfMonth) {
            EditText et_setDate;
            et_setDate = (EditText) findViewById(R.id.register_et_dob);//register_et_dob:-id name of the edit text 
            et_setDate.setText(dayOfMonth + "/" + i + "/" + year);
            System.out.println("enetring on populate Set");

        } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-30T20:33:20.837

如果您必须将结果返回到 Fragment，而不是 Activity，这里有一个完整的解决方案：

```
public class DatePickerDialogFragment extends DialogFragment  {

    private static final String ARGUMENT_YEAR = "ARGUMENT_YEAR";
    private static final String ARGUMENT_MONTH = "ARGUMENT_MONTH";
    private static final String ARGUMENT_DAY = "ARGUMENT_DAY";
    private DatePickerDialog.OnDateSetListener listener;

    private int year;
    private int month;
    private int dayOfMonth;

    public static DatePickerDialogFragment newInstance(final int year, final int month, final int dayOfMonth) {
        final DatePickerDialogFragment df = new DatePickerDialogFragment();
        final Bundle args = new Bundle();
        args.putInt(ARGUMENT_YEAR, year);
        args.putInt(ARGUMENT_MONTH, month);
        args.putInt(ARGUMENT_DAY, dayOfMonth);
        df.setArguments(args);
        return df;
    }

    @Override
    public void onCreate(@Nullable final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        retrieveArguments();
    }

    private void retrieveArguments() {
        final Bundle args = getArguments();
        if (args != null) {
            year = args.getInt(ARGUMENT_YEAR);
            month = args.getInt(ARGUMENT_MONTH);
            dayOfMonth = args.getInt(ARGUMENT_DAY);
        }
    }

    @Override
    public Dialog onCreateDialog(final Bundle savedInstanceState) {
        return new DatePickerDialog(getContext(), this.listener, this.year, this.month, this.dayOfMonth);
    }

    public void setListener(final DatePickerDialog.OnDateSetListener listener) {
        this.listener = listener;
    }
} 
```

然后只需在 Fragment 或 Activity 中使用它：

```
final Calendar c = Calendar.getInstance();
DatePickerDialogFragment datePicker = DatePickerDialogFragment.newInstance(
        c.get(Calendar.YEAR),
        c.get(Calendar.MONTH),
        c.get(Calendar.DAY_OF_MONTH));
datePicker.setListener(this);
datePicker.show(getChildFragmentManager(), null); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-22T11:44:32.040

Leszek 的答案有效，但如果对话框是从另一个片段开始的，则无效。在这种情况下，您需要`setTargetFragment()`在创建对话框的代码和`getTargetFragment()`对话框代码中使用。

在创建对话框的代码中：

```
DialogFragment dialogFragment = new YourDialogFragment();
dialogFragment.setTargetFragment(YourParentFragment.this, 0);
dialogFragment.show(getFragmentManager(), "mydialog"); 
```

在 DialogFragment 代码中：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState)
{
    DatePickerDialog.OnDateSetListener listener = new DatePickerDialog.OnDateSetListener()
    {
        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth)
        {
            YourParentFragment parentFragment = (YourParentFragment) getTargetFragment();
            // Manipulate the parent fragment
            // ...
        }
    };
    // Get the initial date
    // ...
    return new DatePickerDialog(getActivity(), listener, year, month, day);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-17T08:19:55.227

我遇到了类似的问题，但是我的日期选择器是从另一个片段中的对话框片段启动的。这使得处理回调变得非常困难，因为它们想要返回主活动，而我希望数据返回到前一个对话框片段。

最初，我将新的日期值传递给主活动（使用 OnDateSetListener），并打算使用启动日期选择器的对话框来获取它们，但是当日期选择器关闭时，该对话框中没有触发生命周期事件。

我得到的结果是在日期选择器的 onDismiss 中，实例化一个新的对话框片段，在其上调用 set results 方法，然后启动它。当然，为此您需要确保前一个片段在启动日期选择器时被关闭。

这是调用日期选择器的 dialogFragment

```
public class NewTrialDialogFragment extends DialogFragment  {

public final String LOG_TAG = "NewTrialDialog Fragment";

Button startDateButton;
Integer newYear, newMonth, newDay;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.dialog_new_trial, container, false);
    getDialog().setTitle("Dialog New Trial");

    startDateButton = (Button) rootView.findViewById(R.id.button_start_date);
    startDateButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            showDatePickerDialog(v);
        }
    });

    //If you exit the datepicker without choosing anything, it returns zeros
    if (newYear != null && newMonth != null && newDay != null && newYear != 0) {
        startDateButton.setText(newYear + " " + newMonth + " " + newDay);
    }else{
        startDateButton.setText("Select Start Date");
    }

     return rootView;
}

public void showDatePickerDialog(View v) {
    TrialDatePickerDialog newDialog = new TrialDatePickerDialog();
    newDialog.show(getActivity().getSupportFragmentManager(), "datePicker");
    this.dismiss();
}

public void setDates(int year, int month, int day){
    newYear = year;
    newMonth = month;
    newDay = day;
}} 
```

和日期选择器

```
public  class TrialDatePickerDialog extends DialogFragment implements DatePickerDialog.OnDateSetListener
     {

private final String LOG_TAG = "TrialDatePickerDialog";
int newYear, newMonth, newDay;

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of TrialDatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this , year, month, day);
}

         @Override
         public void onDismiss(DialogInterface dialog) {
             super.onDismiss(dialog);
             FragmentManager fm = getActivity().getSupportFragmentManager();
             NewTrialDialogFragment newTrialDialogFragment = new NewTrialDialogFragment();
             newTrialDialogFragment.setDates(newYear, newMonth, newDay);
             newTrialDialogFragment.show(fm, "new_trial_dialog");

         }

         @Override
         public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
             newYear = year;
             newMonth = monthOfYear;
             newDay = dayOfMonth;
         }
     } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-04T02:42:27.530

科特林版本。

**DatePickerFragment 类：**

```
class DatePickerFragment : DialogFragment() {

    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {

        val c = Calendar.getInstance()
        val year = c.get(Calendar.YEAR)
        val month = c.get(Calendar.MONTH)
        val day = c.get(Calendar.DAY_OF_MONTH)

        return DatePickerDialog(context!!, context!! as MainActivity, year, month, day)
    }
} 
```

**DatePickerDialog.OnDateSetListener**移至 MainActicity

```
class MainActivity : AppCompatActivity(), DatePickerDialog.OnDateSetListener {

    ..

    override fun onDateSet(view: DatePicker, year: Int, month: Int, day: Int) {
        //use date in your activity
    }
} 
```

# ruby-on-rails - 使用 Ruby 使用 SOAP 发送和接收 DIME 附件

> ID：11527054
> 
> 赞同：2
> 
> 时间：2012-07-17T16:41:33.100
> 
> 标签：ruby-on-rails, ruby, soap, attachment, savon

我成功地使用 Ruby 和 Savon 与一组 SOAP 服务进行通信，但事实证明，为了发送和接收附件，服务希望它们使用 DIME 封装。有人用 Ruby 管理过这个吗？如果没有，解决此问题的推荐方法是什么？这种通信只是 Rails 应用程序的一部分，因此理想情况下，该解决方案应与应用程序的其余部分集成。

# c - 如何在 32 位架构中将 64 位 unsigned long long 分配给 32 位结构

> ID：11527055
> 
> 赞同：1
> 
> 时间：2012-07-17T16:41:36.277
> 
> 标签：c, linux, unix, embedded, 64-bit

我有 2 个内核，一个是 32 位的，另一个是 64 位的。

在 64 位机器上，我支持 unsigned long long，我需要将此值分配给将在 32 位机器中访问的变量，例如：-

```
typedef struct {
    unsigned int low;
    unsigned int high;
} myint64_t;

myint64_t app_sc; 
```

下面是 64 位机器的代码片段：

```
unsigned long long sc;

/* Calculate sc */
... 
```

现在在 64 位机器上，我需要将“sc”分配给 app_sc，并将其用于 64 位机器上的一些计算。

我试图做这样的事情： -

```
app_sc = sc; 
```

但是编译器给了我编译时错误。我可以类似地做这样的事情：-

```
 app_sc.low = sc & 0xFFFFFFFF;
 app_sc.high = (sc>>32) & (0xFFFFFFFF); 
```

但这能保证它在所有情况下都有效吗？

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:16:54.013

使用不太旧的编译器支持相当新的 C 标准（可能是 C99，甚至更早），您应该有一个[`<stdint.h>`](http://en.wikibooks.org/wiki/C_Programming/C_Reference/stdint.h)标头，为您提供类似`int64_t`（对于有符号 64 位整数）或`uint64_t`（对于无符号 64 位整数）的类型，这正是64 位，即使在 32 位机器上也是如此。

如果您的编译器没有它，我强烈建议升级您的编译器。你可能会使用[GCC](http://gcc.gnu.org/)（除非你有一个非常奇怪的目标架构，GCC 不支持）。最新的 GCC 版本是 4.7。

请注意，32 位机器上的 64 位算术实际上需要一些编译器支持才能相当有效。（例如使用带有进位指令的add）。它不能只通过一个库来完成，即使需要一个库来提供最复杂的操作（例如 32 位机器上的 64 位除法）。换句话说，对于 32 位机器，快速 64 位算术不能在 C 中可移植地编码。

对于更大的数字，考虑使用任意精度的数字（称为 [bigints](http://en.wikipedia.org/wiki/Bigint)），例如通过 GNU [gmp](http://gmplib.org/)库。这样的库使用非平凡的算法（所以即使是数学也很困难，你可以阅读关于它们的整本书并通过发明一个有竞争力的 bigint 实现来获得博士学位）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T18:00:22.790

首先，我同意尽可能使用`stdint`类型的建议，所以我会自己这样做。

其次，我能想到的唯一*可能更便宜的转换方式是通过联合，比如*

```
union Int64
{
    uint64_t val64;
    struct {
        uint32_t lo32;
        uint32_t hi32;
    };
};

union Int64 i64;
i64.val64 = sc;
app_sc.low = i64.lo32;
app_sc.high = i64.hi32; 
```

## 注意事项

*   如果这样做涉及存储和重新加载（如图所示），它可能比您的按位操作更昂贵
    *   如果您可以将现有`app_sc`的转换为该联合的实例（跳过 32 位加载），那么这可能是值得的
*   或者，如果`sc`已经真正存储在内存中的某个位置，您可以将其地址转换为`(union Int64 *)`
    *   当然，如果`sc`当前分配了一个寄存器并且是脏的，那么获取地址可能会强制存储
*   原则上可能存在包装和对齐问题，无论是现在还是随后的一些 ABI
*   这取决于架构，因此后续端口可能意味着更改联合（我假设上面的 x86 little-endianness）

坦率地说，它很脆弱，正如我希望警告显示的那样。不过，这是*另一种*方法，您可以决定它是否也*适合*您的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T16:44:02.020

您的编译器，即使在 32 位机器上，也可能支持“long long int”。试试看？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T17:28:49.350

您可以使用头文件 stdint.h 来使用有符号/无符号变量 uint64_t/int64_t/...uint8_t/int8_t 以获得更好的解释：[http ://pubs.opengroup.org/onlinepubs/007904975/basedefs/stdint.h.html](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/stdint.h.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T16:48:41.163

在 32 位和 64 位架构中，改变的是指针的大小，因此 unsigned long long 在 32 位中的工作方式与在 64 位中的工作方式相同。

# ruby-on-rails - 设计：成功登录后挂钩

> ID：11527056
> 
> 赞同：3
> 
> 时间：2012-07-17T16:41:38.607
> 
> 标签：ruby-on-rails, devise

在我的 rails 应用程序中，我正在为我的身份验证系统使用设计。我有一种情况，我想使用基于用户密码的密钥来加密一些数据。我能想到的最简单的方法是在成功登录期间，从用户的纯文本密码（从登录表单传入）生成用户的私钥并将其存储在用户的会话中。我真的不想要求用户多次输入密码。

devise 是否提供了一种在成功登录后指定回调函数的方法？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T16:48:01.597

[http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/DatabaseAuthenticatable#after_database_authentication-instance_method](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/DatabaseAuthenticatable#after_database_authentication-instance_method)

在您使用设计的用户模型中，创建一个 after_database_authentication 实例方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-14T05:59:55.653

`User`假设您有带属性的设计资源`password`，那么您可以在登录后访问用户密码`after_sign_in_path_for`，成功登录后调用。

```
 # app/control,lers/application_controller.rb
  class ApplicationController < ActionController::Base
    def after_sign_in_path_for(resource)
      password = param[:user][:password]
      do_cool_stuf_with_password(password)
      #... 
      return url_for_root
   end
end 
```

# c# - 如何检查数据网格单元格是否存在？

> ID：11527058
> 
> 赞同：4
> 
> 时间：2012-07-17T16:41:50.413
> 
> 标签：c#, asp.net

我有一个 if 条件，例如：

```
if (e.Item.Cells[7].Text == "something") 
```

但是如何首先检查**单元格 [7]**是否首先存在？

谢谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T16:42:56.030

你可以使用`Cells.Count`属性。如果它大于 7，则表示`Cells[7]`存在（因为索引是从零开始的）。

```
if (e.Item.Cells.Count > 7 && e.Item.Cells[7].Text == "something") 
```

# c# - response.Cookies 始终为空（长度：0）

> ID：11527061
> 
> 赞同：3
> 
> 时间：2012-07-17T16:42:04.553
> 
> 标签：c#, cookies, httpwebrequest

我在使用 HttpWebRequest 时处理 cookie 时遇到问题。

我正在制作一个程序来管理我在一个小型社区网站上的帐户。我能够发出获取和发布请求（成功登录等），但我无法维护会话 cookie 以保持登录状态。

我的代码如下所示：

```
this.cookies = new CookieCollection();
request = (HttpWebRequest)WebRequest.Create(requestURL);
request.CookieContainer = new CookieContainer();
...
request.CookieContainer.Add(cookies);
ASCIIEncoding encodage = new System.Text.ASCIIEncoding();
byte[] data = encodage.GetBytes(Post);
request.AllowAutoRedirect = true;
request.ContentType = "application/x-www-form-urlencoded";
request.UserAgent = "whatever";
request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
request.Method = "POST";
request.Headers.Add("Accept-Encoding", "gzip,deflate,sdch");
request.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
request.AllowWriteStreamBuffering = true;
request.ContentLength = data.Length;
newStream = request.GetRequestStream();
request.ProtocolVersion = HttpVersion.Version11;
newStream.Write(data, 0, data.Length);
...
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
this.cookies = response.Cookies;
... 
```

response.Cookies 始终为空（长度：0），它不应该。谁能告诉我做错了什么？为什么没有与响应关联的 cookie？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T16:53:34.993

只需从 Request.Cookies 集合中读取它。只有在服务器端添加的新 cookie 在 Response.Cookies 中可用。Request.Cookies 包含所有（请求+响应）Cookie。

考虑到上述情况，服务器似乎没有添加额外的 cookie，这就是为什么您在响应中没有收到任何 cookie。那有意义吗 ？

# javascript - 你可以向被劫持的 JavaScript 数组添加一个函数吗？

> ID：11527062
> 
> 赞同：7
> 
> 时间：2012-07-17T16:42:09.570
> 
> 标签：javascript, arrays, method-interception

这个问题与[在 Javascript 中声明数组时要遵循的最佳实践是什么有关？](https://stackoverflow.com/q/11500492/508537)

* * *

假设一个客户端，我们称他们为[“DB Cooper”](http://en.wikipedia.org/wiki/D._B._Cooper)，首先要求以下代码必须在任何其他 JavaScript 代码之前运行：

```
Array = function(){
    alert('Mwahahahaha');
}; 
```

此外，Cooper 要求必须将自定义函数添加到内置`Array`对象（而不是被劫持的对象）中。例如，如果`Array`被劫持，这将通过以下方式完成：

```
Array.prototype.coolCustomFunction = function(){
    alert('I have ' + this.length + ' elements!  Cool!');
}; 
```

这将负担得起：

```
var myArray = [];
myArray.coolCustomFunction(); 
```

但是，这与第一个要求不兼容。因此，您如何才能最好地满足 DB Cooper 的这两个要求？

**注意：** DB 甚至写**[了一个测试小提琴](http://jsfiddle.net/briguy37/yXPJ8/)**来帮助确保解决方案满足他的要求……真是个家伙！

* * *

**更新：** 对于那些喜欢挑战的人：请尝试找到一个不可劫持的跨浏览器解决方案来解决这个问题。例如，[这里有](http://jsfiddle.net/yXPJ8/9/)一个更被劫持的测试用例（感谢重新格式化这个 Bergi），它劫持了 Array、Object、Array.prototype.constructor 和 Object.prototype.constructor。到目前为止，看起来可能有一个特定于浏览器的解决方案（参见[Bergi 对他的回答的评论](https://stackoverflow.com/a/11527758/508537)，如果你找到在 FF 中劫持它的方法，请告诉我们），但目前尚不清楚是否存在一个跨浏览器的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T16:54:57.507

由于`Array`不一定等于`[].constructor`，因此您可以使用`[].constructor`来引用原始 Array 函数，因为它是硬连线的，`Array = function(){}`不会改变它。

```
Array = function () { alert("foo")};

// this will always point to the original Array
[].constructor.prototype.foo = "bar";

var myArray = [0, 1];
alert(myArray.foo) // alerts "bar" 
```

[http://jsfiddle.net/yXPJ8/5/](http://jsfiddle.net/yXPJ8/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T17:31:08.847

无论您的`Array`函数/构造函数是什么，数组的文字语法将始终生成“真实”数组，并将它们的 [[prototype]] 设置为本机数组原型对象（曾经，这[是一个安全漏洞](https://stackoverflow.com/questions/11500492#comment-15231480)）。因此，您始终可以使用

```
Object.getPrototypeOf([]) 
```

即使`Array`或被`[].constructor`劫持。（被劫持当然不行`Object`，那就很复杂了）

（[把 DB 打倒了！](http://jsfiddle.net/yXPJ8/6/)）

* * *

如果您想使用解决方法，[在 FF](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto)中，以下行将始终有效（并且不可劫持）：

```
[].__proto__.coolCustomFunction = coolCustomFunction; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T16:44:49.833

是的......你刚刚做了......但是你使用`[]`..创建了数组，如果你使用`new Array()`它工作正常......

[在此处查看示例](http://jsfiddle.net/yXPJ8/1/)

# css - 在子 div 中使用负边距时，我的外部 div 背景会扩展

> ID：11527063
> 
> 赞同：0
> 
> 时间：2012-07-17T16:42:10.273
> 
> 标签：css, html, background-color, margin

这是我的样式表代码

```
#topwrapper {
    background: url(images/orangebg.jpg) repeat-x top; 
    height: 502px;
}

#mainwrapper {
    background:url(images/bluebg.jpg) repeat;
}

#maincontent {
    margin: 0 auto; 
    width: 961px; 
    background-color:#F0EFEF;
    position: relative;
    margin-top: -312px;
} 
```

我希望 maincontent div 向上移动到橙色 div，但它带来了 bluebg.jpg（缩短了 orangebg.jpg）。当我尝试使用 -top: 312px; 而不是负边距，它在#maincontent 下方添加了空间。

页面上的代码读取

```
<div id="topwrapper"></div>
<div id="mainwrapper"><div id="maincontent">test test</div></div> 
```

在 jsfiddle 上查看 jsfiddle.net/bdh2a - 删除 margin-top: -312px; 这就是我需要橙色背景与顶部灰色框的方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:56:19.600

也许你可以设置`margin-top: -312px;`为`mainwrapper`div？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:01:49.930

**我找到了解决办法！！**

```
#topwrapper {
    background: url(images/orangebg.jpg) repeat-x top; 
    height: 502px;
}

#mainwrapper {
    background:url(images/bluebg.jpg) repeat;
    float: left;
    width: 100%;
    display: block;
    position: relative;
}

#maincontent {
    width: 961px; 
    background-color:#F0EFEF;
    position: relative;
    margin-top: -312px;
    margin-left: -480px;
    position: relative;
    float: left;
    left: 50%;
} 
```

页面上的代码保持不变

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:02:11.747

# 像这样重新排列你的html：

```
<div id="mainwrapper">
<div id="maincontent"><p>text text</p></div>  
<div id="topwrapper"></div>
</div> 
```

然后使用这个 CSS 设置（当然调整高度和东西）：

```
#mainwrapper{
height:100%;
background-color:#FF4200;
width:100%;
}

#topwrapper {
background-color:#1B00FF;
height:100px;
min-width:100%;
margin:0 auto;
position:absolute;
top:0;
z-index:0;
}

#maincontent {
margin: 0 auto;
padding:20px;
top:20px;
background-color:#ccc;
position: relative;
color:#000;
z-index:1;
width:80%
} 
```

看看这个 jsfiddle：http://jsfiddle.net/imakeitpretty/yqnfk/ 里面有很多希腊文字，因为没有它你就看不到橙色的展开。“文本文本”是不够的。

# eclipse - 如何在 Eclipse 3.7 上调试开源项目

> ID：11527064
> 
> 赞同：0
> 
> 时间：2012-07-17T16:42:12.617
> 
> 标签：eclipse, open-source

我已经下载了“图腾”电影播放器​​源代码。我将 INSTALL 文件变红，但没有找到有关如何将项目导入 IDE 的信息。我解压了 Totem 源代码，然后使用“文件系统”导入了根目录。当我构建项目时，我收到如下所示的错误消息：

```
**** Build of configuration Default for project Totem ****

make all 
make: *** No rule to make target `all'.  Stop.

**** Build Finished **** 
```

还有一个问题：开发者在哪些 IDE 上开发基于 C/C++ 的开源项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:25:49.863

You must use the scripts in the source tree from terminal.

See `autogen.sh`.

Also be sure to have solved your dependencies.

Maybe then it will work in Eclipse.

Otherwise, use your terminal.

# c# - 试图了解在这种情况下静态是如何工作的

> ID：11527067
> 
> 赞同：6
> 
> 时间：2012-07-17T16:42:33.460
> 
> 标签：c#, .net, oop

我正在查看一位同事编写的一些代码，而我期望发生的不是。这是代码：

```
public class SingletonClass
{
    private static readonly SingletonClass _instance = new SingletonClass();

    public static SingletonClass Instance
    {
        get { return _instance; }
    } 

    private SingletonClass()
    {
        //non static properties are set here
        this.connectionString = "bla"
        this.created = System.DateTime.Now;
    }
} 
```

在另一堂课上，我希望能够做到：

```
private SingletonClass sc = SingletonClass.Instance.Instance.Instance.Instance.Instance.Instance; 
```

它引用了该类的相同实例。发生的事情是我只能拥有一个`.Instance`。我没想到的东西。如果该`Instance`属性返回一个`SingletonClass`类，为什么我不能`Instance`在该返回的类上调用该属性等等等等？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T16:45:24.263

> 如果 Instance 属性返回一个 SingletonClass 类，为什么我不能在该返回的类上调用 Instance 属性等等等等？

因为您只能`.Instance`通过`SingletonClass` *type*访问，而不是通过该类型的实例。

由于`Instance`是静态的，您必须通过以下类型访问它：

```
SingletonInstance inst = SingletonInstance.Instance; // Access via type

// This fails, because you're accessing it via an instance
// inst.Instance 
```

当您尝试链接这些时，您实际上是在做：

```
SingletonInstance temp = SingletonInstance.Instance; // Access via type

// ***** BAD CODE BELOW ****
// This fails at compile time, since you're trying to access via an instance
SingletonInstance temp2 = temp.Instance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:48:23.500

在代码中，您`SingletonClass`通过 Instance 返回一个实例，它是 Singleton 类型的静态

所以它不会允许你这样做，`SingletonClass.Instance.Instance`因为它`SingletonClass.Instance`正在返回一个实例`SingletonClass`

它所做的只是让你免于这样`SingletonClass _instance = new SingletonClass();` 做`SingletonClass.Instance.Instance`

# git - 用 Git 合并问题

> ID：11527069
> 
> 赞同：34
> 
> 时间：2012-07-17T16:42:45.390
> 
> 标签：git, github, git-commit, git-pull

我在用`git version 1.7.11.msysgit.0`

我在 Github 下创建了一个存储库，并添加了一个名为 README.md 的文件，其中包含一些文本内容。

后来，我安装了 GIT 客户端，克隆了服务器内容到我的机器上。

然后我将文件 README.md 删除到我的本地机器上。

现在当我做 git commit 时，我得到了这个错误

```
praveenk@MSIN-BT-100 /d/workspace/MYTestRepo (master|MERGING)
$ git commit ;
U       README.md
error: 'commit' is not possible because you have unmerged files.
hint: Fix them up in the work tree,
hint: and then use 'git add/rm <file>' as
hint: appropriate to mark resolution and make a commit,
hint: or use 'git commit -a'.
fatal: Exiting because of an unresolved conflict. 
```

这是与`git pull`：

```
$ git pull;
U       README.md
A       One.txt
Pull is not possible because you have unmerged files.
Please, fix them up in the work tree, and then use 'git add/rm <file>'
as appropriate to mark resolution, or use 'git commit -a'. 
```

如何解决这些错误？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-17T18:57:03.867

做这个：

```
git merge --abort
git pull (to be sure you're up-to-date) 
```

现在将 README.md 文件的内容替换为您想要的内容。如果您根本不想要它，请执行 git rm README.md

然后，如果您替换了内容，请提交并推送这些内容：

```
git add README.md
git commit -m "comment"
git push 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-10T14:19:03.547

尝试：

```
 git reset README.md 
```

我有一个类似的问题，这是唯一解决它的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-02T17:53:38.833

虽然 a`git reset`是一个很好的解决方案，但请注意警告消息现在具有更好的格式（Git 2.1，2014 年 8 月）

请参阅[Jeff King (](https://github.com/peff) [)](https://github.com/peff)的[提交 d795216](https://github.com/git/git/commit/d795216ac35f08e1ae2a706fca4c06a887c7d797)和[提交 c057b24](https://github.com/git/git/commit/c057b2424a479a2219666f3806c0dd93867ca5c9)：[`peff`](https://github.com/peff)

不规则的换行使阅读起来很尴尬，并且占用的行数超出了必要的范围。相反，让我们将其重新包装为每行大约 60 个字符。
" " 周围的引号`commit`很笨拙；用户并不关心此消息是一个填充了命令名称的模板。

```
$ git commit
U       foo
error: commit is not possible because you have unmerged files.
hint: Fix them up in the work tree, and then use 'git add/rm <file>'
hint: as appropriate to mark resolution and make a commit, or use
hint: 'git commit -a'.
fatal: Exiting because of an unresolved conflict. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-09T16:26:18.643

即使图像的显示属性设置为无，浏览器也会请求图像。为了防止这种情况，您可以实现我之前提到的解决方案，但是如果您要过多地切换图像的可见性，则从 HTML 中添加和删除图像可能是不必要的性能成本，您可以通过使用display:none 属性。

# c# - Ajax 上传和 ASP.NET

> ID：11527078
> 
> 赞同：3
> 
> 时间：2012-07-17T16:43:20.350
> 
> 标签：c#, javascript, ajax, upload

我正在尝试通过 ajax 上传一些文本内容，稍后将对其进行解析。那是我的 Javascript 代码：

```
 $("#fuFile").change(function () {
            var fileInput = document.getElementById("fuFile");
            var file = fileInput.files[0];
            var formdata = new FormData();
            formdata.append('file', file);

            var xhr = new XMLHttpRequest();
            xhr.open("POST", 'testhandler.ashx', true);
            xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
            xhr.setRequestHeader("X-File-Name", file.name);
            xhr.setRequestHeader("Content-Type", "application/octet-stream");
            xhr.send(formdata);              

 }); 
```

我的文件输入在哪里`fuFile`，并且`testhandler.ashx`是获取上传文件的服务器处理程序。（我实际上使用另一个处理程序来解析文件内容。）

但是当我尝试这样做时：

```
HttpFileCollection fc = context.Request.Files; 
```

它没有返回任何文件。但出于某种原因在 IE 中工作。

但是当我尝试获取输入流时：

```
 StreamReader stream = new StreamReader(context.Request.InputStream);
    string text = stream.ReadToEnd(); 
```

变量变为（`text`Http Headers）+ 文件内容。

```
------WebKitFormBoundaryx16Mw7tnG6JeflIB\r\nContent-Disposition: form-data;name=\"file\"; filename=\"teste export.CSV\"\r\nContent-Type: application/vnd.ms-excel(..file content..) 
```

没关系，但我用过这个插件：http: [//valums.com/ajax-upload/](http://valums.com/ajax-upload/)

插件只返回了文件内容，因为我可以通过 InputStream 获取内容，我没有收到任何 HTTP 标头。

那是完美的，但我想在不使用插件的情况下制作一个上传脚本。只需上传和解析，返回一些结果。简单快速

所以，我的问题是：**如何在任何浏览器中获取由 Ajax XHR 上传的文件内容，只获取文件内容？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:32:23.570

这对我有用，我认为它可以帮助你

我的js函数：

```
$("#fuFile").click(function () {
    var fileInput = document.getElementById("fuFile");
    var file = fileInput.files[0];
    var fd = new FormData();
    fd.append("files", file);
    var xhr = new XMLHttpRequest();

    xhr.open("POST", 'http://localhost:63186/UploadFile.ashx');

    xhr.send(fd);

}); 
```

我的处理程序：

```
 string filePath = "~/Files/";

        //write your handler implementation here.
        if (context.Request.Files.Count <= 0)
        {
            context.Response.Write("No file uploaded");
        }
        else
        {
            for (int i = 0; i < context.Request.Files.Count; ++i)
            {
                HttpPostedFile file = context.Request.Files[i];
                 var fileInfo = new FileInfo(file.FileName);
                file.SaveAs(context.Server.MapPath(filePath + fileInfo.Name));
                context.Response.Write("File uploaded");
            }
        } 
```

# asp.net - ASP.NET MVC4 Entity Framework，不会生成数据库，说需要ID字段？

> ID：11527079
> 
> 赞同：0
> 
> 时间：2012-07-17T16:43:21.160
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我现在已经建立了几个 MVC3 站点，并认为我会给 MVC4 一个刺。但我并没有走得太远，我不确定为什么......

首先使用代码编写我的模型并生成数据库。但是，它不起作用并引发验证错误，告诉我 ID 字段是必需的。我遵循他们的命名约定，甚至尝试了不同教程中显示的几种不同的命名约定，但似乎没有任何效果。过去，EF 能够确定我的 PK，让我不必担心为插入指定它们。在我正在查看的所有 MVC4 教程中似乎都是这种情况，但不知何故，即使我完全遵循它们，我的数据库也不会生成。

我的用户模型的截断示例：

```
public class User
{
    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
} 
```

然后，我的初始化程序导致错误：

```
 public class WorkoutInitializer : DropCreateDatabaseIfModelChanges<WorkoutContext>
{
    protected override void Seed(WorkoutContext context) {

        var users = new List<User>
        {
            new User {
                FirstName = "D",
                LastName = "H",
                Email = "blah@blahblah.com",
                Password = "3f9cbbb2dad0774468af842678b11dafa7a16d81",

            },
        };
        users.ForEach(u => context.Users.Add(u));
        context.SaveChanges();

        ...bunch more stuff...
    }
} 
```

当调用 context.SaveChanges() 时，程序会抛出 ValidationError，通知我“需要 UserId 字段”。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:07:26.983

UserId 可能应该是一个 int 或 Guid 不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:03:50.080

看起来好像 EF 在生成数据库时没有创建 UserId 作为主键和标识列。抛出此错误是因为 UserId 是不可为空的 int 且不能为空。您可以在 SSMS 的列属性中手动将 SQL Server 列更改为 Identity 为 Yes，但我认为用 [Key] 属性装饰 UserId 以强制它成为数据库生成的主键会更容易：

```
[Key]
public int UserId { get; set; } 
```

请注意，这需要 System.ComponentModel.DataAnnotations 命名空间

# php - PHP/MySQL 搜索引擎的会话问题

> ID：11527083
> 
> 赞同：0
> 
> 时间：2012-07-17T16:43:33.817
> 
> 标签：php, mysql, session, search

PHP/MySQL 新手在这里。

我创建了一个基本的搜索引擎，可以查询包含多个值的 MySQL 表。但是，搜索表单有多个搜索按钮，以限制基于单一值类型的搜索（在这种情况下，按区域或震级，因为我们正在处理地震）

结果的初始搜索和显示顺利进行，但是当我尝试使用分页链接转到结果的另一页时，它无法提取下一组结果，并且当我在浏览器中单击时（我正在使用 Firefox，但我将在其他浏览器中进行测试），会话已过期，所以我设法将问题缩小到那里（除非我在这里吠叫完全错误的树）

这里出了什么问题，我该如何解决？

我觉得答案很简单，但我只是没有看到它。这是结果页面的代码（它是从我在 Internet 上找到的多个教程一起破解的，但我确实了解代码中发生了什么），我添加了 var_dump($_SESSION) 命令来查看传入的变量会话，一旦此问题得到解决，将被删除。

```
<?php
include('db.php');  // include your code to connect to DB.
session_start();
var_dump($_SESSION);
if (mysql_real_escape_string($_POST['regbutton']) == submit||(!isset($_SESSION['submit1']))||!(isset($_SESSION['submit2']))){
$_SESSION['search']=mysql_real_escape_string($_POST['regbutton']);
$_SESSION['submit1']=mysql_real_escape_string($_POST['place']);
$_SESSION['submit2']=mysql_real_escape_string("empty");
$place =mysql_real_escape_string($_SESSION['submit1']);
$clicked=mysql_real_escape_string($_SESSION['search']);
var_dump($_SESSION);
}
elseif(mysql_real_escape_string($_POST['magbutton']) == submit|| (!isset($_SESSION['submit1']))||!(isset($_SESSION['submit2']))){
$_SESSION['search']=mysql_real_escape_string($_POST['magbutton']);
$_SESSION['submit1']=mysql_real_escape_string($_POST['mag1']);
$_SESSION['submit2']=mysql_real_escape_string($_POST['mag2']);
$mag1 = mysql_real_escape_string($_SESSION['submit1']);
$mag2 = mysql_real_escape_string($_SESSION['submit2']);
$clicked=mysql_real_escape_string($_SESSION['search']);
var_dump($_SESSION);
}
else{
var_dump($_SESSION);
echo "No records found. Session might be broken.";
exit;
} 
$tbl_name="quake";      //your table name
// How many adjacent pages should be shown on each side?
$adjacents = 3;
$query = "SELECT COUNT(*) as num FROM $tbl_name";
$result = mysql_query($query);
$total_pages = mysql_fetch_array($result);
$total_pages = $total_pages[num];

/* Setup vars for query. */
$targetpage = "resultz.php";    //your file name  (the name of this file)
$limit = 30;                                //how many items to show per page
$page = $_GET['page'];
if($page) 
    $start = ($page - 1) * $limit;          //first item to display on this page
else
    $start = 0;                             //if no page var is given, set start to 0

/* Get data. */
if (mysql_real_escape_string($_POST['regbutton']) == submit){
$query = "SELECT * FROM quake WHERE region LIKE '%of%, $place%' LIMIT $start, $limit";
}
elseif (mysql_real_escape_string($_POST['magbutton']) == submit){
if ($mag2 >= $mag1) {
$query = "SELECT * FROM quake WHERE magnitude BETWEEN '$mag1' and '$mag2' LIMIT $start, $limit";
}
else{
$query = "SELECT * FROM quake WHERE magnitude BETWEEN '$mag2' and '$mag1' LIMIT $start, $limit";
}
}
else{
echo "No records found.";
exit;
}

$result = mysql_query($query) or die(mysql_error());;

/* Setup page vars for display. */
if ($page == 0) $page = 1;          //if no page var is given, default to 1.
$prev = $page - 1;                 //previous page is page - 1
$next = $page + 1;              //next page is page + 1
$lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;                      //last page minus 1

/* 
    Now we apply our rules and draw the pagination object. 
    We're actually saving the code to a variable in case we want to draw it more than once.
*/
$pagination = "";
if($lastpage > 1)
{   
    $pagination .= "<div class=\"pagination\">";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev\"> previous</a>";
    else
        $pagination.= "<span class=\"disabled\"> previous</span>";  

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?page=$next\">next </a>";
    else
        $pagination.= "<span class=\"disabled\">next </span>";
    $pagination.= "</div>\n";       
}

?>
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css" />
<link rel="stylesheet" media="print" type="text/css" href="print.css" />
<title>Recent Earthquakes</title>
</head>
<div id="header">
QUAKE SEARCH 
</div>
<div id="header2">
Search the latest quakes
</div>
<table border=1>
<thead>
<td>Source</td>
<td>EqID</td>
<td>Version</td>
<td>Date/Time</td>
<td>Latitude</td>
<td>Longitude</td>
<td>Magnitude</td>
<td>Depth</td>
<td>NST</td>
<td>Region</td>
</thead>
<?php
while($row = mysql_fetch_row($result))
{
echo "<tr>";
// $row is array... foreach( .. ) puts every element
// of $row to $cell variable
foreach($row as $cell)
echo "<td>$cell</td>";
echo "</tr>\n";
?>
<?=$pagination?> 
```

这是搜索表格：

```
<?php
session_start();
include ('db.php');
?>
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css" />
<link rel="stylesheet" media="print" type="text/css" href="print.css" />
<title>Recent Earthquakes</title>
</head>
<div id="header">
QUAKE SEARCH 
</div>
<div id="header2">
Search the latest quakes
</div>
<div id="search">
<form name="magsearch" action="resultz.php" method="post">
<label>Search by Magnitude:</label>
<select name="mag1">
<option>1.0</option>
<option>2.0</option>
<option>3.0</option>
<option>4.0</option>
<option>5.0</option>
<option>6.0</option>
<option>7.0</option>
<option>8.0</option>
<option>9.0</option>
<option>10.0</option>
</select>
<select name="mag2">
<option value=1>1.0</option>
<option value=2>2.0</option>
<option value=3>3.0</option>
<option value=4>4.0</option>
<option value=5>5.0</option>
<option value=6>6.0</option>
<option value=7>7.0</option>
<option value=8>8.0</option>
<option value=9>9.0</option>
<option>10.0</option>
</select>
<input name="magbutton" type="submit" value="submit" />
<input type="hidden" name="content" value="search">
</form>  
<form name ="regsearch" action="resultz.php" method="post">
<label>Search by Region:</label>
<input name="place" type="text" size="14" />
<input name="regbutton" type="submit" value="submit" />
<input type="hidden" name="content" value="search">
</form>  
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:57:59.070

有什么意义

```
if (mysql_real_escape_string($_POST['regbutton']) == submit|| 
```

如果您没有在 SQL 操作中使用表单数据，则不需要转义表单数据——您只是在 PHP 中进行比较，站点中没有针对此特定代码行的数据库。同样，您正在将转义的表单值与未定义的常量进行比较 - 请注意`submit`. PHP 会礼貌地将其视为未加引号的字符串，但会发出警告 - 鉴于您没有提到收到任何警告，您可能正在使用 display_errors 关闭 - 这意味着您不会从您的代码中看到任何问题报告。

这些错误在您的代码中重复出现，因此不要只修复这一行 - 修复整个脚本。

将该行更改为

```
if ($_POST['regbuttn'] == 'submit') || etc... 
```

然后去阅读关于如何启用的 PHP 手册[`display_errors`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)。关闭此功能后，您将在黑暗中工作并反复射击自己的脚。

另外...不要使用表单字段的存在来确定是否发生了 POST。这是不可靠的。采用

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') { ... } 
```

相反，这是 100% 可靠的。

# android - 如何在 OpenGL ES 2.0 中处理更多网格？

> ID：11527084
> 
> 赞同：0
> 
> 时间：2012-07-17T16:43:35.377
> 
> 标签：android, mobile, opengl-es-2.0, shader, mesh

我最近学习了适用于 Windows 的 OpenGL，现在我想在 Android 上尝试一下。我检查了一些教程，现在我已经开始破解这个示例：http: [//blog.shayanjaved.com/2011/03/13/shaders-android/](http://blog.shayanjaved.com/2011/03/13/shaders-android/)

在这个应用程序中，您可以在网格之间进行选择，但我想同时绘制其中两个。我做了一个drawRoad函数和一个drawCar函数。

```
private void drawCar(int program){

    /*** DRAWING OBJECT **/
    // Get buffers from mesh
    Object3D ob = this._objects[this.CUBE];
    Mesh mesh = ob.getMesh();
    FloatBuffer _vb = mesh.get_vb();
    ShortBuffer _ib = mesh.get_ib();

    short[] _indices = mesh.get_indices();

    // Vertex buffer

    // the vertex coordinates
    _vb.position(TRIANGLE_VERTICES_DATA_POS_OFFSET);
    GLES20.glVertexAttribPointer(GLES20.glGetAttribLocation(program, "aPosition"), 3, GLES20.GL_FLOAT, false,
            TRIANGLE_VERTICES_DATA_STRIDE_BYTES, _vb);
    GLES20.glEnableVertexAttribArray(GLES20.glGetAttribLocation(program, "aPosition"));

    // the normal info
    _vb.position(TRIANGLE_VERTICES_DATA_NOR_OFFSET);
    GLES20.glVertexAttribPointer(GLES20.glGetAttribLocation(program, "aNormal"), 3, GLES20.GL_FLOAT, false,
            TRIANGLE_VERTICES_DATA_STRIDE_BYTES, _vb);
    GLES20.glEnableVertexAttribArray(GLES20.glGetAttribLocation(program, "aNormal"));

    // Texture info

    // bind textures
    if (ob.hasTexture()) {// && enableTexture) {
        // number of textures
        int[] texIDs = ob.get_texID(); 

        for(int i = 0; i < _texIDs.length; i++) {
            GLES20.glActiveTexture(GLES20.GL_TEXTURE0 + i);
            Log.d("TEXTURE BIND: ", i + " " + texIDs[i]);
            GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texIDs[i]);
            GLES20.glUniform1i(GLES20.glGetUniformLocation(program, "texture" + (i+1)), i);
        }
    }

    // enable texturing? [fix - sending float is waste]
    GLES20.glUniform1f(GLES20.glGetUniformLocation(program, "hasTexture")/*shader.hasTextureHandle*/, ob.hasTexture() && enableTexture ? 2.0f : 0.0f);

    // texture coordinates
    _vb.position(TRIANGLE_VERTICES_DATA_TEX_OFFSET);
    GLES20.glVertexAttribPointer(GLES20.glGetAttribLocation(program, "textureCoord")/*shader.maTextureHandle*/, 2, GLES20.GL_FLOAT, false,
            TRIANGLE_VERTICES_DATA_STRIDE_BYTES, _vb);
    GLES20.glEnableVertexAttribArray(GLES20.glGetAttribLocation(program, "textureCoord"));//GLES20.glEnableVertexAttribArray(shader.maTextureHandle);

    // Draw with indices
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, _indices.length, GLES20.GL_UNSIGNED_SHORT, _ib);
    checkGlError("glDrawElements");

    /** END DRAWING OBJECT ***/

}

private void drawRoad(int program){

    /*** DRAWING OBJECT **/
    // Get buffers from mesh
    Object3D ob = this._objects[this.ROAD];
    Mesh mesh = ob.getMesh();
    FloatBuffer _vb = mesh.get_vb();
    ShortBuffer _ib = mesh.get_ib();

    short[] _indices = mesh.get_indices();

    // Vertex buffer

    // the vertex coordinates
    _vb.position(TRIANGLE_VERTICES_DATA_POS_OFFSET);
    GLES20.glVertexAttribPointer(GLES20.glGetAttribLocation(program, "aPosition"), 3, GLES20.GL_FLOAT, false,
            TRIANGLE_VERTICES_DATA_STRIDE_BYTES, _vb);
    GLES20.glEnableVertexAttribArray(GLES20.glGetAttribLocation(program, "aPosition"));

    // the normal info
    _vb.position(TRIANGLE_VERTICES_DATA_NOR_OFFSET);
    GLES20.glVertexAttribPointer(GLES20.glGetAttribLocation(program, "aNormal"), 3, GLES20.GL_FLOAT, false,
            TRIANGLE_VERTICES_DATA_STRIDE_BYTES, _vb);
    GLES20.glEnableVertexAttribArray(GLES20.glGetAttribLocation(program, "aNormal"));

    // Texture info

    // bind textures
    if (ob.hasTexture()) {// && enableTexture) {
        // number of textures
        int[] texIDs = ob.get_texID(); 

        for(int i = 0; i < _texIDs.length; i++) {
            GLES20.glActiveTexture(GLES20.GL_TEXTURE0 + i);
            //Log.d("TEXTURE BIND: ", i + " " + texIDs[i]);
            GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texIDs[i]);
            GLES20.glUniform1i(GLES20.glGetUniformLocation(program, "texture" + (i+1)), i);
        }
    }

    // enable texturing? [fix - sending float is waste]
    GLES20.glUniform1f(GLES20.glGetUniformLocation(program, "hasTexture")/*shader.hasTextureHandle*/, ob.hasTexture() && enableTexture ? 2.0f : 0.0f);

    // texture coordinates
    _vb.position(TRIANGLE_VERTICES_DATA_TEX_OFFSET);
    GLES20.glVertexAttribPointer(GLES20.glGetAttribLocation(program, "textureCoord")/*shader.maTextureHandle*/, 2, GLES20.GL_FLOAT, false,
            TRIANGLE_VERTICES_DATA_STRIDE_BYTES, _vb);
    GLES20.glEnableVertexAttribArray(GLES20.glGetAttribLocation(program, "textureCoord"));//GLES20.glEnableVertexAttribArray(shader.maTextureHandle);

    // Draw with indices
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, _indices.length, GLES20.GL_UNSIGNED_SHORT, _ib);
    checkGlError("glDrawElements");

    /** END DRAWING OBJECT ***/ 
```

之后，我进行了一些基本的转换并将矩阵发送到 onDrawFrame 函数中的着色器：

```
public void onDrawFrame(GL10 glUnused) {
    // Ignore the passed-in GL10 interface, and use the GLES20
    // class's static methods instead.
    GLES20.glClearColor(.0f, .0f, .0f, 1.0f);
    GLES20.glClear( GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);

    GLES20.glUseProgram(0);
    // the current shader
    Shader shader = _shaders[this._currentShader]; // PROBLEM!
    int program = shader.get_program();

    // Start using the shader
    GLES20.glUseProgram(program);
    checkGlError("glUseProgram");

    // eye position
    GLES20.glUniform3fv(GLES20.glGetUniformLocation(program, "eyePos")/*shader.eyeHandle*/, 1, eyePos, 0);

    setLight(program);

    Matrix.setIdentityM(mMMatrix, 0);
    Matrix.setIdentityM(mTransMatrix, 0);

    Matrix.translateM(mTransMatrix, 0, 2.0f, 5.0f, 5.0f);

    Matrix.multiplyMM(mMMatrix, 0, mMMatrix, 0, mTransMatrix, 0);    //Translate
    Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mMMatrix, 0);      //View
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix, 0); //Proj

    // send to the shader
    GLES20.glUniformMatrix4fv(GLES20.glGetUniformLocation(program, "uMVPMatrix"), 1, false, mMVPMatrix, 0);

    // Create the normal modelview matrix
    // Invert + transpose of mvpmatrix
    Matrix.invertM(normalMatrix, 0, mMVPMatrix, 0);
    Matrix.transposeM(normalMatrix, 0, normalMatrix, 0);

    // send to the shader
    GLES20.glUniformMatrix4fv(GLES20.glGetUniformLocation(program, "normalMatrix"), 1, false, mMVPMatrix, 0);

    drawCar(program);

    //**********************************************************************************************************

    Matrix.setIdentityM(mMMatrix, 0);

    Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mMMatrix, 0);      //View
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix, 0); //Proj

    // send to the shader
    GLES20.glUniformMatrix4fv(GLES20.glGetUniformLocation(program, "uMVPMatrix"), 1, false, mMVPMatrix, 0);

    // Create the normal modelview matrix
    // Invert + transpose of mvpmatrix
    Matrix.invertM(normalMatrix, 0, mMVPMatrix, 0);
    Matrix.transposeM(normalMatrix, 0, normalMatrix, 0);

    // send to the shader
    GLES20.glUniformMatrix4fv(GLES20.glGetUniformLocation(program, "normalMatrix"), 1, false, mMVPMatrix, 0);

    drawRoad(program);

} 
```

两个对象都会被绘制，但问题是，两个不同的对象存在于两个不同的世界中。如果我首先绘制道路，然后在调用 drawCar 函数之后，无论我是否在 Y 轴上将其平移 -100.0，汽车（实际上它是一个立方体）都将始终可见。

对象从网格文件中读取并正确解析为顶点缓冲区和索引缓冲区，并且它们自己完美地显示出来。

如何将两个（或更多）对象放在同一个空间中？

# c++ - 使用 .def 或 __declspec(dllexport) 导出跨平台代码的共享库符号？

> ID：11527088
> 
> 赞同：4
> 
> 时间：2012-07-17T16:43:57.027
> 
> 标签：c++, visual-studio-2010, cross-platform, cmake

如何在确保代码跨平台的同时正确导出共享库符号（用于从 Visual Studio 中的客户端代码链接）？具体来说是使用 .def 推荐的方式还是应该为 __declspec(dllexport) 使用特定于平台的宏？如果应该使用宏，你能举一个跨平台友好的例子吗？

我有一些用于跨平台使用的本机 C++ 代码，并使用 Cmake 生成 .sln/.vcxproj 文件，该文件创建用于 Windows 的 .dll 文件。要从 C++/CLI 包装器（也是一个 dll）链接到这个 dll，我需要有 .lib，它需要导出符号。我了解到我需要使用 __declspec(dllexport) 或 .def 文件。我担心的是我不想用 MSVC 的东西来调整共享代码（我们需要支持 Linux、iOS、Mac OSX、Android ......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:31:05.947

SethCarnegie 的链接 gcc.gnu.org/wiki/Visibility 可能是对这个问题的间接回答。简而言之，我决定使用宏（预处理器符号），这似乎可以很好地用于跨平台并进行一些规划。虽然 .def 与代码分开，但没有相应的导入方式，即我仍然需要使用 __declspec(dllimport) - 不是很干净的 IMO。

如果您像我一样不熟悉此主题（跨平台，使用托管代码中的非托管 C++），您可以在此处查看我所做的示例（请参阅问题部分）： [Link error linking from managed to unmanaged C++ 尽管链接到 .带有导出符号的 lib 文件](https://stackoverflow.com/questions/11531695/link-error-linking-from-managed-to-unmanaged-c-despite-linking-to-lib-file-wi)

# ruby-on-rails - 在花式框中显示 RoR 视图

> ID：11527098
> 
> 赞同：1
> 
> 时间：2012-07-17T16:44:22.550
> 
> 标签：ruby-on-rails, view, fancybox

是否可以在控制器上使用方法来呈现将在精美框中的视图？

这是我的代码：

```
<a id="someId" href="#htmlForFancyBox">Open Fancy Box</a>

    <div style="display: none;">
        <div id="htmlForFancyBox">
                 <!-- html that will be rendered in fancy box -->
        </div>
    </div> 
```

所需代码：

```
 # Method on controller that will render view 
  def view_for_fancy_box    

  end 
```

我知道我需要创建 view_for_fancy_box.html.erb 文件，该文件将包含显示中的所有 html: none div 以上。

如何在花哨的盒子里实现视图渲染？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:20:19.467

对于该结构，只需使用此代码

```
<script>
$(document).ready(function(){
 $("#someId").fancybox({
  // API options here
 });//fancybox
}); // ready
</script> 
```

不要忘记加载正确的 fancybox js 和 css 文件。

还要确保为您使用的版本添加正确的 API 选项

如果使用 v1.3.4 检查[http://fancybox.net/api](http://fancybox.net/api)。

对于 v2.x，请查看[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

# python - 在 Excel Python XLWT 中保留公式

> ID：11527100
> 
> 赞同：1
> 
> 时间：2012-07-17T16:44:24.967
> 
> 标签：python, excel, formula, xlrd, xlwt

我正在研究 XLWT XLRD XLUTIL 包。每当我写新表时，所有公式都已被删除。

我尝试了以下修复，但都失败了：

1.  用循环重写所有公式：

    失败：XLWT 公式不支持高级即 VLOOKUP 公式

2.  全部用 Python 进行计算：这太荒谬了

如何使用上述软件包保留公式？我可以使用其他一些软件包来解决我的问题吗？或者，我需要编写自己的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T00:13:40.690

(a) xlrd 目前不支持提取公式。

(b) 您说“XLWT 公式不支持高级即 VLOOKUP 公式”。这是不正确的。如果您是同一个人，我似乎在过去几天长时间交换私人电子邮件后确信 xlwt 支持 VLOOKUP 等，请说出来。否则，请提供 xlwt 无法正确解析的有效（即 Excel 接受它）公式。

(c) 如果输出仅用于显示，那么在 Python 中进行计算并不可笑。

# java - Java.io.IOException：自定义 Web 服务器的密钥库格式无效

> ID：11527104
> 
> 赞同：0
> 
> 时间：2012-07-17T16:44:33.020
> 
> 标签：java, ssl

我正在尝试为基于 Java 的自定义 Web 服务器续订 SSL 证书。我创建了 csr 并订购了 SSL 证书。我收到了 X.509 和 PKCS#7 格式的 SSL 证书。我在我的密钥库中导入了证书，当我启动网络服务器时，我遇到了一个异常

> “Java.io.IOException：无效的密钥库格式”

我使用以下命令在我的密钥库中导入证书

```
keytool -import -trustcacerts -file mycertificate.p7s -keystore mykeystore.jks -alias "alias" 
```

发生这种情况是因为我的密钥库类型是“jks”并且我的证书是 PKCS#7 格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:12:06.143

谢谢大家。该问题已通过在代码中使用密钥库文件而不是证书文件得到解决。

# ios - Cocoa-Touch 中 URLConnection.guessContentTypeFromName 的等价物是什么（或如何实现）

> ID：11527110
> 
> 赞同：0
> 
> 时间：2012-07-17T16:44:53.750
> 
> 标签：ios, cocoa-touch, mime-types, file-extension

我正在将一些代码从 Android 翻译到 iOS。更具体地说，我正在转换一个多部分的 Http Post。

在 Android 中，类 URLConnection 有一个静态方法guessContentTypeFromName，它从给定的文件名中返回正确的 MIME 类型作为输入。结果用作请求的“Content-Type”参数的值。

您可以在此处阅读有关此方法的文档：http: [//developer.android.com/reference/java/net/URLConnection.html#guessContentTypeFromName](http://developer.android.com/reference/java/net/URLConnection.html#guessContentTypeFromName(java.lang.String) (java.lang.String )

我阅读了该方法的源代码，粗略地说，有一个包含 Mime-Type/文件扩展名关联的 java 映射，用于从文件扩展名中提取 Mime-type。

据我所知，Cocoa Touch 框架中没有这样的等价物，所以我在问如何实现类似的东西。当然，如果存在类似的情况，我需要找到正确的方向。

先感谢您

# cocoa - Cocoa-如何使用 ARC 制作 TCP 套接字？

> ID：11527114
> 
> 赞同：2
> 
> 时间：2012-07-17T16:45:00.477
> 
> 标签：cocoa, sockets, stream, tcpclient

你知道一些很好的教程，教如何建立一个简单的 TCP 套接字连接到一个 IP，然后发送 JSON 给它吗？

我越来越沮丧，因为我找不到容易实现的东西（我还是个新手）。

非常感谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:29:54.340

好吧，我只是按照 raywenderlich 教程进行操作：

[http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

并对流的启动进行了一些调整：

```
- (void) initNetworkCommunication {
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"xx.xxx.xxx.xxx", 1256, &readStream, &writeStream);
    inputStream = objc_unretainedObject(readStream);
    outputStream = objc_unretainedObject(writeStream);
    [inputStream setDelegate:self];
    [outputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [inputStream open];
    [outputStream open];
} 
```

# wpf - 如何处理由 DataTemplate 创建的用户控件

> ID：11527115
> 
> 赞同：1
> 
> 时间：2012-07-17T16:45:05.753
> 
> 标签：wpf, devexpress, datatemplate

我必须在 WPF 中的两个视图之间切换。我有一个 DataTemplate，它使用 ViewModels 来根据 ViewModel 推断要绘制的视图。简而言之：

```
<DataTemplate DataType="{x:Type ..:RedScreenViewModel}">
<...:RedScreenViewModel/>
</DataTemplate> 
```

一时兴起，我决定在视图之间快速切换.. WPF 应用程序的内存使用量飙升至 2gb。现在你可能会争辩说，在现实生活中，没有人会做我所做的事情。但我想知道如何释放分配的内存。肯定会调用 Unload，我已取消订阅任何事件处理程序。但这无济于事。DevExpress 或 WPF 是否具有可以告诉 .NET 处理用户控件的属性？我为 DevExpress 找到但做 zilch 的是：

```
DisposeOnWindowClosing
DestroyOnClosingChildren 
```

创建的视图非常复杂，我重新组织了布局以节省内存。但同样增加。建议将非常感谢。

编辑：但是没有调用析构函数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:21:00.483

这就是您如何处理嵌套在 ItemsControl 中的 UserControl（在本例中为 ListBox）

```
 public void Dispose()
        {
            if (this.listb != null)
            {
                for (int count = 0; count < this.listb.Items.Count; count++)
                {
                    DependencyObject container = this.listb.ItemContainerGenerator.ContainerFromIndex(count);
                    UserControl userControl = container.GetVisualDescendent<UserControl>();
                    IDisposable controlToPotentiallyDispose = userControl as IDisposable;
                    if (controlToPotentiallyDispose != null)
                        controlToPotentiallyDispose.Dispose();
                    controlToPotentiallyDispose = null;
                }
            }
            if (this.ViewModel != null)
            {
                this.ViewModel.Dispose();
                this.ViewModel = null;
            }
            this.listb = null;
        } 
```

请注意，listb 是要从中查找项目的 ListBox 的 x:Name。
此外，这个 Dispose() 方法应该在 xaml.cs 中，并且应该在您不再需要该视图时调用。

高温下，

呸。

# python - 如何配置 setup.py 为测试步骤运行 tox？

> ID：11527118
> 
> 赞同：7
> 
> 时间：2012-07-17T16:45:12.113
> 
> 标签：python, tox

我需要如何配置才能`setup.py`运行一步？[`tox`](http://tox.testrun.org/latest/)`test`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-15T19:17:39.543

由于 http 链接在 hpk42 的链接中已失效，因此这是一个答案：

您可以覆盖 test 命令来运行毒物测试，而不是像这样

```
class ToxTest(TestCommand):
    user_options = []

    def initialize_options(self):
        TestCommand.initialize_options(self)

    def run_tests(self):
        import tox
        tox.cmdline()

setuptools.setup(
    name='package',
    version=0.1,
    author='Author',
    author_email='author@gmail.com',
    description='',
    license='GPLv3',
    keywords='',
    url='',
    install_requires=['numpy'],
    packages=[],
    cmdclass = {'test': ToxTest},
) 
```

# php - 地址簿，PHP (LDAP) 中的数据结构

> ID：11527121
> 
> 赞同：0
> 
> 时间：2012-07-17T16:45:19.040
> 
> 标签：php, ldap, openldap

我正在用 PHP 编写一个带有 OpenLDAP 后端的地址簿编辑器。

现在，我只使用 LDAP 类*inetOrgPerson*。例如，它由姓氏、名字和电子邮件地址组成。有可能，我将来需要更多的课程。也就是说，会有新的属性。

如何“设计”我的 PHP 脚本以使属性扩展最方便？

仅在数组中某处提及所有属性一次是否可行？这是否意味着我必须动态创建表单或使用[变量变量](http://www.php.net/manual/en/language.variables.variable.php)等奇怪的东西？

向数据库添加新列时的常用方法是什么？

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:22:29.060

您应该查询 OpenLDAP 模式以获取可用的类及其属性。这只是另一种搜索。

# php - 计算多维数组中某个值的个数

> ID：11527127
> 
> 赞同：1
> 
> 时间：2012-07-17T16:45:49.213
> 
> 标签：php, arrays, multidimensional-array, count

如何计算多维数组中某个值的数量？例如：

```
array(
    array ('stack' => '1')
    array ('stack' => '1')
    array ('stack' => '1')
    array ('stack' => '1')
    array ('stack' => '2')
    array ('stack' => '2')
) 
```

在此示例中，结果应为：

> 堆栈 == 1 => 4 个匹配
> 堆栈 == 2 => 2 个匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:52:15.680

你必须自己循环它：

```
$counts = array();
foreach( $array as $value) {
    foreach( $value as $k => $v) {
        if( !isset( $counts[$k])) $counts[$k] = array();
        if( !isset( $counts[$k][$v])) $counts[$k][$v] = 0;
        $counts[$k][$v] += 1;
    }
}

foreach( $counts as $k => $v1)
    foreach( $v1 as $v => $count)
        echo "$k == $v => $count matches\n"; 
```

这[将打印](http://viper-7.com/yJ3wW6)：

```
stack == 1 => 4 matches
stack == 2 => 2 matches 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:54:08.057

```
$occur = array();

foreach ($array as $item) {
    foreach ($item as $k => $v) {
        $occur["$k == $v"]++;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T16:54:43.607

正如雷所说，给定您的数据结构，您唯一的选择是遍历整个数组并在进行时进行计数。

如果您担心性能，您可能需要考虑使用不同的数据结构（可能与数组一起使用）。第二个数据结构类似于散列，它将数组值作为键并包含您可以在构建数组时构建的持续计数。

这样一来，您对性能的影响最小，而不必再次重申。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T17:01:23.103

您需要进行一些修改，但这将对您有所帮助

```
<?php

    function array_count_values_of($value, $array) {
        $counts = array_count_values($array);
        return $counts[$value];
    }

    $array = array(1, 2, 3, 3, 3, 4, 4, 5, 6, 6, 6, 6, 7);
    $array2 = array_unique($array);
    for($i=0 ; $i<count($array2) ; $i++)
    {
        $temp = array_count_values_of($array2[$i], $array);
        $result[$i][0] = $array2[$i];
        $result[$i][1] = $temp;
    }

    print_r($result);

    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T16:50:53.233

我只是简单地遍历它并将结果推送到一个新的结果数组（但我不会为你编写代码）。

您可以做更复杂的事情，例如使用带有回调函数的 array_walk/array_filter 来处理它......但这可能效率较低。

看到这篇文章： [PHP多维数组计数](https://stackoverflow.com/questions/8713923/php-multidimensional-array-count)

# firefox - 如何使用 firefox 插件执行外部应用程序？

> ID：11527128
> 
> 赞同：5
> 
> 时间：2012-07-17T16:45:49.773
> 
> 标签：firefox, firefox-addon

我尝试使用 nsIProcess 执行 .exe 文件。但它不起作用，也没有给出任何错误消息。我正在使用 Firefox 10 和 Windows 7。有人可以建议我任何解决方案吗？谢谢

```
var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsIProcess);
file.initWithPath("C:\\Users\MJ\\Desktop\\Example.FaceDetection.exe");  
file.launch(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T06:10:13.380

您之前忘记了一个反斜杠`MJ`：

```
file.initWithPath("C:\\Users\\MJ\\Desktop\\Example.FaceDetection.exe"); 
```

因此，您的应用程序不会执行，因为它没有被发现。也就是说，运行应用程序的更好方法通常是[nsIProcess](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIProcess) - 它允许您指定命令行参数，它还将提供有用的反馈：

```
var params = ["foo", "bar"];
var process = Components.classes["@mozilla.org/process/util;1"]
                        .createInstance(Components.interfaces.nsIProcess);
process.init(file);
process.run(false, params, params.length); 
```

# xslt - xslt 中的第一个子节点名称

> ID：11527129
> 
> 赞同：5
> 
> 时间：2012-07-17T16:45:53.847
> 
> 标签：xslt

我想知道如何在 xslt 中找到特定节点的第一个子节点名称。

我有一个xml：

```
 <name>
    <body>
      <para>
        <text> some text</text>
      </para>
    </body>
  </name> 
```

我可以使用 body/node()[1]/local-name() 获取名称吗？

```
<xsl:template match="name">
<name> 
<xsl:variable name="firstchild" select="body/node()[1]/local-name()">
                        </xsl:variable>
 <xsl:value-of select="$firstchild" />
 </name>
</xsl:template> 
```

输出应该是

```
 <name>
    para
  </name> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T16:54:56.490

尝试这样的事情......

```
<xsl:template match="name">
  <name>
  <xsl:variable name="firstchild" select="name(body/*[1])"/>
  <xsl:value-of select="$firstchild" />
  </name>
</xsl:template> 
```

或者，如果您实际上不需要该变量，只需...

```
<xsl:template match="name">
  <name>
  <xsl:value-of select="name(body/*[1])" />
  </name>
</xsl:template> 
```

这是第二个示例的[xmlplayground](http://www.xmlplayground.com/fU9qol) ......查看输出窗口中的`<name>para</name>`点击。`View Source`

# c++ - 使用 linux 功能读取块的不连续运行

> ID：11527130
> 
> 赞同：0
> 
> 时间：2012-07-17T16:45:59.883
> 
> 标签：c++, c, linux-kernel, hard-drive

读取具有 dbms 样式访问模式的文件的最佳方法是什么？我的意思是：

*   我事先知道我需要获取的页面的偏移量。
*   有很长的连续页面。
*   可能存在小的不连续性。
*   可能有很长的不连续性。
*   所有的偏移量都是有序的（没有前后移动）。

此类偏移列表的示例：1,2,3,4,5,6,7,8,1000,1001,1003,1004,1005,1010,1011,1012,31004,31005,31006。

我对使用哪种策略来获得最佳性能有点困惑。

*   我应该依赖 Linux 页面管理器吗？如何？将遍历偏移量并一次读取 1 个块好吗？
*   使用 O_DIRECT 打开文件并管理我自己，即：交替长读取和搜索。在这种情况下我应该禁用预读吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:22:06.803

我不知道它最终是否是“最好的”，但我可能会`mmap()`使用该文件，然后`madvise()`尝试强制系统预先设置错误页面范围。`madvise()`显然，这还需要对您的偏移列表进行一些计算以识别连续的范围（好吧，它实际上并不需要它，但如果有很多这样的范围，这将减少调用并获得一点效率）。故障前多远取决于您在每个页面/范围上花费多少时间来进行您尝试进行的任何计算，因此需要进行一些测试/调整。你也可以用它`madvise()`来暗示你完成后不再需要一个范围，所以它可能会被撞到 to-be-freed-next 列表的前面。

# enterprise-architect - Enterprise Architect，数据库触发器生成（oracle）和双分号

> ID：11527142
> 
> 赞同：1
> 
> 时间：2012-07-17T16:47:03.547
> 
> 标签：enterprise-architect

EA 中有没有一种方法可以用分号来划分所有语句，同时在创建触发器语句之后只有一个分号？

问题：

通过将主键定义为数字（18,0）并将列属性中的 AutoNum 设置为 True，我正在使用 EA 8.0 为 Oracle 数据库生成触发器。 ![列属性](../Images/2e749529cf74b0370606a4b24d6ef6cb.png)

然后在“生成 DDL”对话框中选择以下复选框 ![生成 DDL](../Images/a534e704bc02dbe7e6ec39009c920e52.png)

EA 为触发器生成的是

```
CREATE OR REPLACE TRIGGER TRG_Foo_id 
BEFORE INSERT 
ON Foo 
FOR EACH ROW 
BEGIN 
    SELECT SEQ_Foo_id.NEXTVAL 
    INTO :NEW.id 
    FROM DUAL; 
END;; 
```

将该触发器插入到 PL/SQL Developer 中，它会显示编译错误并显示消息

> PLS-00103：找到符号“;”

当做一个

```
select * from SYS.USER_ERRORS 
```

当未指定“SQL Terminator”时，将创建触发器（因为 create 语句以一个分号而不是两个分号结尾）而没有任何错误，但所有其他 create table 语句都不以分号结尾，这会导致“ORA-00922：缺少或无效的选项'，因为语句没有用分号分隔。

[我](http://www.sparxsystems.com/enterprise_architect_user_guide/software_development/thecodetemplateeditor.html)没有找到直接影响正在生成的触发代码的方法，仅适用于 C、Java 等语言， 但不适用于数据库代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:23:40.360

与 Enterprise Architect 版本 9.3.934 进行了相同的生成，它生成了这样的触发器。

```
CREATE OR REPLACE TRIGGER TRG_Foo_id 
BEFORE INSERT 
ON Foo 
FOR EACH ROW 
BEGIN 
    SELECT SEQ_Foo_id.NEXTVAL 
    INTO :NEW.id 
    FROM DUAL; 
END;
/ 
```

所以好像是老版本的Bug

# php - 如何在 wordpress 插件中重置数组

> ID：11527150
> 
> 赞同：0
> 
> 时间：2012-07-17T16:47:45.277
> 
> 标签：php, arrays, amazon-web-services, wordpress

我使用 Wordpress 中的一个插件，它会自动从亚马逊导入信息，以在我的网站上显示为单独的帖子。该插件旨在为将在亚马逊上运行的每个搜索都有一个“活动”。该插件有一个内置功能，当它达到亚马逊的最大页面时，我可以*单独重置每个广告系列。*这允许广告系列继续搜索产品并创建帖子。

问题是，我有 1000 多个广告系列需要每隔几天重置一次。我想在插件中设置“全部重置”功能。以下是我们目前所拥有的：

这是用于实际重置显示活动上次运行时间的值的功能：

```
function ResetKeywordPages( $post_id )
{
    $custom = $this->get_post_custom( $post_id );
    $this->update_post_meta( $post_id, 'last_processed', time() );
    if( !$custom['amazon_product_keywords'] )
        return;
    $keyword_bits = array();
    if( $custom['amazon_product_keywords'] )
    {
        if( $custom['amazon_keyword_logic'] == 'and' )
            $keyword_bits[] = $custom['amazon_product_keywords'];
        else
            $keyword_bits = explode( ',', $custom['amazon_product_keywords'] );
    }
    else
    {
        $keyword_bits[] = 'empty'; // just so the logic works for category-only campaigns
    }
    foreach( $keyword_bits as $key => $value )
    {
        if( !is_array( $value ) )
            $value = trim( $value );
        if( !$value )
            continue;
        if( $value == 'empty' )
            $value = '';
        $node_string = $custom['amazon_product_node'];
        $search_hash = $this->SearchSlug( $value, $node_string );
        update_post_meta( $post_id, 'page_iter_'.$search_hash, 1 );
    }
} 
```

这是现有的 reset.php，它完成了定义的“item_id”的功能：

```
<?php require_once( dirname(dirname(dirname(dirname(dirname(dirname(dirname(__FILE__))))))).'/wp-load.php' );
$response = array();
$item_id = $_GET['item_id'];
if( $item_id )
{
$qodys_pinner->PostType('amazon-campaign')->ResetKeywordPages( $item_id );

update_post_meta( $item_id, 'last_processed', 0 );
}
/*
$response['results'][] = 'Amazon campaign keyword pages reset successfully';
$qodys_pinner->Helper('postman')->SetMessage( $response );*/

$url = $qodys_pinner->Helper('tools')->GetPreviousPage();

header( "Location: ".$url );
exit;
?> 
```

我对 PHP 还是很陌生，所以在修改数组和其他类似的函数时我很茫然。我到处寻找可以帮助我解决这个问题的东西，但一无所获；我认为这是因为这个插件的工作方式非常定制？

提前感谢您提供的任何帮助！:)

-追赶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:51:53.173

You will need to find a way of listing all the "item_ids" for the campaigns you want to reset. Have a look at the code that generates the links to "reset.php", and see if it has a query that could help.

Once you have that, you just need a modified version of reset.php which loops over the item_ids rather than just picking up a single ID:

```
 require_once( dirname(dirname(dirname(dirname(dirname(dirname(dirname(__FILE__))))))).'/wp-load.php' );
 $response = array();

 #TODO get $all_item_ids from somewhere...

 foreach ( $all_item_ids as $item_id )
 {
      $qodys_pinner->PostType('amazon-campaign')->ResetKeywordPages( $item_id );

      update_post_meta( $item_id, 'last_processed', 0 );
 }
 /*
 $response['results'][] = 'Amazon campaign keyword pages reset successfully';
 $qodys_pinner->Helper('postman')->SetMessage( $response );*/

 $url = $qodys_pinner->Helper('tools')->GetPreviousPage();

 header( "Location: ".$url );
 exit; 
```

# unix - vi (vim) 读取 ~/.exrc 以外的 exrc 文件

> ID：11527156
> 
> 赞同：3
> 
> 时间：2012-07-17T16:48:05.423
> 
> 标签：unix, vim, vi, ex

我们希望能够使用替代的 ex 初始化文件启动 vi（或 vim）。默认情况下，这是 ~/.exrc。

不幸的是，vim(1) 也为这个系统上的 "man ex" 提供，没有提到 .exrc。

任何提供等效行为的解决方法也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:29:18.923

我期待共同`-u conf_file`工作，但在这里失败了。一种解决方法是不加载配置文件，`-u NONE`然后使用您想要的配置文件`-c`：

```
ex -u NONE -c 'source your_local_exrc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T18:47:15.387

传统vi/ex的某些版本使用`EXINIT`环境变量作为命令字符串在启动时执行，`$HOME/.exrc`如果没有设置则执行。如果您正在运行这样的版本，您可以设置`EXINIT`为`so /other/file/to/execute`获取备用启动文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-27T12:26:42.353

在您的`~/.exrc`(for vi) 文件中，在开始时添加以下行

```
set exrc   " Dangerous
set secure " Disables shell and write commands in .exrc/.vimrc 
```

这将确保`.exrc`当前目录中的文件存在时将被加载。

# java - 如何获取所有用户文件夹 Box API v2

> ID：11527157
> 
> 赞同：1
> 
> 时间：2012-07-17T16:48:10.757
> 
> 标签：java, authentication, box-api

在盒子 api 的 v2 中找不到资源来获取用户的所有文件夹，如果我尝试获取资源 /folders 显示 405 method_not_allowed 错误，但 /folders/0 显示根级别，在 v1 中有一个叫做[get_account_tree](http://developers.box.net/w/page/12923929/ApiFunction_get_account_tree)的东西，但是在 v2 中我如何检索用户的所有文件夹？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:20:16.893

`get_account_tree`在 v2中没有完全等效的方法。您需要进行递归`GET /folders/{folder id}`调用才能检索用户帐户中的所有文件夹。

# xpages - 有什么方法可以从当前 Mobile XPage 移至另一个 Mobile XPage？

> ID：11527158
> 
> 赞同：1
> 
> 时间：2012-07-17T16:48:20.600
> 
> 标签：xpages, xpages-extlib

我了解其目的是在同一个 XPage 上的 xe:singlePageApp 标记中提供整个移动应用程序......不过，如果我可以从当前移动 xpage 调用另一个移动 xpage，那将是很好/更容易/有用。

对于第二个 xe:djxmLineItem，以下代码失败。有趣的是 moveTo 属性确实提供了当前数据库中 xpages 的下拉选择，因此您认为这个词有效。关于如何做到这一点的任何想法？

```
<xe:singlePageApp id="singlePageApp1"
    selectedPageName="appPage1">

    <!--Start of appPage1  -->
    <xe:appPage id="appPage1" pageName="appPage1" preload="true">
        <xe:djxmHeading id="djxmHeading1" label="appPage1"></xe:djxmHeading>
        <xe:djxmLineItem id="djxmLineItem2" label="P1 to P2"
            rightText="flip" moveTo="#appPage2" transition="flip">
        </xe:djxmLineItem>
        <xe:djxmLineItem
            id="djxmLineItem4"
            label="P1 to mobiledemo22"
            rightText="none"
            moveTo="/mobileDemo22.xsp"
            transition="none">
        </xe:djxmLineItem>
    </xe:appPage>
    <!--End of page1-->

    <!--Start of appPage2 -->
    <xe:appPage id="appPage2" pageName="appPage2"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:44:34.533

moveTo 旨在仅在同一 XPage 上的单页应用程序中工作。要移出当前 XPage，请使用常规的 openPage 简单操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T15:14:41.087

我这样做的方式是通过 dojo 属性。不要在 djxmLineItem 中使用“moveTo”属性。相反，添加一个“href”dojo 属性。因此，使用您的示例代码：

```
<xe:djxmLineItem
        id="djxmLineItem4"
        label="P1 to mobiledemo22"
        rightText="none"
        transition="none">
    <xe:this.dojoAttributes>
        <xp:dojoAttribute name="href">
            <xp:this.value>
            <![CDATA[#{javascript:return "mobileDemo22.xsp";}]]></xp:this.value>
        </xp:dojoAttribute>
    </xe:this.dojoAttributes>
</xe:djxmLineItem> 
```

# c# - 仅当对其端口发出 HTTP 请求时，如何启动 Windows Web 服务？

> ID：11527163
> 
> 赞同：3
> 
> 时间：2012-07-17T16:48:59.067
> 
> 标签：c#, http, sockets, proxy

我在我的 Windows 服务器上运行 TeamCity。它是一个运行 TomCat 的基于 Java 的构建服务，占用了 300MB 的空间。我只是偶尔使用它，所以它并不值得一直运行，当其他服务（网站）可以使用它时会耗尽内存。

目前我有一个简单的受保护网页，可以在需要使用它时启动和停止服务。

我还实现了一个脚本来查看服务何时没有进行任何构建并自动关闭服务。

因此，当服务关闭时，转到 TeamCity 端口 (9090) 会导致无响应。我希望能够访问该端口，然后某些东西会自动启动该服务，然后我可以再次访问它。

是否可以有一个“中间人”应用程序/代理/数据包嗅探器来监听端口 9090，如果服务没有运行，启动服务并将所有请求转发到该服务？

我更愿意将其实现为 http 数据包嗅探器，以避免代理从 A 到 B 的所有请求的任何性能问题。

如果有人能指出我正确的方向，那就太好了，如果需要，我计划在 C# 中实现一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T15:12:52.730

我认为您自己的想法非常接近一个足够好的解决方案：每当您关闭服务时让“中间人”应用程序在端口 9090 上侦听，并且在传入活动时它应该启动服务并退出，为 TeamCity 释放 9090 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T15:29:28.660

只是想我会提到我最后是如何解决这个问题的。

我创建了一个子域，它运行一些代码来检查 TeamCity 服务是否正在运行。如果尚未启动，则它会启动服务，然后重定向到 TeamCity 站点端口。如果它已经开始，它只是重定向。当一段时间内没有开始构建时，服务会自动关闭，释放内存。

# html - 包装表未显示 bg 图像

> ID：11527167
> 
> 赞同：0
> 
> 时间：2012-07-17T16:49:18.853
> 
> 标签：html, css

我正在构建一个 html 电子邮件程序，并且试图让我的包装表显示背景图像，以便我的内部表格可以将文本覆盖在其顶部，但它不会在包装器上显示背景图像。

```
 <table border="0" cellpadding="0" cellspacing="0" height="489" width="639" align="left" style="background-image:url(../../images/email-bg.jpg); width:639px; height:489px">
        <table border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td align="left" style="font-family: Arial, sans-serif; font-size:10px; color:#477398 "><h1>This is my title text</h1></td>
                <td colspan="2" align="left" style="font-family: Arial, sans-serif; font-size:10px; padding:10px 0 5px 2px; text-decoration:underline; color:#808184 "><a href="#">Continue</a></td>
            </tr>
        </table>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:53:58.597

试试这个，

```
<table border="0" cellpadding="0" cellspacing="0" height="489" width="639" align="left" >
<tr>
<td style="background-image:url(../../images/email-bg.jpg); width:639px; height:489px">
        <table border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td align="left" style="font-family: Arial, sans-serif; font-size:10px; color:#477398 "><h1>This is my title text</h1></td>
                <td colspan="2" align="left" style="font-family: Arial, sans-serif; font-size:10px; padding:10px 0 5px 2px; text-decoration:underline; color:#808184 "><a href="#">Continue</a></td>
            </tr>
        </table>
</td>
</tr>
    </table> 
```

请检查您的第一个表没有 tr 和 td 元素。

# c# - 为什么是扩展方法？

> ID：11527168
> 
> 赞同：2
> 
> 时间：2012-07-17T16:49:20.383
> 
> 标签：c#

许多 BCL 类都有方法和扩展方法。当 Microsoft 拥有其类的源代码时，选择 ExtensionMethods 而不是 Methods 的设计决策是什么？谢谢你，史密斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T16:51:18.930

实际上，BCL 中的大多数扩展方法并不适用于类，而是适用于接口，这是扩展方法的关键力量。

例如，几乎所有的 LINQ to 对象都是作为`IEnumerable<T>`接口的扩展实现的，而不是类的扩展`List<T>, HashSet<T>`等等。

因为接口没有功能（只是一个契约），所以向接口添加扩展方法为您提供了一种访问接口本身的方法。当实现只需要知道其使用的接口而不是实现细节（本身）时，这尤其方便。

微软*确实*一直在他们的 BCL 类中添加新方法（当然，他们尽可能避免破坏性更改）。但我相信他们在 BCL 中使用的大多数扩展方法是在接口上，而不是用于添加可以通过新方法直接添加到类/结构中的功能。

因此，简而言之，当 Microsoft 选择向单个`class`（或具有公共基类的系列）添加功能时，他们可能只是直接添加方法（所有条件都相同），但如果他们想将新方法应用于给定接口的所有实现，他们可能会在该接口上使用扩展方法。

还要记住这一点！因为微软给了我们扩展方法，它也适用于他们没有创建的类！例如，您创建的任何实现的类`IEnumerable<T>`都可以获得 LINQ 的功能以及额外的好处，即使您没有继承公共基类等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:54:35.587

> 选择 ExtensionMethods 而不是 Methods 的设计决策是什么

在我看来，选择扩展方法的一个重要原因是它促进了 SOLID 的 Open/Closed 原则，即 open for extension close for modify

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:24:20.430

Microsoft 倾向于将扩展方法用于适用于各种不同代码库的功能。例如，LINQ 几乎完全作为扩展方法实现。（并且您指出的大多数（如果不是全部）方法都是通用 LINQ 方法，而不是特定于这些类）。

这有很多优点。首先，如果您不使用 LINQ，则不必包含对 LINQ 库的引用或 using。这减少了代码膨胀。

其次，LINQ 可以应用于任何实现 IEnumerable 的对象，包括您自己的代码（如果您实现了枚举器）。您不必像其他情况下那样编写此代码。

第三，它允许将功能分解为离散的单元，从而更好地分离关注点并使类更易于维护。

还有很多其他潜在的好处，但是这个列表应该足以清楚地表明扩展方法是实现这些方法的最佳方式。

# objective-c - 从类方法分配/释放指向数组的指针

> ID：11527169
> 
> 赞同：0
> 
> 时间：2012-07-17T16:49:25.120
> 
> 标签：objective-c, ios, arrays, memory-management

我有一个自定义对象，我试图在其中编写一个返回`CGPoint`结构数组的便利类方法。这样做的原因是有几种方法，例如将`CGPathAddLines`其作为参数，而类方法可以让我免于`CGPoint`每次将自定义对象转换为结构数组。不幸的是，我不确定实现这一目标的最佳方法，尤其是在内存管理方面。

到目前为止，这是我的实现：

```
+ (CGPoint*)CGPointsFromData:(NSArray*)data
{
    CGPoint *points = (CGPoint*)malloc(data.count * sizeof(CGPoint));
    DataPoint *dataPoint;
    int i = 0;
    for (id object in data) {
        if ([object isKindOfClass:[DataPoint class]]) {
            dataPoint = (DataPoint*)object;
            points[i] = dataPoint.point;
            i++;
        }
    }
    return points;
} 
```

编辑：如果不清楚，`DataPoint`该类有一个 property `CGPoint point`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:01:40.513

如果您希望这是一个类方法，请将“alloc”或类似的词放在方法名称中，并将释放内存的义务放在方法的调用者身上，然后只需返回您分配的指针（不需要在此方法中涉及来自任何其他范围的变量）。然后，调用此方法的任何人都可以将指针存储在实例变量中，并在适当的时候释放它。

```
+ (CGPoint*)allocCGPointsArrayWithData:(NSArray*)data
{
    CGPoint *thesePoints = (CGPoint*)malloc(data.count * sizeof(CGFloat));
    DataPoint *dataPoint;
    int i = 0;
    for (id object in data) {
        if ([object isKindOfClass:[DataPoint class]]) {
            dataPoint = (DataPoint*)object;
            thesePoints[i] = dataPoint.point;
            i++;
        }
    }
    return thesePoints;
} 
```

然后消费这个（在这种情况下来自同一个班级）

```
// @interface
@interface FooViewController:UIViewController {
    CGPoint *_myPointsCArray;
}

// @implementation    
-(void) viewWillAppear {
    _myPointsCArray = [[self class] allocCGPointsArrayWithData:self.dataArray];
    [super viewWillAppear];
}
-(void) viewWillDisappear {
    free(_myPointsCArray);
    [super viewWillDisappear];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:22:18.787

如果您只使用 ObjC，您可能会考虑一个`MONCGPointArray`包含 a `NSData`or`NSMutableData`实例的类（例如 ）。将`NSData`负责分配和重新分配，并且类接口可用于引入类型安全。

为了显示：

```
@interface MONCGPointArray : NSObject
{
@private
    NSMutableData * cgPoints;
}

- (NSUInteger)count;
- (CGPoint)CGPointAtIndex:(NSUInteger)idx;
- (const CGPoint*)CGPoints;

- (void)appendCGPoint:(CGPoint)point;

// ...

@end 
```

就个人而言，我只是使用诸如 C++ 之类的类型`std::vector<CGPoint>`来处理此类集合。

# iphone - 将字符串转换为 NSDate，时区调整不正确？

> ID：11527170
> 
> 赞同：0
> 
> 时间：2012-07-17T16:49:27.810
> 
> 标签：iphone, objective-c, ios

我正在尝试将时间字符串从一个时区转换为 NSDate 对象，然后使用本地时区将其输出回字符串。不过，我似乎要出去 1 小时。例如，我添加了输出时区，以便显示错误。有一些类似的问题，但没有任何迹象表明我在哪里出错了！！！在发布此消息时，两个时区目前都处于夏令时 - 但是 NSDateFormatter 应该处理基于时区的任何差异。

**更新：**问题似乎在于将 LA 时间转换为 GMT，而不是转换为 BST。据我所知，所有 NSDate 都存储为 GMT。下面的代码演示了这一点（添加了语言环境 - 似乎没有什么区别）：

```
NSDateFormatter *dateF = [[NSDateFormatter alloc] init];
[dateF setDateFormat:@"HH:mm"];
[dateF setTimeZone:[NSTimeZone timeZoneWithName:@"America/Los_Angeles"]];
[dateF setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]];
NSDate* sourceDate = [dateF dateFromString:@"09:15"];

NSLog(@"Date GMT: %@", [sourceDate description]);
NSLog(@"Date BST: %@", [sourceDate descriptionWithLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"]]); 
```

**输出：**

格林威治标准时间：1970-01-01 17:15:00 +0000*这是不正确的！*

日期 BST：1970 年 1 月 1 日星期四 18:15:00 GMT+01:00*因此这也是不正确的*

**原始示例**

洛杉矶的 09:15 应该是伦敦的 17:15，而不是 18:15...

```
NSDateFormatter *dateF = [[NSDateFormatter alloc] init];
[dateF setDateFormat:@"HH:mm"];
[dateF setTimeZone:[NSTimeZone timeZoneWithName:@"America/Los_Angeles"]];

NSDate* sourceDate = [dateF dateFromString:@"09:15"];

NSDateFormatter *dateformatter = [[NSDateFormatter alloc] init];
[dateformatter setDateFormat:@"HH:mm"];
[dateformatter setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/London"]];
NSLog(@"%@", [dateformatter stringFromDate:sourceDate]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:56:52.310

NSDate 对象以绝对时间存储日期。例如，清单 16 中创建的日期对象表示 4:00 PM CDT、5:00 EDT，等等。

```
NSCalendar *gregorian=[[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
[gregorian setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"CDT"]];
NSDateComponents *timeZoneComps=[[NSDateComponents alloc] init];
[timeZoneComps setHour:16];
//specify whatever day, month, and year is appropriate
NSDate `enter code here`*date=[gregorian dateFromComponents:timeZoneComps]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T06:57:04.260

来自 NSTimeZone 文档：

> 请注意，严格来说，时区数据库条目（例如“America/Los_Angeles”）是 ID，而不是名称。时区名称的一个示例是“太平洋夏令时间”。尽管许多 NSTimeZone 方法名称都包含“名称”一词，但它们指的是 ID。

[https://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSTimeZone_Class/Reference/Reference.html](https://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSTimeZone_Class/Reference/Reference.html)

# active-directory - 使用 UPN 格式的 samAccountName 进行身份验证

> ID：11527173
> 
> 赞同：6
> 
> 时间：2012-07-17T16:49:33.780
> 
> 标签：active-directory, ldap

在添加对通过 Active Directory 使用用户的身份验证用户的支持`samAccountName`时，我不小心使用`samAccountName`UPN 格式进行了身份验证。

示例：用户拥有 的 UPN请`test@mycorp.com`注意 ，和 UPN 完全不同。当我使用 username as 执行 ldap 绑定操作时，身份验证出人意料地成功。`samAccountName``anotherTest``samAccountName``anotherTest@mycorp.com`

为什么会成功？`samAccountName`使用UPN 格式绑定是否有效？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T05:35:57.400

好问题。情况就是这样，我从未试图找到答案。我在网上找不到文档，只能在另一个论坛上找到这个[讨论。](http://www.tech-archive.net/Archive/Windows/microsoft.public.windows.server.active_directory/2007-02/msg00114.html)

听起来无论您在`userPrincipalName`属性中设置什么值，Active Directory（但不是 ADAM）中都有一个默认的 UPN。默认 UPN 格式为`<samAccountName>@<domainName>`.

您还应该注意，`userPrincipalName`属性不是强制性属性。这意味着您始终可以创建一个没有为`userPrincipalName`属性分配值的 AD 用户对象。如果您使用 Active Directory 用户和计算机管理单元创建它，您不会意识到这一点，因为 UI 本身会强制您始终键入值。但是，如果您使用 ADSI 以编程方式创建 AD 对象，则可以这样做。

如果您的年龄足够大，对 NT4 系统有一些经验，您应该知道当时只有 samAccountName，但根本没有 UPN。正因为如此，当您从 NT4 迁移到 Windows 2003 时，[您将创建一堆没有设置 UPN 的用户](http://www.winvistatips.com/after-upgrade-nt-4-0-2003-upn-user-logon-name-missing-t677404.html)

我怀疑这是让默认 UPN 派生自`samAccountName`.

请注意，这`samAccountName`是 AD 用户对象的必需属性。因此，该属性不可能为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T12:49:06.707

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/cc223499.aspx)中提供的信息，samAccountName@domainName 允许成功绑定似乎很正常：

> 对象的 UPN 是：
> 
> *   对象的 userPrincipalName 属性的值，或
> *   仅适用于 AD DS：**对象的 sAMAccountName 属性的值，后跟“@”符号，后跟以下任一：**
>     
>     *   **与对象在同一林中的域**的 DNS 名称，****
>     ***   或配置 NCreplica 中分区容器的 uPNSuffixes 属性中的值。**

# java - grails - 域类中的继承 - 将列继承到基表中

> ID：11527174
> 
> 赞同：4
> 
> 时间：2012-07-17T16:49:43.957
> 
> 标签：java, grails, orm, grails-orm

我有一个记录类：

```
class Record {
    Date dateCreated
    Date lastUpdated
    def beforeInsert() {
        dateCreated = new Date()
    }
    def beforeUpdate() {
        lastUpdated = new Date()
    }
    static mapping = { tablePerHierarchy false }
} 
```

这个类被其他几个域类继承——例如：

```
class User extends Record{
    String userName
    String password
    String email
} 
```

我的问题是：有没有办法将记录表的列嵌入到扩展它的表中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T16:57:56.550

您可以定义`tablePerClass`或`tablePerHierarchy`策略。 [请参阅此处的文档](http://grails.org/doc/latest/guide/single.html#inheritanceStrategies)。

因此，您应该使用以下代码：

```
static mapping = {
    tablePerHierarchy true
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:27:30.003

您可以在此处使用继承，但这可能会限制您的类层次结构。我对 GORM 不像对直接休眠（这是 GORM 使用的）那么熟悉。如果你发现你想使用组合而不是继承，我相信这样的事情会起作用（虽然我还没有尝试过）：

```
@Embeddable class AuditTimestamps { ... }

class User {
   @Embedded AuditTimestamps auditTimestamps

   def beforeInsert() { auditTimestamps.beforeInsert() }
   def beforeUpdate() { auditTimestamps.beforeUpdate() }

} 
```

我已经完成了类似这样的事情，它是直接的 java/hibernate，它的工作原理就像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T06:30:58.510

首先，如果您的问题是 dataCreated 和 dateUpdated，那么您不需要在这里表现出色！您可以将这些字段放在域中的任何位置，GORM 会神奇地填写它们！如果您的计划是不将它们添加到任何地方，您可以简单地在`src/groovy`目录中创建一个 Groovy 类，然后继承它们！

如果您有一个复杂的继承树，那么动态注入这些属性也可能是一个解决方案！您可以在引导程序中执行此操作！

```
def grailsApplication // Autowiring

grailsApplication.domainClasses.each { domainClass -> 
    // add the fields you want to the metaclass
} 
```

如果您打算在更新和插入之前调整数据，则覆盖`beforeInsert`and`beforeUpdate`方法。从 metaClass 覆盖这些方法的缺点是您不能在实际的域类中使用它们。

第三种方法是使用自定义 eventListners 并处理 GORM(Hibernate) 事件。有关详细信息，您应该[在这里查看](http://margotskapacs.com/2013/04/hook-into-gorm-events-from-plugin-in-grails/)，作者正在演示如何从插件中做到这一点！确信您可以映射它以适合您的使用。

# ruby-on-rails - Facebook 身份验证 + 负载均衡器

> ID：11527175
> 
> 赞同：3
> 
> 时间：2012-07-17T16:50:02.613
> 
> 标签：ruby-on-rails, ruby, facebook, ruby-on-rails-3

因此，我发现这里只有一个其他线程考虑到这个问题，不幸的是它有 1 个答案，0 票赞成。

我的问题是我目前维护的网站使用omniauth gem 通过facebook API 对新用户和现有用户进行身份验证。当我们切换到使用两台服务器（具有使用相同数据库的相同 Rails 应用程序）时，它破坏了 facebook 登录。显然，我的理论是 app01 尝试使用 facebook auth 登录 user1，但来自 facebook 的响应可能已经通过负载均衡器到达 app02？

如果您对此问题有任何经验，请不要犹豫，解释您是如何解决它的。

如果我发现答案，我一定会发布我的发现。

# c++ - 检索 unordered_map 的值

> ID：11527176
> 
> 赞同：0
> 
> 时间：2012-07-17T16:50:05.953
> 
> 标签：c++, c++11, std, unordered-map

我正在读取 .dat 文件的内容并以这种方式填充 unordered_map：

```
bool FileManager::LoadSkillList(LPCSTR name)
{
    int counter = 0;
    std::ifstream myFile(name, std::ios::binary | std::ios::out );
    if(myFile.fail())
    {
        myFile.close();
        return false;
    }
    char skill[0x12C];
    ZeroMemory(skill,0x12C);
    char buff[100];
    while(counter != TOTAL_SKILLS)
    {
        myFile.read(skill,0x12C);

        if(myFile.gcount() < 1) continue;

        auto skillBlock = (SkillInfo*)&skill;

#ifdef _DEBUG
        char* skillName = skillBlock->szSkillName;
        int delay = skillBlock->delayTime;

        wsprintf(buff,"Skill Name: %s - Delay: %d\r\n",skillName,delay);
        Log(buff);
#endif

        this->skills.insert(std::make_pair(counter,skillBlock));

        if(myFile.gcount() > 0) counter++;
        myFile.seekg( counter * 0x12C);
    }
#ifdef _DEBUG
    Log("Skill count: %d\r\n",(int)this->skills.size());
#endif
    myFile.close();

    return (counter>0)?true:false;
} 
```

当我尝试在`LoadSkillList`方法中检索地图值时，它工作正常。但是我在 FileManager 类中有另一个方法，它可以被其他类访问，以检索 unordered_map 值。

```
for(int skillNumber = 0; skillNumber < TOTAL_SKILLS; skillNumber++)
{
    auto fileDelay = fManager->getDelay(skillNumber);
}
// ...

int FileManager::getDelay(int n)
{
    auto block = this->skills.at(n);
    return block->delayTime;
} 
```

但不知何故，我的应用程序在该方法中崩溃了。（我正在构建一个 dll，并使用调试器对其进行了检查。）

有什么线索吗？已经尝试`std::array, std::map`但没有成功，两者都以相同的方法崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:37:30.010

我这样做解决了我的问题：

声明`skills`为静态。像这样添加值`unordered_map`：

```
 FileManager::skills.insert(std::make_pair(counter, new SkillInfo()));
    memcpy(this->skills[counter],skillBlock,sizeof(SkillInfo)); 
```

像这样检索所需的值：

```
int FileManager::getDelay(int n)
{
auto block = FileManager::skills[n];
return block->delayTime;
} 
```

# javascript - 如何在 MonoTouch 中捕获 UIWebView 错误？

> ID：11527181
> 
> 赞同：1
> 
> 时间：2012-07-17T16:50:20.503
> 
> 标签：javascript, ios, uiwebview, xamarin.ios, onerror

这是Objective C中类似问题[的答案](https://stackoverflow.com/a/193282/458193)，但我不确定将其转换为MonoTouch的正确方法是什么。

基本上，我希望能够捕获 JavaScript 错误并至少知道文件名和行号——不幸的是，`window.onerror`我没有提供这些关键信息。

特别是，我不确定是否应该公开本机库，或者是否可以在纯 MonoTouch 中编写它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T19:05:42.933

我采用了受[Robert Sanders 和 Kresimir Prcela 的回答](https://stackoverflow.com/questions/193119/how-can-my-iphone-objective-c-code-get-notified-of-javascript-errors-in-a-uiwebv)[`UIWebView+Debug`](https://github.com/PabloGS/UIWebView-Debug)启发的 Pablo 类别。

请注意，他的代码还包含一个私有 API 调用，您可以使用它来启用[远程 Web 检查器](http://antony_perkov.blogspot.com/2012/03/debugging-uiwebview-content-in.html)。
（由于某种原因，这件事对我不起作用。）

**更新：** [这里](http://www.iwebinspector.com/help.html#ml)是在 Mountain Lion 中调试 UIWebView 的方法——您需要下载旧版本的 Chromium。

请记住在调试时只使用私有 API——如果您提交应用程序并忘记删除这些调用，Apple 将拒绝您的应用程序。出于这个原因，Xcode 和 MonoDevelop 代码都使用`DEBUG`条件。

这是我正在使用的完整源代码：

## Xcode 项目

### UIWebView+Debug.h

```
//
//  WebView+Debug.h
//  VOL
//
//  Created by Pablo Guillen Schlippe on 26.07.11.
//  Copyright 2011 Medienhaus.
//

/*

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
 associated documentation files (the "Software"), to deal in the Software without restriction, 
 including without limitation the rights to use, copy, modify, merge, publish, distribute, 
 sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is 
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or 
 substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT 
 NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT
 OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. 

 */

// This little drop in category is based on the following StackOverflow article:
// https://stackoverflow.com/questions/193119/

#ifdef DEBUG

// Use this to toggle logging
#define kDidParseSource         0
#define kFailedToParseSource    1
#define kExceptionWasRaised     1
#define kDidEnterCallFrame      0
#define kWillExecuteStatement   0
#define kWillLeaveCallFrame     0

void enableRemoteWebInspector(void);

#endif 
```

### UIWebView+Debug.m

```
//
//  WebView+Debug.m
//  VOL
//
//  Created by Pablo Guillen Schlippe on 26.07.11.
//  Copyright 2011 Medienhaus. All rights reserved.
//

#ifdef DEBUG

#import <objc/runtime.h>
#import "UIWebView+Debug.h"

@class WebView;
@class WebFrame;
@class WebScriptCallFrame;

#pragma mark -

static NSString* getAddress() {
    id myhost =[NSClassFromString(@"NSHost") performSelector:@selector(currentHost)];

    if (myhost) {
        for (NSString* address in [myhost performSelector:@selector(addresses)]) {
            if ([address rangeOfString:@"::"].location == NSNotFound) {
                return address;
            }
        }
    }

    return @"127.0.0.1";
}

void enableRemoteWebInspector() {
    [NSClassFromString(@"WebView") performSelector:@selector(_enableRemoteInspector)];
    NSLog(@"Point your browser at http://%@:9999", getAddress());
}

#pragma mark -

@interface ScriptDebuggerDelegate : NSObject

-(id)functionNameForFrame:(WebScriptCallFrame*)frame;
-(id)callerForFrame:(WebScriptCallFrame*)frame;
-(id)exceptionForFrame:(WebScriptCallFrame*)frame;

@end

#pragma mark -

@implementation ScriptDebuggerDelegate

// We only have access to the public methods declared in the header / class
// The private methods can also be accessed but raise a warning.
// Use runtime selectors to suppress warnings

#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"

-(id)functionNameForFrame:(WebScriptCallFrame*)frame {
    SEL functionNameSelector = @selector(functionName);
    return [(id)frame performSelector:functionNameSelector];
}

-(id)callerForFrame:(WebScriptCallFrame*)frame {
    SEL callerSelector = @selector(caller);
    return [(id)frame performSelector:callerSelector];
}

-(id)exceptionForFrame:(WebScriptCallFrame*)frame {
    SEL exceptionSelector = @selector(exception);
    return [(id)frame performSelector:exceptionSelector];
}

#pragma clang diagnostic pop

- (void)webView:(WebView *)webView      didParseSource:(NSString *)source
 baseLineNumber:(unsigned)lineNumber
        fromURL:(NSURL *)url
       sourceId:(int)sid
    forWebFrame:(WebFrame *)webFrame {
    if (kDidParseSource)
        NSLog(@"ScriptDebugger called didParseSource: \nsourceId=%d, \nurl=%@", sid, url);
}

// some source failed to parse
- (void)webView:(WebView *)webView failedToParseSource:(NSString *)source
 baseLineNumber:(unsigned)lineNumber
        fromURL:(NSURL *)url
      withError:(NSError *)error
    forWebFrame:(WebFrame *)webFrame {
    if (kFailedToParseSource)
        NSLog(@"ScriptDebugger called failedToParseSource:\
              \nurl=%@ \nline=%d \nerror=%@ \nsource=%@",
              url, lineNumber, error, source);
}

- (void)webView:(WebView *)webView  exceptionWasRaised:(WebScriptCallFrame *)frame
       sourceId:(int)sid
           line:(int)lineno
    forWebFrame:(WebFrame *)webFrame {
    if (kExceptionWasRaised)
        NSLog(@"ScriptDebugger exception:\
              \nsourceId=%d \nline=%d \nfunction=%@, \ncaller=%@, \nexception=%@",
              sid,
              lineno,
              [self functionNameForFrame:frame],
              [self callerForFrame:frame],
              [self exceptionForFrame:frame]);
}

// just entered a stack frame (i.e. called a function, or started global scope)
- (void)webView:(WebView *)webView    didEnterCallFrame:(WebScriptCallFrame *)frame
       sourceId:(int)sid
           line:(int)lineno
    forWebFrame:(WebFrame *)webFrame {
    if (kDidEnterCallFrame)
        NSLog(@"ScriptDebugger didEnterCallFrame:\
              \nsourceId=%d \nline=%d \nfunction=%@, \ncaller=%@, \nexception=%@",
              sid,
              lineno,
              [self functionNameForFrame:frame],
              [self callerForFrame:frame],
              [self exceptionForFrame:frame]);
}

// about to execute some code
- (void)webView:(WebView *)webView willExecuteStatement:(WebScriptCallFrame *)frame
       sourceId:(int)sid
           line:(int)lineno
    forWebFrame:(WebFrame *)webFrame {
    if (kWillExecuteStatement)
        NSLog(@"ScriptDebugger willExecuteStatement:\
              \nsourceId=%d \nline=%d \nfunction=%@, \ncaller=%@, \nexception=%@",
              sid,
              lineno,
              [self functionNameForFrame:frame],
              [self callerForFrame:frame],
              [self exceptionForFrame:frame]);
}

// about to leave a stack frame (i.e. return from a function)
- (void)webView:(WebView *)webView   willLeaveCallFrame:(WebScriptCallFrame *)frame
       sourceId:(int)sid
           line:(int)lineno
    forWebFrame:(WebFrame *)webFrame {
    if (kWillLeaveCallFrame)
        NSLog(@"ScriptDebugger willLeaveCallFrame:\
              \nsourceId=%d \nline=%d \nfunction=%@, \ncaller=%@, \nexception=%@",
              sid,
              lineno,
              [self functionNameForFrame:frame],
              [self callerForFrame:frame],
              [self exceptionForFrame:frame]);
}

@end

#pragma mark -

@interface UIWebView ()

-(id)setScriptDebugDelegate:(id)delegate;

@end

#pragma mark -

@implementation UIWebView (Debug)

- (void)webView:(id)sender didClearWindowObject:(id)windowObject
       forFrame:(WebFrame*)frame {
    ScriptDebuggerDelegate* delegate = [[ScriptDebuggerDelegate alloc] init];
    objc_setAssociatedObject(sender, @"ScriptDebuggerDelegate", delegate, OBJC_ASSOCIATION_RETAIN);
    [sender setScriptDebugDelegate:delegate];
}

@end

#endif 
```

## MonoTouch 项目

### AppDelegate.cs

```
[Register ("AppDelegate")]
public partial class AppDelegate : UIApplicationDelegate
{
    [Conditional("DEBUG")]
    [DllImport ("__Internal", EntryPoint = "enableWebInspector")]
    public extern static void EnableRemoteWebInspector ();

    public override bool FinishedLaunching (UIApplication application, NSDictionary launchOptions)
    {
        // It will tell you the port in the console,
        // More info here: http://antony_perkov.blogspot.com/2012/03/debugging-uiwebview-content-in.html
        EnableRemoteWebInspector(); 
        return true;
    }
} 
```

因为我无法让`LinkWith`属性正常工作，所以我把它放在项目属性中：

### iPhone 构建项目选项

**模拟器**

```
-gcc_flags "-L${ProjectDir}/Native -lNativeLib-arm7 -force_load ${ProjectDir}/Native/libNativeLib-arm7.a" 
```

**设备**

```
-gcc_flags "-L${ProjectDir}/Native -lNativeLib-i386 -force_load ${ProjectDir}/Native/libNativeLib-i386.a" 
```

### 自定义命令 > 构建之前

命令

**模拟器**

```
sh ${SolutionDir}/NativeLib/compile-arm "${ProjectConfigName}" 
```

**设备**

```
sh ${SolutionDir}/NativeLib/compile-arm "${ProjectConfigName}" 
```

工作目录

```
${SolutionDir}/NativeLib 
```

最后，这些是构建脚本：

### 编译-i386

```
xcodebuild -project NativeLib.xcodeproj -target NativeLib -sdk iphonesimulator -configuration $1 clean build
cp build/$1-iphonesimulator/libNativeLib.a ../ProjectName/Native/libNativeLib-i386.a 
```

### 编译臂

```
xcodebuild -project NativeLib.xcodeproj -target NativeLib -sdk iphoneos -arch armv6 -configuration $1 clean build
cp build/$1-iphoneos/libNativeLib.a ../ProjectName/Native/libNativeLib-arm6.a
xcodebuild -project NativeLib.xcodeproj -target NativeLib -sdk iphoneos -arch armv7 -configuration $1 clean build
cp build/$1-iphoneos/libNativeLib.a ../ProjectName/Native/libNativeLib-arm7.a 
```

* * *

我意识到这可能不是*最好*的方法，但它工作得很好。
如果您知道，请随时发布一个更简单的解决方案。

# wpf - 水平方向的 ListBoxItems 不会拉伸

> ID：11527185
> 
> 赞同：0
> 
> 时间：2012-07-17T16:50:49.010
> 
> 标签：wpf, xaml, layout, listbox

我试图在使用 WrapPanel 和 Orientation="Horizo​​ntal" 时拉伸 ListBoxItems：

```
<ListBox HorizontalContentAlignment="Stretch" ItemsSource="{Binding SomeCollection}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Border>
                <!--Some Textboxes and Labels-->
            </Border>
        </DataTemplate>
    </ListBox.ItemTemplate>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

如果我不使用 WrapPanel，它将扩展 ListBoxItems 以匹配 ListBox 的大小。当我使用 WrapPanel 时，ListBoxItems 具有最小宽度。

简要地：

我有一个列表，其中包含两个水平方向的 ListBoxItems：

![包含两个项目的列表](../Images/f9018a801c2afa3c93ab4e1e7d035ef3.png)

当我展开主窗口时，ListBox 也会展开，因为我有 Horizo​​ntalAlignment="Stretch" 但 ListBoxItems 不会。 ![在此处输入图像描述](../Images/9dd58f2fbbbe21b71ea213a0444fbe2e.png)

所以我想要的是 ListBoxItems 与 ListBox 一起扩展，如下例所示：

![展开窗口后的相同列表](../Images/73c1b0c34199845c22d761d3a0f37a1a.png)

对于这种情况，除了 ListBox 之外，还有更好的控件吗？如果这还不够清楚，请告诉我。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:52:54.060

您不能使用水平环绕面板，也不能期望元素水平拉伸，这是逻辑上的利益矛盾。实际上，如果您想要*任何*类型的拉伸，a`WrapPanel`可能不是正确的面板。

如果您希望它们占用相等的空间，而整体占用所有水平空间，则使用 a [`UniformGrid`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.uniformgrid.aspx)（设置`Rows`为一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:23:37.690

您应该能够像这样使用`UniformGrid`a `ItemsPanel`：

```
<ListBox HorizontalContentAlignment="Stretch" ItemsSource="{Binding SomeCollection}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Border>
                <!--Some Textboxes and Labels-->
            </Border>
        </DataTemplate>
    </ListBox.ItemTemplate>
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Rows="1" Columns="2" />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

# ios - 带有本地化功能的 iOS AppStore 更新会破坏应用程序吗？

> ID：11527186
> 
> 赞同：0
> 
> 时间：2012-07-17T16:50:49.410
> 
> 标签：ios, localization, app-store, installation

大家好，这是一个非常重要的问题，我在任何地方都找不到明确的答案，我相信很多人都经历过这种情况，所以也许你可以帮助我。

我发布了我的应用程序，第一个版本根本没有本地化，现在我发布了一个包含本地化的更新，因为一些图片、plist 甚至 xibs 现在不在他们以前的文件夹中并放在 en.lproj 等中。问题是，至少在使用 xCode 进行测试时，更新应用程序时，不会删除以前安装的文件，是什么导致应用程序选择旧版本的文件（非本地化文件夹中的文件），这会导致应用程序的某些部分保持未本地化，甚至在某些情况下导致它崩溃。

我读到通过 AppStore 更新时，过程会有所不同，以前的安装将被清除，因此它会正常工作，但是我不确定，我真的不想发布有缺陷的应用程序版本公开。

那么有人对这种情况有什么要说的吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:03:16.613

简而言之，您不会在实际更新时遇到这个问题。

测试将您的新版本应用程序（临时构建）上传到[testflight](https://testflightapp.com)并从 testflight 更新您的旧应用程序。

# c# - 无法使用 Ole Db 提供程序通过 C# 找到 postgres 数据库

> ID：11527189
> 
> 赞同：4
> 
> 时间：2012-07-17T16:51:07.013
> 
> 标签：c#, database, postgresql, oledb, provider

我正在尝试访问在我们设置的 linux 服务器上设置的一些 postgresSQL 数据库，以前我们一直在使用 access 和 SQL server 2008 并与 C# Ole Db 连接得很好，但我们正在尝试看看是否我们可以迁移到 postgres，因为它会更方便。我可以使用 ODBC 数据源管理器完美地访问 linux 机器上的这些数据库，它成功地测试了数据库的连接，PG Admin III 显示所有数据库都很好，psql 也可以很好地访问这些数据库。但是，当我尝试通过 Visual Studio 使用 Ole DB 进行连接时，连接字符串类似于：

“Provider=PostgresSQL OLE DB Provider;Server=192.168.0.64:5432;location=FRANK;User ID=ourusername;password=ourpassword;timeout=1000;”

我是从 connectionstrings.com 得到的，他们从来没有让我失望过。我尝试了多种变体，搜索了其他人在线连接字符串时遇到的问题，并相应地进行了更改，但我仍然遇到相同的错误：

致命：数据库“FRANK”不存在

不知道为什么我会收到此错误，它显然存在。与其他连接方法相比，唯一不同的是提供者或它是通过 Visual Studio 完成的。我得到的提供程序是从 PGfoundry [http://pgfoundry.org/projects/oledb/](http://pgfoundry.org/projects/oledb/)下载的，这是我唯一能想到的问题。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:28:35.240

你试过使用 Npgsql 吗？[http://npgsql.projects.postgresql.org/](http://npgsql.projects.postgresql.org/)

```
..
using Npgsql;
..

NpgsqlConnection con = new NpgsqlConnection("Server=192.168.0.64:5432;User ID=ourusername;password=ourpassword;Database=FRANK;timeout=1000"); 
```

也不要忘记配置 postgresql 服务器文件 pg_hba.conf 和 postgresql.conf 以接受您的连接类型。

# c# - WebRequest 不断编码我的数据

> ID：11527193
> 
> 赞同：3
> 
> 时间：2012-07-17T16:51:26.013
> 
> 标签：c#, .net, webrequest

我正在使用以下代码。我有一个问题，其中“参数”是一个字符串，我里面有空格字符，无论我是否在将其转换为字节之前使用 HttpUtility.UrlDecode(parameters)，在 Wireshark 中我都看到 postdata 是 bla+bla+bla 而不是布拉布拉布拉。

这是什么原因造成的？编码？

```
WebRequest request = WebRequest.Create(uri);

// Set the Method property of the request to POST.
request.Method = "POST";

// Create POST data and convert it to a byte array.
string postData = parameters;
byte[] byteArray = Encoding.UTF8.GetBytes(postData);

// Set the ContentType property of the WebRequest.
request.ContentType = "application/x-www-form-urlencoded";

// Set the ContentLength property of the WebRequest.
request.ContentLength = byteArray.Length;

// Get the request stream.
Stream dataStream = request.GetRequestStream();

// Write the data to the request stream.
dataStream.Write(byteArray, 0, byteArray.Length);

// Close the Stream object.
dataStream.Close();

// Get the response.
WebResponse response = request.GetResponse();

// Display the status.
Console.WriteLine(((HttpWebResponse)response).StatusDescription);

// Get the stream containing content returned by the server.
dataStream = response.GetResponseStream();

// Open the stream using a StreamReader for easy access.
StreamReader reader = new StreamReader(dataStream);

// Read the content.
string responseFromServer = reader.ReadToEnd();

// Display the content.
string res = responseFromServer;

// Clean up the streams.
reader.Close();
dataStream.Close();
response.Close();

return res; 
```

# jetty - jetty access.log 不再记录

> ID：11527194
> 
> 赞同：1
> 
> 时间：2012-07-17T16:51:27.993
> 
> 标签：jetty

我已经在生产中启用了 Jetty Access Logs，直到今天一切都很好。今天，访问日志似乎不再获取数据，即使服务本身运行正常。我怀疑我对“retainDays”属性有些不理解。这是设置日志记录的 etc/jetty.xml 的摘录...

```
<!-- Built-in Jetty AccessLog log -->
<Ref id="AccessLog">
  <Set name="requestLog">
    <New id="RequestLogImpl" class="org.eclipse.jetty.server.NCSARequestLog">
      <Arg><SystemProperty name="jetty.logs" default="/data/logs"/>/dm-app1_access.log</Arg>
      <Set name="retainDays">7</Set>
      <Set name="append">true</Set>
      <Set name="extended">false</Set>
      <Set name="logLatency">true</Set>
      <Set name="LogTimeZone">GMT</Set>
    </New>
  </Set>
</Ref> 
```

为什么当这个孩子达到retainDays 值时，日志似乎停止了？我希望它只是截断并继续记录到/data/logs/dm-app1_access.log。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:02:10.040

日志记录停止，因为我的文件名不包含“yyyy_mm_dd”占位符。发现配置可以使用类似于我们的 logback RollingFileAppenders 的日志文件命名格式完成工作，就像......

```
<!-- Built-in Jetty AccessLog log -->
<Ref id="AccessLog">
  <Set name="requestLog">
    <New id="RequestLogImpl" class="org.eclipse.jetty.server.NCSARequestLog">
      <Set name="filename"><SystemProperty name="jetty.logs" default="./logs"/>/access.yyyy_mm_dd.log</Set>
      <Set name="filenameDateFormat">yyyyMMdd</Set>
      <Set name="retainDays">3</Set>
      <Set name="append">true</Set>
      <Set name="extended">false</Set>
      <Set name="logLatency">true</Set>
      <Set name="LogTimeZone">GMT</Set>
    </New>
  </Set>
</Ref> 
```

...这将获取创建的访问日志文件，如 logs/access.20120718.log。当我发现“filename”属性中的“yyyy_mm_dd”只是“filenameDateFormat”属性中包含的实际 SimpleDateFormat 的占位符时，重要的学习时刻到来了。

# sql-server-2008 - 将 InT 字段转换为日期时间

> ID：11527195
> 
> 赞同：0
> 
> 时间：2012-07-17T16:51:29.647
> 
> 标签：sql-server-2008, datetime, select, case

我使用 MSSQL 2008 并有一个名为 AbsoluteDates 的字段，其中包含数字格式的数据，例如

```
AbsoluteDates
20051216
20051217
20051218
10000
90
600 
```

我需要做的是一个“选择”语句，它将忽略长度中不是 8 个数字的任何日期，然后将结果转换为日期时间，因为它应该像一个案例语句，因为当长度不是时我需要产生一些东西8 个字符，例如单词“NotValid”

例如，如果我有与上面相同的数据，从日历中选择 AbosluteDates where lenth = 9 会给我以下结果。

```
AbsoluteDates
2005-12-16 00:00:00.000
2005-12-17 00:00:00.000
2005-12-18 00:00:00.000
NotValid
NotValid
NotValid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:55:49.923

您可以转换为 varchar，然后是这样的日期时间，然后再转换为 varchar：

```
SELECT CASE WHEN LEN(DateNumber) = 8 AND ISDATE(RTRIM(DateNumber)) = 1
    THEN CONVERT(nvarchar(25), 
        CAST(CAST(DateNumber as varchar(10)) as datetime), 121)
    ELSE 'NotValid' 
    END AS Result
FROM (
    SELECT 20051216 AS DateNumber
    UNION SELECT 20051217
    UNION SELECT 20051218
    UNION SELECT 10000
    UNION SELECT 90
    UNION SELECT 600
    UNION SELECT 99421946
) MySubQuery
ORDER BY Result 
```

只需将硬编码搜索替换为您的实际数据表

# internet-explorer - CSS3Pie 不适用，而是边框消失

> ID：11527196
> 
> 赞同：0
> 
> 时间：2012-07-17T16:51:56.493
> 
> 标签：internet-explorer, css, border, gradient, css3pie

我正在尝试让 CSS3Pie 应用于 div。我需要圆角（包括边框）和背景的线性渐变。我让它与另一个我只需要圆角的 DIV 一起工作，但是当我将行为 htc 应用到这个 div 时，所有发生的事情就是边框消失了。有什么简单的方法可以解决这个问题吗？

[演示](http://jsfiddle.net/ykh7m/)

```
.productBoxes {
    position: relative;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    background: #efefef; /* Old browsers */
    background: -moz-linear-gradient(top,  #efefef 0%, #efefef 3%, #e6e6e6 6%, #dbdbdb 13%, #d9d9d9 15%, #d4d4d4 17%, #cccccc 28%, #c7c7c7 49%, #c7c7c7 84%, #b8b8b8 92%, #b0b0b0 95%, #b0b0b0 96%, #adadad 96%, #ababab 98%, #a5a5a5 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#efefef), color-stop(3%,#efefef), color-stop(6%,#e6e6e6), color-stop(13%,#dbdbdb), color-stop(15%,#d9d9d9), color-stop(17%,#d4d4d4), color-stop(28%,#cccccc), color-stop(49%,#c7c7c7), color-stop(84%,#c7c7c7), color-stop(92%,#b8b8b8), color-stop(95%,#b0b0b0), color-stop(96%,#b0b0b0), color-stop(96%,#adadad), color-stop(98%,#ababab), color-stop(100%,#a5a5a5)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #efefef 0%,#efefef 3%,#e6e6e6 6%,#dbdbdb 13%,#d9d9d9 15%,#d4d4d4 17%,#cccccc 28%,#c7c7c7 49%,#c7c7c7 84%,#b8b8b8 92%,#b0b0b0 95%,#b0b0b0 96%,#adadad 96%,#ababab 98%,#a5a5a5 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #efefef 0%,#efefef 3%,#e6e6e6 6%,#dbdbdb 13%,#d9d9d9 15%,#d4d4d4 17%,#cccccc 28%,#c7c7c7 49%,#c7c7c7 84%,#b8b8b8 92%,#b0b0b0 95%,#b0b0b0 96%,#adadad 96%,#ababab 98%,#a5a5a5 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #efefef 0%,#efefef 3%,#e6e6e6 6%,#dbdbdb 13%,#d9d9d9 15%,#d4d4d4 17%,#cccccc 28%,#c7c7c7 49%,#c7c7c7 84%,#b8b8b8 92%,#b0b0b0 95%,#b0b0b0 96%,#adadad 96%,#ababab 98%,#a5a5a5 100%); /* IE10+ */
    background: linear-gradient(top,  #efefef 0%,#efefef 3%,#e6e6e6 6%,#dbdbdb 13%,#d9d9d9 15%,#d4d4d4 17%,#cccccc 28%,#c7c7c7 49%,#c7c7c7 84%,#b8b8b8 92%,#b0b0b0 95%,#b0b0b0 96%,#adadad 96%,#ababab 98%,#a5a5a5 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#efefef', endColorstr='#a5a5a5',GradientType=0 ); /* IE6-9 */    
    width: 100%;
    padding: 0px;
    margin: 0px;
    margin-bottom: 1%;
    border: 1px solid black;
    overflow: hidden;
    behavior: url(/PIE.htc);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:10:12.733

尝试将 zoom:1 添加到元素并给它一个 z-index

# c++ - 棘手的未定义引用错误

> ID：11527200
> 
> 赞同：2
> 
> 时间：2012-07-17T16:52:32.520
> 
> 标签：c++, linux, linker, g++, ld

在尝试使用 C++ 在 Linux 中构建模块时，我遇到了一个严重的“未定义引用”错误。我将在高层次上描述它，并在必要时稍后发布代码（它是专有的，因此发布它需要更改名称）。一些细节：

*   模块 A（一个库）有一个类，我们将使用名为 Bar 的方法调用 Foo。模块 A 构建得很好，使用 nm 查看目标文件表明构造函数和 Bar 都已定义（它们显示为“T”）。
*   模块 B（一个库）包含一个使用模块 A 的类，其中引用了 Foo::Foo、Foo::~Foo 和 Foo::Bar。它的makefile 包括-L/path/to/Foo 和-lFoo。这个模块也构建得很好。但是，当我在模块 B 的目标文件上运行 nm 时，对模块 Foo::Foo、Foo::~Foo 和 Foo::Bar 的调用是未定义的（它们显示为“U”）。为什么它建立超出了我的范围。
*   模块 C - 其输出是可执行文件 - 包含对模块 B 的引用。当我尝试构建模块 C 时，*它*会因为模块 B 对模块 A 的 Foo 和 Bar 方法的未定义引用而大喊大叫。

    1.  如果引用未定义，为什么要构建模块 B？
    2.  为什么只有在我们到达模块 C 时才报告错误？

编辑：

1.  我应该提到模块 C 的 makefile 也有 -L/path/to/Foo 和 -lFoo，但它仍然失败。关于我应该尝试的任何事情的任何高级猜测？我有一种感觉，我将不得不发布一些代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:47:06.547

我想通了为什么它没有建立。这与这里的问题相同：

[即使 nm 指示此符号存在于共享库中，对符号的未定义引用](https://stackoverflow.com/questions/10456581/undefined-reference-to-symbol-even-when-nm-indicates-that-this-symbol-is-present)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:59:27.910

模块 B是*构建*还是*编译*？在尝试构建模块 C 之前，您实际上是否将模块 B 链接到模块 A？如果你是，我会感到惊讶。在*编译*阶段，编译器只检查是否声明了所有名称。编译器不寻找定义（即实现）。链接阶段负责这个细节。在链接阶段，您需要指定*构建项目所需的**所有*模块（在本例中为 A、B 和 C。）

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:06:42.580

创建共享库时，不需要定义所有符号。如果需要，可以使用编译器命令行开关（链接器选项 --no-allow-shlib-undefined）更改此行为。*

# android - Android SDK 外部库

> ID：11527213
> 
> 赞同：0
> 
> 时间：2012-07-17T16:53:39.690
> 
> 标签：android, eclipse, sdk, external, libraries

我有一个大问题。我刚刚重新格式化了我的计算机并重新安装了 Eclipse 和 Android SDK（最新的），每次应用程序尝试使用外部库时，我的项目突然崩溃。

在过去的 6 个月里，我一直在使用这个外部库，没有任何问题，但现在应用程序一调用就崩溃了。我所有的应用程序都依赖它，我开发的所有应用程序在部署时都崩溃了。

我安装了一个旧版本的 eclipse 认为它可能导致它，但事实证明不是它。

这让我相信它是由最新的 Android SDK 引起的。这可能是什么原因造成的，我该如何解决？请帮忙。

我使用的外部库是 Zip4J 一个解压缩器。 [http://www.lingala.net/zip4j/download.php](http://www.lingala.net/zip4j/download.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:56:22.190

包含外部库时，您现在必须将 jar 放在`libs`项目的文件夹中。您可能还需要右键单击 jar 文件并添加到构建路径。

或者如果它是一个 android 库，您需要将它包含在您的`project.properties`文件中。或者您可以使用 eclipse 通过向导添加它。项目属性 -> Android -> 添加库。

# java - Java 将 Json 字符串转换为数组

> ID：11527214
> 
> 赞同：7
> 
> 时间：2012-07-17T16:53:48.677
> 
> 标签：java, android, json

我有一个 Json 字符串，我正在尝试将其转换为 Java 中的数组。

```
public void DisplaySubjects(String subjects)
     {
         JSONObject jsonResponse;
         jsonResponse = new JSONObject(subjects)); 
```

就我所知。我什至不确定我是否必须先创建一个对象。

我最终需要做的是将它附加到android应用程序中的ArrayAdapter。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T17:04:57.323

像这样的东西：

```
ArrayList<String> jsonStringToArray(String jsonString) throws JSONException {

    ArrayList<String> stringArray = new ArrayList<String>();

    JSONArray jsonArray = new JSONArray(jsonString);

    for (int i = 0; i < jsonArray.length(); i++) {
        stringArray.add(jsonArray.getString(i));
    }

    return stringArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:55:11.343

您可以尝试以下方法：

```
new JSONArray(jsonString) 
```

或者如果它是一个属性：

```
jsonObject.getJSONArray(propertyName) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-06T11:44:20.517

您需要先制作 JSON 对象。

例如，

```
JSONObject jsonObject = new JSONObject(resp); 
```

jsonObject 可能包含其他 JSON 对象或 JSON 数组。

如何转换 JSON 取决于 String。

可以在[http://www.hemelix.com/JSONHandling](http://www.hemelix.com/JSONHandling)找到一个完整的示例，其中包含有关 JSON 字符串到 JSON 数组的一些解释。

# c++ - 在 MinGW/GCC 中编译 tvmet 库时“::drem 尚未声明”

> ID：11527218
> 
> 赞同：1
> 
> 时间：2012-07-17T16:54:09.337
> 
> 标签：c++, gcc, mingw

我有一个用 C++ 编写并以 gcc 为目标的遗留项目，它依赖于一个名为[tvmet](http://tvmet.sourceforge.net/)的库。我正在尝试在 MinGW 中编译它，但出现此错误：

```
c:\mingw\bin\../lib/gcc/mingw32/4.7.0/../../../../include/tvmet/BinaryFunctionals.h: 
  In static member function 'static tvmet::Fcnl_drem<T1, T2>::value_type   
  tvmet::Fcnl_drem<T1, T2>::apply_on(T1, T2)':
c:\mingw\bin\../lib/gcc/mingw32/4.7.0/../../../../include/tvmet/BinaryFunctionals.h:230:1: 
  error: '::drem' has not been declared 
```

更多背景知识：tvmet 使用预处理器宏来生成模板化结构，如下所示：

```
/** \class Fcnl_drem        BinaryFunctionals.h "tvmet/BinaryFunctionals.h" */
/** \class Fcnl_hypot       BinaryFunctionals.h "tvmet/BinaryFunctionals.h" */
/** \class Fcnl_jn      BinaryFunctionals.h "tvmet/BinaryFunctionals.h" */
/** \class Fcnl_yn      BinaryFunctionals.h "tvmet/BinaryFunctionals.h" */

#define TVMET_IMPLEMENT_MACRO(NAME)                 \
template <class T1, class T2>                       \
struct Fcnl_##NAME : public BinaryFunctional {              \
  typedef typename PromoteTraits<T1, T2>::value_type    value_type; \
                                \
  static inline                             \
  value_type apply_on(T1 lhs, T2 rhs) {     \
    return TVMET_GLOBAL_SCOPE(NAME)(lhs, rhs);              \
  }                                 \
                                \
  static                                \
  void print_xpr(std::ostream& os, std::size_t l=0) {           \
    os << IndentLevel(l)                        \
       << "Fcnl_" << #NAME << "<T1="                    \
       << typeid(T1).name() << ", T2=" << typeid(T2).name() << ">," \
       << std::endl;                            \
  }                                 \
};

TVMET_IMPLEMENT_MACRO(drem)
TVMET_IMPLEMENT_MACRO(hypot)
TVMET_IMPLEMENT_MACRO(jn)
TVMET_IMPLEMENT_MACRO(yn)

#undef TVMET_IMPLEMENT_MACRO 
```

它本质上是替换现有数学函数的名称。这里的问题似乎是“drem”没有定义。“drem”似乎是 glibc 的一部分，但其他 glibc 函数（如“fmod”）似乎工作正常。这里可能是什么问题？如果需要，我可以提供更多信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:59:54.927

我的同事发现了问题：MinGW 不支持drem。

[http://www.gnu.org/software/gnulib/manual/gnulib.html#drem](http://www.gnu.org/software/gnulib/manual/gnulib.html#drem)

不知怎的，我错过了它。谷歌搜索drem似乎并不容易！

# ios - iOS MPMoviePlayerViewController - 当应用程序发送到后台时如何关闭？

> ID：11527220
> 
> 赞同：0
> 
> 时间：2012-07-17T16:54:12.523
> 
> 标签：ios, mpmovieplayercontroller

我有一个使用子类 MPMoviePlayerViewController 播放视频剪辑的应用程序，我想确保在用户离开应用程序时（当它进入后台时）关闭电影播放器​​。这是必要的，因为当他们重新进入应用程序时，它似乎没有正确加载电影 URL，因此他们得到一个不断加载的空白电影播放器​​。

通常，当按下完成按钮时，我使用 [self dismissMoviePlayerViewControllerAnimated] 关闭电影播放器​​。

当应用程序退出活动（或移至后台）时，关闭播放器的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:44:46.163

好的，当应用程序即将发送到后台时，我最终使用通知来“清理”我的 MPMoviePlayerViewController。这允许我检测应用程序何时将要从我的应用程序委托以外的类发送到后台。

因此，当我创建电影播放器​​时，我添加了观察者以在应用程序发送到后台时调用我的“清理”函数。

（旁注 - 我还使用了一个观察者来防止电影视图在视频结束后自动关闭。这样用户必须按下“完成”按钮。该按钮还调用了 moviePlayerCleanup 方法。这确保观察者始终正确删除）

```
- (IBAction)buttonVideo:(id)sender {        

    // Register Movie Player for UIApplicationWillResignActiveNotification
    [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(moviePlayerCleanup) name: UIApplicationWillResignActiveNotification object: nil];

/*...set video URL, options, add to subview, etc etc here....*/
}
-(void)moviePlayerCleanup{
    // Remove the movie player view controller from the ApplicationWillResign notification observers
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationWillResignActiveNotification object:nil];    
    //Dismiss view
    [self dismissMoviePlayerViewControllerAnimated];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:43:08.230

好吧，经过搜索，我在这里找到了这个答案： [当应用程序进入后台时关闭 modalviewcontroller](https://stackoverflow.com/questions/5685419/dismiss-a-modalviewcontroller-when-the-application-enters-background) 基本上，您为 UIApplicationDidEnterBackgroundNotification 通知设置了一个 NSNotificationCenter 观察者，选择器将调用视图控制器的关闭。

看看答案，它有代码片段。

希望这有效。

# jquery - jquery.load() 获取内容后 jQuery 函数不起作用

> ID：11527221
> 
> 赞同：0
> 
> 时间：2012-07-17T16:54:26.477
> 
> 标签：jquery, ajax

我有一个页面并在 custom.js 文件中定义了我的 java 脚本函数（我正在使用 jQuery）。`</body>`我将 JS 文件放在标签之前的正文末尾

我的页面有一个这样的 div 元素：`<div id="userinfo"></div>` 当我的页面加载时，我的 JS 文件会获取一个外部页面。

外部页面有这样的元素`<div id="login"></div>`

在我的 JS 文件中，我定义了一个函数，当用户单击`login`模态窗口时，它会加载一个向用户显示登录表单的函数。

但是当我加载外部页面时，我的 JS 文件不起作用！！似乎找不到元素。

请指导我！:)

custom.js 文件的某些部分：

```
jQuery(document).ready(function($) {

 $('#userinfo').load('CustomerOptions.asp');

  (function() {
     $('#login').click(function(event){
         // something to do
     });
  })();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:56:00.097

当前版本的代码正在尝试将 click 事件处理程序绑定到 #userinfo，甚至在它在 DOM 中可用之前（因为元素是通过 load asynch 调用添加到 DOM 的）。

尝试这个：

```
$('#userinfo').load('CustomerOptions.asp', function() {
     $('#login').click(function(event){
         // something to do
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:56:47.963

您可以尝试[使用](http://api.jquery.com/on/)：

```
$('#userinfo').on('click','#login',function(){
    //Click logic here
});
$('#userinfo').load('CustomerOptions.asp'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:58:19.913

它不起作用，因为您在 #login 出现在 DOM 之前已将其分配给它。对于这种情况，您必须使用“实时”事件。实时事件不要求目标元素存在于 DOM 中。

```
jQuery(document).ready(function($) {
   $('#userinfo').load('CustomerOptions.asp');

  $('#userinfo').on('click','#login',function(event){
     // something to do
  });
})(); 
```

编辑：正如@ManselUK 所指出的，不推荐使用“live”，必须使用“on”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T16:56:51.550

或者作为替代方案，您可以使用 .live() 而不是 .click()。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# objective-c - ObjC/Cocoa：获取当前图形上下文的填充颜色属性

> ID：11527222
> 
> 赞同：1
> 
> 时间：2012-07-17T16:54:29.403
> 
> 标签：objective-c, cocoa

我在 Cocoa 文档中转了一圈，但我找不到这个问题的答案。

我可以通过向 NSGraphicsContext 类发送“currentContext”消息来检索当前的图形上下文。我还可以通过向 NSColor 对象发送“设置”消息来设置当前上下文的填充颜色。

但是，在发送集合之后，我将如何从当前上下文中检索该值。设置填充颜色的“set”的等效“get”消息是什么？

我认为这将是 NSGraphicsContext 对象上的实例方法，但我找不到该方法（或该对象的几乎任何 getter）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:28:37.303

You don't get detailed information about the current graphics context state. Instead before you make any changes you save the graphics context state to a per-thread stack with `saveGraphicsState`. Then when you are done you retrieve the previous state with `restoreGraphicsState`.

# c++ - 为 Visual Studio 安装 openCV 2.4 for C/C++

> ID：11527227
> 
> 赞同：6
> 
> 时间：2012-07-17T16:54:52.030
> 
> 标签：c++, c, visual-studio-2010, opencv

我整天都在尝试为 C/C++ 的 Windows 7 上的 Visual Studio 2010 安装 OpenCV（版本 2.4.1 和 2.4.2）。

我一直在关注本教程：[http ://docs.opencv.org/trunk/doc/tutorials/introduction/windows_install/windows_install.html](http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_install/windows_install.html)

我跳过了安装第 3 方软件（python 2.7 和 zlib 除外：http: [//gnuwin32.sourceforge.net/packages/zlib.htm](http://gnuwin32.sourceforge.net/packages/zlib.htm)）。

我运行 cmake，然后从 openCV 构建目录打开 openCV.sln，等待 Visual Studio 加载然后构建它。Visual Studio 给出了 20000 个错误，这只是以下两个重复多次：

> 错误 C1083：无法打开包含文件：'unistd.h'：没有这样的文件或目录
> 
> 错误 LNK1104：无法打开文件 '....\lib\Debug\opencv_core241d.lib'

“OpenCV 构建目录”/bin/Release 不包含任何*.exe 文件，只有大量*.pdb 文件，其中我可以看到contours.pdb。该教程说我应该在那里看到contours.exe。

由于没有 *.exe 文件，我知道我在构建过程中遇到的两个错误很关键。我将不胜感激任何可以帮助我解决它们的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T04:47:30.100

以下对构建步骤的解释应该可以帮助您构建它：

1.  安装 cmake - 这是所有平台所必需的

2.  cd 进入提取的目录并创建一个名为 release（或任何其他名称）的新目录

3.  从这个目录，运行`cmake ..`

4.  您应该在发布目录中找到一个**OpenCV.sln**文件。

5.  使用 Visual Stuido 打开它并运行构建。

6.  继续享受 Opencv

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T18:34:42.733

我也遇到了一些困难——文档只是稍微过时了。

该解决方案基于本教程： http: [//opencv.willowgarage.com/wiki/VisualC%2B%2B_VS2010_CMake](http://opencv.willowgarage.com/wiki/VisualC%2B%2B_VS2010_CMake)

以下是我使用 Visual C++ 2010 Express 获取 opencv 2.4.2 hello world 示例的具体步骤：

**获取源代码**

下载opencv。

将 opencv 解压到 C:\

**构建二进制文件**

下载cmake。打开cmake gui..

源代码在哪里：C:/opencv

在哪里构建二进制文件：C:/opencv/build

单击配置 - 为生成器选择 Visual Studio 10 单击生成。

在 C:\opencv\build 中，您现在应该看到 OpenCV.sln。

使用 VS C++ Express 打开解决方案文件并构建它。

**设置 hello world 项目**

在 VS 中创建一个新项目。选择控制台应用程序并勾选预编译头文件。右键单击解决方案文件并选择属性。

在 VC++ 目录窗口中，添加以下内容：

包含目录：C:\opencv\build\include;C:\opencv\build\include\opencv;C:\opencv\build\include\opencv2

库目录：C:\opencv\build\lib\Debug

源目录：C:\opencv\build\include

在 C++ -> Linker -> Input 中，将以下内容添加到 Additional Dependencies：

```
opencv_core242d.lib
opencv_highgui242d.lib 
```

**你好世界内容**

按照教程中的建议将内容更改为：

```
#include "stdafx.h"
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>

int _tmain(int argc, _TCHAR* argv[])
{
        IplImage *img = cvLoadImage("funny-pictures-cat-goes-pew.jpg");
        cvNamedWindow("Image:",1);
        cvShowImage("image:",img);

        cvWaitKey();
        cvDestroyWindow("Image:");
        cvReleaseImage(&img);

        return 0;
} 
```

将图像（或任何图像）放在您的项目目录中。

现在构建并点击调试，它应该可以工作。希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T00:56:34.767

我不能发表评论，所以我必须作为答案。

@go4sri 我按照你说的用 Visual Studio 2010 编译 OpenCV，但我不知道如何配置属性文件以及放在库目录中的文件夹，包括目录......我需要一些帮助。

目前我把：

包含目录中的 C:\opencv\build\include

库目录下的 C:\opencv\Release\lib\Debug。（我构建到 Release 文件夹中）

但我得到未解决的外部符号。

```
 error LNK2019: unresolved external symbol "public: static class cv::MatExpr __cdecl  cv::Mat::zeros(int,int,int)" (?zeros@Mat@cv@@SA?AVMatExpr@2@HHH@Z) referenced in function "public: void __thiscall CtestDlg::OnBnClickedOk(void)" (?OnBnClickedOk@CtestDlg@@QAEXXZ) 
```

编辑1：

我通过在输入链接器->输入->附加依赖项中添加 .lib 解决了这个问题，但现在我遇到了另一个问题。它告诉我它找不到dll opencv_core242d.dll。

编辑2：

将所有 dll 放入发布（用于发布）或调试（用于调试 dll）解决问题，但我不明白为什么我必须这样做。它找不到自己的dll在哪里？

# http - 如何在http get方法中传递作为NSDictionary一部分的NSArray？

> ID：11527231
> 
> 赞同：0
> 
> 时间：2012-07-17T16:54:59.660
> 
> 标签：http, get, nsarray

我想将一个数组传递给我的服务器。我使用了 GET 方法，所以我必须在 url 之后传递一个参数。它看起来像这样：

```
http://www.myserver.com/?name=username&pwd=password 
```

但现在我有一个数组。它包括一个 NSDictionary。如何将其附加到网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:09:14.213

这是我过去使用过的一个建议：

```
NSMutableString* get_string=[[NSMutableString alloc] init];

int i = 1;
NSEnumerator* arrayEnumerator = [myArray objectEnumerator];
NSDictionary* myDict;

while(myDict = [arrayEnumerator nextObject])
    {
    [get_string appendString:@"&e"];
    [get_string appendString:[NSString stringWithFormat:@"%d", myInt]];
    [get_string appendString:@"myFirstKey="];
    [get_string appendString:[myDict objectForKey:myFirstKey]];
    [get_string appendString:@"&e"];
    [get_string appendString:[NSString stringWithFormat:@"%d", myInt]];
    [get_string appendString:@"mySecondKey"];
    [get_string appendString:[myDict objectForKey:mySecondKey]];
    } 
```

如果我做对了，输出应该是这样的：

```
&e1myFirstKey=5&e1mySecondKey=8&e2myFirstKey=4&e2mySecondKey=9 
```

去掉第一个 &，打一个 URL 和一个“？” 在前面并将其发送到您的服务器。然后，您的服务器将不得不通过使用“isset”或类似的方法进行测试，以查看数字何时停止。

我假设您有任意数量的数组元素，但每个单独的字典都有已知字段 - 换句话说，您正在传递一个用户字典数组，但每个字典都有一个“用户”字段和一个“密码” “ 场地。如果不是这种情况，您仍然可以使用此方法，但您必须在通信双方多做一些工作。

# php - MySQL 请求总是返回相同的记录

> ID：11527233
> 
> 赞同：-1
> 
> 时间：2012-07-17T16:55:13.750
> 
> 标签：php, jquery, mysql, pdo

我不确定我的错误在哪里，但记录请求总是返回相同的。

首先我要列表（工作正常） - **list.js**

```
 $('#listPage').bind('pageinit', function(event) {
    getList();
});

function getList() {
    $.getJSON(serviceURL + 'getlist.php', function(data) {
        $('#list li').remove();
        list= data.items;
        //edit function below based on db table
        $.each(list, function(index, sites) {
            $('#list').append('<li><a href="details.html?id=' + sites.id + '">' +
                    '<h4>' + sites.title + '</h4>' +
                    '<p>' + sites.address + '</p></a></li>'
                    );
        });
        $('#list').listview('refresh');
    });
} 
```

**获取列表.php**

```
include 'config.php';
//change FROM to ____
$sql = "SELECT id, title, address, picture1 FROM sites ORDER BY title";

try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->query($sql);  
    $details = $stmt->fetchAll(PDO::FETCH_OBJ);
    $dbh = null;
    echo '{"items":'. json_encode($details) .'}'; 
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
} 
```

然后在下面的某个地方，记录被弄乱了。**-details.js** _

 **```
$('#detailsPage').live('pageshow', function(event) {
    var id = getUrlVars()["id"];
    $.getJSON(serviceURL + 'getdetails.php?id='+ id, displayDetail);
});

function displayDetail(data) {
    var sites = data.item;
    console.log(sites);
        $('#pic').attr('src', 'http://hh.lpbp.net/assets/uploads/files/' + sites.picture1);
    $('#title').text(sites.title);
    $('#address').text(sites.address);
    $('#pic2').attr('src', 'http://hh.lpbp.net/assets/uploads/files/' + sites.picture2);
    if (sites.phone) {
        $('#actionList').append('<li><h3>Phone #:</h3>' + '<p>' + '<a href="tel:' + sites.phone + '">'+ sites.phone + '</a></p></li>');
    }
    if (sites.website) {
        $('#actionList').append('<li><h3>Website</h3>' + '<p>' + '<a href="#" onClick="Ti.App.fireEvent(\'openURL\', { url:\'http://' +sites.website +'\'}); return false;">' + sites.website + '</a></p></li>');
    }
    if (sites.description) {
        $('#actionList').append('<li><h3>Description</h3>' + '<p>' + sites.description + '</p></li>');

    }
    $('#actionList').listview('refresh');

}

function getUrlVars() {
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

**获取详细信息.php**

```
include 'config.php';
//Change FROM ___
$sql = "SELECT id, title, address, phone, website, description, picture1, picture2 FROM sites ORDER BY title";

try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->prepare($sql);  
    $stmt->bindParam("id", $_GET[id]);
    $stmt->execute();
    $detail = $stmt->fetchObject();  
    $dbh = null;
    echo '{"item":'. json_encode($detail) .'}'; 
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:02:04.857

您从不使用`id`列表的值，因此您只需获取整个`sites`表，拉出第一行，然后返回。

那里的某个地方应该有一个`WHERE`子句。您正在绑定该`id`字段，但查询中没有`:id`参数，所以基本上您是在冒烟。

```
$sql = "SELECT blah,blah,blah FROM sites WHERE id = :id";
                                        ^^^^^^^^^^^^^^^ 
```

这`ORDER BY`是毫无意义的，除非您期望返回多行。已经订购了单行结果。**

# objective-c - 使用代码在 Objective-C NSTableView 中的单元格中加粗和取消加粗文本

> ID：11527235
> 
> 赞同：0
> 
> 时间：2012-07-17T16:55:20.187
> 
> 标签：objective-c, cocoa

这听起来很基本，但话又说回来可能不是。我在一个单元格中有一些文本，我想在一个事件发生时加粗，在另一个事件发生时取消加粗，我知道如何处理该事件，但是如何将其变为粗体然后取消加粗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:03:15.873

使文本粗体是特定范围：

```
NSMutableAttributedString *theText = [theTextView textStorage];
[theText applyFontTraits:NSBoldFontMask range:NSMakeRange(0,[text length])]; 
```

（可选）如何获取所选范围：

```
NSRange theSelectedRange = [theTextView selectedRange]; 
```

# c# - LINQ/Lambda 等效于 SQL NOT IN

> ID：11527237
> 
> 赞同：2
> 
> 时间：2012-07-17T16:55:22.123
> 
> 标签：c#, .net, sql, linq, linq-to-sql

我有以下内容：

```
context.tblProviderServices
.Where(ps => (DateTime.Now > ps.EffectiveDate && DateTime.Now < ps.TerminateDate) &&
         (ps.tblProvider.InactiveDate == null || DateTime.Now < ps.tblProvider.InactiveDate) &&
         (ps.tblProvider.IncludeInDirectory == "Y") &&
         (ps.ServiceStatusID == "Final") &&
         (ps.IsMemberSpecific == null || ps.IsMemberSpecific == false) &&
         (ps.tblProvider.tblProviderReferralHolds.Where(h => h.TerminateDate == null).Count() < 1)) 
```

我的问题与最后一行有关。那是错误的，我可以在写它时说出来，但我似乎无法弄清楚如何将其更改为我想要的。

所有这些表都设置了适当的关系。 `tblProvider`是一对多，`tblProviderReferralHolds`我想要完成的是将我的结果限制为仅提供者当前没有保留的服务。

在 SQL 中，我可以通过`NOT IN(SubQuery)`类型交易完成类似的事情。

如何在 LINQ 中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T17:17:00.537

我认为你可以使用[`Any`](http://msdn.microsoft.com/en-us/library/bb534972)

最后一行是

```
!(ps.tblProvider.tblProviderReferralHolds.Any(h => h.TerminateDate == null)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:12:44.773

查看 linq“除了”。

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)

# javascript - 使用javascript在目录中加载xml文件

> ID：11527238
> 
> 赞同：3
> 
> 时间：2012-07-17T16:55:28.727
> 
> 标签：javascript, ajax

我想使用 javascript 加载一个 xml 文件。我使用以下代码加载 xml 文件。下面的代码会在 xml 文件位于同一文件夹中时加载它。

```
if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.open("GET",'dineshkani.xml',false);
            xmlhttp.send();
            xmlDocument=xmlhttp.responseText;
            alert("loaded"); 
```

但我想在特定位置加载 xml 文件，例如。c:/xml/dineshkani.xml

如果我使用这样的编码`xmlhttp.open("GET",'c:/xml/dineshkani.xml',false);`，它不会加载 xml 文件。有没有办法加载xml文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:57:36.657

尽管它的名字，XMLHttpRequest 可用于非 HTTP 请求。
以下应该工作

```
xmlhttp.open("GET",'file:///C:/xml/dineshkani.xml',false); 
```

结果状态是 0 表示成功而不是 200。这是因为文件和 ftp 方案不使用 HTTP 结果代码。

**编辑：**但是，一些浏览器，包括谷歌浏览器默认禁用此功能。它必须通过启动 Chrome 来启用`--allow-file-access`。因此，如果您正在寻找一个跨浏览器的解决方案，您应该将 XML 放在您的服务器目录中。

HTML5 文件 api 不允许您访问整个文件系统，您可以使用沙盒目录。[关联](https://stackoverflow.com/a/2378239/759019)

参考：[MDN 页面](https://developer.mozilla.org/es/XMLHttpRequest/Usar_XMLHttpRequest#section_3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:04:04.443

不幸的是，您不能通过 AJAX 访问本地文件。

如果需要，您可以尝试[HTML5 文件访问 API](https://stackoverflow.com/a/7056216/679240)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T17:30:06.353

我不认为它可以使用这个链接加载它对 xml 文件加载很有用

[加载 xml](http://www.steveborn.com/codenotes/LoadingXML.htm)

# c# - 分层或平面域模型图？

> ID：11527239
> 
> 赞同：1
> 
> 时间：2012-07-17T16:55:35.657
> 
> 标签：c#, data-structures, graph, domain-driven-design, entity

我正在为一些分类的 c#-projects 构建一个自定义的通用域模型。我现在正在努力解决的问题是模型结构的选择。我要么用父母、孩子、祖先等做一个分层模型，要么做一个更扁平的图形结构。对于分层，我的意思是我可以在哪里编写 Entity.Parent 并在我有链接而不是关系的地方获取父级和图形。

做一个平面图要简单得多，也不容易出错。例如，您可以以某种随机顺序一次加载单个实体，而无需将它们组装成正确的结构。

但是分层域的概念也很有吸引力。它的结构和组织得很好。分层域的一大好处是您可以从父级或祖先那里继承属性。例如，您可以将删除状态继承到后代中。有一个平面图这不会那么容易。此外，这需要始终为所有实体加载所有祖先，这当然是不利的一面。

所以我的问题是分层域还有哪些其他好处？除了从祖先那里继承属性并可能在图表中传递消息之外，我想不出任何其他办法。例如，如果一个实体想要对后代实体的变化做出反应。还有什么好处吗？我不确定我是否真的需要上述内容，所以如果没有更多的好处，我想我还是会选择扁平结构，因为它使用起来要简单得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:58:45.970

由于您标记了 DDD，我会问给定域的聚合根是什么，然后让您做出决定。

# objective-c - 将应用程序数据存储在 OSX 上的应用程序等联系人的最佳方式是什么

> ID：11527240
> 
> 赞同：1
> 
> 时间：2012-07-17T16:55:36.687
> 
> 标签：objective-c, xcode, macos, cocoa

我正在使用以下数据制作类似 App 的联系人：

*   联系人姓名

*   联系方式

*   联系电子邮件（受密码保护，此密码是数据的一部分）
    等...

我在应用程序启动时需要这些信息，我四处搜索，发现了核心数据。但我不需要核心数据版本或文件，不需要撤消/重做等......我只需要应用程序“内部”的这些数据。起初我想到了 NSUserDefaults，但我不确定。
我应该如何保存这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:03:35.613

在我看来，Core Data 是最好的方法，因为它是最灵活的。您也可以将对象存储在数组中并将其写入文件 - 虽然它不适合应用程序之类的联系人（因为不太可能有数千个联系人需要管理）。

# symfony - phpunit中的错误状态码

> ID：11527246
> 
> 赞同：2
> 
> 时间：2012-07-17T16:55:50.173
> 
> 标签：symfony, phpunit

即使请求的页面不存在，我总是在我的测试用例中得到状态代码 200/ok。

```
public function testCompleteScenario()
{
    $client = static::createClient();

    $container = $client->getContainer();
    $kernel    = $client->getKernel();

    $crawler = $client->request('GET', '/somethingnotexisting');
    $this->assertTrue(200 === $client->getResponse()->getStatusCode());

} 
```

我正在使用带有 netbeans 7.1 的 phpunits，并且我的 symfony 防火墙配置为只允许经过身份验证的用户。否则他们会被重定向到登录页面。

也许有一些 php.ini 调整要做？

编辑 ：

这是我从 netbeans 获得的代码：

![在此处输入图像描述](../Images/23e40adb58b36cf56e36a42ba3a46b2f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T08:26:52.653

首先按照@AdrienBrault 的建议做，使用assertEquals：

```
$this->assertEquals(200, $client->getResponse()->getStatusCode()); 
```

这样，您将看到返回的状态代码。

您可能会收到 301 或 302（重定向），因为默认情况下功能测试客户端不会重定向。

尝试这样的事情：

```
public function testCompleteScenario()
{
    $client = static::createClient();

    $container = $client->getContainer();
    $kernel    = $client->getKernel();

    $client->request('GET', '/somethingnotexisting');
    $crawler = $client->followRedirect();

    $this->assertEquals(200, $client->getResponse()->getStatusCode());
} 
```

请参阅：[http ://symfony.com/doc/current/book/testing.html#redirecting](http://symfony.com/doc/current/book/testing.html#redirecting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:41:21.850

我花了 3 天时间试图解决这个问题。

我已将我的 PHPUnit 版本从 3.6.11 降级到 3.5.14。

它现在与 NetBeans 一起工作得更好

# python - python，比较位于两个不同文本文件中的列中的字符串

> ID：11527247
> 
> 赞同：-1
> 
> 时间：2012-07-17T16:55:52.810
> 
> 标签：python, string, tsv

我有 2 个文本文件，“animals.txt”和“colors.txt”，如下所示，其中每行中的 2 个字符串由制表符分隔。

“动物.txt”

```
12345  dog

23456  sheep

34567  pig 
```

“颜色.txt”

```
34567  pink

12345  black

23456  white 
```

我想编写 Python 代码：

1.  对于“animals.txt”中的每一行，第一列中的字符串（12345，然后是 23456，然后是 34567）
2.  将此字符串与“colors.txt”中第一列中的字符串进行比较
3.  如果找到匹配项 (12345 == 12345, etc) ，它会写入两个输出文件：

output1，包含animals.txt的行+colors.txt第二列对应查询值（12345）的值：

```
12345 dog   black
23456 sheep white
34567 pig   pink 
```

output2 包含 colors.txt 的第二列中与查询值相对应的值列表（12345，然后是 23456，然后是 34567））：

```
black
white
pink 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:21:39.503

如果顺序无关紧要，这将成为一个非常简单的问题：

```
with open('animals.txt') as f1, open('colors.txt') as f2:
    animals = {} 
    for line in f1:
        animal_id, animal_type = line.split('\t')
        animals[animal_id] = animal_type

    #animals = dict(map(str.split,f1)) would work instead of the above loop if there are no multi-word entries.

    colors={}
    for line in f2:
        color_id, color_name = line.split('\t')
        colors[color_id] = color_name

    #colors = dict(map(str.split,f2)) would work instead of the above loop if there are no multi-word entries.
    #Thanks @Sven for pointing this out.

common=set(animals.keys()) & set(colors.keys())  #set intersection. 
with open('output1.txt','w') as f1, open('output2.txt','w') as f2:
     for i in common:  #sorted(common,key=int) #would work here to sort.
         f1.write("%s\t%s\t%s\n"%(i,animals[i],colors[i])
         f2.write("%s"%colors[i]) 
```

您可以通过`defaultdict`在遇到特定键时附加到列表的方式更优雅地执行此操作，然后在编写时测试列表的长度是否为 2，然后再输出，但是，我不相信这种方法更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T17:03:23.960

你需要使用python吗？如果您使用的是 bash 并且您的输入未排序，请执行以下操作：

```
$ join -t $'\t' <( sort animals.txt ) <( sort colors.txt ) > output1
$ cut -f 3 output1 > output2 
```

如果您没有支持进程替换的 shell，请对输入文件进行排序并执行以下操作：

```
$ join -t '<tab>' animals.txt colors.txt > output1
$ cut -f 3 output1 > output2 
```

`<tab>`实际制表符在哪里。根据您的 shell，您可以使用 ctrl-V 后跟 tab 键来输入它。（或使用不同的分隔符进行剪切。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T02:04:26.390

我会用熊猫

```
animals, colors = read_table('animals.txt', index_col=0), read_table('colors.txt', index_col=0)
df = animals.join(colors) 
```

结果是：

```
animals.join(colors)
Out[73]: 
       animal  color
id
12345  dog     black
23456  sheep   white
34567  pig     pink 
```

然后按 id 的顺序输出颜色到文件：

```
df.color.to_csv(r'out.csv', index=False) 
```

如果您无法将列标题添加到文本文件，则可以在导入时添加它们

```
animals = read_table('animals.txt', index_col=0, names=['id','animal']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T18:08:37.507

假设输入文件中的每一行的结构与示例完全相同：

```
with open("c:\\python27\\output1.txt","w") as out1, \ 
     open("c:\\python27\\output2.txt","w") as out2:

    for outline in [animal[0]+"\t"+animal[1]+"\t"+color[1] \
                    for animal in [line.strip('\n').split("\t") \
                    for line in open("c:\\python27\\animals.txt","r").readlines()] \
                    for color in [line.strip('\n').split("\t") \
                    for line in open("c:\\python27\\colors.txt","r").readlines()] \
                    if animal[0] == color[0]]:

        out1.write(outline+'\n')
        out2.write(outline[outline.rfind('\t')+1:]+'\n') 
```

我想那会为你做的。

也许不是最优雅/快速/清晰的方法 - 但很短。我相信，从技术上讲，这是 4 行。

# c++ - 在 C++ 中附加到字节数组

> ID：11527249
> 
> 赞同：1
> 
> 时间：2012-07-17T16:56:01.773
> 
> 标签：c++, avr

我在 C++ 中有两个数组，我想将一个附加到另一个的末尾，这样：

```
char byte1[] = {0x00};
char byte2[] = {0x01}; 
```

附加这两个应该产生 {0x00, 0x01}。我该怎么做？在 Java 中使用 System.arraycopy() 很简单，但我不确定哪个库可以帮助我在 C++/C 中完成此任务，因为我正在为微控制器编写代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T17:03:01.057

如果你使用 C，你可以这样做：

```
//Whatever sizes your stating arrays are.
const int S_ARR1 = 3;
const int S_ARR2 = 2;

//Create buffer that can hold both.
char combined[S_ARR1 + S_arr2];

//Copy arrays in individually.
memcpy(combined, byte1, S_ARR1);
memcpy(combined + S_ARR1, byte2, S_ARR2); 
```

如果你想要 C++，首先不要使用字节数组。使用 std::vector 作为一个数组，可以跟踪它自己的元素数量，这样你就可以感觉更像是在 Java 世界中:)

**关于嵌入式 C++ 向量内存的一点警告：**

您在微控制器中， std::vector 会浪费大量内存，因为它会根据当前大小的倍数增长。里面的东西越多，你浪费的就越多。话虽如此，这是一门很棒的课程，只要您知道它如何处理内存，它就是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:05:47.640

尝试使用`string`Arduino 环境中的类，该类旨在通过 avr-g++ 编译器在 AVR 上使用。不过，我不确定它是否支持空（0）字节。

[http://arduino.cc/en/Reference/StringObject](http://arduino.cc/en/Reference/StringObject) [http://github.com/arduino/Arduino/blob/master/hardware/arduino/cores/arduino/WString.cpp](http://github.com/arduino/Arduino/blob/master/hardware/arduino/cores/arduino/WString.cpp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:00:44.257

你不能像你在那里写的那样，C 为这些数组分配固定内存以适应你用 1 字节初始化它们的数据的大小

如果您知道要使用多少数据，您可以用`char byte[10];`10 个元素初始化一个更大的数组，但是您不能在 C 中创建时自动填充它。如果您不知道在运行时之前需要多少数据，那么您需要用 new（或 malloc 或 c）分配它。

如果您想要类似 java 的行为，请查看 std::vector，如果您的微控制器支持是

# c# - Xml 无法反序列化

> ID：11527257
> 
> 赞同：1
> 
> 时间：2012-07-17T16:56:30.423
> 
> 标签：c#, xml, linq

我调用一个方法来获取我的页面 [参见 GetPages(String xmlFullFilePath)]。FromXElement 方法应该反序列化 LitePropertyData 元素以强类型化 LitePropertyData 对象。相反，它在以下行失败：

```
return (T)xmlSerializer.Deserialize(memoryStream); 
```

并给出以下错误：

`<LitePropertyData xmlns=''> was not expected.`

我究竟做错了什么？我已经包含了我调用的方法和 xml 数据：

```
 public static T FromXElement<T>(this XElement xElement)
    {
        using (var memoryStream = new MemoryStream(Encoding.ASCII.GetBytes(xElement.ToString())))
        {
            var xmlSerializer = new XmlSerializer(typeof(T));
            return (T)xmlSerializer.Deserialize(memoryStream);
        }
    }

public static List<LitePageData> GetPages(String xmlFullFilePath)
    {
        XDocument document = XDocument.Load(xmlFullFilePath);

        List<LitePageData> results = (from record in document.Descendants("row")
                                      select new LitePageData
                                      {
                                          Guid = IsValid(record, "Guid") ?
                                            record.Element("Guid").Value :
                                            null,
                                          ParentID = IsValid(record, "ParentID") ?
                                                Convert.ToInt32(record.Element("ParentID").Value) :
                                                (Int32?)null,
                                          Created = Convert.ToDateTime(record.Element("Created").Value),
                                          Changed = Convert.ToDateTime(record.Element("Changed").Value),
                                          Name = record.Element("Name").Value,
                                          ID = Convert.ToInt32(record.Element("ID").Value),
                                          LitePageTypeID = IsValid(record, "ParentID") ?
                                                Convert.ToInt32(record.Element("ParentID").Value) :
                                                (Int32?)null,
                                          Html = record.Element("Html").Value,
                                          FriendlyName = record.Element("FriendlyName").Value,
                                          Properties = record.Element("Properties") != null ? record.Element("Properties").Element("LitePropertyData").FromXElement<List<LitePropertyData>>() :
                                            new List<LitePropertyData>()
                                      }).ToList();

        return results;
    } 
```

这是xml：

```
<?xml version="1.0" encoding="utf-8"?> <root>   <rows>
<row>
  <ID>1</ID>
  <ImageUrl></ImageUrl>
  <Html>Home page</Html>
  <Created>01-01-2012</Created>
  <Changed>01-01-2012</Changed>
  <Name>Home page</Name>
  <FriendlyName>home-page</FriendlyName>
</row>
<row xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Guid>edeaf468-f490-4271-bf4d-be145bc6a1fd</Guid>
  <ID>8</ID>
  <Name>Unused</Name>
  <ParentID>1</ParentID>
  <Created>2006-03-25T10:57:17</Created>
  <Changed>2012-07-17T12:24:30.0984747+01:00</Changed>
  <ChangedBy />
  <LitePageTypeID xsi:nil="true" />
  <Html>
    What is the purpose of this option? This option checks the current document for accessibility issues. It uses Bobby to provide details of whether the current web page conforms to W3C's WCAG criteria for web content accessibility.

    Issues with Bobby and Cynthia

    Bobby and Cynthia are free services that supposedly allow a user to expose web page accessibility barriers. It is something of a guide but perhaps a blunt instrument. I tested a few of the webpages that I have designed. Sure enough, my pages fall short and for good reason. I am not about to claim that Bobby and Cynthia are useless. Although it is useful and commendable tool, it project appears to be overly ambitious. Nevertheless, let me explain my issues with Bobby and Cynthia:

    First, certain W3C standards for designing web documents are often too strict and unworkable. For instance, in some versions W3C standards for HTML, certain tags should not include a particular attribute, whereas in others they are requisite if the document is to be ???well-formed???. The standard that a designer chooses is determined usually by the requirements specification document. This specifies which browsers and versions of those browsers that the web page is expected to correctly display. Forcing a hypertext document to conform strictly to a specific W3C standard for HTML is often no simple task. In the worst case, it cannot conform without losing some aesthetics or accessibility functionality.

    Second, the case of HTML documents is not an isolated case. Standards for XML, XSL, JavaScript, VBScript, are analogous. Therefore, you might imagine the problems when you begin to combine these languages and formats in an HTML document.

    Third, there is always more than one way to skin a cat. For example, Bobby and Cynthia may flag those IMG tags that do not contain a TITLE attribute. There might be good reason that a web developer chooses not to include the title attribute. The title attribute has a limited numbers of characters and does not support carriage returns. This is a major defect in the design of this tag. In fact, before the TITLE attribute was supported, there was the ALT attribute. Most browsers support both, yet they both perform a similar function. However, both attributes share the same deficiencies. In practice, there are instances where neither attribute would be used. Instead, for example, the developer would write some JavaScript or VBScript to circumvent these deficiencies. The concern is that Bobby and Cynthia would not notice this because it does not ???understand??? what the JavaScript does.
  </Html>
  <FriendlyName>unused</FriendlyName>
  <IsDeleted>false</IsDeleted>
  <Properties>
    <LitePropertyData>
      <Description>Image for the page</Description>
      <DisplayEditUI>true</DisplayEditUI>
      <OwnerTab>1</OwnerTab>
      <DisplayName>Image Url</DisplayName>
      <FieldOrder>1</FieldOrder>
      <IsRequired>false</IsRequired>
      <Name>ImageUrl</Name>
      <IsModified>false</IsModified>
      <ParentPageID>3</ParentPageID>
      <Type>String</Type>
      <Value xsi:type="xsd:string">smarter.jpg</Value>
    </LitePropertyData>
    <LitePropertyData>
      <Description>WebItemApplicationEnum</Description>
      <DisplayEditUI>true</DisplayEditUI>
      <OwnerTab>1</OwnerTab>
      <DisplayName>WebItemApplicationEnum</DisplayName>
      <FieldOrder>1</FieldOrder>
      <IsRequired>false</IsRequired>
      <Name>WebItemApplicationEnum</Name>
      <IsModified>false</IsModified>
      <ParentPageID>3</ParentPageID>
      <Type>Number</Type>
      <Value xsi:type="xsd:string">1</Value>
    </LitePropertyData>
  </Properties>
  <Seo>
    <Author>Phil Carney</Author>
    <Classification />
    <Copyright>Carnotaurus</Copyright>
    <Description>
      What is the purpose of this option? This option checks the current document for accessibility issues. It uses Bobby to provide details of whether the current web page conforms to W3C's WCAG criteria for web content accessibility.

      Issues with Bobby and Cynthia

      Bobby and Cynthia are free services that supposedly allow a user to expose web page accessibility barriers. It is something of a guide but perhaps a blunt instrument. I tested a few of the webpages that I have designed. Sure enough, my pages fall short and for good reason. I am not about to claim that Bobby and Cynthia are useless. Although it is useful and commendable tool, it project appears to be overly ambitious. Nevertheless, let me explain my issues with Bobby and Cynthia:

      First, certain W3C standards for designing web documents are often too strict and unworkable. For instance, in some versions W3C standards for HTML, certain tags should not include a particular attribute, whereas in others they are requisite if the document is to be ???well-formed???. The standard that a designer chooses is determined usually by the requirements specification document. This specifies which browsers and versions of those browsers that the web page is expected to correctly display. Forcing a hypertext document to conform strictly to a specific W3C standard for HTML is often no simple task. In the worst case, it cannot conform without losing some aesthetics or accessibility functionality.

      Second, the case of HTML documents is not an isolated case. Standards for XML, XSL, JavaScript, VBScript, are analogous. Therefore, you might imagine the problems when you begin to combine these languages and formats in an HTML document.

      Third, there is always more than one way to skin a cat. For example, Bobby and Cynthia may flag those IMG tags that do not contain a TITLE attribute. There might be good reason that a web developer chooses not to include the title attribute. The title attribute has a limited numbers of characters and does not support carriage returns. This is a major defect in the design of this tag. In fact, before the TITLE attribute was supported, there was the ALT attribute. Most browsers support both, yet they both perform a similar function. However, both attributes share the same deficiencies. In practice, there are instances where neither attribute would be used. Instead, for example, the developer would write some JavaScript or VBScript to circumvent these deficiencies. The concern is that Bobby and Cynthia would not notice this because it does not ???understand??? what the JavaScript does.
    </Description>
    <Keywords>unused</Keywords>
    <Title>unused</Title>
  </Seo>
</row>   </rows> </root> 
```

**编辑**

这是我的实体：

```
public class LitePropertyData
{

    public virtual string Description { get; set; }
    public virtual bool DisplayEditUI { get; set; }
    public int OwnerTab { get; set; }
    public virtual string DisplayName { get; set; }
    public int FieldOrder { get; set; }
    public bool IsRequired { get; set; }

    public string Name { get; set; }
    public virtual bool IsModified { get; set; }
    public virtual int ParentPageID { get; set; }
    public LiteDataType Type { get; set; }
    public  object Value { get; set; }

}

[Serializable]
public class LitePageData
{
    public String Guid { get; set; }
    public Int32 ID { get; set; }
    public String Name { get; set; }
    public Int32? ParentID { get; set; }
    public DateTime Created { get; set; }
    public String CreatedBy { get; set; }
    public DateTime Changed { get; set; }
    public String ChangedBy { get; set; }
    public Int32? LitePageTypeID { get; set; }
    public String Html { get; set; }
    public String FriendlyName { get; set; }
    public Boolean IsDeleted { get; set; }
    public List<LitePropertyData> Properties { get; set; }
    public LiteSeoPageData Seo { get; set; }

    /// <summary>
    /// Saves the specified XML full file path.
    /// </summary>
    /// <param name="xmlFullFilePath">The XML full file path.</param>
    public void Save(String xmlFullFilePath)
    {
        XDocument doc = XDocument.Load(xmlFullFilePath);

        XElement demoNode = this.ToXElement<LitePageData>();

        demoNode.Name = "row";

        doc.Descendants("rows").Single().Add(demoNode);

        doc.Save(xmlFullFilePath);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:12:44.607

我的建议是在 .NET 中创建对象，然后将其序列化为 XML，并查看 .NET 创建的有效 xml 的格式。然后让你的 XML 看起来像这样。

此方法会将 LitePageData 对象转换为 XML。如果您想检查它，您可以将有效的 xml 保存到文件或其他东西中，或者只是将其转储出来。

```
public static XElement GetXElementFromLitePageData(LitePageData objectToSerialize)
{
    var xmlSerializer = new XmlSerializer(typeof(LitePageData));
    var doc = new XDocument();
    using (XmlWriter xmlWriter = doc.CreateWriter())
    {
        xmlSerializer.Serialize(xmlWriter, objectToSerialize);
    }

    return doc.Root;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:16:20.353

我实现了你的类，然后序列化页面数据对象，并能够序列化为 xml 并返回。如果您可以在 .NET 中创建对象，然后对其进行序列化，您应该会获得有效的 XML。当您尝试反序列化时，请确保您的 XML 格式是这样的。

我对您没有提供但被引用的实体采取了一些自由：

```
[Serializable]
public class LitePropertyData
{

    public virtual string Description { get; set; }
    public virtual bool DisplayEditUI { get; set; }
    public int OwnerTab { get; set; }
    public virtual string DisplayName { get; set; }
    public int FieldOrder { get; set; }
    public bool IsRequired { get; set; }
    public string Name { get; set; }
    public virtual bool IsModified { get; set; }
    public virtual int ParentPageID { get; set; }
    public LiteDataType Type { get; set; }
    public object Value { get; set; }
}

[Serializable]
public enum LiteDataType
{
    String,
    NotString,
}

[Serializable]
public class LitePageData
{
    public String Guid { get; set; }
    public Int32 ID { get; set; }
    public String Name { get; set; }
    public Int32? ParentID { get; set; }
    public DateTime Created { get; set; }
    public String CreatedBy { get; set; }
    public DateTime Changed { get; set; }
    public String ChangedBy { get; set; }
    public Int32? LitePageTypeID { get; set; }
    public String Html { get; set; }
    public String FriendlyName { get; set; }
    public Boolean IsDeleted { get; set; }
    public List<LitePropertyData> Properties { get; set; }
    public LiteSeoPageData Seo { get; set; }
}

[Serializable]
public class LiteSeoPageData
{
    public string Author { get; set; }
    public string Classification { get; set; }
    public string CopyRight { get; set; }
    public string Description { get; set; }
    public string Keywords { get; set; }
    public string Title { get; set; }
} 
```

该程序如下所示：

```
 static void Main(string[] args)
    {
        var type = LiteDataType.String;
        var data1 = new LitePropertyData
        {
            Description = "LitePropertyData Description",
            DisplayEditUI = true,
            OwnerTab = 1,
            DisplayName = "LitePropertyData Display Name",
            FieldOrder = 2,
            IsRequired = true,
            Name = "LitePropertyData Name",
            IsModified = false,
            ParentPageID = 3,
            Type = type,
            Value = "LitePropertyData value"
        };

        var data2 = new LitePropertyData
        {
            Description = "LitePropertyData Description2",
            DisplayEditUI = false,
            OwnerTab = 4,
            DisplayName = "LitePropertyData Display Name2",
            FieldOrder = 5,
            IsRequired = false,
            Name = "LitePropertyData Name2",
            IsModified = false,
            ParentPageID = 6,
            Type = type,
            Value = "LitePropertyData value2"
        };

        var seo = new LiteSeoPageData 
        {
            Author = "Seo Author",
            Classification = "Seo class",
            CopyRight = "Seo copyright",
            Description = "Seo desc",
            Keywords = "Seo keywords",
            Title = "Seo Title"
        };

        var pageData = new LitePageData
        {
            Guid = Guid.NewGuid().ToString(),
            ID = 7,
            Name = "page data name",
            ParentID = null,
            Created = DateTime.Now,
            CreatedBy = "me",
            Changed = DateTime.UtcNow,
            LitePageTypeID = 9,
            Html = "this is not html",
            FriendlyName = "casper",
            IsDeleted = false,
            Properties = new List<LitePropertyData> { data1, data2 },
            Seo = seo
        };

        XElement xml = GetXElementFromLitePageData(pageData);
        Save(@"C:\Users\Public\Documents\pageData2.xml", xml);

        LitePageData deserializedPageData = GetLitePageDataFromXElement(xml);

        Console.ReadLine();
    }

    /// <summary>
    /// Saves the specified XML full file path.
    /// </summary>
    /// <param name="xmlFullFilePath">The XML full file path.</param>
    public static void Save(String xmlFullFilePath, XElement xml)
    {
        var doc = new XDocument();
        doc.Add(xml);
        doc.Save(xmlFullFilePath);
    }

    public static XElement GetXElementFromLitePageData(LitePageData objectToSerialize)
    {
        var xmlSerializer = new XmlSerializer(typeof(LitePageData));
        var doc = new XDocument();
        using (XmlWriter xmlWriter = doc.CreateWriter())
        {
            xmlSerializer.Serialize(xmlWriter, objectToSerialize);
        }

        return doc.Root;
    }

    public static LitePageData GetLitePageDataFromXElement(XElement xml)
    {
        var xmlSerializer = new XmlSerializer(typeof(LitePageData));
        return (LitePageData)xmlSerializer.Deserialize(xml.CreateReader());
    } 
```

这是xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LitePageData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Guid>d5a94c0e-b39a-4bd0-9db3-4aa9c4273144</Guid>
  <ID>7</ID>
  <Name>page data name</Name>
  <ParentID xsi:nil="true" />
  <Created>2012-07-18T22:00:33.4522654-04:00</Created>
  <CreatedBy>me</CreatedBy>
  <Changed>2012-07-19T02:00:33.4532679Z</Changed>
  <LitePageTypeID>9</LitePageTypeID>
  <Html>this is not html</Html>
  <FriendlyName>casper</FriendlyName>
  <IsDeleted>false</IsDeleted>
  <Properties>
    <LitePropertyData>
      <Description>LitePropertyData Description</Description>
      <DisplayEditUI>true</DisplayEditUI>
      <OwnerTab>1</OwnerTab>
      <DisplayName>LitePropertyData Display Name</DisplayName>
      <FieldOrder>2</FieldOrder>
      <IsRequired>true</IsRequired>
      <Name>LitePropertyData Name</Name>
      <IsModified>false</IsModified>
      <ParentPageID>3</ParentPageID>
      <Type>String</Type>
      <Value xsi:type="xsd:string">LitePropertyData value</Value>
    </LitePropertyData>
    <LitePropertyData>
      <Description>LitePropertyData Description2</Description>
      <DisplayEditUI>false</DisplayEditUI>
      <OwnerTab>4</OwnerTab>
      <DisplayName>LitePropertyData Display Name2</DisplayName>
      <FieldOrder>5</FieldOrder>
      <IsRequired>false</IsRequired>
      <Name>LitePropertyData Name2</Name>
      <IsModified>false</IsModified>
      <ParentPageID>6</ParentPageID>
      <Type>String</Type>
      <Value xsi:type="xsd:string">LitePropertyData value2</Value>
    </LitePropertyData>
  </Properties>
  <Seo>
    <Author>Seo Author</Author>
    <Classification>Seo class</Classification>
    <CopyRight>Seo copyright</CopyRight>
    <Description>Seo desc</Description>
    <Keywords>Seo keywords</Keywords>
    <Title>Seo Title</Title>
  </Seo>
</LitePageData> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T08:20:23.963

我将获取属性的逻辑重构为 GetProperties 方法。然后在调用新方法之前注释掉原始代码以在 GetPages 方法中填充 Properties：

```
 public static List<LitePropertyData> GetProperties(XElement record)
    {
        if (record.Element("Properties") == null) return new List<LitePropertyData>();
        if (record.Descendants("Properties")== null) return new List<LitePropertyData>();
        if (record.Descendants("Properties").Descendants("LitePropertyData") == null) return new List<LitePropertyData>();

        List<LitePropertyData> properties =
        (from property in record.Descendants("Properties").Descendants("LitePropertyData")
         select new LitePropertyData
         {
             Description = property.Element("Description").Value,
             DisplayEditUI = property.Element("DisplayEditUI").Value.ToBoolean(),
             DisplayName = property.Element("DisplayName").Value,
             FieldOrder = property.Element("FieldOrder").Value.ToInt32(),
             IsModified = property.Element("IsModified").Value.ToBoolean(),
             IsRequired = property.Element("IsRequired").Value.ToBoolean(),
             Name = property.Element("Name").Value,
             OwnerTab = property.Element("OwnerTab").Value.ToInt32(),
             ParentPageID = property.Element("ParentPageID").Value.ToInt32(),
             Type = (LiteDataType)property.Element("Type").Value.ToInt32(),
             Value = property.Element("Value").Value,
         }).ToList();

        return properties;
    }

    /// <summary>
    /// Gets the pages.
    /// </summary>
    /// <param name="xmlFullFilePath">The XML full file path.</param>
    /// <returns></returns>
    public static List<LitePageData> GetPages(String xmlFullFilePath)
    {
        XDocument document = XDocument.Load(xmlFullFilePath);

        List<LitePageData> results = (from record in document.Descendants("row")
                                      select new LitePageData
                                      {
                                          Guid = IsValid(record, "Guid") ?
                                            record.Element("Guid").Value :
                                            null,
                                          ParentID = IsValid(record, "ParentID") ?
                                                Convert.ToInt32(record.Element("ParentID").Value) :
                                                (Int32?)null,
                                          Created = Convert.ToDateTime(record.Element("Created").Value),
                                          Changed = Convert.ToDateTime(record.Element("Changed").Value),
                                          Name = record.Element("Name").Value,
                                          ID = Convert.ToInt32(record.Element("ID").Value),
                                          LitePageTypeID = IsValid(record, "ParentID") ?
                                                Convert.ToInt32(record.Element("ParentID").Value) :
                                                (Int32?)null,
                                          Html = record.Element("Html").Value,
                                          FriendlyName = record.Element("FriendlyName").Value,
                                          Properties = GetProperties(record),
                                          //record.Element("Properties") != null ? record.Element("Properties").FromXElement<List<LitePropertyData>>() :
                                          //  new List<LitePropertyData>()
                                      }).ToList();

        return results;
    } 
```

# ruby-on-rails - Railscasts #37 nil:nilclass 的未定义方法“每个”

> ID：11527258
> 
> 赞同：1
> 
> 时间：2012-07-17T16:56:40.803
> 
> 标签：ruby-on-rails, ruby

我正在关注 Railcasts 上的视频，但我被卡住了。这是我的代码：

locals_controller.rb

```
def landing
@locals = Local.search(params[:search])
end 
```

local.rb (模型)

```
def self.search(search)
  if search
    where('nome LIKE ?', "%#{search}%")
  else
    all
  end
end 
```

和视图landing.html.erb

```
<% if signed_in? %>
<%= form_tag root_path, :method => :get, :class  => "center form-search" do %>
    <p>
        <%= text_field_tag :search, params[:search], :class  =>  "input-medium search-query" %>
        <%= submit_tag "Search", :name => nil, :class  => "btn" %>
    </p>
    <%= render "landing_search" %>
<% end %> 
```

以及引发错误的部分，因为基本上`@locals`是 nil ，因为它说`"undefined method each for nil:nilClass"`：

```
_landing_search.html.erb

    <% @locals.each do |local| %>
    ... 
```

我错过了什么？

我还添加了

```
match '/', to: "locals#landing" 
```

在`routes.rb`我的情况下，因为在我的情况下，要显示的页面位于根路径中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:03:04.373

也许您应该将**o**更改为**a** in name ？

```
def self.search(search)
  if search
    where('name LIKE ?', "%#{search}%")
  else
    all
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:31:44.913

一切似乎都很好，但我检查了你的代码，你定义了`landing`两次动作（底部的一个覆盖了第一个）：

```
def landing
  @locals = Local.search(params[:search])
end

# ...    

def landing #line 86
end 
```

因此，如果您删除第二个，一切都会好起来的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:11:43.250

首先，检查您在控制器中定义的登陆方法不止一个，如果是，将调用最新的方法。

第二，像这样改变你的控制器：

```
def self.search(opts)
  return self.all if opts.blank?
  self.where('nome LIKE ?', "%#{opts}%")
end 
```

# exact-match - 开发精确文本系统的算法和设计

> ID：11527263
> 
> 赞同：0
> 
> 时间：2012-07-17T16:56:58.707
> 
> 标签：exact-match

我们有数百万个由许多段落组成的文档。要求是在这个语料库之上开发一个精确的搜索系统。搜索字符串通常从段落的开头开始，并且可以扩展到两个或更多段落。在这个系统中将使用什么数据结构和算法来存储持久化数据需要注意的是，与跨页面搜索查询的速度相比，添加文档的速度要慢得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:01:11.013

如果您自己手动解析数百万条记录，这将是一项乏味且耗时的任务。

您可以使用 APACHE Lucene Engine 为您解析文档。如果你不了解 Lucene，它是一个功能齐全的文本搜索引擎库，可以实现全文搜索，尤其是跨平台。

签出： http: [//lucene.apache.org](http://lucene.apache.org)

# google-chrome-extension - 如何从内容脚本中使用 popup.html 注入 iframe

> ID：11527266
> 
> 赞同：6
> 
> 时间：2012-07-17T16:57:15.860
> 
> 标签：google-chrome-extension

我想将 popup.html 注入网页内容。下面是我的想法

```
... page content

<div> <--! injected content !-->
   <iframe src="chrome-extension:/21jk32j11k3kj11/popup.html">
   </iframe>
</div> 
```

是否可以在网页内容中显示 popup.html？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T20:09:43.063

这是可能的。当[清单版本](http://code.google.com/chrome/extensions/manifestVersion.html)2 处于活动状态时（在 Chrome 18 中引入，在 Chrome 23 中需要），您必须在[`"web_accessible_resources"`清单文件的部分中](http://code.google.com/chrome/extensions/manifest.html#web_accessible_resources)包含该页面：

```
{ ...
    "web_accessible_resources": ["popup.html"],
  ...
} 
```

框架本身可以通过[Content script](http://code.google.com/chrome/extensions/content_scripts.html)注入，有关用法和示例，请参见文档：

```
// Within a content script:
var f = document.createElement('iframe');
f.src = chrome.extension.getURL('popup.html');
document.body.appendChild(f); // Append to body, for example. 
```

[`chrome.extension.getURL`](http://code.google.com/chrome/extensions/extension.html#method-getURL)返回 的绝对 URL `popup.html`，例如`chrome-extension://...32 letters.../popup.html`。

# windows - xp进入睡眠模式

> ID：11527267
> 
> 赞同：1
> 
> 时间：2012-07-17T16:57:26.180
> 
> 标签：windows, windows-xp

我最近卸载了一台无线打印机，它要求我重新启动 xp 台式机，我这样做了。但是，当它重新启动时，它会说“进入睡眠模式”，然后会自行回收并继续重新启动进入此睡眠模式。我尝试进入安全模式，但只是在睡眠模式下重新启动。与上次已知的配置相同。还将BIOS更改为默认值。谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:20:20.277

将 Windows XP CD 插入 CD/DVD 驱动器。
重启你的电脑。
它现在应该从您的 Windows XP 光盘启动。 *（如果没有，请检查您的 BIOS）*

当它从磁盘启动时，您应该会得到一个提示*Press R to enter recovery Console*。按`R`。

按**1**登录 Windows，然后按`Enter`。您将需要管理密码才能进入命令提示符。如果管理员密码为空，请按`Enter`。

从命令提示符：

```
ATTRIB -R -S -H hiberfil.sys
DEL hiberfil.sys 
```

现在休眠文件不见了，应该可以正常启动了。[有关Microsoft](http://support.microsoft.com/kb/314058)
恢复模式的更多信息

# c# - 自定义凭据提供程序能够调用 c# 应用程序吗？

> ID：11527268
> 
> 赞同：4
> 
> 时间：2012-07-17T16:57:26.227
> 
> 标签：c#, winforms, authentication, credentials, provider

我目前正在为我的最后一年项目的一部分，使用 in Windows 作为一种身份验证形式来集成一个`c#`手势身份验证程序。`kinect`一旦 c# 程序通过身份验证，如果提供的手势被验证为有效手势，则会触发一个事件。

所以我的问题是：

1.  我目前正在使用`sampleHardWareEventCredentialProvider`来自微软的。它是否适合我想要实现的目标？

2.  自定义凭据提供程序是否可以以这样的方式编码，即它可以调用我的 c# 程序进行身份验证并向 credentialProvider 返回一个事件，无论身份验证是否成功？如果是的话，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:43:59.257

I think that to create a custom Credential Provider you need to implement the ICredentialProvider COM interface [http://msdn.microsoft.com/en-us/library/windows/desktop/bb776042.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776042.aspx) . You can do this using C# (maybe like [http://www.codeproject.com/Articles/7859/Building-COM-Objects-in-C](http://www.codeproject.com/Articles/7859/Building-COM-Objects-in-C) ). Are you already using SampleHardWareEventCredentialProvider with C# successfully?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:44:51.420

示例硬件凭据提供程序，当然来自我所阅读的内容，是为您尝试做的事情而制作的，因为它目前准备通过第三方硬件（例如指纹读取器等）对用户进行身份验证。假设您可以正确使用手势元素，人们会想象 Kinect 会很好地适应该模型！此外，请记住，凭据提供程序是为 Vista 编写的，因此 Kinect 在当时可能还不是 MS-Dev 眼中的闪光点。

关于您的第二点，关于能够调用 C# 应用程序进行身份验证，是的，您当然可以，因为我本周自己使用 WPF 应用程序编写了一个自助密码重置应用程序。我不需要从 C# 应用程序将事件/数据返回给凭据提供程序，因为我不需要这样做，但无法想象这是一个巨大的陷阱。

希望这可以帮助。

# opencl - 读/写 GPU 上的寄存器

> ID：11527269
> 
> 赞同：1
> 
> 时间：2012-07-17T16:57:31.433
> 
> 标签：opencl, gpu, gpgpu

是否可以使用 OpenCL 读取/写入 GPU 上的寄存器？我使用的是 NVIDIA GeForce 9400gt 显卡。

尝试谷歌搜索，但没有太多信息。有人可以告诉我这是否可能，如果可以，如何？

# jquery - 如何为使用 Html.MvcSiteMap().Menu() 创建的菜单添加吸引人的 jquery 效果？

> ID：11527279
> 
> 赞同：0
> 
> 时间：2012-07-17T16:58:14.103
> 
> 标签：jquery, asp.net-mvc-3, asp.net-mvc-sitemap

我正在尝试更改主站点导航菜单的外观，到目前为止，我已经能够识别 css 属性并更改背景图像和字体样式，但我想让子菜单“向下滑动”或“在页面上淡入。

据我所知*使用了 MvcSiteMap，代码通过将子菜单的可见性设置为“无”，然后在悬停时设置为“可见”来工作。有谁知道如何找到控制这种行为的 jquery/javascript 文件？

如果有帮助，我将附加菜单的 css 结构：

```
<nav id="menu">
  <ul class="dropdown">
   <li class>
     <a href ="/About">About</a>
     <ul class="sub_menu" style="visibility:hidden;">
       <li class>
         <a href="/About/Team">Team</a>
       </li>
       <li class>
         <a href="/About/History">Story</a>
       </li>
     </ul>
   </li>
   ..etc...
  </ul>
</nav> 
```

*我不是创建站点导航菜单的人，我最近接手了一个 Web 开发项目，到目前为止该项目的文档记录很差，并且没有以前的团队成员留下，所以我不能问他们，因为我对此很陌生不知道如何找出这是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:36:02.977

这是一个基本的开始......因此您可以使用 css 完成并添加一些其他动画或行为

运行版本：http: [//jsfiddle.net/LUVTQ/](http://jsfiddle.net/LUVTQ/)

html

```
<nav id="menu">
  <ul class="dropdown">
   <li>
     <a class="main_option" href ="/About">About</a>
     <ul class="sub_menu" style="display:none;">
       <li class>
         <a href="/About/Team">Team</a>
       </li>
       <li class="main_option">
         <a href="/About/History">Story</a>
       </li>
     </ul>
   </li>
   <li>
     <a class="main_option" href ="/About">Etc</a>
     <ul class="sub_menu" style="display:none;">
       <li class>
         <a href="/About/Team">Team</a>
       </li>
       <li class="main_option">
         <a href="/About/History">Story</a>
       </li>
     </ul>
   </li>
   ..etc...
  </ul>
</nav>​ 
```

和脚本

```
$(document).ready(function(){
    $('a.main_option').click(toggleMainOption);    
});

function toggleMainOption(){
    $(this).next('.sub_menu').slideToggle('fast');
    return false;
} 
```

# jquery - 如何使用 jQuery 获得最大大小的嵌套列表

> ID：11527286
> 
> 赞同：0
> 
> 时间：2012-07-17T16:58:49.137
> 
> 标签：jquery, nested-lists

这是我的问题：我有嵌套列表，并且我想获取最大列表的大小而不获取其子级。例如：

```
<ul>
    <li>
        <ul>
            <li></li>
            <li></li>
        </ul>
    </li>
    <li>
        <ul>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </li>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

所以它会拉 5（主列表，或 4 假设索引为 0），而不是 11 或其他。想法？我试图弄乱 size() 函数，但它也抓住了孩子们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:02:55.887

```
$('ul').each(function() {
    console.log($('> li', this).length);
});​ 
```

返回 5、2、4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:06:29.450

```
var items = $("ul > li");  //looks at all direct children of ul.
var len = items.length; // the length will count the number of occurances of li appear. 
```

然后，您可以分配一个全局变量来跟踪长度。

```
if (GLOBAL < len){
   GLOBAL = items.parent();
} 
```

设置全局 = 最大 LI 集的父级

# git - 我的 git 分支在 Sourcetree 中显示“origin/master”和“origin/HEAD”，我不知道如何合并这两者

> ID：11527287
> 
> 赞同：19
> 
> 时间：2012-07-17T16:59:08.830
> 
> 标签：git, branching-and-merging

我最近将我正在处理的一个分支与“主”分支合并。我必须（仍然是一个 git n00b）在推动或拉动创建 an`origin/master`和 an`origin/HEAD`分支时做了一些事情。不幸的是，我没有记录我运行的执行此操作的命令。目前，我的团队在他们的主副本中有一堆代码，当我检查项目时我没有得到这些代码（即使我`clone`到了一个新位置）。

这是 Sourcetree 显示的屏幕截图：

![2 家分店](../Images/ff3994aeb4bcc1a13fac7190d4e6777b.png)

我真的需要解决这个问题，这样我才能继续工作，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-30T08:49:40.333

它只是一个指向 master 的指针，如果你愿意的话，它是一个符号链接。您可以通过在终端中执行以下操作来安全地删除它（或 git bash/cygwin 对于 Windows 用户）：

1.  导航到您的存储库
2.  执行：`git remote set-head origin -d`

现在它应该消失了：

```
$ git branch -r
origin/master 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T17:15:09.600

您看到的以开头的分支`origin/`是所谓的“远程跟踪分支”。`origin`它们会告诉您上次 git 从该存储库获取分支在存储库中的位置。

没什么好担心的——这实际上是有用的信息。如果您认为这些分支职位已经过时，您可以运行：

```
git fetch origin 
```

...更新它们。

在任何存储库中，`HEAD`是一种特殊类型的 ref（“symref”），代表当前分支（或当前提交，如果您不在特定分支上）。

* * *

您可以在图表中看到您的`master`分支实际上是在 之前的一次提交`origin/master`，因此如果您的同事一直在推进`master`并且`origin`您最近运行`git fetch origin`（或类似的东西），那么您已经完成了他们的所有工作。但是，在您推送之前，他们将错过您的提交。

你说：

> 目前，我的团队在他们的主副本中有一堆代码，当我检查项目时我没有得到这些代码（即使我克隆到一个新位置）。

如果是这种情况，他们可能正在推送到不同的分支、不同的存储库，或者他们根本没有推送他们的工作。

# python - 如何在多个文件中搜索文本块并将这些文本块写入另一个文件

> ID：11527290
> 
> 赞同：0
> 
> 时间：2012-07-17T16:59:15.253
> 
> 标签：python, text, batch-file, grep

以下是输入文件的示例：

```
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
    HERE IS A LOT OF TEXT, THAT IS NOT INTERESTING 
    <br>
      <div id="text"><div id="text-interesting1">11/222-AA</div>
      <h2>This is the title</h2>

            <P>Here is some multiline desc-<br>
                 cription about what is <br><br>
                 going on here
      </div>

      <div id="text2"><div id="text-interesting2">IV-VI</div>
        <br>
        <h1> Some really interesting text</h1>
</body>
</html> 
```

现在我想 grep 这个文件的多个块，比如介于之间`<div id="text-interesting1">`，`</div>`然后介于之间，然后介于`<P>`和`</div>`之间`<div id="text-interesting2">`以及`</div>`更多。关键是，我要检索多个值。

我想将这些值写入文件，例如逗号分隔。怎么可能呢？

从卢克提供的例子中，我做了以下几点：

```
import os, re
path = 'C:/Temp/Folder1/allTexts'
listing = os.listdir(path)
for infile in listing:
    text = open(path + '/' + infile).read()
    match = re.search('<div id="text-interesting1">', text)
    if match is None:
        continue
    start = match.end()
    end = re.search('</div>', text).start()
    print (text[start:end])

    match = re.search('<h2>', text)
    if match is None:
        continue
    start = match.end()
    end = re.search('</h2>', text).start()
    print (text[start:end])

    match = re.search('<P>', text)
    if match is None:
        continue
    start = match.end()
    end = re.search('</div>', text).start()
    print (text[start:end])

    match = re.search('<div id="text-interesting2">', text)
    if match is None:
        continue
    start = match.end()
    end = re.search('</div>', text).start()
    print (text[start:end])

    match = re.search('<h1>', text)
    if match is None:
        continue
    start = match.end()
    end = re.search('</h1>', text).start()
    print (text[start:end])

    print ('--------------------------------------') 
```

输出是：

```
11/222-AA
This is the title

 Some really interesting text
--------------------------------------
22/4444-AA
22222 This is the title2

22222222222222222222222
--------------------------------------
33/4444-AA
3333 This is the title3

333333333333333333333333
-------------------------------------- 
```

为什么

部分不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:09:28.357

这是一个开始：

```
import os, re
path = 'C:/Temp/Folder1/allTexts'
listing = os.listdir(path)
for infile in listing:
    text = open(path + '/' + infile).read()
    match = re.search('<div id="text-interesting1">', text)
    if match is None:
        continue
    start = match.start()
    end = re.search('<div id="text-interesting2">', text).start()
    print text[start:end] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:50:27.733

另一种策略是解析 XML。您需要整理文件，因为严格的 XML 需要匹配标签、大小写一致性等。这是一个示例：

```
from xml.etree import ElementTree
from cStringIO import StringIO
import sys
tree = ElementTree.ElementTree()
tree.parse(StringIO(sys.stdin.read()))
print "All tags:"
for e in tree.getiterator():
    print e.tag
    print e.text
print "Only div:"
for i in tree.find("{http://www.w3.org/1999/xhtml}body").findall("{http://www.w3.org/1999/xhtml}div"):
    print i.text 
```

对文件稍作修改后运行：

```
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
HERE IS A LOT OF TEXT, THAT IS NOT INTERESTING 
<br></br>
<div id="text"><div id="text-interesting1">11/222-AA</div>
  <h2>This is the title</h2>
  <p>Here is some multiline desc-<br></br>
      cription about what is <br></br><br></br>
    going on here</p>
</div>
  <div id="text-interesting2">IV-VI</div>
      <br></br>
    <h1> Some really interesting text</h1>
</body>
</html> 
```

示例输出，

```
> cat file.xml | ./tb.py 
All tags:
{http://www.w3.org/1999/xhtml}html

{http://www.w3.org/1999/xhtml}head

{http://www.w3.org/1999/xhtml}body

HERE IS A LOT OF TEXT, THAT IS NOT INTERESTING 

{http://www.w3.org/1999/xhtml}br
None
{http://www.w3.org/1999/xhtml}div
None
{http://www.w3.org/1999/xhtml}div
11/222-AA
{http://www.w3.org/1999/xhtml}h2
This is the title
{http://www.w3.org/1999/xhtml}p
Here is some multiline desc-
{http://www.w3.org/1999/xhtml}br
None
{http://www.w3.org/1999/xhtml}br
None
{http://www.w3.org/1999/xhtml}br
None
{http://www.w3.org/1999/xhtml}div
IV-VI
{http://www.w3.org/1999/xhtml}br
None
{http://www.w3.org/1999/xhtml}h1
Some really interesting text
Only div:
None
IV-VI 
```

但是很多 HTML 很难解析为严格的 XML，因此对于您的情况，这可能很难实现。

# map - 有没有办法在 Metro Style Applications 的 Bing Map 上绘制路线？

> ID：11527292
> 
> 赞同：0
> 
> 时间：2012-07-17T16:59:25.523
> 
> 标签：map, styles, microsoft-metro, routes, bing

我想根据从 REST 服务获得的路线信息在 Bing 地图上绘制路线 - ItineraryItems 的位置。有没有办法做到这一点？我正在使用 Bing Map SDK für Metro Style Apps。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:53:09.777

我知道了。在查询中设置参数 routepathoutput=points 以获取用于绘制路线的路线路径的点列表。

# jquery - asp.net mvc jquery ui datepicker绑定问题

> ID：11527293
> 
> 赞同：4
> 
> 时间：2012-07-17T16:59:25.897
> 
> 标签：jquery, asp.net, asp.net-mvc-3, jquery-ui

我正在 Windows 7 和 2010 上开发 asp.net mvc3 项目。我已将 jquery 和 jquery ui 引用添加到项目中。

我有一个将数据保存到数据库的表单。在我的表单中，我有一个文本框，它为显示日期选择器绑定了编辑器模板。

如果我在我的计算机上发布项目（Windows 7 IIS 7）一切正常。但是当我将已发布的项目上传到服务器（Windows 2003 IIS 6）时，日期选择器值不正确会发生错误。

**编辑器模板**

```
@model Nullable<System.DateTime>

@Html.TextBox(  "", 
                Model.HasValue ? Model.Value.ToString("dd.MM.yyyy") :string.Empty, 
                new { data_datepicker = true, @class = "text-box " }) 
```

**格式日期选择器的 Javascript 代码**

$(文档).ready(函数 () {

```
$.datepicker.setDefaults($.datepicker.regional['tr']);
$.datepicker.setDefaults({
    changeMonth: true,
    changeYear: true,
    dateFormat: "dd.mm.yy",
    minDate: 0
});

$(":input[data-datepicker]").datepicker(); 
```

})

**我的 POST 动作是**

```
public ActionResult Create(FormViewModel formModel)
{

} 
```

FormViewModel 包含名称和日期属性。我认为模型活页夹不是绑定日期。因为名称属性字段为真，日期属性会出错。

**错误：** 值“18.07.2012”对 EndDate 无效。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:04:02.777

我解决了问题。文化差异问题是我的问题。我设置了网络配置文件。 `<globalization culture="tr-TR" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:15:25.530

我很惊讶它在本地工作。我认为你需要类似的东西：

```
$('.text-box').datepicker(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:22:56.683

我遇到了类似的情况，我的解决方案在本地运行良好，但是当部署在 Windows Server 2012 上时，日期字段在表单提交时设置为 01/01/0000 :00 00 00 。

我在我的 Web.Config 中添加了 globilization 标签，例如

```
<globalization culture="en-US" /> 
```

现在工作正常。

# visual-studio-2012 - 解决方案 .sln 的格式不受支持，可能无法正确打开

> ID：11527295
> 
> 赞同：2
> 
> 时间：2012-07-17T16:59:32.307
> 
> 标签：visual-studio-2012, expression-blend-5

使用 Visual Studio 2012 Release Candidate 和 Expression Blend 5 for SL 5。

尝试在 Blend for SL 5 上打开我的项目时，我遇到了以下警告

> 解决方案 .sln 的格式不受支持，可能无法正确打开。

如何解决？

# objective-c - 从临时部署安装 新 IPA 时，有没有办法保留文档文件夹？

> ID：11527301
> 
> 赞同：0
> 
> 时间：2012-07-17T17:00:13.297
> 
> 标签：objective-c, xcode, ipa, ad-hoc-distribution

当我使用临时部署发布更新的 IPA 时，客户希望保留文档沙箱。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:19:21.683

只需将沙箱中的文档复制到新的应用程序文件夹中即可。

如果有最终用户总是想要拥有的特定文档，请考虑将它们构建到您的项目中。

# ruby - Sinatra 和 Foursquare - 未定义的方法“web_server”

> ID：11527303
> 
> 赞同：0
> 
> 时间：2012-07-17T17:00:22.230
> 
> 标签：ruby, oauth, sinatra, oauth-2.0, foursquare

我正在尝试使用 Sinatra 在 Ruby 中运行一个简单的 Foursquare 身份验证。我在[这里](https://github.com/matthunter/foursquare-ruby-example "这里")使用示例。

当我尝试在本地服务器上运行此代码时，出现此错误

```
 NoMethodError at /
undefined method `web_server' for #<OAuth2::Client:0x16168bc> 
```

我不知道如何解决这个问题......想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:19:18.300

该`web_server`方法已在 OAuth2 ruby​​ gem 的 v0.5.0 中删除。

安装 gem 的早期版本以使用缺少的方法：

`gem install oauth2 -v 0.4.1`

并通过在之前添加以下行来修改您的脚本，`require 'oauth2'`因此它将只接受该特定版本的 gem：

`gem 'oauth2', '=0.4.1'`

编辑：看起来该示例已经有一段时间没有更新了——我将其[分叉](https://github.com/wehal3001/foursquare-ruby-example)并包含了上述建议的解决方法（此后已合并到原始存储库中）。

# neo4j - 如何仅返回 Neo4j 密码查询中的末端/叶节点？

> ID：11527304
> 
> 赞同：4
> 
> 时间：2012-07-17T17:00:25.720
> 
> 标签：neo4j, cypher

我有这样的结构：

用户-[:talking]->topic-[:categorized_in]->topic[:categorized_in]->topic...等

从用户开始，我将如何获得他们正在谈论的最遥远的话题。基本上，这代表了他们正在谈论的顶级类别。这是我知道的唯一方法，它会返回沿途的所有节点，而不仅仅是叶节点。

```
START user=node(1)
MATCH user-[:talking]->x<-[:categorized_in*0..]-y
RETURN distinct y.uuid 
```

这是我最近的尝试。它似乎有效，但我不知道这是否是最好的方法？：

```
START user=node(1)
MATCH user-[:talking]->x<-[:categorized_in*0..]-y<-[?:pull]-z
WHERE z is null
RETURN distinct y.uuid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T18:48:19.253

因此，对于任何感兴趣的人来说，这是如何做到的：

```
START user=node(1)
MATCH user-[:talking]->x<-[:categorized_in*0..]-y<-[?:categorized_in]-z
WHERE z is null
RETURN distinct y.uuid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T01:24:05.573

您现在可以[过滤 WHERE 中的模式](http://docs.neo4j.org/chunked/stable/query-where.html#where-filter-on-patterns-using-not)。

所以如果你有新版本的 Neo4j，我认为查询看起来像

```
START user=node(1)
MATCH user-[:talking]->x<-[:categorized_in*0..]-y
WHERE NOT(y<-[:categorized_in]-())
RETURN DISTINCT y.uuid 
```

# ruby-on-rails - Rails 定时尝试方法

> ID：11527308
> 
> 赞同：1
> 
> 时间：2012-07-17T17:00:46.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, try-catch, timed

所以我在 Rails 3.1 中使用 Resolver 来尝试获取服务器的 DHCP 地址，我希望允许它有一定的时间来查询......也许是 0.5 秒，因为它减慢了我的整个请求。

这就是我现在所拥有的。。

```
$begin
$Resolver('ipaddress').answer[0]
$rescue
$end 
```

这目前需要一段时间，所以有没有办法说“我想运行这个片段 0.5 秒”然后继续？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:14:26.657

[http://ruby-doc.org/stdlib-1.9.3/libdoc/timeout/rdoc/Timeout.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/timeout/rdoc/Timeout.html)

```
require 'timeout'

begin
  Timeout::timeout(0.5) do
    Resolver('ipaddress').answer[0]
  end
rescue Timeout::Error => e
  # do something
end 
```

# ios - iOS 通用二进制 - 切换 ModalPresentationStyle

> ID：11527312
> 
> 赞同：2
> 
> 时间：2012-07-17T17:01:15.160
> 
> 标签：ios, ipad, uinavigationcontroller, switch-statement, uimodalpresentationstyle

我通常为 iPhone 做应用程序；今天我尝试为应用程序创建一个接口（通用二进制）。问题是我的屏幕很少有控件，我想使用 UIModalPresentationFormSheet 来调整界面。但是在使用这种演示的屏幕之后，我想切换回全屏（使用相同的导航控制器）。

最初在 iPhone 部分我有 UINavigationController -> 子控制器。由于它是相同的类控制器，我想为 iPad 保留类似的架构。目前我执行以下 UINavigationController -> ModalController -> UINavigationController -> 子控制器但如上所述，子控制器应该能够从 FormSheet 切换到全屏，导航栏位于顶部。我正在使用故事板。

而且我知道我不太擅长解释，这是一个可以澄清我的问题的屏幕截图：[https ://dl.dropbox.com/u/9858108/stack_overflow_iPad_nav_issue.jpg](https://dl.dropbox.com/u/9858108/stack_overflow_iPad_nav_issue.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:29:56.363

好的，我找到了一个肮脏的解决方案，但解决了问题。我有以下配置 NavigationController -> UIViewController -[Modal]-> UINavigationController -> UIViewController1 -[Push]-> UIViewController2 （检查上面的屏幕截图）。

现在的想法是调整 ModalView 的大小（我强制横向模式，因此不支持纵向但您可以轻松修改代码）。我有一个包含有用方法的单例类，我称之为 AppKit。在 AppKit.m 中：

```
#pragma mark - Window functions (modal, ...)

/**
 * Cette méthode redimmensionne une modal view en type PaperSheet.
 * Utilisé dans le viewDidAppear du controller enfant.
 * Permet de mettre des modal view en fullscreen.
 *
 * @param id viewController Le viewController parent
 */
- (void)resizeModalToPaperSheet:(id) viewController {
    // Adaptation de la taille de la fenêtre pour iPad
    if (isIPad) {
        [viewController navigationController].view.superview.center = CGPointMake(0.0f, 0.0f);
        [viewController navigationController].view.superview.frame = CGRectMake(84.0f, 242.0f, 540.0f, 540.0f);
    }
}

/**
 * Cette méthode redimmensionne une modal view en type FullScreen.
 * Utilisé dans le viewDidAppear du controller enfant.
 * Permet de mettre des modal view en fullscreen.
 *
 * @param id viewController Le viewController parent
 */
- (void)resizeModalToFullScreen:(id) viewController {
    // Adaptation de la taille de la fenêtre pour iPad
    if (isIPad) {
        [viewController navigationController].view.superview.center = CGPointMake(0.0f, 0.0f);
        [viewController navigationController].view.superview.frame = CGRectMake(20.0f, 0.0f, 754.0f, 1024.0f);
    }
} 
```

现在在我的子视图控制器中，我必须调用该方法两次（否则当您按下回时，模态视图的大小与前一个控制器保持不变，因此您必须将其放在 viewDidAppear 中）。

ViewController 1（纸张大小）：

```
-(void) viewWillAppear:(BOOL)animated {
    [[AppKit sharedInstance] resizeModalToPaperSheet: self];
}

-(void) viewDidAppear:(BOOL)animated {
    [[AppKit sharedInstance] resizeModalToPaperSheet: self];
} 
```

ViewController 1（全屏大小）：

```
-(void) viewWillAppear:(BOOL)animated {
    [[AppKit sharedInstance] resizeModalToFullScreen: self];
}

-(void) viewDidAppear:(BOOL)animated {
    [[AppKit sharedInstance] resizeModalToFullScreen: self];
} 
```

而且效果很好；我可以轻松地在全屏和 PaperSheet 之间切换。现在还有一个问题：在storyboard上，view还是很小的，里面加东西也不容易。所以你必须这样做： 1/ 在情节提要中，单击视图控制器，它是小（框图标） 2/ 在属性面板上，将大小设置为 iPad 全屏

希望这会有所帮助，欢迎对如何改进代码发表任何评论:)

# asp-classic - 在经典 asp 中设置表单的操作，同时在下拉列表中选择值

> ID：11527313
> 
> 赞同：0
> 
> 时间：2012-07-17T17:01:20.633
> 
> 标签：asp-classic, vbscript

我想更改表单操作，同时选择下拉的元素。示例：对于按钮：

```
<input type="submit" name="straction" id="straction" value="Submit"> 
```

现在我想，如何设置下拉动作？

感谢您的帮助。贾加迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:19:04.763

方法一：

```
<html>
    <head>
        <title>change form action</title>
    </head>
    <body>
        <form id="frm1" action="default.html">
            <select id="actions" onchange="document.getElementById('frm1').action=this.value">
                <option value=""></option>
                <option value="action1.asp">one</option>
                <option value="action2.asp">two</option>
                <option value="action3.asp">three</option>
            </select>

            <input type="submit" name="straction" id="straction" value="Submit">
        </form>
    </body>
</html> 
```

如果使用 jQuery，则更改

```
<select id="actions" onchange="$('#frm1').attr('action',this.value)"> 
```

# php - CSS中的PHP-“如果页面在此目录中，则回显此”

> ID：11527316
> 
> 赞同：2
> 
> 时间：2012-07-17T17:01:23.710
> 
> 标签：php, css, directory

我在同一个托管包上有几个站点。它们都在不同的目录中。（即“htdocs/site1”）。我希望能够让他们都共享一个 CSS 文件。

我想知道是否有办法根据站点所在的目录更改某些元素的颜色。

理想情况下，我希望能够定义页面所在的目录以及每个目录使用的颜色。然后在我的 CSS 中执行以下操作：

`.button { color: <?php echo $color ?> ;}`

到每个获得颜色变化的元素。

这可能吗？如果可以，我该如何设置？

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T17:07:00.327

您可以根据目录向 body 标签添加不同的类：

```
<body class="<?php echo $dir; ?>"> 
```

其中`$dir`变量为每个目录赋予不同的值（比如说`$dir = 'site1'`，...）...

...然后有类似的东西：

```
.site1 #button { /*styles*/ }
.site2 #button { /*styles*/ }
.site3 #button { /*styles*/ } 
```

在您的 CSS 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:09:56.813

您可以将 CSS 类添加到 HTML 文档的 body 标记以确定站点。在 PHP 中，您必须找到一种将正确的站点写入文档的方法。您是否使用某种全局模板？

只是给你一个想法：

PHP：

```
<?php
  // some code

  // some logic to determine which site you are on - let's say ...
  $site = 'SITE1';
?><body class="<?php echo $site; ?>"><?php
  // more code
?> 
```

CSS：

```
body.SITE1 #button { color: #ff0000; }
body.SITE2 #button { color: #0000ff; }
body.SITE2 #button { color: #123456; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:05:41.333

您可以使用 php 动态生成 css 文件，您可以在其中

```
<?php
switch ($_SERVER['SERVER_NAME']) {
    case 'www.site1.com':
        $color = '#ff0000';
        break;
     case 'www.site2.com':
        $color = '...';
        break;
     ...
     default:
        $color = '...';
?>
.someclass { color : <?php echo $color ?>; } 
```

然而，这有点低效。您将构建一个 css 文件，只是为了每次更改一种颜色。更好的方法是将颜色更改简单地嵌入页面标题中作为内联样式。这样，您就不必让服务器像解析 PHP 脚本一样解析 CSS 文件，并且您可以将特定于站点的 css 覆盖放入站点标题中的内联样式中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T17:10:54.627

老实说，我建议您在 html 标签中添加一个类：

```
<html class="site1"> 
```

在你的 CSS 中，定义你的 CSS：

```
.site1 * .button1{ background:#f00;}
.site2 * .button1{ background:#f0f;}
.site3 * .button1{ background:#ff0;} 
```

[您可以在此处](http://www.digital-web.com/articles/generating_dynamic_css_with_php/)找到有关此主题的更多信息，以获取 PHP 方法。

# c++ - 未处理异常，访问冲突写入位置

> ID：11527318
> 
> 赞同：0
> 
> 时间：2012-07-17T17:01:33.180
> 
> 标签：c++, exception, access-violation, unhandled-exception

我正在使用 Visual Studio 2012 用 C++ 编写程序。该程序需要连接两个设备：压力传感器和控制电动平台的驱动器。当我在 main 中编写所有驱动程序代码时，程序运行良好。电机移动，压力传感器指示值。但是，我想简化程序并应用对象/类以使其更整洁、更易于管理。我正在使用 .lib 和 .dll 文件，无论出于何种原因，当我开始使用对象时，程序不喜欢从对象调用函数。

这是我得到的错误：

```
"Unhandled exception at 0x1000AAD2 (Ldcnlib.dll) in motors.exe: 0xC0000005: Access violation writing location 0x00000025." 
```

我在想也许我`#includes`错了？但我无法弄清楚。如果有人愿意看的话，我已经通过项目文件夹[Motors.rar](https://rapidshare.com/files/4187612837/motors.rar)提供了。如果你这样做了，程序会一直运行到

```
if((!driverA.setParameter()) || (!driverB.setParameter()) || (!driverC.setParameter())) 
```

主要。调试，我发现问题恰好发生在

```
int Driver::setParameter(){ 
   if(!StepSetParam(PicoAddr, Mode, MinSpeed, RunCurrent, HldCurrent, ADLimit, EmAcc))  
      return 0;
} 
```

在`driver.cpp`.

我将该代码从 main 中取出，当我尝试调用时，我会遇到同样的问题。`.loadTraj.`如果我尝试`!StepSetParam`直接在 main 中执行，绕过类，同样的错误。

（编辑：可能不言而喻，但程序根本无法运行，因为您没有必要的设备连接到 COM 端口，但我希望有人可以通过查看来提供帮助）代码：[主要](http://pastebin.com/jrGZ8caT) [stdafx.h](http://pastebin.com/nt2tsbC2) [驱动程序.h](http://pastebin.com/mVXtQtbF) [driver.cpp](http://pastebin.com/4Ed9cZav) [stepper.h](http://pastebin.com/hndiXfVm)

# ruby-on-rails-3 - Rails 3 Sunspot Solr 条件搜索仅适用于新记录

> ID：11527319
> 
> 赞同：0
> 
> 时间：2012-07-17T17:01:36.847
> 
> 标签：ruby-on-rails-3, solr, indexing, sunspot

我正在尝试执行查询并查找最近使用 sunspot_solr gem 在多个模型中创建的 20 条记录。目前它没有问题，但我想只为正在搜索的模型之一添加一些额外的验证。

目前在我的用户模型中，它列出了所有创建的新用户，但我只希望它列出已确认其电子邮件地址的用户。我正在使用 Devise 进行用户身份验证并使用活动记录来查找所有尚未确认的用户我会按照以下方式做一些事情：

```
User.where("confirmed_at is null") 
```

或者反过来测试相反的情况。我试图将它与我的 solr 搜索集成起来......

模型

```
#Unless the user being searched hasn't been confirmed...
searchable :unless=> proc { |user| user.confirmed_at == nil } do
    time :created_at
    time :confirmed_at
  end 
```

控制器

```
@updates = Sunspot.search(Upload,Help,User) do    
      without(:confirmed_at, nil)
      order_by(:created_at, :desc)
      paginate page: 1, per_page: 20
end 
```

但是，此添加的条件仅消除了在将条件添加到模型后创建的用户记录。我不完全确定索引是如何工作的，但它似乎正在缓存未应用新添加条件的旧信息。我可以通过创建一个新的用户记录来确认这一点，我立即注意到在我验证电子邮件地址之前它不会被索引。

**我试过的：**

1.  停止和重新启动服务器
2.  停止服务器并尝试停止并重新启动 solr 但这产生了 PID 找不到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:11:12.287

在阅读了更多关于索引的内容后，我证实了我的怀疑并发现我必须重新索引我的搜索。为此，我查看了[Sunspot 自述文件](https://github.com/sunspot/sunspot)并找到了这一行：

```
bundle exec rake sunspot:solr:reindex 
```

我有一个坏习惯，在我什至不了解它们的作用之前就尝试使用技术......

# java - Linux 上 Java 和 Zeroconf (avahi) 的多播问题

> ID：11527321
> 
> 赞同：1
> 
> 时间：2012-07-17T17:01:39.547
> 
> 标签：java, virtualization, multicast, zeroconf, avahi

我正在尝试为 VM 开发基于 Java 的解决方案，该解决方案在开始时不知道他们应该从列表中自行选择哪个静态 IP 地址。我对解决方案的想法是：

1.  使用 Zeroconf/avahi 为 VM 选择 IP 地址
2.  虚拟机使用多播广播它们的 MAC 地址。每个虚拟机都知道对等 MAC 地址的预期数量。
3.  一旦所有虚拟机都收到了所有其他 MAC 地址，它们就会按字母顺序对它们进行排序，并根据其 MAC 地址在列表中的位置（IP.1、IP.2 等）选择一个 IP。

***请注意 DHCP 在任何情况下都无法在此环境中使用，我正在尝试找到解决此问题的方法***

**我想帮助解决这个异常。如果您能提供帮助，请告诉我。谢谢！！**

```
java.net.SocketException: No such device
    at java.net.PlainDatagramSocketImpl.join(Native Method)
    at java.net.AbstractPlainDatagramSocketImpl.join(AbstractPlainDatagramSocketImpl.java:178)
    at java.net.MulticastSocket.joinGroup(MulticastSocket.java:319) 
```

这是我正在使用的 Java 代码：

```
InetAddress address = InetAddress.getByName(mIPAddress);
SocketAddress addr = new InetSocketAddress(address, mPort);
MulticastSocket multiSocket = new MulticastSocket(addr);
multiSocket.joinGroup(address); 
```

这是 /sbin/ifconfig 的输出：

```
eth0      Link encap:Ethernet  HWaddr 08:00:27:1D:BB:21  
      inet6 addr: fe80::a00:27ff:fe1d:bb21/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:152 errors:0 dropped:0 overruns:0 frame:0
      TX packets:182 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000 
      RX bytes:35179 (34.3 KiB)  TX bytes:36383 (35.5 KiB)

eth0:avahi Link encap:Ethernet  HWaddr 08:00:27:1D:BB:21  
      inet addr:169.254.4.55  Bcast:169.254.255.255  Mask:255.255.0.0
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1

lo        Link encap:Local Loopback  
      inet addr:127.0.0.1  Mask:255.0.0.0
      inet6 addr: ::1/128 Scope:Host
      UP LOOPBACK RUNNING  MTU:16436  Metric:1
      RX packets:2957 errors:0 dropped:0 overruns:0 frame:0
      TX packets:2957 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:0 
      RX bytes:4448536 (4.2 MiB)  TX bytes:4448536 (4.2 MiB) 
```

**编辑**：添加路由表：

```
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
169.254.0.0     0.0.0.0         255.255.0.0     U     0      0        0 eth0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:23:54.003

最终加入多播组的接口是通过路由表决定的，因此您需要一条默认路由，或者一条与您的多播地址匹配的特定路由。

# mysql - 存储 HTML 文件

> ID：11527322
> 
> 赞同：1
> 
> 时间：2012-07-17T17:01:42.480
> 
> 标签：mysql, html, sql, filesystems, ext4

我们有大约 6000 万个压缩格式的网页。我们想单独解压缩和使用这些文件。

这是我的问题！

首先，如果我将它们解压缩到文件系统中，FS 会处理这么多文件吗？我的文件系统是 ext4。（我有 4 个不同的文件系统，所以我可以将它们之间的数据划分为每个文件系统的 15 M 页）

其次，将这些文件存储到关系数据库中会是更好的选择吗？假设清理 html 文本的所有麻烦都在将它们插入数据库之前完成。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:11:45.027

如果将它们提取到单个目录中，则可能会超过该文件夹中分配的最大索引。如果您将它们提取到多个目录中，您会更好。

6000 万绝对是一个公平的数字，如果您打算对它们进行任何索引或搜索，那么数据库将是您的最佳选择，您可以使用类似的方法对文件进行索引，`lucene`这完全取决于您想要对文件执行的操作*之后*它们已被提取。

我目前在大型用户网站上的图像有类似的问题，我解决这个问题的方法是给每个图像一个 GUID，并为 guid 中的每个字节分配它到不同的目录，然后是子目录下的下一个字节（减少到 8 个字节）如果我的填充率上升，我将创建更多的子目录来补偿，这也意味着我可以将它分布在不同的网络存储盒中。

# algorithm - 找到覆盖二进制矩阵的最小矩形集

> ID：11527327
> 
> 赞同：3
> 
> 时间：2012-07-17T17:02:11.620
> 
> 标签：algorithm, matrix

假设我有以下二进制矩阵：

```
0 0 0 1 1 1 0
0 0 0 1 1 1 0
0 0 0 1 1 1 0
1 1 1 1 1 1 1
1 1 1 1 1 1 1
1 1 1 1 1 1 1
0 0 0 1 1 1 0
0 0 0 1 1 1 0
0 0 0 1 1 1 0 
```

我想找到一组平行于 x 和 y 轴的矩形，它们`1` *至少*覆盖一次，并且不覆盖一个`0`具有最小基数（矩形数量最少）的矩形。在上面的示例中，这将是矩形`((0, 3), (6, 5))`和`((3, 0), (5, 8))`（符号形式为`(topleft, bottomright)`） - 最小的解决方案是使用两个矩形。

我之前的尝试是找到面积最大的仅覆盖`1`' 的矩形，将该矩形添加到集合中，然后将所有这些标记`1's`为`0`'，直到所有`1`' 消失。虽然这个集合会覆盖每个 1 而不是单个`0`，但它不一定具有最小的基数（这个算法在上面的例子中会失败）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:11:57.497

我认为你应该用 2 而不是 0 替换覆盖的 1。这样，您可以在覆盖 1 时包含 2，但仍然不覆盖任何 0。

这是我想出的：

```
#include <stdio.h>
#include <stdlib.h>

struct board {
  int **data;
  int w,h;
};

int  load_board(char *, struct board *);
void print_board(struct board *);

int  max_height_with_fixed_w(struct board *board, int i, int j, int w) {
  int jj = -1, ii;
  if (board->data[j][i] != 0) {
    for (jj = j; jj < board->h && board->data[jj][i] != 0; jj++) { 
      for (ii = i; ii - i < w; ii++) {
        if (board->data[jj][ii] == 0)
          return jj - j;
      }
    }
    printf("maximum height = %d\n", jj);
  }
  return jj - j;
}

void find_largest_rect_from(
    struct board *board, 
    int i, int j, int *ei, int *ej) {
  int max_w = 0, max_h = 0, max_a = 0;
  *ei = *ej = -1;
  for (max_w = 0; max_w < board->w - i && 
      (board->data[j][i + max_w] != 0); 
      max_w++) {
    int max_aa;
    int max_hh = max_height_with_fixed_w(board, i, j, max_w + 1);
    if (max_hh > max_h) {
      max_h  = max_hh; 
    }
    max_aa = max_hh * (max_w + 1);
    printf("  area: %d x %d = %d\n", max_hh, max_w + 1, max_aa);
    if (max_aa > max_a) {
      max_a = max_aa;
      *ei = i + max_w;
      *ej = j + max_hh - 1; 
    }
  }
  printf("max width : %d\n", max_w);
  printf("max height: %d\n", max_h);
  printf("max area  : %d\n", max_a);
}

int main(int arc, char **argv) {
  struct board board;
  int jj, ii, i = 0, j = 0;
  int total_rects = 0;
  if(load_board(argv[1], &board)) return 1;
  print_board(&board);
  for (j = 0; j < board.h; j++) {
    for (i = 0; i < board.w; i++) {
      if (board.data[j][i] == 1) {
        find_largest_rect_from(&board, i, j, &ii, &jj);
        printf("largest from %d, %d ends at %d,%d\n", i, j, ii, jj);
        int marki, markj;
        total_rects++;
        for (markj = j; markj <= jj; markj++) {
          for (marki = i; marki <= ii; marki++) {
            board.data[markj][marki] = 2;
          }
        }
        print_board(&board);
      }
    }
  }
  printf("minimum %d rects are required\n", total_rects);
  return 0;
}

int load_board(char *fname, struct board *board) {
  FILE *file = fopen(fname, "r");
  int j,i;
  if (!file) return 1;
  fscanf(file, "%d %d", &board->w, &board->h);
  board->data = (int**)malloc(sizeof(int*)*board->h);
  for (j = 0; j < board->h; j++) {
    board->data[j] = (int*)malloc(sizeof(int)*board->w);
    for (i = 0; i < board->w; i++) {
      fscanf(file, "%d", &board->data[j][i]);
    }
  }
  return 0;
}

void print_board(struct board *board) {
  int i,j;
  printf("board size: %d, %d\n", board->w, board->h);
  for (j = 0; j < board->h; j++) {
    for (i = 0; i < board->w; i++) {
      printf("%d ", board->data[j][i]);
    } printf("\n");
  }
} 
```

示例输入 1：

```
7 9
0 0 0 1 1 1 0
0 0 0 1 1 1 0
0 0 0 1 1 1 0
1 1 1 1 1 1 1
1 1 1 1 1 1 1
1 1 1 1 1 1 1
0 0 0 1 1 1 0
0 0 0 1 1 1 0
0 0 0 1 1 1 0 
```

示例输入 2：

```
7 7
0 0 0 1 0 0 0
0 0 1 1 1 0 0
0 1 1 1 1 1 0
1 1 1 1 1 1 1
0 1 1 1 1 1 0
0 0 1 1 1 0 0
0 0 0 1 0 0 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:10:52.693

算法的想法：

*   只要`1`矩阵中有 s 就可以：
*   对于`1`没有在其`1`上方且不必`1`在其左侧的每个，请执行以下操作：
*   贪婪：从这里开始`1`，沿着对角线向右和向下走，只要`1`途中有 s - 创建一个矩形并将创建的矩形的 s 更改`1`为`0`s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:17:22.107

我会选择一种算法来选择点并扩展，直到它消耗所有可能的空间，然后再选择更多，直到网格上的所有点都被消耗掉。

对于您的示例，假设我们正在消耗 1s。

我会选择 (0,3)，最左边的 1 的最上面。我的矩形将从 0,0 开始。我会向右和向下扩展它，直到它增长到 6,2 的大小。此时，我会将这些点标记为已占用。

然后我会选择另一个点，比如 (3,0)，矩形大小为 0,0。我会一直向下生长，直到它占据最大的可用空间，大小为 2.6。

考虑以下：

```
0 0 0 1 0 0 0
0 0 1 1 1 0 0
0 1 1 1 1 1 0
1 1 1 1 1 1 1
0 1 1 1 1 1 0
0 0 1 1 1 0 0
0 0 0 1 0 0 0 
```

您可以轻松确定对于任何随机起点，它总是需要 4 个矩形。

为了将点标记为“已占用”，您应该将它们标记为与标记为“不可消耗”的点不同。然后，您可以区分不可消耗的（不能扩展为）和“占用的”（可以扩展为，但不必是，因为它们已经存在）。

# ruby-on-rails - Rails 3 group_by 关联模型

> ID：11527329
> 
> 赞同：0
> 
> 时间：2012-07-17T17:02:15.317
> 
> 标签：ruby-on-rails, activerecord, group-by, associations

我一直在尝试通过关联模型对索引中的模型进行分组。

这是我所拥有的：

我有模型 location.rb

```
 belongs_to :continent 
```

属于大陆.rb

```
 has_many :locations 
```

位置控制器.rb

```
 def index
    @locations = Location.find(:all)
  end 
```

在我的索引页面上

```
<% @locations.group_by(&:continent_id).each do |continent, locations| %>

    <li><%= continent %></li> 
  <% locations.each do |location| %>    
    <%= location.name %> 
  <% end %>
<% end %> 
```

我想按大陆对位置进行分组。上面的代码有效，但我只需要显示大陆的名称，现在它只显示 id nr。

最好的方法是什么？我是新手，我知道这一定很容易，但我有点卡住了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:35:57.330

首先，在我看来，您列出的是大陆，而不是位置（以保持其平静）。所以我会为大陆控制器改变它。在大洲控制器中：

```
def index
  @continents = Continent.find(:all)
end 
```

在大洲/index.html.erb 中：

```
<% @continents.each do |continent| %>
  <li><%= continent.name %></li> 
  <% continent.locations.each do |location| %>    
    <%= location.name %> 
  <% end %>
<% end %> 
```

# android - 上传图片到服务器 ImageSwitcher

> ID：11527336
> 
> 赞同：0
> 
> 时间：2012-07-17T17:02:58.653
> 
> 标签：android

我是为 Android 编写应用程序的初学者。

我需要一个“ImageSwitcher”并用来自服务器队列的图像填充它。在来问之前，我已经在互联网上进行了很多研究。有人会发布一些代码示例或给出一些关于搜索内容的提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:11:35.043

你想要做什么 创建这样的视图

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
 android:orientation="vertical"  
 android:layout_width="fill_parent"  
 android:layout_height="fill_parent">  

  <Gallery  
       android:id="@+id/gallery"  
       android:layout_width="fill_parent"  
       android:layout_height="wrap_content" />  

  <ImageSwitcher  
       android:id="@+id/image_switcher"  
       android:layout_width="fill_parent"  
       android:layout_height="fill_parent" />  
</LinearLayout> 
```

然后，在某种 AsyncTask 的幕后，下载图像，然后显示它们。该代码并不太难。

github上的这个[项目](https://github.com/thest1/LazyList)也可能有用。在列表视图中延迟加载图像似乎很好，但我敢打赌它可以很容易地修改为加载画廊。

# objective-c - 在 setContentOffset:animated: 之后滚动被禁用，我做错了什么？

> ID：11527339
> 
> 赞同：2
> 
> 时间：2012-07-17T17:03:08.703
> 
> 标签：objective-c, ios, uiscrollview

我想以编程方式滚动特定数量的像素。更改 scrollViewDidScroll 方法中的内容偏移量我可以做到这一点，但是当它停止在所需的点时它会停止滚动，我不能让它向任何方向滚动。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView{
    if (floor(scrollView.contentOffset.x) < 0) {
        [scrollView setContentOffset:CGPointMake(-141, 0) animated:YES];
} 
```

另外，我想要做的是能够尽可能多地向左和向右水平滚动，关于如何实现这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T07:58:12.927

我发现您需要将这两个属性都设置为 true。

```
 self.tableView.bounces = true;
       self.tableView.scrollEnabled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:32:06.273

我想你想要使用的是`scrollRectToVisible:animated:`

# web-services - AS3 flash 无法在 Facebook 应用程序上调用 http 或 https 网络服务

> ID：11527341
> 
> 赞同：2
> 
> 时间：2012-07-17T17:03:12.307
> 
> 标签：web-services, flash, https, facebook-apps

我有一个 iframe facebook 应用程序有一个我无法解决的问题，因为我无法理解它的来源。在 iframe 上有一个 flash 电影（在 AS3 中），它对 web 服务进行 https 调用（它基本上调用一个 https 地址并等待一个 xml 响应）。90% 的情况都很好，但有些客户无法运行任何电话，我不明白为什么。

他们安装了应用程序，加载了 Flash 电影，但似乎有什么东西阻止了 Flash 调用 https 地址。

你能想到任何理由吗？防病毒软件？浏览器上的严格安全设置？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:50:36.743

如果在 XML 文件上设置了 Pragma:no-cache 或 Cache-control:no-cache HTTP 标头，则在 Internet Explorer 中通过 SSL 连接加载 Flash 中的 XML 文件会失败。

这是一篇有用的博客文章： http: [//www.blog.lessrain.com/flash-loading-and-browser-cache-test-suite/](http://www.blog.lessrain.com/flash-loading-and-browser-cache-test-suite/)

# c# - MethodInfo.Invoke 参数顺序

> ID：11527345
> 
> 赞同：2
> 
> 时间：2012-07-17T17:03:14.180
> 
> 标签：c#, reflection

我正在尝试使用反射调用方法。

像这样的东西：

```
method.Invoke(instance, propValues.ToArray()) 
```

问题是没有办法确保参数数组的顺序正确。有没有办法通过名称来具体说明哪个参数在哪个参数上？还是我真的必须制作自定义活页夹？如果是这样，任何人都可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T17:12:05.413

> 有没有办法通过名称来具体说明哪个参数在哪个参数上？

好吧，您按参数顺序指定它们。因此，如果您想将特定值映射到特定名称，您应该获取参数列表[`method.GetParameters`](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getparameters.aspx)并以这种方式映射它们。例如，如果您有一个`Dictionary<string, object>`带有参数的：

```
var arguments = method.GetParameters()
                      .Select(p => dictionary[p.Name])
                      .ToArray();
method.Invoke(instance, arguments); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:46:12.140

**编辑：**这个答案侧重于参数类型而不是参数名称。如果代码被混淆（或具有不同的参数名称），那么很难映射 Jon Skeet 提供的解决方案。

无论如何，我一直在玩这个......这对我来说最有效（不知道参数名称）：

```
 public object CallMethod(string method, params object[] args)
    {
        object result = null;

        // lines below answers your question, you must determine the types of 
        // your parameters so that the exact method is invoked. That is a must!
        Type[] types = new Type[args.Length];
        for (int i = 0; i < types.Length; i++)
        {
            if (args[i] != null)
                types[i] = args[i].GetType();
        }

        MethodInfo _method = this.GetType().GetMethod(method, types);

        if (_method != null)
        {
            try
            {
                _method.Invoke(this, args);
            }
            catch (Exception ex)
            {
                // instead of throwing exception, you can do some work to return your special return value

                throw ex;
            }
        }

        return result;

    } 
```

所以，你可以调用上面的函数：

```
 object o = CallMethod("MyMethodName", 10, "hello", 'a'); 
```

上面的调用应该能够使用匹配的签名调用此方法：

```
public int MyMethodName(int a, string b, char c) {
   return 1000;
} 
```

请注意，他上面的例子是在 ' `this`'的范围内

# azure - 新门户上的 SQL Azure 防火墙规则

> ID：11527350
> 
> 赞同：5
> 
> 时间：2012-07-17T17:03:29.593
> 
> 标签：azure, azure-sql-database

我们已经使用 SQL Azure 大约一年了。为了直接访问 Azure 之外的服务器，您需要在 SQL Azure 中添加防火墙规则。那挺好的。

旧的门户[有办法做到这一点](http://blogs.msdn.com/b/windowsazure/archive/2011/09/09/what-s-new-in-sql-azure-management-portal-part-ii-of-ii.aspx)，即使它是讨厌的 Silverlight，也很容易。

然而，据我所知，旧的 Silverlight 门户已退役。而且新门户没有办法管理防火墙规则。我错过了什么吗？

微软仍然说您可以在此处访问“当前门户”，但单击它会将您带到新门户：[https ://www.windowsazure.com/en-us/home/features/portals/](https://www.windowsazure.com/en-us/home/features/portals/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T17:24:00.347

在新门户中，单击：

1.  SQL 数据库
2.  在 SERVER 列下的数据网格中，单击您的服务器名称。
3.  单击顶部的配置选项卡。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-05T21:36:36.167

在新的 Azure 门户上，您可以：

1.  “所有资源”
2.  按名称搜索您的数据库
3.  选择您的数据库
4.  “工具”
5.  “在 Visual Studio 中打开”
6.  “配置你的防火墙”
7.  “添加客户端 IP”

[![在新 Azure 门户中将新 IP 地址添加到防火墙中的步骤](../Images/68aa0737d7a356032d51f69e7a33191f.png)](https://i.stack.imgur.com/lFZf2.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-15T14:14:24.043

现在有一个新按钮：

[![设置防火墙规则](../Images/54e5036b0a1fb6d461a9af0d9622cd76.png)](https://i.stack.imgur.com/8JteC.png)

# ios - SQL WHERE IN 子句不起作用 - FMDB - 传递逗号分隔的字符串

> ID：11527352
> 
> 赞同：2
> 
> 时间：2012-07-17T17:03:41.573
> 
> 标签：ios, sqlite, where, fmdb, clause

我已经搜索了所有问题，但还没有找到答案。我最接近的是[通过 FMDB 将数组传递给 sqlite WHERE IN 子句？](https://stackoverflow.com/questions/8383684/passing-an-array-to-sqlite-where-in-clause-via-fmdb). 但是，建议的答案似乎不起作用。该命令不会引发任何错误，但它也不会执行预期的操作（例如 DELETE）。这就是我想要做的：

```
[myDB executeUpdateWithFormat:@"DELETE FROM table WHERE row_id IN (%@)",rowIdsToBeDeleted]; 
```

rowIdsToBeDeleted 是一个逗号分隔的 NSString 包含 rowIds 作为 NSNumber 对象，例如

```
1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012 
```

我什至尝试使用 executeUpdate，但没有运气。你们中的任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:08:54.223

你可以简单地做：

```
[myDB executeUpdate:[NSString stringWithFormat:@"DELETE FROM table WHERE row_id IN (%@)",rowIdsToBeDeleted]]; 
```

* * *

尽管人们可能会从方法名称中推断出什么，但该`executeUpdateWithFormat`方法不*执行*传统的`printf`- 样式格式。在幕后，它真正做的是遍历格式字符串，用`?`占位符替换 printf 样式的字符串，然后尝试使用适当的`sqlite3_bind_xxx`函数将值绑定到这些占位符。

这种实现`executeUpdateWithFormat`引入了各种微妙的问题。（因此，它很可能在未来的 FMDB 版本中被弃用。）在这种特殊情况下，问题是`sqlite3_bind_xxx`不能将逗号分隔的字符串绑定为要绑定到单个`?`占位符的值数组。

通常应该避免使用`stringWithFormat`（或 Swift 字符串插值）来构建要传递给 FMDB 或 SQLite 的 SQL 语句，因为如果操作不当，您可能会受到 SQL 注入攻击和/或如果您未能正确转义字符串值则失败。但是这个例子，你想要测试某个数值是否在一组数值中，是该规则的一个例外，你可以使用`stringWithFormat`如上所示。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-17T17:07:52.730

如果该方法类似于 NSPredicate 语法，只需删除括号（它们会为您处理（并传入集合而不是字符串）：

```
NSArray *ids = [rowIdsToBeDeleted componentsSeparatedByString:@","];
[myDB executeUpdateWithFormat:@"DELETE FROM table WHERE row_id IN %@",ids]; 
```

# 编辑

另外，通常你传入一个实际的集合对象（不是字符串）......上面经过编辑以反映

# oauth - 单击时间线中的 OpenGraph 链接无法通过“验证验证码错误”进行身份验证

> ID：11527353
> 
> 赞同：0
> 
> 时间：2012-07-17T17:03:42.830
> 
> 标签：oauth, facebook-opengraph, facebook-authentication, facebook-oauth, facebook-timeline

我正在尝试通过单击 facebook 中的 opengraph 操作来验证访问我网站的用户。

我已经使用以下代码成功生成了操作。这成功地出现在我的时间线上。到目前为止，一切都很好。

```
require 'cgi'

client_id ="CLIENT_ID"
client_secret = "CLIENT_SECRET"

recipe = "http://foodonthetable.shadr.us/recipes/1007-spanish-chicken-and-rice"
access_token = "LONGACCESSTOKEN"

# PUBLISH
result = `curl -F access_token=#{access_token} -F recipe=#{recipe} https://graph.facebook.com/me/foodonthetable_mrh:plan_to_cook`
puts result 
```

当我单击时间轴中的链接时，我会转到以下 URL。这就是我开始遇到问题的地方。基本上，我想识别通过此链接进入的用户并将他们登录（或创建一个新用户）。我已经打开了经过身份验证的推荐，并且我正在`code`按预期接收参数。

```
http://foodonthetable.shadr.us/recipes/1007-spanish-chicken-and-rice?fb_action_ids=384156608318085&fb_action_types=foodonthetable_mrh%3Aplan_to_cook&fb_source=timeline_og&action_object_map=%7B%22384156608318085%22%3A10151004406923956%7D&code=AQAPExNw7MHkxcLTEi5L24iD79pVa-WYxyhBA_bhdWLCM0PCGDuPjh1WqmAyd3_O3_LSjYzPawrinHNP3nv9BCMB_XuTnr8De8xQ2AwXqCaeHUzZUPm2MPyQ_eodOC9-YtjkvXm_PzRX3JG58khalT3AJjVuZvKHn5hWGDSohXLRbHGxW-vOg_Whm3mt_WUkdd0#_=_ 
```

但是，当我尝试`auth_token`使用此代码时，我无法做到。我已经尝试使用`redirect_uri`可能是问题的几个不同版本的想法（基于其他帖子），但似乎没有任何效果。

```
redirect_uri = "http://foodonthetable.shadr.us/recipes/1007-spanish-chicken-and-rice"
redirect_uri = "http://foodonthetable.shadr.us/facebook_connect/connect"

code = "AQAPExNw7MHkxcLTEi5L24iD79pVa-WYxyhBA_bhdWLCM0PCGDuPjh1WqmAyd3_O3_LSjYzPawrinHNP3nv9BCMB_XuTnr8De8xQ2AwXqCaeHUzZUPm2MPyQ_eodOC9-YtjkvXm_PzRX3JG58khalT3AJjVuZvKHn5hWGDSohXLRbHGxW-vOg_Whm3mt_WUkdd0"

result = `curl -F client_id=#{client_id} -F redirect_uri=#{redirect_uri} -F client_secret=#{client_secret} -F code=#{code} https://graph.facebook.com/oauth/access_token`
puts result 
```

无论我在这里做什么，我总是收到以下错误：

```
{"error":{"message":"Error validating verification code.","type":"OAuthException","code":100}} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:01:11.373

这确实解决了它。

```
redirect_uri = request.url.split('&code=').first 
```

# javascript - IE中的XMLHttpRequest和setRequestHeader返回错误

> ID：11527357
> 
> 赞同：1
> 
> 时间：2012-07-17T17:04:06.533
> 
> 标签：javascript, json, cross-domain, xmlhttprequest

我尝试发出跨域 POST 请求并取回 JSON 编码的响应，

除 IE 7、8、9 外，一切正常。我尝试了这些解决方案，但出现此错误：

> *对象不支持属性或方法“setRequestHeader”*

**函数 createXMLHTTPObject() - 尝试 1**

```
function createXMLHTTPObject() {
    var xmlhttp = false;
        var is_IE = window.XDomainRequest ? true : false;
        if (is_IE) {
            xmlhttp = new window.XDomainRequest();
        } else {
            if (window.XMLHttpRequest) {
                xmlhttp = new XMLHttpRequest();
            } else {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
        }
    return xmlhttp;
} 
```

**函数 createXMLHTTPObject() - 尝试 2**

```
var XMLHttpFactories = [
    function() { return new XMLHttpRequest() },
    function() { return new ActiveXObject("Msxml2.XMLHTTP") },
    function() { return new ActiveXObject("Msxml3.XMLHTTP") },
    function() { return new ActiveXObject("Microsoft.XMLHTTP") }
];

function createXMLHTTPObject() {
    var xmlhttp = false;
    for (var i=0; i<XMLHttpFactories.length; i++) {
        try {
            xmlhttp = XMLHttpFactories[i]();
        }
        catch(e) {
            continue;
        }
        break;
    }
    return xmlhttp; 
} 
```

**函数 send()**
在这里它返回错误，在：`req.setRequestHeader('User-Agent', 'XMLHTTP/1.0');`

```
function send(postData, callback) {
    var url = 'http://domain.com/ajax-processing.php'; //url overlap
    var req = createXMLHTTPObject();
    if (!req) return;
    var method = (postData) ? "POST" : "GET";
    req.open(method, url, true);
    req.setRequestHeader('User-Agent', 'XMLHTTP/1.0');
    if (postData) {
        req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    }
    req.onreadystatechange = function() {
        if (req.readyState != 4) return;
        if (req.status != 200 && req.status != 304) {
            console.log('HTTP error ' + req.status);
            return;
        }
        callback(req);
    }
    if (req.readyState == 4) return;
    req.send(postData); 
} 
```

**这里我调用发送函数**

```
var insert = 'id=1&type=insert';
CLib.send(insert, function(data) {
    console.log(data);
}); 
```

是否可以在 IE 中进行跨域请求？
我怎样才能在不使用任何其他库（如 jQuery）的情况下留下这部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:41:22.640

非常感谢@Esailija，他告诉我我无法使用 XDomainRequest 设置请求标头。

所以我也尝试了其他方法和解决方案，最后我用一种更简单的方法回来了：
将 POST 请求更改为 GET，并且经过一些小改动后一切正常。

# ruby-on-rails - Ruby on Rails - 使用自定义操作设置自定义路由

> ID：11527360
> 
> 赞同：1
> 
> 时间：2012-07-17T17:04:46.167
> 
> 标签：ruby-on-rails, routes, custom-action, custom-routes

我是使用 rails 3.2.3 的 RoR 初学者。

我有一个产品资源和一个嵌套的可用性资源。

我的路线是：

```
/products/:product_id/availabilities 
```

效果很好。

但是，我的可用性模型允许在确切日期设置产品的价格，例如：今天产品“x”将具有“y”可用性（它是一个整数）和“z”价格（价格也是一个属性可用性模型）。

我的问题是，我现在想添加一个允许修改价格的页面（**无需**创建新的价格模型），类似于我的可用性页面。我只使用 index 操作，因为它将显示该唯一选定产品的所有可用性。

如何创建如下路线：

```
/products/:product_id/availabilities/prices 
```

我尝试将其添加到我的路线 rb 中：

```
 match '/products/:id/availabilities/prices', :action => 'indexP', :via => [:get], :controller => 'prices'
 match '/products/:id/availabilities/prices', :action => 'createP', :via => [:post], :controller => 'prices' 
```

值得注意的是，我正在使用 a`prices controller`与相同的可用性模型进行交互，但这应该不是问题。

我也在其中创建`prices controller`了`indexP`and`createP`动作。在我的可用性视图中，我创建了一个`indexP.html.erb`以区别于`index.html.erb`包含可用性的常规。

当我跑步时，`rake routes`我得到：

```
$ rake routes | grep prices
                            GET    /products/:id/availabilities/prices(.:format)
                            POST   /products/:id/availabilities/prices(.:format) 
```

这是伟大的。但是，当我访问该 URL 时，我得到：

```
NoMethodError in Availabilities#show
{"product_id"=>"46",
 "id"=>"prices"} 
```

为什么它执行该`show`操作而不是我的自定义匹配？

*注意*：我**不**喜欢这样的东西：/products/:id/availabilities/:id/prices

只是：/products/:id/availability/prices

我知道这可能是一个愚蠢的问题，但我希望有任何提示可以帮助我了解正在发生的事情。

提前致谢，问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:25:08.007

您的产品型号设置如何？

如果是这样的：

```
resources :products do
  resources :availabilities
end 
```

路由所做的第一个匹配转到可用性控制器的显示操作。

您在这里有两个选择。限制可用性控制器范围，使用：

```
resources :products do
  resources :availabilities, :only => [:index]
end 
```

或将您的自定义匹配放在此块之前

```
match '/products/:id/availabilities/prices', :action => 'indexP', :via => [:get], :controller => 'prices'
match '/products/:id/availabilities/prices', :action => 'createP', :via => [:post], :controller => 'prices' 
```

请注意，这条路线并不平静。这可能会让你以后遇到麻烦:)

希望这可以帮助。

# php - 卸载/重新安装驱动器后 PHP file_put_contents() 函数失败

> ID：11527364
> 
> 赞同：1
> 
> 时间：2012-07-17T17:04:57.950
> 
> 标签：php, macos, nas

我有一个在 OSX 系统上运行的 CLI PHP 脚本，它将文件保存到连接的 NAS 驱动器。如果 NAS 已卸载然后重新安装，则该`file_put_contents()`函数将失败并返回错误：

> 警告：file_put_contents(/Volumes/XXX/XXX.file) [/phpmanual/function.file-put-contents]：打开流失败：没有这样的文件或目录

我`clearstatcache()`在写入之前清除了文件缓存。驱动器安装清晰。

重新启动脚本没有帮助。到目前为止，唯一可行的方法是重新启动机器。

有人对如何让 PHP “重新识别”连接的卷有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:31:21.393

经过一番认真的挖掘，我发现它与文件系统有关，而不是 PHP。我通过运行以下命令解决了它：

```
exec('mkdir /Volumes/Mount_Point;
    mount_afp afp://user:pass@192.168.0.X/Mount_Point /Volumes/Mount_Point'); 
```

这会重新建立必要的链接（？），以便 PHP 脚本可以再次读取它。从 Finder 重新安装它不起作用。

# c# - 如何获取 WCF 的协议映射列表？

> ID：11527366
> 
> 赞同：0
> 
> 时间：2012-07-17T17:05:09.150
> 
> 标签：c#, .net, vb.net, wcf

我想知道是否有人知道如何获取 WCF 的协议映射列表（类似于***ServiceHost.AddDefaultEndpoints***函数为自己所做的），无论映射来自何处（machine.config、app.config、web.config ， ETC..）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:25:36.057

我找到了解决方案。我在这里分享给其他人：

```
Dim pms As ProtocolMappingSection = CType(ConfigurationManager.GetSection("system.serviceModel/protocolMapping"), ProtocolMappingSection)
Dim pmc As ProtocolMappingElementCollection = pms.ProtocolMappingCollection

For Each pme As ProtocolMappingElement In pmc
    If String.Compare(pme.Scheme, uri.Scheme, True) = 0 Then
        ' Do something
        Exit For
    End If
Next 
```

# php - 如果行为空，PHP Mysql DELETE

> ID：11527369
> 
> 赞同：0
> 
> 时间：2012-07-17T17:05:14.897
> 
> 标签：php, mysql, sql-delete

我的桌子上有这 4 个字段。p1 p2 p3 p4 gameID 是行表。所以只有那一行应该被删除。因此，当它更新时，`playe1 = ''`它将删除行表。

请注意，仅当 p1 p2 p3 p4 为空时才会删除。

我的代码是否正确？它将行 player1 更新为空，但没有删除。

```
if($p1 == $email_val){
    $sql_update_player = mysql_query("UPDATE game SET player1='' WHERE gameID='$gameID' ") or die ( mysql_error() );
$stat = "1";
    if(empty($p1) and empty($p2) and empty($p3) and empty($p4) ){
        $sqlDelGame = mysql_query("DELETE FROM game WHERE gameID='$gameID'") or die ( mysql_error() );
        echo "Game deleted";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:55:26.747

如果你想删除还没有任何玩家的游戏，你可以运行：

```
DELETE FROM game
WHERE player1 = ''
  AND player2 = ''
  AND player3 = ''
  AND player4 = ''; 
```

# java - 如何在 Excel 中对动态创建的单元格区域的列求和

> ID：11527372
> 
> 赞同：3
> 
> 时间：2012-07-17T17:05:41.523
> 
> 标签：java, excel, export-to-excel, excel-formula, jxls

在 Excel 电子表格中使用 jxls forEach 循环创建了许多行。在这些行中的每一行中，都有一组列，这些列也是使用 forEach 动态创建的。所以基本上一个单元格变成了一个由几个单元格向外和几个单元格组成的范围。在每个生成的单元格列的底部，我想要一个求和公式来总结该列。如果我将 SUM(C3) 放在变成许多单元格的单元格中，我会收到一个错误，即你不能 SUM(C3:E3:C5:E5) 或类似的东西。

根据官方页面：[http](http://jxls.sourceforge.net/reference/formulas.html) ://jxls.sourceforge.net/reference/formulas.html，当单元格变成一个向下的范围时，jxls 足够聪明，可以调整你的总和，也可以跨越，但不是两者兼而有之。

我还必须提到，我希望论坛坚持单元格，而不仅仅是产生总和，所以如果我编辑上面的单元格，它将在下面的总数中更新。

谁能帮我解决这个问题？

![这是我正在谈论的一个例子。 我知道有错误，因为我更改了一些文本，但希望你能明白。](../Images/87a18a82e3d2333737c2085f8b844a59.png)

此外，使用 r1c1 引用不起作用，因为当我导出时，A1 的默认引用是在 excel 中设置的，并且将为使用它的任何人设置这种方式。我尝试设置启动宏以使用 r1c1 单元格引用，但无济于事。

我使用以下公式解决了它： =SUM(D13:INDIRECT("R[-1]C",0)) 其中初始和最终单元格可以使用间接（）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T10:59:37.137

我是这样做的：

首先，将 org.apache.poi.ss.util.CellReference 对象添加到您的转换器 bean：

```
Map<String, Object> beans = new HashMap<>();
...
beans.put("cellRef", new CellReference(0,0));
...
Workbook wb = transformer.transformXLS(xlsInputStream, beans); 
```

然后，在您的 xls 模板中使用以下公式：

```
${hssfCell.setCellFormula("SUM(" + cellRef.convertNumToColString(hssfCell.columnIndex) + "2:" + cellRef.convertNumToColString(hssfCell.columnIndex) + hssfCell.rowIndex + ")")} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:02:54.617

只是为了澄清您正在寻求解决方案，如果我理解正确，您正在寻找一个公式来添加 c3:e3 和（在同一公式中）c5:e5 的范围？如果是这样，请尝试：

=sum(c3:e3)+sum(c5:e5)

这是你正在尝试的吗？

# java - 在 Java 中使用 AES 256 加密 RSA 私钥

> ID：11527374
> 
> 赞同：6
> 
> 时间：2012-07-17T17:05:43.827
> 
> 标签：java, encryption, aes, rsa, private-key

我正在用 Java 编写一个安全的文件共享应用程序。一般架构如下所示：

1.  用户希望加密文件以在多个用户之间安全共享。
2.  应用程序在客户端生成一个随机 UUID 并将其用作 AES 256 密码，并使用 UUID 加密数据。
3.  然后使用每个人的公钥对 UUID 进行 RSA 加密。每个共享用户一次。
4.  每个加密的 UUID 数据包都作为文件的一部分存储在自定义文件头中。
5.  然后将该文件上传到其他人可以访问的服务器。
6.  用户每个人都可以使用他们的私钥来读取 AES 加密密钥并解密文件。

这是问题所在。用户的私钥必须加密并存储在我们数据库中的服务器上，以便可以从多个位置访问文件。在上传到服务器之前，私钥将在客户端使用用户选择的密码进行加密。

我想使用 AES 256 位加密来做到这一点。而且我想在不依赖 BouncyCastle 库或任何 3rd 方库的情况下完成整个工作。它需要使用标准的 Java 5 库，这就是为什么我选择使用 AES 256 加密和 RSA 而不是 PGP 之类的东西。

任何人都可以发现这种方法本质上不安全，或者想出一种更有效的方法来做到这一点吗？

编辑：

好的，我正在更新问题，因为我得到的所有答案都建议我不要将私钥传输到服务器。我需要服务器上的私钥的原因是因为用户需要能够从多个客户端和多个位置（即：他们的 iphone、他们的 ipad、他们的工作笔记本电脑、他们的家用电脑）访问他们的数据。他们不想在设备之间管理和复制他们的密钥，这比将他们的密钥存储在我们的服务器上更不安全，因为他们最终只会通过电子邮件将它们发送给自己。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:15:35.390

最大的问题是使用 UUID。尽管 UUID （在某种程度上）保证是唯一的，但它们包含的相当多的内容是可以预测的；在一台机器上生成的所有 UUID 中，相当数量的数量保持不变。因此，如果一个人可以访问（例如）他们自己的密钥，他们可能会相当容易地猜出许多其他人的密钥。

有问题的另一部分是将用户的私钥存储在服务器上。这使得整个方案的其余部分相对脆弱，因为访问这些密钥显然可以访问所有其余数据。这也（显然）意味着您通常会在服务器上解密数据，因此当用户通过网络访问该数据时，它要么需要重新加密以进行传输，并在用户的机器上解密，要么否则，您将以明文形式传输数据（从而使大部分加密无用）。

编辑：至于我认为我会如何做到这一点：

我会在服务器上有一个公钥*列表。*当客户端想要与其他一些客户端共享文件时，它会从服务器获取这些客户端的公钥。然后它生成一个安全的随机密钥，并使用该密钥加密数据。然后，它使用应该能够访问数据的所有其他客户端的公钥加密随机密钥。将它们组合成一个流，并将它们传输到服务器。然后其他客户端可以下载流，用他们的私钥解密密钥，并使用它来解密数据本身。

这意味着每个客户的私钥都保持真正的私密性——它永远不必以任何形式离开他们的机器。他们必须与世界其他地方共享的只是他们的公钥（根据定义，它不应该引起安全问题）。

这样一来，两条明显的攻击路线分别是针对随机数生成器和针对 RSA 本身。对于随机数生成器，我会使用 Java 的 SecureRandom ——这正是它的预期目的，如果记忆有用，它已经过非常仔细的检查，并且似乎不太可能出现重大中断。

我不会试图评论 RSA 本身的安全性。目前，我认为您主要关心的是协议，而不是适当的加密算法。可以说，如果 RSA 被严重破坏，您显然需要更改您的代码，但您会有*很多*公司。

有了这个，客户可以安全地存储他们的私钥。我喜欢智能卡来完成这项工作，但有很多选择。从服务器和协议的角度来看，它不再是一个真正的因素。

编辑2：至于处理多个设备，我想我只是将每个设备视为一个单独的用户，拥有自己的公钥/私钥对。然后，我（可能）将这些实际用户分组在一起，这样我就可以轻松地选择“Joe Blow”来让他访问他的所有设备——但是通过分层显示，我也可以很容易地限制对子集的访问其中，所以如果我想在乔的办公室机器上分享它，但它足够敏感，我不希望它在他看着它时有人可能会从他的肩膀上看，我也可以很容易地做到这一点。

这使用户的生活变得简单，但保留了相同的基本安全模型（即，私钥保持私有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T18:18:14.580

您概述的方案等效于 CMS（标准底层 S/MIME）和 PGP；从根本上说，它是安全的。在 CMS 中，这种模式称为“密钥传输”。您还可以通过 DH 或 ECDH 等算法使用多方“密钥协议”。

唯一的问题是您为 AES 使用了选择不当的密钥。

我想不出任何理由使用包含非随机位的随机 UUID。只需使用 Java 密码体系结构的正常密钥生成机制。密钥、明文和密文都应表示为字节序列，除非您需要容纳一些仅容纳文本的外部存储或传输。

```
Iterable<Certificate> recipients = null;
KeyGenerator gen = KeyGenerator.getInstance("AES");
gen.init(256);
SecretKey contentEncryptionKey = gen.generateKey(); 
```

初始化 AES 密码并让提供者选择一个 IV。

```
Cipher contentCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
contentCipher.init(Cipher.ENCRYPT_MODE, contentEncryptionKey);
AlgorithmParameters params = contentCipher.getParameters();
byte[] iv = params.getParameterSpec(IvParameterSpec.class).getIV(); 
```

对于每个收件人，初始化 RSA 密码并加密 AES 密钥。

```
Cipher keyEncryptionCipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
for (Certificate recipient : recipients) {
  keyEncryptionCipher.init(Cipher.WRAP_MODE, recipient);
  byte[] encryptedKey = keyEncryptionCipher.wrap(contentEncryptionKey);
  /* Store the encryptedKey with an identifier for the recipient... */
}
/* Store the IV... */ 
/* Encrypt the file... */ 
```

让用户选择并记住有效强度为 256 位的密码是不合理的。要获得这种强度，您必须随机选择密码，将它们编码为文本，并让用户将它们写在卡片上。如果您真的需要这么大的强度，您可以查看基于智能卡的解决方案来存储用户的 RSA 密钥。

我强烈建议您使用 CMS 库来存储您的文件。这将增加您使用的协议是安全的、您使用的代码经过更多审查以及其他工具、库和系统可以与加密消息互操作的机会。BouncyCastle 的 API 有点晦涩，但可能值得学习。

（我不记得 Java 5 是否支持“RSA/ECB/OAEPWithSHA-512AndMGF1Padding”；如果支持，您应该使用它而不是 PKCS1Padding。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T18:29:11.987

好的，这个问题是要求讨论协议，所以它不完全符合stackoverflow的标准。也就是说，让我们看看我们是否可以发表一些评论:)：

1.  Bouncy Castle PGP 库具有非常宽松的许可证，因此您甚至可以将它们复制到代码中的子包中；
2.  除了 PGP 之外，还有其他标准容器格式，例如 CMS 或 XML 加密，尽管后者可能不是很好的通用格式；
3.  我强烈建议不要使用 UUID，而是使用播种良好的 PRNG，例如 Java JCE“SHA1PRNG”来创建 AES 密钥——我看不出有什么强有力的理由说明你应该在你的方案中依赖像 UUID 这样的东西；
4.  AES 密钥应该由具有足够熵的随机位组成，将它们视为“密码”会导致陷阱：您不能将字符串用作安全的 AES 密钥；
5.  用户必须信任您的应用程序和服务器，您*是*受信任的第三方：您可以将用户密码发送到您的服务器，您可以向用户发送不正确的公钥等等等等。
6.  Your scheme is not protected against any man in the middle attacks (and many argue this cannot be done without using SSL)
7.  Instead of directly encrypting with a password, you should look into something like Password Based Encryption PBKDF2 to encrypt the RSA private key;
8.  Try and add integrity protection when encrypting, from Java 7 onwards you may use AES in GCM mode, it's well worth it.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T17:19:58.210

这完全取决于您希望加密的“安全性”程度。显然，RSA 是 PKI 的良好文档/公认标准。话虽如此，只要您提供明文和加密文本，黑客就可以更容易地在知道部分明文的情况下解密密文。在这里，您正是这样做的。尽管您只传输加密的 UUID，但通过使用多个密钥加密相同的明文，攻击者可以深入了解有效负载。此外，如果被黑者实际上是接收者之一，他能够解码 UUID，从而自动知道由其他用户的公钥加密的明文。

这对您来说可能不是一个关键问题，但只是想我会指出一个安全风险。

但是，我不完全确定为什么需要存储用户的私钥。此外，通过使用简单的密码来加密私钥，您基本上已经将整个系统的整体安全性降低到用户密码的强度。最后，如果用户丢失了密码，他就干杯了；没有办法恢复任何数据。

我过去做过类似的事情，但将结果存储在数据库中。但是，我当时使用了 BouncyCastle 库，所以我不确定没有它们如何实现这一点。

# objective-c - ObjC 方法类型编码中的数字是如何计算的？

> ID：11527385
> 
> 赞同：12
> 
> 时间：2012-07-17T17:06:35.270
> 
> 标签：objective-c, objective-c-runtime

是我之前问题的后续： [ObjC 方法类型编码字符串中的数字是什么？](https://stackoverflow.com/questions/11491947/what-are-the-digits-in-an-objc-method-type-encoding-string)

假设有一个编码：

```
v24@0:4:8@12B16@20 
```

这些数字是如何计算的？`B`是一个字符，所以它应该只占用 1 个字节（而不是 4 个字节）。它与“对齐”有关吗？的大小是`void`多少？

如下计算数字是否正确？询问`sizeof`每个项目并将结果四舍五入为 4 的倍数？第一个数字成为所有其他数字的总和？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-17T17:42:34.473

这些数字在 m68K 天中用于表示堆栈布局。也就是说，您可以从字面上解码方法签名，并且对于几乎所有类型，确切地知道堆栈帧内哪个偏移处的哪些字节可以欺骗获取/设置参数。

这很有效，因为 m68K 的 ABI 完全是 [IIRC -- 很长一段时间] 基于堆栈的参数/返回传递。没有任何东西跨调用边界塞入寄存器。

然而，随着 Objective-C 被移植到其他平台，always-on-the-stack 不再是调用约定。参数和返回值通常在寄存器中传递。

因此，这些偏移量现在是无用的。同样，编译器使用的类型编码不再完整（因为它从来没有非常有用）并且会有一些类型不会被编码。更不用说对一些 C++ 模板化类型进行编码会产生方法类型编码字符串，这些字符串的大小可能有很多千字节（我认为我遇到的记录大约是 30K 的类型信息）。

所以，不，用它来生成数字是不正确`sizeof()`的，因为它们实际上对一切都没有意义。它们仍然存在的唯一原因是为了二进制兼容性；到处都有一些深奥的代码，它们仍然解析类型编码字符串，期望到处都有随机数。

Note that there are vestiges of API in the ObjC runtime that still lead one to believe that it might be possible to encode/decode stack frames on the fly. It really isn't as the C ABI doesn't guarantee that argument registers will be preserved across call boundaries in the face of optimization. You'd have to drop to assembly and things get ugly really *really* fast (>shudder<).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-17T17:24:42.707

完整的编码字符串由方法构造（在 clang 中）`ASTContext::getObjCEncodingForMethodDecl`，您可以在[`lib/AST/ASTContext.cpp`](http://llvm.org/viewvc/llvm-project/cfe/trunk/lib/AST/ASTContext.cpp?revision=160244&view=markup).

进行大小舍入的方法是`ASTContext::getObjCEncodingTypeSize`, 在同一个文件中。它强制每个大小至少是`int`. 在 Apple 当前的所有平台上，an`int`是 4 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:33:23.543

堆栈帧大小和参数偏移量由编译器计算。这周我实际上正在尝试自己在 Clang 源中追踪这一点；它可能与[`CodeGenTypes::arrangeObjCMessageSendSignature`](http://clang.llvm.org/doxygen/CGCall_8cpp_source.html#l00277). （看起来[Rob 让](https://stackoverflow.com/a/11527666/603977)我的生活轻松多了！）

第一个数字是其他数字的总和，是的——它是参数占用的总空间。要获取代码中由 ObjC 类型编码表示的类型的大小，您应该使用[`NSGetSizeAndAlignment()`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/doc/uid/20000055-SW54).

# html - 如何从通过 XML 生成的元素中删除空行？

> ID：11527386
> 
> 赞同：0
> 
> 时间：2012-07-17T17:06:36.110
> 
> 标签：html, xml, xslt

我正在修改一个 xml.config 文件，它在链接上方生成一个空行。不知道为什么会这样。我怎样才能将其删除？

这是列表元素的 xml.config 代码：

```
 <li>
                <xsl:value-of select="$prefix" />
                <xsl:if test="number(ParentEntityID) != 0">
                    <!-- <span class="catMark">&gt;&gt;</span>&#160; -->
                </xsl:if>
                <a href="{concat('c-',EntityID,'-',ise:FormatStringForLink(SEName),'.aspx')}">
                    <xsl:if test="EntityID = $CategoryID or descendant::Entity/EntityID = $CategoryID">
                        <xsl:attribute name="style">font-weight:bold</xsl:attribute>
                    </xsl:if>
                    <xsl:value-of select="$eName"/>
                </a>

                <xsl:if test="count(child::Entity)&gt;0 and (EntityID = $CategoryID or descendant::Entity/EntityID = $CategoryID)">
                    <ul>
                        <xsl:apply-templates select="Entity">
                            <xsl:with-param name="prefix" select="concat($prefix, '&#160;&#0160;')"/>
                        </xsl:apply-templates>
                    </ul>
                </xsl:if>
            </li> 
```

当页面加载时，它变成了这样：

```
<li>
     &nbsp;&nbsp;
     <a href="c-56-holiday.aspx">Holiday</a>
</li> 
```

![在此处输入图像描述](../Images/6be94f5b24dd0007770323709687f88d.png)

# jquery - 如何使用 jScrollPane（jquery 插件）应用 Border-radius

> ID：11527390
> 
> 赞同：3
> 
> 时间：2012-07-17T17:06:45.467
> 
> 标签：jquery, jquery-plugins, jscrollpane, css

我想将 Border-radius Css 属性应用于[jScrollPane](http://jscrollpane.kelvinluck.com/) div。

这是我想要的解决方案（据我所知，它在现代浏览器中运行良好）：http: [//jsfiddle.net/dF9ng/](http://jsfiddle.net/dF9ng/)

但是我想将此应用于 jScrollPane div。这是我的尝试：http: [//jsfiddle.net/SWtVC/](http://jsfiddle.net/SWtVC/)

它似乎在 Firefox 中正常工作。但是在 Chrome 中它根本不起作用。

这是 Chrome 错误吗？它在其他浏览器中是否正常工作？如果是插件错误，有人可以为我提供修复或其他可能的解决方案吗？

提前致谢'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:38:29.040

您可以将文章设置为绝对位置，将其溢出设置为隐藏，但这在 Chrome/Safari 中不起作用，但有一个解决方法：[CSS 掩码](http://www.webkit.org/blog/181/css-masks/)

您的 HTML 标记保持原样，这是您的新 CSS：

```
article{
    border:1px solid black;
    margin:30px;
    border-radius:50px;
    width:300px;
    height:300px;
    overflow:hidden;
    position:absolute;
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);

} 
```

​</p>

[jsFiddle](http://jsfiddle.net/dF9ng/2/)

我还应该提到，我是通过遇到[类似的问题](https://stackoverflow.com/questions/5736503/how-to-make-css3-rounded-corners-hide-overflow-in-chrome-opera)发现的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-19T17:20:22.080

看看我的小提琴。我想这就是你想要的。

[jsFiddle](http://jsfiddle.net/thewingser/SWtVC/13/)

# html - 在页面上嵌入外部 Flash 视频

> ID：11527393
> 
> 赞同：2
> 
> 时间：2012-07-17T17:07:04.443
> 
> 标签：html, flash, embed

有一个视频可以在[这里](http://www.brainshark.com/rsa/cybersecurity101)找到，我想将它嵌入到我的页面中的某个地方。我没有成功下载 flash 文件，因为我无法访问 chrome 中的检查元素，而且我也无法通过引用上面的 URL 找到嵌入 flash 视频文件的方法。

有谁知道下载文件或嵌入文件的方法？

顺便说一下，这个必须支持IE8（对不起大家：））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:15:10.117

**绝对网址**：[http ://www.brainshark.com/brainshark/viewer/getplayer.ashx?v=201207121701](http://www.brainshark.com/brainshark/viewer/getplayer.ashx?v=201207121701)

```
<object type="application/x-shockwave-flash" id="flashContent" name="flashContent"
data="/brainshark/viewer/getplayer.ashx?v=201207121701" width="100%" height="100%"
style="visibility: visible; ">
    <param name="scale" value="noscale">
    <param name="wmode" value="window">
    <param name="allowfullscreen" value="true">
    <param name="allowscriptaccess" value="always">
    <param name="bgcolor" value="">
    <param name="SeamlessTabbing" value="false">
    <param name="flashvars" value="pi=119002744&amp;host=www.brainshark.com&amp;securerequest=false&amp;lng=en-GB,en-US;q=0.8,en;q=0.6">
</object> 
```

享受和好运！

# jquery - 灯箱在服务器上无法正常工作

> ID：11527395
> 
> 赞同：0
> 
> 时间：2012-07-17T17:07:11.647
> 
> 标签：jquery, webserver, lightbox

我使用 Lightbox 插件制作了一个投资组合部分，它在我的计算机上运行良好，但是当我上传到 godaddy 的服务器时，插件根本无法运行。

这是网站[http://thehouseofseven.com/](http://thehouseofseven.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:10:22.657

使 ' `js`' 大写：

```
<script type="text/javascript" src="JS/jquery.lightbox-0.5.js"></script>
                                    ^^--------------------Upper case 
```

# nservicebus - NServicebus - 停止长时间运行的进程？

> ID：11527397
> 
> 赞同：0
> 
> 时间：2012-07-17T17:07:14.087
> 
> 标签：nservicebus

这是我尝试使用 NServiceBus 组合在一起的应用程序：

*   我有 1000 个文件需要由服务处理。到目前为止，我在想我会有一个端点，即客户端，找到所有这些文件并将它们发送到总线上进行处理
*   我的另一个端点，即执行处理的服务器，将侦听这些客户端消息，当一个进入处理文件时，并返回结果。
*   客户端获取结果，将文件标记为已处理，并等待处理下一个 999 个文件。客户端不关心返回消息的顺序，只要它们都在某个时候得到处理。（实际上，客户端在处理数据后会对数据做更多的事情，这是服务器无法完成的，所以我不能只是触发并忘记处理请求。）
*   由于处理一条消息可能需要一个多小时，因此我将扩展应用程序以让多个服务器都尝试吃掉需要处理的 1000 个文件。

从概念上讲，这就像在我的所有服务器上构建个人 SETI 在家服务一样。

我遇到的问题是，如何在处理 1000 个文件的过程中停止？

*   我想让我的所有服务器尽可能多地处理我的数据，所以当客户端启动时，它是否会发布 1000 个命令来处理 1000 个文件，然后坐下来等待？如果它这样做并决定停止，它如何清除所有这些命令来处理文件的总线？
*   如果我的客户一次只在总线上推送一两条消息，如果我决定停止在客户端上，我可以很容易地停止发送消息，但是我还有另外两个问题

    1.  服务器可能没有得到充分利用，我最终会得到闲置的服务器。
    2.  如何停止加载并处理数据的服务器？向他们发送不同消息格式的第二条命令？

想法，想法？我是否使用正确的工具/正确的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:07:48.887

您可能要考虑的一件事是您将如何关联消息处理。我会为此使用一个 saga，并让客户端生成某种批处理 id，该批处理 id 附加到所有要处理的文件中。这使您的客户端能够向 saga 发送 CancelProcessing 消息，然后处理程序可以停止向文件处理端点处理/发送消息并执行任何清理操作，例如完成 saga 并从中删除数据数据库。

因此，您将拥有客户端端点、saga 端点和一个或多个文件处理端点（位于分发器后面）。您的客户将负责启动/发送文件到 saga。saga 管理文件关联和处理活动，而您的处理端点专注于完成工作。

请记住，处理端点不一定是物理端点。如果您愿意，您可以在一台服务器上拥有许多这些，并使用监控工具来确定您是否需要添加或删除节点。

# sql-server-2008 - 使用 Null 分组 T-SQL

> ID：11527398
> 
> 赞同：2
> 
> 时间：2012-07-17T17:07:14.487
> 
> 标签：sql-server-2008, tsql, grouping

我的 SQL 查询有这个问题（SQL Server 2008）

```
SELECT id, client, SUM(debt), date
FROM Table GROUP BY id, client, date 
```

从查询返回的是

```
id client debt date
1  jim x  500  05/05/2012
2  jack a 900  06/06/2012
2  jack a 500  null 
```

有没有办法在这种情况下添加 Jack a 的债务 (1400) 并显示非空日期，即 06/06/2012。

一个人最多只能有 2 条记录，并且 1 条记录始终为空日期，所以有没有办法求和并使用不为空的日期？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:08:50.287

要按客户分组，您必须从您的 GROUP BY中删除`id`和删除：`date`

```
SELECT
    MAX(id) AS newest_id,    -- or MIN(id) if you prefer
    client,
    SUM(debt) AS total_debt,
    MAX(date) AS most_recent -- or MIN(date) if you prefer
FROM YourTable
GROUP BY client 
```

# textbox - 在 PowerBuilder 文本框上设置值

> ID：11527404
> 
> 赞同：0
> 
> 时间：2012-07-17T17:07:45.393
> 
> 标签：textbox, powerbuilder

我正在使用 PowerBuilder 12.5 Classic 开发计费系统，我需要为文本框设置 0；就像在 vb.net txtchange.Text = 0
我有两个下拉列表框

1.  ddlb_price（定义商品的价格值）
2.  ddlb_cash（客户给的现金金额）
3.  sle_change（收银员要给客户的零钱）

当收银员输入现金时，系统应设置 sle_change 的值。
1.这给了我语法错误；

```
if cash=price then
    sle_fare.settext=0
   end if 
```

2\. 这给出了“不兼容的类型”

```
 if cash=price then
      sle_fare.text=0
    end if 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T19:28:42.900

单行编辑 (sle) 控件旨在保存文本。您正在尝试为其分配一个数值。如果您希望 sle 显示该数字，则必须将其更改为字符串：

```
sle_fare.text = "0" 
```

或者

```
sle_fare.text = string(variableHere) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:04:43.883

[再一次](https://stackoverflow.com/questions/11435117/populate-dropdownlistbox-items-from-sql-table-in-powerbuilder-classic-12-5)，我将退后一步，忽略实际问题，看看 DataWindow 作为替代方案将如何提供帮助。

您似乎想要一个带有数据类型的控件。DataWindow 具有这些类型的控件。不要忘记 DataWindow 后面不必有 SELECT 语句；它可以在数据集后面有一个存储过程、Web 服务或什么都没有（外部 DataWindow）。一旦你有一个带有数字数据类型的控件，你就可以（免费）获得一些基本的编辑控件，例如不允许在字段中使用字母字符并确保输入的值确实是一个数字（例如“0-.2.1 “会失败）。

除此之外，还有一个步骤是查看您即将提出的要求之一：计算变化。在 DataWindow 上，您可以使用表达式创建一个计算，一旦输入价格和现金，该表达式将自动为您计算您的零钱。

我当然不想说你**不能**按照你的方式做事，但是有很多问题 DataWindow 会比其他方法消除。PowerBuilder 的优势在于 DataWindow。

祝你好运，

特里

# c++ - 防止专注于 QWidget

> ID：11527407
> 
> 赞同：2
> 
> 时间：2012-07-17T17:08:06.370
> 
> 标签：c++, qt

我想写一个`QDialog`相似的类。我已经设法很好地将鼠标事件过滤到非对话框小部件，但我仍然有焦点问题。由于`QDialog`相似类只是一个普通的小部件，它可能会通过按键（选项卡）失去焦点。因此，与`QDialog`lookalive 无关的小部件，我不能点击，但可以聚焦，可能会获得焦点。有没有一种巧妙的方法可以防止用户将注意力从我的对话框相似的子小部件上移开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:29:17.130

假设您的类似 QDialog 的小部件是一个单独的窗口，我认为您正在寻找`QWdiget::setModal( true )`. 它可以防止应用程序其他窗口中的小部件接收任何输入事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T11:38:52.380

这是一个解决方案：

```
// somewhere in your code
connect(qApp, SIGNAL(focusChanged(QWidget*,QWidget*)),
  SLOT(focusChanged(QWidget*,QWidget*)));

void MyDialog::focusChanged(QWidget*, QWidget* to)
{
  if (!isAncestorOf(to))
  {
    QWidget* widget(qobject_cast<QWidget*>(children().front()));

    widget->setFocus(Qt::OtherFocusReason);

    QKeyEvent event(QEvent::KeyPress, Qt::Key_Tab, Qt::NoModifier);

    qApp->sendEvent(widget, &event);
  }
  // else do nothing
} 
```

假设孩子是`QFrame`or的一个实例`QWidget`。

# jquery - 使用jQuery在div中垂直居中图像

> ID：11527412
> 
> 赞同：0
> 
> 时间：2012-07-17T17:08:33.750
> 
> 标签：jquery, getimagesize

希望有人能指出我正确的方向。

我一直在尝试将图像垂直居中放在一个 div 中，如果图像的高度一致，我可以使用 CSS 来做到这一点。然而（和往常一样）事情并不那么简单，而且几乎每个实例的图像高度都不同。

我希望能够为图像添加一半图像高度的负边距，以将其拉入 div 的中心。

关于我如何做到这一点的任何建议？

这似乎不起作用：S

```
var $img = $('div#imageColumn img');
var h = $img.height();
$img.css('margin-top', + h / -2 + "px"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:12:57.433

这段代码是前段时间在 SO 上找到的。你像这样使用它

```
$(".yourclass").vAlign(); 
```

它计算父元素的高度并相应地居中。

功能：

```
(function ($) {
    // VERTICALLY ALIGN FUNCTION
    $.fn.vAlign = function () {
        return this.each(function (i) {
            var ah = $(this).height();
            var ph = $(this).parent().height();
            var mh = Math.ceil((ph - ah) / 2);
            if (mh > 0) {
                $(this).css('margin-top', mh);
            } else {
                $(this).css('margin-top', 0);
            }
        });
    };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:33:08.423

哟不需要jQuery，CSS可以做到。只需将您的图像设置为：

```
.yourDiv .yourImg{
  display: inline-block;
  vertical-align: middle;
  /* if you wonder for a maximum height just add */
  max-height: 200px;   
} 
```

此外，如果您想知道在 IE7 上支持 inline-block 的技巧，您有： [http ://www.kollerat.com/cms/index.php/Web-admin/HTML/IE7-and-inline-block.html](http://www.kollerat.com/cms/index.php/Web-admin/HTML/IE7-and-inline-block.html)

# python - Flask-Mail 和 Redis 队列库集成给出错误

> ID：11527413
> 
> 赞同：1
> 
> 时间：2012-07-17T17:08:36.323
> 
> 标签：python, redis, flask

我正在使用 Flask-Mail 扩展来启用应用程序中的邮件发送。我无法让 celery 与烧瓶一起使用，所以我查找了其他一些库并找到了[Redis Queue](http://python-rq.org/)。

代码：

```
 from flask.ext.mail import Mail,Message
     from rq import Queue

     mail = Mail() # mail.init_app(app) is done in top app.py

     q = Queue()

     @mod.route('/test')
     def m11():
         msg = Message("Signup Successfull",
                  recipients=['abc@gmail.com'])
         msg.body = "Hello there, Welcome!"
         q.enqueue(mail.send, msg)
         return 'done' 
```

当我运行代码时，rqworker 中的邮件发送失败，出现以下错误：

```
 17:04:49: *** Listening on default...
    17:06:08: default: flaskext.mail.send(<flaskext.mail.message.Message object at         
                       0x1027a9750>) (8c86f0f9-ae76-4297-bf17-a171a67f1b44)
    17:06:08: 'module' object has no attribute 'send'
    17:06:08: Moving job to failed queue. 
```

这个错误的原因是什么？

编辑：没有属性 send 是因为 send 是一个实例方法。

现在有不同的问题。我收到邮件对象没有任何属性应用程序的错误。我猜 rq 的新进程不知道我的烧瓶应用程序，因此不知道错误。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T14:53:57.020

您正在尝试将邮件对象实例的发送方法排入队列，而 RQ 无法将实例方法排入队列。如果您查看页面底部的文档，它会提到这一点：

[http://python-rq.org/docs/](http://python-rq.org/docs/)

尝试定义另一种方法并以这种方式发送邮件。如...

```
from flask.ext.mail import Mail,Message
from rq import Queue

mail = Mail()
q = Queue()

def queue_mail(msg):
    mail.send(msg)

@mod.route('/test')
def m11():
    msg = Message("Signup Successfull",
                  recipients=['abc@gmail.com'])
    msg.body = "Hello there, Welcome!"
    q.enqueue(queue_mail, msg)
    return 'done' 
```

# css - css浮动宽度百分比

> ID：11527414
> 
> 赞同：-1
> 
> 时间：2012-07-17T17:08:41.160
> 
> 标签：css

> **可能重复：**
> [如何在 css 中使用浮动创建表格布局](https://stackoverflow.com/questions/11526261/how-to-create-a-table-layout-with-float-in-css)

```
 #inner
{

 height:700px;

    }
div.content
{   
    float:left;
  width:95%;

}
    div.content span.first
    {
        display:block;
        float:left;
        width:25%;
        overflow:hidden;

    }
    div.content span.second
    {
        clear:both;
        display:block;
        float:right;
         width:25%;

    }
    div.content span.third
    {
        clear:both;
        display:block;
        float:right;
        width:25%;

    }
</style> 
```

```
<body>

    <div id="outer">
          <div id="inner">
          <div class="content">
            <span class="first">
           HELLO
        </span>
       </div>

    <div class="content">
      <span class="second">
      pRERNA
          </span>
      </div>

   <div class="content">
      <span class="third">
      gOLANI
       </span>
    </div> 
```

当使用像素工作但不使用百分比时，为什么？我想创建三个等宽的列。如果外部元素是 72%。我想创建 72/3 的 cloumns，即 24% 宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:29:29.893

您需要为父级设置宽度。无论是 100% 还是像素宽度，否则引擎不知道从什么中导出 %。

您还应该解释您的代码正在做什么以及您希望它做得更好，以便更多人可以提供帮助并且您不会投票:)

编辑

还考虑到您在这里展示的内容，您可能最终会导致孩子离开 INNER 父母。我会在你的样式表中添加一个 clearfix 只是谷歌 clearfix ，你应该很高兴。基本上它会在父元素的末尾添加一个伪元素，清除该元素，从而提供一个上下文，以便您的孩子玩得很好。

# c++ - 模板类的方法是否隐含内联链接？

> ID：11527415
> 
> 赞同：8
> 
> 时间：2012-07-17T17:08:44.180
> 
> 标签：c++, templates, inline, linkage

模板类的方法是隐含的`inline`链接（不是在谈论内联优化），还是只是模板化的方法？

```
// A.h

template<typename T>
class A
{
public:
    void func1();                       //  #1
    virtual void func2();               //  #2
    template<typename T2> void func3(); //  #3
};

template<typename T>
void A<T>::func1(){}    //  #1

template<typename T>
void A<T>::func2(){}    //  #2

template<typename T>
template<typename T2>
void A<T>::func3<T2>(){}    //  #3 
```

以上案例都是`inline`【联动】吗？（我应该明确地为他们中的任何一个写信`inline`吗）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T17:14:36.827

如果模板类的模板函数和成员函数被隐式实例化，则它们是隐式内联¹，但要注意模板特化不是。

```
template <typename T>
struct test {
    void f();
}
template <typename T>
void test<T>::f() {}           // inline

template <>
void test<int>::f() {}           // not inline 
```

* * *

由于缺乏更好的报价：

> 必须在隐式实例化 (14.7.1) 的每个翻译单元中定义非导出模板，除非在某个翻译单元中显式实例化相应的特化 (14.7.2)；不需要诊断

* * *

¹仅在允许对它们进行多个定义的意义上，而**不是**出于优化目的。您可以手动将它们标记`inline`为优化器的提示。

请参阅[`[basic.def.odr]/13.4`](http://eel.is/c++draft/basic.def.odr#13.4)- 模板本身不受 ODR 影响，而不是因为它们隐含`inline`.

# android - 使用 Phonegap 时加快加载速度

> ID：11527421
> 
> 赞同：3
> 
> 时间：2012-07-17T17:09:03.890
> 
> 标签：android, html, optimization, cordova

我正在使用 Phonegap 构建我的应用程序，它们运行良好。我唯一的问题是加载页面需要多长时间。

我必须在第一个屏幕上放置一个启动页面，以便在用户访问它时加载它，但我不能对每个单独的页面都这样做。

我可以做些什么来加快加载时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:08:51.417

老实说，我还没有尝试过这个，但是我从 Phonegap 的一位共同创建者那里读到的一个提示是，当你想要交互时，不要使用 onclick，而是使用 ontouchstart。onclick 显然有可能在运行其脚本之前等待长达 300 毫秒，以防用户双击某些东西。如果您使用 onclick，这将使页面加载更快。

资料来源：[http ://sintaxis.com/you-half-assed-it](http://sintaxi.com/you-half-assed-it)

# java - aapt 使用 Runtime.exec()

> ID：11527426
> 
> 赞同：0
> 
> 时间：2012-07-17T17:09:20.260
> 
> 标签：java, android, linux, runtime.exec, aapt

我想使用 Java 运行时运行 aapt。我的代码如下：

```
String srcFile = "/home/jay/testing_FILES.apk";
String dsFile = "/home/jay/testing_FILES";
String firstCommand =  ("/home/jay/android-sdk-linux/platform-tools/aapt " +
    "package -u -f -F" + srcFile + dsFile);
try {
  Runtime rt = Runtime.getRuntime();
  Runtime.getRuntime().exec(firstCommand);
} catch (IOException e1) {
  e1.printStackTrace();
} 
```

这段代码没有给我错误，但也没有给我任何结果。关于如何解决这个问题的任何想法？这也意味着是可移植的代码，所以如果有一种方法可以在没有脚本的情况下完成它，那将是首选。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:40:30.073

You are trying to put the arguments in the same string as the command; that won't work here because there is no shell to parse them out.

You might want to try the form of exec() which takes a string array containing a command and it's arguments.

# java - 以编程方式设置测试模式时出现的真实 Admob 广告

> ID：11527429
> 
> 赞同：2
> 
> 时间：2012-07-17T17:09:25.087
> 
> 标签：java, android, xml, eclipse, admob

这里有一个奇怪的问题：每当我通过 xml 设置测试模式时，我都会在模拟器中收到预期的测试广告。然而，当我尝试以编程方式做同样的事情时，我似乎得到了真正的广告。根据 Admob 文档，这两种方法应该是等价的，不是吗？这是我的xml代码：

```
 <com.google.ads.AdView
                    android:id="@+id/adView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"
                    ads:adSize="BANNER"
                    ads:adUnitId="xxxxxxxxxxx"
                    ads:loadAdOnCreate="true">
    </com.google.ads.AdView> 
```

这是相关的Java代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

} 
```

如前所述，如果我将行 ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID" 插入到上面的 xml 代码中，我得到的测试广告就好了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:34:09.717

我相信您必须在 AdView 对象上调用 .loadAd(adRequest) 。

[在此处查看 Google 的 AdMob 文档](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)

在**添加 com.google.ads.AdView**部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T00:42:51.650

您不必以编程方式调用它。

我花了一段时间才知道什么设备是 AdMob 的 sdk 期待什么，因为我认为这与真实设备有关，例如 (adb devices)

但这里有一条来自官方文档的评论来澄清它。

“将出现一条日志消息，其中包含将当前设备添加到测试设备列表所需的代码”

您可能会收到类似的消息

```
I/Ads(26674): To get test ads on this device, call adRequest.addTestDevice("F1254CDFBA84BDC27F5C7C6E12445D06"); 
```

之后您要做的就是将此 ID 放入您的布局 xml 中，如下所示

```
<com.google.ads.AdView
    android:layout_alignParentBottom="true"
    android:id="@+id/adView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="@string/publisherId"
    ads:loadAdOnCreate="true"
    ads:testDevices="TEST_EMULATOR, F1254CDFBA84BDC27F5C7C6E12445D06" /> 
```

希望对大家有所帮助

保罗·米格尔·阿尔梅达

# javascript - javascript从数组中删除项目，拼接

> ID：11527430
> 
> 赞同：0
> 
> 时间：2012-07-17T17:09:25.480
> 
> 标签：javascript, arrays, object, splice

我正在使用 localstaorage 制作一个小应用程序（尚未实现）：您在文本区域中输入一个注释，它会显示在列表中

笔记堆叠在一个名为 notes 的对象中（用于将来的本地存储）；

但我的问题是：我可以添加一个注释，但是当我尝试删除它们时，我必须删除我的 li 和'notes'数组中的相关注释对象，所以我决定使用拼接方法，但它有效以一种奇怪的方式...

当我单击“关闭”时，它可以正常工作一两次，但此刻数组中仍然包含一个或两个对象...

我尝试了不同的方法来解决问题，但没有成功......

这是小提琴：http: [//jsfiddle.net/h8hg6/1/](http://jsfiddle.net/h8hg6/1/)

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:31:01.563

我对你的小提琴做了一些修改，我认为可以解决问题。本质上您使用`.splice`不正确，并且您的 Array 与您的笔记元素不同步。我已经用基于数字的对象替换了您的数组，因为它更容易处理。以下是一些相关的变化：

[http://jsfiddle.net/h8hg6/2/](http://jsfiddle.net/h8hg6/2/)

```
var notes = {}; // notes is now an object instead of an array
// snip

var number = jQuery(this).parents('li').data('number');
delete notes[number]; // this is how you remove properties from an object

// snip
var note = {
    color: color,
    text: text
};

notes[i] = note; // add this object as a property of the notes object
i++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:42:28.087

问题是您的调用`splice`使用`queue`变量的值来确定将在`notes`数组中删除的元素的索引。就在这儿：

```
notes.splice(queue, 1); 
```

由于`queue`值总是在增加（就在这里）：

```
 function addNoteToPage(){
    i++;
    ...
    jQuery('ul#notes li:first').before('<li  data-queue="'+ i +'">'+ note.text +' <a href=""#>CLOSE</a> 
```

`notes`您遇到了在数组的不存在索引上调用 splice 的时刻，结果没有任何内容被删除。基本上，您最终会得到一个不同步的`notes`数组。

您需要确保该`data-queue`属性的值与`notes`数组中元素的实际索引一致，以便您的调用`splice(queue,1)`始终成功并删除适当的数组元素。

话虽如此，如果上面的答案对你有用，我会选择那个。我只是想让你更深入地了解正在发生的事情......

# html - 来自 Silverlight 的 Html（不在浏览器之外）

> ID：11527433
> 
> 赞同：0
> 
> 时间：2012-07-17T17:09:34.367
> 
> 标签：html, silverlight, out-of-browser

我正在尝试从用作 XML 编辑器的本地 URI 打开 HTML 文件，以编辑来自 Silverlight 应用程序的 xml 数据，然后关闭浏览器窗口并将编辑的 xml 数据返回给 Silverlight 应用程序。

我尝试使用`HtmlPage.Window.Navigate`，但我不喜欢它退出。

我尝试使用以下方法：[http ://weblogs.asp.net/dwahlin/archive/2010/05/10/integrating-html-into-silverlight-applications.aspx](http://weblogs.asp.net/dwahlin/archive/2010/05/10/integrating-html-into-silverlight-applications.aspx)

但立即出现异常“无法调用 ShowJobPlanIFrame”

有没有办法处理这个任务？“浏览器外”模式不适合。

谢谢。

==================================================== ==========================

**更新：**

它使用**IFrame 覆盖**解决了。

按钮单击调用 C# 中的以下代码：

```
var scriptObject = (ScriptObject)HtmlPage.Window.GetProperty("ShowJobPlanIFrame");
scriptObject.InvokeSelf(url); 
```

其中“ **ShowJobPlanIFrame** ”定义如下： [http ://weblogs.asp.net/dwahlin/archive/2010/05/10/integrating-html-into-silverlight-applications.aspx](http://weblogs.asp.net/dwahlin/archive/2010/05/10/integrating-html-into-silverlight-applications.aspx)

这允许我将数据传递到 XML 编辑器，然后将其取回。

我在上面提到的 JavaScript 函数调用错误是 JavaScript 代码本身的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:14:35.557

一个非常相似的场景：[https ://stackoverflow.com/a/7919065/384316](https://stackoverflow.com/a/7919065/384316)

> 尝试使用 iframe 覆盖，然后您可以加载任何类似 HTML 的内容。
> 
> 这里有一个很好的解释如何做到这一点：http: [//www.wintellect.com/cs/blogs/jlikness/archive/2010/09/19/hosting-html-in-silverlight-not-out-of-浏览器.aspx](http://www.wintellect.com/cs/blogs/jlikness/archive/2010/09/19/hosting-html-in-silverlight-not-out-of-browser.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T21:31:48.763

它使用 IFrame 覆盖来解决。

按钮单击调用 C# 中的以下代码：

```
var scriptObject = (ScriptObject)HtmlPage.Window.GetProperty("ShowJobPlanIFrame");
scriptObject.InvokeSelf(url); 
```

其中“ShowJobPlanIFrame”的定义如下：

[http://weblogs.asp.net/dwahlin/archive/2010/05/10/integrating-html-into-silverlight-applications.aspx](http://weblogs.asp.net/dwahlin/archive/2010/05/10/integrating-html-into-silverlight-applications.aspx)

这允许我将数据传递到 XML 编辑器，然后将其取回。我在上面提到的 JavaScript 函数调用错误是 JavaScript 代码本身的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:43:57.943

你试过`NavigationFramework`吗`Silverlight`？它的功能可能以比使用多个浏览器页面更简单的方式支持您的需求。

# c# - 什么控件应该适合显示画布？

> ID：11527435
> 
> 赞同：1
> 
> 时间：2012-07-17T17:09:50.120
> 
> 标签：c#, wpf-controls, datatemplateselector, datatemplate

我找不到更好的标题。

我有很多画布图纸，根据程序中的参数，应该显示相应的画布

前任：

```
- PARAMETER: 1  OUTPUT: CANVAS1
- PARAMETER: 2  OUTPUT: CANVAS2 
```

我在互联网上阅读的一种方法是......这些画布中的每一个都应该在 a 内`DataTemplate`，并使用 a`DataTemplateSelector`来选择各自的`DataTemplate`.

我想我可以用来显示的控件是 a `ContentControl`，但我的问题是，我应该在 Content 属性中绑定`PARAMATER`，对吗？

# android - 如何让 android 在通话中做出反应并触发接近传感器？

> ID：11527436
> 
> 赞同：0
> 
> 时间：2012-07-17T17:09:52.877
> 
> 标签：android, sensors, proximity

我有一个可以进行 VoIP 通话的应用程序。在这些通话期间，我希望屏幕的反应与正常通话时完全一样。也就是说，我希望屏幕禁用所有事件并在用户触发接近传感器时关闭。当然，当用户将耳朵从手机上移开时，我希望手机打开屏幕并启用所有事件。我之前尝试过自己关闭并打开屏幕。从来没有工作过。所以我想我已经使用了这个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:21:54.783

我发现了一个类似的问题，它使用 Android 手机应用程序中的示例提供了有关接近传感器的一些重要信息。

[android：靠近脸时关闭屏幕](https://stackoverflow.com/questions/3018716/android-turn-off-screen-when-close-to-face)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-13T13:31:45.390

这是可以帮助您的代码..这演示了我们如何使用 SensorManager 类访问接近传感器，这里接近传感器将触发它调用一个更改图像视图的方法，您可以在该方法上尝试您的代码.... , 在此处获取完整的[源代码](http://d-codepages.com/index.php/android/coding-brginners/15-proximity-trigger-hover-to-trigger)

```
public class MainActivity extends Activity {
SensorManager sm;
Sensor ProximitySensor;
boolean state=true;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    txstate= (TextView) findViewById(R.id.txstate);
    sm = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
    ProximitySensor = sm.getDefaultSensor(Sensor.TYPE_PROXIMITY);
    sm.registerListener(proximitySensorEventListener,  ProximitySensor, SensorManager.SENSOR_DELAY_FASTEST);

}
SensorEventListener proximitySensorEventListener = new SensorEventListener()
{   
  @Override
  public void onAccuracyChanged(Sensor sensor, int accuracy) 
  {

  }
@Override
public void onSensorChanged(SensorEvent event) 
{
if(event.sensor.getType()==Sensor.TYPE_PROXIMITY)

    {if((int)(event.values[0])==1)

        {

                    call();
        }
    }

}

private void call() 

{
        ImageView im = (ImageView) findViewById(R.id.imageView1);
        if(state)
        {
            state =false;                
            im.setImageResource(R.drawable.smile);                   
        }
        else 
        {
            state=true;              
            im.setImageResource(R.drawable.sad);             
        }
    }
};
} 
```

# jquery - 使用 jQuery 的 webkitTransform

> ID：11527437
> 
> 赞同：1
> 
> 时间：2012-07-17T17:09:53.837
> 
> 标签：jquery, webkit, transform

当我使用此代码时，一切正常：

```
document.getElementById('cube').style.webkitTransform = "rotateX("+xAngle+"deg) rotateY("+yAngle+"deg)"; 
```

但是，当我使用此`jQuery`代码时，它将不起作用：

```
jQuery('cube').css('-webkit-transform', "rotateX("+xAngle+"deg) rotateY("+yAngle+"deg)"); 
```

区别在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:12:04.813

它应该是：

```
jQuery('#cube').css('webkitTransform', "rotateX("+xAngle+"deg) rotateY("+yAngle+"deg)" ); 
```

或者

```
jQuery('#cube').css('webkit-transform', "rotateX("+xAngle+"deg) rotateY("+yAngle+"deg)" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:11:55.390

你忘记了`#`：

```
jQuery('#cube').css('-webkit-transform', 
                         "rotateX("+xAngle+"deg) rotateY("+yAngle+"deg)" ); 
```

见小提琴：http: [//jsfiddle.net/maniator/fxxHa/](http://jsfiddle.net/maniator/fxxHa/)

# field - Access 2010 表单不显示查询

> ID：11527438
> 
> 赞同：0
> 
> 时间：2012-07-17T17:09:54.997
> 
> 标签：field, ms-access-2010

我确定这是一个简单的解决方法，但我似乎找不到它。我只有一个表单，它将是另一个表单的子表单，需要显示查询结果。

查询很简单，只显示指定日期之间的所有记录字段。查询效果很好，但是当我将其作为记录源附加到表单时，它不会显示数据。我可以看到正确数量的记录选择器，所以我知道它理解查询，但它好像所有字段都被隐藏了！

我还尝试构建对表单记录源的查询，该查询只是选择查询。*来自查询。奇怪的是，我以前也有过这个工作，但我必须指定每个字段。我的意思是：

从查询中选择标题 从查询中
选择类型 从查询
中选择日期 从查询...

等等所有领域，但这似乎很愚蠢，谁能想到我可能做错了什么？
提前致谢！

**编辑，忘了提我也尝试了我上面提到的愚蠢的解决方案，但它没有工作，所以它肯定是我没有看到的一些问题，一些可能没有正确设置的属性**

@sshekhar 好吧，在我使用 Access 2010 时，它并不是真正的代码。我有一个表单需要显示一个子表单，该表单执行此查询以显示具有位于用户指定日期之间的数据字段的记录。查询工作并显示正确的记录，但它附加到的表单仅显示记录选择器，并且所有字段似乎都是“隐藏的”。我认为这可能是表单的一个属性设置不正确，但我从另一个我使用的数据库中检查了测试表单，每个数据库都有似乎相同的设置。所以我很茫然！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:24:53.677

因此，即使我使用包含所有字段的查询，它也不会显示内容，除非您转到“添加现有字段”并添加您想要查看的所有字段。这似乎真的很愚蠢，尤其是当查询结果但至少现在可以工作时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:36:27.433

我遇到了这个问题，发现将属性 DataEntry 设置为 YES*只会*显示新记录。从[微软帮助](http://office.microsoft.com/en-au/access-help/dataentry-property-HA001232728.aspx)：

> 您可以使用 DataEntry 属性来指定是否打开绑定表单以仅允许数据输入。Data Entry 属性不能确定是否可以添加记录；它只确定是否显示现有记录。读/写布尔值。

# objective-c - 运行我的应用程序后，我一直遇到这个问题

> ID：11527439
> 
> 赞同：2
> 
> 时间：2012-07-17T17:09:55.143
> 
> 标签：objective-c, ios

我不知道为什么，但是在没有问题的情况下工作了一段时间后，我添加了一些按钮，然后我启动了我的应用程序并出现了这个错误：

> ld：在/Users/alexbarco/Library/Developer/Xcode/DerivedData/RecolectaDatos-ayjpqqcajbhuzvbkvernzsyunpbe/Build/Intermediates/RecolectaDatos.build/Debug-iphonesimulator/RecolectaDatos.build/Objects-normal/i386/SeconViewController.o和/中重复符号_x用户/alexbarco/Library/Developer/Xcode/DerivedData/RecolectaDatos-ayjpqqcajbhuzvbkvernzsyunpbe/Build/Intermediates/RecolectaDatos.build/Debug-iphonesimulator/RecolectaDatos.build/Objects-normal/i386/ViewController.o for architecture i386 clang：错误：链接器命令退出代码 1 失败（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:10:56.160

“重复符号”消息意味着您在`_x`同一范围内两次声明某个名称（在本例中为 ）。假设你有这样的代码：

```
int _x = 1;
int _x = 2; 
```

你会期望得到一个错误，对吧？您可以同时为两件事使用相同的名称。

你得到的错误基本上是一样的。你在`_x`某处声明，从编译器的角度来看，你做了两次。有几种方法可以解决这个问题，具体取决于所`_x`代表的内容。

chrahey 的回答解释了前向类声明。我不会在这里再次讨论这个问题，只是说前向声明可以帮助您解决循环引用，其中 A 类的定义取决于 B 类，反之亦然。

If`_x`是一个变量，很可能您正试图在头文件中声明它。编译器基本上会将您导入的每个头文件的内容复制到源文件中，因此如果您在头文件中声明一个变量，然后将该头文件导入两个或多个实现文件，您最终会得到多个声明多变的。为了解决这个问题，使用`extern`关键字告诉编译器“这个名称将在其他地方声明”，然后将真正的声明放在一个实现文件中：

富.h：

```
extern int _x; 
```

Foo.m

```
int _x; 
```

功能几乎相同。看起来那`_x`不是一个函数，但如果是，并且如果你愚蠢地将函数定义放在头文件中，那么如果该文件被导入多个实现文件，你会再次收到错误. 这就是为什么头文件包含原型而不是定义的原因：

富.h：

```
int foo(int a); 
```

Foo.m

```
int foo(int a)
{
    return a + 10;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:14:39.500

每当我有重复的符号错误时，几乎总是因为我的标题中有一个循环#import。解决方案非常简单，尽可能使用前向声明，并从 .m 文件中 #import .h 文件。

只有两种情况您需要从另一个 #import 一个 .h：

1.  如果您在#import 中扩展类
2.  您正在#import中*实现协议*

具体来说，您*不需要*仅仅为了在签名中使用类名或协议而导入文件；而是使用前向声明。

例如，这个（在 Bar.h 中）：

```
#import "Foo.h" 
```

可能会变成这样（Bar.h）：

```
@class Foo;
@protocol FooDelegate; 
```

和 bar.m：

```
#import "Foo.h" 
```

这是指向[前向声明文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-87895)的链接。

# iphone - 如何在 iOS 中为图像添加 3 边边框

> ID：11527442
> 
> 赞同：0
> 
> 时间：2012-07-17T17:10:12.720
> 
> 标签：iphone, ios, ios5, uiimageview, border

我想为图像添加边框。我不想将它完全添加到 4 个方面。我只想在特定的 3 侧添加边框，即顶部、左侧和底部。怎么做？

`[imageView.layer setBorderColor:[[UIColor clearColor] CGColor]];`

这将在图像的 4 侧设置边框。但我只希望它在 3 个方面。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:23:08.653

您需要在希望有边框的边缘上添加彩色子视图。请参阅[此答案](https://stackoverflow.com/a/11236646/30618)-对于顶部的边框，请遵循相同的模式，但使用`autoresizingMask`of `UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleBottomMargin`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:24:23.327

确保 UIImageView 的 clipsToBounds 设置为 YES。创建一个边框宽度比图像宽的 UIView。将该图层上的边框设置为所需的颜色。将此视图的框架设置为 0,0、imageWidth+border、image.height 并设置 maskToBounds = YES。将此作为子视图添加到您的 UIImageView。它应该在除右侧之外的所有区域设置边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:25:32.687

您可以在实际图像层后面绘制一个高 2 像素和宽 1 像素的填充 CALayer。将框架设置为图像上方和左侧 1 像素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T14:00:44.250

用阴影操作视图，这很容易做到

```
_topInfoView.layer.masksToBounds = NO;
_topInfoView.layer.shadowOffset = CGSizeMake(0, 1);
_topInfoView.layer.shadowColor = [[UIColor grayColor]CGColor];
_topInfoView.layer.shadowRadius = 0.27f;
_topInfoView.layer.shadowOpacity = 0.6; 
```

# google-app-engine - 'GinjectorGenerator' 在重新绑定 '...ClientGinjector' 时引发异常

> ID：11527445
> 
> 赞同：0
> 
> 时间：2012-07-17T17:10:26.873
> 
> 标签：google-app-engine, gwt, guice, gwt-gin, gwtp

运行使用 GWT、GWT-Platform 和 App 引擎的 Web 应用程序时出现此错误：

> 生成器“com.google.gwt.inject.rebind.GinjectorGenerator”在重新绑定“com.myapp.client.gin.ClientGinjector”时引发异常

我的应用程序在文件夹中有这些罐子`WEB-INF/lib`：

```
guice-3.0.jar  
gin-1.5-post-gwt-2.2.jar
guice-servlet-3.0.jar
gwtp-all-0.7.jar 
```

这是详细的错误日志`Development Mode`：

> [DEBUG] [app] - 验证新编译的单元 [DEBUG] [app] - 重新绑定 com.myapp.client.gin.ClientGinjector [DEBUG] [app] - 调用生成器 com.google.gwt.inject.rebind.GinjectorGenerator
> [错误] [app] - 生成器 'com.google.gwt.inject.rebind.GinjectorGenerator' 在重新绑定 'com.myapp.client.gin.ClientGinjector' 时引发异常
> 
> [错误] [app] - 'com.myapp.client.gin.ClientGinjector' 的延迟绑定失败；预计后续失败 [错误] [app] - 无法通过延迟绑定创建“com.myapp.client.MainAppEntryPoint”的实例
> 
> [错误] [app] - 无法加载模块入口点类 com.myapp.client.MainAppEntryPoint（有关详细信息，请参阅相关异常）
> 
> [错误] [app] - 无法从用户代理“Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11”在 127.0.0.1:53782 加载模块“app”

我一直试图弄清楚我的应用程序中可能缺少什么，但我仍然找不到修复程序？是什么导致了这种错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-06T01:32:08.133

这通常是由于在 gwt 项目的客户端文件夹中添加了不支持 gwt 的类型或导入，例如 java.net.* 等。仅支持 gwt 白名单中支持的 java 类型，并且可以进行序列化。重新绑定错误掩盖了这些错误。因此，梳理您的项目，看看您是否在客户端或共享文件夹中包含这些类型和导入

# joomla - 修改本机模块以与其他表一起使用

> ID：11527446
> 
> 赞同：2
> 
> 时间：2012-07-17T17:10:33.643
> 
> 标签：joomla, module, joomla2.5

我想修改一个显示类别文章的本机 joomla 模块。我希望它显示其他前缀表的文章（两个 joomla 网站都在同一台服务器上）。

请注意，我已经查看了可用的扩展，但它们都不适合。

我试图通过更改本机 joomla 模块表的 helper.php

`$com_path =` 但我得到了一个`Fatal error.`

本机代码： `$com_path = JPATH_SITE.'/components/com_content/';`

我的尝试： `$com_path = '/homez.420/kmxsiksf/rsc/components/com_content/helpers/route.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:46:14.883

要在 Joomla 扩展中使用外部数据库（即使它在您的服务器上），正确的方法是在检索 JDatabase 对象之前设置一些选项。

创建一个帮助类来处理您的外部数据库，并且在每个使用数据库对象的方法中，您只需在检索对象之前设置外部数据库的选项：

```
$option = array(); 
$option['driver']   = 'mysql';
$option['host']     = 'localhost';    // In your case probably localhost 
$option['user']     = 'dbusername';       // User for database authentication $option['password'] = 'badpass12345';   // Password for database authentication $option['database'] = 'bigdatabase';      // Database name 
$option['prefix']   = 'abc_';             // Database prefix (may be empty)  
$db = & JDatabase::getInstance( $option ); 
```

您现在可以像使用常规数据库一样使用外部数据库。

# php - 无法使用 SimpleXML 解析 CDATA

> ID：11527447
> 
> 赞同：3
> 
> 时间：2012-07-17T17:10:38.997
> 
> 标签：php, simplexml, libxml2

我有以下 XML 代码：

```
<para>
      <![CDATA[
        <?php
        $data = '<?xml version="1.0"?>
        <root>content</root>';
        $sxe = simplexml_load_string($data);
        var_dump($sxe);
        ?>
      ]]>
    </para> 
```

我想解析 CDATA 部分以获取此结果：

```
Content:
<?php
$data = '<?xml version="1.0"?>
<root>content</root>';
$sxe = simplexml_load_string($data);
var_dump($sxe);
?> 
```

我使用以下方法，但它不起作用。

```
$xml='sxml.xml';
$book = simplexml_load_file($xml, 'SimpleXMLElement', LIBXML_NOCDATA);

$para = $book->chapter->para[1];
print "Content: ".$para."<br>";

foreach($para AS $node) {
    print "Iter Content: ".$node."<br>";    
} 
```

这导致：

```
Content: 

        content';
        $sxe = simplexml_load_string($data);
        var_dump($sxe);
        ?> 
```

在 phpinfo() 中，它显示 libxml 已启用并处于活动状态。有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:19:36.807

您应该使用[htmlspecialchars对特殊字符进行编码](http://php.net/manual/en/function.htmlspecialchars.php)

例如： `print "Content: ".htmlspecialchars($para)."<br>";`

# jquery - 具有行跨度支持的 ajax 数据表

> ID：11527450
> 
> 赞同：0
> 
> 时间：2012-07-17T17:10:47.013
> 
> 标签：jquery, ajax, datatable

你知道任何支持 rowspan 属性的 ajax 数据表吗？我有用于数据生成的服务器端脚本，我想在表格视图中显示这些数据，并将一些单元格按行分组。

例如，我想渲染这样的东西：

![表视图示例](../Images/7ac0b3d13673e592ea8fb360f753f168.png)

[DataTables](http://datatables.net)不支持 rowspan 属性。它仅适用于独立行，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:29:29.313

虽然您绝对正确，DataTables 不会完全按照您的图像显示，但有一个选项可以使用内部的任何 html 组合来显示/隐藏行详细信息（在您的情况下，它可能是第 3 列和4)

潜在地，这可能是解决您的示例面临的不可避免的 UI 模式问题的一种干净的方法：越来越多的公司，加上许多产品将压倒浏览器（并迅速降低用户体验）

[这是示例](http://datatables.net/release-datatables/examples/server_side/row_details.html)

# java - 将字符串“30-MAR-07”转换为日期对象

> ID：11527451
> 
> 赞同：0
> 
> 时间：2012-07-17T17:10:49.083
> 
> 标签：java, date, simpledateformat

```
SimpleDateFormat formatter = new SimpleDateFormat("mm/dd/yyyy");
dt = formatter.parse(temp[0]); 
```

给我错误

java.text.ParseException：无法解析的日期：“30-MAR-07”

有什么方法可以将给定的 String 格式化为 Date 对象，而无需编写自己的字符串拆分和将数字转换为月份的方法？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T17:12:40.720

使用正确的格式，如下，

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yy"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T17:13:09.843

您的`SimpleDateFormat`模式对于“30-MAR-07”是*完全不正确的。*它的值顺序错误，使用了错误的分隔符和错误的月份格式。你要：

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yy"); 
```

您可能还想指定语言环境，例如

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yy", Locale.US); 
```

我已经检查过它是否有效 - 至少在我的机器上:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T17:14:55.723

尝试这个...`(new SimpleDateFormat("dd-MMM-yy")`

```
System.out.println(new SimpleDateFormat("dd-MMM-yy").format(new Date("30-MAR-07"))); 
```

# sql - 如何在多天的时间内仅检索一天内的平均值

> ID：11527458
> 
> 赞同：1
> 
> 时间：2012-07-17T17:11:13.870
> 
> 标签：sql, oracle, average

希望标题不会太混乱。这是我的代码

```
SELECT SRV_NAME, TOT_CPU, TOT_MEM, SNAP_DATE
FROM capacity2.SRV_CAPACITY_UNIX
WHERE TOT_CPU >= 90 OR TOT_MEM >= 90 AND SNAP_DATE BETWEEN to_date('14-jun-2012 00:00:00', 'dd-mon-yyyy hh24:mi:ss') AND to_date('14-jul-2012 00:00:00', 'dd-mon-yyyy hh24:mi:ss')
ORDER BY SRV_NAME desc, SNAP_DATE desc; 
```

代码返回的数据示例如下：

```
SNAP_DATE       TOT_CPU TOT_MEM SRV_NAME
6/22/2012 0:00  99.98   70.86   server555
6/22/2012 0:05  99.98   70.9    server555
6/22/2012 0:10  99.98   70.93   server555
6/22/2012 0:15  99.98   71.06   server555
6/22/2012 0:20  99.98   70.87   server555
...
6/22/2012 23:35 99.97   71.12   server555
6/22/2012 23:40 99.99   71.12   server555
6/22/2012 23:45 99.97   71.12   server555
6/22/2012 23:50 99.98   71.12   server555
6/22/2012 23:55 99.98   71.12   server555 
```

目标：

为给定持续时间（在本例中为一个月/30 天）`capacity2.SRV_CAPACITY_UNIX`内 90% 及以上（in`TOT_CPU`和）的服务器（服务器在数据库中）提取数据。`TOT_MEM`我需要绘制这些数据，并且默认情况下每 5 分钟记录一次数据，因此在大约 30 天的时间里，一天内我剩下 288 行。这大约是 8,600 行，我可以在图表上绘制，这显然是不切实际的。

因此，我需要做的是编写一个 SQL 查询，它只会提取每天的平均值`TOT_CPU`，`TOT_MEM`所以我只剩下 30 行数据，我需要绘制 30 天（每天一行）。

这是我第一次使用 Stack Overflow，所以我试图尽可能清楚。如果您需要任何信息，我一定会提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:19:04.640

根据`TO_DATE`功能，我假设这是 Oracle。因此，它应该看起来像这样：

```
select SRV_NAME, TRUNC(SNAP_DATE) SNAP_DATE, 
       avg(TOT_CPU) AVG_TOT_CPU, avg(TOT_MEM) AVG_TOT_MEM
FROM capacity2.SRV_CAPACITY_UNIX
WHERE TOT_CPU >= 90 OR TOT_MEM >= 90 
AND SNAP_DATE BETWEEN to_date('14-jun-2012 00:00:00', 'dd-mon-yyyy hh24:mi:ss') 
              AND     to_date('14-jul-2012 00:00:00', 'dd-mon-yyyy hh24:mi:ss')
group by SRV_NAME, TRUNC(SNAP_DATE) 
```

请注意，这也是按服务器分类的，您可能会为每台服务器绘制一个系列。

另请注意，如果有任何机会，特定日期没有记录的数据，那一天将不会出现在结果中，您的绘图逻辑应该处理它。

# c# - 在两个继承的 Razor 视图之间共享共同点

> ID：11527459
> 
> 赞同：2
> 
> 时间：2012-07-17T17:11:19.943
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我想继承 Razor WebViewPage 因为有一些我想为每个视图执行的通用代码，还有一些在特定的模型驱动视图中。

我有 2 个继承类

```
public abstract class TemplateEngine : WebViewPage  {
 ///...code
} 
```

和

```
public abstract class TemplateEngine<TModel> : WebViewPage<TModel> {
    ///...code
} 
```

无论视图的类型如何，我都想使用一些代码——无论是否是强类型，还有一些特定于强类型视图。我不想复制它——本质上我希望强类型继承视图能够访问我在通用继承视图中编写的所有代码。

我想知道我是否缺少一些基本概念......所以任何指针都会很棒。

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:14:46.887

我就是这样做的。我的无类型类继承自我的类型为动态的类。我没有在无类型类中定义任何新内容，因为它继承了我想要的一切。不确定这是最好的

```
abstract public class CxWebView<T> : WebViewPage<T>
{
    /* all of the methods & properties I want available in every view */
}

abstract public class CxWebView : CxWebView<dynamic>
{
} 
```

在我的views/web.config 中，我将基本类型设置为CxWebView

```
<pages pageBaseType="CxLib.Web.CxWebView">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Data" />
    <add namespace="System.Data.Entity" />
  </namespaces>
</pages> 
```

# bash - 按排序顺序输出参数

> ID：11527469
> 
> 赞同：7
> 
> 时间：2012-07-17T17:12:04.790
> 
> 标签：bash, sorting

我需要编写一个 bash 脚本，按排序顺序打印出它的命令行参数，每行一个。

我写了这个脚本，它工作正常，但还有其他方法吗？特别是没有将其输出到文件和排序。

```
#!/bin/bash

for var in $*
do
    echo $var >> file
done

sort file
rm file 
```

程序试运行：

```
$ script hello  goodbye zzz aa
aa
goodbye
hello
zzz 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-17T17:14:41.747

您可以通过管道对 for 循环进行排序，或者只是执行

```
printf '%s\n' "$@" | sort 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-17T17:15:10.490

```
#!/bin/bash

for var in "$@"; do
    echo "$var"
done | sort 
```

您想使用`$@`引号（而不是`$*`）来容纳带空格的参数，例如

```
script hello "goodbye, cruel world" 
```

管道摆脱了对临时文件的需要。

# image-processing - 图像处理中如何使用CIELAB获得光照不变性？

> ID：11527471
> 
> 赞同：2
> 
> 时间：2012-07-17T17:12:09.843
> 
> 标签：image-processing, colors, computer-vision, color-space

我发现不推荐在 RGB 空间中使用欧几里得距离来比较图像分割等应用中的两种颜色，因为它依赖于照明和光照条件。此外，由于 HSV*色调*值在低强度下的数值不稳定性，因此 CIELAB 颜色空间被认为是更好的选择。

我的问题是我不明白**如何**实际使用它：由于 CIELAB 与设备无关，因此您不能简单地从某些 RGB 值转换为它，而无需了解用于获取这些 RGB 值的传感器的任何信息。据我所知，您必须首先在中间步骤中转换为 CIEXYZ，但根据源的确切 RGB 工作空间，有几种不同的[矩阵可用。](http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html)

或者，如果您只想使用 CIELAB 比较两种颜色（如我所说，例如执行图像分割），您选择的矩阵是否无关紧要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:25:13.203

如果您不知道要转换的确切色彩空间，您可以使用[sRGB](http://en.wikipedia.org/wiki/Srgb) - 它被设计为与当时的平均显示器相对应的通用空间。当然，这不会是准确的，但它可能是可以接受的。正如您所观察到的，图像分割不需要完美的准确性，因为颜色之间的相对距离不会受到实质性影响。

# java - 如何使用复选框将表格单元格从可编辑更改为不可编辑

> ID：11527472
> 
> 赞同：2
> 
> 时间：2012-07-17T17:12:16.537
> 
> 标签：java, swing, netbeans, jtable

我在 UI 上创建了一个 jTable，我想根据其他单元格的布尔状态（复选框）将单元格属性从可编辑更改为不可编辑。我一直在查看几个示例，但未能达到预期的目的，主要是因为我犯了使用 NetBeans 创建 UI 的错误，因此创建了大量我什至无法编辑的代码。

我的表：[表 http://freepicupload.com/images/337jtable1.png](http://freepicupload.com/images/337jtable1.png)！

* * *

**编辑：固定，工作，代码如下。**

生成表/模型的代码：

```
jTable1.setModel(new MyTableModel()); 
```

表模型和实现的逻辑：

```
class MyTableModel extends AbstractTableModel {
    private String[] columnNames = {"Job Type",
                                    "Name",
                                    "avg Time",
                                    "Buffer",
                                    "Buffer Parts",
                                    "Color"};
    private Object[][] data = {
    {"1", "Station 1",
     new Integer(10), new Boolean(false), new Integer(0), Color.red},
    {"2", "Station 2",
     new Integer(10), new Boolean(false), new Integer(0), Color.blue},
    {"3", "Station 3",
     new Integer(10), new Boolean(false), new Integer(0), Color.green},
    {"4", "Station 4",
     new Integer(10), new Boolean(false), new Integer(0), Color.orange},
    {"5", "Station 5",
     new Integer(10), new Boolean(false), new Integer(0), Color.black}
    };

    public int getColumnCount() {
        return columnNames.length;
    }

    public int getRowCount() {
        return data.length;
    }

    public String getColumnName(int col) {
        return columnNames[col];
    }

    public Object getValueAt(int row, int col) {
        return data[row][col];
    }

    /*
     * JTable uses this method to determine the default renderer/
     * editor for each cell.  If we didn't implement this method,
     * then the last column would contain text ("true"/"false"),
     * rather than a check box.
     */
    public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();
    }

    /*
     * Don't need to implement this method unless your table's
     * editable.
     */
    @Override
    public boolean isCellEditable(int row, int col) {
        //Note that the data/cell address is constant,
        //no matter where the cell appears onscreen.
        if (col == 0) { return false; }
        else if (col == 4) { 
            /*if (getValueAt(row,(col-1)) == "false") { System.out.println("NAO PODES EDITAR BOI"); }
            else if (getValueAt(row,(col-1)) == "true") { System.out.println("Podes que eu deixo!"); } */
            boolean di = (Boolean) getValueAt(row,(col-1));
            if (!di) { return false; }
            else { return true; }
        }
        else { return true; }
    }

    /*
     * Don't need to implement this method unless your table's
     * data can change.
     */
    public void setValueAt(Object value, int row, int col) {
        data[row][col] = value;
        fireTableCellUpdated(row, col);
    }

    private void printDebugData() {
        int numRows = getRowCount();
        int numCols = getColumnCount();

        for (int i=0; i < numRows; i++) {
            System.out.print("    row " + i + ":");
            for (int j=0; j < numCols; j++) {
                System.out.print("  " + data[i][j]);
            }
            System.out.println();
        }
        System.out.println("--------------------------");
    }
} 
```

在这种情况下，如果第 3 列的复选框被选中（状态为真），它将只允许编辑第 4 列上的单元格。希望能帮助到你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:21:15.840

GUI 编辑器默认为您创建一个，但您可以通过指定相关属性`DefaultTableModel`从生成的代码中撬开模型，如下[所示](https://stackoverflow.com/a/11456628/230513)。[一旦您控制了模型，您就可以根据需要或如此处](https://stackoverflow.com/a/4528604/230513)所示进行覆盖。`Custom code``isCellEditable()`

![图片](../Images/ea50d1374deecd999c95e7daad4a88fb.png)

# maven - 如何使用 maven-assembly-plugin 定义执行顺序

> ID：11527473
> 
> 赞同：5
> 
> 时间：2012-07-17T17:12:20.007
> 
> 标签：maven, maven-assembly-plugin

我正在将项目从 Ant 迁移到 Maven。我需要交付的最终发行版是一个 zip，其中包含一个可执行 jar 及其所有依赖项。这是我的pom的一部分：

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.2-beta-4</version>
                <configuration>
                    <finalName>ProjectDistribution</finalName>
                    <appendAssemblyId>false</appendAssemblyId>              
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>                            
                    </descriptorRefs>
                    <archive>
                        <manifest>
                            <mainClass>fullQualifiedNameToMainClass</mainClass>
                            <addClasspath>true</addClasspath>                               
                        </manifest>
                    </archive>
                    <descriptors>
                        <descriptor>${project.basedir}/src/main/assembly/dep.xml</descriptor>
                    </descriptors>                      
                </configuration>
                <executions>
                    <execution>
                        <id>jar-with-dependencies</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>dist</id>
                        <phase>assembly</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>                        
                </executions>                                       
            </plugin> 
```

这是汇编文件：

```
<assembly>
<id>dist</id>
<formats>
    <format>zip</format>
</formats> 
<!-- 1st approach-->
<!--files>
    <file>
        <source>
            /target/ProjectDistribution.jar
        </source>
        <outputDirectory>/</outputDirectory>
    </file>
</files-->
<fileSets>
            <!-- 2nd approach-->        
    <!--fileSet>
        <directory>/target</directory>
        <outputDirectory></outputDirectory>
        <includes>      
            <include>*.jar</include>
        </includes>
    </fileSet-->
    <fileSet>
        <directory>/HelpFiles</directory>
        <outputDirectory></outputDirectory>
        <includes>
            <include>*.*</include>
        </includes>
    </fileSet>
</fileSets> 
```

我运行 1.- mvn compile、2.- mvn package 和 3.- mvn assembly:single

**我正在处理的问题是**

它确实生成了包含所有依赖项的 jar，它确实生成了 zip，但它不包括 zip 中的 jar。我非常需要想办法让程序集首先生成 jar 并等到它被创建（因为它的大小是 5 MB）然后创建 zip。现在第一种和第二种方法 - 从程序集文件中 - 被注释掉了，但是，我已经使用了这两种方法，但它们似乎都不起作用。

任何帮助将不胜感激！

埃里克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T19:48:13.583

要使其正常工作，您需要拆分`<configuration>`并将其放入两个插件执行中：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-assembly-plugin</artifactId>
      <version>2.2-beta-4</version>
      <executions>
        <execution>
          <id>jar-with-dependencies</id>
          <phase>verify</phase>
          <goals>
            <goal>single</goal>
          </goals>
          <configuration>
            <finalName>ProjectDistribution</finalName>
            <appendAssemblyId>false</appendAssemblyId>
            <descriptorRefs>
              <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
            <archive>
              <manifest>
                <mainClass>fullQualifiedNameToMainClass</mainClass>
                <addClasspath>true</addClasspath>
              </manifest>
            </archive>
          </configuration>
        </execution>
        <execution>
          <id>dist</id>
          <phase>verify</phase>
          <goals>
            <goal>single</goal>
          </goals>
          <configuration>
            <descriptors>
              <descriptor>${project.basedir}/src/main/assembly/dep.xml</descriptor>
            </descriptors>
          </configuration>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

第一次执行将创建 jar 文件。第二次执行将获取该 JAR 文件并将其与其他文件一起放入 ZIP 文件中。使用此配置，您可以只执行`mvn verify`或`mvn install`创建程序集。

还有两件事需要考虑：

*   您应该使用*验证*阶段来构建您的程序集，因为 jar-with-dependencies 描述符包括项目工件本身。在打包阶段，项目工件将无法打包
*   jar-with-dependencies 描述符创建具有所有依赖项的 JAR 文件的能力非常有限。您应该改用[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:39:10.570

您正在将预定义`jar-with-dependencies`与自定义`zip`描述符混合。您通常会想要其中之一 - 而不是两者兼而有之。

看起来您想要一个包含项目工件及其依赖项的 zip。为此，您无需创建`jar-with-dependencies`. 但是，如果您确实想要一个包含所有依赖项的单个可执行 jar，那么不清楚为什么需要再次压缩它。

# mocha.js - Chai, Mocha：识别应该断言

> ID：11527474
> 
> 赞同：5
> 
> 时间：2012-07-17T17:12:28.477
> 
> 标签：mocha.js, should.js, chai

我使用`mocha`and`chai`作为断言。

我的规范中有几个断言：

```
Exp1.should.be.true
Exp2.should.be.true
Exp3.should.be.true 
```

如果其中一个失败，mocha 会写“预期错误为真”。有没有办法识别它们？

我`expect`可以做到：

```
expect(Exp1, 'Exp1').to.be true 
```

这样的事情可能`should`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-17T09:14:42.563

目前显然`should`不支持自定义错误消息。

您可以创建自己的助手来设置消息：

```
var chai = require('chai'),
    should = chai.should();

// Helper definition - should be in a shared file
chai.use(function(_chai, utils) {
  _chai.Assertion.addMethod('withMessage', function(msg) {
    utils.flag(this, 'message', msg);
  });
});

// Sample usage
it('should fail', function() {
  var Exp1 = false;
  var Exp2 = false;
  Exp1.should.be.withMessage('Exp1').true;
  Exp1.should.withMessage('Exp2').be.true;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-25T16:48:45.390

我检查了[关于 should 的 chai 代码，](https://github.com/chaijs/chai/blob/master/chai.js#L6997)发现当前接受的答案不正确或不完整。

如果您阅读那里，您会发现确实有一种方法可以在每个断言中包含您自己的自定义消息。问题是您可能需要更改断言语法以改用`should`'s 函数调用。

```
(1).should.equal(0, 'This should fail');
/****** Output with (I believe) default reporter *****
 * This should fail
 * + expected - actual
 *
 *  -1
 *  +0
 */ 
```

请注意，如果您使用自己的报告器，您的输出可能会有所不同。如果您愿意，您可能可以将 wrap`should`的函数包装为始终在断言输出中包含行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T22:49:39.967

我想知道为什么他们不简单地添加触发断言的行，但我自己也遇到了同样的问题。一位可以比我更好地手动操作的同事注意到有一个设置`includeStack`将为断言提供行号。 [http://chaijs.com/guide/styles/#configure](http://chaijs.com/guide/styles/#configure)

因为我做了很多异步，我可能会运行我的测试，`before`或者`beforeEach`然后`it`为每个断言单独运行。

# java - JTable中不同单元格中的不同imageIcon

> ID：11527477
> 
> 赞同：1
> 
> 时间：2012-07-17T17:12:39.147
> 
> 标签：java, swing, jtable, imageicon

我想我让 imageIcon 在每个单元格中以不同的方式显示，但是由于某种原因，当我编译它时，图像没有显示出来。它显示图像的名称，但图像本身不显示。这是一张图片。[http://i49.tinypic.com/r9ibrn.jpg](http://i49.tinypic.com/r9ibrn.jpg)

```
public class movies extends JFrame {

    public movies() {
    initComponents();

 }      

private void initComponents() {

    panel = new JPanel();
    logo = new JLabel();
    pane = new JScrollPane();

    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setBackground(new Color(255, 255, 204));
    setResizable(false);

    panel.setBackground(new Color(51, 51, 51));
    panel.setPreferredSize(new Dimension(290, 75));

    logo.setIcon(new ImageIcon(getClass().getResource("logo.png"))); 
    logo.setName("logo");
    logo.setRequestFocusEnabled(false);
    logo.setVerifyInputWhenFocusTarget(false);
    logo.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));

    ImageIcon icon1 = new ImageIcon("1.jpg");
    ImageIcon icon2 = new ImageIcon("2.jpg");
    ImageIcon icon3 = new ImageIcon("3.jpg");

    String[] columnNames = {"Section 1", "Section 2"};
    Object[][] data =
    {
        {icon1 + " Music", icon2 + " News"},
        {icon2 + " Movies"},
        {icon3 + " Games"},
    };

    DefaultTableModel model = new DefaultTableModel(data, columnNames);
    JTable table = new JTable( model )

    {
            public Class getColumnClass(int column)
        {
            return getValueAt(0, column).getClass();
        }
    };

    table.setPreferredScrollableViewportSize(table.getPreferredSize());

    table.setBackground(new Color(255, 255, 204));
    JScrollPane scrollPane = new JScrollPane( table );
    getContentPane().add( scrollPane );

    table.setRowHeight(50);
    pane.setViewportView(table);
    table.getColumnModel().getColumn(0).setResizable(false);
    table.getColumnModel().getColumn(1).setResizable(false);
}

public static void main(String args[]) {

        public void run() {
            new movies().setVisible(true);

        }
    });
}

private JLabel logo;
private JScrollPane pane;
private JPanel panel; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:26:13.873

您可以在调用`new ImageRenderer`构造函数时传入图像的名称（[阅读此内容](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)）。

```
public class Movies extends javax.swing.JFrame {
    public Movies() {
        initComponents();
        table.getColumnModel().getColumn(1).setCellRenderer(new ImageRenderer("1.jpg"));
        table.getColumnModel().getColumn(0).setCellRenderer(new ImageRenderer("2.jpg"));
    }
}

class ImageRenderer extends DefaultTableCellRenderer {
    ImageIcon icon = null;    

    ImageRenderer(String iconName) {
        icon = new ImageIcon(getClass().getResource(iconName));
    }
} 
```

# android - 在 webview Android 中获取事件点击链接

> ID：11527479
> 
> 赞同：3
> 
> 时间：2012-07-17T17:12:44.137
> 
> 标签：android, webview

我有一个 webview 并在该 webview 中有一些链接。现在，我需要当我单击 webview 中的链接时，会显示一个对话框......我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T17:56:46.237

```
wv.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
                                                                 ^^^
          // HERE YOU GET url
          return super.shouldOverrideUrlLoading(view, url);
      }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T17:35:38.530

您需要在 JavaScript 代码和客户端 Android 代码之间创建接口。这样，您的 JavaScript 代码就可以调用 Android 代码中的方法来显示对话框。

这里有一个很好的例子：

> [http://developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)

# c# - .NET 泛型：如何在运行时解析类型 T？

> ID：11527486
> 
> 赞同：7
> 
> 时间：2012-07-17T17:13:23.433
> 
> 标签：c#, .net, c#-4.0, generics

让我在以下示例中向您解释我要解决的问题：

```
class Animal {}
class Cat: Animal {}
class Dog : Animal { }

interface IAnimalHandler<in T> where T: Animal
{
    void Handle(T animal);
}

class AnimalHandler : 
    IAnimalHandler<Cat>,
    IAnimalHandler<Dog>
{
    public void Handle(Cat animal)
    {
        Console.Write("it's a cat !");
    }

    public void Handle(Dog animal)
    {
        Console.Write("it's a dog !");
    }
} 
```

所以现在我想遍历所有动物并像这样运行适当的处​​理程序：

```
 var ah = new AnimalHandler();
  var animals = new List<Animal> { new Cat(), new Dog() };
  animals.ForEach(a => ah.Handle(a)); 
```

但是，此代码不起作用（*Can not resolve method Hanler<>...*）只是因为 .NET 编译器需要在编译之前知道此处使用哪种类型，那么解决此问题的最佳方法可能是什么？换句话说，我需要让 .NET 编译器为**运行时类型 T 的每个实例采用类型 T 的**适当处理程序。我不想使用多个`if`语句检查实例类型。

更新：很抱歉错过了它，这对我来说似乎很明显，但现在我明白它并不那么明显：AnimalHandler 类包含不应该是域对象 Cat 和 Dog 的一部分的逻辑。将它们视为纯粹的普通域对象，我不希望它们知道任何类型的处理程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T19:39:51.023

您可以使用 C# 4`dynamic`将重载解决步骤从编译时移至运行时：

```
var ah = new AnimalHandler();
var animals = new List<Animal> { new Cat(), new Dog() };
animals.ForEach(a => ah.Handle((dynamic)a)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T17:32:57.113

对我来说，听起来您可以从[这种模式](http://lostechies.com/jimmybogard/2009/12/18/advanced-structuremap-connecting-implementations-to-open-generic-types/)中受益（使用 StructureMap 实现）。从您的原始陈述开始，“我需要让 .NET 编译器在运行时为每个 T 类型的实例采用适当的 T 类型处理程序”，它可能看起来像这样：

```
class Dog : Animal { }
class Cat : Animal { }

interface IHandler<T>
{
    void Handle(T eval);
}

class DogHandler : IHandler<Dog>
{
    public void Handle(Dog eval)
    {
        // do whatever
    }
}

class CatHandler : IHandler<Cat>
{
    public void Handle(Cat eval)
    {
        // do whatever
    }
} 
```

然后，您可以根据链接的文章配置 StructureMap，并使用以下方法获取适当的处理程序：

```
var dogHandler = _container.GetInstance<IHandler<Dog>>(); // instance of DogHandler
var catHandler = _container.GetInstance<IHandler<Cat>>(); // instance of CatHandler 
```

更新：要在循环中解决这些问题，您可以执行以下操作：

```
foreach (var animal in animals)
{
    var concreteHandlerType = typeof(IHandler<>).MakeGenericType(animal.GetType());
    var handler = _container.GetInstance(concreteHandlerType);
    handler.Handle(animal);
} 
```

我在一个相当大的系统中使用这种模式来实现相同的目标（纯域对象、不应该在这些域对象内的逻辑处理程序、简化的维护）。它在您希望为每个对象拥有一个单独的处理程序类的系统中运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:37:39.293

正是您的代码，但使用反射：

```
var ah = new AnimalHandler();
var animals = new List<Animal> { new Cat(), new Dog() };
animals.ForEach(a => {
  var method = ah.GetType().GetMethod("Handle", new Type[] {a.GetType()});
  method.Invoke(ah,new object[] { a });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T17:37:26.813

使用访问者模式和双重调度。它是这样工作的。处理程序可以处理不同类型的动物。动物选择了正确的方法，而不是让处理者选择正确的方法。这很容易，因为动物总是需要相同的方法（“他的”方法）。

```
class Animal
{
    string Name { get; set; }
    abstract public Handle(IAnimalHandler handler);
}

class Cat : Animal
{ 
    public overrides Handle(IAnimalHandler handler)
    {
        handler.Handle(this); // Chooses the right overload at compile time!
    }
}

class Dog : Animal
{ 
    public overrides Handle(IAnimalHandler handler)
    {
        handler.Handle(this); // Chooses the right overload at compile time!
    }
}

interface IAnimalHandler
{
    void Handle(Cat cat);
    void Handle(Dog dog);
}

class AnimalHandler : IAnimalHandler
{
    public void Handle(Cat cat)
    {
        Console.Write("it's cat {0}", cat.Name);
    }

    public void Handle(Dog dog)
    {
        Console.Write("it's dog {0}", dog.Name);
    }
} 
```

现在你可以像这样处理动物了

```
IAnimalHandler handler = new AnimalHandler();
animals.ForEach(a => a.Handle(handler));

handler = new SomeOtherAnimalHandler();
animals.ForEach(a => a.Handle(handler)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T17:23:51.610

这是一种方法：在 Animal 中创建一个抽象方法，例如称为“BeingHandled()”的东西，然后所有 Animal 的继承者都必须提供自己的实现。

然后你的 AnimalHandler 类将有一个 Handle(Animal a) 方法：

```
class AnimalHandler
{
    public void Handle(Animal a)
    {
        a.BeingHandled();
    }
} 
```

传递给 Handle() 的动物无关紧要，因为从 Animal 继承的任何东西都*必须*具有正确的实现才能工作，并且编译器会因为 Animal 基类中的抽象方法声明而知道这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T17:25:14.637

由于您使用的是 .NET 4.0，因此可以利用协变/逆变来为您的类型注入处理程序。

```
interface IAnimal
{
    string Name { get; set; }
}

class Dog : IAnimal
{
    public string Name { get; set; }
}

class Cat : IAnimal
{
    public string Name { get; set; }
}

interface IAnimalEvaluator<T>
{
    void Handle(IEnumerable<T> eval);
}

class AnimalHandler : IAnimalHandler<T> where T : IAnimal
{
    public void Handle(IEnumerable<T> eval)
    {
        foreach (var t in eval)
        {
            Console.WriteLine(t.Name);
        }
    }
}

List<Dog> dogs = new List<Dog>() { new Dog() { Name = "Bill Murray" } };
List<Cat> cats = new List<Cat>() { new Cat() { Name = "Walter Peck" } };

AnimalHandler <IAnimal> animalHandler = new AnimalHandler<IAnimal>();

animalEvaluator.Handle(dogs);
animalEvaluator.Handle(cats); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T17:18:44.560

为什么要为每种动物配备特定的处理程序。而是实现多个特定接口，只需实现`IAnimalHandler<T>`，并且只有一个`Handle(T obj)`方法。如果您随后需要特定类型的功能，您可以通过调用`typeof(obj)`来获取特定类型来处理它。

# c# - 如何在 EWL 中创建和部署 Windows 服务？

> ID：11527487
> 
> 赞同：1
> 
> 时间：2012-07-17T17:13:25.930
> 
> 标签：c#, windows-services, enterprise-web-library

我知道 EWL 支持服务，但我不确定它们有什么不同或我必须采取哪些步骤来创建服务。

此外，是否可以以与传统服务相同的方式手动部署 EWL 服务，还是必须使用部署实用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:50:56.893

EWL 服务为您提供了一个简单的编程模型，只有三个地方可以放置您的逻辑：`Init`、`CleanUp`和`Tick`方法。除了决定如何在这些方法之间划分你的逻辑之外，不需要思考。除了这三种方法之外，也没有任何灵活性，因此如果您的问题不完全适合此模型，请不要使用 EWL 服务。

要在现有 EWL 解决方案中创建 EWL 服务：

1.  将 Windows 服务项目添加到您的解决方案。将其命名为“Windows 服务”或其他任何名称。将其设置为使用 EWL NuGet 包，就像解决方案中的其他项目一样。
2.  在 Library/Configuration/General.xml 中，在下面添加如下部分`<WebApplications>`：

    ```
    <WindowsServices>
      <Service>
        <Name>YOUR-SERVICE-PROJECT-NAME</Name>
        <NamespaceAndAssemblyName>YOUR-SERVICE-PROJECT-NAMESPACE</NamespaceAndAssemblyName>
      </Service>
    </WindowsServices> 
    ```

3.  更新依赖逻辑。

4.  显示服务项目中的隐藏文件，并添加 Generated Code/ISU.cs。
5.  将 Program.cs 文件添加到项目中，其中包含此类：

    ```
    internal partial class Program {
      static partial void initGlobalLogic( ref SystemLogic globalLogic ) {
        globalLogic = new GlobalLogic();
      }
    } 
    ```

6.  将 CAMEL-CASED-SERVICE-PROJECT-NAME.cs 文件添加到项目中，其中包含类似于以下内容的类：

    ```
    internal partial class CAMEL-CASED-SERVICE-PROJECT-NAME {
      string WindowsServiceBase.Description { get { return "..."; } }
      void WindowsServiceBase.Init() {}
      void WindowsServiceBase.CleanUp() {}
      void WindowsServiceBase.Tick() {}
    } 
    ```

7.  删除项目中似乎不必要的所有样板文件。

我相信您可以手动安装 EWL 服务。只需构建并使用 bin 目录中的文件执行任何您需要的操作。

# jquery - jquery 需要在选定的选项卡上单击两次

> ID：11527489
> 
> 赞同：1
> 
> 时间：2012-07-17T17:13:31.967
> 
> 标签：jquery, css, click

我在使用 jquery 时遇到了一点问题，希望得到您的帮助。我有一个自定义的可排序选项卡，但是，当我单击所选项目时，我必须单击两次才能更改顺序。

这是一个脚本演示：http: [//jsfiddle.net/7e3UV/1/](http://jsfiddle.net/7e3UV/1/)

尝试单击 .active 类按钮，例如在第一个链接上，您会看到它需要第二次单击才能更改它的箭头...

那么，任何人都可以帮助我，了解为什么会这样吗？

HTML：

```
<div id="sort">
    <a href="#" data-sort="views" data-order="desc" class="active">views <span>&darr;</span></a>
    <a href="#" data-sort="rating" data-order="desc">rating <span>&darr;</span></a>
    <a href="#" data-sort="date" data-order="desc">date <span>&darr;</span></a>                         
</div><!-- #sort --> 
```

JS：

```
var body = $('body');

body.on('click', 'div#sort > a', function(e){

    var self = $(this);

    // if clicked on active tab
    if( self.hasClass('active') )
    {
        console.log('active');

        if( self.data('order') === 'asc' )
        {                    
            console.log('active asc');
            self.data('order', 'desc');
            self.children('span').html('&uarr;');
        }
        else
        {
            console.log('active desc');    
            self.data('order', 'asc');
            self.children('span').html('&darr;');
        }

    }

    // add and remove .active class
    self.addClass('active').siblings().removeClass('active');

    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:19:33.133

你需要交换你的`&darr;`和`&uarr;`。您有一个向下箭头用于在 html 中降序，然后是一个向下箭头用于在代码中升序，一个向上箭头用于降序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:17:58.587

第一次单击使链接处于活动状态。只要链接处于活动状态，每次单击都会更改排序方向。

这就是为什么您必须单击两次的原因。第一次单击以激活，第二次单击以更改排序顺序。

# angularjs - Dart 中的 AngularJS 风格编程？

> ID：11527494
> 
> 赞同：24
> 
> 时间：2012-07-17T17:13:51.973
> 
> 标签：angularjs, dart, angular-dart

有人知道允许在[Dart中进行](http://www.dartlang.org/)[AngularJS](http://angularjs.org/)编程风格的库或项目吗？

我希望能够创建带注释的 HTML 文件来*声明*我的 UI，而不是像在 SWT 中那样强制实例化所有内容*。*此外，数据绑定等功能也会有所帮助。我可以用 Dart 代替 JS 吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-09T09:55:10.140

[angular.dart](https://github.com/angular/angular.dart/) - Angular 到 Dart 的官方端口。

* * *

老答案：

另一种选择：[Web UI](https://github.com/dart-lang/web-ui)。[这里](http://www.dartlang.org/articles/dart-web-components/)有一篇关于它的新文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-14T11:23:27.250

angularjs 团队几天前宣布了 Dart 的一个端口

在这里你去链接[http://news.dartlang.org/2013/06/angularjs-announces-port-for-dart.html](http://news.dartlang.org/2013/06/angularjs-announces-port-for-dart.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T20:16:55.483

你应该看看 John Evans 的 Buckshot。Buckshot 为您提供声明式 UI 和数据绑定。[https://github.com/prujohn/Buckshot](https://github.com/prujohn/Buckshot)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T20:17:35.593

现在有很多为 Dart 创建的 UI 框架。我知道 PureMVC、 [Buckshot](https://github.com/prujohn/Buckshot)和 HipsterMVC，但可能还有其他的。我不知道其中哪些像 AngularJS。

Google 还刚刚发布了[一篇](http://dartlang.org/articles/dart-web-components)关于在 Dart 中使用 Web 组件的文章。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-17T17:25:50.053

AngularJS 使用 MVC（模型-视图-控制器）的新方法将信息与用户界面分离。在我看来，许多 Web 框架，尤其是 Ruby on Rails 和 ASP.NET MVC 3 和 MVC 4，都使用这种方法来简化 Web 应用程序的编程。JavaScript 库，如 AngularJS 和 Backbone 也开始在客户端使用这种编程风格。对于 Dart，我会看看 Hipster MVC。它仍在开发中，但看起来很有希望，应该很快就会完成。希望这可以帮助！

# wpf - 将事件处理程序绑定到模板化超链接

> ID：11527498
> 
> 赞同：0
> 
> 时间：2012-07-17T17:13:58.540
> 
> 标签：wpf, microsoft-metro

我在 wpf（Windows 8 Metro 应用程序）中创建了一个模板化的超链接按钮：

```
<ControlTemplate TargetType="HyperlinkButton">
<HyperlinkButton>
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="CommonStates">
            <VisualStateGroup.Transitions>
                <VisualTransition To="PointerOver" GeneratedDuration="0:0:0.1"/>
            </VisualStateGroup.Transitions>                
        </VisualStateGroup>
        <VisualState x:Name="Normal"/>
        <VisualState x:Name="PointerOver">
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="HyperlinkForegroundBrush" Storyboard.TargetProperty="Color" To="#FF011751"/>
            </Storyboard>
        </VisualState>
    </VisualStateManager.VisualStateGroups>
    <ContentPresenter Content={TemplateBinding Content}>
        <ContentPresenter.Foreground>
            <SolidColorBrush x:Name="HyperlinkForegroundBrush" Color="3FFB20404"/>
        </ContentPresenter.Foreground>
    </ContentPresenter>
</HyperlinkButton> 
```

这是超链接按钮::

```
<HyerlinkButton Style={StaticResource MainPageLinkStyle} x:Name="MoreDetailsHyperlinkButton" Content="More..." Click="MoreDetailsHyperlinkButton_Click"/> 
```

样式 MainPageLinkStyle 指的是上面提到的样式。

问题：未执行超链接按钮的单击。

请帮忙。

提前致谢。

**编辑：** 当我使用 PointerPressed 事件时，不是超链接按钮的单击事件，而是鼠标右键单击触发此事件，而不是鼠标左键单击......对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:28:13.017

我找到了解决方案。这是修改后的标记：

```
<ControlTemplate TargetType="HyperlinkButton">
<**Border**>
    <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
                    <VisualStateGroup.Transitions>
                        <VisualTransition To="PointerOver" GeneratedDuration="0:0:0.1"/>
                </VisualStateGroup.Transitions>                
            </VisualStateGroup>
            <VisualState x:Name="Normal"/>
            <VisualState x:Name="PointerOver">
                <Storyboard>
                        <ColorAnimation Storyboard.TargetName="HyperlinkForegroundBrush" Storyboard.TargetProperty="Color" To="#FF011751"/>
                    </Storyboard>
            </VisualState>
        </VisualStateManager.VisualStateGroups>
        <ContentPresenter Content={TemplateBinding Content}>
            <ContentPresenter.Foreground>
                    <SolidColorBrush x:Name="HyperlinkForegroundBrush" Color="3FFB20404"/>
            </ContentPresenter.Foreground>
        </ContentPresenter>
</**Border**> 
```

正如标记中突出显示的那样，我需要使用 Border 类而不是 Hyperlink。我无法理解为什么，但这似乎是对我有用的可能解决方案。

# typo3 - TYPO3中的RTE可以更换吗？

> ID：11527501
> 
> 赞同：0
> 
> 时间：2012-07-17T17:14:14.030
> 
> 标签：typo3, typo3-tca

我在那里找到了一个更好的 JS RTE，并想知道如何用我找到的那个替换 TYPO3 默认值。我用谷歌搜索了很多，但找不到任何说明如何实现这一目标的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:19:17.837

如果不“丢失”许多 TYPO3 功能，这是不容易实现的，因为`rtehtmlarea`高度集成到 TYPO3 中。特别是链接处理是自定义的，因此您必须编写特殊的支持才能使其工作。

一个可能的替代品是[`tinemce_rte`](http://typo3.org/extensions/repository/view/tinymce_rte). 它工作得相当好，但它不仅仅是用 替换编辑器`tinymce`，例如它还添加了自定义链接处理程序支持。如果你真的想做这项工作，你可以查看这个扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T18:08:48.620

您可以下载 tinyrte 或在 tinyrte 论坛中询问如何替换 htmlarea。这是下载链接：[http](http://typo3.org/extensions/repository/view/tinyrte) ://typo3.org/extensions/repository/view/tinyrte 。

# python - 在同一台服务器上运行多个 Python 程序（Ubuntu Server 12.04）

> ID：11527502
> 
> 赞同：0
> 
> 时间：2012-07-17T17:14:15.153
> 
> 标签：python, webserver

我正在用 Python 创建一个网络服务，我有一个问题。我想分离用户登录用户数据。为此，我正在创建两个不同的 Python 程序。

例如：login.py -> localhost: 8080 userData.py -> localhost: 8081

我的问题是：如何在同一台服务器上运行这两个程序？有没有好用的 Python 应用服务器？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:25:23.937

如果网络服务器嵌入在应用程序中，您可能希望使用一些“看门狗”应用程序来启动/停止/重新启动。

Ubuntu 使用[新贵](http://upstart.ubuntu.com/)。

我也喜欢为此使用[supervisord](http://supervisord.org/)。

如果应用程序支持一些网络服务器集成协议，如 FCGI 或 WSGI（python 的标准），您可能希望使用网络服务器部署它。apache [mod_wsgi](http://code.google.com/p/modwsgi/)用了很久，最近更倾向于使用[nginx](http://wiki.nginx.org/Main) +uwsgi。Apache 是一个很好的网络服务器，但 nginx+wsgi 的扩展性更好。

[更新]

> 应用程序使用 Bottle + PyMongo (MongoDB) 你建议什么是可扩展的？

首先，您应该遵循框架文档中有关部署的建议（bottle[对此主题](http://bottlepy.org/docs/0.10/tutorial.html#deployment)并不冗长，所以我理解您为什么要问）。

B1评论是对的。您肯定希望将数据库和应用程序放在不同的服务器上。

为了以最小的模糊性获得最大的可扩展性，您可能需要查看一些 PassS 提供程序，例如[heroku](http://www.heroku.com/)，[此处的说明](https://devcenter.heroku.com/articles/python)。如果您是开发人员而不是系统管理员，这特别有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:22:26.947

由于您在 Ubuntu 上，因此使用 bash：

```
./login.py &
./userData.py & 
```

这将在后台运行这两个脚本。

如果您希望这些脚本在您关闭 shell 后继续运行：

```
at now < ./login.py
at now < ./userData.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T18:31:22.990

Tornado 是一个非常易于使用的应用服务器。您可以使用不同的请求处理程序侦听不同的端口。

它是可扩展的，可以处理数千个连接。我们用它来处理我们的控制台服务器。简单的 hello world 代码真的告诉你所有你需要知道的。我添加了另一个 HttpServer 以便单个 ioloop 处理两个不同端口上的请求：

```
import tornado.ioloop
import tornado.web
from tornado.httpserver import HttpServer

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.write("Hello, world")

class OtherHandler(tornado.web.RequestHandler):
    def get(self):
        self.write("Goodbye, world")

application1 = tornado.web.Application([
    (r"/", MainHandler),
])
application2 = tornado.web.Application([
    (r"/", OtherHandler),
])

if __name__ == "__main__":
    HttpServer(application1).listen(8080)
    HttpServer(application1).listen(8081)
    tornado.ioloop.IOLoop.instance().start() 
```

[http://www.tornadoweb.org/](http://www.tornadoweb.org/)

# excel - 错误13错误栏excel

> ID：11527503
> 
> 赞同：0
> 
> 时间：2012-07-17T17:14:17.543
> 
> 标签：excel, excel-2007, vba

错误栏的问题似乎已解决，但现在我收到错误 5。错误行是：

ActiveChart.SeriesCollection(1).ApplyDataLabels AutoText:=False, LegendKey:=False, ShowSeriesName:=False, ShowCategoryName:=False, ShowValue:=True, _ ShowPercentage:=False, ShowBubbleSize:=False

```
 'resize chart
WS.ChartObjects(1).Width = 500
WS.ChartObjects(1).Height = chartmultipl * (rowcnt - 1 - minscale)
WS.ChartObjects(1).Left = chartleftpos
WS.ChartObjects(1).Top = 70
'Rescale values to positions in chart so that labels can be succesfully moved
minchar = ActiveChart.Axes(xlCategory).MinimumScale
maxchar = ActiveChart.Axes(xlCategory).MaximumScale
midchar = (maxchar + minchar) / 2
'datalabels
ActiveChart.SeriesCollection(1).ApplyDataLabels AutoText:=False, LegendKey:=False, ShowSeriesName:=False, ShowCategoryName:=False, ShowValue:=True, _
    ShowPercentage:=False, ShowBubbleSize:=False
For i = 1 To rowcnt - 1
    If WS.Cells(i + 1, labelcol) <> "" Then
        With ActiveChart.SeriesCollection(1).Points(i).DataLabel
            .Characters.Text = Left(WS.Cells(i + 1, labelcol).Value, 28)
            .AutoScaleFont = False
            With .Characters(Start:=1, Length:=100).Font
                .Name = "Arial"
                If WS.Cells(i + 1, labelcol).Font.Italic = True Then
                    .FontStyle = "Italic"
                ElseIf WS.Cells(i + 1, labelcol).Font.Bold = True Or Not ptype Then
                    .FontStyle = "Bold"
                Else
                    .FontStyle = "Normal"
                End If
                .Size = labelsize
                .Strikethrough = False
                .Superscript = False
                .Subscript = False
                .OutlineFont = False
                .Shadow = False
                .Underline = xlUnderlineStyleNone
                .ColorIndex = xlAutomatic
            End With
            'move labels wherever there is enough space to display them or to the beginning of the graph
            If ptype Then
                textsize = Application.WorksheetFunction.Min(Len(WS.Cells(i + 1, labelcol).Value), 28)
                If WS.Cells(i + 1, int1).Value <= midchar Then
                    .Left = 15 + Round(ActiveChart.PlotArea.Width * (WS.Cells(i + 1, 6).Value - minchar) / (maxchar - minchar))
                Else
                    .Left = -textsize * 3 + Round(ActiveChart.PlotArea.Width * (WS.Cells(i + 1, 5).Value - minchar) / (maxchar - minchar))
                End If
            Else
                .Left = 20
            End If
        End With
    End If
Next i
'if it's an outcome graph use set square sizes, if a final MA graph use study weights
If Not ptype Then
    For i = 1 To resultcount
        With ActiveChart.SeriesCollection(1).Points(i)
            .MarkerSize = Round(sqsize(i), 0)
        End With
    Next i
End If
'send chart to back for future merging
WS.ChartObjects(1).SendToBack
'ActiveChart.ChartArea.Select
'Selection.ShapeRange.ZOrder msoSendToBack
'deselect graph so that I can add the rest of the shapes but first save things that are needed
minsc = ActiveChart.Axes(xlCategory).MinimumScale
maxsc = ActiveChart.Axes(xlCategory).MaximumScale
WS.Range("A1").Select
'if it is the final scatterplot add the diamonds
If Not ptype Then
    Dim plarealeft, plarearight As Double
    Dim dheight, incrh As Double
    Dim origleft, origlength, transleft As Double
    Dim diampos, diamlength As Double
    Dim grtop As Double
    'left and right edge of plot area in pixels
    plarealeft = 371
    plarearight = 827
    'diamond statistics
    dheight = 10
    'vertical alignment of diamonds - increment from one to another
    incrh = WS.ChartObjects(1).Height / ((rowcnt - 1) - minscale + 2)
    'top of the graph
    grtop = WS.ChartObjects(1).Top
    'get all info in tables so that I can use in loops
    mu(1) = fe_mu
    mu(2) = dl_mu
    mu(3) = ml_mu
    mu(4) = pl_mu
    mu(5) = T_mu
    mvar(1) = fe_var
    mvar(2) = dl_var
    mvar(3) = ml_var
    mvar(4) = pl_var
    mvar(5) = T_var
    For i = 1 To 4
        tmargin(i) = 1.96
    Next i
    tmargin(5) = Excel.WorksheetFunction.TInv(0.05, resultcount - 1)
    tlabel(1) = "FE"
    tlabel(2) = "DL"
    tlabel(3) = "ML"
    tlabel(4) = "PL"
    tlabel(5) = "T"
    'go through all 5 diamonds
    For i = 1 To 5
        'original length and far left position
        origleft = mu(i) - tmargin(i) * (mvar(i) ^ (1 / 2))
        origlength = 2 * tmargin(i) * (mvar(i) ^ (1 / 2))
        'transform to [0,1] scale
        transleft = (origleft - minsc) / (maxsc - minsc)
        'transform to points
        diampos = plarealeft + (plarearight - plarealeft) * transleft + 1
        diamlength = (plarearight - plarealeft) * origlength / (maxsc - minsc)
        ActiveSheet.Shapes.AddShape(msoShapeDiamond, diampos, grtop + (rowcnt - 1.5 + i + 1) * incrh - dheight / 2, diamlength, dheight).Select
        Selection.ShapeRange.Fill.ForeColor.RGB = RGB(0, 0, 0)
        ActiveSheet.Shapes.AddTextbox(msoTextOrientationHorizontal, diampos + diamlength + 10, grtop + (rowcnt - 1.5 + i + 1) * incrh - dheight / 2, 20, 12).Select
        Selection.Characters.Text = tlabel(i)
        With Selection.ShapeRange
            .Fill.Visible = msoFalse
            .Line.Visible = msoFalse
        End With
        With Selection.Font
            .Name = "Arial"
            .FontStyle = "Bold"
            .Size = 9
        End With
    Next i
End If
'add text files with study information
If ptype Then
    tboxend = rowcnt * 10
    tboxstep = (tboxend - 80) / (rowcnt - 2)
    For i = 2 To rowcnt
        If (WS.Cells(i, 1).Value <> "" And WS.Cells(i - 1, 1).Value = "") Or i = 2 Then
            'find how many outcomes there are in each study to better align the text boxes
            j = i
            Do
                j = j + 1
            Loop Until WS.Cells(j, 1).Value = ""
            cntr = j - i
            'create textbox
            tboxpos = tboxend - (i - 2) * tboxstep - (cntr - 1) * tboxstep / 2
            ActiveSheet.Shapes.AddTextbox(msoTextOrientationHorizontal, 500, tboxpos, 60, 25).Select
            Selection.Characters.Text = WS.Cells(i, 1).Value
            With Selection.ShapeRange
                .Fill.Visible = msoFalse
                .Line.Visible = msoFalse
            End With
            With Selection.Font
                .Name = "Arial"
                .FontStyle = "Bold"
                .Size = 10
                .Strikethrough = False
                .Superscript = False
                .Subscript = False
                .OutlineFont = False
                .Shadow = False
                .Underline = xlUnderlineStyleNone
                .ColorIndex = xlAutomatic
            End With
        End If
    Next i
End If
'create a list with all the shapes that need to be selected and group them
j = 0
For Each Sh In WS.Shapes
    If Not Left(Sh.Name, 7) = "Comment" Then
        j = j + 1
        ReDim Preserve sharray(j)
        sharray(j) = Sh.Name
    End If
Next Sh
WS.Shapes.Range(sharray).Group
'deselect shape
WS.Range("A1").Select
Application.ScreenUpdating = True 
```

结束子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:19:59.380

帮助追踪错误的第一件事是正确定义所有变量。

示例：您的第一行

```
Dim rowcnt, textsize, cntr, labeltop As Integer 
```

其实和这个是一样的：

```
Dim rowcnt as Variant  
Dim textsize as Variant  
dim cntr as Variant  
dim labeltop As Integer 
```

这样做可能会引发其他错误，这些错误可以帮助您找出导致线路故障的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:49:11.983

`Option Explicit`在代码顶部声明，它会强制您声明所有变量并帮助您更轻松地识别错误，从而帮助您编写更好的代码。

这可能会导致您的 Invalid Call or Argument 错误：

```
'get the last row of data
rowcnt = LASTINCOLUMN2(6, k) 
```

除非你有一个`LASTINCOLUMN2`你没有发布的自定义函数？

要获得最后一行，请使用：

```
rowcnt = WS.Range("B" & Rows.Count).End(xlUp).Row 
```

将 rowcnt 声明为`Long`不是`integer`.

您需要定义： `ptype` `resultcount` `vareffects`

**编辑：**我仍在运行您的代码并识别许多身份不明的子/功能。代码有第二部分吗？

# php - PHP留言簿错误

> ID：11527504
> 
> 赞同：0
> 
> 时间：2012-07-17T17:14:23.510
> 
> 标签：php, parsing, syntax

```
<?php
    $sql = mysql_connect("localhost" , "root" , "usbw") or die(mysql_error);
    mysql_select_db("guestbook" , $sql);

    if($_SERVER['REQUEST_METHOD'] == 'POST') (

        $user = mysql_real_escape_string($_POST['user']);
        $message = mysql_real_escape_string($_POST['message']);

        $query = mysql_query("INSERT INTO message (user,message) VALUES ('$user' , '$message'");
        echo ("Message succesfully added.");
    )
?>

<html>
    <head>
        <title>Guestbook</title>
    </head>
    <form action="index.php" method="post">
        User: <input type="text" name="user"/><br>
        Message: <textarea name="message"></textarea>
        <input type="submit" value="Post!"/>
    </form>
</html>

<?php
    $result = mysql_query("SELECT * FROM message ORDER BY id DESC");
    while($row = mysql_fetch_array($result)) (

    )
?>
<table>
    <tr>
        <td>User:</td>
        <td><?php echo $row['user'] ?></td>
    </tr>
        <td>Message:</td>
        <td><?php echo $row['message'] ?></td>
</table>
<hr />
<?php
)
?> 
```

嘿！我正在尝试创建一个简单的 php 留言簿，但我不断收到以下错误：

> 解析错误：语法错误，意外的 ';' 在
> 第 7 行的 /Applications/XAMPP/xamppfiles/htdocs/g_book/index.php

任何人都可以看到我要去哪里错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T17:16:42.890

在这里将 () 更改为 {...}，

```
if($_SERVER['REQUEST_METHOD'] == 'POST') {

}

while($row = mysql_fetch_array($result)) {

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:29:57.773

第 5 行中的 1-(if) 语句以“(”开头并以“)”结尾，您应该使用大括号“{”、“}”。并且“while”有sam错误。2-您在查看 html 表中的数据之前关闭了第 30 行中的 while 语句，因此您希望查看数据，因此您应该删除第 30 行中的大括号完整的正确代码

```
 <?php
$sql = mysql_connect("localhost" , "root" , "usbw") or die(mysql_error);
mysql_select_db("guestbook" , $sql);

if($_SERVER['REQUEST_METHOD'] == 'POST') {

    $user = mysql_real_escape_string($_POST['user']);
    $message = mysql_real_escape_string($_POST['message']);

    $query = mysql_query("INSERT INTO message (user,message) VALUES ('$user' ,    '$message'");
     echo ("Message succesfully added.");
}
   ?>

  <html>
   <head>
    <title>Guestbook</title>
</head>
<form action="index.php" method="post">
    User: <input type="text" name="user"/><br>
    Message: <textarea name="message"></textarea>
    <input type="submit" value="Post!"/>
 </form>
</html>

  <?php
 $result = mysql_query("SELECT * FROM message ORDER BY id DESC");
 while($row = mysql_fetch_array($result)) {

   ?>
   <table>
   <tr>
       <td>User:</td>
       <td><?php echo $row['user'] ?></td>
  </tr>
    <td>Message:</td>
    <td><?php echo $row['message'] ?></td>
  </table>
    <hr />
 <?php
}
  ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:17:10.413

第 5 行中的“if”语句具有“(”并以“)”结尾，而不是大括号“{”和“}”。同样的问题出现在下面的“while”语句中。

# jquery - 将事件绑定到 jquery 即兴表单取消

> ID：11527511
> 
> 赞同：1
> 
> 时间：2012-07-17T17:14:49.320
> 
> 标签：jquery, impromptu

单击复选框时，在 jquery 中使用即兴提交表单。如果用户提交表单，一切正常。但是，如果用户取消表单，复选框将保持单击状态。我想将一个操作绑定到取消事件以关闭提示并取消选中具有特定 ID 的所有复选框。如果用户取消，我如何关闭表单并取消选中所有复选框。这是我到目前为止所拥有的——特别感兴趣的是实际处理表单的最后一行，但我将包括整个函数以防万一：

```
 function markComplete(activity_id,index)
 {
    var addform = 
        '<h3>Form title</h3>\n\
         <form\n\
           <!--Form stuff goes here --> \n\
        </form>';

    function validate(v,m,f) //prevents submission on empty notes field
  {
  var flag = true;
  if(v == 1)
          {
            if ($("#notes").val()==''){
              $("#notes").addClass("form-error-input");
              flag = false;
            }
            else $("#notes").removeClass("form-error-input");
          }
          return flag;
}

  function callback_add(v,m,f){
      if(v == 1)
      {
        var dataString = 'completion_date='+ f.completion_date + "&notes=" + f.notes;
        $.post("<?php echo $_SERVER['REQUEST_URI']; ?>?mark_complete",dataString);
        $("tr").eq(index).hide("fast");
        $.prompt.close();
      }
      else
      {
        $("#complete_check").removeAttr('checked');
        $.prompt.close();
      }
    }
    $.prompt(addform,{ submit: validate, callback: callback_add, buttons: { Cancel: function (){$("#complete_check").removeAttr('checked');}, Add: 1 },focus: 1 }); 
```

单击复选框时调用此函数，如下所示：

```
<input name="mark_complete" id="complete_check" type="checkbox" onchange="markComplete(<?php echo $record['activity_id']; ?>,$(this).index())" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:53:33.080

我必须修改验证代码才能使其正常工作：

从：

```
function callback_add(v,m,f){
      if(v == 1)
      {
        var dataString = 'completion_date='+ f.completion_date + "&notes=" + f.notes;
        $.post("<?php echo $_SERVER['REQUEST_URI']; ?>?mark_complete",dataString);
        $("tr").eq(index).hide("fast");
        $.prompt.close();
      }
      else
      {
        $("#complete_check").removeAttr('checked');
        $.prompt.close();
      } 
```

至：

```
function callback_add(v,m,f){
      if(v == 1)
      {
        var dataString = 'completion_date='+ f.completion_date + "&notes=" + f.notes;
        $.post("<?php echo $_SERVER['REQUEST_URI']; ?>?mark_complete",dataString);
        $("tr").eq(index).hide("fast");
        $.prompt.close();
        $("#new_row").addClass("form-success");
      }
      else
      {
        $('input[type=checkbox]:not("#todo_check")').each(function() //all checkboxes except the "To Do", which should remain checked
      { 
        this.checked = false; 
      });
     } 
```

像冠军一样工作！

# asp.net - 在特定文件夹/路径上使用基本身份验证形成经过身份验证的 Web 应用程序

> ID：11527513
> 
> 赞同：1
> 
> 时间：2012-07-17T17:14:52.567
> 
> 标签：asp.net, authentication, forms-authentication, basic-authentication

我有一个 Forms Authenticated Web 应用程序，但我需要对几个服务进行基本身份验证，这些服务都位于特定路径（即“~/Services/”）。

我最初尝试在 web.config 中添加一个带有单独自定义 MembershipProvider 的标签，如下所示：

```
 <location path="Services">
    <system.web>
      <authentication mode="None" />
      <authorization>
        <deny users="?" />
      </authorization>
      <membership defaultProvider="ServicesMembershipProvider">
        <providers>
          <add name="DefaultMembershipProvider" type="Company.WebProject.DeviceMembershipProvider" connectionStringName="DefaultConnectionString" applicationName="/" />
        </providers>
      </membership>
      <httpModules>
        <add name="BasicAuthentication" type="Company.WebProject.BasicAuthenticationModule" />
      </httpModules>
    </system.web>
  </location> 
```

但这是抛出错误：

> 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

所以我意识到我不允许在位置元素中使用身份验证元素。

阅读本文后[，](http://www.arcomit.co.uk/support/kb.aspx?kbid=000041)我尝试在 Global.asax 中连接 FormsAuthentication_OnAuthenticate 方法。由于我需要使用基本身份验证，因此我尝试返回 401 以提示浏览器输入基本身份验证凭据。不幸的是，这似乎导致重定向到表单身份验证登录页面（即 loginUrl）。

```
public void FormsAuthentication_OnAuthenticate(object sender, FormsAuthenticationEventArgs e)
{
    string path = VirtualPathUtility.ToAppRelative(e.Context.Request.Path);
    if (path.Contains("/Services/"))
    {
        e.Context.Response.StatusCode = 401;
        e.Context.Response.AddHeader("WWW-Authenticate", string.Format("Basic realm=\"{0}\"", "CompanyRealm"));
        e.Context.Response.End();                
    }
} 
```

所以现在我已经没有关于如何在 Forms Authenticated Web 应用程序中的文件夹上实现 Basic Auth 的想法了。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:29:29.190

你不能`Forms Authentication`在`Windows Authentication`ASP.NET 中混用。您将需要为两者创建单独的应用程序，或者您需要实施`Forms Authentication`并`Roles`正确执行分层访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T03:01:12.727

今天有点晚了，但我在这里发布了一些代码： [Combining Forms Authentication and Basic Authentication](https://stackoverflow.com/questions/16830243/asp-net-combining-forms-authentication-and-basic-authentication)

基本上你只需要更换

```
e.Context.Response.End(); 
```

和

```
e.Context.Response.Flush(); 
e.Context.Response.Close(); 
```

关闭 Response 对象似乎可以防止 ASP 覆盖重定向。有关完整代码，请参见上面的链接。

# asp.net-mvc-3 - 验证公共列表 > 在 MVC3 中

> ID：11527515
> 
> 赞同：0
> 
> 时间：2012-07-17T17:15:03.207
> 
> 标签：asp.net-mvc-3, validation, data-annotations

我的模型中有以下属性：

```
[StringLength(100, ErrorMessage = "Must be less than 100 Chars", MinimumLength = 3)]
public List<KeyValuePair<int, string>> Authors { get; set; } 
```

如何使用 MVC3 中的 DataAnnotation Validation 属性将每个字符串验证到上述列表中？

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:15:44.667

自定义验证来救援！您需要执行以下操作：

1.  实现[`IValidatableObject`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)接口
2.  实施[`IEnumerable<ValidationResult> Validate(ValidationContext validationContext)`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.validate.aspx)
3.  实现您的逻辑以确定每个字符串少于 100 个字符

这是代码

```
public class YourModel : IValidatableObject
{
    public List<KeyValuePair<int, string>> Authors { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        foreach(KeyValuePair<int, string> myKvp in Authors)
        {
            if(myKvp.Value.Length >= 100)
            {
                yield return new ValidationResult("Must be less than 100 characters");
            }
        }
    }
} 
```

这样你就可以`if(Model.IsValid)`在你的控制器动作中调用，并返回报告的任何错误。如果您的`KeyValuePair`条目指的是特定实体，您甚至可以执行以下操作：

```
yield return new ValidationResult("Must be less than 100 characters", new string[] { myKvp.Key.ToString() }); 
```

您需要对其进行定制以适合您页面上属性的 ID。这样，错误消息可能特定于您页面上的输入。

我在很多地方都覆盖`IValidatableObject`了，因为在很多情况下我会根据我的对象的状态进行验证。你的情况有点不同，但从上面的例子可以看出它肯定是可行的。（然而，这一切都在我的脑海中，所以可能并不完美！）

# html - 脚本作为 VBS 但不是 HTML

> ID：11527520
> 
> 赞同：0
> 
> 时间：2012-07-17T17:15:22.910
> 
> 标签：html, vbscript, active-directory, hta

我有一个脚本，显示特定 AD 用户所属的组的过滤列表。它作为 VBS 文件工作得**非常好**，但是当导入到 HTA 或 HTML 文件时，在运行下面的*“objRecordSet.MoveFirst”行时，它会给我一个**“无法识别搜索过滤器”*错误消息。

 *```
Dim User
Dim DIA
Dim GroupList

DIA = "No"
User = "UserNic"

Const ADS_SCOPE_SUBTREE = 2
Const E_ADS_PROPERTY_NOT_FOUND  = &h8000500D

Set objConnection = CreateObject("ADODB.Connection")
Set objCommand =   CreateObject("ADODB.Command")
objConnection.Provider = "ADsDSOObject"
objConnection.Open "Active Directory Provider"
Set objCommand.ActiveConnection = objConnection

objCommand.Properties("Page Size") = 1000
objCommand.Properties("Searchscope") = ADS_SCOPE_SUBTREE 

objCommand.CommandText = _
    "SELECT memberOf FROM 'LDAP://dc=company,dc=com' WHERE objectCategory='user' And mailnickname='" & User & "'" 
Set objRecordSet = objCommand.Execute

objRecordSet.MoveFirst

Do Until objRecordSet.EOF
    arrMemberOf = objRecordSet.Fields("memberOf")
        if isArray(objRecordSet.Fields("memberOf")) Then
            For Each x in arrMemberOf
                If InStr(x,"GroupFilter") <> 0 Then
                    Group = x
                    Group = Right(Group,Len(Group)-3)
                    Group = Left(Group,InStr(Group,",")-1)
                    GroupList = Group & vbCrLf & GroupList
                End If
                If InStr(x,"DIA") <> 0 Then DIA = "Yes"
            Next
        End if
    objRecordSet.MoveNext
Loop

WScript.Echo GroupList
WScript.echo "DIA: " & DIA 
```

我还有另一个几乎相同的脚本，**它**可以在 HTA/HTML 格式下工作。这个仅显示电子邮件帐户的转发位置（如果有的话）：

```
Const ADS_SCOPE_SUBTREE = 2

Set objConnection = CreateObject("ADODB.Connection")
Set objCommand =   CreateObject("ADODB.Command")
objConnection.Provider = "ADsDSOObject"
objConnection.Open "Active Directory Provider"
Set objCommand.ActiveConnection = objConnection

objCommand.Properties("Page Size") = 1000
objCommand.Properties("Searchscope") = ADS_SCOPE_SUBTREE 

objCommand.CommandText = _
    "SELECT Name, altRecipient FROM 'LDAP://dc=company,dc=com' WHERE objectCategory='user' And Name='*" & Hosp & "' And altRecipient='*'" 
Set objRecordSet = objCommand.Execute

objRecordSet.MoveFirst

Count = 0
Do Until objRecordSet.EOF
    Name(Count) = objRecordSet.Fields("Name").Value
    Forward(Count) = objRecordSet.Fields("altRecipient").Value

    arrLines = Split(Forward(Count),",")
    search = Filter(arrLines,"CN=",True,1)
    for each x in search
        Forward(Count) = x
    Next
    Forward(Count) = Replace(Forward(Count),"CN=","")

    objRecordSet.MoveNext
    Count = Count + 1
Loop 
```

我似乎找不到每个脚本的*“objRecordSet.MoveFirst”*行之间的任何功能差异。

请帮忙！

**编辑：**

这里的结果相同。尝试了替代代码块来执行相同的操作 - 作为 VBS 但不是 HTA 可以正常工作：

```
Set objConnection = CreateObject("ADODB.Connection")
objConnection.Open "Provider=ADsDSOObject;"
Set objCommand = CreateObject("ADODB.Command")
objCommand.ActiveConnection = objConnection
objCommand.CommandText = "<LDAP://dc=domain,dc=com>;" & "(&(objectCategory=Person)(mailnickname=" & User & "));" & "distinguishedName,Name;subtree"
Set objRecordSet = objCommand.Execute

intCount = 0
If objRecordSet.EOF Then
    Set WshShell = CreateObject("WScript.Shell")
    message = WshShell.Popup ("Unable to find a user with the alias '" & User & "'! Please try again...",, "programname", 0 + 16)
    'Exit Sub
Else
    While NOt objRecordSet.EOF
        intCount = intCount + 1
        objRecordSet.MoveNext
    WEND
        If intCount = 1 Then
            objRecordSet.MoveFirst
            Set objUser = GetObject("LDAP://" & objRecordSet.Fields("distinguishedname"))
            Set colGroups = objUser.Groups
            For Each objGroup in colGroups
                Group = objGroup.CN
                GroupList = Group & vbCrLf & GroupList
            Next
        End If
End If

WScript.Echo GroupList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:44:11.120

在您的 HTA 中，您是将代码放在子程序或函数中吗？

```
<script language = "VBScript">
Sub Window_Onload
 ##your code here##
End Sub
</script> 
```

如果不是，则尝试将 USER 作为全局变量进行调暗可能会搞砸。

也更喜欢将 Echo 重写为类似的东西

```
TextOut.innerHTML = GroupList
</script>
<html><body>
<div id="TextOut"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:24:00.690

如果您使用的是 64 位操作系统，请尝试从命令行运行 32 位 MSHTA.exe：

```
C:\Windows\System32\mshta.exe C:\YOUR_PATH\yourscript.hta 
```

我遇到了 64 位版本 ( **C:\Windows\SysWOW64\mshta.exe** ) 无法支持 COM/ActiveX 接口的问题。默认情况下， Windows 7 将使用 64 位版本 打开**.HTA文件。***

# visualvm - 使用 OQL 进行字符串搜索

> ID：11527526
> 
> 赞同：20
> 
> 时间：2012-07-17T17:15:46.943
> 
> 标签：visualvm, jvisualvm, oql

我正在使用 VisualVM 分析核心转储。我怀疑某些 XML 对象会导致泄漏，但是有太多的 String 对象需要一一处理。

我可以使用 OQL 搜索以 'GH' 开头的字符串吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-10-08T14:12:28.483

在 JDK 1.8.20 下，一个更简单的变体起作用：

```
select s from java.lang.String s where s.toString().startsWith("GH") 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-18T13:53:33.140

尝试这个： `select {instance: s, content: s.toString()} from java.lang.String s where s.count>2 && s.toString().substring(0,2)=="GH"`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-22T14:44:40.237

```
heap.objects('java.lang.String', false, "it.toString().startsWith('GH')") 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-12-26T11:30:19.080

从 abcMyClass c 中选择 c.attr_name.toString() 其中 c.attr_name.toString().startsWith("GH")

# c++ - 对 C++ 中头文件的实际用途感到困惑

> ID：11527528
> 
> 赞同：15
> 
> 时间：2012-07-17T17:15:51.083
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中为什么有头文件和 cpp 文件？](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)

由于两个相互矛盾的原因，我不太了解 C++ 头文件：

1.  我认为头文件的目的通常是分离接口和实现。换句话说，客户端使用头文件来学习如何使用类，而不必担心类在内部实际上是如何实现这个功能的。

2.  那么，为什么 C++ 类的私有变量会在其头文件中指定呢？

在我看来，头文件中的私有变量违反了接口和实现的分离。直观地说，我认为将私有变量放在源文件中会更有意义，因为这是不暴露给外界的文件。

也许我只是误解了头文件的用途，而1.上面是完全错误的？以什么方式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T17:31:08.750

C++ 头文件的主要功能目的是在 C++ 语言中没有模块导入或其他语言中存在的任何类似内容。编译器从其他文件中了解类型、函数等的唯一方法是使用 . 将代码粘贴到当前源文件中`#include`。

从理论上讲，您也可以将所有源代码放入标头中，并且只需一个包含所有标头的源文件。通常不这样做的原因是双重的。首先，编译需要更长的时间（对某些项目来说是一个重大问题），对任何文件的任何更改都会导致项目的完全重新编译。其次，将实现放入源文件实际上有助于将接口与实现分开，即使部分实现仍然在头文件中指定。

请注意，标头中的内联方法还会向您的类的公共/客户端公开详细的实现细节。

如果您真的希望将接口与实现完全分离（这有一定的优点），那么 C++ 的方法就是使用 pimpl idiom。使用该习语，所有私有数据都隐藏在源文件中，只向公众提供一个抽象接口。此外，使用非虚拟接口 (NVI) 模式可以进一步帮助将客户端与接口更改隔离开来。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-17T17:30:58.440

C++ 区分函数和类的声明和定义。通常，C++ 头文件包含类的声明。由于不允许部分声明，因此头文件需要包含完整的类声明，包括所有私有成员（变量和成员函数）。

如果你想对公众隐藏完整的实现，你可以使用[pimpl idiom](http://c2.com/cgi/wiki?PimplIdiom)来实现这一点。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-17T17:35:54.220

头文件的目的是为编译器提供在编译单元（.cpp 源文件）之间共享定义所需的信息。这是机械的东西，而不是哲学的东西。

例如，私有成员变量需要声明，因为它们定义了对象的大小，编译器在分配对象时需要知道大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T17:32:35.180

在 C/C++ 中，头文件的一个目的是允许多个翻译单元使用具有相同定义的类型，而不会在多个文件中重复定义。类的部分定义是它的私有成员。

# jakarta-ee - monotouch 应用程序 restsharp Java EE 服务器会话变量

> ID：11527530
> 
> 赞同：0
> 
> 时间：2012-07-17T17:15:53.853
> 
> 标签：jakarta-ee, xamarin.ios, httpsession

我正在创建第一个 MonoTouch 应用程序并使用 ResSharp 与 Java EE 服务器应用程序进行 json 数据交换。问题是如何将 HttpSession 数据放入 MonoTouch 应用程序中，以便服务器 Java EE 应用程序可以读取会话数据。

# svg - svg / raphael：缩放路径 + 获取结果/计算路径

> ID：11527531
> 
> 赞同：2
> 
> 时间：2012-07-17T17:15:56.537
> 
> 标签：svg, raphael, scaling

假设我有这个 svg 路径（一些图标）作为字符串：

```
"M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM16,28.792c-1.549,0-2.806-1.256-2.806-2.806s1.256-2.806,2.806-2.806c1.55,0,2.806,1.256,2.806,2.806S17.55,28.792,16,28.792zM16,21.087l-7.858-6.562h3.469V5.747h8.779v8.778h3.468L16,21.087z" 
```

我可以像这样放大它（例如使用[raphael.js](http://raphaeljs.com/)）：

```
icon = paper.path("M16,1.466C7.973,...").attr({fill: "#000", stroke: "none"});
icon.transform("s4T50,50"); 
```

最后一行将图像缩放 4 倍，并将整个图像向下和向右移动。

到目前为止一切顺利，但我需要在 svg 文件中使用生成的路径。

所以我的问题是：**如何**在转换完成后返回结果或计算路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:58:58.073

[请在此处](http://jsbin.com/oqojan/73)查看我的答案和[此处](https://stackoverflow.com/a/13102801/1691517)的测试平台。

有一个函数 flatten_transformations() 可以烘焙（或应用）变换到路径。它可以处理所有路径段（也包括弧）。您可以选择是否将所有路径段转换为 M:s 和 C:s 或保持原样。H 和 V 是唯一不能保留的，它们必须转换为 L:s，因为变换可以使垂直和水平线变为非垂直和非水平。您还可以选择坐标转换为相对还是绝对以及转换的精度。

如果这种扁平化功能是 Raphaël 的一部分，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T18:02:14.603

路径保持完全一样，所以你不能在这里得到你想要的。

您假设 Raphael 在转换点时循环点并向上缩放坐标。但是，它并没有这样做——而是将转换函数应用于渲染器。

例如，在你`.transform("s4T50,50");`的结果路径是 DOM 之后：

```
<path 
    style="" 
    fill="#000000" 
    stroke="none" 
    d="M16,1.466...39V14.525H23.858L16,21.087Z" 
    transform="matrix(4,0,0,4,2,2)" 
    stroke-width="0.25"
/> 
```

现在，我什至不敢想象这在 VML 中是如何工作的，但是，c'est la vie。无论如何，你**可以**得到一个不同的边界框`icon.getBBox()`——这部分是真实的屏幕像素坐标系。原始信息，但有帮助：

```
 before transform       after icon.transform()

height  29.067999999999998     116.27199999999999
width   29.067999999999998     116.27199999999999
x        1.466                   7.864000000000014
x2      30.534                 124.13600000000001
y        1.466                   7.864000000000014
y2      30.534                 124.13600000000001 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T14:15:31.430

[Raphael.transformPath](http://raphaeljs.com/reference.html#Raphael.transformPath)函数似乎是您正在寻找的。

```
icon = paper.path(Raphael.transformPath("M16,1.466C7.973,...", "s4T50,50")).attr({fill: "#000", stroke: "none"}); 
```

# android - 使用自定义适配器的 Fragment 中的 OnItemSelectedListener

> ID：11527532
> 
> 赞同：5
> 
> 时间：2012-07-17T17:15:57.200
> 
> 标签：android, android-listview, android-fragments

所以我已经玩了几天了，但似乎无法让它发挥作用。我有一个显示片段的活动，并且该片段是我使用 ViewPager 翻页的片段列表的成员。Fragment 本身由 TextView 和 ListView 组成。ListView 通过自定义适配器填充自身。

我想要做的是将 OnItemSelected 事件传递回处理它的片段。对我来说，继续在这里显示代码可能会更好。

这是活动

```
public class DialogInventory extends FragmentActivity implements OnItemSelectedListener {

ViewPager viewPager;
Pager pager;

@Override
protected void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.dialog_inventory);

    List<Fragment> fragList = new Vector<Fragment>();
    fragList.add(Fragment.instantiate(this, FragmentOne.class.getName()));
    fragList.add(Fragment.instantiate(this, FragmentTwo.class.getName()));
    pager = new Pager(getSupportFragmentManager(), fragList);

    viewPager = (ViewPager) findViewById(R.id.pagerMain);
    viewPager.setAdapter(pager);

    listMain = (ListView) findViewById(R.id.listMain);
    listMain.setOnItemSelectedListener(this);
}

public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    switch (viewPager.getCurrentItem()) {
        case 0:
            FragmentOne fragOne = new FragmentOne();
            fragOne.onItemSelected(parent, view, pos, id);
            break;
        case 1:
            FragmentTwo fragTwo = new FragmentTwo();
            fragTwo.onItemSelected(parent, view, pos, id);
            break;
    }
}
public void onNothingSelected(AdapterView<?> arg0) {
} 
```

这是片段：

```
public class FragmentOne extends Fragment implements OnItemSelectedListener {

View view;
ListView listMain;
ArrayList<String> invItems = new ArrayList<String>();

public FragmentOne() {
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup viewGroup, Bundle bundle) {
    view = inflater.inflate(R.layout.fragment_one, viewGroup, false);

    listMain = (ListView) v.findViewById(R.id.listMain);
    listMain.setAdapter(new AdapterItem(getActivity().getApplicationContext(),
        R.layout.tile_item, invItems));
    listMain.setOnItemSelectedListener(this);
    return view;
}
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    Log.i("Test", "hit");
} 
```

为简洁起见，省略了一些行。让我们假设片段正确显示并且一切正常。唯一不能正常工作的是 Activity 中的 OnItemSelected 事件根本没有触发……更不用说片段中的 OnItemSelected 事件了。我在这里做错了什么？

编辑：ListViews 必须在它们各自的片段中（因为它们将单独显示在不同的活动以及上面列出的活动中）。这里最大的问题是我无法在我的 Activity 中设置 OnItemSelectedListener，因此该事件永远不会被触发。我已经完成并运行了之前的所有代码，只是 OnItemSelectedListener 不起作用。

编辑2：我明天会为这个问题增加一个赏金。鉴于此，我认为我会在正确答案的范围上更加隐含。正确的答案不会暗示 UI 布局或呈现方式有任何显着变化。正确答案会将 OnItemSelected 事件传递给 Fragment 并在那里进行处理。答案不会让我用一行又一行的代码加载我的 Activity 来实现我认为只需几行就可以做到的事情。更优雅的答案显然更具吸引力。感谢任何看到这个的人。

这里的问题是我在我的活动中获得了 NPE。如何将它指向一个 ListView，该 ListView 存在于与其所在类的布局不同的布局中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:21:36.093

你在哪里使用`listView.setOnItemSelectedListener(this)`？您需要明确通知 ListView 您的 Activity 应该控制 UI 行为...

并在您的片段中添加：

```
listMain.setOnItemSelectedListener(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:52:46.467

创建自己的界面，回调可能是最好的解决方案。在我的应用程序中，我做了这样的事情：

```
public class ModuleFragment extends ListFragment {
   //...
    private OnModuleSelectedListener mdListener;

// this method makes sure my activity implements my interface. If not I show an error
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mdListener = (OnModuleSelectedListener) activity;
            Log.d(TAG, "OnModuleSelectedListener Implemented !");
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                + " must implement OnSqSelectedListener");
        }
    }
// This is the standard onListItemClick, I use it to get data I need and give them to the Listener
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        l.getItemAtPosition(position);
        HashMap<String, String> map = (HashMap<String, String>) l
            .getItemAtPosition(position);
        mdId = map.get("id");
        mdName = map.get("name");
        mdListener.onModuleSelected(mdId,mdName);

    }

    public interface OnModuleSelectedListener {
        public void onModuleSelected(String mdId, String mdName);
    }
} 
```

这是我的活动：

```
public class Main extends Activity implements OnModuleSelectedListener{
//...
    public void onModuleSelected(String mdId, String mdName) {
            //.. I do whatever I want with what I get from the list
    }
} 
```

希望对您有所帮助。这是我能给你的最接近你问题的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:00:08.607

我也一直在尝试做类似的事情。问题在于您在活动中没有用于设置 onitemselected 侦听器的实例。我个人尝试了我能想到的一切来让它发挥作用。包含：

```
list = (ListView) vp.getRootView().findViewById(R.id.listMain);
list.setOnItemSelectedListener(this); 
```

其中 list 是您实例化的列表视图，然后设置为片段中的列表。这种方法的问题在于，当您尝试将侦听器设置为此时，您会得到 NPE。如果您找到此问题的答案，请在此处发布。这对我有很大帮助。

我有人建议我采用一种新方法，每次调用 viewpager 时都重新创建列表（实际上没有分页..即创建滑动的错觉，而实际上视图永远不会改变），我已经如果有人建议使用 ListFragment... ListFragment 会很好，但是您不能在布局中包含除 ListFragment 之外的任何其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T17:16:13.653

在您的 FragmentActivity 中，也许您可​​以使用静态方法来完成这项工作，而不是使用 OnItemSelectedListener。**并在onItemSelected()**中调用此方法（在片段中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T16:34:44.303

在片段的父活动中实现接口将解决您的问题。例如。TestFragment 包含一个名为 TestFragmentListener 的接口。在您的父活动中实现此侦听器接口，并在 Fragment 中保存该接口的引用以执行回调。OnItemSelectedListener 方法对父活动进行回调并正常处理其余部分。请参考下面的示例代码。

```
public final class TestFragment extends Fragment {

    TextView title;
    ListView listView;
    TestFragmentListener mActivity;
    TestAdapter adapter;

    public interface TestFragmentListener {
        public void onItemSelected(Object o);
    }

    public static TestFragment newInstance(String content) {
        TestFragment fragment = new TestFragment();
        return fragment;
    }

    @Override
    public void onAttach(Activity activity) {

        try {
            mActivity = (TestFragmentListener) activity;

        } catch (ClassCastException e) {
            Log.e("Invalid listerer", e.getMessage());
        }

        super.onAttach(activity);
    }

    @Override
    public void onDetach() {
        super.onDetach();
        mActivity = null;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View vw = inflater.inflate(R.layout.layout, container, false);

        title = (TextView) vw.findViewById(R.id.textView1);
        listView = (ListView) vw.findViewById(R.id.listView1);

        return vw;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {

        TestAdapter adapter = new TestAdapter();

        listView.setAdapter(adapter);

        listView.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {
            }
        });

        listView.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                mActivity.onItemSelected(arg2);

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
        super.onActivityCreated(savedInstanceState);
    } 
```

* * *

```
private class TestAdapter extends BaseAdapter {

        @Override
        public int getCount() {
            return 100;
        }

        @Override
        public Object getItem(int arg0) {
            return null;
        }

        @Override
        public long getItemId(int arg0) {
            return arg0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup container) {

            TextView tv = new TextView((Activity) mActivity);
            tv.setText(Integer.toString(position));
            return tv;
        }
    }

} 
```

# makefile - 宏未在 make 规则中解析

> ID：11527537
> 
> 赞同：0
> 
> 时间：2012-07-17T17:16:21.520
> 
> 标签：makefile, gnu-make, fortran90

我有一个制作规则：

```
%.mod: %.f90
       $(FORTRAN) $(FFLAGS) $< -o $(@:.mod=.o)
       mv $(@:.mod=.o) obj 
```

（并且命令前有标签，但我不知道如何让它们出现在这里）

这行得通，但是当我尝试一次性完成时...

```
%.mod: %.f90
       $(FORTRAN) $(FFLAGS) $< -o obj/$(@:.mod=.o) 
```

make 不解析最终的宏。它仅向编译器发送“obj/”，编译器当然无法处理它。有人可以向我解释为什么，以及如何比我在第一个版本中更有效地重写这条规则吗？

此外，我真正在做的是试图让 make 了解某些文件依赖于 .mod 文件，这就是更新 .mod 文件的方式。任何人都知道如何做到这一点，而无需使用 makedepend 或 cmake 之类的东西？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:56:20.100

试试这个：

```
%.mod %.o: %.f90
    $(FORTRAN) $(FFLAGS) $< -o obj/$*.o 
```

当一个模式规则有多个目标模式时，Make 知道运行*一次*规则将构建*所有*目标。

# c# - 应该使用哪个库来使用 C# 从特定目录中删除文件？

> ID：11527538
> 
> 赞同：1
> 
> 时间：2012-07-17T17:16:22.377
> 
> 标签：c#, command-line, delete-file

我想做一个命令行应用程序，它将使用 C# 从特定目录中删除文件以对其进行编码，但我需要一个库来完成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:18:04.987

您可以使用`System.IO.File.Delete`

[http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)

对于一个完整的应用程序，您可能还想查看`System.IO.Directory`

[http://msdn.microsoft.com/en-us/library/system.io.directory](http://msdn.microsoft.com/en-us/library/system.io.directory)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:18:11.753

[`System.IO.File.Delete`](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)命名空间你可以看到如下

```
Array.ForEach(Directory.GetFiles(@"c:\MyDir\"),
              delegate(string path) { File.Delete(path); }); 
```

或者

```
using System.IO;

string[] filePaths = Directory.GetFiles(@"c:\dirname\");
foreach (string filePath in filePaths)
  File.Delete(filePath) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:17:58.700

[`System.IO.File`](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)是包含`Delete`删除文件的方法的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T17:18:18.523

你在找[`File.Delete`](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)吗？

# javascript - JQuery：当父元素鼠标悬停时显示子元素的鼠标悬停

> ID：11527539
> 
> 赞同：0
> 
> 时间：2012-07-17T17:16:29.553
> 
> 标签：javascript, jquery, mouseover

当我将鼠标悬停在父元素上时，如何将鼠标悬停在 img 元素上[以便显示 ALT 属性]？

例子 ：

```
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery('div.dorp').mouseover(function(){
        jQuery(this).find("img").mouseover();
    }).mouseout(function(){
        jQuery(this).find("img").mouseout();
    })
});
</script> 
```

这段代码使我的firefox webbrowser崩溃，我需要找到一种方法来触发img的alt属性，当我将鼠标悬停在比图像大得多的图像容器上时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:18:18.553

难道不应该

`jQuery(this).find("img").mouseover();`?

鼠标悬停是一种方法，而不是属性

而且我假设该`j`行下方的流浪只是您在编写问题时犯的错字，而不是在您的实际代码中。

更新：

做了一个[小提琴](http://jsfiddle.net/7CmRT/)

实际发生的是`mouseover`事件同时在`div`和上触发`img`。气泡上的`mouseover`事件会`img`返回到 div，这会导致另一个`mouseover`on the`img`等无限循环。我的浏览器给出错误“未捕获的 RangeError：超出最大调用堆栈大小”。这可能就是让你的 FF 崩溃的原因。

对此的解决方案（尽管理想情况下，我同意其他海报，因为您应该只使用工具提示插件），即在其上添加一个`mouseover`事件处理程序以`img`停止传播。但是，这仍然不能解决您在子图像上获取工具提示的原始需求。

[更新小提琴](http://jsfiddle.net/7CmRT/2/)

# jsf - 将 Facelets 编译为 Java 代码

> ID：11527541
> 
> 赞同：2
> 
> 时间：2012-07-17T17:16:38.360
> 
> 标签：jsf, compilation, facelets

我看到 Jetty 和 Jasper 有 JSP 编译器支持 JSP 中的 JSF。不过，我也对编译 Facelets 很感兴趣。是否有任何可用的工具可以将其编译为 Java 代码或字节码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T03:52:55.943

Facelets 不是这样工作的。与 JSP 文件不同，Facelets 文件不编译为 Java 类。相反，它通常由 SAX 解析器“编译”成 XML 树（这是解析 XML 的最快方法之一）。XML 树又由[`DefaultFaceletCache`](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.1.7/com/sun/faces/facelets/impl/DefaultFaceletCache.java/)（在 Mojarra 的情况下）内部缓存在服务器内存中，可以通过提供自定义[`FaceletCache`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletCache.html).

# php - WordPress 博客。chrome上的重定向错误太多，FF上的空白页

> ID：11527545
> 
> 赞同：0
> 
> 时间：2012-07-17T17:16:54.977
> 
> 标签：php, wordpress, .htaccess

我有一个 wordpress 博客，它工作正常，但是当我尝试浏览到 mydomain/wp-admin 时，突然在 FF 上出现空白页。在 Chrome 上，我收到错误太多重定向。当我浏览到该站点本身时，它可以正常打开。

我禁用了所有插件并删除了大部分插件，但这并没有解决我的问题。

我将永久链接更改为默认值并解决了问题，但我需要使用漂亮的 url (postname)

我的 .htaccess 文件，永久链接设置为 postname

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

谢谢

**我发现** 我在 mydomain.com/wp-admin 上放置目录密码以提高安全性的问题。但为什么会导致太多重定向错误？？？任何人 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:31:51.343

我认为您正在使用带有 Windows 操作系统的主机。Windows 操作系统不允许您编写 .htaccess 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:26:22.207

我发现我在 mydomain.com/wp-admin 上放置目录密码以提高安全性的问题。但为什么会导致太多重定向错误？？？

# powershell - Powershell-将参数传入函数链

> ID：11527547
> 
> 赞同：1
> 
> 时间：2012-07-17T17:17:03.793
> 
> 标签：powershell, powershell-2.0, powershell-1.0, powershell-3.0

您好，我对 Powershell 相当陌生，并且正在尝试构建一系列由顶层父函数管理的函数。这是我正在创建的功能：

```
Function TraceIntegrityCheck{
    param($MasterTracefile, $FolderWhereATFare) 
```

`$MasterTraceFile`和将`$FolderWhereATFare`是文件路径。我将传递这些。下面是我的脚本，用于所有将使用`$MasterTraceFile`和`$FolderWhereATFare`路径的内部函数。

```
#-------------------------------MasterTraceConfiguration--------------------------
#*********************************************************************************
Function TraceIntegrityCheck{
param($MasterTracefile, $FolderWhereATFare)
[string](cat $MasterTracefile) | Foreach-Object {$_ -replace "\(in\)", ""} | Set-      Content 'C:\tempFile.txt'
$src = [IO.File]::ReadAllText('C:\tempFile.txt')
$pattern ='(?<Key>(APDU\s*:\s*80\s*E[68]))\s*(?<Num>(\b[0-9A-F]{2}\s+)+)'
[Regex]::Matches($src, $pattern) | % { [Regex]::Replace($_.Groups     ['Key'].Value, 'APDU\s:\s*', '') + ' ' + [Regex]::Replace($_.Groups ['Num'].Value, '\s+', ' ') }|set-content 'C:\tempFile.txt' 
$file1 = 'C:\tempFile.txt'
$file2 = 'C:\tempFileMod.txt'
$startValue = '^80 E6'
$innerValue = '^80 E8'
$regex4 = "(?m)\A(?=$startValue)|\r\n(?=$startValue)"
$regex5 = "(?m)$innerValue"
$content = [IO.File]::ReadAllText($file1).TrimEnd()
$content -split $regex4 | Select-Object -Skip 1 |
  ForEach-Object -Begin {$i = 1} -Process {
    if ($_ -match $regex5) {
      $replacement = '{0:00}' -f $i++
      $file2 = $file2 -replace '\b(?=\.\w+$)', $replacement
      Set-Content -Path $file2 -Value $_ #-Verbose
    }
  }

#-------------------------------ATF Configuration---------------------------------
#*********************************************************************************

Function allOnOneLine{  
(([regex]::replace((get-content $FolderWhereATFare),"\s+"," "))).replace    ("9000","`r`n9000`r`n") > $FolderWhereATFare
}
#Call the Function
allOnOneLine

Function StripATF{
$original_file = '$FolderWhereATFare'
$destination_file =  'C:\modatfLinedup.txt'
(Get-Content $original_file) | Foreach-Object {
    $_ -replace '9000', '' 

    } | Set-Content $destination_file
}
#Call the StripATF
StripATF
#And the white space stripper
Function Wspace{
$file1 = 'C:\modatfLinedup.txt'
(gc $file1) | ? {$_.trim() -ne "" } | set-content $file1
}
#Call the Wspace
Wspace
Function spaceStrip{
$r=[regex]' ';
$original_file2 = 'C:\modatfLinedup.txt'
$destination_file2 ='C:\modatfLinedup.txt'
(Get-Content $original_file2) | Foreach-Object {
    $_ -replace '^ ', ''

     }| Set-Content $destination_file2
}
 #Call the Function
spaceStrip
Function folderDistribute{
  $file3 = 'C:\modatfLinedup.txt'
$file4 = 'C:\modATFLinedup.txt'
$startValue = '^80 E6'
$innerValue = '^80 E8'
$regex4 = "(?m)\A(?=$startValue)|\r\n(?=$startValue)"
$regex5 = "(?m)$innerValue"
$content = [IO.File]::ReadAllText($file3).TrimEnd()
$content -split $regex4 | Select-Object -Skip 1 |
  ForEach-Object -Begin {$i = 1} -Process {
    if ($_ -match $regex5) {
      $replacement = '{0:00}' -f $i++
  $file4 = $file4 -replace '\b(?=\.\w+$)', $replacement
  Set-Content -Path $file4 -Value $_ #-Verbose
    }
   }
#Call the Function
folderDistribute
}
}
C:\Users\nicalder\Desktop\Project1\atf\atf\modatfs\modatf.txt
TraceIntegrityCheck -file1 'C:\Users\user\Desktop\Project1\Master_Trace.txt' -    file2 'C:\Users\user\Desktop\Project1\modatf.txt' 
```

我的问题在于尝试将原始 $MasterTraceFile 和 $FolderWhereATFare 文件串起来，以便我可以将它们传递给函数并让子函数都使用它们。

所以我真正想做的只是能够传入这两个参数文件路径，以便子函数可以使用它们。我想基本上是创建一个允许我使用传入参数的构造函数。

我知道这可能看起来令人困惑，所以请让我知道您的想法。我只是想通过子函数连接文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:25:23.247

看起来你想做类似的事情：

```
function outer($a) {
    function inner($b){
        write-host -fore red $a
        write-host -fore red $b
    }

    inner 2

}

outer 1 
```

以上确实打印：

```
1
2 
```

即`$a`from函数在function`outer`中可用`inner`

# php - 显示来自 SQL DB 的加密数据

> ID：11527551
> 
> 赞同：1
> 
> 时间：2012-07-17T17:17:09.943
> 
> 标签：php, sql, sql-server, encryption

所以我在这里按照本指南[http://www.kodyaz.com/articles/sql-server-2005-database-encryption-step-by-step.aspx](http://www.kodyaz.com/articles/sql-server-2005-database-encryption-step-by-step.aspx)了解如何为我的数据库设置加密。那边一切都很好。

我正在尝试获取一些已加密的数据以便现在显示。我可以调用未加密的数据，但我似乎无法弄清楚如何使用对称密钥来解密加密数据并显示在页面上。

最初我认为我应该使用存储过程并让它捕获值，但不完全确定如何实现它。

```
echo "This is the database userId field: " . $row->userId . "<p>";
echo "This is the database email field: " . $row->email . "<p>";
echo "This is the database encryptedpassword2 field: " . $row->encrypteddata . "<p>"; 
```

这就是我调用数据的方式，但不确定如何让加密数据字段通过我的密钥传递然后显示。目前它只显示随机字符。

我对 SQL 加密有点陌生，所以我希望我能设法解释一下自己。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:46:39.923

一般来说，您不需要解密密码字段。您只需对用户的输入进行哈希处理，并将其与之前的哈希密码进行比较，以查看哈希是否匹配。请花一点时间了解[散列和加密之间的区别](https://stackoverflow.com/questions/4948322/fundamental-difference-between-hashing-and-encryption-algorithms)。

如果您真的想从数据库中获取加密信息（希望不是密码），您应该在返回给 PHP 之前调用[`DecryptByKey`](http://msdn.microsoft.com/en-us/library/ms181860.aspx)您的 SQL 语句（如[链接文章中所述）。](http://www.kodyaz.com/articles/sql-server-2005-database-encryption-step-by-step.aspx)

# java - 为复选框字段创建编辑器装饰器

> ID：11527555
> 
> 赞同：0
> 
> 时间：2012-07-17T17:17:37.953
> 
> 标签：java, gwt, gwt-editors

我想要复选框字段的 ValueBoxEditorDecorator 之类的东西。由于 CheckBox 不扩展 ValueBoxBase，我需要创建自己的。

因此，我通过将 ValueBoxEditorDecorator 代码改编为我的新自定义类来开始对其进行编码：

```
public class CheckBoxDecorator extends Composite implements HasEditorErrors<CheckBox>, IsEditor<LeafValueEditor<Boolean>> {
...
The code here is the adaptation of ValueBoxEditorDecorator 
...
} 
```

不幸的是它不起作用我有以下运行时错误：

```
[ERROR] [website] - Errors in     'generated://50642882199077F9FB1890056A90477A/com/test/client/core/MyView_RequestFactoryEditorDelegate.java'
[ERROR] [website] - Line 112: The constructor MyView_acceptTerms_Context(MyvalueProxy, CheckBoxDecorator, String) is undefined 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:32:00.853

抱歉，我的代码中有错误，这是正确的代码：

```
public class CheckBoxDecorator extends Composite implements HasEditorErrors<Boolean>, IsEditor<LeafValueEditor<Boolean>> {
...
The code here is the adaptation of ValueBoxEditorDecorator 
...
} 
```

# c# - WMI / WQL 查询应用程序池开始时间/回收时间

> ID：11527556
> 
> 赞同：1
> 
> 时间：2012-07-17T17:17:45.130
> 
> 标签：c#, wmi

我一直在尝试获取特定应用程序池已启动和/或以前回收的时间或时间戳。我看到我可以获得“默认网站”的“正常运行时间”，但它似乎不可能在其中的特定应用程序池上，因为我还没有能够为这个特定的东西找到这样的属性值。有谁知道用什么来解决这个问题？

谢谢

# perl - Perl，如何使用“打印”打印数字总和的评估

> ID：11527559
> 
> 赞同：3
> 
> 时间：2012-07-17T17:18:03.657
> 
> 标签：perl

查看以下代码示例。

```
$ct=5;
print "hey $ct+1"; 
```

评估时，返回：

```
hey 5+1 
```

但是，我试图让代码返回：

```
hey 6 
```

有谁知道我是否可以进行某种评估调用以使这种情况正确发生，或者有一种方法可以稍微改变语法？我知道我可以简单地做：

```
$dum=$ct+1;
print "hey $dum"; 
```

但我向您展示的是更复杂事物的简单版本。如果我能让这个小例子正常工作，我的大问题就解决了。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T17:20:56.870

您想执行 Perl 加法运算符，但代码仅具有 Perl 字符串文字。你要

```
print "hey ", $ct+1; 
```

如果变量中有 Perl 源代码并且想要执行它，则必须调用 Perl 解析器和编译器：[`eval EXPR`](http://perldoc.perl.org/functions/eval.html).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T17:21:42.063

另一种选择是格式化打印。

```
my $ct = 5;
printf "hey %s", $ct+1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T17:44:38.927

这是一种中间 Perl，但您可以将表达式放入引用中并在双引号内取消引用：

```
print "hey @{[$ct+1]}";
print "hey ${\($ct+1)}"; 
```

像这样的代码更难阅读，并且给 Perl 带来了对新手不友好的名声，所以我不推荐它而不是从引号中提取表达式：

```
print "hey ", ($ct+1);
print "hey " . ($ct+1); 
```

# php - datetimepicker getElementById vs name ie8 问题

> ID：11527565
> 
> 赞同：2
> 
> 时间：2012-07-17T17:18:22.470
> 
> 标签：php

我有一个 javascript datetimepicker，它适用于除 IE7 或更高版本之外的所有内容。问题似乎与`getElementById`. 以下是当前代码的外观：

```
<tr>
 <td style="width: 143px">Call Date:
 </td>
<td style="width: 472px">
<input type="Text" name=cdate size=40 style="color: black;background-color:#FFFF66; width: 270px;">
<a href="javascript:NewCal('cdate','ddmmyyyy')"><img src="cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>
</td>
</tr> 
```

在 IE7 或更高版本中，这将不起作用。我得到“缺少 Javascript 错误对象”。如果我更改`name=cdate`为`id=cdate`它可以工作，但是当我将表单提交到我的 php 插入时：

```
<?
$cdate=$_POST['cdate']; 
```

提交失败。那么我该如何纠正这个问题，或者我怎样才能`id= element`通过`name= element`......希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:28:23.437

您可以同时使用两者`name`，`id`因此服务器将获取名称，您可以`id`在客户端使用

```
<input type="Text" name="cdate" id="cdate" size="40" style="color: black;background-color:#FFFF66; width: 270px;" /> 
```

所以你可以在服务器端使用

```
$cdate=$_POST['cdate']; // because it has name="cdate" 
```

在 ckient 方面你可以使用

```
var cdate=getElementById('cdate'); // Because it has id="cdate" 
```

# html - 具有动态内容的固定宽度侧边栏

> ID：11527568
> 
> 赞同：1
> 
> 时间：2012-07-17T17:18:48.327
> 
> 标签：html, css, layout, fluid-layout

[http://jsfiddle.net/uCwEz/](http://jsfiddle.net/uCwEz/)

我需要三个 div，第一个和最后一个 div（红色和蓝色）具有固定宽度，中间 div（绿色）动态改变其宽度，以便在调整页面宽度时完美地适应外部 div。在 jsFiddle 中，我已经通过固定宽度的第一个 div 和内容调整来完成此操作，并且我已经将第三个 div 浮动到了右侧，但它需要向上滑动到您在主 div 旁边看到的空白空间中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:20:54.450

只需在 HTML`#div3`之间`#div1`移动即可。`#div2`

```
<div id="container">
    <div id="div1">
    </div>
    <div id="div3">   
    </div>
    <div id="div2">
    </div>
</div>​ 
```

演示[http://jsfiddle.net/thebabydino/uCwEz/2/](http://jsfiddle.net/thebabydino/uCwEz/2/)

# javascript - 通过 getElementById() 进行验证

> ID：11527569
> 
> 赞同：1
> 
> 时间：2012-07-17T17:18:49.613
> 
> 标签：javascript, html

我一直在尝试通过使用'getElementById()'和'.value'来验证我的字段。但是，似乎 getElementById.value 不起作用或某些代码与功能重叠。

更新的 Javascript 函数：

```
function validate() {
    var Name = document.getElementById('Name').value;
    var Tel = document.getElementById('Tel').value;
    var FaxNo = document.getElementById('FaxNo').value;
    if (Name != "") //wanted to check for alphabets only.
    {
         alert("Correct");
         return true; //doesnt go to next.php
    }
    else 
    {
          alert("Don leave blank!")
          return false;
    }
    if (isNaN(Tel)) //check only numbers. Same code for FaxNo.
    {
        alert("Correct");
        return true; //doesnt go to next.php
    }
    else 
    {
      alert("invalid");
      return false
    }

  return true; //doesn't go to next.php
} 
```

我的表格：

```
<Form action ="next.php" method="post">
<input name="Name" type="text" id="Name" value=""/>
<input name="Tel" type="text" id="Tel" value=""/>
<input name="FaxNo" type="text" id="FaxNo" value=""/>
<input type="submit" name="submit" onclick="return validate();"/>
</Form> 
```

我已经在我的 Javascript 中定义了我的 onclick 函数并尝试添加 return false 。但是警报仍然无法出现。好心提醒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T17:21:28.087

您的标记无效：

```
<input name="Name" type="text" id="Name" " value=""/>
                                         ^-----------should be removed 
```

所以更正将删除所有额外的`"`字符：

```
<input name="Name" type="text" id="Name" value=""/>
<input name="Name" type="text" id="Name" value=""/>
<input name="Tel" type="text" id="Tel" value=""/>
<input name="FaxNo" type="text" id="FaxNo" value=""/> 
```

为了防止提交，当输入无效时，您可以尝试以下操作：

```
function validate() {
    var Name = document.getElementById('Name').value;
    var Tel = document.getElementById('Tel').value;
    var FaxNo = document.getElementById('FaxNo').value;

    if (Name != "") //wanted to check for alphabets only.
        alert("Correct")
    else {
        alert("Don leave blank!")
        return false;
    }

    if (isNumeric(Tel)) //check only numbers. Same code for FaxNo.
        alert("Correct")
    else {
        alert("invalid");
        return false;
    }
}
//Borrowed from jQuery lib
function isNumeric( obj ){
    return !isNaN( parseFloat(obj) ) && isFinite( obj )
}

<input type="submit" name="submit" onclick="return validate()"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:28:21.403

Try this,

```
function validate() {
    var Name = document.getElementById('Name').value;
    var Tel = document.getElementById('Tel').value;
    var FaxNo = document.getElementById('FaxNo').value;
    if (Name != "") {}
    else {alert("Don leave blank!"); return false;}
    if (isNaN(Tel)){ alert("invalid"); return false;}
    else { }
return true;
} 
```

Your HTML submit button code should be

```
<input type="submit" name="submit" onclick="return validate()"/> 
```

Use return false to prevent submitting form in case of any validation errors.

# c# - 路由可选参数

> ID：11527570
> 
> 赞同：2
> 
> 时间：2012-07-17T17:18:54.583
> 
> 标签：c#, asp.net, asp.net-web-api

我正在开发我的第一个 web api，但我一直在尝试为这些 url 创建规则

```
1) http://mydomain.com/values/4 --> this number can be any, this is just an example
2) http://mydomain.com/values/
3) http://mydomain.com/values/?param1=test1&param2=test2
4) http://mydomain.com/values/?param1=test1
5) http://mydomain.com/values/?param2=test2 
```

我当前的路由规则是

```
routes.MapHttpRoute(
    name: "Route1",
    routeTemplate: "{controller}/{id}/"
);
routes.MapHttpRoute(
    name: "Route2",
    routeTemplate: "{controller}/{param1}/{param2}",
    defaults: new { param1 = RouteParameter.Optional, param2 = RouteParameter.Optional }
); 
```

以及我为这些网址提供服务的方法

```
// GET values/
// GET values/?param1=test1&param2=test2
// GET values/?param1=test1
// GET values/?param2=test2
public IEnumerable Get(string param1, string param2)
{
    return new string[] { "value1", "value2" };
}

// GET values/5
public string Get(int id)
{
    return "value";
} 
```

我有2个问题

1）`http://mydomain.com/values/`没有解决

2）`http://mydomain.com/values/?param1=test1`并且`http://mydomain.com/values/?param2=test2`没有解决。

你能帮我创建提供这些网址的路线吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T19:16:18.290

```
routes.MapHttpRoute(
    name: "Route1",
    routeTemplate: "{controller}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

应该做你需要的。查询字符串参数只要同名就已经映射到Action参数，不需要在路由中添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:33:33.563

首先你不需要路线

```
routes.MapHttpRoute(
  name: "Route2",
  routeTemplate: "{controller}/{param1}/{param2}",
  defaults: new { param1 = RouteParameter.Optional, param2 = RouteParameter.Optional }
); 
```

其次要解决`http://mydomain.com/values/`您需要`id`通过使其成为可选参数`int?`

```
// GET values/5
public string Get(int? id)
{
  return "value";
} 
```

# jquery - 在 DataTables jedit 中，无法获取行 ID？

> ID：11527571
> 
> 赞同：-2
> 
> 时间：2012-07-17T17:18:56.463
> 
> 标签：jquery

我正在使用 Datatables jedit，我无法获得 rowid。即我想分配唯一的 id 并得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:47:08.187

在datatables 网站上的[这个示例](http://jquery-datatables-editable.googlecode.com/svn/trunk/inline-edit.html)中，ID 会自动添加到行中。当您的脚本向 ajax 源提交时，ID 将作为`$_REQUEST`变量传递给脚本。

如果您需要更多，则必须更好地解释您的问题。

# php - 如何使用 PHPWord 正确显示双引号？

> ID：11527573
> 
> 赞同：0
> 
> 时间：2012-07-17T17:18:59.227
> 
> 标签：php, utf-8, htmlspecialchars, quotations, phpword

好吧，几个月来我一直在努力解决这个问题。我有一个遗留的 MySQL 数据库，可以描述为字符地狱。经过大量工作，我能够修复所有显示不正确的字符并将所有内容都设为 UTF-8（表格、排序规则、与数据库的连接、标题等）。

现在的问题是，当我尝试使用 PHPWord 创建 Word 文档时，双引号（“）显示为它的 html 实体等效项`&quot;`。这是我胜利之间的唯一障碍，所以，如果有任何想法，我会非常感谢.

这是代码：

```
include_once "../PHPWord.php";
include_once "../debug.php";

$file_name = "filename.docx";
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$file_name");
//header("Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document");
header("Content-Type: application/vnd.ms-word; charset=utf-8");
header("Content-Transfer-Encoding: binary");

$index = 1218;
$mysqli = new mysqli("host","user","pass","database");
$mysqli->set_charset("utf8");
$qry1 = "SELECT * FROM table WHERE index = $index ORDER BY field DESC";
$qry2 = "SELECT * FROM table2 WHERE index = $index";

$PHPWord = new PHPWord();
$section = $PHPWord->createSection();

$section->addText("Connection Encoding: ".$mysqli->character_set_name());
$section->addText("resuls");

$res1 = $mysqli->query($qry1);
while($row = $res1->fetch_assoc()){
    $section->addText($row[name]);
    $section->addText(mb_detect_encoding($row['name']));
}

$section->addText("results2");

$res2 = $mysqli->query($qry2);
while($row = $res2->fetch_assoc()){
    $section->addText(trim($row['title']));
    $section->addText(mb_detect_encoding($row['title']));
}

$objWriter = PHPWord_IOFactory::createWriter($PHPWord,'Word2007');
$objWriter->save('php://output');
exit; 
```

结果，是这样的：

```
book:&quot;Book Title&quot; 
```

到目前为止，我已经尝试了很多函数和解决方案，包括 PHP 函数，如 html_entity_decode、转义字符和修改的 PHPWord 文件，以防止它们在将文本添加到输出时尝试重新编码文本。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:13:47.620

我假设您需要使用 [msqli_real_escape_string()](http://www.php.net/manual/en/mysqli.real-escape-string.php)

在您的查询中的某处，或者其他地方，也许这有适合您的解决方案： [phpWord handling of UTF-8](http://phpword.codeplex.com/discussions/261365/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T17:17:14.943

[尝试来自GitHub](https://github.com/PHPOffice/PHPWord)的最新版本 (0.8) PHPWord 。此版本已处理 UTF-8 问题。

# axis2 - 如何控制在 Axis2 中序列化哪些字段？

> ID：11527575
> 
> 赞同：0
> 
> 时间：2012-07-17T17:19:11.953
> 
> 标签：axis2

如何控制在 Axis2 中序列化哪些字段？我有一些不想暴露给客户的字段（真正的 getter/setter 对）。此外，有些在我想要它们的地方被视为可空（例如，创建了一些IntSpecified 属性）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:30:24.303

我认为不幸的是没有注释可以将属性排除在序列化之外。

我认为您将需要创建数据传输对象 (DTO)。否则，您的核心业务对象和您作为 API 公开的对象之间将不会有一个清晰的分离。

# playframework - playframework 2.x 如何对应用程序/json 请求进行基本身份验证？

> ID：11527576
> 
> 赞同：2
> 
> 时间：2012-07-17T17:19:14.650
> 
> 标签：playframework, playframework-2.0

我们想为基本用户进行表单身份验证，我认为我们可以通过 zentasks 示例来完成此操作。我们如何进行基本身份验证，以便程序可以以编程方式抢占挑战而不处理表单身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T19:34:20.417

没关系，找到了完美的东西，而且效果很好……

[http://digitalssanctum.com/2012/06/07/basic-authentication-in-the-play-framework-using-custom-action-annotation/](http://digitalsanctum.com/2012/06/07/basic-authentication-in-the-play-framework-using-custom-action-annotation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T21:05:03.893

我使用 Play Framework Filters 和 Scala 创建了基本身份验证的示例实现。这是[要点](https://gist.github.com/dk8996/1fd2497e82297dad5789)，这是一篇[博](http://www.mentful.com/2014/06/14/basic-authentication-filter-for-play-framework/)文。

# android - 如何确保 AlarmManager 在手机重启和应用程序终止后幸存下来

> ID：11527581
> 
> 赞同：1
> 
> 时间：2012-07-17T17:19:37.447
> 
> 标签：android, alarmmanager

我有一个 Android 应用程序，我想在一天中的固定时间向用户发送通知

为此，我使用 AlarmManager 来安排警报，然后使用它来生成通知

但我面临的问题是，如果用户“强制关闭”应用程序，警报会被重置，因此我不会收到任何通知。这是正常行为吗？有没有办法解决这个问题？

此外，如果手机重新启动，警报也会被取消。我该如何控制它？我是否需要收听电话重启事件并在那里再次安排闹钟？这是这里唯一的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:42:47.013

我的数据库中有一个表来存储我所有的挂起警报，以防重启。如果手机重新启动，我有一个重置警报的服务类。

```
private AppDatabase mDbHelper;
public class BootService extends Service {

    @Override
    public IBinder onBind(final Intent intent) {
            return null;
    }

    @Override
    public void onCreate() {
            super.onCreate();
            mDbHelper = new AppDatabase(this);
            mDbHelper.open();
    }

    @Override
    public void onStart(final Intent intent, final int startId) {
            super.onStart(intent, startId);
            LoadNotificationsFromDB();             
    }

    private void LoadNotificationsFromDB() {
            Cursor c = mDbHelper.getPendingNotifications();
            if (c.moveToFirst()) {
                    do {

                            int id = c.getInt(AppDatabase.ID_COLUMN);
                            String date = c.getString(AppDatabase.DATE_COLUMN);
                            addNotification(id, date);
                    } while (c.moveToNext());
            }
            c.close();
    }

    private void addNotification(int id, String date) {
            Intent intent = new Intent(BootService.this,    
                           NotificationBroadcastReceiver.class);

            PendingIntent mAlarmSender = PendingIntent.getBroadcast(
                            BootService.this, id, intent, 0);

            long alarmDate = Long.valueOf(date);

            AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
            am.set(AlarmManager.RTC_WAKEUP, date, mAlarmSender);
    }
} 
```

然后创建一个接收器类：

```
public class BootReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {
            if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
                    Intent mServiceIntent = new Intent();
                    mServiceIntent.setAction("<package name>.BootService");
                    ComponentName service = context.startService(mServiceIntent);
                    if (null == service) {
                            // something really wrong here
                    }
            } 
    }
} 
```

并将以下行添加到`Manifest.xml`

```
 <receiver android:name=".BootReceiver" android:enabled="true">
            <intent-filter>
                    <action android:name ="android.intent.action.BOOT_COMPLETED"></action>
            </intent-filter>
    </receiver>
</application>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:37:53.607

您将需要设置与此类似的东西来连接到引导完成的意图。

```
<receiver android:name="MyStartupIntentReceiver">
<intent-filter>
<action
  android:name="android.intent.action.BOOT_COMPLETED" />
<category android:name="android.intent.category.HOME" />
</intent-filter>
</receiver> 
```

一旦你有了它，你将需要启动一个服务或做一些事情

```
public void onReceive(Context context, Intent intent) {
    Intent serviceIntent = new Intent();
    serviceIntent.setAction("com.yourapp.yourservice");
    context.startService(serviceIntent);
} 
```

# security - 一个Web应用同时提供公共API和内部API，如何保护内部API？

> ID：11527587
> 
> 赞同：0
> 
> 时间：2012-07-17T17:19:52.953
> 
> 标签：security, networking

Web 应用程序（war）提供了两组 HTTP API，一组对 Internet 上的客户端公开，另一组供内部使用，不应该对 Internet 公开。网络部署以保护内部 API 的最佳实践是什么？

我知道一种常见的方法是将应用程序拆分为两个可部署项，将提供公共 API 的前端放在 DMZ 中，将提供内部 API 的后端放在内部网络中。但出于某种原因，我想将应用程序保持为可部署的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:22:49.503

您可以在这里尝试一些事情。对于私有 API，我真的建议将其切断到它自己的应用程序中，该应用程序只监听本地地址。如果您必须将它们放在一起，您可以实现使用内部 API 所需的某种 oauth 设置，这样只有拥有有效 oauth 令牌的用户才能完成对受限资源的 API 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:50:22.120

最后我们引入了一个反向代理来隐藏内部网络中的 API。来自 Internet 的客户端只能连接到反向代理，反向代理被配置为仅将公共 API 的请求转发到应用程序。

# php - SimplePie 不会显示来自 Facebook Atom 提要的最新帖子

> ID：11527591
> 
> 赞同：0
> 
> 时间：2012-07-17T17:19:57.983
> 
> 标签：php, facebook, atom-feed, simplepie

如果已经涵盖了第一个问题，那么提前发布非常抱歉，我只是找不到答案。

我正在使用 SimplePie 1.2.1 在其公司网页上显示客户 Facebook 墙上的 Atom 提要。它似乎工作得很好，除了 SimplePie 显示的最新条目是近一个月前的。

当我在浏览器中测试提要 URL 时，一切都是最新的，因此提要似乎没有任何问题。

谁能验证下面的代码确实应该显示 3 个最新帖子？我是否忽略了一些明显的东西？

在头部：

```
// Make sure SimplePie is included. You may need to change this to match the location of simplepie.inc.
require_once('inc/simplepie.inc');

// We'll process this feed with all of the default options.
$feed = new SimplePie();

// Set the feed to process.
$feed->set_feed_url('http://www.facebook.com/feeds/page.php?format=atom10&id=160652600629357');

// Run SimplePie.
$feed->init();

$feed->handle_content_type(); 
```

在身体里：

```
<?php
foreach ($feed->get_items(0,3) as $item):
?>

    <div class="item">
        <h2><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></h2>
        <p><?php echo $item->get_description(); ?></p>
        <p><small>Posted on <?php echo $item->get_date('j F Y | g:i a'); ?></small></p>
    </div>

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:06:31.840

您当前使用的是过时的 1.2.1，并且还有可能会影响的已知错误。尝试改用[SimplePie 1.3](http://simplepie.org/downloads/)。

# .net - 在 IIS 中运行时，WCF 服务无法连接到 Web 服务

> ID：11527598
> 
> 赞同：2
> 
> 时间：2012-07-17T17:20:18.133
> 
> 标签：.net, wcf, web-services, ssl, iis-5

我有一个 WCF 服务，它被用作我们正在集成的第三方 asmx 服务的包装器。它正在与之通信的服务是使用 Visual Studio 中的“添加服务引用”对话框添加的。WCF 服务中的代码在单元测试中执行时有效，并且在调试主机应用程序时也有效。

当调试主机在 ASP.NET 开发服务器中运行时，它可以正常工作。当我将应用程序部署到本地 IIS 实例（与开发机器相同，IIS 5.1）时，服务将启动并运行，但在连接第三方 asmx 端点时会引发此错误：

```
System.ServiceModel.Security.SecurityNegotiationException: 
Could not establish trust relationship for the SSL/TLS secure channel with
authority 'xxxxx.thirdparty.com'. ---> System.Net.WebException: The underlying
connection was closed: Could not establish trust relationship for the SSL/TLS
secure channel. ---> System.Security.Authentication.AuthenticationException: 
The remote certificate is invalid according to the validation procedure. 
```

这些是服务端点的配置文件中的设置：

```
<basicHttpBinding>
  <binding name="ServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" 
    useDefaultWebProxy="false" proxyAddress="http://[internalWebProxyHere]">
    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
    <security mode="Transport">
      <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
      <message clientCredentialType="UserName" algorithmSuite="Default"/>
    </security>
  </binding>
</basicHttpBinding> 
```

该服务在 Visual Studio 中有效，但在部署到 IIS 后无效。我可以做些什么来调试 AuthenticationExceptions？

编辑：客户端端点如下所示：

```
<endpoint address="https://'xxxxx.thirdparty.com/thirdpartyendpoint.asmx" 
    binding="basicHttpBinding" bindingConfiguration="ServiceSoap" 
    contract="eContracting.ServiceSoap" name="ServiceSoap"
    behaviorConfiguration="Behavior"/> 
```

我尝试添加一个端点行为来禁用证书验证，但这没有帮助：

```
<behavior name="Behavior">
  <clientCredentials>
    <serviceCertificate>
      <authentication certificateValidationMode="None"/>
     </serviceCertificate>
    </clientCredentials>
</behavior> 
```

如果它也有助于第三方证书是由 Rapid SSL CA 颁发的，则该证书是有效的。在我的本地证书存储中查看此证书位于“中间证书颁发机构”选项卡中，但不在“受信任的根证书颁发机构”或“受信任的发布者”中。

编辑：通过将证书添加到“受信任的根证书颁发机构”解决了这个问题，尽管有一个问题。

1.  从 ControlPanel -> InternetProperties -> Content -> 证书导入证书。如果您以这种方式安装，它表示它成功，但它不会显示在 winhttpcertcfg 中。
2.  通过开始 -> 运行 -> 输入“certmgr.msc”并通过此处安装来导入证书。它会说已成功导入，但 winhttpcertcfg 无法使用证书。
3.  通过开始 -> 运行 -> MMC 导入证书并使用证书管理单元确实有效。单击[此处](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/sag_cmprocsimport.mspx?mfr=true)查看 Windows XP 的说明。

具体来说，这是有效的：

1.  开始 -> 运行 -> MMC
2.  文件 -> 添加/删除管理单元
3.  单击添加...
4.  选择证书并单击添加
5.  选择计算机帐户，然后单击下一步
6.  选择本地计算机，然后单击完成
7.  点击关闭
8.  将证书从控制台根目录导入到这些位置：

    *   受信任的根证书颁发机构
    *   中级认证机构
    *   第三方根证书颁发机构

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:31:31.180

尝试在服务 web.config 中启用跟踪。通过将 switchValue 设置为 Verbose，您可能会发现更详细的错误。也许证书有问题。

[配置和启用跟踪](http://msdn.microsoft.com/en-us/library/ms733025%28v=vs.90%29.aspx)

您也可以尝试将服务证书验证模式设置为无。

[X509ServiceCertificateAuthentication.CertificateValidationMode 属性](http://msdn.microsoft.com/en-us/library/system.servicemodel.security.x509servicecertificateauthentication.certificatevalidationmode.aspx)

另一种选择是将快速 SSL CA 导入本地计算机上的受信任的根证书颁发机构。我怀疑卡西尼没有验证或忽略证书。

另一个可能要查看的问题是，为您的服务运行的 IIS 帐户可能没有从证书存储区读取的权限。

# database - 三个实体的数据库结构

> ID：11527601
> 
> 赞同：0
> 
> 时间：2012-07-17T17:20:32.577
> 
> 标签：database

我是使用 dbs 的新手，我希望这是一个相当普遍的问题。我有用户、客户和项目。用户有很多客户，客户有很多项目，但用户只能看到客户的部分项目。我有一个用户表。我有一个带有 user_id 列的客户表，因此我可以将客户与用户相关联。我有一个带有 client_id 列的项目表，因此我可以将项目与客户相关联。如何将客户项目的子集与特定用户相关联。所以client_xyz 有project_a、project_b 和project_c。user_1 应该只能看到 client_xyz 的 project_a 和 project_c。我可以在名为 user_id 的项目表中添加一个额外的列，但如果我有 100 个用户和 100 个项目，这可能会迅速增长。我应该如何设置数据库？我是否过于复杂了？这是Rails 3，我正在使用 Active Record 和 SQLite。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:23:54.497

您需要一个具有`project_id`和`user_id`字段的表。此表中的每条记录都会将一个客户与一个项目相关联。您可以将任意数量的客户关联到一个项目，或者将任意数量的项目关联到一个客户。

# xml - 为什么我不能将此 xml 绑定到 DataGrid？

> ID：11527602
> 
> 赞同：0
> 
> 时间：2012-07-17T17:20:36.140
> 
> 标签：xml, actionscript-3, apache-flex, datatable, mxml

我使用如下所示的 HTTP 服务请求一些 XML：

```
<s:HTTPService id="flickrCall" url="{api_request}" resultFormat="e4x" result="Alert.show('Success');" fault="Alert.show('error');"/>

<rsp stat="ok">
    <photos page="1" pages="46" perpage="100" total="4501">
        <photo id="7583616364" owner="92677738@N00" secret="17ce853221" server="8421" farm="9"         title="Jack White iii" ispublic="1" isfriend="0" isfamily="0"/>
        <photo id="7515807120" owner="47494725@N07" secret="66fcf2cfd5" server="7137" farm="8" title=".- / -.. ..- -.. . / .- - / .- .--. .--. .-.. . -... . . ..." ispublic="1" isfriend="0" isfamily="0"/>
        <photo id="7465794324" owner="73420073@N07" secret="dd42ea30f0" server="7254" farm="8" title="Project 366 175: June 24th" ispublic="1" isfriend="0" isfamily="0"/>
        ...
    </photos>
</rsp> 
```

我尝试将它绑定到这样的数据网格：

```
 <s:DataGrid id="flickrFotoCollection" width="100%" dataProvider="{flickrCall.lastResult.photo}">
     <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="@id"/>
            <s:GridColumn dataField="@title"/>
            <s:GridColumn dataField="@owner"/>
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

但是没有任何显示，即使请求已成功发出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:01:47.463

dataProvider 应该是一个 XMLListCollection，如下所示：

```
<s:DataGrid dataProvider="{ new XMLListCollection(flickrCall.lastResult.photos.photo)}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:15:48.920

怎么样：

```
dataProvider="{flickrCall.lastResult.photos}" 
```

这应该向网格发送 <photo> 标签数组。

# java - 尝试显示列表时出现 java.lang.NullPointerException 在 JSF 页面中

> ID：11527604
> 
> 赞同：-1
> 
> 时间：2012-07-17T17:20:38.637
> 
> 标签：java, jsf, jsf-2

当我尝试在 JSF 页面中显示`List<String>`带有国家/地区的 Java 时，我在 JSF 页面中遇到了非常奇怪的问题。这是代码：

```
 private List<String> listCountries;

    // Get the list with Countries
    public List<String> getlistCountries() { 
        // Generate List of Countries
        initlistCountries();
        return listCountries;
    }

    public void initlistCountries(){
        listCountries.add("Afghanistan");
        listCountries.add("Albania");
        listCountries.add("Algeria");
        listCountries.add("Andorra");
        listCountries.add("Angola");
        ......
    } 
```

这段代码正确吗？我不能用`@PostConstruct`，因为我已经用过了。

当我加载 JSF 页面时，我得到了他的错误：

```
java.lang.NullPointerException
    at com.DX_57.AC_57.AddAccount.initlistCountries(AddAccount.java:344)
    at com.DX_57.AC_57.AddAccount.getlistCountries(AddAccount.java:339) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:22:51.320

你还没有初始化`listCountries`所以让它

```
 public void initlistCountries(){
        listCountries = new ArrayList<String>();
        listCountries.add("Afghanistan");
        listCountries.add("Albania");
        listCountries.add("Algeria");
        listCountries.add("Andorra");
        listCountries.add("Angola");
        ......
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:23:06.837

初始化数组列表。

```
private List<String> listCountries=new ArrayList<String>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:24:11.660

看起来您从未初始化过 listCountries。

```
public void initlistCountries()
{
        listCountries = new ArrayList< String >(); // Add this line.

        listCountries.add("Afghanistan");
        listCountries.add("Albania");
        listCountries.add("Algeria");
        listCountries.add("Andorra");
        listCountries.add("Angola");
        ......
} 
```

# google-sheets - 在 Google 表格中使用 COUNTA 函数时，是否可以将默认值设置为零？

> ID：11527612
> 
> 赞同：6
> 
> 时间：2012-07-17T17:20:58.600
> 
> 标签：google-sheets, google-sheets-formula, array-formulas

我在 Google 电子表格中使用数据透视表来计算给定日期不同类型事件类型的出现次数。事件列在一张纸上，一列是“日期”，一列是“类型”。基于此生成数据透视表。

问题是对于不存在事件类型的日期，COUNTA 返回空。我宁愿它返回0。

原因是出于图表和统计目的，当您从该数据创建图表时，它会在值之间进行插值，忽略空单元格。我希望它在这些事件类型不存在的日子在图表上显示为零......

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:59:10.797

UPD：对不起，我误解了你的需要。如果在另一张工作表上写下以下内容怎么办？

```
=arrayformula(IF('PivotSheetName'!A1:Z100="";0;'PivotSheetName'!A1:Z100)) 
```

（此公式会在新工作表上复制数据透视表，将空单元格替换为 0；此外，数据透视表的控制元素也会复制到新工作表中）

# iphone - 在自定义 UITableViewCell 中添加视图的最佳方式

> ID：11527617
> 
> 赞同：2
> 
> 时间：2012-07-17T17:21:27.570
> 
> 标签：iphone, objective-c, ios

我看过很多例子，我找不到最好的答案。

想象一下，我有一个高度为 120 的自定义单元格，有 3 个 UILabel 和一个 UIImageView。

我用

```
-(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier 
```

在所有方法中，哪一种是最优化的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:25:05.760

你所要做的就是这样的：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Prototype Cell"];
    UILabel *label;
    if (!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                      reuseIdentifier:@"Prototype Cell"];
        label = [[UILabel alloc] init];
        label.tag = LABEL_TAG;  //Suppose LABEL_TAG is defined someplace else
        [cell.contentView addSubview: label];
    }
    else 
    {
        label = [cell.contentView viewWithTag:LABEL_TAG];
    }

    label.text = @"Hello World";

    //Suppose you want the label at x coordinate 50
    label.frame = CGRectMake(0,0,50,120); 

    //Follow similar steps for all of your subviews

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:25:14.917

创建自定义表的最佳答案可能在下面的链接中，如果您对在那里看到的代码有具体问题，请随时提出更多问题。

[http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:39:34.537

通过继承 UITableViewCell 并覆盖方法 initWithStyle 来创建自定义 UITableviewCell。您可以在此 init 方法中分配标签并在此方法中的单元格中添加此标签。

您还可以使用 nib 文件创建 UItableViewCell。

[http://ijoshsmith.com/2011/07/16/creating-a-custom-uitableviewcell-in-ios-4/](http://ijoshsmith.com/2011/07/16/creating-a-custom-uitableviewcell-in-ios-4/)

# ant - com.android.ant.NewSetupTask 升级到 SDK v20 工具后未找到错误

> ID：11527624
> 
> 赞同：4
> 
> 时间：2012-07-17T17:21:46.493
> 
> 标签：ant, sdk

升级到 v20 SDK 工具后，我在尝试运行我的 Ant 构建时收到此错误。

sdk.dir 属性正确且经过验证（添加到 build.xml 中的输出）。解包 anttasks.jar 似乎最新工具中确实缺少 NewSetupTask。

```
META-INF/
META-INF/MANIFEST.MF
com/
com/android/
com/android/ant/
com/android/ant/RenderScriptTask.class
com/android/ant/SingleDependencyTask$1.class
com/android/ant/PropertyByReplaceTask.class
com/android/ant/BuildTypedTask.class
com/android/ant/AaptExecTask$1.class
com/android/ant/AaptExecTask$ResFolderInputPath.class
com/android/ant/AaptExecTask$NoCompress.class
com/android/ant/ApkBuilderTask.class
com/android/ant/GetLibraryPathTask.class
com/android/ant/InputPath.class
com/android/ant/RenderScriptTask$OptLevel.class
com/android/ant/TaskHelper.class
com/android/ant/XPathTask.class
com/android/ant/ManifestMergerTask.class
com/android/ant/DependencyHelper$LibraryProcessor.class
com/android/ant/CheckEnvTask.class
com/android/ant/RenderScriptTask$1.class
com/android/ant/ApkBuilderTask$SourceFolderInputPath.class
com/android/ant/DependencyHelper$JarProcessor$1.class
com/android/ant/ComputeDependencyTask.class
com/android/ant/SingleInputOutputTask.class
com/android/ant/GetLibraryPathTask$1.class
com/android/ant/RenderScriptTask$RenderScriptProcessor.class
com/android/ant/SignApkTask.class
com/android/ant/DependencyHelper$JarProcessor.class
com/android/ant/SignApkTask$NullZipFilter.class
com/android/ant/DependencyHelper$AdvancedLibraryProcessor.class
com/android/ant/DependencyGraph.class
com/android/ant/ComputeDependencyTask$1.class
com/android/ant/DexExecTask.class
com/android/ant/MultiFilesTask.class
com/android/ant/AidlExecTask$1.class
com/android/ant/DependencyHelper.class
com/android/ant/AidlExecTask.class
com/android/ant/BuildConfigTask.class
com/android/ant/ApkBuilderTask$1.class
com/android/ant/AaptExecTask.class
com/android/ant/SingleDependencyTask.class
com/android/ant/DependencyGraph$1.class
com/android/ant/ZipAlignTask.class
com/android/ant/GetTypeTask.class
com/android/ant/GetEmmaFilterTask.class
com/android/ant/IfElseTask.class
com/android/ant/DependencyGraph$DependencyStatus.class
com/android/ant/AidlExecTask$AidlProcessor.class
com/android/ant/ComputeProjectClasspathTask.class
com/android/ant/SingleDependencyTask$InputPathFactory.class
com/android/ant/GetTargetTask$1.class
com/android/ant/MultiFilesTask$DisplayType.class
com/android/ant/MultiFilesTask$SourceProcessor.class
com/android/ant/GetProjectPathsTask.class
com/android/ant/SignApkTask$1.class
com/android/ant/GetTargetTask.class
com/android/ant/ComputeDependencyTask$2.class
com/android/ant/GetLibraryPathTask$LeafProcessor.class
anttasks.properties 
```

它去哪儿了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T21:55:27.520

The problem stems from the fact that I am using a fully customized build.xml file. As such, it contains the following custom ant task definitions:

```
<taskdef name="setup"
    classname="com.android.ant.NewSetupTask"
    classpathref="android.antlibs" />

<taskdef name="aapt"
    classname="com.android.ant.AaptExecTask"
    classpathref="android.antlibs" />

<taskdef name="aidl"
    classname="com.android.ant.AidlExecTask"
    classpathref="android.antlibs" />

<taskdef name="renderscript"
    classname="com.android.ant.RenderScriptTask"
    classpathref="android.antlibs" />

<taskdef name="dex"
    classname="com.android.ant.DexExecTask"
    classpathref="android.antlibs" />

<taskdef name="apkbuilder"
    classname="com.android.ant.ApkBuilderTask"
    classpathref="android.antlibs" />

<taskdef name="zipalign"
    classname="com.android.ant.ZipAlignTask"
    classpathref="android.antlibs" />

<taskdef name="xpath"
    classname="com.android.ant.XPathTask"
    classpathref="android.antlibs" />

<taskdef name="if"
    classname="com.android.ant.IfElseTask"
    classpathref="android.antlibs" /> 
```

One or more of these are no longer provided by the `anttasks.jar` library. In comparing my build.xml file with the one located `{sdk.dir}/tools/ant/build.xml` I notice that these definitions have been replaced with the following:

```
<taskdef resource="anttasks.properties" classpathref="android.antlibs" /> 
```

Replacing the old task defs. in my build.xml file with this new task def statement removes the reference to missing tasks and fixes my problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T01:44:40.677

检查您的 anttask.jar 下`android-sdks\tools\lib`。

在你的`build.xm`l 上，它可能是`anttask.jar`新的 sdk，它的名字是`ant-task.jar`. 因此，更改 xml 或文件系统上的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T06:48:05.803

使用 [ANDROID_HOME]\android-sdk\tools\ant 下更新的 build.xml，无需添加自定义 ant 任务定义

# android - 如何为 Android 应用程序设置语言首选项？

> ID：11527625
> 
> 赞同：0
> 
> 时间：2012-07-17T17:21:47.467
> 
> 标签：android, localization, preferences

我正在开发一个 Android 应用程序，该应用程序可以被任何语言使用，但我想为应用程序中显示为标签的文本语言或按钮中的文本设置首选项。

所以我想知道如何做到这一点是在菜单中包含一个“设置”，用户可以在其中设置默认语言，例如现在是英语或阿拉伯语，然后整个应用程序将只显示文本、标签和按钮已指定的语言。因此，当用户第一次下载应用程序时，它会提示选择一种语言，然后每次应用程序启动时，它将使用最初指定的语言，或者可以从菜单中的设置中更改它。

我知道如何在菜单中为活动添加一个项目，但我不知道如何将设置保存为首选项并更改应用程序中的所有文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:32:39.863

您应该做的只是让手机决定本地化，然后在您的项目中拥有适当的本地化文件。[有关本地化](http://developer.android.com/guide/topics/resources/localization.html)的 Android 文档 应该会有所帮助。基本上你要做的是创建几个文件夹。

您的默认文件夹 strings.xml 将是`res/values/strings.xml`，然后说...法语您将要创建`res/values-fr/strings.xml`。然后，如果手机设置为法语，它将从 values-fr 文件夹中加载字符串，如果找不到，它将在`res/values/`文件夹中的 strings.xml 中查找。

# java - 将android项目导出到jar（包括其他jar）

> ID：11527627
> 
> 赞同：0
> 
> 时间：2012-07-17T17:21:54.047
> 
> 标签：java, android, jar

我编写了一个 Android 游戏引擎库，并希望将其导出为 jar 文件。我试图用以下方法做到这一点：

> 导出 > Jar 文件 > 完成

一旦我将 jar 添加到另一个 Android 项目的构建路径中，我的代码中就会出现一个小框：

> 类型 foo 无法解析。它是从所需的 .class 文件中间接引用的

我相信这是因为我的游戏引擎库包含 jar 形式的其他库。

如何将这些 jar 文件添加到我的 Game Engine jar 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:38:22.320

[您可以使用JDui](http://java.decompiler.free.fr/?q=jdgui)反编译另一个 jar 文件，获取您需要的内容，然后将其添加到您的库中。这完全取决于你需要多大的东西。

另外，检查您是否在导出中使用了[proguard 。](http://developer.android.com/tools/help/proguard.html)您必须小心如何配置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:19:54.013

我假设您使用的是 Eclipse。您还需要使用 Properties->Java Build Path->Libraries->Add Jar 按钮将您的 jar 文件添加到目标项目

# css - 在广阔的内容空间中漂浮在几个块上

> ID：11527628
> 
> 赞同：-1
> 
> 时间：2012-07-17T17:21:55.840
> 
> 标签：css, css-float

对于我当前的项目，我必须向左浮动几个街区。我的内容块是 720px 宽，而块是 350px 宽。但不知何故，他们没有相互浮动。其中一些有，一些没有。在每个块中，我添加了规则 float:left。我会用手漂浮它们，但我不知道积木的顺序，所以无法预测它的外观；这是它现在看起来如何的屏幕截图：http: [//d.pr/i/OKpc](http://d.pr/i/OKpc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:38:15.453

如果我正确理解您的问题，这里有几个不同的解决方案。首先，您可以使用一些现代选择器添加`clear: left`到每个偶数块：

```
.block-views:nth-child(2n+1) { clear: left; } 
```

这在 Internet Explorer 8 或更低版本中不起作用。

下一个解决方案涉及`clear: both`在每隔一个块之后添加一个额外的 div：

HTML：

```
<div class="block block-views">...</div>
<div class="block block-views">...</div>
<div class="clear"></div>
<div class="block block-views">...</div>
<div class="block block-views">...</div>
<div class="clear"></div>
<div class="block block-views">...</div>
<div class="block block-views">...</div> 
```

CSS：

```
.clear { clear: both; } 
```

# oracle - 以不规则的时间间隔自动刷新物化视图

> ID：11527629
> 
> 赞同：1
> 
> 时间：2012-07-17T17:21:57.557
> 
> 标签：oracle, materialized-views

我需要以不规则的时间间隔自动刷新物化视图，例如 0800 小时、1200 小时、1800 小时和 2200 小时。我只能定期安排刷新，如下所示

...

```
REFRESH FORCE ON DEMAND START WITH sysdate+0 NEXT sysdate+(6/24)
AS Select * from Employee; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:37:52.803

你可以`CASE`在你的`NEXT`. 所以你可以做类似的事情

```
NEXT (CASE WHEN to_number( to_char( sysdate, 'HH24' )) >= 22 
           THEN trunc(sysdate+1) + interval '8' hour
           ...
           ELSE null
       END) 
```

为了一般的理智，我通常会创建一个新函数（即`get_next_refresh_time`）来实现此`CASE`语句，并仅在您的物化视图中引用该函数。

```
CREATE OR REPLACE FUNCTION get_next_refresh_time 
  RETURN DATE
IS
  l_dt DATE;
BEGIN
  SELECT CASE WHEN to_number( to_char( sysdate, 'HH24' )) >= 22 
              THEN trunc(sysdate+1) + interval '8' hour
              WHEN to_number( to_char( sysdate, 'HH24' )) <  8
              THEN trunc(sysdate) + interval '8' hour
              WHEN to_number( to_char( sysdate, 'HH24' )) between 8 and 11
              THEN trunc(sysdate) + interval '12' hour
              WHEN to_number( to_char( sysdate, 'HH24' )) between 12 and 17
              THEN trunc(sysdate) + interval '18' hour
              WHEN to_number( to_char( sysdate, 'HH24' )) between 18 and 21
              THEN trunc(sysdate) + interval '22' hour
              ELSE null
          END
    INTO l_dt
    FROM dual;
  RETURN l_dt;
END;

NEXT get_next_refresh_time; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T18:13:39.543

我喜欢使用 DBMS_SCHEDULER 并设置一个作业来调用 DBMS_MVIEW.REFRESH（参见[http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#ARPLS027](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm#ARPLS027)）。这也为您的刷新提供了更多选项。

# iphone - 解析 JSON：响应中的括号

> ID：11527631
> 
> 赞同：1
> 
> 时间：2012-07-17T17:22:14.517
> 
> 标签：iphone, json, sbjson, json-framework

我想解析这个 JSON [YouTube 最近的特色](http://gdata.youtube.com/feeds/api/standardfeeds/recently_featured?v=2&alt=json)。这就是我获得视频标题的方式：

```
NSString *response = [request responseString];
    responseDict = [response JSONValue];

videoTitleArray = [responseDict valueForKeyPath:@"feed.entry.title.$t"]; 
```

它就像我想要的那样工作。但我也想显示视频的作者。但是下面的代码不能正常工作：

```
videoAuthorArray = [responseDict valueForKeyPath:@"feed.entry.author.name.$t"];
    NSLog(@"%@", videoAuthorArray); 
```

我得到的作者列表如下所示：

```
(
    author 1
),
    (
    author 2
),
    (
    author 3
),
    (
    author 4
), 
```

由于括号，我无法在例如表格视图中显示名称。如何像视频标题一样显示作者姓名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:46:41.283

当您看到作者时，您会看到：

```
"author":[{"name":{"$t":"mls"},"uri":{"$t":"http://gdata.youtube.com/feeds/api/users/mls"},"yt$userId":{"$t":"SZbXT5TLLW_i-5W8FZpFsg"}}] 
```

这意味着：作者是作者对象的数组

每个作者对象都有：`name`对象、`uri`对象和`yt$userId`对象

上述每个对象都是`NSDictionary`

形成我们有：

```
"author":[
  {
    "name": {
      "$t":"mls"
    },
    "uri": {
      "$t":"http://gdata.youtube.com/feeds/api/users/mls"
    },
    "yt$userId":{
      "$t":"SZbXT5TLLW_i-5W8FZpFsg"
    }
  }
], 
```

所以如果你有你的`videoAuthorArray`每个元素都是一个`NSDictionary`并且有这个键`name`：`uri`和`yt$userId`

each of this objects has an `NSDictionary` with a single key: `$t` witch has the value

# android - 在 Android 操作栏中设置 SearchView 的样式

> ID：11527636
> 
> 赞同：35
> 
> 时间：2012-07-17T17:22:29.877
> 
> 标签：android, search, styles, searchview

我的操作栏中有一个搜索小部件，如下所示：

![操作栏中的搜索小部件](../Images/bfd51960c6d53e22c53c3db15a094488.png)

(1) 如何更改“iPhone”文字的颜色？

(2) 此外，如果您注意到灰色 X —— 整个搜索小部件在图标位置时也是该颜色。我在 Holo.Theme.Light 上并使用我自己的模组。

如何在我的 styles.xml 文件中更改小部件的这两种样式（假设这是您对搜索小部件进行更改的地方）？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-02-04T10:15:40.477

我为此花了很多时间，但最后：:-)

1.  要更改文本颜色：

```
((EditText)searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text)).setTextColor(Color.WHITE); 
```

或者这个适用于 AndroidX：

```
((EditText)searchView.findViewById(androidx.appcompat.R.id.search_src_text)).setTextColor(Color.WHITE); 
```

2.  要更改文本提示：

```
((EditText)searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text)).setHintTextColor(Color.WHITE); 
```

或者这个适用于 AndroidX：

```
((EditText)searchView.findViewById(androidx.appcompat.R.id.search_src_text)).setHintTextColor(Color.WHITE); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-22T18:36:13.047

如果您使用的是 appcompat 库，那么该解决方案与 Jerome 的回答有些不同。这是我的解决方案

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.main_menu, menu);
    restoreActionBar();

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    MenuItem searchMenuItem = menu.findItem(R.id.action_search);
    SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchMenuItem);
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));

    SearchView.SearchAutoComplete searchAutoComplete = (SearchView.SearchAutoComplete)searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
    searchAutoComplete.setHintTextColor(Color.WHITE);
    searchAutoComplete.setTextColor(Color.WHITE);

    View searchplate = (View)searchView.findViewById(android.support.v7.appcompat.R.id.search_plate);
    searchplate.setBackgroundResource(R.drawable.texfield_searchview_holo_light);

    ImageView searchCloseIcon = (ImageView)searchView.findViewById(android.support.v7.appcompat.R.id.search_close_btn);
    searchCloseIcon.setImageResource(R.drawable.clear_search);

    ImageView voiceIcon = (ImageView)searchView.findViewById(android.support.v7.appcompat.R.id.search_voice_btn);
    voiceIcon.setImageResource(R.drawable.abc_ic_voice_search);

    ImageView searchIcon = (ImageView)searchView.findViewById(android.support.v7.appcompat.R.id.search_mag_icon);
    searchIcon.setImageResource(R.drawable.abc_ic_search);

    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-06-24T21:27:36.710

您可以更改搜索视图的样式。这是我用来调整编辑文本、语音图标的一些代码......

```
SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);

        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));

        int searchPlateId = searchView.getContext().getResources().getIdentifier("android:id/search_plate", null, null);
        searchView.findViewById(searchPlateId).setBackgroundResource(R.drawable.textfield_search_selected);

        int voiceSearchPlateId = searchView.getContext().getResources().getIdentifier("android:id/submit_area", null, null);
        searchView.findViewById(voiceSearchPlateId).setBackgroundResource(R.drawable.textfield_search_right_selected);

        // change hint color
        int searchTextViewId = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
        TextView searchTextView = (TextView) searchView.findViewById(searchTextViewId);
        searchTextView.setHintTextColor(getResources().getColor(R.color.light_grey)); 
```

[编辑] 此处提供了更完整的答案：[更改 searchview 小部件的背景可绘制对象](https://stackoverflow.com/questions/11085308/changing-the-background-drawable-of-the-searchview-widget/11669808#11669808)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-12-17T18:54:04.793

你必须设置

```
searchView.setBackgroundColor(Color.WHITE); 
```

SearchViews 不是那么可定制的。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-09-15T07:13:55.417

[从 Lollipop 开始，您可以从博客文章http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html](http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html)中设置这样的搜索视图样式

```
values/themes.xml:
<style name=”Theme.MyTheme” parent=”Theme.AppCompat”&gt;
    <item name=”searchViewStyle”&gt;@style/MySearchViewStyle</item>
</style>
<style name=”MySearchViewStyle” parent=”Widget.AppCompat.SearchView”&gt;
    <!-- Background for the search query section (e.g. EditText) -->
    <item name="queryBackground">...</item>
    <!-- Background for the actions section (e.g. voice, submit) -->
    <item name="submitBackground">...</item>
    <!-- Close button icon -->
    <item name="closeIcon">...</item>
    <!-- Search button icon -->
    <item name="searchIcon">...</item>
    <!-- Go/commit button icon -->
    <item name="goIcon">...</item>
    <!-- Voice search button icon -->
    <item name="voiceIcon">...</item>
    <!-- Commit icon shown in the query suggestion row -->
    <item name="commitIcon">...</item>
    <!-- Layout for query suggestion rows -->
    <item name="suggestionRowLayout">...</item>
</style> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-30T20:43:38.347

```
SearchView searchView = (SearchView) MenuItemCompat.getActionView(menu.findItem(R.id.search));
searchView.setSubmitButtonEnabled(true); // to enable submit button

ImageView b = (ImageView) searchView.findViewById(android.support.v7.appcompat.R.id.search_go_btn);
b.setImageResource(android.R.drawable.ic_menu_search); //to change submit button icon

TextView a=(TextView) searchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);
a.setTextColor(...); //to change color of search text 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-26T16:02:45.167

我解决这个问题的方法是使用 Holo.Light.DarkActionBar 主题。我不相信您可以轻松更改搜索小部件。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-10-31T19:35:44.160

在`onCreateOptionsMenu :`

```
int id = searchView.getContext()
                   .getResources()
                   .getIdentifier("android:id/search_src_text", null, null);
    TextView textView = (TextView) searchView.findViewById(id);
    textView.setTextColor(Color.WHITE); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-14T11:32:28.467

如果您想要白色文本，您应该从具有黑色背景的操作栏主题扩展，`Holo.Theme`或者`Theme.AppCompat.Light.DarkActionBar`如果您正在使用支持库。
无需其他设置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-30T14:44:10.983

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {

        super.onCreateOptionsMenu(menu);

        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);

        // Associate search configuration with the SearchView
        SearchManager searchManager =
               (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView =
                (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setQueryHint("Client/DOB/PPSN");
        searchView.setSearchableInfo(
                searchManager.getSearchableInfo(getComponentName()));

        // Setting the textview default behaviour properties
        int id = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
        TextView textView = (TextView) searchView.findViewById(id);
        textView.setTextColor(Color.WHITE);
        textView.setHintTextColor(Color.WHITE);

        // Set the search plate color to white
        int linlayId = getResources().getIdentifier("android:id/search_plate", null, null);
        View view = searchView.findViewById(linlayId);
        Drawable drawColor = getResources().getDrawable(R.drawable.searchcolor);
        view.setBackground( drawColor );
        return super.onCreateOptionsMenu(menu);

    } 
```

***现在这是用于更改搜索栏板颜色的 xml 文件 searchcolor.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
  <item>
      <shape >
          <solid android:color="#ffffff" />
      </shape>
  </item>

  <!-- main color -->
  <item android:bottom="1.5dp"
      android:left="1.5dp"
      android:right="1.5dp">
      <shape >
          <solid android:color="#2c4d8e" />
      </shape>
  </item>

  <!-- draw another block to cut-off the left and right bars -->
  <item android:bottom="10.0dp">
      <shape >
          <solid android:color="#2c4d8e" />
      </shape>
  </item>
</layer-list> 
```

**和 menu/menu.xml 用于在操作栏中创建搜索**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/search"
          android:icon="@drawable/search"
          android:showAsAction="ifRoom"
          android:actionViewClass="android.widget.SearchView" />

</menu> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-09T14:23:15.917

在您的 xxxActivity.java 文件中获取 SearchView，然后：

```
SearchView searchView = (SearchView)menu.findItem(R.id.my_search_view).getActionView();
int searchPlateId = searchView.getContext().getResources().getIdentifier("android:id/search_plate", null, null);

// Getting the 'search_plate' LinearLayout.
View searchPlate = searchView.findViewById(searchPlateId);
searchPlate.setBackgroundResource(R.drawable.textfield_searchview); 
```

创建文件`res/drawable/texfield_searchview.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true"
        android:drawable="@drawable/textfield_search_selected_holo_light" />
    <item android:drawable="@drawable/textfield_search_default_holo_light" />
</selector> 
```

# c++ - 我可以在没有 Objective C（仅 C 或 C++）的情况下使用 CoreMIDI 吗？

> ID：11527637
> 
> 赞同：2
> 
> 时间：2012-07-17T17:22:31.547
> 
> 标签：c++, c, cocoa, coremidi

我正在寻找是否可以在*不*使用 Objective-C 的情况下使用 Coremidi 制作简单的 midi 输出层的时间。该应用程序是 C++ 中的 QT 桌面应用程序，我希望将特定于操作系统的内容保持在最低限度，并仅本地化为一些输出模块。时间和延迟至关重要，所以我希望 midi 输出层尽可能靠近金属。使用 PortMidi 时，我的同步延迟很差，尽管我会发现它是否直接使用 CoreMIDI 有所改善。如果有人可以告诉我这是否可能，如果可以的话，请给我举个例子，那将是很有趣的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:49:51.333

[CoreMIDI 的 API 是普通的旧 C](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/CACoreMIDIRef/index.html#//apple_ref/doc/uid/TP40002091)。你不需要 Objective-C 或 C++。

（当然，如果您愿意，它可以直接从 Objective-C 或 C++ 代码中使用。）

# asp.net - ASP MVC 中更深入的 Facebook 集成

> ID：11527638
> 
> 赞同：1
> 
> 时间：2012-07-17T17:22:42.250
> 
> 标签：asp.net, asp.net-mvc, facebook, facebook-graph-api

我是 Facebook 主页的管理员。现在它想将它包含在我的 MVC 项目中。我想知道是否有可能：

1) 从 fb 获取其数据（例如个人资料图片、关于、活动、参加者等）并在我的 ASP MVC 视图中显示。

2）涉及到MVC项目中fb（到页面）提供的所有功能。例如创建活动、添加照片和视频。

3) 有没有办法通过 fb 身份验证来授权表单。

如果这是可以实现的，我应该如何进行？有什么先决条件？

任何博客/链接/教程/学习材料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:28:57.553

Facebook 有一个干净的 API，您可以使用它来将其集成到您的应用程序中。它被称为 Graph API，他们的网站上有文档：

[http://developers.facebook.com/docs/coreconcepts/](http://developers.facebook.com/docs/coreconcepts/)

Graph API 旨在执行各种操作，如果要完成某些操作，可以通过 Graph API 完成。

至于身份验证，是的，很简单，Facebook 实现了 OAuth2 协议。只需在“C# OAuth2 Facebook”或类似内容上搜索，您将获得完整教程的链接。

Facebook 团队的文档在这里：

[http://developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

# core-plot - 核心图：散点图的随机颜色

> ID：11527647
> 
> 赞同：0
> 
> 时间：2012-07-17T17:23:24.857
> 
> 标签：core-plot

我正在设计一个图表，上面有多个散点图。每组数据的散点图数量都会发生变化。我正在尝试按颜色区分散点图，但是遇到了一些麻烦。

目前，我有一个 for 循环，它为数组中的每个对象创建一个散点图。在 for 循环中，我根据随机数设置颜色：

lineStyle.lineColor = [CPTColor colorWithComponentRed:((arc4random()%255)/255.0) 绿色:((arc4random()%255)/255.0) 蓝色:((arc4random()%255)/255.0) alpha:1.0];

这有时会起作用，但有时颜色可能很难与其他颜色区分开来，或者可能是全白的。有没有更好的方法来生成随机颜色（可能类似于饼图生成颜色的方式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:10:38.513

我认为这个问题中没有任何具体的核心情节，这实际上只是以编程方式生成配色方案的问题。

作为一个关于如何比纯随机数更好地做到这一点的想法，这里有一些几乎是伪代码来说明我将如何做到这一点：

```
float red = 0;
float blue = 0;
float green = 0;
while(need more colors){
    float colorToInc = (arc4Random()%100)/100;
    float incValue = (arc4Random()%100)/500;//value between 0 and .2
    if(colorToInc < .3){
        red += incValue;
        if(red > 1)
            red -= 1;
    }else if(colorToInc < .7){
        green += incValue;
        if(green > 1)
            green -= 1;
    }else{
        blue += incValue;
        if(blue > 1)
            blue -= 1;
    }
    newcolor = [color with red:red blue:blue green:green];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T16:32:39.180

以下对我有用：

```
red = (arc4random()%100)/100.0;
green = (arc4random()%100)/100.0;
blue = (arc4random()%100)/100.0;
[UIColor colorWithRed:red green:green blue:blue alpha:1]; 
```

# c - LED 段的递减值

> ID：11527648
> 
> 赞同：0
> 
> 时间：2012-07-17T17:23:25.793
> 
> 标签：c, segment, led

我正在为 LED 段上的数字编写代码，每五秒减少 1

我现在的实际代码是这个

```
FiveSecDelay+=1;
if (FiveSecDelay ==100)
{
    count2--; //decrement count2

    for (uint32_t x = 0; x < 4; x++) //split count to to individual digits
    {
        new_value[x] = count2 % 10;
        count2 = count2 / 10;
    }

    for (uint32_t i = 0; i < 4; i++)
    {
        Segment_Write(Digit[i],new_value[i]); assign  value to segments
    }
    FiveSecDelay =0;
} 
```

我正在使用调度程序每毫秒调用一次函数，理论上这应该可以工作，因为我使用相同的技术为段分配值，发生的情况是我的起始值为 8，它应该得到 7 ,6,5,4 依此类推直到 0，但由于某种原因，它从 8 变为 42 并停留在那里

我曾试图修复它，但没有完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:27:56.027

You alter the value of count2 in this line:

 `````
count2 = count2 / 10; 
```` 

`And I get the impression from what you've described that count2 is what is supposed to be going from 8 to 7 to ... to 0.`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:44:46.373

我会像这样重写主循环：

```
for(uint32_t div10=1,i=0;i<4;i++,div10*=10)
   Segment_Write(Digit[i],(count2%(10*div10))/div10); 
```

除循环计数器 (div10) 外，只有一个循环和一个辅助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:28:42.250

您不仅`count2`每 5 秒递减一次，而且还重复将其除以 10。您需要一个临时变量：

```
int temp_count = count2;   // Or whatever type count2 is
for (unit32_t x = 0; x < 4; x++)
{
    new_value[x] = temp_count % 10;
    temp_count /= 10;
} 
`````

# android - 当我们使用 Fragments 的时候使用 Fragment Activity？

> ID：11527650
> 
> 赞同：1
> 
> 时间：2012-07-17T17:23:48.180
> 
> 标签：android, android-fragmentactivity

我们在使用fragment的时候需要用FragmentActivity扩展activity类吗？或者我们可以简单地用 Activity 来扩展它？我正在网上寻找答案，但找不到答案，请帮助我......

提前致谢，

拉克什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:08:42.983

您只需扩展`FragmentActivity`which 本身继承`Activity`. 每个片段只需要扩展`Fragment`

# networking - TURN 服务器在防火墙后面 - 如何处理 XOR-RELAYED-ADDRESS

> ID：11527654
> 
> 赞同：2
> 
> 时间：2012-07-17T17:23:54.107
> 
> 标签：networking, nat-traversal, stun

我在防火墙后面的服务器上运行 TURN 服务器 (http://tools.ietf.org/html/rfc5766)。机器有一个公共 IP 地址，传入和传出的网络数据包从服务器的专用 IP 地址发送到/从该地址发送。基本上，服务器不能将套接字绑定到公共 IP 地址，只能绑定私有 IP 地址。运行`ifconfig`显示具有私有 IP 地址的网络设备。

当我运行 TURN 服务器时，我必须绑定到私有 IP 地址（因为服务器认为它没有连接到公共 Internet）。对分配创建的所有响应都会发回带有私有 IP 地址的 XOR-RELAYED-ADDRESS。客户端收到 XOR-RELAYED-ADDRESS 并将数据发送到服务器的私有 IP 地址，这显然失败了。

我正在考虑两种选择来克服这个问题：

*   让我的客户端代码忽略 XOR-RELAYED-ADDRESS 的 IP 地址，只使用 XOR-RELAYED-ADDRESS 的端口。客户端会将所有中继消息发送到 TURN 服务器的公共 IP（因为客户端已经事先知道该值）和 XOR-RELAYED-ADDRESS 端口。
*   更改我的服务器以了解其公共 IP（即使它无法将套接字绑定到它），并始终在 XOR-RELAYED-ADDRESS 响应中发回公共 IP。

我觉得第一种方法破坏了 TURN RFC ......即使我无法想象 TURN 服务器会将 XOR-RELAYED-ADDRESS 的 IP 作为 TURN 服务器的公共 IP 以外的东西发回的情况，RFC 说XOR-RELAYED-ADDRESS 是客户端应该发送数据的地方。

我觉得第二种方法对 RFC 的破坏*更少*……如果这有意义的话。此外，这种方法不会强制客户端做任何特殊的事情，而第一种方法需要所有客户端都遵守上述规定。

你怎么看待这件事？有没有人经历过这种情况，和/或对哪种方法对 RFC 的*破坏*更少，或者任何一种方法是否违反了 RFC 有任何意见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T07:30:15.630

我在 Amazon EC2 上运行[我的 STUN 服务器代码](http://www.stunprotocol.org)时遇到了几乎完全相同的问题。stun 服务器返回给客户端的源地址和备用地址是经过 NAT 处理的 IP 地址。

我考虑过的一些解决方案：

1.  假设客户端已预先配置为知道备用 IP 地址，如果他们真的想要进行额外的 NAT 类型检测测试。对于 STUN，这不是一个糟糕的假设。毕竟，他们应该知道 stun 服务的主 IP 地址。

2.  修改服务器代码以从命令行或配置文件传递它的映射 IP 地址。这相当于你上面描述的第二种方法。我可以让服务器在启动时通过 Web 请求（或测试另一个 stun 服务器）自行发现它自己的外部 IP 地址以使其自动执行。

您的第一个建议 - 客户端知道 IP 映射 - 假设您没有尝试与除您自己的其他客户端进行互操作，那么这非常好。但是，如果您认为您需要使用其他人的客户端堆栈，那么这个选项就变得不那么可取了。您可以采用混合方法 - 为 TURN Allocate 响应发明一个新的自定义属性，您的客户端理解为“忽略中继 IP，只假设端口是正确的”。这没关系，但不是很好。

你的第二个建议更符合我上面的#2。还有一件事要考虑。如果您的客户端也位于与您的 TURN 服务器相同的防火墙后面，会发生什么情况？你要内部地址还是外部地址？再说一次，如果你的两个客户端都在同一个防火墙后面，他们可能不需要 TURN 来通信。另一个问题只是将正确的 IP 地址传递给服务器的管理开销。

我喜欢你的第二个建议。

You could consider posting a question to the [BEHAVE IETF email discussion group](http://datatracker.ietf.org/wg/behave/charter/). They are the open committee that drafted the STUN and TURN specs. I think they should be aware that servers in the cloud running behind NATs are becoming increasingly common. They may have some advice. I would be keenly interested in joint authoring this email with you. Or at least reading their response.

# ruby-on-rails - 如何处理 Ajax 发布请求

> ID：11527655
> 
> 赞同：2
> 
> 时间：2012-07-17T17:23:54.110
> 
> 标签：ruby-on-rails, ajax, controller

这个问题乍一看似乎很简单，但是却拖慢了我的工作！请帮我弄清楚我在哪里犯了错误。

我想使用 Ruby-on-Rails 构建一个服务器，该服务器将具有一个主要功能：使用来自客户端 JS 的一些数据来提供发布请求。然后使用jquery的ajax方法发送异步请求：

```
 function processPeople() {
        SOME.api(".get", {owner_id:frnds.response[i].uid,count:"3"}, function(posts) {
                                var usefulPosts = posts.response;
                                for (var i = 1; i <= 2; i++) {

            $.ajax({
                type: 'POST',
                url: 'wallposts',
                data: {uid: usefulPosts[i]["from_id"], uniqpost_id: usefulPosts[i]["id"], tent:usefulPosts[i]["text"]}
            });

    };
    });
    i++;
    if (i<2) {
        setTimeout(processPeople, 1000);
    }
} 
```

在这里我的控制器发送发布请求：

```
def create
    # debugger

    if !(Wallpost.from_user(params[:uid]).find_by_uniqpost_id(params[:uniqpost_id]))
    @newWP = Wallpost.new(:uid => params[:uid], :content => params[:content], 
            :uniqpost_id => params[:uniqpost_id])
    @newWP.save 

end 
```

如果我只想在服务器端保存数据而不是更多，我会在服务器端做什么？每次我尝试将信息发布到我的服务器时，它都会以 500 错误回答我：

```
ActionView::MissingTemplate (Missing template wallposts/create, application/create with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/home/yurgen/rails_project/vkraigslist/app/views" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:27:29.377

您需要指定控制器的返回。HTTP 协议要求这样做。

如果您不想返回任何代码，只需输入一个

```
head :ok 
```

在你的控制器的末尾。

# ruby - 如何在续集中获得翻译后的错误消息？

> ID：11527661
> 
> 赞同：0
> 
> 时间：2012-07-17T17:24:24.263
> 
> 标签：ruby, sequel

我正在使用续集。如何获得 ActiveModel 风格的翻译错误？

## 例子

```
class User < Sequel::Model
  def validate
    super
    errors.add(:email, :invalid)
  end
end

@user = User.new
@user.save # => false
@user.errors.full_messages # => ["email invalid"] 
```

我希望它使用数据返回翻译后的错误`config/locales`。什么`I18n.locale = :en`时候应该返回`["Email is invalid"]`，什么`I18n.locale = :de`时候应该返回`["Derrrrr E-Reichspost ist ungültig"]`（等等）。**如何在续集中获得翻译后的错误消息？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:16:08.010

您需要修改validation_helpers 插件DEFAULT_OPTIONS。这是一个例子： http: [//pastie.org/4251873](http://pastie.org/4251873)

# java - 需要关于使用 Maven 创建 jar 的提示

> ID：11527669
> 
> 赞同：0
> 
> 时间：2012-07-17T17:24:52.827
> 
> 标签：java, spring, maven

spring-js.jar中有一堆用dojo 1.5压缩的spring js文件和css文件

现在我需要保留 spring js 和 css 文件但升级到 dojo 1.6。

所以这里有两个选择：

1.  创建单独的 jars，一个包含 spring js 和 css 文件，另一个包含 dojo 1.6，具有相同的结构。或者
2.  把所有东西都放在一个罐子里

我是 maven 的新手，所以任何关于 maven 构建 jar 文件的提示都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:27:10.957

只需在 pom.xml 中声明 1.6 版本即可。它应该使用它而不是来自 spring-js.jar 的 1.5。

# json - 来自 ektorp / couchdb 的 JSON 响应

> ID：11527674
> 
> 赞同：2
> 
> 时间：2012-07-17T17:25:09.307
> 
> 标签：json, couchdb, ektorp

对于 ektorp / couchdb 的客户端请求，我想将 JSON 传递回客户端。（为什么不直接使用 couchdb？因为我必须对中间的 Java 层上的数据做一些 tweeks。）

那么有没有一种方法可以从 CouchDbRepositorySupport queryView 获取 JSON 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:40:02.730

据我所知，通过查阅[文档](http://ektorp.org/reference_documentation.html#d100e941)，以下应该做到

```
ViewResult result = db.queryView(query);
    for (ViewResult.Row row : result) {
       JsonNode docNode = row.getDocAsNode();

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:56:55.617

这是另一种方式：

```
InputStream is = db.queryForStream(query);
ObjectMapper mapper = new ObjectMapper();
JsonNode json = mapper.readTree(is); 
```

（JsonNode 和 ObjectMapper 来自`org.codehaus.jackson`库。）

# ubuntu - 在 Ubuntu 12.04 上安装 Gradle

> ID：11527676
> 
> 赞同：7
> 
> 时间：2012-07-17T17:25:13.890
> 
> 标签：ubuntu, installation, classpath, gradle, ubuntu-12.04

我正在尝试在 Ubuntu 12.04 上安装 Gradle。起初我使用存储库中的包，但在遇到[这个](https://issues.apache.org/jira/browse/S4-18) [错误](https://stackoverflow.com/questions/10066309/gradle-test-fails-with-nullpointerexception)后，我最好使用更新的版本。

我已经删除了内置包并通过将官方 1.0 包复制到`/usr/local/share/`目录并添加软链接来安装 gradle`/usr/local/bin/gradle/`到`/usr/local/share/gradle-1.0/bin/gradle`.

它似乎有效，但我遇到了类路径问题。也就是说，一旦我尝试构建一个项目，我就会得到

```
Exception executing org.gradle.api.internal.tasks.compile.ApiGroovyCompiler@1ab95774 in compiler daemon: java.lang.NoClassDefFoundError: org/apache/commons/cli/ParseException.

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileGroovy'.
> org/apache/commons/cli/ParseException 
```

现在`locate commons-cli.jar`给我

```
/usr/share/groovy/lib/commons-cli.jar
/usr/share/java/commons-cli.jar 
```

显然这两个 JAR 不在类路径中。通常我会运行一个 Java 可执行文件，其中包含`-cp`向类路径添加内容的选项。但是 gradle 可执行文件本身是一个脚本，它在调用 Java 之前自行设置类路径。

> 安装 Gradle 并使其在其类路径中找到所需的所有内容的正确方法是什么？

请注意，我是 JVM 世界的新手，所以不要以为我熟悉任何东西 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:55:36.630

事实证明足以放

```
groovy group: 'commons-cli', name: 'commons-cli', version: '1.0' 
```

在依赖项下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T12:48:57.187

如何在 Linux 中安装 Gradle

[从https://services.gradle.org/distributions/gradle-2.3-all.zip](https://services.gradle.org/distributions/gradle-2.3-all.zip)下载成绩

设置一个简单的旧学校规则：

提取到 /usr/local/

将路径添加到 /etc/bash.bashrc

GRADLE_HOME=/usr/local/gradle-2.2.1 导出 GRADLE_HOME

# c# - c#当子pictureBox改变Image时调整父控件大小

> ID：11527680
> 
> 赞同：2
> 
> 时间：2012-07-17T17:25:16.827
> 
> 标签：c#, user-controls, picturebox, autoresize

我有一个包含图片框和标签的用户控件。控件根据不同的事件（例如 onMouseEnter、OnMouseLeave）在 ​​PictureBox 中加载三个不同的图像。由于图像可以有不同的大小，我需要调整图片框和控件本身的大小。下面提供了控件的 OnPaint 事件，但这不起作用。

```
 protected override void OnPaint(PaintEventArgs pe)
    {

        if (pictureBox.Image != null)
        {
            this.Width = this.pictureBox.Image.Size.Width;
            this.Height = this.pictureBox.Image.Size.Height;
            CutRoundedRectangle2(pictureBox, cornerRadius);
        }
        else
        {
            Bitmap DrawArea = new Bitmap(pictureBox.Size.Width, pictureBox.Size.Height);
            Graphics g = Graphics.FromImage(DrawArea);
            Pen mypen = new Pen(Color.Black);
            pictureBox.Image = DrawArea;
            System.Drawing.Pen pen = new Pen(new SolidBrush(this.ForeColor));
            g.DrawRectangle(pen, 0, 0, this.Width-1, this.Height-1);
            g.Dispose();
        }
        this.labelText.ocation = new Point((this.pictureBox.Width - this.labelText.Width) / 2,
                                            (this.pictureBox.Height - this.labelText.Height) / 2);
        base.OnPaint(pe);
    } 
```

pictureBox SizeMode 在控件的构造函数中设置：

```
this.pictureBox.SizeMode = PictureBoxSizeMode.AutoSize; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:33:20.700

上次我使用 WinForms 是很久以前的事了，但是……
我的第一个想法是：您是否尝试过将父控件`AutoSize`属性的值设置为 'true' 并在新图像加载到图片框时`AutoSizeMode`调用`GrowAndShrink`父控件的方法`Refresh()`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:22:29.547

@Alexey，pictureBox 调整大小事件有帮助！

```
 private void pictureBox_Resize(object sender, EventArgs e)
    {
        this.Width = this.pictureBox.Image.Size.Width;
        this.Height = this.pictureBox.Image.Size.Height;
    } 
```

# javascript - 相对定位下拉菜单

> ID：11527690
> 
> 赞同：1
> 
> 时间：2012-07-17T17:25:49.710
> 
> 标签：javascript, html, css

我正在为一家公司建立一个网站，并且很难定位。我希望下拉菜单根据它们在屏幕上的位置向左或向右定位。这是当前发生的情况的屏幕截图：[link](http://i.stack.imgur.com/YZfWo.png)

此外，如果您想查看实时站点，[这里](http://www.sagetechs.com/beta)是演示的链接。

任何帮助，将不胜感激。

谢谢！

编辑：不要抛出另一个令人困惑的元素，但这个特定的站点是响应式的。当我进入 Ipad 大小的屏幕时，问题变得更糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:32:32.807

你的容器是`960px`. 下拉菜单有一个`auto`宽度，因此您需要估计每个菜单的宽度（比如说`200px`）。

现在，您可以使用`document.body.offsetWidth`来确定浏览器窗口的宽度。这就是我的建议：

```
function on_hover() {
    ...
    dropdown_width = 200;
    container_width = 960;
    if (document.body.offsetWidth < container_width + dropdown_width) {
        dropdown_from_left();
    } else {
        dropdown_from_right();
    }
    ...
} 
```

希望这足以让您开始。享受和好运！

# javascript - Rails 和 ajax 文件上传 - 无法读取 null 错误的属性“innerHTML”

> ID：11527693
> 
> 赞同：21
> 
> 时间：2012-07-17T17:25:56.383
> 
> 标签：javascript, ruby-on-rails, image-uploading

我正在开发一个带有动态-ajax-图像上传到画廊的模块的Rails 应用程序。我正在根据[这个应用程序 - multi-file-upload-demo](https://github.com/rounders/multi-file-upload-demo/)进行操作。我对 Javascript 和其他东西不是很热衷，所以我从那个实现中复制了很多逻辑。

我按照rounders demo中的所有逻辑构建了我的应用程序，我包含了所有gem和javascript库，但出现错误：

```
Uncaught TypeError: Cannot read property 'innerHTML' of null 
```

在 chrome 控制台中，它指的是 tmpl.js 文件

```
tmpl.load = function (id) {
    return document.getElementById(id).innerHTML;
}; 
```

我对 JS 的了解并没有让我清楚哪段代码触发了该功能，因此我可以走得更远。

您能否告诉我调查此问题根源的下一步是什么？我预计潜在的原因可能是多种多样的，所以我不想粘贴应用程序中的所有代码。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-11T23:40:50.560

这很旧，但我找到了一个实际的解决方案。将您的要求更改`application.js`为`//=require jquery-fileupload/basic`而不是`//= require jquery-fileupload`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-15T03:58:42.923

您收到此错误的原因是您缺少脚本标记 id="template-upload" 或 id="template-download" 或两者。

来自 Demo 的示例：http: [//blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

```
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
                <button class="btn btn-primary">
                    <i class="icon-upload icon-white"></i>
                    <span>Start</span>
                </button>
            {% } %}</td>
        {% } else { %}
            <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
            <button class="btn btn-warning">
                <i class="icon-ban-circle icon-white"></i>
                <span>Cancel</span>
            </button>
        {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                <i class="icon-trash icon-white"></i>
                <span>Delete</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script> 
```

UI 版本取决于存在的这两个模板。

我遇到了同样的问题，并决定检查缺少的内容。

希望有帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-14T02:48:18.400

我也遇到了同样的问题。但是，加载文件上传插件的基本版本对我来说不是一个选项，因为我对一个上传使用预览，而不是另一个。您可以通过将文件上传插件的 和`template-upload`选项设置为.`template-download``uploadTemplateId``downloadTemplateId``null`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T19:23:28.493

错误消息告诉我们`document.getElementById(id)`正在返回`null`，因此文档中当前没有指定的元素`id.`

要调试，请尝试`console.log(id);`在`return`语句之前添加调用。一旦你这样做了，你就会发现`id`导致问题的价值。希望错误是一个简单的拼写错误造成的，记住 的值`id`是区分大小写的。如果错字不是问题，您至少可以设置一个条件断点，因为您现在知道`id`要中断的值。到达断点后，只需单步执行调用函数以“查看哪段代码触发了该函数”。希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-17T23:38:54.683

我用这个插件几个月了，今天我发现文件上传不起作用，我得到一个错误

```
"cannot read property 'innerHTML' of null error". 
```

我调查了一下，原因很简单。文件路径

```
http://blueimp.github.io/JavaScript-Load-Image/js/load-image.min.js 
```

变成

```
http://blueimp.github.io/JavaScript-Load-Image/js/load-image.all.min.js 
```

在 blueimp 的 git 中。正如你在这里看到的

```
https://github.com/blueimp/jQuery-File-Upload 
```

此文件中更改的路径。

```
https://github.com/blueimp/jQuery-File-Upload/blob/master/index.html 
```

我改变了正确的道路及其作品。希望这个答案能帮助这里遇到同样问题的人。

# mysql - 计算多个月的不同值

> ID：11527695
> 
> 赞同：1
> 
> 时间：2012-07-17T17:26:05.700
> 
> 标签：mysql

这里有点问题。我不能为我的生活，弄清楚如何做到这一点。

```
pid | firstlast | lastvisit | zip 
---------------------------------------
435 | 2001-01-17 | 2012-01-21 | 46530
567 | 2001-01-18 | 2012-01-21 | 46530
532 | 2001-01-19 | 2012-01-22 | 46535
536 | 2001-01-19 | 2012-01-23 | 46535
539 | 2001-01-20 | 2012-01-27 | 46521 
```

这是我的 SQL 查询：

```
SELECT DISTINCT zip, COUNT(zip) AS totalzip FROM production WHERE MONTH(lastvisit) = "1" GROUP BY zip ORDER BY totalzip DESC; 
```

输出：

简：

```
zip | totalzip
--------------------- 
46530 | 2
46535 | 2
46521 | 1 
```

二月：

```
zip | totalzip
--------------------- 
46530 | 1
46521 | 4
49112 | 3 
```

这对第一个月来说很棒，但我全年都需要这个。我可以运行这个查询 12 次，但是会出现 2 个问题。我全年有 300 多个邮政编码。在某些月份，邮政编码不存在，因此计数为 0（但 MySQL 输出不输出“零数据”。此外，当我通过 totalzip 订购时，订单每月都会发生变化，这不会请允许我将它们粘贴到电子表格中。我可以按邮政编码订购，但再次“零”数据邮政编码不存在，因此列表每个月都会更改。

任何想法或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:07:24.973

您可以使用子查询来完成这项工作：

```
select 
    a.*, count(c.zip) as totalZip
from
   (select 
       monthVisit, zip
    from
        (select distinct last_day(lastVisit) as monthVisit from production) as m,
        (select distinct zip from production) as z
   ) as a
   left join (select 
                  last_day(lastVisit) as monthVisit, zip
              from production) as c
       on a.monthVisit=c.monthVisit and a.zip=c.zip
 group by
     a.monthVisit, a.zip 
```

这应该为您提供每个月的拉链计数，包括零。

让我解释一下这是如何工作的：

首先，我定义了一个子查询，它生成了*所有*可能的 zip 和月份组合（`a`子查询），然后我加入了第二个返回 ZIP 和月份值的子查询（`c`子查询）。使用`left join`允许计算`a`子查询中可能的空组合。

希望这对您有所帮助。

注意：该`last_day()`函数返回给定日期当月的最后一天；例如：`last_day('2012-07-17')='2012-07-31'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:30:36.223

如果你有一个邮政编码表（你应该），你可以将它与你的数据表连接起来（左连接），这甚至会带来零计数的邮政编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:54:09.957

您的问题的第一部分通过额外的分组来解决。尝试这样的事情：

```
 SELECT DISTINCT zip, YEAR(lastvisit),  MONTH(lastvisit), COUNT(zip) AS totalzip 
 FROM production 
 GROUP BY  zip, YEAR(lastvisit),  MONTH(lastvisit)
 ORDER BY totalzip DESC; 
```

要在没有数据时添加“零”摘要，我通常会使用完整列表进行左连接。（上面的@Alfabravo 也说明了这一点）。所以最终的查询看起来有点像：

```
 SELECT DISTINCT zip, YEAR(lastvisit),  MONTH(lastvisit), COUNT(zip) AS totalzip 
 FROM production left join 
      (SELECT DISTINCT zip from production) as zipMap on zipmap.zip = production.zip
 GROUP BY  zip, YEAR(lastvisit),  MONTH(lastvisit)
 ORDER BY totalzip DESC; 
```

# javascript - 处理ajax调用的困难

> ID：11527696
> 
> 赞同：0
> 
> 时间：2012-07-17T17:26:08.290
> 
> 标签：javascript, ajax, httpresponse

我有一个问题，我通过 ajax 调用一个 url，但我在处理响应时遇到了一些问题。

[url](http://www.amazon.com/gp/aag/ajax/paginatedFeedback.html?seller=A3QGTRL0G4B98R&isAmazonFulfilled=&isCBA=&marketplaceID=ATVPDKIKX0DER&asin=&ref_=aag_m_fb&&currentPage=1)正在返回响应，当我直接从浏览器调用它时，但是当我在我的 ajax 调用中使用它时，我在处理它时遇到了一些问题。我已经使用了 XMLHTTPREQUEST 对象的属性（responseText 和 responseXML）。

我的代码是::

```
function postRequest(strURL) 
    {
        var xmlHttp;
          if (window.XMLHttpRequest) // Mozilla, Safari, ... 
          { 

            var xmlHttp = new XMLHttpRequest();

           }

          else if (window.ActiveXObject)  // IE
          {
                var xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
          }

          xmlHttp.open('GET', strURL, true);
          xmlHttp.setRequestHeader('Content-Type', 'text/html; charset=ISO-8859-1');

          xmlHttp.onreadystatechange = function() 
          {
              if (xmlHttp.readyState == 4)
                {
                   alert("Status =4");
                   alert(xmlHttp.responseXML);
                   alert(xmlHttp.responseText);
             }

          }

          xmlHttp.send(strURL);
      } 
```

网址是::`http://www.amazon.com/gp/aag/ajax/paginatedFeedback.html?seller=A3QGTRL0G4B98R&isAmazonFulfilled=&isCBA=&marketplaceID=ATVPDKIKX0DER&asin=&ref_=aag_m_fb&&currentPage=1`

请提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:11:54.713

我认为你不能打电话到另一个域。您可以在 G 中阅读有关 AJAX 跨域的更多信息

# ruby-on-rails - 每次在开发模式下加载rails时如何创建ssh隧道？

> ID：11527699
> 
> 赞同：1
> 
> 时间：2012-07-17T17:26:29.283
> 
> 标签：ruby-on-rails, ssh, splunk

每次我在本地启动 rails 时，在哪里放置一行需要执行的 bash 代码的约定是什么？我正在创建一个隧道 ( `ssh -gL8089:splunk-server:8089 myserver`)，以便我可以在本地提取 splunk 结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:51:14.950

我认为你可以放弃你的代码

```
 system("ssh ...") 
```

如果您仅在特定环境中需要它，则进入environments/environment_name.rb。如果您总是需要它，我会将其放入 environment.rb 或 boot.rb

# logback - Logback - 以编程方式添加的 SMTPAppender 将消息正文留空

> ID：11527702
> 
> 赞同：1
> 
> 时间：2012-07-17T17:26:48.680
> 
> 标签：logback

我错过了什么？我有以下代码成功发送了一封电子邮件，但电子邮件的正文为空。我认为这与模式布局有关，但一切看起来都还不错。关于发生了什么的任何想法？

```
private void createAdminNotifyAppender(LoggerContext lc, AppConfigPropertiesReader propReader)
{
    logger.info("Setting up logback admin_notify logging");

    //Set up the admin notify appender programatically (needs to use the properties from the propReader above)
    OnMarkerEvaluator markerEvaluator = new OnMarkerEvaluator();
    markerEvaluator.addMarker(LogbackMarker.ADMIN_NOTIFY.toString());
    String adminEmails = propReader.getProperty("adminEmail");
    PatternLayout patternLayout = new PatternLayout();
    patternLayout.setPattern("[\\(%-6threadHash\\) app=iv  %d{yyyy-MM-dd HH:mm:ss.SSS}] %-5level %-25logger{25} - %msg%n");

    SMTPAppender adminNotifyAppender = new SMTPAppender();
    adminNotifyAppender.setContext(lc);
    adminNotifyAppender.setEvaluator(markerEvaluator);
    adminNotifyAppender.setSMTPHost(propReader.getProperty("smtpHost"));
    for (String adminEmail : adminEmails.split(",")) { adminNotifyAppender.addTo(adminEmail); };
    adminNotifyAppender.setFrom(propReader.getProperty("sysEmailAddressNoReply"));
    adminNotifyAppender.setSubject("System Alert! [" + propReader.getProperty("environment") + "]");
    adminNotifyAppender.setLayout(patternLayout);
    adminNotifyAppender.start();

    Logger rootLogger = lc.getLogger(Logger.ROOT_LOGGER_NAME);
    rootLogger.addAppender(adminNotifyAppender);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:11:06.183

问题是 PatternLayout 和 OnMarkerEvaluator 都有应该调用的启动方法（MarkerEvaluator 似乎没有它也可以工作）。

此外，两者都需要知道 loggerContext（通过调用 patternLayout.setContext(lc) 设置），否则你会得到如下输出：

```
[(%PARSER_ERROR[threadHash]) app=iv  %PARSER_ERROR[d]] %PARSER_ERROR[level] %PARSER_ERROR[logger] - %PARSER_ERROR[msg]%PARSER_ERROR[n] 
```

现在一切都很好。

# php - Facebook 限制分解，绝对事实

> ID：11527703
> 
> 赞同：3
> 
> 时间：2012-07-17T17:26:55.963
> 
> 标签：php, facebook, curl

> **可能重复：**
> [Facebook 的 Graph API 调用限制是多少？](http://facebook.stackoverflow.com/questions/8713241/whats-the-facebooks-graph-api-call-limit)

我从几个来源听说，其中大部分是堆栈溢出或其他知名的门户网站告诉我，对于 facebook api，每 600 秒有 600 次 api 调用的限制。我个人认为不止于此，但这条线的确切位置似乎有所不同，我真的不知道该把我的手指放在哪里。

问题：

我还听说每个访问代码每 600 秒有 600 次 api 调用。

我还听说每个 ip 地址，每个代码每 600 秒 600 次 api 调用。

我还听说它仅在每个 IP 地址每 600 秒内调用 600 次 API。

我的问题是，它是哪一个？

# php - 需要正则表达式在字符串中搜索

> ID：11527704
> 
> 赞同：-5
> 
> 时间：2012-07-17T17:27:05.887
> 
> 标签：php, regex, preg-match

如果逗号在 || 中出现多次，我需要正则表达式来搜索逗号 和 || 并返回 || 之间的字符串 和||。例如。考虑这个字符串：

```
$str = "http://www.test.com||abd-asd,asf,asfdsf[asf[s]asf,http://www.test1.com||asfsaf"; 
```

所以在上面的字符串上运行正则表达式后，它应该返回：

```
abd-asd,asf,asfdsf[asf[s]asf,http://www.test1.com 
```

不包括 || 和||。我必须在我的 PHP 代码中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:34:57.550

```
if (preg_match(
    '/(?<=\|\|) # Assert starting position directly after ||<
    [^,|]*,     # Match any number of characters except , or |; then a ,
    [^,|]*,     # twice (so we have matched at least two commas)
    [^|]*       # Then match anything except | characters
    (?=\|\|)    # until we are right before ||
    /x', 
    $subject, $regs)) {
    $result = $regs[0];
} else {
    $result = "";
} 
```

# ruby-on-rails - Ruby/Rails 继承，在子类中覆盖父类中定义的验证器

> ID：11527708
> 
> 赞同：4
> 
> 时间：2012-07-17T17:27:28.803
> 
> 标签：ruby-on-rails, ruby, validation, paperclip, paperclip-validation

我有以下导轨/回形针验证器：

```
class ImageRatioValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    attr_name = "#{attribute}_width".to_sym
    value = record.send(:read_attribute_for_validation, attribute)
    valid_ratios = options[:ratio]

    if !value.queued_for_write[:original].blank?
      geo = Paperclip::Geometry.from_file value.queued_for_write[:original]

      # first we need to validate the ratio
      cur_ratio = nil
      valid_ratios.each do |ratio, max_width|
        parts = ratio.split ":"
        next unless (geo.height * parts.first.to_f) == (geo.width * parts.last.to_f)
        cur_ratio = ratio
      end
      # then we need to make sure the maximum width of the ratio is honoured
      if cur_ratio
        if not valid_ratios[cur_ratio].to_f >= geo.width
          record.errors[attribute] << "The maximum width for ratio #{cur_ratio} is #{valid_ratios[cur_ratio]}. Given width was #{geo.width}!"
        end
      else
        record.errors[attribute] << "Please make sure you upload a stall logo with a valid ratio (#{valid_ratios.keys.join(", ")})!"
      end
    end
  end
end 
```

验证器用于超类（超类不是抽象的，因此可以实例化）和子类。在子类中，我需要更改允许的比率：

超类：

```
class Superclass
    validates_attachment :logo, :image_ratio => { :ratio  => {"1:1" => "28", "4:1" => "50", "5:1" => "40"} }
end 
```

子类：

```
class Subclass < Superclass
  validates_attachment :logo, :image_ratio => { :ratio  => {"1:1" => "40", "2:1" => "60"} }
end 
```

验证器在超类中按预期工作，但似乎忽略了子类中给出的新比率。
我是否试图以非 Rails 方式使用验证器？在上述情况下，我应该如何使用验证器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:13:33.337

当您从超类继承时，您也可以从中获得验证器。我不是 100% 确定这一点，但我认为您只需将新验证器添加到旧验证器列表中，即两个约束都适用。

我认为最简单的解决方案是将通用逻辑放在模块中或从通用超类继承。你也可以做这样的事情，但我认为这很丑：

```
class Superclass
    with_options :unless => Proc.new { |a| a.validators.any? } do |super_validators|
        super_validators.validates :password, :length => { :minimum => 10 }
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:53:22.733

这不是理想的解决方案，但相当干净。

只需根据类型使用自定义验证。这样，您将在超类中定义两个验证器，但它肯定会起作用。

```
class Superclass
    validates_attachment :logo, :image_ratio => { :ratio  => {"1:1" => "28", "4:1" => "50", "5:1" => "40"} }, :if => self.is_a?(SuperClass)
    validates_attachment :logo, :image_ratio => { :ratio  => {"1:1" => "40", "2:1" => "60"} }, :if => self.is_a?(SubClass)
end 
```

# java - LWJGL 输入与 PS3 控制器？

> ID：11527713
> 
> 赞同：0
> 
> 时间：2012-07-17T17:27:43.093
> 
> 标签：java, controller, lwjgl, minecraft, jinput

我是 LWJGL 的新手（我在 Minecraft 中用它做了一些事情），我需要一些帮助。我想为 Minecraft 制作一个模组，用户可以选择使用他们的 PS3 控制器。我已经为初学者寻找`JInput`教程，但没有找到。我还尝试查看 Minecraft 如何使用 LWJGL 处理输入，但我找不到任何好的东西。

我现在有点绝望。请帮助，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:21:44.217

查看 javagaming.org 上的 JInput 论坛，那里有一个 JInput 入门指南，里面有一些教程。

LWJGL 为控制器包装了 JInput，它有自己的键盘和鼠标代码，但其他一切都通过 JInput。

关于 PS3 控制器，只要底层操作系统有驱动程序，并通过正常方法（Linux 的 /dev/input/event 设备，windows 的 directx 等）公开它，JInput 就会看到它。

高温高压

# javascript - 将 CSS 与 javascript/Ajax 函数结合使用

> ID：11527714
> 
> 赞同：0
> 
> 时间：2012-07-17T17:27:42.387
> 
> 标签：javascript, html, css, ajax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:38:53.990

sven的评论，链接需要一类`current`

```
function mypage($total, $start) {  
  return "<li><a class='current' href='javascript:selectPage(".$counter.")'>$counter</a></li>";
} 
```

如果您想在单击某些内容时添加当前内容，则涉及更多工作：

*   在事件处理程序中：`this.className='current'`但您还需要记住以前的当前事件并将其删除

# javascript - How would you implement Controller in Javascript? (inside of self-made MVC)

> ID：11527715
> 
> 赞同：0
> 
> 时间：2012-07-17T17:27:43.827
> 
> 标签：javascript, model-view-controller

**I want to implement [MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller) pattern in JavaScript, but I have a problem with Controller implementation.**

MVC concepts are clear to me. I understand how MVC works. I don't think that events is appropriate way build a Controller. And there are a lot of dependences because of edition of the event in JavaScript. I would like to see some small example of implementation of MVC Controller in JavaScript.

**p.s.** I want to implement MVC pattern by using only JavaScript, but I don't want to use any MVC open-source frameworks.

**p.s.** I don't want you to do my homework, but I really don't understand how to imprelent Controller in JavaScript.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:47:56.603

基本上 MVC 是基于观察者模式（控制器也是）

如何在 Javascript 中实现 Observer？

```
function Observer() {
    var subscribers = [];
    return {
        subscribe: function(eventName, object) {
            subscribers.push({ event: eventName, target: object });
        },
        unsubscribe: function(object) {
            var indexToDelete = subscribers.indexOf(object);
            subscribers.splice(indexToDelete, 1);
        },
        trigger: function(eventName, p1, p2, p3, p4, p5) {
            for (var i = 0; i < subscribers.lenght; i++) {
                if (subscribers[i].event == eventName) {
                    //target object must implement this function
                    subscribers[i].target[eventName](p1, p2, p3, p4, p5);
                }
            }
        }
    }
} 
```

以及如何使用它？

```
var model = { 
    fireChangesInsideOfModel: function(p1){ 
        //do some model update logic here
    } 
}
var controller = Observer();
    controller.subscribe("fireChangesInsideOfModel", model);

controller.trigger("fireChangesInsideOfModel", 11231); // 11231 - is an example of a parameter 
```

希望这可以帮助你..

# perl - Perl Mail::Sendmail cant connect to SMTP server

> ID：11527717
> 
> 赞同：4
> 
> 时间：2012-07-17T17:27:53.407
> 
> 标签：perl, smtp, sendmail

I'm trying to send an email from a perl script but I'm having a bad time connecting to my SMTP server. I'm using MailCatcher- [https://github.com/sj26/mailcatcher/](https://github.com/sj26/mailcatcher/) - running with it's default settings (localhost:1025).

MailCatcher is running and I can send mail to it with other services. Any clues as to what could be wrong? (Also tried sending a mail with Net::SMTP but that also failed to connect)

```
print "Testing Mail::Sendmail version $Mail::Sendmail::VERSION\n";

my %mail = (
  To      => 'temp@test.com',
  From    => 'test@test.com',     
  Subject => 'Test message'
);

$mail{server} = 'localhost:1025';

$mail{'mESSaGE : '} = "The message key looks terrible, but works.";

print Dumper(%mail);

if (sendmail %mail) { print "Mail sent OK.\n" }
else { print "Error sending mail: $Mail::Sendmail::error \n" } 
```

Output

```
Testing Mail::Sendmail version 0.79
Default server: localhost
Default sender: 
$VAR1 = 'Subject';
$VAR2 = 'Test message';
$VAR3 = 'server';
$VAR4 = 'localhost:1025';
$VAR5 = 'To';
$VAR6 = 'temp@test.com';
$VAR7 = 'message : ';
$VAR8 = 'The message key looks terrible, but works.';
$VAR9 = 'From';
$VAR10 = 'test@test.com';
Error sending mail: connect to localhost failed (Connection refused)
connect to localhost failed
connect to localhost failed (Connection refused)
connect to localhost failed
connect to localhost failed (Connection refused) no (more) retries! 
```

EDIT:

Turned out mailcatcher was running on another port and wasn't giving an error when I was trying to start it up on 25.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:30:25.710

您没有在电子邮件的标题中设置邮件服务器和端口；而是将其设置在`%mailcfg`哈希中：

```
use Mail::Sendmail qw(sendmail %mailcfg)
$mailcfg{port} = 1025; #localhost is already the default server... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-15T10:44:15.177

你可以试试这个..它对我有用..

```
use strict;
use warnings;
use Email::Sender::Simple qw(sendmail); 
use Email::Sender::Transport::SMTP(); 
use Email::Simple();   
use Email::Simple::Creator();       

my $smtpserver = 'server';
my $smtpport = 25;      
my $smtpuser = 'User_Name';   
my $smtppassword = 'pass';         
my $transport = Email::Sender::Transport::SMTP->new({   
    host => $smtpserver,  
    port => $smtpport,            
    sasl_username => $smtpuser,       
    sasl_password => $smtppassword,   
});            

my $email = Email::Simple->create(header => [
        To      => 'me@example.com',
        From    => 'sender@example.com',
        Subject => 'Hello there!',
    ],  body => "This is one actually worked !!\n",             
);             

sendmail($email, { transport => $transport });
?> 
```

# join - SOQL query to join one-to-one between two custom objects (Salesforce Apex)

> ID：11527718
> 
> 赞同：2
> 
> 时间：2012-07-17T17:27:53.230
> 
> 标签：join, salesforce, apex-code, one-to-one, soql

I have two custom objects in Salesforce: Object1 and Object2 Object2 has a lookup field that references to Object1. More than one record in Object2 could have the same Object1 record referenced. I have to build a SOQL query wich makes a join of Object1 and Object2 where the matching is one-to-one.

ie. With those values in Object1 and Object2 I want that result:

![With those values in Object1 and Object2 I want that result](../Images/adcb66b827026ad5dd60febb7cd7c814.png)

The record in Object1 with Id=2 is not in result because it has two records in Object2 that references it. I would like to know how to achieve this with a SOQL query.

Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T18:02:31.457

因为您只想要一行，您可以偷偷地使用聚合函数从聚合查询中获取值。

```
select max(id) object2Id, 
       max(name) object2Val, 
       max(object1__r.name) object1Val 
from object2__c 
group by object1__c 
having count(object1__c) =1 
```

为我工作（在我的对象中使用名称字段而不是值，但这无关紧要）。

![样本查询结果](../Images/43c79b0a54f0040ad4e7d1ecbc0e4684.png)

# linux - FACL commands in Linux

> ID：11527720
> 
> 赞同：2
> 
> 时间：2012-07-17T17:28:02.797
> 
> 标签：linux, file-permissions

FACL commands [ setfacl, getfacl...]; I have really used them in Solaris but I am facing some issues while using them in Linux. Is this FACL utility really compatible with LINUX??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:42:44.220

命令行类似，api不同。你有什么问题？

[http://linux.about.com/library/cmd/blcmdl1_setfacl.htm](http://linux.about.com/library/cmd/blcmdl1_setfacl.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-18T17:08:32.873

它是兼容的，因为它达到了相同的结果；除了标准的所有者和组属性之外，允许更灵活地允许访问其他用户和组。和会给你详细信息，但很确定我记得的唯一区别是在 Solaris 上，命令`man setfacl`是和.`man getfacl``setacl``getacl`

# wordpress - Using Twitter Bootstrap together with Wordpress

> ID：11527723
> 
> 赞同：4
> 
> 时间：2012-07-17T17:28:24.963
> 
> 标签：wordpress, twitter-bootstrap

How do I use Wordpress together with Twitter Bootstrap? I know how to set up a Wordpress page and I've already worked with Bootstrap, but now I want to use these two together for the first time.

For my Wordpress projects I normally just installed Wordpress and started from scratch with creating a new theme. For my Bootstrap projects I always used Initializr to build a template.

Now using Google I found various "Bootstrap themes" and plugins , do I need one of those? I want to customize the bootstrap look with my own colors etc. using LESS, that's why I am asking. I am just having trouble to understand how these two will work together and I haven't found any good resource for it.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T14:18:19.087

有几种方法可以解决这个问题，但这是我一直在做的......

1.  复制您最喜欢的起点主题
2.  下载完整的 bootstrap repo（less 和一切）并将其弹出到您的主题文件夹中。
3.  在 bootstrap 文件夹中创建一个名为“css”的文件夹，并将其设置为您的位置以输出已编译的“bootstrap.css”文件。
4.  然后在主题根目录中，打开'styles.css'，更改主题名称等，就像创建新主题一样，删除所有样式并添加一行代码`@import url("bootstrap/css/bootstrap.css");`
5.  您现在应该可以从“wp-admin”的“外观”菜单中选择这个新主题。
6.  它显然看起来很可怕，但是一旦您将一些主题类/ID 添加到“layout.less”中。然后运行“variables.less”来添加你将到达某个地方的基本主题。
7.  除此之外，您必须浏览每个模板文件并考虑所有类/ID，有时编辑主题以更好地利用现有的引导类，但有时您需要添加自己的自定义类引导程序。

这非常耗时，但一旦完成，它显然可以重新用于加速未来的项目。

顺便说一句，我也一直在使用同样的原则构建一个主题，但基于[http://stuffandnonsense.co.uk/projects/320andup/](http://stuffandnonsense.co.uk/projects/320andup/)这两个很棒的项目。我建议看看哪个最适合你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T17:16:54.733

你总是可以使用 Twitter Bootstrap WordPress 插件。它在 WordPress.org 上完全免费：http: [//wordpress.org/extend/plugins/wordpress-bootstrap-css/](http://wordpress.org/extend/plugins/wordpress-bootstrap-css/)

还包含许多短代码，因此您可以在页面中包含 Bootstrap 元素并发布 - 这里有一个演示页面：[http ://worpit.com/wordpress-twitter-bootstrap-css-plugin-home/wordpress-shortcodes -演示/](http://worpit.com/wordpress-twitter-bootstrap-css-plugin-home/wordpress-shortcodes-demo/)

希望能帮助您入门！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-26T07:12:03.880

我之前在stackoverflow上回答了同样的问题。我觉得这是一种迟到的分享，但对于那些正在寻找此类教程的人来说，只需单击给出的超链接标题：[在 Wordpress 中使用 Twitter Bootstrap](http://jonbalagot.zz.mu/complete-tutorial-of-twitter-bootstrap-install-in-wordpress/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-18T11:19:44.970

有一种快速的方法可以做到这一点，在你的主题中使用作曲家：

作曲家.json

```
{
        "config": {
                        "component-dir": "lib/composer",
                        "vendor-dir": "lib/composer",
                        "bin-dir" : "bin/composer",
                        "cache-dir" : "var/cache/composer"
        },
        "require": {
                        "twitter/bootstrap": "3"
        }
} 
```

注意：我删除了其他作曲家的部分和要求以及 phing 集成以降低复杂性。

执行

```
 composer install 
```

然后在你的主题中，添加 /lib/composer/twitter/bootstrap/dist/css/bootstrap.css 和这句话

```
 $bootUri = get_template_directory_uri() . '/lib/composer/twitter/bootstrap/dist/css/bootstrap.css';

    wp_enqueue_style('sindy_bootstrap', $bootsUri); 
```

等等！:)

# .net - Magento web service login Errors communication exception unrecogized message version

> ID：11527725
> 
> 赞同：0
> 
> 时间：2012-07-17T17:28:32.077
> 
> 标签：.net, wcf, magento

i'm writing .Net connector to Magento web services. i created users and admin roles at magento backend.then I added service reference to magento web service url. when i execute magento service login in ,it returns me serviceModel.communicationException : unrecogized message version.

```
 private static Mage_Api_Model_Server_V2_HandlerPortTypeClient InitializeService(string magentoEndpoint)
        {
            var endPoint = new EndpointAddress(magentoEndpoint);
            var binding = new BasicHttpBinding(BasicHttpSecurityMode.None)
                              {
                                  Name = "Mage_Api_Model_Server_V2_HandlerBinding",
                                  CloseTimeout = TimeSpan.FromMinutes(1.0),
                                  HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,
                                  MessageEncoding = WSMessageEncoding.Text,
                                  MaxReceivedMessageSize = 65536000,
                                  MaxBufferSize = 65536000
                              };
} 
```

then i call magentoservice var magentoService = InitializeService(magentoEndpoint);

```
 //login
 var sessionId = magentoService.login(magentoUsername, magentoKey); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:03:36.457

原来是一些 SSL 问题

# search-engine - 制作没有超链接的网站

> ID：11527732
> 
> 赞同：1
> 
> 时间：2012-07-17T17:28:51.203
> 
> 标签：search-engine, hyperlink, seo

我正在制作一个简单的 CMS 以在我自己的博客中使用，并且我一直在使用以下代码来显示文章。

```
xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
        document.getElementById("maincontent").innerHTML=xmlhttp.responseText;
    }
} 
```

它的作用是向数据库发送请求并获取与被点击的文章相关联的内容，并使用“.innerHTML”将其写入主查看区域。

因此，我没有指向其他文章的实际链接。我知道我可以使用 PHP 来输出 HTML，以便它形成如下链接：

```
<a href=getcontent.php?q=article+title>Article Title</a> 
```

但是有点强迫症，我希望我的输出尽可能整洁。尽管搜索引擎的可见性对我的个人博客来说不是一个问题，但我打算将其应用于其他一些将搜索引擎优化作为优先事项的网站。

据我了解，基本上搜索引擎机器人会跟随链接来索引网站。

我的问题是：这种做法对搜索引擎可见性有什么负面影响吗？还; 我看到几乎每个站点都使用“链接”方法，是否还有其他原因更喜欢一种方法而不是另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:48:52.923

您编写的链接将导致页面重新加载。为了利用您在顶部获得的标准 AJAX 内容，您需要将链接编写为类似于以下内容的内容

```
<a href="javascript:void(0)" onclick="ajaxGet('article identifier')">Article Title</a> 
```

这假设您有一个名为 ajaxGet 的 javascript 函数，该函数接受您正在搜索的文章的标识符作为参数。

如果您以这种方式编写整个网站，搜索引擎将根本无法抓取您，因为它们不执行 javascript。因此，他们无法访问首页之外的任何内容。此外，即使他们可以点击链接，他们也无法引用他们所访问的页面，因为它没有唯一的 URL。这对用户来说也很烦人，因为他们无法获得指向确切故事的链接以添加书签、发送给朋友等。

# html - div 内容溢出容器

> ID：11527741
> 
> 赞同：0
> 
> 时间：2012-07-17T17:29:34.763
> 
> 标签：html, css

我有一个带有三个子元素的 <article> 元素：页眉、内容 div 和页脚。文章绝对定位，高度和宽度设置，因此它很好地适合文章网格。header 有一些可变的内容，如文章标题、日期等，可以根据需要进行扩展。通过填充文章底部，页脚绝对定位在文章中留出的一些空间内。然而，内容 div 拒绝很好地播放。

发生的事情是 grid_content div 只占用了容纳其内容所需的空间，同时溢出了 <article> 元素。我会想出一些明确的高度来设置它，但是 <article> 高度和标题高度都是可变的，这分别取决于它在网格中占用的空间数量和文章标题是什么。

是否有一些干净的方法可以让 div 尊重它的包容性，或者我需要做一些丑陋的 JS 黑客来让它保持原样吗？

谢谢！

[http://jsfiddle.net/j2fE4/](http://jsfiddle.net/j2fE4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:43:06.763

好的，所以我确实设法解决了这个问题，但解决方案是涉及 JavaScript 的两部分交易。

首先，我使用了一些自定义 JavaScript 来计算 .grid_content 元素的适当高度，粘贴在这里以供参考。该解决方案不适用于其他项目，但应该说明思考过程。

```
function resizeContentElements() {
    $('div.grid_content').each(function(i, element){
        var $element = $(element);

        var parentHeight = $element.parent().height();
        var elementPadding = parseFloat($element.css('padding-top')) + parseFloat($element.css('padding-bottom'));
        var siblingSpace = $element.prev().height() + parseFloat($element.prev().css('padding-top')) + parseFloat($element.prev().css('padding-bottom'));

        $element.height(parentHeight - siblingSpace - elementPadding);
    });
} 
```

之后，我抓取了[http://dotdotdot.frebsite.nl/](http://dotdotdot.frebsite.nl/)并将其应用于 div.grid_element 集合。一切都变成了省略号，尽管内容被省略号截断的点似乎还不是那么均匀。我最好的猜测是这些容器中的不规则（并且通常是无效的）标记正在搞乱它。

# three.js - Collada 模型渲染鼠标移动

> ID：11527742
> 
> 赞同：0
> 
> 时间：2012-07-17T17:29:47.210
> 
> 标签：three.js

在与浏览器窗口交互之前，我无法让我的 collada 模型使用 three.js 进行渲染。在 Chrome 中，它可以像在页面上的任意位置移动鼠标一样简单（实际画布小于整个窗口），而在 Safari 中，它需要单击并拖动模型才能呈现。奇怪的是场景的其余部分正在正确加载（我有一个渲染到场景的网格和几盏灯），但是在我做某事之前模型不会显示。关于如何欺骗场景知道它应该显示模型的任何想法？

```
var loader = new THREE.ColladaLoader();
loader.options.convertUpAxis = true;
loader.load('../MODELS/teapot.dae', function colladaReady( collada ) {

    dae = collada.scene;
    skin = collada.skins[ 0 ];

    dae.scale.x = dae.scale.y = dae.scale.z = 10;
    dae.position.y = 75;
    dae.updateMatrix();               

    scene.add(dae);                         
});

document.getElementById('myCanvas').appendChild(renderer.domElement);

render(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:50:06.407

加载是异步发生的。您只显示了一个代码片段，但看起来您可以将调用移动到回调函数`render()`的最后一行。`colladaReady()`

# sqlite - preg_replace 用于更改 sql 查询字符串

> ID：11527743
> 
> 赞同：0
> 
> 时间：2012-07-17T17:29:53.187
> 
> 标签：sqlite, preg-replace

我对 sqlite3 和“num_rows”有疑问。我不能要求像 mysql 这样的结果的 num_rows。现在我不想自动化我的 SELECT 查询来要求行数。有没有办法在两种模式之间全部替换？

像

```
 SELECT date,name,etc FROM myTable WHERE gender=1
// to
SELECT count(*) FROM myTable WHERE gender=1 
```

我必须用 count(*) 替换 SELECT 和 FROM 之间的所有内容。我可以这样做 preg_replace 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:35:24.350

对于您的示例，它很简单，但我想它不适用于所有查询语法。但是试一试：

PHP 代码（不知道您使用的语言）：

```
$count_sql = preg_replace('/^(SELECT)\\s+.*?\\s+(FROM.*)$/s', '$1 count(*) $2', $select_sql); 
```

但我想，有一种更优雅的方法可以找到这个`num_rows`东西。您可以使用子查询，例如：

```
SELECT COUNT(*) FROM ( *** original query here *** ) 
```

它不是很有效，但您不必处理查询语法。

# c - 为什么密码中的 strcmp() 不起作用？

> ID：11527746
> 
> 赞同：0
> 
> 时间：2012-07-17T17:30:12.843
> 
> 标签：c, string, strcmp

为什么总是显示*无效密码*？它在我的另一个程序中有效，但在这个程序中却不行！我真的不知道为什么。

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include <conio.h>
#define MAXLTR 15
int login(void);
void welcome(void);
void gotoxy(int x,int y);

int main(void)
{   
    char password[MAXLTR];
    printf("\nEnter password: ");
    //scanf("\n%s",&password);
    ltrcntr = 0;
    while(buffer != 13)
    {
        buffer = getch();
        if(buffer == 13)
                  break;
        printf("\b**");
        password[ltrcntr] = buffer;
        ltrcntr++;
    }
    if(strcmp(password,"dlsu") == 0)
    {
        system("cls");
        welcome();
    }
    else
        printf("\nInvalid Password, please rerun the program.\n");

}
void gotoxy(int x, int y)
{
     HANDLE eric;
     COORD pogi;
     pogi.X = x;
     pogi.Y =y;
     eric = GetStdHandle
     (STD_OUTPUT_HANDLE);
     SetConsoleCursorPosition
     (eric, pogi);
}
int login(void)
{
    char password[MAXLTR],buffer;
    int ltrcntr = 0;
    printf("Enter password: ");
    while(buffer != 13)
    {
        buffer = getch();
        if(buffer == 13)
                  break;
        printf("\b**");
        password[ltrcntr] = buffer;
        ltrcntr++;
    }
    if(strcmp(password,"dlsu")==0)
        return 1;

}

void welcome(void)
{
    system("Color 4F");
    gotoxy(35,56);
    printf("\nWelcome to SPACE INVADERS!");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:32:25.387

C 字符串以 NULL 结尾（即最后一个字符是`\0`）。所有对字符串进行操作的 C 函数都期望这一点，因为这是知道字符串在哪里结束的唯一方法。您的数组可以填充任何内容，因为它未初始化。试试这个：

```
char password[MAXLTR] = {0}; 
```

`strcmp`需要一个 NULL 终止的字符串。此外，如果从不输入回车（而且我什至看不到`buffer`声明的位置...），您将超出密码缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:34:18.080

看起来您在使用`strcmp`. C 字符串实用程序期望字符串以空值结尾。

读完密码的每个字符后，在密码中添加一个空字符“\0”：

```
password[ltrcntr] = '\0'; 
```

确保您在数组大小中为空字符允许了一个额外的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:35:48.370

可能是因为您的数组不是 NULL 终止的。要么先将其清零，要么将循环更改为如下所示：

```
while(ltrcntr < MAXLTR - 1) // protect from password that's too long
{
    buffer = getch();
    if(buffer == 13)
              break;
    password[ltrcntr] = buffer;
    ltrcntr++;
    printf("\b**");
}
password[ltrcntr] = 0; // null terminate after last character 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T17:44:00.227

您不能确保在逐个字符检查密码时，最后一个字符后面会出现一个终止 '\0'。密码不是以零结尾的。差不多就是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T18:01:09.050

无需逐字阅读。

```
fgets(password,MAXLTR,stdio); 
```

这在换行符或 EOF 之后停止，以 nul 终止字符串，并且不会溢出缓冲区。

# eclipse - Egit：如果格式不正确，则阻止提交

> ID：11527747
> 
> 赞同：0
> 
> 时间：2012-07-17T17:30:16.927
> 
> 标签：eclipse, git, format, egit

我工作的公司给了我将他们的 java 项目从 CVS 转移到 Git 的项目。出于几个原因，他们不想使用 Eclipse 以外的其他工具。所以我们被EGit困住了。

我知道可以配置 Eclipse 来格式化代码。但似乎没有什么可以阻止某人使用他自己的方式来格式化代码。

所以我的问题是，**如果代码格式不正确，是否可以拒绝使用 EGit 提交**？这个问题背后的原因是我们想避免由于代码格式引起的冲突，这在 CVS 中是一个非常大的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:01:34.377

在提交期间检查代码的另一种方法是使用[gerrit](http://code.google.com/p/gerrit/)作为审查系统。开发人员会将他们的代码提交到 gerrit，而不是直接提交到 git 存储库。[然后 Gerrit 可以在Jenkins](http://jenkins-ci.org/) /Hudson 服务器上触发构建作业，并且该构建作业可以运行 CheckStyle 或您喜欢的任何其他格式检查工具。

成功检查后，Jenkins 还可以验证更改并将其合并到 git 存储库中（大多数项目更喜欢 Jenkins 仅验证代码的正确性，之后仍需要人工检查代码）。未通过检查的提交将保留在 gerrit 中（并且邮件将发送给开发人员）。

这种方法的优势在于，您可以做的不仅仅是每次提交的样式检查，尤其是**运行单元测试**、静态代码分析和代码覆盖。主要缺点是您必须设置更多工具，而不仅仅是 git 挂钩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T18:47:29.373

我建议设置格式化程序和保存操作以将代码格式化为项目特定的配置。`.settings`然后在 Git 中跟踪目录。

因为它是在项目和版本控制中配置的，所以开发人员不必自己配置 Eclipse，它是自动的。

我们已经在几个项目中做到了这一点，如果你从一开始就这样做，你将永远不会有任何格式错误的代码或关于它的讨论。

如果开发人员真的不情愿，甚至取消选中特定于项目的格式化程序并使用另一个格式化程序，也许你应该谈谈。

（顺便说一句，格式化程序中推荐的选项是*Never join already Wrapping lines*，因为有时格式化程序会进行奇怪的包装。这个选项可以控制包装。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:56:47.523

如果您知道确定代码格式是否正确的方法，您可以在钩子预提交中实现它

这个钩子应该放在 .git/hooks

git 附带一个名为 pre-commit.sample 的示例，它已经在 hooks 目录中，或者您可以在 /usr/share/git-core/templates/hooks/ （在 Ubuntu 上）中找到它。

# sql-server - VB.Net数据源连接错误

> ID：11527749
> 
> 赞同：0
> 
> 时间：2012-07-17T17:30:31.793
> 
> 标签：sql-server, vb.net, sqldatasource, sqlconnection

我正在使用 VS2008 VB.net 和 sql 2008。

*   我尝试使用 Microsoft SQL Server 数据库文件 (SqlClient) 连接一个新的数据源，但它给出了错误； ![Microsoft SQL Server 数据库文件](../Images/e5260c074ae78c101c0d92816f88bc2f.png)

*   我尝试使用 Microsoft SQL Server (SqlClient) 连接一个新的数据源，但它给出了错误； ![微软 SQL 服务器 (SqlClient)](../Images/2c885d7dee441796654c5d362662f5ac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:22:31.580

在第一种情况下，您似乎正在尝试附加到 SQL Server 实际使用的活动 SQL Server 数据库文件和/或该文件的权限不授予您访问它的权限。要么停止本地 SQL Server 访问该文件，要么找出如何修改文件的权限以便您可以访问它。

在第二种情况下，正如错误消息所暗示的那样，听起来旧版本的 SqlClient 根本不支持与 SQL Server 2005 之后的数据库服务器的连接。这表明可以安装以后的补丁/更新以使您的配置保持最新。

# directory - C#关于使用文件名将文档动态映射到文件夹结构如何

> ID：11527752
> 
> 赞同：0
> 
> 时间：2012-07-17T17:30:36.897
> 
> 标签：directory

目前我正在尝试使用 C# (C sharp) 来做一个遍历的意思。我有一个文件名，它分为 3 个元素，例如 monster3456 测试。Monster 是一个名称，数字是唯一的集合，而 test 是真正代表测试人员的代码。无论如何，我已经设置了一个文件夹结构，从

Alpha 级别，因此每个字母 A、B、C、D、....M 然后分解为名称，其中 Monster 3456 将是 M 分解中的名称，然后在 Monster 文件夹中，我有 3 个子文件夹，称为 Tester、Maker 和生成器。

我想动态地让文件名 monster3456 测试，映射到具有 M - alpha 的文件夹，然后是名称 monster 3456，然后映射到子文件夹 Tester。会有不同的实例，不同的文件具有不同的代码，需要转到 3 个子文件夹之一。我是编程新手，正在寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:59:57.523

我希望我理解正确 - 希望这会让你开始。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Net;
using System.Text.RegularExpressions;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {

            string basePath = "c:\\temp";

            List<string> filenames = new List<string>();
            filenames.Add("monster3456 test");
            filenames.Add("ketchup1234 make");
            filenames.Add("oranges5555 build");

            foreach (string filename in filenames)
            {
                Match match = Regex.Match(filename, @"([a-z]+)([0-9]+)[^\S]{1,}(\w+)", RegexOptions.IgnoreCase);

                if (match.Success)
                {
                    string alpha = match.Groups[1].Value.Substring(0, 1);
                    string alphaString = match.Groups[1].Value;
                    string uniqueSet = match.Groups[2].Value;
                    string instance = match.Groups[3].Value;
                    string finalInstance = String.Empty;
                    string path = String.Empty;

                    switch (instance.ToLower())
                    {
                        case "test":
                            finalInstance = "Tester";
                            break;
                        case "make":
                            finalInstance = "Maker";
                            break;
                        case "build":
                            finalInstance = "Builder";
                            break;
                        default:
                            break;
                    }

                    if (!String.IsNullOrEmpty(finalInstance))
                    {
                        path = basePath + "\\" + alpha + "\\" + alphaString + uniqueSet + "\\" + finalInstance;
                        Console.WriteLine(path);
                        /* Console.WriteLine("alpha: " + alpha);
                        Console.WriteLine("alphaString: " + alphaString);
                        Console.WriteLine("uniqueSet: " + uniqueSet);
                        Console.WriteLine("finalInstance: " + finalInstance); */
                    }
                }
            }
            Console.Read();
        }
    }
} 
```

输出

```
c:\temp\m\monster3456\Tester
c:\temp\k\ketchup1234\Maker
c:\temp\o\oranges5555\Builder 
```

# java - Java Swing 容器不会出现

> ID：11527754
> 
> 赞同：2
> 
> 时间：2012-07-17T17:30:45.773
> 
> 标签：java, swing, netbeans

我正在通过 Java 设计游戏，使用 swing 作为我的 GUI。NetBeans 是我的编辑器，我正在尝试使用他们的编辑器模式，但是每当我运行代码时，什么都没有出现。我尝试将它构建成一个罐子，但是当我运行罐子时，什么也没有出现。

这是我的代码：

```
package kraz;
public class KrazGUI extends javax.swing.JFrame {
    public KrazGUI() {
        initComponents();
        setVisible(true);
    }
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        PathOptions = new javax.swing.ButtonGroup();
        InventoryOptions = new javax.swing.ButtonGroup();
        Settings = new javax.swing.ButtonGroup();
        GameOptions = new javax.swing.ButtonGroup();
        Holder = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        EventField = new javax.swing.JTextPane();
        PathLabel = new javax.swing.JLabel();
        Left = new javax.swing.JButton();
        Right = new javax.swing.JButton();
        Middle = new javax.swing.JButton();
        InvLabel = new javax.swing.JLabel();
        PickUp = new javax.swing.JButton();
        SetDown = new javax.swing.JButton();
        Use = new javax.swing.JButton();
        SettingLabel = new javax.swing.JLabel();
        HighScores = new javax.swing.JButton();
        EditName = new javax.swing.JButton();
        EditGame = new javax.swing.JButton();
        ProgressLabel = new javax.swing.JLabel();
        ProgressBar = new javax.swing.JProgressBar();
        HealthBar = new javax.swing.JProgressBar();
        HealthLabel = new javax.swing.JLabel();
        RestartGame = new javax.swing.JButton();
        EndGame = new javax.swing.JButton();
        Exit = new javax.swing.JButton();
        GameLabel = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setAlwaysOnTop(true);
        setType(java.awt.Window.Type.POPUP);

        jScrollPane1.setViewportView(EventField);

        PathLabel.setText("Path Options:");

        Left.setText("Go Left");
        PathOptions.add(Left);

        Right.setText("Go Right");
        PathOptions.add(Right);

        Middle.setText("Go Middle");
        PathOptions.add(Middle);

        InvLabel.setText("Inventory Options:");

        PickUp.setText("Pick Up");
        InventoryOptions.add(PickUp);

        SetDown.setText("Set Down");
        InventoryOptions.add(SetDown);

        Use.setText("Use");
        InventoryOptions.add(Use);

        SettingLabel.setText("Settings:");

        HighScores.setText("High Scores");
        Settings.add(HighScores);

        EditName.setText("Edit Name");
        Settings.add(EditName);

        EditGame.setText("Edit Game");
        Settings.add(EditGame);

        ProgressLabel.setText("Progress:");

        HealthLabel.setText("Health:");

        RestartGame.setText("Restart Game");
        GameOptions.add(RestartGame);

        EndGame.setText("End Game");
        GameOptions.add(EndGame);

        Exit.setText("Exit");
        GameOptions.add(Exit);

        GameLabel.setText("Game Options:");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout HolderLayout = new javax.swing.GroupLayout(Holder);
        Holder.setLayout(HolderLayout);
        HolderLayout.setHorizontalGroup(
            HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(HolderLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(HolderLayout.createSequentialGroup()
                        .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane1, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(HolderLayout.createSequentialGroup()
                                .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(HolderLayout.createSequentialGroup()
                                        .addComponent(InvLabel)
                                        .addGap(18, 18, 18)
                                        .addComponent(PickUp)
                                        .addGap(18, 18, 18)
                                        .addComponent(SetDown)
                                        .addGap(18, 18, 18)
                                        .addComponent(Use))
                                    .addGroup(HolderLayout.createSequentialGroup()
                                        .addComponent(SettingLabel)
                                        .addGap(18, 18, 18)
                                        .addComponent(HighScores)
                                        .addGap(18, 18, 18)
                                        .addComponent(EditName)
                                        .addGap(18, 18, 18)
                                        .addComponent(EditGame))
                                    .addGroup(HolderLayout.createSequentialGroup()
                                        .addComponent(PathLabel)
                                        .addGap(18, 18, 18)
                                        .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addGroup(HolderLayout.createSequentialGroup()
                                                .addComponent(Left)
                                                .addGap(18, 18, 18)
                                                .addComponent(Right)
                                                .addGap(18, 18, 18)
                                                .addComponent(Middle)))))
                                .addGap(0, 17, Short.MAX_VALUE))
                            .addGroup(HolderLayout.createSequentialGroup()
                                .addComponent(ProgressLabel)
                                .addGap(18, 18, 18)
                                .addComponent(ProgressBar, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(HealthLabel)
                                .addGap(18, 18, 18)
                                .addComponent(HealthBar, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addContainerGap())
                    .addGroup(HolderLayout.createSequentialGroup()
                        .addComponent(GameLabel)
                        .addGap(18, 18, 18)
                        .addComponent(RestartGame)
                        .addGap(18, 18, 18)
                        .addComponent(EndGame)
                        .addGap(18, 18, 18)
                        .addComponent(Exit)
                        .addGap(0, 0, Short.MAX_VALUE))))
        );
        HolderLayout.setVerticalGroup(
            HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(HolderLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(Right)
                        .addComponent(Middle)
                        .addComponent(Left))
                    .addComponent(PathLabel))
                .addGap(18, 18, 18)
                .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(InvLabel)
                    .addComponent(PickUp)
                    .addComponent(SetDown)
                    .addComponent(Use))
                .addGap(18, 18, 18)
                .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(SettingLabel)
                    .addComponent(HighScores)
                    .addComponent(EditName)
                    .addComponent(EditGame))
                .addGap(18, 18, 18)
                .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(ProgressLabel)
                    .addComponent(ProgressBar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(HealthBar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(HealthLabel))
                .addGap(18, 18, 18)
                .addGroup(HolderLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(GameLabel)
                    .addComponent(RestartGame)
                    .addComponent(EndGame)
                    .addComponent(Exit))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(Holder, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(Holder, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        pack();
    }// </editor-fold>

    public static void main(String args[]) {
        new KrazGUI();
    }
    // Variables declaration - do not modify
    private javax.swing.JButton EditGame;
    private javax.swing.JButton EditName;
    private javax.swing.JButton EndGame;
    private javax.swing.JTextPane EventField;
    private javax.swing.JButton Exit;
    private javax.swing.JLabel GameLabel;
    private javax.swing.ButtonGroup GameOptions;
    private javax.swing.JProgressBar HealthBar;
    private javax.swing.JLabel HealthLabel;
    private javax.swing.JButton HighScores;
    private javax.swing.JPanel Holder;
    private javax.swing.JLabel InvLabel;
    private javax.swing.ButtonGroup InventoryOptions;
    private javax.swing.JButton Left;
    private javax.swing.JButton Middle;
    private javax.swing.JLabel PathLabel;
    private javax.swing.ButtonGroup PathOptions;
    private javax.swing.JButton PickUp;
    private javax.swing.JProgressBar ProgressBar;
    private javax.swing.JLabel ProgressLabel;
    private javax.swing.JButton RestartGame;
    private javax.swing.JButton Right;
    private javax.swing.JButton SetDown;
    private javax.swing.JLabel SettingLabel;
    private javax.swing.ButtonGroup Settings;
    private javax.swing.JButton Use;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    // End of variables declaration
} 
```

再次感谢这里的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:36:27.003

当我在 JDK1.6 下运行这段代码时，窗口显示得很好。虽然，我不得不注释掉下面这行 JDK1.7 API

```
setType(java.awt.Window.Type.POPUP); 
```

我认为那条线是问题所在。你把它变成了一个弹出窗口。我建议尝试使用 `Type.NORMAL`.

小旁注：您应该调整您的主要方法以触发 EDT 上的 UI 代码：

```
 public static void main(String args[]) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        new KrazGUI();
      }
    } );
  } 
```

有关原因的更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:35:15.003

**我能够在 Eclipse 中毫无问题地执行该程序。** 我的 Java 版本是**版本“1.7.0_03”** ![在此处输入图像描述](../Images/3b80f207244aacdf66ca2b376f8f633b.png)

**但是仍然遵循以下两点以获得更好的方法。**

**1.**从main方法中取出组件的声明，放到Class范围内，在类的开头。

**2.**放在`setVisible(true)`主

在主要用途中...

```
SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        Test8 t = new Test8();
        t.setVisible(true);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T17:36:45.817

我刚刚将您的代码粘贴到 Eclipse 中，它似乎正在工作（Java 7）：

![在此处输入图像描述](../Images/50be5fcd02a490f64f1f3a3decd0b015.png)

# git - git未能读取对象错误

> ID：11527755
> 
> 赞同：0
> 
> 时间：2012-07-17T17:30:46.993
> 
> 标签：git, git-svn

由于严重停电，我的电脑时不时地断电。现在，当我尝试在其中一个存储库中发出 git status 命令时，出现错误：

```
fatal: failed to read object bbf5a710cc9d8ad557355f43fafb6ec4652370da: Invalid argument 
```

我搜索这个问题，但我所有的尝试都失败了。任何人都可以帮助我，因为我需要在这个周末之前提交这个项目:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:00:40.630

我终于解决了。我刚刚添加了远程源并将其推送到远程仓库（bitbucket），然后我做了一个 git clone，一切都很好。：） 谢谢回复..

# knockout.js - 淘汰赛：计算的可观察值与函数

> ID：11527760
> 
> 赞同：55
> 
> 时间：2012-07-17T17:31:18.580
> 
> 标签：knockout.js, knockout-2.0, computed-observable

在使用淘汰赛时，使用只读计算的可观察对象而不是简单的函数有什么优势？

以下面的viewmodel构造函数和html片段为例：​</p>

```
var ViewModel = function(){
    var self = this;
    self.someProperty = ko.observable("abc");
    self.anotherProperty = ko.observable("xyz");
    self.someComputedProperty = function(){
        return self.someProperty() + self.anotherProperty();
    };    
};

<input data-bind="value: someProperty"/>
<input data-bind="value: anotherProperty"/>
<p data-bind="text: someComputedProperty()"></p> 
```

这里的一切似乎都如你所料，所以我应该改用：

```
​var ViewModel = function(){
    var self = this;
    self.someProperty = ko.observable("abc");
    self.anotherProperty = ko.observable("xyz");
    self.someComputedProperty = ko.computed(function(){
        return self.someProperty() + self.anotherProperty();
    });    
};

<input data-bind="value: someProperty"/>
<input data-bind="value: anotherProperty"/>
<p data-bind="text: someComputedProperty"></p> 
```

我注意到[http://knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)上的文档指出“......声明性绑定只是作为计算的 observables 实现”，这是否意味着我需要在我的视图模型中明确使用它们?

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-17T17:55:33.993

如果计算的 observable 的唯一目的是对其进行简单绑定，那么使用函数将是等效的。绑定在计算的可观察对象内部实现以跟踪依赖关系，因此当任何可观察对象发生更改时，它将重新触发您的绑定。

以下是关于计算的 observable 与函数需要考虑的一些事项

*   计算出的 observable 的值是缓存的，因此它仅在创建时和更新依赖项时更新。对于常规函数，您需要每次都执行逻辑。如果很多事情都依赖于该值（例如集合中的每个项目都绑定到来自父级的值），那么这个逻辑将一次又一次地运行。

*   在你的 JavaScript 中，你也可以像使用其他 observable 一样自由使用计算出的 observable。这意味着您可以针对它们创建手动订阅，并从其他计算中依赖它们（调用函数也会创建这种依赖关系）。您可以依靠 KO 中的常规实用程序方法`ko.utils.unwrapObservable`来一般确定是否需要将其作为函数调用以检索值。

*   如果最终您想将值发送到服务器，则计算出的 observable 自然会出现在您的 JSON 输出中，而作为普通函数结果的值在转换为 JSON 时只会消失（您必须做更多的工作才能首先从该函数填充一个属性）。

# c++ - C ++中的字节翻转数据仅返回零

> ID：11527763
> 
> 赞同：0
> 
> 时间：2012-07-17T17:31:43.307
> 
> 标签：c++, gcc, endianness

我在 Windows 上使用 GCC 编译器（代码块），我得到的数据来自 UNIX 机器，所以它都是大端的。我必须先把它换成小端序，然后才能使用它。我会被拦住，但我无法让它发挥作用。使用

```
temp = ntohl(fileBuf[N*i+j]); 
```

或者

```
_byteswap_ulong(fileBuf[N*i+j]); 
```

只返回零。我知道一个事实是不正确的。

传入的数据只是一串 32 位整数（美国部分地区的海拔数据）。任何帮助是极大的赞赏

编辑：这里很新，我不确定代码是否有用

```
typedef unsigned char BYTE
int main()
{
    long int temp;
    int i,j;
    ofstream myFile;
    myFile.open("fixed4.txt");
    const char *filePath = "input2";
    BYTE *fileBuf;
    FILE *file = NULL;
    if ((file = fopen(filePath, "rb"))==NULL)
       cout<< "File could not be opened successfully" << endl;
    else
        cout << "File Opened successfully" << endl;

    long fileSize = getFileSize(file);
    fileBuf = new BYTE[fileSize];
    //BYTE *flipped;
    //flipped = new BYTE[fileSize];

    fread(fileBuf, fileSize, 4, file);

    for (i=0; i<N; i+=1){
        for (j=0; j<N; j+=1){
            temp = _byteswap_ulong(fileBuf[N*i+j]);
            grid[i][j]=binaryToBase10(temp);

// more code here but it isn't important.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:39:56.127

你没有给我们太多继续，所以这是一个水晶球猜测。

的类型`fileBuf`是`char*`或`unsigned char*`。因此，您传递给的值`ntohl`是位置 (i,j) 处的*单个字节*，而不是 (i,j) 处的 32 位 int。

解决该问题的一种方法（有更好的方法）是：

```
ntohl( *(uint32_t*)&fileBuf[N*i+j] ) 
```

# objective-c - iPad 应用程序的 sskeychain 和基本身份验证教程？

> ID：11527764
> 
> 赞同：4
> 
> 时间：2012-07-17T17:31:44.390
> 
> 标签：objective-c, ios, uiwebview, basic-authentication, sskeychain

我在哪里可以找到使用[sskeychain](https://github.com/samsoffes/sskeychain)存储和检索用户名和密码以及在 UIWebView 中进行基本身份验证的详细教程？其次，就基于 Web 的应用程序存储和使用身份验证所需的方法而言，我是否走在正确的轨道上？（见下面的解释。）

我发现了一些使用不同方法的教程：

*   [直接与钥匙串交互](http://mobiledevelopertips.com/core-services/using-keychain-to-store-username-and-password.html)
*   [手工钥匙扣包装](http://www.raywenderlich.com/6475/basic-security-in-ios-5-tutorial-part-1)（原文如此）
*   [SFHFKeychainUtils](http://gorgando.com/blog/technology/iphone_development/simple-iphone-tutorial-password-management-using-the-keychain-by-using-sfhfkeychainutils)

根据以下其他 SO 问题的建议，建议使用 sskeychain 以便更轻松地使用钥匙串来存储身份验证参数。

*   [MacOS X Keychain 的 Cocoa 接口](https://stackoverflow.com/questions/9864234/cocoa-interface-to-macos-x-keychain)
*   [https://stackoverflow.com/questions/8381072/save-username-and-password-for-url-like-gmail-com-iphone](https://stackoverflow.com/questions/8381072/save-username-and-password-for-url-like-gmail-com-iphone)

我的计划是按照建议将用户名和密码本地存储在钥匙串中的设备上，并使用基本身份验证通过 UIWebView 连接到我的 PHP 代码。有经验的 iOS 开发人员推荐的关于用户身份验证主题的 xcode/Obj-C 新手的良好分步教程吗？

Apple 文档似乎没有什么帮助。它要么是带有简单销售术语的页面，要么是对方法和参数的头条式描述，没有很多有用的示例。

**更新：**

我最终只使用 NSUserDefaults 在本地存储用户名和密码，并使用 AFNetworking 库进行身份验证。如果这些不明智，我会欢迎提供更好方法指导的答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-28T10:48:04.943

使用[AFNetworking](http://afnetworking.com/)进行身份验证和调用服务器非常棒！但我强烈建议您不要将凭据（用户名和密码）存储在 中`NSUserDefaults`，因为内容以纯文本形式存储在 plist 中，只需将设备插入 Mac 即可读取。我建议您查看[这些](https://stackoverflow.com/questions/16795506/storing-authentication-tokens-on-ios-nsuserdefaults-vs-keychain) [其他](https://stackoverflow.com/questions/12712260/storing-authentication-token-on-ios) [问题](https://stackoverflow.com/questions/6972092/ios-how-to-store-username-password-within-an-app)和[一个著名案例的精彩帖子，以](http://software-security.sans.org/blog/2011/01/05/using-keychain-to-store-passwords-ios-iphone-ipad)获取有关该主题的更多详细信息。

你是对的`Keychain`，使用[SSKeychain](https://github.com/samsoffes/sskeychain/)既简单又快速。您可以找到这个关于[如何使用 SSKeychain 在本地存储凭据的](https://stackoverflow.com/questions/7663948/how-to-choose-account-and-service-values-for-sskeychain)好示例。

```
// Store credentials in Keychain
[SSKeychain setPassword:@"thePassword"
             forService:@"com.yourCompany.yourApp"
                account:@"theUserName"];

// Retrieve credentials from Keychain
NSString *password = [SSKeychain passwordForService:@"com.yourCompany.yourApp"
                                            account:@"theUserName"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T17:35:21.757

如果你想做基本的身份验证，你最好使用像 AFNetworking 这样的网络服务。他们都是您创建网络客户端，传递用户名/密码组合，其余的由他们负责。

此链接显示您需要调用的确切方法调用： [http](http://engineering.gowalla.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/setAuthorizationHeaderWithUsername:password) ://engineering.gowalla.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/setAuthorizationHeaderWithUsername:password ：

还有一个大型社区和大量开发人员在所有类型的 iOS 项目中使用 AFNetworking 的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:18:17.253

我会建议你使用

[密码箱](https://github.com/granoff/Lockbox/)

它重量轻，可与 ARC 配合使用且易于使用。

# css - 在固定高度的父 div 中包含多个子级 div

> ID：11527765
> 
> 赞同：1
> 
> 时间：2012-07-17T17:31:44.700
> 
> 标签：css, html, word-wrap

我有一个高度为 100 像素但全宽（默认）的父 div。在里面我有很多 20px x 20px 的 div。当子 div 即将到达底部时，我希望下一个开始包装。也就是说，它们应该开始显示在右侧。换句话说，我不希望滚动发生。但包装。

```
<div id="parent" style="height:100px">
   <div style="height:20px;width:20px"></div>
   <div style="height:20px;width:20px"></div>
   <div style="height:20px;width:20px"></div>
   <div style="height:20px;width:20px"></div>
   <div style="height:20px;width:20px"></div>
   <div style="height:20px;width:20px"></div>
   <div style="height:20px;width:20px"></div>
   <div style="height:20px;width:20px"></div>
   ............
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:45:26.040

您可以使用 CSS3 列 - [http://jsfiddle.net/spbqh/](http://jsfiddle.net/spbqh/)

```
#parent {
    -webkit-column-count: 3;
       -moz-column-count: 3;
            column-count: 3;

    background: #eee;
}

div > div {
    height: 20px;
    width: 20px;
    background: beige;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:52:09.157

您可以尝试使用 CSS3 列。不幸的是，我相信它们现在只能在 Firefox 和 Chrome 上运行，所以它在 IE 中不起作用。

[http://jsfiddle.net/Lf5Ma/](http://jsfiddle.net/Lf5Ma/)

```
<div id="parent">
    <div id="test">
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>

        <!-- Snip -->

        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
    </div>
</div> 
```

...和CSS：

```
#parent{
    position:relative;
    height:110px;
    width:100%;
    border:1px solid red;
}

#test{
    height:100%;

    -webkit-column-width:25px;
       -moz-column-width:25px;
            column-width:25px;    

    -webkit-column-gap:0px;
       -moz-column-gap:0px;
            column-gap:0px;
}
.child{
    width:20px;
    height:20px;
    border:1px solid #000;
} 
```

**编辑**：
我发现了一个可以工作的基于 javascript 的[列脚本。](http://www.csscripting.com/css-multi-column/)看起来您只是在样式表之后添加了 javascript，您可以继续使用新的列属性，而无需进行任何修改。我已经验证了它至少可以在 IE 9 中运行。

# solr - 如何在没有迭代的情况下在 SOLR 查询中找到特定文档的偏移量？

> ID：11527768
> 
> 赞同：0
> 
> 时间：2012-07-17T17:32:00.143
> 
> 标签：solr

我有一个看起来像这样的 solr 查询 ?q= *:* &fq=section:10&sort=modified_date+desc&start=0&rows=50 例如它有 1000000 个结果。我还知道一个文档存在于整个结果集中的事实。我不知道它存在于哪里，例如它在 1000000 个结果中的编号为 325000

有没有办法在不遍历非常大的结果集的情况下确定文档在给定查询中的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:06:28.693

您当然知道有关该文档的其他一些信息，也就是在 solr 中索引的其他一些字段中，您不能添加更多条件（q 或 fq）来缩小结果集吗？

否则，我认为没有一种方法可以帮助您在所有点击中找到给定的文档而无需迭代。

# scala - Akka - 我什么时候应该使用 Bootable 类

> ID：11527769
> 
> 赞同：3
> 
> 时间：2012-07-17T17:32:03.437
> 
> 标签：scala, akka

在 Akka 中，我可以从 main() 初始化一个 actor 系统，如下所示：

```
object HostManagerApp {
  def main(args: Array[String]) {
    val system = ActorSystem("Foo", ConfigFactory.load.getConfig("Bar"))
  }
} 
```

或者，我可以从扩展的类中做同样的事情`Bootable`。如[文档](http://doc.akka.io/api/akka/2.0/akka/kernel/Bootable.html)中所述，这也允许我从命令行启动应用程序。这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:18:29.380

它是一种使您的代码更加模块化的方法。使用 Bootable，您可以在不同的 scala 类中拥有不同的独立参与者系统，它们都独立引导，而不是将它们全部放在一个主类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T18:30:18.430

Bootable 与 Akka 微内核一起使用，如果您将 Akka 应用程序打包为 Bootable，那么您可以在同一个 ActorSystem 中运行多个应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T00:29:14.333

`Akka Microkernel`with`Bootable`自 Akka 2.4 起已弃用 - 请阅读[迁移指南以进一步解释这一点](http://doc.akka.io/docs/akka/current/project/migration-guide-2.3.x-2.4.x.html#Microkernel_is_Deprecated)。

# dynamics-crm - 使用 XRM 初始检索 xml 数据的延迟

> ID：11527772
> 
> 赞同：0
> 
> 时间：2012-07-17T17:32:11.487
> 
> 标签：dynamics-crm, dynamics-crm-4, xrm

使用 XRM 初始检索 xml 数据的延迟

我正在使用这个 xml 查询

```
 <fetch mapping='logical'>      <entity name='de_municipality'>           <order attribute='de_name' ascending='true' />            <attribute name='de_municipalityid'/>           <attribute name='de_name'/>           </entity>   </fetch>" 
```

对于 XRM 的 Fetch 方法。获得结果大约需要 10 秒（尽管实体数量有限）。

```
ResultsXml = dc.UsingService(service => (string)service.Fetch(oFetchXml.InnerXml)); 
```

这是导致延迟的代码行！！！

下次执行将在 120 毫秒内给出结果。

我已经用 CRM4 对这个查询进行了实验，所有尝试的延迟只有 200 毫秒。

任何提示或技巧或分析方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:53:03.777

我从MSDN收到了这样的回复......

嗨维努，

我们就此问题致电 Microsoft，并确认这是一个设计问题。这应该不再是 CRM 2011 的问题。

我们当前的解决方法是让 Web 应用程序尽可能长时间地使用 DataContext，因为一旦缓存了元数据，调用就不会再发生了。

小心 - DataContext 不仅缓存元数据，还缓存内容本身 - 例如属性和关系。如果您想刷新这些，您可以清除部分特定实体的缓存，如下所述：Empty CRM Client DataContext cache

亲切的问候

马库斯

* * *

Markus Wolff 高级软件开发人员 CRM 系统 Gruner & Jahr & Co. KG 德国汉堡

# html - 带有 CSS 填充和边框的 HTML 元素。想要设置边距以分隔行

> ID：11527773
> 
> 赞同：3
> 
> 时间：2012-07-17T17:32:16.167
> 
> 标签：html, css, xhtml, margin, css-tables

我有一个看起来像这样的表（在 html 中）：

```
<div id="product_grid_one">
  <table>
    <tr>
      <td>
        <div class="productimage"><img src="images/perfume.jpg" alt="Product Image" /></div>
        <div class="productdescription"><p>Perfume spray bottle</p></div>
        <div class="productprice"><p>$4.99</p></div>
      </td>                
      <td>
        <div class="productimage"><img src="images/perfume.jpg" alt="Product Image" /></div>
        <div class="productdescription"><p>Perfume spray bottle</p></div>
        <div class="productprice"><p>$4.99</p></div>
      </td>                
      <td>
        <div class="productimage"><img src="images/perfume.jpg" alt="Product Image" /></div>
        <div class="productdescription"><p>Perfume spray bottle</p></div>
        <div class="productprice"><p>$4.99</p></div>
      </td>                
      <td>
        <div class="productimage"><img src="images/perfume.jpg" alt="Product Image" /></div>
        <div class="productdescription"><p>Perfume spray bottle</p></div>
        <div class="productprice"><p>$4.99</p></div>
      </td>                
    </tr>              
  </table>
</div> 
```

这是它的CSS：

```
td { width: px; padding: 14px; border: 1px solid #c0c0c0; margin: 14px; } 
```

基本上有一排有四个单元格。每个单元格都有一个垂直堆叠的图像、产品的文本描述和产品价格。现在，在这个三件套堆栈周围，我希望我的 td 元素（我认为它可以被视为一个块）有一个 14px 的填充，我可以设置它没有问题，这样就有一个 1px 的边框距离 14px一堆图像、文本和价格。到这里都没问题。

问题是上面没有设置边距！！@

我可以设置边距：200px；仍然没有区别，边距约为 1 或 2 个像素，似乎无法改变这一点。我已经在 Firefox 13.0.1 上试过了。

那么，如何设置边距？我希望表中每个 td 之间有 14 px。

这可以通过 CSS 实现吗？

* * *

建议使用表格的 cellspacing 属性。所以我可以使用以下等效的 CSS：

```
table { border-collapse: separate; border-spacing: 14px; } 
```

但这对我没有好处，因为我希望仅在表格内应用边框间距。我不希望整个表格的两侧（左侧或右侧）有任何间距。有什么解决办法吗？

* * *

好吧，我终于能够找到解决方案。我设法用负边距解决了这个问题，以便表格在表格周围添加的边框间距（除了在各种表格数据和表格标题之间）在向左移开时不会变得可见通过使用具有负值的左边距。

```
table { border-collapse: separate; border-spacing: 13px; margin-left: -13px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:41:07.780

你能检查一下

```
.style { border-spacing: 0px; } 
```

产生什么不同？当恐龙在地球上行走时，他们使用

```
<td cellspacing="0"> 
```

但如果你今天这样做，你的同事中的某些人会打你一巴掌。如果他们这样做了，他们可能会给你一些[不推荐使用的东西](http://fantasai.tripod.com/qref/HTML4/deprecated.html)列表的链接。

# visual-studio - 如何将输出（.dll）从一个项目拉到另一个项目？

> ID：11527778
> 
> 赞同：0
> 
> 时间：2012-07-17T17:32:33.533
> 
> 标签：visual-studio, dependencies

作为更大解决方案的一部分，我有两个项目。

一个是打包为 DLL 的 c++ 库，另一个是 .NET 包装器。

向 Visual Studio 指示从第一个项目输出 DLL 的最佳方法是被拉到第二个项目的目标文件夹中，等等：对于使用包装器的项目，他们是否也会从第一个项目中获取 DLL。

我可以通过后期构建步骤来做到这一点，但我追求的是更复杂的东西。那可能吗？

编辑：我们也可以问：“如何添加非托管引用？”

![解决方案图片](../Images/c0e461af50ab8c1a9a1123c490e6e182.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:42:13.253

我想我找到了一个解决方案，这可能是令人满意的......

脚步：

*   在包装器项目中，我将添加一个现在存在于 LIBRARY 的输出目录中的 DLL。任何配置都可以。
*   包装器项目的预构建步骤应复制当前配置为直接构建到源目录中的库的输出
*   该文件的选项将是“不构建”和“如果较新则复制到输出目录”
*   在版本控制中，该文件将被版本控制忽略（我使用 svn，希望其他人也可以）。

# java - 使用 JUnit 测试 void 方法

> ID：11527782
> 
> 赞同：0
> 
> 时间：2012-07-17T17:32:37.863
> 
> 标签：java, testing, junit

假设我有一堂像这样的课：

```
public class MyClass {

   private int var1;
   private int var2;

   public MyClass() {
      var1 = 0;
      var2 = 0;
   }

   public void setVariables() {
      var1 = 1;
      var2 = 1;
   } 
```

我的班级中没有任何 getter 方法。

有没有办法用 JUnit 测试像 setVariables() 这样的 void 方法？如何在不直接访问变量值的情况下检查其行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:36:36.307

由于这种方法没有（从外部）可见的副作用，我可能不会对其进行测试。

据推测，您设置这些变量的事实会对其他方法产生副作用。在那里您可以测试其他方法是否按预期执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:35:52.753

您可以使用反射来访问变量，在 groovy 中编写测试用例，这允许您动态添加 getter 方法，您可以使用某种 AOP（cglib，aspectJ）来测试该方法是否被调用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:51:02.060

您示例中的 setVariables 太简单而无法测试。如果您的真实方法有任何可见的效果（非私有状态），则测试该状态。如果状态是私有的，但对其他方法有影响，则将此方法与其他方法一起测试。如果你觉得 setVariables 太复杂了，应该单独测试，然后测试它。但请记住：在这个阶段您正在测试实现，而不是外部合同 - 当您更改实现时，您将不得不更改您的测试。如果你想这样做，我建议让 var1 和 var2 包可见 - 这对于测试非常方便。如果他们必须保持私有，那么唯一的解决方案是反射和像 whiteBox 这样的库

# objective-c - 在我的应用中处理 appDelegate

> ID：11527786
> 
> 赞同：1
> 
> 时间：2012-07-17T17:32:57.660
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我是 iOS 应用程序开发的新手，我的第一个应用程序的开发工作已接近完成。所以现在开始收尾工作，其中包括我的应用程序在达到某些事件或状态时应该如何表现。我知道处理此类任务的代码，`appDelegate.m`但我对我实际上应该做什么感到有点困惑。我的应用程序很简单，它会在按下按钮时触发带有声音的动画，并且我希望在用户点击主页按钮后立即停止声音。我试过这个但徒劳无功：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    finalViewController.AudioServicesDisposeSystemSoundID(soundID)
} 
```

此外，当我按两次主页按钮标志并尝试关闭我的应用程序时，我的应用程序也会崩溃。它给了我`'signal SIGABRT'`错误`main.m`。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:11:41.290

使用给定的代码片段来停止声音并访问`soundId`您传入的声音`AudioServicesPlaySystemSound(soundID)`。您可以在播放系统声音时创建`soundId`变量`appDelegate`并保存。`soundId`

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    AudioServicesDisposeSystemSoundID(soundID)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:54:27.563

你说你得到一个错误，比如：

> 使用未声明的标识符 soundID

如果`soundID`是您的应用程序委托的属性，您应该使用属性表示法访问它，例如：

```
self.soundID 
```

或者：

```
[self soundID] 
```

“未声明的标识符”意味着当你说`soundID`. 支持该属性的实例变量可能具有不同的名称（如`_soundID`），因此`soundID`不引用 ivar 本身，它只是属性名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:41:23.677

尝试在此处执行此操作：

`- (void)applicationWillResignActive:(UIApplication *)application{}`

或者可能

`- (void)applicationWillTerminate:(UIApplication *)application{}`

# excel - 如果 B 列中的值 = 特定文本，则将特定文本插入 A 列中的值

> ID：11527787
> 
> 赞同：0
> 
> 时间：2012-07-17T17:32:58.470
> 
> 标签：excel

简单地说 - 如果 B 列中的任何单元格包含`thisvalue`，那么将附加到 A 列中的相邻单元格上`sometext`。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:35:36.883

一个简单的 if 语句。例如：

```
=IF(ISNUMBER(SEARCH(thisvalue, B1)), sometext, "") 
```

编辑： ISNUMBER(SEARCH(thisvalue, B1)) 在 B1 中搜索 thisvalue，如果找到，则返回一个数字（该数字是 B1 中 thisvalue 的起始索引）。

编辑#2：要将插入的值附加到单元格 A 中当前值的末尾，请使用 CONCATENATE 公式。

例子：

```
=CONCATENATE(A1, sometext) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:36:14.883

~~将此公式放入 A1 中，然后根据需要向下拖动：~~

 ~~```
=IF(B1="thisvalue","sometext","") 
```~~  ~~**编辑**

使用 Visual Basic 编辑器，您可以像这样更新单元格 A 的内容：

```
Private Sub UpdateColumnA()
    Dim x As Long
    For x = 1 To 65536
        If InStr(1, Sheet1.Range("$B$" & x), "thisvalue") > 0 Then
            Sheet1.Range("$A$" & x) = Sheet1.Range("$A$" & x) & "sometext"
        End If
    Next
End Sub 
```

然而，宏的重复运行将再次附加文本；如果您不希望发生这种情况，您将需要更多验证代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T19:10:11.163

我想我有你要找的东西，如果你仍然感兴趣，如果你想让我进一步详细说明，请告诉我。单元格 F2 中的这个公式： =IF(ISNUMBER(SEARCH($U$2,E:E)),$V$2,"")&IF(ISNUMBER(SEARCH($U$3,E:E)),$V$3, "")&... 您在 E:E 列的所有单元格中搜索您在 U2 中指定的值，如果找到匹配项，则会附加您在 V2 中指定的值。要搜索分配相应值的多个单词，只需按照您喜欢的方式连接即可。我能够指定数百个单词（和相应的值）。我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T17:49:40.947

考虑到您在 B 中有值，复制粘贴到 A1

```
=IF(ISNA(VLOOKUP("thisvalue",B:B,1,FALSE)),"",VLOOKUP("thisvalue",B:B,1,FALSE)&"ADDITIONAL VALUE") 
```

它是说：如果 vlookup 的值为空（如果查找不返回任何内容），则显示空值（双引号）但如果查找的值返回某些内容，则执行此查找并将“附加值”文本附加到找到的结果~~

# database - flyway 迁移是否支持 PostgreSQL 的 COPY？

> ID：11527788
> 
> 赞同：8
> 
> 时间：2012-07-17T17:32:59.617
> 
> 标签：database, postgresql, flyway

在执行了现有 posgresql 模式的 pg_dump 之后，我有一个 sql 文件，其中包含许多使用副本的表填充语句。

```
COPY test_table (id, itm, factor, created_timestamp, updated_timestamp, updated_by_user, version) FROM stdin;
1   600 0.000   2012-07-17 18:12:42.360828  2012-07-17 18:12:42.360828  system  0
2   700 0.000   2012-07-17 18:12:42.360828  2012-07-17 18:12:42.360828  system  0
\. 
```

虽然不是标准的，但这是 PostgreSQL 的 PLSQL 实现的一部分。

执行 flyway 迁移（通过 maven 插件）我得到：

```
[ERROR] Caused by org.postgresql.util.PSQLException: ERROR: unexpected message type 0x50 during COPY from stein 
```

我做错了什么，还是不支持？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T09:15:27.467

简短的回答是**否定**的。

一个明确的问题是解析器当前无法处理这种特殊结构。

另一个问题是**jdbc 驱动程序支持**。您能否尝试通过单个 createStatement 调用查看 jdbc 驱动程序是否普遍支持此语法？

如果是，请在问题跟踪器中提交问题，我将扩展解析器。

**更新：**现在支持

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-19T15:51:47.593

我已经使用 Postgres 完成了这个

```
public abstract class SeedData implements JdbcMigration {

    protected static final String CSV_COPY_STRING = "COPY %s(%s) FROM STDIN HEADER DELIMITER ',' CSV ENCODING 'UTF-8'";

    protected CopyManager copyManager;

    @Override
    public void migrate(Connection connection) throws Exception {
        log.info(String.format("[%s] Populating database with seed data", getClass().getName()));
        copyManager = new CopyManager((BaseConnection) connection);

        Resource[] resources = scanForResources();

        List<Resource> res = Arrays.asList(resources);
        for (Resource resource : res) {
            load(resource);
        }
    }

    private void load(Resource resource) throws SQLException, IOException {
        String location = resource.getLocation();

        InputStream inputStream = getClass().getClassLoader().getResourceAsStream(location);
        if (inputStream == null) {
            throw new FlywayException("Failure to load seed data. Unable to load from location: " + location);
        }
        if (!inputStream.markSupported()) {
            // Sanity check. We have to be able to mark the stream.
            throw new FlywayException(
                    "Failure to load seed data as mark is not supported. Unable to load from location: " + location);
        }
        // set our mark to something big
        inputStream.mark(1 << 32);

        String filename = resource.getFilename();
        // Strip the prefix (e.g. 01_) and the file extension (e.g. .csv)
        String table = filename.substring(3, filename.length() - 4);
        String columns = loadCsvHeader(location, inputStream);

        // reset to the mark
        inputStream.reset();

        // Use Postgres COPY command to bring it in
        long result = copyManager.copyIn(String.format(CSV_COPY_STRING, table, columns), inputStream);
        log.info(format("   %s - Inserted %d rows", location, result));
    }

    private String loadCsvHeader(String location, InputStream inputStream) {
        try {
            return new BufferedReader(new InputStreamReader(inputStream)).readLine();
        } catch (IOException e) {
            throw new FlywayException("Failure to load seed data. Unable to load from location: " + location, e);
        }
    }

    private Resource[] scanForResources() throws IOException {
        return new ClassPathScanner(getClass().getClassLoader()).scanForResources(getSeedDataLocation(), "", ".csv");
    }

    protected String getSeedDataLocation() {
        return getClass().getPackage().getName().replace('.', '/');
    }

} 
```

使用适当的类路径实现类

```
package db.devSeedData.dev;

public class v0_90__seed extends db.devSeedData.v0_90__seed {
} 
```

所需要做的就是在 db/devSeedData 下的类路径中包含格式为 01_tablename.csv 的 CSV 文件。列是从 CSV 的标题行中提取的。

# python - 如何清理来自索引的字符串

> ID：11527793
> 
> 赞同：-1
> 
> 时间：2012-07-17T17:33:20.147
> 
> 标签：python, string

我正在从字符串中提取值，但在删除某些字符时遇到问题。

```
Mandrake 9.2 (32 bit) 
```

我从中提取的索引返回，但我想删除（32位），它的长度和位置因文件中的行而异。我使用 [0:-8] 但问题是字符串的差异，所以我在我的代码中尝试了这个

```
lines = re.sub(' [\d.]*', ' ', plines2) 
```

但没有成功。

更多行：

红帽 7.3（32 位）

```
Redhat 8.0 (32bit)
Mac OS X 10.4
Home Premium (32bit)
Linux Ubuntu Desktop 9.10
Linux Ubuntu Desktop 9.10 
```

它们各不相同，我希望能够删除 32 位部分以及版本，以便只有产品名称存在，它并不出现在所有行上，如您所见，有些带有版本和位版本，但有些只有一个或其他。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:38:49.847

这是你想要的吗？

```
import re
ss = 'Mandrake 9.2 (32 bit)'
new_line = re.sub(r'\(.*?\)','',ss)  #'Mandrake 9.2 ' 
```

请注意，这仅在您保证在一行上有一组匹配的括号时才有效...

稍作改动，我们就可以让它与您上面的所有东西一起工作：

```
new_line = re.sub(r'(?:\d+(?:\.\d+)*\s*)?(?:\(.*?\))?','',ss) 
```

这将匹配版本字符串`number.number.number...`它还将匹配括号内的任何内容（包括在内）。每个匹配项都将从行中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:39:01.610

```
>>> import re
>>> line = "Mandrake 9.2 (32 bit)"
>>> re.sub('\(\d.*\)','',line)
'Mandrake 9.2 ' 
```

如果要删除尾随和前导空格

```
newstring.strip() 
```

例如

```
>>> 'Mandrake 9.2 '.strip()
'Mandrake 9.2' 
```

# objective-c - iOS排队上传任务

> ID：11527794
> 
> 赞同：0
> 
> 时间：2012-07-17T17:33:21.333
> 
> 标签：objective-c, ios, multithreading, queue, nsoperationqueue

在 iOS 中，我需要调用相同的方法次数，但应用程序必须等到方法完成它的第一个任务。（我不能使用 bool 值来检查函数是否正在运行）。

如何将请求排队或等到上一个任务完成？有没有办法可以使用 NSOperation 或 NSThread？

谢谢

这是我需要多次调用的方法

```
- (void)fetchJobs
{

    dispatch_queue_t queueLocal = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_group_t groupLocal = dispatch_group_create();

    UIApplication *app = [UIApplication sharedApplication];

    NSTimeInterval backgroundTime = app.backgroundTimeRemaining;
    NSLog(@"Background task remain time: %g seconds", (double)backgroundTime);

    [[NSNotificationCenter defaultCenter] postNotificationName:@"UPLOAD_PROCESS_START" object:nil];

    self.assetUpdateTaskID = [app beginBackgroundTaskWithExpirationHandler:^{
        dispatch_async(dispatch_get_main_queue(), ^{

            [self endTask];
        }); 
    }];

    dispatch_group_async(groupLocal, queueLocal, ^{

        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Files" inManagedObjectContext:self.managedObjectContext];

        //Setup the fetch request
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        [request setEntity:entity];

        NSPredicate *predicate = [NSPredicate predicateWithFormat: @"uploaded like %@", [NSString stringWithFormat:@"0"]];
        [request setPredicate:predicate];

        NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:YES];
        [request setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];

        NSError *error = nil;

        //fetch the records and handle an error
        NSArray *fetchResults = [self.managedObjectContext executeFetchRequest:request error:&error];

        if (fetchResults == nil) {
            NSLog(@"File Data fetching error : %@", [error localizedDescription]);
        }
        else{
            if ([fetchResults count] > 0) {            

                dispatch_apply([fetchResults count], queue, ^(size_t i){
                    NSLog(@"Loop count %zu", i);

                    Files *file = [fetchResults objectAtIndex:i]; 
                    self.manageObjectForFiles = file;
                    NSLog(@"Fetched File details -> Name: %@ & status: %@" , file.fileName, file.uploaded);                    

                    BOOL uploaded = [self filePosting:file.fileName];

                    if (uploaded) {

                        [self.managedObjectContext deleteObject:file];
                        NSError *error;

                        if (![self.managedObjectContext save:&error]) {
                            NSLog(@"File table update error : %@", [error description]);
                        }
                    }                     

                });
                /*
                for (int i = 0; i < [fetchResults count]; i++) {                    

                }*/
            }            
        }

        dispatch_async(dispatch_get_main_queue(), ^{

            [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

            int remainJobs = [self fetchFileTableCount];
            if (remainJobs > 0) {

                [UIApplication sharedApplication].applicationIconBadgeNumber = remainJobs;
                [[NSNotificationCenter defaultCenter] postNotificationName:@"UPLOAD_REMAIN" object:nil];
            }
            else{
                [UIApplication sharedApplication].applicationIconBadgeNumber = 0;
                [[NSNotificationCenter defaultCenter] postNotificationName:@"UPLOAD_PROCESS_COMPLETED" object:nil];
                NSLog(@"-----------------------------------------------");
                NSLog(@"There are no more uploads");
                NSLog(@"-----------------------------------------------");
            }
            [self endTask];                                    

        });

    });

    dispatch_release(groupLocal);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:47:04.640

您没有说调用是否必须是串行的，或者它们是否可以并发。如果并发，您可以使用 NSOperation 的 mainQueue，挂起它，添加除第一个调用之外的所有内容，然后在您的方法中，最后查看队列是否挂起，如果是，则恢复它。

使用 Grand Central Dispatch (CGD)，您可以更轻松地创建串行调度队列，并做同样的事情 - 挂起它，添加除第一个调用之外的所有调用，然后在第一个调用结束时取消挂起队列。如果您需要它在主线程上运行，您可以将串行队列绑定到主 GCD 队列。

# visual-studio-2010 - AnkhSVN - 源 URL 和目标 URL 似乎没有指向同一个存储库

> ID：11527796
> 
> 赞同：6
> 
> 时间：2012-07-17T17:33:24.693
> 
> 标签：visual-studio-2010, svn, ankhsvn

我正在尝试使用 VS 2010 SP1 和 AnkhSVN 2.3.11269（最新版本）来分支解决方案。

这导致：

> SharpSvn.SvnUnsupportedFeatureException：源和目标 URL 似乎没有指向同一个存储库。

我的来源网址：

> svn+ssh://svn@MyCompany.SomeSvnProvider.com/MyCompany/MyProject/

AnkhSVN 建议以下分支 URL：

> svn+ssh://svn@MyCompany.SomeSvnProvider.com/branches/

值得注意的是，源 URL 包含 MyCompany 和 MyProject，而建议的分支 URL 两者都不包含。

我怎样才能成功分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:59:35.757

事实证明，AnkhSVN 建议的 URL 是错误的。正确的网址是

> svn+ssh://svn@MyCompany.SomeSvnProvider.com/MyCompany/MyProject/branches/

# php - 查询两个日期之间

> ID：11527801
> 
> 赞同：-1
> 
> 时间：2012-07-17T17:33:54.937
> 
> 标签：php, mysql, date

```
SELECT product.pname,stock.pid,stock.qty,stock.rate
FROM product,stock
WHERE (date BETWEEN '2012-04-10' AND '2012-07-16') AND product.pid=stock.pid 
```

这是我的 sql 查询，但问题是当执行此查询时，它显示单个结果意味着我的产品表包含 pid 和 pname，而库存表包含 pid、rate、qty 和 date。

我想显示两个日期之间的记录。
我的查询与两条记录匹配。但是当我添加“AND product.pid=stock.pid”时，它只显示 1 条记录。
我想根据库存表的 pid 从产品表中显示产品名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:51:52.903

您的选择标准 WHERE（[stock.]date BETWEEN '2012-04-10' AND '2012-07-16'）使其有效地成为 RIGHT JOIN，只有在日期范围内有/有股票的记录才会显示。如果您想显示所有产品而不考虑库存，则需要将 OR [stock.]date IS NULL 添加到您的选择标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:38:42.913

可能有些产品没有库存。另外，我建议您像这样进行 JOIN：

```
SELECT product.pname,stock.pid,stock.qty,stock.rate
FROM product
LEFT JOIN
stock
ON product.pid=stock.pid
WHERE (date BETWEEN '2012-04-10' AND '2012-07-16') 
```

我使用 LEFT JOIN 表示无论有无库存都返回产品，我认为通过此查询，您将获得两行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:38:47.723

首先尝试让它在没有加入的情况下工作：

```
SELECT stock.pid, stock.qty, stock.rate
FROM stock
WHERE stock.date BETWEEN '2012-04-10' AND '2012-07-16' 
```

如果可行，则使用外部连接将信息添加到每一行而不删除任何行。

```
SELECT product.pname, stock.pid, stock.qty, stock.rate
FROM stock
LEFT JOIN product ON product.pid=stock.pid
WHERE stock.date BETWEEN '2012-04-10' AND '2012-07-16' 
```

如果没有找到产品，产品名称将为 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T17:41:23.753

试试下面的查询。

```
SELECT product.pname,stock.pid,stock.qty,stock.rate
FROM product,stock
WHERE stock.date BETWEEN '2012-04-10' AND '2012-07-16' AND product.pid=stock.pid 
```

# c# - 自动 PDF 提取 - 索引和长度必须引用字符串中的位置

> ID：11527802
> 
> 赞同：2
> 
> 时间：2012-07-17T17:34:02.697
> 
> 标签：c#, pdf, extraction

我继承了一个每天作为计划任务运行的程序，它需要一个 400 多页的 PDF 患者数据报告，并将其拆分为各个患者帐户。然后，一旦它被拆分，它会将每个文件排队以上传到文件存储库中。

通常，它完全无需任何人工交互即可运行，但今天它开始在 PDF 拆分的页面上崩溃，在本例中为 pg 91-92。所以我从主 PDF 中完全提取并删除了这两个页面。重新运行程序，它在第 87-88 页比以前更早地崩溃了。

我在这里很困惑。

这是错误：

```
Unhandled Exception: System.ArgumentOutOfRangeException: Index and length must refer to a location within the string.
Parameter name: length 
at System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolen fAlwaysCopy)
at System.String.Substring(Int32 startIndex, Int32 length)
at _24HrSumm.Program.validRoom(String strRoom)
at _24HrSumm.Program.Main(String[] args) 
```

我完全不会与程序员混淆，我一直在查看 PDF 本身，试图根据我在 Visual Studio 中阅读的代码来查看挂起这个程序的内容，但我找不到无效的房间号，我认为这会使程序崩溃。我只是完全关闭了吗？

感谢您的阅读以及任何想法或帮助！

# asp.net-mvc - 将下拉列表中的 SelectedItem 绑定到 MVC 4 中的模型对象

> ID：11527804
> 
> 赞同：4
> 
> 时间：2012-07-17T17:34:08.400
> 
> 标签：asp.net-mvc

我对 MVC 很陌生，所以请耐心等待，但在 MVC 4 的回发期间，我似乎无法将 SelectList 中的值绑定到所选对象的实例。

假设我必须创建一个教师作为学校的成员。我有一个这样定义的 ViewModel 类：

```
public class RegisterTeacherModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [Display(Name = "School")]
    public School SelectedSchool { get; set; }

    [ScaffoldColumn(false)]
    public Guid UserId
    {
        get;
        set;
    }

    public SelectList PossibleSchools
    {
        get;
        private set;
    }

    public RegisterTeacherModel(IRepository<School> schoolRepo)
    {
        PossibleSchools = new SelectList(schoolRepo, "Id", "Name");
    }
} 
```

我的观点：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>RegisterTeacherModel</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.UserName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Email)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Email)
        @Html.ValidationMessageFor(model => model.Email)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.SelectedSchool)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.SelectedSchool, Model.PossibleSchools)
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

最后，我的 Controller 方法：

```
 [HttpPost, ActionName("Create")]
    public ActionResult CreateTeacher(RegisterTeacherModel teacherModel)
    {
        if (ModelState.IsValid)
        {
            try
            {
              ...
            }
         }
    } 
```

但是，当我在 Controller 的 Create 方法中收到 RegisterTeacherModel 对象时，SelectedSchool 始终为空。我必须在模型绑定器在回发时重新创建对象引用的方式上遗漏了一些东西。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:50:51.510

我认为您在第二篇文章中提到了它：尝试将初始代码指向 Model.SelectedSchool。`<IdProperty>`

```
<div class="editor-field">
  @Html.DropDownListFor(model => model.SelectedSchool.**<IdProperty>**, Model.PossibleSchools)
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T17:54:36.377

好吧，我找到了解决方法。我仍然不知道我是否遗漏了什么，但我没有在 ViewModel 中使用 School 对象，而是将其替换为 SelectedSchoolId ：

```
public class RegisterTeacherModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [Display(Name = "School")]
    public int SelectedSchoolId { get; set; }

    ...
} 
```

并更改我的视图下拉列表以使用它：

```
<div class="editor-field">
    @Html.DropDownListFor(model => model.SelectedSchoolId, Model.PossibleSchools)
</div> 
```

然后在我的控制器中，当创建真实的模型对象时，我可以简单地从 School 存储库中提取 School 对象并将其与真实的 Teacher 对象相关联。

# c# - 当电话号码的现有格式不一致时，如何使电话号码漂亮/用户友好？

> ID：11527806
> 
> 赞同：2
> 
> 时间：2012-07-17T17:34:14.187
> 
> 标签：c#, winforms, data-binding, formatting

我将一个文本框绑定到一个类的成员，我需要调整电话号码的外观，以便更容易阅读（用户不想看到诸如“1234567890”或“+01234567890”之类的值）。所以，我有这个代码：

```
var bindingPhone = new Binding("Text", platypusInfo, "Phone1", true);
bindingPhone.Format += phoneBinding_Format;
textBoxPhoneNum1.DataBindings.Add(bindingPhone);

...

private void phoneBinding_Format(object sender, ConvertEventArgs e) {
    e.Value = ??How can I deal with this??
} 
```

但是电话值，虽然*通常*“NNNNNNNNNN”（例如“1234567890”）或“+NNNNNNNNNN”（例如“+01234567890”）也可以出现在许多其他排列中，例如：

```
 (NN) NNNN NNNN
++NNNNNNNNNNNNN
+NNNNNNNNNNNNN
+NN NNNNNNNNNNN
NNNNNNNNNNNN 
```

我可以在 phoneBinding_Format() 中做些什么来使这些电话号码更易于阅读，而不会将它们分成无意义的部分，例如“43-4859-4365”而不是“434-859-4365”？

## 更新

由于这些因素：

1）我同时在做几个项目，需要回到另一个项目 2）我们的两种最常见的格式占我们电话号码的最大份额 3）这只是一个“不错的功能”而不是“必须拥有”特征

...根据 Jon Skeet 的回答，我现在已经确定了以下内容：

```
private void phoneBinding_Format(object sender, ConvertEventArgs e)
{
    const int UK_PHONE_LEN = 9;                     // +NNNNNNNN 
     const int US_PHONE_FORMAT_LEN = 10;             // NNNNNNNNNN
    const int COMMON_INTERNATIONAL_FORMAT_LEN = 12; //+NNNNNNNNNNN 

    string phone;
    string area;
    string major;
    string minor;
    string intl_firstsegment;
    string intl_secondsegment;
    string intl_thirdsegment;
    string intl_fourthsegment;
    string intl_fifthsegment;

    if (e.Value.ToString().Length == US_PHONE_FORMAT_LEN)
    {
        phone = e.Value.ToString();
        area = phone.Substring(0, 3);
        major = phone.Substring(3, 3);
        minor = phone.Substring(6);
        e.Value = string.Format("{0}-{1}-{2}", area, major, minor); 
    } 
else if ((e.Value.ToString().Length == UK_PHONE_LEN) && (e.Value.ToString()[0] == '+')) {
    phone = e.Value.ToString();
    intl_firstsegment = phone.Substring(0, 2);
    intl_secondsegment = phone.Substring(2, 3);
    intl_thirdsegment = phone.Substring(5);
    e.Value = string.Format("+{0}-{1}-{2}", intl_firstsegment, intl_secondsegment, intl_thirdsegment);
} 
else if ((e.Value.ToString().Length == COMMON_INTERNATIONAL_PHONE_LEN) && (e.Value.ToString()[0] == '+')) 
    {
        phone = e.Value.ToString();
        intl_firstsegment = phone.Substring(0, 2);
        intl_secondsegment = phone.Substring(2, 2);
        intl_thirdsegment = phone.Substring(4, 3);
        intl_fourthsegment = phone.Substring(7, 2);
        intl_fifthsegment = phone.Substring(9);
        e.Value = string.Format("+{0}-{1}-{2}-{3}-{4}", intl_firstsegment, intl_secondsegment, intl_thirdsegment, intl_fourthsegment, intl_fifthsegment);
    }
} 
```

顺便说一句，在断点必杀技的路上发生了一件有趣的事情：我最初将这些测试（第一个字符是加号，长度是预期的）颠倒过来，得到：*System.IndexOutOfRangeException 未被用户代码处理 Message=Index 在数组的边界。*

反转条件以便首先检查长度（当长度为 0/字符串为空时自然不会失败）修复它（此后不再尝试访问 char 0）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T17:44:40.020

如果您想支持除美国（以及与美国 100% 兼容的加拿大）号码之外的国际电话号码， Google 的[LibPhoneNumber](https://code.google.com/p/libphonenumber/)可能正是您所需要的。

> Google 的通用 Java、C++ 和 Javascript 库，用于解析、格式化、存储和验证国际电话号码。Java 版本针对在智能手机上运行进行了优化，自 4.0（Ice Cream Sandwich）起就被 Android 框架使用。

从 C# 使用它：

[http://blog.thekieners.com/2011/06/06/using-googles-libphonenumber-in-microsoft-net-with-c/](http://blog.thekieners.com/2011/06/06/using-googles-libphonenumber-in-microsoft-net-with-c/)

C# 端口

[https://bitbucket.org/pmezard/libphonenumber-csharp/wiki/Home](https://bitbucket.org/pmezard/libphonenumber-csharp/wiki/Home)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:38:37.437

最简单的方法是在应用格式之前从字符串中删除所有非数字字符和空格。

[http://msdn.microsoft.com/en-us/library/844skk0h.aspx](http://msdn.microsoft.com/en-us/library/844skk0h.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T17:38:01.897

有趣的代码片段[在这里](http://www.dreamincode.net/code/snippet1487.htm)。可用于在显示电话号码之前对其进行美化。

```
Input: xxxxxxxxxx or xxx-xxx-xxxx or (xxx) xxx-xxxx, Output: (xxx) xxx-xxxx 
```

**代码**：

```
private string formatPhoneNumber(string number) {
    System.Text.RegularExpressions.Regex pattern = new System.Text.RegularExpressions.Regex("^\\(?([1-9]\\d{2})\\)?\\D*?([1-9]\\d{2})\\D*?(\\d{4})$");
    Match re = Regex.Match(number, pattern.ToString());
    return "(" + Convert.ToString(re.Groups[1]) + ") " + Convert.ToString(re.Groups[2]) + "-" + Convert.ToString(re.Groups[3]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T17:38:15.737

我个人会指定只允许数字电话号码（这意味着用户可能不会输入电话号码，如 1-800-FLOWERS），然后在格式化之前去除所有非数字字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T18:20:53.810

我得到的是，您有以十位字符格式（“1234567890”）存储的数字，没有格式化，但现在您需要添加格式以使数字更具可读性，而不会使数字对于该数字所在的国家/地区无意义由于不同国家/地区对号码的默认格式不同，区号、中心局和用户的 (ACD) COX-SUBS 的 NANPA 系统并不总是适用。

我的建议是维护一个电话号码掩码表或字典，然后使用 MaskedTextBox 并将号码和掩码绑定到联系人对象中的数据。

例如，电话掩码 ID 1 可能用于 NANPA 号码：“000-000-0000”。电话掩码 ID 2 可能用于伦敦地铁号码，为“\000 0000 0000”（前导数字始终为零，从国外拨打电话时应省略）。ID 3 可能用于法国电话号码：“00 00 00 00 00”。您可以在对象上指定一个“仅获取”属性，该属性将向文本框提供实际的掩码字符串，并绑定一个不同的控件（可能是下拉菜单），用户可以选择以正确的格式显示数字（您可以保存以供该联系人以后使用）。大多数情况下，您可以根据国家/地区进行猜测，但情况并非总是如此。

了解您将需要很多口罩，而且它们并不总是十位数。虽然 NANPA 系统相对一致，但英国的电话号码却一团糟；地理区号是可变长度的，总数可以是十位或十一位，因此根据地理区号，英国号码有六种不同的掩码。在墨西哥，区号可​​以是两位或三位，总数为十位。法国电话号码是十位数字，每两个一组。此外，要拨打的实际数字组合取决于您从哪里拨打电话；如果呼叫始终来自美国，许多欧洲号码系统会放弃用于国内呼叫的前导零，而是拨打国家/地区代码。

# matlab - 前导输入必须是数字。MATLAB

> ID：11527811
> 
> 赞同：1
> 
> 时间：2012-07-17T17:34:56.097
> 
> 标签：matlab, cluster-analysis, fuzzy

我收到一个使用 FCM 无法理解的错误。

[如果我设置文档](http://www.mathworks.co.uk/help/toolbox/fuzzy/fcm.html)中提到的选项，它会输出此错误：

```
??? Error using ==> zeros
Leading inputs must be numeric.

Error in ==> fcm at 83
obj_fcn = zeros(max_iter, 1);   % Array for objective function

Error in ==> fcm at 82
      [centers, U, objFun] = fcm(data, 6, 'options'); 
```

如果我删除代码运行正常的选项，这里是完整的代码：

```
 [centers, U, objFun] = fcm(data, 6, 'options');
  plot(data(:,1), data(:,2),'o');
  maxU = max(U);
  index1 = find(U(1, :) == maxU);
  index2 = find(U(2, :) == maxU);
  line(data(index1,1),data(index1, 2),'linestyle','none',...
 'marker','*','color','g');
  line(data(index2,1),data(index2, 2),'linestyle','none',...
 'marker', '*','color','r'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:51:25.673

问题是`fcm`期望接收选项*数组*，而不是字符串。你正在通过`'options'`，但相反，你应该做这样的事情：

```
options(1) = 2.0;
options(2) = 100;
options(3) = 1e-5;
options(4) = 1;
[centers, U, objFun] = fcm(data, 6, options); % notice no quotes! 
```

我正在使用`fcm`文档中指定的默认值。您可以将它们更改为您喜欢的任何内容。

或者，文档指定如果您想要默认值，您可以将选项设置为`NaN`，因此请随意为您想要默认值的任何选项执行此操作。

# java - 使用 FlowLayout 或 BorderLayout 居中组件（并在调整大小后保持居中）

> ID：11527813
> 
> 赞同：1
> 
> 时间：2012-07-17T17:35:01.520
> 
> 标签：java, swing, layout-manager, flowlayout, center-align

我有一个 BoxLayout 面板，它有一些从上到下的组件，我希望它在内容窗格中居中（垂直和水平），这样当我最大化窗口时，这个内部面板仍将保持在其中心。

我已经设法使用 BoxLayout 和/或 GridBagLayout 来做到这一点，但是由于我正在尝试使用 Swing，我想知道是否可以通过使用 FlowLayout 或 BorderLayout 作为内容窗格的布局管理器来做同样的事情。我找不到办法……当我最大化框架时，内部面板保持水平居中但不是垂直居中（它卡在顶部）。

可以用这 2 个布局管理器来完成，还是我在浪费时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:08:40.787

FlowLayout 在组件顶部启动它的组件位置。您可以更改水平锚点。BorderLayout 有 5 个可用于布局组件的位置，一个将占据最大可用空间的中心位置，以及外边缘周围的 4 个位置。

通过将组件放置在中心位置，您可以有效地以大陆的垂直和水平位置为中心，但组件将调整大小以填充剩余空间

# java - JAVA通过json发送/接收信息

> ID：11527814
> 
> 赞同：1
> 
> 时间：2012-07-17T17:35:03.633
> 
> 标签：java, json

在过去的 3 天里，我一直在研究如何通过 json 向 url 发送和接收信息。我找到了很多关于如何做到这一点的文档和代码示例，我只是无法理解他们在说什么。我已经将天知道有多少 .jar 文件导入到我的 eclipse 包中。有没有人有一个很好的例子来说明如何连接到一个 url、发送/接收信息（甚至登录）、解析它并发送更多信息？我明白我要求很多。我不需要所有的答案，好的文档和一些好的例子会让我很开心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:05:20.313

[从http://hc.apache.org/](http://hc.apache.org/)开始， 然后查看[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/) 或：[http ://wiki.fasterxml.com/JacksonHome](http://wiki.fasterxml.com/JacksonHome)

这应该就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T20:24:28.010

在这个博客上找到了一个非常可靠的例子[http://www.gnovus.com/blog/programming/making-http-post-request-json-using-apaches-httpclient](http://www.gnovus.com/blog/programming/making-http-post-request-json-using-apaches-httpclient)

如果由于某种原因链接不起作用，请粘贴在下面。

```
public class SimpleHTTPPOSTRequester {

private String apiusername;
private String apipassword;
private String apiURL;

public SimpleHTTPPOSTRequester(String apiusername, String apipassword, String apiURL) {        
    this.apiURL = apiURL;
    this.apiusername = apiusername;
    this.apipassword = apipassword;
}

public void makeHTTPPOSTRequest() {
    try {
        HttpClient c = new DefaultHttpClient();        
        HttpPost p = new HttpPost(this.apiURL);        

        p.setEntity(new StringEntity("{\"username\":\"" + this.apiusername + "\",\"password\":\"" + this.apipassword + "\"}", 
                         ContentType.create("application/json")));

        HttpResponse r = c.execute(p);

        BufferedReader rd = new BufferedReader(new InputStreamReader(r.getEntity().getContent()));
        String line = "";
        while ((line = rd.readLine()) != null) {
           //Parse our JSON response               
           JSONParser j = new JSONParser();
           JSONObject o = (JSONObject)j.parse(line);
           Map response = (Map)o.get("response");

           System.out.println(response.get("somevalue"));
        }
    }
    catch(ParseException e) {
        System.out.println(e);
    }
    catch(IOException e) {
        System.out.println(e);
    }                        
}    
} 
```

# c# - 正则表达式查找单词但仅查找第一个行项目

> ID：11527817
> 
> 赞同：0
> 
> 时间：2012-07-17T17:35:17.007
> 
> 标签：c#, regex

我有一个正则表达式来查找某个标签列表。（3 个结果）

```
<li><font color=\""Red\"" size=\""5\""><b>(.*?)</b> 
```

然后我想更进一步，只带回带有“关键”一词的那些。

```
<li><font color=\""Red\"" size=\""5\""><b>(.*Critical.*?)</b> 
```

但是，这只会带回第一个。我有 3 个`<li>`标签，其中 2 个包含关键标签。有没有办法修改它以包括所有包含“关键”一词的那些？

这就是我试图找到 1 和 3 但现在只有第 1 行返回的示例。

```
<li><font color="Red" size="5"><b>Critical - This would be line 1</b></font></li>
<li><font color="Red" size="5"><b>This would be line 2</b></font></li>
<li><font color="Red" size="5"><b>Critical - This would be line 3</b></font></li> 
```

* *最终满足我需求的**解决方案。**

```
<li><font color=\"Red\" size=\"5\"><b>([^<]*Critical.*?)</b> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:42:03.957

试试这个

```
try {
    Regex RegexObj = new Regex("<li><font color=\"Red\" size=\"5\"><b>(.*Critical.*?)</b>");
    Match MatchResults = RegexObj.Match(YourString);
    while (MatchResults.Success) {

        MatchResults = MatchResults.NextMatch();
    } 
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:52:20.970

上面 Alvin Wong 的评论导致这可以满足我的需要。查找标签之间带有“关键”的所有实例。

```
<li><font color=\"Red\" size=\"5\"><b>([^<]*Critical.*?)</b> 
```

# facebook - 注销时固定 URL 的点赞数错误

> ID：11527818
> 
> 赞同：1
> 
> 时间：2012-07-17T17:35:16.910
> 
> 标签：facebook, button, count, share, facebook-like

这让我发疯，我的网站[http://www.myabandonware.com/上有一个类似 facebook 的按钮，](http://www.myabandonware.com/)**当退出 facebook 时**，该按钮一直显示 0 like 该网站。登录后，共享计数为 5k。

刷新页面时，我有时会得到 4.7k 的赞，而不是 5k。我已经使用 API 检查了共享计数。

我使用此 URL 检查 AJAX 调用：http: [//www.facebook.com/plugins/like.php? api_key=172628266142459&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion %3D9%23cb%3Df3662e52e4%26origin%3Dhttp%253A%252F%252Fwww.myabandonware.com%252Ff188d369e%26domain%3Dwww.myabandonware.com%26relation%3Dparent.parent&extended_social_context=false&href=http%3A%2F%2Fwww.myabandonware =box_count&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=false&width=55](http://www.facebook.com/plugins/like.php?api_key=172628266142459&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D9%23cb%3Df3662e52e4%26origin%3Dhttp%253A%252F%252Fwww.myabandonware.com%252Ff188d369e%26domain%3Dwww.myabandonware.com%26relation%3Dparent.parent&extended_social_context=false&href=http%3A%2F%2Fwww.myabandonware.com&layout=box_count&locale=en_US&node_type=link&sdk=joey&send=false&show_faces=false&width=55)

对我来说听起来像是一个错误，我应该在 Facebook 上提交错误报告吗？这可能是暂时的，我已经开始删除一个获得 200 个赞的旧粉丝页面的程序。

编辑：这又恢复了正常行为，我想这是由于**旧的粉丝页面**（我认为是在 2009 年左右自动创建的）**被真正删除**（在允许回滚的 15 天之后）。链接数失去了该页面的约 200 个粉丝。今天早上我永久删除了粉丝页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:37:33.227

**答**：这不是用户方面的问题。

您绝对应该提交错误报告。尽管不是新事物，但某些页面的点赞计数集成最近一直很不稳定。我们的初创公司最近也遇到了问题，所以这并不奇怪。

# ios - iOS SDK：通过代码将按钮移动到屏幕中心

> ID：11527824
> 
> 赞同：9
> 
> 时间：2012-07-17T17:35:39.003
> 
> 标签：ios, button, sdk, position

我想通过代码将按钮移动到屏幕中央。我在某处看到它只是几行代码，但找不到它们。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-17T18:07:01.997

这使按钮在其超级视图中居中：

```
CGRect bounds = button.superview.bounds;
button.center = CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds)); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-17T17:40:30.507

这应该这样做：

```
yourButton.frame = CGRectMake(self.view.frame.size.width/2 - yourButton.frame.size.width/2, self.view.frame.size.height/2 - yourButton.frame.size.height/2, yourButton.frame.size.width, yourButton.frame.size.height); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-24T18:34:32.157

这是更简单的方法：

```
yourButton.center = self.view.center; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T18:18:26.837

rooster117 和 DavidNg 的答案似乎都是正确的。只是为您添加一个“选项”，如果您想制作此动画，您应该这样做：

```
NSTimeInterval seconds = 1.0;
[UIView animateWithDuration:seconds animations:^{
    //here you should write any reframing/repositioning code
}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-23T10:34:28.503

有一些方法可以在不编写任何代码的情况下做到这一点。如果您想尝试通过界面设置将按钮置于屏幕中央，您可以[查看我的剪辑](http://youtu.be/Swskjb_9ELQ)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-06T11:30:48.090

```
bntTimeEtrySave.Frame =new CoreGraphics.CGRect (
    this.View.Center.X-((bntTimeEtrySave.Bounds.Size.Width)/2),
    bntTimeEtrySave.Frame.Y,bntTimeEtrySave.Bounds.Size.Width,
    bntTimeEtrySave.Bounds.Size.Height); 
```

# asp.net-mvc-3 - 更新模型异常

> ID：11527833
> 
> 赞同：0
> 
> 时间：2012-07-17T17:36:19.817
> 
> 标签：asp.net-mvc-3, updatemodel

我正在尝试使用 UpdateModel 从我的控制器中的 FormCollection 分配一些值。控制器看起来像：

```
public ActionResult EditValues(int id, FormCollection collection)
{
   NamedClass picture = PictureProvider.GetById(id);
   try
   {
      if(ModelState.IsValid)
        {
            UpdateModel(picture, collection);
        }
   }
   catch {}
} 
```

在字符串中`UpdateModel(picture, collection);`，我有一个 ArgumentException，上面写着“已经添加了具有相同键的元素”，仅此而已..“集合”与“图片”具有相同的字段。我不想向“集合”添加任何内容" 这可能会导致此类异常.. 尝试手动为图片的字段赋值 - 好的。有人见过这样的伎俩吗？先感谢您！UPD：可能 StackTrace 会有所帮助..

```
System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   System.Web.Mvc.ModelBindingContext.get_PropertyMetadata()
   System.Web.Mvc.DefaultModelBinder.BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor)
   System.Web.Mvc.DefaultModelBinder.BindProperties(ControllerContext controllerContext, ModelBindingContext bindingContext)
   System.Web.Mvc.DefaultModelBinder.BindComplexElementalModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Object model)
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
   System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
   System.Web.Mvc.Controller.TryUpdateModel[TModel](TModel model, String prefix, String[] includeProperties, String[] excludeProperties, IValueProvider valueProvider)
   System.Web.Mvc.Controller.UpdateModel[TModel](TModel model, String prefix, String[] includeProperties, String[] excludeProperties, IValueProvider valueProvider)
   System.Web.Mvc.Controller.UpdateModel[TModel](TModel model, IValueProvider valueProvider) 
```

命名类是：

```
public class NamedClass
    {
        [Key]
        public virtual int id {get; set;}
        public virtual string username {get; set;}
    } 
```

提供值的视图是：

```
@model project.Models.NamedClass
@using (Html.BeginForm("EditValues", "PicController", FormMethod.Post))
{
    @Html.HiddenFor(m=>m.id)
    <div class="display-label">@Html.LabelFor(model=>model.username)</div>
    <div class="display-field">
        @Html.EditorFor(model => model.username)
    </div>
    <input type="submit" value="save" />
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:58:03.303

你为什么不能这样。

```
public ActionResult EditValues(NamedClass model)
{
  if(ModelState.IsValid)
  {
     .. save to db
  }

  return View();
} 
```

# jquery - jQuery Drag and Drop 只在 Chrome 中拖放一次

> ID：11527843
> 
> 赞同：3
> 
> 时间：2012-07-17T17:37:01.353
> 
> 标签：jquery, jquery-ui, firefox, google-chrome, drag-and-drop

我为此做了一个小提琴

[http://jsfiddle.net/likwidt/EarWR/3/](http://jsfiddle.net/likwidt/EarWR/3/)

从本质上讲，这几乎就像我在 IE 中想要的那样工作，但 Chrome 和 FF 并没有那么多。

我想将一个项目拖到一个放置区，然后可以选择将它拖到另一个可放置或拖出以恢复到它的原始位置。

当我将一个项目放入放置区时，我不能再拖动它了。

**问题：**为什么拖放后无法再次拖动？使用小提琴将拖放设置重置为空，它仍然无法正常工作我无法解释......但我已经编写了可以拖出多个拖放区域的可拖动，是什么阻止了这些......还有一个 OUT 事件......为什么如果这是它应该运作的方式。

以前有没有人解决过这个问题，也许有人可以给我一个提示，指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:59:27.460

可放置的 div 正在“覆盖”已放置的 DIV

例如，如果您设置“z-index :999”为我解决了这个问题。

我会为你修复代码..但它一团糟，我的眼睛受伤了..所以在这种情况下只是一个简单的答案

```
.Top{
 z-index : 999;
} 
```

将该类添加到您的项目中。

# c# - 无法投射 EntityCollection 类型的对象 到 EntityCollection

> ID：11527847
> 
> 赞同：1
> 
> 时间：2012-07-17T17:37:30.247
> 
> 标签：c#, entity-framework, reflection, casting, polymorphism

我正在使用反射`EntityCollection<Derived>`从我的 EF4 域实体中获取属性。一个示例实体可能有许多集合，这些集合包含具有共同基础的类型。`GetValue()`返回 an`object`但我需要将其转换为 an`EntityCollection<Base>`甚至只是`IEnumerable<Base>`. 但是怎么做？（哎呀，从 C#4 开始，转换为 IEnumerable 确实有效）

**示例模型**

```
public class Derived : Base { ... }
public class AnotherDerived : Base { ... }
public class Example : Base
{
    public virtual ICollection<Derived> Items { get; set; }
    public virtual ICollection<AnotherDerived> OtherItems { get; set; }
} 
```

我很难理解强制转换和多态性。我认为我能够通过`DbSet<Derived>`将它们反射到`IQueryable<Base>`. 但是`EntityCollection`我无法将反射的对象恢复为可用的形式。

**方法**

```
public static List<T> GetCollectedEntities<T>(this BaseEntity entity)
    where T : BaseEntity
{
    var result = new List<T>();
    foreach (var c in GetCollections<T>(entity))
        foreach (var item in (EntityCollection<T>)c) //ERROR
            result.Add(item);
    return result;
}

public static List<object> GetCollections<T>(this BaseEntity entity)
    where T : BaseEntity
{
    var collections = new List<object>();
    var props = from p in entity.GetType().GetProperties()
                let t = p.PropertyType
                where t.IsGenericType
                && t.GetGenericTypeDefinition() == typeof(ICollection<>)
                let a = t.GetGenericArguments().Single()
                where a == typeof(T) || a.IsSubclassOf(typeof(T))
                select p;
    foreach (var p in props)
        collections.Add(p.GetValue(entity, null));
    return collections;
} 
```

**现实世界的错误**

```
Unable to cast object of type  
'System.Data.Objects.DataClasses.EntityCollection`1[HTS.Data.ServiceOrder]'  
to type  
'System.Data.Objects.DataClasses.EntityCollection`1[HTS.Data.IncomingServiceOrderBase]'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:45:43.520

这似乎是你应该能够做的事情，不是吗？但这是不允许的，这就是原因。

`EntityCollection<T>`是可写的，因此如果将 a`EntityCollection<Derived>`转换为 a `EntityCollection<Base>`，则可以将 Base 对象插入集合中。这意味着您现在拥有一个不是 Derived 且不是 Derived 的子类的实例`EntityCollection<Derived>`。然后怎样呢？期望 Derived的迭代器`EntityCollection<Derived>`将以各种令人兴奋的方式失败。

# wrapper - JSLint4Java 用法

> ID：11527849
> 
> 赞同：4
> 
> 时间：2012-07-17T17:37:38.530
> 
> 标签：wrapper, jslint, jslint4java

JSLint4Java 是 JSLint 的 Java 包装器。我需要在我的 GWT 项目中使用类似的东西，但使用 JSLint4Java 的唯一方法似乎是从命令行或使用 ANT 任务。有谁知道是否有任何方法可以导入 JAR 并在项目中使用它们？当我尝试将它们添加到 GWT WAR 文件夹时，我收到很多错误，例如“xxx 无法解析为类型”。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:39:07.087

是的，您可以导入 jar 并像这样使用它：

```
import com.googlecode.jslint4java.Issue;
import com.googlecode.jslint4java.JSLint;
import com.googlecode.jslint4java.JSLintBuilder;
import com.googlecode.jslint4java.JSLintResult;

public static void lint(final String filePath) throws FileNotFoundException, IOException {
    String fileContent = Streams.read(new FileInputStream(new File(filePath))));
    JSLintBuilder builder = new JSLintBuilder();
    JSLint jsLint = builder.fromDefault();

    JSLintResult result = jsLint.lint("test.js", fileContent);
    for (Issue issue : result.getIssues()) {
        System.out.println(issue.toString());
    }

} 
```

# c++ - 在 C++ 的 Switch-Case 中做 OR

> ID：11527852
> 
> 赞同：8
> 
> 时间：2012-07-17T17:37:45.127
> 
> 标签：c++, visual-studio-2010

你会如何在 C++ 中做到这一点？例如，如果用户按下 ESC 或“q”或“Q”，我试图触发程序退出。

我试过寻找它，但在 C++ 中没有找到它的语法。我知道如何使用 if-else 来做到这一点，但是否可以使用 switch - case？当然，我可以只创建一个函数并从两个单独的案例中调用它，但是有没有办法仅通过组合案例语句来做到这一点？

例如，这就是我正在寻找的（当然不工作）：

```
void keyboard( unsigned char key, int x, int y )
{
    switch( key )
    {
        case ( 27 || 'q' || 'Q' ):
            exit( 0 );
            break;

        case 'a': ...

                case 'b': ...
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-17T17:39:01.447

案件没有中断：

```
case  27: //could be 27
case 'q': //could be 27 or 'q'
case 'Q': //could be 27, 'q', or 'Q'
    exit(0);
    break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:39:57.507

我相信这只是

```
switch(key){
 case 'a': case 'b':  
    /*code*/ 
    break;

    ... 
```

情况 A 和 B 都将执行相同的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:40:42.587

```
void keyboard( unsigned char key, int x, int y )
{
    switch( key )
    {
        case 027:
        case 'q':
        case 'Q':
            exit( 0 );
            break;

        case 'a': ...

        case 'b': ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T17:41:16.010

语法变成

```
 void keyboard( unsigned char key, int x, int y )
  {
      switch( key )
      {
          case  27:
          case 'q':
          case 'Q':
              exit( 0 );
              break;

         case 'a': ...

         case 'b': ...
      }
  } 
```

# android - 对齐 TableRow 中的组件

> ID：11527855
> 
> 赞同：0
> 
> 时间：2012-07-17T17:37:51.240
> 
> 标签：android, android-layout, tablerow, android-tablelayout

首先，我的所有组件都必须在运行时创建。好吧，我有一个`TableLayout`，在这个表视图里面有一堆`TableRow`. 在 every`TableRow`中，应该有：

*   a`Button`在右侧具有给定的固定高度和给定的固定宽度
*   a填充被允许包装其文本`TextView`的“其余部分”`TableRow`

的高度`TableRow`应该是`Button`高度和`TableRow`高度的最大值。我要么未能设置`Button`高度，要么只显示其中一个元素 (`TableRow`或`Button`)。

也许有人可以帮助我。

我当前的代码：

```
 // fetching the table layout
    final TableLayout tl = (TableLayout) findViewById(R.id.ShoppingListTableLayout);
    tl.removeAllViews();

    // creating a single layout for every component
    TableLayout.LayoutParams tableRowParams = new TableLayout.LayoutParams(
        TableLayout.LayoutParams.WRAP_CONTENT, TableLayout.LayoutParams.MATCH_PARENT);
    tableRowParams.setMargins(0, 1, 0, 1);

    TableRow.LayoutParams bParams = new TableRow.LayoutParams(m_Resources
        .getDimensionPixelSize(R.dimen.ButtonWidth), m_DefaultButtonHeight_px);

    TableLayout.LayoutParams tvParams = new TableLayout.LayoutParams(
        TableLayout.LayoutParams.MATCH_PARENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT);

    Iterator<xy> itr = ...

    while (itr.hasNext()) {
      final xy = itr.next();
      final TableRow tr = new TableRow(this);
      tr.setLayoutParams(tableRowParams);

      // 1\. Child: TextView
      final TextView CurrTxtView = new TextView(this);
      CurrTxtView.setPadding(TV_PADDING_PX, TV_PADDING_PX, TV_PADDING_PX, TV_PADDING_PX);
      CurrTxtView.setTextSize(TV_TEXT_SIZE);
      CurrTxtView.setTypeface(m_Font);
      CurrTxtView.setTextColor(TEXT_ACTIVE_COLOR);
      CurrTxtView.setText(CurrItem.GetName());
      CurrTxtView.setLayoutParams(tvParams);
      tr.addView(CurrTxtView, CHILD_INDEX_TV);

      // 2\. Child Button ("Edit" für aktive, "Delete" für inaktive)
      final Button MyButton = new Button(this);
      MyButton.setTextColor(TEXT_ACTIVE_COLOR;
      MyButton.setText(m_Resources.getString(CurrItem.GetIsActive() ? R.string.EditString
          : R.string.DeleteString));
      MyButton.setLayoutParams(bParams);
      MyButton.setTypeface(m_Font);
      MyButton.setOnClickListener(new View.OnClickListener()
      {

        @Override
        public void onClick(View v)
        {... }
      });

      tr.addView(MyButton, CHILD_INDEX_B);

      tr.setPadding(m_TableRowPadding_px, 0, m_TableRowPadding_px, 0);
      tr.setGravity(Gravity.CENTER_VERTICAL);

tl.addView(tr, 0);
    } 
```

在这种情况下，仅显示按钮，左侧更糟！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:14:30.393

假设您在正确的索引处添加`TextView`and （并且是and ，尽管您可以删除它们并以正确的顺序添加视图），布局中的一个坏事是您设置为出现：`Button``CHILD_INDEX_TV``CHILD_INDEX_B``0``1``LayoutParams``TextView`

```
TableLayout.LayoutParams tvParams = new TableLayout.LayoutParams(
        TableLayout.LayoutParams.MATCH_PARENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT); 
```

首先， the`TextView`是 a 的孩子，`TableRow`所以你应该设置`TableRow.LayoutParams`and not `TableLayout.LayoutParams`，其次我不明白你为什么突然决定离开 the`TableLayout.LayoutParams`并`android.view.ViewGroup.LayoutParams`为视图的高度而去。最后应该是：

```
TableRow.LayoutParams tvParams = new TableRow.LayoutParams(
                TableRow.LayoutParams.MATCH_PARENT,
                TableRow.LayoutParams.WRAP_CONTENT); 
```

要将`Button`向右推，您可以`TextView`使用以下方法简单地拉伸列：

```
tl.setColumnStretchable(0, true); 
```

# c# - WCF 客户端/服务器配置不匹配

> ID：11527866
> 
> 赞同：3
> 
> 时间：2012-07-17T17:38:24.190
> 
> 标签：c#, .net, wcf, web-config, streaming

我编写了一个将文件上传到服务器的 WCF 服务。它被配置为流式传输文件，因为它们可能相当大。我在 web.config 中设置了 transferMode = Streamed 并将各种配置大小设置设置为相当大的大小。

这对我的测试客户来说很好。我必须手动设置客户端配置以使 transferMode= Streamed - 默认情况下，当我包含服务引用时，它已将其设置为 Buffered。

但是使用我服务的人抱怨必须执行该手动步骤。他一直告诉我我的服务有问题，我需要解决它。对于未传播到客户端的设置，我看不到任何我可以“做”的事情。如果他使用我发送给他的配置设置，它工作正常。

有什么我应该做的吗？如果没有，是否有某种证据我可以提供给这个人来说服他我的服务没有中断？任何人都可以链接到解释这一点的文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:49:42.280

如果使用您服务的人的平台是 .Net，那么您可以创建具有正确配置的客户端库，该客户端库使用您的服务并让他使用它。

有众所周知的文章[WCF the Manual Way… the Right Way](http://www.code-magazine.com/Article.aspx?quickid=0809101)

# c# - Access.DoCMD.RunSQL 错误上的 InteropServices.COMException

> ID：11527870
> 
> 赞同：2
> 
> 时间：2012-07-17T17:38:44.533
> 
> 标签：c#, sql, ms-access, interop, comexception

我在 Visual Studio 2010 中编写了一个小程序来打开一个 Access 数据库，在表中输入一个值，然后打开一个表单。非常简单，该程序在我的笔记本电脑上运行良好。

当我尝试在第二台 PC 上运行 exe 时出现问题。我无法在表格中输入值。两台电脑都可以用 Visual Studio 2010 打开项目就好了。我运行它时收到的错误是：

> "System.Runtime.InteropServices.COMException (0x800A09C5)：RunSQL 操作已取消。\r\n 在 Microsoft.Office.Interop.Access.DoCmd.RunSQL(Object SQLStatement, Object UseTransaction)\r\n 在 OpenGasAlarmSheet.Program。 \Program.cs:line 47 中的 Main(String[] args)"

我将一些参数传递到一个字符串中以获得等效的：

```
String sql = "INSERT INTO tbl_LOG ([ALARM], [DATE]) 
              VALUES ('KNITERV4', #07-17-2012 10:22:29 AM#);" 
```

这是运行该 SQL 字符串的部分程序的代码：

```
Access.Application oAccess = null;
oAccess = new Access.Application();
oAccess.OpenCurrentDatabase(<file path to mdb>, false);
oAccess.DoCmd.RunSQL(sql); //This is line 47 
```

我已经尝试修复这个错误大约一周了，但我完全陷入了困境。任何帮助将非常感激！！！

谢谢，克里斯

* * *

**编辑：2012 年 7 月 18 日**

这就是我所在的地方......

**选项1：**

```
String sql = "INSERT INTO tbl_LOG ([ALARM], [DATE]) 
     VALUES ('KNITERV4', #07-17-2012 10:22:29 AM#);";
oAccess.CurrentDb().Execute(sql); //ERROR HERE 
```

结果是.....

PC #1：工作正常！

PC #2 & #3：错误（见下文）

> "System.Runtime.InteropServices.COMException (0x8002801D)：库未注册。（来自 HRESULT 的异常：0x8002801D (TYPE_E_LIBNOTREGISTERED)）\r\n 在 Microsoft.Office.Interop.Access.ApplicationClass.CurrentDb()\r\n 在测试.Program.Main(String[] args) 在 \Program.cs:line 47"

**选项 2：**

```
String sql = "INSERT INTO tbl_LOG ([ALARM], [DATE]) 
     VALUES ('KNITERV4', #07-17-2012 10:22:29 AM#);";
oAccess.DoCmd.RunSQL(sql); //ERROR HERE 
```

结果是.....

PC #1：工作正常！

PC #2 & #3：错误（见下文）

> "System.Runtime.InteropServices.COMException (0x800A09C5)：RunSQL 操作已取消。\r\n 在 Microsoft.Office.Interop.Access.DoCmd.RunSQL(Object SQLStatement, Object UseTransaction)\r\n 在 OpenGasAlarmSheet.Program。 \Program.cs:line 47 中的 Main(String[] args)"

**选项 3：**

```
cn.ConnectionString = oAccess.CurrentProject.Connection.ConnectionString; //ERROR HERE
cn.Open();

rs.ActiveConnection = cn;
rs.LockType = ADODB.LockTypeEnum.adLockBatchOptimistic;
rs.CursorType = ADODB.CursorTypeEnum.adOpenKeyset;
rs.CursorLocation = ADODB.CursorLocationEnum.adUseClient;

rs.Open("tbl_LOG");
rs.AddNew("ALARM", "KNITERV4");
rs.UpdateBatch(); 
```

结果是.....

PC #1 & #3：错误（见下文）

> "System.Runtime.InteropServices.COMException (0x8000FFFF)：灾难性故障（来自 HRESULT 的异常：0x8000FFFF (E_UNEXPECTED)）\r\n 在 Microsoft.Office.Interop.Access._CurrentProject.get_Connection()\r\n
> 在 Test.Program .Main(String[] args) 在 \Test\Program.cs:line 38"

PC #2：工作正常！！！

我不能让这个东西在多台电脑上工作。令人沮丧！:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T00:41:40.900

帮助 OP 可能为时已晚，但希望这能帮助像我这样找不到答案的人。

对我来说，该`The RunSQL action was canceled.`错误的解决方案是在 Access 中打开 MDB，然后单击**启用内容**按钮。该文件是在客户端机器上生成的（当然，在我们的网络外部）。从 TortoiseSVN 显示文件在那之后发生更改并且我能够提交这些更改的事实来看，似乎启用内容会物理修改文件。它必须在文件中存储一些权限，甚至可能在每台机器的基础上存储权限，并且即使在通过互操作执行时也要使用它们。

这是使用 MS Access 2010。

# c# - 使用布尔数组作为自定义字典键

> ID：11527876
> 
> 赞同：7
> 
> 时间：2012-07-17T17:39:05.167
> 
> 标签：c#, .net

我正在尝试在 C# 中创建一个使用布尔数组作为其键的字典。

```
 Dictionary<bool[], string> 
```

bool 数组的长度固定为 1000，并且都是相同的长度。我在使用哈希码时遇到问题，并且由于数组的长度，“异或”的常用方法没有多大意义。

StackOverflow 上的类似问题通过 GetHashCode 方法中的“异或”来解决。我认为这在这种情况下是行不通的。我想将其用作：

```
 Dictionary<bool[], string> myDict = 
             new Dictionary<bool[], string>(EqualityComparer); 
```

其中 EquaityComparer 执行以下操作：

```
 public class EqualityComparer : IEqualityComparer<bool[]>
    {
        public bool Equals(bool[] x, bool[] y)
        {
            return x.SequenceEqual(y);
        }

        public int GetHashCode(bool[] x)
        {
            // this part doesn't work correctly
            int hc = x.GetHashCode();
            return hc;
        }
    } 
```

当然，关于 bool 数组是可变的以及与性能相关的任何派生键的大小的所有常见问题都适用于此……尽管我没有解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T17:42:06.010

你的`Equals`和`HashCode`都是不正确的。

大概您希望用于`SequenceEqual`比较数组是否相等，或者使用简单的 for 循环。

要计算哈希码，您可以使用任何标准方法。如果两个项目比较相等，那么它们必须具有相同的哈希，这一点非常重要。

**例子**

```
public int GetHashCode(bool[] x)
{
    int result = 29;
    foreach (bool b in x)
    {
        if (b) { result++; }
        result *= 23;
    }
    return result;
} 
```

**有关的**

*   [GetHashCode 的准则和规则](http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T19:33:09.900

为了性能和一致性，我建议将您存储`bool[]`在另一个类中。您已经知道密钥可能不会更改，因此您可以通过将哈希存储在密钥类中来利用这一点。字典内部操作可能会多次使用这个散列来进行一次访问（尽管我们不应该知道内部实现细节，所以最好假设这可能会执行很多次）。

为了性能，您可能仍希望访问甚至保留对`bool[]`外部的引用，但最安全的技术是在密钥类中制作安全副本。

```
public class BoolArrayKey
{
    private int hash;
    private bool[] data;

    public BoolArrayKey(bool[] source)
    {
        data = new bool[source.Length];
        Array.Copy(source, data, source.Length);
    }

    public override bool Equals(object obj)
    {
        BoolArrayKey other = obj as BoolArrayKey;
        if (other == null)
        {
            return false;
        }

        return other.data.SequenceEqual(data);
    }

    public override int HashCode()
    {
        if (hash == 0)
        {
            // Mark's hash implementation here, store the result in `hash`.
        }

        return hash;    
    }
} 
```

如果您期望频繁的哈希值为 0，那么您可以使用另一个`bool`变量来指示该值是否已被计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T18:39:45.363

为了获得最佳性能，不要使用 bool[] 数组，这会使散列和比较非常慢。例如，您可以将相同的信息存储在长度为 1/32 的 Uint32[] 数组中，从而使散列和比较更快。

如果您保留 bool[] 数组，请考虑使用不安全的代码进行散列/比较。

如果您只想使用安全代码，请至少在循环中删除条件：

```
hash = hash * 3 + (int) x[i]; 
```

还比较使用自己的循环应该比 SequenceEqual 快

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T18:42:34.413

实现 GetHashCode 的规则是任何两个相等的对象必须生成相同的哈希码。一个*指导方针*是尽可能少地发生冲突（哈希码不是唯一的要求）。

此实现使用 BitArray 类以 32 组为一组获取布尔数组，将它们视为位并计算生成的 32 位整数的哈希码：

```
public int GetHashCode(bool[] x)
{
    // Trivial case
    if (x.Length == 0) return 0;

    // Convert the bool array to a BitArray to use framework functions
    BitArray binary = new BitArray(x);

    //Determine the max # of 32-bit INTS this array represents
    int intLength = (x.Length-1)/32 + 1;
    int [] ints = new int[intLength];

    // Copy each block of 32-bits to an int
    binary.CopyTo(ints, 0);

    // Take the exclusive OR of each int and return the result's hash code
    return ints.Aggregate((i1, i2) => i1 ^ i2).GetHashCode();
} 
```

# xcode - 将新文件扩展名声明为文本，以便在 XCode 和 Finder 中查看

> ID：11527878
> 
> 赞同：1
> 
> 时间：2012-07-17T17:39:09.653
> 
> 标签：xcode, macos, xcode4

我正在尝试获取具有 .mkb 的第 3 方扩展名的文本文件，以便在 XCode 中可以查看它。目前，如果我右键单击并“打开为”，它只会让我将其作为 Hex 文件打开。我相信解决方案可能涉及编辑拥有应用程序的 plist 文件，但我对 plist 的任何更改都没有成功地改变 XCode 或 Finders 行为。

# c# - Silverlight 中的断点不会中断

> ID：11527879
> 
> 赞同：11
> 
> 时间：2012-07-17T17:39:17.343
> 
> 标签：c#, silverlight, breakpoints

我无法在 Silverlight Web 应用程序的服务器端设置断点。我知道代码可以执行，因为我可以按照我的预期中断异步回调。只有我的机器有这个问题。

我知道这似乎是一个常见问题，但是我所见过的所有答案都没有帮助我，包括：

*   **断点是红色**的，表示它将被命中。
*   **在 Web 项目的属性上**选中 Silverlight 复选框。****
***   清理并构建解决方案。*   从源代码管理中获取新版本。*   从我的网络浏览器中清除所有内容：缓存、cookie 等...（**我使用的是 IE**）。*   清除 %windir%/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files 中的临时文件。*   检查所有项目都在配置管理器中构建。*   一切都设置为调试而不是在配置管理器中发布。*   手动附加到 w3wp.exe 进程。*   IIS 重置。*   IIS 设置为使用 .NET v4，管道设置为经典未集成。*   重新安装 IIS 并重新配置。*   重新安装了 Visual Studio。*   重新安装了 Silverlight。**

 **我正在使用 Visual Studio 2010 (.NET 4)、Silverlight 4，并使用 IIS（我认为是 6，不记得了）来托管网站。

我发现的有趣行为（可能有助于诊断）：

*   如果我使用 Visual Studio 自己的开发服务器而不是 IIS 来托管站点，它仍然不会中断。
*   我在 Debug -> Windows -> Proccess (Ctrl D, P) 下看到一篇博文（不记得在哪里提供链接），以检查 w3wp.exe 进程在“调试”标题下是否设置为“Silverlight” - 我的设置为“托管”并且在连接时无法将其设置为 Silverlight。在检查了正在工作的机器上的同事设置后，他的也被设置为托管。

任何建议将不胜感激！

**更新：**感谢所有建议。我决定格式化 C:\，而不是花更多时间玩，因为我的机器无论如何都非常需要它。我仍然不确定问题是什么，但它现在正在工作。

在此之前，我确实尝试了其他一些操作，例如删除 .sou 文件，并检查我运行的是与此[博客文章](http://radheyv.blogspot.co.uk/2011/04/breakpoints-are-not-hitting-in-my.html)中提到的相同版本的 Silverlight，但没有成功。希望这将作为未来有此问题的人的清单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:08:09.190

在使用 Silverlight 时，不应附加到 w3wp.exe。这是 IIS 的工作进程，与您的 Silverlight 代码无关。浏览器进程实际上执行您的 Silverlight 代码。您能否尝试在 IE 中打开 Silverlight 托管页面，然后使用 Visual Studio 附加到 iexplore.exe（再次检查 Silverlight 作为您要调试的代码类型）？

这应该允许您毫无问题地调试 Silverlight 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T09:52:02.727

我知道我迟到了，但我在 Silverlight 解决方案中遇到了这个问题。**事实证明，问题在于我在取消**`Tools>Options>Debugging>General;`选中后签入了“仅启用我的代码（仅限托管）”选项，我的断点都被命中了。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:39:44.947

看来您已经尝试了几乎所有方法。您可能需要检查 ServiceReference.ClientConfig 文件。有时 WCF 服务更新会导致地址和端口更改。您还可以使用 Fiddler 进行检查，以查看您的服务调用指向的位置。****

# javascript - 使用 Javascript 和 HTML 从 Google 电子表格填充 html 代码

> ID：11527882
> 
> 赞同：3
> 
> 时间：2012-07-17T17:39:43.270
> 
> 标签：javascript, html, spreadsheet

是否可以使用 Javascript 和 HTML 从 Google 电子表格填充 html 代码？我正在设计一个应用程序，并将其托管在 Google apppot 上。我想将我网站的内容存储在一个类似于数据库的谷歌电子表格中。我不知道这是否可能，因为我已经看到使用 PHP 或将数据从谷歌电子表格中获取到表格中，而在我的如果页面和 opg 变量存储在电子表格中，则甚至是标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-10T17:27:40.887

是的，很有可能。例如，如果您想从电子表格中填充下拉列表，请尝试以下操作：

```
HTML element: 
<div id = "mydata"></div>

Java Script Function:    
function dropdown() {
google.script.run.withSuccessHandler(function(data) {
document.getElementById("mydata").innerHTML = data;
}).dropdown();
}
App Script Function:
function dropdown() {
  var ss = SpreadsheetApp.openById('KEY');
  var sheet = ss.getSheetByName('DD');
  var limit = sheet.getLastRow();
  var data = sheet.getRange(2, 1, limit, 1).getDisplayValues();
  var drop = '<select id = "dropdown"><option value="">Choose Sector</option>';

  for (var i = 0; i < data.length; i++) {
    if (data[i] != '') {
      drop += "<option value = '" + data[i] + "'>" + data[i] + "</option>";
    }
  }
  drop += '</select>*';
  return drop;
} 
```

# javascript - 在 chrome 加载页面中以不同方式重新加载

> ID：11527884
> 
> 赞同：2
> 
> 时间：2012-07-17T17:39:55.940
> 
> 标签：javascript, jquery, google-chrome

所以我一直在努力让一个 jquery 轮播来配合我的网站设计。轮播可在此处找到： [http](http://www.fortelessons.com) ://www.fortelessons.com 。我最小化了网站上的所有 javascript，因此要在最小化轮播之前查看特定的 jquery，我在此处复制了它：http: [//fortelessons.com/js/full/infinite.js](http://fortelessons.com/js/full/infinite.js)

所以它在我测试过的任何地方都可以正常工作。但现在我查看 Chrome 20.0.1132.57，我遇到了一些非常奇怪的问题。在第一次初始加载时，它看起来很棒。但是，如果我重新加载页面“学习钢琴”、“学习语音”和“学习吉他”，就会被一种乐器向左移动，在吉他图片下方留下空白。如果我清除缓存并重新加载它很好，但一旦它在缓存中，它就会再次这样做。这有什么意义？我什至不知道从哪里开始。它不适用于我当前版本的 Firefox 或 IE，只有 Chrome。

如果它可以节省您查看代码的时间，我可以发布更详细的 jquery 正在做什么的描述，但我只是想知道它是否可以被任何人重现，或者是否有人知道为什么被缓存的页面会以某种方式改变它是如何显示的。我什至不知道如何开始调试它。

编辑：实际上只有当我单击重新加载按钮时。如果我单击该站点，然后单击返回，则没有问题。但是，一旦我单击重新加载，它就会变得一团糟。如果我然后再次单击它会恢复正常。我想实际上这不会是一个大问题，因为它几乎永远不会发生，但我仍然想知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:39:05.557

我认为您遇到的问题来自一个问题，即绝对定位的元素使周围的元素没有自然流动的元素。

缓存似乎存在问题，当您重新加载浏览器时，没有获得按预期绘制网页所需的所有信息。

当您制作每个`li` `position:relative`视图时，会明确告知如何处理相关元素并且一切正常 - 即使重新加载也是如此。缓存不再是问题。

# vim - 在macvim中的行内粘贴

> ID：11527886
> 
> 赞同：0
> 
> 时间：2012-07-17T17:40:03.033
> 
> 标签：vim, macvim

我开始不仅将*macvim*用于代码，还用于编辑 wiki 和用 LaTeX 进行学术写作。经过几个蜜月时刻 ;-) 和第一次定制工作，我发现了一个我无法解决的问题：

无论从何处复制此内容，如何将系统剪贴板*中的内容粘贴到一行中？*（我过度使用 LaunchBar 的多剪贴板功能，并且存储来自不同应用程序的 > 20 个字符串，我迟早会粘贴。它适用于 macvim，但不适用于“逐行”内容。） p 或 P 创建换行符，cmd -v 也是如此。

我既不想[在标签之间](https://stackoverflow.com/questions/2287031/how-to-paste-something-between-html-tags-in-vim?rq=1)添加字符串，也不想专注于其他专业设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T19:17:57.593

我不知道 Launchbar 在这方面是如何工作的，但是我使用过的所有剪贴板管理器都会`Cmd-v`在您点击`Enter`.

MacVim 很好地集成在系统中，支持许多默认的 Mac OS X 快捷方式，例如`Cmd-o`，`Cmd-s`或者`Cmd-v`……只需选择 Launchbar 列表中的项目并点击即可`Enter`。

如果您粘贴的内容以自己的一行结束（大概在当前行上方）而不是在您的句子中间，这意味着粘贴的文本包含一个新行，简单明了。因为 MacVim 映射`Cmd-v`到`P`，所以粘贴的内容粘贴在光标之前：如果看不到换行符，则为 inline，如果有换行符，则在当前行上方。

这是正常的行为。

此时，您要么找到一种方法来清理 Launchbar 的内容，要么在`Cmd-v`之后使用类似`^v$y"_d<movement>P`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:18:53.997

`p`并且`P`仅当剪贴板包含换行符时才创建新行。

我刚刚`one-line content`从我的剪贴板粘贴到 vim 中，它工作正常（在线）。

问题可能与 LaunchBar 复制到其剪贴板的方式有关。

# header - 查看/编辑文件头

> ID：11527892
> 
> 赞同：2
> 
> 时间：2012-07-17T17:40:29.817
> 
> 标签：header

我正在对格式错误的档案进行研究，这个漏洞利用 (CVE-2012-1459) 谈到了操纵档案的标题信息。我对所有这一切都有一个粗略的了解，并想澄清一下。

1.  每个文件都有包含字节长度和其他类似内容的标题信息？

2.  如果以上不正确。什么是标头？

3.  如何查看/编辑此信息？

（有关标题的任何信息都有帮助。网上的信息不清楚）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:49:09.760

许多文件格式都有标题。如果您想查看特定文件的标题，最好的选择是获取格式的完整文档、十六进制编辑器、进行十六进制到十进制转换的计算器，以及用于在上面绘制内容的记事本. 通常，它们相当深入并且具有许多间接级别，并且准确地理解它们如何组合在一起是相当艰巨的。有些文件可能有许多嵌套的标题。档案就是一个例子：它们通常有一个标头，其中包含有关整个档案的信息，并且内部有一个标头，每个文件都有一个标头，其中包含有关内容的详细信息。

# ruby-on-rails - 像 github 一样的 Rails 路由

> ID：11527893
> 
> 赞同：5
> 
> 时间：2012-07-17T17:40:32.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rails-routing

我正在使用 Rails 3.2

我希望路由与 github 非常相似，所以：

```
root/(username)
root/(username)/(projectname)
root/(username)/(projectname)/issus 
```

等等

我正在尝试这样的事情：

```
resources :publishers do
  resources :magazines do
    resources :photos
  end
end 
```

但这给出了这样的路线：

```
/publishers/1/magazines/2/photos/3 
```

我正在查看的一个项目执行以下操作，这似乎有效但似乎不适合我。

```
resources :projects, :constraints => { :id => /[^\/]+/ }, :except => [:new, :create, :index], :path => "/" do
member do
  get "team"
  get "wall"
  get "graph"
  get "files"
end

resources :wikis, :only => [:show, :edit, :destroy, :create] do
  member do
    get "history"        
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T18:09:18.763

如果您想摆脱 id 编号（这是 rails 默认值）并使用一个名称，我建议使用 FriendlyId gem。

观看此 railscast [http://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

这是github页面[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id)

编辑

这是我要找的文章，我忘了我几个月前给它加了书签。 [http://jasoncodes.com/posts/rails-3-nested-resource-slugs](http://jasoncodes.com/posts/rails-3-nested-resource-slugs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-10T00:18:46.617

您必须使用[friendly_id](https://github.com/norman/friendly_id)和范围

```
scope '/:username/:projectname', module: 'users/projects', as: 'users_project' do
    resources :issus
    resources :photos
end 
```

# php - 简单的 if-else php 注入

> ID：11527894
> 
> 赞同：2
> 
> 时间：2012-07-17T17:40:33.317
> 
> 标签：php, code-injection, if-statement

简单的问题。我尝试制作使用一键的简单页面。这安全吗？

```
$a = $_POST["a"];
$a = htmlspecialchars($a);

if($a=="1234") {
printf($a);   
}else {
header("Location: index.php");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:43:06.717

好吧，既然你只会打印`$a`，`1234`那么它不会造成任何伤害。另外，您没有`$a`在任何 SQL 语句中使用，所以它是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:43:49.980

这是一种锁定应用程序的可怕方法，但您不会使用该代码对任何注入攻击敞开心扉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:42:14.003

您需要担心的唯一“注入”是您是否在`eval`语句或 SQL 查询中使用了它。

否则，没关系。你不需要`htmlspecialchars`这里。

# linux - 将命令的输出分配给变量（BASH）

> ID：11527899
> 
> 赞同：7
> 
> 时间：2012-07-17T17:40:55.867
> 
> 标签：linux, bash, shell, command

我需要将命令的输出分配给变量。我试过的命令是：

```
grep UUID fstab | awk '/ext4/ {print $1}' | awk '{print substr($0,6)}' 
```

我尝试使用此代码分配变量：

```
UUID=$(grep UUID fstab | awk '/ext4/ {print $1}' | awk '{print substr($0,6)}') 
```

但是，它给出了语法错误。此外，我希望它在 bash 脚本中工作。

错误是：

```
./upload.sh: line 12: syntax error near unexpected token ENE=$( grep UUID fstab | awk '/ext4/ {print $1}' | awk '{print substr($0,6)}'
 )'

./upload.sh: line 12:   ENE=$( grep UUID fstab | awk '/ext4/ {print $1}' | awk '{print substr($0,6)}'
 )' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T17:46:14.253

好吧，使用 '$()' 子shell 运算符是获取 bash 命令输出的常用方法。由于它跨越一个子外壳，因此效率不高。

我试过 ：

```
UUID=$(grep UUID /etc/fstab|awk '/ext4/ {print $1}'|awk '{print substr($0,6)}')
echo $UUID # writes e577b87e-2fec-893b-c237-6a14aeb5b390 
```

它完美地工作:)

编辑：

当然你可以缩短你的命令：

```
# First step : Only one awk
UUID=$(grep UUID /etc/fstab|awk '/ext4/ {print substr($1,6)}') 
```

再一次：

```
# Second step : awk has a powerful regular expression engine ^^
UUID=$(cat /etc/fstab|awk '/UUID.*ext4/ {print substr($1,6)}') 
```

您还可以将 awk 与文件参数一起使用 ::

```
# Third step : awk use fstab directlty
UUID=$(awk '/UUID.*ext4/ {print substr($1,6)}' /etc/fstab) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:45:02.543

仅出于排除故障的目的，以及尝试查看是否可以使其正常工作的其他目的，您还可以尝试使用“反引号”，例如，

```
cur_dir=`pwd` 
```

会将`pwd`命令的输出保存在您的变量 cur_dir 中，尽管使用`$()`方法通常更可取。

[引用](http://wiki.bash-hackers.org/syntax/expansion/cmdsubst)[http://unix.stackexchange.com](http://unix.stackexchange.com)上给我的页面：

> 第二种形式``COMMAND``（使用反引号）对于 Bash 来说或多或少已经过时了，因为它在嵌套（“内部”反引号需要转义）和转义字符方面存在一些问题。使用`$(COMMAND)`，它也是 POSIX！

# detach - .end() 与 .before() 一起使用时的行为

> ID：11527900
> 
> 赞同：1
> 
> 时间：2012-07-17T17:40:58.887
> 
> 标签：detach, jquery, jquery-end

当调用`.before`与 DOM 分离的元素时，`.end`其行为与附加元素不同：

```
var $div1 = $("div");
console.log($div1.after("foo").end());  // [document]
$div1.detach();
console.log($div1.after("foo").end());  // [<div></div>] 
```

（小提琴：http: [//jsfiddle.net/R2uc7/2/](http://jsfiddle.net/R2uc7/2/)）

显然，根据附加或分离的节点`.before`导致不同的行为。`.end`我看不到逻辑，我不确定我可以依赖什么。

有人可以告诉我`.end`组合的定义行为`.before`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:51:23.267

[jQuery v1.7.2](http://code.jquery.com/jquery-1.7.2.js)用于[`pushStack`](http://api.jquery.com/pushStack)构建新的 DOM 元素。

`pushStack`将项目添加到 jQuery 对象的堆栈中（如图！），并[`end`](http://api.jquery.com/end)弹出最后一个，返回堆栈的其余部分（无论剩下什么）。

* * *

jQuery v1.7.2 line #5860:
[注释我的]

```
before: function() {
    if ( this[0] && this[0].parentNode ) {
        return this.domManip(arguments, false, function( elem ) {
            this.parentNode.insertBefore( elem, this );
        });
    } else if ( arguments.length ) {
        var set = jQuery.clean( arguments );
        set.push.apply( set, this.toArray() ); 
        return this.pushStack( set, "before", arguments ); //pushStack in use
    }
} 
```

# relational-database - Orchard CMS：呈现 1:n 表格数据

> ID：11527907
> 
> 赞同：0
> 
> 时间：2012-07-17T17:41:17.387
> 
> 标签：relational-database, orchardcms

我想将果园用于中型公司网站。旧网站是用纯 ASP.NET 3.5 编写的，例如有这个数据库表：

部门：ID，描述

联系人：ID、DepartementID、姓名、图片

制作一个页面，列出部门，链接到另一个页面没有问题，其中联系人显示在一个列表（html-table）中，带有一个 SQL，如 SELECT 名称、来自 Contact Inner Join Departemnt on Contact.DepartementID = Departemnt.ID 的图像...... 或者...

我将如何在果园模仿这个？甚至更好...我可以在 Orchard-db（或外部 db）中创建这些表并编写一个（经典）ASP.NET 页面来呈现 Orchard-Website 内的数据吗？我是否需要为此创建一个模块（如何？）这些表可以从 Orchard 内部搜索中搜索到吗？（由 Lucene 索引？）

我还需要为表格创建一个创建/更新/删除页面。...在仪表板内？（因为它们必须受到保护/仅授权访问）

最后......我不想让每条记录都显示为仪表板中的内容项！我需要一个具有传统的每行记录、排序、分页、更新/删除的 CRUD 页面，就像在传统的访问表单中一样

这在果园有可能吗？？

谢谢你，莱因哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:45:09.583

当然这是可能的（阅读[http://docs.orchardproject.net/Documentation/Creating-1-n-and-nn-relations](http://docs.orchardproject.net/Documentation/Creating-1-n-and-n-n-relations)），但是如果您想要内容类型的好处，例如可搜索性，只需将其设为内容类型。内容类型不一定会出现在项目列表中。只有当它们被标记为可创建时它们才会出现，所以不要将你的类型标记为可创建，你应该很高兴。

# css - 为什么我的网站这么宽。（数万像素）

> ID：11527912
> 
> 赞同：1
> 
> 时间：2012-07-17T17:41:44.963
> 
> 标签：css, width, scrollbars

我正在处理的一个网站：http: [//bayhouse.biklopsdesign.com](http://bayhouse.biklopsdesign.com)，不知何故非常宽。这会导致水平滚动条以及使固定定位非常烦人。

谁能告诉发生了什么？我已经火了好几天了，没有任何缓解。：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:01:27.130

这**很难**找到！

您的链接`<a id="OTPoweredBy">...</a>`有一个`margin`。`-9999px;`如果我将其设置`margin`为更合理的值，所有向右滚动都会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:54:50.870

答案是您已将宽度声明为固定定位元素的百分比。这需要*viewport*的百分比，而不是父容器的百分比。

因此，例如，我的视口是 1900px 宽。这意味着设置的每个元素`position: fixed; width: 100%`都是 1900px 宽。您可以在许多地方执行此操作，例如在`aside#text-15.header_area`. 另请参阅[此 SO 答案](https://stackoverflow.com/questions/4674562/percentage-width-for-fixed-elements)。

# matlab - voronoi图matlab

> ID：11527918
> 
> 赞同：3
> 
> 时间：2012-07-17T17:42:15.580
> 
> 标签：matlab, cluster-analysis, voronoi

我想知道如何在下面的 FCM 方法中显示/绘制 voronoi 图？还有一种方法可以让您从图中观察程序，因为它在 matlab 中放置和计算每个点？几乎就像一辆正在运行的拖车。

```
 [centers, U, objFun] = fcm(data, 6);
  plot(data(:,1), data(:,2),'o');
  maxU = max(U);
  index1 = find(U(1, :) == maxU);
  index2 = find(U(2, :) == maxU);
  line(data(index1,1),data(index1, 2),'linestyle','none',...
 'marker','*','color','g');
  line(data(index2,1),data(index2, 2),'linestyle','none',...
 'marker', '*','color','r'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:21:49.760

顺便说一句，这对于 k-means 和 FCM 应该是相同的。

要获得 Voronoi 图，您需要计算 Delaunay 三角剖分，然后将 Voronoi 图的一侧正交放置在每个 Delaunay 边的平均值上。

至少有 2D 和 3D 的 Delaunay 有效算法。这与计算凸包密切相关。另外，由于您没有很多集群中心，因此可扩展性并不难。

但是，您有一个大问题：您的数据是 6 维的。这意味着您的 Voronoi 单元的侧面实际上是 5 维的，它们不会轻易映射到合理的 2d 投影。

但是，在您使用的 2D 投影中计算 Voronoi 图是不准确的。您可以尝试计算 6D 的 Voronoi 单元，并将 voronoi 单元的所有角映射到 2D，然后连接相邻的角。但这可能会产生一大堆线条，而且恕我直言，这并不是特别有用。

抱歉，据我所知，Voronoi 单元可视化对于理解 2D 中的 k-means 以及如果您有一个良好的 3D 3D 可视化引擎非常有用。

不要误解我的意思：**Voronoi 细胞正是 k-means 集群的样子**。它们不是球体、斑点或星星。它们是 Voronoi 单元格：单元格恰好是分配给特定平均值的区域。

看看这张来自维基百科的图片： ![维基百科上的 K-means](../Images/690c86b88e751b890c0da7714864094a.png)

黑线是分隔集群的*边界（在 2D 数据集中是简单的 1d 线）。*在顶部中心线的右侧有一个蓝色物体。它是蓝色的，因为它位于直线的右侧 - 它位于蓝色均值的 Voronoi 单元格中。

这是 k-means 的一个主要缺点：它没有集群*空间扩展*的*大小概念。*它们只有一个中心，数据在两个相邻中心之间的正交超平面上分割。**对于这个特定的数据集，k-means *没有机会正确拆分数据！**它没有收敛到“坏”的局部最小值，但正确的解决方案*不能*****可以通过 k-means 找到，因为簇的大小不同（并且中间没有足够的间隙让 k-means 很幸运）。要正确地对这个数据集进行聚类，您实际上需要一个类似于 EM 的聚类大小概念或基于密度的方法。如果 k-means 能够检测到绿色集群大约是蓝色集群的两倍大，它可能会工作得更好（但无论如何它几乎已经是 EM）****

# tridion - 是否可以根据用户组过滤下一个活动并显示在下拉框中？

> ID：11527920
> 
> 赞同：2
> 
> 时间：2012-07-17T17:42:19.227
> 
> 标签：tridion, tridion-2011

我有一个使用核心服务的工作流图中给出的场景。

![在此处输入图像描述](../Images/5e4ed90d0dff459c0cda91b580be020f.png)

1.  第一步是手动步骤作者将创建/编辑内容并完成活动并将其分配给每个人。
2.  在第二步中，我想根据用户组过滤用户。
3.  第三步，几个场景

    一种。如果用户属于“A”组，我想列出所有接下来的 3 个可用活动，用户 A 可以选择这 3 个活动中的任何一个。

    湾。如果用户属于“B”组，我想列出“Reviewer”和“Approver”活动作为下一个活动，用户b可以选择这两个中的任何一个。

任何人都可以提出一些想法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T18:04:20.017

你应该扭转你的问题。是的，这是可能的，但是所需的知识量将成为您实施的巨大障碍。

所以，换个角度想吧。

*   将您的“过滤下一个活动”自动化活动更改为自动决策，并让您确定组成员身份的代码也确定下一个应该是哪个活动
*   从那里有 2 条前向路径 - 1 条用于 A 组的用户，其他用于 B 组的用户
*   在每条正向路径上，都有不同的选择选项。您*可以*尝试从 2 个不同的手动决策中获得指向同一活动的链接，但我不知道这是否有效。

在最坏的情况下，您将有重复的活动（不是在名称上，而是在功能上），并且您在尝试应对 CME 扩展的学习曲线时节省了大约 2 个月的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T17:46:56.233

您最初问题的简单答案是：“不，此功能不是开箱即用的”。

当然，通过自己实现关键部分，很多事情都是可能的。

1.  您可能需要某种 GUI 扩展来允许用户从列表中进行选择。
2.  您需要在自定义解决方案的各个阶段之间存储信息。
3.  然后，您需要在自动化工作流活动中使用一些代码来实现下一个活动的选择。

这些步骤中的大多数已经在其他问题中介绍过。你有没有看过这些？如果是这样，您可能想分享您已经走了多远以及卡在哪里。

# python - Python - 从旧式类继承

> ID：11527921
> 
> 赞同：32
> 
> 时间：2012-07-17T17:42:26.233
> 
> 标签：python, inheritance, telnet

我正在尝试通过 telnet 连接到实验室仪器。我想从标准库中`Telnet`的模块扩展类，以包含特定于我们仪器的功能：`telnetlib`

```
import telnetlib
class Instrument(telnetlib.Telnet):
    def __init__(self, host=None, port=0, timeout=5):
        super(Instrument,self).__init__(host, port, timeout) 
```

我在这段代码中想要做的就是`__init__`从父类 ( `telnetlib.Telnet`) 继承方法并传递标准参数，以便`__init__`稍后添加内容。这个公式在其他场合对我有用；这一次，`super()`当我尝试实例化时，它在语句中给了我一个错误：

```
TypeError: must be type, not classobj 
```

我查看了 telnetlib 的源代码，并且 Telnet 似乎是一个老式类（它不继承自`object`） - 我想知道这是否可能是我的问题的根源？如果是这样，如何克服？我看过一些代码示例，其中派生类继承自超类和`object`，尽管我不完全确定这是否是对与我相同的问题的响应。

完全披露：我也尝试过使用`telnetlib.Telnet`代替`super()`和`from telnetlib import Telnet`with`Telnet`代替`super()`. 在这些情况下问题仍然存在。

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-17T17:44:15.860

您需要像这样调用[构造函数](http://docs.python.org/reference/datamodel.html#object.__init__)：

```
telnetlib.Telnet.__init__(self, host, port, timeout) 
```

您需要添加显式`self`，因为`telnet.Telnet.__init__`它不是*绑定方法*，而是*未绑定方法*，即没有分配实例。因此，在调用它时，您需要显式地传递实例。

```
>>> Test.__init__
<unbound method Test.__init__>
>>> Test().__init__
<bound method Test.__init__ of <__main__.Test instance at 0x7fb54c984e18>>
>>> Test.__init__()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unbound method __init__() must be called with Test instance as first argument (got nothing instead) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-17T17:57:05.697

您必须继承自`object`，并且必须将其放在您尝试继承的旧式类之后（这样`object`就不会首先找到 's 方法）：

```
>>> class Instrument(telnetlib.Telnet,object):
...     def __init__(self, host=None, port=0, timeout=5):
...         super(Instrument,self).__init__(host, port, timeout)
...
>>> Instrument()
<__main__.Instrument object at 0x0000000001FECA90> 
```

从对象继承为您提供了一个与`super`.

# php - 如果我在控制器中安装视图结构，我会退出 MVC 模式吗？

> ID：11527926
> 
> 赞同：0
> 
> 时间：2012-07-17T17:42:34.800
> 
> 标签：php, model-view-controller, view

如果我的控制器中有以下代码：

```
 $this->view->print = "<form method='{$method}'> //Some form things </form>"; 
```

然后我在我看来使用执行`echo $this->print;`，我会退出 MVC 模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:11:54.070

不，您绝对没有使用它。控制器不应负责表示逻辑。这是视图实例的任务。这意味着，*控制器中没有 HTML*。

MVC 设计模式中的视图是处理表示逻辑和操作多个模板的结构。**视图不是模板。**

此外，如果可能，控制器不应渲染视图。控制器应该负责向视图和模型层发送消息，然后导致 MVC 的所述部分的状态发生变化。

# c# - 类似 Ebay 的类别选择菜单

> ID：11527930
> 
> 赞同：1
> 
> 时间：2012-07-17T17:42:54.343
> 
> 标签：c#, jquery, asp.net, append

我正在寻找一些示例代码（如果有的话）来处理下面的场景。

当您添加新项目时，我想制作一些级联（过滤）选定框，例如 ebay.com 使用。

我遇到困难是因为

1.  可以有很多父子关系。可以存在具有四个或更多子类别的类别。
2.  我不确定当有人单击父类别时是否应该通过 jquery 动态添加选择框，或者在页面上有许多隐藏的选择框并根据需要隐藏/显示。
3.  我敢肯定我可以查到这个，但我还不确定如何在后面的代码中使用通过 javascript 动态添加的表单元素。

有人知道易趣是怎么做的吗？

数据会是这样的：

硬币美国 -> 美元 -> 摩根 -> 1894-98

或者

邮票 -> 美国 -> 封面 -> FDC -> 1931-1940

数据将存储在具有以下结构的 sql 表中：

身份证 | 类别文字 | 父 ID

在树中选择的每个级别都会在其右侧生成一个新的选择框，其中包含可用的子值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:51:52.017

我确定以前有人问过这个问题，但是这是您问题的 Jquery 部分的代码。

```
 var numbers = [1, 2, 3, 4, 5];

for (i=0;i<numbers.length;i++){
   $('<option/>').val(numbers[i]).html(numbers[i]).appendTo('#items');
} 
```

[https://stackoverflow.com/a/3446086](https://stackoverflow.com/a/3446086)

下一部分是对象组合问题，只有深入了解您对父子关系的了解，才能真正回答该问题。ebay 是如何做的可能对你没有帮助，他们可能有你没有的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:02:10.660

看起来我正在发布我自己对第一个问题的答案。

这是我要做什么的大致轮廓，我还没有编写代码，但我花了一个晚上思考解决方案并相信它会起作用。

1.  对数据进行反规范化。而不是让数据格式为

    `Id | CategoryText | ParentId`

    我会把东西存储为

    `Id | CategoryTextLevel1 | CategoryTextLevel2`等等。

    我做了一些研究，发现此时 ebay 的类别结构只下降了六个级别，我相信这对我也有用。

2.  在页面加载时，调用服务以获取第一级类别。

3.  将事件处理程序附加到每个选择框项，尚不确定我将如何执行此操作，但我想我可能只能在 option.click() 上全局设置一个

4.  选择框项目将以格式存储，`<option id="x_y" value="y"`其中 x 是类别 (1-6) 的级别，y 是数据库中的类别 ID

5.  在选项上单击

    1.  循环选择框 1-6 并删除如果 id 大于我们单击的项目的索引

    2.  循环浏览页面上所有选定的选项。如果我们位于叶节点，请启用保存/继续按钮并显示所选类别链的摘要。

我还有一些东西要弄清楚，比如何时/如何绑定 jquery 中的所有事件，但这是我将用来编写页面代码的基本大纲。

另外，即使我发布了答案。如果其他人在他们的网站上有类似的代码，请随时发布链接，以便我可以与我的实现进行比较:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:12:01.617

听起来你想要一个向下钻取菜单。这是一个很好的：http: [//filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/](http://filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/)

请参阅第二个和第三个示例。

# java - 如何在 JBoss 7 java webservice 中更改肥皂地址

> ID：11527931
> 
> 赞同：6
> 
> 时间：2012-07-17T17:42:56.460
> 
> 标签：java, jax-ws, jboss7.x

如何更改 Web 服务中的肥皂地址。我正在开发 JBoss 7.1.1。

我有这个网络服务类：

```
@WebService
public class Card {

   @WebMethod
   public CardResponseDTO insertCard(
           @WebParam(name = "cardRequestCardDTO") CardDTO cardDTO,
           @WebParam(name = "userName") String userName) {

       Date today;
       CardResponseDTO cardResponseDTO = new CardResponseDTO();

       try {
            today = Calendar.getInstance().getTime();
            // My logic in here...
            return cardResponseDTO;
       } catch (Exception ex) {
            log.error(ex.getMessage(), ex);
            cardResponseDTO.setErrorCode(-2);
            cardResponseDTO.setErrorMessage(ex.getMessage());
            return cardResponseDTO;
       }
   }
} 
```

当我在我的本地主机上工作时，这个 WSDL 可以正常工作：

```
<wsdl:service name="CardService">
  <wsdl:port binding="tns:CardServiceSoapBinding" name="CardPort">
    <soap:address location="http://localhost:8080/inventory-ws/Card"/>
  </wsdl:port>
</wsdl:service> 
```

但是当我部署到我的服务器时，它的名称为 server1.somedomain.com，它不起作用，因为我只有 http://server1:8080/ ...

```
<wsdl:service name="CardService">
  <wsdl:port binding="tns:CardServiceSoapBinding" name="CardPort">
     <soap:address location="http://server1:8080/inventory-ws/Card"/>
  </wsdl:port>
</wsdl:service> 
```

我需要的是如何让它在我的服务器中使用完整的 url：server1.domedomain.com。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-26T14:17:10.567

如果您需要部署 SOAP Web 服务以供公共访问，例如通过 Apache，您可以在*standalone.xml*中删除这一行：`<wsdl-host>${jboss.bind.address:127.0.0.1}</wsdl-host>`完全。
然后主机名将从 WSDL URL 中获取。
在这种情况下，您不需要为每个部署阶段更改配置。例如*dev.myhost.com、qa.myhost.com 或 ww.myhost.com。*

这也避免了公共服务的错误 SSL 端口 8443 的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-06T10:18:59.290

澄清，

在standalone.xml 中，就在标签下：

```
<subsystem xmlns="urn:jboss:domain:webservices:1.1"> 
```

您必须修改这些条目

```
<modify-wsdl-address>true</modify-wsdl-address>
<wsdl-host>www.myhost.com</wsdl-host> 
```

**要更改端口：**

```
<wsdl-port>80</wsdl-port> <!-- case you need change port, instead 8080 -->
<wsdl-secure-port>443</wsdl-secure-port> <!-- case you need change port, instead 8443 --> 
```

**要更改 URI 架构：**

```
<wsdl-uri-scheme>https</wsdl-uri-scheme> <!-- or http for non secure --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T06:50:42.803

你必须配置 jboss 来监听你想要的接口。为此，您必须编辑standalone.xml 文件并添加一些新的接口标签。我认为这篇文章可能有用。 [https://community.jboss.org/message/614897](https://community.jboss.org/message/614897)

# json - Go-复制结构之间的所有公共字段

> ID：11527935
> 
> 赞同：26
> 
> 时间：2012-07-17T17:43:06.577
> 
> 标签：json, reflection, go, memcpy

我有一个存储 JSON 的数据库，以及一个提供外部 API 的服务器，通过 HTTP 发布，可以更改该数据库中的值。该数据库在内部由不同的进程使用，因此具有共同的命名方案。

客户看到的key是不同的，但是和数据库中的key是1:1映射的（有未暴露的key）。例如：

这是在数据库中：

```
{ "bit_size": 8, "secret_key": false } 
```

这是呈现给客户的：

```
{ "num_bits": 8 } 
```

API 可以根据字段名称更改，但数据库始终具有一致的键。

我在结构中命名了相同的字段，对 json 编码器具有不同的标志：

```
type DB struct {
    NumBits int  `json:"bit_size"`
    Secret  bool `json:"secret_key"`
}
type User struct {
    NumBits int `json:"num_bits"`
} 
```

我`encoding/json`用来做元帅/元帅。

是`reflect`正确的工具吗？有没有更简单的方法，因为所有的键都是一样的？我在想某种`memcpy`（如果我保持用户字段的顺序相同）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-15T19:54:08.547

结构嵌入在这里没有用吗？

```
package main

import (
    "fmt"
)

type DB struct {
    User
    Secret bool `json:"secret_key"`
}

type User struct {
    NumBits int `json:"num_bits"`
}

func main() {
    db := DB{User{10}, true}
    fmt.Printf("Hello, DB: %+v\n", db)
    fmt.Printf("Hello, DB.NumBits: %+v\n", db.NumBits)
    fmt.Printf("Hello, User: %+v\n", db.User)
} 
```

[http://play.golang.org/p/9s4bii3tQ2](http://play.golang.org/p/9s4bii3tQ2)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-22T21:46:47.063

```
buf := bytes.Buffer{}
err := gob.NewEncoder(&buf).Encode(&DbVar)
if err != nil {
    return err
}
u := User{}
err = gob.NewDecoder(&buf).Decode(&u)
if err != nil {
    return err
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-18T15:25:53.393

这是使用反射的解决方案。如果您需要具有嵌入式结构字段等的更复杂的结构，则必须进一步开发它。

[http://play.golang.org/p/iTaDgsdSai](http://play.golang.org/p/iTaDgsdSaI)

```
package main

import (
    "encoding/json"
    "fmt"
    "reflect"
)

type M map[string]interface{} // just an alias

var Record = []byte(`{ "bit_size": 8, "secret_key": false }`)

type DB struct {
    NumBits int  `json:"bit_size"`
    Secret  bool `json:"secret_key"`
}

type User struct {
    NumBits int `json:"num_bits"`
}

func main() {
    d := new(DB)
    e := json.Unmarshal(Record, d)
    if e != nil {
        panic(e)
    }
    m := mapFields(d)
    fmt.Println("Mapped fields: ", m)
    u := new(User)
    o := applyMap(u, m)
    fmt.Println("Applied map: ", o)
    j, e := json.Marshal(o)
    if e != nil {
        panic(e)
    }
    fmt.Println("Output JSON: ", string(j))
}

func applyMap(u *User, m M) M {
    t := reflect.TypeOf(u).Elem()
    o := make(M)
    for i := 0; i < t.NumField(); i++ {
        f := t.FieldByIndex([]int{i})
        // skip unexported fields
        if f.PkgPath != "" {
            continue
        }
        if x, ok := m[f.Name]; ok {
            k := f.Tag.Get("json")
            o[k] = x
        }
    }
    return o
}

func mapFields(x *DB) M {
    o := make(M)
    v := reflect.ValueOf(x).Elem()
    t := v.Type()
    for i := 0; i < v.NumField(); i++ {
        f := t.FieldByIndex([]int{i})
        // skip unexported fields
        if f.PkgPath != "" {
            continue
        }
        o[f.Name] = v.FieldByIndex([]int{i}).Interface()
    }
    return o
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T18:38:43.740

使用结构标签，以下肯定会很好，

```
package main

import (
    "fmt"
    "log"

    "hacked/json"
)

var dbj = `{ "bit_size": 8, "secret_key": false }`

type User struct {
    NumBits int `json:"bit_size" api:"num_bits"`
}

func main() {
    fmt.Println(dbj)
    // unmarshal from full db record to User struct
    var u User
    if err := json.Unmarshal([]byte(dbj), &u); err != nil {
        log.Fatal(err)
    }
    // remarshal User struct using api field names 
    api, err := json.MarshalTag(u, "api")
    if err != nil {
        log.Fatal(err)
    }
    fmt.Println(string(api))
} 
```

添加 MarshalTag 只需要对 encode.go 进行一个小补丁：

```
106c106,112
<       e := &encodeState{}
---
>       return MarshalTag(v, "json")
> }
> 
> // MarshalTag is like Marshal but marshalls fields with
> // the specified tag key instead of the default "json".
> func MarshalTag(v interface{}, tag string) ([]byte, error) {
>       e := &encodeState{tagKey: tag}
201a208
>       tagKey       string
328c335
<               for _, ef := range encodeFields(v.Type()) {
---
>               for _, ef := range encodeFields(v.Type(), e.tagKey) {
509c516
< func encodeFields(t reflect.Type) []encodeField {
---
> func encodeFields(t reflect.Type, tagKey string) []encodeField {
540c547
<               tv := f.Tag.Get("json")
---
>               tv := f.Tag.Get(tagKey) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-03T22:30:40.883

如果结构具有相同的字段名称和类型，则可以转换结构，从而有效地重新分配字段标签：

```
package main

import "encoding/json"

type DB struct {
    dbNumBits
    Secret bool `json:"secret_key"`
}

type dbNumBits struct {
    NumBits int `json:"bit_size"`
}

type User struct {
    NumBits int `json:"num_bits"`
}

var Record = []byte(`{ "bit_size": 8, "secret_key": false }`)

func main() {
    d := new(DB)
    e := json.Unmarshal(Record, d)
    if e != nil {
        panic(e)
    }

    var u User = User(d.dbNumBits)
    println(u.NumBits)
} 
```

[https://play.golang.org/p/uX-IIgL-rjc](https://play.golang.org/p/uX-IIgL-rjc)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T16:59:27.667

“反射是正确的工具吗？” 一个更好的问题可能是，“结构标签是否是正确的工具？” 答案可能是否定的。

```
package main

import (
    "encoding/json"
    "fmt"
    "log"
)

var dbj = `{ "bit_size": 8, "secret_key": false }`

// translation from internal field name to api field name
type apiTrans struct {
    db, api string
}

var User = []apiTrans{
    {db: "bit_size", api: "num_bits"},
}

func main() {
    fmt.Println(dbj)
    type jmap map[string]interface{}
    // unmarshal full db record
    mdb := jmap{}
    if err := json.Unmarshal([]byte(dbj), &mdb); err != nil {
        log.Fatal(err)
    }
    // build result
    mres := jmap{}
    for _, t := range User {
        if v, ok := mdb[t.db]; ok {
            mres[t.api] = v
        }
    }
    // marshal result
    exportable, err := json.Marshal(mres)
    if err != nil {
        log.Fatal(err)
    }
    fmt.Println(string(exportable))
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-18T01:55:18.367

这是一个没有反射、不安全或每个结构的函数的解决方案。这个例子有点复杂，也许你不需要像这样做，但关键是使用 map[string]interface{} 来摆脱带有字段标签的结构。您也许可以在类似的解决方案中使用这个想法。

```
package main

import (
    "encoding/json"
    "fmt"
    "log"
)

// example full database record
var dbj = `{ "bit_size": 8, "secret_key": false }`

// User type has only the fields going to the API
type User struct {
    // tag still specifies internal name, not API name
    NumBits int `json:"bit_size"`
}

// mapping from internal field names to API field names.
// (you could have more than one mapping, or even construct this
// at run time)
var ApiField = map[string]string{
    // internal: API
    "bit_size": "num_bits",
    // ...
}

func main() {
    fmt.Println(dbj)
    // select user fields from full db record by unmarshalling
    var u User
    if err := json.Unmarshal([]byte(dbj), &u); err != nil {
        log.Fatal(err)
    }
    // remarshal from User struct back to json
    exportable, err := json.Marshal(u)
    if err != nil {
        log.Fatal(err)
    }
    // unmarshal into a map this time, to shrug field tags.
    type jmap map[string]interface{}
    mInternal := jmap{}
    if err := json.Unmarshal(exportable, &mInternal); err != nil {
        log.Fatal(err)
    }
    // translate field names
    mExportable := jmap{}
    for internalField, v := range mInternal {
        mExportable[ApiField[internalField]] = v
    }
    // marshal final result with API field names
    if exportable, err = json.Marshal(mExportable); err != nil {
        log.Fatal(err)
    }
    fmt.Println(string(exportable))
} 
```

输出：

> {“bit_size”：8，“secret_key”：假}
> {“num_bits”：8}

编辑：更多解释。正如汤姆在评论中指出的那样，代码背后正在进行反思。这里的目标是通过使用库的可用功能来保持代码简单。json 包目前提供了两种处理数据的方式，结构标签和 [string]interface{} 的映射。struct 标签允许您选择字段，但强制您静态选择单个 json 字段名称。地图允许您在运行时选择字段名称，但不能选择要编组的字段。如果 json 包让你同时做这两个就好了，但事实并非如此。此处的答案仅显示了这两种技术以及如何将它们组合成解决 OP 中示例问题的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-28T11:30:15.333

以下函数使用反射在两个结构之间复制字段。如果 src 字段具有相同的字段名称，则将它们复制到 dest 字段。

```
// CopyCommonFields copies src fields into dest fields. A src field is copied 
// to a dest field if they have the same field name.
// Dest and src must be pointers to structs.
func CopyCommonFields(dest, src interface{}) {
    srcType := reflect.TypeOf(src).Elem()
    destType := reflect.TypeOf(dest).Elem()
    destFieldsMap := map[string]int{}

    for i := 0; i < destType.NumField(); i++ {
        destFieldsMap[destType.Field(i).Name] = i
    }

    for i := 0; i < srcType.NumField(); i++ {
        if j, ok := destFieldsMap[srcType.Field(i).Name]; ok {
            reflect.ValueOf(dest).Elem().Field(j).Set(
                reflect.ValueOf(src).Elem().Field(i),
            )
        }
    }
} 
```

用法：

```
func main() {
    type T struct {
        A string
        B int
    }

    type U struct {
        A string
    }

    src := T{
        A: "foo",
        B: 5,
    }

    dest := U{}
    CopyCommonFields(&dest, &src)
    fmt.Printf("%+v\n", dest)
    // output: {A:foo}
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-09-10T20:47:05.090

实现目标的一种有效方法是使用[gob 包](https://golang.org/pkg/encoding/gob/)。

这是[操场](https://play.golang.org/p/d2IJqqiAHD9)的一个例子：

```
package main

import (
    "bytes"
    "encoding/gob"
    "fmt"
)

type DB struct {
    NumBits int
    Secret  bool
}

type User struct {
    NumBits int
}

func main() {
    db := DB{10, true}
    user := User{}

    buf := bytes.Buffer{}
    err := gob.NewEncoder(&buf).Encode(&db)
    if err != nil {
        panic(err)
    }

    err = gob.NewDecoder(&buf).Decode(&user)
    if err != nil {
        panic(err)
    }
    fmt.Println(user)
} 
```

这里是官方博文：[https ://blog.golang.org/gob](https://blog.golang.org/gob)

# python - Python ConfigParser：检查选项是否存在

> ID：11527939
> 
> 赞同：31
> 
> 时间：2012-07-17T17:43:23.487
> 
> 标签：python, configparser

我正在使用 Python 的 ConfigParser 创建配置文件。我想检查一个部分是否定义了特定的选项，如果有，则获取该值。如果未定义该选项，我只想继续没有任何特殊行为。似乎有两种方法可以做到这一点。

```
if config.has_option('Options', 'myoption'):
    OPTION = config.get('Options', 'myoption') 
```

或者：

```
try:
    OPTION = config.get('Options', 'myoption')
except ConfigParser.NoOptionError:
    pass 
```

一种方法优于另一种方法吗？涉及的`if`行数较少，但我偶尔会读到`try`/`except`在许多情况下被认为更 Pythonic。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-17T17:52:11.643

try/except 和 if-condition 之间的选择是一条模糊的线。

1.  如果您希望异常很少见，请使用 try/except，因为它更接近于模拟思维
2.  相反，像缺少配置项这样的“预期”异常是正常控制流程的一部分，代码应该反映这一点。

没有明显更好的选择，但听起来你有一个案例（2），所以我会选择 if/then。这完全忽略了更容易请求宽恕而不是许可的方面以及结构的相对效率。

# java - java包：找不到符号

> ID：11527941
> 
> 赞同：4
> 
> 时间：2012-07-17T17:43:34.420
> 
> 标签：java, packages

我有一个奇怪的错误。我在同一个包中有 2 个类，但它们找不到彼此。据我所知，只要类在同一个包中，它们应该能够调用彼此的方法。

我的代码与此类似：

在 A.java 中：

```
package com.mypackage;
public class A{
   public static int read(){
    //some code
   }
} 
```

在 B.java 中：

```
package com.mypackage;
public class B{
  public static void main(String args[]){
    int x = A.read();
  }
} 
```

它给了我一个`cannot find symbol variable A`错误。

这两个类都依赖于一些`.jar`文件，但是我已经包含了这些 jar 的路径`CLASSPATH`并`A.java`编译得很好，但是 B 由于某些原因找不到 A...

当我`package com.mypackage;`在两个类中删除它们时，它们编译得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T18:01:31.863

由于您正在编译不同包中的 Java 文件，因此您必须确保它们编译到适当的目录。

您可以使用此调用来做到这一点。替换`$SRC`为您的源文件的位置，您可以让它`$BIN`成为当前目录，或者您机器上的其他位置。

```
javac -sourcepath $SRC -d $BIN A.java B.java 
```

当您想运行它们时，您必须再次手动将它们添加到类路径中（但这并不是一件坏事）。

```
java -cp $BIN com.mypackage.B 
```

此调用应该有效；只是用我桌面上的 A.java 和 B.java 来确保它。使用该`-d`标志可确保在编译时，它们会转到适当的包文件夹方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T17:46:22.640

它应该是：

爪哇

```
package com.mypackage;
class A {
    public static int read(){
       //some code
    }
} 
```

B.java

```
package com.mypackage;
class B {
    public static void main(String args[]){
       int x = A.read();
    }
} 
```

# javascript - 将控件手风琴排列到 div 高度

> ID：11527944
> 
> 赞同：3
> 
> 时间：2012-07-17T17:43:53.457
> 
> 标签：javascript, html, css

我在 div 内的网页中有控件，我的要求是根据 div 高度排列控件，即，当 div 高度发生变化时，控件应根据高度重新排列

这听起来很简单，但非常感谢任何帮助

```
<div class="messagepop pop" id="firstpop" style="width: 250px; display: block;border:4px solid #aaa">
<a class="search-choice-close" onclick="closeRsltDiv('contact','firstpop')"     href="javascript:void(0)" style="float:right;font-weight:900;">X</a>
<div id="div_result_holder" class="chzn-container chzn-container-multi chzn-container- active" style="height:100px;width:248px;overflow-y:scroll;border:2px solid #aaa">
<ul id="merch_drp_div_ul" class="chzn-choices"></ul>
</div>
<br>
<input type="button" class="btn" value="Clear All" onclick="clearSelected('merch_drp')">
</div>
<br/><br/><br/>
<input type="button" id="btnid" class="btn" value="Change Size" onclick="changeSize('firstpop')">

$('#btnid').click(function(){
    //alert("hai");
    var somediv = document.getElementById("firstpop");
    somediv.style.height = "500px";
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:20:18.163

尝试将 innerdiv 的大小动态调整为 80% 的高度值。

**JsFiddle**：http: [//jsfiddle.net/pakuP/4/](http://jsfiddle.net/pakuP/4/)

# php - PHP5 与旧 PHP4 代码

> ID：11527948
> 
> 赞同：0
> 
> 时间：2012-07-17T17:44:23.333
> 
> 标签：php, apache, deprecated

我的朋友想让我调整他的网站。但我得到了错误

> 不推荐使用：在第 7 行的 C:\xampp\htdocs\toolmanager\toolmanager\index.php 中不推荐使用通过引用分配 new 的返回值
> 
> 致命错误：无法在第 154 行的 C:\xampp\htdocs\toolmanager\toolmanager\includes\classloader_platform.php 中重新分配自动全局变量 _REQUEST

当我尝试使用 PHP5 在 apache 上运行代码时。这是代码：

```
 require("includes/classloader_platform.php");
line 7->$classloader =& NEW classloader('0','30',$_GET,'1');
        $classloader->initialize($classloader);

line 154-> function __construct($cache=false,$cache_lifecycle=false,$_REQUEST,$template_parser=false) {
           ini_set("memory_limit","200M");
           //globalize _REQUEST
           $this->_REQUEST=$_REQUEST;
... 
```

我认为这是因为他是按照 PHP4 标准编写的，所以将 apache 切换到 PHP4 会更好，还是有一些简单的修复这些错误的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:52:09.767

不要恢复到 PHP 4。它是旧的并且不受支持**。**

对于*"Deprecated: Assigning the return value of new by reference"*，只需删除`&`. 这是多余的。

```
$classloader = NEW classloader(...); 
```

对于*“致命错误：无法重新分配自动全局变量*”，将函数参数重命名`$_REQUEST`为其他名称，例如`$REQUEST`，然后重命名函数中随后出现的参数。你不能有一个与超全局同名的函数参数。

```
function __construct($cache=false,$cache_lifecycle=false,$REQUEST,$template_parser=false) {
    // ...
    $this->_REQUEST=$REQUEST;
    // ... 
```

# c# - 可以将 CustomSqlType 与 CompositeId 一起使用吗？

> ID：11527951
> 
> 赞同：1
> 
> 时间：2012-07-17T17:44:31.067
> 
> 标签：c#, nhibernate, fluent-nhibernate

使用旧表时，需要基于两个 char(3) 字段创建 CompositeId。看不到任何使 Fluent 成为可能的重载。

我正在尝试的映射如下所示：

```
CompositeId()
.KeyProperty(x => x.LegacyEntity1Id, "LegacyEntity1Id")
.KeyProperty(x => x.LegacyEntity2Id, "LegacyEntity2Id");

Map(x => x.LegacyEntity1Id).CustomSqlType("char(3)");
Map(x => x.LegacyEntity2Id).CustomSqlType("char(3)"); 
```

我也试过：

```
CompositeId()
    .KeyReference(x => x.LegacyEntity1, "LegacyEntity1Id")
    .KeyReference(x => x.LegacyEntity2, "LegacyEntity2Id");

Map(x => x.LegacyEntity1Id).CustomSqlType("char(3)");
Map(x => x.LegacyEntity2Id).CustomSqlType("char(3)"); 
```

两者都产生相同的结果 - 使用适当的复合 ID 生成表，但两列都是默认的 nvarchar(255)。结果，外键无法生成，并且出现异常，因为父表是 char(3)。

这不能通过 Fluent 映射吗？

如果没有，像这样映射它有什么真正的区别*：

```
Id(x => x.Id).GeneratedBy.Identity();

Map(x => x.LegacityEntity1Id).CustomSqlType("char(3)");
Map(x => x.LegacityEntity2Id).CustomSqlType("char(3)");

References(x => x.LegacityEntity1).Column("LegacityEntity1Id").UniqueKey("1").Not.Nullable();
References(x => x.LegacityEntity2).Column("LegacityEntity2Id").UniqueKey("1").Not.Nullable(); 
```

* 我确实有能力稍微修改表（足以添加身份），因为旧表正在 ETL 到本地 SQL 实例中。

还是有另一种替代方法？在这种情况下，不能使用 HasManyToMany，因为它的价值（将有一个有效负载）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:58:31.370

KeyReference 将搜索被引用实体的映射并在那里使用 sqltype。转到引用的实体并指定`Id(x => x.Id).Length(3)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-24T17:51:16.337

这是2017年的做法：

```
CompositeId()
  .KeyProperty(
     x => x.LegacyEntity1Id, 
     k => k.ColumnName("LegacyEntity1Id").Type("AnsiString").Length(3))
  .KeyProperty(
     x => x.LegacyEntity2Id, 
     k => k.ColumnName("LegacyEntity2Id").Type("AnsiString").Length(3)) 
```

# c# - System.Threading.ThreadAbortException 在新线程中触发

> ID：11527960
> 
> 赞同：2
> 
> 时间：2012-07-17T17:45:08.317
> 
> 标签：c#, c#-4.0, task-parallel-library, parallel-extensions, taskfactory

我目前在.net c# 4.0 中工作，并且遇到了一些我编写的代码的问题，这让我有些头疼。

我使用 System.Threading.Tasks.TaskFactory 类和 System.Threading.Tasks.TaskScheduler 在我的控制台应用程序中启动一个新线程，其中线程的功能是检查是否已将项目添加到队列中。当一个项目被添加到队列中时，它会处理它。

因此队列包含要发送的电子邮件，一旦将电子邮件添加到队列中，该电子邮件就会通过多个客户端发送。发送到每个是并行完成的。

我有这个间歇性问题，有时在新线程中会出现以下异常：

[System.Threading.ThreadAbortException] = {无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部。}

调试时，我无法获得任何进一步的信息，因为堆栈中的所有属性都有“无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部。”

在互联网上寻找解决方案，我发现这是在执行 response.redirect 时出现的问题，但我没有在我的代码中这样做。如果我尝试调试，则对于此错误发生的位置没有一致性。以下是我用来创建工厂并启动新线程的代码：

```
 this.taskFactory = new TaskFactory(TaskScheduler.Current);
    this.taskFactory.StartNew(this.DequeueMessage, state, TaskCreationOptions.LongRunning); 
```

有没有人知道我为什么会收到这个错误以及如何修复它的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:02:59.050

你得到 a 的唯一原因`ThreadAbortException`是因为`Thread.Abort`在线程上被调用。如果您不手动执行此操作，则客户端应用程序终止时可能会发生这种情况。当东西被回收时，它也会发生在托管环境中。如果您提供更多详细信息，则可以提供更具体的答案。

# iphone - 确定一个对象是否被多个线程访问？

> ID：11527962
> 
> 赞同：4
> 
> 时间：2012-07-17T17:45:24.857
> 
> 标签：iphone, objective-c, ios, cocoa

我遇到了零星的 EXC_BAD_ACCESS 崩溃，我认为这与多线程问题有关。（我尝试使用 Zombies 进行分析，但分析时应用程序不会崩溃）。所以我想知道是否有任何一种机制，用于调试目的，以确定一个对象是否同时被多个线程访问？如果是这种情况，也许会以某种方式打印日志语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T18:42:28.317

判断您是否是唯一在线程上执行的人的简单而肮脏的方法将依赖于不受保护的静态变量：

```
-(void)concurrentMethod {
    static NSThread *runningThread = nil;
    NSThread *myThread = [NSThread currentThread];
    if (runningThread != nil) {
        NSLog(@"Thread %@: running concurrently with %@", runningThread, myThread);
    }
    runningThread = myThread;

    ... // Do the useful stuff here

    if (runningThread != myThread) {
        NSLog(@"Thread %@: pre-empted by %@", myThread, runningThread);
    }
    runningThread = nil;
} 
```

# python - 有效地将字符串列表转换为 float32

> ID：11527964
> 
> 赞同：4
> 
> 时间：2012-07-17T17:45:31.360
> 
> 标签：python, numpy

我有一个 3000x300 矩阵文件（浮点数）。当我阅读并转换为浮点数时，我得到了 float64，这是 python 中的默认值。我尝试了 numpy 和 map() 将其转换为 float32() 但它们似乎都非常低效。

我的代码：

```
x = open(readFrom, 'r').readlines()
y = [[float(i) for i in s.split()] for s in x] 
```

用的时间：`0:00:00.996000`

numpy 实现：

```
x = open(readFrom, 'r').readlines()
y = [[np.float32(i) for i in s.split()] for s in x] 
```

用的时间：`0:00:06.093000`

地图（）

```
x = open(readFrom, 'r').readlines()
y = [map(np.float32, s.split()) for s in x] 
```

用的时间：`0:00:05.474000`

如何非常有效地转换为 float32？

谢谢你。

`Update:`

`numpy.loadtxt()`或`numpy.genfromtxt()`无法为大文件工作（给出内存错误）。我已经发布了一个与此相关的问题，我在这里介绍的方法适用于巨大的矩阵文件（50,000x5000）。[这是问题](https://stackoverflow.com/questions/11485369/memory-error-numpy-genfromtxt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:05:39.203

如果内存是个问题，并且如果您提前知道字段的大小，那么您可能一开始就不想读取整个文件。像这样的东西可能更合适：

```
#allocate memory (np.empty would work too and be marginally faster, 
#                 but probably not worth mentioning).
a=np.zeros((3000,300),dtype=np.float32)  
with open(filename) as f:
    for i,line in enumerate(f):
        a[i,:]=map(np.float32,line.split()) 
```

从我机器上的几个快速（和令人惊讶的）测试来看，似乎`map`甚至可能没有必要：

```
a=np.zeros((3000,300),dtype=np.float32)  
with open(filename) as f:
    for i,line in enumerate(f):
        a[i,:]=line.split() 
```

这可能不是最快的，但肯定是最节省内存的方法。

一些测试：

```
import numpy as np

def func1():   #No map -- And pretty speedy :-).
    a=np.zeros((3000,300),dtype=np.float32)
    with open('junk.txt') as f:
        for i,line in enumerate(f):
            a[i,:]=line.split()

def func2():
    a=np.zeros((3000,300),dtype=np.float32)
    with open('junk.txt') as f:
        for i,line in enumerate(f):
            a[i,:]=map(np.float32,line.split())

def func3():
    a=np.zeros((3000,300),dtype=np.float32)
    with open('junk.txt') as f:
        for i,line in enumerate(f):
            a[i,:]=map(float,line.split())

import timeit

print timeit.timeit('func1()',setup='from __main__ import func1',number=3)  #1.36s
print timeit.timeit('func2()',setup='from __main__ import func2',number=3)  #11.53s
print timeit.timeit('func3()',setup='from __main__ import func3',number=3)  #1.72s 
```

# sql - 在 C# 中生成手动计划的 Crystal 报表

> ID：11527965
> 
> 赞同：0
> 
> 时间：2012-07-17T17:45:39.113
> 
> 标签：sql, database, crystal-reports, report, manual

我有一个 SQL 数据库，我需要从中创建每天、每周和每月的报告。我正在考虑手动创建 Crystal Reports，以便我可以使用计时器定期执行该特定功能。这是一个好方法还是有其他方法可以做到这一点？一个例子将不胜感激......在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:28:53.540

我知道您要求使用 Crystal Reports，但假设您安装了 SQL Server 2008 Reporting Services，您可以通过这种方式创建报表，而无需获取第二个软件包。

Microsoft Technet（[“如何：计划报告和订阅处理（SharePoint 集成模式下的 Reporting Services”](http://technet.microsoft.com/en-us/library/bb283320%28v=sql.105%29)）和代码片段（“ [SSRS：使用 SQL Server Reporting Services 2008 计划报告](http://snippetsandhelp.blogspot.com/2011/02/ssrs-scheduling-reports-using-sql.html)”）都有一些计划报告的示例。

# jquery - JQuery 选项卡中的 HighCharts

> ID：11527966
> 
> 赞同：0
> 
> 时间：2012-07-17T17:45:40.273
> 
> 标签：jquery, highcharts, jquery-tabs

在 JQuery 选项卡中使用 HighCharts 作为 ASPX 用户控件时，我遇到了一个奇怪的问题。

所有页面均源自母版页。JQuery 选项卡在所有内容页面中都可以正常工作，但是当我将 HighCharts 用户控件与选项卡一起放置时，显示的空白页面没有可用的呈现 HTML（查看源代码）。当我删除标签时，图表也可以正常工作。

这是代码：

```
 <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <script>
        $(function () {
            $("#tabs").tabs();
        });
    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Chart</a></li>
        </ul>
        <div id="tabs-1">
            <div>
                <control:Chart ID="ChartData" runat="server"></control:Chart>
            </div>
        </div>
    </div>
</asp:Content> 
```

这让我发疯了。任何帮助表示赞赏。

最好的问候，费萨尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:05:53.697

这是[IE](http://highslide.com/forum/viewtopic.php?f=10&t=18375)的一个已知问题。该链接提供了一个有点麻烦的解决方法。

# javascript - 从 DOM 中移除节点

> ID：11527968
> 
> 赞同：0
> 
> 时间：2012-07-17T17:45:45.953
> 
> 标签：javascript

菜鸟问题提醒！我正在研究一个每秒更新的基本时钟，但它没有更新，因为我收到未捕获错误：NOT_FOUND_ERR：DOM Exception 8。基本上我只需将函数末尾的 removeChild() 更改为其他内容，但我不知道改成什么。我想删除`<p class="time">`正在创建的。

```
function spitTime() {
    var clock = new Date();
    var hours = clock.getHours();
    var minutes = clock.getMinutes();
    var seconds = clock.getSeconds();

    if (minutes <= 9) {
        minutes = "0" + minutes;
    }

    if (seconds <= 9) {
        seconds = "0" + seconds;
    }

    var displayTime = hours + ":" + minutes + ":" + seconds;
    var newTimeElem = document.createElement("p");
    newTimeElem.className = "time";
    var timeText = document.createTextNode(displayTime);
    newTimeElem.appendChild(timeText);
    document.getElementById("timePlace").appendChild(newTimeElem);
    document.getElementById("timePlace").removeChild();
} 
```

相关HTML：

```
<div class="clock">
    <span id="timePlace"></span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:51:25.997

根据您的问题，您不想删除孩子，而是想更改现有元素的文本。

为此，您可以使用`textContent`：

```
document.getElementById( 'timePlace' ).textContent = displayTime; 
```

需要注意的是，这不是跨浏览器。IE8 及以下版本可`innerText`改为使用。一个快速的使用方法是这样的：

```
var timePlace = document.getElementById( 'timePlace' );
if ( 'textContent' in timePlace ) {
    timePlace.textContent = displayTime;
}
else {
    timePlace.innerText = displayTime;
} 
```

但是，这是一个黑客。它适用于您的情况，但不要依赖于此。

如果你真的想要跨浏览器兼容性，顺便说一下，你正在使用 jQuery（或任何其他类似的库）。jQuery改变文本的方法：

```
$( '#timePlace' ).text( displayTime ); 
```

它使用`nodeValue`, 唯一真正的跨浏览器方式来处理文本。但它必须递归地执行此操作，因为它仅适用于`textNodes`. 它相当于使用`data`（正如@amnotiam 在您的问题评论中所做的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:49:38.383

您没有指定要删除的子节点。

**[Node.removeChild](https://developer.mozilla.org/En/DOM/Node.removeChild)**

```
var oldChild = element.removeChild(child);
element.removeChild(child); 
```

*   child 是要从 DOM 中删除的子节点。
*   element是child的父节点。
*   oldChild 持有对已移除子节点的引用。oldChild == 孩子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:48:34.633

如果要删除`timePlace`元素本身：

```
document
    .getElementById("timePlace")
    .parentNode
    .removeChild(document.getElementById('timePlace')); 
```

假设这是意图，这通过找到相关元素/节点 ( ) *、*`getElementById()`移动到该`parentNode`元素的当前元素/节点的节点）。`removeChild()`

 ** * *

根据 OP 的评论更新（如下），只需使用：

```
newTimeElem.parentNode.removeChild(newTimeElem); 
```

参考：

*   [`removeChild()`](https://developer.mozilla.org/En/DOM/Node.removeChild).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T17:51:25.987

```
 <script type="text/javascript"> 
        function spitTime() {
            var clock = new Date();
            var hours = clock.getHours();
            var minutes = clock.getMinutes();
            var seconds = clock.getSeconds();

            if (minutes <= 9) {
                minutes = "0" + minutes;
            }

            if (seconds <= 9) {
                seconds = "0" + seconds;
            }

            var displayTime = hours + ":" + minutes + ":" + seconds;
            var newTimeElem = document.createElement("p");
            newTimeElem.className = "time";
            var timeText = document.createTextNode(displayTime);
            newTimeElem.appendChild(timeText);
            $('#timePlace').children('.time').remove();
            document.getElementById("timePlace").appendChild(newTimeElem);
            setTimeout('spitTime()', 100);
        }
        $(document).ready(function(){
            setTimeout('spitTime()', 100);
        });
    </script>
</head>
<body>
    <div class="clock">
        <span id="timePlace"></span>
    </div>
</body> 
```

链接： http: [//lib-eguide.nus.edu.sg/test1.php](http://lib-eguide.nus.edu.sg/test1.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T19:10:53.543

```
while (timePlace.firstChild) {
    timePlace.removeChild(timePlace.firstChild)
} 
```

这就是我想要的，尽管编辑内容可能会更好，这对我来说非常有用。*

# google-app-engine - GWTP PlaceManager 的延迟绑定失败

> ID：11527969
> 
> 赞同：0
> 
> 时间：2012-07-17T17:45:48.183
> 
> 标签：google-app-engine, gwt, guice, gwt-gin, gwtp

这是我在运行我的应用程序时遇到的错误：

> java.lang.RuntimeException：在 com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl .java:53) 在 com.myapp.client.gin.ClientGinjectorImpl.create_Key$type$com$gwtplatform$mvp$client$proxy 的 com.google.gwt.core.client.GWT.create(GWT.java:97) $PlaceManager$_annotation$$none$$(ClientGinjectorImpl.java:597) at com.myapp.client.gin.ClientGinjectorImpl.get_Key$type$com$gwtplatform$mvp$client$proxy$PlaceManager$_annotation$$none$$( ClientGinjectorImpl.java:611) 在 com.myapp.client.gin.ClientGinjectorImpl.getPlaceManager(ClientGinjectorImpl.java:27) 在 com.myapp.client.MainAppEntryPoint.onModuleLoad(MainAppEntryPoint.java:17) 在 sun.reflect.NativeMethodAccessorImpl。在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java: 43) 的 invoke0(Native Method) 601) 在 com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396) 在 com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200) 在 com.google.gwt .dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525) at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363) at java.lang.Thread.run(Thread.java:722 ) 引起：com.google.gwt.core.ext.UnableToCompleteException：（参见以前的日志条目）在 com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:503) 在 com.google.gwt.core.client.GWT.create(GWT.java:97) 在 com.myapp.client 的 com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49) .gin.ClientGinjectorImpl.create_Key$type$com$gwtplatform$mvp$client$proxy$PlaceManager$_annotation$$none$$(ClientGinjectorImpl.java:597) 在 com.myapp.client.gin.ClientGinjectorImpl.get_Key$type$com $gwtplatform$mvp$client$proxy$PlaceManager$_annotation$$none$$(ClientGinjectorImpl.java:611) 在 com.myapp.client.gin.ClientGinjectorImpl.getPlaceManager(ClientGinjectorImpl.java:27) 在 com.myapp.client。 MainAppEntryPoint.onModuleLoad(MainAppEntryPoint.java:17) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl。在 com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396) 在 com.google 的 java.lang.reflect.Method.invoke(Method.java:601) 调用(DelegatingMethodAccessorImpl.java:43) .gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200) 在 com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525) 在 com.google.gwt.dev.shell.BrowserChannelServer .run(BrowserChannelServer.java:363) 在 java.lang.Thread.run(Thread.java:722)processConnection(BrowserChannelServer.java:525) at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363) at java.lang.Thread.run(Thread.java:722)processConnection(BrowserChannelServer.java:525) at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363) at java.lang.Thread.run(Thread.java:722)

虽然我在`.gwt.xml`文件中有这些：

```
<inherits name="com.google.gwt.inject.Inject"/>
<inherits name='com.gwtplatform.mvp.Mvp'/>
<inherits name='com.gwtplatform.dispatch.Dispatch'/>

<define-configuration-property name='gin.ginjector' is-multi-valued='false' />
<set-configuration-property name='gin.ginjector' value='com.myapp.client.gin.ClientGinjector' /> 
```

在应用程序中`WEB-INF/lib`：

```
guice-assistedinject-3.0-rc2.jar
guice-servlet-3.0.jar
guice-3.0.jar  
gin-1.5.0.jar
gin-1.5-post-gwt-2.2.jar
gwtp-all-0.7.jar 
```

可能缺少什么？

# c# - 当类型为“未知”时声明对象

> ID：11527973
> 
> 赞同：0
> 
> 时间：2012-07-17T17:46:04.250
> 
> 标签：c#, object

这是我的问题：

我有这个功能

```
public static void fillObject(object [] obs, DataTable dt)
{
    for (int j = 0; j < dt.Rows.Count; j++)
    {
        DataRow dr = dt.Rows[j];
        fillObject(obs[j], dr);
    }
} 
```

`obs`是某种类型的类的数组（例如“羊”），当我调试时我得到它`obs[j]`是一个`null`而不是对象类型，`sheep`所以我需要做类似的事情

```
obs[j] = new sheep(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:49:34.180

如果你想强类型化你的解决方案，你可以使用泛型

```
public static void FillObject<T>(T [] obs, DataTable dt) where T: new
{
    //...

    obs[j] = new T();
} 
```

然后你会调用这个函数

```
FillObject<Sheep>(mySheep, dt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:53:24.740

很难准确说出您的意思；根据具体情况，您可以执行以下操作之一：

您可以将构造函数传递给该方法：

```
public static void fillObject(object [] obs, DataTable dt, Func<object> builder)
{
   for (int j = 0; j < dt.Rows.Count; j++)
   {
      DataRow dr = dt.Rows[j];

      if (obs[j] == null)
         obs[j] = builder();

      fillObject(obs[j], dr);
   }
} 
```

或者，如果您知道类型，则可以使用构造函数字典：

```
Dictionary<Type, Func<object>> sBuilders = new Dictionary<Type, Func<object>>
{
   { typeof(Type1), () => new Type1() },
   { typeof(Type2), () => new Type2() },
   // etc...
};

public static void fillObject(object [] obs, DataTable dt, Type pType)
{
   for (int j = 0; j < dt.Rows.Count; j++)
   {
      DataRow dr = dt.Rows[j];

      if (obs[j] == null)
         obs[j] = sBuilders[pType]();

      fillObject(obs[j], dr);
   }
} 
```

# android - 从 USB 拔出时，Android 应用程序崩溃

> ID：11527978
> 
> 赞同：0
> 
> 时间：2012-07-17T17:46:19.120
> 
> 标签：android, crash, usb

我的应用程序启动了一个`Activity`，它使用两个`Fragments`来提供从`List`.

启动时，应用程序**会读取**`SQLite`外部存储上的数据库。此外，它还从外部存储上的 xml 文件中收集数据。

一切都很好，很顺利:)

但是由于我正在使用一个抽象类来重用我的细节`Fragments`中的代码，所以应用程序开始表现得很奇怪。当我在打开或隐藏细节的情况下**从 USB 插入或拔出设备**`Fragment`时- 应用程序崩溃。

> “抱歉，应用程序 xyz 已意外停止。...请重试”

我认为它与细节有关`Fragments`。我不确定，因为如果您拔下设备，调试器或日志记录将无法工作：D
但所有其他功能都可以正常工作。

如果拔下设备，应用程序会发生什么？也许我可以干预那里...

*抽象细节片段*：

```
public AbstractWISDetailFragment(ChooseData cData) {
        this.data = cData;
    }

@Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        setDetail();
        view.setClickable(true);
    }

protected abstract void setDetail(); 
```

*实现片段*：

```
public ActorDetailFragment(ChooseData data) {
    super(data);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.akteur_detail, container, false);
    return view;
}
@Override
protected void setDetail() {
    // something
    ...
} 
```

## 编辑：

从我触摸列表项以实例化详细片段的那一刻起，这是我的 logcat 条目：

```
I/InputReader(  305): dispatchTouch::touch event's action is 0, pending(waiting
finished signal)=0
I/InputDispatcher(  305): Delivering touch to current input target: action: 0, c
hannel '41a8fc30 ...ChooseActivity (server)'
I/InputDispatcher(  305): Delivering touch to current input target: action: 0, c
hannel 'TouchIntercepter (server)'
I/InputReader(  305): dispatchTouch::touch event's action is 1, pending(waiting
finished signal)=0
I/InputDispatcher(  305): Delivering touch to current input target: action: 1, c
hannel '41a8fc30 ...ChooseActivity (server)'
I/InputDispatcher(  305): Delivering touch to current input target: action: 1, c
hannel 'TouchIntercepter (server)'
D/WIS_ActorList( 2686): new actor item data set (process reseted)
D/WIS_ChooseActivity( 2686): ProcessButton enabled
D/WIS_ChooseActivity( 2686): ProcessStartButton disabled
D/WIS_ChooseActivity( 2686): ProcessStartButton disabled
D/HierarchicalStateMachine(  305): handleMessage: E msg.what=65619
D/HierarchicalStateMachine(  305): processMsg: ConnectedState
D/WifiStateMachine(  305): ConnectedState{ what=65619 when=-3ms arg1=4 }
D/HierarchicalStateMachine(  305): handleMessage: X
D/HierarchicalStateMachine(  305): handleMessage: E msg.what=65619
D/HierarchicalStateMachine(  305): processMsg: ConnectedState
D/WifiStateMachine(  305): ConnectedState{ what=65619 when=-3ms arg1=4 }
D/HierarchicalStateMachine(  305): handleMessage: X
D/dalvikvm( 2305): GC_EXPLICIT freed 329K, 9% free 6875K/7495K, paused 7ms+2ms
W/PowerManagerService(  305): Timer 0x3->0x3|0x1
D/HierarchicalStateMachine(  305): handleMessage: E msg.what=65619
D/HierarchicalStateMachine(  305): processMsg: ConnectedState
D/WifiStateMachine(  305): ConnectedState{ what=65619 when=-4ms arg1=4 }
D/HierarchicalStateMachine(  305): handleMessage: X
D/HierarchicalStateMachine(  305): handleMessage: E msg.what=65619
D/HierarchicalStateMachine(  305): processMsg: ConnectedState
D/WifiStateMachine(  305): ConnectedState{ what=65619 when=-4ms arg1=4 }
D/HierarchicalStateMachine(  305): handleMessage: X
D/HierarchicalStateMachine(  305): handleMessage: E msg.what=65619
D/HierarchicalStateMachine(  305): processMsg: ConnectedState
D/WifiStateMachine(  305): ConnectedState{ what=65619 when=-4ms arg1=4 }
D/HierarchicalStateMachine(  305): handleMessage: X 
```

如果我拔下设备 logcat 会杀死自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:57:05.847

显然，当拔下设备时，活动活动将恢复。如果 - 就像我的情况一样 - 你不使用*setArgument*并将*Bundles*传递给你的片段，就会出现问题。
因此，我有类似空指针的东西，因为我的片段无法重新初始化自身，并且它的数据对象通过构造函数传递。
Eclipse 告诉我不要使用非标准的构造函数。这样，通过参数的基本数据对象 exange 将不起作用。

解决方案：
只需与 Bundle 交换数据（这就是它的处理方式）：

```
Bundle extra = new Bundle();
extra.putSerializable("myData" this.data);
Fragment fragment = new fragment ();
fragment.setArguments(extra); 
```

tada - 一切正常。
如果您在所有活动和意图中牢记这一点，您就不会遇到任何麻烦。

高频

# javascript - Javascript prototype and closures

> ID：11527981
> 
> 赞同：1
> 
> 时间：2012-07-17T17:46:24.063
> 
> 标签：javascript

Given this code:

```
function Test(){
    var $D = Date.prototype;
    $D.addDays=function(value){this.setDate(this.getDate()+value);return this;};
    $D.clone = function() {
        return new Date(this.getTime());
    };
    alert(new Date().addDays(5));
    var x = 5;
}

Test();

alert(new Date().addDays(1));
​alert(x);​ 
```

The only error is thrown by `alert(x)` which throws the "x is undefined" error, because x is limited to function `Test()`

The call to `addDays()` works both within the function and outside it.

I'm assuming this is because the scope of the Date prototype is global, so it's irrelevant that I extend it within a closure.

So if I wanted to extend Date within a closure, BUT NOT allow any other javascript to get the extension, how would I do it?

The reason I'm asking is because when I'm extending core javascript objects, I don't want to conflict with other libraries which may make the same modifications.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:51:17.493

There are a couple ways to do what you're talking about. You can just delete your changes when you're done:

```
function Test() {
    var $D = Date.prototype;
    // ...
    delete $D.addDays;
    delete $D.clone;
} 
```

This would work if you needed the methods only during a single execution. It wouldn't work if you need the methods to be available indefinitely, but only within your module.

If that's not the case, you can add the extension methods directly to the Date objects you (not to the prototype). Within your module, you could have a function that creates these special `Date` objects for you:

```
function createDate() {
    var d = new Date();
    d.method1 = function() { ... };
    d.method2 = function() { ... };
    return d;
} 
```

Finally, you can use helper functions scoped within your closure instead of extending the prototype. Really, extending the prototype is just syntactic sugar for you in this case anyway.

# javascript - EXTJS 3：将 autoHeight 和 autoWidth 设置为网格

> ID：11527982
> 
> 赞同：1
> 
> 时间：2012-07-17T17:46:25.097
> 
> 标签：javascript, extjs

我正在使用 EXTJS 3，我有如下代码。头痛的部分是

1.  如何将 atuo 水平滚动条放到 Grid 中？
2.  如何让 Grid 捕获最大高度？如何将自动垂直滚动条设置为网格？

目前，我必须手动将 Grid 设置为 Frame 和 height 。

```
frame: true,
height: 500, 
```

如果我这样做，**当用户更改 IE 大小时，水平滚动条将消失**。我已经尝试了 autoHeight 和 autoWidth ，它仍然无法正常工作。

```
//register this namespace
Ext.namespace('MyPkg.Ui');

//create a class in this namespace
MyPkg.Ui.Report = Ext.extend(Ext.form.FormPanel, {
    allowpaging: true,
    pageSize: 30,

    initComponent: function () {

        var period_start = new Ext.form.DateField({
            id: 'PERIOD_START',
            fieldLabel: 'PERIOD START',
            format: 'm/d/Y',
            allowBlank: true,
            width: 250
        });
        var Store = new Ext.data.DirectStore({           
            autoLoad: false,
            paramsAsHash: false,
            paramOrder: 'PERIOD_START',
            root: 'Report',         
            totalProperty: 'total',
            fields: [
                { name: '_DETAIL_ID', type: 'string' },
                { name: 'RUNID', type: 'string' },   
                ....
            ],
            remoteSort: false,
            listeners: {
                load: function (store, records, opt) {
                    //Grid.setHeight(500);
                    Grid.doLayout();                   
                }
            }
        });

        var pager = new Ext.PagingToolbar({
            store: Store,
            displayInfo: true,
            pageSize: this.pageSize,
            listeners: {
                beforechange: function (paging, params) {
                    var reportStore = Ext.StoreMgr.lookup('Store');
                    reportStore.setBaseParam('start', params.start);
                    reportStore.setBaseParam('limit', this.pageSize);
                    reportStore.setBaseParam('PERIOD_START', period_start.getValue());                  
                }
            }
        });

        var Grid = new Ext.grid.GridPanel({
            store: Store,
            loadMask: true,
            stripeRows: true,
            frame: true,
            height: 500,
            colModel: new Ext.grid.ColumnModel({
                defaults: {
                    width: 120,
                    sortable: true
                },
                columns: [

                {header: '', dataIndex: 'ROW_ID'},
                { header: 'PRICING FEED', dataIndex: 'PRICING_FEED' },
                { header: 'DATAFILE TREE', dataIndex: 'DATAFILE_TREE' },
                { header: 'ADO LIST ID', dataIndex: 'ADO_LIST_ID' },
                { header: 'FEED RUN DATE', dataIndex: 'FEED_RUN_DATE_STR' },
                .....

                ]
            }),
            viewConfig: {
                forceFit: false
            }
        });

        var config = {
            items: [period_start, Grid],
            api: {
                submit: Report.ReadReport
            },
            bbar: pager,
            tbar: [....]
        }; //use the config we defined as the initial config for this class
        Ext.apply(this, Ext.apply(this.initialConfig, config));

        //use this function as the initComponent function
        MyPkg.Ui.Report.superclass.initComponent.call(this);
    }
});

Ext.reg('Report', MyPkg.Ui.Report); 
```

# documentation - Jira 与 Google Docs for Sprint（敏捷）

> ID：11527983
> 
> 赞同：0
> 
> 时间：2012-07-17T17:46:26.423
> 
> 标签：documentation, agile, jira, scrum

有人可以让我知道利弊或使用 Jira 和/或 Google 文档进行敏捷冲刺吗？我们是由 8 名开发人员组成的团队，并计划切换到 Jira 或 google docs。

我们目前使用白板来编写 sprint 故事......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:41:38.087

老实说，这就像将一部旧手机与一部新智能手机进行比较——确实，你可以同时使用两者来拨打电话，但在智能手机上你可以做的事情更多...... Jira 的专家名单很长，而且我不认为 Google 文档比 Jira 有任何主要优点，除了它是免费的。您可以免费试用 jira 来评估它，只需从[http://www.atlassian.com/software/jira/overview](http://www.atlassian.com/software/jira/overview)获取。

如果您将它用于敏捷规划，请注意 Jira 本身缺乏许多急需的敏捷属性，但它们提供了一个名为 green-hopper 的扩展，它增加了很多功能并有助于敏捷管理。

# javascript - 使用 PHP 交付 JavaScript 是否安全？

> ID：11527986
> 
> 赞同：2
> 
> 时间：2012-07-17T17:46:31.377
> 
> 标签：javascript, browser, security

我正在使用以下内容：

```
<script type="text/javascript" src="/php/dictionary.php">

</script> 
```

dictionary.php 是一个输出 JavaScript 代码的 PHP 脚本。我使用 dictionary.php 生成 JavaScript 的原因是 JavaScript 中的某些值取决于区域设置和用户。

我想知道这种技术是否与直接使用 Javascript 文件一样安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:01:20.423

不，这不安全，因为您希望为不同的用户提供不同的脚本。该脚本将被缓存，因此用户可能会为之前在同一台计算机上登录的其他用户获取脚本。

如果您需要它是安全的，请为登录用户生成一个代码，并在您请求脚本时将其发送到查询字符串中，以便您可以验证正确的用户是否获得了脚本。由于 URL 会有所不同，因此也会单独缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:48:02.737

Javascript 只会影响客户端。除非您在 .php 文件中公开影响其他用户的客户端操作，否则可能会滥用跨站点脚本，否则应该没问题。

**参考**：[http ://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

这是安全的，因为他们可能追求的任何潜在漏洞只会影响客户端，因为从 Javascript 调用的所有服务器端文件也都已为安全性打了补丁。

# drupal-7 - Drupal fb Like Box Css

> ID：11527988
> 
> 赞同：0
> 
> 时间：2012-07-17T17:46:35.713
> 
> 标签：drupal-7, drupal-theming

我正在使用 Drupal 7 创建一个网站。我刚刚安装了“**社交媒体**”和“**小部件**”模块。然后，我将 fb like 框添加到我的 danblog 主题的左侧边栏区域。

![这是截图](../Images/65f05a009c4c0aec5f11cc4c77afa6fb.png)

如您所见，框溢出了块。我可以通过一些配置解决它还是需要手动更改css？

我想知道在哪里可以找到这些块的 CSS，以便我可以尝试更改它？drupal中有很多.php文件和一些.css文件。

如果有人可以详细说明一些技术或一些基本理解，我可以在这些 php 文件中找到块的样式，因为我认为它们可能不在单独的 .css 文件中

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:00:06.093

**不推荐**快速修复：

```
#f3c805688 { width: 220px!important; } 
```

在这种情况下，您真的不想将`!important`它用作快速修复，但理想的修复是在通过某些后端接口将 iFrame 插入页面之前更改 iFrame 的高度。社交媒体模块是否可以选择更改宽度？

# java - 遍历 List 时跳过第一项

> ID：11527989
> 
> 赞同：2
> 
> 时间：2012-07-17T17:46:36.447
> 
> 标签：java

我需要跳过第一个遍历`List`.

```
for (MyClass myObject : myList) {
    myObject.doSomething();
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-17T17:49:08.227

就像是：

```
for (MyClass myObject : myList.subList(1, myList.size()) {
       myObject.doSomething();
} 
```

虽然我认为如果您的列表没有至少一项，它可能不起作用......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-17T17:50:54.433

如果您使用常规 for 循环，您可以这样做：

```
int size = myList.size();
for (int i = 1; i < size; i++) {
    myList.get(i).doSomething();
} 
```

或内联：

```
for (int i = 1; i < myList.size(); i++) {
    myList.get(i).doSomething();
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-17T18:01:17.073

为了完整起见，一个迭代器示例：

```
 Iterator<MyClass> iterator = myList.iterator();
    if (iterator.hasNext()) {
        iterator.next();
    }

    while (iterator.hasNext()) {
        iterator.next().doSomething();
    } 
```

# jquery - 悬停时向上滑动元素

> ID：11527996
> 
> 赞同：0
> 
> 时间：2012-07-17T17:47:21.973
> 
> 标签：jquery

看看[http://www.shopvcf.com/blog/?page_id=56](http://www.shopvcf.com/blog/?page_id=56)

我需要用这个代码完成的带有红色心脏的区域向上滑动。

```
$(document).ready(function () {
    $('div.bottomwrap').on({
        'mouseenter': function () {
            $(this).animate({
                bottom: 20
            });
        },
        'mouseleave': function () {
            $(this).animate({
                bottom: 0
            });
        }
    });
}); 
```

问题是我希望它在进入包含内容的盒子时向上滑动，而不仅仅是底部包装。

我还想同时隐藏将在背景中显示图像的图像。

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:01:26.347

您要做的一件事是将动画队列设置为 false 并设置持续时间。否则，如果用户在屏幕上快速来回悬停，那么所有东西都会继续移动。

查看[http://api.jquery.com/animate/](http://api.jquery.com/animate/)了解更多详细信息，但它看起来像这样：

至于你的问题。我会首先更改所有设置“jpgoverlay”的**id - 将其设置为类名 - 如果是一个选项。**那么下面的代码应该可以解决问题。拥有一个非唯一名称的 ID 可能会在以后给您带来一些痛苦。

```
$(document).ready (function () {
    $('div.jpgoverlay').on({
         'mouseenter': function() {
         $(this).animate({ bottom: 20 },{queue:false,duration:400});
    },
     'mouseleave': function() {
         $(this).animate({ bottom: 0 },{queue:false,duration:400});
     }
    });
}); 
```