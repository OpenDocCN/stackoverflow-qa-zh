# StackOverflow 问答 12177000-12177999

# java - InputMismatchException 读取小数

> ID：12177010
> 
> 赞同：-3
> 
> 时间：2012-08-29T11:35:51.387
> 
> 标签：java, knapsack-problem, branch-and-bound

在[http://penguin.ewu.edu/cscd501/Wint-2011/BranchAndBound/Knap01BnB.txt的main()函数中](http://penguin.ewu.edu/cscd501/Wint-2011/BranchAndBound/Knap01BnB.txt)

```
 inp = new Scanner ( new File(lineIn) );

  maxWeight = inp.nextInt();
  n = inp.nextInt();
  System.out.printf ("Reading data from file %s, with %d items\n",
                     lineIn, n);

  avail = new Item[n];
  pack  = new boolean[n];

  for ( k = 0; k < n; k++ )
  {  weight = inp.nextInt();
     profit = inp.nextInt();
     avail[k] = new Item(weight, profit);
  } 
```

使用上面的代码，我尝试运行 Bandp.txt，它没有问题。我在尝试使用十进制小数值运行 txt 文件时遇到问题：

```
Exception in thread "main" java.util.InputMismatchException at
java.util.Scanner.throwFor(Unknown Source) at 
java.util.Scanner.next(Unknown Source) at 
java.util.Scanner.nextInt(Unknown Source) at 
java.util.Scanner.nextInt(Unknown Source) at 
Knap01BnB.main(Knap01BnB.java:199) 
```

我需要更改代码的哪一部分以便可以显示十进制值并且它们不会显示输入不匹配。

我的txt文件如下图：data.txt

100 20
12.64 8.43 4.21 8.45 17.56 8.31 13.85 12.39 19.32 14.29 4.03 17.14 8.24 1.24 0.79 5.59 6.6 12.18 12.24 1.67 6.45 19.43 9.88 8.75 18.37 15.64 8.24 5.55 3.6 6.4 6.69 18.44 3.07 0.71 11.28 10.25 14.26 12.14 0.71 2.37

这是 BandP.txt 中的值：

15 7 5 25 11 45 3 12 2 7 2 6 7 10 5 4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:53:31.670

错误消息告诉您问题所在：

```
Exception in thread "main" java.util.InputMismatchException at
...
java.util.Scanner.nextInt(Unknown Source) 
at Knap01BnB.main(Knap01BnB.java:199) 
```

程序调用的第 199 行`Scanner.nextInt()`。`Scanner.nextInt()`调用了一堆其他方法，其中一个抛出了 InputMismatchException。

Scanner.nextInt() 的文档告诉您在什么情况下会引发该异常：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt) ://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt ()

所以它读取了一些它无法解析的内容，因为 nextInt() 用于读取整数，并且你给它一个包含小数点的数字。

您可以将其更改为`nextFloat()`. 这会产生其他影响。首先，您分配给的变量需要成为浮点数。会有多米诺骨牌效应——读取编译器错误和堆栈跟踪，按照行号，一一修复。

我不能保证你的算法甚至可以处理浮点数——我想你会发现的。

# php - PHP 文件不会在新的 xampp 安装上运行

> ID：12177014
> 
> 赞同：2
> 
> 时间：2012-08-29T11:36:00.107
> 
> 标签：php, mysql, xampp

Apache 似乎运行正常，当我进入 xampp 控制面板时，我可以检查 phpinfo() 并且一切正常。当我尝试在浏览器中打开任何 php 文件时，页面是空白的。

这是我的 Apache 错误日志

```
[Wed Aug 29 07:07:19.160419 2012] [ssl:warn] [pid 280:tid 376] AH01873: Init: Session    Cache is not configured [hint: SSLSessionCache]
[Wed Aug 29 07:07:19.768831 2012] [mpm_winnt:notice] [pid 280:tid 376] AH00455: Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4 configured -- resuming normal operations
[Wed Aug 29 07:07:19.768831 2012] [mpm_winnt:notice] [pid 280:tid 376] AH00456: Server built: May 13 2012 14:10:15
[Wed Aug 29 07:07:19.768831 2012] [core:notice] [pid 280:tid 376] AH00094: Command line: 'c:\\xampp\\apache\\bin\\httpd.exe -d C:/xampp/apache'
[Wed Aug 29 07:07:19.768831 2012] [mpm_winnt:notice] [pid 280:tid 376] AH00418: Parent: Created child process 424
[Wed Aug 29 07:07:20.673648 2012] [ssl:warn] [pid 424:tid 268] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Wed Aug 29 07:07:20.767250 2012] [mpm_winnt:notice] [pid 424:tid 268] AH00354: Child: Starting 150 worker threads.
[Wed Aug 29 07:18:17.441000 2012] [mpm_winnt:notice] [pid 280:tid 376] AH00422: Parent: Received shutdown signal -- Shutting down the server.
[Wed Aug 29 07:19:34.371074 2012] [core:warn] [pid 1608:tid 376] AH00098: pid file C:/xampp/apache/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
[Wed Aug 29 07:19:35.104275 2012] [ssl:warn] [pid 1608:tid 376] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Wed Aug 29 07:19:38.193080 2012] [mpm_winnt:notice] [pid 1608:tid 376] AH00455: Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4 configured -- resuming normal operations
[Wed Aug 29 07:19:38.224280 2012] [mpm_winnt:notice] [pid 1608:tid 376] AH00456: Server built: May 13 2012 14:10:15
[Wed Aug 29 07:19:38.224280 2012] [core:notice] [pid 1608:tid 376] AH00094: Command line: 'c:\\xampp\\apache\\bin\\httpd.exe -d C:/xampp/apache'
[Wed Aug 29 07:19:38.317881 2012] [mpm_winnt:notice] [pid 1608:tid 376] AH00418: Parent: Created child process 2812
[Wed Aug 29 07:19:40.221084 2012] [ssl:warn] [pid 2812:tid 268] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Wed Aug 29 07:19:40.252284 2012] [mpm_winnt:notice] [pid 2812:tid 268] AH00354: Child: Starting 150 worker threads. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:03:37.383

您使用的是 Windows 7

Windows 7 具有使用端口 80 的网络服务器

所以apache可能没有运行。检查端口 80 是否正在使用

要更改 Xampp apache 的端口号，请检查此链接 [Xampp server port](http://veerasundar.com/blog/2009/07/how-to-change-xampp-server-port/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:25:06.250

我在工作安装中遇到了这种情况，结果发现 Skype 正在运行并阻止了我使用的正常端口。

# geospatial - 查询 3 维空间数据集中 2 维的距离

> ID：12177015
> 
> 赞同：1
> 
> 时间：2012-08-29T11:36:01.327
> 
> 标签：geospatial, postgis, spatial, postgresql-9.1, spatial-query

我有一个案例要求，我需要找到最近的 N 个供应特定产品类型的供应商。int 范围 0..1048575 中的类型，表示层次结构。任何供应商都可以有多个积分，因为他们可以提供多种产品类型。

我可以将 long & lat 存储在 PostGIS 中，并将类型存储在索引 int 数组列中，并以 N 的限制对两者进行查询。但是，我不相信这会有效，因为我不确定 PostgreSQL 是否会同时使用这两者索引。

我的另一个想法是将类型存储在第三个“垂直”维度中。这将在每个供应商的长和纬形状上创建堆叠的“垂直”形状段。要查询，我会得到最近的 long & lat intersects，它们只是在第三维上与所需类型相交。

使用 3DM 的 PostGIS 可以做到这一点吗？换句话说，我可以让它只使用 long 和 lat 计算最近的邻居，但使用所有 3 个维度作为交叉点吗？

# android - AndEngine TXMLLoader 空指针异常

> ID：12177017
> 
> 赞同：0
> 
> 时间：2012-08-29T11:36:05.510
> 
> 标签：android, nullpointerexception, andengine, tmx

我正在尝试在andengine 中加载一个tmx 文件。我已经从 AndEngine 示例中复制了示例并创建了一个新的 tmx 文件，我正在加载该文件。但是我在 tmxLoader.loadFromAsset("tmx/test.tmx"); 线上得到了 NullPointerException . test.tmx 文件只包含一个图块。它给出以下错误日志：

```
> 08-29 15:50:56.171: E/AndEngine(4495):
> TMXTiledMapExample.onCreateScene failed. @(Thread: 'GLThread 13')
> 08-29 15:50:56.171: E/AndEngine(4495): java.lang.NullPointerException
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.extension.tmx.TMXLayer.addTileByGlobalTileID(TMXLayer.java:274)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.extension.tmx.TMXLayer.initializeTMXTilesFromDataString(TMXLayer.java:247)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.extension.tmx.TMXParser.endElement(TMXParser.java:197)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.apache.harmony.xml.ExpatParser.endElement(ExpatParser.java:158)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.apache.harmony.xml.ExpatParser.appendBytes(Native Method) 08-29
> 15:50:56.171: E/AndEngine(4495):  at
> org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:518)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:479)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:318) 08-29
> 15:50:56.171: E/AndEngine(4495):  at
> org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:275) 08-29
> 15:50:56.171: E/AndEngine(4495):  at
> org.andengine.extension.tmx.TMXLoader.load(TMXLoader.java:117) 08-29
> 15:50:56.171: E/AndEngine(4495):  at
> org.andengine.extension.tmx.TMXLoader.loadFromAsset(TMXLoader.java:102)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> com.example.abc.TMXTiledMapExample.onCreateScene(TMXTiledMapExample.java:100)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.ui.activity.SimpleBaseGameActivity.onCreateScene(SimpleBaseGameActivity.java:48)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.ui.activity.BaseGameActivity$3.onCreateResourcesFinished(BaseGameActivity.java:169)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.ui.activity.SimpleBaseGameActivity.onCreateResources(SimpleBaseGameActivity.java:43)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.ui.activity.BaseGameActivity.onCreateGame(BaseGameActivity.java:181)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.ui.activity.BaseGameActivity.onSurfaceCreated(BaseGameActivity.java:110)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> org.andengine.opengl.view.EngineRenderer.onSurfaceCreated(EngineRenderer.java:80)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1348)
> 08-29 15:50:56.171: E/AndEngine(4495):    at
> android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118) 
```

即使我尝试加载示例提供的 tmx 文件，它也会给出相同的错误。知道我哪里出错了吗？

我正在使用 Tiled Map Editor Vesion 0.8.1 应用程序创建 tmx 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:38:38.907

您是否获取了最新版本的 AndEngine。它似乎已被修复：

[https://github.com/nicolasgramlich/AndEngineTMXTiledMapExtension/pull/9](https://github.com/nicolasgramlich/AndEngineTMXTiledMapExtension/pull/9)

**编辑：**嗯，抱歉，拉取请求尚未提交。您应该尝试将它应用到您自己的 git 和引擎存储库中。或者作为一个简单的修复，您应该将您的图块 ID 更改为不同于 0 的值。

# php - 设置数据会话和 array_merge_recursive()

> ID：12177018
> 
> 赞同：0
> 
> 时间：2012-08-29T11:36:10.873
> 
> 标签：php, codeigniter, codeigniter-2

想知道是否有人可以提供以下帮助。基本上我有一个表单，允许用户选择开始和结束日期、开始时间和结束时间。

用户可以添加时间块，因此他们选择他们想要的信息，发布它，然后返回页面，直到他们使用完成按钮处理表单为止。

我面临的问题是，我需要我的数组将每个帖子附加到我的数组中，我有以下代码：

```
 if($this->input->post('submit', TRUE) == 'more')
    {
        $start_date = $this->input->post('start_date', TRUE);
        $start_time = $this->input->post('start_time', TRUE);
        $end_time = $this->input->post('end_time', TRUE);

        $start_dates['start_date'] =  $start_date;
        $start_dates['start_time'] =  $start_time;
        $start_dates['end_time'] =  $end_time;

        if(isset($this->session->userdata['start_dates']) )
        {
            $merged = array_merge_recursive($start_dates, $this->session->userdata['start_dates']);
        }
        else
        {
            $merged = null;
            $this->session->set_userdata('start_dates', $start_dates);
        } 
```

问题是，每次我们添加一个新的时间块时，数组中的一项都会被覆盖。

数组的预期输出为：

```
Array
(
    [start_date] => Array
    (
        [0] => 2012-08-31
        [1] => 2012-08-29
    )

    [start_time] => Array
    (
        [0] => 08:00
        [1] => 09:00
    )

    [end_time] => Array
    (
        [0] => 12:00
        [1] => 17:00
    )

) 
```

在这种情况下，数组键 [1] 总是被覆盖，如果我们只添加两个时间块这不会有问题 - 但是用户需要能够添加超过 2 个块，总限制取决于用户设置的限制我们稍后会指定。

任何人都可以帮助理清逻辑。

提前致谢。

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:40:30.390

您还需要将合并的数据保存到会话中，并且数组合并应该应用于会话中存储的数组：

```
if($this->session->userdata['start_dates'])
{
   $merged = array_merge_recursive($this->session->userdata['start_dates'],
                                   $start_dates);
}
else
{
   $merged = $start_dates;
}
$this->session->set_userdata('start_dates', $merged); 
```

# c# - 任何人都可以建议任何在c和c之间互操作的加密解密算法#

> ID：12177019
> 
> 赞同：-2
> 
> 时间：2012-08-29T11:36:14.110
> 
> 标签：c#, c

任何人都可以建议任何在c和c#之间互操作的加密算法意味着用c语言加密并用c#解密，反之亦然

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:50:34.010

```
我使用过 Rijndael 算法，但在 c# 中它需要盐，但在 c 中它不需要，t
```

您可以简单地用 C# 重新编写 C 代码，因为基本运算符不会改变。

`pinvoke`在需要的地方使用。

**参考**：`.Zero , Charles Petzold. chapter 7`

谷歌书名获取下载链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:00:55.497

使用 System.Security.Cryptography 下可用的 AES 之类的东西。

您可以在此处找到在 C# 下使用它的示例 -[在 C# 中使用 AES 加密](https://stackoverflow.com/questions/273452/using-aes-encryption-in-c-sharp)

派生 IV 和 SALT 时，您可能会发现此实用程序类很有用：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)

我不能直接回答 C/C++ 方面，但是拖网 SO 帖子有很多答案，例如：[encrypt-decrypt with AES using C/C++](https://stackoverflow.com/questions/2489379/encrypt-decrypt-with-aes-using-c-c)

# sql - ORA-00936: 缺少表达式 vb.net - oracle

> ID：12177024
> 
> 赞同：2
> 
> 时间：2012-08-29T11:36:38.110
> 
> 标签：sql, vb.net, oracle10g

我正在尝试将一条记录插入到 oracle 数据库中，代码如下：我得到 ORA-00936：

> 在 Dim t1 As Integer = cmd3.ExecuteNonQuery() 处缺少表达式。

我检查了 3 次，我确信我没有遗漏任何变量。请帮忙！:(

```
Dim cmd3 As New OracleCommand
                cmd3.Connection = conn
                Dim timepara As String = Now.Hour & Now.Minute & Now.Second & Now.Millisecond
                cmd3.CommandText = "INSERT INTO d009040 (LBRCODE,ENTRYDATE,BATCHCD,SETNO,SCROLLNO,MAINSCROLLNO,POSTDATE,FEFFDATE,ACTIVITYTYPE,CASHFLOWTYPE,VALUEDATE,BOOKTYPE,DRCR,VCRACCTID,MAINACCTID,MAINMODTYPE,VCRMODTYPE,TRNCURCD,FCYTRNAMT,LCYCONVRATE,LCYTRNAMT,INSTRBANKCD,INSTRBRANCHCD,INSTRTYPE,INSTRNO,INSTRDATE,TOKENNO,PARTICULARS,SYSGENVCR,SHTOTFLAG,SHCLRFLAG,ACTOTFLAG,ACCLRFLAG,MAKER,MAKERDATE,MAKERTIME,CHECKER1,CHECKER2,CHECKER3,CHECKER4,CHECKERDATE,CHECKERTIME,NOAUTHPENDING,NOAUTHOVER,POSTFLAG,AUTHFLAG,FEFFFLAG,CANCELEDFLAG,POSTAUTHFEFFCNCL,UPDTCHKID,PARTCLEARAMT,POSTTIME) VALUES (@LBRCODE,@ENTRYDATE,@BATCHCD,@SETNO,@SCROLLNO,@MAINSCROLLNO,@POSTDATE,@FEFFDATE,@ACTIVITYTYPE,@CASHFLOWTYPE,@VALUEDATE,@BOOKTYPE,@DRCR,@VCRACCTID,@MAINACCTID,@MAINMODTYPE,@VCRMODTYPE,@TRNCURCD,@FCYTRNAMT,@LCYCONVRATE,@LCYTRNAMT,@INSTRBANKCD,@INSTRBRANCHCD,@INSTRTYPE,@INSTRNO,@INSTRDATE,@TOKENNO,@PARTICULARS,@SYSGENVCR,@SHTOTFLAG,@SHCLRFLAG,@ACTOTFLAG,@ACCLRFLAG,@MAKER,@MAKERDATE,@MAKERTIME,@CHECKER1,@CHECKER2,@CHECKER3,@CHECKER4,@CHECKERDATE,@CHECKERTIME,@NOAUTHPENDING,@NOAUTHOVER,@POSTFLAG,@AUTHFLAG,@FEFFFLAG,@CANCELEDFLAG,@POSTAUTHFEFFCNCL,@UPDTCHKID,@PARTCLEARAMT,@POSTTIME)"
                'myCommand.Parameters[0].Value = 60; 
                ''110','15-MAR-12','TR-MOBDS','5','5','5','15-MAR-12','15-MAR-12','CR','CR','15-MAR-12','ZZ','C','DS      000000000000240700000000','DS      000000000000240700000000','47','47','INR','100','1','100','0','0','99','000000000000','15-MAR-12','0','DDS CR. From Agent','1','Y','Y','Y','Y','0','15-MAR-12','12203130','0','0','0','0','15-MAR-12','12203130','0','1','P','A','F','0','0','0','0','12203130')"
                cmd3.Prepare()
                datepara = Date.Now.ToString("dd-MMM-yy")
                'myCommand1.Parameters.Add("deptno", 20) 
                cmd3.Parameters.Add("@LBRCODE", lbr)
                cmd3.Parameters.Add("@ENTRYDATE", datepara)
                cmd3.Parameters.Add("@BATCHCD", "TR-MOBDS")
                cmd3.Parameters.Add("@SETNO", k)
                cmd3.Parameters.Add("@SCROLLNO", k)
                cmd3.Parameters.Add("@MAINSCROLLNO", k) 'VALUEDATE,BOOKTYPE,DRCR,VCRACCTID,MAINACCTID,MAINMODTYPE,VCRMODTYPE,TRNCURCD,FCYTRNAMT,
                cmd3.Parameters.Add("@POSTDATE", datepara)
                cmd3.Parameters.Add("@FEFFDATE", datepara)
                cmd3.Parameters.Add("@ACTIVITYTYPE", "CR")
                cmd3.Parameters.Add("@CASHFLOWTYPE", "CR")
                cmd3.Parameters.Add("@VALUEDATE", datepara)
                cmd3.Parameters.Add("@BOOKTYPE", "ZZ")
                cmd3.Parameters.Add("@DRCR", "C") 'LCYCONVRATE,LCYTRNAMT,INSTRBANKCD,INSTRBRANCHCD,INSTRTYPE,INSTRNO,INSTRDATE,TOKENNO,
                cmd3.Parameters.Add("@VCRACCTID", internalaccount)
                cmd3.Parameters.Add("@MAINACCTID", internalaccount)
                cmd3.Parameters.Add("@MAINMODTYPE", "47")
                cmd3.Parameters.Add("@VCRMODTYPE", "47")
                cmd3.Parameters.Add("@TRNCURCD", "INR")
                cmd3.Parameters.Add("@FCYTRNAMT", amount)
                cmd3.Parameters.Add("@LCYCONVRATE", "1")
                cmd3.Parameters.Add("@LCYTRNAMT", amount)
                cmd3.Parameters.Add("@INSTRBANKCD", "0")
                cmd3.Parameters.Add("@INSTRBRANCHCD", "0")
                cmd3.Parameters.Add("@INSTRTYPE", "99")
                cmd3.Parameters.Add("@INSTRNO", "000000000000")
                cmd3.Parameters.Add("@INSTRDATE", datepara)
                cmd3.Parameters.Add("@TOKENNO", "0") 'PARTICULARS,SYSGENVCR,SHTOTFLAG,SHCLRFLAG,ACTOTFLAG,ACCLRFLAG,MAKER,MAKERDATE,MAKERTIME,
                cmd3.Parameters.Add("@PARTICULARS", "DDS CR. From Agent")
                cmd3.Parameters.Add("@SYSGENVCR", "1")
                cmd3.Parameters.Add("@SHTOTFLAG", "Y")
                cmd3.Parameters.Add("@SHCLRFLAG", "Y")
                cmd3.Parameters.Add("@ACTOTFLAG", "Y")
                cmd3.Parameters.Add("@ACCLRFLAG", "Y")
                cmd3.Parameters.Add("@MAKER", "0") 'CHECKER1,CHECKER2,CHECKER3,CHECKER4,CHECKERDATE,CHECKERTIME,NOAUTHPENDING,
                cmd3.Parameters.Add("@MAKERDATE", datepara)
                cmd3.Parameters.Add("@MAKERTIME", Now.Hour & Now.Minute & Now.Second & Now.Millisecond)
                cmd3.Parameters.Add("@CHECKER1", "0")
                cmd3.Parameters.Add("@CHECKER2", "0")
                cmd3.Parameters.Add("@CHECKER3", "0")
                cmd3.Parameters.Add("@CHECKER4", "0") 'NOAUTHOVER,POSTFLAG,AUTHFLAG,FEFFFLAG,CANCELEDFLAG,POSTAUTHFEFFCNCL,UPDTCHKID,PARTCLEARAMT,POSTTIME
                cmd3.Parameters.Add("@CHECKERDATE", datepara)
                cmd3.Parameters.Add("@CHECKERTIME", Now.Hour & Now.Minute & Now.Second & Now.Millisecond)
                cmd3.Parameters.Add("@NOAUTHPENDING", "0")
                cmd3.Parameters.Add("@NOAUTHOVER", "1")
                cmd3.Parameters.Add("@POSTFLAG", "P")
                cmd3.Parameters.Add("@AUTHFLAG", "A")
                cmd3.Parameters.Add("@FEFFFLAG", "F")
                cmd3.Parameters.Add("@CANCELEDFLAG", " ") 'UPDTCHKID,PARTCLEARAMT,POSTTIME
                cmd3.Parameters.Add("@POSTAUTHFEFFCNCL", "0")
                cmd3.Parameters.Add("@UPDTCHKID", "0")
                cmd3.Parameters.Add("@PARTCLEARAMT", "0")
                cmd3.Parameters.Add("@POSTTIME", Now.Hour & Now.Minute & Now.Second & Now.Millisecond)

                Dim str As String = cmd3.CommandText
                cmd3.CommandType = CommandType.Text
                Try
                    Dim t1 As Integer = cmd3.ExecuteNonQuery()
                Catch ex As Exception
                    msg(ex.ToString)
                End Try 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:48:16.997

正如我在您[之前的问题](https://stackoverflow.com/a/12173699/284240)中所展示的那样，Oracle 的参数语法与 Sql-Server 不同。所以使用`:`而不是`@`：

例如：

```
Using con = New OracleConnection(connectionString)
    Dim sql = "INSERT INTO d009040 (LBRCODE,ENTRYDATE,BATCHCD,SETNO,SCROLLNO,MAINSCROLLNO,POSTDATE,FEFFDATE,ACTIVITYTYPE,CASHFLOWTYPE,VALUEDATE,BOOKTYPE,DRCR,VCRACCTID,MAINACCTID,MAINMODTYPE,VCRMODTYPE,TRNCURCD,FCYTRNAMT,LCYCONVRATE,LCYTRNAMT,INSTRBANKCD,INSTRBRANCHCD,INSTRTYPE,INSTRNO,INSTRDATE,TOKENNO,PARTICULARS,SYSGENVCR,SHTOTFLAG,SHCLRFLAG,ACTOTFLAG,ACCLRFLAG,MAKER,MAKERDATE,MAKERTIME,CHECKER1,CHECKER2,CHECKER3,CHECKER4,CHECKERDATE,CHECKERTIME,NOAUTHPENDING,NOAUTHOVER,POSTFLAG,AUTHFLAG,FEFFFLAG,CANCELEDFLAG,POSTAUTHFEFFCNCL,UPDTCHKID,PARTCLEARAMT,POSTTIME) VALUES (:LBRCODE,:ENTRYDATE,:BATCHCD,:SETNO,:SCROLLNO,:MAINSCROLLNO,:POSTDATE,:FEFFDATE,:ACTIVITYTYPE,:CASHFLOWTYPE,:VALUEDATE,:BOOKTYPE,DRCR,:VCRACCTID,:MAINACCTID,:MAINMODTYPE,:VCRMODTYPE,:TRNCURCD,:FCYTRNAMT,:LCYCONVRATE,:LCYTRNAMT,:INSTRBANKCD,:INSTRBRANCHCD,:INSTRTYPE,:INSTRNO,:INSTRDATE,:TOKENNO,:PARTICULARS,:SYSGENVCR,:SHTOTFLAG,:SHCLRFLAG,:ACTOTFLAG,:ACCLRFLAG,:MAKER,:MAKERDATE,:MAKERTIME,:CHECKER1,:CHECKER2,:CHECKER3,:CHECKER4,:CHECKERDATE,:CHECKERTIME,:NOAUTHPENDING,:NOAUTHOVER,:POSTFLAG,:AUTHFLAG,:FEFFFLAG,:CANCELEDFLAG,:POSTAUTHFEFFCNCL,:UPDTCHKID,:PARTCLEARAMT,:POSTTIME)"
    Using cmd = New OracleCommand(sql, con)
        con.Open()
        cmd.Parameters.AddWithValue(":LBRCODE", LBRCODE)
        ' add the other parameters as well ... '
        dim result = cmd.ExecuteNonQuery()
    End Using
End Using 
```

在由 CommandType.Text 的 OracleCommand 调用的 SQL 语句中使用命名参数时，必须在参数名称前加上冒号 (:)。

[http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oraclecommand.parameters.aspx)

# oracle - 是否可以将对象作为参数传递给 PL SQL 包过程？

> ID：12177025
> 
> 赞同：0
> 
> 时间：2012-08-29T11:36:38.610
> 
> 标签：oracle, post, plsql

让我们以 .NET MVC 中的示例为例，在该示例中，可以`ActionResult`使用自定义对象甚至此类对象的数组来定义参数：

方法：

```
public ActionResult Blah(Person[] people) {
  // ...
} 
```

和相应的 HTML：

```
<input type="text" name="people[0].FirstName" value="George" />
<input type="text" name="people[0].LastName" value="Washington" />
<input type="text" name="people[1].FirstName" value="Abraham" />
<input type="text" name="people[1].LastName" value="Lincoln" />
<input type="text" name="people[3].FirstName" value="Thomas" />
<input type="text" name="people[3].LastName" value="Jefferson" /> 
```

取自此[博客的示例](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

我想知道是否可以在 PL SQL 中执行类似的操作，例如：

```
PROCEDURE blah(param1 IN Person_type)
IS
BEGIN
  -- do whatever y like
END; 
```

其中 person_type 定义对象、记录或类似的复杂结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:43:49.137

```
CREATE OR REPLACE TYPE t_parsed_name as object (
name_prefix varchar2(50),
name_first varchar2(50),
name_middle varchar2(50),
name_last varchar2(100),
name_suffix varchar2(50)
);

CREATE OR REPLACE TYPE T_PARSED_NAME_ARY as table of t_parsed_name;

create or replace procedure test_parsed_names(i_parsed_name_ary in t_parsed_name_ary) as
    idx pls_integer;
begin
    idx := i_parsed_name_ary.first;
    loop
        exit when idx is null;
        dbms_output.put_line('First name: ' || i_parsed_name_ary(idx).name_first || ', Last name: ' || i_parsed_name_ary(idx).name_last);
        idx := i_parsed_name_ary.next(idx);
    end loop;
end;

----------------------------------------
-- example using above procedure
declare
    l_parsed_name t_parsed_name;
    l_parsed_name_ary t_parsed_name_ary;
begin
  l_parsed_name_ary := t_parsed_name_ary();
  l_parsed_name_ary.extend(3);

  -- create some parsed names and add to array
  l_parsed_name := t_parsed_name('Mr','Joe','T','Blow','Jr');
  l_parsed_name_ary(1) := l_parsed_name;
  l_parsed_name := t_parsed_name('Mrs','Jane','','Doe','');
  l_parsed_name_ary(2) := l_parsed_name;
  l_parsed_name := t_parsed_name('','Betty','','Boop','');
  l_parsed_name_ary(3) := l_parsed_name;

  -- test the array (call procedure with object type array parameter)
  test_parsed_names(l_parsed_name_ary);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:11:46.587

是的，您可以，但您需要使用 ODP 和 Oracle 的 UDT（用户定义类型）。不是 100% 确定如何将这些映射到 MVC 位，但您可以将对象类型传递到/从 .net 到 Oracle。

查看这些链接： [使用用户定义的类型参数调用函数 (Oracle ODP.NET)](https://stackoverflow.com/questions/4162364/calling-a-function-with-user-defined-type-parameters-oracle-odp-net/4218292#4218292) （特别注意此演练[http://st-curriculum.oracle.com/obe/db/hol08/dotnet/udt/udt_otn。 .htm](http://st-curriculum.oracle.com/obe/db/hol08/dotnet/udt/udt_otn.htm) )

[http://docs.oracle.com/html/E15167_01/featUDTs.htm](http://docs.oracle.com/html/E15167_01/featUDTs.htm)

您可能需要进行一些微调才能使所有内容同步，但这是可能的。

# ruby - 如何：在 Aptana 中编译 Coffeescript

> ID：12177042
> 
> 赞同：3
> 
> 时间：2012-08-29T11:37:31.387
> 
> 标签：ruby, coffeescript, aptana, compass-sass, blueprint

我安装了 Aptana，我想试试 Coffeescript。当我尝试“编译并显示 JS”时它不起作用 - 控制台显示：

```
....xyz.sh: line 3: coffee: command not found
....xyz.sh: line 3: pre: command not found 
```

我不明白 - 我如何让它运行？

谢谢！

**编辑：**

从昨天开始，我设法让 compass/sass 在 Aptana 中运行（是的！） - 所以我意识到我的问题可能是错误的：我是否必须告诉 Aptana（Windows？）在哪里可以找到编译器？

**编辑2：**

实现：问题是 - 如何安装这个 gem（如果可能的话在 Aptana 中）：通过[https://github.com/netzpirat/guard-coffeescript](https://github.com/netzpirat/guard-coffeescript) 我在安装保护 gem 时遇到错误：

```
ERROR:  Error installing guard:
    The 'ffi' native gem requires installed build tools. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:03:12.870

在尝试了一些东西之后，这里是一个为 Aptana 中的项目设置指南针和咖啡脚本的小教程：

（信息：我对编码或红宝石知之甚少，所以请耐心等待:)）

创建项目（我选择基本的网页模板）

**终端：**

```
$ gem install compass
$ compass create myProject --using blueprint 
```

检查： [http ://compass-style.org/reference/blueprint/](http://compass-style.org/reference/blueprint/)

你还必须设置一些其他的东西：我找到了这个页面并按照它完成了..

[https://github.com/netzpirat/guard-coffeescript](https://github.com/netzpirat/guard-coffeescript)

**安装包：**

```
$ gem install bundle
$ bundle init //to create the gemfile 
```

**安装防护罩：**

您需要先安装 Ruby Devkit - 检查以下链接：

[http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)

[https://github.com/oneclick/rubyinstaller/wiki/Development-Kit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)

如果你这样做了

```
$ gem install guard
$ gem install guard-coffeescript 
```

我还按照这里的建议安装**了一个 JS-Engine**：

[https://github.com/netzpirat/guard-coffeescript#javascript-runtimes](https://github.com/netzpirat/guard-coffeescript#javascript-runtimes)

```
$ gem install therubyrhino 
```

**对于咖啡脚本：**

```
$ gem install coffee-script
$ gem install coffee-script-source 
```

然后你必须编辑 gemfile，我的看起来像这样：

```
# A sample Gemfile
source "https://rubygems.org"

# gem "rails"
group :development do
  gem 'guard'
end

group :development do
  gem 'guard-coffeescript'
end

group :development do
  gem 'therubyrhino'
end 
```

运行捆绑

```
$ bundle 
```

创建保护文件

```
$ guard init 
```

编辑保护文件

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

guard 'coffeescript', :input => 'myProject/coffeescript', :output => 'myProject/javascript' 
```

你可以用

```
$ guard start 
```

这对我有用！如果您发现任何错误，请告诉我！

# mod-rewrite - 重定向子域请求，使其看起来像是来自主域

> ID：12177045
> 
> 赞同：1
> 
> 时间：2012-08-29T11:37:41.433
> 
> 标签：mod-rewrite, whmcs

我该如何做以下事情：

我有一个主域`http://www.domainname.com` 和另一个站点`http://www.domainname.com/billing/`

加载它加载的知识库文章时，`http://www.domainname.com/billing/knowledgebase.php` 我希望它加载内容，但让它看起来像是来自

```
http://www.domainname.com/knowledgebase.php 
```

换句话说，当我加载任何东西时

> `http://www.domainname.com/knowledgebase.php*`

它应该加载 /billing/knowledgebase.php* 中存在的内容

可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:42:40.297

可以通过[.htaccess](http://www.blogstorm.co.uk/htaccess-mod_rewrite-ultimate-guide/)文件和使用.htaccess 来实现`mod_rewrite`，但是我知道您要实现的目标，并且根据个人经验，如果您想要基于 root 的 WHMCS 安装，我会说在您领先时停止，然后将其全部删除并重新开始，方法是在根目录而不是子目录中安装 WHMCS。虽然 WHMCS 说要安装在一个子目录中，但很多人把它当作一个 CMS，因此真的希望它成为整个网站的主页和内容管理器。

# mysql - 编写一个函数来获取按月分组的范围内的天数并对其执行一些简单的计算

> ID：12177048
> 
> 赞同：1
> 
> 时间：2012-08-29T11:37:47.947
> 
> 标签：mysql

我正在尝试在 mySQL 中编写一个函数，该函数将两个日期（startDate 和 endDate）作为参数。然后它计算每个月的天数。

该数据库包含一个 targetRevenue 表，该表已获取每个月和每年的目标收入值。

```
id  month   year  targetRev
25    1       2012    1000.00
26    2       2012    5000.00
27    3       2012    8000.00 
```

该函数根据其中的天数找到一个月的收入，然后返回总数。

示例 : startDate : 2012-01-19 endDate : 2012-03-24 函数返回 [targetRev(1 月 19 天) + targetRev(2 月 29 天) + targetRev(3 月 24 天)]

我是在 mysql 中编写函数的新手，所以一点帮助让我开始会非常有用。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:32:01.657

如果您用包含每个月的第一天的列来表示表中每条记录的月份，而不是您的`month`和列：`year``targetRevenue``DATE`

```
ALTER TABLE targetRevenue
  ADD COLUMN first DATE;

UPDATE targetRevenue
  SET first = STR_TO_DATE(CONCAT_WS('-', year, month, 1), '%Y-%c-%e');

ALTER TABLE targetRevenue
  DROP COLUMN year,
  DROP COLUMN month; 
```

然后，您可以通过以下方式获得项目的总目标收入（假设它包括开始日期和结束日期）：

```
-- calculate the summation of
SELECT SUM(CONVERT(

         -- number of project days in month...
         GREATEST(0,
           -- ...is calculated as the difference between...
           DATEDIFF(
             -- ...the last day of the project in this month...
                LEAST('2012-03-24', LAST_DAY(first)),
             -- ...and the first day of the project in this month...
             GREATEST('2012-01-19', first)
           )
           -- ...plus one because first and last project days were inclusive
           + 1
         )

         -- multiply by the target revenue for this month
         * targetRev

         -- divide by the number of days in the month
         / DAY(LAST_DAY(first)),

         -- convert result to fixed-point format, to two d.p.
         DECIMAL(11,2)

       )) AS total

FROM   targetRevenue

-- only perform for months in which the project was active
WHERE  '2012-01-19' <= LAST_DAY(first) AND first <= '2012-03-24' 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/f3515/1/0)上查看。

如果您无法更改架构，则可以将引用替换`first`为该列在上面更新的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:57:33.457

为此，您可以使用以下`SUM()`功能：

```
SELECT SUM(targetRev) from your_table
WHERE  date_column BETWEEN your_startDate_column AND your_endDate_column; 
```

你不需要计算每个月的天数..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:56:33.180

像这样使用这个查询

```
SELECT   SUM(targetRev), MONTH(date_column) as mo
from     your_table
WHERE    date_column BETWEEN your_startDate AND your_endDate
GROUP BY mo; 
```

这将给出每个月总收入的结果（像这样的逻辑使用）

如果是两个不同的年份，您可以使用

```
concat(year(date_column),month(date_column)) as mo 
```

# java - 用于上下文会话的休眠拦截器？

> ID：12177068
> 
> 赞同：1
> 
> 时间：2012-08-29T11:39:05.653
> 
> 标签：java, hibernate

我正在尝试编写一个用于审计目的的 Hibernate 拦截器，但它可以与线程本地上下文会话一起使用（而不是我每次都调用 openSession() 并将其传递给一个拦截器对象）。

任何有关如何执行此操作的指南/示例代码将不胜感激。（我的主要问题是想办法在第一次打开上下文会话时将拦截器对象提供给它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:12:19.167

为什么不使用hibernate的审计solotion？[http://docs.jboss.org/envers/docs/index.html](http://docs.jboss.org/envers/docs/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T13:42:27.987

如果您仅使用 Hibernate，则可以使用两种方法为会话设置拦截器。

```
//interceptor for global, set interceptor when create sessionFactory with Configure
sessionFactory =
  new AnnotationConfiguration().configure()
    .setInterceptor(new AuditTrailInterceptor())
    .buildSessionFactory()

//interceptor for per Session
Session session = sessionFactory.openSession(new XxxInterceptor()) 
```

如果你使用 Spring 创建 SessionFactory

```
<bean id="sessionFactory"
      class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
  <property name="entityInterceptor">
    <bean class="your.XxxInterceptor"/>
  </property>
  <!-- other  configuration -->
</bean> 
```

我找到了一篇对您有帮助的博文。[http://www.sleberknight.com/blog/sleberkn/entry/using_a_hibernate_interceptor_to](http://www.sleberknight.com/blog/sleberkn/entry/using_a_hibernate_interceptor_to)

# c++ - 类声明和定义

> ID：12177072
> 
> 赞同：-3
> 
> 时间：2012-08-29T11:39:13.630
> 
> 标签：c++, class, header-files

这是我的课程代码：

```
class LibItem
{
public:
    virtual void PrintDetails() = 0;
    void setDetails(string setItemTitle, string setItemAuthor, string setItemReleaseDate, string setItemCopyright, string setItemGenre, string setItemStatus)
    {
        Title = setItemTitle;
        Author = setItemAuthor;
        ReleaseDate = setItemReleaseDate;
        Copyright = setItemCopyright;
        Genre = setItemGenre;
        Status = setItemStatus;
    }
    void setTitle(string TitleName)
    {
        Title = TitleName;
    }
    string getTitle()
    {
        return Title;
    }
    void setReleaseDate(string date)
    {
        ReleaseDate = date;
    }
    string getReleaseDate()
    {
        return ReleaseDate;
    }
    void setAuthor(string AuthorName)
    {
        Author = AuthorName;
    }
    string getAuthor()
    {
        return Author;
    }
    void setCopyright(string CopyrightDetails)
    {
        Copyright = CopyrightDetails;
    }
    string getCopyright()
    {
        return Copyright;
    }
    void setGenre(string GenreDetails)
    {
        Genre = GenreDetails;
    }
    string getGenre()
    {
        return Genre;
    }
    void setStatus(string StatusDetails)
    {
        Status = StatusDetails;
    }
    string getStatus()
    {
        return Status;
    }
private:
    string Title;
    string ReleaseDate;
    string Author;
    string Copyright;
    string Genre;
    string Status;
}; 
```

我想把它放到一个 .h 文件和一个 .cpp 文件中。下面的代码正确吗？

LibItem.cpp：

```
//---------------------------------------------------------------------------

#pragma hdrstop

#include "LibItem.h"

virtual void LibItem::PrintDetails() = 0;
void LibItem::setDetails(string setItemTitle, string setItemAuthor, string setItemReleaseDate, string setItemCopyright, string setItemGenre, string setItemStatus)
{
Title = setItemTitle;
Author = setItemAuthor;
ReleaseDate = setItemReleaseDate;
Copyright = setItemCopyright;
Genre = setItemGenre;
Status = setItemStatus;
}
void LibItem::setTitle(string TitleName)
{
Title = TitleName;
}
string LibItem::getTitle()
{
return Title;
}
void LibItem::setReleaseDate(string date)
{
ReleaseDate = date;
}
string LibItem::getReleaseDate()
{
return ReleaseDate;
}
void LibItem::setAuthor(string AuthorName)
{
Author = AuthorName;
}
string LibItem::getAuthor()
{
return Author;
}
void LibItem::setCopyright(string CopyrightDetails)
{
Copyright = CopyrightDetails;
}
string LibItem::getCopyright()
{
return Copyright;
}
void LibItem::setGenre(string GenreDetails)
{
Genre = GenreDetails;
}
string LibItem::getGenre()
{
return Genre;
}
void LibItem::setStatus(string StatusDetails)
{
Status = StatusDetails;
}
string LibItem::getStatus()
{
return Status;
}
};

//---------------------------------------------------------------------------
#pragma package(smart_init) 
```

LibItem.h

```
//---------------------------------------------------------------------------

#ifndef LibItemH
#define LibItemH

class LibItem
{
public:
    virtual void PrintDetails();
    void setDetails(string, string, string, string, string, string);
    void setTitle(string);
    void setReleaseDate(string);
    string getReleaseDate();
    void setAuthor(string);
    string getAuthor();
    void setCopyright(string);
    string getCopyright();
    void setGenre(string);
    string getGenre();
    void setStatus(string);
    string getStatus();
private:
    string Title;
    string ReleaseDate;
    string Author;
    string Copyright;
    string Genre;
    string Status;
};

//---------------------------------------------------------------------------
#endif 
```

接下来，如果我想在 main 函数中使用这个 .h 和 .cpp 文件，需要什么代码才能做到这一点？需要哪些包含语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:40:52.590

不正确：

```
virtual void LibItem::PrintDetails() = 0; 
```

`=0`应该在类定义中（在标题中）。

要使用该类，您需要`#include "LibItem.h"`.

此外，在标题中：

```
#include <string> 
```

并将出现的 替换`string`为`std::string`。

`string`参数应该通过引用传递：

```
void setReleaseDate(const string& date) 
```

代替

```
void setReleaseDate(string date) 
```

# sql-server-2008 - 限制 SQL Server 中特定用户可用的最大查询执行时间、连接数和读取器

> ID：12177073
> 
> 赞同：0
> 
> 时间：2012-08-29T11:39:17.500
> 
> 标签：sql-server-2008, connection, execution-time

有什么办法，如果，如何设置任意最大数量：

*   查询执行时间
*   打开连接号
*   同步数据阅读器

对于 SQL Server 2008 中的特定数据库用户？

至于用户，他将只对具有只读访问权限的视图进行操作。

# ruby - 哈希使用数组作为 ruby 中的键

> ID：12177074
> 
> 赞同：17
> 
> 时间：2012-08-29T11:39:22.900
> 
> 标签：ruby, hash

我有一个使用数组作为键的哈希。当我更改数组时，哈希无法再获取对应的键和值：

```
1.9.3p194 :016 > a = [1, 2]
 => [1, 2] 
1.9.3p194 :017 > b = { a => 1 }
 => {[1, 2]=>1} 
1.9.3p194 :018 > b[a]
 => 1 
1.9.3p194 :019 > a.delete_at(1)
 => 2 
1.9.3p194 :020 > a
 => [1] 
1.9.3p194 :021 > b
 => {[1]=>1} 
1.9.3p194 :022 > b[a]
 => nil 
1.9.3p194 :023 > b.keys.include? a
 => true 
```

我究竟做错了什么？

更新：好的。使用 a.clone 绝对是解决这个问题的一种方法。如果我想更改“a”但仍然使用“a”来检索相应的值（因为“a”仍然是键之一）怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-29T13:37:37.097

#rehash方法将重新[计算](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-rehash)哈希，因此在键更改后：

```
b.rehash 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-24T10:00:44.967

TL;DR：考虑[`Hash#compare_by_indentity`](http://docs.ruby-lang.org/en/2.3.0/Hash.html#method-i-compare_by_identity)

### 您需要决定是否希望散列按数组*值*或数组*标识*工作。

默认情况下，数组`.hash`和`.eql?`值，这就是为什么更改值会使 ruby​​ 感到困惑。考虑你的例子的这个变体：

```
pry(main)> a = [1, 2]
pry(main)> a1 = [1]
pry(main)> a.hash
=> 4266217476190334055
pry(main)> a1.hash
=> -2618378812721208248
pry(main)> h = {a => '12', a1 => '1'}
=> {[1, 2]=>"12", [1]=>"1"}
pry(main)> h[a]
=> "12"
pry(main)> a.delete_at(1)
pry(main)> a
=> [1]
pry(main)> a == a1
=> true
pry(main)> a.hash
=> -2618378812721208248
pry(main)> h[a]
=> "1" 
```

看看那里发生了什么？正如您所发现的，它无法匹配`a`键，因为`.hash`它存储它的值已过时[顺便说一句，您甚至不能依赖它！突变可能导致相同的哈希（罕见）或落在同一桶中的不同哈希（不是那么罕见）。]

但不是通过返回失败，而是在键`nil`上匹配。 看，根本不在乎vs的*身份*（叛徒！）。它将您提供的当前*值*与存在的值进行*比较*并找到匹配项。`a1`
`h[a]`*`a``a1`*`[1]`*`a1``[1]`***

 ***这就是为什么**使用`.rehash`只是创可贴**。它将重新计算`.hash`所有键的值并将它们移动到正确的存储桶中，但它很容易出错，并且还可能导致麻烦：

```
pry(main)> h.rehash
=> {[1]=>"1"}
pry(main)> h
=> {[1]=>"1"} 
```

哦哦。这两个条目合并为一个，因为它们现在具有相同的值（很难预测哪个获胜）。

### 解决方案

一种明智的方法是采用按值查找，这要求值永远不会改变。 `.freeze`你的钥匙。或者在构建散列时使用`.clone`/ `.dup`，并随意改变原始数组 - 但接受这将根据构建时保留的值`h[a]`查找当前值。`a`

另一个，你似乎想要的，是决定你关心身份——查找`a`应该找到`a`它的当前值，并且许多键是否具有或现在具有相同的值并不重要。
如何？

*   `Object`按身份哈希。（数组不是因为`.==`按值的类型也倾向于覆盖`.hash`并按`.eql?`值。）所以一种选择是：不要使用数组作为键，使用一些自定义类（其中可能包含一个数组）。

*   但是，如果您希望它直接表现得像数组散列一样怎么办？您可以子类化 Hash 或 Array，但要使一切工作一致，需要做很多工作。幸运的是，Ruby 有一个内置的方法：[`h.compare_by_identity`](http://docs.ruby-lang.org/en/2.3.0/Hash.html#method-i-compare_by_identity)将哈希切换为通过身份工作（无法撤消，AFAICT）。如果在插入任何内容之前执行此操作，您甚至可以拥有具有相同值的不同键，而不会造成混淆：

    ```
    [39] pry(main)> x = [1]
    => [1]
    [40] pry(main)> y = [1]
    => [1]
    [41] pry(main)> h = Hash.new.compare_by_identity
    => {}
    [42] pry(main)> h[x] = 'x'
    => "x"
    [44] pry(main)> h[y] = 'y'
    => "y"
    [45] pry(main)> h
    => {[1]=>"x", [1]=>"y"}
    [46] pry(main)> x.push(7)
    => [1, 7]
    [47] pry(main)> y.push(7)
    => [1, 7]
    [48] pry(main)> h
    => {[1, 7]=>"x", [1, 7]=>"y"}
    [49] pry(main)> h[x]
    => "x"
    [50] pry(main)> h[y]
    => "y" 
    ```

    请注意，[如果您尝试将此类散列放在那里，例如 strings ，则此类散列是违反直觉的](https://stackoverflow.com/q/14305398/239657)，因为我们确实习惯于按值散列的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T13:04:14.673

散列使​​用其关键对象的散列码 ( `a.hash`) 对它们进行分组。哈希码通常取决于对象的状态；`a`在这种情况下，当从数组中删除一个元素时，哈希码会发生变化。由于密钥已经插入到散列中，`a`因此被归档在其原始散列码下。

这意味着您无法检索`a`in的值`b`，即使在打印散列时它看起来没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T11:44:02.917

您应该`a.clone`用作键

```
irb --> a = [1, 2]
==> [1, 2]

irb --> b = { a.clone => 1 }
==> {[1, 2]=>1}

irb --> b[a]
==> 1

irb --> a.delete_at(1)
==> 2

irb --> a
==> [1]

irb --> b
==> {[1, 2]=>1} # STILL UNCHANGED

irb --> b[a]
==> nil # Trivial, since a has changed

irb --> b.keys.include? a
==> false # Trivial, since a has changed 
```

使用`a.clone`将确保即使我们`a`稍后更改密钥也不会更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T11:52:22.277

正如您已经说过的，问题在于哈希键与您稍后修改的对象完全相同，这意味着键在程序执行期间会发生变化。

为避免这种情况，请复制数组以用作哈希键：

```
a = [1, 2]
b = { a.clone => 1 } 
```

现在您可以继续使用`a`并保持哈希键不变。***

# heroku - 在 Heroku 上使用 Twitter 和 Playframework 2.0 进行安全社交

> ID：12177075
> 
> 赞同：0
> 
> 时间：2012-08-29T11:39:23.227
> 
> 标签：heroku, playframework, playframework-2.0, securesocial

我已经在我的 play 2 应用程序中成功安装了securesocial，并且它适用于 google 和 facebook。但我在推特上有问题

我的 conf 文件有以下内容

```
#
# Twitter
#
securesocial.twitter.requestTokenURL=https://twitter.com/oauth/request_token
securesocial.twitter.accessTokenURL=https://twitter.com/oauth/access_token
securesocial.twitter.authorizationURL=https://twitter.com/oauth/authenticate
securesocial.twitter.consumerKey=mykey
securesocial.twitter.consumerSecret=mysecret 
```

但我收到以下异常。

```
securesocial.provider.AuthenticationException: Authorization failed (server replied with a 401). This can happen if the consumer key was not correct or the signatures did not match. 
```

我的密钥和秘密与我为此应用程序创建的 twitter API 帐户应用程序中的相同。我还包括了调用此请求的网站和@anywhere 域。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:48:45.670

确保您的计算机中的时间设置正确。如果您计算机中的本地时间与其服务器中的时间相比超出了一些偏移量，Twitter 将返回该错误。希望这可以帮助。

# objective-c - UIView drawRect() ：填充除多边形外的所有内容

> ID：12177077
> 
> 赞同：1
> 
> 时间：2012-08-29T11:39:32.523
> 
> 标签：objective-c, ios, polygon, quartz-2d, drawrect

我需要在 drawRect() 方法中用“还原多边形”填充我的 UIView - 视图中的所有内容都填充了一些颜色，除了多边形本身。

我有这个代码来绘制一个简单的多边形：

```
CGContextBeginPath(context);
for(int i = 0; i < corners.count; ++i)  
{
    CGPoint cur = [self cornerAt:i], next = [self cornerAt:(i + 1) % corners.count];
    if(i == 0)
        CGContextMoveToPoint(context, cur.x, cur.y);
    CGContextAddLineToPoint(context, next.x, next.y);
}
CGContextClosePath(context);
CGContextFillPath(context); 
```

我发现了一个类似的问题，但在 C# 中，而不是 Obj-C 中：[c# fill everything but GraphicsPath](https://stackoverflow.com/questions/1935644/c-sharp-fill-everything-but-graphicspath)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:27:59.360

可能最快的方法是设置剪辑：

```
// create your path as posted
// but don't fill it (remove the last line)

CGContextAddRect(context, self.bounds);
CGContextEOClip(context);

CGContextSetRGBFillColor(context, 1, 1, 0, 1);
CGContextFillRect(context, self.bounds); 
```

其他两个答案都建议先填充一个矩形，然后在顶部绘制带有清晰颜色的形状。两者都省略了必要的混合模式。这是一个工作版本：

```
CGContextSetRGBFillColor(context, 1, 1, 0, 1);
CGContextFillRect(context, self.bounds);

CGContextSetBlendMode(context, kCGBlendModeClear);

// create and fill your path as posted 
```

**编辑：**这两种方法都需要`backgroundColor`将`clearColor`and`opaque`设置为 NO。

**第二次编辑：**最初的问题是关于核心图形的。当然，还有其他方法可以遮盖视图的一部分。最值得注意`CALayer`的是 的`mask`财产。

您可以将此属性设置为 CAPathLayer 的实例，该实例包含您的剪辑路径以创建模板效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:55:05.380

在drawRect中你可以用你想要的颜色设置你的视图的背景颜色

```
 self.backgroundColor = [UIcolor redColor]; //set ur color 
```

然后按照你的方式绘制一个多边形。

```
CGContextBeginPath(context);
for(int i = 0; i < corners.count; ++i)  
{
    CGPoint cur = [self cornerAt:i], next = [self cornerAt:(i + 1) % corners.count];
    if(i == 0)
        CGContextMoveToPoint(context, cur.x, cur.y);
    CGContextAddLineToPoint(context, next.x, next.y);
}
CGContextClosePath(context);
CGContextFillPath(context); 
```

希望它有帮助..快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:56:27.953

创建一个新的 CGLayer，用你的外部颜色填充它，然后使用清晰的颜色绘制你的多边形。

```
layer1 = CGLayerCreateWithContext(context, self.bounds.size, NULL);
context1 = CGLayerGetContext(layer1);

[... fill entire layer ...]

CGContextSetFillColorWithColor(self.context1, [[UIColor clearColor] CGColor]);

[... draw your polygon ...]

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextDrawLayerAtPoint(context, CGPointZero, layer1); 
```

# java - java.util.concurrent 集合的安全发布

> ID：12177081
> 
> 赞同：6
> 
> 时间：2012-08-29T11:39:47.177
> 
> 标签：java, concurrency, thread-safety

这段代码中 volatile 是多余的吗？

```
public class Test {
    private volatile Map<String, String> map = null;

    public void resetMap() { map = new ConcurrentHashMap<>(); }

    public Map<String, String> getMap() { return map; }
} 
```

换句话说，是否`map = new ConcurrentHashMap<>();`提供任何可见性保证？

据我所知，唯一提供的保证[`ConcurrentMap`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentMap.html)是：

> 在将对象作为键或值放入 ConcurrentMap 之前线程中的操作发生在另一个线程中从 ConcurrentMap 访问或删除该对象之后的操作。

java.util.concurrent（CopyOnWriteArrayList 等）中的其他线程安全集合怎么样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T11:46:07.170

`volatile`不是多余的，因为您正在更改对地图的引用。即 ConcurrentMap 只提供关于集合内容的保证，而不是对它的引用。

另一种选择是

```
public class Test {
    private final Map<String, String> map = new ConcurrentHashMap<>();

    public void resetMap() { map.clear(); }

    public Map<String, String> getMap() { return map; }
} 
```

> java.util.concurrent（CopyOnWriteArrayList 等）中的其他线程安全集合怎么样？

只有集合的行为是线程安全的。对集合的引用不是线程安全的，集合中的元素不会通过将它们添加到集合来实现线程安全。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T11:47:53.313

`volatile`这里是必要的。它适用于引用，而不适用于它所引用的内容。换句话说，一个对象是线程安全的并不重要，其他线程不会看到`map`字段的新值（例如，可能会看到以前引用的并发映射或`null`）。

此外，即使您的对象是不可变的（例如`String`），您仍然需要`volatile`，更不用说其他线程安全的集合，例如`CopyOnWriteArrayList`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T11:52:45.910

这不仅仅是关于参考。通常，在没有`volatile`修饰符的情况下，其他线程可能会观察到对对象的新引用，但会观察到处于部分构造状态的对象。一般来说，即使在查阅了文档之后，也很难知道哪些对象可以安全地被数据竞赛发布。一个有趣的说明是[JLS确实为](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)**线程安全的不可变对象**保证了这一点，所以如果文档提到这两个属性就足够了。

`ConcurrentHashMap`显然不是一个不可变的对象，所以这不适用，并且文档没有提到任何关于数据竞赛发布的内容。通过仔细检查源代码，我们可能会得出结论，它确实是安全的，但是我不建议在没有明确记录此属性的情况下依赖此类发现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:55:01.057

**[内存一致性属性](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)**

> 对 volatile 字段的写入发生在对同一字段的每次后续读取之前。volatile 字段的写入和读取具有与进入和退出监视器类似的内存一致性效果，但不需要互斥锁定。
> 
> 在将对象放入任何并发集合之前的线程中的操作发生在另一个线程中从集合中访问或删除该元素之后的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:16:48.357

好的 - 如果字段不是易失性，我能够构建一个中断的示例（在我的机器上：JDK 1.7.06 / Win 7 64 位） - 如果地图不是易失性，程序永远不会打印- 如果地图`Loop exited`是易失性的，它会打印`Loop exited`. QED。

```
public class VolatileVisibility extends Thread {

    Map<String, String> stop = null;

    public static void main(String[] args) throws InterruptedException {
        VolatileVisibility t = new VolatileVisibility();
        t.start();
        Thread.sleep(100);
        t.stop = new ConcurrentHashMap<>(); //write of reference
        System.out.println("In main: " + t.stop); // read of reference
        System.out.println("Waiting for run to finish");
        Thread.sleep(200);
        System.out.println("Still waiting");
        t.stop.put("a", "b"); //write to the map
        Thread.sleep(200);
        System.exit(0);
    }

    public void run() {
        System.out.println("In run: " + stop); // read of reference
        while (stop == null) {
        }
        System.out.println("Loop exited");
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T00:43:25.530

我的印象是 Doug Lea 的并发对象可以通过数据竞争安全地发布，因此即使被滥用，它们也是“线程安全的”。尽管他可能不会公开宣传。

# asp.net - powerbuilder 中的 Microsoft Crypto API (CAPI)

> ID：12177083
> 
> 赞同：0
> 
> 时间：2012-08-29T11:39:53.540
> 
> 标签：asp.net, sybase, powerbuilder, mscapi

我正在寻找有关如何从 Windows 证书存储中提取证书信息并执行操作（例如使用检索到的证书验证签名）的示例信息。特定证书将通过 USB 令牌提供。任何帮助或指示将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:00:09.720

Sybase 代码交换上提供了一个 Cryto 示例程序，它可能需要登录 Sybase 站点，并且您需要将其迁移到当前版本的 PB。下载位置是：

[http://downloads.sybase.com/codexchange/powerbuilder/923/PBCrypto.zip](http://downloads.sybase.com/codexchange/powerbuilder/923/PBCrypto.zip)

此外，您可以在此处找到一些在 Windows 机器上使用 Crypto API 的代码示例：

[http://www.rgagnon.com/pbdetails/pb-0170.html](http://www.rgagnon.com/pbdetails/pb-0170.html)

# java - 带有希伯来文和英文字母排列的文件名

> ID：12177092
> 
> 赞同：1
> 
> 时间：2012-08-29T11:40:33.523
> 
> 标签：java, string, hebrew

我有一个文件名：“אפיון הפצת UCM.doc”。

当我从右到左编写文件时，它显示：“UCM.doc אפיון הפצת”

有没有办法排列字符串，以便文件扩展名出现在字符串的末尾。

而不是“UCM.doc אפיון הפצת”，“doc.UCM אפיון הפצת”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:12:54.647

据我了解，您对在 Eclipse 或其他 Java IDE 中输入感到困惑。如果您在 Windows 上，只需在记事本中写入您想要的字符串，然后将其复制并粘贴到 java IDE 中。Microsoft 完全按照您的预期支持 RTL。

# javascript - 在哪里可以找到可用的开源 3d 图表？

> ID：12177094
> 
> 赞同：1
> 
> 时间：2012-08-29T11:40:37.690
> 
> 标签：javascript, flash, actionscript, flex4

我正在寻找开源或未经许可的 3D 图表。

如果你有一些链接，请分享它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:42:06.003

你试过谷歌图表吗？

[https://developers.google.com/chart/](https://developers.google.com/chart/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T04:27:07.227

我所知道的唯一真正的开源（MIT 许可）3D 图表是这两个

[https://github.com/bkuzmic/raphael-charts-plugin](https://github.com/bkuzmic/raphael-charts-plugin)
[https://github.com/PuffyCoffee/3D-Pie-chart](https://github.com/PuffyCoffee/3D-Pie-chart)

第一个提供馅饼和酒吧选项。作者仍在积极研究它，因此它应该会随着时间的推移而改进。

还有其他声称是“免费”和“开源”的 3D 图表工具。但是他们的许可证非常严格。基本上，只有当您将其用于没有广告且零商业目的的个人网站时，他们才允许您免费使用他们的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:26:24.103

不是真正的 3D，但您可以使用 Flex SDK 的数据图表： http: [//opensource.adobe.com/svn/opensource/flex/sdk/trunk/frameworks/projects/charts/](http://opensource.adobe.com/svn/opensource/flex/sdk/trunk/frameworks/projects/charts/)

我不记得组件数据的状态是什么——当他们发布 SDK 的其余部分时，他们无法打开它们，而且我找不到任何关于它们当前状态的信息。

我还没有遇到任何其他包，无论是否开源，JS 或 Flash，它们可以像使用 Flex Charting 一样轻松地绘制日志 - 有些会绘制 y 轴，但不会绘制 x 和 y。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:12:31.193

试试[Highcharts](http://www.highcharts.com/demo/dynamic-click-to-add)。IBM、NASA、Siemens 和其他公司根据他们的网站使用它。它是纯 JavaScript。我在网上搜索了很长时间。我不太确定 3D 图表是否可行，但它应该可以满足大多数需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-13T11:12:13.533

参加聚会可能有点晚了——但 RGraph 可以在 MIT 许可下使用并生成一些漂亮的 3D 图表：

[http://www.rgraph.net/docs/3d-javascript-charts.html](http://www.rgraph.net/docs/3d-javascript-charts.html)

# android-progressbar - 在android中使用AsynTask时如何更新ProgressBar和UI

> ID：12177095
> 
> 赞同：1
> 
> 时间：2012-08-29T11:40:38.410
> 
> 标签：android-progressbar

我正在使用进度条以及在 textview 中显示完成的进程百分比。但是当我在 doInBackground 中使用 txtview.setText(proc+"% Completed") 时，会产生强制关闭问题。我认为使用 AsynTask UI 不会更新，但我们需要更新。所以请给我一个适当的解决方案。非常感谢您提前

# objective-c - Xcode - setFocus 在文本字段上，becomeFirstResponder 是不够的

> ID：12177098
> 
> 赞同：1
> 
> 时间：2012-08-29T11:40:48.473
> 
> 标签：objective-c, ios, xcode, setfocus, resignfirstresponder

目前，我`Did End On Exit`在我的应用程序中触发了一个方法（我知道这可能不是最好的方法，但我对 Objective C 和 Xcode 很陌生，我只是在做什么让我感觉舒服）。

此方法从当前文本字段中**退出 firstResponder**并将其应用于稍后的文本字段。

*我面临*的问题是键盘覆盖了下一个文本字段，因此用户不知道焦点在哪里，因此不知道他们需要输入什么。**

 *如何让我的键盘向下移动并实际显示当前处于活动状态的文本框？做某事 firstResponder 根本不会做我想做的事，除非我缺少部分实现。

这是我的简单方法：

```
- (IBAction)firstNameNext:(id)sender {
[firstNameTextField resignFirstResponder];
[surnameTextField becomeFirstResponder];
} 
```

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:49:40.223

在主视图中添加 UIScrollView，然后将所有内容作为子视图添加到 UIScrollView

现在，当特定的 UITextField 需要能够在视图中可见时，使用它的委托，如下所示：

注意：像这样在 .h 文件中添加 UITextFieldDelegate

```
@interface yourViewController : UIViewController<UITextFieldDelegate> 
```

同时与文件的所有者绑定

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField;
{
   if(textField == yourSpecficTextField) //one u want move upwards
   {
      yourScrollView.contentOffset = CGPointMake(0,200); //required offset
   }
   ... //provide contentOffSet those who needed
   return YES;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
   yourScrollView.contentOffset = CGPointMake(0,0); //make UIScrollView as it was before
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:52:41.493

如果您有将被虚拟键盘覆盖的键盘输入字段，那么您需要将这些字段从虚拟键盘下方移出。

执行此操作的正常方法是让控制器的视图成为 UIScrollView 之类的可滚动视图。[移动位于键盘下方的内容](http://developer.apple.com/library/ios/#DOCUMENTATION/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)提供了一种非常强大的方式来调整滚动视图并确保显示所需的字段。*

# string - 如何在 Crystal Reports 中的 StringVar 中插入换行符

> ID：12177102
> 
> 赞同：8
> 
> 时间：2012-08-29T11:40:58.593
> 
> 标签：string, crystal-reports, escaping

如何在 Crystal Reports 的 StringVar 中输入换行符（或通常用转义字符解决的其他非文本字符）？

想要的输出：

> 第 1
> 行 第 2 行

我试过`StringVar s := "line 1 \n line 2";`了，但这不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-28T08:26:32.400

我只是使用以下代码换行

“这个公式字段” + ChrW(13) + “包含一个换行符！”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T12:45:09.217

它可能没有太大的改进，但您可以构建一个字符串格式的自定义函数：

```
// sf()
Function (Stringvar text)

    Stringvar Array keys := ["\n"];
    Stringvar Array values := [Chr(10)+Chr(13)];

    Numbervar i;

    For i := 1 to Ubound(keys) do (
        text := Replace(text, keys[i], values[i])
    );

    text;

//{@ text}
sf("line 1 \n line 2") 
```

如果您需要支持其他转义序列，这将为您提供一些可扩展性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T11:40:58.593

我找到了一个功能性的，虽然不是代码美观的解决方案：

```
StringVar s := "line 1" + chr(10) + chr(13) + "line 2"; 
```

# yii - Yii 在局部视图中加载日期选择器

> ID：12177105
> 
> 赞同：1
> 
> 时间：2012-08-29T11:41:05.187
> 
> 标签：yii

尝试从视图中加载带有日期选择器的块..但它仅加载没有日期选择功能的文本字段。我究竟做错了什么？

**`create`观点_**

```
<?php echo $form->dropDownList($model,'operation_type',CHtml::listData(OperationType::model()->findAll(),
'id','name'),array(
    'class'=>'span3',
    'empty'=>'----- Type -----',
    'id'=>'idOpType',
    'ajax'=>array(
        'type'=>'POST',
        'url'=>CController::createUrl('operations/meta'),
        //'dataType'=>'json',
        'data'=>array('idOpType'=>'js:this.options[this.selectedIndex].innerHTML'),
        'success'=>'function(data){
            $("#opTypeBlock").html(data);
        }',
    ),
)); ?> 
```

**控制器动作**

```
public function actionMeta(){
        $data= new OperationsMeta();
        $this->renderPartial('_meta',array('model'=>$data));
    } 
```

**我试图加载的视图**

```
<p>Select due date</p>
<?php $this->widget('zii.widgets.jui.CJuiDatePicker',array(
    'attribute'=>'param',
    'options'=>array(
        'showAnim'=>'fold',
    ),
    'model'=>$model,
    'htmlOptions'=>array(
        'style'=>'height:20px;',
        'class'=>'inline',
        'id'=>'datepickerOpType',
    ),
));
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:07:27.070

尝试

```
$this->renderPartial('_meta',array('model'=>$data), false, true); 
```

所以它加载JS文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T00:06:58.823

使用`renderAjax()`which 将 JS/CSS 脚本和文件注入到渲染结果中，这些脚本和文件在视图中注册，如此处[所述](http://www.yiiframework.com/doc-2.0/yii-web-controller.html#renderAjax()-detail)。

# html - twitter 引导布局问题

> ID：12177106
> 
> 赞同：0
> 
> 时间：2012-08-29T11:41:08.467
> 
> 标签：html, twitter-bootstrap

开始这是我的第一个问题并访问stackoverflow，这将是我第一次尝试实际尝试编程。

我在使用 twitter bootstrap 时遇到了麻烦！

我不知道为什么第二行只有一个段落。

我无法上传页面截图，我该怎么办？

这是我的代码：

```
<div class="container">

  <!-- Main hero unit for a primary marketing message or call to action -->
  <div class="hero-unit">
    <h1>Hello, world!</h1>
    <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
    <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
  </div>

  <!-- Example row of columns -->
  <div class="row">
    <div class="span4">
      <h2>Heading</h2>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
    <div class="span4">
      <h2>Heading</h2>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
   </div>
    <div class="span4">
      <h2>Heading</h2>
      <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
  </div><!-- end row 1 -->

  <div class="row">
    <div class="span3">
    <h2>Heading</h2>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
  </div><! -- end row 2 -->

  <div class="row">
    <div class="span3">
    <h2>Heading</h2>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
  <div class="row">
    <div class="span3">
    <h2>Heading</h2>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
  <div class="row">
    <div class="span3">
    <h2>Heading</h2>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
    <div class="row">
    <div class="span3">
    <h2>Heading</h2>
      <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
  </div><!-- end row 2 --> 
  <hr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:11:29.530

因为这正是您要问的：

```
<!-- Example row of columns -->
<div class="row">
    <div class="span4">
    </div>
    <div class="span4">
    </div>
    <div class="span4">
    </div>
</div><!-- end row 1 -->

<div class="row">
    <div class="span3">
    </div>
</div><! -- end row 2 -->

<div class="row">
    <div class="span3">
    </div>
    <div class="row">
        <div class="span3">
        </div>
        <div class="row">
            <div class="span3">
            </div>
            <div class="row">
                <div class="span3">
                </div>
            </div><!-- end row 2 --> 
```

还有，你需要更多

```
</div> 
```

你的困惑来自于你所有的行都是一样的

给每一行一个特定的名称（Header1，header2 ...），您将确切地看到问题所在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:11:47.273

这是一个简单的问题，您实际上拥有的行数比您想象的要多：

从事物的声音来看，您需要两个顶级行（即拉伸容器 div 整个宽度的行）

这是您实际拥有的精简版（注意：为清楚起见，我删除了英雄单位和内容）：

```
<div class="container">

  <!-- start of first row -->
  <div class="row">
    <div class="span4">
    </div>
    <div class="span4">
    </div>
    <div class="span4">
    </div>
  </div><!-- end of first row -->

  <!-- start of second row -->
  <div class="row">
    <div class="span3">
    </div>
  </div><!-- IMPORTANT: This closing div actually closes your second row -->

  <!-- start of third row, IMPORTANT: you have failed to close this div -->
  <div class="row">
    <div class="span3">
    </div>
    <!-- start of fourth row, IMPORTANT: you have failed to close this div -->
    <div class="row">
      <div class="span3">
      </div>
      <!-- start of fifth row, IMPORTANT: you have failed to close this div -->
      <div class="row">
        <div class="span3">
        </div>
        <!-- start of sixth row, IMPORTANT: you HAVE closed this div -->
        <div class="row">
          <div class="span3">
          </div>
       </div><!-- you have erroniously identified this closing div as being the end of row 2, when it is actually the end of row 6 --> 
    <!-- IMPORTANT: you fail to close the container in your posted code --> 
```

如您所见，您的 div 有点混乱。

重要的是要注意第 2 行突然结束。如果您希望从第三行开始的内容出现在第二行中，那么您需要将代码移动到包含它的 div 中。

像这样的东西：可能会有所帮助：

```
<div class="container">

  <!-- start of first row -->
  <div class="row">
    <div class="span4">
    </div>
    <div class="span4">
    </div>
    <div class="span4">
    </div>
  </div><!-- end of first row -->

  <!-- start of second row -->
  <div class="row">
    <div class="span3">
    </div>
    <div class="span3">
    </div>
    <div class="span3">
    </div>
    <div class="span3">
    </div>
    <div class="span3">
    </div>
  </div><!-- end of row 2 -->
</div><!-- IMPORTANT: don't forget to close the  container --> 
```

这将给出两行，第一行包含 3 个跨度，第二行包含 4 个。

# javascript - Javascript - 如果用户没有响应，则关闭确认消息

> ID：12177109
> 
> 赞同：0
> 
> 时间：2012-08-29T11:41:19.960
> 
> 标签：javascript, asp.net

我有 asp.net 2.0 网站，其中我通过确认消息框显示会话超时，要求用户选择确定或取消。

问题：如果用户没有提供任何输入（假设他的桌面被锁定并且他出去吃午饭） - 那么我如何关闭此确认消息并显示另一个弹出窗口或重新定向到登录页面

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:50:13.413

如果您使用的是本机浏览器确认框，则无法关闭它，用户需要这样做。如果您创建自己的，那么您可以使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)在一定时间后关闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:02:19.240

正如 haslama 建议的那样，您必须创建一个自定义警报，因为您无法关闭浏览器确认框。

作为替代方案，您可以向用户显示基于 div 的消息而不是警报，并且在该 div 中用户可以选择 OK 或取消，您可以为该 div 实现超时。

# objective-c - UIDatePicker 无故崩溃

> ID：12177112
> 
> 赞同：0
> 
> 时间：2012-08-29T11:41:25.930
> 
> 标签：objective-c, cocos2d-iphone, uidatepicker

我设置`UIDatePicker`了一个 cocos2d 场景。（希望它是对的）它工作得很好，直到我必须选择一个日期，所以我滚动选择器，然后它停止的那一刻，它崩溃了，它甚至不调用选择器方法。

```
CGRect pickerFrame = CGRectMake(0,250,0,0);

UIDatePicker *myPicker = [[UIDatePicker alloc] initWithFrame:pickerFrame];
[myPicker addTarget:self action:@selector(pickerChanged:) 
        forControlEvents:UIControlEventValueChanged];

//[self.view addSubview:myPicker];
[[[CCDirector sharedDirector] view] addSubview:myPicker];
[myPicker release];

- (void)pickerChanged:(id)sender
{
    NSLog(@"value: %@",[sender date]);

} 
```

顺便说一句，我是否正确地将选择器添加到 cocos2d 场景中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:45:17.100

It crashes when the picker try to call your method, but the target ( `self`) may have been deallocated, so you should get an EXC_BAD_ACCESS.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:45:46.920

date 是一个属性而不是一个函数......在这种情况下，sender 是一个 DatePicker。下面的代码应该可以工作！

```
-(void)pickerChanged:(UIDatePicker*) datePicker{
    NSLog(@"value: %@",datePicker.date);
} 
```

# django - centos中使用mod_wsgi安装Django，ImportError: No module named os

> ID：12177119
> 
> 赞同：0
> 
> 时间：2012-08-29T11:41:54.407
> 
> 标签：django, centos, mod-wsgi

我有，这个 httpd.conf

```
NameVirtualHost *:80
<VirtualHost *:80>
    ServerName www.hello2.ch
    DocumentRoot /home/django_www/hello
    WSGIScriptAlias / /var/www/django_www/hardi/django.wsgi
    ErrorLog /var/www/django_www/hardi/error_log
    CustomLog /var/www/django_www/hardi/access_log common
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/html
</VirtualHost> 
```

# vi /etc/hosts

```
127.0.0.1       localhost.localdomain localhost
128.178.131.89  www.hello2.ch
128.178.131.89  ohtersite.ch 
```

python 2.5，mod_wsgi-2.5，/root/epd-5.1.0/lib/libpython2.5.so.1.0：安装！

# ldd /root/epd-5.1.0/bin/python

```
libpython2.5.so.1.0 => /root/epd-5.1.0/lib/libpython2.5.so.1.0 (0x00002b1bb7333000)
libpthread.so.0 => /lib64/libpthread.so.0 (0x0000003da0600000)
libdl.so.2 => /lib64/libdl.so.2 (0x0000003d9fe00000)
libutil.so.1 => /lib64/libutil.so.1 (0x0000003dadc00000)
libm.so.6 => /lib64/libm.so.6 (0x0000003da0200000)
libc.so.6 => /lib64/libc.so.6 (0x0000003d9fa00000)
/lib64/ld-linux-x86-64.so.2 (0x0000003d9f600000) 
```

# 回声 $LD_LIBRARY_PATH

/root/epd-5.1.0/lib/

但是当我尝试加载网页时，我得到以下error_log：

```
'import site' failed; use -v for traceback
[Wed Aug 29 11:52:57 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Wed Aug 29 11:52:57 2012] [notice] Digest: generating secret for digest authentication ...
[Wed Aug 29 11:52:57 2012] [notice] Digest: done
[Wed Aug 29 11:52:57 2012] [notice] mod_python: Creating 4 session mutexes based on 256 max processes and 0 max threads.
[Wed Aug 29 11:52:57 2012] [notice] Apache/2.2.3 (Red Hat) configured -- resuming normal operations
[Wed Aug 29 11:55:00 2012] [error] [client 66.249.72.187] Symbolic link not allowed or link target not accessible: /var/www/html/app/webroot/w3
[Wed Aug 29 11:58:30 2012] [error] [client 66.249.72.187] Symbolic link not allowed or link target not accessible: /var/www/html/app/webroot/w3
[Wed Aug 29 12:01:58 2012] [error] [client 66.249.72.187] Symbolic link not allowed or link target not accessible: /var/www/html/app/webroot/w3
[Wed Aug 29 12:05:30 2012] [error] [client 66.249.72.187] Symbolic link not allowed or link target not accessible: /var/www/html/app/webroot/w3
[Wed Aug 29 12:09:00 2012] [error] [client 66.249.72.187] Symbolic link not allowed or link target not accessible: /var/www/html/app/webroot/w3
[Wed Aug 29 12:12:29 2012] [error] [client 66.249.72.187] Symbolic link not allowed or link target not accessible: /var/www/html/app/webroot/w3
[Wed Aug 29 12:14:06 2012] [error] [client 178.33.137.225] Symbolic link not allowed or link target not accessible: /var/www/html/app/webroot/w3
[Wed Aug 29 12:15:59 2012] [error] [client 66.249.72.187] Symbolic link not allowed or link target not accessible: /var/www/html/app/webroot/w3
Could not find platform independent libraries <prefix>
Could not find platform dependent libraries <exec_prefix>
Consider setting $PYTHONHOME to <prefix>[:<exec_prefix>]
'import site' failed; use -v for traceback
Could not find platform independent libraries <prefix>
Could not find platform dependent libraries <exec_prefix>
Consider setting $PYTHONHOME to <prefix>[:<exec_prefix>]
....
'import site' failed; use -v for traceback
[Wed Aug 29 12:17:47 2012] [notice] caught SIGTERM, shutting down
Could not find platform independent libraries <prefix>
Could not find platform dependent libraries <exec_prefix>
Consider setting $PYTHONHOME to <prefix>[:<exec_prefix>]
'import site' failed; use -v for traceback
[Wed Aug 29 12:17:47 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Wed Aug 29 12:17:47 2012] [notice] Digest: generating secret for digest authentication ...
[Wed Aug 29 12:17:47 2012] [notice] Digest: done
[Wed Aug 29 12:17:47 2012] [notice] mod_python: Creating 4 session mutexes based on 256 max processes and 0 max threads.
[Wed Aug 29 12:17:47 2012] [notice] Apache/2.2.3 (Red Hat) configured -- resuming normal operations
[Wed Aug 29 12:18:01 2012] [error] Traceback (most recent call last):
[Wed Aug 29 12:18:01 2012] [error]   File "/var/www/django_www/hardi/django.wsgi", line 1, in <module>
[Wed Aug 29 12:18:01 2012] [error]     import os
[Wed Aug 29 12:18:01 2012] [error] ImportError: No module named os 
```

任何想法，如何使 Django 与 mod_wsgi 一起工作，以及如何使第一个 VirtualHost 条目与 www.hello2.ch 网页以及第二个 VirtualHost 条目中的所有其他条目相匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:28:09.887

Run 'ldd' on the mod_wsgi.so.

The problem is likely that it is finding a different Python version. It can also be that since your Python is not in a standard location, that it doesn't know where to find the installation.

In the latter case, add at global scope, outside of VirtualHost, in your Apache configuration:

```
WSGIPythonHome /root/epd-5.1.0 
```

The value should correspond to the value of sys.prefix printed from your Python when run.

```
import sys
print sys.prefix 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:27:48.280

根据您遇到的错误，似乎有几件事可能正在发生。但是，我不会将所有这些都放入评论中，而是继续发布作为答案。

在我的 django.wsgi 文件中，我有以下两行更改 PATH 环境变量以让 python 从我的 django 项目中导入包：

```
import sys
sys.path.append('/path/to/mysite.com/app/mydjangoproject') 
```

您还需要确保在您将使用 django的`httpd.conf`内部添加以下内容：`VirtualHost`

```
<Directory /path/to/mysite.com/app/mydjangoproject>
    Order allow,deny
    Allow from all
</Directory> 
```

编辑：

关于您在错误消息中出现的评论中提到的符号链接，我不太确定该怎么做。如果您只是尝试使用它来允许 apache 访问 DocumentRoot 之外的资源，则需要添加包含符号链接的`Options FollowSymLinks`指令`Directory`

# javascript - CRM 身份验证问题

> ID：12177120
> 
> 赞同：0
> 
> 时间：2012-08-29T11:42:00.520
> 
> 标签：javascript, dynamics-crm

如何在 JavaScript 中包含 GenerateAuthenticationHeader()。我需要包含哪些必要的 DLL？我正在使用此函数使用 JavaScript 检索 MS CRM 实体。我收到此错误：

> Microsoft JScript 运行时错误：“GenerateAuthenticationHeader”未定义

```
function AccessCRMWebServices() {
        debugger;
        var auth = GenerateAuthenticationHeader();
                    var productCode = "ABCDE";
                    var stock;
                    var x = Xrm.Page.getAuthenticationHeader();
                    var fetchXml = '<fetch version="1.0" output-format="xml-platform" mapping="logical">';
                    // Target Entity Name
                    fetchXml += '<entity name="new_aditya_products">';
                    // Required Attribute
                    fetchXml += '<attribute name="new_productname"/>';
                    fetchXml += '<attribute name="new_name"/>';
                    // Condition
                    fetchXml += '<filter type="and">';
                    fetchXml += '<condition attribute="new_productcode" operator="eq" value="' + productCode + '" />';
                    fetchXml += '</filter>';

                    fetchXml += '</entity>';
                    fetchXml += '</fetch>';

                    var Xml = "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">"
                    Xml += GenerateAuthenticationHeader()
                    Xml += "<soap:Body>";
                    Xml += "<Fetch xmlns=\"http://schemas.microsoft.com/crm/2007/WebServices\">";
                    Xml += "<fetchXml>";
                    //Xml += _HtmlEncode(fetchXml);
                    Xml += "</fetchXml>";
                    Xml += "</Fetch>";
                    Xml += "</soap:Body>";
                    Xml += "</soap:Envelope>";

                    var XmlHttp = CreateXmlHttp();

                    XmlHttp.open("POST", 'http://rxdotnet:5555/MSCRMServices/2007/MetadataService.asmx', false);
                    XmlHttp.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
                    XmlHttp.setRequestHeader("SOAPAction", "http://schemas.microsoft.com/crm/2007/WebServices/Fetch");
                    XmlHttp.send(Xml);
                    var resultDoc = loadXmlDocument(XmlHttp.responseXML.text);
                    var resultRecords = resultDoc.selectNodes("//stockvolume");
                    var resultnames = resultDoc.selectNodes("//new_name");
                    if (resultRecords.length == 1) {
                        stock = resultRecords[0].text;
                        alert('Product ' + resultnames[0].text + ' Contains stock is -' + stock);
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:52:55.100

我假设您使用的是 MS CRM 4.0 版

该`GenerateAuthenticationHeader`函数只能在表单代码中本地使用（它是 SDK 中记录的全局函数）。我相信不支持在任何其他情况下使用它。这就是你得到错误的原因。

[根据SDK](http://msdn.microsoft.com/en-us/library/cc150838.aspx)，它所做的只是创建一个看起来像这样的 SOAP 标头（因此也许您可以在代码中重新创建它）：

```
<soap:Header>
<CrmAuthenticationToken xmlns="http://schemas.microsoft.com/crm/2007/WebServices">
  <AuthenticationType xmlns="http://schemas.microsoft.com/crm/2007/CoreTypes">
    0
  </AuthenticationType>
  <OrganizationName xmlns="http://schemas.microsoft.com/crm/2007/CoreTypes">
    AdventureWorksCycle
  </OrganizationName>
  <CallerId xmlns="http://schemas.microsoft.com/crm/2007/CoreTypes">
    00000000-0000-0000-0000-000000000000
  </CallerId>
</CrmAuthenticationToken>
</soap:Header> 
```

除此之外，可能还有另一种解决方案。你想做什么，你的代码在哪里运行？

# ios - 我在仪器中的 CGImage 对象数量是我应该拥有的两倍

> ID：12177123
> 
> 赞同：0
> 
> 时间：2012-08-29T11:42:08.813
> 
> 标签：ios, cgimage

我有一个 AssetInfo 对象，用于封装有关 ALAsset 或我的应用程序中可能拥有的其他资产类型的基本信息。

资产信息将 [alAsset 缩略图] 保存为 CGImageRef。当我检查仪器时，我的 CGImage 对象似乎是我应该拥有的两倍。假设有 4000 个 AssetInfo 实例，我将有大约 8000 个 CGImage 实例。

我正在实例化我的 AssetInfo 对象，如下所示。

```
- (void)enumerateAsset:(AssetsGroupInfo *)assetsGroup alAsset:(ALAsset *)alAsset withIndex:(NSUInteger)index {

        NSDate *date = [alAsset valueForProperty:ALAssetPropertyDate];
        NSString *dateKey = [date dateKey];
        CGImageRef thumbnail = [alAsset thumbnail];
        NSURL *url = [[alAsset defaultRepresentation] url];

        AssetInfo *alAssetInfo = [[AssetInfo alloc]
                initWithURL:url
                   withDate:date
              withThumbnail:thumbnail];

        //...
} 
```

我的 AssetInfo 类看起来像这样

```
@implementation AssetInfo {
        @private
            NSDate *_dateCreated;
            NSURL *_url;
            CGImageRef _thumbnail;
        }

        - (id)initWithURL:(NSURL *)url withDate:(NSDate *)date withThumbnail:(CGImageRef)thumbnailRef {

            if ((self = [self init])) {
                _url = url;
                _dateCreated = date;
                _thumbnail = CGImageRetain(thumbnailRef);
            }

            return self;
        }

        - (NSURL *)url {
            return _url;
        }

        - (NSDate *)dateCreated {
            return _dateCreated;
        }

        - (CGImageRef)thumbnail {
            return _thumbnail;
        }

        #pragma mark - Equality

        - (BOOL)isEqual:(id)object {

            //TODO:Include date in equality checking
            BOOL valueToReturn = NO;

            if (object && [object respondsToSelector:@selector(url)]) {
                NSURL *myUrl = [self url];
                NSURL *objURL = [object url];
                valueToReturn =  ([myUrl isEqualToURL:objURL]);
            }

            return valueToReturn;
        }

        - (NSUInteger)hash {
            return [[self url] hash];

        }

        - (void)dealloc {

            NSLog(@"%s", __PRETTY_FUNCTION__);

            CGImageRelease(_thumbnail);
        }
    @end 
```

我稍后使用该资产，如下面的代码所示。

```
- (void)loadWithAsset:(AssetInfo *)asset {
    _asset = asset;
    _image = [[UIImage alloc] initWithCGImage:[_asset thumbnail]];
} 
```

如果我在实例化 AssetInfo 的位置释放缩略图（如下面的片段所示），则活动 CGImage 对象的数量对应于活动 AssetInfo 对象的数量。但是，当我尝试访问 AssetInfo 对象的 thumbnail 属性时，应用程序在上面代码中的行中出现 EXC_BAD_ACCESS 崩溃，在该行中我使用 CGImageRef 实例化了 UIImage。

```
 - (void)enumerateAsset:(AssetsGroupInfo *)assetsGroup alAsset:(ALAsset *)alAsset withIndex:(NSUInteger)index {

        NSDate *date = [alAsset valueForProperty:ALAssetPropertyDate];
        NSString *dateKey = [date dateKey];
        CGImageRef thumbnail = [alAsset thumbnail];
        NSURL *url = [[alAsset defaultRepresentation] url];

        AssetInfo *alAssetInfo = [[AssetInfo alloc]
                initWithURL:url
                   withDate:date
              withThumbnail:thumbnail];

        //...

      CGImageRelease(thumbnail);
} 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:29:02.423

`UIImage initWithCGImage:`我还没有验证，但如果复制我不会感到惊讶。这不是你的2倍吗？在 Instruments 中，查看活动实例的堆栈跟踪（右侧扩展的详细信息窗格）。它会告诉你是谁创造了它。

# vba - 如果表中的值满足条件，则 Vba 宏从表中复制行

> ID：12177125
> 
> 赞同：4
> 
> 时间：2012-08-29T11:42:11.013
> 
> 标签：vba, loops, excel

我正在尝试制作一个宏：

1.  穿过一张桌子
2.  查看该表 B 列中的值是否具有特定值
3.  如果有，将该行复制到另一个工作表中的范围

**结果类似于过滤表，但我想避免隐藏任何行**

我对vba有点陌生，真的不知道从哪里开始，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T19:44:11.877

这正是您使用高级过滤器所做的事情。如果是一次性的，你甚至不需要宏，它在数据菜单中可用。

```
Sheets("Sheet1").Range("A1:D17").AdvancedFilter Action:=xlFilterCopy, _
    CriteriaRange:=Sheets("Sheet1").Range("G1:G2"), CopyToRange:=Range("A1:D1") _
    , Unique:=False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:00:23.410

试试这样：

```
Sub testIt()
Dim r As Long, endRow as Long, pasteRowIndex As Long

endRow = 10 ' of course it's best to retrieve the last used row number via a function
pasteRowIndex = 1

For r = 1 To endRow 'Loop through sheet1 and search for your criteria

    If Cells(r, Columns("B").Column).Value = "YourCriteria" Then 'Found

            'Copy the current row
            Rows(r).Select 
            Selection.Copy

            'Switch to the sheet where you want to paste it & paste
            Sheets("Sheet2").Select
            Rows(pasteRowIndex).Select
            ActiveSheet.Paste

            'Next time you find a match, it will be pasted in a new row
            pasteRowIndex = pasteRowIndex + 1

           'Switch back to your table & continue to search for your criteria
            Sheets("Sheet1").Select  
    End If
Next r
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T19:18:12.060

选择是缓慢且不必要的。下面的代码会快得多：

```
Sub CopyRowsAcross() 
Dim i As Integer 
Dim ws1 As Worksheet: Set ws1 = ThisWorkbook.Sheets("Sheet1") 
Dim ws2 As Worksheet: Set ws2 = ThisWorkbook.Sheets("Sheet2") 

For i = 2 To ws1.Range("B65536").End(xlUp).Row 
    If ws1.Cells(i, 2) = "Your Critera" Then ws1.Rows(i).Copy ws2.Rows(ws2.Cells(ws2.Rows.Count, 2).End(xlUp).Row + 1) 
Next i 
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:07:13.140

您正在描述一个问题，我将尝试使用 VLOOKUP 函数而不是使用 VBA 来解决该问题。

您应该始终首先考虑非 vba 解决方案。

以下是 VLOOKUP（或德语中的 SVERWEIS，据我所知）的一些应用示例：

[http://www.youtube.com/watch?v=RCLUM0UMLXo](http://www.youtube.com/watch?v=RCLUM0UMLXo)

[http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)

* * *

如果您必须将其作为宏，您可以将 VLOOKUP 用作应用程序功能 - 一种性能较慢的快速解决方案 - 或者您必须自己制作一个类似的功能。

如果必须是后者，则需要有关性能问题的规范的更多详细信息。

您可以将任何范围复制到数组中，循环遍历该数组并检查您的值，然后将该值复制到任何其他范围。这就是我将其作为 vba 函数解决的方法。

这看起来像这样：

```
Public Sub CopyFilter()

  Dim wks As Worksheet
  Dim avarTemp() As Variant
  'go through each worksheet
  For Each wks In ThisWorkbook.Worksheets
        avarTemp = wks.UsedRange
        For i = LBound(avarTemp, 1) To UBound(avarTemp, 1)
          'check in the first column in each row
          If avarTemp(i, LBound(avarTemp, 2)) = "XYZ" Then
            'copy cell
             targetWks.Cells(1, 1) = avarTemp(i, LBound(avarTemp, 2))
          End If
        Next i
  Next wks
End Sub 
```

* * *

好的，现在我有一些不错的东西可以为自己派上用场：

```
Public Function FILTER(ByRef rng As Range, ByRef lngIndex As Long) As Variant
  Dim avarTemp() As Variant
  Dim avarResult() As Variant
  Dim i As Long
  avarTemp = rng

  ReDim avarResult(0)

  For i = LBound(avarTemp, 1) To UBound(avarTemp, 1)
      If avarTemp(i, 1) = "active" Then
        avarResult(UBound(avarResult)) = avarTemp(i, lngIndex)
        'expand our result array
        ReDim Preserve avarResult(UBound(avarResult) + 1)
      End If
  Next i

  FILTER = avarResult
End Function 
```

您可以像这样在工作表中使用它 =FILTER(Tabelle1!A:C;2) 或使用 =INDEX(FILTER(Tabelle1!A:C;2);3) 来指定结果行。我相信有人可以扩展它以将索引功能包含到 FILTER 中，或者知道如何返回一个类似对象的范围——也许我也可以，但今天不行；）

# java - Java EE 5 API 的单一/完整 Maven 依赖项

> ID：12177131
> 
> 赞同：8
> 
> 时间：2012-08-29T11:42:20.737
> 
> 标签：java, maven, jboss5.x, java-ee-5

是否有一个包含整个 Java EE 5 规范 API 的 Maven 依赖项。就像

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
</dependency> 
```

对于 Java EE 6。

我正在使用 JBoss 5 并希望添加单个（或多个）依赖项作为`provided`范围，并确保我拥有 JBoss 中可用的所有内容。

JBoss 5.xx 部署的项目可能存在某种原型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T11:53:01.607

基于 maven central 我认为您需要以下内容：

```
<dependency>
    <groupId>javaee</groupId>
    <artifactId>javaee-api</artifactId>
    <version>5</version>
</dependency> 
```

# c++ - 在 Visual C++ Express 中构建 C 代码

> ID：12177132
> 
> 赞同：0
> 
> 时间：2012-08-29T11:42:22.343
> 
> 标签：c++, c, visual-studio-express

很久以前，我在玩 POS 设备的 C 代码。我可以在 Visual Studio 2008 中开发和构建。然后为了测试，我可以进入 cygwin，编写代码并加载到设备上，或者使用包含的模拟器。在某个地方，虚拟盒子丢失了。

我想重新开始涉足此设备，但在尝试获取代码以在 Visual Studio 2008 C++ Express 中构建时遇到了很糟糕的情况。

我从现有代码创建了一个新项目，将其设置为编译为 C 代码并尝试构建。它抱怨找不到system.h，所以我在tools下的include目录中添加了该目录。

现在它给出了 408 错误。示例如下图：

```
------ Build started: Project: TestHelloWorld, Configuration: Debug Win32 ------
Compiling...
sysutil.c
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(105) : error C2054: expected '(' to follow '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(105) : error C2085: 'disable_interrupt' : not in formal parameter list
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(106) : error C2082: redefinition of formal parameter '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(106) : error C2143: syntax error : missing ';' before 'type'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(106) : error C2085: 'enable_interrupt' : not in formal parameter list
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(107) : error C2085: 'call_app_func' : not in formal parameter list
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(108) : error C2082: redefinition of formal parameter '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(108) : error C2146: syntax error : missing ',' before identifier 'DWORD'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(108) : error C2146: syntax error : missing ',' before identifier 'os_switch_app'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(108) : error C2143: syntax error : missing ';' before '('
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(108) : error C2059: syntax error : ')'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(109) : error C2054: expected '(' to follow '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(109) : error C2085: 'app5_call' : not in formal parameter list
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(110) : error C2082: redefinition of formal parameter '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(110) : error C2146: syntax error : missing ',' before identifier 'DWORD'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(110) : error C2146: syntax error : missing ',' before identifier 'app6_call'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(110) : error C2143: syntax error : missing ';' before '('
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(110) : error C2059: syntax error : ')'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(111) : error C2054: expected '(' to follow '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(111) : error C2085: 'app7_call' : not in formal parameter list
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(112) : error C2082: redefinition of formal parameter '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(112) : error C2146: syntax error : missing ',' before identifier 'DWORD'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(112) : error C2146: syntax error : missing ',' before identifier 'app8_call'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(112) : error C2143: syntax error : missing ';' before '('
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(112) : error C2059: syntax error : ')'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(113) : error C2054: expected '(' to follow '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(113) : error C2085: 'app9_call' : not in formal parameter list
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(114) : error C2082: redefinition of formal parameter '__pcs'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(114) : error C2146: syntax error : missing ',' before identifier 'DWORD'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(114) : error C2146: syntax error : missing ',' before identifier 'app10_call'
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(114) : error C2143: syntax error : missing ';' before '('
c:\cygwin\home\creon_sdk_v2.3\program\lib\system.h(114) : error C2059: syntax error : ')' 
```

有谁知道我怎样才能让它工作。

该代码来自设备 SDK 附带的示例代码。

SDK还附带安装了cygwin，我可以让示例程序没有问题，但是我更像是一个C#开发人员，所以喜欢我的IDE。我以前有这个工作，但不记得我以前是如何工作的。

请，任何建议将不胜感激。

亲切的问候，

尼尔

编辑 - 作为来自 system.h 的请求行 101 - 115

```
#ifndef _SYSTEM_H_
#define _SYSTEM_H_
#include "common.h"

extern __pcs void disable_interrupt();
extern __pcs void enable_interrupt();
extern DWORD call_app_func(void * ptr,DWORD param1,DWORD param2,DWORD param3);
extern __pcs DWORD os_switch_app(BYTE app_id,DWORD param1,DWORD param2,DWORD param3);
extern __pcs DWORD app5_call(DWORD func_no,DWORD param1,DWORD param2, DWORD param3);
extern __pcs DWORD app6_call(DWORD func_no,DWORD param1,DWORD param2, DWORD param3);
extern __pcs DWORD app7_call(DWORD func_no,DWORD param1,DWORD param2, DWORD param3);
extern __pcs DWORD app8_call(DWORD func_no,DWORD param1,DWORD param2, DWORD param3);
extern __pcs DWORD app9_call(DWORD func_no,DWORD param1,DWORD param2, DWORD param3);
extern __pcs DWORD app10_call(DWORD func_no,DWORD param1,DWORD param2, DWORD param3); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:31:56.233

这个特定的编译器错误消息的形式`error C2054: expected '(' to follow '__pcs'`表明编译器正在尝试解码源代码行，就好像 __pcs 是函数名称的开头，并且它期望括号跟在标识符后面，因为它期望函数参数列表。

每当我看到这一点时，都是因为缺少一个定义，它将 __pcs 定义为某个函数行为修饰符。例如，在 Windows 中，您可能有一些东西会指定调用顺序（C 标准与 Pascal），或者另一种将用于 DLL 链接。

我建议您在头文件中进行搜索，寻找 __pcs 的定义，看看它可能在哪里定义。

看起来确实有某种 -D 编译器指令来定义 __pcs 或需要包含的头文件来定义 __pcs。

这是一个[示例头文件，包括](http://www.open64.net/doc/d0/d0d/4_82_80_2gcc_2config_2i386_2host-cygwin_8c.html)可能有用的 Cygwin 应用程序的依赖关系图。

# c# - 获取所有打开的 WPF 窗口

> ID：12177133
> 
> 赞同：10
> 
> 时间：2012-08-29T11:42:27.063
> 
> 标签：c#, wpf, windows

我正在尝试打开所有打开的窗口。我尝试使用，但在循环`System.Windows.Application.Current.Windows`所在的行中出现空指针异常。`foreach`有谁知道出了什么问题？

```
public Window getWindow(String Title)
{
    Window windowObject = null;
    Console.WriteLine("Inside getWindow");
    foreach (Window window in System.Windows.Application.Current.Windows)
    {
        if (window.Title == Title)
        {
            windowObject = window;
        }
    }
    return windowObject;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-06-22T05:54:38.823

这是您在 WPF 中正在运行的应用程序中循环浏览所有打开的窗口的方式：

```
foreach (var Window in App.Current.Windows)
        { 
           // TODO: write what you want here
        } 
```

如果您想知道在窗口窗体中使用应用程序而不是应用程序。再见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T11:48:06.400

要么`Current`要么`Windows`是`null`

[Windows 属性](http://msdn.microsoft.com/en-us/library/system.windows.application.windows.aspx)只能从创建应用程序对象的线程访问，并且这仅在创建应用程序对象后的 WPF 应用程序中有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-08T16:13:00.747

Bare in mind that System.Windows is a namespace, and Application is the actual class that *references* the current application context. What this means is that ´Application.Current.Windows´ only references all windows spawned by the application itself. Try to loop through all windows and print their title.

What happens in your program, is that the if statement will always be false, unless Title is equal to a window spawned by the Application, thus windowObject will remain to be null, and null will be returned by the method.

# css - 支持phonegap中图像的多种分辨率和密度

> ID：12177134
> 
> 赞同：20
> 
> 时间：2012-08-29T11:42:28.700
> 
> 标签：css, html, cordova, responsive-design

我是 phonegap 新手并面临一个问题，我正在制作一个 phonegap 应用程序，它将在不同屏幕尺寸和不同屏幕分辨率的多个平台设备上运行，因此我必须根据屏幕分辨率加载不同分辨率的图像。

这可以通过简单地将不同分辨率的图像放在 hdpi、mdpi 和 ldpi 文件夹中来在 android 中实现，并且它（android）会根据设备的屏幕分辨率自动获取图像。但是如何在phonegap中做到这一点。

我看过很多关于响应式网页设计的文章，他们都说在网页上定位元素，但没有一篇提到如何根据屏幕分辨率放置图像。

谢谢我提前。

编辑过的问题

我已经为html使用了以下代码

```
<div id="header" data-role="header" data-position="fixed">
 <img alt="app_icon" src="pictures/app_logo.png" display="inline" class="align-left" />
 <img alt="brand_icon" src="pictures/company_logo.png" display="inline" class="align-right" /><h1></h1>
</div> 
```

现在我在 assets/www/pictures 文件夹中有图像。这个文件夹包含 2 个相同分辨率的图像 app_logo.png 和 company_logo.png 以及 2 个更高分辨率的图像 app_logo_big.png 和 company_logo_big.png 现在通过媒体查询我将知道屏幕大小并应用样式但据我所知我无法从 css 更改 img src。那么现在我将如何使用这些不同分辨率的图像

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-29T11:56:41.837

然后通过jquery动态改变图像：

***HTML：***

```
<div id="header" data-role="header" data-position="fixed">
   <img id="app-icon" src="pictures/app_logo.png" display="inline" />
</div> 
```

***Javascript：***

```
$(document).ready(function () {
  if(window.devicePixelRatio == 0.75) {
     $("#app-icon").attr('src', '/images/lpdi/app-icon.png');   
  }
  else if(window.devicePixelRatio == 1) {
           $("#app-icon").attr('src', '/images/mdi/app-icon.png');  
  }
  else if(window.devicePixelRatio == 1.5) {
     $("#app-icon").attr('src', '/images/hpdi/app-icon.png');   
  }
  else if(window.devicePixelRatio == 2) {
              $("#app-icon").attr('src', '/images/xpdi/app-icon.png');  
  }
} 
```

通过 CSS：使用不同分辨率的媒体查询：

***HTML：***

```
<div id="header" data-role="header" data-position="fixed">
    <span id="app-icon"></div>
    <span id="brand-icon"></div>
</div> 
```

***CSS：***

```
/* Low density (120), mdpi */
@media screen and (-webkit-device-pixel-ratio: 0.75) {
   #app-icon { background-image:url(pictures/ldpi/app-icon.png); }
   #brand-icon { background-image:url(pictures/ldpi/brand-icon.png); }
}

/* Medium density (160), mdpi */
@media screen and (-webkit-device-pixel-ratio: 1) {
   #app-icon { background-image:url(pictures/mpi/app-icon.png); }
   #brand-icon { background-image:url(pictures/mdpi/brand-icon.png); }
}

/* High density (240), hdpi */
@media screen and (-webkit-device-pixel-ratio: 1.5) {
   #app-icon { background-image:url(pictures/hdpi/app-icon.png); }
   #brand-icon { background-image:url(pictures/hdpi/brand-icon.png); }
}

/* Extra high density (320), xhdpi */
@media screen and (-webkit-device-pixel-ratio: 2) {
   #app-icon { background-image:url(pictures/xdpi/app-icon.png); }
   #brand-icon { background-image:url(pictures/xdpi/brand-icon.png); }
} 
```

如果要过滤，

方向 -`and (orientation: landscape)`

设备宽度`and (min-device-width : 480px) and (max-device-width : 854px)`

例子：

```
@media screen and (-webkit-device-pixel-ratio: 1.5) and (min-device-width : 640px) and (max-device-width : 960px) and (orientation: landscape) {
   /* Your style here */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:49:41.587

创建对更多尺寸的支持是一个问题，但您可以使用CSS 中的[@media 查询来解决它。](http://css-tricks.com/css-media-queries/)检查此示例代码：

```
/* iPads (landscape) ----------- */
@media only screen 
   and (min-device-width : 768px) 
   and (max-device-width : 1024px) 
   and (orientation : landscape) {
       /* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
   and (min-device-width : 768px) 
   and (max-device-width : 1024px) 
   and (orientation : portrait) {
       /* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
   and (min-width : 1224px) {
       /* Styles */
}

/* Large screens ----------- */
@media only screen 
   and (min-width : 1824px) {
       /* Styles */
} 
```

使用此代码，您可以添加对所有设备的支持。[检查此链接以获取更多浏览器的更多代码](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

***您可以使用的功能：***

*   宽度和高度：`(min-device-width : 768px) and (max-device-width : 1024px)`
*   方向：`(orientation: landscape)`或`(orientation: portrait)`
*   设备像素比：`(-webkit-device-pixel-ratio: 1.5)`

**编辑**：

*HTML：*

```
<div id="header" data-role="header" data-position="fixed">
 <span id="app_icon" alt="app_icon" src="pictures/app_logo.png" display="inline" class="align-left"></span>
 <span id="brand_icon" alt="brand_icon" src="pictures/company_logo.png" display="inline" class="align-right"></span><h1></h1>
</div> 
```

更改`img`并`span`添加 ID。

*CSS：*

```
@media screen and (-webkit-device-pixel-ratio: 0.75) {
  #app_icon {
    width: 100px; /* Example size */
    height: 100px; /* Example size */
    background: url(pictures/app_logo_small.png);
  }
}

@media screen and (-webkit-device-pixel-ratio: 1) {
  #app_icon {
    width: 150px; /* Example size */
    height: 150px; /* Example size */
    background: url(pictures/app_logo_medium.png);
  }
}

@media screen and (-webkit-device-pixel-ratio: 1.5) {
  #app_icon {
    width: 200px; /* Example size */
    height: 200px; /* Example size */
    background: url(pictures/app_logo_large.png);
  }
}

@media screen and (-webkit-device-pixel-ratio: 2) {
  #app_icon {
    width: 300px; /* Example size */
    height: 300px; /* Example size */
    background: url(pictures/app_logo_xlarge.png);
  }
} 
```

通过此示例，您可以更改代码并修复它。希望这有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-27T08:33:39.493

您也可以使用[车把](http://handlebarsjs.com/)助手来执行此操作，它的代码密集度较低，在我看来是推荐的方法：

```
if (screen.width <= 480) {
    imgFolder = 'img/low/';
}
else {
    imgFolder = 'img/high/';
}

Handlebars.registerHelper('imgFolder', function () {
    return imgFolder
}); 
```

while`img/low/`并`img/high`包含具有相同名称的不同分辨率的图像。

然后在您的模板中：

```
<img src="{{imgFolder}}yourImage.png" /> 
```

当然，您必须根据应用所针对的设备设置屏幕尺寸值。

**附录：** 如果您在科尔多瓦浏览器中没有 1:1 像素映射（不推荐 - 您的图像将具有模糊/不清晰的外观）`screen.width`将与浏览器宽度（window.innerWidth）不同，您必须使用`$(window).width()`或`window.innerWidth`。您也许可以使用媒体查询来修复错误的映射。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-03T23:30:39.057

我发现我必须开始使用这些媒体查询添加对 0.5、1、1.3、1.5、2 和 3 像素比率的支持。

注意我使用的是 -webkit-min-device-pixel-ratio 而不是 -webkit-device-pixel-ratio。我发现在我的一个测试设备（Galaxy Tab 3 - 8"）上，像素比为 1.3，并且没有选择我在 phonegap 应用程序中设置的任何特定样式。

```
@media screen and (-webkit-min-device-pixel-ratio: 0.5) {
    #app_icon {
        width:64px;
        height:64px;
        background: url('../images/bigstart.png') no-repeat center bottom;
        background-size: 64px 64px;
    }   
}
@media screen and (-webkit-min-device-pixel-ratio: 1) {
    #app_icon {
        width:64px;
        height:64px;
        background: url('../images/bigstart.png') no-repeat center bottom;
        background-size: 64px 64px;
    }   
}
}
@media screen and (-webkit-min-device-pixel-ratio: 1.3) {
    #app_icon {
        width:64px;
        height:64px;
        background: url('../images/bigstart@2x.png') no-repeat center bottom;
        background-size: 64px 64px;
    }   
}
@media screen and (-webkit-min-device-pixel-ratio: 1.5) {
    #app_icon {
        width:64px;
        height:64px;
        background: url('../images/bigstart@2x.png') no-repeat center bottom;
        background-size: 64px 64px;
    }   
}
@media screen and (-webkit-min-device-pixel-ratio: 2) {
    #app_icon {
        width:64px;
        height:64px;
        background: url('../images/bigstart@2x.png') no-repeat center bottom;
        background-size: 64px 64px;
    }   
}
@media screen and (-webkit-min-device-pixel-ratio: 3) {
    #app_icon {
        width:64px;
        height:64px;
        background: url('../images/bigstart@3x.png') no-repeat center bottom;
        background-size: 64px 64px;
    }   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T17:38:22.260

我认为您必须将报告的屏幕尺寸除以屏幕密度才能获得媒体查询的宽度和高度尺寸。

# qml - QML：无法打开：file:///images/1.png

> ID：12177142
> 
> 赞同：1
> 
> 时间：2012-08-29T11:42:55.753
> 
> 标签：qml

我有简单的 ListModel 应该包含 png 图像。我在资源文件中列出了 png 文件。尝试在模拟器中运行时出现“无法打开：file:///images/1.png”。我正在使用 QT Creator。

目录：

```
main.cpp
test.qrc
qml/test/main.qml
images/1.png
images/2.png
images/3.png 
```

测试.qrc：

```
<RCC>
    <qresource prefix="/">
        <file>images/0.png</file>
        <file>images/1.png</file>
        <file>images/2.png</file>
        <file>images/3.png</file>
    </qresource>
</RCC> 
```

main.qml：

```
ListModel {
    ListElement { icon: ":/images/1.png"}
    ListElement { icon: ":/images/2.png"}
    ListElement { icon: ":/images/3.png"}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:15:24.623

我找到了解决方案。以下语句均适用于模拟器（GNU/Linux）和目标系统（诺基亚 N9）：

```
 ListElement { icon: "qrc:images/1.png"}
   ListElement { icon: "qrc:/images/1.png"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:43:25.587

不带“/”试试

```
ListModel {
    ListElement { icon: ":images/1.png"}
    ListElement { icon: ":images/2.png"}
    ListElement { icon: ":images/3.png"}
} 
```

# java - Eclipse 不导入 Android 项目

> ID：12177143
> 
> 赞同：1
> 
> 时间：2012-08-29T11:42:57.883
> 
> 标签：java, android, eclipse, windows-7

我正在尝试导入我在其他机器上制作的项目。因此，我将工作区文件夹从其他机器复制到当前 PC 并替换了安装新 eclipse 时创建的默认工作区文件夹。替换工作区后，当我尝试从工作区导入项目时，出现错误“项目描述无效”。

*   我应该怎么做才能在eclipse中导入我的所有项目？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T11:47:51.283

我发现当我尝试将现有项目导入我的工作区时，它只有在我选择`General->Existing Projects into Workspace`. 如果我选择`Android->Existing Android Code into workspace`，那么我会遇到无法正确导入的问题。

也许您面临着类似的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:51:36.527

尝试以下操作：

```
 File >> New >> Android Project 
```

然后选择：

```
 Create project from existing source 
```

并把你的项目路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:46:09.307

好的，试试这个，压缩你的项目文件夹。File->Import->General->Existing Projects into Workspace->Select archive file or [http://code.google.com/p/android/issues/detail?id=8431](http://code.google.com/p/android/issues/detail?id=8431) [如何将现有的Android项目导入Eclipse？](https://stackoverflow.com/questions/2231474/how-to-import-existing-android-project-into-eclipse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T03:08:11.180

File->Import->General->Existing Projects into workspace 这很完美。试试看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-15T01:01:52.993

对于任何人，如果上述方法对您不起作用，您可能需要检查 .classpath 和 .project 文件是否存在。我有类似的经历，我试图从我的 svn 工作副本中导入我的项目文件。但是，它显示为灰色的不可选择项目。从本地备份复制 .classpath 和 .project 文件使其工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-19T08:52:37.437

我面临同样的问题。

如果工作空间中已存在项目，则 Eclips 无法导入项目。仔细检查您是否已经有一个同名的项目。

# animation - 背景 css 动画在 firefox 上不起作用

> ID：12177145
> 
> 赞同：0
> 
> 时间：2012-08-29T11:43:00.243
> 
> 标签：animation, css

我有一些 CSS 动画按钮。

```
.bottom_panel ul li.bottom_panel_button_04 {
    background: url('../img/bottom_panel_icons/ap_bottom_panel_back_button_01_131.png') center center no-repeat;
    -webkit-animation: myfirst 2s linear infinite;
    -moz-animation: myfirst 2s linear infinite;
    -ms-animation: myfirst 2s linear infinite;
    -o-animation: myfirst 2s linear infinite;
    animation: myfirst 2s linear infinite;
}

@-moz-keyframes myfirst {
    0% {background: url('../img/bottom_panel_icons/ap_bottom_panel_back_button_01_131.png') center center no-repeat;
    }
    50% {background: url('../img/bottom_panel_icons/ap_bottom_panel_back_button_01_131_on.png') center center no-repeat;
    }
    100% {background: url('../img/bottom_panel_icons/ap_bottom_panel_back_button_01_131.png') center center no-repeat;
    }
} 
```

在 Chrome 上一切都很好，但 Firefox 无法触发此动画……出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T12:54:03.497

Replace `@-moz-keyframes`to `@keyframes` and add `@-webkit-keyframes` for Saffari and Chrome (and all Chromium-based browsers)
You can see an example [here](http://jsfiddle.net/v9umgfeu/).
And [here](http://jsfiddle.net/4hqpd100/) is the link to your (working) example.

# javascript - 从 jquery 对话框恢复原始数据，脚本不起作用

> ID：12177148
> 
> 赞同：0
> 
> 时间：2012-08-29T11:43:09.083
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-dialog

我正在 jQuery 中创建一个对话框，并使用以下建议清除点击取消按钮时的数据。

```
// store the old content
var myOldContent = $("#cancelbutton").html();

// change content
$("#cancelbutton").html(someNewContent);

// and change it back
$("#cancelbutton").html(myOldContent); 
```

问题是这种方法会清除数据，但我使用的两个输入在清除信息后不起作用。

我有一个日历输入（调用外部 .js）和一个 colorPicker，也在外部 .js 中初始化。

如何在不丢失这两个组件功能的情况下清除数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:18:29.093

不要`.html()`只使用 html 本身而不是具有事件侦听器和数据的实际 DOM 对象。

我的建议是做这样的事情，尽管根据你的布局可以有很多不同的方式：

```
// store the old content
var myOldContent = $("#cancelbutton").clone(true);  // 'true' so events are copied

// change content
$("#cancelbutton").html(someNewContent);

// bind new events for the newContent here

// and change it back
$("#cancelbutton").replaceWith(myOldContent); 
```

# objective-c - 在 UserDefaults 中存储自定义数据是一种好方法吗？

> ID：12177155
> 
> 赞同：0
> 
> 时间：2012-08-29T11:43:34.593
> 
> 标签：objective-c, ios, caching, nsuserdefaults

我需要从表中存储一些对象。它不会超过 100 个对象。将它像数组一样存储在 NSUserDefaults 中是一种好方法吗？或者有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:51:52.077

尽管您可以存储它，但您可能不应该`NSUserDefaults`使用它。`[[NSUserDefaults standardUserDefaults] arrayForKey:@"key"];`默认值旨在存储非常少量的数据，例如用户偏好（因此名称）。如果您希望存储比这更多的数据，那么您可能需要查看`.plists`、`NSDocumentDirectory`、`Core-Data`或`SQLite`数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:51:56.383

`NSArray`更好的方法是使用s`writeToFile:atomically:`或将其序列化为磁盘上的二进制 blob `writeToURL:atomically:`。`NSUserDefaults`不存储为二进制文件，因此在加载时需要额外的解析时间，并且需要额外的时间来写入磁盘。`NSUserDefaults`也不是为保存大量数据而设计的，而是为一小部分设置数据而设计的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:05:19.817

将所有自定义数据存储在 NSDictionary 或 NSArray 中。

现在在文档目录中保存包含自定义数据的字典或数组，点击 [此](http://mobiledevelopertips.com/data-file-management/read-and-write-array-dictionary-and-other-collections-to-files.html)链接

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-29T11:54:29.303

否 在 NSUserDefaults 上存储数据不好，因为它可能导致严重的黑客攻击。

取而代之的是，您可以使用 **AppDelegate**来全局存储数据。

# php - PHPPowerpoint 在网页上动态生成幻灯片

> ID：12177157
> 
> 赞同：1
> 
> 时间：2012-08-29T11:43:37.483
> 
> 标签：php, phppowerpoint

我想用来`PHPPowerpoint`在网页上动态生成幻灯片……意思是，用户可以上传任何 PPT 文件。我必须显示它的幻灯片。

请指导我如何`PHPPowerpoint`在 php 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:22:52.553

我将提供一个替代解决方案。

当用户上传一个 ppt 时，您可以创建一个该 ppt 名称的文件夹并提取每张幻灯片的图像并将它们放在该文件夹中。当您想查看它们时，只需编写一个简单的 javascript/jquery 幻灯片来显示它们。

要将 ppt 幻灯片转换为图像，您可以使用[com class](http://php.net/manual/en/class.com.php)。这是一个示例代码

```
function extractPPt($exportFolder,$ppt_file){
$app = new COM("PowerPoint.application") or die("Unable to instantiate PowerPoint");
            $app->Visible = true;
            $app->Presentations->Open(realpath($ppt_file)) or die ("Could not open presentation");
            $app->Presentations[1]->SaveAs(realpath($exportFolder),17);
           // $app->Presentations[1]->Close();
            $app->Quit();
            $app = null;               } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T21:31:19.073

`PHPPowerPoint`不会帮助您实现目标。`PHPPowerPoint`是一个允许您*创建*幻灯片的库，即使那样，它也只创建 PPTX 文件（即 OpenXML 格式），而不是 PPT 文件（专有的 Microsoft 格式）。

我花了很多时间研究如何实现您正在寻找的东西（基本上是 slideshare.net 的克隆），但还没有找到实用的解决方案。我在调查中遇到的最佳低成本建议是在无头模式下使用 OpenOffice，并将传入的 PPT 文件转换为其他格式，以便在页面上更轻松地呈现。我的猜测是，这充其量是很麻烦的，甚至可能存在一些技术障碍来实现这项工作。

# domain-driven-design - 从实体框架中提取类对象

> ID：12177158
> 
> 赞同：1
> 
> 时间：2012-08-29T11:43:37.200
> 
> 标签：domain-driven-design, entity-framework-5

我刚刚开始研究 Microsoft 的实体框架 (EF)，以替换我们现有的 Linq2Sql 数据访问库。

在关注一些示例项目时，我遇到了“添加代码生成项”（设计器界面上的上下文菜单），特别是“EF 5.x DbContext Generator”模板。

该模板为模型生成了一些不错的简单 (POCO) 类对象。

在我的整体结构中，我想将这些类提取/移动到不同的项目/程序集中，以便我可以从通用存储库中引用它们，即我想将应用程序的数据访问层与 EF 实体数据模型分离。

这是可能的，还是我需要为每个类对象手动创建一个映射（例如.ToDomainModel()、.FromDomainModel()）。

如果这是一个愚蠢的问题，我深表歉意——在我的辩护中，我是 EF 的新手，并且仍在掌握数据驱动域的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:44:40.827

这是可能的，但你会失去部分自动魔法。自动生成的项目是一个 T4 模板。如果你打开它，你会在文件的开始相对路径的某个地方找到`.edmx`。如果您移动模板，您只需要相应地更新路径以指向`.edmx`您要用于生成的文件。

缺点是在`.edmx`保存文件时将模板移动到其他地方会破坏自动类重新生成（但我没有搜索解决方案，所以也许可以让它工作）。因此，您必须在每次保存对 EDMX 文件的更改后手动运行自定义工具（.tt 文件上下文菜单中的项目）。

# ruby-on-rails - 如何自动为产品分配最新的地税？

> ID：12177160
> 
> 赞同：0
> 
> 时间：2012-08-29T11:43:44.563
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有 3 个模型；产品、税收和地点。每当创建产品时，如果有税，我想分配该位置的最新税。

```
class Location < ActiveRecord::Base
  belongs_to :user
  has_many :products
  has_many :taxes
end

class Tax < ActiveRecord::Base
  attr_accessible :date # I use this to get the latest tax
  belongs_to :location
  has_many :products
end

class Product < ActiveRecord::Base
  attr_accessible :tax_id
  belongs_to :location
  belongs_to :tax
end 
```

现在我在我的`Product`模型中尝试了这个：

```
after_create :assign_latest_location_tax

private

def assign_latest_location_tax
  if self.location.tax.present?
    self.tax_id = self.location.tax.order("date DESC").first.id
  end
end 
```

但这给了我错误：

```
NoMethodError in ProductsController#create

undefined method `tax' for #<Location:0x4669bf0> 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:50:40.053

位置 has_many 税，因此它公开访问其税的方法是`taxes`，而不是`tax`。

以下应该有效：

```
self.tax_id = self.location.taxes.order("date DESC").first.id 
```

如果您使用`after_create`回调，则必须在结束时再次调用 save 。为避免这种情况，您可以使用`before_create`回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:04:14.890

此代码应该可以工作：

```
def assign_latest_location_tax
  if self.location.taxes.count > 0
    self.tax_id = self.location.taxes.order("date DESC").first.id
  end
end 
```

# asp.net-mvc - Asp.net mvc 和 jquery 移动身份验证

> ID：12177166
> 
> 赞同：0
> 
> 时间：2012-08-29T11:44:21.193
> 
> 标签：asp.net-mvc, jquery-mobile

我正在使用 MVC 4 开发一个移动应用程序。我正在保护它。该应用程序有 2 个页面（“主页”和“客户”）

当应用程序启动时，它要求我输入用户名和密码，这是它的 URL `http://localhost:59170/Account/Login?ReturnUrl=%2f`。

我登录并转到主页。这是我在 IE 上可以看到的网址`http://localhost:59170/Account/Login?ReturnUrl=%2f`。

从这个页面我去客户页面。这是我在 IE 上可以看到的 url `http://localhost:59170/Account/Login?ReturnUrl=%2f#/Clientes`。目前一切正常（虽然 url 像陌生人一样）。

当我按下 IE 上的后退按钮时会出现问题。它必须转到主页，但我会转到`http://localhost:59170/Account/Login?ReturnUrl=%2f#/Account/Login?ReturnUrl=%2f`它要求我登录的位置。

什么可能导致这种行为，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:48:24.603

每次您请求需要身份验证的页面时，.NET 都会将您重定向到您指定的登录页面并将请求的 URL 附加到 URL。这样，一旦用户成功登录，它将自动将他们重定向到他们请求的页面。例如，在您的第一个 URL 中，返回 URL 编码表示 / 即您网站的根 / 主页

它将继续重定向您，直到您通过身份验证。如果您不想在主页上进行身份验证，则只需使用 [Authorize] 注释您的帐户控制器，而不是您的家庭控制器

# sockets - 通过 Node.js 上的套接字进行 Redis 连接

> ID：12177168
> 
> 赞同：4
> 
> 时间：2012-08-29T11:44:24.103
> 
> 标签：sockets, node.js, redis

由于共享主机，我在目标主机上的 redis 服务器不是在端口上运行，而是在一个非常特定的套接字上运行，该套接字可以通过套接字文件连接，只有我的用户可以访问。

但是，我还没有找到如何通过我想要使用的包`node_redis`和包中的套接字指定连接。`connect-redis`

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T13:25:42.077

**更新：**我下面的答案并不正确。事实证明，我在下面提到的问题中的解决方案实际上仍然有效。这更像是一个巧合，IMO，但你可以做这样的事情，它应该可以工作：

```
var redis = require('redis'),
    client = redis.createClient('/tmp/redis.sock'); 
```

正如您从下面的代码片段中看到的那样，这将被传递给`net.createConnection`将连接到 unix 套接字`/tmp/redis.sock`。

**老答案：**

关于这个[node_redis/issues/204](https://github.com/mranney/node_redis/issues/204)有一个已解决的问题。似乎，认为底层的 node.js [net.createConnection](http://nodejs.org/api/net.html#net_net_createconnection_options_connectionlistener) API 已经改变了。看起来这将是 node_redis`exports.createClient`函数中的一个非常小的修复：

```
exports.createClient = function (port_arg, host_arg, options) {
    var port = port_arg || default_port,
        host = host_arg || default_host,
        redis_client, net_client;

    net_client = net.createConnection(port, host);

    redis_client = new RedisClient(net_client, options);

    redis_client.port = port;
    redis_client.host = host;

    return redis_client;
}; 
```

如果使用一个参数调用它，似乎`net.createConnection`会尝试连接到一个 unix 套接字，这看起来像一条路径。我建议您实施修复并发送拉取请求，因为这似乎值得支持。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-29T06:44:30.357

## 不再有[连接字符串](https://github.com/mranney/node_redis/blob/master/index.js#L1216)...

```
var client = redis.createClient(9000); // Open a port on localhost
var client = redis.createClient('/tmp/redis.sock'); // Open a unix socket
var client = redis.createClient(9000, 'example.com'); 
```

这和选项都记录在[README](https://github.com/mranney/node_redis#rediscreateclient)中。

# drupal - 如何通过 theme-setting.php 以 drupal 形式正确添加 FILE 字段？

> ID：12177175
> 
> 赞同：2
> 
> 时间：2012-08-29T11:45:09.230
> 
> 标签：drupal, drupal-themes

我正在构建一个能够上传自定义背景图像的主题，但现在我陷入了困境。

如何通过theme-setting.php以drupal形式正确添加FILE字段，之后如何在我的模板文件中获取该文件的公共URL？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T03:51:07.273

在您的 theme_form_system_theme_settings_alter 钩子中，您需要添加以下表单元素：

```
 $form['theme_settings']['background_file'] = array(
    '#type'     => 'managed_file',
    '#title'    => t('Background'),
    '#required' => FALSE,
    '#upload_location' => file_default_scheme() . '://theme/backgrounds/',
    '#default_value' => theme_get_setting('background_file'), 
    '#upload_validators' => array(
      'file_validate_extensions' => array('gif png jpg jpeg'),
    ),
  ); 
```

这会将文件 ID 保存到您的主题设置变量“background_file”，请注意我将上传位置设置为主题/背景，这将在您的文件夹中。

最后，您将使用 file_create_url 获得文件的完整 URL：

```
$fid = theme_get_setting('background_file');
$image_url = file_create_url(file_load($fid)->uri); 
```

编辑：

在您的 template.php 中，您可以在 theme_preprocess_page 挂钩中添加变量，以便所有 tpl 都可以访问它，方法如下：

```
function theme_preprocess_page(&$variables, $hook) {
    $fid = theme_get_setting('background_file');
    $variables['background_url'] = file_create_url(file_load($fid)->uri);
} 
```

希望这可以帮助！:D

# c# - 抛出异常时捕获所有线程的堆栈跟踪

> ID：12177179
> 
> 赞同：4
> 
> 时间：2012-08-29T11:45:22.363
> 
> 标签：c#, .net, multithreading, wcf, exception

我正在使用由 WCF 服务支持的 ASP.NET 站点，该服务随机抛出异常，最终在站点上捕获，并在那里创建 YSOD。我怀疑这是由于后端的线程问题造成的，并希望追踪该问题。

是否有一种简单的方法可以在 WCF 端捕获未捕获的异常，同时捕获所有正在运行的线程的堆栈跟踪，并使用附加信息重新抛出初始异常？

这个多线程跟踪似乎是框架附带的东西，或者其他人之前可能已经想到的东西，但我似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:33:55.797

为了捕获其他线程的堆栈跟踪，您必须在调试器中并在抛出异常时查看它们的堆栈（例如，使用并行堆栈窗口），但这不会让您将它们的跟踪发送回来。

您可以检测您的代码（即在战略位置使用它）来记录其他线程可以访问的堆栈跟踪，但这会带来令人讨厌的性能、维护和优雅问题。更不用说它只会近似其他线程正在做的事情，因为它们可以在抛出异常后独立前进。

我能想到的唯一其他方法（这是推测）是以某种方式中止其他线程，捕获中止，保存堆栈跟踪，然后重置中止。但这很可能是一个不确定的混乱。中止不是推荐的做法。

您可能最好使用呼叫分析器、大量日志记录并尽可能缩小范围以找到根本原因。

# javascript - 如何将 src 的值放入输入然后将其显示在另一页上？

> ID：12177180
> 
> 赞同：0
> 
> 时间：2012-08-29T11:45:27.070
> 
> 标签：javascript, jquery, forms, post, input

我想将 的值`i.src`放入输入中，然后使用 post 命令在另一页上显示生成的图像

```
$('#create').bind('click', function(e) {
    var datapair = $sigdiv.jSignature("getData", "image");
    var i = new Image();
    i.src = "data:" + datapair[0] + "," + datapair[1];
    $('#displayarea2').empty();
    $(i).appendTo($("#displayarea2")); // append the image (SVG) to DOM.
    document.getElemenById('sig').value = i.src;  //store the value of i.src to input
    alert("done1");
}); 
```

然后将值存储在这里

```
 <input type="image" id="sig" name="sig" /> 
```

然后使用它在另一个页面上显示它

```
 <?php echo $_POST["sig"]; ?> 
```

我这样做对吗？

这是样本

示例 [teleexperience.net76.net/sample.html](http://telexperience.net76.net/sample.html)

生成的图像必须存储在输入中，然后使用 $_POST 显示在另一个页面上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:59:59.867

不确定我是否完全理解您要执行的操作，但您可以为输入信号分配您想要的任何值。

```
$("#sig").val(youvaluegoeshere); 
```

然后，当提交表单时，您可以访问该值并显示。不过，我不确定我是否理解您的其余代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:01:51.427

```
jQuery(function(){
    jQuery('#create').bind('click', function(e) {
        var datapair = $sigdiv.jSignature("getData", "image");
        var img = jQuery("<img src='"+"data:" + datapair[0] + "," + datapair[1];+"' />");
        jQuery("input#sig").val(jQuery(img).attr("src"));
    })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:19:47.183

你应该改变：

```
 <input type="image" id="sig" name="sig" /> 
```

到

```
 <input type="hidden" id="sig" name="sig" /> 
```

请注意，我将类型从**image**更改为**hidden**。一些浏览器不发送**图像类型**输入控件的值。

保持其他一切原样，它应该可以正常工作。

# javascript - 在 Chrome 的调试器中输入不是对象

> ID：12177182
> 
> 赞同：0
> 
> 时间：2012-08-29T11:45:32.537
> 
> 标签：javascript, google-chrome

我已经编写了一个独立的 javascript 概念证明，我现在正试图将其集成到一个更大的应用程序中。我在新环境中的某个对象上找不到方法时遇到了一些问题，即使我以相同的方式实例化它。

当我在 Chrome 的调试器中查看我在两个应用程序中创建的对象时，可以工作的对象被标记为“对象”类型，而不能工作的对象被标记为“a”类型（不管是什么！）是唯一的区别，但是任何人都可以建议“a”是什么以及可能导致这种情况发生的原因吗？

# html - HTML 时间和日期类型

> ID：12177193
> 
> 赞同：0
> 
> 时间：2012-08-29T11:46:32.043
> 
> 标签：html

我正在使用`type="time"`我的输入。有没有办法设置分钟的步骤（00,15,30,45）。

我也有一个输入`type="date"`。有没有办法限制选择日期，使用不能选择一些未来的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:12:35.053

原则上，通过 HTML5 草稿，您可以使用该`step`属性来设置步长。对于`input type=time`，它的值以秒为单位进行解释，因此在 15 分钟内，您将使用

```
<input type=time step=900> 
```

目前 Opera 和 Safari 支持，但 Chrome 不支持（奇怪，因为一些早期版本支持，至少根据我的书（字面意思））。

`max`同样，您可以使用该属性设置日期的上限。然而，HTML5 中没有“现在”的概念。您需要在服务器端生成页面时确定当前日期，或者使用 JavaScript 将其设置在客户端（这涉及“当前”的两种不同解释）。例子：

```
<input type=date max="2012-08-29"> 
```

适用于 Chrome、Opera、Safari。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:41:31.517

尝试使用 input 的 min 和 max 属性进行限制日期选择（目前仅在 opera 和 chrome 中支持）。

我不确定时间选择的步骤。

看看 jQuery [datepicker](http://jqueryui.com/demos/datepicker/) 和[timepicker](http://milesich.com/timepicker/)。它适用于大多数浏览器，应该可以满足您的需求。

# wpf - 使用 RadialGradientBrush 类型效果的 WPF 绘图？

> ID：12177194
> 
> 赞同：0
> 
> 时间：2012-08-29T11:46:32.193
> 
> 标签：wpf, radial-gradients

使用 RadialGradientBrush 很简单，它允许中心颜色合并到外部颜色中。这可以很好地用作填充矩形或边框内部的画笔。我想实现像使用笔一样应用该画笔并将其应用为 Border.BorderBrush 的效果。所以边界的中心会变暗，远离边界它会消失。

另一种描述它的方式是您在 Windows Vista 或 Windows 7 上的顶级窗口周围看到的阴影。靠近窗口边框的阴影是黑暗的，离窗口越远，阴影消失得越多。好吧，我想以类似的方式绘制边框。

目前我找不到任何方法来实现这一点，使用 RadialGradientBrush 或 LinearGradientBrush。一定有可能吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T17:50:55.543

你可以达到这样的效果

![在此处输入图像描述](../Images/c8f22bb8317c5e07adc84c06ce5a2ab0.png)

通过将您的内容放置在 3x3 网格的中心（单元格 1,1），如下所示：

```
<Grid>
    <Grid.Resources>
        <Color x:Key="InnerColor">#FF000000</Color>
        <Color x:Key="OuterColor">#FFFFFFFF</Color>
    </Grid.Resources>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="20"/>
        <ColumnDefinition />
        <ColumnDefinition Width="20"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="20"/>
        <RowDefinition/>
        <RowDefinition Height="20"/>
    </Grid.RowDefinitions>
    <Rectangle Grid.Column="1" Grid.Row="0">
        <Rectangle.Fill>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Offset="0" Color="{StaticResource OuterColor}"/>
                <GradientStop Offset="1" Color="{StaticResource InnerColor}"/>
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Rectangle Grid.Column="1" Grid.Row="2">
        <Rectangle.Fill>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Offset="0" Color="{StaticResource InnerColor}"/>
                <GradientStop Offset="1" Color="{StaticResource OuterColor}"/>
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Rectangle Grid.Column="0" Grid.Row="1">
        <Rectangle.Fill>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                <GradientStop Offset="0" Color="{StaticResource OuterColor}"/>
                <GradientStop Offset="1" Color="{StaticResource InnerColor}"/>
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Rectangle Grid.Column="2" Grid.Row="1">
        <Rectangle.Fill>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                <GradientStop Offset="0" Color="{StaticResource InnerColor}"/>
                <GradientStop Offset="1" Color="{StaticResource OuterColor}"/>
            </LinearGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Rectangle Grid.Column="0" Grid.Row="0">
        <Rectangle.Fill>
            <RadialGradientBrush GradientOrigin="1,1" Center="1,1" RadiusX="1" RadiusY="1">
                <GradientStop Offset="0" Color="{StaticResource InnerColor}"/>
                <GradientStop Offset="1" Color="{StaticResource OuterColor}"/>
            </RadialGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Rectangle Grid.Column="2" Grid.Row="0">
        <Rectangle.Fill>
            <RadialGradientBrush GradientOrigin="0,1" Center="0,1" RadiusX="1" RadiusY="1">
                <GradientStop Offset="0" Color="{StaticResource InnerColor}"/>
                <GradientStop Offset="1" Color="{StaticResource OuterColor}"/>
            </RadialGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Rectangle Grid.Column="0" Grid.Row="2">
        <Rectangle.Fill>
            <RadialGradientBrush GradientOrigin="1,0" Center="1,0" RadiusX="1" RadiusY="1">
                <GradientStop Offset="0" Color="{StaticResource InnerColor}"/>
                <GradientStop Offset="1" Color="{StaticResource OuterColor}"/>
            </RadialGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
    <Rectangle Grid.Column="2" Grid.Row="2">
        <Rectangle.Fill>
            <RadialGradientBrush GradientOrigin="0,0" Center="0,0" RadiusX="1" RadiusY="1">
                <GradientStop Offset="0" Color="{StaticResource InnerColor}"/>
                <GradientStop Offset="1" Color="{StaticResource OuterColor}"/>
            </RadialGradientBrush>
        </Rectangle.Fill>
    </Rectangle>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:30:26.643

您可以尝试使用 a`Grid`或 a`DockPanel`然后使用`Line`or`Rectangle`创建 4 个填充的不同区域。但是，在这种情况下，您不能使用 RadialGradient，因为它会拉伸并且看起来不正确。因此，您可以创建 4 个不同的 LinearGradient，它们被设置为在您想要的 4 个不同方向上渐变......但是，我认为这在角落里看起来也不正确......因为它们需要被斜接。 ..这不会那样做。

所以...

...您可以尝试使用这个`GradientPath`知道如何沿路径绘制渐变的控件。

*   [http://www.charlespetzold.com/blog/2009/02/Graphical-Paths-with-Gradient-Colors.html](http://www.charlespetzold.com/blog/2009/02/Graphical-Paths-with-Gradient-Colors.html)

注意，我没能花太多时间在它上面，所以我还没有弄清楚如何正确使用它——矩形的开始和结束盖不太正确。

注意使用 PathGeometry 而不是 RectangleGeometry 仍然有同样的问题。

一种可能的解决方法是使用 GradientPath 创建 2 个矩形，然后通过对角线切割它们（使用合适的剪辑定义），以便它们每个都贡献矩形的大部分（即没有开始/结束伪影）......并覆盖它们在一个网格中。

或者您可以深入研究 GradientPath 代码。

如果您想采用这种方法，它应该会给您一些想法……并在闲暇时玩耍/实验，直到达到您想要的为止。

```
<gpl:GradientPath Name="gradientPath2"
                  StrokeThickness="30"
                  >
    <gpl:GradientPath.Data>
        <RectangleGeometry Rect="0,0,200,200" />
    </gpl:GradientPath.Data>
    <gpl:GradientPath.GradientStops>
        <GradientStop Offset="0" Color="Blue" />
        <GradientStop Offset="0.5" Color="Red" />
        <GradientStop Offset="1" Color="Green" />
    </gpl:GradientPath.GradientStops>
</gpl:GradientPath> 
```

![在此处输入图像描述](../Images/7dc912bbfa78a85d079ece72c989ebcb.png)

# asp.net-mvc-3 - 如何将数据绑定到MVC3中highcharts中的折线图？

> ID：12177198
> 
> 赞同：1
> 
> 时间：2012-08-29T11:46:46.103
> 
> 标签：asp.net-mvc-3, highcharts, linechart

大家好，我已经存储了这样的输出数据

**var 记录的错误**

```
 projectName ProjectYear ProjectMonth    Week1   Week2   Week3   Week4 Week5
    Ecommerce       2012           8          0      1       4       3    0 
```

**var 记录的错误**

```
 projectName ProjectYear ProjectMonth    Week1   Week2   Week3   Week4 Week5 
    Ecommerce       2012           8          2      2       8       3    0 
```

我在我的 MVC 应用程序中调用这个存储过程并将这个数据作为 Json 像这样返回

```
 public ActionResult Index()
    {
        return View();
    }
    public JsonResult CreatedBugs()
    {
        int year;
        int month;
        int projectid;
        year = 2012;
        month = 8;
        projectid = 16;       
        var loggedbugs = db.ExecuteStoreQuery<LoggedBugs>("LoggedBugs @Year,@Month,@ProjectID", new SqlParameter("@Year", year), new SqlParameter("@Month", month), new SqlParameter("@ProjectID", projectid)).ToList();
       var ClosedBugs = db.ExecuteStoreQuery<LoggedBugs>("ClosedBugs @Year,@Month,@ProjectID", new SqlParameter("@Year", year), new SqlParameter("@Month", month), new SqlParameter("@ProjectID", projectid)).ToList();
        var model = new LoggedBugs
        {
            LoggedBugsCount = loggedbugs,
           ClosedBugs = ClosedBugs
        };
        return Json(model, JsonRequestBehavior.AllowGet);
    } 
```

模型在这里向我返回记录计数两条...所以现在我要做的是...此数据应该绑定到线图，其中 LoggedBugsCount 应该有不同的行，而 ClosedBugs 应该有不同的行...并且应该在几周内X轴和y轴应该有计数....

任何人都可以在这里帮助我如何在 highcharts 中绑定这个数据折线图。这是我现在正在尝试的，但没有结果

```
 <script type="text/javascript">
    $(document).ready(function () {
        alert(1);
        $.getJSON('<%= Url.Action("CreatedBugs","WeeklyLoggedBugs") %>', {}, function (data) {
            var json = data;
            alert(data);
            var loggedbugs = [];
            var closedbugs = [];
            for (var i in json) {
                // var serie = new Array(json[i].Projects, json[i].Bugs);
                //jsondata.push([json[i].projectName, json[i].ProjectYear, json[i].ProjectMonth, json[i].Week1, json[i].Week2, json[i].Week3, json[i].Week4, json[i].Week5]);
                loggedbugs.push([json[i].LoggedBugsCount]);
                closedbugs.push([json[i].ClosedBugs]);

            }
            chart.series[0].data = loggedbugs;
            chart.series[1].data = closedbugs;
            var chart;
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    type: 'line'
                },
                title: {
                    text: 'Daily Reports'
                },
                subtitle: {
                    text: 'Logged Bugs'
                },
                xAxis: {
                    categories: ['Week1', 'Week2', 'Week3', 'Week4', 'Week5']
                },
                yAxis: {
                    title: {
                        text: 'Temperature (°C)'
                    }
                },
                tooltip: {
                    enabled: false,
                    formatter: function () {
                        return '<b>' + this.series.name + '</b><br/>' +
                    this.x + ': ' + this.y + '°C';
                    }
                },
                plotOptions: {
                    line: {
                        dataLabels: {
                            enabled: true
                        },
                        enableMouseTracking: false
                    }
                },
                series: [{
                    type: 'line',
                    name: 'Logged Bugs'

                },
                    {
                        type: 'line',
                        name: 'ClosedBugs'

                    }]
            });
        });
    });       
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:28:50.810

看这里

```
chart.series[0].data = loggedbugs;
chart.series[1].data = closedbugs;
var chart;
chart = new Highcharts.Chart({
      ........
}); 
```

首先，您在创建图表甚至定义图表变量之前将数据添加到系列。

其次，您可以使用以下方法串行设置数据：

```
series: [{
       name: 'Logged Bugs',
       data: loggedbugs

},
{
      name: 'ClosedBugs',
      data: closedbugs
}] 
```

所以，你的活动不需要

```
chart.series[0].data = loggedbugs;
chart.series[1].data = closedbugs; 
```

这是示例：http: [//jsfiddle.net/mhardik/JRq7Z/](http://jsfiddle.net/mhardik/JRq7Z/)

编辑：我不知道 asp.net MVC3

检查您是否正在获取数据。`console.log()`如果您使用的是 FF，则使用控制台打印响应。

```
for (var i in json) {
         loggedbugs.push([json[i].LoggedBugsCount]);
         closedbugs.push([json[i].ClosedBugs]);

 }
 // Check
 console.log(loggedbugs); console.log(closedbugs); 
```

# html - 防止父母李+李携带给孩子

> ID：12177199
> 
> 赞同：1
> 
> 时间：2012-08-29T11:46:46.900
> 
> 标签：html, css, html-lists

我在导航菜单上使用它来分隔列表项

```
nav li + li:before{
    content: " | ";
} 
```

这会在每个列表项之间放置一个栏，它不会将栏放在第一个元素之前。并且使用 :before 伪选择器，它不会在最后放置一个。（如此处建议[的导航分隔符](https://stackoverflow.com/questions/5688791/separators-for-navigation/11574821#11574821)）

但是，我想防止这种情况传递到子列表项。

例如`nav ul li ul li`

我已经在孩子身上试过了`content:none;`，`content:"";`但它们仍然显示在子菜单中。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:49:39.860

不覆盖的替代方法，使用子组合器 ( `>`)：

```
nav > ul > li + li:before {
    content: " | ";
} 
```

如果该元素是另一个元素的直接子元素（而不是该元素的孙子元素），则子组合器将选择该元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:19:12.983

啊——我找到了答案！

```
nav ul li li:before {
    content: "";
} 
```

# php - 命名空间内的全局空间函数

> ID：12177200
> 
> 赞同：0
> 
> 时间：2012-08-29T11:46:51.367
> 
> 标签：php

如何在全局空间中声明波纹管函数？

```
namespace something\else;

function example() {
  #some code here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:03:13.343

来自[PHP 文档](http://www.php.net/manual/en/language.namespaces.definitionmultiple.php)：

> 要将全局非命名空间代码与命名空间代码结合起来，仅支持括号语法。

因此，如果您可以完全控制 PHP 文件，请尝试

```
namespace Something {
    function example() {
    }
}
namespace {
    function example() {
    }
} 
```

# php - 从两个表中选择相同的列名

> ID：12177203
> 
> 赞同：3
> 
> 时间：2012-08-29T11:46:54.090
> 
> 标签：php, mysql

我有这个查询：

```
$result3 = mysql_query("SELECT posts.id, posts.date, posts.title, comments.post, comments.id, comments.date FROM posts, comments WHERE posts.id = comments.post")       
or die(mysql_error());  

while($row2 = mysql_fetch_array( $result3 )) {
    echo $row2['title'];
} 
```

问题在于 posts.id 、 posts.date 和 comments.id 、 comments.date 。我怎样才能得到`$row2['....];`我试过的两张桌子的 id, date`$row2['posts.id'];`但它没有用！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T11:48:54.530

将查询中的列命名（这称为列别名），如下所示：

```
SELECT 
    posts.id as postsID, 
    posts.date, 
    posts.title, 
    comments.post, 
    comments.id as CommentsID, 
    comments.date 
FROM 
    jaut_posts, 
    f1_comments 
WHERE 
    jaut_posts.id = f1_comments.post 
```

然后你可以使用：

```
echo $row2['postsID'];
echo $row2['commentsID']; 
```

编辑：

您也可以从[我编写并回答的这个问题](https://stackoverflow.com/questions/12475850/how-can-an-sql-query-return-data-from-multiple-tables)中受益，该问题讨论了许多常见的 SQL 查询和请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:49:30.347

在查询中使用`as`，例如

```
select post.id as PostId, comment.id as CommentId 
```

进而 ：

```
row["PostId"]
row["CommentId"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T11:49:55.987

```
while($row2 = mysql_fetch_array( $result3 )) {
  $post_id = $row2[0];
  $posts_date = $row2[1];
  $posts_title = $row2[2];
  $comments_post = $row2[3];
  $comments_id = $row2[4];
  $comments_date = $row2[5];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T11:50:34.363

改变

```
SELECT posts.id, posts.date, posts.title, comments.post, comments.id, comments.date 
```

进入

```
SELECT posts.id AS postsid, posts.date, posts.title, comments.post, comments.id AS commentsid, comments.date 
```

然后你可以使用`$row2['postsid'];`和`$row2['commentsid'];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T11:49:04.703

创建别名：

```
$sql = 'SELECT posts.id AS post_id, comments.id AS comment_id ...';

$row = mysql_fetch_assoc($sql);

echo $row['post_id'];
echo $row['comment_id']; 
```

或者，您可以通过索引访问它（因为您仍然在使用`mysql_fetch_array`）

```
echo $row[0]; // posts.id 
```

# java - 如何解析实体声明并获取 XML 中的文件路径？

> ID：12177206
> 
> 赞同：0
> 
> 时间：2012-08-29T11:47:05.470
> 
> 标签：java, xml, jaxp, entityresolver

```
<?xml version='1.0' encoding='UTF-8'?>
 <!DOCTYPE dmodule 
 [<!NOTATION JPEG SYSTEM 'Joint Photographic Experts Group'>
  <!ENTITY abcd SYSTEM  'sunset.jpg' NDATA JPEG>
 ]>

  ....
  <graphic id = "abcd"/> 
```

参考上面的示例代码，我需要在我的 html 上获取日落图像，为此我需要获取在实体声明中定义的文件路径日落.jpg。

我将如何在 Java 中做到这一点？我试过

```
 document.getDoctype().getEntities().item(i).getNodeName(), 
```

但它给了我abcd，但我需要文件路径'sunset.jpg'。

我也试过，

```
builder.setEntityResolver(new EntityResolver() {

            @Override
            public InputSource resolveEntity(String publicId, String systemId)
                    throws SAXException, IOException {
                // TODO Auto-generated method stub

                System.out.println("Public and System IDs"+publicId+"  "+systemId);
                return new InputSource(new StringReader(referDM));
            }
        }); 
```

但我认为我的返回类型有一些问题，因为我希望将图像文件作为字节数组读取，？返回类型应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:48:24.983

干得好：

```
Entity entity = (Entity) document.getDoctype().getEntities().item(i);
String path = entity.getSystemId(); 
```

# php - 停止在 cakephp 中更新的字段

> ID：12177207
> 
> 赞同：0
> 
> 时间：2012-08-29T11:47:08.197
> 
> 标签：php, cakephp

在我的蛋糕 PHP 应用程序中，我有一个编辑表单，其中“电子邮件”字段是只读的，这意味着用户无法更新它。现在，如果我认为从安全角度来看，用户可以通过“firebug”或其他一些浏览器插件来更新该字段。

我`$this->User->save($this->data)`用来保存更新的数据。通过此功能，电子邮件也可以更新。

我们在 cake php 中有什么方法可以防止这个字段被更新，比如在这里传递一个参数或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:18:35.207

您可以简单地从 $this->data 中删除电子邮件字段：

```
unset($this->data['User']['email']);
$this->User->save($this->data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:28:36.310

如果安全是一个问题，只需拒绝任何具有意外值的数据。在蛋糕中你可以这样做，但它可以适用于任何框架/cms

```
/**
 * Checks input array against array of expected values.
 *
 * Checks single dimension input array against array of expected values.
 * For best results put this is in app_controller.
 *
 * @param array $data - 1 dimensional array of values received from untrusted source
 * @param array $expected - list of expected fields
 * @return boolean - true if all fields are expected, false if any field is unexpected.
 */
protected function _checkInput($data,$expected){
  foreach(array_keys($data) as $key){
    if (!in_array($key,$expected)){
     return;
    }
  }
  return true;
}

/** 
 * edit method.
 * 
 * put this in <Model>_controller
 * @param string $id
 * @return void
 * @todo create errors controller to handle incorrect requests
 * @todo configure htaccess and Config/routes.php to redirect errors to errors controller
 * @todo setup log functionality to record hack attempts
 * @todo populate $expected with fields relevant to current model
 */ 
function edit($id=null){
  $expected = ('expectedVal1', 'expectedVal2');
  $this->Model->id = $id;
  if (!$this->Model->exists()) {
    throw new NotFoundException(__('Invalid model'));
  }
  if ($this->request->is('post')) {
    if (!$this->_checkData($this->request->data['Model'], $expected)) {
      //log the ip address and time
      //redirect to somewhere safe
      $this->redirect(array('controller'=>'errors','action'=>'view', 405);
    }
    if ($this->Model->save($this->request->data)) {
      //do post save routines
      //redirect as necessary
    }
    else {
      $this->Session->setFlash(__('The model could not be saved. Please, try again.'));
    }
  }
  $this->set('model',$this->Model->read($expected,$id));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:15:05.433

您可以执行以下操作：

```
$dontUpdateField = array('email');
$this->Model->save(
           $this->data, 
           true, 
           array_diff(array_keys($this->Model->schema()),$dontUpdateField)
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:18:25.187

您可以使用安全组件并隐藏电子邮件。使用此组件时，隐藏字段不能更改，否则蛋糕会黑化表单。

[http://book.cakephp.org/1.3/en/view/1296/Security-Component](http://book.cakephp.org/1.3/en/view/1296/Security-Component)

如果您的应用程序是公开的，强烈建议您使用安全性，否则通过在表单上提交额外字段`$this->Model->save($this->data))`并保存额外字段时将数据注入模型中有点微不足道，除非您进行额外的验证工作$this->data 的每个字段；

# java - XSLT 不向元素添加 XMLNS

> ID：12177209
> 
> 赞同：1
> 
> 时间：2012-08-29T11:47:12.810
> 
> 标签：java, xml, xslt

我有一个与此类似的简单 HTML 片段：

```
<a href="123">link</a> 
```

我需要将其转换为

```
<abc:href var="123">link</abc:href> 
```

我是用 XSLT 做的，所以我必须在`xsl:stylesheet`

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:abc="http://abc.ru"> 
```

它几乎可以正常工作，不幸的是 XSLT 转换继续向输出添加 XMLNS，如下所示：

```
<abc:href var="123" xmlns:abc="http://abc.ru">link</abc:href> 
```

我不需要 xmlns 定义，我可以删除它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:20:27.920

虽然它确实违背了原则，我强烈反对它，但如果您需要生成这种格式错误的 XML，那么您可以使用如下指令...

```
<xsl:value-of disable-output-escaping="yes" select="
  concat('&lt;abc:href var="',$href,'"&gt;',$link,'&lt;/abc:href&gt;')
 "/> 
```

... 其中 $href 和 $link 是适当表达式的位置标记。

* * *

## 更新

为了回应OP的评论，可以使用这样的模板......

```
<xsl:template match="a">
  <xsl:value-of disable-output-escaping="yes" select="
    concat('&lt;abc:href var="',@href,'"&gt;',.,'&lt;/abc:href&gt;')
   "/>
</xsl:template> 
```

这种丑陋的解决方案只能作为最后的手段使用。一个更好的解决方案是使用 XSLT 来生成您的整个文档，而不仅仅是它的无效片段。这样您的文档格式就会很好，并且您可以发挥 XSLT 的全部功能和简单性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:35:19.943

> 它几乎可以正常工作，不幸的是 XSLT 转换继续向输出添加 XMLNS，如下所示：
> 
> ```
> <abc:href var="123" xmlns:abc="http://abc.ru">link</abc:href> 
> ```
> 
> 我不需要 xmlns 定义，我可以删除它吗？

**想要删除名称空间声明会产生（名称空间）格式不正确的 XML 文档**，因此 XSLT 处理器会添加名称空间声明——这是 W3C XSLT 规范所要求的。

**您可以通过将命名空间声明放在一个共同的祖先（例如生成的 XML 文档的顶部元素）上，**使这些命名空间声明“消失” 。****

 ****这是一个完整的例子**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <top xmlns:abc="http://abc.ru">
   <xsl:apply-templates/>
  </top>
 </xsl:template>

 <xsl:template match="a[@href]">
   <xsl:element name="abc:href" namespace="http://abc.ru">
     <xsl:attribute name="var">
       <xsl:apply-templates/>
     </xsl:attribute>
   </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下文档时**：

```
<html>
  <a href="123">link1</a>
  <a href="xxx">link2</a>
  <a href="yyy">link3</a>
  <a href="zzz">link4</a>
</html> 
```

**产生了想要的正确结果**：

```
<top xmlns:abc="http://abc.ru">
   <abc:href var="link1"/>
   <abc:href var="link2"/>
   <abc:href var="link3"/>
   <abc:href var="link4"/>
</top> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:13:53.563

> 这很可悲，但我真的需要一个无效的 xml

XSLT 旨在防止您生成错误的 XML。如果您想生成糟糕的 XML，请不要使用 XSLT。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T12:05:22.750

试试看`exclude-result-prefixes`，像这样：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:abc="http://abc.ru"
                exclude-result-prefixes="abc">

    <xsl:template match="/">
      <xsl:apply-templates select="@* | node()"/>
    </xsl:template>

    <xsl:template match="a">
     <href var="{@href}"><xsl:value-of select="."/></href>
    </xsl:template>

</xsl:stylesheet> 
```**

# android - 如何在单个布局中添加多个布局编程

> ID：12177211
> 
> 赞同：1
> 
> 时间：2012-08-29T11:47:13.707
> 
> 标签：android, layout

我怎样才能添加更多相同的布局而不是一个

```
View v = (LinearLayout) inflater.inflate(R.layout.tab_frag2_layout,container, false);
     RelativeLayout tv = (RelativeLayout) inflater.inflate(R.layout.post_layout,container,false);
     RelativeLayout tv2 = (RelativeLayout) inflater.inflate(R.layout.post_layout,container,false);

    ((LinearLayout) v).addView(tv);
    ((LinearLayout) v).addView(tv);
    ((LinearLayout) v).addView(tv);
    ((LinearLayout) v).addView(tv);
    ((LinearLayout) v).addView(tv); 
```

如果我这样做它会给我错误然后如果我这样做它只会显示一次

```
View v = (LinearLayout) inflater.inflate(R.layout.tab_frag2_layout,container, false);
     RelativeLayout tv = (RelativeLayout) inflater.inflate(R.layout.post_layout,container,false);
     RelativeLayout tv2 = (RelativeLayout) inflater.inflate(R.layout.post_layout,container,false);

    ((LinearLayout) v).addView(tv);
    ((LinearLayout) v).addView(tv2); 
```

怎么办请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:52:09.667

首先，演员阵容没有意义：

```
View v = (LinearLayout) inflater.inflate(R.layout.tab_frag2_layout, container, false); 
```

删除演员表，或将类型更改`v`为`LinearLayout`。

如果您向您的日志猫提供错误消息会更好，但我想您已经到达`ClassCastException`这里：

```
((LinearLayout) v).addView(tv); 
```

也许你`v`不是`LinearLayout`？如果你不确定，试试这个：

```
((ViewGroup) v).addView(tv); 
```

**编辑**

当您膨胀布局时，`View`会创建实例。一个人`View`不能有超过 1 个父母，所以当你这样做时：

```
.addView(tv);
.addView(tv); 
```

操作系统认为您正在尝试添加另一个父级`tv`（被禁止，因此会引发异常）

# cakephp - CakePHP 不为 HABTM 关系插入链接关联

> ID：12177220
> 
> 赞同：0
> 
> 时间：2012-08-29T11:47:53.640
> 
> 标签：cakephp, cakephp-2.1, cakephp-2.2

我在 CakePHP 2.2.1 中有两个模型：

```
class Episode extends AppModel {
    public $hasAndBelongsToMany = array(
    'Tags' => array('className' => 'Tag')
    );
} 
```

和

```
class Tag extends AppModel {
    public $hasAndBelongsToMany = array(
        'Episode' => array('className' => 'Episode')
    );
} 
```

我想同时插入一个情节和一个标签并将它们相互链接。从文档中我得到这将是我在控制器方法中执行的正确代码：

```
$this->Tag->create();
$this->Tag->save(array(
    'name' => 'Test Tag'
));
$tagid = $this->Tag->getInsertID();

var_dump($tagid); // works

$this->Episode->create();
$this->Episode->save(array(
    'Episode' => array(
        'title' => 'Test with Tag'
    ),
    'Tags' => array(
        'Tag' => array($tagid)
    )
)); 
```

我没有收到任何错误消息，并且两条记录都已创建，但没有插入 episodes_tags 表中的行。CakePHP 执行以下查询：

```
Nr  Query                                                                                                              Err Aff Rws Took (ms)
1   INSERT INTO `pottcast`.`tags` (`name`) VALUES ('Test Tag')                                                              1   1   0
2   INSERT INTO `pottcast`.`episodes` (`title`) VALUES ('Test with Tag')                                                    1   1   0
3   SELECT `EpisodesTag`.`tag_id` FROM `pottcast`.`episodes_tags` AS `EpisodesTag` WHERE `EpisodesTag`.`episode_id` = 9     0   0   0 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:13:00.850

试试这个 ：

在剧集模型中：

```
public $hasAndBelongsToMany = array(
    'Tag' => array(
        'className' => 'Tag',
        'joinTable' => 'episodes_tags',
        'foreignKey' => 'episode_id',
        'associationForeignKey' => 'tag_id',
        'unique' => 'keepExisting',

    )); 
```

在您的控制器中：

```
$this->Episode->save(array(
    'Episode' => array(
        'title' => 'Test with Tag'
    ),
    'Tag' => array(
        'Tag' => $tagid
    )
)); 
```

询问是否不适合您。

# c++ - 在 Visual 2010 中具有 lambda 函数和枚举的 C2665，是错误还是正常？

> ID：12177230
> 
> 赞同：4
> 
> 时间：2012-08-29T11:48:25.367
> 
> 标签：c++, visual-studio-2010, visual-c++, lambda, c++11

我可以得到以下代码进行编译：

```
enum E {a, b, c};
void f()
{
    E e;
    std::function<void()> f = [&]() { e = a; };
} 
```

但不是以下一个：

```
void f()
{
    enum E {a, b, c};
    E e;
    std::function<void()> f = [&]() { e = a; };
} 
```

发出以下编译器错误：

```
1>test.cpp(5): error C2665: '`anonymous-namespace'::<lambda1>::<lambda1>' : none of the 2 overloads could convert all the argument types
1>          test.cpp(5): could be '`anonymous-namespace'::<lambda1>::(f::E &,f::E &)'
1>          while trying to match the argument list '(f::E, f::E)' 
```

该错误是可预期的还是错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T12:11:21.287

这似乎与[http://social.msdn.microsoft.com/Forums/en/vclanguage/thread/88f533d8-b7f5-4416-bdcf-b461aeb74178](http://social.msdn.microsoft.com/Forums/en/vclanguage/thread/88f533d8-b7f5-4416-bdcf-b461aeb74178)上的问题相同。在那里，它似乎是编译器中的一个错误。MSVC 似乎对 lambda 中的本地类型有一些问题。另请参阅[http://connect.microsoft.com/VisualStudio/feedback/details/675113/lambda-expression-causes-internal-compiler-error#details](http://connect.microsoft.com/VisualStudio/feedback/details/675113/lambda-expression-causes-internal-compiler-error#details)。

**5.1.2 Lambda 表达式 [expr.prim.lambda]**中没有任何语言可以说明本地定义的类型不能在 lambda 中捕获。

# android - 在 micromax P300 上安装失败缺少共享库错误

> ID：12177234
> 
> 赞同：0
> 
> 时间：2012-08-29T11:48:34.717
> 
> 标签：android, google-maps, google-maps-api-3

我正在尝试在 Micromax P300 上安装我的应用程序，但它给了我一个错误提示“INSTALL_FAILED_MISSING_SHARED_LIBRARY”。
我知道当您的应用程序使用 Google 地图并且您的设备没有 Google 地图时会出现此错误。
但就我而言，我使用的是 Micromax P300 TAB，它也有谷歌地图。但不知道为什么会出现这个错误。
请帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:50:03.860

你应该添加这个

```
<application>
    <uses-library android:name="com.google.android.maps" />
....
</application> 
```

在您的清单文件中

# sql - oracle sql根据其他列对特定列进行分组

> ID：12177238
> 
> 赞同：0
> 
> 时间：2012-08-29T11:48:59.477
> 
> 标签：sql, group-by, oracle11g, sequence

```
SOURCE_TABLE 
------------
OID EVENT_ID  
1   1111  
2   2222
3   1111  
4   1111  
5   1111  
6   2222  
7   2222  
8   2222 
```

```
FINAL_TABLE  
------------
SNO EVENT_ID    OID LINE_NUMBER  
1   1111        1   1  
2   1111        1   2  
3   1111        3   3   
4   1111        3   4  
5   1111        4   5  
6   1111        4   6  
7   1111        5   7  
8   1111        5   8  
9   2222        2   1  
10  2222        2   2  
11  2222        6   3  
12  2222        6   4  
13  2222        7   5  
14  2222        7   6  
15  2222        8   7  
16  2222        8   8 
```

我正在使用 Oracle 11g。我想将 SOURCE 表中的数据插入到 FINAL 表中。在 FINAL 表中，每个 EVENT_ID 的行号必须是唯一的（例如 1111）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:01:03.640

假设 SNO 是 Final_Table 中的自增 PK。使用[ROW_NUMBER() 函数](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions137.htm)：

```
insert into FINAL_TABLE   (EVENT_ID,  OID,  LINE_NUMBER)
  (
    select EVENT_ID,OID,
       ROW_NUMBER() OVER(PARTITION BY EVENT_ID ORDER BY OID) as LINE_NUMBER
    from source_table
  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:02:23.050

如果我理解正确你在这之后

```
 SELECT EVENT_ID, OID  ROW_NUMBER()
   OVER (PARTITION BY EVENT_ID,OID ORDER BY OID) AS LINE_NUMBER
   FROM SOURCE_TABLE; 
```

# javascript - 自动重建封闭大豆模板

> ID：12177239
> 
> 赞同：3
> 
> 时间：2012-08-29T11:49:02.600
> 
> 标签：javascript, google-closure-library, google-closure-templates, plovr

我在使用 Google Closure Soy 模板时遇到了问题。当我更改模板时，我需要从命令行运行脚本以将 Soy 模板编译为 JS 文件。是否有服务或其他东西可以自动重建这些模板？

此外，据我所知，“plovr”服务能够使用闭包编译器自动重建 JS 源代码。有没有办法重建大豆模板并通过 plovr 自动将它们放到指定的文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:18:04.830

[**Plovr**](http://plovr.com/docs.html)将自动编译[**闭包模板**](https://developers.google.com/closure/templates/)（soy 文件）以及 JavaScript 源代码。

如果您的项目具有以下文件结构，则可以使用如下所示的 plovr 配置文件。

```
/home/my/project
         |-- build
         |-- js
             |-- myapp.js
         |-- soy
             |-- mytemplate.soy 
```

# plovr_config.json

```
{
  "id": "myapp",
  "inputs": [
    "/home/my/project/js/myapp.js"
  ],
  "paths": [
    "/home/my/project/soy"
  ],
  "mode": "ADVANCED",
  "level": "VERBOSE",
  "output-file": "/home/my/project/build/myapp.compiled.js"
} 
```

在开发期间，您将在 HTML 文件中配置一个`<script>`标签，以在启动 plovr 服务器后自动重新编译您的 JavaScript 和闭包模板：

```
java -jar plovr.jar serve plovr_config.json 
```

# 索引.html

```
<!doctype html>
<html>
<head>
  <title>My App</title>
</head>
<body>

<h1>My App</h1>

<script src="http://0.0.0.0:9810/compile?id=myapp"></script>

</body>
</html> 
```

# c++ - QT Subdir - 未定义对 main 的引用 - 错误

> ID：12177241
> 
> 赞同：3
> 
> 时间：2012-08-29T11:49:04.930
> 
> 标签：c++, qt, qt-creator

我有一个简单的 QT subdir 项目，其结构为

```
TestProject/
    TestProject.pro
    Subdir1/
            Subdir1.pro
        sources/
            main.cpp
    Subdir2/
        Subdir2.pro
        headers/
            mainwindow.h
        sources/
            mainwindow.cpp 
```

这是我的 .pro 文件 TestProject.pro

```
TEMPLATE = subdirs
SUBDIRS += \
    Subdir1 \
    Subdir2 
```

Subdir1.pro

```
SOURCES += \
main.cpp 
```

Subdir2.pro

```
QT += sql

SOURCES += \
    mainwindow.cpp \
HEADERS += \
    mainwindow.h \ 
```

当我尝试运行应用程序时，出现以下错误：

```
(.text+0x18):-1: error: undefined reference to `main' 
```

我在 Ubuntu 12.04 上使用 Qt Creator IDE。我花了很多时间试图弄清楚这一点，为了让 Qt 能够构建项目，我必须在 .pro 文件中放入什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:38:32.220

看起来您正在尝试做的是将所有源文件构建到一个可执行文件中。这不是 subdirs 模板的用途，它用于创建一个构建多个不同目标的 Makefile（例如两个不同的可执行文件，或一个可执行文件和一个库）。

您可能想要的是要么只有一个 .pro 文件，例如

`SOURCES = Subdir1/mainwindow.cpp Subdir1/main.cpp`

或者您可以将 subdir pro 文件制作成（按照惯例） .pri 文件。然后在顶层，您只需执行以下操作：

```
include(Subdir1/Subdir1.pri)
include(Subdir2/Subdir2.pri) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:59:29.343

尝试将您的*Subdir.pro*文件显式添加到您的*TestProject.pro*文件中：

```
OTHER_FILES += \
    Subdir1/Subdir1.pro\
    Subdir2/Subdir2.pro\ 
```

所以 Qt 知道有子项目。

# python - python-constraint 等价

> ID：12177245
> 
> 赞同：3
> 
> 时间：2012-08-29T11:49:29.097
> 
> 标签：python, constraints

这个问题是关于 python 包**约束**（参见[http://labix.org/python-constraint](http://labix.org/python-constraint)），特别是内置的“ *AllEqualConstraint* ”。在涉及 4 个变量的问题中，我想强制前两个和后两个相等，即：

```
p = Problem()
p.addVariables([1,2,3,4], [0,1])
p.addConstraint(AllEqualConstraint(), [1,2])
p.addConstraint(AllEqualConstraint(), [3,4]) 
```

我只有两个解决方案：

```
for sol in p.getSolutions():
  print sol

> {1: 1, 2: 1, 3: 1, 4: 1}
> {1: 0, 2: 0, 3: 0, 4: 0} 
```

我希望看到四个，即：

```
> {1: 1, 2: 1, 3: 1, 4: 1}
> {1: 1, 2: 1, 3: 0, 4: 0}
> {1: 0, 2: 0, 3: 1, 4: 1}
> {1: 0, 2: 0, 3: 0, 4: 0} 
```

**我的问题是**：任何人都可以确认这是包打算计算的内容以及其背后的原因是什么？

Ps：我已经联系了这个包的作者，但还没有得到回复。我知道这个包是相当有名的，并且之前在 StackOverflow 上也有过关于它的问题。

**作为对 LVC 的回答**：约束*并不**总是**将约束应用于所有变量*：

```
p = Problem()
p.addVariables([1,2,3], [0,1])
p.addConstraint(AllEqualConstraint(), [1,2]) 
```

给

```
> {1: 1, 2: 1, 3: 1}
> {1: 1, 2: 1, 3: 0}
> {1: 0, 2: 0, 3: 1}
> {1: 0, 2: 0, 3: 0} 
```

正如预期的那样。如果`AllEqualConstraint`不尊重变量，它将非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:29:35.470

该模块的[源代码](http://codespeak.net/svn/user/niemeyer/constraint/trunk/constraint.py)包含它如何执行`AllEqualConstraint`：

```
def __call__(self, variables, domains, assignments, forwardcheck=False,
             _unassigned=Unassigned):
    singlevalue = _unassigned
    for value in assignments.values():
        if singlevalue is _unassigned:
            singlevalue = value
        elif value != singlevalue:
            return False 
```

在每个中调用它的代码`Solver`执行以下操作：

```
for constraint, variables in vconstraints[variable]:
    if not constraint(variables, domains, assignments,
                      pushdomains):
        # Value is not good.
        break 
```

`assignments`包含*所有变量的**所有*赋值，而不仅仅是受约束影响的变量。这意味着它不关心您输入的变量- 它总是测试潜在解决方案中的所有变量是否相等，这就是为什么您错过了两个不是这种情况的解决方案。*`AllEqualConstraint``addConstraint`*

 *唯一一次`AllEqualConstraint`看这个`variables`论点是当它被称为`forwardcheck`真实时。在这种情况下，它会这样做：

```
if forwardcheck and singlevalue is not _unassigned:
    for variable in variables:
        if variable not in assignments:
            domain = domains[variable]
            if singlevalue not in domain:
                return False
            for value in domain[:]:
                if value != singlevalue:
                    domain.hideValue(value) 
```

但是，提供的求解器似乎都没有调用`forwardcheck`除默认值以外的任何值的约束——在 is 的情况`AllEqualConstraint`下`False`。

因此，您必须指定自己的手动约束 - 但这并不难，因为它们可以只是接受适当数量变量的函数（它被包装在 a 中`FunctionConstraint`，所以您不需要关心所有传递给的其他东西`Constraint.__call__`）。

因此，您想要的约束是一个接受两个变量并返回它们是否相等的函数。[`operator.eq`](http://docs.python.org/library/operator.html#operator.eq)非常符合要求：

```
p.addConstraint(operator.eq, [1, 2])
p.addConstraint(operator.eq, [3, 4]) 
```

应该给你你正在寻找的结果。

因此，将其扩展到两个以上的变量，您可以编写自己的函数：

```
def all_equal(a, b, c):
    return a == b == c 
```

或者，更一般地说：

```
def all_equal(*vars):
    if not vars:
       return True
    return all(var == var[0] for var in vars) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:37:02.583

[评论太长了。]

您所做的编辑并未表明`AllEqualConstraint`尊重变量限制，只是它并不总是设法完全忽略它们。@lvc 注意到的代码段按照他所说的做了。如果您对其进行检测，您可以看到（为清楚起见，使用`a`, `b`, `c`,`d`作为变量名）

```
from constraint import *
p = Problem()
p.addVariables(list("abcd"), [0, 1])
p.addConstraint(AllEqualConstraint(), list("ab"))
p.addConstraint(AllEqualConstraint(), list("cd"))
print p.getSolutions() 
```

最终产生

```
variables: ['c', 'd']
domains: {'a': [0, 1], 'c': [0, 1], 'b': [1], 'd': [1, 0]}
assignments: {'a': 1, 'c': 0, 'b': 1}
forwardcheck: [[1, 0]]
_unassigned: Unassigned
setting singlevalue to 1 from variable a
returning False because assigned variable c with value 0 != 1 
```

事实上，正如@lvc 所说，它施加了一个`a`应该 equal的约束`c`，即使它不应该。我*认为*相关的循环应该更像

```
 for key, value in assignments.items():
        if key not in variables: continue 
```

产生

```
[{'a': 1, 'c': 1, 'b': 1, 'd': 1}, {'a': 1, 'c': 0, 'b': 1, 'd': 0},
 {'a': 0, 'c': 1, 'b': 0, 'd': 1}, {'a': 0, 'c': 0, 'b': 0, 'd': 0}] 
```

虽然我不知道代码是如何工作的，所以很难确定。这对我来说就像一个错误。这似乎不太可能，但它看起来不像`AllEqualConstraint`在代码库中的任何地方使用（在任何示例中），除了在它自己的文档字符串中，示例测试每个变量都参与约束的情况，因此错误不会出现。*

# php - 更改时图像不显示

> ID：12177246
> 
> 赞同：0
> 
> 时间：2012-08-29T11:49:28.707
> 
> 标签：php, html, css

```
<div id="logo">
<?php if($jw_logo_textual == 'on'){ ?>
<h1>
   <a href="<?php echo home_url(); ?>"><?php bloginfo('name'); ?></a>
</h1> 
```

当我将 '/images/logo.png' 更改为我想要的 url 时，我想更改 header.php（横幅）中的图片，但它不显示。虽然我确定网址是正确的。谁能帮忙？

```
 <?php }else{ ?>
 <?php if($jw_logo_image != ''){ $logo_img = $jw_logo_image; }
     else{ $logo_img = get_template_directory_uri().'/images/logo.png'; }
 ?> 
 <a href="<?php echo home_url(); ?>">
    <img src="<?php echo $logo_img; ?>" alt="" />
 </a>
 <?php } ?>

</div><!-- #logo --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:17:55.687

为了有一个互联网网址，您需要删除

```
get_template_directory_uri() 
```

只有当您有本地地址时才需要

# android - 当我点击一个精确点时，它应该在 Android 地图中打开一个警报对话框

> ID：12177248
> 
> 赞同：0
> 
> 时间：2012-08-29T11:49:38.420
> 
> 标签：android, android-mapview, android-maps

我有一个加载用户当前位置的 Main Activity 类。还有一个扩展 ItemizedOverlay 的类。这个类负责放置一个精确的位置。我还有一个类可以获取附近的 ATM 位置。所以我使用 for 循环在所有附近的 atm 位置放置精确点。我希望我的应用程序在我点击特定引脚时弹出。显示那个地方的附近。

```
for(int i=0; i < placeName.length;i++){
nearbylatitude= (int) (lati[i]*1E6);
nearbylongitude=(int) (longi[i]*1E6);
Log.e("Location", nearbylatitude+"\t \t"+ nearbylongitude);
GeoPoint myLocation_nearby_place= new GeoPoint(nearbylatitude, nearbylongitude);    
OverlayItem overlayPlaces=new             OverlayItem(myLocation_nearby_place,placeName[i],vicinity[i]);
custom_Places=new CustomPinpoint(drawable_places,     MainMapActivity.this);
    custom_Places.addPinPoints(overlayPlaces);
     overlayList.add(custom_Places);

    } 
```

这是将 pin 点放置在附近位置的 for 循环。我知道有一个带有 ItemizedOverlay 的方法 onTap() ......但我不知道何时调用该函数以及如何检索哪个引脚被点击。

急需帮助。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:07:11.703

使用以下内容：

public OverlayItem(GeoPoint point, java.lang.String title, java.lang.String snippet) 参数： point - 项目的位置。标题 - 标题文本。片段 - 片段文本。

```
OverlayItem currentOverlay = new OverlayItem(CurrLocGeoPoint(),"Text for bubble",""); 
```

# iphone - 如何使用日期选择器在按钮上显示选定的日期？

> ID：12177261
> 
> 赞同：0
> 
> 时间：2012-08-29T11:50:31.680
> 
> 标签：iphone, ios, ios4, ios5.1

当我点击我的按钮时，我能够成功显示日期选择器。但是当我从日期选择器中选择日期时，我无法在`UIbutton`. 请帮帮我

这是我的代码：

```
-(IBAction)btnDateClicked:(id)sender
{ 
UIActionSheet *actionSheet1 = [[UIActionSheet alloc] initWithTitle:nil 
                                                          delegate:nil
                                                 cancelButtonTitle:nil
                                            destructiveButtonTitle:nil
                                                 otherButtonTitles:nil];

[actionSheet1 setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

UIDatePicker *pView=[[UIDatePicker alloc] initWithFrame:pickerFrame];

pView.datePickerMode=UIDatePickerModeDate; 

NSDateFormatter *df=[[NSDateFormatter alloc] init];

[df setDateFormat:@"MM/dd/yyyy"];

// NSDate *date=[df dateFromString:self.hController.fromDateTime];

// [pView setDate:date animated:YES];

self.datePicker=pView;

[actionSheet1 addSubview:self.datePicker];

[pView release];

UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Done"]];

closeButton.momentary = YES; 

closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);

closeButton.segmentedControlStyle = UISegmentedControlStyleBar;

closeButton.tintColor = [UIColor blackColor];

[closeButton addTarget:self action:@selector(dismissActionSheet1:) forControlEvents:UIControlEventValueChanged];

[actionSheet1 addSubview:closeButton];

[closeButton release];

[actionSheet1 showInView:[[UIApplication sharedApplication] keyWindow]];

[actionSheet1 setBounds:CGRectMake(0, 0, 320, 485)];

self.actionSheet=actionSheet1;

[actionSheet1 release];
}
///////////////////////////////////
- (void)dismissActionSheet1:(id)sender
{
[self.actionSheet dismissWithClickedButtonIndex:0 animated:YES];

NSDateFormatter *df=[[NSDateFormatter alloc] init];

[df setDateFormat:@"MM/dd/yyyy"];   

//NSString *str=[df stringFromDate:self.datePicker.date]; 

//self.hController.selectDate=str;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:01:16.717

将一些标签作为子视图添加到显示单击事件选择器视图的按钮上。从日期选择器中选择日期时，将标签文本更新为所选日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:03:09.677

使用它来更新按钮上的标题

```
[ closeButton setTitle:str forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:11:20.257

您必须为此使用`UIPickerViewDataSource,UIPickerViewDelegate`方法。创建您在 pickerView 中显示的日期数组并使用以下方法。

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component 
{

[ closeButton setTitle:[NSString StringWithFormat:@"%@",[datesArray objectAtIndex:row]] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:33:53.643

使用 IBOutlet 连接按钮，然后在以下方法中使用设置按钮的文本

```
 - (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component
     {
        [ closeButton setTitle:[NSString StringWithFormat:@"%@",[datesArray objectAtIndex:row]]  forState:UIControlStateNormal];

     } 
```

你完成了:)

# c# - Win8 Metro 风格应用程序中的 OpenID（使用 Steam 进行身份验证）

> ID：12177270
> 
> 赞同：6
> 
> 时间：2012-08-29T11:50:47.427
> 
> 标签：c#, .net, openid, windows-runtime

我一直在考虑制作一个 Windows 8 Metro (WinRT) 风格的应用程序，允许用户使用 Steam WebAPI 登录/验证，这样我就可以使用他们提供的统计信息等。但是我不确定如何解决这个问题。

几乎每个针对 OpenID 提供程序进行身份验证的答案都说要使用[DotNetOpenAuth](http://www.dotnetopenauth.net/)，但是当使用 NuGet 安装它时，它会说依赖项（CodeContracts.Unofficial 1.002）没有任何与我的项目目标（.NET 框架 4.5）兼容的程序集，所以我我猜测要么尚未针对 Windows 8 应用程序进行更新，要么不会由于某些 WinRT 限制。

我还研究过使用 .NET 库的[WebAuthenticationBroker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker.aspx)类，但我不确定如何将它与 OpenID 提供程序一起使用。它的示例似乎仅适用于 OAuth，并且在[Steam WebAPI 页面](http://steamcommunity.com/dev)上提供的唯一信息是：

> 只需为您选择的语言和平台下载 OpenID 库，并使用[http://steamcommunity.com/openid](http://steamcommunity.com/openid)作为提供程序。返回的 Claimed ID 将包含用户的 64 位 SteamID。

我尝试通过直接传递给定的 URL 来简单地使用它，`AuthenticateAsync(WebAuthenticationOptions, Uri);`但这只会给出一个带有微调器的白屏。

关于如何让 OpenID 库与 Metro 应用程序一起工作，或者如何使用 WebAuthenticationBroker 通过 OpenID 协议进行身份验证（最好专门针对 Steam），是否有人对我有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:35:13.343

[http://steamcommunity.com/dev](http://steamcommunity.com/dev)这说你必须使用 OpenID 但似乎 openID 的 C# 库不适用于 .Net 4.5。

您可以创建一个 C++ dll 窗口商店应用程序项目并使用 OpenID C++ 来完成这项工作。比将该 dll 添加到您的 C# 窗口商店应用程序。

# matlab - 如何在matlab中绘制不同的帧

> ID：12177272
> 
> 赞同：2
> 
> 时间：2012-08-29T11:50:59.443
> 
> 标签：matlab

在我的程序中，我想获得三个地块，

```
plot(CumulativeReward)
title('Cumulative Reward, gamma=1');
xlabel('episode number');
ylabel('CumulativeReward')

plot(Pathlength)
title('pathlength as a function of episode number');
xlabel('episode number');
ylabel('pathlength')

x = -pi:.1:pi;
y = sin(x);
plot(x,y) 
```

但是所有三个图都在一个框架中，我怎样才能将每个图放在不同的框架框中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:51:42.257

打电话`figure`前打电话`plot`。这将打开一个新的图形窗口。

为了更容易区分窗口，可以设置它们的标题，例如

```
figure('name','Cumulative Reward') 
```

如果你想要并排的情节，你可以使用`subplot`，即

```
subplot(1,3,1)
%# your first plot here
subplot(1,3,2)
%# your second plot here
subplot(1,3,3)
#% your third plot here 
```

# java - Java中的strcpy是什么？

> ID：12177273
> 
> 赞同：9
> 
> 时间：2012-08-29T11:51:13.397
> 
> 标签：java

Java中的strcpy是什么？

```
String s1, s2;

s1 = new String("hello");
s2 = s1; // This only copies s1 to s2. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-29T11:52:40.987

这个说法：

```
s2 = s1; 
```

将 的值复制`s1`到`s2`。该值只是一个引用，所以现在`s1`和`s2`引用同一个对象。因此，如果这是一个可变类型（例如`StringBuilder`，或`ArrayList`），那么您应该担心。

然而，`String`是不可变的。您不能修改对象来更改其文本数据，因此只需复制引用就足够了。更改 的值`s2`以引用不同的字符串（或使其成为`null`引用）*不会*更改 的值`s1`：

```
String s1 = "hello";
String s2 = s1;
s1 = "Something else";
System.out.println(s2); // Prints hello 
```

如果你*真的*想创建一个新`String`对象，你可以使用你已经（不必要地）使用的构造函数 for `s1`：

```
s2 = new String(s1); 
```

然而，这*很少*是一个好主意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T11:53:19.463

String 是不可变的，因此您永远不需要复制它。（极少数情况除外）

例如

```
s1 = new String("hello"); 
```

基本上是一样的

```
s1 = "hello"; 
```

和

```
s2 = s1; 
```

基本上是一样的

```
s2 = "hello"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:52:59.777

No`s2`将与 . 一起引用新创建的字符串对象`s1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:56:16.900

```
String s1, s2;

s1 = new String("hello");
s2 = s1; // This only copies s1 to s2\. Am I right?

s1="adsfsdaf";

System.out.println(s2);
System.out.println(s1); 
```

你是对的 s1 和 s2 打印的字符串不是同一个字符串...但是在对对象执行此操作时，一个对象中所做的更改会影响另一个对象...需要克隆对象..字符串没有问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T11:58:16.730

String Constructor 很容易完成这项工作，因为 java 中的字符串对象是不可变的

```
String st="hello";
String st1=new String(st); 
```

输出将是 st1 是你好

# android - 将数据从活动发送到另一个活动而不启动活动或如何刷新 TextView

> ID：12177274
> 
> 赞同：0
> 
> 时间：2012-08-29T11:51:17.650
> 
> 标签：android, android-intent

我想知道如何在不启动活动的情况下通过意图从一项活动传递数据。我正在使用 TabViews，当我启动另一个 Activity 时，我失去了 TabView 和 TabIcons，因为我使用 MainActivity.tabHost.setCurrentTab(2); 在选项卡之间切换。

```
btnShowResult.setOnClickListener(new OnClickListener() {    
        @Override
        public void onClick(View v) {
            result = database.getResult();
            MainActivity.tabHost.setCurrentTab(2);
        }
    }); 
```

单击按钮时，我定义了一个全局变量 result 并用我的数据库中的值填充它。它加载我的第三个选项卡，我在其中调用 txtView.setText(SecondTab.result+"");

当我第一次单击该按钮时，这工作正常。但是更改变量结果对 txtView 没有影响，因为它没有刷新。

更改全局变量结果后如何刷新 txtView？调用 ThirdTab.txtView.invalidate(); 在 onClick-Function 中导致我的应用程序崩溃。

谢谢。

* * *

编辑：

好的。我通过将结果保存到 sharedPrefs 并在第二个选项卡中从它加载来使用 SharedPreferences 完成此操作。但是，我的 txtView 中显示的结果仍然相同并且不会改变。在 sharedPrefs 中的结果发生更改后，我在哪里以及如何告诉我的第二个 Tab 刷新 txtView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:58:57.370

您可以将所需的数据保存在共享首选项中，然后您可以从任何活动中访问它，因此您无需通过意图传递它并使用启动活动

```
 http://android-er.blogspot.com/2011/01/example-of-using-sharedpreferencesedito.html

 http://saigeethamn.blogspot.com/2009/10/shared-preferences-android-developer.html

 http://alchemiaandroid.altervista.org/sharedPreferencesTutorial.html 
```

上面的链接是使用共享首选项的教程示例。将数据保存为 (Key,value) 对，然后您可以通过其键访问所需的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:59:23.703

如果您`txtView.setText(result)`再次调用怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:04:51.270

在终止应用程序之前保持这些值的最佳方法是共享首选项。因此，请按照此链接存储和获取共享首选项中的值 [http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T06:40:47.703

现在可以工作了，虽然它不是很好的代码：

```
public static int hasChanged = 0;
...
btnShowResult.setOnClickListener(new OnClickListener() {    
        @Override
        public void onClick(View v) {
            result = database.getResult();
            if (hasChanged != 0)
                Tab3.txtView.setText(result+"");

            MainActivity.tabHost.setCurrentTab(2);
        }
    }); 
```

在创建和绘制 txtView 后的第三个选项卡中，我将全局变量 hasChanged 设置为 1，这样现在每次单击按钮 btnShowResult 后，txtView 都会设置为结果的新值。

谢谢你们的帮助。

# xpages - Notes 客户端的 XPage 视图中未显示展开图像 (=XPINC)

> ID：12177281
> 
> 赞同：0
> 
> 时间：2012-08-29T11:51:35.097
> 
> 标签：xpages, xpinc

在作为 XPINC 应用程序打开的 XPages 应用程序中，我在分类视图中遇到折叠/展开图标的问题。

对于折叠/展开，我使用自己的图标 (Minus.gif/Plus.gif)。展开图标将毫无问题地显示，但不显示折叠图标。我可以点击它，但图像是隐藏的。

在 IE、Chrome、FF 和 Safari 中我没有任何问题。

感谢大家的解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:35:47.127

几个问题。

1.  你的图像存储在哪里？
2.  您使用什么代码来引用它们？

对于 XPiNC，对资源的 URL 引用可能不同，如果通过 XPiNC 访问 XPage，您引用的任何基于服务器的资源都需要存储在用户的 PC 上？

# ssis - 如何将多个文件中的数据加载到多个表中？

> ID：12177291
> 
> 赞同：1
> 
> 时间：2012-08-29T11:51:56.277
> 
> 标签：ssis

假设我们有 10 个不同的文件，需要加载到 10 个不同的表中。表名应与文件名相同。建议一些使用 SSIS 包一次加载所有文件的有效方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-01T11:44:40.727

这可以在 SSIS 中使用 BCP 命令、两个 SQL 任务和一个 Foreach 容器轻松实现。

在数据库中为各自的平面文件创建表模式。

现在在数据库中创建一个新表（Path_Table），该表应该有三列，如下所示。

第 1 列：Table_name 第 2 列：File_path 第 3 列：File_name

在 (Path_Table) 中插入数据的示例

```
Insert into Path_Table Values (‘dept_table’,’d:\\’,’department.txt’) 
```

它适用于'n'个表格。

在此打开 SSDT 后创建一个新的 SSIS 包。现在拖动“执行 SQL 任务”</p>

创建一个名为“tbl_variable”的数据类型对象的新变量。

现在编辑“执行 SQL 任务”并在一般选项卡中建立 OLE DB 连接并在 SQL 语句选项卡中写入以下查询。

*// 从 dbo.Path_table 中选择 Table_name,File_path,File_name //*

现在在 SQL 任务中将结果集属性更改为“完整结果集”</p>

在“执行 SQL 任务”的左窗格中，选择“结果集”将查询结果映射到我们的变量（tbl_variable）。

现在拖放“每个容器”。在左侧窗格中选择“collection”，从下拉列表中选择“Enumerator”作为“For Each ADO Enumerator”，然后为 ADO 对象源变量选择 variable(tbl_variable)。最后选择“枚举模式”为“第一个表中的行”。

'tbl_variable' 结果有三列。现在在“变量映射”窗格中，将三列结果映射到三个新变量（数据类型为 varchar），即 tbl_name、file_path 和 file_name，索引号分别为 (0,1,2)，因为这将是下一个参数映射SQL 任务（加载数据） 现在在“对于每个容器”中执行一个“SQL 任务”。在“SQL 命令”中将查询写为：

```
declare @tblname sysname=?
declare @dir varchar(500)=?
declare @file_name varchar(500)=?
declare @SQLstring  varchar(2000)
set @SQLstring='BCP AdventureWorks2012.'+@tblname+'  IN  '+@dir+'\'+@file_name+'.txt  -c  -t, -S PRINHYLTPDL0937 -T  -R'
exec xp_cmdshell @SQLstring
go 
```

在上述查询中，根据您的要求更改数据库和其他内容。在参数映射窗格的“SQL 任务”中，Map 先前创建了三个变量（tbl_name、file_path 和 file_name）结果作为上述查询的输入，参数名称分别为 0,1 和 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:32:57.437

1.  创建 SSIS 包。
2.  创建 10 个平面文件连接（对于每个文件）。
3.  在每个中创建 10 个 Dataflow 对象：

    *   平面文件源（选定的 txt 文件）
    *   数据转换元素
    *   派生列元素
    *   Ole DB 目标元素（在此元素中，您需要在表选择组合框附近按下“新建”按钮。SSIS 将为您提供带有表创建代码的 SQL 查询。文件中将包含所有列，同时编辑表名称）

在插入表之前，创建 SQL 任务以截断这些表。您可能需要编辑一些数据类型，因为 SSIS 几乎总是提供字符串类型 -varchar。

# c# - 子类给出关于父类构造函数的错误

> ID：12177293
> 
> 赞同：0
> 
> 时间：2012-08-29T11:52:02.877
> 
> 标签：c#, class, inheritance

> **可能重复：**
> [不包含带 0 个参数的构造函数](https://stackoverflow.com/questions/12138221/does-not-contain-a-constructor-that-takes-0-arguments)

我有一个名为 getData 的 DAL 类，其构造函数强制您传递连接字符串：

```
namespace AQProduct
{
  public class getData
  {
    public getData(string strConnectionString)
    {
    }
  }
 } 
```

我有做实际工作的课程：

```
namespace AQProduct
{
  public class User_DL : getData
  {
  }
} 
```

构建失败

> 'AQProduct.getData' 不包含采用 0 个参数的构造函数

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:54:13.030

您需要向派生类添加构造函数并将连接字符串传递给基类：

```
public class User_DL : getData
{
    public User_DL(string connectionString)
        : base(connectionString)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T11:55:44.940

在（非静态）类中，如果您不添加自己的构造函数，则会以以下形式隐式创建一个构造函数：

```
public ClassName : base() { } 
```

即调用基类的无参数构造函数。由于那*不存在*，您将**需要**添加一个自定义构造函数，例如：

```
public User_DL() : base("some fixed value from somewhere") {} 
```

或者：

```
public User_DL(string connectionString) : base(connectionString) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T11:54:17.097

您需要在 DAL 类中添加一个默认构造函数：

```
// Your default constructor
public getData()
{
} 
```

或者将带有参数的构造函数添加到派生类中；搭配：

```
public class User_DL : getData
{
    public User_DL(string connectionString) : base(connectionString)
    {
       // Insert code here
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T11:55:08.340

添加此构造函数

```
public User_DL(string yourConnection) : base(yourConnection)
{

} 
```

# c# - 在 C# 中使用 SOAP API 调用没有代理的 Web 服务

> ID：12177294
> 
> 赞同：2
> 
> 时间：2012-08-29T11:52:05.310
> 
> 标签：c#, wcf, soap

我有一个带有一个公开方法 GetData 的 Web 服务。它将一个字符串作为输入参数并返回另一个字符串。我可以使用带有以下请求的测试工具调用 Web 方法。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <GetData xmlns="http://tempuri.org/">
      <value>Enter my value</value>
    </GetData>
  </s:Body>
</s:Envelope> 
```

我能否获得有关如何在没有代理引用和使用端点详细信息的情况下在 C# windows 应用程序中调用相同功能的帮助。（例如：http://mymachine:1415/MyService.svc）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:05:39.317

```
using (WebClient wc = new WebClient())
{
     var result = wc.UploadString("http://localhost.:1415/MyService.svc", request);
} 
```

**编辑**

```
XNamespace s = "http://schemas.xmlsoap.org/soap/envelope/";
XNamespace tempUri = "http://tempuri.org/";

var xDoc = new XDocument(
                    new XElement(
                        s + "Envelope",
                        new XAttribute(XNamespace.Xmlns + "s", s),
                        new XElement(
                            s + "Body",
                            new XElement(
                                tempUri+ "GetData",
                                new XElement(tempUri + "value","Enter my value")
                            )
                        )
                    )
                );

var request = xDoc.ToString(); 
```

# android - 有没有类似于 string.xml 的默认保存常量的地方？

> ID：12177300
> 
> 赞同：2
> 
> 时间：2012-08-29T11:52:20.817
> 
> 标签：android

好吧，这个问题不言自明。我应该声明一个枚举还是应用程序的文件系统中已经有一个指定的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:55:41.417

您可以使用所需的任何文件名创建资源文件`res/values`，其中包含各种类型的值。[阅读文档](http://developer.android.com/guide/topics/resources/more-resources.html)。

# php - 将 PHP 数组中的唯一值插入 SQL 表

> ID：12177305
> 
> 赞同：5
> 
> 时间：2012-08-29T11:52:32.797
> 
> 标签：php, sql, insert

> **可能重复：**
> [如何在 MySQL 中“如果不存在则插入”？](https://stackoverflow.com/questions/1361340/how-to-insert-if-not-exists-in-mysql)

有SQL表：

```
CREATE TABLE IF NOT EXISTS `MyTable` (
  `id` smallint(6) NOT NULL AUTO_INCREMENT,
  `MyVar` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`)
) 
```

并且有两个 PHP 数组`arr1[]=array("abc","bcd")`和`arr2[]=array("abc","cde")`.

假设我已将 arr1[] 值保存到 SQL 表中。现在假设我需要将 arr2[] 值保存到同一个 SQL 表中。为了避免重复保存“abc”条目，我需要编写哪个 SQL INSERT 查询？结果必须是：

```
MyTable:
1  |  abc
2  |  bcd
3  |  cde 
```

**但不是：**

```
MyTable:
1  |  abc
2  |  bcd
3  |  abc
4  |  cde 
```

更新：也许应该以忽略重复条目的方式创建/定义 MyTable？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T11:55:29.827

有 3 种可能的解决方案：使用`INSERT IGNORE`、`REPLACE`或`INSERT ... ON DUPLICATE KEY UPDATE`。检查这篇[文章](http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html)。

如果该解决方案适合您，您还可以在内存中[与数组相交，然后仅插入唯一值。](http://php.net/manual/en/function.array-intersect.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:59:26.280

在你的桌子上做`MyVar`一样。`UNIQUE`

像这样：

```
CREATE TABLE IF NOT EXISTS `MyTable` (
  `id` smallint(6) NOT NULL AUTO_INCREMENT,
  `MyVar` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `myvaridx` (`MyVar`)
); 
```

或者，如果您无法重新创建表，请使用

```
ALTER TABLE `request`
ADD UNIQUE INDEX `myvaridx` (`MyVar`) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:00:28.553

将 SQL 用于此类任务将是一种浪费。

我建议使用“array_merge”函数来合并数组，然后使用“array_unique”函数来处理重复。

然后将唯一值插入数据库。

# iphone - NSDate 提前 1 小时？

> ID：12177311
> 
> 赞同：0
> 
> 时间：2012-08-29T11:52:55.800
> 
> 标签：iphone, objective-c, ios, nsdate, nsdatecomponents

我正在使用以下代码来设置日期对象：

```
NSDate *date = [NSDate date];
        NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
        NSDateComponents *components = [gregorian components: NSUIntegerMax fromDate: date];
        [components setHour: 18];
        [components setMinute: 00];
        [components setSecond: 00];

        reminderDate = [gregorian dateFromComponents: components]; 
```

但是，当我 NSLog 提醒日期时，我得到以下输出：

```
Time: 2012-08-29 17:00:00 +0000 
```

**早了一小时**，谁能解释我需要做什么才能将正确的日期存储在remindDate**中**？

谢谢，

泰辛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:57:28.153

你的时区是什么时候？如果您注意到，您打印的日期有 +0 时区，所以如果您的时区是 +1 是正确的。

# django - 通过单击图像弹出日历：django forms

> ID：12177315
> 
> 赞同：0
> 
> 时间：2012-08-29T11:53:05.723
> 
> 标签：django, django-forms, django-templates

我想在我的网页中有一个文本框，旁边有一个图像。当用户单击图像时，它会显示帮助用户选择日期的日历（弹出日历）。我已经在原始 html 中完成了它。但现在我想使用 django 表单（虽然我没有任何模型）所以我搜索并发现我必须在 forms.py 中编写自己的小部件。s.th 喜欢：

```
class CalendarWidget(forms.TextInput):
        css = ('/media/css/main.css', '/media/css/js-cal.css')
        js = ('/media/js/js-cal.min.js') 
```

我有一个包含所有表单字段的类`backupForm`。`forms.py`

我的问题是：**要使用上述内容，我应该像这样在类`CalendarWidget`中定义一个字段吗？`backupForm`**：

```
date1 = forms.CharField(widget=CalendarWidget) 
```

如何将图像绑定到此文本框并强制用户仅从该日历中输入他的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:21:54.723

您可以使用输入字段（文本框）的表单字段并应用`CalendatWidget`为该字段的小部件。小部件负责创建/绑定用作按钮的图像。

Django Admin 自动使用`AdminDateWidget`表单字段`model.DateField`，尽管有模型表单部分，您可以将其签入`django/contrib/admin/widgets.py`. 检查`init()`内部函数`django/contrib/admin/static/admin/js/admin/DateTimeShortcuts.js`以了解 Django 如何创建/绑定日历按钮到一个输入字段。

您甚至可以`AdminDateWidget`在首页中使用，只要页面加载所需的 CSS/JS 资源并具有某些属性集....

# ios - 是否可以检测非 ipod 音乐？

> ID：12177318
> 
> 赞同：6
> 
> 时间：2012-08-29T11:53:18.460
> 
> 标签：ios, mpmusicplayercontroller, background-music

有什么方法可以检测是否正在播放来自 iPod 应用程序以外的其他来源的音乐或媒体？

我知道我可以检测到从 ipod 播放的音乐：

```
[[MPMusicPlayerController iPodMusicPlayer] playbackState] == MPMusicPlaybackStatePlaying 
```

但是，如果正在播放的音乐来自另一个应用程序，例如 Pandora Radio、Spotify、Plex 等，则返回不正确......我做错了什么还是这可能？

这似乎是可能的，因为这些其他应用程序能够向系统注册以接收系统控制事件

```
-(void)remoteControlReceivedWithEvent:(UIEvent *)theEvent 
```

但是，到目前为止，除了 ipod 媒体之外，我还没有找到任何查询此值的方法。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:58:19.337

```
static bool isOtherAudioIsPlaying(void)
{
    UInt32 OtherAudioIsPlaying = 0;
    UInt32 size = sizeof(OtherAudioIsPlaying);

    AudioSessionGetProperty(kAudioSessionProperty_OtherAudioIsPlaying,
                 &size,
                 &OtherAudioIsPlaying);
    return (bool)OtherAudioIsPlaying;
} 
```

# java - 使用 java 在远程位置检测新创建的文件

> ID：12177320
> 
> 赞同：0
> 
> 时间：2012-08-29T11:53:18.757
> 
> 标签：java, file, ftp, creation

我想在远程位置检测新创建的文件，所以我可以处理这个文件（读取它，并对其进行一些操作）

那么请问，我怎样才能使用 Java 5 做到这一点？（我知道这是一台旧服务器，但我们最近在升级它时遇到了问题）

注意：访问远程文件的方式由我们选择，具体取决于建议的解决方案（例如，如果最好的解决方案是使用 FTP，我会处理它）

提前谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:55:51.150

最简单的解决方案是使用 Directory [Watcher](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

这需要 Java 7 并且该目录已安装并且对运行该进程的用户可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:43:39.563

使用 FTP 轮询是一种方法。

如果您可以在远程位置运行一些自定义代码，另一种方法是保持客户端和服务器之间的连接打开（或执行长轮询）并让服务器立即通知客户端文件的任何更改。

# grails - 如何阻止 Grails less-resources 插件在每个运行应用程序中编译我的 less 文件？

> ID：12177321
> 
> 赞同：3
> 
> 时间：2012-08-29T11:53:26.297
> 
> 标签：grails, less

有谁知道如何让 Grails less-resources 插件缓存已编译的 .css 文件，并且只有在相应的 .less 文件发生更改时才重新编译？它为“grails run-app”增加了很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:58:18.880

我在 Grails 邮件列表中问过这个问题。解决方案是使用一些外部工具来编译 less 并将其添加到您的版本控制中，摆脱插件并简化事情。

然后资源将仅链接到已编译的 css，这将改善您的启动时间和内存使用情况。

对于mac，人们推荐[了这个](http://incident57.com/less/)应用程序。

> 它可以在后台运行，并且在更新链接资源时重新编译非常聪明。它还可以同时压缩，因此如果您愿意，您最终会得到缩小的 CSS 文件。

# performance - Entity Framework 5 和 Oracle：针对非唯一索引字段查询时影响性能的闭包表达式

> ID：12177322
> 
> 赞同：4
> 
> 时间：2012-08-29T11:53:30.047
> 
> 标签：performance, oracle, entity-framework, repository-pattern

我遇到了 Entity Framework 5 和 Oracle DB 的性能问题。

我有一个简单的 SQL 选择：`SELECT * FROM NOTE WHERE NOTENUMBER = '1A23456'`

`NOTENUMBER`包含在名为 NOTE 的表的索引中，但该字段不是主键/唯一的。

*   当我使用 Oracle SQL Developer 执行该语句时，结果会快速返回，并且查询计划显示正在使用 RANGE SCAN。

*   当我使用实体框架时，生成的 SQL 需要更长的时间（5 秒对 30 毫秒）。

*   当我使用 Entity Framework 并使用**主键字段**(NOTE_KEY) 进行查询时，结果返回的速度与使用 SQL Developer 一样快。

我怀疑两件事：

*   EF 和 Oracle.DataAccess-provider 没有使用可用的非唯一索引存在一些问题。如果我有 Entity Framework 5 的调试符号会有所帮助，但我在任何地方都找不到它们。

*   性能问题存在于 EF 中，关于闭包和/或我在 EF 中使用通用存储库模式的方式：

    如果我这样调用我的存储库：
    `var notenumber = "1A23456";`
    `var notes = repository.All(n => n.NOTENUMBER == notenumber).ToList();`
    谓词以如下方式出现在方法`All`中：
    `{n => (n.NOTE == value(Tester.Program+<>c__DisplayClass0).notenumber)}`
    并且 EfProf-profiler 将生成的 SQL 跟踪为：

    `SELECT "Extent1"."NOTE_KEY" AS "NOTE_KEY",`
    `"Extent1"."NOTENUMBER" AS "NOTENUMBER",`
    `"Extent1"."NOTETEXT" AS "NOTETEXT",`
    `FROM "NOTE_DBA"."NOTE" "Extent1"`
    `WHERE ("Extent1"."NOTENUMBER" = '1PSA0500237500' /* @p__linq__0 */)`

    查询需要**~5500ms**。

    另一方面，如果我这样调用我的存储库：
    `var notes = repository.All(n => n.NOTENUMBER == "1A23456").ToList();`
    那么谓词如下：
    `{n => (n.NOTENUMBER == "1A23456")}`
    并且 EfProf-profiler 将生成的 SQL 跟踪为：

    `SELECT "Extent1"."NOTE_KEY" AS "NOTE_KEY",`
    `"Extent1"."NOTENUMBER" AS "NOTENUMBER",`
    `"Extent1"."NOTETEXT" AS "NOTETEXT",`
    `FROM "NOTE_DBA"."NOTE" "Extent1"`
    `WHERE ('1PSA0500237500' = "Extent1"."NOTENUMBER")`

    查询需要**~30ms**。

    所以唯一的区别是 WHERE 子句中条件的顺序，而在后者中似乎没有参数被 EF 替换

我使用 VS2010 和 .NET4，并参考 EF5 (v4.4.0.0)。存储库的 All-method 是：

```
public IQueryable<NOTE> All(Expression<Func<NOTE, bool>> predicate = null)
{
    var setOfNotes = GetDbSet<NOTE>();
    var notesQuery = from note in setOfNotes select note;
    if (predicate != null)
    {
        notesQuery = notesQuery.Where(predicate);
    }
    return notesQuery;
} 
```

我尝试创建一个 CompiledQuery，尝试使用`setOfNotes.AsNoTracking()`并尝试以 .NET 4.5 为目标 - 性能没有差异。

我能够快速获得此特定查询的一种方法是使用 Oracle 的基本 Data Provider for .NET (ODB.NET) 并手动构建查询，但我宁愿不坚持使用该解决方案。同样，如果我在 where 子句中使用主字段，即使使用 EF 和相同的 All-method，查询也会很快。

所以问题似乎出在EF的某个地方。如果我只有 EntityFramework.dll 的符号，我觉得可以找到更多信息。

EF 调用谓词的方式会不会有问题？'@p_ *linq* _0'参数如何在 EF 中被替换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:28:58.373

我有一个类似的问题。在我的案例中未使用索引的原因是我从.NET 传递了一个字符串（unicode）作为参数。这与非 unicode 数据库字段进行了比较。

解决方案是在将字符串参数传递到 where 子句之前将其转换为非 unicode：

```
using System.Data.Objects;

EntityFunctions.AsNonUnicode( myUnicodeParam) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T04:08:10.713

我在代码中看到了一些错误和设计问题。

首先，自定义“All”方法。将所有笔记选择到 notesQuery 中的代码行根本不执行任何操作。

```
var notesQuery = from note in setOfNotes select note; 
```

请记住，'setOfNotes' 已经是 Note 类型的 IQueryable。该声明实际上是说“从选择所有笔记中选择所有笔记”。LINQ 将在内部完全删除此语句（具有轻微的性能成本），因此可以安全地从您的代码中删除它。

尝试将功能更改为：

```
public IQueryable<NOTE> All(Expression<Func<NOTE, bool>> predicate = null)
{
    var setOfNotes = GetDbSet<NOTE>();
    return (predicate == null) ? setOfNotes : setOfNotes.Where(predicate);
} 
```

设计中存在更大的基本问题。对于 .NET 集合，方法“All”用于确定集合中每个元素的谓词是否为真。这并不意味着“退回所有物品”。当然，您正在创建自己的存储库，但命名与标准 .NET 使用冲突。我实际上建议您完全摆脱自定义存储库。

LINQ 是“语言集成查询”——重点在于将其与您的代码*集成。*在它周围再包裹一层是没有意义的，而且违反直觉。DbSet 实现了 IQueryable 接口 - 直接公开它并在您的代码中查询它。它允许 LINQ 更有效地缓存查询并避免冗余。IQueryable 已经*是*存储库，没有必要再创建一个。您刚刚抛弃了 LINQ 的强大功能，回到了存储过程的时代。

如果您在多个位置使用复杂查询，只需在 IQueryable 上编写一个扩展方法，该方法返回另一个 IQueryable。然后就可以GetDbSet().SliceAndDice()了！

回到你原来的问题，你可能把分配和比较混在一起了。您粘贴的代码包括：

```
var notes = repository.All(n => n.NOTENUMBER = notenumber).ToList(); 
```

这是不正确的，它试图将“notenumber”分配给 n.NOTENUMBER 属性，而不是测试相等性。也许这只是堆栈溢出帖子中的一个错字。相反，请尝试：

```
var notes = repository.All(n => n.NOTENUMBER == notenumber).ToList(); 
```

甚至更好：

```
var notes = GetDbSet<NOTE>().Where(n => n.NOTENUMBER == notenumber).ToList(); 
```

我怀疑相等错误只是一个错字，但问题可能在于您在 IQueryable 存储库上“分层”自定义存储库并在它们之间传递表达式的方式，并且正在破坏 EF 正确缓存的能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:18:57.473

要找出 SQL 实体框架使用 ToTraceString 方法生成的内容，请参阅：http: [//msdn.microsoft.com/en-us/library/system.data.objects.objectquery.totracestring.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectquery.totracestring.aspx)

可能是 NOTE 表有关系，开启了 eager loading。在这种情况下，EF 生成的 SQL 将尝试加载所有相关数据。

# azure - Azure WASABi SecurityNegotiationException

> ID：12177333
> 
> 赞同：1
> 
> 时间：2012-08-29T11:54:53.993
> 
> 标签：azure, azure-worker-roles, autoscaling, wasabi

我使用 Azure 自动缩放 WASABi 遇到了这个异常。

> 无法检索具有 DNS 前缀“ **DNS Prefix** ”的托管服务的实例计数。Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.ServiceManagement.ServiceManagementClientException：无法从 Windows Azure 为订阅 ID“**订阅 ID** ”和部署槽“暂存”中具有 DNS 前缀“ **DNS 前缀”的托管服务检索服务配置。**
> 
>  **System.ServiceModel.Security.SecurityNegotiationException：无法为具有权限“management.core.windows.net”的 SSL/TLS 建立安全通道。---> System.Net.WebException：请求被中止：无法创建 SSL/TLS 安全通道。在 System.Net.HttpWebRequest.GetResponse() 在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout) --- 内部异常堆栈跟踪结束 ---**

 **我已将我的服务配置设置如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<serviceModel xmlns="http://schemas.microsoft.com/practices/2011/entlib/autoscaling/serviceModel">
  <subscriptions>
    <subscription name="3-Month Free Trial"
                  certificateThumbprint="<Thumbprint>"
                  subscriptionId="<Subscription ID>"
                  certificateStoreLocation="LocalMachine" certificateStoreName="My">
      <services>
        <service dnsPrefix="<DNS Prefix>" slot="Staging">
          <roles>
            <role alias="<Role Name>" roleName="<Role Name>" wadStorageAccountName="wad-control-container"/>
          </roles>
        </service>
      </services>
      <storageAccounts>
        <storageAccount alias="wad-control-container"
                        connectionString="DefaultEndpointsProtocol=https;AccountName=<Account Name>;AccountKey=<Account Key>">
        </storageAccount>
      </storageAccounts>
    </subscription>
  </subscriptions>
  <stabilizer scaleUpCooldown="00:01:00"
            scaleDownCooldown="00:01:00"
            scaleUpOnlyInFirstMinutesOfHour="0"
            scaleDownOnlyInLastMinutesOfHour="0" />
</serviceModel> 
```

此外，自动缩放角色是单个 Worker 角色。该部署具有网站的 2 个 Web 角色和这个自动缩放的 Worker 角色。

网络角色正在使用相同的证书并且工作正常，有人可以说明我可以研究什么来解决这个问题吗？

谢谢和干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:01:36.790

我让它工作。

1.  创建新证书
2.  上传到**订阅 - 证书**
3.  上传到**设置 - 管理证书**
4.  将证书指纹添加到 VS Studio 中的 Web 和辅助角色
5.  **在服务 xml**和**服务定义**中将 certificateStoreLocation 设置为 CurrentUser
***   重新部署**

 **希望这对遇到此问题的人有所帮助。

干杯。****

# jquery - 我如何将切片器的效果从淡入淡出更改为其他一些过渡而不延迟 jQuery

> ID：12177336
> 
> 赞同：1
> 
> 时间：2012-08-29T11:55:02.593
> 
> 标签：jquery, asp.net, css, jquery-ui, slider

我正在将以下滑块用于 Web 项目我想将图像的过渡效果更改为不同的效果，例如向左滑动、向上滑动等。

[http://demo.webdeveloperplus.com/featured-content-slider/](http://demo.webdeveloperplus.com/featured-content-slider/)

```
$(document).ready(function () {
    $("#featured > ul").tabs({ fx: { opacity: "toggle"} }).tabs("rotate", 4000, true);
}); 
```

如果我`toggle`改为`fast`然后它可以工作，但广告会稍微延迟不到一秒。如果我能解决这个问题并让它像 WTA 网站[http://www.wtatennis.com/page/Home/0,,12781,00.html上的一样工作，我将不胜感激](http://www.wtatennis.com/page/Home/0,,12781,00.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:59:50.680

要更改效果，您只需更改`opacity`为`width`、`height`、`show`等，您将获得不同的动画。

至于速度，您可以使用“慢”、“正常”、“快”或以毫秒为单位设置一个值（如果您想要即时的东西）。

尝试这样的事情：

```
$(function () {
    $("#featured > ul").tabs({ fx: { width: 'toggle', duration: 1000 } }).tabs("rotate", 4000, true);
});​ 
```

# iphone - OHAttributedLabel + case 值不在枚举类型“UItextAlignment”中

> ID：12177340
> 
> 赞同：1
> 
> 时间：2012-08-29T11:55:13.450
> 
> 标签：iphone, xcode, uilabel

我在我的应用程序中使用 OHAttributedLabel 并收到警告，请告诉我如何解决它。

```
case value not in enumerated type "UItextAlignment" 
```

任何人请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:10:48.537

由于多次提交，此问题已得到修复。只需将您的`OHAttributedLabel`版本更新到最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:10:07.023

使用[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/downloads)链接，它比 OHAttributedLabel 更好地使用 NSAttributedString 的所有功能

# jquery - 滚动jQuery插件

> ID：12177341
> 
> 赞同：0
> 
> 时间：2012-08-29T11:55:14.543
> 
> 标签：jquery, css, animation, plugins

是否有任何 jquery 插件可以在您向下滚动项目时使用动画淡入？并且在我向下滚动时加载一些图像。或者当我向下滚动项目淡入或图表显示过渡动画时，是否有任何教程可以手动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:57:03.593

用于滚动使用时的 ajax 加载。

保罗爱尔兰的无限卷轴

[http://www.infinite-scroll.com/](http://www.infinite-scroll.com/)

* * *

要滚动到页面中的某个位置，请使用 Ariel Flesler 的 ScrollTo 插件。

对动画和滚动非常有用，并且有据可查。 [http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:04:07.040

这可能会帮助你。 [http://jqueryui.com/slider/#side-scroll](http://jqueryui.com/slider/#side-scroll)

您也可以在以下位置找到详细文档

[http://learn.jquery.com/jquery-ui/getting-started](http://learn.jquery.com/jquery-ui/getting-started)

# c# - ItemSend 事件未触发

> ID：12177345
> 
> 赞同：4
> 
> 时间：2012-08-29T11:55:26.120
> 
> 标签：c#, outlook, vsto, outlook-addin

我有一个 Outlook 2007 加载项 (VSTO)。使用 Outlook 发送的任何邮件都应在此之前进行修改。

我使用该事件，`Application.ItemSend`如果我直接从 Outlook ( `Inspector`) 或通过使用`Send`.`MailItem`

但是，有一些外部应用程序使用 Outlook 发送邮件 - 这根本不会触发`ItemSend`事件。邮件直接移动到发件箱（*我什至可以捕捉到`ItemAdd`该文件夹​​上*的事件）然后发送。

另一个有趣的问题是，如果我定义了一个**延迟传递规则**，那么如果我发送一封带有我的`Inspector`或我的 c# 代码的邮件，它就可以正常工作，但当这个应用程序执行它时就不行。

我的问题是您何时以及如何创建传递`ItemSend`事件的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T18:00:01.827

这是设计使然：由 Simple MAPI 或 mailto url 创建和发送的消息不会触发 OOM 事件。这是故意完成的 - 在这些场景中存在一些问题，因此事件被完全禁用。

# c - 不理解这个结构 typedefs

> ID：12177351
> 
> 赞同：3
> 
> 时间：2012-08-29T11:55:48.983
> 
> 标签：c, gmp

查看 GMPlib（用于多精度计算的 Gnu 库）的源代码，我发现了这种用于构建其 mp*_t 结构的代码。我已经在我做过的各种其他作品中复制了它，但我并不完全理解它。

```
typedef struct
{
  int _mp_alloc;           /* Number of *limbs* allocated and pointed
                              to by the _mp_d field.  */
  int _mp_size;            /* abs(_mp_size) is the number of limbs the
                              last field points to.  If _mp_size is
                              negative this is a negative number.  */
  mp_limb_t *_mp_d;        /* Pointer to the limbs.  */
} __mpz_struct; 
```

我知道这定义了具有两个整数和 a 的结构的“形状”，并将其`mp_limb_t`typedefs 为`__mpz_struct`

然后是这一行：

```
typedef __mpz_struct mpz_t[1]; 
```

过了一会儿，另一个：

```
typedef __mpz_struct *mpz_ptr; 
```

我知道第二个是类型定义（在函数原型中使用`__mpz_struct *`）`mpz_ptr`

但我不明白第一个是做什么的以及它为什么起作用，所以我可以声明一个 mpz_t。谁能解释它为什么起作用？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:00:53.503

理解 a 的最简单方法`typedef`是规则*Define it like you use it*。换句话说，当您声明 a 时，`typedef`您正在创建一个新名称，但如果您删除`typedef`关键字，您将获得**一个别名类型的对象**。

例如：

```
typedef __mpz_struct mpz_t[1]; 
```

这产生了一个新的类型名称，称为“mpz_t”。但是如果我们重写：

```
__mpz_struct some_obj[1]; 
```

我们立即明白它会生成一个数组`__mpz_struct`。所以现在我们知道了新类型的`mpz_t a`作用：它创建了一个`__mpz_struct`包含一个元素的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:01:38.133

第一个 typedef 将 mpz_t 定义为一个 __mpz_struct 的数组（typedef 的语法与用于声明对象的语法相同，不同之处在于您要声明一个类型）。

顺便说一句，typedef 指针不是一个非常好的主意，因为它很难正确地 const 正确

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:13:27.927

```
typedef __mpz_struct mpz_t[1]; 
```

将 mpz_t 定义为一个包含一个 __mpz_struct 的数组。有趣的是，如果你这样做

```
mpz_t x; 
```

您将 x 定义为一个 __mpz_struct 的数组。如果你这样做

```
void f(mpz_t p) { ... } 
```

您将 f 定义为**带有指向 __mpz_struct 的指针的函数**，因此您可以调用

```
f(x); 
```

它会调用 f，传递给它一个指向 x 的第一个（也是唯一的）元素的指针，并且 f 可以修改 x。因此，您有一种方法可以模拟通过引用传递。第二个兴趣是您正在失去做事的可能性

```
mpz_t x, y;

x = y; 
```

为什么有趣？因为 __mpz_struct 包含一个指针。并且复制指针不是正确的做法，您还想要复制所指向的内容。

BTW`va_list`有时以相同的方式定义，这解释了其使用的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:01:22.347

C 中的数组实际上等价于指针，因为数组是指向数组第一个元素的指针。在这里，`mpz_t`简单定义为指向一个数组 1`__mpz_struct`

希望它有所帮助。

# c# - WCF 不受支持的媒体类型

> ID：12177355
> 
> 赞同：0
> 
> 时间：2012-08-29T11:56:18.397
> 
> 标签：c#, wcf, web-services

我有一个 WCF 网络服务来接收文件，但是当我进行 post 调用时，当我尝试发送文件时，总是返回我不受支持的媒体类型 multipart-form-data，如果我不发送文件并将 contentype 设置为 xml，则服务给我一个 OK并创建文件 pruebffa.jpg 很好，这是我的 web.config：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="streamBinding" transferMode="Streamed" messageEncoding="Mtom" maxReceivedMessageSize="615424521" openTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00"/>
        </basicHttpBinding>
    </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
    <services>
        <service name="WcfService3.Service1" behaviorConfiguration="WcfService3.Service1Behavior">
            <endpoint address="" binding="basicHttpBinding" bindingConfiguration="streamBinding" contract="WcfService3.IService1">
                <identity>
                    <dns value="localhost"/>
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="WcfService3.Service1Behavior">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true. Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

代码：

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebGet(BodyStyle=WebMessageBodyStyle.Bare, UriTemplate="")] 
    void UploadImage(Stream image);
}

public class Service1 : IService1
{
    public void UploadImage(Stream image)
    {
        var buf = new byte[1024];
        var path = Path.Combine(@"C:\", "pruebffa.jpg");
        int len = 0;
        using (var fs = File.Create(path))
        {
            while ((len = image.Read(buf, 0, buf.Length)) > 0)
            {
                fs.Write(buf, 0, len);
            }
        }
    }
} 
```

如何启用以接受多部分/表单数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:29:26.633

由于这是一个 POST 操作，您应该使用`WebInvoke`而不是`WebGet`.

```
[OperationContract]     
[WebInvoke(..)]      
void UploadImage(Stream image); 
```

# iphone - iPhone：在单击 uialertview 取消或其他按钮时收到警告

> ID：12177356
> 
> 赞同：1
> 
> 时间：2012-08-29T11:56:19.840
> 
> 标签：iphone

## 警告：无法读取 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.3.4 (8K2)/Symbols/Developer/usr/lib/libXcodeDebuggerSupport.dylib 的符号（找不到文件）。

```
- (void)showReminder:(NSString *)text
{
    NSLog(@"alert text>>%@",text);
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Reminder" 
                                                        message:text delegate:self
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:@"Snooze",nil];
    [alertView show];

    [alertView release];

}

-(void)alertView:(UIAlertView*)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

NSString *title = [alertView buttonTitleAtIndex:buttonIndex]; 

    NSLog(@"alert title>>%@",title);
    if(buttonIndex == 0)  
    {  
        NSLog(@"Button 1 was selected.");  
    }  
    else if([title isEqualToString:@"Snooze"])  
    {  
        NSLog(@"check")
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:57:57.847

响应警报按钮选择

```
@interface ViewController : UIViewController <UIAlertViewDelegate> { 
```

创建 UIAlertview

```
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Hello World!"
                                              message:@"This is your first UIAlertview message."
                                             delegate:self
                                    cancelButtonTitle:@"Button 1"
                                    otherButtonTitles:@"Button 2", @"Button 3", nil];
[message show]; 
```

和

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Button 1"])
    {
        NSLog(@"Button 1 was selected.");
    }
    else if([title isEqualToString:@"Button 2"])
    {
        NSLog(@"Button 2 was selected.");
    }
    else if([title isEqualToString:@"Button 3"])
    {
        NSLog(@"Button 3 was selected.");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:55:24.040

为什么不使用这个：

```
- (void)showReminder:(NSString *)text {

   NSLog(@"alert text>>%@",text);
   UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Reminder" 
                                                 message:text 
                                                 delegate:self
                                                 cancelButtonTitle:@"Ok"
                                                 otherButtonTitles:@"Snooze",nil];
   [alertView show];

   [alertView release];

}

-(void)alertView:(UIAlertView*)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{    

    if(buttonIndex == 0)  {  
       NSLog(@"Button 1 was selected.");  
    }  
    else if(buttonIndex == 1){  
        NSLog(@"check")
    }

} 
```

什么时候`buttonIndex`是 1，那是你的贪睡按钮。如果您有其他警报，那么只需在 showReminder 中应用一个标签，`alertView.tag = 1`并在您`clickedButtonAtIndex`添加一个外部如果说

```
if(alertView.tag==1) 
```

对于该错误，请查看此[问题](https://stackoverflow.com/questions/4284277/libxcodedebuggersupport-dylib-is-missing-in-ios-4-2-1-development-sdk)。他们似乎已经解决了如何修复您需要的缺失符号链接

# android - Android：managedQuery在查找图片时返回0条记录，它在哪里查找图片？

> ID：12177359
> 
> 赞同：0
> 
> 时间：2012-08-29T11:56:51.057
> 
> 标签：android, android-emulator

任何人都可以提供帮助。我正在尝试获取 SD 卡上的所有可用图片。我已将图片 (JPG) 放入 sdcard 和图片目录，但以下代码始终返回 0 条记录。

```
 // Set up an array of the Thumbnail Image ID column we want
    String[] projection = {MediaStore.Images.Thumbnails._ID};
    // Create the cursor pointing to the SDCard
    Cursor cursor = managedQuery( MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
            projection, // Which columns to return
            null,       // Return all rows
            null,       
            null); 
```

这段代码实际上在哪里寻找？因为它也没有拾取我放置在 Pictures / DCIM 中的任何图像（在模拟器中）。

EXTERNAL_CONTENT_URI 指向 sdcard 上的哪个目录？

我知道我做错了什么，有什么想法吗？

提前致谢

**编辑**

在阅读了一些评论后，我可能做错了？

我需要在 sdcard 上的特定目录中显示一些图像..这个目录不会被导入到画廊....

那么光标在这里没有任何用处吗？

光标仅用于搜索画廊的数据库？

这个对吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:14:27.790

如果图片在您自己的目录中并且 Mediasccanner 没有扫描它们，那么 db 将没有您的图片数据。因此，您不能使用查询来获取这些图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:00:44.500

尝试这个。

首先通过getContentResolver()获取ContentResolver对象；

```
Cursor cursor = cr.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                                        null, null, null, null); 
```

有关更多信息，请查看本[教程](http://androidhub.wordpress.com/2011/09/27/query-mediastore-contentprovider-for-images-stored-in-sdcard/)。

[真的很好的教程](http://mobile.dzone.com/news/displaying-images-sd-card)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-30T16:58:08.033

该应用程序需要

```
 <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# c - 使用套接字发送和接收文件

> ID：12177365
> 
> 赞同：1
> 
> 时间：2012-08-29T11:57:20.367
> 
> 标签：c, sockets

**客户端**在接收文件时使用这部分代码：

```
void do_retr_cmd(int f_sockd){
  int fd;
  ssize_t nread = 0;
  uint32_t fsize, fsize_tmp, total_bytes_read, size_to_receive;
  char *filename = NULL, *conferma = NULL, *filebuffer = NULL;
  char buf[256], dirp[256], t_buf[256];

  memset(dirp, 0, sizeof(dirp));
  memset(buf, 0, sizeof(buf));
  memset(t_buf, 0, sizeof(t_buf));
  printf("Write the name of file to download: ");
  fgets(dirp, BUFFGETS, stdin)
  filename = NULL;
  filename = strtok(dirp, "\n");
  sprintf(buf, "RETR %s", dirp);
  if(send(f_sockd, buf, strlen(buf), 0) < 0){
    perror("Errore durante l'invio del nome del file");
    onexit(f_sockd, 0, 0, 1);
  }
  fsize = 0;
  recv(f_sockd, t_buf, sizeof(t_buf), 0)
  fsize = atoi(t_buf);
  fd = open(filename, O_CREAT | O_WRONLY, 0644);
  fsize_tmp = fsize;
  filebuffer = (char *)malloc(fsize);
  total_bytes_read = 0;
  nread = 0;
  for(size_to_receive = fsize; size_to_receive > 0;){
    nread = read(f_sockd, filebuffer, size_to_receive);
    if(nread < 0){
      perror("read error on retr");
      onexit(f_sockd, 0, 0, 1);
    }
    if(write(fd, filebuffer, nread) != nread){
      perror("write error on retr");
      onexit(f_sockd, 0, 0, 1);
    }
    size_to_receive -= nread;
  }
  close(fd);
  fflush(stdout);
  fflush(stdin);
  memset(buf, 0, sizeof(buf));
  recv(f_sockd, buf, 21, 0)
  printf("%s", buf);
  memset(buf, 0, sizeof(buf));
  memset(t_buf, 0, sizeof(t_buf));
  memset(dirp, 0, sizeof(dirp));
  free(filebuffer);
} 
```

**服务器**在发送文件时会使用这部分代码：

```
void do_server_retr_cmd(f_sockd, m_sockd){
  int fd, rc;
  uint32_t fsize, size_to_send;
  char *filename = NULL, *other = NULL;
  char buf[512], t_buf[256];
  off_t offset;
  struct stat fileStat;

  memset(buf, 0, sizeof(buf));
  memset(t_buf, 0, sizeof(t_buf));
  recv(f_sockd, buf, sizeof(buf), 0)
  other = NULL;
  filename = NULL;
  other = strtok(buf, " ");
  filename = strtok(NULL, "\n");

  if(strcmp(other, "RETR") == 0){
    printf("Ricevuta richiesta RETR\n");
  } else /* do something */

  fd = open(filename, O_RDONLY);

  memset(&fileStat, 0, sizeof(fileStat));
  fileStat.st_size = 0;
  fstat(fd, &fileStat)
  fsize = fileStat.st_size;
  snprintf(t_buf, 255, "%" PRIu32, fsize);
  send(f_sockd, t_buf, sizeof(t_buf), 0)
  offset = 0;
  for (size_to_send = fsize; size_to_send > 0; ){
    rc = sendfile(f_sockd, fd, &offset, size_to_send);
    if (rc <= 0){
      perror("sendfile");
      onexit(f_sockd, m_sockd, fd, 3);
    }
    size_to_send -= rc;
  }
  close(fd);
  fflush(stdout);
  fflush(stdin);
  memset(buf, 0, sizeof(buf));
  strcpy(buf, "226 File transfered\n");
  send(f_sockd, buf, strlen(buf), 0)
  memset(buf, 0, sizeof(buf));
  memset(t_buf, 0, sizeof(t_buf));
} 
```

**--> 省略了错误检查 <--**
我对这两段代码有一个大问题。当我启动主程序时，我必须编写：
1.`retr` *然后按 Enter*
2.`Write the filename to download:` *我写文件名，然后按 Enter*
问题是有时文件下载正确，有时**没有**下载，而是其中的一部分显示在标准输出上（在终端上）。
我不明白为什么我会出现这种奇怪的行为。
PS：我知道我的代码很丑，但我是 C 新手！

我正在 Ubuntu amd64 上开发并使用 GCC-4.6.3（C 语言）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:15:26.680

TCP 连接为您提供了*可靠的双向字节流*，但您的“应用程序消息”的边界不会被保留，这意味着一个`send()`可以在`recv()`另一侧的多个 s 中接收，反之，`send()`可以折叠几个 s成一个`recv()`（你可以收到你发送的最后一个块的一部分）。好消息是您确实收到了您发送的字节，按照您发送它们的顺序。

服务器代码中的行`recv(f_sockd, buf, sizeof(buf), 0);`假定您在此处读取文件名，而实际上您可以获取`256`客户端发送的任何字节。

您需要在裸 TCP 之上施加某种*应用程序级协议。*一个非常简单的方法是在文件内容前面发送一个文本标题，格式如下：

```
file-size file-name\n 
```

因此，您的服务器可以查找第一个换行符，在第一个空格处分割行，并获得预期的字节数，以及将这些字节保存到的文件名。不要忽略该换行符之后的接收缓冲区的其余部分，将其保存到文件中。这也使您可以重新使用该连接进行多个文件传输。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:16:39.297

```
recv(f_sockd, buf, 21, 0)
printf("%s", buf); 
```

这`printf`会打印出大量随机垃圾，因为没有实施实际的协议来控制它接收的内容和打印的内容。例如，如何`printf`知道要打印多少字节？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:17:12.403

我的答案的先前版本不太正确，但这就是您看到奇怪行为的原因。您发送的文件大小为

```
snprintf(t_buf, 255, "%" PRIu32, fsize); 
```

然后你收到

```
recv(f_sockd, t_buf, sizeof(t_buf), 0) 
```

但这不能保证实际读取`sizeof(t_buf)`字节。然后`atoi`有时会返回不正确的大小，并且文件的其余部分被视为状态消息，在末尾打印（直到第一个空字符）。

因为`recv`可能不会一次返回您要求的所有数据，所以您必须检查其返回值并可能重复调用`recv`：

```
size_t to_recv = sizeof(t_buf);
size_t rcvd = 0;
while (to_recv > 0) {
    ssize_t r = recv(f_sockd, t_buf + rcvd, sizeof(t_buf) - rcvd, 0);
    if (r < 0) {
        //error
    }
    else {
        to_recv -= r;
        rcvd += r;
    }
} 
```

显然，您要么必须知道预期有多少数据，要么按照其他答案中的建议提出更好的协议（例如，寻找终止符以确定何时读取大小）。

# sql - Oracle SQL 约束 where 子句

> ID：12177369
> 
> 赞同：3
> 
> 时间：2012-08-29T11:57:39.023
> 
> 标签：sql, oracle, constraints, where, clause

我在 oracle 上有表 Tester，其中包含以下列：

*   测试者ID
*   测试者姓名
*   是默认值
*   应用程序_ID

TesterID 是主键。现在我希望只能有一个 Default Tester，这意味着只有一个 Tester 可以在 ApplicationID 上拥有 IsDefault =Y 的值。

我尝试了一个约束：

```
alter table Tester add constraint Tester_ISDEFAULT UNIQUE(IsDefault,Application_ID); 
```

是否可以在 isdefault= Y 的位置创建唯一键？

感谢帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T12:05:17.420

没有`UNIQUE`约束。但是，您可以使用 a`UNIQUE INDEX`代替：

```
CREATE UNIQUE INDEX ApplicationId_Default_Y ON tester (
  CASE WHEN IsDefault = 'Y'
       THEN ApplicationId
       ELSE NULL
  END
); 
```

这是一个**[演示](http://sqlfiddle.com/#!4/8e6af)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:03:21.300

您可以使用基于函数的唯一索引来执行此操作，而不是这样的约束：

```
create unique index tester_isdefault on tester 
  (case when isdefault='Y' then application_id end); 
```

由于 Oracle 不会为全为空的键创建索引条目，因此只有 isdefault='Y' 的行才会出现在索引中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:02:04.693

该约束不起作用，因为这意味着每个 Application_ID 只能有两行 - 一行 IsDefault=0，另一行 IsDefault=1。

您可以使用触发器强制执行此逻辑。或者，为什么不在您的应用程序逻辑中强制执行它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:03:45.997

在 tester(decode(is_default, 'Y', 0, tester_id), application_id) 上创建唯一索引 tester_ui_1

# php - 树枝函数和传递引用变量

> ID：12177370
> 
> 赞同：1
> 
> 时间：2012-08-29T11:57:44.683
> 
> 标签：php, function, templates, pass-by-reference, twig

情况如下：

```
{% for entry in entries %}
{{ action('entry_modify', entry) }}
{{ entry.title }}
{% endfor %} 
```

action($action, $params) 方法是某种触发器，用于为自己注册一个动作的插件。在这种情况下，我调用“entry_modify”操作，插件使用“entry”参数响应此操作，该参数是一个数组。

```
function plugin(&$params)
{
    $params['title'] = 'changed to ...'; 
} 
```

但据我了解，Twig 不会通过引用传递变量，有没有办法做到这一点？

我想要的只是修改传递给动作函数的变量。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T20:33:01.793

Twig 函数总是通过引用传递对象。您可能会考虑使用对象而不是数组来表示每个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T13:48:38.897

对于你的问题，我可能有一个解决方案。我正在用 Twig 开发一个 Wordpress 主题，我想通过引用传递变量并向它们添加一些数据。我的目标是制作这样的东西

```
{{ load_data('all_posts',foo) }} 
```

我想执行一个名为的函数并将`load_all_posts`该函数的结果分配给`foo`（我作为第二个参数传递的树枝变量）。我也希望以下内容也可以工作：

```
{% set foo = {'bar':'bar'} %}

{#foo is#}
array(1) {
  ["bar"]=>
  string(3) "bar"
}

{{load_data('all_posts',foo.posts)}}

{#foo is#}
array(2) {
  ["bar"]=>
  string(3) "bar"
  ["posts"]=>
  array(3) {
    [0]=>
    string(5) "post1"
    [1]=>
    string(5) "post2"
    [2]=>
    string(5) "post3"
  }
} 
```

因为并非所有变量都通过引用传递给函数。我们不能为此目的使用函数。相反，我创建了自己的标签并像这样使用它：

```
{% set foo = {'bar':'bar'} %}
{% load all_pots in foo.posts %} 
```

要做到以下几点，我们必须做两件事：

*   创建“加载”令牌
*   调用正确的函数并将数据加载到正确的位置

## 创建令牌解析器：

令牌的创建很容易。我们只需要告诉 twig 如何使用以下类解析这个标记：

```
class Load_Data_TokenParser  extends Twig_TokenParser
{
    public function parse(Twig_Token $token)
    {
        $stream = $this->parser->getStream();
        $variable_array = array(); //an array where we'll store the destination variable, as it can be just foo or foo.post, or foo.bar.foo.bar.posts

        $function_name = $stream->expect(Twig_Token::NAME_TYPE)->getValue();  //here we say that we expect a name. In our case it'll be 'all_posts' (the name of the function we will execute)
        $in = $stream->expect(Twig_Token::OPERATOR_TYPE)->getValue();   //here we say that the next thing should be the operator 'in'
        while(Twig_Token::typeToEnglish($stream->getCurrent()->getType()) === 'name'){ //and with this while, we get all the variable names that are separated with '.'
            array_push($variable_array,$stream->getCurrent()->getValue());

            $stream->next();
            $new  = $stream->getCurrent();

            if(Twig_Token::typeToEnglish($new->getType()) === 'punctuation'){
                $stream->next();
            } else {
                break;
            }
        }
        //in our case $variable_array here will be ['foo','posts']

        $stream->expect(Twig_Token::BLOCK_END_TYPE);

        return new Load_Node($variable_array, $function_name, $token->getLine(), $this->getTag());
    }

    public function getTag()
    {
        return 'load';
    }
} 
```

最后，我们返回一个新的“Load_Node”并将其传递`$variable_array, $function_name`给行和当前标签。

## 加载数据

```
class Load_Node extends Twig_Node
{
    public function __construct($variable_array, $function_name, $line, $tag = null)
    {
        $value = new Twig_Node();
        parent::__construct(array('value'=>$value),array(
            'variable_array'=>$variable_array,
            'function_name'=>$function_name
        ),$line,$tag);
    }

    public function compile(Twig_Compiler $compiler)
    {
        $variable_access_string = '';
        $variable_array = $this->getAttribute('variable_array');
        foreach ($variable_array as $single_variable) {
            $variable_access_string.= '[\''.$single_variable.'\']';
        } //here we prepare the string that will be used to access the correct variables. In our case here $variable_access_string will be "['foo']['posts']"

        $compiler
            ->addDebugInfo($this)
            ->write('$context'.$variable_access_string.' = load_'.$this->getAttribute('function_name').'()')
            ->raw(";\n"); //and the here we call load_{function_name} and assign the result to the correct variable
    }
} 
```

目前它仅适用于数组。如果您尝试在对象内加载数据，则会引发异常。稍后我将对其进行编辑并添加对对象的支持。我希望这会帮助你和其他人。祝你今天过得愉快 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-20T15:45:59.327

If you replace your associative array by a simple class instance you're just fine.

```
class Entry {
    public $title;
    // other properties possible
    __construct($title) {
        $this->title = $title
    }
} 
```

then your `$entries` would be an array of Entry instances that will be passed as reference to any function because it's an object, not an array. Your original twig code snippet would be fine then (perfect syntax), and would modify the title.

# php - Zend_Form 装饰器：无法查看错误消息（验证）

> ID：12177372
> 
> 赞同：0
> 
> 时间：2012-08-29T11:57:50.897
> 
> 标签：php, zend-framework, zend-form, decorator, zend-decorators

当我们在 zend 中为表单元素添加装饰器时，验证消息没有显示为什么？

代码示例：

```
$this->addElement('Text', 'Last_Name',array(
        //'decorators' => $this->elementDecoratorsTr,
        'label' => 'Last Name:',
        'required' => false,
        'filters' => array('StringTrim'),
            'validators' => array(array('validator' => 'StringLength','validator' => 'Alpha')) 
        )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:33:06.337

这是`Zend_Form_Element`源代码：

```
$decorators = $this->getDecorators();
if (empty($decorators)) {
    $this->addDecorator('ViewHelper')
        ->addDecorator('Errors')   // notice Errors decorator
        ->addDecorator('Description', array('tag' => 'p', 'class' => 'description'))
        ->addDecorator('HtmlTag', array('tag' => 'dd', 
                                        'id'  => $this->getName() . '-element'))
        ->addDecorator('Label', array('tag' => 'dt'));
} 
```

如果您设置自己的装饰器，则不会加载默认装饰器。

为了查看验证消息，您需要`Errors`在您设置的装饰器中拥有一个装饰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:50:53.183

这是为错误消息设置装饰器的示例：

我们有元素：

```
$title = $this->createElement('text', 'title');
    $title->setRequired(true)
        ->setLabel('Title:')
        ->setDecorators(FormDecorators::$simpleElementDecorators)
        ->setAttrib('maxlength', $validationConfig->form->title->maxlength)
        ->addValidator('stringLength', false, array($validationConfig->form->title->minlength,
                $validationConfig->form->title->maxlength,
                'encoding' => 'UTF-8',
                'messages' => array(
                    Zend_Validate_StringLength::INVALID =>
                    'Title must be between %min% and %max% characters',
                    Zend_Validate_StringLength::TOO_LONG =>
                    'Title cannot contain more than %max% characters',
                    Zend_Validate_StringLength::TOO_SHORT =>
                    'Title must contain more than %min% characters')));                     
    $this->addElement($title); 
```

这是带有表单装饰器的类，你可以在那里做很多：

```
 class FormDecorators {
    public static $simpleElementDecorators = array(
        array('ViewHelper'),
        array('Label', array('tag' => 'span', 'escape' => false, 'requiredPrefix' => '<span class="required">* </span>')),
        array('Description', array('tag' => 'div', 'class' => 'desc-item')),
        array('Errors', array('class' => 'errors')),
        array('HtmlTag', array('tag' => 'div', 'class' => 'form-item'))
    );
    } 
```

# cocoa - NSTableView 奇怪的问题

> ID：12177373
> 
> 赞同：1
> 
> 时间：2012-08-29T11:57:55.153
> 
> 标签：cocoa, nstableview

我已经实现了基于视图的 NSTableView。当我向下滚动时，会在 NSTableView 的底部绘制线条。即使不属于 NSTableView 的按钮的文本也会变暗。我删除了 NSTableView 数据源方法，按钮的文本很好，但仍然在 NSTableView 的底部绘制线条。

我不知道这两个东西有联系。非常感谢您的帮助。谢谢。![在此处输入图像描述](../Images/c1e9a2a8938032e7312565d62e768477.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:17:53.840

这是 NSScrollView 的一般问题，其中包含您的表格视图。

如果 table view 的封闭滚动视图`drawsBackground`属性是`NO`，也取消选中 Copy On Scroll。

如果滚动视图与其他视图重叠，请在该视图上启用核心动画层或消除重叠。

# gwt - GWT RPC 警告检查所有子类型

> ID：12177378
> 
> 赞同：2
> 
> 时间：2012-08-29T11:58:15.027
> 
> 标签：gwt, serialization, rpc

我有一个 gwt 应用程序，在编译期间出现错误：

> 扫描其他依赖项：file:/D:/projects/healthplanel_trunk/clinics-gwt-client/src/com/clinics/gwt/shared/UserServiceAsync.java 计算 'com.clinics.gwt.shared.UserService 的所有可能重新绑定结果' 重新绑定 com.clinics.gwt.shared.UserService 调用生成器 com.google.gwt.user.rebind.rpc.ServiceInterfaceProxyGenerator 为远程服务接口生成客户端代理 'com.clinics.gwt.shared.UserService' 分析 'com.clinics.可序列化类型的 gwt.shared.UserService' 分析方法：public abstract com.clinics.gwt.shared.query.GQueryResult listAdmins(com.clinics.gwt.shared.query.GQueryParams queryParams) 参数：com.clinics.gwt.shared。询问。GQueryParams queryParams com.clinics.gwt.shared.query.GQueryParams 验证可实例化 com.clinics.gwt.shared.query.GQueryParams 分析符合序列化条件的“com.clinics.gwt.shared.query.GQueryParams”类型字段.util.List> 过滤器 java.util.List> 验证实例化 java.util.Vector> 检查 'java.util.Vector>' 的参数检查类型“java.util.Vector”的类型参数 0，因为它直接暴露在此类型或其子类型之一 com.clinics.gwt.shared.query.GFilterBy 验证实例化 com.clinics.gwt.shared.query。 GFilterBy 检查 'com.clinics.gwt.shared.query.GFilterBy' 的参数 检查类型 'com.clinics.gwt.shared.query.GFilterBy' 类型的参数 0因为它直接暴露在这种类型或其子类型之一中 java.io.Serializable 验证实例化 java.util.HashMap [WARN] 检查符合序列化条件的 Object 的所有子类型HashMap [WARN] 检查所有符合序列化条件的 Object 子类型HashMap [WARN] 检查所有符合序列化条件的 Object 子类型

我的代码是：

```
public class GQueryParams implements IsSerializable {
private static final long serialVersionUID = 1L;
private int offset = 0;
private int maxCount = -1; // -1 means all
private ArrayList<GOrderBy> orders = new ArrayList<GOrderBy>();
private ArrayList<NoSqlOrderBy> noSqlOrders = new ArrayList<NoSqlOrderBy>();
private ArrayList<GFilterBy<?>> filters = new ArrayList<GFilterBy<?>>(); 
```

和：

```
public class GFilterBy<T extends Serializable> implements Serializable {
private static final long serialVersionUID = 1L;
private String id;
private GFilterOperation operation;
private T value; 
```

怎么了，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:33:28.977

`GFilterBy<?>`基本上接受所有内容（实现`Serializable`的所有内容），因此生成器必须扫描每个适用类的整个类路径并为每个类生成适当的序列/反序列化代码。

这通常不是您想要的，因此发出警告。

经验法则是始终尽可能具体地使用 GWT-RPC 通过线路发送的类型；`?`显然违反了该规则。

# javascript - MVC3 站点脚本和 CSS 未加载

> ID：12177381
> 
> 赞同：1
> 
> 时间：2012-08-29T11:58:17.920
> 
> 标签：javascript, css, asp.net-mvc-3, deployment

使用 IIS 7.5 将 MVC3 站点部署到 2008 R2 服务器。

基本上没有加载 CSS 和 Javascript 库（例如，在 Firebug 中，CSS 选项卡声明“没有规则”）。

我在其他地方读到 IIS_USR 帐户需要具有查看这些文件的权限，所以我已经：

*   右键单击该站点
*   选择编辑权限
*   选择安全选项卡
*   添加了“IUSR_[machinename]”用户，其中 [machiname] 是服务器名称
*   授予读取和执行权限

也正如在（[ASP.net MVC 中的 MembershipProviders 会影响样式表链接吗？](https://stackoverflow.com/questions/167074/do-membershipproviders-in-asp-net-mvc-affect-stylesheet-links?rq=1 "ASP.net MVC 中的 MembershipProviders 会影响样式表链接吗？")）中回答的那样，我为内容目录添加了一个自动化部分，因此：

```
<location path="Content">
  <system.web>
    <authorization>
      <allow users="*"/>
    </authorization>
  </system.web>
</location> 
```

另外.. 作为最后的手段，我已经修改了 asp.net v4.0 应用程序池以使用 LocalSystem 身份而不是 ApplicationPoolIdentity，以防这是问题，但可惜不是。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:00:48.273

我敢打赌，你已经在你的视图中硬编码了这些资源的 URL，就像这样：

```
<script type="text/javascript" src="/scripts/foo.js"></script> 
```

而不是使用正确的方法 url 助手：

```
<script type="text/javascript" src="@Url.Content("~/scripts/foo.js")"></script> 
```

还要从您的 web.config 中删除`<location>`标签。

备注：您的意思是 IIS 7.5 吗？

# java - 在 Java 中创建类型的通用实例

> ID：12177387
> 
> 赞同：9
> 
> 时间：2012-08-29T11:58:52.440
> 
> 标签：java, generics, types, interface, instance

我有以下Java类

```
public class MyClass <T extends MyInterface> implements RowMapper<MyInterface> 
```

我正在实施以下方法：

```
@Override
public T mapRow(ResultSet rs, int arg1) throws SQLException { 
```

**如何在该类上创建“T”类型的实例？**

我试图定义 T 类型类并使用“myInstance.newInstance()”，但我无法定义它。将类作为参数发送给方法并使用“newInstance()”方法是可行的，但我希望能够这样做而不必将其作为参数传递。谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-29T12:03:07.513

Java 泛型是通过擦除实现的，这意味着在运行时不会有参数类型信息。你不会在运行时知道 T 类（没有这样的 T.class）。因此，您需要将`Class`对象作为方法参数传递才能执行您想要的操作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-29T12:01:30.570

将对象传递给泛型类/函数时，您将丢失有关类型的所有信息。

您可以这样做的唯一方法 - 将`Class`对象传递给构造函数\函数：

```
static class Gen <T>{

    private Class<T> mClass;

    public Gen(Class<T> cls){
        mClass = cls;
    }

    public T get(){
        try{
            return mClass.newInstance();
        }catch(Exception e){
            e.printStackTrace();
            return null;
        }
    }
}

static class A{
    public String name = "A!";
}

public static void main(String[] args) {
    Gen<A> g = new Gen<A>(A.class);
    A a = g.get();
    System.out.println(a.name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:05:16.630

Unfortunately, due to type erasure, you can't do what you want.

You will have to explicitly tell your class which type it needs to instantiate, either by telling it the `Class` or, perhaps more elegantly, giving it a Factory to create instances.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:46:06.963

可以提取在特定子类中绑定 T 的类，尽管这不是很容易：

[http://www.artima.com/weblogs/viewpostP.jsp?thread=208860](http://www.artima.com/weblogs/viewpostP.jsp?thread=208860)

我在这篇文章中有一个稍微好一点的代码版本：

[http://github.com/ISA-tools/jUtils/blob/master/src/main/java/uk/ac/ebi/utils/reflection/ReflectionUtils.java](http://github.com/ISA-tools/jUtils/blob/master/src/main/java/uk/ac/ebi/utils/reflection/ReflectionUtils.java)

[http://github.com/ISA-tools/jUtils/blob/master/src/test/java/uk/ac/ebi/utils/reflection/ReflectionUtilsTest.java](http://github.com/ISA-tools/jUtils/blob/master/src/test/java/uk/ac/ebi/utils/reflection/ReflectionUtilsTest.java)

这种方法也不是很快，所以如果性能是一个问题，一个更粗略的选择可能是在你需要的地方传递 T 和 Class<T> 的实例。

当然得到这样的类之后，你需要使用反射来实例化它。

# actionscript-3 - ActionScript 如何从 ASHX 获取数据

> ID：12177394
> 
> 赞同：1
> 
> 时间：2012-08-29T11:59:08.637
> 
> 标签：actionscript-3, actionscript

使用此代码，我上传选定的 Files 。这没有问题，在上传文件后，我想将“uploadedFilelist”作为 json 或字符串发送到 Actionscript 。问题是我不知道如何将这些数据传递给 Actionscript，而且我也不知道如何在 ActionScript 中获取这些数据。（这是我第一次接触 AS ）

动作脚本代码：

```
package 
{
import flash.external.*;
import flash.net.FileReferenceList;
import flash.net.FileReference;
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.system.Security;
import flash.events.Event;
import flash.events.IOErrorEvent;
import flash.events.SecurityErrorEvent;
import flash.net.FileFilter;
import flash.net.URLRequest;
import flash.net.URLRequestMethod;
import flash.net.URLVariables;

public class MultiSelectClass extends MovieClip
{
    private var fileRefList:FileReferenceList=new FileReferenceList();
    private var myRequest:URLRequest; 
    private var serviceUrl:String ="";
    private var metaData:String="";

    function MultiSelectClass()
    {
        Security.allowDomain("*");

        fileRefList.addEventListener(Event.SELECT,selectHandler);
        fileRefList.addEventListener(Event.COMPLETE,completeHandler);
        myButton.addEventListener(MouseEvent.CLICK,myButtonClick);

        serviceUrl=ExternalInterface.call("MultiFileUploaderFunc.GetServiceUrl");
        myRequest = new URLRequest(serviceUrl);

        metaData = ExternalInterface.call("MultiFileUploaderFunc.GetMetdaData")         
    }

    function myButtonClick(ev:MouseEvent):void
    {
        var swfTypeFilter:FileFilter = new FileFilter("Text Files","*.txt; *.html;*.htm;*.php");
        var allTypeFilter:FileFilter = new FileFilter("All Files (*.*)","*.*");
        fileRefList.browse([swfTypeFilter,allTypeFilter]);
    }

    function selectHandler(e:Event):void
    {
        var vars:URLVariables = new URLVariables();
        myRequest.method = URLRequestMethod.POST;

        for each (var file:FileReference in fileRefList.fileList)
        {
            file.addEventListener(Event.COMPLETE, completeHandler);
            file.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
            file.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);

            vars.fileData = file.data;
            vars.metaData= metaData;
            myRequest.data = vars;

            file.upload( myRequest);
        }
    }

    function completeHandler(e:Event):void
    {                       
        ExternalInterface.call("alert","Ok!");
    }

    private function securityErrorHandler(event:SecurityErrorEvent):void
    {
        ExternalInterface.call("alert","Security Problem !");
    }

    private function ioErrorHandler(event:IOErrorEvent):void
    {
        ExternalInterface.call("alert","I/O Problem !");
    }
}
} 
```

通用处理程序代码：

```
 public class Handler1 : IHttpHandler
 {

public void ProcessRequest(HttpContext context)
{
  if (context.Request.Params["metaData"] == string.Empty)
    return;

  var metaData = context.Request.Params["metaData"];

  var jss = new JavaScriptSerializer();

  var metadataDictionary = jss.Deserialize<dynamic>(metaData);

  var jsFileType = metadataDictionary["FileType"];

  var uploadedFilelist = new List<FileModel>();

  foreach (string file in context.Request.Files)
  {
    var httpFile = context.Request.Files[file];

    if (httpFile.ContentLength == 0)
      continue;

    string savedFileName = Path.Combine(AppDomain.CurrentDomain.BaseDirectory,   "Upload\\", Path.GetFileName(httpFile.FileName));
    httpFile.SaveAs(savedFileName);

    var uploadedFile = new FileModel
    {
      Extension = System.IO.Path.GetExtension(httpFile.FileName),
      Id = ID,
      MimeType = httpFile.ContentType,
      Name = httpFile.FileName,
      FileType = jsFileType
    };

    uploadedFilelist.Add(uploadedFile);
  }

  context.Response.ContentType = "application/json";
  context.Response.Write(jss.Serialize(uploadedFilelist));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:34:11.333

这很简单。您只需添加`DataEvent.UPLOAD_COMPLETE_DATA`事件侦听器并获取数据。

```
fileReference.addEventListener(DataEvent.UPLOAD_COMPLETE_DATA, uploadCompleteHandler);

private function uploadCompleteHandler(event:DataEvent):void {
    trace(event.data); //response data
} 
```

# r - 在循环中使用 source() 来自动加载我的函数？

> ID：12177395
> 
> 赞同：6
> 
> 时间：2012-08-29T11:59:10.757
> 
> 标签：r

我有大约 30 个研究项目的功能，不想打字

`source(paste("C:/functions","/function1.txt",sep=""))`

30 次 where`C:/functions`是我的函数目录，并且`/function1.txt`是一个特定的函数。

我试过了

```
files <- list.files("C:/functions")
sapply(1:length(files),source(paste("C:/functions/",files[i],sep=""))) 
```

它不起作用。错误信息：`Error in match.fun(FUN) : c("'source(paste(\"C:/functions/\", ' is not a function, character or symbol", "' files[i], sep = \"\"), TRUE)' is not a function, character or symbol")`

我也用`for`循环尝试过，它不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T12:16:25.713

如果你有这么多函数的集合，你也可以创建一个 R 包。优点：

*   在函数旁边包含文档的好方法，尤其是在使用[roxygen2](http://cran.r-project.org/web/packages/roxygen2/index.html)时。
*   将代码分发给其他人的简单方法。
*   测试可以包含在源代码中。
*   使用 . 轻松加载所有功能`library`。
*   仅向用户公开顶级功能的能力，仅将低级功能留作内部使用。

有关更多详细信息，请参阅[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T12:08:14.043

seacarmody 的回答略有变化：

```
files <- list.files("C:/functions",full.names=TRUE,pattern="\\.txt")
sapply(files, source) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-29T12:04:43.343

帮助中提供了一些用于获取文件目录的 R 代码`?source`。尤其是：

```
## If you want to source() a bunch of files, something like
## the following may be useful:
sourceDir <- function(path, trace = TRUE, ...) {
    for (nm in list.files(path, pattern = "\\.[RrSsQq]$")) {
        if(trace) cat(nm,":")           
        source(file.path(path, nm), ...)
        if(trace) cat("\n")
     }
} 
```

要调用该函数，只需使用以下内容：

```
sourceDir("C:/function") 
```

你总是可以把函数放在你的 Rprofile 中。

* * *

一个小问题，你有一个文件扩展名`.txt`，这意味着在上面的函数中你可以将模式匹配器更改为：

```
pattern = "\\.txt$" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-29T12:06:35.060

```
files <- list.files("C:/functions")
sapply(files, function(x) source(paste0("C:/functions/", x))) 
```

Note that `sapply` requires a function as the second argument.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T05:05:45.557

也许你会喜欢这个...

```
install.packages('R.utils')
library(R.utils)
sourceDirectory( 'C:/functions', '*.txt' ) 
```

请参阅 ?sourceDirectory 了解采购优势...

```
Arguments

path    
A path to a directory to be sourced.

pattern 
A regular expression file name pattern to identify source code files.

recursive   
If TRUE, subdirectories are recursively sourced first, otherwise not.

envir   
An environment in which the code should be evaluated.

onError 
If an error occures, the error may stop the job, give a warning, or silently be skipped.

verbose 
A logical or a Verbose object.

... 
Additional arguments passed to sourceTo(). 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T12:17:05.587

摆脱“每个文件一个函数”的 Matlab 范式并没有什么坏处。您可以将所有功能放入一个`my_research_functions.R` 文件中，然后执行`source('C:/functions/my_research_functions.R')`

# javascript - 性能：动态脚本注入 vs 服务器渲染脚本

> ID：12177398
> 
> 赞同：0
> 
> 时间：2012-08-29T11:59:26.003
> 
> 标签：javascript, performance

从性能的角度来看，我想了解从服务器加载一段 JS 代码（选项 #1）与在客户端加载同一段代码（选项 #2）之间的区别。

选项 #1：服务器在标签中发送 JS 代码。

选项 #2：服务器将代码作为 JS 字符串 ( `var jsCode = '[code]'`) 发送出去。在浏览器上，加载触发后，会创建一个脚本节点并设置 .text 属性 ( `scriptNode.text = jsCode`)

```
scriptNode = document.createElement('script');
document.body.appendChild(scriptNode);
scriptNode.setAttribute('type', 'text/javascript');
scriptNode.text = jsCode; 
```

从性能角度来看，一种选择是否比另一种更好？例如，在选项 #2 中，我们需要做额外的工作来创建脚本节点并将其添加到 DOM 树中。除了这些之外，性能（时间和内存方面）是否有任何差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:09:12.270

除非有一些我不知道的魔法，否则我认为选项 2 不可能更快 - 您仍然通过网络发送相同数量的数据，您仍在解析脚本块，并且您' 甚至通过修改 DOM（这当然会使用一些内存）来添加额外的步骤。

但是，**如果您异步加载脚本**，选项 2 的性能可能会有所提高*，*因为这不会像内联脚本块那样在解析期间阻塞页面呈现。

# javascript - 如何使用jquery创建一个列表

> ID：12177399
> 
> 赞同：3
> 
> 时间：2012-08-29T11:59:25.843
> 
> 标签：javascript, jquery, html, dom

运行以下代码：

```
$('<div>').append('<ul>').append($('<li>').text('text')); 
```

我想拥有

```
<div>
 <ul>
    <li>text</li>
 </ul>
</div> 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:00:41.180

附加函数的顺序是错误的......您现在将 li 附加到 div 旁边，在 ul 旁边，而不是在其中。

这会更好：

```
var $myList = $('ul').append('<li>text</li>');
$('div').append($myList); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T12:01:21.080

`$('<div>').append('<ul>')`退货`div jQuery object`等等。它用于称为函数链的东西。通常，如果您在 jQuery 中编写，`$(selector).method(...)`它会返回您通过选择器获得的对象，因此您可以编写`$(selector).method1(...).method2(...)`，例如`$(selector).css('color', '#555').text('hello')`，它将颜色设置为元素，然后将文本更改为它。

```
var div = $('<div>');
var ul = $('<ul>').appendTo(div);
var li = $('<li>').text('text').appendTo(ul); 
```

不久：

```
$('<div>').append($('<ul>').append($('<li>').text('text'))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:05:24.440

```
$('<div>').append($('<ul>').append($('<li>').text('text'))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:12:03.653

如果您只想要 div 而不需要参考，`UL`或者`LI`这是一个简单明了的方法：

```
$('<div><ul><li>text</li></ul></div>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:05:28.270

It starts from left to right, so you append `ul` to the `div` and then append `li` to the `div`.
You can fix this using the following.

```
var $ul = $('<ul>');
var $li = $('<li>').text('text');
$ul.append($li);
$('<div>').append($ul); 
```

or in one line: `$('<div>').append($('<ul>').append($('<li>').text('text')));`

[demo](http://jsfiddle.net/ricardolohmann/Hg5Se/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T12:31:56.640

正如我看到的那样，每个人都首先尝试四处走动而不是工作想要的..

这是你的html：

```
<div>
    <ul>
        <li>text</li>
    </ul>
</div> 
```

这是您应该使用的代码

```
var MyString = "Write something here!"
$("someParent").append('<div> <ul> <li> ' + MyString + ' </li> </ul> </div>'); 
```

或者只是做

```
$("someParent").append('<div> <ul> <li> Text </li> </ul> </div>'); 
```

如果您想添加超过 1 个列表项

使用剃刀语法和 MVC：

```
var items = '@foreach(SelectListItem item in (System.Collections.IEnumerable)ViewData["MYItems"]){ <li> @item.Text </li> }';
$("someParent").append('<div> <ul>' + items + '</ul> </div>'); 
```

没有剃刀语法：

```
var items = "<li> A </li>" + 
            "<li> B </li>" + 
            "<li> C </li>" + 
            "<li> D </li>" +  
            "<li> E </li>";
$("someParent").append('<div> <ul>' + items + '</ul> </div>'); 
```

有不止几种方法可以做到这一点，只需选择你想做的事。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T12:50:13.620

Simply use this

```
$("#Div_id").append('<ul>
                         <li>ListItem1</li>
                         <li>ListItem2</li>
                         <li>ListItem3</li>
                         <li>ListItem4</li>
                    </ul>'); 
```

like this if you put this append for an click event you can generate many lists as the clicks

# html - 网站上的 Facebook 公共聊天

> ID：12177404
> 
> 赞同：1
> 
> 时间：2012-08-29T11:59:49.807
> 
> 标签：html, facebook, web, chat, public

我在一些大网站上看到过**Facebook 公共聊天**（例如，靠近一些视频流），*每个*喜欢 Facebook 页面的人都可以与其他“喜欢的人”公开聊天。

我的意思是一个聊天大厅（并且只有一个），每个喜欢的人都可以在上面发帖。我猜 Facebook 页面的管理员被允许管理大厅。

我想知道是否有**特定的免费 API**（？），以及如何在网站上使用**HTML实现它。**

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:27:47.780

你看过 - [https://developers.facebook.com/docs/chat/](https://developers.facebook.com/docs/chat/)吗？
你也可以在这里寻找相关的 Q -
[Integrating Facebook Chat](http://facebook.stackoverflow.com/questions/5052780/integrating-facebook-chat)
[XMPP library for facebook chat](http://facebook.stackoverflow.com/questions/3598900/xmpp-library-for-facebook-chat)

# python-3.x - python2 vs python3函数到方法绑定

> ID：12177405
> 
> 赞同：10
> 
> 时间：2012-08-29T11:59:50.820
> 
> 标签：python-3.x, python-2.x

亲爱的 python 3 专家，

使用 python2，可以执行以下操作（我知道这有点麻烦，但这不是重点：p）：

```
class A(object):
  def method(self, other):
    print self, other

class B(object): pass

B.method = types.MethodType(A().method, None, B)
B.method() # print both A and B instances 
```

使用 python3，没有更多未绑定的方法，只有函数。如果我想要相同的行为，听起来我必须引入一个自定义描述符，例如：

```
class UnboundMethod:
    """unbound method wrapper necessary for python3 where we can't turn
    arbitrary object into a method (no more unbound method and only function
    are turned automatically to method when accessed through an instance)
    """
    def __init__(self, callable):
        self.callable = callable

    def __get__(self, instance, objtype):
        if instance is None:
            return self.callable
        return types.MethodType(self.callable, instance) 
```

所以我可以这样做：

```
B.method = UnboundMethodType(A().method)
B.method() # print both A and B instances 
```

有没有其他方法可以在不写这样的描述符的情况下做到这一点？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:31:44.077

```
B.method = lambda o: A.method(o,A())

b = B()
b.method() 
```

线路`b.method()`然后呼叫`A.method(b,A())`。这意味着每次都会初始化一个 A。为了避免这种情况：

```
a = A()
B.method = lambda o: A.method(o,a) 
```

现在每次在 B 的任何实例上调用 b.method() 时，都会将 A 的相同实例作为第二个参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T08:48:20.073

好吧，您的代码在 Python 2 中也不起作用，但我明白您正在尝试做的事情。您可以使用 lambda，如 Sheena 的回答，或 functools.partial。

```
>>> import types
>>> from functools import partial

>>> class A(object):
...   def method(self, other):
...     print self, other
... 
>>> class B(object): pass
... 
>>> B.method = partial(A().method, A())
>>> B().method()
<__main__.A object at 0x112f590> <__main__.A object at 0x1132190> 
```

# mysql - 基于查询删除特定记录的简单 TRIGGER

> ID：12177406
> 
> 赞同：0
> 
> 时间：2012-08-29T11:59:52.303
> 
> 标签：mysql, sql

MySql 中的触发器有问题。

```
notifications_posts
notification_id from_user   on_post_id  in_group_id date
2   1   162 3   2012-07-11 12:01:08
3   19  163 1   2012-07-11 12:03:26
4   19  164 1   2012-08-10 17:42:36
5   1   165 3   2012-08-29 12:14:01
6   1   165 3   2012-08-29 12:14:29
11  1   2   3   2012-08-29 14:38:42 
```

有时我需要删除帖子，例如使用以下命令：

```
DELETE FROM posts WHERE posts.post_id = 165; 
```

`notification_id`在此之后，我想要一个根据该 ID删除所有记录的触发器。

这是我到目前为止所拥有的：

```
DELIMITER $$
CREATE OR REPLACE TRIGGER CleanNotificationPosts
AFTER DELETE ON posts
FOR EACH ROW
BEGIN
    DELETE FROM notifications_posts WHERE notifications_posts.id = THAT_ID_TO_DELETE;
END $$
DELIMITER ; 
```

我的语法正确吗？我真的需要分隔符吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:04:47.453

1.  > 我真的需要分隔符吗？

    使用您当前拥有的语法：是的，您确实需要使用默认分隔符以外的分隔符`;`- 否则`CREATE TRIGGER`语句将由关键字`;`before终止`END`，这将导致解析错误（因为该`BEGIN ... END`块不会被终止）。

    但是，由于该块内只有一个语句，因此您实际上根本不需要使用`BEGIN ... END`：

    ```
    CREATE OR REPLACE TRIGGER CleanNotificationPosts
    AFTER DELETE ON posts
    FOR EACH ROW
    DELETE FROM notifications_posts WHERE notifications_posts.id = THAT_ID_TO_DELETE; 
    ```

    在这种情况下，不需要更改语句分隔符：`;`确实是`CREATE TRIGGER`语句终止的地方。

2.  > 我的语法正确吗？

    差不多，但不完全。而不是`THAT_ID_TO_DELETE`，您应该使用`OLD.post_id`. 如[`CREATE TRIGGER`语法](http://dev.mysql.com/doc/en/create-trigger.html)中所述：

    > `OLD`您可以使用别名和来引用主题表（与触发器关联的表）中的列`NEW`。`OLD.col_name`在更新或删除之前引用现有行的列。`NEW.col_name`指要插入的新行的列或更新后的现有行。

    此外，`OR REPLACE`在 MySQL 中无效。您可以`DROP TRIGGER IF EXISTS`在执行`CREATE TRIGGER`语句之前改为。

    所以：

    ```
    DROP TRIGGER IF EXISTS CleanNotificationPosts;
    CREATE TRIGGER CleanNotificationPosts
    AFTER DELETE ON posts
    FOR EACH ROW
    DELETE FROM notifications_posts WHERE notifications_posts.id = OLD.post_id; 
    ```

3.  但是，在这种情况下，您实际上根本不需要使用触发器（作为[外键约束](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)就`ON DELETE CASCADE`足够了）：

    ```
    ALTER TABLE notifications_posts
      ADD FOREIGN KEY (id) REFERENCES posts (post_id) ON DELETE CASCADE; 
    ```

    请注意以下先决条件，以添加此类外键约束：

    *   两个表都必须使用 InnoDB 存储引擎；

    *   `posts`表中必须有`post_id`第一列的索引；和

    *   必须有一个匹配的记录`posts.post_id`用于所有非`NULL` `notifications_posts.id`（直到列类型，包括其大小和符号）。

# sql-server-2008 - Scaler 函数总是返回 null

> ID：12177408
> 
> 赞同：0
> 
> 时间：2012-08-29T12:00:00.053
> 
> 标签：sql-server-2008, function, null

我编写了这个标量函数，它根据商品的名称和类别返回商品的价格，但是当我从 select 语句中调用它时，它总是返回 null，这就是函数

```
CREATE FUNCTION [dbo].[GetPrice] (@ItemName nvarchar(250), @ItemCatagory nvarchar(250))

RETURNS float

As

BEGIN 
      Return (select top 1 Price from Stock where Item=@ItemName and Store=@ItemCatagory)
END 
```

这是选择语句

```
Select  SNo,ItemName,Category,dbo.GetPrice(ItemName,Category) From Items 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:53:09.410

我的怀疑是这段代码：

```
Store=@ItemCatagory 
```

在大多数数据库中，不会将称为“Store”的事物与称为“Category”的事物进行比较。也许这应该是：

```
Category = @ItemCategory 
```

# objective-c - 在可可应用程序的主包中以编程方式创建属性列表文件

> ID：12177409
> 
> 赞同：0
> 
> 时间：2012-08-29T12:00:03.470
> 
> 标签：objective-c, ios, cocoa

> **可能重复：**
> [iPhone - 将 NSMutableDictionary 写入文件](https://stackoverflow.com/questions/5361630/iphone-writing-nsmutabledictionary-to-file)

如何在可可应用程序的 MainBundle 中以编程方式创建属性列表文件。我知道如何读取和写入 plist 文件的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:06:18.007

I write arrays to a plist and read it out using code similar to the below. May be useful.

```
- (NSString *)offlineCachePath {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains( NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cache = [paths objectAtIndex:0];
    NSString *path = [cache stringByAppendingPathComponent:@"NameOfApp"];

    // Check if the path exists, otherwise create it
    if (![fileManager fileExistsAtPath:path]) {
        [fileManager createDirectoryAtPath:path withIntermediateDirectories:YES attributes:nil error:nil];
    }

    return path;
}

- (NSString *)cachedStuffPath {
    NSString *cachedStuffPath = [[self offlineCachePath] stringByAppendingPathComponent:@"NameOfFile.plist"];
    return cachedStuffPath;
}

- (NSMutableArray *)getCachedStuff {
    return [[NSArray arrayWithContentsOfFile:[self cachedStuffPath]] mutableCopy];
}

- (void)cacheStuff:(NSMutableArray *)stuff {
    [stuff writeToFile:[self cachedStuffPath] atomically:YES];
} 
```

# ruby-on-rails - 参考键不存在时的 Rails 3.2 和 has_one

> ID：12177414
> 
> 赞同：0
> 
> 时间：2012-08-29T12:00:21.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

下面在 Rails 3.0.x 中工作，在 3.2 中没有

```
class Phone < ActiveRecord::Base
  attr_accessible :phone_number

  has_one :zipcode, :primary_key => :area_code_id, :foreign_key => :area_code

  def area_code_id
    phone_number[0..2]
  end
end 
```

当我打电话时：

```
 - Phone.first.zipcode 
```

查询总是：

```
 - SELECT "zipcodes".* FROM "zipcodes" WHERE "zipcodes"."area_code" IS NULL LIMIT 1 
```

- - - - 编辑 - - - -

```
class Zipcode < ActiveRecord::Base
  attr_accessible :area_code, :city, :zip_code

  has_many :phones, :finder_sql => Proc.new {"SELECT DISTINCT phones.* FROM phones WHERE '#{area_code}' = substr(phones.phone_number, 1,3);"}

end 
```

------ 一些可能的解决方法 ---------

正如迈克尔指出的那样，在新版本的 rails 上，它需要 DB 中的引用键。

所以一个可能的解决方法

```
Phone.select("phones.*, "substring(phones.area_code, 1, 3) as area_code_id").first.zipcode 
```

希望它可以帮助某人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:08:32.510

我认为，如果可以更改模型，您应该拥有/使用一个`id`完全没有“商业意义”的 id 字段（称为 ），例如，不是电话号码或区号或类似的东西。

然后您可以删除该`primary_key`设置。

然后在该特定字段上添加唯一性验证等。

我知道它在一个 Rails 版本而不是另一个版本中工作很痛苦，但使这项工作进入未来的正确途径可能是上述。Rails 真的取决于您是否遵守约定，除非您真的详细了解其内部工作原理以覆盖它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:50:53.540

似乎，唯一的方法是手动定义关联。

```
class Phone < ActiveRecord::Base
  attr_accessible :phone_number

  def zipcode
    Zipcode.where(:area_code => area_code_id)
  end

  def area_code_id
    phone_number[0..2]
  end

end 
```

# java - 如何编写一个按键监听器来跟踪 Java 中的所有击键？

> ID：12177416
> 
> 赞同：21
> 
> 时间：2012-08-29T12:00:23.533
> 
> 标签：java, keylistener, keylogger

我想用 Java 写一个关键的监听器。无论 Java 应用程序是否有焦点，它都应该跟踪所有按键。这可能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T12:22:58.617

这是可能的，但需要一个利用[JNI](https://en.wikipedia.org/wiki/Java_Native_Interface)的实现，而 JNI并不总是可移植的。

[Java System Hook](https://github.com/kristian/system-hook)就是一个这样的库，可以在 Windows 32 和 64 位上工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-29T12:18:43.597

不久前我用过类似的东西。看看[Java System Hook](http://kra.lc/blog/2016/02/java-global-system-hook/)。

它通过 JNI 跟踪全局按键（不仅仅是您的 Java 应用程序）。它对我来说工作得又快又完美

* * *

KeyListener 作为守护线程启动，它不会使应用程序保持活动状态。你的程序中必须有另一个正在运行的非守护线程

例如：

```
GlobalKeyListener globalKeyListener = new GlobalKeyListener();
globalKeyListener.addKeyListener(listener);
while (true) {
    Thread.sleep(1000);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T12:09:42.773

不，Java 无法访问其活动窗口之外的击键。

为此，您必须结合使用 Java 和本机代码，使用 JNI 调用本机代码。在 Microsoft Windows 中，您应该查看`GetAsyncKeyState(key)`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T12:25:06.517

这很有可能，但不使用标准 Java，您必须在本机级别与操作系统进行交互。

这是一个使用[JNA](http://jna.java.net/)访问Windows User32 API 中的[SetWindowsHookEx函数的 Windows 主题。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T12:03:55.793

不，如果 Java 不是活动（聚焦）窗口，Java 不会听按键，所以你不能这样做。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2014-08-15T22:33:20.200

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * keylogger.java
 *
 * Created on Mar 8, 2012, 8:12:20 AM
 */

package main;

import javax.swing.JOptionPane;

/**
 *
 * @author Lab-Admin
 */

public class keylogger extends javax.swing.JFrame {

    /** Creates new form keylogger */
    public keylogger() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        userfield = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        passfield = new javax.swing.JPasswordField();
        btnlogin = new javax.swing.JButton();
        btncancel = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Punk Academy PRoject");
        setBackground(new java.awt.Color(255, 0, 0));
        setFont(new java.awt.Font("Algerian", 1, 14)); // NOI18N
        setForeground(new java.awt.Color(255, 153, 0));

        jPanel1.setBackground(new java.awt.Color(255, 204, 0));

        jLabel1.setBackground(new java.awt.Color(255, 0, 0));
        jLabel1.setFont(new java.awt.Font("Algerian", 1, 24)); // NOI18N
        jLabel1.setText("Punk Academy");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(102, 102, 102)
                .addComponent(jLabel1)
                .addContainerGap(108, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(jLabel1)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel2.setBackground(new java.awt.Color(255, 255, 255));

        jLabel2.setIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\umbrellalast.gif")); // NOI18N

        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel3.setText("username");

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel4.setText("password");

        btnlogin.setIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\Keys.gif")); // NOI18N
        btnlogin.setText("Log in");
        btnlogin.setDisabledIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\Keys.gif")); // NOI18N
        btnlogin.setDisabledSelectedIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\Keys.gif")); // NOI18N
        btnlogin.setIconTextGap(2);
        btnlogin.setPressedIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\Keys.gif")); // NOI18N
        btnlogin.setRolloverIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\Keys.gif")); // NOI18N
        btnlogin.setRolloverSelectedIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\Keys.gif")); // NOI18N
        btnlogin.setSelectedIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\Keys.gif")); // NOI18N
        btnlogin.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnloginActionPerformed(evt);
            }
        });

        btncancel.setIcon(new javax.swing.ImageIcon("D:\\COPRO OLAER\\enrollment system\\exit.png")); // NOI18N
        btncancel.setText("Cancel");
        btncancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btncancelActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel2))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                        .addContainerGap(82, Short.MAX_VALUE)
                        .addComponent(btnlogin, javax.swing.GroupLayout.PREFERRED_SIZE, 104, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)))
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(16, 16, 16)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel3)
                            .addComponent(jLabel4))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(passfield, javax.swing.GroupLayout.DEFAULT_SIZE, 111, Short.MAX_VALUE)
                            .addComponent(userfield, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 111, Short.MAX_VALUE)))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(43, 43, 43)
                        .addComponent(btncancel, javax.swing.GroupLayout.PREFERRED_SIZE, 102, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(46, 46, 46)
                        .addComponent(jLabel2))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(64, 64, 64)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(userfield, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel3))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(passfield, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel4))))
                .addGap(49, 49, 49)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnlogin)
                    .addComponent(btncancel, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnloginActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnloginActionPerformed

        if(evt.getSource()==btnlogin)
        {
            String user = btnlogin.getText();
            String pass = btncancel.getText();

            if(user.equals(user)&&pass.equals(pass))
            {
                this.hide();
                JOptionPane.showMessageDialog(null,"ACCESS GRANTED");
                welcome s2 = new welcome();
                s2.show();
            }
            else
            {
                JOptionPane.showMessageDialog(null,"ACCESS DENIED");
            }
        }

    }//GEN-LAST:event_btnloginActionPerformed

    private void btncancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btncancelActionPerformed
        if(evt.getSource()==btncancel)
        {
            JOptionPane.showMessageDialog(null,"BYE! BYE!");

            System.exit(0);
        }
    }//GEN-LAST:event_btncancelActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new keylogger().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btncancel;
    private javax.swing.JButton btnlogin;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPasswordField passfield;
    private javax.swing.JTextField userfield;
    // End of variables declaration//GEN-END:variables
} 
```

# amazon-web-services - 为 Elastic MapReduce 配置外部数据源

> ID：12177421
> 
> 赞同：10
> 
> 时间：2012-08-29T12:00:43.670
> 
> 标签：amazon-web-services, cassandra, elastic-map-reduce

我们希望在当前数据库之上使用 Amazon Elastic MapReduce（我们在 EC2 上使用 Cassandra）。查看 Amazon EMR 常见问题，应该可以： [Amazon EMR 常见问题： 问：我可以从 Internet 或 Amazon S3 以外的其他地方加载我的数据吗？](http://aws.amazon.com/elasticmapreduce/faqs/#data-4 "Amazon EMR 常见问题解答：问：我可以从 Internet 或 Amazon S3 以外的其他地方加载我的数据吗？")

但是，在创建新的作业流时，我们只能将 S3 存储桶配置为输入数据源。

关于如何做到这一点的任何想法/示例？

谢谢！

PS：我已经看到了这个问题[How to use external data with Elastic MapReduce](https://stackoverflow.com/questions/10918450/how-to-use-external-data-with-elastic-mapreduce)但答案并没有真正解释如何去做/配置它，只是它是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T05:46:22.967

你是如何处理数据的？EMR 只是托管的 hadoop。您仍然需要编写某种过程。

如果您正在编写 Hadoop Mapreduce 作业，那么您正在编写 java 并且您可以使用 Cassandra api 来访问它。

如果你想使用类似 hive 的东西，你需要编写一个 Hive 存储处理程序来使用 Cassandra 支持的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:53:33.923

尝试使用[scp](http://linuxcommand.org/man_pages/scp1.html)将文件复制到您的 EMR 实例：

```
 my-desktop-box$ scp mylocaldatafile my-emr-node:/path/to/local/file 
```

（或使用[ftp](http://linuxcommand.org/man_pages/ftp1.html)，或[wget](http://linuxcommand.org/man_pages/wget1.html)，或[curl](http://linuxcommand.org/man_pages/curl1.html)，或任何你想要的）

[然后使用ssh](http://linuxcommand.org/man_pages/ssh1.html)登录您的 EMR 实例并将其加载到[hadoop](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/FileSystemShell.html#put)中：

```
 my-desktop-box$ ssh my-emr-node
    my-emr-node$ hadoop fs -put /path/to/local/file /path/in/hdfs/file 
```

# spring - Spring 和 Hibernate - 改变方言

> ID：12177423
> 
> 赞同：0
> 
> 时间：2012-08-29T12:00:45.140
> 
> 标签：spring, hibernate

在我们使用 Spring 和 Hibernate 的 web 应用程序中，hibernate 配置在`META-INF/persistence.xml`. 但有一个问题，我们使用了两个不同的数据库，一个用于测试，另一个用于生产。

这是我们的`persistence.xml

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="SpringMVCTest" transaction-type="JTA">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<jta-data-source>java:/comp/env/jdbc/sqliteDS</jta-data-source>
        <class>pl.meble.taboret.model.UserEntity</class>
        <class>pl.meble.taboret.model.WordList</class>
        <class>pl.meble.taboret.model.WordUnit</class>
        <class>pl.meble.taboret.model.ActivateUserAccountPermaLink</class>
        <class>pl.meble.taboret.model.ResetPasswordPermaLink</class>
        <class>pl.meble.taboret.question.QuestionUnit</class>
        <class>pl.meble.taboret.question.OpenQuestion</class>
        <class>pl.meble.taboret.question.MultipleChoiceQuestion</class>
        <class>pl.meble.taboret.question.WithGapsQuestion</class>
        <class>pl.meble.taboret.question.QuestionList</class>
        <class>pl.meble.taboret.answer.AnswerUnit</class>
        <class>pl.meble.taboret.answer.OpenQuestionAnswer</class>
        <class>pl.meble.taboret.answer.MultipleChoiceQuestionAnswer</class>
        <class>pl.meble.taboret.answer.WithGapsQuestionAnswer</class>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="hibernate.dialect" value="pl.meble.taboret.utils.SQLiteDialect" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
            <property name="hibernate.use_sql_comments" value="true" />
            <!-- <property name="hibernate.connection.driver_class" value="${database.driver}"
                /> <property name="hibernate.connection.url" value="${database.url}" /> -->

        <!--     <property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.JTATransactionFactory"/> -->
        <!--<property name="hibernate.transaction.factory_class" value="com.atomikos.icatch.jta.hibernate3.AtomikosJTATransactionFactory"/> -->
        <property name="hibernate.transaction.manager_lookup_class" value="com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup"/>
        </properties>
    </persistence-unit>
</persistence> 
```

那么，是否可以`hibernate.properties`在运行时更改 的值，或者将此值存储在例如`JNDI`资源中？

或者是否有其他方法可以有条件地设置`hibernate.dialect`，例如，对于测试，我们将使用 SQLite 方言，而对于正常部署，他将使用 Postgre 方言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:52:23.453

是的。在 spring 中，您使用 bean 定义实体管理器：

```
<bean id="entityManagerFactory" 
   class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"> 
```

您可以配置该 bean 的属性：

```
<property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
        </props>
</property> 
```

`${hibernate.dialect}`spring 属性在哪里。因此，您可以在启动项目时传递该属性（通过 -Dhibernate.dialect 或将其放置在属性文件中并使用`<context:property-placeholder-configurer>`

# css - IE浏览器模式不同于文档模式

> ID：12177425
> 
> 赞同：0
> 
> 时间：2012-08-29T12:00:50.150
> 
> 标签：css, internet-explorer, cross-browser, browser-support

我正在为客户制作网站。

在 Safari/IE9*8*7/Chrome/Firefox 中测试，一切正常。

我交付了网站，客户打电话给我说有奇怪的图形发生了。我问他的浏览器版本，在我的电脑上检查一切都很好。

所以我去客户端，他的浏览器模式似乎是 IE9 和文档模式 IE7 并且有一些奇怪的效果。

在他办公室的每台电脑上似乎都是一样的。

我从来没有见过这样的IE设置。这很常见吗？他们为什么这样做？我应该支持吗？

如果有人有任何答案，欢迎他们:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:24:59.887

检查这些页面，它们可能有用：

*   [Internet Explorer 如何在文档模式之间进行选择](http://msdn.microsoft.com/en-us/library/ff405803%28v=vs.85%29)
*   [X-UA 兼容性元标记和 HTTP 响应标头](http://msdn.microsoft.com/en-us/library/ff955275%28v=vs.85%29)
*   [定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)

所以，不确定，但我认为您可以将其添加到`<head>`HTML 文档的一部分：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" > 
```

# php - Symfony2 Forms - 在 javascript 中提交克隆的字段

> ID：12177429
> 
> 赞同：0
> 
> 时间：2012-08-29T12:00:58.633
> 
> 标签：php, symfony, symfony-forms

我有一个名为 Document 的实体，它有名为“date”、“number”等的字段。

在页面上，用户可以从 FORM 添加新文档，这很容易，但是（！）我需要允许用户克隆字段并一次添加几个文档，用户可以多次按下“添加”（它是在表单中克隆字段）按钮，我想在控制器中添加所有这些实体。

这是我的 FormType 类：

```
public function buildForm(FormBuilderInterface $builder, array $option) {
    $builder->add('date', 'text', array(
        'required'  =>  false,
        'attr'  =>  array(
            'class' =>  'datepicker no-right-margin'
        )
    ));
    $builder->add('number', 'text', array(
        'required'  =>  false
    ));
    ...
}

public function getName()
{
    return 'documenttype';
} 
```

我试图硬编码输入的名称：

> 文件类型[日期]

至

> 文档类型[日期][0] 文档类型[日期][1] ...等

...但它不起作用。它给了我

```
 object(Ewidencja\CoreBundle\Entity\Document)#406 (8) {
  ["id":protected]=>
  NULL
  ["date":protected]=>
  array(2) {
    [0]=>
    string(10) "2012-08-01"
    [1]=>
    string(10) "2012-08-02"
  }
  ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:02:37.170

请参阅[*如何嵌入表单集合*](http://symfony.com/doc/master/cookbook/form/form_collections.html)食谱条目。您对该[`allow_add`](http://symfony.com/doc/master/reference/forms/types/collection.html#allow-add)选项感兴趣的特定性。

# c# - 黑白命令字段和模板字段的区别

> ID：12177432
> 
> 赞同：2
> 
> 时间：2012-08-29T12:01:07.247
> 
> 标签：c#, asp.net, gridview

网格视图中的命令字段和模板字段有什么区别，如何在网格视图中使用它们？

我是 c# 的新手，所以请提供全面的帮助，这样我就可以轻松地使用两者。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:09:15.357

A[`CommandField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandfield.aspx) 可以显示命令按钮以在数据绑定控件中执行选择、编辑、插入或删除操作。

A[`TemplateField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.aspx)可以在数据绑定控件中显示自定义内容。例如，您可以在其中嵌套另一个控件`GridView`或`WebUserControl`由几个其他控件组成的自定义控件。

简而言之：

*   a`CommandField`为编辑/删除等特殊操作自动生成按钮或链接
*   a`TemplateField`是非常可定制的，你可以在那里放任何东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:11:12.880

模板字段是您在 gridview 列中添加控件的字段。命令字段是您了解哪个控件在 girdview 中生成事件的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:05:43.387

在[模板字段中](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield%28v=vs.100%29.aspx)您可以放置​​任何 asp.net 控件，您可以自定义它。

来自 MSDN：

`Represents a field that displays custom content in a data-bound control.`

[命令字段](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandfield.aspx)：

来自 MSDN：

`Represents a special field that displays command buttons to perform selecting, editing, inserting, or deleting operations in a data-bound control.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-27T11:54:08.663

模板字段：- 如果您想在 GridView 中执行更多操作，例如编辑、显示图像等，那么您必须使用模板字段。

# android - 使用android的高层建筑

> ID：12177434
> 
> 赞同：1
> 
> 时间：2012-08-29T12:01:19.647
> 
> 标签：android, google-maps

我需要开发应用程序来计算海拔高度，我使用这个代码，但它从海底计算海拔高度

```
private double getElevationFromGoogleMaps(double longitude, double latitude) {
    double result = Double.NaN;
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    String url = "http://maps.googleapis.com/maps/api/elevation/"
            + "xml?locations=" + String.valueOf(latitude)
            + "," + String.valueOf(longitude)
            + "&sensor=true";
    HttpGet httpGet = new HttpGet(url);
    try {
        HttpResponse response = httpClient.execute(httpGet, localContext);
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream instream = entity.getContent();
            int r = -1;
            StringBuffer respStr = new StringBuffer();
            while ((r = instream.read()) != -1)
                respStr.append((char) r);
            String tagOpen = "<elevation>";
            String tagClose = "</elevation>";
            if (respStr.indexOf(tagOpen) != -1) {
                int start = respStr.indexOf(tagOpen) + tagOpen.length();
                int end = respStr.indexOf(tagClose);
                String value = respStr.substring(start, end);
                result = (double)(Double.parseDouble(value)*3.2808399); // convert from meters to feet
            //    result = (double)(Double.parseDouble(value));
            }
            instream.close();
        }
    } catch (ClientProtocolException e) {} 
    catch (IOException e) {}

    return result;
} 
```

任何人都可以帮助我如何从地面计算海拔高度......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:11:44.183

谷歌等此类服务只能为您提供海拔高度。如果要计算建筑物的高度，则必须使用带有*气压计*传感器的设备，该设备可以测量大气压力。请参阅[http://developer.android.com/reference/android/hardware/SensorEvent.html](http://developer.android.com/reference/android/hardware/SensorEvent.html)和`Sensor.TYPE_PRESSURE`. 我不知道实际上有这样一个传感器的设备......或者你可以使用高度计或者查看建筑物的计划（如果它是一个特定的建筑物）。

# apache - 重写规则，不包括条件

> ID：12177437
> 
> 赞同：0
> 
> 时间：2012-08-29T12:01:27.403
> 
> 标签：apache, mod-rewrite

有以下重写规则

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !/(js|css|images)/

RewriteRule section/([0-9a-zA-Z_-]+)$ /index.php?controller=section&method=index&param=$1
RewriteRule category/([0-9a-zA-Z_-]+)$ /index.php?controller=category&method=products&param=$1
RewriteRule ([0-9a-zA-Z_-]+)/([0-9a-zA-Z_-]+)/(.*)$ /index.php?controller=$1&method=$2&param=$3
RewriteRule ([0-9a-zA-Z_-]+)/([0-9a-zA-Z_-]+)$ /index.php?controller=$1&method=$2 
```

现在，当我调用 /js/jquery.js 时，我得到了文件。但是，如果文件是更深一层的文件夹，例如。/js/fancybox/jquery.fancybox-1.3.4.pack.js，它没有。它与部分和类别规则有关，因为当我删除这两行时一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:06:15.123

您需要为每个规则重复条件，该条件仅适用于紧随其后的规则。当您删除 2 部分和类别规则时它起作用的原因是因为条件被应用于第 3 条规则（这让您感到困惑）。您需要为每个规则重复条件：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !/(js|css|images)/
RewriteRule section/([0-9a-zA-Z_-]+)$ /index.php?controller=section&method=index&param=$1

RewriteCond %{REQUEST_URI} !/(js|css|images)/
RewriteRule category/([0-9a-zA-Z_-]+)$ /index.php?controller=category&method=products&param=$1

RewriteCond %{REQUEST_URI} !/(js|css|images)/
RewriteRule ([0-9a-zA-Z_-]+)/([0-9a-zA-Z_-]+)/(.*)$ /index.php?controller=$1&method=$2&param=$3

RewriteCond %{REQUEST_URI} !/(js|css|images)/
RewriteRule ([0-9a-zA-Z_-]+)/([0-9a-zA-Z_-]+)$ /index.php?controller=$1&method=$2 
```

# php - 使用数组维护Parenmt子关系

> ID：12177440
> 
> 赞同：0
> 
> 时间：2012-08-29T12:01:40.490
> 
> 标签：php, wordpress

如何重新排列以下数组

```
Array
(
[0] => Array
    (
        [0] => 1
        [1] =>  Electronic
        [2] =>  0
    )

[1] => Array
    (
        [0] => 2
        [1] =>  mobile
        [2] =>      1
    )

[2] => Array
    (
        [0] => 3
        [1] =>  Tv
        [2] =>      1
    )

[3] => Array
    (
        [0] => 4
        [1] =>  smartphone
        [2] =>  2
    )

[4] => Array
    (
        [0] => 5
        [1] =>  freeze
        [2] =>      1
    )

[5] => Array
    (
        [0] => 6
        [1] =>  lg
        [2] =>      5
    )

[6] => Array
    (
        [0] => 7
        [1] =>  philips
        [2] =>  3
    )

[7] => Array
    (
        [0] => 8
        [1] =>  Onida
        [2] =>      3
    )

[8] => Array
    (
        [0] => 9
        [1] =>  Samsung
        [2] =>  3
    )

[9] => Array
    (
        [0] => 10
        [1] =>  Apple
        [2] =>      4
    )

[10] => Array
    (
        [0] => 11
        [1] =>  Apple 1.0
        [2] =>  10
    )

[11] => Array
    (
        [0] => 12
        [1] =>  Sasmung flat
        [2] =>  9
    ) 
```

创建具有父子关系的父子关系，并将其保存在数据库中。我想将它们保存为 Wordpress 类别并在 wp-admin 类别中显示结果，因为显示类别。期待帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:31:17.257

为什么不[注册一个新的分类法](http://codex.wordpress.org/Function_Reference/register_taxonomy)？确保分层设置为真。

# sql - SQL Query 也可以获取空类别

> ID：12177444
> 
> 赞同：0
> 
> 时间：2012-08-29T12:01:52.830
> 
> 标签：sql, join, group-by

在我的`categories`桌子上，我有：`cat_id`, `cat_name`, `cat_slug`. 在表中`items`我有：`item_title,` `item_id`, `item_category`。

```
`item_category` = `cat_id` 
```

我正在使用以下 SQL 来获取“所有”类别以及它们有多少项目：

```
SELECT *, COUNT(`item_id`) 
FROM `menu_categories` 
    JOIN `menu_items` ON `item_category` = `cat_id` 
GROUP BY `item_category` 
```

但它不显示 empty `categories`，即`categories`没有项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:03:32.997

您需要使用`LEFT JOIN`而不是`JOIN`

```
SELECT *, COUNT(`item_id`) 
FROM `menu_categories`
  LEFT JOIN `menu_items` ON `item_category` = `cat_id`
GROUP BY `item_category` 
```

查看[SQL 连接的可视化解释。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T12:03:52.080

使用左连接

```
SELECT *, COUNT(`item_id`) 
FROM `menu_categories` 
    LEFT JOIN `menu_items` 
        ON `item_category` = `cat_id` 
GROUP BY `item_category` 
```

# javascript - 在 javascript 中使用 or 语句定义变量

> ID：12177448
> 
> 赞同：0
> 
> 时间：2012-08-29T12:02:05.527
> 
> 标签：javascript

有人可以解释一下为什么我的代码不能按我的意愿工作吗？

```
test = function(argument){
var arg = argument || true;
console.log(arg)
};
test(false); 
```

并且返回总是正确的。我认为只有当争论是真实的`'undefined'`？感谢您的回答！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:03:18.240

`||`是逻辑或运算符。所以`false OR true`评估为`true`。

`undefined`也是`falsey`，所以它是返回运算符右侧的简写。

你可能想要这个

```
var arg = typeof argument !== 'undefined' ? argument : true; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T12:03:35.437

`true`如果`argument`是*falsy* ，它将打印，即：

*   `false`
*   `null`
*   `undefined`
*   空字符串
*   数字`0`
*   数字`NaN`

例如：

```
'' || true 
```

将评估为`true`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:06:49.983

将其更改为：

```
var arg=(typeof argument!=='undefined'?argument:true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:03:33.610

从逻辑上讲，任何`ORed`带有.`true``true`

让我们看看 A 和 B 的真值表

```
A   B  A || B 
T   T    T     <-- one of them is true
T   F    T     <-- one of them is true
F   T    T     <-- one of them is true
F   F    F     <-- only both false can create a false in an OR operation. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T12:06:08.193

```
var test = function(argument){
  var arg = typeof argument === "undefined" ? true : argument;
  console.log(arg);
}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T12:08:07.580

根据[ECMA-262 11.11](http://es5.github.com/#x11.11)，逻辑 OR 语句返回第一个 truethy 表达式的**值**，或者如果没有前一个表达式是 truethy，则返回最后一个表达式的值。

# java - 如何在java中找到拆分的存档？

> ID：12177462
> 
> 赞同：0
> 
> 时间：2012-08-29T12:02:51.190
> 
> 标签：java, zip, archive

在java中，我需要找到给定的存档是否是拆分存档。我需要所有存档格式，如 zip、rar、tar、tar.gz、tar.Z。

[Zip4j](http://www.lingala.net/zip4j/)仅用于识别拆分的 zip。对于其他格式的存档，我需要 API。

请帮我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:13:29.670

为了找到拆分后的 Rar 文件，我找到了一个 API。

更多细节 [https://github.com/edmund-wagner/junrar](https://github.com/edmund-wagner/junrar)

这个项目有选项来查找拆分和加密的 rar 存档。

但对于其他存档格式仍在搜索。

# eclipse-emf - EMF 中的枚举数据类型

> ID：12177465
> 
> 赞同：1
> 
> 时间：2012-08-29T12:03:04.780
> 
> 标签：eclipse-emf

如何获取有关枚举类型属性的信息？

我有一个`EClass`带有枚举类型的属性。我知道您可以使用以下代码来确定属性的类型

```
EDataType type = attr.getEAttributeType();
if (type == EcorePackage.Literals.EINT);
//do something
if (type == EcorePackage.Literals.EENUM);
// do something 
```

但是行 ( `type == EcorePackage.Literals.EENUM`) 不起作用，因此我想知道如何确定属性是 eEnum 的类型，给定任何 Ecore 元模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:36:15.850

对于枚举类型，您可以使用以下任一种：

```
type instanceof EEnum
type.eClass() == EcorePackage.eINSTANCE.getEEnum() 
```

# android - 为什么我在 SQLite 中得到一个 Finalizing a cursor that has not been deactivate or closed 错误？

> ID：12177471
> 
> 赞同：0
> 
> 时间：2012-08-29T12:03:14.017
> 
> 标签：android, database, sqlite, exception, cursor

我是 android 的菜鸟，我遇到了令人沮丧的 IllegalArgumentException。logcat 说正在完成尚未停用或关闭的游标。我已经阅读了有关 stackoverflow 的所有相关问题，但仍然无法弄清楚发生了什么。任何帮助是极大的赞赏。

带来错误的代码：

```
 public void add(){
    boolean didItWork = true;
    try {
        //String name = sqlName.getText().toString();
        //String hotness = sqlHotness.getText().toString();
        calculateaddentry();
        String coin = addcoinselection.getSelectedItem().toString();
        String quantity = sqlAddCoin.getText().toString();
        String ounces = entryounces;
        String value = denomination + newentryvalue;

        //PortfolioDatabase entry = new PortfolioDatabase(Portfolio.this);
        info.open();
        info.createEntry(coin, quantity, ounces, value);
        info.close();

        info.open();
        String data = info.getData();
        info.close();
        info.open();
        String ccoin = info.getCoin();
        info.close();
        info.open();
        String cqty = info.getQty();
        info.close();
        info.open();
        String counces = info.getOunces();
        info.close();
        info.open();
        String cvalue = info.getValue();
        info.close();

        currentcoin.setText(ccoin);
        currentqty.setText(cqty);
        currentounces.setText(counces);
        currentvalue.setText(cvalue);

    } catch (Exception e) {
        didItWork = false;
        String error = e.toString();
        Dialog d = new Dialog(this);
        d.setTitle("Dang it!");
        TextView tv = new TextView(this);
        tv.setText(error);
        d.setContentView(tv);
        d.show();
    } finally {
        if (didItWork) {
            /*Dialog d = new Dialog(this);
            d.setTitle("Heck Yea!");
            TextView tv = new TextView(this);
            tv.setText("Success");
            d.setContentView(tv);
            d.show();*/
        }
    }} 
```

我的投资组合数据库 java:

```
public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "cointype_name";
public static final String KEY_QUANTITY = "cointype_quantity";
public static final String KEY_OUNCES = "cointype_ounces";
public static final String KEY_VALUE = "cointype_value";

private static final String DATABASE_NAME = "PortfolioDatabase";
private static final String DATABASE_TABLE = "cointypeTable";
private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_QUANTITY  + " TEXT NOT NULL, " +
                KEY_OUNCES + " TEXT NOT NULL, " +
                KEY_VALUE + " TEXT NOT NULL);"
        );  
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }       
}

public PortfolioDatabase(Context c){
    ourContext = c;
}

public PortfolioDatabase open() throws SQLException{
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();      
    return this;
}
 public void close(){
     ourHelper.close();

 }

public long createEntry(String coin, String quantity, String ounces, String value) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, coin);
    cv.put(KEY_QUANTITY, quantity);
    cv.put(KEY_OUNCES, ounces);
    cv.put(KEY_VALUE, value);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iOunces = c.getColumnIndex(KEY_OUNCES);
    int iValue = c.getColumnIndex(KEY_VALUE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + /*c.getString(iRow) + " " +*/ c.getString(iName) + " " + c.getString(iQuantity) + " " + c.getString(iOunces) + " " + c.getString(iValue) + "\n";
    }
    c.close();

    return result;
}

public String getCoin() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iOunces = c.getColumnIndex(KEY_OUNCES);
    int iValue = c.getColumnIndex(KEY_VALUE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + /*c.getString(iRow) + " " +*/ c.getString(iName).substring(0, Math.min(18, c.getString(iName).length())) + "\n";
    }
    c.close();
    return result;
}

    public String getQty() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iQuantity = c.getColumnIndex(KEY_QUANTITY);
        int iOunces = c.getColumnIndex(KEY_OUNCES);
        int iValue = c.getColumnIndex(KEY_VALUE);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + /*c.getString(iRow) + " " +*/ c.getString(iQuantity) + "\n";
        }           
    c.close();
    return result;
}

    public String getOunces() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iQuantity = c.getColumnIndex(KEY_QUANTITY);
        int iOunces = c.getColumnIndex(KEY_OUNCES);
        int iValue = c.getColumnIndex(KEY_VALUE);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + /*c.getString(iRow) + " " +*/  c.getString(iOunces) + "\n";
        }
        c.close();
        return result;
    }

    public String getValue() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iQuantity = c.getColumnIndex(KEY_QUANTITY);
        int iOunces = c.getColumnIndex(KEY_OUNCES);
        int iValue = c.getColumnIndex(KEY_VALUE);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + /*c.getString(iRow) + " " +*/ c.getString(iValue) + "\n";
        }           
        c.close();
    return result;
}

public String getSingleValue(String aCoin) throws SQLException{
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE};     
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NAME + "=" + aCoin, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iQuantity = c.getColumnIndex(KEY_QUANTITY);
    int iOunces = c.getColumnIndex(KEY_OUNCES);
    int iValue = c.getColumnIndex(KEY_VALUE);

    if (c != null){
        c.moveToFirst();
        result= c.getString(0);
        return result;
    }
    c.close();
    return null;
}

public String getHotness(long l) throws SQLException{
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_VALUE };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
    if (c != null){
        c.moveToFirst();
        String hotness = c.getString(2);
        return hotness;
    }
            c.close();
    return null;
}

//public void updateEntry(String mCoin, String mQuantity, String mValue) throws SQLException{
    // TODO Auto-generated method stub
//  ContentValues cvUpdate = new ContentValues();
//  cvUpdate.put(KEY_NAME, mCoin);
//  cvUpdate.put(KEY_QUANTITY, mQuantity);
//  cvUpdate.put(KEY_VALUE, mValue);
//  ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_NAME + "=" + mCoin, null); 
//}

public void updateEntry(String mCoin, String mQuantity, String mOunces, String mValue) throws SQLException{
    // TODO Auto-generated method stub
    String[] whereArgs = new String[] { mCoin };
    ContentValues cvUpdate = new ContentValues();
    cvUpdate.put(KEY_NAME, mCoin);
    cvUpdate.put(KEY_QUANTITY, mQuantity);
    cvUpdate.put(KEY_OUNCES, mOunces);
    cvUpdate.put(KEY_VALUE, mValue);
    ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_NAME + "=?", whereArgs);   
}

public void changeCurrency(String mCoin, String mValue) throws SQLException{
    // TODO Auto-generated method stub
    String[] whereArgs = new String[] { mCoin };
    ContentValues cvUpdate = new ContentValues();
    cvUpdate.put(KEY_NAME, mCoin);      
    cvUpdate.put(KEY_VALUE, mValue);
    ourDatabase.update(DATABASE_TABLE, cvUpdate, KEY_NAME + "=?", whereArgs);   
}

//public void deleteEntry(String coin) throws SQLException{
    // TODO Auto-generated method stub
//  ourDatabase.delete(DATABASE_TABLE, KEY_NAME + "=" + coin, null);
//}

public void deleteEntry(String coin) throws SQLException{
    String[] whereArgs = new String[] { coin };
    ourDatabase.delete(DATABASE_TABLE, KEY_NAME + "=?", whereArgs);
}

public void removeAll()
{
    /*// db.delete(String tableName, String whereClause, String[] whereArgs);
    // If whereClause is null, it will delete all rows.
    SQLiteDatabase db = helper.getWritableDatabase(); // helper is object extends SQLiteOpenHelper
    db.delete(DatabaseHelper.TAB_USERS, null, null);
    db.delete(DatabaseHelper.TAB_USERS_GROUP, null, null);*/
    ourDatabase.delete(DATABASE_TABLE, null, null);

} 
```

日志猫：

```
08-29 04:20:45.583: E/Cursor(1899): Finalizing a Cursor that has not been deactivated or closed. database = /data/data/com.example.portfolio/databases/PortfolioDatabase, table = cointypeTable, query = SELECT _id, cointype_name, cointype_quantity, cointype_ounces, cointype_value FROM cointypeTable
08-29 04:20:45.583: E/Cursor(1899): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
08-29 04:20:45.583: E/Cursor(1899):     at android.database.sqlite.SQLiteCursor.<init>(SQLiteCursor.java:210)
08-29 04:20:45.583: E/Cursor(1899):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
08-29 04:20:45.583: E/Cursor(1899):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
08-29 04:20:45.583: E/Cursor(1899):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
08-29 04:20:45.583: E/Cursor(1899):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
08-29 04:20:45.583: E/Cursor(1899):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
08-29 04:20:45.583: E/Cursor(1899):     at com.example.portfolio.PortfolioDatabase.getData(PortfolioDatabase.java:79)
08-29 04:20:45.583: E/Cursor(1899):     at com.example.portfolio.Portfolio.fillcoinstoadd(Portfolio.java:1472)
08-29 04:20:45.583: E/Cursor(1899):     at com.example.portfolio.Portfolio$9.onClick(Portfolio.java:575)
08-29 04:20:45.583: E/Cursor(1899):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
08-29 04:20:45.583: E/Cursor(1899):     at android.os.Handler.dispatchMessage(Handler.java:99)     08-29 04:20:45.583: E/Cursor(1899):  at android.os.Looper.loop(Looper.java:123)
08-29 04:20:45.583: E/Cursor(1899):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-29 04:20:45.583: E/Cursor(1899):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 04:20:45.583: E/Cursor(1899):     at java.lang.reflect.Method.invoke(Method.java:521)
08-29 04:20:45.583: E/Cursor(1899):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-29 04:20:45.583: E/Cursor(1899):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-29 04:20:45.583: E/Cursor(1899):     at dalvik.system.NativeStart.main(Native Method)
08-29 04:20:48.413: W/KeyCharacterMap(1899): No keyboard for id 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:05:44.523

To Overcome this problem close the cursor in getData Method() before return result.

```
c.close()
return result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:48:20.710

光标`getHotness()`永远不会关闭。

作为一般说明，您还应该确保即使抛出异常也关闭游标。这意味着将`close()`调用放在一个`finally`块中，如下所示：

```
Cursor c = ...
try {
    // use the cursor
} finally {
    c.close();
} 
```

# android - 从列表视图中获取所选项目

> ID：12177483
> 
> 赞同：0
> 
> 时间：2012-08-29T12:03:50.520
> 
> 标签：android, listview

我已经使用自定义适配器在 android 中实现了列表视图。在每个有两个或多个字段。我想获得点击的特定字段。怎么可能？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:11:46.850

放

```
 setOnItemClickListener 
```

在列表视图上。例如

```
listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,long id) {

                //"Here you will get the position on which you have clicked"
// and if you want the item at that position you have to **adapter.getItem(position)**
            }

    }); 
```

看看它是否适合你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:16:13.230

尝试这个 ：

```
 lstvw.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
                          String selectedFromList =   (String) lstvw.getItemAtPosition(myItemInt);

                          System.out.println("array:> > >  > > > >========================>"+selectedFromList);
                      }

                  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:20:45.290

您需要实现 OnItemClickListener 并覆盖 onItemClick 方法。像这样覆盖 onItemClick 方法：

```
@Override
public void onItemClick(AdapterView<?> adapter, View view, int position,
        long id) {
    yourList.get(position);//This will give you object on specfic pisition clicked
    Intent myIntent = new Intent(getBaseContext(), classToCallOnClick.class);
    .  
              .  
              .  
              .
} 
```

希望对你有帮助.....

# drupal - Drupal 菜单激活

> ID：12177489
> 
> 赞同：0
> 
> 时间：2012-08-29T12:04:06.980
> 
> 标签：drupal, drupal-7, drupal-navigation

我有一个可能很常见的问题。例如，如果有材料类型“新闻”和由显示新闻预告片的视图制作的页面。我们有菜单项“新闻”，它链接到我们的查看页面，并有 url example.com/news。每个新闻页面都有类似 example.com/news/[news title] 的 URL。我们如何将菜单项“新闻”设置为在此类页面/新闻/[新闻标题]上处于活动状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:10:01.960

[Menu Trail By Path](http://drupal.org/project/menu_trail_by_path)模块正是这样做的：

> 该模块根据当前 url 设置菜单项的活动轨迹。

我已经用了很长时间了，效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:50:14.163

我推荐[上下文](http://drupal.org/project/context)模块。它允许您根据 url、视图、内容类型等设置活动跟踪。非常强大的界面。

# html - 网页需要的文件放在哪里

> ID：12177492
> 
> 赞同：4
> 
> 时间：2012-08-29T12:04:16.840
> 
> 标签：html, apache, tomcat

我有一些 PHP 和 HTML 页面需要访问一些文件（例如图像文件）并显示它们。

我应该把这些文件放在哪里？据我所知，不建议（出于安全原因）让网页访问服务器文件系统中的文件（例如在`home`目录中）。

我需要将文件（图像）放在我有权创建新文件的文件夹中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T12:11:18.303

您需要将文件放在服务器的虚拟目录中，例如，如果您使用 XAMPP，则将文件放在“htdocs”文件夹中。如果您使用的是 WAMP，请将您的文件放在“www”中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T08:13:26.863

在您的 www 文件夹中添加一个目录并将您的网页放在那里。然后您可以以 localhost/foldername/page 的身份访问页面

# java - 设备跟踪协议

> ID：12177493
> 
> 赞同：0
> 
> 时间：2012-08-29T12:04:18.837
> 
> 标签：java, m2m

我想创建一个服务器，通过它我可以跟踪设备（移动设备、车辆等）。我如何创建一个可以接受来自所有类型设备的命令的协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:12:06.757

最简单的解决方案是支持 TCP 或 UDP 请求，假设它们支持 IP。我建议先让 TCP 工作。我会以您能想到的最简单的文本或二进制格式发送您需要发送的内容。

如果他们不支持 IP，我建议创建一个支持他们已经支持的传输的网关，并将其传递给 TCP，这样您的服务器就有一个通用的传输和协议可以与之通信。

# ruby-on-rails - Rails 协会 - 用户 + 个人资料

> ID：12177494
> 
> 赞同：0
> 
> 时间：2012-08-29T12:04:28.850
> 
> 标签：ruby-on-rails, activerecord, associations

Rails 新手，我已阅读关联手册并试图找到为什么我的关联不起作用的答案。

我选择将 Profile 与用户分开，以便于关联到不同的用户类型和功能——我将为每种类型的用户提供 3-4 个不同的模型。

我有：

使用称为 Temper Dashboard View 的设计配置文件模型的用户模型

如果我试图从仪表板上的 Profile 模型中为当前用户调用信息，如果我正确阅读指南，则下面的代码“应该”工作。

错误是：

```
enter code hereundefined method `temp_phone_n' for #<User:0x007fbb8c62e4c8> 
```

我看到它正在获取当前用户并尝试关联它但无济于事。谁能告诉我哪里出错了。

以下：

用户.rb

```
 class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me,
                    :first_name, :last_name, :profile_name, :user_id
  # attr_accessible :title, :body

    has_one :temper

  def full_name
    first_name + " " + last_name
  end      
end 
```

脾气.rb

```
class Temper < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :temp_about, :temp_avail, :temp_city, :temp_country, :temp_email, :temp_phone_d, :temp_phone_n, :temp_pors, :temp_skills, :temp_st_address_1, :temp_st_address_2, :user_id

  has_one :user

end 
```

仪表板/index.html.erb

```
<div class="span5">

    <ul>

    <li><h4>Name:</h4> <%= current_user.full_name %></li>
    <li><h4>Phone Number:</h4> <%= current_user.temp_phone_n %></li>
    <li><h4>Email:</h4>  <%= current_user.email %></li>
    <li><h4>City:</h4>  Toronto</li>
    <li><h4>Member Since:</h4>  <%= current_user.created_at.strftime("%B %d, %Y") %></li>

    </ul>
    </div> 
```

任何援助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:16:15.227

你可以这样访问它：

```
current_user.temper.temp_phone_n 
```

而你的关系是错误的，你不能在关系的两边都写 has_one

用户.rb

```
has_one :temper 
```

脾气.rb

```
belongs_to :user 
```

# javascript - 仅在从 jquery 中的 ajax 调用获得结果后才调用其他函数

> ID：12177495
> 
> 赞同：0
> 
> 时间：2012-08-29T12:04:42.327
> 
> 标签：javascript, jquery

这是我的功能：

```
loadChildNodes($('#budgetline' + id));
$('.child-of-budgetline' + id).each(function(){
    $(this).expandTreeNode();
    console.log("test");
}); 
```

loadChildNodes($element) 函数进行 ajax 调用。我想等到这个功能完成，然后只执行它之后的行。但不会这样。我怎样才能使其他行仅在函数 loadChildNodes 完成后才执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:08:32.593

使用可通过以下方式获得的承诺[`deferred objects`](http://api.jquery.com/category/deferred-object/)：

```
$.when(loadChildNodes($('#budgetline' + id))).done(function() {
    $('.child-of-budgetline' + id).each(function(){
       $(this).expandTreeNode();
       console.log("test");
    });
})
.fail(function() {
   /* some errors occured */
}) 
```

要正常工作`loadChildNodes()`，应该返回一个`promise`（解决 ajax 成功回调并拒绝错误回调）或 ajax 对象本身（`$.ajax`或其他快捷方式，如`$.get`... `$.post`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:07:21.267

Use [$.when().then()](http://api.jquery.com/jQuery.when/) to do stuff once AJAX completes, e.g:

```
$.when(loadChildNodes($('#budgetline' + id))).then(function() { 
    //stuff 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:07:59.117

Introduce a `callback` parameter for `loadChildNodes` and call that callback in the success callback of ajax call inside that method.
Now refactor your code in way that the remaining lines of code will be moved to callback and passed to loadChildNodes method.

```
loadChildNodes($('#budgetline' + id), function() {
   $('.child-of-budgetline' + id).each(function(){     
     $(this).expandTreeNode();     
     console.log("test"); 
   }); 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:09:45.967

您需要将 ajax 调用作为对象返回：

```
loadChildNodes($('#budgetline' + id)).done(function() {
    $('.child-of-budgetline' + id).each(function(){
        $(this).expandTreeNode();
        console.log("test");
    });
});

function loadChildNodes(elem) {
    return $.ajax({

       //do ajax
    });
} 
```

# cocos2d-iphone - Cocos2d Sprite Sheet 没有动画

> ID：12177512
> 
> 赞同：0
> 
> 时间：2012-08-29T12:05:41.473
> 
> 标签：cocos2d-iphone, sprite

SpriteSheets 是我无法理解的一件事。我正在寻找一种非常清晰易懂的方式来了解它们。我已经阅读并研究了它们，但仍然有问题。

我不知道为什么我的代码不起作用。

```
-(void) addPlayer {

CGSize winSize = [[CCDirector sharedDirector] winSize];

CCSprite *sprite = [CCSprite spriteWithSpriteFrameName:@"walk1.png"];
sprite.position = ccp(winSize.width/2, winSize.height/2);

CCSpriteBatchNode *batchNode = [CCSpriteBatchNode batchNodeWithFile:@"player-walk.png"];
[batchNode addChild:sprite];
[self addChild:batchNode z:350];

NSMutableArray *frames = [NSMutableArray array];
for(int i = 1; i <= 4; ++i) {
    [frames addObject:
     [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"walk%d.png", i]]];
}

CCAnimation *anim = [CCAnimation animation];

CCAnimate *animate = [CCAnimate actionWithAnimation:anim];
CCRepeatForever *repeat = [CCRepeatForever actionWithAction:animate];
[self runAction:repeat];
} 
```

为什么我的播放器没有动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:50:22.403

Spritesheet 只是一种存储纹理的便捷方式。

您的 CCAnimation 对象没有帧。你收集了一组帧，但你从不使用它。改变你的

```
CCAnimation *anim = [CCAnimation animation]; 
```

线到

```
CCAnimation *anim = [CCAnimation animationWithFrames:frames delay:0.2f]; 
```

如果要为精灵设置动画，则必须在此精灵上运行动画操作。使用`[sprite runAction:repeat]`而不是`[self runAction:repeat];`.

# codeigniter - Codeigniter URL 路由

> ID：12177516
> 
> 赞同：0
> 
> 时间：2012-08-29T12:05:47.180
> 
> 标签：codeigniter, url-routing

搜索了很多之后，我决定在这里发布这个问题。

我正在使用 codeigniter（最新版本）。我需要让我的网站的 URL 如下所示。

**[用户名]** / [控制器] / [动作] / [参数]

如您所见，用户名在 URL 上领先，其余部分照常进行。我需要获取用户名并获取该站点的一些数据，以便可以根据他的设置自定义该站点。

我试图用 .htaccess 来实现这一点，但没有运气。然后我检查了代码点火器上的路由，但我不确定它是否适合我。有人可以给我任何领导吗？这可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:15:16.760

```
$route['(:any)/controller'] = 'controller/users/$1'; 
```

这会将动态用户名传递给控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:20:03.533

我建议使用 Codeigniter 的路由选项。 [http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

```
$route['(:any)/user/viewprofile/(:num)'] = controllername/functionname/$2"; 
```

通过这种方式，您可以以有序的方式构建类和函数。并将其保存在 codeigniter 中。

# sql - 客户 ID (SQL) 的唯一 6 位数字但不连续

> ID：12177517
> 
> 赞同：6
> 
> 时间：2012-08-29T12:05:53.120
> 
> 标签：sql, sql-server, c#-4.0, random, numbers

我们的 Customer 表有一个用于 ID 的 int Identity 列。这将提供给客户，因此当他们打电话时，他们只需提供他们的 ID。

现在很明显，我们的竞争对手可以很容易地在我们的网站上注册两次，比如相隔一个月，然后就可以知道有多少人注册了。

因此，有没有一种很好的简单方法来创建我们可以提供给客户的“客户 ID”（在 SQL 或 c# 中）：（a）6 位长（b）是唯一的（c）不是连续的（

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:10:47.347

如果您选择的任何增量不是 1000000 的因数，那么您可以取该数字的最后 6 位来提供 ID；即`(IDENTITY (1,7)) % 1000000`。

但是你的竞争对手仍然可以通过几个顺序注册找到增量，所以这并不能完全解决问题。

所以看起来你想要一个完全随机的数字 - 为此，你必须在生成它时检查它是否已经存在，或者预先生成一个数字列表，随机排序，然后选择下一个创建新客户。

如果您可以找到或创建适当的算法来创建足够短的输出，则要考虑的另一个选项是某种形式的加密。

如果您采用较大的非因子增量路线，您可以随后重新排列数字的顺序以创建更随机的数字 - 例如；

```
declare @inc int , @loop int
declare @t table (i int, cn int, code varchar(4))

select @inc = 5173, @loop = 1
while @loop<=10000
begin
    insert @t (i, cn)
    select @loop, (@inc*@loop)%10000
    select @loop = @loop + 1
end

update @t 
set code = substring(convert(varchar(4),cn),2,1)
    + substring(convert(varchar(4),cn),4,1)
    + substring(convert(varchar(4),cn),3,1)
    + substring(convert(varchar(4),cn),1,1)

select code, count(*) from @t group by code having count(*)>1
select top 20 * from @t order by i 
```

根据您选择的数字，一些连续项目之间会有相同的差异，但这个数字会有所不同。所以它在*密码学*上并不安全，但可能足以挫败除最坚定的竞争对手之外的所有竞争对手。

您可以将上述内容转换为函数以运行标准`IDENTITY(1,1)`id 字段

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T12:46:00.520

也许这很疯狂，但这是我预先生成客户编号的方式。

*这将很快*生成许多您想要的唯一键。

您显然可以将这些保存到真实表格中。

这是下面的**SQLFiddle**：[http ://www.sqlfiddle.com/#!3/d41d8/3884](http://www.sqlfiddle.com/#!3/d41d8/3884)

```
DECLARE @tbl TABLE
(
    ID INT IDENTITY(1,1),
    CustNo INT UNIQUE
)

DECLARE @Upper INT
DECLARE @Lower INT
DECLARE @NumberRequired INT

SET @Lower = 100000 ---- The lowest random number allowed
SET @Upper = 999999 ---- The highest random number allowed
SET @NumberRequired = 1000 -- How many IDs do we want?

WHILE (SELECT COUNT(*) FROM @tbl) < @NumberRequired
BEGIN
    BEGIN TRY
        INSERT INTO @tbl SELECT (ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0))
    END TRY
    BEGIN CATCH
        -- If it goes wrong go round the loop again
    END CATCH
END

SELECT  *
FROM    @tbl 
```

**编辑：实际上这可能更快。它在我的开发机器上大约 30 秒内生成所有 900000 个可能的密钥，这对于一次性工作来说是可以的。**

```
DECLARE @tbl TABLE
(
    ID INT
)

DECLARE @Upper INT
DECLARE @Lower INT
DECLARE @i INT;

SET @Lower = 100000 ---- The lowest random number allowed
SET @Upper = 999999 ---- The highest random number allowed

SET @i = @Lower

WHILE @i <= @Upper
BEGIN
    INSERT INTO @tbl SELECT @i
    SET @i = @i + 1
END

SELECT  ID
FROM    @tbl ORDER BY NEWID() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:23:22.150

您可以计算从标识列生成的列，并创建期望的唯一值。

例如计算列如下：

100000 + Identity_Column * 7 + 3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:27:55.743

如果只是使用用户注册时间戳怎么办。它不包含用户的计数信息和唯一性（例如，如果您不每秒注册用户）。例如，如果您在此查询中使用 10000，您可以每分钟注册用户并获得唯一的 9 个符号数字：

```
select cast(cast(current_timestamp as float)*10000 as int) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:41:59.707

您可以制作一个包含 2 列的表格，一列的值是 100.000 到 999.999，另一列带有标记是否已给出数字。当让一个新客户从这个表中随机分配一个未分配的号码并将其标记为已分配。

# wpf - 来自 UIAutomationProvider 的 ComException

> ID：12177528
> 
> 赞同：2
> 
> 时间：2012-08-29T12:06:26.290
> 
> 标签：wpf, xaml, comexception

当以前可见的 MenuItem 变为隐藏时，DotNet 4.0 会引发运行时 ComException。切换到 DotNet 3.5 时，不再抛出异常。

**设置**

*   创建新的 WPF DotNet 4.0 项目

*   将以下 XAML 代码添加到默认网格

    `<Menu Height="23"> <MenuItem Header="Item1"> <MenuItem Header="SubItem1"/> </MenuItem> <MenuItem Header="Item2"> <MenuItem Header="SubItem2" /> </MenuItem> </Menu>`

*   确保在 Debug->Exceptions 下选中“Common Language Runtime Exceptions”

*   运行应用程序并单击第一个菜单项，然后单击第二个菜单项，然后将鼠标指针移回第一个菜单项

有谁知道解决此问题的特定方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:03:25.087

通过在用户有机会从 GUI 中调用相关控件之前，从代码中调用相关控件，可以防止引发 UI 自动化异常。为什么？

例如

```
i1.IsSubmenuOpen = false;
i2.IsSubmenuOpen = true;
i2.IsSubmenuOpen = false;
i1.IsSubmenuOpen = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:45:54.887

一组 Windows 7 更新解决了这个问题。奇怪！

我已经运行了大约 1 年没有更新的 Windows 7（64 位）。应用大量累积更新后，问题就消失了。

# android - Text color gradient in textview not working

> ID：12177534
> 
> 赞同：1
> 
> 时间：2012-08-29T12:06:55.950
> 
> 标签：android, textview, linear-gradients

I want to set gradient text color in my `TextView`. I have used this code for it

```
Shader textShader=new LinearGradient(0, 0, 0, 20, new int[]{Color.rgb(225, 225, 225),Color.rgb(150, 150, 150)}, new float[]{0, 1}, TileMode.CLAMP);
text.getPaint().setShader(textShader); 
```

When activity is launched, the text is not shown. But if I change the orientation of my phone, then it will display the text in `TextView` with gradient color. I have tested it on HTC One V. It is working fine on emulator and Samsung device.

I have also tested the following example, and the same problem occur .

[https://github.com/koush/Widgets](https://github.com/koush/Widgets)

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-08-29T12:31:41.533

```
.text1 {    background: #dfdfdf; /* Old browsers */
background: -moz-linear-gradient(top,  #d1d1d1 0%, #000 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#d1d1d1), color-stop(100%,#000)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #d1d1d1 0%,#000 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #d1d1d1 0%,#000 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #d1d1d1 0%,#000 100%); /* IE10+ */
background: linear-gradient(to bottom,  #d1d1d1 0%,#000 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d1d1d1', endColorstr='#000',GradientType=0 ); /* IE6-9 */
    -webkit-text-fill-color: transparent;
    -webkit-background-clip: text;
    -webkit-animation-name: masked-animation;
    -webkit-animation-duration: 10s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
}
h1{color:#f00;}

<div class="text1"><h1>Lorem</h1></div> 
```

# asp.net-mvc-3 - Single URL for all the navigations in asp.net mvc3

> ID：12177535
> 
> 赞同：1
> 
> 时间：2012-08-29T12:07:07.830
> 
> 标签：asp.net-mvc-3

I have a requirement of having the same URL throughout the application navigations. Like below http://www.[Site Name]:com. (Here User should not have the idea of chaning the URL from one page to another page)

I am using ASP.NET MVC3 with latest Razor View Engine, Can some body give suggestions on this?

Advanced Thanks, Satish Kotha

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:13:18.083

正如 Graham Clark 已经提到的，这个功能很可能会让用户感到沮丧。但是，实现它取决于您项目的复杂性。您可能想研究使用 jquery 将部分视图加载到站点的主要内容区域。

当您单击导航时，您可以使用 jquery 的[load()](http://api.jquery.com/load/)来替换页面上的主要内容。[Jquery-load-with-mvc-2-partialviews](http://blog.devlpr.net/2011/01/03/jquery-load-with-mvc-2-partialviews/)是一篇有趣的博客文章，可以让您更深入地了解您想要做什么。您加载内容的代码可能如下所示：

```
$("#mainContent").load("/Controller/Action",
   {parameter}, function () {
   // perform javascript actions on load complete
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:11:00.827

这可能会使用户很难访问您的网站 - 例如，他们将无法为特定页面添加书签。

听起来您想要一个单页应用程序（例如 Google Mail 或 Reader）。在这种情况下，您只有一个页面并大量使用 AJAX。您可以通过 javascript 查询服务器，并发送回部分视图或 JSON 格式的原始数据，这些数据可以在客户端呈现，可能通过某种模板引擎。

# python - 金字塔烧杯缓存问题 - TypeError：int() 参数必须是字符串或数字，而不是“NoneType”

> ID：12177541
> 
> 赞同：2
> 
> 时间：2012-08-29T12:07:23.450
> 
> 标签：python, pyramid, beaker

.ini 文件

```
cache.regions = default_term, second, short_term, long_term
cache.type = memcached
cache.url = 127.0.0.1:11211
cache.second.expire = 1
cache.short_term.expire = 60
cache.default_term.expire = 300
cache.long_term.expire = 3600 
```

`__init__.py`文件

```
from pyramid_beaker import set_cache_regions_from_settings
def main(global_config, **settings):
set_cache_regions_from_settings(settings)
... 
```

测试.py 文件

```
from beaker.cache import CacheManager
from beaker.util import parse_cache_config_options

cache_opts = {
'cache.data_dir': '/tmp/cache/data',
'cache.lock_dir': '/tmp/cache/lock',
'cache.regions': 'short_term, long_term',
'cache.short_term.type': 'ext:memcached',
'cache.short_term.url': '127.0.0.1.11211',
'cache.short_term.expire': '3600',
'cache.long_term.type': 'file',
'cache.long_term.expire': '86400',
}

cache = CacheManager(**parse_cache_config_options(cache_opts))

@cache.region('short_term', 'test')
def test_method(*args, **kwargs): 
```

在执行上面的代码时，它给出了错误：

```
...
File "c:\python27\lib\site-packages\python_memcached-1.48-py2.7.egg\memcache.py", line      1058, in __init__
self.port = int(hostData.get('port', 11211))
TypeError: int() argument must be a string or a number, not 'NoneType' 
```

知道可能导致错误的原因/或者我遗漏了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:28:24.300

看看你的测试配置，`url`设置有错误：

```
'cache.short_term.url': '127.0.0.1.11211', 
```

请注意，那里没有`:`冒号。您使用的 memcached 模块使用正则表达式来尝试解析该值，并且`port`当您将该值指定为主机时，该方法设置为 None：

```
>>> host = '127.0.0.1.11211'
>>> re.match(r'^(?P<host>[^:]+)(:(?P<port>[0-9]+))?$', host).groupdict()
{'host': '127.0.0.1.11211', 'port': None} 
```

这是您的回溯的来源。`cache_opts`将字典更改为：

```
'cache.short_term.url': '127.0.0.1:11211', 
```

一切都会好起来的：

```
>>> host = '127.0.0.1:11211'
>>> re.match(r'^(?P<host>[^:]+)(:(?P<port>[0-9]+))?$', host).groupdict()
{'host': '127.0.0.1', 'port': '11211'} 
```

# asp.net - 计算表中的重复项

> ID：12177545
> 
> 赞同：1
> 
> 时间：2012-08-29T12:07:51.177
> 
> 标签：asp.net, sql, sql-server, tsql

我有一张我在下面提到的表格，我需要得到一个避免重复的总结果，任何人都可以就如何获得下面提到的结果提供任何帮助或建议，谢谢

```
ID      name    Total   Used
24     John     5        2
24     John     10       6
27     Peter    20       0
27     Peter    20       5 
```

结果应该是这样的

```
ID      name    Total   Used
24     John     15       8
27     Peter    40       5 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T12:08:51.207

看起来你只需要`SUM()`在两列上使用。`GROUP BY`在 id 和 name 上也使用 a

```
SELECT id, name, sum(total) All_total, sum(used) All_used
FROM yourtable
GROUP BY id, name 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/a6df6/1)

该`GROUP BY`字段必须包含您选择的不在聚合函数中的任何其他列，因此对于示例，您`id`将`name`在`GROUP BY`.

编辑＃1您的查询将是：

```
SELECT [ID] , name, sum([Total]), sum([Used]), [GUID] 
FROM [table].[dbo].[vw_data] 
GROUP BY [ID], [name], [GUID] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:08:59.333

```
select sum(Total), sum(Used), ID, name
from table
group by ID, name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:10:05.667

```
select ID,      name,   sum( Total,),  sum( Used)
from  table 
group by Id,name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:10:06.790

试试这个：

```
select id,name, sum(Total),sum(used)
from tab
group by id,name 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:10:26.273

```
SELECT id, name, sum(total) total, sum(used) used  from table GROUP BY id, name 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T12:14:04.513

此问题的 MySql 语法：

```
CREATE TABLE DUPLICATE (ID,NAME, TOTAL, USED);

INSERT INTO DUPLICATE VALUES(24,'John',5,2);
INSERT INTO DUPLICATE VALUES(24,'John',10,6);
INSERT INTO DUPLICATE VALUES(27,'Peter',20,0);
INSERT INTO DUPLICATE VALUES(27,'Peter',20,5);

SELECT ID, NAME, SUM(TOTAL), SUM(USED) FROM DUPLICATE GROUP BY ID, NAME; 
```

# c# - Getting error deploying C# app on Vista

> ID：12177548
> 
> 赞同：0
> 
> 时间：2012-08-29T12:07:59.410
> 
> 标签：c#, windows-vista

My app deploys fine on Win7 pcs, but when i try to run it on Vista i get this error,, any one know what i'm missing here?

```
************** Unntakstekst **************
System.Runtime.InteropServices.COMException (0x80040154): Klassen er ikke registrert (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG))
   ved System.Windows.Forms.UnsafeNativeMethods.CoCreateInstance(Guid& clsid, Object punkOuter, Int32 context, Guid& iid)
   ved System.Windows.Forms.AxHost.CreateWithLicense(String license, Guid clsid)
   ved System.Windows.Forms.AxHost.CreateInstanceCore(Guid clsid)
   ved System.Windows.Forms.AxHost.CreateInstance()
   ved System.Windows.Forms.AxHost.GetOcxCreate()
   ved System.Windows.Forms.AxHost.TransitionUpTo(Int32 state)
   ved System.Windows.Forms.AxHost.CreateHandle()
   ved System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   ved System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   ved System.Windows.Forms.AxHost.EndInit()
   ved ServiceTool.CmsForm.InitializeComponent()
   ved ServiceTool.CmsForm..ctor(Int32 x, Int32 y, Int32 length, Int32 height)
   ved ServiceTool.SetupForm.btn_Start_Click(Object sender, EventArgs e)
   ved System.Windows.Forms.Control.OnClick(EventArgs e)
   ved System.Windows.Forms.Button.OnClick(EventArgs e)
   ved System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   ved System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   ved System.Windows.Forms.Control.WndProc(Message& m)
   ved System.Windows.Forms.ButtonBase.WndProc(Message& m)
   ved System.Windows.Forms.Button.WndProc(Message& m)
   ved System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   ved System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   ved System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Innlastede samlinger **************
mscorlib
    Samlingsversjon: 4.0.0.0
    Win32-versjon: 4.0.30319.269 (RTMGDR.030319-2600)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
----------------------------------------
ServiceTool
    Samlingsversjon: 1.0.0.0
    Win32-versjon: 1.0.0.0
    CodeBase: file:///C:/Users/glennj/AppData/Local/Apps/2.0/PAKYY1J5.87Y/CY533GDD.M18/serv..tion_e78e579e9aa1c33a_0001.0000_bed55deccf379cfe/ServiceTool.exe
----------------------------------------
System.Windows.Forms
    Samlingsversjon: 4.0.0.0
    Win32-versjon: 4.0.30319.278 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Samlingsversjon: 4.0.0.0
    Win32-versjon: 4.0.30319.282 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System
    Samlingsversjon: 4.0.0.0
    Win32-versjon: 4.0.30319.269 built by: RTMGDR
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
log4net
    Samlingsversjon: 1.2.11.0
    Win32-versjon: 1.2.11.0
    CodeBase: file:///C:/Users/glennj/AppData/Local/Apps/2.0/PAKYY1J5.87Y/CY533GDD.M18/serv..tion_e78e579e9aa1c33a_0001.0000_bed55deccf379cfe/log4net.DLL
----------------------------------------
System.Configuration
    Samlingsversjon: 4.0.0.0
    Win32-versjon: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Samlingsversjon: 4.0.0.0
    Win32-versjon: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
WeifenLuo.WinFormsUI.Docking
    Samlingsversjon: 2.5.0.15095
    Win32-versjon: 2.5.0.0
    CodeBase: file:///C:/Users/glennj/AppData/Local/Apps/2.0/PAKYY1J5.87Y/CY533GDD.M18/serv..tion_e78e579e9aa1c33a_0001.0000_bed55deccf379cfe/WeifenLuo.WinFormsUI.Docking.DLL
----------------------------------------
AxInterop.MSTSCLib
    Samlingsversjon: 1.0.0.0
    Win32-versjon: 1.0.0.0
    CodeBase: file:///C:/Users/glennj/AppData/Local/Apps/2.0/PAKYY1J5.87Y/CY533GDD.M18/serv..tion_e78e579e9aa1c33a_0001.0000_bed55deccf379cfe/AxInterop.MSTSCLib.DLL
----------------------------------------
Interop.MSTSCLib
    Samlingsversjon: 1.0.0.0
    Win32-versjon: 1.0.0.0
    CodeBase: file:///C:/Users/glennj/AppData/Local/Apps/2.0/PAKYY1J5.87Y/CY533GDD.M18/serv..tion_e78e579e9aa1c33a_0001.0000_bed55deccf379cfe/Interop.MSTSCLib.DLL
----------------------------------------
mscorlib.resources
    Samlingsversjon: 4.0.0.0
    Win32-versjon: 4.0.30319.1 (RTMRel.030319-0100)
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/mscorlib.resources/v4.0_4.0.0.0_no_b77a5c561934e089/mscorlib.resources.dll
----------------------------------------
System.Windows.Forms.resources
    Samlingsversjon: 4.0.0.0
    Win32-versjon: 4.0.30319.1 built by: RTMRel
    CodeBase: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms.resources/v4.0_4.0.0.0_no_b77a5c561934e089/System.Windows.Forms.resources.dll
----------------------------------------

************** JIT-feilsøking **************
Når du skal aktivere JIT-feilsøking (Just In Time), må .config-filen for dette
programmet eller datamaskinen (machine.config) ha
jitDebugging-verdien angitt i delen system.windows.forms.
Programmet må også kompileres med feilsøking
aktivert.

For eksempel:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

Når JIT-feilsøking er aktivert, blir alle ubehandlede unntak
sendt til JIT-feilsøkingen som er registrert på datamaskinen,
i stedet for å bli behandlet av denne dialogboksen. 
```

# java - JBoss 5.1.2 提供了 Java EE 5 规范之外的库作为 Maven 工件

> ID：12177551
> 
> 赞同：0
> 
> 时间：2012-08-29T12:08:10.113
> 
> 标签：java, maven, jboss, jboss5.x

有没有一种方法可以轻松地添加所有（或大多数）有用的 JBoss 5.1.2 提供的库 API-s 超出 Java EE 5 规范？

例如：我知道 JBoss 为我提供了使用 Log4J 日志记录的可能性，但我不知道将什么作为`provided`工件放入我的 maven 项目。我想这是 jboss-logging-something。我希望它只为我提供一个日志记录 API。

是否有 JBoss AS 5 提供的 API 的 maven 工件列表（Java EE 5 规范除外）？

*编辑*

似乎添加此依赖项很有帮助：

```
<dependency>
  <groupId>org.jboss.jbossas</groupId>
  <artifactId>jboss-as-ejb3</artifactId>
  <version>5.1.0.GA</version>
</dependency> 
```

但它会导致 maven 加载相当完整的 Jboss AS 服务器代码。有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:17:12.407

以下引用来自[安装指南](http://docs.jboss.org/jbossas/docs/Installation_And_Getting_Started_Guide/5/html_single/index.html#Whatsnew_Component_Upgrades)

*有关 JBoss AS 5.0.0.GA 使用的 JBoss 和第三方库的完整列表，请查看源代码分发的 component-matrix 目录中的 pom.xml。要查看 maven 依赖树，您可以从源代码发行版的第三方目录运行“mvn dependency:tree”。*

您可以从这里下载源代码：http: [//sourceforge.net/projects/jboss/files/JBoss/JBoss-5.1.0.GA/](http://sourceforge.net/projects/jboss/files/JBoss/JBoss-5.1.0.GA/)

然后如上所述检查 pom。请注意，这是一个很长的列表，但应该为您提供您正在寻找的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:09:56.763

我认为一个更好的主意是使用您部署的 JBOSS 服务器提供的库，而不是在您的包中。链接到编译和运行所需的库，但不要将它们添加到您的规范中。

JBOSS 在其`/lib`、`deploy/lib`和`endorsed/lib`文件夹中有库。

# xmpp - XMPP 服务器 - Strophe - 我无法使用我的网络客户端加入服务器

> ID：12177560
> 
> 赞同：2
> 
> 时间：2012-08-29T12:08:40.393
> 
> 标签：xmpp

我有自己的 xmpp 服务器。在：jenan.cz

为什么我无法通过 WebClient 连接？

错误：**状态CONNFAIL**

应用程序在这里：http: [//jenan.cz/xmpp/](http://jenan.cz/xmpp/)

连接：http: [//jenan.cz/xmpp/gab.js](http://jenan.cz/xmpp/gab.js)

我使用以下连接：

```
$(document).bind('connect', function (ev, data) {
    var conn = new Strophe.Connection(
        "http://jenan.cz:5280/http-bind/");

    conn.connect(data.jid, data.password, function (status) {
           if (status === Strophe.Status.CONNECTED) {
            $(document).trigger('connected');
        } else if (status === Strophe.Status.DISCONNECTED) {
            $(document).trigger('disconnected');
        } else if (status === Strophe.Status.ERROR) {
            alert ('status ERROR');
        } else if (status === Strophe.Status.CONNECTING) {
            alert ('status CONNECTING');
        } else if (status === Strophe.Status.CONNFAIL) {
            alert ('status CONNFAIL');
        } else if (status === Strophe.Status.AUTHENTICATING) {
            alert ('status AUTHENTICATING');
        } else if (status === Strophe.Status.AUTHFAIL) {
            alert ('status AUTHFAIL');
        } else if (status === Strophe.Status.ATTACHED);
            alert ('status ATTACHED');

    });

    Hello.connection = conn;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:52:13.870

在 ejabberd 中启用 http-bind 模块：

```
{modules,
 [
{mod_http_bind, [{max_inactivity, 120}]}
]}. 
```

更改 5280 端口的设置：

```
 {5280, ejabberd_http, [
       {request_handlers,
         [
          {["http-bind"], mod_http_bind}
         ]},
       http_bind
       web_admin
       ]
    } 
```

更改连接设置：

```
$(document).bind('connect', function (ev, data) {
    var conn = new Strophe.Connection(
        'http://jenan.cz:5280/xmpp-http-bind');

      conn.connect(data.jid, data.password, function (status) {
           if (status === Strophe.Status.CONNECTED) {
            $(document).trigger('connected');
        } else if (status === Strophe.Status.DISCONNECTED) {
            $(document).trigger('disconnected');
        }

    });

    Gab.connection = conn;
}); 
```

# android-ndk - 使用 mupdf ndk-build 错误

> ID：12177561
> 
> 赞同：5
> 
> 时间：2012-08-29T12:08:42.677
> 
> 标签：android-ndk

我正在尝试在 android 应用程序中使用 mupdf。我正在使用 windows 7 和 cygwin 终端。我使用了 make 但它给出了错误并使 NOX11=yes 成功执行。

然后我使用了ndk-build，它给出了这个错误。

```
SharedLibrary  : libmupdf.so
c:/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(pdf_fontfile.o)(.text.pdf_lookup_builtin_font+0x18): unresolvable R_ARM_THM_CALL relocation against symbol `strcmp'
c:/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld.exe: final link failed: Nonrepresentable section on output
collect2: ld returned 1 exit status
/cygdrive/c/android-ndk-r8b/build/core/build-binary.mk:378: recipe for target `obj/local/armeabi/libmupdf.so' failed
make: *** [obj/local/armeabi/libmupdf.so] Error 1 
```

请帮助我。我是android ndk的新手。谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T15:14:28.090

这似乎是一个已知问题。尝试添加该行：

```
NDK_TOOLCHAIN_VERSION=4.4.3 
```

到文件 ..\android\jin\Application.mk。这至少会摆脱这个特定的错误。

**编辑**：查看这里[http://code.google.com/p/android/issues/detail?id=35393](http://code.google.com/p/android/issues/detail?id=35393)了解更多信息

**更新**： mupdf 世界是一个阴暗的世界。即使是您使用的 NDK 版本与 mupdf 版本 (http://mupdf.com/download/archive/) 相比，也将决定您收到哪种错误或警告。根据我的经验，mupdf-0.9 (+mupdf-thirdparty-2011-02-24.zip) 在 android-ndk-r6b 上表现良好，而 mupdf-1.1 (+mupdf-thirdparty-2012-08-14.zip) 表现良好使用 android-ndk-r8b 就好了。

# ios - Facebook 移动重定向到应用商店而不是应用

> ID：12177562
> 
> 赞同：0
> 
> 时间：2012-08-29T12:08:43.927
> 
> 标签：ios, facebook, native

我有一个 Facebook 应用程序。在移动端，我创建了一个 android 应用程序和一个 iOS 应用程序。因此，如果我单击该应用程序，它应该重定向到移动设备或应用商店/Play 商店上的 android/iOS 应用程序。在 android 上它工作正常，但在 iOS 上它永远不会重定向到应用程序，即使它已安装。它重定向到应用商店。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:39:23.667

您必须在您的应用程序中注册一个自定义 URL 方案，以便在 iOS 上将用户从一个应用程序重定向到另一个应用程序。特别是，Facebook 会让您将您的 Facebook 应用程序 ID 作为 URL 方案的一部分。

这里有一个很好的关于创建自定义 URL 方案的[教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)。

# html - 谷歌浏览器更新后 Flash 对象不工作

> ID：12177563
> 
> 赞同：2
> 
> 时间：2012-08-29T12:08:45.703
> 
> 标签：html, google-chrome, flash

今天谷歌浏览器更新到最新版本，在更新之前网站运行没有任何问题。它可以在 Firefox 和 Internet Explorer 上运行，但没有任何问题。

谷歌浏览器有什么问题？

[http://www.mersin-mezitli-satilik-daire.com/3-boyutlu-sanal-tur-mersin-mezitli-satilik-daire.php?iframe=3&anasayfa=1](http://www.mersin-mezitli-satilik-daire.com/3-boyutlu-sanal-tur-mersin-mezitli-satilik-daire.php?iframe=3&anasayfa=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:57:08.770

这个问题可能是由可怕的“Pepper”Flash Player 引起的，它也在 Chrome 中破坏了我的 Flash 内容。

我不知道对于更广泛的 Chrome 访问者的解决方案是什么，但要在本地解决问题：

*   在新选项卡中，转到 URL：chrome://plugins/
*   查找“Flash”条目并展开 [+] 详细信息（如果尚未展开）
*   查找插件位置结束的条目： ...PepperFlash\pepflashplayer.dll 并单击“禁用”
*   希望您至少安装了另一个 Flash Player 实例（如果没有，请尝试从 Adob​​e 的网站安装调试播放器），并启用其中之一。

我应该提一下，Pepper Flash Player 似乎会定期重新启用自己，可能每当 Chome 自动更新自己时，我发现自己必须每隔几天重复这个过程。

# magento - 在 magento 日历中禁用某些日子

> ID：12177566
> 
> 赞同：2
> 
> 时间：2012-08-29T12:08:49.023
> 
> 标签：magento, calendar

我想在 magento 中使用日历小部件，我的问题是如何禁用某天？

我这样称呼它：

```
<script type="text/javascript">
//<![CDATA[
 Calendar.setup({
    inputField : '_dob',
    ifFormat : '%m/%e/%y',
    button : '_dob_trig',
    align : 'Bl',
    singleClick : true
});
//]]>
</script> 
```

例如，如果我想禁用所有星期一的，我该怎么做？

另外，如果我想在今天之后 3 天之前禁用所有天，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:05:09.440

你可以这样做

```
Calendar.setup({
    disableFunc: function(date) {
        return date.getDay() === 1; // Sunday is 0, Monday is 1, and so on
    }
}); 
```

# html - 不同高度的浮动div在包装时被卡住

> ID：12177567
> 
> 赞同：6
> 
> 时间：2012-08-29T12:08:49.147
> 
> 标签：html, css, height

你好！这是一个问题：我有几个（最多 5 个）不同高度的 div。在这些 div 中是 portlet，它可以增加高度。这是一个简化的示例：

```
.clz {
  float: left;
}
```

```
<div class="container">
  <div class="clz">1111111111<br/>1111111111</div>
  <div class="clz">2222222222<br/>2222222222<br/>2222222222</div>
  <div class="clz">3333333333<br/>3333333333</div>
  <div class="clz">4444444444<br/>4444444444</div>
</div>
```

[这](http://jsfiddle.net/eGawU/9/)是一个JSFiddle，您可以在其中看到它。

当我减小浏览器窗口宽度时，`div`s 会被包裹，这非常好。不好的部分是`4444444444`卡在`2222222`- 它不会落在页面的开头：

```
1111111 2222222 333333
1111111 2222222 333333
        2222222 444444
                444444 
```

理想的行为是，当发生换行时`4444444`，将其放置在页面开头的完全不同的行：

```
1111111 2222222 333333
1111111 2222222 333333
        2222222
4444444
4444444 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T12:13:29.457

您可以为此使用**display:inline-table**。像这样写：

```
.clz{
    display:inline-table;
} 
```

检查这个[http://jsfiddle.net/eGawU/13/](http://jsfiddle.net/eGawU/13/)

直到IE8及以上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:17:48.887

Remove the float. demo [http://jsfiddle.net/eGawU/17/](http://jsfiddle.net/eGawU/17/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:18:00.430

You can try wrapping the first three divs in another `clz` div like this:

```
<div class="container">
    <div class="clz">
        <div class="clz">1111111111<br/>1111111111</div>
        <div class="clz">2222222222<br/>2222222222<br/>2222222222</div>
        <div class="clz">3333333333<br/>3333333333</div>
    </div>
    <div class="clz">4444444444<br/>4444444444</div>
</div>​ 
```

This will make div 4 do exactly what you want, but you may have to nest more divs if you add more columns.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:18:22.980

use **Clear** Property of css

try this [http://jsfiddle.net/gajjuthechamp/eGawU/18/](http://jsfiddle.net/gajjuthechamp/eGawU/18/)

**or**

you can add a extra div in below you want to break

try this [http://jsfiddle.net/gajjuthechamp/eGawU/19/](http://jsfiddle.net/gajjuthechamp/eGawU/19/)

# javascript - Backbone：如何设置正确的容器并处理更改

> ID：12177572
> 
> 赞同：1
> 
> 时间：2012-08-29T12:09:00.163
> 
> 标签：javascript, backbone.js

Backbone 没有提供任何关于如何构建应用程序的明确模式。我现在遇到一些困难。在下图中，我在视觉上以一种简化的方式，描述了我想要得到的东西。

我有一个任务清单。我希望在恰好具有相同截止日期的任务之后列出截止日期。日期也按时间顺序排列。

我决定采取的一种方法是：

*   日期集合和每个日期的视图
*   每个任务的任务集合和子视图（父视图是日期视图）

在您看来，这是解决问题的好方法吗？

保持更新时的潜在问题：

*   如果我更改日期，我希望日期容器重新定位，以便它们按时间顺序排列（**重新获取所有日期集合？**）
*   如果我更改任务的截止日期，我希望任务移动到正确的日期容器（**删除其视图并重新获取所有任务集合？**）
*   如果另一个用户更改了我希望它反映的任务（**获取适当的操作吗？**）

![在此处输入图像描述](../Images/747101d06433ca1de0ddd26faca1c8b4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:09:05.873

> 这是解决问题的好方法吗？

**是的！**：CollectionView -> (n)ModelViews（根据需要深度）

> 如果我更改日期，我希望日期容器重新定位自身，以便它们按时间顺序排列（重新获取所有日期集合？）

您总是必须将更改发送到服务器，但您不需要*重新获取*任何内容，您已经拥有数据，您只需*重新渲染*即可。这种重新渲染的优化取决于很多细节。

> 如果我更改任务的截止日期，我希望任务移动到正确的日期容器（删除其视图并重新获取所有任务集合？）

同样，您不需要询问数据。只需从实际的 DateContainer 集合中移除更改后的 Task 并将其添加到新 DateContainer 的集合中即可。使 DateContainers 响应此`add/remove`事件。

> 如果另一个用户更改了我希望反映的任务（是否获取适当的操作？）

嗯，这是一个非常开放的问题。正如您所说，您可以每 X 秒重新获取整个数据。或者你可以在你的 API 中实现一个优化的`updated_elements`请求，并每隔 X 秒请求一次。或者你可以通过 WebSockets 的方式。

# php - 循环浏览网站目录

> ID：12177573
> 
> 赞同：0
> 
> 时间：2012-08-29T12:09:10.023
> 
> 标签：php, loops, iteration

我需要遍历[这个 URL](http://anambaskab.go.id/isolinux/Cisco.IOS.Big%20Collection/)并以任何方式复制每个文件，我没有具体的方法。我无权访问 FTP .. 只能通过提供的 URL 访问。

这有可能做到吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:13:20.153

您可以使用 wget 并让它[递归下载](http://www.gnu.org/software/wget/manual/html_node/Recursive-Download.html)所有链接到一定深度。

# git - 如何仅在我的本地分支机构使用 git log --graph --oneline --all？

> ID：12177576
> 
> 赞同：32
> 
> 时间：2012-08-29T12:09:15.423
> 
> 标签：git

我想查看我所有的本地分支机构，但没有一个远程跟踪参考像`origin/master`

这个命令向我展示了一个漂亮的图表，上面装饰着我所有的本地和远程跟踪分支：

```
git log --oneline --graph --decorate --all 
```

我应该在此命令中添加/消除什么标志以仅显示本地分支？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2016-02-20T04:17:19.870

这将向您显示所有本地分支机构。

```
git log --graph --oneline --branches 
```

从`git log --help`

> ```
> --branches[=<pattern>]
>     Pretend as if all the refs in refs/heads are listed on the command line as <commit>.
>     If <pattern> is given, limit branches to ones matching given shell glob.
>     If pattern lacks ?, *, or [, /* at the end is implied. 
> ```

这样`--branches`就够了。我喜欢添加`--decorate`并给整个命令一个简短的别名。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-29T12:26:42.047

不确定您需要什么，但如何：

`git log --graph --oneline --branches --not --remotes=*`

*请注意，它可能会过滤掉整个日志*（例如，如果您有一个最新的分支，因此您只有本地没有任何东西）。详情请咨询`git help log`。

如果您只需要名称和最后一次提交，您可以简单地使用：

`git branch -v`

也许你可以混合这些来满足你的需要。

但我的首选是`gitk --all`，这是一个示例输出：

![在此处输入图像描述](../Images/d526709db08fc723d856852c6874d465.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T19:30:17.393

你可以试试这个：

```
git log --oneline --graph --decorate $(git branch | tr -d ' *' | awk '{ print "master~1.."$0 }') 
```

它并不完美，但应该会给您带来不错的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-06T06:46:09.750

正如其他人所提到的，它并不完全清楚问题是什么，但如果像我一样，你真正想做的只是*装饰*你的本地分支，留下未装饰的远程分支，你可以使用以下调用的变体：

```
git log --graph --oneline --decorate-refs=refs/heads 
```

关键论点在哪里`--decorate-refs=refs/heads`。

例如，这将导致从

```
(base) jdoubled@aig35 ~/packages/solarized $ git log --graph --decorate --pretty=oneline --abbrev-commit --all -n9
* 7ef17bf (HEAD -> topic_demoX) this demos going great
* b583669 (master) stupid empty commit for illustration only
* e40cd41 (origin/master, origin/HEAD) add tmux by @seebi!
*   ab3c564 Merge pull request #256 from sgerrand/add-credit-for-xfce4-terminal-port
|\
| * 4f90b03 Adds attribution for Xfce terminal port. Fixes #255.
* | 8a909d3 merge upstream xfce4-terminal changes
* | 04583c9 merge upstream gedit changes
* | f9e5943 add gedit back as a subtree
* | 53bfffc remove gedit submodule 
```

to（注意 e40c 上没有“origin/master”）

```
(base) jdoubled@aig35 ~/packages/solarized $ git log --graph --decorate --pretty=oneline --abbrev-commit --all -n9 --decorate-refs=refs/heads
* 7ef17bf (topic_demoX) this demos going great
* b583669 (master) stupid empty commit for illustration only
* e40cd41 add tmux by @seebi!
*   ab3c564 Merge pull request #256 from sgerrand/add-credit-for-xfce4-terminal-port
|\
| * 4f90b03 Adds attribution for Xfce terminal port. Fixes #255.
* | 8a909d3 merge upstream xfce4-terminal changes
* | 04583c9 merge upstream gedit changes
* | f9e5943 add gedit back as a subtree
* | 53bfffc remove gedit submodule 
```

荣誉应该去这个类似问题的答案：[https ://stackoverflow.com/a/55730910/13938570](https://stackoverflow.com/a/55730910/13938570)

另请注意，decorate-refs 功能是在可笑的古老 1.8（我的系统管理员提供的版本）和 2.28 版本的 git 之间添加的。也许有人可以评论这成为可能的具体版本。

# sql - 安装了 SQL Server Management Studio 2012，但没有运行实例

> ID：12177579
> 
> 赞同：4
> 
> 时间：2012-08-29T12:09:41.087
> 
> 标签：sql, sql-server-2012-express

因此，正如它所说，我安装了 sql server (2012 express)，并在安装过程中检查了 LocalDB 选项。现在我正在尝试连接到数据库引擎，但不能。我已经尝试使用 Windows 身份验证（连接到本地和 localhost），使用 sa-user 并且没有密码和一堆其他东西。

当我访问配置工具并尝试查看我的实例的名称时，我看到了一个新问题。根本没有任何东西在运行。在 SQL Server 配置管理器（本地）--> SQL Server Services 下什么都没有。

我错过了什么？显然我错过了开始做某事的步骤，但对于我的一生，我不知道是什么。帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:14:53.447

只需`localhost\sqlexpress`与`Windows Authentication`

你也可以试试`.\SQLExpress`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-19T12:05:39.157

我遇到了同样的问题，并且能够使用 (localdb)\v11.0 和 Windows 身份验证进行连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-04T14:37:54.137

[http://www.stratospher.es/blog/post/connecting-to-localdb-with-sql-server-management-studio-2012-ssms](http://www.stratospher.es/blog/post/connecting-to-localdb-with-sql-server-management-studio-2012-ssms)

> LocalDB 不创建任何数据库服务；LocalDB 进程会在需要时自动启动和停止。应用程序只是连接到“Data Source=(localdb)\v11.0”，LocalDB 进程作为应用程序的子进程启动。在关闭与此进程的最后一个连接后几分钟，该进程将关闭。

# ruby-on-rails - 在 RSpec 中测试动态设置常量

> ID：12177582
> 
> 赞同：2
> 
> 时间：2012-08-29T12:09:47.013
> 
> 标签：ruby-on-rails, ruby, rspec, rspec-rails

我有一个 Rails 初始化程序，它从配置文件创建一些常量，如下所示：

```
Kernel.const_set "MailChimp", Module.new
config["lists"].each_pair {|k,v| MailChimp.const_set "#{k}_List".upcase, v} if config 
```

后来，我有一个观察者订阅用户到一个列表：

```
Delayed::Job.enqueue Jobs::NewsletterSubscriptionJob.new(MailChimp::NEWSLETTER_SUBSCRIBERS_LIST, record) 
```

当我在 RSpec 中测试这个时，

```
Kernel.const_set :MailChimp, Module.new
MailChimp.const_set :NEWSLETTER_SUBSCRIBERS_LIST, "foo" 
```

我得到**未初始化的常量 UserObserver::MailChimp**

我在规范中看到了一些与常量相关的答案，但我似乎无法让它发挥作用。

如何在 RSpec 中设置这些常量以便测试观察者？

仅供参考：这是 Ruby 1.8.7 代码。

# android - 如何在android中使用intent打开特定的应用程序？

> ID：12177585
> 
> 赞同：2
> 
> 时间：2012-08-29T12:09:51.517
> 
> 标签：android

我想打开一个 .ics 文件并且我想确保特定的应用程序应该使用意图来做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:16:26.693

打开另一个应用程序：

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("package.name.of.destination.app");
                    startActivity(LaunchIntent); 
```

在那里形成控件转到该应用程序，因此如果您想提供一些效果，则必须在目标应用程序中进行

# java - 如何读取具有不同规范路径的文件

> ID：12177587
> 
> 赞同：0
> 
> 时间：2012-08-29T12:09:57.560
> 
> 标签：java

我正在制作一个从特定位置读取文件的 java 应用程序。文件的位置在从中检索的文件夹中

```
getCanonicalPath(). 
```

我面临的问题是，当我在 Eclipse 中运行我的应用程序时，规范路径与 Java 博士看到的不同。所以，在将我的应用程序交付给客户端之前，我应该做什么以确保无论使用哪个 ide/命令提示符来运行应用程序，它都能看到文件。显然，在所有可能的文件夹中复制相同的文件以涵盖 getCanonicalPath 的不同可能性并不是一个好主意。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:14:13.187

解决方案之一是将这个文件放在你的类路径中并从你的类路径中加载它，代码如下

```
URL url = getClass().getClassLoader().getResource(path);
        if(url != null) {
            try {
                return new File(url.toURI().getPath());
            } catch (URISyntaxException e) {
                return null;
            }
        } 
```

如果此文件是配置文件，这是标准的。通常在标准的 java 项目布局中，您将其放在文件夹中`src/main/resources`。

如果这更多的是一个数据文件，你应该把它的路径放在一个配置文件中，并有不同的配置，一个用于您的工作站，一个用于客户端机器上的生产。当然，在这种情况下，配置文件位于类路径中；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:15:12.573

一个常见的解决方案是将文件放在类路径中的目录中。如果您使用 getResource 或 getResourceAsInputStream ，则无论在类路径中的何处提供该文件，您都可以找到该文件。如果你使用 maven，你可以确定类路径是如何设置的，而不管使用的是什么 IDE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:16:40.750

您应该始终`ClassLoader`使用 API加载文件`Test.class.getClassLoader().getResource(name)`，如`Test.class.getClassLoader().getResourceAsStream(name)` 更多信息可[在此处获得](https://stackoverflow.com/questions/1464291/how-to-really-read-text-file-from-classpath-in-java)

# dependency-injection - 在struts2动作中注入EJB？

> ID：12177594
> 
> 赞同：2
> 
> 时间：2012-08-29T12:10:12.297
> 
> 标签：dependency-injection, struts2, annotations, ejb-3.0

我正在使用 struts2、EJB 3.0 ...我的要求是从 struts2 操作类调用 EJB 层。我希望有两种方法可以实现这一目标：

```
1.Using @EJB annotation in Action class
2.Using JNDI look up 
```

我都试过了，但问题`JNDI lookup`是，即使使用正确的命名，我也得到了`NameNotFoundException`。`@EJB`所以最终，我的团队转移到使用注释的其他方法。

但是当我使用`@EJB`注释时，我认为它没有被注入：

我得到了`NullPointerException`

代码 ：

```
 @EJB(mappedName="BeanLocal/local")
    BeanLocal bean ; 
```

任何人都可以建议我进一步做什么......另外，如果 SOF 中有任何链接，请参考我，因为我没有发现与此相关的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:49:45.413

我有同样的问题，这就是我解决它的方法。

正如 Shinosha 所说，@EJB 注释将不起作用，因为动作类由 Struts 容器管理。

为了使用 JNDI 查找，我必须创建 bean @Remote 并指定一个 mappedName。然后代码如下（这取决于您使用的服务器，在我的情况下为 Weblogic）：

```
Context ctx = new InitialContext();
MyBean bean= (MyBean) ctx.lookup("MyBeanMappedName#myapp.MyBean"); 
```

查找字符串应该是 bean 的完全限定名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:10:45.423

您不能在 Struts 2 动作类中使用传统的依赖注入，因为动作不受管理。然而，有一种方法可以通过使用[CDI 插件](http://struts.apache.org/2.3.3/docs/cdi-plugin.html)或[Guice](http://www.tzavellas.com/techblog/2007/07/03/using-dependency-injection-in-struts2-for-stateless-ejbs-part-1/)来实现。您也可以使用 JNDI 查找，但语法取决于您的服务器。您最好的选择是根据您所拥有的（[JBoss 7.1](https://docs.jboss.org/author/display/AS71/JNDI+Reference)，[Glassfish](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html) ...）检查文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T01:43:03.673

我写了以下拦截器来解决这个问题。看看并分享您可能有的任何反馈：

[http://gauravwrites.blogspot.com/2014/11/ejb-injection-in-struts2-interceptor.html](http://gauravwrites.blogspot.com/2014/11/ejb-injection-in-struts2-interceptor.html)

# c# - 在哈希表c#中按值获取键

> ID：12177596
> 
> 赞同：5
> 
> 时间：2012-08-29T12:10:16.633
> 
> 标签：c#, hashtable

我想获得我的价值的关键，但这在 Hashtable 中
是不可能的 是否有数据拉伸器可以做到这一点？

```
 Hashtable x = new Hashtable();
    x.Add("1", "10");
    x.Add("2", "20");
    x.Add("3", "30");

    x.GetKey(20);//equal 2 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T12:12:29.690

如果你所有的键都是字符串。

```
var key = x.Keys.OfType<String>().FirstOrDefault(s => x[s] == "20") 
```

或者更好地使用字典：

```
Dictionary<string, string> x = new Dictionary<string, string>();
x.Add("1", "10");
x.Add("2", "20");
x.Add("3", "30");

string result = x.Keys.FirstOrDefault(s => x[s] == "20"); 
```

如果您知道您的值将始终只有一个不同的键，请使用[`Single`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)而不是[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:13:12.437

您可以使用 Linq 运算符

```
x.Keys.OfType<String>().FirstOrDefault(a => x[a] == "20") 
```

您可以使用 foreach 进行迭代

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:13:41.203

如果您正在寻找 O(1) 解决方案，那么您可能还需要实现反转`Hashtable`，其中该表的值将是键并且键成为相应的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:18:36.833

我强烈建议使用两个`Dictionary<string, string>`，但这意味着它们是项目之间的 1-1 关系：

```
var dict1 = new Dictionary<string, string>();
var dict2 = new Dictionary<string, string>();

dict1.Add("1", "10");
dict2.Add("10", "1");

dict1.Add("2", "20");
dict2.Add("20", "2");

dict1.Add("3", "30");
dict2.Add("30", "3");

var valueOfDictOne = dict1["1"];
var valueOfDictTwo = dict2["10"]; 
```

# python - 如何摆脱最大递归深度错误或更好地解决这个问题？

> ID：12177600
> 
> 赞同：6
> 
> 时间：2012-08-29T12:10:33.903
> 
> 标签：python, algorithm, recursion

**问题：**我们有一个 5 行 4 列的方形网格。我们需要使用这些数字来填充网格；`1,2,3,4,5,6,7,8,9,10,12,18,20,21,24,27,30,35,36,40`. 我们需要以这样一种方式填充网格，即每个水平和垂直的邻居都应该无余地分割其他。例如，`12`and`3`可以是邻居，因为`12 % 3 == 0`, 但是`5`and 12 不能。网格 2x2 是`10`.

我尝试使用集合列表来解决问题。每个集合代表每个网格的可能值。当每个集合只有一个元素时，问题就解决了。这是我用来尝试解决这个问题的功能（我添加了整个东西以防万一，但我认为我的问题在于解决功能。）；

```
class CannotSolveError(Exception):
    pass

def suitable_neighbor(a,b):
    "return True if a and b can be neighbors."
    return (a > b) and (a % b == 0) or (b % a == 0)

def equalize_tables(table1, table2):
    "Make two tables equal, by changing first one in-place"
    for i in range(len(table1)):
        table1[i] = table2[i]

def remove_possibility(table, row, column, value):
    """Remove possibilities that can't be neighbors with value in rowxcolumn grid."""

    index = ((row - 1) * num_cols) + column - 1

    if len(table[index]) == 1:
        return # This is a solved grid, do nothing.

    remaining_possibilities = set(
        filter(lambda x: suitable_neighbor(x, value), table[index])
                                )

    if not remaining_possibilities:
        raise ValueError("Invalid move")

    if len(remaining_possibilities) == 1:
        "Only one possibility remains, try to put it!"
        copy_table = table[:]
        try:
            "Try it on copy"
            put(copy_table, row, column, remaining_possibilities.pop())
        except ValueError:
            "Cannot put, re-raise and do nothing.."
            raise
        else:
            "Putting is successfull, update original table"
            equalize_tables(table, copy_table)
    else:
        table[index] = remaining_possibilities

def put(table, row, column, value):
    """Put a value on a grid, modifies given table. use with care!"""

    index = ((row - 1) * num_cols) + column - 1

    "Is this move possible?"
    if value not in table[index]:
        raise ValueError("Cannot put %d on %dx%d" % (value, row, column))

    "Remove possibilities from left neighbor"
    if column > 1:
        remove_possibility(table, row, column - 1, value)

    "Remove possibilities from right neighbor"
    if column < num_cols:
        remove_possibility(table, row, column + 1, value)

    "Remove possibilities from upper neighbor"
    if row > 1:
        remove_possibility(table, row - 1, column, value)

    "Remove possibilities from lower neighbor"
    if row < num_rows:
        remove_possibility(table, row + 1, column, value)

    "Remove this value from every other set."
    for i in range(num_rows * num_cols):
        if i == index:
            continue

        table[i].discard(value)

    "Put one-item set in place. Have to do this last."
    table[index] = set([value])

def solve(table):
    "Try to solve the table by trying possible values on grids."

    to_try = [(i,len(table[i])) for i in range(num_rows * num_cols) if len(table[i]) > 1]

    "Grid with least remaining possibilities will be tried first."
    to_try.sort(key = lambda x: x[1])

    for index, _ in to_try:
        for value in table[index]:
            row = index / num_cols + 1
            column = index % num_cols + 1
            copy_table = table[:]
            put(copy_table, row, column, value)
            try:
                solve(copy_table)
                equalize_tables(table, copy_table)
                return
            except CannotSolveError:
                continue
            except ValueError:
                continue
    raise CannotSolveError 
```

我认为这个算法应该可以解决问题。但我超过了最大递归深度。任何想法如何解决这个问题，或者我应该如何在 Python 中更好地解决这个问题？

这不是一个家庭作业问题。我正在自己解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T12:42:08.877

为了避免炸毁你的堆栈，一个更健壮的方法是为你的部分解决方案（部分填充板）设计一个编码，并自己实现回溯。与依赖 python 的堆栈相比，这将需要更少的内存。

Google 的 Peter Norvig 撰写了一篇富有启发性的文章，描述了他如何使用这些技术来构建高效的回溯[数独求解器](http://norvig.com/sudoku.html)。它使用一种他称之为“约束传播”的技术来限制选项的空间，以便可以通过蛮力回溯搜索快速找到解决方案（即，不检查*每个*可能的数字网格，而只追求可能仍然存在的部分网格导致解决方案）。我认为您会发现它非常适用，不仅适用于一般想法，而且适用于具体问题：您的问题，正如您所接近的那样，非常接近数独求解器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:12:46.997

有一种方法可以为 Python 递归限制设置自定义值（默认为 1000）：

```
import sys
sys.setrecursionlimit(10000000) 
```

您可以在递归调用之前添加这些行，如果问题仍然存在，您必须检查您的实现以查找其他可能的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:02:21.577

这是一个下雨天，所以我写了一个解决方案。如果您愿意，我可以发布，但也许您更愿意自己找到？

这里有一些提示：

*   您的代码似乎不是在 (2,2) 以 10 开头

*   尝试新值时，您可以将其添加到任何空白处。最好的尝试空间是有很多邻居的空间，因为这样可以让你快速测试和拒绝错误的值。

*   假设上面，或者说同样的事情的不同方式 - 我的搜索超出了价值。所以我为“下一步”选择了一个位置，并在那里尝试了每个值。相反的是搜索位置（选择“下一个值”并在每个位置使用该值进行搜索），但效率不高（见上文）。

*   回溯和重试时，始终遵循相同的位置模式。例如，(2,2) 是 10，那么 (2,3) 可能是 40，那么您可能找不到适合 (2,4) 的东西。所以你回溯并删除 40 并在 (2,3) 处尝试不同的数字。但是您尝试的第二个数字（在 10 之后，在 (2,2) 处）总是在 (2,3)。如果您不小心这样做，您最终可能会测试许多重复的组合。抱歉，不确定这很清楚。基本上 - 选择一个您在搜索和回溯时填写并坚持下去的“路径”。因为选择这条路径是为了最大化邻居的数量（上面的点），所以我在继续时构建了它，但保留了我在回溯时使用的路径位置的缓存。通过显示代码更容易解​​释......

*   对于表，我使用了一个数组数组。复制时，我重新使用了未更改的列。这应该会减少内存使用（我不知道这是否重要）。

*   搜索只需要递归 40 次（每个值一次），因此堆栈足够大。

*   一个简单的搜索，在 python 中，依次尝试每个值，失败时回溯，在我的笔记本电脑上运行约 4 分钟（假设您使用上面的提示）（不打印稍微修改的版本只需 8 秒）。

*   我发现有一个 python 函数很有用，给定一个网格和一个位置，返回`yield`邻居坐标的列表（嗯，一个生成器，带有）。这使得编写其他函数（例如测试移动是否正常的函数）更简单。

无论如何，如果您想要代码或解决方案（我将代码更改为全部打印但只有一个），请询问，我会发布。当然，它也可能有一个错误:o)

**解决方案**

我对此进行了一些调整，它现在打印出 (2,2)=10 解决方案，然后搜索所有解决方案（它仍在为我运行）：

```
#!/usr/bin/python3

nx, ny = 4, 5
values = [1,2,3,4,5,6,7,8,9,10,12,18,20,21,24,27,30,35,36,40]
# grid[x][y] so it is a list of columns (prints misleadingly!)
grid = [[0 for _ in range(ny)] for _ in range(nx)]
# cache these to avoid re-calculating
xy_moves = {}
debug = False

def neighbours(grid, x, y):
    'coordinates of vertical/horizontal neighbours'
    for (xx, yy) in [(x-1,y),(x+1,y),(x,y-1),(x,y+1)]:
        if xx > -1 and xx < nx and yy > -1 and yy < ny:
            yield xx, yy

def filled_neighbours(grid, x, y):
    'filter "neighbours" to give only filled cells'
    return filter(lambda xy: grid[xy[0]][xy[1]], neighbours(grid, x, y))

def count_neighbours(grid, x, y):
    'use this to find most-constrained location'
    return sum(1 for _ in filled_neighbours(grid, x, y))

def next_xy(grid, depth):
    '''given a certain depth in the search, where should we move next?  
       choose a place with lots of neighbours so that we have good 
       constraints (and so can reject bad moves)'''
    if depth not in xy_moves:
        best, x, y = 0, nx // 2, ny // 2 # default to centre
        for xx in range(nx):
            for yy in range(ny):
                if not grid[xx][yy]:
                    count = count_neighbours(grid, xx, yy)
                    if count > best:
                        best, x, y = count, xx, yy
        xy_moves[depth] = (x, y)
        if debug: print('next move for %d is %d,%d' % (depth, x, y))
    return xy_moves[depth]

def drop_value(value, values):
    'remove value from the values'
    return [v for v in values if v != value]

def copy_grid(grid, x, y, value):
    'copy grid, replacing the value at x,y'
    return [[value if j == y else grid[i][j] for j in range(ny)]
            if x == i else grid[i]
            for i in range(nx)]

def move_ok(grid, x, y, value):
    'are all neighbours multiples?'
    for (xx, yy) in filled_neighbours(grid, x, y):
        g = grid[xx][yy]
        if (g > value and g % value) or (g < value and value % g):
            if debug: 
                print('fail: %d at %d,%d in %s' % (value, x, y, grid))
            return False
    return True

def search(grid, values, depth=0):
    'search over all values, backtracking on failure'
    if values:
        (x, y) = next_xy(grid, depth)
        for value in values:
            if move_ok(grid, x, y, value):
                if debug: print('add %d to %d,%d' % (value, x, y))
                for result in search(copy_grid(grid, x, y, value),
                                     drop_value(value, values), 
                                     depth+1):
                    yield result
    else:
        yield grid

# run the search, knowing that (2,2) (which is (1,1) for zero-indexing)
# has the value 10.
for result in search(copy_grid(grid, 1, 1, 10), drop_value(10, values)):
    print(result)

# how many solutions in total?
#xy_moves = {} # reset cache
#for (n, solution) in enumerate(search(grid, values)):
#    print('%d: %s' % (n, solution)) 
```

它首先选择将使用添加下一个数字的正方形`next_xy()`。它选择尽可能多的现有数字附近的位置，以便它可以有效地测试和拒绝数字（该位置被保存，`xy_moves`因此如果我们回溯就不需要重新找到它）。对于每个值，它会检查将值放在该位置是否可以使用`move_ok`. 如果是这样，它会计算一个新的网格（添加了值）和一个新的值列表（删除了使用的值）并递归。当没有值要添加时，递归结束。

这是结果（每个内部列表都是一个*列*）：

```
> time ./grid.py 
[[4, 20, 5, 35, 7], [40, 10, 30, 1, 21], [8, 2, 6, 18, 3], [24, 12, 36, 9, 27]]
real    0m5.909s 
```

[删除了关于递归和生成器的错误评论]

*更新*

它完成了全局搜索——如果你一开始没有修复 (2,2)，似乎总共有 12 个解决方案（如果你忽略简单的对称性，则有 3 个不同的解决方案）。

*更新 2*

[最终代码，包括搜索没有对称重复的所有解决方案](http://acooke.org/cute/SolvingGri0.html)

# php - 从服务器保存变量

> ID：12177601
> 
> 赞同：3
> 
> 时间：2012-08-29T12:10:36.920
> 
> 标签：php, javascript, logging

我正在努力让用户可以在线对我的一些照片进行投票。

我正在用 HTML、JavaScript 和 PHP 编写所有代码。

当用户按下投票按钮时，它会加 1。然后当用户刷新页面时，我想保留投票，所以它仍然会说1，而不是重置为零。

我的问题是，我该怎么做？

我发现我不能在我的服务器上使用 javascript fileIO。

我尝试了一些 PHP，但我的大部分代码都在 javascript 中，我无法弄清楚如何从 javascript 函数中执行一些代码。

我有这样的想法：

```
<body onload="opstart();"> 
```

加载正文后，我调用了一个 javascript 函数。我可以在这里调用一些 PHP 吗？

```
// Get number of votes from txt file
function opstart()
{

} 
```

在其中，我正在考虑从文本文件中读取数据并将其加载到保存票数的变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:13:39.290

为什么要将这些值存储在文本文件中。它们应该在一个数据库中，您可以在其中轻松地用 PHP 将它们提取出来。这将为您节省大量时间，这是更好的做法。

您将需要一个带有每个用户 ID 的 users 表，一个带有每个图像 ID 的图像表，以及一个记录谁对哪个图像 ID 投票的投票表。然后，您只需计算每件事的投票数，并阻止某人投票两次，您可以检查他是否已经投票！

[有关更多详细信息，请参阅此答案](https://stackoverflow.com/a/1303556/1624960)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:13:45.963

1.  创建一个接受您的计数并存储在数据库中的 php 页面
2.  在“opstart”函数中进行ajax调用。

你可以学习以下教程

[http://net.tutsplus.com/tutorials/html-css-techniques/building-a-5-star-rating-system-with-jquery-ajax-and-php/](http://net.tutsplus.com/tutorials/html-css-techniques/building-a-5-star-rating-system-with-jquery-ajax-and-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:16:57.157

您可以使用如下表格：

```
var feature_form =new Ext.form.FormPanel({
        id: "featureInfo_panel",
        url: 'myfile.php',
        autoDestroy:true,
        frame: true,
        width: 410, 
```

其中“myfile.php”指向您要从中传递/获取数据的 php 的名称。php可以轻松地从那里拖网文本文件......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:21:39.613

我认为你没有合适的数据库，你只想使用文本文件来做。使用 Ajax 在文本文件中写入有关最后完成的投票计数的信息。代码看起来像这样。

代码

```
$.ajax(function(){
    url:"voteup.php"  //here you wrtie some function in php which takes care of file I/o
    data:{votecount:9}//last vote count
    success:function(){alert("success");}
   });   // this function should to write new votes in your text file using ajax. 
```

现在阅读关于正文 onload 的当前投票。您已经调用了不同的 ajax 方法来读取该文本文件并获取当前的投票数..

代码

```
function opstart()
{
 $.ajax(function(){
        url:"getvotes.php"  //here you wrtie some function in php which takes care of file I/o

        success:function(){alert("success");}
       });   // this function should to read current votes in your text file using ajax.

} 
```

# javascript - 如何动态添加或删除 Chrome 扩展程序、内容脚本、javascript 文件？

> ID：12177607
> 
> 赞同：1
> 
> 时间：2012-08-29T12:10:52.483
> 
> 标签：javascript, google-chrome-extension, content-script

我正在做一个 chrome 扩展。我想在扩展程序运行时使用 javascript 从弹出页面添加或删除一些内容脚本文件。

在我的扩展中，用户从弹出页面中选择一种颜色。有5种颜色。所以我有 5 个 javascript 文件——每种颜色一个。

那么，弹出页面中的哪些 javascript 代码会更改正在运行的内容脚本 javascript 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:33:49.267

首先，如果你有 5 个 JS 文件，5 种颜色各有一个，这有点像[“克隆和修改编程”](http://c2.com/cgi/wiki?CloneAndModifyProgramming) ——这是一个坏习惯。

明智的做法是拥有**一个**JS 文件，其中包含关闭颜色的“DRY”代码作为参数。请参阅[“不要重复自己”](http://c2.com/cgi/wiki?DontRepeatYourself)（原文如此）。

* * *

要从扩展程序的后台加载整个内容脚本，请参阅[“程序注入”](http://developer.chrome.com/extensions/content_scripts.html#pi)。

* * *

至于动态添加或删除javascript文件......

1.  文件一旦加载就无法*删除。*即使它在一个`<script>`节点中并且您将其删除，解析的函数、变量、计时器、事件侦听器等仍将在内存中处于活动状态。

    1.  您可以覆盖命名对象。例如，如果*File‗1.js*全局设置`x=7;`，您可以稍后加载*File‗2.js*来设置`x=11;`。
    2.  您可以取消已命名的计时器——但您必须明确编码每个计时器。
    3.  您可以取消已知的事件侦听器，但您必须再次故意对此进行编码。
    4.  您**不能**覆盖匿名对象 ( `(function () {... ...} )()`)。
    5.  您**不能取消**匿名计时器。

    在大多数情况下，这一切都比它的价值更麻烦。最好将您的代码设计到不需要的地方。

2.  您可以动态添加 JS（或其他类型的文件），见下文。

* * *

**动态添加 JS 文件...**

1.  确保文件列在***manifest.json***文件的`web_accessible_resources`部分中。例如：

     *```
    {
        "manifest_version": 2,
        "content_scripts": [ {
            "exclude_globs":    [  ],
            "include_globs":    [  ],
            "js":               [ "MyContentScript.js" ],
            "matches":          [ "http://YOUR_SERVER.COM/YOUR_PATH/*" ]
        } ],
        "name":         "Dynamically load JS, demo",
        "version":      "1",
        "web_accessible_resources": [
            "MyJavascript_1.js",
            "MyJavascript_2.js",
            "MyJavascript_3.js"
        ]
    } 
    ```* 
**   然后，在您的内容脚本 ( *MyContentScript.js* ) 中，您可以使用`chrome.extension.getURL`，如下所示：

    ```
    var D           = document;
    var scriptNode  = D.createElement ('script');
    scriptNode.type = "text/javascript";
    scriptNode.src  = chrome.extension.getURL ("MyJavascript_2.js");

    var targ = D.getElementsByTagName('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode); 
    ```*

# linux - 连接后是否可以获取ppp连接的用户名

> ID：12177608
> 
> 赞同：1
> 
> 时间：2012-08-29T12:10:54.203
> 
> 标签：linux, vpn, ppp

我有一个 PPTP 服务器，当某些用户连接时我想做一些特别的事情（添加路由），这不应该影响其他用户。

我曾经在 /etc/ppp/ip-up.d/** 中编写脚本，但我无法找到一种方法来识别连接属于谁。

有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-17T18:15:54.927

我已经成功使用 /var/log/wtmp 并且特别是使用“last”命令来确定哪个用户拥有特定连接。像这样的东西会给你一个仍然连接的用户列表和他们的相关界面：

```
last | grep "ppp.*still logged in" 
```

希望能帮助到你！

# sql-server-2008 - [派生列 [40]] 错误：尝试执行类型转换时出错

> ID：12177622
> 
> 赞同：0
> 
> 时间：2012-08-29T12:11:24.557
> 
> 标签：sql-server-2008, ssis

我已经用 IsNull 条件在 Sql Server 中编写了日期和时间列查询。我在下面提到了该查询。

我想要的查询是，如何编写 ssis 派生列。我已经在 ssis 中编写了该查询，但是出现了一些转换类型错误..

这里连接日期和时间列。

请帮我，

Sql 查询 ---

```
CAST(ISNULL(CONVERT(Nvarchar(10),InitialDate,101), '01/01/1900')  AS Nvarchar(10))+ ' ' + ISNULL(CONVERT(NVarChar(8),InitialTime,108), '00:00:00')   as  CourtDttm 
```

SSIS 派生列

```
(DT_DBTIMESTAMP)((DT_STR,255,1252)(ISNULL(InitialDate) ? ((DT_DBTIMESTAMP)"01/01/1900") : (InitialDate)) + " " +
((DT_STR,255,1252)(ISNULL(InitialTime) ? ((DT_DBTIMESTAMP)"00 : 00 : 00") : (InitialTime))))

Errors --[Derived Column [40]] Error: An error occurred while attempting to perform a type cast. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:17:40.500

我想你正在寻找：

```
DT_DBDATE - A date structure that consists of year, month, and day.

DT_DBTIME - A time structure that consists of hour, minute, and second. 
```

如果使用 DT_DBTIMESTAMP，则必须像 InitialDate 一样填写日期部分。

# git - git/gitolite 推送问题 - 目录不允许

> ID：12177623
> 
> 赞同：1
> 
> 时间：2012-08-29T12:11:25.667
> 
> 标签：git, gitolite

在正确（我希望）安装 gitolite 之后，我将 gitolite-admin 存储库克隆到我的本地 PC。不幸的是，当我尝试将更改推送到服务器时，我收到以下错误：

```
[me@PC gitolite-admin]$ git push origin master
Counting objects: 7, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (4/4), 349 bytes, done.
Total 4 (delta 1), reused 0 (delta 0)
remote: Directory /var/lib/gitolite not allowed in require at /usr/lib/perl5/vendor_perl/5.8.8/gitolite_rc.pm line 42.
remote: Compilation failed in require at hooks/update line 23.
remote: BEGIN failed--compilation aborted at hooks/update line 23.
remote: error: hook declined to update refs/heads/master
To my.server:/var/git/repos/gitolite-admin.git
![remote rejected] master -> master (hook declined)
error: failed to push some refs to my.server:/var/git/repos/gitolite-admin.git 
```

有谁知道这个问题的原因是什么？提前感谢您的帮助。

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:40:38.700

如评论所述，安装[Gitolite V3 或 g3](http://sitaramc.github.com/gitolite/g3why.html)可避免更新挂钩中出现 Gitolite g2 错误。

在 Gitolite g3 中，它仍然保留`update`钩子，但提供**[VREFS](http://sitaramc.github.com/gitolite/vref.html)**允许您在您的存储库上编写各种其他“更新”钩子。

# asp.net - 如何将 css 样式设置为 asp.net 按钮？

> ID：12177630
> 
> 赞同：17
> 
> 时间：2012-08-29T12:11:48.247
> 
> 标签：asp.net, css, button, aspbutton

我有一个 asp:Button，我使用了带有 cssClass 属性的 css 样式`asp:Button`，但是这些样式不起作用。当我使用`asp:LinkButton`这些样式时效果很好。我不想要样式的任何主题或皮肤。

这是我的asp页面：

```
<asp:Button CssClass="smallButton" Text="Sign In" runat="server" ID="submit"></asp:Button> 
```

这是我的 CSS：

```
.smallButton 
{
  //styles
} 
```

当我将 asp:Button 更改为 asp:LinkBut​​ton

```
<asp:LinkButton Text="Sign In" runat="server" ID="submit" CssClass="smallButton"></asp:LinkButton> 
```

或者

```
<span class="smallButton"><asp:LinkButton Text="Sign In" runat="server" ID="submit"></asp:LinkButton></span> 
```

样式运作良好。唯一的问题是 asp:Button 控件

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T12:16:35.237

您可以将 a 分配`class`给您的`ASP.NET`Button，然后对其应用所需的样式。

```
<asp:Button class="mybtn" Text="Button" runat="server"></asp:Button> 
```

**CSS：**

```
.mybtn
{
   border:1px solid Red;
   //some more styles
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-03T04:33:40.633

我找到了编码...

```
 input[type="submit"]
    {
     //css coding
    }
 input[type="submit"]:Hover  
    {
     //css coding
    } 
```

这是我的问题的解决方案......谢谢大家的宝贵答案......

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-29T12:24:52.253

您可以使用`CssClass`属性并将值作为 css 类名传递

```
<asp:Button CssClass="button" Text="Submit" runat="server"></asp:Button>` 

.button
{
     //write more styles
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-11T18:52:46.737

没有人愿意去使用一个类的混乱，试试这个：

```
<asp:button Style="margin:0px" runat="server" /> 
```

Intellisense 不会建议这样做，但它会在不抛出错误、警告或消息的情况下完成工作。别忘了 Style 中的大写 S

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-11T06:06:26.060

如果您在 asp.net 设计页面中有一个按钮，例如“Default.asp”，并且您想要创建 CSS 文件并为按钮、标签或其他控制器指定属性。然后首先创建一个css页面

1.  右键单击项目
2.  添加新项目
3.  选择样式表

现在你有一个 css 页面现在在你的 css 页面中编写这些代码（StyleSheet.css）

样式表.css

```
.mybtnstyle
{
 border:1px solid Red;
 background-color:Red;
 border-style:groove;
 border-top:5px;
 outline-style:dotted;
} 
```

默认.asp

{

```
 <head> 
  <title> testing.com </title>
 </head>
<body>
 <b>Using Razer<b/>
<form id="form1" runat="server">
 <link id="Link1" rel="stylesheet" runat="server" media="screen" href="Stylesheet1.css" />
 <asp:Button ID="mybtn" class="mybtn" runat="server" Width="339px"/>
 </form>
 </body>
</html> 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T12:17:36.167

您可以在 css 文件中设置输入元素的样式。那是独立于 ASP.NET 的。

```
<form action="">
    Name: <input type="text" class="input" />
    Password: <input type="password" class="input" />
    <input type="submit" value="Submit" class="button" />
</form>
CSS
.input {
    border: 1px solid #006;
    background: #ffc;
}
.button {
    border: 1px solid #006;
    background: #9cf;
} 
```

使用 ，`CssClass`您可以将`"input"`类分配给它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T17:29:07.180

您提到的答案将应用于所有按钮。你应该试试这个：

```
input[type="submit"].someclass {
    //somestyle} 
```

并确保将其添加到您的按钮：

```
CssClass="someclass" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-04T11:22:45.383

```
<asp:LinkButton ID="mybutton" Text="Link Button" runat="server"></asp:LinkButton> 
```

带有悬停效果：

```
 #mybutton
        {
            background-color: #000;
            color: #fff;
            font-size: 20px;
            width: 150px;
            font-weight: bold;
        }
        #mybutton:hover
        {
            background-color: #fff;
            color: #000;
        } 
```

[http://www.parallelcodes.com/asp-net-button-css/](http://www.parallelcodes.com/asp-net-button-css/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-14T14:22:14.147

```
 <asp:Button CssClass="button" style="color:black" Text="Submit" runat="server"></asp:Button>` 
```

# c++ - 虚函数机制参考虚构造函数

> ID：12177632
> 
> 赞同：1
> 
> 时间：2012-08-29T12:11:54.977
> 
> 标签：c++, constructor, compiler-errors, runtime-error, vtable

这是在一次采访中向我提出的问题。

如果 Vtable 是在编译时创建的，并`vptr`在运行时分配给对象，那么如果我们的类中有虚拟构造函数，为什么编译器会给出编译时错误？

我解释了整个机制。**但他对“为什么编译时错误而不是运行时错误**”更感兴趣

我告诉他 C++ 指南是这样写的，所以编译器会在编译时发送错误。

你能告诉我同样的原因吗

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T12:14:23.793

*简单回答的*棘手问题 - 因为在`C++`.

* * *

在 ISO 标准中，ISO/IEC 14882:2003 和 ISO/IEC 14882:2011，12.1 构造函数，第 4 点：

> 构造函数不应是虚拟的（10.3）或静态的（9.4）。可以为 const、volatile 或 const volatile 对象调用构造函数。构造函数不得声明为 const、volatile 或 const volatile (9.3.2)。const 和 volatile 语义（7.1.5.1）不适用于正在构建的对象。此类语义仅在最派生对象 (1.8) 的构造函数结束后才生效。

这可以在编译时捕获。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T12:18:18.623

> **为什么编译时错误不是运行时错误？**

当运行时出现异常情况时，会发生运行时错误。当编译器检测到 C++ 标准不允许特定构造作为有效的 C++ 构造时，会发生编译时错误。
C++ 标准不允许将构造函数标记为`virtual`. 因此，编译器将其检测为违反语言语法规则并标记错误。

至于回答为什么 C++ 中不允许使用虚拟构造函数。
Bjarne 在他的常见问题页面上回答 Q：

> 虚拟调用是一种在给定部分信息的情况下完成工作的机制。特别是，“虚拟”允许我们调用只知道任何接口而不知道对象的确切类型的函数。要创建一个对象，您需要完整的信息。特别是，您需要知道要创建的确切类型。因此，“对构造函数的调用”不能是虚拟的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T12:18:30.197

语言的规则不允许这样做，因为拥有虚拟构造函数没有意义。如何调用此构造函数？C++ 中构造某个基类的不同派生实例的常用方法是工厂方法：

```
#include <memory>

// the parameters determine the derived type to be instantiated.
std::unique_ptr<IFoo> fooFactory(some parameters); 
```

**注意**[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)的选择应由所有权策略决定。此示例使用唯一所有权。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T12:20:27.953

在 C++ 中，“虚拟”意味着在运行时所做的事情将取决于对象的有效类，而不仅仅取决于变量的类型。

“虚拟”构造函数实际上没有意义，因为您还没有对象（您想构建一个对象），因此您没有可以依赖的类来做出决定。

有时，使用“虚拟构造函数”，C++ 中的意图是一种模式，您可以在不知道确切类的情况下构建对象......例如：

```
class Document {
    public:
        static Document *create(...);
    private:
        Document(...);
};

...

// Just use Document::create instead of new Document
std::unique_ptr<Document> p = Document::create(...); 
```

在这种情况下，类的用户不能调用构造函数（它是私有的），但他们只能调用一个公共的**静态方法**，该方法将返回一个指向实例的指针。构造本身将由此函数处理，返回的对象不一定是`Document`实例，而是**派生**自`Document`您不知道且未公开公开的某个类的实例。例如，这允许在运行时根据环境或调用中指定的参数来决定确切的类`create`。

这被称为“虚拟构造函数”，因为被调用的构造函数将在运行时决定。然而，它与 C++ 中的虚拟方法调用不同，因为 C++ 中的虚拟调度仅取决于实例的类（但如前所述，这对构造函数没有意义，因为对象还不存在，所以你不能决定取决于它的真实类）。

# c# - 加载程序集和版本控制

> ID：12177639
> 
> 赞同：4
> 
> 时间：2012-08-29T12:12:22.233
> 
> 标签：c#, .net, plugins, versioning, assembly-resolution

我正在考虑通过提供一些预定义的接口来为现有应用程序添加一些可扩展性，这些接口可以通过放置在特定位置并由应用程序拾取的“插件”来实现。应用程序的核心很少更新，而插件更新和部署更频繁。

所以基本上，有这样的设置：

```
// in core assembly (core.dll)
public interface IReportProvider{
     string GenerateReport();
}

// in other assembly(plugin.dll)
public class AwesomeReport : IReportProvider {
     string GenerateReport(){ ... }
} 
```

这两个项目都是同一个构建过程的一部分，核心应用程序会自行部署，插件会在稍后阶段加入。

我的问题是随着时间的推移程序集版本控制和解决。假设已部署 core.dll v1，我想插入一个插件。如果 plugin.dll 引用 core.dll v1，这将非常有用。但是，如果 plugin.dll 是针对更高版本的 core.dll 编译的（作为构建的一部分，比如 v2），则插件无法加载，因为它引用 core.dll v2 但部署的版本只有 core.dll v1。

这是合理且预期的行为，但它给了我在这个项目的设置方式上的几个痛点，即插件的开发/更新不能仅仅通过再次运行构建并放入新插件来完成（现在有较新的版本依赖项）。

（我知道将新程序集解析为旧程序集的潜在问题以及类型定义中的潜在不匹配问题。问题仅在于修复高级程序集解析问题，而不是修复与类型定义不匹配相关的问题。）

我看到了一些让事情正常工作的选择，但没有一个像我真正想要的那么简单：

1.  向 web.config 添加绑定重定向，指示所有 core.dll v1+ 引用解析为 core.dll v1 引用
2.  创建一个包含接口定义的“contracts.dll”程序集，并保持此特定程序集的版本号在构建之间保持不变
3.  针对 core.dll 的部署版本构建插件（以某种方式引用开发中的部署版本）

如前所述，这些对我来说都不是真正容易实现的目标，我希望有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:16:10.510

我在这个领域进行了相当广泛的工作，并且一直发现您需要围绕范围内和范围外的确切内容设置一些界限。想要最大的可扩展性是有风险的，但这一切都是有代价的。这个成本要么是编译时，以约定、最佳实践的形式，也许还有自动构建检查——或者它会是一个复杂的运行时。

要解决您列出的选项：

1.  绑定重定向只是实现解决方案的部分工具。它们将允许您的程序“滑动”一个 DLL 版本来代替另一个版本，但是，它不会神奇地解决方法更改时发生的问题。缺少方法异常？这里你可能没有的东西是依赖链。 ![依赖链](../Images/334384f69a3456f303d0865713d94c92.png) 您可以看到，虽然应用程序将依赖项“A”视为版本 1 对象，但在内部它正在从更高版本创建一些东西，该版本被传递回应用程序并转换为 v1.0 - 导致异常。这可能很难处理——这只是风险之一。

2.  在构建中保持合约程序集版本相同这可以优雅地工作，但是，它只是将复杂性从构建时推迟到运行时。您需要努力确保您的更改不会破坏跨版本的兼容性。更不用说随着您的应用程序老化，您将在这些合同中收集很多您想要弃用的声明。最终，这个文件将变得庞大、繁琐并且让开发人员感到困惑——这甚至还没有考虑到您拥有的所有实体合约！

3.  我不太确定您所说的这个是什么意思，以及它如何涵盖您的问题空间。

您可以采取的另一种方法（我们这样做）是为“SDK”的每个主要版本创建一个新合同。这具有一些政治优势，因为它在一段时间内修复了主要功能，这意味着我们可以将功能请求保持在合理的预期水平，并且超出此范围的任何内容（需要新一代合同）都将推迟到“下一个主要版本” '。但是，这确实需要在设计功能时尽职尽责——在编写合同时要深谋远虑，这样你就可以预先考虑最明显的要求——但我真的觉得无论如何这都是不言而喻的......它们被称为“合同”因为某种原因。每个新合同都将存在于版本命名空间（Company.Product.Contracts.v1_0、Company.Product.Contracts.v1_1）中。

我不会链接我的合同（每个新版本的合同都继承最后一个）。这样做会让您回到保持版本号相同的问题，如果不完全破坏链条，您永远无法完全摆脱功能。

当您的插件加载时，它可以询问主机它支持什么级别的功能（合同版本） - 如果它是旧的主机/较新的插件方案：或者，对插件进行编程以减少其运行时功能以处理较少的主机功能，或者干脆拒绝加载。无论如何，您可能应该执行这些检查，因为没有魔法可以让您的插件利用主机中根本不存在的功能！Microsoft 的 MAF 框架试图通过使用 shim 基础结构来实现这一点，但对于大多数人来说，它会导致大量的复杂性。

因此，您需要考虑的一些事项是：

1.  确定您的可扩展性要求！您想要完成的一切都将花费您进行持续维护。
2.  想想你将如何弃用功能
3.  不要忘记您的合约将包含实体以及逻辑合约，这些与逻辑合约的考虑略有不同，因为它们通常被传递得更多。
4.  仔细考虑是否在编译时而不是运行时更好地执行每个兼容性检查（反之亦然）
5.  版本编号！程序集版本号非常适合运行时行为，文件版本号可以帮助您在版本控制中将 DLL 跟踪回源 - 充分利用它们！
6.  如果您正在执行自定义 DLL 解析，请使用 app.config 来定义您的自定义 DLL 位置，而不是程序集解析事件。配置方法更容易预测，而且，嘿，它是在易于阅读的 Xml 中声明的！Fusion Log Viewer 还将很好地报告您的 DLL 在探测链中的插入位置，而 assembly-resolve 事件将隐藏您在代码中的所有逻辑和规则。唯一真正的缺点是使用 app.config 意味着更改不会生效，直到您的应用程序重新读取配置文件（通常是应用程序重新启动），但如果您正在对插件进行 AppDomain 隔离，您甚至可以解决这个问题。

与您的“core.dll”问题有关...我认为，对您来说，这是一个相对简单的问题。您的核心合同 DLL 中的所有内容都应该存在于版本命名空间下（参见上文，Company.Product.v1_0 等），因此您的 DLL 还包含版本号实际上是有意义的。这将消除您的 DLL 在部署到 bin 文件夹时相互覆盖的问题。不要依赖 GAC - 从长远来看，这将是一个痛苦。令人遗憾的是，开发人员似乎总是忘记 GAC 会覆盖所有内容，这可能会成为调试的噩梦——它还会影响您在权限方面的部署方案。

如果您确实需要保持 DLL 名称相同 - 您可以在您的应用程序中创建一个“本地 gac”，这将使您能够以一种不会相互覆盖的方式存储您的 DLL，但仍然可以通过运行时。查看 app.config 中的“绑定重定向”（在[此处查看我的答案](https://stackoverflow.com/questions/3190107/microsoft-application-block-dll-v2-and-v4-1-references/6405693#6405693)）。这可以与应用程序 bin 文件夹下的“伪 GAC 文件夹结构”结合使用。然后，您的应用程序将能够找到所需的任何版本的 DLL，而无需任何自定义程序集解析代码逻辑。我将使用您的应用程序部署所有以前支持的 core.dll 版本。如果您的应用程序升级到版本 9，并且您决定同时支持版本 7 和 8 的插件，那么您只需要包含 Core.7.dll、Core.8.dll 和 Core.9.dll。您的插件加载逻辑应该检测对旧版本 Core 的依赖关系，并提醒用户插件不兼容。

这个话题有很多，如果我想到与您的事业相关的其他任何事情，我会回来查看...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:46:27.037

无论您的原因是什么来避免您的 3 点（我认为这更可靠和恰当），您都可以利用[Assembly Resolve Event](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)。

在 core.dll 中包含如下代码

```
static Assembly AppDomain_AssemblyResolve(object sender, ResolveEventArgs args)
       {
            //replace the if check with more reliable check such as matching the public key as well
            if (args.Name.Contains(Assembly.GetExecutingAssembly().GetName().Name))
            {
                Console.WriteLine("Resolved " + args.Name + " as " + Assembly.GetExecutingAssembly().GetName());
                return Assembly.GetExecutingAssembly();
            }

            return null;
       } 
```

在尝试加载插件之前绑定上述处理程序。如果您在当前 Appdomain 中加载插件，则将其绑定到`AssemblyResolve`当前域。

例如

```
[SecurityPermission(SecurityAction.Demand, ControlAppDomain = true)]
public static void LoadPlugins()
{
    AppDomain.CurrentDomain.AssemblyResolve += AppDomain_AssemblyResolve;
    Assembly pluginAssembly = AppDomain.CurrentDomain.Load("MyPlugin");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:37:41.253

您也许可以使用[绑定重定向](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)。

# css - CSS3 - 进度条设计

> ID：12177640
> 
> 赞同：1
> 
> 时间：2012-08-29T12:12:25.267
> 
> 标签：css

我试图给我网站上的进度条一个漂亮的样式（它们都使用 jQuery UI）。我希望它看起来像这样：（下面有一个很好的斜角效果和一个很好的进度指示器）

![进度条](../Images/94775f9ebe22891c0dd37139cae97486.png)

我试着用 CSS3 玩一点来得到这样的东西，但我找不到一个好的方法，而且我尝试的不是很漂亮，甚至看起来不像上面的图片......

这是我的尝试：http: [//jsfiddle.net/xw6zL/2/](http://jsfiddle.net/xw6zL/2/) ...

任何想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T22:27:50.437

我认为这很接近：http: [//jsfiddle.net/xw6zL/4/](http://jsfiddle.net/xw6zL/4/)

摆弄它:)

* * *

该效果是通过在每个元素的上下边框下方添加两个硬盒阴影来实现的。[在这里](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)查看它的系统税。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T22:13:14.460

这是一些更深入的链接，例如您的示例：
[http ://www.red-team-design.com/stylish-css3-progress-bars](http://www.red-team-design.com/stylish-css3-progress-bars)
[http://lab.galengidman.com/progress-bars/](http://lab.galengidman.com/progress-bars/)
[http://sevenspark.com/free-stuff/css3-progress-bars](http://sevenspark.com/free-stuff/css3-progress-bars)

我认为这些都是非常不错的 CSS3 条。其中每一个都有教程和源代码来提供帮助。

# css - IE8 将鼠标悬停在列表中的 iframe 和 js 上（无 href！）

> ID：12177641
> 
> 赞同：1
> 
> 时间：2012-08-29T12:12:28.587
> 
> 标签：css, iframe, internet-explorer-8, hover, html-lists

我正在尝试创建一个自定义的社交媒体共享列表，其中包含指向某些社交媒体（twitter 等）的图标的 href 链接。该`<ul>`列表还包括两个不是简单的 href 链接的“外部”元素：

*   Facebook“喜欢”按钮作为 iFrame，以及
*   Google +1 按钮作为 js

请参阅[jsfiddle上的简化示例](http://jsfiddle.net/milanouser/V35BC/)

为了整理我的网站，我决定只显示一排图标（链接），其他图标仅在将鼠标*悬停*在包装 div 上时可见（类似于 wordpress 的性感书签插件，只是没有讨厌的用户跟踪）。

这在除 IE8 之外的所有浏览器中都可以正常工作（令人震惊......我放弃了 IE7 和更早版本）：
当悬停在 href 链接上时，FB“Like”和“g+1”按钮都可见，但在尝试悬停时立即消失或单击这些按钮。

尝试调整窗口大小以仅显示三个“图标”：将鼠标悬停在其他两个 href“图标”上可以正常工作，但将鼠标悬停在“喜欢”和“1+”上将不起作用

这让我相信问题在于 IE8 无法将列表元素中的 iframe 和 js 识别为可以悬停的有效元素。怎么可能解决？

我知道 IE8 通常存在悬停问题，但我找不到任何解决此特定问题的方法。

任何帮助是极大的赞赏。

谢谢

# web-config - 我可以在不使用 Visual Studio 2012 发布的情况下使用 Web Config Transform 吗？

> ID：12177647
> 
> 赞同：37
> 
> 时间：2012-08-29T12:12:44.703
> 
> 标签：web-config, visual-studio-2012

Visual Studio 2012 是否支持使用特定的 Web.config 转换运行解决方案而无需发布？我们正在使用 web.config 在发布时更改客户端设置，并希望在本地对其进行测试。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-11-12T15:10:14.787

不太一样，但您可以使用 Visual Studio 2012+*预览转换*

![预览转换](../Images/80d93f75b7250fb9145cdbb27d9576ba.png)

**注意：**如果您使用的是 SlowCheetah，您需要在预览之前保存文件。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-14T19:39:29.397

web.config 转换功能仅在发布/打包期间可用。

解决这个问题的原因是，Web 项目没有像 win 项目那样抽象出应用程序执行的备用文件夹与源所在的文件夹。正因为如此，很多 VS 代码都涉及到源 web.config。如果在 VS 不知情的情况下修改 web.config 文件本身，可能会导致奇怪的行为。

[我在http://sedodream.com/2010/10/21/ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx](http://sedodream.com/2010/10/21/ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx)上写了如何手动执行此操作的博客。

有很多人要求使用此功能，即使它可能会使他们的 Web 项目处于潜在的不良状态。由于需求如此之高，我正在考虑在 SlowCheetah 中添加一个手势，该手势也可以用于 Web 项目。我在[https://github.com/sayedihashimi/slow-cheetah/issues/39](https://github.com/sayedihashimi/slow-cheetah/issues/39)的 SlowCheetah 项目页面上遇到了一个问题来跟踪这个问题。您可以关注该问题以获取进一步的更新。这可能是我接下来要处理的项目之一，但与此同时，您可以使用上面链接中的说明。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-12T20:55:28.253

您应该查看 VS 的[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)扩展。除了发布之外，它还可以在您按 F5 时启用 XML 转换。它还支持不仅仅是 web.config 的转换。

# php - 在单个 Switch Case 中包含多个变量的“And”

> ID：12177650
> 
> 赞同：3
> 
> 时间：2012-08-29T12:12:53.497
> 
> 标签：php, switch-statement, case

我有以下声明，已进行了总结。我想知道如何在一个案例中显示两个变量。

如图所示，当满足 date_avl 和 pro_qty 的标准时，我希望 pro_st = 0，但不确定编码它的正确方法。

```
case $insert_pro :
    case $pro_exists_row['date_aval'] == '0000-00-00' : and $sql_data['pro_qty'] == 0 :
    case $sql_data['pro_date_avl'] > date('Y-m-d') :
      $sql_data['pro_st'] = '0' ;
      break ;
    default :
      $sql_data['pro_st'] = '1' ; 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:18:29.830

您看起来需要一个 if 或可能的 if/elseif 语句：

```
if (( $pro_exists_row['date_aval'] == '0000-00-00' && $sql_data['pro_qty'] == 0 ) || $sql_data['pro_date_avl'] > date('Y-m-d'))
{
    // This is the first two conditions of you case statement - either of the conditions are met
    $sql_data['pro_st'] = '0' ;
}
else
{
    // This is he default as neither of the others were met...
    $sql_data['pro_st'] = '1' ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:15:53.463

您只能使用 switch 语句来检查一个 var 的值，而不是像您尝试做的那样检查复合条件。您可能需要使用 if 语句。

# php - 使用 setinterval 从 db 向下滑动最后一个条目

> ID：12177651
> 
> 赞同：0
> 
> 时间：2012-08-29T12:12:53.917
> 
> 标签：php, jquery

我正在使用 J query .load() 将我的 MySQL 数据库中的条目显示到一个页面，并设置间隔我每秒刷新一次结果，作为我正在处理的消息传递/聊天系统的一部分。

现在，在同一页面上，我可以选择将 MSG 添加到数据库中，因此它可以正常工作并显示消息，我想要做的是向下滑动我刚刚发送的消息。

我设法做到这一点：

```
$i++; 
```

在 while 循环中为 $i == 1 的消息设置一个类；但是由于结果不断刷新，它一直在向下滑动，并且随着首页加载而向下滑动，而不仅仅是在发送新消息时。

有人可以帮我一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:23:36.943

似乎你想要的是使用一个通用的 div 来进行 msg 提交和每次刷新并向下滑动的结果显示。您应该为结果使用单独的 div 并`.load()`在其上使用，并为 msg 提交使用单独的 div，以便在间隔发生时两者都不会滑落。例如`<div class="msg_submit"></div>`用于味精提交内容并`<div class="results"></div>`用于结果和使用`$('.results').load('path');`希望它有所帮助:)

# ruby-on-rails - Capybara 改变了我的 action_mailer.default_url_options

> ID：12177655
> 
> 赞同：1
> 
> 时间：2012-08-29T12:13:06.217
> 
> 标签：ruby-on-rails, ruby, devise, capybara

我遇到了一个问题，我正在使用带有设计的 ruby​​ on rails 并想用 capybara 测试我的应用程序的流程。

当我单击电子邮件中的链接时

```
current_email.click_link 'text' 
```

它给出了一个协议错误，调试这个似乎水豚改变了设计用来制作电子邮件的主机。

所以我写了这个测试：

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../../config/environment", __FILE__)
require 'rspec/rails'
require 'capybara/rspec'
require 'capybara-webkit'
require 'capybara/email/rspec'
require 'headless'

describe 'capybara and devise are broken', type: :request do
  it 'action_mailer default url should change when visiting a page' do  
    initialValue = X::Application.config.action_mailer.default_url_options[:host]

    visit "/"

    initialValue.should_not equal X::Application.config.action_mailer.default_url_options[:host]
  end

  it 'action_mailer default url should change when clicking a link' do  
    initialValue = X::Application.config.action_mailer.default_url_options[:host]
    visit "/"
    X::Application.config.action_mailer.default_url_options[:host] = initialValue

    click_link "Can't access?"

    initialValue.should_not equal X::Application.config.action_mailer.default_url_options[:host]
  end

  it 'action_mailer default url should change when clicking a button' do
    initialValue = X::Application.config.action_mailer.default_url_options[:host]
    visit "/"
    X::Application.config.action_mailer.default_url_options[:host] = initialValue

    click_button "Sign in"

    initialValue.should_not equal X::Application.config.action_mailer.default_url_options[:host]
  end

end 
```

所有这些测试都成功了，我不知道我做错了什么。

这是我在 RoR 的第三周，所以也许这是我明显想念的东西？

Gem 版本：gem 'rails'，'3.2.7' gem 'capybara'，要求：false gem 'capybara-webkit'，'= 0.10.1'，要求：false gem 'capybara-screenshot' gem 'capybara-email'宝石'设计'，'〜> 2.0.0'宝石'devise_invitable'，'〜> 1.0.0'

# c# - C# lambda 获取不同的值列表

> ID：12177657
> 
> 赞同：1
> 
> 时间：2012-08-29T12:13:12.357
> 
> 标签：c#, linq, lambda

我有一个用户列表，如下所示：

```
List<User> users = new List<User>();

users.Add(new User(){ UserId = "11", City = "London" });
users.Add(new User(){ UserId = "12", City = "London" });
users.Add(new User(){ UserId = "12", City = "London" });
users.Add(new User(){ UserId = "11", City = "Newyork" });
users.Add(new User(){ UserId = "14", City = "Virginia" }); 
```

在这里，我想通过以下方式**获得具有相似 City**的不同 UserID`C# lambda expression`

因此，在上述情况下，我应该得到一个`List<string>`仅包含 UserId = 12 的项目，因为 UserId 是相同的，并且两个项目的城市也是相同的。

您能否让我知道如何通过 C# lambda 代码执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:15:04.580

您的`User`类型是否覆盖`Equals`和`GetHashCode`适当？如果是这样，它很简单：

```
var duplicated = users.GroupBy(x => x)
                      .Where(g => g.Count() > 1)
                      .Select(g => g.Key.UserId); 
```

如果没有，您可能应该考虑覆盖`Equals`and `GetHashCode`，或者您*可以*只使用匿名类型：

```
var duplicated = users.GroupBy(x => new { x.UserId, x.City })
                      .Where(g => g.Count() > 1)
                      .Select(g => g.Key.UserId); 
```

# android - 有没有办法找到在 Android 中打开特定文件的默认应用程序？

> ID：12177659
> 
> 赞同：3
> 
> 时间：2012-08-29T12:13:15.793
> 
> 标签：android, android-intent

我知道我可以使用 PackageManager.queryIntentActivities() 来获取 ResolveInfo 对象的列表。但是，如果用户为特定操作（或文件类型）设置了默认应用程序怎么办。有没有办法在检索到的 ResolveInfo 对象中找到哪个应用程序被设置为默认操作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:01:57.297

您可以使用on`resolveActivity()`找出`PackageManager`如果您调用`startActivity()`. `Intent`如果返回活动选择器，那么您知道有多个选择并且没有设置为首选应用程序，因此会出现一个选择器。另请注意，在美国的某些 HTC 设备上，对于某些`Intent`结构，您将始终获得 HTC 提供的中介活动类——有关更多详细信息，[请参阅此博客文章](http://commonsware.com/blog/2012/07/23/linkify-problem-patent-behavior.html)。

# android - 如何从微调器适配器获取位置？

> ID：12177662
> 
> 赞同：4
> 
> 时间：2012-08-29T12:13:23.217
> 
> 标签：android

我正在用 cat Category 类型的通用 ArrayList 填充微调器。

现在，我想从中获取特定项目的位置；所以，我尝试了下面的代码，但它总是返回 S。

```
if (Singleton.getCategory() != null) {
    cat item =new cat();
    String cat= Singleton.getCategory().toString();
    int catid=  Singleton.getCategoryid();

    item.setName(cat);
    item.setcatId(catid);

    int spinnerPosition=selcategaryadapter.getPosition(item);

    //set the default according to value
    selCategary.setSelection(spinnerPosition);
} 
```

这是我填充微调器的方法：

```
JSONArray jsonarray=JSONFunction.getJSONCategary(); 
JSONObject json1=null;

ArrayList<eexit> listCategory= new ArrayList<eexit>();

try {
    for(int i=0;i< jsonarray.length();i++) {
        json1=jsonarray.getJSONObject(i);
        arrayCategary[i]=json1.getString("Name")

        cat item=new cat();  
        item.setName(json1.getString("Name"));
        item.setcatId(Integer.parseInt(json1.getString("CategoryID")));
        listCategory.add(item);

    }

} catch (Exception e) {
    // TODO: handle exception
}

ArrayAdapter<eexit> selcategaryadapter = new ArrayAdapter<eexit>(Activity.this,R.layout.spinner_layout, listCategory);
selcategaryadapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );                                  
selCategary.setAdapter(selcategaryadapter);
selCategary.setPrompt("Select Category"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:22:50.027

像这样使用**setOnItemSelectedListener**

```
amountSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View view,
                int position, long arg3) {

            cat item =(car) view.getTag();

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:19:09.577

我不确定您在哪里实施`OnItemSelectedListener()`了四个 Spinner。如果您实施它，那么您可以直接获得位置。

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
        // your code here
    }

    @Override
    public void onNothingSelected(AdapterView<?> parentView) {
        // your code here
    }

}); 
```

# android - 动态添加的 TextView 不可见但隐藏了其他元素

> ID：12177667
> 
> 赞同：0
> 
> 时间：2012-08-29T12:13:40.403
> 
> 标签：android, android-layout, layout

我在将`TextView`s 添加到 Layout 时遇到问题。有些地方没有显示其他人？？这是我生成的代码`TextView`

```
tv = new TextView(c);
tv.setLayoutParams(lp);
findAndSetAttributes(tv);
tv.setTextSize(22);
tv.setTextColor(Color.BLACK);
if(!isEmpty());
tv.setText(getObjectsContent());
v = tv;
return v; 
```

如果我解析这个 XML 文件，则只显示第一个`TextView`，而另一个不显示，但似乎`TextView`已添加到布局中但不可见？我尝试过，`setVisibility`但没有任何反应。

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="128dp"
        android:layout_marginTop="57dp"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/linearLayout1"
            android:layout_alignParentLeft="true"
            android:layout_marginBottom="22dp"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <!-- this TextView is displayed?? -->
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/editText1"
            android:layout_alignBottom="@+id/editText1"
            android:layout_alignParentRight="true"
            android:layout_marginRight="21dp"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/editText1"
            android:layout_marginLeft="18dp"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/textView2"
            android:layout_alignBottom="@+id/textView2"
            android:layout_toRightOf="@+id/linearLayout1"
            android:text="Button" />

        <SeekBar
            android:id="@+id/seekBar1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/button1"
            android:layout_marginTop="36dp" />

        <TextView>
        </TextView>
    </LinearLayout>

</RelativeLayout> 
```

**编辑** 这里“绘制”视图的活动

```
 public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.gui);

    layout = (LinearLayout) findViewById(R.id.linlayout);   

 //   setResult(RESULT_OK,newIntent);

}

public void drawGUI() {
    viewObjects = new View[MainActivity.xm.objects.size()];
    viewLayouts = new ViewGroup[MainActivity.xm.objects.size()];

    iterativAdd(layout,0);

}

public ViewGroup iterativAdd(ViewGroup root, int from) {
    guiObjects gobj;
    for(int i =from; i<MainActivity.xm.objects.size();i++) {
        gobj = new guiObjects(i);
        if(gobj.isLayout()) {
            layoutlist.add(MainActivity.xm.objects.get(i));
            root.addView(iterativAdd(gobj.makeLayout(this), i+1));
            break;
        }
        else {
            viewObjects[i] = gobj.makeObject(this);

            if(viewObjects[i]!= null) {
                root.addView(viewObjects[i]);
                Toast t = Toast.makeText(this, "Object added "+MainActivity.xm.objects.get(i), Toast.LENGTH_SHORT);
                t.show();
                continue;
            }
        }
    } 
    return root;

} 
```

我添加其他布局的根布局是线性布局，我不知道这是否是我的正确选择。但我无法弄清楚为什么 Textview 是不可见的？？？

有任何想法吗？

# java - 从 keyListener 访问 JComponent

> ID：12177669
> 
> 赞同：0
> 
> 时间：2012-08-29T12:13:42.933
> 
> 标签：java, swing, jtextarea, keylistener

1.  `JPanel(a).JPanel(b).JLabel`
2.  `JPanel(a).JTextArea`

我添加了一个`KeyListener`到`JTextArea`. 当它被调用时，它应该访问`JLabel`并返回`getText()`。

我可以`JPanel(a)`通过`getSource()`/到达`getParent()`，但我不知道如何“转身”然后走另一条路......

这可能吗？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:43:18.413

解决了！

```
JPanel a = (JPanel) ((Component) arg0.getSource()).getParent();
JPanel b = (JPanel) a.getComponent(0);
String textInJLabel = ((JLabel) b.getComponent(0)).getText(); 
```

对于偶然发现这一点的人，请注意以正确的`getComponent(int index)`方法设置索引。此代码中的代码适用于我的情况。

# sql - 在嵌套循环连接中哪个表被认为是“内部”

> ID：12177672
> 
> 赞同：6
> 
> 时间：2012-08-29T12:13:50.787
> 
> 标签：sql, join, nested-loops

谁能告诉我哪个表被认为是嵌套循环连接中的内部表？例如，如果查询是`from a inner join b on...`，则哪个`a`、 或`b`将被视为内部？我知道是这样`b`，但是从[dbsophic的文章来看，](http://www.dbsophic.com/SQL-Server-Articles/physical-join-operators-in-sql-server-nested-loops.html)**具有良好索引的内部输入的 Small outer loop**下的第一个示例似乎暗示了相反的情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T12:21:04.017

为了确定...

*   “INNER JOIN”是一个逻辑（关系）连接运算符
*   内表和外表是物理嵌套循环连接运算符中的概念

物理运算符的内部和外部表的选择由优化器进行，与逻辑运算符**无关。**

现在，嵌套循环伪代码是这样的

```
for each row R1 in the outer table
    for each row R2 in the inner table
        if R1 joins with R2
            return (R1, R2) 
```

所以理论上没什么区别。

在实践中，优化器将为内表和外表找出最佳方法：这是您的文章链接应该描述的内容。又如何减少迭代次数

为了完整性......`INNER JOIN`逻辑运算符是可交换的和关联的
所以`A INNER JOIN B`是相同的`B INNER JOIN A`。
这里没有内表和外表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:16:21.647

实际上，`inner`如果两个表中都存在匹配项，则两个表都只返回行。
在进行外部联接时，您指定哪个表应该是外部表：

*   左外连接：第一个表是返回所有行的表，第二个表是只返回匹配行的表。
*   右外连接：第二个表是返回所有行的表，第一个表是只返回匹配行的表。
*   全外连接：返回两个表中的所有行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T19:02:16.433

我想知道我们是否需要将思维分为“外连接”和“内循环连接”。

对于外部联接，有一个约定（传统？）将 LEFT 的 LEFT JOIN 命名为“外部表”。（见下文来自 Sybase）这似乎是句法名称。（丹尼尔正在解释这一点。）

对于inner join没有这样的区别，但是对于nested loop join，需要判断哪个表成为驱动表，由优化器决定。

Sybase 有一篇文章描述了内部表和外部表。 [http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc32300.1570/html/sqlug/sqlug153.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc32300.1570/html/sqlug/sqlug153.htm) “术语外表和内表描述了表的位置在外连接中”

# web-services - POST 请求不适用于 localhost 的 IP 地址

> ID：12177674
> 
> 赞同：5
> 
> 时间：2012-08-29T12:14:02.447
> 
> 标签：web-services, rest, web

我在本地机器上的 tomcat-7 上托管了一个 REST Web 服务。我有一个将文件上传到 REST 服务的应用程序。

现在我面临的问题是，当我使用以下 URL 发布上传的文档时，该文档已成功上传。

```
http://localhost:8080/ResourceNet/upload 
```

但是，当我将“localhost”替换为我的机器的 IP 并使用以下 URL 时

```
http://192.168.68.193:8080/ResourceNet/upload 
```

然后什么也没有发生。POST 请求永远不会到达 REST 服务。但是，GET 请求与 URL-2 一起正常工作。

请帮助我解决以下几点：

1.  为什么 POST 不使用系统的 IP 地址，但在使用 'localhost' 代替 IP 时工作。

2.  为什么 GET 与 IP 地址正常工作是 URL 而 POST 不是。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:07:05.057

一个原因可能是[服务器绑定到 localhost](https://stackoverflow.com/questions/18617/how-do-you-configure-tomcat-to-bind-to-a-single-ip-address-localhost-instead-o)并且只会侦听来自 localhost 的请求，但是由于您提到 GET 工作，它可能不是这样。

我要检查的另一件事是您的 PC 或网络上的防火墙。事实上，localhost 是一个[环回地址](http://compnetworking.about.com/od/workingwithipaddresses/g/127_0_0_1_def.htm)，因此当您使用它时它不会进入网络。使用 PC 的实际 IP 进入网络并路由回 PC。也许代理或防火墙会丢弃 POST 而只允许 GET？

# html - CSS3隐藏 元素并出现在 点击

> ID：12177677
> 
> 赞同：0
> 
> 时间：2012-08-29T12:14:05.453
> 
> 标签：html, css

[http://jsfiddle.net/EUFrH/](http://jsfiddle.net/EUFrH/)

我希望从列表中隐藏“子行”行，当单击“子”行时，它会将其他行向下推以显示“子行”li。

只是在寻找一种无需使用 Js 或 Jquery 的方法

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:01:43.723

您可以尝试使用`<input type="checkbox">`or来完成此操作`<input type="radio">`。例如，这里描述了该技术：http: [//www.inserthtml.com/2012/04/css-click-states/](http://www.inserthtml.com/2012/04/css-click-states/)

不幸的是，您当前的标记似乎无法做到这一点。可以通过这种方式修改 HTML：

```
<li class="sub">
  <label for="subline-enabler">
    ... content omitted ...
  </label>
  <input type="checkbox" id="subline-enabler" />
  <ul class="subline">
    <li>
      ... content omitted ...
    </li>
  </ul>
</li> 
```

演示在这里：http: [//jsfiddle.net/EUFrH/3/](http://jsfiddle.net/EUFrH/3/)

# jquery - $(Parent Child) 和 $(Parent).find(Child) 之间的区别（在 jQuery 中）

> ID：12177679
> 
> 赞同：0
> 
> 时间：2012-08-29T12:14:07.083
> 
> 标签：jquery

> **可能重复：**
> [jQuery 单一选择器与 .find()](https://stackoverflow.com/questions/6230266/jquery-single-selector-vs-find)

jQuery 中的 $(Parent Child) 和 $(Parent).find(Child) 有什么区别吗？

您可能有多个孩子，例如：

`$("div").find("span")`这将返回所有子跨度。但是不也一样`$("div span")`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:23:38.167

一个非常重要的区别是它`$`具有多种含义，因此在与用户定义的字符串一起使用时容易受到攻击，而`find`不是。

例如。

```
$('.items .'+location.hash.substr(1)) // very bad idea
$('.items').find('.'+location.hash.substr(1)) // this is OK 
```

# javascript - 如何自动将 Fusion Widgets 导出为图像？

> ID：12177680
> 
> 赞同：0
> 
> 时间：2012-08-29T12:14:10.247
> 
> 标签：javascript, asp.net, fusioncharts

我在我的应用程序中使用 Fusion Charts Suite，但在自动将 Fusion Widgets 和 Fusion Maps 导出为图像时遇到了问题。使用右键单击选项可以实现，但我希望它像 Fusion Charts 一样自动完成。

我尝试了多种解决方案，但未能做到这一点。

如果有人知道该怎么做，请帮助我。

谢谢和问候， 拉胡尔·兰詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:45:46.433

使用什么 API 来自动执行此操作？

尝试调用`mapObject.exportMap()`.

[编辑]

我找到了另一种解决方法：尝试`mapObject.ref.exportChart()`功能。

# ios - 我可以使用 BLE 将 Iphone 4s 连接到最多 3 个设备（温度传感器）吗

> ID：12177682
> 
> 赞同：1
> 
> 时间：2012-08-29T12:14:12.610
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy

我需要知道我是否可以将我的 iphone 4s 连接到三个不同的设备。这 3 台设备是相同类型的设备。这些将是温度传感器，所以我必须从每个传感器接收温度。我已经看到可以将多个设备连接到 iphone，但我不确定是否可以使用蓝牙 4.0（低功耗）将正常数据（温度、GPS 位置等）从多个设备传输到 Iphone 4s。

谢谢你的帮助。

哈维尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T20:14:27.240

我在 Corebluetooth ML 上问过同样的问题，一位 Apple 工程师说 OsX 有 10 个限制（在 OS 中硬编码），但在 iOS 中没有限制（最多不是硬编码）。无论如何，一个共同的经验法则是在 iOS 中也考虑这个限制。

# vb.net - 将逗号分隔的数字作为 SQL 参数传递

> ID：12177685
> 
> 赞同：1
> 
> 时间：2012-08-29T12:14:24.590
> 
> 标签：vb.net, ado.net

我有查询，我正在使用绑定变量。查询就像

```
Select...
From....
where Ids1 in (@SQLParameter1)
and  Ids2 in (@SQLParameter2)
and Ids3 in (@SQLParameter3) 
```

我有`@SQLParameter1`, `@SQLParameter2`,`@SQLParameter3`字符串格式的值，所有数字用逗号分隔。我提到 SQLParameter dataType 为字符串，但 Ids1、Ids2、Ids3 是数字列，因此会引发错误。我尝试将 DataType 作为 Varnumeric，但它没有用。

> 那么如何将逗号分隔的数字作为 SQL 参数传递？？？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:15:31.020

如果您使用的是 SQL Server 2008，您可以为每个 Id 集合创建一个带有表值参数的存储过程。见下文：

```
CREATE TYPE SQLParameter1TableType AS TABLE 
( 
    Id INT
);
GO

CREATE PROCEDURE dbo.TestStoredProcedure
(
    @SQLParameter1 SQLParameter1TableType READONLY
)
AS

Select...
From....
where Ids1 in (@SQLParameter1)
GO

DECLARE @SQLParameter1 AS SQLParameter1TableType;

INSERT INTO @SQLParameter1 (Id)
...select from

EXEC dbo.TestStoredProcedure @SQLParameter1; 
```

当然，如果您使用的是 ADO.NET，那么这里有一篇有用的文章，它将向您展示如何在 .NET 中使用表值参数（您需要将语言转换为 VB.NET）： http: [//orionseven.com/博客/2009/09/30/using-table-valued-parameters-in-sql-server-2008-and-c/](http://orionseven.com/blog/2009/09/30/using-table-valued-parameters-in-sql-server-2008-and-c/)

这是 SQL Server 表值参数的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

....或者，您可以将逗号分隔的字符串传递给 SQL 表值函数，该函数拆分字符串并返回具有单列的表：

```
SELECT...
FROM....
where Ids1 in (SELECT * FROM dbo.SplitString(@SQLParameter1)) 
```

...或者您可以创建一个接受 Id 的标量函数并检查它是否存在于提供的逗号分隔字符串中，并相应地返回 true/false：

```
SELECT...
FROM.... AS T
WHERE dbo.ExistsInCommaSeperatedString(T.Id, @SQLParameter1) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:42:39.020

每个命令参数只能传递一个值。这样的值列表是不可能的。

您将不得不动态构建 SQL。

```
string sql = String.Format(
    "SELECT * FROM tbl WHERE id1 IN ({0}) AND id2 IN ({1}) AND id3 IN ({2})",
    id1List, id2List, id3List
); 
```

但要小心 SQL 注入。根据 id 列表的来源，您将不得不选择更复杂的方法并动态创建参数列表。

```
SELECT * FROM tbl
WHERE
    id1 IN (@1, @2, @3, @4) AND
    id2 IN (@5, @6, @7) AND
    id3 IN (@8, @9) 
```

* * *

不知道是不是这样，但是如果三个id建立一个主键，这种做法就不会选择唯一的主键组合。在这种情况下，查询必须如下所示

```
SELECT * FROM tbl
WHERE
    (id1 = @1 AND id2 = @2 AND id3 = @3) OR
    (id1 = @4 AND id2 = @5 AND id3 = @6) OR
    (id1 = @7 AND id2 = @8 AND id3 = @9) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T16:32:44.940

我使用动态 SQL 和快速正则表达式处理了这个问题，以丢弃任何不是数字或逗号的东西。我*认为*这可以保护事物。是否存在仅涉及数字和逗号的 SQL 注入攻击？我很想得到一个明确的答案。但这是我在 vb.net 中所做的：

intStr = "1001,1002,1003"

Dim RegexObj As Regex = New Regex("[^\d|^\,]")

If RegexObj.IsMatch(intStr) Then intStr = "0" End If

SQL = "SELECT * FROM myTable WHERE ID IN (" & intStr & ")" 等..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-15T05:14:48.297

在 C# 中通过 ADO.NET 我们可以在下面传递逗号分隔值：

字符串 intTransIds = string.Join(",", intTransId.ToArray()); db.AddInParameter(cmd, "@intTransIDs", DbType.String, intTransIds);

在存储过程方面，我们可以创建一个变量 @intTransIDs varchar(max) 来处理逗号分隔的字符串。

# macos - 如何让 macvim 选项卡以图形方式显示？

> ID：12177686
> 
> 赞同：9
> 
> 时间：2012-08-29T12:14:27.057
> 
> 标签：macos, vim, macvim

我已经通过安装 macvim`brew install macvim`并在首选项中打开了“每个文件都有一个选项卡”选项，但我得到的选项卡是 VIM 样式选项卡。不是您在 macvim 主页上看到的操作系统选项卡：[http](http://code.google.com/p/macvim/) ://code.google.com/p/macvim/ 。请参阅下面的屏幕截图。

我可以做些什么来获取操作系统选项卡吗？

![Macvim 截图](../Images/65ad4e1cf90dd77ee7b232dfdc77562e.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-29T13:25:13.180

尝试做`set guioptions+=e`。这应该可以解决您的问题。

来自`help guioptions`：

```
'e'     Add tab pages when indicated with 'showtabline'.
        'guitablabel' can be used to change the text in the labels.
        When 'e' is missing a non-GUI tab pages line may be used.
        The GUI tabs are only supported on some systems, currently
        GTK, Motif, Mac OS/X and MS-Windows. 
```

要查看您的当前值，请`guioptions`执行`:set guioptions?`

很可能在你的`.vimrc`你`e`从你的`guioptions`. 这是我`guioptions`的工作方式你想要的： `guioptions=gtrLme`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T17:40:24.583

始终显示标签栏的其他选项。

添加到 vimrc：

```
set showtabline=2 
```

来自 vim_mac 邮件列表档案。 [https://groups.google.com/forum/#!searchin/vim_mac/showtab/vim_mac/zvw9MQYhnsg/jDNsqgDsHQ4J](https://groups.google.com/forum/#!searchin/vim_mac/showtab/vim_mac/zvw9MQYhnsg/jDNsqgDsHQ4J)

# android - 再次按下后退按钮时，对话框内的反馈表单导致错误android

> ID：12177687
> 
> 赞同：0
> 
> 时间：2012-08-29T12:14:44.347
> 
> 标签：android, android-alertdialog, removechild

我正在尝试在对话框中制作反馈表。

当我按下android的后退按钮时，它会正常消失，但是当我再次按下它时，它会给我一个异常：

```
java.lang.IllegalStateException: The specified child already has a parent. 
You must call removeView() on the child's parent first. 
```

我已经搜索了很多，尝试了几种调用方法`removeView()`和许多其他方法 - 但没有一个奏效。

# python - 在python中调用方法

> ID：12177689
> 
> 赞同：0
> 
> 时间：2012-08-29T12:14:48.350
> 
> 标签：python

我是 python 的新手。我读到每个标识符都是 python 中的对象引用（包括原始数据类型）。我们使用对象引用来调用对象方法。例如

```
a="hello world" 
```

这`a`是对字符串对象的引用，我使用这个引用来调用字符串对象的方法。但是我今天发现我可以直接使用对象本身而不是引用。即两者 `a.upper()`都是`"hello world".upper()`有效的。我需要知道在python中调用对象方法的底层逻辑。我如何能够同时使用对象引用和对象本身来调用方法。以上两种方法有区别吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T16:46:03.297

引用变量只是对象的名称。 `"hello world"`只是一个未命名的对象 - 一个对象不需要名称来调用它的方法，它只需要存在。

# directx - DirectX - 缩小纹理质量

> ID：12177692
> 
> 赞同：0
> 
> 时间：2012-08-29T12:14:54.243
> 
> 标签：directx, textures

我正在为 DirectX 中的纹理过滤而苦苦挣扎。当我将带纹理的四边形放置在远离相机的地方时，纹理质量会急剧下降——尤其是在处理没有纹理的文本时。无论性能如何，我都希望尽可能保持最好的质量。目前我使用：

```
d3dDevice->CreateTexture(Width, Height, 0, D3DUSAGE_AUTOGENMIPMAP, D3DFMT_A8R8G8B8, D3DPOOL_MANAGED, &gTexture, NULL);

d3dDevice->SetSamplerState(0, D3DSAMP_MAGFILTER, D3DTEXF_ANISOTROPIC);
d3dDevice->SetSamplerState(0, D3DSAMP_MINFILTER, D3DTEXF_ANISOTROPIC);
d3dDevice->SetSamplerState(0, D3DSAMP_MIPFILTER, D3DTEXF_ANISOTROPIC); 
```

但是，缩小仍然很糟糕（例如，与图像编辑器执行的调整大小相比）。做这个的最好方式是什么？什么是“最无损”的过滤方法。提前致谢！

# sql - 当 TRIGGER 需要在同一个表中选择和插入行时发生变异表问题

> ID：12177693
> 
> 赞同：4
> 
> 时间：2012-08-29T12:14:54.217
> 
> 标签：sql, oracle, plsql, oracle11g

我们有以下要求：

**表1**：复合主键`version, id`

```
------------------------------------
version   id     col1  coll2  active
------------------------------------
 1        123    'A'   'B'     'N'
 2        123    'C'   'D'     'Y'
 1        124    'E'   'F'     'Y' 
```

现在对于`table1`给定的任何插入和更新`id`，应该使用以下属性（由触发器派生）创建一个新行：

1.  `Version``id`对于给定的和应该加 1
2.  大多数当前行应该变为活动状态（`active`列设置为`Y`）

例如

```
INSERT INTO table1(id, col1, col2) VALUES (123, 'X', 'Y');

------------------------------------
version   id     col1  coll2  active
------------------------------------
 1        123    'A'   'B'     'N'
 2        123    'C'   'D'     'N'
 3        123    'X'   'Y'     'Y' 
 1        124    'E'   'F'     'Y' 
```

第 3 行已创建

```
UPDATE table1 SET col1 = 'F' WHERE id = 124;

------------------------------------
version   id     col1  coll2  active
------------------------------------
 1        123    'A'   'B'     'N'
 2        123    'C'   'D'     'N'
 3        123    'X'   'Y'     'Y' 
 1        124    'E'   'F'     'N'
 2        124    'F'   'F'     'Y' 
```

最后一行被创建

```
DELETE FROM dbo.table1 WHERE id = 124;

------------------------------------
version   id     col1  coll2  active
------------------------------------
 1        123    'A'   'B'     'N'
 2        123    'C'   'D'     'N'
 3        123    'X'   'Y'     'Y' 
 1        124    'E'   'F'     'N'
 2        124    'F'   'F'     'N' 
```

id 124 的所有行都变为非活动状态。

这似乎是建模问题，但我们必须使用 TABLE1 和支持触发器来提供此功能。

我们无法根据需要绕过修改表问题`select max(version)` ，然后插入到同一个表中，任何人都可以提出解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:38:08.927

我不喜欢数据库设计，太可怕了，但你说你被它困住了。使用带有 INSTEAD OF 触发器的视图怎么样？

1) 将表重命名为例如 TABLE1_BASE

2) 创建视图 TABLE1 为 SELECT * FROM TABLE1_BASE

3) 添加一个 INSTEAD OF 触发器，如下所示：

```
create trigger table1_io
instead of insert or update or delete on table1
for each row
begin
  if inserting or updating then 
      update table1_base
      set active = 'N'
      where id = :new.id
      and active = 'y';

      insert into table1_base...;
  elsif deleting then
      update table1_base
      set active = 'N'
      where id = :old.id
      and active = 'y';
  end if;
end; 
```

（类似的东西）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T12:36:43.547

正如您所说，这是一个建模问题，变异表错误通常表明有更好的方法来实现这一点。

有一些方法可以解决这个问题，但它们都不是最佳实践，并且必须权衡增加的复杂性与业务逻辑/表的重要性。如果这是一个键表，您真的想在应该是简单插入的内容上使用复杂的逻辑吗？

**方法 1** 将更新放在一个包过程中的表上。从调用此过程的触发器运行作业。这意味着您现在有两个事务：原始插入和后续。

**方法 2（类似于 1）** 创建一个高级队列和对象类型来封装您希望进行的更改。在插入期间添加到队列中。将对象出列并根据需要应用更改。在你的情况下：立即。方法 1 和 2 的优点是初始事务永远不会因为后续清理而停止。

**方法 3（可行，但由于复杂性不是最佳实践）** 您需要两个触发器：表上的插入后和表上每一行的插入后

两个触发器都调用一个封装你的逻辑的包，它看起来像这样

```
 CREATE OR REPLACE PACKAGE BODY XYZ AS
   TYPE t_template_rec
   IS
      RECORD (case_id     NUMBER (10), objective_id NUMBER (10));

   TYPE t_template_table IS TABLE OF t_template_rec;

   g_change_table t_template_table
         := t_template_table () ;

   TYPE t_deliv_rec IS RECORD (case_id NUMBER (10), stage_id NUMBER (10));

   TYPE t_deliv_table IS TABLE OF t_deliv_rec;

   g_deliv_table                         t_deliv_table := t_deliv_table (); 
```

表级触发器将主键和数据传递给此过程

```
 PROCEDURE CHECK_FOR_TEMPLATES (case_id_in     IN NUMBER,
                                  objective_in   IN NUMBER)
   IS

   BEGIN

      g_change_table.EXTEND;
      g_change_table (g_change_table.LAST).case_id := case_id_in;
      g_change_table (g_change_table.LAST).objective_id := objective_in;
   END CHECK_FOR_TEMPLATES; 
```

行级触发器调用同一个包中的不同过程

```
 PROCEDURE ADD_TEMPLATES_ON_STATEMENT
   IS

      v_count          NUMBER (10);
      v_case_id        NUMBER (10);
      v_objective_id   NUMBER (10);
   BEGIN
      FOR i IN g_change_table.FIRST .. g_change_table.LAST
      LOOP
         SELECT   COUNT ( * )
           INTO   v_count
           FROM   XYZ.DELIVERABLE_TEMPLATE dt
          WHERE   DT.INITIATIVE_OBJECTIVE_ID =
                     g_change_table (i).objective_id;
         --check if there is any work to be done
         IF v_count > 0
         THEN
            v_case_id := g_change_table (i).case_id;
            v_objective_id := g_change_table (i).objective_id;
            --do some work here
         END IF;
      END LOOP;

      g_change_table.delete;
  END ADD_TEMPLATES_ON_STATEMENT; 
```

为了清楚起见，我删除了注释/调试/断言。我正在使用方法#3，一旦我开始工作，它就可以正常工作，但如果我不得不返回并在该表上实现更多业务逻辑，我会小心处理它。

# setup-project - 在高级安装程序的启动条件中检查注册表

> ID：12177695
> 
> 赞同：2
> 
> 时间：2012-08-29T12:14:58.787
> 
> 标签：setup-project, installation-package, advanced-installer

这是场景。当用户具有特定用户名和计算机名称等某些参数时，我正在使用 app1 打印到注册表中。检查后，我需要启动主应用程序。有什么方法可以在启动条件下检查注册表项？

有关问题的详细信息：

我有三个应用程序，App1、App2 和 App3。我已将所有这些组合在[高级安装程序中](http://www.advancedinstaller.com). 当用户拥有正确的用户名和计算机名称时，App1 会打印出注册表项。我已将 App1 置于先决条件中。App2 是设置应用程序时间线的那个，所以基本上 app2 会打印出另一个注册表项。我已将 app2 放在基于特色的安装文件夹中。App3 是需要部署在用户计算机上的主要应用程序。我不知道该怎么做？我尝试了多种方案，但对我来说并没有真正奏效。我想如果在启动主应用程序期间我可以检查注册表是否有两个键，如果是，则安装 application3，如果没有，然后告诉用户您不是该应用程序的授权用户。我不知道该怎么做？

如果需要更多详细信息，请评论或询问我！

感谢大家的努力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:29:44.257

如果 App1 和 App2 的密钥都需要通过 App3 的启动条件进行检查，那么您需要将它们都添加为预安装先决条件，而不是基于功能，因此它们会在 App3 启动之前安装。

添加两个先决条件后，您需要使用注册表搜索创建[自定义启动条件](http://www.advancedinstaller.com/user-guide/tutorial-professional.html#launch-conditions)。我链接的示例使用文件搜索，但您可以轻松地将其调整为注册表搜索。

# http - tshark 捕获 cookie 信息

> ID：12177696
> 
> 赞同：0
> 
> 时间：2012-08-29T12:15:03.983
> 
> 标签：http, cookies, wireshark, tshark

我是wireshark/tshark的新手，所以我想知道这样的事情是否可行。我已经将一些流量捕获为 pcap 文件。我在wireshark中打开它并应用'http.cookie'过滤器，它只给我带有cookie的数据包。从这些数据包中，我只需要特定的 HTTP 信息，例如源/目标 ip、时间戳、http.content_type、http.content_length、cookie ID 字符串和完整的请求 uri。在wireshark中有点可能。但这一切都是在存储在计算机中的离线捕获 pcap 文件上完成的。

有没有办法在我只捕获带有 COOKIES 的 HTTP 数据包的界面上使用 tshark？然后将特定信息提取到文件中。我一直在谷歌上搜索，并尝试了很多例子，但很困惑。

我想我对捕获过滤器和读取过滤器感到困惑，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:04:42.173

虽然`thark`（和 Wireshark）捕获过滤器提供了多种扩展以达到更高层的峰值，但它仍将*基于每个数据包*。这是处理 TCP 流量时的一个问题，由于重新传输，它可能包含重复的数据包。

在分析应用层协议时，先重组 TCP 流，然后再处理更高层会更合适。为此，看看[兄弟](http://www.bro-ids.org)。它还可以在命令行上运行，附带一个健壮且经过广泛测试的 TCP 重组器，并附带各种协议解析，包括 HTTP。

# android - 如何暂停通知 PendingIntent 一段时间[Android]

> ID：12177701
> 
> 赞同：1
> 
> 时间：2012-08-29T12:15:11.060
> 
> 标签：android, android-pendingintent

在我的 android 应用程序中，我使用状态栏通知为用户提供快捷方式，以便在用户不在应用程序中时重新启动应用程序。

我已经使用 android NotificationManager 实现了这个功能。

我想要实施的是一些我不希望启动 PendingIntent 的事件。
这意味着，当用户点击状态栏通知图标时，什么都不应该发生，因为当用户点击它时它会再次启动我的应用程序。

我们可以暂停或删除 PendingIntent 吗？

我已经尝试使用 AlarmManager 如下：

```
AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
alarmManager.cancel(intent); 
```

而且我也尝试设置`Notification.contentIntent`为NULL，但它也不起作用。

我应该如何实施？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:43:09.300

是的，您可以使用您指定的方法取消 PendingIntent。您需要确保传递给的 Intent`cancel()`与原始 Intent 相同。两个 Intent 的动作、数据和类别必须*完全相同*。请参阅[IntentFilter](http://developer.android.com/reference/android/content/IntentFilter.html)的文档以获得更完整的解释。

# ruby - 用 Ruby 模拟网页导航

> ID：12177707
> 
> 赞同：1
> 
> 时间：2012-08-29T12:15:28.817
> 
> 标签：ruby, forms, post, web, simulate

我正在尝试模拟用户填写表单并使用 ruby​​ 提交。我听说当您测试自己的应用程序（例如：测试 Rails 应用程序）时，可以使用一些测试框架。

我想要做的是： - 打开一个有表格的网页。- 填写表格 - 提交表格

是否有任何神奇的宝石可以这样做，还是我需要解析页面并使用带有参数的发布请求？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:20:04.410

我建议你使用 Webrat 或 Capybara。Capybara 使用 Qt 编写的嵌入式 webkit 引擎，因此您不需要任何浏览器来测试您的应用程序。

[https://github.com/brynary/webrat](https://github.com/brynary/webrat)

[https://github.com/jnicklas/capybara](https://github.com/jnicklas/capybara)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:19:51.997

尝试使用[水豚](https://github.com/jnicklas/capybara)

此外，您可以将它与 Cucumber 或 RSpec 一起使用

# c++ - 原始套接字混杂模式没有嗅探我写的内容

> ID：12177708
> 
> 赞同：8
> 
> 时间：2012-08-29T12:15:33.527
> 
> 标签：c++, c, sockets, ethernet, sniffing

我正在使用混杂模式下的原始套接字编写程序，并且我需要原始套接字而不是嗅探我发送的数据包。我只需要通过以太网 rx 线（而不是 tx 线）读取数据。有可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T06:58:27.273

解决方案是查看读取的数据包是否为 PACKET_OUTGOING。使用此选项，您可以区分放入以太网 tx 线的数据包和从 rx 线读取的数据包。

以混杂模式打开 Socket：

```
char* i = "eth0";
int fd;
struct ifreq ifr;
struct sockaddr_ll interfaceAddr;
struct packet_mreq mreq;

if ((fd = socket(PF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) < 0)
    return -1;

memset(&interfaceAddr,0,sizeof(interfaceAddr));
memset(&ifr,0,sizeof(ifr));
memset(&mreq,0,sizeof(mreq));

memcpy(&ifr.ifr_name,i,IFNAMSIZ);
ioctl(fd,SIOCGIFINDEX,&ifr);

interfaceAddr.sll_ifindex = ifr.ifr_ifindex;
interfaceAddr.sll_family = AF_PACKET;

if (bind(fd, (struct sockaddr *)&interfaceAddr,sizeof(interfaceAddr)) < 0)
    return -2;

mreq.mr_ifindex = ifr.ifr_ifindex;
mreq.mr_type = PACKET_MR_PROMISC;
mreq.mr_alen = 6;

if (setsockopt(fd,SOL_PACKET,PACKET_ADD_MEMBERSHIP,
     (void*)&mreq,(socklen_t)sizeof(mreq)) < 0)
        return -3;
//... 
```

并阅读。现在，我们可以区分 Rx 和 Tx 以太网线：

```
unsigned char buf[1500];
struct sockaddr_ll addr;
socklen_t addr_len = sizeof(addr);
n = recvfrom(fd, buf, 2000, 0, (struct sockaddr*)&addr, &addr_len);
if (n <= 0)
{
    //Error reading
}
else if (addr.sll_pkttype == PACKET_OUTGOING)
{
    //The read data are not writing by me.
    //Use only this data to copy in the other network.
} 
```

这就是全部。使用它我不会读取我写的数据。当我将网络 1 帧复制到网络 2 并将网络 2 帧复制到网络 1 时，我避免了循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T21:03:48.863

您需要创建`BPF`对应于传入数据包的（BSD 数据包过滤器）过滤器：

```
/* To obtain the BPF filter corresponding to incoming traffic:
 * sudo tcpdump -dd -i eth0 dst host YOUR_IP_ADDRESS and not src host YOUR_IP_ADDRESS 
 * The filter given below is what i get on my local machine (192.168.1.7):
 * sudo tcpdump -dd -i eth0 dst host 192.168.1.7 and not src host 192.168.1.7
 */
struct sock_filter incoming_filter[] = {       
    { 0x28, 0, 0, 0x0000000c },
    { 0x15, 0, 4, 0x00000800 },
    { 0x20, 0, 0, 0x0000001e },
    { 0x15, 0, 9, 0xc0a80107 },
    { 0x20, 0, 0, 0x0000001a },
    { 0x15, 7, 6, 0xc0a80107 },
    { 0x15, 1, 0, 0x00000806 },
    { 0x15, 0, 5, 0x00008035 },
    { 0x20, 0, 0, 0x00000026 },
    { 0x15, 0, 3, 0xc0a80107 },
    { 0x20, 0, 0, 0x0000001c },
    { 0x15, 1, 0, 0xc0a80107 },
    { 0x6, 0, 0, 0x0000ffff },
    { 0x6, 0, 0, 0x00000000 },
};

int s;
struct sockaddr_ll sock_address;
struct sock_fprog prog;

/* Init the program filter */
prog.len = 14;
prog.filter = incoming_filter; 
```

然后是您的 RAW 套接字，并绑定和...：

```
/* Create the raw socket */
s = socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL));
if (s < 0) 
{
    /* Error handling */
}

/* Build our socket */
sock_address.sll_family = AF_PACKET;
sock_address.sll_protocol = htons(ETH_P_IP);
sock_address.sll_ifindex = if_nametoindex(your_interface_name);

/* Bind */
if (bind(s, (struct sockaddr*)&sock_address, sizeof(sock_address)) < 0)
{
    /* Error handling */
}

/* Apply the filter */
if (setsockopt(s, SOL_SOCKET, SO_ATTACH_FILTER, &prog, sizeof(prog)) < 0)
{
    /* Error handling */
}

/* Infinite listen loop */
while (1)
{

    /* Handle received packet */
} 
```

**编辑**：如果你想按 Mac 地址过滤，很简单，像这样生成你的过滤器（我在这里使用我的 Mac 地址）：

```
sudo tcpdump -dd -i eth0 ether dst 00:0f:b0:68:0f:92 and not ether src 00:0f:b0:68:0f:92
{ 0x20, 0, 0, 0x00000002 },
{ 0x15, 0, 7, 0xb0680f92 },
{ 0x28, 0, 0, 0x00000000 },
{ 0x15, 0, 5, 0x0000000f },
{ 0x20, 0, 0, 0x00000008 },
{ 0x15, 0, 2, 0xb0680f92 },
{ 0x28, 0, 0, 0x00000006 },
{ 0x15, 1, 0, 0x0000000f },
{ 0x6, 0, 0, 0x0000ffff },
{ 0x6, 0, 0, 0x00000000 }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:18:44.137

您可以轻松过滤来自您的 IP 地址的内容，并将它们从您的列表中排除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-16T11:24:29.650

遗憾的是，Linux 没有提供任何选项来指定不接收原始套接字的传出数据包。

如果允许重建 Linux 内核，我建议只使用[packet_socket_type.patch](https://github.com/openwrt/openwrt/blob/master/target/linux/generic/patches-3.18/630-packet_socket_type.patch)修补内核。

在用户程序中，您可以指定您希望接收什么样的数据包。

```
int mask=0;
mask = PACKET_MASK_ANY & ~(1<<PACKET_OUTGOING) & ~(1 << PACKET_LOOPBACK);
setsockopt( raw_sock, SOL_PACKET, PACKET_RECV_TYPE, &mask, sizeof(mask)); 
```

IMO，这是真正解决问题的解决方案。

# php - 在 PHP 中使用带有 group_concat 的对象

> ID：12177709
> 
> 赞同：0
> 
> 时间：2012-08-29T12:15:34.043
> 
> 标签：php, mysql, object, group-concat

我确信这个问题的答案很简单（我希望如此）。

我正在将 mysql 中的一行加载到 php 对象中。该查询包括对 group_concat MySQL 函数的引用。

这将返回一个对象，其结构包含 group_concat 作为其键之一（如果我没有使用正确的术语，请原谅/纠正我）

当我 var_dump $row 变量时，它看起来像这样：

> object(stdClass)#21 (2) { ["id"]=> string(4) "7583" ["group_concat(resourceId)"]=> string(2) "25,26"}

我可以通过使用引用 id： $row->id ，但我不能通过使用 $row->group_concat(resourceId) 引用 resourceId

我收到以下错误：

> 调用未定义的方法 stdClass::group_concat()

请让我知道如何获取 group_concat(resourceId) 字段中的数据？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:17:04.243

`group_concat`在您的选择语句中为您使用别名。就像是

```
select group_concat(resourceId) as res_group
from your_table 
```

然后您可以使用别名引用该“列”。

# javascript - 无法播放来自 peerConnection-Connection 的视频

> ID：12177711
> 
> 赞同：0
> 
> 时间：2012-08-29T12:15:44.333
> 
> 标签：javascript, html5-video, webrtc

我为一个学生项目编写了一个小的 webRTC 示例。目的是，一个客户端（学生）通过 peerConnection 将他的视频和音频流发送到第二个客户端（导师）。沟通有效，导师得到了 SDP_OFFER 和所有这些东西。它还获得了 remoteVideo src 的 blob。但是视频输出是黑色的。在导师方面，我收到以下错误：

> 未捕获的错误：SYNTAX_ERR：DOM 异常 12
> doAnswer processSignalingMessage
> ws.onmessage

我希望有人有一个想法。谢谢！

有我的代码：

```
<!DOCTYPE html>  
<html>
    <head>
        <title>PeerConnection with an websocket</title>
    </head>
    <script>
    //variables
    var pc;
    var ws;
    var name; 

    // Local stream generation
    function gotStream(s) {
        var url = webkitURL.createObjectURL(s);
        document.getElementById("localView").src = url;
        localStream = s;
        console.log("gotStream" + s)
        console.log("Started showing loval stream. url = " + url); 
    }
    function gotStreamFailed(error) {
        console.log("Failed to get access to local media. Error code was " 
                    + error.code + ".");
    }
    function getUserMedia() {
        try {
            navigator.webkitGetUserMedia({audio:true, video:true}, 
                                        gotStream, gotStreamFailed);
        console.log("Requested access to local media");
        } catch (e) {
            console.log(e, "getUserMedia error");
        }
    }

    //peerConnection generation
    function genreatePeerConnection(){
        try{
            pc = new webkitPeerConnection00("STUN stun.l.google.com:19302", onIceCandidate);
            console.log("new peerConnection!");
            pc.onaddstream = onAddStream;
            pc.onremovestream = onRemoveStream;
        }catch (e){
            console.log(e, "generatePeerConnection error");
        }
    }
    function onAddStream(e) {
        var stream = e.stream;
        var url = webkitURL.createObjectURL(stream);
        try{
            document.getElementById("remoteView").src = url;
            console.log("Started showing remote stream. url = " + url);
        }catch (e){
            console.log(e, "no Video error...");
        }

    }
    function onRemoveStream(e) {
        document.getElementById("remoteView").src = "";
        trace("Stopped showing remote stream");
    }
    function onIceCandidate(candidate, moreToFollow) {
        console.log("candidate: " + candidate);
        if (candidate) {
            sendMessage({type: 'candidate',
                        label: candidate.label, candidate: candidate.toSdp()});
        }
    }
    function startCall() {
        console.log("adding stream" + localStream);
        pc.addStream(localStream);
        doCall();
    }
    function doCall() {
        console.log("Send offer to peer");
        var offer = pc.createOffer({audio:true, video:true});
        pc.setLocalDescription(pc.SDP_OFFER, offer);
        sendMessage({type: 'offer', sdp: offer.toSdp()});
        pc.startIce();
    }
    function doAnswer() {
        console.log("Send answer to peer");
        var offer = pc.remoteDescription;
        var answer = pc.createAnswer(offer.toSdp(),{audio:true, video:true});
        pc.setLocalDescription(pc.SDP_ANSWER, answer);
        sendMessage({type: 'answer', sdp: answer.toSdp()});
        pc.startIce();
    }
    function processSignalingMessage(message) {
        var msg = JSON.parse(message.data);

        if (msg.type === 'offer') {
            console.log("Test 1 - offer" + msg.sdp);
            pc.setRemoteDescription(pc.SDP_OFFER, new SessionDescription(msg.sdp));
            doAnswer();
        } else if (msg.type === 'answer') {
            pc.setRemoteDescription(pc.SDP_ANSWER, new SessionDescription(msg.sdp));
        } else if (msg.type === 'candidate') {
            console.log("Candidate...");
            var candidate = new IceCandidate(msg.label, msg.candidate);
            pc.processIceMessage(candidate);
        } else if (msg.type === 'bye') {
            onRemoteHangup();
        }
    }

    //Websocket connection 
    function openWs(){
        genreatePeerConnection();
        ws = new WebSocket("ws://10.68.0.88:10081");
        ws.onopen = function() {
                        console.log("Openned websocket connection");
                    }
        ws.onmessage = function (evt){
                            console.log("you got mail: " + evt);
                            processSignalingMessage(evt);               
                       }
    }

    //sendMessage to WS
    function sendMessage(msg){
        var stringMsg = JSON.stringify(msg);
        ws.send(stringMsg);        
    }
    function sendName(){
        name = document.getElementById("name").value;
        ws.send("name: " + name);
    }
    </script>
    <body>
        name<input id="name"/><button id="sendName" onclick="sendName();">send </button>

        <video id="localView" width="352" height="288" autoplay></video>
        <video id="remoteView" width="352" height="288" autoplay></video>
        <button id="call" onclick="startCall();">Call</button>
        <button id="connect" onclick="openWs();">Connection</button>
        <button id="getMedia" onclick="getUserMedia();">Cam</button>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:57:18.127

仔细查看以下示例：[http ://www.html5rocks.com/en/tutorials/webrtc/basics/](http://www.html5rocks.com/en/tutorials/webrtc/basics/)

我认为您可能缺少一些内容，例如停止被调用方在 processSignalingMessage() 中发送报价并将 createPeerConnection() 放在 pc.addStream 之前的 startCall() 中。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:32:50.573

非常感谢你的例子！我不知道为什么我这么盲目，但通过这个例子我发现了我的错误。我在 doCall() 函数中忘记了以下行：

```
pc.setLocalDescription(pc.SDP_OFFER, offer); 
```

我不知道我怎么会错过这个，但也许我只见树木不见森林。现在它起作用了！谢谢 ：）

# android - eclipse如何知道你的项目名称？

> ID：12177713
> 
> 赞同：21
> 
> 时间：2012-08-29T12:16:02.583
> 
> 标签：android, eclipse

我在磁盘上有一个完整的工作项目（可以说它称为“mygame”），其中包含多个活动。首先被调用的活动称为“启动器”。我希望项目名为“com.mycompany.mygame”，但是当我在 eclipse 中导入项目并选择我的项目的根目录时，会出现一个对话框，说明位于该目录的项目是“com .mycompany.mygame.launcher”，无法更改。我的问题是，eclipse 使用什么来确定我的项目的名称为“com.mycompany.mygame.launcher”？它是清单中的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-08T08:27:10.240

我认为日食采用扩展*Activity*的类名。因为当您扩展任何其他包（如 Fragment 等）时，它不会为该特定类创建默认启动器。因此，只要带有清单指向启动器的类名将被导入，否则它将附加类名。带有包名

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T12:30:09.097

你的意思是项目名称改变了？如果是这样，您可以检查`.project`位于项目根文件夹中的文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-30T19:45:46.967

与您的问题类似，当我尝试`Import`-> `Android`->`Existing Android code`进入工作区时，命名已关闭。

对于那些对此问题发表评论并感到困惑的人，发生的事情是 Eclipse 将项目作为第一个活动的名称（包括名称空间）导入。

它将项目导入为 com.company.app_name.first_activity_in_the_manifest

我一直有这个问题。我为我的项目找到了解决方案。因为它是一个 git repo，所以我必须做`Import`-> `Git`- > `Projects from Git`-> `local`。

然后它正确导入，并且没有此处提到的某些解决方案的副作用，将现有代码导入新项目（这可能会删除我到 git repo 的链接）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-03T12:27:41.427

在 Eclipse 中，右键单击您的项目 Android Tools -> Rename Application Package ，将名称更改为 com.mycompany.mygame

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-10T12:23:52.267

为什么要使用 eclipse 的“将现有项目导入工作区”功能？

你应该使用'New Android Project -> Create Project From Existing Source'功能。（我不知道这些选项在你的eclipse中是如何出现的，所以你必须找到它们）这样你可以将它重命名为任何东西.

**您的第二个选项可能是：将**现有项目导入工作区（正如您已经在做的那样）。保持项目名称不变，然后**在完成导入过程后，您可以将项目重命名为您想要的任何**名称。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-04T09:31:08.453

在您的清单文件中，清单标签中的名称属性将显示包名称。Eclipse 中的包资源管理器视图也将显示包名称。例如，如果您的 pkg 名称是 com.cmpny.game，那么您的 src 文件夹将包含 src> com>cmpny>game> 文件夹a，其中将保存您的代码。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-10T09:57:17.827

在每个项目中都有一个名为的文件**`.project`**，该文件负责项目名称

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>PROJECTNAME</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
     ........
    </buildSpec>
    <natures>
    ....../natures>
</projectDescription> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-25T02:41:29.973

包资源管理器中显示的名称 ADT 可能不是 .project 文件中的名称。要更改此设置，请右键单击名称 -> 重构 -> 重命名。更改名称并选中“更新参考”。确保您想要的名称对于您的 Package Explorer 列表是唯一的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-09-10T07:17:59.520

我认为这是因为所有相同类型的应用程序都遵循目录结构，因为所有应用程序都在根文件夹中包含一些文件/文件夹，这是我们的应用程序的名称，例如 android 项目包含文件 `.project`和`.classpath`文件夹`.myeclipse src bin .settings`等

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-10T10:42:16.367

在项目目录中有 .project 由 eclipse 创建的文件！当我们导入项目时，会搜索该文件并从该文件中收集项目相关信息。这就是它的完成方式。如果你删除这个文件只是为了检查 eclipse 将不再将该目录识别为一个项目！

# sql - SQL - 如果满足条件，是否可以使用不同行中的值来更新另一行？

> ID：12177718
> 
> 赞同：0
> 
> 时间：2012-08-29T12:16:14.537
> 
> 标签：sql, oracle, case

假设我有一个如下所示的表：

```
col_1 |  col_2    
x     |   y    
null  |   y    
a     |   b 
```

我可以在查询 中将 null 更改`col_1`为`x`if吗？`y = y`

我正在尝试在 SQL 中执行此操作。我想我需要使用 CASE 子句，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:18:10.523

您需要对表本身应用自联接，并在找到匹配项时更新行。

```
update tablename set
 cp.col_1 = pp.Col_1
 from tablename cp,
 tablename pp where
 cp.col_1 = null and
 cp.col_2 = pp.col_2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:29:17.523

这应该可以解决问题

```
UPDATE MyTable x1
    set col_1 = 
    (SELECT col_1 
     FROM MyTable x2 
     WHERE x2.col_2 = x1.col_2 AND x2.col_1 IS NOT NULL
           AND rownum = 1)
    WHERE x1.col_1 IS NULL 
```

[SQL小提琴在这里](http://www.sqlfiddle.com/#!4/0ba92/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:26:54.593

你可以这样做，但如果不是 null，x 值对于相同的 y 值必须相同

1.  使用光标
2.  选择临时表中所有不同的 y 值及其 x 值
3.  如果列为空，则迭代每一行并设置您的 x 值

性能很慢，但它只是工作

# javascript - 在这种情况下如何使用闭包？

> ID：12177719
> 
> 赞同：0
> 
> 时间：2012-08-29T12:16:17.233
> 
> 标签：javascript, closures

看`onComplete`结果：目前`item.name`总是`rty`，但应该是 (1/2): `qwe`, (2/2): `rty`。我知道这个问题可以通过使用闭包来解决，但不知道如何。

一点**更新** [http://jsfiddle.net/tJYem/](http://jsfiddle.net/tJYem/)

```
Items = function(){
    this.onProgress = function(current, total, item){};
    this.onComplete = function(){};
}

Items.prototype.add = function(items){

    var self = this;
    var i = 0, total = items.length;

    while(items.length){
        var item = items.shift();
        var img = new Image();

        // closure should be somewhere here...
        img.onload = function(){

            self.onProgress(++i, total, item);

            i == total && self.onComplete();

        }

        img.src = item.src;

    }

}

var items = new Items();

items.onProgress = function(current, total, item){
    console.log('(%d/%d) item `%s` loaded', current, total, item.name);
    // => (1/2) item `rty` loaded
    // => (2/2) item `rty` loaded
}

items.onComplete = function(){
    console.log('Loading items complete.')
}

items.add([
    {name: 'qwe', src: '../qwe.png'},
    {name: 'rty', src: '../rty.png'}
]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:28:11.080

```
img.onload = (function(currentI) {
    // here currentI will stay with the value the i had in the moment of creating this handler
})(i) 
```

另一件需要注意的事情是，在加载*列表*`onComplete`中的最后一个图像时触发逻辑处理程序，而不是在*所有图像都已加载*时触发。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:42:55.227

您希望`i`由所有`onload`处理程序递增，因此不要为该变量创建闭包。否则，所有处理程序都会增加自己`i`的值，而不是共享值。此外，`self`与图像无关。但是，`item`每个处理程序应该不同：http: [//jsfiddle.net/tJYem/1/](http://jsfiddle.net/tJYem/1/)。

```
img.onload = (function(item){
    return function(){
        self.onProgress(++i, total, item);
        i == total && self.onComplete();
    }
})(item); 
```**

# database - 来自 Perl 的 SQL Server 备份命令

> ID：12177731
> 
> 赞同：0
> 
> 时间：2012-08-29T12:16:39.267
> 
> 标签：database, perl, sql-server-2005

尝试使用 Perl 对 sql server 数据库进行远程备份。但不知何故得到以下错误：

备份错误：3041，严重性：16，状态：1。BACKUP 未能完成命令 BACKUP DATABASE testdb。检查备份应用程序日志以获取详细消息。

脚本看起来像：

```
use DBI;
my $dsn = 'DBI:ODBC:Driver={SQL Server}';
my $host = 'hostname';
my $database = 'dbname';
my $user = 'sa';
my $auth = 'xxxxxxx';

my $dbh = DBI->connect("$dsn;Server=$host",
                       $user,
                       $auth,
                       { RaiseError => 1,
                         AutoCommit => 1}
                      ) || die "Database connection not made: $DBI::errstr";

my $sql = "BACKUP DATABASE testdb TO DISK='d:\sql_share\backup.bak'";
my $sth = $dbh->prepare( $sql );

$sth->execute();
print "\nexecuted";

$sth->finish();
$dbh->disconnect(); 
```

使用相同的脚本能够在远程服务器上创建数据库、查询数据库等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:23:27.030

`\`双引号中有含义。转义反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:23:43.523

您的命令中的反斜杠正在双引号上下文中处理，并且

```
my $sql = "BACKUP DATABASE testdb TO DISK='d:\sql_share\backup.bak'"; 
```

设置`$sql`为`BACKUP DATABASE testdb TO DISK='d:sql_shareackup.bak'`。打印出来看看

我建议您改用它，它提供单引号上下文并允许嵌入单引号

```
my $sql = q(BACKUP DATABASE testdb TO DISK='D:\sql_share\backup.bak'); 
```

# iis-7.5 - 如何为 SSE（服务器发送事件）和 SignalR 配置 IIS 7.5

> ID：12177737
> 
> 赞同：9
> 
> 时间：2012-08-29T12:16:56.417
> 
> 标签：iis-7.5, signalr, server-sent-events

我已经测试了我的 Asp.NET MVC 应用程序以运行 SignalR，它`text/event-stream`使用 Visual Studio 2012、IIS Express (Microsoft-IIS/8.0) 和 Chrome 正确处理带有 serverSentEvents 连接的 MIME。

现在我正在部署到生产环境（IIS 7.5、.NET Framework 4.5、Windows Server 2008R2），我注意到 SignalR 总是回退到 LongPolling 传输，因为`signalr/connect?transport=serverSentEvents etc`超时。

有没有办法配置 Microsoft-IIS/7.5 以使 ServerSentEvents 工作？还是仅在 8.0+ 上才有可能？

当我尝试直接访问 url `'http://my.webapp.com/MyHub/signalr/connect?transport=serverSentEvents&connectionId=624849a4-45c6-458b-b6d0-f7cb023ab226&connectionData=%5B%7B%22name%22%3A%22myHub%22%7D%5D&tid=2'`时，我得到一个文件，其中包含看起来像 SSE 数据包的内容：

```
data: initialized

id: 14476
data: {"MessageId":"14476","Messages":[],"Disconnect":false,"TimedOut":false,"TransportData":{}} 
```

所以我不确定为什么超时会达到请求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T03:56:09.207

事实证明，在我的情况下**不需要特定的配置**——SignalR 回退到 longPolling 取决于我的服务器显然在代理之后的事实。

为了测试这一点，我建议尝试使用 localhost 作为网址连接到服务器上的集线器服务器 - 在我的情况下，传输正确设置为 serverSentEvents（使用 Chrome 时）或 foreverFrame（使用 IE 时）

归功于用户 dfowler 的提醒（更多[在这里](https://github.com/SignalR/SignalR/issues/625)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-16T09:35:43.663

服务器在将生成的动态内容发送到客户端之前对其进行压缩可能会发生什么情况。在你的 web.config 中添加这个来修复

```
 <location path="signalr">
    <system.webServer>
      <urlCompression doDynamicCompression="false"/>
    </system.webServer>
  </location> 
```

# php - PHP echo css 类？

> ID：12177742
> 
> 赞同：-4
> 
> 时间：2012-08-29T12:17:05.927
> 
> 标签：php, css

我有 php 结构并希望将我的 div 嵌入到 php 中。必须用 echo 类编写 css 但我不知道该怎么做。

我的分区：

```
<div class="mydiv">
                <img src="catalog/view/theme/default/img/mypng.png" alt="">
            </div> 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:19:59.663

嗯，你说的是这个吗？

```
echo '
    <div class="mydiv">
        <img src="catalog/view/theme/default/img/mypng.png" alt="">
    </div>'; 
```

# ruby-on-rails-3 - 将 rcov 与 Sublime Text 2 Ruby 测试集成

> ID：12177745
> 
> 赞同：0
> 
> 时间：2012-08-29T12:17:13.147
> 
> 标签：ruby-on-rails-3, rspec, sublimetext2, rcov

有没有办法将 rcov 与 Sublime Text 2 Ruby Tests 包集成？

顺便说一句，我正在使用 Windows。运行我的 rspec 测试在 Sublime Text 中效果很好，但我希望这个 rcov 与它集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:57:18.667

# c# - 在 WPF 中，有没有办法让 StackPanel 像网格一样对齐列？

> ID：12177749
> 
> 赞同：6
> 
> 时间：2012-08-29T12:17:27.343
> 
> 标签：c#, .net, wpf, grid, stackpanel

例如我可以做这样的事情：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Width="Auto">
        <RowDefinition Width="Auto">
        <RowDefinition Width="Auto">
    </Grid.RowDefinitions>
    <TextBlock Grid.Row="0" Grid.Column="0">Header 1</TextBlock>
    <TextBox Grid.Row="0" Grid.Column="1" MaxLines="1" />
    <Button Grid.Row="0" Grid.Column="2">Send</Button>
    <Button Grid.Row="0" Grid.Column="3">Save</Button>
    <TextBlock Grid.Row="1" Grid.Column="0">Header 2</TextBlock>
    <TextBox Grid.Row="1" Grid.Column="1" MaxLines="1" />
    <Button Grid.Row="1" Grid.Column="2">Send</Button>
    <Button Grid.Row="1" Grid.Column="3">Save</Button>
    <TextBlock Grid.Row="2" Grid.Column="0">Header 3</TextBlock>
    <TextBox Grid.Row="2" Grid.Column="1" MaxLines="1" />
    <Button Grid.Row="2" Grid.Column="2">Send</Button>
    <Button Grid.Row="2" Grid.Column="3">Save</Button>
</Grid> 
```

或者我可以这样做：

```
<StackPanel>
    <StackPanel Orientation="Horizontal">
        <TextBlock>Header 1</TextBlock>
        <TextBox MaxLines="1" />
        <Button>Send</Button>
        <Button>Save</Button>
    </StackPanel>
    <StackPanel Orientation="Horizontal">
        <TextBlock>Header 2</TextBlock>
        <TextBox MaxLines="1" />
        <Button>Send</Button>
        <Button>Save</Button>
    </StackPanel>
    <StackPanel Orientation="Horizontal">
        <TextBlock>Header 3</TextBlock>
        <TextBox MaxLines="1" />
        <Button>Send</Button>
        <Button>Save</Button>
    </StackPanel>
<StackPanel> 
```

除了我希望能够像在 StackPanel 中一样轻松地操作行（添加新行、移动行等），同时像在 Grid 中一样保持列正确对齐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:28:14.533

您可以在列上使用许多`Grids`具有[大小共享](http://msdn.microsoft.com/en-us/library/system.windows.controls.definitionbase.sharedsizegroup.aspx)的单行。在没有任何控件的情况下完成时会变得冗长，因此您可以将一些逻辑（如创建列和分配`Grid.Column`）封装在派生属性`ItemsControl`或[附加属性](http://msdn.microsoft.com/en-us/library/ms749011.aspx)中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-23T18:49:51.093

这是我为了大致相同的目的而组合在一起的一个类 - 本质上，我希望能够在左列中放置一堆标签，在右侧放置不同类型的值（文本框、下拉列表等）。

它只有两列，但可以适应不同的数字。

```
public class LabelValueGrid : Grid
{
    public LabelValueGrid()
        : base()
    {
        ColumnDefinitions.Add(new ColumnDefinition());
        ColumnDefinitions.Add(new ColumnDefinition());
        ColumnDefinitions[0].Width = new System.Windows.GridLength(1, System.Windows.GridUnitType.Auto);
        ColumnDefinitions[1].Width = new System.Windows.GridLength(1, System.Windows.GridUnitType.Star);
    }

    protected override void OnVisualChildrenChanged(System.Windows.DependencyObject visualAdded, System.Windows.DependencyObject visualRemoved)
    {
        base.OnVisualChildrenChanged(visualAdded, visualRemoved);

        int curRow = -1;
        int curCol = 1;

        RowDefinitions.Clear();

        if (Children != null)
            foreach (System.Windows.UIElement curChild in Children)
            {
                if (curCol == 0)
                    curCol = 1;
                else
                {
                    curCol = 0;
                    curRow++;
                    RowDefinitions.Add(new RowDefinition() {Height = new System.Windows.GridLength(1, System.Windows.GridUnitType.Auto)});
                }

                Grid.SetRow(curChild, curRow);
                Grid.SetColumn(curChild, curCol);
            }

        RowDefinitions.Add(new RowDefinition() {Height = new System.Windows.GridLength(1, System.Windows.GridUnitType.Star)});
    }
} 
```

我可以像网格一样使用它，除了我只列出控件，然后它会自动交替列：

```
<local:LabelValueGrid>
    <TextBlock Text="Label1"/>
    <TextBox Name="value1"/>
    <TextBlock Text="Label2"/>
    <TextBox Name="value2"/>
</local:LabelValueGrid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T16:04:06.877

这是垂直 StackPanel 的一些可重现代码，该代码具有使用 SharedSizeGroups 的对齐列，正如其他答案所暗示的那样。它不需要任何代码隐藏，但如果您希望动态创建面板，您可以添加它：

```
<Grid Grid.IsSharedSizeScope="True">

<StackPanel Orientation="Vertical" VerticalAlignment="Stretch" Grid.ColumnSpan="1">

    <!-- ROW 0 -->

    <Grid ShowGridLines="True">
        <Grid.RowDefinitions>
            <RowDefinition SharedSizeGroup="FirstRow"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition SharedSizeGroup="FirstColumn" />
            <ColumnDefinition SharedSizeGroup="SecondColumn" />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0">
            0-0 With extra width 
        </TextBlock>
        <TextBox Grid.Column="1">
            0,1
        </TextBox>
    </Grid>

    <!-- ROW 1 -->

    <Grid ShowGridLines="True">
        <Grid.RowDefinitions>
            <RowDefinition SharedSizeGroup="FirstRow"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition SharedSizeGroup="FirstColumn"  />
            <ColumnDefinition SharedSizeGroup="SecondColumn"  />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0" HorizontalAlignment="Left">
            1-0
        </TextBlock>
        <TextBox Grid.Column="1">
            1,1 With extra width
        </TextBox>
    </Grid>

</StackPanel> 
```

请注意`SharedSizeGroup`每列的标签和启用此类逻辑的最顶部网格`Grid.IsSharedSizeScope="True"`。创建以下图像：

[![在此处输入图像描述](../Images/db2d669cafa96f8c0238e07b6dec9b38.png)](https://i.stack.imgur.com/JXDYu.png)

# java - 无法让 Eclipselink 2 级缓存工作

> ID：12177750
> 
> 赞同：2
> 
> 时间：2012-08-29T12:17:29.780
> 
> 标签：java, caching, jpa, eclipselink

我有一个最小的网络应用程序，你可以在这里下载（6Kb）： [http ://www.mediafire.com/?6vo1tc141t65r1g](http://www.mediafire.com/?6vo1tc141t65r1g)

相关配置是：

-eclipselink 2.3.2

-server 是 tomee 1.0（但 glassfish 3.1 是一样的）

当我点击页面并按 F5 重复刷新时：

```
http://localhost:8080/testCache/jsf/test.xhtml 
```

我在控制台中看到几行这样的行

> [EL Fine]: 2012-08-29 19:01:30.821--ServerSession(32981564)--Connection(27242067)--Thread(Thread[http-bio-8080-exec-12,5,main])--从任务类型中选择 ID、任务类型

通过运行嗅探器，我看到 SQL 请求总是发送到服务器。我虽然 Eclipselink 的 2 级缓存会返回结果（表中的 5 行）而不查询数据库。那么怎么了，我该如何激活缓存？

文件中的一些摘录

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="xxxPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>microsoft</jta-data-source>
    <properties>

        <property name="eclipselink.logging.level" value="FINE"/>
      <property name="eclipselink.logging.parameters" value="true"/>

    </properties>
  </persistence-unit>
</persistence> 
```

执行查询的 EJB

```
/**
 * Some useless class required to use JTA transactions
 * 
 * @author Administrator
 * 
 */
@Stateless
public class Facade {
    @PersistenceContext(unitName = "xxxPU")
    private EntityManager em;

    public List findAll(Class entityClass) {
        CriteriaQuery cq = em.getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        return em.createQuery(cq).getResultList();
    }

    public EntityManager getEntityManager() {
        return em;

    }

} 
```

实体bean：

```
@Entity
@Table(name = "tasktype")

public class TaskType {

    @Id

    @Column(name = "id")
    private Integer id;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 10)
    @Column(name = "tasktype")
    private String name;
    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:35:42.150

L2 共享缓存，通过那里的 Id 缓存对象。find() 操作和 Id 查询将获得缓存命中，其他查询不会。生成的对象仍将通过缓存进行解析，因此一旦对象被缓存，您将不会对关系进行任何额外的查询。

您可以在查询上启用缓存，或者（在 2.4 中）您可以索引非 Id 字段，或在内存中查询。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching)

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Query_Cache](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Query_Cache)

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Query_Options](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Query_Options)

# android - Android：字符串可见性问题

> ID：12177751
> 
> 赞同：3
> 
> 时间：2012-08-29T12:17:32.657
> 
> 标签：android, android-layout, android-widget

乌尔都语或阿拉伯语字符串在文本视图或按钮中不完全可见。例如：“چ”这是乌尔都语和阿拉伯字母，它的底部边缘不可见，并且它有很多字母的问题。

多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:25:10.370

我以前遇到过同样的问题。这是一种解决方法：将这些属性添加到 TextView 的 xml 中：

```
android:lineSpacingMultiplier="1"
android:lineSpacingExtra="5dip" 
```

仅供参考：这个问题现在在 Android Jelly Bean 中得到解决。

# php - MySQL EAV 查询返回所有条目

> ID：12177761
> 
> 赞同：3
> 
> 时间：2012-08-29T12:17:58.230
> 
> 标签：php, mysql, entity-attribute-value

我有一个看起来像这样的表（除了更多条目），我需要从所有 taxstatuscode = Paid 和 taxpaidtoname = NO 的条目中获取boatuid。但我无法让它工作。

**桌子：**

```
boatuid    slug              fieldValue
20         taxstatuscode     Paid
20         taxpaidtoname     NO
24         taxstatuscode     Paid
24         taxpaidtoname     SE
25         taxstatuscode     Not Paid
25         taxpaidtoname     N/A 
```

**询问：**

```
SELECT a.boatuid
FROM tx_gcnwnxmlparser_boats_specs
LEFT JOIN tx_gcnwnxmlparser_boats_specs a ON (a.slug = "taxstatuscode")
LEFT JOIN tx_gcnwnxmlparser_boats_specs b ON (b.slug = "taxpaidtoname")
WHERE a.boatuid IN(20,24,25)
AND a.fieldValue = "Paid" 
AND b.fieldValue = "NO"
GROUP BY a.boatuid 
```

现在它会返回 IN() 中的所有boatuid，而它应该只返回 20。我对 EAV 很陌生并且加入了，所以我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:34:12.413

使用 EAV 时的关键之一是使用“实体 ID”进行连接，以便您选择的属性属于同一实体。

```
SELECT a.boatuid
    FROM tx_gcnwnxmlparser_boats_specs a
        INNER JOIN tx_gcnwnxmlparser_boats_specs b 
            ON a.boatuid = b.boatuid /* "Entity ID" join condition */
                AND b.slug = 'taxpaidtoname'
    WHERE a.boatuid IN (20,24,25)
        AND a.slug = 'taxstatuscode'
        AND a.fieldValue = 'Paid'
        AND b.fieldValue = 'NO'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:27:56.100

左连接返回左表中的所有行，无论条件如何认为您正在寻找内连接“TABLEA，TABLEB”或“TABLEA INNER JOIN TABLEB”：

TABLE_A LJ TABLE_B

返回：

```
TABLE_A row 1 | TABLE_B row  (which meets condtion)
TABLE_A row 1 | TABLE_B row  (which meets condtion)
TABLE_A row 1 | TABLE_B row  (which meets condtion)
TABLE_A row 2 | TABLE_B row  (which meets condtion)
TABLE_A row 2 | TABLE_B row  (which meets condtion) 
TABLE_A row 2 | TABLE_B row  (which meets condtion)
.
.
.
TABLE_A last row | TABLE_B row  (which meets condtion) 
```

# rets - 如何使用 RETS 服务器识别代理私人上市？

> ID：12177763
> 
> 赞同：0
> 
> 时间：2012-08-29T12:17:58.827
> 
> 标签：rets

我想提取代理列表。我使用代理许可证号来识别代理的个人列表，但服务器没有提供相应的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:42:54.220

许多 RETS 服务器仅配置为允许以某些组合查询某些字段，例如“地址、状态”或“MLS 区域、状态”。可能不允许您查询给定列表代理 ID 下的所有列表。请发布来自 RETS 服务器的原始响应，看看是否是问题所在（RETS 响应通常会告诉您是否查询了无效的列组合）。另一种可能性是您查询的值错误 - 许可证号通常不是代理的关键 - 它通常类似于“列出代理 ID 1”或“代理 MLS ID”或类似的东西。

# c# - 如何更改暂存 URL？

> ID：12177768
> 
> 赞同：2
> 
> 时间：2012-08-29T12:18:12.980
> 
> 标签：c#, azure

我在 Windows azure 暂存环境中部署了我的 MVC 应用程序。现在由于某种原因，我想更改我的登台 URL。谁能指导我，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T12:25:01.473

您不能更改暂存 URL。您唯一能做的就是为其创建一个 CNAME 并具有类似的内容：**stagingapp.mycompany.com**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:22:39.730

希望本指南对您有所帮助。[Azure 暂存](http://www.devproconnections.com/article/cloud-computing2/windows-azure-staging-server-140381)。

# javascript - javascript RegExp 不过滤数字

> ID：12177772
> 
> 赞同：0
> 
> 时间：2012-08-29T12:18:20.967
> 
> 标签：javascript, regex, validation

我遇到了 javascript 正则表达式的问题。

它不会停止数字和“！” 字符，而它应该。它适用于其他特殊字符，当然我已经对其进行了调试，看看它是否真的进行了测试，等等……确实如此。即使我的字符串中有数字，它也会返回 true。

这是正则表达式：

```
new RegExp("^[^\\- ][A-Za-z\u00C00-\u017F\\- ]+"); // \u00C00-\u017F = À-S(latin) 
```

这是为了验证表单中的名字。

问题很奇怪，因为我在 java 的服务器端有完全相同的正则表达式，而且它工作得很好。

感谢您的回答:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T12:22:15.113

你可能有一些错字：

```
\u00C00-\u017F 
```

C00 hex 将大于 17F hex。但 \u 仅捕获四个字符，请参阅下面的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:25:52.110

您应该转义（对于 javascript 字符串）正则表达式`\u`

```
new RegExp("^[^\\- ][A-Za-z\\u00C0-\\u017F\\- ]+"); 
```

此外，如果您尝试匹配重音字母，则范围为（正则表达式）`[\u00C0-\u00FF]`

# ios - MBProgress HUD 未显示正确模式始终为默认模式

> ID：12177777
> 
> 赞同：2
> 
> 时间：2012-08-29T12:18:31.927
> 
> 标签：ios, ios5, uiviewcontroller, viewcontroller, mbprogresshud

我正在尝试使用一种模式来初始化 MBProgress HUD，但仅使用标签而不是环形模式弹出进度。

```
 //Addition of new HUD progress whilst running the process field entries method
    HUD = [[MBProgressHUD alloc] initWithView:self.view];
    [self.view addSubview:HUD];

    // Set determinate mode
    HUD.mode = MBProgressHUDModeAnnularDeterminate;

    HUD.delegate = self;
    HUD.labelText = @"Signing you up";

    // myProgressTask uses the HUD instance to update progress
    [HUD showWhileExecuting:@selector(processFieldEntries) onTarget:self withObject:nil animated:YES]; 
```

我也在代表行收到警告。

```
Assigning to 'id<MBProgressHUDDelegate>' from incompatible type 'NewUserViewController *const __strong' 
```

///

这是另一个示例 - HUD-test 是我设置的一个简单应用程序，用于显示完整代码和问题（第二张图片）\\

///

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:06:59.300

为了摆脱警告，只需在头文件中将您的类定义为 MBProgressHUDDelegate。

要注意正确的模式，请查看 MBProgressHUD.h 模式枚举：

```
/** Progress is shown using an UIActivityIndicatorView. This is the default. */
MBProgressHUDModeIndeterminate,
/** Progress is shown using a round, pie-chart like, progress view. */
MBProgressHUDModeDeterminate,
/** Progress is shown using a ring-shaped progress view. */
MBProgressHUDModeAnnularDeterminate,
/** Shows a custom view */
MBProgressHUDModeCustomView,
/** Shows only labels */
MBProgressHUDModeText 
```

选择您要显示并使用此代码激活的那个：

```
 MBProgressHUD *HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES]; 
    [HUD setMode: MBProgressHUDModeAnnularDeterminate]; 
    HUD.delegate = self; 
    HUD.labelText = @"Signing you up"; 
    [HUD showWhileExecuting:@selector(processFieldEntries) onTarget:self withObject:nil animated:YES]; 
```

# mysql - MySQL 字符串操作：更改第 5 个字符，从末尾开始计数

> ID：12177782
> 
> 赞同：-1
> 
> 时间：2012-08-29T12:18:38.037
> 
> 标签：mysql, sql

我需要从最后一列更改第 5 个字符。

例如，

*   `m`路径/of/images/1232323_.jpg

到

*   `b`路径/of/images/1232323_.jpg

如何使用 MySQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:21:59.403

```
update your_table
 set col = concat(substring(col, 1, length(col) -5), 'b', substring(col, -4))
where length(col) > 5  --if you really need. 
```

[http://sqlfiddle.com/#!2/31774/2](http://sqlfiddle.com/#!2/31774/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:20:56.567

怎么样

```
update your_table
set col = replace(col, 'm.jpg', 'b.jpg') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:22:45.657

查看

```
select col, if(length(col)<5,col,concat(substr(col,1,length(col)-5),'X',substr(col,length(col)-3,5))) from table; 
```

并基于它运行更新：

```
update table set col=concat(substr(col,1,length(col)-5),'X',substr(col,length(col)-3,5)) where length(col)>5; 
```

现场示例：[http ://sqlfiddle.com/#!2/dbc21/2/0](http://sqlfiddle.com/#!2/dbc21/2/0)

# javascript - jqGrid 树扩展无法正常工作

> ID：12177784
> 
> 赞同：0
> 
> 时间：2012-08-29T12:18:42.073
> 
> 标签：javascript, jquery, json, jqgrid

您好，我正在尝试使用 jqGrid 构建 TreeGrid。一切正常，但是当我单击特定节点上的扩展时，树的大小会增加一倍。我不明白为什么会这样。

以下是截图：

![在此处输入图像描述](../Images/9fe400a6264ba59c4f0576d83306dd8b.png)

**点击任何节点后：**

![在此处输入图像描述](../Images/5d7a528a67004095bbd1c452cb693f6e.png)

以下是我的 JQuery 代码

```
function showMarkingUI(rfaID){
        $("#treegrid").jqGrid({ 
            url: '<%=request.getContextPath()%>/submissions/'+rfaID+'/jqGridJson', 
            datatype: 'json', 
            mtype: 'POST', 
            colNames: ["ID", "File/Folder", "Valid","Marked As","Level","Parent                   ID","HasLeaf"], 
            colModel: [{ 
                    name: 'id', 
                    index: 'id', 
                    width: 1, 
                    hidden: true, 
                    key: true
                }, { 
                    name: 'file', 
                    index: 'file', 
                    hidden: false, 
                    sortable: true 
                },{ 
                    name: 'valid', 
                    index: 'valid', 
                    hidden: false, 
                    sortable: true 
                }, { 
                    name: 'markedas', 
                    index: 'markedas', 
                    hidden: false, 
                    sortable: true 
                }, { 
                    name: 'level', 
                    index: 'level', 
                    hidden: true, 
                    sortable: true 
                }, { 
                    name: 'parentid', 
                    index: 'parentid', 
                    hidden: true, 
                    sortable: true 
                }, { 
                    name: 'hasleaf', 
                    index: 'hasleaf', 
                    hidden: true, 
                    sortable: true 
                }], 
            multiselect: true,
            treeGridModel: 'adjacency', 
            height: 'auto', 
            width: '500', 
            pager: "#ptreegrid", 
            treeGrid: true, 
            ExpandColumn: 'file',
            caption: "Record Folder" ,
            onSelectRow:function(id){                
                var ret = jQuery("#treegrid").jqGrid('getRowData',id);     
                if(ret.hasleaf=='false')        
                {                        
                    document.getElementsByName("group1")[0].disabled=true;
                    document.getElementsByName("group1")[1].disabled=true;
                }
                else
                {
                    document.getElementsByName("group1")[0].disabled=false;
                    document.getElementsByName("group1")[1].disabled=false;   
                }                         
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:52:09.463

我以前经历过这种情况。通常，这意味着您的父级、isLeaf、级别、id 等的数据值在某处搞砸了。您需要检查您的数据完整性。

# php - 如何在 PHP 中删除空格后的所有内容？

> ID：12177788
> 
> 赞同：18
> 
> 时间：2012-08-29T12:18:57.177
> 
> 标签：php, replace, preg-replace

我有一个有名称的数据库，我想在名称的空格后使用 PHP 替换，数据示例：

```
$x="Laura Smith";
$y="John. Smith"
$z="John Doe"; 
```

我希望它返回

```
Laura
John.
John 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-19T13:18:47.673

只是为了将其添加到混合中，我最近学习了这项技术：

```
list($s) = explode(' ',$s); 
```

不过，我只是做了一个快速的基准测试，因为我之前没有遇到过 strtok 方法，并且在给出的示例字符串上，strtok 比我的列表/爆炸解决方案快 25%。

此外，初始字符串越长/分隔越多，性能差距就越大。给出一个 5000 个单词的块，explode 将创建一个包含 5000 个元素的数组。strtok 将只取第一个“元素”并将其余的作为字符串留在内存中。

所以 strtok 为我赢得了胜利。

```
$s = strtok($s,' '); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-29T12:19:57.410

这样做，这将替换空格字符之后的任何内容。也可以用于破折号：

```
$str=substr($str, 0, strrpos($str, ' ')); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-29T12:26:18.413

试试这个

```
<?php
$x = "Laura Smith";
echo strtok($x, " "); // Laura
?> 
```

[斯托克](http://in.php.net/strtok)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-29T12:21:09.873

不需要使用正则表达式，只需使用explode方法即可。

```
$item = explode(" ", $x);
echo $item[0]; //Laura 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T12:29:14.387

TheBlackBenzKid 提供的方法对该问题有效 - 但是当出现不包含空格的参数时，它将返回一个空白字符串。

尽管正则表达式的计算成本更高，但它们提供了更多的灵活性，例如：

```
function get_first_word($str)
{
 return (preg_match('/(\S)*/', $str, $matches) ? $matches[0] : $str);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-13T22:17:08.657

有一个未提及的函数调用，我一直用于这个确切的任务。

[第三个参数为 true 的strstr()](https://www.php.net/manual/en/function.strstr.php)将返回第一次出现针字符串*之前的子字符串。*

代码：（[演示](https://3v4l.org/ppoQW)）

```
$array = [
    'x' => 'Laura Smith',
    'y' => 'John. Smith',
    'z' => 'John Doe'
];

foreach ($array as $key => $value) {
    $array[$key] = strstr($value, ' ', true);
}

var_export($array); 
```

输出：

```
array (
  'x' => 'Laura',
  'y' => 'John.',
  'z' => 'John',
) 
```

注意，如果在字符串中没有找到 needle，`strstr()`将返回`false`.

ps

*   因为有单功能技术来执行此任务，**所以没有令人信服的理由使用多功能技术**来完成相同的工作。
*   因为 needle 是一个静态字符串（一个空格），所以绝对**没有理由引入 regex call 的开销**。
*   如果有人正在考虑[使用`explode()`](https://3v4l.org/AG8Qc)来生成临时数组，而不是更直接的“字符串输入 - 字符串输出”操作，例如`strtok()`or `strstr()`，请务必声明使用表示目标元素索引的整数**的第三个参数`explode()`**+ 1 --这样，该函数将在隔离您查找的子字符串后立即停止创建新元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T12:23:13.310

你也可以这样做

```
$str = preg_split ('/\s/',$x);
print $str[0]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-17T12:41:37.247

这个答案将删除第一个空格之后的所有内容，而不是最后一个空格，就像接受的答案一样。使用`strpos`和`substr`

```
$str = "CP hello jldjslf0";
$str = substr($str, 0, strpos( $str, ' '));
echo $str; 
```

# jsf - JSF 中有类似 ServletContextListener 的东西吗？

> ID：12177795
> 
> 赞同：3
> 
> 时间：2012-08-29T12:19:18.807
> 
> 标签：jsf, listener, startup, shutdown

我想听一个 JSF 应用程序是否像`ServletContextListener`普通的 Servlet Web 应用程序一样启动或停止。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T12:37:44.480

您可以使用一个急切初始化的方法，并分别用 和 注释所需的启动/关闭钩子方法。[`@ApplicationScoped`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ApplicationScoped.html) [`@ManagedBean`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/ManagedBean.html)[`@PostConstruct`](http://docs.oracle.com/javaee/6/api/javax/annotation/PostConstruct.html)[`@PreDestroy`](http://docs.oracle.com/javaee/6/api/javax/annotation/PreDestroy.html)

所以：

```
@ManagedBean(eager=true)
@ApplicationScoped
public class App {

    @PostConstruct
    public void init() {
        // ...
    }

    @PreDestroy
    public void destroy() {
        // ...
    }

} 
```

* * *

请注意，这并不**意味着**您不能`ServletContextListener`在 JSF webapp 中使用 a。JSF 构建在 Servlet API 之上，这意味着您可以继续使用它。使用新的 Servlet 3.0[`@WebListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebListener.html)注释，也可以配置它而无需`web.xml`：

```
@WebListener
public class Config implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent event) {
        // ...
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        // ...
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:07:12.687

您可以为此提供一个系统事件侦听器。有关更多详细信息，请参阅此博文：[使用系统事件引导 JSF 应用程序](http://blog.oio.de/2012/05/12/bootstrapping-jsf-applications-with-systemevents/)

# c - - 1）预处理器，链接器，2）头文件，库有什么区别？我的理解正确吗？

> ID：12177796
> 
> 赞同：18
> 
> 时间：2012-08-29T12:19:20.263
> 
> 标签：c, compiler-construction, linker, preprocessor, header-files

好吧，直到今天早上，我都对这些术语感到困惑。我想我有不同的地方，希望如此。

首先，令人困惑的是，由于预处理器已经将头文件包含在包含函数的代码中，链接器将哪些库函数链接到汇编器/编译器生成的目标文件？部分混淆主要是由于我对头文件和库之间的区别一无所知。

经过一番谷歌搜索和堆栈溢出（这是术语吗？：p），我收集到头文件主要包含函数声明，而实际实现在另一个名为库的二进制文件中（我仍然不是 100%确定这一点）。

因此，假设在以下程序中：-

```
#include<stdio.h>
int main()
{
      printf("whatever");
      return 0;
} 
```

预处理器将头文件的内容包含在代码中。编译器/编译器+汇编器完成它的工作，最后链接器将这个目标文件与另一个实际存储了`printf()`工作方式的目标文件结合起来。

我的理解正确吗？我可能会走得很远......所以你能帮帮我吗？

**编辑：**我一直想知道 C++ STL。它总是让我困惑它到底是什么，所有这些标题的集合还是什么？现在阅读回复后，我可以说 STL 是一个目标文件/类似于目标文件的东西吗？

而且，我想我可以在哪里读取函数的函数定义，比如`pow()`等`sqrt()`。我会打开头文件，但什么也找不到。那么，库中的函数定义是不是二进制不可读的形式呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-29T15:25:38.463

AC 源文件经历两个主要阶段，(1) C 源代码由预处理器实用程序处理的预处理器阶段，该实用程序查找预处理器指令并执行这些操作，以及 (2) 处理后的 C 源代码的编译阶段。实际编译生成目标代码文件。

预处理器是一个进行文本操作的实用程序。它将包含可能包含预处理器指令的文本（通常是 C 源代码）的文件作为输入，并通过将找到的任何指令应用于文本输入以生成文本输出来输出文件的修改版本。

该文件不必是 C 源代码，因为预处理器正在执行文本操作。我已经看到 C Preprocssor 用于`make`通过允许将 preprossor 指令包含在 make 文件中来扩展实用程序。带有 C Preprocessor 指令的 make 文件通过 C Preprocessor 实用程序运行，然后将生成的输出输入到`make`make 目标的实际构建中。

**库和链接**

库是包含各种功能的目标代码的文件。这是一种在将多个源文件编译成单个文件时将其输出打包的方法。很多时候，库文件与头文件（包含文件）一起提供，通常带有 .h 文件扩展名。头文件包含函数声明、全局变量声明以及库所需的预处理器指令。因此，要使用该库，您需要包含使用该`#include`指令提供的头文件并链接到该库文件。

库文件的一个很好的特性是您提供的是源代码的编译版本，而不是源代码本身。另一方面，由于库文件包含已编译的源代码，因此用于生成库文件的编译器必须与用于编译您自己的源代码文件的编译器兼容。

常用的库有两种。第一种和较旧的类型是静态库。第二个也是最近的动态库（Windows 中的动态链接库或 DLL 和 Linux 中的共享库或 SO）。两者之间的区别在于库中的函数绑定到使用库文件的可执行文件时。

链接器是一个实用程序，它使用各种目标文件和库文件来创建可执行文件。当在 C 源文件中使用外部或全局函数或变量时，使用一种标记告诉链接器需要在该点插入函数或变量的地址。

C 编译器只知道它编译的源代码中的内容，而不知道其他文件（例如目标文件或库）中的内容。所以链接器的工作是获取各种目标文件和库，并通过用实际连接替换标记来建立部件之间的最终连接。因此，链接器是将各种组件“链接”在一起的实用程序，将目标文件和库中的全局函数或变量的标记替换为指向为该全局函数或变量生成的实际目标代码的链接。

在链接器阶段，静态库与动态或共享库之间的差异变得明显。当使用静态库时，库的实际目标代码包含在应用程序可执行文件中。当使用动态或共享库时，应用程序可执行文件中包含的目标代码是在应用程序运行时找到共享库并与之连接的代码。

在某些情况下，相同的全局函数名称可能会在几个不同的目标文件或库中使用，因此链接器通常只会使用它遇到的第一个并发出有关找到其他对象的警告。

**编译链接总结**

所以一个 C 程序的编译和链接的基本过程是：

*   预处理器实用程序生成要编译的 C 源代码

*   编译器将 C 源代码编译成目标代码，生成一组目标文件

*   链接器将各种目标文件以及任何库链接到可执行文件中

以上是基本过程，但是当使用动态库时，它可能会变得更加复杂，特别是如果正在生成的应用程序的一部分具有它正在生成的动态库。

**装载机**

还有应用程序实际加载到内存并开始执行的阶段。操作系统提供了一个实用程序，加载程序，它读取应用程序可执行文件并将其加载到内存中，然后启动应用程序运行。可执行文件的起始点或入口点在可执行文件中指定，因此在加载程序将可执行文件读入内存后，它将通过跳转到入口点内存地址来启动可执行文件运行。

链接器可能遇到的一个问题是，有时它在处理需要实际内存地址的目标代码文件时可能会遇到一个标记。但是，链接器不知道实际的内存地址，因为地址会根据应用程序在内存中的加载位置而有所不同。因此，链接器将其标记为加载程序实用程序在加载程序将可执行文件加载到内存并准备开始运行时修复的内容。

对于具有硬件支持的虚拟地址到物理地址映射或转换的现代 CPU，实际内存地址的问题很少成为问题。每个应用程序都加载到相同的虚拟地址，硬件地址转换处理实际的物理地址。然而，较旧的 CPU 或成本较低的 CPU，例如缺乏内存管理单元 (MMU) 硬件支持地址转换的微控制器，仍然需要解决这个问题。

**入口点和 C 运行时**

最后一个主题是 C 运行时和`main()`可执行入口点。

C 运行时是编译器制造商提供的目标代码，其中包含用 C`main()`编写的应用程序的入口点。函数是编写应用程序的程序员提供的入口点，但这不是加载程序看到的入口点。该`main()`函数在应用程序启动后由 C Runtime 调用，C Runtime 代码为应用程序设置环境。

C 运行时不是标准 C 库。C 运行时的目的是管理应用程序的运行时环境。标准 C 库的目的是提供一组有用的实用程序函数，以便程序员不必创建自己的函数。

当加载程序加载应用程序并跳转到 C 运行时提供的入口点时，C 运行时执行各种初始化操作，为应用程序提供适当的运行时环境。完成此操作后，C 运行时将调用该`main()`函数，以便应用程序开发人员或程序员创建的代码开始运行。当`main()`返回或`exit()`调用函数时，C 运行时执行清理和关闭应用程序所需的任何操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T13:48:20.197

这是一个非常常见的混淆来源。我认为了解正在发生的事情的最简单方法是举一个简单的例子。暂时忘掉图书馆，考虑以下几点：

```
$ cat main.c
extern int foo( void );
int main( void ) { return foo(); }
$ cat foo.c
int foo( void ) { return 0; }
$ cc -c main.c
$ cc -c foo.c
$ cc main.o foo.o 
```

该声明`extern int foo( void )`执行与库的头文件完全相同的功能。 `foo.o`正在执行库的功能。如果您理解了这个示例，以及为什么它们都`cc main.c`不起作用`cc main.o`，那么您就会理解头文件和库之间的区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T12:24:05.407

是的，几乎正确。除了链接器不链接目标文件外，还链接库 - 在这种情况下，它是 C 标准库 (libc) 链接到您的目标文件。关于编译阶段+头文件和库之间的差异，您的其余假设似乎是正确的。

# java - 如何删除程序本身中的变量

> ID：12177800
> 
> 赞同：-2
> 
> 时间：2012-08-29T12:19:29.793
> 
> 标签：java, multithreading

我正在创建一个应用程序，该应用程序具有多线程类以计算到用户指定的数量。我这样做是为了在每次启动类时，将用户指定的数字传递给构造函数。

这意味着线程只能运行一次，因为类的实例化是基于用户指定的数量。

我想知道是否可以在完成计数后删除该类的实例，然后创建另一个具有相同名称的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:26:32.617

完成后最后标记课程`reference as null`。所以它会自动有资格`Garbage Collection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:22:16.050

您可以使用`TimerService`新用户提供的号码再次使用和安排它。您还`ScheduledExecutorService`可以在计数器完成后调用`Runnable`, 。`Callable``Thread`

**为了获得更好的帮助，请更新问题:)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:24:31.587

你不能在你想要的时候真正删除 Java 中的任何东西，因为这是垃圾收集器的工作。

相反，我建议在你的类中添加一个重置方法，并在你准备好重置计数时调用它。当然你需要确保这个方法是同步的，或者你要重置的数据是同步的。

# qt - Qt 中 setVisible、setShown 和显示/隐藏有什么区别

> ID：12177801
> 
> 赞同：28
> 
> 时间：2012-08-29T12:19:36.623
> 
> 标签：qt, pyqt, hide, show, visible

请原谅这个可能很无聊的问题，但是当试图隐藏 QWidget 时，调用 setVisible(False)、setShown(False) 和 hide() 有什么区别？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-29T12:31:54.300

`show()`只是一个方便的功能`setVisible(true)`。

同样`hide()`等价于`setVisible(false)`

在内部，相同的代码用于呈现您的视图。

[以 http://doc.qt.io/archives/qt-4.7/qwidget.html#show](http://doc.qt.io/archives/qt-4.7/qwidget.html#show)为例。据其介绍，

> void QWidget::show () [slot] 显示小部件及其子小部件。此函数等效于 setVisible(true)。

你会在 Qt 中找到很多这样的功能，只是为了让事情更**直观**，尤其是在小部件和视图方面。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-29T12:31:45.080

没有区别。它们只是实现同一目标的不同方式。（实际上 setShown 并不是 API 的一部分，看起来它是 Qt 3 的兼容性东西，所以最好不要使用它。）

# php - PHP的自动精灵创建和css mixin脚本？

> ID：12177807
> 
> 赞同：0
> 
> 时间：2012-08-29T12:19:53.027
> 
> 标签：php, css, sass

我一直在为框架库在 PHP 中构建自动化方面做了大量工作。当我想……“以前一定有人这样做过”时，我正要开始抨击键盘。

然而，经过一番挖掘，我还没有找到任何可以做我所追求的东西，我想我会在这里问：

我需要一个 PHP 脚本，它可以：

1.  取一个包含图片的预设目录（jpg/png/gif 混合）
2.  将它们全部合并到一个文件中，即“UI.png”或其他东西
3.  打开一堆 css 文件并扫描单个文件的实例
4.  替换src`url()`
5.  调整任何现有的背景定位规则

听起来有很多事情要做，但我不能成为第一个考虑这个的人，可以吗？

我已经看到了一些脚本，它们要么执行第一部分，要么尝试执行第二部分，但我宁愿避免使用大量的配置注释。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T07:56:24.543

我找到了一个可以帮助您的工具：[https](https://code.google.com/p/scrinker/) ://code.google.com/p/scrinker/ 。它会缩小 css 文件并通过将 / *[[SPRITE]]* / 添加到背景声明中自动生成基本的精灵，如图标。

# javascript - 使用javascript移动到div的顶部位置

> ID：12177811
> 
> 赞同：1
> 
> 时间：2012-08-29T12:20:00.683
> 
> 标签：javascript, android, cordova

我已经使用 javascript 开发了 phonegap android 应用程序。我需要使用 javascript 或 jquery 在按钮单击中移动到 div 的顶部。如何做到这一点。请指导我。提前致谢。

这是我的代码：

```
$('#toTop').click(function() 
{
$('#wrapper').animate({ scrollTop: 0 },200);
});

<div id="wrapper"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:14:52.867

分配[**`$yourElement.offset().top`**](http://api.jquery.com/offset/)给`scrollTop`财产。

```
$('#toTop').click(function() {
    var wrapper$ = $('#wrapper');
    $(window).animate({
        scrollTop: wrapper$.offset().top
    }, 200);
});

<div id="wrapper"></div> 
```

我做了一个[**代码示例**](http://jsfiddle.net/f0t0n/prKLH/)，你可以玩一下。

# c# - 避免在unittesting下恢复SQL server时恢复卡死

> ID：12177818
> 
> 赞同：4
> 
> 时间：2012-08-29T12:20:24.100
> 
> 标签：c#, unit-testing, sql-server-2005

我目前正在构建单元测试，以测试某些类是否正确编辑了 sql server 2005 数据库。为此，我从我们的生产中创建了一小部分数据，并将其存储为备份文件。每当单元测试需要确保它具有干净的数据库状态时，它都会调用一个恢复例程，该例程基本上调用以下 sql：

```
RESTORE DATABASE database FROM DISK = 'c:\test\backup.bak' WITH REPLACE, NORECOVERY 
```

这通常有效，并且速度不错。当我说正常时，这是因为有时数据库卡在“恢复”模式会导致错误消息看起来像这样（假设它是一个 Alter 命令）：

```
ALTER DATABASE is not permitted while a database is in the Restoring state. 
```

这意味着如果第一次失败，那么每个测试都会失败。我可以让数据库摆脱卡住状态，但是每次都这样做很烦人，这非常耗时，而且单元测试的重点是所以当我激活测试时我不需要任何东西。

我试图看看我是否可以通过 RESTORE 语法来避免它，但无法设置任何听起来可以解决问题的选项或标志。

有没有其他我可以使用的方法比 RESTORE 命令更安全？

**更新：** 我发现恢复失败主要发生在连接仍处于活动状态时。我通常使用以下结构处理该问题：

```
ALTER DATABASE MyDatabase SET Single_User WITH Rollback Immediate

-- Restore logic here

ALTER DATABASE MyDatabase SET Multi_User 
```

这样做的问题是它只将所有连接限制为一个。有时，被迫关闭的连接之一会跳转到唯一一个空闲的连接，从而中断恢复并使其失败（或者这是我可以从我一直在阅读的文档和页面中收集到的内容）。

相反，在我开始还原逻辑之前，我尝试执行以下 SQL 命令：

```
Declare @spid int
Select @spid = min(spid) from master.dbo.sysprocesses
where dbid = db_id('Mydatabase')
While @spid Is Not Null
Begin
        Execute ('Kill ' + @spid)
        Select @spid = min(spid) from master.dbo.sysprocesses
        where dbid = db_id('Mydatabase') and spid > @spid
End

-- Do Restore Logic 
```

[http://geekswithblogs.net/AngelEyes/archive/2010/02/24/kill-connections-to-resote-db---sql-server.aspx](http://geekswithblogs.net/AngelEyes/archive/2010/02/24/kill-connections-to-resote-db---sql-server.aspx)

这部分代码进入并主动关闭所有连接，这为恢复逻辑提供了执行空间。但是，我不完全确定这是最好的方法，因为它不会阻止重新建立连接，可能会再次中断恢复过程。但到目前为止，我还没有看到证据表明这种情况已经发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:57:49.470

我发现成功的是首先回滚数据库，然后将其删除，从而解决已打开或链接到的任何问题：

```
if db_id('MyDatabase') is not null ALTER DATABASE MyDatabase SET SINGLE_USER 
    WITH ROLLBACK  IMMEDIATE

if db_id('MyDatabase') is not null drop database MyDatabase

create database MyDatabase 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:30:23.870

通过使用 usr 的建议并在恢复过程中编写脚本，我得到了它的工作。这个答案是为了关闭问题，以便访问者知道我找到了解决方案。该解决方案在原始问题中描述为更新。

# php - 如何编写图像数据，如标题、评论、标签等

> ID：12177825
> 
> 赞同：3
> 
> 时间：2012-08-29T12:20:42.943
> 
> 标签：php, coldfusion, exif, exiftool, exifworks

正在寻找使用 PHP 等编程语言或桌面实用程序将数据写入图像文件的东西。

我们有包含数百个图像文件的文件夹。图像以这种方式格式化，`ARTIST at EVENT by PHOTOGRAPHER`文件夹的标题为`EVENT`

我们想编辑文件的属性如下：

*   标题: 摄影师参加活动的艺术家
*   评论：艺术家在 PHOTOGRAPHER 的活动中
*   版权所有：COMPANYNAME
*   标签：艺术家、活动、摄影师、公司名称

如果我们有一个工具来浏览每个文件夹并进行更改，那将是一件好事，或者只要它自动浏览所有照片，手动每个文件夹就不会成为问题。

如果需要，可以更改文件名`ARTIST$EVENT$PHOTOGRAPHER`以使其更容易拆分？！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:48:16.987

你见过这个实用程序：[http ://www.sno.phy.queensu.ca/~phil/exiftool/](http://www.sno.phy.queensu.ca/~phil/exiftool/)

它似乎非常强大，并且之前在 StackOverflow 上是一个公认的答案：[如何使用 Coldfusion 修改 JPEG 图像的 EXIF 元数据？](https://stackoverflow.com/questions/2863548/how-to-modify-exif-metadata-for-jpeg-images-using-coldfusion)

谢谢，

蒂姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:31:24.547

最终使用 Adob​​e Bridge，因为我看不到 ColdFusion 或 PHP 有任何选项

# android - 增加 clipPath 大小会导致滞后

> ID：12177829
> 
> 赞同：1
> 
> 时间：2012-08-29T12:20:51.720
> 
> 标签：android, android-canvas, live-wallpaper

我正在循环增加clipPath 的大小。同样在循环内部是另一个循环，它创建了更多的clipPaths，我用它们来绘制较低的alpha，以便获得过渡效果。但是随着clipPath 大小的增加，过渡变得缓慢和滞后。

是这样的

```
int size = 5;
Paint p1 = new Paint();
Path path = new Path();
for (int i = 0; i < 20; i++) {
    path.addCircle(centerX, centerY, size, Path.Direction.CCW);
    canvas.clipPath(path);
    canvas.drawBitmap(bmp2, 0, 0, null);
    path.reset();
    int incr = size;
    while (p1.getAlpha() != 0) {
        incr -= 1;
        p1.setAlpha(p1.getAlpha() - 5);
        path.addCircle(centerX, centerY, incr, Path.Direction.CCW);
        canvas.clipPath(path, Op.UNION);
        canvas.drawBitmap(bmp2, 0, 0, p1);
        path.reset();
    }
    size += 10;
} 
```

期望的结果

![坡度](../Images/de8bc20d7b8ba46146e2f201455a4051.png)

我知道这是一个不好的方法，但这是我能想到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:04:27.367

来自[硬件加速](http://developer.android.com/guide/topics/graphics/hardware-accel.html)的一些提示可能适用：

> 以下列表描述了硬件加速不支持的已知操作：
> 
> `Canvas.clipPath()`
> 
> [...]
> 
> **不要在 draw 方法中创建渲染对象**
> 
> 一个常见的错误是每次调用渲染方法时都创建一个新的 Paint 或一个新的 Path。这迫使垃圾收集器更频繁地运行，并绕过硬件管道中的缓存和优化。

另外，我在某处读到/听说过，每当您修改路径时，都会生成一个掩码并将其重新上传到 GPU（？），因此您不应该经常修改它们。所以是的，该代码可能运行不快。

您可能对这些视频感兴趣：

*   [Google I/O 2011：加速 Android 渲染](http://www.youtube.com/watch?v=v9S5EO7CLjo)
*   [Google I/O 2012 - 黄油或更糟：平滑 Android UI 中的性能](http://www.youtube.com/watch?v=Q8m9sHdyXnE)

**编辑**：我不知道实际的替代方法，但如果除了使用路径之外别无他法，您可以保留它们的数组，而无需修改它们。但是，如果动画有很多帧，那可能意味着很多内存。

# python - django forms 动态选择域列表选择值

> ID：12177843
> 
> 赞同：1
> 
> 时间：2012-08-29T12:21:41.797
> 
> 标签：python, django, dynamic, choicefield

### 问题

我改变我的方法...

我的网址：传递 my_code 就可以了

```
(r'^test_form_2/(?P<my_code>\d+)/$', TestForm_2), 
```

我的观点：抓住 my_code 在 dic_list 上选择正确的选择列表

```
def TestForm_2(request,my_code):

    dic_list = {'1':(('1','A'),('2','B'),('3','C')),
                '2':(('1','D'),('2','E'),('3','F')),
                '3':(('1','G'),('2','H'),('3','I'))
                }

    if request.method =="POST" :
        form = TestForm2(request.POST)

        if form.is_valid():

            return HttpResponse ('OK')

    else :

        my_choices_list = dic_list[my_code]
        form = TestForm2(my_choice=my_choices_list)

    return render_to_response ('zip_finder/page_form.html') 
```

和形式：

```
class TestForm2(forms.Form):

    my_select = forms.ChoiceField(choices='',label='Choisissez dans la liste')

    def __init__(self, my_choice=None, **kwargs):
        super(TestForm2, self).__init__(**kwargs)
        if my_choice:

            self.fields['my_select'] = forms.ChoiceField(choices=my_choice,label='Choisissez dans la liste') 
```

![在此处输入图像描述](../Images/4cdb078accd130daabeb0c49da4e85af.png)

我点击提交，然后：

```
Caught ValueError while rendering: too many values to unpack 
```

我查看了 HTML，但在我的选择中看不到选定的选项：

```
 <select id="id_my_select" class="select" name="my_select">
<option value="1">D</option>
<option value="2">E</option>
<option value="3">F</option>
</select> 
```

* * *

### 解决方案：使用 ModelChoiceField

我的网址：传递 my_code 就可以了

```
 (r'^test_form_2/(?P<my_code>\d+)/$', TestForm_2), 
```

我的观点：获取 my_code 以在查询集对象上选择正确的选择列表

```
 def TestForm_2(request,my_code):

        if request.method =="POST" :
            form = TestForm2(request.POST)

            form.fields['ville_source'].queryset = Villes.objects.filter(code_postal=my_code)
            if form.is_valid():

                return HttpResponse ('OK')

        else :

            form = TestForm2(my_code=my_code)

        return render_to_response ('zip_finder/page_form.html') 
```

我的表格：

```
class TestForm4(forms.Form):

    ville_source = ModelChoiceField(queryset=Villes.objects.all(),required=True,label='Choisissez votre ville source')

    def __init__(self, *args, **kwargs):
        code_postal = kwargs.pop('my_code', None)
        super(TestForm4, self).__init__(*args, **kwargs)

        if code_postal:

            self.fields['ville_source'].queryset = Villes.objects.filter(code_postal=code_postal) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:50:39.810

1.  **Queryset lst_ville 是空**的，它必须像这样过滤，使用 unicode 值`code_postal`：

    ```
    .filter(code_postal='<django.forms.fields.CharField object at 0x26bf550>'). 
    ```

2.  **使用 ModelChoiceField**代替 CharField：

    ```
    # make sure that lst_ville is not an empty queryset
    ville_source = forms.ModelChoiceField(queryset=lst_ville,label='Choisissez votre ville source') 
    ```

3.  **对于基于表单另一个字段的值的字段过滤**，它变得有点复杂。对您来说最简单的解决方案是只使用[django-selectables](http://django-selectable.readthedocs.org/en/version-0.5.2/advanced.html#chained-selection)或[django-autocomplete-light](http://django-autocomplete-light.readthedocs.org/en/latest/dependant.html)。

# asp.net - 查找控件 - 对象引用未设置为对象的实例

> ID：12177844
> 
> 赞同：0
> 
> 时间：2012-08-29T12:21:50.340
> 
> 标签：asp.net, vb.net

我试图在我的页面上实现一个查找控件，找到一个 ID 为“w1test”的文本框，但是我一直收到一条错误消息，提示“对象引用未设置为对象的实例”。但是我认为一切都井井有条...

这是我的代码：

```
Private Sub getTextbox()
    Try
        Dim txtbox As TextBox = CType(Page.FindControl("w1test"), TextBox)
        txtbox.Text = "UPDATED"
    Catch ex As Exception
    End Try
End Sub 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:16:41.920

您需要 FindControl 的递归版本。像这样的东西

```
Public Function RecursiveFindControl(container As Control, name as String) as Control
    If Not(container.ID Is Nothing) AndAlso (container.ID.Equals(name)) Then
        Return container
    End If

    For Each c as Control in container.Controls
        Dim ctrl as Control = RecursiveFindControl(c, name)
        If Not ctrl Is Nothing Then
            return ctrl
        End If
    Next
    return Nothing
End Function 
```

打电话给

```
 Dim txtbox As TextBox = CType(RecursiveFindControl(Page, "w1test"), TextBox) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:25:05.487

以下对我有用。如果我需要遍历控件（例如 TextBox0、TextBox1 等），我只需`NamingContainer`从其中一个控件中获取，并使用该“父”控件来执行搜索其他控件，如下所示。

```
// get NamingContainer from one of the controls
Control parent = TextBox0.NamingContainer;
// now can iterate through controls
for(int i = 0; i < someBound; i++)
{
    ((TextBox)parent.FindControl("TextBox" + i)).Text = "Text here now";
} 
```

# python - scrapyd deploy 显示 0 个蜘蛛

> ID：12177845
> 
> 赞同：5
> 
> 时间：2012-08-29T12:21:51.817
> 
> 标签：python, scrapy

我正在为一个项目使用scrapy。我运行了以下命令来部署项目：

`$scrapy deploy -l`

然后我得到了以下o/p：

刮板 `http://localhost:6800/`

`$cat scrapy.cfg`

```
[settings] 
default = scrapBib.settings

[deploy:scrapysite]  
url = http://localhost:6800/  
project = scrapBib 
```

`$scrapy deploy scrapysite -p scrapBib`

```
'Building egg of scrapBib-1346242513
'build/lib.linux-x86_64-2.7' does not exist -- can't clean it

'build/bdist.linux-x86_64' does not exist -- can't clean it

'build/scripts-2.7' does not exist -- can't clean it

zip_safe flag not set; analyzing archive contents...

Deploying scrapBib-1346242513 to `http://localhost:6800/addversion.json`

2012-08-29 17:45:14+0530 [HTTPChannel,22,127.0.0.1] 127.0.0.1 - - [29/Aug/2012:12:15:13 

+0000] "POST /addversion.json HTTP/1.1" 200 79 "-" "Python-urllib/2.7"

Server response (200):

{"status": "ok", "project": "scrapBib", "version": "1346242513", "spiders": 0} 
```

如您所见，虽然我在 project/spiders/ 文件夹中编写了 3 个蜘蛛，但将蜘蛛设为 0 。结果，我无法使用 curl 请求开始爬网。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T07:23:43.720

我也遇到过这个问题，做两件事

1)从本地系统中删除`project.egg-info`, `build`, 。`setup.py`

2) 从您的服务器中删除所有已部署的版本。

然后尝试部署它将被修复...

# jsp - 如何用数据库中的值填充 jsp 页面中的选择框，以及如果 servlet 将数据发送回调用 jsp 时将其值显示为选中状态？

> ID：12177846
> 
> 赞同：1
> 
> 时间：2012-08-29T12:21:53.867
> 
> 标签：jsp, servlets, javabeans, code-design

我是 JSP、Servlet 和 Java bean 领域的初学者。我正在处理一个包含创建用户组的 html 表单的 jsp 文件。我正在尝试使用 MVC 模型开发这种形式。此表单包含 2 个文本框和 2 个选择框。在这些选择框中，您可以选择多个值，一个包含用户的选择框。每当第一次调用 jsp 页面时，此用户选择框将被填充

从数据库中获取的用户名。表单功能是这样的，每当提交表单时，都会调用表单的 action 方法中提到的 servlet。这个 servlet 检查用户是否已经存在于数据库中。如果组

名称在数据库中不存在，则组名和其他表单数据将保存在数据库中，并且回复属性将发送回值为“成功”的 jsp 页面。如果组名已存在，则发送回复属性

返回值为“duplicate”的jsp页面，其余的表单数据也被发送回jsp页面，以便该表单数据将被填充回表单。

这是我的 JSP 文件代码。

```
<%@ page import="java.util.*" %>
<jsp:useBean id="objbean" class="com.techspeed.user.CreateUserBean" />
<jsp:useBean id="objdao" class="com.techspeed.user.CreateUserDAO" />
<head>
   <title>Untitled Document</title>
</head>

<body>
   <%
      if (null != request) {
         if (request.getAttribute("reply") != null) {
            if (request.getAttribute("reply").toString().equalsIgnoreCase("Duplicate")) {
               out.println("The entered Username is already exists!");
            } else if (request.getAttribute("reply").toString().equalsIgnoreCase("failed")) {
               out.println("User creation process terminated due to technical fault. Please try again later!");
            } else {
               out.println("The User created successfully!");
            }
            //out.println(request.getAttribute("reply"));
         }
      }
   %>
   <form name="creategroupform" method="post" action="Creategroup">
      <table width="422" border="0" align="center" cellpadding="2" cellspacing="2" bgcolor="#FFFFFF">
         <tr>
            <th width="128" nowrap scope="col">&nbsp;</th>
            <th width="280" scope="col">&nbsp;</th>
         </tr>
         <tr>
            <th nowrap scope="col">&nbsp;</th>
            <th scope="col">&nbsp;</th>
         </tr>
         <tr>
            <th nowrap scope="col">
         <div align="left" class="grayBodyText style14">
            Group Name : 
         </div>
         </th>
         <th scope="col"><div align="left">
            <input type="text" name="username" value="">
         </div></th>
         </tr>
         <tr>
            <td>Description<span class="style14">: </span></td>
            <!--I used JSTL to fill the value sent by servlet  -->
            <td><input type="text" name="lname" value=${lname}></td> 
         </tr>
         <tr>
            <td><span class="style14">Group Type :</span></td>
            <td>
               <select name="role">
                  <!-- 
                  Here the JSTL is used to show a value as selected in 
                  select box which was selected by the user when form is submitted.
                  -->
                  <option value="Beginner" ${role == Beginner ? 'selected' : ''}>
                     Beginner
                  </option> 
                  <option value="Moderate" ${role == Moderate ? 'selected' : ''}>
                     Moderate
                  </option>
                  <option value="Expert" ${role == Expert ? 'selected' : ''}>
                     Expert
                  </option>
               </select>                          </td>
         </tr>
         <tr>
            <td><span class="style14">List Of Users: </span></td>

            <!-- Major problem starts here below -->
            <td><select name="groups" size="5" multiple>
                  <%
                     //objbean=objdao.createHtmlOptionList(objbean);
                     //out.println(objbean.getHtmGroupOptionList());
                     System.out.println("REached here!");

                     // This calls to getGroupList of method of DAO class which 
                     // retrives username and there unique userids from 
                     // database and stores in MAP collection of bean class.
                     if (request.getAttribute("reply") == null
                             || request.getAttribute("reply").toString().equalsIgnoreCase("success")) {
                        objdao.getUserList(objbean);
                        System.out.println("REached inside if!");
                  %>
                  <jsp:getProperty name="objbean" property="htmUseroptionList" />
                  <!-- 
                  In this JSTL the htmGroupOptionList property is a string 
                  variable name in bean class   which contains the 
                  preconstructed html code of <Options> haveing 
                  userid as value and username as name in Map collection Which 
                  gets constructed in above call to function getGroupList of 
                  DAO class getGroup. As per my thought this if block is gets 
                  executed whenever there is a fresh call given to this jsp 
                  page and when the reply attribute of the 
                  servlet contains value as "success" 
                  -->
                  <%
                     } else {
                        /* As per my thought this else block is get invoked 
                         whenever the reply attribute send by the servlet 
                         contains value as "Duplicate" of "Failed"  As per my 
                         thought this if block is gets executed whenever there 
                         is a fresh call given to this jsp page and when the 
                         reply attribute of the servlet contains value as "success" */
                        if (!(request.getAttribute("reply").toString().equalsIgnoreCase("success"))) {
                           objdao.getUserList(objbean);
                           // This Map have the list of userid as key and 
                           // username as value. This map is get filled from Database.
                           Map<Integer, String> userMap
                                   = (Map<Integer, String>) objbean.getUserList();
                           // This list contains the list of selected username 
                           // by the user before submitting the form.
                           ArrayList<String> lstSelUser
                                   = (ArrayList<String>) request.getAttribute("selUser");
                           String strSel = "";
                           for (Integer key : UserMap.keySet()) {

                              for (int i = 0; i < lstSelUser.size(); i++) {
                                 if (key.toString().equalsIgnoreCase(lstSelUser.get(i))) {
                                    strSel = "selected=\"selected\"";
                                    break;
                                 } else {
                                    System.out.println("not selected");
                                    strSel = "";
                                 }
                              }
                              out.println("<option value=" + key.toString() + " "
                                      + strSel + ">" + userMap.get(key) + "</option>");
                           }
                        }
                     }
                  %>                             
               </select></td>
         </tr>
         <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
         </tr>              <tr>
            <td>&nbsp;</td>
            <td><input type="submit" name="submit" value="Submit">
               <input type="reset" name="reset" value="Reset">
               <!--<input type="reset" name="" value="Cancel"> -->
            </td>
         </tr>
      </table>
   </form>

</body>
</html> 
```

根据jsp页面中的上述代码和提到的评论，我对此有以下疑问和疑问。

*   如您所见，当第一次调用 jsp 页面以及将控件从 servlet 发送回 jsp 页面时，我编写了一些代码来填充用户选择框。此代码包含 java 代码。我认为这种填充用户选择框的解决方案不适合按照 MVC 模式进行编码，即它不是适当的代码设计。我已经读过在 jsp 中编写 java 代码不是一个好习惯。如何使这种编码简短而优化？

*   请在jsp代码中找到第2行和第3行，即jsp的userbean标签。使用此标签创建的对象仅用于填充用户列表框。我认为这也不是最佳编码。如何使这种编码简短而最佳？

*   如果输入的组名已经存在于数据库中，则 servlet 将所有数据设置为请求对象的属性，并使用请求调度程序将其转发到 jsp 页面，但在这里，如果您检查地址栏中的 url，则当 jsp 页面显示时，浏览器带有预填充表单它没有在 url 中显示 jsp 页面名称。它显示 servlet 名称。那么如何让他的jsp名称回到地址栏中呢？

*   互联网上是否有任何链接提供有关代码设计信息的信息以及真实的单词问题和像上面这样的初学者示例？

我需要一些专家的指导和建议来解决这个问题。请指导我解决这个问题。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:20:54.570

1.  您可以将 MVC 框架用作 Struts 并将所有属性与模型绑定。然后，当您显示组合框时，该值将自动从您的模型中设置。
2.  如上。
3.  您可以使用重定向而不是转发，但这取决于要求。
4.  搜索 Struts 或 Spring MVC。

# c# - 如何探索 ASP.NET MVC 内部功能？

> ID：12177849
> 
> 赞同：0
> 
> 时间：2012-08-29T12:21:58.997
> 
> 标签：c#, asp.net-mvc

我是 PHP 开发人员，但正在尝试学习 ASP.NET MVC。在 PHP 中，当我需要查看方法实现时，我只需查看它的定义并阅读它，因为它是用纯 PHP 编写的。

在 ASP.NET MVC 中，我正在编写一个视图并想看看 @Html.ActionLink 是如何工作的，但我不能。我得到的最大值是函数头而不是实际代码。

需要帮助，请。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:24:24.037

**它是开源的**。您可以检查源代码并查看每种方法的作用。源代码可在 codeplex 获得。

[http://aspnet.codeplex.com/](http://aspnet.codeplex.com/)

[http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)

ASP.NET MVC、Web API 和 Razor 是开源的。最好的事情是，您甚至可以为此做出贡献。更多细节在 Scott 的帖子[中](http://www.hanselman.com/blog/ASPNETMVC4ASPNETWebAPIAndASPNETWebPagesV2RazorNowAllOpenSourceWithContributions.aspx)

如果您想查看像上面那样没有源代码的任何其他东西的源代码，您可以使用任何反编译工具。我使用[JustDecompile](http://www.telerik.com/products/decompiler.aspx)，它很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:23:32.397

您可以使用[`Reflector`](http://www.reflector.net/)查看 .net 函数的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:24:35.737

ASP.NET MVC 是一个开源框架。

[您可以在此处](http://aspnetwebstack.codeplex.com/)获取代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:24:35.917

ASP.NET MVC 源代码可在[http://aspnetwebstack.codeplex.com/获得](http://aspnetwebstack.codeplex.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T12:28:01.500

即使在 php 中，如果您想显示内置函数的源代码，`md5`也必须下载源代码。

现在在 Asp.net mvc 中，您可以下载源代码检查此链接。 [https://aspnet.codeplex.com/releases/view/58781](https://aspnet.codeplex.com/releases/view/58781)

# r - 将任意 R 对象存储到 HDD 上？

> ID：12177858
> 
> 赞同：5
> 
> 时间：2012-08-29T12:22:40.060
> 
> 标签：r

我知道我们可以将数据矩阵导出到`csv`文件`xlsx`中。

像这样的复杂对象`lm`呢？例如，在我的工作中，我可能有一个长度为 1000 的列表，每个列表都有一个`lm()`对象。每次加载时，`R`我都必须等待很长时间才能`lm`用`for`循环或`lapply`.

我宁愿在会话结束时将列表保存在我的 HDD 上的某个位置，并在下一个会话开始时打开它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T12:24:22.743

是的，`save()`与它的对应物一起使用`load()`。

通常，这个主题称为“序列化”（参见 参考资料`help(serialize)`），R 对不同格式有很多支持。

# ruby-on-rails - Rails CSRF 保护和缓存控制：公共

> ID：12177860
> 
> 赞同：2
> 
> 时间：2012-08-29T12:22:48.937
> 
> 标签：ruby-on-rails, csrf, http-caching

我已将以下内容添加到我的应用程序的布局文件中，以便我可以启用某些页面的公共 HTTP 缓存。

```
= csrf_meta_tag unless response.cache_control[:public] 
```

我可以这样做，因为该应用程序是使用预加载 JSON 的 Backbone 生成的，不会从一个用户更改为下一个用户。

```
render json: [some, list, of, public, things]
expires_in 10.minutes, public: true 
```

但是，我希望能够从这些缓存页面提交 POST 请求以进行登录和购买。我必须在一方面拥有一个快速（缓存）站点，另一方面拥有一个安全站点（每会话 csrf 令牌）之间进行选择吗？

# java - 大文本文件，75MB，应用程序大约需要一个小时来处理..Java

> ID：12177862
> 
> 赞同：0
> 
> 时间：2012-08-29T12:22:51.207
> 
> 标签：java, performance, file, parsing

我有一个 75Mb 的文本文件（.txt）。它有大约 3,00,000 行，每行大约有 100 个单词（每行 50-60 个字符）。我需要阅读大约 100 行，然后使用某种标记将其放在第 101 行的开头，处理这 100 行并清除所有数据，然后再从第 101 行再次读取，我该怎么做它？如何保留标记？

```
 public static void calculateFormulaValues()
    {
        System.out.println("\n\t****************************************calculateFormulaValues()****************************");
        for (CellBean cellBean : Reader.cellList)
        {
            System.out.println("\tCellName="+cellBean.getCellID()+" Time="+cellBean.getHour()+":"+cellBean.getMins());
            LinkedHashMap<String,Double> formulaValueMap=new LinkedHashMap<>();
            LinkedHashMap<String,String> headerValueMap=cellBean.getHeaderValueMap();

        kpiNameLoop:    
            for (String kpiNameToBeCalculated : Reader.kpiAndFormulaMap.keySet())
            {
                String formulaToBeEvaluated=Reader.kpiAndFormulaMap.get(kpiNameToBeCalculated);

                //System.out.println("\n*************Trying to calculate::"+kpiNameToBeCalculated+"="+formulaToBeEvaluated+"***********************************");
                if(formulaToBeEvaluated==null || formulaToBeEvaluated.trim().equals(""))
                {
                    System.err.println("\n************FORMULA-NOT-FOUND-EXCEPTION*******************");
                    System.err.println("\nCellBean-->"+cellBean);
                    System.err.println("KpiToBeCalculated-->"+kpiNameToBeCalculated);
                    System.err.println("Formula Retrieved-->"+formulaToBeEvaluated);
                    System.err.println("************************************************************");
                    System.err.flush();
                    continue kpiNameLoop;
                }
                //^[^\d\W]\w*$
                Pattern p = Pattern.compile("[a-zA-Z_#0-9]+");
                //Pattern p = Pattern.compile("^[^\\d\\W]\\w*$");
                Matcher m = p.matcher(formulaToBeEvaluated);

                ArrayList<String> myHeaders = new ArrayList<String>();
                boolean result=m.find();
                while(result) 
                {

                    //System.out.println(m.group());
                    myHeaders.add(m.group());
                    result = m.find();
                }

                //System.out.println("HEADSERS(UNSORTED)="+myHeaders);
                TreeSet<String> sortingTreeValues=new TreeSet<>(new java.util.Comparator<String>() {

                    @Override
                    public int compare(String str1, String str2)
                    {
                        if(str1.length() > str2.length())
                            return -1;
                        if(str1.length() < str2.length())
                            return +1;
                        if(str1.length() == str2.length())
                            return +1;
                        return 0;
                    }
                });

                for (String headers : myHeaders)
                {
                    if(Character.isDigit(headers.charAt(0)))
                        continue;
                    else
                        sortingTreeValues.add(headers);
                }

                //System.out.println("HEADSERS(SORTED)="+sortingTreeValues);

                for (String counterName : sortingTreeValues)
                {

                    String valueForCounter=headerValueMap.get(counterName);
                    //System.out.println("\tValue For-->"+counterName+"="+valueForCounter);

                    if(valueForCounter==null)
                    {
                        System.err.println("\n*******************************VALUE NOT-GOT EXCEPTION***************");
                        System.err.println("\nCellBean-->"+cellBean);
                        System.err.println("KpiToBeCalculated-->"+kpiNameToBeCalculated);
                        System.err.println("Formula Retrieved-->"+formulaToBeEvaluated);
                        System.err.println("CounterNotFound--->"+counterName);
                        System.err.println("******************************************************************");
                        System.err.flush();
                        continue kpiNameLoop;
                    }

                    if(valueForCounter.trim().equals(""))
                    {
                        valueForCounter="0";
                    }

                    formulaToBeEvaluated=formulaToBeEvaluated.replaceAll(counterName, valueForCounter);
                }

                //System.out.println("FORMULA AFTER REPLACING-->"+formulaToBeEvaluated);
                formulaToBeEvaluated=formulaToBeEvaluated.replaceAll("0.0/0.0", "0.0");
                formulaToBeEvaluated=formulaToBeEvaluated.replaceAll("0/0", "0");
                formulaToBeEvaluated=formulaToBeEvaluated.replaceAll("[0-9\\.]+/0\\.0", "0.0");
                //System.out.println("Formula After Handling Zeros Exception="+formulaToBeEvaluated);

                ScriptEngineManager mgr = new ScriptEngineManager();
                ScriptEngine engine = mgr.getEngineByName("JavaScript");
                String finalValue="";
                try {
                        String resultValue=engine.eval(formulaToBeEvaluated).toString();
                        finalValue=resultValue;

                    }catch (ScriptException e) 
                    {
                        // TODO Auto-generated catch block"40+2"
                        System.out.println("************* ERROR in PARSING Formula******************");
                        System.out.println("FormulaCreated-->"+formulaToBeEvaluated);
                        System.out.println(e);
                        e.printStackTrace();
                        System.out.flush();
                    }

                /*System.out.println("\n************************************FormulaHasBeenCalculated*******************************");
                System.out.println(kpiNameToBeCalculated+"="+formulaToBeEvaluated+"="+finalValue);
                System.out.println("*********************************************************************************************");*/
                formulaValueMap.put(kpiNameToBeCalculated,roundOff(new Double(finalValue),3));

            }

            cellBean.setKpiFormulaValueMap(formulaValueMap);
        }
    } 
```

# regex - C# 中的正则表达式用于空格或 (

> ID：12177863
> 
> 赞同：0
> 
> 时间：2012-08-29T12:22:55.237
> 
> 标签：regex, c#-4.0

我有一个字符串，它将有一个空格和 ( 或只是 (。我需要根据 (.) 的空格将字符串拆分为 2。

以下是示例字符串

```
1234(207) 
1234 (207)
1234 207 
```

以上所有场景的结果都应该是。

```
string1=1234
string2=(207) 
```

我在 C# 中有一个代码

```
Regex r = new Regex(@"(^.*?)\s+(.*?$)"); 
Match m = r.Match(strAbove);
firstPart = m.Groups[1].Value;
secondPart=m.Groups[2].Value; 
```

上述场景的正则表达式模式是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:29:12.000

如果没有实际测试，看起来您有一些小问题：

```
Regex r = new Regex(@"^(\d+)\s*(\(\d+\))$"); 
```

首先， ^ 和 $ 需要超出捕获括号。空格应该是 * 而不是 +，因为它是 0 或更多，而不是 1 或更多。最后，文字括号应该被转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:42:29.253

由于您有一个不包含括号的示例，但您希望它们在输出中，您必须在之后添加它们或相应地重新格式化您的输入字符串。我会做前者，这更容易一些。

```
var match = Regex.Match(s, @"^(\d+)[ (]+(\d+)";
var string1 = match.Groups[1].Value;
var string2 = "(" + match.Groups[2].Value + ")"; 
```

# asp.net - 如何在 html 菜单中获取箭头标记而不是项目符号

> ID：12177864
> 
> 赞同：2
> 
> 时间：2012-08-29T12:22:56.947
> 
> 标签：asp.net, html, css, asp.net-mvc-4

**我在.cshtml**页面中的HTML 代码是

```
 <menu id="menuTools">
        @Html.ActionLink("Test1", "Index", new { Area = "Tools", Controller = "Controller1" })
        @Html.ActionLink("Test2", "Index", new { Area = "Tools", Controller = "Controller2" })
        @Html.ActionLink("Test3", "Index", new { Area = "Tools", Controller = "Controller3" })
    </menu> 
```

我需要在每个菜单前面有箭头标记而不是项目符号。谢谢。

更新：当我单击特定菜单时，我需要有箭头标记。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:31:27.750

最简单的方法是给 ul 一个像

```
list-style-image:url('/path/to/yourArrow.png'); 
```

那么你可能不得不使用列表样式位置：Xpx Ypx; 另外要对齐它。见[http://www.w3schools.com/cssref/pr_list-style-image.asp](http://www.w3schools.com/cssref/pr_list-style-image.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:30:17.193

如果您使用 list `<li>`，则 CSS 中有一个选项可以将自定义图像设置为项目符号图像。您可以使用`list-style-image:`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:36:13.153

我想这可能会有所帮助： http: [//www.chami.com/tips/internet/050798i.html](http://www.chami.com/tips/internet/050798i.html) 所以“→”是一个“&”+“rarr;”

# php - 获取电子邮件附件的表单元素

> ID：12177865
> 
> 赞同：1
> 
> 时间：2012-08-29T12:22:57.767
> 
> 标签：php, javascript, jquery, forms, email-attachments

我假装将在输入类型文件中选择的附件内容传递到另一个 php 页面，我将通过电子邮件发送附件。

碰巧我有这个表格声明：

```
<form id="formElem" name="formElem" enctype="multipart/form-data" action="" method="post"> 
```

但我无法将目标 php 页面放在那里，因为我通过了一个 jquery 和一个 javascript 函数。它在我为目标 php 页面重定向的最后一个函数中。

所以，在最后一个 javascript 函数中，我需要使用它：

```
form.action = 'index.php?pagina=candB&'+ qstringA; 
```

将表单的所有数据重定向到假装的 php 页面。在我使用这个之前：

```
window.location.href = 'index.php?pagina=candB&'+ qstringA; 
```

但正如我在这里被告知的那样，这将不允许正确接收附件的数据。

这是我提交表单的按钮：

```
<button name='send_cand' id='send_cand' value='send_cand' onclick='return false;' type='submit'>Send Data</button> 
```

它调用以下 jquery 函数：

```
$('#send_cand').bind('click',function(){

    ....

    if($('#formElem').data('errors')){
        preenchimentoForm=false;

        dadosFormularios(form, preenchimentoForm, cursos, empregos, eventos);
        return false;
    }
    else{
        dadosFormularios(form, preenchimentoForm, cursos, empregos, eventos);
    }
} 
```

因此，我需要做的是将表单元素应用于此函数内部的 var，以便我可以将她传递给函数，直到这里：

```
form.action = 'index.php?pagina=candB&'+ qstringA; 
```

所以这条线可以工作，因为现在它不工作。

希望我很清楚，我们将不胜感激。谢谢哟！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T04:49:19.067

所以你想在提交之前更新表单动作？

尝试使用该[`.submit()`](http://api.jquery.com/submit/)事件，[`.attr()`](http://api.jquery.com/attr/)如下所示：

```
$('#formElem').submit(function(){

    // Update the form action        
    $('#formElem').attr('action', 'index.php?pagina=candB&'+ qstringA);

}); 
```

我在这里测试了这个逻辑：[jsFiddle](http://jsfiddle.net/CajAk/1/)

希望有帮助！

# c# - DDD 数据库优先。如何处理聚合

> ID：12177875
> 
> 赞同：4
> 
> 时间：2012-08-29T12:23:37.297
> 
> 标签：c#, entity-framework, domain-driven-design

我正在尝试学习 DDD 的概念。我做了一个项目，我使用数据库优先方法。在基础设施中，我添加了一个 edmx 文件，我选择自动生成实体。现在在“域”中，我正在尝试创建聚合。

但是在这里我遇到了一些问题。我正在尝试创建一个名为“用户”的聚合，但用户已经存在于 ef 自动生成的实体中。我是否应该将聚合“用户”重命名为其他名称，并且在从数据库中获取数据时将其从数据库实体映射到聚合。

我做错了吗？或者我不应该自动生成实体还是实体聚合？

请建议和帮助。

![在此处输入图像描述](../Images/6cd726d79876796513b3875820794f41.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T06:13:14.637

如果您想忠实于 DDD，您应该将域对象建模为独立于您的持久性解决方案。DDD 通过存储库处理持久性。不要使用 EF 生成的“实体”作为您的域模型；而是设计您自己的模型并实现一个使用 EF 进行持久性的存储库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T13:59:15.217

在我看来，领域驱动设计和“数据库优先”是对立的。领域驱动设计关注复杂行为，数据模型关注数据的静态结构。

如果我有幸从一个干净的情况开始，我不会通过首先创建一个遗留数据库来使它变得比必要的更复杂。考虑到 DDD 面向复杂领域，其中发现和学习是过程的一部分。

为了支持持续的学习过程，最好依赖更专门为进化而设计的软件组件（如可以在廉价单元测试下的面向对象的域模型），而不是进化肯定更昂贵的数据库设计。

没有人能在一开始就做好每一件事。所以我最好从一次性成本很低的东西开始。

# galaxy-tab - 在三星 Galaxy Tab 10.1 上，当 iframe 之前有内容时，iframe 内的触摸事件会在元素上被忽略

> ID：12177885
> 
> 赞同：1
> 
> 时间：2012-08-29T12:24:13.330
> 
> 标签：galaxy-tab

在我的测试页[http://finlir.net/paint/kinetic/2height.html](http://finlir.net/paint/kinetic/2height.html)我已将 touchstart 事件绑定到两个 div 元素。在我的三星 Galaxy Tab 10.1 股票浏览器上触摸该页面上的元素时，会识别事件并打印一些调试文本。但是，当我使用 iframe 显示该页面[http://finlir.net/paint/kinetic/2heightiframe.html](http://finlir.net/paint/kinetic/2heightiframe.html)时，当我按下 iframe 下部的元素时，不会触发事件。根据 iframe 之前使用的空间多少会影响这一点，在 iframe 之前使用的更多空间似乎会减少 iframe 中的“可触摸空间”。在我的 iframe-testpage（见上面的第二个链接）上，这可以通过按下按钮“添加 p”来测试。

知道是什么导致了这个问题吗？我在 iPad、iPhone、我的 Android HTC Desire 等设备上没有任何问题。

**更新：**我将 iframe 中的所有内容包装在一个隐藏溢出的 div 中，并将其宽度和高度设置为窗口（iframe）大小。然后我在其中一个元素的右侧和底部添加了 padding:100000px 。现在检测到触摸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:56:16.617

我就类似的问题联系了三星，发现 iframe 与他们的操作系统不完全兼容。我在滚动时遇到问题。在我向下滚动之前，所有超出框架的链接都不起作用，并且框架内存在先前链接的永久幽灵链接。最近虽然三星发布了一个重大更新，它似乎解决了我的问题，这很棒，因为我的 GreenLinks 应用程序现在兼容了！

# animation - css动画/过渡：一定时间后淡出或上滑元素？

> ID：12177886
> 
> 赞同：3
> 
> 时间：2012-08-29T12:24:14.163
> 
> 标签：animation, css, css-transitions

在我当前的页面上是这个……</p>

```
<div id="wr-notice" class="success">
    <div class="wrapper inner message">Thank you!</div>
</div> 
```

CSS ...</p>

```
#wr-notice {
    position:fixed;
    z-index:1;
    top:0;
    left:0;
    width:100%;
    color:white;
    background:green;
} 
```

CSS3 是否有可能在`#wr-notice`5 秒内“隐藏”这个？所以当页面加载时`#wr-notice`应该是可见的，5秒后我想隐藏或动画它。最好的方案是将其高度设置为动画，`0`使其向上滑动？

CSS3 过渡是否可以实现“计时器”？

关于这件事有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:26:55.513

这是一个纯 css 解决方案的[小提琴。](http://jsfiddle.net/aRGY7/)

我在 Firefox 中尝试过，但在 Chrome 中，将某些内容移出视口时会出现问题。背景不会被重绘，所以当文本移动时，绿色背景看起来是静止的。但是元素实际上是在移动的，所以我想你只需要忍受它，除非有人能想出一个技巧。如果您在视口内移动对象，它会起作用。也许有人应该报告这个错误，但无论如何。

编辑：我知道红色背景和光标指针看起来有点奇怪，但我只是想展示 Chrome 错误。这些对css都不是必需的。

编辑2：如果您想了解更多信息，只需谷歌“css 关键帧动画”或其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:26:34.920

使用 CSS3，您可以使用[动画延迟](http://www.w3schools.com/cssref/css3_pr_animation-delay.asp)元素。引自网站：

> animation-delay 属性定义动画何时开始。

如果你想使用 Javascript：你可以使用 JQuery[`.delay()`](http://api.jquery.com/delay/)元素：

```
$(document).ready(function() {
  $("#wr-notice").delay(5000).slideUp();
}); 
```

# asp.net-mvc-3 - 将 SynchronizationContext 与 TrackingParticipant 一起使用

> ID：12177887
> 
> 赞同：0
> 
> 时间：2012-08-29T12:24:18.323
> 
> 标签：asp.net-mvc-3, nhibernate, workflow-foundation-4, s#arp-architecture

我有一个自定义跟踪参与者：

```
public class ErsTrackingParticipant : TrackingParticipant, IErsTrackingParticipant
{
    private readonly INHibernateRepository<ErsTrackingRecord> _ersTrackingRecordRepository;

    public ErsTrackingParticipant(INHibernateRepository<ErsTrackingRecord> ersTrackingRecordRepository)
    {
        this._ersTrackingRecordRepository = ersTrackingRecordRepository;
    }

    protected override void Track(TrackingRecord record, TimeSpan timeout)
    {
        ErsTrackingRecord ersTrackingRecord = TrackingCommand.GetTrackingRecord(record);
        this._ersTrackingRecordRepository.Save(ersTrackingRecord);
    }
}

public interface IErsTrackingParticipant
{
} 
```

和工作流主机助手：

```
public class WorkflowHostHelper: IWorkflowHostHelper
{
    private WorkflowApplication _workflowApplication;
    AutoResetEvent _instanceUnloaded = new AutoResetEvent(false);

    private IErsTrackingParticipant _ersTrackingParticipant;

    private bool _isCompleted = false;

    public string InstanceStoreConnectionString { get { return ConfigurationManager.AppSettings["InstanceStoreConnectionString"]; } }

    public WorkflowHostHelper(IErsTrackingParticipant ersTrackingParticipant)
    {
        _ersTrackingParticipant = ersTrackingParticipant;
    }

    public void Initialize(Activity workflowType)
    {
        _workflowApplication = new WorkflowApplication(workflowType);
        TrackingProfile trackingProfile = new TrackingProfile() { Name = "TroubleshootingProfile", ActivityDefinitionId = "*" };
        trackingProfile.Queries.Add(new WorkflowInstanceQuery { States = { "*" } });
        trackingProfile.Queries.Add(new ActivityStateQuery { States = { "*" } });
        trackingProfile.Queries.Add(new ActivityScheduledQuery());
        trackingProfile.Queries.Add(new BookmarkResumptionQuery() { Name = "*" });

        _workflowApplication.Extensions.Add(_ersTrackingParticipant);

        SynchronizationContext synchronizationContext = SynchronizationContext.Current;
        _workflowApplication.SynchronizationContext = synchronizationContext;
        _workflowApplication.InstanceStore = new SqlWorkflowInstanceStore(InstanceStoreConnectionString);

        _workflowApplication.PersistableIdle = (e) =>
            { return PersistableIdleAction.Persist; };
        _workflowApplication.Completed = (e) =>
            {
                _isCompleted = true;
                _instanceUnloaded.Set();
            };
        _workflowApplication.Idle = (e) =>
            { _instanceUnloaded.Set(); };

    } //Rest ommiitted... 
```

当存储库尝试保存回数据库时，它会出错：

```
'((SharpArch.NHibernate.NHibernateRepositoryWithTypedId<EmployeeRequestSystem.Domain.ErsTrackingRecord,int>)(this._ersTrackingRecordRepository)).Session' threw an exception of type 'System.NullReferenceException'

SharpArch.NHibernate.Contracts.Repositories.INHibernateRepositoryWithTypedId<T,TId>.DbContext = {SharpArch.NHibernate.DbContext} 
```

在工作流活动中，我可以引用上下文并使用服务定位器，例如：

```
 protected override void CacheMetadata(CodeActivityMetadata metadata)
    {
        base.CacheMetadata(metadata);
        metadata.AddDefaultExtensionProvider<INHibernateRepository<AuthorisationRequest>>(
            () => new NHibernateRepository<AuthorisationRequest>());
    } 
```

...

```
 protected override void Execute(CodeActivityContext context)
    {
        var authorisationRequestRepoistory = context.GetExtension<INHibernateRepository<AuthorisationRequest>>(); 
```

如何通过 ErsTrackingParticipant 获得正确的上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:25:08.913

从您的问题来看，我不清楚 SynchronizationContext 与空引用有什么关系。如果你能准确地追踪到什么是空的，那将会很有帮助。

SynchronizationContext.Current 属性在大多数情况下将为空。只有在托管环境中由某些东西设置时，它才会有价值。我不会设置 WorkflowApplication.Synchronization 上下文属性，除非我发现 SynchronizationContext.Current 有一个值。

我不明白您为什么要在跟踪参与者中添加“上下文”。您指的是什么“上下文”？同步上下文？代码活动上下文？

# java - System.getProperty("os.name") 在 Windows Vista 上使用 javaw.exe 时返回“Windows XP”，但 java.exe 有效

> ID：12177888
> 
> 赞同：0
> 
> 时间：2012-08-29T12:24:19.577
> 
> 标签：java, operating-system, windows-xp, windows-vista, javaw

我有以下问题：

我想通过 Windows Vista 机器获取操作系统`System.getProperty("os.name")`名称`System.getProperty("os.version")`。

我检查了 java 可执行文件的兼容模式设置。

Java 报告如下：

C:\Program Files\Java\jre6\bin\java.exe - 无兼容模式 --> Windows Vista / 6.0 (OK)
C:\Program Files\Java\jre6\bin\java.exe - 兼容模式“Windows XP " --> Windows XP / 5.1 (OK)
**C:\Program Files\Java\jre6\bin\javaw.exe - 无兼容模式 --> Windows XP / 5.1 (错误)**
C:\Program Files\Java\jre6\ bin\javaw.exe - 兼容模式 "Windows XP" --> Windows XP / 5.1 (OK)

我在 32 位 vista 上使用 java 1.6.0_34 (x86)。

有人知道这可能是什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T23:20:34.740

您很可能在兼容模式下运行 java。这可能是因为您决定手动执行此操作（例如，通过右键单击 java > 属性 > 兼容模式），或者因为 Windows 出于应用程序兼容的原因决定对 Java 撒谎。

app-compat 版本的谎言通常用于由于逻辑错误而在较新版本的 Windows 上表现不佳的程序，例如：

```
if(Windows.Version != WindowsXP)
  abort("Windows 2000 is too old!"); 
```

此逻辑在 Windows Vista 上失败，使 java 无法工作。因此，Windows 对它撒谎以使其正常工作。当它后来说“我是什么版本”作为 System.getProperty("os.name") 调用的一部分时，它因此出错了。

要解决此问题，请检查您是否安装了最新版本的 Java。

# java - 访问 hashmap 时出现 java.util.ConcurrentModificationException

> ID：12177889
> 
> 赞同：2
> 
> 时间：2012-08-29T12:24:20.887
> 
> 标签：java, exception, collections, hashmap

为什么会发生以下异常？

```
2012-08-28 11:41:59,183 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/TFO].[tfo]] (http-0.0.0.0-8080-9) Servlet.service() for servlet tfo threw exception: java.util.ConcurrentModificationException
            at java.util.HashMap$HashIterator.nextEntry(HashMap.java:793) [:1.6.0_24]
            at java.util.HashMap$EntryIterator.next(HashMap.java:834) [:1.6.0_24]
            at java.util.HashMap$EntryIterator.next(HashMap.java:832) [:1.6.0_24]
            at net.sf.json.JSONObject._fromMap(JSONObject.java:1082) [:]
            at net.sf.json.JSONObject.fromObject(JSONObject.java:173) [:]
            at net.sf.json.JSONObject._processValue(JSONObject.java:2552) [:] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T12:29:47.413

您如何尝试删除地图中的对象（键、值）？如果您使用了[for-each 构造](http://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html)并尝试将其删除，即使您的代码在单线程环境中执行，也会引发异常。

如果你像这样迭代它：

```
for(Entry<String, Object> entry : session.entrySet()) {
   if (condition) {
      // throws a ConcurrentModificationException
      session.remove(entry.getKey());
   }
} 
```

然后你应该把它改成这样：

```
Iterator<Entry<String, Object>> it = session.entrySet().iteration;
while (it.hasNext) {
   Entry<String, Object> entry = it.next(); 
   if (condition) {
      it.remove(); // avoids a ConcurrentModificationException
   }
} 
```

类似问题[Iterate through a HashMap中讨论的](https://stackoverflow.com/questions/1066589/java-iterate-through-hashmap)

# c# - 获取实体框架外键实体类型名称

> ID：12177893
> 
> 赞同：1
> 
> 时间：2012-08-29T12:24:28.420
> 
> 标签：c#, entity-framework, entity-relationship

我目前正在使用 C# 中的代码优先实体框架，并且我正在寻找一个函数来获取实体名称（不是属性名称，而是类的名称），而我只有外键。通过反射或类似的东西可能会发生这样的事情吗？

我有以下实体（简化）。

```
public class Employee
{
    public int EmployeeID { get; set; }
    public string Name { get; set; }
    public int  DepertmentID { get; set; }
    public virtual Department Department { get; set; }
}

public class Department
{
    public int DepartmentID { get; set; }
    public string Name { get; set; }
} 
```

在 OnModelCreation 中，关系是这样映射的。

```
HasRequired(t => t.Department)
    .WithRequired(t => t.Employee)
    .HasForeignKey(d => d.DepartmentID); 
```

因此，如果我有 DepartmentID，我希望将类名作为字符串。（“部门”）。

# php - PHP , Javascript 和 SQL 代码混用

> ID：12177894
> 
> 赞同：1
> 
> 时间：2012-08-29T12:24:28.250
> 
> 标签：php, javascript, sql

嗨，我有这段代码可以从数据库中提取客户名称和地址。它将每个条目的客户端名称回显到下拉列表 ( `<option value="<?php echo "$client" ?>"><?php echo "$client" ?></option>`) 中，该下拉列表在 while 循环中完成。然后我有一个 Javascript，当您在下拉列表中选择一个选项时，它会更改名为“内容”的 DIV 的内部 HTML - 这是基于从数据库中提取的内容的唯一性。- 这是我无法让它工作的地方。下面是我的代码，非常感谢任何帮助。

```
<div id="selectBox">
<div class="ui-widget">
<form>
    <label>Select a Client:</label>
    <select id="combobox" >
    <option value="">Select...</option>
    <?php

include "db_conn.php";

callDB();   

function callDB(){      
$sql = 'SELECT * FROM clientlist';
   $query = mysql_query($sql) or die(mysql_error());
   while ($row = mysql_fetch_array($query))
          {
       $ID= $row['id'];
       $client= $row["client"];
       $postal_add= $row["postal_add"];
?>

<option value="<?php echo "$client" ?>"><?php echo "$client" ?></option>
        <?php
}} ?>
    </select>
    </form>
</div>
</div>
<br>
<div id="content">

</div>
</div>
<script type="text/javascript">

// Script for changing Div
function change()
{
switch (document.getElementById("combobox").value)
{
  case "<?php echo $client ?>":
  document.getElementById("content").innerHTML = "<h2><?php echo $client ?></h2><b>Postal Address:</b> <?php echo $postal_add ?>"
  break;

}
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:28:55.467

您在单词中缺少一个分号`<?php echo "$client" ?>`。应该是`<?php echo "$client"; ?>`。编辑：这实际上是不需要的，结尾 ?> 自动关闭语句。

要添加更多内容，正如@Witty 所说，您没有将 $client 变量存储在循环之外，因此您无法访问它！改变那个！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:30:17.880

您创建了填充 div 元素的函数。但是，此时，该函数仅被定义，从未被执行。

您需要为选择框设置一个 onchange 处理程序来调用您的 javascript 函数。

此外，输出到您的 javascript 中的 php 在您的 while 循环之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:35:19.447

在执行 Javascript（客户端）时，PHP 已经完成（服务器）。您需要在 While-Loop 中从 PHP 构建 Javascript，然后在页面稍后将其发送到浏览器：

```
// in while
$javascript .= "case $client:
document.getElementById('content').innerHTML = '<h2>$client</h2>
    <b>Postal Address:</b>$postal_add'
break;"

// later in page
switch (document.getElementById("combobox").value)
{    
<?php echo $javascript; ?>
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:36:40.943

使用 ajax 在下拉列表中选择选项的基础上更新您的 div

```
 $('#dropdown').change(function() {
                    var id = $("#option").val();
                    var url = ajax action from where u will get the data for the selected option 
                    var data = {OptionID:id};
                    $.ajax({
                        type: 'POST',
                        url: url,
                        data: data,
                        success: function(data) 
                        { 
                            append the values in div here using div.innerhtml
                    });
            }); 
```

# geolocation - 如何找到单个地理点周围区域的边界经度/纬度？

> ID：12177895
> 
> 赞同：1
> 
> 时间：2012-08-29T12:24:28.947
> 
> 标签：geolocation, nosql

我想大致在半径或矩形区域（比如 5 公里）内选择地理点（经度/纬度）。

我在 Map/Reduce 中执行此操作（不是 SQL）

我发现 Map/Reduce 不喜欢减少计算字段。因此 - 我想知道我是否可以简单地选择经度和纬度范围？

例子：

目标区域在经度 4.1234 和 4.77889 之间（选择行 WHERE Long >= 4.1234 && <=4.77889） 目标区域在纬度 9.1234 和 9.77889 之间（选择行 WHERE Lat >= 9.1234 && <=9.77889）

**如何找到单个地理点周围区域的（近似）边界经度/纬度？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:28:58.130

您需要将经纬度转换为距离（米/公里），然后您可以应用查询

使用以下链接

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

[如何将纬度或经度转换为米？](https://stackoverflow.com/questions/639695/how-to-convert-latitude-or-longitude-to-meters)

# java - 如何将下一行值更新为jtable中第一行的相同值？

> ID：12177896
> 
> 赞同：1
> 
> 时间：2012-08-29T12:24:28.790
> 
> 标签：java, swing, jtable, tablemodel

在Jtable中，如果我将第一行第二列的值设置为20，那么第二行第二列的值应该会自动更新为20（相同的值）。

我在单元格编辑器中尝试过。但是如果第一行更新，我不知道如何自动更新第二行值？

你能请任何人帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:30:23.893

您也可以在`TableModel`侧面执行此操作：

*   通过使用监听器
*   或者通过一个奇怪的`setValueAt`方法实现

不要忘记从您那里触发正确的`TableModel`事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:28:30.700

侦听 JTable 组件的[行和列的更改](http://www.exampledepot.com/egs/javax.swing.table/ValueEvent.html)可以帮助您使用 TableModelListener 执行任务

# java - dalvik.system.NativeStart.main 崩溃（本机方法）

> ID：12177900
> 
> 赞同：4
> 
> 时间：2012-08-29T12:24:44.873
> 
> 标签：java, android, dalvik

刚刚在 Google Play（例如 Android Market）发布者界面收到错误报告。

这是**完整**的堆栈跟踪：

`java.lang.OutOfMemoryError: [memory exhausted] at dalvik.system.NativeStart.main(Native Method)`

而已。据我了解，它甚至没有达到我的代码就崩溃了。有什么我应该做的还是应该忽略这个错误？这怎么可能发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T12:32:06.007

忽略它，你无能为力。在某些情况下，您会得到`OutOfMemoryError`一个合理的堆栈跟踪。这些都是可操作的。你贴的不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:33:10.257

我认为这是与您的应用程序无关的错误。它与系统（电话系统）在内存方面无法处理在其上运行的进程有关。并且您的进程被选为要杀死的受害者。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-14T16:26:35.493

也许您会忘记在清单文件中添加目标活动。在清单中添加活动对我有用。

# javascript - 国际象棋风格图案

> ID：12177902
> 
> 赞同：4
> 
> 时间：2012-08-29T12:24:48.143
> 
> 标签：javascript, math, modulo

我想为`i`行和`j`列创建一个像图片中的模式：

此代码不适用于所有情况。

```
var z = 0
  for(var i = 0;i<s;i++)
    for(var j = 0;j<o;j++,z++)
      color = (z%2==1?"white":"gray"); 
```

![棋](../Images/0cdbdd0294a6c3dab1cce70733f08e19.png)

[你可以在这里玩。](http://jsbin.com/apusoc/2/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T12:27:42.477

试试这个，将 i 和 j 相加，而不是使用第三个变量：

```
for (var i = 0; i < s; i++)
  for (var j = 0; j < o; j++)
    color = ( (i + j) % 2 == 1 ? "white" : "gray" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T12:30:17.393

使用这个条件：

```
color = (i + j) % 2 == 1 ? "white" : "gray"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:51:07.317

添加`x`并`y`获得模数。

```
// ...

var table$ = $('<table>');
for(var y = 0; y < s ; y++) {
  var tr$ = $('<tr>');
  for(var x = 0; x < o; x++) {
    var td$ = $('<td>').css({
      width: p_w,
      height: p_h,
      'background-color': getColor(x, y)
    });
    tr$.append(td$);
  }
  table$.append(tr$);
}

// ...
var Color = {
  GRAY: '#aaa',
  WHITE: '#fff'
};

function getColor(x, y) {
  return (x + y) % 2 === 0 ? Color.WHITE: Color.GRAY;
} 
```

[**演示**](http://jsbin.com/apusoc/12/)

# dart - 如何在 Dart 中向 HTML 元素添加文本？

> ID：12177906
> 
> 赞同：2
> 
> 时间：2012-08-29T12:24:53.193
> 
> 标签：dart

我想向 DOM 中的元素添加一些文本。我如何在 Dart 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T12:55:39.487

您可以使用[Element.text](https://api.dartlang.org/docs/channels/stable/latest/dart_html/Element.html#text)设置元素的文本内容或使用 Element.appendText 在元素[的](https://api.dartlang.org/docs/channels/stable/latest/dart_html/Element.html#appendText)最后一个子元素之后添加文本：

```
import 'dart:html';

main() {
  var elem = new DivElement();
  // replace content with the text
  elem.text = "the text";
  // add a text after the last child of this element
  elem.appendText("the text");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T12:41:25.453

先前答案的新语法：

```
import 'dart:html';
main() {
  var elem = new DivElement();
  elem.appendText("the text");
} 
```

在最后一个子项之后添加指定文本的新导入样式和方法`appendText(String text)`。

# ruby-on-rails-3 - 如何连接三个表以检索rails中的记录

> ID：12177921
> 
> 赞同：1
> 
> 时间：2012-08-29T12:25:28.740
> 
> 标签：ruby-on-rails-3, activerecord, join

在轨道项目中

我有**桌子**

```
 device(device_id ,name , srn)

   start(start_id, device_id,starttime)

   stop(stop_id ,device_id,stoptime) 
```

我想从上面的表格中显示： **device_id、name、srn、starttime、stoptime**

**当一个设备多次启动和停止时，数据将存储在具有该 device_id 的表中。**

我在用

```
@data=Device.select('device_id,srn,name,starttime,stoptime').joins(:start, :stop) 
```

但是**我的问题**是

*   它生成**重复的行**，因为只有 device_id 通过查询进行比较

*   如果对于 device_id=1，我在开始表中有两个开始 **，****在停止表中有两个停止，** 它会在结果中显示四行。

**我只想要两个。** 消除重复..

请帮助我。

# java - 超类有dao调用时的java继承行为？

> ID：12177923
> 
> 赞同：0
> 
> 时间：2012-08-29T12:25:32.460
> 
> 标签：java, inheritance

我有如下代码：

```
Class A{

protected void method1(){

//i have  logic which will fetch the results from the database
}

} 
```

我还有一个扩展类 A 的类：

```
Class B extends A{

    //some logic

    } 
```

现在执行了多少数据库调用？一个或两个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T12:26:59.510

如果你这样做：

```
new B().method1() 
```

`method1()`代表`B`对象只调用一次。JVM 正在做的是它首先尝试找到`B.method1()`。如果它在 中被*覆盖*，`B`它将调用它（并完全跳过`A.method1()`）。但是由于`B`没有覆盖它，`A.method1()`因此透明地调用了 original 。

如果`B`会覆盖`method1()`调用 original 的唯一方法`A.method1()`是调用`super.method1()`inside `B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:31:35.650

如果您已经在重写方法中编写了逻辑，那么`B`在任何情况下，当您的调用`methodm1`不考虑类时，仅`one`调用都会转到数据库，直到您调用方法两次为止。

# javascript - JavaScript 无法通过 SharedWorker() 构造函数

> ID：12177924
> 
> 赞同：1
> 
> 时间：2012-08-29T12:25:39.223
> 
> 标签：javascript, html, worker

我正在做一些关于 HTML5 Web Worker 的研究。我让“正常”工作人员运行良好，但我似乎无法初始化 SharedWorker。我已经尝试过最新版本的 Chrome 和 Firefox，但没有任何成功......即使我运行在线演示，我也没有得到任何输出。

例如，当我打开以下文档时：

索引.html：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Web workers</title>
    </head>
    <body>
        <p id="log">Log:</p>
        <script>
          alert("alert 1");
          var worker = new SharedWorker("task.js");
          alert("alert 2");
          var log = document.getElementById("log");
          worker.port.addEventListener("message", function(e){
              log.textContent += "\n" + e.data;
          }, false);
          worker.port.start();
          worker.port.postMessage("ping");
        </script>
    </body>
</html> 
```

任务.js：

```
onconnect = function(e) {
    var port = e.ports[0];
    port.postMessage("Hello World");
    port.onmessage = function(e) {
        port.postMessage("pong");
    }
} 
```

我添加了两个警报功能用于调试目的。总是显示“alert 1”，从不显示“alert 2”，所以我认为崩溃发生在 SharedWorker 构造函数中（不，这不是因为我的浏览器弹出设置）。非常欢迎任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:02:42.260

感谢 robertc 关于检查控制台的提示，我收到以下错误：

```
Uncaught Error: SECURITY_ERR: DOM Exception 18 
```

谷歌引导我进入[这个主题](https://stackoverflow.com/questions/2704929/uncaught-error-security-err-dom-exception-18)，它基本上告诉你在网络服务器上运行它（我使用 wampserver），这对我来说很有帮助。谢谢！

# android - 即使代理服务器未运行，WebView 也会打开 URL

> ID：12177929
> 
> 赞同：2
> 
> 时间：2012-08-29T12:25:51.297
> 
> 标签：android, proxy, android-webview, proxy-server

[如此链接](https://stackoverflow.com/questions/4488338/webview-android-proxy)中所述，我确实为我的应用程序设置了**代理。****`WebView`**

但是，如果我关闭代理服务器，那么它不会显示错误页面，而是连接到该页面并打开该页面。

在设置/使用代理时，我需要指定什么**额外****`WebView`**的。

提前致谢 ：）

# eclipse - 使用 Web 工具项目的 Eclipse 控制台堆栈跟踪搜索非常慢

> ID：12177931
> 
> 赞同：1
> 
> 时间：2012-08-29T12:25:55.737
> 
> 标签：eclipse, tomcat, console, trace, eclipse-wtp

每当发生异常时，我尝试通过单击标准控制台中的链接来跳转到相应的类，这需要很长时间，并且 Eclipse 会在右下角“搜索...”中显示。如果我将堆栈跟踪复制到堆栈跟踪控制台，则会立即显示相应的类。控制台输出由 apache tomcat 使用 web 工具项目生成。

是否有可能告诉 eclipse 它应该首先搜索我的本地课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:39:22.170

我注意到控制台堆栈跟踪也很慢。我经常只是不使用它。相反，我只是复制类的名称并在其上调用 open 类型。

为不回答道歉，但这是我能找到的唯一解决方法。

# javascript - Cufon 脚本在 IE9 下不起作用

> ID：12177932
> 
> 赞同：0
> 
> 时间：2012-08-29T12:26:01.540
> 
> 标签：javascript, internet-explorer, internet-explorer-9, cufon

**Cufon 在 IE9 下无法正常工作，但只能在兼容模式下正常工作。**

任何线索如何解决？

谢谢！

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>@ViewBag.Title - Home</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />

    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    @Styles.Render("~/Content/Site.css")    
    @Scripts.Render("Scripts/jquery-1.6.2.min.js")

    @Scripts.Render("Scripts/cufon-s.js")
    @Scripts.Render("Scripts/Constantia_400-Constantia_700-Constantia_italic_400-Constantia_italic_700.font.js")
    @Scripts.Render("Scripts/Pristina_400.font.js")
    @Scripts.Render("Scripts/Trajan_Pro_400-Trajan_Pro_700.font.js")

    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {
            Cufon.replace('div.header-sub div.goright ul li, div#menu ul li a', 
            { fontFamily: 'Pristina', hover: true, textShadow: '2px 2px black' })
            ('div#header div.action a', { fontFamily: 'Constantia', hover: true })
            ('ul#sidebar-menu div.action a, h2, h1', { fontFamily: 'Trajan Pro', hover: true });

        });
    </script>
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:31:36.880

使固定：

```
<!--[if gte IE 9]> <script type="text/javascript"> Cufon.set('engine', 'canvas');   </script> <![endif]--> 
```

或添加

```
<meta content="IE=8" http-equiv="X-UA-Compatible" /> 
```

看这里[链接](http://themeforest.net/forums/thread/fix-for-cufon-not-working-in-ie9beta/31932)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:36:15.823

最新版本的 cufon 脚本适用于 IE9。确保您已安装 v1.09i 或更高版本。

下载自：[cufon字体](http://cufon.shoqolate.com/generate/)

# java - Java：将部分文件映射到内存

> ID：12177934
> 
> 赞同：4
> 
> 时间：2012-08-29T12:26:08.297
> 
> 标签：java, memory-mapped-files

我正在编写一个处理多个文件的程序，每个文件大小约为 6 GB（来自服务器的大日志文件）。但是我只使用了 25% 的 CPU（4 个可用的 CPU 线程中有 1 个），因为我无法将程序拆分为不同的线程，工作必须按顺序完成。

因此，我正在考虑同时处理多达 4 个文件，因为我有一个四核 CPU，但我受到 HDD 随机磁盘访问性能的限制。

但几天后，我将使用带 SSD 和 8 GB 内存的笔记本电脑。是否可以将每个文件的前 1 GB 映射到内存中并在 4 个不同的线程中处理它们？当我到达映射文件的末尾时，我应该能够在内存中映射下一个 1 GB 的文件以继续。我想对于 SSD 来说，将 1 GB 映射到内存应该不是问题，因为它的读取速度约为 400 MB/s。

我知道这可以使用 FileChannel 来完成，但我不确定是否只映射文件的一部分。

谢谢，西贝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:09:20.350

当您对文件进行内存映射时，这些文件实际上并未传输到内存（这与内存映射相反）。

相反，您会得到一个内核特别对待的内存地址；当您访问它时，内核会加载一个包含文件内容的内存页面。当操作系统决定回收一些内存时，这些页面就会被卸载；您可以将映射文件视为扩展的交换空间。

综上所述，只要你有足够的内存地址（也就是说，你有一个 64 位的操作系统和 JVM），你就可以映射一个比系统内存更大的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:33:14.547

您可以使用 FileChannel 一次将整个文件映射到内存中。但是，如果您是按顺序读取数据并且您的处理并不简单，那么在每个线程中使用普通的 FileInputStream 可能会更易于使用并为您提供大致相同的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:39:30.263

您想使用可以从 FileChannel 检索的 MemoryMappedByteBuffer。另请参阅：[Java 中的内存映射文件](https://stackoverflow.com/questions/1023200/memory-mapped-files-in-java)和此：[http ://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html](http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html)

同样正如彼得指出的那样，如果您的处理不是 CPU 密集型的，那么在首先处理之前将文件移动到内存中可能不会获得太多收益。一口气做完可能会更好。如您所知，复制到内存不是免费的。

# servlets - 在 Servlet 中打开子 TCP/IP 连接

> ID：12177939
> 
> 赞同：0
> 
> 时间：2012-08-29T12:26:19.867
> 
> 标签：servlets, tcp, tomcat6, jdeveloper

我正在使用 java Servlet 技术开发一个 webApp，我必须打开一个 TCP/IP 连接与另一个侦听静态 IP 的程序。一切都在我的本地主机上运行良好（使用 Jdeveloper 11g 及其嵌入式 weblogic 应用程序服务器进行开发），但是当我在 tomcat6 服务器（免费云）上部署应用程序时，连接已打开但它不写入或从远程 TCP/IP 服务器软件读取。

你能帮帮我吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:54:37.397

在您的情况下，您的应用程序中可能有很多事情不正常。例如，它们之间的服务器可能无法访问。您是否尝试过从部署 Web 应用程序的服务器 ping 您尝试连接的服务器？

但是除非 pou 提供有关它的更多信息，否则我们无法真正确定问题是什么

# android - 禁用横向全屏

> ID：12177944
> 
> 赞同：3
> 
> 时间：2012-08-29T12:26:46.603
> 
> 标签：android, landscape, landscape-portrait

是否可以在 Landscape 中禁用全屏模式？

如果没有，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:31:36.160

将此代码放在 onCreate() 方法中。

```
 if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)                 
 {
       //To re-enable full screen:

       getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
       getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);       
}
else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) 
{
       //To disable full screen:

       getWindow().addFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
       getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
} 
```

# iso-8859-1 - 不可能：org.apache.commons.io.IOUtils 中的错误？

> ID：12177946
> 
> 赞同：2
> 
> 时间：2012-08-29T12:26:53.903
> 
> 标签：iso-8859-1, apache-commons-io

为什么这两个代码块会产生不同的字节数组？

Apache Commons IO 2.4：

```
Charset iso_8859_1 = Charset.availableCharsets().get("ISO-8859-1");
return IOUtils.toByteArray(new FileReader(getResourceFile(filename)), iso_8859_1); 
```

JDK：

```
Charset iso_8859_1 = Charset.availableCharsets().get("ISO-8859-1");
ByteArrayOutputStream baos = new ByteArrayOutputStream();
BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(baos, iso_8859_1));
BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(getResourceFile(filename)), iso_8859_1));
String line;
while ((line = reader.readLine()) != null)
    writer.write(line);

writer.flush();
return baos.toByteArray(); 
```

告诉我我在看鬼...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:41:22.910

尝试使用 FileInputStream，因为无法使用 FileReader 指定字符集。

```
IOUtils.toByteArray(new InputStreamReader(new FileInputStream(getResourceFile(filename)), "ISO-8859-1"), "ISO-8859-1") 
```

# macos - 如何检测我的应用是否被沙盒化？

> ID：12177948
> 
> 赞同：19
> 
> 时间：2012-08-29T12:26:56.190
> 
> 标签：macos, cocoa, sandbox

我有一个旨在在沙盒和非沙盒 MacOS 中运行的应用程序。如果用户从 MacOS 10.6 升级到更高版本的操作系统，我需要用户重新选择文件夹，以便我可以使用安全书签为它们添加书签。

如何检测我的应用程序在支持沙盒的操作系统上？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-29T13:02:20.203

我知道的唯一方法是寻找`APP_SANDBOX_CONTAINER_ID`环境变量。当应用程序在沙盒容器中运行时，它就会出现。

```
NSDictionary* environ = [[NSProcessInfo processInfo] environment];
BOOL inSandbox = (nil != [environ objectForKey:@"APP_SANDBOX_CONTAINER_ID"]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-15T08:45:34.000

```
BOOL isSandboxed = NO;

SecStaticCodeRef staticCode = NULL;
NSURL *bundleURL = [[NSBundle mainBundle] bundleURL];

if (SecStaticCodeCreateWithPath((__bridge CFURLRef)bundleURL, kSecCSDefaultFlags, &staticCode) == errSecSuccess) {
    if (SecStaticCodeCheckValidityWithErrors(staticCode, kSecCSBasicValidateOnly, NULL, NULL) == errSecSuccess) {
        SecRequirementRef sandboxRequirement;
        if (SecRequirementCreateWithString(CFSTR("entitlement[\"com.apple.security.app-sandbox\"] exists"), kSecCSDefaultFlags,
                                       &sandboxRequirement) == errSecSuccess)
        {
            OSStatus codeCheckResult = SecStaticCodeCheckValidityWithErrors(staticCode, kSecCSBasicValidateOnly, sandboxRequirement, NULL);
            if (codeCheckResult == errSecSuccess) {
                isSandboxed = YES;
            }
        }
    }
    CFRelease(staticCode);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-03T22:21:08.863

为 Swift3 测试这个

```
func isSandboxed() -> Bool {
    let bundleURL = Bundle.main.bundleURL
    var staticCode:SecStaticCode?
    var isSandboxed:Bool = false
    let kSecCSDefaultFlags:SecCSFlags = SecCSFlags(rawValue: SecCSFlags.RawValue(0))

    if SecStaticCodeCreateWithPath(bundleURL as CFURL, kSecCSDefaultFlags, &staticCode) == errSecSuccess {
        if SecStaticCodeCheckValidityWithErrors(staticCode!, SecCSFlags(rawValue: kSecCSBasicValidateOnly), nil, nil) == errSecSuccess {
            let appSandbox = "entitlement[\"com.apple.security.app-sandbox\"] exists"
            var sandboxRequirement:SecRequirement?

            if SecRequirementCreateWithString(appSandbox as CFString, kSecCSDefaultFlags, &sandboxRequirement) == errSecSuccess {
                let codeCheckResult:OSStatus  = SecStaticCodeCheckValidityWithErrors(staticCode!, SecCSFlags(rawValue: kSecCSBasicValidateOnly), sandboxRequirement, nil)
                if (codeCheckResult == errSecSuccess) {
                    isSandboxed = true
                }
            }
        }
    }
    return isSandboxed
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-13T11:47:01.170

这里是 Swift 4.2 中@hamstergene 的答案：

```
func isSandboxEnvironment() -> Bool {
    let environ = ProcessInfo.processInfo.environment
    return (nil != environ["APP_SANDBOX_CONTAINER_ID"])
} 
```

# sql-server-2008 - 如何识别 T-SQL 中每个不同成员的多个开始和结束日期范围中的第一个间隙

> ID：12177951
> 
> 赞同：6
> 
> 时间：2012-08-29T12:27:01.413
> 
> 标签：sql-server-2008, tsql, gaps-and-islands

我一直在做以下工作，但没有得到任何结果，而且截止日期很快就要到了。此外，还有超过一百万行，如下所示。感谢您对以下内容的帮助。

目标：按成员对结果进行分组，并通过组合各个日期范围来为每个成员构建连续覆盖范围，这些日期范围可以重叠或彼此连续运行，在范围的开始和结束日期之间没有中断。

我有以下格式的数据：

```
MemberCode  -----   ClaimID   -----       StartDate   -----       EndDate
00001   -----       012345   -----       2010-01-15   -----       2010-01-20
00001   -----       012350   -----       2010-01-19   -----       2010-01-22
00001   -----       012352   -----       2010-01-20   -----       2010-01-25
00001   -----       012355   -----       2010-01-26   -----       2010-01-30
00002   -----       012357   -----       2010-01-20   -----       2010-01-25
00002   -----       012359   -----       2010-01-30   -----       2010-02-05
00002   -----       012360   -----       2010-02-04   -----       2010-02-15
00003   -----       012365   -----       2010-02-15   -----       2010-02-30 
```

...

在上面的成员（**00001**）是一个有效的成员，因为有一个从**2010-01-15**到**2010-01-30的****连续日期范围**（没有间隙）。请注意，该成员的索赔 ID **012355紧邻索赔 ID** **012352**的结束日期开始。这仍然有效，因为它形成了一个连续的范围。

 ******但是，成员 ( **00002** ) 应该是无效成员，因为在声明 ID 012357 的结束日期和声明 ID **012359**的开始日期之间有 5 天的**间隔**

我想要做的是只列出那些在连续日期范围（每个成员）的每一天都有声明的成员的列表，每个成员的 MIN（开始日期）和 Max（结束日期）之间没有间隙与众不同的成员。有差距的成员被丢弃。

提前致谢。

**更新：**

我已经到了这里。笔记：`FILLED_DT = Start Date & PresCoverEndDT = End Date`

```
SELECT PresCoverEndDT, FILLED_DT 

FROM 

(

    SELECT DISTINCT FILLED_DT, ROW_NUMBER() OVER (ORDER BY FILLED_DT) RN

    FROM Temp_Claims_PRIOR_STEP_5 T1

    WHERE NOT EXISTS 

            (SELECT * FROM Temp_Claims_PRIOR_STEP_5 T2

            WHERE T1.FILLED_DT > T2.FILLED_DT AND T1.FILLED_DT< T2.PresCoverEndDT 

            AND T1.MBR_KEY = T2.MBR_KEY )

) T1

    JOIN (SELECT DISTINCT PresCoverEndDT, ROW_NUMBER() OVER (ORDER BY PresCoverEndDT) RN

        FROM Temp_Claims_PRIOR_STEP_5 T1

        WHERE NOT EXISTS 

            (SELECT * FROM Temp_Claims_PRIOR_STEP_5 T2

             WHERE T1.PresCoverEndDT > T2.FILLED_DT AND T1.PresCoverEndDT < T2.PresCoverEndDT AND T1.MBR_KEY = T2.MBR_KEY )
) T2

     ON T1.RN - 1 = T2.RN

WHERE   PresCoverEndDT < FILLED_DT 
```

上面的代码似乎有错误，因为我只得到一行，而且它也不正确。我想要的输出只有 1 列，如下所示：

**Valid_Member_Code**

00001

00007

00009

... ETC。，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T13:19:55.157

试试这个：[http ://www.sqlfiddle.com/#!3/c3365/20](http://www.sqlfiddle.com/#!3/c3365/20)

```
with s as
(
  select *, row_number() over(partition by membercode order by startdate) rn
  from tbl
)
,gaps as
(
select a.membercode, a.startdate, a.enddate, b.startdate as nextstartdate
  ,datediff(d, a.enddate, b.startdate) as gap
from s a
join s b on b.membercode = a.membercode and b.rn = a.rn + 1
)
select membercode 
from gaps
group by membercode
having sum(case when gap <= 1 then 1 end) = count(*); 
```

在此处查看查询进度：[http ://www.sqlfiddle.com/#!3/c3365/20](http://www.sqlfiddle.com/#!3/c3365/20)

* * *

它是如何工作的，将当前结束日期与其下一个开始日期进行比较并检查日期间隔：

```
with s as
(
  select *, row_number() over(partition by membercode order by startdate) rn
  from tbl
)
select a.membercode, a.startdate, a.enddate, b.startdate as nextstartdate
  ,datediff(d, a.enddate, b.startdate) as gap
from s a
join s b on b.membercode = a.membercode and b.rn = a.rn + 1; 
```

输出：

```
| MEMBERCODE |  STARTDATE |    ENDDATE | NEXTSTARTDATE | GAP |
--------------------------------------------------------------
|          1 | 2010-01-15 | 2010-01-20 |    2010-01-19 |  -1 |
|          1 | 2010-01-19 | 2010-01-22 |    2010-01-20 |  -2 |
|          1 | 2010-01-20 | 2010-01-25 |    2010-01-26 |   1 |
|          2 | 2010-01-20 | 2010-01-25 |    2010-01-30 |   5 |
|          2 | 2010-01-30 | 2010-02-05 |    2010-02-04 |  -1 | 
```

然后检查成员是否具有相同的索赔计数，并且其总索赔没有差距：

```
with s as
(
  select *, row_number() over(partition by membercode order by startdate) rn
  from tbl
)
,gaps as
(
select a.membercode, a.startdate, a.enddate, b.startdate as nextstartdate
  ,datediff(d, a.enddate, b.startdate) as gap
from s a
join s b on b.membercode = a.membercode and b.rn = a.rn + 1
)
select membercode, count(*) as count, sum(case when gap <= 1 then 1 end) as gapless_count
from gaps
group by membercode; 
```

输出：

```
| MEMBERCODE | COUNT | GAPLESS_COUNT |
--------------------------------------
|          1 |     3 |             3 |
|          2 |     2 |             1 | 
```

最后，过滤他们，在他们的声明中没有空白的成员：

```
with s as
(
  select *, row_number() over(partition by membercode order by startdate) rn
  from tbl
)
,gaps as
(
select a.membercode, a.startdate, a.enddate, b.startdate as nextstartdate
  ,datediff(d, a.enddate, b.startdate) as gap
from s a
join s b on b.membercode = a.membercode and b.rn = a.rn + 1
)
select membercode 
from gaps
group by membercode
having sum(case when gap <= 1 then 1 end) = count(*); 
```

输出：

```
| MEMBERCODE |
--------------
|          1 | 
```

请注意，您无需`COUNT(*) > 1`检测具有 2 个或更多声明的成员。我们不使用`LEFT JOIN`，而是使用`JOIN`，这将自动丢弃尚未获得第二次声明的成员。如果您选择使用，这是版本（更长）`LEFT JOIN`（与上面相同的输出）：

```
with s as
(
select *, row_number() over(partition by membercode order by startdate) rn
from tbl
)
,gaps as
(
select a.membercode, a.startdate, a.enddate, b.startdate as nextstartdate
,datediff(d, a.enddate, b.startdate) as gap
from s a
left join s b on b.membercode = a.membercode and b.rn = a.rn + 1
)
select membercode 
from gaps
group by membercode
having sum(case when gap <= 1 then 1 end) = count(gap)
and count(*) > 1; -- members who have two ore more claims only 
```

以下是在过滤之前如何查看上述查询的数据：

```
with s as
(
  select *, row_number() over(partition by membercode order by startdate) rn
  from tbl
)
,gaps as
(
select a.membercode, a.startdate, a.enddate, b.startdate as nextstartdate
  ,datediff(d, a.enddate, b.startdate) as gap
from s a
left join s b on b.membercode = a.membercode and b.rn = a.rn + 1
)
select * from gaps; 
```

输出：

```
| MEMBERCODE |  STARTDATE |    ENDDATE | NEXTSTARTDATE |    GAP |
-----------------------------------------------------------------
|          1 | 2010-01-15 | 2010-01-20 |    2010-01-19 |     -1 |
|          1 | 2010-01-19 | 2010-01-22 |    2010-01-20 |     -2 |
|          1 | 2010-01-20 | 2010-01-25 |    2010-01-26 |      1 |
|          1 | 2010-01-26 | 2010-01-30 |        (null) | (null) |
|          2 | 2010-01-20 | 2010-01-25 |    2010-01-30 |      5 |
|          2 | 2010-01-30 | 2010-02-05 |    2010-02-04 |     -1 |
|          2 | 2010-02-04 | 2010-02-15 |        (null) | (null) |
|          3 | 2010-02-15 | 2010-03-02 |        (null) | (null) | 
```

* * *

**编辑**要求澄清：

在您的澄清中，您还想包括尚未获得第二次索赔的成员，请改为：[http ://sqlfiddle.com/#!3/c3365/22](http://sqlfiddle.com/#!3/c3365/22)

```
with s as
(
select *, row_number() over(partition by membercode order by startdate) rn
from tbl
)
,gaps as
(
select a.membercode, a.startdate, a.enddate, b.startdate as nextstartdate
,datediff(d, a.enddate, b.startdate) as gap
from s a
left join s b on b.membercode = a.membercode and b.rn = a.rn + 1
)
select membercode 
from gaps
group by membercode
having sum(case when gap <= 1 then 1 end) = count(gap)
-- members who have yet to have a second claim are valid too
or count(nextstartdate) = 0; 
```

输出：

```
| MEMBERCODE |
--------------
|          1 |
|          3 | 
```

该技术是计算成员的`nextstartdate`，如果他们没有下一个开始日期日期（即`count(nextstartdate) = 0`），那么他们只是单一的声明并且也有效，那么只需附加这个`OR`条件：

```
or count(nextstartdate) = 0; 
```

实际上，下面的条件也足够了，不过我想让查询更加自我记录，因此我建议依靠成员的 nextstartdate。这是计算尚未获得第二次索赔的成员的另一种条件：

```
or count(*) = 1; 
```

顺便说一句，我们还必须改变比较：

```
sum(case when gap <= 1 then 1 end) = count(*) 
```

对此（正如我们现在使用的那样`LEFT JOIN`）：

```
sum(case when gap <= 1 then 1 end) = count(gap) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:26:25.627

试试这个，它对行进行分区`MemberCode`并给它们序号。然后将行与后续`num`值进行比较，如果一行的结束日期和下一行的开始日期之间的差异大于一天，则它是无效成员：

```
DECLARE @t TABLE (MemberCode  VARCHAR(100), ClaimID   
    INT,StartDate   DATETIME,EndDate DATETIME)
INSERT @t
VALUES
('00001'   ,       012345   ,        '2010-01-15'   ,       '2010-01-20')
,('00001'   ,       012350   ,       '2010-01-19'   ,       '2010-01-22')
,('00001'   ,       012352   ,       '2010-01-20'   ,       '2010-01-25')
,('00001'   ,       012355   ,       '2010-01-26'   ,       '2010-01-30')
,('00002'   ,       012357   ,       '2010-01-20'   ,       '2010-01-25')
,('00002'   ,       012359   ,       '2010-01-30'   ,       '2010-02-05')
,('00002'   ,       012360   ,       '2010-02-04'   ,       '2010-02-15')
,('00003'   ,       012365   ,       '2010-02-15'   ,       '2010-02-28')
,('00004'   ,       012366   ,       '2010-03-18'   ,       '2010-03-23')
,('00005'   ,       012367   ,       '2010-03-19'   ,       '2010-03-25')
,('00006'   ,       012368   ,       '2010-03-20'   ,       '2010-03-21')

;WITH tbl AS (

    SELECT  *,
            ROW_NUMBER() OVER (PARTITION BY MemberCode ORDER BY StartDate) 
                AS num
    FROM    @t
), invalid AS (

    SELECT  tbl.MemberCode
    FROM    tbl
    JOIN    tbl _tbl ON 
            tbl.num = _tbl.num - 1
    AND     tbl.MemberCode = _tbl.MemberCode
    WHERE   DATEDIFF(DAY, tbl.EndDate, _tbl.StartDate) > 1  
)

SELECT  MemberCode
FROM    tbl
EXCEPT
SELECT  MemberCode
FROM    invalid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T15:02:55.323

我认为您的查询会返回误报，因为它只检查连续行之间的时间间隔。在我看来，差距有可能被前面的一条线所补偿。让我举个例子吧：

第 l 行：2010-01-01 | 2010-01-31
第 2 行：2010-01-10 | 2010-01-15
第 3 行：2010-01-20 | 2010-01-25

您的代码将报告第 2 行和第 3 行之间的间隙，而它正在由第 1 行填充。您的代码不会检测到这一点。您应该在 DATEDIFF 函数中使用所有**先前**行的**MAX(EndDate) 。**

 **```
DECLARE @t TABLE (PersonID  VARCHAR(100), StartDate DATETIME, EndDate DATETIME)
INSERT @t VALUES('00001'   ,       '2010-01-01'   ,       '2010-01-17')
INSERT @t VALUES('00001'   ,       '2010-01-19'   ,       '2010-01-22')
INSERT @t VALUES('00001'   ,       '2010-01-20'   ,       '2010-01-25')
INSERT @t VALUES('00001'   ,       '2010-01-26'   ,       '2010-01-31')
INSERT @t VALUES('00002'   ,       '2010-01-20'   ,       '2010-01-25')
INSERT @t VALUES('00002'   ,       '2010-02-04'   ,       '2010-02-05')
INSERT @t VALUES('00002'   ,       '2010-02-04'   ,       '2010-02-15')
INSERT @t VALUES('00003'   ,       '2010-02-15'   ,       '2010-02-28')
INSERT @t VALUES('00004'   ,       '2010-03-18'   ,       '2010-03-23')
INSERT @t VALUES('00005'   ,       '2010-03-19'   ,       '2010-03-25')
INSERT @t VALUES('00006'   ,       '2010-01-01'   ,       '2010-04-20')
INSERT @t VALUES('00006'   ,       '2010-01-20'   ,       '2010-01-21')
INSERT @t VALUES('00006'   ,       '2010-01-25'   ,       '2010-01-26')

;WITH tbl AS (
    SELECT  
        *, ROW_NUMBER() OVER (PARTITION BY PersonID ORDER BY StartDate) AS num
    FROM    @t
), invalid AS (
    SELECT  tbl.PersonID 
    FROM    tbl
    JOIN    tbl _tbl ON 
            tbl.num = _tbl.num - 1 AND tbl.PersonID = _tbl.PersonID
    WHERE DATEDIFF(DAY, (SELECT MAX(tbl3.EndDate) FROM tbl tbl3 WHERE tbl3.num <= tbl.num AND tbl3.PersonID = tbl.PersonID), _tbl.StartDate) > 1  
)

SELECT  PersonID
FROM    tbl
EXCEPT
SELECT  PersonID
FROM    invalid 
```********

# noweb - NOWEB 文档中未定义的控制序列 (\nwstartdeflinemarkup)

> ID：12177954
> 
> 赞同：2
> 
> 时间：2012-08-29T12:27:13.530
> 
> 标签：noweb

在使用以下命令编译的文件 NOWEB

```
noweave -tex -filter "elide comment:*" adocument.nw > documentation.tex 
```

并尝试使用命令编译生成的文件

```
xetex -halt-on-error documentation.tex 
```

我收到以下错误消息

```
! Undefined control sequence.
<argument> ...on}\endmoddef \nwstartdeflinemarkup 
                                              \nwenddeflinemarkup 
```

似乎 \nwstartdeflinemarkup 无法识别。

如果我从文档中删除所有序列

```
\nwstartdeflinemarkup\nwenddeflinemarkup 
```

文件编译正常。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T10:46:00.040

我认为问题在于 noweb 的分发中的一个错误，我认为在对 TeX 和 LaTeX 的支持中应该存在的一些命令实际上仅适用于 LaTeX。

一个简单的解决方法是将两行添加到源文件的开头：

```
\let\nwstartdeflinemarkup\relax
\let\nwenddeflinemarkup\relax 
```

这方面的一些背景信息。鉴于此源文件：

```
One line of documentation.  
<<SomeChunkname>>=  
// No real code  
@ %  
Second and last line of documentation. 
```

并运行`noweave`然后`xelatex`：

```
noweave -tex adocument.nw > documentation.tex
xetex -halt-on-error documentation.tex 
```

复制错误，这不足为奇，`\nwstartdeflinemarkup`因为`nwmac.tex`. 现在，浏览源文件`nwmac.tex`，即`support.nw`在[ctan 镜像站点](http://www.ctan.org/tex-archive/web/noweb/src/tex)中，会发现它`\nwstartdeflinemarkup`是为 LaTeX 定义的，但不是为 TeX 定义的。

# c++ - 多态性和类型转换

> ID：12177955
> 
> 赞同：2
> 
> 时间：2012-08-29T12:27:24.140
> 
> 标签：c++, polymorphism

我对多态性的一个方面感到困惑。请考虑以下代码：

```
#include <iostream>

class CBase {
    virtual void dummy() {}
};
class CDerived: public CBase {
    public:
    int a,b,c,d;
    CDerived (): a(1),b(2),c(3),d(4) { }
};
int main () {

    CBase* pba = new CDerived;

    std::cout << "sizeof(CBase) = " << sizeof(CBase) << std::endl; // prints 8
    std::cout << "sizeof(CDerived) = " << sizeof(CDerived) << std::endl; // prints 24

    std::cout << "sizeof(*pba) = " << sizeof(*pba) << std::endl; // prints 8 (?)

    return 0;
} 
```

我的问题如下：在行上分配了一个类型（24 字节）`CBase* pba = new CDerived;`的对象`CDerived`，但正如您所看到的，`sizeof(*pba) = 8`字节。`CDerived`指向的对象的其他 16 个字节发生了`pba`什么？我也试过这个：

```
std::cout << "pba->a = " << pba->a << std::endl; 
```

但随后出现编译错误，这意味着`pba`实际上并不指向 type 的对象`CDerived`。那么这里发生了什么？内存泄漏？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T12:28:55.527

`sizeof`是一个编译时构造。它无法知道运行时类型，所以它只考虑编译时类型，即`CBase&`.

`pba->a`由于类似的原因不能编译：编译时类型`pba`is `CBase*`，并且`CBase`没有`a`成员。这就是静态类型语言的工作方式。如果要使用`CDerived`成员，则需要具有类型的变量`CDerived`（或指向它的引用或指针）。

但是，*对象`CDerived`仍然存在*。您可以看到，如果将指针转换为指向 的指针`CDerived`，例如`dynamic_cast<CDerived*>(pba)->a`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:28:54.547

`sizeof`返回对象的静态类型的大小，因为`pba`是 a ，所以是`CBase*`的静态类型，其大小是（无数据成员和 a ）。\`*pba``CBase``8``vfptr`

> [...] 意思是 pba 实际上并不指向 CDerived 类型的对象

确实如此，但您不能通过`CDerived`指向`CBase`.

假设我将 a 交给您`CBase*`并告诉您访问该成员`a`。你不能。您不能确定它是指向 a`CDerived`并且具有该成员或指向其他派生类的指针（除非您使用 RTTI）。通过基类指针访问派生类成员在**逻辑上没有意义。**

# javascript - 是否有用于加载外部脚本的 JavaScript 库？

> ID：12177957
> 
> 赞同：1
> 
> 时间：2012-08-29T12:27:27.250
> 
> 标签：javascript

我知道异步加载外部脚本和在脚本加载时提供回调功能涉及到很多跨浏览器的困难。经过大量研究后，我发现了几个包含此功能的相当大的 JavaScript 库。

但是我正在寻找的是一个专门为此任务设计的*小型库，我可以将其嵌入到我的应用程序中。*到目前为止我看到的最接近的是[Bezen 的 load script loading module](http://bezen.org/javascript/src/bezen.load.js)，但我不知道它有多可靠。我的应用程序必须支持所有具有任何市场份额的浏览器，不幸的是包括 IE6。

我在想那里可能有一个每个人都在使用但我找不到的时尚且经过验证的真正 JavaScript 库。感谢所有建议，最好的将被标记为已接受的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:31:57.593

也许[http://requirejs.org/](http://requirejs.org/)？

**编辑**：根据你的问题评论，你需要这个：

[http://www.yterium.net/jQl-an-asynchronous-jQuery-Loader（700bytes](http://www.yterium.net/jQl-an-asynchronous-jQuery-Loader)压缩和压缩）

> jQuery 将在不阻塞浏览器渲染的情况下加载，并且在此期间所有内联调用`$(document).ready()` 都将排队。
> 一旦 jQuery 准备就绪，所有排队的内联调用都将按照它们的初始顺序运行

也许是因为您可以通过简单的谷歌搜索找到问题的答案：[https ://www.google.com/search?q=async+jquery+load](https://www.google.com/search?q=async+jquery+load)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:02:10.440

我最终使用了[SidJS](http://www.diveintojavascript.com/projects/sidjs-load-javascript-and-stylesheets-on-demand)。它所做的只是直接通过 URL 加载 JS 或 CSS 文件，并在文件加载和准备就绪时提供回调功能。

# javascript - 在javascript中搜索字符串

> ID：12177958
> 
> 赞同：-2
> 
> 时间：2012-08-29T12:27:27.750
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：字符串包含](https://stackoverflow.com/questions/1789945/javascript-string-contains)

我想在 javascript 中搜索一个字符串，看看它是否包含一些字符

```
<script type="text/javascript">
var s="hello world";
if(s.contains("hello")) alert("contains");
</script> 
```

我可能期待一个像**string.contains()**这样的函数。它们是 javascript 中的 string.contains 还是我应该使用 indexOf 代替

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:30:40.580

如果你真的想要一个包含：

```
String.prototype.contains = function (searchTerm) {
    return this.toString().indexOf(searchTerm) !== -1;
}; 
```

如果你觉得花哨：

```
String.prototype.contains = function (searchTerm) {
    return ~this.toString().indexOf(searchTerm);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:28:55.040

indexOf 是要走的路 - 只需检查返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:29:52.623

尝试正则表达式：

```
if( /hello/.test(s) )
    alert("contains"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T12:30:48.837

```
s.indexOf('hello') > -1 
```

[（文档）](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)或

```
s.match('hello') === true 
```

（[docs](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)，请注意，`'hello'`在这种情况下，这将被解释为正则表达式。）

# wcf - 使用性能计数器监控 WCF 服务

> ID：12177959
> 
> 赞同：1
> 
> 时间：2012-08-29T12:27:31.183
> 
> 标签：wcf, logging, perfmon

我需要监控 WCF Web 服务处理服务请求所需的平均时间。在线研究我发现一种方法是使用性能计数器。我使用 Web 服务的 web.config 文件激活了计数器：

```
<system.serviceModel>
  <diagnostics performanceCounters="All" />
</system.serviceModel> 
```

我现在可以使用 perfmon (6.1.7600) 实时查看相关数据。如何创建这些值并将其输出到将信息附加到底部的滚动日志文件中？我试过使用 perfmon 但似乎找不到选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:13:14.443

您可以使用 perfmon 数据收集器集进行设置。右键单击 DataCollector 本身（双击您的集合以访问收集器），然后转到“文件”选项卡。从那里设置最大样本并选择循环记录。您还可以指定是否要记录到 .csv、.tsv 或二进制文件。这是一篇关于配置 DataCollectorSet的[优秀 Technet 文章。](http://technet.microsoft.com/en-us/library/bb726968.aspx)

# c# - Visual Studio 2012 中的花括号自动完成

> ID：12177963
> 
> 赞同：26
> 
> 时间：2012-08-29T12:27:39.607
> 
> 标签：c#, ide, visual-studio-2012, visual-studio-power-tools

刚刚从 vs10 迁移到 vs12，看起来花括号与 C# 中的缩进（？）等其他一些功能完全断开，例如输入：

```
public static void myFunc() { 
```

在 Visual Studio 10 中，它会自动为其添加右花括号。是否有一些电动工具或其他东西可以解决这个问题并给出相同的行为？[Brace Completer](http://visualstudiogallery.msdn.microsoft.com/0e33cb22-d4ac-4f5a-902f-aff5177cc94d)需要在函数后按 Enter 以添加右括号。

同样在tools->options->text-editor->c#->formatting->automatic format completed block on`}` 默认开启..

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-03-12T17:54:33.060

如果有人对 VS 2013 有这个问题，现在有一个设置。我刚刚重置了我的 VS 设置，它又开始完成我的牙套。对我来说，这不是生产力电动工具。您可以在此处打开/关闭它：

![在此处输入图像描述](../Images/658a99021850d75701bccca4c433acea.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-29T12:31:35.303

默认情况下，Visual Studio 2010 不会这样做（至少在我的情况下不是）。你确定你没有使用像[Productivity Power Tools这样的扩展](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)

这个支持VS2012：http: [//visualstudiogallery.msdn.microsoft.com/0e33cb22-d4ac-4f5a-902f-aff5177cc94d](http://visualstudiogallery.msdn.microsoft.com/0e33cb22-d4ac-4f5a-902f-aff5177cc94d)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-22T08:27:35.947

[Productivity Power Tools for 2012](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)现在可以自动完成，OP 几乎肯定使用 2010 版本。

[2013 年生产力电动工具](http://visualstudiogallery.msdn.microsoft.com/dbcb8670-889e-4a54-a226-a48a15e4cace)

如果您以前没有使用过它，您可以打开/关闭它在选项>生产力电动工具中添加的几乎所有功能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-20T12:58:52.277

这是使用 C# 为 RichTextBox 创建自动完成括号的代码。

```
using System;  
using System.Collections.Generic;  
using System.ComponentModel;  
using System.Data;  
using System.Drawing;  
using System.Windows.Forms;  

namespace Auto_Complete_Brackets  
{  
    public partial class Form1 : Form  
    {  
        public Form1()  
        {  
            InitializeComponent();  
        }  

        //declare  isCurslyBracesKeyPressed variable as Boolean and assign false value  
        //to check { key is pressed or not  
        public static Boolean isCurslyBracesKeyPressed = false;  

        //richTextBox1 KeyPress events  

        // if key (,{,<,",',[ is pressed then insert opposite key to richTextBox1 at Position SelectionStart+1  
        // add one line after inserting, e.Handled=true;  
        //finally set SelectionStart to specified position  

        private void richTextBox1_KeyPress(object sender, KeyPressEventArgs e)  
        {  
            String s = e.KeyChar.ToString();  
            int sel = richTextBox1.SelectionStart;  
            if (checkBox1.Checked == true)  
            {  
                switch (s)  
                {  
                    case "(": richTextBox1.Text = richTextBox1.Text.Insert(sel, "()");  
                        e.Handled = true;  
                        richTextBox1.SelectionStart = sel + 1;  
                        break;  

                    case "{":  
                        String t = "{}";  
                        richTextBox1.Text = richTextBox1.Text.Insert(sel, t);  
                        e.Handled = true;  
                        richTextBox1.SelectionStart = sel + t.Length - 1;  
                        isCurslyBracesKeyPressed = true;  
                        break;  

                    case "[": richTextBox1.Text = richTextBox1.Text.Insert(sel, "[]");  
                        e.Handled = true;  
                        richTextBox1.SelectionStart = sel + 1;  
                        break;  

                    case "<": richTextBox1.Text = richTextBox1.Text.Insert(sel, "<>");  
                        e.Handled = true;  
                        richTextBox1.SelectionStart = sel + 1;  
                        break;  

                    case "\"": richTextBox1.Text = richTextBox1.Text.Insert(sel, "\"\"");  
                        e.Handled = true;  
                        richTextBox1.SelectionStart = sel + 1;  
                        break;  

                    case "'": richTextBox1.Text = richTextBox1.Text.Insert(sel, "''");  
                        e.Handled = true;  
                        richTextBox1.SelectionStart = sel + 1;  
                        break;  
                }  
            }  
        }  

        // richTextBox1 Key Down event  
        /* 
         * when key  {  is pressed and {} is inserted in richTextBox 
         * and isCurslyBracesKeyPressed is true then insert some blank text to richTextBox1 
         * when Enter key is down 
         * it will look like this when Enter key is down 

             { 
                   | 
             }         

         * */  

        private void richTextBox1_KeyDown(object sender, KeyEventArgs e)  
        {  
            int sel = richTextBox1.SelectionStart;  
            if (e.KeyCode == Keys.Enter)  
            {  
                if(isCurslyBracesKeyPressed==true)  
                {  
                    richTextBox1.Text = richTextBox1.Text.Insert(sel, "\n          \n");  
                    e.Handled = true;  
                    richTextBox1.SelectionStart = sel + "          ".Length;  
                    isCurslyBracesKeyPressed = false;  
                }  
            }  
        }  
    }  
} 
```

# kinect - Kinect 向上/向下滑动手势

> ID：12177965
> 
> 赞同：1
> 
> 时间：2012-08-29T12:27:44.670
> 
> 标签：kinect, kinect.toolbox

我使用了**SwipeGestureRecognizer**，它只有向左滑动和向右滑动手势识别，但我想向上/向下滑动双手如何做到这一点..

任何想法......

**SwipeGestureRecognizer**是一个 dll，所以我看不到滑动识别器的逻辑。

```
 public event EventHandler<KinectGestureEventArgs> SwipeLeftDetected;
  public event EventHandler<KinectGestureEventArgs> SwipeRightDetected; 
```

任何人都可以拥有**SwipeGestureRecognizer**逻辑的代码，以便我可以理解并尝试实现向上滑动。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:40:18.133

我在这里摸索了一下，但如果您指的是 Kinect 工具箱，这里有一个为它设置的[Codeplex 项目。](http://kinecttoolbox.codeplex.com/)具体来说，您应该查看[SwipeGestureDetector.cs](http://kinecttoolbox.codeplex.com/SourceControl/changeset/view/98980#1813213)。

实际上，查看您的描述和 Codeplex 上的代码，您可能没有使用 Kinect 工具箱，但这可能是开始的好时机。此外，将向上/向下滑动识别添加到链接的 .cs 文件应该相对简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:56:50.243

看看这里[http://blog.exceptontuesdays.com/post/27989563563/gestures-with-microsoft-kinect-for-windows-sdk-v1-5](http://blog.exceptontuesdays.com/post/27989563563/gestures-with-microsoft-kinect-for-windows-sdk-v1-5)

它没有向上/向下手势，但无论如何它还有很多其他手势。

[那里也提供源代码。](http://www.exceptontuesdays.com/archive/Fizbin.Kinect.Gestures.zip)

```
 switch (e.GestureType)
            {
                case GestureType.Menu:
                    Debug.WriteLine("Menu");
                    Gesture = "Menu";
                    break;
                case GestureType.WaveRight:
                    Debug.WriteLine("Wave Right");
                    Gesture = "Wave Right";
                    break;
                case GestureType.WaveLeft:
                    Debug.WriteLine("Wave Left");
                    Gesture = "Wave Left";
                    break;
                case GestureType.JoinedHands:
                    Debug.WriteLine("Joined Hands");
                    Gesture = "Joined Hands";
                    break;
                case GestureType.SwipeLeft:
                    Debug.WriteLine("Swipe Left");
                    Gesture = "Swipe Left";
                    break;
                case GestureType.SwipeRight:
                    Debug.WriteLine("Swipe Right");
                    Gesture = "Swipe Right";
                    break;
                case GestureType.ZoomIn:
                    Debug.WriteLine("Zoom In");
                    Gesture = "Zoom In";
                    break;
                case GestureType.ZoomOut:
                    Debug.WriteLine("Zoom Out");
                    Gesture = "Zoom Out";
                    break;

                default:
                    break; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T13:53:56.943

我认为您正在使用 kinect.toolbox。正如@Coeffect 向您推荐源代码的链接，您可以访问源代码并根据需要进行更改。[这](http://www.codeproject.com/Articles/343491/How-to-Benefit-from-Kinect-Toolbox-and-Coding4Fun)是一个非常有用的资源，展示了如何使用 kinect.toolbox 以及如何向其中添加新手势。您可以非常相似地添加向上滑动手势。我认为您可以将这样的内容添加到[SwipeGestureDetector.cs](http://kinecttoolbox.codeplex.com/SourceControl/changeset/view/98980#1813213)

```
LookforGesture()
{

     // from down to up
     if (ScanPositions ((P1, P2) => Math.Abs ??(p2.X - p1.X) <0.20f, 
       (P1, P2) => p2.Y - p1.Y <0.01f, (P1, P2) => 
       Math.Abs ??(p2.Y - p1.Y)> 0.2f, 250, 2500))
     {
         RaiseGestureDetected ("SwipeUp");
         return;
     }
     ...
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:41:29.153

滑动是非常容易识别的手势。使用简单的数学。您需要将手势“切割”为 3 个阶段。开始、中间和结束

如果你想识别从上到下的滑动，你的开始手势是当你的手在头顶的某个地方时。例如头顶上方 10 厘米。因此，在每一帧中，您都会检查您的手是否在您的手上方 10 厘米。如果是，您需要检查它是否会到达中间位置。我会在这里用手放在肩膀的高度上。我也会实现方式标记，因此 IMO 这种手势应该是直线进行的。如果你的手从头顶到肩膀直线移动，你需要检查是否会到达终点。我会在胸部以下某处使用高度。这样，使用简单的数学运算，只需检查您手在每一帧中的位置，您就可以实现自己的滑动识别

# javascript - jQuery Orbit - 如何制作随机幻灯片？

> ID：12177967
> 
> 赞同：2
> 
> 时间：2012-08-29T12:27:46.227
> 
> 标签：javascript, jquery, random, slideshow

我为我的网站找到了一个很酷的幻灯片。

当页面加载时，第一张图片出现在幻灯片中。

我希望幻灯片在页面加载时随机显示一些图片。

Javascript代码：

```
 (function($) {
    $.fn.orbit = function(options) {

    var defaults = {  
    animation: 'fade',                  
    animationSpeed: 800,                
    timer: false,                       
    advanceSpeed: 4000,                 
    pauseOnHover: false,                
    startClockOnMouseOut: false,       
    startClockOnMouseOutAfter: 1000,    
    directionalNav: true,               
    captions: true,                     
    captionAnimation: 'fade',          
    captionAnimationSpeed: 800,        
    bullets: false,                     
    bulletThumbs: false,                
    bulletThumbLocation: '',           
    afterSlideChange: function(){}      
}; 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:18:33.667

所以; Open Source Code ORBIT Objects 设置添加随机默认false：

```
defaults: {                                                                 
    animation: 'horizontal-push',     
    animationSpeed: 600,              // how fast animtions are               
    timer: true,                      // true or false to have the timer      
    advanceSpeed: 4000,               // if timer is enabled, time between transitions 
    pauseOnHover: false,              // if you hover pauses the slider       
    startClockOnMouseOut: false,      // if clock should start on MouseOut    
    startClockOnMouseOutAfter: 1000,  
    directionalNav: true,                 // manual advancing directional navs
    captions: true,                   // do you want captions?                
    captionAnimation: 'fade',             // fade, slideOpen, none            
    captionAnimationSpeed: 600,       // if so how quickly should they animate in
    bullets: false,                   
    bulletThumbs: false,              // thumbnails for the bullets           
    bulletThumbLocation: '',          // location from this file where thumbs will be
    afterSlideChange: $.noop,     // empty function                           
    fluid: false,             
    centerBullets: true,

    /////////////////////////// add Line
    random: false, // or true 
    ////////////////////////////

    }, 
```

在 ORBIT Objects {loaded} 方法之后添加到 if (options.random) then Random:

```
loaded: function () {                                                       
    this.$element                                                             
        .addClass('orbit')                                                      
        .css({width: '1px', height: '1px'});                                    

    this.setDimentionsFromLargestSlide();                                     
    this.updateOptionsIfOnlyOneSlide();                                       
    this.setupFirstSlide();                                                   

    if (this.options.timer) {                                                 
        this.setupTimer();                                                      
        this.startClock();                                                      
    }                                                                         

    if (this.options.captions) {                                              
        this.setupCaptions();                                                   
    }                                                                         

    if (this.options.directionalNav) {                                        
        this.setupDirectionalNav();                                             
    }                                                                         

    if (this.options.bullets) {                                               
        this.setupBulletNav();                                                  
        this.setActiveBullet();                                                 
    }                                                                         

  //////////////////////////////// add Line                                                                   
  if (this.options.random)                                                  
      this.shift(this.Random.__init__()); 
  /////////////////////////////////////                                  

}, 
```

后; 添加 ORBIT 对象新方法 {Random}

```
 Random: {                                                                      

        __init__: function() {                                                     

            return this.math();                                                    
        },                                                                         

        math: function() {                                                       
            var bullets_count = (jQuery(".orbit-bullets li").length -1);           

            return (Math.floor(Math.random() * (bullets_count - 0 + 1)));          
        }                                                                                                                                               
}, 
```

别紧张..

# dart - 如何将任意 HTML 添加到 Dart 中的元素？

> ID：12177970
> 
> 赞同：8
> 
> 时间：2012-08-29T12:27:51.167
> 
> 标签：dart

我想向`<span>hello</span>`元素添加任意位的 HTML（如 ）。我如何在 Dart 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T12:27:51.167

您可以使用 向元素添加任意位的 HTML `appendHtml('<span>some html</span>')`，如下所示：

```
import 'dart:html';
main() {
  var elem = new DivElement();
  elem.appendHtml('<span>hello</span>');
} 
```

该`appendHtml`方法将解析 HTML 并将结果节点添加为元素的最后一个子元素。

# python - 裁剪图像，如果没有足够的白色照片区域，请更改黑色区域

> ID：12177972
> 
> 赞同：2
> 
> 时间：2012-08-29T12:27:54.833
> 
> 标签：python, python-imaging-library

我必须使用 PIL 用 python 裁剪照片。
如果照片区域不够，则该区域的其余部分被涂成黑色。
我怎样才能使那个区域变白？

这是我现在使用的代码的一部分：

```
i = Image.open(filepath)
box2 = (newX,newY,newX+newW,newY+newH)
i2=i.crop(box=box2)
i2.load()
...
i2.save(new_filepath)
...
white=(255,255,255)
i3 = Image.new( 'RGB' , i2.size , white )
i3.paste( i2)
i3.save(filepath2,'PNG') 
```

裁剪效果很好，但我想要在该区域的其余部分使用白色而不是黑色。我尝试创建一个白色背景的新图像并粘贴裁剪后的图像，但它不起作用。

编辑：示例输出

![示例输出](../Images/7a119f1fa173a0ae528da6db32b51a1d.png)

EDIT2：我有原始图像和裁剪坐标
**我更新了代码**
记住裁剪坐标可以是负数。

输入输出示例
输入img：http: [//i.imgur.com/vbmPy.jpg](https://i.imgur.com/vbmPy.jpg)

```
box2=(-743, 803, 1646, 4307) 
```

输出图像：http: [//i.imgur.com/K7sil.jpg](https://i.imgur.com/K7sil.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:15:31.333

在我看来你做错了什么，你应该分享你的整个代码和图像。

我在 PIL 中做过很多次，最简单的解决方案一直是将裁剪粘贴到全白图像上。

```
import Image

# open source
i = Image.open('hHncu.png')

# crop it
( newX , newY ) = ( 110 , 0 )
( newW , newH ) = ( 110 , 150 )
box_crop = ( newX,newY,newX+newW,newY+newH )
i2 = i.crop(box=box_crop)
i2.load()

# save it , just for testing
i2.save('hHncu-out.png')

# create the new image, and paste it in
# note that we're making it 300x300  and have the background set to white (255x3)
i3 = Image.new( 'RGB' , (300,300) , (255,255,255) )
# paste it at an offset. if you put no offset or a box, i3 must match i2s dimensions
i3.paste( i2 , (25,25) )
# save it
i3.save('hHncu-out-2.png') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T13:02:47.827

如果您可以使用 numpy，您可以执行以下操作：

```
i22 = flipud(asarray(i2).copy())
# calculate the area that its black, using the original size and the box information
for i in xrange(blackrows):
  i22[i:] = asarray([255,255,255])
# and and something like that to the blackcolumns 
```

我不经常使用 PIL，但它可能具有一些像素访问功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:48:55.600

要完全按照您的要求进行操作，请将图像转换为 numpy 数组并过滤全黑行和列（在第二张图像上）。您不能简单地将所有黑色像素都设为白色，因为这会影响图像内部的那些像素。

```
import numpy
from PIL import Image
img = Image.open("hHncu.png") # Imgur's naming scheme
pix = numpy.array(img)        # Convert to array

black = numpy.array([0,0,0,255])
white = numpy.array([255,255,255,255])

pix2 = pix.copy()
dim  = pix.shape

for n in xrange(dim[0]):
    if (pix[n,:]==black).all(): 
        pix2[n,:,numpy.newaxis] = white

for n in xrange(dim[1]):
    if (pix[:,n]==black).all(): 
        pix2[:,n,numpy.newaxis] = white

# View the results
from pylab import *
subplot(121); imshow(pix )
subplot(122); imshow(pix2)
show() 
```

![在此处输入图像描述](../Images/5fd427cb0f3d5e32cf7de6d4e569a788.png)

看起来黑色和图像之间有一些平滑，需要更高级的过滤器来解决这个问题 - 但您可以从这里了解如何开始！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T00:11:18.303

好的。所以这里是我提到的想法的快速尝试。

rebox() 函数返回一个“固定”边界框，以及一些偏移数据

这在大多数情况下都有效。我没有整合偏移数据，但它的某些版本可能会放在该`i3.paste`部分中。

测试图像 grid.png 为 300x300，蓝线为 50 像素，红线为 150 像素，绿线为 200 像素。

您应该能够根据您的确切需求进行调整。

![在此处输入图像描述](../Images/f9849c21ba02dab95dcf6db81fc99fc7.png)

```
import Image
i1 = Image.open('grid.png')

DEBUG = True

def rebox( box_original , box_crop_desired ):

    box_crop_new= list( box_crop_desired )
    box_crop_offset = [ 0 , 0 ]

    if box_crop_desired[0] < 0:
        box_crop_new[0] = 0
        box_crop_offset[0] = box_crop_desired[0]

    if box_crop_desired[1] < 0:
        box_crop_new[1] = 0
        box_crop_offset[1] = box_crop_desired[1]

    if box_crop_desired[2] > box_original[2]:
        box_crop_new[2] = box_original[2]

    if box_crop_desired[3] > box_original[3]:
        box_crop_new[3] = box_original[3]

    box_crop_offset = tuple(box_crop_offset)
    box_crop_new = tuple(box_crop_new)

    if DEBUG :
        print "box_original                      %s" % str(box_original)
        print "box_crop_offset                   %s" % str(box_crop_offset)
        print "box_crop_desired                  %s" % str(box_crop_desired)
        print "box_crop_new                      %s" % str(box_crop_new)

    return ( box_crop_new , box_crop_offset )

( newX , newY ) = ( 200 , 200 )
( newW , newH ) = ( 400 , 400 )
box_crop_desired = ( newX , newY , newX+newW, newY+newH )
( box_crop , box_crop_offset ) = rebox( i1.getbbox() , box_crop_desired )

i2 = i1.crop(box=box_crop)
i2.save('grid-out-b.png')

i3 = Image.new( 'RGBA' , ( newW , newH ) , (255,255,255) )
i3.paste( i2 , (0,0) )
i3.save('grid-out-final-b.png') 
```

# c# - 音频从输入到扬声器的硬件传递 - 不在软件中完成

> ID：12177977
> 
> 赞同：6
> 
> 时间：2012-08-29T12:28:02.300
> 
> 标签：c#, winforms, audio, hardware

几年前，我为我的公司编写了一个自定义应用程序，该应用程序只运行一台特定型号的计算机。该应用程序必须能够将来自麦克风插孔的音频传递到扬声器。我没有在软件中处理进入插孔的字节并将它们传递给扬声器，而是利用我知道特定硬件来编写一个函数的事实，该函数使声卡能够将音频从输入循环到扬声器. 这是那个函数（它是用 C 语言编写的，只使用 mmsystem.dll）：

```
int setMasterLevelsFromMicrophone (int volume, int mute)
{
    MMRESULT error;

    // Open the mixer
    HMIXER mixerHandle;
    if (error = mixerOpen (&mixerHandle, 0, 0, 0, 0))
        return 1;

    // Get the microphone source information
    MIXERLINE mixerline;
    mixerline.cbStruct = sizeof(MIXERLINE);
    mixerline.dwDestination = 0;
    if ((error = mixerGetLineInfo((HMIXEROBJ)mixerHandle, &mixerline, MIXER_GETLINEINFOF_DESTINATION)))
        return 2;

    // Get the microhone source controls
    MIXERCONTROL mixerControlArray[2];
    MIXERLINECONTROLS mixerLineControls;
    mixerLineControls.cbStruct = sizeof(MIXERLINECONTROLS);
    mixerLineControls.cControls = 2;
    mixerLineControls.dwLineID = mixerline.dwLineID;
    mixerLineControls.pamxctrl = &mixerControlArray[0];
    mixerLineControls.cbmxctrl = sizeof(MIXERCONTROL);

    if ((error = mixerGetLineControls((HMIXEROBJ)mixerHandle, &mixerLineControls, MIXER_GETLINECONTROLSF_ALL)))
        return 3;

    // Set the microphone source volume
    MIXERCONTROLDETAILS_UNSIGNED value;
    MIXERCONTROLDETAILS mixerControlDetails;
    mixerControlDetails.cbStruct = sizeof(MIXERCONTROLDETAILS);
    mixerControlDetails.dwControlID = mixerControlArray[0].dwControlID;
    mixerControlDetails.cChannels = 1;
    mixerControlDetails.cMultipleItems = 0;
    mixerControlDetails.paDetails = &value;
    mixerControlDetails.cbDetails = sizeof(MIXERCONTROLDETAILS_UNSIGNED);
    value.dwValue = volume;
    if ((error = mixerSetControlDetails((HMIXEROBJ)mixerHandle, &mixerControlDetails, MIXER_SETCONTROLDETAILSF_VALUE)))
        return 4;

    // Set the microphone source mute
    mixerControlDetails.dwControlID = mixerControlArray[1].dwControlID;
    value.dwValue = mute;
    if ((error = mixerSetControlDetails((HMIXEROBJ)mixerHandle, &mixerControlDetails, MIXER_SETCONTROLDETAILSF_VALUE)))
        return 5;

    return 0;
} 
```

如您所见，此方法高度特定于我当时使用的硬件，因为我已经硬编码了许多数组索引以访问混音器的特定属性。

现在来回答这个问题。

现在已经有几年了，我需要修改我目前正在用 C# winforms 编写的应用程序以显示相同的行为。也就是说，我需要从麦克风或 lini-in 插孔接收到的音频直接传递到扬声器。这里的诀窍是硬件不再关闭。并且应用程序需要在任何运行 WinXP 或更高版本的机器上运行。

我开始使用 NAudio 库在软件模式下执行此直通（不使用内置声卡直通）。这是我在 C# 中创建的小工具箱：

```
using System;
using System.ComponentModel;
using NAudio.Wave;

namespace Media
{
    public partial class AudioToolbox : Component
    {
        private WaveIn waveIn = null;
        private WaveOutEvent waveOut = null;
        public int SampleRate { get; set; }
        public int BitsPerSample { get; set; }
        public int Channels { get; set; }

        public AudioToolbox()
        {
            InitializeComponent();

            SampleRate = 22050;
            BitsPerSample = 16;
            Channels = 1;
        }

        public void BeginReading(int deviceNumber)
        {
            if (waveIn == null)
            {
                waveIn = new WaveIn();
                waveIn.DeviceNumber = deviceNumber;
                waveIn.WaveFormat = new NAudio.Wave.WaveFormat(SampleRate, BitsPerSample, Channels);
                waveIn.StartRecording();
            }
        }

        public void BeginLoopback()
        {
            if (waveIn != null && waveOut == null)
            {
                WaveInProvider waveInProvider = new WaveInProvider(waveIn);
                waveOut = new WaveOutEvent();
                waveOut.DeviceNumber = -1;  // Default output device
                waveOut.DesiredLatency = 300;
                waveOut.Init(waveInProvider);
                waveOut.Play();
            }
        }

        public void EndReading()
        {
            if (waveIn != null)
            {
                waveIn.StopRecording();
                waveIn.Dispose();
                waveIn = null;
            }
        }

        public void EndLoopback()
        {
            if (waveOut != null)
            {
                waveOut.Stop();
                waveOut.Dispose();
                waveOut = null;
            }
        }
    }
} 
```

我遇到的问题是（我假设）资源。这段代码确实允许我将音频循环输出到扬声器，但在系统上执行任务会引入音频中的弹出和跳过。例如，如果我打开应用程序或快速最小化和最大化文件夹，播放会弹出并跳过。

有没有办法以某种方式线程化 NAudio 库以避免这种弹出和跳过？还是像我多年前在 C 应用程序中所做的那样，找到一种通过硬件传递音频的通用方法对我来说更好？

**编辑：**

我测试这个音频工具箱的应用程序非常简单。它只是一个由 Visual Studio 2010 创建的默认 winforms 应用程序。我在表单中添加了一个按钮，并且在 click 事件上发生了以下事件：

```
private void button1_Click(object sender, EventArgs e)
{
    AudioToolbox atr = new AudioToolbox();
    atr.BeginReading(0);
    atr.BeginLoopback();
} 
```

我还将项目设置为在 .NET Framework 4 中运行，因为这是我需要此工具箱最终与之集成的应用程序的框架。当我编译应用程序并单击按钮时，我可以听到从麦克风插孔传递到扬声器的音频。然后我打开 Windows 文件资源管理器并不断最小化/最大化它。此操作会导致音频跳过。失败。

我刚刚也在 NAudio 论坛上发布了这个问题。如果将来有人偶然发现此页面，请点击以下链接： [NAudio 论坛上发布的问题](http://naudio.codeplex.com/discussions/393593 "NAudio 论坛帖子")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:16:31.037

我认为你只需要将你的处理启动到一个单独的线程中。您正在 UI 线程上完成所有工作，这就是为什么每当您执行任何操作时都会暂停您的处理。我假设音频来自事件的块。事件在调度它们的线程上处理，在这种情况下是您的 ui 线程。

尝试将您的代码包装成这样

```
AudioToolbox atr = new AudioToolbox();
var audioThread = new Thread(()=> {
    atr.BeginReading(0);
    atr.BeginLoopback();
}).Start(); 
```

我看不出执行外部任务会导致中断的任何原因。我已经在一个线程中完成了实时实时音频和视频处理，在许多不同的机器上都没有问题。也许发生的事情是因为它全部在 ui 线程中，当它重绘屏幕时，您的音频处理被暂停。如果是这种情况，那么专用线程将解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:42:43.393

这是迄今为止我能够实现的最好的，以最大限度地减少跳过。我将接受它作为答案，以便任何偶然发现此页面的其他人都会看到我所做的，但如果**有人提出更好的解决方案，我会很乐意选择他们的答案**。

我要做的第一件事就是放弃 NAudio 1.5，这是 NAudio 的最后一个官方版本。相反，我选择了最新的热门版本，它是 NAudio 1.6 的测试版。我这样做是因为 1.6 的测试版包含一个名为 WaveInEvent 的新 WaveInProvider。WaveInEvent 是有益的，因为它可以防止在从麦克风插孔读取数据时调用 GUI 线程。

我做的第二件事是从 WaveOutEvent 切换到 DirectSoundOut。我这样做是因为在我的测试中，我发现播放文件中的音频时，WaveOutEvent 会根据我对 CPU 的使用情况跳过，但 DirectSoundOut 不会。所以我假设从麦克风端口播放音频时会发生相同的行为。因此，我使用 DirectSoundOut 来播放麦克风中的音频。

这是我的新音频输入工具箱：

```
using System; 
using System.ComponentModel; 
using NAudio.Wave; 

namespace Media 
{ 
    public partial class AudioInputToolbox : Component 
    {
        private WaveInEvent waveIn = null;
        private DirectSoundOut waveOut = null;
        public int SampleRate { get; set; } 
        public int BitsPerSample { get; set; } 
        public int Channels { get; set; }

        public AudioInputToolbox() 
        { 
            InitializeComponent(); 

            SampleRate = 22050; 
            BitsPerSample = 16; 
            Channels = 1; 
        } 

        public void BeginReading(int deviceNumber) 
        {
            if (waveIn == null) 
            {
                waveIn = new WaveInEvent(); 
                waveIn.DeviceNumber = deviceNumber; 
                waveIn.WaveFormat = new NAudio.Wave.WaveFormat(SampleRate, BitsPerSample, Channels);
                waveIn.StartRecording(); 
            } 
        }

        public void BeginLoopback() 
        {
            if (waveIn != null && waveOut == null)
            {
                waveOut = new DirectSoundOut(DirectSoundOut.DSDEVID_DefaultPlayback, 300);
                waveOut.Init(new WaveInProvider(waveIn));
                waveOut.Play();
            }
        }

        public void EndReading() 
        {
            if (waveIn != null) 
            { 
                waveIn.StopRecording(); 
                waveIn.Dispose(); 
                waveIn = null; 
            } 
        } 

        public void EndLoopback() 
        {
            if (waveOut != null)
            {
                waveOut.Stop();
                waveOut.Dispose();
                waveOut = null;
            }
        } 
    } 
} 
```

这是我的新测试应用程序的代码。它只是一个带有两个按钮的表单。每个按钮都有一个回调。一个是开始按钮。另一个是停止按钮。

```
using System;
using System.Threading;
using System.Windows.Forms;
using Media;

public partial class AITL : Form
{
    AudioInputToolbox atr = new AudioInputToolbox();

    public AITL()
    {
        InitializeComponent();
    }

    private void startButton_Click(object sender, EventArgs e)
    {
        new Thread(() =>
        {
            atr.BeginReading(0);
            atr.BeginLoopback();
        }).Start();              
    }

    private void stopButton_Click(object sender, EventArgs e)
    {
        atr.EndReading();
        atr.EndLoopback();
    }
} 
```

这种方法**不能解决我的问题**。它只会使问题发生**的频率****稍低一些**，严重程度稍低一些。

同样，我很乐意接受任何可以完全解决跳过问题的人的不同答案。要重新迭代，我在按下开始按钮后遇到跳过，并且我反复最小化和最大化一个窗口。任何窗口。我一直在 Windows 资源管理器中这样做。（在我这个音频组件需要适应的全功能应用程序中，有很多 GUI 密集型映射正在进行，因此窗口的最小化/最大化是对该动作的良好模拟）。

# c# - 如何在不单击此按钮的情况下激活 LinkBut ton？

> ID：12177987
> 
> 赞同：0
> 
> 时间：2012-08-29T12:28:55.347
> 
> 标签：c#, asp.net, email, listview, linkbutton

如果我单击 ListView 中的按钮，我想打开 Outlook。这怎么...

```
<a href="mailto:user@example.com">Send email to user@example.com</a> 
```

我有一个 ...

```
<asp:LinkButton ID="LinkButton1" runat="server">LinkButton</asp:LinkButton> 
```

没有网址。Url 从 ListView 获取此 LinkBut​​ton 并且它可以工作，但在此之后我无法激活此 LinkBut​​ton :(

这怎么...

```
protected void myListView_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    if (e.CommandName == "mailto")
    {
        int index = Convert.ToInt32(e.CommandArgument);

        LinkButton lb = (LinkButton)myListView.Items[index].FindControl("Label2");

        string mailto = lb.Text;

        LinkButton1.PostBackUrl = "mailto:" + mailto;
        LinkButton1.ResolveClientUrl("mailto:" + mailto); //Here?????
    }
} 
```

如何在不单击此按钮的情况下激活 LinkBut​​ton？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:34:11.207

尝试使用`<asp:HyperLink />`，记录[在这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx)：

```
<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl = "mailto:abc@example.com" Text ="abc@example.com"></asp:HyperLink> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:34:58.463

只需使用链接

```
<asp:HyperLink ID="hl" runat="server" NavigateUrl = ..." Text ="link"></asp:HyperLink> 
```

您可以在代码后面用作链接按钮，但他提供其他功能

```
hl.NavigateUrl =  "mailto:" + mailto; 
```

塔拉索夫 您可以在这里找到所有房产

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T12:37:05.967

使用超链接而不是链接按钮

```
 <asp:HyperLink ID="HyperLink1" runat="server" 
NavigateUrl="mailto:user@example.com" >HyperLink</asp:HyperLink> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T12:38:31.363

如果您坚持使用按钮，请设置 ClientClick 属性。用于`return false;`取消回发。如果您想要回发，则将其关闭。

```
LinkButton1.ClientClick = "window.open('mailto:someone@somewhere.com', 'email'); return false;"; 
```

# html - 解析html代码块

> ID：12177989
> 
> 赞同：0
> 
> 时间：2012-08-29T12:28:58.740
> 
> 标签：html, regex, parsing, preg-match

我有这样的html代码块

```
 <tr>
   <td style="padding: 11px 8px 11px 15px; color: #000; width: 92px; border-bottom: solid   1px #ccd9e2;"> Name </td>
   <td style="color: #666;border-bottom: solid 1px #ccd9e2;"> Lusine Akopyan </td>
 </tr> 
```

解析名称我使用这样的代码`preg_match("/Name<\/td>(.+?)<\/td>/is", $html, $match);`

但是`$match`var中什么都没有，我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:43:52.407

Maybe try something like:

```
preg_match_all("/<td[^>]*>( Name )<\/td>/", $html, $match); 
```

or

```
preg_match_all("/<td[^>]*>(.*?)<\/td>/", $html, $match); 
```

to get all content within each TD element

# sublimetext2 - 插入模式下的崇高复古模式粘贴

> ID：12177994
> 
> 赞同：0
> 
> 时间：2012-08-29T12:29:15.533
> 
> 标签：sublimetext2

我正在关注一个教程，它说我必须使用`Ctrl + R`插入模式粘贴，但是当我尝试点击该组合时，我得到了`Goto symbol...`Sublime 中预定义的。现在，我想知道是否有其他快捷方式可以在插入模式下粘贴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:48:31.527

正如@roma 指出的那样，不[支持](http://www.sublimetext.com/docs/2/vintage.html)`Ctrl`使用+ 。`R`

我的用例是：我使用了`c%`在匹配括号之间选择文本并自动进入插入模式的命令。正如对罗马答案的评论中指出的那样：在命令之后使用`Ctrl`+`v`不起作用。`c%`

解决方法是在命令`Esc`之后按下键`c%`，这将我们带到命令模式，然后按下`p`键粘贴先前通过`c%`命令选择的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:18:06.920

插入模式是常规的 Sublime Text 2 编辑，具有通常的 Sublime Text 2 键绑定：不模拟 vi 插入模式键绑定。 [从那里](http://www.sublimetext.com/docs/2/vintage.html)

为什么你不想使用`Ctrl`+ `V`？

# css - 在本地动态生成 css

> ID：12177995
> 
> 赞同：1
> 
> 时间：2012-08-29T12:29:16.897
> 
> 标签：css

有没有办法将 css 文件作为输入并修改其属性和值？或者任何帮助我们动态生成css的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:40:44.027

看看 jQuery 函数。它可以通过使用 JavaScript 完美地动态更改 CSS 样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:31:49.167

是的，有一些框架可以动态生成 CSS。对于 .NET，您可以查看[.less](http://www.dotlesscss.org/)，或者对于 Java，有它所基于的[LESS框架。](http://lesscss.org/)如果您不使用这些技术中的任何一种，无疑还会有其他技术。