# StackOverflow 问答 10442000-10442999

# php - 如何在地理编码 XML 响应中引用数组中的 ExtendedData

> ID：10442000
> 
> 赞同：0
> 
> 时间：2012-05-04T02:44:19.487
> 
> 标签：php, xml, arrays, simplexml, geocoding

我正在尝试解析地理编码 XML 响应。我可以使用如下方式引用单个元素：

```
$xml->Response->Placemark->address; 
```

但是如何引用 ExtendedData 中包含的属性数组。迭代这个数组并检索北、南、东、西的值的最佳方法是什么？

这是 XML 响应的相关部分：

```
[ExtendedData] => SimpleXMLElement Object
                    (
                        [LatLonBox] => SimpleXMLElement Object
                            (
                                [@attributes] => Array
                                    (
                                        [north] => 43.7513996
                                        [south] => 43.7487017
                                        [east] => -79.3456315
                                        [west] => -79.3483294
                                    )

                            )

                    ) 
```

谢谢参观。

# ios - 我应该把从数据库中获取记录的逻辑放在哪里？

> ID：10442003
> 
> 赞同：0
> 
> 时间：2012-05-04T02:44:51.750
> 
> 标签：ios, viewwillappear, loaddata

我在操作表上有两个按钮，当我单击一个按钮时，它将在另一个视图中显示所有学生记录。所有这些记录都需要从数据库中检索。目前我将检索记录的逻辑放在 viewwillAppear 方法中，但是当我点击按钮后，屏幕冻结了几秒钟，然后会显示学生列表。

据我了解，我检索记录的逻辑是在学生列表视图中的 viewWillAppear 方法中。单击按钮后，它应该直接进入学生列表视图，然后在学生列表视图中它会尝试加载数据。但是现在在我单击按钮后为什么它在操作表中冻结了？或者是否有任何其他地方可以放入加载记录逻辑，以便在单击按钮后它不会在上一个操作表中冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:25:29.560

1.  如果你要发布到 SO，你总是应该包含你现有的代码。我建议您相应地更新您的问题。请参阅[常见问题解答](https://stackoverflow.com/faq)。

2.  当您说它“冻结”时，我是否推断您是说在您看到带有数据的新视图之前存在延迟，但它最终出现了？如果是这样，您的任务是如何确定延迟发生的位置。因此，我建议您开始在各种方法中插入 NSLog 语句，以便确定延迟发生的确切位置。加载新视图是否需要很长时间？对于要检索的数据？等等。除非你缩小问题范围，找出延迟的根源，否则你将无法解决它。您需要培养诊断和解决问题的技能。顺便说一句，如果您仍然无法确定如何诊断代码并且 NSLog 没有帮助，您也可以参考 Apple'通过你的代码。只有在您准确地缩小了代码中问题出现的位置之后，您才应该在此处发布。

3.  第三，大多数人在 viewDidLoad 中为他们的新视图加载数据，而不是 viewWillAppear；如果您曾经进入学生列表视图的子视图，然后又回到学生列表（即学生列表视图重新出现，即 viewWillAppear 将*再次*触发），您是否真的想再次加载数据，即使您已经已经加载了吗？可能不是。我知道您在加载学生列表视图后可能没有另一个要加载的视图，但您最终可能会（例如，学生详细信息视图），所以好的做法是您应该在 viewDidLoad 中加载视图的数据（这将仅在首次加载视图时触发）。

# javascript - 未捕获的类型错误：对象 [对象对象] 没有方法“幻灯片”

> ID：10442014
> 
> 赞同：0
> 
> 时间：2012-05-04T02:46:24.477
> 
> 标签：javascript, jquery, plugins, typeerror, prettyphoto

当我在 header.php 文件中添加以下脚本时遇到了这个问题。

```
<script type="text/javascript">
            $(function() {
                    $("#logo a span").css("opacity","0");
                    $("#logo a span").hover(function () {
                        $(this).stop().animate({
                            opacity: 1
                        }, 'slow');
                    },
                    function() {
                        // animate opacity to nill
                        $(this).stop().animate({
                            opacity: 0
                        }, 'slow');
                    });
                });
    </script> 
```

在“/head”之前，我添加了这段代码

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
```

当我打开页面时，它无法加载幻灯片，并且我的 general.js 中有一些错误。

```
Uncaught TypeError: Object [object Object] has no method 'prettyPhoto'
$.fn.superfish.sfgeneral.js:92
f.Callbacks.njquery.js:2
f.Callbacks.o.fireWithjquery.js:2
e.extend.readyjquery.js:2
c.addEventListener.B

Uncaught TypeError: Object [object Object] has no method 'slides'
$.fn.superfish.sfgeneral.js:45
f.event.dispatchjquery.js:3
f.event.add.h.handle.i 
```

我的 web 目录中还有一个 jquery.js，但上面的这些错误描述都在那个文件中。

我已经搜索了几天的问题，但我仍然没有得到解决方案。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:48:27.033

您没有引用`prettyPhoto`jQuery 插件。

`prettyPhoto`不是 jQuery 核心函数中的函数，您需要使用使用该函数扩展 jQuery 的“库”。

您应该在 jQuery 核心库**之后**添加对插件的引用：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="{prettyPhoto location}"></script> 
```

顺便说一句，引发错误的代码不在您在此处粘贴的代码中...

# python - 安装 Pytables，查找 HDF5 安装时出错

> ID：10442016
> 
> 赞同：1
> 
> 时间：2012-05-04T02:46:34.300
> 
> 标签：python, hdf5, pytables

我正在尝试在 Windows7 中安装 Pytables，即使我已经设置了所需的环境变量，我仍然会收到以下错误。

```
ERROR:: Could not find a local HDF5 installation. You may need to explicitly
state where your local HDF5 headers and library can be found by setting the
HDF5_DIR environment variable or by using the --hdf5 command-line option. 
```

有没有更好的方法来处理这个？

# unix - 如何使用 find 命令查找文本和文件的出现总数

> ID：10442018
> 
> 赞同：1
> 
> 时间：2012-05-04T02:46:48.393
> 
> 标签：unix, find

我正在尝试运行`find`命令来找出特定文本的出现总数，并使用另一个 find 命令来获取包含此文本的文件数。

我现在拥有的是这个命令。

```
find . -name "*.txt" | xargs grep -i "abc" 
```

这带来了所有具有文本 abc 等的文件。我想获得一个或两个`find`命令来获得

1.  abc 出现的总次数
2.  其中包含 abc 的文件总数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:10:24.353

您需要使用更多`grep(1)`选项来做您想做的事情：

1.  对于发生的总次数`abc`，您需要处理`abc`单行上两次或多次的情况：

    ```
    find . -name '*.txt' -print0 | xargs -0 grep -o -i abc | wc -l 
    ```

2.  对于包含 的文件总数`abc`，您需要注意单个文件包含`abc`两次或多次的情况：

    ```
    find . -name '*.txt' -print0 | xargs -0 grep -l -i abc | wc -l 
    ```

从`grep(1)`手册页：

```
 -l, --files-with-matches
          Suppress normal output; instead print the name of each
          input file from which output would normally have been
          printed.  The scanning will stop on the first match.
          (-l is specified by POSIX.) 
```

和

```
 -o, --only-matching
          Print only the matched (non-empty) parts of a matching
          line, with each such part on a separate output line. 
```

# google-bigquery - Google BigQuery - 将数据下载到表时出错

> ID：10442033
> 
> 赞同：0
> 
> 时间：2012-05-04T02:48:40.243
> 
> 标签：google-bigquery

我正在尝试使用已上传到 Google 大数据的 github 数据。我运行了一些查询（生成了很多行 -

例如：查询`SELECT actor_attributes_login, repository_watchers , repository_forks FROM [githubarchive:github.timeline] where repository_watchers > 2 and REGEXP_MATCH(repository_created_at, '2012-') ORDER BY actor_attributes_login;`

答案有超过 2,20,000 行。当我尝试下载到 CSV 时，它说

> 下载不可用
> 此结果集包含太多行，无法直接下载。请使用“另存为表格”，然后导出生成的表格。

当我尝试将其保存为表时，出现以下错误：

> 访问被拒绝：作业公共数据：job_c2338ba91e494b21970854e13cdc4b2a：RUN_JOB

此外，我运行了将行数限制为 200 左右的查询，即使在这种情况下，我也遇到了上述错误。但是我能够将其下载为 CSV。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:56:06.430

*@Anerudh*您无权修改公共数据样本数据集。创建一个全新的数据集，并尝试将查询结果保存到该数据集中的新表中。

# java - 更改密钥库后，有什么方法可以使骆驼码头动态重新加载密钥库？

> ID：10442035
> 
> 赞同：0
> 
> 时间：2012-05-04T02:48:56.523
> 
> 标签：java, https, apache-camel

我们在camel-jetty中使用https时遇到问题。一旦密钥存储文件被更改（如删除或添加证书），我们如何才能使更改生效？似乎默认情况下，camel-jetty 不会动态重新加载更改。

示例代码：

```
JettyHttpComponent jettyComponent = getContext().getComponent("jetty", JettyHttpComponent.class);
SslSelectChannelConnector sslConnector = new SslSelectChannelConnector();
SslContextFactory sslFactory = sslConnector.getSslContextFactory();
sslFactory.setNeedClientAuth(true);
sslFactory.setKeyStore("d:" + File.separator +"serverkeystore");
sslFactory.setKeyManagerPassword("serverkey");
sslFactory.setKeyStorePassword("serverkeystore");
sslFactory.setTrustStore("d:" + File.separator +"servertruststore");
sslFactory.setTrustStorePassword("servertruststore");
Map<Integer, SslSelectChannelConnector> connectors = new HashMap<Integer, SslSelectChannelConnector>();
connectors.put(443, sslConnector);
jettyComponent.setSslSocketConnectors(connectors);   
from("jetty:https://0.0.0.0/httpsservice")
    .id("httpsserver")
    .process(new Processor(){
        public void process(Exchange exchange) throws Exception {
            exchange.getOut().setBody("OK");
            exchange.getOut().setHeader(Exchange.HTTP_RESPONSE_CODE, 200);
        }
    }); 
```

但是当我们动态更改密钥存储文件时，除非重新启动应用程序，否则更改不会生效。有什么方法可以使更改生效吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:03:14.583

使用相同的配置保持两个骆驼上下文处于活动状态。应用负载均衡器模式[http://camel.apache.org/load-balancer.html](http://camel.apache.org/load-balancer.html)。然后定期检查密钥库文件是否有更新，如果有更新，一次删除一个。确保负载均衡器知道要触发的上下文。

好吧，我必须承认我还没有真正考虑清楚。SSL 部分可能使它有点棘手。但这应该是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:13:19.377

您可以使用 custom和 custom构建一个`SSLContext`（并通过 an 传递它），该 custom将动态更改其返回值，而不是一劳永逸地加载。`SslContextFactory``X509KeyManager``X509TrustManager`

出于性能原因，我不会在每次调用其中一个方法时重新加载密钥库，而是缓存结果并仅偶尔重新加载一次（也许每 5 分钟一次，这实际上取决于您期望的使用情况）。

# emacs - 将字符定义为单词边界

> ID：10442049
> 
> 赞同：5
> 
> 时间：2012-05-04T02:51:45.583
> 
> 标签：emacs, syntax

我已经将`\`角色定义为在 Latex 模式下作为单词成分，我对结果非常满意。唯一困扰我的是序列 like`\alpha\beta`被视为一个单词（当然，这是预期的行为）。

有没有办法让emacs将特定字符解释为单词“starter”？这样，它总是被认为是它后面的单词的一部分，而不是它前面的单词的一部分。

为了清楚起见，这里有一个例子：

```
\alpha\beta
^          ^
1          2 
```

如果该点在`1`并且我按下`M-d`，则字符串 "\alpha" 应该被杀死。如果该点在`2`并且我按下`M-<backspace>`，则字符串 "\beta" 应该被杀死。

**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:20:02.227

另一个想法：
您的要求非常类似于`subword-mode`为 camelCase 提供的要求。

您无法自定义 subword-mode 的行为——正则表达式是硬编码的——但您当然可以复制该库并根据您的目的对其进行修改。

`M-x` `find-library` `RET` `subword` `RET`

这可能是一个非常强大的解决方案。

**编辑：**根据建议更新评论：

> 作为记录，在函数和subword.el 中更改`[[:upper:]]`to的每个实例都很好 =) （只要将“\”定义为“w”语法）。`[\\\\[:upper:]]``subword-forward-internal``subword-backward-internal`

就个人而言，我更倾向于制作库的副本而不是直接编辑它，除非为了使现有库更通用一点，为此最简单的解决方案似乎是将这些正则表达式移动到变量中 - - 之后，为了这种目的而拥有缓冲区本地修改版本将是微不足道的。

**编辑 2：**从 Emacs 24.3（目前是一个[候选版本](http://permalink.gmane.org/gmane.emacs.devel/157522)）开始，subword-mode 使用新的`subword-forward-regexp`和`subword-backward-regexp`变量（用于简单修改）和`subword-forward-function`和`subword-backward-function`变量（用于更复杂的修改）促进了这一点。

通过使这些正则表达式变量在 Latex 模式下具有所需值的局部缓冲区，您可以直接使用 subword-mode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T03:06:41.990

您应该能够使用语法文本属性来实现这一点：

`M-:` `(info "(elisp) Syntax Properties")` `RET`

**编辑：**实际上，我不确定您是否可以做到这一点？

以下（只是实验）很接近，但`M-<backspace>`在 2 处只会删除“beta”而不是前面的“\”。

我想你可以重新映射`backward-kill-word`到一个检查前面的“\”并杀死它的函数。相当hacky，但如果没有更清洁的解决方案，它可能会成功。

我以前没有玩过这个功能；也许其他人可以澄清。

```
(modify-syntax-entry ?\\ "w")
(setq parse-sexp-lookup-properties t)
(setq syntax-propertize-function 'my-propertize-syntax)
(defun my-propertize-syntax (start end)
  "Set custom syntax properties."
  (save-excursion
    (goto-char start)
    (while (re-search-forward "\\w\\\\" end t)
      (put-text-property
       (1- (point)) (point) 'syntax-table (cons "." ?\\))))) 
```

# html - div没有覆盖整个页面？

> ID：10442050
> 
> 赞同：3
> 
> 时间：2012-05-04T02:51:54.177
> 
> 标签：html, css

我制作了一个需要覆盖整个页面的背景。我知道这对你们大多数人来说是一个简单的问题，但我什么都试过了！！！每次我尝试某些东西时，它都会覆盖父 div。我希望它覆盖整个网页！这是我到目前为止所拥有的。

```
<div id="bkgrd" style="z-index: 9999; display: none; position:absolute;top:25%;left:25%;right:25%;
bottom:25%;
margin:auto;
min-width:50%;
min-height:50%; background-color: #000000; opacity: 0.4;"></div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T03:01:42.440

```
#bkgrd {
    position:fixed;
    top:0;
    left: 0;
    width:100%;
    height:100%;
} 
```

# python - Python subprocess.Popen 创建新目录

> ID：10442057
> 
> 赞同：3
> 
> 时间：2012-05-04T02:52:48.247
> 
> 标签：python

我知道我可以使用 os 模块创建一个新目录。但我试图用 subprocess 模块创建一个新目录，如下所示：

```
p=subprocess.Popen("mkdir extractions", shell=True)
os.chdir("extractions") 
```

当脚本执行时，我注意到创建了目录*提取*但下一个 os.chdir 调用失败，说目录*提取*不存在。我知道我在使用子进程方面遗漏了一些东西，这使得下一行不知道创建的目录。请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T02:56:11.777

在调用 os.chdir 之前，您可能需要调用`p.wait()`以等待 mkdir 完成。或者更好`(stdout, stderr) = p.communicate()`的是，使用 并检查结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T03:38:19.347

为什么不使用 os.mkdir("extractions")？你甚至可以使用 subprocess.call("mkdir extracts") 这两种方法都可以在 Popen 之后，你必须做一些类似communicate()

```
p1 = subprocess.Popen('mkdir extractions', shell=True)
p1.communicate() 
```

但是，这与仅使用 subprocess.call("mkdir extracts", shell=True) 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:58:25.993

```
>>> import os
>>> import subprocess
>>> p=subprocess.Popen("mkdir extractions", shell=True)
>>> os.chdir("extractions") 
```

这对我有用（在 OSX 上）。你在运行什么操作系统？你试过 os.popen 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T03:53:22.313

调用它会更快`os.mkdir`，而且——虽然这种差异实际上不太可能对你的系统产生任何明显的影响——你正在产生创建一个全新进程和运行一个完整的单独程序的开销，然后（假设你接受了建议任何其他 [正确] 答案）等待它通知告诉您它已完成，而不是仅调用内核中的函数。

# javascript - 为什么'onhashchange'in（window）有效？

> ID：10442058
> 
> 赞同：1
> 
> 时间：2012-05-04T02:52:52.343
> 
> 标签：javascript

```
'onhashchange'in(window) 
```

工作`in()`并不奇怪，就像这种构造`new(XMLHTTPRequest)`的`typeof(x)`其他例子一样，但不必将字符串和`in`is 分开。

这符合 ECMAScript 规范吗？它适用于 Chrome 和 FF，尚未测试 IE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:09:40.900

`'`是一个结束字符串的标记，所以一对`''`在语义上是明确的，你不需要在字符串结尾之后的空格让词法分析器知道它已经到达字符串的结尾。

另一种说法是，它的工作原理与它的`'Hello '+'world'`工作原理相同。

此外，`in`是关键字，而不是函数。似乎您将其`()`视为“函数调用运算符”，但在这种情况下，它只是一个消除歧义的括号。

这就像在问“为什么`1 +(2)`有效？” `+`不会仅仅因为您使用括号跟随它而成为一个函数，并且类似地以下将起作用：

```
function foo(){}

foo

(); 
```

Javascript 的空白规则很脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:55:33.800

据我所知，`window`在这种特定情况下，是否用括号括起来没有区别。`window`无论哪种方式，它都会在对象上检查此成员。

如果您使用空格，可能不会那么混乱：

```
'onhashchange' in (window) 
```

一样

```
'onhashchange' in window 
```

`in`不是函数，但是当您删除空格时，我可以看到您是如何阅读它的。用括号括起来的一个好处`window`是您可以缩小代码：

```
'onhashchange'in(window) 
```

没有括号你不能做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:07:36.443

我不确定这个符号是否让你感到困惑（这可能`in()`是一种方法？），但`in`它是很少有人正确理解的 JS 元素之一（直到最近我才真正理解它）。这是一个简化版本，显示了以下内容`in`：

```
var foo = {
    'bar':1,
    'barbar':2
}

console.log('bar' in foo); //true
console.log('baz' in foo); //false 
```

更令人困惑的是，您可以`in`在`for()`循环中使用，就好像它 ( `in`) 是一个迭代器。我倾向于认为`for`循环的方式是这样的：

```
for (exp1; condition; exp2) {
    /* statements */
}

for (condition) {
    /* statements */
} 
```

换句话说，循环将继续，直到`in`条件失败，当它用完成员时会发生这种情况。

# c# - 带有 Ninject 和 Ninject 工厂扩展的存储库。失去魔线？

> ID：10442059
> 
> 赞同：0
> 
> 时间：2012-05-04T02:53:00.803
> 
> 标签：c#, entity-framework, ninject, ninject-extensions

我有一个使用通用存储库模式进行数据访问的应用程序。由于应用程序需要使用几个不同的数据库，我使用 Ninject Factory Extension 实现了一个存储库工厂。这使我可以按需为各种数据库创建存储库。我只是将 DBContext 传递给工厂，如下所示：

```
 private readonly IRepository database1;
    private readonly IRepository database2;

    public MembershipService(IRepositoryFactory repositoryFactory)
    {
        this.database1 = repositoryFactory.CreateRepository(new Context("Database1"));
        this.database2 = repositoryFactory.CreateRepository(new Context("Database2"));
    } 
```

这段代码令人讨厌的是创建上下文所需的字符串。上例中的字符串“Database1”和“Database2”。当在整个项目中多次使用上述代码时，一个简单的错字很容易导致重大问题。

我该如何补救这种情况？我应该创建一个上下文工厂吗？那仍然需要数据库名称。我可以以某种方式使用枚举吗？我一直在折腾一堆想法，但似乎没有什么合适的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:04:47.213

在 IRepositoryFactory 的派生类上放置一个接受 DbContext 的构造函数

```
class RepositoryFactory : IRepositoryFactory
{
    DbContext _dbc;
    public RepositoryFactory(DbContext db)
    {
       _dbc = db;
    }

    public IRepository CreateRepository()
    {
        return new Repository(_dbc);
    }
} 
```

然后你在你的 Ninject 注入绑定上绑定那个 DbContext，把它和你的其他绑定放在一起：

```
ninjectKernel.Bind<DbContext>().To<EfDbContext>().InRequestScope(); 
```

我只是在这里猜测一下，这就是 RepositoryFactory 的注入绑定的样子：

```
ninjectKernel.Bind<IRepositoryFactory<Person>>().To<RepositoryFactory<Person>>(); 
```

如果您将这两个绑定彼此相邻（顺序并不重要），Ninject 应该能够向您的 RepositoryFactory 构造函数的 DbContext 参数注入值。

* * *

一个例子

在此处查看第 60 至 76 行：[http ://code.google.com/p/flexigrid-crud-example/source/browse/trunk/FlexigridCrudDemo/FlexigridCrudDemo/NinjectDependencyResolver.cs](http://code.google.com/p/flexigrid-crud-example/source/browse/trunk/FlexigridCrudDemo/FlexigridCrudDemo/NinjectDependencyResolver.cs)

请参阅此处的 EF 存储库模式，第 22 行：[http ://code.google.com/p/to-the-efnh-x/source/browse/trunk/ToTheEfnhX/Ienablemuch.ToTheEfnhX.EntityFramework/EfRepository.cs](http://code.google.com/p/to-the-efnh-x/source/browse/trunk/ToTheEfnhX/Ienablemuch.ToTheEfnhX.EntityFramework/EfRepository.cs)

在此处查看 NHibernate 的存储库模式，第 24 行：[http ://code.google.com/p/to-the-efnh-x/source/browse/trunk/ToTheEfnhX/Ienablemuch.ToTheEfnhX.NHibernate/NhRepository.cs](http://code.google.com/p/to-the-efnh-x/source/browse/trunk/ToTheEfnhX/Ienablemuch.ToTheEfnhX.NHibernate/NhRepository.cs)

以及我如何使用存储库模式抽象这两个不同的 ORM，Ninject 促进了连接的依赖注入（实体框架的 DbContext，NHibernate 的会话）：

```
int target = 1; // memory, nhibernate, entity framework

switch (target)
{
    case 0:
        ninjectKernel.Bind<IRepository<Person>>().ToMethod(x =>
        {
            var person = new MemoryRepository<Person>();
            person.Save(new Person { Username = "Hello", Firstname = "Yo", FavoriteNumber = 9 }, null);
            person.Save(new Person { Username= "See", Firstname = "Nice" }, null);

            return person;
        }
        ).InSingletonScope();

        break;

    case 1:
        ninjectKernel.Bind<ISession>().ToMethod(x => ModelsMapper.GetSessionFactory().OpenSession()).InRequestScope();
        ninjectKernel.Bind<Ienablemuch.ToTheEfnhX.IRepository<Person>>().To<Ienablemuch.ToTheEfnhX.NHibernate.NhRepository<Person>>();
        ninjectKernel.Bind<Ienablemuch.ToTheEfnhX.IRepository<Country>>().To<Ienablemuch.ToTheEfnhX.NHibernate.NhRepository<Country>>();

        break;

    case 2:

        ninjectKernel.Bind<DbContext>().To<EfDbContext>().InRequestScope();
        ninjectKernel.Bind<Ienablemuch.ToTheEfnhX.IRepository<Person>>().To<Ienablemuch.ToTheEfnhX.EntityFramework.EfRepository<Person>>();
        ninjectKernel.Bind<Ienablemuch.ToTheEfnhX.IRepository<Country>>().To<Ienablemuch.ToTheEfnhX.EntityFramework.EfRepository<Country>>();

        break;

    default:
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:11:29.697

我的通用存储库模式遇到了同样的问题，这是我解决它的方法：

[http://blog.staticvoid.co.nz/2012/01/multiple-repository-data-contexts-with.html](http://blog.staticvoid.co.nz/2012/01/multiple-repository-data-contexts-with.html)

这允许我根据命名空间声明来自不同数据库的特定类型的存储库。

在使用方面，你可以去

```
public MembershipService(IRepository<User> userRepository, IRepository<AppRole> roleRepository) 
```

User 和 AppRole 来自不同的 DBcontexts

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T01:07:58.293

如果每个数据库都有不同的 DbContext 类型，则可以通过创建两个绑定来简化该过程：

kernel.Bind< **DatabaseDbContext1** >()。**ToSelf** ().InRequestScope();

kernel.Bind< **DatabaseDbContext2** >()。**ToSelf** ().InRequestScope();

在 Repository 构造函数中包括两种类型：

公共存储库（**DbContext1，DbContext2**）

您不需要将连接字符串名称放在 DBContext 构造函数中。只需将每个连接字符串命名为与每个 DbContext 名称相同。EntityFramework 将解决剩下的问题。

# c# - 来自 HttpWebRequest 生命周期范围的响应流

> ID：10442061
> 
> 赞同：3
> 
> 时间：2012-05-04T02:53:48.217
> 
> 标签：c#, stream, httpwebrequest

我有这个方法：

```
public Stream Load(string term)
{
    var url = CreateSearchUrl(term);

    var webRequest = (HttpWebRequest)WebRequest.Create(url);
    var webResponse = webRequest.GetResponse();

    return new GZipStream(webResponse.GetResponseStream(), CompressionMode.Decompress);
} 
```

如您所见，我将流返回给调用者，但我不确定这是否安全，因为 WebRequest 被运行时处理，从而使我返回的流无效。

我可以将其转换为字节数组并返回 MemoryStream 甚至使用 WebClient，但我就是不喜欢这个想法 =)。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T23:54:30.887

There isn't an easy way to safely return the Stream without having resource leaks. The main issue is disposing the WebResponse:

```
public Stream Load(string term)
{
    var url = CreateSearchUrl(term);

    var webRequest = (HttpWebRequest)WebRequest.Create(url);
    var webResponse = webRequest.GetResponse(); // whoops this doesn't get disposed!

    return new GZipStream(webResponse.GetResponseStream(), CompressionMode.Decompress);
} 
```

Closing the WebResponse is actually more important than closing the response stream, since closing the WebResponse implicitly closes the response stream.

The only way I know of getting the WebResponse to be disposed with the Stream would be to implement a decorator around the GZipStream that disposed of the WebResponse (as well as the GZipStream) when it is disposed. Although this would work, it is quite a lot of code:

```
class WebResponseDisposingStream : Stream
{
    private readonly WebResponse response;
    private readonly Stream stream;

    public WebResponseDisposingStream(WebResponse response, Stream stream)
    {
        if (response == null)
            throw new ArgumentNullException("response");
        if (stream == null)
            throw new ArgumentNullException("stream");

        this.response = response;
        this.stream = stream;
    }

    public override void Close()
    {
        this.response.Close();
        this.stream.Close();
    }

    // override all the methods on stream and delegate the call to this.stream

    public override void Flush() { this.stream.Flush(); } // example delegation for Flush()
    // ... on and on for all the other members of Stream
} 
```

Perhaps a better approach would be a continuation passing style where the code that uses the Stream is passed in as an delegate:

```
public void Load(string term, Action<Stream> action)
{
    var url = CreateSearchUrl(term);

    var webRequest = (HttpWebRequest)WebRequest.Create(url);

    using (var webResponse = webRequest.GetResponse())
    using (var responseStream = webResponse.GetResponseStream())
    using (var gzipStream = new GZipStream(responseStream, CompressionMode.Decompress))
    {
        action(gzipStream);
    }
} 
```

Now the caller simply passes in what should be done with the Stream. In the following the length is printed to the console:

```
Load("test", stream => Console.WriteLine("Length=={0}", stream.Length)); 
```

One final note: In case you're not aware, HTTP has built-in support for compression. See [Wikipedia](http://en.wikipedia.org/wiki/HTTP_compression) for more details. The HttpWebRequest has built-in support for HTTP compression via the [AutomaticDecompression](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.automaticdecompression.aspx) property. Using the HTTP compression basically makes the compression transparent to your code and also works better with HTTP tooling (browsers, fiddler, etc).

# python - 为什么我们要将一个类传递给一个函数

> ID：10442063
> 
> 赞同：0
> 
> 时间：2012-05-04T02:54:30.677
> 
> 标签：python, class

由于类是 Python 中的一等对象，我们可以将它们传递给函数。例如，这是我遇到的一些代码：

```
ChatRouter = sockjs.tornado.SockJSRouter(ChatConnection, '/chat') 
```

其中`ChatConnection`是在同一模块中定义的类。我想知道这种做法的常见用户案例是什么？

另外，在上面的代码示例中，为什么变量“ChatRouter”是大写的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:03:06.203

传递类可能对定制和灵活的代码很有用。该函数可能想要创建给定类的多个对象，因此将一个类传递给它是实现它的一种方法（另一种方法是传递某种工厂函数）。例如，在您给出的示例中，`SockJSRouter`最终将连接类传递给`Session`，然后使用它来构造一个新的连接对象。

至于`ChatRouter`，我想这只是一个命名约定。虽然建议 Python 程序员遵循 PEP 8，而且很多人都这样做，但这并不是严格要求，并且一些项目采用不同的命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T03:08:30.190

~~在不知道有关该代码的任何其他信息的情况下，我猜想：~~

好的，我看了一下源码。这条线以下是不正确的，尽管是合理的。基本上，代码所做的是`ChatConnection`用来创建一个`Session`做其他事情的对象。`ChatRouter`只是一个命名错误的常规变量，而不是类名。

* * *

`SockJSRouter`是一个接受另一个类（调用它`connection`）和一个字符串作为参数的类。它用于`__new__`创建的不是 的实例`SockJSRouter`，而是使用（可能是子类）的特殊类的实例`connection`。这可以解释为什么`ChatRouter`要大写，因为它是一个类名。返回的类将用于`connection`概括很多事情，例如`connection`负责处理通过网络或其他方式进行的通信。因此，通过使用不同`connection`的 s，可以处理不同的协议。`ChatConnection`可能是 IRC 上的一些层。

所以基本上，常见的用例（也可能在这里使用）是泛化，而 BactrianCase 名称的原因是因为它是一个类（只是在运行时生成的一个）。

# java - 从谷歌静态地图中的像素坐标获取经度/纬度

> ID：10442066
> 
> 赞同：9
> 
> 时间：2012-05-04T02:54:40.617
> 
> 标签：java, google-maps, google-maps-api-2

我有一个使用谷歌静态地图的 JAVA 项目，经过数小时的工作，我无法正常工作，我会解释一切，希望有人能帮助我。

我使用的是静态地图（480 像素 x 480 像素），地图的中心是 lat=47，lon=1.5，缩放级别是 5。

现在我需要的是当我点击这个静态地图上的一个像素时能够得到纬度和经度。经过一番搜索，我发现我应该使用墨卡托投影（对吗？），我还发现每个缩放级别都会使水平和垂直维度的精度翻倍，但我找不到正确的公式来链接像素、缩放级别和纬度/隆...

我的问题只是从像素中获取纬度/经度，了解中心的坐标和像素以及缩放级别......

先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:45:27.733

使用墨卡托投影。

如果您投影到`[0, 256)`by的空间`[0,256]`：

```
LatLng(47,=1.5) is Point(129.06666666666666, 90.04191318303863) 
```

在缩放级别 5，这些等同于像素坐标：

```
x = 129.06666666666666 * 2^5 = 4130
y = 90.04191318303863 * 2^5 = 2881 
```

因此，地图的左上角位于：

```
x = 4130 - 480/2 = 4070
y = 2881 - 480/2 = 2641

4070 / 2^5 = 127.1875
2641 / 2^5 = 82.53125 
```

最后：

```
Point(127.1875, 82.53125) is LatLng(53.72271667491848, -1.142578125) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:47:57.357

Google-maps 使用地图瓦片来有效地将世界划分为 256^21 像素瓦片的网格。基本上，这个世界是由 4 个最小缩放的瓷砖组成的。当您开始缩放时，您会得到 16 个图块，然后是 64 个图块，然后是 256 个图块。它基本上是一个四叉树。因为这样的 1d 结构只能展平 2d，所以您还需要 Mercantor 投影或转换为 WGS 84。这是一个很好的资源[Convert long/lat to pixel x/y on a given picture](https://stackoverflow.com/questions/2651099/convert-long-lat-to-pixel-x-y-on-a-given-picure)。谷歌地图中有将经纬度对转换为像素的功能。这是一个链接，但它说瓷砖只有 128x128：http: [//michal.guerquin.com/googlemaps.html](http://michal.guerquin.com/googlemaps.html)。

1.  [Google Maps V3 - 如何计算给定边界的缩放级别](https://stackoverflow.com/questions/6048975/google-maps-v3-how-to-calculate-the-zoom-level-for-a-given-bounds)
2.  [http://www.physicsforums.com/showthread.php?t=455491](http://www.physicsforums.com/showthread.php?t=455491)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-07T23:58:15.533

基于上面 Chris Broadfoot 的答案中的数学以及[Stack Overflow 上的 Mercator Projection 的其他一些代码](https://stackoverflow.com/questions/12507274/how-to-get-bounds-of-a-google-static-map)，我得到了这个

```
public class MercatorProjection implements Projection {

    private static final double DEFAULT_PROJECTION_WIDTH = 256;
    private static final double DEFAULT_PROJECTION_HEIGHT = 256;

    private double centerLatitude;
    private double centerLongitude;
    private int areaWidthPx;
    private int areaHeightPx;
    // the scale that we would need for the a projection to fit the given area into a world view (1 = global, expect it to be > 1)
    private double areaScale;

    private double projectionWidth;
    private double projectionHeight;
    private double pixelsPerLonDegree;
    private double pixelsPerLonRadian;

    private double projectionCenterPx;
    private double projectionCenterPy;

    public MercatorProjection(
            double centerLatitude,
            double centerLongitude,
            int areaWidthPx,
            int areaHeightPx,
            double areaScale
    ) {
        this.centerLatitude = centerLatitude;
        this.centerLongitude = centerLongitude;
        this.areaWidthPx = areaWidthPx;
        this.areaHeightPx = areaHeightPx;
        this.areaScale = areaScale;

        // TODO stretch the projection to match to deformity at the center lat/lon?
        this.projectionWidth = DEFAULT_PROJECTION_WIDTH;
        this.projectionHeight = DEFAULT_PROJECTION_HEIGHT;
        this.pixelsPerLonDegree = this.projectionWidth / 360;
        this.pixelsPerLonRadian = this.projectionWidth / (2 * Math.PI);

        Point centerPoint = projectLocation(this.centerLatitude, this.centerLongitude);
        this.projectionCenterPx = centerPoint.x * this.areaScale;
        this.projectionCenterPy = centerPoint.y * this.areaScale;
    }

    @Override
    public Location getLocation(int px, int py) {
        double x = this.projectionCenterPx + (px - this.areaWidthPx / 2);
        double y = this.projectionCenterPy + (py - this.areaHeightPx / 2);

        return projectPx(x / this.areaScale, y / this.areaScale);
    }

    @Override
    public Point getPoint(double latitude, double longitude) {
        Point point = projectLocation(latitude, longitude);

        double x = (point.x * this.areaScale - this.projectionCenterPx) + this.areaWidthPx / 2;
        double y = (point.y * this.areaScale - this.projectionCenterPy) + this.areaHeightPx / 2;

        return new Point(x, y);
    }

    // from https://stackoverflow.com/questions/12507274/how-to-get-bounds-of-a-google-static-map

    Location projectPx(double px, double py) {
        final double longitude = (px - this.projectionWidth/2) / this.pixelsPerLonDegree;
        final double latitudeRadians = (py - this.projectionHeight/2) / -this.pixelsPerLonRadian;
        final double latitude = rad2deg(2 * Math.atan(Math.exp(latitudeRadians)) - Math.PI / 2);
        return new Location() {
            @Override
            public double getLatitude() {
                return latitude;
            }

            @Override
            public double getLongitude() {
                return longitude;
            }
        };
    }

    Point projectLocation(double latitude, double longitude) {
        double px = this.projectionWidth / 2 + longitude * this.pixelsPerLonDegree;
        double siny = Math.sin(deg2rad(latitude));
        double py = this.projectionHeight / 2 + 0.5 * Math.log((1 + siny) / (1 - siny) ) * -this.pixelsPerLonRadian;
        Point result = new org.opencv.core.Point(px, py);
        return result;
    }

    private double rad2deg(double rad) {
        return (rad * 180) / Math.PI;
    }

    private double deg2rad(double deg) {
        return (deg * Math.PI) / 180;
    }
} 
```

这是原始答案的单元测试

```
public class MercatorProjectionTest {

    @Test
    public void testExample() {

        // tests against values in https://stackoverflow.com/questions/10442066/getting-lon-lat-from-pixel-coords-in-google-static-map

        double centerLatitude = 47;
        double centerLongitude = 1.5;

        int areaWidth = 480;
        int areaHeight = 480;

        // google (static) maps zoom level
        int zoom = 5;

        MercatorProjection projection = new MercatorProjection(
                centerLatitude,
                centerLongitude,
                areaWidth,
                areaHeight,
                Math.pow(2, zoom)
        );

        Point centerPoint = projection.projectLocation(centerLatitude, centerLongitude);
        Assert.assertEquals(129.06666666666666, centerPoint.x, 0.001);
        Assert.assertEquals(90.04191318303863, centerPoint.y, 0.001);

        Location topLeftByProjection = projection.projectPx(127.1875, 82.53125);
        Assert.assertEquals(53.72271667491848, topLeftByProjection.getLatitude(), 0.001);
        Assert.assertEquals(-1.142578125, topLeftByProjection.getLongitude(), 0.001);

        // NOTE sample has some pretty serious rounding errors
        Location topLeftByPixel = projection.getLocation(0, 0);
        Assert.assertEquals(53.72271667491848, topLeftByPixel.getLatitude(), 0.05);
        // the math for this is wrong in the sample (see comments)
        Assert.assertEquals(-9, topLeftByPixel.getLongitude(), 0.05);

        Point reverseTopLeftBase = projection.projectLocation(topLeftByPixel.getLatitude(), topLeftByPixel.getLongitude());
        Assert.assertEquals(121.5625, reverseTopLeftBase.x, 0.1);
        Assert.assertEquals(82.53125, reverseTopLeftBase.y, 0.1);

        Point reverseTopLeft = projection.getPoint(topLeftByPixel.getLatitude(), topLeftByPixel.getLongitude());
        Assert.assertEquals(0, reverseTopLeft.x, 0.001);
        Assert.assertEquals(0, reverseTopLeft.y, 0.001);

        Location bottomRightLocation = projection.getLocation(areaWidth, areaHeight);
        Point bottomRight = projection.getPoint(bottomRightLocation.getLatitude(), bottomRightLocation.getLongitude());
        Assert.assertEquals(areaWidth, bottomRight.x, 0.001);
        Assert.assertEquals(areaHeight, bottomRight.y, 0.001);
    }

} 
```

如果您（比如说）使用航空摄影，我觉得该算法没有考虑墨卡托投影的拉伸效果，因此如果您感兴趣的区域不是相对靠近赤道，它可能会失去准确性。我想您可以通过将 x 坐标乘以中心的 cos（纬度）来近似它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T05:45:33.193

值得一提的是，您实际上可以让谷歌地图 API 为您提供像素坐标的纬度和经度坐标。

虽然它在 V3 中有点令人费解，但这里有一个如何做到这一点的示例。
（注意：这是假设您已经有一张地图和要转换为 lat&lng 坐标的像素顶点）：

```
let overlay  = new google.maps.OverlayView();
overlay.draw = function() {};
overlay.onAdd = function() {};
overlay.onRemove = function() {};
overlay.setMap(map);

let latlngObj = overlay.fromContainerPixelToLatLng(new google.maps.Point(pixelVertex.x, pixelVertex.y);

overlay.setMap(null); //removes the overlay 
```

希望对某人有所帮助。

更新：我意识到我做了这两种方式，两者仍然使用相同的方式来创建覆盖（所以我不会复制那个代码）。

```
let point = new google.maps.Point(628.4160703464878, 244.02779437950872);
console.log(point);
let overlayProj = overlay.getProjection();
console.log(overlayProj);
let latLngVar = overlayProj.fromContainerPixelToLatLng(point);
console.log('the latitude is: '+latLngVar.lat()+' the longitude is: '+latLngVar.lng()); 
```

# iphone - 批准后出错：找不到适用于应用程序的有效“aps-environment”权利字符串

> ID：10442074
> 
> 赞同：1
> 
> 时间：2012-05-04T02:55:42.333
> 
> 标签：iphone

我的应用程序已获得批准（未来发布日期），但当我尝试使用促销代码下载时，我收到此错误“没有为应用程序找到有效的‘aps-environment’权利字符串”我做错了什么？我需要更改某些内容并重新提交吗？提前感谢您对此问题的任何见解。杰森

# c++ - CRT 内存分配

> ID：10442078
> 
> 赞同：0
> 
> 时间：2012-05-04T02:55:55.447
> 
> 标签：c++, memory-management, crt, defragmentation, contiguous

我们的应用程序分配几何坐标的大 std::vector<> -
它必须是一个向量（这意味着连续），因为它最终发送到 OpenGL 以绘制模型。
Open GL 可以处理连续数据。
在某些时候分配失败，这意味着保留内存会引发 std::bad_alloc 异常。但是，此时仍有大量内存可用。
问题是无法分配**连续块。**
所以第一个两个问题是：

*   有没有办法控制 CRT 分配内存的方式？或者一种对其进行碎片整理的方法（疯狂的想法））..

*   也许有一种方法可以检查运行时是否可以分配一定大小的内存块（不使用 try/catch）。

上述问题通过将这个大向量分割成几个向量并为每个向量调用一次 OpenGL 得到了部分解决。
然而，如何定义每个较小向量的大小仍然存在一个问题——如果有很多大小相当小的向量，我们几乎可以肯定适合内存，但会有很多对 OpenGL 的调用，这会减慢可视化速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:19:29.333

You can't go beyond ~600MiB of contiguous memory in a 32-bit address space. Compile as 64-bit and run it on a 64-bit platform to get around this (hopefully forever).

That said, if you have such demanding memory requirements, you should look into a custom allocator. You can use a disk-backed allocation that will appear to the vector as memory-based storage. You can mmap the file for OpenGL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:31:11.190

如果堆碎片确实是您的问题，并且您在 Windows 上运行，那么您可能想在[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366750(v =vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366750(v=vs.85).aspx)

# jquery - 简单的 JQuery 语法问题

> ID：10442081
> 
> 赞同：0
> 
> 时间：2012-05-04T02:56:11.947
> 
> 标签：jquery, variables, syntax

我的代码中有一部分可以完美运行

```
var image_mini = $('#map_mini');
var image_full = $('#map_full');

function state_change(data) { 
   // This is just part of code which show idea
   image_mini.mapster(data.state);
}

// This is full block of code, works correct
$("#map_full").mapster(
     $.extend({}, options, {
         onStateChange: state_change
     })
); 
```

现在我需要增强 state_change 函数，以便它使用图像变量填充接收第二个参数，该变量将用于直接写入的 image_mini 的 insted。

像这样（下面的代码是错误的），但使用正确的语法代码：

```
function state_change(data, working_image) {  
  working_image.mapster(...);
}

$("#map_full").mapster(
     $.extend({}, options, {
         onStateChange: state_change, image_mini
     })
); 
```

我觉得我更笨拙，但我还没有找到在这样的 onStateChange 中传递两个变量的正确 sintax 的例子......我尝试了一些想法，但它没有正常工作。请帮忙！

=============================== 稍后添加：

看起来我的想法没有被正确理解，所以我写了更多代码：

```
var image_mini = $('#map_mini');
var image_full = $('#map_full');

function state_change(data, working_image) {  
  working_image.mapster(data.state);
}

$("#map_full").mapster(
     $.extend({}, options, {
         onStateChange: state_change, image_mini
     })
);
$("#map_mini").mapster(
     $.extend({}, options, {
         onStateChange: state_change, image_full
     })
); 
```

这就是我想要的想法：两个图像都必须是交联的，因此对一个图像的更改将同时显示在它们两个上。

```
onStateChange: state_change, image_full 
```

这是错误的，我询问该任务的正确语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:47:47.297

它可能不那么漂亮，但您可以使用以下方法执行此操作：

```
$.extend({}, options, {
    onStateChange : function (e) {
        state_change(e, image_mini);
    }
}) 
```

### 编辑

为了解释，您的第一个版本的代码如下所示：

```
function state_change(data) {
    // ...
}
// ...
$.extend({}, options, {
    onStateChange : state_change
}) 
```

这里发生的是，每当`onStateChange`触发时，它都会调用该`state_change`函数。如果这遵循一般的 jQuery 用语，那么该函数将 jQuery 事件对象作为函数的第一个参数传递。在这种情况下，该事件对象将解析为函数声明中的`data`参数。`state_change`

我上面的代码遵循相同的逻辑：

```
onStateChange : function (e) {
} 
```

因此，当`onStateChange`触发时，它将调用该匿名函数，并将事件对象作为第一个参数传入。这将`e`在处理函数内部解析。所以：

```
onStateChange : function (e) {
    state_change(e, image_mini);
} 
```

... 对事件对象执行几乎相同的操作。当`onStateChange`事件触发时，处理程序将事件对象作为`e`，然后将其传递给对 的调用`state_change`。`data`结果将在内部解决`state_change`，并且不会改变您使用原始功能的方式。

然而，通过这种方式，我们可以自由地将额外的参数传递到对 的调用中`state_change`，比如 throw in`image_mini`或其他什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:09:18.457

您正在将 image_mini 作为您定义的 JSON 对象中的新项目放入。那是行不通的。如果您希望它引用地图，您应该能够将该参数移动到 state_change 函数的第一行

因为 jQuery 将对问题进行基本的函数调用，所以你应该有这样的东西：

```
 function state_change(data) {
    var image_mini = $("#mapMini");
    fullStateChange( data, image_mini );
}

function fullStateChange( data, image_mini ) {
    // Do stuffs here

    // This is just part of code which show idea
    image_mini.mapster(data.state);
}

// This is full block of code, works correct
$("#map_full").mapster(
      $.extend({}, options, {
            onStateChange: state_change
      })
); 
```

# python - 结合关系

> ID：10442082
> 
> 赞同：2
> 
> 时间：2012-05-04T02:56:14.703
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我有一个模型`Zone`，一个模型`Entity`和一个模型`Transit`。`Transit`最小定义为：

```
class Entity(db.Model):
    __tablename__ = 'entities'
    id = db.Column(db.Integer, primary_key=True)
    contained_by = db.Column(db.Integer, db.ForeignKey('entities.id'))
    contains = db.relationship('Entity', backref='container')
    discriminator = db.Column('type', db.String(50))
    __mapper_args__ = {'polymorphic_on': discriminator}

class Zone(Entity):
    __mapper_args__ = {'polymorphic_identity': 'zones'}
    routes = db.relationship('Transit')
    (stuff goes here)

class Transit(db.Model):
    __tablename__ = "transits"
    start = db.Column(db.Integer, db.ForeignKey('zones.id'))
    end = db.Column(db.Integer, db.ForeignKey('zones.id')) 
```

`Zone`还有一些关于距离和防御性的信息，但这与此无关。

*   首先，由于`Zone`是`Entity`使用单表继承的子类，我可以引用`zones.id`吗？
*   其次，财产会合并`Zone.routes`吗？`Transit.start``Transit.end`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:36:09.250

1.  不，您需要使用表名，在您的情况下（单表继承）是`entities`
2.  不，这些不会被合并。您可以创建两个关系，并有一个（混合）属性将两者结合起来，但这仅用于阅读目的，因为当您想修改此属性（例如， add `Transits`）时，您仍然需要同时指定两者边（`start`和`end`）。
3.  我不确定我是否理解这里的问题

**update-1：**根据评论中的要求，Concrete-Table 继承代码如下：

```
class Zone(Entity):
    __mapper_args__ = {'polymorphic_identity': 'zones'}
    __tablename__ = "zones"
    id          = Column(Integer, ForeignKey('entities.id'), primary_key=True)
    @property
    def transits(self):
        return self.transits_from_here + self.transits_to_here

class Transit(Base):
    __tablename__ = "transits"
    id          = Column(Integer, primary_key=True)
    start = Column(Integer, ForeignKey('zones.id'))
    end = Column(Integer, ForeignKey('zones.id'))

    s_zone = relationship(Zone, primaryjoin=(start==Zone.id), backref="transits_from_here")
    e_zone = relationship(Zone, primaryjoin=(end==Zone.id), backref="transits_to_here") 
```

# c# - 尝试反序列化 JSON 时发生 InvalidCastException

> ID：10442083
> 
> 赞同：1
> 
> 时间：2012-05-04T02:56:29.120
> 
> 标签：c#, json, windows-phone-7

我尝试像下面这样反序列化一个 JSON（93817 和 935812 之类的数字是从服务器动态生成的。不能硬编码。）：

```
{   "status":"1",               
"list":{      
 "93817":{         "item_id":"93817",         
                   "url":"http://url.com",         
                   "title":"Page Title",         
                   "time_updated":"1245626956",                
                   "time_added":"1245626956",                
                   "tags":"comma,seperated,list",         
                    "state":"0"                       
          },      
 "935812":{         "item_id":"935812",         
                    "url":"http://google.com",        
                    "title":"Google",         
                    "time_updated":"1245626956",       
                    "time_added":"1245626956",      
                    "tags":"comma,seperated,list",         
                    "state":"1"                     
  }   }} 
```

下面是反序列化的代码：

```
responseGetList =    e.Result.ToString(); //responseGetList is the JSON string

MemoryStream ms = new MemoryStream( Encoding.Unicode.GetBytes(responseGetList));

DataContractJsonSerializer serializer =
    new DataContractJsonSerializer( typeof(List<ResponseItem>) );

ResponseItem li = (ResponseItem)serializer.ReadObject(ms); 
```

以下是 ResponseItem 类：

```
namespace whatever
{
    [DataContract]
    public class ResponseItem
    {
        [DataMember(Name = "status")]
        string status;
        public string Status
        {
            get { return status; }
            set { status = value; }
        }
        [DataMember(Name = "list")]
        List<ListItem> list;
        private List<ListItem> List
        {
            get { return list; }
            set { list = value; }
        }
    }
    public class ListItem
    {
        [DataMember]
        List<Article> listArticle;
        public List<Article> ListArticle
        {
            get { return listArticle; }
            set { listArticle = value; }
        }
    }
}

public class Article
{
    [DataMember(Name = "item_id")]
    string item_id;
    public string Item_id
    {
        get { return item_id; }
        set { item_id = value; }
    }
    [DataMember(Name = "url")]
    string url;
    public string Url
    {
        get { return url; }
        set { url = value; }
    }
    [DataMember(Name = "title")]
    string title;
    public string Title
    {
        get { return title; }
        set { title = value; }
    }
    [DataMember(Name = "time_updated")]
    string time_updated;
    public string Time_updated
    {
        get { return time_updated; }
        set { time_updated = value; }
    }
    [DataMember(Name = "time_added")]
    string time_added;
    public string Time_added
    {
        get { return time_added; }
        set { time_added = value; }
    }
    [DataMember(Name = "tags")]
    string tags;
    public string Tags
    {
        get { return tags; }
        set { tags = value; }
    }
    [DataMember(Name = "state")]
    string state;
    public string State
    {
        get { return state; }
        set { state = value; }
    }
} 
```

我在 1 上得到 InvalidCastException `ataContractJsonSerializer serializer = new DataContractJsonSerializer( typeof(List<ResponseItem>) );`，我认为这是一个 JSON-Object 映射问题。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:59:20.477

尝试使用 NewtonSoft 的 LINQ to Json，这是一种更简洁的方法来反序列化 json 字符串

```
ClassName class= new ClassName();
objectname = JsonConvert.DeserializeObject<ClassName>(responseGetList); 
```

使用 Json2C# 创建您需要能够直接反序列化为对象的 ClassName。

您可以使用对象。**__** 调用任何结果：示例代码：

object.list.(93817(你必须用 JsonProperty 来转换它，因为 c# 不允许方法只有数字)).item_id = 93817

清洁工：object.list.thenameyougavethemethod.item_id

祝你好运，如果您有更多问题，请添加评论

编辑：我解析了 json 字符串并将 JsonProperties 添加到您的特定 Json 字符串中；只需下载 NewtonSoft .dll 并且不要忘记添加对您项目的引用...

```
public class id93817
{
    public string item_id { get; set; }
    public string url { get; set; }
    public string title { get; set; }
    public string time_updated { get; set; }
    public string time_added { get; set; }
    public string tags { get; set; }
    public string state { get; set; }
}

public class id935812
{
    public string item_id { get; set; }
    public string url { get; set; }
    public string title { get; set; }
    public string time_updated { get; set; }
    public string time_added { get; set; }
    public string tags { get; set; }
    public string state { get; set; }
}

public class List
{
    [JsonProperty("93817")]
    public id93817 { get; set; }
    [JsonProperty("935812")]
    public id935812 { get; set; }
}

public class RootObject
{
    public string status { get; set; }
    public List list { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T07:46:59.400

通过阅读 RIL# (http://rilsharp.codeplex.com/) 的源代码解决了问题。问题主要是映射问题。使用**Dictionary**是关键解决方案：

```
[DataContract]
public class ResponseItem
{
    [DataMember(Name = "status")]
    public ListStatus Status { get; set; }

    [DataMember(Name = "since")]
    public double Since { get; set; }

    [DataMember(Name = "list")]
    public Dictionary<string, RilListItem> items { get; set; }

    public DateTime SinceDate
    {
        get
        {
            return UnixTime.ToDateTime(Since);
        }
    } 
```

然后使用 Json.net 对 JSON 进行反序列化：

```
 ResponseItem ri = new ResponseItem();
  ri = JsonConvert.DeserializeObject<ResponseItem>(responseGetList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:17:16.833

尝试切换到 Json.NET 来反序列化对象。它不易出错且易碎（是的，它是开源的并且可以在手机上使用）>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T04:25:20.627

列表中的第一项不正确。您的 JSON 显示“93817”和“935812”，但这些不是您项目的属性。JSON 的第一部分必须是属性名称。您为“列表”做的正确，因为它对应`List`于`ResponseItem`. 将这些数字更改为“listArticle”。我也支持 Shawn Wildermuth 对 JSON.Net 的建议。

在服务器上生成的 JSON 应该以与反序列化相同的方式进行序列化（即：使用相同的框架来（反）序列化）。如果您手动生成 JSON，请不要。你会遇到比你需要或想要的更多的问题。

如果你序列化对象，你应该有以下内容：

```
{   "status":"1",
    "list":{
        "listArticle":{
            "item_id":"93817",         
            "url":"http://url.com",         
            "title":"Page Title",         
            "time_updated":"1245626956",                
            "time_added":"1245626956",                
            "tags":"comma,seperated,list",         
            "state":"0"                       
        },
        "listArticle":{
            "item_id":"935812",         
            "url":"http://google.com",        
            "title":"Google",         
            "time_updated":"1245626956",       
            "time_added":"1245626956",      
            "tags":"comma,seperated,list",         
            "state":"1"
        }
    }
} 
```

# rally - 从 Rally 描述字段中删除 html 标记

> ID：10442084
> 
> 赞同：1
> 
> 时间：2012-05-04T02:56:35.623
> 
> 标签：rally

有没有一种快速的方法可以从字符串中删除 html 标记？问题是我正在将故事中的描述复制到剪贴板，我们只需要纯文本，但当然描述的值会被标记。所以我想转...

```
<SPAN style="FONT-FAMILY: 'Calibri','sans-serif'; COLOR: #1f497d; FONT-SIZE: 11pt; mso-fareast-font-family: Calibri; mso-fareast-theme-font: minor-latin; mso-ansi-language: EN-US; mso-fareast-language: EN-US; mso-bidi-language: AR-SA">text text text</SPAN> 
```

进入

```
text text text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:05:48.777

如果您使用 ExtJS（或 Rally App SDK 2.x）：

```
Ext.util.Format.stripTags(...); 
```

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.util.Format-method-stripTags](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.util.Format-method-stripTags) [https://rally1.rallydev.com/apps/2.0p/doc/# !/api/Ext.util.Format-method-stripTags](https://rally1.rallydev.com/apps/2.0p/doc/#!/api/Ext.util.Format-method-stripTags)

# javascript - .prop() 和 twitter 引导模式对话框

> ID：10442086
> 
> 赞同：2
> 
> 时间：2012-05-04T02:56:43.720
> 
> 标签：javascript, jquery, twitter-bootstrap

建议使用`.prop()`而不是`.attr()`设置`disabled`属性，但我发现`.prop()`并非在所有情况下都有效。

例如在 twitter 引导模式窗口中：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

按“启动演示模式”按钮并在控制台中运行：

```
$('#myModal .btn').prop('disabled', true); 
```

那么按钮将不会被禁用。但是如果你运行：

```
$('#myModal .btn').attr('disabled', true); 
```

那么它们将被成功禁用。

任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T03:38:12.300

这个问题突出了 .prop() 和 .attr() 之间的混淆。.attr() 方法直接处理 HTML 元素的属性，而 .prop() 处理底层 JavaScript 元素的 JavaScript 属性。

例如，虽然`$('#myInput').attr('disabled', true)`和`$('#myInput').prop('disabled', true)`具有相同的影响，但它们实际上以两种截然不同的方式运作。

`$('#myInput').attr('disabled', true)`相当于`document.getElementById('myInput').setAttribute('disabled', 'disabled');`

并且`$('#myInput').prop('disabled', true)`将相当于`document.getElementById('myInput').disabled = true;`

虽然后一个示例具有在元素上创建“禁用”属性的附加效果，但这是`disabled`浏览器本机处理的输入属性的一个特性。

您的示例的问题是您正在尝试对在其 JavaScript 对象上`$('#myModal .btn')`没有本机属性的锚元素进行操作。`disabled`因此，设置`.disabled = true`只不过是设置`.foo = 'bar'`。浏览器本身不会为这些元素添加属性。

我希望这是有道理的。如果需要更多说明，我稍后会进行编辑。

# ruby-on-rails - 验证 accept_nested_attributes_for 模型的唯一性

> ID：10442088
> 
> 赞同：3
> 
> 时间：2012-05-04T02:57:06.870
> 
> 标签：ruby-on-rails, validation

```
class User < ActiveRecord::Base
  has_many :friends
  accepts_nested_attributes_for :friends
end

class Friend < ActiveRecord::Base
  belongs_to :user
end 
```

用户将通过 REST API 不断添加朋友：

```
{ "user": {
        "name": "Peter",
        "friends_attributes": [
            { "name": "Paul" },
            { "name": "Mary" }
        ]
    }
} 
```

稍后，用户将添加更多朋友并调用相同的 API：

```
{ "user": {
        "name": "Peter",
        "friends_attributes": [
            { "name": "Paul" },
            { "name": "Mary" },
            { "name": "John" }
        ]
    }
} 
```

现在，我应该如何编写验证：

*   只添加新朋友（即约翰）
*   不复制现有的（即保罗，玛丽）
*   不要让整个 API 调用失败

# php - 使用 flash、php 和 RED5 在服务器上保存视频

> ID：10442092
> 
> 赞同：1
> 
> 时间：2012-05-04T02:58:08.807
> 
> 标签：php, flash, red5

我有一个 PHP 网站，我希望我的访问者（登录用户）记录他们的网络摄像头并将视频保存在服务器上。我编写了流代码，它在 Flash 和 RED5 之间运行良好。唯一的问题是，我应该用什么名称保存视频？

一种可能的方法是，当 PHP 页面加载时，我输出登录用户的用户名并将其传递到 Flash，Flash 将其传递给 RED5 服务器，然后 RED5 服务器使用该用户名创建视频。我的用户将只有 1 个视频/帐户，因此效果很好。

有没有比这个更好的方法？我的计划有什么缺点吗？

# c# - 如何通过在 C# 中调用存储过程将 xml 数据从 URL 插入 SQL Server 2008 数据库

> ID：10442093
> 
> 赞同：2
> 
> 时间：2012-05-04T02:58:09.290
> 
> 标签：c#, sql-server, xml, stored-procedures

我是初学者，我想从 Zoho Crm 获取数据，然后通过调用 C# 中的存储过程将其插入 SQL Server 数据库

我的方式 ：

1.  使用 Zoho API whit URL（效果很好）

2.  用于从上面的 URL 加载XML`XmlDocument`数据（效果很好）

我的代码：

```
XmlDocument doc = new XmlDocument();
doc.Load("https://crm.zoho.com/crm/private/xml/Accounts/getRecords?newFormat=1&authtoken=mytoken&scope=crmapi&lastModifiedTime=2011-05-27%2000:00:00&fromIndex=1482&toIndex=1682"); 
```

现在如何使用存储过程插入数据库？

数据示例：

注意：每行中FL元素的数量可能不同

```
<response uri="/crm/private/xml/Accounts/getRecords">
  <result>
    <Accounts>
      <row no="1">
        <FL val="ACCOUNTID">380198000000068646</FL>
        <FL val="SMOWNERID">380198000000052013</FL>
        <FL val="Account Owner">Mai Tran</FL>
        <FL val="Account Name">Trung Tâm Nghiên Cứu & Phát Triển Chế Biến Dầu Khí</FL>
        <FL val="Website">www.pvpro.com.vn</FL>
        <FL val="Industry">Energy, Oil & Gas</FL>
        <FL val="SMCREATORID">380198000000041003</FL>
        <FL val="Created By">Bach Tran Phuong</FL>
        <FL val="MODIFIEDBY">380198000000041003</FL>
        <FL val="Modified By">Tran Phuong</FL>
        <FL val="Created Time">2011-05-04 09:49:11</FL>
        <FL val="Modified Time">2012-02-24 14:41:48</FL>
        <FL val="Billing Street">4 Nguyen Thong St</FL>
        <FL val="District">Q.3</FL>
        <FL val="City">Hồ Chí Minh</FL>
      </row>
      <row no="2">
        <FL val="ACCOUNTID">380198000000068644</FL>
        <FL val="SMOWNERID">380198000000041003</FL>
        <FL val="Account Owner">Bach Tran Phuong</FL>
        <FL val="Account Name">Tổng Cty Tư Vấn Thiết Kế&lt;/FL>
        <FL val="Phone">6297 1778</FL>
        <FL val="SMCREATORID">380198000000041003</FL>
        <FL val="Created By">Bach Tran Phuong</FL>
        <FL val="MODIFIEDBY">380198000000041003</FL>
        <FL val="Modified By">Tran Phuong</FL>
        <FL val="Created Time">2011-05-04 09:49:11</FL>
        <FL val="Modified Time">2012-02-24 14:40:42</FL>
        <FL val="Billing Street">Parkson Tân Sân Nhất</FL>
        <FL val="District">Tân Bình</FL>
        <FL val="City">Hồ Chí Minh</FL>
        <FL val="Alternative Names">PV Engineering</FL>
      </row>
      <row no="3">
        <FL val="ACCOUNTID">380198000000068642</FL>
        <FL val="SMOWNERID">380198000000052015</FL>
        <FL val="Account Owner">Trang Do Thi</FL>
        <FL val="Account Name">CTY TNHH BẢO HIỂM NHÂN THỌ VIỆT NAM</FL>
        <FL val="Phone">9 101 660</FL>
        <FL val="Account Type">Active</FL>
        <FL val="Industry">Financial Services</FL>
        <FL val="SMCREATORID">380198000000041003</FL>
        <FL val="Created By">Bach Tran Phuong</FL>
        <FL val="MODIFIEDBY">380198000000041003</FL>
        <FL val="Modified By">Tran Phuong</FL>
        <FL val="Created Time">2011-05-04 09:49:11</FL>
        <FL val="Modified Time">2012-04-27 11:02:25</FL>
        <FL val="Billing Street"> Tôn Đức Thắng P.Bến Nghé</FL>
        <FL val="Phone 2">9 101 659</FL>
        <FL val="District">Q.1</FL>
        <FL val="City">Hồ Chí Minh</FL>
        <FL val="Key Contact">Duy Nhật</FL>
        <FL val="Partner Type">Loyal Partner</FL>
        <FL val="Collection">1859353554</FL>
        <FL val="Alternative Names">Việt Nam</FL>
      </row>
      <row no="4">
        <FL val="ACCOUNTID">380198000000068638</FL>
        <FL val="SMOWNERID">380198000000052015</FL>
        <FL val="Account Owner">Trang Do Thi</FL>
        <FL val="Account Name">Cty TNHH Gia Dụng Phương Gia</FL>
        <FL val="SMCREATORID">380198000000041003</FL>
        <FL val="Created By">Bach Tran Phuong</FL>
        <FL val="MODIFIEDBY">380198000000041003</FL>
        <FL val="Modified By">Bach Tran Phuong</FL>
        <FL val="Created Time">2011-05-04 09:49:11</FL>
        <FL val="Modified Time">2012-02-24 13:52:25</FL>
        <FL val="Billing Street">Cao Thang</FL>
        <FL val="District">Q.3</FL>
        <FL val="City">Hồ Chí Minh</FL>
        <FL val="Alternative Names">Home Appliances ltd</FL>
      </row>
    </Accounts>
  </result>
</response> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:52:23.807

**第 1 步**：创建您的存储过程：

```
CREATE PROCEDURE dbo.StoreXmlData (@XmlData XML)
AS BEGIN
    INSERT INTO dbo.YourXmlTable(XmlColumnName)
    VALUES(@XmlData)
END 
```

这假设您使用的是 SQL Server **2005**或更高版本，并且您将 XML 存储在一个真正属于 datatype 的列中`XML`。根据需要调整表和列名称以匹配**您的**情况。

**第 2 步**：从 C# 中，使用标准 ADO.NET 类调用您的存储过程：

```
string sqlStmt = "dbo.StoreXmlData";  // name of your stored procedure

// here, you need to use *YOUR* connection string instead of my demo one...    
using(SqlConnection conn = new SqlConnection("server=.;database=test;integrated security=SSPI;"))
using (SqlCommand cmd = new SqlCommand(sqlStmt, conn))
{
    // make sure to tell ADO.NET you're about to call a stored procedure!
    cmd.CommandType = CommandType.StoredProcedure;

    // define the parameter and set its value
    cmd.Parameters.Add("@YourData", SqlDbType.Xml);
    cmd.Parameters["@YourData"].Value = doc.DocumentElement.InnerXml;

    // standard ADO.NET - open connection, execute query, close connection
    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();
} 
```

这就是全部！

**更新：**好的，所以您实际上希望将 XML 分解为单独的列 - 在这种情况下，您需要在存储过程中执行以下操作：

```
CREATE PROCEDURE dbo.StoreXmlData (@XmlData XML)
AS 
BEGIN
    INSERT INTO dbo.YourDataTable(RowNo, AccountID, OwnerID, AccountOwner)
        SELECT
            RowNo = Acc.value('@no', 'int'),
            AccountID = Acc.value('(FL[@val="ACCOUNTID"])[1]', 'nvarchar(50)'),
            OwnerID = Acc.value('(FL[@val="SMOWNERID"])[1]', 'nvarchar(50)'),
            AccountOwner = Acc.value('(FL[@val="Account Owner"])[1]', 'nvarchar(50)')
            -- and so on to grab all the items you need
        FROM
            @XmlData.nodes('/response/result/Accounts/row') AS Resp(Acc)
END 
```

# c# - 您可以在 SSIS 中重用代码吗？您可以以编程方式更改源/目标吗？

> ID：10442095
> 
> 赞同：3
> 
> 时间：2012-05-04T02:58:17.603
> 
> 标签：c#, sql-server-2008, ssis

我有大约 10 个不同的 csv 文件需要解析和转换并加载到 sql server 中。

我不想为此创建 10 个不同的 ssis 包，是否可以创建一个可以创建 10 个不同实例的单个 SSIS 包，并且只需更改配置文件，以便它从正确的源 csf 文件中提取和保存到正确的表？

是否也可以创建可重用的代码部分，例如通过电子邮件发送有关已加载内容、错误内容和错误内容等的报告。还有其他部分我确信我可以在需要解析的 10 个不同的文件。

另外，修改和部署 ssis 包会很痛苦吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:41:09.260

这个问题与下面的问题相同。我有一个解决方案，它真的帮助了我。希望它会帮助你。

[使用 SSIS 将多个不同的 Excel 工作表 ETL 到 SQL Server 2008 的最佳方法](https://stackoverflow.com/questions/10241472/best-way-to-etl-multiple-different-excel-sheets-into-sql-server-2008-using-ssis/10277948#10277948)

# tfs - TFS 电动工具：外壳扩展：缺少文件/文件夹上的上下文菜单古怪和 TFS 图标

> ID：10442099
> 
> 赞同：34
> 
> 时间：2012-05-04T02:58:33.503
> 
> 标签：tfs, tfs-power-tools

几个月来，我每天都使用[TFS 电动工具。](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)我特别依赖 Windows Shell 扩展。

大约一个星期以来，出现了两个问题：

* * *

# 第一期

每次进入TFS控制下的目录，都要右键点击两次才能看到TFS上下文菜单 ![在此处输入图像描述](../Images/28cd25af1e26b0c798cd64bc1e595737.png)

* * *

# 第 2 期

我在文件/文件夹上漂亮的 TFS 绿色指示器不见了：

![在此处输入图像描述](../Images/5eccd63035956f1059cf9d2c5d857f1a.png)

我已经下载并重新安装了 Power Tools，但我仍然遇到这两个问题。

关于如何解决这个问题的任何想法？

* * *

# **更新**

戴夫通过链接给了我答案。以防万一链接变坏，这里是答案：

1.  打开注册表
2.  转到：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ShellIconOverlayIdentifiers
3.  在任何“Tfs”文件夹前加上数字（“1TfsOverlayAdd”、“2TfsOverlayEdit”等）。这允许他们优先于其他图标覆盖。
4.  重新启动机器或杀死 explorer.exe 并重新启动它

    ![在此处输入图像描述](../Images/b3f6b0f95b92684623e31e4f54cf7f0d.png)

就延迟问题而言，我今天早上没有遇到这种情况；这很奇怪。我质疑覆盖的解决方案也是右键单击的解决方案。

现在一切都恢复正常了，所以我可以走了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T12:21:46.947

可以在[此处](http://blogs.msdn.com/b/youhana/archive/2012/01/09/why-am-i-not-seeing-the-icon-overlays-in-shell-extensions-tfs-power-tools.aspx)解释缺少的绿色图标。这是因为 Windows 对它支持的覆盖图标有限制。有关如何修复它的详细信息在该博客文章中。

在您执行第一次右键单击之前，您在进入文件夹后等待多长时间？`TfsComProviderSvr.exe`检查本地文件夹是否为工作区并注册 shell 扩展有时需要一段时间。

# php - 目录可以单独在页面上加载特定查询吗？

> ID：10442103
> 
> 赞同：0
> 
> 时间：2012-05-04T02:58:51.037
> 
> 标签：php, url, redirect, directory

在 facebook 和许多其他网站上，您会看到诸如 www.facebook.com/username 之类的 URL。像这样的 URL 是如何从 MySQL 数据库中实际加载用户信息的？它显示的实际文件是什么？我会假设它所指的每个用户都没有真正的文件夹。如果我的问题没有意义，您至少可以指出我正确的方向来通过 PHP 设置这样的东西吗？

同样，我希望 example.com/username 加载我的用户资料。这是如何运作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:02:54.403

它都是通过数据库动态加载的。例如，我的 Facebook 名称是“benroux”。在 facebook 的用户表中，会有一个独特的列，比如说，昵称。当我访问 Facebook 时，他们正在解析路径信息并实质上以以下形式调用查询：

```
select * from user where nickname = "{$nickName}" 
```

现在，这是一个过于简化的示例，但我希望它能让您了解这里发生了什么。关键是有 2 种类型的 url vars，the`facebook.com/pagename.php?id=blah`和 restful style path info vars`facebook.com/pagename/var1/var2/`

如果您正在寻找`example.com/benroux`加载我的用户页面，您需要让您的 index.php（我将使用 PHP）加载路径信息（[http://php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)）和然后像我上面描述的那样查询数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:08:24.310

尝试

```
print_r($_SERVER); 
```

你会得到那个参数。然后你只需要拆分它们。就像是

```
$directory = $_SERVER['REQUEST_URI'].split('/')[1]; 
```

所以，放入`$directory`查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:17:09.760

通过使用 apache 的 .htaccess 文件来管理 RewriteEngine，您的所有页面都可以通过 index.php 文件进行汇集。在确认请求的页面实际上不是您打算成为网页默认部分的页面后，您可以使用下面的代码来查找用户帐户。如果未发现用户帐户，则很可能正在访问的页面只是一个 404，然后您可以将其重定向到一个包罗万象的场景

.htaccess 文件

```
RewriteEngine on
RewriteBase /
RewriteRule !\.(xml|js|ico|gif|jpg|png|css|swf|php|txt|html|otf)$ index.php 
```

在确认请求的页面后运行的 php 逻辑，与联系我们页面或最终用户尝试访问的任何典型网页不同。

```
if(preg_match("/^\/(?P<username>[^\/]*)/", $_SERVER['REDIRECT_URL'], $matches)) {
    $result = mysql_query("SELECT * FROM users WHERE username = '" . mysql_real_escape_string($matches['username']) . "'");

    if($user_record = mysql_fetch_row($result)) {
        echo "DO WHATEVER YOUR HEART CONTENTS HERE :)";
    } else {
        header("Location: error-404.php");
    }
} 
```

# java - 什么是正则表达式示例：字符串不应包含任何紧跟相同序列的字符序列？

> ID：10442104
> 
> 赞同：1
> 
> 时间：2012-05-04T02:59:00.583
> 
> 标签：java, regex

在我的程序中，我有一个正则表达式，它确保输入字符串至少有一个字母和一个数字字符，长度在 2 到 10 之间。

```
Pattern p = Pattern.compile("^(?=.*\\d)(?=.*[A-Za-z])[A-Za-z0-9]{2,10}$"); 
```

根据新要求，字符串也不应包含任何紧跟相同序列的字符序列。我搜索了很多，但无法弄清楚。你能帮忙吗？或者指向我的任何 URL/文档？

* * *

非常感谢您的回复。

要求：字符串不得包含任何紧跟相同序列的字符序列。

我认为要求不明确。

我不确定“12aardvark”是否有效，因为 - 1\. 有重复的“a”。与字符串“11abcdefg”相同。2\. 有重复的“ar” 3\. 但是“ar”后面没有紧跟相同的序列。中间有“dv”。

我认为，字符串“12ardvark”和“12aardvark”不应该通过验证，因为它有重复的字符序列：“ar”，尽管它后面没有紧跟相同的序列。

“fofo123”或“ab1212”不应该肯定通过，因为“fo”（只有 2 个字符）后面紧跟着相同的序列。

您对需求的假设是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T05:09:36.967

[单一的正则表达式并不是每个字符串验证问题的答案。](https://stackoverflow.com/questions/10298776/regular-expression-for-validating-username/10300457#10300457)

使用基本的字符串函数和多个更小的正则表达式更具可读性。（为什么要尝试使用正则表达式检查字符串的长度，什么时候`length(pwd)`会做同样的事情？）

下面是一些可以很好地转换为 Java 的 Python 代码：

```
import re
def validate_password(pwd):
    # return true if valid or false is invalid.

    if ( len(pwd) < 2 or len(pwd) > 10 ):
        print "Password %s : Failed length requirement" % pwd
        return False
    if ( re.search(r"\d", pwd) == None ):
        print "Password %s : must contain at least one number" % pwd
        return False     
    if ( re.search(r"[a-zA-Z]", pwd) == None ):
        print "Password %s : must contain at least one alphabetical character" % pwd
        return False
    if ( re.search(r"(...+)\1", pwd) != None ):
        print "Password %s : must not contain any repeating substrings of three characters or more" % pwd
        return False

    print "Password %s is OK" % pwd
    return True

test_pwds = [ "1", "123", "aardvark", "12ardvark", "12aardvark", "foofoofoo1" ]

for pwd in test_pwds:
    validate_password (pwd) 
```

测试输出：

```
Password 1 : Failed length requirement
Password 123 : must contain at least one alphabetical character
Password aardvark : must contain at least one number
Password 12ardvark is OK
Password 12aardvark is OK
Password foofoofoo1 : must not contain any repeating substrings of three characters or more 
```

使用一系列小测试而不是一个大测试来验证输入有几个好处：

1.  更容易理解。
2.  更容易调试。
3.  以后更容易维护。（想象一下你的老板增加了另一个要求，即密码中必须至少出现两个符号。）
4.  您可以告诉用户他们的密码失败的*标准*，而不是像“您的密码必须满足`giant list of criteria`”这样的通用消息。

# c# - 一个可执行文件如何在多个用户同时使用同一个程序的情况下正常运行而不会导致程序崩溃？

> ID：10442105
> 
> 赞同：2
> 
> 时间：2012-05-04T02:59:01.367
> 
> 标签：c#

我不必为多个用户创建一个可执行文件，我想知道如何让程序知道该类的这个实例是一个新用户输入，或者更确切地说，程序应该从一个干净的输入输入开始要处理的程序。例如，假设我创建了照片上传程序，并且我有多个用户同时使用该程序。程序如何知道这个文件是给一个用户的，而另一个是给另一个用户的。这与线程有关吗？或者这只是创建非静态变量的简单案例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:02:13.700

程序的单独实例不相互共享*任何东西*（除了像文件系统这样的真正的全局资源）。

`static`字段是每个 AppDomain，而不是每个计算机。

# java - 在 Java 中使用文本文件中的 \t

> ID：10442106
> 
> 赞同：0
> 
> 时间：2012-05-04T02:59:09.240
> 
> 标签：java

大家好，我对编码很陌生，因为我一个月前才开始上学。我们的项目是构建一个游戏。对于我的游戏，我有从文本文件中读取到数组中的问题。我用 \t 和 \n 更改了选项卡和新行来格式化它。当我将代码复制粘贴到 System.out.println 中时，它可以完美运行。但是，当我尝试使用文本文件执行此操作时，它的输出与我使用 \t 和 \n 输入的完全一样，请提供任何帮助：)

**示例文本文件（只有一行）**

> 通常如何描述文字游戏？\n\t\tA) Pan\t\t \t\t\tB) Pin\n\t\tC) Pen\t\t \t\t\tD) Pun

**输出 if put into print 语句**

> 通常如何描述文字游戏？
> A) 盘 B) 针
> C) 笔 D) 双关

**列出代码的输出**

> 通常如何描述文字游戏？\n\t\tA) Pan\t\t \t\t\tB) Pin\n\t\tC) Pen\t\t \t\t\tD) Pun

```
**import java.util.Scanner;
import java.io.*;
public class ImportFile {
    public static void main(String[] args) throws Exception{
        Scanner easyfile = new Scanner(new File("src/EasyQuestions.txt"));
        System.out.println(easyfile.nextLine());
    }
}** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:09:12.730

\n 和 \t 是 Java 字符串中使用的转义序列，分别表示换行符和制表符。

但是，当您从具有这些字符序列的文件中读取文本时，您不是在读取转义序列，您实际上是在读取两个字符，前一种情况是“\”和“n”，而“\”和“t”在后者。

我认为您想撤消所做的操作，并从文件中删除“\n”和“\t”，然后将实际的换行符和制表符放回去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:09:26.100

`\t`并且`\n`是必要的转义序列，因为您不能在一行 Java 代码中间有一个新行。

```
// This doesn't work in Java.
String s = "One line
            the next line"; 
```

但是您读入的文件可以毫无问题地包含这些字符：

```
One line
        the next line 
```

因此，当您从文件中读取文本时，Java 不会尝试转义它找到的字符：它假定当文件表示`\t`它的意思`\t`而不是`Tab`.

如果你*想*`\t`用制表符和`\n`换行符替换，你必须自己做。[String.replace()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:09:45.327

正如我在评论中已经提到的，Java 从文本中读取像“\t”这样的文本作为“\t”。考虑使用`String#replace(...)`将“\t”交换回“\t”

# ruby-on-rails-3 - Heroku 看不到配置文件夹；为什么？

> ID：10442113
> 
> 赞同：0
> 
> 时间：2012-05-04T02:59:57.010
> 
> 标签：ruby-on-rails-3, git, bash, heroku

虽然 config 文件夹已提交，但 heroku 看不到它.. 当我这样做时，`heroku run rake db:migrate`我收到此错误：

```
Running rake db:migrate attached to terminal... up, run.1
rake aborted!
no such file to load -- /app/config/application 
```

我试着像这样测试它：

```
$ heroku run bash -a myapp
~ $ ls config
ls: cannot access config: No such file or directory 
```

虽然我确定配置文件夹已提交并推送，但有人可以帮助我吗？

这是git状态：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   .gitignore~
#   modified:   .idea/workspace.xml
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   .idea/workspace.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:07:52.477

强制另一个 git push 到您的远程 heroku 存储库。今天在 Heroku 上出现了一些 git push 错误。见[http://status.heroku.com](http://status.heroku.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:43:14.693

你确定不是它找不到的`application.rb`文件吗？你能试一下吗：

```
$ heroku run bash -a myapp
~ $ ls -al /app/config 
```

# actionscript-3 - as3 Main-Timline 从 Child.swf 加载的类中调用函数

> ID：10442115
> 
> 赞同：0
> 
> 时间：2012-05-04T03:00:00.457
> 
> 标签：actionscript-3, flash, class, function, scope

更新：好的，我准备放弃包和课程。没有答案。不知道该怎么办。我试图让这个问题变得更容易并发表了一篇新文章，但我被否决了。[as3 调用另一个类中的函数](https://stackoverflow.com/questions/10451708/as3-calling-a-function-in-another-class)

* * *

我对使用 PACKAGES 和 CLASSES 完全陌生。在遇到这么多问题后，我终于从时间线转换过来了。请耐心等待我缺乏知识。我需要知道如何调用子 swf 文件中的函数，我从父 swf 的 maintime 中的代码加载。

有 2 个 swf 文件。Main.swf 和 pConent.swf 1\. Main.swf 在第一帧的时间轴中有代码。2\. pConent.swf 正在加载一个 PACKAGE CLASS 作为文件。

**问题** 我试图从它的父 Main.swf 中调用一个函数。我该怎么做呢？这是两者的代码部分。谢谢

**Main.swf CODE /// 是 Andrid swf 的 AIR**

```
function LoadContent()
{  
    TheContent.load(new URLRequest( "pContent.swf"));
    TheContent.contentLoaderInfo.addEventListener(Event.COMPLETE, LoadContentTWO);
    function LoadContentTWO(e:Event)
    {
        Content = TheContent.content as MovieClip;
        pContent = Content as Object;
        addChild(TheContent);

            var OSS:String = "device";
            trace(pContent); //// comes out as: [object pContent]
        pContent.GetOnlineStatus(OSS); ///// HOW DO I GET THIS TO CALL FUNCTION
    } 
} 
```

**pContent.swf 中“类”的一部分我试图调用**

```
 public function GetOnlineStatus(OS:String)

{

    if(OS=="online")
        trace("inside ONLINE" );
        }
    if(OS=="device")
        {
        trace("inside DEVICE" );
        }
} 
```

**我得到的错误**

## TypeError：错误 #1006：GetOnlineStatus 不是函数。

**更新：我决定发布完整包（我的第一个），看看我是否做得对。**

```
package  
{

import flash.display.MovieClip;
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;
import flash.display.*;
import flash.media.Sound;
import flash.system.*;
import flash.media.SoundChannel;
import flash.display.MovieClip;
import flash.events.MouseEvent;

    public class pContent extends MovieClip 
    { 
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

var ScreenY = flash.system.Capabilities.screenResolutionY;
var ScreenX = flash.system.Capabilities.screenResolutionX;
var swf:String;
var daSounds:String;
var images:String;
var videos:String;
var OnlineStatus:Boolean;

//++++++++++++++++++++++++
//++++++++++++++++++++++++

public function pContent()
    {
    BG.addEventListener(MouseEvent.CLICK, mouseHandlerdown);        
    }

//++++++++++++++++++++++++
//++++++++++++++++++++++++

    //-------- * FUNCTIONS * --------
    //-------------------------------

    public function mouseHandlerdown(event:MouseEvent):void 

        {
        alpha = .3; // testing
        }

    public function GetOnlineStatus(OS:String)
        {

        if(OS=="online")
            {
            OnlineStatus = true;
            Security.allowDomain("*");
            trace("inside THE PATH " + ThePath.text);
            daSounds = "http://mycontactcorner.com/upload/files/";
            swf =    "http://mycontactcorner.com/upload/files/";
            trace("inside THE DEVICE ONLINE" );
            OnlineStatus = false;
            swf = "";
            daSounds = "content/sounds/";
            //LoadMenu();
            LoadStage();
            LoadBeau();
            }
        if(OS=="device")
            {
            trace("inside THE DEVICE ONLINE" );

            }
        }

    //------ * END FUNCTIONS * -----            
    //------------------------------ 

    }// END FUNCTION pContent
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
//%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

}//// END PACKAGE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T23:03:50.783

不要失望，但我不会对你的问题有一个“真正的”答案，我也真的不会通过你所有的代码来解决它。学习如何做到这一点是您自己的任务，除非这里的人非常非常渴望声誉，否则没有人会为您做这件事——我们只会帮助您找到正确的方法。

您的问题不是“包和类”，所以请不要放弃它们。一旦你开始理解它们，它们就会对你有很大的帮助。你的问题是，你没有面临一个问题，但实际上至少有两个（我可能会补充说相当大的问题）：

1.  您需要回过头来了解[ActionScript 中面向对象编程的基础知识](http://www.adobe.com/de/devnet/actionscript/articles/oop_as3.html)。否则，您将无法获得此类问题的答案。相信我，我的意思并不是以一种傲慢的方式——这只是一件复杂的事情，而且很难沟通复杂的问题，无论是当你不知道表达它们的术语时，还是当你的对手不知道时'不了解他们。把它想象成一个高中数学问题：除非你先学习一些基本的代数，否则你永远不会找到三角问题的解决方案（或得到一个体面的答案）。

2.  您还遇到了与加载、[应用程序域](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf619ab-7ffc.html)和[Flash Player 安全模型](http://www.adobe.com/devnet/flashplayer/articles/flash_player10_security_wp.html)有关的问题——这些问题都比您在尝试 OOP 时应该考虑的要复杂得多。这可能是一个主要障碍，除非您想挫败自己，否则您应该尽量*避免它，直到您的程序真正运行为止*。

所以这是我的建议：**始终尝试一次解决一个问题。不要让自己陷入像现在这样复杂的场景中，而是一步一步地走，直到你达到对自己所做的事情有信心的水平。**

您的第一个问题应该是了解类和对象的情况。其他一切都将在以后出现。您应该尝试隔离您的问题`pContent.swf`并首先使其工作 - 或者更好的是，将您的程序所需的所有内容放入一个文件中。转换为使用类。然后，一旦你知道如何使用这些，开始学习更高级的 OO，[使用接口解耦你的代码](http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-to-interfaces/)，[类型转换](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f87.html)和[在运行时加载二进制文件](http://www.actionscript-flash-guru.com/blog/7-decouple-externally-loaded-swfs-in-as3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:34:49.353

对不起，如果这听起来不像是一个答案，但我要写几个疑问，我读过你的代码可能会导致解决方案：

*   为什么要将它投射到 MovieClip？如果您将其转换为 MovieClip，编译器会告诉您“GetOnlineStatus”方法不存在，因为 MovieClip 类没有它！我认为您必须将其转换为 pContent

*   你为什么要投射 TheContent.content？什么是“内容”？我看了你以前的帖子，我看不到任何叫做“内容”的东西？

如果我忽略我的第二个疑问（TheContent.content 问题），我会像这样更改代码：

```
 Content = TheContent.content as pContent;  // your class it's called pContent
 addChild(Content);
 Content.GetOnlineStatus(OSS); // it calls now 
```

另外，请记住，通常将类名大写而不是变量名大写是一种很好的做法。让我知道！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:35:45.560

> //与类联系，但结果为：[object pContent]

因为你说

```
pContent = Content as Object; 
```

我不确定您为什么要执行此额外步骤

改成这个

```
Content = TheContent.content as MovieClip;
// pContent = Content as Object; //NO NEED OF THIS
addChild(Content); // just in case this gives error change it as addChild(Content as Object);

var OSS:String = "device";
trace(Content); //now see the difference
Content.GetOnlineStatus(OSS); // it calls now 
```

另外，如果有其余代码，请提供您发布那个可怕问题的链接：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T03:11:00.583

私有函数 GetOnlineStatus

尝试将其设为公共功能。当它是私有的时，它不能在拥有它的类的范围之外被访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-26T15:51:04.963

我相信为了使这个工作，加载器的内容属性。您必须创建对加载的 SWF 的引用作为您尝试调用的类。此类必须包含在主 SWF 项目中。然后你可以在孩子中调用那个特定类的函数。

```
function LoadContent()
{  
    TheContent.load(new URLRequest( "pContent.swf"));
    TheContent.contentLoaderInfo.addEventListener(Event.COMPLETE,     LoadContentTWO);
}

function LoadContentTWO(e:Event)
    {
        var pContent:GetOnlineStatus = GetOnlineStatus(e.target.content);
        addChild(e.target.content); //Assuming that "TheContent was 
    //  declared as var TheContent:Loader , you'd be adding the loader to the stage when I think you actually wanted // to add the content. 

        var OSS:String = "device";
        trace(pContent); //// comes out as: [object pContent]
        pContent.GetOnlineStatus(OSS); ///// HOW DO I GET THIS TO CALL FUNCTION
    // This should work now. If not, try to loading a function that is not the class' main function. Because I think you might get an "unable to call static function error". I'm a begginner too though, so sorry if I'm wrong. Example: pContent.GetOnlineStatusFunction(OSS);
    } 
```

**此答案假定 pContent.swf 包含一个如下所示的类文件：**

```
package {
    public class GetOnlineStatus {
        public function GetOnlineStatus (OSS:String) {
             //Do your GetOnlineStatus Logic. This is the main function.
        }
      /*public function GetOnlineStatusFunction (OSS:String) {
            //Example non-main function
        } */
    }
} 
```

资料来源：[http ://www.scottgmorgan.com/accessing-document-class-of-externally-loaded-swf-with-as3/](http://www.scottgmorgan.com/accessing-document-class-of-externally-loaded-swf-with-as3/)

# php - 本地日期格式不同时处理 mySQL 日期格式

> ID：10442126
> 
> 赞同：1
> 
> 时间：2012-05-04T03:02:13.530
> 
> 标签：php, mysql, codeigniter, date

**场景：**我的 PHP 应用程序将始终使用日期字段 DD-MM-YYYY。MySQL 显然总是将日期存储在 YYYY-MM-DD

**免责声明：**我知道如何手动更改日期格式 - 这不是问题

**问题：**什么是一种好的、干净、优雅的方法来确保我的应用程序***始终***检索 DD-MM-YYYY 中的日期，并且 mySQL***始终***接收要存储的 YYYY-MM-DD 中的日期。

***即基本上我希望有一个自动***发生转换的地方，而不必每次执行 SQL 查询时都调用它。这样，如果我“忘记”进行 date_conversion 并不重要 - 它每次都会发生......

我在想某处的某种回调？

**（编辑）我的想法：**我目前使用 Codeigniter 框架。我正在考虑使用 MY_Model，使用 before_get、before_insert 和 before_update 回调。在这些回调中，我可以使用类似这样的 SELECT 来遍历所有字段：

```
// {insert my query here to get records from DB. Then:
$query = $this->db->query();
$fields = $query->field_data(); 
foreach ($fields as $field)
{
      if ($field->type == 'date')
           // do conversion here
} 
```

并为 UPDATE/INSERT 回调做类似的事情。据我所知，数据库上没有额外的工作（因为 Codeigniter 在 $query 结果中提供了信息）

想法？

**编辑2：**其他想法：只需为每个模型执行此操作，并定义哪些字段是日期字段，然后在每个回调中应用更改...是的...可能会这样做...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:18:48.483

您可以使用 strtotime 来确定正在检查的值是否可由 php 解析。如果是，那么您可以随意转换它

```
// {insert my query here to get records from DB. Then:
$query = $this->db->query();
$fields = $query->field_data(); 
foreach ($fields as $field)
{

    // strtotime returns false when provided an invalid value
    if ($timestamp = strtotime($field->value)) {
        $field->value = date('m-d-Y', $timestamp);
    }
}

// strtotime('Whatever content here') == bool(false)
// strtotime('2011-01-12') == int(1294808400)
// strtotime('January 12th, 2011') == int(1294808400) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:21:42.320

好的 - 回答我自己的问题 - 以防人们搜索并找到它：

我正在使用 Jamie 的“MY_Model” - [https://github.com/jamierumbelow/codeigniter-base-model](https://github.com/jamierumbelow/codeigniter-base-model)

在每个具有日期字段的模型上使用回调：

```
 class Fake_model extends MY_Model
    {
        public $before_create = array ('date_convert_to_mysql');
        public $before_update = array ('date_convert_to_mysql');
        public $after_get = array ('date_convert_to_php');

        function __construct()
        {
             parent::__construct();
        }

protected function date_convert_to_mysql($post)
{
    // Now convert the date field(s)
    $post['purchase_date'] = date("Y-m-d", strtotime($post['purchase_date']));
    return $post;        
}

    protected function date_convert_to_php($result)
{
    // Now convert the date field(s)
    $result['purchase_date'] = date("d-m-Y", strtotime($result['purchase_date']));
    return $result;        
}
} 
```

如果选择或添加多条记录，则需要添加 foreach 循环。您可以将其设为通用回调，循环检查每个变量是否为日期 - 但这似乎有很多开销。这样，您只需为每个模型定义一次日期字段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T04:26:45.697

使用 PHP DateTime 类：

```
// To Object, from input:
    $input_date_object = DateTime::createFromFormat('d-m-Y', $input_date);

// From Object, to MySQL:
    $mysql_date = $input_date_object->format('Y-m-d');

// ... Do a query using $mysql_date, returning, say, "due_date" field:

// To Object, from MySQL:
    $mysql_date_object = DateTime::createFromFormat('Y-m-d', $row['due_date']);

// From Object, to PHP/CodeIgniter friendly date:
    $php_date = $mysql_date_object->format('d-m-Y'); 
```

或者，更简洁的版本：

```
$php_format = 'd-m-Y';
$mysql_format = 'Y-m-d';

$input_date_object = DateTime::createFromFormat($php_format, $input_date);

$mysql_date = $input_date_object->format($mysql_format);

$mysql_date_object = DateTime::createFromFormat($mysql_format, $row['due_date']);

$php_date = $mysql_date_object->format($php_format); 
```

# javascript - “DomContentLoaded”在我的浏览器中不起作用？

> ID：10442129
> 
> 赞同：3
> 
> 时间：2012-05-04T03:02:17.913
> 
> 标签：javascript, google-chrome, addeventlistener

我这样写了我的html页面：

```
<div>
    <img src="Natural1.jpg" id="img1" >
 <audio src="sound.mp3" id="audio1" ></audio>
</div> 
```

我的javascript文件是这样的：

```
function init(){
    audio1 = document.getElementById("audio1");
    var img1 = document.getElementById("img1");
    img1.addEventListener("click", imgClick, false);
}
function imgClick(){
    if(audio1.paused){
        audio1.play();
    }
    else{
        audio1.pause();
    }
}
document.addEventListener('DomContentLoaded', init, false); 
```

我在chrome12中运行，脚本先执行了`document.addEventListener`方法，但是没有进入init方法，为什么？我在 IE8 中尝试了`attachEvent`方法`addEventListener`，但它仍然没有。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T03:05:21.283

可能是事件名称的大小写。请尝试以下操作：

```
document.addEventListener('DOMContentLoaded', init, false); 
```

很确定是这样的。我测试了以下内容：

```
document.addEventListener("DomContentLoaded", function(){ alert('Dom') }, false);
document.addEventListener("DOMContentLoaded", function(){ alert('DOM') }, false); 
```

在 jsbin 上，后一个事件是单独提出的。请注意，IE8 不会引发此警报，因为此事件不会在那里发生。相反，您会从[IE9 和 IE10](http://ie.microsoft.com/testdrive/HTML5/DOMContentLoaded/)中找到成功。

示例：http: [//jsbin.com/ocidok/edit#javascript,html](http://jsbin.com/ocidok/edit#javascript,html)

浏览器支持`DOMContentLoaded`在[Mozilla Developer Network](https://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded)上进行了分类。截至今天，此事件仅在以下浏览器中可用：

![在此处输入图像描述](../Images/c285ec0f53ae5f90cb2afcd66f128f96.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T16:35:42.633

JavaScript 事件名称是**区分大小写的**字符串。因此，事件名称中的大写和小写字母**不可**互换。因此，将名称从 更改`'DomContentLoaded'`为`'DOMContentLoaded'`将解决问题 - 至少在 Chrome 中。

至于 IE 8：没办法。第一个实现`DOMContentLoaded`HTML5 事件的 IE 版本是 9 版，所以我只能说：**更新你的浏览器**！我还注意到您使用的是**16-version-out-of-date** Chrome 12，对吗？说真的，**两个浏览器都**需要更新。过时的浏览器**会带来严重的安全风险**。幸好我作为 Chromebook 用户能够保持计算机安全最关键的组件——浏览器——由于其无缝的特性而非常容易地保持最新......

# r - R - gwindow 的滑块

> ID：10442130
> 
> 赞同：0
> 
> 时间：2012-05-04T03:02:25.830
> 
> 标签：r

如果我使用 gwindow (gWidgets) 创建一个长窗口：

> newwin <- gwindow("abc", 宽度 = 500, 高度 = 1200)

如何拉出滑块以向下滑动窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:56:13.047

您不会直接向窗口添加滚动条。

但是，您*可以*`ggroup`使用参数向 a 添加滚动条`use.scrollwindow`：

```
win <- gwindow('abc', width=500, height=1200)
g   <- ggroup(cont=win, use.scrollwindow=T, horizontal=F, ... ) 
```

在我的平台 linux 上，使用 gWidgetsGtk2 作为基本工具包，滚动条不会立即出现。我假设如果你`ggroup`用足够的小部件填充它，滚动条会自动出现。

也许在 tcltk 或 gwidgets 的后端中，滚动条会立即出现，但我觉得它只会根据需要出现（这是有道理的）。

# ios - iOS 应用程序基本路径

> ID：10442131
> 
> 赞同：2
> 
> 时间：2012-05-04T03:02:27.947
> 
> 标签：ios, cordova, backbone.js, jekyll

我目前正在使用 Phonegap / Jekyll / Backbone 开发应用程序。但是，我需要一个基本路径来生成静态内容。对于我使用的 Android 平台`/android_asset/www/`，它运行良好。但是我找不到适用于 iOS 的，有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:37:41.417

您必须异步要求 iOS 设备为您提供根路径。在*deviceready*函数调用中：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFS, null); 
```

准备就绪后，它将使用*FileSystem*对象进行回调，您可以从中访问完整的根路径。

```
function onFS(fs) {
    alert(fs.root.fullPath); 
} 
```

阅读有关 PhoneGap/Cordova 文档的更多信息：http: [//docs.phonegap.com/en/edge/cordova_file_file.md.html#FileSystem](http://docs.phonegap.com/en/edge/cordova_file_file.md.html#FileSystem)

# arrays - 在 main 之后添加数组函数时如何修复错误？

> ID：10442132
> 
> 赞同：1
> 
> 时间：2012-05-04T03:02:54.077
> 
> 标签：arrays, int, constants, void, fill

```
#include "stdafx.h"
#include <iomanip>
#include <iostream>
#include <fstream>
using namespace std;
void FillArray (int x[50], const int Size);
void PrintArray (int x[50], const int Size);

int main()
{
    const int SizeArray = 10;
    int A[SizeArray] = {0};
    FillArray (A, SizeArray);
    PrintArray (A, SizeArray);

    return 0;
}

void FillArray (int x[50], const int Size)
{
for (int i = 0; i < Size; i++)
    {
        cout << endl << "Please enter an integer: ";
        cin >> x[i];
    }
}

void PrintArray (int x[50], const int Size)
{
for (int i = 0; i < Size; i++)
{
    cout << endl << x[i];
}
} 
```

我得到的错误如下。我必须创建可以分别读取和打印数组的新函数。以上是我的主要功能，后跟读取（填充）数组。虽然它不会运行。

> 1>----- 构建开始：项目：Some，配置：调试 Win32 ------ 1> Some.cpp 1>Some.obj：错误 LNK2019：未解析的外部符号“void __cdecl PrintArray(int * const ,int)" (?PrintArray@@YAXQAHH@Z) 在函数 _main 1>C:\Users\GmxTrey\Documents\Visual Studio 2010\Projects\Some\Debug\Some.exe 中引用：致命错误 >LNK1120: 1 unresolved externals ========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:06:38.227

看起来您`FillArray`已声明和定义，但`PrintArray`仅声明但未定义；这就是链接器抱怨的原因。您需要提供一个定义`PrintArray`来解决这个问题。

# debugging - 在 ocaml 中将 int 类型更改为 int32 时出现分段错误（核心转储）

> ID：10442137
> 
> 赞同：0
> 
> 时间：2012-05-04T03:03:16.000
> 
> 标签：debugging, ocaml

我正在将 Ocaml 中的类型从`int`转换为`int32`. 我更改了`String`Ocaml 库的一些功能（代码如下）

```
external length : string -> int32 = "%string_length"
external create: int32 -> string = "caml_create_string"
external unsafe_blit : string -> int32 -> string -> int32 -> int32 -> unit
  = "caml_blit_string" "noalloc"

let sub s ofs len =
  if ofs < 0l or len < 0l or add ofs len > length s
  then invalid_arg "String.sub"
  else begin
    let r = create len in
    unsafe_blit s ofs r 0l len;
    r
  end 
```

请注意，我在`int -> int32`运行代码时更改了代码中的很多地方，但出现错误：

```
./xsd2coq < grammar/cpf.xsd > coq/cpf.v
Segmentation fault (core dumped) 
```

在文件`xsd2coq.ml`中，我有一个缓冲区：

```
let main () =

  let xml = parse_xml stdin in
  let xsds = Xsd_of_xml.xsd_of_xml xml in

  let b = Buffer.create 10000 in

  Coq_of_xsd.genr_ml b xsds;
  Buffer.output_buffer stdout b;;

let _ = run main;; 
```

我想了解产生分段错误错误的原因是什么？你能给我任何提示或建议来调试我的代码吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T03:17:28.837

那么 "%string_length" 是一个 OCaml 原语。您不能仅通过更改 OCaml 代码来更改其返回类型。您还必须更改 OCaml 运行时中的代码。如果 OCaml 试图将一个`int`值（这是您从运行时获得的值）视为一个`int32`值，它将崩溃。一个`int32`值将由一个装箱值（指针）表示，但一个`int`值是一个立即值。

做你想做的事情会做很多工作。由于字符串的长度非常有限（至少在 32 位架构中），我不确定它是否特别有用。

# ios - IOS字体颜色与UITextView

> ID：10442144
> 
> 赞同：0
> 
> 时间：2012-05-04T03:04:05.263
> 
> 标签：ios, fonts, colors, uitextview

我在 IOS 中遇到字体颜色问题，我需要在运行时为 UITextView 分配颜色，因为显示的颜色取决于设置，但是似乎当我使用以下 RGB - 102、0、0 - 我只是变红，而不是我追求的一种栗色。我也尝试过使用 HSB 设置它。

有什么想法可能是错的吗？我可能忘记启用的设置？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T03:08:25.967

UIColor 采用 0.0 到 1.0 之间的颜色，而不是 0 到 255 之间的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T04:50:33.883

在实践中，像这样使用：

```
textField.textColor = UIColor(red: 1.0, green: 0.000, blue: 0.0, alpha: 1.0) 
```

# asp.net - URL：response.redirect，VS2012 还是 IIS？

> ID：10442149
> 
> 赞同：0
> 
> 时间：2012-05-04T03:05:10.133
> 
> 标签：asp.net, url, iis-7, response.redirect

我有一个带有 c# 的 aspx 网站，但在页面之间转换时遇到了麻烦。我 tulizando 以下代码；response.redirect("page.aspx")，其中url应该是www.mysite.com.br/sipp/page.aspx，但是url是通过www.mysite.com.br/sipp/2fsipp%2f% /page.aspx. 导致找不到页面。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T02:35:41.460

尝试对传递给 Response.Redirect 的 URL 进行编码，如下所示：

```
Response.Redirect( Server.URL.Encode("myUrl")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:11:13.340

正确的语法是

```
Response.Redirect([url]); 
```

其中 [url] 是您所需页面的路径。

在您的情况下，您应该尝试：

```
Response.Redirec("/fsipp/page.aspx"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:23:19.970

尝试使用此代码。

```
Response.Redirec("/sipp/page.aspx"); 
```

您也可以尝试另一种方式：Server.Transfer()

```
Server.Transfer("/sipp/page.aspx"); 
```

如果您使用的是 Server.Transfer()，那么您可以直接访问上一页的值、控件和属性，而使用 Response.Redirect() 则无法做到这一点。

[http://arplis.com/difference-between-server-transfer-and-response-redirect/](http://arplis.com/difference-between-server-transfer-and-response-redirect/)

# java - 什么是静态方法和变量？

> ID：10442152
> 
> 赞同：10
> 
> 时间：2012-05-04T03:06:01.140
> 
> 标签：java, definition

有人可以给出一个易于理解的静态变量和静态方法的定义吗？

这些与非静态变量和方法相比如何？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T03:16:53.473

在 Java 中，`static`表示[类方法](http://en.wikipedia.org/wiki/Method_%28computer_programming%29#Class_methods)和类变量（相对于实例方法和实例变量）。这些方法和变量可以在没有实例的情况下访问。

将此与实例方法和实例变量进行对比：它们必须通过对象访问。例如，`length()`对一个对象进行操作：

```
String a = "hello";
int len = a.length(); 
```

相反，`valueOf`不能对对象进行操作；此外，它在调用时会创建一个新对象：

```
String x = String.valueOf(123.45); 
```

`<objectName>`请注意如何使用后跟一个点来调用实例方法，而使用后跟一个点`.`来访问静态方法。`<className>``.`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T03:16:42.527

我认为这不是一个容易回答的问题，因为它的含义因语言而异。如果我用最笼统的术语来表达，可能会因人而异：

静态变量是在类的所有实例之间共享的变量。

静态方法是可以在类上调用的方法，通常不需要实例化该类。

同样，如果我要选择三种不同的语言，我会给出三种不同的答案。

维基百科也可能有助于定义这些东西。

[http://en.wikipedia.org/wiki/Method_(computer_programming](http://en.wikipedia.org/wiki/Method_(computer_programming) ) [http://en.wikipedia.org/wiki/Static_variable](http://en.wikipedia.org/wiki/Static_variable)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-04T03:44:35.100

'static' 关键字可能会令人困惑，因为在它起源的 C 语言中，它具有多种含义。当用于在函数中声明变量时，意味着该变量在函数之外具有生命周期。它本质上是函数私有的全局变量。如果全局变量是静态的，则它本质上是该源文件的私有变量。在这两种情况下，变量都只有一个内存位置，就像全局变量一样。只是编译器阻止您在函数或编译单元之外访问它。

我假设“静态”这个词被用作静态变量的位置永远不会改变，而不是普通的局部变量，它将在堆栈的某处有一个内存位置，具体取决于调用函数时堆栈的样子.

创建 C++ 时，此关键字被重新用于引用类级别的属性和方法。我认为这种想法是静态方法或属性是类私有的一种全局。如果您考虑这些在内存中的布局方式，那么它具有某种意义，因为静态属性将像全局变量一样具有单个地址。唯一的区别是编译器不允许你在类外使用它。

由于 Java（和其他语言）具有受 C++ 启发的语法，因此也使用“静态”来引用类方法和属性。很不幸，因为这个关键字的使用和英文的意思关系不大。

但总的来说，这就是看待它的方式。在大多数语言中，如果它是“静态的”，那么整个程序中只有一种。将其视为具有单个固定内存地址的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-01T08:00:38.680

静态变量是类的所有实例使用的变量，其中与普通变量一样，该变量再次被初始化。静态方法可以在不创建对象的情况下调用它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-26T22:08:05.213

我将展示示例以清楚地理解静态方法。

从键盘输入数据时 java 使用 Scanner 类

前任; 扫描仪 scn = new Scanner(System.in); int a = scn.nextInt();

所以这意味着 nextInt() 方法不是静态的。

静态方法是无需实例化类即可使用的方法。

看下面的例子：

```
public class Calculate {

    static void calculatePower(int num, int pow) {
        System.out.println(Math.pow(num, pow));
    }

} 
```

静态方法的使用。

```
public static void main(String[] args) {
    Calculate.calculatePower(2,8);
} 
```

所以我们没有实例化 Calculate 类，而是使用了静态的 calculatePower 方法

# django - Django 模型字段

> ID：10442156
> 
> 赞同：0
> 
> 时间：2012-05-04T03:06:44.650
> 
> 标签：django

好的，所以我想要一些关于如何设置模型的建议。我有一个正在开发的食谱模型（计划在厨房里放一个平板电脑）。我想做的是让每个食谱都有一个成分表，但也有一个与成分表匹配的相应数量列表。我的想法是我有一个成分模型，用于跟踪我手头有哪些成分和多少，配方模型将有它自己的成分列表以及需要的数量。这样我就可以让应用程序显示我有配料要做的食谱，并隐藏我没有配料的食谱（或者实际上它会更精细，但就是这样）。这是我当前的设置：

成分模型.py

```
class Unit_of_Measure(models.Model):

   """Unit_of_Measure model. This is used as the foriegnkey for the Quantity model unit_of_measure key."""

   class Meta:
           verbose_name_plural = "Units of Measure"

   def __unicode__(self):
           return self.unit_of_measure

   unit_of_measure = models.CharField(max_length=200)

class Location(models.Model):

   """Location model. This is used a the foriegnkey for the Ingredient model location key."""

   class Meta:
           verbose_name_plural = "Locations"

   def __unicode__(self):
           return self.place

   place = models.CharField(max_length=200)

class Ingredient(models.Model):

   """Ingredients model. Includes ingredient title, quantity on hand, location of ingredient (foreignkey), expiration date, and if it is a shop for ingrdient."""

   class Meta:
           verbose_name_plural = "Ingredients"

   def __unicode__(self):
           return self.title

   title = models.CharField(max_length=200)
   quantity = models.CharField(max_length=200)
   unit_of_measure = models.ForeignKey(Unit_of_Measure)
   location = models.ForeignKey(Location)
   expiration_date = models.DateTimeField()
   shop_for = models.BooleanField() 
```

配方模型.py

```
class RecipeType(models.Model):

   """Recipe type model. This is used as the foreign key for the Recipe model recipe style."""

   def __unicode__(self):
           return self.style

   style = models.CharField(max_length=200)

class Recipe(models.Model):

   """Recipe model. Includes recipe title, recipe style (dinner, snack, etc..), ingredient list (foreignkey), recipe instructions, storage style, and expiration date."""

   class Meta:
           verbose_name_plural = "Recipes"

   def __unicode__(self):
           return self.title

   title = models.CharField(max_length=200)
   style = models.ForeignKey(RecipeType)
   required_ingredient_list = models.ManyToManyField(Ingredient, related_name='additional_ingredient_list')
   additional_ingredient_list = models.ManyToManyField(Ingredient, related_name='required_ingredient_list', blank=True)
   recipe_instruction = models.TextField()
   storage_style = models.CharField(max_length=200)
   expiration_date = models.DateTimeField() 
```

那么关于如何匹配两个字段列表的任何建议？像“required_ingredient_list”匹配到“required_ingredient_quantity_list”之类的？还是更好的解决方案？或者一般有什么建议？现在我可以按成分对食谱进行排序，但由于成分模型的数量是我厨房里手头的数量，我真的没有一个字段来表示食谱使用的数量，它只是在 recipe_instruction 字段中说出来。哈尔普兹！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:23:22.463

使用[“通过模型”](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)将食谱链接到成分。然后，中间模型可以具有关联的单位和与之关联的数字或字符串度量。

# mysql - 具有多个事务的mysql查询

> ID：10442157
> 
> 赞同：0
> 
> 时间：2012-05-04T03:06:58.073
> 
> 标签：mysql

我有这个示例表结构和记录：

```
-- ------------------
-- 驱动表结构
-- ------------------
如果存在“驱动程序”，则删除表；
创建表`驱动程序`（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fullname` varchar(100) 整理 utf8_unicode_ci NOT NULL，
  主键（`id`）
) 引擎=InnoDB AUTO_INCREMENT=4 默认字符集=utf8 COLLATE=utf8_unicode_ci;

-- ------------------
--taxi的表结构
-- ------------------
如果存在 `taxi` 则删除表；
创建表`taxi`（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `unit` varchar(5) NOT NULL,
  主键（`id`）
) 引擎=InnoDB AUTO_INCREMENT=4 默认字符集=latin1;

-- ------------------
-- 债务表结构
-- ------------------
如果存在“债务”，则删除表；
创建表`债务`（
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `data` float(10,2) NOT NULL DEFAULT '0.00',
  `driver` bigint(20) NOT NULL,
  `dateadded` 日期时间不为空，
  主键（`id`）
) 引擎=InnoDB AUTO_INCREMENT=22 默认字符集=latin1;

-- ------------------
-- 调度表结构
-- ------------------
如果存在`dispatch`，则删除表；
创建表`调度`（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `driver` int(11) NOT NULL,
  `taxi` int(11) NOT NULL,
  `dispatchdate` 日期 DEFAULT NULL,
  `率`浮动默认'0'，
  主键（`id`）
) 引擎=InnoDB AUTO_INCREMENT=1790 默认字符集=latin1；

-- ------------------
-- 还款表结构
-- ------------------
如果存在 `rpayment`，则删除表；
创建表`rpayment`（
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `dateadded` 日期时间默认为 NULL，
  主键（`id`）
) 引擎=InnoDB AUTO_INCREMENT=88 默认字符集=latin1；

-- ------------------
-- rpayment_detail 的表结构
-- ------------------
删除表如果存在`rpayment_detail`;
创建表`rpayment_detail`（
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `rpayment` bigint(20) 非空，
  `dispatch` bigint(20) NOT NULL,
  `金额`浮动默认'0'，
  主键（`id`）
) 引擎=InnoDB AUTO_INCREMENT=56 默认字符集=latin1;

-- ------------------
-  记录
-- ------------------

插入“驱动程序”值（'1'，'DRIVER1'）；
插入“驱动程序”值（'2'，'DRIVER2'）；
插入“驱动程序”值（'3'，'DRIVER3'）；

插入“出租车”值（'1'，'UNIT1'）；
插入“出租车”值（'2'，'UNIT2'）；
插入“出租车”值（'3'，'UNIT3'）；

插入“债务”值（'1'，'100.00'，'1'，'2012-04-01 16:07:15'）；
插入“债务”值（'2'，'200.00'，'1'，'2012-04-01 16:25:56'）；
插入“债务”值（'3'，'300.00'，'3'，'2012-04-01 16:34:42'）；
插入“债务”值（'4'，'400.00'，'2'，'2012-04-02 00:11:10'）；
插入“债务”值（'5'，'200.00'，'1'，'2012-04-02 00:57:58'）；
插入“债务”值（“6”、“500.00”、“3”、“2012-04-02 10:25:39”）；
插入“债务”值（'7'，'100.00'，'2'，'2012-04-02 11:15:25'）；

插入“调度”值（“1”、“1”、“1”、“2012-04-01”、“1000”）；
插入“调度”值（“2”、“2”、“2”、“2012-04-01”、“1000”）；
插入“调度”值（“3”、“3”、“3”、“2012-04-01”、“1000”）；
插入“调度”值（“4”、“1”、“1”、“2012-04-02”、“1000”）；
插入“调度”值（“5”、“2”、“2”、“2012-04-02”、“1000”）；
插入“调度”值（“6”、“3”、“3”、“2012-04-02”、“1000”）；

插入“rpayment”值（'1'，'2012-04-30 20:11:16'）；
插入“rpayment”值（'2'，'2012-05-03 03:25:31'）；

插入“rpayment_detail”值（“1”、“1”、“1”、“1000”）；
插入“rpayment_detail”值（“2”、“1”、“4”、“0”）；
插入“rpayment_detail”值（“3”、“2”、“2”、“0”）；
插入“rpayment_detail”值（“4”、“2”、“5”、“500”）；

```

我想查看如下结果：

```
UNIT DRIVER RPAYMENT_TOTAL TOTAL_DEBTS
--------------------------------------------------
单元 1 驱动器 1 1000 500
单元 2 驱动器 2 500 500
单元 3 驱动器 3 0 800

```

我现在有这个...

```
SELECT    taxi.unit, driver.fullname, SUM(rpayment_detail.amount) AS rpayment_total, 
          SUM(debts.`data`) AS total_debts 
FROM      driver 
LEFT JOIN debts ON (driver.id = debts.driver) 
LEFT JOIN dispatch ON (driver.id = dispatch.driver) 
LEFT JOIN rpayment_detail ON (dispatch.id = rpayment_detail.dispatch) 
LEFT JOIN rpayment ON (rpayment_detail.rpayment = rpayment.id) 
LEFT JOIN taxi ON (dispatch.taxi = taxi.id) 
GROUP BY  driver.id 
ORDER BY  taxi.unit asc, driver.fullname asc 
```

结果是……

```
UNIT DRIVER RPAYMENT_TOTAL TOTAL_DEBTS
--------------------------------------------------
单元 1 驱动器 1 3000 1000.00
单元 2 驱动器 2 1000 1000.00
UNIT3 驱动程序 3 空 1600.00

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:09:02.007

它不能用你拥有的表结构来完成。

您的问题是`debts`需要一个外键列`dispatch`而不是`driver`.

如果没有这个，每次调度都会加入每笔债务，有效地将债务数量乘以司机的调度数量，这就是你所看到的。

# php - Mysql, phpmyadmin, 创建数据库

> ID：10442158
> 
> 赞同：0
> 
> 时间：2012-05-04T03:07:07.043
> 
> 标签：php, mysql, database, phpmyadmin

我目前遇到一个问题，模板脚本需要我编辑数据库名称、用户名和密码。我已经创建了一个数据库，但是我似乎找不到创建用户名/密码的方法，有什么建议吗？此外，我使用的是今天早些时候发布的 3.5.1 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:13:32.200

用于[`CREATE USER`](http://dev.mysql.com/doc/refman/5.5/en/create-user.html)创建用户，并[`GRANT`](http://dev.mysql.com/doc/refman/5.5/en/grant.html)授予对服务器、数据库和/或表的访问权限。

那，或者修改`mysql`数据库中的表并刷新权限。但不要那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:11:34.547

您使用什么托管服务？我有一个雅虎网络服务，为了创建一个新用户，我必须在 PHPMyAdmin 中创建它，但要设置密码，我必须进入雅虎网站管理员控制面板（在创建用户之后）。倒退并且比它需要的更复杂，但这可能与您的网络主机类似

**编辑**

此外，雅虎阻止我使用`CREATE`脚本创建新数据库；我只能通过 phpMyAdmin 做到这一点。同样，这可能是阻止您运行此脚本的类似情况。

# ruby - RSpec - as_null_object？

> ID：10442159
> 
> 赞同：16
> 
> 时间：2012-05-04T03:07:27.460
> 
> 标签：ruby, rspec2

我不清楚它的目的[`as_null_object`](http://apidock.com/rspec/Spec/Mocks/Methods/as_null_object)是什么，你会在什么情况下使用它？根据 Relish 上的文档：

> 使用该`as_null_object`方法忽略任何未明确设置为存根或消息预期的消息。

没有在我这里注册。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T03:20:03.753

当您不关心对象的行为或交互，并且不想显式地将所有需要的内容存根时，请使用空对象。在 null 对象上使用任何参数调用任何方法都不会导致 a`NoMethodError`或`ArgumentError`。另请参阅关于[Null Object Pattern](http://en.wikipedia.org/wiki/Null_object)的 Wikipedia 条目。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T03:20:05.630

[RSpec Book](http://pragprog.com/book/achbd/the-rspec-book)对此进行了解释。我建议你阅读它。

> ... as_null 对象告诉模拟对象只监听我们告诉它期望的消息，并忽略任何其他消息。

因此，假设您的示例之一具有以下代码：

```
...
my_object = mock("my_object" ).as_null_object
other_thing = OtherThing.new(my_object)
my_object.should_receive(:some_method).with("string parameter value")
... 
```

如果 OtherThing 的初始化代码向 my_object 发送了不是“some_method”的其他消息（执行其他方法），则此示例将不会监听它们，从而将测试与您在此处实际要测试的内容隔离开来。

# java - 如何对动态呈现 html 和 css 的 Java 代码进行单元测试？

> ID：10442160
> 
> 赞同：3
> 
> 时间：2012-05-04T03:07:30.523
> 
> 标签：java, html, unit-testing, testing

我有一个 Java 类，它从数据库中获取表单定义，然后根据表单定义呈现 html、javascript 和 css，它使用大量“appendable.append(...).append(...)”来构建html 片段，这很容易出错。Jsp 和通用模板框架（例如 FreeMarker）在这里不是一个选项，因为 javascript、css、html 元素都是动态的（取决于表单定义）。由于某些原因，GWT 也不是一种选择。

对该渲染器进行单元测试的一种直接方法是对预期的 html 代码进行硬编码，然后与实际输出进行比较，但是测试非常脆弱。

请问，对这种 html 渲染器进行单元测试的最佳方法是什么？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:25:34.223

如果您对预期的 HTML 值进行硬编码，您的测试可能会很脆弱，但它们可能会捕获您的大部分错误。另一种方法是检查 HTML 输出中是否存在某些关键或重要标签。这种方法更加灵活，但可能会遗漏一些错误。要决定应该使用哪个，请考虑您希望 HTML 结构更改的频率。

这里有一个平衡点。你的测试越具体，它就越脆弱。但是，如果您不够具体，您的测试将不会发现任何错误。需要练习来培养对具体程度的感觉。

但是总的来说，脆性测试非常危险，因此它们可能是“更大的邪恶”。如果您的测试标记了很多误报，您将开始忽略它们，然后它们变得无用。我建议你去验证关键标签的存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T03:34:15.140

我会采取双管齐下的方法。首先，您要验证您正在生成的各个片段。您的测试应验证这些组件是否按预期工作。其次，您应该验证作为一个整体生成的每个文档对其类型是否有效且一致。有第三方工具可以为您执行此验证。有关一些示例，请参见[http://www.w3.org/QA/Tools/](http://www.w3.org/QA/Tools/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:49:36.273

您提到的比较方法是一种很好的方法，它被称为“金主”测试方法。

有一个与 junit 配合使用的验证库来执行此操作，这极大地简化了称为 Approval Tests 的过程[http://www.approvaltests.com](http://www.approvaltests.com)

这也有助于通过使用将在差异报告器或网络浏览器中打开您的结果和/或您的黄金大师的报告器来防止脆弱性。

您正在寻找的电话是：

```
Approvals.VerifyHtml(yourHtml) 
```

你会想用其中一个来装饰你的测试

```
@UseReporter(DiffReporter.class)
@UseReporter(FileLauncherReporter.class)
@UseReporter({DiffReporter.class, FileLauncherReporter.class}) 
```

# c# - 如何将输入从 Web 应用程序发送到 Web 服务

> ID：10442166
> 
> 赞同：0
> 
> 时间：2012-05-04T03:08:21.950
> 
> 标签：c#, asp.net, sql, vb.net, visual-studio-2008

将输入发送到 web 服务时，我遇到了一些问题。

这是我的代码：

```
Protected Sub Button5_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Saman.Click

    SamanDB.DataSource = Nothing
    SamanDB.DataBind()

    Dim str As String
    str = TextBox1.Text

   >> Dim copsdataXML As String = myCOPSWeb.Summon(str)

    Dim dsReader As StringReader = New StringReader(copsdataXML)
    Dim DS As DataSet = New DataSet()
    DS.ReadXml(dsReader)

    SamanDB.DataSource = DS  
    SamanDB.DataBind()
End Sub 
```

这里是网络服务：-

```
public string Summon(string Input1)
{
    SqlDataAdapter dbadapter = null;
    DataSet returnDS = new DataSet();

    using (SqlConnection dbconn = new SqlConnection(
        "Server=11.2.6.10;"
        + "Database=POLIS;"
        + "User ID=*******;"
        + "Password=*******;"
        + "Trusted_Connection=False;"))
    {

        SqlCommand cmd = new SqlCommand();

        string sqlQuery = "select * from SUMMON where ic_no=@Input1";

        cmd.CommandText = sqlQuery;
        cmd.Connection = dbconn;
        dbadapter = new SqlDataAdapter(cmd);

        cmd.Parameters.Add("@Input1", SqlDbType.VarChar).Value = Input1;

        dbadapter.Fill(returnDS);
    }

    return returnDS.GetXml();
} 
```

我想将 TextBox1.Text 作为 Input1 发送到 web 服务。这是我得到的例外：-

> 用户代码未处理 SoapException。
> 
> System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> System.Data.SqlClient.SqlException: Parameterized Query '(@Input1 varchar(8000))select * from SUMMON where ic_no=@Input1' 需要参数@Input1，但未提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:22:18.830

编辑：

试试这个顺序

```
 cmd.Parameters.Add("@Input1", SqlDbType.VarChar).Value = Input1;
  dbadapter = new SqlDataAdapter(cmd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:23:38.483

在 Summon 方法中，尝试替换此行：

```
cmd.Parameters.Add("@Input1", SqlDbType.VarChar).Value = Input1; 
```

有了这个：

```
cmd.Parameters.AddWithValue("@Input1", Input1); 
```

# python - 是否有 python 示例的 pyqt4 参考文档？

> ID：10442170
> 
> 赞同：2
> 
> 时间：2012-05-04T03:08:31.330
> 
> 标签：python, reference, pyqt4

有没有像[这样](http://doc.qt.nokia.com/4.7-snapshot/modelview.html)的带有 python 示例的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:11:44.233

周围有各种各样的 PyQt 教程。但据我所知，没有像官方文档那样全面。也就是说，所有 C++ Qt 示例都非常容易转换为 PyQt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:01:51.573

你可以看这里：[http](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/modules.html) ://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/modules.html 。

这是转换成python的官方文档。那里的一些代码仍然是 C++，但很容易翻译成 PyQt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:05:43.560

PySide 项目在代码层面与 PyQT 高度兼容。它的文档（我认为）将 C++ 文档中的所有示例都翻译成合理的惯用 Python。

[http://www.pyside.org/docs/pyside/contents.html](http://www.pyside.org/docs/pyside/contents.html)

不幸的是，他们没有翻译那个特定的教程，但是如果您查看一些 C++ 示例以及它们的 PyQT/PySide 等价物，您很快就会学习如何在 Python 中实现 C++ 示例。这并不难。我只知道理论上的 C++ 基础知识，但很快就习惯了。

# java - Java 图像闪烁

> ID：10442172
> 
> 赞同：2
> 
> 时间：2012-05-04T03:08:38.963
> 
> 标签：java, swing, timer, paint, double-buffering

我可以从谷歌搜索中看到这个问题被问了很多，但我找到的解决方案都没有为我做这件事。你知道，我正在用 Java 制作一个带有图像的游戏，因为游戏通常都有这些东西。但是整个表格一直在闪烁，我无法让它停止。是的，我已经对其进行了双重缓冲并覆盖了 update() 方法，虽然这确实有帮助，但闪烁仍然存在。我不知道我是否对双缓冲做错了，或者我是否需要完全不同的东西。

起初我以为它可能与 clearRect() 行有关，但删除它后，游戏仍然闪烁，但当然不是每次都清除。所以这根本没有帮助。减慢计时器后，闪烁确实几乎完全消失了，但我需要将其减慢到 100 毫秒，即使那样我仍然会出现一些闪烁。此外，这对游戏来说太慢了。我尝试让一个计时器在 10 毫秒计时器上完成所有工作，另外一个计时器在 100 毫秒进行绘画，但它看起来很跳跃。我可以将绘画计时器减慢到大约 30 毫秒，并且它仍然很流畅，尽管闪烁仍然是一个问题。

必须有一种方法可以每 10-30 毫秒执行一次而不会闪烁。是否有其他类似于双缓冲但在这种情况下更好的方法，或者我可以使用的方法？提前感谢您的帮助。

```
public class main extends JApplet implements ActionListener {
    //This Declares The Variables
    Graphics2D buffer;
    Image offscreen;
    Timer timGame = new Timer(10, this);
    //other variables

    public void init(){
        //This Creates The Offscreen Buffer Zone
        offscreen = createImage(getSize().width, getSize().height);
        buffer = (Graphics2D)offscreen.getGraphics();
        //other initialization stuff irrelevant to drawing
    }

    public void actionPerformed(ActionEvent evt){
        if (evt.getSource() == timGame)
            runGame();
    }

    private void runGame(){
        //Do stuff, move objects
        repaint();
    }

    public void paint(Graphics g){
        super.paint(g);

        buffer.clearRect(0, 0, getSize().width, getSize().height);
        //draw stuff to buffer
        g.drawImage(offscreen, 0, 0, this);
    }

    public void update(Graphics gr){
        paint(gr);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T03:11:18.323

不要直接在`paint(...)`JApplet 或 JFrame 等顶级窗口的方法中绘制，因为您会丢失所有双缓冲和所有 Swing 好东西。而是`paintComponent(...)`使用您添加到 JApplet 的 JPanel 或其他 JComponent 派生组件（包括 JComponent 本身）的方法。

如果您在此处或在 Google 中搜索此主题，您会看到在此和其他网站上已多次询问和回答，答案都是一样的。

例如

*   [japplet-super-paint-cause-闪烁](https://stackoverflow.com/questions/7004866)
*   [java-japplet-graphics-双缓冲](https://stackoverflow.com/questions/5371979/java-japplet-graphics-double-buffering)

# asp.net - Python / web scrape / aspx - 当没有表单时人类是否可能？

> ID：10442175
> 
> 赞同：5
> 
> 时间：2012-05-04T03:09:04.173
> 
> 标签：asp.net, python, scrape

显然，完全是菜鸟。为了公开记录/政府透明度/报告/等，自学 Python 进行网络抓取。

我想抓取一个 .aspx 页面，2012 年 1 月至 2012 年 3 月的每周日历

但它没有形式...

也许你们这些优秀的人可以在我花几天时间与之抗争之前告诉我解决方案是否可行。

[http://webmail.legis.ga.gov/Calendar/default.aspx?chamber=house](http://webmail.legis.ga.gov/Calendar/default.aspx?chamber=house)

在日历上查看约会的唯一方法是在日历图片上选择一天。但是，至少，如果您单击星期一，它会显示该周的所有约会。（我想收集所有这些任命，以计算每个委员会开会的频率，有点代表计算什么样的立法受到关注和什么样的立法被忽视。）

但是，使用什么策略呢？似乎每个月至少在它的肠子里被分配给一个连续的四位数字，前面有一个“V”，比如 V4414，而天数则没有前面的数字。

我只在 2012 年 1 月 - 3 月狩猎；其他月份是非德国月份，大部分时间都是空的。

线索？

```
 ...<a href="javascript:__doPostBack('calMain','V4414')" style="color:#333333" title="Go to the previous month">February</a></td><td align="center" style="width:70%;">March 2012</td><td align="right" valign="bottom" style="color:#333333;font-size:8pt;font-weight:bold;width:15%;"><a href="javascript:__doPostBack('calMain','V4474')" style="color:#333333" title="Go to the next month">April</a></td></tr> 
```

一种模式？

```
 ...<td align="center" style="color:#999999;width:14%;"><a      href="javascript:__doPostBack('calMain','4439')" style="color:#999999" title="February 26">26</a></td><td align="center" style="color:#999999;width:14%;"><a href="javascript:__doPostBack('calMain','4440')" style="color:#999999" title="February 27">27</a></td><td align="center" style="color:#999999;width:14%;"><a href="javascript:__doPostBack('calMain','4441')" style="color:#999999" title="February 28">28</a></td>... 
```

干杯和感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T03:25:08.080

该表单包含四个`input`s，其中`name`s 为：

*   `__EVENTTARGET`
*   `__EVENTARGUMENT`
*   `__VIEWSTATE`
*   `__EVENTVALIDATION`

后两者具有初始值。你需要刮掉那些。前两个是由那些链接设置的。例如，您有一个链接：

```
<a href="javascript:__doPostBack('calMain','4504')" style="color:Black" title="May 01">1</a> 
```

看看`href`：

```
javascript:__doPostBack('calMain','4504') 
```

不知何故，将这两个字符串解析出来。前者是`__EVENTTARGET`。后者是`__EVENTARGUMENT`。

一旦您拥有所有四条数据，您就可以发出`POST`请求以获取下一页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T03:17:34.100

您*可以*`urllib.parse.urlencode`使用类似构建查询字符串的方法在 Python 中复制 POST 请求。

为此，您显然必须找出查询字符串的样子。或者，您可以使用其他工具，例如[Selenium RC](http://seleniumhq.org/projects/remote-control/)。

# javascript - 多个 ASP 的问题：更新面板（均已更新）

> ID：10442181
> 
> 赞同：0
> 
> 时间：2012-05-04T03:09:28.397
> 
> 标签：javascript, ajax, updatepanel

我的 aspx 页面中有两个更新面板。我想使用 javascript 代码显示进度。但是，当我单击一个特定更新面板的触发按钮时，两个更新面板都在更新。单击按钮时，我只想更新一个。

```
<script type="text/javascript">
                var prm = Sys.WebForms.PageRequestManager.getInstance();
                prm.add_initializeRequest(prm_InitializeRequest);
                prm.add_endRequest(prm_EndRequest);
                function prm_InitializeRequest(sender, args) {
                    $('#loading').show("slow");
                    /*var panelProg = $get('loading');
                    panelProg.style.display = '';*/
                    $get(args._postBackElement.id).disabled = true;
                }
                function prm_EndRequest(sender, args) {
                    $('#loading').hide("slow");

                    /*var panelProg = $get('loading');

                    panelProg.style.display = 'none';*/
                    $get(sender._postBackSettings.sourceElement.id).disabled = false;
                } 
```

以上是我的javascript代码。

```
<asp:UpdatePanel ID="updateQuestions" runat="server">
                <ContentTemplate>
                    <div class="descHeader" style="width: 600px;">
                        <asp:Label ID="Label2" runat="server" Text="Last 10 Questions"></asp:Label>
                    </div>
                    <div class="descContent" style="width: 600px; height: auto;">
                        <div id="loading" style="display: none; height: 60px;">
                            <asp:Image ID="img1" runat="server" ImageUrl="~/images/site/process.gif" />
                        </div>
                        <asp:Panel ID="pnlQuestions" runat="server">
                        </asp:Panel>
                    </div>
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="btnAsk" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel> 
```

上面是要更新的更新面板。另一个更新面板在母版页中，在这里；

```
<asp:UpdatePanel ID="uPCheckin" runat="server" UpdateMode="Always">
            <ContentTemplate>
                <asp:Panel ID="pnlCheckIn" runat="server" CssClass="pnlCheckIn">
                    <asp:Label ID="Label1" runat="server" Text="Where are you now ?" Font-Size="10px"
                        ForeColor="Black"></asp:Label>
                    <br />
                    <asp:TextBox ID="txtCheckIn" runat="server" ForeColor="Gray">
                    </asp:TextBox>
                    <asp:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender1" runat="server" WatermarkText="Type City Name"
                        Enabled="True" TargetControlID="txtCheckIn">
                    </asp:TextBoxWatermarkExtender>
                    <asp:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server" CompletionSetCount="4"
                        CompletionInterval="4" EnableCaching="true" Enabled="True" MinimumPrefixLength="3"
                        ServiceMethod="NewDestinationComplete" ServicePath="~/DestinationComplete.asmx"
                        TargetControlID="txtCheckIn" CompletionListCssClass="autocomplete_completionListElement"
                        CompletionListItemCssClass="autocomplete_listItem" CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem">
                    </asp:AutoCompleteExtender>
                    <asp:Button ID="btnCheckIn" runat="server" Text="Check-In" CssClass="btnSaveChanges"
                        OnClick="btnCheckIn_Click" />
                    <br />
                </asp:Panel>
            </ContentTemplate>
        </asp:UpdatePanel> 
```

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:23:28.910

实际上，我可以看到，在您的更新面板中，UpdateMode 设置为“有条件的”。这将只刷新该面板。

# live-wallpaper - 用户手机屏幕尺寸

> ID：10442186
> 
> 赞同：0
> 
> 时间：2012-05-04T03:09:55.700
> 
> 标签：live-wallpaper

我正在写动态壁纸。和以前一样，我在“onSurfaceChanged”处获得用户的屏幕宽度和高度。我可以在“onSurfaceCreated”处获得屏幕宽度和高度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:59:10.217

您可以在任何您喜欢使用的地方获得屏幕尺寸

```
getWallpaperDesiredMinimumWidth()/2 
```

或放

```
WindowManager wm = (WindowManager)getSystemService(WINDOW_SERVICE);
DisplayMetrics metrics;
disp = wm.getDefaultDisplay(); 
```

在源代码的顶部，然后执行

```
disp.getMetrics(metrics);
screenWidth = (float) metrics.widthPixels; 
```

# c++ - Windows 8 Consumer Preview 中的 GetTickCount() 位于何处？

> ID：10442191
> 
> 赞同：3
> 
> 时间：2012-05-04T03:10:28.867
> 
> 标签：c++, windows-8, winapi

我最近将一个非常简单的应用程序从 Windows 8 Developer Preview 移植到 Windows 8 Consumer Preview。一切似乎都运行良好，但**现在**该函数[`GetTickCount()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408.aspx)似乎不再在 Windows.h 或 WinBase.h 中定义。

尽管我在文件顶部定义了这些标头：

```
#include <Windows.h>
#include <WinBase.h> 
```

我的代码行

```
unsigned int seed = GetTickCount() % UINT_MAX; 
```

仍然给我错误：

```
error C3861: 'GetTickCount': identifier not found 
```

谁能告诉我`GetTickCount()`去哪里或者我应该用什么来代替？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T04:00:53.813

从[`GetTickCount`文档](https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/nf-sysinfoapi-gettickcount)：

> **适用于：**仅桌面应用程序

从[`GetTickCount64`文档](https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/nf-sysinfoapi-gettickcount64)：

> **适用于：**桌面应用程序 | Metro 风格的应用程序

所以，使用`GetTickCount64`.

# grails - 如何使用 ACL 插件？

> ID：10442192
> 
> 赞同：1
> 
> 时间：2012-05-04T03:10:42.133
> 
> 标签：grails, groovy, spring-security, acl

我正在尝试`ACL plugin`在我的 grails 应用程序中使用。基于本教程中给出的示例[http://grails-plugins.github.com/grails-spring-security-acl/docs/manual/guide/3.%20Tutorial.html](http://grails-plugins.github.com/grails-spring-security-acl/docs/manual/guide/3.%20Tutorial.html)我需要创建一个`Service`将实现注释`@PreAuthorize, @PostAuthorize, @PreFilter, and @PostFilter`。

我想在我的控制器中实现这种方法，而不是创建服务。我尝试`@PreAuthorize`在操作顶部使用 ，但它返回一条错误消息：

```
Annotation @org.springframework.security.access.prepost.PreAuthorize is not allowed on element FIELD 
```

这是否意味着，`@PreAuthorize`注释不适合调用控制器中的每个操作？

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:25:59.563

是的，它不适用于控制器，仅适用于服务（和其他 Spring bean）。它可能适用于 2.0 控制器中的方法，因为控制器是 Spring bean，但我还没有尝试过。

问题是 Spring Security 对闭包一无所知，因为它们是一个 Groovy 概念。它们被 Grails 调用以处理 Web 请求，但不能被 Spring 拦截，因为它仅适用于方法。

这与交易服务和关闭的问题有关。您不能在服务中定义闭包并使其具有事务性，因为 Spring 看不到它。Groovy 让您可以像调用方法一样调用闭包，但这只是语法糖。

# cron - Dotcloud 上的 Django 管理命令 Cron

> ID：10442195
> 
> 赞同：2
> 
> 时间：2012-05-04T03:10:52.217
> 
> 标签：cron, pythonpath, dotcloud, django-manage.py

我正在尝试运行 cron 来运行自定义 Django 管理命令。我在 DotCloud 上运行。

当 cron 运行时，我收到以下错误：

```
Traceback (most recent call last):
File "./manage.py", line 2, in <module>
from django.core.management import execute_manager
ImportError: No module named django.core.management 
```

我认为这是因为 cron 在裸环境中运行，所以我尝试在同一个 cron 中手动设置 PYTHONPATH。这是那个命令...

```
PYTHONPATH=/home/dotcloud/env/lib/python2.6/site-packages/setuptools-0.6c11-    
py2.6.egg:/home/dotcloud/env/lib/python2.6/site-packages/pip-1.0.1- 
```

py2.6.egg:/home/dotcloud/current:/home/dotcloud/env/lib/python2.6:/home/dotcloud/env/lib/python2.6/plat-linux2:/home/dotcloud/env/ lib/python2.6/lib-tk:/home/dotcloud/env/lib/python2.6/lib-old:/home/dotcloud/env/lib/python2.6/lib-dynload:/usr/lib/python2 .6:/usr/lib64/python2.6:/usr/lib/python2.6/plat-linux2:/usr/lib/python2.6/lib-tk:/usr/lib64/python2.6/lib-tk :/home/dotcloud/env/lib/python2.6/site-packages:/usr/local/lib/python2.6/dist-packages/virtualenv-1.6.1-py2.6.egg:/usr/local/ lib/python2.6/site-packages:/usr/local/lib/python2.6/dist-packages:/usr/lib/python2.6/dist-packages:/usr/lib/pymodules/python2.6

错误仍在发生，我不确定发生了什么。非常感谢任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T03:37:33.933

你是对的：cron 作业在“裸”环境中运行。

而不是这样做：

```
* * * * * /home/dotcloud/current/myapp/manage.py args... 
```

你应该做这个：

```
* * * * * /home/dotcloud/env/bin/python /home/dotcloud/current/myapp/manage.py args... 
```

运行包含的`python`解释器`~/env/bin`将自动设置正确的环境。

# regex - 如何将 perl 正则表达式替换作为表达式中的函数编写？

> ID：10442196
> 
> 赞同：2
> 
> 时间：2012-05-04T03:10:56.940
> 
> 标签：regex, perl, function, expression

我有

```
my $x = "whatever 123";
$x =~ s/ //g;
$x =~ s/\d/9/g;
frobnicate($x); 
```

尽管在现实生活中它更加混乱和更大。我想做的是以函数形式执行替换，如下所示：

```
my $x = "whatever 123";
frobnicate(   regex_substitutions($x, s/ //g, s/\d/9/g) ); 
```

这可能看起来像是可读性的倒退，但在现实生活中这样的事情实际上会有所帮助。其目标是避免在单独的语句中使用正则表达式替换，但将其合并到表达式中。我猜有一种巧妙且易读的方法来做到这一点，长期的 perl 专家会知道。

（不仅有“不止一种方法可以做到这一点”，而且有不止一种方法可以询问任何特定的事情。如果这个问题与现有问题无关，请原谅我。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T04:04:02.940

5.14 引入 /r(eturn):

```
frobnicate( $x =~ s/ //gr =~ s/\d/9/gr ); 
```

任何版本：

```
frobnicate apply { s/ //g; s/\d/9/g; } $x; 
```

`apply`来自[List::MoreUtils](http://search.cpan.org/perldoc?List::MoreUtils)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T03:22:40.233

```
#!/usr/bin/env perl

use strict; use warnings;

my $x = "whatever 123";

frobnicate(regex_substitutions($x =>
    sub { s/ //g for @_; () },
    sub { s/\d/9/g for @_; @_ },
));

sub frobnicate { print "@_\n" }

sub regex_substitutions {
    my ($x, @c) = @_;
    return map $_->($x), @c;
} 
```

# meteor - Meteor 如何使用多个 .less 文件

> ID：10442201
> 
> 赞同：17
> 
> 时间：2012-05-04T03:11:26.740
> 
> 标签：meteor

我正在尝试在 Meteor 应用程序中使用两个 .less 文件。所有文件都在一个 Meteor 应用程序文件夹中。我有一个定义一般 UI 外观的 .less 文件

在 ui.less 中：

```
.ui-gradient-topdown(@from, @to) {  
   background-color: @from; 

   /* Safari 4+, Chrome 1-9 */
   background-image: -webkit-gradient(linear, 0% 0% 0% 100%, from(@from), to(@to));

   /* Safari 5.1+, Mobile Safari, Chrome 10+ */
   background-image: -webkit-linear-gradient(top, @from, @to); 

   /* Firefox 3.6+ */
   background-image: -moz-linear-gradient(top, @from, @to);

   /* IE 10+ */
   background-image: -ms-linear-gradient(top, @from, @to);

   /* Opera 11.10+ */
   background-image: -o-linear-gradient(top, @from, @to);
} 
```

在 myapp.less

```
@import "ui";

html {
    min-height: 100%;
    min-width: 320px;
}

body {
  .ui-gradient-topdown(#000, #FFF);
}

#new_message_input {
  background: #F00; 
  overflow: scroll;
} 
```

但是，在 Meteor 提供的页面中，我得到：

```
<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="/ui.less.css">

  ... more stuff below ... 
```

未导入 myapp.less 样式表？

我想要一个可以@import 各种 mixin .less 文件的 app .less 文件。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-05-07T20:30:50.740

因为这个问题似乎仍然存在，所以我尝试回答它。

在较新版本的流星（从 v0.7.1.1 开始）`.lessimport`中已弃用。新方法是`.import.less`。达到它的方法是：

```
// client/mixins.import.less

.opacity(@opacity) {
  opacity: @opacity;
  // IE8 filter
  @opacity-ie: (@opacity * 100);
  filter: ~"alpha(opacity=@{opacity-ie})";
} 
```

然后在你想要使用你的mixin的样式表中@import它：

```
// client/main.less

@import "mixins.import.less";
// relative to the current file
// if absolute it will be relative to your project root

.some-div {
  .opacity(0.5);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T03:41:55.127

来自[流星文档](http://docs.meteor.com/#less)：

> 如果你想@import 一个文件，给它扩展名 .lessimport 以防止 Meteor 独立处理它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T15:55:16.457

我来了：

将所有较少的文件放在“客户端”文件夹中。

Meteor 编译它们，因此不需要导入语句。

导入函数效果很好！变量会破坏事物。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-12T00:20:22.033

我没有足够的声誉来为@EzRaM 发表评论，作为 Meteor 初学者，我有点挣扎，我希望这对其他人有所帮助。

在 Meteor 1.6 中，我想包含 myOwnMixins.less 文件以从 node_module @import 另一个 .less 文件，这就是我所做的：

1) /client/myOwnMixins.less (无需重命名*.import.less)

```
 @import '/node_modules/antd/lib/style/themes/default.less';

    .right {
      float: right;
      height: 100%;
    }

    ... more less code ... 
```

2）/imports/ui/layout/MyHeader.js，不需要导入/client/myOwnMixins.less文件，因为.less是由meteor编译并默认包含的，只需使用className即可。

```
 <div className="right">Right Aligned</div> 
```

# android - 将 adb 命令转换为程序代码

> ID：10442208
> 
> 赞同：1
> 
> 时间：2012-05-04T03:12:17.203
> 
> 标签：android, adb

我知道在 android 中我可以使用 adb 命令

```
adb shell getprop ro.hardware 
```

获取有关 android 的信息，我还使用以下代码获取相同的信息：

```
String line = "";

try {
    Process ifc = Runtime.getRuntime().exec("getprop   ro.hardware");
    BufferedReader bis = new BufferedReader(new InputStreamReader(ifc.getInputStream()));
    line = bis.readLine();
} catch (java.io.IOException e) {
}

ifc.destroy(); 
```

所以我的问题是所有的 adb 命令都可以转换为程序吗？而adb reboot recovery怎么改程序代码呢？

# macos - 阻止 OSX 拦截选项/alt/meta 键组合

> ID：10442210
> 
> 赞同：2
> 
> 时间：2012-05-04T03:12:22.790
> 
> 标签：macos, osx-lion, keyboard-shortcuts, key-bindings, utf

我用谷歌搜索了一下，无法弄清楚：如何让 OSX 停止拦截 alt/option/meta 键组合并插入花哨的 utf 字符，而不是将组合键传递给应用程序？假设我在 Emacs 中，通常 Mg Mg 必然是 goto-line。在 OSX lion 上它插入 ©。大多数 alt+ 绑定都会发生这种情况

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:28:57.690

你使用的是什么版本的 Emacs？我在 OS X Lion 上有 GNU Emacs 23.4.1，并且选项键的行为与 Emacs 元一样。

确保您的 Emacs 初始化文件中没有任何内容可以将选项键配置为不同的行为。通过启动 Emacs 而不加载您的 init 文件进行确认。从终端输入：

/Applications/Emacs.app/Contents/MacOS/Emacs -Q

# javascript - 移动 HTML5 应用本地存储

> ID：10442211
> 
> 赞同：1
> 
> 时间：2012-05-04T03:12:34.597
> 
> 标签：javascript, html, local-storage, web-sql, indexeddb

快速概述我所拥有的以及与之相关的问题。我有一个 HTML5 应用程序，我将使用 PhoneGap 作为本机应用程序运行。它是当地实地考察站的小型数据采集应用程序。

这个现场站的问题是它们容易丢失信号来传输数据；因此我想将数据存储在设备上供以后使用（或将其发送到服务器）。

需要保存的数据如下：

```
*User Name (string)
*Transect Color (string)
*Transect Number (int)
*Transect Board (char)
*Salamander Name (string)
*Snount-Vent Length (int)
*Total Length (int)
*Centipedes (int)
*Red-Black Millipedes (int)
*Brown Round Millipedes (int)
*Brown Flat Millipedes (int) 
```

该应用程序本身将是一个独立的应用程序，因此我希望它能够保存数据。

结合使用 jQuery 和 HTML5，最好的方法是什么？我知道 Web SQL 已被弃用，但我相信这可能是我存储这些数据的唯一方式。如果不是，那么在发送之前动态存储 X 个条目的最佳方法是什么？

谢谢您的帮助。

编辑：

这种情况怎么样，当研究人员要做“全横断面”的时候……

研究人员必须从一个位置到另一个位置，直到完成每个样带的 20 次完整数据收集。这需要 20 个不同的地点，每个地点都有不同数量的蝾螈和小动物要输入。

`localstorage`当只允许 Key:Value 对时，你将如何存储更大的数据集，以便在最后卸载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:29:13.397

我非常喜欢将[localStorage](https://developer.mozilla.org/en/DOM/Storage)包装在一个迷你键值存储中：

```
window.storage = {
  store:localStorage,
  get: function( key ) {
    try {
      return JSON.parse(this.store[key]);
    } catch(e) {};
    return undefined;
  },
  set: function( key, value) {
    try {
      this.store[key] = JSON.stringify(value);
    } catch(e) {};
  }
} 
```

这使您可以`window.storage`直接引用。假设您将描述的字段包装在名为 的哈希中`row`，您现在可以直接序列化：

```
storage.set('myrow', row); 
```

由于您存储的数据`row`将被序列化，因此您可以创建一个`document`包含比单个 SQL 行更多的信息的信息：

```
var document = {
  property: 'foo',
  nestedArray: [ 'foo', 'bar', 'baz' ],
  nestedObj: { 'key': 'foo', 'key2': 'foo' }
}

storage.set('transectID', document); 
```

...你明白了。关键是您甚至可以将非常丰富的数据减少`JSON.stringify`并以可恢复的形式保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T03:24:43.650

例如：

```
var data = {
  name: 'x',
  transect_color: 'red'.
  .....
  ..
};

localStorage.setItem('mydata', JSON.stringify(data));  // mydata is the name of storage 
```

要获取数据，您可以尝试如下：

```
var temp = localStorage.getItem('mydata');

if(temp != null) {
  var dataJSON = JSON.parse(temp);
} 
```

如果要清除 localStorage 数据，请执行以下操作：

```
localStorage.clearItem('mydata'); 
```

您可以存储多个数据，如下所示：

```
var x = [];  // take an array to store all data

x.push({a: 'x', b: 'y'});

localStorage.setItem('mydata', JSON.stringify(x));

// for further entry

var temp = JSON.parse(localStorage.getItem('mydata')); // retrieve localStroage item

temp.push({a: 'xx', b: 'yy'})  // push new data to array

localStorage.setItem('mydata', JSON.stringify(t)); // overwrite the existing entry with new data

console.log(JSON.parse(localStorage.getItem('data'))); // you will see your all data here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T04:23:35.523

将大型数据集存储在`localStorage`.

**WebSQL 已弃用**。[IndexedDB](http://www.w3.org/TR/IndexedDB/)是较大的浏览器内数据集的首选工具，但在 PhoneGap 中尚不可用（尽管它应该在路线图上）。

与直觉相反，即使 WebSQL 规范不会被进一步开发，[WebSQL 仍然是最广泛支持的](http://caniuse.com/#search=websql)选项，而 IndexedDB 仍然是新生的。

如果您使用 localStore 路线，就像使用移动设备一样，您应该尽可能信任内存中的表示，并且只有在无法从内存中读取时才从“磁盘”中读取。

# php - PHPunit 测试模拟 getRequest->getHeader('referer') 的正确方法

> ID：10442216
> 
> 赞同：3
> 
> 时间：2012-05-04T03:13:33.800
> 
> 标签：php, oop, zend-framework, phpunit

我正在编写单元测试，要求我`getRequest->getHeader('referer')`在 Zend 框架中使用或模拟，其中引用者有一个条件来确定是否根据其值设置新会话。

正确测试它的最佳方法是什么？

我应该简单地模拟控制器并调用标头请求，`$controller->getRequest->getHeader('referer')`还是需要模拟请求对象？

显然，由于这是一个单元测试，只是在模拟这种行为以确保代码正常工作，所以我什至不确定如何模拟 url 请求标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:52:47.020

您应该将自己的请求对象注入到框架中。我建议使用`Zend_Controller_Request_HttpTestCase`它，因为它可以让您完全灵活地设置所有各种属性（标题、查询、正文、uri、cookie 等）。您将能够设置自己的引用并测试您的应用程序的反应。

# php - OpenSSL 加密“零长度密码”错误

> ID：10442217
> 
> 赞同：0
> 
> 时间：2012-05-04T03:13:38.667
> 
> 标签：php, openssl

这就是我所拥有的：

```
$password = openssl_random_pseudo_bytes(245);
$passwdtemp = tempnam('/tmp', mt_rand());
file_put_contents($passwdtemp, $password);
passthru('openssl aes-256-cbc -salt -in infile.png -out outfile.png -kfile ' . $passwdtemp; 
```

每隔一百次左右，passthru 会给我一个错误“零长度密码”，从 OpenSSL 传递。这与文件不存在时发生的错误“无法从 /private/tmp/7503675258rhTiX 读取密钥”不同。

我觉得这与 openssl_random_pseudo_bytes 生成的密码有关。有什么办法可以让它正常工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:33:17.393

根据[OpenSSL docs](http://openssl.org/docs/apps/enc.html#)，该`-kfile`选项从文件的第一行读取密码。这意味着密码包含文本，而不是二进制数据。

如果您的随机数据恰好以换行符开头，则文件中的第一“行”为空。所以我猜这个问题每两百五十六次左右就会出现一次。:-)

在将其存储到文件中之前尝试`$password`从二进制转换为可打印的十六进制字符，或者（如果您想要更大的密钥空间）丢弃不可打印的字节。

您可能还想确保文件只能由您读取；否则密码可用于窥探。

# vb.net - 使用 word.application 打印会导致错误“出现打印机错误”

> ID：10442227
> 
> 赞同：2
> 
> 时间：2012-05-04T03:15:11.437
> 
> 标签：vb.net, printing, ms-word

使用以下代码时

```
 Dim oWordApp As Word.Application
                Dim oTargetDoc As Word.Document
                oWordApp = New Word.Application

                Select Case SQLdr("Priority")
                    Case 1
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority1, DoNotSetAsSysDefault:=1)
                    Case 2
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority2, DoNotSetAsSysDefault:=1)
                    Case 3
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority3, DoNotSetAsSysDefault:=1)
                    Case 4
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority4, DoNotSetAsSysDefault:=1)
                    Case 5
                        oWordApp.WordBasic.FilePrintSetup(Printer:=printPriority5, DoNotSetAsSysDefault:=1)
                End Select

                oTargetDoc = oWordApp.Documents.Open(SQLdr("DocumentName") & ".doc")
                oWordApp.PrintOut()
                oWordApp.Documents.Close()
                oWordApp.Quit() 
```

使用 FilePrintSetup 设置打印机时发生错误。

如果我手动打开 word 并打印文档，它工作正常。

我使用的打印机是网络打印机，看起来像“\\mhiav202\HP CM8060 MFP Priority 1”等。

我也可以使用 Adob​​e Reader 打印，没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:12:16.690

请注意，fileprintsetup 方法的printername 参数区分大小写。XP 和 Win7 存储服务器\打印机名的方式不同，因此升级操作系统时可能会发现问题

# visual-studio - Visual Studio 设计器在尝试选择控件时打开单击事件代码

> ID：10442229
> 
> 赞同：0
> 
> 时间：2012-05-04T03:15:33.803
> 
> 标签：visual-studio, visual-studio-2010, windows-forms-designer

我在 Visual Studio 2010 中使用 C#。但是我最近在使用 Visual Studio 2008 时也遇到了这个问题。

当我简单地单击一个控件来选择它时，设计器的行为就像我双击该控件一样，窗口后面的代码将为该控件的默认事件打开。如果事件不存在，则创建一个存根，为我选择的每个控件创建一个存根。

今晚太频繁了，我不得不发布这个问题！是什么原因造成的，有什么办法可以纠正吗？如果没有，有没有办法关闭这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:19:53.877

我找到了解决方案。我的鼠标是问题。有时它会在我单击时注册双击。一个月前我买了一只新鼠标，从那以后就再也没有遇到过问题！手指交叉。

# android - adb 如何接听电话

> ID：10442232
> 
> 赞同：10
> 
> 时间：2012-05-04T03:16:15.603
> 
> 标签：android, service, android-intent, adb

我可以通过任何 adb 命令接听电话吗？我知道你可以通过“adb shell service call phone 2 s16”+15084157509来拨打一个号码。

电话服务可以接听电话还是我可以发送一些 adb 命令来操纵活动？

非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-11T17:26:07.203

adb shell 输入 keyevent KEYCODE_CALL

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-23T05:18:06.930

调用`TelephonyManager.answerRingingCall()`使用`adb shell service call phone 5`命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-10T08:22:01.050

这对我行得通：

```
 adb shell input keyevent 5 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-08-08T17:35:25.013

在远端设置以下属性以在 2 秒内自动接听来电

```
adb shell setprop persist.sys.tel.autoanswer.ms 2000 
```

要关闭自动应答，

```
adb shell setprop persist.sys.tel.autoanswer.ms 0 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-04T03:20:16.270

adb -s emulator-5554 shell am start -a android.intent.action.CALL -d 电话：555-5555

# php - 通过分隔某些单词来拆分/解析 PHP 字符串

> ID：10442233
> 
> 赞同：4
> 
> 时间：2012-05-04T03:16:20.517
> 
> 标签：php, string, parsing, split, explode

我搜索了 PHP 手册、Stackoverflow 和一些论坛，但我对一些 PHP 逻辑感到困惑。也许我只是累了，但我真的很感谢任何人对此提供的帮助或指导。

我有一个 PHP 字符串，比如：

```
 $string = 'cats cat1 cat2 cat3 dogs dog1 dog2 monkey creatures monkey_creature1 monkey_creature2 monkey_creature3'; 
```

最终，理想情况下，我希望我的最终输出看起来像这样，但现在只获取数组就更好了：

```
 <h2>cats</h2>
 <ul>
     <li>cat1</li>
     <li>cat2</li>
     <li>cat3</li>
 </ul>

 <h2>dogs</h2>
 <ul>
     <li>dog1</li>
     <li>dog2</li>
 </ul>

 <h2>monkey creatures</h2>
 <ul>
     <li>monkey_creature1</li>
     <li>monkey_creature2</li>
     <li>monkey_creature3</li>
 </ul> 
```

不过有一个问题，有时字符串会略有不同：

```
 $string = 'cats cat1 cat2 cat3 cat4 cat5 cats6 dogs dogs1 dogs2 monkey creatures monkey_creature1 lemurs lemur1 lemur2 lemur3'; 
```

无论如何，这是我在 Stackoverflow 上的第一个问题，提前感谢所有帮助人员！

**编辑：我在某些限制下工作，我无法更改字符串之前的任何代码。我知道所有的父母（'猫'，'狗'，'狐猴'，'猴子生物（有空间）'**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T03:32:52.760

我设计了一个无论“关键字”之间是否有空格都可以使用的答案，只要第一个关键字不是复数:)

下面是代码，请随意查看，你可以用文本做什么真的很漂亮:)

```
<?
$string = 'cats cat1 cat2 cat3 dogs dog1 dog2 monkey creatures monkey_creature1 monkey_creature2 monkey_creature3';

$current_prefix = '';
$potential_prefix_elements = array();

$word_mapping = array();

foreach(split(" ", $string) as $substring) {
    if(strlen($current_prefix)) {
        // Check to see if the current substring, starts with the prefix
        if(strrpos($substring, $current_prefix) === 0)
            $word_mapping[$current_prefix . 's'][] = $substring;
        else
            $current_prefix = '';
    }

    if(!strlen($current_prefix)) {
        if(preg_match("/(?P<new_prefix>.+)s$/", $substring, $matches)) {
            $potential_prefix_elements[] = $matches['new_prefix'];

            // Add an 's' to make the keys plural
            $current_prefix = join("_", $potential_prefix_elements);

            // Initialize an array for the current word mapping
            $word_mapping[$current_prefix . 's'] = array();

            // Clear the potential prefix elements
            $potential_prefix_elements = array();
        } else {
            $potential_prefix_elements[] = $substring;
        }
    }
}

print_r($word_mapping); 
```

这是输出，我已将其作为数组提供给您，因此您可以轻松构建 ul / li 层次结构:)

```
Array
(
    [cats] => Array
        (
            [0] => cat1
            [1] => cat2
            [2] => cat3
        )

    [dogs] => Array
        (
            [0] => dog1
            [1] => dog2
        )

    [monkey_creatures] => Array
        (
            [0] => monkey_creature1
            [1] => monkey_creature2
            [2] => monkey_creature3
        )

) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T03:55:58.363

您可能想要使用该`preg_match_all`函数并使用正则表达式。这样，您不必使用任何循环：

```
$matches = array();
$string = 'cats cat1 cat2 cat3 dogs dog1 dog2 monkey creatures monkey_creature1 monkey_creature2 monkey_creature3'
preg_match_all('/((?:[a-z]+ )*?[a-z]+s) ((?:[a-z_]+[0-9] ?)+)*/i', $string, $matches);

// $matches now contains multidemensional array with 3 elements, indices
// 1 and 2 contain the animal name and list of those animals, respectively
$animals = array_combine($matches[1], $matches[2]);
$animals = array_map(function($value) {
    return explode(' ', trim($value));
}, $animals);
print_r($animals); 
```

输出：

```
Array
(
    [cats] => Array
        (
            [0] => cat1
            [1] => cat2
            [2] => cat3
        )

    [dogs] => Array
        (
            [0] => dog1
            [1] => dog2
        )

    [monkey creatures] => Array
        (
            [0] => monkey_creature1
            [1] => monkey_creature2
            [2] => monkey_creature3
        )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T03:42:44.900

您的第二个示例作为字符串：

```
<?php

$parents = array('cats', 'dogs', 'monkey creatures', 'lemurs');
$result = array();

$dataString = 'cats cat1 cat2 cat3 cat4 cat5 cats6 dogs dogs1 dogs2 monkey creatures monkey_creature1 lemurs lemur1 lemur2 lemur3';
foreach ($parents as $parent) {
  // Consider group only if it is present in the data string
  if (strpos($dataString, $parent) !== false) {
    $result[$parent] = array();
  }
}
$parts = explode(' ', $dataString);
foreach (array_keys($result) as $group) {
  $normalizedGroup = str_replace(' ', '_', $group);
  foreach ($parts as $part) {
    if (preg_match("/^$normalizedGroup?\d+$/", $part)) {
      $result[$group][] = $part;
    }
  }
}
print_r($result); 
```

输出：

```
Array
(
    [cats] => Array
        (
            [0] => cat1
            [1] => cat2
            [2] => cat3
            [3] => cat4
            [4] => cat5
            [5] => cats6
        )

    [dogs] => Array
        (
            [0] => dogs1
            [1] => dogs2
        )

    [monkey creatures] => Array
        (
            [0] => monkey_creature1
        )

    [lemurs] => Array
        (
            [0] => lemur1
            [1] => lemur2
            [2] => lemur3
        )

) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T03:47:53.857

这是我的 0.50 美元

```
<?php
$parents = array('cats', 'dogs', 'lemurs', 'monkey creatures');

// Convert all spaces to underscores in parents
$cleaned_parents = array();
foreach ($parents as $parent)
{
        $cleaned_parents[] = str_replace(' ', '_', $parent);
}

$input = 'cats cat1 cat2 cat3 dogs dog1 dog2 monkey creatures monkey_creature1 monkey_creature2 monkey_creature3';

// Change all parents to the "cleaned" versions with underscores
$input = str_replace($parents, $cleaned_parents, $input);

// Make an array of all tokens in the input string
$tokens = explode(' ', $input);
$result = array();

// Loop through all the tokens
$currentParent = null; // Keep track of current parent
foreach ($tokens as $token)
{
    // Is this a parent?
    if (in_array($token, $cleaned_parents))
    {
        // Create the parent in the $result array
        $currentParent = $token;
        $result[$currentParent] = array();
    }
    elseif ($currentParent != null)
    {
        // Add as child to the current parent
        $result[$currentParent][] = $token;
    }
}

print_r($result); 
```

输出：

```
Array
(
    [cats] => Array
        (
            [0] => cat1
            [1] => cat2
            [2] => cat3
        )

    [dogs] => Array
        (
            [0] => dog1
            [1] => dog2
        )

    [monkey_creatures] => Array
        (
            [0] => monkey_creature1
            [1] => monkey_creature2
            [2] => monkey_creature3
        )

) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T03:59:50.223

认为我将无法提交最佳答案，因此决定以最少的行数运行。（开个玩笑，很抱歉代码非常脏）

```
$string = 'cats cat1 cat2 cat3 cat4 cat5 cats6 dogs dogs1 dogs2 monkey creatures monkey_creature1 lemurs lemur1 lemur2 lemur3';
$categories = array( 'cats', 'dogs', 'monkey creatures', 'lemurs' );

for( $i=0; $i<count( $categories ); $i++ ) $parts[] = @explode( ' ', strstr( $string, $categories[$i] ) );
for( $i=0; $i<count( $parts ); $i++ ) $groups[] = ($i<count($parts)-1) ? array_diff( $parts[$i], $parts[$i+1] ) : $parts[$i];
for( $i=0; $i<count( $groups ); $i++ ) for( $j=0; $j<count( $groups[$i] ); $j++ ) if( ! is_numeric( substr( $groups[$i][$j], -1 ) ) ) unset($groups[$i][$j]);

print_r( $groups ); 
```

您可能会注意到我的方法取决于元素应该具有数字后缀这一事实。这实际上是无稽之谈，但作为我们正在处理的输入。

我的输出是：

```
Array
(
    [0] => Array
        (
            [1] => cat1
            [2] => cat2
            [3] => cat3
            [4] => cat4
            [5] => cat5
            [6] => cats6
        )

    [1] => Array
        (
            [1] => dogs1
            [2] => dogs2
        )

    [2] => Array
        (
            [2] => monkey_creature1
        )

    [3] => Array
        (
            [1] => lemur1
            [2] => lemur2
            [3] => lemur3
        )

) 
```

# c# - 如果使用 MySQL 连接器，用户可以从我的软件中获取数据库信息吗

> ID：10442236
> 
> 赞同：1
> 
> 时间：2012-05-04T03:16:52.130
> 
> 标签：c#, mysql, security, connector

我在我的 C# 项目中使用 MySQL 连接器来直接连接到数据库以存储统计信息。我的问题是，如果我发布这个项目并且有人愿意尝试访问我的数据库，他们可以从软件中获取到我的数据库的连接字符串吗？我正在使用 SQL 连接器，因此我可以实时保存数据而不会生成大量 HTTP 请求，对于那些想知道为什么不直接在 HTTP 请求中发送数据的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T03:25:57.750

是的，如果他们会反编译您的应用程序。您可以混淆您的应用程序（*我不喜欢这样做。它可能会损坏您的应用程序。但如果您这样做，互联网上有很多混淆器。*）。对我来说，最好的方法是创建一个`Settings`文件，其中包含加密字符串，例如数据库名称、位置、用户名和密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T03:32:34.860

总是可以从可执行文件中提取纯文本字符串，但并不总是可行的。如果您想稍微加强安全性，请考虑以下几点：

- 通过将连接字符串（或只是密码）分段存储在您的应用程序中来混淆它，但这可能并不漂亮。

- 限制您硬编码到应用程序中的用户的访问权限

- 存储加密的密码，如果密钥存储在应用程序中，这仍然只是混淆（.NET 加密库中有一个不错的 AES 库。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T03:40:24.820

是的。这就是他们鼓励 N-Tier 方法的原因。您的应用程序应该通过 .NET Web 服务、WCF 服务、RIA 服务等。然后您的服务将访问数据库并从数据库中编辑、插入、选择数据。当然，您的服务将负责某种类型的身份验证过程并确定哪些角色和功能可用。例如，某些登录可能只有对 Orders 表的读取权限。有些人可能拥有完整的读/写/编辑管理员权限。一些登录可能只有对客户表的读取权限，甚至可能只有对他们自己的客户记录等的读取权限。

您永远不想将您的数据库登录凭据暴露给您自己网络之外的任何东西。即使您正在使用混淆或加密，如果您的应用程序在某些时候直接连接到数据库，它也必须发送这些凭据，这使黑客有机会拦截或捕获这些值。

通过使用 N 层架构，用户可以知道不是他们自己的登录名/用户名，以便获得更多特权。即使通过 SSL 谁关心他们是否破解如何使用他们自己的用户名/密码访问网络服务，如果它没有给他们任何比通过您的程序更多的访问权限，那也没什么大不了的。他们必须学习/窃取别人的密码，也许是管理员用户名/密码，您可以通过每月更改一次来轻松修复。

您提到在 HTTP 请求中发送连接字符串。一旦有人破解，您可以随心所欲地更改您的数据库用户名/密码，但他们已经知道如何破解它。换句话说，永远不要将您的 sa/DBowner 用户名密码放在您的应用程序中。为了使其安全，您需要通过某种类型的 Web 服务，该服务需要用户名和密码，并负责确定用户的权限。该服务应该在您自己的网络上，因此他们必须破解 Web 服务器或 IIS 才能真正侵入您的数据库。

有些人甚至会在 web 服务的配置文件中加密数据库的用户名/密码，但除非您在一家大型公司工作，许多管理员可以访问配置文件但只有少数几个管理员，否则这并不是必需的应该可以访问数据库。在我看来，配置文件中的纯文本很好，除非数据非常敏感，并且您有多个人能够访问不应该知道用户名/密码的配置文件。关键在于，只有贵公司中的人才能访问配置文件……运行不在贵公司中的应用程序的普通 joe 永远不应该有任何方法得到这个，除非他们物理侵入您的 IIS 服务器...在这种情况下，您会遇到更大的问题。

# css - 使用 :hover 覆盖动画

> ID：10442247
> 
> 赞同：8
> 
> 时间：2012-05-04T03:19:06.160
> 
> 标签：css, css-animations

我有以下 CSS 动画：

```
.border-strobe {
     -webkit-animation: border-strobe-animation 1.5s infinite ease-in-out;
}

@-webkit-keyframes border-strobe-animation {
    0% {border:2px solid #FF1d38;}
    50% {border:2px solid #000000;}
    100% {border:2px solid #FF1d38;}
} 
```

基本上，我想做的是：

• 例如，在悬停时（so `.border-strobe:hover`），我想将边框颜色更改为`#FF1D38`。

• 一旦我离开悬停，我想简单地让动画运行它的正常进程。

然而，问题是我的课程页面上有一些元素`.border-strobe`，我想及时保留它们。

是否有一种简单的方法可以使用悬停覆盖边框颜色并保持动画彼此一致，或者目前无法做到这一点？

那有意义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T18:18:08.140

您是否有理由让动画继续正常运行？

如果您想要的悬停颜色与动画的开始和结束相同，那么为什么不在悬停时终止动画，同时在悬停类中定义边框颜色？

这是我能得到的最接近的：http: [//jsfiddle.net/xsjJy/](http://jsfiddle.net/xsjJy/)

**更新**

我不敢相信我以前没有想到它！如果您愿意更改 HTML，则可以输入掩码跨度（或 div 或任何您想要的），然后在将鼠标悬停在边框闪光灯上时更改边框。

这是 jsFiddle 更新：http: [//jsfiddle.net/xsjJy/2/](http://jsfiddle.net/xsjJy/2/)

# forms - 验证表格

> ID：10442249
> 
> 赞同：0
> 
> 时间：2012-05-04T03:19:29.530
> 
> 标签：forms, validation

```
<script type="text/javascript">

//<![CDATA[

 function verifyForm()

{

  if( document.forms[0].age.value < 18 || >30)

    { 
      alert(" The age input is not valid.");
      return false;
    }

   alert("Form is valid");
   return true;

}

//]]>

</script>

</head>

<body>

Enter the following information. Fields denoted with a * are required.

<form action="" method="post" name="aform">

<table>

<tr><td>Enter first name</td><td><input type="text" name="first" /></td></tr>
<tr><td>Enter last name</td><td><input type="text" name="last" />*</td></tr>
<tr><td>Enter your age</td><td><input type="text" name="age" size="5" />*</td></tr>
<tr><td>Enter your sex</td><td><input type="text" name="sex" size="2" />*</td></tr>
<tr><td>Enter your favorite color</td><td><input type="text" name="color" /></td></tr>

<tr><td><input type="button" value="Submit" onclick="verify();" /></td></tr>

</table></form> 
```

我正在尝试验证这些表单，但每当我单击按钮验证它们时，什么都没有发生。你能帮我解释为什么什么都没有发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:23:08.950

它可能不起作用，因为您的函数被调用`verifyForm()`但您的按钮有`onclick="verify();"`

它应该是`onclick="verifyForm();"`

**Chrome 中的 Javascript 控制台：**
在 Chrome 中，如果您单击`wrench > tools > Javascript console`javascript 控制台，则会在您的浏览器窗口底部弹出。如果您选择“控制台”选项卡，您应该会收到警告和错误消息，说明 javascript 何时遇到问题。

# wordpress - 添加操作/网址

> ID：10442256
> 
> 赞同：0
> 
> 时间：2012-05-04T03:20:19.247
> 
> 标签：wordpress

WordPress 3.2.2

在 wordpress 管理员中定义自定义链接的步骤是什么，例如

```
http://localhost:8888/wp-admin/admin.php?action=update_posts 
```

这样当管理员可以访问此链接时，就会执行特定的功能。

（在自定义 wordpress 插件的上下文中）

**示例代码**

```
function my_special_function(){

    echo '<div> Hello World </div>';

}

$page_title = "Hello Page Title";
$menu_title = "Hello Menu Title";
$capability = "import";
$menu_slug = "My Menu Slug";
$function = my_special_function;
add_menu_page($page_title,  $menu_title, $capability, $menu_slug, $function); 
```

所以我有这个示例代码。怎么办？我应该加载什么 url 才能看到 html 页面上打印的 hello world？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:42:10.467

您可能会想要使用[`add_menu_page`](http://codex.wordpress.org/Function_Reference/add_menu_page). 这涉及两个步骤。首先，您需要定义一个函数（`my_menu_page`在下面的示例中）来创建菜单。

```
// inside plugin file
function my_menu_page ()
{
  $page_title = "Hello Page Title";
  $menu_title = "Hello Menu Title";
  $capability = "import";
  $menu_slug = "My Menu Slug";
  $function = my_special_function;

  add_menu_page($page_title,  $menu_title, $capability, $menu_slug, $function);
} 
```

一旦你得到了它，你将需要使用[`add_action`](http://codex.wordpress.org/Function_Reference/add_action)函数和钩子将它注册到 WP。对于管理菜单，`admin_menu`钩子可能是合适的。

```
// inside plugin file
add_action('admin_menu', 'my_menu_page'); 
```

# ruby-on-rails - 在我的 ruby on rails 应用程序中使用 nokogiri gem 时出现 LoadError

> ID：10442258
> 
> 赞同：1
> 
> 时间：2012-05-04T03:20:44.247
> 
> 标签：ruby-on-rails, gem, require

当我输入一个 require 语句来加载 nokogiri gem 时，我收到一个加载错误：*没有要加载的文件 -- nokogiri*

**要求：**

```
 require 'rubygems' 
  require 'nokogiri' 
```

**宝石文件：**

```
source 'https://rubygems.org'
source 'http://gems.github.com'

gem 'rails', '3.2.3'
gem 'rubygems'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

gem 'json'

# HTML Parser
gem 'nokogiri'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

我也在使用 ruby​​ v1.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T02:17:35.427

我和你有同样的问题，但最后我不需要那些“要求”来让它工作。

我遇到的问题是因为我在安装 nokogiri 后没有重新启动应用程序。一旦我重新启动应用程序，nokogiri 工作得很好，没有这 2 个“需要”行。我最后需要的唯一“要求”是“open-uri”，因为我试图废弃一个远程页面。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T01:12:39.903

我猜你确实把`require 'nokogiri'`config/boot.rb 放在里面了。那不是这样做的地方。

把它放在你想要使用它的文件的开头，或者放在一个初始化器中。

# android - 在强制关闭的情况下停止android服务

> ID：10442261
> 
> 赞同：0
> 
> 时间：2012-05-04T03:21:20.843
> 
> 标签：android, android-service, activity-lifecycle, ondestroy, forceclose

在我的 android 应用程序中，它在后台运行一个服务。它是一个媒体播放器应用程序。只要按下播放按钮，服务就会启动，而当用户按下停止按钮或正常关闭应用程序时，服务就会停止。实际上，我在关闭前台活动之前调用了 stopService() 方法。我需要在屏幕旋转期间保持服务处于活动状态。所以，我不会在前台活动的 onDestroy() 方法中停止服务。但我确实注意到，如果由于某种原因发生强制关闭，服务不会停止。

现在，在强制关闭的情况下如何停止服务？是否有任何特定的侦听器允许在强制关闭除 onDestroy() 之外的活动之前完成最后的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:10:22.590

您可以将可能导致强制关闭的代码部分包装在标准 try {} catch {} 块中，并在捕获到任何异常时停止服务。

# string - 对长字符串中多次出现的单词进行编号

> ID：10442262
> 
> 赞同：1
> 
> 时间：2012-05-04T03:21:30.120
> 
> 标签：string, perl, substitution

我有一个这样的字符串：

```
*******voltage:156.7;****current:44;****voltage:98;current:0.9;***voltage:45;*** 
```

其中***是我们不关心的冗长的垃圾。我们想要做的是产生一个相同的新字符串，但要找到每个“电压”并将其替换为电压 1、电压 2 等，因此每个电压读数都有一个唯一的键名。对于当前（和其他几个）也是如此。

目前尚不清楚在 Perl 中执行此操作的最巧妙方法是什么。它必须能够被熟练的 Perl 程序员和 EE 阅读。终极速度并不重要，我们更愿意坚持使用 Perl 的内置功能，而不是使用一些疯狂的模块。我们这些技术一般的人都没有找到一种方法来做到这一点，而不会使代码变得乱七八糟。

使用正则表达式可能有一个很好的方法，但如果它是一个复杂的仅限大师的正则表达式，没关系！

如果解决方案可以在古老的 Perl 版本 5.6 上运行，则第二个绿色复选标记

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T03:51:30.953

```
#!/usr/bin/env perl

use strict; use warnings;

my $s = q{*******voltage:156.7;****current:44;****voltage:98;current:0.9;***voltage:45;***};

my $counter = 0;

$s =~ s/(voltage)/$1 . ++$counter/ge;

print "$s\n"; 
```

输出：

`*******voltage1:156.7;****current:44;****voltage2:98;current:0.9;***voltage3:45; ***`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T23:41:12.917

这是思南答案的略微修改版本，增加了对“当前”的支持。通过修改正则表达式可以轻松添加其他标记。每个不同的令牌都有自己的计数器。

```
#!/usr/bin/env perl

use strict; use warnings;

my $s = q{*******voltage:156.7;****current:44;****voltage:98;current:0.9;***voltage:45;***};

my %counter;

$s =~ s/\b(voltage|current)\b/$1 . ++$counter{$1}/ge;

print "$s\n"; 
```

输出：

```
*******voltage1:156.7;****current1:44;****voltage2:98;current2:0.9;***voltage3:45;*** 
```

# python - SQLAlchemy 查询在多个 Tornado 实例之间不一致

> ID：10442265
> 
> 赞同：4
> 
> 时间：2012-05-04T03:22:16.420
> 
> 标签：python, sqlalchemy, tornado

我启动了 2 个龙卷风实例，例如。tornado-8000 和 tornado-8001，在上游使用 nginx。

当我在一个实例上插入数据时，在另一个实例上查询找不到该数据。

SQLAlchemy 查询如下：

```
topics = self.db.query(Topic).order_by(Topic.updated_at.desc()).limit(20) 
```

我的 SQLAlchemy 初始化如下：

```
class Application(tornado.web.Application):
    def __init__(self):
        # setup app
        from urls import handlers,ui_modules
        settings = dict(
            debug = options.debug,
            static_path = os.path.join(root_dir, "static"),
            xsrf_cookies = True,
            cookie_secret = "nzjxcjasduuqwheazmu293nsadhaslzkci9023nsadnua9sdads/Vo=",
            ui_modules = ui_modules,
        )
        tornado.web.Application.__init__(self, handlers, **settings)

        self.db = scoped_session(sessionmaker(bind=engine,autocommit=False,autoflush=False)) 
```

基本处理程序：

```
class BaseHandler(web.RequestHandler):
    @property
    def db(self):
        return self.application.db 
```

我的插入：

```
topic = Topic()
topic.title = u'abcdefg'
self.db.add(topic)
self.db.commit() 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:15:29.490

感谢@van。解决了。我覆盖了 tornado.web.RequestHandler 的 on_finish 方法并添加了 session.remove()。

# c# - 将 System.Drawing.Bitmap 缩放到给定大小，同时保持纵横比

> ID：10442269
> 
> 赞同：66
> 
> 时间：2012-05-04T03:22:41.510
> 
> 标签：c#, graphics, imaging

我想将 a 缩放`System.Drawing.Bitmap`到至少小于某个固定的宽度和高度。这是为网站上的图片库生成缩略图，所以我想保持纵横比相同。

我有很多解决方案，但似乎没有一个能真正满足我的需求；它们围绕基于保持宽度或高度相同但不改变两者的缩放。

一个例子：

如果我有一个 4272 x 2848 的图像并且我想将其缩放到 1024 x 768 的大小，那么生成的图像应该是 1024 x 683 并填充（带有黑色边框）到 1024 x 768。

我该如何处理大于所需尺寸且小于所需尺寸的图像，以及在缩放后无法达到我需要的确切尺寸的填充图像？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2013-10-24T11:57:30.630

位图构造函数内置了调整大小。

```
Bitmap original = (Bitmap)Image.FromFile("DSC_0002.jpg");
Bitmap resized = new Bitmap(original,new Size(original.Width/4,original.Height/4));
resized.Save("DSC_0002_thumb.jpg"); 
```

[http://msdn.microsoft.com/en-us/library/0wh0045z.aspx](http://msdn.microsoft.com/en-us/library/0wh0045z.aspx)

如果您想控制插值模式，请参阅[这篇文章](https://stackoverflow.com/questions/1922040/resize-an-image-c-sharp)。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-05-04T08:12:41.797

目标参数：

```
float width = 1024;
float height = 768;
var brush = new SolidBrush(Color.Black); 
```

您的原始文件：

```
var image = new Bitmap(file); 
```

目标大小（比例因子）：

```
float scale = Math.Min(width / image.Width, height / image.Height); 
```

调整大小包括首先刷画布：

```
var bmp = new Bitmap((int)width, (int)height);
var graph = Graphics.FromImage(bmp);

// uncomment for higher quality output
//graph.InterpolationMode = InterpolationMode.High;
//graph.CompositingQuality = CompositingQuality.HighQuality;
//graph.SmoothingMode = SmoothingMode.AntiAlias;

var scaleWidth = (int)(image.Width * scale);
var scaleHeight = (int)(image.Height * scale);

graph.FillRectangle(brush, new RectangleF(0, 0, width, height));
graph.DrawImage(image, ((int)width - scaleWidth)/2, ((int)height - scaleHeight)/2, scaleWidth, scaleHeight); 
```

并且不要忘记`bmp.Save(filename)`保存生成的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-20T23:33:37.930

只是为了添加到 yamen 的答案，这对于图像来说是完美的，但对于文本来说却不是那么好。

如果您尝试使用它来缩放文本，例如 Word 文档（在本例中以 Word Interop 中的字节为单位），您将需要进行一些修改，否则您会在旁边看到巨大的条形图。

可能并不完美，但对我有用！

```
using (MemoryStream ms = new MemoryStream(wordBytes))
{
    float width = 3840;
    float height = 2160;
    var brush = new SolidBrush(Color.White);

    var rawImage = Image.FromStream(ms);
    float scale = Math.Min(width / rawImage.Width, height / rawImage.Height);
    var scaleWidth  = (int)(rawImage.Width  * scale);
    var scaleHeight = (int)(rawImage.Height * scale);
    var scaledBitmap = new Bitmap(scaleWidth, scaleHeight);

    Graphics graph = Graphics.FromImage(scaledBitmap);
    graph.InterpolationMode = InterpolationMode.High;
    graph.CompositingQuality = CompositingQuality.HighQuality;
    graph.SmoothingMode = SmoothingMode.AntiAlias;
    graph.FillRectangle(brush, new RectangleF(0, 0, width, height));
    graph.DrawImage(rawImage, new Rectangle(0, 0 , scaleWidth, scaleHeight));

    scaledBitmap.Save(fileName, ImageFormat.Png);
    return scaledBitmap;
} 
```

# mysql - Mysql - 连接 - 返回太多行 - 每个连接表都有一个，但不想要那个

> ID：10442271
> 
> 赞同：0
> 
> 时间：2012-05-04T03:23:04.427
> 
> 标签：mysql, sql, database, mysql5

我有这种mysql db（表名/字段）

> **tbl_users** : id、title、已批准
> 
> **tbl_photos** : id、user_id、标题、文件名

我在用户中有一行，三张照片（全部带有 user_id = 用户的 id）

这样做：

```
select 
tbl_users.*, 
tbl_photos.filename 

from tbl_users 

left join tbl_photos on tbl_photos.user_id = tbl_users.id 

where tbl_users = '1' order by rand() 
```

（表查询简化了一点）

执行该 sql 查询返回三行。我只想要一行（即我想要用户行，加上任何具有该用户 ID 的 user_id 的随机照片）

我已经尝试了所有连接 - 左右内连接，但它们总是返回 3 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:33:34.563

您的代码应如下所示

```
select 
tbl_users.*, 
tbl_photos.filename 

from tbl_users 

left join tbl_photos on tbl_photos.user_id = tbl_users.id 

where tbl_users = approved order by rand() LIMIT 1 
```

LIMIT 关键字将限制查询只返回 1 行。

可以在这里找到一个简单的 mysql 命令示例列表 [http://itswadesh.wordpress.com/2011/04/12/mysql-commands/](http://itswadesh.wordpress.com/2011/04/12/mysql-commands/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:47:47.973

如果您只想为每行获取一行，这非常简单

```
select 
tbl_users.*, 
GROUP_CONCAT(tbl_photos.filename) as Photos

from tbl_users 

left join tbl_photos on tbl_photos.user_id = tbl_users.id 

where tbl_users = '1' order by rand() 
```

它将在单个字段中为您提供逗号分隔值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:06:20.560

如果 filename 是您将从 tbl_photos 检索的唯一字段，这可以提供您需要的内容：

```
select 
    tbl_users.*, 

    (select filename 
     from tbl_photos where user_id = tbl_users.id 
     order by rand()
     limit 1) as filename

from tbl_users 
```

* * *

如果您想从照片中获取其他信息，请执行以下查询：

```
select tbl_users.*, 'x' as separator, tbl_photos.*
from tbl_users
left join tbl_photos on tbl_photos.user_id = tbl_users.id
where (tbl_users.id, tbl_photos.id) in

    (  
    -- you can run this query independently
        select 

            id, 

            (select id 
             from tbl_photos 
             where user_id = tbl_users.id 
             order by rand() 
             limit 1) 

        from tbl_users
    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T03:39:35.273

您还添加`DISTINCT`：

```
select  DISTINCT tbl_users.id, 
        tbl_users.title, 
        tbl_users.approved, 
        tbl_photos.filename 
from tbl_users left join tbl_photos 
       on tbl_photos.user_id = tbl_users.id 
where tbl_users = 'approved' order by rand() 
```

# xpath - 具有多个谓词的 XPath

> ID：10442273
> 
> 赞同：2
> 
> 时间：2012-05-04T03:23:09.577
> 
> 标签：xpath, xslt-2.0, predicates

我收藏了不同作者的戏剧和诗歌。我的 XML 如下所示：

```
<works>
    <editions>
       <edition>
           <playtitle>Henry IV, Part 1</playtitle>
           <playcode>1H4</playcode>
           <genre>play</genre>
           <metadataBlock>
               <meta content="Shakespeare, William" name="Creator"/>
           </metadataBlock>
       </edition>
    </editions>
</works> 
```

我已成功使用以下代码从所有戏剧中提取“播放代码”：

```
<xsl:when test="$only = 'plays'">
    <xsl:sequence select="/works/editions/edition[genre = 'play']/playcode"/>
</xsl:when> 
```

但是，我无法弄清楚如何从莎士比亚写的所有戏剧中提取“播放代码”。我尝试了多种可能性，例如：

```
<xsl:when test="$only = 'plays'">
    <xsl:sequence select="/works/editions/edition[genre = 'play' 
        and @content='Shakespeare, William' 
        and @name='Creator']/playcode"/>
</xsl:when> 
```

比如：

```
<xsl:when test="$only = 'plays'">
      <xsl:sequence select="/works/editions/edition[genre =       
        'play']/playcode/metadataBlock/meta[@content='Shakespeare, William' 
           and@name='Creator']"/>
</xsl:when> 
```

我错过了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:16:29.883

在您的第一个建议中，您尝试评估*版本*元素的*内容*和*名称*属性。由于它们不存在，因此生成的序列为空。因此，像这样修改 XPath 表达式，例如：

 *```
<xsl:when test="$only = 'plays'">
  <xsl:sequence select="/works/editions/edition[
    genre='play' and
    metadataBlock/meta[
      @content='Shakespeare, William' and
      @name='Creator'
    ]
  ]/playcode"/>
</xsl:when> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:11:22.733

**我会使用键——既方便又高效**：

```
key('kPlaysByAuthor', 'Shakespeare, William') 
```

**只选择`playcode`：**

```
key('kPlaysByAuthor', 'Shakespeare, William')/playcode 
```

**这是一个完整的例子**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:key name="kPlaysByAuthor" match="edition"
      use="metadataBlock/meta[@name='Creator']/@content"/>

     <xsl:template match="/">
         <xsl:copy-of select=
          "key('kPlaysByAuthor', 'Shakespeare, William')/playcode"/>
     </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<works>
    <editions>
       <edition>
           <playtitle>Henry IV, Part 1</playtitle>
           <playcode>1H4</playcode>
           <genre>play</genre>
           <metadataBlock>
               <meta content="Shakespeare, William" name="Creator"/>
           </metadataBlock>
       </edition>
       <edition>
           <playtitle>Some Title</playtitle>
           <playcode>XYZ</playcode>
           <genre>play</genre>
           <metadataBlock>
               <meta content="Someone, Else" name="Creator"/>
           </metadataBlock>
       </edition>
    </editions>
</works> 
```

**产生了想要的正确结果**：

```
<playcode>1H4</playcode> 
```*

# python - 比较 Python 中的两个列表

> ID：10442276
> 
> 赞同：1
> 
> 时间：2012-05-04T03:23:28.143
> 
> 标签：python, list, compare, beautifulsoup

所以这是我想要比较的代码。我想要做的是从路径目录中列出 appids，这是可行的。然后我试图去一个网站（f）。并解析 html 页面并获取该站点上列出的 appid。

我想要做的是从本地系统获取 appid，搜索 f（来自站点的应用程序 ID），然后返回 appid 是什么。

当我打印 appid 时：

```
D:\python>jump_me.py |more
1b4dd67f29cb1962
28c8b86deab549a1
431a5b43435cc60b
4975d6798a8bdf66
7e4dca80246863e3
8eafbd04ec8631
9b9cdc69c1c24e2b
bc03160ee1a59fc1 
```

当我打印 f 时，这是来自在线的解析数据，我得到：

```
65009083bfa6a094 | (app launched via XPMode) |
469e4a7982cea4d4 | ? (.job) |
b0459de4674aab56 | (.vmcx) |
89b0d939f117f75c | Adobe Acrobat 9 Pro Extended (32-bit) |
26717493b25aa6e1 | Adobe Dreamweaver CS5 (32-bit) |
e2a593822e01aed3 | Adobe Flash CS5 (32-bit) |
c765823d986857ba | Adobe Illustrator CS5 (32-bit) |
84f066768a22cc4f | Adobe Photoshop CS5 (64-bit) |
44a398496acc926d | Adobe Premiere Pro CS5 (64-bit) | 
```

我想将appid与f进行比较，并打印相应的项目：

喜欢 appid =`89b0d939f117f75c`

```
f = 89b0d939f117f75c | Adobe Acrobat 9 Pro Extended (32-bit) 
```

所以我希望它`89b0d939f117f75c | Adobe Acrobat 9 Pro Extended (32-bit)`根据目录列表返回。

有道理？

- - 代码 - -

```
import os
import sys
import urllib2
from BeautifulSoup import BeautifulSoup

path = ("C:\Users\<username>\AppData\Roaming\Microsoft\Windows\Recent\AutomaticDestinations")
for ids in os.listdir(path):
appid = "%s" % (ids).rstrip('.automaticDestinations-ms')
#print appid

f = urllib2.urlopen("http://www.forensicswiki.org/wiki/List_of_Jump_List_IDs")
s = f.read()

soup = BeautifulSoup(''.join(s))
rows = soup.findAll('tr')

for tr in rows:

    cols = tr.findAll('td', limit=2)
    for td in cols:
        text = ''.join(td.findAll(text=True))

        print text + " |",
    print "\n".strip()
f.close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:31:08.547

从 f 制作字典并使用 appid 作为键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:32:22.550

你想做这样的事情：

```
if appid == td.split('|')[0].strip():
    print td 
```

我认为。但我不清楚任何数据实际上在哪里：您的示例检索数据与您使用 BeautifulSoup 所做的不匹配：这`td`可能是检查的错误位置。

关键是您需要`appid`与正在搜索的文本的某些子字符串进行比较。但是，您没有进行*任何*比较，因此我不知道您应该将其放在哪里。

# c# - 从文本文件中选择

> ID：10442278
> 
> 赞同：0
> 
> 时间：2012-05-04T03:24:03.440
> 
> 标签：c#, sql

我有文本文件列表，我需要选择包含并将其导入到 sql，当我使用 excel 表时，它给了我错误“C:\CETS\filename.TXT' 不是有效路径。使确保路径名拼写正确，并且您已连接到文件所在的服务器。” 我的代码。

```
 string strconn1 = "Provider=Microsoft.Jet.OLEDB.4.0;" 
                    + "Data Source=" 
                    + p_Excel_Path1 
                    + ";Extended Properties='text;HDR=Yes;FMT=Delimited(,)'";

 cmdOledb2.CommandText = "select * from [Sheet1$]"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:53:37.753

要使用 OLEDB 4.0 连接到文本文件数据源，连接字符串的数据源参数需要指定文本文件所在文件*夹*的全名，而不是文本文件本身。您的 SELECT 语句将指定文本文件名。

因此，在您对 的分配中`strconn1`，将您的`p_Excel_Path1`变量设置为`C:\CETS\`并将您的 SELECT 语句更改为：

```
select * from [filename.TXT] 
```

# c# - 如何清除图片框中的图形（矩形）

> ID：10442279
> 
> 赞同：3
> 
> 时间：2012-05-04T03:24:06.583
> 
> 标签：c#, winforms, picturebox, system.drawing

我创建了矩形用户控件，并在我的应用程序中使用此用户控件。在我的应用程序中，我正在处理图像以进行不同的操作，例如从图像中读取条形码等。这里我有两种处理图像的可能性，一种是处理整个图像图像和另一个正在处理图像的选定部分，我正在使用矩形选择图像的特定部分（这是用户控件）。所以我在我的 GUI 中为此目的提供了两个选项，一个是整个图像，另一个是矩形。如果我第一次使用矩形进行选择，下一次我选择了整个图像，那么之前选择的矩形形状不会从图片框中删除。那么我怎样才能从我的图片框中**清除这个矩形形状呢？**下图显示了图片框中的矩形形状 ![在此处输入图像描述](../Images/dde9a8a689b66a15ff63e490d2f8e6e7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:36:16.277

试试这个`Graphics.clear();`或`this.Invalidate();`

# iphone - 具有 topViewController 分配的应用程序 didFinishLaunchingWithOptions 中无法识别的选择器

> ID：10442283
> 
> 赞同：0
> 
> 时间：2012-05-04T03:25:01.387
> 
> 标签：iphone, ios

这是什么原因造成的？我在 Xcode 4.3 上运行 iOS 5.1 并使用 Storyboards。

```
'NSInvalidArgumentException', reason: '-[WFTopTableViewController topViewController]: unrecognized selector sent to instance 0x6d56f80'

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    // Initial view controller is a Table View Controller, so we look up the window's rootViewController.
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    // Set up the controller.
    WFTopTableViewController *controller = (WFTopTableViewController *)navigationController.topViewController;
    // Pass the controller the managed object context for the first time.
    controller.managedObjectContext = self.managedObjectContext;
    return YES;
} 
```

谢谢！阿曼达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:49:29.490

试试这个：

```
(BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions {
    WFTopTableViewController *controller = (WFTopTableViewController*)self.window.rootViewController; 
    controller.managedObjectContext = self.managedObjectContext; 
    return YES; 
} 
```

窗口的 rootViewController 已经是 WFTopTableViewController，而不是 UINavigationController。如果您希望反过来，请确保在 Interface Builder 中为 UINavigationController 选择“是初始视图控制器”选项。

# ruby-on-rails - 您是否需要为每个单独的 Rails 应用程序安装 gem

> ID：10442293
> 
> 赞同：0
> 
> 时间：2012-05-04T03:26:01.773
> 
> 标签：ruby-on-rails, rubygems, gem

正如标题所说，如果我在一个应用程序中使用 gem（安装它、添加到 Gemfile 等），我还需要`gem install xxx`在新应用程序中运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:28:54.630

不。

事实上，对于现代（Rails 3+）应用程序，您永远不需要运行`gem install`（当然，除了`gem install bundler rails`需要执行一次的初始应用程序），您只需将 gem 添加到您的 Gemfile 中，然后运行`bundle install`​​. 让 Bundler 为您处理依赖项和安装，这就是它的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T03:29:31.960

除非您不使用 Bundler，否则实际上您很少需要运行`gem install ...`。

通常情况下，除非您为每个项目使用不同的 Ruby，否则所有 gem 都位于文件夹中，这些文件夹在所有使用它们的项目中共享。如果您正在使用`rvm`，您可以通过运行来查看此目录`rvm gemdir`。

当您使用 Bundler 时，它会在您安装了多个版本的（可能）情况下自动处理加载适当版本的 gem。

# ios - UIPageControl 显示不正确的页面

> ID：10442294
> 
> 赞同：1
> 
> 时间：2012-05-04T03:26:23.053
> 
> 标签：ios, uiscrollview, uipagecontrol

我有一个 UIScrollView 包含几个表，以及一个 UIPageControl 跟踪用户当前正在查看的页面。它工作正常，直到我开始在 tableview 上向上滚动，此时 UIPageControl 调整并（错误地）说我们在第一页上。

这是我的代码：

```
- (void)scrollViewDidScroll:(UIScrollView *)_scrollView {
  if (pageControlIsChangingPage) {
    return;
  }

  /*
   *  We switch page at 50% across
   */
  CGFloat pageWidth = _scrollView.frame.size.width;
  int page = floor((_scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
  pageControl.currentPage = page;
} 
```

然后也是：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)_scrollView {
  pageControlIsChangingPage = NO;
} 
```

不知道究竟是什么导致这种情况发生。. . 有任何想法吗？我难住了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:22:26.563

我认为问题在于 UITableView 和 UIScrollView，因为它们都将委托设置为 self，所以它们都在调用相同的滚动视图方法。我在主滚动视图中添加了一个标签，然后在调整页面时通过对标签执行检查来解释它，就像这样

```
if (_scrollView.tag == 100) {

CGFloat pageWidth = _scrollView.frame.size.width;
int page = floor((_scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
pageControl.currentPage = page;

} 
```

最后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:39:37.510

当您滚动页面时，它是否正确滚动？

```
if (pageControlIsChangingPage)
  return; 
```

似乎当您不更改页面时（即您滚动表格视图），`return`将不会执行。所以

```
CGFloat pageWidth = _scrollView.frame.size.width;
int page = floor((_scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
pageControl.currentPage = page; 
```

部分将被执行，此时，`_scrollView.contentOffset.x`将小于`pageWidth / 2`（甚至可以`0`），因为您只需向上/向下滚动，结果`page`是`1`.

# iphone - 打算在其上安装企业应用程序的 iOS 设备是否需要任何特殊配置？

> ID：10442296
> 
> 赞同：1
> 
> 时间：2012-05-04T03:26:39.150
> 
> 标签：iphone, ios, ipad, provisioning

例如，要在 iOS 设备上部署测试应用程序，设备需要测试应用程序的配置文件，并且测试应用程序需要将设备放在自己的配置文件中。

这是否适用于企业应用程序，或者我可以只使用企业配置文件编译企业应用程序并将其分发到所有 iOS 设备？

# jquery - 弹出may dom-pdf输出的打印功能的最佳方法是什么

> ID：10442299
> 
> 赞同：0
> 
> 时间：2012-05-04T03:27:46.753
> 
> 标签：jquery, printing, pdf-generation

嗨，如果您有更好的打印 pdf 的方式，我想向您介绍 Guru

我使用 dompdf 生成了一个不错的 pdf 内容，它只是带有一个徽标的所有文本。

然后我有一个按钮，当它单击时，我的 php 脚本会将 pdf 保存在我的服务器文件夹中，然后当用户被重定向到最后一页时会发生什么......他/她有一个按钮来打印它..

所以 ？是否有自动打印 javascript / jquery 功能来自动打印 pdf 而不会显示它？

还是会显示但立即打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:17:05.460

dompdf (0.6 beta) 可以嵌入将打印 PDF 的 javascript（参见示例[Script > Javascript](http://pxd.me/dompdf/www/examples.php)）。为了在不显示的情况下打印它，您可以创建一个不可见的 iframe，并将此 iframe 的 ID 放在 PDF 链接的“目标”属性中。

```
<iframe style="position: absolute; left: -10000px" id="pdf-iframe" name="pdf"></iframe>

<a href="dompdf.php?foo=bar=baz" target="pdf-iframe">Print PDF!</a> 
```

请注意，我没有安装`display: none`iframe，因为这会使 iframe 在某些浏览器中“无法使用”。我认为这就是 Google Docs 打印系统的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:01:40.973

请尝试 Syncfusion 的 PDF Viewer 组件，它具有打印 PDF 文档的选项，您也可以使用它在 MVC 应用程序中显示 PDF 文档。[www.syncfusion.com ，您可以直接在http://mvc.syncfusion.com/sfreportingmvcsamplebrowser/MVC/10.1.0.44/PdfViewer_MVC/Samples/4.0/GettingStarted/ThroughView](http://mvc.syncfusion.com/sfreportingmvcsamplebrowser/MVC/10.1.0.44/PdfViewer_MVC/Samples/4.0/GettingStarted/ThroughView)位置尝试在线示例

-Suresh

# ios - 是否可以从适用于 iOS 的 AIR 应用程序导出 PDF

> ID：10442300
> 
> 赞同：2
> 
> 时间：2012-05-04T03:27:55.513
> 
> 标签：ios, actionscript-3, flash, air, alivepdf

我有一个从 Flash CS5.5 构建的应用程序，使用 AIR3.1 导出并通过 Apple 的企业设置分发（允许我绕过应用商店的批准）。

我现在正在尝试以某种方式将 PDF（使用 AlivePDF 生成）导出到 iPad 中，或者导入 iBooks，或者只是在 Safari 中打开它。

这就是我用于桌面版应用程序的内容。尽管脚本非常混乱，但它可以完成工作。我只是不知道如何将其转换并使其在 iPad 上运行

```
//Populate listbox component from array

function noEmpty(item:*, index:int, array:Array):Boolean{
  return item != undefined;
}

for(var i:int = 0; i < MovieClip(root).selectedProducts.length; i++) {
    if(MovieClip(root).selectedProducts[i] != undefined){
        selectedProductsText.dataProvider.addItem({label: MovieClip(root).selectedProducts[i]});
    }
}

var myTextFormat:TextFormat = new TextFormat();
myTextFormat.size = 20;
myTextFormat.font = "Arial";
myTextFormat.color = 0x000000;
myTextFormat.leftMargin = 30;
selectedProductsText.rowHeight = 40;

selectedProductsText.setRendererStyle("textFormat", myTextFormat);

//AlivePDF, generate PDF

import org.alivepdf.pdf.PDF;
import org.alivepdf.layout.Orientation;
import org.alivepdf.layout.Size;
import org.alivepdf.layout.Unit;
import org.alivepdf.display.Display;
import org.alivepdf.saving.Method;
import org.alivepdf.fonts.FontFamily;
import org.alivepdf.fonts.Style;
import org.alivepdf.colors.RGBColor;
import com.adobe.images.*;

function convertString(_value:String):String
{
 var returnString:String = "";
 var _chr:String = String.fromCharCode(13);
 var tempArray:Array = _value.split(_chr);
 for(var i:uint = 0; i < tempArray.length; i++)
  {
   returnString += tempArray[i] + "\n";
  }   
  return returnString;
}

var pdf:PDF = new PDF(); 

pdf.setDisplayMode (Display.REAL);     
pdf.addPage(); 

pdf.writeText(7, convertString(  MovieClip(root).selectedProducts.filter(noEmpty).join('\n')    ));

var buffer:ByteArray = pdf.save(Method.LOCAL); 
var file:FileReference = new FileReference(); 

//save PDF button

btnPdf.addEventListener( MouseEvent.CLICK, generatePDF );

function generatePDF ( e:MouseEvent )
{
    file.save(buffer, "Product Selection List.pdf");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:41:13.947

在使用 AIR for iOS 完成一些工作后，我想说您的问题是您需要更改文件在设备上的保存和存储方式。

您需要使用我用来存储 jpg 图像的类似内容将文件保存到应用程序存储目录：

```
f = File.documentsDirectory.resolvePath(imagename+".jpg");      
stream = new FileStream();
stream.open(f, FileMode.WRITE);                                         
j = new JPGEncoder(80);     
bytes = new ByteArray();
bytes = j.encode(snapShot.bitmapData);
stream.writeBytes(bytes, 0, bytes.bytesAvailable);
stream.close(); 
```

我不确定如何或是否可以通过 AIR 将 pdf 发送到 iBooks。您可以在您的应用程序中使用 StageWebView 来显示 PDF。

# ruby-on-rails - 为什么我不断收到此错误：未定义的方法 new_message_path

> ID：10442303
> 
> 赞同：1
> 
> 时间：2012-05-04T03:28:28.793
> 
> 标签：ruby-on-rails, ruby

所以我在 Rails 应用程序（railstutorial twitter 克隆）上做了一个快速的 ruby​​。我的源代码与[https://github.com/railstutorial/sample_app_2nd_ed](https://github.com/railstutorial/sample_app_2nd_ed)相同。

然后我尝试使用[http://railscasts.com/episodes/262-trees-with-ancestry?view=asciicast](http://railscasts.com/episodes/262-trees-with-ancestry?view=asciicast)添加对消息的回复。我的评论在底部 BigBoy1337。这就是它所说的：

我不断收到错误消息

```
undefined method `new_message_path' 
```

这是在`app/views/messages/_messages.html.erb`

为了

```
<%= link_to "Reply", new_message_path(:parent_id => message) %> 
<% if current_user?(message.user) %>
<%= link_to "delete", message, method: :delete,
                     confirm: "You sure?",
                     title: message.content %>
<% end %> 
```

知道在哪里定义 new_message_path 吗？我尝试添加

```
def new_message_path
end 
```

在`app/controllers/message/controllers`

......但它没有工作。我已经下载了源代码（https://github.com/BigBoy1337/railscasts-episodes/tree/master/episode-262/messenger-after）并且有效！但我找不到他们定义 new_message_path 的位置，但它有效。为什么它对他们有用，我怎样才能让它对我有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:32:35.660

那是资源路线。尝试将以下内容添加到 routes.rb：

`resources :messages`

另外，请阅读： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T03:32:55.717

`new_message_path`中定义`routes.rb`。

寻找这一行：

```
resources :messages 
```

阅读[本文](http://guides.rubyonrails.org/routing.html)以了解 Rails 路由。

# python - 块/继承/扩展的好处包括

> ID：10442306
> 
> 赞同：0
> 
> 时间：2012-05-04T03:28:55.927
> 
> 标签：python, django

所以我正在使用 django 构建一个应用程序。我团队中的一些人认为我应该在模板中使用包含，而不是遵循块/扩展范例。他们认为：

*   对于未来的维护者来说，继承是太多的逻辑
*   包含更容易遵循
*   我们不应该将未来的维护限制在“django 程序员”身上

我真的不想破坏我的应用程序的模板，所以我试图提出一些令人信服的理由（对于非 django 用户）来说明为什么继承确实是前进的方向。我很想听听对此的更多看法。

我已经想出了几个原因：

*   更干燥。确保样板 html 结构只需要在一个地方定义；模板不同步的风险大大降低

*   保留属于模板、模板和视图之外的内容；例如：

    `<title>{% block title %}My Website{% endblock %}</title>`

    对比

    `<title>{{ pagetitle }}</title>`

    这使前端维护者可以更好地控制前端，而无需深入研究后端视图

*   前端编码人员已经必须熟悉从基本/覆盖默认值扩展的继承概念；考虑以下CSS：

    ```
    .nav {
      color: blue;
    }

    .nav.active {
      color: purple;
    } 
    ```

有什么好的推理可以加入其中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:14:38.087

使用继承可以更容易（至少恕我直言）创建主 base.html 模板并让所有其他页面`extends`使用它。这使得所有布局/样式都在该文件中指定，其余的只是以标准化方式使用`id`标签`class`。

最好记住`extends`（以及`include`）的参数可以是*变量*。我们`templates/base.html`是一行：

```
{% extends base_template %} 
```

where`base_template`在我们的主上下文处理器中设置。这与更改的简单管理小部件一起`session.base_template`，允许我们的设计师创建多个布局并通过单击在它们之间切换。她绝对喜欢它。

# javascript - 为什么 JavaScript（或 ECMAScript）不允许 var(x)=1？

> ID：10442308
> 
> 赞同：1
> 
> 时间：2012-05-04T03:29:21.403
> 
> 标签：javascript

这可能不是最明显的问题，但在我看来，变量声明在 JavaScript 中具有唯一强制的语义空白。这个对吗？您可以在其他构造中避免它，例如这些。

```
new(XMLHTTPRequest)
typeof(x)
'a'in(x)
(a)in(x) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:32:04.970

可能是这样你不会认为变量名是`(x)`，但`x`你不会做这样的事情：

```
var (x) = "foo";
(x).indexOf('f') 
```

但我认为最好的答案是：

这就是他们设计 javascript 的方式。（感谢上帝！）

# sql - 如何阻止联接在匹配查询中添加行？

> ID：10442310
> 
> 赞同：1
> 
> 时间：2012-05-04T03:29:43.990
> 
> 标签：sql, sql-server, join, functional-programming

我很难将我想要的东西翻译成函数式编程，因为我认为是命令式的。基本上，我有一张表格和一张期望表。在期望视图中，我希望它查看表单表并告诉我是否每个人都找到了匹配项。但是，当我尝试使用连接来完成此操作时，当两个或多个表单匹配时，连接会将行添加到 Expectation 表中。我不想要这个。

以一种命令式的方式，我想要这样的等价物：

```
ForEach (row in Expectation table)
{
    if (any form in the Form table matches the criteria)
    {
         MatchID = form.ID;
         SignDate = form.SignDate;
         ...
    }
} 
```

我在 SQL 中拥有的是：

```
SELECT
    e.*, match.ID, match.SignDate, ...
FROM
   POFDExpectation e LEFT OUTER JOIN
   (SELECT MIN(ID) as MatchID, MIN(SignDate) as MatchSignDate, 
        COUNT(*) as MatchCount, ...
    FROM Form f
    GROUP BY (matching criteria columns)
        ) match
        ON (form.[match criteria] = expectation.[match criteria]) 
```

哪个工作正常，但速度很慢，每次有两个匹配项时，都会在期望结果中添加一行。从数学上讲，我知道连接是交叉乘法，这是意料之中的，但我不确定没有它们如何做到这一点。也许是子查询？

我无法提供有关实施的更多详细信息，但我很乐意尝试任何建议并用结果做出回应。我有 880 个期望行，并返回 942 个结果。如果我只允许匹配一种形式的结果，我会得到 831 个结果。两者都不是可取的，所以如果你的让我正好达到 880，那么你的就是公认的答案。

编辑：我使用的是 SQL Server 2008 R2，但最好使用通用解决方案。

示例代码：

```
--DROP VIEW ExpectationView; DROP TABLE Forms; DROP TABLE Expectations;
--Create Tables and View
CREATE TABLE Forms (ID int IDENTITY(1,1) PRIMARY KEY, ReportYear int, Name varchar(100), Complete bit, SignDate datetime)
GO
CREATE TABLE Expectations (ID int IDENTITY(1,1) PRIMARY KEY, ReportYear int, Name varchar(100))
GO
CREATE VIEW ExpectationView AS select e.*, filed.MatchID, filed.SignDate, ISNULL(filed.FiledCount, 0) as FiledCount, ISNULL(name.NameCount, 0) as NameCount from Expectations e LEFT OUTER JOIN 
(select MIN(ID) as MatchID, ReportYear, Name, Complete, Min(SignDate) as SignDate, COUNT(*) as FiledCount from Forms f GROUP BY ReportYear, Name, Complete) filed
on filed.ReportYear = e.ReportYear AND filed.Name like '%'+e.Name+'%' AND filed.Complete = 1 LEFT OUTER JOIN 
(select MIN(ID) as MatchID, ReportYear, Name, COUNT(*) as NameCount from Forms f GROUP BY ReportYear, Name) name 
on name.ReportYear = e.ReportYear AND name.Name like '%'+e.Name+'%'
GO
--Insert Text Data
INSERT INTO Forms (ReportYear, Name, Complete, SignDate)
SELECT 2011, 'Bob Smith', 1, '2012-03-01' UNION ALL
SELECT 2011, 'Bob Jones', 1, '2012-10-04' UNION ALL
SELECT 2011, 'Bob', 1, '2012-07-20'
GO
INSERT INTO Expectations (ReportYear, Name)
SELECT 2011, 'Bob'
GO
SELECT * FROM ExpectationView --Should only return 1 result, returns 9 
```

'filed' 表明他们已经完成了一个表格，'name' 表明他们可能已经开始了一个但没有完成它。我的观点有四种不同的“匹配标准”——每一种都更严格一些，而且每一种都算数。'Name Only Matches'、'Loose Matches'、'Matches'（默认）、'Tight Matches'（在有多个默认匹配时使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T03:49:12.180

当我想保持 JOIN 类型的查询格式时，我就是这样做的：

```
SELECT
    e.*, 
    match.ID, 
    match.SignDate, 
    ...
FROM        POFDExpectation e 
OUTER APPLY (
    SELECT  TOP 1
        MIN(ID) as MatchID, 
        MIN(SignDate) as MatchSignDate, 
        COUNT(*) as MatchCount, 
        ...
    FROM    Form f
    WHERE   form.[match criteria] = expectation.[match criteria] 
    GROUP BY ID (matching criteria columns)   
    -- Add ORDER BY here to control which row is TOP 1
    ) match 
```

它通常也表现更好。

* * *

从语义上讲，{CROSS|OUTER} APPLY (table-expression) 指定了一个 table-expression，它为 FROM 子句的前面 table 表达式中的每一行调用一次，然后加入它们。然而，实际上，编译器将它几乎等同于 JOIN。

实际的区别在于，与 JOIN 表表达式不同，APPLY 表表达式会为每一行动态重新计算。因此，它不是使用 ON 子句，而是依靠自己的逻辑和 WHERE 子句来限制/匹配其行与前面的表表达式。这也允许它在自己的内部子查询表达式***中***引用前面表表达式的列值。（这在 JOIN 中是不可能的）

我们在这里想要这个而不是 JOIN 的原因是我们需要在子查询中使用 TOP 1 来限制其返回的行，但是，这意味着我们需要将 ON 子句条件移动到内部 WHERE 子句所以它将在评估 TOP 1***之前应用。***这*意味着*我们在这里需要一个 APPLY，而不是更常见的 JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:07:19.597

@RBarryYoung 回答了我提出的问题，但还有第二个问题我没有说得很清楚。我真正想要的是他的回答和[这个问题](https://stackoverflow.com/questions/10444333/sql-server-how-can-i-use-the-count-clause-without-grouping/10444613)的结合，所以为了记录，这就是我使用的：

```
SELECT
    e.*, 
     ...
    match.ID, 
    match.SignDate, 
    match.MatchCount
FROM 
    POFDExpectation e 
    OUTER APPLY (
        SELECT  TOP 1
            ID as MatchID, 
            ReportYear,
             ...
            SignDate as MatchSignDate, 
            COUNT(*) as MatchCount OVER ()
        FROM
            Form f
        WHERE
            form.[match criteria] = expectation.[match criteria]
        -- Add ORDER BY here to control which row is TOP 1
        ) match 
```

# ruby-on-rails - Rails 嵌套资源路由

> ID：10442313
> 
> 赞同：0
> 
> 时间：2012-05-04T03:30:25.330
> 
> 标签：ruby-on-rails, nested-routes

我对 Rails 很陌生，我认为我没有完全理解路由。当我尝试访问编辑操作时，出现以下错误：

```
ActiveRecord::RecordNotFound in StoreController#show

Couldn't find Gear with id=edit
Rails.root: /Users/dave/rails_projects/outdoor

Application Trace | Framework Trace | Full Trace
app/controllers/store_controller.rb:7:in `show'
Request

Parameters:

{"user_id"=>"104",
 "id"=>"edit"}
Show session dump

Show env dump

Response

Headers:

None 
```

**这是我对引发此错误的链接的看法：**

```
 <li><%= link_to "Store Appearance", edit_user_store_path(@user) %></li> 
```

**这是我的嵌套路线：**

```
 resources :users do
    resources :store
  end 
```

**这是我的控制器**

```
class StoreController < ApplicationController
  def index
     @store = current_user.gears.paginate(page: params[:page])
  end

  def show
     @gears = Gear.find(params[:id]).user.gears.paginate(page: params[:page])
  end

  def edit
  end

  def update
  end
end 
```

**模型店**

```
class Store < ActiveRecord::Base
  attr_accessible :storeimage, :storename
  belongs_to :user

  validates :user_id, :presence => true

end 
```

**模型用户**

```
class User < ActiveRecord::Base

  attr_accessible :first_name, :last_name, :email, :password, :password_confirmation, :userimage, :remove_userimage
  has_secure_password
  has_many :gears
  has_many :comments, :dependent => :destroy 
  has_one :store, :dependent => :destroy
  before_save :create_remember_token
  require 'carrierwave/orm/activerecord'
  mount_uploader :userimage, UserpicUploader

  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates :first_name,  presence: true,
                          length:  {:maximum => 50 }
  validates :last_name,  presence: true,
                         length:  {:maximum => 50 }
  validates :email,      presence: true,
                         format:  {:with => email_regex},
                         uniqueness:  {:case_sensitive => false}
  validates :password,   presence: true,
                         confirmation: true,
                         length: {within: 6..40}

  include Tire::Model::Search
  include Tire::Model::Callbacks

  def name
   first_name + " " + last_name
  end

  private

    def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
    end

end 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:35:20.617

当您访问 嵌套在 a 下的对象时，您需要在 URL 中同时传递 the`user_id`和params ，因此您的 URL 应如下所示：`id``store``user`

```
/users/1/stores/3/edit 
```

相对：

```
/users/1/stores/edit 
```

您还需要将这两个作为参数传递给您的路径助手，即：

```
edit_user_store_path(@user, @store) 
```

# android - 将数据保存到文件无法正常工作

> ID：10442314
> 
> 赞同：0
> 
> 时间：2012-05-04T03:30:39.493
> 
> 标签：android, save

我使用以下代码将密码保存在 txt 文件中：

```
String  FILE_NAME="lol.txt";
public void writeData(String password){
            FileOutputStream fOut = null;
            OutputStreamWriter osw = null;
            try{
                fOut = openFileOutput(FILE_NAME, Context.MODE_PRIVATE);
                osw = new OutputStreamWriter(fOut);
                osw.write(password);
                osw.close();
                fOut.close();
                }catch(Exception e){
                    e.printStackTrace(System.err);
                }
            } 
```

但是当我检索我刚刚使用 toast 保存的密码时，它看起来还可以，但是当我将它登录到我的 LogCat 时，我得到了如下内容：

```
gana???????????????????????????????????? .... and more four lines. 
```

我使用保存方法将单词 gana 保存到我的文件中，该方法用作 OnClikc 方法，将 EditText 的值设置为密码，如下所示：

```
public void save(View v){
            password= txt.getText().toString();
            writeData(password);
     } 
```

任何方式或线索我该如何解决这个问题？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:19:23.610

使用以下代码读取文件

```
byte[] b = null;
    try 
    {
        //read file data...
        FileInputStream myFile = openFileInput("lol.txt");
        b = new byte[1024];
        myFile.read(b);
        Log.i("Pass", "File data is: " + new String(b).trim());   
        myFile.close();
    } 
    catch (IOException e) 
    {
    } 
```

与您的代码的唯一区别是我`new String(b).trim()`用来删除空格。

# php - 在两个控制器 MVC 之间传递数据

> ID：10442317
> 
> 赞同：0
> 
> 时间：2012-05-04T03:30:50.247
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter，我有两个不同的控制器 - login.php 和 site.php

在 login.php 中

```
function credentials(){
    $user = $this->input->post('username');
    // there is some code here
} 
```

在 site.php 中，我有**函数 members_area()** 我需要将变量 $user 从 login.php 传递给 site.php。我该怎么做呢 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:50:09.607

如果您在这里谈论用户登录。在您的`Login`控制器中，您可以验证用户凭据。如果是这样，那么您需要设置一个会话变量

```
$this->sessions->set_userdata('user_id',$user_id);
redirect('site/members_area'); 
```

然后在您的`Site`控制器中，您从数据库中检索该用户的数据。

```
$current_user = $this->sessions->userdata('user_id'); 
```

您从数据库中获取所需的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:36:40.170

只需重定向到 site/members_area/$user ，您将在函数 members_area($user) 中获得 $user 参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:47:21.283

事实证明，控制器用于控制发送到视图的内容。如果设计正确，您实际上不应该在两个控制器之间发送数据。

我将插入用户名的值发送到会话中。

所以，在 login.php

```
$this->session->set_userdata($data); 
```

并检索了 site.php 中的值

```
$data['userid'] =  $this->session->userdata('username');
$this->load->view('members_area' , $data); //send the info to the controller 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T03:50:29.760

如果您想要两个控制器中的一些常用功能，请将其放入帮助文件中

[http://ellislab.com/forums/viewthread/55212/](http://ellislab.com/forums/viewthread/55212/)

# .net - 挂在 SendResponse 中的 WCF 服务

> ID：10442318
> 
> 赞同：1
> 
> 时间：2012-05-04T03:30:51.193
> 
> 标签：.net, wcf, iis, azure

我有一个托管在 IIS 中的 WCF REST 服务。客户（主要是浏览器）一直在抱怨偶尔挂起。我终于亲身体验了这一点，并且能够从服务器获取一些调试信息。我从 IIS 管理控制台抓取了以下屏幕截图。

![挂起请求](../Images/8749313e6ee326042697e6f4744e0740.png)

显然，这些请求已经存在太久了。

当这些请求挂起时，服务器能够很好地处理其他请求。我多次回收应用程序池，但没有明显效果。在此期间，来自我的浏览器的任何请求都会挂起，然后被浏览器超时。我同一台机器上的其他浏览器能够毫无问题地连接到相同的服务。我还启动了 Fiddler，然后能够通过 Fiddler 从我的“挂起”浏览器发出请求。当我关闭 Fiddler 时，浏览器再次“挂起”。当我最终完全关闭浏览器时，连接消失了。

一个潜在的重要点：您无法在屏幕截图中看出，但请求都挂在向客户端发送二进制流（照片和视频）的调用上。在幕后，我从 Azure Blob 存储中打开一个流（使用 OpenRead()），然后从我的函数中返回相同的流。所以我一方面通过网络读取数据，另一方面将数据输出到网络。

那么这里发生了什么？如何防止连接挂起，或者至少让它们在某个合理的时间点超时？

**更新**：看来浏览器可能是问题所在。如果我`<video>`在页面上有一个 HTML5 元素，并且视频足够大，浏览器似乎会打开一个连接来下载文件并永远保持打开状态。我对此只有 75% 的把握，但如果/当我确定时，我会在此处添加更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:50:17.380

Fidler 是一个代理，它会将自己注入到进程中，而不是您现有的代理。这使我相信您（和其他人）在自动代理设置或其他一些与代理设置相关的问题方面存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:01:10.227

事实证明，问题完全出在浏览器上。我有一些页面中有多个`<video>`标签。事实证明，在某些情况下，浏览器会为每个视频打开一个连接并保持打开状态，直到视频播放完毕。

至少有几个不同的浏览器端解决方法：

1.  在`<video>`标签上添加一个`preload="none"`属性。
2.  默认情况下不显示视频。而是显示图像，然后`<video>`在用户单击它时动态呈现标签。

另外，我向对此做出回应的人道歉。我只是没有给你足够的信息来找到正确的答案，所以你从来没有真正的机会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:06:50.270

下次发生这种情况时，运行同一浏览器的单独实例并启动其他浏览器（Firefox、Chrome、IE 等）。您需要确定问题是否与特定浏览器有关。

我认为您在浏览器中发现了一个错误。Fiddler 的插入暂时解决了它的事实表明它与通过特定协议栈的连接状态管理有关。如果是这样，那么您会发现问题是特定浏览器实例的本地问题。

除了向浏览器供应商报告之外，您无能为力。

如果您可以证明该错误仅在 IE 和 Azure 之间出现，那么该错误可能是由 Azure 的一些怪癖触发的，在这种情况下，因为这是一个单一供应商问题，您获得解决方案的机会会从“地狱雪球”中提高“不要屏住呼吸”。

# jquery - Ruby - rails - jquery 自动完成解析 json

> ID：10442322
> 
> 赞同：0
> 
> 时间：2012-05-04T03:31:47.353
> 
> 标签：jquery, ruby, ruby-on-rails-3

这是解析返回到 ajax 自动完成调用的地图 json 的正确方法吗？我期待 jQuery 理解 json 响应，并且不需要在脚本中进行任何额外的工作来列出自动完成项目。

json -

```
[{"issue":"Item returned"}] 
```

JS-

```
$("#term").autocomplete({
        source: function(request, response){
        $.ajax({
                url: '/issue/issue_type',
                type: 'POST',
                dataType: 'json',
                data: { issue_code : $("#term").val() },
                headers: { 'X-CSRF-Token': '<%= form_authenticity_token.to_s %>' },
                success: function(data) { response($.map(data.issue, function(issue){
                return {
                value: data.issue
                }
                } )); }
            });
        },
        minLength: 2,
        select: function(event, ui){ 
        //
                }
        });
        }); 
```

试过了`success: function(data) { response(data); }`。也没有用。

控制器 -

```
def issue_type
        @c = Codes.select("issue").where("codes.issue LIKE :i",{:i => "#{params[:posted_code]}%"})
        puts @c.to_json
        respond_to do |format|
        format.json { render :json=> @c.to_json }
        format.js
        end
        return @c.to_json
        end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:16:55.150

看起来您缺少的是将控制器返回的结果附加到下拉列表的 javascript

取自 JqueryUI 的示例；[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)

```
 #function to write 'selected: <selection>' in demo
function log( message ) {
        $( "<div/>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }
 #when user selects from drop down passes selected value to log function
select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
        },

  # i think this is CSS to make the drop down list appear/disappear
open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        }, 

 close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        } 
```

这东西要么是空白的，要么是缺失的。日志功能不是必需的，但在选择时，javascript 应该会发生一些事情，以使选择出现在文本字段中。

而且看起来您的数据格式不正确，

```
data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                }, 
```

成功看起来也不对。我只需从[http://jqueryui.com/demos/autocomplete/#remote-jsonp](http://jqueryui.com/demos/autocomplete/#remote-jsonp)复制并粘贴视图源并对​​其进行自定义以适合您的应用程序。

# java - 如何支持字符串验证的国际化？

> ID：10442323
> 
> 赞同：4
> 
> 时间：2012-05-04T03:32:03.097
> 
> 标签：java, regex, jakarta-ee

如何支持字符串验证的国际化？

在我的程序中，我有一个正则表达式，它确保输入字符串至少有一个字母和一个数字字符，长度在 2 到 10 之间。

```
Pattern p = Pattern.compile("^(?=.\d)(?=.[A-Za-z])[A-Za-z0-9]{2,10}$"); 
```

根据新要求，它需要支持国际化。怎么做到呢？

为了支持消息的国际化，我使用了资源包，属性文件使用了翻译的硬编码文本。但不确定是否可以验证字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T06:36:25.413

## **你需要的是Unicode！**

**Unicode 代码属性**

```
Pattern p = Pattern.compile("^(?=.*\p{Nd})(?=.*\p{L})[\p{L}\p{Nd}]{2,10}$"); 
```

`\p{L}`并且`\p{Nd}`是 Unicode 属性，其中

`\p{L}`是来自任何语言的任何类型的字母

`\p{Nd}`是除表意文字之外的任何文字中的数字 0 到 9

有关 Unicode 属性的更多详细信息，请参阅[regular-expressions.info](http://www.regular-expressions.info/unicode.html#prop)

**`Pattern.UNICODE_CHARACTER_CLASS`**

还有一个新属性`Pattern.UNICODE_CHARACTER_CLASS`可以启用预定义字符类的 Unicode 版本，[请在此处查看我的答案以获取更多详细信息和链接](https://stackoverflow.com/a/9500409/626273)

你可以做这样的事情

```
Pattern p = Pattern.compile("^(?=.*\\d)(?=.*[A-Za-z])\\w{2,10}$", Pattern.UNICODE_CHARACTER_CLASS); 
```

并且`\w`将匹配来自任何语言的所有字母和所有数字（当然还有一些组合字符的单词，例如`_`）。

**正则表达式错误**

我也稍微改变了你的正则表达式。您最初的前瞻 ( `(?=.\d)(?=.[A-Za-z])`) 将检查第二个字符是否为字母和数字，在所有方面都失败了，我的带有量词的版本检查它们是否在字符串中的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:10:47.280

此时最好定义哪些字符（如果有）不计为字母字符（如空格等？）。然后将其设为“至少一个数字和一个非数字字符”。但我认为您在要求方面遇到的问题源于它有点愚蠢。

这是要密码吗？两个字符的密码完全不安全。有些人可能希望使用超过十个字符的密码。实际上有什么理由不允许更长的密码吗？

[http://xkcd.com/936/](http://xkcd.com/936/)很好地概述了真正强密码的构成。要求数字对现代攻击者没有多大帮助，但会使用户的生活更加困难。最好要求一个长密码。

# powershell - 与 LINQ 的 Select 等效的 PowerShell 是什么？

> ID：10442333
> 
> 赞同：4
> 
> 时间：2012-05-04T03:33:03.413
> 
> 标签：powershell

（我知道这听起来像是重复的，但请听我说）

给定以下代码，如果`Select-Object`等效于 LINQ's `Select`，则输出应为`@("o", "n", "e")`

```
"one", "two" | %{$_.GetCharArray()} | select -first 1 
```

但是，由于输出是`"o"`，这告诉我`Select-Object`实际上与 LINQ 的行为相同，`SelectMany`而不是`Select`.

很多问题是：在 PowerShell 中是否有直接等价物`Select`（即不会合并管道中的集合）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T11:34:58.877

这不是关于展开由管道获得并发送到管道的`select`数组，而是关于展开数组。`ToCharArray()`为了使用标准获得预期的结果，`select`我们应该防止展开。这通常是通过使用一元运算符来完成的，该运算符`,`返回一个包含单个项目的数组。在我们的例子中，这些项目本身就是数组。它们没有展开，它们按原样发送到管道。因此，`select -first 1`选择第一个项目，它是一个包含 3 个项目的数组。

```
"one", "two" | %{, $_.ToCharArray()} | select -first 1 
```

这给出了 3 个项目：o、n、e。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:10:04.850

你可以看看[乔什爱因斯坦的作品](http://josheinstein.com/blog/index.php/2010/02/linq-for-powershell/)

加载模块后，您可以在 powershell 中使用类似的 .net LINQ sintax

# css - 同一级别的 CSS

> ID：10442336
> 
> 赞同：9
> 
> 时间：2012-05-04T03:33:28.667
> 
> 标签：css, css-selectors

如果我在同一级别有 3 个 div（不是另一个）。如何在不使用 ID 和类的情况下悬停一个 div 时更改另一个 div 的颜色。我想要类似的东西：

```
<div id="1" ></div>
<div></div>
<div></div> 
```

和 CSS ：

```
#1 :hover < body > div
{
    //Here I change the things
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-04T13:50:57.157

使用通用兄弟组合器

```
#yourId:hover ~ div
{
    color:red;
} 
```

另请注意，ID 必须以字母开头。[W3 ID 属性](http://www.w3.org/TR/html4/struct/global.html#h-7.5.2)

[例子](http://jsfiddle.net/rNKzG/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T04:00:48.040

在它们周围放一个包装纸，然后将鼠标悬停在包装纸上。

```
<div class="wrapper">
    <div class="element">foo</div>
    <div class="element">bar</div>
    <div class="element">baz</div>
</div>

.wrapper:hover .element {
    color: red;
} 
```

示例：http: [//jsfiddle.net/EB92r/](http://jsfiddle.net/EB92r/)

# zend-framework - Zend 防止前端控制器阻塞图像请求

> ID：10442338
> 
> 赞同：0
> 
> 时间：2012-05-04T03:33:28.790
> 
> 标签：zend-framework, zend-controller, zend-config

每当我在 Zend Framework 应用程序中使用`<img>`标签时，都不会显示任何图像。当我在地址栏中输入绝对路径时，前端控制器会尝试查找“图像”控制器。

必须有一种方法可以`<img src="/public/images/logo.png">`在 Zend Framework 中使用，对吗？

我已经从视图、布局和助手中尝试过，但没有运气。我也使用了该`$this->baseURL()`技术，以及`serverURL()`通过从前端控制器获取信息的技术，但它仍然不会显示图像......网站上的任何地方。（我在包含 css 文件时遇到同样的问题，除非我执行`@import('/css/main.css')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:14:24.297

听起来你的 .htaccess 文件有问题，你必须从重写规则中排除这些文件，否则这些请求会被路由到 index.php。

**/public/.htaccess**

```
RewriteEngine on
RewriteRule !\.(js|ico|txt|gif|jpg|png|css)$ index.php 
```

# java - 通过java推送消息

> ID：10442339
> 
> 赞同：-1
> 
> 时间：2012-05-04T03:33:29.383
> 
> 标签：java, message

我们有一个现在可以发送电子邮件和短信的应用程序。我们需要探索其他类似的即时消息技术，例如 twitter。有没有这种性质的东西可以即时向接收者发送消息？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:37:51.967

正如您所提到的，您可以轻松地将 Twitter 用于此目的。请参阅 Twitter 库页面 [https://dev.twitter.com/docs/twitter-libraries](https://dev.twitter.com/docs/twitter-libraries)

# java - 获取选定 JTable 行中所有列的值

> ID：10442344
> 
> 赞同：0
> 
> 时间：2012-05-04T03:33:32.760
> 
> 标签：java, swing, jtable, listselectionlistener

所以我有一个应用程序，其中有一个 JTable，其中填充了与计算机上的进程列表相关的值（因此它具有进程名称、PID、内存偏移等内容）。作为其中的一部分，我想在用户单击某个进程的行时收集进程名称和 PID——但我该怎么做呢？如果我在选择行的情况下调用“table.getSelectedRows()”或“table.getSelectedColumns()”，我只会得到一个表示单击字段的列或行索引的元素。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:43:20.497

您可以通过为每列调用一次 table.getValueAt(row, column) 来获取行中每个单元格的数据，“row”是选定的行索引，“column”是该列的从零开始的索引。

但是请注意，这可能会有一些问题，因为用户可以对列重新排序，并且此方法以显示顺序引用列。

更好的方法是通过 table.getModel() 引用 JTable 的 TableModel，然后使用 TableModel 的 getValueAt() 方法以模型顺序获取列（在视图中重新排序列时不会改变）。

# ruby-on-rails - 从 Rails 控制台创建带有回形针附件的模型实例？

> ID：10442345
> 
> 赞同：2
> 
> 时间：2012-05-04T03:33:34.373
> 
> 标签：ruby-on-rails, paperclip

我想从 rails 控制台创建一个用户，但这不起作用

```
User.new({:email => "guy@gmail.com",  :password => "pass", :name => "guy"}).save(false) 
```

我不断得到：

```
AWS::S3::MissingAccessKey: You did not provide both required access keys. Please provide the access_key_id and the secret_access_key. 
```

我正在使用回形针来存储用户照片，但我无法弄清楚，当我从普通表单创建用户时它工作正常。注册时我也不需要照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:38:19.147

您需要确保在运行 Rails 控制台时配置了 Paperclip/AWS，而不仅仅是在使用另一台服务器启动您的应用程序时。这与 Authlogic 无关，因为您可以通过注释掉模型中的所有 Authlogic 功能并再次测试来验证。

# asp.net - 如何使用 .ashx 在浏览器上打开 excel 2007/2010？

> ID：10442353
> 
> 赞同：0
> 
> 时间：2012-05-04T03:34:53.937
> 
> 标签：asp.net, ashx

我已经创建了一个 ashx 文件来在网站上打开 excel 2007。

这是test.aspx中的代码：（调用test.htm打开一个弹出窗口）

```
 <a href="test.htm" target="_blank">Export</a> 
```

这是test.htm中的代码：（使用iframe加载excel文件）

```
<iframe src="handler1.ashx" style="height: 421px; width: 800px" ></iframe> 
```

这是handle.ashx中的代码：

```
 void ProcessRequest(HttpContext context)
    {

        string filePath = "E:/test.xlsx";
        string filename = Path.GetFileName(filePath);
        context.Response.Clear();
        context.Response.AddHeader("Content-Disposition", "inline;filename=test.xlsx");
        context.Response.Charset = "";
        context.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
        context.Response.WriteFile(filePath);
        context.Response.Flush();
        context.Response.End();
    } 
```

但 Excel 文件始终由 Microsoft Excel 应用程序打开。请帮我。

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:51:51.307

context.Response.WriteFile(filePath); // 您正在尝试写入文件块。

在此之前，您需要将所有数据提取到内存中。改成这样

```
context.Response.Write(YourExcelData); 
```

# ios - 为什么我的 UIView 的一部分覆盖了键盘？

> ID：10442354
> 
> 赞同：10
> 
> 时间：2012-05-04T03:34:54.343
> 
> 标签：ios, ipad, uiview, keyboard

我的 UIView 的一部分覆盖了 iPad 的键盘。

![在此处输入图像描述](../Images/b46adabca7ff38cce091a7b1c2a774e0.png)

您看到的视图只是我作为子视图添加到主视图的 UIView。当显示键盘时，我确实将视图向上移动。

有没有人见过这个？

**编辑**

当显示键盘时，我将视图向上移动：

```
[UIView animateWithDuration:SHOW_KEYBOARD_ANIMATION_DURATION animations:^{
    CGRect frame = self.currentViewController.view.frame;
    frame.origin.y -= SHOW_KEYBOARD_OFFSET;

    self.currentViewController.view.frame = frame;
}]; 
```

**编辑**

我使用以下代码添加视图：

```
[UIView transitionFromView:fromView toView:toView duration:0.3f options:UIViewAnimationOptionTransitionCrossDissolve completion:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:48:40.993

你从哪里得到 SHOW_KEYBOARD_OFFSET ？我敢打赌这就是问题所在。

正如 Kate 所说，您应该捕获通知，并使用它们中的 userInfo 来确定如何移动您的视图。任何硬编码值都会破坏第二次 Apple 更改您的键盘尺寸。简而言之，不要假设框架可以很容易地告诉你什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:42:36.507

您是在显示键盘之前还是之后调用代码以将视图移开？换句话说，你注册的是 UIKeyboardWillShowNotification 还是 UIKeyboardDidShowNotification？

我不确定您从哪里获得键盘尺寸？再次查看 Apple 的示例代码，请参阅[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)，向下滚动到位于的移动内容部分键盘下方。

# sql-server-2008 - SCOPE_IDENTITY() 总是返回 NULL + SSIS

> ID：10442356
> 
> 赞同：0
> 
> 时间：2012-05-04T03:35:10.677
> 
> 标签：sql-server-2008, scope-identity

这是我的脚本，我在其中抓取 SCOPE_IDENTITY() 并分配给 SSIS 包变量。

```
--START:  SCRIPT TO CHECK IF THERE IS ENTRY FOR 'UNKOWNN'  IN AUDIT DIMESNION - IF NOT INSERT

IF NOT EXISTS (SELECT AUDIT_SK FROM SHARED.AUDIT_DIM WHERE AUDIT_SK = -1)
BEGIN
SET IDENTITY_INSERT SHARED.AUDIT_DIM ON 
INSERT INTO [SHARED].[AUDIT_DIM]
       (AUDIT_SK
       ,[JOB_ID]
       ,[OUTPUT_STREAM_ID]
       ,[OUTPUT_STREAM_DESC]
       ,[SELECTION_START_DATE]
       ,[SELECTION_END_DATE]
       ,[JOB_RUN_DATE])
 VALUES
       (-1
       ,-1
       ,-1
       ,'UNKNOWN'
       ,'1000-01-01'
       ,'1000-01-01'
       ,'1000-01-01')
SET IDENTITY_INSERT SHARED.AUDIT_DIM OFF    
END

--- END 'UNKOWNN'  IN AUDIT DIMESNION 

INSERT  INTO [SHARED].[AUDIT_DIM]
    (
      [JOB_ID],
      [OUTPUT_STREAM_ID],
      [OUTPUT_STREAM_DESC],
      [SELECTION_START_DATE],
      [SELECTION_END_DATE],
      [JOB_RUN_DATE]
    )
VALUES  (
      ?,  --parameters passed from package variables
      ?,  --parameters passed from package variables
      ?,  --parameters passed from package variables
      ?,  --parameters passed from package variables
      ?,  --parameters passed from package variables
      ?   --parameters passed from package variables
     )

SELECT CONVERT(INT,SCOPE_IDENTITY()) -- This is assigned back to Package variable 
```

在过去的几个月里，这一切都运行良好，并且由于以下错误而不断失败。

信息

以用户身份执行：XXXXXXX\xxxxxxx。适用于 64 位的 Microsoft (R) SQL Server 执行包实用程序版本 10.0.2531.0 版权所有 (C) Microsoft Corp 1984-2005。版权所有。开始时间：下午 3:53:54 错误：2012-04-30 15:54:07.15 代码：0xC002F210 来源：生成 AUDIT_SK 执行 SQL 任务描述：执行查询“--START: SCRIPT TO CHECK IF THE IS ENTRY FOR 'U ...”失败并出现以下错误：“将结果提取到类型为 (DBTYPE_I2) 的变量时出错”。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。结束错误 DTExec：包执行返回 DTSER_FAILURE (1)。开始时间：下午 3:53:54 结束时间：下午 3:54:07 经过时间：13.151 秒。包执行失败。步骤失败。

如果我将包复制到不同的环境或在 SSMS 中单独运行脚本，一切正常。

有人可以指导我应该从哪里开始研究吗？

谢谢

# android - ViewPagerIndicator 不会突然捕捉或显示寻呼机内容

> ID：10442357
> 
> 赞同：1
> 
> 时间：2012-05-04T03:35:13.140
> 
> 标签：android, user-interface, android-ui, android-viewpager

这是一个奇怪的问题。

这将是一个可怕的问题，因为我几乎没有任何信息。

大约两天前，我让 ViewPagerAdapter 工作得很好。我可以滑动，它会在适配器定义的视图之间切换。

然而，突然之间（不是自己，我确定我做了什么）TitlePagerIndicator 不会捕捉到标题，也不会显示任何内容。不捕捉是指如果我向左拖动，标题将位于屏幕的 3/4，而不是捕捉到侧面并显示下一页（下面的屏幕截图）。

我已调试并调用实例化项目并返回正确的视图。

但是，当我打开应用程序时，我收到很多类似这样的警告： VFY：无法解析虚拟方法 3015：Landroid/widget/LinearLayout;.getAlpha ()F VFY：无法解析直接方法 3011：Landroid/widget /线性布局；。(Landroid/content/Context;Landroid/util/AttributeSet;I)V VFY: 无法解析虚拟方法 2965: Landroid/widget/FrameLayout;.setAlpha (F)V

我假设这是我的导入问题，但一切都编译得很好，我有 ViewPagerIndicator 作为库项目，还有 Sherlock。

这是我的适配器代码：

```
public class ViewPagerAdapter extends PagerAdapter implements TitleProvider {

private static String[] titles = new String[] { 
    "My Klinks", 
    "Received Klinks"
    };

private final Context context;

public ViewPagerAdapter(Context context) {
    this.context = context;
}

public String getTitle(int position) {
    return titles[position];
}

@Override
public int getCount() {
    return titles.length;
}

@Override
public Object instantiateItem(View pager, int position) {
    TextView t = new TextView(context);
    t.setText("WheeeE");
    return t;
}

@Override
public void destroyItem(View pager, int position, Object view) {
    ((ViewPager) pager).removeView((TextView) view);
}

@Override
public boolean isViewFromObject(View view, Object object) {
    return view.equals(object);
}

@Override
public void finishUpdate(View view) {
}

@Override
public void restoreState(Parcelable p, ClassLoader c) {
}

@Override
public Parcelable saveState() {
    return null;
}

@Override
public void startUpdate(View view) {
}
} 
```

这是我的活动代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate( savedInstanceState );
    setContentView( R.layout.main );

    // set up the slidey tabs
    ViewPagerAdapter adapter = new ViewPagerAdapter( this );
    ViewPager pager = (ViewPager)findViewById( R.id.viewpager );
    TitlePageIndicator indicator = (TitlePageIndicator)findViewById( R.id.indicator );
    pager.setAdapter( adapter );
    indicator.setViewPager( pager );

    // set up the action bar
    final ActionBar ab = getSupportActionBar();

    ab.setBackgroundDrawable(getResources().getDrawable(R.drawable.ad_action_bar_gradient_bak));
} 
```

![标题指示器不捕捉](../Images/303d50ce1de2d9826af1bde42308b209.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:26:10.243

如果其他人遇到同样的问题：

在实例化视图中：不要忘记将新视图附加到 ViewPager：

```
@Override
public Object instantiateItem(View pager, int position) {
    TextView t = new TextView(context);
    t.setText("WheeeE");
    ((ViewPager)pager).addView(t);
    return t;
} 
```

当前版本的instantiateItem获取的是ViewGroup而不是View，解决方法应该是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:22:33.570

几天后我的头撞到墙上，我得出的结论是我的 ViewPagerAdapter 是问题所在。

我只是创建了一个动态片段并创建了 FragmentPagerAdapter 的子类，现在它工作得很好......

# shell - 子进程的python输入委托

> ID：10442359
> 
> 赞同：1
> 
> 时间：2012-05-04T03:35:34.747
> 
> 标签：shell, python-3.x, subprocess, python-idle

我目前正在通过使用管道并显示每一行来在 python shell 上显示子进程的输出（在我的情况下是 windows 上的 iDLE）。

我想用一个有用户输入的子进程来做这个，这样python控制台上就会出现提示，用户可以输入结果，结果可以发送到子进程。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:19:13.903

使用`process.stdin.write`.

`stdin = subprocess.PIPE`打电话时记得设置`subprocess.Popen`。

# python - 为什么使用 numpy 进行矩阵乘法比使用 Python 中的 ctypes 更快？

> ID：10442365
> 
> 赞同：60
> 
> 时间：2012-05-04T03:36:22.343
> 
> 标签：python, c, benchmarking, matrix-multiplication

我试图找出进行矩阵乘法的最快方法并尝试了 3 种不同的方法：

*   纯 python 实现：这里没有惊喜。
*   使用 Numpy 实现`numpy.dot(a, b)`
*   `ctypes`在 Python 中使用模块与 C交互。

这是转换为共享库的 C 代码：

```
#include <stdio.h>
#include <stdlib.h>

void matmult(float* a, float* b, float* c, int n) {
    int i = 0;
    int j = 0;
    int k = 0;

    /*float* c = malloc(nay * sizeof(float));*/

    for (i = 0; i < n; i++) {
        for (j = 0; j < n; j++) {
            int sub = 0;
            for (k = 0; k < n; k++) {
                sub = sub + a[i * n + k] * b[k * n + j];
            }
            c[i * n + j] = sub;
        }
    }
    return ;
} 
```

以及调用它的 Python 代码：

```
def C_mat_mult(a, b):
    libmatmult = ctypes.CDLL("./matmult.so")

    dima = len(a) * len(a)
    dimb = len(b) * len(b)

    array_a = ctypes.c_float * dima
    array_b = ctypes.c_float * dimb
    array_c = ctypes.c_float * dima

    suma = array_a()
    sumb = array_b()
    sumc = array_c()

    inda = 0
    for i in range(0, len(a)):
        for j in range(0, len(a[i])):
            suma[inda] = a[i][j]
            inda = inda + 1
        indb = 0
    for i in range(0, len(b)):
        for j in range(0, len(b[i])):
            sumb[indb] = b[i][j]
            indb = indb + 1

    libmatmult.matmult(ctypes.byref(suma), ctypes.byref(sumb), ctypes.byref(sumc), 2);

    res = numpy.zeros([len(a), len(a)])
    indc = 0
    for i in range(0, len(sumc)):
        res[indc][i % len(a)] = sumc[i]
        if i % len(a) == len(a) - 1:
            indc = indc + 1

    return res 
```

我敢打赌，使用 C 的版本会更快……我会输的！下面是我的基准，它似乎表明我要么做错了，要么`numpy`太快了：

![基准](../Images/aa0be23bd1ad346a430f772ff49cee37.png)

我想了解为什么`numpy`版本比版本快`ctypes`，我什至不谈论纯 Python 实现，因为它很明显。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-20T02:48:41.520

NumPy 使用高度优化、仔细调整的 BLAS 方法进行矩阵乘法（另请参见：[ATLAS](http://math-atlas.sourceforge.net/)）。这种情况下的具体功能是 GEMM（用于通用矩阵乘法）。`dgemm.f`您可以通过搜索（它在 Netlib 中）来查找原件。

顺便说一句，优化超越了编译器优化。上面，菲利普提到了 Coppersmith-Winograd。如果我没记错的话，这是用于 ATLAS 中大多数矩阵乘法的算法（尽管评论者指出它可能是 Strassen 的算法）。

换句话说，您的`matmult`算法是简单的实现。有更快的方法来做同样的事情。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-04T05:01:05.363

我对 Numpy 不太熟悉，但源代码在 Github 上。部分点积在[https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/arraytypes.c.src](https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/arraytypes.c.src)中实现，我假设它被翻译成每个特定的 C 实现数据类型。例如：

```
/**begin repeat
 *
 * #name = BYTE, UBYTE, SHORT, USHORT, INT, UINT,
 * LONG, ULONG, LONGLONG, ULONGLONG,
 * FLOAT, DOUBLE, LONGDOUBLE,
 * DATETIME, TIMEDELTA#
 * #type = npy_byte, npy_ubyte, npy_short, npy_ushort, npy_int, npy_uint,
 * npy_long, npy_ulong, npy_longlong, npy_ulonglong,
 * npy_float, npy_double, npy_longdouble,
 * npy_datetime, npy_timedelta#
 * #out = npy_long, npy_ulong, npy_long, npy_ulong, npy_long, npy_ulong,
 * npy_long, npy_ulong, npy_longlong, npy_ulonglong,
 * npy_float, npy_double, npy_longdouble,
 * npy_datetime, npy_timedelta#
 */
static void
@name@_dot(char *ip1, npy_intp is1, char *ip2, npy_intp is2, char *op, npy_intp n,
           void *NPY_UNUSED(ignore))
{
    @out@ tmp = (@out@)0;
    npy_intp i;

    for (i = 0; i < n; i++, ip1 += is1, ip2 += is2) {
        tmp += (@out@)(*((@type@ *)ip1)) *
               (@out@)(*((@type@ *)ip2));
    }
    *((@type@ *)op) = (@type@) tmp;
}
/**end repeat**/ 
```

这似乎计算一维点积，即在向量上。在我浏览 Github 的几分钟里，我找不到矩阵的来源，但它可能`FLOAT_dot`对结果矩阵中的每个元素都使用了一次调用。这意味着此函数中的循环对应于您最内层的循环。

它们之间的一个区别是“步幅”——输入中连续元素之间的差异——在调用函数之前显式计算一次。在您的情况下，没有步幅，并且每次都会计算每个输入的偏移量，例如`a[i * n + k]`. 我本来期望一个好的编译器将其优化为类似于 Numpy 步幅的东西，但也许它不能证明该步长是一个常数（或者它没有被优化）。

Numpy 也可能在调用此函数的高级代码中使用缓存效果做一些聪明的事情。一个常见的技巧是考虑每一行是连续的，还是每一列——并首先尝试迭代每个连续的部分。似乎很难做到完美，对于每个点积，一个输入矩阵必须按行遍历，另一个按列遍历（除非它们碰巧以不同的主要顺序存储）。但它至少可以为结果元素做到这一点。

Numpy 还包含从不同的基本实现中选择某些操作的实现的代码，包括“点”。例如，它可以使用[BLAS](http://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)库。从上面的讨论中，听起来像是使用了 CBLAS。这是从 Fortran 翻译成 C 的。我认为您的测试中使用的实现将是在这里找到的实现：http: [//www.netlib.org/clapack/cblas/sdot.c](http://www.netlib.org/clapack/cblas/sdot.c)。

请注意，该程序是由一台机器编写的，供另一台机器读取。但是您可以在底部看到它使用展开的循环一次处理 5 个元素：

```
for (i = mp1; i <= *n; i += 5) {
stemp = stemp + SX(i) * SY(i) + SX(i + 1) * SY(i + 1) + SX(i + 2) * 
    SY(i + 2) + SX(i + 3) * SY(i + 3) + SX(i + 4) * SY(i + 4);
} 
```

这个展开因素很可能是在分析了几个之后才选择的。但是它的一个理论优势是每个分支点之间完成了更多的算术运算，并且编译器和 CPU 在如何优化调度它们以获得尽可能多的指令流水线方面有更多选择。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-04T06:30:48.547

用于实现某种功能的语言本身就是一个不好的性能衡量标准。通常，使用更合适的算法是决定因素。

在您的情况下，您正在使用学校教授的矩阵乘法的简单方法，即 O(n^3)。但是，对于某些类型的矩阵，您可以做得更好，例如方阵、备用矩阵等。

查看[Coppersmith–Winograd 算法](http://en.wikipedia.org/wiki/Coppersmith%E2%80%93Winograd_algorithm)（O(n^2.3737) 中的方阵乘法），作为快速矩阵乘法的良好起点。另请参阅“参考”部分，其中列出了一些指向更快方法的指针。

对于一个更实际的惊人性能提升示例，请尝试编写一个 fast`strlen()`并将其与 glibc 实现进行比较。如果您无法击败它，请阅读 glibc 的`strlen()`源代码，它有相当不错的评论。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-04T04:26:52.903

编写 NumPy 的人显然知道他们在做什么。

有很多方法可以优化矩阵乘法。例如，您遍历矩阵的顺序会影响内存访问模式，从而影响性能。
充分利用 SSE 是另一种优化方法，NumPy 可能会采用这种方法。
可能还有更多方法，NumPy 的开发人员知道而我不知道。

顺便说一句，您是否使用优化编译了您的 C 代码？

您可以尝试对 C 进行以下优化。它确实可以并行工作，我想 NumPy 也做了同样的事情。
注意：仅适用于偶数尺寸。通过额外的工作，您可以消除此限制并保持性能改进。

```
for (i = 0; i < n; i++) {
        for (j = 0; j < n; j+=2) {
            int sub1 = 0, sub2 = 0;
            for (k = 0; k < n; k++) {
                sub1 = sub1 + a[i * n + k] * b[k * n + j];
                sub1 = sub1 + a[i * n + k] * b[k * n + j + 1];
            }
            c[i * n + j]     = sub;
            c[i * n + j + 1] = sub;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-04T04:33:13.567

Numpy 也是高度优化的代码。[Beautiful Code](http://books.google.com/books?id=gJrmszNHQV4C&q=numpy#v=snippet&q=numpy&f=false)一书中有一篇关于它的部分内容的文章。

ctypes 必须经过从 C 到 Python 的动态转换并返回，这会增加一些开销。在 Numpy 中，大多数矩阵运算完全在其内部完成。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-04T04:31:36.193

Fortran 在数字代码中的速度优势 afaik 给出的最常见原因是该语言更容易检测[别名](https://en.wikipedia.org/wiki/Pointer_aliasing)- 编译器可以判断被相乘的矩阵不共享相同的内存，这有助于改善缓存（不需要确保结果立即写回“共享”内存）。这就是 C99 引入[限制](https://en.wikipedia.org/wiki/Restrict)的原因。

但是，在这种情况下，我想知道 numpy 代码是否也在设法使用 C 代码没有的一些[特殊指令](https://stackoverflow.com/questions/586609/using-sse-instructions#586670)（因为差异似乎特别大）。

# php - innerHTML 使用 php include 语句更改 DIV 内容的正确语法

> ID：10442366
> 
> 赞同：1
> 
> 时间：2012-05-04T03:36:31.783
> 
> 标签：php, javascript, syntax, include, innerhtml

我正在对我的公司网站进行改造，左侧按钮的 js 垂直滚动菜单是更改标题下主 div 内容的链接。我现在用 php include 语句设置了它，它可以工作，但是每次它重新加载整个页面时，左侧的滚动菜单都会重置到列表的顶部，从而失去访问者的位置。

[您可以在http://www.nbtc.org/nv](http://www.nbtc.org/nv)查看原型，单击“骑自行车”或“拼车”查看它的实际效果。

我不想这样做，而是想使用 js 用 innerHTML 更改 div 的内容，我想要一个链接包含变量的函数，所以链接看起来像：

```
<a class="button" href="javascript:changecontent(bike)">Bicycling</a> 
```

以下函数将运行：

```
<script type="text/javascript">
function changecontent(var1)
{
document.getElementById('content').innerHTML="<?php include(" var1 .php"); ?>";
}
</script> 
```

id 为“content”的 div 将更改为包含 bike.php。单击不同的链接会将 div 更改为其他内容。

我是新手，所以请帮助我了解脚本的语法，我知道我必须在函数语句中分离出'var1'，但我不知道如何。

这似乎是一个直接的解决方案，但如果有更好的方法，我会全力以赴。垂直滚动菜单已经使用 jquery，我读到了“加载”功能，也许这样会更好？

谢谢你的帮助！布伦登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:43:45.073

`$.load`在这里肯定会很好。

```
$(function(){
    $(".menutable").on("click", ".button", function(event){
        event.preventDefault();
        $("#content1").load(event.target.href);
    }); 
}); 
```

然后更改所有链接以在`href`值中包含它们的实际目的地：

```
<a class="button" href="bike.php">Bicycling</a> 
```

演示：http: [//jsbin.com/uyasux/edit#javascript,html](http://jsbin.com/uyasux/edit#javascript,html)

# maven - Maven 构建如何依赖于另一个 jar 文件中的 jar 文件？

> ID：10442370
> 
> 赞同：0
> 
> 时间：2012-05-04T03:36:56.413
> 
> 标签：maven, build, osgi

我们有一个 OSGi 应用程序：

Bundle A --> 只引用10个jar文件，导出这10个jar文件的所有包以满足运行时调用。

Bundle B --> 导入从 Bundle A 导出的包。运行时 OK。

但是当我使用 Maven 构建 Bundle B 时，问题出现了。这是Bundle B的一段pom.xml：

```
<dependency>
  <groupId>com.mycom.id</groupId>
  <artifactId>com.mycom.BundleA</artifactId>
  <version>${version.range}</version>
  <scope>provided</scope>
</dependency> 
```

当我参考 artifactID: Bundle A 时，构建失败。Maven 无法引用项目内的 jar 文件。我找不到引用另一个项目中的 jar 文件的方法，所以任何人都可以在构建时提供解决此依赖问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:35:38.957

您是否将 10 个 jar 设置为 Bundle A 的依赖项？如果是这样，Maven 应该能够在引用 Bundle A 时找到传递依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:24:34.803

您不应该以这种方式捆绑您的组件。很少建议在 OSGi 中将一个 jar 捆绑到另一个 jar 中，如果这样做，则不应导出该 jar 的包。如果这些包需要对其他包可用，那么该 jar 应该是一个 OSGi 包。

请参阅有关您的方法的[这个问题。](https://stackoverflow.com/questions/3013583/what-is-the-standard-way-to-bundle-osgi-dependent-libraries/3015072#3015072)

# sql-server-2008 - 使用命名字段参数批量插入

> ID：10442371
> 
> 赞同：0
> 
> 时间：2012-05-04T03:37:13.437
> 
> 标签：sql-server-2008, bulkinsert

通过我的 ASP.NET / SQL Server 2008 应用程序，我需要从 CSV 文件（可能是一百万条记录）中批量插入记录。我将首先将它们导入临时表，这样我就可以在将一些数据移动到永久表之前对其进行操作。

这将定期发生。并且多个导入可能同时发生。我还必须告诉其他人的每个进口。

我最初的计划是使用其中包含 Import_ID 的列。但我看到批量插入不允许我设置字段值。

进行搜索时，我发现我可以在视图中进行批量插入。而且我猜测视图可以有一个命名参数（Import_ID）。但是我还没有真正学会设置参数，所以我不知道这是否可能，或者如何去做。

有人可以告诉我如何做到这一点，或者让我知道另一种解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:53:01.933

您可以批量插入临时临时表，例如，因为您知道您的 SPID（并假设您可以信任某个静态表的架构），您可以这样说，指定 CSV 文件的 @filepath 和 @ImportID，创建一个以会话 ID 作为后缀的表，并在单个动态 SQL 批处理中完成所有工作：

```
DECLARE @sql NVARCHAR(MAX), @spid VARCHAR(12) = RTRIM(@@SPID);

SET @sql = N'SELECT * INTO dbo.Stage' + @spid 
    + ' FROM dbo.RealStagingTable WHERE 1 = 0;';

SET @sql += N'BULK INSERT dbo.Stage' + @spid + ' FROM ('''
    + @filepath + ''' WITH (options);'

SET @sql += N'INSERT dbo.RealTable(ImportID, other columns)
  SELECT ' + RTRIM(@ImportID) + , other columns
  FROM dbo.Stage' + @spid + ';';

SET @sql += N'DROP TABLE dbo.Stage' + @spid + ';'

EXEC sp_executesql @sql; 
```

# windows - Git远程端意外挂断

> ID：10442380
> 
> 赞同：1
> 
> 时间：2012-05-04T03:38:09.113
> 
> 标签：windows, git, ssh

当我尝试从我的 Windows 计算机推送时，我正在尝试在我的测试服务器上设置一个 git repo

```
git push ssh://git@server.com:/path/.git 
```

我得到错误

```
fatal: The remote end hung up unexpectedly 
```

但是当我 ssh 进入我的服务器并尝试执行完全相同的命令时，它工作得很好。这是我的 git 设置或我的 Windows 设置的问题吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:13:30.390

该问题可能是由许多问题引起的：

*   Git 安装在服务器上某个奇怪的地方，*并且*“git”用户在交互式登录时获得的环境（您通过 PuTTY 或其他方式手动执行此操作）与非交互式登录时获得的环境不同（ git 客户端会为您执行此操作）。这是因为 Unix shell 在这些情况下会读取不同的启动文件，并且当`git`使用 SSH 生成远程`git`实例时，它仍然会在服务器上生成默认的（用户）shell。
*   您有一个本地问题（例如，您将 Git 配置为用于`plink.exe`访问服务器，它要求您通过输入“y”或“n”（您不能这样做）来接受主机的密钥。

无论如何，请尝试以下步骤：

1.  运行`plink.exe git@server.com "git --version"`并查看它是否能够在服务器上运行 Git。如果您不使用`plink.exe`Windows 版 Git 随附的 OpenSSH 随附的任何二进制文件；大概是`ssh.exe`。
2.  `GIT_TRACE=1`在运行之前导出`git push`，看看它是否打印出任何暗示出了什么问题的东西，如下所示：

    ```
    C:\foo>GIT_TRACE=1
    C:\foo>git push ssh://git@server.com:/path/.git 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:45:13.220

我怀疑问题是用户“git”没有对远程存储库的写入权限，并且您可能正在使用自己的用户名（cemurray 或类似用户名）手动连接。

# wordpress - 在 Wordpress 中使用 MarketPress 单击时，在哪里可以找到添加到购物车按钮的数据？

> ID：10442385
> 
> 赞同：1
> 
> 时间：2012-05-04T03:38:32.700
> 
> 标签：wordpress

我想知道是否有人可以指导我完成 Wordpress 的 MarketPress 插件。我即将确定该项目或产品是否仍然可用或缺货。我不知道在哪里可以找到插入数据的表。首先，当我单击添加到购物车按钮时，我不知道在哪里找到插入购买详细信息的具体方法或函数。请帮忙。:(

# python - 在python中比较矩阵中的两列

> ID：10442390
> 
> 赞同：1
> 
> 时间：2012-05-04T03:39:26.397
> 
> 标签：python

我有一个包含以下数据的文件：

```
PAIR 1MFK 1 URANIUM 82 HELIUM 112 3.6997  
PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003  
PAIR 345G 3 SODIUM 23 CARBON 14 1.664  
PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506 
```

现在，我必须找出第 5 列的值是否大于第 7 列的值，反之亦然。我用了：

```
inp = open("filename".'r').read().strip().split('\n')
for line in map(str.split, inp):
    k = line[5]
    m = line[7]
    if k > m:
        print 'loop 1 satisfies'
    elif m > k:
         print 'loop 2 satisfies'
    else:
         print 'loop error' 
```

但问题是我得到的输出如下：

```
loop 1 satisfies  
loop 1 satisfies  
loop 1 satisfies  
loop 1 satisfies 
```

但是如果第一行第 5 列的值 82 小于第 7 列的值。我无法理解这种错误的原因。
请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T03:43:43.680

这是因为您没有先将它们转换为数字，您的数据仍然是字符串。

```
>>> '82' < '112'
False
>>> 82 < 112
True 
```

顺便说一句，这些项目将从 0 开始计数，所以我认为您可能打算比较第 4 项和第 6 项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T03:43:53.167

这是因为您正在比较`Strings`，将它们转换为`integers`第一个。

```
inp = open("filename",'r').read().strip().split('\n')
for line in map(str.split, inp):
  k = int(line[4]) #lists start at index 0 not 1
  m = int(line[6])
  if k > m: print 'loop 1 satisfies'
  elif m > k: print 'loop 2 satisfies'
  else: print 'loop error'

loop 2 satisfies
loop 1 satisfies
loop 1 satisfies
loop 2 satisfies 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T03:50:41.153

其他答案已经解决了您的字符串比较问题，但我还想建议您使用 Python 的`csv`模块来解决您的任务。`csv.reader`此文件中的列由空格分隔，使用对象更加简洁和节省内存。

修改后的代码如下所示：

```
import csv

inp = csv.reader( open("filename", "r"), delimiter=' ')
for line in inp:
    k = int(line[4]) # 5th column == index 4
    m = int(line[6]) # 7th col == index 6
    if k > m:
        print 'loop 1 satisfies'
    elif m > k:
        print 'loop 2 satisfies'
    else:
        print 'loop error' 
```

另请注意，这可以解决您的字符串比较问题，并使用正确的从零开始的索引。

# scheduled-tasks - 是否可以让 schtasks 在特定时间运行？

> ID：10442392
> 
> 赞同：2
> 
> 时间：2012-05-04T03:39:33.950
> 
> 标签：scheduled-tasks, windows-task-scheduler

是否可以使用创建任务`schtasks`，以便该任务根据用户提供的配置在特定时间运行？

理想情况下，我想要实现的是 - 用户输入他/她希望执行任务的特定时间（例如生成报告并通过电子邮件发送）。此特定时间字符串以逗号分隔，例如`08:00, 11:20, 14:00, 17:59`or `09:15, 10:30, 11:45, 13:00`。

目前我所知道的是，它`schtasks /create`允许您使用 指定开始时间，`/st <hh:mm>`但这仅适用于一个特定的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T09:03:01.850

您可以设置任务的开始时间并设置它重复的时间间隔，但对于单个任务来说仅此而已。

如果您想创建一个每 3 小时运行一次的任务，从 开始`09:00`，您可以执行以下操作：
`Schtasks /Create /TN example /TR C:\example\report.bat /SC DAILY /ST 09:00 /DU 300 /RI 180`
请注意我设置`/DU`： schtasks.exe 要求持续时间大于运行间隔。

如果您想创建多个任务以在不同时间运行，我要么一次添加一个，要么将它们分别放在文件的一行中，然后通过批处理文件传递（实际上是相同的）。一旦进入分隔列表，它就会变得混乱；我还没有找到一种从它们中提取数据的好方法。这当然是可能的，但感觉就像人们告诉你的那种事情是“不好的做法”。
要连续添加几个任务，我会创建一个看起来像这样的批处理文件：

```
set i=1

:top

set /P input=if you want to create a scheduled task, enter the time you want in HH:MM format. otherwise, type "q" : 
if (%input%) EQU (q) exit /B 0

Schtasks /Create /TN %username%\%i% /TR C:\example\report.bat /SC DAILY /ST %input% /RU %username%

set /A i+=1

goto top 
```

创建的任务是从一开始直到无穷大的数字（就用户而言），并归档在与运行脚本的人的用户名相同的文件夹下。从技术上讲，您访问它们的名称将是“%username%\1”、“%username%\2”。这样一来，多个用户可以使用相同的脚本来执行多个任务，而不会有覆盖彼此任务的危险。
可以随时通过自行输入“q”来停止脚本。
潜在地，您可以在该脚本中输入一个文件，每行一次，最后是 aq，它将运行整个列表并退出。

# web-services - java.io.UnsupportedEncodingException: 不支持的编码 utf-8";action="

> ID：10442398
> 
> 赞同：2
> 
> 时间：2012-05-04T03:40:51.640
> 
> 标签：web-services, weblogic, cxf, jdk1.6, jrockit

我们有一堆在 weblogic 10.3.0.0 中运行的 CXF Web 服务。

在零星的情况下，网络层似乎无法读取 XML 流，并且 weblogic 服务器抛出以下错误。我们的服务消费者说他们偶尔会收到 XML 流或读取超时异常。显示应用程序日志`java.net.SocketException`。服务消费者还说，如果他们再次提交相同的请求，他们会收到正确的响应而不会出现任何问题。

以下是问题的日志。此日志来自 weblogic 的托管服务器（不是应用程序日志）此外，我粘贴了成功调用的标题详细信息下方。

```
####<May 3, 2012 6:21:44 PM CDT> <Error> <HTTP> <xxxxxxxx.yyyyyyyy.com> <server2> <[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'> <<anonymous>> <> <> <1336087304531> <BEA-101108> <[weblogic.servlet.internal.WebAppServletContext@58320dc6 - appName: 'webservice-aa-bb-1', name: 'webservice-aaa', context-path: '/webservice-aaa', spec-version: 'null'] Unsupported encoding: "utf-8";action="" specified.
java.io.UnsupportedEncodingException: Unsupported Encoding utf-8";action="
        at weblogic.servlet.internal.ServletRequestImpl.setCharacterEncoding(ServletRequestImpl.java:428)
        at weblogic.servlet.internal.ServletRequestImpl.initRequestEncoding(ServletRequestImpl.java:1115)
        at weblogic.servlet.internal.ServletRequestImpl.getCharacterEncoding(ServletRequestImpl.java:451)
        at org.apache.cxf.transport.http.HttpServletRequestSnapshot.<init>(HttpServletRequestSnapshot.java:69)
        at org.apache.cxf.transport.http.AbstractHTTPDestination$1.cacheInput(AbstractHTTPDestination.java:245)
        at org.apache.cxf.transport.http.AbstractHTTPDestination.cacheInput(AbstractHTTPDestination.java:441)
        at org.apache.cxf.transport.http.AbstractHTTPDestination.flushHeaders(AbstractHTTPDestination.java:453)
        at org.apache.cxf.transport.http.AbstractHTTPDestination.flushHeaders(AbstractHTTPDestination.java:446)
        at org.apache.cxf.transport.http.AbstractHTTPDestination$WrappedOutputStream.onFirstWrite(AbstractHTTPDestination.java:589)
        at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:42)
        at org.apache.cxf.io.CacheAndWriteOutputStream.write(CacheAndWriteOutputStream.java:68)
        at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:96)
        at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)
        at com.ctc.wstx.sw.BufferingXmlWriter.close(BufferingXmlWriter.java:194)
        at com.ctc.wstx.sw.BaseStreamWriter.finishDocument(BaseStreamWriter.java:1685)
        at com.ctc.wstx.sw.BaseStreamWriter.writeEndDocument(BaseStreamWriter.java:585)
        at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor$SoapOutEndingInterceptor.handleMessage(SoapOutInterceptor.java:282)
        at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor$SoapOutEndingInterceptor.handleMessage(SoapOutInterceptor.java:270)
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
        at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:104)
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:323)
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:118)
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:208)
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:223)
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:205)
        at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:113)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:184)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:107)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:163)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
        at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3498)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(Unknown Source)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2180)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2086)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1406)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

以下是我们调试日志中的标头详细信息。此标头已响应成功响应。我无法捕获不成功的服务请求的标头。

```
[________,[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)']:D: 03 18:01:41.417: ResponseTimeInInterceptor.handleMessage: HTTP Header :::::: Accept : application/soap+xml, multipart/related, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
[________,[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)']:D: 03 18:01:41.418: ResponseTimeInInterceptor.handleMessage: HTTP Header :::::: X-dynaTrace : FW0;-705664711;1266;3;964372818;3656;2
[________,[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)']:D: 03 18:01:41.418: ResponseTimeInInterceptor.handleMessage: HTTP Header :::::: User-Agent : Jakarta Commons-HttpClient/3.1
[________,[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)']:D: 03 18:01:41.418: ResponseTimeInInterceptor.handleMessage: HTTP Header :::::: Host : abcd.efg.hjk.com
[________,[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)']:D: 03 18:01:41.418: ResponseTimeInInterceptor.handleMessage: HTTP Header :::::: Content-Length : 496
[________,[ACTIVE] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)']:D: 03 18:01:41.419: ResponseTimeInInterceptor.handleMessage: HTTP Header :::::: Content-Type : application/soap+xml;charset="utf-8";action="" 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-10T06:58:56.820

在 bin 目录下的 DOMAIN_HOME 中，您应该有一个名为 setDomain.env 的文件

编辑文件以添加以下行，以便 Weblogic 将支持编码

JAVA_OPTIONS="${JAVA_OPTIONS} -Dfile.encoding=utf8"

# c++ - 从 int** 到 const int** 的无效转换

> ID：10442403
> 
> 赞同：1
> 
> 时间：2012-05-04T03:42:40.723
> 
> 标签：c++, constants, implicit-conversion, multiple-indirection

我有一个带有二维整数数组的类，该数组实现为 int **。我为这个二维数组实现了一个访问器函数，如下所示，返回一个 const int** 以防止用户对其进行编辑：

```
const int** Class::Access() const
{
     return pp_array;
} 
```

但是我得到了编译错误“从 int** 到 const int** 的无效转换”。为什么这里不允许对 const 的提升？如何在没有编辑权限的情况下授予用户访问信息的权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T03:59:37.077

Greyson 是正确的，你会想要使用`const int* const*`，但没有解释为什么你的原始版本失败了。

以下是*为什么* `int**`不兼容的演示`const int**`：

```
const int ci = 0;
const int* pci = &ci;
int* pi;
int** ppi = &pi;
const int** ppci = ppi; // this line is the lynchpin
*ppci = pci;
*pi = 1; // modifies ci! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T03:49:41.297

我误认为`const`方法的正确性是错误的原因。正如 Ben 指出的那样，`const`该方法的 -ness 是无关紧要的，因为它仅适用于外部指针 [指向`int`s 的指针] 的值，可以轻松地将其复制到可变版本。

为了保护数据（这是您的首选结果），您应该使`int`s 和指向`int`s 的指针都保持不变：

```
int const * const * Class::Access() const
{
   return pp_array;
} 
```

将工作。

如果您更喜欢将 const 放在前面，您也可以像这样编写声明：

```
const int * const * Class::Access() const; 
```

但由于第二个`const`适用于指针，它必须放在`const`星号的右边（就像适用于方法的那个）。

# c++ - 调用没有类实例的 c++ 类方法？

> ID：10442404
> 
> 赞同：37
> 
> 时间：2012-05-04T03:42:43.673
> 
> 标签：c++

`c++`是否可以在不首先创建类实例的情况下调用类方法？

假设我们有以下代码：

```
// just an example 
#include <iostream>
using namespace std;

class MyClass {
    public:
        MyClass();
        ~MyClass();
        int MyMethod(int *a, int *b);
};

// just a dummy method
int MyClass::MyMethod(int *a, int *b){;
    return a[0] - b[0];
} 
```

* * *

**这是另一个例子：**

```
#include <iostream>
using namespace std;

class MyClassAnother {
    public:
        MyClassAnother();
        ~MyClassAnother();
        int MyMethod(int *a, int *b);
};

// just a dummy method
int MyClassAnother::MyMethod(int *a, int *b){;
    return a[0] + b[0];
} 
```

正如我们所看到的，在上面的例子中，两个类都没有内部变量，并且使用了伪构造函数/析构函数；*他们的唯一目的是公开一种公共方法*，`MyMethod(..)`. 这是我的问题：假设文件中有 100 个这样的类（全部具有不同的类名，但具有相同的结构——一个公共方法具有相同的原型—— `MyMethod(..)`。

有没有一种方法可以调用每个类的`MyMethod(..)`方法调用，而无需先为每个类创建一个类实例？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-04T03:47:36.103

使用关键字'static'来声明方法：

```
static int MyMethod( int * a, int * b ); 
```

然后您可以在没有实例的情况下调用该方法，如下所示：

```
int one = 1;
int two = 2;

MyClass::MyMethod( &two, &one ); 
```

“静态”方法是仅将类用作命名空间的函数，不需要实例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T03:56:14.243

您可以通过声明它来调用没有实例的类方法`static`，但这似乎不是您想要的。您希望能够在 100 个不同的类上调用相同的方法。

C++ 有两种方法可以区分不同的类方法。一种是在编译时执行，一种是在运行时执行。在编译时，您需要调用类名本身作为对静态方法的调用的一部分，或者您需要对象实例或指向特定派生类的指针。如果您已将方法声明为虚拟方法，则在运行时您可以多态地调用方法。请注意，您需要该类的一个对象才能使用任一运行时方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T04:21:28.940

正如 Mark Random 和 Greyson 所提到的，您可以将该方法设为静态，然后在不实例化对象的情况下调用正确的签名。但是，您可能需要三思而后行以这种方式编写函数，而不是编写同一函数的不同版本。以下是注意事项，尤其是对于大型程序：

*   静态方法**很难为**.
*   静态方法的本质是 B/c，它们一直驻留在内存**中**。
*   如果您的程序需要使用多线程，那么它会很困难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-05T20:53:45.350

我不知道为什么没有其他人提到这一点，但从你评论中描述的功能**来看，听起来你想要的是一个命名空间，而不是一个类**。在 100 个不同命名的命名空间中定义 100 个同名函数对您来说非常好。它的行为应该与您所描述的完全一样，并且是命名空间背后的全部目的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-01T12:21:34.730

是的。您绝对不应该在生产代码中这样做，但在这种情况下，您可以使用空指针调用类方法，它会起作用。从技术上讲，您不会创建类实例。

```
#include <iostream>
using namespace std;

class MyClass {
    public:
        MyClass();
        ~MyClass();
        int MyMethod(int *a, int *b);
};

// just a dummy method
int MyClass::MyMethod(int *a, int *b){;
    return a[0] - b[0];
}

int main() {
    MyClass *myClass = nullptr;
    int a = 1;
    int b = 2;
    std::cout << res = myClass->MyMethod(&a, &b) << std::endl;
} 
```

Wubba Lubba 配音！

# java - 基本的不确定 JProgress Bar 用法

> ID：10442406
> 
> 赞同：6
> 
> 时间：2012-05-04T03:42:48.300
> 
> 标签：java, swing, progress-bar, swingworker, jprogressbar

当长时间下载完成时，我只想在我的框架的左下角有一个不确定的 JProgressBar 动画。

我浏览了很多教程，其中没有一个对我来说很清楚。我只是想让它在后台下载文件时设置动画。我尝试过的每一种方式，在下载完成之前它都不会为进度条设置*动画*。

我需要帮助知道在哪里放置我的 download() 调用。

```
class MyFunClass extends JFrame {
  JProgressBar progressBar = new JProgressBar();

  public void buttonClicked() {
    progressBar.setVisible(true);
    progressBar.setIndeterminate(true);

    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        progressBar.setIndeterminate(true);
        progressBar.setVisible(true);

        // Do I do my download() in here??

    }});

    // Do download() here???
    progressBar.setVisible(false);
  }
} 
```

提前致谢！

* * *

# 解决方案

*编辑：*对于那些将来与我有类似问题的人，这是基本问题的基本解决方案。这不是我的逐字代码，而是一般草图。内部`buttonClicked()`：

```
public void buttonClicked() {
  class MyWorker extends SwingWorker(String, Object) {
     protected String doInBackground() {
       progressBar.setVisible(true);
       progressBar.setIndeterminate(true);

       // Do my downloading code
       return "Done."
     }

     protected void done() {
        progressBar.setVisible(false)
     }
  }

  new MyWorker().execute();

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T03:48:19.380

您当前的代码显示没有创建后台线程，而是显示您尝试***从 Swing 线程中***对 Swing 线程上的代码进行排队，这对这个问题没有意义（尽管有时您可能想要这样做这个，但同样，不是在这里）。成功的唯一方法是使用后台线程。标准的 Oracle [JProgressBar 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)和[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)性贯穿了所有这些内容。

基本的事情是您必须从 Swing 线程更新 JProgressBar 将在后台线程中执行您的长时间运行的进程，例如 SwingWorker 对象提供的进程。有太多细节需要我们在这里查看，所以我所能做的就是提供一个链接，但是一旦你查看教程，我们很乐意帮助你理解细节。如果您仍然卡住，只需查看教程并返回您的具体问题。

**编辑 1**
您声明：

> 我可以在 buttonClicked() 函数中创建一个新的线程对象吗？

`buttonClicked()` *是的，您可以在方法*内部创建一个 SwingWorker 对象并在那里执行它。

> 问题是我有我正在开发 GUI 的所有功能的 API 和库，将函数调用包装在线程中似乎是一个冗长的解决方法。

抱歉，但我不知道你在这里说什么或者你认为线程会导致什么问题。该`buttonClicked()`方法可能*必须*在 EDT 上而不是在后台线程中运行。

另请注意，在我的大多数更复杂的 Swing GUI 中，我经常在不同的（模型）对象中下载文件，并在与 GUI 对象（视图）不同的对象（控件）中创建我的 SwingWorker。这样做可能看起来更复杂，但是当我这样做时，调试、维护和增强我的程序***要***容易得多，尤其是当我大量使用接口来允许我单独测试所有程序组件时。

**编辑 2**
对您的解决方案帖子的一些更正。您发布了：

```
public void buttonClicked() {
  class MyWorker extends SwingWorker(String, Object) {
     protected String runInBackground() {
       progressBar.setVisible(true);
       progressBar.setIndeterminate(true);

       // ... 
```

哪个有问题

*   是`doInBackground()`，不是`runInBackground()`
*   但更重要的是，您是在后台线程中进行 Swing 调用，这是永远不应该做的事情（除非调用是线程安全的，即使那样......）。

所以改变它：

```
public void buttonClicked() {
  progressBar.setVisible(true);
  progressBar.setIndeterminate(true);
  class MyWorker extends SwingWorker<String, Void> {
     protected String doInBackground() {

       // ... 
```

# powershell - PowerShell 是否有官方文字/保留符号参考？

> ID：10442409
> 
> 赞同：2
> 
> 时间：2012-05-04T03:42:58.383
> 
> 标签：powershell

PowerShell 文字（或通常保留的）字符/符号是否有官方（即 technet 或 MSDN，而不是博客）*参考？*

我指的字符包括`|`（管道数据）、`$`（变量）、`@()`（数组）、`@{}`（哈希表）和`${}`（我什至不知道这是做什么的）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T04:07:15.310

我将从开始`PS C:\> Get-Help About_Reserved_Words`并继续阅读参考的帮助页面。

也可以看看：

*   about_Command_Syntax
*   about_Escape_Characters
*   about_Language_Keywords
*   about_Parsing
*   about_Quoting_Rules
*   about_Script_Blocks
*   about_Special_Characters

PowerShell 使用的内置帮助`Get-Help`是隐藏的宝石之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T05:06:10.820

可以从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=9706)下载 Windows PowerShell 语言规范 2.0 版。几乎所有的细节都在那里。

# c# - 使用 IXmlSerialization，如何序列化 T 属性？

> ID：10442417
> 
> 赞同：0
> 
> 时间：2012-05-04T03:44:33.823
> 
> 标签：c#, xml, xml-serialization, xmlserializer, ixmlserializable

我的问题很简单。

假设我们有一个 Foo 类。并具有 T 属性。

```
public class Foo<T>
{
    public T Property { get; set; }
} 
```

我想在其中实现 IXmlSerializable，我的问题是我不知道要模仿标准的 XmlSerialization。我真的不知道如何像标准的 XmlSerlalization 那样编写这个属性。

更新：我这样做了，但它不起作用

```
public class Foo<T> : IFoo
    where T : IXmlSerializable
{
    public T Value { get; set; }
}

public class FooA : Foo<string> { }
public class FooB : Foo<int> { }
public class FooC : Foo<List<Double>> { } 
```

当我序列化这个类（A、B 和 C）时。我想要这样的东西：

使用头等舱：

```
<FooA>
    <Value>StringDemo</Value>
</FooA> 
```

使用第二类：

```
<FooB>
    <Value>2</Value>
</FooB> 
```

使用第三类：

```
<FooC>
    <Value>
        <ArrayOfDouble xsi:..>
            <Double>3.1416</Double>
            <Double>4.2</Double>
        </ArrayOfDouble>
    </Value>
</FooC> 
```

像这样的东西是我想要的，我不想在所有这些中实现自定义 XmlSerializer，我的意思是标准序列化使用的默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:38:03.850

您需要在和 T中实现[IXmlSerializable](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx) （使用。然后，实现 in将负责编写带有类型信息的包装器元素（在[WriteXml](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.writexml.aspx)中）并调用T，并根据类型信息（在[ReadXml](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.readxml.aspx)中）重新创建实例和打电话给T。`Foo<T>``where T : IXmlSerializable``Foo<T>``WriteXml``ReadXml`

基本类型 like`String`和`Double`is not `IXmlSerializable`，所以`where T : IXmlSerializable`如果你想支持它们就不能拥有。您还可以提供`ReadXml`和的默认实现`WriteXml`。这是可行的，因为您需要`Foo<T>`在调用之前创建一个`ReadXml`，迫使您知道`T`。

```
public class Foo<T> : IXmlSerializable {
    public T Value { get; set; }

    XmlSchema IXmlSerializable.GetSchema() {
        return GetSchema();
    }

    protected virtual XmlSchema GetSchema() {
        return null;
    }

    public virtual void ReadXml(XmlReader reader) {
        reader.ReadStartElement();
        var xmlSerializer = new XmlSerializer(typeof(T));
        Value = (T)xmlSerializer.Deserialize(reader);
        reader.ReadEndElement();
    }

    public virtual void WriteXml(XmlWriter writer) {
        var xmlSerializer = new XmlSerializer(typeof(T));
        xmlSerializer.Serialize(writer, Value);
    }
} 
```

# javascript - 是什么导致 Meteor 中的“模板未定义”？

> ID：10442419
> 
> 赞同：22
> 
> 时间：2012-05-04T03:44:40.980
> 
> 标签：javascript, meteor

这个极其简单的 Meteor 应用程序`Template is not defined`在加载时会引发错误。该应用程序本质上与样板项目 ( `meteor create`) 相同，只是拆分为 server/client/public 目录。

Meteor 似乎试图`template`在全局 Template 对象实际准备好之前渲染 Handlebars 标签。当我可以到达 JS 控制台并输入“模板”时，它就在那里。

我做错了什么，还是这是一个计时错误？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-25T20:38:39.210

您需要确保在调用模板的 .js 文件中包含在 .js 中`if (Meteor.isClient){}`，否则由于`Template`某种原因全局变量将不可用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T04:06:46.220

嗯，也许这会解决你的问题：

请注意，body 标签包含模板名称但不包含模板：

```
<body>
  {{> hello}}
</body>

<template name="hello">
  {{greet}}
</template> 
```

另外，请注意“.greet”指的是 {{greet}}：

```
if (Meteor.isClient) {
  Template.hello.greet = function () {
    return "Hey!";
  };
} 
```

所以，问题是你不能在正文中有模板。相反，主体使用 {{> hello}} 调用模板，如上面的代码所示。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-24T23:12:51.663

如果这在一个包中，请确保您的 api 使用列表中有模板，即

api.use('模板', '客户端');

这可确保您的代码在模板对象被实例化后运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T04:11:52.870

尝试 Template.hello.this 将数据传递给 {{this}}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-16T16:51:10.033

这是一个初始化问题。`Meteor.startup(function () {}`我正在使用Meteor 1.0，我通过 `if`在`Meteor.isClient`.

这可能是一个错误，因为特殊目录上的文档如下（截至今天）：

> 客户端：任何名为客户端的目录都不会加载到服务器上。类似于将代码包装在 if (Meteor.isClient) { ... } 中。在生产模式下，客户端上加载的所有文件都会自动连接和缩小。在开发模式下，每个文件都是单独发送的，以便于调试。Meteor 应用程序中的 HTML 文件的处理方式与服务器端框架有很大不同。Meteor 扫描目录中的所有 HTML 文件以查找三个顶级元素：`<head>`、`<body>`和`<template>`. 头部和身体部分分别连接成一个单独的头部和身体，在初始页面加载时传输给客户端。

但如果没有初始化，这将失败并出现“找不到模板错误”。

# javascript - Adobe Flex（移动）：StageWebView 和 HTML5 功能：window.localStorage 为空？

> ID：10442424
> 
> 赞同：0
> 
> 时间：2012-05-04T03:46:36.110
> 
> 标签：javascript, apache-flex, mobile, webview, local-storage

我使用 FlashDevelop（Flash Builder 的免费替代品），它使用 Adob​​e 的（最新）开源 Flex 框架。

我也想为 Android 和 iOS 开发一个应用程序。在某些部分，我使用 StageWebView 来显示我不想重写为 flex AS3 代码的内容。

简而言之：我处于开发的早期阶段，这是我的第一个 flex 移动应用程序。在某些部分，它使用 HTML5 功能“localStore”（javascript 中对象窗口的一部分）来存储一些数据。但是好像flex的webkit浏览器没有这个功能？我还想知道这是否是典型的 flex 问题，还是在部署应用程序时也存在？在移动设备上加载 HTML 部分时不会出现此问题（例如在移动 Safari 中）。

此外，当 localStorage 功能不可用时，它会切换回 cookie。但这也无法正常工作。在所有其他浏览器中都没有问题，即使在 IE 中也是如此。饼干的结果：`varname=undefined; expires=Thu, 03 May 2012 01:01:41 GMT.`

到底是怎么回事？

这是一些Javascript代码：

```
// Picked up from: https://github.com/carhartl/jquery-cookie
// Usage: http://www.electrictoolbox.com/jquery-cookies/
jQuery.cookie = function (key, value, options) {

    // key and at least value given, set cookie...
    if (arguments.length > 1 && String(value) !== "[object Object]") {
        options = jQuery.extend({}, options);

        if (value === null || value === undefined) {
            options.expires = -1;
        }

        if (typeof options.expires === 'number') {
            var days = options.expires, t = options.expires = new Date();
            t.setDate(t.getDate() + days);
        }

        value = String(value);

        return (document.cookie = [
            encodeURIComponent(key), '=',
            options.raw ? value : encodeURIComponent(value),
            options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
            options.path ? '; path=' + options.path : '',
            options.domain ? '; domain=' + options.domain : '',
            options.secure ? '; secure' : ''
        ].join(''));
    }

    // key and possibly options given, get cookie...
    options = value || {};
    var result, decode = options.raw ? function (s) { return s; } : decodeURIComponent;
    return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;
}; 
```

本地存储：

```
jQuery.locstore = function(key, val, opt ) {
      var ls = window.localStorage,
          j = window.JSON,  
          b = !( !ls || !j );
      if( !b )
       { return jQuery.cookie( key, val, opt ); }

      // set
     if( arguments.length > 1 )
     { 
       var bRem = (val == null ),
           v = (bRem || typeof val == 'number' || typeof val == 'string')?val:j.stringify(val);
       if( bRem )
        { b = ls.removeItem(key); }
       else { b = ls.setItem(key, v); }
       return b;
     }

     // get
     var v = ls.getItem(key);
     if( v != null && typeof val != 'number' )
      try { v=j.parse(v); } catch(e){}
     return v;
    }; 
```

我在这里问它，因为我没有在网上找到答案。也许有人给我一个线索来解决这个问题的正确方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:00:58.153

> 但是好像这个功能在flex的webkit浏览器中是没有的

Flex 框架中没有 webkit 浏览器。Desktop AIR 运行时中包含一个 Webkit 版本；但这对于移动应用程序来说并不重要。

Mobile AIR 为 StageWebView 使用操作系统（Android 或 iOS）的下划线浏览器引擎。我不确定具体情况；也没有通过“应用程序中的浏览器”公开哪些功能，但这里[引用文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)来确认这一点：

> 在移动和扩展移动配置文件中的设备上，StageWebView 类使用设备操作系统提供的系统 Web 控件。因此，可用功能和渲染外观可能因设备而异。

因此，我推测您的问题与 Flex 或 AIR 无关，而是与您正在测试的操作系统中浏览器的支持有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:28:53.937

这些可能对您有所帮助：http:
[//helpx.adobe.com/air/kb/stagewebview-differences-platforms-air-sdk.html](http://helpx.adobe.com/air/kb/stagewebview-differences-platforms-air-sdk.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)

[http://xperiments.es/blog/en/stagewebviewbridge-comunicacion-entre-actionscript-y-javascript-y-viceversa/](http://xperiments.es/blog/en/stagewebviewbridge-comunicacion-entre-actionscript-y-javascript-y-viceversa/)

[http://coenraets.org/blog/2011/07/using-jquery-in-a-flex-application/](http://coenraets.org/blog/2011/07/using-jquery-in-a-flex-application/)
（也可以查看上一篇文章。链接在第一段。）

希望最后两个中的一个可以帮助解决问题/给您解决方法。

托德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T13:56:35.413

显然 Air 的 stageWebView 不支持**localStorage**。尽管它不是一个完美的解决方案，但在花了几个月的时间寻找解决方案之后，我用**sessionStorage**替换了 localStorage ，并且能够正确加载我的文件。

请记住，sessionStorage 仅适用于 stageWebView 的 loadURL 方法，loadString 没有 localStorage 和 sessionStorage。

编辑： sessionStorage 似乎只在 android 中工作。我不能：localStorage 和 sessionStorage 在 Adob​​e Air for iOs 中工作。

编辑 2：显然，Adobe Air 的 2 月更新允许在 Android 的 Adob​​e Air 上使用 localStorage。（还没有测试过）

# .net - 如何在洋葱架构上实现服务和存储库？

> ID：10442433
> 
> 赞同：7
> 
> 时间：2012-05-04T03:47:39.873
> 
> 标签：.net, domain-driven-design, ddd-repositories, onion-architecture, ddd-service

这几天我一直在研究洋葱架构。我了解依赖项应该始终朝向中心，以及如何使用依赖项注入来实现这一点。但是我有几个问题我仍然无法弄清楚。

1.  模型（或实体）可以引用存储库接口或服务接口吗？

    eg：一个`Order`实体有一个`DeliveryCity`通过`Oder.DeliveryZip`属性建立的关系，它**不是**外键，而是唯一的。为了得到城市的拉链，我必须打电话`ICityRepository.FindByZip(zip)`

    我的模型中有以下代码

    ```
    class Order
    { 
        . . .

        [Inject]
        public ICityRepository CityRepository { get; set; }

        private City _dCity;

        public City DeliveryCity {
            get {
                if (_dCity == null)
                    _dCity = this.CityRepository.FindByZip(this.DeliveryZip);

                return _dCity;
            }
        }
        . . .
    } 
    ```

2.  上面的代码会有什么问题？它应该改用域服务吗？

3.  领域服务实现应该在核心层还是在基础设施层定义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:45:20.883

> 上面的代码会有什么问题？它应该改用域服务吗？

这里需要考虑两件事：

1.  `ICityRepository`不是 Order 的真正依赖项，换句话说，Order 的其他方法不需要它。真正的依赖是对象不能没有的东西。因此，您可能需要考虑将其作为参数传递给类似 ' `GetDeliveryCity`' 的方法（有关详细信息，请参阅[此](https://rads.stackoverflow.com/amzn/click/com/0321503627)内容）。

2.  按邮政编码查找城市似乎不是订单的责任。为了使 Order 具有[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)，它必须只处理与订单相关的功能。您可能希望将此功能从订单类中移除。

> 领域服务实现应该在核心层还是在基础设施层定义？

如果这是真正的域服务（不是应用程序服务），则在核心内部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T13:04:43.937

这就是工厂适合该领域的地方。OrderFactory 可以接受依赖，例如对 IOrderRepository 的依赖以及对 ICityRepository 的依赖。当工厂用于创建（或重构）一个 Order 实体时，工厂可以查找 City 并相应地设置 Order 属性。或者，正如 herzmeister 建议的那样，使用 Lazy 进行设置，以便仅在需要时执行查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:08:54.283

1.  怎么样

    ```
    private Lazy<City> _dCityLazy;

    public City DeliveryCity {
        get {
            return _dCityLazy.Value;
        }
    } 
    ```

    你会`Lazy<City>`通过某种机制在哪里注入？

2.  在这个例子中，你可以通过从外部注入来灵活地决定。

3.  我想说这真的取决于特定域服务的功能和使用位置。

# java - 线程和 Loop.prepare() 问题

> ID：10442438
> 
> 赞同：0
> 
> 时间：2012-05-04T03:48:29.487
> 
> 标签：java, android, progress-bar

我不能让它工作。问题是，线程永远不会被通知侦听器已完成搜索位置。

```
final ProgressDialog progress = new ProgressDialog(this);
    progress.setTitle("Procurando");
    progress.setMessage("Localizando o dispositivo.");
    progress.show();
    Thread thread = new Thread(new Runnable() {

    public void run() {
        // TODO Auto-generated method stub
        GeoLocationHandler handler = new GeoLocationHandler();
        try {
            synchronized (handler) {
                Looper.prepare();
                mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,          0,handler);
                handler.wait();
            }
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
        e.printStackTrace();
        } finally {
        progress.dismiss();
        mLocationManager.removeUpdates(handler);
        double lat = mLocation.getLatitude();
        double lng = mLocation.getLongitude();
        Intent intent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?saddr=" + lat + "," + lng +    "&daddr=-22.858114, -43.231295"));
    startActivity(intent);
    }
}
thread.start(); 
```

这是实现 LocationListener 的类：

```
private class GeoLocationHandler implements LocationListener {

    public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    mLocation = location;
    notify();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:32:12.970

想出了解决方案，不是按照我想要的方式安静，但它确实有效。将进度对话框创建为字段并通过处理程序将其关闭。

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.ibMap:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setTitle("Procurando");
    mProgressDialog.setMessage("Localizando o dispositivo.");
    mProgressDialog.show();
    mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mGeoHandler);
        break;
    default:
    Toast.makeText(getBaseContext(), "Nothing yet.", Toast.LENGTH_SHORT).show();
    }
}

private class GeoLocationHandler implements LocationListener {

    public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    mLocation = location;
    mHandler.sendEmptyMessage(0);
    }

}

private class MyHandler extends Handler {

@Override
public void dispatchMessage(Message msg) {
    mProgressDialog.dismiss();
    double lat = mLocation.getLatitude();
    double lng = mLocation.getLongitude();
    Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?saddr=" + lat + "," + lng + "&daddr=UFRJ,RJ"));
    startActivity(intent);
    super.dispatchMessage(msg);
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:34:14.933

问题是您不是`notify()`从同步块调用。如果您想尝试让您的原始解决方案工作，试试这个

```
private class GeoLocationHandler implements LocationListener {

    public void onLocationChanged(Location location) {
      // TODO Auto-generated method stub
      mLocation = location;
      synchronized(handler){
          notify();
      }
    }

} 
```

# groovy - GroovyResourceLoader 是否曾在主 ClassLoader 之外调用过？

> ID：10442439
> 
> 赞同：0
> 
> 时间：2012-05-04T03:48:49.967
> 
> 标签：groovy

我设置了一个 GroovyResourceLoader，它似乎会根据需要获取对 groovy 脚本的请求。我只是想知道它是否专门用于除类加载之外的任何地方？与使用 GRL 相比，简单地包装 ClassLoader 并在那里加载 *.groovy 文件有什么好处吗？它们只是达到同一目的的不同方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:04:55.067

GroovyResourceLoader (GRL) 被 GroovyClassLoader (GCL) 使用，并且至少从 Groovy 1.8 开始通过 GroovyScriptEngine (GSE) 间接使用。但是 GSE 也通过 GCL 加载它。

但是 GRL 所做的是“定位”脚本并将 URL 返回到该位置。GCL 所做的是使用 GRL 返回的 URL 来获取源代码并编译它以创建类，然后可以加载该类。

GRL 是 GCL 的后端。因此，它们不是达到同一目的的不同方式。的确，您仍然需要做更多的事情才能实际执行脚本代码（除非它是预编译的），但是“获取脚本源，编译它，从中创建一个类并最终执行它”是您始终必须执行的步骤做。在我们的 GRL/GCL 讨论中，GRL 完成了第一步，GCL 本身完成了第三步。第 2 步由 GCL 中的 CompilationUnit 完成，最后一步由您完成。当然，还有其他方法可以完成这些步骤，但这超出了本次讨论的范围。

# google-apps-script - 谷歌应用程序脚本电子表格错误与 insertRows() 和 getRange() 操作后立即

> ID：10442448
> 
> 赞同：0
> 
> 时间：2012-05-04T03:50:11.640
> 
> 标签：google-apps-script, google-spreadsheet-api

It would seems I am stuck with a consistant "**Server Encountered an Error**" when I am trying in my function to use the **insertRows()** call or insertRowsAfter() and then do a getRange() operation call within the range of cells newly created (like changing the font weight, or setvalues in the new cells).

When I call my function I always get a google "Server Encountered and Error". When I call my function in **debug mode**, step by step: no errors!!! I have no error logs showing when doing a catch.

I tried a Spreadsheet.flush() call before the getRange() operation, not helping.

```
 function test() {
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var sdebtcal = ss.getSheetByName('Debt');  
    var max_rows = sdebtcal.getMaxRows(); // sheet set with only 5 rows to test
    sdebtcal.insertRowsAfter( max_rows , 20); // adding 20 rows 
    sdebtcal.getRange(max_rows+5, 1, 2, 1).setFontWeight('bold'); // trying to setFontWeight in the new range of cells
  } 
```

我不得不说我尝试了一个空白电子表格，但我没有问题。仅使用我当前的**大型**电子表格。虽然测试表很小（要测试 2 行！）。此外，我没有达到电子表格上的任何最大单元格限制。

有人有提示吗？带有大型电子表格的电子表格脚本 API 可能存在错误？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:02:15.697

我发现如果在脚本执行时电子表格没有在客户端打开，我在使用 InsertRowsBefore() 和 InsertRowsAfter() 时遇到的问题就会消失。因此，如果您可以从不同电子表格中的脚本或定时触发器中插入行，那么您可能会发现可以解决该问题。祝你好运！

这是我在 GAS 论坛上发表的一篇文章的[链接，如果您想了解更多详细信息，并且您可能也有兴趣在](https://groups.google.com/a/googleproductforums.com/forum/#!starred/apps-script/VoQNg_qBCOE)[问题 1270](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1270&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Priority%20Component%20Owner)中添加关于它的评论。

# mysql - 不能在 zsh 中使用“which mysql”，但在 bash 中工作

> ID：10442449
> 
> 赞同：3
> 
> 时间：2012-05-04T03:50:14.823
> 
> 标签：mysql, bash, ubuntu, zsh

升级到 Ubuntu 12.04 LTS 并安装 mysql server 5.5 后，我不能在 zsh 中使用“which mysql”，但在 bash 中工作！这是我的回声：

```
 ZSH:
    $ whereis mysql
    mysql: /usr/bin/mysql /etc/mysql /usr/lib/mysql /usr/bin/X11/mysql /usr/share/mysql /usr/share/man/man1/mysql.1.g

    $ which mysql
    mysql: aliased to nocorrect mysql

    $ alias
    ...
    ...
    mysql='nocorrect mysql'
    ...
    ... 
```

* * *

```
 BASH:
    $ whereis mysql
    mysql: /usr/bin/mysql /etc/mysql /usr/lib/mysql /usr/bin/X11/mysql /usr/share/mysql /usr/share/man/man1/mysql.1.g

    $ which mysql
    /usr/bin/mysql 
```

# jquery - setinterval() 和 clearinterval() - 清除时，不会自动设置动画

> ID：10442452
> 
> 赞同：3
> 
> 时间：2012-05-04T03:50:40.603
> 
> 标签：jquery, background, slideshow, setinterval, clearinterval

因此，我正在尝试构建一个动画背景图像，它将在一组图像中循环。

这个想法也是，当您单击页面上的任何导航元素时，循环将暂停。

当您单击主页按钮时，循环将再次启动（从当前图像开始）。

这在当前状态下有效，但是在重新启动时循环不是自动的，而是您必须为每个淡入淡出/滑动/任何内容按下主页按钮。

脚本如下：

```
$(document).ready(function(){

    var imgArr = new Array(
        'img/slides/slide1.jpg',
        'img/slides/slide2.jpg',
        'img/slides/slide3.jpg');

    var preloadArr = new Array();
    var i;

    // Preload
    for(i=0; i < imgArr.length; i++){
        preloadArr[i] = new Image();
        preloadArr[i].src = imgArr[i];
    }

    var currImg = 1;
    var IntID = setInterval(startSlider, 4000);

    // Image Rotator

    function startSlider(){
        $('.mainbg').animate({opacity: 0}, 1200, "easeInOutExpo", function(){
            $(this).css('background','url(' + preloadArr[currImg++%preloadArr.length].src + ') no-repeat center center fixed');
            $(this).css({'background-size': 'cover' , '-webkit-background-size': 'cover' , '-moz-background-size': 'cover' , '-o-background-size': 'cover' ,});
            }).animate({opacity: 1}, 1200, "easeInOutExpo");
        }

    function stopSlider() {
        clearInterval(IntID);
    }

    $(".topnav ul li a").click(stopSlider);

    $("#home").click(startSlider);
}); 
```

如果有人能指出我正确的方向，将不胜感激！最好的问候，卡斯帕。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T03:57:04.957

这应该为你做。

```
var IntID = setTimer();

function setTimer(){
     i = setInterval(startSlider, 4000);
     return i;
}

function stopSlider() {
    clearInterval(IntID);
}

//Restart Timer
// Option 1 make a restartSlider function and call it
$("#home").click(restartSlider);
function restartSlider(){
      IntID = setTimer();
}

//Option 2 create an anonymous function only for that click event.
$("#home").click(function(){
     IntID = setTimer();
}); 
```

# html - 让嵌入式 flowplayer 播放本地视频文件

> ID：10442457
> 
> 赞同：0
> 
> 时间：2012-05-04T03:51:20.647
> 
> 标签：html, video, flowplayer, object-tag

我嵌入`flowplayer`使用`html page`以下`<object`标签。它成功地从他们的网站播放提到的视频（即来自 url`http://stream.flowplayer.org/KimAronson-TwentySeconds1318.flv`

但是，我想从本地文件系统播放视频。说`/home/me/videos/test.flv`

在这种情况下，我该如何提及 url？我应该提供什么`baseurl ,url`价值？

```
<object width="320" height="200" id="undefined" name="undefined"
  data="http://releases.flowplayer.org/swf/flowplayer-3.2.10.swf" type="application/x-shockwave-flash">
  <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.10.swf" />
  <param name="allowfullscreen" value="true" />
  <param name="allowscriptaccess" value="always" />
  <param name="flashvars" value='config={"clip":{"baseUrl":"http://stream.flowplayer.org","url":"http://stream.flowplayer.org/KimAronson-TwentySeconds1318.flv"},"canvas":{"backgroundColor":"#112233"},"plugins":{"controls":{"time":false,"volume":true,"fullscreen":false},"content":{"url":"flowplayer.content-3.2.8.swf"}}}' />
  </object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:12:02.863

您不能直接要求 flowplayer 从本地文件系统加载文件。想想所有试图从远程服务器加载此文件的闪存 (swf) 文件，它们不能简单地将文件系统中的任何内容用作资源。

测试它的最简单方法是设置本地服务器。无论是 Apache、IIS 还是任何您喜欢或对您来说简单的服务器。然后将配置的网址更改为本地服务器上的视频网址，这将解决您的问题。

您不需要更改 baseUrl 的任何内容，因为这是加载所有这些 flowplayer flash 文件的地方。例如，您提供的代码中的内容 url 将是 baseurl + content.url => [http://stream.flowplayer.org/flowplayer.content-3.2.8.swf](http://stream.flowplayer.org/flowplayer.content-3.2.8.swf)。

但是，一旦您将页面投入生产，您可能需要考虑在本地托管此 flash 文件，以避免每次都获取远程 flowplayer 服务器。在这种情况下，您需要将 baseUrl 更改为新服务器应有的任何内容。

# javascript - 如何在 javascript 中使用 DIV ID 对 DIV 产生悬停效果？

> ID：10442462
> 
> 赞同：-1
> 
> 时间：2012-05-04T03:51:38.140
> 
> 标签：javascript, jquery

我想使用 div id 对每个 div 有不同的悬停效果。是否可以？我已经在谷歌上搜索了一段时间，我看到的只是使用类名和标签的悬停效果。我想使用 javascript 或 jquery 来做到这一点。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:55:21.730

`id`您可以在函数中评估from ：

```
$(".hoverItems").hover( overState, outState );

function overState () {
  switch ( this.id ) {
    case "foo" :
      /* effect a */
      break;
    case "bar" :
      /* effect b */
  }
}

function outState () {
  switch ( this.id ) {
    case "foo" :
      /* undo effect a */
      break;
    case "bar" :
      /* undo effect b */
  }
} 
```

演示：http: [//jsbin.com/evikog/edit#javascript,html](http://jsbin.com/evikog/edit#javascript,html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:55:36.097

使用 JQuery，您可以将操作绑定到 mouseEvent： [http ://api.jquery.com/category/events/mouse-events/](http://api.jquery.com/category/events/mouse-events/)

您只需要将事件绑定到您的 div 并执行动画...

```
$("#foo,#bar").hover( overState, outState );

function overState () {
      /* effect */
}

function outState () {
      /* undo effect */
} 
```

如果您想为多个 div 设置动画，请将它们归为一类。例如“动画”：

HTML：

```
<div class="animated">blabla</div> 
```

Javascript

```
$(".animated").hover( overState, outState ); 
```

这样，您所有具有动画类的 div 都将具有动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:57:03.830

您可以将 css 与 class+id 的组合用于特定样式

# c# - 当url仅包含文件ID时如何从网络服务器下载文件

> ID：10442465
> 
> 赞同：0
> 
> 时间：2012-05-04T03:51:55.007
> 
> 标签：c#, silverlight, iis, download, webserver

我们有视频剪辑存储，我们希望为最终用户提供剪辑的 url 链接，以便最终用户可以通过单击 url 开始下载剪辑。但这里的技巧是 url 链接不是存储在虚拟文件夹中的剪辑文件的直接路径，但 url 包含剪辑 ID。它可能看起来像，

```
 www.xyz.com/clipstore/ID 
```

当最终用户点击 url 时，服务器应在剪辑存储中搜索剪辑，处理剪辑（从一种格式转换为另一种格式）并在最终用户位置开始下载。当 url 不是直接指向文件而是文件的 ID 时，任何人都可以指导我们服务器如何为最终用户启动下载。我们在服务器端使用 IIS 6 / 7 和 C#。客户端基于silverlight。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:06:12.323

在 ASP.net MVC 中这是可能的并且非常直接。例如，我已将 mime 类型硬编码为“image/png”，但我应该根据文件类型。

```
 public ActionResult clipstore(string id)
    {
        var path = GetFilePathByID(id);

        StreamReader reader = new StreamReader(path);

        var fileBytes = System.IO.File.ReadAllBytes(path);            

        FileContentResult file = File(fileBytes, "image/png");

        return file;
    } 
```

# ruby-on-rails - 如何跳过 has_secure_password 验证

> ID：10442466
> 
> 赞同：22
> 
> 时间：2012-05-04T03:52:12.873
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

在我的应用中，只有管理员可以创建新的用户记录。用户会收到一个激活链接，他们在其中设置了密码。

我想使用 has_secure_passord 方法（[railscast](http://railscasts.com/episodes/250-authentication-from-scratch-revised)）：

```
class User < ActiveRecord::Base
  has_secure_password
  ...
end 
```

效果很好，但它会自动验证密码摘要的存在......所以当管理员创建记录时验证失败。我有办法跳过自动添加的密码摘要验证而不跳过我添加的其他验证吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-05-23T05:10:03.093

从 4.X 版本的 rails 开始，`has_secure_password`有一个选项 :validations。如果将其设置为`false`，它将不会运行验证。

gem 3.X 版本不支持该参数。但是，您可以从支持此参数的[最新 4.0.XRC 代码](https://github.com/rails/rails/blob/ef5d85709d346e55827e88f53430a2cbe1e5fb9e/activemodel/lib/active_model/secure_password.rb#L51)向后移植 activemodel/lib/active_model/secure_password.rb 。

因此，您的代码将如下所示：

```
class User < ActiveRecord::Base
  has_secure_password :validations => false
  ...
end 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-04T14:24:50.480

我决定进行自己的自定义身份验证。以下解决方案将验证密码，但仅在设置密码时。这允许管理员在不添加密码的情况下创建用户。

```
class User < ActiveRecord::Base
  include BCrypt

  attr_accessor :password, :password_confirmation

  validates :password, length: (6..32), confirmation: true, if: :setting_password?

  def password=(password)
    @password = password
    self.password_hash = Password.create(password)
  end

  def authenticate(password)
    password.present? && password_hash.present? && Password.new(password_hash) == password
  end

private

  def setting_password?
    password || password_confirmation
  end

end 
```

如果有人发布允许我仍然使用该`has_secure_password`方法的答案，我会接受它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T04:07:18.617

没有办法跳过验证，但是编写自己的方法版本很容易，它允许您传递参数以确定是否验证 password_digest 字段的存在。

[只需以与SecurePassword 模块](https://github.com/lifo/docrails/blob/master/activemodel/lib/active_model/secure_password.rb)`ActiveModel`中相同的方式进行扩展（通过）并添加您自己的安全密码方法。`ActiveSupport::Concern`

IE

```
module ActiveModel
  module MySecurePassword
    extend ActiveSupport::Concern

    module ClassMethods
      def my_has_secure_password(validate_password_digest=true)
        # you custom logic
      end
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-15T18:13:48.203

借鉴 Journeyer 和 Tybro 的答案，我想看看您是否可以添加一个私有方法，该方法返回 true 或 false 到验证哈希。它有效，我将它用于不同的用例，但在这种情况下，它看起来像这样。

```
 class User < ActiveRecord::Base
    has_secure_password validations: !:setting_password

   #If setting_password is true then this will be the same as 
   validations: false
   ..... 
   private

   def setting_password?
    #Some logic that determines if a user is setting a password and resolves 
    to true or false
    password || password_confirmation
   end
   ...
  end 
```

# java - 向 href 添加数据时出错

> ID：10442468
> 
> 赞同：1
> 
> 时间：2012-05-04T03:52:22.523
> 
> 标签：java, html, jsp

以下jsp片段：

```
<% while(set.next()) { %>

<li>
         <%-- statement 3--%> <a class="thumb" href="/home/non-admin/project uploads/project users/" <% + %> <%= set.getString("UserEmail") %> <% + %> "/" <% + %> <%= set.getString("NameOfThePhoto") %> > <img src="images/portfolio_two/1_thumb.jpg" alt="one"> </a>
          <div class="caption">
            <div class="image-title portfolio_two">&quot;Pier by the sea, Fowey, Cornwall, UK&quot;</div>
          </div>
</li>
<% } %> 
```

在语句 3 中给出错误。IDE 说`not a statement`和`"""""" is not serializable in xml 1.0`。这是什么错误，为什么会发生？在语句 3 中，我将从数据库中获取的值添加到 href。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:23:48.283

我试了一下。但是，我仍然不喜欢“项目上传”和“项目用户”中的空格。

```
href="/home/non-admin/project uploads/project users/<%=set.getString("UserEmail")%>/<%=set.getString("NameOfThePhoto")%>" 
```

# r - 在 R 中检查和记录函数前置条件和后置条件的惯用方法是什么？

> ID：10442469
> 
> 赞同：10
> 
> 时间：2012-05-04T03:52:36.867
> 
> 标签：r, exception-handling, design-by-contract

**在 R 中检查和记录函数前置条件和后置条件的惯用方法是什么？**我会在这里考虑`Eiffel`' 的内置`require`和`ensure`构造或`D`'`in`和`out`阻止最先进的技术，但大多数语言都没有这些，因此已经开发出最佳实践来近似它们。

通过检查前提条件，我的意思是如果传入不符合函数假设的数据，则抛出某种运行时异常。目前`stopifnot`，我在函数开始时可以想到的每个前提条件都有一个语句。这同样适用于后置条件，但关于返回值而不是参数。

此外，是否有标准的方法来记录这些前置条件和后置条件是什么？例如，在 Java 中的 JavaDoc 注释中将这些拼写出来是非常标准的。

R 在这方面的最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T06:09:30.637

S4 类的有效性检查，其中检查通过“setValidity”与类定义一起存储。参见例如：

[http://www.r-project.org/conferences/user-2004/Keynotes/Leisch.pdf](http://www.r-project.org/conferences/useR-2004/Keynotes/Leisch.pdf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T09:29:23.460

看`?stopifnot`

或者

用于更友好的错误消息但更冗长的代码`if (condition) stop("...message...")`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T08:41:16.773

在文档方面，我建议您查看该`roxygen2`软件包。它与 JavaDoc 和 Doxygen 的相似之处在于它将文档与代码一起存储在源文件中。有许多项目需要定义，例如：

*   输入参数是什么
*   函数返回什么

但这并不能阻止您创建自己的`pre`项目`post`和记录前后条件的项目。有关详细信息，`roxygen2`请参阅[CRAN](http://cran.r-project.org/web/packages/roxygen2/index.html)或[StackOverflow](https://stackoverflow.com/questions/tagged/roxygen2)。

# java - Android：点击EditView时隐藏软键盘

> ID：10442470
> 
> 赞同：1
> 
> 时间：2012-05-04T03:52:41.080
> 
> 标签：java, android, xml

在我的应用程序中，我必须从用户那里获取日期。
首先，我使用一个按钮，当用户单击该按钮时，将出现一个对话框，其中包含日期选择器并在一个 TextView 中获取结果。
现在我想用 EditView 替换按钮。单击 EditView 时，必须出现对话框，并且不应出现任何键盘。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.report);
        EmployeeGlobal eg=(EmployeeGlobal)getApplicationContext();
        String uid=eg.getMainUserId();
        ArrayList<String>list=eg.getAllProjects(uid);
          Spinner spinner = (Spinner)findViewById(R.id.all_projs);
          ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
          spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
          spinner.setAdapter(spinnerArrayAdapter);
          Toast.makeText(getApplicationContext(), "Report"+uid, Toast.LENGTH_LONG).show();
          mStartDateDisplay=(TextView)findViewById(R.id.strdate);
          mEndDateDisplay = (TextView) findViewById(R.id.enddate);
            mEndDate = (Button) findViewById(R.id.end_dateb);
            mStartDate=(Button)findViewById(R.id.start_dateb);
            mYear=c1.get(Calendar.YEAR);
            mMonth = c1.get(Calendar.MONTH);
            mDay = c1.get(Calendar.DAY_OF_MONTH);
            mStartDate.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    showDialog(DATE_DIALOG_START);

                    //updateDisplay(mStartDateDisplay);
                }
            });
            mEndDate.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    showDialog(DATE_DIALOG_END);
                     //updateDisplay(mEndDateDisplay);
                }
            });

    }
    private void updateDisplay(TextView T) {
        T.setText(
            new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mMonth + 1).append("-")
                    .append(mDay).append("-")
                    .append(mYear).append(" "));
    }
    private DatePickerDialog.OnDateSetListener mFromDateSetListener =
        new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year, 
                                  int monthOfYear, int dayOfMonth) {
                mYear = year;
                mMonth = monthOfYear;
                mDay = dayOfMonth;
                updateDisplay(mStartDateDisplay);

            }
        };
        private DatePickerDialog.OnDateSetListener mToDateSetListener =
            new DatePickerDialog.OnDateSetListener() {

                public void onDateSet(DatePicker view, int year, 
                                      int monthOfYear, int dayOfMonth) {
                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay(mEndDateDisplay);

                }
            };
        @Override
        protected Dialog onCreateDialog(int id) {
            switch (id) {
            case DATE_DIALOG_END:
                return new DatePickerDialog(this,mToDateSetListener, mYear, mMonth, mDay);
            case DATE_DIALOG_START:
                return new DatePickerDialog(this,mFromDateSetListener,mYear, mMonth, mDay);
            }
            return null;
        } 
```

所以请有人帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T04:00:25.880

我做了完全相同的事情，我正在发布一些代码尝试一下。它应该工作..

```
EditText time_text_1;
time_text_1.setOnTouchListener(new View.OnTouchListener() {

     @Override
     public boolean onTouch(View v, MotionEvent event) {
       if (event.getAction() == MotionEvent.ACTION_UP) {
          //CREATE YOUR DATE PICKER DIALOG HERE.
          }
     return false;
     }
    }); 
```

在您的 xml 文件中为 edittext 声明这些属性。

```
android:clickable="true"
android:cursorVisible="false"
android:editable="false"
android:inputType="none"
android:singleLine="true" 
```

希望它会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:00:08.033

如果您不需要 EditText，为什么不改用 TextView。并更改它的背景，让它看起来像一个 EditText。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:10:59.503

单击 EditBox 时，我尝试导航到另一个屏幕并发现它不会发生。当我点击时，它会弹出一个软键盘。再次按下时，它导航到另一个屏幕。

我有同样的问题，我所做的是使用了一个按钮，但使用了类似于 EditText 的背景。

所以用户会觉得他是一个编辑框，但实际上它是一个按钮。

希望这条信息对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T04:14:01.320

试试这两行代码

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(mStartDate.getWindowToken(), 0); 
```

# google-app-engine - 谷歌应用引擎如何单独上传 config.py 而不是作为 blob 的一部分

> ID：10442474
> 
> 赞同：1
> 
> 时间：2012-05-04T03:53:31.837
> 
> 标签：google-app-engine

为什么我们不能将 config.py 作为单独的实体而不是作为 blob 的一部分上传？

# facebook - 我应该使用 Facebook Graph API 的哪一部分来发布带有自定义操作的内容？

> ID：10442478
> 
> 赞同：3
> 
> 时间：2012-05-04T03:54:15.797
> 
> 标签：facebook, facebook-graph-api

我希望从我的应用程序中将类似的内容发布到以下代码段：

![在此处输入图像描述](../Images/b192f4abec0477420d5d9e3747e8a948.png)

这里最重要的花絮如下：

*   一张照片
*   一条链接
*   文字简介

我不完全确定在 Graph API 的哪个位置进行探索对我来说是有意义的。我希望它出现在批准该操作的人们的新闻源中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T04:37:06.170

图片中的 SocialCam 示例使用 Facebook API 的[Open Graph](https://developers.facebook.com/docs/opengraph/keyconcepts/)部分。Open Graph 允许您为您的应用程序定义自定义[操作](https://developers.facebook.com/docs/opengraph/define-actions/#custom)和自定义[对象](https://developers.facebook.com/docs/opengraph/define-objects/)。这个想法是允许用户表达更具体、更高级的操作，而不是喜欢、评论和分享。在您的示例中，“watch”是 Open Graph 操作，它是[内置的 Action Type](https://developers.facebook.com/docs/opengraph/actions/builtin/)。[Video](https://developers.facebook.com/docs/opengraph/objects/builtin/#video)是 Open Graph 对象，一个[内置的 Object Type](https://developers.facebook.com/docs/opengraph/objects/builtin/)。请注意，此上下文中的“对象”是类型而不是实例。

可以定义您的应用程序自己的操作，例如“评论”并将其链接到自定义对象，例如“动作电影”、“喜剧”等。您还可以为您的操作定义属性，例如评论操作的“评级”。

但是，如果您只需要“照片、链接和文本简介”，则不必使用 Open Graph，但可以使用[Graph API](https://developers.facebook.com/docs/reference/api/)。您可以通过向以下地址发布 POST 来发布视频或图像的链接：

```
graph.facebook.com/USER_ID/feed 
```

带参数

```
message
name (sender's name)
caption
link (your url)
description
picture (url to picture) 
```

其中 USER_ID 是您要发布到的墙的用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T04:05:07.760

我很确定他们已经建立了一个 facebook 应用程序并定义了一个名为“watch”的[动作](https://developers.facebook.com/docs/opengraph/define-actions/)和一个名为“video”的[对象。](https://developers.facebook.com/docs/opengraph/define-objects/)然后他们通过在 facebook 的 graph api 上发帖来[发布](https://developers.facebook.com/docs/opengraph/actions/)它。

在您设置开发者帐户并[创建应用程序后，Facebook 会在管理菜单中向您介绍一些基础知识](https://developers.facebook.com/apps/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T13:41:23.620

逐个浏览链接，并从官方来源获得分步指南。你将能够实现你的目标。

1.  [https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)
2.  [https://developers.facebook.com/docs/customopengraph/walkthrough/](https://developers.facebook.com/docs/customopengraph/walkthrough/)
3.  [http://developers.facebook.com/docs/opengraph/objects/](http://developers.facebook.com/docs/opengraph/objects/)

# graph - Graphviz splines=false has no effect on undirected graph with bi-directional a -- b/b -- a edges

> ID：10442480
> 
> 赞同：1
> 
> 时间：2012-05-04T03:55:10.400
> 
> 标签：graph, graphviz, splines

I am drawing an undirected graph with Graphviz that has redundant edges, (e.g. A -- B and B -- A). I would like to see only one line between the two vertices, regardless of whether there is a redundant reverse edge in the data. My question is, is there a way to do this with Graphviz, without having to use some other tool/code first to remove the redundant edges? I have tried `graph [splines=false];` without any success. Below is a minimal example:

```
graph G {
    graph [splines=false];
    node [shape=point];
    a -- b;
    b -- a;
} 
```

And the output:

![enter image description here](../Images/068016721173dd828cfc58c427615f59.png)

What I *want* as output is:

![enter image description here](../Images/1e0628e60b68ef571191589893b7b82b.png)

despite the redundant edges that may exist in the specified graph.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:30:26.593

You may try setting [`nodesep`](http://www.graphviz.org/content/attrs#dnodesep) to 0 :

> ... this **affects the spacing between** loops on a single node, or **multiedges** between a pair of nodes.

Not sure if nodesep is completely set to 0, because in the documentation the minimum value indicated is 0.02\. A quick test seems to be ok, though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:07:41.320

Try "strict graph G { ... }"

A strict graph or digraph disallows parallel edges.

Stephen North north@graphviz.org

# c# - MVC 密码格式：哈希，无需键入用户名/密码即可验证用户

> ID：10442486
> 
> 赞同：3
> 
> 时间：2012-05-04T03:56:21.230
> 
> 标签：c#, facebook, model-view-controller, hash, membership

我正在开发一个 MVC C# 模块，它的用户创建密码格式设置为哈希。现在，除了普通登录之外，我还有一个 Facebook 登录模块。如果用户名相同，此 Facebook 登录将与正常登录合并。

我的问题是，当我合并 Facebook 登录时，这两个帐户将共享相同的密码。我可以获取返回用户名和密码的用户，并使用 Membership.ValidateUser 进行验证。但由于密码是散列的，我无法为 Facebook 登录验证它。我需要先解密它，还是有其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:54:55.170

您实际上根本不需要担心密码。您可以只获取与 facebook 帐户关联的用户，然后手动验证该用户

```
var userName= YourRepository.GetUsernameByFacebookId(returnedFacebookId);
FormsAuthentication.SetAuthCookie(userName); 
```

# jsf - 将 Maven Glassfish v2.1 迁移到 GlassFish v3.1 和框架是没有 Facelets 的 Jsf1.2

> ID：10442493
> 
> 赞同：0
> 
> 时间：2012-05-04T03:57:12.390
> 
> 标签：jsf, maven, glassfish

我们正在使用基于 Maven 的 EE 应用程序（EAR）。应用服务器为：Galssfish V2.1，IDE为：Netbeans7.0，框架为JSF1.2。所以我们正在尝试从 glassfish v2.1 迁移到 glassfish v3.1。我已经完成了类似在 web.xml 中添加的更改

```
<context-param>
    <param-name>javax.faces.DISABLE_FACELET_JSF_VIEWHANDLER</param-name>
    <param-value>false</param-value>
</context-param> 
```

并在 faces-config.xml 中的 application 标记中定义 viewHadler，例如

```
<view-handler>org.ajax4jsf.application.AjaxViewHandler</view-handler> 
```

完成这些修改后，我遇到了两个问题：

1.  部署应用程序时未创建资源。
2.  为此，我手动创建了资源。所以应用程序已部署，但我可以看到唯一的错误页面。在服务器日志中，我发现了异常详细信息，例如：

    ```
    INFO: 13:28:47,418 ERROR BaseXMLFilter:227 - Exception in the filter chain
     javax.servlet.ServletException
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:422)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
    at   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:530)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
    at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at com.converis.web.servlet.WritePageContentToFileFilter.doFilter(WritePageContentToFileFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
    Caused by: java.lang.NullPointerException
    at com.ocpsoft.pretty.PrettyContext.isPrettyRequest(PrettyContext.java:184)
    at com.ocpsoft.pretty.application.PrettyViewHandler.getActionURL(PrettyViewHandler.java:64)
    at org.ajax4jsf.application.ViewHandlerWrapper.getActionURL(ViewHandlerWrapper.java:86)
    at com.sun.faces.renderkit.html_basic.FormRenderer.getActionStr(FormRenderer.java:232)
    at com.sun.faces.renderkit.html_basic.FormRenderer.encodeBegin(FormRenderer.java:135)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1754)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at com.sun.faces.application.view.JspViewHandlingStrategy.doRenderView(JspViewHandlingStrategy.java:432)
    at com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:233)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.ocpsoft.pretty.application.PrettyViewHandler.renderView(PrettyViewHandler.java:83)
    at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
    at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:410)
    ... 39 more

    WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
    java.lang.NullPointerException
    at com.ocpsoft.pretty.PrettyContext.isPrettyRequest(PrettyContext.java:184)
    at com.ocpsoft.pretty.application.PrettyViewHandler.getActionURL(PrettyViewHandler.java:64)
    at org.ajax4jsf.application.ViewHandlerWrapper.getActionURL(ViewHandlerWrapper.java:86)
    at com.sun.faces.renderkit.html_basic.FormRenderer.getActionStr(FormRenderer.java:232)
    at com.sun.faces.renderkit.html_basic.FormRenderer.encodeBegin(FormRenderer.java:135)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1754)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at com.sun.faces.application.view.JspViewHandlingStrategy.doRenderView(JspViewHandlingStrategy.java:432)
    at com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:233)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.ocpsoft.pretty.application.PrettyViewHandler.renderView(PrettyViewHandler.java:83)
    at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
    at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:410)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:530)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
    at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at com.converis.web.servlet.WritePageContentToFileFilter.doFilter(WritePageContentToFileFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662) 
    ```

有人可以提出一些建议来解决这些问题吗？

# android - 安卓 FTP 下载

> ID：10442494
> 
> 赞同：1
> 
> 时间：2012-05-04T03:57:43.870
> 
> 标签：android, apache, ftp

我正在使用以下代码段将文件下载到 Android 手机的 SD 卡。在 Wireshark 跟踪中，我看到文件已传输并且 FTP 传输完成消息也是如此。但 SD 卡中的文件大小为零。所有必需的权限都在清单文件中设置。有人可以帮忙吗？也不适用于 FileOutputStream。

```
 try{
       ftpClient.connect(InetAddress.getByName("xxx.xxx.xxx.xxx"));        
       ftpClient.login("xxxx", "xxxxx");
       ftpClient.changeWorkingDirectory("xxxx");
       ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
       ftpClient.enterLocalPassiveMode();

       //FileOutputStream desFileStream = new FileOutputStream("/sdcard/test25.txt");
       BufferedOutputStream desFileStream = new BufferedOutputStream(new FileOutputStream("/sdcard/test25.txt"),8*1024);

         boolean status=ftpClient.retrieveFile("test.txt", desFileStream);

         if(status){
        Toast toast = Toast.makeText(getApplicationContext(), "Downlaoded", Toast.LENGTH_SHORT);
        toast.show();
         }

       //desFileStream.flush();

       ftpClient.logout();
       ftpClient.disconnect();

       }

       catch (IOException e){
        Toast toast = Toast.makeText(getApplicationContext(), "Error", Toast.LENGTH_SHORT);
        toast.show();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:00:49.537

为什么 .flush() 调用被注释掉了？你试过 .flush()'ing 和 .close()'ing 吗？

根据[文档](http://developer.android.com/reference/java/io/BufferedOutputStream.html)：

> 冲洗（）
> 
> 刷新此流以确保将所有待处理数据写出到目标流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:00:49.763

完成写入后，您需要关闭输出流：

```
BufferedOutputStream desFileStream = new BufferedOutputStream(new FileOutputStream("/sdcard/test25.txt"),8*1024);
boolean status=ftpClient.retrieveFile("test.txt", desFileStream);
desFileStream.close(); 
```

# c++ - 任何用于 c++ 的跨平台视频播放库？

> ID：10442496
> 
> 赞同：3
> 
> 时间：2012-05-04T03:57:54.913
> 
> 标签：c++, qt, video, playback, phonon

我主要使用 Qt 库进行编码，该库足以满足我的需要。但是，我发现如果我想播放视频文件，则没有很好的跨平台视频播放选项。Phonon 模块似乎不适用于我的机器，我不确定主要平台（Windows、OSX、Linux）是否支持它。

他们是否有任何用于简单视频播放的轻量级替代品？只要它可以跨平台播放，我可以将我的视频更改为任何格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:04:32.223

我正在考虑将 libVLC 作为一种选择。有人已经做了一个[包装器](https://github.com/ntadej/vlc-qt)，但它只支持 Windows 和 Linux。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:46:11.140

我发现[Theora 播放库](http://sourceforge.net/projects/libtheoraplayer/)非常有用，并且只依赖于原始的 theora 库。[这](http://code.google.com/p/theora-player/)是我制作的一个简单的 Qt 项目，它封装了播放（仅视频）theora 媒体所需的一切。您只需输入“qmake”就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:13:54.783

根据文档，Phonon 需要第三方库才能正常工作。您是否已将适当的后端安装到您所在的平台？

从[文档](http://qt-project.org/doc/qt-4.8/phonon-overview.html)中：

> **后端**
> 
> 多媒体功能不是由 Phonon 本身实现的，而是由后端实现的——通常也称为引擎。这包括连接、管理和驱动底层硬件或中间技术。对于程序员来说，这意味着媒体节点，例如媒体对象、处理器和接收器，是由后端产生的。此外，它还负责构建图，即连接节点。*Qt 的后端在 Windows 上使用媒体系统 DirectShow（需要 DirectX），在 Mac 上使用 QuickTime，在 Linux 上使用 GStreamer。*不同平台上提供的功能取决于这些底层系统，并且可能会有所不同，例如，在支持的媒体格式方面。
> 
> 后端公开有关底层系统的信息。它可以判断支持哪些媒体格式，例如 AVI、mp3 或 OGG。
> 
> 用户通常可以向底层系统添加对新格式和过滤器的支持，例如，通过安装 DivX codex。因此，我们无法准确概述 Qt 后端可用的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:00:38.107

[QtWebKit 2.2](http://trac.webkit.org/wiki/QtWebKitFeatures22)支持 HTML5 媒体。它应该（至少最终）是相当跨平台的，但可能与 Phonon 有相同的后端问题。但是`Q(Graphics)WebView`带有`<video>`元素的 a 可以实现真正的即玩即忘解决方案。

# javascript - 重定向到 Facebook 上的新页面，就像在 Ruby on Rails 中一样

> ID：10442497
> 
> 赞同：0
> 
> 时间：2012-05-04T03:57:56.983
> 
> 标签：javascript, ruby-on-rails, facebook, iframe, facebook-like

我想要完成的是在用户点击我页面上的 facebook 'like' 按钮时为他们提供一些内容。

这可以将它们重定向到新页面或仅在同一页面上显示新内容，我对此并不太挑剔，我也不在乎它是否不完全安全（如果有人碰巧知道新页面的 url页面并在没有先点击“喜欢”的情况下进入它，这不是世界末日）。

我在 iframe 中使用类似 FB 的按钮。我尝试将整个 iframe 变成一个链接，但是当 iframe 具有那种内容时，这似乎不起作用。我认为适当的解决方案是检查用户是否已经喜欢该页面，如果是，则显示新内容或其他内容。这似乎已经在 php 中解决了，但这对我不起作用。根据我的理解，我相信如果我有一个 ROR 应用程序，那么 php 将无法工作，但 javascript 会？我尝试寻找一个 javascript 来完成此操作，但这似乎对我不起作用。

任何帮助将不胜感激。如果你需要它，iframe：

```
<iframe src="http://www.facebook.com/plugins/like.php?app_id=107070462729449&amp;href=www.fureelmusic.com&amp;send=false&amp;layout=button_count&amp;width=40&amp;show_faces=false&amp;action=recommend&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:21px;" allowTransparency="true"><a href="http://www.facebook.com/fureelmusic" target="blank">inside of the iframe i am inside</a></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:13:42.280

这不能用`IFRAME`Like Button 的版本来完成。

虽然您可以使用[`FB.Event.subscribe`](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)订阅`edge.create`/`edge.remove`事件，但它们只会在 HTML5 和 XFBML 版本的 Like Button 中触发。

[引用 Like Button 文档](http://developers.facebook.com/docs/reference/plugins/like/)：

> 有两种 Like 按钮实现：XFBML 和 Iframe。XFBML（也提供与 HTML5 兼容的标记）版本更加通用，但需要使用 JavaScript SDK。...，使您能够（通过 Javascript 库）侦听类似事件，以便您实时知道用户何时单击“Like”按钮，并且它始终使用户能够向“喜欢”添加可选评论. ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:00:43.103

您需要使用 facebook javascript api，并[订阅“edge.create”事件](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)。完成后，您可以在附加的回调中进行重定向。

# java - Hashset - 在创建 Set 后使对象相同

> ID：10442499
> 
> 赞同：2
> 
> 时间：2012-05-04T03:58:16.377
> 
> 标签：java, collections

如果我们在 HashSet 中添加两个不同的对象（可变），然后通过调用 setter 更改对象的值（使它们相同），则 hashSet 的大小保持为 2

我无法理解相同的原因：

```
public static void main(String[] args) {
        Employee e = new Employee();
        e.setName("Amit");
        Employee e1 = new Employee();
        e1.setName("Jitender");
        Set<Person> hashSet = new HashSet<Person>();
        hashSet.add(e);
        hashSet.add(e1);
        // size of set is >>2
        System.out.println("size of set is >>" + hashSet.size());
        e1.setName("Amit");
        // updated size of set is >>2
        System.out.println("updated size of set is >>" + hashSet.size());
} 
```

员工类是：

```
public class Employee extends Person {

    public Employee() {
    }

    public Employee(String name) {
        this.name = name;
    }

    String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public int hashCode() {
        // TODO Auto-generated method stub
        return name.hashCode();
    }

    @Override
    public boolean equals(Object obj) {
        Employee e = (Employee) obj;
        return this.name.equals(e.name);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:01:26.567

`HashSet`不打算对它包含的对象的变化做出反应。事实上，文档警告不要将可变对象添加到集合中并修改它们。

从[`Set`界面文档](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)：

> 注意：如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。此禁令的一个特殊情况是不允许集合包含自身作为元素。

（另一点是`HashSet`使用成员`equals()`和`hashCode()`方法，这意味着如果您没有为您的 实现这些方法，除非它们是对同一对象的两个引用，否则`Employee`两个`Employee`s 将不相等`Employee`。）在您的编辑中，您表明您实现了那。

在一个实际的“如果我这样做会发生什么？” 请注意，如果您查看（b/ca实现为将您插入的条目映射到虚拟对象的 a）的[源代码，`HashMap`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java)您可以看到大小仅在您添加和删除变量时更新，并且即使重新散列表以增加容量，没有相等性检查，**因此您的重复对象将保留在您刚刚通过做您不应该做的事情而破坏的那个集合中。**`HashSet``HashMap`

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T04:02:39.963

你是如何定义类中的`hashCode()`和`equals()`方法的`Employee`？此外，如果集合中的两个可变对象突然具有相同的哈希值，a 的合同中没有任何内容`HashSet`指定要做什么，您不能假设其中任何一个对象都会自动从集合中删除。

另外，请注意以下文档中的此[注释](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)`Set`：

> 如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。此禁令的一个特殊情况是不允许集合包含自身作为元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:01:26.233

`size()`返回集合中的元素数。由于您不通过调用集合`e1.setName()`的大小来更改集合，因此保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T04:01:38.433

您向集合中添加了 2 个不同的对象。即使它们的值相同，它们也是不同的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T04:04:16.267

它们是使用 Employee.class 的两个不同实例创建的。因此，即使它们具有相同的属性名称值，它们仍然是不同的对象。除非当然 hash 和 equals 在 Employee.class 中被覆盖，以便相等性基于属性名称。**

# php - 谐波平均值计算和浮点精度

> ID：10442501
> 
> 赞同：6
> 
> 时间：2012-05-04T03:59:00.007
> 
> 标签：php, math, floating-point, floating-accuracy, ieee-754

我在 PHP 中实现[毕达哥拉斯平均值](http://en.wikipedia.org/wiki/Pythagorean_means)，算术和几何平均值是小菜一碟，但我很难想出一个可靠的[**调和平均值**](http://en.wikipedia.org/wiki/Harmonic_mean)实现。

这是[WolframAlpha 的定义](http://www.wolframalpha.com/input/?i=harmonic%20mean)：

![WolframAlpha 的谐波平均定义](../Images/7bff24d33c2c13639ac46f9b445bba06.png)

* * *

这是 PHP 中的等效实现：

```
function harmonicMeanV1()
{
    $result = 0;
    $arguments = func_get_args();

    foreach ($arguments as $argument)
    {
        $result += 1 / $argument;
    }

    return func_num_args() / $result;
} 
```

现在，如果任何参数是`0`这将引发除以 0 警告，但由于与***n*** **^(-1)**`1 / n`相同并且优雅地返回常量而不引发任何错误，我可以将其重写为以下内容（如果它仍然会引发错误没有论据，但现在让我们忽略它）：*`pow(0, -1)``INF`*

 *```
function harmonicMeanV2()
{
    $arguments = func_get_args();
    $arguments = array_map('pow', $arguments, array_fill(0, count($arguments), -1));

    return count($arguments) / array_sum($arguments);
} 
```

两种实现在大多数情况下都可以正常工作（例如[v1](http://codepad.org/pi38gWAL)、[v2](http://codepad.org/0kza3RDS)和[WolframAlpha](http://www.wolframalpha.com/input/?i=harmonic%20mean%20%7B40,%2060%7D)），但是如果**1 / n** **[*i*]***系列**的总和* 为 0 ，它们会失败，我应该得到另一个除以 0 的警告，但我不...

 **考虑以下集合：（`-2, 3, 6`WolframAlpha[说它](http://www.wolframalpha.com/input/?i=harmonic%20mean%20%7B-2,%203,%206%7D)是一个复数无穷大）：

```
 1 / -2    // -0.5
+ 1 / 3     // 0.33333333333333333333333333333333
+ 1 / 6     // 0.16666666666666666666666666666667

= 0 
```

但是，我**`-2.7755575615629E-17`的两个实现都返回总和**（[v1](http://codepad.org/RkcCklUo)，[v2](http://codepad.org/ZLdEwU1C)）而不是`0`.

虽然 CodePad 上的返回结果是`-108086391056890000`我的开发机器（32 位）说它是`-1.0808639105689E+17`，但它仍然不像我所期望的`0`那样。`INF`我什至尝试调用[`is_infinite()`](http://php.net/manual/en/function.is-infinite.php)返回值，但它`false`按预期返回。

我还找到了作为 PECL 扩展[`stats_harmonic_mean()`](http://php.net/manual/en/function.stats-harmonic-mean.php)的一部分的函数`stats`，但令我惊讶的是，我得到了完全相同的错误结果：`-1.0808639105689E+17`如果有任何参数是`0`，`0`则返回但不检查系列的**总和**，[如您所见在**第 3585 行**](http://svn.php.net/viewvc/pecl/stats/trunk/php_stats.c?revision=313529&view=markup)：

```
3557    /* {{{ proto float stats_harmonic_mean(array a)
3558       Returns the harmonic mean of an array of values */
3559    PHP_FUNCTION(stats_harmonic_mean)
3560    {
3561        zval *arr;
3562        double sum = 0.0;
3563        zval **entry;
3564        HashPosition pos;
3565        int elements_num;
3566    
3567        if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "a",  &arr) == FAILURE) {
3568            return;
3569        }
3570        if ((elements_num = zend_hash_num_elements(Z_ARRVAL_P(arr))) == 0) {
3571            php_error_docref(NULL TSRMLS_CC, E_WARNING, "The array has zero elements");
3572            RETURN_FALSE;
3573        }
3574    
3575        zend_hash_internal_pointer_reset_ex(Z_ARRVAL_P(arr), &pos);
3576        while (zend_hash_get_current_data_ex(Z_ARRVAL_P(arr), (void **)&entry, &pos) == SUCCESS) {
3577            convert_to_double_ex(entry);
3578            if (Z_DVAL_PP(entry) == 0) {
3579                RETURN_LONG(0);
3580            }
3581            sum += 1 / Z_DVAL_PP(entry);
3582            zend_hash_move_forward_ex(Z_ARRVAL_P(arr), &pos);   
3583        }
3584    
3585        RETURN_DOUBLE(elements_num / sum);
3586    }
3587    /* }}} */ 
```

这看起来像一个典型的浮动精度错误，但我无法真正理解原因，因为单个计算非常精确：

```
Array
(
    [0] => -0.5
    [1] => 0.33333333333333
    [2] => 0.16666666666667
) 
```

`gmp`是否可以在不恢复到/`bcmath`扩展名的情况下解决此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:30:37.083

你是对的。您找到的数字是浮点运算特性的产物。

增加更多的精度不会帮助你。你所做的只是移动球门柱。

底线是计算是以*有限的精度*完成的。这意味着在某些时候，中间结果将被四舍五入。然后，该中间结果不再准确。错误通过计算传播，并最终成为您的最终结果。当精确结果为零时，您通常会得到 1e-16 左右的双精度数字结果。

每当您的计算涉及分母不是 2 的幂的分数时，都会发生这种情况。

解决它的唯一方法是用整数或有理数（如果可以的话）表示计算，并使用任意精度整数包进行计算。这就是 Wolfram|Alpha 所做的。

请注意，几何平均值的计算也不是微不足道的。尝试 20 次 1e20 的序列。由于数字都相同，结果应该是 1e20。但你会发现结果是无限的。原因是这 20 个数字的乘积 (10e400) 超出了双精度浮点数的范围，因此设置为无穷大。无穷大的第 20 个根仍然是无穷大。

最后，一个元观察：毕达哥拉斯的意思是真的只对正数有意义。3 和 -3 的几何平均值是多少？是想象的吗？？您链接到的维基百科页面上的不等式链只有在所有值都是正数时才有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T04:22:18.140

是的，这是浮点精度的问题。-1/2 可以精确表示，但 1/3 和 1/6 不能。因此，当您将它们相加时，您不会得到零。

您可以使用您提到的使用公分母方法（您发布的 H2 和 H3 公式），但这只是将罐子踢了一点，一旦产品总和，您仍然会得到不准确的结果学期开始四舍五入。

无论如何，您为什么要采用可能为负数的数字的调和平均值？这是一个固有的不稳定计算（H(-2,3,6+epsilon) 对于非常小的 epsilon 变化很大）。***

# objective-c - 从Objective-C中的字符串中保存子字符串

> ID：10442502
> 
> 赞同：0
> 
> 时间：2012-05-04T03:59:07.713
> 
> 标签：objective-c, cocoa, nsstring, stringwithformat

我有一个字符串，例如：`funcname("data")`，来自楼上。现在我想将 funcname、数据保存在两个 NSString 变量中，即我需要找到介于两者之间`""`的字符串和之前的字符串`'('`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:09:10.857

有一个非常有用的类 NSScanner 可以帮助您轻松解析不同的标记。

# web-services - 从 jQuery Ajax 调用返回时出错

> ID：10442504
> 
> 赞同：0
> 
> 时间：2012-05-04T03:59:36.863
> 
> 标签：web-services, jquery

我的网络服务中有这个；

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{
    [WebMethod]
    public string HelloWorld()
    {
        return "Hello Worlds";
    }
} 
```

这是我的jQuery；

```
 $(document).ready(function () {
        $.support.cors = true;

        $.ajax({
            type: "POST",
            url: "http://localhost:61614/Service1.asmx/HelloWorld",
            data: "{}",
            dataType: "json",
            success: function (msg) {
                alert(0);
                alert(msg);
            }, error: function (a,b,c) { alert(c); }
        });
    }); 
```

当我运行时，我在 Web 服务中的断点触发并返回“Hello Worlds”。

但是，在返回 jQuery 时，我会进入错误函数。Safari 只会提示一个空字符串，而 IE 会提示“无传输”。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:29:28.713

您还需要添加`ScriptMethod`属性：

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
[WebMethod]
public string HelloWorld()
{
    return "Hello Worlds";
} 
```

此外，您需要在 ajax 调用中指定 contentType：

```
$.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "http://localhost:61614/Service1.asmx/HelloWorld",
            data: "{}",
            dataType: "json",
            ... 
```

另外，关于该主题的一篇好文章：[这里](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)。

# jquery - jQuery AJAX 调用数据库工作，但不是按顺序

> ID：10442506
> 
> 赞同：1
> 
> 时间：2012-05-04T03:59:38.907
> 
> 标签：jquery, ajax, database, function, refresh

这可能是我代码中其他地方的问题，但我希望这里有线索。

我正在使用 jQuery AJAX 调用来更新我的 MySQL 数据库，然后使用另一个来读取数据库并更新我页面上的表。我的问题是我正确更新了数据库，但是我的第二个 AJAX 调用（包装在一个函数中）正在返回旧数据。但是，如果我再次触发该功能，它会完美运行。

这是第一个 AJAX 调用：

```
$.ajax ({
cache: false,                   
type:   'POST',     
url:    'qry_creats_record.php',
data:   {   
        equipID : $('#equip_id').val(),
        dateSent : $('#txt_to_repair').val(),
        organization : $('#organization').val(),
        success: function() {
        ServiceTable($('#equip_id').val());   <--CALLS SECOND FUNCTION                  
        }
    }           
}); 
```

效果很好，完美更新数据库。然后我想用这个函数更新页面（在我第一次调用的“成功”部分调用）：

```
function ServiceTable(equipID) {
  var serviceRecords = $.ajax ({
  cache: false,                 
  type: 'POST',
  url: 'qry_show_repairs_table.php',
  async: false,
  data: {  equip_id : equipID   
        },
    success: function() {
      return data;
    }
}).responseText;
$('#serviceRecordsTable').html(serviceRecords);     
} 
```

第二个函数也很好用，如果我从按钮调用它，它会更新页面元素“serviceRecordsTable”。但是当我从第一次调用的“成功”部分调用它时，它会返回旧的、未更新的数据。我在我的第二个函数中放置了一个“警报”框以查看发生了什么，它确认该函数确实看到了来自我的数据库的旧的、预先更新的数据。但是，如果我从页面上的按钮激活第二个功能，第二个功能会使用新数据刷新我的页面。

真的卡住了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:06:26.330

试试这样 -

```
$.ajax ({
cache: false,                   
type:   'POST', 
url:    'qry_creats_record.php',
data:   {   
      equipID : $('#equip_id').val(),
     dateSent : $('#txt_to_repair').val(),
     organization : $('#organization').val(),

 },
  success: function(result) {
    if(result=='success') {
    ServiceTable($('#equip_id').val());   <--CALLS SECOND FUNCTION  
   }                
    }          
}); 
```

从“qry_creats_record.php”返回字符串“成功”。

# windows-phone-7 - 在 BackgroundTransferService 传输请求上实现超时 - Windows Phone

> ID：10442507
> 
> 赞同：0
> 
> 时间：2012-05-04T03:59:44.937
> 
> 标签：windows-phone-7

我正在使用 BackgroundTransferService 从 Internet 下载文件。

伪代码是这样的：

```
BackgroundTransferRequest transferRequest = new BackgroundTransferRequest(transferUri);
transferRequest.Method = "GET";
transferRequest.Tag = "myTag";
transferRequest.TransferPreferences = TransferPreferences.AllowCellularAndBattery;
BackgroundTransferService.Add(transferRequest); 
```

在此之后，我添加了一个事件处理程序来处理完成时的传输。我只使用 TransferStatusChanged 事件处理程序，而不是 TransferProgressChanged

```
transferRequests = BackgroundTransferService.Requests;
transferRequests.Last().TransferStatusChanged += new EventHandler<BackgroundTransferEventArgs>(transfer_TransferStatusChanged); 
```

在 transfer_TransferStatusChanged() 下，我对下载的文件做任何我想做的事情，或者处理失败的情况（404 等）。

问题是如果服务器没有 404 响应（例如，当没有这样的服务器时，例如 www.googlea.com/myfilename），我的下载会无限期地继续。我想为这种情况实施超时..我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:13:20.743

没有对这种情况的内置支持。您必须自己建立超时支持。

传输大文件时要小心，因为传输可能会在很长一段时间内分批完成，具体取决于连接性和电池电量。

当然，您可能希望在发出传输请求之前添加一个文件是否存在的检查，如果您对服务器有任何控制权，您应该确保也发送了正确的响应。

# javascript - 如何使用javascript删除和撤消删除gridview行？

> ID：10442508
> 
> 赞同：1
> 
> 时间：2012-05-04T03:59:48.763
> 
> 标签：javascript, jquery, asp.net, gridview

我有一个gridview，单击删除按钮时，我需要删除该行一段时间，单击撤消链接时，我需要重新显示该行。

我的gridview代码如下所示：

```
 <asp:GridView ID="NotificationHistory" runat="server" AllowPaging="True"
        AutoGenerateColumns="False" DataKeyNames="Id" 
        ShowHeader="False" PagerSettings-Mode="NumericFirstLast"
        FooterStyle-BorderStyle="None" EnableViewState="False" GridLines="None" >
        <PagerSettings Mode="NumericFirstLast"></PagerSettings>
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <img alt="Delete" title="Delete" src="SiteImages/X.gif" 
                        onclick="changeImage(this)" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Name">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("ItemName") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("ItemName") %>'></asp:Label>
                </ItemTemplate>

            </asp:TemplateField>
            <asp:TemplateField HeaderText="Status">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Status") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("Status") %>'></asp:Label>
                </ItemTemplate>
                <ItemStyle BorderColor="#F1E8E8" BorderStyle="Solid" BorderWidth="1px" CssClass="gridItemAlignment" />
            </asp:TemplateField>
            <asp:BoundField DataField="Id" HeaderText="ID" Visible="false" />
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:ImageButton ID="ImgDelete" runat="server" Width="16px" Height="16px" CommandName="Remove"
                        ImageUrl="SiteImages/X.gif" ClientIDMode="Static" Enabled="false" />
                    <asp:HiddenField ID="hFType" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
        <HeaderStyle Height="10px" BorderColor="Silver" BorderStyle="None" BorderWidth="0" />
        <FooterStyle BorderStyle="None"></FooterStyle>
        <PagerStyle HorizontalAlign="Right" BorderStyle="None" ForeColor="#999999"></PagerStyle>
        <EmptyDataTemplate>
            <asp:Label ID="lblHistory" runat="server">No History.</asp:Label>
        </EmptyDataTemplate>
    </asp:GridView> 
```

我的 html ：

```
<table id="ctl00_Content_NotificationHistory" class="home-history-grid" cellspacing="0" border="0" style="border-color: rgb(241, 232, 232); border-style: none; width: 100%; border-collapse: collapse;">
<tbody>
<tr class="home-history-grid-row">
<td>
<img height="16px" width="16px" onclick="changeImage(this)" src="SiteImages/X.gif" title="Delete" alt="Delete">
</td>
<td class="gridItemStyle" style="border: 1px solid rgb(241, 232, 232); width: 75%;">
<a href="ReportCreation.aspx?rid=207">Status Report for Kalista as on 05/03/2012</a>
</td>
<td class="gridItemAlignment" style="border: 1px solid rgb(241, 232, 232);">Saved</td>
<td>
<img id="ImgDelete" height="16px" width="16px" onclick="deleteRow(this)" src="SiteImages/X.gif" alt="">
<input id="ctl00_Content_NotificationHistory_ctl02_hFType" type="hidden" value="Cirrus.CirrusObjects.Report" name="ctl00$Content$NotificationHistory$ctl02$hFType">
</td>
</tr>
<tr class="home-history-grid-row">
<td>
</td>
<td class="gridItemStyle" style="border: 1px solid rgb(241, 232, 232); width: 75%;">
</td>
<td class="gridItemAlignment" style="border: 1px solid rgb(241, 232, 232);">Saved</td>
<td>
</td>
</tr>
</tbody>
</table> 
```

我的javascript删除行（这是删除选定的行，现在我想知道如何在同一个地方重新显示它）：

```
 function deleteRow(imageElement) {
            var img = $(imageElement);
            imageElement.setAttribute("id", "selectedRow");
            alert($("selectedRow").siblings(":image"));
            var row = $(imageElement).closest('tr');
            $(row).remove();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:30:15.107

这将显示/隐藏该行

```
$(row).toggle(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:25:05.580

将此 $(row).remove() 更改为

`$(row).hide();`它会被隐藏，当你想再次显示它时 `$(row).show();`

甚至这会更光滑

`$(row).toggle();`（在幕后它将设置 display='none' 隐藏）

# ruby-on-rails - 使用设计的 Rails 两步注册 - 错误

> ID：10442510
> 
> 赞同：0
> 
> 时间：2012-05-04T03:59:55.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, devise, user-registration

我正在尝试使用 Rails 中的 Devise 设置两步注册流程，并遵循[Claudio Marai 的本教程](http://blog.devinterface.com/2011/05/two-step-signup-with-devise/)。当我在表单中输入电子邮件地址时（第一步），我收到一条错误消息，告诉我存在路由错误并且找不到`RegistrationsController`

```
Started POST "/users" for 127.0.0.1 at 2012-05-03 22:50:59 -0400

ActionController::RoutingError (uninitialized constant RegistrationsController):
  activesupport (3.2.1) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.1) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.1) lib/active_support/inflector/methods.rb:228:in `constantize'
  .
  .
  . 
```

我认为这是由于[本教程](http://blog.devinterface.com/2011/05/two-step-signup-with-devise/)第一步中描述的`:registrations => "registrations"`我的存在。然后我尝试了两种替代方法，它们都导致了相同的错误。首先，我从. 当这不起作用时，我重新插入该行并将 a 添加到如下所示的目录中：`routes.rb file``:registrations => "registrations"``routes.rb file``registrations_controller.rb``controllers`

```
class RegistrationsController < Devise::RegistrationsController
end 
```

我认为这两个选项会产生相同的效果 - 但是 - 我还是尝试了它们。

我得到的错误如下：

```
Started POST "/users" for 127.0.0.1 at 2012-05-03 22:47:29 -0400
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"?", "authenticity_token"=>"ttPBRPRLVzPBHcDDKRJbimv0Yp/egdK5qBkIvBTL4Ig=", "user"=>{"email"=>"test@email.com"}, "x"=>"0", "y"=>"0"}
   (0.6ms)  begin transaction
  User Exists (1.5ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'test@email.com' LIMIT 1
  CACHE (0.0ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'test@email.com' LIMIT 1
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = '8tA1jakpAXNK4Piz7J6R' LIMIT 1
  SQL (14.0ms)  INSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "confirmed_at", "created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "fb_id", "fb_token", "first_name", "last_name", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["confirmation_sent_at", Thu, 03 May 2012 22:47:30 EDT -04:00], ["confirmation_token", "8tA1jakpAXNK4Piz7J6R"], ["confirmed_at", nil], ["created_at", Thu, 03 May 2012 22:47:30 EDT -04:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@email.com"], ["encrypted_password", nil], ["fb_id", nil], ["fb_token", nil], ["first_name", nil], ["last_name", nil], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["state", nil], ["updated_at", Thu, 03 May 2012 22:47:30 EDT -04:00]]
SQLite3::ConstraintException: constraint failed: INSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "confirmed_at", "created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "fb_id", "fb_token", "first_name", "last_name", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
   (0.3ms)  rollback transaction
Completed 500 Internal Server Error in 441ms

ActiveRecord::StatementInvalid (SQLite3::ConstraintException: constraint failed: INSERT INTO "users" ("confirmation_sent_at", "confirmation_token", "confirmed_at", "created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "fb_id", "fb_token", "first_name", "last_name", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)):
  sqlite3 (1.3.5) lib/sqlite3/statement.rb:108:in `step'
  sqlite3 (1.3.5) lib/sqlite3/statement.rb:108:in `block in each'
  sqlite3 (1.3.5) lib/sqlite3/statement.rb:107:in `loop'
  sqlite3 (1.3.5) lib/sqlite3/statement.rb:107:in `each'
  .
  .
  . 
```

上面的错误让我很困惑！

使用相同的表单，当我添加`password`和`password_confirmation`字段时，事情会顺利进行 - 创建用户帐户，并通过确认链接向用户发送确认电子邮件。

我将不胜感激有关此的任何帮助-谢谢！我正在使用`Ruby 1.9.3-p125`和`Rails 3.2.1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T04:07:19.040

问题不是由于 Rails 验证，而是由于违反了数据库约束。

很可能，如果您的用户表迁移是由设计生成的，那么架构包括以下内容：

```
"encrypted_password" varchar(128) DEFAULT '' NOT NULL 
```

导致 ConstraintException 的 SQL 包括以下内容（为便于阅读而省略）：

```
SQL (14.0ms)  INSERT INTO "users" (..., "encrypted_password", ...) VALUES (..., ?, ...)  [..., ["encrypted_password", nil], ...] 
```

所以，有些东西告诉你的数据库适配器设置`encrypted_password = nil`.

您应该能够规避它，或者运行一个删除 上的 NOT NULL 约束的迁移`encrypted_password`，或者按照您所做的那样，传入一个`encrypted_password`，但只需确保它在第一步中为空，但在第二步中存在.

# jquery - 如何使用 jQuery 用跨度包装部分文本？

> ID：10442513
> 
> 赞同：5
> 
> 时间：2012-05-04T04:00:16.387
> 
> 标签：jquery, dom, word-wrap, dom-traversal

这是我想要做的

```
Fox<span>Rox</span> 
```

在那之前

```
FoxRox 
```

我如何环绕跨度`Rox`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T04:07:55.780

这将搜索您整个 DOM 并将每个替换`Rox`为`<span>Rox</span>`：

```
$(':contains("Rox")').html(function(index, oldHTML) {
    return oldHTML.replace(/(Rox)/g, '<span>$&</span>');
});​ 
```

[**现场演示**](http://jsfiddle.net/gdoron/FFBnj/3)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T04:02:25.190

在这种情况下，您可以使用 JavaScript`replace()`方法：

```
'FoxRox'.replace(/(Rox)/, '<span>$1</span>'); 
```

要通过文档全部替换，您可以尝试以下操作：

```
$(":contains('Rox')").html(function(i,o){
  return o.replace(/(Rox)/g, '<span>$1</span>');
});​ 
```

请注意，如果您的术语不是“Rox”，则需要在上述脚本中进行更改。

# asp.net - ASP.NET 中的语言翻译

> ID：10442520
> 
> 赞同：0
> 
> 时间：2012-05-04T04:00:58.200
> 
> 标签：asp.net

我在 ASP.NET 中有一个网站，将在全球范围内使用。需要在主页上提供语言翻译选项，用户可以在其中选择一种语言，并且页面将以该语言呈现。我听说过谷歌翻译服务，但不知道如何使用它们。任何人都可以提供一些可以指导我的链接/建议吗？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:03:54.500

按照[这里的说明](http://translate.google.com/translate_tools)，你会很高兴，但基本上，你需要做的就是包含以下代码：

```
<div id="google_translate_element"></div><script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en'
  }, 'google_translate_element');
}
</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

进入您希望允许用户能够翻译的每个页面。

# .net - 我如何以简单的方式做到这一点？

> ID：10442521
> 
> 赞同：1
> 
> 时间：2012-05-04T04:00:58.690
> 
> 标签：.net, vb.net, list, dictionary

如果我在 a 中有 3 列，其中`DataTable`包含以下数据：

```
1 A qwqw
2 A wewe
3 B tyty
4 B trtr
5 C iuiu 
```

我可以将上述数据放入这样的最简单有效的方法是什么`Dictionary(Of String, List(Of Foo))`：

```
[A] -> {New Foo(1, A, qwqw), New Foo(2, A, wewe)}
[B] -> {New Foo(3, B, tyty), New Foo(4, B, trtr)}
[C] -> {New Foo(5, C, iuiu)} 
```

where`Foo`是一种类型，其成员表示表中的字段。我所做的是编写一个查询（LINQ）来首先获取`List(Of String)`. 然后迭代此列表以对列表中的每个元素触发另一个查询，以获取列表中的相应行，从中创建 Foo 的对象并将其放入列表中，然后将其添加到 my `Dictionary`as 值中，键为元素. 有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:08:48.557

这是一个 C# 答案：

```
myDataTable.Rows.GroupBy(r => r[1]).ToDictionary(
    g => g.Key
,   g => g.Select(rr => new Foo(rr[0], rr[1], rr[2])).ToList()
); 
```

这个想法是首先按中间列（＃1）分组，然后将组转换为字典，使用组键作为字典键，并`Foo`从组中的每一行创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:41:31.947

感谢 dasblinkenlight，我设法将他的 C# 构造转换为 VB.NET：

```
Dim r as Dictionary(Of String, List(Of String)) = New Dictionary(Of String, List(Of String))
r = myDataTable.AsEnumerable.GroupBy(Function(x) x(1).ToString()).ToDictionary(Function(g) g.Key, Function(g) g.Select(Function(rr) New Foo(rr.Field(Of String)(0), rr.Field(Of String)(1), rr.Field(Of String)(2)).ToList()) 
```

它工作完美。

# c# - 如何获取桌面应用程序的纬度和经度？

> ID：10442529
> 
> 赞同：-5
> 
> 时间：2012-05-04T04:01:43.843
> 
> 标签：c#, .net

我可以在 Windows 7 桌面应用程序上获取纬度和经度吗？

通常它可以在使用 GPS、3G 或 WiFi 的手机或平板电脑上运行。

但是我如何使用 c# 获得坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:32:36.153

标准 GPS 设备（内部或外部）在串行端口上发送数据。[从串口](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)接收任何数据非常容易。请[检查此链接](http://www.dreamincode.net/forums/topic/35775-serial-port-communication-in-c#/)。

```
 //define serial port
    SerialPort serialPort1 = new SerialPort();

    //configuring the serial port
    serialPort1.PortName="COM1";
    serialPort1.BaudRate=9600;
    serialPort1.DataBits=8;
    serialPort1.Parity=Parity.None;
    serialPort1.StopBits= StopBits.One;

   //read data from serial port
   string data = serialPort1.ReadExisting(); 
```

GPS 数据由[NMEA](http://www.gpsinformation.org/dale/nmea.htm)协议组成。数据本身只是 ascii 文本，可以扩展到多个句子，例如

*   GGA
*   总务署
*   GSV
*   RMC

[以下来自维基百科](http://en.wikipedia.org/wiki/NMEA)的示例数据。

```
$GPGGA,092750.000,5321.6802,N,00630.3372,W,1,8,1.03,61.7,M,55.2,M,,*76
$GPGSA,A,3,10,07,05,02,29,04,08,13,,,,,1.72,1.03,1.38*0A
$GPGSV,3,1,11,10,63,137,17,07,61,098,15,05,59,290,20,08,54,157,30*70
$GPGSV,3,2,11,02,39,223,19,13,28,070,17,26,23,252,,04,14,186,14*79
$GPGSV,3,3,11,29,09,301,24,16,09,020,,36,,,*76
$GPRMC,092750.000,A,5321.6802,N,00630.3372,W,0.02,31.66,280511,,,A*43 
```

可用于位置数据（纬度/经度）的适当字符串是 RMC。

```
$GPRMC,092750.000,A,5321.6802,N,00630.3372,W,0.02,31.66,280511,,,A*43 
```

它的信息在[这里描述](http://aprs.gids.nl/nmea/#gga)

```
$GPRMC,225446,A,4916.45,N,12311.12,W,000.5,054.7,191194,020.3,E*68

       225446       Time of fix 22:54:46 UTC
       A            Navigation receiver warning A = OK, V = warning
       4916.45,N    Latitude 49 deg. 16.45 min North
       12311.12,W   Longitude 123 deg. 11.12 min West
       000.5        Speed over ground, Knots
       054.7        Course Made Good, True
       191194       Date of fix  19 November 1994
       020.3,E      Magnetic variation 20.3 deg East
       *68          mandatory checksum 
```

对于完整的 GPS 数据解析，您可以[查看此链接](http://www.codeproject.com/Articles/9115/Writing-Your-Own-GPS-Applications-Part-2)。希望它会有所帮助。

# php - PHP：使用 Curl 验证 URL

> ID：10442531
> 
> 赞同：1
> 
> 时间：2012-05-04T04:01:52.970
> 
> 标签：php, curl

```
 $fileSource = "http://google.com";
    $ch = curl_init($fileSource);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_exec($ch);
    $retcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

    if ($retcode != 200) {
        $error .= "The source specified is not a valid URL.";
    }
    curl_close($ch); 
```

这是我的问题。当我使用上述并设置`$fileSource = "http://google.com";`它不起作用，而如果我将它设置为`$fileSource = "http://www.google.com/";`它工作。

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:07:44.137

One permanently redirects (301) to the `www.` domain, while the other one just replies OK (200).

Why are you only considering only the 200 status code as valid? Let CURL handle that for you:

```
curl_setopt($ch, CURLOPT_FAILONERROR, true); 
```

From the [manual](http://php.net/manual/en/function.curl-setopt.php):

> TRUE to fail silently if the HTTP code returned is greater than or equal to 400\. The default behavior is to return the page normally, ignoring the code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:04:43.327

尝试明确告诉 curl 遵循重定向

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false); 
```

如果这不起作用，您可能需要在某些站点上欺骗用户代理。

此外，如果他们使用 JS 重定向你运气不好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:06:07.607

您所看到的实际上是 301 重定向的结果。这是我从命令行使用详细 curl 得到的结果

```
curl -vvvvvv http://google.com
* About to connect() to google.com port 80 (#0)
*   Trying 173.194.43.34...
* connected
* Connected to google.com (173.194.43.34) port 80 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.25.0 (x86_64-apple-darwin11.3.0) libcurl/7.25.0 OpenSSL/1.0.1b zlib/1.2.6 libidn/1.22
> Host: google.com
> Accept: */*
> 
< HTTP/1.1 301 Moved Permanently
< Location: http://www.google.com/
< Content-Type: text/html; charset=UTF-8
< Date: Fri, 04 May 2012 04:03:59 GMT
< Expires: Sun, 03 Jun 2012 04:03:59 GMT
< Cache-Control: public, max-age=2592000
< Server: gws
< Content-Length: 219
< X-XSS-Protection: 1; mode=block
< X-Frame-Options: SAMEORIGIN
< 
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="http://www.google.com/">here</A>.
</BODY></HTML>
* Connection #0 to host google.com left intact
* Closing connection #0 
```

但是，如果您在 301 重定向中建议的实际 www.google.com 上执行 curl，您将获得以下信息。

```
curl -vvvvvv http://www.google.com
* About to connect() to www.google.com port 80 (#0)
*   Trying 74.125.228.19...
* connected
* Connected to www.google.com (74.125.228.19) port 80 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.25.0 (x86_64-apple-darwin11.3.0) libcurl/7.25.0 OpenSSL/1.0.1b zlib/1.2.6 libidn/1.22
> Host: www.google.com
> Accept: */*
> 
< HTTP/1.1 200 OK
< Date: Fri, 04 May 2012 04:05:25 GMT
< Expires: -1
< Cache-Control: private, max-age=0
< Content-Type: text/html; charset=ISO-8859-1 
```

我截断了谷歌响应的其余部分，只是为了显示 200 OK 与 301 REDIRECT 的主要区别

# android - 可以将电子邮件 ID 用作 Android 应用中的用户名吗

> ID：10442535
> 
> 赞同：0
> 
> 时间：2012-05-04T04:02:26.280
> 
> 标签：android

我知道以前有人问过这种问题，但这里有一个转折点。此用户名适用于 Android 游戏。这将在 Facebook 应用程序上显示前 100 名玩家用户名。是否可以在 Facebook 应用程序上显示每月前 100 名用户的电子邮件 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:06:27.667

在公共论坛上显示电子邮件 ID 会导致您出现法律问题，因为您会侵犯用户隐私。您的用户最终会收到大量垃圾邮件:)

相反，您应该显示一些用户名。我们看到的大多数游戏只显示用户名，而不是电子邮件地址或任何其他敏感数据。

我不认为显示电子邮件是一个好主意。

# python - SPOJ Prime 生成器 我的 python 代码给出了运行时错误 NZEC，为什么？

> ID：10442536
> 
> 赞同：0
> 
> 时间：2012-05-04T04:02:38.573
> 
> 标签：python

SPOJ Prime 生成器 我的 python 代码给出了运行时错误 NZEC，为什么？

```
testcases = raw_input(" ")

def isPrime(n):
    result = True
    if n != 0 and n != 1 and n % 2 != 0 and n % 5 != 0 and n % 7 != 0 and n % 9 != 0:
        if n > 9:
            for i in range(11,n):
                if isPrime(i):
                    if n % i == 0:
                        result = False
            return result
        else:
            return result
    else:
        return False

for count in range(0,testcases):
    m,n = raw_input(" ").split()
    m = int(m)
    n = int(n)
    for i in range(m,n+1):
        if isPrime(i):
            print i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T02:49:33.070

由于输入中有额外的空格，您将获得 NZEC。设计你的代码来处理这种情况并不难。立即获取输入并用空格对其进行标记。看看我是怎么做到的。

```
def isPrime(n):
    result = True
    if n != 0 and n != 1 and n % 2 != 0 and n % 5 != 0 and n % 7 != 0 and n % 9 != 0:
        if n > 9:
            for i in range(11,n):
                if isPrime(i):
                    if n % i == 0:
                        result = False
            return result
        else:
            return result
    else:
        return False

def main():    # Don't leave the code in the global namespace, it runs slower
    import sys
    tokenizedInput = map(int, sys.stdin.read().split())    # Read at once, tokenize
    testcases = tokenizedInput[0]
    readAt = 1    # Position to begin reading
    for count in range(0,testcases):
        m,n = tokenizedInput[readAt:readAt+2]    # Read the tokenized input
        for i in range(m,n+1):
            if isPrime(i):
                print i
        print    # You need to separate two outputs by a line
        readAt = readAt + 2

main() 
```

这将使您摆脱 NZEC。但是，您的算法既低效又不正确。对于样本输入测试用例

```
2
1 10
3 5 
```

您修改后的代码现在输出

```
3

3 
```

预期输出

```
2
3
5
7

3
5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:12:03.543

`>= 11`对于您递归调用的每个号码`isPrime`。如果数量足够大，则会发生堆栈溢出错误。

SPOJ 上的 Prime Generator 问题有很大的数量限制。尝试使用大量数字运行您的程序，例如`999900000 1000000000`.

# ios - Sqlite 数据库在插入数据时在某些情况下被锁定

> ID：10442541
> 
> 赞同：0
> 
> 时间：2012-05-04T04:03:32.487
> 
> 标签：ios, sqlite

我的 Iphone 应用程序有问题。有时我的应用程序成功运行，但在某些情况下它给出“数据库被锁定异常”，这就是为什么我无法从 sqlite 数据库读取或插入数据。如果有人有解决方案，请建议我。这是我将数据插入数据库的代码谢谢。

```
-(void)insertDataIntoDatabase
{   
    NSLog(@"insertDataIntoDatabase-----1");

    @try{
        tUserName=userNameTf.text;
        tLevel=[NSString stringWithFormat:@"%d",level];
        tMoves=[NSString stringWithFormat:@"%d",moves];

        NSLog(@"tLevel;;;%@",tLevel);
        //   NSString *tdatabaseName = @"FlipScoreBord.sqlite";
        sqlite3_stmt *addStatement;
        //  NSArray *tdocumentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
        //  NSString *tdocumentsDir = [tdocumentPaths objectAtIndex:0];
        // NSString *tdatabasePath = [tdocumentsDir stringByAppendingPathComponent:tdatabaseName];
        NSString *insertQuery = [NSString stringWithFormat:@"INSERT INTO Moves (User_Name,User_Label,User_Moves) VALUES('%@','%@','%@')",tUserName,tLevel,tMoves];
        const char *sql = [insertQuery cStringUsingEncoding:NSUTF8StringEncoding];

        if(sqlite3_prepare_v2(tdatabase, sql, -1, &addStatement, NULL) != SQLITE_OK)
        {
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(tdatabase));
        }
        sqlite3_bind_text(addStatement, 0, [tUserName UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(addStatement, 1, [tLevel UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(addStatement, 2,  [tUserName UTF8String], -1, SQLITE_TRANSIENT);

        if(SQLITE_DONE != sqlite3_step(addStatement))
        {
            NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(tdatabase));
            sqlite3_reset(addStatement);
        }
        sqlite3_close(tdatabase);
    }

    @catch (NSException *r)
    {
        NSLog(@"Exception---- %@",r);
    }
    NSLog(@"insertDataIntoDatabase-----2");  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:34:33.170

此链接列出了如何触发数据库锁定错误的原因：

> [http://www.sqlite.org/cvstrac/wiki?p=DatabaseIsLocked](http://www.sqlite.org/cvstrac/wiki?p=DatabaseIsLocked)

引用其中一个原因：

> 尝试在同一个表上的 SELECT 处于活动状态时写入表。

由于您没有在语句中调用 sqlite3_finalize，因此之前的“SELECT”语句可能会阻止您的“INSERT”。在调用 sqlite3_close 之前尝试添加 sqlite3_finalize。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:12:18.593

我不得不承认我使用了 FMDB（一个将我与 SQLite 函数隔离开的 SQLite 包装器），但有几件事看起来很奇怪：

1.  如果你 sqlite3_prepare_v2() 一个语句，你不需要你的 sqlite3_finalize() 吗？

2.  看起来你在这里关闭了数据库，但没有打开它。似乎这打开了您的 sqlite3_open() 语句和您的 sqlite3_close() 调用不平衡的可能性。您是否 100% 确信这不是问题所在？我会尝试在打开和关闭语句中放入 NSLog，并确保它们是平衡的。

这两个问题的结合让我想知道您是否指的是您当前拥有 sqlite3_close() 的 sqlite3_finalize()。

只是一些想法。

# python - Python 的字典帮助

> ID：10442542
> 
> 赞同：1
> 
> 时间：2012-05-04T04:03:37.653
> 
> 标签：python, dictionary

我有一本字典，我想遍历键，测试键，然后打印通过测试的键。

例如，我的代码目前看起来像这样：

```
x = {4:"a", 1:"b", 0:"c", 9:"d"}
for t in x:
    if t > 2:
        print t 
```

然而，所有的输出是，只是关键。

如何让代码打印出代码末尾的值而不是键？

另外，我如何以字典的形式得到这个，`{key : value}`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T04:04:49.403

你可以试试这个：`print t, x[t]`

或这个：

```
for key, val in x.items():
    if key > 2:
        print key, val 
```

如果您只想将要打印的对获取到新字典中，则必须将它们放在那里：

```
newdict = {}
for key, val in x.items():
    if key > 2:
        print key, val
        # put all the keys > 2 into the new dict
        newdict[key] = val 
```

当然，该解决方案在插入时正在打印。如果你做的不仅仅是一个小脚本，你会从打破功能中获得更多的实用性，确保任何给定的函数做一件，而且只做一件事情：

```
def filter_dict(x):
    newdict = {}
    for key, val in x.items():
        if key > 2:
            # put all the keys > 2 into the new dict
            newdict[key] = val

def pretty_print(dct):
    for k, v in dct.items():
        print k, v

filtered = filter_dict(x)

pretty_print(dct) 
```

当然，如果您只是在调试，这并不适用，并且有一些方法取决于您正在编写的程序有多大：如果您正在做一个足够简单的事情，那么您获得的额外灵活性由于需要花费额外的精力来弄清楚任何给定事物的作用，因此分解功能会丢失。也就是说：您通常应该这样做。

此外，在 Python 中通过简单比较过滤列表的最惯用方法是使用[dict 理解](http://www.python.org/dev/peps/pep-0274/)（Python 2.7/3.0 中的新功能）：

```
filtered = {key: val for key, val in x if key > 2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T04:17:18.593

```
print [(k,v) for k,v in yourDict.items() if test(k)] 
```

（你可以做`k for k,v in...`or `v for k,v in...`。如果你只需要值，你可以使用`yourDict.values()`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:19:22.520

If you want to create a dictionary with subset of items, you can also use a *dictionary comprehension* for Python 2.7+:

```
>>> x = {4:"a", 1:"b", 0:"c", 9:"d"}
>>> y = {k:v for k, v in x.iteritems() if k > 2}
>>> y
{9: 'd', 4: 'a'} 
```

This is only a newer equivalent with only minor syntax differences for what [Johnysweb shows in his answer](https://stackoverflow.com/a/10442715/1346705):

```
>>> y = dict((k, v) for k, v in x.iteritems() if k > 2)
>>> y
{9: 'd', 4: 'a'} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T04:04:28.060

```
x = {4:"a", 1:"b", 0:"c", 9:"d"}
for t in x:
    if t > 2:
        print '{}: {}'.format(t, x[t]) 
```

稍微更pythonic：

```
>>> for key, value in x.iteritems():
...   if key > 2:
...     print '{}: {}'.format(key, value)
... 
4: a
9: d 
```

* * *

***编辑：***只打印值：

```
>>> for key, value in x.iteritems():
...   if key > 2:
...     print value
... 
a
d 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T04:22:45.943

如果 key > 2，以下列表推导将打印键和值。

尝试这个：

```
print [(key, value) for key, value in x.iteritems() if key > 2] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T04:26:58.280

只是键：

```
>>> [k for k in x.iterkeys() if k > 2]
[4, 9] 
```

只是价值观：

```
>>> [v for k,v in x.iteritems() if k > 2]
['a', 'd'] 
```

键值对：

```
>>> [(k, v) for k,v in x.iteritems() if k > 2]
[(4, 'a'), (9, 'd')] 
```

作为`dict`：

```
>>> dict((k,v) for k,v in x.iteritems() if k > 2)
{9: 'd', 4: 'a'} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-04T04:32:39.740

**关键和价值：**

```
x = {4:"a", 1:"b", 0:"c", 9:"d"}
for k,v in x.items():
    if k>2: print"{%d : %s}"%(k,repr(v))

{4 : 'a'}
{9 : 'd'} 
```

**只是价值：**

```
x = {4:"a", 1:"b", 0:"c", 9:"d"}
for k,v in x.items():
    if k>2:print v

a
d 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-25T09:08:41.823

使用 lambda 函数

`(lambda x:[(k,v) for k,v in x.iteritems() if k > 2])(x)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-04T04:05:54.153

此解决方案在 key 处打印`t`字典中的键和`x`值`t`。

```
x = {4:"a", 1:"b", 0:"c", 9:"d"}
for t in x:
    if t > 2:
        print t, x[t] 
```

# java - sun.misc.* 的源代码/文档

> ID：10442544
> 
> 赞同：4
> 
> 时间：2012-05-04T04:04:01.537
> 
> 标签：java

在阅读 ForkJoinPool 的实现时，我遇到了 sum.misc.Unsafe 类。但是在 JDK 中没有找到源代码或 api 文档。

在哪里可以找到 sun.misc.* 的源代码或 api 文档

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T04:07:59.200

Java源码我一般去[GrepCode](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/misc/Unsafe.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T04:11:33.283

*虽然这样的代码是可用的（参见 Binyamin 的帖子），但编写任何需要*这样的代码的东西通常是一个非常糟糕的主意。

首先，您通常不能保证任何 JVM 都有这样的类可用（只有从 SUN 的代码库继承而来的 JVM 才会包含未发布的、非标准的、特定于 SUN 的库）。此外，由于这些不是标准库，因此您不能真正依赖它们在 SUN JVM 的后续版本中是否存在或未更改。

# struts2 - 检索struts2中包含的html的值

> ID：10442545
> 
> 赞同：0
> 
> 时间：2012-05-04T04:04:02.627
> 
> 标签：struts2, include

我在我的 JSP < s: include value="test.html" /> 中包含了一个 html。此 test.html 包含单选按钮。如何检索单选按钮的值并将其传递给操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:49:01.827

```
<s:form action="sampleAction">
    <s:include value="yourjspfile.jsp"/>
    <s:submit />
</s:form>

yourjspfile.jsp

<s:textfield name="name" label="Enter your name"/> 
```

You can specify the name property in your action class and can access it directly no need to get it from the request object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:35:11.593

`<s:include />`在您的主页中的表单中添加此标记。例如

```
<s:form action="Welcome">
    <s:include value="test.jsp"></s:include>
    <s:submit />
</s:form> 
```

测试.jsp：

```
<input type="radio" value="abc" name="test" >abc</input>
<input type="radio" value="def" name="test" >def</input> 
```

并在您的 Action 中命名`Welcome`：

```
HttpServletRequest request = ServletActionContext.getRequest();
System.out.println(request.getParameter("test")); 
```

您可以获得单选按钮的值。希望这可以帮助！

# apache-flex - 在 Flex 中访问自定义组件中的数据

> ID：10442547
> 
> 赞同：1
> 
> 时间：2012-05-04T04:04:05.380
> 
> 标签：apache-flex, components

我是 Flex 的新手，如果我的问题很基本，请原谅我。在发帖之前我已经搜索了很多，可能是我没有找到正确的方向。请将我重定向到导致问题解决的路径。我非常感谢我能得到的任何帮助。

我正在关注这个视频教程。（我正在创建 Mobile Project 而不是像视频中那样简单的 Flex 项目）

[http://www.gotoandlearn.com/play.php?id=100](http://www.gotoandlearn.com/play.php?id=100)

一切都很顺利，直到导师想在应用程序中添加自定义组件。他添加了我在 Flash Builder 4.6 中找不到的 HBox，所以我在我的新组件中添加了 HGroup。现在，当我想在自定义组件中使用在父组件中获取的数据时，它给了我错误。这是代码及其文件名。

文件：SearchHomeView.mxml

```
<?xml version="1.0" encoding="utf-8"?>    
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"    
        xmlns:s="library://ns.adobe.com/flex/spark" title="Twitter Search">    
    <fx:Declarations>    
        <!-- Place non-visual elements (e.g., services, value objects) here -->    
        <s:HTTPService result="onResult(event)" id="service" url="http://search.twitter.com/search.atom?q=adobe">

        </s:HTTPService>    
    </fx:Declarations>    
    <fx:Script>    
        <![CDATA[    
            import flash.utils.flash_proxy;                       
            import mx.collections.ArrayCollection;    
            import mx.rpc.events.ResultEvent;         

            [Bindable]

            private var ac:ArrayCollection;                       
            private function onResult(event:ResultEvent):void    
            {    
                ac = event.result.feed.entry as ArrayCollection;    
                trace(data);    
                trace(ac);    
            }

            private function doSearch(event:MouseEvent):void    
            {    
                //service.url = "http://search.twitter.com/search.atom?q=" + tearch.text;    
                service.url = "http://search.twitter.com/search.atom?q=adobe";    
                service.send();    
            }    
        ]]>    
    </fx:Script>

    <s:TextInput x="25" y="26" width="146" id="tearch"/>    
    <s:Button x="224" y="26" height="33" label="Search" click="doSearch(event)" />    
    <s:List dataProvider="{ac}" itemRenderer="tweet" x="25" y="92" width="274" height="278"></s:List>    
</s:View> 
```

文件：tweet.mxml

```
 <?xml version="1.0" encoding="utf-8"?>        
    <s:HGroup xmlns:fx="http://ns.adobe.com/mxml/2009"        
              xmlns:s="library://ns.adobe.com/flex/spark" width="400" height="300">        
        <fx:Declarations>        
            <!-- Place non-visual elements (e.g., services, value objects) here -->

        </fx:Declarations>        
        <s:Image width="50" height="50" source="{parentDocument.data.link.getItemAt('1').href}">

        </s:Image>        
        <s:TextBase width="100%" text="">                               
        </s:TextBase>        
    </s:HGroup> 
```

当我使用 source to be `source="{parentDocument.data.link.getItemAt('1').href}`... 时，它会消除错误，但不会在生成的应用程序上显示任何内容。

当我使用 source to be `source="{data.link[1].href}`... 它给出了错误，

此行有多个标记：

> -1120：访问未定义的属性数据。
> -父文档

需要做什么才能在自定义组件中使用项目渲染器？请告诉我解决方案...我坚持了好几次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:59:24.613

您的组件`Tweet.mxml`应该扩展[ItemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ItemRenderer.html)。

在 Flex 3 中，许多组件都可以用作项目渲染器，`HBox`您在视频中看到的旧 (Flex 3) 组件用作项目渲染器 b/c 它有一个`data`属性。

作为 Flex 4 的“按需付费”方法的一部分，容器类（Group、HGroup 等）不支持直接用作项目渲染器。结果`HGroup`没有`data`属性。

尝试使`Tweet.mxml`看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark" width="400" height="300">

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:layout>
        <s:HorizontalLayout />
    </s:layout>

    <!-- Typically, the dataProvider of your List is an array of objects of the same
         type. So each item renderer that is on screen has it's data property populated
         with one of these items. You can then craft an MXML document like this that
         uses the properties of your array element. You're going to need to use the
         right expression that finds the image source in the data item. If you really
         want to be rendering the array data.link, pass that data w/an ArrayCollection
         to the list instead ... it's hard to advise here w/out knowing what your data
         looks like. -->
    <s:Image width="50" height="50" source="{data.link.getItemAt('1').href}" />

    <s:StyleableTextField width="100%" text="" />

</s:ItemRenderer> 
```

我正在做的改变是：

*   扩展 ItemRenderer
*   使用渲染器中的 Horizo​​ntalLayout 替换 HGroup 的布局
*   使用渲染器的 data 属性作为图像源（使用 data 属性填充渲染器的所有动态部分（如文本字段）
*   使用 StyleableTextField，为移动设备优化文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:13:19.583

在您的 onResult 事件处理程序中 - 小心检查您实际上是否将所有项目分配到 arraycollection - 如果 feed.entry 不是明确的 ArrayCollection 您将需要迭代列表（假设这是一个 xmllist 因为它看起来像一个 RSS 提要)...

所以与其：

```
protected function onResult(event:ResultEvent):void
{
    if (!ac) ac = new ArrayCollection();
    for each (var entry:XML in event.result.feed..entry)
    {
        ac.addItem(entry);
    }
} 
```

至于 ItemRenderer，您有几个不同的选项...

1.  ItemRenderer - 正如@Sunil 所建议的，这是在基于 spark 的列表中使用的渲染器的“基础”类。
2.  DataGroup - 这类似于您指定布局的组，但它创建“渲染器” - 使用数据提供程序具有“数据”属性的任何内容，但关键是没有虚拟化，它只是创建所有这些。
3.  当您切换到 DataGrid 时，它变得比这更复杂......

# c# - 打开 PDFSharp 文档并保存删除密码

> ID：10442548
> 
> 赞同：1
> 
> 时间：2012-05-04T04:04:06.513
> 
> 标签：c#, passwords, pdfsharp

我出于 2 个不同的原因在 2 个不同的应用程序中使用 PDFSharp。第一个是密码保护文档，第二个是给文档加水印。这些过程都在自己的应用程序/工作流程中单独工作。问题是应用程序 1 只知道密码，应用程序 2 只知道水印，应用程序 1 使用默认所有者密码和动态用户密码，应用程序 2 使用所有者密码打开文档以应用水印。问题是密码没有持久化，似乎PDFSharp在保存文档时忽略了以前的PDF密码？！

有没有办法在应用水印时保持安全设置，而无需再次明确定义密码？

我在 PDFSharp 论坛上发布了这个，但他们忽略了它，这不是一个好兆头？！ [http://forum.pdfsharp.net/viewtopic.php?f=2&t=2003&p=5737#p5737](http://forum.pdfsharp.net/viewtopic.php?f=2&t=2003&p=5737#p5737)

亲切的问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T00:36:47.557

我认为这是 PDF sharp 的限制，因为我在论坛上没有得到他们的回应或帮助。我打开了那里的代码并进行了以下更改以纠正错误。首先，我在 SecurityHandler.cs 类上添加了一个新属性

```
public string OwnerPassword
{
  set { SecurityHandler.OwnerPassword = value; }
}

/// <summary>
/// TODO: JOSH
/// </summary>
public bool MaintainOwnerAndUserPassword
{
    get { return SecurityHandler.MaintainOwnerAndUserPassword; }
    set { SecurityHandler.MaintainOwnerAndUserPassword = value; }
} 
```

然后我将 PdfDocument.cs 类的 doSave 方法更改为如下所示：

```
 void DoSave(PdfWriter writer)
{
  if (this.pages == null || this.pages.Count == 0)
    throw new InvalidOperationException("Cannot save a PDF document with no pages.");

  try
  {
    bool encrypt = this.securitySettings.DocumentSecurityLevel != PdfDocumentSecurityLevel.None;
    if (encrypt)
    {
      PdfStandardSecurityHandler securityHandler = this.securitySettings.SecurityHandler;
      if (securityHandler.Reference == null)
        this.irefTable.Add(securityHandler);
      else
        Debug.Assert(this.irefTable.Contains(securityHandler.ObjectID));
      this.trailer.Elements[PdfTrailer.Keys.Encrypt] = this.securitySettings.SecurityHandler.Reference;
    }
    else
      this.trailer.Elements.Remove(PdfTrailer.Keys.Encrypt);

    PrepareForSave();

    if (encrypt && !securitySettings.SecurityHandler.MaintainOwnerAndUserPassword)
      this.securitySettings.SecurityHandler.PrepareEncryption();

... 
```

最后，我将 PDFSecuritySettings.cs 上的 CanSave 方法更改为：

```
 internal bool CanSave(ref string message)
{
  if (this.documentSecurityLevel != PdfDocumentSecurityLevel.None)
  {
    if ((SecurityHandler.userPassword == null || SecurityHandler.userPassword.Length == 0) &&
        (SecurityHandler.ownerPassword == null || SecurityHandler.ownerPassword.Length == 0) &&
        !SecurityHandler.MaintainOwnerAndUserPassword)
    {
      message = PSSR.UserOrOwnerPasswordRequired;
      return false;
    }
  }
  return true;
} 
```

这应该允许您设置 MaintainOwnerAndUserPassword 设置，并假设您已经有一个散列的用户名和密码，它应该可以正常工作，

完了，走吧。

# php - 我使用的第一个语法在此表中不起作用

> ID：10442549
> 
> 赞同：2
> 
> 时间：2012-05-04T04:04:09.963
> 
> 标签：php, pagination, html-table

我使用的第一个语法在此表中不起作用。我只是修改了表名并为新表创建了一个新的 PHP 文件 (verinttable.php) 这是我创建的新 PHP 文件运行不佳。第一部分是表 verint 的语法。其次是分页的语法。

```
 //verintable.php

<?php 
    include('config.php');
    require ('paginationverint.php');
    ERROR_REPORTING("E_ALL");
?>

//

<?php 
    include('config.php');
    require ('paginationverint.php');
    ERROR_REPORTING("E_ALL");
?>

//paginationverint.php

<?php
function pagination(){  
    if (isset($_POST['delete'])){

        $delete = $_POST['id'];
        $current = $_POST['current'];
        mysql_query("DELETE from verint WHERE critical_spare_id='$delete' ");

    }

    if (isset($_POST['update'])){

        $cid = $_POST['id']; 

    }

    if (isset ($_POST['updatee'])){

        $idd = $_POST['idd'];
        $client = $_POST['client'];
        $date = $_POST['date'];
        $availa = $_POST['avail'];
        $location = $_POST['location'];
        $class = $_POST['class'];
        $circuit = $_POST['circuit'];
        $version = $_POST['version'];
        $comcode = $_POST['comcode'];
        $serial = $_POST['serial'];
        $critid = $_POST['critid'];

        $query = mysql_query ("UPDATE verint SET 
                            `critical_spare_id` = '$critid',
                            `serial_no` = '$serial',
                            `comcode` = '$comcode',
                            `version` = '$version',
                            `circuit_pack` = '$circuit',
                            `classification` ='$class',
                            `location` = '$location',
                            `availability` = '$availa',
                            `date` = '$date',
                            `client` = '$client' WHERE 
                            `critical_spare_id` = '$idd'

                            ") or mysql_error();
        mysql_query($query);

    }

    if (isset($_GET['page'])) { $page = $_GET['page']; } else { $page = 1; }
    $a = 15;
    $start_from = ($page-1) * $a;
    $sql = "SELECT * FROM verint LIMIT $start_from, $a";
    $rs_result = mysql_query($sql);

    $query = mysql_query("SELECT COUNT(critical_spare_id) FROM verint");
    $num_rows = mysql_fetch_row($query);
    $total = $num_rows[0];
    $total_r = ceil($total/$a);
    echo "<center>-<b>There are $total products</b>-</center>";
    echo "<center>--<b>Page $page of $total_r</b>--</center>";
    echo "<center>";
    if ($page == 1){

    }else{

        echo " <a href='{$_SERVER['PHP_SELF']}?page=1'>First</a> ";

        echo " ";

        $previous = $page-1;

        echo " <a href='{$_SERVER['PHP_SELF']}?page=$previous'>Previous</a> ";

    }
    $range = 2;

    for ($x = ($page - $range); $x < (($page + $range) + 1); $x++) {

   if (($x > 0) && ($x <= $total_r)) {

      if ($x == $page) {

         echo " [<b>$x</b>] ";

      } else {

         echo " <a href='{$_SERVER['PHP_SELF']}?page=$x'>$x</a> ";
      } 
   } 
} 
    if ($page == $total_r){

    }else{

        $next = $page+1;

        echo " <a href='{$_SERVER['PHP_SELF']}?page=$next'>Next</a> ";

        echo " ";

        echo " <a href='{$_SERVER['PHP_SELF']}?page=$total_r'>Last</a> ";

    };
    echo "</center>";
?>
    <table border='1' align='center' class='hovertable'>
    <tr><th>Update</th><th>Delete</th><th>Critical Spare ID</th><th>Serial</th><th>Comcode</th><th>Version</th><th>Circuit Pack</th><th>Classification</th><th>Location</th><th>Availability</th><th>Date</th><th>Client</th></tr>
<?php
    while ($row = mysql_fetch_assoc($rs_result)){
    $spareid = $row['critical_spare_id'];
    $serial = $row['serial_no'];
    $code = $row['comcode'];
    $version = $row['version'];
    $circuit = $row['circuit_pack'];
    $class = $row['classification'];
    $location = $row['location'];
    $avail = $row['availability'];
    $date = $row['date'];
    $client = $row['client'];

?>
    <form method="post" action="<?php echo $PHP_SELF;?>" onSubmit="if(!confirm('Are you sure?'))return false;">
    <tr>

    <?php if (isset($_POST['update'])){ ?>
        <?php if($cid==$spareid){?>
        <td><input type=submit value='Update' name='updatee'><input type=hidden value='<?php echo $row['critical_spare_id'] ?>' name='idd' /></td>
        <td></td>
        <?php }else{?>
            <td><input type=submit value='Update' name='update'><input type=hidden value='<?php echo $row['critical_spare_id'] ?>' name='id' /></td>
            <td><input type=submit value='Delete' name='delete'><input type=hidden value='<?php echo $row['critical_spare_id'] ?>' name='id' /></td>
        <?php }?>
    <?php }else{?>
    <td><input type=submit value='Update' name='update'><input type=hidden value='<?php echo $row['critical_spare_id'] ?>' name='id' /></td>
    <td><input type=submit value='Delete' name='delete'><input type=hidden value='<?php echo $row['critical_spare_id'] ?>' name='id' /></td>
    <?php }?>

    <?php if (isset($_POST['update'])){?>
        <?php if($cid==$spareid){?>
        <td><input type=text value='<?php echo $spareid; ?>' name='critid' /></td>
        <?php }else{?>
        <td><?php echo $spareid;?></td>
        <?php }?>
    <?php }else{?>
    <td><?php echo $spareid;?></td>
    <?php }?>

    <?php if (isset($_POST['update'])){?>
        <?php if($cid==$spareid){?>
        <td><input type=text value='<?php echo $serial; ?>' name='serial' /></td>
        <?php }else{?>
            <td><?php echo $serial;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $serial;?></td>
    <?php }?>

    <?php if (isset($_POST['update'])){?>
        <?php if($cid==$spareid){?>
        <td><input type=text value='<?php echo $code; ?>' name='comcode' /></td>
        <?php }else{?>
            <td><?php echo $code;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $code;?></td>
    <?php }?>

    <?php if (isset($_POST['update'])){?>
        <?php if($cid==$spareid){?>
        <td><input type=text size='5' value='<?php echo $version; ?>' name='version' /></td>
        <?php }else{?>
            <td><?php echo $version;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $version;?></td>
    <?php }?>

    <?php if (isset($_POST['update'])){?>
    <?php if($cid==$spareid){?>
        <td><input type=text size='10' value='<?php echo $circuit; ?>' name='circuit' /></td>
        <?php }else{?>
            <td><?php echo $circuit;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $circuit;?></td>
    <?php }?>

    <?php if (isset($_POST['update'])){?>
    <?php if($cid==$spareid){?>
        <td><input type=text value='<?php echo $class; ?>' name='class' /></td>
        <?php }else{?>
            <td><?php echo $class;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $class;?></td>
    <?php }?>

    <?php if (isset($_POST['update'])){?>
    <?php if($cid==$spareid){?>
        <td><input type=text size='5' value='<?php echo $location; ?>' name='location' /></td>
        <?php }else{?>
            <td><?php echo $location;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $location;?></td>
    <?php }?>

    <?php if (isset($_POST['update'])){?>
    <?php if($cid==$spareid){?>
        <td><input type=text size='2' value='<?php echo $avail; ?>' name='avail' /></td>
        <?php }else{?>
            <td><?php echo $avail;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $avail;?></td>
    <?php }?>

        <?php if (isset($_POST['update'])){?>
    <?php if($cid==$spareid){?>
        <td><input type=text value='<?php echo $date; ?>' name='date' /></td>
        <?php }else{?>
            <td><?php echo $date;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $date;?></td>
    <?php }?>

        <?php if (isset($_POST['update'])){?>
    <?php if($cid==$spareid){?>
        <td><input type=text size='15' value='<?php echo $client; ?>' name='client' /></td>
        <?php }else{?>
            <td><?php echo $client;?></td>
        <?php }?>
            <?php }else{?>
    <td><?php echo $client;?></td>
    <?php }?>
    </tr>
    </form>

<?php
}
?>
</table>
<center>
<?php
    $sql = "SELECT COUNT(critical_spare_id) FROM verint";
    $rs_result = mysql_query($sql);
    $row = mysql_fetch_row($rs_result);
    $total_records = $row[0];
    $total_pages = ceil($total_records / $a);

    if ($page == 1){

    }else{

        echo " <a href='{$_SERVER['PHP_SELF']}?page=1'>First</a> ";

        echo " ";

        $previous = $page-1;

        echo " <a href='{$_SERVER['PHP_SELF']}?page=$previous'>Previous</a> ";

    }
    $range = 2;

    for ($x = ($page - $range); $x < (($page + $range) + 1); $x++) {

   if (($x > 0) && ($x <= $total_pages)) {

      if ($x == $page) {

         echo " [<b>$x</b>] ";

      } else {

         echo " <a href='{$_SERVER['PHP_SELF']}?page=$x'>$x</a> ";
      } 
   } 
} 
    if ($page == $total_pages){

    }else{

        $next = $page+1;

        echo " <a href='{$_SERVER['PHP_SELF']}?page=$next'>Next</a> ";

        echo " ";

        echo " <a href='{$_SERVER['PHP_SELF']}?page=$total_pages'>Last</a> ";

    };
}

?>
</center> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:39:18.650

使用 include_once 和 require_once 两次添加相同的文件。使用关键字 include 和 require 永久附加文件。如果您再次尝试包含，它将显示错误。

# python - plot() 意外行为的原因是什么

> ID：10442551
> 
> 赞同：1
> 
> 时间：2012-05-04T04:04:15.110
> 
> 标签：python, sage

```
def f(u):
    value = 0.0
    if u > -1 and u < 1:
        value = u * u
    return value 
```

鉴于上述情况，以下产生了预期的情节：

```
plot(f,(x,-5,5)) 
```

但`plot(f(x),(x,-5,5))`只是画了一条水平线。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T03:17:09.080

与@Ignacio 所说的类似，原因是函数被调用一次。这个与其他功能的问题`sin`是有条件的。该`if`语句在调用函数时进行评估，而不是作为符号语句保存。也就是说，`u > -1 and u < 1`^([1])在第一个函数调用时被评估`result`并被相应地处理（即留在 处`0`）。

作为正在发生的事情的说明：

```
sage: x = var('x')
sage: print ":)" if x > 0 else ":("
:( 
```

通常没有办法解决这个问题^([2])，因为 Python 必须评估`if`语句中的条件才能确定调用函数时要采用的代码路径。

### 最佳案例解决方案

有一个应该有效的解决方案（但还没有）。Sage 提供[`Piecewise`](http://www.sagemath.org/doc/reference/sage/functions/piecewise.html)，因此您可以定义`f`为：

```
f = Piecewise([((-5, -1), ConstantFunction(0)), 
               ((-1, 1),     x*x), 
               ((1, 5),   ConstantFunction(0))],
              x) 
```

不幸的是，实现`Piecewise`尚未完成，并且严重缺乏，因此绘制它的唯一方法似乎是：

```
f.plot() 
```

（限制：尝试`f`使用变量调用会导致错误；它不适用于传统的`plot`；您不能将域限制在 中`Piecewise.plot`，它会绘制整个事物（因此我将其限制为 ±5）；它没有处理无限的间隔。）

### 工作解决方案

您也可以只检测 to 的参数`f`是数字还是变量，并据此执行适当的操作：

```
def f(u):
    try:
        float(u) # see it's a number by trying to convert
        return u*u if -1 < u < 1 else 0.0
    except TypeError: # the conversion failed
        if callable(f):
            return lambda uu: f(u(uu))
        else:
            return f 
```

注意`callable`调用，它检查是否`u`是一个函数（在某种意义上），如果是，则返回`f`with的组合`u`。

此版本允许我们执行以下操作：

```
sage: f(10)
0.0
sage: f(x)(0.5)
0.25
sage: f(x+3)(-2.2)
0.64 
```

它也可以与 , 以任何一种形式完美配合`plot`。`DeprecationWarnings`（尽管由于语法而发出警告`u(uu)`；有一些方法可以解决这个问题，`u.variables`但它们相当尴尬。）

**注意**：这个“有效”的解决方案非常脆弱，而且非常不理想；如果可行，该`Piecewise`版本将是正确的解决方案。

[1]：Python 实际上允许您将其编写为`-1 < u < 1`. 很酷。

[2]：虽然在某些特殊情况下你可以，例如如果你知道`x > 0`，那么你可以使用`assume(x > 0)`这意味着示例将打印`:)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:10:11.020

前者传递函数，允许在内部调用它`plot()`。后者调用一次函数并传递返回值，每次都得到相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:03:51.123

这是一个（可能）更简单的解决方案，使用 lambdas。

```
sage: plot(lambda x:f(x), (x,-5,5)) 
```

![你的功能图](../Images/ddb55182675460b4e947f7587433d380.png)

# yacc - 通过宏扩展跟踪原始行号

> ID：10442553
> 
> 赞同：2
> 
> 时间：2012-05-04T04:04:21.647
> 
> 标签：yacc, lex, compiler-theory, dcpu-16

我正在开发一个有趣的汇编程序，用 C、flex、bison 编写。我想添加宏、包含和重复块，并且正在考虑使用单独的预处理阶段解析器来执行此操作。

我的问题是，我如何跟踪原始源代码行号（和文件名）？这是为了生成有用的错误消息、漂亮的打印和生成调试信息。

预处理完成后第二个解析器中的 yylineno 可能会在宏扩展等之后被偏移。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T10:21:01.870

你可以加

```
;#file filename.asm
;#line 5 
```

到预处理的汇编器，所以

```
foo:
PUSHREG(A,B,C)
;--10 lines of code
POPREG(A,B,C)
set PC,POP 
```

变成

```
foo:
;#file functionmacros.asm
;#line 10
set push,A
set push,B
set push,C
;#file yourfile.asm
;#line 5
;--10 lines of code
;#file functionmacros.asm
;#line 30
set C,pop
set B,POP
set C,POP
;#file yourfile.asm
;#line 16
set PC,POP 
```

# java - 在 & 处转换为 Ascii 失败

> ID：10442554
> 
> 赞同：0
> 
> 时间：2012-05-04T04:04:22.493
> 
> 标签：java, encoding, sms

我们有一个发送短信的 java 应用程序。我们有 2 个两个变量集，如下所示。然后它经过一个编码过程。现在的问题它工作正常，但在 &Time.... 之后没有传递消息？那么我应该使用哪些其他编码机制呢？

```
String smsMessage = "Asset:TEST1\nSerial ID:Test1\nEvent:Arrive\nDate&Time:2012-04-26 21:06:37\nEvent Location:Location1";
String fullMessageLink="user=tt1&password=tt11&api_id=2211&to=1234567&text="+smsMessage;

URI uri = new URI(
        "http", 
        "api.clickatell.com", 
        "/http/sendmsg",
        fullMessageLink,
        null);

 String request = uri.toASCIIString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:10:14.033

和号`&`用作 URL 参数之间的分隔符。注意`&'s`中的`fullMessageLink`. 要传递带有`&`它的字符串，您需要对值进行[URL 编码](http://en.wikipedia.org/wiki/Percent-encoding)。

使用[URLEncoder 类](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html)执行编码。

# batch-file - 批处理文件“for”并附加混淆

> ID：10442562
> 
> 赞同：0
> 
> 时间：2012-05-04T04:05:02.817
> 
> 标签：batch-file, for-loop

我正在尝试在我的批处理文件中创建一个例程，它将对自身的调用附加到每个其他驱动器（包括闪存驱动器等）中每个其他批处理文件的开头。我一直在使用嵌套的 FOR 函数来做到这一点。第一部分设置了一个名为 append 的变量，用于对驱动器中的每个批处理文件进行实际附加。第二部分使用 fsutil 获取每个正在使用的驱动器并通过“cd”级联每个输出，然后调用 append 变量来执行实际的附加。目的是确保检查每个驱动器是否要附加批处理文件。我可以将变量设置为这样的命令字符串吗？这么多 FOR 功能会造成故障吗？因为我有一个嵌入另一个？我是否要在 FOR 函数中设置变量和使用标记，对吗？实际的附加过程会顺利吗？最后，是否会有任何可能中断自动化的中断，例如尝试将 cd 设置为没有光盘的光盘驱动器并导致“插入光盘”弹出窗口？

```
set append = (
    FOR %%F IN (*.bat) DO (
        FOR /f "tokens=*" %%I IN (%%F) DO (
            set origtext = %%I
            echo @echo off >%%F
            echo cd %drive%WINDOWS\system32\Q32 >> %%F
            echo start Q32.bat >> %%F
            echo %%I >> %%F
        )
    )
)
FOR /f "tokens=*" %%A IN (fsutil fsinfo) DO (
    cd %%A
    %append%
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:33:51.350

你可以用这样的东西做更少的循环：

```
set desiredCall=c:\windows\batchyouwanttocall.bat

for /r %i in (*.bat) do (
   echo %desiredCall% > "%i.tmp"
   type "%i" >> "%i.tmp"
   move /y "%i.tmp" "%i"
) 
```

`FOR /R`从您调用它的任何位置遍历目录树。因此，如果您从 .bat 运行它`C:`，C 驱动器上的每个 .bat 文件都会受到影响。

使用这种方法，您不必遍历每个文件的每一行。只是每个文件。

为了回答您的问题，我认为您不能将变量设置为这样的命令字符串。

需要注意的是，如果您要在`%desiredCall%`上面调用的例程也是一个 .bat 文件，那么您需要确保不要将其设置为无限调用自身。

# php - 使用 php 回显 html 文件

> ID：10442566
> 
> 赞同：0
> 
> 时间：2012-05-04T04:05:24.100
> 
> 标签：php, html, web

```
<html>
<body>
<?php
$html='<html>
<body>
<p>
Illustrating wget -r , with images too  
</p>
<p>
This is the first image
    <img src="abc.JPG" alt="First Captured Image"/>
</p>
<p>
This is the second image
<img src="def.JPG" alt="Second Captured Image"/>
</p>
</body>
</html>'; 
echo($html);
$dom = new domDocument;
@$dom->loadHTML($html);

$dom->preserveWhiteSpace = false;
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
echo $image->getAttribute('src');
echo $alter->get Attribute('alt');
echo "<img sr='$image'/>";  
}

</body>
</html> 
```

我的代码是把上面html代码中的图片解析出来，然后再用php回显一下。这是我的示例代码。如何回显上面的 html 代码，使用 php，并以相同的方式显示？

我尝试这样做，但我无法将图像放置在与检索位置完全相同的位置。我不想使用“标题（内容）”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:46:39.910

Your statement `echo "<img sr='$image'/>";` is incorrect. The correct one is

```
echo "<img src='$image'/>"; 
```

# objective-c - NSUserDefaults erased due to memory crash?

> ID：10442573
> 
> 赞同：0
> 
> 时间：2012-05-04T04:06:29.067
> 
> 标签：objective-c, ios, memory, nsuserdefaults

I have a situation, where my IOS app crashes due to low memory. I notice that during such crashes, my UserDefault values are also erased. Anyone had any similar experience? Or are they (memory crash and user defaults erase) un-related in my case? (Do I need to look out for other reasons for erasing the User defaults?)

Thanks for your help

Edit: The issue was somewhere else. Memory crash does not erase user defaults, once you synchronize.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:13:33.373

I'm pretty sure you haven't written them to disk regularily:

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

# c++ - 为什么mysql重新连接失败并导致段错误？

> ID：10442576
> 
> 赞同：0
> 
> 时间：2012-05-04T04:06:38.140
> 
> 标签：c++, mysql, database, segmentation-fault

这是我的程序崩溃的堆栈跟踪

```
Program terminated with signal 11, Segmentation fault.
#0  0x00002ae1caf18008 in safer_scalable_free ()
   from /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2
(gdb) bt
#0  0x00002ae1caf18008 in safer_scalable_free ()
   from /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc.so.2
#1  0x00002ae1cad12189 in free ()
   from /home/is_admin/tbb40_233oss/build/linux_intel64_gcc_cc4.1.2_libc2.5_kernel2.6.18_release/libtbbmalloc_proxy.so.2
#2  0x00002ae1cb56fb60 in mysql_close_free (mysql=0x2ae1cc491600)
    at /home/is_admin/MRPlatform/src/mysql-5.5.17/sql-common/client.c:3643
#3  0x00002ae1cb570ef1 in mysql_close (mysql=0x2ae1cc491600) at /home/is_admin/MRPlatform/src/mysql-5.5.17/sql-common/client.c:3744
#4  0x00002ae1cb573ad4 in mysql_reconnect (mysql=0x2ae1cc491600)
    at /home/is_admin/MRPlatform/src/mysql-5.5.17/sql-common/client.c:3561
#5  0x00002ae1cb573c37 in cli_advanced_command (mysql=0x2ae1cc491600, command=<value optimized out>, header=0x0, header_length=0, 
    arg=0x0, arg_length=0, skip_check=0 '\000', stmt=0x0) at /home/is_admin/MRPlatform/src/mysql-5.5.17/sql-common/client.c:852
#6  0x00002ae1cb56a3e1 in mysql_ping (mysql=0x1) at /home/is_admin/MRPlatform/src/mysql-5.5.17/libmysql/libmysql.c:969
#7  0x000000000042ded6 in TDRNetwork::DataAccess::ExecuteSQL(char const*) ()
#8  0x000000000041c511 in MRSystem::Master::Process(TDRNetwork::JobMsg*) ()
#9  0x000000000042a33f in MRSystem::MasterWorker::Run() ()
#10 0x000000000042fc99 in TDRNetwork::Thread::StartThread(void*) ()
#11 0x00000033b080673d in start_thread () from /lib64/libpthread.so.0
#12 0x00000033b00d44bd in clone () from /lib64/libc.so.6 
```

在第 6 帧，我注意到 mysql=0x1 越界。如果不采取任何措施，似乎 mysql 链接会在 8 小时后自动关闭。那么为什么重新连接失败呢？谢谢。

编辑：

错误发生在 client.c:3643 my_free(mysql->info_buffer);

```
#if defined(EMBEDDED_LIBRARY) || MYSQL_VERSION_ID >= 50100
  my_free(mysql->info_buffer);
  mysql->info_buffer= 0;
#endif 
```

并且 info_buffer 超出范围：

```
(gdb) p *mysql
$2 = {net = {vio = 0x0, buff = 0x0, buff_end = 0x2aaaabcf5080 "", write_pos = 0x2aaaabcf3080 "", read_pos = 0x2aaaabcf3080 "", 
    fd = 10, remain_in_buf = 0, length = 0, buf_length = 0, where_b = 0, max_packet = 8192, max_packet_size = 1073741824, 
    pkt_nr = 1, compress_pkt_nr = 0, write_timeout = 31536000, read_timeout = 31536000, retry_count = 1, fcntl = 0, 
    return_status = 0x0, reading_or_writing = 0 '\000', save_char = 0 '\000', unused1 = 0 '\000', unused2 = 0 '\000', 
    compress = 0 '\000', unused3 = 0 '\000', unused = 0x0, last_errno = 0, error = 2 '\002', unused4 = 0 '\000', 
    unused5 = 0 '\000', last_error = '\000' <repeats 511 times>, sqlstate = "00000", extension = 0x0}, connector_fd = 0x0, 
  host = 0x2aaaabea34b8 "127.0.0.1", user = 0x2aaaabeb3bf8 "", passwd = 0x2aaaabeb3c00 "\370;ë«ª*", unix_socket = 0x0, 
  server_version = 0x2aaaabea34d0 "5.5.17", host_info = 0x2aaaabea34a0 "", info = 0x0, db = 0x2aaaabeb3c08 "", 
  charset = 0x2aaaab661060, fields = 0x0, field_alloc = {free = 0x0, used = 0x0, pre_alloc = 0x0, min_malloc = 32, 
    block_size = 8160, block_num = 4, first_block_usage = 0, error_handler = 0}, affected_rows = 18446744073709551615, 
  insert_id = 0, extra_info = 0, thread_id = 472, packet_length = 7, port = 3306, client_flag = 959117, 
  server_capabilities = 18446744071563114495, protocol_version = 10, field_count = 0, server_status = 2, server_language = 33, 
  warning_count = 0, options = {connect_timeout = 0, read_timeout = 0, write_timeout = 0, port = 0, protocol = 0, client_flag = 0, 
    host = 0x0, user = 0x0, password = 0x0, unix_socket = 0x0, db = 0x0, init_commands = 0x0, my_cnf_file = 0x0, 
    my_cnf_group = 0x0, charset_dir = 0x0, charset_name = 0x0, ssl_key = 0x0, ssl_cert = 0x0, ssl_ca = 0x0, ssl_capath = 0x0, 
    ssl_cipher = 0x0, shared_memory_base_name = 0x0, max_allowed_packet = 0, use_ssl = 0 '\000', compress = 0 '\000', 
    named_pipe = 0 '\000', unused1 = 0 '\000', unused2 = 0 '\000', unused3 = 0 '\000', unused4 = 0 '\000', 
    methods_to_use = MYSQL_OPT_CONNECT_TIMEOUT, client_ip = 0x0, secure_auth = 0 '\000', report_data_truncation = 0 '\000', 
    local_infile_init = 0, local_infile_read = 0, local_infile_end = 0, local_infile_error = 0, local_infile_userdata = 0x0, 
    extension = 0x0}, status = MYSQL_STATUS_READY, free_me = 0 '\000', reconnect = 1 '\001', scramble = "[k)(,EVacN<#96B(?E{_", 
  unused1 = 0 '\000', unused2 = 0x0, unused3 = 0x0, unused4 = 0x0, unused5 = 0x0, stmts = 0x0, methods = 0x2aaaab650100, 
  thd = 0x0, unbuffered_fetch_owner = 0x0, **info_buffer = 0x1 <Address 0x1 out of bounds>**, extension = 0x2aaaabebb708} 
```

# c++ - 检测视频是否在 C++ 中没有音频，最好使用 Qt Phonon

> ID：10442579
> 
> 赞同：3
> 
> 时间：2012-05-04T04:06:58.213
> 
> 标签：c++, qt, audio

如果 Phonon 和 Qt，我正在创建一个视频播放器。一切正常，但是当我的播放列表中有一个没有音频的视频时，我希望播放另一个音频。我怎样才能做到这一点？我的意思是，我怎样才能检测到视频没有音频？

编辑：没有音频我的意思是“没有音频通道”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:42:42.617

Qt 5 可能会帮助你。查看[Phonon::Gstreamer::MediaObject](http://qt-project.org/doc/qt-5.0/phonon-gstreamer-mediaobject.html)。API 类似于普通的 MediaObject，但有一些附加功能。你想要的是`audioAvailable()`.

# iphone - 架构 i386 的未定义符号：

> ID：10442583
> 
> 赞同：-1
> 
> 时间：2012-05-04T04:07:21.723
> 
> 标签：iphone, ios, ipad

我正在集成 CHartBoost，在集成时我遇到的问题很少。我附上了截图。

架构 i386 的未定义符号：是缺少库吗？

![在此处输入图像描述](../Images/014459988649058a4317a0ebec86af10.png)

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:09:40.453

将 QuartzCore 添加到目标的链接库中，[如本答案中所述](https://stackoverflow.com/a/6961788/1218876)。

# jquery - 使用 jQuery 进行休息调用

> ID：10442588
> 
> 赞同：0
> 
> 时间：2012-05-04T04:07:47.903
> 
> 标签：jquery, ajax, rest, get

我正在尝试使用 jQuery 从以下 URL 获取返回的信息：

```
Var URL = http://getdeeplink.linksynergy.com/createcustomlink.shtml?token=2e9830b7ed11c5dee96dd4b4a9e83da216c9d583ae1e617bcafdd6eb004e3c86&mid=13508&murl=http://itunes.apple.com/us/music-video/if-you-think-this-song-is/id413824018?uo=4 
```

我已经尝试了下面列出的两种方法，但在这两种情况下，程序都只是跑过代码块，就像什么都没发生一样。谁能告诉我我做错了什么？

```
 $.ajax({ 
             type: "GET",
             dataType: "jsonp",
             url: URL,
             success: function(data){       
                alert(data);
             }
         }); 
```

第二种方法：

```
 $.get(URL, function(data) {
       alert('Load was performed.');
       alert(data);
      }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T04:38:30.333

首先，如果您请求 URL 的服务器的域与您的页面的域不同，那么您可能会遇到[same-origin-limitations](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)。

其次，如果它不是同一个来源并且您尝试使用 JSONP（看起来您可能是），那么您的服务器将需要专门支持[JSONP](http://en.wikipedia.org/wiki/JSONP)并将结果打包为 JSONP 格式，这意味着将结果格式化为可执行文件脚本，也意味着尊重`callback=xxxx`URL 上的查询参数。

第三，您在问题中输入的这段 javascript 看起来好像在 URL 周围缺少引号以使其成为合法的 javascript，并且`var`都是小写的：

```
var URL = "http://getdeeplink.linksynergy.com/createcustomlink.shtml?token=2e9830b7ed11c5dee96dd4b4a9e83da216c9d583ae1e617bcafdd6eb004e3c86&mid=13508&murl=http://itunes.apple.com/us/music-video/if-you-think-this-song-is/id413824018?uo=4"; 
```

为了进一步调试，我建议您为 ajax 调用附加一个错误处理程序，看看它是否提供了任何进一步的信息。如果某些内容由于同源问题而被阻止，或者您只是有其他脚本错误正在停止执行您的脚本，那么您的浏览器错误控制台或调试控制台也可能会为您提供有用的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:17:15.927

由于同源限制，您不能执行这样的 ajax 调用。您需要做的是设置一个服务器端页面，您的 java 脚本将在“getdeeplink.php”上执行 ajax 调用（我假设您在 PHP 中执行此操作）

你的 javascript

```
$.get('getdeeplink.php',data,function(){.....}); 
```

它在 getdeeplink.php 中，您可以在其中执行 REST 调用并将响应回显到 ajax 处理程序

在`getdeeplink.php`

```
$rest_response = file_get_contents('http://getdeeplink.linksynergy.com/createcustomlink.shtml?token=2e9830b7ed11c5dee96dd4b4a9e83da216c9d583ae1e617bcafdd6eb004e3c86&mid=13508&murl=http://itunes.apple.com/us/music-video/if-you-think-this-song-is/id413824018?uo=4');
echo json_encode($rest_response); //send the result to the ajax handler 
```

# php - 在 Eclipse PHP 下设置 MySQL 问题

> ID：10442597
> 
> 赞同：1
> 
> 时间：2012-05-04T04:08:31.860
> 
> 标签：php, mysql, eclipse, xampp

我在 Eclipse PHP 的 PHP 文件下有一段代码。

```
$username = mysql_real_escape_string( $username ); 
```

它会生成错误警告：

> mysql_real_escape_string() [function.mysql-real-escape-string]：无法在第 37 行的 /web_development/php_work/new_test/test.php 中建立到服务器的链接

看起来 Eclipse PHP 无法连接到 XAMPP 的 MySQL，那么我该如何解决呢？

我添加了两行

```
 @mysql_connect('localhost','root', '') or die('Could not connect to : ' . mysql_error());

    @mysql_select_db('test') or die( "-Unable to select database"); 
```

但 Eclipse 仍然让我失望。

```
 mysql_connect() [<a href='function.mysql-connect'>function.mysql-connect</a>]: Can't connect to local MySQL server through socket '/tmp/mysql.sock' 
```

谢谢。

# objective-c - 目标 c：在 UIWebview 中适合 twitter 页面宽度

> ID：10442602
> 
> 赞同：0
> 
> 时间：2012-05-04T04:08:49.523
> 
> 标签：objective-c, ios, uiwebview, width, sizetofit

我有一个 UIWebview，其中加载了一个 twitter 页面。因为 twitter 是从移动设备打开的，所以它会打开移动 twitter，它具有特定的宽度，具体取决于设备和设备方向。现在我的查询：我的 UIWebview 的宽度比移动 Twitter 的宽度短，因此用户必须横向滚动才能阅读内容。我不希望这样，并且想要更改 twitter 页面的缩放或者最好是宽度，以便它可以适合我的 uiwebview。高度很好，向上或向下滚动是正常的。我尝试在“webViewDidFinishLoad”中使用“setScalesPageTofit”，这会显示整个 twitter 页面超出 webview 范围。我也尝试过使用“sizeTofit”但没有成功。如果需要更多详细信息，请告诉我非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:34:59.070

查看此 SO 帖子：[在 UIWebView 中获取 iPhone 的移动 twitter webapp](https://stackoverflow.com/questions/9639275/getting-iphones-mobile-twitter-webapp-inside-uiwebview)。发布问题的人回答了他自己的问题。

诀窍似乎是设置正确的“设备宽度”。

# database - 什么类型的协会

> ID：10442603
> 
> 赞同：0
> 
> 时间：2012-05-04T04:09:00.557
> 
> 标签：database

我有 PATIENT 和 VISIT 表。
VISIT 具有作为 Patient_id 的外键和重复的行。但是 PATIENT 没有来自 VISIT 的任何外键。

PATIENT 和 VISIT 存在什么类型的关系。一对多？还是多对一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:14:23.573

一位患者有很多次就诊，所以一对多... ;)

# iphone - UIButton 在我更改视图并切换回来后死了

> ID：10442610
> 
> 赞同：0
> 
> 时间：2012-05-04T04:09:41.117
> 
> 标签：iphone, objective-c, xcode, ipad, motion-detection

所以我创建了一个程序，当设备摇晃时会发出声音。有一个按钮，当点击该按钮时，可以随时停止播放声音（这是“重置”方法）。还有另一个按钮，按下时会显示另一个视图（这是“infoView”方法）。当我转到“infoView”然后返回第一个视图时会出现问题。摇动设备时声音仍然播放，但“重置”按钮变得无响应。这是我到目前为止所拥有的，任何帮助将不胜感激。

PS。我想知道它是否与FirstResponders有关？我仍在努力围绕 FirstResponders。

.h

```
#import <UIKit/UIKit.h>
#import "AVfoundation/AVfoundation.h"

@interface OldTvViewController : UIViewController{
AVAudioPlayer *audioPlayer;
}
-(IBAction)reset;
-(IBAction)infoView:(id)sender;
@end 
```

他们

```
#import "OldTvViewController.h"
#import "AudioToolBox/AudioToolBox.h"
#import "infoViewController.h"

@implementation OldTvViewController

-(IBAction)infoView:(id)sender{
infoViewController *second = [[infoViewController alloc] initWithNibName:Nil bundle:Nil];
[self presentModalViewController:second animated:YES];
[second release];
}

-(BOOL) canBecomeFirstResponder{
return YES;
}

-(void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event{

if (event.subtype == UIEventSubtypeMotionShake) {

    //Play throw sound
    if(audioPlayer.playing){
        [audioPlayer stop];
    } else{
        NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/bomb.mp3",[[NSBundle mainBundle] resourcePath]]];
        NSError *error;
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
        audioPlayer.numberOfLoops = 0; 
        [audioPlayer play];    
    }

}

}

-(IBAction)reset{
[audioPlayer stop];
}

-(void)viewDidAppear:(BOOL)animated{
[self becomeFirstResponder];
[super viewDidAppear:animated];
}

- (void)viewDidLoad
{
[super viewDidLoad];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:22:05.007

当您转到信息视图时，您可以在该类中的所有可用按钮处尝试此代码。

```
-(void)viewWillDisapeers
 {

  [audioPlayer stop];

 } 
```

或添加此方法

```
-(IBAction)infoView:(id)sender
 {
 infoViewController *second = [[infoViewController alloc] initWithNibName:Nil bundle:Nil];
 [self presentModalViewController:second animated:YES];
 [audioPlayer stop];
 [second release];
 } 
```

# linux - 可以配置生成.h文件吗？

> ID：10442612
> 
> 赞同：1
> 
> 时间：2012-05-04T04:10:00.990
> 
> 标签：linux, autotools, configure

在 Linux 上，当我执行`./configure`它时会生成头文件和 .c 文件（除了 Makefiles），对吗？我怎样才能得到配置来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:39:22.990

您可能想要创建一个 configure.ac（但取决于 autoconf 版本），但请阅读[此处](http://markuskimius.wikidot.com/programming%3atut%3aautotools:2)，让您了解应该创建什么以及自动生成什么。它很好地涵盖了 autotools 主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:39:22.637

它通常用于生成配置标头，其中包含各种定义（通常存在或不存在库和函数）。但这只有在自动工具被指示创建配置时才会发生。

您可以在 configure.ac （自动工具的输入文件）中定义去往（以及确切地去往哪个标题）。请参阅 AC_CONFIG_HEADERS、AC_CHECK_HEADER、AC_CHECK_LIB 和类似的宏。有关详细信息，请参阅[autoconf 手册](http://www.gnu.org/software/autoconf/manual/autoconf.html)。还阅读完整的教程 jasonw 链接。并看看在一些现有项目中是如何完成的。

# ruby-on-rails - 如何通过 rails 控制台创建 Authlogic 用户？

> ID：10442621
> 
> 赞同：1
> 
> 时间：2012-05-04T04:11:13.933
> 
> 标签：ruby-on-rails, paperclip, authlogic

我正在使用这段代码：

```
User.new({:email => "guy@gmail.com",  :password => "pass", :name => "guy"}).save(false) 
```

我不断收到此错误：

```
AWS::S3::MissingAccessKey: You did not provide both required access keys. Please provide the access_key_id and the secret_access_key. 
```

我使用回形针将用户照片存储到 S3，但不需要注册。不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:30:11.497

Authlogic需要password_confirmation，所以你需要做`new_user=User.new {|u| u.email='his@email.com', u.password=u.password_confirmation='his_password'}.save!`

请注意，此类用户尚未激活。您可以使用激活它们`new_user.activate!`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:41:36.253

你能传递你的用户模型代码吗？当您通过跳过所有回调/验证来保存用户实例时，它不应该给您照片模型的错误。但是，如果您共享您的用户和照片模型代码（以及如果您使用的观察者），我可以查看它们。

# sql-update - UPDATE 语句不更新数据库

> ID：10442625
> 
> 赞同：0
> 
> 时间：2012-05-04T04:11:59.240
> 
> 标签：sql-update

```
Protected Sub dgResult_ItemCommand(ByVal source As System.Object, ByVal e As System.Web.UI.WebControls.DataGridCommandEventArgs) Handles dgResult.ItemCommand

If strErr = "" Then
Dim ddl As DropDownList = CType(e.Item.FindControl("ddlClassificationType"), DropDownList)

Dim defaultValue As Boolean = ddl.SelectedItem.Text.Contains("*")

Dim originalValue As String = String.Empty

If defaultValue = False Then

'update AppDetail

strErr = appDetailDBA.UpdateAppDetail(appCode, subCode, ddl.SelectedValue, Today.Date)

End If

   If strErr = "" Then

 lblError.Text = msgClass.successMsg(subCodeName, "1")

        Else

            lblError.Text = msgClass.ErrorMsg(subCodeName, "1")

        End If

        dgResult.DataSource = appDetailDBA.getDataClassification(empID, txtSearch.Text)

    dgResult.DataBind()

    End Sub

Function UpdateAppDetail(ByVal appCode As String, ByVal subCode As String, ByVal classType As String, ByVal classEffDte As String)

Dim strErr As String = ""
        Dim con As New SqlConnection(kiosk_loginConnStr)
        con.Open()

        Try
            Dim sqlCommand As SqlCommand = con.CreateCommand()
            Dim sql As String = "Update AppDetail SET ClassificationType = '" + classType + "', ClassificationEffDate = '" + classEffDte + "' WHERE AppCode = '" + appCode + "'" & _
                              " AND SubCode = '" + subCode + "'"

            sqlCommand.CommandText = sql
            sqlCommand.ExecuteNonQuery()
        Catch ex As Exception
            strErr = ex.Message
        Finally
            con.Close()
        End Try

        Return strErr
    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:17:00.563

您使用的是什么类型的数据库？您是否将更改提交到数据库？

[更新（来自下面的讨论）] 似乎 VB 会自动提交所有命令，除非您明确告诉它不要这样做，所以这不是问题。

[更新 2] 我的工作原理是数据库配置不正确，如[ExecuteNonQuery() Not Working](https://stackoverflow.com/questions/4295853/executenonquery-not-working)

另一个可能的解释是：[http ://social.msdn.microsoft.com/Forums/en-US/vblanguage/thread/dbbf8025-9f53-4862-8705-62a106fe2114](http://social.msdn.microsoft.com/Forums/en-US/vblanguage/thread/dbbf8025-9f53-4862-8705-62a106fe2114)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:22:21.573

我的建议是尝试运行 sqlCommand.Commit()，这“应该”将您对数据库所做的任何更改存储到实际数据库中。请注意，我的实际“命令”可能已关闭，但想法就在那里。如果您可以在 sql 命令上提交，请尝试在连接级别上提交。

# asp.net-mvc - 为什么这三行代码在 asp.net mvc 中使用大量 CPU？

> ID：10442628
> 
> 赞同：0
> 
> 时间：2012-05-04T04:12:43.997
> 
> 标签：asp.net-mvc, performance

```
HttpContext.Current.RewritePath(Request.ApplicationPath);
IHttpHandler httpHandler = new MvcHttpHandler();
httpHandler.ProcessRequest(HttpContext.Current); 
```

我正在使用性能测量工具，我发现上面的代码使用了大量的 CPU，有人知道如何优化它吗？提前感谢您的建议！

# apache - Apache 的 access.log 过大对性能有何影响？

> ID：10442631
> 
> 赞同：4
> 
> 时间：2012-05-04T04:13:14.670
> 
> 标签：apache

如果 access.log 或 error.log 等日志文件变得非常大，那么大的问题会影响 Apache 运行或用户访问的性能吗？据我了解，Apache 不会将整个日志读入内存，而只是利用文件句柄进行写入。正确的？如果是这样，除了文件系统问题之外，我不必每次都手动删除日志。如果我错了，请帮助并纠正我。或者在运行它时我应该注意任何 Apache Log I/O 问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:08:07.900

好吧，我完全同意你的看法。根据我的理解，apache 使用处理程序访问日志文件，并将新消息附加到文件末尾。这样，一个巨大的日志文件在写入文件时不会产生影响。但是，如果您想访问文件或使用某种日志监控工具打开它，那么巨大的文件大小会减慢读取文件的过程。

所以我建议你使用日志轮换来获得更好的最终结果。

此建议直接来自 apche 网站。

> 日志轮换

即使在中等繁忙的服务器上，存储在日志文件中的信息量也非常大。每 10,000 个请求，访问日志文件通常会增长 1 MB 或更多。因此，有必要通过移动或删除现有日志来定期轮换日志文件。这在服务器运行时无法完成，因为只要 Apache 保持文件打开，它就会继续写入旧的日志文件。相反，必须在移动或删除日志文件后重新启动服务器，以便打开新的日志文件。

[来自 Apache 软件基金会网站](http://httpd.apache.org/docs/2.2/logs.html)

# spell-checking - Metaphone 3 算法是什么？

> ID：10442633
> 
> 赞同：11
> 
> 时间：2012-05-04T04:13:30.913
> 
> 标签：spell-checking, phonetics, metaphone

我想自己编写 Metaphone 3 算法。有说明吗？我知道源代码可以出售，但这不是我想要的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T10:40:15.103

由于作者 (Lawrence Philips) 决定将算法本身商业化，因此您很可能找不到描述。询问的好地方是邮件列表：[https ://lists.sourceforge.net/lists/listinfo/aspell-metaphone](https://lists.sourceforge.net/lists/listinfo/aspell-metaphone)

但您也可以查看源代码（即代码注释）以了解算法的工作原理： [http ://code.google.com/p/google-refine/source/browse/trunk/main/src/com/google /refine/clustering/binning/Metaphone3.java?r=2029](http://code.google.com/p/google-refine/source/browse/trunk/main/src/com/google/refine/clustering/binning/Metaphone3.java?r=2029)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-09T11:52:19.437

来自 Wikipedia，[Metaphone 算法](http://en.wikipedia.org/wiki/Metaphone)是

> Metaphone 是一种语音算法，该算法于 1990 年发布，用于通过单词的英语发音来索引单词。它通过使用有关英语拼写和发音的变化和不一致的信息来从根本上改进 Soundex 算法，以产生更准确的编码，从而更好地匹配听起来相似的单词和名称 [...]

变音器 3

> [...] 对于英语单词、美国人熟悉的非英语单词以及美国常见的名字和姓氏，根据现代工程标准针对准备了正确的编码。

该算法的[概述](http://www.fearme.com/misc/alg/node131.html)是：

> Metaphone 算法首先从正在处理的单词中删除非英语字母和字符。接下来，所有元音也被丢弃，除非单词以初始元音开头，在这种情况下，除了初始元音之外的所有元音都被丢弃。最后，所有辅音和辅音组都映射到它们的变音代码。将辅音及其组分组然后映射到变音位代码的规则相当复杂；有关这些转换的完整列表，请查看源代码部分中的注释。

现在，到你*真正的*问题：

如果您对 Metaphone 3 算法的细节感兴趣，我认为您运气不好（没有购买源代码，理解它并自己重新创建它）：*不*制作算法的全部意义（您可以购买的来源是一个实例）公开的是，如果不支付作者的开发工作费用就无法重新创建它（提供您正在寻找的“精确算法”相当于提供实际代码本身）。考虑上面的引述：算法的开发涉及“[...] 编码的测试工具”。除非您碰巧拥有这样的测试工具或能够创建一个，否则您将无法复制该算法。

另一方面，前两次迭代（Metaphone 和 Double Metaphone）*的实现是*免费提供的（上面的 Wikipedia 链接包含许多指向不同语言实现的链接），这意味着您有一个很好的起点来理解什么算法差不多，然后在您认为合适的情况下对其进行改进（例如，通过创建和使用适当的测试工具）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-25T05:55:49.217

@Bo 的链接现在指的是（现在已失效）项目的整个源代码。

因此这里是直接链接到 Metaphone 3 源代码的新链接 [https://searchcode.com/codesearch/view/2366000/](https://searchcode.com/codesearch/view/2366000/)

劳伦斯·飞利浦

> Metaphone 3 旨在返回一个*近似*音调（和一个备用的近似音调），对于英语 * 单词和大多数在美国熟悉的名字，发音*相似*，应该是相同的。* 键值*不是*单词的*精确*语音，甚至音位，* 表示。这是因为一定程度的“模糊性”已被证明*有助于补偿发音变化以及*听错的发音。例如，虽然美国人通常不知道它，但 * 字母 's' 通常在诸如“sounds”之类的词的末尾发音为 'z'。
> 
> 编码的“近似”方面是根据以下规则实现的：
> 
> * * (1) 所有元音都被编码为相同的值 - 'A'。如果参数 encodeVowels * 设置为 false，则只会对*初始*元音进行编码。如果 encodeVowels 设置 * 为 true，'A' 将在单词中任何元音通常 * 发音的所有位置进行编码。'W' 和 'Y' 被视为元音。尽管 * 'W' 和 'Y' 的发音在不同情况下存在差异，导致它们在某些情况下被 * 归类为元音，而在其他情况下被归类为辅音，但出于“模糊性”的目的
> 
> * * (2) 浊辅音和清辅音对映射到相同的编码值。这意味着：
> * 'D' 和 'T' -> 'T'
> * 'B' 和 'P' -> 'P'
> * 'G' 和 'K' -> 'K'
> * 'Z' 和 'S ' -> 'S'
> * 'V' and 'F' -> 'F'
> 
> * * - 除了上述浊音/清音规则之外，'CH' 和 'SH' -> 'X'，其中 'X' *表示 Metaphone 3 编码中的“-SH-”和“-CH-”声音。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-18T22:50:35.333

*我认为让一般社区被拒绝算法（不是代码）是错误的*

我是卖源码的，所以算法没有隐藏。我要 40.00 美元的源代码副本，并要求其他使用 Metaphone 3 为其软件或服务收费的人向我支付许可费，并要求源代码不要由其他人分发（除了对于我为 Google Refine 做的一个例外 - 我只能要求您不要重新分发与 Refine 包分开的 Metaphone 3 副本。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-22T09:16:57.483

实际上 Metaphone3 是一种算法，它有许多非常具体的规则，是一些测试用例分析的结果。因此，它不仅是一种纯粹的算法，而且还带有额外的领域知识。为了获得这些知识和具体规则，作者需要付出很大的努力。这就是为什么这个算法不是开源的。

无论如何，有一个替代方案是开源的：Double Metaphone。见这里：[https ://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/language/DoubleMetaphone.html](https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/language/DoubleMetaphone.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-13T21:11:43.420

这不是商业帖子，我与所有者没有任何关系，但值得一提的是，Metaphone3 的实现可作为商业软件从其创建者[amporphics.com 获得](http://www.amorphics.com/)。它看起来像他的私人商店。这是一个 Java 应用程序，但我购买了 Python 版本，它运行良好。

为什么选择[Metaphone3？](http://www.amorphics.com/index.html)页面说：

> 拼写变化的一种常见解决方案是数据库方法。已经完成了一些非常令人印象深刻的工作，积累了来自世界各地的个人名字变化。（当然，当零售这些数据库的公司宣传他们也使用某些版本的 Metaphone 来提高他们的灵活性时，我们总是很高兴 :-)）
> 
> 但是 - 这种方法存在一些问题：
> 
> 1.  它们只有在遇到拼写变化或数据库中尚不存在的新单词或名称时才能正常工作。
> 
> 然后他们根本不工作。
> 
> Metaphone 3 是一种算法方法，可为您输入的任何内容提供语音查找键。
> 
> 2.  个人姓名，即名字和姓氏，与公司名称不同。事实上，公司或机构的名称可能包含任何类型的词，而不仅仅是名称。数据库解决方案通常不涵盖常规“字典”单词的可能拼写变化或拼写错误。或者如果他们这样做，不是很彻底。
> 
> Metaphone 3 的开发是为了解释英语单词中常见的所有拼写变化，在美国和欧洲发现的名字和姓氏，以及美国人熟悉母语发音的非英语单词。它不关心你想匹配什么样的词。

对于它的价值，我们许可了代码，因为它价格实惠且易于使用。我还不能谈论性能。PyPi 上有很好的替代品，但我目前找不到它们。

# ruby-on-rails - 无法访问控制器中的 current_user（设计）？

> ID：10442635
> 
> 赞同：0
> 
> 时间：2012-05-04T04:13:46.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, devise

问题很简单，但我在任何地方都找不到答案。

我有一个控制器，要求我可以访问 Devise 中的当前登录用户。但是当我尝试`current_user`从控制器访问时，结果是`nil`

但是在模型和视图中访问它就可以了。

我试着把

```
 before_filter :authenticate_user! 
```

在应用程序控制器或我的控制器上，但它不起作用

我应该怎么做才能使这项工作按预期进行？

# android - 调用默认相机并将图片保存在用户定义的位置，该位置不是图库的一部分

> ID：10442647
> 
> 赞同：1
> 
> 时间：2012-05-04T04:15:13.930
> 
> 标签：android, android-camera, android-camera-intent

**我正在尝试从我的应用程序调用默认设备相机以使用意图android.provider.MediaStore.ACTION_IMAGE_CAPTURE**拍照。一切似乎都工作正常，除了当我单击并保存它存储在两个位置的特定图像时

```
1\. At the default camera location.
2\. At the location which i am passing with intent. 
```

我**只希望第二个选项**发生，而不是第一个。我认为在使用的定义位置创建一个 .nomedia 文件可以确保图片不会被列为图库的一部分，但后来我发现图片存储在两个位置。

我的相关代码部分是：

在活动中：

```
Intent intentCamera = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
try {
    tempDir = Environment.getExternalStorageDirectory();
    // place where to store camera taken picture
    photo = createTemporaryFile("picture", ".jpg", tempDir);
    photo.delete();
    } catch (Exception e) {
                        Toast.makeText(this, "Please check SD card! Error in fetching image",
                                Toast.LENGTH_SHORT).show();
                   }
 if (photo != null) {
           Uri mImageUri = Uri.fromFile(photo);
           Log.i(TAG, "" + mImageUri.toString());
           intentCamera.putExtra(MediaStore.EXTRA_OUTPUT, mImageUri);
 } 
startActivityForResult(intentCamera, CAMERA_PIC_REQUEST); 
```

对应的方法。

```
public File createTemporaryFile(String part, String ext,File tempDir) throws Exception {
tempDir = new File(tempDir.getAbsolutePath() +"/temp/");
if (!tempDir.exists()) {
   tempDir.mkdir();
   }
createNoMediaFile(tempDir.getAbsolutePath());
return File.createTempFile(part, ext, tempDir);
} 
```

有没有办法可以避免 1 即将图像保存到默认画廊位置。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:18:35.847

onActivityResult 会返回图像的 Uri，您可以检索图像的路径，从该位置复制图像并保存在您想要的位置，然后从图库中删除。

# objective-c - 静态iOS库中无法识别的选择器调用类别方法

> ID：10442653
> 
> 赞同：14
> 
> 时间：2012-05-04T04:16:29.127
> 
> 标签：objective-c, ios, unrecognized-selector

我正在使用一些第三方软件来帮助使用 Xcode 4.3.2 编写 iPad 应用程序。该软件是开源的，通常经过设置，因此其代码将与开发人员为应用程序编写的任何代码一起编译。因为我在很多地方都在使用该软件，所以我决定将它构建为 iOS 模拟器的静态库。

我能够构建库，并将一个应用程序转换为链接到该库，而不是编译原始源代码。但是，当我在模拟器上运行应用程序时，我收到一条错误消息，提示*unrecognized selector sent to instance*。

我已经验证该程序已成功使用部分静态库。但是，有一段代码尝试调用对象上的方法，并且发生故障。被调用的方法实际上并未在该对象的接口中定义。相反，它是在为该对象的类定义类别的附加模块中提供的。该模块的头文件已正确包含，编译器应该能够找到类别方法并将其应用于对象，但在运行时，出现上述错误。

我使用“nm”命令来验证静态库中是否存在类别方法。以下是输出示例：

```
nm libStaticLibrary.a | grep categoryMethod
00000130 t -[SomeClass(Category) categoryMethod:]
0000354c s -[SomeClass(Category) categoryMethod:].eh 
```

人们对如何使这个库与所需的应用程序正常工作有什么想法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-04T05:51:53.070

您的第 3 方框架可能使用现有（苹果）类上的类别。但是要加载/查找您需要`-ObjC`在构建设置中添加标志的类别`Other Linker Flags`

![构建设置](../Images/89f3ba3b366a11626425c1d0ef1d8f6f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-08T11:58:32.533

Pfitz 的回答很好，但这会导致编译器将一堆未使用的二进制文件加载到您的项目中，这不是您想要的。请参阅此答案以了解为什么[https://stackoverflow.com/a/22264650/1363997](https://stackoverflow.com/a/22264650/1363997)

这是最好的解决方案：

1）从左侧面板（文件夹导航器）中选择您的**项目**
目标 2）选择**“构建阶段”**点击
3）展开**“编译源”**单元格
4）点击底部的加号按钮，然后添加您的类别的 .m 文件

完毕！

注意：您必须通过自己在文件夹中导航来搜索文件，不要在搜索字段中输入文件名

# c# - 如何在 ASP.NET MVC 3 中将文件上传限制为 JPG、PNG 和 GIF

> ID：10442654
> 
> 赞同：0
> 
> 时间：2012-05-04T04:16:35.720
> 
> 标签：c#, javascript, jquery, html, asp.net-mvc-3

我`<input type="file" />`在 HTML 表单中使用了一个简单的输入框，并且我想强制只能上传 JPG、PNG 和 GIF 文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T04:20:59.077

你可以检查这个链接，[CodeProject：图片上传](http://www.codeproject.com/Articles/79043/An-Example-ASP-NET-MVC-Web-Project-to-Upload-and-D)

```
 $file = $("#yourFileuploadID");
                var $filePath = $.trim($file.val());
                if ($filePath == "") {
                    alert("Please browse a file to upload");
                    return;
                }

                var $ext = $filePath.split(".").pop().toLowerCase();
                var $allow = new Array("gif", "png", "jpg", "jpeg");
                if ($.inArray($ext, $allow) == -1) {
                    alert("Only image files are accepted, please browse a image file");
                    return;
                } 
```

PS：最好有服务器端验证，在客户端禁用javascript时会很方便。确保你检查两者

# iphone - AVPlayer后台播放问题

> ID：10442661
> 
> 赞同：0
> 
> 时间：2012-05-04T04:18:36.727
> 
> 标签：iphone, objective-c, avplayer

我正在使用 AVPlayer 从 Url 播放音乐，由于缓冲，单击播放按钮需要一些时间才能播放。我在下面解释了两种情况。

成功案例：我点击播放按钮，AVPlayer 缓冲并开始播放。播放器开始播放后，我按下主页按钮，应用程序进入后台并继续播放。

失败案例：我点击播放按钮，AVPlayer 开始缓冲。我将按下主页按钮，应用程序会在 AVPlayer 缓冲和开始播放之前进入后台。即使已经发出播放命令，AVPlayer 也不会在后台播放。

和建议？

提前致谢，

诺伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T16:52:19.647

如果缓冲时间超过 2 秒，任务将在播放开始前被冻结。

采用

```
task = [application beginBackgroundTaskWithExpirationHandler:... 
```

第二个问题是，如果您没有获得遥控器，则尝试在后台开始播放时，AVPlayer 的状态会失败。

```
[application beginReceivingRemoteControlEvents]; 
```

其中之一应该可以解决问题。

# ios - IOS如何解码PDF CIDFontType2文本

> ID：10442663
> 
> 赞同：0
> 
> 时间：2012-05-04T04:18:41.010
> 
> 标签：ios, search, pdf, text

我想用中文搜索pdf中的文本。我正在使用 CGPDFScanner。我无法使用 CIDFontType2 获得正确的文本。

我的字体对象有`ToUnicode`条目

字体名称为**HFKAAO+LinGothic-Bold**

它具有`CIDToGIDMap`名称标识的条目（pdf文件说这意味着嵌入了truetype字体程序）

CIDSystemInfo
注册表是 Adob ​​e
订购是身份

它在带有 FlateDecode 的 FontDescriptor 过滤器中有 FontFile2 条目

我发现有人说我只是对从 Tj 获得的文本进行了膨胀，但这不起作用……我使用 zlib 对文本进行了膨胀，似乎它没有产生正确的数据。

有没有我可以学习的示例代码？

我刚刚找到[https://github.com/KurtCode/PDFKitten](https://github.com/KurtCode/PDFKitten)但它不能与中文一起使用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:29:27.243

我发现了问题

我只是使用 CMap 来翻译字符串形式 Tj

我的代码中有一个错误，我解码了 CMap

修复错误后，一切正常

谢谢~

# java - java中的记录器和FileHandler

> ID：10442664
> 
> 赞同：1
> 
> 时间：2012-05-04T04:18:44.273
> 
> 标签：java, logging, filehandler

我想在不在屏幕上的文件中打印日期和时间

这是我的代码：

```
String fileName =  NameEnter.getText(); 
Logger logger = Logger.getLogger("puzzleNumberGame.securityScreen");  
FileHandler fh = new FileHandler(fileName);
logger.addHandler(fh);
logger.setLevel(Level.ALL);
SimpleFormatter formatter = new SimpleFormatter();
fh.setFormatter(formatter);
logger.log(Level.WARNING,"My first log"); 
```

我用这个

```
// handlers = java.util.logging.ConsoleHandler; 
```

但它不起作用谢谢大家:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:33:27.157

在类中包含静态定义，如下所示

```
private final static Logger LOGGER = Logger.getLogger("nescent"); 
```

然后 setupLogger 如下。

```
 private static void setupLogger(){
    LOGGER.setLevel(Level.ALL);
    try {
            FileHandler fhandler = new FileHandler("Logfile.txt");
            SimpleFormatter sformatter = new SimpleFormatter();
            fhandler.setFormatter(sformatter);
            LOGGER.addHandler(fhandler);

    } catch (IOException ex) {
        LOGGER.log(Level.SEVERE, ex.getMessage(), ex);
    } catch (SecurityException ex) {
        LOGGER.log(Level.SEVERE, ex.getMessage(), ex);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T16:39:44.180

这是我对此的看法：在 try{} 块中提供 FileHandler 和 SimpleFormatter 对象的实例化。要在文件中记录数据，Logger 类的方法必须在 try 块之外。这是代码：

公共静态无效 setupLogger(){

```
 LOGGER.setLevel(Level.ALL);
    LOGGER.info("doing stuff");

    try{

        FileHandler fhandler = new FileHandler("Logfile.txt");
        SimpleFormatter sformatter = new SimpleFormatter();
        fhandler.setFormatter(sformatter);
        //This message does not log in the Logfile.txt, rather it logs in the console
        LOGGER.log(Level.WARNING, "first log");
        LOGGER.fine("information");
        LOGGER.addHandler(fhandler);

    }catch(  IOException | SecurityException e){
        LOGGER.log(Level.SEVERE, e.getMessage(), e);
    }
    LOGGER.log(Level.WARNING, "Warning message");
    LOGGER.fine("This message is logged in the file");
} 
```

# java - 扩展 JFrame

> ID：10442665
> 
> 赞同：10
> 
> 时间：2012-05-04T04:18:45.633
> 
> 标签：java, swing, inheritance, jframe, composition

**扩展 JFrame**而不是**创建新的 JFrame**的优缺点是什么？

例如：

```
public class Test extends JFrame {

setVisible(true);

} 
```

或者

```
public class Test {

JFrame test = new JFrame():

test.setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T04:22:31.047

您不应该扩展一个类，除非您想实际扩展它的功能，在您展示的示例中，您应该使用选项 2，因为选项 1 是对`extend`ing 功能的滥用。

换句话说-只要问题的答案**是 Test a `JFrame`?** 是**NO**，它不应该延长`JFrame`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T04:24:17.767

不扩展 JFrame（或任何 Swing 组件）的优点：

*   避免无意的方法覆盖。我已经多次涉足这一点，首先是在我讲授课程`int getX()`和`int getY()`方法时。试试看，你会看到一些不那么有趣的异常行为。
*   将使用 Eclipse 或 NetBeans 时可用的方法选项简化为仅那些您已创建的方法。这实际上是我最喜欢的优点。
*   调整您的 GUI 以创建 JPanel 而不是 JFrame，这将部署灵活性提高了 100 倍。
*   最重要的是，只曝光需要曝光的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T04:33:40.417

如果扩展 JFrame，我想修改/自定义我当前的 Jframe 类，因此子类可以使用这个自定义实现。

如果我不想在 JFrame 类中做任何更改，只需**使用**您在代码中提供的第二个片段中现有的类似内容。通过使用，我的意思是在 JPanel 中创建其他 JComponent（例如按钮/标签）等，并创建一个对象 Test 并将 JFrame contentPane 设置为此对象。就像是

```
public class Test extends JPanel {

   public class() {
    // add buttons/label here
   }
   ...

   private static void createAndShowGUI() {
       JFrame frame = new JFrame();

       Test object = new Test();
       frame.setContentPane(object.setOpaque(true));

       frame.setVisible(true);
   }
...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T04:31:01.123

OOD 的规则之一：如果你不能继承（扩展）你不继承它们的类。

继承增加了程序的复杂性和连通性，并可能导致新的错误。在您的情况下，没有任何理由扩展课程。

只有当您需要访问受保护的成员和/或获得多态行为（覆盖虚拟方法）时，您才应该扩展类。

# php - 在实例化和静态上下文中工作的 PHP 方法？

> ID：10442668
> 
> 赞同：1
> 
> 时间：2012-05-04T04:19:40.433
> 
> 标签：php, oop, design-patterns, methods, static-methods

我正在尝试设置一些可在实例化和静态上下文中调用的 PHP 方法。有什么好的方法可以做到这一点？例如我希望能够做到：

```
Foo::bar($item); 
foo($item)->bar(); 
```

我可以设置两个单独的类，并让每个函数修改 thisArg 并委托给另一个，但似乎必须有更好的方法。我能想到的唯一方法是只用一个类来做到这一点：

```
function foo($item = null) {
    return $item instanceof Foo ? $item : new Foo($item);
}

class Foo { 
    protected $wrapped;

    public function __construct($item = null) { 
        $this->wrapped = $item;
    }

    public function get() {
        return $this->wrapped;
    }

    public function bar($item = null) {
        isset($this) and $item = &$this->wrapped;
        // do stuff with $item
        return isset($this) ? $this : $item;
    }
} 
```

如果您查看[underscore.php](https://github.com/brianhaveri/Underscore.php/blob/master/underscore.php)的代码，他们会执行类似的操作。我已经阅读了一些相关[的问题，](https://stackoverflow.com/questions/2347475/php-issetthis-and-using-the-same-object-method-in-a-static-and-object-context)这些问题指出使用`isset($this)`来确定上下文可以引发警告，但它似乎工作正常......对此有任何更新的想法吗？另一种可能性是创建两个类，一个具有所有静态版本的方法，然后另一个类使用[__call](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)委托给静态方法，例如：

```
class _Foo
{
        protected $wrapped;

        public function __construct($item = null) { 
            $this->wrapped = $item;
        }

        public function __call($method_name, $args) { 
            array_unshift($args, $this->wrapped);
            $this->wrapped = call_user_func_array('Foo::' . $method_name, $args);
            return $this;
        }

} 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:04:52.443

[http://www.php.net/manual/en/domdocument.loadxml.php](http://www.php.net/manual/en/domdocument.loadxml.php)会这样做，但是当从静态上下文调用时，会发出一个`E_STRICT`.

粗略地说，制作一个静态和实例可调用的方法现在可以工作，但该功能可能会被删除。也许还有另一种方法可以完成您的需要？

编辑：正如您提到的，可以使用 __call 模拟功能而无需抛出`E_STRICT`，但您不需要两个类：

```
<? //PHP 5.4+
class mightBeInstance
{
    public function __call($name, $arguments)
    {
        if ($name === 'doSomething') {
            return static::doSomething($this);
        }
    }

    public static function doSomething(mightBeInstance $item = null)
    {
        if ($item === null) {
            $item = new static();
        }

        $item->didSomething = true; // Or whatnot

        return $item;
    }
}

var_dump(
    (new mightBeInstance)->doSomething(),
    mightBeInstance::doSomething()
);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T02:52:46.793

这是唯一可靠的解决方案。它适用于 5.3+（除了底部的内联对象实例化），但有点笨拙。

```
class foo {
    protected function __call($method, $args) {
        if ($method == 'bar') {
            return $this->bar($args[0]);
        }
    }
    protected function bar($baz) {
        return "object context: $baz\n";
    }

    public static function __callStatic($method, $args) {
        if ($method == 'bar') {
            return self::barStatic($args[0]);
        }
    }
    protected static function barStatic($baz) {
        return "static context: $baz\n";
    }
}

echo foo::bar('baz');
echo (new foo())->bar('baz'); 
```

**不推荐：**以下在 PHP 5.6 中有效，但`E_DEPRECATED`在 PHP 7.0 中运行时会抛出错误消息“非静态方法 foo::bar() 不应被静态调用”。问题不在于`isset($this)`您所说的，而是让一个函数执行双重任务：它要么是静态的，要么不是。PHP 7.0 仍然支持它，但你不应该依赖它。

```
class foo {
    public function bar($baz) {
        if (isset($this)) {
            return "object context: $baz\n";
        } else {
            return "static context: $baz\n";
        }
    }
}

echo foo::bar('baz');
echo (new foo())->bar('baz'); 
```

**不起作用：**这会在 PHP 5.6 和 PHP 7.0 中引发致命错误“无法重新声明 foo::bar()”，但如果您可以这样做，那将是理想的选择。

```
class foo {
    public function bar($baz) {
        return "object context: $baz\n";
    }
    public static function bar($baz) {
        return "static context: $baz\n";
    }
}

echo foo::bar('baz');
echo (new foo())->bar('baz'); 
```

也许在未来的版本中，一旦删除了不推荐使用的用法，我们就可以做到这一点。

# css - 为什么我的 CSS 属性被覆盖/忽略？

> ID：10442670
> 
> 赞同：16
> 
> 时间：2012-05-04T04:20:15.087
> 
> 标签：css, css-selectors

我对 CSS“层次结构”有一些问题（不确定将其称为层次结构是否合适）。我正在尝试为下面的 HTML 设置样式。

```
<body>
  <section id="content">
    <article>
      <ul class="posts-list">
        <li class="post-item">
          <h2>[post title]</h2>
          <p class="item-description">...</p>
          <p class="item-meta">...</p>
        </li>
        ...
      </ul>
    </article>
  </section>
</body> 
```

由于我拥有的每个页面上的 section#content 都会发生变化，因此我想在所有页面上保持一致的样式，因此我编写了一些“全局”CSS 规则。

```
#content {
  color: #000;
  margin-left: 300px;
  max-width: 620px;
  padding: 0px 10px;
  position: relative;
}

#content p,
#content li {
  color: #111;
  font: 16px / 24px serif;
} 
```

我想以`ul.posts-list`不同的方式设置 HTML 样式，所以我编写了这些规则。

```
li.post-item > * {
  margin: 0px;
}

.item-description {
  color: #FFF;
}

.item-meta {
  color: #666;
} 
```

但是，我遇到了一些问题。下面是 Chrome 渲染 CSS 的方式：

![Chrome 如何呈现我的 CSS 的屏幕截图](../Images/9c6d66a6e8eacc74fffaa92819524273.png)

出于某种原因，这些规则`#content p, #content li`覆盖了我对`.item-description`and的规则`.item-meta`。我的印象是类/id 名称被认为是特定的，因此具有更高的优先级。但是，我似乎对 CSS 的工作原理有误解。我在这里做错了什么？

编辑：另外，我在哪里可以阅读有关此层次结构如何工作的更多信息？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-04T04:24:00.527

元素 id 在 CSS 中具有优先级，因为它们是最具体的。你只需要使用 id：

```
#content li.post-item > * {
  margin: 0px;
}

#content .item-description {
  color: #FFF;
}

#content .item-meta {
  color: #666;
} 
```

基本上 id 优先于标签（p，li，ul，h1 ...）的优先级。要覆盖规则，只需确保您拥有优先权；）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T04:24:39.370

衡量 CSS 规则的“层次结构”称为特异性。CSS 规则的每个部分都有一个实际的以 10 为底的数值。ID值100，而班级只有10。

有关更多信息，请参阅[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-27T21:35:31.593

定位 ID 比定位类别更具体。更具体的样式将覆盖不太具体的样式。应该注意的是，HTML 中的内联样式更具体，因此会覆盖以 ID 为目标的样式。换句话说：

```
<p style="color:white" id="itemDescId" class="item-description">...</p> 
```

使用 CSS：

```
p{color:blue;}
#itemDescId{color:red;}
.item-description{color:green} 
```

文本将显示为白色 - 不是因为它最接近 html 代码，而是因为它在特异性层次结构中更高。如果您删除了内联样式（并且您通常应该使用更简洁、更易于管理的代码），那么文本将变为红色。删除 ID，它将变为绿色。最后，一旦班级被删除，它将是蓝色的。

这是在 CSS 中要理解的更复杂的主题之一，我只是触及表面，但我发现的关于 CSS 特异性如何工作的最简单描述已经结束于 CSS 技巧：

[http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-28T04:35:41.493

我的回答应该是对答案的“评论”，但尽管#tibo 回答正确，但我有正确的解决方法：

```
li.post-item > * {
  margin: 0px !important;
}

.item-description {
  color: #FFF !important;
}

.item-meta {
  color: #666 !important;
} 
```

该`!important`规则将覆盖 id 和 class 之间的评估顺序。

这是一篇文章的链接，[当使用 !important 是正确的选择](https://css-tricks.com/when-using-important-is-the-right-choice/)时，它将帮助您理解......它让我的生活更轻松:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-03-21T18:58:16.937

最好遵循 CSS 标准。选择 css 选择器并在其父级下制作它，那么您在加载 css 文件（如 .css 文件）时可能不会发生冲突

# android - 如何在android的文本框中显示用户手机号码？

> ID：10442673
> 
> 赞同：1
> 
> 时间：2012-05-04T04:21:13.343
> 
> 标签：android, mobile, phone-number

我在 android (Vs-2.3.3) 中有一个 textBox(EditText1)

我想在文本框中显示我自己的手机号码（前提是我的 SIM 卡没有更改）。

那可能吗？

如果可能，请提供源代码。

如果可能的话，请告诉我先决条件是什么。

注意：我只想显示我自己的手机号码，而不是来自联系人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:26:45.423

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
mPhoneNumber = tMgr.getLine1Number(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:28:43.290

使用 TelephonyManager 获取您自己的手机号码：

```
TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
String strmobinum= tm.getLine1Number();
edttxt.setText(strmobinum); 
```

AndroidManifest.xml：

```
<uses-permission android:name= "android.permission.READ_PHONE_STATE"/> 
```

# sql - Oracle - 发生异常时以字符串形式获取 SQL

> ID：10442677
> 
> 赞同：3
> 
> 时间：2012-05-04T04:21:58.500
> 
> 标签：sql, oracle, exception

当查询无法执行并且返回游标处于失败状态时，我试图从数据库调用中返回 SQL 查询。此查询字符串将用于记录目的。

一种方法是将包含 SQL 查询的变量保存为字符串，然后使用异常处理程序将每个查询包装在 PL/SQL 块中，如果出现异常，则将带有失败状态的查询字符串返回给用户界面组件。

有一个更好的方法吗？Oracle 异常对象或任何其他包是否支持此功能？

这个问题似乎与线程重复：[获取导致 SQLException 的 Query/CommandText](https://stackoverflow.com/q/2964838/640607)

但是，我没有在该线程中找到问题的解决方案，我想知道是否有任何 Oracle 支持的新包为我们提供了导致异常发生的查询字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:15:38.977

当您从外部语言（Java、C#）调用数据库时，您可能可以通过实现自己的 JDBC（或其他）驱动程序来实现。

您可以通过将现实世界委托给普通驱动程序来做到这一点，但是每当将语句发送到数据库时，您都会记住该语句，并且如果导致异常，您将创建一个新异常，该异常还包括 sql 语句（可能还有绑定变量）。

请注意，这只会给您您的陈述。如果您执行存储过程或触发触发器，而触发器又失败了，您只会得到原始语句，而不是实际失败的语句。

# c# - 从 bcp 客户端接收到 colid 6 的无效列长度

> ID：10442686
> 
> 赞同：95
> 
> 时间：2012-05-04T04:22:54.023
> 
> 标签：c#, .net, sql-server, database, sql-server-2005

我想从 c# 代码批量上传 csv 文件数据到 sql server 2005，但我遇到以下错误 -

> 从 bcp 客户端接收到针对 colid 6 的无效列长度。

当批量复制写入数据库服务器时

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2013-10-31T17:02:42.623

我知道这篇文章很旧，但我遇到了同样的问题，最后找到了一个解决方案来确定是哪一列导致了问题并根据需要报告回来。我确定**`colid`**在 SqlException 中返回的不是基于零的，因此您需要从中减去 1 才能获得该值。之后，它用作 SqlBulkCopy 实例的`_sortedColumnMappings`ArrayList 的索引，而不是添加到 SqlBulkCopy 实例的列映射的索引。需要注意的一点是 SqlBulkCopy 将在收到第一个错误时停止，因此这可能不是唯一的问题，但至少有助于解决这个问题。

```
try
{
    bulkCopy.WriteToServer(importTable);
    sqlTran.Commit();
}    
catch (SqlException ex)
{
    if (ex.Message.Contains("Received an invalid column length from the bcp client for colid"))
    {
        string pattern = @"\d+";
        Match match = Regex.Match(ex.Message.ToString(), pattern);
        var index = Convert.ToInt32(match.Value) -1;

        FieldInfo fi = typeof(SqlBulkCopy).GetField("_sortedColumnMappings", BindingFlags.NonPublic | BindingFlags.Instance);
        var sortedColumns = fi.GetValue(bulkCopy);
        var items = (Object[])sortedColumns.GetType().GetField("_items", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(sortedColumns);

        FieldInfo itemdata = items[index].GetType().GetField("_metadata", BindingFlags.NonPublic | BindingFlags.Instance);
        var metadata = itemdata.GetValue(items[index]);

        var column = metadata.GetType().GetField("column", BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance).GetValue(metadata);
        var length = metadata.GetType().GetField("length", BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance).GetValue(metadata);
        throw new DataFormatException(String.Format("Column: {0} contains data with a length greater than: {1}", column, length));
    }

    throw;
}
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-05-04T05:15:11.503

excel 中的数据列之一（列 ID 6）有一个或多个单元格数据超过数据库中的 datacolumn 数据类型长度。

验证excel中的数据。还要验证 excel 中的数据的格式是否符合数据库表模式。

为避免这种情况，请尝试超过数据库表中字符串数据类型的数据长度。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-16T07:17:11.810

在使用 SQL BulkCopy 选项将字符串传递给数据库表时，我遇到了类似的问题。我传递的字符串是 3 个字符，而目标列的长度是`varchar(20)`. 在插入数据库之前，我尝试使用`Trim()`函数来修剪字符串，以检查问题是否是由于字符串中的任何空格（前导和尾随）造成的。修剪字符串后，它工作正常。

你可以试试`text.Trim()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-25T01:42:34.740

检查您正在执行批量插入/复制的表中列的大小。varchar 或其他字符串列可能需要扩展，或者您插入的值需要修剪。列顺序也应与表中相同。

例如，将 varchar 列的大小从 30 增加到 50 =>

ALTER TABLE [dbo].[TableName] ALTER COLUMN [ColumnName] Varchar(50)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-01T20:51:23.080

很不错的一段代码，谢谢分享！

我最终使用反射来获取实际的 DataMemberName 以在出现错误时返回给客户端（我在 WCF 服务中使用批量保存）。希望其他人会发现我的做法很有用。

```
static string GetDataMemberName(string colName, object t) {
  foreach(PropertyInfo propertyInfo in t.GetType().GetProperties()) {
    if (propertyInfo.CanRead) {
      if (propertyInfo.Name == colName) {
        var attributes = propertyInfo.GetCustomAttributes(typeof(DataMemberAttribute), false).FirstOrDefault() as DataMemberAttribute;
        if (attributes != null && !string.IsNullOrEmpty(attributes.Name))
          return attributes.Name;
        return colName;
      }
    }
  }
  return colName;
}
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-23T22:24:39.607

我收到了这个错误消息，它有一个更新的 ssis 版本（与 2015 企业版相比，我认为它是 ssis 2016）。我将在这里发表评论，因为这是您在谷歌上搜索此错误消息时出现的第一个参考。我认为当源字符大小大于目标字符大小时，它主要发生在字符列中。当我使用 ado.net 从 teradata 数据库输入 ms sql 时收到此消息。有趣的是，先前的 oledb 写入 ms sql 完美地处理了所有字符转换，没有编码覆盖。colid 编号和相应的 Destination Input 列 # 您有时会从 colid 消息中获得毫无价值。当您从映射顶部倒数或类似的东西时，它不是列。如果我是微软，我 d 很尴尬地给出一个错误消息，看起来它指向问题列，而实际上它不是。我通过有根据的猜测发现了问题，然后将映射的输入更改为“忽略”，然后重新运行并查看消息是否消失。在我的情况和我的环境中，我通过 substr( 将 Teradata 输入修复为输出列的 ms sql 声明的字符大小。检查并确保您的输入 substr 通过所有数据转换和映射传播。在我的如果没有，我不得不删除所有数据转换和映射并重新开始。再次有趣的是，OLEDB 刚刚处理了它，ADO.net 抛出了错误，必须进行所有这些干预才能使其正常工作。一般来说，你当您的目标是 MS Sql 时应该使用 OLEDB。s 指向问题列，而不是。我通过有根据的猜测发现了问题，然后将映射的输入更改为“忽略”，然后重新运行并查看消息是否消失。在我的情况和我的环境中，我通过 substr( 将 Teradata 输入修复为输出列的 ms sql 声明的字符大小。检查并确保您的输入 substr 通过所有数据转换和映射传播。在我的如果没有，我不得不删除所有数据转换和映射并重新开始。再次有趣的是，OLEDB 刚刚处理了它，ADO.net 抛出了错误，必须进行所有这些干预才能使其正常工作。一般来说，你当您的目标是 MS Sql 时应该使用 OLEDB。s 指向问题列，而不是。我通过有根据的猜测发现了问题，然后将映射的输入更改为“忽略”，然后重新运行并查看消息是否消失。在我的情况和我的环境中，我通过 substr( 将 Teradata 输入修复为输出列的 ms sql 声明的字符大小。检查并确保您的输入 substr 通过所有数据转换和映射传播。在我的如果没有，我不得不删除所有数据转换和映射并重新开始。再次有趣的是，OLEDB 刚刚处理了它，ADO.net 抛出了错误，必须进行所有这些干预才能使其正常工作。一般来说，你当您的目标是 MS Sql 时应该使用 OLEDB。我通过有根据的猜测发现了问题，然后将映射的输入更改为“忽略”，然后重新运行并查看消息是否消失。在我的情况和我的环境中，我通过 substr( 将 Teradata 输入修复为输出列的 ms sql 声明的字符大小。检查并确保您的输入 substr 通过所有数据转换和映射传播。在我的如果没有，我不得不删除所有数据转换和映射并重新开始。再次有趣的是，OLEDB 刚刚处理了它，ADO.net 抛出了错误，必须进行所有这些干预才能使其正常工作。一般来说，你当您的目标是 MS Sql 时应该使用 OLEDB。我通过有根据的猜测发现了问题，然后将映射的输入更改为“忽略”，然后重新运行并查看消息是否消失。在我的情况和我的环境中，我通过 substr( 将 Teradata 输入修复为输出列的 ms sql 声明的字符大小。检查并确保您的输入 substr 通过所有数据转换和映射传播。在我的如果没有，我不得不删除所有数据转换和映射并重新开始。再次有趣的是，OLEDB 刚刚处理了它，ADO.net 抛出了错误，必须进行所有这些干预才能使其正常工作。一般来说，你当您的目标是 MS Sql 时应该使用 OLEDB。s 和映射并重新开始。再次有趣的是，OLEDB 刚刚处理了它，而 ADO.net 抛出了错误，并且必须进行所有这些干预才能使其正常工作。一般来说，当您的目标是 MS Sql 时，您应该使用 OLEDB。s 和映射并重新开始。再次有趣的是，OLEDB 刚刚处理了它，而 ADO.net 抛出了错误，并且必须进行所有这些干预才能使其正常工作。一般来说，当您的目标是 MS Sql 时，您应该使用 OLEDB。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-04T16:42:55.710

我只是偶然发现了这一点，并使用@b_stil 的片段，我能够找出罪魁祸首。在进一步的调查中，我认为我需要像@Liji Chandran 建议的那样修剪列，但我使用的是 IExcelDataReader，我无法找到一种简单的方法来验证和修剪我的 160 列中的每一列。

然后我偶然发现了这个类，来自[CSVReader](https://www.csvreader.com/posts/validating_datareader.php)[的 (ValidatingDataReader)](https://www.csvreader.com/posts/ValidatingDataReader.cs)类。

这个类的有趣之处在于它为您提供了源列和目标列的数据长度、罪魁祸首行，甚至是导致错误的列值。

我所做的只是修剪所有（nvarchar、varchar、char 和 nchar）列。

我只是将`GetValue`方法更改为：

```
 object IDataRecord.GetValue(int i)
    {
        object columnValue = reader.GetValue(i);

        if (i > -1 && i < lookup.Length)
        {
            DataRow columnDef = lookup[i];
            if
            (
                (
                    (string)columnDef["DataTypeName"] == "varchar" ||
                    (string)columnDef["DataTypeName"] == "nvarchar" ||
                    (string)columnDef["DataTypeName"] == "char" ||
                    (string)columnDef["DataTypeName"] == "nchar"
                ) &&
                (
                    columnValue != null &&
                    columnValue != DBNull.Value
                )
            )
            {
                string stringValue = columnValue.ToString().Trim();

                columnValue = stringValue;

                if (stringValue.Length > (int)columnDef["ColumnSize"])
                {
                    string message =
                        "Column value \"" + stringValue.Replace("\"", "\\\"") + "\"" +
                        " with length " + stringValue.Length.ToString("###,##0") +
                        " from source column " + (this as IDataRecord).GetName(i) +
                        " in record " + currentRecord.ToString("###,##0") +
                        " does not fit in destination column " + columnDef["ColumnName"] +
                        " with length " + ((int)columnDef["ColumnSize"]).ToString("###,##0") +
                        " in table " + tableName +
                        " in database " + databaseName +
                        " on server " + serverName + ".";

                    if (ColumnException == null)
                    {
                        throw new Exception(message);
                    }
                    else
                    {
                        ColumnExceptionEventArgs args = new ColumnExceptionEventArgs();

                        args.DataTypeName = (string)columnDef["DataTypeName"];
                        args.DataType = Type.GetType((string)columnDef["DataType"]);
                        args.Value = columnValue;
                        args.SourceIndex = i;
                        args.SourceColumn = reader.GetName(i);
                        args.DestIndex = (int)columnDef["ColumnOrdinal"];
                        args.DestColumn = (string)columnDef["ColumnName"];
                        args.ColumnSize = (int)columnDef["ColumnSize"];
                        args.RecordIndex = currentRecord;
                        args.TableName = tableName;
                        args.DatabaseName = databaseName;
                        args.ServerName = serverName;
                        args.Message = message;

                        ColumnException(args);

                        columnValue = args.Value;
                    }
                }

            }
        }

        return columnValue;
    } 
```

希望这可以帮助某人

# php - 如何从图像名称中删除空格？

> ID：10442699
> 
> 赞同：0
> 
> 时间：2012-05-04T04:24:08.437
> 
> 标签：php, wordpress, replace, lowercase

除了将图像名称全部小写外，我还想将任何空格更改为破折号。

```
<img src="/SC/images/<?php echo strtolower(the_title('','',false)); ?>-header.jpg" border="0" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T12:42:57.070

你可以试试

```
 move_uploaded_file($_FILES["file"]["tmp_name"],"product_image/" . str_replace(" ","_",$_FILES["file"]["name"])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:27:38.187

可以使用以下方法删除简单空格`str_replace()`：

```
$image = "foo and bar.png";

// foo-and-bar.png
echo str_replace( " ", "-", $image ); 
```

可以使用正则表达式完成更复杂的搜索/替换：

```
$image = "foo2   and_ BAR.png";

// foo2-and_-bar.png
echo preg_replace( "/[^a-z0-9\._]+/", "-", strtolower($image) ); 
```

在此示例中，我们允许字母 az、数字 0-9、句点和下划线 - 所有其他字符序列将替换为单个破折号。在通过替换函数运行之前，文件名被转换为全部小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:42:45.933

我不明白这样的替换有什么帮助。
如果您有名称中带有空格的实际图像 - 替换后不会显示。
你需要正确编码它`urlencode()`而不是

如果要替换图像名称，则必须在图像上进行，而不是在链接上进行。
如果您需要任何“清理”，则必须在图像上完成，而不是在链接上。
如果你想编码一个 URI 部分 - 使用`urlencode()`

每个程序员的动作都必须经过明智的选择，而不是无中生有地随机选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T04:27:55.740

只需使用 str_replace 包装输出，如下所示。

```
<img src="/SC/images/<?php echo str_replace(" ", "-", strtolower(the_title('','',false))); ?>-header.jpg" border="0" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T04:30:48.027

```
echo str_replace(' ', '-', strtolower(the_title('','',false))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T04:32:32.600

我[最喜欢](https://stackoverflow.com/questions/5474088/php-regular-expression-filter-number-only/5474143#5474143)的消毒正则表达式：

```
echo strtolower( preg_replace( '/[^a-zA-Z0-9\-]/', '', preg_replace( '/\s/g', '-', the_title( '', '', false ) ) ) ); 
```

这将删除所有非字母数字字符。

# android - 单击部分文本并移动到其他活动

> ID：10442700
> 
> 赞同：1
> 
> 时间：2012-05-04T04:24:11.387
> 
> 标签：android

我有一个带有一些单词的文本，如果我们单击并移动到其他活动。我试图从互联网或堆栈溢出中搜索很多。有什么技术可以解决这个问题吗？

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:30:58.640

如果它是关于一段较大文本中的特定单词，请将可点击的单词标记为[`URLSpan`](http://developer.android.com/reference/android/text/style/URLSpan.html)并覆盖`URLSpan`'`onClick(View widget)`方法以启动新的`Activity`- 默认情况下它将在`Intent.ACTION_VIEW`. 如果您在 SO 上进行搜索，我相信您将能够找到多个示例。

如果您还想删除 固有的下划线，`URLSpan`请查看[此答案](https://stackoverflow.com/a/4463535/1029225)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-04T04:27:03.853

只需在 TextView 上设置 OnClickListener

```
textView.setOnClickListener(new OnClikListener(){
public void onClick(View v){
//here call your activity
}

}); 
```

# php - 想要以特定方式显示数组

> ID：10442701
> 
> 赞同：0
> 
> 时间：2012-05-04T04:24:12.320
> 
> 标签：php

我有一个像这样的数组：`$array1`
我正在使用循环来显示数组的值。我想显示所有数组值。
但需要这样的显示 -

```
Slovenly Europe
           1\. [0] => /7/0/702-100_thumb-sm_1.jpg
            [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

        2\. [0] => /7/0/702-100_thumb-sm_1.jpg
        [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

Greece
            1\. [0] => /7/0/702-100_thumb-sm_1.jpg
            [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

        2\. [0] => /7/0/702-100_thumb-sm_1.jpg
        [thumbnail] => /7/0/702-100_thumb-sm_1.jpg
        3\. [0] => /7/0/702-100_thumb-sm_1.jpg
        [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

 foreach($array1 as $v){
    $v['storename'];  } 

$array1  = Array
(
    [0] => Array
        (
            [0] => /7/0/702-100_thumb-sm_1.jpg
            [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

         [storename] => Slovenly Europe
    )

[1] => Array
    (
        [0] => /7/0/702-100_thumb-sm_1.jpg
        [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

        [storename] => Slovenly Europe
    )

[2] => Array
    (
       [0] => /7/0/702-100_thumb-sm_1.jpg
        [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

       [storename] => Slovenly Europe
    )

[3] => Array
    (
       [0] => /7/0/702-100_thumb-sm_1.jpg
        [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

        [storename] => Greece
    )

[4] => Array
    (
       [0] => /7/0/702-100_thumb-sm_1.jpg
        [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

        [storename] => Greece
    )

[5] => Array
    (
       [0] => /7/0/702-100_thumb-sm_1.jpg
        [thumbnail] => /7/0/702-100_thumb-sm_1.jpg

        [storename] => Greece
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:49:34.180

您必须先转换数组：

```
$tree = array);
foreach ($array1 as $store_info) {
    $tree[$store_info['storename']][] = array(
        '0' => $store_info['0'],
        'thumbnail' => $store_info['thumbnail'],
    );
}

print_r($tree); 
```

希望你能从那里找出其余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:49:47.503

请尝试下面给出的代码..

```
/*Get unique value of storename from $array1*/
$store_arr = array();
foreach ($array1 AS $key => $value) {

    if (!in_array($value['storename'], $store_arr)) {
        $store_arr[] = $value['storename'];
    }
}

foreach ($store_arr AS $store) {
    echo $store."<br/>";
    $i = 1;
    foreach ($array1 AS $arrs) {
        if ($store == $arrs['storename']) {
            echo "{$i}.";
            echo "[0]=>{$arrs[0]}<br/>";
            echo "[thumbnail]=>{$arrs[thumbnail]}<br/>";
            $i++;
        }

    }
} 
```

谢谢

# jquery - jQuery切换点击时替换锚标记值

> ID：10442710
> 
> 赞同：0
> 
> 时间：2012-05-04T04:26:22.037
> 
> 标签：jquery

我正在尝试在单击时换出按钮文本。按钮的功能是切换`<div>`. jQuery是否可以设置两个按钮文本实例并在切换时将它们换掉？

这是我到目前为止的位置：

```
$('#showmodule').click(function() {
    $(this).addClass('active'); 
    $('#module').slideToggle()
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:31:12.653

在您的情况下，我会做的是在您的锚链接中添加跨度，并切换它们，如下所示。

```
<a href="#" id="showmodule">
    <span>Default Text</span>
    <span style="display : none;">Toggled Text</span>
</a> 
```

javascript看起来像这样。

```
$('#showmodule').click(function() {
    $(this).addClass('active');

    $('span', this).toggle(); // This line will toggle the spans inside of the link

    $('#module').slideToggle()
}); 
```

# ruby-on-rails - 在 ActiveRecord 中的块期间禁用触摸

> ID：10442725
> 
> 赞同：2
> 
> 时间：2012-05-04T04:28:50.493
> 
> 标签：ruby-on-rails, block

我的 Rails 应用程序中有一个深度克隆过程，以及一个递归删除过程，它删除树的节点及其后代及其关联。当 :touch => true 应用于关系时，这两个例程都有问题。当我们只更新一条记录以使更改触及关联和树结构上的所有父记录时很好，但是当我们处理批量创建或删除时，在该调用期间禁用触摸是有意义的。

我正在寻找有关如何定义一个方法的方向，该方法接受一个块以运行不会激活对象上的触摸方法的代码。

我在想也许就在屈服之前我应该​​设置一个全局？指示触摸被禁用的变量，然后覆盖 touch 方法以在调用 super 之前首先检查此变量（或不根据情况而定）。

任何有助于将其固化为实际代码的帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-28T02:25:01.630

在 Rails 4.1 或更高版本中，您可以使用 ActiveRecord`no_touching`方法来防止单个模型或所有模型中的触摸，如下所示：

```
ActiveRecord::Base.no_touching do
  Project.first.touch  # does nothing
  Message.first.touch  # does nothing
end

Project.no_touching do
  Project.first.touch  # does nothing
  Message.first.touch  # works, but does not touch the associated project
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T02:55:37.447

看起来它可能会变得非常棘手，试图想出一种通用的方法。当您声明`belongs_to`与该`:touch`选项的关联时，它会为您想要触摸的关联创建一个新方法，如果保存/更新/销毁成功，则该方法会处理触摸。如果您仍想继续前进，请查看[add_touch_callbacks](http://apidock.com/rails/ActiveRecord/Associations/Builder/BelongsTo/add_touch_callbacks)，它执行此方法定义和挂钩。

我想我的攻击点是识别正在被触摸的关联，然后用一个空方法覆盖它们的方法定义，让给块，然后将整个覆盖的方法定义放回原位，所以触摸再次起作用。

# wpf - 替代列表框的 selectionchanged 事件

> ID：10442726
> 
> 赞同：1
> 
> 时间：2012-05-04T04:28:56.113
> 
> 标签：wpf, xaml

是否有替代的 ItemsControl（与 ListBox 非常相似），或者在“再次”选择最后一个选定对象时引发的 ListBox 中的事件？由于某些要求，我不能使用代码隐藏，因此解决方案必须仅在 XAML 中。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:43:01.177

当触发 mouseclick 事件时，您可能会尝试使用 Blend SDK 行为 InvokeMethod 在 ViewModel 上执行方法。

[本文是关于 Silverlight](http://www.codeproject.com/Articles/160892/Binding-Events-to-Methods-in-the-Silverlight-MVVM)，但讨论了可在 WPF 中使用的相同行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:02:44.447

我无法仅使用 XAML 来实现整个事情 :(。但我使用鼠标单击事件来实现它。（感谢[用户](https://stackoverflow.com/users/845279/user845279)的建议）。答案可能并不完美，但考虑分享它，因为它可能对其他人有所帮助。

```
public class CustomListBox : ListBox
{
    private SelectionChangedEventArgs cachedArgs;
    private int state;

    protected override void OnInitialized(EventArgs e)
    {
        base.OnInitialized(e);
        this.AddHandler(Mouse.MouseDownEvent, new MouseButtonEventHandler(CustomListBox_MouseDown), true);
        state = 0;
    }

    void CustomListBox_MouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        if (state == 1) // I don't want to re-raise event if ListBox had raised it already. 
        {
            this.OnSelectionChanged(cachedArgs);
        }
        state = 3;
    }

    protected override void OnPreviewMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        state = 1;
        base.OnPreviewMouseLeftButtonDown(e);
    }

    /// <summary>
    /// Responds to a list box selection change by raising a <see cref="E:System.Windows.Controls.Primitives.Selector.SelectionChanged"/> event.
    /// </summary>
    /// <param name="e">Provides data for <see cref="T:System.Windows.Controls.SelectionChangedEventArgs"/>.</param>
    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        cachedArgs = e;
        state = 2;
        base.OnSelectionChanged(e);
        foreach (var item in e.AddedItems)
        {
            Debug.WriteLine(item);
        }
    }
} 
```

I have used three different states. PreviewMouseLeftButtonDown event is raised always before other two events, so state 1\. If there is a SelectionChanged event raised, it will be before Mouse.MouseDownEvent so state 2 and 3 respectively.

# android - 在 TabActivity 中将 Intent 设置为后退键

> ID：10442727
> 
> 赞同：3
> 
> 时间：2012-05-04T04:29:16.097
> 
> 标签：android, android-intent, android-tabhost, tabactivity

我有三个活动 - AB 和 C，其中 B 是**Tab Activity**。首先启动活动A，然后从A启动B。使用此代码启动B时，我完成了Activity A

```
public void onStop() {
   super.onStop();
   this.finish();
} 
```

现在我想在 B 中按下返回键时启动 Activity C。

我尝试使用此代码覆盖返回键

```
@Override 
public void onBackPressed() { this.getParent().onBackPressed();
} 
```

这无济于事，因为在启动子活动时父活动已完成。当我按下返回键时实际发生的是 Activity 退出到主屏幕。

我尝试覆盖后退键并为其设置 Intent

```
@Override
public void onBackPressed() {
    Intent backIntent = new Intent();
    backIntent.setClass(this, main.class);
    startActivity(backIntent);
} 
```

这也对我没有帮助。这个问题的可能解决方案是什么，当按下返回键时如何启动 Activity C？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T04:39:02.013

首先，当活动 A 停止时，您不应该完成活动 A，这是完全错误的方法，而不是您必须在开始活动 B 时完成活动。

例如

```
Intent i = new Intent(this, B.class);
startActivity(i);
finish(); 
```

现在您想在用户按下后退按钮时启动活动 C，因此请使用以下代码。

```
@Override
public void onBackPressed() {
    Intent backIntent = new Intent(this, C.class);
    startActivity(backIntent);
    super.onBackPressed();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:31:48.667

您必须覆盖 onKeyDown

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub

    if (keyCode == event.KEYCODE_BACK)
    {
        //Do your code here
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

这将在用户按下设备硬返回按钮时调用。

导航到下一个活动： StartActivity(new Intent(getApplicationContext(),main.class));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T05:52:02.407

覆盖以下方法并导入事件.....

```
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
// TODO Auto-generated method stub

   if (keyCode == event.KEYCODE_BACK)
   {
      //Write your intent or other code here
   }
   return super.onKeyDown(keyCode, event);
} 
```

# java - Maven 阴影和程序集插件导致堆栈溢出

> ID：10442728
> 
> 赞同：3
> 
> 时间：2012-05-04T04:29:18.267
> 
> 标签：java, maven, maven-assembly-plugin

我有一个相当简单的 RESTEasy 客户端应用程序，我尝试使用 Maven Shade 和 Assembly 插件将其编译成一个自包含的 JAR 文件。maven会成功打包应用程序，它会启动正常，但最终我得到以下错误：

```
Exception in thread "main" java.lang.StackOverflowError
    at java.util.regex.ASCII.getType(ASCII.java:199)
    at java.util.regex.ASCII.isType(ASCII.java:203)
    at java.util.regex.Pattern$Ctype.isSatisfiedBy(Pattern.java:3832)
    at java.util.regex.Pattern$BmpCharProperty.match(Pattern.java:3715)
    at java.util.regex.Pattern$Curly.match(Pattern.java:4125)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4556)
    at java.util.regex.Pattern$Branch.match(Pattern.java:4502)
    at java.util.regex.Pattern$BmpCharProperty.match(Pattern.java:3715)
    at java.util.regex.Pattern$Start.match(Pattern.java:3408)
    at java.util.regex.Matcher.search(Matcher.java:1199)
    at java.util.regex.Matcher.find(Matcher.java:618)
    at java.util.Formatter.parse(Formatter.java:2517)
    at java.util.Formatter.format(Formatter.java:2469)
    at java.util.Formatter.format(Formatter.java:2423)
    at java.lang.String.format(String.java:2845)
    at org.jboss.resteasy.client.core.BaseClientResponse.readFrom(BaseClientResponse.java:384)
    at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:346)
    at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:319)
    at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:442)
    at org.jboss.resteasy.client.core.BaseClientResponse.copyFromError(BaseClientResponse.java:94)
    at org.jboss.resteasy.client.ClientResponseFailure.<init>(ClientResponseFailure.java:32)
    at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:488)
    at org.jboss.resteasy.client.core.BaseClientResponse.createResponseFailure(BaseClientResponse.java:479) 
```

org.jboss.resteasy.client.core.BaseClientResponse.readFrom(BaseClientResponse.java:384) 之后的调用堆栈一遍又一遍地重复，直到内存耗尽。

我的代码不是问题。[应用程序在使用Maven 依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-project-dependencies.html)打包时运行良好。

我的代码确实依赖于正则表达式命名组（依赖于 Java 1.7），但我可以确认 Maven 和应用程序本身是使用正确的 JDK 编译和运行的。

谁能解释一个自包含的 JAR 文件如何导致这样的堆栈溢出。

# uibezierpath - UIBezierPath 找到交叉点/获取所有点

> ID：10442731
> 
> 赞同：1
> 
> 时间：2012-05-04T04:29:52.613
> 
> 标签：uibezierpath

有没有办法获得使用 UIBezierPaths 创建的线的所有交叉点？我还可以想象一个解决方案，我在 UIBezierPath 中获取所有点并一个接一个地检查它们......

谢谢，亲切的问候，朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T16:21:28.573

我在这个示例代码上得到了 UIBezierpath 的所有点，它有一种数学方法，你需要知道曲线的关键点，这个例子可能会对你有所帮助，

你可以看看：

*   [弯曲的 UISlider](https://github.com/milianoo/CurvySlider)

我会尽快更新它。

# android - 将 DateTime 对象 java 转换为 Json 字符串

> ID：10442732
> 
> 赞同：1
> 
> 时间：2012-05-04T04:29:54.710
> 
> 标签：android, json

我想将java中的日期时间对象转换为json字符串，格式如下：

```
{"date":"/Date(18000000+0000)/"} 
```

我确实喜欢这个，但它没有给我我想要的格式：

```
JSONObject object = new JSONObject();
object.put("date",new Date()); 
```

和 object.toString() 的结果

```
{"date":"Fri May 04 11:22:32 GMT+07:00 2012"} 
```

我希望将字符串“Fri May 04 11:22:32 GMT+07:00 2012”转换为“/Date(18000000+0000)/”（这里的 18000000+0000 只是一个示例）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:27:29.520

这是我的解决方案，虽然不是一个好方法，但我终于找到了一个可行的解决方案。

```
SimpleDateFormat format = new SimpleDateFormat("Z");
Date date = new Date();
JSONObject object = new JSONObject();
object.put("date", "/Date(" + String.valueOf(date.getTime()) + format.format(date) + ")/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T12:44:15.593

```
 public static String convertToJsonDateTime(String javaDate)

  {
     SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss");
        Date currentDate = null;
        try {
            currentDate = dateFormat.parse(javaDate);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        long time =currentDate.getTime();
    return  "\\/Date("+time+"+0000)\\/";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-16T17:32:22.110

我的解决方案：我认为这是最简单的方法

```
DateFormat dateFormat=new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
yourJsonObject.accumulate("yourDateVarible",dateFormat.format(new Date())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T04:39:01.850

来自[json.org](http://json.org/java/)的描述`JSONObject`：

> 这些值可以是以下任何类型：Boolean、JSONArray、JSONObject、Number 和 String，或 JSONObject.NULL 对象。

此库不支持 Date 到 JSON 表示的“复杂”映射。你必须自己做。您可能会发现类似的东西[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:12:40.397

您想要的日期格式是`/Date(<epoch time><Time Zone>)/`.
您可以使用`long epoch = System.currentTimeMillis()/1000;`（在[此链接](http://www.epochconverter.com/)中找到）获取 java 中的纪元时间，以及使用日期和时间模式获取的时区 as `Z`。然后将所有字符串合二为一，存入Json Object。
其他可能性是您从 iOS 设备获取的时间可能与`yyMMddHHmmssZ`从[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)获取的模式相同。在不同时间检查 iOS 设备上的输出并识别正确的模式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T06:14:29.013

如果你的格式是这样的 -> "DDmmYYYY+HHMM"

1.  DD -> 天（2 位）
2.  mm -> 月（2 位数）
3.  YYYY -> 年（4 位）
4.  HH -> 小时
5.  MM -> 分钟

比你可以这样做：

```
SimpleDateFormat format = new SimpleDateFormat("DDmmYYYY+HHMM");
JSONObject object = new JSONObject();
object.put("date", "/Date(" + format.format(new Date()) + ")/"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T06:41:09.063

我想这是`ISO international date-time`格式的表示。

> YYYYMMDD+HHMM

我认为现在您将能够创建该字符串

可能像，

`Date d=new Date(); String tmp=""; tmp="/Date("d.getYear()+""+d.getMonth()+""+d.getDate()+"+"+d.getHours()+""+d.getMinutes()+")/";`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-24T13:21:21.543

升级上一个答案之一：

```
 public static String convertToJsonDateTime(Date dateToConvert) {
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss");
        long time = dateToConvert.getTime();
        return "/Date(" + time + "+0000)/";
    } 
```

# javascript - 找到特定节点后寻找节点

> ID：10442733
> 
> 赞同：0
> 
> 时间：2012-05-04T04:29:59.400
> 
> 标签：javascript, jquery

我正在尝试将节点的 html 保存到本地存储。这是我想要做的。首先查找“强”节点，如果该节点的 html 仅是“AM”，那么我会从具有“时间”类的 span 节点获取时间。它似乎有效，但不是我想要的方式。相反，它从第一个跨度而不是“强”节点上方的跨度获取时间字符串，html 为“AM”。我希望这很清楚，否则我会尽力解释。

**HTML**

```
<div>
<span class="time">Today 07:11 PM</span>
<strong>PM</strong>
</div>

<div>
<span class="time">Today 07:21 PM</span>
<strong>AM</strong>
</div> 
```

**代码**

```
checkTime = setInterval(function(){
    // get html of the 1st node
    var firstNode = $("strong").html();

    // if 1st node html is "AM" save time to local storage
    if (firstNode == "AM") {
      var userClock = $("span.time").html();
      localStorage.setItem('clock', userClock);
    }
}, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:31:35.137

```
checkTime = setInterval(function(){
    // get html of the 1st node
    var firstNode = $('strong:contains("AM")');

    // if 1st node html is "AM" save time to local storage
      var userClock = firstNode.prev('span.time').html();
      localStorage.setItem('clock', userClock);
}, 1000); 
```

**[现场证明](http://jsfiddle.net/k9UGa/)**

# c++ - 将模板函数传递给另一个模板函数

> ID：10442735
> 
> 赞同：0
> 
> 时间：2012-05-04T04:30:04.633
> 
> 标签：c++, templates, compiler-errors

所以，我有一个函数，预购处理，这意味着在 bst 的每个节点中的每个项目上执行函数 f。功能如下：

```
template <class Item, class Key, class Process>
void preorder_processing(bstNode<Item, Key>*& root, Process f)
{
    if (root == NULL) return; 
    f(root);
    preorder_processing(root->left(), f); 
    preorder_processing(root->right(), f);
} 
```

不幸的是，当我从主函数中调用该类时，出现错误。调用是 preorder_processing(root_ptr, print); 实际功能“打印”是：

```
template<class Item> 
void print(Item a) 
{
    cout << a << endl;
} 
```

错误是：

> bstNode.cxx:23: 错误: 没有匹配函数调用 '<code>preorder_processing(bstNode<int, long unsigned int>* <unresolved overloaded function type>)'</p>

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:38:49.643

您的`root->left()`and`root->right()`应该返回`bstNode<Item, Key>*`它是一个**rvalue 指针**。您不能将非常量引用分配给临时指针变量。

如下更改声明，编译器错误应该是：

```
void preorder_processing(bstNode<Item, Key>* root, Process f)
                 //    removed reference  ^^^ 
```

此外，`Process f`调用函数时，第二个参数没有传递任何值：

```
preorder_processing(root->left(), ???); 
```

# visual-studio-2010 - c++/cli中的boost库..以“代码0xC0020001：字符串绑定无效”退出

> ID：10442749
> 
> 赞同：1
> 
> 时间：2012-05-04T04:31:44.413
> 
> 标签：visual-studio-2010, boost, c++-cli, clr

我正在使用 boost 库来获取当前系统时间并且我的代码可以工作，但是在程序之后 Visualt Studio 2010 退出。调试器在尝试释放不存在的指针时中断。我知道这是因为 boost 本机代码。因为如果我评论代码的 boost 部分没有错误。

直到现在我尝试使用 MSDN 中解释的#pragma 但没有成功。有人可以给我一些建议吗？（我也尝试了 GetSystemTime 函数来获取时间，但我无法获得像 boost 这样的微秒细节。）

**我的代码**

```
#pragma managed(push, off)
void GetSystemDateTime(SDateTime& stimeblock);
#pragma managed(pop)

int main()
{

c++/cli code

SDateTime stimestruct[1];
//call to the function having the boost code..
GetSystemDateTime(stimestruct[0]);

} 
```

功能定义

```
 #pragma managed(push, off)
  void GetSystemDateTime(SDateTime& timeblock)
    {

   // SYSTEMTIME time;
   // GetSystemTime(&time);
   // WORD millis = (time.wSecond * 1000) + time.wMilliseconds;

    boost::posix_time::ptime now  = boost::posix_time::microsec_clock::local_time();
    std::tm pt_tm = to_tm(now);
    std::cout <<  now << std::endl;
    //std::cout <<  time.wYear<< time.wMonth<<time.wDay //<<time.wHour<<time.wMinute<<time.wSecond<<time.wMilliseconds << std::endl;
    std::string timestring =  to_iso_string(now);
    std::string sYear  = timestring.substr (0,4);
    std::string sMonth = timestring.substr (4,2);
    std::string sDay   = timestring.substr (6,2);
    std::string sHour  = timestring.substr (9,2);
    std::string sMinute = timestring.substr (11,2);
    std::string sSecond = timestring.substr (13,2);
    std::string sUSecond = timestring.substr (16);

    istringstream isYear(sYear);
    istringstream isMonth(sMonth);
    istringstream isDay(sDay);
    istringstream isHour(sHour);
    istringstream isMinute(sMinute);
    istringstream isSec(sSecond);
    istringstream isUSec(sUSecond);
    // use is like an input stream
    int iYear,iMonth,iDay,iHour,iMinute,iSecond,iUSecond;
    isYear >> iYear;
    isMonth >>iMonth;
    isDay >>iDay;
    isHour >>iHour;
    isMinute >>iMinute;
    isSec >>iSecond;
    isUSec >>iUSecond;

    timeblock.uiYear = iYear;
    timeblock.usiMonth = time.wMonth;
    timeblock.usiDay = time.wDay;
    timeblock.usiHour = time.wHour;
    timeblock.usiMinute = time.wMinute;
    timeblock.usiSec = time.wSecond;

    timeblock.udiUSec = time.wMilliseconds;

    // Display version information

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:55:54.963

我已经看到由于在 C++/CLI 程序集中的[本机代码中使用静态变量而导致的此错误。](http://code.logos.com/blog/2008/04/exception_0xc0020001_in_ccli_assembly.html)

我发现的唯一解决方法是删除静态变量，例如，通过将其移动到类或文件范围。

但是，如果这个静态变量在 boost 代码中，那么这样做可能并不容易/不可能。在这种情况下，您可以创建一个单独的 C++ 文件，该文件在没有 的情况下编译`/clr`，使用该文件中的 boost 函数，并将其链接到您的 C++/CLI 程序集。

此错误似乎是由编译器生成不正确的代码引起的。我[向 Microsoft 提交了一个错误](https://connect.microsoft.com/VisualStudio/feedback/details/336844/static-variable-in-native-method-causes-exception-c0020001-during-process-exit)，该错误已关闭“无法修复”，但编译器团队在他们的回复中提供了其他一些解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:40:05.077

尝试使用

```
#pragma managed(push, off)
#pragma managed(pop) 
```

围绕`#include`所有 boost 头文件的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:30:00.713

我现在在同样的问题上几天了。

这是我发现的最好的解决方法。并解释了为什么会这样。

看看最后（7号和9号）

希望这有助于[http://www.codeproject.com/Articles/442784/Best-gotchas-of-Cplusplus-CLI](http://www.codeproject.com/Articles/442784/Best-gotchas-of-Cplusplus-CLI)

# c - scanf() 中的错误

> ID：10442752
> 
> 赞同：0
> 
> 时间：2012-05-04T04:32:08.590
> 
> 标签：c, input, multidimensional-array, scanf

首先，我的代码中有一个逻辑错误。嗯，这是代码

```
#include <stdio.h>

int main()
{
    long i,j,t;
    scanf("%ld",&t);
    long n[t],d[t][t];
    for(i = 0; i < t;i++){
        scanf("%ld",&n[i]);
        for(j = 0; j < n[i] ;j++){
            scanf("%ld",&d[j][i]);
        }
    }
    for(i = 0; i < t;i++){
        for(j = 0; j < n[i] ;j++){
            printf("%ld ",d[j][i]);
        }
        printf("\n");
    }
    return 0;
} 
```

我输入数据

```
2
4
25 20 30 90
3
45 50 55 
```

结果是

```
25 20 30 90
45 50 55 
```

嗯，这就是我的预期。但是，当输入变成这样

```
3
5
12 67 89 34 56
6
34 56 78 90 12 34
7
12 34 89 23 56 78 89 
```

结果变成了这样

```
12 34 89 23 56 78 89
12 67 89 34 56 4206692 7 2293472 1982002386 16 3 2293344 2293408 0 2293552 0 0 4
198585 8918456 1982106837 1982010910 8918456 2293640 0 0 1985286516 2009576437 0
 0 2293664 2009323341 2293740 2147348480 0
34 56 78 90 12 34 4199405 1982595752 8 12 2293424 2 2 1982356412 2147348480 2293
608 2147348480 1 -1 297753669 1982010784 1982015505 4199044 0 0 2147348480 21473
48480 0 0 0 7273647 2009576392 0 0 0 1 0 20 52 0 0 438759246 736 -214797894 1420
 760826203 2272 852421325 3108 944791496 4028 -1322777276 4988 9 1 1 1204 7168 4
 2 152 11832 7 1 40 12316 1682469715 1 140 44 0 0 0 2 0 7209065 5701724 6029427

12 34 89 23 56 78 89 
```

好吧，简单的问题，为什么输出变成上面的样子？当我输入2以上时，会发生相同的结果。如果您不介意，任何可能的答案和链接？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:37:18.153

在许多情况下，您是在二维数组之外编写的，有时您不会出错，但这只是偶然。

您可以通过要输入的数组数量来确定二维数组的大小，但同时也可以确定内部数组的大小：

```
scanf("%ld",&t);
long n[t],d[t][t]; 
```

例如，让我们以第一个例子为例：

```
2              >> create array n[2], and array d[2][2]
4              >> number of values to d[0]
25 20 30 90    >> d[0][1] = 25 d[0][2] = 20 you access d[0][3] and d[0][4] but you are not allowed to do that.
3              >> number of values to d[1]
45 50 55       >> d[1][0] = 45 d[1][1] = 50 you access d[1][2] but you are not allowed to do that 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:16:23.013

我相信你可以使用`malloc`.

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    long i,j,t;
    printf("Rows : ");
    scanf("%ld",&t);
    long *n;
    long **d;
    n = (long* )malloc(sizeof(long) * t); // add malloc
    d = (long** )malloc(sizeof(long *) * t); // add malloc

    for(i = 0; i < t;i++){
        printf("Column : ");
        scanf("%ld",&n[i]);
        d[i] = (long* )malloc(sizeof(long) * n[i]); //add malloc
        if(d[i] == NULL)
        printf("ERROR\n");

        for(j = 0; j < n[i] ;j++){
            scanf("%ld", &d[i][j]); // change from &d[j][i]
        }
    }
    printf("\n\n");
    for(i = 0; i < t;i++){
        for(j = 0; j < n[i] ;j++){
            printf("%ld ",d[i][j]); // change from d[j][i]
        }
        printf("\n");
    }
    return 0;
} 
```

> 好吧，简单的问题，为什么输出变成上面的样子？当我输入2以上时，会发生相同的结果。如果您不介意，任何可能的答案和链接？谢谢

1.  因为您分配的内存少于使用的内存。
2.  `scanf("%ld", &d[j][i]);`你必须交换“i”和“j”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:38:15.847

你用 size 构建一个矩阵`t*t`，然后用更多或更少的元素填充行。

如果你用太少的元素填充一行，其余的保持未初始化，你会得到奇怪的数字。在你的情况下没关系，因为你不打印这些元素。

如果用太多元素填充一行，多余的元素会重叠到下一行。它也可能超出整个矩阵并破坏您的堆栈。
我想这就是正在发生的事情 - 你的`n`数组溢出了，你的代码发疯了。

# jquery - getJSON 没有检索 json 对象

> ID：10442755
> 
> 赞同：0
> 
> 时间：2012-05-04T04:32:49.273
> 
> 标签：jquery, python, django, google-app-engine, google-cloud-datastore

我在 python 中有一个使用 Django 的 GAE 应用程序。我正在尝试使用 jquery 的 get / getJSON api 从 python api 获取 json，但它不会将传递的字符串读取为 json。我在这里错过了什么吗？

Django 模板

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" > </script>
<script type="text/javascript">
    $(document).ready(function(){
    $.get('/test/api?request=getallwords', function(json) {
        $('body').append(json);
        var j = JSON.stringify(json)
        $.each(json.details,function(i){
            $('#list').append($('<li>' + this.word + '</li>'));
        });
        alert(j);
    });
    },'json');
</script>
</head>
<body>
<ol id="list">
</ol> 
```

这是python api。

```
words = Word.all().fetch(20)
for w in words:
   d = {"word":w.name.encode('utf-8'),"lists":[]}
   for l in w.word_lists:
      d["lists"].append({"list":l.word_list.name.encode('utf-8')})
success["details"].append(d)
self.response.headers['Content-Type'] = 'application/javascript'
self.response.out.write(success) 
```

和 json 示例

> {'response': 'success', 'details': [{'word': 'mcity', 'lists': [{'list': 'infy'}, {'list': 'dasd'}]}, {'word'：'mcity_1'，'lists'：[]}，{'word'：'mcity_2'，'lists'：[]}，{'word'：'mydc'，'lists'：[{' list': 'infy'}]}, {'word': 'hyddc', 'lists': [{'list': 'infy'}]}, {'word': 'abysmal', 'lists': [ {'list': 'gre words'}]}, {'word': 'ascent', 'lists': [{'list': 'gre words'}, {'list': 'infy'}, {' list': 'mine'}]}, {'word': 'assda', 'lists': [{'list': 'dasd'}]}]}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:35:35.563

看起来您使用的[`get`](http://api.jquery.com/jQuery.get/)不是 jQuery () `getJSON()`，所以您需要`dataType`在请求对象中指定为 JSON。

如果您认为下面的“json”正在执行此操作，我认为您已经混淆了结束括号（GET 将在`$(document).ready()`

```
});
    },'json'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:38:13.430

```
$(document).ready(function(){
    $.get('/test/api?request=getallwords', function(json) {
        $('body').append(json);
        var j = JSON.stringify(json)
        $.each(json.details,function(i){
            $('#list').append($('<li>' + this.word + '</li>'));
        });
        alert(j);
    }); // error, you close the $('document').ready() here
    },'json'); 
```

应该如下：

```
$(document).ready(function(){
    $.get('/test/api?request=getallwords', function(json) {
        $('body').append(json);
        var j = JSON.stringify(json)
        $.each(json.details,function(i){
            $('#list').append($('<li>' + this.word + '</li>'));
        });
        alert(j);
    },'json');
 }); 
```

# javascript - 正确输入文本时，图像会翻转吗？

> ID：10442756
> 
> 赞同：0
> 
> 时间：2012-05-04T04:32:58.263
> 
> 标签：javascript, jquery

我正在设计一个语言学习网站。当有人在文本框中输入文本时，我想拥有它，它开始滚动某些图像。看看我下面的示例

[http://imageshack.us/photo/my-images/827/hiraganaquiz2.jpg/](http://imageshack.us/photo/my-images/827/hiraganaquiz2.jpg/)

因此，当用户输入“na”时，第一个符号会突出显示，如您在我的示例中看到的那样。当他输入“ma”时，第二个符号应突出显示/翻转。我希望所有符号在输入正确文本时保持翻转。因此，如果用户键入“nama”，前两个符号应翻转以表明他们正确，一旦输入最后一个正确的文本，所有三个符号都将翻转。这能做到吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:42:24.280

我认为这在很大程度上取决于您使用的技术。如果您支持 AJAX，您可能可以使用某种隐藏“未选择”图像并将其替换为“已选择”图像的标志来完成此操作。

我找到了这个论坛帖子。这似乎与您的问题相似。我希望它有所帮助： [http ://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/101640/multiple-mouseover-events](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/101640/multiple-mouseover-events)

# java - 为什么 Java 文件必须与其公共类同名？

> ID：10442758
> 
> 赞同：20
> 
> 时间：2012-05-04T04:33:16.990
> 
> 标签：java

> **可能重复：**
> [为什么 java 中的文件名应该与类名相同？](https://stackoverflow.com/questions/2134784/why-are-filenames-in-java-the-same-as-the-class-name)

我有一个名为`temp.java`. 我写了以下代码。为什么这行得通？

```
class demo //not public keyword and not same as filename
{
    public static void main(String []args)
    {
        System.out.println("this is Main method");
    }
} 
```

任何为什么这不起作用？

```
public class demo
{
    public static void main(String []args)
    {
        System.out.println("this is Main method");
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-04T05:51:28.777

在您的第一个示例中，您的类实际上被声明为“包私有”（无修饰符），这意味着只有同一包中的类才能访问它。在您的第二个示例中，您已将其声明为公开的。

这是编译器很好地满足 JLS 的场景。

[JLS 指出：](http://docs.oracle.com/javase/specs/jls/se8/html/jls-7.html#jls-7.6)

> 当包存储在文件系统中时（第 7.2.1 节），如果在由类型名称加上如果以下任一情况为真，则为扩展名（例如 .java 或 .jav）：
> 
> *   该类型由声明该类型的包的其他编译单元中的代码引用。
> *   该类型被声明为公共的（因此可以从其他包中的代码中访问）。
> 
> 这个限制意味着每个编译单元最多只能有一个这样的类型。这个限制使得 Java 编程语言的编译器或 Java 虚拟机的实现很容易在包中找到命名类；例如，公共类型wet.sprocket.Toad 的源代码可以在目录wet/sprocket 中的文件Toad.java 中找到，相应的目标代码可以在同一目录中的文件Toad.class 中找到。

这意味着，对于场景 1，因为您只有`temp.java`with package private class `demo`，所以包的任何其他编译单元中的代码都不会引用它，因此它将毫无问题地编译。

您的第二个场景已将类声明为 public - 这意味着它可能可以从其他包中的代码访问 - 因此它必须符合类名等于文件名的标准。

如果您在第一个场景中（在同一个包中）创建了另一个类，然后尝试引用该类`demo`，您应该会收到编译错误。

# c# - SQLSRV32.DLL 和 MARS 支持

> ID：10442760
> 
> 赞同：0
> 
> 时间：2012-05-04T04:33:29.640
> 
> 标签：c#, odbc, dsn

通过谷歌搜索后，我知道 SQLSRV32 odbc 驱动程序不支持 MARS。有什么解决方法。我猜的一种方法是通过几个 SQL 命令的结果停止循环。但就我而言，我必须创建 30-40 个表并一次插入大约 400-500 行数据。为每个 sql 命令打开和关闭连接是个好主意吗？请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:38:02.470

不要为每个语句打开和关闭连接，打开连接并创建多个命令来使用该连接。插入约 15,000 条记录应该不会花费太长时间。我不知道 ODBC 是否支持它，但您也可以查看 SQL Server 的批量复制功能来执行此类操作。

关于火星的最后一句话。MARS 仅在您希望在返回结果集的同一连接上同时进行多个查询时才重要。这不是真正的问题，因为您正在执行插入操作。

此外，没有什么可以阻止您运行多个线程来执行插入操作。我可能会为每个表做一个线程，每个核心都有一个线程。Parallel.ForEach 可以在这里提供帮助。

# java - ObjectInputStream.read(byte[], int, int) 缺少数据？

> ID：10442761
> 
> 赞同：0
> 
> 时间：2012-05-04T04:33:37.663
> 
> 标签：java, android, serialization

我正在尝试序列化/反序列化位图。[android how to save a bitmap - buggy code](https://stackoverflow.com/questions/3628016/android-how-to-save-a-bitmap-buggy-code)的答案非常有帮助。但是，当我去阅读我的数组时：

```
private void readObject(ObjectInputStream in) throws IOException,
    ClassNotFoundException {
  int rowBytes = in.readInt();
  int height = in.readInt();
  int width = in.readInt();
  int bmSize = rowBytes * height;    // Ends up being 398208

  ByteBuffer byteBuffer = ByteBuffer.allocate(bmSize);
  int bytesRead = in.read(byteBuffer.array(), 0, bmSize);
  // Use array to create bitmap here
} 
```

它正在读取 1008 个字节，而不是我写的 398208 个字节。我用循环替换了调用，效果很好：

```
for (int i = 0; i < bmSize; i++) {
  byteBuffer.array()[i] = in.readByte();
} 
```

可能出了什么问题？不会抛出异常。[ObjectInputStream.read(byte[], int, int)](http://developer.android.com/reference/java/io/ObjectInputStream.html)的文档表明它应该提前返回的唯一原因是它是否到达流的末尾，这显然不是因为我的解决方法不会引发任何异常.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:38:20.657

文档是错误的。ObjectInputStream 只是调用 inputStream 来读取字节。如果您希望它在读取数据之前一直阻塞，请使用 readFully。

# c++ - 如何在 boost::spirit 语义动作中将函数对象的结果分配给本地

> ID：10442766
> 
> 赞同：1
> 
> 时间：2012-05-04T04:34:14.667
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我不太确定为什么以下代码在 GCC 4.6.3 中给我以下错误

'boost::spirit::_a = boost::phoenix::function::operator()(const A0&) const [with A0 = boost::phoenix::actor >, F = make_line_impl 中的 'operator=' 不匹配, 类型名 boost::phoenix::as_composite, F, A0>::type = boost::phoenix::composite, boost::fusion::vector, boost::spirit::argument<0>, boost::fusion: :void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_, boost::fusion::void_ , boost::fusion::void_>]((* & boost::spirit::_1))'</p>

甚至可以将惰性函数对象的结果分配给 qi 占位符吗？

```
#include <string>
#include <boost/spirit/include/phoenix_function.hpp>
#include <boost/spirit/include/qi.hpp>

using std::string;

using boost::spirit::qi::grammar;
using boost::spirit::qi::rule;
using boost::spirit::qi::space_type;
using boost::spirit::qi::skip_flag;
using boost::spirit::unused_type;

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;

struct make_line_impl
{
  int* _context;
  make_line_impl(int* context)
  {
    _context = context;
  }

  template <typename Sig>
  struct result;

  template <typename This, typename Arg>
  struct result<This(Arg const &)>
  {
    typedef int* type;
  };
  template <typename Arg>
  int* operator()(Arg const & content)
  {
    return new int(5);
  }
};

template<typename Iterator>
struct MyGrammar : grammar<Iterator, unused_type, space_type>
{
  rule<Iterator, unused_type, space_type> start;
  rule<Iterator, int*(), space_type> label;
  rule<Iterator, string*(), qi::locals<int*>, space_type> line;

  MyGrammar() : MyGrammar::base_type(start)
  {
    make_line_impl mlei(new int(5));
    phx::function<make_line_impl> make_line(mlei);

    start = *(line);

    line = label[qi::_a = make_line(qi::_1)];
  }
};

int main(int argc, char **argv) {

  string contents;

  qi::phrase_parse(contents.begin(), contents.end(), MyGrammar<string::iterator>(), space_type(), skip_flag::postskip);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:27:28.077

我已经修复了代码中的一些问题以使其编译：

*   `::result<>::type`我根据[BOOST_RESULT_OF](http://www.boost.org/doc/libs/1_49_0/libs/utility/utility.htm#result_of)的文档重写了嵌套逻辑。

    **注意**如果你在 c++11 模式下编译，你最好定义

    ```
     #define BOOST_RESULT_OF_USE_DECLTYPE 
    ```

    在这种情况下，您不必费心使用嵌套结果类型模板。

*   `operator(...)`方法需要是const

结果代码：

```
#include <string>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/qi.hpp>

using std::string;

using boost::spirit::qi::grammar;
using boost::spirit::qi::rule;
using boost::spirit::qi::space_type;
using boost::spirit::qi::skip_flag;
using boost::spirit::unused_type;

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;

struct make_line_impl
{
  int* _context;
  make_line_impl(int* context)
  {
    _context = context;
  }

  template <typename Arg> struct result { typedef int* type; };

  template <typename Arg>
  int* operator()(Arg const & content) const
  {
    return new int(5);
  }
};

template<typename Iterator>
struct MyGrammar : grammar<Iterator, unused_type, space_type>
{
  rule<Iterator, unused_type, space_type> start;
  rule<Iterator, int*(), space_type> label;
  rule<Iterator, string*(), qi::locals<int*>, space_type> line;

  MyGrammar() : MyGrammar::base_type(start)
  {
    make_line_impl mlei(new int(5));
    phx::function<make_line_impl> make_line(mlei);

    start = *(line);

    line = label[qi::_a = make_line(qi::_1)];
  }
};

int main(int argc, char **argv) {

  string contents;

  qi::phrase_parse(contents.begin(), contents.end(), MyGrammar<string::iterator>(), space_type(), skip_flag::postskip);
    return 0;
} 
```

# android - Android LoginScreen 网络服务

> ID：10442770
> 
> 赞同：-2
> 
> 时间：2012-05-04T04:35:29.973
> 
> 标签：android, web-services, login

我正在创建一个登录屏幕（用户名，密码作为两个字段，登录按钮）。现在，我必须在字段中输入详细信息，如果数据库中存在详细信息..那么它必须进入第二个屏幕，否则必须提供“无效凭据”。现在，我想在 android 中编写一个 web 服务，将这些数据（用户名和密码）发送到 .net 应用程序。它反过来在数据库中进行验证并检查凭据并允许我进入第二个屏幕。请帮助！ ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:41:04.450

您可以使用 web 服务的 RESTful 架构将数据发送到 .net 应用程序。

# c# - 使用免费的第三方 dll 将 word 转换为 pdf

> ID：10442772
> 
> 赞同：4
> 
> 时间：2012-05-04T04:36:02.507
> 
> 标签：c#, asp.net, .net, pdf, ms-word

我想将word文档转换为pdf。

我找到了很多使用 office dll 的解决方案。但我想要一个使用免费第三方 dll 的解决方案，因为在 office dll 中必须安装 office。所以在我的服务器上没有安装办公室。

有没有免费的第三方dll？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T04:58:07.703

编辑：哎呀，看起来你必须安装办公室。第二个链接中的评论之一提到使用 OpenXmlPowerTools.HtmlConvertor 和 iTextSharp 将文档转换为 HTML，然后转到 PDF。祝你好运！

如果您使用 .docx 文件，请查看 DocX：

[http://docx.codeplex.com/](http://docx.codeplex.com/)

然后查看这篇博客文章，了解使用 DocX 转换为 PDF 的示例：

[将 .docx 转换为（.doc、.pdf、.html）](http://cathalscorner.blogspot.com/2009/10/converting-docx-into-doc-pdf-html.html)

希望这可以帮助。我不知道任何适用于旧版 Word (.doc) 的免费解决方案。

# java - TreeMap、HashMap和LinkedHashMap的性能？

> ID：10442775
> 
> 赞同：8
> 
> 时间：2012-05-04T04:36:41.800
> 
> 标签：java, performance, map

在 TreeMap 中 - 元素已排序
在 HashMap 中 - 元素未排序

那么，如果我考虑`get`,`put`和`remove`方法我应该使用哪个映射来提高性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T04:52:52.870

`HashMap`除非您需要订购，否则请 使用 a 。`HashMap`是比较快的。

也就是说，您可以通过使用通用接口作为声明来轻松切换：

```
 Map<String,String> M = new HashMap<String,String>();
 ...use M lots of places... 
```

然后你所要做的就是切换一个地方，你的代码使用新的地图类型。

## 编辑：

一个简单的时序测试：

```
import java.util.*;
class TimingTest {
  public static void main(String[] args) {
    Map<String,String> M = new HashMap<String,String>();
    long start = System.currentTimeMillis();
    for (int i = 0; i < 100000; i++) {
      M.put(Integer.toString(i), "foo");
    }
    long end = System.currentTimeMillis();
    System.out.println(end - start);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T10:00:32.747

这取决于哈希和比较函数在地图中的键上的速度。这取决于您是对平均情况下的性能还是最坏情况下的性能更感兴趣。这取决于您是否对地图的键应用了良好的散列函数；散列值应该很好地分布在散列函数的域中（是的，它可以取决于您的数据）。

通常（当您懒得测试时），哈希映射通常是一个很好的答案，但如果您没有数千个条目（对于小尺寸，“vec地图”也可以很好地工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-06T21:12:15.860

就迭代而言，这取决于您的意图：

*   HashMap 不保证这种情况，这意味着它是随机的；
*   TreeMap 使用自然顺序或 Comparator（如果指定）；
*   LinkedHashMap 根据插入顺序进行迭代。

此外，对于 put/get/remove/containsKey 的 TimeComplexity：

*   哈希集 - O(1);
*   TreeMap - O(log(n)) 或 O(1); ——见参考！
*   LinkedHashSet - O(1)。

极客：

*   [https://www.geeksforgeeks.org/differences-treemap-hashmap-linkedhashmap-java/](https://www.geeksforgeeks.org/differences-treemap-hashmap-linkedhashmap-java/)

堆栈溢出：

*   [HashMap、LinkedHashMap、TreeMap的区别](https://stackoverflow.com/questions/2889777/difference-between-hashmap-linkedhashmap-and-treemap)

# c# - 一次请求读取多个 modbus 地址

> ID：10442778
> 
> 赞同：0
> 
> 时间：2012-05-04T04:36:55.933
> 
> 标签：c#, serial-port, modbus

我正在使用 C#、VS2010 读取 MODBUS 设备，我正在开发遥测应用程序，我的设备有数百个地址，我需要在地址 x 读取一些东西，在地址 x+130 读取另一个东西，目前我正在使用下面的代码读取135字节，虽然我只需要两个地址，但效率不高，有没有办法使用一个MODBUS请求读取两个单独的地址？我目前的代码是：

```
bd[0] = Convert.ToByte("01");
bd[1] = Convert.ToByte("03");
bd[2] = Convert.ToByte("00");
bd[3] = Convert.ToByte("135");
bd[4] = Convert.ToByte("00");
bd[5] = Convert.ToByte("87");
bd[6] = Convert.ToByte("180");
bd[7] = Convert.ToByte("29");
port.Write(bd, 0, 8); 
```

我将这些字节写入连接到 MODBUS 设备的 COM 端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:04:16.810

有**[许多库](http://www.google.com/search?q=c#%20modbus%20lib)**可以帮助您在 C# 中使用 MODBUS（如果没有特殊原因直接在低级别处理字节？）。如果寄存器一个接一个（如您所见），MODBUS 可以读取单个寄存器或多个寄存器范围，但它不允许您在单个函数调用中读取不是一个接一个的寄存器。您必须为此使用更多的函数调用。这么说，使用 2 个函数调用读取 2 个寄存器然后使用 1 个函数调用读取 135 个字节会更有效（字节数更少，因此速度更快）。最后一点，您在示例中使用的 MODBUS 函数 3 从 1 号从站的寄存器 135 开始读取 87 个寄存器（174 个字节）。根本不是您所描述的您想要它做的事情。

# c# - 我们如何序列化使用私有字段定义的属性？

> ID：10442784
> 
> 赞同：0
> 
> 时间：2012-05-04T04:37:41.400
> 
> 标签：c#

```
public class NetworkCredentialHolder
{
    public NetworkCredentialHolder()
    {
        _networkCred = new NetworkCredential();
    }

    public string UserName
    {
        get { return _networkCred.UserName; }
        set { _networkCred.UserName = value; }
    }

    public string Domain
    {
        get { return _networkCred.Domain; }
        set { _networkCred.Domain = value; }
    }
}

public class SPS2003NetworkConfiguration
{
public SPS2003NetworkConfiguration()
    {
        _targetCredentials = new NetworkCredentialHolder();
    }

    private NetworkCredentialHolder _targetCredentials;
}

class Program
{
    static void Main(string[] args)
    {
        var netConfiguration = new SPS2003NetworkConfiguration();
        netConfiguration.SetGlobalCredentials("sanz", "pass@word1TestPassed");

        var sb = new StringBuilder();
        var writer = new StringWriter(sb);

        XmlSerializer serializer = new XmlSerializer(typeof(SPS2003NetworkConfiguration));
        serializer.Serialize(writer, netConfiguration);

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(sb.ToString());

        XmlNodeReader reader = new XmlNodeReader(doc.DocumentElement);
        XmlSerializer serializer = new XmlSerializer(typeof(SPS2003NetworkConfiguration));

        object obj = serializer.Deserialize(reader);

        var netConfiguration = (SPS2003NetworkConfiguration)obj;
        var encryptedPwd =      netConfiguration.TargetCredentials.SecurePassword;
    }
} 
```

嗨，我在这里创建了

```
private NetworkCredentialHolder _targetCredentials; 
```

当我创建`_targetCredntials`为私有时，`NetworkCrendtialHolder`like`UserName`下定义的属性`Domain`不会序列化，除非`_targetCredentials`定义为公共。有什么办法可以序列化`UserName`，`Domain`同时保持`_targetCredential`私有？

# java - 如何重构每个类都有一个 getInstance() 方法的单例类层次结构？

> ID：10442785
> 
> 赞同：1
> 
> 时间：2012-05-04T04:37:47.563
> 
> 标签：java, inheritance, refactoring, singleton

我继承了一个特定的单例类层次结构，其声明总结如下（还有更多的实现——我只是展示了最小的集合来演示问题）。对我来说，它闻起来像天堂，首先是因为继承了单例，以及`instance`基类中的方式在子类的静态初始化程序中覆盖了它的值。

如果所有实现都在`foo.common`父包中，我会考虑从它们中删除`instance`成员和`getInstance()`方法，使类及其构造函数成为本地包，并让一些公共工厂类`foo.common`创建每个实例的单个实例，保留该单个实例每个内部（根据它是否是`IReadOnly`or的实现来划分`IReadWrite`）并提供几个公共查找方法，在这些方法中，基于某些枚举，它将返回所要求的实现作为接口类型。

但是实现可以在这些“更具体”的包之外`foo.common`并且`foo.common`不允许依赖于这些包，因为`foo.common`它是为一堆应用程序所共有的东西而设计的。所以这么简单的事情是做不来的。然后怎样呢？

第一个界面：

```
package foo.common.config;
public interface IReadOnly
{
    void load();
    String getVal(String key);
} 
```

第二个界面：

```
package foo.common.config;
public interface IReadWrite extends IReadOnly
{
    void save();
    void setVal(String key, String value);
} 
```

第一次实现：

```
package foo.common.config;
public class ReadOnlyImpl implements IReadOnly
{
    protected static IReadOnly instance;

    static {
        instance = new ReadOnlyImpl();
    }

    public static IReadOnly getInstance() {
        return instance;
    }

    protected ReadOnlyImpl() {}

    // implement methods in IReadOnly
} 
```

第二次实施

```
package foo.common.config;
public class ReadWriteImpl extends ReadOnlyImpl implements IReadWrite
{
    static {
        instance = new ReadWriteImpl();
    }

    public static IReadWrite getInstance() {
        return (IReadWrite) instance;
    }

    protected ReadWriteImpl() {
        super();
    }

    // Implement methods in IReadWrite
} 
```

第三个实现：

```
// While things in this package can depend
// on things in foo.common, nothing in 
// foo.common is allowed to depend on this package.
package foo.apps.someapp;
public class MoreSpecificReadWriteImpl extends ReadWriteImpl
{
    static {
        instance = new MoreSpecificReadWriteImpl();
    }

    public static IReadWrite getInstance() {
        return (IReadWrite) instance;
    }

    protected MoreSpecificReadWrite() {
        super();
    }

    // Override superclass methods to do something specific
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:02:25.297

将包 foo.apps.someapp 放在一边，包 foo.common.config 的设计是错误的。

```
IReadOnly o1=ReadOnlyImpl.getInstance(); // ok, returns ReadOnlyImpl
...
ReadWrite o2=ReadWriteImpl.getInstance(); // ok, returns ReadWriteImpl 
...
IReadOnly o3=ReadOnlyImpl.getInstance(); // bad, returns ReadWriteImpl, the same as o2. 
```

原因是所有类都使用相同的静态变量 ReadOnlyImpl.instance。我会在所有类中使用单独的变量，包括 MoreSpecificReadWriteImpl。如果这不合适，那么考虑使用 Spring 容器或类似的框架。

# iphone - ios上网络类型的可达性错误检查

> ID：10442794
> 
> 赞同：0
> 
> 时间：2012-05-04T04:38:26.290
> 
> 标签：iphone, ios, reachability

我正在尝试使用苹果示例可达性代码以及下面的代码来检测网络连接。

```
Reachability *reachability = [Reachability reachabilityForInternetConnection];
    [reachability startNotifier];

    NetworkStatus status = [reachability currentReachabilityStatus];

    if(status == NotReachable) 
    {
        //No internet
    }
    else if (status == ReachableViaWiFi)
    {
        //WiFi
    }
    else if (status == ReachableViaWWAN) 
    {
        //3G
    }

    [reachability stopNotifier];
} 
```

我还添加了系统配置。框架添加到我的项目并将**-fno-objc-arc**添加到编译器源以使可达性文件与 ARC 兼容，但我目前遇到此错误...

```
 "_SCNetworkReachabilityCreateWithAddress", referenced from:
          +[Reachability reachabilityWithAddress:] in Reachability.o
      "_SCNetworkReachabilityCreateWithName", referenced from:
          +[Reachability reachabilityWithHostName:] in Reachability.o
      "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
          -[Reachability stopNotifier] in Reachability.o
      "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
          -[Reachability startNotifier] in Reachability.o
      "_SCNetworkReachabilitySetCallback", referenced from:
          -[Reachability startNotifier] in Reachability.o
      "_SCNetworkReachabilityGetFlags", referenced from:
          -[Reachability connectionRequired] in Reachability.o
          -[Reachability currentReachabilityStatus] in Reachability.o
    ld: symbol(s) not found for architecture armv7
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:50:48.393

确保 Reachability.m 在 Build Phases 下的 Compile Sources 列表中，然后再次运行。还要确保 Reachability 类不是#importing 本身，而是#importing 其头文件。我还将检查您的 Reachability 类是否实际上是#importing SystemConfiguration 框架，因为您的所有错误都基于其中找到的方法。

# java - 表单验证无法正常工作

> ID：10442795
> 
> 赞同：0
> 
> 时间：2012-05-04T04:38:29.933
> 
> 标签：java, swing, netbeans

我正在使用 netbeans 和 Java SE 编写一个简单的 GUI，我似乎无法让输入验证正常工作。我有一个 JTextField 和 2 个 JPasswordField 对象，当用户点击提交按钮时，我想检查这些字段中的任何一个是否为空。如果密码字段留空，它可以正常工作，但是如果我在用户名字段中输入一些内容，它会打印数据已提交，而其他表单元素尚未填充数据。这是下面的代码，任何帮助将不胜感激......

```
// test that none of the fields are empty before submitting form data
if (!username_input.getText().isEmpty() && !password_input1.getPassword().toString().isEmpty() 
                && !password_input2.getPassword().toString().isEmpty())
        {
            System.out.println("Data has been submitted!");
        }
        else
        {
            System.out.println("Form has not been filled in correctly!\nPlease try again");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:01:51.683

使用类似的东西

```
!username_input.getText().toString().equals("")&& 
!new String(password_input1.getPassword()).equals("") &&
!new String(password_input2.getPassword()).equals("") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:49:40.147

更改`boolean expression`为：

```
!username_input.getText().isEmpty() && 
password_input1.getPassword().lenght == 0 &&   
password_input2.getPassword().lenght == 0 
```

该方法`getPassword()`返回 a `char array`，您需要`lenght == 0`检查`JPasswordField`.

# c++ - 将字符串转换为非常量字符*

> ID：10442797
> 
> 赞同：0
> 
> 时间：2012-05-04T04:38:39.037
> 
> 标签：c++

我有一些我构建的 C+ 数组，如下所示：

```
std:array<const char *, 4) test1 = {abc.c_str(), def.c_str(), ghi.c_str()}; 
```

其中`abc`, `def`,`ghi`是`std::string`

我必须将此数组传递给另一个具有以下原型的函数： `(int argc, char * argv[])`

我应该如何修改数组以便给`non-const char*`我可以传递给上面的函数。或者我应该将函数修改为 const char*。我不确定该函数是否尝试在某处修改 char*，因为该函数代码不是我的，目前也不可用。
但是，无论如何最好问问我如何将非常量 char* 数组传递给上述函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:05:33.993

如果函数有可能修改字符串，则应将字符串调整为函数可能使用的最大大小，然后在返回时再次调整大小。

```
abc.resize(max);
DoSomething(&abc[0]);
abc.resize(strlen(&abc[0])); 
```

If you know for a fact that the function does *not* modify the string, then the function prototype is lying to you. You can lie back:

```
DoSomething(const_cast<char *>(abc.c_str())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:42:19.193

这应该工作

```
abc.append(1, 0); // guarantee NUL termination
def.append(1, 0);
ghi.append(1, 0);
std:array<char *, 4> test1 = {abc.data(), def.data(), ghi.data()}; 
```

或者

```
abc.append(1, 0);
def.append(1, 0);
ghi.append(1, 0);
std:array<char *, 4> test1 = {&abc[0], &def[0], &ghi[0]}; 
```

# java - HTMLUnit：执行速度超级慢？

> ID：10442803
> 
> 赞同：12
> 
> 时间：2012-05-04T04:39:07.937
> 
> 标签：java, selenium, htmlunit

我一直在使用 HTMLUnit 。它非常适合我的要求。但它似乎非常缓慢。例如：我使用 HTMLUnit 自动化了以下场景

```
Goto Google page
Enter some text
Click on the search button
Get the title of the results page
Click on the first result. 
```

代码 ：

```
long t1=System.currentTimeMillis();
Logger logger=Logger.getLogger("");
logger.setLevel(Level.OFF);
WebClient webClient=createWebClient();
WebRequest webReq=new WebRequest(new URL("http://google.lk"));

HtmlPage googleMainPage=webClient.getPage(webReq);
HtmlTextInput searchTextField=(HtmlTextInput) googleMainPage.getByXPath("//input[@name='q']").get(0);
HtmlButton searchButton=(HtmlButton) googleMainPage.getByXPath("//button[@name='btnK']").get(0);

searchTextField.type("Sri Lanka");
System.out.println("Text typed!");
HtmlPage googleResultsPage= searchButton.click();
System.out.println("Search button clicked!");

System.out.println("Title : " + googleResultsPage.getTitleText());

HtmlAnchor firstResultLink=(HtmlAnchor) googleResultsPage.getByXPath("//a[@class='l']").get(0);
HtmlPage firstResultPage=firstResultLink.click();
System.out.println("First result clicked!");

System.out.println("Title : " + firstResultPage.getTitleText());
//System.out.println(firstResultPage.asText());
long t2=System.currentTimeMillis();
long diff=t2-t1;
System.out.println("Time elapsed : "  + milliSecondsToHrsMinutesAndSeconds(diff));

webClient.closeAllWindows(); 
```

它运行良好 100%。但这需要3分41秒

我猜执行缓慢的原因是验证页面上的每个元素。

我的问题是如何减少 HTMLUnit 的执行时间？有什么方法可以禁用网页上的验证。

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-08T04:55:21.003

对于当前的 htmlUnit 2.13，设置选项与 maxmax 提供的略有不同：

```
final WebClient webClient = new WebClient(BrowserVersion.CHROME);
webClient.getOptions().setCssEnabled(false);//if you don't need css
webClient.getOptions().setJavaScriptEnabled(false);//if you don't need js
HtmlPage page = webClient.getPage("http://XXX.xxx.xx");
... 
```

在我自己的测试中，这比默认选项快 8 倍。（请注意，这可能取决于网页）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T07:56:05.717

*   请务必使用最新的 htmlunit 版本 (2.9)。我从以前的版本中获得了性能提升。

我会在 20 秒或 40 秒内完成您的示例，具体取决于我设置的选项。由于我看不到 webClient 初始化，我想这可能是问题所在。

这是我对 20 多岁治疗的初始化：

```
WebClient client = new WebClient(BrowserVersion.FIREFOX_3_6);
    client.setTimeout(60000);
    client.setRedirectEnabled(true);
    client.setJavaScriptEnabled(true);
    client.setThrowExceptionOnFailingStatusCode(false);
    client.setThrowExceptionOnScriptError(false);
    client.setCssEnabled(false);
    client.setUseInsecureSSL(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:58:35.313

我还建议为 javascript 设置时间限制：

```
 client.setJavaScriptTimeout(30000); //e.g. 30s 
```

# sql-server-2008 - 更改表的标识

> ID：10442807
> 
> 赞同：-1
> 
> 时间：2012-05-04T04:40:22.560
> 
> 标签：sql-server-2008, sql-server-2008-r2

如何将表的当前身份更改为新身份。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:56:22.870

您无法更改哪个列具有 IDENTITY 属性。虽然 Management Studio 会让您认为您可以做到这一点，但它实际上根本没有做到这一点 - 在幕后，它正在放下您的桌子并为您重新创建它。以下是删除当前标识列并添加新标识列的方法，但请记住，这使您完全无法控制新标识值的分配方式：

```
ALTER TABLE dbo.foo DROP COLUMN current_identity_column;
ALTER TABLE dbo.foo ADD new_identity_column INT IDENTITY(1,1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:42:09.583

你是说[重播身份](http://www.howtogeek.com/howto/database/reset-identity-column-value-in-sql-server/)吗？

来自文章：

```
DBCC CHECKIDENT (orders, RESEED, 999) 
```

# ruby - 调用超类的超类方法？

> ID：10442809
> 
> 赞同：2
> 
> 时间：2012-05-04T04:40:33.637
> 
> 标签：ruby

我怎样才能让孩子忽略父母认为有趣的事情，而直接进入祖父母的有趣观念？

Child 仍然从父级继承，但它只是不同意几个方法。

调用超类的超类的方法？

另外，如果我处于孩子不同意父母但同意父母父母的情况下，是否认为设计不佳？

```
class Grandparent  
  def fun  
    #do stuff  
  end  
end

class Parent < Grandparent
  def fun
     super
     #parent does some stuff
  end

  def new_business
     #unrelated to my parent
  end
end

class Child < Parent  
  def fun
     super
     #child also does some stuff
  end

  def inherit_new_business
      new_business
      #stuff 
  end  
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T05:42:07.793

在 Ruby 中，通过组合而不是继承来获得这种行为通常更容易。为了实现这一点`Modules`，其中包含您希望类具有的特定行为。

但是如果你绝对必须使用继承，你可以这样做：

```
class Child < Parent
  def fun
    GrandParent.instance_method(:fun).bind(self).call
    # fun child stuff
  end
end 
```

这将完全按照它所说的去做。从 GrandParent 类中获取实例方法`fun`，将其附加到当前实例对象`self`并调用它。

# xml - 如何使用每个组？

> ID：10442812
> 
> 赞同：0
> 
> 时间：2012-05-04T04:41:00.993
> 
> 标签：xml, xslt

我的xml：

```
<articles>
    <article>
<metadata>
<type>work</type>
</metadta>
<content>work force</content>
    </article>

    <article>
<metadata>
<type>sport</type>
</metadta>
<content>cricket s gentle man game</content>
    </article>

    <article>
<metadata>
<type>Life</type>
</metadta>
<content>Life is beatiful</content>
    </article>
    </articles> 
```

我的 xsl：

```
<xsl:for-each-group select="article" group-by="type">
<xsl:for-each select="current-group()">
<xsl:value-of select="content/>
</xsl:for-each>
</xsl:for-each-group> 
```

我得到：劳动力板球的绅士游戏生活是美好的

劳动力板球的绅士游戏生活是美好的

劳动力板球的绅士游戏生活是美好的

（即，没有类型）只是我需要：劳动力板球的绅士游戏生活是美好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:03:31.133

你想要 group-by="metadata/type"。

# c# - 视觉范式中的接口类关系

> ID：10442819
> 
> 赞同：2
> 
> 时间：2012-05-04T04:42:04.547
> 
> 标签：c#, relationship, uml, visual-paradigm

我已经为此工作了很长时间，但找不到一种方法来表示类和由 UML 图中的类实现的接口之间的关系。有人可以帮我解决上述问题吗？我的接口和类有以下关系

```
interface foo

{

    void a();
    void b();

}

class goo : foo

{

    public override void a()
    {

        //Code goes here
    }
} 
```

你能告诉我在视觉范式中使用什么来显示那里的关系吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T04:47:55.810

它显示为继承。这篇文章可以帮助你[了解 UML 基础知识](http://www.ibm.com/developerworks/rational/library/content/RationalEdge/sep04/bell/)

![在此处输入图像描述](../Images/062806a5626e286915d6b9a6a95a574c.png)

# hibernate - org.hibernate.MappingException：需要使用 AnnotationConfiguration 实例

> ID：10442820
> 
> 赞同：0
> 
> 时间：2012-05-04T04:42:07.713
> 
> 标签：hibernate, struts2, annotations

我想创建一个简单的 Web 项目应用程序。我正在使用 struts2 和 hibernate，我对这两个框架都是新手，我收到了这个错误：

```
无法实例化操作，org.project.actions.UserAction，为命名空间'/'中的'saveUser'定义需要使用AnnotationConfiguration实例
    com.opensymphony.xwork2.DefaultActionInvocation.createAction（DefaultActionInvocation.java:306）
    com.opensymphony.xwork2.DefaultActionInvocation.init（DefaultActionInvocation.java:387）
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:186)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:458)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:76)

根本原因

org.hibernate.MappingException：需要使用 AnnotationConfiguration 实例
    org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1634)
    org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1589)
    org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1568)
    org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1542)
    org.hibernate.cfg.Configuration.configure(Configuration.java:1462)
    org.hibernate.cfg.Configuration.configure(Configuration.java:1448)
    org.project.actions.UserAction.(UserAction.java:23)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0（本机方法）
    sun.reflect.NativeConstructorAccessorImpl.newInstance（未知来源）
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance（未知来源）
    java.lang.reflect.Constructor.newInstance（未知来源）
    java.lang.Class.newInstance0（未知来源）
    java.lang.Class.newInstance（未知来源）
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:119)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:150)
    com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:139)
    com.opensymphony.xwork2.ObjectFactory.buildAction(ObjectFactory.java:109)
    com.opensymphony.xwork2.DefaultActionInvocation.createAction（DefaultActionInvocation.java:287）
    com.opensymphony.xwork2.DefaultActionInvocation.init（DefaultActionInvocation.java:387）
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:186)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:458)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:76)

```

我曾尝试使用 AnnotationConfiguration() 创建 SessionFactory，但出现同样的错误。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:32:19.840

这是我的愚蠢错误。我正在使用完整的休眠插件。当你使用这个插件时，你不必为 Session 对象创建 SessionFactory 对象。我的错误是我忘记删除 SessionFactory 对象和 Session 对象。:-)

# windows-phone-7 - 设计 WP7 应用程序

> ID：10442828
> 
> 赞同：-1
> 
> 时间：2012-05-04T04:42:49.820
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-7.1.1

我制作了一个基于 Windows Phone 的应用程序。我想从你那里得到一些设计想法 wp7 人。我们如何应用样式、透明背景或适合 wp7 应用程序的设计。我可以有一些链接为设计良好的应用程序提供快照吗？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:12:15.263

当谈到对地铁设计的出色使用和适应时，我会想到一个应用程序，它是“鸡尾酒流”。它对 WP7 的许多设计线索进行了很好的实现。作为特殊款待，它具有通过陀螺仪控制的视差效果等功能。

[您可以在市场上](http://www.windowsphone.com/de-DE/apps/ddd1ad08-d9d5-df11-a844-00237de2db9e/)找到免费版本。绝对值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:48:14.463

MSDN 用户体验指南非常好，[Windows Phone 用户体验设计指南](http://msdn.microsoft.com/en-us/library/hh202915%28v=VS.92%29.aspx)。

此外，它还有助于从市场上安装一些流行的应用程序并研究它们的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T02:56:43.750

要了解如何构建出色的 WP7 应用程序，您可以做的**最好的事情就是拥有一部 Windows Phone，并将其用作您的主要手机。**

习惯操作系统的流动方式。下载很酷的应用程序。随着时间的推移，您开始从用户的角度理解“好”应用的外观（更重要的是）*感觉*如何。很难确定“用户体验”规范。我发现很多开始构建 WP7 应用程序的人在了解应用程序应该如何在平台上运行之前就这样做了。了解用户期望 Windows Phone 上的应用程序如何运行至关重要*。*如果您使用 Windows Phone 3-4 个月，并且真的努力通过这些步骤来对接它，那么如果没有非常清楚地了解“好”应用程序的外观，就很难摆脱这种体验对于 Windows 手机。

话虽如此，虽然老实说，我不相信 Windows 手机的良好设计有任何捷径，但我强烈建议下载以下应用程序，并尝试使用它们来感受“良好”的 UI：

*   言辞
*   鸡尾酒流（前面提到过）
*   推特
*   Spotify
*   喊叫
*   任何内置应用程序（Office、Zune、Internet Explorer）

以上是很好的开始，但同样，除非你每天生活和呼吸至少几个月，否则你真的不会理解它。

# asp.net-mvc - 如何通过 ID 获取 ObjectSet 中的对象？

> ID：10442835
> 
> 赞同：1
> 
> 时间：2012-05-04T04:44:13.527
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, asp.net-web-api

对不起，n00b 问题，文档不像 Django 的 QuerySet 那样容易找到。

我正在尝试做一些超级简单的事情，比如

```
context.Object.get(id) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:02:15.937

一个更简单的方法是使用`FirstOrDefault`which 接受一个过滤器，就像`Where()`. 像这样的东西：

```
var product = context.Products.FirstOrDefault(p => p.Id == id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:55:46.077

假设你有一个 Product 实体类型，主键为 Id，容器集是 Products，那么

`var product = context.Products.where(p => p.Id == id).FirstOrDefault();`

# image - 从网站下载图片

> ID：10442841
> 
> 赞同：4
> 
> 时间：2012-05-04T04:45:17.620
> 
> 标签：image, bash, wget

我想在网站上拥有画廊的本地副本。图库在 domain.com/id/1 显示图片（id 以 1 为增量增加），然后图像存储在 pics.domain.com/pics/original/image.format。图像在 HTML 中的确切行是

```
<div id="bigwall" class="right"> 
    <img border=0 src='http://pics.domain.com/pics/original/image.jpg' name='pic' alt='' style='top: 0px; left: 0px; margin-top: 50px; height: 85%;'> 
</div> 
```

所以我想写一个脚本来做这样的事情（在伪代码中）：

```
for(id = 1; id <= 151468; id++) {
     page = "http://domain.com/id/" + id.toString();
     src = returnSrc(); // Searches the html for img with name='pic' and saves the image location as a string
     getImg(); // Downloads the file named in src
} 
```

不过，我不确定该怎么做。我想我可以在 bash 中做到这一点，使用 wget 下载 html，然后手动在 html 中搜索[http://pics.domain.com/pics/original/](http://pics.domain.com/pics/original/) *。*然后再次使用 wget 保存文件，删除 html 文件，增加 id 并重复。唯一的问题是我不擅长处理字符串，所以如果有人能告诉我如何搜索 url 并将 *s 替换为文件名和格式，我应该能够完成剩下的工作。或者，如果我的方法很愚蠢，而您有更好的方法，请分享。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-04T05:36:06.890

```
# get all pages
curl 'http://domain.com/id/[1-151468]' -o '#1.html'

# get all images
grep -oh 'http://pics.domain.com/pics/original/.*jpg' *.html >urls.txt

# download all images
sort -u urls.txt | wget -i- 
```

# events - xla 加载项中的 Worksheet_SelectionChange 事件

> ID：10442842
> 
> 赞同：2
> 
> 时间：2012-05-04T04:45:32.060
> 
> 标签：events, excel, add-in, xla, vba

`Worksheet_SelectionChange`是否可以在 xla 插件中触发事件。我将代码放在加载项的工作表模块中。但它没有进入这个模块。我的目标是在活动窗口的中心设置评论框。我从[这里](http://www.contextures.com/xlcomments03.html)得到了代码。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:07:09.570

如果要在另一个工作簿中捕获事件，则需要使用应用程序级事件。看[这里](http://www.cpearson.com/excel/AppEvent.aspx)

# java - 为什么 Cache.asMap() 与 Cache.size() 不一致？

> ID：10442846
> 
> 赞同：7
> 
> 时间：2012-05-04T04:45:54.060
> 
> 标签：java, caching, concurrency, guava

在 Guava Library 中，我很困惑为什么[`Cache.asMap()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/Cache.html#asMap%28%29)不符合[`Cache.size()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/Cache.html#size%28%29)，除非[`Cache.cleanUp()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/Cache.html#cleanUp%28%29)被调用。

```
Cache<Object, Object> cache = CacheBuilder.newBuilder()
           .expireAfterWrite(1, TimeUnit.SECONDS)
           .build();
cache.get(...);
...
//After some seconds, all entries are expired.
//cache.asMap() is EMPTY Map, but cache.size() != 0 
```

所以我的问题是：`Cache.asMap()`是不是与 不一致的错误`Cache.size()`？虽然我注意到的 javadoc`Cache.size()`是：

```
 /**
   * Returns the **approximate** number of entries in this cache.
   */ 
```

我只能猜测它与并发环境有关。究竟是`Cache.cleanUp()`做什么的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T05:22:29.623

Guava 的缓存是围绕锁摊销设计的，该`cleanUp`方法强制缓存达到一致的状态。该`Map.size()`方法是一个近似值，但可能会计算由于过期或引用驱逐而等待删除的条目。Guava 缓存中近似值的可见性很少对应用程序感兴趣，它倾向于将缓存视为临时数据存储。Map 对缓存的不同期望导致`asMap`允许将缓存视为地图的方法，但不喜欢开发人员以这种方式感知它。

缓存的实现细节在 StrangleLoop 2011 会议[幻灯片](http://concurrentlinkedhashmap.googlecode.com/files/ConcurrentCachingAtGoogle.pdf)中有所介绍。Guava的缓存源自的[设计文档可能也很有趣，但描述了一种略有不同的方法。](http://code.google.com/p/concurrentlinkedhashmap/wiki/Design)`ConcurrentLinkedHashMap`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-04T12:41:13.117

本给出了很好的高层回应。低级响应是：

`asMap()`视图可以遍历缓存中的每个元素，因此可以跳过等待清理的无效条目。另一方面，`size()`预计这将是一个快速的操作，而为了获得更准确的大小估计而遍历整个缓存是很愚蠢的。

[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)javadocs 更详细地介绍了在各种情况下需要进行的清理（例如，`expireAfterWrite`在您的情况下）。

# android - 在 Facebook 墙上发布带有图片的详细信息

> ID：10442847
> 
> 赞同：0
> 
> 时间：2012-05-04T04:46:05.407
> 
> 标签：android, facebook, image

我有一个功能可以将带有图像的详细信息发布到 Facebook 墙上。它可以工作，但在 facebook 墙上显示的图像非常小。那么如何更改 Facebook 上图像的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:54:26.813

尝试使用此代码：在服务器中保留大图像：

```
Bundle params = new Bundle();
    params.putString("caption", "Mona Lisa");
    params.putString(   "description","The Mona Lisa...");
    params.putString("picture","http://tineye.com/images/widgets/mona.jpg");
    params.putString("name", "Mona Lisa");

        facebook.dialog(this, "feed", params, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {}

            @Override
            public void onCancel() {}

            @Override
            public void onError(DialogError de) {}

            @Override
            public void onFacebookError(FacebookError fbe) {}
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:58:56.963

如果您想将图片上传到大尺寸的 facebook，您需要使用自己的代码。

创建多部分实体。添加部分：no_story、描述（选项）和文件流：

```
entity.addPart("source", new InputStreamBody(ContentUtils.openAsStream(uri), ContentUtils.getContentName(uri))); 
```

发送 POST 请求（示例代码）：

```
 DefaultHttpClient httpClient = HttpConnector.createHttpClient();
    HttpPost request = new HttpPost(url);
    request.setEntity(entity);

    HttpResponse httpResponse = httpClient.execute(request);
    StatusLine statusLine = httpResponse.getStatusLine();

    if (statusLine.getStatusCode() == HttpStatus.SC_OK)
        return EntityUtils.toString(httpResponse.getEntity(), HTTP.UTF_8);
    else
        throw new FaceException(statusLine.toString()); 
```

网址在哪里：

[https://graph.facebook.com/me/{ALBUM_ID}/photos&access_token={YOUR-ACCESS-TOKEN](https://graph.facebook.com/me/) }。

如果照片上传成功，您会收到回复：

```
{"id":"XXXX","post_id":"YYYY"} 
```

XXXX - 新照片文件。YYYY - 在自己的墙上发布关于上传照片的 fid（如果您设置参数“no_story”=“0”，可能会丢失）。

# jquery - 如何在跨度中包装每个单词但保留文本格式

> ID：10442848
> 
> 赞同：5
> 
> 时间：2012-05-04T04:46:11.360
> 
> 标签：jquery, html, class

如何将每个单词包装在一个跨度中并保留文本格式？例如 br, *em* ,**强**

我正在使用以下代码将富文本编辑器中的每个单词包装在一个跨度中，但它剥离了我的所有格式。

```
$(window).load(function() {
$(".hero_image p").addClass("hero_image_caption");
$('.hero_image p').each(function(){
    var text = $(this).text().split(' ');

    for( var i = 0, len = text.length; i < len; i++ ) {
        text[i] = '<span>' + text[i] + '</span>';
        }
        $(this).html(text.join(' '));

        });        
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T05:02:56.763

```
$('.hero_image p').each(function(){
    var text = $(this).html().split(' '),
        len = text.length,
        result = []; 

    for( var i = 0; i < len; i++ ) {
        result[i] = '<span>' + text[i] + '</span>';
    }
    $(this).html(result.join(' '));
}); 
```

# algorithm - 回溯设计技术的一般定义

> ID：10442850
> 
> 赞同：2
> 
> 时间：2012-05-04T04:46:15.853
> 
> 标签：algorithm, backtracking

我正在阅读 Anany Levtin 的算法设计和分析简介中的回溯算法设计技术。

我很难理解回溯算法的通用定义并将其映射到 4 皇后问题。

> 对于从更一般的角度来看的回溯算法设计技术，大多数回溯算法符合以下描述。
> 
> 回溯算法的输出可以被认为是一个 n 元组 (x1, x2, x3,...,xn)，其中每个坐标 xi 是某个有限线性有序集合 Si 的一个元素。例如，对于 n 皇后问题，每个 Si 是整数 1 到 n 的集合。元组可能需要满足一些额外的约束（例如，n-queens 问题中的非攻击性要求）。
> 
> 例如对于 4 个皇后问题，每个 Si 设置为 {1, 2, 3, 4}
> 
> 回溯算法显式或隐式生成状态空间树，其节点表示部分构造的元组，其中第一个“i”坐标由算法的早期动作定义。如果这样的元组 (x1, x2, x3,.. xi) 不是一个解，算法会在 Si+1 中找到与 (x1, x2, x3...xi) 的值一致的下一个元素，并且问题约束并将其添加到元组中作为其 (i+1)st 坐标。如果这样的元素不存在，则算法回溯以考虑 xi 的下一个值，依此类推。

我对上述文字的问题是

1.  作者的意思是“回溯算法显式或隐式生成状态空间树，其节点表示部分构造的元组，其中第一个“i”坐标由算法的早期动作定义。如果这样的元组（x1 , x2, x3,...元组作为它的 (i+1)st 坐标。" ?

    具体来说，作者所说的算法在 Si+1 中找到下一个元素是什么意思？

    请要求用 4 个皇后问题解释上述陈述。

2.  如果元素不存在，算法回溯考虑下一个 xi 值？请用 4 个皇后问题解释这个语句。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:32:30.130

这种回溯的解释确实很难理解，因为它使用了很多正式的符号，没有用于特定目的或证明。让我试着用一种不太正式的方式来解释 4-queens 问题，这是一个很好的例子：

在回溯过程开始时，棋盘是空的。这是状态空间树的根。这个根有子节点，每个我们可以放置第一个皇后的可能性都有一个。我们不是在进入下一个级别之前构建每个子节点（这将导致状态空间树的 BFS），而是为第一个皇后选择一个可能的位置，从而构建一个子节点。从这个子节点中，我们再次有多个选项来放置第二个皇后，所以我们选择一个，依此类推。

如果我们到达无法放置剩余皇后的节点，我们将回溯 - 我们上一层到该节点的父节点并检查是否还有我们尚未探索的可能性。如果是，我们通过创建相应的子节点来探索它们，如果不是，我们再次回溯，再上一层，直到我们找到问题的解决方案（放置所有皇后）或者我们展开根节点的所有子节点并到达回溯操作期间的根节点 - 这意味着没有解决方案。

# google-bigquery - Google BigQuery：用户不是受信任的测试人员

> ID：10442851
> 
> 赞同：0
> 
> 时间：2012-05-04T04:46:24.013
> 
> 标签：google-bigquery

我正在使用大查询示例代码来处理大查询。使用大查询 api 读取数据集列表时出现以下错误。

代码是

```
Bigquery bigquery = Bigquery.builder(httpTransport, jsonFactory)
        .setHttpRequestInitializer(requestInitializer)
        .setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
          public void initialize(JsonHttpRequest request) {
            BigqueryRequest bigqueryRequest = (BigqueryRequest) request;
            bigqueryRequest.setPrettyPrint(true);
          }
        }).build();

        Datasets.List datasetRequest = bigquery.datasets().list(PROJECT_ID);
        DatasetList datasetList = datasetRequest.execute();
        if (datasetList.getDatasets() != null) {
          java.util.List datasets = datasetList.getDatasets();
          for (Object  dataset : datasets) {
            System.out.format("%s\n", ((com.google.api.services.bigquery.model.DatasetList.Datasets)dataset).getDatasetReference().getDatasetId());
          }
        } 
```

例外是

```
Exception in thread "main" com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
{
  "code" : 401,
  "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "User is not a trusted tester",
    "reason" : "authError"
  } ],
  "message" : "User is not a trusted tester"
}
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:159)
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:187)
    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:115)
    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:112)
    at com.google.api.services.bigquery.Bigquery$Datasets$List.execute(Bigquery.java:964)
    at ShortSample.main(ShortSample.java:74 
```

)

我不认为这是一个身份验证问题，因为我可以使用相同的代码通过 Google plus api 连接到 Google Plus 帐户。我还观察到 api 示例已经过时。

任何修复它的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:59:08.127

我怀疑您使用的是旧版本的 BigQuery Java 客户端库，它基于 API 的预发布版本 (v2beta1)。如果是这种情况，请尝试在此处升级到最新版本的客户端库：

[http://mavenrepo.google-api-java-client.googlecode.com/hg/com/google/apis/google-api-services-bigquery/v2-rev5-1.5.0-beta/](http://mavenrepo.google-api-java-client.googlecode.com/hg/com/google/apis/google-api-services-bigquery/v2-rev5-1.5.0-beta/)

我们将确保 API 客户端库页面上的链接也更新！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T22:32:41.490

我遇到了类似的问题，jcondit 的解决方案对我来说效果很好（更新 jars）。而对于认证码，你也可以看看[这里](https://stackoverflow.com/questions/10524576/bigquery-and-oauth2)。

# javascript - 单击单选按钮时选中复选框

> ID：10442856
> 
> 赞同：4
> 
> 时间：2012-05-04T04:47:44.187
> 
> 标签：javascript, jquery, checkbox, radio-button

我有这组单选按钮，比方说

```
radio 1
radio 2
radio 3
radio 4 
```

和一个复选框；

```
checkbox 1 
```

我想要实现的是，当我单击收音机 1 或收音机 3 时，复选框 1 将被选中。如果复选框被选中并且当您单击无线电 2 或无线电 4 时，该复选框将被取消选中。

我已经为它实现了一些代码，但它有一个小故障，当我点击收音机 1 时，它会选中复选框，但是当我点击收音机 3 时，它会取消选中复选框。

据说，当我单击收音机 1 时，它会检查，即使我单击收音机 3，它也不应该取消选中该复选框。

这是我的代码：

```
jQuery('#radio1 input:radio, #radio3 input:radio').click(function(){
    var checkbox = jQuery('#checkbox1');
    checkbox.attr('checked', !checkbox.attr('checked'));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:59:17.983

**HTML 代码：**

```
Radio1 :<input type="radio" id="radio1" name="radio"/><br>
Radio2 :<input type="radio" id="radio2" name="radio"/><br>
Radio3 :<input type="radio" id="radio3" name="radio"/><br>
Radio4 :<input type="radio" id="radio4" name="radio"/><br>
Checkbox :<input type="checkbox" id="checkbox1"/> 
```

**jQuery代码：**

```
 jQuery('#radio1 , #radio3').click(function(){      
jQuery('#checkbox1').attr('checked', true);   
 });        
jQuery('#radio2 , #radio4').click(function(){      
 jQuery('#checkbox1').attr('checked', false);  
 }); 
```

**现场演示：**

[http://jsfiddle.net/hQbpZ/](http://jsfiddle.net/hQbpZ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T04:50:49.020

```
$('input[type="radio"]').click(function(){
   var checkbox = $('#checkbox1');
   switch(this.id){
      case 'radio1':
      case 'radio3':
      checkbox.attr('checked', true);
      break;

      case 'radio2':
      case 'radio4':
      checkbox.attr('checked', false);
      break;
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T04:50:52.920

```
jQuery('#radio1, #radio3').click(function(){
    jQuery('#checkbox1').prop('checked', true);
});

jQuery('#radio2, #radio4').click(function(){
    jQuery('#checkbox1').prop('checked', false);
}); 
```

尽管您可以通过许多其他方式做到这一点。再举一个例子：

```
jQuery(':radio').change(function(){
    var toCheck = this.id == 'radio1' || this.id == 'radio3'; 
    jQuery('#checkbox1').prop('checked', toCheck);
}); 
```

[演示](http://jsfiddle.net/gdoron/FFBnj/4/)（标记取自@Matrix）

# javascript - 如何使用 javascript 允许用户在单击联系表单的链接时自动选择复选框？

> ID：10442857
> 
> 赞同：0
> 
> 时间：2012-05-04T04:47:49.817
> 
> 标签：javascript, forms, select

我页面上的链接访问联系表。联系表格有 3 个链接，我希望每个链接自动选择一个相应的复选框。

像这样：

LINK 1 -> 用户点击 -> 访问联系页面 -> 嵌入在链接中的 javascript 自动选择联系页面上“链接一”文本旁边的复选框

LINK 2 -> 用户点击 -> 访问联系页面 -> 嵌入在链接中的 javascript 自动选择联系页面上“链接二”文本旁边的复选框

LINK 3 -> 用户点击 -> 访问联系页面 -> 嵌入在链接中的 javascript 自动选择联系页面上“链接三”文本旁边的复选框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:07:17.090

你需要做两件事：

1.  为链接添加哈希，因此链接将如下所示： http [://www.yoursite.com/contact.html#link1、http](http://www.yoursite.com/contact.html#link1) : [//www.yoursite.com/contact.html#link2、http](http://www.yoursite.com/contact.html#link2) [://www。 yoursite.com/contact.html#link3](http://www.yoursite.com/contact.html#link3)等
2.  添加 onDomReady/onload 事件处理程序，检查 window.location.hash 属性并根据其值执行适当的操作

编辑：这是我的意思的[JSFiddle 。](http://jsfiddle.net/ucgUr/)

# ssl - 是否可以获得一个 SSL 证书 *.mysubdomain.example.com 和 mysubdomain.example.com

> ID：10442858
> 
> 赞同：3
> 
> 时间：2012-05-04T04:47:49.820
> 
> 标签：ssl, azure

是否可以获得一个 SSL 证书`*.mysubdomain.example.com`，并且`mysubdomain.example.com`我需要，因为我在我的专用服务器上使用 2 个 IP，但现在我在 azure 上迁移到 Azure，我们无法添加两个 https 端点。或其他天蓝色解决方案我需要两个 https 端点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:02:25.843

您可以购买通配符 SSL 证书，用于加密对 *.example.com 的请求。这将适用于无限数量的三级子域。要包含二级 (example.com) 和四级 (subforthlev.subthirdlev.example.com) 或更高的子域，您必须找到允许您在通配符证书。每个非三级域都需要手动添加为 SAN。

编辑：我已经多次使用[DigiCert 的通配符证书](http://www.digicert.com/welcome/wildcard-plus.htm)，并且没有遇到没有安装根证书的浏览器或设备（请参阅它们的[兼容性列表](http://www.digicert.com/welcome/compatibility.htm)）。DigiCert 通配符证书允许您保护无限数量的子域，无论域级别如何。摘自第一个链接：

> DigiCert WildCard ssl 证书的独特之处在于它允许您保护域的任何子域，包括使用一个证书的多个级别的子域。例如，*.digicert.com com 的通配符可以包含 server1.sub.mail.digicert.com 作为主题备用名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:16:53.230

您可以使用多个 SSL 证书并将它们全部添加到同一端点，方法是自动在计算机上安装证书并将 HTTPS 绑定添加到 IIS。

IIS 8 (Windows Server 2012) 支持 SNI，它使您能够将“主机头”添加到 HTTPS 绑定。

我是 Microsoft 技术传播者，我已在以下位置发布了详细说明和示例“即插即用”源代码： http: [//www.vic.ms/microsoft/windows-azure/multiples-ssl-certificates-on -windows-azure-云服务/](http://www.vic.ms/microsoft/windows-azure/multiples-ssl-certificates-on-windows-azure-cloud-services/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:25:26.673

如果您希望您的证书对 和 都有效，则它需要为两者`*.mysubdomain.example.com`都有`mysubdomain.example.com`一个主题备用名称条目。

`*.mysubdomain.example.com`通配符表达式不`mysubdomain.example.com`涵盖.

这些规则在[RFC 2818中定义并在](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)[RFC 6125](https://www.rfc-editor.org/rfc/rfc6125#section-6.4.3)中阐明：

> ```
>  If the wildcard character is the only character of the left-most
>    label in the presented identifier, the client SHOULD NOT compare
>    against anything but the left-most label of the reference
>    identifier (e.g., *.example.com would match foo.example.com but
>    not bar.foo.example.com or example.com). 
> ```

实际上，这确实是大多数浏览器的反应方式。

然而，颁发通配符证书的 CA 很可能`*.mysubdomain.example.com`也会为`mysubdomain.example.com`. 请咨询您的 CA。

# android - 我得到一个带有 jexcel 的 java.lang.NullPointerException

> ID：10442861
> 
> 赞同：0
> 
> 时间：2012-05-04T04:48:00.973
> 
> 标签：android, nullpointerexception

在 Android 中，我使用 jexcel api 编写一个 excel 文档：

```
package com.xls;

import android.app.Activity;
import android.os.Bundle;
import java.io.*;
import jxl.*;
import jxl.write.*; 
import jxl.write.biff.RowsExceededException;

public class ExcelActivity extends Activity {
    WritableWorkbook workbook;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        try {
            workbook = Workbook.createWorkbook(new File("output.xls"));
        } catch (IOException e) {
            e.printStackTrace();
        }

        WritableSheet sheet = workbook.createSheet("First Sheet", 0);  
       //nullPointerException here
    }
} 
```

由于 NullPointerException 无法启动 Activity，为什么？

```
FATAL EXCEPTION: main
ERROR/AndroidRuntime(455): java.lang.RuntimeException: Unable to start activity 
ComponentInfo{com.xls/com.xls.ExcelActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
at android.app.ActivityThread.access$1500(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4025)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method) 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:10:23.720

根据堆栈跟踪，您的代码似乎试图取消引用空指针，因此出现 NullPointerException。按照堆栈跟踪中的建议查看第 26 行。我相信这是以下内容：

```
WritableSheet sheet = workbook.createSheet("First Sheet", 0); 
```

您是否检查`Workbook.createWorkbook(new File("output.xls"))`过在此之前返回一个非空对象？

# regex - Actionscript 3 RegExp 量词似乎无法正常工作？

> ID：10442862
> 
> 赞同：0
> 
> 时间：2012-05-04T04:48:13.453
> 
> 标签：regex, actionscript, regex-greedy

在 Actionscript 3 中，我尝试使用正则表达式来测试用户输入。以下代码测试一个字符串：

```
private function ValidateModifier(tst:String):Boolean
{
    var validDieRoll:RegExp = /([+-]?)([0-9]+)d([0-9]+)/;
    return ( validDieRoll.test( tst ) );
} 
```

它应该允许在字符串序列的开头使用 + 或 - 符号，但只有一个。但是，它似乎忽略了 ? 量词接受任意数量的 + 或 - 符号。

我正在使用这个值数组进行测试：

```
tmpArray.push("3d6");
tmpArray.push("d36");
tmpArray.push("-3d6");
tmpArray.push("+d3");
tmpArray.push("++--+3d6");
tmpArray.push("d3");
tmpArray.push("3d"); 
```

在以下结果中，第五项应该是错误的。我在这里想念什么？

```
3d6 = true
d36 = false
-3d6 = true
+d3 = false
++--+3d6 = true
d3 = false
3d = false 
```

我已经尝试了正则表达式的这些排列，结果完全相同：

```
var validDieRoll:RegExp = /([+-]{0,1})([0-9]+)d([0-9]+)/;
var validDieRoll:RegExp = /([+-]{0,1}?)([0-9]+)d([0-9]+)/; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:01:34.167

你没有说 +/-**在字符串序列的开头**。因此，您的原始模式为您提供了“++--+3d6”的匹配项，因为它确实包含您指定的内容。

`^`在您的模式的开头添加，`$`最后添加。

```
var validDieRoll:RegExp = /^([+-]?)(\d+)d(\d+)$/; 
```

# c - Ruby C API`定义？SomeConstant 等价物？

> ID：10442864
> 
> 赞同：3
> 
> 时间：2012-05-04T04:48:15.780
> 
> 标签：c, ruby, ruby-c-extension

我正在尝试将 if 条件转换为：

```
unless defined? SomeConstant
  # do some stuff
end 
```

成为原生 C 扩展的一部分。有人知道如何`defined?`在 C API 中进行谓词检查吗？

编辑 | 我想我可以调用：

```
rb_funcall(rb_cObject, rb_intern("const_defined?"), 1, rb_intern("SomeConstant")) 
```

尽管这在语义上显然略有不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:51:29.693

如果您跟踪 1.9.3 源代码，您会发现它`defined?`是在以下代码中实现的[`insns.def`](https://github.com/ruby/ruby/blob/ruby_1_9_3/insns.def#L749)：

```
DEFINE_INSN
defined
(rb_num_t op_type, VALUE obj, VALUE needstr)
/* ... */
    switch (type) {
    /* ... */
      case DEFINED_CONST:
        klass = v;
        if (vm_get_ev_const(th, GET_ISEQ(), klass, SYM2ID(obj), 1)) {
            expr_type = "constant";
        }
        break; 
```

所以当你时`defined? SomeConstant`，你会通过那个大牌`switch`并最终跟注`vm_get_ev_const`。该函数定义在[`vm_insnhelper.c`](https://github.com/ruby/ruby/blob/ruby_1_9_3/vm_insnhelper.c#L1160)：

```
static inline VALUE
vm_get_ev_const(rb_thread_t *th, const rb_iseq_t *iseq,
                VALUE orig_klass, ID id, int is_defined) 
```

该功能恰好是静态的，因此您无法使用它。Looks like`vm_get_ev_const`是根据 and 定义的[`rb_const_defined`](https://github.com/ruby/ruby/blob/ruby_1_9_3/variable.c#L1846)，[`rb_const_defined_from`](https://github.com/ruby/ruby/blob/ruby_1_9_3/variable.c#L1858)并且这两个都应该在您的 C 中可用，因此您可以尝试这些；但你必须`klass`为那些找到合适的。

或者你可以按照你的想法去做，然后使用`Object.const_defined?`. 这样做的一个问题是，它不会对诸如 之类的东西做正确的事情`A::B`，你必须为此说`Object.const_defined? :A && A.const_defined? :B`，因为这`Object.const_defined? :'A::B'`只会在你的脸上抛出一个异常。这里的一般解决方案需要迭代和类查找。但是，如果您正在查看的类都在顶级名称空间中，那么一个简单`Object.const_defined?`的就可以了。

# android - Android - 简单的触摸事件管理

> ID：10442866
> 
> 赞同：0
> 
> 时间：2012-05-04T04:48:37.100
> 
> 标签：android

我有一个组件，我想在触摸时对内容和显示进行各种更改，并在手指返回时恢复。以下内容通常有效，但如果用户的手指在抬起之前离开组件本身，则 ACTION_UP 永远不会触发，因此它永远不会恢复到“向上”状态。

```
public class MyComponent extends SomeLayout {
    // ... stuff
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        final int action = event.getAction() & MotionEvent.ACTION_MASK;
        switch (action) {
        case MotionEvent.ACTION_DOWN :
            // do something...
            break;          
        case MotionEvent.ACTION_UP :
            // do something else...
            break;      
        }   
        return super.onTouchEvent(event);
    }
} 
```

此 ViewGroup 具有复杂的内容，不适合 StateDrawables。

有什么建议么？

TYIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:01:22.803

对于未来的搜索者，答案是 ACTION_CANCEL...

```
public class MyComponent extends SomeLayout {
    // ... stuff
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        final int action = event.getAction() & MotionEvent.ACTION_MASK;
        switch (action) {
        case MotionEvent.ACTION_DOWN :
            // do something...
            break;          
        case MotionEvent.ACTION_UP :
        case MotionEvent.ACTION_CANCEL :
            // do something else...
            break;      
        }   
        return super.onTouchEvent(event);
    }
} 
```

# c++ - 为什么 Qt 既不能识别我的头文件，也不能识别我的库文件？

> ID：10442867
> 
> 赞同：0
> 
> 时间：2012-05-04T04:48:39.317
> 
> 标签：c++, qt, header-files

![轮廓](../Images/a8411c34124a16d18d6a08960fa73c3f.png) 以上是我的PRO文件。有一个 PvAPI.lib、一个 ImageLib.lib 和一个 PvApi.h、一个 ImageLib.h 文件和一个 StdAfx.h 文件。后三个位于 INCLUDEPATH 路径中，库位置在 LIBS 下如下所示。

但是，编译器似乎仍然无法识别出现的第一个头文件。有什么理由吗？也许我错误地声明了路径？

问题：

> C:\Users\Andrew\Desktop\GO TO HELL\HardTrigger\USERINTERFACE-THINGS\UserInterface-build-desktop-Qt_4_8_1_for_Desktop__-_MSVC2010__Qt_SDK__Debug....\HardTrigger.cpp:62：错误：C1083：无法打开包含文件：'PvApi .h'：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:13:00.153

PvApi.h 似乎在“somefolder\inc-pc”中，而 INCLUDEPATH 包含“somefolder\inc-pc\include”

# schema - 如何使用核心服务获取 SDL Tridion 中模式字段的值？

> ID：10442869
> 
> 赞同：-2
> 
> 时间：2012-05-04T04:49:00.443
> 
> 标签：schema, tridion

我想使用核心服务在 sdl tridion 中获取模式字段的值 Camn 有人帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:29:02.810

您能否澄清一下您的意思是我的模式字段值？要获取架构字段列表，您可以使用核心服务 ReadSchemaFields 方法。

```
SchemaFieldsData schemaFieldsData = _coreServiceClient.ReadSchemaFields(schemaId, false, null);

ItemFieldDefinitionData firstField = schemaFieldsData.Fields.First<ItemFieldDefinitionData>();

var fieldName = firstField.Name; 
```

# python - Python多处理管道将无法正确recv（）

> ID：10442870
> 
> 赞同：2
> 
> 时间：2012-05-04T04:49:06.603
> 
> 标签：python, multiprocessing, pipe, pydev

这适用于 Python 3.2.2。我只是在学习 Python 和多处理是如何工作的，这个简单的例子让我很吃惊：

```
from multiprocessing import Pipe, Process

def f(r):
    print(r.recv())

if __name__ == '__main__':
    q, r = Pipe()
    p = Process(target=f, args=(r,))
    p.start()
    q.send([42, None, 'hello'])
    p.join() 
```

主线程创建一个新`Process`的`p`, 并发送`r`一个双向连接对象给 function `f()`。当进程`p`启动时，我希望`r.recv()`阻塞（据我所知，这意味着这个进程将无限期地等待，直到有东西通过管道），直到主进程通过 with 发送一些对象`q.send`。

然后`p.join()`应该让主进程等到`p`运行它的过程。

但是什么都没有发生。如果我向 中添加一条`print`语句`f()`，那里也不会发生任何事情，就好像`f()`从来没有运行过并且`p.start()`没有功能一样。

您能解释一下为什么这不起作用以及可以解决的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-23T15:05:46.247

我知道这已经有一段时间了，但对于其他有这个问题的人，你的管道末端颠倒了。您正在尝试使用接收端发送，并尝试使用发送端接收。我发现将 duplex=True 添加到 Pipe 构造函数可以更轻松地处理不同的端。

来源：[https ://docs.python.org/2/library/multiprocessing.html#pipes-and-queues](https://docs.python.org/2/library/multiprocessing.html#pipes-and-queues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T19:40:51.033

根据经验，我发现我无法从已启动的流程中打印。您可以尝试反转您的程序：

```
from multiprocessing import Pipe, Process

def f(r):
    r.send([42, None, 'hello'])

if __name__ == '__main__':
    q, r = Pipe()
    p = Process(target=f, args=(r,))
    p.start()
    print(q.recv())
    p.join() 
```

# java - 像素帮助 - Java

> ID：10442875
> 
> 赞同：1
> 
> 时间：2012-05-04T04:49:36.417
> 
> 标签：java

好的，所以我有：

```
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
Rectangle screenRectangle = new Rectangle(screenSize);
Robot robot = new Robot();
BufferedImage image = robot.createScreenCapture(screenRectangle)

int w = image.getWidth(null);
int h = image.getHeight(null);
int[] rgbs = new int[w*h];
image.getRGB(0, 0, w, h, rgbs, 0, w);
// find your pixel in the rgbs array
for(int y=0;y<h;y++) {
    for(int x=0;x<w;x++) {
        if(rgbs[(y*w) + x] == mypixel) { // mypixel
            robot.mouseMove(x, y);
            robot.mousePress(InputEvent.BUTTON1_MASK);
            robot.mouseRelease(InputEvent.BUTTON1_MASK);
        }
    }
} 
```

有人可以向我解释一下，或者给我一个 mypixel 可能是什么的例子吗？答案可能很明显，但我有点困惑。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:26:52.357

获得所需颜色值的最简单方法是使用

```
mypixel = new Color(red, green, blue).getRGB(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:21:17.637

rbgs 是整个屏幕截图的颜色值数组。下面的这一行将图片中当前像素的颜色值与您想要单击的颜色进行比较。该变量可能是一个[“压缩”](https://stackoverflow.com/questions/6117614/packing-4-bytes-into-an-int)整数。
`if(rgbs[(y*w) + x] == mypixel)`

# java - Java 邮件到 Exchange 服务器“不支持登录方法”

> ID：10442877
> 
> 赞同：25
> 
> 时间：2012-05-04T04:49:40.130
> 
> 标签：java, imap, jakarta-mail, exchange-server

我正在尝试实现一个 Java Mail servlet，第一步是连接到 IMAP 服务器。

我可以通过 143 端口（默认 IMAP 端口）远程登录到服务器，远程登录说：`OK The Microsoft Exchange IMAP4 service is ready.`

现在我正在尝试使用 Java Mail API 连接到服务器，如下所示：

```
Properties props = new Properties();
session = Session.getDefaultInstance(props, null);
store = session.getStore("imap");
store.connect("host","user","password"); 
```

而且我可以使用现有的 Outlook Webapp 连接到同一台服务器，该服务器具有我试图在 java 中传递给它的相同凭据。

但是运行它`session.setDebug(true)`会产生以下输出：

```
DEBUG: setDebug: JavaMail version 1.4.5
DEBUG: getProvider() returning javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc]
DEBUG: mail.imap.fetchsize: 16384
DEBUG: mail.imap.statuscachetimeout: 1000
DEBUG: mail.imap.appendbuffersize: -1
DEBUG: mail.imap.minidletime: 10
DEBUG: trying to connect to host "myHost", port 143, isSSL false
* OK The Microsoft Exchange IMAP4 service is ready.
A0 CAPABILITY
* CAPABILITY IMAP4 IMAP4rev1 LOGINDISABLED STARTTLS UIDPLUS CHILDREN IDLE NAMESPACE LITERAL+
A0 OK CAPABILITY completed.
DEBUG: protocolConnect login, host=myHost, user=myUser, password=<non-null>
javax.mail.MessagingException: No login methods supported!; 
```

**编辑：**

我`prop.setProperty("mail.imap.starttls.enable", "true")`按照建议添加。

但是，我开始得到这个调试输出：

```
DEBUG: setDebug: JavaMail version 1.4.5
DEBUG: getProvider() returning javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc]
DEBUG: mail.imap.fetchsize: 16384
DEBUG: mail.imap.statuscachetimeout: 1000
DEBUG: mail.imap.appendbuffersize: -1
DEBUG: mail.imap.minidletime: 10
DEBUG: enable STARTTLS
DEBUG: trying to connect to host "myHost", port 143, isSSL false
* OK The Microsoft Exchange IMAP4 service is ready.
A0 CAPABILITY
* CAPABILITY IMAP4 IMAP4rev1 LOGINDISABLED STARTTLS UIDPLUS CHILDREN IDLE NAMESPACE LITERAL+
A0 OK CAPABILITY completed.
DEBUG: protocolConnect login, host=myHost, user=myUser, password=<non-null>
A1 STARTTLS
A1 OK Begin TLS negotiation now.
DEBUG IMAP: STARTTLS Exception: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

假设这是一个证书问题，我按照[这些说明](http://www.webapper.com/blog/index.php/2007/02/09/troubleshooting-javaxnetsslsslhandshakeexception/)将邮件服务器添加到我的 cacerts 文件中。那里包含的测试程序运行得很好，我可以使用 SSL url 进行连接，但是在运行 java 邮件类时我仍然遇到了同样的异常。

我还尝试使用：（而不是“imap”）更改为“imaps”，`session.getStore("imaps")`甚至无法获得“Microsoft Exchange Server 现已准备就绪”消息。我认为是因为只要指定了“imap”，它就会尝试连接端口 993。但是使用 telnet 到端口 993 不会显示与电子邮件服务器的任何连接。

所以接下来我尝试强制程序在端口 143 上使用 SSL，如下所示：

```
// Use SSL
prop.setProperty("mail.imap.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
prop.setProperty("mail.imap.socketFactory.fallback", "false");

// Use port 143
prop.setProperty("mail.imap.port", "143");
prop.setProperty("mail.imap.socketFactory.port", "143"); 
```

只收到这个异常，所以我认为它与 SSL 没有任何关系：

```
DEBUG: mail.imap.fetchsize: 16384
DEBUG: mail.imap.statuscachetimeout: 1000
DEBUG: mail.imap.appendbuffersize: -1
DEBUG: mail.imap.minidletime: 10
DEBUG: trying to connect to host "myHost", port 143, isSSL false
Not able to process the mail reading.
javax.mail.MessagingException: Unrecognized SSL message, plaintext connection?; 
```

上面的 TLS 异常 ( `DEBUG IMAP: STARTTLS Exception: javax.net.ssl.SSLHandshakeException:`) 是否来自未在 Exchange Server 上启用的 TLS？

我没有准备好访问电子邮件服务器的权限，但我可能会让人让我进入。

**解决方案：**

HulkingUnicorn 在他的回答下方的评论指出了[这个答案](https://stackoverflow.com/a/1219941/1062992)，这是需要的确切处理。显然 MS Exchange Server 有这个问题。除了将该答案中列出的类添加到我的包中之外，我只是像这样实现了我的邮件连接，一切都很好：

```
Properties prop = new Properties();
prop.setProperty("mail.imap.starttls.enable", "true");
prop.setProperty("ssl.SocketFactory.provider", "my.package.name.ExchangeSSLSocketFactory");
prop.setProperty("mail.imap.socketFactory.class", "my.package.name.ExchangeSSLSocketFactory");
session = Session.getDefaultInstance(prop, null);
session.setDebug(true);
store = session.getStore("imap");
store.connect("myHost","myUser","myPassword"); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-04T05:58:40.627

这部分，`* CAPABILITY IMAP4 IMAP4rev1 LOGINDISABLED` 建议你不能登录，在[这个线程](https://forums.oracle.com/forums/thread.jspa?threadID=2329417)中，OP 通过将他的 Javamail 更新到 1.4.4 来解决它（尽管你的调试输出表明你已经得到了）。尝试使用[1.4.5。](http://www.oracle.com/technetwork/java/javamail/index-138643.html)

实际上，请在创建会话之前尝试添加此行；您的电子邮件服务器支持它，并且默认情况下它被禁用： `props.put("mail.imap.starttls.enable", "true");`

[这个答案](https://stackoverflow.com/a/1219941/1062992)解决了这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T21:22:05.710

您可以使用`com.sun.mail.util.MailSSLSocketFactory`javamail 1.4.5 API 的一部分。

例子：

```
MailSSLSocketFactory sf = new MailSSLSocketFactory();
sf.setTrustAllHosts(true);
props.put("mail.imap.starttls.enable", "true");
props.put("mail.imap.ssl.socketFactory", sf); 
```

无需使用自定义 SSLSocketFactory。

# c# - 在 WebBrowser 的 html 代码中查找并单击没有 ID 的按钮

> ID：10442882
> 
> 赞同：5
> 
> 时间：2012-05-04T04:50:09.423
> 
> 标签：c#, browser

我基本上有一个 Web 浏览器控件，它正在通过并自动完成一些表单，到目前为止这很容易，但是我得到了一个没有标有 ID 的“提交”或“重置”按钮的表单或姓名。（我需要能够同时单击）示例：

**提交按钮**

```
<td align="right" valign="middle" class="LeftSide" style="padding-right: 20; padding-top: 10;"><button class="Search" type="submit" tabindex="7"><b>Search</b></button></td> 
```

**复位按钮**

```
<td align="left" valign="middle" class="RightSide" style="padding-left: 20; padding-top: 10;" colspan="2"><button class="Search" type="reset" tabindex="8"><b>Clear</b></button></td> 
```

我将如何在 HtmlDocument 中搜索这些按钮并单击它们？它们嵌套如下：

```
<body><table><form><tr><td><button>'s 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T05:05:29.200

类似的东西，也许？

```
public void ClickButton(string type) {
    var button = myWebBrowser.Document.GetElementsByTagName("button")
             .Cast<HtmlElement>()
             .FirstOrDefault(m => m.GetAttribute("type") == type);
    if (button != null)
        button.InvokeMember("click"); 
} 
```

用法

```
ClickButton("reset");
ClickButton("submit"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T05:04:48.430

```
<td align="right" valign="middle" class="LeftSide" style="padding-right: 20; padding-top: 10;"><input type="submit" value="Submit" /></td>

<td align="left" valign="middle" class="RightSide" style="padding-left: 20; padding-top: 10;" colspan="2"><input type="reset" value="Reset" /></td>

HtmlElementCollection elc = this.webBrowser1.Document.GetElementsByTagName("input");  
foreach (HtmlElement el in elc)  
{  
   if (el.GetAttribute("type").Equals("submit"))  
   {  
        el.InvokeMember("click");  
   }  
 } 
```

# html - 如何为星星图像制作发光效果

> ID：10442883
> 
> 赞同：0
> 
> 时间：2012-05-04T04:50:13.260
> 
> 标签：html

我有一个星形图像。我想将它的效果更改为 onclick 时发光。我尝试使用代码更改它的颜色

onclick="document.bgcolor="red"" 在图像 src 标签内。但它对我不起作用。谁能帮助指导我一些好的教程或一些示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:37:41.947

一个简单的解决方案是创建另一个具有所需效果的图像，即发光。添加`id="star"`到您的`<img>`标签，然后在单击时使用 javascript 将不发光的图像与发光的图像交换。

```
var image1 = document.getElementById('star');
var image2 = "http://link/to/new/image.png";

function changeImage() {
  image1.setAttribute('src', image2);
}

image1.addEventListener("click", changeImage, false); 
```

注意 - 更改值`image2`以匹配新图像的路径

# variables - 根据其他变量设置变量名

> ID：10442884
> 
> 赞同：0
> 
> 时间：2012-05-04T04:50:15.823
> 
> 标签：variables, cocos2d-iphone, c-preprocessor

我需要设置语言

我有：

```
#define kMenuSettingsHeaderrus @"Настройки"
#define kMenuSettingsHeadereng @"Settings" 
```

我想使用这个全局变量将字符串设置为标签，具体取决于

```
_language= [[SettingsManager sharedSettingsManager] getLanguage];

_language can be @"rus" or @"eng"

CCLabelTTF *settingsLabel = [CCLabelTTF labelWithString:[NSString stringWithFormat:@"kMenuSettingsHeader%@",_language] fontName:kLabelFontNameTTF fontSize:kMenuHeaderFontSize]; 
```

你能帮我吗，在php中我这样做就像$$

一个来自 php 的例子：

```
$a = "hello";
$$a = "world"; => $hello="world" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:26:56.027

你正在做的事情会给出 kMenuSettingsHeadereng 或 kMenuSettingsHeaderrus 作为结果，因为它们将被视为字符串而不是宏......所以使用这个

```
#define kMenuSettingsHeaderrus @"Настройки"
#define kMenuSettingsHeadereng @"Settings"

_language= [[SettingsManager sharedSettingsManager] getLanguage];

CCLabelTTF *settingsLabel;
 if ([_langueage isEqualToString:@"rus"])
{
settingsLabel = [CCLabelTTF labelWithString:kMenuSettingsHeaderrus fontName:kLabelFontNameTTF fontSize:kMenuHeaderFontSize];
}
else if ([_langueage isEqualToString:@"eng"])
{
settingsLabel = [CCLabelTTF labelWithString:kMenuSettingsHeadereng fontName:kLabelFontNameTTF fontSize:kMenuHeaderFontSize];
} 
```

检查语法...我没有 X 代码来检查...希望这会有所帮助.. :)

# vim - 在 cscope 上，我可以用一些单词列出函数名称吗？

> ID：10442888
> 
> 赞同：1
> 
> 时间：2012-05-04T04:50:28.757
> 
> 标签：vim, ctags, cscope

当我在 VIM 上使用 cscope 时

我必须输入完整的函数名称。

例如

> cscope find s SearchGoIndexOne

当我知道完整的函数名称时是可能的，但当我只知道部分单词时不可用。

有什么好的解决方案吗？

或任何用于替换 cscope 的插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:04:35.747

您可以将 cscope 设置为您的标签系统：

`set cst`

这将允许您使用普通的标签功能来执行标签搜索。该`tag`命令将为您完成标签名称。例如

`:tag MyFunc<TAB>`

哪个应该给你你想要的。另外不要忘记您可以使用 cscope 进行正则表达式搜索，这也可用于查找部分符号名称：

`cscope find e SearchGo.*`

最后但并非最不重要的一点是，使用 cscope 可以做的最好的事情之一就是映射一些对光标所在单词起作用的击键。这给您一种非常流畅的 IDE 感觉：

```
fun! MapCSKeys()
    nmap cF :cs f f <C-R><C-F><CR>
    nmap cS :cs f s <C-R><C-W><CR>
    nmap cI :cs f i <C-R><C-W><CR>
    nmap cE :cs f e <C-R><C-W><CR>
    nmap cG :cs f g <C-R><C-W><CR>
    nmap cD :cs f d <C-R><C-W><CR>
    nmap cC :cs f c <C-R><C-W><CR>
    nmap cT :cs f t <C-R><C-W><CR>
    nmap cWF :vert scs f f <C-R><C-F><CR>
    nmap cWS :vert scs f s <C-R><C-W><CR>
    nmap cWI :vert scs f i <C-R><C-W><CR>
    nmap cWE :vert scs f e <C-R><C-W><CR>
    nmap cWG :vert scs f g <C-R><C-W><CR>
    nmap cWD :vert scs f d <C-R><C-W><CR>
    nmap cWC :vert scs f c <C-R><C-W><CR>
    nmap cWT :vert scs f t <C-R><C-W><CR>
endfun 
```

# iphone - iphone/ipad 中的二维码阅读器

> ID：10442898
> 
> 赞同：0
> 
> 时间：2012-05-04T04:52:09.297
> 
> 标签：iphone, objective-c, camera, qr-code

我有一个应用程序，我想在其中扫描 1 家商店的食品包装上的 QR 码 + 条形码。我曾尝试使用 ZBar 阅读器进行条码扫描。它运行良好。现在我也想扫描二维码。为此，我搜索并下载了示例代码。但一切都不合适。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:04:57.620

如果您想阅读**QRCode，请使用 Zbar sdk**

尝试这个

> ZBarImageScanner *scanner = reader.scanner;
> 
> [扫描仪设置符号：ZBAR_QRCODE 配置：ZBAR_CFG_ENABLE 到：1]；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:48:01.603

我在我的许多应用程序中都使用了这个[http://zbar.sourceforge.net/iphone/sdkdoc/install.html](http://zbar.sourceforge.net/iphone/sdkdoc/install.html)来成功读取二维码、条形码、UPC 码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:58:08.560

Megha：Zbar SDK 最适合条形码和 QR 码扫描仪你必须尝试这个链接 [https://github.com/a2n/zbar-iphone-example](https://github.com/a2n/zbar-iphone-example) 我也在我的应用程序中尝试过这个并且它的工作完美。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T20:34:27.743

[zxing](http://code.google.com/p/zxing/)有一个用于 qr 码读取的 iphone 端口

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T05:02:04.147

二维码有40个版本。我确定 ZDBar SDK 扫描版本 1 QRCode 我已成功使用它。检查文档以验证其他支持的版本。您确定要支持的二维码版本了吗？

干杯

# objective-c - 使用 ARC 时，Core Data 中的实体应该是强属性还是弱属性？

> ID：10442899
> 
> 赞同：2
> 
> 时间：2012-05-04T04:52:21.057
> 
> 标签：objective-c, memory-management, automatic-ref-counting

我一直对核心数据实体感到困惑。既然你从不分配它们，你需要保留它们吗？当视图控制器将实体作为其属性之一时，当另一个视图控制器分配实体时它应该是**弱**的，而当视图控制器设置属性本身时它应该是**强的？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:08:03.207

Core Data 实体和其他实体一样只是一个对象，因此您应该遵循[内存管理规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)。当您需要它们和不再需要它们时，您`retain`是实体。`release`

例如：使用 sqlite 后端，核心数据将缓存加载的数据以最小化发送到 db 的请求量。但它不能将所有记录保存在内存中，它应该了解您使用哪些实体，哪些不使用，因此它可以释放未使用和空闲的内存。如果使用`weak`属性，您最终可能会得到垃圾指针或 nil 而不是实际对象。

# c++ - 重载后缀运算符如何工作？

> ID：10442904
> 
> 赞同：0
> 
> 时间：2012-05-04T04:52:54.553
> 
> 标签：c++, operator-overloading, postfix-operator, prefix-operator

我有以下代码：

```
class  Array
{  
   public: 
       int aaa;
       Array():aaa(1){}
      void print()
      {
          cout << aaa << endl;
      }

      Array& operator++()
      {
          aaa++;
          return *this;
      }
      Array operator++(int)
      {
          Array a(*this);
          aaa++;
          return a;
      }
}; 
```

我有一些问题如下：

1.  为什么前缀返回引用而后缀返回对象？在 C++ Primer 一书中，作者只解释了“ `For consistency with the built-in operators`”。

2.  然后，我测试了代码：

    数组 ar;

    ```
     (ar++).print(); // print 1

        ar.print(); // print 2 
    ```

输出正是我所期望的。现在我将重载后缀函数中的代码更改为：

```
Array operator++(int)
{
     Array a(*this);
     a.aaa++; // changed this
     return a;
} 
```

我调用了测试代码：

```
Array ar;
(ar++).print(); // this prints 2
ar.print(); // this prints 1 
```

为什么我会得到这样的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:59:28.780

1.  后缀运算符返回一个对象，而不是引用，因为它必须返回当前对象的未*更改*版本；它必须在增量完成之前返回值。因此必须分配一个新对象。如果你返回一个引用，它会引用*什么？*

2.  在您的第二个示例中，您正在创建一个新对象，将其递增并返回它，但您并没有更改运算符应用于的原始对象——这显然是错误的，因此会给出错误的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:03:42.103

虽然前缀和后缀运算符在直觉上似乎会*改变*调用它们的对象，但它们实际上具有不同的语义含义。前缀运算符接受一个对象，对其应用增量操作，并返回相同的对象。后缀运算符获取一个对象，对其进行复制，将增量运算符应用于原始对象，然后返回副本。

It's for this reason that you may have seen various sources discouraging the use of the postfix operator when possible -- because the postfix copy creates a temporary object, it may be less efficient than the prefix operator. For an object that has to maintain a lot of state information, using the postfix operator can be expensive.

# javascript - execCommand 创建无效的 html

> ID：10442908
> 
> 赞同：0
> 
> 时间：2012-05-04T04:53:45.203
> 
> 标签：javascript, execcommand

我正在为应用程序创建一个简单的 RTE，它不需要太复杂，所以我认为使用 execCommands 可能是最好的解决方案。但是，我遇到了麻烦，因为这些命令创建了无效的 HTML。这是我正在使用的javascript，任何对造成这种情况的原因的见解将不胜感激。

```
 $('.turnEditOn').live('click',function(){
        richTextEditor.document.designMode = 'ON';
        $('#richTextEditor').focus();   });
    $('#bold').live('click',function(){
        richTextEditor.document.execCommand('bold',false,null);
        $('#richTextEditor').focus();   });
    $('#underline').live('click',function(){
        richTextEditor.document.execCommand('underline',false,null);
        $('#richTextEditor').focus();   });
    $('#italic').live('click',function(){
        richTextEditor.document.execCommand('italic',false,null);
        $('#richTextEditor').focus();   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:19:29.777

HTML：

```
<div id="turnEditOn" class="command">on</div>
<div id="bold" class="command"><b>B</b></div>
<div id="italic" class="command"><i>I</i></div>
<div id="underline" class="command"><u>U</u></div>
<div class="command" onclick="alert(document.getElementById('richTextEditor').contentDocument.body.innerHTML);">Show HTML</div>
<br/>
<iframe id="richTextEditor" style="width:500px;height:300px;"></iframe> 
```

JAVASCRIPT+jQuery(onDomReady):

```
var richTextEditor=document.getElementById("richTextEditor");
$('#turnEditOn').live('click',function(){
    richTextEditor.contentDocument.designMode = 'ON';
    richTextEditor.contentDocument.body.contentEditable=true;
    // Switch FireFox RTE execCommand engine to work in same manner as IE
    try{richTextEditor.contentDocument.execCommand('styleWithCSS',false,false);}
    catch(e){}
    richTextEditor.focus();
});
$('#bold').live('click',function(){
    richTextEditor.contentDocument.execCommand('bold',false,null);
    richTextEditor.focus();
});
$('#underline').live('click',function(){
    richTextEditor.contentDocument.execCommand('underline',false,null);
    richTextEditor.focus();
});
$('#italic').live('click',function(){
    richTextEditor.contentDocument.execCommand('italic',false,null);
    richTextEditor.focus();
}); 
```

示例：http: [//jsfiddle.net/d2L2A/](http://jsfiddle.net/d2L2A/)

阅读[MDN 中的富文本编辑](https://developer.mozilla.org/en/Rich-Text_Editing_in_Mozilla#Executing_Commands)

# datetime - 在grails中使用日期查询

> ID：10442911
> 
> 赞同：0
> 
> 时间：2012-05-04T04:54:39.593
> 
> 标签：datetime, grails

我正在尝试在 grails 中运行查询，而我想要过滤的字段之一是 mysql 中的 datetime 类型。我试过这样做：

```
def formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss")
def timeNow = formatter.format(new Date())
foundUsers = User.executeQuery("from User u where u.username LIKE '%"+params.searchStr+"%' and u.enabled =1 and u.expiration_date>"+timeNow,[max:20]) 
```

但这给了我一个错误：意外令牌！我无法更改域用户和数据库，因为它们很旧并且包含实时数据。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:37:38.363

1.  我相信意外的令牌是因为 '>' 在 u.expiration_date 之后
2.  您的代码不保存用于 sql 注入。
3.  你的鳕鱼应该是这样的

    def foundUsers= User.findByUsernameLikeAndEnabledAndExpiration_date('%params.searchStr%',1,timeNow)

阅读有关动态查找器的更多信息

[http://grails.org/doc/latest/guide/GORM.html#querying](http://grails.org/doc/latest/guide/GORM.html#querying)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:26:05.153

试试这个：

```
 foundUsers = User.executeQuery("from User u where u.username LIKE ? and u.enabled = 1 and u.expiration_date > ?",['%params.searchStr%', timeNow],[max:20]) 
```

# android - 两个机器人测试用例，但第二个挂在那里没有响应（在 JUnit 视图中）

> ID：10442912
> 
> 赞同：4
> 
> 时间：2012-05-04T04:54:40.763
> 
> 标签：android, junit, robotium

我设法在包含 robots-solo-3.2.1.jar 的 XXTest.java 中编写了两个测试用例，幸运的是在 JUnit 视图中它显示第一个已完成，该设备完全可以正常工作（也在模拟器上）。

然后它继续到第二个，但它只是永远挂在那里！抱歉，我无法在我的帐户中附加屏幕截图。

这是我的代码：

```
 public class XXTest extends ActivityInstrumentationTestCase2<SignInActivity> {

      private Solo solo;
      private Activity mActivity;
      private static final String account = "someone";
      private static final String pwd = "123456";

      @SuppressWarnings("deprecation")
      public XXTest() {
        super("com.acompany.android", SignInActivity.class);
      }

      protected void setUp() throws Exception {
        super.setUp();
        this.mActivity = getActivity();
        solo = new Solo(getInstrumentation(), mActivity);
      }

      @Smoke
      public void testLogIn() throws Exception {

        EditText accountInput = (EditText) solo.getView(R.id.edit_account);
        EditText pwdInput = (EditText) solo.getView(R.id.edit_password);

        solo.clearEditText(accountInput);
        solo.clearEditText(pwdInput);

        solo.enterText(accountInput, account);
        solo.enterText(pwdInput, pwd);
        solo.clickOnButton(mActivity.getResources()
            .getString(R.string.text_sign_in));

        solo.waitForActivity("MainActivity");
        solo.assertCurrentActivity("Expect MainActivity shown...", "MainActivity");
        boolean expected = true;
        boolean actual = solo.searchButton(mActivity.getResources().getString(
            R.string.welcome_dialog_start));
        assertEquals("find friend dialog not shown", expected, actual);
      }

      @Smoke
      public void testOpenPref() throws Exception {

        solo.goBack();
        solo.clickOnMenuItem(mActivity.getResources().getString(
            R.string.text_preferences));
        solo.assertCurrentActivity("Expected PrefActivity..", "PrefActivity");

        solo.goBackToActivity("MainActivity");
        solo.assertCurrentActivity("Expected MainActivity..", "MainActivity");
      }

      protected void tearDown() throws Exception {
        super.tearDown();
      }
} 
```

我从 Robotium 教程中搜索了 NotePadTest.java 的示例，其中的 3 个测试用例工作正常！

请问哪里出错了？？我在某处遗漏了什么吗？为什么第二个测试用例没有运行？

顺便提一句。一个测试项目中可以有多个类扩展 ActivityInstrumentationTestCase2 吗？好奇的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:37:58.590

您需要在您的 tearDown() 中使用 solo.finishOpenedActivities()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-28T15:02:22.613

@Robert-这是 Activity 测试本身的问题，而不是特定于机器人的问题。

对于第一个测试方法：您的基本流程如下所示： 1>在 setUp() 方法中加载主要活动（例如**MainActivity**）> 在您的 testMethod1() 中执行一些操作 - 这会导致您进入另一个活动（例如**AnotherActivity** ) > 并在 tearDown() 中杀死 setUp() 方法中启动的活动，即**MainActivity**

注意：但**AnotherActivity**仍然有效

对于第二种测试方法：基本流程如下： 2>在 setUp() 方法中尝试再次加载主活动（比如**MainActivity**），虽然之前启动的**AnotherActivity**还没有被杀死，***所以它挂在那里***，它甚至没有进入 testMethod2() fr 执行 -

注意：当执行标记指向 testMethod2() 时，eclipse 图形运行器显示它挂起，人们认为它卡在 testMethod2() 中 - 但问题在于 testMethod2() 的 setUp() 而不是 testMethod2() 本身。

解决方案： 1>只需查看您的交叉活动导航 - 在每个 testMethod() 结束时使用 solo.goBack()从您当前的活动返回到相同的主要活动**MainActivity** （由于您的操作，您已登陆)

结果 - 在 testMethod1() 结束时，仅保留在 setUP() 中打开的主要活动。所以它被成功杀死。没有活动仍然活着，对于 testMethod2()。setUP() 能够再次加载**MainActivity**而不会挂起 - 并且 testMethod2() 被执行。

希望它澄清:)

# python - 处理简单的 HTML 表格列解析

> ID：10442913
> 
> 赞同：2
> 
> 时间：2012-05-04T04:55:18.970
> 
> 标签：python, html, lxml, html-table, tablerow

我正在使用 python 处理 HTML 表。

我想知道如何使用 lxml 获取不同的列值？

HTML表格：

```
<table border="1">
<tr>
<td>Header_1</td>
<td>Header_2</td>
<td>Header_3</td>
<td>Header_4</td>
</tr>
<tr>
<td>row 1_cell 1</td>
<td>row 1_cell 2</td>
<td>row 1_cell 3</td>
<td>row 1_cell 4</td>
</tr>
<tr>
<td>row 2_cell 1</td>
<td>row 2_cell 2</td>
<td>row 1_cell 3</td>
<td>row 1_cell 4</td>
</tr>
<tr>
<td>row 3_cell 1</td>
<td>row 3_cell 2</td>
<td>row 1_cell 3</td>
<td>row 1_cell 4</td>
</tr>
<tr>
<td>row 4_cell 1</td>
<td>row 4_cell 2</td>
<td>row 1_cell 3</td>
<td>row 1_cell 4</td>
</tr>
</table> 
```

我希望得到输出：

```
[
[
('Header_1', 'Header_2'),
('row 1_cell 1', 'row 1_cell 2'),
('row 2_cell 1', 'row 2_cell 2'),
('row 3_cell 1', 'row 3_cell 2'),
('row 4_cell 1', 'row 4_cell 2')
],
[
('Header_1', 'Header_3'),
('row 1_cell 1', 'row 1_cell 3'),
('row 2_cell 1', 'row 2_cell 3'),
('row 3_cell 1', 'row 3_cell 2'),
('row 4_cell 1', 'row 4_cell 3')
]
] 
```

我怎样才能获取如此不同的列及其值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:18:15.660

我不知道您如何选择 Header1+Header2 或 Header1+Header3,... 由于表格必须相当小，我建议收集所有数据，然后才提取表格的所需子集. 以下代码显示了可能的解决方案：

```
import lxml.etree as ET

def parseTable(table_fragment):
    header = None   # init - only to create the variable (name)
    rows = []       # init

    # Parse the table with lxml (the standard xml.etree.ElementTree would be also fine).
    tab = ET.fromstring(table_fragment)
    for tr in tab:
        lst = []
        if header is None:
            header = lst
        else:
            rows.append(lst)

        for e in tr:
            lst.append(e.text)

    return header, rows

def extractColumns(header, rows, clst):
    header2 = []
    for i in clst:
        header2.append(header[i - 1])   # one-based to zero-based

    rows2 = []
    for row in rows:
        lst = []
        rows2.append(lst)
        for i in clst:
            lst.append(row[i - 1])      # one-based to zero-based

    return header2, rows2

def myRepr(header, rows):
    out = [repr(tuple(header))]         # init -- list with header
    for row in rows:
        out.append(repr(tuple(row)))    # another row
    return '[\n' + (',\n'.join(out)) + '\n]'   # join to string

table_fragment = '''\
<table border="1">
<tr>
<td>Header_1</td>
<td>Header_2</td>
<td>Header_3</td>
<td>Header_4</td>
</tr>
<tr>
<td>row 1_cell 1</td>
<td>row 1_cell 2</td>
<td>row 1_cell 3</td>
<td>row 1_cell 4</td>
</tr>
<tr>
<td>row 2_cell 1</td>
<td>row 2_cell 2</td>
<td>row 1_cell 3</td>
<td>row 1_cell 4</td>
</tr>
<tr>
<td>row 3_cell 1</td>
<td>row 3_cell 2</td>
<td>row 1_cell 3</td>
<td>row 1_cell 4</td>
</tr>
<tr>
<td>row 4_cell 1</td>
<td>row 4_cell 2</td>
<td>row 1_cell 3</td>
<td>row 1_cell 4</td>
</tr>
</table>'''

# Parse the table
header, rows = parseTable(table_fragment)

# For debugging...
print header
print rows

# Collect the representations of the selections.  The extractColumns() 
# returns a tuple.  The * expands it to two arguments.
lst = []
lst.append(myRepr(header, rows))
lst.append(myRepr(*extractColumns(header, rows, [1, 2])))
lst.append(myRepr(*extractColumns(header, rows, [1, 3])))
lst.append(myRepr(*extractColumns(header, rows, [1, 2, 4])))

# Write the output.
with open('output.txt', 'w') as f:
    f.write('[\n')
    f.write(',\n'.join(lst))
    f.write('\n]') 
```

output.txt 现在包含：

```
[
[
('Header_1', 'Header_2', 'Header_3', 'Header_4'),
('row 1_cell 1', 'row 1_cell 2', 'row 1_cell 3', 'row 1_cell 4'),
('row 2_cell 1', 'row 2_cell 2', 'row 1_cell 3', 'row 1_cell 4'),
('row 3_cell 1', 'row 3_cell 2', 'row 1_cell 3', 'row 1_cell 4'),
('row 4_cell 1', 'row 4_cell 2', 'row 1_cell 3', 'row 1_cell 4')
],
[
('Header_1', 'Header_2'),
('row 1_cell 1', 'row 1_cell 2'),
('row 2_cell 1', 'row 2_cell 2'),
('row 3_cell 1', 'row 3_cell 2'),
('row 4_cell 1', 'row 4_cell 2')
],
[
('Header_1', 'Header_3'),
('row 1_cell 1', 'row 1_cell 3'),
('row 2_cell 1', 'row 1_cell 3'),
('row 3_cell 1', 'row 1_cell 3'),
('row 4_cell 1', 'row 1_cell 3')
],
[
('Header_1', 'Header_2', 'Header_4'),
('row 1_cell 1', 'row 1_cell 2', 'row 1_cell 4'),
('row 2_cell 1', 'row 2_cell 2', 'row 1_cell 4'),
('row 3_cell 1', 'row 3_cell 2', 'row 1_cell 4'),
('row 4_cell 1', 'row 4_cell 2', 'row 1_cell 4')
]
] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T05:04:09.883

将 LXML 视为您可以使用的 html/xml 解析器。然后简单地做一个递归函数。

# mysql - sql插入不断出错

> ID：10442914
> 
> 赞同：1
> 
> 时间：2012-05-04T04:55:27.813
> 
> 标签：mysql, sql, phpmyadmin

我对 sql 相当陌生，在尝试将行插入 MySQL 数据库时遇到了错误。我在插入数据库之前绑定值以防止 sql 注入。

我的插入语句：

```
INSERT INTO member (FirstName, LastName, Date of Birth, Street Address, 
                   City, State, Zip, Email, Phone, Active)
VALUES (:FirstName, :LastName, :DateOfBirth, :streetAddress, :City, :State, 
                    :Zip, :Email, :Phone, :Active) 
```

插入语句中是否需要主键？我确实将其设置为在数据库中自动递增。

我不断收到的错误是：

1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '"'FirstName'、'LastName'、'Date of Birth'、'Street Address'、'City'、'State'、'Z' 附近使用的正确语法1号线

我已经尝试过解决语句本身的语法，并且我相当肯定它在语法上是正确的，尽管我的 sql 知识非常有限。感谢您的时间。

多摩198

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T04:57:32.140

尝试

```
INSERT INTO member (FirstName, LastName, `Date of Birth`, `Street Address`, 
                   City, State, Zip, Email, Phone, Active)
VALUES (:FirstName, :LastName, :DateOfBirth, :streetAddress, :City, :State, 
                    :Zip, :Email, :Phone, :Active) 
```

请检查您的表格列名称“出生日期”和“街道地址”。列名是否允许空格！！我对此表示怀疑。

# php - Code Igniter url 段非法字符替换为'-'

> ID：10442918
> 
> 赞同：-3
> 
> 时间：2012-05-04T04:56:14.087
> 
> 标签：php, codeigniter, url, routing

例如，在代码点火器中，我需要用“-”替换第 4 段的非法字符

[http://example.com/groups/index/26/this-is-a-test](http://example.com/groups/index/26/this-is-a-test)

工作正常，

[http://example.com/groups/index/26/this-is-a-test](http://example.com/groups/index/26/this-is-a-test)！！！

这不起作用并显示“您提交的 URI 包含不允许的字符。”错误消息。我需要用“-”替换！或任何其他不允许的字符。你能给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:32:33.407

您可以使用正则表达式来剥离您的字符串，但您也可以查看该`url_title`函数。

从[手册](http://codeigniter.com/user_guide/helpers/url_helper.html)

```
$title = "What's wrong with CSS?";

$url_title = url_title($title); // Produces: Whats-wrong-with-CSS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:08:59.613

您可以使用 URI 类，获取当前 URI 字符串，删除非法字符，然后重定向到新字符串。

[http://codeigniter.com/user_guide/libraries/uri.html](http://codeigniter.com/user_guide/libraries/uri.html)

但我不明白为什么人们一开始会去错误的 URL？首先，这似乎是个坏主意？

# symfony - symfony2 CSRF 无效

> ID：10442922
> 
> 赞同：21
> 
> 时间：2012-05-04T04:56:58.843
> 
> 标签：symfony, csrf

好的，所以今天我用我们的“实时”数据库中的新信息更新了我的数据库……从那时起，我的一个表格就出现了问题。如果您需要任何代码，请告诉我，我将对其进行编辑并发布所需的代码...

我有一个报告表格，其中有一个日期范围字段和一个代理部门的下拉列表。当我第一次访问该页面时，我在表单的开头看到了这个：

`The CSRF token is invalid. Please try to resubmit the form`

因此，我转到具有相同类型信息的其他表单之一，并检查 _token ，结果如下：

```
<input type="hidden" id="ecs_crmbundle_TimeClockReportType__token" name="ecs_crmbundle_TimeClockReportType[_token]" value="87e358fbc4d6d3e83601216b907a02170f7bcd92" />
<input type="hidden" id="ecs_crmbundle_SimpleSalesReportType__token" name="ecs_crmbundle_SimpleSalesReportType[_token]" value="87e358fbc4d6d3e83601216b907a02170f7bcd92" /> 
```

第一个是显示错误的那个，而 SimpleSalesReport 没有...知道为什么要这样做或如何解决它吗？

谢谢..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-11T19:44:16.327

您是否偶然在产生 CSRF 错误的操作中使用 $form->bindRequest() ？我有这个问题。您不应该绑定新表单的请求。如果您将表单发布到相同的操作，请将 bindRequest 包装在一个条件中，该条件检查方法是否为 POST：

```
if ($this->getRequest()->getMethod() == 'POST') {
  $form->bindRequest($this->getRequest());
  if ($form->isValid()) {
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-02T18:06:58.473

`{{ form_widget(form) }}`使用构建您的自定义表单没有问题。您所要做的就是添加`_token`这样的： `{{ form_widget(form._token) }}`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-03T12:19:50.373

这个错误让我疯狂了好几天！感谢克里希纳！如果在您的表单模板中您选择不使用`{{ form_widget(form) }}`您应该放置的默认表单行为`{{ form_rest(form) }}` 希望这可以帮助其他人！

# wpf - WPF中的DataContext引发异常

> ID：10442929
> 
> 赞同：0
> 
> 时间：2012-05-04T04:58:12.367
> 
> 标签：wpf, data-binding

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox Name="myTxt" Text="{Binding}" />
    </Grid>
</Window>

namespace WpfApplication1
{

    public partial class MainWindow : Window
    {
        public MainWindow()
        {

            InitializeComponent();
            DataContext = "fdfsfds";
        }
    }
} 
```

我想知道为什么这段代码不起作用？它抛出一个异常。我应该怎么做才能绑定文本框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:11:34.147

属性的默认值`Binding`-`TextBox.Text`是`TwoWay`

“双向绑定需要 Path 或 XPath。”

因此，您可以使用`OneWay` `Binding`：

```
<Grid>
    <TextBox Name="myTxt" Text="{Binding Mode=OneWay}" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:20:36.707

如果您仍然想要`TwoWay`绑定，您可以使用以下代码：

```
<TextBox Name="myTxt" Text="{Binding Path=DataContext, RelativeSource={RelativeSource Self}}" /> 
```

# ruby-on-rails - 如何将依赖对象添加到 HTML 页面的 rails / rhomobile 中的对象列表

> ID：10442930
> 
> 赞同：0
> 
> 时间：2012-05-04T04:58:21.700
> 
> 标签：ruby-on-rails, rhomobile

我对 rails/RhoMobile 有点陌生，所以我不知道如何将子对象添加到父对象，因此它可以作为我表单上的实例变量 @questions 的成员使用。这是我的控制器方法

```
def diary_day_one_morning
  qgroup = "activity_day_one_morning"
   @questions = Question.find(:all, :conditions => { { :name => "qgroup", :op => '=' } => qgroup } )
  # make sure all questions have an answer
  @questions.each do |q|
    a = Answer.find(:all, :conditions => { { :name => "question_id", :op => '=' } => q.object }).first
    if not a
      a = Answer.new
      a.question_id = q.object
      a.save
    end
    #@questions[q].answer = a # here is my issue!!!
  end
  render :action => :diary_day_one_morning, :back => url_for(:action => :index)
end 
```

在@questions[q].answer 部分，我对如何将我的问题与答案联系起来有点迷茫。那么在表格上我如何参考答案？这是我已经拥有的：

```
 <% @questions.each_with_index do |question, qcount| %>
      <div class="ui-block-a">
        <div class="ui-bar ui-bar-e">
          <%= question.qpromptshort %>
        </div>
      </div>
      <% a = Answer.find(:all, :conditions => { { :name => "question_id", :op => '=' } => question.object }).first %>

      <% if a %>
        <input type="hidden" id="answer<%=qcount%>[object]" name="answer<%=qcount%>[object]" value="<%=a.object%>" />
        <div class="ui-block-b">
            <input type="text" id="answer<%=qcount%>[value1]" name="answer<%=qcount%>[value1]" value="<%=a.value1%>" />
        </div>
   ....... 
```

我更愿意将答案 (a) 称为问题的成员，而不是查找它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:01:44.893

您可以使用 each_with_index 方法获取 @questions 数组中每个对象的索引。

```
 @questions.each_with_index do |q,qindex|
    a = Answer.find(:all, :conditions => { { :name => "question_id", :op => '=' } => q.object }).first
    if not a
      a = Answer.new
      a.question_id = q.object
      a.save
    end
    # use qindex to add it back into the @questions array
    @questions[qindex].answer = a 
  end 
```

然后在页面中，答案将作为 question.answer 提供。

# php - 通过js和数据发布删除文本

> ID：10442931
> 
> 赞同：0
> 
> 时间：2012-05-04T04:58:31.320
> 
> 标签：php, javascript, post

```
<script type="text/javascript">
function removeLink()
{
    document.getElementById("tab2").deleteRow(i);
}
</script>

</head>
<body>
<form action="forth.php" method="post">
<table width="600" border="1" id="tab2">

<?php

    foreach($_POST as $post2)
    {
    ?>
    <tr>
    <td>
    <?php
    echo $post2.'<br />';
    ?>
    </td>
    <td><a href="#" onClick="removeLink(this.parentNode.parentNode.rowIndex);">Remove</a></td>
    </tr>
    <?php

    }

    ?>
    <tr>
    <td><input type="submit" value="Next" /></td>
    <td>&nbsp;</td>
  </tr>
  </table>

</form>
</body> 
```

这是我的页面third.php 它将用户重定向到forth.php 上的新页面forth.php 我有以下代码

```
<?php

print_r($_POST);

foreach($_POST as $key_post)
{
    echo $key_post.'<br>';
}

?> 
```

问题出在页面上`forth.php`，即使我这样做了它也不会打印任何东西，`print_r($_POST);`它返回了像 Array() 这样的空数组，并帮助说明为什么不保存数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:00:46.437

我认为它是空的，因为除了提交按钮之外您实际上没有任何`<input name="foo" type="bar />`字段，因此实际上没有发布任何内容。

您需要添加一些隐藏字段：

```
foreach($_POST as $key => $post2)
{
?>
<tr>
  <td>
    <?php echo $post2.'<br />'; ?>
    <input type="hidden" name="<?php echo $key;?>" value="<?php echo $post2;?>" />
  </td>
</tr>
... etc 
```

# ruby-on-rails - 记录用户活动 gem

> ID：10442935
> 
> 赞同：0
> 
> 时间：2012-05-04T05:00:24.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, gem

我即将在我的应用程序中创建用于记录用户活动的功能。我正在考虑使用观察者，然后通过另一个模型记录事件，比如 UserLog。

不过，在这样做之前，我想问一下是否已经有一个好的宝石可以节省我一些时间。

你碰巧知道吗？

ps 顺便说一句，我说的是自定义用户活动以及记录 IP 地址等。不过，自定义操作记录的第一种情况更为重要。

为清楚起见进行编辑：我不是指模型更改，而是记录已发布的表单变量和此类操作，而不是模型更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:02:47.873

[已审核](http://rubygems.org/gems/audited)

audited 是一个 ActiveRecord 扩展，它在审计表中记录对模型的所有更改，并带有可选的修订注释。act_as_audited 已更新为与 Rails 3 一起使用，以便与旧版本的 Rails 一起使用。

# javascript - Twitter Bootstrap 手动关闭标签页

> ID：10442942
> 
> 赞同：0
> 
> 时间：2012-05-04T05:01:10.110
> 
> 标签：javascript, internet-explorer, twitter-bootstrap, href

## **更新现在工作**

现在可以工作了。脚本片段是错误的，甚至没有以某种方式调用。

供将来参考 -> 关闭引导选项卡：

```
</script>
$("#closetab").click(function() {
$("#myTabContent").hide();
});
</script>

<a href="#" id="closetab">Close</a> 
```

在使用中心标签作为锚文本时要小心。当指向中心标签内的内容 ID 时，它会与您的 js/jquery 发生冲突。

* * *

我使用 Bootstrap 选项卡（[http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)），稍微更改了 bootstrap-tab.js 以在悬停时显示选项卡：

```
 $(function () {
$('body').on('hover.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
  e.preventDefault()
  $(this).tab('show')
})
}) 
```

现在我想添加一种手动关闭这些选项卡的方法。我在某个地方找到了一个代码片段，它在 Chrome/Mozilla/Opera中可以解决问题**，但在 IE 中却没有：**

```
<script>
$('a[href="#closetab"]').on('click',function(){
$("#flyout_tab").hide();
});
</script> 
```

和

```
<a href="" id="closetab">Close</a> 
```

在 IE 中，当我单击关闭按钮时，它会将我发送到站点所在目录的根目录。

我想这与 IE 处理空 a href (a href="") 的方式有关。当我放置类似 href="#" 的内容时，它在任何浏览器中都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:14:23.233

尝试将“closetab”放在 href 属性中，如下所示：

```
<a href="#closetab">Close</a> 
```

由于上面的代码不起作用，请尝试将脚本更改为：

```
<script>
    $('#closetab').on('click',function(){
        $("#flyout_tab").hide();
    });
</script> 
```

# powershell - 如何使用 PowerShell 找到并终止打开文件的文件共享会话

> ID：10442950
> 
> 赞同：0
> 
> 时间：2012-05-04T05:01:55.923
> 
> 标签：powershell

当我们将更改推送到文件共享时，有时用户会让应用程序保持打开状态，这反过来又使文件从共享中保持打开状态——它被锁定，我们无法替换它。我想找到与此类文件对应的共享会话并在覆盖文件之前在 PowerShell 脚本中终止它们（这是只读的东西，主要是 .DLL 文件）。

这与找到在共享文件夹 MMC 中打开的文件，然后关闭那里的相应会话相同，但我需要以编程方式远程执行多台服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T17:19:41.383

除了新的 Powershell 4.0/Win2012 cmdlet，我找不到任何东西，所以我编写了自己的脚本，我认为值得分享：

```
# Use "net files" to get the ID's of all files and directories on this computer 
# that are being accessed from a network share.
$openFiles = net files | 
    where { $_ -match "^(?<id>\d+)" } | 
    foreach {
        # Use "net files <id>" to list all information about this share access as a key/value list, and 
        # create a new PSObject with all this information in its properties.
        $result = new-object PSObject
        net files $matches["id"] | 
            where { $_ -match "^(?<key>.*[^\s])\s{2,}(?<value>.+)$" } | 
            foreach { 
                Add-Member -InputObject $result -MemberType NoteProperty -Name $matches["key"] -Value $matches["value"] 
            }
        return $result
    }

# Now that we know everything that's being accessed remotely, close all that 
# apply to our application folder.
$openFiles | 
    where { $_.Path -like "C:\MySharedFolder\MyApp*" } | 
    foreach { net files ($_."File Id") /close } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:28:59.407

[网络文件 /close](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_file.mspx?mfr=true)有什么问题？

# documentation - 源文件文档语法

> ID：10442951
> 
> 赞同：0
> 
> 时间：2012-05-04T05:01:58.313
> 
> 标签：documentation, javadoc, documentation-generation

我正在寻找有关各种代码/API 文档语法的资源，例如 Javadocs。还有其他广泛使用的文档语法吗？我特别寻找与 C、C++/Objective C/Cocoa、Shell 脚本（如果有）和 Java 相关的那些，PHP/Ruby/Python 等是第二优先级。

谢谢你的帮助。

PS - 人们在 C/C++/Objec-C 项目中使用 Javadoc 语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:06:14.990

很多人使用[Doxygen](http://www.doxygen.nl/)，它了解 C++、C、Java、Objective-C、Python、Fortran、VHDL、PHP、C 等。

Doxygen 有自己的语法，但也可以与 JavaDoc、MS-XML-Commenttags 或 Markdown-Syntax 一起使用。OpenOffice 使用 f.ex。doxygen 使用 JavaDoc 语法的 API 文档，因为它可以用于 Java 和 C 源。

# java - 奇怪的错误 - 从菜单中断后不做任何事情

> ID：10442952
> 
> 赞同：0
> 
> 时间：2012-05-04T05:02:02.290
> 
> 标签：java, switch-statement

这是为了课程作业。我已经构建了整个程序，它做的一切都是正确的，除了这一件事。

我有一个名为“Schedule”的类，这个方法在计划的最后：

```
public void bookSeatMenu()
    {   boolean leaveBookSeatMenu = false;
        String seatBookingMenuStr;
        int seatBookingMenuInt = 14;
        boolean isInteger = false;
        Scanner input = new Scanner(System.in);
        System.out.println("Press 1 to add an individual booking, 2 to cancel a booked seat or 3 to go back");

        seatBookingMenuStr = input.nextLine();
                  try {
                      seatBookingMenuInt = Integer.parseInt(seatBookingMenuStr);
                      isInteger = true;
                    }

                    catch (NumberFormatException e) {

                    }
                  switch (seatBookingMenuInt) {
                      case 1: 
                        bookSeat();
                        break;
                      case 2:
                        cancelSeat();
                        break;
                      case 3:
                        leaveBookSeatMenu = true;
                        break;
                      default:
                        System.out.println("Invalid Choice");
                    } while (leaveBookSeatMenu == false);

                } 
```

我知道你们都知道切换菜单的样子，但我想我还是把它扔在那里，以防万一（请原谅双关语）我在这里出错了。

继续前进，我有`bookSeat`方法，这是用户预订座位的地方（效果很好）。然后它显示它`bookSeatMenu()`只是显示菜单。但是，它不会回到上一个。

```
 public void bookSeat()
   {
       Scanner input = new Scanner(System.in);
       boolean isSeatBooked = true;
       showSeatPlan();
       int seatNum = 0;
       int rowNum = 90;
       int columnNum = 16;
       boolean isInt = false;

       while (isSeatBooked == true)
       {
           System.out.println("Please pick column of a seat to book");
           columnNum = input.nextInt();

           System.out.println("Please pick row of a seat to book");
           rowNum = input.nextInt();

           seatNum = (columnNum + ((rowNum) * 15));

           if (seats[seatNum] == false)
           {
               isSeatBooked = false;
           }
           else
           {
               System.out.println("This seat is already booked");
            }
       }

       seats[seatNum] = true;

       System.out.println("");
       bookSeatMenu();
   } 
```

现在不是为了爱也不是为了钱，我不能让它在预订座位后回到之前的菜单。

基本上流程是：

预订座位 --> 前往 bookSeatMenu --> 按 4 返回 --> 到达上一个菜单。

如果我不预订座位，程序会很高兴地回到之前的菜单，但之后，它只是继续在命令提示符下换行，不做任何其他事情，没有错误等。

我很想说这*可能*是 BlueJ 的问题，尽管一个糟糕的工人会责怪他的工具，我不想成为“那个人”

我还需要做一个“测试课”——以前从未使用过“测试课”，而任务要求我们去看看没人费心去买的“教科书”，我真的不知道！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:32:14.287

没有`switch...while`，所以我认为你的问题是一旦你选择了 3，你最终会陷入`while(true);`无限循环。

正确的伪代码：

```
do {
   // read System.in

   // handle menu options with your switch
} while(...) 
```

顺便说一句，恕我直言，设计很糟糕，您应该尝试考虑您的模型（在您的情况下，我会看到类似`Room`, `Seat`, `Scheduler`, 的内容`Menu`）并使这些对象相互交互：

```
public class Room {
    private Seat[][] seats;
    public String toString() {
        // like showSeatPlan() using toString() of Seat
    }
}

public class Seat {
    private int row, column;
    private boolean isBooked;
    public void book() { /* ... */ }
    public void cancel() { /* ... */ }
    public String toString() { /* "X" or " " */ }
}

public final class Scheduler {
   // "main class" with a "main" method
}

public class Menu {
    private Room room;
    public String toString() {
        // print out menu
    }
    public void bookSeat() { /* ... */ }
    public void cancelSeat() { /* ... */ }
} 
```

（类似的东西）

对于测试部分，每个类都有一个测试类，每个方法都有一个测试方法，例如`Seat`：

```
public class Seat {
    public void book() { 
        if (this.isBooled) {
           throw new CannotBookException("seats is taken!");
        }
        this.isBooled = true;
    }
}

public class SeatTest {
    @Test // when I book a seat, it's markedas booked.
    public void testBook() {
        final Seat seat = new Seat();
        seat.book();
        assertTrue(seat.isBooked)
    }

    @Test(expected = CannotBookException.class) // when I book an already booked seat, I get an exception.
    public void testBookAlreadBooked() {
        final Seat seat = new Seat();
        // book the seat
        seat.book();
        assertTrue(seat.isBooked)

        // try to book again
        seat.book();
    }
} 
```

# iphone - 如何在 iOS（IBAction）中重用代码？

> ID：10442960
> 
> 赞同：1
> 
> 时间：2012-05-04T05:03:04.440
> 
> 标签：iphone, objective-c, ios

我有两个具有类似功能的视图控制器。其中一些是 IBAction。有没有办法把它们放在一起（这样更容易修复错误）？我尝试过继承，但它似乎不起作用。

```
@implementation ClassA
-(IBAction)f
{
    //some code here
}

@implementation ClassB
-(IBAction)f
{
    //some code here
} 
```

我的问题是，有没有一种方法可以让我编写一次函数 f？如果有错误，我可以通过这种方式更快地修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:27:44.693

制作一个可以完成这项工作的方法，并从 IBAction 或您需要的任何地方调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:39:48.820

在继承中，你可以只在父类中声明，就像抽象函数一样，每个子定义都是分开的，现在你要做的是

在父类中创建一个仅执行逻辑的方法，

在子程序中创建两个 ibactionn 方法，并在该方法中执行当前子程序的 UI 任务，并使用您在上面创建的父程序逻辑方法来获取数据。

告知您是否得到解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:08:29.220

您可以制作实用程序类，您可以为此制作类方法。你可以在需要的地方调用这个方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-20T02:27:33.483

您可以根据您的要求制作另一个单例类或实用程序类。并制作类方法，用于通用功能。所以你可以在项目的任何地方使用这个功能。

为某些常见功能制作实用程序类或单例类是一种很好的做法。

# javascript - 如何使用 POST 方法在 XDR 中发送 JSON 数据

> ID：10442961
> 
> 赞同：8
> 
> 时间：2012-05-04T05:03:08.777
> 
> 标签：javascript, json, xdr

我想使用 POST 方法在 XDR 中发送 JSON 数据。我能够发送 JSON 数据，但问题是`.`（DOT）符号被转换为`_`（下划线）。这是代码：

```
if ($.browser.msie && window.XDomainRequest) {
    var xdr = new XDomainRequest(); 
    xdr.open("POST",Path);
    xdr.send(JSON.stringify(data) + '&ie=1');
    xdr.onerror = function() {
        alert('in error');
    };
    xdr.onload = function() {
        alert(xdr.responseText);
    }
} else {
    jQuery.ajax({
        type: "POST",
        url: Path,
        data: JSON.stringify(data),
        dataType: 'json',
        contentType: 'application/json',
        success: function(msg) {
                alert(msg);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T18:49:09.613

可能是您的服务器端脚本错误..这段代码似乎是正确的....

# c++ - 从 STL 列表中删除特定节点

> ID：10442962
> 
> 赞同：1
> 
> 时间：2012-05-04T05:03:27.857
> 
> 标签：c++, stl, linked-list

我需要维护一个项目列表（一些对象），并支持以下操作：

*   最后插入
*   从任何位置删除

STL 列表似乎是正确的选择。但是，我怎样才能在恒定时间内进行第二次操作？我可以将指向每个节点的指针保存在某处并直接删除它们，但是擦除需要一个迭代器，所以这不起作用。

示例用法：

```
items = list<myobj>..
items.push_back(obj1)
items.push_back(obj2)
items.push_back(obj3)
items.remove(obj2) // <- How to do this in constant time. 
```

如果 push_back 以某种方式允许访问节点，我可以使用：

```
map[obj1] = items.push_back(obj1)
items.remove(map[obj1]) 
```

一种选择是在地图中使用迭代器，有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:22:09.287

妥协是像大多数 std::set 实现一样的红黑树。插入、搜索和删除的时间为 O(log n)。树基本上是最终的折衷数据结构。他们在任何事情上都没有什么了不起的，但他们总是把工作做得足够好。

否则，使用链表和向量来分析您的代码，并确定调整向量大小是否真的很糟糕（这取决于您执行此操作的频率）。

* * *

可能有更好（不优雅但非常有效）的解决方案可以解决您的问题。您还没有提到您将如何使用该列表，但如果您可以将一个值留作未使用，您可以使用一个向量并将一个元素简单地标记为已删除，而不是实际删除它。或者使用一个向量和一个单独的位集（或 C++03 `vector<bool>`）告诉你一个项目是否被删除或有效。要删除它，您只需翻转位图中的位。迭代时，只记得在处理内容之前检查删除位图。如果内存不是问题，只有速度很重要，易用性/清晰度很重要，请将 替换`vector<object>`为`vector<pair<bool, object>>`删除`bool`标志的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:16:29.993

您可能想查看[Boost.MultiIndex](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/index.html)。这允许您在数据结构上组合多个索引。因此，您可以以线性空间开销为代价，以恒定的时间查找和删除任何元素。

# html - CSS 属性选择器中的 [att~=val] 与 [att*=val] 究竟有何不同？

> ID：10442963
> 
> 赞同：3
> 
> 时间：2012-05-04T05:03:34.727
> 
> 标签：html, css, css-selectors

也许我错过了一些东西，但它们看起来很相似。例如，如果您使用...

```
a[alt~="thumb"] 
```

或者...

```
a[alt*="thumb"] 
```

我可以将选择范围缩小到不同的范围吗？我的理解是 ~ 在引号中为您提供部分匹配，而 * 为您提供部分匹配。我将稍微修改一下代码，但由于我在这里找不到有关该主题的问题，因此我认为无论哪种方式它都会成为一个很好的话题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:17:20.493

从 JQuery 帮助（支持标准选择器）：

```
a[alt~="thumb"] 
```

> 描述：选择具有指定属性的元素，其值包含给定的单词，由空格分隔。此选择器将测试字符串与属性值中的每个单词匹配，其中“单词”定义为由空格分隔的字符串。如果测试字符串完全等于任何单词，则选择器匹配。

```
a[alt*="thumb"] 
```

> 描述：选择具有指定属性且值包含给定子字符串的元素。这是匹配值的最慷慨的 jQuery 属性选择器。如果选择器的字符串出现在元素属性值中的任何位置，它将选择一个元素。将此选择器与 Attribute Contains Word 选择器（例如 [attr~="word"]）进行比较，后者在许多情况下更合适。

基本上，`~=`只有当值被空格包围时，选择器才会匹配。`*=`如果在任何地方找到该值，则选择器匹配。

```
<div alt='heading navigation'>
<div alt='head'> 
```

`div[alt~='head']`将仅匹配第二个 div，但同时`div[alt*='head']`匹配两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:18:04.540

`[att~=value]`是一个**包含单词**选择器。

所以`[alt="foo"]`选择器会匹配`<a alt="foo bar">`但不会匹配`<a alt="foobar">`。

`[alt*="foo"]`不过两者都会匹配，因为这不会区分单词或其他内容。只要它在值中，它就会命中。

# c# - Visual Studio 2010：如何将构建平台设置为 Active(x86)？

> ID：10442964
> 
> 赞同：5
> 
> 时间：2012-05-04T05:03:37.030
> 
> 标签：c#, visual-studio-2010, projects-and-solutions

解决方案中的大多数项目都允许选择 Active(x86) 的构建平台

![在此处输入图像描述](../Images/c6433550f6bbac89725d502113cbead6.png)

但是没有：

![在此处输入图像描述](../Images/2138bdf5e3e0853d141486cc5cc1fb35.png)

我不知道为什么。它们都是针对 .Net Framework 4 的 VS2010 项目。我想可能有问题的项目引用了 64 位的东西，但我不知道吗？有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T06:16:10.053

我认为从配置管理器设置项目属性可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:20:00.757

应该在这里设置：

[http://i.stack.imgur.com/yjubz.png](http://i.stack.imgur.com/yjubz.png)

引用图片形式[http://en.morzel.net/post/2011/09/16/BadImageFormatException-x86-i-x64.aspx](http://en.morzel.net/post/2011/09/16/BadImageFormatException-x86-i-x64.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:24:15.787

如果您安装了 64 位操作系统，则 Visual Studio 将显示在配置管理器中

# javascript - 我可以简化多个 if - else 语句吗？

> ID：10442969
> 
> 赞同：3
> 
> 时间：2012-05-04T05:04:27.090
> 
> 标签：javascript, jquery

我在javascript中有以下代码？

```
if ($(form).data('action') == "Edit") {
  xx
} else if ($(form).data('action') == "Create"){
  xy
} else if ($(form).data('action') == "Delete"){
  xz
} 
```

我是否可以简化这一点并有一些默认路径？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T05:10:31.587

您还可以创建一个包含您的操作的对象：

```
var Actions = {
    'Edit' : function () {},
    'Create' : function () {},
    'Delete' : function () {}
};

var action = $(form).data('action');

if (Actions.hasOwnProperty(action)) {
    Actions[action]();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T05:12:23.047

听起来您所描述的是一个开关/案例，但我认为开关案例并不比多个 if/else 结构更好。我更喜欢使用对象哈希：

```
var actionObj = {
  "Edit": xx,
  "Create": xy,
  "Delete": xz
};

if (actionObj[act]) {
  // do whatever with actionObj[act] you need to
} else {
  // do your default action
} 
```

当值实际上是函数时，它特别有效，然后您可以调用它们：

```
var actionObj = {
  "Edit": function () {},
  "Create": function () {},
  "Delete": function () {}
};

if (actionObj[act]) {
  actionObj[act]();
} else {
  // default action
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T05:06:35.217

如果要处理多个 if else，请使用 Switch

```
switch(n)
{
case 1:
  execute code block 1
  break;
case 2:
  execute code block 2
  break;
default:
  code to be executed if n is different from case 1 and 2
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T05:06:34.193

您应该缓存 $(form).data('action'); 的结果 例子：

```
var action = $(form).data('action');

if (action === 'Edit') {
    //
} else if (action === 'Create') {
    //
} else if (action === 'Delete') {
    //
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T05:12:31.973

使用`switch`块是最传统的方式。

您还可以查找要从对象（哈希图）执行的函数：

```
var actions = {
    Edit: function () {
        // xx
    },
    Create: function () {
        // xy
    },
    Delete: function () {
        // xz
    }
};

var action = actions[$(form).data("action")];

if (action) {
    action();
} else {
    // unknown/default action
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-13T08:51:33.573

```
var Actions = {
    'Edit' : function () {},
    'Create' : function () {},
    'Delete' : function () {},
    'default': function () {}
},

action = $(form).data('action');
Actions[action]() || Actions[default](); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T05:09:34.610

使用开关盒：

```
var action = $(form).data('action')
switch(action)
{
case 'Edit': xx;
break;
case 'Create': yy;
break;
case 'Delete': zz;
break;
default: caption ="default";
} 
```

或者你可以使用三元运算符（真？1：0）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-04T05:08:03.143

从这里尝试 CASE： [http ://www.tutorialspoint.com/javascript/javascript_switch_case.htm](http://www.tutorialspoint.com/javascript/javascript_switch_case.htm)

他们的例子：

```
<script type="text/javascript">
<!--
var grade='A';
document.write("Entering switch block<br />");
switch (grade)
{
   case 'A': document.write("Good job<br />");
            break;
   case 'B': document.write("Pretty good<br />");
            break;
   case 'C': document.write("Passed<br />");
            break;
   case 'D': document.write("Not so good<br />");
            break;
   case 'F': document.write("Failed<br />");
            break;
  default:  document.write("Unknown grade<br />")
}
document.write("Exiting switch block");
//-->
</script> 
```

# c++ - g++ 对 -Ofast 做了哪些额外的优化？

> ID：10442973
> 
> 赞同：16
> 
> 时间：2012-05-04T05:04:52.257
> 
> 标签：c++, performance, optimization, gcc, compiler-construction

在 g++ 4.6（或更高版本）中，除了 -ffast-math 之外，-Ofast 还启用了哪些额外优化？

手册页说此选项“还启用了并非对所有符合标准的程序都有效的优化”。我在哪里可以找到更多关于这是否会影响我的程序的信息？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T07:36:56.777

这是一个用于检查 -Ofast 启用了哪些选项的命令：

```
$ g++ -c -Q -Ofast --help=optimizers | grep enabled 
```

由于我只有不支持 -Ofast 的 g++ 4.4，因此我无法向您显示输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T07:28:11.627

-Ofast 选项可能会静默启用 gcc [C++ 扩展](http://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Extensions.html)。您应该检查您的来源，看看您是否使用过它们。此外，编译器可能会关闭一些晦涩且很少遇到的二合[字母和三合字母](http://en.wikipedia.org/wiki/Digraphs_and_trigraphs)语法检查（这只会提高编译器性能，而不是提高编译代码的速度）。

# c# - 查找两个集合中包含的元素计数

> ID：10442975
> 
> 赞同：2
> 
> 时间：2012-05-04T05:04:57.123
> 
> 标签：c#, linq

例如，我们有两个集合：

```
coll1 = {1,2,3,4,5}
coll2 = {3,4,5,6,7,8,9} 
```

如何查找两个集合中包含的元素计数（最佳性能）？
例如上面的结果必须相等`3`。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T05:08:26.503

```
coll1.Intersect(coll2 ).Count() 
```

# python - 如何在 Python 中使用 ebay sdk？

> ID：10442990
> 
> 赞同：5
> 
> 时间：2012-05-04T05:06:26.810
> 
> 标签：python, ebay-sdk

我找到了这个代码示例，可以从[这里](http://code.google.com/p/ebay-sdk-python/)在 ebay 中进行查询，还下载了适用于 Python 的 ebay-sdk。如何安装 sdk 并将此代码与其集成？

```
from ebaysdk import finding, nodeText

f = finding()
f.execute('findItemsAdvanced', {'keywords': 'shoes'})

dom    = f.response_dom()
mydict = f.response_dict()
myobj  = f.response_obj()

print myobj.itemSearchURL

# process the response via DOM
items = dom.getElementsByTagName('item')

for item in items:
    print nodeText(item.getElementsByTagName('title')[0]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T09:22:33.860

这是一个非常简单的过程

1) 去[http://developer.ebay.com/](http://developer.ebay.com/)，在那里注册，并获得app id key。

2）您可以简单地执行“pip install ebaysdk”来安装 ebaysdk

3）将此文件复制到同一目录中 [https://github.com/timotheus/ebaysdk-python/blob/master/ebay.yaml](https://github.com/timotheus/ebaysdk-python/blob/master/ebay.yaml)在此文件中，将*appid*替换为您在步骤 1 中生成的内容

4) 执行示例，这次它会工作:)

# html - URL 中的加号 (+)

> ID：10442991
> 
> 赞同：1
> 
> 时间：2012-05-04T05:06:29.880
> 
> 标签：html, url

我想知道在我的 URL 中是否会遇到加号“+”的任何问题。这些可能会导致问题甚至错误吗？

我通常不会使用加号，但我的 wiki 有一个功能可以更直观、更简单地命名页面，但缺点是 url 以加号结尾，如下所示：site.com/Really+Cool+Page。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:09:27.650

加号是空格字符的编码

看

[http://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)

你应该没问题使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T05:48:54.060

加号用于 URL 编码。

它用于对空格进行编码，因此“+”等于“”。

如需更多帮助：[http ://www.permadi.com/tutorial/urlEncoding/](http://www.permadi.com/tutorial/urlEncoding/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T05:10:10.063

加号 ('+') 主要用于 URL 编码。

[在此处](http://webdesign.about.com/od/forms/a/url_encoding.htm)阅读有关它的更多信息

# java - 如何在eclipse中使用ant进行预处理

> ID：10442995
> 
> 赞同：0
> 
> 时间：2012-05-04T05:07:10.113
> 
> 标签：java, eclipse, blackberry, ant, preprocessor

我需要知道如何使用 Ant 工具在 Blackberry 中进行预处理。我有一个项目需要在 4.6 和 5.0 版本的 Blackberry 中使用，因为 JDE4.6 不支持预处理器。我需要知道如何在 Eclipse 中使用 Ant 工具？

任何网站或示例都可以。

我提到[了这个](http://www.exubero.com/ant/antintro-s5.html)网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:56:35.750

[http://www.blackberryforums.com/developer-forum/138210-setup-up-eclipse-blackberry-development.html](http://www.blackberryforums.com/developer-forum/138210-setup-up-eclipse-blackberry-development.html)

和

[http://bb-ant-tools.sourceforge.net/docs](http://bb-ant-tools.sourceforge.net/docs)

这两个链接作为在黑莓 Eclipse 中使用 Ant 工具对您非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:08:33.853

Eclipse 有一个版本控制预处理器插件。它就像一个预处理器，只有#define 和#ifdef 命令

但是我自己想要更多的东西。我不知道如何使用 Ant，但我只是设法让 C 预处理器在 Eclipse 上的 windows for java 中工作，使用非 Ant Builders 和 Ruby 中的一些胶水。我想要它用于一个 android 项目，可能是出于与你想要它用于黑莓的类似原因。

由于我在推出自己的答案之前在 Stackoverflow 上寻找答案但没有找到答案，因此我将我的帖子复制成几个问题，例如：

[https://stackoverflow.com/a/10497206/1137626](https://stackoverflow.com/a/10497206/1137626)

# openxml - 在 Powerpoint 幻灯片中更改文本框中的文本

> ID：10442997
> 
> 赞同：6
> 
> 时间：2012-05-04T05:07:29.450
> 
> 标签：openxml, presentationml

我有一个包含 3 张幻灯片的 Powerpoint 演示文稿。每张幻灯片都有一个文本框，它是一个占位符。我想替换一张幻灯片上的文本框内容。

我需要知道如何使用 C# 和 OpenXML 做到这一点

万分感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-09T15:17:21.370

对每张幻灯片执行此操作，您要更改：

```
ODP.ShapeTree tree = slide.Slide.CommonSlideData.ShapeTree;
        foreach (ODP.Shape shape in tree.Elements<ODP.Shape>())
        {
            // Run through all the paragraphs in the document
            foreach (ODD.Paragraph paragraph in shape.Descendants().OfType<ODD.Paragraph>())
            {
                foreach (ODD.Run run in paragraph.Elements<ODD.Run>())
                {
                    if (run.Text.InnerText.Contains("PLACEHOLDER"))
                    {
                        run.Text = new ODD.Text("Your new text");
                    }
                }
            }
        } 
```

请记住，如果您的模板的占位符包含空格，这可能会创建两个单独的运行元素。因此，您可能会得到一个带有 run.text 为“Place”的 run 和另一个带有 run.Text “holder”的 run 元素，而不是一个 run.Text 为“Place holder”的元素。

# php - 模板的正则表达式捕获太多

> ID：10442998
> 
> 赞同：0
> 
> 时间：2012-05-04T05:07:50.070
> 
> 标签：php, regex, templates

使用 PHP，我试图让我的正则表达式匹配下面的两个模板引用。问题是，它还`</ul>`从第一个文本块中获取。当我删除`/s`它只捕获第二个引用的标志时。我做错了什么？

```
/{{\%USERS}}(.*)?{{\%\/USERS}}/s 
```

这是我的字符串。

```
<ul class="users">
{{%USERS}}
<li>{%}</li>
{{%/USERS}}
</ul>

{{%USERS}} hello?!{{%/USERS}} 
```

为什么我的表情捕捉太多或太少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:39:18.043

您可能需要使用非贪婪量词。

`*`并且`+`“贪婪”。它们会匹配尽可能多的字符。

`*?`并且`+?`是“非贪婪的”。它们将只匹配移动到正则表达式下一部分所需的字符数。

所以在下面的测试字符串中：

```
<alpha><bravo> 
```

*   `<.+>`将捕获`<alpha><bravo>`（因为也`.`匹配`><`！）。
*   `<.+?>`将捕获`<alpha>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:27:21.733

> 为什么我的表情捕捉太多或太少？

1.  因为量词在默认情况下是贪婪的，所以它的捕获太多了（请参阅 Li-aung Yip 回答 +1）

2.  如果您删除修饰符`s`，它只匹配第二次出现，因为该修饰符`.`也匹配换行符，所以没有它，就不可能匹配第一部分，因为中间有换行符。

查看非贪婪的答案

```
{{\%USERS}}(.*?){{\%\/USERS}} 
```

[在 Regexr 上](http://regexr.com?30rj7)，这是一个测试正则表达式的好地方。

顺便提一句。我在捕获组之后删除了`?`它，它不需要，因为`*`也匹配空字符串，所以不需要让它额外可选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:32:27.937

这是您的正则表达式：

```
/{{%USERS}}([^{]+({%[^{]+)?){{%/USERS}}/g 
```

# android - android默认网络浏览器中的html文件上缺少图像

> ID：10442999
> 
> 赞同：0
> 
> 时间：2012-05-04T05:07:50.353
> 
> 标签：android, html, browser, android-webview

我有一个 html 文件（包含一些文本和一个图像）存储在 @ /sdcard/test 文件夹中。并且图像也存储在同一文件夹下。如果我以编程方式打开 html 文件（使用 WebView），我可以看到 html 文件上的图像。

```
((WebView)findViewById(R.id.webView)).loadUrl("file:///mnt/sdcard/test/report_external.html"); 
```

有用。但是当我去那个文件夹并打开那个html文件（使用android的默认网络浏览器）时，没有显示图像文件。它显示了除图像之外的所有内容。默认android浏览器查看html文件有什么问题？使用默认浏览器和 WebView 打开文件有什么区别吗？这是我在 html 中的图像标签

```
<img src = "file:///mnt/sdcard/test/image.png"></img> 
```

如果它也用默认浏览器打开，我怎么能看到 html 上的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:14:24.570

我认为您的 img-path 有问题。尝试设置`src="image.png"`，当两个文件在同一目录中时它应该可以工作。让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:25:44.743

将图像名称更改为其他名称并尝试。可能会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T11:25:24.843

尝试`file:///sdcard/test/report_external.html` 而不是在您的路径中`file:///mnt/sdcard/test/report_external.html` 删除**/mnt**，它现在可以工作吗？