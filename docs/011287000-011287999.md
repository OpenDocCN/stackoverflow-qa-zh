# StackOverflow 问答 11287000-11287999

# python - mongoengine如何结合使用operator all和icontains

> ID：11287001
> 
> 赞同：1
> 
> 时间：2012-07-02T01:37:28.307
> 
> 标签：python, django, mongodb, mongoengine

对于 mongoengine，有运算符`all`和`icontains`. 但是我怎样才能结合它们的用法呢？

说每个项目，我只想匹配`icontains`但不匹配`exact`？我尝试使用正则表达式。`Q`我工作，但不幸的是，如果我在 mongoengine 的查询集中有超过 1 个，它会中断。因为它会尝试对象但不幸`deepcopy`的是对象不能被深度复制。`pattern``pattern`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:30:58.267

实际上，我建议在 pymongo 中使用[pymongo](http://api.mongodb.org/python/current/)安装方式`easy_install pymongo`，您可以尝试：

```
db.collections.find({'$and':[
    {'field A':re.compile('your pattern')},
    {'$ne':{'field A':'not exact word'}}
]}) 
```

在这里，`$ne`并且`$and`是本地 mongo db 运算符，您可以找到更多详细信息[mongodb advnace 查询](http://www.mongodb.org/display/DOCS/Advanced+Queries)

# xna - 如何使用 WiX 收集 XNA 内容文件？

> ID：11287016
> 
> 赞同：2
> 
> 时间：2012-07-02T01:41:04.960
> 
> 标签：xna, wix, build-automation

理想情况下，我会从项目规范本身获取输出，但 heat.exe 似乎不支持将`contentproj`文件作为项目类型，如果我传入游戏的 main ，它也不会获取内容`csproj`。

目前我有一个在输出文件夹上调用 heat 的预构建步骤，但是 (a) 感觉很脏，并且 (b) 产生了一堆`File`引用相对于输出文件夹的源路径的标签，这样构建失败时它可以'找不到它们相对于 WiX 项目的文件夹。

我应该注意到我正在使用 Votive，我的项目布局如下所示：

```
- Main solution
 - XNA "Metaproject" Folder
  - Game
   - bin/x86/Release (GameContent output appears here)
  - GameContent
 - WiX Project 
```

我非常希望尽量减少必须指定类似路径的次数`"../../Game/Game/bin/x86/Release/Content"`，因为这很容易出错并且令人沮丧。对正确方向的刺激表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:18:07.350

Assuming a contentproj is just a collection of files, what you can do is add the harvesting directly within the wixproj that is creating the installer:

```
<PropertyGroup>
    <HarvestDirectoryNoLogo>true</HarvestDirectoryNoLogo>
    <HarvestDirectorySuppressFragments>true</HarvestDirectorySuppressFragments>
    <HarvestDirectorySuppressUniqueIds>true</HarvestDirectorySuppressUniqueIds>
    <HarvestDirectoryAutogenerateGuids>true</HarvestDirectoryAutogenerateGuids>
</PropertyGroup>
<ItemGroup>
    <HarvestDirectory Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' " 
                      Include="$(SolutionDir)\GameContent">
        <DirectoryRefId>INSTALLDIR</DirectoryRefId>
        <SuppressRootDirectory>true</SuppressRootDirectory>
        <PreprocessorVariable>var.GameContentDir</PreprocessorVariable>
        <ComponentGroupName>GameContent</ComponentGroupName>
    </HarvestDirectory>    
</ItemGroup> 
```

You will need to add this manually to the wixproj file and you can repeat the HarvestDirectory for each directory if you require more than one.

To set the `var.GameContentDir` pre-processor variable edit the DefineConstants property:

```
<DefineConstants>GameContentDir=$(GameContentDir);</DefineConstants> 
```

which will set the pre-processor var to the msbuild property:

```
<GameContentDir>$(SolutionDir)\GameContent</GameContentDir> 
```

which means you can then modify this dependant on the build configuration. If you don't need to modify the path, just set a static value in the `<DefineConstants>` property.

This will then generate a wxs file in the obj directory each build which is then included assuming you have included the ComponentGroupName. If you have included the one you previously generated in your wixproj remove it as you will get conflicts if the ComponentGroupName is the same.

# c++ - 制作文件：头文件，包括另一个头文件 C++

> ID：11287017
> 
> 赞同：1
> 
> 时间：2012-07-02T01:41:13.467
> 
> 标签：c++, makefile

我有 3 个文件

```
main.cpp
a.h
b.h 
```

main.cpp 包括 ah 和 bh bh 包括 ah

谁能解释我应该如何为此编写一个make文件？

它是否正确？

```
objects = main.o 
sources = main.cpp

myProj: $(objects) 
    g++ -o myProj $(objects)

main.o: a.h b.h 

$(objects): $(sources)
    g++ -c $(sources)

clean:
    rm $(objects) myProj 
```

我不知道如何指定 bh 对 ah 的依赖关系

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:45:20.697

由于头文件始终作为 .c/.cpp 文件的一部分进行编译，因此无需指定头文件到头文件的依赖关系。您已经指定的依赖关系就足够了，因为`main.cpp`当 ah 和/或 bh 更改时将重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T05:52:53.647

如果您对 makefile 概念还有任何困惑，我建议您查看这个有用的教程。

[http://www.cs.umd.edu/class/fall2002/cmsc214/Tutorial/makefile.html](http://www.cs.umd.edu/class/fall2002/cmsc214/Tutorial/makefile.html)

# javascript - 如何使用 javascript 填充多维数组？

> ID：11287019
> 
> 赞同：2
> 
> 时间：2012-07-02T01:41:55.433
> 
> 标签：javascript

是否可以使用 javascript 来填充多维数组。我想创建三个下拉列表来显示“姓名”、“国籍”和“场合”。但是，我只能完成一个二维数组。

有什么好主意吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T01:45:54.273

文字对象：

```
var obj = {name : "Bob", nationality : "american", occasion : "often"}; 
```

`dot`您可以使用表示法或数组表示法访问更新 JS 对象：

```
obj["name"] = "Your Name Here";

obj.name = "Your Name Here"; 
```

您可以将对象推送到数组中以创建集合。您所描述的任务不需要多维数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-30T03:29:30.950

我知道在 JavaScript 中执行此操作有三种不同的语法。这些示例假定一个 2 x n 大小的数组。

1)

```
var categories = [[]];
var i = 0;
$.each(data, function(key, value) {
    categories[i] = new Array(value.cat_id, value.category_label);
    i++;
}); 
```

2)

```
var categories = [[]];
var i = 0;
$.each(data, function(key, value) {
    categories[i] = [
        [value.cat_id],
        [value.category_label]
    ];
    i++;
}); 
```

3)

```
var categories = [[]];
$.each(data, function(key, value) {
    categories.push([[value.cat_id],[value.category_label]]);
}); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T01:47:22.760

请参阅此**演示** [http://jsfiddle.net/LsmYt/](http://jsfiddle.net/LsmYt/) **或** [http://jsfiddle.net/LsmYt/1/](http://jsfiddle.net/LsmYt/1/)

`.push`= [http://www.w3schools.com/jsref/jsref_push.asp](http://www.w3schools.com/jsref/jsref_push.asp)

希望这会有所帮助，如果我错过了什么，请让我知道！

**代码**

```
 var rambo=[];
for(i=0;i<3;i++){
    rambo.push(['hulk ironman',i]);
    rambo.push(['Human nationality', i]);
    rambo.push(['Yay occassion', i]);
    $("#hulk").html(i);
}
alert(rambo.toSource());

$("#hulk").html(rambo.toSource()); 
```

# java - 在 OpenGL 的场景中渲染阴影的最简单方法是什么？

> ID：11287023
> 
> 赞同：0
> 
> 时间：2012-07-02T01:42:59.987
> 
> 标签：java, opengl, rendering, shadow, lwjgl

我正在使用 LWJGL 包，能够创建基本场景并绘制形状（有或没有纹理），移动自定义“相机”对象并旋转它以相应地渲染场景。但是，在创建阴影时，我不知所措。

我可以想到创建阴影的基本算法。
1) 从摄像机的视角渲染场景，就像在阴影中一样。
2）从灯光的角度渲染场景，照亮场景的可见部分（可能随着场景远离光源而变暗？）。
3) 从摄像机的视角重新渲染场景。

但是，我不知道 OpenGL（尤其是 LWJGL）的特定方法。在对这个主题进行研究后，我只遇到过需要几何图形的所有点和平面的教程，或者只包含我似乎无法为自己的项目工作的部分代码。

我是否正确地考虑了这一点？如果是这样，我需要用来对模型的可见部分进行着色（或做其他事情）的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:10:34.910

如您所见，最简单的方法是从灯光的角度渲染场景。将深度贴图的内容保存为阴影**贴图**纹理：每个深度距离光源最近。然后再次渲染场景，并计算每个片段在“世界”空间中相对于灯光位置的纹理坐标。将该值与 shadowmap 进行比较：如果它更大，则该片段被遮蔽。

许多年前，我编写了一些旧的（预着色器）OpenGL 代码来演示这一点。它在 C 中用于 GLUT，但所有 OpenGL 位在 LWJGL 或 JOGL 中都有 1:1 等效项。 [http://cs.anu.edu.au/~hugh.fisher/3dstuff/shadows.tar](http://cs.anu.edu.au/~hugh.fisher/3dstuff/shadows.tar)

将其转换为等效的现代着色器应该不难。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T13:10:15.607

为了实现和理解，我会说光线追踪阴影。基本上，它从地平面投射光线并检查它是否击中纹理上每个像素的任何东西。但它会疯狂地扼杀表演。因此，如果您真的想要，您可以进行一次光线计算并将其保存到纹理中，然后在关卡/扫描开始时加载它。这根本不是动态的，但它有效。

# javascript - 从 Google Docs 中获取选择

> ID：11287025
> 
> 赞同：1
> 
> 时间：2012-07-02T01:43:07.390
> 
> 标签：javascript, google-chrome-extension, selection, google-docs

有没有办法解决这个事实

```
window.getSelection() 
```

似乎在 Google Docs 中不起作用？我想从 Google Docs 中突出显示的选择中捕获文本。我的实现是使用 Chrome 扩展，但这并不像 window.getSelection() 似乎在那里不起作用（尽管它在其他地方起作用）那样相关。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T05:03:37.880

如[Docs 博客所述 - 新的 Google Docs 有何不同？](https://drive.googleblog.com/2010/05/whats-different-about-new-google-docs.html)，Google Docs 避开了浏览器的本机功能，并在自己的 Javascript 中实现了一切——包括文本格式和定位、光标移动和选择处理。

由于 Docs 没有为当前正在编辑的文档提供公共的浏览器内 API，因此您要么必须挖掘其私有内容，要么放弃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-05-18T03:39:14.287

我得到了选定的文本：

```
let selection = DocumentApp.getActiveDocument().getSelection();
console.log(selection.getRangeElements()[0].getElement().asText().getText()); 
```

但它给了你整个段落。

# caching - 什么是暖缓存？

> ID：11287028
> 
> 赞同：1
> 
> 时间：2012-07-02T01:43:30.010
> 
> 标签：caching, warm-up

在热缓存中运行程序是什么意思？

谁能好心解释一下。

暖缓存是否意味着..查询时缓存命中的缓存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T01:49:22.900

缓存通过先前加载并记住所请求的数据来工作。

初始化缓存时，它是空的。因此，对任何给定数据的第一次访问将导致缓存未命中，并且花费的时间比人们希望的要多。

预热缓存意味着在启动后立即执行代码，在程序“真正”需要之前将内容加载到缓存中（因此当最终用户使用应用程序时已经存在）。

这类似于运动员在需要肌肉参加比赛之前进行伸展运动以热身。

# gwt - smartgwt 网格摘要问题

> ID：11287030
> 
> 赞同：0
> 
> 时间：2012-07-02T01:44:07.483
> 
> 标签：gwt, smartgwt, listgrid

我有一个列表网格。我自定义网格摘要，我有下一个选项：

```
 setGroupByField("class_desc");

 setGroupStartOpen(GroupStartOpen.ALL);

 setShowGridSummary (true);

 setShowGroupSummary (true);

 setShowGroupSummaryInHeader (true); 
```

但是我不能让我显示类别之间的划分，我做错了什么？

我确定函数名称`setGroupByField`与数据源相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:46:59.820

请尝试以下链接。以下是您正在处理的相同要求的链接。

[http://smartgwt.googlecode.com/svn-history/r901/trunk/samples/showcase/src/com/smartgwt/sample/showcase/client/grid/GridSummariesSample.java](http://smartgwt.googlecode.com/svn-history/r901/trunk/samples/showcase/src/com/smartgwt/sample/showcase/client/grid/GridSummariesSample.java)

# c - 简单的“hello world”configure.ac 无法运行

> ID：11287033
> 
> 赞同：5
> 
> 时间：2012-07-02T01:45:00.597
> 
> 标签：c, autoconf, automake

我正在使用最新的 automake (v1.12)跟踪[文档，但构建仍然失败。](http://www.gnu.org/software/automake/manual/html_node/Public-Macros.html)

这是我的*configure.ac*：

```
AC_PREREQ([2.69])
AC_INIT([helloworld], [0.1], [bugs@hw.com])
AC_INIT_AUTOMAKE([1.12 foreign no-define])
AC_CONFIG_SRCDIR([src/hello.c])
AC_CONFIG_HEADERS([config.h])
AC_CONFIG_FILES([Makefile])

# Checks for programs.
AC_PROG_CC([gcc cc])

# Checks for libraries.

# Checks for header files.

# Checks for typedefs, structures, and compiler characteristics.

# Checks for library functions.

AC_OUTPUT(src/Makefile) 
```

执行：

```
$ autoreconf
configure.ac:3: error: possibly undefined macro: AC_INIT_AUTOMAKE
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
autoreconf: /usr/bin/autoconf failed with exit status: 1

$ automake
configure.ac: error: no proper invocation of AM_INIT_AUTOMAKE was found.
configure.ac: You should verify that configure.ac invokes AM_INIT_AUTOMAKE,
configure.ac: that aclocal.m4 is present in the top-level directory,
configure.ac: and that aclocal.m4 was recently regenerated (using aclocal)
configure.ac:5: error: required file 'config.h.in' not found
/usr/share/automake-1.12/am/depend2.am: error: am__fastdepCC does not appear in AM_CONDITIONAL
/usr/share/automake-1.12/am/depend2.am:   The usual way to define 'am__fastdepCC' is to add 'AC_PROG_CC'
/usr/share/automake-1.12/am/depend2.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again
/usr/share/automake-1.12/am/depend2.am: error: AMDEP does not appear in AM_CONDITIONAL
/usr/share/automake-1.12/am/depend2.am:   The usual way to define 'AMDEP' is to add one of the compiler tests
/usr/share/automake-1.12/am/depend2.am:     AC_PROG_CC, AC_PROG_CXX, AC_PROG_OBJC, AC_PROG_OBJCXX,
/usr/share/automake-1.12/am/depend2.am:     AM_PROG_AS, AM_PROG_GCJ, AM_PROG_UPC
/usr/share/automake-1.12/am/depend2.am:   to 'configure.ac' and run 'aclocal' and 'autoconf' again 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T02:03:20.430

第 3 行应为

```
AM_INIT_AUTOMAKE([1.12 foreign no-define]) 
```

请注意，它以**`AM_`**not开头**`AC_`**。

一般来说，所有的 automake 宏都以**`AM_`**.

# javascript - Chrome 不支持 Javascript 中的原型属性吗？

> ID：11287040
> 
> 赞同：2
> 
> 时间：2012-07-02T01:46:45.280
> 
> 标签：javascript, cross-browser

这是我的代码：

```
Image.prototype.x = 0;
Image.prototype.y = 0;

var blankImage = new Image();
blankImage.src = "blank.png";
blankImage.x = 16;
blankImage.y = 16; 
```

如果我这样做，在 Firefox 中`blankImage.x`它会返回 16，但在 Chrome 中它会返回 0。有没有办法解决这个问题？我喜欢这个解决方案来解决我当前的问题..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T01:58:47.813

Chrome 已经定义`x`了`y`图像元素。由于您还没有将元素插入到页面中，它的`x`和`y`将是`0`.

在至少有一张图片的页面上，在 Chrome 的控制台中运行它...

```
$$("img")[0].hasOwnProperty("x"); 
```

您将看到`HTMLImageElement`已经直接在其上拥有该属性，*而不是*在其`prototype`对象上。

如果您在控制台中输入它，您也可以直观地看到它...

```
dir($$("img")[0]); 
```

...然后展开对象。

`x`和属性是不可变的`y`，无法更改，因此当您尝试修改它们时它们会保留其值（就像它们[`writable`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty#Writable_attribute)是一样`false`）。

如果您要对 a 上尚不存在的属性执行相同操作`HTMLImageElement`，它将按您的预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T02:37:35.687

请注意，DOM Image 对象不是任何标准的一部分（它可能隐藏在 HTML5 中的某个地方，但我找不到它），它是一个 DOM 0 功能，在标准化时就存在于浏览器中，并且从那时起就一直保持兼容性.

浏览器不需要实现任何类型的继承方案，因此期望它们实现原型继承是不合理的。此外，许多浏览器**并未**在所有或任何 DOM 对象上实现原型继承。所以不要期望 DOM Image 对象有**原型**属性，或者原型对象上设置的属性会被 Image 实例继承。

文档：MDN：[https](https://developer.mozilla.org/en/DOM/Image) ://developer.mozilla.org/en/DOM/Image MSDN 图像对象： http: [//msdn.microsoft.com/en-us/library/dd757809 (v=vs.85).aspx#方法](http://msdn.microsoft.com/en-us/library/dd757809%28v=vs.85%29.aspx#methods)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T02:00:45.427

不完全确定发生了什么，但我发现这取决于您设置的属性的名称，例如：

```
Image.prototype.hello = "hello";

var a = new Image();

a.hello; // Value is "hello";

a.hello = "goodbye";
a.hello; // Now it is "goodbye" 
```

在 Chrome 的控制台中测试。

# php - $_SESSION 诉 $_COOKIE

> ID：11287041
> 
> 赞同：5
> 
> 时间：2012-07-02T01:46:49.040
> 
> 标签：php, session, cookies

`$_SESSION`大约几周前，我在创建登录页面时了解到。我可以成功登录并将其与变量一起使用。目前我正在尝试理解`$_SESSION`和`$_COOKIE`。如果我错了，请纠正我，我可以`$_SESSION`在登录和移动页面时使用。使用`$_COOKIE`，它用于记住我上次访问的时间和偏好。

涉及 cookie 的另一件事是，当网站使用广告（例如：Google AdSense）时，它们会使用 cookie 来跟踪访问者何时点击广告，对吗？

我可以同时使用 ( `$_SESSION`& `$_COOKIE`) 吗？我在某处读到您可以存储`session_id`cookie 的 as 值。

另外，我阅读了有关安全性的信息，这让我发现了这一点：[用户登录时，我需要在 php 会话中存储什么？](https://stackoverflow.com/questions/1221447/what-do-i-need-to-store-in-the-php-session-when-user-logged-in/1225668#1225668). `session_regenerate_id`当用户返回网站时使用是否有用？

还有这个：[如何使用 php 存储 cookie](https://stackoverflow.com/questions/5742649/how-to-store-a-cookie-with-php)涉及`uniqid`.

对于那些想知道登录的人，我使用电子邮件和密码。这样用户就可以更改他们的用户名。

我期待从任何愿意分享他们知识的人那里了解更多关于这两个的信息。如果我问的问题太多，你可以回答你有更多经验的问题。

如果您需要更多信息，请询问，因为我可能忘记包含某些内容。

谢谢你。

* * *

发现：[在允许在我的网站上放置广告之前，我应该注意哪些风险？](https://security.stackexchange.com/questions/7840/what-risks-should-i-be-aware-of-before-allowing-advertisements-being-placed-on-m)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T02:09:49.357

简单来说，`$_SESSION`和`$_COOKIE`是不同的。两者都是 php 全局变量，但 cookie 的使用没有语言限制。 `$_SESSION`就是将数据存储在服务器中，同时将会话 ID 存储为 cookie。`$_COOKIE`是*浏览器发送*给服务器的cookies。这是主要的区别。如果客户端浏览器禁用了 cookie，会话将不起作用。

**- 安全 -**

如果您检查浏览器发送的请求标头，您会注意到每个请求中都有 cookie 信息。可以通过截断您的网络通信来跟踪它们。任何拥有更好工具的人都可以编辑 cookie 数据。 **永远不要使用 cookie 来存储密码！** 如果您使用会话，则密码在服务器中，并且只有会话 ID cookie 将存储在客户端中，*从而减少*了安全问题。Chuck Norris 仍然可以劫持会话。

**- 表现 -**

如果您在浏览器中存储 5 个 cookie，其中包含 200 个字节，那么无论是 jpg 文件还是实际需要 cookie 信息的页面，*每个*请求都会花费大约 1 KB 的数据。因此，这直接影响您的网站对最终用户的执行速度。

如果你使用会话，服务器有这个 1 KB 的数据，而客户端在每个页面请求中发送会话 ID。您可以通过将静态文件转移到另一个无 cookie 域来变得聪明。

**- 寿命 -**

会话得到及时清除。因此，如果您想长时间保存某些内容，请改用 cookie。大多数网站的“记住我”功能都是这样工作的（不过，它不存储密码。只是会话信息 - 不要与会话 ID 混淆）。

底线，会话和 cookie 是不同的类型。session 是相对安全的服务器端存储。经常被清除。Cookie 可以有更长的寿命，但它会影响性能（不是 CPU/RAM -- 加载时间），除非您不牢记这一点。如果有理由将 1 KB 存储为 cookie，那就太奇怪了。

永远不要相信通过`$_GET/POST`. 做同样的照顾`$_COOKIE`。并且存在会话劫持。有人可以猜出其他人的会话 ID，尽管这几乎是不可能的。所以首先在服务器端使用一些验证。

# c++ - 有没有办法专门针对目标基元模板？

> ID：11287043
> 
> 赞同：3
> 
> 时间：2012-07-02T01:47:14.967
> 
> 标签：c++, templates, primitive

在专门化一个类模板时，我希望有一个专门化目标成熟的类（完整的构造函数、析构函数等）和一个专门化目标原语（`int`,`float`等）。我见过的唯一部分专业化是针对指针类型（通过`T*`）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T02:09:12.057

您可以使用 C++11 [type_traits](http://en.cppreference.com/w/cpp/types)。这里有一些可以帮助您入门的东西，您可以根据需要进行更多专业化：

```
#include <type_traits>
#include <iostream>

template<typename T, typename E = void>
struct A; // undefined

template<typename T>
struct A<T, typename std::enable_if<std::is_class<T>::value && !std::is_pod<T>::value>::type> {
        A() { std::cout << "I'm a class, but I'm not a pod type" << std::endl; }
};

template<typename T>
struct A<T, typename std::enable_if<std::is_class<T>::value && std::is_pod<T>::value>::type> {
        A() { std::cout << "I'm a class and a pod type" << std::endl; }
};

template<typename T>
struct A<T, typename std::enable_if<!std::is_class<T>::value>::type> {
        A() { std::cout << "I'm not a class" << std::endl; }
};

class X {};
class Y { ~Y(){} };

int main()
{
        A<X> a1;
        A<Y> a2;
        A<int> a3;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:04:47.130

`boost::has_trivial_assign`应该给你这个信息。

```
template <class T>
  struct has_trivial_assign : public true_type-or-false_type {}; 
```

[http://www.boost.org/doc/libs/1_50_0/libs/type_traits/doc/html/boost_typetraits/reference/has_trivial_assign.html](http://www.boost.org/doc/libs/1_50_0/libs/type_traits/doc/html/boost_typetraits/reference/has_trivial_assign.html)

# php - 从 PHP 中的查询中检索多个结果

> ID：11287047
> 
> 赞同：0
> 
> 时间：2012-07-02T01:48:18.283
> 
> 标签：php, phpmyadmin, mysqli

我正在创建一个脚本，我需要在数据库中检索多个信息。我期待收到这些数据

![在此处输入图像描述](../Images/15a2016996b6b2e471f0851e6a4a4f7d.png)

我需要得到那两条轨道路径。但我得到的只是第一个结果，仅此而已。我在 phpmyadmin 中运行了我的 SQL 脚本，它完全显示了我需要的所有数据。但是当我在 PHP 中执行该查询时。它只返回给我第一个结果。这是我的脚本

```
public static function find_user_tracks($id){
    global $mySQL;
    $sql = "SELECT * FROM `tracks` WHERE account_id = {$id}";
    $result_set =  $mySQL->query($sql);
    return $result_set->fetch_assoc();
} 
```

这是我用来打印结果的代码

```
$row = Track::find_user_tracks($id);
                echo "{$row['track_path']}<br>"; 
```

但我收到的只是第一条路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T01:51:58.397

您需要执行一个循环来返回所有记录。

```
public static function find_user_tracks($id){
    global $mySQL;
    $sql = "SELECT * FROM `tracks` WHERE account_id = {$id}";
    $result_set =  $mySQL->query($sql);
    $ret = array();
    while($row = $result_set->fetch_assoc()) {
      $ret[] = $row;
    }
    return $ret;
} 
```

# c# - 为什么我的异步回调在同一个线程中运行？

> ID：11287048
> 
> 赞同：4
> 
> 时间：2012-07-02T01:49:18.720
> 
> 标签：c#, .net, .net-4.0, asynchronous

我正在尝试使用`FtpWebRequest`异步调用（`BeginGetResponse`/ `EndGetResponse`）。

但是，似乎来自的回调与`BeginGetResponse`我的应用程序在同一个线程中运行，当我认为它会使用不同的（和线程池）线程时。这意味着我的应用程序在继续之前会在回调中阻塞。

我已经设置了一个 LINQPad 概念验证，如下所示：

```
"Starting".Dump();
Thread.CurrentThread.GetHashCode().Dump(); 
Thread.CurrentThread.IsThreadPoolThread.Dump();

IAsyncResult result = request.BeginGetResponse((ar) => 
{
     "Inside Callback".Dump();
     Thread.CurrentThread.GetHashCode().Dump();
     Thread.CurrentThread.IsThreadPoolThread.Dump();
     var resp = request.EndGetResponse(ar);
     "Callback Complete".Dump();
}, null);

"After Callback".Dump(); 
```

这将打印输出如下：

```
Starting
33
False
Inside Callback
33
False
Callback Complete
After Callback 
```

我期望的是这样的（假设回调需要足够长的时间才能运行）：

```
Starting
33
False
Inside Callback
44
True
After Callback // App continues despite callback running
Callback Complete 
```

由于回调在同一个应用程序线程上运行，这意味着如果回调中的某些内容需要很长时间（例如`Thread.Sleep`，为了参数而引入一个），我的应用程序就会阻塞在那里。这意味着我无法对请求设置超时（例如使用`ThreadPool.RegisterWaitForSingleObject`）。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T02:13:21.573

当 BeginXXX 方法可以立即完成异步操作时，它不会在线程池线程上运行回调，而是将[IAsyncResult.CompletedSynchronously 属性](http://msdn.microsoft.com/en-us/library/system.iasyncresult.completedsynchronously.aspx)设置为`true`并同步执行回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:06:14.803

我假设 BeginGetResponse 方法在调用者线程的上下文中调用回调

# javascript - iframe 重新加载按钮

> ID：11287050
> 
> 赞同：13
> 
> 时间：2012-07-02T01:49:35.460
> 
> 标签：javascript, html, css, button, iframe

我查看了许多网站，但它们似乎都不能正常工作，或者我不理解它们。我想要一个简单的按钮来刷新某个 iframe。该按钮将位于父页面上，并且 iframe 名称为“Right”。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-02T02:27:36.150

有很多方法可以做到这一点。假设这个`iframe`标记：

```
<iframe name="Right" src="http://www.example.com"></iframe> 
```

我们可以通过[函数调用](http://jsfiddle.net/ult_combo/YJrK9/)来做到这一点：

**HTML**

```
<button onclick="refreshIframe();">Refresh Iframe</button> 
```

**JS**

```
function refreshIframe() {
    var ifr = document.getElementsByName('Right')[0];
    ifr.src = ifr.src;
} 
```

或者使用[内联 JS](http://jsfiddle.net/ult_combo/YJrK9/1/)：

```
<button onclick="var ifr=document.getElementsByName('Right')[0]; ifr.src=ifr.src;">Refresh Iframe</button> 
```

或使用[事件监听](http://jsfiddle.net/ult_combo/YJrK9/3/)器：

**HTML**

```
<button id="iframeRefresher">Refresh Iframe</button> 
```

**JS**

```
window.onload = function() {
    document.getElementById('iframeRefresher').addEventListener('click', function() {
        var ifr = document.getElementsByName('Right')[0];
        ifr.src = ifr.src;
    });
} 
```

与上面相同，现在[支持 IE <= 8 并使用全局范围内的函数作为处理程序](http://jsfiddle.net/ult_combo/YJrK9/4/)而不是匿名处理程序：

**HTML**

```
<button id="iframeRefresher">Refresh Iframe</button> 
```

**JS**

```
window.onload = function() {
    var refresherButton = document.getElementById('iframeRefresher');
    if (refresherButton.addEventListener)
        refresherButton.addEventListener('click', refreshIframe, false);
    else
        refresherButton.attachEvent('click', refreshIframe);
}

function refreshIframe() {
    var ifr = document.getElementsByName('Right')[0];
    ifr.src = ifr.src;
} 
```

所有这一切都无需触及 jQuery 或任何其他库。

您应该使用其中的哪一个？无论您认为哪个更易于维护和可读。尽可能避免使用全局变量。我个人会避免使用带有标记的内联 JS，而且侦听器似乎是不必要的，但这只是我。选择更适合您的。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-02T01:54:42.810

`id`在您的 iframe 中添加新内容并尝试以下代码。

```
var iframe = document.getElementById('FrameId');
$("button").click(function() {
    iframe.src = iframe.src;
}): 
```

# ios - 在 iOS 中访问音频输出

> ID：11287053
> 
> 赞同：2
> 
> 时间：2012-07-02T01:50:49.750
> 
> 标签：ios, core-audio, pcm

我想从 iOS 的输出设备以 PCM 格式获取音频数据。我想对输出音频执行 FFT 并显示信息。你能给我提供示例源代码或教程的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:31:10.720

iOS 上没有用于访问音频输出设备的公共 API。应用程序可以访问应用程序本身播放的任何 PCM 音频数据。请参阅 RemoteIO 音频单元的 API。

# jquery - 如何让 jQuery File Upload 与 Backbone 和 Rails 配合得很好？

> ID：11287057
> 
> 赞同：2
> 
> 时间：2012-07-02T01:51:05.630
> 
> 标签：jquery, file-upload, backbone.js

我正在尝试使用[jQuery File Upload](https://github.com/blueimp/jQuery-File-Upload)插件来预览我的图像，然后再将它们从 Backbone 发送到 Rails。当我提交时，我需要同时从表单中发送一堆其他数据。

在添加图像之前，我正在提交表单并执行以下操作：

```
this.collection.create(formData); 
```

我要将数据发送到的 URL 在集合中定义。使用文件上传，我应该重新定义插件中的 URL 并使用 formData 选项从表单发送其余数据吗？有没有更好的方法来使用 Backbone 做到这一点？

# sql-server - 选择具有最新时间戳的 .bak 文件

> ID：11287061
> 
> 赞同：-3
> 
> 时间：2012-07-02T01:51:46.900
> 
> 标签：sql-server, database, backup, restore

我想将数据库备份文件 .bak 恢复到服务器，但有一些具有不同时间戳的 .bak 文件，例如：

> dbname_backup_201210290200.bak
> dbname_backup_201210300212.bak
> dbname_backup_201210310213.bak

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T02:17:11.953

假设 xp_cmdshell 已启用并且所有文件将以 yyyyMMddhhmm.bak 结尾：

```
CREATE TABLE #x(n VARCHAR(2048));

DECLARE @cmd VARCHAR(2048), @fn VARCHAR(2048), @folder VARCHAR(255);

SET @folder = 'E:\sqlbackup\MerchantAPIReport\'; --'
SET @cmd = 'dir /b "' + @folder + 'MerchantAPIReport_backup_*.bak"';

INSERT #x EXEC master..xp_cmdshell @cmd;

SELECT TOP (1) @fn = @folder + n 
  FROM #x
  ORDER BY CONVERT(DATETIME, 
    STUFF(STUFF(LEFT(RIGHT(n, 16), 12), 11, 0, ':'), 9, 0, ' '))
  DESC;

-- whatever you do, don't try to construct this yourself.
-- I'll fill in the blanks for you. <sigh>

RESTORE DATABASE [MerchantAPIReport] FROM DISK = @fn
  WITH FILE = 1,
  MOVE N'MerchantAPIReport'     TO N'D:\SQLData01\MerchantAPIReport.mdf',
  MOVE N'MerchantAPIReport_log' TO N'F:\SQLLog\MerchantAPIReport.ldf',
  NOUNLOAD, REPLACE, STATS = 10;

-- RESTORE DATABASE ... FROM @fn ...; -- fill in the rest here

DROP TABLE #x; 
```

# android - 使用 SQLite 保存分数进行游戏

> ID：11287063
> 
> 赞同：0
> 
> 时间：2012-07-02T01:52:07.047
> 
> 标签：android, android-canvas

我想创建一个类，`HighScore`来保存游戏的分数。我使用`SQLite`和`ListView`显示。这是我的代码：

类 HighScoreData：

```
public class HighscoreData {

public static final String SID = "scoreId";
public static final String SLEVEL = "level";
public static final String SSCORE = "score";

public static final String DB_NAME = "ScoreDB";
public static final String DB_TABLE = "Score";
public static final int DB_VERSION = 2;

private final Context mContext;
private SQLiteDatabase mDB;
private DBHelper mDBHelper;

public HighscoreData(Context c)
{
    this.mContext = c;
}

private static class DBHelper extends SQLiteOpenHelper
{

    public DBHelper(Context context, String name, CursorFactory factory,
            int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try
        {
            db.execSQL("CREATE TABLE Score(scoreId integer PRIMARY KEY autoincrement, level int, score int);");
        }
        catch(SQLException ex)
        {
            ex.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.i("DBAdapter", "Updating database...");
        db.execSQL("DROP TABLE IF EXISTS Student");
        onCreate(db);
    }
}
/**
 * 
 */
public HighscoreData openDB()
{
    mDBHelper = new DBHelper(mContext, DB_NAME, null, DB_VERSION);
    mDB = mDBHelper.getWritableDatabase();
    return this;
}
/**
 * close
 */
public void closeDB()
{
    mDBHelper.close();
}
/**
 * insert record
 */
public long insert(int level, int score)
{
    ContentValues cv = new ContentValues();
    cv.put(SLEVEL, level);
    cv.put(SSCORE, score);
    return mDB.insert(DB_TABLE, null, cv);
}
/**
 * 
 */
public boolean edit(int _id, int level, int score)
{
    ContentValues cv = new ContentValues();
    cv.put(SLEVEL, level);
    cv.put(SSCORE, score);
    return mDB.update(DB_TABLE, cv, SID + "=" + _id, null) > 0;
}
/**
 * 
 */
public boolean remove(int _id)
{
    return mDB.delete(DB_TABLE, SID + "=" + _id, null) > 0;
}
/**
 * 
 */
public void removeAll()
{
    mDB.delete(DB_TABLE, null, null);
}
/**
 * 
 */
public Cursor getAllScores()
{
    return mDB.query(DB_TABLE, new String[]{SID, SLEVEL, SSCORE}, null, null, null, null, null);
}
/**
 * 
 */
public Cursor getScoreById(int _id)
{
    Cursor mCursor = mDB.query(true, DB_TABLE, new String[]{SID, SLEVEL, SSCORE}, SID + "=" + _id, null, null, null, null, null);
    if(mCursor != null)
    {
        mCursor.moveToFirst();
    }

    return mCursor;
}
} 
```

类高分：

```
public class Highscore extends Activity {

private Cursor mCursor;
private ListView listView;
String level;
String score;
String str = new String();
StringBuilder sb = new StringBuilder();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.highscore);
    mCursor = BeginGame.hsData.getAllScores();
    final ArrayList<String> arrayWork = new ArrayList<String>();
    final ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,R.layout.list_item, arrayWork);
    listView = (ListView)findViewById(R.id.hScore);
    if(mCursor.moveToFirst()) { 
        do{
        level =String.valueOf(mCursor.getInt(1));
        score =String.valueOf( mCursor.getInt(2));
        sb.append("Level :").append(level).append(" - ");
        sb.append("Score :").append(score).append("\n");
        }while(mCursor.moveToNext());
    }
    str = sb.toString();
    arrayWork.add(str);
    listView.setAdapter(arrayAdapter);
    arrayAdapter.notifyDataSetChanged();    
}   
} 
```

当我在 SQLite 中保存分数时，我可以打开`HighScore`活动，但是当我第一次打开 SDK 时，它会抛出错误。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:11:31.767

您需要发布错误，但我看到的第一件事是您没有将主键列名称设置为“_id”。

这是 Android 在几乎任何小部件中使用此数据所必需的。这就是它跟踪数据的方式。您不仅在 DB 中需要它，而且必须调用它，以便它位于用于备份适配器的任何游标中。您不需要显示它，但它必须存在。

# c# - C#选择查询不修改外部变量

> ID：11287070
> 
> 赞同：2
> 
> 时间：2012-07-02T01:53:53.213
> 
> 标签：c#, linq

我有一个包含 n 个元素的类，以及一个返回元素的平方根的属性：

```
public double Length 
{ 
    get 
    { 
        double sum = 0.0; 
        Elements.Select(t => sum += t * t);  
        return Math.Sqrt(sum); 
    } 
} 
```

但是，这不起作用 - 无论元素的值如何，总和都保持为 0.0。
为什么这不起作用？

注意：我已经以另一种方式实现了它，但我想了解为什么上面的代码不起作用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T02:00:23.757

LINQ 使用[延迟执行](http://www.develop-one.net/blog/2008/05/02/C30DeferredExecution.aspx)- [Select 方法](http://msdn.microsoft.com/en-us/library/bb548891.aspx)不会立即为所有元素执行 lambda，而是返回一个[IEnumerable<T>](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)，它在执行时会在每个元素被枚举时执行 lambda。

另请注意，LINQ 用于查询，而不是为每个元素执行代码块。您应该编写代码，使得 lambda 中没有语句，只有一个没有副作用的表达式。当您尝试计算总和时，您可以使用[Sum 方法：](http://msdn.microsoft.com/en-us/library/bb534734)

```
public double Length 
{ 
    get 
    { 
        double sum = elements.Select(t => t * t).Sum();
        return Math.Sqrt(sum); 
    } 
} 
```

或者

```
public double Length 
{ 
    get 
    { 
        double sum = elements.Sum(t => t * t);
        return Math.Sqrt(sum); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T01:57:38.657

延期执行。

试试这个：

```
public double Length
{
    get { return Math.Sqrt(Elements.Sum(t => t * t)); }
} 
```

这里 linq 查询立即执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T02:08:49.303

这不起作用，因为延迟执行。你可以阅读这个

[LINQ 和延迟执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)

[了解 LINQ 的延迟执行](http://www.codeguru.com/csharp/csharp/cs_linq/article.php/c16935/Understanding-LINQs-Deferred-Execution.htm)

# objective-c - 重新加载表格视图单元格时出现 EXC_BAD_ACCESS 错误

> ID：11287075
> 
> 赞同：0
> 
> 时间：2012-07-02T01:55:16.333
> 
> 标签：objective-c, uitableview, nsarray

在我的应用程序中，用户必须通过在表格视图中输入答案来回答给定的问题。我有一个表格视图，它以一个自定义单元格开头，用户在其中输入一些数据。该单元格有一个按钮，可以加载另一个自定义单元格，用户可以在其中输入更多数据。

一旦用户回答了问题，表格视图就会被修改，以便它只有第一个单元格用于新问题。此外，几个“数据”数组，包括`leftData.equation`负责跟踪用户输入的数组，都被清除了所有对象。( `[array removeAllObjects]`)

加载第二个单元格或返回第一个单元格进行下一个问题时都没有崩溃。但是，当我再次尝试加载第二个单元格时，程序会因访问错误而崩溃。我假设它与数组有关，`leftData.equation`

下面是第二个单元格加载时调用的方法

```
- (void) setUpBalanceCell: (UITableView *) tableView  {

    balanceCell = (BalanceCell *) [tableView dequeueReusableCellWithIdentifier:@"balanceCell"];

    if (balanceCell == nil) {   

        NSArray *nib =   [[NSBundle mainBundle] loadNibNamed:@"BalanceCell" owner:self options:nil];
        balanceCell = (BalanceCell*) [nib objectAtIndex:0];
        [balanceCell.rightButton addTarget:self action:@selector(test) forControlEvents:UIControlEventTouchUpInside];

    }
        // stores data from first cell into a data array
        for (FormulaLabel *label in equationCell.leftView.equationOrder) 
            [leftData.equation addObject:label.text];   //fix:  needs to comply with MVC   

        for (FormulaLabel *label in equationCell.rightView.equationOrder)  
            [rightData.equation addObject:label.text];  

        [leftData setUpBalancedEquation];
        [rightData setUpBalancedEquation];

        [self setUpView:balanceCell.leftView fromArray:leftData.equation toArray:leftBalanceItems]; // WHERE EXC_BAD ACCESS appears
        [self setUpView:balanceCell.rightView fromArray:rightData.equation toArray:rightBalanceItems];

} 
```

调用坏访问的方法

```
- (void)setUpView:(UIView *)view fromArray:(NSMutableArray *)equationData toArray:(NSMutableArray *)balanceItems {

int labelCount = 0; //label #
int startingPoint = 5; //x vaiue where first label starts

//Crashes in method below
for (NSString *equationText in equationData) {

    //add text
    FormulaLabel *tempLabel = [[FormulaLabel alloc] initWithFrame:CGRectMake(startingPoint, 2, 10, 22)];
    tempLabel.text = equationText;
    [tempLabel sizeToFit];
    [view addSubview:tempLabel];
    tempLabel.tag = labelCount;
    [balanceItems addObject:tempLabel];
    //set location of '+'
    startingPoint = tempLabel.frame.origin.x + tempLabel.frame.size.width + 3;

    if (labelCount != [equationData count]-1) { //not the last label

        UILabel *plus = [[[UILabel alloc] initWithFrame:CGRectMake(startingPoint, 5, 10, 10)]autorelease];
        plus.text = @"+";
        plus.font = [UIFont systemFontOfSize:13];
        [plus sizeToFit];
        [view addSubview:plus];
        startingPoint = plus.frame.origin.x + plus.frame.size.width + 3;
        [balanceItems addObject:plus];
    }

    labelCount ++;
    [tempLabel release];
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:25:55.583

好吧，保留它肯定会解决它，但如果我是你，我会首先查看阵列的发布位置。

Calling `retain` increments the retain count of an object. When you first create an object with `[NSObject alloc]` the retain count is set to 1\. calling `retain` increases the count so it becomes 2\. calling `release`, on the other hand, decrements the retain count by 1\. so, assume you call `release` on an object with retain count of 1, it becomes 0\. When it is 0, the object is released from memory (and calls `dealloc`).

I hope this makes things clear, memory management is very confusing. You might want to look into [testing for memory leaks](https://stackoverflow.com/questions/494327/how-do-you-detect-memory-leaks-on-iphone) later on in your project.

best of luck.

# c# - C# Linq to SQL 连接字符串（新手）

> ID：11287079
> 
> 赞同：2
> 
> 时间：2012-07-02T01:56:21.687
> 
> 标签：c#, sql, linq, connection-string, datacontext

我是一个新的 linq to sql 学习者，这是我第一次尝试创建数据查看器程序。这个想法很简单，我想创建一个能够查看数据库中表内容的软件。就是这样。

我已经在这里遇到了一个早期问题，我在网上看到了很多教程和文章，但我仍然无法修复这个错误。

这是我的代码：

```
 static void Main(string[] args)
    {
        string cs = "Data Source=localhost;Initial Catalog=somedb;Integrated Security=SSPI;";

        var db = new DataClasses1DataContext(cs);
        db.Connection.Open();

        foreach (var b in db.Mapping.GetTables())
            Console.WriteLine(b.TableName);

        Console.ReadKey(true);
    } 
```

当我试图检查`db.connection.equals(null);`它返回时`false`，我认为我已经成功连接到数据库，因为根本没有错误。但是上面的代码不会在屏幕上打印任何内容。

我有点迷茫，不知道这里发生了什么。有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:08:08.020

好的，让我们看一下其中的一些行：

* * *

```
var db = new DataClasses1DataContext(cs); 
```

这是对构造函数的完全正常且精细的调用。由于 DataContext 实现了 IDisposable，所以在实际使用时，请考虑使用 using 语句。

```
using (var db = new DataClasses1DataContext(cs))
{
  // do stuff with db here
} // when leaving the block, db is disposed - even in the case of an exception. 
```

* * *

```
db.Connection.Open(); 
```

不要这样做。DataContext 将在需要时打开和关闭连接。

* * *

```
foreach (var b in db.Mapping.GetTables())
  Console.WriteLine(b.TableName); 
```

嗯，也许映射中没有表。您是否从服务器资源管理器中将表格拖到设计器表面？

大多数人会查询表而不是仔细阅读映射。请考虑以下代码：

```
foreach (var customer in db.Customer.Take(10))
{
  Console.WriteLine(customer.Name); 
} 
```

* * *

这是一个视频，展示了如何从服务器资源管理器中将表格拖到设计器表面：

[http://www.youtube.com/watch?v=z9L11qrw9gk](http://www.youtube.com/watch?v=z9L11qrw9gk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:08:46.083

尝试将您的连接字符串更改为以下

```
string cs = @"Data Source=.\;Initial Catalog=somedb;Integrated Security=SSPI;"; 
```

# delphi - 从 INI 文件中获取搜索值

> ID：11287080
> 
> 赞同：-1
> 
> 时间：2012-07-02T01:56:23.430
> 
> 标签：delphi, delphi-xe2, ini

我有一个 INI 文件，我想知道是否可以从这个给定信息中获得价值

我的 INI 看起来像这样

```
[Images]
image135=Lava.bmp
x135=13
y135=5
image76=Mountian.bmp
x76=7
y76=6
image86=Lava.bmp
x86=8
y86=6
image85=Lava.bmp
x85=8
y85=5
image125=gryph.bmp
x125=12
y125=5 
```

现在我打开这个ini，我想找到图像##[value] 我只知道x##[value] 和y##[value]

所以假设我知道我的值是 (8,6) 现在我想获取返回的图像 Lava.bmp。注意 8 是 x 坐标，6 是 y 坐标。

不确定我是否解释了这一点，但如果不是，请询问更多信息

当前代码

```
HexMapIni := TIniFile.Create(FGamePlay.MapName);  //creates ini file
eposition.x := FGameplay.TempCurrentPosition.x;  //x value to search ini for
eposition.y := FGamePlay.TempcurrentPosition.y;  //y value to search ini for
ImageYouWant := //Searchresult.bmp
Hexmap1.ImageAHex(ImageYouWant , bsSolid, eposition);  //place image on map 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:50:58.803

```
function GetBitmap(Ini: TCustomIniFile; X, Y: Integer): String;
begin
  Result := Ini.ReadString('Images', Format('image%d%d', [X, Y]), '');
end; 
```

# twitter - 对 twitter 雪花 IdWorker 中位移位的思考

> ID：11287090
> 
> 赞同：2
> 
> 时间：2012-07-02T01:58:47.643
> 
> 标签：twitter, bit, shift

谁能解释它是 twitter 雪花的核心的代码。

```
long nextId = ((timestamp - twepoch) << this.timestampLeftShift)
            | (this.workerId << this.workerIdShift) | (this.sequence); 
```

我想知道算法的思想，为什么要实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T02:02:42.913

Twitter 的雪花服务在分布式环境中创建唯一的 ID。许多工作进程可以各自分配唯一的 id。id 由三个部分组成：时间、worker id 和序列号。您显示的代码行简单地移动了这三个组件，以便它们不会在 64 位结果中重叠，或者将它们组合在一起以创建单个 64 位结果。

# cakephp - “系统”httpd.conf 文件在哪里？

> ID：11287093
> 
> 赞同：0
> 
> 时间：2012-07-02T01:58:57.830
> 
> 标签：cakephp, cakephp-2.0, wamp

为什么一定有错误-_-'

我在哪里可以找到“系统 httpd.conf”。我研究并试图找到他们在本教程中谈论的 httpd.conf 文件来解决我的 CakePHP 启动问题。( [http://i.imgur.com/i1HEY.png](http://i.imgur.com/i1HEY.png) ) 问题是**“您的服务器上未正确配置 URL 重写”。**

该文件不在 wamp 中（其中还包含 cakePHP ） [http://i.imgur.com/7fPuX.png](http://i.imgur.com/7fPuX.png)

它在哪里？我想为这次采访制作这个“收银员网络工具”，因为他们想看看我是否能足够快地拿起蛋糕。由于所有这些挂断，我从未真正与 Cake 合作过。我什至尝试在我的在线服务器上托管蛋糕。那也失败了 [http://y.k8r.us](http://y.k8r.us) 这是一团糟。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:16:57.407

在我看来，您在“\wamp\bin\apache\apache2.2.22\conf\httpd.conf”*中找到了它。*我确信自述文件中有更多信息，但“系统”httpd.conf 似乎是默认设置，可以通过在特定目录中放置适用于该目录的新 httpd.conf 来覆盖特定目录。

我不是这个话题的专家，但你似乎把这些词看得太字面意思了。

# python - python正则表达式，错误的结果

> ID：11287095
> 
> 赞同：0
> 
> 时间：2012-07-02T02:00:07.547
> 
> 标签：python, regex

我是 python 和正则表达式的新手。我目前正在尝试制作一个程序来读取下面文件的内容并获取部分中的特定参数和 max_speeds。在每个 SECTION:# 下，参数都缩进（TAB）直到下一个 SECTION:#

```
[SECTION:3]
      paramter = 3
      state = AZ
      car = toyota
      max_speed = 90.000
      any_pets = yes
[SECTION:13]
      paramter = 10
      state = NY
      car = honda
      max_speed = 120.000
      any_pets = yes
[SECTION:85]
      paramter = 31
      state = TX
      car = kia
      max_speed = 30.000
      any_pets = no 
```

这是我的代码：

```
import re
file = open('file.txt').readlines()
file_str = str(file)

for lines in file_str:
     myreg = re.compile(r'(?<=SECTION:13).+(max_speed\s\=\s\w+)')
     myreg1 = myreg.search(lines)
     print myreg1.group(1) 
```

问题是结果总是错误的……就好像正则表达式总是匹配上一节的结果。

请让我知道我做错了什么以及最好的方法是什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T02:04:20.183

你有很多问题。首先，读取文件中的行，如下所示：

```
with open('file.txt') as f:
    for line in f:
        # process each line. 
```

您阅读行的方式，您创建一个列表`readlines`，然后使用 将其设为字符串`str`，这将为您提供类似 的数据`"['line1\n', 'line2\n']"`。然后遍历该字符串将依次为您提供每个字符。

但是您可能根本不需要自己阅读文件。内置模块[`ConfigParser`](http://docs.python.org/library/configparser.html)会直接为你解析这些文件，看一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:04:44.307

要在使用 ConfigParser 模块时处理部分下的缩进，只需使用以下代码：

```
from ConfigParser import ConfigParser

class fp():
    def __init__(self, filename):
        self.fileobj = open(filename)

    def readline(self):
        return self.fileobj.readline().lstrip()

f = fp('e:/file.txt')
config = ConfigParser()
config.readfp(f)
print config.get('SECTION:3', 'state') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T02:55:52.527

你应该试试这样的：（我没有运行并测试代码，让它自己运行）

```
import re    
pattern = '(?<=SECTION:13).+(max_speed\s\=\s\w+)'
mattches = re.findall(pattern, '\n'.join(open('file.txt').readlines()))
print mattches 
```

# php - 如何按字母顺序点击？

> ID：11287098
> 
> 赞同：0
> 
> 时间：2012-07-02T02:00:27.563
> 
> 标签：php, svg, alphabetical

我是编码新手，所以我想问一下如何制作下面的代码，鱼只能按字母顺序单击，这意味着只有鱼“A”可以先单击，同时单击其他不是“A”的鱼，点击后不会消失吗？有没有办法做到这一点？

```
<?xml version='1.0' standalone='no'?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
   "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<svg width='100%' height='100%' xmlns='http://www.w3.org/2000/svg' onload='Init(evt)'>
   <title>Fish Game</title>
   <script type='text/ecmascript'><![CDATA[
      var SVGDocument = null;
      var SVGRoot = null;

      function Init(evt)
      {
         SVGDocument = evt.target.ownerDocument;
         SVGRoot = SVGDocument.documentElement;
      }

      function ToggleOpacity(evt, targetId)
      {
         var newTarget = evt.target;

         if (targetId)
         {
            newTarget = SVGDocument.getElementById(targetId);
         }

         var newValue = newTarget.getAttributeNS(null, 'opacity')

         if ('0' != newValue)
         {
            newValue = '0';
         }
         else
         {
            newValue = '1';
         }

         newTarget.setAttributeNS(null, 'opacity', newValue);

         if (targetId)
         {
            SVGDocument.getElementById(targetId + 'Exception').setAttributeNS(null, 'opacity', '1');
         }
      }
   ]]></script>

 <?php 
    mysql_connect("localhost", "root", "") or die(mysql_error()); 
    mysql_select_db("db") or die(mysql_error()); 
    static $data;
    $data = mysql_query("SELECT * FROM alphabet;") 
    or die(mysql_error()); 

    while($info = mysql_fetch_array( $data )) { 
 ?> 
 <text x="20" y="20"  style="font-family:Times,serif;fill:#B40404;font-size:20px">please find the letter:</text>

//fish body
<g id='<?php print $info['ID']; ?>' onclick='ToggleOpacity(evt, "<?php print $info['ID']; ?>")'>
 <circle cx="<?php print $info['body_cx']; ?>"cy="<?php print $info['body_cy']; ?>" r="<?php print $info['body_r']; ?>" stroke="black" stroke-width="1" fill="<?php print $info['body_fill']; ?>" />

//tail
<path d="<?php print $info['tail']; ?>" fill="<?php print $info['tail_fill']; ?>" stroke="<?php print $info['tail_stroke']; ?>" stroke-width="1" />

//eye
<circle cx="<?php print $info['eye_cx']; ?>" cy="<?php print $info['eye_cy']; ?>" r="<?php print $info['eye_r']; ?>" stroke="black" stroke-width="1" fill="<?php print $info['eye_fill' ];?>" />
<circle cx="<?php print $info['pupil_cx']; ?>" cy="<?php print $info['pupil_cy']; ?>" r="<?php print $info['pupil_r']; ?>" stroke="black" stroke-width="1  " />

//'A'
    <text x="<?php print $info['al_x']; ?>" y="<?php print $info['al_y']; ?>" style="font-family:Times,serif;fill:#B40404;font-size:<?php print $info['size']; ?>"><?php print $info['Alphabet']; ?></text>

    <animateMotion
        from="<?php print $info['from']; ?>" to="<?php print $info['to']; ?>"
        dur="<?php print $info['duration']; ?>"   repeatCount="indefinite" />
   </g>
  <?php   
    }  
 ?>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:19:36.267

```
SELECT * 
FROM  `alphabet` 
ORDER BY  `Alphabet` ASC 
```

# objective-c - 在自定义 NSView 中创建 NSLider 更改数据

> ID：11287099
> 
> 赞同：0
> 
> 时间：2012-07-02T02:00:39.463
> 
> 标签：objective-c, macos, cocoa, delegates

我有一个简单的 OSX 应用程序，它由一个 NSWindow 和一个自定义 NSView（用于绘图）和一个 NSSlider 组成。当我更改 NSslider 的值时，我需要更新自定义 NSView 中的数据。解决这个问题的正确方法是什么？代表？还有什么？请协助我处理这件事。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:59:28.367

将 NSSlider 的操作设置为控制器对象中的 IBAction。更改滑块时，将调用您的操作方法。然后，在该方法中，更新您的模型并刷新您的视图。如果您仍然不明白，请务必提及您尝试过的内容和无效的内容。

# css - 定位表中的特定列

> ID：11287101
> 
> 赞同：9
> 
> 时间：2012-07-02T02:00:49.903
> 
> 标签：css, css-tables

我有一个`players`5 列 40 行的类表。我想让第二列有`width: 200px`.

我不知道如何选择表中的特定列。到目前为止，我已将其范围缩小到这一点，但这适用于表中的所有行。有人可以帮我设置特定列的列宽吗？

```
table.players td 
{

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-02T02:09:15.957

这应该有效（IE8 及以下版本除外）：

```
table.players td:nth-child(2) { width: 200px; } 
```

# orchardcms - 规则 - 使用自定义表单字段值发送电子邮件

> ID：11287105
> 
> 赞同：0
> 
> 时间：2012-07-02T02:01:38.887
> 
> 标签：orchardcms

我正在使用果园 1.4.2。我已经安装了自定义表单模块。创建了一个自定义表单，其中包含一些枚举字段和输入字段。

现在，我想创建一个规则以在提交表单时发送一个 emil。表单应该有用户插入/选择的值。

我可以使用 获取输入字段值`Request.Form:TestForm.Firstname.Value`，但似乎无法获取枚举字段（下拉）选定值。尝试了各种选项，但没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:04:05.847

在 1.5 中，您可以执行 Content.Fields.TestForm.FirstName.Value。在 1.4.2 中，您可能无法通过这种方式访问​​所有字段属性。同时，您必须编写自己的令牌。

# ssrs-2008 - SSRS 是否有缓存

> ID：11287111
> 
> 赞同：1
> 
> 时间：2012-07-02T02:03:21.683
> 
> 标签：ssrs-2008, reporting-services

渲染时我不信任 SSRS。我觉得它有时会缓存，结果没有更新。当我不确定时，是否需要担心一些缓存以强制清除？

我注意到如果我在更改 proc 后立即运行 ssrs 报告，然后在几分钟后运行它，我会得到不同的结果。这几乎就像从我更改 proc 到最终导致 ssrs 显示 proc 更改的新数据时存在延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T03:48:20.667

It definitley has, but I think you need to configure the caching explicitly (Report Manager, report properties, Processing Options). See the [Caching Reports](http://msdn.microsoft.com/en-us/library/ms155927.aspx) section on MSDN. There might be some other caching options used internally when exporting a report, but this is not your case.

Maybe the browser is caching data as well. Try deleting the browser cache and re-run the report.

# c# - Silverlight 中的 UI 初始化缓慢

> ID：11287112
> 
> 赞同：0
> 
> 时间：2012-07-02T02:03:29.017
> 
> 标签：c#, silverlight, silverlight-4.0

我有一个大型 Silverlight 应用程序，它分为“选项卡”，每个选项卡都进一步分为子选项卡。xap文件下载时间不会太长，第一屏就是登录。然而，登录后，应用程序的 RootVisual 设置为我的“mainPage”，其中包含我所有的主选项卡。由于其中每一个都包含子选项卡，并且每个子选项卡都包含我的图形用户控件，因此基本上我的应用程序的每个 ui 组件都是在加载主页时加载的。因此，当我的主页加载我的应用程序的所有用户控件时，登录“冻结”了大约 30 秒。将其拆分的最佳方法是什么，以便在初始化时不加载整个应用程序的 ui？我在想在实际单击它的父选项卡之前不要调用每个控件 InitializeComponent() ？或者不加载主选项卡的“

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:20:32.540

When you use the tabcontrol Silverlight itself takes care of these things. It doesn't render the control until TabItem is selected. Make sure you haven't written anycode inside the constructor of any control. All codes should go on Loaded event of any cotrol whether it is usercontrol/custom control Hence you will be able to imporve the performance of your application.

Let me know if you still have the same issue.

Cheers! Vinod

# c++ - C ++将基本语义重构为Objective类

> ID：11287113
> 
> 赞同：-1
> 
> 时间：2012-07-02T02:03:44.460
> 
> 标签：c++, oop, class, refactoring

我有一个简单的程序，可以计算四种不同工人类型的工资。它是按语义编写的，但我想重构它，这样我就可以让每个工作类型都成为它自己的类。

程序的主要控制在switch语句中。我想做的是为每种工作类型创建一个类，然后使用适当的 setter 和 getter 执行正确的计算。

工资单.cpp

```
#include <iostream>
#include <iomanip>
using namespace std;

// Function Prototype
void userPrompt (void);

int main ()
{
// declare paycode and salary
int paycode; 
double salary;

// run user prompt function, input paycode
userPrompt ();
cin >> paycode;

while( paycode != -1 ) {

    //switch statement to handle user input
    switch( paycode ) {

        case 1: // manager
            cout << "Manager Selected." << endl;
            cout << "Enter Weekly Salary: ";
            // calculate manager's salary
            cin >> salary;
            cout << "Manager's pay is $" << std::fixed << setprecision( 2 ) << salary << "\n" << endl;
            break;

        case 2: // hourly worker
            double wage;
            int hours;
            cout << "Hourly worker Selected." << endl;
            cout << "Enter the hourly salary: ";
            cin >> wage;
            cout << "Enter the total hours worked: ";
            cin >> hours;
            // calculate hourly worker's pay
            // with respect to possible overtime
            if ( hours <= 40 )
                salary = hours * wage;
            else
                salary = 40.0 * wage + ( hours - 40 ) * wage * 1.5;
            cout << "Hourly worker's pay is $" << std::fixed << setprecision( 2 ) << salary << "\n" << endl;
            break;

        case 3: // commission worker
            int sales;
            cout << "Commission Worker Selected." << endl;
            cout << "Enter gross weekly sales: ";
            cin >> sales;
            // calculate commission worker's pay
            salary = sales * 0.092 + 250;
            cout << "Commission worker's pay is $" << std::fixed <<  setprecision( 2 ) << salary << "\n" << endl;
            break;

        case 4: // widget worker
            int widgets, wagePerWidget;
            cout << "Widget Worker Selected." << endl;
            cout << "Enter number of pieces: ";
            cin >> widgets;
            cout << "Enter wage per piece: ";
            cin >> wagePerWidget;
            // calculate widget worker's pay
            salary = widgets * wagePerWidget;
            cout << "Widget Worker's pay is $" << std::fixed <<  setprecision( 2 ) << salary << "\n" << endl;
            break;
    }

    // prompt user to input paycode again or exit
    cout<< "Enter paycode (-1 to end): ";
    cin >> paycode;
}

exit (0);
}

// userPrompt function declaration
void userPrompt (void)
{
// prompt user to input paycode
cout << "Enter paycode (-1 to end): ";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:20:52.327

如果您需要学习 OOP 的基础知识，请查看一些 c++ 类设计教程。如果你能在一些研究后回答你自己的问题，你会学到更多。

*   [http://www.tenouk.com/cplusplustutorial.html](http://www.tenouk.com/cplusplustutorial.html)
*   [http://www.cpp-tips.net/Simple_class_example](http://www.cpp-tips.net/Simple_class_example)
*   [MIT OCW 6.088 C/C++ 简介](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-088-introduction-to-c-memory-management-and-c-object-oriented-programming-january-iap-2010/lecture-notes/MIT6_088IAP10_lec04.pdf)
*   Youtube 也有一些很好的资源

# mysql - 有没有办法在更新 mysql 查询上定义变量？

> ID：11287114
> 
> 赞同：2
> 
> 时间：2012-07-02T02:03:45.110
> 
> 标签：mysql

我的意思是：

```
update table_name set field_1=if(date_add(data_field,interval 30 hour) >= now(),1,0), field_2=if(date_add(data_field,interval 30 hour) >= now(),1,0) where ... 
```

好吧，在这种情况下，我需要使用 date_add(data_field,interval 30 小时) 两次，有没有办法将它存储在变量或类似的东西中？那么我不需要调用它两次。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:22:30.617

这是不必要的优化，因为查询优化器将识别函数调用是确定性的，缓存一次调用它的结果并重用该结果来代替第二次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T02:11:10.633

当然：

```
set @mydate := date_add(data_field,interval 30 hour);

update table_name set
field_1=if(@mydate >= now(),1,0), 
field_2=if(@mydate >= now(),1,0)
where ... 
```

仅供参考，这些被称为[用户定义的变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)

# multithreading - 什么 4 个线程在一个空的新 VCL 表单应用程序下运行？

> ID：11287116
> 
> 赞同：6
> 
> 时间：2012-07-02T02:04:16.000
> 
> 标签：multithreading, delphi, delphi-xe2, vcl

> **可能重复：**
> [默认 VCL 应用程序中的其他线程是什么，它们可以按目的命名吗？](https://stackoverflow.com/questions/9365947/what-are-the-other-threads-in-a-default-vcl-application-and-can-they-be-named-b)

在 Delphi XE2（32 位）中运行一个新的空 VCL Forms 应用程序时，我看到这个应用程序的任务管理器中有 4 个线程正在运行。显然任何应用程序都需要至少 1 个线程，但在这种情况下，其他 3 个线程是什么？我想更好地了解任何 VCL 表单应用程序默认运行的线程。我想可能是因为我在 RAD Studio 的调试模式下运行，所以我自己启动了 EXE，它也有 4 个线程在运行。我还尝试在“发布”配置下编译（从而禁用编译调试信息）并且仍然有 4 个线程。

![在此处输入图像描述](../Images/e344a138b36dea23a99d99f97eb8dcb2.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T04:51:41.833

要确定线程的来源，您可以使用[process explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)或[process hacker](http://processhacker.sourceforge.net/)等工具检查线程的起始地址。

![在此处输入图像描述](../Images/28b81fc9ba4cbb0d019f23560d5fce42.png)

例如，在这种情况下，您可以看到

*   ntdll.dll!TpCallbackIndependent+0x???? 它是 Windows 线程池 API 的一部分。
*   ntdll.dll!RtlMoveMemory+0x???? 是对[RtlMoveMemory](http://msdn.microsoft.com/en-us/library/windows/hardware/ff562030%28v=vs.85%29.aspx) WinAPi 函数的调用。
*   项目???.exe+0x????? 应用程序的主线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T06:35:41.937

在我的计算机上创建了除主线程之外的所有其他线程，因为应用程序的窗口已注册以使用 Wtsapi32.WTSRegisterSessionNotification API 接收会话更改通知。您可以在 Vcl.Forms -> TApplication.CreateHandle 过程中看到实现。当您通过终端服务/远程桌面登录时，它必须与应用程序的工作方式/外观有关。可能存在其他一些线程，因为其他一些程序/s 将代码加载到您的可执行文件中。

# java - Java：FTP服务器列表的正则表达式？

> ID：11287129
> 
> 赞同：0
> 
> 时间：2012-07-02T02:07:01.137
> 
> 标签：java, ftp, ftp-client, ftp-server

我正在用 Java 编写 FTP 客户端处理程序，但不能使用 Apache 之类的 FTP 库。

我的问题是我以这种格式从服务器收到列表：

```
drw-rw-rw- 1 ftp ftp                0 Mar 17 06:10 Tor Browser
-rw-rw-rw- 1 ftp ftp          1538814 Jun 26 00:23 setup.exe
-rw-rw-rw- 1 ftp ftp           142570 May 24 05:28 satellite A665-S6086.pdf 
```

虽然我只需要文件/目录名称和大小。

请建议我一种将列表减少到名称和大小的方法，请记住列之间的间距差异和文件名中的间距。

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:17:54.287

由于您只想获取数据，因此可以使用此正则表达式：

```
"(?m)^.{20}\\s*(\\d+).{14}(.*)$" 
```

并构造 a `Pattern`，并获得`Matcher`与输入字符串对应的 a 并开始提取匹配项。大小可以在 中获取，`group(1)`文件名可以在 中获取`group(2)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:48:52.937

利用

```
 Pattern sizeAndNamePattern = Pattern.compile(
            "^-.*?(\\d+) \\w{3} \\d{2} \\d{2}:\\d{2} (.*)$", Pattern.MULTILINE);

    for (Matcher matcher = sizeAndNamePattern.matcher(dirListing); matcher.find();) {
        System.out.println(matcher.group(1) + " " + matcher.group(2));
    } 
```

如果您还想查看目录，请删除模式中的第一个“-”。如果性能是一个问题，您应该考虑一种更具选择性的模式来避免 .*? 一开始。

# java - Elasticsearch：附件类型为空时的索引对象

> ID：11287134
> 
> 赞同：1
> 
> 时间：2012-07-02T02:08:02.627
> 
> 标签：java, ruby-on-rails, null, elasticsearch, tire

我正在尝试使用 Elasticsearch & Tire gem 索引一堆文档。除了记录不完整且没有引用的极少数情况外，索引工作得很好`filename`。在这些情况下，记录中的*任何内容都不会*被索引，并且 Elasticsearch 会抛出一个`NullPointerException`.

我不了解 Java，但想知道是否有办法将*某些*内容传递给 Attachment Type 插件，以便 Elasticsearch 成功索引其余记录并绕过`:type => 'attachment'`where`attachment`返回`null`？

尝试过`"attachment" : {"type" : "attachment", "null_value" : "missing_file"}`（或用轮胎的说法：）`indexes :attachment, :type => 'attachment', :null_value => "missing_file"`但这似乎没有任何区别。

```
#app/models/article.rb
class Article < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  attr_accessible :title, :content, :published_on, :filename

  mapping do
    indexes :id, :type =>'integer'
    indexes :title
    indexes :content
    indexes :published_on, :type => 'date'
    indexes :attachment, :type => 'attachment', :null_value => 'missing_file'  # <== no worky
  end

  def to_indexed_json
    to_json(:methods => [:attachment])
  end

  def attachment
    if filename.present?
       path_to_pdf = "/Volumes/HardDisk/sample_pdfs/#{filename}.pdf"
       Base64.encode64(open(path_to_pdf) { |pdf| pdf.read })
    end
  end
end

#Elasticsearch log:
[2012-06-29 09:01:15,515][DEBUG][action.bulk              ] [Skunge the Laxidazian Troll] [articles][4] failed to execute bulk item (index) index {[articles][article][10], source[{"content":"this title is fluff","created_at":"2012-06-27T22:02:43Z","filename":null,"id":10,"published_on":"2012-06-27","title":"Test title","updated_at":"2012-06-27T22:02:43Z","attachment":null}]}
java.lang.NullPointerException 
```

# cuda - 推力内的结构::device_vector

> ID：11287136
> 
> 赞同：0
> 
> 时间：2012-07-02T02:08:19.133
> 
> 标签：cuda, thrust

我有一个结构

```
struct Point
{
 int x;
 int y;
float val;
} 
```

我打算使用这个结构来表示稀疏矩阵（我知道 CUSPARSE 和 CUSP，但我只是打算使用推力执行一些测试）并使用推力算法执行操作。

根据我在 CUDA 编程教程中研究的内容，始终建议使用数组结构而不是结构数组来更好地进行内存合并。

如果是这种情况，那么如果我使用上述结构在 device_vector 中存储非零（数百万级）怎么办，这个 device_vector 在处理推力算法时是否会在 GPU 内使用未对齐的内存访问？

我问这个是因为我可能需要访问这个 device_vector 内的不规则步幅并通过传递多个函数对象来执行算法操作。

它会像在数组结构上运行的自定义内核一样高效吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T06:42:55.230

假设合并的内存访问模式，NVIDIA CUDA 设备可以有效地访问 4、8 和 16 字节结构。为此，CUDA 标头定义了您可以使用的 structs `int2`、`int4`、`float2`、等。`float4`它们被定义为具有有效的对齐方式，因此我建议使用而不是您的自定义 Point 结构

```
typedef int2 Point; 
```

当对这些小结构的数组的所有内存访问都是连续的（例如合并）时，每个结构元素中的所有数据都被读/写它的线程使用，那么这种类型的 AOS 访问是非常有效的。事实上，使用像这样的向量结构通常可以导致比标量数据访问更高的内存吞吐量，因为正在运行的内存事务增加。

Thrust`zip_iterator`专门提供对 SOA 数据进行操作的便利性和（编码）效率，就好像它是 AOS 数据一样。因此，虽然小结构在直接 CUDA C++ 中是有效的，但在使用 Thrust 时，您可以选择为每个结构成员使用单独的，并使用调用前和其他推力算法`device_vector`将它们压缩在一起。Thrust 示例代码中包含了这方面的示例。`zip_iterator``transform`

# c# - 将信息传递给 ashx 页面并确定哪个图像将出现在 asp-image-control 中

> ID：11287137
> 
> 赞同：0
> 
> 时间：2012-07-02T02:08:27.300
> 
> 标签：c#, asp.net, image, handler

如何将信息传递给处理程序页面？以及如何指定将在 asp-image-control 中显示的图像？

Handler1.ashx.cs 代码：

```
public void ProcessRequest(HttpContext context)
        {
             int id1 = something //how can I pass a information to a handler page
             int id2 = somthing 2 // same case

                byte[] IMG = classP.RedImg(id1);
                context.Response.ContentType = "image/jpg";
                context.Response.BinaryWrite(IMG);

                byte[] IMG2 = classP.RedImg(id2);
                context.Response.ContentType = "image/jpg";
                context.Response.BinaryWrite(IMG2);
        }
        public bool IsReusable
        {
            get
            {
                return false;
            }
        } 
```

页面.aspx 代码：

```
<asp:Image ID="Image1" runat="server" />
<asp:Image ID="Image2" runat="server" /> 
```

Page.aspx.cs 后面的代码：

```
string[] data = classC.ReadClient();
int id1 = Convert.ToInt32(data[0]); //Here is id1 value
int id2 = Convert.ToInt32(data[1]); //Here is id2 value

Image1.ImageUrl = "~/Handler1.ashx?ID=" + id1.ToString();
Image2.ImageUrl = "~/Handler1.ashx?ID=" + id2.ToString(); 
```

谢谢 ：]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:20:11.610

两件事情：

1.  每个请求都会调用一次处理程序。所以像这样返回两个图像是行不通的。
2.  在`ProcessRequest`中，您需要`context.Request.QueryString["ID"]`获取要在代码隐藏中添加的 ID 查询字符串参数。

您必须调用`int.Parse`或调用`int.TryParse`该值，因为`RedImg`似乎需要一个 int。最好的做法是首先从查询字符串中获取值，使用 进行检查，`string.IsNullOrEmpty`如果是，则尽早退出。然后`int.TryParse`在值上使用，然后也跳出返回false。您可能还应该设置`context.Response.StatusCode`为 404 或类似的东西，以使其更“正确”HTTP。

# javascript - 监控 Google 电子表格单元格值并撤消不需要的更改

> ID：11287139
> 
> 赞同：2
> 
> 时间：2012-07-02T02:09:01.490
> 
> 标签：javascript, google-apps-script, google-api, dom-events

这似乎是一个非常愚蠢的问题，但我希望不是。我是一名护士而不是程序员，所以有很多我（还）不明白。

Google 电子表格的右下角有一个区域，该区域似乎存储选定单元格的原始值，直到用户点击 Enter 或单击单元格外。我假设它用于评估单元格是否已被用户编辑。

是否可以在编辑之前访问该数据以记录单元格的值？如果是这样……怎么办？

我不知道该区域的正确名称，但如果我右键单击它并选择“检查元素”，则会突出显示：

```
<div class="waffle-formula-container" style dir="ltr">L</div> 
```

我选择的单元格包含字母“L”，所以我可以找出最后一点，但什么是华夫饼干容器？谷歌搜索这句话返回了很多关于保持华夫饼新鲜但没有太多其他用途的建议。

我已经为相关的问题[200](http://code.google.com/p/google-apps-script-issues/issues/detail?can=2&q=200&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner&id=200)和[1200 加注](http://code.google.com/p/google-apps-script-issues/issues/detail?can=2&q=1200&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner&id=1200)了星标，但现在已经几个月了，似乎没有新的发展，所以我试图跳出框框思考。

我什至不知道要应用哪些标签，所以我欢迎单独提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:46:24.253

好吧，除了主演第 200 期之外，您无能为力。但是，有一种解决方法，前面已经讨论过

使用 onOpen 调用将电子表格的副本存储在数组中。因此，在每个 onEdit 上，您都可以访问旧值和新值。在您的 onEdit 中，将数组与电子表格中的数据同步回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:49:29.480

我不知道你想如何访问这个“以前的状态”，但如果你需要“手动”查看它，这个功能已经内置到带有修订历史的电子表格应用程序中。这是一个非常强大的功能，虽然无法通过脚本访问：每个更改都会突出显示，您甚至可以看到是谁进行了更改 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:12:50.267

从您对其他答案的评论来看，您似乎正在尝试模拟每行权限。鉴于当前的限制，最好寻找替代解决方案，例如使用接受和存储数据的 Google Apps 脚本构建 Web 应用程序。这将使您完全控制访问权限等。

# c# - 安装 c# 组件后，Visual Studio 无法打开 vcxproj

> ID：11287145
> 
> 赞同：0
> 
> 时间：2012-07-02T02:10:32.330
> 
> 标签：c#, c++, c, visual-studio-2010

我很高兴将 VS2010 Premium 版本用于 C/C++ 编码项目，并且需要添加 C# 组件（对此进行了冗长的、不相关的解释）。当我尝试返回并打开现有的 C/C++ 解决方案时，收到以下 VS2010 错误：无法打开 projectName.vcxproj，因为“此版本的应用程序不支持它。” 有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:44:42.330

我回去修复/重新安装 VS2010，发现错误：当我添加 C# 组件时，我不想重新下载所有已安装的其他组件。但是，如果不选中这些项目，显然它们已被卸载，或者至少无法访问。也有可能这些组件仍然存在，并且存在将它们重新打开的开关，但如果是这样的话，我就没有想到。

# asp.net - ASP.NET 使用 FileStream (FileMode.Open) 读取 xml -> System.UnauthorizedAccessException

> ID：11287148
> 
> 赞同：2
> 
> 时间：2012-07-02T02:11:15.173
> 
> 标签：asp.net, permissions, filestream, file-permissions

我有一个从 xml 配置文件中读取设置的网站（我使用的是 .config 扩展名）。我像这样打开文件：

```
XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

using (Stream fs = new FileStream(filename, FileMode.Open))
{
     configSettings = xmlSerializer.Deserialize(fs) as MyConfigSettings;
} 
```

我只需要对该文件的读取权限，但由于某种原因，除非我授予该文件的写入权限，否则我会收到 System.UnauthorizedAccessException。这是我不想做的事情，它只需要代码读取文件。

为什么会发生这种情况，我应该改变什么来阻止这种情况发生？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T17:11:23.327

您正在使用的 FileStream 构造函数以读取和写入权限打开文件。[请参阅文档](http://msdn.microsoft.com/en-us/library/47ek66wy.aspx)的备注部分：

> 对于没有 FileAccess 参数的构造函数，如果 mode 参数设置为 Append，则 Write 是默认访问。否则，访问权限设置为 ReadWrite。

您需要使用带有 FileAccess.Read 作为第三个参数的[三参数构造函数。](http://msdn.microsoft.com/en-us/library/tyhc0kft.aspx)

像这样：

```
using (Stream fs = new FileStream(filename, FileMode.Open, FileAccess.Read)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:58:01.907

我改用 StreamReader 解决了这个问题：

```
XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

using (StreamReader reader = new StreamReader(filename))
{
   configSettings= (MyConfigSettings)xmlSerializer.Deserialize(reader);
} 
```

# html - CSS使文本左对齐并同时对齐

> ID：11287150
> 
> 赞同：6
> 
> 时间：2012-07-02T02:12:29.943
> 
> 标签：html, css, text, text-align

有没有办法让文本左对齐并同时证明？意思是左对齐。有什么办法可以做到这一点？感谢帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-04-06T11:57:28.120

您可能正在寻找最后一行的左对齐：

```
 text-align: justify;
  text-align-last: left; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-02T02:25:34.143

左对齐意味着文本的左边缘对齐。对齐文本意味着文本的左边缘和右边缘都对齐。所以“左对齐和对齐”与“对齐”没有什么不同，所以你的问题对我们没有任何意义。

左对齐：

```
Four-score and seven years ago, our fathers 
brought forth on this continent a new nation, 
conceived in liberty, and dedicated to the 
proposition that all men are created equal. 
```

有理：

```
Four-score  and  seven years  ago, our fathers 
brought forth on this continent a  new nation, 
conceived  in  liberty, and  dedicated to  the 
proposition that all men are created equal. 
```

右对齐：

```
 Four-score and seven years ago, our fathers 
brought forth on this continent a new nation, 
   conceived in liberty, and dedicated to the 
  proposition that all men are created equal. 
```

也许您正在尝试实现其他类型的对齐？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-03T03:45:36.773

两端对齐意味着文本在两边对齐。但是，文本的最后一行仍将位于左侧或右侧。

所以...

**左对齐**

```
Lorem Ipsum is simply dummy text of the printing and       |
typesetting industry. Lorem Ipsum has been the industry's  |
standard dummy text ever since the 1500s, when an unknown  |
printer took a galley of type and scrambled it to make a   |
type specimen book.                                        | 
```

**左对齐**

```
 |
Lorem  Ipsum  is  simply  dummy  text  of  the printing  and 
typesetting  industry. Lorem  Ipsum has been  the industry's 
standard dummy  text ever since  the 1500s, when  an unknown 
printer took  a galley of type  and scrambled  it to make  a 
type specimen book.                                        |
                                                           | 
```

**右对齐**

```
 |
Lorem  Ipsum  is  simply  dummy  text  of  the printing  and 
typesetting  industry. Lorem  Ipsum has been  the industry's 
standard dummy  text ever since  the 1500s, when  an unknown 
printer took  a galley of type  and scrambled  it to make  a 
                                         type specimen book.
                                                           | 
```

我过去没有用过这个，所以我不能 100% 确定你想要的这种特殊行为是否被 CSS 支持。不过，我认为 W3Schools 的这个链接会有所帮助： http: [//www.w3schools.com/cssref/css3_pr_text-justify.asp](http://www.w3schools.com/cssref/css3_pr_text-justify.asp)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T02:15:35.743

两端对齐的文本总是“左右两端对齐”。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-08T23:58:11.850

这是一个图像，它同时具有左对齐（左上）和对齐（右上）的文本。

[![在此处输入图像描述](../Images/1265cda15fb08464acb7a2305360f32d.png)](https://i.stack.imgur.com/6dvSo.jpg)

要获得您将`text-align: justify;`在 css 中使用的左对齐文本。

在最新版本的 Chrome 和 IE 中，您会得到对齐的文本，最后一行使用该 css 左对齐。我不确定旧版浏览器如何处理它。

您在 Photoshop 中获得 4 种类型的对齐文本，完全对齐或最后一行左对齐、居中或右对齐，但浏览器似乎只支持左对齐。对于从右到左的语言，它们可能具有右对齐文本。

# c# - 我是否正确使用缓存？

> ID：11287156
> 
> 赞同：1
> 
> 时间：2012-07-02T02:14:02.577
> 
> 标签：c#, asp.net, asp.net-mvc, performance

我有一个应用程序，其中每个页面都使用一组存储在数据库中的数据。为了避免每次需要数据时都调用数据库，我决定将其放入`HttpRuntime.Cache`. 我正在调用数据库并将数据缓存在我的 Controller.cs 文件的构造函数中，这是唯一使用此数据的地方。

上述方法有效，但我想知道这是否是加载缓存的正确位置/方式？

此外，每个用户的数据都是相同的，并且每年可能会更改几次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:31:23.803

缓存数据和使用缓存数据是两个不同的问题。假设你有这个接口来获取数据：

```
public interface IDataRepository 
{
    List<Data> GetData();
} 
```

您可以有两种实现，一种从数据库中获取数据，另一种只是充当代理并在必要时缓存数据：

```
public class DataRepository : IDataRepository
{
    public virtual List<Data> GetData()
    {
        //Hit the database and get the data
    }
}

public class CachedDataRepository : DataRepository, IDataRepository
{
    public override List<Data> GetData()
    {
        if(!IsCachedAlready())
        {
            var data = base.GetData();
            AddToCache(data);
        }

        return DataFromCache();
    }
} 
```

You can now use the same interface and not worry if the data that you're use in the controller is cached or not.

# java - 从 Java 中的 MongoDB 读取整数字段时出现长类型转换错误

> ID：11287158
> 
> 赞同：9
> 
> 时间：2012-07-02T02:15:05.100
> 
> 标签：java, mongodb, casting, long-integer

我正在从 Java 访问一个从 Rails 应用程序写入的 MongoDB 实例。我正在检索应该存储在 Long 中的整数值，因为它们可以超过 32 位。

此代码将编译：

```
this.profile_uid  = (Long)this.profile.get("uid"); 
```

但是，我收到类型转换运行时错误：

```
Exception in thread "main" java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long 
```

这可能是因为该字段由 Mongo 作为整数返回，但我知道某些 ID 可以作为 Longs 出现，并且由于各种原因，我无法更改写入数据库的类型（从另一个应用程序）；在某些情况下它可能是 32 位，在其他情况下可能是 64 位。

Java 应用程序需要处理任何一个，我不想遇到某种截断或溢出问题。我想在 Java 方面将其作为 Long 来阅读。

我已经尝试了下面的解决方法，它似乎可以运行，但我不知道我是否可以通过这种方式避免截断或溢出问题。我不确定`Number`Java中的类是做什么的。

```
this.profile_uid  = ((Number)this.profile.get("uid")).longValue(); 
```

这是合法的吗？它有什么副作用？还有其他/更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T05:53:31.790

您建议的解决方法是合法的。`Number`是Java中所有数字类的超类。如果您的`"uid"`字段是数字格式，`this.profile.get("uid"))`则将返回一个对象，该对象是某个子类`Number`（因此强制转换`Number`将始终有效）。

的所有具体子类都`Number`必须实现该`longValue()`方法，因为它被定义为`Number`类中的抽象方法。

`Integer.longValue()`将其内部 int 值转换为 long。 `Long.longValue()`只需返回其内部 long 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-14T15:45:41.347

有时不可能知道一个值是否是 Long 的整数。我编写了这个类来轻松检索 Long 值。

```
public class MongoDbHelper {
    public static Long getLongValue(Document doc, String key, Long defaultVal) {
        Object obj = doc.get(key);
        if (obj == null) {
            return defaultVal;
        } else if (obj instanceof Integer) {
            return ((Integer) obj).longValue();
        } else if (obj instanceof Long) {
            return (Long)obj;
        } else {
            throw new ClassCastException("Could not convert " + obj.getClass() + " to Long");
        }
    }
} 
```

# java - java - 如果在java中验证不同的数字类型是正数还是零，如何避免重载方法？

> ID：11287159
> 
> 赞同：0
> 
> 时间：2012-07-02T02:15:09.120
> 
> 标签：java

```
public static boolean isNoPositive(long number) {
    return number <= 0;
}; 

public static boolean isNoPositive(float number) {
    return number <= 0;
 }; 
```

当添加每个主要类型时，我应该添加一个类似的方法：重载方法。但如果我使用基类：`Number`。没有 > 0 方法，但只有`intValue()`. `floatValue()`，ETC。

那么我能做些什么来避免超载呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:25:59.163

你可以尝试这样的事情：

```
public boolean isNotPositive(Number val) {
    return val.longValue() <= 0 && val.doubleValue() <= 0;
} 
```

~~不过，您确实必须列举所有可能性。~~ 你可以只测试一个 long 值或 double 值，因为 short 和 int 包含在 long 的范围内，而 float 则包含在 double 的范围内。可能有一个更优雅的解决方案，但对于一些测试，它并没有失败。

**编辑：**所以原来的布尔值 OR 在`0.1`通过它时失败了。我将其更改为布尔 AND，结果与应有的结果一致。由于 long 和 double 类型的符号位位于同一位置，因此它起作用。

# android - 安装 adt 20 后启动 avd 模拟器时出错

> ID：11287162
> 
> 赞同：5
> 
> 时间：2012-07-02T02:15:38.350
> 
> 标签：android, android-emulator

我最近安装了 ADT 20 和 SDK Tools r20，现在在我的项目上运行模拟器时遇到问题。我的项目针对 api 15 和最低 api 8。我尝试删除并重新创建 avds 但没有帮助。

我收到了这个错误

`X Error of failed request: BadRequest (invalid request code or no such operation) Major opcode of failed request: 154 (GLX) Minor opcode of failed request: 19 (X_GLXQueryServerString) Serial number of failed request: 12 Current serial number in output stream: 12`

有人遇到同样的问题吗？任何关于如何修复的想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T07:38:32.677

你运行的是 Ubuntu 12.04 吗？我也遇到这个问题，不能启动任何安卓版本的模拟器。

除了上面的答案，也许这也有帮助： [~~我的 ati 显卡在 ubuntu 中是否支持~~](https://askubuntu.com/questions/74171/is-my-ati-graphics-card-supported-in-ubuntu)

[安装ati催化剂视频驱动程序的正确方法是什么](https://askubuntu.com/questions/124292/what-is-the-correct-way-to-install-ati-catalyst-video-drivers/126513#126513)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:54:46.490

我不知道这是否有帮助，但你可以试试下面的链接。

[如何修复错误...](https://askubuntu.com/questions/81344/how-to-fix-error-with-ati-driver-error-of-failed-request)

# html - PDF转结构化格式

> ID：11287170
> 
> 赞同：2
> 
> 时间：2012-07-02T02:17:09.047
> 
> 标签：html, xml, pdf

我有大量的 PDF 文件，需要将其转换为可以解释的结构化格式（HTML/XML/等）

PDF 格式如下：http: [//img840.imageshack.us/img840/5407/pdfv.png](http://img840.imageshack.us/img840/5407/pdfv.png)

到目前为止，我已经尝试了很多转换为 HTML 的软件，但它们都没有分离图像的功能，它们只是像没有文本的页面的打印屏幕一样，然后将此图像用作 html 中的背景，使用css 来定位文本

像这样：http: [//img37.imageshack.us/img37/5015/examplelp.jpg](http://img37.imageshack.us/img37/5015/examplelp.jpg)

我有一堆 PDF，因此不能手动处理每个图像。有谁知道任何解决方案（甚至是付费软件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T15:17:41.997

不久前我遇到了类似的问题，最终编写了自己的解决方案。它被称为[PDFX](http://pdfx.cs.man.ac.uk/)，可以免费使用。它将 PDF 转换为结构化格式的 XML，并单独呈现 PDF 中的任何位图图像（不是矢量图形）。

示例输入/输出可以在[这里](http://pdfx.cs.man.ac.uk/example)找到。你可能想试一试。

# c++ - 如何衡量程序花费的时间

> ID：11287174
> 
> 赞同：0
> 
> 时间：2012-07-02T02:17:57.300
> 
> 标签：c++, valgrind

但是，如果我使用以下方法，我想测量我的 C++ 程序所花费的时间：

```
time_t begin, end;
time_t(&begin);
func(); //my function...it contains the code whose elapsed time I want to measure
time(&end);
cout<<"\n Time elapsed:"<<difftime(end, begin) <<" seconds"<<endl; 
```

我得到的时间是0秒。

gprof 在我的情况下也不起作用，因为它表明它无法分配我的程序所需的内存量。

是否有其他方法可以测量我的程序所需的时间量。Valgrind 的 massif 工具确实显示了快照所用的时间，但文档没有提到它是以毫秒还是微秒为单位的。

请推荐一个合适的方法？

如果我能以毫秒为单位测量时间，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:24:44.960

您可以使用如下所示的代码。

```
clock_t start = clock();     
 // Code here...
clock_t ticks = clock()-start;     
std::cout << "Time Taken:" << (double)ticks/CLOCKS_PER_SEC << "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:34:48.133

使用 std::chrono。
[http://en.cppreference.com/w/cpp/chrono/duration](http://en.cppreference.com/w/cpp/chrono/duration)

您可能还想查看 facebook 的基准测试实用程序。
[https://github.com/facebook/folly/blob/master/folly/docs/Benchmark.md](https://github.com/facebook/folly/blob/master/folly/docs/Benchmark.md)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T03:15:43.100

一种可能性是自己生成程序（`CreateProcess`在 Windows 上，`fork`在类 Unix 系统上）。然后，等待孩子退出（`WaitForSingleObject`在 Windows 上，`waitpid`在 Unix 上）。最后，获取子进程的时间（`GetProcessTimes`在 Windows 上，`times`在 Unix 上）。

这将以毫秒为单位给出时间，并将墙时间与 CPU 时间分开。当/如果您同时在同一系统上运行其他东西时，后者特别方便（您仍然可以通过静止系统获得更好的准确性，但可以保持合理的接近）。

# java - 一个方法参数变化的通用方法和方法体

> ID：11287175
> 
> 赞同：0
> 
> 时间：2012-07-02T02:18:00.377
> 
> 标签：java

我们有一个常用的方法如下：

```
public class CommomClass()
{
    public String[] commonMethod(Object1 inputObject1)
    {
        String[] output;

        output[0] = (inputObject1.getValue1());
        output[1] = (inputObject1.getValue2());

        return output;
    }
} 
```

通过将方法参数更改为 ，可以在其他类中使用相同的方法`Object2 inputObject2`。我们如何在没有冗余代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T02:23:50.257

这些类`Object1`可以`Object2`实现一个接口：

```
public interface HasValues {

    public String getValue1();
    public String getValue2();
} 
```

并且可以重新定义您的常用方法以获取该接口的实例：

```
public String[] commonMethod(HasValues hasValues) {

    String[] output = new String[2];

    output[0] = hasValues.getValue1();
    output[1] = hasValues.getValue2();

    return output;
} 
```

# php - 如何检测设备以显示手机型号？

> ID：11287177
> 
> 赞同：5
> 
> 时间：2012-07-02T02:18:22.320
> 
> 标签：php

在网站中，如何`detect device => model name of mobile`使用手机？如何构思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:39:30.150

利用： `$_SERVER['HTTP_USER_AGENT'];`

[您可以在此处](http://php.net/manual/en/reserved.variables.server.php)阅读有关 $_SERVER 调用的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T02:48:22.203

尽管您可以直接使用该`$_SERVER`变量，但有一个名为的小型 PHP 库[`Mobile_Detect.php`](http://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect)可以使您的文件非常干净。

无论如何，我认为它通过`$_SERVER`变量运行，但是调用看起来`is_iPhone()`比解析标头更好，并且可能会遗漏一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T09:35:51.930

这段代码可以帮助你做到这一点。

```
<?php

$mobile_browser = '0';

if (preg_match('/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android)/i', strtolower($_SERVER['HTTP_USER_AGENT']))) {
    $mobile_browser++;
}

if ((strpos(strtolower($_SERVER['HTTP_ACCEPT']),'application/vnd.wap.xhtml+xml') > 0) or ((isset($_SERVER['HTTP_X_WAP_PROFILE']) or isset($_SERVER['HTTP_PROFILE'])))) {
    $mobile_browser++;
}    

$mobile_ua = strtolower(substr($_SERVER['HTTP_USER_AGENT'], 0, 4));
$mobile_agents = array(
    'w3c ','acs-','alav','alca','amoi','audi','avan','benq','bird','blac',
    'blaz','brew','cell','cldc','cmd-','dang','doco','eric','hipt','inno',
    'ipaq','java','jigs','kddi','keji','leno','lg-c','lg-d','lg-g','lge-',
    'maui','maxo','midp','mits','mmef','mobi','mot-','moto','mwbp','nec-',
    'newt','noki','oper','palm','pana','pant','phil','play','port','prox',
    'qwap','sage','sams','sany','sch-','sec-','send','seri','sgh-','shar',
    'sie-','siem','smal','smar','sony','sph-','symb','t-mo','teli','tim-',
    'tosh','tsm-','upg1','upsi','vk-v','voda','wap-','wapa','wapi','wapp',
    'wapr','webc','winw','winw','xda ','xda-');

if (in_array($mobile_ua,$mobile_agents)) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['ALL_HTTP']),'OperaMini') > 0) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']),'windows') > 0) {
    $mobile_browser = 0;
}

if ($mobile_browser > 0) {
   // do something
}
else {
   // do something else
}   

?> 
```

有关更多信息，请参见[此处](http://mobiforge.com/developing/story/lightweight-device-detection-php)

# c# - WinForm C#中的Treeview问题

> ID：11287178
> 
> 赞同：-4
> 
> 时间：2012-07-02T02:18:22.977
> 
> 标签：c#, winforms, treeview

我在数据库 ItemList 中有一个表，其中包含带有 ItemID 的 ProdutID。

```
ProductID    ItemID
  AAA         1001
  AAA         1002
  AAA         1003
  BBB         1201
  BBB         1293
  CCC         1040
  DDD         2011
  DDD         3203 
```

我想将所有这些数据添加到 Treeview 像这样：

```
+AAA
 - 1001
 - 1002
 - 1003
+BBB
 - 1201
 - 1293
+CCC
 - 1040
+DDD
 - 2011
 - 3203 
```

请教我如何做到这一点。谢谢。

编辑 ：

我尝试使用长度为 2 的数据（ProductID，ItemID）将每个项目添加到 ArrayList

```
 for(int i=0;i<arrayList.count;i++)
    {
       TreeNode treeNode = new TreeNode(((string[])arrayList[i])[0]);    
       treeview1.Nodes.Add(treeNode);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:54:53.837

```
TreeGridNode nodeParent = treeGridView1.Nodes.Add("AAA");

TreeGridNode nodeChild = nodeParent.Nodes.Add("1001"); 
TreeGridNode nodeChild = nodeParent.Nodes.Add("1002"); 
TreeGridNode nodeChild = nodeParent.Nodes.Add("1003"); 
```

您可以使用两个 for 循环动态地执行此操作

```
foreach (var product in Products)
{
  TreeGridNode nodeParent = treeGridView1.Nodes.Add(product.Id);
  foreach (var item in product.Items)
  {
   TreeGridNode nodeChild = nodeParent.Nodes.Add(item.Id); 
  }

} 
```

# php - 从 PHP 返回两个 2 json 对象

> ID：11287182
> 
> 赞同：1
> 
> 时间：2012-07-02T02:19:12.633
> 
> 标签：php, jquery, ajax, json, jquery-mobile

我有一个带有两个输入的小反馈表。我希望错误消息使用 JQuery 在同一个 div 中相互附加。如果只有一条错误消息，则错误消息可以正常工作，但是当我返回两个 json 对象时，两条消息不会同时显示。是否可以向 JQuery 返回 2 个具有相同键的关联数组？如何将错误消息附加到同一个 div？除了错误消息的显示方式外，一切正常。

注意：这个程序是一个 JQuery 移动应用程序

PHP 代码

```
if (isset($_POST['submit'])) {

    $email = $_POST['email'];
    $feedback = $_POST['feedback'];
    $errors = array();

    if (filter_var($email, FILTER_VALIDATE_EMAIL) && !empty($email)) {
                 //Do something
    } else {
        $errors = "Invalid email.";
        echo json_encode(array("error" => "{$errors}"));

    }

    if (!empty($feedback)) {
                //Do something
    } else {
        $errors = "Feeback field can not be empty.";
        echo json_encode(array("error" => "{$errors}"));
    }

    if (empty($errors)) {
        //Database Insertion here
        echo json_encode(array("success" => "Feedback submission successful."));
    }
} 
```

jQuery 代码

```
$(function() {
    $('#contact_form').bind('submit', function(event) {
        event.preventDefault();
        $.post('includes/form.php', $(this).serialize(), function(data) {
            if (data.error) {

                $('.error').slideDown(100).html(data.error);

            } else {
                $('.error').hide();
                $('.success').slideDown(100).html(data.success);
            }

        }, "json");
    });
}); 
```

HTML 表单代码

```
 <form method="post" action="<?php echo $_SERVER['PHP_SELF'] ?>" id="contact_form" data-ajax="false">
            <label for="email">Email:</label>
            <input type="text" name="email" id="email" placeholder="Email">

            <label for="feedback">Feedback:</label>
            <textarea type="text" name="feedback" id="feedback" placeholder="Feedback"></textarea>              
            <input type="submit" name="submit" value="Submit Feedback" class="submit">

        </form> 
```

先感谢您。

编辑：我觉得很傻。我忘了在 php 脚本中附加错误消息哈哈。感谢所有回答的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:32:42.990

您不能将 1 个键映射到 2 个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T04:33:49.437

我建议使用更简单的一维数组结构来存储错误消息：

```
$errors[0] = 'error message one';
$errors[1] = 'error message two'; 
```

从服务器输出它们：

```
echo json_encode($errors); 
```

然后`jQuery.each()`在获得 POST 响应后使用迭代数组：

```
$.each(error, function() {
    // do something with each error
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T06:49:30.817

您可以在回显 json 格式的输出之前连接所有错误

例如

```
 if (isset($_POST['submit'])) {

$email = $_POST['email'];
$feedback = $_POST['feedback'];
$errors = "";

if (filter_var($email, FILTER_VALIDATE_EMAIL) && !empty($email)) {
             //Do something
} else {
    $errors .= "Invalid email.<br/>";

}

if (!empty($feedback)) {
            //Do something
} else {
    $errors .= "Feeback field can not be empty.<br/>";
}

if ($errors != "") {
    echo json_encode(array("success" => "Feedback submission successful."));
}else{
    echo json_encode(array("error" => $errors));
} 
```

# c# - Enumerator.MoveNext() 在第一次调用时抛出 'Collection was Modified'

> ID：11287185
> 
> 赞同：4
> 
> 时间：2012-07-02T02:20:15.283
> 
> 标签：c#, .net, multithreading, iterator, ienumerable

考虑以下代码：

```
List<int> list = new List<int>();
IEnumerable<int> enumerable = list;
IEnumerator<int> enumerator = enumerable.GetEnumerator();
list.Add(1);
bool any = enumerator.MoveNext(); 
```

在运行时，最后一行抛出：

> InvalidOperationException：集合已修改；枚举操作可能无法执行。

我了解在更改`IEnumerators`时需要抛出“集合已修改”异常`IEnumerable`，但我不明白这一点：

为什么在第**一次**调用时`IEnumerator`抛出这个异常？由于不代表第一次调用until的状态，为什么它不能从第一次而不是从开始跟踪更改？**`MoveNext()``IEnumerator``IEnumerable``MoveNext()``MoveNext()``GetEnumerator()`**

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T02:25:02.010

可能是因为“如果基础集合被修改，则枚举器无效”规则比“如果在第一次调用 MoveNext 后修改了基础集合，则枚举器无效”规则更简单。或者这只是它的实施方式。另外，假设 Enumerator 代表创建 Enumerator 时底层集合的状态是合理的，并且依赖于不同的行为可能是错误的来源。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T15:48:58.320

我觉得需要快速回顾一下迭代器。

迭代器（C# 的 IEnumerator 和 IEnumerable）用于以有序方式访问结构的元素，而不暴露底层表示。结果是它允许您拥有以下通用功能。

```
void Iterator<T, V>(T collection, Action<V> actor) where T : IEnumerable<V>
{
    foreach (V value in collection)
        actor(value);
}

//Or the more verbose way
void Iterator<T, V>(T collection, Action<V> actor) where T : IEnumerable<V>
{
    using (var iterator = collection.GetEnumerator())
    {
        while (iterator.MoveNext())
            actor(iterator.Current);
    }
}

//Or if you need to support non-generic collections (ArrayList, Queue, BitArray, etc)
void Iterator<T, V> (T collection, Action<V> actor) where T : IEnumerable
{
    foreach (object value in collection)
        actor((V)value);
} 
```

正如在 C# 规范中所见，存在权衡取舍。

5.3.3.16 Foreach 语句

> foreach ( expr 中的类型标识符) 嵌入语句
> 
> *   expr 开始时 v 的明确赋值状态与 stmt 开始时 v 的状态相同。
>     
>     
> *   v 在控制流转移到嵌入语句或到 stmt 终点的明确赋值状态与 expr 结束时 v 的状态相同。

这仅仅意味着值是只读的。为什么它们是只读的？这很简单。由于`foreach`是这样一个高级别的声明，它不能也不会假设您正在迭代的容器的任何内容。如果您正在遍历二叉树并决定在 foreach 语句中随机分配值怎么办。如果`foreach`不强制只读访问，那么您的二叉树将退化为一棵树。整个数据结构将处于混乱状态。

但这不是您最初的问题。您甚至在访问第一个元素之前就修改了集合并引发了错误。为什么？为此，我使用[ILSpy 研究](http://wiki.sharpdevelop.net/ILSpy.ashx)了 List 类。这是 List 类的一个片段

```
public class List<T> : IList<T>, ICollection<T>, IEnumerable<T>, IList, ICollection, IEnumerable
{
    private int _version;

    public struct Enumerator : IEnumerator<T>, IDisposable, IEnumerator
    {
        private List<T> list;
        private int version;
        private int index;

        internal Enumerator(List<T> list)
        {
            this.list = list;
            this.version = list._version;
            this.index = 0;
        }

        /* All the implemented functions of IEnumerator<T> and IEnumerator will throw 
           a ThrowInvalidOperationException if (this.version != this.list._version) */
    }
} 
```

枚举器使用父列表的“版本”和对父列表的引用进行初始化。 *所有*迭代操作都会检查以确保初始版本等同于引用列表的当前版本。如果它们不同步，则迭代器不再有效。为什么 BCL 会这样做？为什么实现者不检查枚举器的索引是否为 0（表示新的枚举器），如果是，只需重新同步版本？我不确定。我只能假设团队希望所有实现 IEnumerable 的类之间保持一致，并且他们也希望保持简单。因此，只要元素在范围内，列表的枚举器（我相信大多数其他人）就不会区分元素。

这是您的问题的根本原因。如果您绝对必须拥有此功能，那么您将必须实现自己的迭代器，并且最终可能不得不实现自己的 List。在我看来，对于 BCL 的流动来说，工作量太大了。

[以下是GoF](http://en.wikipedia.org/wiki/Design_Patterns)在设计 BCL 团队可能遵循的迭代器时引用的一句话：

> 在遍历聚合时修改聚合可能很危险。如果从聚合中添加或删除元素，您最终可能会访问一个元素两次或完全丢失它。一个简单的解决方案是复制聚合并遍历副本，但通常这样做太昂贵了

BCL 团队很可能认为它在时空复杂性和人力方面过于昂贵。这种理念贯穿于整个 C#。允许在 foreach 中修改变量可能太昂贵了，让 List 的 Enumerator 区分它在列表中的位置太昂贵，并且太昂贵以至于无法支撑用户。希望我已经很好地解释了它，以至于人们可以看到迭代器的力量和约束。

**参考**：

是什么改变了列表的“版本”，从而使所有当前的枚举器无效？

*   通过索引器更改元素
*   `Add`
*   `AddRange`
*   `Clear`
*   `Insert`
*   `InsertRange`
*   `RemoveAll`
*   `RemoveAt`
*   `RemoveRange`
*   `Reverse`
*   `Sort`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T02:32:35.150

这是因为 中有一个私有`version`字段，调用`List<T>`时会检查该字段。`MoveNext`所以现在我们知道如果我们有一个`MyList<T>`实现的自定义`IEnumerable<T>`，我们可以避免检查`version`，并且即使集合被修改也允许枚举（但这可能会导致意外行为）。**

# c - gdb 查找行号的内存地址

> ID：11287188
> 
> 赞同：7
> 
> 时间：2012-07-02T02:21:04.620
> 
> 标签：c, linux, gdb, x86

假设我已将 gdb 附加到一个进程，并且在其内存布局中有一个文件和行号，我想要它的内存地址。如何获取文件 x 中第 n 行的内存地址？这是在 Linux x86 上。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T03:27:52.750

```
(gdb) info line test.c:56
Line 56 of "test.c" starts at address 0x4005ae <main+37>
   and ends at 0x4005ba <main+49>. 
```

另外，使用 python，您可以使用 [Symbol-Tables-In-Python](http://sourceware.org/gdb/current/onlinedocs/gdb/Symbol-Tables-In-Python.html#Symbol-Tables-In-Python)中的“last”属性，这目前需要来自 cvs 的最新版本的 gdb，但我想在 7.5 中将具有普遍可用性

```
(gdb) py x = gdb.find_pc_line(gdb.decode_line("test.c:56")[1][0].pc); gdb.execute("p/x " + str(x.pc)); gdb.execute("p/x " + str(x.last))
$15 = 0x4005ae
$16 = 0x4005b9 
```

# php - PHP中的时间扣除与交换

> ID：11287189
> 
> 赞同：0
> 
> 时间：2012-07-02T02:21:06.570
> 
> 标签：php, html

请问我如何通过减去两个时间参数来计算周期，如下所示

```
$time_1 = $rows['code_send_time'];
$period = time() - $time_1; 
```

在我回显 $period 后，我如何交换到分钟并知道已经过去了多少分钟？

我扣除后的结果是“151341193030”，我希望结果是“30”（分钟）或“1800”（秒）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:30:44.127

您可以`DateTime`为此使用对象。如果您查看文档，则有以下方法：`DateTime::diff`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:28:00.527

[http://snipplr.com/view/1459/sec2hms/](http://snipplr.com/view/1459/sec2hms/)

添加你所拥有的：

sec2hms（$周期）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T03:18:30.240

```
$time_1 = $rows['code_send_time'];

// As you said you get 151341193030 here
$period = time() - $time_1; 
```

$period 包含秒数。因此，如果您想获得分钟数，可以将其除以 60，如果您想获得小时数，则将其除以 3600。

# jquery - jQuery用子元素中的另一个href值替换一个href值

> ID：11287191
> 
> 赞同：1
> 
> 时间：2012-07-02T02:21:29.970
> 
> 标签：jquery

我正在尝试处理我们的系统如何为日历吐出代码，并且由于格式的原因，我需要将某些链接的 href 值更改为其子链接到的值。下面是一些示例代码：

```
<td class="date eventDate">
<a class="dateLink" href="calendar?DATE=2012-07-06&VIEW=day">6</a>
<br>
  <div>
    <div class="event">
      <a href="/calendar?date=20120702" class="event"></a>
      <a href="/calendar?root=320794" class="eventon">6 July</a>
      </div>
  </div>
</td> 
```

我需要 jQuery 用第三个标签的 href 值替换第一个标签的 href 值。我不太确定如何让 jQuery 浏览页面的所有元素来实现这一点。

我认为该过程是查找所有 a.dateLink 并将当前选择替换为子元素 a.eventon 的 href 值，然后转到下一个 a.dateLink 并重复。如果没有子元素 a.eventon 则继续下一个。

任何人都可以帮我解决我的需要吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T02:34:46.873

这里有一些伪代码可以帮助您入门：

```
//get all td.date.eventDate
//for each element in collection
    //find a.dateLink child
    //find a.eventon child
    //if a.eventon is not null or empty
        //set a.dateLink[href] to a.eventon[href]
    //else
        //continue loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T02:32:56.473

这段代码会做

```
 $("td.data.eventDate").each(function(){
        if($(this).find("a.eventon") > 0)
        {
            $(this).children("a.dateLink").attr("href",$(this).children("a.eventon").attr("href"));
        }
    }); 
```

# php - PDO，使用带有转义的 PDO 来获取内容并回显它

> ID：11287192
> 
> 赞同：1
> 
> 时间：2012-07-02T02:21:30.583
> 
> 标签：php, mysql, pdo

我正在尝试使用以下代码从 get 变量中获取结果，我使用了另一个代码（在更下方列出）并且它有效但是在使用它时无法逃脱，我不知道我做错了什么但是我需要帮助，我刚刚开始 PDO，所以是的，我是个白痴 :D 但我想学习。

```
if (isset($_GET['id'])) {
    $id = $_GET['id'];
    $q    = "SELECT * FROM users WHERE id=:id";
    $query = $odb->prepare($q);
    $results = $query->execute(array(
        ":id" => $id
    ));
    if($result-> rowCount()>0) {
        foreach($result as $item) {
            echo $item['user'];
        }
    }
} 
```

有效但没有转义的代码：

```
$id = $_GET['id'];
$query = "SELECT * FROM users WHERE id=".$id."";
$result = $odb->query($query);
if($result->rowCount() > 0) {
    foreach($result as $item) {
        echo  $item['user'];
    }
} 
```

谢谢和 PS，如果这是一个愚蠢的问题，而不是我才 13 岁，而且我认为 12 或 13 岁的孩子要求与代码有关的任何问题都不会被认为是愚蠢的。请告诉我我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:30:51.513

您需要重写结果循环（包括 if { } 语句之间的所有内容），如下所示：

```
while (($item = $results->fetch(PDO::FETCH_ASSOC)) !== FALSE) {
    echo $item['user'];
} 
```

除非您特别需要结果集之前的行数，否则您实际上不需要调用 rowCount()。如果没有结果，循环将立即失败，因为第一次调用将返回 FALSE，并且循环将在没有任何迭代的情况下结束。

**编辑（调试步骤）：**

如果你使用这个，你会看到什么？我在想也许你有一个额外的字符（一个空格）或 $_GET['id'] 中的一些东西，当你将它作为文字传递时是合法的，但当你将它作为参数传递时却不是：

```
if (isset($_GET['id'])) {
  $id = $_GET['id'];
  die(var_export($id, TRUE));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:06:40.733

```
if(isset($_GET['id'])){
    $id = $_GET['id'];

    $q = "SELECT * FROM `users` WHERE `id` = :id";
    $query = $odb->prepare($q);
    $query->execute(array(
        ':id' => $id
    ));

    if($query->rowCount() > 0){
        foreach($query->fetchAll() AS $item){
            echo $item['user'];
        }
    }
} 
```

我环顾四周并询问了phpfreaks，他们告诉我这会起作用，我试过了，它起作用了。

# design-patterns - 不要重复自己的通勤属性

> ID：11287193
> 
> 赞同：4
> 
> 时间：2012-07-02T02:22:09.457
> 
> 标签：design-patterns, data-structures, dry

假设我有一个`Person`带有`name`属性的模型类。

我也有一个对应`PersonView`的包含 a`NameView`作为其子视图之一。

`PersonView`还保留对人的引用（其模型），并保留`NameView`对名称（其模型）的引用。

如果我在里面`PersonView`，我现在有两种方法可以得到这个名字：要么

```
self.person.name 
```

或者

```
self.nameView.name 
```

所有的参考都是自然的。然而，这似乎违反了 DRY。上述路径应该产生相同的名称。但是，如果某些事情不同步，他们可能不会。

上面的例子比这些事情在实践中往往要简单得多。例如，人可能是`Family`对象的一部分，而对象又被`FamilyView`对象引用。现在有三种不同的路径从`FamilyView`下到给定的人的名字。随着树的生长，它只会变得更糟。

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:23:07.423

我认为，在这种情况下，你必须在违反 DRY 或放弃松耦合之间做出选择。我不认为你可以避免两者。

如果`NameView`不包含它自己的数据副本，那么它需要一个指向数据的指针。现在你已经拧紧了联轴器，因为`NameView`不能单独使用。

另一方面，如果`NameView`保留模型数据的副本，那么您就违反了 DRY，您最终可能会遇到同步问题。许多 GUI 框架都有一个“绑定”概念，可以使模型和视图之间的值保持同步。

就个人而言，我会选择松耦合加绑定。如果您使用的绑定很好，您不应该有任何同步问题。在许多不同的语言和框架中广泛使用绑定表明这是一种不错的方法。

至于是否使用`self.person.name`or `self.nameView.name`，这取决于您是要尝试修改模型状态还是视图状态。如果您想更改模型，那么只需更改`self.person.name`. 视图应该以某种方式观察模型的变化，并且应该能够相应地更新自己。如果您想更新 GUI 并且不关心模型，请使用`self.nameView.name`.

# javascript - android网页中的链接变蓝

> ID：11287197
> 
> 赞同：0
> 
> 时间：2012-07-02T02:22:44.760
> 
> 标签：javascript, android, html, css, pseudo-class

`a`当我按下具有事件侦听器或标签的元素时，android 网页中的链接变蓝。也许这是默认行为。如何覆盖此行为并自定义？使用 jQuery 的`live`函数时，它不会变蓝并正确处理。但我更喜欢 CSS 解决方案。`:active`css 伪没有帮助。这是我的代码：

```
a:active {
    background-color: white;
} 

<li style="text-align:right;">
    <a href="#categories"> <div>Categories</div> </a>
</li> 
```

当我长按“类别”时，它会变蓝并在触摸端恢复正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:57:54.063

尝试添加`!important`：

```
a:active {
    background-color: white !important;
} 
```

# c# - 对象引用未设置为 linq 中对象的实例

> ID：11287199
> 
> 赞同：0
> 
> 时间：2012-07-02T02:23:03.730
> 
> 标签：c#, linq, linq-to-sql

我有几个课程，我需要一起使用它们。

一个样品

```
public class members
{
    [Key]
    public Guid id {get;set;}
    public string name {get;set;}
}

public class comments
{
    [Key]
    public Guid id {get;set;}
    public members composer {get;set;}
    public string comment {get;set;}
} 
```

我尝试这种方式

```
List<comments> listComments = new List<comments>();
using(db dc = new db())
{
    listComments = dc.comment.Where(x => x.id.Equals("an id")).ToList();
} 
```

当我尝试从评论中获取成员名称时，它说对象引用未设置对象实例。

```
foreach(comments c in listComments)
{
    c.id //no problem
    c.comment //no problem
    c.composer.name //error?
} 
```

**解决方案** 我找到了将成员作为列表的解决方案。

```
List<comments> listComments = new List<comments>();
List<members> lm = new List<members>();
using(db dc = new db())
{
    listComments = dc.comment.Where(x => x.id.Equals("an id")).ToList();
    lm = dc.member.ToList();
}

foreach(comments c in listComments)
{
    c.id //no problem
    c.comment //no problem
    lm.Where(u => u.id.Equals(c.member.id)).FirstOrDefault().name //that works good
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:31:25.553

LINQ-to-SQL 默认提供延迟加载。您需要使用 DataLoadOptions 类强制加载子对象。

```
List<comments> listComments = new List<comments>();
using(db dc = new db())
{
    var loadOptions = new DataLoadOptions();
    loadOptions.LoadWith<comments>(c => c.members);
    db.LoadOptions = loadOptions;

    listComments = dc.comment.Where(x => x.id.Equals("an id")).ToList();
} 
```

您还可以通过在数据库上下文中触摸它们来强制加载子对象

```
List<comments> listComments = new List<comments>();
using(db dc = new db())
{
    listComments = dc.comment.Where(x => x.id.Equals("an id")).ToList();

    var members = listComments.SelectMany(l => l.members);
} 
```

# objective-c - 删除发送到 UILabel 的数据

> ID：11287201
> 
> 赞同：0
> 
> 时间：2012-07-02T02:23:39.387
> 
> 标签：objective-c, ios, xcode

我正在创建一个具有退格按钮的计算器应用程序，以防用户不小心输入了一个数字。有没有办法删除发送到 UILabel 的最后一个东西？

当然，我正在添加我的代码以显示我目前在做什么，

```
- (IBAction)digitPressed:(UIButton *)sender {

    NSString *digit = sender.currentTitle;
    if ([digit isEqualToString:@"."] && !_decimalPressed){
        self.display.text = [self.display.text stringByAppendingString:digit];
        self.historyDisplay.text = [self.display.text stringByAppendingString:digit];
        self.decimalPressed = YES;
    }
    else if (!_isUserInTheMiddleOfEnteringANumber){
        self.display.text = digit;
        self.historyDisplay.text = digit;
        self.isUserInTheMiddleOfEnteringANumber = YES;
    }
    else if (![digit isEqualToString:@"."]){
        self.display.text = [self.display.text stringByAppendingString:digit];
        self.historyDisplay.text = [self.display.text stringByAppendingString:digit];
    }
} 
```

这就是我试图删除最后一个元素的方式

```
- (IBAction)backSpace:(id)sender {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:32:39.617

只需从标签内设置的字符串中删除最后一个字符。示例代码：

```
int numChars = myLabel.text.length;
NSString* truncatedString = [myLabel.text substringToIndex:(numChars - 1)];
mLabel.text = truncatedString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:18:30.183

```
- (IBAction)backPressed:(id)sender {
    self.display.text=[self.display.text substringToIndex:[self.display.text length] -1];
    if ([self.display.text isEqualToString:@""] || [self.display.text isEqualToString:@"-"]){
        self.display.text = @"0";
        self.userIsInTheMiddleOfEnteringANumber=NO;
    }

} 
```

在代码中添加了一些常见的逻辑。如果您到达最后一个数字并再次退格，它将返回显示文本为 0。由于它是一个计算器，假设您创建了负号 ( +/- )，如果您留下`-`，您将要删除它并将其也放置为 0。因此，如果一切都归零，您也需要将您的设置`userIsInTheMiddleOfEnteringANumber`为 NO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T02:32:39.513

```
NSMutableString * stringToModify = [[NSMutableString alloc] initWithString: self.display.text];
if(stringToModify && ([stringToModify length] > 0))
{
    [stringToModify deleteCharactersInRange: NSMakeRange([stringToModify length] - 1, 1)];
    self.display.text = stringToModify;
    [stringToModify release]; // if and only if NOT using ARC
} 
```

# python - 为什么我应该使用 operator.itemgetter(x) 而不是 [x]？

> ID：11287207
> 
> 赞同：42
> 
> 时间：2012-07-02T02:25:32.063
> 
> 标签：python, operators

这里有一个比较笼统的问题：[python](https://stackoverflow.com/questions/467920/in-what-situation-should-the-built-in-operator-module-be-used-in-python)[中应该在什么情况下使用内置模块？`operator`](https://stackoverflow.com/questions/467920/in-what-situation-should-the-built-in-operator-module-be-used-in-python)

最佳答案声称`operator.itemgetter(x)`比大概比“更整洁” `lambda a: a[x]`。我觉得恰恰相反。

还有其他好处吗，比如性能？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-02T02:27:27.843

除非您的代码处于紧密的内部循环中，否则您不应该担心性能，这实际上是一个性能问题。相反，请使用最能表达您意图的代码。有些人喜欢 lambdas，有些人喜欢 itemgetter。有时这只是口味问题。

`itemgetter`更强大，例如，如果您需要一次获取多个元素。例如：

```
operator.itemgetter(1,3,5) 
```

是相同的：

```
lambda s: (s[1], s[3], s[5]) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-02T02:30:16.693

在某些情况下有好处，这是一个很好的例子。

```
>>> data = [('a',3),('b',2),('c',1)]
>>> from operator import itemgetter
>>> sorted(data, key=itemgetter(1))
[('c', 1), ('b', 2), ('a', 3)] 
```

这种使用`itemgetter`非常棒，因为它使一切变得清晰，同时由于所有操作都保留在`C`一边，速度也更快。

```
>>> sorted(data, key=lambda x:x[1])
[('c', 1), ('b', 2), ('a', 3)] 
```

使用 a`lambda`不是很清楚，它也较慢，`lambda`除非必须，否则最好不要使用。例如。列表推导式优于`map`与 a 一起使用`lambda`。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-02T02:30:11.033

表现。它可以产生很大的不同。在适当的情况下，您可以使用 itemgetter 在 C 级别完成大量工作。

我认为更清晰的主张实际上取决于您最常使用的内容，并且非常主观

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-09-30T15:35:18.473

在or的`key`参数中使用 this 时，考虑到 say和之间的选择，前者通常在两种情况下都快得多：`sorted()``min()``operator.itemgetter(1)``lambda x: x[1]`

* * *

**使用`sorted()`**

[![BM](../Images/a200f728268c0ee839058bff7093dc27.png)](https://i.stack.imgur.com/7D2Sc.png)

比较函数定义如下：

```
import operator

def sort_key_itemgetter(items, key=1):
    return sorted(items, key=operator.itemgetter(key))

def sort_key_lambda(items, key=1):
    return sorted(items, key=lambda x: x[key]) 
```

**结果**：`sort_key_itemgetter()`快了 ~10% 到 ~15%。

[（这里](https://colab.research.google.com/drive/1KaomDzY31DhauBJQ3iYiqm3Wd7EE3dBM)全面分析）

* * *

**使用`min()`**

[![在此处输入图像描述](../Images/13f37a0298488df9adc8d955320a64c8.png)](https://i.stack.imgur.com/kNZV7.png)

比较函数定义如下：

```
import operator

def min_key_itemgetter(items, key=1):
    return min(items, key=operator.itemgetter(key))

def min_key_lambda(items, key=1):
    return min(items, key=lambda x: x[key]) 
```

**结果**：`min_key_itemgetter()`快了 ~20% 到 ~60%。

[（这里](https://colab.research.google.com/drive/1pwX46ekUYvaYxs7vsDFfq-Fb201tF7vQ)全面分析）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-01-22T17:40:55.400

正如提到的性能，我已经比较了这两种方法`operator.itemgetter`，`lambda`并且对于一个小列表，结果证明它`operator.itemgetter`优于 lambda `10%`。我个人喜欢这种`itemgetter`方法，因为我主要在排序过程中使用它，它对我来说就像一个关键字。

```
import operator
import timeit

x = [[12, 'tall', 'blue', 1],
[2, 'short', 'red', 9],
[4, 'tall', 'blue', 13]]

def sortOperator():
    x.sort(key=operator.itemgetter(1, 2))

def sortLambda():
    x.sort(key=lambda x:(x[1], x[2]))

if __name__ == "__main__":
    print(timeit.timeit(stmt="sortOperator()", setup="from __main__ import sortOperator", number=10**7))
    print(timeit.timeit(stmt="sortLambda()", setup="from __main__ import sortLambda", number=10**7))    

>>Tuple: 9.79s, Single: 8.835s
>>Tuple: 11.12s, Single: 9.26s 
```

# 在 Python 3.6 上运行

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-07-01T10:52:17.050

撇开性能和代码风格不谈，`itemgetter`是可以选择的，而`lambda`不是。如果函数需要保存或在进程之间传递（通常作为较大对象的一部分），这一点很重要。在以下示例中，替换`itemgetter`为`lambda`将导致`PicklingError`.

```
from operator import itemgetter

def sort_by_key(sequence, key):
    return sorted(sequence, key=key)

if __name__ == "__main__":
    from multiprocessing import Pool

    items = [([(1,2),(4,1)], itemgetter(1)),
             ([(5,3),(2,7)], itemgetter(0))]

    with Pool(5) as p:
        result = p.starmap(sort_by_key, items)
    print(result) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-07-02T04:16:10.320

一些程序员理解并使用 lambdas，但也有一些程序员可能没有学过计算机科学并且不清楚这个概念。对于那些程序员`itemgetter()`可以让你的意图更清晰。（我不写 lambda，任何时候我在代码中看到一个，我都需要一些额外的时间来处理正在发生的事情并理解代码）。

如果您正在为其他计算机科学专业人士编写代码，请继续使用 lambda，如果他们更舒服的话。但是，如果您正在为更广泛的受众编写代码。我建议使用`itemgetter()`.

# vb.net - String <> Nothing 和 String <> "" VB .NET 中的冗余？

> ID：11287210
> 
> 赞同：6
> 
> 时间：2012-07-02T02:26:20.980
> 
> 标签：vb.net

我查看了一些代码并发现了这个：

```
Dim TestString As String
...
If TestString <> Nothing And TestString <> "" Then
...
EndIf 
```

这两个条件检查同一件事吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T02:30:07.607

`Nothing`根本不是字符串（`null`在其他语言中），这与空字符串 ( `""`) 不同，后者实际上是一个字符串。

但是，检查应该替换为`If Not String.IsNullOrEmpty(TestString) Then`，这样可以更清楚地知道您在做什么。

我只是在 LINQPad 中玩了一些，发现了一些有点令人惊讶的东西。在 VB.NET 中：

```
Dim s1 as string = Nothing
Dim s2 as string = ""

Console.WriteLine(s1 is Nothing) 'True
Console.WriteLine(s2 is Nothing) 'False

Console.WriteLine(s1 = "") 'True
Console.WriteLine(s2 = "") 'True

Console.WriteLine(string.IsNullOrEmpty(s1)) 'True
Console.WriteLine(string.IsNullOrEmpty(s2)) 'True 
```

在 C# 中：

```
string s1 = null;
string s2 = "";

Console.WriteLine(s1 == null); //True
Console.WriteLine(s2 == null); //False

Console.WriteLine(s1 == ""); //False
Console.WriteLine(s2 == ""); //True

Console.WriteLine(string.IsNullOrEmpty(s1)); //True
Console.WriteLine(string.IsNullOrEmpty(s2)); //True 
```

我不太期待。看来 VB.Net 将 a`Nothing`视为空字符串。我的猜测是为了与旧版本的 VB 兼容。

这更加强化了您应该`String.IsNullOrEmpty`用于这些类型的检查，因为它更明确您正在检查的内容，并且按预期工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T08:27:37.207

他们正在检查相同的东西，但它们可能**意味着**检查不同的东西。

```
If IsNothing(TestString) Then 
```

和

```
If TestString = Nothing Then 
```

是不同的测试——第一个很少使用，因为通常你只想知道它是否有一个非空值。但它可用于在数据库中以不同方式处理空字符串和空值，或用于检测可选参数的使用（这两种情况都需要额外的工作以确保您不会无意中输入错误的值，所以有点脆弱的）。

在给出的示例中，测试实际上有点冗长和混乱，如果这是您想要测试的内容，那么 If String.IsNullOrEmpty(TestString) Then

是解决它的方法。如果那个“and”应该是一个“or”，那么使用 IsNothing(TestString) 可能是有意义的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T05:12:56.253

是的，根据 VB.NET`""`中的定义，相当于`Nothing`包含 for`=`和`<>`所有*VB*函数；除非您明确关心差异，例如通过检查`Is`.

当然，在使用一般 .NET 函数时，您会看到不同之处，尤其是那些`str.Method`会因 Null 引用异常而失败的方法。

顺便说一句，我猜 OP 中的摘录是 C# 代码（严重）转换的。

# c - C语言中的“宽字符串”是什么？

> ID：11287213
> 
> 赞同：34
> 
> 时间：2012-07-02T02:27:09.437
> 
> 标签：c, string, widechar

我在书中遇到了这个：

```
wscanf(L"%lf", &variable); 
```

其中第一个参数的类型为`wchar_t *`.

这与`scanf("%lf", &variable);`第一个参数的类型不同`char *`。

那么有什么区别呢。我以前从未听说过“宽字符串”。我听说过一种叫做 Raw String Literals 的东西，它按原样打印字符串（不需要转义序列之类的东西），但这不在 C 语言中。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-02T02:45:05.220

宽字符的*确切*性质是（有目的地）左实现定义的。

当他们第一次发明`wchar_t`. 他们没有尝试规定国际字符将是一个或另一个（或可能完全是其他东西），而是提供了一种类型（和一些函数），实现可以定义该类型以支持他们选择的国际字符集。

不同的实现*已经*发挥了变化的潜力。例如，如果您在 Windows 上使用 Microsoft 的编译器，`wchar_t`将是一个 16 位类型，持有 UTF-16 Unicode（最初它持有 UCS-2 Unicode，但现在已正式过时）。

在 Linux 上，`wchar_t`通常是 32 位类型，持有 UCS-4/UTF-32 编码的 Unicode。gcc 到至少一些其他操作系统的端口也是如此，尽管我从未尝试确认它总是如此。

但是，不能保证这一点。至少在理论上，Linux 上的实现可以使用 16 位，或者 Windows 上的实现可以使用 32 位，或者任何一个都可以决定使用 64 位（尽管在现实中看到这一点我会有点惊讶）。

在任何情况下，关于事物如何工作的一般想法*是*，单个`wchar_t`就足以表示一个代码点。对于 I/O，数据旨在从外部表示（无论它是什么）转换为`wchar_t`s，这（应该）使它们相对容易操作。然后在输出期间，它们再次转换为您选择的编码（可能与您读取的编码完全不同）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-02T02:32:19.517

“宽字符串”是指字符串中字符的编码。

来自[维基百科](http://en.wikipedia.org/wiki/Wide_character)：

> 宽字符是一种计算机字符数据类型，其大小通常大于传统的 8 位字符。增加的数据类型大小允许使用更大的编码字符集。

[UTF-16](http://en.wikipedia.org/wiki/UTF-16)是最常用的宽字符编码之一。

此外，[Microsoft](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367308%28v=vs.85%29.aspx)`wchar_t`将其定义为数据对象。这可能并且很可能是其他操作系统或语言中的不同定义。`unsigned short(16-bit)`

摘自以下评论的维基百科文章：

> “wchar_t 的宽度是特定于编译器的，可以小至 8 位。因此，需要在任何 C 或 C++ 编译器之间移植的程序不应使用 wchar_t 来存储 Unicode 文本。wchar_t 类型用于存储编译器 -定义的宽字符，在某些编译器中可能是 Unicode 字符。”

# mysql - 优化 SQL 查询（类似 Facebook 的应用程序）

> ID：11287218
> 
> 赞同：0
> 
> 时间：2012-07-02T02:27:38.530
> 
> 标签：mysql, optimization

我的应用程序类似于 Facebook，我正在尝试优化获取用户记录的查询。用户记录是他作为src ou dst。`src`直接在`usermuralentry`，`dst`列表在`usermuralentry_user`。

所以，一个条目可以有一个`src`和多个`dst`。

我有这些表：

```
mysql> desc usermuralentry ;
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| id              | int(11)          | NO   | PRI | NULL    | auto_increment |
| user_src_id     | int(11)          | NO   | MUL | NULL    |                |
| private         | tinyint(1)       | NO   |     | NULL    |                |
| content         | longtext         | NO   |     | NULL    |                |
| date            | datetime         | NO   |     | NULL    |                |
| last_update     | datetime         | NO   |     | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+
10 rows in set (0.10 sec)

mysql> desc usermuralentry_user ;
+-------------------+---------+------+-----+---------+----------------+
| Field             | Type    | Null | Key | Default | Extra          |
+-------------------+---------+------+-----+---------+----------------+
| id                | int(11) | NO   | PRI | NULL    | auto_increment |
| usermuralentry_id | int(11) | NO   | MUL | NULL    |                |
| userinfo_id       | int(11) | NO   | MUL | NULL    |                |
+-------------------+---------+------+-----+---------+----------------+
3 rows in set (0.00 sec) 
```

下面的查询从两个用户那里检索信息。

```
mysql> explain

SELECT *
FROM usermuralentry AS a
   , usermuralentry_user AS b
WHERE a.user_src_id IN ( 1, 2 )
   OR
   (
      a.id = b.usermuralentry_id
         AND b.userinfo_id IN ( 1, 2 )
   );
+----+-------------+-------+------+-------------------------------------------------------------------------------------------+------+---------+------+---------+------------------------------------------------+
| id | select_type | table | type | possible_keys                                                                             | key  | key_len | ref  | rows    | Extra                                          |
+----+-------------+-------+------+-------------------------------------------------------------------------------------------+------+---------+------+---------+------------------------------------------------+
|  1 | SIMPLE      | b     | ALL  | usermuralentry_id,usermuralentry_user_bcd7114e,usermuralentry_user_6b192ca7 | NULL | NULL    | NULL |  147188 |                                                |
|  1 | SIMPLE      | a     | ALL  | PRIMARY                                                                                   | NULL | NULL    | NULL | 1371289 | Range checked for each record (index map: 0x1) |
+----+-------------+-------+------+-------------------------------------------------------------------------------------------+------+---------+------+---------+------------------------------------------------+
2 rows in set (0.00 sec) 
```

但这需要很多时间...

一些优化技巧？表模式在我的应用程序中可以更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:29:26.237

我认为您的联接没有正确形成，您需要更改查询以使用 UNION。where 子句中的 OR 条件也会影响性能：

```
SELECT *
FROM usermuralentry AS a
 JOIN usermuralentry_user AS b ON a.id = b.usermuralentry_id /* use explicit JOIN! */
WHERE a.user_src_id IN (1 , 2)
 UNION
SELECT *
FROM usermuralentry AS a
 JOIN usermuralentry_user AS b ON a.id = b.usermuralentry_id 
WHERE b.usermuralentry_id IN ( 1, 2 ) 
```

您还需要一个索引： ALTER TABLE usermuralentry_user ADD INDEX (usermuralentry_id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T05:34:42.953

使用此查询

```
SELECT *
FROM usermuralentry AS a
left join usermuralentry_user AS b
on b.usermuralentry_id = a.id
WHERE a.user_src_id IN(1, 2)
OR (a.id = b.usermuralentry_id
AND b.userinfo_id IN(1, 2)); 
```

对于这里的一些提示，
您在 from 子句中使用了两个表，这是一个 cartision 产品，将花费大量时间以及不希望的结果。在这种情况下始终使用连接。

# objective-c - iOS 5 JSON 到 tableView 错误

> ID：11287219
> 
> 赞同：1
> 
> 时间：2012-07-02T02:27:51.743
> 
> 标签：objective-c, ios, json, tableview, nsjsonserialization

我试图解析[来自 USGS 的 JSON 字符串](http://earthquake.usgs.gov/earthquakes/feed/geojson/all/hour)。但是我收到错误`"-[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x68a34c0"`基本上，我想将 USGS JSON 解析到 tableview 中。任何人都可以帮忙吗？这是我的代码。

`ViewController.h`

```
@interface EarthquakeViewController : UITableViewController
{
    NSArray *json;
    NSDictionary *earthquakeReport;
} 
```

`ViewController.m`

```
- (void)viewDidLoad
{
    //content = [NSMutableArray arrayWithObjects:@"one", @"two", nil];
    [super viewDidLoad];
    [self fetchReports];
}
- (void)fetchReports
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"http://earthquake.usgs.gov/earthquakes/feed/geojson/all/hour"]];

        NSError* error;
        json = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:&error];
        NSLog(@"%@", json);
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return json.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    earthquakeReport = [json objectAtIndex:indexPath.row];
    NSString *country = [[[earthquakeReport objectForKey:@"features"] objectForKey:@"properties"] objectForKey:@"place"];
    NSString *mag = [[[earthquakeReport objectForKey:@"features"] objectForKey:@"properties"] objectForKey:@"mag"];
    cell.textLabel.text = country;
    cell.detailTextLabel.text = mag;

    return cell;

} 
```

错误显示在该行`earthquakeReport = [json objectAtIndex:indexPath.row];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:27:46.570

如果您在 Web 浏览器 ( [http://earthquake.usgs.gov/earthquakes/feed/geojson/all/hour](http://earthquake.usgs.gov/earthquakes/feed/geojson/all/hour) ) 中查看您的 JSON 数据，您应该注意到您尝试访问的数组不在根级别。根级别是字典，您要查找的数组位于“功能”键中。

要正确访问它，首先将您的`json`ivar 声明更改为`NSDictionary`：

```
NSDictionary *json; 
```

然后，在您的`tableView:cellForRowAtIndexPath:`方法中，这样访问报告：

```
earthquakeReport = [[json objectForKey:@"features"] objectAtIndex:indexPath.row]; 
```

# azure - 虚拟机的自动快照

> ID：11287223
> 
> 赞同：2
> 
> 时间：2012-07-02T02:28:38.800
> 
> 标签：azure, azure-blob-storage

有没有办法在 azure 中自动创建虚拟机的快照？我不是开发人员，我不想编写代码来访问 API 等。在 Amazon EC2 中很容易做到，它只是一个复选框。我只是在寻找一个简单的过程来创建我的 VM 的每日快照或备份。其他人是如何做到的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:30:54.080

不幸的是，没有像您描述的那样每天自动执行此操作。作为关于其他人如何执行此操作的另一个问题，您可以直接从桌面使用 Windows Azure PowerShell 命令行工具，在您的 VM 仍在运行时使用**save-azurevmimage**创建快照，并且 VM 映像将保存到您的 Azure 存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T18:07:05.133

您可以备份经典版本和 ARM 版本的 Azure VM - [https://azure.microsoft.com/en-us/documentation/articles/backup-azure-vms/](https://azure.microsoft.com/en-us/documentation/articles/backup-azure-vms/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T14:34:24.237

万一有人像我一样进入这个页面，Azure 现在有一个自动备份。请参阅[https://docs.microsoft.com/en-us/azure/backup/quick-backup-vm-portal?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json](https://docs.microsoft.com/en-us/azure/backup/quick-backup-vm-portal?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-02T06:11:08.937

还有一个名为 Vmpower.io 的第三方 Azure 工具，它可以使用简单的日历自动生成现有托管（和非托管磁盘）的快照。如果您对编写自动化脚本不感兴趣，这可能会有所帮助。

# php - 读取子数组中具有字符串和对象的php数组

> ID：11287224
> 
> 赞同：1
> 
> 时间：2012-07-02T02:28:39.340
> 
> 标签：php

我有以下输出 sing var_dump .. 如何读取每个数组的“transferfrom”值？'ST00576' 和 'OT01606' 是动态值。它可以在子序列数组上改变。

```
string(19) "TB3360    7D  B  70"
array(2) {
  ["ST00576"]=>
  object(stdClass)#1 (13) {
    ["transferfrom"]=>
    int(102)
    ["transferto"]=>
    int(66)
    ["BR_ID"]=>
    int(102)

  }
  ["OT01606"]=>
  object(stdClass)#2 (13) {
    ["transferfrom"]=>
    int(102)
    ["transferto"]=>
    int(66)
    ["BR_ID"]=>
    int(66)

  }
}

string(19) "TB3360    BL  A  75"
array(2) {
  ["ST00576"]=>
  object(stdClass)#3 (13) {
    ["transferfrom"]=>
    int(102)
    ["transferto"]=>
    int(66)
    ["BR_ID"]=>
    int(102)

  }
  ["OT01606"]=>
  object(stdClass)#4 (13) {
    ["transferfrom"]=>
    int(102)
    ["transferto"]=>
    int(66)
    ["BR_ID"]=>
    int(66)

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:36:06.420

不确定您到底需要什么，但这将从`'transferfrom'`每个数组条目中挑选项目并返回一个具有相同键但字符串作为值的数组。

```
$arr = array_map(function($item) {
    return $item->transferfrom;
}, $arr); 
```

或者：

```
function pick_transferfrom($item)
{
    return $item->transferfrom;
}

$arr = array_map('pick_transferfrom', $arr); 
```

结果（缩短）：

```
['OT01606' => 102, 'ST00576' => 102]; 
```

或者你可以迭代：

```
foreach ($arr as $key => $item) {
    $transferfrom = $item->transferfrom;
    // do whatever you like with $transferfrom and $key
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:33:00.807

```
foreach($arrays as $arr){
  $transferfrom = $arr['transferfrom'];
  //here you do whatever you want with $arr
  //...
} 
```

# c++ - 从向量返回 bool&

> ID：11287233
> 
> 赞同：4
> 
> 时间：2012-07-02T02:30:45.563
> 
> 标签：c++, stl, vector

在以下代码中：

```
class SomeClass {
    vector<int> i;
    vector<bool> b;

public:
    int& geti() {return i[0];}
    bool& getb() {return b[0];}
}; 
```

如果你注释掉`getb()`，代码编译得很好。显然返回对`int`存储在向量中的引用没有问题，但你不能用`bool`.

为什么是这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T02:32:44.687

`std::vector<bool>`是“特别”。它将其元素存储为位数组，这意味着元素不可单独寻址，并且您无法获得对元素的引用。

`std::vector<bool>`迭代器、其`operator[]`及其其他成员函数返回*代理对象*，这些代理对象提供对元素的访问，而无需`bool`存储实际对象。

如果您需要能够访问单个元素，请考虑使用 a`std::vector<char>`或定义由 a （或 a or ，如果您关心签名）`bool`支持的类似枚举。`char``signed char``unsigned char`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T02:40:12.770

vector< **bool** > 是**bool**类型的特殊类模板特化。

提供这种专门用于优化空间分配：八个**bool**元素组合为一个字节，每个 bool 元素仅占用一位。

不允许在某个字节中引用一位。

因此该函数无法返回对vector< **bool** >中a **bool类型的引用。**

 **也有人认为vector< **bool** >不是容器。

您可以改用 deque< **bool** >。**

# javascript - IE7 jQuery 中的对象不支持此属性或方法错误

> ID：11287234
> 
> 赞同：0
> 
> 时间：2012-07-02T02:30:45.877
> 
> 标签：javascript, jquery, internet-explorer-7

IE7 显示此错误消息：（除 ie7 外，没有其他浏览器显示任何错误）

```
Message: Object doesn't support this property or method
Line: 97
Char: 2 
```

第 97 行有这个：

```
$('.megamenu').megaMenuCompleteSet({ 
```

完整的javascript代码是这样的：

```
<script> 
$(document).ready(function($){
    $('.megamenu').megaMenuCompleteSet({
        menu_speed_show : 300, // Time (in milliseconds) to show a drop down
        menu_speed_hide : 200, // Time (in milliseconds) to hide a drop down
        menu_speed_delay : 200, // Time (in milliseconds) before showing a drop down
        menu_effect : 'hover_slide', // Drop down effect, choose between 'hover_fade', 'hover_slide', etc.
        menu_click_outside : 1, // Clicks outside the drop down close it (1 = true, 0 = false)
        menu_show_onload : 0 // Drop down to show on page load (type the number of the drop down, 0 for none)
    });
});
</script> 
```

有人可以告诉我第 97 行有什么问题吗？

谢谢！

* * *

**更新解决：**

我使用的是最新的，我自己修好了，都是我的错，我用不同的版本加载了两次 jquery lib，它在除 IE7 之外的其他浏览器上没有任何问题。但调试后我发现多个库加载并删除，没有错误:)

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:50:05.967

您使用的是什么版本的 MegaMenu 脚本？我可以在他们的变更日志中看到这一点：

```
06/23/2012 – Version 2.11
Fixed an issue occurring under IE7 in megamenu.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:48:11.867

我不确定这是否是问题，但您不需要将 JQuery 作为参数传递，因为它是全局的，所以：

```
$(document).ready(function($){ 
```

应该：

```
$(document).ready(function(){ 
```

这可能是问题所在，因为您的 JQuery 插件似乎无法正常工作。

# c# - ajax回发后Asp.net gridview itemtemplate复选框列处于不正确状态（C＃）

> ID：11287242
> 
> 赞同：1
> 
> 时间：2012-07-02T02:32:28.623
> 
> 标签：c#, asp.net, ajax, gridview, postback

我在尝试将复选框`itemtemplate`字段集成到 ASP.net时遇到问题`gridview`。具体来说，我无法在异步回发后处理用户修改的复选框状态（可能是由于我的数据绑定方式）。

请注意，我必须使用异步回发，因为页面内容是动态引入 HTML`<div>`的。

在呈现的字段中有两个应该允许用户修改 SQL 数据库字段：`IsPrimary`和`IsEnabled`（显示为`IsActive`）。

我成功地呈现了这些字段的状态：当数据库中的 IsPrimary 等于“N”时，复选框未被选中，当它等于“Y”时，复选框被选中。

这一切都很棒。但是，我希望允许用户更改复选框的选中状态，以便在异步回发后将相应的数据库字段从“Y”切换为“N”。

我想要做的是：当用户切换复选框的状态（绑定到数据库表）然后提交表单时，服务器端代码应该进行适当的数据库更改。

我的问题是，当我尝试在异步回发之后从代码隐藏中访问字段时，**它们似乎未经用户修改**。也就是说，**它们在数据库中出现，而不是在用户修改后出现。**

据我了解，这与我将数据绑定到`gridview`.

不幸的是，我没有成功手动绑定数据。

这是相关的客户端代码：

```
 <asp:objectdatasource id="ObjectDataSource2" runat="server" dataobjecttypename="MPads.DataAccess.PatientInsuranceCard"
    deletemethod="DeletePatientInsuranceCard" insertmethod="SavePatientInsuranceCard"
    selectmethod="ListPatientInsuranceCardsByPatientId" typename="MPads.DataAccess.Repositories.PatientCardRepository"
    updatemethod="SavePatientInsuranceCard">
    <selectparameters>
        <asp:sessionparameter dbtype="Guid" name="patientId" sessionfield="patientId" />
    </selectparameters>
</asp:objectdatasource>
<asp:gridview id="GridView1" runat="server" autogeneratecolumns="False" backcolor="White"
    bordercolor="White" borderstyle="Ridge" borderwidth="2px" cellpadding="0" 
    gridlines="None" style="margin-right: 0px" width="695px" datakeynames="PatientInsuranceCardId"
    clientidmode="Predictable" viewstatemode="Enabled" datasourceid="ObjectDataSource2">
    <columns>
        <asp:boundfield datafield="PatientInsuranceCardId" headertext="PatientInsuranceCardId" sortexpression="PatientInsuranceCardId" visible="False"/>
        <asp:boundfield datafield="Company" headertext="Company" sortexpression="Company" />
        <asp:boundfield datafield="MemberId" headertext="Member ID" sortexpression="MemberId" />
        <asp:boundfield datafield="GroupNumber" headertext="Group ID" sortexpression="GroupNumber" />
        <asp:boundfield datafield="SubscriberId" headertext="Subscriber ID" sortexpression="SubscriberId" />
        <asp:boundfield datafield="DateLastModified" headertext="Last Modified" sortexpression="DateLastModified"  />
        <asp:templatefield headertext="Primary" sortexpression="IsPrimary">
            <itemtemplate>
                <asp:checkbox id="chkIsPrimary" runat="server" checked='<%# bool.Parse(Eval("IsPrimary").ToString() == "Y" ? "True": "False") %>'
                    enabled="true " />
            </itemtemplate>
        </asp:templatefield>
        <asp:templatefield headertext="Active" sortexpression="IsActive">
            <itemtemplate>
                <asp:checkbox id="chkIsActive" runat="server" checked='<%# bool.Parse(Eval("IsEnabled").ToString() == "Y" ? "True": "False") %>'
                    enabled="true " />
            </itemtemplate>
        </asp:templatefield> 
```

这是“提交”表单的客户端代码：

```
function loadAjaxContent(pageName, postType, arrayData) {
  <div id="pageContent_3" class="content">
        <div class="wrap2" style="clear: both; margin-top: 50px;">
            <div class="style9" style="clear: both; padding-right: 0px; padding-left: 0px; margin-top: 0px;">
                <input id="btnAddMore" type="button" value="Submit insurance" onclick="if(PageValidate()){ loadAjaxContent('InsuranceInformation','POST') };" />
                <input id="btnSkip" type="button" value="I don't have insurance (skip)" onclick="loadAjaxContent('EmergencyContacts','POST',null)" />
                <input type="hidden" id="isPCP" name="isPCP" value="0" runat="server" />
            </div>
        </div>
    </div>
    // Check for post type
    if (typeof postType == "undefined")
        postType = "GET";

    // If no data is passed -- serialize all input,select,textarea fields
    // do not pass the viewstate -- will cause errors
    if (typeof arrayData == "undefined")
        arrayData = $(":input:not(#__VIEWSTATE)").serializeArray();

    var targetPage = "../Ajax/" + pageName + ".aspx";

    // Show loading badge
    $content.hide();
    $loading.show();

    var ajaxRequest = $.ajax({
        url: targetPage,
        type: postType,
        data: arrayData,
        complete: function(result, status) {
            var response = $.trim(result.responseText);

            // Disable input fields before request is made
            $('input').removeAttr('disabled');

            // Show appropriate results
            if (status == "success") {
                $content.html(response);

                var hidingOptions = { times: 2 };
                var hidingCallback = function() {
                    $content.show();

                    if ($(".ContentPage:visible").length > 0) {
                        $(".ContentPage:visible > .inputfield").first().click();
                    } else {
                        $(".inputfield").first().click();
                    }
                };

                $loading.hide("pulsate", hidingOptions, 200, hidingCallback);
            }

            if (document.getElementsByTagName("input").length === 0) {
                $(":input").removeAttr("disabled");
            }
            ;
        },
        error: function() {
            $content.load("Ajax/PageNotFound.aspx", function() {
                $content.show();
                $loading.hide();

                $(":input").removeAttr("disabled");
            });
        }
    });
}

;
enter code here 
```

这是最不相关且无功能的服务器端代码：

```
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Collections;
using MPads.Common;
using MPads.WebPatientPortal.Interfaces;
using MPads.WebPatientPortal.Presenters;

namespace MPads.WebPatientPortal.Ajax
{
    public partial class InsuranceInformation : Page, IInsuranceInformation
    {
        private InsuranceInformationPresenter _presenter;

        protected void Page_Init(object sender, EventArgs e)
        {

            var dataKeys = new ArrayList();
            var dataIsPrimary = new ArrayList();
            var dataIsActive = new ArrayList();

            foreach (GridViewRow row in GridView1.Rows)
            {
                dataKeys.Add(GridView1.DataKeys[row.DataItemIndex].Value);
                dataIsPrimary.Add(((CheckBox)row.FindControl("chkIsPrimary")).Checked);
                dataIsActive.Add(((CheckBox)row.FindControl("chkIsActive")).Checked);

                System.Diagnostics.Trace.WriteLine("Page_init : Gridview1.rows = " + GridView1.Rows.Count);
            }

        }

        protected void Page_Load(object sender, EventArgs e)
        {

            var fields = Request.Form;

            System.Diagnostics.Trace.WriteLine("fields = "+fields);

            _presenter = new InsuranceInformationPresenter();
            _presenter.Init(this);
            // Get userId
            if (fields.Count > 0)
            {

                System.Diagnostics.Trace.WriteLine("Gridview1.rows = " + GridView1.Rows.Count);

                var insuranceName = Utilities.GetNvpValue(fields, "txtInsuranceName");
                var planName = Utilities.GetNvpValue(fields, "txtPlanName");
                var groupId = Utilities.GetNvpValue(fields, "txtGroupId");
                var memberId = Utilities.GetNvpValue(fields, "txtMemberId");
                var copayO = Utilities.GetNvpValue(fields, "txtCopayO");
                var copayS = Utilities.GetNvpValue(fields, "txtCopayS");
                var copayE = Utilities.GetNvpValue(fields, "txtCopayE");

                var deductible = Utilities.GetNvpValue(fields, "txtDeductible");
                var coinsurance = Utilities.GetNvpValue(fields, "txtCoinsurance");
                var memberSince = Utilities.GetNvpValue(fields, "txtMemberSince");
                var isPrimary = Utilities.GetNvpValue(fields, "btnInsuranceType");

                var dataKeys      = new ArrayList();
                var dataIsPrimary = new ArrayList();
                var dataIsActive  = new ArrayList();

                foreach (GridViewRow row in GridView1.Rows)
                {
                    dataKeys.Add(GridView1.DataKeys[row.DataItemIndex].Value);
                    dataIsPrimary.Add(((CheckBox) row.FindControl("chkIsPrimary")).Checked);
                    dataIsActive.Add(((CheckBox) row.FindControl("chkIsActive")).Checked);
                }

                _presenter.UpdatePatientInsuranceCard(dataKeys, dataIsPrimary, dataIsActive);

                _presenter.SavePatientInsuranceA(insuranceName, planName, groupId, memberId,
                    copayO, copayS, copayE, deductible, coinsurance, memberSince, isPrimary);

                //
            }
        }

        public int GetPageNum()
        {
            return (1);
        }

        public void DisplayErrorMessage(string message)
        {
            //errorMessageContainer.Visible = true;
            // errorMessageContainer.InnerText = message;
        }

        public void loadAjaxContent(string content)
        {
            Page.RegisterStartupScript("myScript", " <script type=\"text/javascript\"> loadAjaxContent(" + content + ",'POST',null); </script>");
        }

        public void SetInsuranceLabel(string text)
        {
        }

    }
} 
```

我对此有点不知所措，我会为这个问题的简明实用答案而杀戮。我考虑过使用 javascript 来获取复选框字段，然后在活动`DataKey`期间用适当的内容填充隐藏的文本框`onchecked`，但我不知道如何做到这一点（特别是因为 ID 被 asp.net 破坏了）。请帮忙 ：） ：（

# mysql - SQLAlchemy - 查询多个表并组合结果

> ID：11287250
> 
> 赞同：0
> 
> 时间：2012-07-02T02:33:10.090
> 
> 标签：mysql, join, sqlalchemy, flask-sqlalchemy

不再需要答案。

我的 MySQL 数据库中有两个表，如下所示：

```
**Child**
id
name
parent_id

**Parent**
id
name 
```

我想要做的是查询两个表，但返回唯一的结果（没有重复）。我希望在 Child.name 为 LIKE %query% 的地方搜索两个表并返回所有子元素，但我也想返回所有子元素Parent.name 是 LIKE %query% 的父级。我相信 JOIN 可能会起作用，但我不熟悉如何使用 JOIN。

这是一些示例数据和输出：

```
Child:
id          1
name        Jesse
parent_id   1

Child:
id          2
name        Walter Jr.
parent_id   1

Parent:
id          1
name        Skylar 
```

如果用户查询“Jesse”，它将返回一个结果 - Child，其中名称为 LIKE %Jesse%。如果用户查询“Skylar”，它将返回两个结果 - Child where parent_id = Parent.id WHERE Parent.name is LIKE %Skylar%，从而返回属于 Skylar 的两个 Child。

先感谢您！

**编辑：**还要注意，我有 Child backref'd to Parent。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:38:54.083

您可以使用[`UNION`](http://dev.mysql.com/doc/en/union.html)将来自一个查询（仅在子表上）的匹配项与来自第二个查询（在与子表[连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)的父表上）的匹配项组合起来：

```
SELECT id, name
FROM   Child
WHERE  name LIKE '%query%'

UNION

SELECT Child.id, Child.name
FROM   Parent JOIN Child ON Child.parent_id = Parent.id
WHERE  Parent.name LIKE '%query%' 
```

# c# - 单词集合的最佳数据结构是什么？

> ID：11287251
> 
> 赞同：2
> 
> 时间：2012-07-02T02:33:12.007
> 
> 标签：c#, .net, performance, collections

我收集了大约 170,000 个单词，并对它们执行了许多操作。最常见的是：[StartsWith](http://msdn.microsoft.com/en-us/library/system.string.startswith.aspx)、[EndsWith](http://msdn.microsoft.com/en-us/library/system.string.endswith.aspx)和[Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)。我也做了很多长度检查。

我最初将这些信息存储在 a 中，`List<string>`但后来切换到 a `HashSet<string>`，因为我认为这种类型的数据会更快。

根据我所描述的，HashSet 是该数据的最佳集合类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T03:14:18.773

[trie](http://en.wikipedia.org/wiki/Trie)是一种非常好的数据结构，用于存储字符串和执行所需的文本搜索操作。它是常用于索引字符串值的数据结构，用于搜索引擎，例如 Lucene

通常在提到时，trie 被描述为允许非常有效的“开始于”搜索的前缀树。数据结构的[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)变体在“结束于”搜索时非常有效。

可以想象，相同的 trie 实现可以用于前缀树和后缀树，只需在填充 trie 以及搜索 trie 时反转字符串即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T02:42:28.970

您提到的操作都是在集合的*各个元素*上完成的，因此他们完全不知道您的元素实际上来自什么类型的集合。

集合类型要考虑的重要事项是您以何种方式处理整个集合：您是插入很多项目还是经常删除它们？您想按顺序获取每个元素，还是想更频繁地访问集合的特定部分。集合可以有重复的元素吗？您需要检查会员资格吗？你处理它们的顺序有关系吗？

这些是您需要回答的问题类型，以便对不同的馆藏类型做出明智的决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T03:17:14.410

我假设您正在尝试查找匹配 which`StartsWith`或`EndWith`某些`Contains`搜索词。如果是这种情况，那么您是正确的，因为这`List`并不理想。我不相信`Hashset`会更好。

检查[特里](http://en.wikipedia.org/wiki/Trie)。我不会建立一个，但如果给出有关问题空间的一些上下文。该算法涉及按单词的初始子字符串对单词进行分组——根据单词的第一个字母对单词进行分组，然后按第二个字母对单词进行分组，依此类推。

当我过去这样做时，我既使用了[Lookup](http://msdn.microsoft.com/en-us/library/bb460184.aspx)类，也实现了`Dictionary<string, List<string>>`.

我使用的算法大致是

```
var dictionary = new Dictionary<int, Lookup<string, string>>();
for (int i = 1; i < maxWordLength; i++)
{
    // get all words with i or more letters
    dictionary.Add(i, words.ToLookup(w => w.Substring(i)));
} 
```

然后找到一个像这样的词

```
var word = "TestWord";
var matches = dictionary[word.Length][word]; 
```

如果您还需要`EndsWith`并且`Contains`您可能也需要一些索引结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T03:42:28.700

这听起来像是[Lucene](http://lucene.apache.org/core/)的工作。但是，如果您决定实现自己的算法（无论是什么算法），那么最好的办法是利用 C# 在 Parallel.ForEach 和 PLINQ 中强大的并行循环结构。

[数据并行（任务并行库）](http://msdn.microsoft.com/en-us/library/dd537608)

[并行 LINQ (PLINQ)](http://msdn.microsoft.com/en-us/library/dd460688.aspx)

IE

```
var source = Enumerable.Range(100, 20000);

// Result sequence might be out of order.
var parallelQuery = from num in source.AsParallel()
                    where num % 10 == 0
                    select num; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T02:48:30.503

最好的可能是字符串数组，因为如果列表是静态的，它的开销最低。

然后使用多个线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T17:31:09.093

跑了一个测试，并没有得到我期望的答案。List 和 HashSet 和 AsParallel 差不多（但只有 2 核机）。.NET 4.0 和 600,000 个单词的列表。

我回应第一条评论。当有疑问时测试。l 是List，h是HashSet。

```
Debug.WriteLine("lWords.Count hWords.Count " + lWords.Count.ToString() + " " + hWords.Count.ToString());
Stopwatch SW = new Stopwatch();
SW.Restart();
Debug.WriteLine("H count " + hWords.Where(value => value.StartsWith("s")).Count().ToString());
SW.Stop();
Debug.WriteLine("H time " + SW.ElapsedMilliseconds.ToString());
SW.Restart();
SW.Stop();
Debug.WriteLine("Start Stop " + SW.ElapsedMilliseconds.ToString());
SW.Restart();
Debug.WriteLine("L count " + lWords.Where(value => value.StartsWith("s")).Count().ToString());
SW.Stop();
Debug.WriteLine("L time " + SW.ElapsedMilliseconds.ToString());
SW.Restart();
Debug.WriteLine("H count " + hWords.Where(value => value.StartsWith("s")).Count().ToString());
SW.Stop();
Debug.WriteLine("H time " + SW.ElapsedMilliseconds.ToString());
SW.Restart();
Debug.WriteLine("L count " + lWords.AsParallel().Where(value => value.StartsWith("s")).Count().ToString());
SW.Stop();
Debug.WriteLine("L time parallel " + SW.ElapsedMilliseconds.ToString());
SW.Restart();
Debug.WriteLine("H count " + hWords.AsParallel().Where(value => value.StartsWith("s")).Count().ToString());
SW.Stop();
Debug.WriteLine("H time parallel " + SW.ElapsedMilliseconds.ToString());
Debug.WriteLine("");

output:
lWords.Count hWords.Count 667309 667309
H count 45851
H time 283
Start Stop 0
L count 45851
L time 285
H count 45851
H time 364
L count 45851
L time parallel 307
H count 45851
H time parallel 344 
```

# c# - 对于 IF 循环无法正常工作

> ID：11287252
> 
> 赞同：-2
> 
> 时间：2012-07-02T02:34:21.357
> 
> 标签：c#, asp.net, ado.net, checkboxlist

我正在尝试使用 for-if 循环来运行几个 CheckBoxList 控件，以查看是否选中了复选框。如果选中，它将向数据库运行 INSERT 语句。

我的第一个 CheckBoxList (stapleCheckBoxList) 可以正常工作（例如，如果我选择了所有 4 个复选框，则相应的项目将被插入到数据库中）。但是，对于我的第二个 CheckBoxList (seafoodCheckBoxList)，它似乎只在第一个选中的复选框上执行 INSERT。谁能找出我下面的代码有什么问题？

```
protected void btnTSubmit_Click(object sender, EventArgs e)
    {
        int i;
        int intOrderNo = (int)Session["sOrderNo"];
        int Qty;
        int UnitPrice;
        string ProdId;

        if (txtPaxQty.Text != String.Empty)
        {
            UnitPrice = 12;
            Qty = int.Parse(txtPaxQty.Text);
            ProdId = "PK001";

            OleDbConnection DBconn2 = new OleDbConnection();
            DBconn2.ConnectionString = "Provider = Microsoft.Jet.OLEDB.4.0;Data source="
                        + Server.MapPath("~/App_Data/ParissDB.mdb");
            OleDbCommand cmd = new OleDbCommand();
            cmd.Connection = DBconn2;
            cmd.CommandType = System.Data.CommandType.Text;
            cmd.CommandText = "INSERT INTO itemsTable(iOrderNo, iProductId, iQty, iUnitPrice)"
            + "VALUES (@OrderNo, @ProductId, @Qty, @UnitPrice)";
            cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
            cmd.Parameters.AddWithValue("@ProductId", ProdId);
            cmd.Parameters.AddWithValue("@Qty", Qty);
            cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
            DBconn2.Open();
            cmd.ExecuteNonQuery();
            DBconn2.Close();
        }

        for (i = 0; i < stapleCheckBoxList.Items.Count; i++)
        {
            String str = "";

            if (stapleCheckBoxList.Items[i].Selected)
            {

                str = stapleCheckBoxList.Items[i].Text;

                OleDbConnection DBconn = new OleDbConnection();
                DBconn.ConnectionString = "Provider = Microsoft.Jet.OLEDB.4.0;Data source="
                            + Server.MapPath("~/App_Data/ParissDB.mdb");

                Qty = 0;
                UnitPrice = 0;

                OleDbCommand cmd = new OleDbCommand();
                cmd.Connection = DBconn;
                cmd.CommandType = System.Data.CommandType.Text;
                cmd.CommandText = "INSERT INTO itemsTable(iOrderNo, iProductId, iQty, iUnitPrice)"
                + "VALUES (@OrderNo, @ProductId, @Qty, @UnitPrice)";

                //Staple

                if (stapleCheckBoxList.Items[i].Text == "Yang Chow Fried Rice")
                {
                    str = "ST001";
                    cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
                    cmd.Parameters.AddWithValue("@ProductId", str);
                    cmd.Parameters.AddWithValue("@Qty", Qty);
                    cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
                    DBconn.Open();
                    cmd.ExecuteNonQuery();
                    DBconn.Close();
                }

                if (stapleCheckBoxList.Items[i].Text == "Pineapple Fried Rice")
                {
                    str = "ST002";
                    cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
                    cmd.Parameters.AddWithValue("@ProductId", str);
                    cmd.Parameters.AddWithValue("@Qty", Qty);
                    cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
                    DBconn.Open();
                    cmd.ExecuteNonQuery();
                    DBconn.Close();
                }

                if (stapleCheckBoxList.Items[i].Text == "Mee Goreng")
                {
                    str = "ST003";
                    cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
                    cmd.Parameters.AddWithValue("@ProductId", str);
                    cmd.Parameters.AddWithValue("@Qty", Qty);
                    cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
                    DBconn.Open();
                    cmd.ExecuteNonQuery();
                    DBconn.Close();
                }

                if (stapleCheckBoxList.Items[i].Text == "Fried Udon with Seafood")
                {
                    str = "ST004";
                    cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
                    cmd.Parameters.AddWithValue("@ProductId", str);
                    cmd.Parameters.AddWithValue("@Qty", Qty);
                    cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
                    DBconn.Open();
                    cmd.ExecuteNonQuery();
                    DBconn.Close();
                }

                //Response.Redirect("Delivery.aspx");
            }
        }

        for (i = 0; i < seafoodCheckBoxList.Items.Count; i++)
        {
            String str2 = "";

            if (seafoodCheckBoxList.Items[i].Selected)
            {

                str2 = seafoodCheckBoxList.Items[i].Text;

                OleDbConnection DBconn = new OleDbConnection();
                DBconn.ConnectionString = "Provider = Microsoft.Jet.OLEDB.4.0;Data source="
                            + Server.MapPath("~/App_Data/ParissDB.mdb");

                Qty = 0;
                UnitPrice = 0;

                OleDbCommand cmd = new OleDbCommand();
                cmd.Connection = DBconn;
                cmd.CommandType = System.Data.CommandType.Text;
                cmd.CommandText = "INSERT INTO itemsTable(iOrderNo, iProductId, iQty, iUnitPrice)"
                + "VALUES (@OrderNo, @ProductId, @Qty, @UnitPrice)";

                //Seafood

                if (seafoodCheckBoxList.Items[i].Text == "Butter Prawns")
                {
                    str2 = "SE002";
                    cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
                    cmd.Parameters.AddWithValue("@ProductId", str2);
                    cmd.Parameters.AddWithValue("@Qty", Qty);
                    cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
                    DBconn.Open();
                    cmd.ExecuteNonQuery();
                    DBconn.Close();
                }

                if (seafoodCheckBoxList.Items[i].Text == "Cereal Prawns")
                {
                    str2 = "SE001";
                    cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
                    cmd.Parameters.AddWithValue("@ProductId", str2);
                    cmd.Parameters.AddWithValue("@Qty", Qty);
                    cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
                    DBconn.Open();
                    cmd.ExecuteNonQuery();
                    DBconn.Close();
                }

                if (seafoodCheckBoxList.Items[i].Text == "Thai Style Prawns")
                {
                    str2 = "SE003";
                    cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
                    cmd.Parameters.AddWithValue("@ProductId", str2);
                    cmd.Parameters.AddWithValue("@Qty", Qty);
                    cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
                    DBconn.Open();
                    cmd.ExecuteNonQuery();
                    DBconn.Close();
                }

                if (seafoodCheckBoxList.Items[i].Text == "BBQ Squid")
                {
                    str2 = "SE004";
                    cmd.Parameters.AddWithValue("@OrderNo", intOrderNo);
                    cmd.Parameters.AddWithValue("@ProductId", str2);
                    cmd.Parameters.AddWithValue("@Qty", Qty);
                    cmd.Parameters.AddWithValue("@UnitPrice", UnitPrice);
                    DBconn.Open();
                    cmd.ExecuteNonQuery();
                    DBconn.Close();
                }

                Response.Redirect("Delivery.aspx");
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:53:45.077

线

```
Response.Redirect("Delivery.aspx"); 
```

在你的`for`循环内。所以当它第一次通过循环时，你已经被重定向了。只需将重定向移动到`for`循环之后。

你应该认真考虑重构你的代码。有太多重复的东西可以转换成方法等等。

# c++ - 在 C++ 中使用迭代器加速并行 std::vector 计算

> ID：11287253
> 
> 赞同：2
> 
> 时间：2012-07-02T02:34:30.653
> 
> 标签：c++, performance, iterator, stdvector

我有一个小函数，它基于对基于`std::vector`实例`l,t,d,n`where `l,t,d,n`are all计算的参数列表进行元素数学运算来计算参数`std::vector<double>`。这是我的程序速度的关键点 - 我已经分析过，我敢肯定。

这是一个使用`[]`运算符的工作片段。我在 Core i7、8GB RAM、Windows 7 上使用 Visual C++ 2008 Express 中的 C++ 进行开发，在发布模式下进行了`/O2`优化。最终，这将使用 SWIG 编译为 Python 扩展，但我们不要超前。

我还使用 C 数组编写了一个解决方案（见下文）（我以前在 C 中使用的解决方案，但我已经转向 C++ 中的面向对象解决方案，这需要（对于我的应用程序）使用`std::vector`s以避免内存泄漏。）

所有三种解决方案都在下面。我在 SO 和其他地方听过很多关于`std::vector`迭代器解决方案应该如何（总是？？）与数组一样快的讨论，但我的结果表明 100 万次调用需要以下时间：

*   `std::vector`带`[]`操作员：2.53 秒
*   `std::vector`带迭代器：2.69 秒
*   C 阵列：0.58 秒

很明显，阵列解决方案要快得多。我对 std::vector 解决方案的编码是否遗漏了一些明显的东西？

## 编辑

所以看来我的部分问题在于分析。优化优化了我的大部分 c-array 代码，这就是为什么它比任何 std::vector 选项都快得多。我认为我从根本上受到执行所有 exp() 和 pow() 调用的吞吐量的限制。谢谢大家的所有建议，我认为对于我的应用程序，我只是在与处理器速度作斗争。我想 19*6 的 pow 调用大约需要 2 微秒，归根结底*并不是*那么糟糕。但这对我来说仍然太慢了。 *这就是生活...*

# `std::vector<double>`使用带`[]`运算符的索引

```
double phir_power::base(double tau, double delta) throw()
{
    double summer=0;
    for (unsigned int i=iStart;i<=iEnd;i++)
    {
        if (l[i]>0)
            summer+=n[i]*pow(delta,d[i])*pow(tau,t[i])*exp(-pow(delta,l[i]));
        else
            summer+=n[i]*pow(delta,d[i])*pow(tau,t[i]);
    }
    return summer;
} 
```

# `std::vector<double>`带迭代器

```
std::vector<double>::const_iterator n_begin=n.begin(), n_end = n.end(), n_iter = n_begin;
std::vector<double>::const_iterator d_begin=d.begin(), d_end = d.end(), d_iter = d_begin;
std::vector<double>::const_iterator t_begin=t.begin(), t_end = t.end(), t_iter = t_begin;
std::vector<double>::const_iterator l_begin=l.begin(), l_end = l.end(), l_iter = l_begin;

for (unsigned int uuu=0;uuu<1e6;uuu+=1)
{
    double summer=0;
    //Bring the iterators back to the first element
    l_iter = l_begin;
    d_iter = d_begin;
    t_iter = t_begin;
    n_iter = n_begin;
    for (; l_iter != l_end; ++l_iter,++t_iter,++d_iter,++n_iter)
    {
        if ((*l_iter)>0)
            summer+=(*n_iter)*pow(delta,(*d_iter))*pow(tau,(*t_iter))*exp(-pow(delta,(*l_iter)));
        else
            summer+=(*n_iter)*pow(delta,(*d_iter))*pow(tau,(*t_iter));
    }
    rrrrrrrr += summer;
}
t2 = clock();
printf("Time for 1 million calls  %g [s] val %g \n",((double)(t2-t1))/CLOCKS_PER_SEC,rrrrrrrr); 
```

# C阵列

```
double r=0;
t0 = clock();
unsigned int qwe;
double ttte = 0;
double term_;
for (unsigned int j=1;j<19;j++)
{
    t1=clock();
    r=0;
    for (unsigned int i=0; i<1e6; i++)
    {
        term_ = n[j]*pow(delta,d[j])*pow(tau,t[j]);
        if (l[j]>0)
            term_ *= exp(-pow(delta,l[j]));
        r+=term_;
    }
    ttte+=r/1e6;
    t2=clock();
    printf("Index %d time %g [s] val %g\n",j,((double)(t2-t1))/CLOCKS_PER_SEC,r/1e6);
}
t3=clock();
printf("Time for 1 million calls %g [s] val is %g\n",((double)(t3-t0))/CLOCKS_PER_SEC,ttte); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:16:46.373

不同之处在于，在您提供的 C 代码中，您在一个小循环中有一个大循环，其中没有任何变化，只是做了一百万次。在带有迭代器的代码中，大循环中有一个小循环，这意味着它必须一直更改迭代器。这可能会花费额外的时间。我不确定这一点，但如果你可以测试它：试试看！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:28:20.700

基于迭代器的代码的问题在于，您需要四个迭代器来针对 operator[] 版本中的一个索引 i，因为您有四个包含一个双精度的向量。维护四个迭代器的成本很高。使用包含四个双精度的结构的单个向量，您将获得更好的迭代器性能。实际上，operator[] 版本可能会更快，因为指针计算更少，数据的局部性更好，这应该会提高 CPU 的吞吐量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T02:48:23.427

`std::vector`保证分配为一个连续的内存块，因此`[]`如果您不想使用它，则不必使用它的运算符。

```
double phir_power::base(double tau, double delta) throw()
{
    double summer=0;

    double *pl = &l[0];
    double *pn = &n[0];
    double *pd = &d[0];
    double *pt = &t[0];

    for (unsigned int i = iStart; i <= iEnd; i++)
    {
        if (pl[i] > 0)
            summer += pn[i] * pow(delta, pd[i]) * pow(tau, pt[i]) * exp(-pow(delta, pl[i]));
        else
            summer += pn[i] * pow(delta, pd[i]) * pow(tau, pt[i]);
    }
    return summer;
} 
```

# php - 从 android 到 PHP 的 POST 请求

> ID：11287256
> 
> 赞同：0
> 
> 时间：2012-07-02T02:34:50.417
> 
> 标签：php, android, cakephp, http-post, mojibake

我想使用以下代码将 POST 请求从 android 发送到 utf-8 中的 PHP 应用程序：

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair(Site.SQL_QUERY, "just a test 東京"));

UrlEncodedFormEntity urlEncodedFormEntity = new UrlEncodedFormEntity(params);
urlEncodedFormEntity.setContentEncoding(HTTP.UTF_8);
httppost.setEntity(urlEncodedFormEntity);

HttpResponse response = httpclient.execute(httppost);
BufferedReader reader = new BufferedReader(new inputStreamReader(response.getEntity().getContent(), HTTP.UTF_8));
String result = reader.readLine(); 
```

我将编码设置为UTF-8，但字符串中包含的日文字符无法正常显示。

这是我的 PHP 代码（cakePHP）。我只是转储参数。

```
function sqlQuery(){
   var_dump($this->params['form']['sql_query']);exit;
} 
```

它会显示类似“只是一个测试□□”的内容

我也试过

```
mb_convert_encoding ($this->params['form']['sql_query'],"UTF-8") 
```

但问题依旧...

有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:24:33.517

这一直是从 Android 发送 UTF-8 数据的问题。您的代码可以正常工作，只是您必须将您的代码编码`String`为 `Base64`. 在服务器 PHP 中，您只需将`Base64`String 解码回来。它对我有用。如果您需要代码，我可以分享。

# php - 停止空表单提交 PHP

> ID：11287257
> 
> 赞同：0
> 
> 时间：2012-07-02T02:35:28.470
> 
> 标签：php, forms, validation

我一直在尝试实施服务器验证以防止在我的联系我们页面中出现空白电子邮件，但我不确定如何在 PHP 中执行此操作，这是我的代码：

```
<?php
$field_name = $_POST['cf_name'];
$field_email = $_POST['cf_email'];
$field_tel = $_POST['cf_tel'];
$field_message = $_POST['cf_message'];

$mail_to = 'test@test.com, test@test.com, test@test.com';
$subject = 'Just iStuff Mobile Contact Us: '.$field_name;

$body_message = 'From: '.$field_name."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Telephone Number: '.$field_tel."\n";
$body_message .= 'Message: '.$field_message;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for your email, we have received your message and will reply within the next few days.');
        window.location = 'contactus.html';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed, please try again or email test@test.com');
        window.location = 'contactus.html';
    </script>
<?php
}
?> 
```

任何人都可以帮我做到这一点，在线教程不包括这种方式......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T02:37:30.933

只需测试变量的“空虚”并提前退出。像这样的东西：

```
if(empty($field_email)) {
    // maybe show the user a reason why this was rejected...
    return;
} 
```

您可能希望对几乎所有输入字段执行此操作。

此外，您可以使用 JavaScript（jQuery 有一些不错的插件）首先防止用户提交无效数据。这不会消除在服务器端执行此操作的需要（因为他们可以禁用 JS，或者恶意的人可能会故意绕过此措施），但它可以使其成为更友好的用户体验。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T03:37:16.367

在你的 $mail_to..

您可以先在服务器端验证 _POST/_GET。

```
<?php
if (empty($field_name) && empty($field_email) && empty($field_tel) && empty($field_message)) {
    echo 'Please correct the fields';
    return false;
}
?> 
```

或者，您可以先在客户端进行验证。它将节省您的时间和资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T02:50:18.693

您可以为此使用过滤器；由于您使用传递的电子邮件地址作为`mail()`操作的一部分，因此最好也验证：

```
$fields = filter_input_array(INPUT_POST, array(
    'name' => FILTER_UNSAFE_RAW,
    'email' => FILTER_VALIDATE_EMAIL,
    'tel' => FILTER_UNSAFE_RAW,
    'message' => FILTER_UNSAFE_RAW,
));

// check for missing fields
if (null === $fields || in_array(null, $fields, true)) {
  // some or all fields missing
} elseif (in_array(false, $fields, true)) {
  // some or all fields failed validation
} else {
  // all fields passed validation
  // use $fields['email'] as the email address
} 
```

我已经使用`FILTER_UNSAFE_RAW`了除电子邮件以外的所有字段，但也许有更好的过滤器适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T06:46:00.983

尝试在`<input type="submit" name="sub" value="Submited">`单击时将提交输入放入表单中。

```
<?php

if (isset($_POST['sub']) {
  $field_name = $_POST['cf_name'];
  $field_email = $_POST['cf_email'];
  $field_tel = $_POST['cf_tel'];
  $field_message = $_POST['cf_message'];
  if (empty($field_name) && ....)
  {
     exit('Field name is empty');
  }
  ..... 
```

# android - 来自 Gridview 的 Android 意图共享

> ID：11287258
> 
> 赞同：0
> 
> 时间：2012-07-02T02:35:29.967
> 
> 标签：android, gridview, android-intent, share

创建一个应用程序，我将一堆照片存储在可绘制文件夹中，当用户长按照片显示菜单时，其中一个选项是共享。我可以打开上下文菜单，但不知道如何共享从网格菜单。

我也有扩展它在自己的视图中显示单个图像并可以从那里共享。

**但是当用户从 gridview 中选择图像时，我不知道如何共享该图像。**

这是我在用户选择共享选项时调用的方法

```
public Intent intentShare() {    
        Intent share = new Intent(Intent.ACTION_SEND);
        share.setType("image/jpeg");
        share.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://your.package.here/drawable/"+share.putExtra("id", lastPosition)));
        startActivity(Intent.createChooser(share, "Share Image"));
        return share;
} 
```

我在其他几个问题上看到了这个可能的选项/解决方案

```
Bitmap icon = mBitmap;
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("image/jpeg");
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
icon.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
File f = new File(Environment.getExternalStorageDirectory() + File.separator + "temporary_file.jpg");
try {
    f.createNewFile();
    FileOutputStream fo = new FileOutputStream(f);
    fo.write(bytes.toByteArray());
} catch (IOException e) {                       
        e.printStackTrace();
}
share.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/temporary_file.jpg"));
startActivity(Intent.createChooser(share, "Share Image")); 
```

但我不知道如何初始化 mBitmap 是否可行？

完整的代码可以在这里找到：http: [//pastie.org/private/gdpyn2t55h0gp1vp1kika](http://pastie.org/private/gdpyn2t55h0gp1vp1kika)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:08:35.053

You can convert the `Bitmap` from resource using code like this:

```
Bitmap mBitmap = BitmapFactory.decodeResource(getResources(), mThumbIds[lastPosition]); 
```

now you can share it as you share in Expanded view.

# objective-c - ios - 更新核心数据几乎就在那里

> ID：11287259
> 
> 赞同：0
> 
> 时间：2012-07-02T02:35:46.857
> 
> 标签：objective-c, ios, core-data

我一直在关注这个问题的答案：[如何更新核心数据中的现有对象？](https://stackoverflow.com/q/10571786/892628)

在答案中，它遇到了这行代码来更新数组中的记录：

```
Favorits* favoritsGrabbed = [results objectAtIndex:0]; 
```

现在，无论我选择编辑哪个单元格，这都会更新数据库中设置的记录 0。

很抱歉，但我无法弄清楚如何将其更改为更新我选择的单元格。开始在这里长出白发:-)

问题（也许是我的心态）是我需要给出一个整数，但我无法找到替代它的东西。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:39:41.367

嗯……你试过了`Favorits* favoritsGrabbed = [results objectAtIndex:indexPath.row]`吗？

* * *

您需要将 favouritsGrabbed 从表视图控制器传递到详细视图控制器。

在详细视图控制器中创建一个名为 favouritsGrabbed 的属性，然后在表视图控制器的`-prepareForSegue:sender:`set favouritsGrabbed 中创建一个属性。

发送者`-prepareForSegue:sender:`应该是一个表格视图单元格。因此，从表视图控制器中`-prepareForSegue:sender:`，您应该能够执行以下操作：

```
NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
FavoritsDetailViewController *dest = segue.destination;
dest.favoritsGrabbed = [results objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:10:02.160

我假设您的意思是表格视图单元格？您是否将表格连接到 IBOutlet，您可以在其中通过 tableView 引用选定的单元格`indexPathForSelectedRow`？我们可以看到一些代码吗？

# vb.net - 在VB.net中，在超类中隐藏方法的子类是否仍然遵守超类遵守的接口？

> ID：11287261
> 
> 赞同：1
> 
> 时间：2012-07-02T02:36:24.310
> 
> 标签：vb.net, oop, inheritance, polymorphism

好的，所以我有一个类似这样的场景。首先，我有一个接口，我称它为Iinterface，接口中有一个方法（我称它为方法）。现在我有一个实现接口的超类和一个实现接口中方法的方法。有一个从超类继承的子类，但是在子类中，最初实现该方法的超类中的方法已被具有相同名称和签名的不同方法所覆盖。

在这种情况下，子类还会实现接口吗？

具体来说，这行得通吗？

```
Dim stuff as Iinterface
stuff = new SuperClass
'do some things
stuff = new SubClass 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:25:31.657

是的，原来的 SuperClass 方法仍然会实现接口，但是使用原来的 Superclass 方法。如果签名相同，则使用覆盖而不是阴影。如果它没有相同的签名，则无论如何您都无法实现该接口。

```
Module Module1

  Sub Main()
    Dim myiTest As IMyInterface
    myiTest = New MySuperClass
    myiTest.MyMethod(1, "a")
    myiTest = New MySubClass
    myiTest.MyMethod(1, "a")
    myiTest = New MySubClass2
    myiTest.MyMethod(1, "a")
  End Sub

  Interface IMyInterface
    Sub MyMethod(a As Integer, b As String)
  End Interface

  Class MySuperClass
    Implements IMyInterface

    Public Overridable Sub MyMethod(a As Integer, b As String) Implements IMyInterface.MyMethod
      MsgBox("Original MyMethod")
    End Sub
  End Class

  Class MySubClass
    Inherits MySuperClass
    Public Shadows Sub MyMethod(a As Integer, b As String)
      MsgBox("Shadowed MyMethod")
    End Sub
  End Class

  Class MySubClass2
    Inherits MySuperClass
    Public Overrides Sub MyMethod(a As Integer, b As String)
       MsgBox("Overridden MyMethod")
    End Sub
  End Class
End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:57:08.913

如果您不介意编译器警告，您*可以*有一个`Shadows`方法（再次）显式地实现接口。

```
Class MySubClass3
    Inherits MySuperClass
    Implements IMyInterface
    Public Shadows Sub MyMethod(ByVal a As Integer, ByVal b As String) Implements IMyInterface.MyMethod
        MsgBox("Shadowed re-Implemented MyMethod")
    End Sub
End Class 
```

即使提供了警告，这仍然是`Shadows`编译的方法（所以

```
 Dim mysTest As MySuperClass = New MySubClass3
    mysTest.MyMethod(1, "a") 
```

仍显示“原始 MyMethod”）。正如[Microsoft](http://msdn.microsoft.com/en-us/library/dwwt4s94.aspx "警告 BC42015")对此警告的描述所解释的那样，当您*确实*打算重新实现该方法时，必须忽略或明确禁用该警告。

# php - 检查文件上传字段是否为空后如何替换提交按钮？

> ID：11287265
> 
> 赞同：1
> 
> 时间：2012-07-02T02:39:03.527
> 
> 标签：php, jquery, file-upload

我有一个文件上传表单：

```
<form method="post" enctype="multipart/form-data">
  <input type="file" name="image_1" /> 
  <input type="submit" name="upload_photo" id="upload_photo" />
</form> 
```

我有一个上传文件的 php 脚本，但我注意到每当我上传较大的文件时，提交表单和重新加载页面可能需要 10 秒。用户单击提交后，我希望将提交按钮替换为一条消息。我已经编写了一些 jQuery 来完成这项工作：

```
$("#upload_photo").click(function() {                       
  $("#upload_photo").replaceWith('<p>Image is uploading. Please wait...</p>');                      
}); 
```

这替换了提交按钮就好了，但问题是即使文件上传字段为空，它也会替换提交按钮。因此，在用户点击提交按钮后，我需要检查字段上传字段是否有值，如果有则将按钮替换为消息。我在这里尝试过：

```
if($_FILES['image_1']['tmp_name'] != '') {
  $image_uploaded = true;
}

if($image_uploaded == true) { //If a file has been uploaded
  echo '<script type="text/javascript">
      $("#upload_photo").replaceWith("<p>The image is uploading. Please wait...</p>");
        </script>
  ';
} 
```

不幸的是，这不起作用，文件上传而不替换提交按钮。我尝试用警报替换 .replaceWith 行，但表单会上传图像，重新加载页面，然后显示警报，但为时已晚。

检查文件上传字段是否为空后如何替换提交按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T02:48:38.263

只需检查文件输入字段中是否有值

```
if ($("[name=image_1]").val()){
    $("#upload_photo").replaceWith('<p>Image is uploading. Please wait...</p>'); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:04:12.540

我经常这样做：

1）禁用提交按钮

```
$(this).attr('disabled', 'disabled') 
```

和 2) 更改提交按钮上的文本。

```
$(this).attr('value', 'Please wait ...') 
```

这是一个jsfiddle。

[http://jsfiddle.net/Vqyc6/8/](http://jsfiddle.net/Vqyc6/8/)

# ruby - “dyld：库未加载”，“libruby.1.9.1.dylib”调用“mvim”时。在命令行中

> ID：11287274
> 
> 赞同：8
> 
> 时间：2012-07-02T02:42:02.923
> 
> 标签：ruby, shell, vim, rvm, macvim

我正在尝试使用“mvim”将我的 rails 项目打开到 mvim (macvim) 中。但我收到以下错误。

```
➜  cs193p git:(master) mvim .
dyld: Library not loaded: /Users/myusername/.rvm/rubies/ruby-1.9.3-p125/lib/libruby.1.9.1.dylib
  Referenced from: /usr/local/Cellar/macvim/7.3-64/MacVim.app/Contents/MacOS/Vim
  Reason: image not found
[1]    85219 trace trap  mvim .
➜  cs193p git:(master) mvim --version
dyld: Library not loaded: /Users/myusername/.rvm/rubies/ruby-1.9.3-p125/lib/libruby.1.9.1.dylib
  Referenced from: /usr/local/Cellar/macvim/7.3-64/MacVim.app/Contents/MacOS/Vim
  Reason: image not found 
```

我最近删除了 RVM（“rvm implode”，其中包括 ruby​​ 1.9.3-p125）并重新安装了 1.9.3-p194。我需要做什么来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T17:58:58.280

brew 将针对您当前活动的 ruby​​ 编译 MacVim，这可能是 1.9.3-p125。`rvm use 1.9.3-p194 --default && brew uninstall macvim && brew install macvim`可能是您解决问题的最佳选择。

# java - 创建一个 Shell 脚本来执行一个 Jar（它执行一个 sudo 命令）

> ID：11287276
> 
> 赞同：1
> 
> 时间：2012-07-02T02:42:18.200
> 
> 标签：java, linux, shell, ubuntu

所以我写了一个Java程序来改变一台机器的IP。

```
public static void main(String[] args) {
    superUserChangeIp(args);
}

public static void superUserChangeIp(String[] args) {
    try {

        String ethInterface = args[0].toString().trim();
        String ip = args[1].toString().trim();

        System.out.println(ethInterface + " " + ip);

        String[] command = {
                "/bin/sh",
                "ifconfig " + ethInterface + " " + ip };

        Process child = Runtime.getRuntime().exec(command);

        changeNetworkInterface(ethInterface, ip);

        readOutput(child);

        child.destroy();

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我做了一个简单的 sh 脚本：

```
#!/bin/sh
sudo java -jar changeip.jar $1 $2 
```

我得到：`/bin/sh: 0: Can't open sudo ifconfig eth0 192.168.217.128`试图运行`sh ipconfig.sh eth0 192.168.217.128`

任何人都可以指出我正确的方向吗？

**注意：**该方法`changeNetworkInterface(ethInterface, ip);`只是更新中找到的设置`/etc/network/interfaces`，代码如下：

```
protected static void changeNetworkInterface(String ethInterface, String ip) throws IOException {
    String oldInterface = File.readFile(NETWORK_INTERFACES_PATH);
    StringBuilder builder = new StringBuilder();
    Scanner reader = new Scanner(oldInterface);

    boolean startReplacing = false;

    while (reader.hasNextLine()) {
        String currentLine = reader.nextLine();

        if (currentLine.contains("iface " + ethInterface)) {
            System.out.println("Found interface!");
            startReplacing = true;
        }

        if (startReplacing && currentLine.contains("address")) {
            System.out.println("Found IP!");
            currentLine = "address " + ip;
            startReplacing = false;
        }

        builder.append(currentLine);
        builder.append("\n");
    }

    System.out.println(builder.toString());

    File.writeToFile(NETWORK_INTERFACES_PATH, builder.toString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:46:15.980

如果您按照描述运行 JAR，则应用程序将具有超级用户权限，因此您根本不需要在应用程序内运行 sudo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:03:07.747

真对不起; 我刚刚添加`-c`

```
String[] command = {
                "/bin/sh",
                "-c", // <--- this bugger right here
                "ifconfig " + ethInterface + " " + ip }; 
```

现在它可以工作了。谢谢大家。

# templates - C++模板类继承检查

> ID：11287279
> 
> 赞同：0
> 
> 时间：2012-07-02T02:43:20.910
> 
> 标签：templates, inheritance, enable-if

我整天都被这个问题难住了。基本上我想检查以确认模板类型继承自一个适用于我正在做的事情的类。为此，我使用了 std::enable_if，并且我有一些东西在编译时按我想要的方式工作，但是当我尝试对类实际执行某些操作时，我不断收到类似未定义的引用错误。

```
class TrainingCompare
{
public:
    virtual bool operator() (PUnitType& lhs, PUnitType& rhs)=0;
};

// The following Magic will result in a type error if T does not inherit from TrainingCompare
template<class T, class Enable = void>
class TrainAction;

template <class T>
class TrainAction<T,
    typename std::enable_if< std::is_base_of< TrainingCompare, T >::value>::type>
    : public BasicAction
{
    priority_queue<UnitType, vector<PUnitType>, T> trainQueue;
public:
    TrainAction();
    void addUnitRequest(UnitType uType, int priority = 0);
}; 
```

让源文件编译是一个挑战，但我想出的东西看起来完全是废话，所以我做了一个宏来缩小代码。

```
#include "TrainAction.h"

#define Magic(rtype) template <class T>\
    rtype TrainAction<T, typename std::enable_if< std::is_base_of< TrainingCompare, T >::value>::type>

template<class T>
TrainAction<T, typename std::enable_if< std::is_base_of< TrainingCompare, T >::value>::type>::TrainAction()
{
    group = NULL;
}

Magic(void)::addUnitRequest(UnitType uType, int priority = 0)
{
    trainQueue.push(PUnitType(UnitType));
} 
```

我感觉我的宏是错误的，但我的标题是正确的，但这只是一种预感。提前致谢。

```
1>ExampleAIModule.obj : error LNK2001: unresolved external symbol "public: void __thiscall TrainAction<class TrainComp,void>::addUnitRequest(class BWAPI::UnitType,int)" (?addUnitRequest@?$TrainAction@VTrainComp@@X@@QAEXVUnitType@BWAPI@@H@Z)
1>ExampleAIModule.obj : error LNK2001: unresolved external symbol "public: __thiscall TrainAction<class TrainComp,void>::TrainAction<class TrainComp,void>(void)" (??0?$TrainAction@VTrainComp@@X@@QAE@XZ)
1>C:\bwapi4\broodwarbot\branches\DR_BWAIModule\Release\ExampleAIModule.dll : fatal error LNK1120: 2 unresolved externals 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:10:37.723

问题是所有模板代码都必须在标题中。

# sql - 如何选择数据库？

> ID：11287287
> 
> 赞同：0
> 
> 时间：2012-07-02T02:47:03.737
> 
> 标签：sql, database

我需要某种数据库品种（MySQL、SQLite 等）的比较表。我找不到一个。

我的用例是，我在分布式哈希表中实现对象的存储。我需要一个数据库解决方案：

*   快速分拣
*   简单化（没有用户，最好没有额外的结构，如多个表等）
*   并发（如果可能）
*   多平台
*   基于文件（主要不存储在内存中）
*   集中

我将使用 Go 进行编程。

据我了解，我相信我需要所谓的**面向文档的数据库**，因为我正在存储由键标识的对象。

**编辑：**在实现 DHT 时，我还将存储有关对象的元数据，例如访问计数等。最好有 TLL（生存时间）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T02:56:02.893

“面向文档”不是我所说的你想要的。我认为您想要一个“键值存储”，这可能是最简单的 NoSQL 类型。你可以这样做：

```
> set "key" value
"OK"
> get "key"
"value" 
```

因此，我推荐[redis](http://redis.io)，与更重和更有条理的替代品相比，我觉得它“轻巧”。您可以在[Try Redis](http://try.redis-db.com/)尝试它，这是一个功能性交互式 shell。

* * *

**编辑**：您的评论，以及您的编辑，继续推荐 Redis。Redis 有 TTL，以两个命令的形式出现：`expire`，它需要几秒钟，以及`expireat`，它需要一个 Unix 时间戳。此外，它允许满足您需求的哈希（据我了解）：

```
> hmset POST:dd68f250-c3f2-11e1-9b21-0800200c9a66 _timestamp 1341198420 title "An Example" content "This is an example of a representation of a blog post (or something) in Redis."
"OK"
> hgetall POST:dd68f250-c3f2-11e1-9b21-0800200c9a66
{"_timestamp":"1341198420","title":"An Example","content":"This is an example of a representation of a blog post (or something) in Redis."}
> expire POST:dd68f250-c3f2-11e1-9b21-0800200c9a66 60
true
> ttl POST:dd68f250-c3f2-11e1-9b21-0800200c9a66
53 
```

# algorithm - 加权边的二分匹配

> ID：11287288
> 
> 赞同：2
> 
> 时间：2012-07-02T02:47:09.077
> 
> 标签：algorithm, graph-theory, graph-algorithm

我正在开发一个程序，我将对象分成两组，并且我测量了每个对象与其他对象的相似程度，我想找到将它们匹配在一起的最佳方法。

如果集合是由edit-distance定义的单词和距离，那么集合“this”、“is”、“a”、“test”与“and”、“this”、“is”的最优匹配， “best”，然后我会将“this”与“this”（得分为 0）、“is”与“is”（得分为 0）、“a”与“and”（得分为2)，以及“最好”与“测试”（得分为 1）。

我已经将问题简化为找到一个最大的二分匹配问题。这是一个描述：

给定一个边具有整数权重的二部图，找到一组边，使得 (a) 每个顶点在集合中只有一条边，并且 (b) 该集合中的权重之和具有最大大小。

我不相信这个问题是 NP 完全的（或者，即使不是，但如果算法可能非常慢），是否有某种方法可以在一定程度上近似答案？

目前我选择最小权重边缘，删除它和它连接的节点，然后重复，但这似乎不是最理想的。我曾考虑将其减少为某种流问题（就像您使用正常的二分匹配一样），但在这种情况下它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T03:15:40.087

这是[最大的二分匹配问题](http://en.wikipedia.org/wiki/Matching_%28graph_theory%29#Maximum_matchings_in_bipartite_graphs)（加权）。它有一个使用增广路径的多时间解决方案。

# java - 在java中按级别打印二叉树

> ID：11287289
> 
> 赞同：2
> 
> 时间：2012-07-02T02:47:26.820
> 
> 标签：java, printing, binary-tree, levels

我想知道逐级打印二叉树的代码，我的意思是，如果我有这棵树：

```
 5
   / \
  3   2
 /     \
4       6 
```

我想像这样打印它：`5 3 2 4 6`.

我知道我需要做树深度方法并且我已经做到了，但我不知道还能做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T02:55:56.990

您可以使用级别遍历算法来打印它们。

该算法的工作原理如下：

> 队列：= <根>
> 
> 而队列不为空
> 
> ```
>  v := queue.front
> 
>  print v
> 
>  foreach s : s is a son of v
> 
>     queue.enqueue(s)
> 
>  queue.dequeue 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:30:28.337

好的，我想我想通了：
1\. 扩展类 Node 并添加一个名为 height (int) 的属性
2\. 计算树的每个节点的高度（简单的递归函数 - 不需要数据结构）
3\. 使用一个for循环，并按顺序遍历每个高度（级别）并打印该级别的节点

# iphone - 您如何检测 iCloud 中的文件何时更改？

> ID：11287294
> 
> 赞同：5
> 
> 时间：2012-07-02T02:48:16.773
> 
> 标签：iphone, objective-c, ios, ipad, icloud

当 iCloud 中的文件发生更改（无论是添加、删除还是内容更改）时，我想调用我创建的方法 ( `[self methodName]`) 以便我可以使用新文件的名称更新我的表格视图。我如何收到文件更改通知？我是否需要收听 NSNotification（如果需要，它是什么？）还是必须手动检查？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T02:49:18.747

我必须听的 NSNotification 的名称是`NSMetadataQueryDidUpdateNotification`. 我是这样做的：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(queryDidUpdate:) name:NSMetadataQueryDidUpdateNotification object:query];

...

-(void)queryDidUpdate:(NSNotification *)notification {

    //something changed, reload (NSMetadataQuery, create NSPredicate, rerun the query, etc.)

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T05:05:00.203

[Apple 开发者网站的这一部分](https://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/Introduction/Introduction.html)包含一个很棒的教程，用于设置基于文档的 iCloud 应用程序。

不过，要回答您的问题：只要您的文件是一个`UIDocument`，您就可以注册通知。只需在该页面上搜索“监控文档状态更改和处理错误”即可 - 有大量源代码可以帮助您。

# php - Symfony 过期时间计算

> ID：11287302
> 
> 赞同：0
> 
> 时间：2012-07-02T02:49:09.283
> 
> 标签：php, time, symfony1

InSymfony (Doctrine) 我正在尝试使用下面的代码创建一个公共函数。我要做的是当用户提交表单时，它会计算项目的到期日期。这是我到目前为止的代码，但我不知道如何计算当前时间。我从互联网上找到的不同示例中获取了一些代码，但每次都失败。

```
class Car extends BaseCar
{
    public function save(Doctrine_Connection $conn = null)
    {

    if ($this->isNew() && ! $this->getEndtime()) 
        {
            $now = THIS IS WHAT I NEED HELP WITH
            $this->setEndtime(date('Y-m-d H:i:s', $now + 86400 * sfConfig::get('item_duration')));
        }
        return parent::save($conn);
    }

} 
```

`item_duration`是在`App.yml`文件中设置的。所以我可以将其设置为站点范围的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:04:55.650

您可以通过它获取当前时间。

```
$now = time(); 
```

# objective-c - 最小化时隐藏 Dock 中的应用程序图标

> ID：11287303
> 
> 赞同：0
> 
> 时间：2012-07-02T02:49:31.413
> 
> 标签：objective-c, macos, cocoa, osx-lion, osx-snow-leopard

我是 Mac OSx 开发的新手。

我正在创建的应用程序需要在整个应用程序中从 Dock 中删除应用程序图标。该应用程序允许最小化和关闭应用程序窗口。通过单击状态栏中的应用程序图标来重新启动或重新打开已关闭或最小化的应用程序窗口。

我能够在应用程序启动期间将停靠图标设置为禁用；但是，当应用程序被最小化（单击最小化按钮）时，它会捕获应用程序当前窗口的图像并将其添加到 Dock 中。我不希望这种情况发生。该应用程序不应将任何项目添加到扩展坞。

问题：

1.  Apple 是否允许在最小化时从 Dock 中删除应用程序的重新启动器图像？
2.  如果 Apple 允许这样做，我如何从 Dock 中隐藏或删除该应用程序？

任何帮助都会有很大帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:53:06.243

当您的窗口最小化时，您不能禁用代理磁贴的显示——这是用户恢复最小化窗口的主要方式。如果您希望窗口在不使用时完全消失，请禁用最小化（在窗口的标志中）并让用户关闭窗口。

# android - android mobile中localstorage的物理位置？

> ID：11287304
> 
> 赞同：0
> 
> 时间：2012-07-02T02:49:31.740
> 
> 标签：android

我想知道android mobile中localstorage的物理位置在哪里。

谁能告诉我 android 本机浏览器在哪里存储其 localstorage 值？

是否可以将 webview localstorage 值存储到 android 本机浏览器

通过将 webview 数据库路径设置为 android 本机浏览器的物理位置来实现 localstorage db

本地存储数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:14:36.527

这不是一个很明确的问题。

大多数 Android 浏览器会将内容存储在其应用程序的私有目录中。在安全设备上，其他应用程序（甚至所有者）只能通过相关浏览器应用程序公开的接口（或设置为世界可读的文件）来访问它。

您在自己的应用程序中对 webview 执行的任何操作都发生在托管 webview 的应用程序进程的用户 ID 下。因此，任何私有存储都将位于应用程序的私有目录中。即使您可能使用一些与已安装浏览器相同的底层 webview 代码，但您作为不同的应用程序用户 ID 运行这一事实意味着您将无法访问浏览器应用程序的私有数据。

# wpf - 将整行作为 DataGridTemplateColumn 超链接的参数传递

> ID：11287305
> 
> 赞同：2
> 
> 时间：2012-07-02T02:49:47.007
> 
> 标签：wpf, hyperlink, mvvm-light, datagridtemplatecolumn

是否可以将整行作为 DataGridTemplateColumn 的超链接的参数传递？

```
<my:DataGridTemplateColumn Header="Name">
  <my:DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
      <TextBlock>
        <Hyperlink Foreground="Black" TextDecorations="None">
          <Run Text="{Binding Name}" />
        </Hyperlink>
      </TextBlock>
    </DataTemplate>
  </my:DataGridTemplateColumn.CellTemplate>
</my:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T03:26:34.523

很难说出您要实现的目标，但是没有值的 ComandParameter 绑定应该给您该行，例如

```
<Hyperlink Foreground="Black" TextDecorations="None" CommandParameter="{Binding}" Command="{Binding methodThatHandlesTheHyperlinkClick}"> 
      <Run Text="{Binding Name}" /> 
</Hyperlink> 
```

# ruby-on-rails - 使用 API 购买域名

> ID：11287306
> 
> 赞同：0
> 
> 时间：2012-07-02T02:49:49.830
> 
> 标签：ruby-on-rails, api, dns

我已经在谷歌上搜索了两个多星期来找到任何使用 OpenSRS API 的 Rails 代码，但我根本找不到任何好的解决方案。

谁能给我一些在 Rails 3 中使用 OpenSRS API 的示例或参考资料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:03:20.380

在 OpenSRS 网站上快速浏览后，我发现了这个 gem。从这里开始，绝对：

[https://github.com/voxxit/opensrs](https://github.com/voxxit/opensrs)

如果你想自己写，ruby 工具包在这个页面上：[http ://www.opensrs.com/site/resources/documentation/api#api](http://www.opensrs.com/site/resources/documentation/api#api)

但实际上，opensrs gem 看起来就是您所需要的。

# ruby-on-rails - rails 控制器使用 [column_name]_changed？不行

> ID：11287309
> 
> 赞同：0
> 
> 时间：2012-07-02T02:50:21.593
> 
> 标签：ruby-on-rails, ruby, model, controller

控制器中的`[column_name]_changed?`不起作用，但模型中的可以吗？

```
original_name = "test1"
new_name = "test2"

@user = User.find(params[:id])
puts"__________#{@user.name}" # "test1"
@user.update_attributes(params[:user])
puts"__________#{@user.name}" # "test2"
@user.name_changed? # return false is't not work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:01:06.723

来自[精美手册](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_attributes)：

> **update_attributes（属性，选项 = {}）**
> 
> 从传入的哈希更新模型的属性并保存记录，所有这些都包含在事务中。

注意*保存记录*部分。因此，在您的`update_attributes`调用成功后，所有新值都已写入数据库，并且没有任何内容处于*更改*状态；因此，所有`x_changed?`方法都将返回 false。

如果您想要类似`update_attributes`但不这样做的东西`save`，那么您可以使用[`assign_attributes`](http://api.rubyonrails.org/classes/ActiveRecord/AttributeAssignment.html#method-i-assign_attributes)or[`attributes=`](http://api.rubyonrails.org/classes/ActiveRecord/AttributeAssignment.html#method-i-attributes-3D)代替：

```
@user.assign_attributes(params[:user])
# or @user.attributes = params[:user]
#...
@user.save # You have to do this by hand 
```

[`update_attributes`](https://github.com/rails/rails/blob/7edade337e968fb028b2b6abfa579120eb424039/activerecord/lib/active_record/persistence.rb#L208)方法就是这样：

```
with_transaction_returning_status do
  self.assign_attributes(attributes, options)
  save
end 
```

毕竟。

# ruby-on-rails - Rails：将多个嵌套路由指向一个客户控制器操作

> ID：11287310
> 
> 赞同：0
> 
> 时间：2012-07-02T02:50:31.333
> 
> 标签：ruby-on-rails, routes, polymorphic-associations

如何将不同的嵌套路由指向一个控制器操作？

一个用户可以是多个组的成员，如公司、项目、组等。它可以请求加入、离开或被管理员删除。

我想访问多个模型的删除操作并销毁配置文件模型中的 belongs_to 记录

我已经有一个多态模型，该模型将请求从配置文件发送到*模型*（例如公司），并且在接受请求后，配置文件将属于该*模型*。一旦请求被接受，记录的请求就会被销毁。我觉得会破坏profile和*model*关系的remove动作应该是requests_controller的一部分，但我猜可能是profile_controller的一部分。

我想我最终需要的是

```
/_model_/:id/profile/:id/remove
/company/:id/profile/:id/remove 
```

但是我如何让它指向我的请求控制器中的删除操作

或者

```
/_model_/:id/requests/remove
/company/:id/request/remove 
```

我在我的路线中使用以下代码

```
resources :companies do
   resource :requests do
     put 'remove', :on => :member 
   end
   resources :requests do
      put 'accept', :on => :member
   end
 end 
```

这产生了双倍的路线

```
remove_company_requests PUT    /companies/:company_id/requests/remove(.:format)     
       company_requests POST   /companies/:company_id/requests(.:format)            
   new_company_requests GET    /companies/:company_id/requests/new(.:format)        
  edit_company_requests GET    /companies/:company_id/requests/edit(.:format)       
                        GET    /companies/:company_id/requests(.:format)            
                        PUT    /companies/:company_id/requests(.:format)            
                        DELETE /companies/:company_id/requests(.:format)            
 accept_company_request PUT    /companies/:company_id/requests/:id/accept(.:format) 
                        GET    /companies/:company_id/requests(.:format)            
                        POST   /companies/:company_id/requests(.:format)            
    new_company_request GET    /companies/:company_id/requests/new(.:format)       
   edit_company_request GET    /companies/:company_id/requests/:id/edit(.:format)   
        company_request GET    /companies/:company_id/requests/:id(.:format)        
                        PUT    /companies/:company_id/requests/:id(.:format)        
                        DELETE /companies/:company_id/requests/:id(.:format) 
```

作为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:04:03.410

我的我建议你创建一个新的控制器来处理这个？优点是您可以在您想要“删除关联”的任何模型上将路由映射到此控制器。

例如：

```
# RemoveController.rb
class RemoveController < ApplicationController
  def destroy
     # inplement the logic for deletion. You can use refection to implement 
     # this function only once for all the applied associations.    
  end
end

# routes.rb
resources :companies do
  resource :requests do
    resource :remove, :controller => :remove, :only => [:destroy]
  end
end 
```

上述路线将生成：

```
company_requests_remove DELETE /companies/:company_id/requests/remove(.:format)          remove#destroy 
```

您可以将删除控制器的上述行嵌套在您想要的任何嵌套路由上，它们都将指向 RemoteController 的销毁对象，仅使用不同的参数来帮助您实现销毁操作。

编辑：要为您不想复制的特定关系添加创建，您可以执行以下操作：

```
# routes.rb
resources :companies do
  resource :requests do
    resource :remove, :controller => :relationship, :only => [:destroy]
    resource :create, :controller => :relationship, :only => [:create]
  end
end

company_requests_remove DELETE /companies/:company_id/requests/remove(.:format)        relationship#destroy
company_requests_create POST   /companies/:company_id/requests/create(.:format)        relationship#create 
```

但我认为您可能需要小心打破相应控制器中创建的约定。我不确定这是否有任何不利之处。删除部分只是删除关联而不是记录本身，它似乎没有违反约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:52:38.210

尝试

```
puts 'remove', :on => :member, :controller => :requests, :action => :remove 
```

# java - Java - 无法启动应用程序

> ID：11287311
> 
> 赞同：1
> 
> 时间：2012-07-02T02:50:56.383
> 
> 标签：java, launch

我似乎无法启动 .jar 文件。当我启动它时出现错误。帮助将不胜感激，这是错误：

```
 CouldNotLoadArgumentException[ Could not load file/URL specified: C:\Users\Donavon\AppData\Local\Temp\javaws12]
at com.sun.javaws.Main.launchApp(Unknown Source)
at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
at com.sun.javaws.Main$1.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:55:33.333

首先，请检查您的 TEMP 文件夹是否还在。

其次，如果您可以在其中找到 jawaaws12，请将其移至其他地方。然后卸载并重新安装java。应自动创建相应的文件。

# jquery - 将带有 JQuery 和 ajax 的变量传递给 PHP 并使用 $_POST 获取它

> ID：11287312
> 
> 赞同：0
> 
> 时间：2012-07-02T02:51:00.640
> 
> 标签：jquery, ajax

我正在尝试返回一个变量，但我真的不明白该怎么做。这是

```
jquery part $('a[href="if_blog"]').click( function( e ) {
        e.preventDefault(); 

        var bblog = $( this ).attr('href');
        var dataString = 'bblog=' + bblog;

        $.ajax({
            type: 'POST',
            url: '', 
            data: dataString, 
            success: function(data){

            $('#php').html(data);
        }
        });
    });

this is the php part and it is part of a big wordpress file:
$byzmo_blog = $_POST['bblog'];
switch ($byzmo_blog) {
    case 'if_blog':
        $byzmo_postype = 'if_posts';
        break;
    case 'food_mood_blog':
        $byzmo_postype = 'food_mood';
        break;
    case 'look_good_blog':
        $byzmo_postype = 'look_good';
        break;
    case 'feel_good_blog':
        $byzmo_postype = 'feel_good';
        break;
}
?>

<div id="php"></div>
<?php var_dump($_POST);

$query = array(
    'post_type' => $byzmo_postype,
    'posts_per_page' => get_theme_option('blog_posts'),
    'orderby' => get_theme_option('blog_orderby'),
    'order' => get_theme_option('blog_order'),
    'paged' => ( get_query_var('paged') ? get_query_var('paged') : true )
);
?> 
```

因此，当我单击链接时 (a[href="if_blog"]') 我想根据 $_POST 显示的内容加载一些内容，但是 bcs 我在同一页面数据加载整个 index.php 文件，所以它是在页面中两次加载（因为我使用 .html()）然后它也加载到 $_POST 中.. 对于这部分 $byzmo_blog = $_POST['bblog']; 如何仅使用 $_POST 数据中的变量 ?

我希望你能理解我......

**编辑：** 好的，恐怕我不明白：所以我有 index.file 是这样的：

```
<a href='if_blog'>The Link</a>

<?php
$post_type = $_POST['posttype'];

$query = array(
    'post_type' => $post_type,
    'posts_per_page' => get_theme_option('blog_posts')
);
?>

<?php query_posts( $query ); if ( have_posts() ) :  ?>

<?php while ( have_posts() ) : the_post(); endwhile; endif; ?> 
```

因此，单击链接由 jquery 文件获取：

```
jQuery.noConflict();
jQuery( document ).ready( function( $ ) {
$('a[href="if_blog"]').click( function( e ) {

        var bblog = $( this ).attr('href'); 
        var url = 'test.php'; 

        $.post(url, { byzmo_blog: bblog },
            function(data) {
                    alert(data);
                    //console.log(data); //
        }); //, "json");
        e.preventDefault();
});

} ); 
```

如果我应用 json_encode，则返回 text.php 中的字符串或对象。

现在从这一点开始，我想将此数据返回到 index.html 并使用它 $post_type = $_POST['posttype']; 进一步..当我使用console.log时没有任何反应，我必须在这里使用json_decode吗？我搜索了很多，但现在无法得到它......：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T02:54:54.303

改为使用`$.post('url', '{data}', function(answer));`。[您可以从postJquery](http://api.jquery.com/jQuery.post/)收集更多信息。基本上，你有：

```
$.post("test.php", { name: "John", time: "2pm" },
   function(data) {
     alert("Data Loaded: " + data);
   }); 
```

在客户端站点。因此，在您的服务器端，将值检索为

```
$name = $_POST['name'];
$time = $_POST['time']; 
```

您可以`json_decode($_POST['name'])`将 JavaScript 文字对象用于 PHP 数组，并将其发送回页面使用`json_encode($array)`；在您的示例中，您没有给出`POST`将数据发送到的位置。你肯定需要去哪里的网址`POST`。

# ajax - 如何使用ajax在cakephp中保存复选框值？

> ID：11287313
> 
> 赞同：1
> 
> 时间：2012-07-02T02:51:03.433
> 
> 标签：ajax, cakephp, jquery

我想使用 ajax 保存复选框的值。

这是我希望更新以使用 ajax 的当前代码。

这是视图

```
 <?php $i = 0;
        foreach ($summary as $sum) {
            ?>
            <tr class="font-size12">
                <td><p><?php echo $sum['posts']['title']; ?></p></td>
                <td class="width450"><p><?php echo $sum['posts']['content']; ?></p></td>
                <td><p class="margin-left28"><?php echo $sum['members']['username']; ?></p></td>
                <td><p><?php echo $sum['posts']['deadline']; ?></p></td>
                    <?php echo $this->Form->create("Posts", array("action" => "update_checkbox")) ?>
                <td>
                    <?php
                    echo $this->Form->input('Post.' . $i . '.id', array("type" => "hidden", "label" => false, "value" =>
                        $sum['posts']['id']))
                    ?>
                    <?php
                    echo $this->Form->input('Post.' . $i . '.done', array("type" => "checkbox", "label" => false, "value" => "1", "id" => "idCheck[]", "onclick" => "getboxes()"))
                    ?>
                </td>
            </tr>

            <?php $i++;
        }
        ?>
    </table>
 <?php echo $this->Form->end() ?> 
```

javascript

```
function getboxes(){
    $("idCheck[]").click(function(){
        $.ajax({
            url: '../../../../Controller/PostsController',
            data: { action: 'checkingBox' },
            type: 'post'
//            ,
//            success: function(output) {
//                alert(output);
//            }
        });
    });
} 
```

控制器

```
public function update_checkbox() {
        //    debug($this->data);
        $var = $this->Post->saveCheckBox($this->data);
        $this->set("result", $var);
    } 
```

该模型

```
 public function saveCheckBox($checkbox) {
        debug($checkbox);
        $this->saveAll($checkbox['Post']);
    } 
```

编辑：我在复选框中添加了一个监听器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:00:48.323

根据您当前的代码，有两种方法可以将复选框值存储到数据库中。要么您将不得不操作接收到您的 ajax_method() 的发布数据，并将其设置为如下所示的数组

```
[Post] => array(
                [0] => ....
                [1] => ....
                ); 
```

然后你可以使用 $this->Post->saveAll($this->request->data);

或者您可以使用以下代码将复选框值保存到数据库中。

```
echo $this->Form->input('Case.CHECK_ID][', array('type' => 'checkbox')); 
```

然后你可以使用 saveAll() 方法。

# objective-c - Objective C 中的指针值

> ID：11287314
> 
> 赞同：1
> 
> 时间：2012-07-02T02:51:06.070
> 
> 标签：objective-c, ios, pointers, syntax

我正在使用 OpenGL 着色器，它更喜欢 C 字符串而不是 NSStrings，我遇到了以下奇怪情况：

相关事实是

1) shaderSource 定义为

```
NSString* shaderSource 
```

2) glShaderSource 的签名是

```
glShaderSource(GLuint shader, GLuint count, const GLchar** string, const GLint *length) 
```

这有效：

```
int len = [shaderSource length];
const char *cstr = [shaderSource UTF8String];
glShaderSource(shader, 1, &cstr, &len); 
```

这不起作用：

```
glShaderSource(shader, 1, &[shaderSource UTF8String], &[shaderSource length]); 
```

我显然不明白这里关于目标 c 的一些东西，我想纠正这个问题，所以如果你有这种倾向，请告诉我，WTF？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T02:57:12.597

您似乎正在使用`&[shaderSource UTF8String]`为您提供额外的间接级别，以便类型正确，因为`glShaderSource`需要指向指针的指针。但是你不能只是把`&`任何东西放在前面以获得指向它的指针。

`&x`表示“返回 x 的地址”；要使其有意义，`x`必须是一个符号，而不是一个表达式。你不能写作`&[shaderSource UTF8String]`的原因与你不能写作的原因相同`&(1 + t)`。这只是一个表达式，您需要将值存储在某处，然后才能传递地址（存储它的位置）。

如果您习惯于 C 结构，这可能会令人困惑，因为如果您有一个`foo`带有 member的结构`bar`，您*可以*通过编写 来获取成员的地址`&foo.bar`。但是 Objective-C 对象不是结构（好吧，从技术上讲，它们是不透明的结构）。您通过向它们发送消息来从它们那里获取属性值，这与函数调用基本相同。所以 if`foo`是一个对象并且`bar`是一个属性，`&foo.bar`（它实际上是 的简写`&[foo bar]`）是一个无效的表达式。

# css - 寻找 Firefox 插件来自动应用 CSS

> ID：11287318
> 
> 赞同：0
> 
> 时间：2012-07-02T02:52:07.613
> 
> 标签：css, firefox, firefox-addon

是否有在浏览器级别自动添加 CSS 规则的插件（方式）？

例如，我写了一条规则`p {color:red}`，随后在 Firefox 中加载的所有页面都会出现该规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:55:33.420

如果我误解了您的问题，请原谅我，但我相信[时尚](https://addons.mozilla.org/en-US/firefox/addon/stylish/)是您正在寻找的附加组件。

# ruby-on-rails - 使用 Ruby on Rails 将 attr_accessible 限制为用户类型

> ID：11287322
> 
> 赞同：0
> 
> 时间：2012-07-02T02:53:57.840
> 
> 标签：ruby-on-rails, attr, attr-accessible

我正在创建一个论坛软件。我希望管理员和模组能够*关闭*某些主题。

对代码进行清理以仅显示相关信息。

**楷模**

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :bio
  has_many :topics, dependent: :destroy
end

class Topic < ActiveRecord::Base
  belongs_to :user
  attr_accessible :name, :last_post_id, :content
end 
```

**用户模式**：admin 和 mod 列确定管理员和 mods。

```
create_table "users", :force => true do |t|
  t.string   "name"
  t.string   "email"
  t.datetime "created_at",                         :null => false
  t.datetime "updated_at",                         :null => false
  t.string   "password_digest"
  t.string   "remember_token"
  t.boolean  "admin",           :default => false
  t.text     "bio"
  t.boolean  "mod",             :default => false
end 
```

**主题模式**：关闭列确定主题的关闭状态。

```
create_table "topics", :force => true do |t|
  t.datetime "created_at",                      :null => false
  t.datetime "updated_at",                      :null => false
  t.integer  "forum_id"
  t.string   "name"
  t.integer  "last_post_id"
  t.integer  "views"
  t.integer  "user_id"
  t.boolean  "closed",       :default => false
  t.text     "content"
end 
```

我不愿意用户`attr_accessible :closed`使用 TOPIC 模型，因为它容易受到恶意 PUT 请求的攻击（如果我错了，请纠正我）。

Rails 应用程序有什么方法可以在`closed`不使用的情况下访问和修改 TOPIC 列的值`attr_accessible`，以便只有 mods 和管理员可以编辑它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:48:38.163

I searched on google and found this [ascii cast](http://asciicasts.com/episodes/237-dynamic-attr-accessible).

Basically, you are looking for dynamic attr_accessible.

If you currently have

```
class Article < ActiveRecord::Base  
  attr_accessible :name, :content, :closed  
end 
```

You ca use dynamic attr_accessible like this :

```
class Article < ActiveRecord::Base  
  attr_accessible :name, :content  
  private  
  def mass_assignment_authorizer  
    super + [:closed]  
  end  
end 
```

I hope I is what you are looking for. Be sure to check the link I gave you for complete reference.

# java - 使用 Java Swing 的文本框输入的可滚动垂直列表

> ID：11287329
> 
> 赞同：1
> 
> 时间：2012-07-02T02:55:26.353
> 
> 标签：java, swing, layout, awt, jcomponent

我正在尝试为作业构建一个简单的界面，其中多行自动换行的输入框可以垂直堆叠在一个固定宽度的列中。那么整个堆栈（如果足够高）必须在具有相同固定宽度和固定高度的滚动窗格内垂直滚动。

活动框必须动态更改高度以适应正在键入/删除的文本量。这意味着列中所有后续输入的 y 位置应相应更改。布局经理的工作，对吧？

我开始阅读挥杆布局，似乎只有 GridBagLayout 可以做到这一点。因为这是我的应用程序唯一的界面窗口，所以它看起来像一个笨重的布局来实现一些简单的事情。

那么，我应该使用哪种摆动布局，以及用于自动换行和自动高度调整的文本输入类？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:31:41.327

A[`BoxLayout`](http://docs.oracle.com/javase/7/docs/api/javax/swing/BoxLayout.html)可能是您在此用例中所追求的。

# date - 将函数转换为经典 ASP

> ID：11287337
> 
> 赞同：0
> 
> 时间：2012-07-02T02:56:45.927
> 
> 标签：date, asp-classic

我正在使用一个邮件列表程序，它将日期插入到“编码”的网络链接中，因此用户无法更改或编辑它。

格式描述如下：

> 一个八字符的字符串，`AABBCCDD,`其中：
> 
> *   年份 =`1980 + HexToInt(BB) / 3`
> *   月 = `HexToInt(CC) / 7 - 21`
> *   天 =`HexToInt(DD) / 7 - 5`
> 
> 还包括一个校验和以避免随意修改：
> 
> `AA = IntToHex(Year + Month + Day mod 200)`
> 
> 例如`2660BDAF`将参考`20 June, 2012`.

* * *

您能帮我将以下内容转换为经典 ASP：

```
CodedDateStr = Request.querystring("Exp")
AYear = 1980 + HexToInt(CodedDateStr[3] + CodedDateStr[4]) / 3
AMonth =  HexToInt(CodedDateStr[5] + CodedDateStr[6]) / 7 - 21
ADay =  HexToInt(CodedDateStr[7] + CodedDateStr[8]) / 7 - 5
ACheckSum = AYear + AMonth + ADay mod 200

if ACheckSum <> HexToInt(CodedDateStr[1] + CodedDateStr[2]) then
  ValidDate = 0
else
  ValidDate = 1
end if

AExpiryDate = EncodeDate(ADay, AMonth, AYear)

if Date() > AExpiryDate then
  ExpiredOffer = 1
else
  ExpiredOffer = 0
end if

.... 
```

看起来`HexToInt`等价的是`clng("&h" & hexnumber)`

我不确定`EncodeDate`，我希望它不是像笨拙的东西`CDate(AMonth + "/" + ADay + "/" + AYear)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:07:20.203

`CLng("&h" & hexnumber)`看起来是 HexToInt 的好方法。

对于 EncodeDate，查看[`DateSerial`](http://msdn.microsoft.com/en-us/library/1we4t8hy%28VS.84%29.aspx)函数，它接受年、月和日，并返回一个 Date 值。

# php - 将数组值与前一个数组值进行比较

> ID：11287340
> 
> 赞同：0
> 
> 时间：2012-07-02T02:57:32.830
> 
> 标签：php

如何将当前数组值与之前的数组值进行比较。例如，如果我有以下数组并想将 [BM1367 PD C 70][ST00576]['transferfrom'] 与之前的数组 [BM1367 PD B 85] 进行比较[ST00576]['转自']？

```
 [BM1367    PD  B  85] => Array
        (
            [ST00576] => stdClass Object
                (
                    [transferfrom] => 102
                    [transferto] => 66
                    [BR_ID] => 102
                    [refno] =>  

                )

            [OT01606] => stdClass Object
                (
                    [transferfrom] => 102
                    [transferto] => 66
                    [BR_ID] => 66
                    [refno] => 102 - ST00576

                )

        )

    [BM1367    PD  C  70] => Array
        (
            [ST00576] => stdClass Object
                (
                    [transferfrom] => 102
                    [transferto] => 66
                    [BR_ID] => 102
                    [refno] =>  

                )

            [OT01606] => stdClass Object
                (
                    [transferfrom] => 102
                    [transferto] => 66
                    [BR_ID] => 66
                    [refno] => 102 - ST00576

                )

        )

    [BM1367    PD  C  85] => Array
        (
            [ST00576] => stdClass Object
                (
                    [transferfrom] => 102
                    [transferto] => 66
                    [BR_ID] => 102
                    [refno] =>  

                )

            [OT01606] => stdClass Object
                (
                    [transferfrom] => 102
                    [transferto] => 66
                    [BR_ID] => 66
                    [refno] => 102 - ST00576

                )

        )

    [BM1367    PD  D  85] => Array
        (
            [ST00576] => stdClass Object
                (
                    [transferfrom] => 102
                    [transferto] => 66
                    [BR_ID] => 102
                    [refno] =>  

                )

            [OT01606] => stdClass Object
                (
                    [transferfrom] => 102
                    [transferto] => 66
                    [BR_ID] => 66
                    [refno] => 102 - ST00576

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T03:19:38.647

在这种情况下，您有一个数组，`STD class objects`您可以按如下方式比较元素：假设您提供的数组在另一个数组中

```
$tempArray = {

        [BM1367    PD  B  85] => Array
            (
                [ST00576] => stdClass Object
                    (
                        [transferfrom] => 102
                        [transferto] => 66
                        [BR_ID] => 102
                        [refno] =>  

                    )

                [OT01606] => stdClass Object
                    (
                        [transferfrom] => 102
                        [transferto] => 66
                        [BR_ID] => 66
                        [refno] => 102 - ST00576

                    )

            )

        [BM1367    PD  C  70] => Array
            (
                [ST00576] => stdClass Object
                    (
                        [transferfrom] => 102
                        [transferto] => 66
                        [BR_ID] => 102
                        [refno] =>  

                    )

                [OT01606] => stdClass Object
                    (
                        [transferfrom] => 102
                        [transferto] => 66
                        [BR_ID] => 66
                        [refno] => 102 - ST00576

                    )

            )

        [BM1367    PD  C  85] => Array
            (
                [ST00576] => stdClass Object
                    (
                        [transferfrom] => 102
                        [transferto] => 66
                        [BR_ID] => 102
                        [refno] =>  

                    )

                [OT01606] => stdClass Object
                    (
                        [transferfrom] => 102
                        [transferto] => 66
                        [BR_ID] => 66
                        [refno] => 102 - ST00576

                    )

            )

        [BM1367    PD  D  85] => Array
            (
                [ST00576] => stdClass Object
                    (
                        [transferfrom] => 102
                        [transferto] => 66
                        [BR_ID] => 102
                        [refno] =>  

                    )

                [OT01606] => stdClass Object
                    (
                        [transferfrom] => 102
                        [transferto] => 66
                        [BR_ID] => 66
                        [refno] => 102 - ST00576

                    )

            )

    )

}; 
```

您现在可以访问元素

```
$tempArray['BM1367 PD C 70']['ST0076']->transferfrom

$tempArray['BM1367 PD B 85']['ST0076']->transferfrom 
```

为了比较它们

```
(int)$tempArray['BM1367 PD C 70']['ST0076']->transferfrom == (int)$tempArray['BM1367 PD B 85']['ST0076']->transferfrom 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:29:23.890

您询问：

> 如何将当前数组值与之前的数组值进行比较

我想你可能想看看以下 PHP 函数

1.  当前（） - [http://www.php.net/manual/en/function.current.php](http://www.php.net/manual/en/function.current.php)
2.  prev() - [http://www.php.net/manual/en/function.prev.php](http://www.php.net/manual/en/function.prev.php)
3.  next() - [http://php.net/manual/en/function.next.php](http://php.net/manual/en/function.next.php)

例如：

```
<?php
$transport = array('foot', 'bike', 'car', 'plane');
$mode = current($transport); // $mode = 'foot';
$mode = next($transport);    // $mode = 'bike';
$mode = next($transport);    // $mode = 'car';
$mode = prev($transport);    // $mode = 'bike';
$mode = end($transport);     // $mode = 'plane';
?> 
```

我能够在计算公式上使用它们，工作很棒！在比较您的上一个或下一个数组的电流时，它也很有用。

# grails - 无法从终端窗口运行 grails 应用程序

> ID：11287341
> 
> 赞同：0
> 
> 时间：2012-07-02T02:57:33.723
> 
> 标签：grails

我需要一些帮助来运行 grails 应用程序。我在装有 OSx Lion 的 Mac 上使用 Grails 1.3.7。我曾经从命令行/终端窗口很好地运行 grails 应用程序。但最近自从我安装了 Intellij Idea 并开始通过 Intellij Idea 运行 grails 应用程序。但现在我无法从终端窗口运行相同的应用程序。在控制台中，我的应用程序上升到......“运行 grails 应用程序”，然后再也没有走得更远。我可以在“活动监视器”中看到 java 进程，但该应用程序永远不会走得更远。感谢帮助确定为什么我现在无法从终端运行应用程序，并且通过 IntellijIdea 启动时运行良好。

从终端窗口

```
YSINGH_XXX:Trunk_AS ysingh$ grails run-app
Welcome to Grails 1.3.7 - http://grails.org/
Licensed under Apache Standard License 2.0
Grails home is set to: /Users/ysingh/Grails/grails-1.3.7

Base Directory: /Users/ysingh/Workspace/Trunk/Trunk_AS
Resolving dependencies...
Dependencies resolved in 2369ms.
Running script /Users/ysingh/Grails/grails-1.3.7/scripts/RunApp.groovy
Environment set to development
  [groovyc] Compiling 2 source files to /Users/ysingh/.grails/1.3.7/projects/Trunk_AS/ast/mongodb-morphia
  [groovyc] Compiling 2 source files to /Users/ysingh/Workspace/Trunk/Trunk_AS/target/classes
     [copy] Copying 1 file to /Users/ysingh/.grails/1.3.7/projects/Trunk_AS
   [delete] Deleting directory /Users/ysingh/.grails/1.3.7/projects/Trunk_AS/tomcat
Running Grails application..

==============  This is the last statement in console...... 
```

# database - 从数据库中已有的数据创建种子模型

> ID：11287344
> 
> 赞同：2
> 
> 时间：2012-07-02T02:57:54.447
> 
> 标签：database, asp.net-mvc-3, entity-framework

有没有办法将现有数据库中的数据转换为可以轻松放入种子方法的对象？

本质上，我想让一些人通过表单向我的数据库添加行，然后将其转换为一个对象，我可以在需要进行更改的任何时候重新播种数据库。

数据库本身是使用以下模型通过代码优先创建的：

```
public class Combo
{
    public int Id { get; set; }
    public string MainPrefix { get; set; }
    public string MainDescriptor { get; set; }
    public string MainDish { get; set; }
    public string Connector { get; set; }
    public string SecondaryDescriptor { get; set; }
    public string SecondaryDish { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:56:54.687

高级未经测试的想法：

创建一个新的 T4 模板，该模板将使用您的上下文或直接 SQL 来查询数据库，并使用方法（将返回从数据库数据创建的对象集合）或 SQL 插入命令生成 C# 静态类。根据您的选择，您将调用静态方法`Seed`以获取要插入的所有实体，或者只是加载创建的 SQL 脚本并执行它。

您也可以在不使用 T4 的情况下通过使用 Code Dom（如果您想生成 C# 代码）并为 Visual Studio 创建新的自定义工具来执行相同的操作。

这些功能可以是您项目的一部分，或者可以在单独的外部程序集中编译结果（C# 代码）。

# c# - 如何比较 LINQ 中的字符串列（如 DateTime）？

> ID：11287346
> 
> 赞同：1
> 
> 时间：2012-07-02T02:58:26.017
> 
> 标签：c#, linq

我有一个带有 ValidDate 字段的数据库 - 它是一个字符串（我们犯了一个错误，它应该是一个日期时间，但我们现在无法修改数据库。）

现在我想将此文件与网站上的参数（validDateStart）进行比较：

```
priceList = priceList.Where(p => Convert.ToDateTime(p.ValidDate) >= Convert.ToDateTime(validDateStart));
var list = initPriceList.ToList(); 
```

但我得到一个错误：方法 ToDateTime 没有实现。

任何人都可以给我一些帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:11:05.537

Linq to Entities 不支持此功能（据我所知，Linq to SQL 也不支持）。请记住，您的查询是*在数据库上*执行的——那里根本没有对等的 for `Convert.ToDateTime`。

查询中的任何字符串解析实际上只是一种解决方法 - 作为真正的解决方案，使这些列不是字符串而是`datetime`在数据库中，并且您首先不会遇到这个问题。

一个 hacky 的解决方法是实现所有行（您可以使用`AsEnumerable()`它），然后进行解析 - 虽然这会产生糟糕的性能，但如果行数很少，可能会足够好：

```
var startDate = DateTime.Parse(validDateStart);
var list = priceList.AsEnumerable()
                    .Where(p => DateTime.Parse(p.ValidDate) >= startDate);
                    .ToList(); 
```

**编辑：**

通过您的示例更新，您似乎可以只进行*字符串比较*来做您想做的事情 - 授予它仍然是一个 hack，但比实现所有行的性能要好得多。这是可能的，因为您的日期格式将最重要的数字放在首位，然后是不太重要的部分 - 它是年份，然后是月份，然后是日期（如果不是这种情况，并且在您的示例中，日期在月份之前，则此解决方案将不起作用）。

假设您的输入字符串`validDateStart`也采用相同的格式，您可以这样做：

```
var list = priceList.Where(p => p.ValidDate.CompareTo(validDateStart) >=0);
                    .ToList(); 
```

[在Linq to Sql](https://stackoverflow.com/questions/578231/issues-doing-a-string-comparison-in-linq)和[Linq to Entities](http://social.msdn.microsoft.com/Forums/eu/adodotnetentityframework/thread/98180ae0-4ccd-4ecd-89d5-576a04169219)`String.CompareTo`中似乎都支持字符串比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-21T23:16:18.923

如果您的数据库中的所有记录总是以年、月和日开头（例如：日期格式为 yyyy-MM-dd HH:mm:ss 或 yyyy/MM/dd 或 yyyyMMdd），无论是否有分隔符. 问题是值应该具有以年、月和日开头的格式。

您可以执行以下操作：

1：将您的过滤器值（网站）转换为与数据库中相同的格式：

```
// DateTime format in database: yyyy-MM-dd HH:mm:ss:ffffff
var from = filtro.CreationDateFrom?.ToString("yyyy-MM-dd");
var to = filtro.CreationDateTo?.AddDays(1).ToString("yyyy-MM-dd"); 
```

2：并像这样编写您的查询（使用 CompareTo 方法）：

```
var query = (from x in ctx.TskTaskQueues
             where x.CreationDatetime.CompareTo(from) >= 0 
             && x.CreationDatetime.CompareTo(to) <= 0
             select x); 
```

它对我有用！我没有使用 LinqToEntities，但我使用的是类似于 LinqEntities 的 LinqConnect（用于 Oracle）。

如果您使用这种 dd-MM-yyyy 这样的格式，它可能无法正常工作。

# php - PHP 正则表达式，我哪里出错了？

> ID：11287347
> 
> 赞同：0
> 
> 时间：2012-07-02T02:58:56.530
> 
> 标签：php, regex

我是正则表达式的新手，我尝试了 preg_match 并且结果应该显示`hello`，但没有发生。

```
$action3 = "(414)-4204";

if(preg_match('%^(\d{3})+-\d{4}$%',$action3)) {
echo "hello";
} else {
echo "goodbye";
} 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:02:07.063

您需要用反斜杠转义括号。它们是正则表达式中的特殊字符。

```
preg_match('%^\(\d{3}\)+-\d{4}$%',$action3) 
```

# php - 看不懂第一个字母

> ID：11287348
> 
> 赞同：0
> 
> 时间：2012-07-02T02:59:05.517
> 
> 标签：php

[我想添加一个函数来返回我最后一个问题](https://stackoverflow.com/questions/11250744/cannot-insert-sentence-to-database)的第一个字母是否是大写字母。

这是代码：

```
<?php

function isCapital($string) {
   return $string = preg_match('/[A-Z]$/',$string{0});
}

$text = " Poetry. do you read poetry while flying? Many people find it relaxing to read on long flights. Poetry can be divided into several genres, or categories. ";
$sentences = explode(".", $text); $save = array();
foreach ($sentences as $sentence) {
   if (count(preg_split('/\s+/', $sentence)) > 6) {
      $save[] = $sentence. ".";
   }
}

if( count( $save) > 0) {
   foreach ($save as $nama){
      if (isCapital($nama)){
         print_r ($nama);
      }
   }
}
?> 
```

结果应该是...

> 诗歌可以分为几个体裁或类别。

...但它什么也没打印。我只需要包含超过 6 个单词并以大写字母开头的句子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T03:15:33.770

当您执行explode() 函数时，您会在字符串的开头留下一个空格，这意味着$string 的最左边的字符永远不会是大写字母——它将是一个空格。我会将 isCapital() 函数更改为以下内容：

```
function isCapital($string) {
  return preg_match('/^\\s*[A-Z]/', $string) > 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:21:33.387

如果你愿意的话，你应该能够通过一个正则表达式来完成所有这些：

```
preg_match_all('/((?=[A-Z])([^\s.!?]+\s+){5,}[^\s.!?]+[.!?])/', $string, $matches); 
```

[http://refiddle.com/2hz](http://refiddle.com/2hz)

或者，从字符类中删除`!`and`?`以仅计`.`为句子分隔符。

# javascript - 如何使用 jQuery 检测滚动条的移动？

> ID：11287351
> 
> 赞同：1
> 
> 时间：2012-07-02T02:59:50.580
> 
> 标签：javascript, jquery, html

我有一个`div`具有 css 属性的`overflow: hidden`，但是当鼠标悬停在 div 上方时，我仍然想检测任何滚动运动。这怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:04:50.407

你可以用这个。

```
 $('div').on('scroll',function(){
        // code here....
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T06:27:05.497

看看你是否可以使用`mousewheel.js`已经提到的 jQuery 插件。

**参考：** [**jsFiddle**](http://jsfiddle.net/7TeGu/19/)

上面的 jsFiddle 改编自 jQuery 论坛成员[**ruiganga**](http://forum.jquery.com/user/ruiganga)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T03:00:39.150

我不确定“在 div 之上”是什么意思，但你可以使用[`scroll`](http://api.jquery.com/scroll/)处理程序：

```
$('div').scroll(function(){ // or $('div').bind('scroll', function(){ 
 ....
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T04:10:24.283

具有溢出：隐藏的元素没有滚动事件，因为它们没有滚动条。您需要将其更改为溢出：自动。

另一种选择是使用 jQuery Mousewheel 插件将它绑定到鼠标滚轮事件，尽管我不确定这是否是你想要的。

# ios - 如果 iOS 购买收据验证失败怎么办？

> ID：11287352
> 
> 赞同：10
> 
> 时间：2012-07-02T02:59:56.207
> 
> 标签：ios

iOS 购买收据服务器验证通常是这样工作的：

1.  用户在 iPhone 上购买

2.  您的应用程序将购买收据发送到服务器

3.  服务器收到recipt并将其发送给Apple进行验证

4.  服务器从 Apple 获取验证结果。

5.  服务器将验证结果发送到应用程序

但是，如果只有第 1 步成功怎么办？例如，应用程序无法在步骤 2 中向服务器发送请求，或者应用程序在步骤 5 中无法从服务器获得响应。问题是用户已经付款。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-24T02:10:03.970

如果您使用的是**SKPaymentQueue**，那么这很容易。当您从服务器获得成功/失败验证结果时，您所要做的就是将**交易****保留**在 SKPaymentQueue 中，直到“**第 5 步”。**

 ****如果在第 1 步到第 5 步之间**出现任何问题**，您的应用程序仍然可以访问 SKPaymentQueue 中的交易并且可以“**重新处理**”它。
不完整事务的重新处理可能会在**您的应用程序启动时启动**（或您喜欢的某个时间间隔）。
只需检查 SKPaymentQueue 以获取**待处理/未完成的交易**并将它们发送到您的服务器（就像“**步骤 2** ”）。如果您的服务器显然仍然无法访问，您将无法进入第 5 步，因此您不会从队列中删除事务，并且此重新处理每次在下一次应用程序启动（或下一次队列检查时间间隔）时**一次又一次地发生****直到**是**实现了**。

## 执行

实现也很简单，你需要一个**SKPaymentTransactionObserver的“****交易观察者类**” 。 在应用程序启动时创建一个“事务观察者类”的实例，它应该通过调用来注册自己：

 **```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self] 
```

然后“事务观察者类”获取方法中的事务：

```
(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

此方法是您可以处理和重新处理所有未完成事务的地方。

请注意，您的服务器必须是**幂等**的（即，如果重复事务已被处理，则能够处理它们）
一旦服务器处理并完成**步骤 2 到 4**，那么应用程序就会出现成功/失败结果，这是您**唯一**想要的时间通过调用从队列**中删除该事务：**

```
[[SKPaymentQueue defaultQueue] finishTransaction: transaction] 
```

最后为您的用户提供他们此时购买的高级功能。******

# sql - 执行多个左外部排除连接的最佳方法

> ID：11287353
> 
> 赞同：2
> 
> 时间：2012-07-02T02:59:56.753
> 
> 标签：sql, oracle, left-join

我有一张表，我需要碰到多个表，其中左外连接不包括右外连接。对此有最佳做法吗？先联合所有其他表？还有什么？

这是我想到的第一个想法来处理这个问题，但我想知道是否有更好更有效的方法。

```
select
    master_table.*
from
    master_table
left outer join
    (
        select customer_id from table_1
        union
        select customer_id from table_2
        union
        select customer_id from table_3
        union
        select customer_id from table_4
    ) bump_table
on
    master_table.customer_id = bump_table.customer_id
where
    bump_table.customer_id is null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:14:11.330

我应该认为 NOT EXISTS 会更好。它当然可以更好地传达查询的意图。

```
select * from master_table m
 where not exists( select 1 from table_1 where m.customer_id=table_1.customer_id)
   and not exists( select 1 from table_2 where m.customer_id=table_2.customer_id)
   and not exists( select 1 from table_3 where m.customer_id=table_3.customer_id)
   and not exists( select 1 from table_4 where m.customer_id=table_4.customer_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T05:35:31.987

基本形式肯定更快——类似于`NOT EXISTS`@dbenham 已经提供的形式。

```
SELECT m.*
FROM   master_table m
LEFT   JOIN table_1 t1 ON t1.customer_id =  m.customer_id
LEFT   JOIN table_2 t2 ON t2.customer_id =  m.customer_id
LEFT   JOIN table_3 t3 ON t3.customer_id =  m.customer_id
LEFT   JOIN table_4 t4 ON t4.customer_id =  m.customer_id
WHERE  t1.customer_id IS NULL
AND    t2.customer_id IS NULL
AND    t3.customer_id IS NULL
AND    t4.customer_id IS NULL; 
```

# auto-update - 如何在我的应用程序上实现类似 chrome 的二进制自动更新？

> ID：11287356
> 
> 赞同：2
> 
> 时间：2012-07-02T03:00:36.577
> 
> 标签：auto-update

我创建了小型二进制应用程序，我希望它能够完全自动更新，我该怎么做？

它是一个巨大的应用程序，我不想像现在这样下载并解压缩整个文件夹，但我想做二进制+差异更新。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T03:34:41.463

谷歌已经开源了它的 Windows 自动更新程序。[它被称为 Omaha 并在此处](http://code.google.com/p/omaha/)托管在 Google 代码上。

# ruby-on-rails-3 - rails3inaction 发送到 gmail

> ID：11287359
> 
> 赞同：1
> 
> 时间：2012-07-02T03:01:02.400
> 
> 标签：ruby-on-rails-3

我一直在使用 Rails 3，关于发送真实电子邮件的部分。当我运行该功能向我的 gmail 帐户发送电子邮件时，我收到了邮件，但发件人地址也设置为我的 gmail，而不是`ticketee@gmail.com`. 我也有默认的 :from setup ：

```
 class Notifier < ActionMailer::Base
    default from: "ticketee@gmail.com"

    def comment_updated(comment, user)
      @comment = comment
      @user = user
      mail from: "ticketee@gmail.com", to: user.email, subject: "[ticketee] #{comment.ticket.project.name} - #{comment.ticket.title}"
    end
  end 
```

关于为什么会发生这种情况的任何想法？

**编辑**

将上面的地址从地址更改为我的 gmail，我不再得到 nil 作为测试响应。但是，它似乎遇到了另一个问题：

```
Then there should be an email from Ticketee in my box               # features/step_definitions/app_email_steps.rb:20
      deadlock; recursive locking (ThreadError)
      <internal:prelude>:8:in `lock'
      <internal:prelude>:8:in `synchronize'
      ./features/step_definitions/app_email_steps.rb:22:in `block (2 levels) in <top (required)>'
      <internal:prelude>:10:in `synchronize'
      ./features/step_definitions/app_email_steps.rb:21:in `/^there should be an email from Ticketee in my box$/'
      features/gmail.feature:32:in `Then there should be an email from Ticketee in my box'

Failing Scenarios:
cucumber features/gmail.feature:20 # Scenario: Receiving a real-world email 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:20:36.213

我将步骤更改为此并且它可以工作

```
@mails =  @gmail.inbox.find(:unread,from: "didahsutest@gmail.com")
@mails.each do |mail|
    if  mail.subject =~ /^\[ticketee\]/
        @received_mail = true
    end
    @received_mail.should be_true
end 
```

但我必须删除`mail.delete!`

因为我收到了这个错误

```
Label '[Gmail]/Trash' doesn't exist! (Gmail::Message::NoLabelError) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T04:08:01.480

这本书的作者在这里。

`default :from`线是错误的。您无法设置电子邮件的发件人地址，因为 GMail 会强制执行。我认为您仍然可以为电子邮件设置显示名称：

```
default from: "From Ticketee, with love <thecorrectemail@gmail.com>" 
```

# hadoop - 在 Pig 中将一个元组拆分为多个元组

> ID：11287362
> 
> 赞同：5
> 
> 时间：2012-07-02T03:01:10.187
> 
> 标签：hadoop, apache-pig

我喜欢从单个元组生成多个元组。我的意思是：我有包含以下数据的文件。

```
>> cat data
ID | ColumnName1:Value1 | ColumnName2:Value2 
```

所以我通过以下命令加载它

```
grunt >> A = load '$data' using PigStorage('|');    
grunt >> dump A;    
(ID,ColumnName1:Value1,ColumnName2:Value2) 
```

现在我想把这个元组分成两个元组。

```
(ID, ColumnName1, Value1)
(ID, ColumnName2, Value2) 
```

我可以将 UDF 与 foreach 一起使用并生成吗？像下面这样的东西？

```
grunt >> foreach A generate SOMEUDF(A) 
```

编辑：

输入元组：（id1，column1，column2）输出：两个元组（id1，column1）和（id2，column2）所以它是List还是我应该返回一个Bag？

```
public class SPLITTUPPLE extends EvalFunc <List<Tuple>>
{
    public List<Tuple> exec(Tuple input) throws IOException {
        if (input == null || input.size() == 0)
            return null;
        try{
            // not sure how whether I can create tuples on my own. Looks like I should use TupleFactory.
            // return list of tuples.
        }catch(Exception e){
            throw WrappedIOException.wrap("Caught exception processing input row ", e);
        }
    }
} 
```

这种方法正确吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T18:04:07.723

您可以编写 UDF 或使用带有内置函数的 PIG 脚本。

例如：

```
-- data should be chararray, PigStorage('|') return bytearray which will not work for this example
inpt = load '/pig_fun/input/single_tuple_to_multiple.txt' as (line:chararray);

-- split by | and create a row so we can dereference it later
splt = foreach inpt generate FLATTEN(STRSPLIT($0, '\\|')) ;

-- first column is id, rest is converted into a bag and flatten it to make rows
id_vals = foreach splt generate $0 as id, FLATTEN(TOBAG(*)) as value;
-- there will be records with (id, id), but id should not have ':'
id_vals = foreach id_vals generate id, INDEXOF(value, ':') as p, STRSPLIT(value, ':', 2) as vals;
final = foreach (filter id_vals by p != -1) generate id, FLATTEN(vals) as (col, val);
dump final; 
```

**测试输入：**

```
1|c1:11:33|c2:12
234|c1:21|c2:22
33|c1:31|c2:32
345|c1:41|c2:42 
```

**输出**

```
(1,c1,11:33)
(1,c2,12)
(234,c1,21)
(234,c2,22)
(33,c1,31)
(33,c2,32)
(345,c1,41)
(345,c2,42) 
```

我希望它有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T11:19:13.687

这是UDF版本。我更喜欢退回 BAG：

```
import java.io.IOException;

import org.apache.pig.EvalFunc;
import org.apache.pig.backend.executionengine.ExecException;
import org.apache.pig.data.BagFactory;
import org.apache.pig.data.DataBag;
import org.apache.pig.data.DataType;
import org.apache.pig.data.Tuple;
import org.apache.pig.data.TupleFactory;
import org.apache.pig.impl.logicalLayer.FrontendException;
import org.apache.pig.impl.logicalLayer.schema.Schema;

/**
 * Converts input chararray "ID|ColumnName1:Value1|ColumnName2:Value2|.." into a bag 
 * {(ID, ColumnName1, Value1), (ID, ColumnName2, Value2), ...}
 *  
 *  Default rows separator is '|' and key value separator is ':'. 
 *  In this implementation white spaces around separator characters are not removed.
 *  ID can be made of any character (including sequence of white spaces). 
 * @author 
 *
 */
public class TupleToBagColumnValuePairs extends EvalFunc<DataBag> {

    private static final TupleFactory tupleFactory = TupleFactory.getInstance();
    private static final BagFactory bagFactory = BagFactory.getInstance();

    //Row separator character. Default is '|'.
    private String rowsSeparator;
    //Column value separator character. Default i
    private String columnValueSeparator;

    public TupleToBagColumnValuePairs() {
        this.rowsSeparator = "\\|";
        this.columnValueSeparator = ":";
    }

    public TupleToBagColumnValuePairs(String rowsSeparator, String keyValueSeparator) {
        this.rowsSeparator = rowsSeparator;
        this.columnValueSeparator = keyValueSeparator;
    }

    /**
     * Creates a tuple with 3 fields (id:chararray, column:chararray, value:chararray)
     * @param outputBag Output tuples (id, column, value) are added to this bag
     * @param id
     * @param column
     * @param value
     * @throws ExecException
     */
    protected void addTuple(DataBag outputBag, String id, String column, String value) throws ExecException {
        Tuple outputTuple = tupleFactory.newTuple();
        outputTuple.append(id);
        outputTuple.append(column);
        outputTuple.append( value);
        outputBag.add(outputTuple);
    }

    /**
     * Takes column{separator}value from splitInputLine, splits id into column value and adds them to the outputBag as (id, column, value)
     * @param outputBag Output tuples (id, column, value) should be added to this bag
     * @param id 
     * @param splitInputLine format column{separator}value, which start from index 1
     * @throws ExecException
     */
    protected void parseColumnValues(DataBag outputBag, String id,
            String[] splitInputLine) throws ExecException {
        for (int i = 1; i < splitInputLine.length; i++) {
            if (splitInputLine[i] != null) {
                int columnValueSplitIndex = splitInputLine[i].indexOf(this.columnValueSeparator);
                if (columnValueSplitIndex != -1) {
                    String column = splitInputLine[i].substring(0, columnValueSplitIndex);
                    String value = null;
                    if (columnValueSplitIndex + 1 < splitInputLine[i].length()) {
                        value = splitInputLine[i].substring(columnValueSplitIndex + 1);
                    }
                    this.addTuple(outputBag, id, column, value);
                } else {
                    String column = splitInputLine[i];
                    this.addTuple(outputBag, id, column, null);
                }
            }
        }
    }

    /**
     * input - contains only one field of type chararray, which will be split by '|'
     * All inputs that are: null or of length 0 are ignored.
     */
    @Override
    public DataBag exec(Tuple input) throws IOException {
        if (input == null || input.size() != 1 || input.isNull(0)) {
            return null;
        }

        String inputLine = (String)input.get(0);
        String[] splitInputLine = inputLine.split(this.rowsSeparator, -1);

        if (splitInputLine.length > 1 && splitInputLine[0].length() > 0) {
            String id = splitInputLine[0];
            DataBag outputBag = bagFactory.newDefaultBag();            
            if (splitInputLine.length == 1) { // there is just an id in the line
                this.addTuple(outputBag, id, null, null);
            } else {
                this.parseColumnValues(outputBag, id, splitInputLine);
            }

           return outputBag; 
        }
        return null;
    }

    @Override
    public Schema outputSchema(Schema input) {
        try {
            if (input.size() != 1) {
                throw new RuntimeException("Expected input to have only one field");
            }

            Schema.FieldSchema inputFieldSchema = input.getField(0);
            if (inputFieldSchema.type != DataType.CHARARRAY) {
                throw new RuntimeException("Expected a CHARARRAY as input");
            }

            Schema tupleSchema = new Schema();
            tupleSchema.add(new Schema.FieldSchema("id", DataType.CHARARRAY));
            tupleSchema.add(new Schema.FieldSchema("column", DataType.CHARARRAY));
            tupleSchema.add(new Schema.FieldSchema("value", DataType.CHARARRAY));

            return new Schema(new Schema.FieldSchema(getSchemaName(this.getClass().getName().toLowerCase(), input), tupleSchema, DataType.BAG));
        } catch (FrontendException exx) {
            throw new RuntimeException(exx);
        }
    }

} 
```

以下是它在 PIG 中的使用方式：

```
register 'path to the jar';
define IdColumnValue myPackage.TupleToBagColumnValuePairs();

inpt = load '/pig_fun/input/single_tuple_to_multiple.txt' as (line:chararray);
result = foreach inpt generate FLATTEN(IdColumnValue($0)) as (id1, c2, v2);
dump result; 
```

用包编写 UDF 的一个很好的灵感请参阅[LinkedIn 的 DataFu 源代码](https://github.com/linkedin/datafu/tree/master/src/java/datafu/pig/bags)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T21:03:20.633

您可以在 STRSPLIT 的输出上使用 TransposeTupleToBag（来自 DataFu lib 的 UDF）来获取包，然后 FLATTEN 包以在每个原始列中创建单独的行。

# android - 如何使用 Android 从 json 对象中获取最大值/最大值？

> ID：11287363
> 
> 赞同：1
> 
> 时间：2012-07-02T03:01:20.327
> 
> 标签：android, json

我有这样的json字符串：

```
{"GetReportResult":[
{"bulan":"4","total":"2448","type":"CHEESE1K","uang":"8847823"},{"bulan":"4","total":"572476","type":"ESL","uang":"5863408410"},{"bulan":"4","total":"46008","type":"ESL500ML","uang":"234498301"},{"bulan":"4","total":"228985","type":"UHT","uang":"1367172990"},{"bulan":"4","total":"40995","type":"WHP","uang":"235750452"},{"bulan":"5","total":"5703","type":"CHEESE1K","uang":"134929306"},{"bulan":"5","total":"648663","type":"ESL","uang":"6645764498"},{"bulan":"5","total":"49305","type":"ESL500ML","uang":"266817346"},{"bulan":"5","total":"287867","type":"UHT","uang":"1446897805"},{"bulan":"5","total":"51958","type":"WHP","uang":"631994613"},{"bulan":"6","total":"4390","type":"CHEESE1K","uang":"104527773"},{"bulan":"6","total":"443335","type":"ESL","uang":"4540123082"},{"bulan":"6","total":"28462","type":"ESL500ML","uang":"148290912"},{"bulan":"6","total":"213250","type":"UHT","uang":"1197646870"},{"bulan":"6","total":"27049","type":"WHP","uang":"189802525"}
]} 
```

我想获得 的最大值/最大值`bulan`，即`6`。如何在安卓上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:12:17.127

这应该这样做。

```
JSONObject json = new JSONObject("your json string");
JSONArray jsonArray = json.getJSONArray("GetReportResult");

int max = -1;
for(int i = 0; i < jsonArray.length(); i++) {
    JSONObject temp = jsonArray.getJSONObject(i);
    if(temp.getInt("bulan") > max) 
        max = temp.getInt("bulan");
}

Log.e("Max", "" + max); 
```

# ios - iOS中的动画补间

> ID：11287365
> 
> 赞同：1
> 
> 时间：2012-07-02T03:01:49.300
> 
> 标签：ios, animation, core-animation, tween, easing

我即将开始我的第一个大型 iOS 应用程序的工作，但还没有真正开始编写任何代码......所以这都是理论上的，而且我现在还处于设计阶段。 

无论如何，我知道我需要在应用程序中添加一些动画效果，所以我只是在做一些研究。在 Flash (AS3) 中，有诸如 Tweener 和 TweenLite 之类的库，它们具有大量可用的缓动选项。

我是不是疯了，或者除了四个标准选项之外真的没有其他可用的缓动选项： 

*   UIViewAnimationCurveEaseIn
*   UIViewAnimationCurveEaseOut
*   UIViewAnimationCurveEaseInOut
*   UIViewAnimationCurveEaseOut

我真的要深入挖掘核心动画来完成这个吗？或者有谁知道一些会派上用场的 3rd 方 SDK。

谢谢大家...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:51:13.093

实际上，还有一个： UIViewAnimationCurveLinear ......哇，这是一个令人沮丧的。您之所以看到如此有限的选项，是因为您只探索了 UIView 的核心动画包装器。Core Animation 比这更强大，更有能力。如果您需要对动画进行绝对细粒度控制，请使用 CAKeyFrameAnimations，如果您需要软粒度控制，请使用 CAAnimation 和 CABasicAnimation。甚至 CATransaction 也可以。iOS 内置了基本的缓动曲线，因为您需要提供比这更复杂的交互指令。请参阅[此处](http://cocoawithlove.com/2008/09/parametric-acceleration-curves-in-core.html)了解与 CAKeyframeAnimation 配合使用的一系列出色的缓动曲线。当然，这并不适合所有人......所以有'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:13:36.537

正如另一张海报所建议的那样，关键帧动画让您可以描述沿复杂曲线或指定关键点之间的运动。

如果您想要一个自定义计时功能，您可以非常简单地创建一个，并在您可以指定其中一个固定计时功能（如线性或缓入、缓出）的任何地方使用它。查看 CAMediaTiming Function 类参考。具体看方法functionWithControlPoints::::

这使您可以使用单个三次贝塞尔曲线创建时序曲线。恐怕这是你唯一的选择。

你具体追求什么效果？

# linux - 如何从 subshel l 获取标准输出？

> ID：11287366
> 
> 赞同：0
> 
> 时间：2012-07-02T03:01:54.760
> 
> 标签：linux, shell, subshell

我有这样的脚本？

```
command='scp xxx 192.168.1.23:/tmp'
su - nobody -c "$command" 
```

主外壳没有打印任何信息。如何从 sub 命令获取输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:36:13.003

您只需重定向相应的输出通道即可获得其所有输出：

```
command='scp ... '
su - nobody -c "$command" > file 
```

或者

```
var=$(su - nobody -c "$command") 
```

但是如果你什么也没看到，可能是 scp 的诊断输出被禁用了？您的真实命令中是否有“-q”选项？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:09:34.390

你实际上并没有运行 scp。当您使用

```
VAR=value cmd ... 
```

语法，`VAR=value`设置进入环境，`cmd`但在当前 shell 中不可用。你之后的命令`-c`是空的，或者`$command`如果有的话的前一个值。

# android - 使用 LocalBroadcastManager 是发送应用范围事件的最合适方式吗？

> ID：11287370
> 
> 赞同：2
> 
> 时间：2012-07-02T03:03:08.780
> 
> 标签：android, broadcastreceiver

我想知道是否`LocalBroadcastManager`比`Objects`订阅事件发布者的方法调用更好，以及开销（如果有的话）是否值得。

我正在开发一个聊天应用程序，一个示例过程包括将新收到的原始消息传递给`SQLite`数据库存档，然后提醒`Activity`数据库已更新，以便它可以获取新的消息集合。现在，一旦 a`MessageReceiver`收到一条新消息，它就会将该`DatabaseInterface`消息添加到数据库中，然后`Activity`通过方法调用向 an 发出警报。据我所知，这结合了`MessageReceiver`和`Activity`，而且，如果我没记错的话，那很糟糕。我喜欢使用[Guava EventBus](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)的想法，但目前，最新的 Android API 8 兼容版本（11.2）只有 beta 版本。我想实现自己的 using `Handlers`，但记得`BroadcastReceiver`and 东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T04:16:15.457

是的，我认为这是一个很好的用例，`LocalBroadcastManager`我将在这种情况下使用。

# entity-framework - 为什么我不能有一个具有一对零关联的引用约束？

> ID：11287372
> 
> 赞同：0
> 
> 时间：2012-07-02T03:03:34.850
> 
> 标签：entity-framework, lazy-loading

我首先使用实体​​框架 4.3 模型，但无法弄清楚为什么我不允许具有一对零对一的关联以及引用约束。

我有两个主要问题。我不能强制引用完整性（没有人工干预），而且我的延迟加载似乎不起作用......我所有的一对多关联都很好。

我基本上有两个表，贷款和合同。Contracts 表有一个 LoanId 的标量字段。

在*提交*贷款之前，它没有合同数据，由于合同数据的大小，我选择不将所有内容放在同一个表中。IE。除非确实需要，否则我不希望从数据库中检索合同数据。

我四处搜索，似乎找不到任何可以明确回答我的问题的模型优先信息。任何可以帮助我理解和澄清我的问题的信息将不胜感激。

问候克雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:49:04.303

我猜`LoanId`字段不是合同表中的主键。在这种情况下，您不能拥有这种一对一的关系，因为 EF 不支持它。在表中创建`LoanId`字段时`Contracts`，强制一对一关系的唯一方法是在该字段上添加唯一约束。EF 当前不支持唯一键（主键除外），因此创建一对一关系的唯一方法是创建主键 ( `Loan.Id`<-> `Contract.Id`) 之间的关系。如果您不遵循这一点，您将在设计器中出现错误。

# php - 创建一个身份验证平台，在 JQuery 之间发布？

> ID：11287378
> 
> 赞同：1
> 
> 时间：2012-07-02T03:04:52.887
> 
> 标签：php, jquery

好的，这是我想做的概念验证项目。我有一个页面通过 JQuery 中的某种 POST 响应来检查身份验证状态。这是代码：

```
 $('#submit').click(function(){
    window.open('http://authorize.openauth.tk/','title', 'width=360, height=240');
        return false;
$.ajax({
type: POST,
url: "http://authorize.openauth.tk/",
success: function(data){
if(data == '1'){
    $('h1').fadeToggle(function(){
      $('#authStat').css('color', 'green').html("Authenticated!");
          $('h1').fadeToggle();
    });
  }
  else{
      $('h1').fadeToggle(function(){
      $('#authStat').css('color', 'red').html("Not authenticated.");
      $('h1').fadeToggle();
      });
  }}
  });
}); 
```

当我单击登录时，它会打开登录窗口，然后就可以了。在 Firebug 中，我没有看到“authorize.openauth.tk”的 POST 请求。现在，我知道上面的代码没有按照我的描述进行。我应该使用什么代码？我的主要目标：单击一个按钮，打开与页面的连接，在单独的窗口中打开该页面，然后将窗口中的页面报告回主页。这是“窗口中的页面”的代码：

```
var referrer =  document.referrer;
$('#submit').click(function(){
    $.ajax({
    type: 'POST',
    url: "auth.php",
    data: $('form').serialize(),
    success: function(data) {
        if(data == "0"){
            $('h1').html("Wrong Username/Password");
        }
    else{
        $.post(referrer, data);
    }
  }
});
alert(referrer);
}); 
```

# django - 如何添加到 django admin 的链接，如“添加对象”链接？

> ID：11287382
> 
> 赞同：1
> 
> 时间：2012-07-02T03:05:32.190
> 
> 标签：django, django-admin

在 django admin 中，当您看到对象的项目列表时，管理页面右上角有一个链接，上面写着“添加对象”。

如何在 django admin 中添加类似的链接说“添加对象”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:25:19.047

得到了解决方案。通过覆盖 django 管理模板解决。

阅读[此](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)内容以获取更多信息。

# ruby-on-rails - Emberjs：商店中缺少 findAll 方法

> ID：11287383
> 
> 赞同：1
> 
> 时间：2012-07-02T03:06:02.320
> 
> 标签：ruby-on-rails, ember.js, ember-data

我正在尝试让 emberjs 在 Rails 上工作，并且一直在关注本教程：

[http://www.zhubert.com/blog/2012/04/28/ember-dot-js-and-rails-part-2/](http://www.zhubert.com/blog/2012/04/28/ember-dot-js-and-rails-part-2/)

当我尝试在浏览器控制台中运行此命令时：

```
var posts = App.store.findAll(App.Post) 
```

我收到一个错误，因为商店中没有 findAll 方法。我正在使用 ember-data 并像这样设置商店：

```
App.store = DS.Store.extend({
  revision: 4,
  adapter: DS.RESTAdapter.create()
}); 
```

我一直在使用 ember rails 生成器，但整个事情看起来很不稳定，请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T05:02:35.700

当使用 Ember 的新路由器时，它希望您提供一个名为`App.Store`. 然后将其实例化为`App.router.store`. 该`store`属性还会在路由器实例化的任何控制器上自动设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:35:18.700

好的解决了这个问题。rails 生成器生成了错误的代码。

这：

```
App.store = DS.Store.extend({
  revision: 4,
  adapter: DS.RESTAdapter.create()
}); 
```

应该：

```
App.store = DS.Store.create({
  revision: 4,
  adapter: DS.RESTAdapter.create()
}); 
```

另外，我可能会向其他遇到问题的人提及，ember-rails 生成器也会创建这个：

```
App.ApplicationController = Ember.ObjectController.extend({

}); 
```

什么时候应该：

```
App.ApplicationController = Ember.Object.extend({

}); 
```

# events - Backbone.js - 渲染其他视图后事件触发器不起作用

> ID：11287386
> 
> 赞同：0
> 
> 时间：2012-07-02T03:06:59.773
> 
> 标签：events, view, backbone.js, triggers, render

我的路由器中有一个`addPost`功能。我不想在`postAddView`每次调用函数时重新创建：

```
addPost: function () {
  var that = this;
  if (!this.postAddView) {
    this.postAddView = new PostAddView({
      model: new Post()
    });
    this.postAddView.on('back', function () {
      that.navigate('#/post/list', { trigger: true });
    });
  }

  this.elms['page-content'].html(this.postAddView.render().el);
} 
```

这是 PostAddView：

```
PostAddView = backbone.View.extend({
  events: {
    'click #post-add-back': 'back'
  }
  , back: function (e) {
    e.preventDefault();
    this.trigger('back');
  }
}); 
```

第一次渲染 postAddView 时，事件触发器运行良好。但是，在渲染其他视图`page-content`并渲染`postAddView`回来之后，事件触发器将不再被触发。不过，以下版本的`addPost`效果很好。

```
addPost: function () {
  var that = this, view;

  view = new PostAddView({
    model: new Post()
  });

  this.elms['page-content'].html(view.render().el);

  view.on('back', function () {
    delete view;
    that.navigate('#/post/list', { trigger: true });
  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:52:50.860

在某个地方你正在调用 jQuery[`remove`](http://api.jquery.com/remove/)和那个

> 除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

因此[`delegate`](http://api.jquery.com/delegate/)Backbone 用于将事件绑定到您的调用`postAddView.el`将丢失。然后，当您重新添加时`postAddView.el`，不再`delegate`附加任何事件，也不会触发任何事件。请注意，Backbone.View 的标准[`remove`](http://documentcloud.github.com/backbone/#View-remove)方法调用 jQuery 的`remove`; jQuery 中的其他一些东西，就像[`empty`](http://api.jquery.com/empty/)对事件处理程序做类似的事情一样。因此，杀死你的实际函数调用`delegate`可能隐藏在其他东西的深处。

您可以尝试[`delegateEvents`](http://documentcloud.github.com/backbone/#View-delegateEvents)手动调用：

```
this.elms['page-content'].html(this.postAddView.render().el);
this.postAddView.delegateEvents(); 
```

或者更好的是，只需将视图丢弃并在每次需要时创建一个新视图。您的视图对象应该非常轻量级，因此创建新对象应该比手动跟踪现有视图更便宜且省事得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:03:44.123

如果你真的想重用当前的 DOM 和 View，你不需要像你一样一次又一次地设置元素，你调用的一切`.html()`都是在破坏 View 的 DOM 并再次生成并丢失事件。此外，我更喜欢在渲染视图之前在 DOM 中添加“el”。我将以这种方式拥有您的功能：

```
addPost: function () {
  if (!this.postAddView) {
    this.postAddView = new PostAddView({
      model: new Post()
    });
    this.postAddView.on('back', this.onBack);
    this.elms['page-content'].html(this.postAddView.el);
  }

  this.postAddView.render();

},

onBack : function () {
  this.navigate('#/post/list', { trigger: true });
} 
```

我不喜欢使用局部变量来引用“this”。如果您的所有视图都`_.bindAll(this)`在初始化方法中使用，您可以将您的事件绑定到您的视图并可以使用它（检查我如何转换 onBack）。

使用我的代码，无需手动调用`this.delegateEvents()`

# html - 行内块元素之间的空格和换行符占用空间

> ID：11287387
> 
> 赞同：1
> 
> 时间：2012-07-02T03:07:11.570
> 
> 标签：html, css

[我在这个演示](http://jsfiddle.net/S7CFk/)中使用'display：inline-block'编写了一个带有弹性列的页面，但是遇到了空格和换行符的问题：

即使`.left`和`.right`都是`width:50%`，但由于它们之间有空格和换行符，它们实际上占据了超过 100% 的宽度，所以`.right`只进入下一行。

```
<!--demo 1-->
<div class="container">
    <div class="left box">
    </div>
    <div class="right box">
    </div>
</div> 
```

删除 和 之间的空格和换行符`.left`，`.right`现在它们在同一行，但 HTML 的表现力较差。

```
<!--demo 2-->
<div class="container">
    <div class="left box">
    </div><div class="right box">
    </div>
</div> 
```

那么，无论如何要保持缩进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:34:17.083

[工作小提琴](http://jsfiddle.net/S7CFk/1/)

在 CSS 中添加两个类：

```
.lfloat {
    float: left;
}

.clrflt {
    clear: both;
} 
```

将您的 HTML 代码更改为：

```
<!--demo 1-->
<div class="container">
    <div class="left box lfloat"></div>
    <div class="right box lfloat"></div>
    <div class="clrflt></div>
</div> 
```

## 已编辑

inline-blocking 增加了一个 4px 的边框（因此它移动`div`到下一行）。因此，`float`是一种更优选的方式。

[你可以看到这个](http://jsfiddle.net/S7CFk/2/)使用的小提琴`display:inline-block`：

```
<html>
    <head>
        <style>
        *{padding:0;margin:0}
        ul#container{width:204px}  //Had to add 4px for extra width
         ul#container li{display:inline-block;height:100px;width:100px;background:#666}
        .left{width:50%}
        .right{width:50%;background:#0ca}
        </style>
    </head>
    <body>
        <ul id="container">
           <li>Left</li>
           <li>Right</li>
        </ul>
    </body>
    </html> 
```

[您可以在此处的博客中阅读有关这些问题的更多信息。](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

# wordpress - Wordpress 显示类别 ID 的帖子

> ID：11287389
> 
> 赞同：0
> 
> 时间：2012-07-02T03:07:19.387
> 
> 标签：wordpress, parent, categories, posts

似乎无法为我认为微不足道的事情找到正确的答案。

我有一些这样排列的类别......

父类 1
- 子类 1
- 子类 2
- 子类 3

...而且我有一些属于子类别 2 的帖子。我希望我的页面显示我当前所在类别的所有帖子。

这就是我现在正在做的事情：

```
<?php
query_posts('cat=2&showposts=10');
    if (have_posts()) : while (have_posts()) : the_post(); ?>      
    <div class="timeline">
    <h3><?php the_title(); ?></h3>
    <?php the_content();?>
    <?php endwhile; else: ?>
    <?php _e('No Posts Sorry.'); ?>
    <?php endif; ?>
</div> 
```

如您所见，我必须手动指定类别（cat = 2），但我希望它自动检测我已经在的类别并显示帖子（这样，如果我在不同的类别中，它将显示那些帖子）。

有什么建议么？

提前致谢。（SO 社区 = 很棒的酱汁）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T13:19:13.130

试试下面的代码：

```
<?php
$current_cat_id  = get_query_var('cat');
$showposts = 10;
$args = array('cat' => $current_cat_id, 'orderby' => 'post_date', 'order' => 'DESC', 'posts_per_page' => $showposts,'post_status' => 'publish');
query_posts($args);
    if (have_posts()) : while (have_posts()) : the_post(); ?>      
    <div class="timeline">
    <h3><?php the_title(); ?></h3>
    <?php the_content();?>
    <?php endwhile; else: ?>
    <?php _e('No Posts Sorry.'); ?>
    <?php endif; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:12:12.020

如果您使用`category.php`，您可以省略`query_posts`，它会自动为您填写帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T06:14:33.693

```
 <?php
    // Start the loop.
    $categories = get_categories('child_of=1');//Parents category id
                        foreach ($categories as $cat) {

                            $option = '<a href="/category/archives/'.$cat->category_nicename.'">';
                            $option .= $cat->cat_name;//parents sub category name
                            $option .= '</a>';
                            echo $option;
                            query_posts('cat=$cat->cat_ID&showposts=10');
if (have_posts()) : while (have_posts()) : the_post(); ?>      

<h3><?php the_title(); ?></h3>
<?php the_content();?>
<?php endwhile; else: ?>
<?php _e('No Posts Sorry.'); ?>
<?php endif;  }?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T06:39:31.563

```
<ul>
<?php
global $post;

$args = array( 'posts_per_page' => 5, 'offset'=> 0, 'category' => 1 );
// 1 is a cat id.
// 

$myposts = get_posts( $args );

foreach( $myposts as $post ) : setup_postdata($post); ?>
<li>
<a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
</li>
<?php endforeach; ?>

</ul> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-11T13:20:08.613

试试这个，这是更好的解决方案，您还可以使用它按类别 ID 显示相关帖子...

只需使用此行调用下面提到的函数。把它放在你的模板或 page.php/single.php 文件中。

通过放置此行调用：`related_post_title('enter cat id here..');`

这是函数并将其放入`function.php`文件中。

相关帖子功能：

```
function related_post_title($cat_id){

    $cat = $cat_id;

    // Check if it is page only
    if ( is_page() || is_single()) {
        $args=array(
            'cat'  =>  $cat,
            'order'  =>  DESC,
            'orderby'  =>  rand,
            'post__not_in'  =>  array($post->ID),
            'posts_per_page'  =>  9999,
            'caller_get_posts'  =>  1
            );

        $my_query = null;

        $my_query = new WP_Query($args);

        if( $my_query->have_posts() ) {

            echo  ' <ul> ';

            while ($my_query->have_posts()) : $my_query->the_post(); ?>

                <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>

            <?php

            endwhile;

            echo '</ul>';
        }
        wp_reset_query();
    }
} 
```

如果有任何疑问请告诉我，我会帮助你...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-06T13:03:36.273

尝试

```
$args = array( 'posts_per_page' => 5, 'offset'=> 0, 'cat' => 1 ); 
```

# datatables - 要删除的数据表中的排序箭头

> ID：11287390
> 
> 赞同：3
> 
> 时间：2012-07-02T03:07:35.757
> 
> 标签：datatables

在删除数据表标题行上的排序箭头（asc 和 desc）时需要帮助，然后当用户单击标题列时，将出现一个升序箭头，当然数据将按 asc 顺序排序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:55:33.543

```
 $("#MyDataTable").dataTable({            
 "aoColumns": [{"bSortable": false}, null]        
 }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T05:41:42.040

```
"aoColumnDefs": [ { "bSortable": false, "aTargets": [ 1, 3 ] } ] 
```

从第二列和第四列中删除排序箭头。

参考：[http ://wordpress.org/support/topic/plugin-wp-table-reloaded-removing-the-updown-sorting-arrows-on-specific-columns](http://wordpress.org/support/topic/plugin-wp-table-reloaded-removing-the-updown-sorting-arrows-on-specific-columns)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-08T11:03:33.160

```
> This is Best Answer for removing sort arrow
> 
> 
> $('#itjbg-table').dataTable({
>     'columnDefs': [{ 'orderable': false, 'targets': 0 }], // hide sort icon on header of first column
>     'aaSorting': [[1, 'asc']] // start to sort data in second column }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-22T19:42:24.950

在 dataTables.Bootstrap.css 中有三个添加这些排序图像的类。它们是sorting、sorting_asc 和sorting_desc。在 DataTable 初始化期间，禁用排序，如“satej kumar sahu”通过 bSortable 所述：false。然后为标题做一个removeClass，我的标题有一个id="division"。然后为标题创建一个单击事件，相同的 id，执行另一个 removeClass 以保留任何其他功能，在我的情况下，通过 columnFilter 保留列下拉列表。查看附加代码。

```
$('#example').dataTable({
            "order": [[1, "asc"], [7, "asc"], [4, "asc"]],
            "aoColumnDefs": [{ "bSortable": false, "aTargets": [1]}],
            "columns":[null, {className: ""}, null, null, null , null, null, null, null, null]
        }).columnFilter({
            sPlaceHolder: "head:after",
            aoColumns: [null, { type: "select" }, null,
            null, null, null, null, null, null, null]
        });
        $('#division').removeClass('sorting sorting_asc sorting_desc');

$('#division').click(function () {
        		    $('#division').removeClass('sorting sorting_asc sorting_desc');
        		});
```

```
table.dataTable thead .sorting { background: url('../images/sort_both.png') no-repeat center right; }
table.dataTable thead .sorting_asc { background: url('../images/sort_asc.png') no-repeat center right; }
table.dataTable thead .sorting_desc { background: url('../images/sort_desc.png') no-repeat center right; }
```

```
<thead>
                    <tr class="info">                                     
					    <th scope="col">Title</th>
					    <th id="division" scope="col">Division</th>                        
                        <th scope="col">Attendee</th>
                        <th scope="col">Supervisor</th>
					    <th scope="col">Start Date</th>
					    <th scope="col">End Date</th>
                        <th scope="col">Duration(hr)</th>
					    <th scope="col">Fee</th>
                        <th scope="col">Status</th>
                        <th scope="col">Comments</th>					   
                    </tr>    
                </thead>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-13T08:52:39.757

# ****如何删除数据表 GLYPHCONS / 图标！****

 **在您的 css 文件上使用以下代码：如果您在表头上看到列 glyph-cons，请使用此！

```
th.sorting_asc::after, th.sorting_desc::after { 内容:"" !important; }
```

如果您看到表格数据上的字形标志，请使用它！

```
td.sorting_asc::after, td.sorting_desc::after { content:"" !important; }
```

简而言之，更改***class="sorting_desc/asc"所在的******“this”***部分。

 *```
*"this".sorting_asc::after, "this"* .sorting_desc::after { content:"" !important; }
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-21T17:50:39.013

我从您的问题中得到的是，您想从表中删除初始排序，并且仅在用户单击列标题时进行排序。您可以使用以下代码执行此操作：

```
$(document).ready( function() {
  $('#example').dataTable( {
    "aaSorting": []
  } );
} ); 
```

[http://datatables.net/ref#aaSorting](http://datatables.net/ref#aaSorting)***

# javascript - javascript appendChild 不工作

> ID：11287391
> 
> 赞同：1
> 
> 时间：2012-07-02T03:07:36.310
> 
> 标签：javascript, html, appendchild

这是我的代码，我试图将数组中的元素附加到下拉选择框中。在 appendChild 方法之前，代码工作正常。我无法弄清楚为什么那条线不起作用。这是代码

```
</head>
<body>
    <h1> Eat Page</h1>
    <p id="test">Hi</p>
    <select id="CusineList"></select>

    <script type="text/javascript">

        var cuisines = ["Chinese","Indian"];
        var sel = document.getElementById('CuisineList');

        for(var i = 0; i <cuisines.length; i++){

            var optionElement = document.createElement("option");

            optionElement.innerHTML = cuisines[i];

            optionElement.value = i;//cuisines[i];
            //document.getElementById("test").innerHTML = cuisines.length;
            sel.appendChild(optionElement);

        }
    </script>

    <p> When </p>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T03:17:07.780

你有拼写失误。

您的 id 是`CusineList`，但是当您使用`CuisineList`时选择。

除此之外，[您的代码有效](http://jsfiddle.net/UpXSV/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:18:32.470

有错别字

```
var sel = document.getElementById('CuisineList'); 
```

这应该是

```
var sel = document.getElementById('CusineList'); 
```

或更改您的html。从

```
<select id="CusineList"></select> 
```

到

```
<select id="CuisineList"></select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T06:59:28.160

当我们使用java脚本追加节点时，首先设置节点的属性/属性后，我们必须将此节点追加到其相关的父节点中，在追加节点之后，我们可以设置其内容或相关的内部HTML/文本。

这是上述问题的解决方案：

```
var cuisines = ["Chinese", "Indian"];var sel = document.getElementById('CusineList');
var optionElement;
for (var i = 0; i < cuisines.length; i++) {
    optionElement = document.createElement("option");
    optionElement.value = i;
    sel.appendChild(optionElement);
    optionElement.innerHTML = cuisines[i];
    document.getElementById("test").innerHTML = cuisines.length;
} 
```

我在[http://codebins.com/codes/home/4ldqpcn上创建了一个带有解决方案的 bin](http://codebins.com/codes/home/4ldqpcn)

# eclipse - 在 Eclipse IDE 中从 Cloud p2 存储库安装插件

> ID：11287395
> 
> 赞同：3
> 
> 时间：2012-07-02T03:08:02.270
> 
> 标签：eclipse, plugins, p2

我最近一直在阅读很多关于 p2 的内容以满足我的要求。大多数在线 p2 文档都指向 RCP 的 p2。

我的要求是插件仓库。我有一个在 Eclipse IDE 中使用的插件。

我不想更改存储库位置，但基于 Eclipse 版本，如果用户查找安装新软件或检查更新，则需要下载相应的插件。

我的仓库目前包含所有版本的所有插件。但我每次都需要根据版本为我的用户提供不同的 URL。

例如，我正在使用 Eclipse 3.7(Indigo)。我通过添加 p2 Repo URL 来安装插件。现在用户决定将某些需求转移到 Eclipse 3.6，我希望他连接到相同的 p2 Repo URL 并下载为 Eclipse 3.6 创建的插件。

使用 p2 Discovery 绝对可以做到这一点，或者我可以使用复合存储库对下载进行分类，但我不想做任何这些。只是想知道是否有任何我可以保留的 API，以便在处理 URL 和查找更新之前，我可以检查 Eclipse 的版本并根据版本将其重定向到内部 URL。这在 RCP 中是可能的，想知道我是否可以在 Eclipse p2 UI 中做到这一点。

所有 p2 UI 看起来都是内部类。任何指令将不胜感激。

马来语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T06:51:35.950

我不知道你为什么要自定义 p2 的 UI。实际上，您可以根据捆绑包的版本限制可以安装哪些功能。

如果您的插件仅适用于 Eclipse 3.6，您可以将其定义为 require ' **org.eclipse.ui.workbench** ' `[3.6.0,3.7.0)`，对 Indigo 使用版本范围 [3.7.0,3.8.0)。P2 将严格遵守这些合同，只允许将它们安装到相应的 Eclipse 版本中。

# javascript - 使用js将字符串附加到图像src

> ID：11287396
> 
> 赞同：0
> 
> 时间：2012-07-02T03:08:12.677
> 
> 标签：javascript, append, src

我有一个页面`<img src="/images/product/whatever-image.jpg" alt="" />`

我想要它，以便在加载页面时，将字符串“？Action=thumbnail”附加到 src 的值，使其`src="/images/product/whatever-image.jpg?Action=thumbnail"`

我如何使用js实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T03:10:23.923

```
window.addEventListener('load', function(){
    /* assuming only one img element */
    var image = document.getElementsByTagName('img')[0];

    image.src += '?Action=thumbnail';
}, false); 
```

请注意，更改图像的来源将从服务器“重新获取”图像——即使图像是相同的。这将在服务器端更好地完成。

* * *

***评论后更新：***

```
window.addEventListener('load', function(){
    /* assuming only one div with class "divclassname" and img is first child */
    var image = document.getElementsByClassName('divclassname')[0].firstChild;

    image.src += '?Action=thumbnail';
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:10:44.267

用这个：

```
window.onload = function() {
    document.getElementById('myImage').src += "/Action=thumbnail";
}; 
```

# java - Java：JButton actionListener 解释

> ID：11287399
> 
> 赞同：1
> 
> 时间：2012-07-02T03:09:10.583
> 
> 标签：java, swing, interface, jbutton, actionlistener

我对 a 如何`JButton`工作感到非常困惑。我已经阅读了[JButton](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JButton.html)的 oracle 文档，但我没有看到 JButton 如何添加一个动作监听器。我真的一直想知道像 JFrames 这样的东西以及所有可以拥有类似东西的东西`.addMouseListener`。谁能解释一下如何`JButton`像`.addActionListener(...)`语法一样添加一个 actionListener ？

我想知道如何做到这一点的原因是创建我自己的“JButton”，每个说可以添加一个 actionListener，它会在需要时触发事件。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:23:48.380

这是您要了解架构所必须做的。首先，这里使用的设计模式是观察者模式——

> 实现发布者/订阅者场景。我们需要一种机制，允许我们在发布者对象更改状态时通知订阅者对象。

[您可以在此处](http://www.codeproject.com/Articles/47948/The-Observer-Design-Pattern)找到有关实施它的更多信息。

但是，如果您的目标是制作自己的 JButton，那么最好的方法是子类化 JButton。

```
class MyCustomButton extends JButton{} 
```

你问如何`JFrame`才能拥有`addMouseListener`- 这是因为`JFrame`extends `java.awt.Component`。希望这可以帮助。

## 编辑

观察者不做任何事情。如果有任何变化，主题会通知观察者。这是通知方法。

```
 public void notify()
      {
        for (int i=0;i < observers.size();i++)
        {
          Observer ob = (Observer)observers.get(i);
          ob.update(newValue);
        }
      } 
```

再次回到 Packet 和 Bucket 示例 - Packet - Observer Bucket - Subject

Bucket wires the Packet that a new Packet has entered the Bucket. In classes Bucket class will call the notify method and all the registered Packets will be notified. If a Packet wishes to unsubscribe itself from the Bucket it just needs to call the Unsubscribe method and it will remove the Object from the ArrayList of the Bucket.

# php - 使用手机时如何显示手机的型号名称

> ID：11287401
> 
> 赞同：0
> 
> 时间：2012-07-02T03:09:44.500
> 
> 标签：php

```
$agent = $_SERVER['HTTP_USER_AGENT'];

if(preg_match('/iPhone/i', $agent)){
    echo "You're using Iphone";
} else if(preg_match('/Android/i', $agent)){
    echo "You're using Iphone";
} else if(preg_match('/Blackberry/i', $agent)){
    echo "You're using Blackberry";
} 
```

运行手机时的想法是型号名称，例如：Iphone => 显示型号是 Iphone 4S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:20:51.033

您可以使用名为[WURFL](http://wurfl.sourceforge.net/)的库来做到这一点。

这个这个，你可以很容易地做到：

```
$user_agent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0; NOKIA; Lumia 800)";
$requestingDevice = $wurflManager->getDeviceForUserAgent($user_agent);
$is_wireless = ($requestingDevice->getCapability('is_wireless_device') == 'true');
$is_smarttv = ($requestingDevice->getCapability('is_smarttv') == 'true');
$is_tablet = ($requestingDevice->getCapability('is_tablet') == 'true');
$is_phone = ($requestingDevice->getCapability('can_assign_phone_number') == 'true'); 
```

# python - 如何使用 pil 对没有白色背景（透明？）的徽标进行圆角处理？

> ID：11287402
> 
> 赞同：12
> 
> 时间：2012-07-02T03:09:45.117
> 
> 标签：python, python-imaging-library, transparent, rounded-corners

我有一个方形徽标，我需要对其进行圆角处理，搜索了一段时间并获得了以下代码“工作”：

```
def round_corner_jpg(image, radius):
    """generate round corner for image"""
    mask = Image.new('RGB', image.size)
    #mask = Image.new('RGB', (image.size[0] - radius, image.size[1] - radius))
    #mask = Image.new('L', image.size, 255)
    draw = aggdraw.Draw(mask)
    brush = aggdraw.Brush('black')
    width, height = mask.size
    draw.rectangle((0,0,width,height), aggdraw.Brush('white'))
    #upper-left corner
    draw.pieslice((0,0,radius*2, radius*2), 90, 180, None, brush)
    #upper-right corner
    draw.pieslice((width - radius*2, 0, width, radius*2), 0, 90, None, brush)
    #bottom-left corner
    draw.pieslice((0, height - radius * 2, radius*2, height),180, 270, None, brush)
    #bottom-right corner
    draw.pieslice((width - radius * 2, height - radius * 2, width, height), 270, 360, None, brush)
    #center rectangle
    draw.rectangle((radius, radius, width - radius, height - radius), brush)
    #four edge rectangle
    draw.rectangle((radius, 0, width - radius, radius), brush)
    draw.rectangle((0, radius, radius, height-radius), brush)
    draw.rectangle((radius, height-radius, width-radius, height), brush)
    draw.rectangle((width-radius, radius, width, height-radius), brush)
    draw.flush()
    del draw
    return ImageChops.add(mask, image) 
```

然后我保存了返回的图像对象，但是 [像这样](http://www.flickr.com/photos/76230909@N03/7484692296/in/photostream)在角落里有白色背景 我怎样才能摆脱白色背景或让它不可见？先谢谢了~

编辑：这是 fraxel 的代码，谢谢~

```
def add_corners(im, rad):
    circle = Image.new('L', (rad * 2, rad * 2), 0)
    draw = ImageDraw.Draw(circle)
    draw.ellipse((0, 0, rad * 2, rad * 2), fill=255)
    alpha = Image.new('L', im.size, "white")
    w, h = im.size
    alpha.paste(circle.crop((0, 0, rad, rad)), (0, 0))
    alpha.paste(circle.crop((0, rad, rad, rad * 2)), (0, h - rad))
    alpha.paste(circle.crop((rad, 0, rad * 2, rad)), (w - rad, 0))
    alpha.paste(circle.crop((rad, rad, rad * 2, rad * 2)), (w - rad, h - rad))
    im.putalpha(alpha)
    return im

if __name__ == '__main__':
    im = Image.open('1.jpg')
    im = add_corners(im, 100)
    im.save('out.png')` 
```

很抱歉..我需要图像形状是椭圆而不是矩形，即从图片上写下东西，@fraxel，我仍然可以看到你为我处理的图片中的白色角落

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-02T09:58:50.987

首先，确保以支持透明度的格式保存图像。`PNG`会，`JPG`不会...下面是一些非常不错的代码，可以添加透明角。它是这样工作的：

1.  绘制一个半径为 , 的圆`rad`，使用`draw.ellipse()`
2.  为 Alpha 通道创建与图像大小相同的图像
3.  将我们的圆圈切成四块（圆角），并将它们放在 alpha 图像的正确角落
4.  使用将 alpha 通道放入图像中`putalpha()`
5.  另存为`png`，从而保持透明度。

这是代码：

```
import Image, ImageDraw

def add_corners(im, rad):
    circle = Image.new('L', (rad * 2, rad * 2), 0)
    draw = ImageDraw.Draw(circle)
    draw.ellipse((0, 0, rad * 2, rad * 2), fill=255)
    alpha = Image.new('L', im.size, 255)
    w, h = im.size
    alpha.paste(circle.crop((0, 0, rad, rad)), (0, 0))
    alpha.paste(circle.crop((0, rad, rad, rad * 2)), (0, h - rad))
    alpha.paste(circle.crop((rad, 0, rad * 2, rad)), (w - rad, 0))
    alpha.paste(circle.crop((rad, rad, rad * 2, rad * 2)), (w - rad, h - rad))
    im.putalpha(alpha)
    return im

im = Image.open('tiger.jpg')
im = add_corners(im, 100)
im.save('tiger.png') 
```

弯边虎示例：

![在此处输入图像描述](../Images/52f429a58f39bdf3f76255cfbc59f10c.png)

这是您的图像，使用此代码处理，提供透明角：

![在此处输入图像描述](../Images/d71d5f1410921e549c7ac3aa7fbe7899.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:57:13.983

您是否尝试过`image.putalpha(mask)`用蒙版替换图像的 Alpha 通道？这似乎应该做你想做的事。`mask`可能必须处于“L”模式才能正常工作，并且`image`应该可能是“RGBA”，但可能会自动为您转换。

这里的最佳答案提供了一些很好的例子： [如何使用 PIL 生成圆形缩略图？](https://stackoverflow.com/questions/890051/how-do-i-generate-circuar-thumbnails-with-pil)

您的蒙版图像看起来不错，但我认为您想交换“白色”和“黑色”，因此您有一个白色圆角矩形，正是您希望最终图像的形状，在黑色背景上。您可能还需要使用“L”模式（灰度）模式。

获得此图像后，您可以替换`return ImageChops.add(mask, image)`by `image.putalpha(mask); return image`，这应该会导致图像仅在蒙版的黑色区域中是透明的。

您可能需要先转换图像，`image.convert('RGBA')`但我认为这在 PIL 的更高版本中是不必要的，它会自动完成。

类似的东西：（抱歉现在无法测试）

```
def round_corner_jpg（图像，半径）：
    """为图像生成圆角"""
    mask = Image.new('L', image.size) # 默认填充黑色
    绘制 = aggdraw.Draw（蒙版）
    刷 = aggdraw.Brush('白色')
    宽度，高度 = mask.size
    #左上角
    draw.pieslice((0,0,radius*2, radius*2), 90, 180, None, Brush)
    #右上角
    draw.pieslice((宽度 - 半径*2, 0, 宽度, 半径*2), 0, 90, 无, 刷子)
    #左下角
    draw.pieslice((0, 高度 - 半径 * 2, 半径*2, 高度),180, 270, 无, 刷子)
    #右下角
    draw.pieslice((宽度 - 半径 * 2, 高度 - 半径 * 2, 宽度, 高度), 270, 360, 无, 刷子)
    #中心矩形
    draw.rectangle（（半径，半径，宽度 - 半径，高度 - 半径），画笔）
    #四边矩形
    draw.rectangle（（半径，0，宽度 - 半径，半径），画笔）
    draw.rectangle((0, 半径, 半径, 高度-半径), 画笔)
    draw.rectangle（（半径，高度半径，宽度半径，高度），画笔）
    draw.rectangle((宽度-半径，半径，宽度，高度-半径)，画笔)
    draw.flush()
    图像 = image.convert('RGBA')
    image.putalpha（掩码）
    返回图片

```

# python - 在 Python 中处理来自多个套接字的传入数据

> ID：11287411
> 
> 赞同：2
> 
> 时间：2012-07-02T03:11:16.920
> 
> 标签：python, multithreading, sockets

背景：我有一个当前的实现，它从 python 中大约 120 个不同的套接字连接接收数据。在我当前的实现中，我处理每个单独的套接字连接，每个连接都有一个专用线程。这些线程中的每一个都解析数据并最终将其存储在共享锁定字典中。这些套接字没有统一的数据速率，一些套接字比其他套接字获得更多的数据。

问题：这是在 python 中处理传入数据的最佳方式，还是 python 有更好的方式来处理每个线程的多个套接字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:23:29.643

使用异步方法会让你更快乐。例如，作为一个众所周知的应用程序，[Tornado](http://www.tornadoweb.org/)是完美的。您也可以轻松地将 Tornado 的 ioloop 用于 Web 服务器以外的其他事物。

还有其他库，例如[gevent](http://www.gevent.org/)；但我相信 Tornado 是一个更好的地方，因为它既提供了循环，又提供了一个在它之上实现的 Web 服务器，作为如何很好地使用循环的一个很好的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:23:51.047

如果您正在使用线程，那基本上就是您要这样做的方式。

另一种方法是使用各种异步网络库之一，例如[Twisted](http://twistedmatrix.com)、[Tornado](http://www.tornadoweb.org/)或[GEvent](http://www.gevent.org/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T00:42:34.127

正如您在[阅读异步 UDP 套接字](https://stackoverflow.com/questions/11288120/easiest-way-to-perform-asynchronous-socket-reading-from-udp-in-python)的问题中提到的，[asyncoro](http://asyncoro.sourceforge.net "异步")可用于有效地处理许多异步套接字。在您的问题中使用 asyncoro 的另一个好处是您无需担心锁定共享字典，因为使用 asyncoro 在任何时候最多只有一个协程正在执行，并且没有强制抢占。

# c# - C# 和对象/类

> ID：11287412
> 
> 赞同：0
> 
> 时间：2012-07-02T03:11:20.210
> 
> 标签：c#, oop, main

我曾尝试从 Deitel 的 C# 2010 为程序员编译代码。我将它完全从书中复制出来，但它仍然找不到 main，即使我在其中一个类中声明了它。下面看一下这两个类：

对于 GradeBookTest：

```
// Fig. 4.2: GradeBookTest.cs
// Create a GradeBook object and call its DisplayMessage method.
public class GradeBookTest
{
// Main method begins program execution
public static void Main(string[] args) 
{
// create a GradeBook object and assign it to myGradeBook
GradeBook myGradeBook = new GradeBook();

// call myGradeBook's DisplayMessage method
   myGradeBook.DisplayMessage();
 } // end Main
 } // end class GradeBookTest 
```

现在对于 GradeBook 类：

```
 // Fig. 4.1: GradeBook.cs
 // Class declaration with one method.
using System;

public class GradeBook
 {
 // display a welcome message to the GradeBook user
   public void DisplayMessage()
 {
 Console.WriteLine( "Welcome to the Grade Book!" );
 } // end method DisplayMessage
 } // end class GradeBook 
```

我就是这样复制它们的。以下是它们在书中的出现方式：

```
1 // Fig. 4.2: GradeBookTest.cs
2 // Create a GradeBook object and call its DisplayMessage method.
3 public class GradeBookTest
4 {
5 // Main method begins program execution
6 public static void Main( string[] args )
7 {
8 // create a GradeBook object and assign it to myGradeBook
9   GradeBook myGradeBook = new GradeBook();
10
11 // call myGradeBook's DisplayMessage method
12  myGradeBook.DisplayMessage();
13 } // end Main
14 } // end class GradeBookTest 
```

和

```
 // Fig. 4.1: GradeBook.cs
// Class declaration with one method.
using System;

public class GradeBook
{
// display a welcome message to the GradeBook user
public void DisplayMessage()
{
Console.WriteLine( "Welcome to the Grade Book!" );
} // end method DisplayMessage
} // end class GradeBook 
```

我不明白他们为什么不工作。现在我正在使用 Visual Studio Pro 2010。有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T03:22:20.417

您可能在 Visual Studio 中创建了错误类型的项目。为了能够**运行**一个项目，它必须是一个应用程序。这意味着它可以是 Web 应用程序、网站、Windows 应用程序、控制台应用程序等。

您更容易开始使用控制台应用程序。打开 Visual Studio 并指向文件 > 新建 > 项目 > Visual C# > Windows > 控制台应用程序。创建它时，您会注意到一个 Program.cs 文件。在那里你可以找到你的应用程序的要点。

提示：您可能希望在 DisplayMessage 调用下方添加另一行，即

```
Console.ReadLine(); 
```

否则提示会很快关闭，您将无法阅读。

祝你学习顺利！

# javascript - 为什么这个js代码这么慢？

> ID：11287418
> 
> 赞同：5
> 
> 时间：2012-07-02T03:12:14.023
> 
> 标签：javascript

这段代码在 Chrome 上需要 3 秒，在 Firefox 上需要 6 秒。如果我用 Java 编写代码并在 Java 7.0 下运行它只需要 10 毫秒。Chrome 的 JS 引擎通常非常快。为什么这里这么慢？顺便提一句。此代码仅用于测试。我知道编写斐波那契函数不是很实用的方法

```
fib = function(n) {
  if (n < 2) {
    return n;
  } else {
    return fib(n - 1) + fib(n - 2);
  }
};

console.log(fib(32)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T03:39:58.823

这不是javascript的错，而是你的算法。你一遍又一遍地重新计算相同的子问题，当 N 更大时它会变得更糟。这是单个调用的调用图：

```
 F(32)
               /         \
            F(31)            F(30)
          /     \           /      \
      F(30)     F(29)     F(29)    F(28)
    /  \      /     \     /   \     |    \
F(29) F(28) F(28) F(27) F(28) F(27) F(27) F(26)

... deeper and deeper 
```

正如您从这棵树中看到的，您正在多次计算一些斐波那契数，例如 F(28) 被计算了 4 次。来自“算法设计手册”一书：

> 这个算法需要多少时间来计算 F(n)？由于 F(n+1) /F(n) ≈ φ = (1 + sqrt(5))/2 ≈ 1.61803，这意味着 F(n) > 1.6^n 。由于我们的递归树只有 0 和 1 作为叶子，加起来这么大的数字意味着我们必须至少有 1.6^n 个叶子或过程调用！这个不起眼的小程序需要**指数级的时间**来运行！

您必须使用记忆或自下而上构建解决方案（即首先是小子问题）。

此解决方案使用记忆化（因此，我们只计算每个斐波那契数一次）：

```
var cache = {};
function fib(n) {
  if (!cache[n]) {
    cache[n] = (n < 2) ? n : fib(n - 1) + fib(n - 2);
  }
  return cache[n];
} 
```

这个自下而上解决它：

```
function fib(n) {
  if (n < 2) return n;
  var a = 0, b = 1;
  while (--n) {
    var t = a + b;
    a = b;
    b = t;
  }
  return b;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T03:24:31.037

众所周知，如果天真地实施，您在问题中给出的斐波那契函数的实施需要很多步骤。特别是，它需要 7,049,155 次调用。

[但是，这些算法可以通过一种称为memoization](http://en.wikipedia.org/wiki/Memoization)的技术大大加快。如果您看到函数调用`fib(32)`需要几秒钟，那么该函数的实现是天真的。如果它立即返回，则该实现很可能正在使用 memoization。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T06:27:42.683

根据已经提供的证据，我得出的结论是：

当代码不是从控制台运行时（比如在 jsFiddle 中，我的机器 Sandy Bridge Macbook Air 在 55 毫秒内计算它），JS 引擎能够 JIT 并可能自动记忆算法。

从 js 控制台运行时，不会发生这种情况。在我的机器上，它只慢了 10 倍以下：460 毫秒。

然后我编辑了代码以查找 F(38)，它将时间提高到 967 毫秒和 9414 毫秒，因此它保持了类似的加速因子。这表明没有执行记忆，加速可能是由于 JITting。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T04:17:12.513

只是一个评论...

函数调用相对昂贵，递归非常昂贵并且总是比使用有效循环的等效函数慢。例如，以下是 IE 中的递归替代方法的数千倍：

```
function fib2(n) {
  var arr = [0, 1];
  var len = 2;

  while (len <= n) {
    arr[len] = arr[len-1] + arr[len-2];
    ++len;
  }
  return arr[n];
} 
```

正如其他答案中所指出的，OP 算法似乎本身也很慢，但我想这不是真正的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T12:40:52.650

除了@galymzhan 推荐的记忆方法之外，您还可以一起使用另一种算法。传统上，第 n 个斐波那契数的公式是 F(n) = F(n-1) + F(n-2)。这具有与 n 成正比的时间复杂度。

Dijkstra 提出了一种算法，可以用不到传统公式规定的一半步骤导出斐波那契数。这在他的著作[EDW #654](http://www.cs.utexas.edu/users/EWD/ewd06xx/EWD654.PDF)中有概述。它去：

1.  对于偶数，F(2n) = (F(n))2 + (F(n+1))2
2.  对于奇数，F(2n+1) = (2F(n) + F(n+1)) * F(n+1) 或 F(2n-1) = (2F(n+1) - F(n )) * F(n)

# ios - 如何将自定义按钮添加到 UINavigationBar (a la Foursquare)

> ID：11287422
> 
> 赞同：0
> 
> 时间：2012-07-02T03:13:03.127
> 
> 标签：ios, ios5, uinavigationcontroller, uinavigationbar

我正在经历创建自定义 UINavigationBar 的不同选项，并且由于我的应用程序是 iOS 5+，我正在使用以下代码：

```
// Set the background image all UINavigationBars
[[UINavigationBar appearance]  setBackgroundImage:NavigationPortraitBackground 
                                    forBarMetrics:UIBarMetricsDefault]; 
```

现在我想在最右边有一个自定义图像按钮，有点迷失了。我应该采用另一种方式，将 UINavigationBar 子类化并添加一个按钮，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:09:44.537

绝对是这个东西的子类。UINavigationBar 易于继承，但很难放入导航控制器。我将向您展示我的子类（CFColoredNavigationBar），它还免费提供任意颜色的背景。

```
//.h
#import <UIKit/UIKit.h>

@interface CFColoredNavigationBar : UINavigationBar

@property (nonatomic, strong) UIColor *barBackgroundColor;
@property (nonatomic, strong) UIButton *postButton;
@end
//.m
#import "CFColoredNavigationBar.h"

@implementation CFColoredNavigationBar
@synthesize barBackgroundColor = barBackgroundColor_;
@synthesize postButton = postButton_;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
-(void)awakeFromNib {
    postButton_ = [[UIButton alloc]initWithFrame:CGRectMake(CGRectGetWidth(self.frame)-60, 0, 60.0f, CGRectGetHeight(self.frame))];
    [postButton_ setImage:[UIImage imageNamed:@"Post.png"] forState:UIControlStateNormal];
    [self addSubview:postButton_];
}
- (void)drawRect:(CGRect)rect {
    if (barBackgroundColor_ == nil) {
        barBackgroundColor_ = [UIColor blackColor];
    }
    CGContextRef context = UIGraphicsGetCurrentContext(); 
    CGContextSetFillColorWithColor(context, [barBackgroundColor_ CGColor]);
    CGContextFillRect(context, CGRectInset(self.frame, 0, self.frame.size.height*-2));
}

@end 
```

# javascript - jquery中的.replace方法

> ID：11287423
> 
> 赞同：0
> 
> 时间：2012-07-02T03:13:14.017
> 
> 标签：javascript, jquery, replace

当用户单击标签时，我想将我的类替换为旧的，我只想使用 .replace 函数来做到这一点。我的目的是学习替换方法的工作原理。但是我所做的功能不起作用。

```
<head>    
<script type="text/javascript" src="jquery-1.7.2.js"></script>  
<script type="text/javascript">
$(function(){
    $('a').click(function(){
        $(this).attr('class').replace('me','old')
    })
})  
</script>
</head>
<body>
<a href="#" class="me">click</a>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:18:10.910

replace 不是 jQuery 函数，它是字符串的函数。[您可以在此处](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace "这里")阅读有关替换的更多信息。要使用替换，您可以将属性读取为字符串，替换字符串的内容，然后将属性添加回来。

如果您加载了 jQuery，我认为这不是最好的方法。您可以使用专为执行这些操作而设计的 jQuery 实用程序，如下所示：

```
 $(this).toggleClass('me old'); 
```

这将打开和关闭（切换）这两个类名。实际上，它将从一个切换到另一个。

文件：

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:16:18.400

您正在获取类并且它不会影响类属性，您可以替换字符串然后将其设置为元素：

```
 $('a').click(function(){
    var cls = $(this).attr('class').replace('me','old')
    $(this).removeClass('me').addClass(cls)
    })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T03:15:39.340

试试这个：

```
<head>

<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">

$(function(){

    $('a').click(function(){

        var theclass = $(this).attr('class');
        theclass = theclass.replace('me', 'old');
        $(this).attr('class', theclass);

        })

    })

</script>

</head>

<body>

<a href="#" class="me">click</a>

</body> 
```

这应该够了吧。[JSFiddle 链接](http://jsfiddle.net/think123/PsNra/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T05:51:15.220

```
$('a').click(function(){
    $(this).replaceWith('<a href="#" class="old">click</a>');
}); 
```

我用[http://codebins.com/codes/home/4ldqpco上的解决方案创建了一个 bin](http://codebins.com/codes/home/4ldqpco)

# javascript - 在 iFrame 中获取页面的标题

> ID：11287426
> 
> 赞同：1
> 
> 时间：2012-07-02T03:13:41.620
> 
> 标签：javascript, jquery, iframe, title

我正在尝试在 iFrame 中获取页面的标题。我确实查看了有关 stackoverflow 的其他一些问题，并找到了以下代码：

```
var title = $("#frame").contents().find("title").html();
alert(title);​ 
```

我虽然它应该工作。

但是在我的[jsfiddle](http://jsfiddle.net/shawn31313/6TAhg/)上，代码似乎不起作用。谁能向我解释为什么它不起作用，并给我一个建议，告诉我如何让它起作用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:49:51.347

跨域，因此当 iframe 加载时，父 javascript 将不会从 iframe 内容中获取任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:20:51.760

这已经被问过[很多次了](https://stackoverflow.com/search?q=iframe+domain)。您无法从您的域访问另一个域的内容。这将是一个安全风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T13:18:14.590

```
 (function(el, w)
{
    function loadFunc(e)
    {
        e = e || w.event;
        var f = e.target || e.srcElement, fb = f.contentDocument || f.contentWindow.document;
        document.title = fb.title;
    }
    if (w.addEventListener)
        el.addEventListener('load', loadFunc, false);
    else if (w.attachEvent)
        el.attachEvent('onload', loadFunc);
})
(document.getElementById('myIframe'), window); 
```

# java - 在 JAVA 中读取/提取自解压 zip

> ID：11287436
> 
> 赞同：1
> 
> 时间：2012-07-02T03:15:43.293
> 
> 标签：java, zip, self-extracting

我正在尝试使用 java 代码读取自解压 zip（位于此处[ftp://ftp.dnr.state.oh.us/OilGas/Download/Production/By_Year/2010Production.exe ）。](ftp://ftp.dnr.state.oh.us/OilGas/Download/Production/By_Year/2010Production.exe)

我尝试了三种方法，一种在[如何从 Java 中的 Winzip 自解压 (exe) zip 文件中读取？](https://stackoverflow.com/questions/7924895/how-can-i-read-from-a-winzip-self-extracting-exe-zip-file-in-java)

第二个是下载exe文件并将其重命名为zip（认为作弊可能有效）然后尝试阅读它......他们都没有工作。

最后一个使用 7-ZIP LZMA SDK，同样没用

另外，我查看了 Internet 上的其他几个资源，但没有任何用处。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:37:29.823

TrueZip 在这种情况下效果最好。（至少在我的情况下）

自解压 zip 的格式为 code1 header1 file1（而普通 zip 的格式为 header1 file1）...该代码说明了如何提取 zip

尽管 Truezip 提取实用程序抱怨额外的字节并引发异常

这是代码

```
 private boolean Extract(String src, String dst, String incPath) {

    TFile srcFile = new TFile(src, incPath);
    TFile dstFile = new TFile(dst);
    try {
        TFile.cp_rp(srcFile, dstFile, TArchiveDetector.NULL);
    } catch (IOException e) {
       return true;
    }

    return true;
} 
```

您可以调用此方法，例如 Extract(new String("C:\2006Production.exe"), new String("c:\") , "");

您可以从这里下载 Truezip 源文件包 (jar) [http://repo1.maven.org/maven2/de/schlichtherle/truezip/truezip-samples/7.5.5/truezip-samples-7.5.5-jar-with -dependencies.jar](http://repo1.maven.org/maven2/de/schlichtherle/truezip/truezip-samples/7.5.5/truezip-samples-7.5.5-jar-with-dependencies.jar)

您将需要在代码中导入类。

导入 de.schlichtherle.truezip.file.TArchiveDetector；导入 de.schlichtherle.truezip.file.TFile；

文件解压到c盘...您可以对文件执行自己的操作。我希望这有帮助。

谢谢。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-02T04:11:29.403

[Apache Commons Compress](http://commons.apache.org/compress/)支持这一点。

# apache-zookeeper - 为什么当闰秒来临时，动物园管理员会得到高 CPU？

> ID：11287442
> 
> 赞同：0
> 
> 时间：2012-07-02T03:16:11.347
> 
> 标签：apache-zookeeper

我有一个 zookeeper 集群，闰秒后机器的 CPU 会出现巨大的峰值。解决办法是重启机器。有谁知道为什么？似乎 Mozilla 也遇到了这个问题。[http://blog.mozilla.org/it/2012/06/30/mysql-and-the-leap-second-high-cpu-and-the-fix/](http://blog.mozilla.org/it/2012/06/30/mysql-and-the-leap-second-high-cpu-and-the-fix/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:36:15.673

他们正在调查它，但它似乎是一个 Linux 错误，而不是一个 ZooKeeper 错误。目前，[ZooKeeper 用户邮件列表中的这个线程](http://zookeeper-user.578899.n2.nabble.com/leap-second-excitement-td7577634.html)应该为您提供最新的信息。

# eclipse - eclipse的咖啡字节代码折叠插件不起作用

> ID：11287454
> 
> 赞同：1
> 
> 时间：2012-07-02T03:18:37.783
> 
> 标签：eclipse, plugins, folding

我遵循了这里的建议：

[获取 Eclipse 类中所有方法的概览视图](https://stackoverflow.com/questions/8382018/getting-an-overview-perspective-of-all-methods-in-a-class-in-eclipse/8382333#8382333)

在这里：http: [//itekblog.com/code-folding-in-eclipse-tutorial/#comment-150](http://itekblog.com/code-folding-in-eclipse-tutorial/#comment-150)

但它似乎从未注册过插件，（是的，我重新启动了 eclipse）——它只是提供了与安装插件之前相同的首选项选项。

我在 Windows 7 上使用 Eclipse Indigo 服务版本 2。

第二个链接似乎引用了最新版本的咖啡字节插件，我已经两次和三次检查了我将正确的文件放在正确的目录中。我也尝试使用“dropins”文件夹而不是“plugins”文件夹。似乎没有任何效果。

我想知道它是否可能是环境变量，文件权限？eclipse中的一些其他配置通常启用插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:54:46.973

好吧，看起来我找到了自己的答案......在这里的评论中：

[http://kosiara87.blogspot.in/2011/12/how-to-install-coffee-bytes-plugin-in.html](http://kosiara87.blogspot.in/2011/12/how-to-install-coffee-bytes-plugin-in.html)

显然我对权限相关问题的猜测是正确的。以管理员身份运行一次 eclipse 就可以解决问题。（右键单击 eclipse.exe 或快捷方式或任务，然后选择以管理员身份运行）您只需执行一次，检查`preferences>java>editor>folding`它现在应该为您提供选择咖啡字节的选项。在此之后您可以正常运行 eclipse 并且它仍然会加载插件。

# python - 如何避免这种酸洗错误，在 Python 中并行化此代码的最佳方法是什么？

> ID：11287455
> 
> 赞同：8
> 
> 时间：2012-07-02T03:19:14.623
> 
> 标签：python, multiprocessing, pickle

我有以下代码。

```
def main():
  (minI, maxI, iStep, minJ, maxJ, jStep, a, b, numProcessors) = sys.argv
  for i in range(minI, maxI, iStep):
    for j in range(minJ, maxJ, jStep): 
      p = multiprocessing.Process(target=functionA, args=(minI, minJ))
      p.start()
      def functionB((a, b)):
        subprocess.call('program1 %s %s %s %s %s %s' %(c, a, b, 'file1', 
          'file2', 'file3'), shell=True)
        for d in ['a', 'b', 'c']:
          subprocess.call('program2 %s %s %s %s %s' %(d, 'file4', 'file5', 
            'file6', 'file7'), shell=True)
      abProduct = list(itertools.product(range(0, 10), range(0, 10)))
      pool = multiprocessing.Pool(processes=numProcessors)
      pool.map(functionB, abProduct) 
```

它产生以下错误。

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib64/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib64/python2.6/threading.py", line 484, in run 
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib64/python2.6/multiprocessing/pool.py", line 255, in _handle_tasks
    put(task)
PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function fa
iled 
```

functionA 的内容不重要，不会产生错误。当我尝试映射函数 B 时，似乎发生了错误。如何消除此错误，在 Python 2.6 中并行化此代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-02T03:42:33.263

您最有可能看到此行为的原因是您定义池、对象和函数的顺序。`multiprocessing`与使用线程并不完全相同。每个进程都会生成并加载环境的副本。如果您在进程可能无法使用的范围内创建函数，或者在池之前创建对象，则池将失败。

首先，尝试在大循环之前创建一个池：

```
(minI, maxI, iStep, minJ, maxJ, jStep, a, b, numProcessors) = sys.argv
pool = multiprocessing.Pool(processes=numProcessors)
for i in range(minI, maxI, iStep):
    ... 
```

然后，将您的目标可调用对象移到动态循环之外：

```
def functionB(a, b):
    ...

def main():
    ... 
```

考虑这个例子......

**破碎的**

```
import multiprocessing

def broken():
    vals = [1,2,3]

    def test(x):
        return x

    pool = multiprocessing.Pool()
    output = pool.map(test, vals)
    print output

broken()
# PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed 
```

**在职的**

```
import multiprocessing

def test(x):
    return x

def working():
    vals = [1,2,3]

    pool = multiprocessing.Pool()
    output = pool.map(test, vals)
    print output

working()
# [1, 2, 3] 
```

# java - Web应用程序的名称总是战争的名称吗？

> ID：11287457
> 
> 赞同：1
> 
> 时间：2012-07-02T03:19:38.417
> 
> 标签：java, tomcat, servlets, xwiki

我正在尝试在 Tomcat 上安装 XWiki。我检查了 web.xml 并发现：

```
<display-name>xwiki</display-name>
<description>XWiki Application</description> 
```

但`localhost:8080/xwiki`返回错误 404：

> 描述 请求的资源 (/xwiki) 不可用。

我还发现：

```
 <servlet-mapping>
     <servlet-name>XWikiService</servlet-name>
     <url-pattern>/XWikiService</url-pattern>
 </servlet-mapping> 
```

但同样的问题：

> 描述 请求的资源 (//XWikiService) 不可用。

我的安装有问题吗？我在 catalina.out 中没有发现任何错误。但是当我尝试战争名称时：

> 本地主机：8080/xwiki-enterprise-web-4.1.2/

有用！

我应该检查什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T03:36:54.007

您需要在 Tomcat中配置[Context 。](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)有[几个地方](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context)可以定义上下文，它`path`是定义您要查找的“Web 应用程序名称”的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T03:36:49.353

`display-name`in`web.xml`与用于访问资源的 URL 对象无关，它只是要显示的短名称或描述，根据容器使用。在 Tomcat 中，它用于管理应用程序。

`url_pattern`应该引用一个 servlet，但您可能缺少该对象的某些部分。webapps 通常由 WAR 的名称（取决于容器）引用，因此如果您的 WAR（在哪里`web.xml`找到）被命名`xwiki-enterprise-web-4.1.2`，那么您应该尝试：

*   `localhost:8080/xwiki-enterprise-web-4.1.2/XWikiService`访问 servlet，以及
*   `localhost:8080/xwiki-enterprise-web-4.1.2/`加载 web 应用程序。

如果后者失败，那么您可能会尝试使用该`welcome-file`属性来默认加载特定文件。

当您加载时，它具体有什么作用：`localhost:8080/xwiki-enterprise-web-4.1.2/`？这会加载您的网络应用程序吗？您只想知道 servlet 的 URL 吗？如果是这样，那么试试这个：`localhost:8080/xwiki-enterprise-web-4.1.2/XWikiService`

# c++ - 在 const 方法中修改指针值

> ID：11287459
> 
> 赞同：0
> 
> 时间：2012-07-02T03:20:30.623
> 
> 标签：c++, constants

看看这段非常简单的代码：

```
struct A { char* s; };

class B
{
    A* a;

    public: B(const char* s) : a(new A()) {
        int len = strlen(s);
        a->s = new char[len + 1];
        memcpy(a->s, s, len + 1);
    }

    ~B() { delete [] a->s; delete a; }

    const char* c_str() const { return a->s; }

    const B& to_upper() const {
        char* x = a->s;
        int len = strlen(x);
        for (int i = 0; i < len; i++)
        {
            char k = x[i];
            if (k >= 'a' && k <= 'z')
                x[i] -= 32;
        }
        a->say_hi();
        return *this;
    }
};

int main() {
    B b = "hola mundo";
    printf("%s\n", b.to_upper().c_str());
} 
```

有用！！我的问题是……为什么？

to_upper() 方法是 const 并通过“a”修改值指针。好的，我无法执行“a = nullptr;”之类的操作 因为编译器说：“您正在尝试修改只读对象”；但它可以让我修改基础值。这种行为正确吗？不应该像const方法中将“this”的类型转换为“const B*”一样将“a”类型转换为“const A*”吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T03:30:49.857

方法的 const 转换为对象的 const ，这`*this`意味着指针内部具有 type 。这里的所有都是它的。不多也不少。例如，这样做的效果与您在 C 语言中看到的没有什么不同。它使指针变为常量，但不影响指针对象。`to_upper``this``const B *``this->a`

实际上，由您决定 的常量是否`B`传播到 所`A`指向的对象`this->a`。该语言使您可以完全自由地做出此决定。它被称为“概念常数”（与“物理常数”或“逻辑常数”相对）。编译器只观察并强制执行逻辑常量，而`const`OOP 中关键字的目的远不止于此：它允许您在设计中实现概念常量的想法。

如果`A`对象被认为是 的一个组成部分`B`，那么 的 constness 也`B`应该意味着 的 constness `A`。但这是你必须手动观察和强制执行的事情（或者一些智能指针类可以帮助你）。

如果`A`object 是一个独立对象，恰好只是从*引用*`B`，那么 constness of`B`不一定意味着 constness of `A`。

编译器不会对此做出任何决定，因为编译器不知道您要实现的对象关系。在您的设计中，在我看来，该`A`对象实际上是 的一个组成部分`B`，这意味着您不应该将您的声明`to_upper`为`const`. 这是一个修改功能。它改变了用户所感知的值`B`。通过声明你本质上是在向用户“撒谎” `to_upper`。`const`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:26:18.647

const 函数不得修改类成员。'pointee by a' 不是该类的成员。

# objective-c - cos 90的实际值是多少？

> ID：11287462
> 
> 赞同：1
> 
> 时间：2012-07-02T03:20:52.003
> 
> 标签：objective-c, math, trigonometry

当我这样做时，我得到了错误的值

```
NSLog(@"cos 90 is %.f", cos(90.0)); 
```

我得到的答案是-0。当我进行谷歌搜索时，这就是我得到的：

> cos(90 弧度) = -0.448073616。

然而，我的卡西欧计算器给我的答案是 0，而且当我还是个孩子的时候，`cos 90 = 0`它也被钻进了我的大脑。

谁是对的，是 ObjC、Google 还是我的 Casio 计算器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T03:34:12.607

这完全取决于您是用度数还是弧度测量。

正如您所说，90 度（pi/2 弧度）的余弦为 0。这几乎是定义。

90 弧度是绕一圈的 14.323945 倍。唯一重要的部分是余数：一个圆的 0.323945，或 2.035406 弧度。其余弦为（如您所见）-0.448074。这不是一个定义，所以实数是不合理的，我引用的只是近似值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:24:04.713

将该行更改为：

```
NSLog(@"cos 90 is %0.5f", cos(90.0)); 
```

或者

```
NSLog(@"cos 90 is %f", cos(90.0)); 
```

你会得到更快乐的结果。

`%.f`格式字符串中的“ ”使 NSLog 感到困惑。

# python - 从 PHP 开发人员部署 Python 应用程序

> ID：11287466
> 
> 赞同：1
> 
> 时间：2012-07-02T03:23:14.513
> 
> 标签：python, deployment

我对 Python 的部署过程有点困惑。比方说你

1.  使用 virtualenv 创建一个全新的项目
2.  源箱/激活
3.  pip 安装一些库
4.  编写一个简单的 hello world 应用程序
5.  pip 冻结依赖项

当我将此代码部署到机器中时，我是否需要在安装依赖项之前首先确保机器是有源的？我并不是说听起来像个菜鸟，但在 PHP 世界中，我不必担心这一点，因为它已经是项目的一部分。所有依赖项都在自动加载器中注册。

步骤是：

1.  rsync 文件（或任何其他方法）
2.  源箱/激活
3.  pip 从 pip freeze 输出文件安装依赖项

感觉很尴尬，或者只是错误并且很容易出错。正确的制作步骤是什么？我四处搜索，但似乎许多教程/文章都假设阅读该文章的任何人都有过去的 Python 经验（imo）。

更新：

我应该提到我正在尝试了解它是如何与 Apache 挂钩的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T03:26:48.413

1.  复制包含`virtualenv`. 排除所有`virtualenv`生成的文件。
2.  在目标机器上，创建一个`virtualenv`over 目录。
3.  `source bin/activate`
4.  `pip install -r requirements.txt`

如果使用版本控制，第一步会简化；您只需克隆（Mercurial 或 Git）或签出（Subversion）代码。所有`virtualenv`生成的文件都应该在适当的忽略文件中。( `.hgignore`, `.gitignore`, `.svnignore`)。

# php - PHP：将引用插入数组？

> ID：11287471
> 
> 赞同：7
> 
> 时间：2012-07-02T03:24:19.677
> 
> 标签：php, reference

我试图在某个点插入数组：

```
$hi = "test";
$var2 = "next";
$arr = array(&$hi);
$arr[] = &$var2; // this works
array_splice($arr, 1, 0, &$var2); // this doesn't 
```

为什么尝试使用 splice 将其插入数组失败而使用第一种方法却不行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T03:43:06.037

快速而肮脏的答案，但请注意，不推荐使用引用调用此函数，并且可能（取决于您的 php 配置）生成警告：

```
array_splice($arr, 1, 0, array(&$var2)); 
```

Hows-and-whys 答案：正在发生的事情非常微妙。当你进行拼接时，因为你已经在那个位置插入了一个引用，所以 $var2 实际上被重新分配了。您可以使用以下代码进行验证：

```
<?php
  $hi = "test";
  $var2 = "next";
  $arr = array(&$hi);
  $arr[] = &$var2; // this works
  printf("=== var2 before splice:\n%s\n", var_export($var2, TRUE));
  array_splice($arr, 1, 0, &$var2); // this doesn't
  printf("=== var2 after splice:\n%s\n", var_export($var2, TRUE));
?> 
```

您将得到以下结果：

```
=== var2 before splice:
'next'
=== var2 after splice:
array (
  0 => 'next',
) 
```

请注意，在拼接之前，$var2 是一个字符串，正如您所期望的那样 ('next')。但是，在拼接之后，$var2 已被替换为包含一个元素的数组，即字符串 'next'。

我认为导致它的原因是文档中所说的：“如果*替换*不是数组，它将被类型转换为一个（即（数组）$parameter）。” 所以发生的事情是这样的：

*   您将 &$var2 作为*替换*传递给数组。
*   在内部，php 将 &$var2 转换为数组（&$var2）。它实际上可能在做相当于 $param = array($param) 的事情，这意味着 &$var2 将被设置为 array(&$var2)，因为它是一个引用而不是 $var2 的副本，就像它通常那样将是，这会影响通常超出调用范围的变量。
*   现在它将 $var2 的这个新值移动到结束位置，并在第二个位置插入 $var2 的副本。

我不确定内部发生的事情的所有魔法，但 $var 在拼接期间肯定会被重新分配。请注意，如果您使用第三个变量，因为它没有将某些东西分配给已经作为参考存在的东西，它会按预期工作：

```
<?php
  $hi = "test";
  $var2 = "next";
  $var3 = "last";
  $arr = array(&$hi);
  $arr[] = &$var2; // this works
  array_splice($arr, 1, 0, &$var3);
  printf("=== arr is now\n%s\n", var_export($arr, TRUE));
?> 
```

生成结果：

```
=== arr is now
array (
  0 => 'test',
  1 => 'last',
  2 => 'next',
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:30:10.357

您可能需要将最后一个参数设为数组，否则根据[手册](http://php.net/manual/en/function.array-splice.php)，您将被强制转换为一个。

```
array_splice( $arr, 1, 0, array( &$var2 ) ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T03:31:59.003

当我尝试像您这样的示例时，我收到一条警告，上面写着“调用时传递引用已被弃用”。根据[这个答案](https://stackoverflow.com/a/1055837/259457)：

> 您可以在 php.ini 文件中将 allow_call_time_pass_reference 设置为 true。但这是一个黑客。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T07:02:52.147

在这里，我正在迭代一个数组（$values_arr）并将每个变量的引用存储在另一个数组（$params）中。您可以根据需要更改其用法。

```
$params = array();
$values_arr = array('a', 'b', 123);
foreach ($values_arr as $key=>&$val) {
    $params[$key] = &$val;
} 
```

结果

```
array (size=3)
  0 => &string 'a' (length=1)
  1 => &string 'b' (length=1)
  2 => &int 123 
```

# xml - 为什么 RDF 看起来如此复杂

> ID：11287473
> 
> 赞同：2
> 
> 时间：2012-07-02T03:25:19.777
> 
> 标签：xml, rdf

所以这里有一个 rdf 格式的条目。我想了解为什么它的某些部分看起来如此复杂。

```
<pgterms:file rdf:about="&f;dirs/3/1/9/0/31900/31900-8.zip">
  <dc:format><dcterms:IMT><rdf:value>text/plain; charset="iso-8859-1"</rdf:value></dcterms:IMT></dc:format>
  <dc:format><dcterms:IMT><rdf:value>application/zip</rdf:value></dcterms:IMT></dc:format>
  <dcterms:extent>193120</dcterms:extent>
  <dcterms:modified><dcterms:W3CDTF><rdf:value>2010-04-06</rdf:value></dcterms:W3CDTF></dcterms:modified>
  <dcterms:isFormatOf rdf:resource="#etext31900" />
</pgterms:file> 
```

特别是，这个值：

```
<dc:format><dcterms:IMT><rdf:value>text/plain; charset="iso-8859-1"</rdf:value></dcterms:IMT></dc:format> 
```

为什么它需要一个`dcterms:IMT`和一个`rdf:value`部分？对于似乎没有什么实际好处的东西，这似乎有点臃肿。因为它已经在使用 MIME 类型，所以对我来说没有意义。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T23:36:36.577

为什么 xml 有这么多尖括号我的眼睛受伤了……因为它是由解析器而不是由人类读取的。

您的示例不是 rdf（rdf 是框架），它是 rdf/xml，框架中图形的一种可能序列化。 [Turtle/n3](http://www.w3.org/TeamSubmission/turtle/)是更漂亮的序列化。[N-Triples](http://www.w3.org/2001/sw/RDFCore/ntriples/)非常简单。

一些非常小的例子，没有涵盖任何真实的细节，但是......

**RDF/XML：**

```
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
  <rdf:Description rdf:about="http://www.w3.org/2001/sw/RDFCore/ntriples/">
    <dc:creator>Art Barstow</dc:creator>
    <dc:creator>Dave Beckett</dc:creator>
    <dc:publisher rdf:resource="http://www.w3.org/"/>
  </rdf:Description>
</rdf:RDF> 
```

**N-三元组**

```
<http://www.w3.org/2001/sw/RDFCore/ntriples/> <http://purl.org/dc/elements/1.1/creator> "Dave Beckett" .
<http://www.w3.org/2001/sw/RDFCore/ntriples/> <http://purl.org/dc/elements/1.1/creator> "Art Barstow" .
<http://www.w3.org/2001/sw/RDFCore/ntriples/> <http://purl.org/dc/elements/1.1/publisher> <http://www.w3.org/> . 
```

**N3**

```
@prefix dc: <http://purl.org/dc/elements/1.1/>

<http://www.w3.org/2001/sw/RDFCore/ntriples/> 
     dc:creator "Dave Beckett";
     dc:creator "Art Barstow";
     dc:publisher <http://www.w3.org/>. 
```

**编辑：**您可以停止阅读，这只是 OP 在不同序列化中提供的示例。回答问题

> 为什么它需要一个 dcterms:IMT 和一个 rdf:value 部分？

当有“空白节点”时，rdf/xml 必须做一些口吃步骤。您可以在下面看到 N-Triples 将空白节点写出，并且 n3 尝试使关系更明显。所有这些都是同一个 rdf 图的序列化。

**RDF/XML**稍作修改（添加了命名空间），因此它解析：

```
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:dcterms="http://purl.org/dc/terms/"
         xmlns:pgterms="http://www.gutenberg.org/rdfterms/">
<pgterms:file rdf:about="/home/me/dirs/3/1/9/0/31900/31900-8.zip">
  <dc:format><dcterms:IMT><rdf:value>text/plain; charset="iso-8859-1"</rdf:value></dcterms:IMT></dc:format>
  <dc:format><dcterms:IMT><rdf:value>application/zip</rdf:value></dcterms:IMT></dc:format>
  <dcterms:extent>193120</dcterms:extent>
  <dcterms:modified><dcterms:W3CDTF><rdf:value>2010-04-06</rdf:value></dcterms:W3CDTF></dcterms:modified>
  <dcterms:isFormatOf rdf:resource="#etext31900" />
</pgterms:file>
</rdf:RDF> 
```

**N-三元组**

```
</home/me/dirs/3/1/9/0/31900/31900-8.zip> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://www.gutenberg.org/rdfterms/file> .
</home/me/dirs/3/1/9/0/31900/31900-8.zip> <http://purl.org/dc/elements/1.1/format> _:LqSOByLi19 .
</home/me/dirs/3/1/9/0/31900/31900-8.zip> <http://purl.org/dc/elements/1.1/format> _:LqSOByLi20 .
</home/me/dirs/3/1/9/0/31900/31900-8.zip> <http://purl.org/dc/terms/isFormatOf> <#etext31900> .
</home/me/dirs/3/1/9/0/31900/31900-8.zip> <http://purl.org/dc/terms/modified> _:LqSOByLi21 .
</home/me/dirs/3/1/9/0/31900/31900-8.zip> <http://purl.org/dc/terms/extent> "193120" .
_:LqSOByLi21 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.org/dc/terms/W3CDTF> .
_:LqSOByLi21 <http://www.w3.org/1999/02/22-rdf-syntax-ns#value> "2010-04-06" .
_:LqSOByLi20 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.org/dc/terms/IMT> .
_:LqSOByLi20 <http://www.w3.org/1999/02/22-rdf-syntax-ns#value> "application/zip" .
_:LqSOByLi19 <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://purl.org/dc/terms/IMT> .
_:LqSOByLi19 <http://www.w3.org/1999/02/22-rdf-syntax-ns#value> "text/plain; charset=\"iso-8859-1\"" . 
```

**N3/乌龟**

```
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix pgterms: <http://www.gutenberg.org/rdfterms/> .

</home/me/dirs/3/1/9/0/31900/31900-8.zip> a pg:file;
    dc:format 
        [ a dcterms:IMT;  rdf:value "text/plain; charset=\"iso-8859-1\"" ],
        [ a dcterms:IMT;  rdf:value "application/zip" ];
    dcterms:extent "193120";
    dcterms:isFormatOf <#etext31900>;
    dcterms:modified [ a dcterms:W3CDTF; rdf:value "2010-04-06" ] . 
```

[注：N3如果是彩色的](http://www.openvest.com/trac/wiki/n3SyntaxHighlighting)就更漂亮了

**编辑2：** 上面描述了有一个bnode，但至于为什么有一个......上面*N3*`dcterms:modified`序列化的最后一行中的谓词可以（我希望）被视为更像：

 *```
dcterms:modified "2010-04-06"^^dcterms:W3CDTF
# vs
dcterms:modified [ a dcterms:W3CDTF; rdf:value "2010-04-06" ] 
```

rdf:value 甚至存在的原因是三元组，例如：

```
exproduct:item10245   exterms:weight   [rdf:value        "2.4"^^xsd:decimal
                                        exterms:units    exunits:kilograms] . 
```

除了单位之外，节点还可以指示`object`三元组的精度或其他特征。

是的，我有点讨厌`rdf:value`破坏理解和实用性的东西，有利于认识论的纯洁性。*

# javascript - 在 MVC3 Razor 视图引擎中使用 javascript 变量

> ID：11287484
> 
> 赞同：31
> 
> 时间：2012-07-02T03:28:15.180
> 
> 标签：javascript, asp.net-mvc-3

是否可以？

```
@Html.ActionLink( "Link text", "Action Name", new { id = *JAVASCRIPT VARIABLE* }) 
```

请用示例代码解释。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-30T20:09:33.917

**实际上，通过以下方式很有可能：**

```
var hello = "Great Job!";

var text = "@Html.ActionLink( "Link text", "Action Name", new { id = "JSVar" })"
text = text.replace("JSVar",hello); 
```

就这么简单！:)

@Html.Action 链接所做的只是创建一个 url 字符串，因此对其进行替换与对任何 javascript 字符串进行替换相同

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-02T03:30:30.950

不，这是不可能的，因为 .NET MVC 3 是服务器端代码，在发送到客户端之前会进行评估，而 javascript 是客户端代码，它只在客户端上运行一次

但反过来也是可能的：

```
var jsVar = "@yourMvcVar"; 
```

# django - 使用用户输入在 Django 中创建用户

> ID：11287485
> 
> 赞同：8
> 
> 时间：2012-07-02T03:28:30.537
> 
> 标签：django

我想使用用户输入在 Django 中创建/添加新用户到我的应用程序。我正在使用 django 提供的默认登录名。我正在尝试将用户添加到默认登录。[https://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)中的示例：

```
>>> from django.contrib.auth.models import User
>>> user = User.objects.create_user('john', 'lennon@thebeatles.com', 'john password') 
```

传递用户名和密码。但我希望这发生在用户输入中。我该怎么做呢？

需要一些指导...

我试过这个，但它似乎不起作用：

```
def lexusadduser(request):
    """
    add user
    """
    if request.method == "POST":
        user.save()

        auth_user = authenticate(username=user.username,password=user.password)

        if auth_user is not None:
            lexusmain(request)
        else:
            return render('adduser.html') 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-02T04:29:17.530

您需要做的第一件事是创建一个[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)：

**表格.py**

```
from django.contrib.auth.models import User

class UserForm(ModelForm):
    class Meta:
        model = User
        fields = ('username', 'email', 'password') 
```

ModelForm 根据您提供的模型自动构建您的表单。它根据字段处理验证。

**视图.py**

```
from forms import UserForm
from django.contrib.auth import login
from django.http import HttpResponseRedirect

def lexusadduser(request):
    if request.method == "POST":
        form = UserForm(request.POST)
        if form.is_valid():
            new_user = User.objects.create_user(**form.cleaned_data)
            login(new_user)
            # redirect, or however you want to get to the main view
            return HttpResponseRedirect('main.html')
    else:
        form = UserForm() 

    return render(request, 'adduser.html', {'form': form}) 
```

如果它是一个 POST 请求，我们会根据 POST 值创建一个 UserForm。然后我们检查它是否是有效的形式。如果是，我们创建用户，否则我们返回带有错误的表单。如果不是 POST 请求，我们发送一个干净的表单

**模板**

```
<form method="post" action="">
    {% csrf_token %}
    {{ form }}
    <input type="submit" value="Create new user account" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:57:26.377

使用表格。空气编码在这里：

```
class SignupForm(forms.Form):
    username = forms.CharField()
    email = forms.EmailField()
    password = forms.CharField(widget=forms.PasswordInput) 
```

# java - 在 zip 文件中读取一个 zip 文件

> ID：11287486
> 
> 赞同：10
> 
> 时间：2012-07-02T03:29:07.737
> 
> 标签：java, file, zip, unzip

我有 zip 文件，它位于 zip 文件的文件夹中，请建议我如何使用 zip 输入流读取它。

例如：

```
abc.zip
    |
      documents/bcd.zip 
```

如何读取 zip 文件中的 zip 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-11T07:30:39.143

如果您想递归地查看 zip 文件中的 zip 文件，

```
 public void lookupSomethingInZip(InputStream fileInputStream) throws IOException {
        ZipInputStream zipInputStream = new ZipInputStream(fileInputStream);
        String entryName = "";
        ZipEntry entry = zipInputStream.getNextEntry();
        while (entry!=null) {
            entryName = entry.getName();
            if (entryName.endsWith("zip")) {
                //recur if the entry is a zip file
                lookupSomethingInZip(zipInputStream);
            }
            //do other operation with the entries..

            entry=zipInputStream.getNextEntry();
        }
    } 
```

使用从文件派生的文件输入流调用该方法 -

```
File file = new File(name);
lookupSomethingInZip(new FileInputStream(file)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T04:25:49.113

以下代码片段列出了另一个 ZIP 文件中的 ZIP 文件的条目。使其适应您的需求。在引擎盖下[`ZipFile`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html)使用[`ZipInputStream`s 。](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)

代码片段使用[Apache Commons IO](http://commons.apache.org/io/)，特别是[`IOUtils.copy`](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream%2C%20java.io.OutputStream%29)。

```
public static void readInnerZipFile(File zipFile, String innerZipFileEntryName) {
    ZipFile outerZipFile = null;
    File tempFile = null;
    FileOutputStream tempOut = null;
    ZipFile innerZipFile = null;
    try {
        outerZipFile = new ZipFile(zipFile);
        tempFile = File.createTempFile("tempFile", "zip");
        tempOut = new FileOutputStream(tempFile);
        IOUtils.copy( //
                outerZipFile.getInputStream(new ZipEntry(innerZipFileEntryName)), //
                tempOut);
        innerZipFile = new ZipFile(tempFile);
        Enumeration<? extends ZipEntry> entries = innerZipFile.entries();
        while (entries.hasMoreElements()) {
            ZipEntry entry = entries.nextElement();
            System.out.println(entry);
            // InputStream entryIn = innerZipFile.getInputStream(entry);
        }

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        // Make sure to clean up your I/O streams
        try {
            if (outerZipFile != null)
                outerZipFile.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        IOUtils.closeQuietly(tempOut);
        if (tempFile != null && !tempFile.delete()) {
            System.out.println("Could not delete " + tempFile);
        }
        try {
            if (innerZipFile != null)
                innerZipFile.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

public static void main(String[] args) {
    readInnerZipFile(new File("abc.zip"), "documents/bcd.zip");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-25T07:43:23.233

终于可以修复 Manas Maji 的答案了。最小的解决方案：

```
import java.io.*;
import java.nio.file.*;
import java.util.zip.*;
import org.slf4j.*;

public void readZipFileRecursive(final Path zipFile) {
  try (final InputStream zipFileStream = Files.newInputStream(zipFile)) {
    this.readZipFileStream(zipFileStream);
  } catch (IOException e) {
    LOG.error("error reading zip file %s!", zipFile, e);
  }
}

private void readZipFileStream(final InputStream zipFileStream) {
  final ZipInputStream zipInputStream = new ZipInputStream(zipFileStream);
  ZipEntry zipEntry;
  try {
    while ((zipEntry = zipInputStream.getNextEntry()) != null) {
      LOG.info("name of zip entry: {}", zipEntry.getName());
      if (!zipEntry.isDirectory() && zipEntry.getName().endsWith(".zip")) {
        this.readZipFileStream(zipInputStream); // recursion
      }
    }
  } catch (IOException e) {
    LOG.error("error reading zip file stream", e);
  }
} 
```

注意：不要以递归方法关闭流。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-02T15:35:04.653

我编写了一个代码，可以将所有 zip 文件解压缩到一个 zip 文件中。它甚至可以解压缩到 n 级压缩。例如，如果您在 zip 文件中、在 zip 文件中（等等）有一个 zip 文件，它将提取所有文件。使用此类的 zipFileExtract 方法并将源 zip 文件和目标目录作为参数传递。

```
import java.io.*;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.*;
import java.util.concurrent.ConcurrentLinkedQueue;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;

public class RecursiveFileExtract {
    private static final int BUFFER_SIZE = 4096;
    private static Queue<File> current;
    private static List<File> visited;

    public static void zipFileExtract(File sourceZipFile, File destinationDirectory) {
        Path temp = null;
        if(!destinationDirectory.exists())
        {
            destinationDirectory.mkdirs();
        }
        try {
            temp = Files.move(Paths.get(sourceZipFile.getAbsolutePath()), Paths.get(destinationDirectory.getAbsolutePath()+File.separator+sourceZipFile.getName()));
        } catch (IOException e) {
            e.printStackTrace();
        }
        File zipFile = new File(temp.toAbsolutePath().toString());
        current = new ConcurrentLinkedQueue<>();
        visited = new ArrayList<>();
        current.add(zipFile);
        do {
            unzipCurrent();
            zipFinder(destinationDirectory);
        }
        while (!current.isEmpty());
    }

    private static void zipFinder(File directory) {
        try {
            if (directory != null) {
                File fileArray[] = directory.listFiles();
                if (fileArray != null) {
                    for (File file : fileArray) {
                        if (file != null) {
                            if (file.isDirectory()) {
                                zipFinder(file);
                            } else {
                                if (file.getName().endsWith(".zip")) {
                                    if (!visited.contains(file)) {
                                        current.add(file);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        } catch (Exception e) {
            System.out.println(e.getLocalizedMessage());
        }
    }

    private static void unzipCurrent() {
        try {
            while (!current.isEmpty()) {
                File file = current.remove();
                visited.add(file);
                File zipDirectory = new File(file.getParentFile().getAbsolutePath());
                unzip(file.getAbsolutePath(), zipDirectory.getAbsolutePath());
            }
        } catch (Exception e) {
            System.out.println(e.getLocalizedMessage());
        }
    }

    public static void unzip(String zipFilePath, String destDirectory) {
        try {
            ZipInputStream zipIn = new ZipInputStream(new FileInputStream(zipFilePath));
            ZipEntry entry = zipIn.getNextEntry();

            while (entry != null) {
                String filePath = destDirectory + File.separator + entry.getName();
                if (!entry.isDirectory()) {
                    extractFile(zipIn, filePath);
                } else {

                    File dir = new File(filePath);
                    Boolean result = dir.mkdir();
                }
                zipIn.closeEntry();
                entry = zipIn.getNextEntry();
            }
            zipIn.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static void extractFile(ZipInputStream zipIn, String filePath) {
        try {
            File file = new File(filePath);
            File parentFile = file.getParentFile();
            if (!parentFile.exists()) {
                Boolean result = parentFile.mkdirs();
                if (!result) {
                    throw new Exception();
                }
            }
            BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(filePath));
            byte[] bytesIn = new byte[BUFFER_SIZE];
            int read = 0;
            while ((read = zipIn.read(bytesIn)) != -1) {
                bos.write(bytesIn, 0, read);
            }
            bos.close();
        } catch (Exception e) {
           System.out.println(e.getLocalizedMessage());
        }
    }
} 
```

# c++ - 在 VAO 中使用交错数组

> ID：11287491
> 
> 赞同：5
> 
> 时间：2012-07-02T03:29:33.873
> 
> 标签：c++, opengl, graphics

我正在学习 OpenGL 4.0，我想使用 OpenGL 4.0 和 GLSL 绘制一个简单的三角形。我正在使用带有交错数组的 VAO 来执行此操作，但它显示的结果不是我想要的：

![在此处输入图像描述](../Images/5c5e78c957ff96b20e7bfccd695d93bb.png)

现在我发布我的部分代码：

```
void SceneBasic::setupVAOInterleavedArrays()
{
    //三角形的顶点和颜色信息数组:混合数组
    float positionAndColorData[] = {
        -0.8f, -0.8f, 0.0f,1.0f, 0.0f, 0.0f,
        0.8f, -0.8f, 0.0f,0.0f, 1.0f, 0.0f,
        0.0f,  0.8f, 0.0f,0.0f, 0.0f, 1.0f };

    //glInterleavedArrays(GL_C3F_V3F,0,positionAndColorData)

    GLuint vboHandle;//VBO
    glGenBuffers(1,&vboHandle);

    glBindBuffer(GL_ARRAY_BUFFER,vboHandle);
    glBufferData(GL_ARRAY_BUFFER,18 * sizeof(float),
        positionAndColorData,GL_STATIC_DRAW);

    //VAO
    glGenVertexArrays(1,&vaoHandle);
    glBindVertexArray(vaoHandle);

    //enable the generic vertex attribute indexes
    //indicates that the values for the attributes will be accessed
    //and used for rendering
    glEnableVertexAttribArray(0);//position
    glEnableVertexAttribArray(1);//color

    //make the connection between the buffer objects and the generic 
    //vertex attributes indexes
    glBindBuffer(GL_ARRAY_BUFFER,vboHandle);
    glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,3 * sizeof(float),BUFFER_OFFSET(0));
    glBindBuffer(GL_ARRAY_BUFFER,vboHandle);
    glVertexAttribPointer(1,3,GL_FLOAT,GL_FALSE,3 * sizeof(float),BUFFER_OFFSET(3 * sizeof(float)));
}

void SceneBasic::initScene()
{
    compileAndLinkShader();

    //setupVAO();
    setupVAOInterleavedArrays();
}

void SceneBasic::render()
{
    glClear(GL_COLOR_BUFFER_BIT);

    glBindVertexArray(vaoHandle);
    glDrawArrays(GL_TRIANGLES,0,3);
    glBindVertexArray(0);
} 
```

但是如果我不使用交错数组，结果是正确的： ![在此处输入图像描述](../Images/f2d6e04ad800d949e0162a6c4c0768c7.png)

当我不使用交错数组时，这是我的代码的一部分：

```
void SceneBasic::setupVAO()
{
    //三角形的顶点和颜色信息数组
    float positionData[] = {
        -0.8f, -0.8f, 0.0f,
        0.8f, -0.8f, 0.0f,
        0.0f,  0.8f, 0.0f };
    float colorData[] = {
        1.0f, 0.0f, 0.0f,
        0.0f, 1.0f, 0.0f,
        0.0f, 0.0f, 1.0f };

    glGenBuffers(2,vboHandles);
    GLuint positionBufferHandle = vboHandles[0];
    GLuint colorBufferHandle = vboHandles[1];

    glBindBuffer(GL_ARRAY_BUFFER,positionBufferHandle);
    glBufferData(GL_ARRAY_BUFFER,9 * sizeof(float),
        positionData,GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER,colorBufferHandle);
    glBufferData(GL_ARRAY_BUFFER,9 * sizeof(float),
        colorData,GL_STATIC_DRAW);

    //VAO
    glGenVertexArrays(1,&vaoHandle);
    glBindVertexArray(vaoHandle);

    //enable the generic vertex attribute indexes
    //indicates that the values for the attributes will be acessed
    //and used for rendering
    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    //make the connection between the buffer objects abd the generic 
    //vertex attributes indexes
    glBindBuffer(GL_ARRAY_BUFFER,positionBufferHandle);
    glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,0,BUFFER_OFFSET(0));

    glBindBuffer(GL_ARRAY_BUFFER,colorBufferHandle);
    glVertexAttribPointer(1,3,GL_FLOAT,GL_FALSE,0,BUFFER_OFFSET(0));
} 
```

我很好奇，为什么当我使用交错数组时我的代码没有产生预期的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T03:37:48.013

步幅是错误的，因为每个顶点有 6 个元素，所以需要`6 * sizeof (float)`作为步幅传递。

# http - 对 CSRF 代币的理解

> ID：11287493
> 
> 赞同：4
> 
> 时间：2012-07-02T03:30:23.640
> 
> 标签：http, csrf

我读了这篇文章[Understanding CSRF - Simple Question](https://stackoverflow.com/questions/2581488/understanding-csrf-simple-question/2582177#2582177) 但我仍然不明白 CSRF 令牌如何阻止 CSRF 令牌。

让我感到困惑的主要问题是，为什么攻击者可以向我的网站发出任何 http 请求，但他无法读回响应？

1、如果我在每个post请求之前都发布一个http请求来获取token，攻击者也可以发出“get token”请求来获取token。

2、如果我在.html页面加载时给隐藏输入设置了token，攻击者也可以发出“get html”请求来获取这个.html页面并读取隐藏页面的值。

我只是不明白为什么攻击者可以发出请求但无法读取响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:36:33.290

攻击者根本无法自己提出请求。他能做的就是欺骗他的受害者（或受害者的浏览器）提出这个请求。因此，任何响应也会返回到受害者的浏览器。

这里的问题是攻击者可以选择 URL，即使没有看到任何响应，访问该 URL 也可能对受害者造成有害后果。

攻击者需要诱骗受害者发出请求（而不是仅仅访问自己的 URL）的原因是，如果受害者这样做，受害者的会话 cookie 也会被发送，所以它看起来像是一个经过身份验证的操作服务器。

> 如果我在加载 .html 页面时将令牌设置为隐藏输入，攻击者也可以发出“get html”请求来获取此 .html 页面并读取隐藏页面的值。

攻击者只能为自己的会话获取隐藏输入，而不能为受害者的会话获取。这个隐藏的输入会因会话而异（否则没有意义）。

CSRF 令牌确保每个（关键）请求都包含必须与用户会话匹配的随机数据。这样，攻击者就不能仅仅猜测完整的 URL 是什么，并诱骗某人点击它。

# javascript - 在Javascript中调用Ajax时函数（文本）的含义

> ID：11287495
> 
> 赞同：0
> 
> 时间：2012-07-02T03:30:28.830
> 
> 标签：javascript

我对 javascript 完全陌生，很难理解脚本的含义。:(希望有人可以帮助我或给一些建议，谢谢！:)

我有一个 javascript，它在其中调用 Ajax 函数，例如：

```
 callAjax('../team.cgi', 'POST', data, function(text) 
```

在 ajax2.js 中，它定义了 callAjax 函数，如下所示：

```
 function callAjax(url, method, data, handler, waittime, timeout_func) 
```

我的问题是参数函数（文本）是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:36:02.553

`function(text)`是[匿名函数](http://en.wikipedia.org/wiki/Anonymous_function)定义的开始。大概电话看起来像这样：

```
callAjax('../team.cgi', 'POST', data, function(text)
{
    // do something with text
}); 
```

在这些括号之间定义的函数接受一个变量 ,`text`并用它做一些事情。这在 JavaScript 中是可能的，因为[函数是一等公民](http://en.wikipedia.org/wiki/First-class_function)。它们可以分配给变量，匿名定义等。

通常，您会说函数的`handler`参数`callAjax`是回调。这是一个在 Ajax 调用完成时将传递某些参数的函数。这是典型的异步代码。

上面的代码片段在功能上与此相同：

```
function doSomethingWhenAjaxCompletes(text) {
    // do something
}

callAjax('../team.cgi', 'POST', data, doSomethingWhenAjaxCompletes); 
```

第一个的唯一区别是函数没有用 name 定义`doSomethingWhenAjaxCompletes`；它是匿名定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:37:09.847

发出 AJAX 请求时，执行不会停止并等待响应返回。相反，请求被发送并继续执行。您只需提供所谓的“回调”函数，该函数在 AJAX 响应返回时被调用。通常，回调函数采用单个参数，其中包含作为 AJAX 请求的答案返回的响应对象或消息。

```
callAjax('../team.cgi', 'POST', data, function(text) {
    console.log('Got a response!');
    console.log(text);
} 
```

这只是发送请求。稍后（由于网络延迟而暂停后）您将看到控制台日志消息出现，表明收到了响应，并且用于“处理”响应的回调函数已被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T03:34:39.530

如果没有看到`handler`函数的上下文，我的猜测是这是 ajax 调用的返回值。例如，如果`team.cgi`在上面的示例中返回一个 xml 团队列表，那么我希望`text`处理函数中的参数是该列表。

# vb.net - VB.NET 在继续读/写之前检查文件是否打开？

> ID：11287502
> 
> 赞同：9
> 
> 时间：2012-07-02T03:31:33.733
> 
> 标签：vb.net, winforms, visual-studio-2010

有没有办法验证文件是否打开？我唯一能想到的是`Try/Catch`看看我是否可以捕获文件打开异常，但我认为如果文件打开，可以使用一种方法来返回真/假。

目前`System.IO`在名为`Wallet`.

```
 Private holdPath As String = "defaultLog.txt"
    Private _file As New FileStream(holdPath, FileMode.OpenOrCreate, FileAccess.ReadWrite)
    Private file As New StreamWriter(_file)

    Public Function Check(ByVal CheckNumber As Integer, ByVal CheckAmount As Decimal) As Decimal
        Try
            file.WriteLine("testing")
            file.Close()
        Catch e As IOException
          'Note sure if this is the proper way.
        End Try

        Return 0D
    End Function 
```

任何指针将不胜感激！谢谢！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T06:36:49.983

```
Private Sub IsFileOpen(ByVal file As FileInfo)
    Dim stream As FileStream = Nothing
    Try
        stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None)
        stream.Close()
    Catch ex As Exception

        If TypeOf ex Is IOException AndAlso IsFileLocked(ex) Then
            ' do something here, either close the file if you have a handle, show a msgbox, retry  or as a last resort terminate the process - which could cause corruption and lose data
        End If
    End Try
End Sub

Private Shared Function IsFileLocked(exception As Exception) As Boolean
    Dim errorCode As Integer = Marshal.GetHRForException(exception) And ((1 << 16) - 1)
    Return errorCode = 32 OrElse errorCode = 33
End Function 
```

像这样称呼它：

```
Call IsFileOpen(new FileInfo(filePath)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T08:55:23.690

使用'is file in use check'功能确实没有意义，因为您仍然需要try catch来处理文件无法打开的情况。文件打开失败的原因可能比它已经打开的原因更多。

同样使用函数进行检查也不能保证成功。'is file in use check' 可能仅在文件打开失败并出现文件已打开错误时返回 false，因为在检查和尝试打开文件之间的时间，它已被其他人打开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T04:53:40.210

看起来这个[MSDN 论坛发布](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/dead0507-06f5-43e0-9250-a78437956bc8)的两个建议都涉及尝试打开文件。

第一个类似于您现在所做的，第二个涉及使用 Windows API 函数 (CreateFile) 并检查表示文件正在使用的无效句柄。在这两种情况下，他们都依赖错误条件来确定文件是否打开。简而言之，我认为您使用的方法是正确的，因为**没有**System.IO.File.IsOpen 属性。

# asp.net-mvc-3 - Cassette.web、MVC 3、共享布局：以正确的顺序获取引用？

> ID：11287505
> 
> 赞同：1
> 
> 时间：2012-07-02T03:32:17.977
> 
> 标签：asp.net-mvc-3, razor, cassette

使用 Cassette.net、MVC 3、Razor、C#、相对位置和共享布局，如何在不修改原始 javascript 文件的情况下以正确的顺序获取引用？

在共享布局中，我这样引用 jQuery：

```
Bundles.Reference("~/Scripts/jquery-1.7.2.js"); 
```

然后在视图中添加另一个参考：

```
Bundles.Reference("~/Scripts/myScript.js"); 
```

myScript 依赖于 jQuery，但 Cassette 在 jQuery 前面引用了 myScript：

```
<script src="/_cassette/asset/Scripts/js/myScript.js?...
<script src="/_cassette/asset/Scripts/jquery-1.7.2.js?... 
```

我觉得奇怪的是子页面中引用的脚本在父页面脚本之前呈现。

我看到您可以在脚本中添加符号，例如，`/// <reference path="other.js" />`但我真的不想修改 javascript 代码来包含它。

**更新：**

我添加了

```
Bundles.Reference("~/Scripts/jquery-1.7.2.js","head")
Bundles.Reference("~/Scripts/js/myScript.js","body") 
```

这至少将我的脚本放在 jQuery 脚本之后，`@Bundles.RenderScripts("head");`并使用`@Bundles.RenderScripts("body");`适当的标签。它似乎保持脚本的添加顺序。我仍然想知道如何使用某种类型的 Bundle.config 对这些脚本进行自定义排序，或者如何让父页面在使用共享布局的子页面之前对脚本进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:54:16.107

使用[捆绑描述符文件](http://getcassette.net/documentation/v1/configuration/bundle-descriptor-file)。然后，您可以强制文件顺序。

# c# - 如何使用 C# 在远程计算机上运行命令行

> ID：11287506
> 
> 赞同：1
> 
> 时间：2012-07-02T03:32:38.733
> 
> 标签：c#, command-line

> **可能重复：**
> [如何在远程计算机中执行命令？](https://stackoverflow.com/questions/428276/how-to-execute-a-command-in-a-remote-computer)

这是我的问题。

我有一台远程计算机 LIQIANDEV，上面有一个命令 C:\test\test.cmd。现在我有一个网络服务器 LIQIANTEST，我想使用 C# 代码在远程计算机 LIQIANDEV 上运行 test.cmd，我应该怎么做？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:15:56.293

[您可以使用PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)在另一台计算机上运行程序，它是 Microsoft SysInternals 的一部分。因此，您可以使用 c# 创建一个运行 PsExec 命令的本地进程。

或者，您可以使用[Windows PowerShell Remoting](http://technet.microsoft.com/en-us/library/dd819505.aspx)在另一台计算机上运行 powershell 脚本。再一次，这可以使用 c# 启动。

我认为您也可以使用 WMI 甚至 RDP 来做到这一点。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-02T03:41:40.463

简短的回答：你不能。有各种各样的障碍阻止你做到这一点。

更长的答案：如果您通过运行此代码来解释您要完成的工作，那么可能会有更好的方法来做到这一点。

# actionscript-2 - ActionScript 2：事件不触发？

> ID：11287508
> 
> 赞同：0
> 
> 时间：2012-07-02T03:33:38.170
> 
> 标签：actionscript-2, audio

所以我有一个 soundHandler 类，它应该播放声音，然后在声音完成播放后指向时间轴上的一个函数。但不知何故，当我尝试时，只有一种声音会播放。**编辑：**声音播放后，没有任何反应，即使我设置了应该做某事的 EventHandlers。这是代码：

```
import mx.events.EventDispatcher;

class soundHandler {
private var dispatchEvent:Function;
public var addEventListener:Function;
public var removeEventListener:Function;
var soundToPlay;
var soundpath:String;
var soundtype:String;
var prefix:String;
var mcname:String;

public function soundHandler(soundpath:String, prefix:String, soundtype:String, mcname:String) {
    EventDispatcher.initialize(this);
    _root.createEmptyMovieClip(mcname, 1);
    this.soundpath = soundpath;
    this.soundtype = soundtype;
    this.prefix = prefix;
    this.mcname = mcname;
}

function playSound(file, callbackfunc) {
    _root.soundToPlay = new Sound(_root.mcname);
    _global.soundCallbackfunc = callbackfunc;
    _root.soundToPlay.onLoad = function(success:Boolean) {
        if (success) {
            _root.soundToPlay.start();
        }
    };
    _root.soundToPlay.onSoundComplete = function():Void {
        trace("Sound Complete: "+this.soundtype+this.prefix+this.file+".mp3");
        trace(arguments.caller);
        dispatchEvent({type:_global.soundCallbackfunc});
        trace(this.toString());
        trace(this.callbackfunction);
    };
    _root.soundToPlay.loadSound("../sound/"+soundpath+"/"+soundtype+prefix+file+".mp3", true);
    _root.soundToPlay.stop();
}
} 
```

这是 .fla 文件中的代码：

```
var playSounds:soundHandler = new soundHandler("signup", "su", "s", "mcs1");
var file = "000";
playSounds.addEventListener("sixtyseconds", this);
playSounds.addEventListener("transition", this);

function sixtyseconds() {
        trace("I am being called! Sixtyseconds");
        var phase = 1;
        var file = random(6);
        if (file == 0) {
            file = 1;
        }
        if (file<10) {
    file = "0"+file;
        }
        file = phase+file;
        playSounds.playSound(file, "transition");
}
function transition() {
trace("this works");
}
playSounds.playSound(file, "sixtyseconds"); 
```

我完全失去了这个。已经浪费了几个小时来弄清楚。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:12:44.587

好吧，在使用了 Delegate 类之后，我让它与这段代码一起工作：

```
import mx.events.EventDispatcher;
import mx.utils.Delegate;

class soundHandler{

    public var addEventListener:Function;
    public var removeEventListener:Function;
    private var dispatchEvent:Function;
    private var soundToPlay;
    private var soundpath:String;
    private var soundtype:String;
    private var prefix:String;
    private var mcname:String;

    public function soundHandler(soundpath:String, prefix:String, soundtype:String,    mcname:String) {
        EventDispatcher.initialize(this);
        _root.createEmptyMovieClip(mcname, 1);
        this.soundpath = soundpath;
        this.soundtype = soundtype;
        this.prefix = prefix;
        this.mcname = mcname;
    }

    private function playSoundCallback(file, callbackfunc) {
        var soundname = "s"+file;
        _root[soundname] = new Sound(_parent.mcname);
        _root[soundname].onLoad = function(success:Boolean) {
            if (success) {
                _root[soundname].start();
            }
        };
        trace("Play Sound: "+file+".mp3; Function To Call: "+callbackfunc);
        _root[soundname].onSoundComplete = Delegate.create(this,function():Void {
            trace("Sound Complete: "+this.soundtype+this.prefix+this.file+".mp3");
            dispatchEvent({type:callbackfunc});
        });
        _root[soundname].loadSound("../sound/"+soundpath+"/"+soundtype+prefix+file+".mp3", true);
        _root[soundname].stop();
    }

    private function playRandomSoundCallback(phase, scope, callbackfunc) {
        var file = random(scope);
        if (file == 0) {
            file = 1;
        }
        if (file<10) {
            file = "0"+file;
        }
        file = phase+file;
        playSoundCallback(file, callbackfunc);
    }

    private function playSound(file) {
        var soundname = "s"+file;
        _root[soundname] = new Sound(_root.mcname);
        _root[soundname].onLoad = function(success:Boolean) {
            if (success) {
                _root[soundname].start();
            }
        };
        trace("Play Sound: "+file+".mp3");
        _root[soundname].loadSound("../sound/"+soundpath+"/"+soundtype+prefix+file+".mp3", true);
        _root[soundname].stop();
    }

    private function playSoundRandom(phase, scope) {
        var file = random(scope);
        if (file == 0) {
            file = 1;
        }
        if (file<10) {
            file = "0"+file;
        }
        file = phase+file;
        playSound(file);
    }

    private function playSoundAS(identifier) {
        var soundname = identifier;
        _root[soundname] = new Sound(_root.mcname);;
        trace("Play Sound AS: "+identifier+".mp3");
        _root[soundname].attachSound("identifier");
        _root[soundname].start();
    }
} 
```

# node.js - 在 IIS Express 下运行的 Node.js 不断崩溃

> ID：11287509
> 
> 赞同：1
> 
> 时间：2012-07-02T03:33:47.960
> 
> 标签：node.js, powershell, azure, iis-express

我最近在我的机器上重新安装了 Windows 7，并返回下载和安装工具以帮助我继续开发 node.js Windows azure Web 应用程序。我按照 node.js azure 站点上的说明进行操作：

[http://www.windowsazure.com/en-us/develop/nodejs/](http://www.windowsazure.com/en-us/develop/nodejs/)

并使用 web installer 4.0 它说我已经成功安装了这些工具：

*   Windows Azure PowerShell
*   适用于 Node.js 的 Windows Azure SDK - 2012 年 6 月
*   适用于 .Net 的 Windows Azure SDK（VS 2012 RC）- 2012 年 6 月
*   IIS 推荐配置

我遇到的问题是，当我使用 powershell 运行站点时，例如：

启动 azureemulator -launch

它继续运行 IIS Express，几分钟后 IIS Express 崩溃并显示以下信息：

```
Problem signature:
Problem Event Name: APPCRASH
Application Name:   iisexpress.exe
Application Version:    8.0.8298.0
Application Timestamp:  4f620349
Fault Module Name:  iiscore.dll
Fault Module Version:   8.0.8298.0
Fault Module Timestamp: 4f63b65c
Exception Code: c0000005
Exception Offset:   00021767
OS Version: 6.1.7601.2.1.0.256.28
Locale ID:  1033
Additional Information 1:   f66d
Additional Information 2:   f66d807b515d6b2dc6f28f66db769a01
Additional Information 3:   7b2f
Additional Information 4:   7b2f6797d07ebc2c23f2b227e779722e 
```

我每次运行 2 个实例，它们都一个接一个地崩溃。有没有人遇到类似的事情并解决这个问题？他们是我需要做的升级吗？我已经运行了 Windows 更新，但它说我已经获得了所有最新的更新等。

我可以告诉 powershell cmdlet 使用 IIS 7 而不是 IIS Express 吗？我猜它与我机器上的 IIS Express 有关。

我四处寻找，发现这个人在这里遇到了类似的问题：

[https://github.com/tjanczuk/iisnode/issues/149](https://github.com/tjanczuk/iisnode/issues/149)

我每 1 秒运行一次 cron 作业，以检查是否需要更新任何网站总数。这会导致 IIS Express 崩溃吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:55:39.813

我相信如果您从下面的链接安装和使用 iisnode 用于 IIS7 64 位（而不是用于 iisexpress 的 iisnode），您的问题将得到解决，因为我可以解决过去类似的问题：

[http://go.microsoft.com/?linkid=9784331](http://go.microsoft.com/?linkid=9784331)

# javascript - dojo 中的确认对话框

> ID：11287510
> 
> 赞同：4
> 
> 时间：2012-07-02T03:34:09.153
> 
> 标签：javascript, dojo

如何在dojo中创建确认对话框？我希望在按钮单击时出现一个确定取消对话框，使用 dojo 对话框（没有 javascript 确认对话框）。到目前为止，我只能在点击事件上显示一个对话框。这是我的代码：

```
<script type="text/javascript">
dojo.require("dijit.form.Button");
dojo.require("dijit.Dialog");

var secondDlg;
dojo.ready(function(){
    // create the dialog:
    secondDlg = new dijit.Dialog({
       title: "Programmatic Dialog Creation",
       style: "width: 300px",
   draggable:false
    });
});
showDialogTwo = function(){
   // set the content of the dialog:
   secondDlg.set("content", "Hey, I wasn't there before, I was added at " + new Date() + "!");
   secondDlg.show();
}
</script>
</head>
<body class="claro" style="margin-right:10px;">
<button id="buttonTwo" data-dojo-type="dijit.form.Button" data-dojo-props="onClick:showDialogTwo" type="button">Show me!</button>
</body> 
```

我怎样才能使这个确定取消对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:09:14.520

```
<script type="dojo/method" event="onClick">
                    var dialog = new dijit.Dialog({
                        title: "Delete Switch Type",
                        style: "width: 400px",
                        content : "Do you really want to delete ?????<br>"
                    });
                   //Creating div element inside dialog
                    var div = dojo.create('div', {}, dialog.containerNode);
                    dojo.style(dojo.byId(div), "float", "left");

                    var noBtn = new dijit.form.Button({
                                label: "Cancel",
                                onClick: function(){
                                    dialog.hide();
                                    dojo.destroy(dialog);
                                }
                             });

                    var yesBtn = new dijit.form.Button({
                                label: "Yes",
                                style : "width : 60px",
                                onClick : <your function here>,
                                dialog.hide();
                    dojo.destroy(dialog);
                                }
                             });
                                  //adding buttons to the div, created inside the dialog
                    dojo.create(yesBtn.domNode,{}, div);
                    dojo.create(noBtn.domNode,{}, div);
                    dialog.show();
                </script> 
```

我将此代码用作内联 dojo/method - 在按钮的单击事件上。无论如何你都可以修改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-11T08:33:12.057

从 Dojo 1.10 开始支持确认对话框。

请参阅[发行说明](http://livedocs.dojotoolkit.org/releasenotes/1.10#dialog-tooltip-and-tooltipdialog)和[文档](http://dojotoolkit.org/reference-guide/1.10/dijit/ConfirmDialog.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T07:06:02.727

上面的解决方案没有考虑对话框右上角的小十字。

很久以前，我做了一套小对话框，你可能会在这里找到一些快乐，尤其是ConfirmDialog.js，我今天刚刚上传到github，你可以看看它们：http: [//github.com/PEM- FR/Dojo-Components/tree/master/dojox/dialog](http://github.com/PEM-FR/Dojo-Components/tree/master/dojox/dialog)

它们应该可以“按原样”使用或稍作改动

# java - 如何动态反编译内存上的类对象？

> ID：11287513
> 
> 赞同：5
> 
> 时间：2012-07-02T03:34:17.663
> 
> 标签：java, decompiler

我正在制作一个工具来动态显示正在运行的 java 类的源代码。我需要一个工具来帮助我从源代码动态反`Class Object`编译`String`。我知道一些反编译工具，如 Jad，DJ 反编译器可以反编译 .class 文件，但我希望工具可以：

```
Class<?> c = ..; // get from runtime environment
String sourcecode = **DecompileTool**.decompileClassObject(c);
return sourcecode; 
```

我需要这样的**DecompileTool**，有人知道吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:47:14.513

我不知道任何可以像这样使用的反编译器。

实际上，*在一般情况下*，不可能实现像这样工作的反编译器：

*   您从运行时获取的`Class<?>`对象不提供任何获取字节码的方法。

*   为了获取字节码，您需要重做类加载器在从类路径中找到“.class”文件时所做的事情。

*   我认为没有办法找出正在使用的类加载器......如果你包括动态实例化类加载器的可能性。（并且此类加载器是（例如）Web 容器中的正常做法。）

*   在一般情况下，类加载器将以您无法重现的方式执行此操作......如果没有逆向工程并将相同的逻辑硬编码到您的反编译器适配器代码中。

此外，即时执行此操作可能毫无意义，因为反编译器很可能会生成不可编译的源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:40:56.150

我认为这些反编译器*都不*支持这种丑陋的界面。

首先，大多数反编译器将以与实际编译器类似的格式表示任何代码，因此，抽象语法树。如果你很幸运，并且反编译器*确实*有一个接口，它可能就是这种类型。退回原始`String`文件不太可能令人满意，因为编写反编译器的人如何知道您希望如何格式化代码（反编译的最大挑战之一是将结果呈现给用户！）。

相反，你应该做的是编写一个小包装器，它可以正确地做到这一点：动态生成需要反编译的文件，通过反编译器发送它们，并将结果提取到一个字符串中（你可以立即得到如果你做聪明的分叉和管道等......但实际上你可能只想格式化反编译器的输出文件......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:15:29.250

试试[Cavaj Java Decomplier](http://cavaj-java-decompiler.en.softonic.com/)，它可能对你有用。如果你对此不满意，试试[JadClipse](http://sourceforge.net/projects/jadclipse/)和 Eclipse IDE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T04:16:09.697

您可以执行以下操作步骤

1）您可以使用可用的反编译器来反编译代码，例如

```
Process p = Runtime.getRuntime().exec("jad /location/CompilesClass.class");
BufferedReader in = new BufferedReader(  
    new InputStreamReader(p.getInputStream()));  
String line = null;  
while ((line = in.readLine()) != null) {  
    System.out.println(line);  
} 
```

`.jad`2）现在编译的类在类文件所在的路径中被转换为扩展名（源代码）

3) 现在您可以按JDK6 的类读取该`.jad`文件。`Scanner`喜欢

```
 Scanner scanner = new Scanner(new File("locationOfJADFIle")).useDelimiter("\n");

        while(scanner.hasNext()){
            System.out.println(scanner.next());
        } 
```

# javascript - 使用 CSS3 和/或 Javascript 发光的直角引用动画

> ID：11287516
> 
> 赞同：2
> 
> 时间：2012-07-02T03:34:41.937
> 
> 标签：javascript, jquery, animation, css

我正在寻找一个聪明的动画，使三个连续的直角引用，如 `» » »`从左到右连续发光，然后再回到最左边的一个。我想知道这是否可能是其他开发人员也可以使用的巧妙效果，并且可能是很好的 Google 素材。

其灵感显然是 iPhone 上的滑动解锁屏幕，其中文本以渐进方式发光。

我确实知道带有关键帧的 CSS3 动画，并且之前已经成功实现过这些动画，但我不确定如何在循环部分中编写代码。我猜 Javascript 是这里的答案，带有某种循环。我正在使用的页面上已经有 jQuery，因此使用 jQuery 功能不会有任何额外的功能。

我的 HTML 结构将是这样的：

`<span class="glowquote"><span>&raquo;</span> <span>&raquo;</span> <span>&raquo;</span></span>`

关于实现这一点的最佳/最聪明方法的任何想法？我意识到并非所有浏览器都支持 CSS3 动画，如果要使用它们并且蜜獾不在乎，我只需要支持现代 webkit 和 gecko 实现。

**编辑 1：**在每个标签周围添加 span 标签，`&raquo;`以允许为 JavaScript 中的每个直角引号单独更改 CSS 属性，就像大多数人所做的那样。对于做CSS3方法的人来说，没必要！

**编辑2：**为了绝对清楚目标是什么，最左边的一个会首先发出某种颜色，使用CSS`color:green`等更改`transition:color linear 0.4s`等等，然后下一个将在可能短暂的延迟之后立即执行相同的操作。

**编辑 3：**为了进一步澄清，我正在寻找的确切动画看起来像这样，尽管在示例中他们使用了一种*非常*hack-ish 的方法，我认为这对很多人都不起作用。我想知道我们是否只是遇到了 javascript/css3 的限制，或者是否有更多的改进可能。链接：[http ://css-tricks.com/examples/SlideToUnlock/](http://css-tricks.com/examples/SlideToUnlock/)

* * *

**带有解决方案摘要的最终编辑：**我决定使用纯 CSS3 选项，但这里提供的许多有效选项都值得您花时间。我希望 StackOverflow 允许多个正确答案。对于从 Google 或其他地方提出此问题的任何人，请务必浏览整个问题以选择最适合您的问题！我想，既然这主要是为了好玩，我会觉得把 Firefox 和 IE 的人留在黑暗中是可以的。您可以在这里看到我的最终实现：http: [//ezrahub.com/board/](http://ezrahub.com/board/)在页面顶部，它用于扩展发布表单。一个怪癖是，如果您更改文本大小，您还必须更改`background-size`CSS 样式表中的属性。我用了`background-size: 120px 50%;`对我来说，如果你玩它，你可以看到效果是如何变化的。

希望每个人都能从中获得乐趣，并享受在您的创作中使用它！向 @JaredFarrish 等自闭症主持人大喊。（为什么这么生气？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T04:22:31.783

为了好玩，这里有一个使用纯 css 的方法。它对浏览器的支持*非常有限。*

```
.glowquote {
    background: -webkit-linear-gradient(left, black 0%, green 40%, green 60%, black 100%);
    background-size: auto 50%;

    padding: 0 100px;

    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;

    -webkit-animation: gradient-animation infinite 1s linear;
} 
```

[http://jsfiddle.net/grc4/uF8H2/3/](http://jsfiddle.net/grc4/uF8H2/3/)

**编辑：** jsfiddle 现在部分在 Firefox 中工作。渐变动画正常工作，唯一不工作的是文本剪辑（[`-moz-background-clip:text`不存在](https://developer.mozilla.org/en/CSS/-moz-background-clip)）。这可以通过在背景顶部使用图像蒙版来解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:48:39.497

首先，我会在各个箭头周围放置跨度，以便您可以单独更改它们的 CSS 设置：

```
<span class="glowquote"><span>&raquo;</span> <span>&raquo;</span> <span>&raquo;</span></span> 
```

然后，假设您使用的是[jQuery UI](http://jqueryui.com/docs/animate)（因为据我所知核心 jQuery 不会为颜色设置动画），您可以执行以下操作：

```
function doGlow(numTimes) {

    var $arrows = $("span.glowquote span");

    function nextGlow(i) {
        $arrows.eq(i).animate({
            color: "green"
        }, 400).animate({
            color: "black"
        }, 400, function() {
            i = (i + 1) % $arrows.length;
            if (i === 0) numTimes--;
            if (numTimes > 0) nextGlow(i);
        });
    }
    nextGlow(0);
} 
```

演示：http: [//jsfiddle.net/KrL44/1](http://jsfiddle.net/KrL44/1)

（或者这里是我的演示的原始版本，无限循环：http: [//jsfiddle.net/KrL44/](http://jsfiddle.net/KrL44/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T03:56:56.727

试试这个：

html:

```
<span class="glowquote"><span>&raquo;</span> <span>&raquo;</span> <span>&raquo;</span> </span> 
```

js：

```
$(document).ready(function(){
    var i = 0;
    function run() {
        $('.glowquote span:eq('+ i +')').animate({color: 'green'}, 500, function(){
         $(this).animate({color: 'black'}, 500);
           i++;
           if (i > 2) { i = 0 } 
           run() 
        })
   }
 run()            
}) 
```

[http://jsfiddle.net/wQ9AT/](http://jsfiddle.net/wQ9AT/)

# silverlight - 无法从列表框中删除列表框项目

> ID：11287519
> 
> 赞同：0
> 
> 时间：2012-07-02T03:34:50.640
> 
> 标签：silverlight

我在 Silverlight 应用程序中有一个列表框。列表框：

```
<ListBox Grid.Row="1" Grid.ColumnSpan="2" Name="lbHazards" Margin="5"
         MinHeight="75" ItemsSource="{Binding Path=HazListByTaskIDCollection}"
         DisplayMemberPath="sHaz_Name"
         IsEnabled="{Binding Path=IsEnabled}" /> 
```

在我的视图模型中

```
Private _HazListByTaskIDCollection As ObservableCollection(Of vw_HazList_By_TaskID)

Public Property HazListByTaskIDCollection() As ObservableCollection(Of vw_HazList_By_TaskID)
    Get
        Return _HazListByTaskIDCollection
    End Get
    Set(ByVal value As ObservableCollection(Of vw_HazList_By_TaskID))
        _HazListByTaskIDCollection = value
        'Used to notify CommonBase class that a property change has occured
        RaisePropertyChanged("HazListByTaskIDCollection")
    End Set
End Property 
```

然后我在视图模型中有一个子：

```
Public Sub FillHazList(ByVal iHazID As Integer, ByVal sHaz_Name As String)
    Try

        Dim yy = New vw_HazList_By_TaskID

        yy.iHazID = iHazID
        yy.sHaz_Name = sHaz_Name

        HazListByTaskIDCollection.Add(yy)

    Catch ex As Exception
        DisplayError("Error Happened", ex)
    End Try

End Sub 
```

当这个 Sub 被调用时，这完美地工作，该项目被添加到列表框中。但我还需要能够从列表框中删除项目所以我认为这很容易所以我创建了另一个子

```
Public Sub RemoveHazListItem(ByVal iHazID As Integer, ByVal sHaz_Name As String)
    Try
        Dim yyy = New vw_HazList_By_TaskID

        yyy.iHazID = iHazID
        yyy.sHaz_Name = sHaz_Name
        HazListByTaskIDCollection.Remove(yyy)

        HazListByTaskIDCollection.Clear()

    Catch ex As Exception
        DisplayError("Error Happened", ex)
    End Try
End Sub 
```

这运行没有错误，但它不会从列表框中删除该项目。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:43:07.257

试试这样：

```
HazListByTaskIDCollection.RemoveAt(HazListByTaskIDCollection.IndexOf(yyy)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:57:09.677

您的`RemoveHazListItem`方法似乎正在创建一个新`vw_HazList_By_TaskID`对象，将几个值放入其中，并尝试从您的集合中删除这个新创建的对象。似乎您没有得到您期望的行为，因为您试图从集合中删除一个从未添加到其中的项目。

据我所知，您的问题有两种解决方案：

1.  `Equals`在你的`vw_HazList_By_TaskID`类中覆盖。这样做应该允许新对象被认为等于集合中的现有对象，因此您应该能够通过传递给与您要删除的对象相同的对象来从集合中删除对象`Remove`。

2.  在集合中查找`vw_HazList_By_TaskID`具有匹配`iHazID`和`sHaz_Name`属性的对象，然后从集合中删除该对象。

顺便说一句，该类的[`Remove`](http://msdn.microsoft.com/en-us/library/ms132413(v=vs.95).aspx)方法`ObservableCollection(Of T)`返回一个`Boolean`值，指示它是否能够从列表中删除一个值。如果未找到要删除的项目，它会返回`False`而不是引发异常。

# objective-c - NSCursor 总是重置为箭头

> ID：11287523
> 
> 赞同：15
> 
> 时间：2012-07-02T03:36:13.460
> 
> 标签：objective-c, cocoa, nscursor

为什么我不能让光标在鼠标拖动期间保持不动？一旦我开始拖动，它就会恢复为“箭头”（即使我在启动后将其设置为应用程序委托中的张开手）。

```
- (void)mouseDown:(NSEvent *)event
{
   [[NSCursor closedHandCursor] push];
}

- (void)mouseUp:(NSEvent *)event
{
   [NSCursor pop];
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-16T10:55:36.870

如果您不希望其他视图在拖动时更改光标，您可以在 -mouseDown 中执行：

```
[[self window] disableCursorRects]; 
```

在 -mouseUp 中：

```
[[self window] enableCursorRects];
[[self window] resetCursorRects]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-02T06:59:04.490

尝试使用`addCursorRect:cursor:`为您的视图设置光标。

覆盖`resetCursorRects`您的视图：

```
- (void)resetCursorRects
{
    [super resetCursorRects];
    if(drag) {
        [self addCursorRect:self.bounds cursor:[NSCursor closedHandCursor]];
    }
} 
```

您需要调用`invalidateCursorRectsForView:`以强制更新您的光标矩形：

```
[self.window invalidateCursorRectsForView:self]; 
```

但是如果你想在你的视图之外有不同的光标，你可以调用`[[NSCursor closedHandCursor] set]`你的`mouseDragged:`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-15T11:33:16.470

我遇到了同样的问题，这是由于在拖动过程中我正在修改子视图的框架，这似乎重置了光标。使用`.cursorUpdate`选项添加跟踪区域并在内部重置光标`cursorUpdate(with:)`时，它似乎可以正常工作。

```
class MyViewController: NSViewController {

    var cursor: NSCursor?

    override func viewDidLoad() {
        super.viewDidLoad()
        view.addTrackingArea(NSTrackingArea(rect: .zero, options: [.activeInKeyWindow, .inVisibleRect, .cursorUpdate], owner: self))
    }

    override func mouseDown(with event: NSEvent) {
        cursor = NSCursor.closedHand
    }

    override func cursorUpdate(with event: NSEvent) {
        cursor?.set()
    }

    override func mouseUp(with event: NSEvent) {
        cursor = nil
    }

} 
```

# android - 如何在另一个活动上显示透明活动而不删除以前的活动

> ID：11287525
> 
> 赞同：22
> 
> 时间：2012-07-02T03:36:40.573
> 
> 标签：android, android-intent

如何在不删除先前活动的情况下在另一个活动上显示透明活动？

我能够创建透明活动，但是当我尝试使用 intent 推送它时，之前的活动会被删除。我希望我的透明活动位于先前活动之上。

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-02T05:11:32.197

像这样在清单中声明您的活动

```
 <activity android:name=".yourActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen"/> 
```

并像这样为您的布局添加透明背景

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
  android:background = "any tranparent image name"  >
 </RelativeLayout> 
```

**编辑：**

我认为你正在使用它来打开你的透明活动它完成你以前的活动

```
Intent intent =new Intent(mContext,yourNewActivity.class);
startActivity(intent);
finish(); 
```

从此处删除完成，然后将您的新活动置于以前的活动之上，如下所示

```
 Intent intent =new Intent(mContext,yourNewActivity.class);
 startActivity(intent); 
```

希望帮助..

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-06-18T06:12:56.980

对于`AppCompat`样式，您可以`styles.xml`在`manifest`.

**样式.xml**

```
<style name="Theme.Transparent" parent="Theme.AppCompat.Light.NoActionBar">
    <item name="android:windowIsTranslucent">true</item>   
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>   
    <item name="android:windowNoTitle">true</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="colorPrimaryDark">@android:color/transparent</item>
</style> 
```

**显现**

```
<activity android:name=".HomeActivity"
android:theme="@style/Theme.Transparent" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T03:43:20.803

我不知道您为什么要这样做，但也许[自定义对话框](http://www.mkyong.com/android/android-custom-dialog-example/)可以满足您的需求。

**编辑**：这个问题之前已经回答过：[如何在 Android 上创建一个透明的活动？](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)

我不想粗鲁，但我认为你应该从你的角度做更多的研究。此外，您能否发布一些代码以查看您到底在尝试什么，它也表明您正在尝试某些东西。

# java - 这个 Java 代码片段是如何“工作”的？

> ID：11287530
> 
> 赞同：1
> 
> 时间：2012-07-02T03:37:29.110
> 
> 标签：java, arrays

Java面试题是：

> 在不使用临时缓冲区的情况下，将 0 和 1 从数组中分离出来，将所有 0 放在左侧，将 1 放在右侧。将结果打印为字符串。例如，给定 {0,1,1,0,0,1}，输出为“000111”。

答案是：

```
public class ZeroOneSeparator {

    public static void zeroOneSeparator(int[] inputArr){

        // for each index, store number of 1's up to the index
        for (int i = 1; i < inputArr.length; i++) {
            inputArr[i] = inputArr[i-1] + inputArr[i];  
        }

        // This is the "magical math" block I don't understand.
        // Why does this "work"?
        for (int i = inputArr.length - 1; i > 0; i--) {
            if (inputArr[i] > 0) {
                inputArr[i-1] = inputArr[i] - 1;
                inputArr[i] = 1;
            } else {
                inputArr[i-1] = 0;
            }
        }

        for (int i = 0; i < inputArr.length; i++) {
            System.out.print(inputArr[i]);
        }
    }

    public static void main(String[] args) {
        int[] inputArr1 = {1,0,1,0,1,1};
        ZeroOneSeparator.zeroOneSeparator(inputArr1);
        System.out.println();
        int[] inputArr2 = {1,1,1,0,0,0,0,0,0,1};
        ZeroOneSeparator.zeroOneSeparator(inputArr2);
        int[] inputArr3 = {}; // intentionally empty
        System.out.println();
        ZeroOneSeparator.zeroOneSeparator(inputArr3);
        int[] inputArr4 = {0,0,0,0,0,0};
        System.out.println();
        ZeroOneSeparator.zeroOneSeparator(inputArr4);
        int[] inputArr5 = {0,1,0,1,0,1,0,1};
        System.out.println();
        ZeroOneSeparator.zeroOneSeparator(inputArr5);
        int[] inputArr6 = {1,1,1,1,1,1,0,0,0,0,0};
        System.out.println();
        ZeroOneSeparator.zeroOneSeparator(inputArr6);
    }
} 
```

我用调试器逐步完成了这段代码，但我仍然不明白它为什么会起作用。有人可以带我过去吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T03:50:01.360

让我们尝试一个例子来看看发生了什么。假设我们有以下数组：

```
0 1 1 0 1 1 0 0 
```

第一个循环（如注释所指定）计算到目前为止看到的 1 的总数，其中每个 1 增加计数，每个 0 保持不变。所以对于我们的数组，我们最终得到这个：

```
0 1 2 2 3 4 4 4 
```

请注意，数组的最后一个元素现在是 4，这是 1 的总数。我们在下一个循环中使用这个事实。

我们从最后一个元素开始，检查它是否大于 0。如果是，则用 1 替换该元素，然后将该计数减 1 并将其分配给前一个元素。我们一直这样做，边走边填 1，直到计数达到 0。此时，我们将遇到的每个元素设置为 0。

这里真正发生的是，一旦我们知道有多少个 1，我们就可以从数组的末尾“倒数”，填充那个数量的 1。此时，我们知道其余元素必须为 0，因此我们可以在该点将其余元素设置为 0。

从视觉上看，它看起来像这样（“当前元素”被 [] 包围）

```
0 1 2 2 3 4 4 [4] ->
0 1 2 2 3 4 [3] 1 ->
0 1 2 2 3 [2] 1 1 ->
0 1 2 2 [1] 1 1 1 ->
0 1 2 [0] 1 1 1 1 ->
0 1 [0] 0 1 1 1 1 ->
0 [0] 0 0 1 1 1 1 ->
0 0 0 0 1 1 1 1 
```

请注意，以这种方式查看时，“倒计时”似乎非常明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:46:17.803

由于您在最后一个索引处的数组中有 1 的计数，因此您只需从后面循环并将其替换为 1。代码中的技巧是，它减少 1 的计数并将其存储在每一步中的前一个数组元素中，以便在下一步中，它知道当前元素是 0 还是 1。它工作得很好即使在所有 1 或几乎所有 1 的情况下（数组中只有一个 0），因为当它修改索引 0 处的元素时，1 的左侧计数正好是正确的数字。

就个人而言，我会记录 1 的计数，得出 0 的计数并使用 2 个循环来打印/设置数组中的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T03:50:38.730

第一个*for* 循环计算每个项目左侧有多少个 1。如果输入为`{0,1,1,0,0,1}`，则作为计数的结果，输入数组变为`{0,1,2,2,2,3}`。

最后一个索引 3 表示列表中有三个 1。第二个*for*循环反向遍历列表，并将最后三个项目标记为 1。

# php - WAMP PHP 5.4.3 32 位 cURL 扩展？

> ID：11287532
> 
> 赞同：2
> 
> 时间：2012-07-02T03:37:43.037
> 
> 标签：php, wamp

有谁知道**为 PHP 5.4.3 编译的 32 位 cURL 在**哪里？因为最新的 WAMP 自带的 cURL 是无效的。

由于我使用的是 32 位 Windows，因此无法从此处运行该文件：

[http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)

# java - 如何在同一个实体类上做单向的一对多关系？

> ID：11287534
> 
> 赞同：1
> 
> 时间：2012-07-02T03:37:49.887
> 
> 标签：java, jakarta-ee, jpa, playframework, ebean

如何在同一个实体类上做单向的一对多关系？

```
@Entity
public class User extends Model {
    @Id
    private Long id;
    ....
    @OneToMany(cascade = CascadeType.PERSIST)
    @JoinTable(name="ignores",
               joinColumns = @JoinColumn(name = "user_id"),
               inverseJoinColumns = @JoinColumn(name="ignored_id"))
    public List<User> ignoreList;
    ....        
} 
```

[PersistenceException：插入具有单向关系的 bean [class models.User] 时出错。对于插入，您必须在主 bean [class models.User] 上使用级联保存。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-17T12:15:07.790

就文档而言，您似乎不能。一方面，你必须坚持master bean；另一方面，主 bean 本身可能包含在主 bean 中。

我目前遇到了类似的问题，据我所知，这是 Ebean 的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:57:53.397

它基本上说，对于 INSERTS，您必须在 MASTER BEAN 上使用 CASCADE SAVE。

您应该保留包含被忽略用户的父用户。

# macos - 在终端上的 Mac OS X 上执行屏幕导致错误

> ID：11287535
> 
> 赞同：1
> 
> 时间：2012-07-02T03:38:07.707
> 
> 标签：macos, terminal, command-line-arguments, gnu-screen

我在 MacOS X 10.6.8 上工作，我需要使用**gnu-screen**应用程序。为此，我在终端中执行下一行命令来创建一个新会话： `screen -S newsession`，但这会产生这个错误：`LoginName too long - sorry.`这个错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:01:27.053

我没有看到 OS X 10.7.4 / 屏幕版本 4.00.03 (FAU) 23-Oct-06 和 11 个字符的用户名的问题。

但是，该问题存在一个错误：

[GNU 屏幕 - 错误：错误 #21653，登录名太长 - 抱歉。](http://savannah.gnu.org/bugs/?21653)

# winapi - GetCursorPos 只返回 x 值

> ID：11287536
> 
> 赞同：3
> 
> 时间：2012-07-02T03:38:43.693
> 
> 标签：winapi, vb6, cursor-position

[我在MSDN 论坛](http://social.msdn.microsoft.com/Forums/eu/vblanguage/thread/b3e97c02-e713-4771-a448-ac521fbbe4ac)上看到一个线程，其中存在 32 位与 64 位整数的问题。我不确定这是否是我的问题，但似乎这段代码应该可以工作，所以我有点困惑。

我在 Windows 7 64 位中以兼容模式 (XP SP2) 运行 VB6。

```
Type POINTAPI ' This holds the logical cursor information
    x As Integer
    y As Integer
End Type

Public Declare Function GetCursorPos Lib "user32" (lpPoint As POINTAPI) As Long 
```

在`Timer1_Timer()`...

```
Dim mousePos As POINTAPI
Call GetCursorPos(mousePos)
MsgBox mousePos.x & " " & mousePos.y 
```

此消息框显示鼠标 x 坐标的正确值，但无论鼠标在屏幕上的哪个位置，它都显示`"0"`为。`y`还有，`GetCursorPos()`正在回归`1`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T04:20:33.803

在 VB6 中，整数数据类型是 16 位数字。您必须使用 Long 因为这是一个 32 位数字。

```
Type POINTAPI ' This holds the logical cursor information
  x As Long
  y As Long
End Type

Public Declare Function GetCursorPos Lib "user32" (lpPoint As POINTAPI) As Long 
```

或使用：

```
Declare Function GetCursorPos Lib "user32.dll" (lpPoint As POINT_TYPE) As Long 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T04:21:39.943

如果您在 VB6 中运行，您的 POINTAPI 声明需要使用 Long 作为您的点声明：

```
Type POINTAPI ' This holds the logical cursor information 
    x As Long
    y As Long 
End Type 
```

* * *

就返回 1 而言，这意味着您成功了：

**返回值**Long - 成功时非零，失败时为零。设置 GetLastError

*“从 Visual Basic 程序员指南到 Win32 API”*

# alassetslibrary - ALAsset 每个资产都属于一个事件吗？

> ID：11287539
> 
> 赞同：0
> 
> 时间：2012-07-02T03:40:24.990
> 
> 标签：alassetslibrary, alasset

我正在做一个涉及 ALassets 的项目。我知道从 iphoto 手机中的每张照片都属于一个事件。事件似乎就像文件夹。我不清楚的是，如果您将手机同步到 PC 而不是 Mac，那么每个资产是否仍然属于一个事件？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:14:25.653

AssetLibrary 有所谓的组。这些组包含资产。有以下类型的组：

```
enum {
    ALAssetsGroupLibrary        = (1 << 0),         // The Library group that includes all assets.
    ALAssetsGroupAlbum          = (1 << 1),         // All the albums synced from iTunes or created on the device.
    ALAssetsGroupEvent          = (1 << 2),         // All the events synced from iTunes.
    ALAssetsGroupFaces          = (1 << 3),         // All the faces albums synced from iTunes.
    ALAssetsGroupSavedPhotos    = (1 << 4),         // The Saved Photos album.
    ALAssetsGroupPhotoStream    = (1 << 5),         // The PhotoStream album.
    ALAssetsGroupAll            = 0xFFFFFFFF,       // The same as ORing together all the available group types, 
                                                    // with the exception that ALAssetsGroupLibrary is not included.
}; 
```

如果资产已由 iTunes 同步或由相机连接工具包创建，则它只是事件的一部分。在设备上拍摄的照片始终是 ALAssetsGroupSavedPhotos（相机胶卷）的一部分，并且可以另外分配给用户创建的相册。

# spring - 这个 dbcp 异常重要吗？

> ID：11287541
> 
> 赞同：1
> 
> 时间：2012-07-02T03:40:29.247
> 
> 标签：spring, apache-commons-dbcp

我正在使用spring 3.05 + mysql，程序运行后，我从日志中发现了很多异常：

```
books.log.6- 09:24:45 Closing JPA EntityManager -org.springframework.orm.jpa.EntityManagerFactoryUtils
books.log.6- 09:24:45 about to close PreparedStatement (open PreparedStatements: 1, globally: 1) -org.hibernate.jdbc.AbstractBatcher
books.log.6- 09:24:45 aggressively releasing JDBC connection -org.hibernate.jdbc.ConnectionManager
books.log.6- 09:24:45 releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)] -org.hibernate.jdbc.ConnectionManager
books.log.6- 09:24:45 Cannot release connection [???] -org.hibernate.util.JDBCExceptionReporter
books.log.6: java.sql.SQLException: Already closed.
books.log.6-    at org.apache.commons.dbcp.PoolableConnection.close(PoolableConnection.java:114)
books.log.6-    at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.close(PoolingDataSource.java:191)
books.log.6-    at org.hibernate.connection.DatasourceConnectionProvider.closeConnection(DatasourceConnectionProvider.java:97)
books.log.6-    at org.hibernate.jdbc.ConnectionManager.closeConnection(ConnectionManager.java:474)
books.log.6-    at org.hibernate.jdbc.ConnectionManager.aggressiveRelease(ConnectionManager.java:429)
books.log.6-    at org.hibernate.jdbc.ConnectionManager.afterStatement(ConnectionManager.java:304)
books.log.6-    at org.hibernate.jdbc.AbstractBatcher.closePreparedStatement(AbstractBatcher.java:572)
books.log.6-    at org.hibernate.jdbc.AbstractBatcher.closeStatement(AbstractBatcher.java:291)
books.log.6-    at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:307)
books.log.6-    at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:234)
books.log.6-    at org.hibernate.loader.Loader.getResultSet(Loader.java:1967)
books.log.6-    at org.hibernate.loader.Loader.doQuery(Loader.java:802)
books.log.6-    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
books.log.6-    at org.hibernate.loader.Loader.doList(Loader.java:2533)
books.log.6-    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
books.log.6-    at org.hibernate.loader.Loader.list(Loader.java:2271)
books.log.6-    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:452)
books.log.6-    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
books.log.6-    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
books.log.6-    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
books.log.6-    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
books.log.6-    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:246)
books.log.6-    at com.tekelec.books.domain.BookInfo.findAllBooks_aroundBody4(BookInfo.java:238)
books.log.6-    at com.tekelec.books.domain.BookInfo.findAllBooks(BookInfo.java:1)
books.log.6-    at com.tekelec.books.web.BooksController.getBooks(BooksController.java:37)
books.log.6-    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
books.log.6-    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
books.log.6-    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
books.log.6-    at java.lang.reflect.Method.invoke(Method.java:616)
books.log.6-    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212) 
```

我知道这是由 Mysql 引起的——经过数小时的空闲后，它最初关闭了连接，而从 dbcp 端看起来它仍然活着。由于 Mysql 服务于多个数据库实例，所以我需要从我的应用程序代码方面进行更改。

我的问题是，例外真的重要吗？JPA 会在失败后重试连接吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:56:19.693

您应该将验证查询 ( `select 1`) 添加到您的`DataSource`.

```
<Resource name="jdbc/cfmediaarchive" type="javax.sql.DataSource"
    driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://localhost:3306/mydb?useUnicode=true&amp;characterEncoding=utf8"

    auth="Container" username="username" password="password"

    maxIdle="3" maxActive="15" maxWait="10000" logAbandoned="true" removeAbandoned="true" removeAbandonedTimeout="60" 

    validationQuery="select 1" /> 
```

* * *

使用 Spring 配置：

春天.xml

```
 <bean id="dataSource"
    class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${driverClassName}" />
    <property name="url" value="${url}" />
    <property name="username" value="${username}" />
    <property name="password" value="${password}" />
    <property name="validationQuery" value="select 1"/>
</bean>

  <bean
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="dataSource" ref="dataSource" />
    <!-- this is important to connect JPA and JdbcTemplate transaction control -->
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="false" />
        </bean>
    </property>
</bean> 
```

持久性.xml

```
<persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect" />
        <property name="hibernate.hbm2ddl.auto" value="validate" />
        <property name="hibernate.connection.charSet" value="UTF-8" />
        <property name="hibernate.show_sql" value="false" />

    </properties>
</persistence-unit> 
```

# iphone - 内存保留和释放

> ID：11287544
> 
> 赞同：0
> 
> 时间：2012-07-02T03:41:03.427
> 
> 标签：iphone, objective-c, memory-management

我想知道，如果我做得正确，关于下面的数字按钮参考的保留和释放。在“由 stephen kochan 编写的目标 C 编程”一书中，它在一节中用不同的例子说，就像 digitbutton 持有对发送者持有的同一个对象的引用，所以在这之间发送者可能会在其他地方被释放，然后我会调用 currenttitle 方法在解除分配的数字按钮上，如果是这样的话。所以在这里我在digitbutton上调用了retain，在使用它之后我调用了release。好吧，示例可能不是出于此目的，但这个概念是否有效？我应该练习保留如下示例中的对象吗？如果我错了，你能帮帮我吗？我在编写托管代码方面没有经验。

```
- (IBAction)clickDigit:(id)sender {
    UIButton *digitButton = (UIButton*)sender;
    [digitButton retain];
    NSLog(@"%@",[digitButton currentTitle]);
    [[self displayOutput] setText:[digitButton currentTitle]];
    [digitButton release];
} 
```

格拉西亚斯。

是的，示例是错误的，可以说如果不是 id sender 而是 NSString 而不是 UIButton，相同的 NSString，并且返回类型只是 void。那么我是否必须保留发件人 NSString 以防万一持有其引用的人释放它。注意：我没有使用 ARC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T05:16:29.603

你不需要保留和释放它。

你可以这样做

```
 - (IBAction)clickDigit:(UIButton *)sender 
 {

    NSLog(@"%@",[sender currentTitle]);
   [[self displayOutput] setText:[sender currentTitle]];

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:50:13.403

你在做什么`clickDigit:`是不必要的。

我不会解释为什么没有必要，而是直接指出我在哪里学习了正确的内存管理技术：[高级内存管理编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

# mysql - 用于检查 ID 差异的 SQL 命令

> ID：11287545
> 
> 赞同：0
> 
> 时间：2012-07-02T03:41:20.977
> 
> 标签：mysql, sql

我有 2 张桌子。

我如何知道一个表中而不是另一表中的 ID？我将如何做到这一点？

然后我想删除所有这些 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:45:17.163

这很简单：

```
delete from t1
using table1 as t1
left outer join table2 as t2
on t1.id = t2.id
where t2.id is null 
```

值得注意的是，连接比子查询快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T03:45:38.917

使用此查询：

```
 delete from TABLE_A where ID not in (select ID from TABLE_B) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T03:47:14.773

使用此查询：

```
delete from t1 
where id not in
(select t2.id from t2) 
```

# java - 来自不同PC的不同客户端使用java中的ip与服务器通信

> ID：11287548
> 
> 赞同：0
> 
> 时间：2012-07-02T03:42:06.083
> 
> 标签：java, ip, chat, nio

我正在使用`java.nio package`我的聊天应用程序。但是，它只能连接本地主机中的不同客户端。如何连接来自不同 IP 地址的多个客户端？

目前我正在使用以下代码连接到我的客户端：

```
InetAddress.getByName("10.10.10.172"); 
```

我希望能够从 IP 地址为 10.10.10.123 的客户端向 IP 地址为 10.10.10.124 的服务器发送消息。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:20:42.247

我认为它与您使用单台电脑的方式相同......

在我开始之前还有一件事.. 10.10.10.777 和 10.10.10.888 是**无效 IP**

**IPv4 采用点分十进制格式，范围为 0-255**

**0 - 网络地址 255 - 广播地址**

**0 和 255 不用于将 ip 分配给 pc** ...**使用 1 - 254。**

并**尝试使用 1024 以上的端口**，这些端口被称为 Well-Known 端口，用于运行各种服务，如 SMTP、FTP、HTTP、TELNET 等......

觉得要记住了......

1.  **关闭您的防火墙**，或者在防火墙中为您要运行服务器的端口**的规则添加一个例外。**

2.  在服务器端创建**单独的线程来处理多个客户**端..

例如：

```
The Server side code example:

public class ServerTest {

    ServerSocket s;

    public void go() {

        try {
            s = new ServerSocket(44457);

            while (true) {

                Socket incoming = s.accept();
                Thread t = new Thread(new MyCon(incoming));
                t.start();
            }
        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    class MyCon implements Runnable {

        Socket incoming;

        public MyCon(Socket incoming) {

            this.incoming = incoming;
        }

        @Override
        public void run() {

            try {
                PrintWriter pw = new PrintWriter(incoming.getOutputStream(),
                        true);
                InputStreamReader isr = new InputStreamReader(
                        incoming.getInputStream());
                BufferedReader br = new BufferedReader(isr);
                String inp = null;

                boolean isDone = true;

                System.out.println("TYPE : BYE");
                System.out.println();
                while (isDone && ((inp = br.readLine()) != null)) {

                    System.out.println(inp);
                    if (inp.trim().equals("BYE")) {
                        System.out
                                .println("THANKS FOR CONNECTING...Bye for now");
                        isDone = false;
                        s.close();
                    }

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                try {
                    s.close();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new ServerTest().go();

    } 
```

}

# c# - 如何使用 ashx 处理程序识别下载是否完成

> ID：11287551
> 
> 赞同：2
> 
> 时间：2012-07-02T03:42:55.770
> 
> 标签：c#, asp.net, download, httphandler, ashx

在我们的一个项目中，我们需要将文件从服务器下载到客户端位置的功能。

为此，我们使用 ashx 处理程序来执行操作。它运行良好，我们能够下载文件。

现在我们需要一个要求，比如我们需要在下载开始和完成时更新一个字段。有没有办法做到这一点。

单击下载链接后，将出现另存为对话框，之后我认为我们无法控制检查进度。我认为我们甚至不知道点击了哪个按钮，即我们不知道用户点击的是“是”还是“否”。

谁能建议一种方法来了解下载何时开始以及何时完成？我们正在使用带有 c# 的 Asp.Net 2.0。

用于下载的处理程序如下所示

```
 string fileUrl = string.Empty;

                if (context.Request["fileUrl"] != null)
                {
                    fileUrl = context.Request["fileUrl"].ToString();                    
                }
                string filename = System.IO.Path.GetFileName(fileUrl);

                context.Response.ClearContent();
                context.Response.ContentType = "application/exe";
                context.Response.AddHeader("content-disposition", String.Format("attachment; filename={0}", filename));
                context.Response.TransmitFile(fileUrl);
                context.Response.Flush(); 
```

该文件是从 aspx 页面方法下载的，例如

```
private void DownloadExe()
{
  string downloadUrl = "Test.exe");
  Response.Redirect("Test.ashx?fileUrl=" + downloadUrl, false);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:51:29.990

这个怎么样：

```
Response.BufferOutput = false;
Response.TransmitFile(fileUrl);
//download complete code 
```

如果您禁用响应输出缓冲，那么在客户端完成接收之前，它不会越过将文件发送到客户端的代码行。如果他们在中途取消下载，则会引发 HttpException，因此下载完整代码不会运行。

您还可以在调用刷新缓冲区后放置下载完整代码。但最好不要在发送大型二进制文件以节省服务器内存时启用缓冲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T05:14:11.587

您的 ASHX 处理程序知道下载是否开始（因为它实际上被调用）以及下载完成时（到达处理程序的结尾）。如果您在块中手动写入响应，您甚至可能会在服务器端获得一些进度，这样您也可以检测到用户取消下载时的某些情况（如果写入响应流在某些时候失败）。

根据您的需要，您可以将此信息传输到其他页面（即通过会话状态）或简单地存储在某个数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T14:36:42.280

好的，我遇到了同样的问题并跳过了这个网站： [Check over coockies](http://gruffcode.com/2010/10/28/detecting-the-file-download-dialog-in-the-browser/)

这对我很有用。

# css - 带有 css 的手电筒效果

> ID：11287557
> 
> 赞同：2
> 
> 时间：2012-07-02T03:43:23.263
> 
> 标签：css

这就是我想要做的：一个纯灰色的背景，从页面中心开始到顶部结束的半日食（即半日食）光，所以看起来好像有一个火炬向上闪耀从页面的中心。

我曾尝试使用 SVG 而不是 css，因为我认为它可能更容易，但我遇到了一些问题。谁能指出我正确的方向？

编辑：这是我想要实现的图像： ![在此处输入图像描述](../Images/cee6cada3cd54e3aca6b5b72c9b7202b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T03:54:12.230

You can use a `radial-gradient` as the background image like this:

```
html {
    background: #ccc;
    background: -moz-radial-gradient(50% -50%, cover, #fff 0%, #eee 50%, #ccc 55%, #bbb 100%);
    background: -webkit-radial-gradient(50% -50%, cover, #fff 0%, #eee 50%, #ccc 55%, #bbb 100%);
    background: -ms-radial-gradient(50% -50%, cover, #fff 0%, #eee 50%, #ccc 55%, #bbb 100%);
    background: -o-radial-gradient(50% -50%, cover, #fff 0%, #eee 50%, #ccc 55%, #bbb 100%);
    background: radial-gradient(50% -50%, cover, #fff 0%, #eee 50%, #ccc 55%, #bbb 100%);
    min-height: 100%;
} 
```

This works by placing the center of the gradient 50% above the page (note the `-50%` second parameter.) combined with the cover `size` attribute.

You can read more about the CSS [radial-gradient property at MDN](https://developer.mozilla.org/en/CSS/radial-gradient).

Here is an example: [http://jsfiddle.net/kUFNV/4/](http://jsfiddle.net/kUFNV/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:58:46.100

我建议使用像[这样的 CSS3 渐变生成器之一](http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/default.html)。在径向渐变上使用几个不同的色标，您应该能够完成一些非常接近的事情。

这是我快速整理的一个：http: [//jsfiddle.net/43k6F/](http://jsfiddle.net/43k6F/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T03:53:58.660

Why not use a CSS gradient? Here:

```
background: #f9f9f9;
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPHJhZGlhbEdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IjUwJSIgcj0iNzUlIj4KICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmOWY5ZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjY2RjZGNkIiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogIDxyZWN0IHg9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-radial-gradient(center, ellipse cover, #f9f9f9 0%, #cdcdcd 100%);
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#f9f9f9), color-stop(100%,#cdcdcd));
background: -webkit-radial-gradient(center, ellipse cover, #f9f9f9 0%,#cdcdcd 100%);
background: -o-radial-gradient(center, ellipse cover, #f9f9f9 0%,#cdcdcd 100%);
background: -ms-radial-gradient(center, ellipse cover, #f9f9f9 0%,#cdcdcd 100%);
background: radial-gradient(ellipse at center, #f9f9f9 0%,#cdcdcd 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f9f9f9', endColorstr='#cdcdcd',GradientType=1 ); 
```

Then add a `margin-top: -50%;` CSS to the element with the background. I don't suggest this is the body element as it'll get a bit messy, but create a new element with absolute positioning, give it the gradient code and the -50% margin and `z-index: -1;` so it'll be under all the rest of the page.

Good luck!

# c++ - 基本示例的 V8 编译错误

> ID：11287561
> 
> 赞同：0
> 
> 时间：2012-07-02T03:44:51.060
> 
> 标签：c++, v8

我正在尝试为 V8 编译 hello world 示例，但我一直遇到编译时错误。这是代码：

```
#include <v8/src/v8.h>

using namespace v8;

int main(int argc, char* argv[]) {

  // Create a string holding the JavaScript source code.
  String source = String::New("Hi");

  // Compile it.
  Script script = Script::Compile(source) ;

  // Run it.
  Value result = script->Run();

  // Convert the result to an ASCII string and display it.
  String::AsciiValue ascii(result) ;
  printf("%s\n", *ascii) ;
  return 0;
} 
```

这是编译错误：

```
error: conversion from ‘v8::Local<v8::String>’ to non-scalar type ‘v8::String’ requested 
```

错误出现在第 8 行，它说： String source = String::New("Hi");

我试过用谷歌搜索这个错误，但似乎找不到有意义的修复方法。有任何想法吗？

我都试过了：

svn 结帐[http://v8.googlecode.com/svn/trunk/](http://v8.googlecode.com/svn/trunk/) v8

和

svn 结帐[http://v8.googlecode.com/svn/branches/bleeding_edge/](http://v8.googlecode.com/svn/branches/bleeding_edge/) v8

并为两者获得相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:05:41.450

根据错误消息，尝试：

```
Local<String> source = String::New("Hi"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:54:21.823

试试这个代码：

```
HandleScope handle_scope;
Persistent<Context> context = Context::New();
Context::Scope context_scope(context);
Handle<String> source = String::New("'Hello' + ', World!'");
Handle<Script> script = Script::Compile(source);
TryCatch trycatch;
Handle<Value> result = script->Run();   
if ( result.IsEmpty() ) {
    Handle<Value> excep = trycatch.Exception();
    String::AsciiValue excep_str(excep);
    printf("%s\n",*excep);
}  else {
    String::AsciiValue ascii(result);
    printf("%s\n", *ascii);
}
context.Dispose();
return 0; 
```

# php - 所需页面中的 php 对象属性 NULL

> ID：11287562
> 
> 赞同：0
> 
> 时间：2012-07-02T03:44:53.613
> 
> 标签：php, require-once

为什么会这样：

```
echo $session->name;
require_once('test.php');
//echos the name then loads the required page 
```

但

```
var_dump($session->name); 
```

在 test.php 的代码中返回 NULL。

我认为`require_once`几乎将所有代码从所需页面放入我告诉它的位置。

**编辑**

$session 实例是在 test.php 之外的 require 之前创建的。如果我在 test.php 中创建一个新的 $session 实例，它就可以工作。很高兴它有效，但这对我来说仍然没有意义，谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:09:40.527

`$session`不在范围内。在你初始化 $session 的地方包含那个脚本。或在所有脚本中将其声明为全局，以便仅为 $session 保存包含。为什么不使用`$_SESSION`呢？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T03:59:19.007

愚蠢的问题：您是否已经在脚本中的其他地方 require_once'd test.php？如果是这样，那么当您第一次包含它时，可能没有设置 $session。您是否尝试过 include('test.php') ？

**调试编辑：**

您可以通过尝试以下操作来验证调用的顺序：

在 caller.php （或任何你称之为的）文件中：

```
echo "Debug 1";
echo $session->name;
require_once('test.php'); 
```

在 test.php 中：

```
echo "Debug 2";
var_dump($session->name); 
```

哪个先打印，Debug 1 还是 Debug 2？

# bash - 获取“sed 错误 - 非法字节序列”（在 bash 中）

> ID：11287564
> 
> 赞同：94
> 
> 时间：2012-07-02T03:44:59.490
> 
> 标签：bash, sed

做一些流编辑来改变讨厌的 Parallels 图标。它的开发很差，并且嵌入到应用程序本身而不是图像文件中。所以我找到了这个 sed 命令，它有一些很好的反馈：

```
sudo sed -i.bak s/Parallels_Desktop_Overlay_128/Parallels_Desktop_Overlay_000/g /Applications/Parallels\ Desktop.app/Contents/MacOS/prl_client_app 
```

它返回`sed: RE error: illegal byte sequence`

谁能解释这意味着什么？命令的哪一部分有问题？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-07-02T03:59:42.990

尝试设置`LANG`环境变量 ( `LANG=C sed ...`) 或使用此处提到的二进制 sed 工具之一：[二进制 sed 替换](https://stackoverflow.com/questions/2604964/binary-sed-replacement)

**为什么会出错？**

没有`LANG=C`sed 假定文件以指定的任何编码进行编码，并且文件（二进制）可能包含在' 编码`LANG`中不是有效字符的字节（因此您可能会得到'非法字节序列'）。`LANG`

**为什么`LANG=C`有效？**

C 恰好将所有 ASCII 字符视为自身，将非 ASCII 字符视为文字。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-03-18T02:07:26.493

`LANG=C`独自一人并没有为我解决问题，但添加`LC_CTYPE=C`也解决了它。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-05-07T16:48:41.133

除了`LANG=C`and之外`LC_CTYPE=C`，我还必须这样做`LC_ALL=C`才能使其正常工作。

`LC_ALL`覆盖所有单个`LC_*`类别。因此，最稳健的方法是使用`LC_ALL=C sed ...`——无需同时处理其他变量。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-06-04T16:37:07.467

我设法通过运行来做到这一点：

```
unset LANG 
```

在`sed`命令之前。

不知道我做了什么或为什么它有效，但它确实有效。

# jquery - 隐藏固定透明标题下的滚动内容，滚动背景

> ID：11287575
> 
> 赞同：4
> 
> 时间：2012-07-02T03:46:58.993
> 
> 标签：jquery, css, image, cross-browser, scroll

假设我有一个背景图像，一个带有透明部分的固定标题图像，一个具有半透明背景的内容 div 和传统页眉/内容/页脚布局中的动态高度。

我想要达到的效果：在固定标题下滚动背景和内容（隐藏内容并显示背景）。

我已经阅读了一堆相关主题，例如 [在透明标题下隐藏滚动内容](https://stackoverflow.com/questions/10608214/hide-scrolling-content-under-transparent-header)等。但它们处理的背景也可以固定。我的必须是可滚动的。

`.scrollTop()`我设法通过将相同的背景图像添加到标题图像 div 的包装器 div 并在窗口滚动事件上使用 jQuery 滚动它来获得我需要的东西。

参考：[**jsbin 示例**](http://jsbin.com/uwubug)
参考：[**jsFiddle 示例**](http://jsfiddle.net/Vjpvd/)

这种方法的问题是在所有**未**命名为 Firefox 的浏览器中同步非常糟糕（有些滞后、撕裂）。

**澄清：**内容的高度将是动态的。`10000px`我只是选择了这个例子。不过，我希望它经常达到这个目标，有时甚至更多（AJAX 提要），并且在某些页面上它可能接近`0`. 这也是我同步的原因`.height()`。请记住，底部的**页脚 div**位于**内容 div*****下方***。

 **而且我认为***必须有更好的方法***。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:05:02.453

难道您不能只使用定位[滚动窗格](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)或[滚动区域](https://github.com/rochal/jQuery-slimScroll)来滚动动态内容，只需将其定位在固定标题下方吗？**

# java - 如何获取有关来电的更多信息

> ID：11287576
> 
> 赞同：1
> 
> 时间：2012-07-02T03:47:10.850
> 
> 标签：java, android, mobile, phone-call, incoming-call

我已经设置了我的虚拟电话号码，以便在我的手机上转接电话。当呼叫被转接时，我收到了来电号码，但没有收到他们拨给我们的号码。

是否有可能获得他们拨给我们的号码？

```
public class MyPhoneStateListener extends PhoneStateListener {
  private String[] projection = new String[] {
    People._ID, People.NAME, People.NUMBER
  };
  public void onCallStateChanged(int state,String incomingNumber){
    switch(state)
    {
      case TelephonyManager.CALL_STATE_IDLE:
        Log.d("DEBUG", "IDLE");
      break;
      case TelephonyManager.CALL_STATE_OFFHOOK:
        if(!incomingNumber.equals("")){
          handleCall(incomingCall);
        }
      break;
      case TelephonyManager.CALL_STATE_RINGING:
        Log.d("DEBUG", "RINGING");
      break;
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T08:48:07.137

据我所知，只能得到传入的号码。

# javascript - 简单的 Facebook Javascript 帖子流示例？

> ID：11287577
> 
> 赞同：-2
> 
> 时间：2012-07-02T03:47:12.780
> 
> 标签：javascript, facebook

我正在尝试在没有用户提示的情况下发布到用户流。我无法找到有效的代码。Facebook JSDK 已经加载，我将在其中插入代码：

```
FB.getLoginStatus(function(response){ 
```

确保用户已经登录到我的应用程序。您能否提供一个使用`publish_stream`权限发布到用户流的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T05:47:44.483

**带对话框**

您需要使用 Feed 对话框，其中`FB.ui()`：

```
function postToFeed() {
    // calling the API ...
    var obj = {
        method: 'feed',
        link: 'https://developers.facebook.com/docs/reference/dialogs/',
        picture: 'http://fbrell.com/f8.jpg',
        name: 'Facebook Dialogs',
        caption: 'Reference Documentation',
        description: 'Using Dialogs to interact with users.'
    };

    function callback(response) {
        document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
} 
```

文档：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

**没有对话**

要在没有对话框的情况下发布帖子，您需要使用`FB.api()`：

```
var body = 'Reading JS SDK documentation';
FB.api('/me/feed', 'post', { message: body }, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```

文档：[https ://developers.facebook.com/docs/reference/javascript/FB.api/](https://developers.facebook.com/docs/reference/javascript/FB.api/)

**直接网址**

```
https://www.facebook.com/dialog/feed?
  app_id=APP_ID&
  link=https://YOUR_DOMAIN&
  picture=http://YOUR_DOMAIN/image.jpg&
  name=Facebook%20Dialogs&
  caption=API%20Dialogs&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=http://YOUR_DOMAIN/response 
```

文档：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# css - How to have two background images. One a top banner and the second a textured background?

> ID：11287580
> 
> 赞同：4
> 
> 时间：2012-07-02T03:47:23.203
> 
> 标签：css, image, background, banner

I'm starting to work on a website. I would like to have two background images. One would be a banner image at the top similar to the gray strip across the top of stack overflow's website. Then the other image is a image that I would have to create a textured background. This would be like the white space on this website but instead of a color it would be a repeatable image. Websites with the look i'm going for are pinterest.com, subtlepatterns.com, Facebook.com, etc...

I have tried many different things. I tried putting a background in the html tag in the css. That didn't work. I also tried putting two different background images in the body tag. That didn't work because it would just show the first one. I also tried creating the background in it's own class. But when I did that it wouldn't show up at all. Maybe I left something out of the html?

Currently I have Following code:

```
body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, code, form, fieldset, legend, input, textarea, p, blockquote, th, td {
margin: 0;
padding: 0;
background-image:url(../images/absurdidad.png);
background-repeat:repeat;
} 
```

This has created the main background image that takes up the whole screen like I want it to. Know if I could add the second one just at the top to only repeat horizontally then it'll be great!

Thanks in advance for the help.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T04:34:58.990

使用逗号，您可以在同一元素中有多个背景：

```
background-image: url('first'), url('second'); 
```

相同的规则适用于其他样式：

```
background-position: top, bottom; 
```

等等。

更多信息@ [css3.info](http://www.css3.info/preview/multiple-backgrounds/)

如果您想要广泛的浏览器支持，则使用多个 DIV 是唯一的方法：

```
<div class="one">
  <div class="two">
  </div>
</div> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T04:17:58.827

我知道的唯一方法是让多个包装标签与背景相关联。例如：

```
<div style="background-image:url(../images/image1.png);">
    <div style="background-image:url(../images/image2.png);">
        <!-- div content -->
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T04:43:56.347

Here's a jsFiddle I just made: [**jsFiddle Banner and Repeatable Background**](http://jsfiddle.net/9UNcq/)

CSS:

```
body{
    background-image:url("http://silviahartmann.com/background-tile-art/images/grunge-background-seamless-repeating.jpg");
    background-repeat: repeat;
    color: white;
}

#headerBackground{
   position: fixed;
   width: 100%;
   height: 50px;
   background-color: gray;
}

#headerContent {
    background-image: url(http://lorempixel.com/700/50/city/5);
    background-position: center center;
    background-repeat: no-repeat;
    width: 100%;
    height: 100%;
    text-align: center;
} 
```

HTML:

```
<div id="headerBackground">
    <div id="headerContent">Other Header Content</div>
</div> 
```

**Update:** Revised jsFiddle with Hotlinkable repeatable background image.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T04:23:58.893

您可以调整大小和位置。这里 image2 将重复。

```
background:url(image1.jpg),url(image2.jpg);
background-size:80px 60px;
-moz-background-size:80px 60px; /* Firefox 3.6 */
background-repeat:no-repeat,repeat;
background-position:top left,center center; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T04:16:44.257

这将帮助您[我可以使用 CSS 拥有多个背景图像吗？](https://stackoverflow.com/questions/423172/can-i-have-multiple-background-images-using-css)

您可以使用 CSS3 来提供多个背景或一些标签技巧以使其工作。

# r - 控制ggplot2中水平线的颜色

> ID：11287581
> 
> 赞同：12
> 
> 时间：2012-07-02T03:47:45.387
> 
> 标签：r, ggplot2

任何人都可以告诉我这个脚本出了什么问题？我需要两条水平的黑色虚线，但我得到了两条连续的红色。尽管使用了theme_bw，但我也无法将绘图边距的颜色更改为黑色，而且箱线图的填充也不是灰色的，根据需要。

```
 dat1 <- data.frame (xvar = rep(c("A", "B"), each=10),

                yvar = 1:20 + rnorm(20,sd=3))

  ggplot(dat1, aes(x=xvar, y=yvar)) +
  theme_bw()+
  geom_boxplot(fill=grey)+
  geom_hline(aes(yintercept=40, color="black", linetype="dashed"))+
  geom_hline(aes(yintercept=33.84, color="black", linetype="dashed"))+  
  scale_x_discrete(name="") +
  scale_y_continuous(name="temperature (°C)")+
  opts(
    panel.grid.major = theme_line(size = 0.5, colour = NA),
    panel.background = theme_rect(colour = NA),   
    axis.title.y = theme_text(angle=90,face="bold", colour="black", size=14),
    axis.text.y  = theme_text(face="bold",angle=0, size=14,colour="black"),
    axis.title.x = theme_text(face="bold", colour="black", size=14),
    axis.text.x  = theme_text( size=14,vjust=1.2, colour=NA)) 
```

多谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-02T04:19:40.667

关于黑色虚线，您应该在 aes() 之外定义它。试试下面的代码：

```
geom_hline(aes(yintercept=40), color="black", linetype="dashed") 
```

关于箱线图，您应该将代码更正为以下代码：

```
geom_boxplot(fill="gray") 
```

最后，要获得黑色边距，请注意您在 opts(..., panel.background = theme_rect(colour = NA),...) 中将边距设置为 NA 颜色。要解决此问题，请尝试以下操作：

```
panel.background = theme_rect(colour = "black") 
```

希望我的评论有帮助。

# gridview - 具有不同背景颜色的 GridView

> ID：11287582
> 
> 赞同：-1
> 
> 时间：2012-07-02T03:48:02.977
> 
> 标签：gridview, colors, background-color

我有一个包含 12 个元素的 GridView。

```
View v;
v.setBackgroundColor(Color.rgb(0, 107, 179)); 
```

我需要前 6 个元素具有特定颜色，其余 6 个元素具有另一种颜色。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:11:52.000

我自己回答：

```
 if (position < 6)
v.setBackgroundColor(Color.rgb(0, 107, 179));
else
v.setBackgroundColor(Color.rgb(0,91,153)); 
```

# delphi - In Delphi how does the OnIncludeItem event work on TOpenDialog?

> ID：11287583
> 
> 赞同：2
> 
> 时间：2012-07-02T03:48:14.737
> 
> 标签：delphi

I've been playing around with the TOpenDialog in Delphi XE2, and haven't been able to work out how to make the OnIncludeItem event work. I want to be able to show files based on their file name (or file size etc). Has anyone used this event successfully?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T04:09:50.400

**TOpenDialog**是*Windows Common Dialog*组件的封装。OnIncludeItem事件是对**CDN_INCLUDEITEM**通知机制 的**封装。**[此通知的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646862%28v=vs.85%29.aspx)解释说，无论您从**CDN_INCLUDEITEM**通知消息（或 Delphi 中的事件）返回什么，始终包含设置了**SFGAO_FILESYSTEM**和**SFGAO_FILESYSANCESTOR标志的项目。**

 **此外，[这些**SFGAO**属性](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762589%28v=vs.85%29.aspx)的文档进一步向我表明，**CDN_INCLUDEITEM**机制从未打算用于过滤文件系统项，而是用于排除*不*属于文件系统的内容。

这在[另一个稍微不同的问题的答案中](https://stackoverflow.com/a/937484/123487)得到证实。**

# python - Installing lxml in virtualenv for windows

> ID：11287585
> 
> 赞同：6
> 
> 时间：2012-07-02T03:48:21.020
> 
> 标签：python, lxml, virtualenv, pip

I've recently started using virtualenv, and would like to install lxml in this isolated environment.

Normally I would use the windows binary installer, but I want to use lxml in this virtualenv (not globally). Pip install does not work for lxml, so I'm at a loss for what I can do.

I've read that creating symlinks may work, although I unfamiliar with how symlinks work and what files I should be creating them for. Does anyone else know of any methods to install lxml in a virtualenv on Windows?

If creating symlinks is the only method that works I'm definitely willing to learn if someone can point me in the right direction.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-13T14:37:36.023

1.  下载lxml：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)
2.  激活虚拟环境
3.  `easy_install /path/to/the/file/lxml-3.2.1.win32-py3.3.‌exe`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T04:35:41.837

最简单的方法是简单地将库复制到您的 virtualenv 站点包文件夹中。符号链接是使它出现在文件系统上的方法，该文件存在但物理上位于另一个位置。如果您将库复制过来，它将真正被隔离。

因此，进入您的全局站点包文件夹并将 lxml 文件夹和 lxml egg 文件夹复制到您的 virtualenv 站点包中。如果您真的想要符号链接（对于 NTFS），请看[这里](http://en.wikipedia.org/wiki/NTFS_symbolic_link)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T03:12:04.010

只是想补充一点，emeraldo.cs 的答案是正确的，但您还必须复制站点包根目录中存在的 lxml 相关文件。复制完所有文件后，pip 会认为它已安装。

# objective-c - What's the difference between (null) vs ?

> ID：11287590
> 
> 赞同：1
> 
> 时间：2012-07-02T03:49:53.093
> 
> 标签：objective-c, crash, nsstring, null

I was getting random crashes in my app until I narrowed it down to a particular method. In that method I expect an `NSString` as a parameter. This `NSString` can sometimes be nil in which case the method ends and no harm is done.

When I run my method's parameter through `NSLog(@"%@", myString)` I found that I get one of these:

1.  The contents of an actual NSString
2.  (null)
3.  <null>

The first two are expected and handled by my method. The third one, *<null>*, crashes my app with `-[NSNull length]: unrecognized selector sent to instance 0x1b2ace8`.

I have found a way around the problem by checking for `nil` or `isKindOfClass`, but my question is **what is the difference between (null) and <null>?**.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T04:01:39.197

`(null)`是当您使用带值`NSLog()`的格式说明符时打印的字符串。是发送到单例（您可以通过 访问）的结果。`%@``nil``<null>``description``NSNull``[NSNull null]`

`NSNull``NSArray`在 Cocoa 集合 (和)中用作“无对象”占位符，`NSDictionary`因为它们不能包含`nil`.

这两个描述字符串令人困惑地相似，有人可能会争辩说`NSNull`应该针对它提交一个错误以使其更加清晰。

# android - How to install older versions of Android via the SDK Manager?

> ID：11287593
> 
> 赞同：4
> 
> 时间：2012-07-02T03:50:10.807
> 
> 标签：android

I downloaded the Android SDK from [here](http://developer.android.com/sdk/index.html), as suggested by all tutorials.

I downloaded Android v4.0.3 (API 15) via the SDK manager, but it won't allow me to download older SDK/API versions, e.g 2.2?

I found [this Stack question](https://stackoverflow.com/questions/11278534/android-how-to-install-older-api-versions), but when i try and download one of the packages, it just 404s.

I have a single repository setup in the SDK Manager:

[https://dl-ssl.google.com/android/repository/repository.xml](https://dl-ssl.google.com/android/repository/repository.xml)

What am i doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:54:56.873

所以你不能选中其他 api 版本旁边的框？

在 Android SDK Manager 中，您应该可以下载它。对于 2.2 即 api 8，因此您将检查文件夹或仅检查 api 8 的 sdk 平台并安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T03:55:14.060

我的 SDK 管理器显示它正在使用

> [https://dl-ssl.google.com/android/repository/addon.xml](https://dl-ssl.google.com/android/repository/addon.xml)

用于 SDK 的反向版本。确保您拥有最新版本的 Android 工具（截至几天前已达到 20 个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:21:59.353

使用 Eclipse Help->Check for updates 下载最新版本的 SDK manager。更新 sdk 管理器后，它将显示所有较旧的 sdk

# python - How to make Python accessible via CMD prompt without full path?

> ID：11287597
> 
> 赞同：1
> 
> 时间：2012-07-02T03:50:59.490
> 
> 标签：python, windows

I have Python installed on D:\python27\. Now I want to kno how to make it so that I don't have to type

```
D:\python27\python.exe myscript.py 
```

but instead, just use

```
python myscript.py 
```

I know that this should already be configured after the install but somehow, the laptop I'm using didn't register the python shortcut. So how do I set it manually?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T03:58:44.307

win7的开始菜单：

1.  右键单击“计算机”。

2.  选择“属性”

3.  点击“高级系统设置”

4.  点击“环境变量”

5.  在“系统变量”子部分下选择变量`Path`并单击“编辑”。

6.  将“;C:\Python27”追加到现有路径，点击ok，ok。

7.  重新启动您打开的任何控制台以使新路径设置生效，并尝试键入“python”以启动 python 会话，它应该会为您启动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T03:55:29.240

在命令行上：

```
set PATH=%PATH%;d:\python27 
```

要在重启后保持不变，请通过 system->properties 更新您的环境变量。

# google-chrome - How to detect if chrome is prompting the user for giving permissions to a quicktime plugin

> ID：11287599
> 
> 赞同：2
> 
> 时间：2012-07-02T03:51:36.197
> 
> 标签：google-chrome, audio, quicktime

As of a while ago, Chrome prompts the user to allow quicktime on a per-site basis. Since the app that I'm working on depends on quicktime, and I've seen a usage pattern in my users in that they often don't notice the browser prompting them to allow quicktime permissions to run on the site.

I would like to detect when Chrome/Any other browser is prompting the user for Quicktime permissions and display a more prominent message directing them to take action. Is there any way to do that?

# database - How to hide stored procedures and triggers code from users other than SYSDBA in Interbase?

> ID：11287600
> 
> 赞同：0
> 
> 时间：2012-07-02T03:51:36.820
> 
> 标签：database, metadata, interbase, interbase-2009

I found some information about the encryption and embedded password features in Interbase 2009, but it does not prevent database users to see the source code. Is it possible to hide the stored procedures and triggers codes from all user including SYSDBA too? If not at least I can hide it from some users.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:44:07.523

想出了如何做到这一点：

```
update rdb$Triggers set rdb$Trigger_source = ""
where
    rdb$system_flag = 0
    and rdb$trigger_name not like "CHECK%";

update rdb$procedures set rdb$procedure_source=""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:49:13.357

最后我听说它无法隐藏。但是，可以从系统表中删除过程的源代码。我忘记了这样做的细节，但这是长期以来一直有效的方法。

# android - How can I separate this code for greater clarity?

> ID：11287602
> 
> 赞同：0
> 
> 时间：2012-07-02T03:51:44.903
> 
> 标签：android

I made a Memory Game for Android.

**My problem is that all the code is in one class. So I need to separate the code with a new class to help make it more clear.**

This is the code:

```
public class NivelA extends Activity implements OnClickListener{

private int [] fichasIds = {
        R.drawable.img_1,
        R.drawable.img_2,
        R.drawable.img_3,
        R.drawable.img_4,
        R.drawable.img_5,
        R.drawable.img_6,
        R.drawable.imgOculto,   
};

protected int[] fichas;

private ImageView[] imageviews;

private static final int cantFichas = 6;

private int fichasUp;

private int currentIndex = -1;

private int lastIndex = -1;

private int fichasIguales = 0;

private int vidas = 3;
private TextView vidas_txt;

Handler handler;

private int [] imgIds = {
        R.id.img_1,
        R.id.img_2,
        R.id.img_3,
        R.id.img_4,
        R.id.img_5,
        R.id.img_6,
        R.id.img_7,
        R.id.img_8,
        R.id.img_9,
        R.id.img_10,
        R.id.img_11,
        R.id.img_12,
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nivel1);

    //Toast
    Toast toast = Toast.makeText(NivelA.this, "Nivel: 1", Toast.LENGTH_SHORT);
    toast.setGravity(Gravity.CENTER|Gravity.CENTER, 0, 65);
    toast.show();

    handler = new Handler ();

    fichasIguales = 0;

    vidas_txt = (TextView) findViewById(R.id.vidas_iguales);

    fichas = new int [12];

    for (int i=0; i<12; i++)
    {
        fichas[i] = -1;
    }

    imageviews = new ImageView [imgIds.length];
    for (int i=0; i<imgIds.length; i++)
    {

        imageviews[i] = (ImageView) findViewById(imgIds[i]);
    }

    Random random = new Random ();

    for (int i=0; i<6; i++){
        for (int z=0; z<2; z++)
        {
            int fichasRandom = random.nextInt(12);
            while (fichas[fichasRandom]!= -1)
            {
                fichasRandom = random.nextInt(12);
            }
            fichas[fichasRandom]= i;
        }
    }

    //Los listener
    for (int i=0; i<12; i++)
    {
        ((ImageView)findViewById(imgIds[i])).setOnClickListener(this);
    }

    for (int i=0; i<12; i++)
    {
        ((ImageView)findViewById(imgIds[i])).setImageResource(R.drawable.imgOculto);
    }
}
@Override
public void onClick(View v) {
    int index = Integer.parseInt((String)v.getTag());

    for (int i=0; i<12; i++)
    {
        if (v.getId() == imgIds [i])
        {
            index = i;
            ((ImageView)findViewById(imgIds[i])).setImageResource(fichasIds[fichas[i]]);

            imageviews[i].setFocusable(false);
            imageviews[i].setClickable(false);
            break;
        }
    }
    fichasUp++;

    if (fichasUp == 2)
    {
        vidas--;
        vidas_txt.setText(String.valueOf(vidas));

        currentIndex = index;

        for (ImageView view:imageviews)
        {
            view.setFocusable(false);
            view.setClickable(false);
        }

        fichasUp = 0;
        handler.postDelayed(fichasOcultas, 1000);

    }
    else{
        lastIndex = index;
    }

}

Runnable fichasOcultas = new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub

        if (fichas[currentIndex]== fichas[lastIndex])
        {
            ((ImageView)findViewById(imgIds[lastIndex])).setVisibility(View.INVISIBLE);
            ((ImageView)findViewById(imgIds[currentIndex])).setVisibility(View.INVISIBLE);

            fichasIguales ++;

            //Toast [ Hay Coincidencia ]
            Toast toast = Toast.makeText(NivelA.this, "Hay Coincidencia!", Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER|Gravity.CENTER, 14, 0);
            toast.show();

            if (fichasIguales == cantFichas)
            {
                win ();
            }
        }else
        {
            ((ImageView)findViewById(imgIds[currentIndex])).setImageResource(R.drawable.imgOculto);
            ((ImageView)findViewById(imgIds[lastIndex])).setImageResource(R.drawable.imgOculto);
        }

        for (ImageView view:imageviews)
        {
            view.setFocusable(true);
            view.setClickable(true);
        }
    }

};
protected void win() {
    Toast toast = Toast.makeText(NivelA.this, "Ganaste!!", Toast.LENGTH_SHORT);
    toast.show();

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T03:59:06.490

我建议您将所有游戏逻辑移出`NivelA`课堂。这应该对简化您的代码大有帮助。一般来说，每个`Activity`子类都应该负责创建屏幕，也许是响应事件，而不是其他。

此外，您可能希望使用视图可以具有的属性，而不是制作`NivelA`implement 。如果您为视图分配属性`OnClickListener``android:onClick`

```
android:onClick="aClickMethod" 
```

那么你只需要实现一个公共方法：

```
public void aClickMethod(View view) { . . . } 
```

（方法的名称完全由您决定。）`android:onClick`自动分配方法使视图可点击。你会惊讶于这个技巧会消除多少代码。

# c++ - Determine limit for data sent to VBO?

> ID：11287604
> 
> 赞同：2
> 
> 时间：2012-07-02T03:51:49.163
> 
> 标签：c++, opengl-es, powervr-sgx

I'm writing a 3d application for the Playbook, which has a PowerVR SGX 540\. I noticed that if I stuff enough data in the VBO through opengl, I can cause the device to crash (not just the application, but the entire device, requiring a hard reboot). To cause the crash, I sent data for a model with ~300k triangles and ~150k vertices. I sent normal data for the vertices as well.

I found that the problem doesn't occur if I send less data (tried another model with half the triangles and vertices). Also, the issue doesn't occur if I use vertex arrays (though it's incredibly slow).

I'd like to know:

*   Is what I'm seeing a common result for mobile hardware? That is, is a 300k tri model with 150k vertices and normals overkill?

*   Can I check how much memory I have available for VBO usage outside of testing a bunch of different model sizes (it takes a good five minutes to recover the device from a crash)?

*   Could anything else be causing this issue? I've provided some additional information:

I'm using Qt for my GUI, and drawing the 3d scene to an FBO before it's painted to the GUI (I haven't checked if redoing all this without a UI by creating an EGL window and drawing to that recreates the problem yet -- that'll take awhile).

To verify it wasn't me using OpenGL poorly, I tried both using raw OpenGL calls for all the 3d stuff, and also doing everything with OpenSceneGraph. Both methods fail in the exact same way (VBO works with less data, vertex arrays work, increased VBO data causes a crash).

The program works fine on my desktop. Unfortunately, I don't have any other mobile devices I can test my application out on.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:22:55.387

OpenGL ES 仅支持 unsigned short（16 位）作为索引的数据类型，因此如果您使用索引数组，则超出了该限制。

# python - Python：将表单数据发送到一个电子邮件地址

> ID：11287606
> 
> 赞同：2
> 
> 时间：2012-07-02T03:52:39.870
> 
> 标签：python, google-app-engine, email

我使用 Python 在 Google App Engine 中编写了一个表单，用户可以输入数据来形成表单。输入后，我希望将此数据发送到一个人的电子邮件。例如：example@gmail.com。

我的问题是：在 Python 中，它是否具有简单的功能（我可以在 Google App Engine 上使用此功能）来发送电子邮件？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T03:57:14.730

Python 确实有一个用于传输电子邮件的邮件包。

下面是[Python 文档中的一个示例](http://docs.python.org/library/email-examples.html)

```
# Import smtplib for the actual sending function
import smtplib

# Import the email modules we'll need
from email.mime.text import MIMEText

# Open a plain text file for reading.  For this example, assume that
# the text file contains only ASCII characters.
fp = open(textfile, 'rb')
# Create a text/plain message
msg = MIMEText(fp.read())
fp.close()

# me == the sender's email address
# you == the recipient's email address
msg['Subject'] = 'The contents of %s' % textfile
msg['From'] = me
msg['To'] = you

# Send the message via our own SMTP server, but don't include the
# envelope header.
s = smtplib.SMTP('localhost')
s.sendmail(me, [you], msg.as_string())
s.quit() 
```

此外，应用引擎还有一个[邮件 API](https://developers.google.com/appengine/docs/python/mail/)。

```
from google.appengine.api import mail

mail.send_mail(sender="Example.com Support <support@example.com>",
              to="Albert Johnson <Albert.Johnson@example.com>",
              subject="Your account has been approved",
              body="""
Dear Albert:

Your example.com account has been approved.  You can now visit
http://www.example.com/ and sign in using your Google Account to
access new features.

Please let us know if you have any questions.

The example.com Team
""") 
```

# android - Data on a Extended Application class lost when app is closed

> ID：11287607
> 
> 赞同：0
> 
> 时间：2012-07-02T03:52:40.937
> 
> 标签：android, static, ondestroy

I´ve an Android Application that holds some static objects on an class that extends Application class, using the same approach as exemplified [here](https://stackoverflow.com/questions/7008253/android-application-class-globals-instance-or-static).

The objects that is hold by this class is shared and manipulated between all activities on my app.

Everything works well, but, some time ago, I noticed that when the application runs on backgroud for some time, when it´s restored, the data that was stored on the extended class has gone, and the app starts to throws a lot of NullReference exceptions.

I think that this happens because of the application was being temporary destroyed by the OS, to be recreated when we need to use it again.

So, how could I handle this scenario? Is there any way to discover that the application is being temporary destroyed, without subscribing to the onDestroy event of an Activity? On a test that I did, the onDestroy event was not called when I asked the background process of my app to being stopped.

Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:57:31.533

无法确定进程何时会被终止，因此您始终应该将重要数据存储在某个地方（例如 sd 卡）并在 App 类的 onCreate() 方法中恢复它。

还要看看 onLowMemory() 和 onTrimMemory()，释放内存中所有不必要的数据以帮助操作系统防止破坏您的应用程序，导致确定您的应用程序的原因之一是内存不足。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:00:53.077

不，没有办法知道何时需要持久化存储在静态变量中的数据。至少据我所知，系统不会通知您有关此问题的回调。

所以你应该只使用静态变量来存储临时数据，或者缓存从永久源访问的数据。我在许多项目中都遇到过这个问题，而且我总是最终使用意图/共享首选项/sqlite 等来可靠地跨活动存储数据。

# html - 如何使绝对定位的元素仅使用必要的宽度？

> ID：11287616
> 
> 赞同：0
> 
> 时间：2012-07-02T03:54:27.903
> 
> 标签：html, css

所以我正在为我正在建立的网站建立一些警报系统。布局非常简单：

```
<style>
     #alert{
         position:absolute;
         padding:10px;
         display:table;
         margin:0 auto;
     }
</style>
<div id="alert">
    Hey user, I have a very important message for you.
</alert> 
```

现在，如果一个元素不是绝对定位的，我通常会使用`display:table`它来确保它只占用必要的宽度，但绝对定位它会破坏它。

有没有办法让元素只占用必要的宽度，但仍然绝对定位？

**编辑**：
基本上我正在寻找的是一个绝对定位的元素，它具有动态宽度，并且居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:27:22.193

这似乎起到了作用：

```
<style>
    #alert {
         position:absolute;
         width:100%; /* Keep in mind this is for an entire page */
         height: 16px; /* Match the font-size of the alert */
         text-align:center;
         cursor:pointer;
    }
    #alert #inner_alert {
         display:inline-block;
         padding:10px;
    }
</style>
<div id="alert">
    <div id="inner_alert">Here is the message!</div>
</div> 
```

这将产生一个居中的元素，该元素的宽度将仅与需要的宽度一样大，并且绝对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T03:57:11.613

嘿，现在您可以像这样使用`left`或属性`right`

```
#alert{
    position:absolute;
    padding:10px;
    left:0;
    right:0;
    top:0;
    bottom:0;
} 
```

嘿，现在您可以`left right top bottom`根据您的布局定义您的价值

如果你定义`position absolute`而不是定义你的 div`width or height`

现在你可以使用这个现场演示[http://jsfiddle.net/YvMAJ/](http://jsfiddle.net/YvMAJ/)

# scala - 如何使用 sbt 拉取依赖关系

> ID：11287617
> 
> 赞同：2
> 
> 时间：2012-07-02T03:54:42.827
> 
> 标签：scala, sbt

免责声明：我是 scala 初学者。所有默认设置对我来说都很好，但是每当我想要自定义布局/构建时，我都会遇到问题。

因此，作为我构建的一部分，我需要将项目 A 中的 .war（web 应用程序）和项目 B 中的 .jar（jetty 启动器）拉到项目 C（tanuki 服务包装器）的某个目录中。

任何人都可以提供一个示例如何以最有效的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:49:12.717

不确定它是否适用于战争文件，但为了使 jar 在本地可用，您可以使用 sbt 的`publish-local`命令。假设你有一个 sbt 项目“mylibrary”和另一个 sbt 项目“mymain”。如果您在本地发布“mylibrary.jar”，您可以将其作为依赖项添加到“mymain”，就像添加任何其他 sbt 管理的依赖项一样，即通过添加如下行

```
libraryDependencies += "foo.bar.com" %% "mylibrary" %  "0.1-SNAPSHOT" 
```

到`build.sbt`“mymain”。

如果这不可能，您可能需要编写一个 sbt 插件/命令，将文件复制到给定目录中。我没有扩展 sbt 的经验，所以我对此无能为力，但其他 stackoverflowers 肯定可以:-)

**编辑**：（[^(解决OP的评论）)]

不，我没有特定的 Sbt 教程。如果我需要帮助，我会求助于通常的嫌疑人，[wiki](https://github.com/harrah/xsbt/wiki)、[邮件列表](https://groups.google.com/forum/?fromgroups#!forum/simple-build-tool)、[Stackoverflow](https://stackoverflow.com/questions/tagged/sbt)、[Sbt 的源代码](https://github.com/harrah/xsbt)。Sbt 有一个[IO 包](http://harrah.github.com/xsbt/latest/api/sbt/IO$.html)，它提供了一个 copyFile 方法，根据这个[线程](http://tinyurl.com/7sx8kr4)，它派上用场了。在邮件列表中搜索[“复制文件”](https://groups.google.com/forum/?fromgroups#!searchin/simple-build-tool/copying$20files)也会产生其他可能对您有所帮助的结果。

# c# - 如何在 MVC 3 C# 中读取 word 文件

> ID：11287623
> 
> 赞同：-1
> 
> 时间：2012-07-02T03:56:55.810
> 
> 标签：c#, asp.net, asp.net-mvc-3, docx

我有一个使用 asp.net mvc 3 C# 的项目。现在我想要一个可以读取word文件的视图。我希望它看起来像 SkyDrive，只需选择 word 文件 (.docx)，然后它将在我的视图中显示该文件。我不知道如何开始，你能解释一下如何实现吗？

多谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T04:13:41.683

使用[Open Xml SDK](http://www.microsoft.com/en-us/download/details.aspx?id=5124)。它是免费的，您不需要任何 Office 库，并且网络上有很多资源。例如，[这个。](http://openxmldeveloper.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:22:53.607

如果您只想显示文档的图像，则可以将 .docx 文件作为 zip 打开并提取 docProps\thumbnail.wmf 文件。

# google-apps-script - 从表单提交添加编辑器到文档

> ID：11287629
> 
> 赞同：1
> 
> 时间：2012-07-02T03:57:15.113
> 
> 标签：google-apps-script, google-docs

我正在创建将执行下述操作的脚本。到目前为止，我已经设法让前两个部分发挥作用，但现在我坚持让更多的工作。我已经查看了几个响应论坛并尝试了这些建议，但没有成功。

所需的脚本流程：从电子表格表单提交的表单完成字段：时间戳用户名（提交时收集的电子邮件）学生成绩干预计划核心阅读/数学团队（电子邮件列表）

1个脚本运行onFormSubmit，然后创建模板文档的副本，将新副本重命名为e.value“学生”以表单提交，

2 然后用表单中提交的值替换文档中选定的文本字符串。

3 将编辑器添加到新文档并发送带有所需说明的通知

4 创建活动（自提交日期起一周）活动详细信息包括说明和共享文档的链接，供团队成员完成输入，将活动邀请发送到电子邮件列表。

这是到目前为止的工作脚本。

```
function formSubmitValues(e) {

  var timeStamp = e.values[0];
  var userEmail = e.values[1];
  var student = e.values[2];
  var grade = e.values[3];
  var conern = e.values[4];
  var readingCore = e.values[5];
  var mathCore = e.values[6];
  var interventions = e.values[7];
  var team = e.values[8].toString(); // "just to be sure"..Henrique says add .toString      this allowed the replaceText part to work

  //Makes copy of template document and renames
  var tempID = ("1Rq0pDAnuGNfL6W3GB0ZuLeWM2uYzHpKzoyxoXlwjtgE") // use document ID from Template Document
  var copyId = DocsList
              .getFileById(tempID)
              .makeCopy(student + " Initial Referral") // names new copy as student's name
              .getId();

// trying to add editors to new document using email list generated in form submit value of "team"
DocsList.getFileById(copyId).addEditors([team]); 

// replaces text within template with selected fields from formSubmitValues
  var doc = DocumentApp.openById(copyId)  
  var body = doc.getActiveSection();

    body.replaceText("%STUDENT%", student);
    body.replaceText("%DATE%", timeStamp);
    body.replaceText("%TEACHER%", userEmail);
    body.replaceText("%TEAM%", team);

  return doc;

} 
```

**报告的问题响应：**这是他们所说的：“该函数需要一个数组或字符串，例如：`DocsList.getFileById(copyId).addEditors(['parent@domain.com', 'parent2@domain.com']);`

我尝试将电子邮件直接输入到这样的脚本中，并且一切正常。所以我的问题不是 '`addEditors`方法，而是在于让表单提交的电子邮件正确传递。关于我将如何做到这一点的任何建议？

我已经尝试过我认为是使用 .toString() 或不使用 .Split(',') 的所有组合。

**重新定义问题：**所以这是一个如何从 e.values 表单提交中传递电子邮件的问题。

这是我所在的位置：当我直接在脚本中输入电子邮件时：`.addEditors(['parent@domain.com', 'email2@domain.net', 'email3@gmail.com'])`它可以工作，（我确实必须将`addEditors`脚本中的方法移到后面`.makeCopy`而不是结尾。）这就是执行记录显示的内容： `File.addEditors([[parent@domain.com, email2@domain.net]])`它运行脚本的其余部分。注意：我不明白的一部分是单引号，即“电子邮件”它们必须在脚本中输入，但运行时不会显示在 Transcript 上。我尝试将它们放在表单中的电子邮件周围，但它使它们显示在 Transcript 中并且仍然无法运行。

所以这就是脚本现在的样子：

```
var tempID = ("1Rq0pDAnuGNfL6W3GB0ZuLeWM2uYzHpKzoyxoXlwjtgE") // use document ID from Template Document
var copyId = DocsList
              .getFileById(tempID)
              .makeCopy(student + " - TestingCopy") // names new copy as student's name + text
              .addEditors([team.split(',')])  
              .getId(); 
```

但是当我使用`var team`有或没有`.split(',')`它时，它不起作用。但是在 Transcript 中它显示： `File.addEditors([[rreynolds@domain.net, parent@domain.com]])` 这看起来与它何时工作时显示的相同，但这是 Transcript 中显示的最后一件事，并且编辑器没有添加到文档中，并且脚本没有完成。

我显然不明白这里的东西。有没有办法让团队 e.values 中的电子邮件以 addEditors 方法所需的方式处理？在电子表格单元格中，它们显示为 CSV。即 rreynolds@domain.net、parent@domain.com 是否必须一次阅读一个或其他内容？

我学到了很多东西，感谢您的帮助。对于所有评论的混淆，我深表歉意，但我不确定在这个论坛中解决问题的正确方法。例如：我应该返回并编辑我的原始脚本以显示当前版本，还是将其添加到其他地方？我正在努力保持对话顺畅，以便其他人更容易理解 - 谢谢 rob

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:42:51.150

我建议几件事

1.  在代码中添加一些 Logger.log 语句以打印出调试信息。
2.  在整个代码段周围添加一个 try ... catch 块并打印出异常。看看你是否有任何异常。

最后，使用执行脚本窗口查看脚本停止的位置（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:34:28.260

通过电子邮件添加编辑器有两种方法：`addEditors([emailAddresses])`和`addEditor(emailAddress)`

第一个有一个“s”并且需要一个电子邮件地址字符串数组，第二个将单个字符串作为参数。您应该使用第二个或将 [括号] 添加到代码中的电子邮件字符串。

关于你的评论*//需要弄清楚在哪里/如何：.addEditors(email1,email2,etc); // 这是从 DocsList 还是 DocumentApp 类完成的？*

`addEditor()`并且`addEditors()`属于[文件类](https://developers.google.com/apps-script/class_file?hl=fr-FR)，是 DocsList 类的成员，您可以按照文档中的说明使用**用户对象**或**用户电子邮件添加用户。**可以这样使用`DocFile.addEditors([email1,email2])`

**编辑：**这篇文章有很多评论，对此感到抱歉，它变得非常难以阅读......我用电子表格测试了这些 addEditors 功能，它按预期工作，对多个用户电子邮件使用简单的数组，对单个电子邮件使用字符串。该方法`document service`似乎有问题，`addEditor()`应将其报告给问题跟踪器。

**已报告我已报告[问题 #1512](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1512) - **Rocketrob****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:16:58.460

请让我给出最后一个（希望是）明确的答案：（感谢分享电子表格，这更容易处理;-)

这是您的代码完全正常工作。

我创建了一些中间变量来展示它是如何工作的。

```
 function formSubmitEditors(e) {

      // defines spreadsheet form events on submit of form.  This function formSubmitEditors is triggered on formSubmit
      var timeStamp = e.values[0];
      var fileName = e.values[1];
      var team = e.values[2].replace(/, /g,"|"); // remove unwanted spaces and commas replace by | for visibility ;-)
      Logger.log(team);// contains | as separators
      var teamArray = team.split('|');
      Logger.log(teamArray.length+'  :  '+teamArray);// check that it is an array of x elements

      //Makes copy of template document and renames
      var tempID = '1Rq0pDAnuGNfL6W3GB0ZuLeWM2uYzHpKzoyxoXlwjtgE' // use document ID from Template Document
      var copyId = DocsList
                  .getFileById(tempID)
                  .makeCopy(fileName + " - TestingCopy") // names new copy as student's name + text
                  .getId();                     // 
    var file = DocsList.getFileById(copyId).addEditors(teamArray);

    // replaces merged-text values within template with selected fields from formSubmitValues
      var doc = DocumentApp.openById(copyId)
      var body = doc.getActiveSection();

        body.replaceText("%FILE%", fileName);// you wrote %FILENAME% in place of %FILE%
        body.replaceText("%DATE%", timeStamp);
        body.replaceText("%TEAM%", team);// it will be shown with | as separators, if you don't like it replace team by teamArray.toString() to get commas again.
     } 
```

编辑：我删除了团队活动的 toString() ，因为 e.parameters 已经是字符串，所以没有必要。

EDIT2：要完整并在最初的问题中完成您需要做的事情，您可以将代码的末尾替换为在下周创建 Cal 事件并发送带有文档链接的邀请的代码。

```
 var file = DocsList.getFileById(copyId).addEditors(editorsArray);
  var fileurl = file.getUrl();
  Logger.log(fileurl)

// replaces merged-text values within template with selected fields from formSubmitValues
  var doc = DocumentApp.openById(copyId)
  var body = doc.getActiveSection();

    body.replaceText("%FILE%", fileName);
    body.replaceText("%DATE%", timeStamp);
    body.replaceText("%MAILS%", editors);

  var Cal = CalendarApp.getCalendarsByName('testencodage')[0];// replace with your calendar name you want to use
  var newEvent = Cal.createAllDayEvent('Fill the questionnary', new Date(new Date(newtimeStamp).getTime()+7*24*3600*1000), { guests : e.values[2] , sendInvites : true , description :"Don't forget to fill this document "+fileurl})
 } 
```**

# c# - 从 web api JSON C# 中删除斜线

> ID：11287631
> 
> 赞同：5
> 
> 时间：2012-07-02T03:57:18.020
> 
> 标签：c#, json, asp.net-web-api, getjson

我有一个 WEB API C#，里面有一个链接的 Data，例如：`images/Chinese/AbaloneEggCustard.jpg`

但在 JSON 中，它看起来像这样：

```
[{"BackgroundImage":"images\/Chinese\/AbaloneEggCustard.jpg", ......}] 
```

我可以知道如何删除斜线吗？需要将其删除，因此希望我可以在与 azure 链接时访问这些图像。

* * *

这是我的控制器代码：

```
public IEnumerable<Food> Get()
    {
        List<Food> Cases = new List<Food>();
        try
        {
            string connectionString = ConfigurationManager.ConnectionStrings["HealthyFoodDBConnectionString"].ConnectionString;
            myConnection = new SqlConnection(connectionString);
            myConnection.Open();

            string sql = "SELECT * from [Recipe] ";

            myCommand = new SqlCommand(sql, myConnection);
            myDataReader = myCommand.ExecuteReader();

            while (myDataReader.Read())
            {
                Cases.Add(new Food()
                {
                    RecipeID = (int)myDataReader["RecipeID"],
                    RecipeTitle = (string)myDataReader["RecipeTitle"],
                    FoodCategoryID = Convert.ToInt32(myDataReader["FoodCategoryId"]),
                    Serves = (string)myDataReader["Serves"],
                    PerServing = (string)myDataReader["PerServing"],
                    Favourite = ((Convert.ToInt32(myDataReader["Favourite"]) == 1) ? true : false),
                    Directions = (string)myDataReader["Directions"],
                    BackgroundImage = (string)myDataReader["BackgroundImage"],
                    HealthyTips = (string)myDataReader["HealthyTips"],
                    Nutritions = (string)myDataReader["Nutritions"],
                    Ingredients = (string)myDataReader["Ingredients"]
                });
            }
        }
        finally
        {
            if (myConnection != null)
                myConnection.Close();
        }
        return Cases;
    } 
```

这是我的 Index.cshtml 代码：

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        // Send an AJAX request
        $.getJSON("api/food/",
        function (data) {
            // on success, 'data' contains a list of products
            $.each(data, function (key, val){

                //format the text to display
                var str = val.RecipeTitle + ' | ' + val.FoodCategoryID + ' | ' + val.Serves + ' | ' + val.PerServing + ' | ' + val.Favourites + ' | ' + val.Directions + ' | ' + val.BackgroundImage + ' | ' + val.HealthyTips + ' | ' + val.Nutritions + ' | ' + val.Ingredients;

                // add a list item for the product
                $('<li/>', { html: str }).appendTo($('#cases'));

            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:07:18.763

假设您正在调用 API，并取回通常转义的 JSON 对象：

```
var myObject = Foo.API.Call(); //returns object with BackgroundImage property. 
```

如果要将结果保存到文本文件，可以使用`JavaScriptSerializer`：

```
var bg = new JavaScriptSerializer().Deserialize(myObject);
using (var writer = new StreamWriter(@"C:\foo.txt"))
{
    writer.Write(bg.BackgroundImage);
} 
```

保存的文本文件应该是未转义的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T19:43:33.287

You can use this:

```
string deserializedString = Newtonsoft.Json.JsonConvert.DeserializeObject<string>(serializedString); 
```

# php - 如果我添加 .com.sg 而不是 .com，PHP 邮件功能用户将无法接收邮件

> ID：11287637
> 
> 赞同：0
> 
> 时间：2012-07-02T03:59:15.783
> 
> 标签：php, email, verification, email-verification

我想在用户注册帐户后向他们发送激活链接。当我将此[http://www.homeloan.com.sg](http://www.homeloan.com.sg)放入 $message 时，我没有收到电子邮件，但是当我删除 .sg 并将[http://www.homeloan.com](http://www.homeloan.com)放入时，它可以工作。没有错误信息，所以我真的不知道我的错误是什么。请帮忙

**这是我的代码：**

```
$id = mysql_insert_id();
$to = 'myemail@gmail.com';
$subject = "E-mail Verification";
$message = 'Click on the link to verify your account-> http://www.homeloan.com.sg/rates/activate?id='.$id.'';
$headers = "From: Homeloan Singapore" . "\r\n" . "Reply-To: enquiry@homeloan.com.sg"; 
mail($to,$subject,$message,$headers, '-f enquiry@homeloan.com.sg'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:25:51.960

> 我真的不知道我的错误是什么

没有错误。我试过这段代码：

```
<?php
$id = 1;
$to = 'my_email@gmail.com';
$subject = "E-mail Verification";
$message = 'Click on the link to verify your account-> http://www.homeloan.com.sg/rates/activate?id='.$id;
$headers = "From: Homeloan Singapore" . "\r\n" . "Reply-To: enquiry@homeloan.com.sg";
mail($to,$subject,$message,$headers, '-f enquiry@homeloan.com.sg'); 
```

它到达了邮箱。也许，对于您的帐户，它被放入垃圾邮件文件夹？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T04:16:30.727

确保您的站点是否有要填写的表格，然后通过在相应变量中组装输入标签来正确填写表格。

尝试使用 (.) 或“...”将“电子邮件”连接到变量 ($...)。

# java - 如何从 jsp 中的超链接调用 doPost() servlet

> ID：11287642
> 
> 赞同：3
> 
> 时间：2012-07-02T03:59:42.917
> 
> 标签：java, html, database, jsp, servlets

我怎样才能调用`servlet`from `jsp`？但在这种情况下，我更喜欢使用`doPost()`方法而不是`doGet()`.

这是我的代码：

**视图.jsp**

```
<%@ page contentType="text/html;charset=UTF-8" language="java" import="DSIP.*" import="java.util.ArrayList" %>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>DSIP.View</title>
</head>

<body>
<jsp:useBean id="ipList" scope="application" class="DSIP.IPBeanMapper"/>
<jsp:useBean id="bean" scope="application" class="DSIP.IPBean"/>
<form name="form1" method="post" action="viewS">
    <table width="" border="">
        <tr bgcolor="#0099FF">
            <td width="90"><div align="center">ip</div></td>
            <td width="90"><div align="center">username</div></td>
            <td width="90"><div align="center">password</div></td>
            <td width="90"><div align="center">maxRetry</div></td>
            <td width="90"><div align="center">action</div></td>
        </tr>
        <%
            ArrayList<IPBean> list;
            list = ipList.getIPList();
            for (int i = 0; i < list.size(); i++){
                bean = list.get(i);
        %>
        <tr>
            <td><input name="ip"        type="text" size="15" value="<%=list.get(i).getIp()%>"></td>
            <td><input name="userName"  type="text" size="15" value="<%=bean.getUserName()%>"></td>
            <td><input name="password"  type="text" size="15" value="<%=bean.getPassword()%>"></td>
            <td><input name="maxRetry"  type="text" size="15" value="<%=bean.getMaxRetry()%>"></td>
            <td><a href="/ViewS?action=edit">edit</a> <a href="/ViewS?action=delete">delete</a>

            </td>
        </tr>
        <%
            }
        %>
    </table>
    <input type="submit" name="Submit" value="Submit">

</form>
</body>
</html> 
```

我打算`ViewS`使用链接（编辑 n 删除）从此页面调用一个 servlet 类（称为）。当我单击编辑并将值存储到数据库中时，我想使特定行中的某些文件可编辑。

并且，当我单击删除时，我想删除数据库中的记录以及 jsp 中的记录视图。

所以请有人帮助我。

我试过用`<a href="/ViewS?action=edit">edit</a>`，但我知道这个电话`doGet()`。

非常感谢你帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:01:20.190

您需要在单击链接时调用 javascript 函数，并且您需要从 javascript 提交将生成 HTTP POST 的表单

```
function submitMyForm(){
 document.forms["yourFormId"].submit();
} 
```

或者您可以[对您的 servlet 进行 AJAX 调用](https://stackoverflow.com/questions/10983961/how-to-call-a-java-method-from-jsp-by-clicking-a-menu-in-html-page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T04:07:09.607

AJAX 将是您的最佳选择。从 的`onClick()`方法进行AJAX 调用`<a>`

# objective-c - 我将如何允许我的 iphone 应用程序的用户将他们自己的照片全部上传到一个 google picasa 帐户？

> ID：11287644
> 
> 赞同：0
> 
> 时间：2012-07-02T04:00:14.573
> 
> 标签：objective-c, ios, uiwebview, picasa

在我的 iOS 应用程序中，我有一个 google picasa 帐户，该应用程序的所有用户都可以将他们的个人照片上传到该帐户。现在，我可以显示相册，以便用户可以查看已经存在的照片：

```
 [webView loadRequest:[NSURLRequest requestWithURL:[NSURL   
    URLWithString:@"myPicasaAlbumURL"]]]; 
```

但是，我无法弄清楚如何允许用户上传自己的照片。另外，我怎样才能让他们使用他们将上传照片的 google picasa 帐户自动登录？我已经看过 picasa 开发人员文档，但我无法理解它，此时我迫切需要帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:05:51.020

Picasa 和 Flickr 都不能直接让您做自己想做的事。如果他们给你，那么人们会滥用它来使用这些服务作为廉价的图像托管，这就是你想要的（我曾经尝试过）。Flickr 可以使用唯一的电子邮件地址将照片通过电子邮件发送给他们，他们会自动将其发布，但这需要您将照片发布到您的服务器并使用 php 或其他语言将其发送出去，这是一个非常俗气的解决方案。您可能需要考虑自己托管图像并执行一些简单的服务器端代码。最后会更加灵活。

# iphone - 即使在导入并包含框架后，XCode 4.3.3 sqlite3 也会出错

> ID：11287646
> 
> 赞同：-1
> 
> 时间：2012-07-02T04:00:26.070
> 
> 标签：iphone, objective-c, xcode, sqlite

当我使用 sqlite3 运行我的 XCode 项目时，我不断收到相同的两个错误（出现在 ** 之间）：

```
Undefined symbols for architecture i386:
  **"_OBJC_CLASS_$_CalendarDatabase", referenced from: objc-class-ref in AppDelegate.o**
ld: symbol(s) not found for architecture i386
clang: error: **linker command failed with exit code 1 (use -v to see invocation)** 
```

我到处寻找答案，但我发现的只是导入 sqlite3 和包含框架的问题。但是我已经包含`libsqlite3.0.dylib`并且`libsqlite3.dylib`我已经使用`#import "sqlite3.h"`. 我仍然收到这些错误。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T04:04:17.660

在错误消息中，这些文字`for architecture i386`告诉我您的 dylib**没有**i386 代码（只有 x86_64）。如果您正在为 i386（32 位）编译，则需要胖 dylib（x86_64 + i386）或 32 位 dylib。

# c++ - OpenMP - using functions

> ID：11287657
> 
> 赞同：1
> 
> 时间：2012-07-02T04:02:50.797
> 
> 标签：c++, openmp

When I am using OpenMP without functions with the `reduction(+ : sum)` , the OpenMP version works fine.

```
#include <iostream>
#include <omp.h>
using namespace std;

int sum = 0;
void summation()
{
    sum = sum + 1;
}

int main()
{
    int i,sum;

#pragma omp parallel for reduction (+ : sum)
    for(i = 0; i < 1000000000; i++)
        summation();

#pragma omp parallel for reduction (+ : sum)
    for(i = 0; i < 1000000000; i++)
        summation();

#pragma omp parallel for reduction (+ : sum)
    for(i = 0; i < 1000000000; i++)
        summation();

    std::cerr << "Sum is=" << sum << std::endl;
} 
```

But when I am calling a function `summation` over a global variable, the OpenMP version is taking even more time than the sequential version.

I would like to know the reason for the same and the changes that should be made.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:19:30.450

该`summation`函数不使用您要减少的 OMP 共享变量。修理它：

```
#include <iostream>
#include <omp.h>

void summation(int& sum) { sum++; }

int main()
{
    int sum;

#pragma omp parallel for reduction (+ : sum)
    for(int i = 0; i < 1000000000; ++i)
        summation(sum);

    std::cerr << "Sum is=" << sum << '\n';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:20:58.457

同步访问这个变量所花费的时间将远远超过使用多个内核所获得的时间——它们都将无休止地相互等待，因为只有一个变量并且只有一个内核可以在一个时间。这种设计不具备并发性，您支付的所有同步只会增加运行时间。

# javascript - new Date(UTCstrings)，将 UTCStrings 转换为其他时区（非本地）

> ID：11287660
> 
> 赞同：1
> 
> 时间：2012-07-02T04:04:06.583
> 
> 标签：javascript, datetime

我知道如何使用 new Date(UTCStrings) 到本地时区。

但是现在，问题是如何将 UTCString 转换为其他时区（不是本地时区）。

**例如**

UTCString 是“1338480000000”。我的本地时区是 UTC+4。我想将日期（UTCString）转换为 UTC+9。

我该怎么做？

感谢您的帮助！

**更新**

感谢巴拉克里希南的帮助。

我按照 BalaKrishnan 的关键点做了一个简单的函数。希望这会对其他人有所帮助。

```
function utcToOtherTimezone(utcString, timezone){
    var isoDt = new Date(utcString), // do this to convert it to iso time: 
    dt = isoDt.addMinutes( isoDt.getTimezoneOffset() + (timezone * 60) );

    return dt.toLocaleDateString() + ' ' +　dt.toLocaleTimeString();
}

$('#dtime').html(utcToOtherTimezone(1341282169000, +8));​ 
```

并且不要忘记添加[datejs](http://datejs.com)

在线测试示例[http://jsfiddle.net/ysjia/FWbZ8/](http://jsfiddle.net/ysjia/FWbZ8/)。好好享受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:57:53.867

首先从 UTCString 创建一个 Date 对象，如下所示： var utcString = 1338480000000; // 然而，这将是当地时间，而不是 iso 时间。var isoDt = new Date(utcString); // 将其转换为 iso 时间：isoDt.addMinutes( isoDt.getTimezoneOffset() ); // addMinutes 是来自[Date.js](http://www.datejs.com/)的 API 。现在 isoDt 对象的日期值与 UTC 日期相同，您可以在其中添加必要的偏移量 +9 或其他值。

请参阅讨论此问题的 jquery 常见问题解答：http: [//jqfaq.com/how-to-parse-a-date-string-disregarding-time-zones/](http://jqfaq.com/how-to-parse-a-date-string-disregarding-time-zones/)

# facebook - Facebook 发送按钮未显示且评论对话框闪烁

> ID：11287661
> 
> 赞同：0
> 
> 时间：2012-07-02T04:04:17.533
> 
> 标签：facebook, integration

我在许多页面上都使用 Facebook，但在这个特定的页面上，我看不到“发送”按钮，当我单击“赞”时，评论对话框会闪烁。

[https://www.customerelite.com/lrm/ms/oid/587153](https://www.customerelite.com/lrm/ms/oid/587153)

有人看到此页面上的 Facebook 按钮有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:02:48.470

这看起来像一个 Facebook 错误。我在这里提交了一个错误[https://developers.facebook.com/bugs/391962640871463](https://developers.facebook.com/bugs/391962640871463)

# eclipse - 通过更新站点安装多个 Eclipse 插件

> ID：11287664
> 
> 赞同：2
> 
> 时间：2012-07-02T04:04:34.730
> 
> 标签：eclipse, eclipse-plugin

我想使用 Eclipse 更新管理器为多个插件的单个安装创建一个捆绑的 Eclipse 更新站点。

我们的开发人员使用以下常用插件进行开发，我希望将所有这些插件捆绑在一起：

```
EGit - Git Team Provider
<url><update label="Eclipse EGit Update Site" url="http://download.eclipse.org/egit/updates"/></url>

Maven SCM Plugin
<url><update label="Maven Integration Extras" url="http://m2eclipse.sonatype.org/sites/m2e-extras/"/></url>

Maven SCM Handler for Subversive
<url><update label="objectledge.org m2e connectors" url="http://objectledge.github.com/maven-extensions/connectors/updates/"/></url>

Maven Integration for Eclipse
http://download.eclipse.org/technology/m2e/releases/1.0/1.0.200.20111228-1245<url>

Subversive -SVN team Leader
<update url="http://download.eclipse.org/technology/subversive/1.0/update-site/" label="Subversive update site 1.0.x"/>
<discovery url="http://download.eclipse.org/technology/subversive/1.0/update-site/" label="Subversive update site 1.0.x"/></url>

Subversive SVN Connectors
<url><update label="Subversive connectors update site 2.3.x" url="http://community.polarion.com/projects/subversive/download/eclipse/3.0/update-site/"/>

SVN Kit 1.3.7
<discovery label="Subversive connectors update site 2.3.x" url="http://community.polarion.com/projects/subversive/download/eclipse/3.0/update-site/"/>
   </url> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T06:09:09.907

**备选方案 1：[复合存储库](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/guide/p2_composite_repositories.htm)**

使用复合存储库，您基本上拥有一个“超级”更新站点，指向所有其他更新站点。您只需从 Eclipse 帮助中获取 2 个文件，并将所有更新站点位置添加为底部的子位置。

缺点：当您访问此更新站点时，您可以安装所有站点的所有插件，而不仅仅是您想要的。

**备选方案 2：[更新站点镜像](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/update%255Fstandalone.html)**

使用 Eclipse 中已弃用的更新命令行管理器应用程序，您可以将单个功能从远程更新站点镜像到本地更新站点。我还没有在新的 P2 Director 应用程序中发现这种能力。

好处：这样你的开发人员真的只能得到你想要的功能。缺点：您需要编写更多脚本。

**备选方案 3：[一步手动导入列出的功能](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.user/whatsNew/platform_whatsnew.html#Install)**（之后单击“安装/更新”链接）

如果您在一台机器上安装了这些功能，您可以使用文件 -> 导出 -> 安装 -> 从现有安装创建一个包含这些功能及其更新站点的小文本文件。您的其他开发人员可以使用文件 -> 导入 -> 安装 -> 从文件安装软件项来导入它们。

好处：无需编写脚本，无需更新站点托管。您可以在版本控制系统中轻松管理该导出文件。缺点：不是从更新管理器 UI 开始的（但使用相同的底层 P2 技术）。

# wordpress - WordPress 插件远程访问 WordPress URL 以发送数据

> ID：11287666
> 
> 赞同：0
> 
> 时间：2012-07-02T04:04:57.330
> 
> 标签：wordpress, url, plugins

我正在编写一个小型 WordPress 数据同步插件，旨在在两个站点之间同步一些记录。当在一个站点上输入新数据项时，该数据项的 JSON 编码版本将发布到另一个站点上的 URL，然后该 URL 对其进行消化并将其保存到本地数据库。

我发现很难弄清楚我应该将 JSON 数据发布到哪个 URL，以便它进入另一端的插件。或者我是否应该重用 admin_ajax，即使这是服务器到服务器而不是浏览器到服务器。

很高兴假设这两个站点都在运行 WordPress 3.3/3.4。

我花了相当长的时间在谷歌上搜索没有结果，这可能只是我在寻找错误的术语。

例如，我可能会获取插件的发送副本以发布到诸如[http://www.example.com/wp-content/plugins/datasyncer/incoming.php](http://www.example.com/wp-content/plugins/datasyncer/incoming.php)之类的 URL - 但更短的 URL 或更智能的方式这样做会很棒。虽然我可以通过包含 ../../../wp-load.php 使这个 URL 很容易工作，但我不愿意这样做，因为这会在某些网站上中断，并且被认为是插件中的不良做法。

我正在使用 wp_remote_post() 发布到 URL 部分，问题是要发布到哪个 URL，而不是如何发布。

如果有人有任何帮助的想法，我会编辑这个并更正术语！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:04:04.517

您可以在任何地方发布（当然，在前端，而不是在管理端）。您甚至可以发布到主页。只要确保您不发布任何与 wordpress 核心冲突的数据。例如：name、post、p 都是保留的。为所有帖子变量添加前缀“myplugin_name”是可以的，“name”不是。然后在您的插件代码中添加一个条件来检查是否发布了某些内容：

```
if(isset($_POST["myplugin_remote_data"])) {
     // check if data was indeed sent by your server. use some api key etc

     // save the data

     // echo some response telling if data was posted or not. anything you want.           

     die(); // no need to show the page
} 
```

# iphone - 如何让 iPhone 应用程序从 Web 中提取信息？

> ID：11287668
> 
> 赞同：-2
> 
> 时间：2012-07-02T04:05:03.403
> 
> 标签：iphone, ios, rss, xcode4.3

我是一些应用程序开发的新手，想知道以下内容；

如何让应用程序从网络中提取信息？例如，我想在我的应用程序底部有一个“更多”选项卡。在这个“更多”选项卡中，打开了一个表格视图，我希望它从网络中提取。我将在其中输入我的其他应用程序的链接以跨市场。我在另一个名为“Emoji ..”的应用程序中看到了这一点（Empire Apps 的图标中心脏戴着阴影的应用程序）。本质上，我希望它从（我猜）我创建的网页中提取，该网页将包含链接以及其中的图标图像。不幸的是，我可以描述它的最佳方式。它几乎就像我之前谈到的那个表情符号应用程序中的那个。再一次，我是新手，英语不是我的第一语言，所以如果我不够清楚，我深表歉意。但是我不知道如何在 Xcode 端完成这项工作，也不在网络端。任何建议都非常感谢，我提前感谢大家的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:21:02.960

您可以让您的应用程序显示一个网页，例如在您的应用程序委托上尝试此代码。您可以制作一个网页并在其中显示您的链接和其他信息，当用户在您的应用程序上按“更多”时，使您的应用程序在应用程序本身的窗口/视图上显示网页

也许这就是您想要实现的目标？

无论如何，有很多方法可以从网络（或服务器）中提取信息，例如 POST 等。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    UIWebView *webView = [[[UIWebView alloc]
                           initWithFrame:CGRectMake(0, 0, 320, 480)] autorelease];

    NSURL *url = [[[NSURL alloc] initWithString:@"http://www.google.com"] autorelease];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    [webView loadRequest:requestObj];
    [self.window addSubview:webView];
    [self.window makeKeyAndVisible];
} 
```

# android - 为什么键盘输入在 Android 模拟器中停止工作

> ID：11287675
> 
> 赞同：15
> 
> 时间：2012-07-02T04:05:53.057
> 
> 标签：android, emulation

最近将我的 Android SDK 安装升级到 r20，现在键盘输入似乎已停止与现有和新的 AVD 一起使用。

升级前一切正常。

有谁知道是什么原因造成的？（我使用的是 ubuntu 12.04 x64）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-03T13:19:10.270

我通过在 AVD-Manager 中将“键盘支持”添加到 AVD 并将值更改为“true”解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T04:05:53.553

原来它在 Android SDK 的 r20 中[更改了模拟器的默认设置](http://code.google.com/p/android/issues/detail?id=30929)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T04:19:11.940

如果您想通过命令行为您的 android 虚拟设备启用键盘，请编辑`~/.android/avd/[YOUR_AVD].avd/config.ini`并将其添加到文件中：

```
hw.keyboard=yes 
```

重新启动您的 AVD，您应该可以开展业务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T15:50:38.930

如果您想通过命令行为您的 android 虚拟设备启用键盘，请编辑~/.android/avd/[YOUR_AVD].avd/config.ini 并将其添加到文件中：hw.keyboard=yes 重新启动您的 AVD，然后您应该做生意。

或者，转到以下路径（在我的情况下，mukesh 是用户）：mukesh/.android/avd/[YOUR_AVD].avd/config.ini 并**添加此行 hw.keyboard=yes**

[你可以从我的博客这里](http://mukeshyadav4u.blogspot.in/2012/08/keyboard-input-stop-working-in-android.html)了解更多信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T00:39:51.757

您需要向 AVD 添加一个属性以启用键盘支持。

1.  在 Eclipse 中，转到 Window > Android Virtual Device Manager
2.  选择您的 AVD
3.  单击编辑...
4.  在硬件部分单击新建..
5.  属性：键盘支持
6.  点击确定
7.  将键盘支持的值更改为“是”
8.  单击编辑 AVD
9.  选择您的 AVD
10.  点击开始...

# jquery - 向 wtforms 添加验证（jquery 和服务器端）

> ID：11287679
> 
> 赞同：-1
> 
> 时间：2012-07-02T04:07:29.660
> 
> 标签：jquery, python, google-app-engine, jinja2, wtforms

我有一个简单的模型表单，它通过以下 jinja2 模板呈现：

```
<form method="POST" action=""> 
    <table>
      {% for field in form %}   

      <tr>{{ field.label }}</tr>
      <tr>{{ field()|safe }}</tr>

      <tr>
        {% if field.errors %}
        <td>
          <ul class=errors>
            {% for error in field.errors %}
            <li>{{ error }}</li>
            {% endfor %}
          </ul>
        </td>
        {% endif %}
        {% endfor %}
    </table>
    <input type="submit" class="btn"  value="Submit Form"/>
  </form> 
```

我想自定义 wtforms 的输出，并对每个要呈现的表单字段，我想添加一个类`"required"`来使用 jquery 客户端验证插件。

以下是我的 appengine 数据库模型：

```
class Song(db.Model):
    title = db.StringProperty()
    lyrics = db.TextProperty()
    duration = db.IntegerProperty()
    movie = db.ReferenceProperty(Movie)
    singer = db.ReferenceProperty(Singer) 
```

以下是我的表单，渲染脚本：

```
SubTaskForm = model_form(Song, 
                         exclude=('movie', 'singer'),
                         ) 
```

使用 wtfroms 验证器附加验证器的好方法是什么，以及如何将**class=required**附加到表单字段？

让我知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T20:20:03.320

看看这个库[https://pypi.python.org/pypi/WTForms-ParsleyJS](https://pypi.python.org/pypi/WTForms-ParsleyJS)从 WTForms 服务器端验证器自动生成客户端 parsley.js 验证标签。

[http://codevisually.com/parsley-js/](http://codevisually.com/parsley-js/) Parsley.js 是一个轻量级（12k 缩小）表单验证 JavaScript 库，具有不同之处。它不是使用 JS 验证表单，而是使用数据属性来实现相同的效果。它适用于 jQuery 和 Zepto，并且非常易于配置，允许您覆盖几乎所有 Parsley 默认行为以满足您的确切需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T05:59:55.440

一种方法是覆盖 python 中定义它们的东西，另一件可以做的事情是，你可以在模板本身中`<tr class="required">` 尝试，试一试，应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T15:09:44.473

The renderer (field()) passes on arguments as attributes in the generated HTML. So, by calling, e.g., field(class='required') you can mark the field(s) as required and apply the jquery validate plugin as usual. If your context treats 'class' as a keyword, you can pass in 'class_'. Details in the **call** note for [WTForms.field](http://wtforms.simplecodes.com/docs/0.6/fields.html).

# android - Jellybean (API 16) 仍未出现在我的 Android SDK 管理器中

> ID：11287681
> 
> 赞同：21
> 
> 时间：2012-07-02T03:20:58.757
> 
> 标签：android

只是我还是其他人没有看到他们的 SDK 管理器上显示最新的 Android (Jellybean)？我[到处](http://www.teamandroid.com/2012/06/27/install-android-41-try-jelly-bean-sdk-now/)都看过，似乎无论我在哪里，人们都可以很好地看到它出现在他们的 SDK 管理器上。

我已通过 SDK 工具更新到 rev 20 并运行所有其他 ADT 更新。

我不在美国 - 我想知道这是否仍然不适用于非美国开发人员？我还没有遇到任何提到这一点的东西。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-02T08:33:03.840

尝试其中之一：

*   Android SDK 管理器 > 工具（菜单栏）> 设置 > 清单缓存 > 清除缓存（可能取消选中“使用下载缓存”）
*   如果这不起作用，请尝试直接运行 SDK Manager（即不在 Eclipse 中）。如果从 Windows 运行，请确保以管理员身份运行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T05:45:31.227

就我而言，每当我在 Eclipse 外部打开 SDK 管理器、从工具栏中“重新加载”或单击“选项”时，我只能看到 Android 4.0.3 (API 15)。刚才，我安装了它为工具推荐的 2 个东西，然后突然一切都出现了！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T16:27:11.013

我遇到了这个问题，并且在选择后能够看到新的 repo：

包 > 重新加载（从 SDK 管理器工具栏）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T05:57:50.437

我通过从命令提示符打开 AVD 管理器来解决这个问题...

命令（Window[Linux too]）：.../android-sdks/tools/android

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T09:40:09.247

我通过更新我的 SDK 工具解决了这个问题。我下载了最新的“Android SDK 工具”和“Android SDK 平台工具”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T12:25:47.813

就我而言，MAC OSX 问题与我的 ADT 版本有关，我从[Android](http://developer.android.com/sdk/installing/installing-adt.html)下载了最新版本的ADT安装完成后，我重新启动了 Eclipse，然后选择（菜单）窗口--> Android SDK 管理器--> 包--> 重新加载

这次它对我有用。

# c++ - 我可以通过句柄判断等待计时器何时触发吗？

> ID：11287685
> 
> 赞同：0
> 
> 时间：2012-07-02T04:08:17.687
> 
> 标签：c++, windows, winapi, timer

假设我使用[CreateWaitableTimer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682492%28v=vs.85%29.aspx) API 创建了一个可等待计时器，然后使用 SetWaitableTimer 设置它。我可以通过第一个 API 返回的 HANDLE 找出该计时器何时触发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:17:45.343

不，你不能。

但是没有什么可以阻止您创建一个将发布类似 API 的包装器对象，记录目标时间（通过将到期时间添加到当前时间`SetWaitableTimer`被调用），并为您提供未完成时间作为当前时间之间的差异调用查询方法的时间，以及目标时间。

# c - 不打印垃圾值

> ID：11287686
> 
> 赞同：0
> 
> 时间：2012-07-02T04:08:19.003
> 
> 标签：c, arrays, printf, garbage

为什么下面的程序不打印垃圾值。据我所知，堆栈上分配的数组内存（即在编译时）和堆栈内存包含一些垃圾值。但它不打印垃圾值。它正在打印 1's 。仅当在函数 g() 中，数组 b 的大小 > 数组 a 的大小时，它才会打印垃圾值。当 g() 中的数组大小 > 数组 a 的大小时，它会打印 12 个 1（在这种情况下）并作为垃圾值休息。

```
 void f()
    {
        int a[12],i=0;
        for(i=0;i<12;i++)
          a[i]=1;
    }
    void g()
    {
        int b[12],i=0;
        for(i=0;i<12;i++)
          printf("%d\n",b[i]);
    }
    int main()
    {
         f();
         g();
          return 0;
    } 
```

分配给数组 b 的内存是否与之前分配给数组 a 的内存相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T04:11:07.723

它是垃圾，由函数留下`f()`- 这种效果没有定义。该效果是编译器如何在堆栈上分配和释放局部变量的副产品。

编译器可以生成代码以在函数返回时用随机数据完全覆盖堆栈，或者它可以只生成代码来修改堆栈指针，这就是它在这种情况下所做的。

# oracle - 如何在 Oracle 中查找打包过程和函数的代码行

> ID：11287688
> 
> 赞同：3
> 
> 时间：2012-07-02T04:08:33.617
> 
> 标签：oracle, package, lines-of-code

> **可能重复：**
> [如何使用 SQLPlus 查看 Oracle 存储过程？](https://stackoverflow.com/questions/7000224/how-to-view-oracle-stored-procedure-using-sqlplus)

我是甲骨文的新手。你能帮我解决这个问题吗？

如何在 Oracle 中细化打包过程和函数的代码行？

是否有任何系统表或查询来查找任何包内的过程和函数的 LOC？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T04:18:29.990

查看 Oracle 字典中的[ALL_SOURCE 视图](http://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_2063.htm)。

# pointers - Valgrind 错误：大小为 1 的读取无效

> ID：11287691
> 
> 赞同：0
> 
> 时间：2012-07-02T04:09:04.300
> 
> 标签：pointers, valgrind

我在这段代码中找不到错误，我看了好几个小时...... Valgrind 说：

```
==23114== Invalid read of size 1
==23114== Invalid write of size 1 
```

我尝试使用一些 printfs 进行调试，我认为错误出在此函数中。

```
void rdm_hide(char *name, Byte* img, Byte* bits, int msg, int n, int size)
{
    FILE *fp;
    int r;/
    Byte* used;
    int i = 0, j = 0;
    int p;

    fp = fopen(name, "wb");

    used = malloc(sizeof(Byte) * msg);

    for(i = 0; i < msg; i++)
        used[i] = -1;

    while(i < 3)
    {
        if(img[j] == '\n')
            i++;
        j++;
    }

    for(i = 0; i < msg; i++)
    {
        r = genrand_int32();
        p = r % n;

        if(!search(p, used, msg))
        {
            used[i] = (Byte)p;

            if(bits[i] == (Byte)0)
                img[j + p] = img[j + p] & (~1);
            else if(bits[i] == (Byte)1)
                img[j + p] = img[j + p] | 1;
        }
        else
            i --;
    }

    for(i = 0; i < size; i++)
        fputc( (char) img[i], fp);

    fclose(fp);
    free(used);
} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:06:24.800

> ==23114== 大小为 1 的无效读取
> ==23114== 大小为 1 的无效写入

我很确定这不是valgrind 所说的*全部。*

你应该

1.  `-g`使用调试信息（很可能是标志）构建您的程序。这会让 valgrind*准确地*告诉你哪一行触发了无效的读写
2.  如果问题不明显，请编辑您的问题并包含*整个*valgrind 输出。
3.  重新运行`valgrind --track-origins=yes your-exe`可能会提供额外的有用信息。

最后，您的算法*似乎*完全是虚假的。据我所知，`j`在第一个循环之后变成 3`while`并且在那之后永远不会改变（在这种情况下你应该只使用`const int j = 3;`和取消`j++`）。另外，您参考`img[j + p]`,和`p`之间的位置。如果确实是 的大小，那么索引超出限制并触发这两个错误也就不足为奇了。`0``n``n``img``j + p``img`

# android - 每个项目向 ListView 添加多行

> ID：11287697
> 
> 赞同：0
> 
> 时间：2012-07-02T04:09:54.520
> 
> 标签：android, android-listview

我有一个带有`ListView`自`ArrayAdapter`定义 XML 行的自定义。

我正在传递对象，一切都很好。但是，我想在 ArrayAdapter 中重复每行 5 次。在适配器中，我想对每个设置进行细微调整，并且在传递到适配器之前进行调整是不可行的。

是否有可能做到这一点？我似乎无法想出正确的搜索词来找到任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:42:54.940

我知道有两种方法： 1\. 多次将重复项添加到数据集中。由于您引用的是同一个对象，因此它非常便宜。

1.  您可以在对象中存储重复次数，并实现方法 getCount()、getObject()、getView()、getItemId() 记住重复次数。fe 如果你有 Foo 对象有 2 次重复，而 Bar 没有重复 getCount 应该返回 (2 + 1) + 1。你可能还想在构造函数中计算这些值，或者当数据集更改以加速 ui 时少量。

# jquery - Magento：Jquery 不工作，但可以在控制台中工作

> ID：11287701
> 
> 赞同：0
> 
> 时间：2012-07-02T04:10:49.767
> 
> 标签：jquery, magento-1.5

我正在尝试让一个简单的 jQuery 脚本在我的 magento 产品页面上工作。然而，在将 jQuery 脚本添加到 XML 之后，magento 能够读取并在标题中添加 jQuery 脚本......脚本仍然无法工作。然后我尝试将脚本放入 chrome 控制台，它工作正常。

```
$j(document).ready(function(){
    $j("#ship").show();
    $j("#details").hide();
    $j("#sizing").hide();
    $j(".ship").css("text-decoration","underline");

    $j(".ship").click(function(){
        $j(".ship").css("text-decoration","underline");
        $j(".details").css("text-decoration","none");
        $j(".sizing").css("text-decoration","none");
        $j("#ship").show();
        $j("#details").hide();
        $j("#sizing").hide();
    });

    $j(".details").click(function(){
        $j(".ship").css("text-decoration","none");
        $j(".details").css("text-decoration","underline");
        $j(".sizing").css("text-decoration","none");
        $j("#ship").hide();
        $j("#details").show();
        $j("#sizing").hide();
    });

    $j(".sizing").click(function(){
        $j(".ship").css("text-decoration","none");
        $j(".details").css("text-decoration","none");
        $j(".sizing").css("text-decoration","underline");
        $j("#ship").hide();
        $j("#details").hide();
        $j("#sizing").show();
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:40:11.247

使用 Jquery.noConflict() 函数。它将解决问题

```
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

# java - 如何动态搜索 jar 文件中的 .class 文件？

> ID：11287703
> 
> 赞同：1
> 
> 时间：2012-07-02T04:11:13.683
> 
> 标签：java, bytecode

我有一个 jar 文件的 URL 列表，我也有整个路径类名`com.mycompany.myproject.Test`，我如何在这些 jar 文件中搜索并获取其中的 .class 文件？我用它来反编译。

```
String classname = "com.mycompany.myproject.Test";
URI uri = Tool.searchClass(jarList, classname);
// decompile .class
... 
```

有这样的示例代码吗？

**补充：Shell脚本很好，但是java代码中有没有办法可以完成这项工作？**

**补充：我刚刚写了一个静态方法`java.util.jar.JarFile`来处理这个，希望这对其他人有帮助**

以下代码经过测试并且可以正常工作：

```
/**
 * Search the class by classname specified in jarFile, if found and destFolder specified
 * Copy the .class file into destFolder with whole path.
 * @param classname
 * @param jarFile
 * @param destFolder
 * @return
 */
public static File searchCompressedFile(String classname, File jarFile, String destFolder) {
    try {
        // change classname "." to "/"
        if(classname.contains(".")){
            classname = classname.replace(".", "/");
        }

        JarFile jarF = new JarFile(jarFile);
        Enumeration<JarEntry> jarEntries = jarF.entries();

        while (jarEntries.hasMoreElements()) {
            JarEntry jarEntry = jarEntries.nextElement();
            if (jarEntry.getName().indexOf(classname) >= 0) {
                String filePath = jarFile.getAbsolutePath();
                System.out.println(classname + " is in " + filePath + "--" + jarEntry.getName());

                if (destFolder != null && !"".equals(destFolder)) {
                    // Make folder if dest folder not existed.
                    File destF = new File(destFolder);
                    if (!destF.exists()) {
                        destF.mkdirs();
                    }

                    File f = new File(destFolder + File.separator + jarEntry.getName());
                    if(!f.getParentFile().exists()){
                        f.getParentFile().mkdirs();
                    }
                    InputStream is = jarF.getInputStream(jarEntry);
                    FileOutputStream fos = new java.io.FileOutputStream(f);
                    while (is.available() > 0) {
                        fos.write(is.read());
                    }
                    fos.close();
                    is.close();

                    return f;
                }
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

    System.out.println("Class not found in jar");
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:15:10.670

jar 文件实际上是一个`.zip`. 可以使用`java.util.zip.ZipInputStream`如下方式进行搜索：

```
import java.util.zip.ZipInputStream;
import java.util.zip.ZipEntry;

public class Test {

    public static void main(String args[]){ 
        try{
                CodeSource src = Main.class.getProtectionDomain().getCodeSource();
                if( src != null ) {
                  URL jar = src.getLocation();  
                  ZipInputStream zip = new ZipInputStream(jar.openStream());                      
                  ZipEntry zipEntry = null;
                  while((zipEntry = zip.getNextEntry()) != null){
                    String entryName = zipEntry.getName();
                    // do what you want
                  }
                }
        }
        catch (Exception e){            
        }       
    }   
} 
```

我还找到了另一个使用[JarFile类的答案](https://stackoverflow.com/a/1429233/1057429)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T04:16:35.173

我的 ~/bin 文件夹中有这个名为 findClass.sh 的 shell 脚本：

```
echo "Finding $2 in $1."
for jar in `find $1 -name \*.jar`
do
   echo -n "."
   for class in `jar tf $jar`
   do
     if [[ "`echo $class | grep $2`" = ""  ]] 
     then
        grep test /dev/null 
     else 
        echo -e "\n$jar : $class"
     fi
     done

 done 
```

如果您的 .jar 文件目录特别大，可能需要一段时间才能找到。我已经将它与数百个罐子一起使用，它很慢，但很有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T04:29:53.347

使用 的`loadClass()`方法[`java.net.URLClassLoader`](http://docs.oracle.com/javase/6/docs/api/java/net/URLClassLoader.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T05:30:08.603

EJP 的尖端是一个参考点。这是一个你有非本地 url 的真实案例，所以创建一个类加载器、加载一个类并获取它的字节码更正确。也许以某种方式是这样的：

```
 URLClassLoader classLoader = new URLClassLoader(list.toArray(new URL[0]));
    Class<?> clazz = classLoader.loadClass(path);
    File tmp = new File(System.getProperty("java.io.tmpdir"), path.replace(".", "_") + ".class");
    FileChannel tmpChannel = new FileOutputStream(tmp).getChannel();
    InputStream is = clazz.getResourceAsStream("/" + path.replace(".", "/") + ".class");
    tmpChannel.transferFrom(Channels.newChannel(is), 0, Long.MAX_VALUE);
    URI uri = tmp.toURI(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T04:19:48.093

我正在使用简单的 bash 脚本进行反编译。

```
#!/bin/bash

if [ -z "$1" ] ; then
    echo "There is no argument please enter jar file name"
    exit -1
fi

FNAME=$1
FNAME_SHORT=`basename $1`
DNAME=${FNAME_SHORT/.*/}_jar

CLASS_DIR=${DNAME}/cls
SRC_DIR=${DNAME}/java

mkdir -p $CLASS_DIR
mkdir -p $SRC_DIR
echo "Unpacking ${FNAME}.."
( cd ${CLASS_DIR} ; unzip -o ../../${FNAME} ) > /dev/null 2>&1 || exit -1
CLASSES="$(cd $DNAME ; find cls -name "*.class" -print)"
if [ ! -z "$CLASSES" ] ; then
    for C in $CLASSES ; do
        CNAME=${C/.*/}
        CNAME=${CNAME#cls/}
        JFILE=$SRC_DIR/${CNAME}.java
        CNAME=${CNAME//\//.}
        if [ -f $JFILE ] ; then
            echo "Skipping $C..."
            continue
        fi
        echo -n "Decompile $C to $DNAME..."
        jad -o -f -d $DNAME/java -lnc -s .java -r $DNAME/$C > /dev/null 2>&1
        if [ $? != 0 ] ; then
            echo "FAILED"
            javap -c -classpath $CLASS_DIR ${CNAME} > $JFILE
        else
            echo "OK"
        fi
    done
fi 
```

# c++ - 如何自定义 C++ 类和结构的 STAssertEquals 输出？

> ID：11287708
> 
> 赞同：2
> 
> 时间：2012-07-02T04:12:28.813
> 
> 标签：c++, xcode, unit-testing, ocunit

我正在使用 OCUnit 在 XCode 4.3.2 中编写测试用例。我想将 C++ 类和结构与 进行比较`STAssertEquals`，但不幸`STAssertEquals`的是，当测试失败时默认打印对象引用。

如何自`STAssertEquals`定义 C++ 中用户定义类型的输出？

我尝试为我的对象实现`operator<<`on- `std::ostream`<code>std::ostream& operator<<(std::ostream& stream, const MyObject& obj);-但这似乎并没有改变输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:26:47.747

添加将 C++ 类或结构包装在 Objective-C 对象中的代码。然后实现一个`-isEqual:`检查相等性的方法。

# java - 从程序中删除不需要的文本

> ID：11287711
> 
> 赞同：-3
> 
> 时间：2012-07-02T04:13:09.977
> 
> 标签：java

你能帮助“调试”这个程序吗？我拥有它几乎完美，但是当我打印它时，它包含我不想要的 "28" 。

```
public static boolean isPerfectNumber(int n)
{
    int lhs=0,rhs = 0;
    for(int i = 1;i<(n-2);i++)
    {
        lhs += i * (n/i)                                                                   ;
        rhs += i * ((n-1)/i)                                                               ;
    }

    rhs += n;
    if(rhs == lhs)
    {
        return true                                                                        ;
    }
    return false                                                                       ;
}

public static void main(String[] theory) {
    int candArray[] = new int [20]                                                 ;
    for(int i = 2;i<21;i++)
    {
        candArray[i-2] = (int) (Math.pow(2, i-1)*(Math.pow(2, i)-1)                   );
    }

    for(int i = 1;i<20;i++){
        if(isPerfectNumber(candArray[i])                                              )
        {
            System.out.println(candArray[i] + " is a perfectNumber"                       );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:22:31.387

现在你正在使用[梅森素](http://en.wikipedia.org/wiki/Mersenne_prime)数来寻找[完美的数字](http://en.wikipedia.org/wiki/Perfect_number)。根据您填充 Mersenne Prime 数组的方式，`28`包含关联的 Mersenne Prime。梅森素数的形式为 (2^p - 1)，您的第一个循环`main`是将梅森素数存储在一个数组中。

你需要弄清楚：

*   哪个梅森素数与完美数有关`28`？
*   **现在你应该如何改变你的第一个循环 -或**你的第二个循环 - 中的索引`main`以忽略与 相关的 Mersenne Prime `28`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T04:39:49.780

最快和最简单的改变：

```
if(isPerfectNumber(candArray[i]) && candArray[i] > 28 )
{
   System.out.println(candArray[i] + " is a perfectNumber" );
} 
```

# iphone - 被分析的二进制文件必须存在，xcode中的iOS App Archive

> ID：11287713
> 
> 赞同：4
> 
> 时间：2012-07-02T04:13:25.850
> 
> 标签：iphone, ios, xcode, xcode4, three20

我正在尝试验证我的 App 以提交 App Store，我已经对其进行了更新。之前用的是 Three20，虽然我不确定是什么版本，可能是 1.0.3。现在它使用的是 1.0.5，我重新运行了将 Three20 添加到带有 --xcode-version=4 标志的应用程序的 python 脚本。

我没有链接器错误，并且存档正常，但是当我尝试验证要分发的存档时出现以下错误：

![在此处输入图像描述](../Images/fb4fbd9b327db7d6e8cf087699a9c00c.png)

我有点不知所措，整天都在处理链接器错误，以及 Three20 和 Xcode 本身的一般问题。有什么明显的我可能在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T04:28:56.273

> 正在分析的二进制文件必须是可执行文件：

检查您的构建设置，因为有些问题。您的 Mach-O 类型应设置为可执行：![在此处输入图像描述](../Images/24e30f7298989acd9f6675b3f51675dd.png)

> 应用程序代码签名验证失败...

您必须使用分发证书签署您的可执行文件，您很可能使用开发证书签署，或者根本没有签署。

![在此处输入图像描述](../Images/274ad03bab7223d4936381ade98044ca.png)

> 被分析的二进制文件必须存在：

这可能是因为第一个问题。解决 Mach-O 类型，这应该会立即消失。

# eclipse - 如何在 Eclipse 包资源管理器上下文菜单中添加一个条目以启动 TextEditor？

> ID：11287715
> 
> 赞同：4
> 
> 时间：2012-07-02T04:14:30.357
> 
> 标签：eclipse

我正在尝试向 Package Explorer 弹出上下文菜单中添加一个条目，当该条目被选中时，该菜单会在编辑器中打开文件的修改版本。

我在 Fedora 15 笔记本电脑上使用 Eclipse Indigo。

这是一个非常具体的问题，它可能具有充分的重点，并且可能会提供解决我遇到的一般问题所需的帮助。

Eclipse 提供了一个名为 org.eclipse.ui.examples.readmetool 的示例插件，可以从 Help->Welcome 页面进行设置。

这个插件定义了一个名为 ReadmeEditor.java 的编辑器。它还在plugin.xml 中定义了一个扩展点“org.eclipse.ui.popupMenus”。当您从 Eclipse 项目资源管理器视图中对后缀为“.readme”的文件使用此操作时，您只会看到一个小弹出窗口。

如何更改 readmetool 插件，以便当您在 foo.readme 文件上选择上面定义的项目资源管理器菜单项时，您会在 eclipse 中获得一个新的 ReadmeEditor，其中包含 foo.readme？

我正在努力解决的更具体的项目需求如下：

*   从包资源管理器中，导航到一个文件。

*   右键单击文件以弹出上下文菜单

*   查看新条目“版本视图”

*   选择该条目后，找到该文件，通过外部程序运行它以创建一个临时文件，并在新的 TextEditor 窗口中显示该临时文件的内容。（并且，不要在不再需要后留下孤立的临时文件。）

我有上面的一些部分；我扩充了 MultiPageEditor 示例，以便它完成运行外部程序、创建临时文件和在文本编辑器中打开临时文件的工作。

但是，我目前可以访问该功能的唯一方法是在项目资源管理器中的文件的弹出上下文窗口中选择“打开方式”选项，然后转到该窗口中的“其他”并选择我的新编辑器选项.

所以，我现在卡住的地方是如何向 plugin.xml 添加正确的魔法，以便我在项目管理器弹出上下文窗口中获得一个新选项，并将其与新的 TextEditor 窗口连接起来。

这看起来很像香草“打开”选项会做的事情，而且这似乎应该是在 Eclipse 中做的一件非常基本的事情。任何示例和/或指导将不胜感激。

格雷格

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T20:10:25.880

这是设置和使用项目的一个简洁但完整的示例。（在网上搜索，有很多关于 eclipse 的建议，但它往往是相当零散和零碎的，当我努力解决我的问题时，拥有一个完整的、独立的 HOWTO 会很有帮助。所以，这是那..）

这个秘籍假设你正在使用 Eclipse Indigo 或 Juno：

*   面向 Java 开发人员的 Eclipse IDE
*   Eclipse 插件开发环境。

要在 Eclipse 中确认上述内容，请参阅

```
Help -> About Eclipse -> Installation Details -> Installed Software 
```

1.  使用全新的空工作区启动 Ecipse Indigo：

    ```
    you, before starting eclipse:
              move or delete ~/eclipse.d/popup_workspace.d
              mkdir -p ~/eclipse.d/popup_workspace.d
    start eclipse:  eclipse
    eclipse:  "Select a workspace"
    you:      "Browse", navigate to above-created popup_workspace.d; "OK" "OK"
    eclipse:  "Welcome to Eclipse IDE for Java Developers"
    you:      select "Workbench" 
    ```

2.  创建一个新项目，使用插件项目作为一个方便的起点：

    ```
    you:      File -> New -> Project
    eclipse:  "Select a wizard:
    you:      Plug-in Development -> Plug-in Project;  Next>
    eclipse:  "Plug-in Project"
    you:      Project name:  org.mypopup.popup_editor  Next>
    eclipse:  "Content"
    you:      Next>
    eclipse:  "Templates"
    you:      Plug-in with a popup menu                Finish
    eclipse:  "This kind of project is associated with the
              Plug-in Development perspective..."
    you:      Yes 
    ```

3.  在“Package Explorer 中，导航到 NewActions.java 并双击打开：

    ```
    org.mypopup.popup_editor
        -> src
            -> org.mypopup.popup_editor.popup.actions
                -> NewAction.java

    delete entire contents and replace with:

    package org.mypopup.popup_editor.popup.actions;

    import org.eclipse.jface.viewers.TreeSelection;
    import org.eclipse.jface.viewers.TreePath;
    import org.eclipse.core.resources.IFile;
    import org.eclipse.core.filesystem.EFS;
    import org.eclipse.core.runtime.IPath;
    import org.eclipse.jface.action.IAction;
    import org.eclipse.jface.viewers.ISelection;
    import org.eclipse.ui.IObjectActionDelegate;
    import org.eclipse.ui.IWorkbenchPage;
    import org.eclipse.ui.IWorkbenchPart;
    import org.eclipse.ui.IWorkbenchWindow;
    import org.eclipse.ui.PlatformUI;
    import org.eclipse.ui.ide.IDE;

    public class NewAction implements IObjectActionDelegate {
        public NewAction() {
            super();
        }

        public void run(IAction action) {
            try {
                IWorkbenchWindow window =
                        PlatformUI.getWorkbench().getActiveWorkbenchWindow();

                ISelection selection = window.getSelectionService()
                        .getSelection("org.eclipse.ui.navigator.ProjectExplorer");

                TreePath[] paths = ((TreeSelection) selection).getPaths();
                TreePath p = paths[0];
                Object last = p.getLastSegment();

                if (last instanceof IFile) {
                    IPath ipath = ((IFile) last).getLocation();

                    IWorkbenchPage page = window.getActivePage();

                    IDE.openEditorOnFileStore(page,
                            EFS.getLocalFileSystem().getStore(ipath));
                }
            } catch (Exception blah) {
            }
        }

        public void setActivePart(IAction action, IWorkbenchPart targetPart) { }

        public void selectionChanged(IAction action, ISelection selection) { }
    } 
    ```

4.  向项目添加依赖项以便能够解析导入：

    ```
    in Package Explorer, navigate to and open META-INF -> MANIFEST.MF

    Select "Dependencies" tab along the bottom of the resulting
    "org.mypopup.plugin_editor" window

    "Add..."; "Select a Plug-in:" enter org.eclipse.core.filesystem; "OK"
    "Add..."; "Select a Plug-in:" enter org.eclipse.ui.ide; "OK"

    File -> Save my.popup.popup_editor 
    ```

5.  使用新的空目标目录运行新项目：

    ```
    outside of eclipse, browse to the directory containing popup_workspace.d,
    in this case ~/eclipse.d, and if a folder "runtime-EclipseApplication"
    exists, move it or delete it.

    right-click META-INF -> MANIFEST.MF, select Run As -> Eclipse Application

    in new eclipse window:
    eclipse:  "Welcome to Eclipse"
    you:      select "Workbench"
    you:      File -> New -> Project
    eclipse:  "Select a wizard"
    you:      General -> Project              Next>
    eclipse:  "Project"
    you:      project name popup_test         Finish
    you:      in Project Explorer, right-click popup_test, select New -> File
    eclipse:  "File"
    you:      File name:  test_file1          Finish
    you:      enter a little text in test_file1, File -> Save; File -> Close 
    ```

6.  重要时刻：使用新的弹出菜单项打开文件：

    ```
    in Project Explorer, right-click popup_test -> test_file1
    select New Submenu -> New Action 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T07:05:40.717

该`readmetool`示例已经为 .readme 文件提供了上下文菜单操作：

```
<extension
     point="org.eclipse.ui.popupMenus">
  <objectContribution
        objectClass="org.eclipse.core.resources.IFile"
        nameFilter="*.readme"
        id="org.eclipse.ui.examples.readmetool">
     <action
           label="%PopupMenus.action"
           icon="$nl$/icons/ctool16/openbrwsr.gif"
           helpContextId="org.eclipse.ui.examples.readmetool.open_browser_action_context"
           class="org.eclipse.ui.examples.readmetool.PopupMenuActionDelegate"
           menubarPath="additions"
           enablesFor="1"
           id="org.eclipse.ui.examples.readmetool.action1">
     </action>
  </objectContribution>
  ...
</extension> 
```

它已命名`Show Readme Action`，但您可以`Version view`通过编辑包含相应标签名称的 plugin.properties 将其重命名为：

```
PopupMenus.action = &Version view 
```

然后你只需要编辑`PopupMenuActionDelegate`和改变它的实现来做你想做的事：

```
public class PopupMenuActionDelegate implements IObjectActionDelegate {

    public void run(IAction action) {
        // invoke the external tool and open the result in a new editor
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T20:52:01.123

Here is a small, self-contained example of getting an editor window to open in response to selection of a pop-up window option. As a test, it opens a file with a hard-wired name.

```
public void run(IAction action) {
    try {
        IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
        File f = new File("/tmp/testum");
        IPath ipath = new Path(f.getAbsolutePath());
        IWorkbenchPage page = window.getActivePage();
        IDE.openEditorOnFileStore(page, EFS.getLocalFileSystem().getStore(ipath));
    } catch (Exception blah) {
        System.err.println("Exception!");
    }
} 
```

# c - C 语言：交换指针与交换指向的值有何不同？

> ID：11287716
> 
> 赞同：0
> 
> 时间：2012-07-02T04:14:55.750
> 
> 标签：c, pointers, swap

```
int a=5; b=7;
int *pa=&a, *pb=&b; 
```

交换 a 和 b 的值与交换指针的值 ie `pa`and `pb`(not `*pa`and `*pb`) 有何不同？两种情况下的结果不一样吗？

我们什么时候必须使用指针交换比？

我在书中有一个例子，它使用指针与字符串数组交换，即`char*`[]。这是作为排序机制的一部分完成的。`char* []`交换函数对存储字符串的类型变量进行指针交换。我不明白为什么函数 swap 是 form `void swap(char** , char**)`。

我在其他地方找不到任何解释，因此我的问题。

`swap(int*& a, int*& b)`:(相比如何`swap(char** a,char** b)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:57:03.577

首选使用指针交换变量值的原因是因为它避免了**复制大量内存**。任何内存复制都需要时间，因此将内存复制量保持在最低限度可以使算法运行得更快。

**内存复制如何成为问题？**

考虑以下伪代码，它可以*就地交换任何类型的*两个值：

```
tempValue = value1;      /* first memory copy */
value1    = value2;      /* second memory copy */
value2    = tempvalue;   /* third memory copy */ 
```

在您最初的问题中，您交换了两个*整数*。假设一个整数的宽度是 4 个字节，那么上面的伪代码将在三个复制操作中交换两个整数。复制的总内存：12 字节。如果我们假设一个指针的宽度也是 4 个字节，那么交换指针值也需要复制 12 个字节的内存。在这种情况下，为交换值而复制的内存量与交换指针相同。在这种情况下，任何一种方法都将提供相同的性能。

现在考虑这个代码片段：

```
typedef struct _mystruct
{
    char buffer[128];   /* size of structure becomes at least 128 bytes */

} MYSTRUCT, *PMYSTRUCT;

MYSTRUCT value1, value2;

PMYSTRUCT pValue1 = &value1;
PMYSTRUCT pValue2 = &value2; 
```

的大小`MYSTRUCT`至少为 128 字节。使用上面的伪代码来交换 和 的值`value1`将`value2`需要三个 128 字节的内存副本，或总共 384 字节。另一方面，如果我使用两个指针`pValue1`和交换值`pValue2`，假设指针是 4 字节宽，则在交换期间复制的字节数与上面的整数示例相同；只有 12 个字节。与不使用指针的 384 字节相比，这非常快并且性能会好得多。

这就是为什么`char**`用作字符串交换函数的参数的原因。被交换的字符串的长度是未知的，因为交换值意味着复制内存，长字符串可能会大大降低性能。使用指针意味着交换的性能将保持不变，无论被交换的字符串的长度如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T04:24:44.357

`swap(int*& a, int*& b)`不是 C 而是 C++，它是通过引用而不是实际指针传递的。在这个例子中，你不会理解传递指针或传递变量。

想想你将如何交换 2 个整数和 2 个字符串，即。

```
int a=10, b=20; 
char *s1="ABC", *s2="PQRS";
swap_int(a, b);
swap_str(s1, s2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:27:18.927

使用 "[ ]" 表示存储一些值的内存块：

交换前：

```
a: [5]
b: [7] 
```

交换后：

```
a: [7]
b: [5] 
```

然后访问 a 将给出 7。

交换前：

```
pa: [&a] (that is, the address of a)
pb: [&b] 
```

交换后：

```
pa: [&b]
pb: [&a] 
```

那么访问pa会得到b的地址，解引用(*pa)会得到b的值。

对于 char **，我认为您描述的排序过程是对“char *”数组进行排序，这是 C 中的经典字符串。您可以将“char *”实体视为“字符串”对象。而“char ** ”是“string *”，应该被认为是“string”对象的数组。然后，您可以描述排序中涉及的分配，如上面的“a”和“b”场景。

# keyboard - MonoTouch.Dialog：滚动事件

> ID：11287727
> 
> 赞同：2
> 
> 时间：2012-07-02T04:16:49.577
> 
> 标签：keyboard, xamarin.ios, monotouch.dialog, uitableview

使用 MTD，我创建了一个`UITableViewDelegate`并将其附加到主`TableView`.

```
this.TableView.Delegate = new MyTableDelegate(); 
```

但是，委托上的任何事件都不会触发。

我的目标是在用户滚动表格时关闭键盘。（我对其他选择持开放态度）

```
//Never gets called
class MyTableDelegate:UITableViewDelegate
{
    public override void DraggingStarted(UIScrollView scrollView)
    {
        HideKeyboard();
    }
} 
```

# java - 在您的应用程序中查看网页？

> ID：11287729
> 
> 赞同：1
> 
> 时间：2012-07-02T04:17:16.307
> 
> 标签：java, android, android-webview

我需要构建一个 Android 应用程序，让您在我的应用程序中查看网页。我需要的不是浏览器而是我的应用程序。我找到了加载页面时的答案和一些选项。我想我会尝试分享我在这里找到的信息，当然，在我测试之后......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T04:17:17.023

首先需要将 INTERNET 权限添加到您的清单中。

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

然后，使用 WebView 类来显示网页。首先，创建一个包含 webview 的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent"
              android:orientation="vertical">
<WebView android:id="@+id/myWebView"
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent" />
</LinearLayout> 
```

在您的 Activity（可能是 onCreate）中，使用您创建的布局初始化 WebView 对象。下面是一个例子。私有 WebView 网络视图；

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.somelayout);

    String url = "http://bigdaddyapp.com";

    webview = (WebView) findViewById(R.id.myWebView);
    //next line explained below
    webview.setWebViewClient(new MyWebViewClient(this));
    webview.getSettings().setJavaScriptEnabled(true);
    webview.loadUrl(url);
} 
```

如果您想要特定选项，例如在加载页面时捕获页面，则需要一个内部 WebViewClient 类。例如，您可以使用 onPageStarted(...) 方法在 webview 中加载新页面时执行某些操作：

```
 public class MyWebViewClient extends WebViewClient {

  public MyWebViewClient() {
     super();
     //start anything you need to
  }

  public void onPageStarted(WebView view, String url, Bitmap favicon) {
     //Do something to the urls, views, etc.
  }
 } 
```

# objective-c - 确保 NSString 的数值适合 long long

> ID：11287734
> 
> 赞同：0
> 
> 时间：2012-07-02T04:17:42.623
> 
> 标签：objective-c, cocoa-touch, nsstring, validation

`UITextField`我想知道在这种情况下如何验证来自 a 的输入：

```
NSString *str = [UItextfield1 text];
long long value = [str longLongValue]; 
```

如何首先检查数字是否不会环绕，以及在传递之前是否为数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T04:31:14.087

不要先检查，后检查。[文档`longLongValue`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-SW2)说如果字符串无法转换， `value`将为0。如果它的大小太大，你会得到`LLONG_MAX`或`LLONG_MIN`

# android - 旋转图像并显示旋转角度

> ID：11287737
> 
> 赞同：2
> 
> 时间：2012-07-02T04:18:08.110
> 
> 标签：android, rotation, android-imageview, angle

我正在android中制作一个虚拟车速表。我使用 RotateAnimation() 来旋转速度计指针。

有没有办法在旋转过程中获得针的角度位置？也就是说，如果针从 0 度旋转到 360 度，我想在动画期间显示每个点的针角度。我使用以下代码来执行动画。

```
RotateAnimation rpmNeedleDeflection = new RotateAnimation(-32, 213, (float) 135, needle.getHeight()/2);
rpmNeedleDeflection.setDuration(1500);
rpmNeedleDeflection.setFillAfter(true);
needle.startAnimation(rpmNeedleDeflection);
needle.refreshDrawableState(); 
```

请提供任何帮助...在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T04:27:24.573

您可以尝试覆盖 applyTransformation

```
 RotateAnimation rpmNeedleDeflection = new RotateAnimation(fromDegrees, toDegrees, ...){
                protected void applyTransformation(float interpolatedTime,Transformation t) {
                    float currentDegree = fromDegrees+(toDegrees-fromDegrees)*interpolatedTime;
                    super.applyTransformation(interpolatedTime, t);
                };

            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:31:47.430

使用此代码将针保持在最终位置：

```
if(currentDegree==toDegrees)
        {
            needle.refreshDrawableState();
            RotateAnimation nrpmNeedleDeflection=new rotateAnimation(toDegrees,toDegrees...);
            nrpmNeedleDeflection.setDuration(1); 
            nrpmNeedleDeflection.setFillAfter(true);
            needle.startAnimation(nrpmNeedleDeflection);
         } 
```

# objective-c - CLGeocoder 反向地理编码位置。第一次在 [placemarks count = 0]？

> ID：11287738
> 
> 赞同：1
> 
> 时间：2012-07-02T04:18:12.327
> 
> 标签：objective-c, ios, geolocation, mkmapview, clgeocoder

我是 ObjC 的新手，我正在努力使用 CLGeocoder。我希望能够用于`reverseGeocodeLocation`获取一个字符串，该字符串包含当用户按下完成按钮时我传递给我的委托的用户位置。

所以用户触发了 MapViewController 的显示，我在第一次调用 reverseGeocodeLocation`viewDidLoad`时`[placemarks count = 0]`，我没有地标来获取我需要的信息。用户第二次触发 MapViewController 的显示时，placemarks 数组已被填充并且一切正常。

我怀疑这与 reverseGeocodeLocation 是一个异步调用有关 - 但我不知道如何解决这个问题。我曾尝试在线搜索，但似乎没有什么能帮助我理解我做错了什么以及如何解决这个问题。提前致谢。

```
@interface MapViewController ()
@property (strong, nonatomic) CLGeocoder *geocoder;
@property (readwrite, nonatomic) NSString *theLocationName;
@end

@implementation MapViewController
@synthesize mapView, geocoder, delegate = _delegate, theLocationName = _theLocationName;

- (void)viewDidLoad
{
[super viewDidLoad];

self.mapView.delegate=self;
self.mapView.showsUserLocation = YES;

[self theUserLocation];
}

-(void)theUserLocation
{
if (!geocoder)
{
    geocoder = [[CLGeocoder alloc] init];
}

MKUserLocation *theLocation;
theLocation = [self.mapView userLocation];

[geocoder reverseGeocodeLocation:theLocation.location 
               completionHandler:^(NSArray* placemarks, NSError* error)
 {
     if ([placemarks count] > 0)
     {
         CLPlacemark *placemark = [placemarks objectAtIndex:0];

         [self setTheLocationName: placemark.locality];

     }
 }];

- (IBAction)done:(id)sender 
{

[[self delegate] mapViewControllerDidFinish:self locationName:[self theLocationName]];

}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:38:43.197

这不是您问题的确切答案，但是，如果您可以切换到除 CLGeocoder 之外的其他解决方案，则以下功能可以帮助您从给定的纬度、经度获取地址

```
#define kGeoCodingString @"http://maps.google.com/maps/geo?q=%f,%f&output=csv" //define this at top

-(NSString *)getAddressFromLatLon:(double)pdblLatitude withLongitude:(double)pdblLongitude
{
    NSString *urlString = [NSString stringWithFormat:kGeoCodingString,pdblLatitude, pdblLongitude];
    NSError* error;
    NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSASCIIStringEncoding error:&error];
    locationString = [locationString stringByReplacingOccurrencesOfString:@"\"" withString:@""];
    return [locationString substringFromIndex:6];
} 
```

信用：[这个问题的选定答案](https://stackoverflow.com/questions/11288815/how-to-get-the-current-location-name-as-a-string-when-we-know-the-latitude-and)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:00:24.147

> 因此，用户触发了 MapViewController 的显示，我在 viewDidLoad 中调用了 reverseGeocodeLocation，但第一次调用了 [placemarks count = 0]，并且我没有地标来获取我需要的信息。用户第二次触发 MapViewController 的显示时，placemarks 数组已被填充并且一切正常。

这不是因为调用是异步的 - 这是因为您第一次调用`theUserLocation`实际位置不可用。获取用户的位置不是即时的——它需要时间。但是，您会*在地图加载后立即*询问用户的位置，这在大多数情况下是行不通的。

您需要做的是挂钩`MKMapViewDelegate`方法，这些方法会在位置更新时为您提供回调。您可以使用它来检查位置的准确性，并确定它是否足够准确，以便您进行反向地理定位。

# c++ - 将 Boost::system 库与 OpenNI makefile 链接

> ID：11287745
> 
> 赞同：0
> 
> 时间：2012-07-02T04:19:43.657
> 
> 标签：c++, boost, makefile, boost-asio, openni

我正在尝试使用 C++ Boost 库将我从 Kinect 获得的一些深度数据写入串行端口。为了做到这一点，我需要将适当的库与这个预先编写的 Makefile 链接起来。我使用 boost/asio 编写了一个基本程序来了解这些库，为了编译，我必须链接到位于 /usr/local/lib 中的 boost_system 库并包含来自 /usr/local/include/ 的头文件促进。我想在我的 OpenNI 代码中使用它，我只需要从这个 Makefile 建立相同的连接。

```
 # take this file's dir
    COMMON_CPP_MAKE_FILE_DIR = $(dir $(lastword $(MAKEFILE_LIST)))

    include $(COMMON_CPP_MAKE_FILE_DIR)CommonDefs.mak

    # define a function to figure .o file for each source file (placed under intermediate directory)
    SRC_TO_OBJ = $(addprefix ./$(INT_DIR)/,$(addsuffix .o,$(notdir $(basename $1))))

    # create a list of all object files
    OBJ_FILES = $(call SRC_TO_OBJ,$(SRC_FILES_LIST))

    # define a function to translate any source file to its dependency file (note that the way we create
    # dep files, as a side affect of compilation, always puts the files in the INT_DIR with suffix .d)
    SRC_TO_DEP = $(addprefix ./$(INT_DIR)/,$(addsuffix .d,$(notdir $(basename $1))))

    # create a list of all dependency files
    DEP_FILES = $(call SRC_TO_DEP,$(SRC_FILES_LIST))

    # older version of gcc doesn't support the '=' symbol in include dirs, so we replace it ourselves with sysroot
    INC_DIRS_FROM_SYSROOT = $(patsubst =/%,$(TARGET_SYS_ROOT)/%,$(INC_DIRS))

    # append the -I switch to each include directory
    INC_DIRS_OPTION = $(foreach dir,$(INC_DIRS_FROM_SYSROOT),-I$(dir)) -I/usr/local/include/boost

    # append the -L switch to each library directory
    LIB_DIRS_OPTION = $(foreach dir,$(LIB_DIRS),-L$(dir)) -L$(OUT_DIR) -L/usr/local/lib 

    # append the -l switch to each library used
    USED_LIBS_OPTION = $(foreach lib,$(USED_LIBS),-l$(lib)) -lboost_system

    # append the -D switch to each define
    DEFINES_OPTION = $(foreach def,$(DEFINES),-D$(def))

    # tell compiler to use the target system root
    ifdef TARGET_SYS_ROOT
        CFLAGS += --sysroot=$(TARGET_SYS_ROOT)
        LDFLAGS += --sysroot=$(TARGET_SYS_ROOT)
    endif

    # set Debug / Release flags
    ifeq "$(CFG)" "Debug"
        CFLAGS += -O0 -g
    endif
    ifeq "$(CFG)" "Release"
        CFLAGS += -O2 -DNDEBUG
    endif

    CFLAGS += $(INC_DIRS_OPTION) $(DEFINES_OPTION)
    LDFLAGS += $(LIB_DIRS_OPTION) $(USED_LIBS_OPTION)

    # some lib / exe specifics
    ifneq "$(LIB_NAME)" ""
        OUTPUT_NAME = lib$(LIB_NAME).so
        CFLAGS += -fPIC -fvisibility=hidden
        ifneq ("$(OSTYPE)","Darwin")
            LDFLAGS += -Wl,--no-undefined
            OUTPUT_NAME = lib$(LIB_NAME).so
            OUTPUT_COMMAND = $(CXX) -o $(OUTPUT_FILE) $(OBJ_FILES) $(LDFLAGS) -shared
        else
            LDFLAGS += -undefined error
            OUTPUT_NAME = lib$(LIB_NAME).dylib
            OUTPUT_COMMAND = $(CXX) -o $(OUTPUT_FILE) $(OBJ_FILES) $(LDFLAGS) -dynamiclib -headerpad_max_install_names
        endif
    endif
    ifneq "$(EXE_NAME)" ""
        OUTPUT_NAME = $(EXE_NAME)
        OUTPUT_COMMAND = $(CXX) -o $(OUTPUT_FILE) $(OBJ_FILES) $(LDFLAGS)
    endif
    ifneq "$(SLIB_NAME)" ""
        CFLAGS += -fPIC
        OUTPUT_NAME = lib$(SLIB_NAME).a
        OUTPUT_COMMAND = $(AR) -cq $(OUTPUT_FILE) $(OBJ_FILES)
    endif

    define CREATE_SRC_TARGETS
    # create a target for the object file (the CXX command creates both an .o file
    # and a .d file)
    ifneq ("$(OSTYPE)","Darwin")
    $(call SRC_TO_OBJ,$1) : $1 | $(INT_DIR)
        $(CXX) -MD -MP -MT "$(call SRC_TO_DEP,$1) $$@" -c $(CFLAGS) -o $$@ $$<
    else
    $(call SRC_TO_OBJ,$1) : $1 | $(INT_DIR)
        $(CXX) -c $(CFLAGS) -o $$@ $$<
    endif
    endef

    #############################################################################
    # Targets
    #############################################################################
    .PHONY: clean-objs clean-defs

    include $(COMMON_CPP_MAKE_FILE_DIR)CommonTargets.mak

    # create targets for each source file
    $(foreach src,$(SRC_FILES_LIST),$(eval $(call CREATE_SRC_TARGETS,$(src))))

    # include all dependency files (we don't need them the first time, so we can use -include)
    -include $(DEP_FILES)

    $(OUTPUT_FILE): $(OBJ_FILES)
        $(OUTPUT_COMMAND)

    clean-objs:
        rm -rf $(OBJ_FILES)

    clean-defs:
        rm -rf $(DEP_FILES)

    clean: clean-objs clean-defs 
```

我补充说：

```
-I/usr/local/include/boost 
```

到 INC_DIRS_OPTION

```
-L/usr/local/lib 
```

到 LIBS_DIRS_OPTION，和

```
-lboost_system 
```

到 USED_LIBS_OPTION （asio 依赖于 boost 系统库来生成某种错误）

我收到此错误：

```
c++ -o ../Bin/x64-Release/Sample-NiSimpleRead ./x64-Release/NiSimpleRead.o -arch i386 -arch x86_64 -L../../Lib -L../Bin/x64-Release  -lOpenNI -lboost_system 
ld: warning: ignoring file /usr/local/lib/libboost_system.dylib, file was built for unsupported file format which is not the architecture being linked (i386)
Undefined symbols for architecture i386:
  "boost::system::generic_category()", referenced from:
      __GLOBAL__I_a in NiSimpleRead.o
  "boost::system::system_category()", referenced from:
      __GLOBAL__I_a in NiSimpleRead.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [../Bin/x64-Release/Sample-NiSimpleRead] Error 1 
```

我尝试将 lib 目录添加到我的 DYLD_LIBRARY_PATH 中，但它什么也没做。我还尝试创建某种共享 (*.so) 库，首先使用 NiSimpleRead.o 二进制文件与 libboost_system.a 文件相结合，这带来了很多错误。然后尝试将 boost_system.a 文件本身更改为 .so，这也没有做任何事情。对此的任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:17:20.713

您的问题似乎是您只有 64 位 Boost，并且您正在尝试制作通用（32 位和 64 位）二进制文件。`-arch i386`确保在 32 位和 64 位版本中安装依赖项，或者将其从构建说明中丢弃。

# javascript - 让 dropdownchecklist 与 knockoutJS 一起使用

> ID：11287747
> 
> 赞同：0
> 
> 时间：2012-07-02T04:19:56.340
> 
> 标签：javascript, jquery, knockout.js

我正在尝试让[dropdownchecklist](http://code.google.com/p/dropdown-check-list/) jquery 插件与 ko 一起使用。我已经连接了自定义绑定处理程序，但下拉菜单不会填充选项。请检查我的小提琴：http: [//jsfiddle.net/amitava82/wMH8J/11/](http://jsfiddle.net/amitava82/wMH8J/11/)

感谢你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:07:32.303

这是因为您在绑定 KnockoutJS**之前**创建了下拉列表。这个下拉菜单是如何工作的？它创建了额外的*div*和*span*，它们复制了*select*的内容并创建了漂亮的列表。之后应用绑定并修改选择（应该如此），但下拉列表**没有**更新，因为这个库是静态的，即它仅在调用时复制*选择的内容。*

我已经更新了你的[jsFiddle](http://jsfiddle.net/wMH8J/12/)，所以你可以看到临时修复。我的意思是它现在可以工作了，绑定是**在**创建下拉列表之前应用的。唯一的问题是更改`options`字段`viewModel`不会影响下拉菜单。您可能需要做的是使用[subscribe 方法](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)。您必须监控`options`字段的更改，如果发生更改，您必须重新创建下拉菜单。至少这是一个简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:29:15.973

@freakish 答案适用于大多数静态内容，但对于使用模板的任何动态内容，例如`if`或`foreach`绑定，或者您需要支持基础数据更新，例如“突然”更多复选框选项可用，它将不起作用。

[一个非常简单的`$.button`绑定](http://jsfiddle.net/stofte/CnCFz/) 示例，`apply`可用于包装更简单的 jQuery 调用。`controls`添加更多成员以使它们在绑定中可用是一件简单的事情。

然而，jQuery Dropdown Check List 的情况有点棘手，因为您显然想使用内置的`options`处理程序，但您需要在处理程序运行`$.dropdownchecklist`后`options`运行，因为它创建了 jQuery 所依赖的 DOM 元素。[通过包装内置的`options`处理程序](http://jsfiddle.net/stofte/jwjcZ/2/)，我们总是在正确的上下文中被调用。

根据我的使用经验（我们的项目使用了大约 10-15 个自定义绑定），您将平均大约 10-20 行实际 JS。如果你开始膨胀到 +100 行，我发现重构和重新思考是个好主意。我希望这对一些人有所帮助:-) 我已经在工作中的一个主要 UI 实现项目中使用 Knockout 几个月了，我真的学到了很多东西，我对这些东西感到惊讶。

# c - 解释c程序的输出

> ID：11287750
> 
> 赞同：1
> 
> 时间：2012-07-02T04:20:42.800
> 
> 标签：c

```
#include<stdio.h>
void main(){

int x,y,z;
x=y=z=1;
z=++x||++y&&++z;
printf("%d %d %d \n",x,y,z);
getch();
} 
```

输出为 2 1 1 ！我无法理解为什么...如果我们按照运算符的优先级进行，则无法解释。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T04:24:09.557

逻辑`or`( `||`) 引入了一个序列点。评估其左侧。然后，当且仅当它产生 0/false 时，才评估右侧。

在这种情况下，`++x`结果为 2，因此永远不会评估右侧。反过来，这意味着`y`并`z`保持为`1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T04:22:42.517

`||`操作员短路。首先计算左侧操作数，如果计算结果为非零，则永远不会计算右侧操作数。这也防止了对右操作数求值的副作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T04:23:38.230

当你使用 || 运算符，如果 LHS 结果为真，则最终结果为真。所以，++x 结果是 1，最终结果是 ++x = 2 和 z = 1 & y = 1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T04:24:08.393

布尔`||`短路。也就是说，一旦它找到一个真正的值，它就会停止评估。因此，在 z 赋值中发生的所有事情 x 递增，然后 z 设置为 1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T09:45:53.023

上述答案的附录：

在 C/C++ 中，这些运算符是短路运算符，即 '&&'、'||' 和“？”（条件运算符）。

帮自己一个忙，看看这个[关于短路评估的优秀 wiki 页面](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。不要错过文章的[常见用法](http://en.wikipedia.org/wiki/Short-circuit_evaluation#Common_usage)部分。

# css - 平衡柱

> ID：11287751
> 
> 赞同：1
> 
> 时间：2012-07-02T04:21:00.177
> 
> 标签：css, spacing

我有一些内容设置为 3 列，但是当它在 Chrome 中从列到列换行时，它会在下一列的顶部添加边距，这在某种程度上是有道理的，但看起来很糟糕。

这是我所说的一个例子：http: [//www.sanguinediabetes.com/wp/concept/](http://www.sanguinediabetes.com/wp/concept/)

我该如何设置它的样式，以便在某些列的顶部没有丑陋的间隙，但在中间列结束的段落之间仍然有空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:05:47.083

您所看到的可以说是多列元素的正确行为。您在每个段落上设置的底部边距将下推后续段落，即使在这些段落之前有分栏符也是如此。是的，可以说这很奇怪，但是，这个布局模型还有更大的问题需要现在修复。

解决您的问题的一种方法是删除所有段落边距并在某些选定段落之后强制分栏。去年[修订的规范草案](http://www.w3.org/TR/css3-multicol/#column-breaks)提供了`column-break`声明。但到目前为止支持几乎为零，[关于该主题的 MDN 文章](https://developer.mozilla.org/en/CSS/CSS3#Multi-column_layout)不存在，而且 chrome 甚至不假装支持它。基本上，你处于一个相当新的领域，而且工具还不完全在那里。

当我在这里时，您的布局还有其他紧迫的问题。要查看最基本的，请尝试将视口调整为窄，大约 500 像素。您的列变得非常薄且难以阅读，实际上只是一堆单独的单词。考虑到你的文字说“手机帮助普及了界面设计的基本概念：用户不应该有责任通过复杂的程序和隐藏的选项来实现简单的任务，甚至是复杂的任务。它是软件的设计职责是让每个操作都简单、明显和快速。”？这有点好笑。你试过用手机看这个吗？考虑到内容，我会推荐它。

`Column-count`很棒，但是如果您正在寻找任何真正的浏览器兼容性，那么现在使用好的旧浮动列会更好。*[也许尝试一种真正的布局](http://www.positioniseverything.net/articles/onetruelayout/examples)*的一些变化。

# ruby-on-rails - 访问页面后页面内容不完整

> ID：11287754
> 
> 赞同：0
> 
> 时间：2012-07-02T04:21:09.650
> 
> 标签：ruby-on-rails, rspec, capybara

我是水豚的新手。我尝试使用“访问 root_path”，然后检查 spicified 标记是否正确呈现。首先是“ElementNotFound”错误。我使用“puts page.html”来查看响应页面内容。我发现只有页面的静态部分被渲染。并且由 rails(<%= %>) 动态创建的所有其他部分都不是。顺便说一句，我把这个测试放在请求文件夹中。所有 Capybara 配置都是默认配置。

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:21:08.863

尝试在测试中使用 lanchy gem 和 save_and_open_page。检查[这个帖子](http://techiferous.com/2010/04/using-capybara-in-rails-3/)

# 3d - OpenGL ES 2.0 - 将模型视图 mat4 作为属性变量传递

> ID：11287755
> 
> 赞同：1
> 
> 时间：2012-07-02T04:21:19.007
> 
> 标签：3d, opengl-es-2.0

为了在 OpenGL ES 2.0 中实现几何实例化，我正在考虑将 mat4 作为属性传递。由于属性是每个顶点数据，我是否需要为同一个三角形的每个顶点传递相同的 mat4 三次（因为模型视图在三角形的顶点上保持不变）。

这相当于发送到 GPU 的大量额外数据（2 个额外顶点*16 个浮点数*（三角形数）额外数据量）。

或者我应该每个三角形只发送一次mat4？但是由于属性被定义为“每个顶点”数据，这怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T05:04:45.633

没有“每个三角形”属性这样的东西。如果你想将它们作为属性发送，它是每个顶点的。

另一种选择是将所有矩阵上传到一个统一的数组中，然后每个顶点都有一个整数索引来确定要查找的矩阵。这将大大减少您的流媒体开销。

# android - BitmapFactory.decodeByteArray 返回 null

> ID：11287756
> 
> 赞同：0
> 
> 时间：2012-07-02T04:21:26.230
> 
> 标签：android, base64

看起来挺好的？

```
public static Bitmap stringToImage(String base64) {

    byte[] decodedString = decode(base64, Base64.DEFAULT);
    return BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
} 
```

如果我的 base64 字符串以“data:image/jpeg;base64”开头，则此代码返回 null。但是如果我删除这个前缀 - 这个代码工作正常！如何解决这个问题呢？

我测试了我的 base64 字符串，它工作正常（评论 1[如何在 HTML 中显示 Base64 图像？](https://stackoverflow.com/questions/8499633/display-base64-image-in-html)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:48:22.083

除非我感到困惑，否则“data:image/jpeg;base64”不是 base64 字符串的有效部分。如果是这样的话，难怪它没有正确解码。如果它导致问题，只需在解码之前将其从字符串的头部删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:39:46.167

您可以在将字符串传递给函数之前使用

```
 String base64="";
base64.replaceAll("data:image/jpeg;base64,", ""); 
```

请根据您的字符串更改给定的字符串

# html - div 继续在其他 div 之上，即使它的 z-index 较低？

> ID：11287759
> 
> 赞同：0
> 
> 时间：2012-07-02T04:22:26.483
> 
> 标签：html, css, z-index

我的页面在[这里](http://www.parkroo.com/k2/choose/spelling/)，我的样式表在[这里](http://www.parkroo.com/k2/style.css)，并且多次说“你好”的文本正在浏览导航菜单，即使它的 z-index 较低。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:30:33.620

主要内容 div 没有越过导航，它只是看起来像它，因为导航上没有背景颜色，所以它是透明的。

如果您为导航菜单提供背景颜色，您应该会看到它在向下滚动时隐藏了文本。

我只在 Chrome 中测试过这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T04:31:05.460

`#nav`为例如设置背景颜色`#212121`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:31:39.337

嘿，现在你只需定义

```
ul#navmenu{
z-index:2;
} 
```

# asp.net-mvc-3 - MVC3 actionlink 将 ID 附加到对象

> ID：11287764
> 
> 赞同：1
> 
> 时间：2012-07-02T04:22:52.400
> 
> 标签：asp.net-mvc-3, actionlink

我有一个带有数据的对象视图和该视图上的一个按钮。用户可以查看对象信息并单击按钮转到新的视图表单，此时他可以输入信息来创建项目。我的挑战是，我将如何在前一个视图上附加对象的 ID 以将其关联并附加到他们创建和提交的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:32:13.857

```
@Html.ActionLink("Add","AddNotes","Object",new {@id=5},null) 
```

这将创建一个带有 querystring 的标签`?id=5`。（您可以将硬编码的 5 替换为您视图中的动态值）

有一个属性可以为您`ViewModel/Model`的创建表单保留此值。

```
public class CreateNoteViewModel
{
  public int ParentId { set;get;}
  public string Note { set;get;}
  //Other properties also
} 
```

在创建第二个视图的 GET`action`方法中阅读此内容并设置 ViewModel/Model 的该属性的值。

```
public ActionResult AddNotes(int id)
{
  var model=new CreateNoteViewModel();
  model.ParentId=id;
  return View(model);
} 
```

在您的强类型视图中，将此值保存在隐藏变量中。

```
@model CreateNoteViewModel
@using(Html.BeginForm())
{
 @Html.TextBoxFor(Model.Note)
 @Html.HiddenFor(Model.ParentId)
 <input type="submit" />
} 
```

现在在您的`HttpPost`操作中，您可以从 POSTED 模型的 ParentId 属性中获取对象 ID

```
[HttpPost]
public ActionResult AddNotes(CreateNoteViewModel model)
{
 if(ModelState.IsValid()
 {
   //check for model.ParentId here
   // Save and redirect
 }
 return View(model); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T04:51:53.593

您可以使用隐藏的输入和视图数据，PSEUDOCODE。 ***注意***您可能必须使用带有视图数据的字符串并在控制器中转换回您的 id。有关 ViewData/ViewBag（和缺点）的基本说明，请参阅[此链接](https://stackoverflow.com/a/6023313/1166147)。

您需要将数据从第一个操作（控制器）传递到视图。控制器基类有一个“ViewData”字典属性，可用于填充要传递到视图的数据。您可以使用键/值模式将对象添加到 ViewData 字典中。

控制器

```
 public ActionResult yourfirstaction()
      {
            //assign and pass the key/value to the view using viewdata
            ViewData["somethingid"] = ActualPropertyId; 
```

在视图中 - 获取值与隐藏输入一起使用以传递回下一个控制器以呈现下一个视图

```
 <input type="hidden" name="somethingid" value='@ViewData["somethingid"]' id="somethingid" /> 
```

控制器

```
 public ActionResult yournextaction(string somethingid)
      {
            //use the id
            int ActualPropertyId =  Convert.ToInt32(somethingid); 
```

# hibernate - 正确的休眠映射

> ID：11287766
> 
> 赞同：0
> 
> 时间：2012-07-02T04:23:00.700
> 
> 标签：hibernate, hbm

我有五个表和它们各自的列

**大学**

```
 - id_university (pk)
  - id_country (pk)   ---- FK ---- country.id_country
  - univ_code
  - univ_name
  - id_update  FK ---- update.id_update 
```

**研究所**

*   id_institute (pk)
*   id_country (pk) ---- FK ---- country.id_country
*   id_univ
*   id_address FK ---- update.id_update

**地址**

```
- id_address
    - id_country (pk) ---- FK ---- country.id_country
    - addressfield 
```

**国家**

```
- id_country 
```

**更新**

```
- id_update 
        id_country (pk) ---- FK ---- country.id_country 
```

这些是 hbm 映射

```
<class name="xxxxxx" table="university">
        <id name="id_university " column="id_university ">
            <generator class="increment" />
        </id>

        <property name="id_country ">
            <column name="id_country " />
        </property>
        <property name="univ_code">
            <column name="univ_code" />
        </property>
        <property name="univ_name">
            <column name="univ_name" />
        </property>
        <property name="id_update">
            <column name="id_update" />
        </property>
</class>

<class name="xxxxxx" table="institute">
        <id name="id_institute " column="id_institute ">
            <generator class="increment" />
        </id>

        <property name="id_country ">
            <column name="id_country " />
        </property>
        <property name="id_univ">
            <column name="id_univ" />
        </property>
        <property name="id_address">
            <column name="id_address" />
        </property>
        <property name="id_update">
            <column name="id_update" />
        </property>
</class>

<class name="xxxxxx" table="address">
        <id name="id_address " column="id_address ">
            <generator class="increment" />
        </id>

        <property name="id_country ">
            <column name="id_country " />
        </property>
        <property name="addressfield">
            <column name="addressfield" />
        </property>
</class>

<class name="xxxxxx" table="address">
        <id name="id_address " column="id_address ">
            <generator class="increment" />
        </id>

        <property name="id_country ">
            <column name="id_country " />
        </property>
        <property name="addressfield">
            <column name="addressfield" />
        </property>
</class> 
```

由于存在外键关系，有人可以指导我使用休眠映射。我无法获得正确的映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:51:51.953

由于表的主键不止一列，因此您需要将它们映射为 compositeId

```
<composite-id>
  <key-property name="id" column="id_university" />
  <key-reference name="country" column="id_country" />
</id> 
```

除了 id 本身是唯一的，那么将它们映射为 id 会更容易。引用是这样映射的。

```
<many-to-one name="country" column="id_country" /> 
```

# c# - 本机 C++ 通过代理 C++ 托管 dll 使用 C# dll

> ID：11287767
> 
> 赞同：3
> 
> 时间：2012-07-02T04:23:25.013
> 
> 标签：c#, dll, c++-cli, clr

这是相当复杂的，所以请耐心等待。我有一个用本机（仅限 Win32）C++ 编码的第 3 方程序（“目标”）。作为目标设计的一部分，它实现了一个 dll 插件系统。本地 DLL 当放置在程序的“ext”目录中时，由目标加载。然后目标调用每个 DLL 提供的四种方法（Initialize、SendHook、RecvHook、Terminate）。正如您可能从函数名称中猜到的那样，加载项挂钩目标中的某些函数。我没有目标的源代码。

其中一个加载项是旧的和错误的 - 更不用说令人困惑而且相当丑陋。它是用 Delphi 编写的（当然，编译为 win32 DLL）。在过去的几周里，我一直在增强插件并将其翻译为 C#（我将其称为“扩展”）。现在已经完成了，所以我将注意力转向让目标加载扩展（构建为类库）。

显然，目标（本机 C++）无法直接加载扩展（托管 C#）。因此，在研究之后，似乎我只需要一个“代理”DLL（用 VC++ 编写并支持 CLR）来加载我的扩展，然后负责将方法调用从目标传递到扩展。

“简单的。” 是的，对。我现在比吃吃喝玩乐袋里的变色龙还要困惑。我已经看到了关于使用 COM 的东西，这绝对是我需要避免的，无论是在性能还是进程内存权限方面，因为扩展将调用一些方法（通过句柄传递给代理）。此外，我还看到了有关 tlb 和 #import 指令的内容。这似乎也不是正确的方法。

我看到这篇文章[https://sites.google.com/site/srinivasnzd/csincppviacpp-cli](https://sites.google.com/site/srinivasnzd/csincppviacpp-cli)似乎终于走上了正轨。事实上，我可以从 C++ 代理调用我的托管 C# 就好了。作为奖励，*看起来*（我还没有能够用实际目标对其进行测试）这些`__declspec(dllexport)`函数可以通过代理适当地调用它们的托管对应物。但现在问题已经开始浮出水面。

*   纯本机进程能否加载启用 CLR 的 DLL？我见过有人谈论基本上从启用 CLR 的代码中创建一个静态库，然后将其与纯本机代码链接到“部分托管、部分本机”代理 DLL。但在那一点上，混乱开始出现，我不确定这个话题是否适用于我正在尝试做的事情。
*   如何将 DWORD 地址编组到 IntPtr （然后将其解组到 C# 端的函数指针）
*   我看到提到 AppDomains。这是我需要担心的事情吗？
*   我假设我的代理 DLL 需要在同一文件夹中运行托管扩展 DLL。我需要做一些特殊的事情来加载它，还是 CLR 和链接器会处理这个问题？
*   除了输出 DLL，我还得到了扩展名为“.exp”、“.ilk”和“.lib”的文件。我假设这些是用于静态链接的，当我使用 DLL 时我可以忽略它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T05:50:52.133

看看这个[模板](https://sites.google.com/site/robertgiesecke/)，在不使用 C++ 包装器的情况下，在一些帮助下导出 C# 代码。
不幸的是，开箱即用没有 DllExport 属性，因此您需要一个 C++ 包装器，或者您需要修改 IL 代码以执行导出。
编组地址没有问题，只需小心 C# 端的函数指针，因为您始终需要确保存在引用以使它们远离 GC 收集器。如果您保留一个静态引用，这是最简单的 - GC 无法在非托管代码中看到对函数指针的引用，因此它可能会清理它。
如果您有多个 c# 模块，应用程序域将很重要——如果它们共享相同的代码，这将成为一个更大的问题。
exp 来自链接器，ilk 和 lib 与链接器相关，因此我希望您不需要复制它们，但在调试时可能需要它们。

# javascript - 刷新内容 portlet 的标记

> ID：11287768
> 
> 赞同：0
> 
> 时间：2012-07-02T04:23:25.247
> 
> 标签：javascript, jquery, html, liferay, portlet

我的 Liferay 有问题。我正在执行以下操作：

```
function deleting() {
    <portlet:actionURL var="deletePolyURL"> 
        <portlet:param name="jspPage" value="/deletePoly.jsp" /> 
    </portlet:actionURL>  

    <portlet:renderURL var="listingURL"> 
        <portlet:param name="jspPage" value="/listing.jsp" /> 
    </portlet:renderURL>

    $.post(
        "<%=deletePolyURL%>",
        {
            ids:ch.toString()
        },
        function(per) {
              $("#WRAPlist").load("<%=listingURL%>");
               }
    );
} 
```

已`<div>`重新加载，但在此`<div>`整个 Liferay 页面被加载，而不仅仅是我的页面，请参见图像的右侧。

![在此处输入图像描述](../Images/97820e4880d1e3a7b486f93e54824c4b.png)

我做错了什么？

deletePoly.jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>

<%
            {
              //String st = request.getParameter("ids");
              String st = ParamUtil.getString(request,"ids");
              out.println("NE TORT");
                        String[] id_str;
                        id_str=st.split(",");
              Class.forName("org.postgresql.Driver");
                Connection connect= null;
                connect = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgis","postgres","123456");
                Statement state = null;
                state = connect.createStatement();
                int id;
                String sql1="";
                String sql2="";
                for(int i=0;i<id_str.length;i++)
                {
                    id=Integer.parseInt(id_str[i]);
                    sql1="DELETE FROM filestatus WHERE id=?";
                    PreparedStatement stmt1 = connect.prepareStatement(sql1);
                    stmt1.setInt(1, id);
                    stmt1.execute();
                    sql2="DELETE FROM filedata WHERE id=?";
                    PreparedStatement stmt2 = connect.prepareStatement(sql2);
                    stmt2.setInt(1, id);
                    stmt2.execute();
                }
                state.close();
                connect.close();
                Integer per=1;
                out.println(per);
              }

         %> 
```

列表.jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<%
Class.forName("org.postgresql.Driver");
Connection conn= null;
conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgis","postgres","123456");
Statement sta = null;
sta = conn.createStatement();
String fileName= "";
Integer fileId=null;
String fileStatus ="";

ResultSet r=sta.executeQuery("SELECT id, name, status FROM filestatus");
String acc="Принят                   ";
while(r.next())
{
    fileId=r.getInt("id");
    fileName=r.getString("name");
    fileStatus=r.getString("status");   
    if(fileStatus.equalsIgnoreCase(acc))
    {
        out.write("<input type='checkbox' class='myclass' id='check"+fileId+"' name='"+fileName+"' value='"+fileId+"'/><label for=check"+fileId+">"+fileName+"</label><br>");   
  }
    else
    {
        out.write("<input type='checkbox' class='myclass' id='check"+fileId+"' name='"+fileName+"' value='"+fileId+"'/><label for=check"+fileId+" style='color:blue'>"+fileName+"</label><br>");

    }
}
r.close();
sta.close();
conn.close();

%>
</body>
</html> 
```

我刷新问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:00:36.077

如果您不想通过资源处理来自己处理整个 Ajax 调用，您还可以将回复限制为仅包含 portlet，而不是整个页面：

```
<%@ page import="com.liferay.portal.kernel.portlet.LiferayWindowState" %>

<portlet:actionURL var="deletePolyURL" windowState="<%=LiferayWindowState.EXCLUSIVE.toString() %>"> 
    <portlet:param name="jspPage" value="/deletePoly.jsp" /> 
</portlet:actionURL> 
```

看看这是否有帮助 - 否则您应该`<portlet:resourceURL>`按照 Prakash 的建议使用（并在您的 portlet 的资源服务方法中处理该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:40:13.273

我建议您需要 a`<portlet:resourceURL>`而不是 renderURL 来加载 ，`jsp`因为它是一个 ajax 请求，并且您需要使用`serveResource`portlet 类中的方法来加载`listing.jsp`.

```
<portlet:resourceURL var="listingURL"> 
    <portlet:param name="jspPage" value="/listing.jsp" /> 
</portlet:resourceURL> 
```

希望这可以帮助。

# php - mysql连接表

> ID：11287770
> 
> 赞同：3
> 
> 时间：2012-07-02T04:23:38.423
> 
> 标签：php, mysql, database, database-design

我有 4 张桌子。

1.  具有用户的表 A - ( `user_id, username, and name`)
2.  具有标记的表 B - ( `token_id, user_id`)。每个用户有 10 个令牌条目。每个令牌仅分配给一个用户。一个用户有多个令牌 (10)
3.  表 C 即街机游戏 - ( `arcade_id, token_id, name, levels, lives`)。一个代币只能分配给一个街机游戏。
4.  表 D 即奖品 - ( `prize_id, token_id, name, length, width, height`)。一个奖品只能分配一个代币。

代币被分配给街机游戏或奖品或什么都没有，但不能同时分配给两者。

我的问题是如何设置 MySQL 连接查询来确定给定用户的哪些令牌已分配给游戏或奖品或尚未分配。我的桌子布局是最优的吗？或者您对其他布局有什么建议？

这是我的表：

```
mysql> select * from users;

+---------+--------+
| user_id | name   |
+---------+--------+
|       1 | User 1 |
|       2 | User 2 |
|       3 | User 3 |
|       4 | User 4 |
+---------+--------+

mysql> select * from tokens;

+----------+---------+
| token_id | user_id |
+----------+---------+
|        1 |       1 |
|        2 |       1 |
|        3 |       2 |
|        4 |       2 |
|        5 |       2 |
|       11 |       2 |
|        6 |       3 |
|        7 |       3 |
|       10 |       3 |
|        8 |       4 |
|        9 |       4 |
+----------+---------+

mysql> select * from prizes;

+----------+----------+-----------+
| prize_id | token_id | prizename |
+----------+----------+-----------+
|        1 |        4 | prize 1   |
|        2 |        7 | prize 2   |
|        3 |        8 | prize 3   |
|        4 |        9 | prize 4   |
+----------+----------+-----------+

mysql> select * from arcade;

+-----------+----------+----------+
| arcade_id | token_id | gamename |
+-----------+----------+----------+
|         1 |        1 | game 1   |
|         2 |        2 | game 2   |
|         3 |        3 | game 3   |
|         4 |        5 | game 4   |
|         5 |       11 | game 6   |
+-----------+----------+----------+ 
```

我想要一个 SQL 查询，我可以在其中获得以下信息：

对于用户 1，他们有 2 个令牌 - 令牌 id 1 分配给游戏 1，令牌 id 2 分配给游戏 2

或者对于用户 2 - 他们有 4 个令牌 - 令牌 ID 3 分配给游戏 3，令牌 ID 4 分配给奖品 1，令牌 ID 5 分配给游戏 4。

或者对于用户 3 - 他们有 3 个代币 - 代币 ID 6 尚未分配，代币 ID 7 是奖品 2，代币 ID 10 尚未分配

等等。

我想建立一个这样的 MySQL 查询字符串

```
Select **** 
  from ***** 
 Where user_id = 1 
```

我在哪里指定用户 ID 并获取上面的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:54:57.733

试试这个查询，但如果有一些数据我可以检查，尽管我已经检查了虚拟数据

```
select
  t.token_id,
  IFNULL(g.game,'') as Game,
  IFNULL(p.name,'') as Prize,
  case when g.game != '' then 'Assigned' when p.name != '' then 'Assigned' else 'Not assigned yet' end as `Status`
from token as t
  left join (select *
         from games
         where token_id not in(select
                     token_id
                   from prize)) as g
    on g.token_id = t.token_id
  left join (select *
         from prize
         where token_id not in(select
                     token_id
                   from games)) as p
    on p.token_id = t.token_id 
```

EDITED
那么这应该是最简单的事情了

```
select *
from `user`
  left join token
    on user.user_id = token.user_id
  left join games
    on games.token_id = token.token_id
  left join prize
    on prize.token_id = token.token_id
where user.user_id = 1 
```

# jquery - JS 显示/隐藏 DIV 切换器捕捉到页面顶部

> ID：11287776
> 
> 赞同：0
> 
> 时间：2012-07-02T04:25:00.003
> 
> 标签：jquery, toggle, href, show-hide

我正在使用在[这里](http://css-tricks.com/snippets/javascript/showhide-element/#comment-179741 "这里")找到的 Java Script Show/Hide DIV Toggler 。它有效，但副作用是每次单击切换都会将我带到页面顶部。签入 FF 和 Chrome，两种浏览器的交易相同。我无法确定它是否正在重新启动页面，但我知道它没有重新加载它。

这是脚本：

```
<script type="text/javascript">
<!--
    function toggle_visibility(id) {
       var e = document.getElementById(id);
       if(e.style.display == 'block')
          e.style.display = 'none';
       else
          e.style.display = 'block';
    }
//-->
</script> 
```

这是切换（注意 href="#" - 是问题吗？）：

```
<a href="#" onclick="toggle_visibility('gallery_info');">[Click to see more details]</a> 
```

这是显示/隐藏的 div（如您所见，它开始隐藏）：

```
<div id="gallery_info" style="display: none;"> 
```

有任何想法吗？

非常感谢！亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:27:47.693

与功能无关，是`a`跳转到页面顶部的标签，您可以使用`event.preventDefault()`或`return false`在功能内防止`a`标签的默认动作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T04:57:12.100

使用 javascript: 作为 href 而不是 #

```
<a href="javascript:" onclick="toggle_visibility('gallery_info');">[Click to see more details]</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:27:48.363

添加`e.preventDefault()`到函数以停止单击链接的默认行为。指定`href='#'`表示指向当前页面顶部的链接，这就是您当前看到该行为的原因。如果您使用的是 jquery，您也可以`return false`从函数中代替。

请注意，`e`上面的变量是作为第一个参数传递给 onclick 函数的事件对象

# c# - 未能显示工具条

> ID：11287780
> 
> 赞同：0
> 
> 时间：2012-07-02T04:25:49.550
> 
> 标签：c#, visibility, toolstrip

我正在尝试添加一个简单的工具条，但是我无法让它显示在屏幕上，这是与它相关的所有代码。我有遗漏什么吗？

场地：

```
 protected ToolStrip _commandToolStrip = new ToolStrip(); 
```

在构造函数中

```
 FillToolBar();
     _commandToolStrip.Visible = true;
     _commandToolStrip.BringToFront(); 
```

方法：

```
 private void FillToolBar()
  {

     _commandToolStrip.Dock = DockStyle.Right;
     _commandToolStrip.Visible = true;
     ToolStripButton commandButton = new ToolStripButton("test", convertIconToImage((System.Drawing.Icon)(resources.GetObject("$this.Icon"))), Command_NextWebPattern_Execute);
     _commandToolStrip.Items.Add(commandButton);
  }

   private Image convertIconToImage(Icon icon)
   {
      Bitmap bm = icon.ToBitmap();
      Image convertedImage = bm;
      return convertedImage;
   } 
```

我似乎找不到任何不显示的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:30:37.927

几乎一发布问题就发现了问题..大声笑

我需要确保将父级设置为我的表单

ToolStrip 父级从未设置。我会把这个问题留给任何犯同样愚蠢错误的人：P

# vim - Vim 替换期间的正则表达式搜索

> ID：11287784
> 
> 赞同：2
> 
> 时间：2012-07-02T04:25:59.510
> 
> 标签：vim, replace

我的脚本中有很多行看起来像：

```
./run -f abc.txt
./run -f abc1.txt
./run -f abc2.txt
..
..
./run -f abc50.txt 
```

我需要全部替换`abc*.txt`为`abc.txt`. 在 Vim 中有没有办法可以做到这一点，我可以在其中搜索所有内容`abc*.txt`并替换它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T04:30:10.757

你可以这样做：

```
:%s/abc\d*.txt/abc.txt/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T05:06:06.110

我将以多样性的名义添加这种不同的方法，但我认为标准和最简单的方法是@xdazz 方法。

```
:%g/abc/norm!fclvf.hx 
```

当我们使用时，`%g`我们将命令应用于与第一个参数匹配的所有行（在这种情况下`abc`，这意味着所有行`abc`）。`norm!`命令的意思*是像普通模式下的命令一样* 意味着`fc`找到字母`c`，`l`意味着向左移动，`v`启动视觉模式，`f.`找到点，`h`向右移动，最后`x`删除可视化的单词。

这种方法的好处是您可以将复杂的宏应用于选定的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T04:30:55.150

简而言之，尝试类似：（可能需要轻微按摩）`%s/abc\d*\.txt/abc\.txt/g`

查看此页面了解更多信息。

[http://vim.wikia.com/wiki/Search_and_replace](http://vim.wikia.com/wiki/Search_and_replace)

```
:%s/foo/bar/g
Find each occurrence of 'foo', and replace it with 'bar'.
:%s/foo/bar/gc
Change each 'foo' to 'bar', but ask for confirmation first.
:%s/\<foo\>/bar/gc
Change only whole words exactly matching 'foo' to 'bar'; ask for confirmation.
:%s/foo/bar/gci
Change each 'foo' (case insensitive) to 'bar'; ask for confirmation.
This may be wanted after using :set noignorecase to make searches case sensitive (the default). 
```

# android - 如何在 Android 中从 R.id 或 R.layout 中找到 XML 文件？

> ID：11287787
> 
> 赞同：5
> 
> 时间：2012-07-02T04:26:11.297
> 
> 标签：android, eclipse

我使用 Eclipse 研究了一些 Android 上的开源项目。我一直在 Java 源代码中看到**R.id.xxx**或**R.layout.xxx 。**我看到它们是从文件`/res`夹中的 XML 文件构建的。

但问题是有数百个 XML 文件可以包含我想要查看的 ID。有什么方法可以查看此参考，而不是手动查看每个 XML 文件？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T04:34:41.003

只需按住 ctrl 键并将鼠标放在 R.id.xxx 或 R.layout.xxxxx 上。Eclipse 将选项显示为

```
 open Declaration
      open Declaration in Layout/xxxx.xml 
```

通过单击 layout/xxx.xml 中的 open Declaration 将导致布局文件.. 如果您选择 open Declaration，它将转到 R.java 中的声明部分

我希望它对你有帮助..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T04:33:08.977

`R.layout`是实际的布局文件 `R.id`是布局内部的视图。

可以调用视图的唯一方法是布局首先膨胀。

所以我的项目得先说`R.layout`，然后`R.id`从里面那个layout就可以用了。

这个问题的答案可能会对您有所帮助：[在 Android 中从 xml 调用小部件时正确的术语是什么？](https://stackoverflow.com/questions/11217454/what-is-the-correct-term-when-calling-a-widget-from-xml-in-android)

它基本上解释了必须先“打开”布局文件，然后才能使用内部的所有视图（按钮、editText、TextViews 等）。

单击时按住 ctrl 会指出它的来源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T04:36:15.627

试试这个...

**1.**打开`R.java`文件，

**2.**按住键盘上的**ctrl按钮**

**3.**将鼠标指针放在要跟踪其 xml 的整数常量上。

**4.**然后选择选项“在布局layout_name中打开声明”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T04:48:05.047

gen 文件夹中的 R.java 文件包含“布局”类中所有布局（XML 文件）的声明。您可以按照以下步骤到达那里。

1.  按住键盘上的 Ctrl 键
2.  在 R.layout.XXX 上获取鼠标课程
3.  您将获得“公开声明”选项。点击那个
4.  最后你在 R.java 文件的布局类

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-27T14:37:49.530

(1) 只需按住 ctrl 键并将鼠标移到 R.id.xxx 上。Eclipse 将选项显示为

```
 open Declaration
  open Declaration in Layout/abc.xml 
```

(2) 点击layout/abc.xml中的open Declaration，会进入layout文件。如果选择open Declaration，会进入R.java中的declartion部分

希望对您有所帮助。

# django - IOError：请求数据读取错误

> ID：11287791
> 
> 赞同：2
> 
> 时间：2012-07-02T04:27:41.187
> 
> 标签：django, mod-wsgi, wsgi, ioerror, django-wsgi

我在尝试将数据加载为 Excel 以作为响应时收到 IO 请求数据读取错误。

```
def convert_to_excel(request):
    field = forms.CharField()
    try: data = field.clean(request.POST.get('exceldata', ''))
    except: data = u''
    response = render_to_response("spreadsheet.html", request= request, dictionary = locals())
    filename = "%s%s.xls" % ("report_excel", datetime.datetime.today().strftime('%Y%m%d%H%M%S'))
    response['Content-Disposition'] = 'attachment; filename='+filename
    response['Content-Type'] = 'application/vnd.ms-excel; charset=utf-8'
    return response 
```

当数据低于 150k 时它工作正常，但较大的文件在 200k 左右失败。我正在使用守护程序模式和 Python/2.7.3 运行 django 1.4 Apache/2.2.22 (Ubuntu) mod_wsgi/3.3。

这在本地主机中工作正常。我想这可能是 wsgi 与守护程序模式的问题或错误配置。有人知道吗？

我得到的例外如下。

```
Traceback (most recent call last):
 File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 89, in get_response
   response = middleware_method(request)

 File "/usr/local/lib/python2.7/dist-packages/newrelic-1.2.1.265-py2.7.egg/newrelic/hooks/framework_django.py", line 191, in __call__
   result = self.__wrapped(*args, **kwargs)

 File "/home/core/mysite/src/task/tools/libs/pagination/middleware.py", line 8, in process_request
   request.page = int(request.REQUEST.get('page', 1) )

 File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 166, in _get_request
   self._request = datastructures.MergeDict(self.POST, self.GET)

 File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 180, in _get_post
   self._load_post_and_files()

 File "/usr/local/lib/python2.7/dist-packages/django/http/__init__.py", line 360, in _load_post_and_files
   self._post, self._files = self.parse_file_upload(self.META, data)

 File "/usr/local/lib/python2.7/dist-packages/django/http/__init__.py", line 320, in parse_file_upload
   return parser.parse()

 File "/usr/local/lib/python2.7/dist-packages/newrelic-1.2.1.265-py2.7.egg/newrelic/api/function_trace.py", line 82, in __call__
   return self._nr_next_object(*args, **kwargs)

 File "/usr/local/lib/python2.7/dist-packages/django/http/multipartparser.py", line 161, in parse
   data = field_stream.read()

 File "/usr/local/lib/python2.7/dist-packages/django/http/multipartparser.py", line 301, in read
   out = ''.join(parts())

 File "/usr/local/lib/python2.7/dist-packages/django/http/multipartparser.py", line 285, in parts
   yield ''.join(self)

 File "/usr/local/lib/python2.7/dist-packages/django/http/multipartparser.py", line 316, in next
   output = self._producer.next()

 File "/usr/local/lib/python2.7/dist-packages/django/http/multipartparser.py", line 449, in next
   for bytes in stream:

 File "/usr/local/lib/python2.7/dist-packages/django/http/multipartparser.py", line 316, in next
   output = self._producer.next()

 File "/usr/local/lib/python2.7/dist-packages/django/http/multipartparser.py", line 377, in next
   data = self.flo.read(self.chunk_size)

 File "/usr/local/lib/python2.7/dist-packages/django/http/__init__.py", line 384, in read
   return self._stream.read(*args, **kwargs)

 File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 104, in read
   result = self.buffer + self._read_limited(size - len(self.buffer))

 File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 92, in _read_limited
   result = self.stream.read(size)

 File "/usr/local/lib/python2.7/dist-packages/newrelic-1.2.1.265-py2.7.egg/newrelic/api/web_transaction.py", line 349, in read
   data = self.__input.read(*args, **kwargs)

IOError: request data read error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:12:47.147

检查你的 apache 配置，看看你是否能找到`LimitRequestBody`

如果是，请将其更改为更大的数字，如果找不到，请在您的站点配置下添加以下内容

```
LimitRequestBody 1024000000 
```

另外，检查您的 uwsgi 的文件限制选项，使用以下选项启动您的 uwsgi：

```
uwsgi --limit-post 1024000000 
```

这种错误是您的上传超出了您的 apache/nginx/uwsgi 最大上传设置。我还注意到您可能不使用 uwsgi，[限制请求正文](https://stackoverflow.com/questions/4467443/limitrequestbody-doesnt-respond-with-413-for-large-file25mb)并将[LimitRequestBody 默认设置为低值](http://code.google.com/p/modwsgi/issues/detail?id=207)可能会有所帮助。

# python - 增加权力。完全被这件事难住了

> ID：11287812
> 
> 赞同：-4
> 
> 时间：2012-07-02T04:31:33.253
> 
> 标签：python

谁能告诉我如何做到这一点？谢谢。

程序需要定义一个函数 sumPower，它应该接受一个数字列表。然后函数 sumPower 应该使用列表中的每个项目作为数字 2 的指数。这个函数应该添加这些幂并返回总和。您还应该确保编写一个带有如下语句的主程序：

打印（总和（[2,4,6]））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T04:34:16.167

在这里你使用*列表理解*。这意味着：获取我的列表，并为该列表的每个元素计算新值。返回新元素的列表。

例如：

```
In [2]: a=[2,4,6]

In [3]: print [pow(2,x) for x in a]
[4, 16, 64] 
```

之后，您需要计算列表中元素的总和。Python中有一个函数可以将列表中的所有元素相加，即它的参数。

```
In [4]: sum([2,4,6])
Out[4]: 12 
```

现在您将列表理解和`sum`.

```
(try to guess) 
```

当你不允许这样的构造时，你可以写同样的更底层的：

```
def sumPower(a):
  s = 0
  for x in a:
    s += pow(2,x)
  # (one line removed; try to guess what must be here) 
```

在这里迭代`a`，计算 2 的幂并将其累加到`s`变量中。然后`s`作为函数的结果返回。

我稍微修改了解决方案；我隐藏了一些代码；只是尝试自己猜测。这很容易，当您猜对时，它会对您更有用！

# python - Python逗号分隔文本文件

> ID：11287815
> 
> 赞同：1
> 
> 时间：2012-07-02T04:31:49.530
> 
> 标签：python

我现在正在学习 python，我有一个文本文件，其中有很多由换行符 (\n) 分隔的数字，例如：

5 100 7 83

读取/写入新文本文件的最简单方法是什么，将数字转换为逗号分隔格式，例如：

5、100、7、83

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T04:34:56.323

查看[csv 模块](http://docs.python.org/library/csv.html)，它是为读取和写入此类格式而设计的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T04:36:09.500

对于文件中的每一行，您希望将其拆分为空格并用逗号重新加入：

```
with open('infile.txt') as infile, open('outfile.txt', 'w') as outfile:
    outfile.write(', '.join(infile.read().split('\n')) + '\n') 
```

如果您想做更复杂的事情，您还可以查看[csv模块。](http://docs.python.org/library/csv.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:58:27.643

最简单的方法，尤其是在文件不是很大的情况下

```
with open('infile.txt') as infile, open('outfile.txt', 'w') as outfile:
    outfile.write(infile.read().replace(" ", ", ")) 
```

如果您只是处理不需要特殊处理或转义的数字，则 csv 模块是多余的

如果文件太大而无法立即读入内存，请使用类似 Abe's answer

# wpf - WPF Datagrid 滚动编辑的行数据不被维护

> ID：11287818
> 
> 赞同：0
> 
> 时间：2012-07-02T04:32:28.253
> 
> 标签：wpf, scroll, wpfdatagrid

我有一个可滚动的数据网格，我使用模板来设计它。这些列不是自动生成的，我尝试使用 ItemsSource 和 DataContext 将数据绑定到数据网格。我有 2 列可供用户编辑 10 列。当用户编辑行的数据并向上/向下滚动时，编辑的数据将移动到另一行。即，如果我编辑一行说行号。1 然后向下滚动到第 1 行。15 并编辑它。行号 1 个数据丢失并出现在另一行中，例如第 1 行。10.

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:46:01.017

检查数据网格的绑定属性。确保可编辑字段的绑定设置为“Twoway”。

# java - 使用类路径从命令行运行 java 程序

> ID：11287819
> 
> 赞同：0
> 
> 时间：2012-07-02T04:32:30.920
> 
> 标签：java

大多数时候，当我学习一些东西时，我是从命令行运行 java 程序。

现在我的问题有点复杂。

我正在从命令行运行简单的 java 程序。但我需要环境变量中的 CLASSPATH 变量。当我添加 CLASSPATH 变量时，我的程序给了我错误。错误是类NOtFoundException。意味着当我运行程序时，它会检查 .class 文件并且它正在我的类路径变量中，很明显它不会找到并且它会引发异常。我一直在这条线上工作。这个问题发生在我格式化我的电脑后。但我使用的是相同的操作系统和相同的 jdk。

任何机构都面临过这种类型的问题？它不适用于以下屏幕截图。 ![在此处输入图像描述](../Images/a8f1e892b636abf7a442c1d29ad76e32.png) ![在此处输入图像描述](../Images/ab97be7104accf30a2d0e7ebaf8984bf.png)

使用以下屏幕截图 ![在此处输入图像描述](../Images/ab97be7104accf30a2d0e7ebaf8984bf.png)

以下是我的桌面屏幕截图，所有东西都在使用类路径和没有类路径（意味着无论类路径是否存在，我都可以运行简单的程序。）。

![在此处输入图像描述](../Images/090200ae4cc452e45b2f095118b461b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:43:57.040

Try this,

**1.** Goto your JDK folder, and then go inside bin,

**2.** Copy the path

eg: `C:\Program Files\Java\jdk1.7.0\bin`

**3.** Paste this path in **"PATH", NOT "CLASSPATH"** .

**4.** Then i recommend giving the command "gpupdate /force" in cmd.

```
(I know it about updating policies, but that how it works for me....) 
```

**5.** Then type the command **"java -version"** on cmd, if you get the jdk version in respose, you are good to go.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T04:58:48.720

尝试添加“。” （当前目录）到您的系统类路径。

更好的做法是创建一个批处理文件来设置每个应用程序的环境变量并启动您的程序。

* * *

请附上class not found异常的全文和你定义的系统类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T05:15:13.117

根据你的说法，你的`JDK`工作正常（因为你得到了`classNOtFoundException`）
所以你想要运行的类显然不在类路径中
让我们试试这个..

```
java -cp /your/path  ClassName 
```

其他明智的让我们看看这可能对你有帮助.. [PATH 和 CLASSPATH](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

# java - 将 Javascript 变量传递给 Android 活动？

> ID：11287820
> 
> 赞同：2
> 
> 时间：2012-07-02T04:32:32.697
> 
> 标签：java, javascript, android, html

基本上我想获取我已经从 javascript 访问过的数据并将其传递给 Java/Android，以便我可以在那里使用它。

```
 /* An instance of this class will be registered as a JavaScript interface */
    class MyJavaScriptInterface {

        @SuppressWarnings("unused")
        public void setX(String html){
            Activity.this.x = html;
            Toast.makeText(myApp, Activity.this.x, Toast.LENGTH_LONG).show();
        }

    } 
```

这可行，但我希望能够在任何地方调用相同的 Toast 行并获得相同的结果。目前它仅在通过 webview.loadUrl("Javascript:"...

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:13:19.890

您不能访问存储的 javascript 变量，您必须通过函数调用来访问。您必须从 html 页面中的 javascript 调用它，例如：

```
TheNameOfYourInterface.setX('value'); 
```

TheNameOfYourInterface 将是一个 javascript 对象，当您通过

```
YourWebView.addJavascriptInterface(new MyJavaScriptInterface(),"TheNameOfYourInterface"); 
```

所以你可以在你的webview上做逻辑，并在你设置数据时调用接口，这样Java端的方法就会被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:02:54.447

我找到了我需要的不同解决方案，我觉得它适用于所有不需要通过 javascript 计算的值的人。我的解决方案是 HTTP GET html/javascript，然后将其解析为字符串。它不需要加载 X WebViews 然后（重新）在 JavaScript 界面中创建我的所有函数，从而节省了我一些时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T06:04:30.927

我认为将 HTML 存储在 Shared Preferences 中是个好主意，这是一种持久存储形式。这样您就可以从任何地方访问它。

```
 //------get sharedPreferences

SharedPreferences pref = context.getSharedPreferences("PREF_NAME", Context.MODE_PRIVATE);

//--------modify the value

pref.edit().putString("ToastString", html).commit();

//-------get a value from this from anywhere

String toastValue=pref.getString("ToastString", ""); 
```

# javascript - 如何使用javascript访问隐藏按钮

> ID：11287827
> 
> 赞同：0
> 
> 时间：2012-07-02T04:34:03.140
> 
> 标签：javascript, asp.net, controls, visibility

我有一个链接按钮来删除用户控件中的选定值。如果我们要为控件添加价值，我必须让这个链接按钮可见。所以我将链接按钮的客户端 ID 传递给用户控件，并将该 ID 保存在用户控件的隐藏控件中。我在用户控件中选择值，使链接按钮可见。

问题：

如果链接按钮可见性为 false 则意味着无法访问控件。

**var removeUser = document.getElementById(elementRemoveUser.value);** 返回空值。如果控件可见意味着它工作正常。

```
 var elementRemoveUser = document.getElementById("<%=hdnRemoveUser.ClientID %>");
        if (elementRemoveUser.value != '') {
            var removeUser = document.getElementById(elementRemoveUser.value);
            if (removeUser != null) {
                removeUser.style.visibility = "visible";
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T04:22:26.103

您应该使用`style="display:none;`属性而不是使控件不可见`Visible = False`

使用`display:none`隐藏元素，但 HTML 元素仍然存在于源代码中，因此您可以访问该控件。但是，`Visible = False`完全删除了 HTML 元素。

# c - 使用 Turbo C 处理文件

> ID：11287828
> 
> 赞同：1
> 
> 时间：2012-07-02T04:34:04.413
> 
> 标签：c, file, turbo-c

我必须制作一个程序来管理它从文件中获取的信息，但我使用的是古老的 Turbo C 3.0，所以我在尝试写入文件时遇到错误，这是我的代码：

```
#include <conio.h>
#include <stdio.h>

void main(){
clrscr();

int c;
FILE *datos;

datos = fopen("datos.txt","w");

c = fgetc (datos);

printf("%d",c);

fclose(datos);

getch();
} 
```

每当我打印它时，我都会得到 -1 作为回报。我知道这一定很简单，但我遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:41:25.523

Check to make sure you have a valid file:

```
// use "r" for reading, "w" for writing
datos = fopen("datos.txt", "r");

if (datos)
{
    int ch = fgetc(datos);
    if (ch != EOF)
        printf("%d\n", c);
    else
        printf("End of file!\n");
}
else
{
    printf("Failed to open datos.txt for reading.\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:30:55.957

```
'include statements

main(){
  char we;
  char intt;
  ifstream q("xyz.txt");
  for (we=0;we<100;we++){
    q >> intt;
    printf("%c",q);
   }

  getch();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T04:37:14.880

You open the file in write only mode (`"w"`), but you are trying to read the file with `fgetc`.

Either open the file in read-only mode (`"r"`), then read the data, close the file, and open it again in write only mode to write it. Or open the file in a mode that support both reading and writing - check the documentation of Turbo-C for more info.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T04:43:11.593

Try opening the file for "read" instead:

```
#include <conio.h>
#include <stdio.h>
#include <errno.h>

int main(){

  int c;
  FILE *datos;

  clrscr();
  datos = fopen("datos.txt","r");
  if (!datos) {
    printf ("Open failed, errno=%d\n", errno);
    return 1;
  }    
  c = fgetc (datos);
  printf("%d",c);
  fclose(datos);
  getch();
  return 0;
} 
```

If it still fails, tell us the error#.

# android - 如何在 android 中使用虚拟键盘（在按下后显示 Toast 的键上捕获事件）

> ID：11287830
> 
> 赞同：0
> 
> 时间：2012-07-02T04:34:19.767
> 
> 标签：android

我正在对虚拟键盘进行研发（如何捕捉关键事件），但没有发现更多成功我对虚拟键盘的了解很少

我们需要实现

`onKeyboradActionListener`

```
/* and these override methode*/

public void onKey(int primaryCode, int[] keyCodes) {
    // TODO Auto-generated method stub

}

@Override
public void onPress(int primaryCode) {
    // TODO Auto-generated method stub

}

@Override
public void onRelease(int primaryCode) {
    // TODO Auto-generated method stub

} 
```

如果有人知道这分享他的知识

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:41:14.303

I am not sure if this might help, but I thought it might be related to your question.

[Creating an Input Method](http://android-developers.blogspot.com/2009/04/creating-input-method.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T04:44:58.933

The below given code might help you...

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_I) {
        Toast.makeText(getBaseContext(), "You have Clicked the button I", Toast.LENGTH_LONG).show();
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T05:30:17.410

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if (keyCode == KeyEvent.KEYCODE_MENU) 
    {
        Toast.makeText(getBaseContext(), "You Clike MenuButto", Toast.LENGTH_LONG).show();
        return true;
    }else 
    {
        return false;
    }       
} 
```

# iphone - 如何创建 uiview 的副本（不是指向原始 uiview 的指针）

> ID：11287831
> 
> 赞同：5
> 
> 时间：2012-07-02T04:34:38.820
> 
> 标签：iphone, xcode, ipad, uiview, nscopying

我想创建 a 的副本，但`UIView`我不想使用`NSKeyedArchiver`，因为我经常创建许多视图的副本，并且使用`NSKeyedArchiver`速度很慢。

我听说过`copy`or `initWithZone:`，但谷歌搜索它发现它并不适合`UIView`。我不想要指向原始视图的副本，因为对其所做的任何更改也会对复制的`UIView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T17:02:36.027

您可以使用以下方法复制视图：

```
TheView *copyOfView =  (TheView *) [NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:origionalTheView]]; 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-05-15T08:18:41.793

创建一个 UIView 类别，它可以帮助复制视图。像这样的东西：

```
- (id) copyView {
     UIView *a = [[UIView alloc]init];
     a.frame = self.frame;
     //set all other properties of the UIView
     return a; //return [a autorelease] if not using ARC
} 
```

# c++ - 在此 C++ 代码中应用预取以查找最大值索引

> ID：11287832
> 
> 赞同：0
> 
> 时间：2012-07-02T04:34:41.137
> 
> 标签：c++, stl, max, pragma, prefetch

以下代码在给定数组中查找最小值/最大值及其位置：

```
 //Finding the array index//
 #include "stdafx.h"
 #include <iostream>
 #include <iterator>
 #include <list>
 #include <algorithm>
 using namespace std;
 int main () {
 int A[4] = {0, 2, 1, 1};
 const int N = sizeof(A) / sizeof(int);
 cout << "Index of max element: "
 << distance(A, max_element(A, A + N))
 << endl;
 return 0;
 } 
```

我想改进二维数组的代码并利用预取

所以我的数据现在是这样的：

```
 A[3][10] = { {3,7,2,9,39,4,9,2,19,20}, 
                  {3,7,2,9,33,4,22, 2,19,21}, 
                  {3,7,2,36,33,4,9,2,19,22} 
                }; 
```

在实际情况下，数据会更多。我真的会在这里获得预取的任何好处吗？如果是这样，我该怎么做？还有任何编译器指令可以指示编译器预取 A 中的数据吗？

**编辑：**

我需要整个二维数组的最大值以及相应的索引。将在 x86、Intel i3、Windows 7 上运行。

如您所见，在此代码中，我首先找到最大值，然后找到最大值的位置。有没有办法可以将这两个步骤的过程简化为单一的，从而加快这个过程？

**更新：** 我修改了此代码，使其一步处理数据，这与之前首先查找最大值然后查找索引不同。问题是如何使用预取来提高性能？

# cordova - 需要检查 Coldfusion 组件中返回的数据

> ID：11287835
> 
> 赞同：-1
> 
> 时间：2012-07-02T04:34:43.373
> 
> 标签：cordova, coldfusion, cfc

我的服务器上有一个 .cfc，用于运行查询并将结果发送回 phonegap 应用程序。我无法获得正确的语法来检查查询中是否返回了任何数据并在结果中发回一个字符串，例如“未找到数据”以显示。这是我的代码...

```
remote array function getintList() {
        var q = new com.adobe.coldfusion.query();
        q.setDatasource("myData");
        q.setSQL("select id1, Date, ShowLInk, IntName, description from myData Where intyear = #dateformat(Now(), "YYYY")# order by date desc");
        var data = q.execute().getResult();
        var result = [];
        for(var i=1; i<= data.recordCount; i++) {
            arrayAppend(result, {"id"=data.id1[i], "name"=data.IntName[i], "date"=dateformat(data.date[i], "mmmm d, yyyy"), "description"=data.description[i], "showlink"=data.ShowLInk[i]});
        }
        return result;
    } 
```

想也许我可以做一个像这样的cfif语句，但它不起作用......

```
<cfif data.recordcount lt 1>
result = "no data"
return result;
<cfelse>
return result;
</cfif> 
```

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T05:11:20.827

那么结果是一个数组。

如果您的电话间隙我假设然后 javascript 正在处理结果，那么只需在结果上使用 javascript 长度。

IE

```
if(result.length){
    //have data doStuff
}else{
    //noData
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T05:05:31.997

您的函数返回一个数组。所以你只需要检查你的 returnvariable 上的 arraylen() 。例如：

```
<!--- invoke your function --->
<cfset intlist = createobject("component","yourcomponentname").getintlist() />

<!--- check for resulsts --->
<cfif arraylen(intlist)>
  do something with your results ...
<cfelse>
  No results ...
</cfif> 
```

编辑：哦，只是没有看到您的函数是要远程调用的。所以它可能通过ajax调用。您只需在 JavaScript 中检查 .length ：

```
// assumed that "data" holds your JSON result
if(data.length) { 
  // do something with the results
} else {
  // show "no results"-message
} 
```

# perl - opendns 和 perl lwp::simple get

> ID：11287838
> 
> 赞同：0
> 
> 时间：2012-07-02T04:35:00.920
> 
> 标签：perl, security, get, dns, filtering

我正在尝试过滤以编程方式访问的 Web 内容，比如说通过 lwp::simple 或套接字。

我对服务器配置没有任何控制权，例如。dns 设置

在这些限制下，我将如何使用 opendns。

是否有每个请求的 dns？

我对这个主题不太熟悉，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:40:47.080

LWP/Perl 套接字仅使用操作系统的解析器。您需要在某个地方设置一个单独的转发器（例如[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html)），该转发器可以配置为以不同方式解析某些主机名。然后：

*   子类 LWP 以使用外部转发器或
*   获得将操作系统解析器指向那里的许可或
*   用 C 编写一些东西来劫持 getnameinfo(3)/gethostbyaddr(3) 和相关的系统调用，然后将其安装为[preload hack](http://enwp.org/Dynamic_linker#ELF-based_Unix-like_systems)。

# mysql - 简单的 Flex Paint 应用程序，如何以图像形式保存在数据库中

> ID：11287839
> 
> 赞同：1
> 
> 时间：2012-07-02T04:35:08.793
> 
> 标签：mysql, apache-flex, paint, save

我有一个简单的 Flex 绘画应用程序，它可以让用户绘制他们想要的任何东西。我的问题是如何在不将其转换为图像格式的情况下将其保存到 MySQL 数据库中。此外，我希望它被保存并同时检索，以防有未完成的绘图。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:02:11.447

定义可以绘制哪些对象，例如直线、点、具有受控角的多边形等。为每个对象创建序列化方法。它可能是二进制格式（我想您不需要通过使用的功能在数据库中搜索绘图）：首先是对象类型，然后是属性。对于线条，它可能是端点、颜色，可能是宽度和绘图样式（实线、条纹、点线）。
整个绘图也将具有一些属性，例如宽度/高度、格式版本。将这些写在标题中，然后将去所有绘图对象。如果你需要图层，你可以为它们制作特殊的标签，这将作为绘图对象之间的分隔符：
`header - layer 1 tag - line - line - line - layer 2 tag - square - circle`
二进制格式还可以将绘图保存到文件中（或作为 blob 保存在数据库中）。此外，你可以使用 XML，它只是会使用更多的字节（但会更容易调试。）

# jenkins - 詹金斯奴隶无法开始

> ID：11287845
> 
> 赞同：0
> 
> 时间：2012-07-02T04:36:09.250
> 
> 标签：jenkins

我在 linux 服务器上设置了 jenkins，并选择了一台 Win7 电脑作为从机。我在从属配置中选择“通过 java web start 启动从属代理”。当我使用以下命令启动从站时，Jenkins 从站代理窗口显示已连接，然后立即变为“终止”。有人帮忙吗？非常感谢！

```
set SLAVENAME=%1
set CYGPATH=%2
if x%CYGPATH% == x set CYGPATH=C:\APPS\cygwin\bin

set PATH=%CYGPATH%;%PATH%

:RUN_SLAVE
echo %PATH%
javaws %MASTER%/computer/%SLAVENAME%/slave-agent.jnlp
exit 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:01:15.333

我的问题是我的驱动器没有设置。我告诉它使用 D:\ 驱动器，因为我已经从另一台机器克隆了它。但是该驱动器不存在（无法访问它来放置文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:05:52.010

There could be many things that are wrong, but because you report the connection is established and then terminated, I think you have an incorrect address for Jenkins itself in the Jenkins global configuration.

Jenkins does not use the "Jenkins URL" setting for a lot of things, but establishing connection with Java Web Start slaves is one of them, so please ensure "Jenkins URL" in the master configuration is set correctly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T16:04:34.737

只是把它放在那里，这样它可能对某人有用......

我也有同样的问题，在检查主日志时（如果你有这个问题，这是一个很好的起点），我知道远程 FS 根是错误的。实际上我是在关注[官方教程](https://wiki.jenkins-ci.org/display/JENKINS/Step+by+step+guide+to+set+up+master+and+slave+machines "官方教程")，甚至在教程中，他们建议你使用“C:\Jenkins\”，这是错误的！

Jenkins 尝试将一些文件复制到此路径，但在这种情况下，不接受引号。所以将它设置为 C:\Jenkins\ 对我有用！

# arrays - CGPoint 数组中的索引从 i+1 开始？

> ID：11287849
> 
> 赞同：0
> 
> 时间：2012-07-02T04:36:22.470
> 
> 标签：arrays, cocos2d-iphone, indexing

有人知道为什么我从来没有得到我的数组的第一个值吗？它总是从索引 i+1 开始，当我在 0 开始 for 循环时，或者像这里一样在 1 ：而不是 x=44，控制台说 x=100 ：

```
//at the top
#define kMaxHillKeyPoints 5

//in the .h:
CGPoint _hillKeyPoints[kMaxHillKeyPoints];

- (void)generatePath {

    int _nVertices = 1;

    _hillKeyPoints[_nVertices] = CGPointMake(44, 0);
    _hillKeyPoints[_nVertices++] = CGPointMake(100, 75);
    _hillKeyPoints[_nVertices++] = CGPointMake(50, 150);
    _hillKeyPoints[_nVertices++] = CGPointMake(150, 225);

    for(int i = 1; i < 4; i++) {   
        CCLOG(@" _hillKeyPoints[1].x : %f", _hillKeyPoints[1].x);
        CCLOG(@"%i", i);
    }
}

//output :
_hillKeyPoints[1].x : 100.000000 //why not x = 44 ? 
```

你知道为什么吗？我也清理了项目，但它没有改变任何东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:08:01.610

首先，您执行了以下操作：

```
int _nVertices = 1;
_hillKeyPoints[_nVertices] = CGPointMake(44, 0); //_nVertices = 1 
```

这将 _hillKeyPoints[1] 分配给 (44,0)。在这里，你还是不错的（你可以在这里用NSLog来验证）。

但是，在以下声明中：

```
_hillKeyPoints[_nVertices++] = CGPointMake(100, 75); 
```

您正在**增加**_nVertices。这意味着 _hillKeyPoints[_nVertices] 首先分配给 (100,75)，**然后**值 _nVertices 递增。上面的语句完全等同于这样做：

```
_hillKeyPoints[_nVertices] = CGPointMake(100, 75); 
_nVertices = _nVertices + 1; 
```

请注意，在分配期间这里 _nVertices = 1，因此您将覆盖之前的 (44, 0) 分配，因此最终会得到 _hillKeyPoints[1] = (100,75)。

如果您仍想按照自己的方式进行操作，则可以每次都预先增加索引：

```
int _nVertices = 1; 
_hillKeyPoints[_nVertices] = CGPointMake(44, 0); //_nVertices = 1
_hillKeyPoints[++_nVertices] = CGPointMake(100, 75); //_nVertices = 2
_hillKeyPoints[++_nVertices] = CGPointMake(50, 150); //_nVertices = 3
_hillKeyPoints[++_nVertices] = CGPointMake(150, 225); //_nVertices = 4 
```

希望这可以帮助。

# asp.net - Cookie 在 asp.net 中不起作用

> ID：11287852
> 
> 赞同：3
> 
> 时间：2012-07-02T04:37:46.077
> 
> 标签：asp.net, cookies

我有两个页面，test1.aspx 和 test2.aspx

test1.aspx 有这个

```
protected void Page_Load(object sender, EventArgs e)
{
  HttpCookie cookie = new HttpCookie("test", "test");
  cookie.Expires = DateTime.Now.AddDays(1);
  Response.SetCookie(cookie);
} 
```

test2.aspx 有这个

```
protected void Page_Load(object sender, EventArgs e)
{
  Response.Write(Response.Cookies["test"].Value);
} 
```

无论我尝试了多少次，cookie 的值都是 null。我试图打开第 1 页，然后打开第 2 页，希望 cookie 可以工作，但它不工作，我不知道为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T04:47:00.243

我认为您需要阅读`Request`而不是响应。

作为[MSDN 的](http://msdn.microsoft.com/en-us/library/bd70eh18)建议

```
protected void Page_Load(object sender, EventArgs e) 
{
    Response.Write(Request.Cookies["test"].Value);
} 
```

在 Web 应用程序中，*请求*来自客户端（浏览器），*响应*来自服务器。从浏览器验证 cookie 或 cookie 数据时，您应该使用该`Request.Cookies`集合。当您构建要发送到浏览器的 cookie 时，您需要将它们添加到`Response.Cookies`集合中。

**关于使用 SetCookie 的其他想法**

有趣的是，在您的第一页上使用的[HttpResponse.SetCookie ；](http://msdn.microsoft.com/en-US/library/system.web.httpresponse.setcookie)MSDN 说此方法不适用于您的代码。

> 此 API 支持 .NET Framework 基础结构，不打算直接从您的代码中使用。

即使在此页面上找到的示例代码也使用该`Response.Cookies.Add(MyCookie)`方法并且不调用`SetCookie`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T04:51:03.767

你需要的是：

```
protected void Page_Load(object sender, EventArgs e) 
{
    Response.Write(Request.Cookies["test"].Value);
} 
```

这里有一个示例： [Reading and Writing Cookies in ASP.NET and C#](http://www.aspnettutorials.com/tutorials/network/cookies-csharp.aspx)

问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T21:57:46.377

用 (response) 保存 cookie，用 (request) 读取 cookie

```
//write
response.cookies("abc") = 123;

//read
if ((request.cookies("abc") != null)) {
string abc = request.cookies("abc");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T04:51:42.800

采用`Response.Cookies.Add(cookie);`

参考：http: [//msdn.microsoft.com/en-us/library/system.web.httpresponse.cookies](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cookies)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T05:13:42.320

在页面 test2.aspx

你应该试试这个

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var httpCookie = Request.Cookies["test"];
        if (httpCookie != null) 
        {
            Response.Write(httpCookie.Value);
        }
    } 
```

# ruby - 从步骤内的嵌套类中访问 Cucumber 的实例变量的最佳方法是什么？

> ID：11287858
> 
> 赞同：5
> 
> 时间：2012-07-02T04:38:59.807
> 
> 标签：ruby, cucumber

这是一个简单的问题。我有黄瓜步骤，例如：

```
Given /We have the test environment/ do
  @user = # Create User model instance
  @post = # Create Post model instance
  # etc...
end 
```

在**Then**步骤中，我使用自己的类，它们简化了测试过程：

```
Then /all should be fine/ do
  # MyValidatorClass has been defined somwhere in features/support dir
  validator = MyValidatorClass.new
  validator.valid?.should be_true
end 
```

在 MyValidatorClass 实例内部，我处理上述实例变量@user、@post 等。

从 MyValidatorClass 类实例访问 Cucumber 变量的最佳和最简单的方法是什么？

```
class MyValidatorClass
  def valid?
    @post
    @user
  end
end 
```

现在我已经手动将所有参数传递给 MyValidatorClass 实例：

```
validator = MyValidatorClass.new @user, @post 
```

但我认为这个目的是不好的。**我需要更透明的东西，因为我们使用的是 Ruby，这就是为什么！**

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T22:53:08.117

[在World](https://github.com/cucumber/cucumber/wiki/A-Whole-New-World)范围内定义的实例变量仅在 World 内可用。步骤定义属于 World。你应该把`MyValdatorClass`World by 放在里面`World{MyValdatorClass.new}`。之后，之前在此场景的 stepdef 中定义的实例变量将在此类和同一场景中的其他步骤定义中可用。

与您的问题有关的其他一些想法：

* * *

如果你有一个 step `Given we have the test environment`，那么：

*   您将在所有功能中复制它
*   由于当前功能的阅读细节不需要的功能，您的功能变得更长且阅读起来更不愉快
*   设置不需要的环境细节需要一些时间

创建实例的更简单方法是添加将为您创建它们的辅助方法：

```
module InstanceCreator
  def user
    @user ||= # Create user instance in World
  end
  #etc
end
World(InstanceCreator) 
```

然后，您只需在需要时使用此用户（无需任何 @ 或 @@）。

如果您除了创建实例之外还需要其他东西，请使用[钩子](https://github.com/cucumber/cucumber/wiki/Hooks)

你的场景应该是自然阅读。你不应该用仅仅为了让你的自动化层工作而需要的步骤来破坏它们。

* * *

最好使用从 ^ 开始并以 $ 结尾的正则表达式。没有它，步骤定义变得过于灵活。您的第一步定义也将匹配`Given We have the test environment with some specifics`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:05:51.000

我找到了可能的灵魂。您只需从实例变量迁移到类变量：

```
Given /We have the test environment/ do
  @@user = # Create User model instance
  @@post = # Create Post model instance
  # etc...
end

Then /all should be fine/ do
  # MyValidatorClass has been defined somwhere in features/support dir
  validator = MyValidatorClass.new
  validator.valid?.should be_true
end

...    

class MyValidatorClass
  def valid?
    @@post
    @@user
  end
end 
```

# android - 获取点击项：Android

> ID：11287860
> 
> 赞同：4
> 
> 时间：2012-07-02T04:40:05.380
> 
> 标签：android, click

我有一个动态膨胀的布局。

```
<TableLayout>
   <!-- Two more tablelayout here -->
   <ScrollView>
      <TableLayout>
         <!-- Here a tablerow is added using inflate layout -->
      <TableLayout>
   </ScrollView>
 </TableLayout> 
```

表格行的布局如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
style="@style/savedItemRow">

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <TextView 
        style="@style/textviewSaved"
        android:id="@+id/text_item"/>
    <TextView
            android:id="@+id/text_item_responce"
            style="@style/textviewSavedSub" />

</TableLayout>
</TableRow> 
```

我想在单击 text_item id 时收听（请记住，我已经动态创建了在运行时创建的 tablerows）。

我是一个安卓菜鸟。我不确定我是否以正确的方式提出了这个问题。我想在运行时以某种方式获取点击项的属性，以便我可以操纵它们。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T04:46:34.443

在 TexView 布局中添加 android:clickable 以使 TextView Clickable ：

```
android:clickable="true" 
```

在代码部分：

```
TextView text = new TextView(this);
text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
text.setText("YOUR TEXT");
text.setId(5111);
text.setClickable(true);
text.setOnClickListener(handler);
View.OnClickListener handler =new View.OnClickListener() {
public void onClick(View v) {
    switch (v.getId()) {
        case R.id.mytextviewone: // doStuff
            break;
        case R.id.mytextviewone: // doStuff
            break;
    }
} 
```

}

# bash - 如何使用 Bash 检查文件是否包含特定字符串

> ID：11287861
> 
> 赞同：346
> 
> 时间：2012-07-02T04:40:11.777
> 
> 标签：bash, shell, grep

我想在 bash 中检查文件是否包含特定字符串。我使用了这个脚本，但它不起作用：

```
 if [[ 'grep 'SomeString' $File' ]];then
   # Some Actions
 fi 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：618
> 
> 时间：2012-07-02T04:47:14.737

```
if grep -q SomeString "$File"; then
  Some Actions # SomeString was found
fi 
```

你不需要`[[ ]]`这里。直接运行命令即可。`-q`当您不需要找到时显示的字符串时添加选项。

该`grep`命令根据搜索结果在退出代码中返回 0 或 1。0 如果发现了什么；1 否则。

```
$ echo hello | grep hi ; echo $?
1
$ echo hello | grep he ; echo $?
hello
0
$ echo hello | grep -q he ; echo $?
0 
```

您可以将命令指定为 的条件`if`。如果命令在其退出代码中返回 0，则表示条件为真；否则为假。

```
$ if /bin/true; then echo that is true; fi
that is true
$ if /bin/false; then echo that is true; fi
$ 
```

如您所见，您直接在此处运行程序。没有额外的`[]`或`[[]]`。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2019-07-23T06:51:10.970

如果要检查文件是否**不**包含特定字符串，可以按以下方式进行。

```
if ! grep -q SomeString "$File"; then
  Some Actions # SomeString was not found
fi 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-08-01T08:48:48.483

除了告诉您如何做您想做的事情的其他答案外，我还尝试解释出了什么问题（这就是您想要的。

在 Bash 中，`if`后面是一个命令。如果此命令的退出代码等于 0，则`then`执行该部分，否则执行该`else`部分（如果有）。

您可以使用其他答案中解释的任何命令来执行此操作：`if /bin/true; then ...; fi`

`[[`是一个内部 bash 命令，专用于某些测试，例如文件存在、变量比较。同样是一个外部命令（`[`它通常位于`/usr/bin/[``]``]``]]`

在这里你不需要`[[`也不需要`[`。

另一件事是你引用事物的方式。在 bash 中，只有一种情况会嵌套引号对，即`"$(command "argument")"`. 但是在`'grep 'SomeString' $File'`你只有一个词，因为`'grep '`是一个带引号的单位，它与 连接`SomeString`，然后再次与 连接`' $File'`。由于使用了单引号，该变量`$File`甚至没有被其值替换。正确的做法是`grep 'SomeString' "$File"`.

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-07-23T12:17:49.220

最短（正确）版本：

```
grep -q "something" file; [ $? -eq 0 ] && echo "yes" || echo "no" 
```

也可以写成

```
grep -q "something" file; test $? -eq 0 && echo "yes" || echo "no" 
```

但是在这种情况下您不需要显式测试它，因此与以下内容相同：

```
grep -q "something" file && echo "yes" || echo "no" 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-02-06T06:59:07.763

```
##To check for a particular  string in a file

cd PATH_TO_YOUR_DIRECTORY #Changing directory to your working directory
File=YOUR_FILENAME  
if grep -q STRING_YOU_ARE_CHECKING_FOR "$File"; ##note the space after the string you are searching for
then
echo "Hooray!!It's available"
else
echo "Oops!!Not available"
fi 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-05-27T11:28:38.853

```
grep -q [PATTERN] [FILE] && echo $? 
```

如果找到模式，则退出状态为`0`(true)；否则为空字符串。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-04-11T10:27:42.030

如果您想检查字符串是否与整行匹配并且如果它是固定字符串，您可以这样做

```
grep -Fxq [String] [filePath] 
```

例子

```
 searchString="Hello World"
 file="./test.log"
 if grep -Fxq "$searchString" $file
    then
            echo "String found in $file"
    else
            echo "String not found in $file"
 fi 
```

从 man 文件中：

```
-F, --fixed-strings

          Interpret  PATTERN  as  a  list of fixed strings, separated by newlines, any of 

which is to be matched.
          (-F is specified by POSIX.)
-x, --line-regexp
          Select only those matches that exactly match the whole line.  (-x is specified by 

POSIX.)
-q, --quiet, --silent
          Quiet; do not write anything to standard output.  Exit immediately with zero 

status  if  any  match  is
          found,  even  if  an error was detected.  Also see the -s or --no-messages 

option.  (-q is specified by
          POSIX.) 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-01-29T00:15:17.203

```
if grep -q [string] [filename]
then
    [whatever action]
fi 
```

***例子***

```
if grep -q 'my cat is in a tree' /tmp/cat.txt
then
    mkdir cat
fi 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-11-16T10:41:21.603

试试这个：

```
if [[ $(grep "SomeString" $File) ]] ; then
   echo "Found"
else
   echo "Not Found"
fi 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-08-01T08:23:44.757

我做了这个，似乎工作正常

```
if grep $SearchTerm $FileToSearch; then
   echo "$SearchTerm found OK"
else
   echo "$SearchTerm not found"
fi 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-07-02T09:36:54.963

```
grep -q "something" file
[[ !? -eq 0 ]] && echo "yes" || echo "no" 
```

# python - 在支持 +python3 的 Macvim 中，我应该使用哪个命令来执行当前文件本身？

> ID：11287862
> 
> 赞同：0
> 
> 时间：2012-07-02T04:40:11.907
> 
> 标签：python, vim, macvim

我刚刚为 Python 3 设置了 IDE 环境。我想知道如何运行当前在 vim 中编辑的文件。我记得命令是“:python %”，但它不适用于 Python 3。

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:07:42.250

对于 Python 3，只需简单地执行`:!python3 %`

* * *

此外，您可能还希望将其映射到设置中的热键，就像我所做的那样：

`noremap <D-r> <esc>:w<CR>:!python3 %<CR>`

这样您就可以随时按下`Command+r`以使用 Python 3 执行当前代码（它将自动保存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T04:42:56.003

你可以使用

```
:!python % 
```

它肯定会奏效。现在你的 python 应该指向 python3 在这种情况下，如果不只是写`:!python3 %`而不是

# javascript - 如何在移动设备/iPad 上获取 e.offsetX

> ID：11287877
> 
> 赞同：16
> 
> 时间：2012-07-02T04:43:05.020
> 
> 标签：javascript, ipad, events

当我在 iPad 上尝试时，e.touches[0] 中没有 offsetX。有谁知道我在哪里可以得到这个 offsetX 的值？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-09-12T10:18:44.707

基于建议答案中的评论的正确答案：

```
e.offsetX = e.touches[0].pageX - e.touches[0].target.offsetLeft;     
e.offsetY = e.touches[0].pageY - e.touches[0].target.offsetTop; 
```

这会忽略任何转换，例如旋转或缩放。还要确保检查是否有任何接触。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-02T05:26:13.970

您可以使用 clientX 或 pageX，请参见[此处](http://www.sitepen.com/blog/2011/12/07/touching-and-gesturing-on-iphone-android-and-more/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-19T14:32:07.977

谢谢，@Kontiki - 这是最终为我解决问题的解决方案：

```
if("touchmove" == e.type)
{

    let r = canvas.getBoundingClientRect();
    currX = e.touches[0].clientX - r.left;
    currY = e.touches[0].clientY - r.top;
}
else
{
    currX = e.offsetX;
    currY = e.offsetY;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-02T14:00:31.577

页面 - 偏移量/客户端方法对我不起作用。仍然有一个偏移量。我发现另一个完美的解决方案：

```
let r = canvas.getBoundingClientRect();

let x = e.touches[0].pageX - r.left;
let y = e.touches[0].pageY - r.top; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-06T09:58:22.070

在元素上使用 jQuery 的`.on`函数绑定事件处理程序时遇到了类似的问题`canvas`（不知道原因）。

我通过使用绑定事件处理程序解决了它`addEventListener`。处理程序中的`event`对象具有使用适当值定义的 offsetX 和 offsetY。

希望能帮助到你...

# hadoop - Hadoop verification block

> ID：11287879
> 
> 赞同：0
> 
> 时间：2012-07-02T04:43:28.700
> 
> 标签：hadoop

I have a problem when start hadoop.

DataBlockScanner consume up to 100% of one CPU.

Master log is:

> 2012-04-02 11:25:49,793 INFO org.apache.hadoop.hdfs.StateChange: *BLOCK* NameSystem.processReport: from 192.168.33.44:50010, blocks: 16148, processing time: 13 msecs

Slave log is:

> 2012-04-02 11:09:34,109 INFO org.apache.hadoop.hdfs.server.datanode.DataBlockScanner: Verification succeeded for blk_-1757906724564777881_10532084

I checked hadoop fsck and found no error or corrupt block.

Why is the CPU usage so high, and how to stop the block verification?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:11:05.297

无需挖掘源代码来确认，这可能只是启动时的问题，因为数据节点必须树遍历数据目录（/ies）以发现所有块，然后将它们报告给名称节点。再次没有来源，我无法确认每个块的校验和是否也在启动时得到验证，这可能是 100% CPU 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:49:57.593

谢谢。我认为我的 CPU 使用率很高，因为闰秒。我认为问题是 java。当我启动 hadoop 时，cpu 使用率很高。

[http://en.wikipedia.org/wiki/Leap_second](http://en.wikipedia.org/wiki/Leap_second)

# python - python interpretor automaticlly restarting without returning answer

> ID：11287880
> 
> 赞同：0
> 
> 时间：2012-07-02T04:43:30.490
> 
> 标签：python, recursion

Is there any reason why python interpretor will automatically restart when a recursive function is called? I'm programming a quick sort algorithm, and trying to sort a an large array of digits (order 10^4), but when I try to sort the full array python is restarting, i.e. giving me:

> > > > ============================== RESTART ==============================

and all the values/functions stored in memory disappears. N.B. the code works fine for smaller values (<10^4). Is there fail safe been triggered due to the large amount of recursion?

added: python & IDLE info:

![enter image description here](../Images/095dadd1afda3f2368d25254ce1a897f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:01:24.210

您最有可能在 IDLE 中收到此消息。在 IDLE 中，“===RESTART===”只是 IDLE 刷新其先前代码的内存。

更新

如果您通过右键单击程序并选择“使用 IDLE 编辑”进入 IDLE，则不会出现这些 ====RESTART==== 消息；IDLE 以稍微不同的模式运行。但一切仍然有效。

[在此处](http://www.ai.uga.edu/mc/idle/index.html)阅读有关 IDLE的更多信息

# javascript - 谷歌地图在滚动时拖动

> ID：11287883
> 
> 赞同：-2
> 
> 时间：2012-07-02T04:44:12.287
> 
> 标签：javascript, jquery, google-maps

我在我的网站中使用了谷歌地图，包含地图的容器 div 是可拖动的。现在我的问题是，当我滚动地图时，它也会拖动。我想在地图滚动时停止拖动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T05:18:52.907

你能提供更多细节吗？如果 google 地图完全填满了你的 div，你打算如何拖动 div？如果它没有完全填满 div（比如地图周围有边框），那么在 mouseDown 中，您可以检查发件人是 div 而不是地图。然后你可以通过拖动地图来移动地图，或者通过拖动边框来移动div和地图。

# c# - Running .vbs script file in asp.net using process class

> ID：11287885
> 
> 赞同：0
> 
> 时间：2012-07-02T04:44:37.617
> 
> 标签：c#, asp.net

I need to run a vbscript file in my asp.net application. This vbscript file generate a pdf and store it in specified location. I used process class and give the command it is working fine but when i host the application in IIS 7.0 it is not working rather it does not give any error too. I am using admin user.

What could be the issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:21:31.947

iis中当前appPool的用户应该有执行权。此用户默认为 ApplicationPoolIdentity，它不是您登录的 Windows 帐户。尝试将其更改为具有管理员访问权限的 Windows 帐户。

# ruby-on-rails - Ruby on Rails 嵌套资源未定义方法

> ID：11287886
> 
> 赞同：1
> 
> 时间：2012-07-02T04:44:44.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在这里看到了类似的例子。但这对我不起作用。我想为帖子创建/提交活动。有几天下一个帖子。并且活动在特定日期下。请参阅下面的模型。

楷模：

```
class Post < ActiveRecord::Base
  has_many :dayinposts
  has_many :activitys, :through => :dayinposts
end

class Dayinpost < ActiveRecord::Base
  belongs_to :post
  has_many :activitys
end

class Activity < ActiveRecord::Base
  belongs_to :dayinpost
end 
```

路线：

```
resources :posts do
  resources :dayinposts  do
resources :activitys
  end 
end 
```

耙路线

```
post_dayinpost_activitys GET /posts/:post_id/dayinposts/:dayinpost_id/activitys(.:format)          activitys#index
                         POST /posts/:post_id/dayinposts/:dayinpost_id/activitys(.:format)          activitys#create 
```

显示.html.erb

```
<% @post.dayinposts.each do |dayinpost| %>

<% dayinpost.activitys.each do |activity| %>
  <p>
  <b>Action:</b>
  <%= activity.action %>
  </p>
<% end %>

<%= form_for([@post, dayinpost, dayinpost.activitys.build]) do |f| %>
  <div class="field">
  <%= f.label :action %><br />
  <%= f.text_field :action %>
  </div>

<div class="actions">
<%= f.submit %>
</div>
<% end %>

<% end %> 
```

错误

```
undefined method `post_dayinpost_activities_path' for #<#<Class:0x40cb6d8>:0x40c9890> 
```

但我在 rake 路线中看到了它......在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:59:21.593

“活动”的正确复数形式是“活动”。

在你的`config/routes.rb`你有“活动”，这是错误的。

# objective-c - 得到错误 NSInternalInconsistencyException “参数必须是非零”

> ID：11287889
> 
> 赞同：1
> 
> 时间：2012-07-02T04:45:22.007
> 
> 标签：objective-c, cocos2d-iphone, null, nsobject

我运行这段代码：

```
- (void)unitButtonButtonTapped:(id)sender {
    [_label setString:@"Last button: Unembossed square"];
    MilitaryUnits *target = nil;
    target = [Peasants militaryUnits];
    target.position = ccp(100, 450);
    [self addChild:target];
} 
```

我收到此错误： ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“参数必须为非零”

这些是我的 .h 和 .m 类文件

```
#import "cocos2d.h"

@interface MilitaryUnits : CCSprite {
    int _experience;
    int _number_of_units;
    int _stamina;
    int _armor_level;
    int _weapon_levell;
}

@property (nonatomic, assign) int experience;
@property (nonatomic, assign) int number_of_units;
@property (nonatomic, assign) int stamina;
@property (nonatomic, assign) int armor_level;
@property (nonatomic, assign) int weapon_levell;

@end

@interface Peasants : MilitaryUnits{

}
+(id)militaryUnits;

@end

#import "MilitaryUnits.h"

@implementation MilitaryUnits

@synthesize number_of_units = _number_of_units;
@synthesize stamina = _stamina;
@synthesize experience = _experience;
@synthesize armor_level = _armor_level;
@synthesize weapon_levell = _weapon_levell;

@end

@implementation Peasants

+ (id)militaryUnits {

    Peasants *militaryUnits = nil;
    if ((militaryUnits = [[[super alloc] initWithFile:@"Target.png"] autorelease])) {
    }
    return militaryUnits;

}

@end 
```

注意，我使用的是 cocos 2d

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:21:05.450

在我看来你的精灵是零，即找不到文件“Target.png”。确保文件名与您在代码中拼写的大小写相同（在查找器中），并且该文件包含在 Xcode 中目标的成员资格中。

还

```
+ (id)militaryUnits {

    Peasants *militaryUnits;
    if ((militaryUnits = [[[super alloc] initWithFile:@"Target.png"] autorelease])) {
        return militaryUnis;
    } else {
        CCLOGERROR(@"your favorite whine style for errors like file not found");
        return nil;
    }  
} 
```

# json - FabricJS - Error when loading Canvas from JSON

> ID：11287891
> 
> 赞同：4
> 
> 时间：2012-07-02T04:45:55.750
> 
> 标签：json, canvas, load, fabricjs

I'm using a custom object extended from `fabric.Image` in my canvas, as suggested in [this answer](https://stackoverflow.com/a/11276133/187907). When I retrieve the json string from the server, I get odd errors when attempting to load it to the canvas:

```
var canvas = new fabric.Canvsd();

function loadCanvas(resp) {
  // response object contains a data field
  // that's essentialy a JSON string
  var json = JSON.parse(resp.data);
  canvas.loadFromDatalessJSON(json);
} 
```

I get an odd printout to the console: `Cannot call method 'setupState' of undefined (fabric.min.js: 1118)`. I tried replacing the call with `canvas.loadFromJSON(json)`, and instead got a vague `SyntaxError: Unexpected token o` error. When I used a regular `fabric.Image` before the change suggested in the linked thread, this code worked fine. I fear this might be something I'm missing when I extended favric's Image class with aditional data. Thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:14:48.400

经过一番搜索，我在 fabricjs google 组中看到了一个[类似的线程。](https://groups.google.com/forum/?fromgroups#!topic/fabricjs/Am5_6w2D13w)原来我搞砸了三件事：

1.  `fromObject()`对于我制作的另一个自定义对象（我有几个），我在不同的位置缺少回调定义。
2.  `loadFromDatalessJSON()`当我应该简单地使用时，我正在使用`loadFromJSON()`。
3.  `JSON.parse(json)`在将 json 字符串传递给函数之前，我将它解析为实际的 JSON `loadFromJSON()`，该函数需要一个 json 字符串并在内部处理解析。

德普。

# facebook - Get total number of subscribed people to person with fql

> ID：11287898
> 
> 赞同：0
> 
> 时间：2012-07-02T04:47:57.880
> 
> 标签：facebook, facebook-fql, fql.multiquery

I am currently finding the number of subscribers to a profile with the graph api, but in doing so many calls is very slow, so I would get all the numbers with a multiquery to optimize time

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:38:57.970

Facebook`total_count`在调用用户的`subscribers` [连接](https://developers.facebook.com/docs/reference/api/user/#subscribers)时返回，这就是您所需要的。

如果您需要进行多次调用，请使用[Batch API](https://developers.facebook.com/docs/reference/api/batch/)。

# ruby - 如何从 Ruby 脚本创建一个新的 Zabbix 事件？

> ID：11287899
> 
> 赞同：0
> 
> 时间：2012-07-02T04:48:00.367
> 
> 标签：ruby, zabbix

这是否可以从 Ruby 脚本生成新的 Zabbix 事件？有人建议我使用[zabbix_sender](http://www.zabbix.com/documentation/1.8/manpages/zabbix_sender)脚本，但我找不到任何示例。

此外，我找不到与[事件](http://www.zabbix.com/documentation/1.8/api/event)创建相关的任何 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:57:19.343

首先创建一些 zabbix trapper 类型的项目，然后您可以通过 zabbix_sender 向其名称发送一些值。您可以发送一个值或多个带有时间戳的收集数据。[这是文档](http://www.zabbix.com/documentation/2.0/manual/concepts/sender)。

或者，您可以编写自己的 zabbix 陷阱发送器。[协议](http://www.zabbix.com/documentation/1.8/protocols)很简单。我在 Python 中做了同样的事情......没有外部命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T11:53:07.083

Zabbix API 不允许通过设计更新项目值。

我已经调查了几个选项*，我从 Ruby 更新 Zabbix 项目值的首选方法是使用[miyucy 的要点](https://gist.github.com/miyucy/1170577)中的这种方法：

带有简单错误处理程序的示例：

```
s = Zabbix::Sender.new 'zabbix_server', 10051

zabbix_resp = s.send('host', item_key, value)

if zabbix_resp["response"] != "success" or zabbix_resp["info"].split(';')[1] != " failed: 0"
  puts "error: zabbix responded with #{zabbix_resp} when trying to update #{item_key}"
end 
```

*另一种方式的一个例子 -[调用 zabbix_sender 二进制](http://www.108.bz/posts/it/parallel-http-monitoring-with-ruby-and-zabbix/)

# delphi - BlockWrite I/O Error 1784

> ID：11287901
> 
> 赞同：-1
> 
> 时间：2012-07-02T04:48:01.100
> 
> 标签：delphi

I get an **I/O Error 1784** due to blockwrite in the following code which overwrites 3 times a file.

I presume I/O Error 1784 means ERROR_INVALID_USER_BUFFER.

I don't know why. The error appears sometimes, not at each run...

**Could you help me ?**

```
 procedure overwrite_files_3_times(iPath : string); 
    var
      numwritten : integer;
      iFileSize, iPosition : int64;
      InFile : File of byte;
      ipBufBlock : pTBUFFER;
      k : integer;

    begin
      if not FileExists(iPath) then
        exit;   

      FileMode := fmOpenRead or fmOpenWrite or fmShareDenyNone;      

      AssignFile(InFile, iPath);
      Reset(InFile);

      iFileSize := getfilesize2(iPath);  // retrieve the filesize
      iPosition := 0;

          // 3 overwrites
          for k:= 0 to 3-1 do
            begin
              Seek(InFile, 0);
              iPosition := 0;
              ///////////////////
              // on écrit
              while iPosition + sizeOf(TBuffer) < iFileSize do
                begin
                  BlockWrite(InFile,ipBufBlock^,sizeOf(TBuffer),numwritten);               
                  iPosition := iPosition + sizeOf(TBuffer);                                
                end;

              // the end
              if iPosition <= iFileSize -1 then
                begin
                 BlockWrite(InFile,ipBufBlock^,iFileSize-iPosition,numwritten);    //-->> generate I/O Error 1784       
                end;                                                                      
            end;

      ////////////////
      CloseFile(InFile);
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:32:29.613

假设 pTBUFFER 是指向 TBUFFER 的指针，那么 ipBufBlock 在哪里初始化？如果不是，ipBufBlock 可能指向任何东西——甚至是无法读取因此无法写入文件的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T06:58:20.140

其他人有类似的错误，所以这也可能适用于您的情况：

[WriteFile 返回错误 1784](https://stackoverflow.com/questions/6537416/writefile-returning-error-1784)

——阿让

# javascript - 获取静态元素在身体上的位置？

> ID：11287905
> 
> 赞同：0
> 
> 时间：2012-07-02T04:48:43.747
> 
> 标签：javascript

即使它有，是否有可能获得身体中元素的位置`position:static`？

EG：如果我一个接一个地拥有三个元素：

```
<div id="1"></div>
<div id="2"></div>
<div id="3"></div>
<div id="4"></div> 
```

每个元素有 25px。我希望能够找到元素的位置`id=3`。（它应该返回 50px）

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T04:55:52.600

怎么样`offsetTop`

```
document.getElementById('3').offsetTop 
```

也`offsetLeft`得到水平位置

```
document.getElementById('3').offsetLeft 
```

[小提琴](http://jsfiddle.net/dELxU/)

# php - jquery input detection after tirgger key for online pos

> ID：11287907
> 
> 赞同：0
> 
> 时间：2012-07-02T04:49:45.330
> 
> 标签：php, jquery, barcode, barcode-scanner

im writing a php pos system for my store, and im dealing with the barcode system now.

basically i want to be able to monitor the window, and when the barcode comes in put it in the input search box and submit it.

the 2nd part is the easy part, im having difficulty with the first part.

i made the scanner append te pipeline charecter (|) to the barcode, and i have jquery monitoring the window for any key presses that are pipeline, but how would i read the key presses after the pipeline once its triggered? maybe i have the wrong approach to this..?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:49:39.603

上次我构建类似的东西时，页面有一个很大的胖`<input>`元素，它是自动聚焦的。您的扫描仪充当键盘，除了将字符串粘贴到一个事件中，而不是为每个不同的字符发出键事件。（至少我们的扫描仪是这样）。

添加一个`<input>`元素，聚焦它。当您的扫描仪发送代码时，它将被写入`<input>`. 在那里，您可以对事件做出反应，以查看代码`keyup`是否`change`已完整编写，然后做出相应的反应。在我们的例子中，一个换行符 ( `\n`) 被附加到代码中以标记它的结束。但我想管道 ( `|`) 也可以。

# mysql - MySQL - 多重联合

> ID：11287909
> 
> 赞同：0
> 
> 时间：2012-07-02T04:49:48.697
> 
> 标签：mysql, sql, union

**（任何能够解释我如何在 SQL 和 SQLAlchemy 中做到这一点的人都可以获得互联网奖励。）**

我设置了三个表，如下所示：

```
**Bottom:**
id
name
middle_id

**Middle:**
id
name
top_id

**Top:**
id
name 
```

每个底部都有一个中间，每个中间都有一个顶部。我想在数据库上进行搜索，以便当用户输入查询时，它将搜索底部、中间和顶部。如果有人搜索一个恰好在 Top 的项目，它将通过 Middle 返回所有与 Top 相关的 Bottom.*。

这是一个适用于两个级别的查询：

```
SELECT *
FROM   Bottom
WHERE  name LIKE '%query%'

UNION

SELECT Bottom.*
FROM   Middle JOIN Bottom ON Bottom.middle_id = Middle.id
WHERE  Middle.name LIKE '%query%' 
```

如何扩展它以便它也可以搜索 Top WHERE Top.name LIKE '%query%'，但不是返回 Middle.*，而是返回 Bottom.*？这是一些不起作用的 SQL，但我想解释了我想要实现的目标：

```
SELECT *
FROM   Bottom
WHERE  name LIKE '%query%'

UNION

SELECT Bottom.*
FROM   Middle JOIN Bottom ON Bottom.middle_id = Middle.id
WHERE  Middle.name LIKE '%query%'

UNION

SELECT Bottom.*
FROM   Top JOIN Middle ON Middle.top_id = Top.id
WHERE  Top.name LIKE '%query%' 
```

换句话说，如果我在底部有一个与中间条目相关的条目，并且中间的条目与顶部的条目相关，如果我在顶部搜索适当的名称，它将不会返回中间条目与它相关，但与相关的中间条目相关的底部条目。

这是一个例子：

数据：

```
**Bottom**
id        1
name      Gus Fring
middle_id 1

**Middle**
id        1
name      Jesse Pinkman
top_id    1

**Top**
id        1
name      Walter White 
```

如果我搜索“Walter White”，它不会返回中间关系（Jesse Pinkman），而是返回底部关系到中间关系的结果（Gus Fring）。

这个问题已经困扰了我一段时间，我非常感谢任何帮助。提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T05:17:50.150

我认为你应该使用 LEFT JOINS。您所做的是连接所有表，然后搜索值。

让我为您提供一些代码：

```
SELECT
 bottom.name,
 middle.name,
 top.name
FROM
 bottom
 LEFT JOIN middle ON top.id = middle.id
 LEFT JOIN top ON middle.id = top.id
WHERE
 middle.name LIKE '%name%'
 OR top.name LIKE '%name%'
 OR bottom.name LIKE '%name%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T05:12:36.607

试试这个

```
select
  b.id,
  b.name,
  b.middle_id,
  m.top_id,
  m.name,
  t.name
from bottom as b
  left join (select  id,`name`, top_id  from Middle) as m  on m.id = b.middle_id
  left join (select  id,`name`from Top) as t   on t.id = m.top_id 
```

# iphone - How to detect wether any button is clicked or not in iphone

> ID：11287910
> 
> 赞同：0
> 
> 时间：2012-07-02T04:49:56.950
> 
> 标签：iphone, ios, xcode

I have an iphone app i want that befor moving to next screen it should click on any of the 4 or five button i have and if user does not click on any button then it may not move to next screen

Firs two button from which user must click any one to move to next otherwise not

```
-(IBAction)locationOneButtonAction{

    UIImage *buttonImage = [UIImage imageNamed:@"radiogreen.png"];  
    UIImage *buttonImageOne=[UIImage imageNamed:@"radiowhite.png"];

    [locationOneButton setImage:buttonImage forState:UIControlStateNormal];
    [locationOneButton setImage:buttonImage forState:UIControlStateNormal];

    [locationThreeButton  setImage:buttonImageOne forState:UIControlStateNormal];
    [locationTwoButton  setImage:buttonImageOne forState:UIControlStateNormal];

    [locationFourButton  setImage:buttonImageOne forState:UIControlStateNormal];
    [locationFiveButton  setImage:buttonImageOne forState:UIControlStateNormal];
    [locationSixButton  setImage:buttonImageOne forState:UIControlStateNormal];

    resturantLocation=@"Common Man - Bedford, MA";
}

-(IBAction)locationTwoButtonAction{

    UIImage *buttonImage = [UIImage imageNamed:@"radiogreen.png"];
    UIImage *buttonImageOne=[UIImage imageNamed:@"radiowhite.png"];

    [locationOneButton setImage:buttonImageOne forState:UIControlStateNormal];
    [locationThreeButton  setImage:buttonImageOne forState:UIControlStateNormal];
    [locationTwoButton  setImage:buttonImage forState:UIControlStateNormal];
    [locationFourButton  setImage:buttonImageOne forState:UIControlStateNormal];

    [locationFiveButton  setImage:buttonImageOne forState:UIControlStateNormal];
    [locationSixButton  setImage:buttonImageOne forState:UIControlStateNormal];

    resturantLocation=@"Common Man - Arlingtion, NY";
} 
```

Next Button Move to the next Screen

```
-(IBAction)nextButton{

    FoodViewController*targetController=[[FoodViewController alloc]init];
    targetController.resturantLocation=resturantLocation;

    [self.navigationController pushViewController:targetController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:56:20.240

最简单的方法是在 .h 文件中获取一个标志。

```
BOOL _flag; 
```

在`viewWillAppear`将其设置为`_flag = NO;`

在进入下一个屏幕之前必须单击的每个按钮的操作上，将其设置为`YES`：

```
-(IBAction)locationOneButtonAction{
    // your stuff
    _flag = YES;
}
-(IBAction)locationTwoButtonAction{
    // your stuff
    _flag = YES;
} 
```

在你的下一个按钮点击使用它像

```
-(IBAction)nextButton{

    if(_flag) {
        FoodViewController*targetController=[[FoodViewController alloc]init];
        targetController.resturantLocation=resturantLocation;
        [self.navigationController pushViewController:targetController animated:YES];
    }
} 
```

希望这会有所帮助:) 如果您正在寻找其他东西，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T04:56:11.953

您可以使用 bool 标志来识别是否单击了任何按钮。如果单击了任何按钮，只需将该 bool 标志设为 true，否则将其初始化为 false，当用户单击下一步时，只需检查该 bool 标志是否为 true 或false。如果为 false，则不允许用户继续。

# wcf - Consuming a WCF Service in Mono?

> ID：11287914
> 
> 赞同：0
> 
> 时间：2012-07-02T04:50:17.573
> 
> 标签：wcf, mono, wcf-binding

I am trying to consume a WCF Webservice on Mono using the proxy but I am getting the following exception:

> System.NotImplementedException: The requested feature is not implemented. at System.ServiceModel.Configuration.WSHttpBindingElement.OnApplyConfiguration (System.ServiceModel.Channels.Binding binding) [0x00000] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Configuration/WSHttpBindingElement.cs:101 at System.ServiceModel.Configuration.StandardBindingElement.ApplyConfiguration (System.ServiceModel.Channels.Binding binding) [0x00030] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Configuration/StandardBindingElement.cs:143 at System.ServiceModel.Configuration.ConfigUtil.CreateBinding (System.String binding, System.String bindingConfiguration) [0x00053] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel.Configuration/ConfigUtil.cs:102 at System.ServiceModel.ChannelFactory.ApplyConfiguration (System.String endpointConfig) [0x000d9] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel/ChannelFactory.cs:134 at System.ServiceModel.ChannelFactory.InitializeEndpoint (System.String endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) [0x00024] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/System.ServiceModel/System.ServiceModel/ChannelFactory.cs:309

I am not sure exactly what this is but I take it that it probably is to do with Mono not supporting authentication in WCF Webservices.

I need to be able to consume this WCF webservice on Mono or Ubuntu somehow. What are my options?

Is there something else that I can use to access it as a SOAP service and bypass using the .Net WCF code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:33:15.853

这是我根据您提供的信息的回答。只要 WCF 服务尊重已建立的行业标准 WS-*，您就可以将其用作 SOAP 服务。我不确定 Mono 是如何演变的，以便为您提供一个现成的运行客户端，但根据您的问题，似乎缺少功能。在那种情况下，我认为您将不得不自己做一些管道工作。

# sax - How to get the attribute value in the SAX parser

> ID：11287915
> 
> 赞同：-1
> 
> 时间：2012-07-02T04:50:31.617
> 
> 标签：sax, saxparser

I have use the SAXParser to read the xml format. Then the startelement method run but I have no idea how to get the url in the method. I dont know what is the solution. Thank you

```
<enclosure length="1234567" type="image/jpeg" url="http://www.nasa.gov/images/content/664322main_31_lands_cropped_516-387.jpg"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:12:35.770

**什么语言？什么实现？**至少标记您尝试用哪种语言实现总是一个好主意。

想法是遍历 startElement() 函数/方法中的 attributes 参数：

一个Java解决方案：

```
public void startElement(String namespaceURI, String localName, String qName, Attributes atts)
{
   int len = atts.getLength();
   // Loop through all attributes and save them as needed
   for(int i = 0; i < len; i++)
   {
      String sAttrName = atts.getLocalName(i);
      if(sAttrName.compareTo("URL") == 0) 
      {
          String sVal = atts.getValue(i);
          // Do something with the *.jpg
      }
   }
} 
```

C++ [Xercesc](http://xerces.apache.org/xerces-c/apiDocs-3/classDefaultHandler.html#931f1eac710f7d81d2714c78a4c8cb60)解决方案：

```
void MyClass::startElement(const XMLCh *const uri, const XMLCh *const localname,
                                  const XMLCh *const qname, const Attributes &attributes)
{
    // Loop through all attributes and save them as needed
    XMLSize_t len = attributes.getLength();
    for(XMLSize_t index = 0; index < len; index++)
    {
         CString cAttrName(attributes.getLocalName(index));
         if(cAttrName.Compare(L"URL") == 0)
         {
              CString cVal(attributes.getValue(index));
              // Do something with the *.jpg
         }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:10:15.433

属性被传递到 startElement 方法中：

```
for (int i = 0; i < attrs.getLength(); i++) {
    String attributeName = attrs.getLocalName(i);
    String attributeValue = attrs.getValue(i);
    System.out.println("found attribute with localname=" + attributeName 
    + " and value=" + attributeValue");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T00:35:28.170

[这是我对SAX ContentHandler](http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html)的尝试；它返回属性和键/值对。

```
private String mCurrentEl = null;

/** on each element: start */
public void startElement (String uri, String localName, String qName, Attributes attrs) throws SAXException {

    /** keeping a reference */
    mCurrentEl = localName;

    /** each attribute */
    for (int i=0; i < attrs.getLength(); i++) {
        String name  = attrs.getLocalName(i);
        String value = attrs.getValue(i);
        System.out.println("attribute \"" + name + "\" has value \"" + value + "\".");
   }

}

/** on each element: data */
public void characters(char[] chars, int start, int length) throws SAXException {
    String data = new String(chars, start, length).trim();
    if(! data.equals("") && mCurrentEl != null) {
        System.out.println(mCurrentEl + ": " + data);
    }
}

/** on each element: end */
public void endElement(String uri, String localName, String qName) throws SAXException {
    mCurrentEl = null;
} 
```

# hibernate - Hibernate 中的刷新和提交有什么区别？

> ID：11287916
> 
> 赞同：15
> 
> 时间：2012-07-02T04:50:32.603
> 
> 标签：hibernate

Hibernate 中的刷新和提交有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T05:26:45.380

将 JDBC 连接的状态与内存中保存的对象的状态同步的过程称为刷新。

根据 FlushMode 设置，这发生在以下几点：

*   在 FlushMode.AUTO 时执行某些查询之前（这是默认设置）。
*   FlushMode.COMMIT 时来自 org.hibernate.Transaction.commit()
*   从 Session.flush()

主要区别在于，当 FlushMode 设置为 COMMIT 时，commit() 会刷新会话并结束工作单元，并且您无法回滚事务，因为 flush() 只是对会话进行正常同步。

[冲洗模式](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/FlushMode.html)

更多[信息](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/transaction/JDBCTransaction.html#commit%28%29)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-14T13:39:56.153

从[休眠文档](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#flush())：

> 刷新是将底层持久存储与内存中保存的持久状态同步的过程。

好吧，对于一些在阅读了上面的陈述后可能会想到下一个问题（例如，*flush*和*commit之间有什么区别）的人来说，上面的陈述是令人困惑的。*

*Flush*就像实际执行语句但不提交它。例如：您打开任何 SQL 执行工具（如 Oracle SQL Developer 或其他），打开一个会话并触发*更新语句*。打开新的 SQL 会话，直到或除非您在第一个会话中进行*提交*，您才会看到更新。因此查询在特定的 Oracle 会话中执行但未提交。

当您调用 Hibernate 的`save()`or`update()`时，并不意味着底层查询会同时执行。它通常在*显式*`commit`完成或事务结束时执行。但是在某些情况下（例如获取分配给瞬态对象的 ID，以控制 Hibernate 会话的大小，例如*批量更新*，否则您可能会*出现内存不足*异常）您希望执行查询，但不提交它。冲洗在这里有帮助。

# android - 适用于 Google Docs 的 Android 文件浏览器

> ID：11287918
> 
> 赞同：-1
> 
> 时间：2012-07-02T04:50:44.520
> 
> 标签：android, google-api, google-docs-api, google-drive-api, file-browser

我想知道如何在 Android 设备中为 Google 文档创建一个简单的文件浏览器，它可以列出、查看、删除文件并将文件打印到打印机。所有这些功能都可以使用 webview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:31:58.987

您应该使用 Google Drive API：[https ://developers.google.com/drive/](https://developers.google.com/drive/)

它支持 Android，因此您可以编写自己的文件浏览器，但您还应该考虑与 Android 的原生 Drive 应用程序集成：

[https://developers.google.com/drive/integrate-android-ui](https://developers.google.com/drive/integrate-android-ui)

# java - JNI - 本机方法异常

> ID：11287919
> 
> 赞同：2
> 
> 时间：2012-07-02T04:50:51.377
> 
> 标签：java, eclipse, dll, java-native-interface

我正在尝试在 Eclipse 中的 java 应用程序中使用 dll，但是每当我尝试调用与该 dll 关联的任何方法时，都会出现运行时异常。

该dll存在于以下地址，我在eclipse中的**Run/Debug Settings中传入了该地址：**

```
-Djava.library.path="C:\Program Files\NPortAdminSuite\ipserial\lib\x86;${env_var:PATH}" 
```

**代码：**

类测试{

```
 public native int nsio_init();

  public static void main(String[] args) {
          System.loadLibrary("ipserial");
          new Test().nsio_init(); //This part is throwing an exception
  }
} 
```

**错误：**

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: NPortConnection.nsio_init()I
    at Test.nsio_init(Native Method)
    at Test.main(Test.java:27) 
```

该命令`dumpbin /exports "C:\Program Files\NPortAdminSuite\ipserial\lib\x86\IPSerial.dll"`还返回我试图从该 dll 调用的方法的名称 ![在此处输入图像描述](../Images/7c7305d5685ab55823c4a95c99af2107.png)

谁能告诉如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T05:56:05.233

看起来您正试图直接从 java 代码调用 dll 函数。这是不可能的（直接）。您需要编写一个在 java 和本机 dll 之间转换的层。

看看这些资源：

*   [Java 原生接口](http://en.wikipedia.org/wiki/Java_Native_Interface)
*   [Oracle Java 本机接口](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/)

* * *

解决该问题的另一种方法是使用[JNA](https://github.com/twall/jna)，例如查看[维基百科文章](http://en.wikipedia.org/wiki/Java_Native_Access)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:15:20.253

**编辑：**   另请参阅[使用函数而不是底部预处理器宏的优雅答案](https://stackoverflow.com/a/15289742/938111)。

* * *

如果你想实现[JNI](https://en.wikipedia.org/wiki/Java_Native_Interface "Java 原生接口")，我就是这样做的：

让我们想象一下文件中的以下类`example.java`：

```
package my.group.mypackage;

public class Example {
  static {
    System.loadLibrary("my-DLL-name");
  }

  public Example() {
    /* ... */
  }

  private native int    function1(int); //declare DLL functions
  private native String function2(int); //using the keyword
  private native void   function3(int); //'native'

  public void dosomething(int value) {
    int result = function1(value);  
    String str = function2(value);  //call your DLL functions
    function3(value);               //as any other java function
  }
} 
```

`example.class`从`example.java`（使用`javac`或您的 EDI 或 maven ...）生成。然后`Java_my_group_mypackage_example.h`使用. `example.class`_`javah`

C/C++ 函数的声明在`Java_my_group_mypackage_example.h`. 现在我们例如实现这些函数的定义（主体）`Java_my_group_mypackage_example.cpp`。更喜欢使用 C++（而不是 C）来捕获来自其他 DLL 的异常。

```
JNIEXPORT jlong JNICALL Java_my_group_mypackage_example_function1
  (JNIEnv *env, jobject object, jlong value)
{
  try 
  {
    /* ... my processing ... */
    return jlong(result);
  }
  CATCH_CPP_EXCEPTION_AND_THROW_JAVA_EXCEPTION
  return 0;
}

JNIEXPORT jstring JNICALL Java_my_group_mypackage_example_function2
  (JNIEnv *env, jobject object, jlong value)
{
  try 
  {
    /* ... my processing ... */
    jstring jstr = env->NewStringUTF("my result");
    return  jstr;
  }
  CATCH_CPP_EXCEPTION_AND_THROW_JAVA_EXCEPTION
  return 0;
}

JNIEXPORT void JNICALL Java_my_group_mypackage_example_function3
  (JNIEnv *env, jobject object, jlong value)
{
  try 
  {
    /* ... my processing ... */
  }
  CATCH_CPP_EXCEPTION_AND_THROW_JAVA_EXCEPTION
} 
```

C 预处理器宏`CATCH_CPP_EXCEPTION_AND_THROW_JAVA_EXCEPTION`定义如下。它将 C++ 异常转换为 Java 异常。使用您自己的代码自定义该代码`mypackage::Exception`并将其放在一个公共标头中（不在 `Java_my_group_mypackage_example.h' 中，因为它可以再次重新生成）。

```
#define CATCH_CPP_EXCEPTION_AND_THROW_JAVA_EXCEPTION              \
                                                                  \
  catch (const mypackage::Exception& e)                           \
  {                                                               \
    jclass jc = env->FindClass("my/group/mypackage/Exception");   \
    if(jc) env->ThrowNew (jc, e.what());                          \
    /* if null => NoClassDefFoundError already thrown */          \
  }                                                               \
  catch (const std::bad_alloc& e)                                 \
  {                                                               \
    /* OOM exception */                                           \
    jclass jc = env->FindClass("java/lang/OutOfMemoryError");     \
    if(jc) env->ThrowNew (jc, e.what());                          \
  }                                                               \
  catch (const std::ios_base::failure& e)                         \
  {                                                               \
    /* IO exception */                                            \
    jclass jc = env->FindClass("java/io/IOException");            \
    if(jc) env->ThrowNew (jc, e.what());                          \
  }                                                               \
  catch (const std::exception& e)                                 \
  {                                                               \
    /* unknown exception */                                       \
    jclass jc = env->FindClass("java/lang/Error");                \
    if(jc) env->ThrowNew (jc, e.what());                          \
  }                                                               \
  catch (...)                                                     \
  {                                                               \
    /* Oops I missed identifying this exception! */               \
    jclass jc = env->FindClass("java/lang/Error");                \
    if(jc) env->ThrowNew (jc, "unidentified exception");          \
  } 
```

编译`Java_my_group_mypackage_example.cpp`生成 DLL。`PATH`在您的 java 运行时目录（通常`target`）中设置或移动该 DLL。

不要忘记用`"my-DLL-name"`不带扩​​展名的 DLL 名称替换 java 源代码中的名称（例如`myname.dll`-> `"myname"`）。

这也适用于 Linux/Unix 共享库 ( `*.so`) ;-)

# java - 如何在 Java 中使用 Tsunami UDP 协议

> ID：11287930
> 
> 赞同：1
> 
> 时间：2012-07-02T04:51:55.230
> 
> 标签：java, udp, protocols

我需要一些关于如何在 Java 客户端服务器环境中使用[tsunami UDP](http://tsunami-udp.sourceforge.net/)协议的示例。我已经尝试在线搜索它。但没有得到任何相关链接。

# java - 从 Java 程序中获取局部变量的名称和类型

> ID：11287933
> 
> 赞同：2
> 
> 时间：2012-07-02T04:52:17.993
> 
> 标签：java, reflection, bytecode

这是我正在尝试的代码：

```
JavaCompiler compilerA = ToolProvider.getSystemJavaCompiler();
int resultA = compilerA.run(null,null,null,"/Users/a/Documents/Java/a.java");
System.out.println("Compile result code = " + resultA);
File fileA = new File("/Users/a/Documents/Java/a.class");

JavaCompiler compilerB = ToolProvider.getSystemJavaCompiler();
int resultB = compilerB.run(null,null,null,"/Users/a/Documents/Java/b.java");
System.out.println("Compile result code = " + resultB);
File fileB = new File("/Users/a/Documents/Java/b.class"); 
```

在这里，我正在编译一个 Java 类，然后使用反射来获取所有函数名、参数和返回类型。但是，我不知道如何获取函数局部变量的名称和返回类型。我尝试查找字节码大纲，但它说它不适用于 netbeans。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:15:15.950

查看[javac 编译器选项](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)。特别是 -g:vars。

这会填充调试器的局部变量表。

查看相同的问题[Java 反射：如何获取变量的名称？](https://stackoverflow.com/questions/744226/java-reflection-how-to-get-the-name-of-a-variable)

# facebook - 通知非好友的 facebook api

> ID：11287934
> 
> 赞同：-1
> 
> 时间：2012-07-02T04:52:19.827
> 
> 标签：facebook

我正在做一些项目，当我的一个朋友从他的列表中取消我的朋友时，我会收到通知，以便我更新我的朋友列表的列表，一种方法是我可以安排一个 cron 作业，并且会更新我的朋友在我的项目中每天列出一两次，但这不会是实时的，我搜索了互联网但实际上没有找到任何东西可能是我正在为一些不同的关键字而苦苦挣扎，可能是那个特定的东西有不同的称呼，请说明一下，因为我是 facebook api 的新手，我也在为互联网虚假帖子而苦苦挣扎。

在此先感谢 Ankur

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:28:23.817

正如@Igy 的评论一样，您所要求的正是 Facebook 强调的“[禁止功能](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/Prohibited_Functionality/)”：

> **揭露好友删除**
> 您不得包含无视或规避 Facebook 产品限制的特性或功能。例如，如果有人将用户删除为好友，您**不得**通知用户，因为 Facebook 不会将此信息发布给用户

# php - PHP If / Else 不带括号的语句

> ID：11287936
> 
> 赞同：17
> 
> 时间：2012-07-02T04:52:37.790
> 
> 标签：php

以下代码总是可接受的吗？它似乎有效，但它是否始终适用于所有版本的 PHP？

```
if ($x > $y)
    echo 'x is greater';
elseif ($x == $y)
    echo 'equal';
else
    echo 'y is greater'; 
```

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-02T04:57:11.220

这在整个版本中都是可以接受的，并且只要您只想在每个控制块中做一件事，它就可以工作。使用括号确实有助于更轻松地跟踪块的开始和结束位置，以及在您需要添加一个语句时的未来验证。

[这篇文章](https://stackoverflow.com/questions/381259/php-conditionals-brackets-needed)很好地总结了 PHP 中 if/else 块的各种选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T05:13:48.223

这很好用，而且这是在许多语言中快速执行 if's 的常用方法。如前所述 - 如果您使用多行代码，则需要将其放在带括号的块中。

例如这里：

```
if (x == 1)
 echo "x is one";
 echo "one is x"; 
```

结果将是如果 x == 1 将回显“x is one”，而每次都会回显“one is x” - 无论 x==1 与否。

要使两行代码仅在条件为真时执行，您需要将其包含在一个块中。

```
if (x == 1)
{
 echo "x is one";
 echo "one is x";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T05:00:20.873

您的代码是可以接受的，并且可以在所有版本的 php 和恕我直言中正常工作：不仅 php 所有其他语言都支持相同的单个语句。但是为了**可读性**和**避免**任何错误，如果您以后可能需要添加多个语句，**建议**使用块语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T04:55:37.837

代码总是可以接受的。它将始终适用于所有版本的 PHP。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T04:56:11.837

可以，但必须是一排句子。如果您需要使用更多行，您将需要括号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T05:06:24.820

请浏览 PHP 在线文档，

[http://www.php.net/manual/en/control-structures.elseif.php](http://www.php.net/manual/en/control-structures.elseif.php)。

```
if($x > $y):
echo 'x is greater';
elseif($a == $b): // Note the combination of the words.
echo 'equal';
else:
echo 'y is greater';
endif; 
```

# javascript - Javascript：获得零下限的最有效方法是什么？

> ID：11287937
> 
> 赞同：1
> 
> 时间：2012-07-02T04:52:54.880
> 
> 标签：javascript, performance

获得零下限的最有效（最快）方法是什么？

Math.max(0, x) 将起作用，对于 x 的任何负值返回 0。但是，我对 Math.* 的经验是，通常有一个性能更高的技巧可以更快地完成它。有人知道这种情况吗？

按位技巧很好；我总是喜欢为这些运营商找到真正的用途。任何会返回假的东西，如果 x 是负数，也可以。

编辑澄清一下，如果 x 大于 0，我想要那个值。所以我不能只做 x < 0，因为那只会给我 true，而不是 x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T04:59:30.653

`Math.Max(x, y)`与 eg 基本相同`x > y ? x : y`。返回`false`何时`x`为负应该同样简单：`return x < 0 ? false : x`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T05:08:06.113

满足您要求的一种方法是：

```
x > 0 && x 
```

假设您可以接受评估为`false`when`x`为 0 或负数的表达式。如果您只想`false`何时`x`为负，您可以执行以下操作：

```
x >= 0 && x 
```

例子：

```
3 > 0 && 3;     // result: 3
-1 > 0 && -1;   // result: false
0 > 0 && 0;     // result: false

0 >= 0 && 0;    // result: 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T05:00:28.970

查看有关 min/max的[Bit Twiddling Hacks部分。](http://graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax)

这是他们在 C 中的示例...

```
int x;  // we want to find the maximum of x and y
int y;   
int r;  // the result goes here 

r = x ^ ((x ^ y) & -(x < y)); 
```

这对于适应 JavaScript 来说是微不足道的......

```
var x, y, r;

r = x ^ ((x ^ y) & -(x < y)); 
```

[js小提琴](http://jsfiddle.net/xbDkw/)。

但是，除非您处于一个紧凑的循环（例如游戏循环）中并且由于`Math.max()`（并且简单的三元内联等效项没有提供所需的性能）而表现不佳，否则我不会使用这种摆弄技巧。对于阅读代码的任何人来说，它的作用并不明显，而且几乎肯定需要注释来解释，而`Math.max()`它的名称是自我记录的（对大多数程序员而言）。

# ios - iOS 内存分配问题 & RIPZoneDataAlloc

> ID：11287941
> 
> 赞同：1
> 
> 时间：2012-07-02T04:53:42.923
> 
> 标签：ios, memory-management, memory-leaks, instruments

我有一个 RSS 阅读器类型的应用程序，我正在通过仪器运行，我看到来自 RIPZoneDataAlloc 的大量分配：

![在此处输入图像描述](../Images/6eb5d44f9b95742794c8e35c8296d0c5.png)

RIPZoneDataAlloc 到底是做什么的？

此外，在包括很多 UIWebViews 在内的十几个页面转换之后，我看到了将近 10mb 的实时字节。如果我运行泄漏，我会看到微不足道的泄漏。10mb 听起来像个问题吗？这是否表明我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T05:10:09.233

RIPZoneDataAlloc 显然负责大量内存分配，尤其是那些处理 UIColor 的 colorWithPatternImage: 方法的内存分配，这是众所周知的内存占用。

对于应用程序来说，10mb 是一个完全合理的内存消耗量。我有一个相当复杂的应用程序，平均消耗大约 30mb，所以这是完全合理的。如果您的应用程序的内存使用量飙升至大约 50-70 mb，我会更加担心。

至于那些泄漏，它们是微不足道的，你可以忽略它们。主要是因为您无权修复系统级框架。

# sql - 如何根据测验的标题显示此查询的结果？

> ID：11287942
> 
> 赞同：-1
> 
> 时间：2012-07-02T04:54:01.867
> 
> 标签：sql, sql-server-2008-r2

我有以下数据库设计：

```
Employee Table: Username, Name.....
Divisions Table: SapCode, DivisionShortcut, DivisionName 
Quiz Table: QuizID, Title, IsSent, Description
UserQuiz Table: UserQuizID, QuizID, DateTimeComplete, Score, Username 
```

***（IsSent 是一个标志，指的是已发送给所有员工的测验）***

我有以下查询，可检索已发送的测验的标题以及每个部门的参与者总数。该查询运行良好，但其中有一个小错误。检索到的结果将从上次发送的测验开始显示。测验的标题类似于 Quiz 12、Quiz 11 和 Quiz 10。现在，查询显示 (Quiz 9) 是最后一个测验。但是，发送的最后一个测验是（测验 12）。

**那么如何修改这个查询以获得正确的结果呢？**

查询：

```
SELECT     TOP (100) PERCENT COUNT(DISTINCT dbo.UserQuiz.Username) AS [Total Number of Participants], dbo.Divisions.DivisionShortcut, dbo.Quiz.Title
FROM         dbo.employee INNER JOIN
                      dbo.UserQuiz ON dbo.employee.Username = dbo.UserQuiz.Username INNER JOIN
                      dbo.Quiz ON dbo.UserQuiz.QuizID = dbo.Quiz.QuizID INNER JOIN
                      dbo.Divisions ON dbo.employee.DivisionCode = dbo.Divisions.SapCode
WHERE     (dbo.Quiz.IsSent = 1)
GROUP BY dbo.Divisions.DivisionShortcut, dbo.Quiz.Title
ORDER BY dbo.Quiz.Title DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:03:08.240

您按标题排序，标题是 varchar。当按字母顺序排序时，“测验 11”在“测验 9”之前，因为“1”和“11”在“9”之前。

现在，我不确定您如何填充 QuizID 值，但如果它是一个自动填充的整数，那么使用它可能会更好

```
ORDER BY dbo.Quiz.QuizID DESC 
```

反而。

更好的是，在 Quiz 表中添加 CreatedDate 并改为按该列排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:04:05.307

最终，经过数百万次尝试，我得到了答案。解决方案非常简单：

```
SELECT     TOP (100) PERCENT COUNT(DISTINCT dbo.UserQuiz.Username) AS [Total Number of Participants], dbo.Divisions.DivisionShortcut, dbo.Quiz.Title
FROM         dbo.employee INNER JOIN
                      dbo.UserQuiz ON dbo.employee.Username = dbo.UserQuiz.Username INNER JOIN
                      dbo.Quiz ON dbo.UserQuiz.QuizID = dbo.Quiz.QuizID INNER JOIN
                      dbo.Divisions ON dbo.employee.DivisionCode = dbo.Divisions.SapCode
WHERE     (dbo.Quiz.IsSent = 1)
GROUP BY dbo.Divisions.DivisionShortcut, dbo.Quiz.Title, dbo.UserQuiz.QuizID
ORDER BY dbo.UserQuiz.QuizID DESC 
```

# c# - Xml 批量节点附加问题

> ID：11287943
> 
> 赞同：0
> 
> 时间：2012-07-02T04:54:09.490
> 
> 标签：c#, asp.net, xml, c#-4.0, c#-3.0

我想生成一百万个记录 xml 文件。为此，我有一个示例 xml 文件，其中只有一个值集。使用这个 xml 文件填充随机值一百万次。我创建了一个解决方案，但它非常耗时。我的代码是

```
try
        {
            label1.Text = "File creation in progress  ...";
            Random rnd = new Random();
            string sStartupPath = Application.StartupPath;
            string sName = "";
            int flag = 0;
            XmlDocument XmlFile = new XmlDocument();
            XmlFile.Load(sStartupPath + @"..\..\..\BankStatement.xml");
            XmlFile.Save(@"C:\XmlData\Bank.xml");
            XmlDocument XmlF = new XmlDocument();
            XmlF.Load(@"C:\XmlData\Bank.xml");
            long k = Convert.ToInt32(textBox1.Text);
            for (int j = 1; j < k; j++)
            {
                XmlTextReader objXmlTextReader = new XmlTextReader(sStartupPath + @"..\..\..\BankStatement.xml");
                while (objXmlTextReader.Read())
                {
                    switch (objXmlTextReader.NodeType)
                    {
                        case XmlNodeType.Element:
                            sName = objXmlTextReader.Name;
                            if (sName == "DataXml")
                            {
                                if (flag == 0)
                                    flag = 1;
                            }
                            break;
                        case XmlNodeType.Text:
                            if (flag == 1)
                            {
                                XmlNodeList elemList = XmlFile.GetElementsByTagName(sName);
                                for (int i = 0; i < elemList.Count; i++)
                                {
                                    if (elemList[i].Name == "Name")
                                        elemList[i].InnerXml = generateNames();
                                    else if (elemList[i].Name == "EmailID")
                                        elemList[i].InnerXml = generatemailids();
                                    else
                                        elemList[i].InnerXml = rnd.Next(500000).ToString();
                                }
                            }
                            break;
                        case XmlNodeType.EndElement:
                            sName = objXmlTextReader.Name;
                            if (sName == "DataXml")
                            {
                                if (flag == 1)
                                    flag = 0;
                            }
                            break;
                    }
                }
                XmlDocument dd = new XmlDocument();
                dd.LoadXml(XmlFile.InnerXml); 
                XmlNodeList node=dd.GetElementsByTagName("Customers");
                XmlDocumentFragment xfrag = XmlF.CreateDocumentFragment();
                xfrag.RemoveAll();
                for (int i = 0; i < 1; i++)
                {
                    xfrag.InnerXml = node[i].InnerXml;                        
                    XmlF.DocumentElement.FirstChild.AppendChild(xfrag);                        
                }

                XmlF.Save(@"C:\XmlData\Bank.xml");

            }

            label1.Visible = false;
            MessageBox.Show("File creation success..!");
        }
        catch (Exception ex)
        {
            label1.Text = "";
            MessageBox.Show("Error Occured");
        } 
```

请给我一个更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T05:03:19.683

我知道编写 XML 的最快方法（没有手动构建 XML 片段）是使用[XmlWriter](http://msdn.microsoft.com/en-us/library/4d1k42hb.aspx)

> XmlWriter 类是一个抽象基类，它提供了一种只进、只写、非缓存的方式来生成 XML 流。它可用于构建符合 W3C 可扩展标记语言 (XML) 1.0（第四版）建议和 XML 中的命名空间建议的 XML 文档。

[MSDN 有一个](http://msdn.microsoft.com/en-us/library/tx3wa6ka.aspx)关于如何使用抽象 XmlWriter 类的演练。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:00:31.327

要编写大型 XML 文件，您应该使用[XmlTextWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx)。

# java - JAX-WS 异常处理

> ID：11287944
> 
> 赞同：0
> 
> 时间：2012-07-02T04:54:35.813
> 
> 标签：java, web-services, jakarta-ee, exception-handling, jax-ws

基于 java 中的异常处理，我们为 JAX-WS 提供服务。

我想为我用 JAX-WS（基于 Java 的 Web 服务）编写的 Web 服务创建用户定义的异常。

简单的常规方法是创建一个`simpleException`类，该类必须扩展`Exception`类，然后在任何带有`throw`关键字的地方使用它。

这个相同的过程在 Web 服务上是否有效，或者是否有任何特殊的方法可用于处理 Web 服务中的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:05:32.157

在调用 Web 服务的情况下使用异常的方式与您在 java rmi 和其他中使用的方式相同（与纯 java 中相同）。如果您首先使用代码，wsdl gen 将生成异常类，因此客户端将能够区分您的自定义异常（唯一的是这将是自定义异常层次结构）。

# python - 基本 Python 方法定义

> ID：11287945
> 
> 赞同：0
> 
> 时间：2012-07-02T04:54:47.530
> 
> 标签：python

我对我一直在看的一些代码提出了一些问题。当它写在 Python 中的方法定义之上时，`@staticmethod`and是什么意思，如下所示？`@property`

```
@staticmethod 
def methodName(parameter):
    Class_Name.CONSTANT_VARIABLE = parameter

@property
def methodName(parameter):
    Class_Name.CONSTANT_VARIABLE = parameter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T05:03:08.047

装饰器语法是这种模式的简写。

```
def methodName(parameter):
    Class_Name.CONSTANT_VARIABLE = parameter
methodName = some_decorator(methodName) 
```

可以这样重新排列

```
@some_decorator
def methodName(parameter):
    Class_Name.CONSTANT_VARIABLE = parameter 
```

一个优点是它位于函数的顶部，因此很明显它是一个装饰函数

您是否还问静态方法和属性是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T06:57:37.770

有一个示例代码

```
class Class1(object):
    def __init__(self):
        self.__x = None

#       you can call this method without instance of a class like Class1.method1()
    @staticmethod
    def method1():
        return "Static method"

    def method2(self):
        return "Class method"

    @property
    def x(self):
        print "In getter"
        return self.__x

    @x.setter
    def x(self, value):
        print "In Setter"
        self.__x = value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T06:14:44.467

静态方法只是一个包含在类定义中的函数*。*与常规方法不同，它没有*self*参数。

*属性*是一种在属性查找时运行的方法。属性的主要目的是支持属性查找，但实际上运行代码就像进行了方法调用一样。

# iis - 将多个域指向 IIS7 上的一个网站

> ID：11287947
> 
> 赞同：11
> 
> 时间：2012-07-02T04:55:05.513
> 
> 标签：iis

这与 SEO 无关，请不要发布任何关于 SEO 排名的信息，因为这不是这里的一个因素。

我有 2 个网址

old.websitename.com 和 new.websitename.com

我需要在一定时间内支持这两个 url，而不是在 IIS 中创建 2 个站点，我想看看是否有办法通过只托管一个站点来做到这一点。

我不能对 url 进行任何重定向，并且两个 url 都需要处于活动状态，例如我不能让用户转到 old.websitename.com 并被重定向到 new.websitename.com。如果他们访问 old.websitename.com，他们需要停留在该 URL 上，并且不会以任何方式被重定向。

这可以在 IIS 7 上完成吗（注意这是 IIS 不是基于 Apache 或 PHP 的）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-02T04:56:41.410

您只需要为每个主机名创建一个绑定。

1.  右键单击该站点。“编辑绑定”
2.  点击添加
3.  输入主机名
4.  对每个主机名重复 1-3。

# javascript - 如何用文件位置替换查询 URL

> ID：11287959
> 
> 赞同：0
> 
> 时间：2012-07-02T04:56:45.547
> 
> 标签：javascript, html, google-api

我的部分代码是这样的

```
var query = new google.visualization.Query(
            'https://docs.google.com/spreadsheet/ccc?key=0AuehW_PIAYbKdEJ4bHJPNVZYTGRSQ2h5VVk4TTM1VUE');
        query.send(draw); 
```

但问题是谷歌文档在中国受到审查，所以我需要知道如何将查询定向到我计算机上的文件位置，例如 C:/....

# iphone - 如何截取其他 iPhone 应用程序的屏幕截图？

> ID：11287961
> 
> 赞同：1
> 
> 时间：2012-07-02T04:57:01.940
> 
> 标签：iphone, ios, ipad

我是 iOS 开发的新手。我想在 iPhone 和 iPad 上开发一个截图应用程序。在iOS中是否可以。我想捕获 iPhone 中所有应用程序的屏幕截图。这样做合法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T05:01:56.040

这是非法的，但 iOS 应用程序 Display Recorder 使用一个名为[IOSurface](http://iphonedevwiki.net/index.php/IOSurface)的框架来做到这一点，该框架在内核级别管理一个矩形像素缓冲区。您将无法在内核级别检测抖动事件，但您可以使用像素缓冲区记录相当抖动的流并让用户选择适当的图像。

# php - Magento - 在可配置的产品页面上显示简单的产品评论

> ID：11287964
> 
> 赞同：0
> 
> 时间：2012-07-02T04:57:04.457
> 
> 标签：php, magento

我想在可配置产品页面上显示简单产品的评论。

任何人都可以帮忙吗？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-09T21:53:27.013

下面的代码将显示可配置产品和简单产品的评级和评论。请注意，您还应该修改产品页面顶部显示评论计数和总体平均评分的摘要。

将/app/code/core/Mage/Review/Block/Product/View.php从core复制到本地，并修改。第 75 行是：

```
$this->_reviewsCollection = Mage::getModel('review/review')->getCollection()
->addStoreFilter(Mage::app()->getStore()->getId())
->addStatusFilter(Mage_Review_Model_Review::STATUS_APPROVED)
->addEntityFilter('product', $this->getProduct()->getId())
->setDateOrder(); 
```

将其更改为：

```
if ($this->getProduct()->isConfigurable()){
    //Get both configurable product and associated simple product reviews
    $children_ids = Mage::getModel('catalog/product_type_configurable')->getChildrenIds($this->getProduct()->getId());  
    $entity_ids = array($this->getProduct()->getId(), $children_ids);

    $this->_reviewsCollection = Mage::getModel('review/review')->getCollection()
        ->addStoreFilter(Mage::app()->getStore()->getId())
        ->addStatusFilter(Mage_Review_Model_Review::STATUS_APPROVED)
        ->addFieldToFilter('entity_pk_value', array('in' => $entity_ids))
        ->setDateOrder();
} else {
    $this->_reviewsCollection = Mage::getModel('review/review')->getCollection()
    ->addStoreFilter(Mage::app()->getStore()->getId())
    ->addStatusFilter(Mage_Review_Model_Review::STATUS_APPROVED)
    ->addEntityFilter('product', $this->getProduct()->getId())
    ->setDateOrder();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T04:24:00.947

首先使用以下语句获取属于 Configurable 产品的产品的 ID：

```
$children_ids = Mage::getModel ('catalog/product_type_configurable')->getChildrenIds ($_product->getId ()); 
```

然后遍历所有简单的产品，得到他们的评价，像这样：

```
foreach ($children_ids as $child_id)
    {
        foreach ($child_id as $id)
        {
            $_items2 = Mage::getModel('review/review')->getCollection()
                        ->addStoreFilter(Mage::app()->getStore()->getId())
                        ->addStatusFilter(Mage_Review_Model_Review::STATUS_APPROVED)
                        ->addEntityFilter('product', $id)
                        ->addRateVotes()
                        ->setDateOrder();
            $_items = $_items2->getItems ();
}} 
```

查看“view/list.phtml”以了解如何使用 $_items。

# jquery - Jquery：如何删除取消绑定（“点击”）

> ID：11287970
> 
> 赞同：1
> 
> 时间：2012-07-02T04:57:43.030
> 
> 标签：jquery

使用后如何删除“取消绑定”？我需要重新启用点击事件。在我的职能之下。

1.此功能是禁用打印链接

```
function edit(){
$("#ENQUIRY_VIEWMETER a.print").addClass('ui-state-disabled').unbind("click");
} 
```

2.使链接可点击。

```
function reset(){
$("#ENQUIRY_VIEWMETER a.print").removeClass('ui-state-disabled').bind("click");
} 
```

还有其他方法可以让我再次点击链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T05:13:54.533

通过使用新的 Jquery 1.7[`On()`](http://api.jquery.com/on/) 和[`off()`](http://api.jquery.com/off/)方法，您可以通过以下方式实现此目的...有关更多详细信息，请阅读[使用示例](http://www.andismith.com/blog/2011/11/on-and-off/)

**离开（）：**

```
$('#ENQUIRY_VIEWMETER a.print').off("click"); 
```

或者

```
('#ENQUIRY_VIEWMETER').off('click', 'a.print'); 
```

**在（）：**

```
$('#ENQUIRY_VIEWMETER a.print').on('click', handleClick); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T05:08:34.350

将事件代码缓存在变量中并使用事件命名空间。也使用[`on()`](http://api.jquery.com/on/)since`bind()`已被弃用。

```
var foo = function () { ... }

$el.on('click.foo', foo) // Bind event `foo` on click

$el.off('click.foo') // Unbind `foo` events attached to `click`
$el.off('.foo') // Unbind all `foo` events

$el.on('click.foo', foo) // Bind again 
```

# c# - MonoTouch.Dialog：每次击键搜索、查询数据库

> ID：11287971
> 
> 赞同：0
> 
> 时间：2012-07-02T04:57:47.217
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我在 MonoTouch.Dialog 中启用了搜索。每次击键后，我都会调用数据库，获取更新的列表，然后重新创建 Root。尽管在我重新生成 Root 之后，tableview 始终是空的，即使我可以确认我每次都在添加元素。

在每次用户在搜索栏中键入时都需要重新创建整个列表的情况下，我是否需要每次都重新创建根目录，或者清除它并重新填充它？

我已经尝试了这两种方法，但是在我尝试重新生成它之后，tableview 永远不会呈现任何东西。

```
 this.SearchTextChanged += (sender, args) => {
             query = args.Text;
            CreateRoot();
        };

    void CreateRoot()
    {
        if(this.Root!=null)
           this.Root.Clear();

        Section section = new Section();
        List<TermItem> terms = LegalDatabase.GetTerms(query, SearchScope);

        foreach (TermItem term in terms)
        {
            var eTerm = new TermElement(term.ID);
            section.Add(eTerm);
        }
        terms = null;
        this.Root.Add(section);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:42:54.503

进行任何更改后，您需要调用 ReloadData：

```
void CreateRoot ()
{
    ...
    this.Root.ReloadData ();
} 
```

# json - JSON 对象在 struts 动作类中变为空

> ID：11287973
> 
> 赞同：0
> 
> 时间：2012-07-02T04:57:58.730
> 
> 标签：json, class, struts, struts-action

我在 struts 1.3 中工作，我正在将 json 对象构造成 javascript 并将 JSON 对象传递给我的 struts 动作类，但是当我收到 json 时，它是空的，这是我的示例代码

```
 var dataobj=[{code:c1,name:n1}];

$.ajax({
type: "POST",
url: "addtier.do",
dataType: "json"
data: "data?="+dataobj;
}); 
```

动作类代码

```
 JSONObject jObj    = new JSONObject();
 JSONObject newObj = jObj.getJSONObject(request.getParameter("data"));
 Enumeration eNames = newObj.keys(); //gets all the keys

 while(eNames.hasNextElement())
 {
     // Here I need to retrieve the values of the JSON string
     // and add it to the session
 } 
```

这条线即将为空

```
request.getParameter("data"); 
```

并且在解析时给出异常

```
 JSONObject newObj = jObj.getJSONObject(request.getParameter("data")); 
```

实际上我做错了什么。我不明白这是我的 json 数据格式错误或其他任何提示对我有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T05:08:10.180

```
var dataobj=[{code:c1,name:n1}];

$.ajax({
type: "POST",
url: "addtier.do",
dataType: "json"
data: dataobj;
}); 
```

好像您正在将 data 参数设置为`data?=[Object]`.

试试看`console.log('data?='+dataobj);`，你会明白我的意思。

如果您应该为它提供一个字符串而不是一个 jaon 对象，那么您将`JSON.stringify(dataobj)`首先想要。

另一个问题是它可能需要发送一个 json 对象而不是一个 json 数组，所以它仍然不起作用尝试确保 dataobj 是：`{data:[{key:"val",key2:"val2"}]}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T13:01:13.177

你可以使用这个：

```
String jsonData = request.getReader().readLine(); 
```

而不是这个：

```
String jsonData = request.getParameter("data"); 
```

注意：在 Javascript 中使用 POST send(jsonData)

# codeigniter - 使用 PHPExcel 创建 excel 2007

> ID：11287979
> 
> 赞同：1
> 
> 时间：2012-07-02T04:59:19.323
> 
> 标签：codeigniter, phpexcel

我尝试使用 PHPExcel 在 codeigniter 中创建 .xlsx 文件。当我在 Windows 服务器中运行我的应用程序时，我没有问题。但是，当我在 Linux 服务器上运行它时出现错误。这是我的错误信息：

> 严重性：警告
> 
> 消息：require_once（PHPExcel/Cell.php）：无法打开流：没有这样的文件或目录
> 
> 文件名：库/PHPExcel.php
> 
> 行号：30

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:43:37.733

检查文件夹和文件的大写。Linux 服务器会考虑大小写，而 Windows 服务器则不会。

因此，如果您在“PHPExcel/Cell.php”之后 - 那么文件夹必须是

```
/PHPExcel    NOT /phpexcel 
```

和 Cell.php 必须大写 C

```
Cell.php     NOT cell.php 
```

# php - 在php中从xml中提取值

> ID：11287984
> 
> 赞同：1
> 
> 时间：2012-07-02T05:00:01.733
> 
> 标签：php, xml, api

在使用 simplexml_load_string php 函数从 api 调用中获取它后，我有以下格式的 xml

```
SimpleXMLElement Object ( [@attributes] => Array ( [Code] => 0 [Description] => Success )
[XMLVersion] => 8.9.62 ) 
```

我将如何获得代码和描述的价值以进一步使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T05:44:47.243

根据您的代码，您应该能够以多种方式访问​​属性。假设 XML

```
<UserDetails Code="0" Description="Success">
    <FName>Bob</FName>
    etc... 
```

从这里开始：

```
$res = simplexml_load_string(curl_exec($ch)); 
$result = get_object_vars($res); 
$res_info = get_object_vars($result['UserDetails']); 
```

那么以下任何一个都应该起作用：

```
// Accessing from the UserDetails SimpleXMLElement
echo $result['UserDetails']['Description'];
// Via the subsequent
echo $res_info['@attributes']['Description']; 
```

如果这不起作用，也许您可​​以发布它来自的 XML 部分，或者您的代码正在转储您发布的对象。

# iphone - 如何区分 iphone 中 tableview 中包含的 gmail 和 facebook 联系人

> ID：11287985
> 
> 赞同：0
> 
> 时间：2012-07-02T05:00:05.520
> 
> 标签：iphone, tableview

我正在 xmpp 中开发应用程序。我在 tableview 中有 gmail 和 facebook 联系人。但我想区分这些联系人。例如，gmail 联系人将显示为“g”字母，facebook 联系人将显示为“f”字母。可以任何一个帮助我解决我的问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T05:04:01.890

您可以为每个联系人列表创建两个部分：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 2;
} 
```

然后您可以为每个部分提供标题标题：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if (section == 0) {
        return @"G"; // For Gmail
    } else
        return @"F"; // For facebook } 
```

然后根据部分编号，您可以`cellForRowAtIndexPath`通过为两种类型的联系人创建单独的数组来实现您的。

祝一切顺利！！！

# jquery - JQuery 选择器 ID 开始但未结束

> ID：11287988
> 
> 赞同：3
> 
> 时间：2012-07-02T05:00:29.377
> 
> 标签：jquery, selector

你知道如何选择 id 不包含给定字符串的元素吗？或者选择 id 不包含给定单词的元素？

例子：

```
<div id="my_div">
    <div id="tab_abcd">...</div>
    <div id="tab_efgh">...</div>
    <div id="tab_jklm">...</div>
    <div id="tab_nopq">...</div>
    <div id="tab_rstu">...</div>
    <div id="tab_vwxy">...</div>
</div> 
```

我想选择以“tab_”开头但不以“nopq”结尾的 div。不能使用 nt-child，因为这些 div 是动态生成的：所以，我不知道顺序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T05:04:26.933

```
$('[id^="tab"]:not([id$="nopq"])') 
```

[http://jsfiddle.net/zerkms/yB44A/](http://jsfiddle.net/zerkms/yB44A/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T05:05:25.757

使用[starts-with](http://api.jquery.com/attribute-starts-with-selector/)、[not](http://api.jquery.com/not/)和[ends-with](http://api.jquery.com/attribute-ends-with-selector/)：

```
$('div[id^="tab_"]').not('div[id$="nopq"]').each(function(){
    // whatever
}); 
```

[`working DEMO`](http://jsfiddle.net/jyGej/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T05:04:13.497

你可以试试这个目的：

```
$('div:not([id*="given word"])') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T05:10:39.260

```
$('div[id^="tab_"]:not(div[id$="nopq"])'); 
```

查看[JQAPI 文档](http://jqapi.com)以获取有关选择器和示例的更多信息。

# git - 在 repo 中显示用户贡献的所有文件

> ID：11287992
> 
> 赞同：1
> 
> 时间：2012-07-02T05:01:09.850
> 
> 标签：git, version-control

列出特定用户贡献的 git repo 中所有文件的最简单方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:31:44.007

我认为以下内容可以满足您的要求：

```
git log --diff-filter=A --author='Someone' --name-only --pretty=format: | sort -u 
```

请注意，`--diff-filter=A`表示仅报告已添加的文件，而`--pretty=format:`只是为了抑制提交消息的正常输出`git log`。

请注意，这只是显示特定作者在提交中添加的文件 - 例如，在绝大多数情况下，它不会准确反映他们对项目的贡献。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T05:20:09.927

我会建议其中之一：

```
# commit + full message + list of changed files
git log --author="Frank Nord" --stat

# commit + full message
git log --author="Frank Nord"

# just commit + one line message
git log --author="Frank Nord" --format=short 
```

有关受支持的模式的更多选项`--format`和信息，`--author`请参阅`git log --help`。

如果你真的只需要文件，你需要做一些 grepping：

```
git log --author="Frank Nord" --stat --format=oneline | grep -Po "(?<=^ ).*(?=\|)" | grep -Po "[^ ]+(\s*[^ ]+)*" | sort | uniq 
```

这为您提供了 Frank Nord 曾经接触过的独特路径的列表。它实际上需要两个阶段的grep，否则grep会出错`exceeded PCRE's backtracking limit`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T05:13:18.817

你总是可以使用 grep ：

```
git log | grep -B 2 -A 3 'Author: Timmy' 
```

`-B num`表示匹配前显示的行`-A num`数和匹配后的行数

# c - 如何不阻止设备被弹出/安全移除？

> ID：11287996
> 
> 赞同：4
> 
> 时间：2012-07-02T05:02:04.607
> 
> 标签：c, file, winapi, device

### 如何`HANDLE`在某些设备上获取文件*，并且*不*阻止用户弹出设备？

我试过用我能想到的最自由的访问权限调用`CreateFile`（甚至是）——即访问权限和共享权限，但它仍然不起作用。`NtCreateFile``FILE_READ_ATTRIBUTES``FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE`

（[FileTest](http://www.osronline.com/article.cfm?article=360)是一个很好的测试工具，无需编写程序。）

* * *

### *更新：

我*真的很*喜欢这个解决方案，它也适用于*卷*或*驱动器*的句柄（不仅仅是文件）——我的意思是喜欢`\\.\D:`或`\\.\PhysicalDrive0`. 但如果没有这样的解决方案，那么文件句柄也会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:01:03.780

你不能。

但是您可以做的是观察弹出设备消息，然后关闭您拥有的所有句柄。

[设备事件 (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363217%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T05:46:41.730

应该清楚的是，在安装卷时获取文件句柄是微不足道的。

当卷被强制卸载时会发生什么？所有文件句柄都变为无效。尝试使用它们会返回错误。

这些代码片段强制卸载卷，以便后续代码可以对其进行直接 i/o。这是我几年前写的一个磁盘清理实用程序（一种大众消费产品）的摘录。

```
char    fn [20];

sprintf (fn, "\\\\.\\%s:", vol -> GetVolName ());
vol_lock_handle = CreateFile (fn, GENERIC_READ,
                FILE_SHARE_READ | FILE_SHARE_WRITE, NULL,
                OPEN_EXISTING,
                FILE_FLAG_NO_BUFFERING | FILE_FLAG_RANDOM_ACCESS,
                NULL);

fprintf (stderr,
 "Warning:  volume dismount will disrupt or kill all processes with open files!\n"
 "Before confirming, verify no critical processes have open files on volume %s:\n"
 "   Are you sure you want to dismount this volume? ('YES' to proceed)? ",
         g_vol -> GetVolName ());

char    buf [30];
if (!fgets (buf, sizeof buf, stdin)  ||  stricmp (buf, "yes\n"))
{
    fprintf (stderr, " Volume dismount not confirmed--canceled.\n");
    continue;
}
DWORD   status;
if (!DeviceIoControl (vol_lock_handle, FSCTL_DISMOUNT_VOLUME,
                        NULL, 0, NULL, 0, &status, NULL))
{
    DWORD err = GetLastError ();
    fprintf (stderr, "Error %d attempting to dismount volume: %s\n",
            err, w32errtxt (err));
} 
```

我完全知道这段代码看起来有多么错误。获取 GENERIC_READ 句柄用于卸载，然后获取卷锁，然后写入。有用！