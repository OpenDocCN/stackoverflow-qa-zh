# StackOverflow 问答 12063000-12063999

# tsql - 向 T-SQL 查询添加多个过滤条件

> ID：12063003
> 
> 赞同：0
> 
> 时间：2012-08-21T21:02:55.820
> 
> 标签：tsql

我需要帮助过滤下面的查询结果。具体来说，我只需要返回`dbo.pertot_all.sort_method = 2`where 子句中指定的所有日期的结果 where 。目前，使用下面提供的内容，它正在返回其他 sort_methods。我不熟悉 AND/OR 运算符的顺序/分组。有人可以提供一些指导吗？提前致谢。

```
 SELECT     dbo.SiteDescription.Site, dbo.SiteDescription.Description AS SiteDescription, dbo.SiteDescription.LocationGroup, dbo.chart_all.acct, dbo.pertot_all.sf2, 
                  dbo.SSRS_sf2UnitCodes.sf2description, dbo.pertot_all.sf4, dbo.SSRS_sf4UnitCodes.sf4description, dbo.chart_all.description AS AccountDescription, 
                  dbo.pertot_all.amt, dbo.pertot_all.per_start, dbo.pertot_all.sort_method
 FROM         dbo.SSRS_sf2UnitCodes INNER JOIN
                  dbo.pertot_all ON dbo.SSRS_sf2UnitCodes.sf2UnitCode = dbo.pertot_all.sf2 INNER JOIN
                  dbo.SSRS_sf4UnitCodes ON dbo.pertot_all.sf4 = dbo.SSRS_sf4UnitCodes.sf4UnitCode RIGHT OUTER JOIN
                  dbo.chart_all LEFT OUTER JOIN
                  dbo.SiteDescription ON dbo.chart_all.site_ref = dbo.SiteDescription.Site ON dbo.pertot_all.site_ref = dbo.SiteDescription.Site AND 
                  dbo.pertot_all.sf1 = dbo.chart_all.acct
WHERE     (1 = 1) AND (ISNULL(dbo.pertot_all.per_start, '2012-01-01 00:00:00.000') = '2012-01-01 00:00:00.000') AND (ISNULL(dbo.pertot_all.sort_method, 2) = 2) OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-02-01 00:00:00.000') = '2012-02-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-03-01 00:00:00.000') = '2012-03-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-04-01 00:00:00.000') = '2012-04-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-05-01 00:00:00.000') = '2012-05-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-06-01 00:00:00.000') = '2012-06-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-07-01 00:00:00.000') = '2012-07-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-08-01 00:00:00.000') = '2012-08-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-09-01 00:00:00.000') = '2012-09-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-10-01 00:00:00.000') = '2012-10-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-11-01 00:00:00.000') = '2012-11-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-12-01 00:00:00.000') = '2012-12-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-01-01 00:00:00.000') = '2011-01-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-02-01 00:00:00.000') = '2011-02-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-03-01 00:00:00.000') = '2011-03-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-04-01 00:00:00.000') = '2011-04-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-05-01 00:00:00.000') = '2011-05-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-06-01 00:00:00.000') = '2011-06-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-07-01 00:00:00.000') = '2011-07-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-08-01 00:00:00.000') = '2011-08-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-09-01 00:00:00.000') = '2011-09-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-10-01 00:00:00.000') = '2011-10-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-11-01 00:00:00.000') = '2011-11-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-12-01 00:00:00.000') = '2011-12-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-01-01 00:00:00.000') = '2010-01-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-02-01 00:00:00.000') = '2010-02-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-03-01 00:00:00.000') = '2010-03-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-04-01 00:00:00.000') = '2010-04-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-05-01 00:00:00.000') = '2010-05-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-06-01 00:00:00.000') = '2010-06-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-07-01 00:00:00.000') = '2010-07-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-08-01 00:00:00.000') = '2010-08-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-09-01 00:00:00.000') = '2010-09-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-10-01 00:00:00.000') = '2010-10-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-11-01 00:00:00.000') = '2010-11-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-12-01 00:00:00.000') = '2010-12-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2009-12-01 00:00:00.000') = '2009-12-01 00:00:00.000') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:12:07.103

```
 SELECT     dbo.SiteDescription.Site, dbo.SiteDescription.Description AS SiteDescription, dbo.SiteDescription.LocationGroup, dbo.chart_all.acct, dbo.pertot_all.sf2, 
                  dbo.SSRS_sf2UnitCodes.sf2description, dbo.pertot_all.sf4, dbo.SSRS_sf4UnitCodes.sf4description, dbo.chart_all.description AS AccountDescription, 
                  dbo.pertot_all.amt, dbo.pertot_all.per_start, dbo.pertot_all.sort_method
 FROM         dbo.SSRS_sf2UnitCodes INNER JOIN
                  dbo.pertot_all ON dbo.SSRS_sf2UnitCodes.sf2UnitCode = dbo.pertot_all.sf2 INNER JOIN
                  dbo.SSRS_sf4UnitCodes ON dbo.pertot_all.sf4 = dbo.SSRS_sf4UnitCodes.sf4UnitCode RIGHT OUTER JOIN
                  dbo.chart_all LEFT OUTER JOIN
                  dbo.SiteDescription ON dbo.chart_all.site_ref = dbo.SiteDescription.Site ON dbo.pertot_all.site_ref = dbo.SiteDescription.Site AND 
                  dbo.pertot_all.sf1 = dbo.chart_all.acct
WHERE     (1 = 1) AND ((ISNULL(dbo.pertot_all.per_start, '2012-01-01 00:00:00.000') = '2012-01-01 00:00:00.000') AND (ISNULL(dbo.pertot_all.sort_method, 2) = 2) OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-02-01 00:00:00.000') = '2012-02-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-03-01 00:00:00.000') = '2012-03-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-04-01 00:00:00.000') = '2012-04-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-05-01 00:00:00.000') = '2012-05-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-06-01 00:00:00.000') = '2012-06-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-07-01 00:00:00.000') = '2012-07-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-08-01 00:00:00.000') = '2012-08-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-09-01 00:00:00.000') = '2012-09-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-10-01 00:00:00.000') = '2012-10-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-11-01 00:00:00.000') = '2012-11-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2012-12-01 00:00:00.000') = '2012-12-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-01-01 00:00:00.000') = '2011-01-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-02-01 00:00:00.000') = '2011-02-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-03-01 00:00:00.000') = '2011-03-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-04-01 00:00:00.000') = '2011-04-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-05-01 00:00:00.000') = '2011-05-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-06-01 00:00:00.000') = '2011-06-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-07-01 00:00:00.000') = '2011-07-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-08-01 00:00:00.000') = '2011-08-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-09-01 00:00:00.000') = '2011-09-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-10-01 00:00:00.000') = '2011-10-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-11-01 00:00:00.000') = '2011-11-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2011-12-01 00:00:00.000') = '2011-12-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-01-01 00:00:00.000') = '2010-01-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-02-01 00:00:00.000') = '2010-02-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-03-01 00:00:00.000') = '2010-03-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-04-01 00:00:00.000') = '2010-04-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-05-01 00:00:00.000') = '2010-05-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-06-01 00:00:00.000') = '2010-06-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-07-01 00:00:00.000') = '2010-07-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-08-01 00:00:00.000') = '2010-08-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-09-01 00:00:00.000') = '2010-09-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-10-01 00:00:00.000') = '2010-10-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-11-01 00:00:00.000') = '2010-11-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2010-12-01 00:00:00.000') = '2010-12-01 00:00:00.000') OR
                  (ISNULL(dbo.pertot_all.per_start, '2009-12-01 00:00:00.000') = '2009-12-01 00:00:00.000')) AND dbo.pertot_all.sort_method = 2; 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:16:19.503

您可以使用语句大大简化查询`in`。考虑以下：

```
select 1 where cast('1/1/2000' as datetime) in ('1/1/2000', '1/2/2000') 
```

`datetime`如果在列表中，查询将返回一行。

您的查询可以重写为如下内容：

```
SELECT     fields
  FROM     tables
 WHERE     (ISNULL(dbo.pertot_all.sort_method, 2) = 2) AND
           (ISNULL(dbo.pertot_all.per_start, '2012-01-01 00:00:00.000') in ('2012-01-01 00:00:00.000', '2012-02-01 00:00:00.000', '2012-03-01 00:00:00.000', etc.)) 
```

您必须`ISNULL()`至少使用一次日期，因此您不会遇到 NULL 问题。但是您可以使用该`in`语句比较所有日期。

# php - 在 PHP/SQL 站点中识别包含特定字符串的文件

> ID：12063005
> 
> 赞同：0
> 
> 时间：2012-08-21T21:03:02.737
> 
> 标签：php, content-management-system, phpmyadmin

通过使用 Chrome 的检查元素功能，我确定了需要更改为小写的文本字符串。

尽管该字符串出现在站点的所有页面上，但我不确定要编辑哪个文件。

该网站是一个基于 PHP 和 SQL 的 CMS - 我对这些程序不太熟悉。

我手动搜索了文件，但找不到字符串。

有没有办法搜索和识别我需要的文件，例如，浏览器或 FTP 工具（如 Filezilla）上的检查元素功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:51:09.640

检查您的 CMS 中是否有任何类型的布局页面。如果你这样做了，那么很可能在该文件或页脚包含文件中，你会找到用于谷歌分析的 javascript 或相同的 js 包含文件。

尝试进行站点搜索`'UA-34035531-1'`（这是您的谷歌分析用户密钥）并查看它是否返回任何内容。如果你找到它，你需要的是它下面的两行。

通常人们不会将分析代码放在数据库中，因此您更有可能在其中一个文件中找到它，该文件很可能包含/嵌入在某种布局文件中，因为您需要它在所有页面中地点

# sql - 子查询与内部连接——哪一个执行得更快？

> ID：12063008
> 
> 赞同：3
> 
> 时间：2012-08-21T21:03:19.023
> 
> 标签：sql, subquery

我希望可以发这样的帖子。

我使用 SQL 已经有一段时间了，工作人员一直在使用 2 种不同的方式在数据库中返回相同的数字或行。

例如：

```
SELECT Name
FROM
    Employees
WHERE
    DepartmentID IN (SELECT DepartmentID
                         FROM
                             Departments
                         WHERE
                             Department LIKE '%Engineering')

SELECT Employees.Name
FROM
    Departments
    INNER JOIN Employees
        ON Departments.DepartmentID = Employees.DepartmentID
WHERE
    Departments.Department LIKE '%Engineering' 
```

两者都返回相同的数据。人们一直告诉我，使用子查询是最好的方法。

我的问题是：这两个中的哪一个会执行得更快？我的猜测将是具有内部连接的那个，但我可能是错的。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T21:06:02.903

在这种情况下，两者是等价的。但是，对于具有 INNER JOIN 的部门，如果选择了多个具有相同 DepartmentID 的部门，则具有该 DepartmentID 的员工将被多次返回。

SQL 是一种声明性语言，这意味着该语言不应该说明应该如何执行查询，而应该说明应该找到什么结果。由 DMBS 决定如何执行它。

一个体面的 SQL 数据库可能会优化它们以完成相同或相似的事情。

要检查他们是否在做同样的事情，`EXPLAIN`请在查询上运行。

如果它们具有相同的步骤，显然它们将花费相同的时间来运行。否则，您将看到数据库处理不同的方式。DBMS 如何优化它取决于实现。所以最好的方法是使用`EXPLAIN`.

注意：EXPLAIN 是一个 SQL 命令，就像 SELECT 等一样。参见[http://www.sql.org/sql-database/postgresql/manual/sql-explain.html](http://www.sql.org/sql-database/postgresql/manual/sql-explain.html)。

假设它以相同的步骤执行，那么您编写它的方式将是您认为最清楚意图的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T21:13:18.487

这两个查询*是不*等价的。等效于“IN”查询如下：

```
SELECT Name
FROM Employees e join
     (SELECT distinct DepartmentID
      FROM Departments
      WHERE Department LIKE '%Engineering'
     ) d
     on e.DepartmentID = d.DepartmentId 
```

换句话说，“IN”版本永远不会返回重复的行。连接版本*可以*返回重复的行。在这种情况下，我认为不会，因为 departmentid 在表中可能是唯一的。

下一个问题是关于优化的。SQL 引擎确实应该等效地优化这两个版本。这意味着“IN”版本更易于阅读。

然而，这有一个很大的例外。MySQL 在 IN 方面绝对不是最理想的。使用该数据库引擎时，使用联接版本要好得多。

顺便说一句，还有其他方法可以做到这一点，例如：

```
select name
from employees e
where exists (select 1 from Departments d
              where e.Departmentid = d.DepartmentId and
                    d.Department LIKE '%Engineering'
             ) 
```

哪个效果最好。. . 你需要测量你正在使用的任何数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:07:43.793

大多数现代 RDBMS 中的查询优化器可能会以相同的方式在内部使用它们，因此不会有性能差异。

较旧的 RDBMS 可能会显示出差异，但这取决于 RDBMS 本身。

# ruby-on-rails - Authlogic 用户数据

> ID：12063013
> 
> 赞同：0
> 
> 时间：2012-08-21T21:03:38.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model, authlogic

我一直在尝试找到一种将数据与 authlogic 中的用户相关联的方法。我已经尝试了我能想到的一切，但似乎没有任何东西能抓住我试图与之关联的数据。有没有人可以分享一个例子？我目前正在尝试像这样获取当前关联的电子邮件。

用户会话控制器：

```
 def new
    @user_session = UserSession.new
    @current_User = current_user
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user_session }
    end
  end 
```

user_sessions 视图：

```
<p> <%= @current_user.email %> </p> 
```

应用控制器：

```
helper_method :current_user

  private

  def current_user_session
    return @current_user_session if defined?(@current_user_session)
    @current_user_session = UserSession.find
  end

  def current_user
    return @current_user if defined?(@current_user)
    @current_user = current_user_session && current_user_session.record
  end 
```

并得到这个错误：

```
undefined method `email' for nil:NilClass 
```

关于：

```
<p> <%= @current_user.email %> </p> 
```

预先感谢您的任何帮助！真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:09:05.027

确保在你的顶部`ApplicationController`你有

```
class ApplicationController
  helper_method :current_user_session, :current_user 
```

然后，在您看来，不要使用`@current_user`，使用`current_user`.

```
<p> <%= current_user.email %> </p> 
```

当您`@current_user`在视图中调用时，从未为该请求设置它，这就是您收到`nil:NilClass`错误的原因。

```
helper_method :current_user_session, :current_user 
```

这使得在`current_user`您的所有扩展控制器中已经可用的方法`ApplicationController`也可以作为辅助方法在您的视图中使用。通过使用`current_user`，您可以保证返回当前`UserSession`实例。第一次检索后*（第一次调用`current_user`）*，`@current_user`将有一个值，意思是

```
return @current_user if defined?(@current_user) 
```

`UserSession`将执行，跳过在后续调用中查找当前实例的尝试`current_user`。

# javascript - 我需要知道弹出窗口中下拉列表的值，使用 jquery

> ID：12063015
> 
> 赞同：0
> 
> 时间：2012-08-21T21:03:54.247
> 
> 标签：javascript, jquery

我正在为我的网格使用[jtable](http://www.jtable.org/)，当创建一个新记录时，它会在其中引发一个弹出窗口。我有一个下拉列表，所以我需要获取该下拉列表的值。我怎样才能做到这一点？

这是html：

```
 <div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" style="display: block; z-index: 1002; outline: 0px none; position: absolute; height: auto; width: auto; top: 78px; left: 828px;" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-2">
    <div class="ui-dialog-content ui-widget-content" style="width: auto; min-height: 30px; height: auto;" scrolltop="0" scrollleft="0">

<form id="jtable-create-form" class="jtable-dialog-form jtable-create-form" method="POST" action="/Item/Insertar">
<div class="jtable-input-field-container">
<div class="jtable-input-label">Producto</div>
<div class="jtable-input jtable-dropdown-input">
<select id="Edit-Producto" class="" name="Producto">
<option value="1">Burn 1 L</option>
<option value="2">Burn 1.5 L</option>
<option value="3">Burn 1/2 L</option>
</select>
</div>
</div>
</form>
   </div>
    </div> 
```

```
 $('#Edit-Producto').change(function () {
        var t = $('#Edit-Producto').val();
        alert(t);
        alert('Handler for .change() called.');
    });
    $("select[name='Producto']").change(function () {
        alert('Handler for .change() called.');
    });
    </script> 
```

# c# - 使用 ASP.NET 生成 PDF/Microsoft Word 报告

> ID：12063017
> 
> 赞同：0
> 
> 时间：2012-08-21T21:03:59.947
> 
> 标签：c#, asp.net, xslt, pdf, ms-word

我想询问使用 ASP.NET 生成 PDF 和 Microsoft Word 文档的最佳方法。

我用过XSLT转换，但效果不好，而且XSLT处理器主要是商业的，不是免费的。

我需要创建一个具有页眉、页脚和一些表格和图像的简单文档。

谁能为我提供最好的技术来完成这项工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:07:52.253

不久前我有这个问题。我为 PDF 生成写了一些非常简洁的东西。

[iTextSharp 或 XSL-FO 使用可填写的表单动态创建 PDF？](https://stackoverflow.com/questions/5082933/itextsharp-or-xsl-fo-to-create-a-pdf-dynamically-with-fillable-forms)

PM我，我可以给你发一些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:06:38.877

IText 是一个很好的免费库，用于创建 PDF 文档。[http://itextpdf.com](http://itextpdf.com/)。适用于 WinForms 和 ASP.Net。

# c# - 如何在 asp.net 中发送和接收 POST 请求？

> ID：12063023
> 
> 赞同：0
> 
> 时间：2012-08-21T21:04:53.963
> 
> 标签：c#, jquery, asp.net, http-post, dom-events

我必须使用`POST`方法从 aspx 发送 XML 数据并在另一个 Aspx 文件中接收参数。

我已将 XML 数据存储在`xmlValidator`命名的 Javascript 变量中。我尝试使用以下代码，但它对我不起作用：

为了发送，我写道：`validator.aspx`

```
<script type = "text/javascript">
    function submit_a() {
        $.post("../All.aspx", { "data": validatorXML }, function (result) {
         alert(result);
        });
 }
</script> 
```

在接收点，即在`All.aspx` 我写的页面中：（从博客中阅读）

```
<%@ Page Language="C#" AutoEventWireup="true" %>
 <%
   NameValueCollection nvc = Request.Form;
     Response.Write(nvc["data"]); //Here i have to call a method written in a .cs file
  // which return some data and print in `validator.aspx`
%> 
```

但它什么也没打印。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:16:44.660

阅读。

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)

# php - 如何在html textarea中逐句获取字符串

> ID：12063024
> 
> 赞同：0
> 
> 时间：2012-08-21T21:04:55.523
> 
> 标签：php, javascript, html, string, textarea

我有一个文本区域，其中包含如下信息，

```
Secured places in the national squad respectively
Selected to the national team this year as well
Selected to the national team twice during his university career
Went to school at ABS 
```

**当用户单击提交按钮时，我想将每行中的字符串获取到提交页面中的 php 变量**，就像这样

```
$a = "Secured places in the national squad respectively";
$b = "Selected to the national team this year as well";
$c = "Selected to the national team twice during his university career";
$d = "Went to school at ABS"; 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:09:22.920

如果您不关心句子，而关心换行符，那么您应该能够基于这样的方式分解为数组：

```
$posted_text = $_POST['text']; // or however you get the value into a string
$text_array = explode(PHP_EOL, $posted_text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:08:47.520

我想你在寻找

```
explode('\n\r', $var) 
```

其中 var 是您撕开的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:19:06.720

没有断线的工作示例：

*   [http://codepad.viper-7.com/OBiUXP](http://codepad.viper-7.com/OBiUXP)

* * *

```
$words = explode(" ", str_replace("\n"," ",$text));
$sentences = Array();

$sentence = Array();
foreach($words as $word) {    
    $word = trim($word);
    if(!$word) continue ;
    $char1 = substr($word,0,1);
    $char2 = substr($word,1,1);

    if((strtoupper($char1) == $char1) && (strtolower($char2) == $char2)) {              
        if(count($sentence)) {
            $sentences[] = join(" ", $sentence);
        }        
        $sentence = Array();
    }    
    $sentence[] = $word;    
}
if(count($sentence)) {
    $sentences[] = join(" ", $sentence);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:09:10.877

您最好的选择是通过换行符 \n 爆炸字符串。不幸的是，如果用户实际上并没有按回车键并且文本刚刚滚动到下一行，则不会有任何换行符可以爆炸。

# c# - WPF Datagrid ComboboxColumn 数据绑定

> ID：12063035
> 
> 赞同：1
> 
> 时间：2012-08-21T21:05:40.863
> 
> 标签：c#, wpf, xaml, binding, datagrid

我有一个非常简单的数据库，其中包含两个表，一个代表书籍，另一个代表流派。我已经使用实体框架模型第一代来创建它，现在我想在 WPF Datagrid 中表示它。Datagrid 应该将书的类型显示为 Combobox 列，但我无法正确绑定它。

```
<Window x:Class="TestApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:TestApp"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <ObjectDataProvider IsAsynchronous="True" x:Key="BookDataProvider" ObjectType="{x:Type local:BookDataProvider}">
    </ObjectDataProvider>
    <ObjectDataProvider x:Key="Books" ObjectInstance="{StaticResource BookDataProvider}" MethodName="GetAllBooks"></ObjectDataProvider>
    <ObjectDataProvider x:Key="GenreDataProvider" ObjectType="{x:Type local:GenreDataProvider}" IsAsynchronous="True">
    </ObjectDataProvider>
    <ObjectDataProvider x:Key="Genres" ObjectInstance="{StaticResource GenreDataProvider}" MethodName="GetAllGenres"></ObjectDataProvider>
</Window.Resources>
<Grid DataContext="{Binding Source={StaticResource Books}}">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="179*" />
        <ColumnDefinition Width="32*" />
        <ColumnDefinition Width="292*" />
    </Grid.ColumnDefinitions>
    <DataGrid AutoGenerateColumns="False" Grid.ColumnSpan="3" Height="311" HorizontalAlignment="Left" Name="dataGrid1" VerticalAlignment="Top" Width="503" SelectionChanged="dataGrid1_SelectionChanged" ItemsSource="{Binding}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Title" Binding="{Binding Title}" />
            <DataGridTextColumn Header="ISBN" Binding="{Binding ISBN}"/>
            <DataGridTextColumn Header="Author" Binding="{Binding Author_AuthorName}"/>
            <DataGridComboBoxColumn Visibility="Visible" IsReadOnly="False"  Header="Genre" SelectedItemBinding="{Binding Genre}" SelectedValuePath="Genre" DisplayMemberPath="Name" ItemsSource="{Binding Source={StaticResource Genres}}"/>                
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

这显示了组合框中的流派列表，但是当我运行应用程序时，我无法让它显示每本书的正确流派。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:31:20.757

我认为您不应该同时使用选定项绑定和选定值路径。我会选择第一个。此外，您不应该处理选定的项目更改事件，这不是非常 mvvm-ish，而是处理您的实体的 INotifyPropertyChanged。

如果那不能解决问题，那么我认为问题一定出在您的模型类中。要使此绑定起作用，您的实体对象的流派属性必须设置为与可用流派列表中的流派完全相同的实例，即。两者必须是完全相同的对象。

# c - Visual Studio 2012：从现有源代码创建项目

> ID：12063036
> 
> 赞同：2
> 
> 时间：2012-08-21T21:05:45.430
> 
> 标签：c, windows, visual-studio, driver, wdm

我想创建 WDM 内核驱动程序项目（用于 x64 和 win32 配置）。

我从现有源代码的 VS File->New->Project 创建了一个。对于项目类型，有 4 个选项：Windows 应用程序项目、控制台、DLL、静态 (LIB) 项目，没有其他选项。所以我创建了 Lib 并更改了配置（例如平台工具集：WindowsKernelModeDriver8.0，驱动程序类型：WDM 等）但它仍然显示调试配置为 Release/Debug 和 Win32。

当我尝试创建新的 x64 时，我不得不从 Win32 复制。（PS：我在其他项目中有 x64 和 Win7/8 发布/调试等）。后来在尝试使用驱动程序调用 StartService 时 - 它失败并出现错误 #127。<- 在 Win 7 64 位 m/c 上。

但如果我使用 Debug/Win32 位选项编译并在 32 m/c 上使用 StartService 安装，同样的事情，它工作得很好。谁能帮我这个？

为什么我使用现有代码创建？：因为我们有目录结构并且我必须维护它。

# php - 将 3 个 MySQL 查询合二为一

> ID：12063045
> 
> 赞同：3
> 
> 时间：2012-08-21T21:06:21.200
> 
> 标签：php, mysql, sql

我正在尝试做的是拿一张完整的桌子，找出`id`其电子邮件地址的值的成员的内容，`emails.from`然后将他们的值放在`id`那里。我正在尝试通过使用 ID 而不是电子邮件地址来提高我的性能，但我无法完成此任务。

```
$mysql = new mysql();
$mysql->query('SELECT `from` FROM `emails` ORDER BY `id` ASC' );

while($row = mysql_fetch_array($mysql->result)){
    $mysql2 = new mysql();
    $mysql2->query('SELECT `id` FROM `exchange` WHERE `email` = "'.$row['from'].'"');

    $details = mysql_fetch_assoc($mysql2->result);

    $mysql2->query('UPDATE `emails` SET `from` = '.$details['id'].' WHERE `from` = "'.$row['from'].'"');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:20:57.923

如果您正在做整张桌子，则无需查找它。

```
UPDATE emails SET from=id 
```

将做表中的每一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:23:39.167

如果我理解你的代码，你可以尝试这样的事情：

```
UPDATE     `emails`
INNER JOIN `exchange` ON `exchange`.`email` = `emails`.`from`
SET `emails`.`from` = `exchange`.`id` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:23:54.500

下面的查询应该可以解决问题:)

```
update emails 
set `from`=(select e.id from exchange as e where e.email=em.`from`)
from emails as em
order by em.id asc 
```

# captcha - “CAPTCHA” - 制作更简单的版本

> ID：12063046
> 
> 赞同：0
> 
> 时间：2012-08-21T21:06:28.753
> 
> 标签：captcha

我正在建立一个网站并打算使用“验证码”来防止机器人。

我对某些系统感到非常恼火，因为这些系统的文字不可读，因此您必须尝试再试一次。

因此，我将使用这些字母/数字

```
acdefhkmnpqrstwxyz 234578 
```

这是希望它能避免一些混淆（例如1和l）。

还有其他我应该考虑的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:12:10.420

*   对人类来说更容易，对机器人来说更容易......

*   想想视障人士，他们更讨厌验证码

*   为什么要[重新发明轮子](http://www.google.com/recaptcha)？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T21:38:08.443

要添加到 Tomasz 答案 reCaptcha 是一个有价值的原因，请使用它。

# javascript - 将 vars 传递给 eval 解决方法，以在 YUI 压缩后处理来自 json 对象的代码字符串

> ID：12063047
> 
> 赞同：-3
> 
> 时间：2012-08-21T21:06:32.170
> 
> 标签：javascript, jquery, json, yui, eval

我需要将 jQuery 对象传递给 eval 的解决方法。问题是我需要访问一个位于 eval 区域之外的 jQuery 对象，但我看不到将其传递进来。这就是我所拥有的。

```
var  jObj = $(selector);
var myCode = "var jObj="+jObj+"; var i="+i+"; "+shape.mouseover.onEnd.replace("\u0027","'");
var myFucn = new Function(myCode);
myFucn(); 
```

我要从中取出字符串的对象是

```
shape.mouseover.onEnd.replace("\u0027","'"); 
```

正在工作，我在该字符串中传递的是

```
open_info(jObj,i) 
```

这是我必须开火的。交易是代码是通过 YUI 压缩器运行的，所以 jObj var 变成了别的东西，所以我需要把它传递进去。现在我在它认为应该有的地方遇到一个错误，并且结束 ] 这是不正确的。我似乎在工作，而不是 jObj var。

**编辑**

有很多方法可以到达我需要去的地方，但并不像 [如何以对象形式在 eval 中传递参数？](https://stackoverflow.com/questions/1500745/how-to-pass-parameters-in-eval-in-an-object-form)

```
shape.mouseover.onEnd = "open_info(jObj,i)";
/*
 * this is coming in and must be as it is, don't say it's wrong please
 * it's not able to be done anyother way!
 */

//lets process the string and pull in the vars
/* BEOFRE YUI COMPRESSOR CHANGES THINGS and works!!!
    var  jObj = $(selector);
    var i = 1;
    var myCode = shape.style.events.mouseover.onEnd.replace("\u0027","'");
    var myFucn = new Function(myCode); 
    myFucn();
 */
// AFTER note it can be random as i change code so it fails cause 
// var jObj is now var r and var i is now var e
    var  r = $(selector);
    var e = 1;
    var p= shape.style.events.mouseover.onEnd.replace("\u0027","'");
    var f=  new Function(p);
    f(); 
```

现在它在压缩之前工作..之后不是由于更改。希望能解决一些问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:22:04.187

我可能走错了路，在这里感到困惑..

但这不是你想要做的吗？

向 myFucn 发送正确的对象以及我是什么

```
myFucn($(selector),10);

function myFucn(jObj,i)
{
shape.mouseover.onEnd.replace("\u0027","'");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:01:34.163

我仍然不明白为什么这个问题得到了 2 票反对，但它已经解决并且效果很好。诀窍是对 dom 状态进行相同的操作。一旦它被放置，它真的很简单。

```
//so this is what the object is parsed out to from the json string
//since you can't just pass a function stright that way any how
shape.mouseover.onEnd = "open_info(jObj,i)"; 

//this is what will take that string and process it
//note jObj is what is in the orgain code but it changes to 
// var r or something else that is shorter after going thru YUI compressor
// Which is why we can't just use open_info(jObj,i) and it work.. 
// ie: it's not an issue with scoope but an issues with var names being shortened
(function(){
    //this is the trick on passing them so YUI doesn't get them
    //use a string and YUI skips it so we directly create the
    //needed oject in the window namespace 
    window['jObj']=jObj; window['i']=i;
    var p= shape.mouseover.onEnd;
    var f=  new Function(p); 
    f();
})(); 
```

就是这样.. 我把它放在点击或悬停事件中，所以它类似于 onClick。

```
/* EXMAPLE OUTPUT AFTER YUI COMPRESSION
//Note after the YUI compressor get ahold of that 
//processing code above it'll look like 
*/
function(){window.jObj=n,window.i=t;var u=i.mouseover.onEnd,r=new Function(u);r()}(); 
```

所以工作的方式是，我需要解决 var jObj 被重命名的问题。所以我只是简单地为名称做了一个刺痛，然后让压缩的 var 名称填充我需要处理的代码字符串的对象的名称。不知道为什么我以前没有看到它，我会保存我的代表值：-\ .. 哦，好吧。可能是缩短它的一种方法，但我现在要离开它。

**编辑**

我放弃了它正在工作的编辑。:) 很好.. 想知道还有什么其他方法可以让它做同样的事情。

# cakephp - cakephp 错误插件上传者 Miles J

> ID：12063049
> 
> 赞同：1
> 
> 时间：2012-08-21T21:06:46.867
> 
> 标签：cakephp, plugins, file-upload, cakephp-model

我在 cakephp 2 中有一个站点，我想使用 Miles J 的插件 Uploader 上传一个文件。但是返回这个错误：找不到列：1054 Unknown column 'Array' in 'field list'

SQL查询：

```
UPDATE `db148147_trimalcione`.`ingredient_images` 
SET 
    `id` = 6, 
    `filename` = Array, 
    `ingredient_id` = 8, 
    `modified` = '2012-08-21 23:01:13' 
WHERE `db148147_trimalcione`.`ingredient_images`.`id` = '6' 
```

为什么？我创建了一个表成分图像，其中有列文件名。这是我的模型：

```
<?php
class IngredientImage extends AppModel {
    public $name = 'IngredientImage';
    public $useTable = 'ingredient_images';

    public $actsAs = array (
        'Uploader.Attachment' => array (
            'filename' => array(
                'name'      => 'setNameAsImgId',    // Name of the function to use to format filenames
                'saveAsFilename' => true,
                // 'baseDir'    => '',              // See UploaderComponent::$baseDir
                'uploadDir' => '/files/ingredient_images/', // See UploaderComponent::$uploadDir
                'dbColumn'  => 'filename',          // The database column name to save the path to
                'defaultPath'   => 'default.png',   // Default file path if no upload present
                'maxNameLength' => 20,              // Max file name length
                'overwrite' => true,                // Overwrite file with same name if it exists - Se si effettua un transform è da usare al suo interno altrimenti c'è un override a false
                'stopSave'  => true,                // Stop the model save() if upload fails
                'allowEmpty'    => true,            // Allow an empty file upload to continue
                'transforms'    => array (
                    array('method' => 'resize', 'width' => 160, 'height' => 160, 'dbColumn' => 'filename', 'append' => false, 'overwrite' => true)
                )
            )
        ),
        'Uploader.FileValidation' => array (
            'filename' => array (
                'maxWidth'  => array (
                    'value' => 1280,
                    'error' => 'La lunghezza dell\'avatar non deve superare i 1280 pixel'
                ),
                'maxHeight' => array (
                    'value' => 1280,
                    'error' => 'L\'altezza dell\'avatar non deve superare i 1280 pixel'
                ),
                'extension' => array (
                    'value' =>  array('gif', 'jpg', 'png', 'jpeg'),
                    'error' => 'Il formato dell\'avatar deve essere una GIF, JPG o PNG'
                ),
                'filesize'  => array (
                    'value' => 5242880,
                    'error' => 'La dimensione dell\'avatar non deve superare i 500kB'
                )
            )
        )
    );

    public $belongsTo = array(
        'Ingredient' => array(
            'className'     => 'Ingredient',
            'foreignKey'    => 'ingredient_id',
            'conditions'    => '',
            'order'         => ''
        )
    );

    public function setNameAsImgId ($name, $field, $file) {
        /**
        * Format the filename a specific way before uploading and attaching.
        * 
        * @access public
        * @param string $name   - The current filename without extension
        * @param string $field  - The form field name
        * @param array $file    - The $_FILES data
        * @return string
        */
        // devo ricavare l'id dell'immagine appena creata per rinominare il file

        return $this->id;
    }
}

?> 
```

这是我的控制器：

```
CakePlugin::load('Uploader');
App::import('Vendor', 'Uploader.Uploader');
//.. my action
   $this->request->data['IngredientImage']['ingredient_id'] = $this->Ingredient->id;
$this->Ingredient->IngredientImage->save($this->request->data
//.. 
```

这是我的看法：

```
echo $this->Form->create('Ingredient', array ('class' => 'form', 'type' => 'file')); 
echo $this->Form->input('IngredientImage.id', array ('type'=>'hidden', 'value'=> $ingredient[0]['IngredientImage']['id'],'label'=> false, 'id' => 'IngredientImage.id'));
    echo $this->Form->input('IngredientImage.filename', array('type' => 'file'));
echo $this->Form->submit('Modifica', array('id'=>'edit'));
echo $this->Form->end(); 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:10:34.477

检查它打印的内容`pr($this->request->data);`您会找到索引的数组`filename`。假设您获取的文件名位于`$this->request->data['IngredientImage'][filename']['actual_filename']`. 然后你可以使用它来操作它：

```
CakePlugin::load('Uploader');
App::import('Vendor', 'Uploader.Uploader');
//.. my action
$this->request->data['IngredientImage']['ingredient_id'] = $this->Ingredient->id;
$this->request->data['IngredientImage']['filename'] = $this->request->data['IngredientImage']['filename']['actual_filename'];
$this->Ingredient->IngredientImage->save($this->request->data)
//.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T14:00:59.540

检查文件夹 'uploadDir' => '/files/ingredient_images/' 的权限这是我设置的问题

希望它有帮助

# c++ - 在 Visual C++ 2008 Express Ed 中查找多行

> ID：12063051
> 
> 赞同：0
> 
> 时间：2012-08-21T21:06:49.690
> 
> 标签：c++, function, find, duplicates, lines

基本上这就是我的问题。是否有可能在 VS 2008 中找到不止一行？我想用 void 函数替换重复的段落，但有时会有细微的差异，所以手动查找相同的段落需要很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:23:44.203

我不正确理解你的问题，所以你能举个例子你想替换什么吗？

据我了解，您想替换匹配特定规则的字符串。为此，您可以使用[regex](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.80%29.aspx)，它内置于 VS2008 中。

# android - 我需要管理 Android 异步任务生命周期吗？

> ID：12063053
> 
> 赞同：2
> 
> 时间：2012-08-21T21:06:52.240
> 
> 标签：android, android-asynctask, android-fragments, android-fragmentactivity

如果用户点击后退按钮并离开活动时异步任务尚未完成，我是否需要在片段 onDestroy 事件中对 asyncTask 调用取消？

如果上次访问 fragmentActivity 的 asyncTask 仍在运行、尚未完成或尚未取消，我是否还需要检查我的 asyncTask 的现有实例是否仍在运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T21:16:30.213

你不必这样做，但你应该这样做。

原因是它一直运行直到完成，并且从蜂窝开始，它甚至只为所有 asyncTasks 使用一个线程。

无论如何，asyncTask 通常应该用于短时间的任务，比如 1-10 秒。这不是一个规则，但它会帮助您实现存在 asyncTask 的原因——能够在后台运行任务。

[以下是API 中关于 asyncTask 的](http://developer.android.com/reference/android/os/AsyncTask.html)一些说明：

> “AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。AsyncTasks 理想情况下应该用于短操作（最多几秒钟）。如果您需要保持线程长时间运行有时间，强烈推荐你使用 java.util.concurrent 包提供的各种 API，如 Executor、ThreadPoolExecutor 和 FutureTask。”

[execute()](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)的 API ：

> “启动HONEYCOMB，任务回到单线程执行，避免并行执行导致的常见应用程序错误。如果你真的想要并行执行，你可以使用这个方法的executeOnExecutor（Executor，Params ...）版本与THREAD_POOL_EXECUTOR ; 但是，请参阅那里的评论以获取有关其使用的警告。”

如果您仍然希望将 asyncTask 用作后台任务，请确认它只有一个实例（并且不要忘记在不需要时取消它），或者使用 Google 建议避免的下一个代码：

```
public static <T> void runAsyncTaskInMultipleThreads(final AsyncTask<T,?,?> asyncTask,final T... params)
    {
    if(android.os.Build.VERSION.SDK_INT>=android.os.Build.VERSION_CODES.HONEYCOMB)
      asyncTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR,params);
    else asyncTask.execute(params);
    } 
```

# apache - 如何将“其他所有”规则添加到 mod_rewrite

> ID：12063055
> 
> 赞同：0
> 
> 时间：2012-08-21T21:06:54.737
> 
> 标签：apache, mod-rewrite

如果没有其他规则得到满足，我如何`mod_rewrite`重定向到某个页面或者可能只是抛出 404？这是我的`.htaccess`文件中的内容：

```
RewriteEngine on

RewriteRule ^\. / [F,QSA,L]
RewriteRule ^3rdparty(/.*)$ / [F,QSA,L]

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^((images|upload)/.+|style.css)$ $1 [L]

RewriteRule ^$ special [QSA]
RewriteRule ^(special|ready|building|feedback)/?$ $1.php [QSA,L]
RewriteRule ^(ready|building)/(\d+)/?$ show_property.php?type=$1&property_id=$2 [QSA,L]

RewriteRule . error.php?code=404 [QSA,L] 
```

`error.php`如果用户尝试访问此处未明确指定的任何内容，则应该将其发送给用户（顺便说一句，抛出 404 的正确方法是什么？）。但是，它会将用户从每个页面发送到`error.php`. 如果我删除最后一条规则，其他一切都正常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:17:37.120

发生的情况是，当您进行重写时，您会将用户发送到新 URL，然后再次评估这些重写规则。最终不会触发其他重定向规则，它将到达最终规则并始终重定向到 error.php 页面。

所以你需要设置一些重写条件来避免这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:17:45.660

重写引擎循环，所以你需要在最终重写到error.php之前通过成功的重写。也许是这样的：

```
RewriteCond %{REQUEST_URI} !^/$
RewriteCond %{REQUEST_URI} !^/(special|ready|building|feedback|show_property)\.php
RewriteCond %{REQUEST_URI} !^/((images|upload)/.+|style.css)$
RewriteRule ^ error.php?code=404 [QSA,L,R=404] 
```

每个条件都确保 URI 不是您的其他规则已重写的其中之一。

将`R=404`重定向到 error.php 页面作为“404 Not Found”。

* * *

> 不幸的是，它不起作用——它允许访问服务器上的所有文件（大概是因为需要满足所有条件）。我尝试了另一种解决方案：

必须有其他东西通过，尽管当我在一个空白的 htaccess 文件中测试你的规则加上这些规则时，它似乎工作。您可以尝试其他一些不太好的方法，但由于您实际上并未将浏览器重定向到任何地方，因此它将对客户端隐藏。

您在所有规则的末尾都有一个`QSA`标志，您可以在应用规则后向查询字符串添加一个唯一参数，然后检查它。例子：

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^((images|upload)/.+|style.css)$ $1?_ok [L,QSA] 
```

然后在最后：

```
RewriteCond %{QUERY_STRING} !_ok
RewriteRule ^ error.php?code=404&_ok [QSA,L,R=404] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:27:53.093

理论上如果没有任何规则匹配（并且请求的URL不存在），它已经是404了。所以我认为最简单的解决方案是使用一个`ErrorDocument`，然后重写它：

```
RewriteEngine On

ErrorDocument 404 /404.php
RewriteRule ^404.php$ error.php?code=404 [L]

# All your other rules here... 
```

您可以对任何其他 HTTP 错误代码执行相同的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T10:30:32.150

这里的问题是，在`mod_rewrite`完成 URL 的重写之后，它被重新提交给`mod_rewrite`另一个 pass。因此，该`[L]`标志仅使规则持续到当前通过。[正如这个问题](https://stackoverflow.com/questions/7798099/how-to-block-multiple-mod-rewrite-passes-or-infinite-loops-in-a-htaccess-cont)中更好地解释的那样，`mod_rewrite`从 Apache 版本 2.3.9 开始，现在支持另一个标志 - `[END]`，这使得当前`mod_rewrite`通过最后一个。对于 Apache 2.2，提供了许多解决方案，但由于其中一个有点笨拙，另一个不起作用，我当前的解决方案是添加另外两个规则，允许访问一组特定的文件，同时为所有内容发送 404别的：

```
RewriteRule ^((images|upload)/.+|style.css|(special|ready|building|feedback|property).php)$ - [QSA,L]
RewriteRule .* - [QSA,L,R=404] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T21:11:06.847

我认为你的最后一条规则应该是

```
RewriteRule ^(.*)$ error.php?code=404&query=$1 [QSA,L] 
```

您可以省略括号和 $1 参数，但了解用户试图实现的目标可能很有用。

希望，这可以解决问题！

# c++ - C++ 子类是否可以共享相同的模板？

> ID：12063056
> 
> 赞同：4
> 
> 时间：2012-08-21T21:07:00.937
> 
> 标签：c++, templates, scope, nested-class

子类是否可以共享相同的模板？例如：

```
template <class T>
class A
{
private:
  T _aObj;
public:
  class B
  {
  public:
    T _bObj;
  };
}; 
```

哪里 T 可以同时用于`A`和`B`？

当我尝试这个时，我收到以下错误：

> 错误：A::B 不是模板

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T21:10:07.430

是的，工作正常（在符合标准的编译器上）。

为什么这是合乎逻辑的一种思考方式是因为`B`不仅仅是一部分`A`，它是一部分`A<T>`！`T`不仅是 for 类型的一部分`A`，而且也是 for `B`（它的正确名称应该是`A<T>::B`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:10:25.293

可以肯定的是，尽管某些 C++ 编译器不允许这样做（想到飞思卡尔 HCS12 编译器）。但是任何风格的 GCC 或 MSVC 都可以编译这个没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:16:21.167

从最新可用的标准公开[草案](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3376.pdf)中，嵌套类的范围和访问规则如下：

**9.7 嵌套类声明 [class.nest]**

> 1 一个类可以在另一个类中声明。在另一个类中声明的类称为嵌套类。嵌套类的名称是其封闭类的本地名称。嵌套类在其封闭类的范围内。

**11.7 嵌套类 [class.access.nest]**

> 1 嵌套类是成员，因此具有与任何其他成员相同的访问权限。封闭类的成员对嵌套类的成员没有特殊的访问权限；应遵守通常的访问规则（第 11 条）。

# jquery - 在节点中不断收到无浏览器 jquery 的错误

> ID：12063058
> 
> 赞同：5
> 
> 时间：2012-08-21T21:07:39.130
> 
> 标签：jquery, html, node.js, browser

我正在尝试运行节点脚本和 html 页面，但我不断收到错误消息。我试图运行的脚本是：

```
node script.js page.html 
```

script.js 文件具有以下内容：

```
var argv = require('optimist').argv,
$ = require('jquery'),
fs = require('fs');

var file = argv._[0];

var html = fs.readFileSync(file, 'UTF-8');

 $(html).find('p').each(function(index) {
var content = $(this).html();

console.log('Paragraph ' + (index + 1) + ': ' + content);
}); 
```

我的 page.html 有以下代码：

```
<html>
 <body>
  <p>Apple</p> 
  <span>Unrelated</span>
  <p>Orange</p>
  <div>Steak</div>
  <p>Banana</p>
 </body>
</html> 
```

我的 packages.json 文件内容如下：

```
{
  "name": "paragraphs",
  "version": "1.0.0",
  "main": "script.js",
  "scripts": {
     "test": "echo \"Error: no test specified\" && exit 1"
   },
  "dependencies": {
      "optimist": "0.3.4",
      "jquery": "1.7.3"
   },
   "author": "Joe LeBlanc",
   "license": "BSD"
} 
```

我安装了 jquery 和 optimist 模块，但我不断收到以下错误：

```
C:\Documents and Settings\Amen.Ra\Desktop\paragraphs\node_modules\jquery\lib\node-jquery.js:10
window.XMLHttpRequest.prototype.withCredentials = false;

TypeError: Cannot read property 'prototype' of undefined at create (C:\Documents and Settings\Amen.Ra\Desktop\paragraphs\node_modules\jquery\lib\node-jquery.js:10:26)
at C:\Documents and Settings\Amen.Ra\Desktop\paragraphs\node_modules\jquery\lib\node-jquery.js:9435:18
at Object.<anonymous> (C:\Documents and Settings\Amen.Ra\Desktop\paragraphs\node_modules\jquery\lib\node-jquery.js:9437:2)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (C:\Documents and Settings\Amen.Ra\Desktop\paragraphs\script.js:2:6) 
```

是什么导致了这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:15:14.837

jquery 模块不适用于 Windows。

[https://github.com/coolaj86/node-jquery#does-not-work-on-windows](https://github.com/coolaj86/node-jquery#does-not-work-on-windows)

很抱歉，我无法提供更多帮助。

顺便说一句，您的代码可以在我的 Linux 机器上运行。

# iphone - 这是很好的编程风格。使用这样的类方法是否有效？

> ID：12063060
> 
> 赞同：0
> 
> 时间：2012-08-21T21:07:52.687
> 
> 标签：iphone, objective-c, ios, afnetworking

我对 Objective-C 和 iOS 开发有点陌生（使用它大约 1.5 年，实际上只是最近 8 个月左右才开始大量参与）。我编写了一个自定义类来处理我所有的网络服务请求。我使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)处理这些请求（并且喜欢它），但我想确保我所做的事情是高效的，并且不会在以后引起问题。

从我在 Instruments 中看到的以及应用程序的性能来看，这似乎是一个很好的方法，但我真的远非专家，我希望得到一些反馈和/或建议。

这是我的 NetworkClient 类：

网络客户端.h：

```
#import <Foundation/Foundation.h>

extern NSString * const APIKey;

@interface NetworkClient : NSObject

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block;

+(void)handleNetworkErrorWithError:(NSError *)error;

+(void)handleNoAccessWithReason:(NSString *)reason;

@end 
```

网络客户端.m：

```
#import "NetworkClient.h"
#import "AFHTTPClient.h"
#import "AFHTTPRequestOperation.h"
#import "SBJson.h"

NSString * const APIKey = @"MyAPIKeyThatIsDefinedInDatabasePerApplication";

@implementation NetworkClient

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block {

    [self processURLRequestWithURL:url andParams:params syncRequest:NO alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block {
    [self processURLRequestWithURL:url andParams:params syncRequest:syncRequest alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block {

    // Default url goes here, pass in a nil to use it
    if (url == nil) {
        url = @"https://MyURLToWebService";
    }

    // Add in our API Key
    NSMutableDictionary *newParams = [[NSMutableDictionary alloc] initWithDictionary:params];
    [newParams setValue:APIKey forKey:@"APIKey"];

    NSURL *requestURL;
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:requestURL];

    NSMutableURLRequest *theRequest = [httpClient requestWithMethod:@"POST" path:url parameters:newParams];

    __block NSString *responseString = @"";

    AFHTTPRequestOperation *_operation = [[AFHTTPRequestOperation alloc] initWithRequest:theRequest];
    __weak AFHTTPRequestOperation *operation = _operation;

    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        responseString = [operation responseString];

        id retObj = [responseString JSONValue];

        // Check for invalid response (No Access)
        if ([retObj isKindOfClass:[NSDictionary class]]) {
            if ([[(NSDictionary *)retObj valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                block(nil);
                [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
            }
        } else if ([retObj isKindOfClass:[NSArray class]]) {
            if ([(NSArray *)retObj count] > 0) {
                NSDictionary *dict = [(NSArray *)retObj objectAtIndex:0];
                if ([[dict valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                    block(nil);
                    [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
                }
            }
        }
        block(retObj);
    } 
                                      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                          NSLog(@"Failed with error = %@", [NSString stringWithFormat:@"[Error]:%@",error]);
                                          block(nil);
                                          if (alertUserOnFailure) {
                                              // Let the user know something went wrong
                                              [self handleNetworkErrorWithError:operation.error];
                                          }

                                      }];

    [operation start];

    if (syncRequest) {
        // Process the request syncronously
        [operation waitUntilFinished];
    } 

}

+(void)handleNetworkErrorWithError:(NSError *)error {
    NSString *errorString = [NSString stringWithFormat:@"[Error]:%@",error];

    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"Connection Error" 
                            message:errorString 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

+(void)handleNoAccessWithReason:(NSString *)reason {
    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"No Access" 
                            message:reason 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

@end 
```

这就是我所说的：

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"GetApplications", @"Command",
                            userInfo.networkID, @"NetworkID",
                            nil];

    [NetworkClient processURLRequestWithURL:nil andParams:params block:^(id obj) {
        [MBProgressHUD hideHUDForView:self.view animated:YES];

        if ([obj isKindOfClass:[NSArray class]]) {
            myTableViewData = (NSArray *)obj;        
            [self.myTableView reloadData];  
        }
    }]; 
```

所以我的网络服务可以发送回一个字典结构的 JSON 响应和一个数组格式的 JSON 响应。NetworkClient 方法将同时接收并发送回它所获得的内容（我将其留给调用代码以确保它返回预期的内容）。我使用 APIKey 作为额外的安全措施，以确保只有我的应用程序可以访问 Web 服务资源（在发回数据之前我检查的第一件事是 APIKey 与我在数据库中为该应用程序所拥有的匹配）。

这是做这种事情的有效方法吗？有什么办法让它变得更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:45:01.550

我不明白您为什么要使用它`processURLRequestWithURL:nil`，因为这是为了处理特定服务。它也很混乱，它只告诉我在别处有一些魔法，就好像它根本不存在一样。我会使用单例：

```
extern NSString * const kBaseURL;

@interface NetworkClient : AFHTTPClient
+ (NetworkClient *) sharedClient;
@end

NSString* const kNodeApiURL = BASE_URL;

@implementation NetworkClient

+ (NetworkClient*) sharedClient
{
    static NetworkClient *_sharedClient = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _sharedClient = [[NetworkClient alloc] initWithBaseURL:[NSURL URLWithString:kBaseURL]];
    });
    return _sharedClient;
}

- (id)initWithBaseURL:(NSURL*)url 
{
    if (self = [super initWithBaseURL:url]) {
        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [self setDefaultHeader:@"Accept" value:@"application/json"];
    }
    return self;
}

-(id) init {
    error(@"Use initWithBaseURL: instead.");
    [super doesNotRecognizeSelector:_cmd];
    return nil;
}

@end 
```

然后在 PCH 上

```
#define BASE_URL  @"https://MyURLToWebService" 
```

当您添加参数以显示弹出窗口时，您还将 GUI 与服务器 API 混合。我不认为服务器 API 应该阻塞线程。编写纯异步代码，让调用者从他自己的一端阻止 GUI。

与 handleNoAccessWithReason 相同。API 不处理任何事情，它吸收输入并产生输出。您编写的每一段代码都应该做一 (1) 件事。它将更容易测试、理解和重用。

我不知道你为什么用 __weak 来限定操作。

你传递的那些参数，如果你使用像 User 和 Command 之类的域对象，它会更容易理解。好吧，“命令”很臭。在你的使用代码后面真的有一个名字有意义的方法吗？因为当我调试代码时，我必须打印参数来告诉我发生了什么，我很生气。如果您正在编写服务器 API（如果您想要干净的代码，则默认情况下您应该这样做），您应该公开有意义的名称。

我会以不同的方式编写代码，例如，我想为给定用户从服务器获取一头牛：

```
typedef void (^AFJSONSuccess)(NSURLRequest *request, NSHTTPURLResponse *response, id JSON);
typedef void (^AFJSONFailure)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON);

+(void) cowForUser:(User*)user callback:(void(^)(Cow *cow, NSError *error))callback {

    AFJSONSuccess success = ^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        // turn JSON into a cow
        callback(cow,nil);
    };

    AFJSONFailure failure = ^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        // create a custom NSError
        callback(nil,error);
    };

    NetworkClient *client = [NetworkClient sharedClient];
    NSMutableURLRequest *request = [client requestWithMethod:@"GET" path:kCowPath parameters:jsonDic];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:sucess failure:failure];
    [client enqueueHTTPRequestOperation:operation];
} 
```

现在在使用中启动 hud，并在回调块中调用 stop hud 并检查牛是否为 nil。我不认为 hud 应该阻塞屏幕（就像你等到操作完成一样），如果用户决定移动到另一个屏幕或取消查询怎么办？

我投票结束这个问题，因为它属于代码审查。

# javafx-2 - Imageview 在 ScaleTransition 之后不调整大小

> ID：12063062
> 
> 赞同：0
> 
> 时间：2012-08-21T21:07:54.530
> 
> 标签：javafx-2

我正在尝试按顺序显示三个图像，并对每个图像进行一些比例转换（1、2、3 的图像）。我在 imageview 的单个实例上使用 ScaleTransition，在每次连续转换后，imageView 高度都会被缩放，这不会重置我的代码是

```
 public void start(Stage primaryStage) {

    final IntegerProperty intProperty = new SimpleIntegerProperty(0);
    final Image[] array = {
            (new Image(WaitEffect.class.getResource("1.png")
                    .toExternalForm())),
            (new Image(WaitEffect.class.getResource("2.png")
                    .toExternalForm())),
            (new Image(WaitEffect.class.getResource("3.png")
                    .toExternalForm())) };
    Group root = new Group();

    Scene scene = new Scene(root, 400, 400, Color.BLACK);
    StackPane pane = StackPaneBuilder.create()
            .layoutX(scene.getWidth() / 2).layoutY(scene.getHeight() / 2)
            .build();
    final ImageView imageView = new ImageView();
    pane.getChildren().add(imageView);
    Timeline timeline = new Timeline();
    int count = 0;
    KeyValue value = new KeyValue(intProperty, count++);
    KeyFrame frame = new KeyFrame(Duration.millis(2000),
            new EventHandler<ActionEvent>() {
                int co = 0;

                @Override
                public void handle(ActionEvent paramT) {
                    imageView.setImage(array[co]);

                    ScaleTransition st = ScaleTransitionBuilder.create()
                            .byX(2).byY(2).node(imageView)
                            .duration(Duration.millis(500)).build();
                    st.play();
                    imageView.setFitHeight(150);
                    imageView.setFitWidth(150);
                    imageView.resize(150, 150);
                    co++;
                }
            }, value);

    timeline.getKeyFrames().add(frame);
    timeline.setCycleCount(3);
    timeline.play();

    root.getChildren().addAll(pane);
    primaryStage.setScene(scene);

    primaryStage.show();
}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:43:55.043

`ImageView`设置 new 后不会重置它的属性`Image`。您需要自己重置它，例如通过设置以下`from`属性`ScaleTransition`：

```
ScaleTransition st = ScaleTransitionBuilder.create()
    .fromX(1).fromY(1)
    .byX(2).byY(2).node(imageView)
    .duration(Duration.millis(500)).build(); 
```

# objective-c - UIPickerView“抢先”消息？

> ID：12063063
> 
> 赞同：0
> 
> 时间：2012-08-21T21:07:56.520
> 
> 标签：objective-c, ios, multithreading, uipickerview, nsrunloop

我有一种情况，我的 UIPickerView 被计算任务“饿死”了；换句话说，UIPickerView 永远不会更新——因此，永远不会发送消息——因为正在发生非常繁重的计算任务。选择器控制计算的各个方面，因此两者必须配合得很好。

我想在一个单独的线程中运行计算。似乎这会让选择器自由更新。但是，让我的计算能够多线程是一项艰巨的任务，所以我想找到另一种解决方案。

选择器（或其他 UI 控件）是否有可能“抢占”代码块的执行？计算是循环的；迭代次数使它变得沉重。如果选择器甚至可以在某处设置标志，则循环可能会自行中断，这将与程序流程一起工作。

如果循环可以轮询选择器，那也可以。但是，我还没有找到一种方法来做到这一点。

想法？

（ps。我昨天发布了一个类似的问题，但并没有真正正确地问它 - 当时不太知道问题是什么！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:01:40.870

我假设您所说的标志是指如果选择器被移动，则设置一个标志。如果是这样，您可以这样做 - 查看选择器代表，当任何或全部被调用时，设置一个标志。如果您的计算是由另一个或多个类完成的，则在这些“已取消”的类上创建一个新属性，选择器可以设置它，并在设置时结束计算。

在开始另一个计算之前，您将清除取消标志，然后开始计算。

您还可以在选择器上方放置一个简单的工具栏（常见做法），您可以在其中拥有可以启动计算、显示进度和取消它的控件。

编辑：如果问题是当用户尝试操作它时选择器卡顿，则子类化 UIPicker，拦截触摸事件，并在触摸选择器时取消所有计算。唯一的复杂情况是，如果用户“旋转”选择器，您会想等到它稳定下来，但您不知道要等待多长时间。根据最后的触摸消息，您必须使用启发式方法等待 didSelectRow: 或在重新开始计算之前超时。

# ember.js - transitionTo('route', context) 传递上下文基础路由，而不是请求的路由

> ID：12063066
> 
> 赞同：5
> 
> 时间：2012-08-21T21:08:00.333
> 
> 标签：ember.js, ember-old-router

我正在开发一个 Ember 应用程序，我希望单击按钮以转换到新路由，将对象作为该路由的上下文传递。

问题是，无论我如何尝试传递该上下文，当我到达要转换的路线时，它总是会丢失。

调查（[http://jsfiddle.net/fxbXM/2/](http://jsfiddle.net/fxbXM/2/)）似乎上下文被传递到路由器命中的第一个路由，因为它适用于请求的路由。（请参阅每个路由级别的 connectOutlets 函数的输出）

这似乎证实了我在调试实际应用程序时的想法：在 Ember 的 triggerSetupContext 函数中有三个`enterStates`：[Router, 'root', 'create'] 并且有三个`contexts`：[myObject, null, null]

如果上下文的顺序相反，那么我会在我想要的地方得到我想要的！

我在将对象作为上下文传递的方式上是否犯了一些基本错误？我应该使用另一种方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T22:29:56.507

意识到什么不起作用有点棘手......在调试时，我发现：[在路由器中，只有具有动态段的状态才有上下文](https://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js#L106)，所以在`create`路由中，我添加了“：widget_id”，它似乎工作。见[http://jsfiddle.net/Sly7/EqyUa/](http://jsfiddle.net/Sly7/EqyUa/)

似乎如果您的路线中没有任何动态段，则无法将上下文传递给它。如果我能得到确认，那就太好了……

***更新***

在 github repo 上搜索，我发现了这个问题：[#1118](https://github.com/emberjs/ember.js/issues/1118)。`connectOutlets`在最后的评论中，Yehuda 解释了为什么在没有动态段的情况下将上下文传递给没有意义。

# javascript - 在运行时触发 jquery-ui.toggleSwitch.js 切换开关

> ID：12063068
> 
> 赞同：1
> 
> 时间：2012-08-21T21:08:08.480
> 
> 标签：javascript, jquery, slider

我找到了一个使用 Jquery UI 库的 ToggleSwitch 插件，但我似乎找不到在运行时初始化后切换开关的方法。

该插件可以在[这里找到](https://github.com/taitems/UX-Lab/blob/master/ToggleSwitch/js/jquery-ui.toggleSwitch.js)

使用 Jquery 滑块，可以简单地通过值选项强制滑块更改，即：

```
$("#slider").slider('values', 0,100); 
```

配置选项包括：

```
$(".selector").toggleSwitch({
  highlight: true, // default
  width: 25, // default
  change: function(e) {
  console.log("i changed my value")
 } // default: null
}); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T00:12:01.680

```
<select id="on-off" class="ui-toggle-switch">
   <option selected="selected">ON</option>
   <option>OFF</option>
</select> 
```

在其上创建切换开关：

```
$("#on-off").toggleSwitch(); 
```

要切换 - 在标签上调用“单击”选项“关闭”（索引 = 1）：

```
$("div.ui-toggle-switch").find("label").eq(1).click(); 
```

eq(1) 这里是期权价值指数(OFF)。对于 ON，它将是 eq(0)。这是超时以强制“关闭”代码：http: [//jsfiddle.net/5ZSuw/](http://jsfiddle.net/5ZSuw/)

# javascript - JavaScript - 仅验证数字并在范围内

> ID：12063070
> 
> 赞同：1
> 
> 时间：2012-08-21T21:08:16.387
> 
> 标签：javascript, forms, validation

我有一个包含多个字段的 asp 表单。在提交时，我想使用 javascript 检查已选择复选框并且在给定范围内的“金额”字段并且只有数字。我正在努力让它一次检查所有三个 - 在mometn我有以下内容：

```
<script type="text/javascript">
function validateForm()
{
var x=document.forms["myForm"]["Amount"].value;
if (x<5 || x >250)
  {
  alert("Please complete all required fields - Amount you wish to save");
  return false;
  }

else if ( myForm.agreesubmit.checked == false )
  {
  alert ( "You Must Agree To The Terms and Conditions" );
  return false;
  } 

}
</script> 
```

目前，这是对复选框选择和范围的两个单独检查。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:20:58.747

创建一个可以执行此操作的函数：

```
function validate(str, chk, min, max) {
  n = parseFloat(str);
  return (chk && !isNaN(n) && n >= min && n <= max);
} 
```

然后这样称呼它：

```
function validateForm()
{
  if(!validate(document.forms["myForm"]["Amount"].value, 
     document.forms["myForm"]["agreesubmit"].checked, 5, 250)) {
    alert("Please complete all required fields - Amount you wish to save");
    return false;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:14:45.067

尝试使用 isNan()。教程位于[http://www.w3schools.com/jsref/jsref_isnan.asp](http://www.w3schools.com/jsref/jsref_isnan.asp)

就像是：

```
if (isNaN(x) || x < 5 || x > 250))
{
    alert("Please complete all required fields - Amount you wish to save");
    return false;
} 
```

快速说明您可能对 or/and 感到困惑，因此请注意 x<5 || x >250 被包裹在 () 中，以便它可以与 and 数字条件配合使用。然后，最后整个 if 包装了语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:15:51.090

这将确保它首先只有数字，然后根据范围检查数字。

```
<script type="text/javascript">
function validateForm()
{
var x=document.forms["myForm"]["Amount"].value;
if( String(x).search(/^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/) != -1
&&( x<5 || x >250 ))
  {
  alert("Please complete all required fields - Amount you wish to save");
  return false;
  }

else if ( myForm.agreesubmit.checked == false )
  {
  alert ( "You Must Agree To The Terms and Conditions" );
  return false;
  } 

}
</script> 
```

通过[http://ntt.cc/2008/05/10/over-10-useful-javascript-regular-expression-functions-to-improve-your-web-applications-efficiency.html](http://ntt.cc/2008/05/10/over-10-useful-javascript-regular-expression-functions-to-improve-your-web-applications-efficiency.html)

# c++ - 有没有办法使用 GCC 的 __thread 完全模拟 thread_local？

> ID：12063073
> 
> 赞同：4
> 
> 时间：2012-08-21T21:08:45.033
> 
> 标签：c++, gcc, c++11, thread-local

C++11 标准包含一个新的添加 - thread_local 说明符 - 它使静态变量成为线程本地的。标准 thread_local 支持非平凡的类型 - 具有构造函数和析构函数的类型。不幸的是，GCC 通过`__thread`作为扩展提供的说明符仅支持普通类型。有没有办法`thread_local`在上面模拟`__thread`？的实现`__thread`非常快（相当于正则变量加两个间接），所以想避免热路径中的库函数。

我正在使用 GCC 和 Linux。不需要便携性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T21:42:32.813

不。

gcc 目前没有能力在线程创建/销毁时为 __thread 运行 ctor/dtor，所以除非你不需要运行 ctor/dtor（在这种情况下 __thread 正是你需要的，并且没有什么可以在它上面模拟是必需的），还没有像 thread_local 那样工作的东西。

但是，如果您可以忍受延迟初始化（例如`__thread T* ptr; if(!ptr){...}`），您可以`pthread_key_create`在哪里注册一个销毁函数，该函数将在线程销毁时运行，然后您可以在那里注册所有指针。

或者您可以使用`boost::thread_specific_ptr`which 或多或少地执行此操作（可能不使用 __thread TLS 作为底层实现细节）

# caching - 对可查询的数据集使用分布式缓存是否可行？

> ID：12063075
> 
> 赞同：3
> 
> 时间：2012-08-21T21:08:48.537
> 
> 标签：caching, autocomplete, appfabric, distributed-caching, appfabric-cache

我的情况如下。我有一个包含一百万行元组（比如*first name*和*last name*）的数据表，以及一个需要检索其名字或姓氏以查询字符串开头的一小部分行的客户端。缓存这似乎是一个 catch-22，因为：

*   一方面，我无法在每个请求上存储和检索整个数据集（会使网络不堪重负）
*   另一方面，我不能单独存储每一行​​，因为那样我就无法运行查询。
*   使用本地“索引”或目录在缓存中存储值范围是可行的……除此之外，您必须基本上复制每个索引的数据，这甚至违背了使用分布式缓存的目的。

对于这种事情，什么方法是可取的？是否有可能获得使用分布式缓存的好处，或者在这种情况下根本不可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:22:22.493

分布式缓存对于可查询的数据集是可行的。

但是对于这种情况，应该有可以提供更快结果的本机函数或过程。如果无法像会话或应用程序那样使用不同的范围，那么服务器端将需要大量迭代来获取每个请求的数据。

然后在数据库的服务器端建立索引从来都不是一个好主意。

如果还是有网络问题。您可以继续使用面向文档或面向列的 NoSQL DB。如果可行的话。

# iphone - 处理不断变化的信息数组的最佳方式

> ID：12063077
> 
> 赞同：2
> 
> 时间：2012-08-21T21:09:02.137
> 
> 标签：iphone, objective-c

这个问题是关于处理信息数组的，有很多方法可以做到这一点，但我希望有更多经验的程序员提供一些意见，我知道我想要做什么，只是不知道如何以最好的方式组织信息，并且客观-C 真的让我思考这个问题，我不想让 100 个小时的工作时间做出决定，哎呀，这浪费了这种野兽般的方式。所以这里是：

我有一个网格，我在其中模拟一个运动场，网格的每一块我称为一个单元格。每个单元格有大约 20 个不同的值，都是整数，没什么特别的。对单元格的更改将由玩家输入或通过不同算法发生或由周围单元格发生。

一旦转弯完成，单元格的变化就会发生，所以它不是实时的。现在，我什至不确定是否使用 MutableArrays、普通数组或仅使用普通矩阵来执行此操作。数组擅长为一维保留此类信息，但我想如果您必须处理一批 10,000 个这样的单元格，那会变得非常麻烦。另一方面，一个简单的矩阵可能不那么优雅，但可能更容易使用。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T01:52:04.647

我看到这里有两个选择：

1) 使用标准容器

假设比赛场地的大小是恒定的，那么您可以创建一个 x*y 大小的可变数组，并用可变字典填充它。通过在第二个可变字典键中提供所有内容，您可以查询和设置它们的属性（当然是所有对象，因此将整数包装在 NSNumbers 等中）。对于索引，使用宏 INDEX_FROM_ROW_COL(row, col) 并应用适当的代码进行乘法/加法。

2) 创建一个从 NSObject 子类化的辅助对象。它将像上面那样管理可变对象，但您可以使用特定于您的应用程序的功能加载它。您可以提供具有“row:”和“col:”参数的方法。根据某些标准更改或设置每个单元格属性的方法。就个人而言，我认为这是一个更好的主意，因为您可以在此处封装逻辑并使其接口更高级。它也将使记录发生的事情变得更容易。

# c# - 如何避免重复的接口代码？

> ID：12063080
> 
> 赞同：14
> 
> 时间：2012-08-21T21:09:12.517
> 
> 标签：c#, oop, refactoring

由于接口不能包含实现，在我看来这会导致从接口继承的类中的代码重复。在下面的示例中，假设设置从 Stream 读取的前 10 行左右是重复的。 **尽量不要关注这里的措辞，而是关注在每个类之间创建重复代码是多么容易的概念。**

例如：

```
public interface IDatabaseProcessor
{
   void ProcessData(Stream stream);
}
public class SqlServerProcessor : IDatabaseProcessor
{
    void ProcessData(Stream stream)
    {
      // setting up logic to read the stream is duplicated code
    }
}
public class DB2Processor : IDatabaseProcessor
{
    void ProcessData(Stream stream)
    {
      // setting up logic to read the stream is duplicated code
    }
} 
```

我意识到为 ProcessData 使用抽象基类并添加非抽象成员是一种解决方案。但是，如果我真的，真的想改用界面怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T21:12:07.647

这是您希望同时使用接口和抽象基类的情况。

您同时拥有两者的唯一原因是另一个类不会共享抽象基代码，但会尊重接口。考虑：

```
public interface IDatabaseProcessor {
   void ProcessData(Stream stream);
}

public abstract class AbstractDatabaseProcessor : IDatabaseProcessor {
    public void ProcessData(Stream stream) {
      // setting up logic to read the stream is not duplicated
    }
}

public class SqlServerProcessor : AbstractDatabaseProcessor {
    //SqlServerProcessor specific methods go here
}

public class DB2Processor : AbstractDatabaseProcessor {
    // DB2Processor specific methods go here
}

public class NonSharedDbProcessor : IDatabaseProcessor {
    void ProcessData(Stream stream) {
      // set up logic that is different than that of AbstractDatabaseProcessor
    }
} 
```

[语法可能有点不对劲，我不是普通的 C# 用户。我是通过 OOP 标签来到这里的。]

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T21:13:23.633

跨接口共享代码的最佳方式是通过无状态扩展方法。您可以一次构建这些扩展，并在所有实现接口的类中使用它，而不管它们的继承链如何。这就是 .NET`IEnumerable<T>`在 LINQ 中所做的，结果相当令人印象深刻。这种解决方案并不总是可行的，但您应该尽可能喜欢它。

共享逻辑的另一种方法是创建一个内部“助手”类。在您的情况下，这看起来是正确的选择：实现可以将内部共享代码调用为辅助方法，而无需复制任何代码。例如：

```
internal static class SqlProcessorHelper {
    public void StreamSetup(Stream toSetUp) {
        // Shared code to prepare the stream
    }
}
public class SqlServerProcessor : IDatabaseProcessor {
    void ProcessData(Stream stream) {
        SqlProcessorHelper.StreamSetup(stream);
    }
}
public class DB2Processor : IDatabaseProcessor {
    void ProcessData(Stream stream) {
        SqlProcessorHelper.StreamSetup(stream);
    }
} 
```

助手类不需要是静态的：如果您的共享方法需要状态，您可以使您的助手成为一个常规类，并在您希望共享代码的接口的每个实现中放置它的一个实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T21:12:56.853

正如您已经说过的，一种选择是使用基本抽象（甚至可能是非抽象）类。另一种选择是创建另一个实体来运行公共代码。在您的情况下，它可能是`DataProcessor`：

```
internal class DataProcessor
{
    public void Do(Stream stream) 
    {
        // common processing here
    }
}
public class SqlServerProcessor : IDatabaseProcessor
{
    void ProcessData(Stream stream)
    {
        new DataProcessor().Do(stream);
    }
}
public class DB2Processor : IDatabaseProcessor
{
    void ProcessData(Stream stream)
    {
        new DataProcessor().Do(stream);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:11:53.967

正如您所指出的，一个`abstract`类提供了解决方案。如果您“真的，真的想”，您可以使用界面；没有什么能阻止它。你的`abstract`班级应该实现`IDatabaseProcessor`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T21:12:23.747

如果您真的不想使用基类，同时仍然能够从共享代码访问`private`和/或`protected`成员，那么唯一可用的其他选项是[代码生成](http://msdn.microsoft.com/en-us/library/bb126445.aspx)。它是内置的 VS（已经存在了很长时间）并且非常强大。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T21:12:31.580

只需使用带有抽象基类的接口：

```
public interface IDatabaseProcessor
{
   void ProcessData(Stream stream);
}
public abstract class AbstractDatabaseProcessor : IDatabaseProcessor
{
    public virtual void ProcessData(Stream stream)
    {
      // setting up logic to read the stream is duplicated code
    }
}
public class SqlServerProcessor : AbstractDatabaseProcessor
{
    public void ProcessData(Stream stream)
    {
        base.ProcessData(stream);

        // Sql specific processing code
    }
}
public class DB2Processor : AbstractDatabaseProcessor
{
    public void ProcessData(Stream stream)
    {
        base.ProcessData(stream);

        // DB2 specific processing code
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T21:14:49.357

有一些层次结构的类来实现一个接口来共享接口的一些实现是很好的。

即在您的情况下，您可以将共享的 ProcessData 代码移动到类似的东西`ProcessorBase`并从中`DB2Processor`派生`SqlServerProcessor`。您可以决定哪个级别实现接口（即，无论出于何种原因，您只需`SqlServerProcessor`实现`IDatabaseProcessor`接口 - 它仍然会从基类中获取 ProcessData 作为接口的实现）。

# php - SQL查询中按日期范围过滤

> ID：12063088
> 
> 赞同：1
> 
> 时间：2012-08-21T21:09:54.673
> 
> 标签：php, sql

我无法使以下代码工作：

```
 // dd/mm/yyyy for dates in SQL queries
    $todayforw = date('d/m/Y');
    $aweekago  = date('d/m/Y', time() - 604800);

    $week_e_check = mysql_query("SELECT * FROM earningslog WHERE user_id = '".$info['id']."' WHERE day >='".$aweekago."' AND day <'".$todayforw."'");

    while ($week_e_info = mysql_fetch_array($week_e_check)) {
        $week_e = $week_e + $week_e_info['user_earnings_amnt'];
    } 
```

该查询返回零行，但是，它应该返回与条件匹配的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:21:29.540

您的问题似乎与您的查询语法有关。您在声明 WHERE 两次，而您应该只声​​明一次，然后使用 AND 或 OR 运算符作为进一步的标准。我还建议您将语句移动到变量中或用于`die()`协助调试。

```
 $week_e_check = mysql_query("SELECT * FROM earningslog WHERE user_id = '".$info['id']."' AND day >='".$aweekago."' AND day <'".$todayforw."'") or die(mysql_error()); 
```

此外，您不应该使用 mysql 扩展，因为不鼓励使用此扩展。相反，请使用[MySQLi](http://www.php.net/manual/en/mysqli.query.php)或[PDO_MySQL](http://www.php.net/manual/en/pdo.query.php)扩展。使用其中一个替代扩展将有助于作为防止 SQL 注入的第一步。我还建议您避免使用`*`并指定要返回的列名。

使用 PDO：

```
<?php

/* Execute a prepared statement by passing an array of values */
$sth = $dbh->prepare('SELECT * FROM earningslog WHERE user_id = ? AND day >= ? AND day < ?');
$sth->execute(array($info['id'], $aweekago, $todayforw));
$results = $sth->fetchAll();

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:12:39.933

尝试将字符串的格式从 d/m/Y 更改为 Ymd。

MySQL 可能会在第一年期待它。在这种情况下，它可能会用 d/m/Y 做错事。

也不要两次使用 WHERE 子句。相反，使用 AND 组合条件，例如：

```
WHERE      user_id = '".$info['id']."'
       AND day >='".$aweekago."'
       AND day <'".$todayforw."' 
```

顺便说一句，您也可以尝试说`WHERE day BETWEEN ".$aweekago." AND ".$todayforw."`，这可能更容易阅读语法（只要您将 $todayforw 更改为前一天）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:15:05.443

检查您的日期格式：

应该：

YYYY-mm-dd HH:mm:ss

EG 2012-01-01 00:00:00（当地时间 2012 年 1 月 1 日午夜）

其他日期格式可能有效，但最好的方法是使用 MySQL 在显示日期时使用的相同格式，这是我知道每次都有效的唯一方法。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

此外，您的语法不正确，您有两个 where，您应该使用 AND。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T21:17:26.593

仔细查看您的查询：

```
 SELECT * FROM earningslog WHERE user_id = '".$info['id']."' WHERE day >='".$aweekago."' AND day <'".$todayforw."'" 
```

您的 Where 子句出现两次。

有两件事需要考虑——当你选择数据时，尽量远离 select *——你可能会得到表被修改过的意外结果。

其次，尝试将查询创建为参数化查询，而不是将参数直接注入 where 子句。通过以您的方式直接注入您的标准，您将面临 SQL 注入攻击。

通过将其转换为参数化查询，您可以获得直接针对数据库调试查询的附带好处，从而减少将查询工具从查询工具复制到代码中所需的工作量。

# jquery - jQuery 如果 url 第二段有哈希做，否则什么都不做

> ID：12063091
> 
> 赞同：2
> 
> 时间：2012-08-21T21:10:02.077
> 
> 标签：jquery

所以基本上我只想在 url 看起来像这样的情况下运行代码：`www.example.com/#page`否则不要像`example: www.example.com/whatever/#page, www.example.com/whatever/whatever#page`etc 那样运行 jquery，

我的代码：

```
$(window).load(function(){
    if(window.location.hash == '#page'){alert('success');}
}); 
```

目前它会提醒每个包含#page 的 url。任何建议谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:14:53.413

尝试一下

```
$(window).load(function(){
if(document.location.toString().indexOf('/#page')!=-1){alert('success');}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:13:04.850

检查[window.location.pathname](https://developer.mozilla.org/en-US/docs/DOM/window.location)

```
if (window.location.pathname == "/sample/sample" && window.location.hash == "#page") 
```

或者对你有用的任何排列

如果您希望根据路径的深度来执行此操作，比如说，仅在路径名至少两深的页面上发出警报，那么您需要拆分路径名

```
window.location.pathname.split("/").length //this is the depth of the url 
```

所以结合这两个想法并适合你的例子，

```
var depth = window.location.pathname.split("/").length;
// pathname starts with a /, which adds one to the length of the array, so subtract
depth = depth -1;

// now run our checks
if (depth == 2 && window.location.hash == "#page") alert("success!");
else alert ("failure!"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:24:04.650

怎么样

```
$(window).load(function(){
    var test = location.protocol + '//' + location.host + '/#page';
    if(test == location){alert('success');}
}); 
```

# android - android OAuth-2.0 google login 使用 webview 获取用户信息

> ID：12063097
> 
> 赞同：4
> 
> 时间：2012-08-21T21:10:30.503
> 
> 标签：android, oauth-2.0, userinfo

我正在创建允许用户使用 facebook 或 google 帐户登录的应用程序。他们按下“登录”按钮，然后要求他们使用 facebook 或 google 登录，当他们选择其中之一时，会弹出 webview。

问题是google autentication，阅读了一些文章并搜索了网络，仍然可以在没有帐户管理器的情况下进行google登录，我知道他们改变了一些东西。

如果可能的话，也许是一些我可以研究或看到它工作的例子。我试过这个：[http](http://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/) ://blog.doityourselfandroid.com/2011/08/06/oauth-2-0-flow-android/ 只是编辑不做纬度但用户信息，总是得到错误400。

感谢您的帮助，到目前为止，你们都帮了很多忙！

编辑：关于错误：我收到了例外 400 错误请求，我通常知道哪一行以及什么问题。

问题出在我创建 AccessTonekResponse 并执行的位置，因为它需要客户端密码，而且我无法在 google api 页面上仅在 Web 应用程序中找到客户端密码，在已安装的应用程序中没有任何内容。

```
 public void onPageStarted(WebView view, String url,Bitmap bitmap)  {  
            System.out.println("onPageStarted : " + url);
        }
        @Override  
        public void onPageFinished(WebView view, String url)  {  

            if (url.startsWith(OAuth2ClientCredentials.REDIRECT_URI)) {
                try {

                    if (url.indexOf("code=")!=-1) {

                        String code = extractCodeFromUrl(url);
                        System.out.println(code);
                          AccessTokenResponse accessTokenResponse = new GoogleAuthorizationCodeGrant(new NetHttpTransport(),
                                          new JacksonFactory(),
                                          OAuth2ClientCredentials.CLIENT_ID,
                                          OAuth2ClientCredentials.CLIENT_SECRET,
                                          code,
                                          OAuth2ClientCredentials.REDIRECT_URI).execute();

                          CredentialStore credentialStore = new SharedPreferencesCredentialStore(prefs);
                          credentialStore.write(accessTokenResponse);
                          view.setVisibility(View.INVISIBLE);
                          startActivity(new Intent(OAuthAccessTokenActivity.this,LatitudeApiSample.class));
                    } else if (url.indexOf("error=")!=-1) {
                        view.setVisibility(View.INVISIBLE);
                        new SharedPreferencesCredentialStore(prefs).clearCredentials();
                        startActivity(new Intent(OAuthAccessTokenActivity.this,LatitudeApiSample.class));
                    }

                } catch (IOException e) {
                    e.printStackTrace();
                    System.out.println(e.getLocalizedMessage());
                }

            }
            System.out.println("onPageFinished : " + url);

        } 
```

错误代码：

```
08-22 09:22:07.866: W/System.err(391): com.google.api.client.http.HttpResponseException: 400 Bad Request
08-22 09:22:07.866: W/System.err(391):  at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:380)
08-22 09:22:07.876: W/System.err(391):  at com.google.api.client.auth.oauth2.draft10.AccessTokenRequest.executeUnparsed(AccessTokenRequest.java:457)
08-22 09:22:07.876: W/System.err(391):  at com.google.api.client.auth.oauth2.draft10.AccessTokenRequest.execute(AccessTokenRequest.java:473)
08-22 09:22:07.876: W/System.err(391):  at com.ecs.android.sample.oauth2.OAuthAccessTokenActivity$1.onPageFinished(OAuthAccessTokenActivity.java:79)
08-22 09:22:07.876: W/System.err(391):  at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:274)
08-22 09:22:07.896: W/System.err(391):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 09:22:07.896: W/System.err(391):  at android.os.Looper.loop(Looper.java:123)
08-22 09:22:07.896: W/System.err(391):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-22 09:22:07.896: W/System.err(391):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 09:22:07.896: W/System.err(391):  at java.lang.reflect.Method.invoke(Method.java:521)
08-22 09:22:07.896: W/System.err(391):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-22 09:22:07.896: W/System.err(391):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-22 09:22:07.896: W/System.err(391):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:04:00.233

您可能在[Google 的 API 控制台中将您的](https://code.google.com/apis/console/)*客户端 ID*创建为具有应用程序类型***Android****的已安装应用程序*。这仅适用于. 如果您想自己实现流程，请使用***其他****应用程序类型*，您将获得所需的*客户端密码*。**`AuthenticationManager`**

# python - 为什么我不能在 Cygwin 上使用 webbrowser.open("www.python.org") 打开 webbrowser？

> ID：12063104
> 
> 赞同：0
> 
> 时间：2012-08-21T21:11:23.557
> 
> 标签：python, windows, browser, cygwin

```
>>> webbrowser.open("www.python.org")
False 
```

有没有其他方法可以在 Cygwin 中获得该功能的相同功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T01:50:21.273

```
export BROWSER=cygstart 
```

在开始 Python 之前。然后它应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:22:23.227

可以通过 Cygwin 启动 Web 浏览器

```
cygstart "http://www.google.com" 
```

其中*google.com*是您想要的 URL。

*cygstart*为路径启动默认的 windows 程序，因此您可以通过这种方式获得用户首选的 Web 浏览器。

因此，在 Cygwin 下的 Python 中，您可能只是：

```
from subprocess import call
call(["cygstart", "http://www.google.com"]) 
```

或者[从这里尝试另一个选项来运行 Python-external 命令](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python)。

如果它不仅仅是您为自己使用而编写的一次性脚本，您应该在 Cygwin 和其他平台[`platform.system`](http://docs.python.org/library/platform.html#platform.system)上使用上述内容。`webbrowser.open`

# gitolite - 使用 gitolite 在 admin-repo 中包含我自己的脚本

> ID：12063107
> 
> 赞同：1
> 
> 时间：2012-08-21T21:11:47.503
> 
> 标签：gitolite

我有一些脚本是从 gitolite 的通用钩子中调用的，我想从 admin-repo 存储库的配置目录中管理它们，以便我可以更轻松地修改它们并且它们也将被版本化。

我尝试过添加一个新目录并使用 跟踪它`git add`，但它没有按预期工作。也许 gitolite 有一些方法可以做到这一点，但我还没有找到任何关于如何做这件事的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:37:47.427

注意：以下仅适用于[Gitolite V3 或 g3](http://sitaramc.github.com/gitolite/g3why.html)。

您可以在它们自己的目录中添加/管理它们，即如果 gitolite-admin 则为[“ `hooks/common`”](http://sitaramc.github.com/gitolite/cust.html#hooks)子目录（如果不存在则创建它）。

该目录将出现在您的 Gitolite 服务器中的 ~/.gitolite/hooks/common 中，如果您定义了一个[`LOCAL_CODE`rc 变量](http://sitaramc.github.com/gitolite/cust.html#localcode)) 指向它，它将被考虑在内。
不过，您可能需要在服务器上关注`gitolite-admin`repo的推送**`gitolite setup --hooks-only`**。

# android - ActionBarSherlock 动作栏定制 ?

> ID：12063117
> 
> 赞同：0
> 
> 时间：2012-08-21T21:12:20.940
> 
> 标签：android, actionbarsherlock

我想从操作栏中删除后退图标和应用程序图标。我正在使用 ActionBarSherlock。我见过许多不显示应用程序图标或后退按钮的应用程序？这是最好的实现吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:36:01.400

我认为“后退”按钮是指用于向上导航应用程序结构层次结构的向上按钮。无论如何，如果您不想将应用程序图标保留在顶部，希望这段代码可以解决您的问题。

```
ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayUseLogoEnabled(false);   
actionBar.setDisplayShowHomeEnabled(false);
actionBar.setDisplayShowTitleEnabled(true);  // if you want to show title on Actionbar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:19:58.407

操作栏没有后退按钮，因为所有 android 设备都应该以某种方式包含后退按钮。

您可能的意思是[向上按钮](http://developer.android.com/guide/topics/ui/actionbar.html#Home)，它应该转到应用程序的“主页”。

你不必使用它。这只是一件好事。用于`setDisplayHomeAsUpEnabled`显示和隐藏它。

# api - 如何生成 App.net api 密钥

> ID：12063121
> 
> 赞同：2
> 
> 时间：2012-08-21T21:12:29.240
> 
> 标签：api, api-key

我一直在寻找许多[App.net 项目](https://github.com/appdotnet/api-spec/wiki/Directory-of-third-party-devs-and-apps)的源头，并希望与其中一些项目进行分叉/玩，但我似乎无法找到从哪里获取 API 密钥。有人有关于如何生成的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:41:54.437

没关系，在[这里的官方文档中找到它](https://github.com/appdotnet/api-spec/blob/master/auth.md)

# c# - 为什么不同方式传递代表的表现会有如此大的差异？

> ID：12063123
> 
> 赞同：10
> 
> 时间：2012-08-21T21:12:36.557
> 
> 标签：c#, .net, performance, delegates

我试图比较在 C# 中将委托传递给函数的三种不同方式——通过 lambda、通过委托和通过直接引用。真正让我惊讶的是直接参考方法（即`ComputeStringFunctionViaFunc(object[i].ToString))`比其他方法慢六倍。有谁知道这是为什么？

完整代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.CompilerServices;

namespace FunctionInvocationTest
{
    class Program
    {
        static void Main(string[] args)
        {
            object[] objectArray = new object[10000000];
            for (int i = 0; i < objectArray.Length; ++i) { objectArray[i] = new object(); }

            ComputeStringFunction(objectArray[0]);
            ComputeStringFunctionViaFunc(objectArray[0].ToString);
            ComputeStringFunctionViaFunc(delegate() { return objectArray[0].ToString(); });
            ComputeStringFunctionViaFunc(() => objectArray[0].ToString());

            System.Diagnostics.Stopwatch s = new System.Diagnostics.Stopwatch();
            s.Start();
            for (int i = 0; i < objectArray.Length; ++i)
            {
                ComputeStringFunction(objectArray[i]);
            }
            s.Stop();
            Console.WriteLine(s.Elapsed.TotalMilliseconds);

            s.Reset();
            s.Start();
            for (int i = 0; i < objectArray.Length; ++i)
            {
                ComputeStringFunctionViaFunc(delegate() { return objectArray[i].ToString(); });
            }
            s.Stop();
            Console.WriteLine(s.Elapsed.TotalMilliseconds);

            s.Reset();
            s.Start();
            for (int i = 0; i < objectArray.Length; ++i)
            {
                ComputeStringFunctionViaFunc(objectArray[i].ToString);
            }
            s.Stop();
            Console.WriteLine(s.Elapsed.TotalMilliseconds);

            s.Reset();
            s.Start();
            for (int i = 0; i < objectArray.Length; ++i)
            {
                ComputeStringFunctionViaFunc(() => objectArray[i].ToString());
            }
            s.Stop();
            Console.WriteLine(s.Elapsed.TotalMilliseconds);

            Console.ReadLine();
        }

        [MethodImpl(MethodImplOptions.NoInlining)]
        public static void ComputeStringFunction(object stringFunction)
        {
        }

        public static void ComputeStringFunctionViaFunc(Func<string> stringFunction)
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T21:38:36.147

在修复您的代码以实际调用`ToString()`/`stringFunction()`并使用 Mono 2.10.9 进行测量后：

`ComputeStringFunctionViaFunc(objectArray[i].ToString);``object.ToString`因为是虚拟的，所以很慢。检查每个对象以防它被覆盖`ToString`并且`ToString`应该调用被覆盖的对象。创建您的其他委托以引用非虚拟函数（快速），该函数直接调用虚拟函数（也快速）。在修改生成的 IL 以更改时可以看出这是原因的事实

```
ldelem.ref
dup 
ldvirtftn instance string object::ToString() 
```

至

```
ldelem.ref
ldftn instance string object::ToString() 
```

它总是指的是`object.ToString`，而不是压倒一切的函数。这三种方法都需要大约相同的时间。

更新：另一种方法，直接绑定`objectArray[i]`但仍然`ToString`虚拟调用：

```
for (int i = 0; i < objectArray.Length; ++i)
{
    ComputeStringFunctionViaFunc(objectArray[i].ToStringHelper);
}

static class Extensions
{
    public static string ToStringHelper(this object obj)
    {
        return obj.ToString();
    }
} 
```

也给出了与其他非虚拟代表大致相同的时间安排。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T21:42:32.780

让我们检查一下您在每种情况下都在做什么：

这家伙根本没有“创造”一个功能。它在数组中查找一个项目（在这种情况下是一个对象），并将该项目作为参数传递给一个函数：

```
// The cost of doing the array lookup happens right here, before 
// ComputeStringFunction is called
ComputeStringFunction(objectArray[i]); 
```

这个创建了一个无参数委托并将其传递给一个函数。委托本身永远不会被调用：

```
// Because ComputeStringFunctionViaFunc doesn't do anything, the
// statement objectArray[i] is never evaluated, so the only cost 
// is that of creating a delegate
ComputeStringFunctionViaFunc(delegate() { return objectArray[i].ToString(); }); 
```

~~这个和第一个一样，只是它不是在从数组中检索项目后立即传递它，而是调用`.ToString()`它。同样，这里没有创建函数：~~

像第一个一样，这个有预先查找数组的成本，但随后创建了一个引用该项目的 .ToString 方法的委托（感谢@hvd 捕捉到它）。像其他人一样， .ToString 永远不会被评估。成本是（再次感谢@hvd）查找虚拟方法的成本。

```
// The cost of doing the array lookup happens right here
ComputeStringFunctionViaFunc(objectArray[i].ToString); 
```

最后，这个使用 lambda 和对数组项的闭包创建一个函数，并将该 lambda 传递给一个函数。根据函数签名，可以编译或不编译 lambda：

```
// Again, we create a delegate but don't call it, so the array
// lookup and .ToString are never evaluated.
ComputeStringFunctionViaFunc(() => objectArray[i].ToString()); 
```

这里要注意的重要一点是，数组查找的评估在第二和第四次延迟，而在第一和第三次没有延迟。

这些测试*有点*荒谬，因为它们都做完全不同的事情。几乎可以肯定有更好的方法来定时委托创建。

# transactions - 在 Redis 中，当 MULTI 没有关联的 EXEC 或 DISCARD 时会发生什么？

> ID：12063136
> 
> 赞同：1
> 
> 时间：2012-08-21T21:13:23.463
> 
> 标签：transactions, redis

我有一系列在 Redis 集之间移动元素的脚本。有时这些操作需要是原子的。有时一个脚本会失败，但其他脚本会继续工作。

我很好奇如果在一个脚本中我运行 MULTI 并启动但随后脚本以某种方式失败并且我从不调用 EXEC 或 DISCARD 会发生什么 - 我知道我的数据完整性很好，因为事务永远不会发生，但是因为命令是在某处排队并且从未执行过我担心如果这种情况经常发生（它不应该，但谁知道？）我需要清理队列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T04:29:31.927

取决于“脚本失败”的确切含义

如果与 redis 服务器的连接丢失，则查询缓冲区将被释放。

如果与 redis 服务器的连接仍然处于活动状态，并且您的代码的其他部分根本不使用它，那么查询缓冲区将继续占用服务器上的内存。默认情况下，空闲客户端连接不会终止。如果你`timeout`在你的 redis.conf 中指定了 a，查询缓冲区最终会被回收。

如果与 redis 服务器的连接仍然处于活动状态，并且脚本中的另一个模块/功能/块重用该连接，事情会变得更有趣。他们执行的任何命令都将在服务器上排队，因为它们是前一个多块的一部分。如果此模块启动另一个 multi，redis 服务器将响应“（错误）ERR MULTI 调用不能嵌套”，但查询缓冲区不会被清除。您的应用程序的行为方式很大程度上取决于您使用的 redis 驱动程序。

# wpf - Metro UI - UniformToFill 的图像有 1px 的间隙（或半透明像素列）

> ID：12063138
> 
> 赞同：1
> 
> 时间：2012-08-21T21:13:40.667
> 
> 标签：wpf, xaml, winrt-xaml

我在设置了背景颜色的 Grid 单元格中有一个 Image 元素。Image 元素的 Stretch="UniformToFill" 和 Horizo​​ntalAlignment/VerticalAlignment 设置为“Center”。在此配置中，在某些情况下（这是一个平铺的 DataTemplate），网格背景的 1px 显示在图像的左侧。

我在根元素（和其他地方）上尝试过 UseLayoutRounding 无济于事。仅从检查中很难判断这是否与亚像素定位/尺寸有关，所以我不能确定这是否是原因。

虽然我当然会喜欢一个神奇的解决方案，但我欢迎任何关于问题原因的推测性理论，无论解决方案如何，只要为进一步研究/摆弄提供基础。

提前致谢，

詹姆士

# django - Django缓存用户的个人资料

> ID：12063139
> 
> 赞同：4
> 
> 时间：2012-08-21T21:13:49.270
> 
> 标签：django, caching, properties, redis, profile

我正在尝试缓存对 Django 配置文件对象的访问。我正在使用 django-redis-cache 来缓存这个项目中的数据。如果不存在，我正在使用一个片段来自动创建一个配置文件。这是我正在做的事情的简化版本（没有缓存）：

```
User.profile = property(lambda u: UserProfile.objects.get_or_create(user=u)[0]) 
```

每当需要配置文件信息时，都会访问 user.profile 属性。这可以按预期工作，但是，当我尝试缓存配置文件属性时，例如在图表 1 中，我仍然看到 SQL 查询（在 django-debug-toolbar 中）正在选择配置文件并且没有利用缓存。

具体来说，图表 2 中的 cache_object_list() 函数是一段代码，用于检查缓存值是否可用。如果是，则调用缓存键。如果没有，它会运行传递给它的查询（通过“查询”参数）并缓存结果。

cache_object_list() 打印“Hit”或“Miss”，表示缓存命中或未命中。刷新两次后，所有内容都被报告为命中（如预期的那样）。但是，django-debug-toolbar 仍然显示查询计数没有减少，并显示选择配置文件的查询。

有人对如何确保 user.profile 在可用时提取配置文件的缓存版本有任何建议吗？谢谢阅读。

**图表 1：myproject/myapp/models.py**

```
def get_or_create_profile(u):
    return cache_utils.cache_single_object(
        "user_get_or_create_profile",
        u.id, UserProfile.objects.get_or_create(user=u)[0]) 

User.profile = property(lambda u: cache_utils.cache_single_object(
                    "user_get_or_create_profile", u.id,  
                     get_or_create_profile(u))) 
```

**图表 2：myproject/cache_utils.py**

```
def cache_single_object(key_prefix, id, query, timeout=500):
    key = '%s_%s' % (key_prefix, id)
    object_list = cache.get(key, None)
    if object_list is None:
        print "Miss %s" % (key)
        object_list = query
        cache.set(key, object_list, timeout)
    else:
        print "Hit  %s" % (key)
    return object_list 
```

**图表 3：myproject/templates/mytemplate.py**

```
<div>Example of what's in the template </div>
{{ myobject.owner.profile.bio }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:03:16.760

我认为问题与您定义方法的方式有关....

```
User.profile = property(lambda u: cache_utils.cache_single_object(
                "user_get_or_create_profile", u.id,  
                 get_or_create_profile(u))) 
```

当您访问配置文件属性时，您将**始终**调用 get_or_create_profile(u) 方法，该方法调用：

```
return cache_utils.cache_single_object(
    "user_get_or_create_profile",
    u.id, UserProfile.objects.get_or_create(user=u)[0]) 
```

拥有 UserProfile.objects.get_or_create(user=u) 即使您已经在缓存中拥有数据，每次都会创建您的查询。我认为您应该尝试使用一种 util 方法，在这种方法中，您每次调用时都不会评估查询。也许是这样的：[https ://stackoverflow.com/a/2216326/234304](https://stackoverflow.com/a/2216326/234304)

# java - 我如何获得模型的所有公共方法？

> ID：12063141
> 
> 赞同：0
> 
> 时间：2012-08-21T21:13:51.337
> 
> 标签：java, gwt

我需要在我的代码中获取模型的所有gets()。

前任：

模型.java

```
private int var1;
private int var2;
private int var3;

public getVar1()...
public getVar2()...
public getVar3()... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:23:20.537

像这样的东西，也许？

```
MyClass myClass = new MyClass();
Class objClass = myClass.getClass();
Set<Method> getMethods = new HashSet<Method>();

for (Method method : objClass.getMethods()) {
    if(method.getName().contains("getVar")) {
        getMethods.add(method);
    }
} 
```

编辑：

**以上是错误的！**我没有看到 GWT 标签。显然，有一个很好的 GWT 反射 API，你也许可以使用我的代码：

[http://gwtreflection.sourceforge.net/](http://gwtreflection.sourceforge.net/)

# c# - 通过 Stream.Read 下载文件时出现 ArgumentOutOfRangeException

> ID：12063142
> 
> 赞同：5
> 
> 时间：2012-08-21T21:13:56.587
> 
> 标签：c#, silverlight, webclient

在 Silverlight 上下载非常大的文件 (>2GB) 时，我一直在努力解决一个问题。我的应用程序是一个以提升的权限运行*的浏览器外下载管理器。*

当文件达到一定的数据量（2GB）时，它会抛出以下异常：

```
System.ArgumentOutOfRangeException was caught
  Message=Specified argument was out of the range of valid values.
Parameter name: count
  StackTrace:
   in MS.Internal.InternalNetworkStream.BeginRead(Byte[] buffer, Int32 offset, Int32 count, AsyncCallback callback, Object state)
   in MS.Internal.InternalNetworkStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   in MySolution.DM.Download.BeginResponseCallback(IAsyncResult ar)
  InnerException: 
Null 
```

我唯一的线索是[这个站点](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/fx/src/Net/System/Net/Sockets/NetworkStream@cs/1305376/NetworkStream@cs)，它显示了`BeginCode`实现。此异常仅在`count`is < then 0 时发生。

**我的代码**

```
/* "Target" is a File object. "source" is a Stream object */

var buffer = new byte[64 * 1024];
int bytesRead;
Target.Seek(0, SeekOrigin.End); // The file might exists when resuming a download

/* The exception throws from inside "source.Read" */
while ((bytesRead = source.Read(buffer, 0, buffer.Length)) > 0)
{
    Target.Write(buffer, 0, bytesRead);
    _fileBytes = Target.Length;
    Deployment.Current.Dispatcher.BeginInvoke(() => { DownloadPercentual = Double.Parse(Math.Round((decimal)(_fileBytes / (_totalSize / 100)), 5).ToString()); });
}

Target.Close();
logFile.Close(); 
```

该错误发生在不同类型的文件中，它们来自 Amazon S3 上的公共存储桶。（使用常规的 http 请求）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:15:21.733

我搜索了一下，看起来这是 Silverlight 中的一个已知限制。一种可能的解决方法是使用 Range 标头在多个部分中执行下载，每个部分小于 2GB。

# asp.net - 网页根据 URL 显示不同

> ID：12063144
> 
> 赞同：0
> 
> 时间：2012-08-21T21:14:11.777
> 
> 标签：asp.net, url

如果我使用 URL ABC.XYZ.COM/mypage.aspx 在我的 ASP.NET 站点上访问某个页面，比如 MyPage.aspx，它通常会在选项卡（Ajax 控件工具包）中显示一个网格。如果我使用 URL ABC/mypage.aspx 访问同一页面（因为我们的网络设置为添加 .XYZ.COM），则选项卡中的网格显示完全不同。除了两台服务器之间的负载平衡外，不会发生服务器端重定向。我已验证将相同的确切代码部署到环境中的两台服务器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:21:07.233

如果您使用的是 IE，请检查安全区域。仅包含服务器名称的 URL 可能位于“本地 Intranet”安全区域中，但完全限定域名可能位于“Internet 区域”中。不同的安全区域有不同的设置。

有一个选项可以强制使用兼容模式显示所有“本地 Intranet”站点。这在过去给我带来了问题。

# objective-c - 检测 Gamekit 何时接收数据

> ID：12063149
> 
> 赞同：0
> 
> 时间：2012-08-21T21:14:41.230
> 
> 标签：objective-c, ios, cocoa-touch, sms, gamekit

我正在构建一个聊天应用程序，现在正在使用气泡界面。我有绘制气泡的代码，一切都准备好了，除了一件事。我需要检测是否已收到消息或是否已发送消息。我有以下代码，除了我不知道用什么来代替收到的消息。

```
if(MESSAGE WAS RECEIEVED)
{
    balloonView.frame = CGRectMake(0.0, 2.0, size.width + 28, size.height + 15);
    balloon = [[UIImage imageNamed:@"grey.png"] stretchableImageWithLeftCapWidth:24 topCapHeight:15];
    label.frame = CGRectMake(16, 8, size.width + 5, size.height);
}
else
{

    balloonView.frame = CGRectMake(320.0f - (size.width + 28.0f), 2.0f, size.width + 28.0f, size.height + 15.0f);
    balloon = [[UIImage imageNamed:@"pink.png"] stretchableImageWithLeftCapWidth:24 topCapHeight:15];
    label.frame = CGRectMake(307.0f - (size.width + 5.0f), 8.0f, size.width + 5.0f, size.height);
} 
```

这是在方法里面

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

谢谢，广告

# java - 将布尔值作为路径变量发送到控制器

> ID：12063158
> 
> 赞同：8
> 
> 时间：2012-08-21T21:15:14.777
> 
> 标签：java, spring, spring-mvc

将布尔值作为路径变量发送到 url 中的控制器是否有可能并且是一种好的做法？我正在使用spring 3.1并试图将一个布尔值从Jsp发送到控制器作为@Pathvariable（“yesorNo”）布尔值yesOrNo。但是由于请求在语法上不正确，因此不断出错。有什么见解吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T21:22:31.907

是的，你可以，它看起来像

```
@RequestMapping(value="value/{someVal}")
public void handleBooleanParameter(@PathVariable("someVal")boolean someVal){
   //do something
} 
```

然后，您可以使用

```
http://<base url>/value/true 
```

或者

```
http://<base url>/value/false 
```

# c# - 正则表达式替换.NET中由百分比包裹的字符串

> ID：12063159
> 
> 赞同：1
> 
> 时间：2012-08-21T21:15:14.990
> 
> 标签：c#, .net, regex

> **可能重复：**
> [基于用户的字符串模板](https://stackoverflow.com/questions/11995034/user-based-string-template)

我有一个格式的字符串`Your invoice ref %name% is overdue by %age% days`，我想用运行时来自对象的数据替换“%”字符之间的封装。

我有下面的代码，但到目前为止我只能使用括号（我无法锻炼正确的百分比正则表达式），我怎样才能使它适用于 %shortcode% 呢？

其次，我还必须左右修剪。是否可以简单地返回没有百分比的字符串？

```
public void GenerateReminderContent(string text, Invoice invoice)
{
    var result = Regex.Replace(text, @"\([^\]]*)\]", delegate(Match match)
    {
        var shortcode = match.Value.ToLower();
        shortcode = shortcode.TrimEnd(']');
        shortcode = shortcode.TrimStart('[');

        if (shortcode == "name")
            return invoice.Name;
        else if (shortcode == "age")
            return invoice.Age;
        else
            return "unknown-shortcode";
     });
} 
```

# java - Google Drive InputStreamContent 需要设置长度

> ID：12063164
> 
> 赞同：3
> 
> 时间：2012-08-21T21:15:56.033
> 
> 标签：java, google-drive-api

将文件上传到 Google Drive 的示例通常使用 FileContent 类，这很容易理解并且可以按预期工作。

在我目前的情况下，我只暴露了一个 InputStream，因为输入可能不一定来自文件。我尝试使用 InputStreamContent 类，但是如果未设置长度，则会引发 IllegalArgumentException：

```
Exception in thread "main" java.lang.IllegalArgumentException
at com.google.common.base.Preconditions.checkArgument(Preconditions.java:72)
at com.google.api.client.googleapis.media.MediaHttpUploader.getMediaContentLength(MediaHttpUploader.java:315)
at com.google.api.client.googleapis.media.MediaHttpUploader.executeUploadInitiation(MediaHttpUploader.java:333)
at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:252)
at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:309)
at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331) 
```

虽然我可以将 InputStream 复制到一个字节数组中，然后从中获取大小，但这似乎不是最有效的方法。这是预期的实现吗？javadoc 没有指出需要设置该值，这似乎具有误导性：

```
/**
 * Sets the content length or less than zero if not known.
 *
 * <p>
 * Defaults to {@code -1}.
 * </p>
 *
 * @since 1.5
 */
public InputStreamContent setLength(long length) {
    this.length = length;
    return this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:11:08.133

这是一个已知问题，详细信息在这里： [http ://code.google.com/p/google-api-java-client/issues/detail?id=591](http://code.google.com/p/google-api-java-client/issues/detail?id=591)

我们将在 1.12 google-api-java-client 版本中修复此问题。

# android - android opengl ndk - 未实现的OpenGL ES API错误

> ID：12063165
> 
> 赞同：0
> 
> 时间：2012-08-21T21:15:59.347
> 
> 标签：android, opengl-es, android-ndk, 2d

我正在使用 NDK 为 android 编写一个纯 c++ 应用程序。我正在尝试编写一个使用 OpenGL 进行 2D 绘图的简单应用程序，因此没有纹理或类似的东西。

我应用了此处发布的所有建议，但仍然得到

***调用未实现的 OpenGL ES API***

logcat 中的消息

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- BEGIN_INCLUDE(manifest) -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.native_activity"
        android:versionCode="1"
        android:versionName="1.0">

    <uses-feature android:glEsVersion="0x00020000"></uses-feature>
    <!-- This is the platform API where NativeActivity was introduced. -->
    <uses-sdk android:minSdkVersion="9" />
    <!-- This .apk has no Java code itself, so set hasCode to false. -->
    <application android:label="@string/app_name" android:hasCode="false">
        <!-- Our activity is the built-in NativeActivity framework class.
             This will take care of integrating with our NDK code. -->
        <activity android:name="android.app.NativeActivity"
                android:label="@string/app_name"
                android:configChanges="orientation|keyboardHidden">
            <!-- Tell NativeActivity the name of or .so -->
            <meta-data android:name="android.app.lib_name"
                    android:value="native-activity" />
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

这是代码：

```
EGLDisplay dpy;
EGLSurface surface;
EGLContext context;

static void android_handle_cmd( struct android_app * app, int32_t cmd ) {

    switch (cmd) {

        case APP_CMD_INIT_WINDOW:

            // The window is being shown, get it ready.
            if ( NULL != app->window ) {

                Init( app );
                drawscreen();

            }
            break;

    }

}

void pixel( int x, int y ) {

    if ( NULL == GLapp.surface ) {

        return;

    }    

    glColor4f( 1.0, 1.0, 1.0, 0 );
    glVertexAttrib2f( 0, x + 0.5, y + 0.5 );

}

void drawscreen( void ) {

    if ( NULL == GLapp.surface ) {

        return;

    }

    eglSwapBuffers( GLapp.dpy, GLapp.surface );

}

int Init( struct android_app * app ) {

    dpy = eglGetDisplay( EGL_DEFAULT_DISPLAY );

    eglInitialize( dpy, 0, 0 );

    const EGLint attribs[] = {

        EGL_SURFACE_TYPE,    EGL_WINDOW_BIT,

        EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT, // <--- OpenGL ES 2.0

        EGL_BLUE_SIZE,       8,
        EGL_GREEN_SIZE,      8,
        EGL_RED_SIZE,        8,

        EGL_NONE

    };

    EGLConfig config;
    EGLint numConfigs;

    eglChooseConfig( dpy, attribs, &config, 1, &numConfigs );

    EGLint format;

    eglGetConfigAttrib( dpy, config, EGL_NATIVE_VISUAL_ID, &format );

    ANativeWindow_setBuffersGeometry( app->window, 0, 0, format );

    surface = eglCreateWindowSurface( dpy, config, app->window, NULL );

    const EGLint ContextAttribList[] = {

        EGL_CONTEXT_CLIENT_VERSION, 2,
        EGL_NONE

    };

    context = eglCreateContext( GLapp.dpy, config, EGL_NO_CONTEXT, ContextAttribList );

    eglMakeCurrent( dpy, surface, surface, context );

    int XSize;
    eglQuerySurface( GLapp.dpy, GLapp.surface, EGL_WIDTH, &XSize );

    int YSize;
    eglQuerySurface( GLapp.dpy, GLapp.surface, EGL_HEIGHT, &YSize );

    glMatrixMode( GL_PROJECTION );

    glLoadIdentity();

    glOrthof( 0, XSize, YSize, 0, 0, 1 );

    glMatrixMode( GL_MODELVIEW );

    /* Displacement trick for exact pixelization */
    glTranslatef( 0.375, 0.375, 0 );

    glDisable( GL_DEPTH_TEST );

    glClear( GL_COLOR_BUFFER_BIT );

    return 0;

} 
```

我删除了所有错误检查代码以使代码更易于阅读。Init 函数执行时未检测到任何错误，只有当我调用像素或绘图屏幕（不确定是哪个）函数时，日志才会填满“未实现的 OpenGL ES API”错误

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:48:45.827

您要的是 gles 2，但您使用的是 glMatrixMode 之类的东西，它们不是 gles2 api——不包括 gl.h，而是使用 gles2.h——里面有你想要的 api。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:54:52.830

您的应用程序缺少包含内容，我们甚至不知道构建阶段可能出现的错误。

我的建议是查看 NDK 文件夹中的几个示例并从中学习。

考虑使用 OpenGL ES 代码的本机活动，您至少应该包括：

```
#include <jni.h>
#include <errno.h>

#include <EGL/egl.h>
#include <GLES/gl.h>

#include <android/log.h>
#include <android_native_app_glue.h> 
```

但这只是给你一个想法，你可能想要更多。

# spotify - libspotify：重新登录是否适用于普通高级帐户？

> ID：12063169
> 
> 赞同：1
> 
> 时间：2012-08-21T21:16:32.907
> 
> 标签：spotify

根据 API 文档，**sp_session_relogin**可用于登录记住的用户（如果最后一个用户使用 remember_me 集登录）。**如果我的程序在sp_session_login**中将“remember_me”设置为 1 时登录一次，用户凭证会存储在某处吗？我可以在注销程序后使用**sp_session_relogin重新登录吗？**或者在什么情况下可以使用**sp_session_relogin"？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T08:17:19.223

你对如何`relogin`工作是正确的。但是，只有在您正确注销并在终止应用程序之前等待注销完成回调时，才能成功存储凭据以供下次使用。

# css - 谷歌图表 - 打印表格 - CSS 打印

> ID：12063177
> 
> 赞同：2
> 
> 时间：2012-08-21T21:17:36.180
> 
> 标签：css, printing, google-visualization

我在打印谷歌图表 - 表格时遇到了一些问题。它们不适合页面。有没有人成功地让这些正确打印？我有一个 print.css 文件设置，我可以对其进行修改以适应。

理想情况下，风景的正确宽度会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:31:19.660

1.  **ISO A4尺寸的尺寸是：**

    *   纵向：210 毫米 x 297 毫米（宽 x 高）- PostScript 点数：595x842

    *   横向：297 毫米 x 210 毫米（高 x 宽）- PostScript 点数：842x595

2.  **Letter 尺寸的尺寸为：**

    *   纵向：216 毫米 x 279 毫米（宽 x 高）- PostScript 点数：612x792

    *   横向：279 毫米 x 216 毫米（高 x 宽）- PostScript 点数：792x612

# javascript - 如何从回调函数中设置值？

> ID：12063183
> 
> 赞同：2
> 
> 时间：2012-08-21T21:17:53.707
> 
> 标签：javascript

我正在使用一些现有的 javascript，并且我有以下代码：

```
launchDialog(myUrl,function(result, returnValue){
   //whatever
}); 
```

此代码启动一个模态窗口，当该窗口关闭时，回调函数会触发。

我想知道的是，我是否可以**从模态**中执行一些 javascript，以允许我设置`returnValue`回调函数的参数？

供参考：

不确定它是否重要，但这是一些现有 SharePoint javascript 的简化版本。我无法更改函数的`lauchDialog`功能，但我可以将 javascript 添加到模式和回调函数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:24:50.443

```
function tryMe (param1, param2) {
    alert(param1 + " and " + param2);
}

function callbackTester (callback) {
    callback (arguments[1], arguments[2]);
}

callbackTester (tryMe, "hello", "goodbye"); 
```

有一个例子，我认为这就是你想要做的。

例如使用以下源：[JavaScript：将参数传递给回调函数](https://stackoverflow.com/questions/3458553/javascript-passing-parameters-to-a-callback-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:48:08.843

如果我正确理解您的问题，您可以将其存储`returnValue`在与模态共享的外部变量中。

```
var myApp = {}; // your namespace
myApp.returnValue = 'something'; // you can override this wherever

launchDialog(myUrl, function(result, returnValue){
   returnValue = myApp.returnValue;
}); 
```

# delphi - Delphi XE 中是否有 Synactis 的 TPDFViewer 版本

> ID：12063189
> 
> 赞同：1
> 
> 时间：2012-08-21T21:18:38.640
> 
> 标签：delphi, pdf, delphi-xe, viewer

我在 Delphi 2006 项目中使用了 Synactis 产品 PDF-in-the-box 以及他们称为 TPDFViewer 的免费组件，它允许您在应用程序中嵌入 PDF 查看器。

我正在将一个应用程序移植到 XE 并且 - 发现尝试安装我在 XE 中的 TPDFViewer 对我的安装造成了严重损害 - 我正在寻找替代品。

我已经安装了他们当前产品 PDF-in-the-box 4.04 和 All-in-the-box 4.04 的 XE 支持的试用版，但两者都看不到任何 TPdfViewer 组件的迹象。他们的网站常见问题解答暗示此功能已被用于启动 Adob​​e Reader 的功能所取代。

所以我想要一个（免费的很好，但不是必需的）Delphi XE PDF 查看器，它不仅链接到 Adob​​e Reader，还允许用户交互或对缩放、页码等进行编程控制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:14:21.817

我尝试了几次以找到一个好的 PDF 查看器。其中大部分是假组件。最好的方法是将 acrobat reader dll 直接嵌入到您的应用程序中并从那里命令它。

那是 8 年前，所以我不记得我曾经这样做的代码。您将 acroXX.dll 文件直接导入 Delphi，它会为您准备一个用户组件，然后您将该组件直接安装到您的组件面板中。

此配置中最糟糕的事情是您必须处理安装在客户端上的 acrobat reader dll。阅读器的任何更新/升级都可能导致您的应用程序失败。

# ruby - Ruby 代码不在任何方法中

> ID：12063190
> 
> 赞同：9
> 
> 时间：2012-08-21T21:18:40.880
> 
> 标签：ruby

一般 Ruby 问题：在 Ruby 中，我经常看到在类中的代码，但不是方法的一部分。例如：

```
class DooDad
   attr_accessor :foo
end 
```

或者

```
class Teacher < ActiveRecord::Base
   has_many :students
end 
```

我认为`attr_accessor`和是分别用or参数`has_many`调用的方法，对吗？如果是这样，何时执行这些类型的语句。我试过这个：`:foo``:students`

```
class DooDad
  attr_accessor :foo
  puts "I happened!"
  @foo = 7
end 
```

它似乎没有运行这些`new`方法的一部分：

```
dd = DooDad.new
dd.foo 
```

输出 nil，从不吐出任何`puts`东西

这一切究竟是如何运作的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T21:38:06.973

方法喜欢`attr_accessor`并且`has_many`通常被称为“模仿方法”，因为它们看起来有点像 ruby​​ 关键字（模仿它们），但实际上，正如您和其他人正确指出的那样，它们是方法调用。

```
dd = DooDad.new
dd.foo 
```

> 输出 nil，从不吐出任何`puts`东西
> 
> 这一切究竟是如何运作的？

当您在类定义中时，所有方法调用和“变量定义”的隐式接收器是`self`，在您的情况下是`DooDad`.

所以当你写作时

```
class DooDad
  @foo = 1
end 
```

您实际上是在定义一个实例变量 on `self`，这恰好是类本身，因为您在该类定义中。（以及在任何其他类、模块或方法定义之外）

`attr_accessor`另一方面，在元编程的帮助下，该方法为从 class 实例化的对象的实例变量生成访问器**方法`DooDad`**。

回到你的例子：

```
class DooDad
  attr_accessor :foo
  puts "I happened!"
  @foo = 7
end 
```

有了上面提到的内容，您现在应该明白您正在处理两个不同的@foo 变量，一个用于 DooDad 类的实例（即`DooDad.new`），另一个（您通过编写创建的`@foo = 7`）用于 DooDad 类本身！

在类上调用`new`方法时，您会创建它的一个实例。

```
dd = DooDad.new 
#=> dd is now an object of class DooDad

dd.foo 
#=> You just called the "getter" method for an instance variable foo of object dd, which was never defined before, that's why it's returning nil. 
```

该`puts "I happened!"`语句，实际上就像其他两个一样，在加载类时立即进行评估，但在您调用`new`它时不会。如果你想要你描述的行为（调用时做事`new`），我建议实现一个`initialize()`方法 for `DooDad`，当你调用时会调用它`new`：

```
class DooDad
    attr_accessor :foo

    def initialize()
      puts "I happened!"
      @foo = 7
    end
end

dd = DooDad.new
#=> outputs "I happened!" and sets dd.foo = 7

dd.foo
#=> 7 
```

但是为什么`@foo = 7`现在设置实例变量`dd`and not`DooDad`呢？当您使用关键字定义方法时`def`，您输入了一个新范围（您通过了范围门）。`self`现在不再是类，而是您使用创建的该类的实例，`new`就像`dd`. 因此，当您在`@foo = 7`方法定义内部编写时，您谈论的是类实例的变量`DooDad`，而不是类本身。

这篇文章可能太长了，甚至可能无法令人满意，但我希望它有点全面。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T21:31:27.780

类似`has_many`和`attr_accessor`的方法实际上是模块或类上的方法。您完全正确地认为它们是普通方法，就像任何其他方法一样使用参数调用。当直接在类中调用方法时（在方法定义之外），它是在类本身上调用的。

这是[attr_accessor](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-attr_accessor)的文档。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-21T21:20:44.373

它们是语言中内置的语法糖，因此与您的测试不同。当你写（例如）

```
class Foo
  attr_accessor :bar
end 
```

它实际上是...的简写

```
class Foo
  def bar
    @bar
  end

  def bar=(value)
    @bar = value
  end
end 
```

# c# - Sitecore sc:link 字段类型默认设置

> ID：12063192
> 
> 赞同：1
> 
> 时间：2012-08-21T21:18:42.457
> 
> 标签：c#, asp.net, sitecore, sitecore6, page-editor

如何设置控件应在页面编辑器中显示的默认链接类型？我在转发器中有字段，使用 pageeditor 他们可以输入一个新项目，这是其中一个字段。我该如何设置它，以便当他们这样做并单击编辑链接时，他们会输入外部链接？在内容编辑器中，他们可以选择“外部链接”作为选项，但在页面编辑器中，他们不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:10:31.630

您可能需要就这方面联系支持。页面编辑器似乎默认为常规链接字段的“内部链接”对话框。

几个月前有人[在堆栈上问过](https://stackoverflow.com/questions/9294424/proper-page-editor-for-general-link-in-sitecore)这个问题，有人评论说 Sitecore 支持为他们提供了一个补丁。

同时，如果您需要解决方法，可以将以下文本作为 RAW 值输入到常规链接字段中。它会欺骗页面编辑器认为它是一个外部链接。

```
<link linktype="external" url="" anchor="" target="" /> 
```

# macos - 交互式 Shell Cocoa 应用程序 (NSTask)

> ID：12063193
> 
> 赞同：8
> 
> 时间：2012-08-21T21:18:43.410
> 
> 标签：macos, cocoa, nstask

我试图弄清楚如何在出现提示时将输入传递给 NSTask 。

例子：

我做类似的事情

```
kinit username@DOMAIN 
```

我收到“输入密码”提示。我希望能够为该 NSTask 提供密码。

有谁知道如何做到这一点？（基本上是通过可可应用程序自动化该过程）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-16T13:08:53.523

通常，命令行应用程序通过*标准输入从命令行读取输入*。NSTask 提供了一种`setStandardInput:`设置 a`NSFileHandle`或 a的方法`NSPipe`。

您可以尝试以下方法：

```
NSTask *task = // Configure your task

NSPipe *inPipe = [NSPipe pipe];
[task setStandardInput:inPipe];

NSPipe *outPipe = [NSPipe pipe];
[task setStandardOutput:outPipe];

NSFileHandle *writer = [inPipe fileHandleForWriting];
NSFileHandle *reader = [outPipe fileHandleForReading];
[task launch]

//Wait for the password prompt on reader [1]
NSData *passwordData = //get data from NSString or NSFile etc.
[writer writeData:passwordData]; 
```

有关在阅读器 NSFileHandle 上等待数据的方法，请参阅[NSFileHandle 。](https://developer.apple.com/Library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/index.html)

但是，这只是一个未经测试的示例，展示了在使用命令行工具使用提示时解决此问题的一般方法。对于您的具体问题，可能还有另一种解决方案。该`kinit`命令允许`--password-file=<filename>`使用可用于从任意文件读取密码的参数。

来自`man kinit`：

> # --password-file=文件名
> 
> 从文件名的第一行读取密码。如果文件名是 STDIN，密码将从标准输入中读取。

**该手册提供了第三种解决方案：**作为参数 提供`--password-file=STDIN`给您的 NSTask 并且不会有密码提示。这简化了通过 NSPipe 提供密码的过程，因此您无需在标准输出上等待密码提示。

*结论：*使用第三种解决方案时要容易得多：

1.  `--password-file=STDIN`使用参数配置您的任务
2.  创建一个 NSPipe
3.  将其用作任务的标准输入
4.  启动任务
5.  通过 [pipe fileHandleForWriting] (NSFileHandle) 将密码数据写入管道

# json.net - 在哪里查找 newtonsoft json.net 重大更改？

> ID：12063194
> 
> 赞同：29
> 
> 时间：2012-08-21T21:18:47.537
> 
> 标签：json.net

我有一堆代码想从使用 JSON.net 4.0.3 升级到 4.5.8 或任何最新版本。是否有任何已知的重大变化，或者我可以在哪里找到它们？我看到了这个：http: [//json.codeplex.com/workitem/22498](http://json.codeplex.com/workitem/22498)，它看起来在 4.5.3 中已修复。我也看到了这个：http: [//james.newtonking.com/archive/2012/03/20/json-net-4-5-release-1-iso-dates-async-metro-build.aspx](http://james.newtonking.com/archive/2012/03/20/json-net-4-5-release-1-iso-dates-async-metro-build.aspx)，我可能需要解决。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-08-10T22:34:33.457

从 6.0.4 开始[的版本在该项目的 GitHub 存储库中有发布说明。](https://github.com/JamesNK/Newtonsoft.Json/releases)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-20T13:58:10.417

所有版本的更改都列在您链接到的博客 ( [http://james.newtonking.com/](http://james.newtonking.com/) ) 上，并且在[特定文章中](http://james.newtonking.com/archive/2012/03/20/json-net-4-5-release-1-iso-dates-async-metro-build.aspx)，他说该软件包现在只会对主要版本号更改（语义版本控制，欢呼！）。

因此，通过搜索与主要版本更改（即 6.0.0）相关的每篇文章的博客，您可以计算出您需要担心哪些更改。我还没有看到更好的编译列表。

# tsql - TSQL 语句被跳过

> ID：12063195
> 
> 赞同：0
> 
> 时间：2012-08-21T21:18:48.373
> 
> 标签：tsql

我很难弄清楚为什么我的代码只有开始部分正在执行。我在问题所在的地方插入了语句“--此点之后没有任何内容正在执行”。任何帮助将不胜感激

```
IF @i_numrecs = 0
BEGIN 
    SET @nextid = dbo.Timesheetgetnextid(@EMP, @DATE)

    IF @mode = @c_current
    BEGIN

        INSERT INTO timedetail (
            ppenddate,tsdate,empnum,task1,
            task2,task3,hours,minutes,
            doecode,duration,SOURCE,enteredby,
            enteredon,approved,completed,timein,
            timeout,id)
        VALUES(
            @DATE,@DATE,@EMP,' ',
            ' ',' ',0,0,
            ' ',0,'BROWSER',@UID,
            @actiondate,'N','Y',' ',
            ' ',@nextid)

    END
    ELSE
    BEGIN

        INSERT INTO adjst_timedetail (
            ppenddate,tsdate,empnum,task1,
            task2,task3,hours,minutes,
            doecode,duration,SOURCE,enteredby,
            enteredon,approved,completed,timein,
            timeout,id)
        VALUES (
            @DATE,@DATE,@EMP,' ',
            ' ',' ',0,0,
            ' ',0,'BROWSER',@UID,
            @actiondate,'N','Y',' ',
            ' ',@nextid)

    END

    --Nothing after this point is executing
    INSERT INTO timesheetchangelog (
        empnum,tsdate,tdid,changedate,
        changeby,SOURCE,changetype)
    VALUES(
        @emp,@date,@nextid,@actiondate,
        @UID,@TCPIP,'COMPLETION INSERT')

    SELECT @changelogid = Scope_identity()

    EXEC Auditrecordaction
        @emp,
        @date,
        @payfrequency,
        @c_insertaction,
        @actiondate,
        @UID,
        @actionid OUT,
        @doaudit OUT

    SELECT @doaudit DoAudit, @actionid ActionID

    IF Isnull(@doaudit, 0) > 0
    BEGIN 

        IF @mode = @c_current
        BEGIN

            INSERT INTO timedetail_audit (
                EMPNUM,PPENDDATE,TSDATE,TASK1,
                TASK2,TASK3,HOURS,MINUTES,
                DOECODE,DURATION,SOURCE,TSGROUP,
                DEPTCHRG,PAYRATE,TIMEIN,TIMEOUT,
                ERRORS,COMPLETED,APPROVED,VERIFIED,
                DELETED,PROCESSEDBYPAYROLL,ID,ENTEREDBY,
                ENTEREDON,APPROVEDBY,APPROVEDON,PROCESSEDON,
                QUANTITY,SHIFT,processed_pd,RUNNUMBER,
                overnight,actionid,logid)
            SELECT
                EMPNUM,PPENDDATE,TSDATE,TASK1,
                TASK2,TASK3,HOURS,MINUTES,
                DOECODE,DURATION,SOURCE,TSGROUP,
                DEPTCHRG,PAYRATE,TIMEIN,TIMEOUT,
                ERRORS,COMPLETED,APPROVED,VERIFIED,
                DELETED,PROCESSEDBYPAYROLL,ID,ENTEREDBY,
                ENTEREDON,APPROVEDBY,APPROVEDON,PROCESSEDON,
                QUANTITY,SHIFT,processed_pd,RUNNUMBER,
                overnight,@actionid,@changelogid
            FROM timedetail
            WHERE empnum = @EMP
                AND tsdate = @DATE
                AND id = @nextid

        END
        ELSE
        BEGIN

            INSERT INTO timedetail_audit (
                EMPNUM,PPENDDATE,TSDATE,TASK1,
                TASK2,TASK3,HOURS,MINUTES,
                DOECODE,DURATION,SOURCE,TSGROUP,
                DEPTCHRG,PAYRATE,TIMEIN,TIMEOUT,
                ERRORS,COMPLETED,APPROVED,VERIFIED,
                DELETED,PROCESSEDBYPAYROLL,ID,ENTEREDBY,
                ENTEREDON,APPROVEDBY,APPROVEDON,PROCESSEDON,
                QUANTITY,SHIFT,processed_pd,RUNNUMBER,
                overnight,actionid,logid)
            SELECT
                EMPNUM,PPENDDATE,TSDATE,TASK1,
                TASK2,TASK3,HOURS,MINUTES,
                DOECODE,DURATION,SOURCE,TSGROUP,
                DEPTCHRG,PAYRATE,TIMEIN,TIMEOUT,
                ERRORS,COMPLETED,APPROVED,VERIFIED,
                DELETED,PROCESSEDBYPAYROLL,ID,ENTEREDBY,
                ENTEREDON,APPROVEDBY,APPROVEDON,PROCESSEDON,
                QUANTITY,SHIFT,processed_pd,RUNNUMBER,
                overnight,@actionid,@changelogid
            FROM adjst_timedetail
            WHERE empnum = @EMP
                AND tsdate = @DATE
                AND id = @nextid

        END
    END 
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:43:48.913

如果这件作品执行没有错误......

```
IF @mode = @c_current
BEGIN

    INSERT INTO timedetail (
        ppenddate,tsdate,empnum,task1,
        task2,task3,hours,minutes,
        doecode,duration,SOURCE,enteredby,
        enteredon,approved,completed,timein,
        timeout,id)
    VALUES(
        @DATE,@DATE,@EMP,' ',
        ' ',' ',0,0,
        ' ',0,'BROWSER',@UID,
        @actiondate,'N','Y',' ',
        ' ',@nextid)

END
ELSE
BEGIN

    INSERT INTO adjst_timedetail (
        ppenddate,tsdate,empnum,task1,
        task2,task3,hours,minutes,
        doecode,duration,SOURCE,enteredby,
        enteredon,approved,completed,timein,
        timeout,id)
    VALUES (
        @DATE,@DATE,@EMP,' ',
        ' ',' ',0,0,
        ' ',0,'BROWSER',@UID,
        @actiondate,'N','Y',' ',
        ' ',@nextid)

END 
```

那么下一条语句应该并且将尝试执行。我的猜测是你在这里遗漏了一些错误。尝试从管理工作室分块运行它，以确保它们实际上成功执行。

# matlab - 将输入变量传递给 gui 内的另一个 gui

> ID：12063196
> 
> 赞同：1
> 
> 时间：2012-08-21T21:19:00.017
> 
> 标签：matlab

我有主 gui 和另外两个子 gui，我了解如何从一个子 gui 到主 gui 获取输出变量。

此按钮功能在主 gui 中

```
 function pb_main_moisture_content_calc_Callback(hObject, eventdata, handles)
  % hObject    handle to pb_main_moisture_content_calc (see GCBO)
  % eventdata  reserved - to be defined in a future version of MATLAB
  % handles    structure with handles and user data (see GUIDATA)

   m_sc = sub_MoistureContent_Calculator(); 
```

此按钮功能位于 sub1 gui 中：

```
 function pb_sub1_update_Callback(hObject, eventdata, handles)
    % hObject    handle to pb_sub1_update (see GCBO)
    % eventdata  reserved - to be defined in a future version of MATLAB
    % handles    structure with handles and user data (see GUIDATA)

    m_sc = getappdata(handles.sub_Moist_Calc, 'appdata_m_sc');
    handles.output = m_sc;
    guidata(hObject,handles);
    uiresume(gcf); 
```

但是我希望这个 m_sc 变量进入另一个子 gui，我需要做什么才能发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:33:33.817

您可以使用 appdata 在两个 GUI 之间共享数据。

实现此目的的一种方法：在 MATLAB 的 appdata 中注册 GUI 及其关系（句柄 == 0）。

# iphone - 当单元格是可变高度时，在 cellForRowAtIndexPath 中获取单元格的高度

> ID：12063200
> 
> 赞同：1
> 
> 时间：2012-08-21T21:19:12.193
> 
> 标签：iphone, ios

我在我的表格视图中创建了自定义单元格，有些单元格有图像，有些很高，有些只是文本。单元格的高度是在 heightForRowAtIndexPath 中计算的，我相信这是在调用 cellForRowAtIndexPath 之前完成的。无论高度如何，我都想在单元格底部放置一个图像视图，但我不确定如何从 cellForRowAtIndexPath 中获取计算出的高度？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-28T10:38:38.237

来不及回答了。。

但是，就像@user216661 指出的那样，获取 Cell 或 ContentView 的高度的问题在于它返回了单元格的原始高度。Incase 具有可变高度的行，这是一个问题。

更好的解决方案是获取单元格 ( `rectForRowAtIndexPath`) 的 Rect，然后从中获取高度。

```
- (UITableViewCell *)tableView:(UITableView *)iTableView cellForRowAtIndexPath:(NSIndexPath *)iIndexPath {
    UITableViewCell *aCell = (UITableViewCell *)[iTableView dequeueReusableCellWithIdentifier:aCellIdentifier];
    if (aCell == nil) {
        CGFloat aHeight = [iTableView rectForRowAtIndexPath:iIndexPath].size.height;
        // Use Height as per your requirement.
    }

    return aCell;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T22:10:02.707

您可以询问代表，但您会询问两次，因为 tableView 已经询问并相应地调整单元格的大小。最好从细胞本身找出来……

```
// in cellForRowAtIndexPath:, deque or create UITableViewCell *cell
// this makes the call to heightForRow... and sizes the cell
CGFloat cellHeight = cell.contentView.bounds.size.height;

// alter the imageView y position (assuming the rest of the frame is correct)
CGRect imageFrame = myImageView.frame;
imageFrame.y = cellHeight - imageFrame.size.height;   // place the bottom edge against the cell bottom
myImageView.frame = imageFrame; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T21:23:47.627

您可以自己调用 heightForRowAtIndexPath ！只需将 cellForRowAtIndexPath 中的 indexPath 作为参数传递，您就可以知道您正在设置的单元格的高度。

假设您使用的是 UITableViewController，只需在 cellForRowAtIndexPath 中使用它...

```
float height = [self heightForRowAtIndexPath:indexPath] 
```

# unit-testing - 单元测试中的起订量

> ID：12063201
> 
> 赞同：0
> 
> 时间：2012-08-21T21:19:27.107
> 
> 标签：unit-testing, moq

假设我有一项服务

```
public interface IAreaService
{
   int CalculateArea(int x,int y);
   int CalculateAreaTimesX(int x, int y, int ammount);
}

public class AreaService : IAreaService
{
    public int CalculateArea(int x,int y)
    {
        return x*y;
    }

    public int CalculateAreaTimesX(int x, int y, int ammount)
    {
        return CalculateArea(x, y)*ammount;
    }
} 
```

与相关的单元测试

```
[TestMethod]
    public void AreaService_GetArea_Test()
    {
        AreaService service = new AreaService();
        int expected = 9;
        int actual  = service.CalculateArea(3, 3);
        Assert.AreEqual(expected,actual,"The Calculate area does not work as expected");
    }

    [TestMethod]
    public void AreaService_GetAreaMultiplyByX_TestTrueValue()
    {
        AreaService service = new AreaService();
        int expected = 27;
        int actual = service.CalculateAreaTimesX(3, 3, 3);
        Assert.AreEqual(expected,actual);
    } 
```

好的，所以在运行单元测试之后。我确信我的方法是有效的，生活应该很棒。

但是现在我想在另一个类中使用 IAreaService，这就是我失去光芒的地方。这是另一个类的实现。

```
public class PriceCalculatorService
{
    private readonly IAreaService _areaService;
    public PriceCalculatorService(IAreaService areaService)
    {
        _areaService = areaService;
    }

    public double GetPrice(int x, int y, int times, double price)
    {
       return  _areaService.CalculateAreaTimesX(x, y, times)*price;
    }
} 
```

如果我运行以下单元测试（我的想法在此处模拟可能是错误的，这就是问题所在。

```
[TestMethod]
    public void PriceCalculatorService_GetPrice_Test()
    {
        var IAreaServiceMock = new Mock<IAreaService>();
        IAreaServiceMock.Setup(ism => ism.CalculateAreaTimesX(2, 2, 2)).Returns(8);
        PriceCalculatorService priceCalc = new PriceCalculatorService(IAreaServiceMock.Object);

        double expected = 20;
        double actual = priceCalc.GetPrice(2, 2, 2, 2.50);
        Assert.AreEqual(expected,actual);
    } 
```

# 问题

当我运行上面提到的所有单元测试时，一切都很好。他们都通过了。但是让我们说我出于某种原因需要将 AreaService.Calculate() 方法更改为以下

```
public int CalculateArea(int x,int y)
{
    return x*y+2;
} 
```

这意味着我的单元测试“AreaService_GetArea_Test()”将失败，就像它应该的那样，但是由于“PriceCalculatorService_GetPrice_Test()”测试中使用的模拟仍然会通过，因为看起来当你模拟一个服务时，实际的代码是未使用（显然）。所以我的 PriceCalculatorService_GetPrice_Test 没用。但是我使用存根然后单元测试将失败，因为它应该。

那么什么时候模拟，什么时候不模拟？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:23:34.390

> 所以我的 PriceCalculatorService_GetPrice_Test 没用。

不，这不对。它正在测试 的代码`GetPrice`，并且*仅*测试 的代码`GetPrice`。对我来说似乎很合理。

这种方法没有太多要测试的东西，但你*正在*测试它。如果您没有三次使用相同的参数会更好（例如，使用 1、2、3 会更好）但您正在测试它。

没有理由仅仅因为接口的实现发生了变化而中断测试。你抓住了对`AreaService`in的变化`AreaService_GetArea_Test()`，这确实是你应该抓住它的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T06:19:26.850

`PriceCalculatorService_GetPrice_Test`正在测试`GetPrice`。它正在测试的返回值`GetPrice`是否`_areaService.CalculateAreaTimesX(x, y, times)`相乘`price`。这就是测试的意义。所以它根本没有用。

`GetPrice`应该取决于 的结果`CalculateAreaTimesX`，而不是该方法的逻辑。因此，无论模拟返回什么，都可以进行测试。

# google-apps-script - 获取联系人的名字和姓氏？

> ID：12063205
> 
> 赞同：0
> 
> 时间：2012-08-21T21:19:34.603
> 
> 标签：google-apps-script

我正在尝试加载一个组，然后获取每个人的名字和姓氏。在调试器中，看起来该组已成功加载，但是当我开始提取用户的名字和姓氏时，我收到一条错误消息：“*很抱歉，发生服务器错误。请稍等，然后重试*”。

我正在查看联系人类的文档，看起来我做得对，但错误让我觉得我错过了一些东西。

我的代码：

```
var distrogroup;
var groups = ContactsApp.getContactGroups();
for (group in groups) {
  var tmp = groups[group].getGroupName();
  if (groups[group].getGroupName() == 'Phone Bill') {
    distrogroup = ContactsApp.getContactsByGroup(groups[group]);
  }
}
for (contact in distrogroup) {
  var lastname = distrogroup[contact].getFamilyName();
  var firstname = distrogroup[contact].getGivenName();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:19:42.180

你想返回一个名字和姓氏的数组吗？因此，将最后一个 for 循环替换为：

```
var lastname = [];
var firstname = [];
for (var i = 0; i < distrogroup.length; i++) {
  lastname.push(distrogroup[i].getFamilyName());
  firstname.push(distrogroup[i].getGiveName());
} 
```

此外，可能与错误无关，但我想知道代码的第一部分是否可以简化为：

```
var distrogroup = ContactApp.getContactGroup('Phone Bill').getContacts(); 
```

[https://developers.google.com/apps-script/class_contactsapp#getContactGroup](https://developers.google.com/apps-script/class_contactsapp#getContactGroup)

# iframe - 无论我尝试过什么代码，我的 iframe 高度总是被切断

> ID：12063208
> 
> 赞同：0
> 
> 时间：2012-08-21T21:19:59.010
> 
> 标签：iframe, height, facebook-javascript-sdk

我已经尝试了几种编码方式，并且在让我的整个 iframe 出现时遇到了各种各样的麻烦。我不想使用滚动条，所以我已经将它们编码出来。这是我页面上的应用程序：

[https://www.facebook.com/HorseRacingRadioNetwork/app_315312098503969](https://www.facebook.com/HorseRacingRadioNetwork/app_315312098503969)

这是我使用的当前代码：

```
<head>
   ....

     <script type="text/javascript">
       window.fbAsyncInit = function() {

     //Der folgende Code ändert die Grösse des iFrames alle 100ms
     FB.Canvas.setAutoResize(100);

     };
     (function() {
     var e = document.createElement('script');
     e.async = true;
     e.src = document.location.protocol +
     '//connect.facebook.net/en_US/all.js';
     document.getElementById('fb-root').appendChild(e);
     }());

     </script>
     </body>
     </html> 
```

但是我已经研究并尝试了看似一百万的事情，但我总是得到相同的结果？任何建议都会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:33:50.280

当我转到您的页面选项卡时，萤火虫向我显示的第一件事是 JS 错误，

> 类型错误：document.getElementById("fb-root") 为空
> 
> document.getElementById('fb-root').appendChild(e);

JavaScript（通常）的工作方式是，任何错误都会停止脚本的其余部分或文档的任何其他脚本的执行。

*请学习如何使用浏览器的错误控制台！*

# objective-c - POST 到 Objective C 中的网络服务器

> ID：12063210
> 
> 赞同：0
> 
> 时间：2012-08-21T21:20:11.170
> 
> 标签：objective-c, ios, post, webserver

我一直在研究一种将值发送到目标 c 中的网络服务器的方法。

我认为我在两端都可以正常工作，除了我的价值没有出现在发送的电子邮件中。

这是我的代码，如果有人能指出我做错了什么，那就太好了。

（dval 是什么没有出现）

```
NSMutableString *mmessage = [[NSMutableString alloc]initWithString:@""];
    [mmessage appendString:[NSString stringWithFormat:@"<p><b>Drink Name:</b> %@</p>", dval]];

    NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://test.com/api/stuff/send"]];
    NSMutableDictionary *postInfo = [NSDictionary dictionaryWithObject:[NSDictionary dictionaryWithObjectsAndKeys:mmessage, @"message", nil] forKey:@"form"];

    NSError *e = nil;
    NSData *postData = [NSJSONSerialization dataWithJSONObject:postInfo options:0 error:&e ];

    __block int resp_code = 0;

    [urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [urlRequest setHTTPMethod:@"POST"];
    [urlRequest setHTTPBody:postData];

    [NSURLConnection sendAsynchronousRequest:urlRequest
                 queue:[NSOperationQueue mainQueue]
                 completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                     NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;
                     resp_code = httpResponse.statusCode;
                     if(resp_code == 200){

                         NSDictionary *jsonObjects = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];

                         if ([[jsonObjects objectForKey:@"status"] isEqualToString:@"success"]) {
                             UIAlertView *emailsuccess = [[UIAlertView alloc] initWithTitle:@"Email Successfully sent." message:nil delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
                             [emailsuccess show];
                         }

                         else if ([[jsonObjects objectForKey:@"status"] isEqualToString:@"failed"]) {
                             UIAlertView *emailfailed = [[UIAlertView alloc] initWithTitle:@"Email Failed." message:[jsonObjects objectForKey:@"messages"] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
                             [emailfailed show];
                         }

                        else {
                             UIAlertView *emailfailed = [[UIAlertView alloc] initWithTitle:@"Email Response." message:[jsonObjects objectForKey:@"messages"] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
                             [emailfailed show];

                     }

                         }
                     }]; 
```

# performance - 用于 dismax 字段提升与有效负载提升的 Solr 性能

> ID：12063211
> 
> 赞同：1
> 
> 时间：2012-08-21T21:20:22.097
> 
> 标签：performance, solr, lucene, benchmarking

如果我确实想提高我的多字段关键字 solr 索引的性能。哪个选项应该更快：

1.  多字段索引和每个字段提升的 dismax
2.  单个字段索引，每个令牌使用有效负载附加信息。自定义相似性以应用与 Dismax Solr Parser 中相同的提升

所描述的选项是否有任何基准？

# freebsd - 如何在 FreeBSD/cshrc 上为提示着色？

> ID：12063225
> 
> 赞同：8
> 
> 时间：2012-08-21T21:21:18.690
> 
> 标签：freebsd, csh, tcsh

我负责管理一堆服务器，我想在每个服务器上设置我的提示，这样我就不会对我登录的位置感到困惑。

我已经编辑了我的`.cshrc`文件并将其放入其中：

```
set prompt=`whoami`@`hostname -s`:$cwd'$ ' 
```

但我想为该提示着色，使其更加突出。也许是带有白色文字的绿色或其他东西。我怎样才能做到这一点？我对shell语法不是很熟悉。

如果相关的话，我正在从 Ubuntu 附带的标准终端进行 SSH 连接。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T22:06:44.237

[这个页面](https://www.funtoo.org/Prompt_Magic)有一个很好的解释，虽然语法有点不同`csh`。这是我想出的：

```
set prompt="%{\e[32;1m%}%n%{\e[37m%}@%{\e[33m%}%m%{\e[37m%}:%{\e[36m%}%~%{\e[37m%}"\$"%{\e[0m%} "
# root variation:
set prompt="%{\e[31;1m%}root%{\e[37m%}@%{\e[33m%}%m%{\e[37m%}:%{\e[36m%}%/%{\e[37m%}#%{\e[0m%} " 
```

**更新：**当您更改目录时，我在这里的上一个提示实际上并没有更新。使用`%n`,`%~`而`%m`不是`$cwd`或`pwd`实际更新。[看这里](http://www.freebsdwiki.net/index.php/.cshrc)。

`%{ ... %}`意味着之间的东西应该采用 0-width
`\e[ ... m`指定颜色和粗体。`\e`逃避`[`似乎是必要的（我相信它相当于`\033`），`m`表示结束。

用作`0`您的颜色以重置为默认值。

如果要设置颜色和背景，只需用分号分隔数字即可。用于`1`启用粗体。

请参阅此表以选择您的颜色：

[![](../Images/5112a0d43ca70c89c206621a22a735fb.png)](https://i.stack.imgur.com/0n2lz.gif)
[（来源：[funtoo.org](http://www.funtoo.org/images/1/1c/Colortable.gif)）]

因此，例如，红色背景上的粗体青色“Hello World”将是`%{\e[36;41;1m%}Hello World%{\e[0m%}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T21:25:21.370

据我所知，FreeBSD 默认带有 tcsh。看看[例子](http://www.tcsh.org/PromptExamples)。

其他 shell （bash、**csh**、tcsh、ksh 等）的另一个[列表也是可用的。](http://www.understudy.net/custom.html)取自该链接并使用 tcsh 进行测试（我没有安装 csh）：

 **> 要为提示着色，您需要将此符号放在提示中。`%{\033[Xm%}`.
> 
> 某些颜色需要分号才能显示。黄色 […] 是 1;33 不要只使用 33，否则它会变成棕色。如果您有 0;31，则无需放置 0。

颜色是ANSI。看看[ANSI 颜色列表](http://www.understudy.net/custom.html#table2)；只需`X`用颜色代码替换。

X = 0 重置颜色：`%{\033[0m%}`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-04T23:40:15.110

```
# Add these lines to your ~/.cshrc.mine file on the linux grace machines...

# Colors!
set     red="%{\033[1;31m%}"
set   green="%{\033[0;32m%}"
set  yellow="%{\033[1;33m%}"
set    blue="%{\033[1;34m%}"
set magenta="%{\033[1;35m%}"
set    cyan="%{\033[1;36m%}"
set   white="%{\033[0;37m%}"
set     end="%{\033[0m%}" # This is needed at the end... :(

# Setting the actual prompt

set prompt="${green}%n${blue}@%m ${white}%~ ${green}%%${end} "

# Clean up
unset red green yellow blue magenta cyan yellow white end 
```**

# css - CSS无法在不添加滚动条的情况下让内容容器填充页面的其余部分

> ID：12063226
> 
> 赞同：1
> 
> 时间：2012-08-21T21:21:22.730
> 
> 标签：css, html, layout

在过去的一天半里，我一直在做这件事。因此，任何帮助将不胜感激。

一般布局有一个位置固定的顶栏和侧栏。我希望内容容器在没有滚动条的情况下填充页面的其余部分，除非由于内容而需要。我不确定是否可以纯粹用 CSS 来做，或者我是否还需要修改我的 html 结构。我在下面发布了一个小提琴来展示最简单的例子。

[http://jsfiddle.net/wU2Hd/](http://jsfiddle.net/wU2Hd/)

再次，任何帮助或朝着正确方向推动将不胜感激，这一直让我陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:48:26.500

这并非不可能。看看我从你那里分叉出来的这个[JSFiddle 。](http://jsfiddle.net/wU2Hd/4/)

我不需要更改 HTML 结构，但对 CSS 进行了一些重要更改。

首先我`height: 100%;`从`html, body`. 这迫使滚动条出现。

然后我从 中删除了`height`and`width`声明`.content`，并给出了`#shell-content`绝对定位：

```
#shell-content {
    background: #FFFFFF;
    position:absolute;
    left: 100px;
    top: 86px;
    bottom: 0px;
    right: 0px;
    overflow-y: auto;
}​ 
```

`left`和`top`是基于您为标题提供的显式高度和您为菜单提供的显式宽度的值。告诉它仅在`overflow-y: auto`内容超出其可用空间时才显示滚动条，否则不显示。

JSFiddle 有一些疯狂的 lorem ipsum 文本来显示效果。如果将其更改为更少的文本，滚动条将完全消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:28:59.683

问题是你正在设置

```
#shell-content{
    height:100%
}
body{
    height:100%
} 
```

这意味着 body 填充以适合窗口，然后 shell-content 扩展以填充该空间（其直接父级的确切大小），但被 shell-top-wrapper 取代，因此它溢出。您应该决定外壳顶部包装器的相对高度，或者动态更改外壳内容的高度（使用 javascript）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:33:27.600

这是你的小提琴：http: [//jsfiddle.net/eeMz4/](http://jsfiddle.net/eeMz4/)。您会看到内容区域中的大图像会滚动。如果您将图像取出并用文本或*小于*可用空间的内容替换它，滚动条就会消失。

诀窍是添加`overflow:auto`到#shell-content。

干杯!

辛西娅

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T22:40:17.120

我做了一些小改动： http: [//jsfiddle.net/wU2Hd/5/](http://jsfiddle.net/wU2Hd/5/)
- 从内容
中删除高度 - 从内容外壳中删除高度
- 将主体背景设置为白色
- 将侧边栏背景设置为灰色

这实际上不会拉伸内容，但它会看起来像它一样。当内容变得大于视口时，滚动条将自动出现。

# c++ - 在头文件中声明向量时出错

> ID：12063231
> 
> 赞同：1
> 
> 时间：2012-08-21T21:21:52.207
> 
> 标签：c++, visual-studio-2008, vector, sfml

当我尝试在标头中声明一个向量时，我不断收到一长串错误。我已经环顾了一段时间，但找不到解决方案。

以下是错误：

> 1>正在编译... 1>game.cpp 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38)：错误 C2143：语法错误：缺少 ';' 在'<' 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38) 之前：错误 C2071：'input::vector'：非法存储类 1>c:\ users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38) : error C2238: unexpected token(s) before ';' 1>main.cpp 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38)：错误 C2143：语法错误：缺少 ';' 在'<' 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38) 之前：错误 C2071：'input::vector'：非法存储类 1>c:\ users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38) : error C2238: unexpected token(s) before ';' 1>input.cpp 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38)：错误 C2143：语法错误：缺少“；” 在'<' 1>c 之前：\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38)：错误 C2071：'input::vector'：非法存储类 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38)：错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持 default-int 1>c:\users\legacyblade\documents\visual studio 2008\projects\fourswords\fourswords\input.h(38) : error C2238: unexpected token(s) before ';'

这是源代码：

```
#include <vector>
#include <SFML/Graphics.hpp>

#ifndef _input_h
#define _input_h

class input
{
public:
      input();
     void update();

//----input keys----//

    // Directions
    bool upPress;
    bool downPress;
    bool leftPress;
    bool rightPress;

    // Actions
    bool aPress;
    bool bPress;
    bool jumpPress;
    bool shieldPress;

    // Menu
    bool startPress;
    bool screenshotPress;
    bool fullscreenPress;

//------------------//

private:
    extern vector<sf::Keyboard::Key> keyBindings;

};

#endif 
```

无论有没有 extern，它都会给我同样的错误，即使我改变了向量中事物的类型（甚至是 int）。

非常感谢您的阅读。如果有人可以提供帮助，那就太好了。我需要向量来做我想做的事情。不知道为什么给我带来这么大的麻烦。同一地点的任何其他类型的变量都不会导致错误。只有向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:33:12.093

只是补充一下，您需要声明中的命名空间，因为我们通常不希望使用“使用命名空间 std”来膨胀头文件。因此，如果您在其他地方看到在其前面没有 std:: 的向量，则可能在其他地方声明了命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:24:26.177

您需要使用向量的命名空间。前缀`vector`为`std::`.

此外，`extern`在语义上对类成员没有任何意义。去掉它。

```
std::vector<sf::Keyboard::Key> keyBindings; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:22:53.497

```
extern vector<sf::Keyboard::Key> keyBindings; 
```

应该

```
std::vector<sf::Keyboard::Key> keyBindings; 
```

# java - 通过隐式导航重定向到 servlet？

> ID：12063234
> 
> 赞同：1
> 
> 时间：2012-08-21T21:22:01.703
> 
> 标签：java, jsf, jakarta-ee, servlets

如何通过支持方法正确地重定向到 servlet？

```
class MyBean{ 
    public String doRedirect() {
        //some conditions
        return "newlocation";
    }
}

<h:commandButton value="Test" action="#{myBean.doRedirect}" /> 
```

这会将我重定向到 newlocation.xhtml。

但是如果我有一个 WebServlet 呢？

```
@WebServlet(urlPatterns = "/newlocation") 
```

然后如何重定向到 servlet 而不是 xhtml 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:27:29.883

您不能使用 JSF 导航处理程序导航到非 JSF 资源。

直接使用[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29)方法即可：

```
public void doRedirect() throws IOException {
    FacesContext.getCurrentInstance().getExternalContext().redirect("newlocation");
} 
```

或者，如果您不确定当前的请求路径：

```
public void doRedirect() throws IOException {
    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
    ec.redirect(ec.getRequestContextPath() + "/newlocation");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T21:27:45.677

您可以访问原始 HTTPServletResponse 并使用其 API 进行重定向

```
HttpServletResponse response = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
response.sendRedirect(URL); 
```

# actionscript-3 - ProgressEvent.PROGRESS 在 AS3 中未触发

> ID：12063238
> 
> 赞同：0
> 
> 时间：2012-08-21T21:22:16.503
> 
> 标签：actionscript-3, preloader, loaderinfo

我试图在 Flash CS6 中为游戏创建预加载器。我已经将下载速度减慢到 1,2 kb，但 ProgressEvent.PROGRESS 从未被触发。这就是我所拥有的：

```
import flash.events.Event;
import flash.events.ProgressEvent;
stop();

loaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressMade);

function onProgressMade( progressEvent:ProgressEvent ):void {
trace( loaderInfo.bytesLoaded, loaderInfo.bytesTotal );
} 
```

舞台保持空白，但永远不会调用 onProgressMade。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:30:21.627

尝试遵循本教程： [http ://stephenscholtz.com/201110/single-movie-flash-preloading-as3](http://stephenscholtz.com/201110/single-movie-flash-preloading-as3)

# c++ - 如何从 std::function 获取基本函数类型？

> ID：12063239
> 
> 赞同：2
> 
> 时间：2012-08-21T21:22:16.560
> 
> 标签：c++, function, tr1, typetraits

我有很多类的 typedef，`std::function<void(PARAMS)>`其中 PARAMS 特定于每个类。我需要根据参数的数量和第一个参数的类型进行专门研究。我想`boost::function_traits`使用它，但为了使用它，我需要有`std::function`问题的原始函数类型。

例如，给定`std::function<void(int,int)>`，我想检索`void(int,int)`。

有没有办法以可移植的方式提取本机类型？作为旁注，我无权访问 C++11 功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T21:31:22.313

要获取函数类型，可以使用偏特化：

```
template <typename T>
struct Detect;

template <typename F>
struct Detect<std::function<F>> {
  typedef F Result;
}; 
```

现在，当您获得未知`std::function<?>`类型`T`时，只需使用

```
typename Detect<T>::Result 
```

（您可能希望定义`Result`为`F *`，因为某些上下文（例如，字段类型）仅允许指向函数的指针，而不是裸函数类型。

编辑：

要专注于参数的数量和第一个参数的类型，您需要 C++11 可变参数模板

```
template <typename T>
struct Detect;

template <typename R, typename A, typename... As>
struct Detect<std::function<R(A,As...)>> {
  static constexpr auto numargs = 1 + sizeof...(As);
  typedef R Result;
  typedef A FirstArg;
}; 
```

或编写与上述等效的代码，对每个可能的参数数量使用单独的特化：

```
template <typename R, typename A1>
struct Detect<std::function<R(A1)>> {
  enum { numargs = 1 };
  typedef R Result;
  typedef A1 FirstArg;
};

template <typename R, typename A1, typename A2>
struct Detect<std::function<R(A1,A2)>> {
  enum { numargs = 2 };
  ...
};

... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T21:32:47.710

`std::function`包含`result_type`,`argument_type`用于一元函数，`first_argument_type`和`second_argument_type`用于二元函数。你可以提取这些。对于`n-ary`使用可变参数模板定义的函数，我认为没有`std::tuple`包含所有参数的函数。

如果您想要自己的特征类：

```
template<typename Fun>
struct function_traits;

template<typename R, typename... Args>
struct function_traits<std::function<R(Args...)>
{
    typedef R return_type;
    typedef std::tuple<Args...> arguments_type;
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T21:35:10.883

`T`创建一个元函数来提取`boost::function<T>`

```
template<typename T>
struct func_extractor

template<typename T>
struct func_extractor<boost::function<T> >
{
   typedef T type;
};

int main()
{
    typedef boost::function<void(int, int)> func_type1; 
    typedef func_extractor<func_type1>::type extracted_type;
    typedef boost::function<extracted_type> func_type2;
    std::cout << boost::is_same<func_type1, func_type2>::value << std::endl;
} 
```

# salesforce - SOQL 聚合查询：计算返回的行数

> ID：12063240
> 
> 赞同：3
> 
> 时间：2012-08-21T21:22:18.017
> 
> 标签：salesforce, apex-code, soql, force.com

以下是我的 SOQL 查询：

```
select COUNT(Id) FROM Payroll_Group_Detail__c where Tax_Batch__c=null and CreatedDate >=2012-07-21T00:00:00-05:00 and Total_Tax_Amount__c!=null GROUP By Company__c,Name,Payment_Date__c,Pay_Cycle_Type__c; 
```

我试图计算这个 group by 子句返回的行数。但是我没有得到一个计数，而是得到了多行。如何获取此分组返回的总行数？

谢谢，卡尔文

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T06:44:46.807

只计算记录：

```
Integer counter = [ Select count() 
                    FROM Payroll_Group_Detail__c 
                    Where Tax_Batch__c = null 
                    And CreatedDate >= 2012-07-21T00:00:00-05:00 
                    And Total_Tax_Amount__c != null ];

System.debug('My counted records: ' + counter); 
```

使用 GROUP BY：

```
AggregateResult[] aggr = [ Select count(Id) 
                           FROM Payroll_Group_Detail__c 
                           Where Tax_Batch__c = null 
                           And CreatedDate >= 2012-07-21T00:00:00-05:00 
                           And Total_Tax_Amount__c != null
                           Group By Total_Tax_Amount__c ];

Integer counter = Integer.valueOf(aggr.size());

System.debug('#### counter: ' + counter); 
```

但请记住，您的计数不能超过允许的调控器限制（SOQL 查询检索到的记录总数 -> 50,000）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:57:07.990

分组为分组字段中的每个唯一值返回一行。

[Salesforce Group By 文档](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_select_groupby.htm)

如果您想要在 2012 年 7 月 21 日之后创建的 Payroll_Group_Detail__c 总数，其中 Tax_Branch__c 为空白但设置了 Total_Tax_Amount__c，只需松开 Group By 语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-10T14:28:44.250

对于像我这样正在寻求帮助的任何其他可怜的灵魂——如果你没有在聚合函数之后使用别名，请使用这个：

```
Object counter = aggr[0].get('expr0'); 
```

如果您确实在聚合函数之后使用了别名，则可以使用：

```
Object counter = aggr[0].get('myalias'); 
```

请参阅文档：[使用 SOQL 聚合函数](https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/langCon_apex_SOQL_agg_fns.htm?search_text=aggregate)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T17:47:27.330

我不认为 aggr.size 是你需要的

```
Integer counter = Integer.valueOf(aggr.size()); 
```

计数在 AggregateResult 对象的 expr0 字段中返回。agr.get('expr0')

将工作。如果您有其他字段返回计数，请参阅以下链接中的示例

[如何在 Visualforce 页面上显示聚合 SOQL 查询的结果？](https://stackoverflow.com/questions/8523303/how-do-i-display-the-results-of-an-aggregate-soql-query-on-a-visualforce-page)

# jquery - Jquery多个复选框在var中获取值或在span中打印

> ID：12063243
> 
> 赞同：0
> 
> 时间：2012-08-21T21:22:27.997
> 
> 标签：jquery, html, checkbox

html的代码是：

```
<div id="container"><h1>Add-ons</h1>
<input type="checkbox" name="ch1" value="10" id="qr1" />Add-on Number 1 - 10 QR <br />
<input type="checkbox" name="ch1" value="20" id="qr1" />Add-on Number 2 - 20 QR <br />
<input type="checkbox" name="ch1" value="40" id="qr1" />Add-on Number 3 - 40 QR <br />
<input type="checkbox" name="ch1" value="60" id="qr1" />Add-on Number 4 - 60 QR <br />
</div>

<div> I want more add-ons
<select id="more" name="more">
    <option value="0 QR">0</option>
    <option value="30 QR">1</option>
    <option value="50 QR">2</option>
    <option value="100 QR">3</option>
</select>
<span id="span"></span>
 User total usage: <span id="usertotal"> </span> 
```

查询：

```
//For select          

      function displayVals() {
      var singleValues = $("#more").val();         
      $("#span").html("<b>more addons:</b> " + 
                  singleValues);
         }

    $("select").change(displayVals);
    displayVals();
//For  checkboxes
var $cbs = $('input[name="ch1"]');
$cbs.click(function() {
    var total = 0;
    $cbs.each(function() {
        if (this.checked)
            var singleValues = $("#more").val();
            total += +this.value + singleValues;
    });
    $("#usertotal").text(total);
}); 
```

我想在用户总使用量：创建复选框的总和并加上选项的值，这样如果我选择 1 个复选框和 2 加上选项 1 我将写入用户总使用量：60 。先感谢您 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:28:33.390

请注意，对多个元素使用相同的 id 是无效的 html。使用名称属性选择复选框。单击任何复选框循环遍历它们，并添加任何选中的值。请注意，这些值需要转换为数字，我使用一元加号运算符来完成。

```
var $cbs = $('input[name="ch1"]');

$cbs.click(function() {
    var total = 0;
    $cbs.each(function() {
        if (this.checked)
            total += +this.value;
    });
    $("#usertotal").text(total);
});​ 
```

演示：http: [//jsfiddle.net/6GX7g/](http://jsfiddle.net/6GX7g/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:28:35.013

```
try it:

$('input:checkbox').change(function(){ 
var tot=0;
$('input:checkbox:checked').each(function(){
tot+=parseInt($(this).val());
});
$('#usertotal').html(tot)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:31:30.943

**工作演示：http:** [//jsfiddle.net/GNDAG/](http://jsfiddle.net/GNDAG/)

希望能帮助到你。`each` [您可以在此处](http://api.jquery.com/each/)阅读更多信息。

但是，就像@nnnnnn 提到的那样，您的 html 不正确 - ID 属性必须是唯一的。

**代码**

```
$('input[type="checkbox"]').change(function() {
   var total_span = 0;
    $('input[type="checkbox"]').each(function() {
        if ($(this).is(':checked')) {
            total_span += parseInt($(this).prop('value'), 10);
        }
    });

    $("#usertotal").html(total_span);
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:55:37.993

干得好：

[工作演示 jsfiddle](http://jsfiddle.net/5TvEc/4/)

HTML：

```
<div id="container"><h1>Add-ons</h1>
<input type="checkbox" class="numbers" name="ch1" value="10" id="qr1" />Add-on Number 1 - 10 QR <br />
<input type="checkbox" class="numbers" name="ch1" value="20" id="qr1" />Add-on Number 2 - 20 QR <br />
<input type="checkbox" class="numbers" name="ch1" value="40" id="qr1" />Add-on Number 3 - 40 QR <br />
<input type="checkbox" class="numbers" name="ch1" value="60" id="qr1" />Add-on Number 4 - 60 QR <br />
</div>
User total usage: <span id="usertotal"> </span> 
```

jQuery/javascript：

```
 var getCheckedBoxValues = function() {
   var values = []
   $(".numbers:checked").each(function() {
       values.push($(this).val());
   });
   return values;
   };
    $('.numbers').click(function () {
   $('#usertotal').html();        
   var usertotal = 0;                
   var values = getCheckedBoxValues();
    for(i = 0; i < values.length; i++) {
        usertotal += parseInt(values[i]);
    }
    $('#usertotal').html(usertotal);
  }); 
```

# c# - 无法从 C# 访问 Appcelerator 云服务

> ID：12063245
> 
> 赞同：1
> 
> 时间：2012-08-21T21:22:47.560
> 
> 标签：c#, rest, cloud, appcelerator

我正在尝试从用 C# 制作的应用程序连接到 ACS，首先我尝试登录但无法连接，而是收到以下错误消息：`The remote server returned an error: (406) Not Acceptable`. 这是我的代码：

```
 private void btnLogin_Click(object sender, EventArgs e)
    {
        String url = "https://api.cloud.appcelerator.com/v1/users/login.json?key=esfob3KF1R2zBRh8vroMQCCMlQCP44xx&login=prueba123@mail.com&password=" + txtClave.Text;

        WebRequest wrGetUrl = WebRequest.Create(url);

        Stream objStream = wrGetUrl.GetResponse().GetResponseStream(); //I get the error in this line
        StreamReader reader = new StreamReader(objStream);

        String line = reader.ReadToEnd();

        MessageBox.Show(line);
    } 
```

我可以进行查询，但对于那些我不需要登录的人，在我正在工作的应用程序中，我还必须创建`Photos`和`Custom Objects`. 有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:36:51.703

根据[文档](http://cloud.appcelerator.com/docs/api/v1/users/login)，您需要使用`POST`该调用的方法：

```
wrGetUrl.Method = "POST"; 
```

# php - 创建缩略图后更改图像名称

> ID：12063258
> 
> 赞同：-1
> 
> 时间：2012-08-21T21:23:39.743
> 
> 标签：php

我这里有这个代码，它输出给我一个图像。我需要改变它，因为目前它给了我类似的东西：test.jpg，我需要的是它给我 test_s.jpg

你能指导我怎么做吗？

谢谢！

```
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetPath =  str_replace('//','/',$targetPath);
$targetFile =  $targetPath . $_FILES['Filedata']['name']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:25:24.733

PHP 的[重命名](http://php.net/manual/en/function.rename.php)功能应该做你想做的事。

# python - 使用 pip 安装 Tablib 库后，某些方法不可用

> ID：12063261
> 
> 赞同：0
> 
> 时间：2012-08-21T21:23:44.397
> 
> 标签：python, pip

根据[Tablib 文档](http://docs.python-tablib.org/en/latest/api/#dataset-object)，0.9.11 版本应该有一个`get_col(index)`方法`Dataset`

但是，当我使用 pip 安装 Tablib 时，此方法和其他方法不可用。

例如`core.py`，在来自 pypi 的[tablib-0.9.11.tar.gz](http://pypi.python.org/packages/source/t/tablib/tablib-0.9.11.tar.gz#md5=72ebb27dd1d2476d358dfc75fc90dc8f)中没有`get_col()`方法，而[`core.py`来自 Github](https://github.com/kennethreitz/tablib/blob/develop/tablib/core.py)（开发分支）有方法，尽管这两个文件都是`__version__ = '0.9.11'`

我是 Python 环境的新手，所以如果有人能指出我所缺少的，我将不胜感激。

**编辑：**

刚看到[`core.py`Github Master 分支](https://github.com/kennethreitz/tablib/blob/master/tablib/core.py)上没有这个`get_cols()`方法。所以，我想我的新问题是：

*   我喜欢 pip 的便利性；无论如何，我可以使用 pip 获得 Tablib 0.9.11 的“最新”版本吗？
*   如果没有，最简单的方法是在没有 pip 的情况下安装 Tablib，因为[我也遇到](https://github.com/kennethreitz/tablib/issues/52)了最新的 Github 版本的问题？

版本：

*   Python 2.7.1
*   Ubuntu 11.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T21:13:27.513

Github 将为您提供具有正确 URL 的任何分支的压缩版本。Pip 可以使用该 URL 直接安装。

URL结构是

```
https://github.com/{username}/{projectname}/archive/{branchname}.{file_extention} 
```

安装最新的主

```
pip install https://github.com/kennethreitz/tablib/archive/master.tar.gz 
```

安装最新的开发

```
pip install https://github.com/kennethreitz/tablib/archive/develop.tar.gz 
```

# python - 在限制内使用 numpy fmin 获取函数的最小值

> ID：12063262
> 
> 赞同：1
> 
> 时间：2012-08-21T21:23:44.983
> 
> 标签：python, numpy, minimize, curve-fitting

我需要限制某些数据的最小化（即，以便我获得一定范围内的最小值）。目前我只能得到所有空间的最小值。例如，如果手头问题的有效可能答案仅在 -5<=x<=5 范围内，那么让 fmin 告诉我函数的最小值在 -10505 是没有用的。我需要将可能的输出限制在问题范围内。

```
 p = [0,0,0]
        fit_quad = lambda p,w: p[2]*w**2 + p[1]*w + p[0]
        errfunc = lambda p,l,w: fit_quad(p,w) - l
        fit, success = leastsq(errfunc, p, args=(y,x), maxfev=5000) #x and y are the input datasets
        #find the minimum tilt
        quad = lambda w,p: p[2]*w**2 + p[1]*w + p[0]
        min_tilt = fmin(quad, 0.0, args=([fit]))[0]
        #check for range violations
        if min_tilt < min_angle #the minimum on the quadratic can sometimes end up negative, especially if there are not enough good points
            min_tilt = 0.0
        elif min_tilt > max_angle: #if things are extremely tilted the minimum of the fit quadratic can end up unrealistically high. This pulls it back.
            min_tilt = max_angle 
```

请注意，仅像上面那样为上面或下面设置一个简单的检查是不够的。根据范围内函数的精确部分，我可能会在范围的错误一侧结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:23:00.453

使用[fmin_cobyla](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_cobyla.html)或[fmin_slsqp](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_slsqp.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T00:00:36.567

你可以过滤你的数据：

```
ll = np.array([100,20,-30,1,2,3,4,5])

min(np.array(filter(lambda x:-5 < x < 5, ll))) 
```

# javascript - 您如何在 Grunt.js 中查看多个文件，但仅在更改的文件上运行任务？

> ID：12063266
> 
> 赞同：44
> 
> 时间：2012-08-21T21:23:53.700
> 
> 标签：javascript, node.js, gruntjs

在学习如何使用[grunt](https://github.com/cowboy/grunt)时，我正在尝试制作一个简单的咖啡脚本观察器/编译器。问题是，如果我告诉`watch`任务监视几个文件，其中一个文件发生变化，它会将所有文件传递给`coffee`命令。这意味着当您更改 1 个文件时，它将重新编译与该模式匹配的*所有文件。*`src`相反，我只想重新编译与`src`模式匹配的已更改的单个文件。

这是`grunt.js`：

```
module.exports = function(grunt) {
  grunt.initConfig({
    coffee: {
      app: {
        src: ['test/cases/controller/*.coffee'],
        dest: 'tmp',
        options: {
          bare: true,
          preserve_dirs: true
        }
      }
    },
    watch: {
      files: ['<config:coffee.app.src>'],
      tasks: ['coffee:app']
    }
  });

  grunt.loadNpmTasks('grunt-coffee');
  grunt.registerTask('default', 'coffee');
}; 
```

这是使用[grunt-coffee](https://github.com/avalade/grunt-coffee)，基本上是这样的：[https](https://gist.github.com/2373159) ://gist.github.com/2373159 。

当我运行`grunt watch`并保存文件时`test/cases/controller/*.coffee`，它会编译*所有*匹配的文件（将它们放入`tmp/*`）。

您如何只使用 grunt*编译**更改**的文件？*

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T12:33:45.170

即将推出的（目前正在开发中的）v0.4.0a grunt 具有[grunt.file.watchFiles](https://github.com/cowboy/grunt/blob/devel/docs/api_file.md#gruntfilewatchfiles)对象，该对象专为此目的而设计。grunt-coffee 插件可能已经添加了对此功能的支持，我不确定。

无论哪种方式，如果您有兴趣在您的项目中尝试开发中的 grunt 版本，请查看[我何时可以使用开发中功能“X”？](https://github.com/cowboy/grunt/blob/master/docs/faq.md#when-will-i-be-able-to-use-in-development-feature-x-%E2%9A%91)常见问题解答条目。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-01T00:56:07.943

I got this working when compiling my less files. You should be able to mess with this configuration a little bit to git it working with the coffeescript plugin. The portion of interest is the `grunt.event.on('watch', ...)`. In this event handler I'm updating the `files` property in the less command to only contain the changed file.

```
path = require('path');

module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({

    pkg: grunt.file.readJSON('package.json'),

    less: {
      development: {
        options: {
          paths: ["./library/less"],
        },
        files: [
          { src: "./library/less/bootstrap.less", dest: "./library/css/bootstrap.css"},
          { src: "./library/less/app.less", dest: "./library/css/app.css"}
        ]
      }
    },

    watch: {
      styles: {
        files: "./library/less/*",
        tasks: ["less"],
        options: {
          nospawn: true,
        },
      },
    },
  });

  // Event handling
  grunt.event.on('watch', function(action, filepath){
    // Update the config to only build the changed less file.
    grunt.config(['less', 'development', 'files'], [
      {src: filepath, dest: './library/css/' + path.basename(filepath, '.less') + '.css'}
    ]);
  });

  // Load the plugins
  grunt.loadNpmTasks('grunt-contrib-less');
  grunt.loadNpmTasks('grunt-contrib-watch');

  // Tasks
  grunt.registerTask('default', ['watch']);
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-22T23:00:50.650

None of these answers worked very well for me. Here is my solution if anyone is interested (I know I'm a little late in replying to this question).

[https://gist.github.com/ryansmith94/8569178](https://gist.github.com/ryansmith94/8569178)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T22:28:09.550

在[本期](https://github.com/gruntjs/grunt-contrib-watch/issues/22#issuecomment-15871732)中，Kyle Robinson 建议使用该`watch`事件。`nospawn`设置监视任务属性以`true`使其工作非常重要。我修改了他的解决方案以选择性地运行任务：

```
grunt.event.on('watch', function(action, filepath) {
    if (minimatch(filepath, grunt.config('watch.stylesheets.files'))) {
        grunt.config('compass.dist.options.specify', [filepath]);
    }

    if (minimatch(filepath, grunt.config('watch.scripts.files'))) {
        var uglifySrc = filepath.replace(grunt.config('uglify.dist.cwd'), '');
        grunt.config('jshint.dist.src', [filepath]);
        grunt.config('uglify.dist.src', [uglifySrc]);
    }
}); 
```

这是完整的解决方案：[https ://gist.github.com/luissquall/5408257](https://gist.github.com/luissquall/5408257)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-22T09:27:07.660

[https://github.com/tschaub/grunt-newer](https://github.com/tschaub/grunt-newer)看起来与类似的任务完全一样：

> 将 Grunt 任务配置为仅使用较新的文件运行。
> 
> 概要：较新的任务将配置另一个任务以使用 src 文件运行，这些文件 a) 比 dest 文件新或 b) 比上次成功运行（如果没有 dest 文件）新。有关示例和更多详细信息，请参见下文。

您可以轻松地为任何任务添加前缀。在你的情况下：

```
 grunt.loadNpmTasks('grunt-newer');
  grunt.registerTask('default', 'newer:coffee'); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-19T13:33:54.713

所以 Grunt 0.4 的新功能是更多的命名任务

让我们给你一个例子！

```
watch: {
    package1: {
        files: [
            './modules/package1/**/*.coffee'
        ],
        tasks: ['coffee:package3']
    },
    package2: {
        files: [
            './test_packages/package2/**/*.coffee'
        ],
        tasks: ['coffee:package3']
    },
    package3: {
        files: [
            './test_packages/package3/**/*.coffee'
        ],
        tasks: ['coffee:package3']
    },
} 
```

要运行所有这些监视任务，只需执行 grunt.registerTask('default', ['myInitialBuild', 'watch']);

`myInitialBuild`初始构建（所有文件）在哪里，然后在每个包上监视它。实际上，您可以对每个文件都这样做，但这听起来很糟糕。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-12T07:58:58.163

任务 grunt-contrib-watch 现在支持这一点。

[https://npmjs.org/package/grunt-contrib-watch](https://npmjs.org/package/grunt-contrib-watch) -> 查找“按需编译文件”

```
grunt.initConfig({
  watch: {
    scripts: {
      files: ['lib/*.js'],
      tasks: ['jshint'],
      options: {
        nospawn: true,
      },
    },
  },
  jshint: {
    all: ['lib/*.js'],
  },
});

// on watch events configure jshint:all to only run on changed file
grunt.event.on('watch', function(action, filepath) {
  grunt.config(['jshint', 'all'], filepath);
}); 
```

这应该可以防止任务在每次发生更改时编译所有文件。

# jquery - 超链接单击重定向到主页并滑动 div

> ID：12063268
> 
> 赞同：1
> 
> 时间：2012-08-21T21:23:59.947
> 
> 标签：jquery, hyperlink, navigation

我是否遗漏了某些内容或使用错误的术语进行搜索，但我无法自己解决这个问题。如标题中所述，单击 navLink 应该返回首页，但也可以滑动切换幻灯片 2 并为网站设置动画。以下代码重新加载主页，但回调被覆盖或在此上下文中完全错误，因为切换和动画代码在其他上下文中工作。

帮助将不胜感激

```
function goHome(callback) { 
window.location = $("#navLink").find("a").attr("href");
callback() 
} 

function changeHome(){
$("#slide-2 h2").next(".portNav").slideToggle(800);
$("html, body").animate({scrollTop:$(this).offset().top}, 'medium');
}

$("#navLink").click(function(event){
event.preventDefault();
goHome(changeHome)
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:26:46.113

您正在更改文档位置，加载新页面，并且 javacript 将再次加载，并且您的回调将永远不会在您离开页面时执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:34:27.320

您在这里有 2 个选项来实现您所需要的

1-**查询字符串**

您可以使用查询字符串来确定此负载是来自您的链接还是来自正常的链接，如下所示：

```
$(function(){
 $('#redirect').click(function(){
   window.location = 'YOUR_HOME_DOCUMENT?lnk=1';
 });
}); 
```

然后在您的主页 ready() 函数中，检查此查询字符串是否存在（如果提供），然后为您想要的任何内容设置动画。

**例子：**

1-首先，为了轻松读取 Querystring 变量，我总是使用以下 jQuery 插件。（我不记得我从哪里得到这个代码，但非常感谢原始海报）。

```
$.extend({
    getUrlVars: function () {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    },
    getUrlVar: function (name) {
        if ($.getUrlVars()[name] == null) {
            return "";
        }
        else {
            return $.getUrlVars()[name];
        }
    }
}); 
```

然后，我可以做这样的事情：

```
$(function (){ // a short hand for $(document).ready(function)  ;)

var comingFromMyLink = $.getUrlVar('lnk');

if(comingFromMyLink)
{
     // do the required animation here
}

}); 
```

2-**饼干**

*对于这种情况，我真的不推荐这个选项，但老实说，我想为你提供尽可能多的信息，你可以选择任何你认为合适的东西。*

您可以在 cookie 中保留标志或变量，并尝试在您的主页中获取它

签出此示例：http: [//jquery-howto.blogspot.com/2010/09/jquery-cookies-getsetdelete-plugin.html](http://jquery-howto.blogspot.com/2010/09/jquery-cookies-getsetdelete-plugin.html)

或这个插件： http: [//archive.plugins.jquery.com/project/Cookie](http://archive.plugins.jquery.com/project/Cookie)

就是这样，如果您仍然需要这种方式的帮助，请告诉我，希望您发现我的回答对您有用:)

# r - 使用 Hotelling 的 T2 作为置信区间的 R PCA 图

> ID：12063270
> 
> 赞同：2
> 
> 时间：2012-08-18T09:21:00.783
> 
> 标签：r, confidence-interval, pca

`prcomp`对于我的测试数据，我使用该函数计算了前两个主成分。然后我使用 plot 函数绘制了前 2 个分量。

```
df <- data.frame(x1 = runif(10), x2 = runif(10), x3 = runif(10), x4 = runif(10))
rownames(df) <- letters[1:10]

res <- prcomp(df, center = TRUE, scale = TRUE, na.action = na.omit)

plot(res$x, xlim = c(-5, 5), ylim = c(-5, 5)) 
```

我现在想使用 Hotelling 的 T2 统计量在表示 95% 置信区间的数据周围放置一个椭圆。

包`SensoMineR`特别是`panellipse`功能似乎是我正在寻找的。但是，我的 R 知识仍然非常有限，因此我想知道您是否可以为我指出正确的方向来构建这样的置信区间。

非常感谢！杰基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:01:14.870

# r - R 的 clogit（生存包）函数如何处理不完整的组？

> ID：12063276
> 
> 赞同：1
> 
> 时间：2012-08-21T18:42:48.180
> 
> 标签：r

我已经匹配了案例控制数据 - 1 个案例与两个控件匹配。我的 N 是 ~ 580，我有 168 个匹配组。这些组中约有 14 个缺少 1-2 名成员，缺少病例和/或对照。我一直在试图弄清楚 R 的 clogit 函数（来自 Survival 包）如何处理这些缺失的组（如果有的话），但没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T23:17:51.827

`clogit`实际上重新构建了问题以适应 coxph 中的推理引擎，并且该算法可以处理每个层的不同数量的案例和控件。代码包括构造一个新`coxph`公式的这一行：

```
newformula[[2]] <- substitute(Surv(rep(1, nn), case), list(case = formula[[2]], 
        nn = nrows)) 
```

# google-maps - 拖动时标记在 IExplorer 上重复

> ID：12063277
> 
> 赞同：0
> 
> 时间：2012-08-21T21:24:39.290
> 
> 标签：google-maps, google-maps-api-3

了解 Google Maps APIv3 的工作原理，我使用一个示例来隐藏地图上的标记（[https://developers.google.com/maps/documentation/javascript/examples/overlay-remove](https://developers.google.com/maps/documentation/javascript/examples/overlay-remove)），所以我尝试添加可拖动的属性，但是在 IExplorer 9 上，当标记移动到另一个地方时，它会在后面生成另一个标记，我不想要它，关于发生了什么的一些想法？

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <style type="text/css">  
      html { height: 100% }  
      body { height: 100%; margin: 0px; padding: 0px }  
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
    <script>
      var map;
      var markers = [];

      function initialize() {
        var haightAshbury = new google.maps.LatLng(23.886419417295673, -101.86367187500001);
        var mapOptions = {
          zoom: 5,
          center: haightAshbury,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);

        google.maps.event.addListener(map, 'click', function(event) {
          addMarker(event.latLng);
        });
      }
      // Add a marker to the map and push to the array.
      function addMarker(location) {
        marker = new google.maps.Marker({
          'position': location,
          'draggable':true,     ////// HERE /////
          map: map
        });
        markers.push(marker);
        }

      // Sets the map on all markers in the array.
      function setAllMap(map) {
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(map);
        }
      }

      // Removes the overlays from the map, but keeps them in the array.
      function clearOverlays() {
        setAllMap(null);
      }

      // Shows any overlays currently in the array.
      function showOverlays() {
        setAllMap(map);
      }

      // Deletes all markers in the array by removing references to them.
      function deleteOverlays() {
        clearOverlays();
        markers = [];
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:39:27.053

感谢您的关注，我将整个代码复制到一个新文件中并且可以正常工作，我猜原始文件中有一些奇怪的东西。

也许问题出在我一直在使用的钥匙上，我改变了它，一切都变得更好了。

# php - 将特殊的 HTML 字符转换回其原始字符串

> ID：12063278
> 
> 赞同：1
> 
> 时间：2012-08-21T21:24:47.463
> 
> 标签：php, html, htmlspecialchars

我正在构建一个小型解析器，用于抓取网页并在其上记录数据。要记录的一件事是论坛的帖子标题。我正在使用 XML 解析器来查看 DOM 并获取此信息，并且我将其存储如下：

```
// Strip out the post's title
$title = $page->find('a[rel=bookmark]', 0);
$title = htmlspecialchars_decode(html_entity_decode(trim($title->plaintext))); 
```

这在大多数情况下都有效，但有些帖子有某些特殊的 HTML 字符代码`&#8211;`，例如破折号 ( `-`)。我将如何将这些特殊字符代码转换回其原始字符串？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:39:24.053

使用[html_entity_decode](http://php.net/manual/en/function.html-entity-decode.php)。这是一个简单的例子。

```
$string = "hyphenated&#8211words";

$new = html_entity_decode($string);

echo $new; 
```

你应该看到...

```
hyphenated–words 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:26:28.027

[文档](http://php.net/manual/en/function.html-entity-decode.php)是你的朋友：

```
html_entity_decode(trim($title->plaintext), ENT_XHTML, YOUR_ENCODING);
                                            ^^^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:34:43.983

这可能会有所帮助：

```
<?php
 function clean_up($str){
 $str = stripslashes($str);
 $str = strtr($str, get_html_translation_table(HTML_ENTITIES));
 $str = str_replace( array("\x82", "\x84", "\x85", "\x91", "\x92", "\x93", "\x94", "\x95", "\x96",  "\x97"), array("&#8218;", "&#8222;", "&#8230;", "&#8216;", "&#8217;", "&#8220;", "&#8221;", "&#8226;", "&#8211;", "&#8212;"),$str);
return $str;
}
?> 
```

# javascript - 无法使用 JavaScript 从 iTextSharp 访问 PDF 文档页面/事件

> ID：12063286
> 
> 赞同：0
> 
> 时间：2012-08-21T21:25:19.200
> 
> 标签：javascript, pdf, itextsharp, livecycle

理想情况下，我正在尝试使用 iTextSharp 触发 PDF 中的事件。如果做不到这一点，我想知道我是否可以触发一个功能。

基本上，我只是想通过 javascript 获取文档的句柄。

这适用于PDF

（使用 LiveCycle）：

```
eApp.Page1.FormPurpose_PolicyNumber::click - 
```

（JavaScript，客户端）

```
this.rawValue = "hello"; 
```

`eApp`在这种情况下，从 C# 中我无法处理文档。

```
var reader = new PdfReader(pdfFileStream);
var writer = new PdfStamper(reader, outputStream); 
```

这工作：（应用程序对象）

```
PdfAction js =
    PdfAction.JavaScript(
        "app.alert('hello');",
        writer.Writer);

writer.Writer.AddJavaScript(js); 
```

这不会：

```
PdfAction js =
    PdfAction.JavaScript(
        "eApp.Page1.FormPurpose_PolicyNumber.execEvent('click');",
        writer.Writer);

writer.Writer.AddJavaScript(js); 
```

也不起作用：

```
PdfAction js =
    PdfAction.JavaScript(
        "eApp.Page1.FormPurpose_PolicyNumber.rawValue= 'hello'",
        writer.Writer);

writer.Writer.AddJavaScript(js); 
```

我一直在寻找高低的答案，但一直找不到，是的，有类似的问题，但要么没有答案，要么与我正在做的非常不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:33:09.397

根据您的最新评论 - 那行不通。iTextSharp 只会将一些脚本添加到文档中。该脚本将在某些客户端应用程序中启动，例如 Adob​​e Reader。它不会在您的文档中执行任何脚本。假设在您的情况下，使用 c# 对文档执行您想要的操作会更容易，而不是在将表单展平设置为 true 的情况下保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T10:51:11.400

在我的情况下，工作解决方案是：

```
PdfReader reader = new PdfReader(this.pathToPDFTemplate);
...
PdfStamper stamper = new PdfStamper(reader, stream);
...
PdfAction action = PdfAction.JavaScript("this.xfa.form.form1.DesignArea.sfPart3.sfPart3_5.ck2.presence = 'hidden';", stamper.Writer);
stamper.Writer.SetAdditionalAction(PdfWriter.WILL_PRINT, action);
... 
```

诀窍是使用this.xfa.form。在您前往该领域的道路之前。

# java - 如何在Java中将静态类作为参数传递

> ID：12063292
> 
> 赞同：12
> 
> 时间：2012-08-21T21:25:37.797
> 
> 标签：java, design-patterns

我有一个名为“Entity”的基类，它有一个名为“construct”的静态方法，它返回一个实体实例。我有这个类的几个不同的子类（为了演示假设我们有“水果”和“蔬菜”作为子类）。我希望能够按照以下方式做一些事情：

```
Entity a = someFunction(Fruit, textfile) 
```

someFunction 然后将 textfile 传递给 Fruit.construct 并返回生成的实体。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T21:30:01.023

请改用[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。
将文本文件传递给工厂方法，该方法将使用它返回正确的具体实例`Entity`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T21:34:44.363

你的意思是这样的：

```
public <T> T someFunction(Class<T> clazz, String textFile) throws Throwable {
 return clazz.newInstance();
} 
```

上面的代码将使用类的无参数构造函数（假设有一个）。

如果您的类需要使用特定的构造函数进行实例化，您可以按照以下示例进行操作：

```
public <T> T someFunction(Class<T> clazz, String textFile) throws Throwable {
  // Here I am assuming the the clazz Class has a constructor that takes a String as argument.
  Constructor<T> constructor = clazz.getConstructor(new Class[]{String.class});
  T obj = constructor.newInstance(textFile);
  return obj;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T21:28:58.710

传递`Fruit.class`给函数，然后对该类对象使用反射来调用正确的构造函数。请注意，这将通过要求该构造函数存在来将您的超类与其子类紧密耦合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T21:30:49.330

`Fruit`在您的示例中是一种类型，虽然`Fruit.eat()`可能指的是静态方法，`Fruit`但不是“静态类”。

有一个“类对象”，它实际上是一个`Object`代表*类*的对象。而是通过它。为此，`Fruit.class`使用了它们的语法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T21:36:34.873

您正在尝试使用过程代码实现面向对象的设计模式[Strategy](http://en.wikipedia.org/wiki/Strategy_pattern)。不要这样做。

相反，创建一个名为 的接口`EntityConstructor`，它定义了方法`construct()`。制作`Fruit`并`Vegetable`实现该接口。然后更改`someFunction()`以获取该接口的实例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T21:45:52.453

这是一个实现：

```
public <T extends Entity> T someMethod(Class<T> entityClass, File file) throws InstantiationException, IllegalAccessException {
        T newEntity = entityClass.newInstance();
        // do something with file
        // ...
        return newEntity;
    } 
```

你应该看看

*   内省：[http](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance) ://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance ()
*   泛型：[http ://docs.oracle.com/javase/1.5.0/docs/guide/language/generics.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/generics.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T21:30:07.967

静态方法本身不是继承的，因为如果您的代码具有 Entity.construct(...) 它不会动态地将其链接到子类。

完成您所要求的最佳方法是使用反射来调用 Fruit 类（或传递给 someFunction() 方法的任何类）上的构造方法。

# python - 从自定义模板标签传递表单

> ID：12063296
> 
> 赞同：0
> 
> 时间：2012-08-21T21:26:07.157
> 
> 标签：python, django, django-templates

我正在尝试检查用户是否正在参加活动列表中的活动。如果他们是，很酷：说他们已经“注册”。如果没有，请将注册表单放入模板中。

```
from django.core.context_processors import csrf

@register.simple_tag(takes_context=True)
def user_is_attending(context, event):
    request = context['request']
    profile = Profile.objects.get(user=request.user)
    attendees = [a.profile for a in Attendee.objects.filter(event=event)]
    if profile in attendees:
        return "<a href='#' class='button'>Thanks for Registering!</a>"
    else:
        return "<form method='POST' action='/event/{{ event.id }}/register/'><input type='hidden' name='csrfmiddlewaretoken' value='{% with csrf_token as csrf_token_clean %}{{ csrf_token_clean }}{% endwith %}' ><input type='hidden' name='username' value='{{ request.user.username }}' /><button class='btn' type='submit'><div class='timeleft'>{{ event.date|timeuntil|split_timeuntil|safe }} left</div><div class='register-text'>Register<br/><span>for this Event</span></div></button></form>"
     # I apologize for the lengthy form 
```

模板标签有效（它正确检查）。但是，它返回：

*   `event.date|timeuntil|split_timeuntil|safe left | Register for this event`应为字符串：“还剩 4 天| 注册此活动”

和

*   我得到一个`CSRF verification failed. Request aborted`错误。由于它没有正确通过？

那么我的选择是什么？我可以通过自定义模板标签传递表单吗？在这种情况下，我真的没有使用 django 表单，因为它实际上只是一个按钮。

提前感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:33:56.490

简单的标签不会被解析为模板。您应该使用包含标记，并将 HTML（加上 if/else 逻辑）放在单独的模板中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:39:31.810

你确定你需要标签吗？尝试像这样将逻辑放入您的模板中（未经测试）

```
{if profile in attendees}
    <a href='#' class='button'>Thanks for Registering!</a>
{else}
    <form> ...></form>
{endif} 
```

# c# - 从 VBA 调用 C# 类

> ID：12063299
> 
> 赞同：0
> 
> 时间：2012-08-21T21:26:11.303
> 
> 标签：c#, vba

请问有人能告诉我我的代码有什么问题吗？

C＃：

```
namespace ComMsg
{
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IM
{
    [DispId(1)]
    event M.MHandler OnMSend;
}

[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IMEvents
{
    [DispId(2)]
    void sendM(M.Process status, string msg);
}

[ComSourceInterfaces(typeof(IM), typeof(IMEvents))]
[ClassInterface(ClassInterfaceType.None)]
public class Message : IM
{
    public enum Process { Error, Complete }

    public delegate void MHandler(Process status, string msg);
    public event MHandler OnMSend;

    public void sendM(Process status, string msg)
    {
        if (OnMSend != null)
            OnMSend(status, msg);
    }
}
} 
```

我从我的 VBA 代码中调用它

```
Private WithEvents moCom     As ComMsg.M

Public Function Run() As Boolean
Set moCom = New ComMsg.M 
```

它失败了

> 新的 ComMsg.Message

我收到一条错误消息

> “对象或类不支持事件集”

请帮助解决此问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:37:42.980

看起来您缺少很多实现 COM 互操作所需的设置。建议的重复链接解决了类似的问题。

可能还值得查看[此处](http://msdn.microsoft.com/en-us/library/c3fd4a20.aspx)的 MSDN Com 互操作示例，了解使用 COM 互操作所需包含的所有各种设置。

# mysql - 获取预定节目的节目类型列表

> ID：12063302
> 
> 赞同：0
> 
> 时间：2012-08-21T21:26:28.663
> 
> 标签：mysql, sql

我继承了以下数据库和以下查询，这些查询提取了这些程序有订阅者的程序名称。

```
SELECT DISTINCT label 
FROM program 
  WHERE EXISTS (
        SELECT occurrence.uuid
        FROM    booking
        INNER JOIN enrolment on enrolment.booking = booking.uuid
        INNER JOIN occurrence on occurrence.id = enrolment.occurrence 
        AND occurrence.programme = programme.uuid
        AND booking.status IN ('completed','booked')
      ) 
```

以下是简化的相关表格。

每个程序都有一个 programType。对于所有预订的节目，我需要修改上述查询以从 ProgramType 而不是 Program 中获取标签。

```
**Program**

ID    UUID                                 Label     ProgramType  
---------------------------------------------------------------------------------
12    04FE546E-DD70-AAA3-2DB0DB3246790967  Prog1    8BA7E719-19B9-EFA7-D6937B42D3A4A056
32    04FE54FD-E8C5-9B02-2A08BBC22E630F09  Prog2    6EA6CB18-0E3F-360F-8BA8468E406C1EAB

**ProgramType**

ID                                   Label        
------------------------------------------
8BA7E719-19B9-EFA7-D6937B42D3A4A056  Type1  
6EA6CB18-0E3F-360F-8BA8468E406C1EAB  Type2  

**Booking**

UUID                                 Label           Occurrence  Status
------------------------------------------------------------------------
102B22F0-19B9-EFA7-D66E9E6746B5CC64  Booking1        73          Completed
C8930CB4-19B9-EFA7-D6A15045AFF02FA4  Booking2        15          Booked

**Occurrence**
(One program can have different dates etc)

ID    UUID                                 Program                              StartDate
-------------------------------------------------------------------------------------------
73    102B22F0-19B9-EFA7-D66E9E6746B5CC64  8BA7E719-19B9-EFA7-D6937B42D3A4A056  2010-11-05
15    C8930CB4-19B9-EFA7-D6A15045AFF02FA4  8BA7E719-19B9-EFA7-D6937B42D3A4A056  2010-11-12

**Enrolment**
(Fully enrolled once paid)

ID    UUID                                 Program                              PaymentID
-------------------------------------------------------------------------------------------
73    31D5680F-00EF-349C-E00F8A425EF531E3  31E84300-D8EB-4E9C-9CD8F87B47CABD84  100027
15    31E8543A-A810-DB22-C5EE25B8FF8BE3CA  31F2F89C-A88B-3B2C-53995F03C8276C5A  100029 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:46:28.490

您可以通过向查询添加联接来执行此操作：

```
SELECT DISTINCT ProgramType.label
FROM program join
     programType
     on program.ProgramType = ProgramType.Id
WHERE EXISTS (SELECT occurrence.uuid
              FROM booking INNER JOIN
                   enrolment
                   on enrolment.booking = booking.uuid  INNER JOIN
                   occurrence
                   on occurrence.id = enrolment.occurrence AND
                      occurrence.programme = programme.uuid AND
                      booking.status IN ('completed','booked')
             ) 
```

# jquery - JQGrid 版本 >= 4.3.2 级联下拉列表的新事件？

> ID：12063313
> 
> 赞同：0
> 
> 时间：2012-08-21T21:27:39.930
> 
> 标签：jquery, asp.net, jqgrid, asp.net-mvc-4, cascadingdropdown

我正在使用 ASP.NET 4.0 MVC 4，我的任务是创建一个数据绑定 JQGrid，并在每条记录上进行级联下拉选择。我看到了几个这样的例子，但在当前版本的 JQGrid 4.4.0 中没有一个，而且我无法让现有的例子工作。4.3.2 中发布了一[组全新的事件](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents#list_of_triggered_events_new_in_v4.3.2)，但据我所知，它们还没有很好的记录。

即使我只使用警报存根，我的 dataEvents 也没有工作。我还看到有一个 JQuery Cell Edit 模块可能会有所帮助，但它非常有问题。

我已经尝试了几个小时来搜索网络，并最终决定在这里请求一个更新的示例。我发现的最新版本是流行的[http://www.ok-soft-gmbh.com/jqGrid/EditWithDependendSelects.htm](http://www.ok-soft-gmbh.com/jqGrid/EditWithDependendSelects.htm)，它使用版本 4.1.1。

谢谢

# c# - 将 Stream 转换为 Song 类？

> ID：12063315
> 
> 赞同：0
> 
> 时间：2012-08-21T21:27:50.740
> 
> 标签：c#, xna, stream, mp3, media-player

我正在尝试从对话框中打开一个文件，然后在 XNA 中使用 MediaPlayer 播放它，但是，我的打开器将文件作为 Stream 类打开，我不知道如何将它转换为 Song 类，所以我可以用 MediaPlayer 播放，有帮助吗？

```
Stream myStream = null;
OpenFileDialog openFileDialog1 = new OpenFileDialog();

openFileDialog1.InitialDirectory = "c:\\";
openFileDialog1.Filter = "mp3 files (*.mp3)|*.mp3|All files (*.*)|*.*";
openFileDialog1.FilterIndex = 2;
openFileDialog1.RestoreDirectory = true;

if (openFileDialog1.ShowDialog() == DialogResult.OK) {
    try {
        if ((myStream = openFileDialog1.OpenFile()) != null) {
            using (myStream) {

            }
        }
    } catch (Exception ex) {
        MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:51:18.940

他们的 API 似乎提供[对资源的只读访问](http://msdn.microsoft.com/en-us/library/dd254868)。更多微软“安全”和“安全”问题（翻译、DRM 和开放访问问题。）

简短的回答，看起来你不能只使用他们的 API。

在代码中，一切皆有可能。您可以这样做...但您可能必须实现一个[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)，该适配器将转到他们记录的 API。由于 Song 是密封的而不是接口，因此他们显然试图成为专有产品并阻止您这样做。[使用.NET Reflector](http://www.reflector.net/)可以轻松处理，但这会变得很痛苦。您必须定义自己的接口并在两者之间进行转换。当他们更改其内部结构时，您的代码将中断，您必须弄清楚如何写入 MediaLibrary 以及所有这些。

基本上，如果你不知道自己在做什么，你可能做不到。如果你这样做了，这可能是一个巨大的痛苦。如果您可以找到另一个库（例如，您的目标是 Windows 桌面），那么您最好朝那个方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:58:39.457

你不能那样做。XNA 将音乐播放交给内部媒体播放器组件。它无法从 a 加载音乐`Stream`（如果我不得不猜测，它可能实现了自己的流媒体）。它*可以*做的是加载一个音乐文件，给定一个文件名。

你可以这样做：

```
Song mySong = Song.FromUri(@"file:///" + openFileDialog1.FileName); 
```

值得指出的是，如果文件路径包含空格，则存在已知错误。但是您可以使用一种内部方法，它直接采用文件名并且不会显示错误 - 我在[这个答案](https://stackoverflow.com/a/5829463/165500)中讨论了如何使用它。这是：

```
internal Song(string name, string filename, int duration); 
```

值得指出的是，这与内容管道所做的几乎相同。如果你查看`.xnb`它为一首歌曲生成的文件，它很小——只有几个字节。它所包含的只是要加载的歌曲的文件名。歌曲文件本身只是单独复制。

# php - 错误 1054，无法识别第一个选择列

> ID：12063318
> 
> 赞同：1
> 
> 时间：2012-08-21T21:28:20.700
> 
> 标签：php, mysql

我正在编写一个 mySQL 数据库的 php 页面，并且该表完全由我试图在网站上查看的所有列构建，但我的 select 语句返回错误。它不会识别我输入的第一列。我已经删除了“姓氏”搜索，并以“名字”开头并遇到了同样的问题。在此表的另一种用途中，我也无法在第一列中输入内容。我的陈述是错误的还是什么？

我正在使用带有此代码的通用函数 php：

```
function connectDatabase() {
    require('../DBtest.php');

    $host     = 'localhost';
    $userid   = '7an7';
    $password = '7dl7';

    $db = mysql_perry_pconnect($host, $userid, $password);

    if (!$db) {
        print "<h1>Unable to Connect to MySQL</h1>";
        exit;
    }

    $dbname = '7phpmysql7';
    $dbtest = mysql_perry_select_db($dbname);

    if (!$dbtest) {
        print "<h1>Unable to Select the Database</h1>";
    }

    return $db;
}

function selectResults($statement) {

    $output      = "";
    $outputArray = array();

    $db = connectDatabase();

    if ($db) {
        $result = mysql_query($statement);

        if (!$result) {
            $output .= "ERROR";
            $output .= "<br /><font color=red>MySQL No: " . mysql_errno();
            $output .= "<br />MySQL Error: " . mysql_error();
            $output .= "<br />SQL Statement: " . $statement;
            $output .= "<br />MySQL Affected Rows: " . mysql_affected_rows() . "</font><br />";

            array_push($outputArray, $output);
        } else {

            $numresults = mysql_num_rows($result);

            array_push($outputArray, $numresults);

            for ($i = 0; $i < $numresults; $i++) {
                $row = mysql_fetch_array($result);

                array_push($outputArray, $row);
            }
        }
    } else {

        array_push($outputArray, 'ERROR-No DB Connection');
    }

    return $outputArray;
} 
```

然后使用通用功能的本地代码是：

```
<?php
include "king_common_functions.php";

viewGuestbook();

//****************************************************************
//Display Admin Guestbook Data (All Submissions)
//****************************************************************

function viewGuestbook() {
    $outputDisplay = "";
    $myrowcount    = 0;

    $statement = "SELECT lastname, firstname, contact_type, contact_info, city, comments, date_added";
    $statement .= "FROM u1585_Guestbook ";
    $statement .= "ORDER BY lastname ";

    $sqlResults = selectResults($statement);

    $error_or_rows = $sqlResults[0];

    if (substr($error_or_rows, 0, 5) == 'ERROR') {
        print "<br />Error on DB";
        print $error_or_rows;
    } else {
        $arraySize = $error_or_rows;

        for ($i = 1; $i <= $error_or_rows; $i++) {
            $lastname     = $sqlResults[$i]['lastname'];
            $firstname    = $sqlResults[$i]['firstname'];
            $contact_type = $sqlResults[$i]['contact_type'];
            $contact_info = $sqlResults[$i]['contact_info'];
            $city         = $sqlResults[$i]['city'];
            $comments     = $sqlResults[$i]['comments'];
            $date_added   = $sqlResults[$i]['date_added'];

            $outputDisplay = "<h3>View Guestbook:</h3>";
            $outputDisplay .= '<table border=1 style="color: black;">';
            $outputDisplay .= '<tr><th>Last Name</th><th>First Name</th><th>Contact Type</th><th>Contact Info</th>';
            $outputDisplay .= '<th>City</th><th>Comments</th><th>Date Added</th></tr>';

            $numresults = mysql_num_rows($sqlResults);

            for ($j = 0; $j < $numresults; $j++) {
                if (!($j % 2) == 0) {
                    $outputDisplay .= "<tr style=\"background-color: #F5DEB3;\">";
                } else {
                    $outputDisplay .= "<tr style=\"background-color: white;\">";
                }

                $myrowcount++;

                $outputDisplay .= "<td>" . $lastname . "</td>";
                $outputDisplay .= "<td>" . $firstname . "</td>";
                $outputDisplay .= "<td>" . $contact_type . "</td>";
                $outputDisplay .= "<td>" . $contact_info . "</td>";
                $outputDisplay .= "<td>" . $city . "</td>";
                $outputDisplay .= "<td>" . $comments . "</td>";
                $outputDisplay .= "<td>" . $date_added . "</td>";
                $outputDisplay .= "</tr>";
            }
        }
    }

    $outputDisplay .= "</table>";
    $outputDisplay .= "<br /><br /><b>Number of Rows in Results: $myrowcount </b><br /><br />";
    print $outputDisplay;
} 
```

这是表结构：

```
CREATE TABLE u1585_Guestbook (
    guest_id int(11) NOT NULL AUTO_INCREMENT,
    lastname varchar(40) NOT NULL,
    firstname varchar(30) NOT NULL,
    contact_type varchar(30) NOT NULL,
    contact_info varchar(40) NOT NULL,
    city varchar(40) NOT NULL,
    comments varchar(200) NOT NULL,
    date_added date NOT NULL,
    PRIMARY KEY (guest_id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:40:26.057

看看你的代码。如果您在查询时遇到问题，`echo`请将其发送到屏幕上。在您的情况下（只需查看您的代码），您传递的查询 ( `$statement`) 如下所示：

> SELECT lastname, firstname, contact_type, contact_info, city, comments, date_addedFROM u1585_Guestbook ORDER BY lastname

在 PHP 中，您可以在多行中定义一个字符串以避免此类错误。像这样：

```
<?php
.
.
.
$statement = "SELECT lastname, firstname, contact_type, contact_info, city, comments, date_added
    FROM u1585_Guestbook 
    ORDER BY lastname "; 
```

**更新：**

为了回应您在下面的评论，我建议您使用 PDO 来设置您的查询：

```
//connect to DB
$db = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);

// prepare your statement
$query = $db->prepare("INSERT INTO u1585_guestbook(lastname, firstname, contact_type, contact_info, city, comments, date_added) VALUES (?, ?, ?, ?, ?, ?, ?)");
$data = array($mylastname, $myfirstname, $mycontact_type, $mycontactinfo, $mycity, $mycomments, $mydate);

// execute your statement
$query->execute($data); 
```

[查看此概述以了解有关 PDO 的更多信息。](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)这真是太棒了。

# c - 如何解释 C 的这种行为？

> ID：12063323
> 
> 赞同：2
> 
> 时间：2012-08-21T21:28:33.577
> 
> 标签：c, recursion, decrement

所以我在 C 中玩递归，我不知道为什么会这样：
**代码 A**

```
int foo(int x)
{
 if (x==0) return 0;
 else return foo(--x)+x;
}

int main() { printf("%d\n", foo(10)); 
```

**代码 B**

```
int foo(int x)
{
 if (x==0) return 0;
 else return foo(x--)+x;
}

int main() { printf("%d\n", foo(10)); 
```

代码 A 打印 45 而不是 55，我想通了。这是因为递归调用以这种方式展开：`9+8+7+...+0 = 45`

另一方面，代码 B 被卡住并且永远不会返回提示！我必须这样`ctrl+c`做。为什么会卡住？是因为它从不超过 10 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T21:30:26.870

*这是因为在代码片段 B x 在递归调用之后*递减，所以函数总是用 foo(10) 调用

**编辑：**
正如 James McNellis 在其评论中指出的那样， x 在调用函数之前会递减，但它的原始值在调用中使用而不是递减的值。
基本上，表达式 x-- 在 foo(x--) 之前计算，但它的值实际上是 x，因此函数以 x = 10 调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:33:26.837

后减量`(x--)`等待函数调用在执行之前返回。所以你的堆栈看起来像：

```
foo(10)
foo(10)
foo(10)
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:40:54.773

表达式的值`x--`是 的当前值`x`，在存储值递减之前。因此，在调用`foo(x--)`时，参数的值`foo`始终与其当前值相同，从而产生无限递归。

* * *

但是请注意，这两个程序的行为可能是未定义的，并且取决于 和 的子表达式的求值`foo(x--) + x`顺序`foo(--x) + x`。让我们考虑第一个程序，它包含表达式

```
foo(--x) + x 
```

如果按以下（有效！）顺序评估子表达式，则程序具有未定义的行为：

1.  `x`被读取以计算 的值`x`作为 的右侧操作数`+`，

2.  `x`被读取以计算 的值`x`作为 的操作数`--`，

3.  `x`被写入以存储 的新值`x`递减后

4.  `foo`叫做

这里唯一的顺序点在第 3 步和第 4 步之间：在计算参数表达式之后，在调用函数之前。因为`x`读取两次（在 [1] 和 [2] 中）并写入一次（在 [3] 中）并且因为其中一次读取（在 [1] 中）不是为了计算要存储的新值，所以行为未定义。

评估顺序*未指定*，但如果此评估顺序是使用的顺序，则程序具有未定义的行为。

同样的推理同样适用于第二个程序。

最好`x - 1`用作 的参数`foo`，因为此表达式不会修改 的值`x`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:32:45.077

是的，它永远不会减少。

```
 else return foo(x--)+x; 
```

在调用函数的行中，使用后递减，这意味着值 10 首先传递给下一个函数，然后递减 - 这永远不会发生，因为没有函数返回

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T21:33:03.763

打电话

```
foo(--x) 
```

使用已经递减的值调用函数，而

```
foo(x--) 
```

总是用原始值（即10）调用它，所以它永远不会接近零，这就是原因。

# php - PHP注入测试用例列表

> ID：12063325
> 
> 赞同：0
> 
> 时间：2012-08-21T21:28:40.983
> 
> 标签：php, code-injection

我有一些 php 测试用例，我想相信你的话，看看这将如何成为可能的注入威胁。

```
1\. <BODY ONLOAD=alert("Oops! Huston we have a problem! X")>
2\. ±±¾©
3\. &#1575;&#1610;&#1585;&#1575;&#1606;
4\. &#1605;&#1740;&#1579;&#1605;
5\. *.doc
6\. ')++
7\. "text"
8\. test*
9\. ·ï·É·É
10\. <div>
11\. "admin" -"possible"
12\. ãÏá áÈÇÓ
13\. admin OR possible
14\. "administrator"
15\. SET PAGES
16\. result page
17\. -word
18\. public_html
19\. leave domain
20\. search results
21\. else
22\. for multiple
23\. AND or
24\. keyword="<script language=JavaScript> alert('XSS Alert');</script>" 
25\. "must not include"  
26\.     %3C%73%63%72%69%70%74%3E%61%6C%65%72%74%28%22%58%53%53%22%29%3B%3C%2F%73%63%72%69%70%74%3E  
27\. DELETE * FROM 
28\. "DELETE * FROM *"
29\. <script>alert("Oops! Huston we have a problem!");</script>  
30\. $pos = strstr(strtolower($query),"site:"; if ($pos) include     ("$include_dir/search_links.php";
31\. <a href=".httacess"><FONT FACE="arial" SIZE=50>PAREJAS FACEBOOK</FONT></a>
32\. "><script>alert("XSS")</script>
33\. (maybe must) set
34\. &lt;input name="_index_pdf" type="checkbox" value="0; system($_GET[a])" id="index_pdf" &gt; 
35\. <input name="_index_pdf" type="checkbox" value="0; system($_GET[a])" id="index_pdf" > THE NAME SHOULD BE THE SAME AS ONE OF THE FORM'S TARGETTED INPUT FIELD
36\. Options +FollowSymLinks RewriteEngine on RewriteRule seriesdetails-name-(.*)-page1-(.*).htm$ seriesdetails.php?name=$1&page1=$2 
37\. <?php session_start(); if(isset($_SESSION['id']) && !empty($_SESSION['id'])) { include("profilemenu.php"); } else { include("menu.php"); } ?>   
38\. g"><script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js" type="text/javascript"></script><script type="text/javascript">function doSubmitNow() {alert("Test.");} $(document).ready(function() {setTimeout("doSubmitNow()", 3000);});</script> 
39\. $temporizador = new temporizador (1); // Construtor inicializa o temporizador, então não é preciso sermos nós a fazê-lo /* ... mysql query ... */ $query_time = $temporizador->get(); /* ... Processar a Página... */ $tempo_processamento = $temporizador- 
40\. $crawler->addURLFollowRule("#^http://www.druckerzubehoer.de/shop/subcategory/catid/.*/subcatid/.*/site/1/lng/de_DE?shopid=a8931d4fda24240b3dab45f6b07e3f58&visitid=&refid=# i");    
41\. $pos = strstr(strtolower($query),"site:"; if ($pos) include ("$include_dir/search_links.php"; 
```

我正在使用 mysql_real_escape_string 输入数据库并使用 htmlspecialchars 输出到网页。这足以涵盖上述注射案例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:50:19.860

简而言之：

*   对于字符串总是使用`mysql_real_escape_string()`
*   对于整数总是使用`intval()`
*   为了在网页中显示数据，`htmlspecialchars()`可以解决问题，但我也总是使用`strip_tags()`

是的，如果您执行上述过滤器，您将是安全的。

# android - Android：每个 dpi 文件夹都需要一个 button.xml 文件吗？

> ID：12063327
> 
> 赞同：1
> 
> 时间：2012-08-21T21:28:53.500
> 
> 标签：android

为了在 Android 中创建自定义按钮，我创建了一个 XML 文件，在其中指定要在按钮上使用的正常图像和按下图像，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/buttonPressed" />
    <item android:drawable="@drawable/buttonNormal" />
</selector> 
```

**问题**：我将为所有 dpi 提供不同的图像（因此 ldpi、mdpi、hdpi 和 xhdpi 文件夹中的图像）。但是我是否还需要将该 XML 文件复制到每个文件夹中？

我知道使用一个按钮并没有什么不同，但是如果我不需要将 XML 文件放在所有文件夹中，那么有几十个按钮可能会为我节省很多工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T21:32:27.680

创建一个单独的可绘制文件夹`drawable`，其中包含适用于所有尺寸的 .xml，例如渐变、形状或多状态按钮。如果您有多个 dpi 的图像，android 将选择适当的一个。

例如，您的文件树可能如下所示：

> 可绘制的
> 
> --chat_button.xml
> 
> --help_button.xml
> 
> 可绘制的 hdpi
> 
> --chat_icon.png
> 
> --chat_icon_down.png
> 
> --help_icon.png
> 
> --help_icon_down.png
> 
> 可绘制的 ldpi
> 
> --chat_icon.png
> 
> --chat_icon_down.png
> 
> --help_icon.png
> 
> --help_icon_down.png
> 
> 可绘制的 mdpi
> 
> --chat_icon.png
> 
> --chat_icon_down.png
> 
> --help_icon.png
> 
> --help_icon_down.png
> 
> 可绘制的 xhdpi
> 
> --chat_icon.png
> 
> --chat_icon_down.png
> 
> --help_icon.png
> 
> --help_icon_down.png

# desire2learn - 使用 RestAPI 创建 D2L 用户时设置语言环境/语言

> ID：12063334
> 
> 赞同：1
> 
> 时间：2012-08-21T21:30:07.263
> 
> 标签：desire2learn

我们正在使用 Valence API 将 D2L 与我们的应用程序集成。由于我们的应用程序支持多种语言，我如何将用户区域设置/语言传递给 D2L LMS。根据我的发现，我在 createuser 对象或 userprofile 对象中找不到任何参数，我可以通过这些参数传递语言环境/语言信息。在创建课程时可以选择设置区域设置，但是由于（不同区域设置的）多个用户可能会使用课程，在这种情况下如何控制内容交付？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:37:25.630

不幸的是，当前的 API 不支持设置或调整用户区域设置。此差距是未来版本的候选功能。

在此期间，您也许可以添加一个发送给用户的链接，让他们更新他们的语言环境：

在 V10 上，如果您让用户点击表单的链接：

https:///d2l/lp/preferences/preferences_main/preferences_main.d2l?ou=

他们将看到允许他们设置区域设置的页面（如果他们没有当前会话，则会提示他们首先登录）。

# php - 无法在控制器操作中获得引导

> ID：12063337
> 
> 赞同：2
> 
> 时间：2012-08-21T21:30:08.353
> 
> 标签：php, zend-framework

我有一个用于 Zend Framework 的库。在其中，我拥有`Company/Controller/Action.php`所有应用程序控制器的扩展。它非常简单，只是将一些东西注入控制器（如 Doctrine 的实体管理器）。

我正在尝试使单元测试正常工作，但偶然发现了一个问题，即我无法从`Company_Controller_Action`类（扩展`Zend_Controller_Action`）中获取引导程序：

```
function preDispatch() 
{
  $bootstrap = $this->getInvokeArg('bootstrap');
} 
```

`$bootstrap`此时为空。任何人有任何想法为什么？我已经验证我的引导程序正在被调用并且我可以获取前端控制器，但我无法获取引导程序（通过 getInvokeArg 或前端控制器）。

这适用于正常的生产和开发环境。我的 application.ini 的测试部分只是继承自生产部分，所以应该是一样的。

这就是我正在做的事情`setUp()`：

```
public function setUp()
{
    $this->bootstrap = new Zend_Application(
        'testing',
        APPLICATION_PATH . '/configs/application.ini'
    );
    parent::setUp();
} 
```

我的 Bootstrap.php：

```
<?php

// Define path to application directory
defined('APPLICATION_PATH')
|| define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
|| define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'testing'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
realpath(APPLICATION_PATH . '/../library'),
get_include_path(),
)));

require_once 'Zend/Loader/Autoloader.php';
Zend_Loader_Autoloader::getInstance(); 
```

我的 phpunit.xml：

```
<phpunit bootstrap="./Bootstrap.php" colors="true">
    <testsuite name="Application Test Suite">
        <directory>./application</directory>
    </testsuite>
    <filter>
        <whitelist>
            <directory suffix=".php">../application/</directory>
            <exclude>
                <directory suffix=".php">../application/Entities</directory>
                <directory suffix=".php">../application/modules/default/views</directory>
                <file>../application/Bootstrap.php</file>
                <file>../application/modules/default/controllers/ErrorController.php</file>
            </exclude>
        </whitelist>
    </filter>
    <logging>
        <log type="coverage-html" target="./log/report" title="PrintConcept" charset="UTF-8" yui="true" highlight="true" lowUpperBound="35" highLowerBound="70" />
        <log type="testdox" target="./log/testdox.html" />
    </logging>
</phpunit> 
```

**更新：**使用上述配置， My`$bootstrap`不再为空。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T03:56:11.957

如果我记得几周前我在 Zend 错误跟踪器中看到的，这是一个错误。

这是适用于许多人的修复程序：

在 Bootstrap.php 中初始化 Front 控制器：

```
protected function _initFrontController()
{

    $frontControllerInstance = Zend_Controller_Front::getInstance();

    //If bootstrap is NULL or set to null then, set it.
    if(is_null($frontControllerInstance->getParam('bootstrap'))) {
        $frontControllerInstance->setParam('bootstrap', $this);
    }
    return $frontControllerInstance;
} 
```

编辑：

我为这个问题做了一个快速的谷歌。我得到了一个类似的[解决方法](http://framework.zend.com/issues/browse/ZF-8193)（几乎和我上面提到的一样），stackoverflow 上的这个答案也可能对你有所帮助，根据[这个答案](https://stackoverflow.com/questions/6219805/this-getinvokeargbootstrap-getoptions-fails-when-called-from-zend-help)，它可以通过动作助手调用。

# python - pyfann中训练数据的格式是什么？

> ID：12063340
> 
> 赞同：4
> 
> 时间：2012-08-21T21:30:31.217
> 
> 标签：python, neural-network, fann

pyfann中thraining数据的格式是什么？具体我想用pyfann的init_weight函数，但是它不取范围，而是从训练数据中找到范围。因此，我想创建一个小的假数据集，它具有程序中可以预期的最低值和最高值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-06T18:59:05.997

第一行，3个参数：要训练的数据数量，输入数量，从那里输出的数量，一行输入和一个输出，例如（AND逻辑矩阵）：

```
4 2 1    
1 1    
1    
0 1    
0    
0 0    
0    
1 0    
0 
```

以上：

*   要训​​练的 4 个数据：

    1 与 1 = 1
    0 与 1 = 0
    0 与 0 = 0
    1 与 0 = 0

*   2 个输入

*   1 个输出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T13:47:37.157

现在您也可以使用`train_on_data`，它接收与 相同的参数`train_on_file`，但您使用对象更改文件名`libfann.training_data()`并将输入和输出列表设置为（对于 xor 情况）：

```
training = libfann.training_data()    
training.set_train_data([[-1,-1],[-1,1],[1,-1],[1,1]],[[-1],[1],[1],[-1]]) 
```

# perl - 在perl中读取输入文件后打开多个文件的快速方法

> ID：12063341
> 
> 赞同：0
> 
> 时间：2012-08-21T21:30:48.103
> 
> 标签：perl

我的输入文件（~5k 行）格式看起来像这样

```
foo0: users/user1/temp1 users/user2/temp1 4.0
foo1: users/user2/temp1 users/user4/temp2 users/user4/temp1 1.0
foo2: users/user1/temp3 users/user2/temp3 2.0
foo4: users/user4/temp5 users/user2/temp6 users/user1/temp1 users/user3/temp1 4.0 
```

我的脚本需要做的是查看每一行，抓取每条路径，打开文件并根据它检查里面的东西。

例如：对于第 1 行，脚本必须打开**user1** .txt 并在 user1.txt 中搜索 temp1 并执行一些操作。然后继续到**user2** .txt 并在里面寻找 temp1 并做一些事情。

对于第 2 行：打开**users2** .txt 并搜索 temp1；打开**users4** .txt 并搜索 temp2；打开**users4** .txt 并搜索 temp1。

最快的方法是什么。我目前是一个一个的打开和关闭，这似乎需要很长时间。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T21:48:48.757

我会做这样的事情：

```
#! /usr/bin/perl

use warnings;
use strict;

while ( <> ) { 

    ## Remove last newline character.
    chomp;

    ## Split line with spaces and save paths (all strings but the first and
    ## last one).
    my @paths = split;
    @paths = @paths[ 1 .. $#paths - 1 ];

    ## For each path...
    for my $path ( @paths ) { 

        ## Split with a slash, get second field and try to open it. 
        my @elements = split m|/|, $path;
        open my $fh, q|<|, $elements[1] or die $!; 

        ## Read line by line searching for the third field of the path, do
        ## something if found. You can add a 'last' instruction if you wish.
        while ( my $line = <$fh> ) { 
            chomp;
            if ( $line =~ m/\Q${elements[2]}\E/ ) { 
                ## Do something;
            }   
        }   

        close $fh or warn $!; 
    }   
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-21T21:58:23.810

好吧，在普通系统上，硬盘数据传输速度是限制。但是有一些方法可能会给你带来优势：

### 多线程

如果您担心在此程序运行时您的硬盘可能处于空闲状态，或者您从多个物理驱动器读取数据，您可能需要尝试多线程。您应该注意，这*会使*您的程序运行速度变慢*（a）*如果执行错误或*（b）*如果您的 HDD 读取头必须跳动太多。

1.  使用函数打开*n 个*管道，其中*n*是线程数。`pipe`
**   `fork` *从主（“*老板*”）线程 *n次。*

    1.  每个工作线程关闭所有不相关的管道* **   boss 线程读取您的输入文件并将每个命令*依次*传递给不同的进程。这样，所有工作进程都有相同的工作量。*   工作线程进行搜索等。**

 **如果您以前没有使用过多线程`fork`，那么此解决方案将不适合您。

而且，如上所述，这不太可能产生积极的结果，*除非*您对每个文件的计算成本很高（当进行计算/搜索的时间与阅读时间相当时）如果您的脚本消耗大量 CPU 并且您有多个处理器，这可能会有所帮助。

### 提出更好的算法

*   您在每个文件中搜索什么以及如何搜索？您是否只针对每一行匹配一个正则表达式，然后执行一些代码？什么代码？正则表达式是否过于复杂？
*   您可以使用一些启发式方法来跳过文件的某个部分吗？
*   你试过[`Tie::File`](http://search.cpan.org/~toddr/Tie-File-0.98/lib/Tie/File.pm)吗？这样可以避免将文件加载到内存中，这可能会有所帮助。
*   您是否对脚本进行了**基准测试？**[有关介绍，请参阅perl.com](http://www.perl.com/pub/2004/06/25/profiling.html)上的本教程。哪些部件运行缓慢？
*   你能降低程序的算法复杂度吗？即：您是否在任何文件上迭代两次？这可能不是最理想的。**

# ejabberd - 在 node-xmpp 中检查联系人是否在线

> ID：12063343
> 
> 赞同：0
> 
> 时间：2012-08-21T21:30:54.893
> 
> 标签：ejabberd, node-xmpp

也许有人有代码示例？我找不到任何关于它的信息。Jabber 服务器**-ejabberd**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:10:32.543

作为客户，您知道联系人在以下情况下在线： - 他授权您的帐户查看他的存在， - 并且您在您的客户中收到他的存在。

结果：您必须在客户端跟踪您的联系人的存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T07:55:43.870

如果您正在寻找 ejabberd xmpp 服务器。 [https://github.com/processone/ejabberd](https://github.com/processone/ejabberd)也许这就是你想要的！

# git - 当 git 说“强制更新”时，可能会丢失什么以及在哪里丢失东西？

> ID：12063345
> 
> 赞同：30
> 
> 时间：2012-08-21T21:31:10.373
> 
> 标签：git

我最近在只有我承诺的存储库上收到了来自 git 的“强制更新”警告。我还没有做任何重新定位，所以我不知道为什么会这样。我想知道的是，我应该在哪里查找可能丢失的更改？

为了说明，让存储库有三个副本，L、D 和 S（笔记本电脑、台式机、服务器）。

首先，所有三个存储库都是同步的。然后在 D 上完成工作并推送到 S。然后 L 运行`git pull`并获得“强制更新”。这是否意味着对 L 所做的更改已被覆盖，或者它们是否在其他地方？我怎样才能找到它们？谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-21T22:17:49.327

“强制更新”意味着远程跟踪分支是最近的。如果您在有人强制推送到存储库之后获取（或拉取），就会发生这种情况。

但是，在执行 时`git pull`，您的本地分支不会丢失任何历史记录。由于远程分支的历史现在与您的本地不同，`git pull`因此将执行合并。如果您查看最近的提交（只需 run `git log`），您应该会看到一个合并提交，第一个父级是本地分支的先前状态，第二个父级是远程分支的新值。

为了说明，我刚刚复制了强制更新场景，并`git pull`打印了以下内容：

```
> git pull
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 2 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (2/2), done.
From /Volumes/UserData/Users/kballard/Dev/Scratch/foo/server
 + 7193788...a978889 master     -> origin/master  (forced update)
Merge made by the 'recursive' strategy.
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 d 
```

pull prints 的 fetch 部分`(forced update)`，但是 的新值`origin/master`随后被合并到本地分支中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-16T15:27:33.593

> 我想知道的是，我应该在哪里查找可能丢失的更改？

凯文写道，不会丢失任何地方历史是正确的。尽管如此，一些遥远的历史可能会丢失，尽管它会故意丢失。

## 例子

例如：

*   D 提交并推`master`送给 S。
*   L 取来。
*   D 改变主意（修改提交，或`master`以任何方式更改历史记录）。
*   D 将修改后的（非快进）推`master`送到 S。

在 fetch L 将警告“强制更新”，因为之前的分支提示不再可以通过分支引用访问`master`。但这*就是D想要的。*

## 要找什么

来自凯文的回答：

```
 + 7193788...a978889 master     -> origin/master  (forced update) 
```

那条线只会出现一次。对可能丢失的提交的引用是 7193788。

## 如何探索它

如果 L 想要保留对可能丢失的内容的引用，L 可能会在上面的示例中发出：`git branch whateverbranchname 7193788`. 无论本地结账的当前状态如何，都可以这样做。

或者只是`git checkout 7193788`在超然的头脑中探索它，然后例如`git checkout master`回到主人那里。这可能需要首先提交任何本地更改。

## 好习惯

*请注意，在未与其他用户适当合作的情况下将更改的历史记录推送到共享存储库被认为是一种不好的做法*（因为这会给尚未共享更改的人带来额外的工作）。

换句话说，在共享存储库上进行获取时，看到“强制更新”应该不会让任何人感到惊讶。如果有人推送了一个错误的提交，他们应该考虑只推送一个更正的提交，而不是更改现有的历史。或者，他们应该在推动改变的历史之前与其他人达成协议。后一种选择在公共存储库上是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-16T21:55:52.057

Git 2.23（2019 年第三季度）说明了何时检测到“强制更新”，并提出了*不*显示它的选项。

请参阅[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[提交 3883c55](https://github.com/git/git/commit/3883c55138dcfbe2d9a24e3f93a2a4b1d376dde6)、[提交 377444b](https://github.com/git/git/commit/377444b440eab3b6ef636df092f7f8299acf75bb)、[提交 cdbd70c](https://github.com/git/git/commit/cdbd70c43773d534aa81ea2c83905a45ff0e74e4)（2019 年 6 月 18 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 cde9a64](https://github.com/git/git/commit/cde9a64ea35ceeaa5e8dd2da2662445510fe651c))^(中，2019 年 7 月 9 日）)[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## `fetch`: 添加`--[no-]show-forced-updates`参数
> 
> **在“ ”期间更新一组删除引用后`git fetch`，我们在新的引用值中而不是在旧的引用值中遍历提交，以发现更新是否是强制更新**。
> 
> 这导致在命令期间发生两件事：
> 
> 1.  包含 ref 更新的行末尾有一个附加的“（强制更新）”标记。
>     
>     
> 2.  该远程分支的 ref 日志包含一点说更新是强制更新。
>     
>     
> 
> 在许多情况下，这种强制更新消息很少发生，或者只是许多 ref 更新中的一小部分信息。
> **许多用户忽略了这些消息，但此处所需的计算显着减慢了他们的获取速度。**
> 请记住，他们没有机会计算包含新获取的提交的提交图文件，因此这些比较可能非常慢。
> 
> 添加`--[no-]show-forced-updates`允许用户跳过此计算的“”选项。
> 唯一永久的结果是删除 reflog 中的强制更新位。
> 
> 包含一个`fetch.showForcedUpdates`允许此行为的新配置设置，而无需在每个命令中包含参数。
> 配置设置被命令行参数覆盖。

这意味着文档现在具有：

*   对于[`git fetch`](https://github.com/git/git/blob/cdbd70c43773d534aa81ea2c83905a45ff0e74e4/Documentation/config/fetch.txt#L67-L70)：

> ```
> fetch.showForcedUpdates: 
> ```
> 
> 设置为`false`启用`--no-show-forced-updates`输入`git-fetch`和`git-pull`命令。
> 默认为真。

*   对于[获取选项](https://github.com/git/git/blob/cdbd70c43773d534aa81ea2c83905a45ff0e74e4/Documentation/fetch-options.txt#L224-L235)：

> ```
> --show-forced-updates: 
> ```
> 
> 默认情况下，Git 在获取期间检查分支是否被强制更新。
> 这可以通过 禁用`fetch.showForcedUpdates`，但该`--show-forced-updates`选项保证进行此检查。
> 
> ```
> --no-show-forced-updates: 
> ```
> 
> 默认情况下，Git 在获取期间检查分支是否被强制更新。
> 出于性能原因，通过`--no-show-forced-updates`或设置`fetch.showForcedUpdates`为`false` **跳过此检查**。
> 
> 如果在“ `git-pull`”期间使用，该`--ff-only`选项仍将在尝试快进更新之前检查强制更新。

和：

> ## `fetch`：警告分支列表中的强制更新
> 
> ' ' 中的`--[no-]show-forced-updates`选项`git fetch`可能会让某些用户感到困惑，特别是如果它是通过配置设置而不是通过参数启用的。
> **添加建议以警告用户未列出（强制更新）消息。**
> 
> 此外，当强制更新检查时间超过 10 秒时会警告用户，并建议他们禁用检查。
> 这些消息可以通过`advice.fetchShowForcedUpdates`配置设置禁用。

[配置建议文档](https://github.com/git/git/blob/377444b440eab3b6ef636df092f7f8299acf75bb/Documentation/config/advice.txt#L7-L10)现在 包括：

> ```
> fetchShowForcedUpdates: 
> ```
> 
> `git-fetch`在 ref 更新后需要很长时间来计算强制更新时显示的建议，或警告检查已禁用。

请注意，该测试已在 Git 2.3.1/2.24（2019 年第四季度）中修复

请参阅[SZEDER Gábor ( ) 的](https://github.com/szeder)[提交 814291c](https://github.com/git/git/commit/814291cf3f286ddffc291e4820c62ac729e83171)（2019 年 7 月 30 日[）](https://github.com/szeder)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 8aa76ab](https://github.com/git/git/commit/8aa76abba5e97449740d2e26d57542166f385b4d))^(中，2019 年 8 月 22 日）)[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

请参阅[SZEDER Gábor ( ) 的](https://github.com/szeder)[提交 decfe05](https://github.com/git/git/commit/decfe05bb668771fb25a23021b2b33bc7649cd32)、[提交 7f005b0](https://github.com/git/git/commit/7f005b0f483a507d3c7b353f4753ac3fece88bc0)、[提交 12b1826](https://github.com/git/git/commit/12b1826609d5c309336ffd9f56e42abaf8d96cef)（2019 年 8 月 1 日[）](https://github.com/szeder)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 77067b6](https://github.com/git/git/commit/77067b6ce8ad9b382fcbaeb012776cd24e88572a))^(中，2019 年 8 月 22 日）)[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

# asp.net-mvc - 在 ASP.NET 应用程序和 Worker Role 之间进行通信的最佳方式

> ID：12063346
> 
> 赞同：2
> 
> 时间：2012-08-21T21:31:13.457
> 
> 标签：asp.net-mvc, wcf, azure, azure-worker-roles, azure-web-roles

我同时设置了 ASP.NET 应用程序和 Worker Role，现在我想知道如何在它们之间进行通信？我认为这个想法是解决方案将分布在不同的地理位置。那么如何以简单高效的方式链接分布式 Worker 和 Web Roles 呢？我已经开始研究 WCF，但在我看来它是一种矫枉过正和过于复杂的事情。我的另一个想法是在 Worker 角色中使用 SignalR 客户端与 Web 角色中的服务器通信。

**编辑：**

确切的上下文：

1）用户上传文件到服务器

2）服务器将文件发送到Azure Storage，并将文件名添加到CloudQueue

3)Worker从CloudQueue中获取文件名

4)Worker 启动一个新线程，从 Azure Storage 获取文件并开始处理它

5）Worker/Thread在文件处理的每一步都向应用程序报告

6）应用程序接收报告并使用SignalR将处理步骤实时转发到客户端的浏览器。

我缺少的是步骤 2 > 3，如何立即通知工人有新文件到达？我不想轮询 CloudQueue，因为它会造成延迟。同样在步骤 5 > 6 中，Worker 需要通知应用程序有关这些步骤的信息，这应该不会延迟，但我再次看不到在这种情况下如何使用轮询解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:48:43.620

如上所述，需要更多的上下文。您基本上有两个主要选项，Windows Azure 队列和 Windows Azure 服务总线队列/主题。如果 Web 和 Worker 角色位于同一区域，我个人的建议是使用 Azure 队列，如果不是，则使用服务总线队列。我不得不问你为什么不将你的 Web 角色和 Worker 角色并置在一起，如果你有你的应用程序的地理部署，那么看看在每个区域（例如美国、欧洲和亚洲）部署你的所有 Web 角色和工作角色，然后使用流量经理将用户路由到最佳区域。

关于何时使用哪个队列“Windows Azure 队列和 Windows Azure 服务总线队列 - 比较和对比”有一篇很好的博客文章：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)

高温高压

**编辑**

下面是一种用于 Web 和 Worker Role 通信的好方法（我从@smarx 回答的最近的一个线程中偷了这个）

1 Web 角色将包含作业 ID 的消息写入队列。

2 Worker 角色完成工作并将结果写入具有分区键的表。

3 Web 角色正在轮询表的该行。一旦它存在，答案就会回来。

在您的情况下，您可以让 Worker 角色使用状态更新更新表存储，然后让您的 Web 角色选择它们并将它们显示给用户。例如 20%、50%、完整等...

只要您从 Web 角色充分轮询（*注意交易成本），我并没有真正看到此类通信的延迟

我认为可以在此处进行某种角色间通信以进行状态更新，但 IMO 可能有点矫枉过正：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh180158.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh180158.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T15:23:11.443

我使用 azure 表存储作为工作角色和 Web 角色之间进行通信的地方。基本上，Worker 角色会将消息/通知存储到 azure 表中，而 Web 角色将有一个计时器来定期检查 azure 表中的更改。之后，该 Web 角色将使用 SignalR 向客户端页面实时发送消息以报告进度。

Global.asax.cs 文件：

```
private static System.Timers.Timer _timer;

protected void Application_Start()
{
     //Start the timer job
     _timer = new System.Timers.Timer(3000);
     _timer.Elapsed += new ElapsedEventHandler(WebRoleTimerJob);
     _timer.Start();
}

/// <summary>
/// This event will be fired intervally every 3 seconds to broadcast messsage to all registered client pages using SignalR
/// </summary>        
public static void WebRoleTimerJob(object sender, ElapsedEventArgs e)
{               
      // Here, you can read Azure table storage to detect any changes    
      // or notification from Worker role
      // ....

      //If there is any changes, then broadcast message 
      // to all relevant client pages using SignalR   

      var context = GlobalHost.ConnectionManager.GetHubContext<Hub>();       
      context.Clients.All.addNewMessageToPage("your_message_name", "message_content");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T03:25:24.003

我建议看一下 CQRS，它代表命令查询责任分离。

该架构的目的是创建松散耦合、可扩展和可扩展的系统。

[http://cqrsjourney.github.com/](http://cqrsjourney.github.com/)

Greg Young 发明了这个系统，并且有许多开源实现可用于加快分布式、可扩展系统的构建。在他之前是奠定基础的伯特兰·迈耶（Bertrand Meyer）。

过于简单的概念是一系列队列将 Web 角色和工作角色分开。因此，当用户从 Web 角色提交工作时，该工作会排队，然后由工作角色接手。权衡是最终的数据一致性，而不是立即的一致性。好处是它是松散耦合和可扩展的。如果队列开始变得太大，可以添加额外的工作角色来处理额外的规模。

该方法使用命令、查询、域对象等概念。CQRS 正在成为一种非常强大的方式来实现我认为您正在寻求的目标。

搜索引擎可以为您提供许多好的资源。以下是一些有用的视频： Greg Young [http://www.youtube.com/watch?v=KXqrBySgX-s](http://www.youtube.com/watch?v=KXqrBySgX-s) 我的朋友 Rinat [http://www.youtube.com/watch?v=CnvO_nlvrps](http://www.youtube.com/watch?v=CnvO_nlvrps)

祝你好运！

# c# - 通过 Listbox1-click 相应地填充 Listbox 2

> ID：12063359
> 
> 赞同：-1
> 
> 时间：2012-08-21T21:31:55.937
> 
> 标签：c#, winforms, listbox, filereader, arrays

我正在通过**File.ReadAllText**从文件中加载值，直接进入 ListBox1

该文件是 .txt - 逗号分隔。

健康食品.txt

**内容**：

乳制品、水果、蔬菜、全谷物

以简单的方式填充 Listbox1 (LstBox_HealthyCat)（没有应用条件）实际上几乎没有我的 Helper-Method 的帮助，所以我不会为其他文件重复我的代码（：

```
public string GetFileContent(string FileName)
{
    string Filecontent = "";
    string ExtTXT = ".txt";
    string initialDir = @"G:\RobDevI5-3xRaid-0\Projects\WindowsFormsApplication1\bin\x64\Debug\HealthFood\";

    Filecontent = File.ReadAllText(intialDir + FileName + ExtTXT);
    return Filecontent;

}

string[] HealthyFood = GetFileContent(HealthyFood).Split(',');
LstBox_HealthyCat.Items.AddRange(HealthyFood); 
```

所以现在结果是 ListBoxMainCategory 将是

**乳制品**

**水果**

**蔬菜**

**全谷类**

到目前为止，它是新开发人员的好例子

我的问题是，下一步我想填充健康食品的子类别，例如水果

水果.txt

**内容：**

苹果、香蕉、樱桃、枣

因此，当我单击 Main Category: **Fruits** 时，它将填充 ListBox2 并选择 ListBox1 和 listBox1 中可用的其余项目（单击时）。

**替代我的**

```
 Filecontent = File.ReadAllText(intialDir + FileName + ExtTXT); 
```

**蒂姆施梅尔特的代码：**

```
 System.IO.Path.Combine(initialDir, item + ExtTXT); 
```

**路径结合**...不错的一个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:37:32.047

如果您有与 ListBox1 中的类别同名的文件，那么您所要做的就是将此类别传递给您的辅助函数并使用结果来填充 ListBox2。

这可以在 SelectedIndexChanged 事件中轻松完成

```
private void LstBox_HealthyCat_SelectedIndexChanged(object sender, System.EventArgs e)
{
   // Get the currently selected item in the ListBox. 
   string curCategory = LstBox_HealthyCat.SelectedItem.ToString();
   string[] subCatItems = GetFileContent(curCategory).Split(','); 

   // Clear the previous list of foods from the second listbox
   ListSubCategory.Items.Clear();
   ListSubCategory.Items.AddRange(subCatItems); 
} 
```

请记住，此示例假定您`initialDir`在 GetFileContent 方法中的变量标识的文件夹中有以下文本文件

*   乳制品.txt
*   水果.txt
*   蔬菜.txt
*   全谷物.txt

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:52:54.503

因此，如果我正确理解了您的要求，您希望根据 ListBox1 的 SelectedItem(s) 填充第二个 ListBox。例如，如果`fruit`选择了则`fruits.txt`应该使用等等。那么这可能会帮助你：

```
const string initialDir = @"G:\RobDevI5-3xRaid-0\Projects\WindowsFormsApplication1\bin\x64\Debug\HealthFood\";
const string ExtTXT = ".txt";

private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    listBox2.Items.Clear();
    foreach (String item in listBox1.SelectedItems)
    {
        String path = System.IO.Path.Combine(initialDir, item + ExtTXT);
        if(System.IO.File.Exists(path))
        {
            listBox2.Items.AddRange(System.IO.File.ReadAllText(path).Split(','));
        }
    }
} 
```

# git - 将 Github 更改拉取到 Github

> ID：12063360
> 
> 赞同：5
> 
> 时间：2012-08-21T21:32:01.710
> 
> 标签：git, github

假设我有一个 Github 存储库。

1.  我复制了原版。
2.  我 fork Github 存储库以创建第二个存储库。
3.  我对原始的克隆进行了更改。将这些更改推送到 Github。
4.  我现在想将上面第 2 步中提到的更改提取到分叉的存储库中。

Github（不使用git）可以做到这一点吗？

我知道我可以在克隆的存储库上添加第二个远程（fork），然后也将更改推送到那里（[相关答案在这里](https://stackoverflow.com/questions/867831/merge-changes-from-remote-github-repository-to-your-local-repository)），但我很好奇 Github 是否提供了另一种方法来将更改推送到 fork你的回购副本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:41:29.877

据我所知，它必须通过 Git 完成。

请记住，拉取远程也涉及合并和潜在的冲突解决，因此为了在存储库之间拉/合并/推送，您需要访问 Git 的合并/冲突解决机制。Github 没有必要为它公开它自己的（不可避免的复杂）接口，因为你还不如通过 Git 在本地完成它。

# assembly - 使用寄存器内容作为标签

> ID：12063362
> 
> 赞同：0
> 
> 时间：2012-08-21T21:32:12.520
> 
> 标签：assembly, x86, nasm, labels

想象一下：

说ECX == 3。

我想要数字 '65' 即 ASCII 'A' 作为我的代码的标签：

```
;NB This is an example/code snippet

mov ecx, 65
    jmp .%+[ecx]  
    ...

    .A: 
       [do stuff here] 
```

当我使用上述想法编译代码时，它给了我以下信息：

```
error: comma, colon or end of line expected 
```

我要问的是我犯了什么语法错误-我很确定我遵循了 NASM 手册第 3.1 章中概述的标签定义规则：

“...唯一可以用作标识符第一个字符的字符是字母、.（具有特殊含义：参见第 3.9 节）、_ 和 ?...”

另外，我问是否有更有效的解决方案来解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:52:32.707

您不能在装配中“计算”标签。但是你可以计算地址。

这里`ecx`将用作包含对应于多个标签的地址的表的索引：

```
 mov ecx, 65
    jmp [table - 'A'*4 + ecx*4]
    ...

table:
    dd .A ; address of .A:
    dd .B ; address of .B:
    dd .C ; address of .C:
    ...

.A:
   [do stuff here]
.B:
   [do stuff here]
.C:
   [do stuff here] 
```

# opengl - JPCT - 3D 到 2D（平面透视）

> ID：12063365
> 
> 赞同：2
> 
> 时间：2012-08-21T21:32:25.300
> 
> 标签：opengl, camera, perspective, flat, jpct

我正在使用 JPCT 创建 3D 建模软件。程序的中心有一个模型的大视图。侧面有 xy、xz 和 yz 视图，可以详细查看模型的每一侧。

我遇到的问题是我无法删除侧视图上的“透视”。我想要一个“平顶向下”的视图。如果它们具有相同的 xy 位置（在 xy 视图中），则距离较远的点不应比接近点更靠近中心。换句话说：“将相机置于无限远，然后放大”是我想要的。

我尝试摆弄BillBoard Matrix，但没有成功（我什至不知道这是否是正确的选择）。不幸的是，JPCT 的文档/示例很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:31:38.123

截至 2010 年底，似乎[不支持 ortho](http://www.jpct.net/forum2/index.php/topic,1789.msg13175.html?PHPSESSID=7694ef2dbda83d169e1fefdaacb076b8#msg13175)：

> > 1.  有没有办法设置正交相机投影？除了设置 FOV 之外，似乎没有办法指定相机使用的投影。透视似乎是隐含的。如何将其设置为正交？
> 
> 不，不支持正交模式，对不起。

# vba - vba 中调用的过程列表

> ID：12063367
> 
> 赞同：0
> 
> 时间：2012-08-21T21:32:27.787
> 
> 标签：vba, excel

是否有一种简单的方法可以提取/记录运行 VBA 项目时调用的过程/函数的列表？澄清一下，VBA 项目处理几种算法，每种算法仅使用/调用 VBA 项目中的一组特定过程/函数。

注意：我实现此目的的一种方法是使用可扩展性库以编程方式向每个过程/函数添加一行，这会将相应过程/函数的名称附加到文本文件中。但在这样做之后，我的 Excel 安装开始抱怨我的 VBA 项目（加载项）。所以我正在寻找替代方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:58:57.297

在每个过程/函数中放置一个代码，将一些值存储在工作表或其他地方。

# extjs - 在网格上保存模型后属性不呈现

> ID：12063369
> 
> 赞同：0
> 
> 时间：2012-08-21T21:32:43.107
> 
> 标签：extjs

我在我的应用程序中使用 Ext Js，但我遇到了问题。保存新模型后，网格应该自动渲染列，但是在保存属性“id”后，它是列之一不渲染器，我需要刷新页面以显示网格中出现的数据，任何人都可以提供洞察力？？第一列是“id”，在刷新之前。

![在此处输入图像描述](../Images/49835b4a9299f0df1d2c23537f11ff68.png)

刷新页面后：

![在此处输入图像描述](../Images/72bd5f76660435ca1a19b4186a7405da.png)

初始网格配置：

```
Ext.define('GridConfiguracao', {
extend : 'Ext.grid.Panel',
store : 'ConfiguracaoStore',
features: [{
    groupHeaderTpl: 'Estado: {name}',
    ftype: 'groupingsummary',
}],
listeners : {
    render : function(grid) {
        grid.store.load();
    }
},
title: 'Configurações',
columns : [{
    header : 'ID',
    dataIndex : 'id',
    flex : 0.2,
    summaryType: 'count',
    summaryRenderer: function(value){
        return Ext.String.format('{0} {1}', value, value !== 1 ? 'configurações' : 'configuração');

    }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:17:03.377

您可以使用两种方法。

第一种方法，获取网格的存储并重新加载存储。

```
myGrid.getStore().reload(); 
```

其次，获取网格的视图并刷新。

```
myGrid.getView().refresh(); 
```

# c++ - 寻找一种正确的“（快速而准确）的方法来查找检查 2d 游戏碰撞的内容。c++

> ID：12063376
> 
> 赞同：0
> 
> 时间：2012-08-21T21:33:17.337
> 
> 标签：c++, maps, collision-detection, tiles, 2d-games

我正在创建 2d rpg 游戏。对于地图，我使用 32x32 瓦片。像玩家和怪物这样的对象有不同的精灵掩码宽度和高度，它们移动的不是瓷砖，而是 x 和 y。所以我试图找到一种“正确”（快速而准确）的方法来查找检查碰撞的内容，在玩家和瓷砖之间、玩家和怪物之间、怪物和瓷砖之间、怪物和玩家之间。

对于碰撞检测，我使用：矩形到矩形、圆形到圆形（距离）、矩形到圆形和圆形到矩形碰撞检查。

例如，我有一张地图：1600x1600 的宽度和高度。将它除以 32，我有 50x50 的平铺地图。

我制作了一个二维布尔数组：

```
bool tile_area[50][50]; 
```

因此，对于每个非无碰撞瓷砖，它将保持 1，对于无碰撞瓷砖，它将保持 0。例如，如果玩家在 tile_area[1][1] 上并且想要向右移动，它会检查tile_area[2][1] 中的碰撞，如果 tile 没有碰撞，则它会移动。怪物也一样，这里的一切都很完美。

但是这种类型的碰撞检测在玩家和怪物、怪物和怪物等移动物体之间是不同的。如果在 1 张地图中我有 200-300 个移动对象，则检查主要移动对象与其他所有对象的每个移动像素的碰撞并不是一个好主意。

所以我想到了一个想法，也为对象划分区域图，所以现在我得到了一个 obj_area[x][y] 结构的二维数组。该结构包含对象结构的向量“vector obj_list;”，因为该区域中不仅可以有 1 个对象。

```
struct obj_area{
vector<obj> obj_list;
};

obj_area o_Area[50][50]; 
```

我相信我可以制作一个二维结构向量数组：D 不确定；D

因此，当玩家或怪物移动时，例如移动到 x 210 和 y 300，它将被添加到 obj_area[210/32=7][300/32=9] 并且如果它想向右移动，它会先检查tile_area[8][9] 如果空闲，则使用向量 obj_area[8][9] 中的所有对象。因此，如果它也是免费的，它会从 obj_area[7][9] 重新分配到 obj_area[8][9] <- 在这一点上，我不知道重新分配是否是个好主意，我需要删除它从旧向量中提取并将其添加到新向量中，这在移动的每一步中都需要。

我有另一个想法，但我不知道它是否会更好或可能，如果我有一个结构映射，并且 x,y 对作为它的键值，所以理论上每次对象移动时，都需要重新分配，我只需要更改该映射对的键值。

我将非常感谢您的任何想法，也许还有更好的想法:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:16:00.560

首先对您的想法发表一些评论：

*   不要将您的对象（这些是您正在谈论的结构吗？）放入您的查找结构中；使用指针将为您节省大量复制数据的时间
*   `vector`仅当您知道单个元素中的元素数量会很少时才使用s；删除一个项目需要遍历整个向量（具有线性时间复杂度）

现在有一个建议：

如果您的大多数对象都很小，您可以附加到每个对象的当前边界框。然后，如果您保留两张地图（一张用于 x 轴，一张用于 y 轴），将边界框角的坐标映射到它们各自的对象，您可以：

*   每当物体移动时，以对数时间更新地图（即使对于数千个物体也很小）
*   仅检查与您当前在其中一个轴上处理的对象相交的对象的碰撞（选择范围中元素较少的对象，`lower_bound`并且`upper_bound`是您的朋友）

# php - 查找服务器的名称，以便可以通过 PHP 访问它

> ID：12063377
> 
> 赞同：-1
> 
> 时间：2012-08-21T21:33:23.980
> 
> 标签：php, networking, shared-directory

我想做的是从网络上的共享文件夹中读取和写入。.php 类似于`fopen(\\\\server\\share\\file.txt, "r")`，但我的问题是我不知道为服务器名称提供什么名称。

我可以使用 IP 地址作为服务器名称吗？

还是我用红色圈出的服务器名称？ ![在此处输入图像描述](../Images/f12648745b2eff1a2c5dd89964136651.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:36:46.913

在 Windows 上：

```
fopen("\\\\server\\share\\file.txt", "r"); 
```

（你必须使用引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:45:22.903

可以使用ip。无论格式适用于 Windows 资源管理器（假设您添加了任何需要的用于转义的额外反斜杠）都应该适用于 php。

# sql - SQL 从行转向列只留下 NULL 值

> ID：12063383
> 
> 赞同：0
> 
> 时间：2012-08-21T21:33:37.020
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表变量，称为`@t`，它是我在这里定义的 specsAndModel 类型的一个实例：

```
CREATE TYPE specsAndModel AS TABLE
(
    specName VARCHAR(50)
    ,specVal VARCHAR(50)
) 
```

执行`select specName,specVal from @t`以下形式的数据：

```
specName              | specVal
--------------------------------
[modelNumber]         | F00-B4R
[Internal Switch(es)] | 2.00000
[Number of Ports]     | 1.00000
[Color Insulator]     | Yellow 
```

我插入了第一行，这样当我转置表格时，就会有一个`modelNumber`字段。我打算将转置表连接到该字段上的另一个表。

为了说明不同模型的不同记录数，我使用字符串连接构造了数据透视语句：

```
DECLARE @cols NVARCHAR(MAX);
DECLARE @query NVARCHAR(MAX);
SELECT @cols = COALESCE(@cols + ',' + specName, specName) FROM @t;

SET @query = N'SELECT ' + @cols 
+ N' FROM @var src' 
+ N' PIVOT (MAX(specVal) FOR specName in (' + @cols + N')) pvt;'; 
```

查询字符串如下所示：

```
SELECT [modelNumber],[Internal Switch(es)],[Number of Ports],[Color Insulator] 
FROM @var src 
PIVOT 
(
  MAX(specVal) 
  FOR specName in ([modelNumber],[Internal Switch(es)],[Number of Ports],[Color Insulator])
) pvt; 
```

最后，我使用`sp_executesql`传入`@t`变量，然后执行`@query`字符串：

```
EXEC sp_executesql @query, N'@var specsAndModel readonly', @t 
```

结果是这样的：

```
[modelNumber] | [Internal Switch(es)] | [Number of Ports] | [Color Insulator]
-----------------------------------------------------------------------------
NULL          | NULL                  | NULL              | NULL 
```

我得到所有模型的空值，我[在 sqlfiddle 上](http://sqlfiddle.com/#!3/d41d8/3486/0)构建了这个枢轴的玩具示例，它按预期工作。我不确定我做错了什么。

如何在不获取空值的情况下转置此表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T21:46:03.203

有几件事要解决：

首先，从声明中的价值观`[`周围删除。`specName``INSERT`

其次，改变你获取列的方式。这将添加`[`周围的`specName`值：

```
DECLARE @cols NVARCHAR(MAX);
DECLARE @query NVARCHAR(MAX);
select @cols = STUFF((SELECT distinct ',' + QUOTENAME(specName) 
                    from @t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') 
```

如果你这样做，那么你的脚本将起作用：

```
DECLARE @cols NVARCHAR(MAX);
DECLARE @query NVARCHAR(MAX);
select @cols = STUFF((SELECT distinct ',' + QUOTENAME(specName) 
                    from @t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

SET @query = N'SELECT ' + @cols 
+ N' FROM @var src' 
+ N' PIVOT (MAX(specVal) FOR specName in (' + @cols + N')) pvt;';

EXEC sp_executesql @query, N'@var specsAndModel readonly', @t 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/59c9f/3)

# javascript - 使用 JS 和画布创建网站构建器

> ID：12063385
> 
> 赞同：0
> 
> 时间：2012-08-21T21:33:44.300
> 
> 标签：javascript, css, ember.js, html5-canvas

我目前正在创建一个网站构建器，以便用户可以将元素拖放到页面上并调整元素大小和修改颜色等。

我想知道它是否可以通过 HTML5 画布完成，以便可以拖动事件等，然后当用户对画布中的这个视图感到满意时，我可以以某种方式将此画布绘图转换为 HTML 和 CSS。这可能吗？

如果有怎么办？任何人都可以指出我的任何例子吗？或者有什么更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:47:56.410

通常，当您发现为线框等执行此操作的应用程序时，它们不会生成非常有用的 HTML。但不确定您的确切意图：

# 1 使用画布：

查看[http://www.kineticjs.com/](http://www.kineticjs.com/)为您在画布上绘制的元素添加事件、调整大小和移动元素。虽然将画布转换为 html 并不是一件容易的事，事实上，我假设你几乎会以第 2 点结束。

# 2 使用普通的 html/css/js：

您将 position: absolute 添加到每个元素，这样所有东西都可以拖动，您可以指定 z-index 来指定它是否显示在另一个元素的上方或下方。您可以很容易地复制 HTML，因为它只是复制当前源。但是，如果这应该被用作生成*体面的*html 的一种方式，那么有人会在他们的网站上实际使用它，而不仅仅是作为线框/模型，那么这种方法不会很好。

我无法想象这样一种情况，您可以纯粹使用设计器来制作可维护且整洁的 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:02:23.257

我的项目[http://canvimation.github.com/](http://canvimation.github.com/)在某种程度上可以做你想做的事。

我的项目的源代码位于[https://github.com/canvimation/canvimation.github.com](https://github.com/canvimation/canvimation.github.com)

master 分支是当前的工作代码。我目前正在重新编写项目，以使代码更易于理解，调试一些元素并使动画构建更容易。新开发在 stage1 分支上，但还不能在线运行，您必须复制代码才能运行它。欢迎您使用代码或 fork 项目。

# php - PHP fgetcsv() 似乎无法从 CSV 文件中读取任何行的最后一个字段

> ID：12063389
> 
> 赞同：1
> 
> 时间：2012-08-21T21:34:00.780
> 
> 标签：php, csv

我使用`fgetcsv()`函数从 CSV 文件中读取数据并将其信息导入 MySQL。我拥有的数据是这样的：

```
2,3,4,5,6,7,8,9,9,8,7,6,5,4,3,2,1
0,1,2,7,7,7,7,7,7,7,1,7,7,7,7,7,7 
```

如您所见，每行有 17 个字段，我必须使用从 0 到 17 的索引读取它们。但是每当我想这样做时，我都会收到一个错误，告诉我没有任何索引 #17。
这有什么关系？我必须在每行的最后一个字段后添加一个逗号？如果你的回答是肯定的，为什么excel不这样做？以及如何`,`在 CSV 文件的每一行之后添加一个新的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:36:29.420

只有 17 列（您似乎自己数过），因此您获得了从`0`（第一列）到`16`（第 17 列）的索引。

# jquery - 带有 jQ uery UI 可排序的自定义助手

> ID：12063392
> 
> 赞同：1
> 
> 时间：2012-08-21T21:34:11.890
> 
> 标签：jquery, html, jquery-ui, jquery-ui-sortable

我使用 jQuery UI 可排序组件创建了一个自定义帮助器元素。

```
$(function() {
    $("#sortable").sortable({
        placeholder: "ui-state-highlight",
        helper: function() {
            return $('<tr style="background-color:Fuscia"><td colspan="5" ><table><tr><td class="ui-state-default" style="background-color:Red">[XXXXXXXXXXXX]</td></tr><tr><td colspan="5" class="ui-state-default" style="background-color:Red">[XXXXXXXXXXXX]</td></tr></table></td></tr>');
        },
    });
    $("#sortable").disableSelection();
}); 
```

当我拖动一个项目时，实际上会出现自定义元素。但是，它溢出了“拖动框”，该“拖动框”显然是被拖动的任何东西的容器。

我已经在[http://jsfiddle.net/LpyXh/](http://jsfiddle.net/LpyXh/)上发布了我的代码和标记。

有人能看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:46:35.067

在 CSS 中添加

```
.ui-sortable-helper
{
   background:none;    
   border:none;   
} 
```

[http://jsfiddle.net/LpyXh/2/](http://jsfiddle.net/LpyXh/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:55:42.840

您指定了每个 tr 的高度，该高度将应用于助手。

[http://jsfiddle.net/LpyXh/3/](http://jsfiddle.net/LpyXh/3/)

将修复容器。

# java - Java如何使用键绑定在窗口的任何位置截取组合键

> ID：12063398
> 
> 赞同：2
> 
> 时间：2012-08-21T21:34:27.227
> 
> 标签：java, swing, key-bindings, swingx, keystrokes

我的应用程序将用于小型双引擎飞机。环境“崎岖不平”，乳头“老鼠”很难使用（即使在衣架中！）。我需要能够至少拦截用户想要执行的所有常用操作的组合键。例如，这些将包括**alt-C**执行校准，**alt-R**开始记录数据，**alt-X**让应用程序正常关闭等。

我只在演示类中使用过键绑定，不明白如何在整个窗口中使用它们。我在我的 JFrame 的 ContentPane 上放置了 5 个包含其他 JPpanels 和组件的 JPanel。我发现的所有示例都假设某些组件具有焦点，但是将 TAB 推 23 次以到达组件是不合理的。

该应用程序将在 LINUX 下运行，可能是 Ubuntu。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:48:42.043

在 swing 中，您应该在主面板的操作映射中添加一个 KeyStroke：例如，以下代码让您在每次按下 [F10] 键时刷新包含 JPanel 的 JFrame：

```
public class MainWindow extends JFrame{
    JPanel central;

    public MainWindow(){
        central = new JPanel();
        // I assume you define your other 5 panels here
        // and add them to the central JPanel.
        getContentPane().add(central, BorderLayout.CENTER);
        registerRefreshAction();
    }

    private void registerRefreshAction(){
        javax.swing.Action refresh = new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                JFrame frame = (JFrame) getTopLevelAncestor();
                frame.setVisible(false);
                frame.getContentPane().repaint();
                frame.setVisible(true);
            }
        };
        KeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F10, 0);
        central.getActionMap().put("Refresh", refresh);
        central.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(keyStroke, "Refresh");
    }
} 
```

如前所示，您应该在构造函数的某个位置调用 registerRefreshAction。您提到的其他组件包含在 5 个面板中，不需要显示。它在 Linux 中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T21:40:55.020

你可以试试

```
getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW); 
```

或者

```
getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT); 
```

我可能会在自定义内容窗格上建立它

```
JPanel myContentPane = new JPanel();
frame.setContentPane(myContentPane); 
```

或者使用根窗格的输入映射

如果这不起作用，还有另一种方法，但我更愿意先看看这是否有效

# salesforce - 使用 @remoteAction 与标准方法调用时的 Salesforce 运行上下文

> ID：12063400
> 
> 赞同：0
> 
> 时间：2012-08-21T21:34:39.417
> 
> 标签：salesforce, apex-code

我正在尝试提交一个自定义对象以供 remoteAction 批准。到目前为止，我们一直在使用 Apex pageReference 控制器方法，该方法一直按预期工作。

Approval 请求的构建如下：

```
public static string submitQuote(id quoteId){
    Approval.ProcessSubmitRequest req1 = new Approval.ProcessSubmitRequest();
    req1.setComments('Submitting for Approval');
    req1.setObjectId(quoteId);
    req1.setNextApproverIds(new ID[]{UserInfo.getUserId()});
    Approval.ProcessResult pr = Approval.process(req1);
    return 'Success';
} 
```

如果我们从标准方法调用 submitQuote，它适用于我们确定的所有情况。当我们使用远程操作调用该方法并且正在运行的用户不是商机所有者或报价创建者（这些是批准工作流中的初始提交者）时，他们会收到以下错误：

```
NO_APPLICABLE_PROCESS, No applicable approval process found. 
```

机会所有者和/或报价创建者可以使用远程操作提交而不会出错。

是否有理由使工作流程在由 remoteAction 调用时不适用，但在不适用时会被接受？有没有办法让两个调用在相同的上下文中运行，所以它们会工作而不是类似地工作？

编辑：更正以解决杰拉德的评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:57:41.037

Salesforce 文档[使用共享或不共享关键字](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_classes_keywords_sharing.htm)

```
Apex generally runs in system context; that is, the current user's permissions, 
field-level security, and sharing rules aren’t taken into account during code execution.

Note
The only exceptions to this rule are Apex code that is executed with the executeAnonymous call. 
executeAnonymous always executes using the full permissions of the current user. 
For more information on executeAnonymous, see Anonymous Blocks. 
```

# django - 扩展 Django Admin 以包含相关字段

> ID：12063403
> 
> 赞同：0
> 
> 时间：2012-08-21T21:34:47.873
> 
> 标签：django, django-models, django-admin

我正在尝试扩展 Django 管理员以将相关字段添加到内联无法处理的模型添加/更改表单。

我的简化模型如下：

```
class Token(models.Model):
    guid = models.CharField(max_length=38, blank=False)

class Package(models.Model):
    tokens = models.ManyToManyField(Token)

class UserToken(models.Model):
    user = models.ForeignKey(User)
    token = models.ForeignKey(Token)
    value = #Some instance specific value
    expires = models.DateField(blank=False)

class UserPackage(models.Model):
    user = models.ForeignKey(User)
    package = models.ForeignKey(Package)

    expires = models.DateField(blank=False) 
```

我需要做的是在创建 UserPackage 以使用 Package 上的令牌 ManyToMany 关系来创建 UserTokens 时。每个 UserToken 可能有不同的实例值。

最好在 UserPackage 的管理添加/更改页面中填写令牌和值字段。该列表需要预先填充所有可能的条目，这就是为什么内联在这里似乎不是一个好的选择。

**当前解决方案**

1.  在添加 URL 时期望 "?package=" 参数

2.  覆盖 ModelAdmin.add_view(self, request, form_url='', extra_context=None) 以读取 URL 参数并生成令牌对象列表

3.  扩展模型的 change_form 模板以创建

4.  覆盖 ModelAdmin.save_model(self, request, obj, form, change) 以查看 request.data[] 以查找添加的字段。（当然，它们实际上不会出现在 ModelForm 中）。

**问题**

这可行，但似乎非常hacky。在 Django 1.4 中是否有更干净的解决方案来实现这一点？

# vba - MS Access VBA 是否有“关闭”事件？

> ID：12063404
> 
> 赞同：20
> 
> 时间：2012-08-21T21:34:51.033
> 
> 标签：vba, ms-access, ms-access-2007

在关闭访问数据库之前（每当用户关闭数据库时），我正在尝试执行一些特定操作。

我知道我们可以在 Excel VBA 中使用 Auto_Close 函数来强制关闭书籍之前的事件。MS Access VBA 中是否有类似的功能？如果是这样，一个例子将不胜感激。

如果您需要更多信息，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-21T21:51:03.730

不，MS Access 没有应用程序退出或关闭事件。常见的方法似乎是始终打开一个隐藏表单，然后在`unload`该表单的事件中处理应用程序的任何逻辑（始终在 Access 完全关闭之前触发）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-03T17:42:32.223

一种可能性是创建 Microsoft Access 共享 COM 加载项。但是，这需要安装 Visual Studio，以及一些中级编程技能。COM 加载项具有启动和关闭事件处理程序，当这些事件发生时，这些处理程序可用于执行某些操作。

# hadoop - 将现有向量转换为 Mahout 向量

> ID：12063407
> 
> 赞同：2
> 
> 时间：2012-08-21T21:35:07.890
> 
> 标签：hadoop, mahout, lda, sequencefile

我正在尝试将词频值转换为 mahout 向量表示，以便我可以在给定向量上使用 LDA。我正在关注 mahout wiki，其中代码片段建议如何将现有向量转换为 Mahout 向量。

[https://cwiki.apache.org/MAHOUT/creating-vectors-from-text.html](https://cwiki.apache.org/MAHOUT/creating-vectors-from-text.html)

这是我的代码，我得到一个 NullPointerException 来代替创建 VectorWriter。apache cwiki 建议使用，

```
VectorWriter vectorWriter = SequenceFile.createWriter(filesystem, configuration, outfile, LongWritable.class, SparseVector.class); 
```

但是，我在 org.apache.hadoop.io.SequenceFile 中看不到 SequenceFile.createWriter；

这是完整的代码段。

```
 fs = FileSystem.get(conf);
        //I"m using SeqeunceFile.Writer because SequenceFile.createWriter is not available.
        VectorWriter vectorWriter = (VectorWriter) new SequenceFile.Writer(fs, conf, path, LongWritable.class, RandomAccessSparseVector.class);

        ArrayList<Vector> weights = new ArrayList<Vector>();
        BufferedReader buffer = new BufferedReader(new FileReader("/home/hadoop/LDATest/LDAData/test"));
        String line = null;

        while((line = buffer.readLine()) != null)
        {    
            String[] data = line.split(" "); // split the term,weight data
            Vector weightVector = new RandomAccessSparseVector(1,1);
            weightVector.setQuick(0, Double.parseDouble(data[1])); // add the weight
            weights.add(weightVector);
        }

        vectorWriter.write(new VectorIterable(weights)); 
```

这是错误，

org.apache.hadoop.io.SequenceFile$Writer.init(SequenceFile.java) 的 org.apache.hadoop.io.serializer.SerializationFactory.getSerializer(SerializationFactory.java:73) 的线程“主”java.lang.NullPointerException 中的异常:910) 在 org.apache.hadoop.io.SequenceFile$Writer.(SequenceFile.java:843) 在 org.apache.hadoop.io.SequenceFile$Writer.(SequenceFile.java:831) 在 org.apache.hadoop。 io.SequenceFile$Writer.(SequenceFile.java:823) 在 kbsi.ideal.LDATest.iterableTest(LDATest.java:161) 在 kbsi.ideal.LDATest.main(LDATest.java:194)

我真的很感谢你在这方面的帮助。谢谢

# php - 无法在 PHP 中执行查询

> ID：12063409
> 
> 赞同：1
> 
> 时间：2012-08-21T21:35:10.220
> 
> 标签：php

我有一个 SQL 查询，如果我通过 PhpMyAdmin 手动运行它，它可以完美运行，但是，从 PHP 执行时它无法执行。

询问：

```
LOCK TABLE table_name WRITE;

SELECT @myRight := rgt FROM table_name
WHERE name = 'feildname';

UPDATE table_name SET rgt = rgt + 2 WHERE rgt > @myRight;
UPDATE table_name SET lft = lft + 2 WHERE lft > @myRight;

INSERT INTO table_name(name, lft, rgt) VALUES('new_feild_value', @myRight + 1, @myRight + 2);

UNLOCK TABLES; 
```

我想通过我的 PHP 页面运行查询，该页面具有`new_feild_value`从用户输入中获取的变量，可以在下面的代码中看到：

```
<?php
$newname = $_POST['newname'];
$sqlquery = 'LOCK TABLE table_name WRITE;

    SELECT @myRight := rgt FROM table_name
    WHERE name = "feildname";

    UPDATE table_name SET rgt = rgt + 2 WHERE rgt > @myRight;
    UPDATE table_name SET lft = lft + 2 WHERE lft > @myRight;

    INSERT INTO table_name(name, lft, rgt) VALUES("' .$newname . '", @myRight + 1, @myRight + 2);

    UNLOCK TABLES;';
if(!mysqli_query($link,$sqlquery)){ //$link is variable to make sql connection
                echo 'error inserting the comment';
            exit();
            }
 echo 'successfully inserted the values';
?> 
```

上面的 PHP 代码段不起作用，但对于相同的代码段，其他简单的查询都可以工作。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:38:03.280

您必须使用 mysqli_multi_query 在 mysqli 的一个语句中运行多个查询。[http://php.net/manual/en/mysqli.multi-query.php](http://php.net/manual/en/mysqli.multi-query.php)

# jpa - JPA：子对象的自动加载无法按预期工作

> ID：12063410
> 
> 赞同：3
> 
> 时间：2012-08-21T21:35:17.367
> 
> 标签：jpa, persistence, jpa-2.0, eclipselink

我有以下两个实体：

```
class Role {
  @Id Long id;
  @Column String email;
  String role;
  @ManyToOne User user;
}

class User {
  @Id Long id;
  @Column(unique=true) String email;
  String password;

  @OneToMany(mappedBy = "user")
  @OrderBy("role asc")
  List<Role> roles;
} 
```

SQL 是：

```
CREATE TABLE USER (
ID BIGINT NOT NULL, 
EMAIL VARCHAR(255) UNIQUE, 
PASSWORD VARCHAR(255), 
PRIMARY KEY (ID)
)
CREATE TABLE ROLE (
ID BIGINT NOT NULL, 
EMAIL VARCHAR(255),
ROLE VARCHAR(255), 
USER_ID BIGINT, 
PRIMARY KEY (ID),
FOREIGN KEY (USER_ID) REFERENCES USER(ID)
) 
```

以下 JUnit 在倒数第二行失败。我从孩子那里自动加载了用户（父母），但我没有从父母那里自动加载孩子。我做错了什么？

```
 Role r = em.createQuery("select r from Role r where r.email = :email", Role.class)
            .setParameter("email", "john@google.com")
            .getSingleResult();
    assertEquals("registered", r.role());
    assertEquals("john@google.com", r.user().email());

    User u = em.createQuery("select u from User u where u.email = :email", User.class)
            .setParameter("email", "john@google.com")
            .getSingleResult();

    assertEquals("john@google.com", u.email());
    assertEquals("asdf", u.password());

    assertEquals(1, u.roles().size()); FAILS HERE!!!
    assertEquals("registered", u.roles().get(0).role()); 
```

我正在使用 EclipseLink 2.3.2 (JPA)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:44:03.897

有多种方法可以告诉你应该如何加载另一个和一个关系。一个是在查询级别，使用 fetch join，如下所示：

```
select u from User u left join FETCH u.roles r where... 
```

另一个是关系声明级别，如下所示：

```
class User {
  @Id Long id;
  @Column(unique=true) String email;
  String password;

  @OneToMany(mappedBy = "user", fetch=FetchType.EAGER)
  @OrderBy("role asc")
  List<Role> roles;
} 
```

当您加载角色时，您还可以在没有任何特殊注释或加入查询的情况下获得用户的原因是 JPA 中的 ManyToOne 关系默认具有 fetch=EAGER ：

[http://docs.oracle.com/javaee/5/api/javax/persistence/ManyToOne.html#fetch](http://docs.oracle.com/javaee/5/api/javax/persistence/ManyToOne.html#fetch) ()

而一对多默认情况下有 fetch=lazy ：

[http://docs.oracle.com/javaee/5/api/javax/persistence/OneToMany.html#fetch](http://docs.oracle.com/javaee/5/api/javax/persistence/OneToMany.html#fetch) ()

# c - 在 ANSI C 中的控制流语句中组合比较测试

> ID：12063411
> 
> 赞同：0
> 
> 时间：2012-08-21T21:35:21.320
> 
> 标签：c, ansi, c89

我试图记住，如果使用标准 c 编译器（C89），下面的两个 if 语句将以相同的方式进行评估。

片段1：

```
boolean function(formattype* format)
{
    if(format != null && (*format == format1 || *format == format2 || *format == format3) )
        return true;
    else
        return false;
} 
```

将以与片段 2 相同的方式评估：

```
boolean function(formattype* format)
{

    if(format != null && (*format == format1 || format2 || format3) )
        return true;
    else
        return false;
} 
```

我只对第二次比较的评估感兴趣，我只是为了说明目的添加了这个函数。我似乎记得使用一些类似的方法来评估 == 使用每个 || 的参数，而不是全部输入，但不记得细节。

编辑：也许该功能使事情变得比它帮助说明的更加混乱。

我正在尝试评估以下内容

```
if(format != null && (*format == format1 || *format == format2 || *format == format3) ) 
```

第一个只是检查以防止取消引用空指针，因此请忽略它。后三个查看取消引用的格式指针是否等于三种不同格式类型中的任何一种（如果您必须知道，它们位于枚举中）。

我不想使用宏，我想简化比较。这可能是不可能的，我只是对执行类似操作有一个模糊的记忆。

我认为这与第二个示例类似。

```
if(format != null && (*format == format1 || format2 || format3) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:37:40.257

不，它们完全不同。第二个例子等价于：

```
if(format != null && ( (*format == format1) || (format2) || (format3) ) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:37:56.833

不，不会的。虽然第一个检查是有效的，但第二个会给你一个错误的结果。它基本上意味着：“如果（*格式等于格式1）或（格式2非零）或（格式3非零）” - 假设格式2或格式3非零，这将始终评估为真。

您可能打算篡改按位运算符。如果格式 1、2 和 3 是 2 的不同幂，那么您可以`*format`使用

```
if (*format & (format1 | format2 | format3)) 
```

不是按位（与逻辑相反）`AND`和`OR`运算符。但是，这种方法并不安全——即使指向的内存`format`是某些格式 1、2 和 3 常量的总和（假设`formattype`是整数类型），它也会评估为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:02:38.007

**如果**您可以访问 C++11 或 GCC 扩展，这里有两个使用宏的实现，可以满足您的需求：

```
// GCC extension version
#define OR_ALL(CMP, VALUES...) \
({ \
    __typeof__(CMP) values_arr[] = { VALUES }; \
    size_t values_cnt = sizeof(values_arr) / sizeof(*values_arr); \
    int found = 0;\
    for (int i = 0; i < values_cnt; i++) { \
        if (CMP == values_arr[i]){ \
            found = 1;\
            break;\
        }\
    }\
    found;\
})

// C++ 11 version
#define OR_ALL_CPP(CMP, VALUES...) or_all_cpp_impl<decltype(CMP), VALUES>(CMP)

template <typename T, T... args>
bool or_all_cpp_impl(T cmp)
{
    T arguments[] = { args... };
    size_t count = sizeof(arguments) / sizeof(T);

    for (int i = 0; i < count; i++) {
        if (cmp == arguments[i])
            return true;
    }

    return false;
} 
```

如果可用，我更喜欢 C++ 版本，但它们的功能相似。

# google-app-engine - 如何避免 Google 在 GAE 上将特定应用程序版本编入索引？

> ID：12063417
> 
> 赞同：-2
> 
> 时间：2012-08-21T21:36:24.947
> 
> 标签：google-app-engine, search, version, robot

我在 gae 上部署了一个网站。这个资源已经购买了一个域名，当然你可以去网站和标准域名类型app_id.appspot.com 加上这个也可以去那里和version_id.app_id.appspot.com。不仅如此，如果您输入 abrakadabra.app_id.appspot.com 获取默认版本。

所以谷歌机器人不知何故找到了我的版本1和2。对于搜索引擎优化不是很有帮助:(。加上所有机器人开始更频繁地访问该站点（增加负载）配额很快用完。也许有人已经遇到过这个问题，告诉我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:53:28.563

要回答您的问题：

您或许可以在 Google 网站管理员工具中指定首选域。请参阅： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&safe=on&answer=44231](http://support.google.com/webmasters/bin/answer.py?hl=en&safe=on&answer=44231)

此外，也许您可​​以使用规范 URL 来告诉 Google（和其他搜索引擎）要索引哪个版本。请参阅： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=139394&ctx=cb&src=cb&cbid=gh96oax614pa&cbrank=0](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394&ctx=cb&src=cb&cbid=gh96oax614pa&cbrank=0)

（请注意，StackOverflow 上有一个类似的问题： [appspot.com url 出现在谷歌搜索结果中，而不是自定义域名中](https://stackoverflow.com/questions/7315003/appspot-com-url-shows-up-in-google-search-results-instead-of-custom-domain-name)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:49:01.913

我现在的解决方案是：

```
public class VersionFilter implements Filter { 
```

...

```
 @Override
    public void doFilter(ServletRequest request, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        String serverName = request.getServerName();

        if (serverName.contains("appspot.com") && !UserBean.isAdmin()) {
            HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;
            if (request.getParameter("login") != null) {
                UserService userService = UserServiceFactory.getUserService();
                httpResponse.sendRedirect(userService.createLoginURL("/"));
            } else if (request.getParameter("logout") != null) {
                UserService userService = UserServiceFactory.getUserService();
                httpResponse.sendRedirect(userService.createLogoutURL("/"));
            } else {
                httpResponse.sendError(403);
            }
        }
        filterChain.doFilter(request, servletResponse);
    } 
```

... }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:41:44.960

最好的解决方案是在 url /robots.txt 上创建过滤器并发送版本主机文本，如下所示：

```
User-agent: *
Disallow: /* 
```

谷歌爬虫不再出现在版本化主机上！:)

# matlab - 跨维度转换matlab

> ID：12063419
> 
> 赞同：1
> 
> 时间：2012-08-21T21:36:32.063
> 
> 标签：matlab, computer-vision, convolution

我有一个 3D 体积，我想在第一维上应用一个高斯滤波器（带 conv）。这意味着我希望每一列都与过滤器独立地进行卷积。我需要类似的东西：

```
result = conv(cube, Gfilter, 1 ,'same') 
```

我尝试的是用零填充立方体的列（到过滤器宽度的大小），然后使用：

```
conv(cube(:), Gfilter) 
```

但这太耗费内存/时间了！

谢谢 Matlabit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T23:38:09.227

对于一维之间的卷积，您仍然可以使用`convn`. 我在这里假设这`Gfilter`是一个 k×1 数组。

```
result = convn(cube,Gfilter,'same'); 
```

# c++ - c++ 使用模板的未定义引用

> ID：12063422
> 
> 赞同：0
> 
> 时间：2012-08-21T21:36:46.727
> 
> 标签：c++, templates

所以我有以下代码：

```
template<class T>
class A
{
public:

  class B
  {
  public:
    virtual void Destroy(T obj);
  };

  B &_b;

  A(B b) : _b(b)
  {
  }

  void Go(T obj)
  {
    _b.Destroy(obj);
  }
};

class X : public A<int>::B
{
public:
  void Destroy(int x)
  {
    //do something
  }
};

int main()
{
  X x;
  A<int> a(x);
  a.Go(5);
  return 0;
} 
```

但我得到一个编译错误：

```
undefined reference to 'A<int>::B::Destroy(int)' 
```

我之前在单独的 .hpp 和 .cpp 文件中制作模板时遇到过问题......但这都在一个文件中。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:38:26.113

*   `virtual void Destroy(T obj);`没有实施。实现它或将其标记为虚拟纯`= 0`

*   `;`在定义之后没有`X`

*   `a.Go();`错了，`Go`应该带个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:40:56.833

添加一个定义`virtual void Destroy(T obj);`：

*   要么到位：

    ```
    class B
    {
    public:
        virtual void Destroy(T obj) { /* here! */ }
        // ==== ALTERNATIVELY: ====
        virtual void Destroy(T obj) = 0;  // pure-virtual
    }; 
    ```

*   或之后：

    ```
    template <typename T>
    void A<T>::B::Destroy(T obj) { /* here. */ } 
    ```

在任何情况下，构造函数`A`都应该引用：

```
A(B & b) : _b(b) { }
//^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T21:39:25.873

您还没有提供`Destroy()`in 的实现`B`，例如：

```
template<class T>
void A<T>::B::Destroy(T a) {
  // do something
} 
```

请注意，您还有其他编译错误：B 类主体后缺少分号，调用`Go()`.

# html - 使用 Telerik 控件设置属性值

> ID：12063437
> 
> 赞同：1
> 
> 时间：2012-08-21T21:38:01.437
> 
> 标签：html, asp.net-mvc, telerik

如何使用 Telerik 控件为属性赋值？

例如，我可以为下面的下拉“优先级”分配名称属性，但找不到分配 ID 或类属性的方法。

```
<%= Html.Telerik().DropDownList().Name("Priority").Items(items => {
items.Add().Text("Select").Value("Select");
items.Add().Text("Select").Value("High");
items.Add().Text("Select").Value("Medium");
items.Add().Text("Select").Value("Low")
})%> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:43:02.127

使用`HtmlAttributes()`方法。

像这样：

```
<% Html.Telerik().DropDownList()
                  .Name("Priority")
                  .HtmlAttributes(new{@class="className",@id="idName"})
%> 
```

# android - 如何制作一个在不同的类/活动/xml中创建另一个按钮的按钮？

> ID：12063447
> 
> 赞同：-2
> 
> 时间：2012-08-21T21:38:35.717
> 
> 标签：android, eclipse, class, button, android-activity

我想知道如何在我的 android 应用程序中编写一个按钮以在不同的 xml/类中创建/制作一个新按钮？有人可以帮我弄这个吗？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:04:00.540

我可以看到两种方法。

1.  像往常一样创建您想要启用的按钮，但在 XML 布局文件中创建另一个按钮。然后将其`android:visibility`参数设置为`gone`or `invisible`。现在您可以从代码中控制视图是否可见。用户`View.setVisibility()`来改变它。查看此链接以获取更多详细信息：http: [//developer.android.com/reference/android/view/View.html#setVisibility(int)](http://developer.android.com/reference/android/view/View.html#setVisibility(int))（它还解释了`invisible`和之间的区别`gone`）

2.  `ViewGroup`您可以从代码中动态添加视图。为此，您可以从代码中创建所需的按钮`... new Button(...)...`，然后`ViewGroup`通过调用将其添加到所需的`ViewGroup.addView(...)`. 有关该主题的更多信息：[Android：从代码向特定布局添加视图](https://stackoverflow.com/questions/3477581/android-add-a-view-to-a-specific-layout-from-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:04:36.417

您可以使用 setVisibility 方法。

只需将您希望“创建”的按钮设置为 INVISIBLE，当用户单击第一个按钮时，将第二个按钮的 setVisibility 设置为 VISIBLE，看起来您创建了一个新按钮。

阅读更多： [public void setVisibility（int可见性）](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

# sql - 根据另一个表中的两列从一个表中删除

> ID：12063451
> 
> 赞同：0
> 
> 时间：2012-08-21T21:38:46.860
> 
> 标签：sql, sap-ase

我需要根据另一个临时表中的两个值删除临时表中的值。换句话说，我不希望在 B 中留下任何 item_desc 用于在 A 中列出 style_cd 的 id。

```
#tempA
style_cd char(3),
id_cd varchar(15) 
```

一些示例值如下：

```
A, 123456
A, 654321
B, 321456
A, 654123
C, 424242 
```

.

```
#tempB
item_desc varchar(50),
item_num char(4),
style_cd char(3),
id_cd varchar(15) 
```

此表的示例值：

```
item 1,  7, A, 123456
item 2, 14, B, 123456 
item 2, 14, A, 123456
item 3, 23, A, 123456
....snip....
item 2, 14, B, 654321
item 2, 14, A, 654321
item 6, 44, A, 654321 
```

例如 - 对于 id 123456，我想从 B 中删除项目 2 的两个条目。每个项目可以有多个与之关联的样式。一个 id 通常只有一种样式与之关联，但可以想象有多种样式。

我一定遇到了障碍，因为这似乎并不复杂。我已经为此工作了两天，除了删除所有行之外什么都没有。我一直在尝试以下方式：

```
DELETE #tempB
WHERE style_cd IN 
    (SELECT style_cd
     FROM #tempB b JOIN tempA a
     ON b.id_cd = a.id_cd
     AND b.style_cd = a.style_cd) 
```

当然，这会删除所有行，我一生都无法弄清楚如何只删除与表 A 中为 id 列出的 style_cd 值关联的行。我希望这是有道理的，有人可以把我摆脱我的痛苦！！！！

我正在使用 Sybase ASE 15.0.2

添加...我以@john 的建议为起点。当我测试选择时，它会挑选出我需要的行。

```
 SELECT a.style_cd
    FROM #tempB b
      JOIN #tempA a
      ON a.id_cd = b.id_cd
      AND a.style_cd = b.style_cd 
```

当我添加任何 Delete 子句时，它会清除所有内容

```
DELETE FROM #tempB
WHERE style_cd IN 
(SELECT style_cd
 FROM #tempB b JOIN tempA a
 ON b.id_cd = a.id_cd
 AND b.style_cd = a.style_cd) 
```

不知何故，我不只是从 tempB 中删除的选择中获取列表中的行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:00:14.760

这只是和之间的简单`DELETE #tempDB`混淆`DELETE *FROM* #tempDB`

尝试像这样修改相同的查询：

```
DELETE FROM #tempB
WHERE style_cd IN 
    (SELECT style_cd
     FROM #tempB b JOIN tempA a
     ON b.id_cd = a.id_cd
     AND b.style_cd = a.style_cd) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:10:32.400

试试这个：

```
DELETE FROM #tempB
WHERE id_cd IN 
    (SELECT a.id_cd
     FROM #tempB b, tempA a
     where b.style_cd = a.style_cd) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T22:14:08.017

这是最终起作用的...

```
 SELECT a.style_cd, item_desc,rowindex
    into #deltable
    FROM #tempB b
      JOIN #tempA a
      ON a.id_cd = b.id_cd 
      AND a.style_cd = b.style_cd

delete from #tempB
where rowindex in
(select rowindex from #deltable)

delete from #tempB
where item_desc in(
select b.item_desc
from #tableB a
join #deltable b
on a.item_desc= b.item_desc 
```

我在#tempB 中添加了一个标识列（rowindex）并用它来进行删除。我仍然必须对其进行测试，但到目前为止....它有效。感谢所有的轻推。

# c - spawn() 函数（在“spawn.h”中声明）从何而来？

> ID：12063462
> 
> 赞同：0
> 
> 时间：2012-08-21T21:39:41.173
> 
> 标签：c, spawn

我无法编译这个简单的程序

```
#include<stdio.h>
#include<conio.h>
#include<spawn.h>
#include<process.h>

int main(){
    printf("Spawning new process...\n");
    spawnl(P_WAIT,"curl","www.google.co.in",NULL);
    system("cls");
    printf("Program execution completed somehow!\n");
    getch();
    return 0;
} 
```

我尝试使用以下命令：

```
g++ filename.cpp -l -o filename.cpp 
```

结果：`ld.exe cannot find -l exit with status 1`

```
g++ filename.cpp -o filename 
```

结果：`error: spawn.h No such file or directory.`

我的 MinGW 安装有问题吗？我正在使用 Windows 7 32 位和 MinGW。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:46:26.800

`spawn.h`不是标准的 C/C++ 头文件。POSIX 定义了一个非标准的标`<spawn.h>`头，但它没有定义一个`spawnl`函数，而且 Windows 也不是一个符合 POSIX 的系统。

Windows 确实在 中定义了该[`_spawnl`](http://msdn.microsoft.com/en-us/library/wweek9sc%28v=vs.80%29.aspx)函数`<process.h>`，因此最简单的方法就是删除包含`<spawn.h>`并改用它。您还可以重写代码以使用 Windows 功能[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。

# python - Gunicorn 配置文件在哪里？

> ID：12063463
> 
> 赞同：52
> 
> 时间：2012-08-21T21:39:41.500
> 
> 标签：python, flask, gunicorn

gunicorn 文档讨论了编辑配置文件，但我不知道它在哪里。

可能是一个简单的答案 :) 我在 Amazon Linux AMI 上。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-12T09:03:16.690

答案在 gunicorn 的文档中。 [http://docs.gunicorn.org/en/latest/configure.html](http://docs.gunicorn.org/en/latest/configure.html)

您可以使用 .ini 或 python 脚本指定配置文件。

例如，来自 django-skel 项目

```
"""gunicorn WSGI server configuration."""
from multiprocessing import cpu_count
from os import environ

def max_workers():    
    return cpu_count()

bind = '0.0.0.0:' + environ.get('PORT', '8000')
max_requests = 1000
worker_class = 'gevent'
workers = max_workers() 
```

你可以使用运行服务器

```
gunicorn -c gunicorn.py.ini project.wsgi 
```

请注意 project.wsgi 对应于您的 wsgi 的位置。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-03-23T11:59:21.637

示例文件在这里：[https ://github.com/benoitc/gunicorn/blob/master/examples/example_config.py](https://github.com/benoitc/gunicorn/blob/master/examples/example_config.py)

您可以只注释掉不需要的内容，然后将 Gunicorn 指向它，如下所示：

```
gunicorn -c config.py myproject:app 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-11-23T13:49:05.847

[就默认名称而言，Gunicorn 将在执行 Gunicorn 的目录中](https://github.com/benoitc/gunicorn/blob/4ef01b1c100e7590ace3e1cac5a83b81974a6161/gunicorn/config.py#L527)查找名为的配置文件[`gunicorn.conf.py`](https://github.com/benoitc/gunicorn/blob/4ef01b1c100e7590ace3e1cac5a83b81974a6161/gunicorn/config.py#L527)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-12-01T17:57:24.413

**默认配置从`site-packages/gunicorn/config.py`**

```
$ python -c "from distutils.sysconfig import get_python_lib; print('{}/gunicorn/config.py'.format(get_python_lib()))"
(output)
/somepath/flask/lib/python2.7/site-packages/gunicorn/config.py 
```

您可以运行`strace`以查看正在以什么顺序打开哪些文件`gunicorn`

**gunicorn 应用程序：app -b 0.0.0.0:5000**

```
$ strace gunicorn app:app -b 0.0.0.0:5000
stat("/somepath/flask/lib/python2.7/site-packages/gunicorn/config", 0x7ffd665ffa30) = -1 ENOENT (No such file or directory)
open("/somepath/flask/lib/python2.7/site-packages/gunicorn/config.so", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/somepath/flask/lib/python2.7/site-packages/gunicorn/configmodule.so", O_RDONLY) = -1 ENOENT (No
such file or directory)
open("/somepath/flask/lib/python2.7/site-packages/gunicorn/config.py", O_RDONLY) = 5
fstat(5, {st_mode=S_IFREG|0644, st_size=53420, ...}) = 0
open("/somepath/flask/lib/python2.7/site-packages/gunicorn/config.pyc", O_RDONLY) = 6 
```

**gunicorn -c g_config.py 应用程序：应用程序**

```
$ strace gunicorn -c g_config.py app:app
//    in addition to reading default configs, reads '-c' specified config file
stat("g_config.py", {st_mode=S_IFREG|0644, st_size=6784, ...}) = 0
open("g_config.py", O_RDONLY) 
```

不要修改站点包中的配置文件，而是创建一个本地`gconfig.py`（任何名称）并仅定义要设置非默认值的变量，因为始终读取默认配置文件。

传递为`gunicorn -c gconfig.py`

```
$ cat gconfig.py // (eg)
bind = '127.0.0.1:8000'
workers = 1
timeout = 60
. . . 
```

或使用命令行选项而不是配置文件：

```
gunicorn app:app -b 0.0.0.0:5000 -w 1 -t 60 
```

***gunicorn 配置文件属性/标志： [http ://docs.gunicorn.org/en/stable/settings.html#settings](http://docs.gunicorn.org/en/stable/settings.html#settings)***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-22T06:33:00.623

我在阅读文档后这样做了：

* * *

1.  通过 gunicorn 部署我的应用程序时，通常有一个名为 Procfile 的文件
2.  打开这个文件，添加--timeout 600

最后，我的 Procfile 会是这样的：

*网站：gunicorn app:app --timeout 600*

# ios - UIView 子类（自定义进度视图）直到为时已晚才显示

> ID：12063464
> 
> 赞同：0
> 
> 时间：2012-08-21T21:39:52.170
> 
> 标签：ios, networking, user-interface, uiview, download

我想在下载一些数据（同步）时查看进度，但我的 UIView 子类（自定义进度视图）在下载完成之前不会显示。这是一些代码：

```
self.progressView.hidden = NO;

// I would expect the progressView to show up now
// but it doesn't

int i = 0;
for (Something *something in someList) {
    if (something...) {
        i++;
        // do something

        // start downloading some data
        NSString *urlPath = [NSString stringWithFormat:@"somePath"];
        NSURL *aURL = [NSURL URLWithString:urlPath];

        NSData* responseData = [NSData aURL];

        // parse out the JSON data
        NSError* error = nil;
        NSArray* json = [NSJSONSerialization
                         JSONObjectWithData:responseData
                         options:kNilOptions
                         error:&error];

        for (NSDictionary *currentObject in json) {
            // do some stuff
        }
    }
}

// the progressView does show up here... why? 
```

我在下载任何内容之前更改为非隐藏的进度视图在所有下载完成后显示。为什么呢？以及如何在所有下载内容之前显示 progressView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:45:05.270

因为您的下载阻塞了主线程，否则 UI 可能会使用它来更新屏幕的内容。解决方案：为所有网络内容生成一个新线程。

# c++ - 将 boost::program_options 组合成强制组

> ID：12063465
> 
> 赞同：7
> 
> 时间：2012-08-21T21:39:54.833
> 
> 标签：c++, boost, boost-program-options

我正在使用 boost::program_options 来处理程序的命令行参数。在下面的程序中，我希望将算法、交换和 admin_port 组合在一起，以便它们都应该提供，否则会引发异常（即，除非它们在一起，否则没有意义）。

我还想以一种可以明显看出它们是一组的方式将它们打印出来。

如何最好地实现这一目标？

```
#include <boost/program_options.hpp>
#include <cassert>
#include <iostream>
#include <string>

namespace prog_opts = boost::program_options;

int main(int argc, char *argv[])
{
    int rc = 0;

    prog_opts::options_description desc("Usage");
    desc.add_options()
        ("algo", prog_opts::value<std::string>(), "Name of the algo to run")
        ("exchanges", prog_opts::value< std::vector<std::string> >(), "Name(s) of the exchanges which will be available for use")
        ("admin_port", prog_opts::value<unsigned>(), "Admin port on which admin requests will be listened for")
        ("version", "Show version information")
        ("help", "Show help information");

    prog_opts::variables_map args;

    try
    {
        prog_opts::store(prog_opts::parse_command_line(argc, argv, desc), args);
        prog_opts::notify(args);

        if(args.count("algo") && args.count("exchanges") && args.count("admin_port"))
        {
            //TODO:
        }
        else if(args.count("version"))
        {
            //TODO:
        }
        else if(args.count("help"))
        {
            std::cout << desc << std::endl;
        }
        else
        {
            std::cerr << desc << std::endl;
            rc = 1;
        }  
    }
    catch(const prog_opts::error& e)
    {
        std::cerr << "Failed start with given command line arguments: " << e.what() << std::endl;
        rc = 1;
    }

    return rc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:18:56.647

要创建强制组，您可以使用

`prog_opts::value<std::string>()->required()`

在程序的选项描述部分。这看起来像这样：

```
#include <boost/program_options.hpp>
#include <cassert>
#include <iostream>
#include <string>

namespace prog_opts = boost::program_options;

int main(int argc, char *argv[])
{
int rc = 0;

prog_opts::options_description desc("Usage");
desc.add_options()
    ("algo", prog_opts::value<std::string>()->required(), "Name of the algo to run")
    ("exchanges", prog_opts::value< std::vector<std::string> >()->required(), "Name(s) of the exchanges which will be available for use")
    ("admin_port", prog_opts::value<unsigned>()->required(), "Admin port on which admin requests will be listened for")
    ("version", "Show version information")
    ("help", "Show help information");

prog_opts::variables_map args;

try
{
    prog_opts::store(prog_opts::parse_command_line(argc, argv, desc), args);
    prog_opts::notify(args);

    if(args.count("algo") && args.count("exchanges") && args.count("admin_port"))
    {
        //TODO:
    }
    else if(args.count("version"))
    {
        //TODO:
    }
    else if(args.count("help"))
    {
        std::cout << desc << std::endl;
    }
    else
    {
        std::cerr << desc << std::endl;
        rc = 1;
    }  
}
catch(const prog_opts::error& e)
{
    std::cerr << "Failed start with given command line arguments: " << e.what() << std::endl;
    rc = 1;
}

return rc;
} 
```

我建议您详细查看 boost 文档：http: [//www.boost.org/doc/libs/1_32_0/doc/html/program_options/overview.html#id548509](http://www.boost.org/doc/libs/1_32_0/doc/html/program_options/overview.html#id548509)

此外，对于更复杂的参数依赖关系，将它们“组合”在一起可能是有意义的，创建几个选项描述。 [http://www.boost.org/doc/libs/1_32_0/doc/html/program_options/howto.html#id549397](http://www.boost.org/doc/libs/1_32_0/doc/html/program_options/howto.html#id549397)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:19:36.993

我将通过以下方式“手动”实现该功能。我不知道 Boost 提供的任何其他功能。

```
unsigned int requiredArgsGroupCount = args.count("algo") + args.count("exchanges") + args.count("admin_port");
if ( (requiredArgsGroupCount > 0) && (requiredArgsGroupCount < 3) )
{
    // Indicate that all three arguments must be specified
} 
```

只需在参数描述文本中指出，如果指定了一个，则所有三个都是必需的。

# ios - MonoTouch：版本 5.2.12 中的引用计数错误

> ID：12063470
> 
> 赞同：1
> 
> 时间：2012-08-21T21:40:31.947
> 
> 标签：ios, mono, xamarin.ios, monodevelop

MonoTouch 最近发布了 5.2.13 版本，以修复新版本 iOS 中的引用计数问题。

在较新版本的 iOS 中运行我们的应用程序似乎没问题。我们根本不使用 XCode 或 Interface Builder。

我们可以做些什么来查看我们的应用程序是否未能解决引用计数问题，是否有某种操作，例如创建大量 XYZ 或更新 ABC 来对我们的应用程序进行压力测试以适应新版本的 iOS 系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T01:14:01.177

使用以下命令在 XCode 的 Instruments 下运行您的应用程序：

a) iOS 上的旧版本（例如 5.1）和；

b) 在*真正新*版本的 iOS 下。

使用应用程序一段时间并比较它们的内存使用情况（即，即使初始内存使用情况因 iOS 版本而异，它们也应该具有可比性）。

# php - 使用正则表达式删除 PHP 中的字符

> ID：12063475
> 
> 赞同：0
> 
> 时间：2012-08-21T21:40:57.923
> 
> 标签：php, mysql

我有一个包含很多行的 MySQL 表列。

以下是数据格式的示例：

```
TEST-DATA (ID:123) 
```

如何`(ID:123)`使用 PHP 正则表达式删除部分？

请注意，`(ID:123)`表格列中的每一行都包含不同的数字。

```
TESTDATA2(ID:1)
DATAAGAIN(ID:78)
MOREDATA(ID:45)
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T21:44:46.457

试试这个：

```
$string = preg_replace( '/\(ID:[0-9]+\)/', '', $string ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T21:48:11.180

您可以使用[`preg_replace()`](http://php.net/manual/en/function.preg-replace.php).

> preg_replace — 执​​行正则表达式搜索和替换

例子：

```
echo preg_replace("/\([^\)]+\)/", "", $value); 
```

表达式分解：

```
/  - Opening delimiter 
\( - Match an opening parenthesis 
[^\)]+ - Match one or more characters that are not a closing parenthesis 
\) - Match a closing parenthesis
/  - Closing delimiter 
```

替换`$value`为您的列值的变量。

# java - Spring MVC 3 将常规表单绑定到 DTO

> ID：12063478
> 
> 赞同：1
> 
> 时间：2012-08-21T21:41:10.760
> 
> 标签：java, spring-mvc

你能绑定常规的 HTML 表单吗（不使用 Springs`<form:form>)`标记到 DTO？我知道我在控制器中使用 @RequestParam 获取值，但是我可以让 Spring 自动将表单绑定到 DTO 吗？如果可以，怎么做？

我无法使用 Springs `<form:form>`，因为我预定义了与 springs 不兼容的上传表单。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T01:14:26.390

是的你可以。请记住，JSP 标记库只影响生成 HTML 并将其发送到客户端的方式。因此，您可以手动创建完全相同的 HTML（例如，只使用普通的旧 HTML）并且页面的功能将完全相同。

`<form>`只要记住在你的和标签等中包含必要的属性`<input>`，然后在你的控制器中像往常一样简单地绑定到你的表单支持bean。

# c# - 为单个字符/字形（OCR）实现模板匹配

> ID：12063485
> 
> 赞同：1
> 
> 时间：2012-08-21T21:42:13.460
> 
> 标签：c#, .net, algorithm, ocr, template-matching

我正在开发一个可以识别希伯来字符的 C# OCR 程序（用于我自己的学习目的的项目，没有商业质量）。我计划通过从图像中分离字形然后应用模板匹配方法来做到这一点。

**我在哪里**

我现在有了它，这样我就可以将单个字形从图像中分离出来。每个字形都用一个 2D 像素数组表示。例如，字符“bet”看起来像：

```
..........
.*******..
.......*..
.......*..
.********.
.......... 
```

在哪里 ”。” 表示空白，“*”表示填充像素。

我现在要应用模板匹配算法来识别这个二维像素数组代表什么字形（在这种情况下，它应该匹配“赌注”模板）。

**问题**

我很难找到一个好的模板匹配算法的简单解释（我发现的大部分是论文或代码库的链接），并且想知道是否有人知道我可能研究的任何内容。

我想强调一下，我想手动完成，而不是简单地使用库。我愿意研究图书馆如何解决这个问题，但是，如果它不分成十五亿个不同的部分。:)

我也愿意听听是否有更好的方法来做我想做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:27:27.067

为每个模板生成一个数字，因为它是像素数组，如果您将每个像素与一个数字（如 0、2、4、8、16 等）相关联，空像素为 0，填充像素为 1。

然后对于每个字形还计算总数并匹配它们。

# ajax - ajax 调用的验证码

> ID：12063486
> 
> 赞同：0
> 
> 时间：2012-08-21T21:42:28.770
> 
> 标签：ajax, captcha

我们的网站受到了巨大的垃圾邮件攻击，因此我计划在看到更多垃圾邮件命中时在我们的网站上使用验证码。

但我想知道如何处理 ajax 请求？浏览器在内部对 tomcat 服务器进行了一些 ajax 调用。但是我不能将验证码扔给这些 ajax 请求，因为它们来自浏览器（通过 js）。因此，如果我从验证码检查中排除 ajax 请求，那么我们的网站仍然通过 ajax 调用向垃圾邮件发送者开放。

请建议我应该用什么方法来有效地处理 ajax 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:51:05.223

一开始就要求用户输入*一次*验证码。将成功的结果存储在 HTTP 会话中。然后每次调用（AJAX 与否）都应该检查是否执行了 CAPTCHA 测试。

# php - 在注册和登录时加密密码

> ID：12063491
> 
> 赞同：1
> 
> 时间：2012-08-21T21:42:54.997
> 
> 标签：php, sql, pdo, md5, registration

我在我的网站上设置了注册系统，当用户注册时，密码是他们注册时使用的电子邮件和密码的 md5 混合。不幸的是，我无法让它正常工作。这是代码：

注册时：

```
$user = strip_tags(substr($_POST['email'],0,32));
$pass = strip_tags(substr($_POST['password'],0,32));
$cleanPass = crypt(md5($pass),md5($user));
$date = time();

$stmt = $db->prepare("INSERT INTO users (password, email, first, last, date)
        VALUES(:password, :email, :first, :last, :date)"); 
```

登录时：

```
$email = $_POST['email'];
$user = strip_tags(substr($_POST['email'],0,32));
$pass = strip_tags(substr($_POST['password'],0,32));        

$cleanPass = crypt(md5($pass),md5($user));

$stmt = $db->prepare("SELECT email,password FROM users WHERE email=:email AND password=:password limit 1"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:03:24.917

如果您想在存储数据时使用用户/密码的组合，您可能想要考虑的是加密机制的长度。通常，当您这样做时，您不会加密用户和密码的 2 个 md5，而是执行类似的操作

```
$cleanPass = md5( $user.$pass ); 
```

如果你还想存储用户，你不应该 md5 那个。如果你想存储通行证，md5 它。

这有帮助吗？

# css - 你如何使弹出窗口溢出滚动div？

> ID：12063493
> 
> 赞同：27
> 
> 时间：2012-08-21T21:42:59.693
> 
> 标签：css

我有一个滚动 DIV，其中包含许多项目的列表：

```
 ___________
|         |^|
| Item1   | |
|_________| |
|         | |
| Item2   | |
|_________| |
|         | |
| Item3   | |
|_________|v| 
```

当用户滚动列表项时，会出现一个描述该项目的弹出窗口：

```
 ___________
|         |^|
| Item1   | |
|_________| |
|        _|_|____________________
| Item2 | Description for item 2 |
|________------------------------
|         | |
| Item3   | |
|_________|v| 
```

困境是滚动的 div 必须有溢出：自动，但弹出窗口希望在 div 之外可见。所以目前，我的弹出窗口被砍掉了：

```
 ___________
|         |^|
| Item1   | |
|_________| |
|        _|_|
| Item2 | De|
|________---|
|         | |
| Item3   | |
|_________|v| 
```

**HTML**

```
<div id="box">
  <ul>
    <li>
       <h2>Item 1</h2>
       <span>Description for item 1</span>
    </li>
    <li>
       <h2>Item 2</h2>
       <span>Description for item 2</span>
    </li>
    <!-- ... and many other items --->
  </ul>
</div> 
```

**CSS**

```
#box {
   width: 10em;
   height: 20em;
   overflow: auto;
}

#box ul {
   line-height: 2em;
}

#box ul li {
   position: relative;
}

#box ul li span {
   display: none;
   position: absolute;
   right: -1em;
   top: 1em;
   height: 1em;
}

#box ul li:hover span {
   display: block;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:03:28.637

您可以尝试在弹出元素上使用 position:fixed 进行试验，看看是否对您有帮助：

[http://jsfiddle.net/SpEb2/](http://jsfiddle.net/SpEb2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:12:16.683

我会建议你做其他事情来解决这个问题。如果你使用 JavaScript，你可以专门为弹出框制作一个模块。因此，每当您想在当前页面中弹出窗口时，只需包含该模块即可。

您可以将该模块 html 和 JavaScript 混合在一起，并带有一个具有绝对位置的隐藏弹出 div。每当您将光标移到页面上启用工具提示的某个元素上时，只需调用 JavaScript 函数将隐藏的弹出窗口带到光标（或元素）所在的位置并显示带有适当信息的弹出窗口。

这种实现可以使您的弹出系统非常模块化和适应性强，您可以在整个网站中拥有统一的弹出窗口，并且可以非常轻松地修改其属性。

# refactoring - 一个新手问有经验的程序员：从头开始重写——推荐还是不推荐？

> ID：12063495
> 
> 赞同：0
> 
> 时间：2012-08-21T21:43:06.260
> 
> 标签：refactoring, project-management, rewrite, computer-science

我是一个自以为是的新手程序员，我正在开发我的第一个 Web 应用程序 - 一个用户可以注册、登录、然后将内容发布到数据库或搜索数据库的网站。

我目前大约有 150 个文件，并且在此过程中学到了很多东西。我的编码技能已经飞到了顶峰（与以前相比）。

现在我有点卡住了。我知道我的网站仍然存在许多安全问题（我知道如何解决它们），我也意识到我使用了一个贬值的函数（旧的 PHP mySQL API）并且我刚刚发现了一种更好的方法来处理帖子数据。我还注意到，我的网站开始变得有点慢，我认为有几个地方可以压缩我的代码。

我试图让我的代码保持整洁、有条理和结构良好。但是，当我添加一些文件时，它们有点失控了。我最糟糕的文件之一是 550 行长，其他文件我无法弄清楚我到底在做什么......

我在从头开始重写所有内容和尝试解决这些问题的想法之间来回挣扎，我知道。

我觉得我可以做得更好，从头开始（毕竟我从开始就获得了很多经验）。另一方面，我相信它会永远持续下去，即使我可能只能复制和粘贴几个部分。

就像我说的那样，我学到了许多新的功能和技术，现在我可以实施，以改进网站 - 但我也担心几个月后我可能会再次遇到类似的问题，并发现我自己也在争论是否重写代码。

所以我对有经验的程序员的问题是：新手从头开始重写代码是个好主意吗？或者每个程序员都会在编程一段时间后发现自己处于这个位置，一切似乎都需要改造？

我确实读过这篇文章[何时从头开始重写代码库，](https://stackoverflow.com/questions/1064403/when-to-rewrite-a-code-base-from-scratch)但我觉得我的问题来自不同的角度。这不像是我收到了这段代码，而是我自己写的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:48:56.683

一篇经典的 Joel Spolsky[关于你不应该做](http://www.joelonsoftware.com/articles/fog0000000069.html)的事情的文章可能值得一读。

你很少有机会重写（IMO 经验，从来没有）所以你不妨学习如何修复你拥有的代码。

# xslt - 如何增加 xslt 中设置的每个节点

> ID：12063498
> 
> 赞同：2
> 
> 时间：2012-08-21T21:43:18.953
> 
> 标签：xslt

我有这个xml：

```
<root>
    <row>
        <number>1001461</number>
        <unit>CAN</unit>
    </row>
    <row>
        <number>1001462</number>
        <unit>KG</unit>
    </row>
</root> 
```

我的 Xslt：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="xml" indent="yes"/>
    <xsl:param name="formid" select="60202" />

  <xsl:template match="@* | node()">
      <DocumentElement>
          <xsl:apply-templates>
            <xsl:with-param name="primarykey" select="position()"/>
          </xsl:apply-templates>
      </DocumentElement>
    </xsl:template>

  <xsl:template match="row" name="trow">
    <xsl:param name="primarykey"/>
    <xsl:for-each select="*">
      <SaveDataTable>
        <KeyName>
          <xsl:value-of select="name()"/>
        </KeyName>
        <KeyValue>
          <xsl:value-of select="."/>
        </KeyValue>
        <PrimaryKey>
          <xsl:value-of select="concat('-',$primarykey)"/>
        </PrimaryKey>
        <FormId>
          <xsl:value-of select="$formid"/>
        </FormId>
      </SaveDataTable>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

预期输出：（注意前两个`<PrimaryKey>`有-1，后两个有-2，这就是我需要的）

```
<DocumentElement>
    <SaveDataTable>
        <KeyName>number</KeyName>
        <KeyValue>1001461</KeyValue>
        <PrimaryKey>-1</PrimaryKey>
        <FormId>60202</FormId>
    </SaveDataTable>
    <SaveDataTable>
        <KeyName>unit</KeyName>
        <KeyValue>CAN</KeyValue>
        <PrimaryKey>-1</PrimaryKey>
        <FormId>60202</FormId>
    </SaveDataTable>
    <SaveDataTable>
        <KeyName>number</KeyName>
        <KeyValue>1001462</KeyValue>
        <PrimaryKey>-2</PrimaryKey>
        <FormId>60202</FormId>
    </SaveDataTable>
    <SaveDataTable>
        <KeyName>unit</KeyName>
        <KeyValue>KG</KeyValue>
        <PrimaryKey>-2</PrimaryKey>
        <FormId>60202</FormId>
    </SaveDataTable>
</DocumentElement> 
```

基本上对于每个`<row>...</row>`应该`<PrimaryKey>-1</PrimaryKey>`减 1，但它没有发生。所有`<PrimaryKey>`元素的值都是 -1 而不是 -1、-2 等等。

============================================

更新：我有点让它工作，但我不确定它是否有效。

工作 xslt（可能需要改进）：

```
<xsl:stylesheet version="1.0" exclude-result-prefixes="msxsl" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
    <xsl:output method="xml" indent="yes"/>
    <xsl:param name="formid" select="60202"/>
    <xsl:template match="@* | node()">
        <DocumentElement>
            <xsl:for-each select="row">
                <xsl:call-template name="trow">
                    <xsl:with-param name="primarykey" select="position()"/>
                </xsl:call-template>
            </xsl:for-each>
        </DocumentElement>
    </xsl:template>
    <xsl:template name="trow">
        <xsl:param name="primarykey"/>
        <xsl:for-each select="*">
            <SaveDataTable>
                <KeyName>
                    <xsl:value-of select="name()"/>
                </KeyName>
                <KeyValue>
                    <xsl:value-of select="."/>
                </KeyValue>
                <PrimaryKey>
                    <xsl:value-of select="concat('-',$primarykey)"/>
                </PrimaryKey>
                <FormId>
                    <xsl:value-of select="$formid"/>
                </FormId>
            </SaveDataTable>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T00:29:21.403

另一种方法（以“推”而不是“拉”风格）将处理分解为模板：

```
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >

    <xsl:output method="xml" indent="yes"/>
    <xsl:param name="formid" select="60202"/> 
```

将整个文档的结果包装在`DocumentElement`.

```
 <xsl:template match="/">
        <DocumentElement>
          <xsl:apply-templates/>
        </DocumentElement>
    </xsl:template> 
```

对于每一行，获取其位置编号。我们使用`xsl:number`而不是`position()`因为我们不想计算文本节点。

```
 <xsl:template match="row" priority="10">
      <xsl:variable name="pos">
        <xsl:number count="row" level="single"/>
      </xsl:variable>
      <SaveDataTable>
        <xsl:apply-templates>
          <xsl:with-param name="pkey" select="-1 * $pos"/>
        </xsl:apply-templates>
      </SaveDataTable>
    </xsl:template> 
```

在元素的每个子`row`元素上，发出一个`SaveDataTable`包含键名、键值、主键和表单 ID 的元素。

```
 <xsl:template match="row/*">
      <xsl:param name="pkey"/>
      <KeyName>
        <xsl:value-of select="name()"/>
      </KeyName>
      <KeyValue>
        <xsl:value-of select="."/>
      </KeyValue>
      <PrimaryKey>
        <xsl:value-of select="$pkey"/>
      </PrimaryKey>
      <FormId>
        <xsl:value-of select="$formid"/>
      </FormId>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:41:00.423

您可以尝试此解决方案，但我认为它的效率低于您的：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:param name="formid" select="60202"/>

  <xsl:template match="/root">
    <DocumentElement>
      <xsl:apply-templates select="row/*"/>
    </DocumentElement>
  </xsl:template>

  <xsl:template match="*">
    <SaveDataTable>
      <KeyName>
        <xsl:value-of select="name()"/>
      </KeyName>
      <KeyValue>
        <xsl:value-of select="."/>
      </KeyValue>
      <PrimaryKey>
        <xsl:value-of select="-1 * (count(../preceding-sibling::row) + 1)"/>
      </PrimaryKey>
      <FormId>
        <xsl:value-of select="$formid"/>
      </FormId>
    </SaveDataTable>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T05:01:39.583

推式解决方案——类似于 CM Sperberg-McQueen 的解决方案，但由于`xsl:number`计算 no 并将位置作为参数传递，因此效率可能略高一些。

另一个区别是我们不需要`priority`在任何模板上指定属性。

此外，我们不乘以 -1。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

        <xsl:param name="pFormid" select="60202"/>

        <xsl:template match="/*">
            <DocumentElement>
                <xsl:apply-templates/>
            </DocumentElement>
        </xsl:template>

        <xsl:template match="row">
            <xsl:apply-templates select="*">
             <xsl:with-param name="pPos" select="position()"/>
            </xsl:apply-templates>
        </xsl:template>

        <xsl:template match="row/*">
          <xsl:param name="pPos"/>

            <SaveDataTable>
                    <KeyName>
                        <xsl:value-of select="name()"/>
                    </KeyName>
                    <KeyValue>
                        <xsl:value-of select="."/>
                    </KeyValue>
                    <PrimaryKey>
                        <xsl:value-of select="-$pPos"/>
                    </PrimaryKey>
                    <FormId>
                        <xsl:value-of select="$pFormid"/>
                    </FormId>
                </SaveDataTable>
        </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<root>
    <row>
        <number>1001461</number>
        <unit>CAN</unit>
    </row>
    <row>
        <number>1001462</number>
        <unit>KG</unit>
    </row>
</root> 
```

**产生了想要的正确结果**：

```
<DocumentElement>
   <SaveDataTable>
      <KeyName>number</KeyName>
      <KeyValue>1001461</KeyValue>
      <PrimaryKey>-1</PrimaryKey>
      <FormId>60202</FormId>
   </SaveDataTable>
   <SaveDataTable>
      <KeyName>unit</KeyName>
      <KeyValue>CAN</KeyValue>
      <PrimaryKey>-1</PrimaryKey>
      <FormId>60202</FormId>
   </SaveDataTable>
   <SaveDataTable>
      <KeyName>number</KeyName>
      <KeyValue>1001462</KeyValue>
      <PrimaryKey>-2</PrimaryKey>
      <FormId>60202</FormId>
   </SaveDataTable>
   <SaveDataTable>
      <KeyName>unit</KeyName>
      <KeyValue>KG</KeyValue>
      <PrimaryKey>-2</PrimaryKey>
      <FormId>60202</FormId>
   </SaveDataTable>
</DocumentElement> 
```

# android - 打开通知时出现空指针异常

> ID：12063499
> 
> 赞同：1
> 
> 时间：2012-08-21T21:43:26.317
> 
> 标签：android, android-notifications, google-cloud-messaging

我在 GCM 中为一个 android 应用程序创建了一些通知，我可以很好地创建通知，但是当我尝试从下拉栏中打开它们时，我的应用程序没有打开。签入 LogCat 我可以看到如下回溯：

```
08-21 22:31:31.250: ERROR/ActivityManager(275): startLaunchActivity get appname failed
        java.lang.NullPointerException
        at com.android.server.am.ActivityStack.startLaunchActivity(ActivityStack.java:4654)
        at com.android.server.am.ActivityStack.startActivityMayWait(ActivityStack.java:3196)
        at com.android.server.am.ActivityManagerService.startActivityInPackage(ActivityManagerService.java:2628)
        at com.android.server.am.PendingIntentRecord.sendInner(PendingIntentRecord.java:231)
        at com.android.server.am.PendingIntentRecord.send(PendingIntentRecord.java:182)
        at android.content.IIntentSender$Stub.onTransact(IIntentSender.java:64)
        at android.os.Binder.execTransact(Binder.java:338)
        at dalvik.system.NativeStart.run(Native Method)
08-21 22:31:31.250: INFO/ActivityManager(275): START intent from pid -1 
```

有什么想法是什么原因造成的，我该如何解决？如果需要，我可以提供代码。

谢谢！

通知创建代码：

```
@Override
protected void onMessage(Context context, Intent intent) {
    String msg = intent.getStringExtra(Constants.FIELD_MESSAGE);

    Log.e("We got a message from the server",msg);

    NotificationManager manager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = prepareNotification(context, msg);
    manager.notify(R.id.notification_id, notification);
    Log.e("Sent notification event","");
}
private Notification prepareNotification(Context context, String msg) {
    long when = System.currentTimeMillis();
    Notification notification = new Notification(R.drawable.ic_stat_cloud, msg,
            when);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    Intent intent = new Intent(context, MessageActivity.class);
    // Set a unique data uri for each notification to make sure the activity
    // gets updated
    intent.setData(Uri.parse(msg));
    intent.putExtra(Constants.FIELD_MESSAGE, msg);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK
            | Intent.FLAG_ACTIVITY_CLEAR_TASK);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent,
            0);
    String title = context.getString(R.string.app_name);
    notification.setLatestEventInfo(context, title, msg, pendingIntent);

    return notification;
} 
```

通知处理代码：

```
public class MessageActivity extends Activity {
    private TextView mMessageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("opening message notification","");
        setContentView(R.layout.activity_message);
        Log.e("displaying message","");
        mMessageView = (TextView) findViewById(R.id.message);
        Log.e("put message","");
    }

    @Override
    public void onResume() {
        super.onResume();
        String msg = getIntent().getStringExtra(Constants.FIELD_MESSAGE);
        mMessageView.setText(msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:13:35.850

从错误来看，我怀疑您忘记将 MessageActivity 添加到 Android 清单文件

# ruby-on-rails - 图像压缩、载波和heroku

> ID：12063501
> 
> 赞同：1
> 
> 时间：2012-08-21T21:43:29.640
> 
> 标签：ruby-on-rails, heroku, amazon-s3, carrierwave, amazon-cloudfront

我们正在尝试压缩我们在网站上提供的图像。我们使用carrierwave 和asset_sync 从S3 和Cloudfront 为我们的资产提供服务。

我们现在在站点性能方面面临的主要问题是图像压缩。解决这个问题的最佳方法是什么？我们发现了一些可能运行良好的压缩工具（jpegoptim、pingcrush）——但我们不确定如何在 Heroku 上设置它们。

现在，我们根本没有压缩我们的图像，我们肯定想解决这个问题，所以在这方面的任何帮助都将不胜感激。

谢谢！林戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:18:54.137

嗯，Heroku 支持 python、java 和许多其他语言。您需要先编写一个应用程序，将图像压缩为 jpeg 格式并将它们存储到 s3 。然后，如果您的图像是用户上传的图像，您可能希望将此应用程序与您的站点集成，并将链接关联S3 中的图像。如果您使用的是 cloudfront（推荐），那么您的链接将与您在图像的属性部分中看到的不同。一旦您开发了一个应用程序来进行压缩并存储在 s3 中，这应该很容易。

# java - Draw object to screen using mouse listener java applet

> ID：12063506
> 
> 赞同：0
> 
> 时间：2012-08-21T21:43:54.653
> 
> 标签：java, applet, mouseevent

I am trying to create an applet that draws a christmas tree, then using buttons the user is able to draw decorations to the tree (a different button for each decoration).

I had it so that it would draw a circle on the tree but this circle would disappear when a new one was drawn. It was suggested to me that the decorations need to be defined as objects with variable (e.g. mouse click coordinates) and then each time the mouse is clicked a new instance is added to an array of objects.

Firstly I'm trying to create the decoration or "ball" object and draw this to the screen, once I've done this I'll work on adding it to an array, so far it draws the ball but in the top left corner and mouse clicks have no effect.

Any help or hints would be greatly appreciated, its starting to do my head in a bit now! Here is the code so far. (I'm aware there is some pointless code it there, its from previous attempts at getting it working.)

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.util.*;

public class christmasTree extends Applet implements ActionListener, MouseListener, MouseMotionListener
{
    int[] xPoints = {200,50,350};
    int[] yPoints = {35,400,400};
    Button lights;
    Button decorations;
    Button stars;
    int mx;
    int my;
    Object source;
    ArrayList lightArray;
    Ball ball;

    public void init()
    {
        lights = new Button("Add Lights");
        decorations = new Button("Add Decorations");
        stars = new Button("Add Stars");
        add(lights);
        add(decorations);
        add(stars);
        addMouseListener( this );
        addMouseMotionListener( this );
        lights.addActionListener(this);
        decorations.addActionListener(this);
        lightArray = new ArrayList();
        ball = new Ball();

    }

    public void paint (Graphics g)
    {
        super.paint(g);
        g.setColor(Color.green);
        g.fillPolygon(xPoints, yPoints, 3);
        g.setColor(Color.black);
        g.fillRect(175, 400, 50, 50);
        g.drawString(Integer.toString(mx), 25, 85);
        g.drawString(Integer.toString(my), 25, 100);
        ball.display(g);

    }

    public void actionPerformed(ActionEvent ev)
    {
        if (ev.getSource() == lights){
            source = lights;
        }
        if (ev.getSource() == decorations){
            source = decorations;
        }
        repaint();

    }

    public void mousePressed(MouseEvent e)
    {
        mx = e.getX();
        my = e.getY();
        repaint();

    }

    public void mouseReleased(MouseEvent e)
    {

    }
    public void mouseEntered(MouseEvent e)
    {}
    public void mouseExited(MouseEvent e)
    {}
    public void mouseMoved(MouseEvent e)
    {}
    public void mouseClicked(MouseEvent e)
    {

    }
    public void mouseDragged(MouseEvent e)
    {}

}

class Ball implements MouseListener, MouseMotionListener
{
    int mx1;
    int my1;

    public Ball()
    {

    }

    public void display(Graphics g)
    {
        g.setColor(Color.yellow);
        g.fillOval(mx1, my1, 20, 20);
    }

        public void mousePressed(MouseEvent e)
        {
            mx1 = e.getX();
            my1 = e.getY();

        }

        public void mouseReleased(MouseEvent e)
        {

        }
        public void mouseEntered(MouseEvent e)
        {}
        public void mouseExited(MouseEvent e)
        {}
        public void mouseMoved(MouseEvent e)
        {}
        public void mouseClicked(MouseEvent e)
        {

        }
        public void mouseDragged(MouseEvent e)
    {}
} 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:58:25.983

Fix the coordinates of the `Ball` location by adding:

```
public void setLocation(int x, int y) {
   mx1 = x;
   my1 = y;
} 
```

(Purists would probably go for *setX*, *setY*.)

Otherwise, they are defaulted to 0 and 0\. (Java default for ints)

then call:

```
ball.setLocation(mx, my); 
```

in your `MouseListener`.

Also, you probably will want to create more than one `Ball` decoration... so don't create any until the mouse is clicked. I shall leave this as an exercise...! :-)

# python - 在 Django 1.4 中使用命名的 url 模式会引发错误

> ID：12063511
> 
> 赞同：2
> 
> 时间：2012-08-21T21:44:48.120
> 
> 标签：python, django

我在我的 Django 应用程序中使用命名的 url-patterns，但它失败了，我不知道为什么。我已关注[文档](https://docs.djangoproject.com/en/1.4/topics/http/urls/#naming-url-patterns "文档")，但我的应用程序在读取**urls.py**时出错。

这**有效**：

**网址.py**

```
from django.conf.urls import patterns
from www.apps.newsletter.models import Newsletter
from www.apps.newsletter.views import index, detail

urlpatterns = patterns('',
    (r'^vol(?P<q_vol>\d+)/no(?P<q_no>\d+)/(?P<q_slug>[^.*]+)/$', detail),
    (r'^vol(?P<q_vol>\d+)/no(?P<q_no>\d+)/$', index),
    (r'^vol(?P<q_vol>\d+)/$', index),
    (r'^$', index),
) 
```

但这**失败了**：

**网址.py**

```
from django.conf.urls import patterns
from www.apps.newsletter.models import Newsletter
from www.apps.newsletter.views import index, detail

urlpatterns = patterns('',
    (r'^vol(?P<q_vol>\d+)/no(?P<q_no>\d+)/(?P<q_slug>[^.*]+)/$', detail, name='newsletter-detail'),
    (r'^vol(?P<q_vol>\d+)/no(?P<q_no>\d+)/$', index),
    (r'^vol(?P<q_vol>\d+)/$', index),
    (r'^$', index),
) 
```

我想使用命名的 url 模式（所以我可以在我的模板中使用 {% url %}），但 Django 似乎不想玩得很好。有任何想法吗？我所做的只是添加 arg **name=""**并导致错误：

```
SyntaxError at /newsletter/

invalid syntax (urls.py, line 6) 
```

这个 urls.py 被父 urls.py 引用：

```
urlpatterns = patterns('',
    url(r'^grappelli/', include('grappelli.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^software/', include('www.apps.software.urls')),
    url(r'^newsletter/', include('www.apps.newsletter.urls')),
) 
```

我正在使用 Django 1.4 版。TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:47:05.217

您需要使用[该`url`函数](https://docs.djangoproject.com/en/dev/topics/http/urls/#url)来使用`name`参数：

```
url(r'^vol(?P<q_vol>\d+)/no(?P<q_no>\d+)/(?P<q_slug>[^.*]+)/$', detail, name='newsletter-detail'), 
```

换句话说，使用元组和`url`函数是有区别的。

顺便说一句，您不需要命名 url 模式来使用`url`模板标签，您可以只使用视图的路径，即`{% url "app.views.myview" %}`

# bitmap - 如何将图像旋转 90 度

> ID：12063514
> 
> 赞同：0
> 
> 时间：2012-08-21T21:44:58.307
> 
> 标签：bitmap, vala

是否有可以旋转位图的 vala 类？[此处](https://stackoverflow.com/a/2225381/398460)显示了使用 C# 完成此操作的方法（非常巧妙），但代码相同

```
public void RotateAndSaveImage(String input, String output)
{
    using (Image img = Image.FromFile(input))
    {
        img.RotateFlip(RotateFlipType.Rotate90FlipNone);
        img.Save(output, System.Drawing.Imaging.ImageFormat.Jpeg);
    }
} 
```

在瓦拉原因

```
test.vala:48.22-48.24: error: syntax error, expected `)'
        using (Image img = Image.FromFile(input))
                     ^^^ 
```

我查看了[Valadoc](https://live.gnome.org/Valadoc)，但找不到图像类，并且 vala [Bitmap](http://references.valadoc.org/#!api=cogl-1.0/Cogl.Bitmap)似乎不是很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:47:36.770

您可能想使用[Gdk.Pixbuf](http://references.valadoc.org/#!api=gdk-pixbuf-2.0/Gdk.Pixbuf)，它使用 GDK+ 库来操作图像。

```
var img = Gdk.Pixbuf.from_file(input);
var rotate_image = img.rotate_simple(90);
rotate_image.save(output, "jpeg"); 
```

值得注意的是，Vala 并不意味着直接与 C# 兼容。

# php - Guru.com 刮刀

> ID：12063515
> 
> 赞同：-6
> 
> 时间：2012-08-21T21:45:01.253
> 
> 标签：php, curl, web-crawler

我正在尝试从`Guru.com (http://www.guru.com/pro/search.aspx?#&&page=1&budget=1000-30000&cid=800&sort=PostedDateDescending)`. 如果您研究此链接，您会注意到它正在执行 ajax 请求以获取作业列表，并且只是在加载时填充虚拟 html。它是一个 ASP.NET 服务器，我试图模仿这个 ajax 请求来获取作业列表。这是我的代码

```
$file_contents = parent::fetchPage($url);
        $string = tidy_repair_string($file_contents);
        $xmldoc = new DOMDocument();
        $xmldoc->loadHTML($string);
        $xpathvar = new Domxpath($xmldoc);

        $titleResult = $xpathvar->query('//input[@name="__VIEWSTATE"]');
        $postvars = 'ctl00%24scriptMgr=ctl00%24scriptMgr%7Cctl00%24scriptMgr&__EVENTTARGET=ctl00%24scriptMgr&__EVENTARGUMENT=page%3D1%26budget%3D1000-30000%26cid%3D800%26sort%3DPostedDateDescending&ctl00_scriptMgr_HiddenField=&__LASTFOCUS=&ctl00%24procnt%24hdnSearchId=&ctl00%24procnt%24ddlBudgetMin=0&ctl00%24procnt%24ddlBudgetMax=0&ctl00%24procnt%24Location=rbworldwide&ctl00%24procnt%24ddlCountries=Select%20One&ctl00%24procnt%24ddlCities=Select%20One&ctl00%24procnt%24txtKeyWords=Keywords%20or%20Project%20ID&ctl00%24procnt%24hdnKeyWords=&ctl00%24procnt%24ucLeadResults%24hdnSrc=&ctl00%24procnt%24ucLeadResults%24hdnPageNo=&ctl00%24procnt%24ucLeadResults%24hdnSearchResults=&ctl00%24procnt%24ucLeadResults%24hdnProjectID=&ctl00%24procnt%24txtSearchName=&ctl00%24procnt%24txtSearchName_reqd=true&ctl00%24procnt%24hdnSelectedTab=0&ctl00%24procnt%24hdnSelectSvdSearch=&ctl00%24hdnGuid=GUID&__ASYNCPOST=true&';
        $postvars .= '__VIEWSTATE='.urlencode($titleResult->item(0)->attributes->getNamedItem('value')->textContent);
        parse_str($postvars, $query);

        print_r($query);

        $ch = curl_init("http://www.guru.com/pro/search.aspx");
        curl_setopt($ch, CURLOPT_POST      ,1);
        curl_setopt($ch, CURLOPT_POSTFIELDS    ,$query);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION  ,1); 
        curl_setopt($ch, CURLOPT_HEADER      ,1);  // DO NOT RETURN HTTP HEADERS 
        curl_setopt($ch, CURLOPT_RETURNTRANSFER  ,1);  // RETURN THE CONTENTS OF THE CALL
        curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
        curl_setopt($ch, CURLOPT_AUTOREFERER, TRUE);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: www.guru.com',
            'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1',
            'Accept: text/plain, text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
            'Accept-Language: en-us,en;q=0.5',
            'Accept-Encoding: gzip, deflate',
            'Connection: keep-alive',
            'X-MicrosoftAjax: Delta=true',
            'Cache-Control: no-cache, no-cache',
            'Content-Type: application/x-www-form-urlencoded; charset=utf-8',
            'Referer: http://www.guru.com/pro/search.aspx?',
            'Content-Length: 15818',
            'Pragma: no-cache'
        ));
        echo $Rec_Data = curl_exec($ch);
        $Rec_Data = gzinflate(substr($Rec_Data, 10, -8));
        echo $Rec_Data; 
```

我发送的标题与我在为 ajax 请求发送的 Live HTTP Headers firefox 插件上看到的相同。我收到以下响应标头。

```
HTTP/1.1 100 Continue

HTTP/1.1 200 OK
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-IIS/7.0
Set-Cookie: ASP.NET_SessionId=eip5l545vkyk3aqhq5kliijj; path=/; HttpOnly
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Tue, 21 Aug 2012 21:28:57 GMT
Content-Length: 44051 
```

而我在 guru.com 完成 ajax 时收到的 Live HTTP Headers 插件上看到的响应标头是

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: text/plain; charset=utf-8
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-IIS/7.0
Set-Cookie: ASP.NET_SessionId=bnlurvq3crot1r55juykpt3y; path=/; HttpOnly
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Tue, 21 Aug 2012 19:25:19 GMT
Content-Length: 43290 
```

Guru.com 正在接收工作列表，而我正在接收不包含任何工作的虚拟 html。谁能告诉我我的代码有什么问题。以下是 Guru.com 发送到其服务器以进行 ajax 调用的请求标头。

```
POST /pro/search.aspx HTTP/1.1
Host: www.guru.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-MicrosoftAjax: Delta=true
Cache-Control: no-cache, no-cache
Content-Type: application/x-www-form-urlencoded; charset=utf-8
Referer: http://www.guru.com/pro/search.aspx?
Content-Length: 15818
Pragma: no-cache
ctl00%24scriptMgr=ctl00%24scriptMgr%7Cctl00%24scriptMgr&__EVENTTARGET=ctl00%24scriptMgr&__EVENTARGUMENT=page%3D1%26budget%3D1000-30000%26cid%3D800%26sort%3DPostedDateDescending&ctl00_scriptMgr_HiddenField=&__LASTFOCUS=&__VIEWSTATE=%2FwEPDwULLTE0NDg0NjI5MzIPZBYCZg9kFgQCBQ8PFgIeB1Zpc2libGVoZGQCBw9kFgICBw9kFhICBA9kFgJmD2QWAgIBD2QWAgIBDzwrAAkAZAIHDxYCHg5Qb3N0QmFja1NjcmlwdAUsX19kb1Bvc3RCYWNrKCdjdGwwMCRwcm9jbnQkbGlua0NuZnJtRGVsJywnJylkAgsPZBYCZg9kFgICAw88KwAJAGQCDA9kFgJmD2QWBAIBDxBkZBYBZmQCAw8QZGQWAWZkAg0PZBYCZg9kFgICAg8WBB4FY2xhc3MFOXBhZGRpbmdCb3R0b202IG1hcmdpblRvcDUgYm9yZGVyR3JleUNDQyBiYWNrTHRHcmF5IHR4dDk5OR4Fc3R5bGUFDmNvbG9yOiNjY2NjY2M7FgYCAQ8WAh8CBRJwYWRkaW5nVG9wNSB0eHQ2NjZkAgMPFgIfAgUScGFkZGluZ1RvcDUgdHh0NjY2ZAIFDxYCHwIFEnBhZGRpbmdUb3A1IHR4dDY2NmQCDg9kFgJmD2QWCmYPEA9kFgIeB29uY2xpY2sFH2phdmFzY3JpcHQ6Q2hlY2tMaXN0Q291bnQodGhpcylkZGQCAQ8QD2QWAh8EBR9qYXZhc2NyaXB0OkNoZWNrTGlzdENvdW50KHRoaXMpZGRkAgIPEA8WBh4NRGF0YVRleHRGaWVsZAUETmFtZR4ORGF0YVZhbHVlRmllbGQFAklEHgtfIURhdGFCb3VuZGdkEBXIAQpTZWxlY3QgT25lC0FmZ2hhbmlzdGFuB0FsYmFuaWEHQWxnZXJpYQdBbmRvcnJhBkFuZ29sYQhBbmd1aWxsYRNBbnRpZ3VhIGFuZCBCYXJidWRhCEFudGlsbGVzCUFyZ2VudGluYQdBcm1lbmlhBUFydWJhCUF1c3RyYWxpYQdBdXN0cmlhCkF6ZXJiYWlqYW4HQmFoYW1hcwdCYWhyYWluCkJhbmdsYWRlc2gIQmFyYmFkb3MHQmVsZ2l1bQZCZWxpemUFQmVuaW4HQmVybXVkYQZCaHV0YW4HQm9saXZpYRdCb3NuaWEgQW5kIEhlcnplZ292aW5hIAhCb3Rzd2FuYQ1Cb3V2ZXQgSXNsYW5kBkJyYXppbBZCcml0aXNoIFZpcmdpbiBJc2xhbmRzBkJydW5laQhCdWxnYXJpYQxCdXJraW5hIEZhc28HQnVydW5kaQhDYW1ib2RpYQhDYW1lcm9vbgZDYW5hZGEKQ2FwZSBWZXJkZQ5DYXltYW4gSXNsYW5kcxhDZW50cmFsIEFmcmljYW4gUmVwdWJsaWMEQ2hhZAVDaGlsZQVDaGluYQhDb2xvbWJpYQdDb21vcm9zDENvb2sgSXNsYW5kcwpDb3N0YSBSaWNhB0Nyb2F0aWEGQ3lwcnVzDkN6ZWNoIFJlcHVibGljB0Rlbm1hcmsIRGppYm91dGkIRG9taW5pY2ESRG9taW5pY2FuIFJlcHVibGljCkVhc3QgVGltb3IHRWN1YWRvcgVFZ3lwdAtFbCBTYWx2YWRvchFFcXVhdG9yaWFsIEd1aW5lYQdFcml0cmVhB0VzdG9uaWEIRXRoaW9waWEQRmFsa2xhbmQgSXNsYW5kcw1GYXJvZSBJc2xhbmRzBEZpamkHRmlubGFuZAZGcmFuY2UQRnJlbmNoIFBvbHluZXNpYQVHYWJvbgZHYW1iaWEHR2VvcmdpYQdHZXJtYW55BUdoYW5hCUdpYnJhbHRhcgZHcmVlY2UJR3JlZW5sYW5kB0dyZW5hZGEJR3VhdGVtYWxhCEd1ZXJuc2V5Bkd1aW5lYQ1HdWluZWEtQmlzc2F1Bkd1eWFuYQVIYWl0aQhIb2x5IFNlZQhIb25kdXJhcwlIb25nIEtvbmcHSHVuZ2FyeQdJY2VsYW5kBUluZGlhCUluZG9uZXNpYQdJcmVsYW5kBklzcmFlbAVJdGFseQdKYW1haWNhBUphcGFuBkpvcmRhbglLYXpha3N0YW4FS2VueWEIS2lyaWJhdGkGS29zb3ZvBkt1d2FpdApLeXJneXpzdGFuBExhb3MGTGF0dmlhB0xlc290aG8NTGllY2h0ZW5zdGVpbglMaXRodWFuaWEKTHV4ZW1ib3VyZwVNYWNhdQlNYWNlZG9uaWEKTWFkYWdhc2NhcgZNYWxhd2kITWFsYXlzaWEITWFsZGl2ZXMETWFsaQVNYWx0YQpNYXVyaXRhbmlhCU1hdXJpdGl1cwZNZXhpY28GTW9uYWNvCE1vbmdvbGlhCk1vbnRlbmVncm8KTW9udHNlcnJhdAdNb3JvY2NvCk1vemFtYmlxdWUHTXlhbm1hcgdOYW1pYmlhBU5hdXJ1BU5lcGFsC05ldGhlcmxhbmRzC05ldyBaZWFsYW5kCU5pY2FyYWd1YQVOaWdlcgdOaWdlcmlhBk5vcndheQRPbWFuCFBha2lzdGFuBlBhbmFtYRBQYXB1YSBOZXcgR3VpbmVhCFBhcmFndWF5BFBlcnULUGhpbGlwcGluZXMGUG9sYW5kCFBvcnR1Z2FsBVFhdGFyE1JlcHVibGljIG9mIE1vbGRvdmEHUm9tYW5pYRJSdXNzaWFuIEZlZGVyYXRpb24GUndhbmRhBVNhbW9hClNhbiBNYXJpbm8IU2FvIFRvbWUMU2F1ZGkgQXJhYmlhB1NlbmVnYWwGU2VyYmlhClNleWNoZWxsZXMMU2llcnJhIExlb25lCVNpbmdhcG9yZQhTbG92YWtpYQhTbG92ZW5pYQ9Tb2xvbW9uIElzbGFuZHMHU29tYWxpYQxTb3V0aCBBZnJpY2ENU291dGggR2VvcmdpYQtTb3V0aCBLb3JlYQVTcGFpbglTcmkgTGFua2EKU3QuIEhlbGVuYQlTdC4gS2l0dHMJU3QuIEx1Y2lhC1N0LiBWaW5jZW50CFN1cmluYW1lCVN3YXppbGFuZAZTd2VkZW4LU3dpdHplcmxhbmQGVGFpd2FuClRhamlraXN0YW4IVGFuemFuaWEIVGhhaWxhbmQEVG9nbwVUb25nYRNUcmluaWRhZCBhbmQgVG9iYWdvB1R1bmlzaWEGVHVya2V5DFR1cmttZW5pc3RhbhhUdXJrcyBhbmQgQ2FpY29zIElzbGFuZHMGVHV2YWx1BlVnYW5kYQdVa3JhaW5lFFVuaXRlZCBBcmFiIEVtaXJhdGVzDlVuaXRlZCBLaW5nZG9tDVVuaXRlZCBTdGF0ZXMHVXJ1Z3VheQpVemJla2lzdGFuB1ZhbnVhdHUJVmVuZXp1ZWxhB1ZpZXRuYW0OV2VzdGVybiBTYWhhcmEFWWVtZW4GWmFtYmlhFcgBClNlbGVjdCBPbmUBMgEzATQBNgE3ATgBOQIxMAIxMQIxMgIxMwIxNAIxNQIxNgIxNwIxOAIxOQIyMAIyMgIyMwIyNAIyNQIyNgIyNwMyMTgCMjkCMzACMzECMzICMzMCMzQCMzUCMzYCMzcCMzgCMzkCNDACNDECNDICNDMCNDQCNDUCNDYCNDcCNDkCNTACNTECNTMCNTQCNTYCNTcCNTgCNTkCNjACNjECNjICNjMCNjQCNjUCNjYCNjcCNjgCNjkCNzACNzECNzIDMjI0AjczAjc0Ajc1Ajc2Ajc3Ajc4Ajc5AjgwAjgxAjgyAzIyMwI4MwI4NAI4NQI4NgI4NwI4OAI4OQI5MAI5MQI5MgI5MwI5NgI5NwI5OAI5OQMxMDADMTAxAzEwMgMxMDMDMTA0AzIyMQMxMDUDMTA2AzEwNwMxMDgDMTEwAzExMwMxMTQDMTE1AzExNgMxMTcDMTE4AzExOQMxMjADMTIxAzEyMgMxMjMDMTI1AzEyNgMxMjcDMTI5AzEzMAMyMjIDMTMxAzEzMgMxMzMDMTM0AzEzNwMxMzgDMTM5AzE0MAMxNDEDMTQyAzE0MwMxNDQDMTQ1AzE0NgMxNDcDMTQ5AzE1MAMxNTEDMTUyAzE1MwMxNTQDMTU1AzE1NgMxNTcDMTU4AzE1OQMxNjADMTY0AzE2NQMxNjYDMTY3AzE2OAMyMjADMTY5AzE3MAMxNzEDMTcyAzE3MwMxNzQDMTc1AzE3NgMxNzcDMTYxAzE3OAMxNzkDMTYyAzE4MAMxNjMDMTgxAzE4MwMxODQDMTg1AzE4NgMxODgDMTg5AzE5MAMxOTEDMTkyAzE5MwMxOTQDMTk1AzE5NgMxOTcDMTk4AzE5OQMyMDIDMjAzAzIwMAMyMDEBMQMyMDQDMjA1AzIwNgMyMDcDMjA4AzIwOQMyMTADMjEzFCsDyAFnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZxYBZmQCAw8QD2QWAh8EBR9qYXZhc2NyaXB0OkNoZWNrTGlzdENvdW50KHRoaXMpZGRkAgQPEA8WBh8FBQROYW1lHwYFAklEHwdnZBAV1wIKU2VsZWN0IE9uZQtBYmlsZW5lLCBUWAlBa3JvbiwgT0gPQWxiYW55IEFyZWEsIE5ZCkFsYmFueSwgR0EPQWxidXF1ZXJxdWUsIE5NDkFsZXhhbmRyaWEsIExBF0FsbGVudG93bi1CZXRobGVoZW0sIFBBC0FsdG9vbmEsIFBBDEFtYXJpbGxvLCBUWBJBbWVyaWNhbiBTYW1vYSwgQVMVQW5haGVpbS1TYW50YSBBbmEsIENBDUFuY2hvcmFnZSwgQUsMQW5kZXJzb24sIElODEFuZGVyc29uLCBTQw1Bbm4gQXJib3IsIE1JDEFubmlzdG9uLCBBTAxBcHBsZXRvbiwgV0kNQXNoZXZpbGxlLCBOQwpBdGhlbnMsIEdBC0F0bGFudGEsIEdBEUF0bGFudGljIENpdHksIE5KC0F1Z3VzdGEsIEdBEEF1cm9yYS1FbGdpbiwgSUwKQXVzdGluLCBUWA9CYWtlcnNmaWVsZCwgQ0ENQmFsdGltb3JlLCBNRApCYW5nb3IsIE1FD0JhdG9uIFJvdWdlLCBMQRBCYXR0bGUgQ3JlZWssIE1JGEJlYXVtb250LVBvcnQgQXJ0aHVyLCBUWBFCZWF2ZXIgQ291bnR5LCBQQQ5CZWxsaW5naGFtLCBXQRFCZW50b24gSGFyYm9yLCBNSRJCZXJnZW4tUGFzc2FpYywgTkoMQmlsbGluZ3MsIE1UE0JpbG94aS1HdWxmcG9ydCwgTVMOQmluZ2hhbXRvbiwgTlkOQmlybWluZ2hhbSwgQUwMQmlzbWFyY2ssIE5ED0Jsb29taW5ndG9uLCBJThZCbG9vbWluZ3Rvbi1Ob3JtYWwsIElMCUJvaXNlLCBJRApCb3N0b24sIE1BFEJvdWxkZXItTG9uZ21vbnQsIENPDUJyYWRlbnRvbiwgRkwMQnJhem9yaWEsIFRYDUJyZW1lcnRvbiwgV0EWQnJpZGdlcG9ydC1NaWxmb3JkLCBDVAtCcmlzdG9sLCBDVAxCcm9ja3RvbiwgTUEZQnJvd25zdmlsbGUtSGFybGluZ2VuLCBUWBlCcnlhbi1Db2xsZWdlIFN0YXRpb24sIFRYC0J1ZmZhbG8sIE5ZDkJ1cmxpbmd0b24sIE5DDkJ1cmxpbmd0b24sIFZUCkNhbnRvbiwgT0gKQ2FzcGVyLCBXWRBDZWRhciBSYXBpZHMsIElBDkNoYXJsZXN0b24sIFNDDkNoYXJsZXN0b24sIFdWDUNoYXJsb3R0ZSwgTkMTQ2hhcmxvdHRlc3ZpbGxlLCBWQQ9DaGF0dGFub29nYSwgVE4MQ2hleWVubmUsIFdZC0NoaWNhZ28sIElMCUNoaWNvLCBDQQ5DaW5jaW5uYXRpLCBPSA9DbGFya3N2aWxsZSwgVE4NQ2xldmVsYW5kLCBPSBRDb2xvcmFkbyBTcHJpbmdzLCBDTwxDb2x1bWJpYSwgTU8MQ29sdW1iaWEsIFNDDENvbHVtYnVzLCBHQQxDb2x1bWJ1cywgT0gSQ29ycHVzIENocmlzdGksIFRYDkN1bWJlcmxhbmQsIE1ECkRhbGxhcywgVFgLRGFuYnVyeSwgQ1QMRGFudmlsbGUsIFZBDURhdmVucG9ydCwgSUEWRGF5dG9uLVNwcmluZ2ZpZWxkLCBPSBFEYXl0b25hIEJlYWNoLCBGTAtEZWNhdHVyLCBBTAtEZWNhdHVyLCBJTApEZW52ZXIsIENPDkRlcyBNb2luZXMsIElBC0RldHJvaXQsIE1JCkRvdGhhbiwgQUwLRHVidXF1ZSwgSUEKRHVsdXRoLCBNTg5FYXUgQ2xhaXJlLCBXSQtFbCBQYXNvLCBUWBJFbGtoYXJ0LUdvc2hlbiwgSU4KRWxtaXJhLCBOWQhFbmlkLCBPSwhFcmllLCBQQRZFdWdlbmUtU3ByaW5nZmllbGQsIE9SDkV2YW5zdmlsbGUsIElODkZhbGwgUml2ZXIsIE1BEkZhcmdvLU1vb3JoZWFkLCBORBBGYXlldHRldmlsbGUsIE5DIkZlZGVyYXRlZCBTdGF0ZXMgb2YgTWljcm9uZXNpYSwgRk0YRml0Y2hidXJnLUxlb21pbnN0ZXIsIE1BDUZsYWdzdGFmZiwgQVoJRmxpbnQsIE1JDEZsb3JlbmNlLCBBTAxGbG9yZW5jZSwgU0MZRm9ydCBDb2xsaW5zLUxvdmVsYW5kLCBDTxlGb3J0IE15ZXJzLUNhcGUgQ29yYWwsIEZMD0ZvcnQgUGllcmNlLCBGTA5Gb3J0IFNtaXRoLCBBUhVGb3J0IFdhbHRvbiBCZWFjaCwgRkwORm9ydCBXYXluZSwgSU4YRm9ydCBXb3J0aC1Bcmxpbmd0b24sIFRYCkZyZXNubywgQ0EXRnQuIExhdWRlcmRhbGUgQXJlYSwgRkwLR2Fkc2RlbiwgQUwPR2FpbmVzdmlsbGUsIEZMGEdhbHZlc3Rvbi1UZXhhcyBDaXR5LCBUWBBHYXJ5LUhhbW1vbmQsIElOD0dsZW5zIEZhbGxzLCBOWQ9HcmFuZCBGb3JrcywgTkQQR3JhbmQgUmFwaWRzLCBNSQ9HcmVhdCBGYWxscywgTVQLR3JlZWxleSwgQ08NR3JlZW4gQmF5LCBXSRNHcmVlbnNib3JvIEFyZWEsIE5DGkdyZWVudmlsbGUtU3BhcnRhbmJ1cmcsIFNDCEd1YW0sIEdVDkhhZ2Vyc3Rvd24sIE1EF0hhbWlsdG9uLU1pZGRsZXRvd24sIE9IE0hhcnJpc2J1cmcgQXJlYSwgUEEMSGFydGZvcmQsIENUC0hpY2tvcnksIE5DDEhvbm9sdWx1LCBISRNIb3VtYS1UaGlib2RhdXgsIExBC0hvdXN0b24sIFRYFkh1bnRpbmd0b24tQXNobGFuZCwgV1YOSHVudHN2aWxsZSwgQUwQSW5kaWFuYXBvbGlzLCBJTg1Jb3dhIENpdHksIElBC0phY2tzb24sIE1JC0phY2tzb24sIE1TC0phY2tzb24sIFROEEphY2tzb252aWxsZSwgRkwQSmFja3NvbnZpbGxlLCBOQxVKYW5lc3ZpbGxlLUJlbG9pdCwgV0kPSmVyc2V5IENpdHksIE5KEEpvaG5zb24gQ2l0eSwgVE4NSm9obnN0b3duLCBQQQpKb2xpZXQsIElMCkpvcGxpbiwgTU8NS2FsYW1hem9vLCBNSQxLYW5rYWtlZSwgSUwPS2Fuc2FzIENpdHksIE1PC0tlbm9zaGEsIFdJEktpbGxlZW4tVGVtcGxlLCBUWA1Lbm94dmlsbGUsIFROCktva29tbywgSU4NTGEgQ3Jvc3NlLCBXSQ1MYWZheWV0dGUsIExBGUxhZmF5ZXR0ZS1XLkxhZmF5ZXR0ZSwgSU4QTGFrZSBDaGFybGVzLCBMQQ9MYWtlIENvdW50eSwgSUwYTGFrZWxhbmQtV2ludGVySGF2ZW4sIEZMDUxhbmNhc3RlciwgUEEVTGFuc2luZy1FLkxhbnNpbmcsIE1JCkxhcmVkbywgVFgOTGFzIENydWNlcywgTk0NTGFzIFZlZ2FzLCBOVgxMYXdyZW5jZSwgS1MWTGF3cmVuY2UtSGF2ZXJoaWxsLCBNQQpMYXd0b24sIE9LE0xld2lzdG9uLUF1YnVybiwgTUUVTGV4aW5ndG9uLUZheWV0dGUsIEtZCExpbWEsIE9IC0xpbmNvbG4sIE5FD0xpdHRsZSBSb2NrLCBBUhVMb25ndmlldy1NYXJzaGFsbCwgVFgQTG9yYWluLUVscmlhLCBPSBpMb3MgQW5nZWxlcy1Mb25nIEJlYWNoLCBDQQ5Mb3Vpc3ZpbGxlLCBLWQpMb3dlbGwsIE1BC0x1YmJvY2ssIFRYDUx5bmNoYnVyZywgVkEYTWFjb24tV2FybmVyIFJvYmJpbnMsIEdBC01hZGlzb24sIFdJDk1hbmNoZXN0ZXIsIE5IDU1hbnNmaWVsZCwgT0gUTWFyc2hhbGwgSXNsYW5kcywgTUgLTWNBbGxlbiwgVFgLTWVkZm9yZCwgT1ILTWVtcGhpcywgVE4KTWVyY2VkLCBDQRFNaWFtaS1IaWFsZWFoLCBGTA5NaWRkbGV0b3duLCBDVAtNaWRsYW5kLCBUWA1NaWx3YXVrZWUsIFdJGE1pbm5lYXBvbGlzLVN0LiBQYXVsLCBNTgpNb2JpbGUsIEFMC01vZGVzdG8sIENBEk1vbm1vdXRoLU9jZWFuLCBOSgpNb25yb2UsIExBDk1vbnRnb21lcnksIEFMCk11bmNpZSwgSU4MTXVza2Vnb24sIE1JCk5hcGxlcywgRkwKTmFzaHVhLCBOSA1OYXNodmlsbGUsIFROEk5hc3NhdS1TdWZmb2xrLCBOWQ9OZXcgQmVkZm9yZCwgTUEPTmV3IEJyaXRhaW4sIENUFU5ldyBIYXZlbi1NZXJpZGVuLCBDVBZOZXcgTG9uZG9uLU5vcndpY2gsIENUD05ldyBPcmxlYW5zLCBMQQxOZXcgWW9yaywgTlkKTmV3YXJrLCBOShBOaWFncmEgRmFsbHMsIE5ZEE5vcmZvbGsgQXJlYSwgVkEcTm9ydGhlcm4gTWFyaWFuYSBJc2xhbmRzLCBNUAtOb3J3YWxrLCBDVAtPYWtsYW5kLCBDQQlPY2FsYSwgRkwKT2Rlc3NhLCBUWBFPa2xhaG9tYSBDaXR5LCBPSwtPbHltcGlhLCBXQQlPbWFoYSwgTkURT3JhbmdlIENvdW50eSwgTlkLT3JsYW5kbywgRkwNT3dlbnNib3JvLCBLWRJPeG5hcmQtVmVudHVyYSwgQ0EJUGFsYXUsIFBXEVBhbG0gQmF5IEFyZWEsIEZMD1BhbmFtYSBDaXR5LCBGTBhQYXJrZXJzYnVyZy1NYXJpZXR0YSwgV1YOUGFzY2Fnb3VsYSwgTVMNUGF3dHVja2V0LCBSSQ1QZW5zYWNvbGEsIEZMClBlb3JpYSwgSUwQUGhpbGFkZWxwaGlhLCBQQQtQaG9lbml4LCBBWg5QaW5lIEJsdWZmLCBBUg5QaXR0c2J1cmdoLCBQQQ5QaXR0c2ZpZWxkLCBNQQxQb3J0bGFuZCwgTUUMUG9ydGxhbmQsIE9SDlBvcnRzbW91dGgsIE5IEFBvdWdoa2VlcHNpZSwgTlkOUHJvdmlkZW5jZSwgUkkOUHJvdm8tT3JlbSwgVVQKUHVlYmxvLCBDTwpSYWNpbmUsIFdJElJhbGVpZ2gtRHVyaGFtLCBOQw5SYXBpZCBDaXR5LCBTRAtSZWFkaW5nLCBQQQtSZWRkaW5nLCBDQQhSZW5vLCBOVgxSaWNobGFuZCwgV0EXUmljaG1vbmQtUGV0ZXJzYnVyZywgVkELUm9hbm9rZSwgVkENUm9jaGVzdGVyLCBNTg1Sb2NoZXN0ZXIsIE5ZDFJvY2tmb3JkLCBJTA5TYWNyYW1lbnRvLCBDQRBTYWdpbmF3IEFyZWEsIE1JCVNhbGVtLCBPUhRTYWxlbS1HbG91Y2VzdGVyLCBNQRRTYWxpbmFzLU1vbnRlcmV5LCBDQRhTYWx0IExha2UgQ2l0eS1PZ2RlbiwgVVQOU2FuIEFuZ2VsbywgVFgPU2FuIEFudG9uaW8sIFRYElNhbiBCZXJuYXJkaW5vLCBDQQ1TYW4gRGllZ28sIENBEVNhbiBGcmFuY2lzY28sIENBDFNhbiBKb3NlLCBDQQxTYW4gSnVhbiwgUFIRU2FudGEgQmFyYmFyYSwgQ0EOU2FudGEgQ3J1eiwgQ0EMU2FudGEgRmUsIE5NF1NhbnRhIFJvc2EtUGV0YWx1bWEsIENBDFNhcmFzb3RhLCBGTAxTYXZhbm5haCwgR0EZU2NyYW50b24tV2lsa2VzIEJhcnJlLCBQQQtTZWF0dGxlLCBXQQpTaGFyb24sIFBBDVNoZWJveWdhbiwgV0kTU2hlcm1hbi1EZW5pc29uLCBUWA5TaHJldmVwb3J0LCBMQQ5TaW91eCBDaXR5LCBJQQ9TaW91eCBGYWxscywgU0QMU29tZXJzZXQsIE5KGFNvdXRoIEJlbmQtTWlzaGF3YWthLCBJTgtTcG9rYW5lLCBXQQ9TcHJpbmdmaWVsZCwgSUwPU3ByaW5nZmllbGQsIE1BD1NwcmluZ2ZpZWxkLCBNTw9TcHJpbmdmaWVsZCwgT1INU3QuIENsb3VkLCBNTg5TdC4gSm9zZXBoLCBNTw1TdC4gTG91aXMsIE1PDFN0YW1mb3JkLCBDVBFTdGF0ZSBDb2xsZWdlLCBQQRhTdGV1YmVudmlsbGUtV2VpcnRvbiwgT0gMU3RvY2t0b24sIENBDFN5cmFjdXNlLCBOWQpUYWNvbWEsIFdBD1RhbGxhaGFzc2VlLCBGTA5UYW1wYSBBcmVhLCBGTA9UZXJyYSBIYXV0ZSwgSU4NVGV4YXJrYW5hLCBUWApUb2xlZG8sIE9IClRvcGVrYSwgS1MLVHJlbnRvbiwgTkoKVHVjc29uLCBBWglUdWxzYSwgT0sOVHVzY2Fsb29zYSwgQUwJVHlsZXIsIFRYFFVyYmFuYSBDaGFtcGFpZ24sIElMDlV0aWNhLVJvbWUsIE5ZGlZhbGxlam8tRmFpcmZpZWxkLU5hcGEsIENBDVZhbmNvdXZlciwgV0EMVmljdG9yaWEsIFRYDFZpbmVsYW5kLCBOShJWaXJnaW4gSXNsYW5kcywgVkkLVmlzYWxpYSwgQ0EIV2FjbywgVFgOV2FzaGluZ3RvbiwgREMNV2F0ZXJidXJ5LCBDVBhXYXRlcmxvby1DZWRhciBGYWxscywgSUEKV2F1c2F1LCBXSRhXZXN0IFBhbG0gQmVhY2ggQXJlYSwgRkwMV2hlZWxpbmcsIFdWEVdpY2hpdGEgRmFsbHMsIFRYC1dpY2hpdGEsIEtTEFdpbGxpYW1zcG9ydCwgUEEOV2lsbWluZ3RvbiwgREUOV2lsbWluZ3RvbiwgTkMNV29yY2VzdGVyLCBNQQpZYWtpbWEsIFdBCFlvcmssIFBBFVlvdW5nc3Rvd24tV2FycmVuLCBPSA1ZdWJhIENpdHksIENBFdcCClNlbGVjdCBPbmUBMQEyATQBMwE1ATYBNwE4ATkDMzM1AjEwAjExAjEyAjEzAjE0AjE1AjE2AjE3AjE4AjE5AjIwAjIxAjIyAjIzAjI0AjI1AjI2AjI3AjI4AjI5AjMwAjMxAjMyAjMzAjM0AjM1AjM2AjM3AjM4AjM5AjQwAjQxAjQyAjQzAjQ0AjQ1AjQ2AjQ3AjQ4AjQ5AjUwAjUxAjUyAjUzAjU0AjU1AjU2AjU3AjU5AjYwAjYxAjYyAjYzAjY0AjY1AjY2AjY3AjY4AjY5AjcwAjcxAjcyAjczAjc0Ajc1Ajc2Ajc3Ajc4Ajc5AjgwAjgxAjgyAjgzAjg0Ajg1Ajg2Ajg3Ajg4Ajg5AjkwAjkxAjkyAjkzAjk0Ajk1Ajk2Ajk3Ajk4Ajk5AzEwMAMxMDEDMzM2AzEwMwMzNDIDMTA0AzEwNQMxMDYDMTA3AzEwOQMxMTADMTExAzExMgMxMTMDMTE0AzExNQMxMDgDMTE2AzExNwMxMTgDMTE5AzEyMAMxMjEDMTIyAzEyMwMxMjQDMTI1AzEyNgMxMjcDMzM3AzEyOAMxMjkDMTMwAzEzMQMxMzIDMTMzAzEzNAMxMzUDMTM2AzEzNwMxMzgDMTM5AzE0MAMxNDEDMTQyAzE0MwMxNDQDMTQ1AzE0NgMxNDcDMTQ4AzE0OQMxNTADMTUxAzE1MgMxNTMDMTU0AzE1NQMxNTYDMTU3AzE1OAMxNTkDMTYwAzE2MQMxNjIDMTYzAzE2NAMxNjUDMTY2AzE2NwMxNjgDMTY5AzE3MAMxNzEDMTcyAzE3MwMxNzQDMTc1AzE3NgMxNzcDMTc4AzE3OQMxODADMTgxAzE4MgMxODMDMTg0AzE4NQMxODYDMTg3AzMzOAMxODgDMTg5AzE5MQMxOTIDMTkzAzE5NQMxOTYDMTk3AzE5OAMxOTkDMjAwAzIwMQMyMDIDMjAzAzIwNAMyMDUDMjA2AzIwNwMyMDgDMjA5AzIxMAMyMTEDMjEyAzIxMwMyMTQDMjE1AzIxNgMyMTcDMjE4AzMzOQMyMTkDMjIwAzIyMQMyMjIDMjIzAzIyNAMyMjUDMjI2AzIyNwMyMjgDMjI5AzM0MAMxOTADMjMwAzIzMQMyMzIDMjMzAzIzNAMyMzUDMjM2AzIzNwMyMzgDMjM5AzI0MAMyNDEDMjQyAzI0MwMyNDQDMjQ1AzI0NgMyNDcDMjQ4AzI0OQMyNTADMjUxAzI1MgMyNTMDMjU0AzI1NQMyNTcDMjU4AzI1OQMyNjADMjYxAzI2MgMyNjYDMjY3AzI2OAMyNjkDMjcwAzI3MQMyNTYDMjcyAzI3MwMyNzQDMzM0AzI3NQMyNzYDMjc3AzI3OAMyNzkDMjgwAzI4MQMyODIDMjgzAzI4NAMyODUDMjg2AzI4NwMyODgDMTk0AzI4OQMyOTADMjkxAzI5MwMyOTIDMTAyAzI2MwMyNjQDMjY1AzI5NAMyOTUDMjk2AzI5NwMyOTgDMjk5AzMwMAMzMDEDMzAyAzMwMwMzMDQDMzA1AzMwNgMzMDcDMzA4AzMwOQMzMTACNTgDMzExAzMxMgMzMTMDMzE0AzMxNQMzNDEDMzE2AzMxNwMzMTgDMzE5AzMyMAMzMjEDMzIyAzMyMwMzMjUDMzI0AzMyNgMzMjcDMzI4AzMyOQMzMzADMzMxAzMzMgMzMzMUKwPXAmdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2cWAWZkAhAPZBYCZg9kFgICAQ9kFgQCAg9kFgQCAQ8QZGQWAGQCAw8PFgIeCkJ1dHRvbk5hbWUFBkRlbGV0ZWRkAgYPZBYEAgEPEGRkFgBkAgMPDxYCHwgFBkRlbGV0ZWRkAhMPFgIeCk9uT2tTY3JpcHQFQVZhbGlkYXRlU2F2ZVBvcFVwKCk7X19kb1Bvc3RCYWNrKCdjdGwwMCRwcm9jbnQkYnRuU2F2ZVNlYXJjaCcsJycpZAIUD2QWBAIBDw8WAh4MSGFzVmFsaWRhdG9yZxYCHgZvbkJsdXIFkwFqYXZhc2NyaXB0OmlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdGwwMF9wcm9jbnRfbGJsRXJyb1NhdmUnKSE9bnVsbCl7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdGwwMF9wcm9jbnRfbGJsRXJyb1NhdmUnKS5zdHlsZS5kaXNwbGF5PSdub25lJ31kAgcPDxYCHg1PbkNsaWVudENsaWNrBZMBamF2YXNjcmlwdDppZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3RsMDBfcHJvY250X2xibEVycm9TYXZlJykhPW51bGwpeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3RsMDBfcHJvY250X2xibEVycm9TYXZlJykuc3R5bGUuZGlzcGxheT0nbm9uZSd9ZGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgcFFmN0bDAwJHByb2NudCRjaGtPblNpdGUFGmN0bDAwJHByb2NudCRjaGtWZW5kb3JPbmx5BRhjdGwwMCRwcm9jbnQkcmJ3b3JsZHdpZGUFFmN0bDAwJHByb2NudCRyYkNvdW50cnkFFmN0bDAwJHByb2NudCRyYkNvdW50cnkFE2N0bDAwJHByb2NudCRyYkNpdHkFE2N0bDAwJHByb2NudCRyYkNpdHn8aeALBWdIWf7e1179CNtoWvy2eg%3D%3D&ctl00%24procnt%24hdnSearchId=&ctl00%24procnt%24ddlBudgetMin=0&ctl00%24procnt%24ddlBudgetMax=0&ctl00%24procnt%24Location=rbworldwide&ctl00%24procnt%24ddlCountries=Select%20One&ctl00%24procnt%24ddlCities=Select%20One&ctl00%24procnt%24txtKeyWords=Keywords%20or%20Project%20ID&ctl00%24procnt%24hdnKeyWords=&ctl00%24procnt%24ucLeadResults%24hdnSrc=&ctl00%24procnt%24ucLeadResults%24hdnPageNo=&ctl00%24procnt%24ucLeadResults%24hdnSearchResults=&ctl00%24procnt%24ucLeadResults%24hdnProjectID=&ctl00%24procnt%24txtSearchName=&ctl00%24procnt%24txtSearchName_reqd=true&ctl00%24procnt%24hdnSelectedTab=0&ctl00%24procnt%24hdnSelectSvdSearch=&ctl00%24hdnGuid=GUID&__ASYNCPOST=true& 
```

这是我收到的回复的截图。

![在此处输入图像描述](../Images/5c594471ce81b56a96f7d2711c7741d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:48:17.280

**更新**

他们显然使用 JavaScript 作为渲染页面的必要功能，或防止机器人攻击。您提供的 HTTP 客户端也必须能够解释 JavaScript。

**原始回复**

您为每个请求发送不同的 ASP.Net 会话 cookie。

据推测，Guru.com 在返回数据之前会检查一个有效的、经过身份验证的会话。

您必须首先以编程方式登录网站并获取有效的会话 ID，然后在后续的 Ajax 请求中使用该 ID。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-21T22:32:12.943

有问题的站点正在跟踪 POST 变量的位置。我只是根据萤火虫（或 Live Http Headers）重新排列它，然后砰砰的数据来了。我的最终代码是（查看 $postvars 变量）

```
$file_contents = parent::fetchPage($url);
        $string = tidy_repair_string($file_contents);
        $xmldoc = new DOMDocument();
        $xmldoc->loadHTML($string);
        $xpathvar = new Domxpath($xmldoc);

        $titleResult = $xpathvar->query('//input[@name="__VIEWSTATE"]');
        $postvars = 'ctl00%24scriptMgr=ctl00%24scriptMgr%7Cctl00%24scriptMgr&__EVENTTARGET=ctl00%24scriptMgr&__EVENTARGUMENT=page%3D1%26budget%3D1000-30000%26cid%3D800%26sort%3DPostedDateDescending&ctl00_scriptMgr_HiddenField=&__LASTFOCUS=&'.'__VIEWSTATE='.urlencode($titleResult->item(0)->attributes->getNamedItem('value')->textContent)."&".'ctl00%24procnt%24hdnSearchId=&ctl00%24procnt%24ddlBudgetMin=0&ctl00%24procnt%24ddlBudgetMax=0&ctl00%24procnt%24Location=rbworldwide&ctl00%24procnt%24ddlCountries=Select%20One&ctl00%24procnt%24ddlCities=Select%20One&ctl00%24procnt%24txtKeyWords=Keywords%20or%20Project%20ID&ctl00%24procnt%24hdnKeyWords=&ctl00%24procnt%24ucLeadResults%24hdnSrc=&ctl00%24procnt%24ucLeadResults%24hdnPageNo=&ctl00%24procnt%24ucLeadResults%24hdnSearchResults=&ctl00%24procnt%24ucLeadResults%24hdnProjectID=&ctl00%24procnt%24txtSearchName=&ctl00%24procnt%24txtSearchName_reqd=true&ctl00%24procnt%24hdnSelectedTab=0&ctl00%24procnt%24hdnSelectSvdSearch=&ctl00%24hdnGuid=GUID&__ASYNCPOST=true&';
        parse_str($postvars, $query);

        print_r($query);

        $ch = curl_init("http://www.guru.com/pro/search.aspx");
        curl_setopt($ch, CURLOPT_POST      ,1);
        curl_setopt($ch, CURLOPT_POSTFIELDS    ,$postvars);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION  ,1); 
        curl_setopt($ch, CURLOPT_HEADER      ,0);  // DO NOT RETURN HTTP HEADERS 
        curl_setopt($ch, CURLOPT_RETURNTRANSFER  ,1);  // RETURN THE CONTENTS OF THE CALL
        curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
        curl_setopt($ch, CURLOPT_AUTOREFERER, TRUE);
        curl_setopt($ch, CURLOPT_ENCODING, 'gzip,deflate');         
        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: www.guru.com',
            'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1',
            'Accept: text/plain, text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
            'Accept-Language: en-us,en;q=0.5',
            'Accept-Encoding: gzip, deflate',
            'Connection: keep-alive',
            'X-MicrosoftAjax: Delta=true',
            'Cache-Control: no-cache, no-cache',
            'Content-Type: application/x-www-form-urlencoded; charset=utf-8',
            'Referer: http://www.guru.com/pro/search.aspx?',
            'Content-Length: 15818',
        ));
        echo $Rec_Data = curl_exec($ch);
        $Rec_Data = gzinflate(substr($Rec_Data, 10, -8)); 
```

# mysql - MySQL 在同一列中找到 LIKE 项目

> ID：12063519
> 
> 赞同：2
> 
> 时间：2012-08-21T21:45:37.460
> 
> 标签：mysql, duplicates

我有一个包含名称和地址的 MySQL 数据库，但是有些重复的名称只有部分地址，例如

```
Name  | Address 
========================
Smith | 10 Main St., Cincinnati, OH 45202
Smith | 10 Main St. 
```

我需要一个 SQL 查询来选择具有重复名称和两个 LIKE 地址中较短的所有行。我能够将 GROUP BY 和 COUNT() 用于精确重复，但我不知道如何将其应用于子字符串，如上面的示例。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:48:03.760

像这样的东西应该工作：

```
select * from mytable as t1
 inner join mytable as t2
 on t1.Name = t2.Name
 and t1.Address like concat(t2.Address, '%')
 and t1.Address != t2.Address; 
```

# ruby-on-rails - TagLib Heroku Vulcan - 二进制打包

> ID：12063520
> 
> 赞同：0
> 
> 时间：2012-08-21T21:45:41.907
> 
> 标签：ruby-on-rails, ruby, heroku, taglib

我正在使用 taglib-ruby 从歌曲中提取信息。

我有 3 个不同的建议：

1.  联系 Heroku，他们可以帮助您解决问题

2.  通过 SSH 将 taglib 安装到 heroku 中（不确定这是否可行。）

3.  生成已编译扩展的二进制 gem，并将 libtag.so 与 gem 一起发布。

还有其他更好的解决方案吗？哪种解决方案是最好的？

更新：

尝试使用 Vulcan 打包 Binary 时遇到错误，因为 TagLib 使用的是 Cmake。

```
vulcan build -v -s ./taglib-1.8beta
Packaging local directory... done
Uploading source package... done
Building with: ./configure --prefix /app/vendor/taglib-1 && make install
sh: ./configure: not found
bin/make:66:in `chdir': No such file or directory - /app/vendor/taglib-1 (Errno::ENOENT)
    from bin/make:66:in `block (2 levels) in <main>'
    from bin/make:18:in `chdir'
    from bin/make:18:in `block in <main>'
    from /usr/local/lib/ruby/1.9.1/tmpdir.rb:83:in `mktmpdir'
    from bin/make:17:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:53:39.070

1.  随时可用，你会有一个明确的答案
2.  不可能
3.  是可行的，但可能不推荐。由于您不知道您的代码在哪个平台上运行，您必须自己测试，Heroku 可以随时更改其平台。

我会从 1 开始，然后尝试 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T19:58:51.750

我能够通过创建[自定义 buildpack](https://github.com/menan/heroku-buildpack-ruby.git)在 heroku 上安装 taglib 。（如果您不确定，这里是[如何使用自定义构建包。）](https://devcenter.heroku.com/articles/buildpacks#using-a-custom-buildpack)

# r - 在 ddply 中使用 summarise 根据一列的 max() 获取整行

> ID：12063527
> 
> 赞同：2
> 
> 时间：2012-08-21T21:46:04.590
> 
> 标签：r, plyr

df1

```
 primer timepoints        mean          sde
    Acan          0   1.0000000 0.000000e+00
    Acan         20   0.8758265 7.856192e-02
    Acan         40   1.0575400 4.680159e-02
    Acan         60   1.2399106 2.238616e-01
    Acan        120   1.1710685 2.085558e-02
    Acan        240   1.6430670           NA
    Acan        360   1.7747940           NA 
```

我想要的只是平均值的最大值（对于这些时间点中的任何一个），它是对应的 sde。

```
 ## this will only get me the mean obviously 
   x <- ddply(x, .(primer), summarize, max = max(mean)) 

 primer        max
   Acan   1.774794

## if I were to do this I would obviously not have just the maximum values 
   x <- ddply(x. .(primer,sde), summarize, max = max(mean)) 
```

我的一个想法可能是在 df 中包含时间点，然后匹配两个数据框以获得一列 sdes。然后 cbind 到 df w/ only 意味着。

但我觉得好像有一种更简单的方法可以使用 ddply

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:19:36.710

如果您不必使用摘要：

```
ddply(x, .(primer), function(DF) DF[DF$mean == max(DF$mean),]) 
```

# tridion - 在 tridion 组件中使用 javascript 的 onclick 命令

> ID：12063529
> 
> 赞同：3
> 
> 时间：2012-08-21T21:46:26.643
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

这是我尝试修改和发布的组件中的代码。

这是我要在组件中超链接的 onClick 上添加的代码。

```
Onclick=“var s=s_gi(s_account);s.linkTrackVars='eVar7';s.eVar7='optin.holidays';s.tl(this,'o',Email Signup | Holidays')” 
```

一旦我尝试添加单引号，渲染就会变得混乱。我尝试用 /'eVar7/'、/”eVar7/”、“eVar7”和“eVar7”替换“eVar7”，但它们都不起作用。所以我尝试了这个。

```
Onclick=“var s=s_gi(s_account);s.linkTrackVars=eVar7;s.eVar7=optin.holidays;s.tl(this,o,Email Signup | Holidays)” 
```

并且链接呈现但它不起作用（没有将值发送到Omniture）

所以我回到基础，然后尝试添加这段代码

```
<a title="Holidays" href="tcm:8-21734" onclick="alert(\'here\');"><img title="btn_email_sign_up" alt="btn_email_sign_up" src="tcm:8-23980"/></a> 
```

这就是我在 .aspx 中得到的

```
<tridion:ComponentLink runat="server" PageURI="tcm:13-31055-64" ComponentURI="tcm:13-21734" TemplateURI="tcm:0-0-0" AddAnchor="false" LinkText="&lt;img src=&#39;/Images/btn_email_sign_up_tcm13-23980.jpg&#39; /&gt;" LinkAttributes="onclick=&#39;alert(&#92;&#39;here&#92;&#39;);&#39;" TextOnFail="true"/> 
```

这是我在萤火虫中看到的

```
<a here\');'="" onclick="alert(\" href="/Email-Signup/Holidays.aspx"><img src="/Images/btn_email_sign_up_tcm13-23980.jpg"></a> 
```

请让我知道是否有人可以提供帮助，以及您是否需要呈现此组件的 TBB。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:07:54.580

我尝试重现您的问题，但对我来说似乎一切正常。因此，我将描述我所拥有的内容，希望它可以帮助您解决问题：

## 架构

我有一个包含这些字段的架构：

1.  LinkedComponent - 组件链接字段
2.  ImageToDisplay - 多媒体组件链接字段
3.  OnClick - 单行文本字段

## 零件

我基于此架构创建了一个组件，该架构链接到我的 Tridion 实例中的一些其他组件和图像，并且在 OnClick 字段中有您的脚本。

这是该组件的 XML：

```
<Content xmlns="uuid:9e69dd45-f249-42a5-9f9a-5f68478b106f">
  <LinkedComponent xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple"
    xlink:href="tcm:1-91" xlink:title="Xbox360Kinect"></LinkedComponent>
  <ImageToDisplay xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" 
    xlink:href="tcm:1-90" xlink:title="Kinect"></ImageToDisplay>
  <OnClick>var s=s_gi(s_account);s.linkTrackVars='eVar7';
    s.eVar7='optin.holidays';s.tl(this,'o',Email Signup | Holidays')</OnClick>
</Content> 
```

请注意，我只是在值中添加了一个换行符`OnClick`以提高可读性。***原始 XML 中不***存在此换行符。

## 载重吨

接下来我创建这个 DWT 来输出链接：

```
<a title="Holidays" tridion:href="@@LinkedComponent@@" onclick="@@OnClick@@">
  <img title="btn_email_sign_up" alt="btn_email_sign_up" src="@@ImageToDisplay@@"/>
</a> 
```

再一次，添加上述片段中的任何换行符只是为了便于阅读。我的 Tridion 系统中的 DWT 将所有这些都集中在一行上。

## 组件模板、页面模板和发布目标

我在设置为输出 HTML 片段的组件模板中使用此 DWT。除了 DWT，此组件模板仅包含默认完成操作（当然在 DWT 之后）。

我使用的页面模板是常规默认页面模板的副本，我只是将文件扩展名更改为`aspx`.

我的发布目标的目标语言设置为 ASP.NET。

## 发布的 ASPX

所有这些步骤都会在我发布的 ASPX 页面中生成以下片段：

```
<tridion:ComponentLink runat="server" PageURI="tcm:1-514-64" ComponentURI="tcm:1-91"
   TemplateURI="tcm:0-0-0" AddAnchor="false" LinkText="&lt;img 
   src=&#34;/GameShop/Images/Kinect.jpg&#34;  title=&#34;btn_email_sign_up&#34; 
   alt=&#34;btn_email_sign_up&#34;/&gt;" LinkAttributes=" title=&#34;Holidays&#34; 
   onclick=&#34;var s=s_gi(s_account);s.linkTrackVars=&#39;eVar7&#39;;s.eVar7=&#39;optin.holidays&#39;;s.tl(this,&#39;o&#39;,Email Signup | Holidays&#39;)&#34;" 
   TextOnFail="true"/> 
```

在这里，我也添加了一些换行符以稍微提高可读性。在原始的 ASPX 页面中，整个块位于一行中。

## 浏览器中的 HTML

最后，这会在浏览器中生成以下 HTML：

```
<a href="/GameShop/Xbox360/Accessories/Xbox360Kinect.aspx" title="Holidays"
  onclick="var s=s_gi(s_account);s.linkTrackVars='eVar7';s.eVar7='optin.holidays';s.tl(this,'o',Email Signup | Holidays')">
  <img src="/GameShop/Images/Kinect.jpg" title="btn_email_sign_up" 
    alt="btn_email_sign_up">
</a> 
```

我不确定`onclick`脚本是否被触发，但我认为这不是您最初的问题。尽管在各个层都进行了大量的转义，但脚本最终还是以 HTML 格式结束 - 至少在我看来。

## 不要混合 JavaScript 和内容

但是，这留下了一个大问题：您到底为什么要尝试将 JavaScript 放在 Content 字段中？这违反了将内容与代码分离的所有最佳实践，并且仅意味着您要为将来的维护问题做好准备（例如，如果您想开始发送电子邮件怎么办？）。

由分析软件跟踪点击链接当然是一个有效的要求（事实上，从我记事起，它就一直是 Tridion 的 Content Delivery 堆栈的一个功能）。

但我建议以不同的方式实现它，例如，只需用特定的 CSS 类或 HTML5 数据属性标记每个此类链接：

```
<a href='...' data-tracking-label='Signup | Holidays' 
              data-tracking-key='optin.holidays' ... 
```

然后，您可以使 JavaScript 找到这些通用链接，并将其放入您的网站无疑已经拥有的常规 JavaScript 文件中。

另请参阅 Manoj 和 Quirijns 的这个问题的回答：[如何在 SDL tridion 网站中实施 Google Analytics？](https://stackoverflow.com/questions/12068311/how-to-implement-google-analytics-in-sdl-tridion-web-sites)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:00:01.767

试着改成这个。tridion:href 解析组件链接，img src 发布图像。

```
<a title="Holidays" tridion:href="tcm:8-21734" onclick="alert('here');"><img title="btn_email_sign_up" alt="btn_email_sign_up" src="tcm:8-23980"/></a> 
```

对于 CDA 上的链接解析，组件“tcm:8-21734”需要在页面上并且需要发布页面。当链接解析成功时，链接将指向页面 url (eg; `structuregroupfolderpath/filename.html`)

这是关于 Tridion Link Resolving 的文档。

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_05ACF7173DCA4790A458CDE2BA33E2CC](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_05ACF7173DCA4790A458CDE2BA33E2CC)

# selenium - Selenium IDE - 验证文本不存在

> ID：12063532
> 
> 赞同：2
> 
> 时间：2012-08-21T21:46:37.893
> 
> 标签：selenium

我希望能够验证（或断言）文本不存在（例如 assertTextAbsent：“SQL 错误”）。

我还想验证/断言一个值不等于“0”。

我可以用 Selenium IDE 做到这一点吗？

还是我需要使用 Selenium Web Driver？（如果是这样，什么扩展/模块最适合 PHP？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T05:19:15.237

尝试 -

```
verifiedTextNotPresent | exact:??? | | 
```

您要验证的文本位于“**目标**”中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:21:14.970

不存在的文本可以使用 selenium IDE 以简单的方式完成，您可以通过使用命令`verifyTextNotPresent`和`assertTextNotPresent`在 selenium Ide 中完成。

```
 Command             | value   | target
    verifyTextNotPresent |         | write text here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-16T15:53:30.973

要验证/断言不等于 0 的值，有两种方法

```
verifyEval | ${variable}!==0 | true
verifyEval | ${variable}==0 | false 
```

其中 ${variable} 是变量的 Selenium 代码（您也可以使用 storedVars['variable']

至于检查文本是否不存在（对你的意思有信心）

语法是

```
verifyNotText 
```

但是我也会研究 verifyNotVisible 或 VerifyElementNotPresent

# jquery - 验证 jQuery 包装集上是否存在文本

> ID：12063533
> 
> 赞同：2
> 
> 时间：2012-08-21T21:46:42.137
> 
> 标签：jquery

基本上我有一个 jQuery 包装集和一个日期，我想要验证包装集上是否不存在日期。

我正在尝试的是以下内容：

```
 var selectedTourDate = $("#tourDate").val();

    var isDateBooked = $("#bookedTourDate *").each(function () {
        if (this.innerHTML == selectedTourDate) return true;
        else return false;
    });

    if (isDateBooked) alert("Date invalid"); 
```

但是 isDateBooked 包含某种功能：

> jQuery.fn.jQuery.init[1]

实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:49:40.033

在您的代码中，`isDateBooked`是一个 jQuery 对象，它将始终返回 true。您需要测试`.length`一个 jQuery 对象，以确定其中是否有任何有趣的东西。

我认为您想要做的是替换`.each`为[`.filter`](http://api.jquery.com/filter/)，然后测试生成的 jQuery 对象的长度：

```
var selectedTourDate = $("#tourDate").val();

var $isDateBooked = $("#bookedTourDate *").filter(function () {
    if (this.innerHTML == selectedTourDate) return true;
    else return false;
});

if ($isDateBooked.length) alert("Date invalid"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:54:27.800

您可以使用`:contains()`选择器和`length`属性：

```
var selectedTourDate = $("#tourDate").val();
var isDateBooked = $("#bookedTourDate *:contains("+selectedTourDate+")").length:
if (isDateBooked) alert("Date invalid"); 
```

# php - 使用带有 OAuth 和 PHP 的 API 获取 Twitter 用户推文

> ID：12063535
> 
> 赞同：1
> 
> 时间：2012-08-21T21:47:04.163
> 
> 标签：php, oauth, twitter

我希望通过 PHP 获取单个用户的推文。目前我正在使用 RSS 对象

```
$string = 'http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=' . $screenname . '&count=' . $tweetCount; 
```

但是，我想为 API 更改为仅身份验证做准备。我该如何进行此更改，以便当 API 切换时一切仍然有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:50:25.490

尝试使用这些库：[https ://dev.twitter.com/docs/twitter-libraries#php](https://dev.twitter.com/docs/twitter-libraries#php)

其中之一具有oauth支持。

# python - 为什么这个 Prolog RPC 调用不起作用，为什么日志没有告诉我出了什么问题？

> ID：12063540
> 
> 赞同：2
> 
> 时间：2012-08-21T21:47:26.520
> 
> 标签：python, json, rpc, swi-prolog

这是我正在使用的 Prolog HTTP 服务器：

```
:- use_module(library(http/thread_httpd)).
:- use_module(library(http/http_dispatch)).
:- use_module(library(http/html_write)).
:- use_module(library(http/json)).
:- use_module(library(http/json_convert)).
:- use_module(library(http/http_json)).
:- use_module(library(http/http_log)).

:- http_handler(root(handle), handle_rpc, []).

:- set_setting(http:logfile, '/home/john/Desktop/log.txt').

http_json:json_type('application/json').

% sample prolog program
f1(1).
f1(2).
f1(4).
f1(5).
f2(3).
f2(4).
f2(6).

server(Port) :-
    http_server(http_dispatch, [port(Port)]).

handle_rpc(Request) :-
    http_read_json(Request, JSONIn),
    json_to_prolog(JSONIn, PrologIn),
    evaluate(PrologIn, PrologOut), % application body
    PrologOut = JSONOut,
    reply_json(JSONOut).

evaluate(PrologIn, PrologOut) :-
    PrologIn = json([args=Query, password=PW, method=MethodName]),
    MethodName = eval,
    PW = blah,
    atom_to_term(Query, Term, Bindings),
    Goal =.. [findall, Bindings, Term, IR],
    call(Goal),
    sort(IR, Result),
    Result = PrologOut,
    format(atom(StringResult), "~q", [Result]),
    PrologOut = json([result=StringResult]). 
```

这是我从中进行 RPC 调用的 Python 客户端：

```
import urllib2
import json

url = "http://192.168.157.128:5001/handle"
json_dict = { 'args' : "f1(S)", 'method' : 'eval', 'password' : 'blah' }
jdata = json.dumps( json_dict )
headers = {}
headers['Content-Type'] = 'application/json'
print jdata
req = urllib2.Request(url, jdata, headers)
res = urllib2.urlopen(req)
for line in res:
    print json.loads(line) 
```

请求失败并出现 500 错误。在我的 httpd.log 文件中，我得到的唯一消息是：

```
/*Tue Aug 21 17:42:41 2012*/ request(10, 1345585361.981, [peer(ip(192,168,157,1)),method(post),request_uri('/handle'),path('/handle'),http_version(1-1),content_length(55),host('192.168.157.128'),port(5001),content_type('application/json'),connection(close),user_agent('Python-urllib/2.6')]).
completed(10, 0.000829367999999997, 815, 500, error("goal unexpectedly failed: user:handle_rpc([protocol(http),peer(ip(192,168,157,1)),pool(client(httpd@5001,user:http_dispatch,<stream>(0xf9c2b0),<stream>(0xf9c410))),input(<stream>(0xf9c2b0)),method(post),request_uri(/handle),path(/handle),http_version(1-1),accept_encoding(identity),content_length(55),host(192.168.157.128),port(5001),content_type(application/json),connection(close),user_agent(Python-urllib/2.6)])")). 
```

就是这样，只是“目标意外失败”。不，目标失败了。我想知道*为什么*它失败了。

# ruby - wxRuby Segfaults 尝试运行主循环时

> ID：12063541
> 
> 赞同：1
> 
> 时间：2012-08-21T21:47:28.670
> 
> 标签：ruby, rubygems, segmentation-fault, wxwidgets, wxruby

我正在尝试使用 Ruby 1.9 运行 wxRuby，但是如果没有段错误，我就无法启动应用程序。即使是网站上建议的小型最小应用程序（使用的代码如下）也不会运行。

```
require "wx"
include Wx

class MinimalApp < App
  def on_init
    Frame.new(nil, -1, "Test").show
  end
end

MinimalApp.new.main_loop 
```

该程序在使用 运行时`ruby test.rb`会崩溃并显示以下消息：

```
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-linux]

-- control frame ----------
c:0004 p:---- s:0009 b:0009 l:000008 d:000008 CFUNC  :main_loop
c:0003 p:0066 s:0006 b:0006 l:001078 d:0007a8 EVAL   test.rb:10
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:001078 d:001078 TOP   
---------------------------
-- Ruby level backtrace information ----------------------------------------
test.rb:10:in `<main>'
test.rb:10:in `main_loop'

-- C level backtrace information -------------------------------------------
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(rb_vm_bugreport+0x5e) [0x7f8ae7464b9e]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(+0x64234) [0x7f8ae7340234]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(rb_bug+0xa5) [0x7f8ae73410c5]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(+0x118c04) [0x7f8ae73f4c04]
/lib64/libpthread.so.0() [0x3b6e80efe0]
/lib64/libwx_baseu-2.8.so.0(_ZN7wxMutex6UnlockEv+0) [0x3b790e4390]
/lib64/libwx_gtk2u_core-2.8.so.0() [0x3b7a9e452b]
/lib64/libglib-2.0.so.0() [0x3b70047964]
/lib64/libglib-2.0.so.0(g_main_loop_run+0x72) [0x3b70047dc2]
/lib64/libgtk-x11-2.0.so.0(gtk_main+0xa7) [0x3b7b54ac57]
/lib64/libwx_gtk2u_core-2.8.so.0(_ZN11wxEventLoop3RunEv+0x48) [0x3b7a9f81d8]
/lib64/libwx_gtk2u_core-2.8.so.0(_ZN9wxAppBase8MainLoopEv+0x4c) [0x3b7aa6a30c]
/lib64/libwx_gtk2u_core-2.8.so.0(_ZN5wxApp10InitializeERiPPw+0x371) [0x3b7a9e4a41]
/lib64/libwx_baseu-2.8.so.0(_Z12wxEntryStartRiPPw+0x7e) [0x3b7909745e]
/lib64/libwx_baseu-2.8.so.0(_Z12wxInitializeiPPw+0x3c) [0x3b7909776c]
/lib64/libwx_baseu-2.8.so.0(_Z7wxEntryRiPPw+0x1a) [0x3b7909788a]
/home/vinny/.rvm/gems/ruby-1.9.2-p320/gems/wxruby-ruby19-2.0.0-x86_64-linux/lib/wxruby2.so(+0x21b403) [0x7f8ae00cb403]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(+0x181d8c) [0x7f8ae745dd8c]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(+0x17a142) [0x7f8ae7456142]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(+0x17e430) [0x7f8ae745a430]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(rb_iseq_eval_main+0xb0) [0x7f8ae7460330]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(+0x6a59a) [0x7f8ae734659a]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(ruby_exec_node+0x1d) [0x7f8ae73475bd]
/home/vinny/.rvm/rubies/ruby-1.9.2-p320/lib/libruby.so.1.9(ruby_run_node+0x1c) [0x7f8ae734954c]
ruby(main+0x4b) [0x40088b]
/lib64/libc.so.6(__libc_start_main+0xf5) [0x3b6e421735]
ruby() [0x4008b9]

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Aborted (core dumped) 
```

我已经在 Ruby 1.9.3p194 和 1.9.2p320（上面显示的后者的日志）上尝试过这个，两者的结果都是一样的。我没有在 Ruby 1.8 上测试过，但我宁愿不必使用 1.8 来运行 wxRuby。

我的 Ruby 版本由 RVM 管理，安装的 wxRuby 版本是 2.0.0（宝石名称 - wxruby-ruby19）（2.0.1 不适用于 64 位 Linux）。

我已经在 irb 中验证了可以成功地需要“wx”，但是只要 main_loop 方法运行，它就会崩溃。

我的操作系统是 Fedora 17 x64，我安装了 wxGTK 2.8.12 包以与 C++ 一起使用，如果这有什么不同的话。

# python - 合并甚至有一个共同元素的集合

> ID：12063545
> 
> 赞同：2
> 
> 时间：2012-08-21T21:48:01.570
> 
> 标签：python, algorithm, set

> **可能重复：**
> [Python：基于交叉点的简单列表合并](https://stackoverflow.com/questions/9110837/python-simple-list-merging-based-on-intersections)

我正在尝试对对象进行分类。每个对象都由一个称为 的唯一标识符属性标识`id`。所以我的分类逻辑是这样的。首先我准备一个对象列表，然后分类函数一次获取 2 个对象并返回一个`frozenset`包含它们的`id`. 因此，如果`object1`和`object5`属于同一类别，`frozenset(id1,id5)`则返回 a。现在我不断将这些frozensets添加到一个集合中，所以最后我有一个这样的集合

```
matched_set=(
             frozenset(id1,id2),
             frozenset(id9,id3),
             frozenset(id9,id2),
             frozenset(id24,id22),
             frozenset(id1,id23),
             frozenset(id25,id24),
             frozenset(id30,id24)
            ) 
```

现在因为带有`id1`和`id2`的对象属于同一类别，带有`id9`和的对象属于同一类别，带有和`id3`的对象属于同一类别，具有和的对象应该属于同一类别。所以我应该有一个这样的集合 有人可以提供一个算法吗？谢谢`id9``id2``id1,id2,id3,id9``set(id1,id2,id3,id9)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T22:01:49.590

听起来您正在寻找[不相交集的数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)。

给定您的一组 id，您的类别将它们分成不相交的子集。不相交集数据结构通过选择一个代表 id 来表示每个类别，该 ID 将由对其任何成员的查询返回。（孤立的 id 形成一个类别，并返回自己）

对不相交集数据结构的更新结合了任何两个 id 的类别，以便将来的查询为两个子集的成员返回相同的代表。（如果两个 id 已经是同一类别的成员，则更新在功能上是无操作的）

通常的方法是将每个类别表示为一个反向树：每个 id 都有一个`parent`链接，但没有子链接。“代表元素”是树的根，通过跟随父链接很容易查询。更新需要找到两个 id 的树的根，并且（如果它们不同）通过使一个根成为另一个根的父级来合并树。

通过添加一些简单的优化（查询“折叠”查询路径以直接指向根，并且更新总是选择最深树的根作为合并父级），该算法变得非常高效，运行在“几乎-O (1)"摊销时间。

如果您想在线访问每个类别中 id 的完整列表，您应该维护一个附加到每个类别根的累积列表，并在每次合并中将它们连接起来。通常，以这种方式维护有关您的类别的任意数量的统计信息会很方便。

# java - 使用DOM在开始和结束标签之间添加属性而不是一个标签

> ID：12063550
> 
> 赞同：1
> 
> 时间：2012-08-21T21:48:16.470
> 
> 标签：java, xml, dom

所以我在 JAVA 中使用 DOM 解析器来创建一个 XML 文件。当我想添加一个子元素时，它最终看起来像这样：

```
<childElement attribute1="attributeValue" attribute2="attributeValue"/> 
```

但是我宁愿我的 XML 看起来像这样（尽管显然 DOM 不会使这些缩进和单独的行）：

```
<childElement>
    <attribute1>attributeValue</attribute1>
    <attribute2>attributeValue</attribute2>
</childElement> 
```

输出的现有代码（我不想要的）：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <Dennis>
        <Hair Colour="Brown"/>
    </Dennis>
    <!--This is a comment :)--> 
```

我希望它看起来像什么：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <Dennis>
        <Hair>
            <Colour>Brown</colour>
        </Hair>
    </Dennis>
    <!--This is a comment :)--> 
```

*注意：我知道如果 java 不能进行所有这些缩进，我知道什么不能。我想要它做的是使用`"<open tag>value<close tag>"`格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:52:33.393

只需添加一个名为`attribute1`element 的元素`childElement`。

DOM 本身是基于内存的，但您可以将其序列化为 xml，并且大多数库都有漂亮的打印机，可以进行缩进。

**延伸阅读**

*   [http://dom4j.sourceforge.net/dom4j-1.6.1/guide.html](http://dom4j.sourceforge.net/dom4j-1.6.1/guide.html)

*将文档写入文件*部分显示了如何使用此库格式化输出。

# jobs - Tivoli 工作负载调度程序 - 后台作业

> ID：12063561
> 
> 赞同：0
> 
> 时间：2012-08-21T21:49:26.207
> 
> 标签：jobs, tivoli

我有以下关于在后台运行作业的问题，这是一个备份作业，我知道 TWS 告诉你不要在后台运行作业，但在我的场景中我别无选择，只能在后台运行它，这是因为我有很多脚本并且曾经手动运行，但现在需要使用 tws 进行自动化和调度。

我的想法是创建一个验证备份后台作业并等待后台作业完成的作业，然后它将继续其正常流程。

知道怎么做吗？或者 TWS 可以选择这样做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T22:48:38.130

基本上，TWS 使用 $TWS_HOME/jobmanrc 文件作为包装器来启动作业中定义的脚本，将脚本日志重定向到 TWS 标准列表并处理返回代码以管理与其他作业/计划的依赖关系。

你可以看看那个 jobmanrc 文件，它很容易阅读。

也就是说，如果您的后台作业不是使用 TWS 启动的，则没有机会让它的返回代码由 TWS 管理。您可以创建一个技术作业，每 n 分钟运行一次脚本，以使用退出代码 >0 监控后台作业，直到它运行（ ps aux|grep && exit 1 ），并将成功依赖于您的以下计划，但它很脏。

# jquery - 尝试在 jquery 中使用 if 和 find 来生成布尔表达式

> ID：12063562
> 
> 赞同：0
> 
> 时间：2012-08-21T21:49:27.427
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap, jquery-validate

我正在使用 twitter bootstrap 和 jquery validate 插件

我有几个表格行，如下所示：

```
<div class="form_row" >
<div class="control-group">
<label class="control-label" for="input01">home phone</label>
  <div class="controls">
    <input type="number" class="span4" class="input-xlarge" id="home_phone" name="home_phone" value="<?php echo $this->property->home_phone ?>" rel="popover" data-content="Re-enter your home phone." data-original-title="homephone" >
    <input type="number" class="span4" class="input-xlarge" id="cell_phone" name="cell_phone" value="<?php echo $this->property->cell_phone ?>"  rel="popover" data-content="Re-enter your cell_phone." data-original-title="cell_phone" >
  </div> 
```

验证后，当我在萤火虫中查看它时，有错误的输入后面是 span.error.我想选择类控制组 div，其中每个 div 子项中至少有 1 个是 span.error （我相信这些都已添加on by jquery validate)，然后添加错误类并从未通过验证的控制组 div 中删除成功类。以下看起来会起作用吗？我认为它应该但正确的类似乎没有被添加和减去。

```
if ( $('div.control-group').find('span.error').length) {$(this).addClass('error').removeClass('success');} 
```

谢谢，比尔

# python - Selenium 使用远程 Web 驱动程序下载文件

> ID：12063569
> 
> 赞同：0
> 
> 时间：2012-08-21T21:49:53.927
> 
> 标签：python, selenium, selenium-webdriver

我正在使用 python 和 selenium 中的远程 Web 驱动程序来尝试从 Google Mini 生成和下载报告（xml 文件）。我生成文件很好，并且能够选择导出链接。但是有没有一种简单的方法可以指示远程 webdriver 将该链接下载到文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T18:34:06.330

好吧，我没有找到让 Chrome 不将 xml 显示为页面而不是下载为文件的方法。似乎取决于[如何下载 XML 而无需浏览器在另一个选项卡中打开它](https://stackoverflow.com/questions/3860750/how-to-download-an-xml-without-the-browser-opening-it-in-another-tab)的页面设计。

但是，我们可以为远程 Web 驱动程序设置首选项。Remote() 包含一个 desired_capabilities 参数，可以传递与文件下载相关的首选项：options.to_capabilities()

```
from selenium import webdriver

options = webdriver.ChromeOptions()
prefs = {'profile.default_content_settings.popups': 0,
             'download.default_directory': download_path}
options.add_experimental_option('prefs', prefs)
pprint(options.to_capabilities())
driver = webdriver.Remote(command_executor='http://camutil_selenium_1:4444/wd/hub',
                                   desired_capabilities=options.to_capabilities()) 
```

上面的 pprint 输出：

```
{'browserName': 'chrome',
'chromeOptions': {'args': [],
               'extensions': [],
               'prefs': {'download.default_directory': '/some/path/',
                         'profile.default_content_settings.popups': 0}},
'javascriptEnabled': True,
'platform': 'ANY',
'version': ''} 
```

现在，您可以使用 driver.get(dl_url) 开始下载 Chrome 未显示扩展名的文件，该文件将保存到 download_path。注意：这只会开始下载，您可能需要添加逻辑以等待下载完成。

# delphi - 如何在delphi表单中添加注释

> ID：12063570
> 
> 赞同：5
> 
> 时间：2012-08-21T21:49:55.703
> 
> 标签：delphi

我想为自动生成的表单 (dfm) 文件添加一些注释。在 pas 中，我们可以使用 // 或 {} 进行评论，但如何在 dfm 中添加评论？

是否可以添加评论？我尝试在 dfm 末尾添加评论，但是当我重新打开评论时，评论被删除。

谢谢或帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T22:01:35.450

不，那是不可能的。DFM 文件只不过是对象结构的表示。通常，您不应该直接读取或写入任何 DFM 文件（除非您确切知道自己在做什么）。早期版本的 Delphi 对 DFM 文件使用内部二进制格式，这仍然可以通过更改设置来实现。那里也没有评论的地方。

**更新：** 您仍然可以在 PAS 文件中的控件声明上方编写文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T22:02:36.610

发布的组件属性被写入 DFM 文件，IDE 管理整个过程。DFM 中任何不受支持的内容都将在 IDE 下次打开表单时被丢弃，您已经观察到了这一点。

**解决方法**：如果您只想为少数组件添加注释，您可以轻松编写组件包装器并添加一个新的已发布属性，您可以在其中通过属性编辑器添加注释。一种做作的解决方法，但可行...缺点是您的评论将被编译到 EXE 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:55:09.047

在 Delphi 7 之前，有一个基本的设计界面，您可以在其中发表评论。它被保存为单独的文件。我忘记了名字，如果它只适用于非视觉设计师或表单/框架设计师。

从 Delphi 2005 及更高版本开始，这已经不复存在了。

最简单的方法是编写一个小的非可视组件`TComment`，该组件具有存储评论`Lines`的类型属性，`TStrings`甚至可能还有一个`Component`可以链接到评论所在的目标组件的属性。

每个 DFM 都被编译成链接到您的 EXE 的二进制版本（这是 IDE 仍然支持二进制 DFM 文件的原因之一；另一个是向后兼容）。

这意味着像这样的评论也将最终出现在您的 EXE 中。

# node.js - Backbone.js、mongodb 和获取相关对象——客户端还是服务器端？

> ID：12063571
> 
> 赞同：2
> 
> 时间：2012-08-21T21:50:10.453
> 
> 标签：node.js, mongodb, rest, backbone.js, nosql

我正在使用 mongodb、node.js 和backbone.js 来构建一个应用程序，作为我的学习体验。我很想知道从 REST API 获取相关对象的最佳实践是什么。

假设我们有“post”对象和“user”对象，posts 具有将它们链接到用户的“userId”属性。

你应该：

1.  在客户端获取一个 post 对象。检查帖子的“userId”属性，然后单独获取该用户。就服务器端代码而言，这似乎既好又简单，但如果事情变得更加复杂，最终可能会发出大量请求。
2.  获取一个帖子对象，让服务器“加入”并在同一个请求中为您提供相关的用户对象。

有没有人有一些经验可以分享？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T03:26:21.037

如果没有特定的 UI 故事，很难回答这个问题，但根据您提供的内容，我会说 #1 更接近我将采用的方法。但是，不要“检查”用户 ID 的帖子，而是向用户提供链接，`rel=user`然后只需点击该链接即可获取您的用户资源。我更喜欢 HATEOAS 范例，其中这些资源是通过由服务器而不是客户端构建的显式链接来导航的。

这显然会导致更多的 XHR，但如果这是一个问题，那么我建议您的视图需要一个视图模型，它可以在*没有*连接的情况下为其提供服务。这是通过公开一个专门为客户服务的模型来完成的，而无需让客户负责构建它需要的数据。h,

麦克风

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:25:13.387

MongoDB 没有在服务器上“进行连接”的功能，因此相关问题可能更多是数据建模问题，以及[链接或嵌入](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)相关用户数据是否更有意义。

```
Fetch a post object on the client side. Inspect the "userId" property
of the post and then separately fetch that user. This seems to be
nice and simple in terms of server-side code, but could end up making
lots of requests if things get complicated further down the line. 
```

最接近此选项的是获取帖子，然后使用[`$in`operator](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)查询帖子中提到的用户 ID 的相关信息。考虑到大量用户 ID，这可能会导致性能下降，因为服务器仍在执行查询以查找索引中的每个用户 ID。

另一种要考虑的常见方法是混合选项：

*   在帖子中嵌入一些最小的用户数据，例如用户 ID（对另一个集合中的用户数据的[数据库引用](http://www.google.com/search?hl=en&q=mongodb+manual+reference)）和一些详细信息，例如用户名。

*   根据需要在 AJAX 请求中查找其他详细信息（例如，将鼠标悬停在用户名上）。

更好的方法实际上取决于您的用例以及您希望在应用程序的页面上显示的信息。

# spring - 为什么分配给属性会在 Hibernate 中引发 LazyInitializationException（“找不到代理”）？

> ID：12063576
> 
> 赞同：0
> 
> 时间：2012-08-21T21:50:48.097
> 
> 标签：spring, hibernate

以前我发布了一个关于*** *LazyIntialization 异常的解决方案的问题：找不到代理 - 会话已关闭******。但后来在我的代码中，我发现我使用 load() 方法而不是 get() 方法来检索实体对象。所以我将 load() 方法更改为 get() 并开始工作。

下面是代码片段，

```
Answer answerObj = HibernateTemplate.load(Answer.class,1001); --> line 1

answerObj.setPoints(2990); --> line 2 
```

当我运行它时，它抛出了 LazyInitialization 异常：在第 2 行找不到代理。

我知道当我使用 load() 方法时，它会返回我的代理对象而不是数据库中的持久行。所以我的 Answer 对象只有 Id 值，所有其他属性都是空的。

现在在代码的第 2 行中，我试图将代理对象的 (Answer) 属性之一设置为某个值。那为什么它会抛出代理不可用异常？将值分配给代理对象属性有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:21:50.730

Hibernate 不知道设置属性是否具有涉及其他属性的逻辑（例如验证），并且在调用真正的 setter 之前从数据库加载对象是唯一安全的事情。

# android - Listview，OGG 音频文件停止工作

> ID：12063578
> 
> 赞同：0
> 
> 时间：2012-08-21T21:51:03.960
> 
> 标签：android, listview, media-player

大家好。我有一个包含 100 个项目的列表视图。每个项目都是可点击的，然后打开一个特定的 .ogg 音频文件。到目前为止，一切都很好。但是，在十、十一次点击项目后，突然，.ogg 音频文件无法正常工作......不再播放音频。有人可以帮助我吗？

这是我正在使用的代码的摘录：

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position,
long arg3) {

if ("Howl".equals(text[position])) {
    MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.howl);
    player.start();

   }

if ("Meow".equals(text[position])) {
    MediaPlayer player = MediaPlayer.create(Listagem.this, R.raw.meow);
    player.start(); 
```

}

```
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:07:45.660

把它放在 onCreate

```
voice.setOnCompletionListener( new MediaPlayer.OnCompletionListener()
    {
        public void onCompletion( MediaPlayer mp)
        {
            mp.release();

        }
    }); 
```

# firefox - Selenium Server - 在运行时，不断弹出 firefox 窗口。有没有办法强制窗口最小化？

> ID：12063580
> 
> 赞同：1
> 
> 时间：2012-08-21T21:51:05.930
> 
> 标签：firefox, selenium

在本地运行大型测试套件时，每次测试的 Selenium 都会弹出一个窗口。如果我正在做其他工作，或者只是使用计算机，这会变得非常令人沮丧（特别是对于小于 1-2 分钟的测试，因为它运行 40 个语言环境，所以每分钟我都会收到一个弹出窗口。

有没有办法强制firefox开始最小化？或者让 Selenium 在另一个屏幕/工作区上工作，这样它就不会干扰我正在做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T23:41:16.547

您想设置无头模式。它将保留所有视觉/浏览器的东西，并将其保存在内存中，而不是将其推送到图形缓冲区。

# c++ - Poco C++中的lib文件是什么

> ID：12063582
> 
> 赞同：2
> 
> 时间：2012-08-21T21:51:07.190
> 
> 标签：c++, poco-libraries

我刚开始在 C++ 中使用 Poco，我是新手。我似乎把一切都编译得很好，但我不知道要包含哪些 lib 文件。我正在`Eclipse CDT`使用`MingGW`编译器（我什至可以使用 Poco 吗？）。当我查看 Poco 文件的 lib 目录时，我看到的是这样的东西：

```
PocoFoundationmd (Object file library)
PocoFoundationmdd (VC++ minimum rebuild de...)
PocoFoundationmdd (Object File Library)
pocoFoundationmdd (Program debug database)
PocoFoundationmt (Object file library)
PocoFoundationmtd (VC++ minimum rebuild de...)
PocoFoundationmtd (Object File Library)
pocoFoundationmtd (Program debug database) 
```

它为库的每个部分（Foundation、Net、Util...）重复相同的类型（我放在它们旁边的东西）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-07T20:30:38.720

我查看了 POCO 文档并找到了库命名约定，这可能是您所追求的（例如，回答：“mdd”、“mt”、“mtd”等版本之间有什么区别？ ）。

来源： http: [//pocoproject.org/docs/99150-WindowsPlatformNotes.html#3](http://pocoproject.org/docs/99150-WindowsPlatformNotes.html#3)

稍作修改以强调文件名结尾。“Poco{LIB}”示例是“PocoFoundation”

## 库命名约定

使用以下命名约定：

*   DLL 导入库被命名为 Poco{LIB} **.lib**用于发布构建和 Poco{LIB} **d.lib**用于调试构建。
*   使用静态多线程 C/C++ 运行时库构建的静态库名为 Poco{LIB} **mt.lib**（发布）和 Poco{LIB} **mtd.lib**（调试）。
*   使用 DLL C/C++ 运行时库构建的静态库被命名为 Poco{LIB} **md.lib**（发布）和 Poco{LIB} **mdd.lib**（调试）。

32 位库放在 lib 目录中。64 位库放在 lib64 目录中。DLL 放置在 bin（32 位）或 bin64（64 位）中。64 位 DLL 分别命名为 PocoLIB64.dll 用于发布和 PocoLIB64d.dll 用于调试。

# jquery - 回调函数中的动画

> ID：12063584
> 
> 赞同：0
> 
> 时间：2012-08-21T21:51:14.680
> 
> 标签：jquery

我正在尝试为 div 创建悬停动画，并希望它们在用户悬停时回到原来的位置。我有

```
$('.Img').live({
            mouseover: function(){

            $(this).css({'cursor': 'pointer'});
            var tooltip=$(this).next().attr('id');

          var tooltipDiv=$('#tooltip-' + tooltip);

          tooltipDiv.css('display', 'block');
          tooltipDiv.animate({ opacity: 0 }, 0);

          tooltipDiv.animate({'opacity':'1','top':'-=10'},500);

        },
        mouseout: function (){            
          $instance = $(this).css({'cursor': 'auto'});

          //back to the original position....but not sure how to do it....
           tooltipDiv.animate.....

        }
        }) 
```

我必须使用 live，因为我使用的是 Jquery 1.6。谢谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:18:34.623

您是否希望它们像您在初始步骤中那样“动画化”回到原来的位置？或者你想让他们立即回到他们开始的地方？

无论哪种方式，它只是反向工作的问题。您的动画非常小，并且您知道起点从哪里开始 ( `opacity: 0`, `top: [$#]+=10`)。您将遇到的最大问题是与突然的动画停止不一致。如果您告诉 jQuery 移动事件`top+=10`上的项目，`mouseout`它可能会在不同的地方结束，那么您所期望的基于当前动画队列的设置方式（这种情况在快速鼠标输入/鼠标输出时经常发生）。或者它可能会继续完整地运行动画，这看起来也很奇怪。

阅读使用`.stop()`以使动画正常运行：[jQuery .stop()](http://api.jquery.com/stop/)

诀窍是让它回到最初的起始位置，而不是一个意想不到的位置。它可以像将像素值硬编码到代码中一样简单。或者我会设置一个变量来读取加载时的初始位置，如下所示：

```
$('.Img').live({
    mouseover: function(){
      selector = $(this).next();
      sel_top = selector.css('top');
      sel_opa = selector.css('opacity');

      selector.animate({'opacity':'1','top':'-=10'},500);

    },
    mouseout: function (){            
      selector.animate({'opacity' : sel_opa, 'top' : sel_top},500);
    }
}) 
```

# python - 谷歌应用引擎中的警报框

> ID：12063585
> 
> 赞同：0
> 
> 时间：2012-08-21T21:51:18.133
> 
> 标签：python, google-app-engine

是否有任何选项可以在不依赖 javascript 的 GAE (python) 中显示警报框？

我想在我对数据库执行一些操作之后以及在我重定向到另一个页面之前显示一个警告框，并且我试图避免使用 javascript，（主要是因为我不太了解它。）

我有一个带有 2 个按钮（下一个和后退）和一个文本区域的 html 表单。如果文本区域为空，我想重新呈现表单，如果文本有内容，我想在更新我的数据库后显示一个警告框，然后重定向。

```
def post(self, res1, machine_id):
  if back:
    self.redirect('/%s/%s' %(username,machine_id)
  if next:
    user, machine, avisos = self.get_username_machine(username, machine_id)
    if not text:
       msg = ' you have to input a text'
    else:
       msg = 'Call submitted'
       call = dbstructure.Call(machine_id= machine_id, text= text, rep = rep)
       call.put()
       #Browser.AlertBox("Call Submitted")
       self.redirect('/')
     self.render(page, msg=msg) 
```

我试图在 tgghe 按钮上做一些 onclick，但我无法使其正常工作。

有人有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:55:31.507

制作一个看起来像警报的框并将其扔到您的 html 输出中的某个位置。

```
<div class ="alert" style="width:200px;height:100px;background:#f00; border: 1px solid black; margin: 0 auto;">
    This is information!
</div> 
```

# c++ - 我应该如何处理断言失败？

> ID：12063588
> 
> 赞同：1
> 
> 时间：2012-08-21T21:51:48.813
> 
> 标签：c++

是否有正确或可接受的方式来处理调试/发布模式下的断言失败？

例如：假设我有一个返回 std::vector 的函数

我希望返回向量的长度等于另一个对象的长度，我这样做：

```
std::vector<int> v = get_stuff();
ASSERT(v.size() == this->size() )
a = v[this->size() - 1 ]; 
```

现在，如果没有触发断言，此代码将正常工作，并且在调试中这可能会崩溃，但至少我会有断言失败警告我有问题。问题出在发布模式下，会出现无声崩溃。这是否意味着我还必须在发布代码中检查此错误，然后进行处理？这是可能的，但是我认为在它上面添加断言失败没有意义，因为它已被处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:53:59.323

An`assert`的含义与您似乎认为的不同。它不能替代例外，我认为这是您的想法。它在那里，以便您可以在调试的早期发现问题。如果你在调试中得到断言，你就修复它。然后你测试。然后再次测试。并确保条件在释放时保持不变。如果确实如此......那么，你有一个错误。

> 这是否意味着我还必须在发布代码中检查此错误，然后进行处理？

如果你期望它发生，是的。检查条件，抛出异常，并巧妙处理。发送错误报告。写入日志文件。更新软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:00:07.677

断言适用于必须始终为真的条件。不适用于异常处理。

它们反映了您在设计期间所做的假设。如果有*任何合法*的可能性`get_stuff`返回错误大小的向量，您必须单独处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T23:29:24.373

您不仅限于 C 库提供的断言，还可以有一个额外的断言机制，该机制仍在生产/发布版本中运行：

*   使用 C 库`assert`进行昂贵的（CPU、高速缓存、数据库负载...）检查，您不想减慢生产/发布构建的速度
*   使用您自己的断言机制来执行您想要在生产/发布版本中运行的廉价或极其重要的测试，其中失败表明您的程序不能被信任在此后正常运行：例如，如果一个数据结构是您的程序的核心操作明显损坏
*   当您认为可以报告错误并恢复到有用状态以进行进一步工作时，请使用异常/错误代码等，并且优先考虑继续提供该服务

因此，在您的示例中：

```
std::vector<int> v = get_stuff();
ASSERT(v.size() == this->size());
a = v[this->size() - 1]; 
```

您可以使用仅调试模式的 ASSERT，也可以在生产中使用的 ASSERT，或者按照前者...

```
a = v.at(this->size() - 1); 
```

...这样您就可以在生产中出现问题时捕获并处理异常。要获得异常处理案例的代码覆盖率，您需要为生产构建创建一个单元测试案例。

需要记住的是找到一个现实且可维护的平衡点：如果您试图在运行时错误处理中过于详尽，您的代码可能会膨胀到 5 或 10 倍的大小和复杂性，以及您的测试工作量。所以在你处理的地方和程度上要有选择性。简单的断言和核心转储等相对简单：一个没有测试用例的单行，并且可以更自由地使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T21:54:45.407

我的偏好是包含 ASSERT（用于调试），后跟处理错误的代码。在调试运行中，断言失败使系统停止运行，让我立即看到问题。然后在发布版本中，处理错误情况的代码仍然运行。当然，必须考虑处理错误的代码。生成故障转储文件（Windows 中的 minidump，Linux 中的核心转储）可能是有意义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T22:04:46.467

通常你必须在你的程序中“处理”三种错误，我个人更喜欢用以下方式来处理和分类它们（ymmv）：

*   预期会经常发生的错误（例如错误的用户输入）。它们可能（部分）可恢复。我通常通过检查/错误代码处理它们，偶尔通过异常处理。
*   检测到但通常不是预期的异常错误。我总是为它们使用异常，它们通常会使操作在更大范围内失败。
*   可能不会发生的错误；这是“不可能”发生的。就像在您的向量类中一样，您希望人们使用适当的索引。您不想花费宝贵的周期在发布模式下检查这些条件，但是当很容易检测到这些情况时，请在调试模式下进行，以便为难以调试的崩溃提供更好的替代方案（例如，通过使用`assert(condition && "explanation of why you asser the condition here and what it means that it is violated")`.

我通常使用断言测试函数的先决条件，例如某些指针是非空的，或者值在范围内。我慷慨地将它们洒在周围，以便在调试模式下（我所有的测试和单元测试都在其中运行）可以找到这些错误。这有点像一些标准库所拥有的“检测未定义行为”模式。

# c# - 如何使用 JSON 从 WCF REST 服务返回 Base64 编码的字节数组？

> ID：12063591
> 
> 赞同：12
> 
> 时间：2012-08-21T21:52:04.647
> 
> 标签：c#, json, wcf

我有一个简单的 WCF REST 方法，它将返回一个字节数组中的图像/文件/等：

```
[OperationContract]
[WebGet(UriTemplate = "TestMethod")]
byte[] TestMethod(); 
```

服务契约`webHttpBinding`与以下行为绑定：

```
<endpointBehaviors>
  <behavior name="webHttpBehavior">
    <webHttp defaultOutgoingResponseFormat="Json" />
  </behavior>
</endpointBehaviors> 
```

该方法工作正常，除了字节数组的格式如下：

```
[25,15,23,64,6,5,2,33,12,124,221,42,15,64,142,78,3,23] 
```

如果我删除属性`defaultOutgoingResponseFormat="Json"`，服务默认为 XML 格式，结果以 Base64 编码，如：

```
GQ8XQAYFAiEMfN0qD0COTgMX 
```

这可以节省数据传输，尤其是在数据变大时。

如何为 JSON 输出格式启用 Base64 编码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T02:56:26.633

几个月前，我在我们公司的网络服务中遇到了类似的问题。我必须弄清楚如何使用 json 端点发送字节数组。不幸的是，没有一个简单的答案。然而，我找到了两种解决方法，我决定选择最简单的一种。我会让你决定其中任何一个是否有帮助。

选项 1 返回 base64 编码的字符串而不是字节数组：

Microsoft 的 Convert 库可以轻松地将字节数组转换为 base 64 字符串，反之亦然。

```
[OperationContract]
[WebGet(UriTemplate = "TestMethod")]
string TestMethod();

public string TestMethod()
{
    byte[] data = GetData();
    return Convert.ToBase64String(data);
} 
```

您的 json 结果将类似于...

```
{
    "TestMethodResult":"GQ8XQAYFAiEMfN0qD0COTgMX"
} 
```

然后您的客户可以将其转换回字节数组。如果客户端也使用 C#，那么简单

```
byte[] data = Convert.FromBase64String("GQ8XQAYFAiEMfN0qD0COTgMX"); 
```

但是，如果您有一个相当大的字节数组，就像我们的例子一样，以下可能是更好的选择

选项 2 返回一个流：

是的，这确实意味着你不会得到 json。您本质上只是发送原始数据并设置内容标头，以便客户端知道如何解释它。这对我们有用，因为我们只是将图像发送到浏览器。

```
[OperationContract]
[WebGet(UriTemplate = "TestMethod")]
Stream TestMethod();

public Stream TestMethod()
{
    byte[] data = GetData();
    MemoryStream stream = new MemoryStream(data);
    WebOperationContext.Current.OutgoingResponse.ContentType = "image/jpeg"; //or whatever your mime type is
    stream.Position = 0;
    return stream;
} 
```

# php - PHP 和 Informix：CLIENT_LOCALE 和 DB_LOCALE 未按预期工作 — 与编码相关

> ID：12063593
> 
> 赞同：1
> 
> 时间：2012-08-21T21:52:31.207
> 
> 标签：php, encoding, utf-8, pdo, informix

我使用的是 PHP PDO_Informix 驱动程序 v1.2.7，Informix 客户端版本是 3.70。我有一些 UTF-8 代码可以查询 Latin1 数据库（Informix 服务器是 9.21）。

问题是驱动程序正在砍掉返回字符串的一些值。这就像特殊字符计数加倍。如果列 'name' 的类型为 varchar(2) 并且 name 的值为 'áa'，则查询时返回的值是 'á' 而不是 'áa'。如果我将列大小调整为 varchar(3) 结果是正确的。下面我附上一个简短的脚本来重现这个错误。我包含了 DSN，因此您可以查看编码设置。

## 测试脚本：

```
$dsn = "informix:database=base;server=ol_server;host=192.168.123.123;client_locale=en_us.utf8;db_locale=en_us.819;service=1526;protocol=olsoctcp;EnableScrollableCursors=1";
$db = new \PDO($dsn, 'user', 'pass');
$db->exec("CREATE TABLE ticket82 ( name VARCHAR(2) );");
$db->exec("INSERT INTO ticket82 VALUES ('aa');");

$statement = $db->query("select name from ticket82;");
$value = $statement->fetchAll(\PDO::FETCH_ASSOC);
echo "expected 'aa' got '{$value[0]['NAME']}'\n";

$db->exec("update ticket82 set name='áa';");
$statement = $db->query("select name from ticket82;");
$value = $statement->fetchAll(\PDO::FETCH_ASSOC);
echo "expected 'áa' got '{$value[0]['NAME']}'\n";

$db->exec("ALTER TABLE ticket82 MODIFY (name varchar(3));");
$statement = $db->query("select name from ticket82;");
$value = $statement->fetchAll(\PDO::FETCH_ASSOC);
echo "expected 'áa' got '{$value[0]['NAME']}'\n";

$db->exec("DROP TABLE ticket82;"); 
```

## 预期结果：

```
expected 'aa' got 'aa'
expected 'áa' got 'áa'
expected 'áa' got 'áa' 
```

## 实际结果：

```
expected 'aa' got 'aa'
expected 'áa' got 'á'
expected 'áa' got 'áa' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:40:47.877

以一种有点奇怪的方式，我认为这是“预期”或“按设计工作”的行为。

列大小以字节而不是字符为单位指定，但对于数据库代码集（ISO 8859-1 aka Latin-1）没有区别。客户端代码 (PDO Informix) 假定保存它的变量应该允许相同数量的字节存储。

但是，客户端代码集是 UTF-8 而不是 8859-1，并且 8859-1 字符的某些字符代码在 UTF-8 中需要 2 个字节。准确地说，“ASCII”范围 U+0000..U+007F 在 UTF-8 中需要 1 个字节，但“重音”范围 U+0080..U+00FF 需要 2 个字节。由于客户端已将其变量限制为 2 个字节（而不是 2 个字符），因此您将只能从 VARCHAR(2) 列中选择一个重音字符。

UTF-8 和 8859-1 之间的代码集转换发生在 PDO Informix 使用的 Informix ClientSDK (CSDK) 代码中称为 GLS（全球语言支持）的库中。

这是一个有趣的设置，客户端和数据库服务器使用不同的代码集。当进行代码集转换时，可以认为客户端可以有用地使用更大的变量大小。由于数据库存储的是 Latin-1，所有字符都在 Unicode 范围内 U+0000..U+00FF。（例如，如果是 Latin-15，欧元符号 € U+20AC 在 UTF-8 中需要 3 个字节；我相信，大多数其他 8859-x 系列代码集每个字符需要一个或两个字节。）在代码集转换环境中明智地需要一些小心，但如果代码知道该问题，则可以这样做。该修复程序可能属于 PDO Informix。它使用 CSDK 和 Informix 服务器提供的字节数信息告诉 CSDK 使用多少空间来存储数据。

* * *

仅供参考：Informix 9.21 已经失去支持很长时间了（9.30、9.40 和 10.00 也是如此——甚至 11.10 也失去了支持，尽管这是一个相对较新的变化）。然而，这不是这个问题的一个因素。

# java - 获取有关静态变量（类变量）的 PropertyChangeListener 通知

> ID：12063599
> 
> 赞同：0
> 
> 时间：2012-08-21T21:52:56.987
> 
> 标签：java, static, propertychangelistener

在我的代码中，我需要知道特定静态变量何时更改是值。我知道在 Java 中我可以将自己注册为实例变量的侦听器，但我不能使用静态（类）变量来做到这一点。任何人都可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T00:48:25.153

这取决于您如何访问静态变量。如果您使用静态 setter 方法来更改它，并保持变量私有，这很容易：

```
public class Foo {
   private static int bar = 0;

   private static PropertyChangeSupport propertyChangeSupport =
       new PropertyChangeSupport(Foo.class);

   public static void addPropertyChangeListener(PropertyChangeListener listener) {
       propertyChangeSupport.addPropertyChangeListener(listener);
   }

   public static void setBar(int bar) {
       int oldVal = Foo.bar;
       Foo.bar = bar;
       propertyChangeSupport.firePropertyChange("bar", oldVal, Foo.bar);
   }
} 
```

当然，如果多个线程想要设置值，您可能希望 setBar 成为同步方法，您可能希望在其他人可以再次更改值之前通知所有侦听器，但这取决于您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:55:01.677

您始终可以使用静态访问器包装您的静态变量，并在这些访问器中添加代码。

# ruby-on-rails - 通过参数取消sidekiq worker

> ID：12063600
> 
> 赞同：2
> 
> 时间：2012-08-21T21:53:02.333
> 
> 标签：ruby-on-rails, ruby, sidekiq

我正在为我的员工使用 sidekiq。假设我有一个工作人员的 10k 个作业计划，但其中 4k 个作业仅来自一个用户，我怎样才能只取消与该用户相关的作业。（假设 user_id 是作为工人的参数发送的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:14:02.560

可能有一种更有效的方法可以做到这一点，但您可以做的是遍历队列中当前的作业，并删除符合您条件的作业，如下所示：

```
def delete_jobs_by_user_id(queue, user_id)
  Sidekiq.redis do |r| 
    queue_key = "queue:#{queue}"
    jobs = r.lrange(queue_key, 0, -1) 

    jobs.each do |job|
      r.lrem(queue_key, 0, job) if JSON.load(job)['args'].include?(user_id)
    end 
  end
end 
```

您将需要添加更多检查以仅在您要查找的类、arg 位于正确位置等情况下删除作业，但这应该让您走上正确的轨道。

显然，在 prod 上运行之前对其进行大量测试，并且可能不要在有大量积压的队列上运行它。但在紧要关头，它可以工作。

# php - MySQL 查询未正确执行 PHP

> ID：12063601
> 
> 赞同：-3
> 
> 时间：2012-08-21T21:53:04.413
> 
> 标签：php, mysql

```
<?php
    $id = $_GET['id'];
    $query = "SELECT doc
    FROM docs
    WHERE id = '$id';";
    $doctext = mysql_query($query);
?> 
```

我是 PHP/MySQL 的新手，不确定出了什么问题。上面的代码应该从 URL 中获取 id，这可以正常工作，然后从与给定值匹配的表中选择 --这是与`doc`该列相邻的一列数据。`id``docs``$id`

但是，它只是返回“Resource id #11”，这让我觉得我以某种方式混淆了`SELECT`、`FROM`和`WHERE`关键字，因为它没有给出错误，只是给出了错误的数据。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T21:56:27.300

您的查询执行良好。您的问题是您没有从结果中检索任何数据。该`mysql_query`函数不会自动检索数据，您可以使用[mysql_fetch_row](http://php.net/manual/en/function.mysql-fetch-row.php)`mysql_fetch`之类的函数之一以您想要的格式检索它。请注意，您真的不应该使用古老的 MySQL api，而应该使用 PDO（或 MySQL）。此外，您的代码容易受到 SQL 注入的影响，您应该使用绑定参数，这是 MySQLi 和 PDO 的一个特性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T21:58:46.483

```
$pdo = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$stmt = $pdo->prepare('SELECT doc FROM docs WHERE id = :id');

$stmt->execute(array(':id' => $_GET['id']));

foreach ($stmt as $row) {
    var_dump($row);
} 
```

请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[*红框*](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定哪个，[这篇文章](http://goo.gl/3gqF9)会帮助你。如果您选择 PDO，[这里有很好的教程](http://goo.gl/vFWnC)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:59:01.877

根据提供的信息，我想为您指出一个更好的方向，因为您当前的方法没有正确处理结果数据。不要使用 mysql 扩展。相反，请使用[MySQLi](http://www.php.net/manual/en/mysqli.query.php)或[PDO_MySQL](http://www.php.net/manual/en/pdo.query.php)扩展。使用其中一个替代扩展将有助于作为防止 SQL 注入的第一步。

使用 PDO：

```
<?php  

/* Execute a prepared statement by passing an array of values */ 
$sth = $dbh->prepare('SELECT doc FROM docs WHERE id = ?'); 
$sth->execute(array($_GET['id'])); 
$results = $sth->fetchAll();  

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:43:43.320

像这样编辑：

```
<?php
     $id = $_GET['id'];
     $query = "SELECT doc
     FROM docs
     WHERE id = '".$id."';";
     $doctext = mysqli_query($query);
?> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-21T21:59:07.650

干得好：

```
<?php
    $id = $_GET['id'];
    $query = "SELECT doc
    FROM docs
    WHERE id = '" . mysql_real_escape_string($id) . "';";
    $result= mysql_query($query);
    $row = mysql_fetch_row($result);
    echo $row['doc'];
?> 
```

但正如建议的那样，尝试将其移植到`mysqli_*`函数系列，因为`mysql_*`现在不推荐使用函数。

# javascript - 使用 history.js 使用多个 GET 参数

> ID：12063605
> 
> 赞同：2
> 
> 时间：2012-08-21T21:53:34.130
> 
> 标签：javascript, jquery, history.js

我正在使用[history.js](https://github.com/browserstate/history.js)动态更新查询参数。但是有一个问题是我使用 History.pushState({state:1}, "State 1", "?state=1"); 它会删除 URL 的所有其他现有参数。是否可以不覆盖现有参数并将新状态添加到现有参数中？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T19:36:21.323

我也在寻找更好的解决方案，但我使用了这个名为 jquery BBQ 的库，请参阅： [http ://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html](http://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html)

并这样做：

```
function updateURLParam(key, value) {
    var qs = $.param.querystring(window.location.href, key+"=" + value);
    History.replaceState(null, null, qs);
}; 
```

这将只更新您想要的参数，而让其他参数保持不变。

# ruby - 区分大小写属性的不区分大小写索引

> ID：12063611
> 
> 赞同：0
> 
> 时间：2012-08-21T21:54:10.337
> 
> 标签：ruby, datamapper

我有类似的东西：

```
class User
  include DataMapper::Resource

  property :id, Serial
  property :username, Text
end 
```

我希望用户名区分大小写，以便用户可以根据自己的选择创建用户名。然后以不区分大小写的方式搜索用户名的最佳方法是什么？

如果我创建一个名为“TestUser”的用户，我希望能够通过类似的方式访问它

```
User.first(:username => 'testuser') 
```

我考虑过创建一个 username_downcased 属性，该属性使用 validates_with_method 来制作用于索引的用户名属性的小写版本，但我在让它工作时遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:12:48.563

经过一番摸索，我找到了一个解决方案，但如果它是最好的，我会感到非常惊讶。

```
class User
  include DataMapper::Resource

  property :id, Serial
  property :username, Text
  property :username_lower, Text

  validates_with_method :lower_username
  validates_uniqueness_of :username_lower, :message => 'Username is already taken'

  def lower_username
    self.username_lower = self.username.downcase
    true
  end

end 
```

区分大小写的名称存储在用户名中，但不区分大小写的索引可以在 username_lower 上完成。

# javascript - 具有水平滚动但页面分开的网站

> ID：12063615
> 
> 赞同：0
> 
> 时间：2012-08-21T21:54:40.150
> 
> 标签：javascript, jquery, html, layout, horizontal-scrolling

我想创建一个带有滚动布局的网站。像这样的东西： [示例](http://www.queness.com/post/356/create-a-vertical-horizontal-and-diagonal-sliding-content-website-with-jquery)

但是将所有内容都放在一个 html 文档中，可能会使页面变得非常沉重，而且地址栏中的 url 不会因不同的页面而改变。

但是我怎样才能让网站像水平但在地址栏中有不同的页面或至少不同的 url？比如这个例子： [例子2](http://carrotcreative.com/#!/)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:05:16.970

您发布的第二个示例仍然在一个 HTML 文档中包含所有内容。唯一的区别是作者添加了一些逻辑，在页面更改时将哈希附加到 url，并且可能有一些 javascript 在页面加载时检查该哈希并预滚动到指定页面以保持持久性。

如果您想走不同的路线，并防止所有内容包含在您的 HTML 文档中，您可以使用 ajax 来填充“屏幕外”内容。

```
// when a link is clicked...
$.get('/page2', function(response){
    // load the content into an off-screen div
    $('.offscreen-div').html(response);

    // Use some jQuery to slide in the screen here
    my_slide_method($('.offscreen-div'));

    // Update the url hash
    window.location.hash = '!/page2';
}); 
```

这是伪代码，但它应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:06:44.863

您作为示例的第二个网站只有一页。它使用锚点来标记他们所在的页面。您也可以通过让 JS 在启动时读取页面位置并自动移动到页面的该部分来做到这一点。作为示例 2 的这个站点也使用 ajax 在新页面被点击时加载它们。我会避免使用它，因为它会在页面滑动后加载时从幻灯片效果中减去。

建议：

*   使用 jQuery 制作动画
*   使用锚来标记它所在的“页面”以供浏览器导航使用
*   在初始页面加载后使用 ajax 加载其他页面（如 Casey 所说）

# html - Firefox 没有给出完整路径

> ID：12063620
> 
> 赞同：0
> 
> 时间：2012-08-21T21:54:59.493
> 
> 标签：html, file, asp-classic

我正在为我们的主题创建一个 ASP 经典文件复制程序。它在 IE 中运行良好，但在 Firefox 中却不行。我需要让用户使用输入类型文件浏览文件，但是每当我获取值时，它只返回文件名而不是完整路径（在 firefox 中）。我搜索互联网但没有运气。有没有其他方法可以做到这一点？提前致谢

```
<%

    if (Request.Form("btnSave")<>"" )then

         dim fis
         Set fis = Server.createobject("Scripting.FileSystemObject")
         Response.write(Request.Form("txtPath"))
         dim path
         path= Server.Mappath("\sample\images") & "\"
         Response.write(path)
         dim source
         source =Request.Form("txtPath")
         response.write(source)
         fis.CopyFile source, path
         set fso = nothing
   End If
%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T00:06:56.507

您需要使用文件上传输入控件并将其发布到页面使用

```
<input type="file" name="fileUpload"/> 
```

查看此链接以获取教程：[ASP 文件上传示例](http://www.chestysoft.com/upload/filedemo.asp)

# php - 如何在 php 循环中显示隐藏的数据类型？

> ID：12063625
> 
> 赞同：0
> 
> 时间：2012-08-21T21:55:25.717
> 
> 标签：php, javascript, jquery, mysql

有没有办法为在 php 循环中动态填充的数据切换显示/隐藏？

我一直在试图找出最好的方法来做到这一点，但我认为我知道的不够多，无法完成这项工作，而且我不确定最佳实践是什么。

情况如下：

1.  申请人通过我的网站提交摘要，然后进入数据库
2.  管理员登录并查看提交的结果——这是一个包含一些基本信息的表格，但没有摘要文本，因为它太长了。
3.  我想要一个**按钮（或其他东西！）来显示/隐藏摘要文本**，同时让管理员有机会将摘要分配给会话。

我以为我可以做一个 jquery 显示/隐藏按钮的事情，但我无法让它工作。这是代码 - 请注意，这只是开发，并非所有安全功能都在这里。我这样说是因为不可避免地有人会评论会话或转义字符串等。

```
<?php
include_once('xxx.php');
$conn = new connectorfunction();

$query = "SELECT * FROM tablename ORDER BY abstract_id";
$result = mysql_query($query);

$numfields = mysql_num_fields($result);
$data = array();
$flist = array();

for($i=0;$i<$numfields;$i++)$flist[] = mysql_field_name($result,$i);
$data[0] = $flist;  
while($row = mysql_fetch_assoc($result)){
  $data[] = $row;

print '
  <tr>
   <td>
   <span style="text-decoration: underline">Author:</span>
   <br />
   ' . $row['abstract_author'] .'
   </td>

  <td>
   <span style="text-decoration: underline">Title:</span> 
  ' . $row['presentation_title'] . '
  <br />
  <button>View/Assign</button>
  </td>

  <td>
  ';

  if ($row['abstract_category'] === NULL ) {
print '
      Needs Session
    ';
  }
  else {
print '
      Assigned
    ';
  }
  print'

  <tr style="display:none;">
<td colspan="3">

'. $row['abstract_text'] .'
 </tr>

 <tr style="display:none;">
   <td colspan="3">
      <form action="assign_session.php" method="post" id="form">
    <label for="abstract_category">Assign Session:
    <input type="hidden" name="abstract_id" value="'. $row['abstract_id'] .'" />
    <input type="radio" name="abstract_category" value="session1" />Session One
    <input type="radio" name="abstract_category" value="session2" />Session Two
    <input type="radio" name="abstract_category" value="notapplicable" />Not Applicable             
 <button type="submit" formaction="assign_session.php">Assign</button></label>
 </form>

   </td>
  </tr>
  ';
 }
 ?> 
```

所以可以看到，有一个按钮：<button>View/Assign</button>

并且有两个 <tr> 带有 "display: none" 样式。

该表在填充时看起来非常棒，我只需要一种让管理员查看抽象文本的好方法，但我似乎无法成功指向 php.ini 中的 jquery 函数。有关处理此问题的最佳方法的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:30:49.757

像这样的东西？[演示](http://jsfiddle.net/YmYfB/ "演示")

```
 example:<br />
    <button onClick="$('.hide').toggle();">click me</button>
    <table>
         <tr style="display:none;" class="hide">
            <td colspan="3">abstract text</td>
         </tr>

         <tr style="display:none;" class="hide">
           <td colspan="3">
              <form action="assign_session.php" method="post" id="form">
                <label for="abstract_category">Assign Session:</label>
                <input type="hidden" name="abstract_id" value="'. $row['abstract_id'] .'" />
                <input type="radio" name="abstract_category" value="session1" />Session One
                <input type="radio" name="abstract_category" value="session2" />Session Two
                <input type="radio" name="abstract_category" value="notapplicable" />Not Applicable             
                 <button type="submit" formaction="assign_session.php">Assign</button></label>
             </form>
        </td>
      </tr>
    </table> 
```

我使用 jquery 来切换（显示/隐藏）您需要显示/隐藏的元素。

此外，您在此代码上有几个错误（例如您没有关闭第一个 td，没有以正确的方式使用标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T01:26:59.357

你可以使用 jquery 来做这样的事情

假设您单击“显示”

```
$('#my_button').click(function(){
                      $('#hidden_div').val('hidden',false);}); 
```

或者对于 CSS

```
$('#my_button').click(function(){
                      $('#hidden_div').css('display','all');}); 
```

# css - Rails Bootstrap CSS 问题

> ID：12063629
> 
> 赞同：2
> 
> 时间：2012-08-21T21:55:32.950
> 
> 标签：css, ruby-on-rails, html, twitter-bootstrap

我在尝试为我的 rails 应用程序自定义 Twitter Bootstrap 时遇到了一些问题。

1）当您在搜索框中键入时，文本似乎会略微缩小，从而产生奇怪的拉伸效果：

![搜索栏形式](../Images/a970dcfbda8db6883eeb6e34ac704c87.png)

```
 <form class="navbar-search pull-right">
   <input type="text" class="search-query span2">
   <div class="icon-search"></div>
 </form>

.navbar-search {
  .input-prepend {
    margin-bottom: 0;
  }
  .search-query {
    padding-left: 29px;
    background-color: hsl(360, 0%, 17%) !important;
  }
  .icon-search {
    position: absolute;
    top: 6px;
    left: 11px;
    background-image: url("http://twitter.github.com/bootstrap/assets/img/glyphicons-halflings-white.png");
  }
  .search-query:focus, .search-query.focused {
    color: $white;
    padding-left: 30px;
  }
} 
```

为了更好地了解，这是另一张照片，焦点文本颜色变为灰色：*

![在此处输入图像描述](../Images/4b3cfa2e58da3acb753f38ddff481bdf.png)

* * *

2）调整导航栏的大小时，它显然不会将导航栏保持在屏幕右侧：

![导航栏调整大小](../Images/72ef9da3cfe75f9530ac9bc4bfd90d1f.png)

```
<header class="navbar center">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to image_tag("logo.png", size: "275x275", border: 0, alt: "logo"), root_path, id: "logo" %>
        <nav>
          <%= link_to "New Post", newpost_path, class: "btn btn-custom" %>
          <%= link_to "Browse Posts", posts_path, class: "btn btn-custom" %>
          <ul class="nav pull-right">
            <% if signed_in? %>
              <li class="active"><%= link_to "Users", users_path %></li>
              <li id="fat-menu" class="active dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <b class="caret">Account </b>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "Profile", current_user %></li>
                <li><%= link_to "Settings", edit_user_path(current_user) %></li>
                <li class="divider"></li>
                <li>
                  <%= link_to "Sign out", signout_path, method: "delete" %>
                </li>
              </ul>
              </li>
            <% else %>
              <li class="active"><%= link_to "Sign in", signin_path %></li>
            <% end %>
          </ul>
          <form class="navbar-search pull-right">
            <input type="text" class="search-query span2">
            <div class="icon-search"></div>
          </form>
        </nav>
      </div>
    </div>
</header>

.navbar-inner {
  background-color: $yellow;
  background-image: none;
  background-repeat: no-repeat;
  filter: none;
} 
```

我尝试了 Cobaco 的建议，结果如下（仍然有问题，左侧触摸浏览器，右侧有一个装订线空间，并且栏仍然被挤压。）：

![调整大小](../Images/befeda14034f5c0606ba0458964be67b.png)

**编辑：表格行和表格单元格的建议有效，但是我必须对背景进行一些修改，左侧仍然不齐。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:03:49.537

对于问题1）：

尝试使用css2.1表格显示：

```
.home-row {display: table-row;}
.home-row>.span4 {display: table-cell;} 
```

请参阅[http://www.w3.org/TR/CSS21/tables.html](http://www.w3.org/TR/CSS21/tables.html)了解更多关于 CSS 表格显示的浏览器支持这些天很好（请参阅[http://caniuse.com/css-table](http://caniuse.com/css-table) 仅 IE7 及以下不要'不支持）

3)

```
.navbar {position: relative; right: 0;} 
```

应该保持它附着在右侧

# mysql - 在 mySQL 查询中组合常用值

> ID：12063632
> 
> 赞同：1
> 
> 时间：2012-08-21T21:55:43.050
> 
> 标签：mysql, sql

我有以下查询：

```
"SELECT DISTINCT `emails`.`to`,`emails`.`from` as fromEmail 
FROM `emails` WHERE ((`emails`.`from` = '".$loggedMember->id."') 
OR (`emails`.`to` = '".$loggedMember->id."')) 
AND (`emails`.`to` != 0) ORDER BY `id` DESC LIMIT 4" 
```

并得到以下结果：

```
to    fromEmail
887   1923
1923  887
1637  887
370   887 
```

问题：我怎样才能避免前两个意义上的重复值，即使它们是相反的，它们仍然被认为是重复的“887 1923”和“1923 887”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:59:21.453

为了消除重复值，您需要将电子邮件按规范顺序排列：

```
SELECT DISTINCT
       (case when `emails`.`to` < `emails`.`from` then `emails`.`to`
             else `emails`.`from`
        end) as email1,
       (case when `emails`.`to` >= `emails`.`from` then `emails`.`to`
             else `emails`.`from`
        end) as email2
FROM `emails`
WHERE ((`emails`.`from` = '".$loggedMember->id."')  OR (`emails`.`to` = '".$loggedMember->id."')) AND (`emails`.`to` != 0)
ORDER BY `id` DESC LIMIT 4 
```

如果字段可以为 NULL，那么逻辑会稍微复杂一些，但仍然是相同的想法：在执行 distinct 之前以特定顺序对值进行排序。

# image - Tinymce粘贴图像？

> ID：12063633
> 
> 赞同：1
> 
> 时间：2012-08-21T21:55:48.380
> 
> 标签：image, tinymce, paste

我已经在网上搜索了很多，但我没有找到这个问题的解决方案？反正有没有在tinymce中粘贴格式化的word文档但里面有图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T06:46:12.790

有用但旧的链接[http://www.tinymce.com/forum/viewtopic.php?id=5585](http://www.tinymce.com/forum/viewtopic.php?id=5585)

一些使用 PHP 将带有 data:url 的内联 IMG 标签转换为服务器端实际图像文件的 php 代码：http: [//jk3.us/2011/10/31/pasting-images-in-tinymce/](http://jk3.us/2011/10/31/pasting-images-in-tinymce/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:47:12.593

不，由于word文档的结构，我不知道这样做。在 Word 中，不使用带图像位置的 href 插入图像。在 word 中，图像通常引用本地文件。要在编辑器/网页中显示图像，您需要图像位置或 base64 编码字符串（从 word 中粘贴不会提供此信息）。

# objective-c - 具有异步操作和 UI 的顺序执行流程

> ID：12063636
> 
> 赞同：6
> 
> 时间：2012-08-21T21:56:00.040
> 
> 标签：objective-c, cocoa-touch, ios5, asynchronous

通常，在 GUI 中，我面临的程序流程本质上是顺序的，但涉及异步操作（例如`NSURLConnection`下载内容）和 UI 操作（等待用户在 中选择一个选项`UIActionSheet`）。

只是为了说明，例如，

1.  显示一个`UIActionSheet`，提示用户选择一种颜色。
2.  如果颜色为蓝色，请从服务器下载文件。
    1.  如果下载失败，通知用户（`UIAlertView`，等待点击确定）
    2.  如果用户在 中选择“是” `UIAlertView`，请重试下载。
3.  如果颜色是黑色，请执行其他操作。
4.  等等等等。

流程是顺序的——我们不会在 1 之前做 2。但是由于异步操作和 UI 元素，如果我们使用委托（或块），这很快就会变成意大利面条代码。

是否有编写此类代码的通用方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T00:39:23.563

有一个名为[Reactive Cocoa](https://github.com/blog/1107-reactivecocoa-for-a-better-world)的库非常棒，但很难习惯。

实现您的目标的一种更简单的方法是使用围绕 UIAlertView 和 UIActionSheet的[块包装器来实现您的目标。](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)这也假设您的网络代码中有回调块。

例子：

```
- (void)showActionSheet
{
    BlockActionSheet *sheet = [BlockActionSheet sheetWithTitle:@"Choose one"];
    __weak BlockActionSheet *weakSheet = sheet;

    [sheet addButtonWithTitle:@"Blue" atIndex:0 block:^{
        [self downloadFileFromServerSuccessBlock:^{
            //YAY
        } failureBlock:^{
            BlockAlertView *alert = [BlockAlertView alertWithTitle:@"Failure" message:@"Something Went Wrong"];
            [alert addButtonWithTitle:@"Try Again" block:^{
                [weakSheet showInView:self.view];
            }];
            [alert setCancelButtonWithTitle:@"Cancel" block:nil];
        }];
    }];

    [sheet addButtonWithTitle:@"Black" atIndex:1 block:^{
        //something else
    }];

    [sheet setCancelButtonWithTitle:@"Cancel" block:nil];

    [sheet showInView:self.view];
} 
```

所以最后一行“[sheet showInView:self.view]”开始了整个事情。如果他们选择蓝色，则调用该块。您的网络代码也支持块，因此您可以从那里获得成功和失败块回调。如果失败，那么您会弹出一个基于块的警报视图，使 ActionSheet 重新显示自己。

我希望这至少有一点帮助。此外，“self.view”调用可能会发生一些强引用，所以我也会对视图进行弱引用。

这是 ReactiveCocoa 示例。我对这个框架很陌生，所以我希望我能正确使用它。

```
/*
 *  This function is getting called from a login view controller.
 */

- (void)sendAuthentication
{
    /*
     *  A RACSubscribable will invoke the where^ block when it calls [sendNext:];
     *  That call is coming from the ThaweQBRequestController.
     *  If the where^ block return YES then the subscribeNext^ block will get called.
     *  asMaybes wraps the object I send back in a RACMaybe object which has a convenience method [hasObject];
     *  The subscribeNext^ block has an object coming into it, that object is an array in this case that I sent
     *  from the ThaweQBRequestController.
     */

    RACSubscribable *sub = [[ThaweQBRequestController logInWithUsername:self.thaweusername password:self.thawepassword] asMaybes];

    [[sub where:^(id x) {
        return [x hasObject];
    }]
     subscribeNext:^(id _) {

         NSArray *array = [_ object];

         NSString *errcode = [array objectAtIndex:0];

         if (errcode.boolValue == YES)
             //YAY SUCCESS!!!

         } else {
             //UH OH
         }
         // Update UI, the array has the username and password in it if I want to display or whatever is clever.
     }];
} 
```

然后我们进入我拥有的网络请求控制器。

```
+ (RACAsyncSubject *)logInWithUsername:(NSString *)username password:(NSString *)password
{
    /*
     *  First we have our loginCommand. It will invoke the block we give it on a background thread.
     *  This block returns a Subscribable. We can subscribe other blocks to be invoked when the aync call is done.
     *  In this case we are creating loginResult to retrieve the async call.
     */

    RACAsyncCommand *loginCommand = [RACAsyncCommand command];

    /*
     *  Now we have our AsyncSubject. We are instantiated it here and are going to pass it back to the login view controller;
     *  When our async call finishes and we filter through the results we will call [subject sendNext:] to invoke blocks we created in
     *  the login view controller;
     *  We will filter the results uses the loginResult blocks.
     */
    RACAsyncSubject *subject = [RACAsyncSubject subject];

    /*
     *  loginResult is a "Subscribable". Every time it gets a [sendNext:] call it runs the blocks assosiated with it.
     *  These [sendNext:] calls are coming from our network code.
     *  'repeat' means that even after the async block is invoked it keeps a reference to it incase we want to use it again.
     *  'asMaybes' wraps a RACMaybe object around the object you send to the loginResult blocks. The benefit of a RACMaybe is
     *  that it has some convienence methods like 'hasError' and 'hasObject'.
     */

    RACSubscribable *loginResult = [[[loginCommand
                                      addAsyncBlock:^(id _) {
                                          return [self authenticateUser:username password:password];
                                      }]
                                     repeat]
                                    asMaybes];

    /*
     *  The first block, where^, get called every time loginResult calls [sendNext:].
     *  If it returns YES then the select^ block gets called. The select^ block invokes the subscribeNext^ block and sends it the
     *  error.
     */

    [[[loginResult
       where:^(id x) {
           return [x hasError];
       }]
      select:^(id x) {
          return [x error];
      }]
     subscribeNext:^(id x) {
         NSLog(@"network error omg: %@", x);
     }];

    /*
     *  Same as above except this time we are looking for instances when we have an object instead of an NSError.
     *  The object we are getting is being returned from our network code. In this case it is an integer, 0 means we had a successfull login.
     *  Now we can call [subject sencNext:] to inform our login view controller of the pass or fail of the authentication.
     *  [sendCompleted] is a cleanup call, allowing ReactiveCocoa to dispose of our blocks and free up memory.
     */

    [loginResult
      where:^(id x) {
          return [x hasObject];
      }]
     subscribeNext:^(id _) {
         NSNumber *number;
         NSString *errcode = [_ object];
         if (errcode.intValue == 0) number = [NSNumber numberWithBool:YES] ?: [NSNumber numberWithBool:NO];
         [subject sendNext:[NSArray arrayWithObjects:number, username, password, nil]];
         [subject sendCompleted];
     }];

    /*
     *  [execute:] starts the whole thing off. This call invokes the loginCommand block that returns the async call to the loginResult subscribable.
     */

    [loginCommand execute:@"This value gets transfered to the addAsyncBlock:^(id _) block above."];

    return subject;
}

/*
 *  This function uses a QuickBase wrapper I made to make server request and whatnot.
 *  This function is called when the [loginCommand execute:] call in the previous function gets called
 *  and invokes the loginCommand block which returns the async request.
 *  That request is what this function is returning.
 */

+ (RACAsyncSubject *)authenticateUser:(NSString *)username password:(NSString *)password
{
    QBRequest *request = [[QBRequest alloc] init];

    [request setQuickBaseAction:QBActionTypeAuthenticate];

    [request setURLString:URLstring withDatabaseID:nil];

    [request setApplicationToken:appToken];

    return [request sendAndPersist:NO username:username password:password];
} 
```

现在我们在我的实际网络包装器中，它知道请求何时完成或失败或其他什么。

```
- (RACAsyncSubject *)sendAndPersist:(BOOL)persist username:(NSString *)username password:(NSString *)password
{
    self.subject = [RACAsyncSubject subject];

    /*
     *  These next two blocks are called when my network request is done.
     *  My AsyncSubject is a property so that I can reference it later when I parse
     *  throught the response and figure out whether I logged in correctly or not.
     *  In the case that the network call itself fails, then the AysncSubject calls
     *  [sendError:] which will invoke those NSError capturing blocks in the ThaweQBRequestController.
     */

    [anOp onCompletion:^(MKNetworkOperation *completedOperation) {

        dispatch_async(background_parseSave_queue(), ^{

            [self updateDatabase];
        });

    } onError:^(NSError *error) {
        [subject sendError:error];
    }];

    [engine enqueueOperation:anOp];

    return subject;
} 
```

最后让您了解我的解析器中何时有主题 [sendNext:]。self.currentParsedCharacterData 是一个具有整数值的 NSString。

```
else if ([elementName isEqualToString:@"errcode"])
    {
        if ([self.action isEqualToString:@"API_Authenticate"]) {
            [subject sendNext:[self.currentParsedCharacterData copy]];
            [subject sendCompleted];
        }
    } 
```

我知道这很长，但我真的很想给出一些实际的代码示例。

# javascript - 我在 javascript 替换正则表达式方面需要帮助

> ID：12063637
> 
> 赞同：-1
> 
> 时间：2012-08-21T21:55:59.960
> 
> 标签：javascript, regex, replace

我在用正则表达式替换 javascript 时遇到问题

这是代码

```
var link = document.getElementsByTagName('a');
var i = link.length;
   while(i--){
      var lnk = link[i].href;
       lnk.replace('/^http\:\/\/www\.ringtonematcher\.com\/go\/\?sid\=([\w]+)\&/g', 'test');
    } 
```

sid=替换& = sid=测试&

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:14:26.660

我猜你的问题是你没有对[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)方法的结果做任何事情。它不会改变任何东西，但会返回一个新字符串。如果您想更改`href`属性，则需要重新分配它：

```
var links = document.getElementsByTagName('a');
for (var i=0; i<links.length; i++) {
    var lnk = link[i].href;
    var newlnk = lnk.replace(/^http:\/\/www\.ringtonematcher\.com\/go\/\?sid=(\w+)&/g, 'test$1');
    link[i].href = newlnk;
} 
```

我还修复了您的正则表达式中的一些缺陷：

*   它需要是[正则表达式文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)，而不是字符串（删除撇号）
*   您不需要转义`:`,`=`或`&`字符
*   您不需要将字符类快捷方式包装在字符`\w`类[中](http://www.regular-expressions.info/charclass.html)
*   ~~`\w+`你不想[贪婪](http://www.regular-expressions.info/repeat.html)~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:13:46.080

删除“正则表达式模式”周围的引号并分配给变量

```
var regexed = lnk.replace(/^http\:\/\/www\.ringtonematcher\.com\/go\/\?sid\=([\w]+)\&/g, 'test'); 
```

# asp.net-mvc-3 - MVC3 EditorFor 未在 Chrome 中填充

> ID：12063645
> 
> 赞同：0
> 
> 时间：2012-08-21T21:56:50.517
> 
> 标签：asp.net-mvc-3, google-chrome, razor

我在创建视图中填充文本框时遇到问题。相关代码如下。

模型：

```
public class Client
{
    public int ClientID { get; set; }
    private string _username = HttpContext.Current.User.Identity.Name;
    public string UserName 
    {
        get
        { return _username; }
         set
        { _username = value;}
    } 
```

}

看法：

```
@model model.Client
<div class="editor-label">
@Html.LabelFor(model => model.UserName)
</div>
<div class="editor-field">
@Html.EditorFor(model => model.UserName)
@Html.ValidationMessageFor(model => model.UserName)
</div> 
```

控制器：

```
public ActionResult Create()
{
    return View(new Client());
} 
```

这在 IE 和 Firefox 中完美运行；文本框以`<input>`设置为当前用户登录名的值呈现。然而，在 Chrome 中，该值是一个空字符串。

谁能解释这种行为并提供解决方法？

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:03:16.200

试图使用 Html.TextBoxFor 而不是 EditorFor？

# smarty - Smarty 只显示匹配字符串的一次迭代

> ID：12063646
> 
> 赞同：0
> 
> 时间：2012-08-21T21:56:50.500
> 
> 标签：smarty

我什至不知道我是否在要求正确的事情。我拥有的是一个类别列表，这些类别将是过滤项目的链接。这是我开始的内容：

```
{foreach from=$items item=entry}
{strip}
    {foreach from=$entry->categories item='one_category'}
         {foreach from=$categories item='one'}
              {if $one_category.name == $one.name}
                  {$one.name}    
                  {$one.name|munge_string_to_url} 
              {/if}
         {/foreach}
     {/foreach}
{/strip}
{/foreach} 
```

这是一个更好的版本：

所以这列出了页面上使用的每个实例。如果有实例，目的是列出实例 1x。

```
 <ul>
    <li><a class="active" href="#" data-filter="*">All</a></li>
    {foreach from=$items item=entry}
    {foreach from=$categories item='one'} 
     <li><a href="#" data-filter=".{$one.name|munge_string_to_url}">{$one.name}</a></li>
    {/foreach}{/foreach}
  </ul> 
```

这显示了所有项目，但它不正确，如果有 20 篇文章分配到一个类别，它会列出 20 次，如果有 5 篇文章分配到一个类别，它将列出 5 次。我只想要每个匹配的字符串一个。不知道该怎么做。感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:50:33.377

让我们试试这个。

```
<ul>
    <li><a class="active" href="#" data-filter="*">All</a></li>
    {assign var="tempCat" value=""}
    {foreach from=$items item=entry}
        {if $entry->categories} 
        {strip}
            {foreach from=$entry->categories item='category'}
                {if !$tempCat|strstr:$category.name} 
                    <li><a href="#" data-filter=".{$category.name|munge_string_to_url}">{$category.name}</a></li>
                    {assign var="tempCat" value=$tempCat|cat:$category.name}
                {/if}
            {/foreach}
        {/strip}
        {/if}
    {/foreach}
</ul> 
```

基本上，这个想法是记录您已经添加到列表中的类别，而不是再次添加它们。我通过 $tempCat 做到这一点，它从无开始并连接任何不在其中的类别。因此，后续检查会看到该类别已添加并跳过它。

# php - PHP会话变量不起作用

> ID：12063647
> 
> 赞同：-5
> 
> 时间：2012-08-21T21:57:05.240
> 
> 标签：php, session, session-variables

我是一名 PHP 学习者，我在 PHP 会话方面遇到了一些问题。

我正在尝试做一个简单的登录测试，但是当我指向另一个页面时，似乎会话变量不会跟随。两个重要文件：

检查登录：

```
 <html>
<head>
    <title>
        <?php
            session_start();
        ?>
    </title>
</head>
<body>
    <?php

        $connection = mysql_connect("localhost", "root", "root");
        if(!connection)
        {
            die("could not connect to the database");
        }
        mysql_selectdb("phplogin", $connection) or die ("MySQL error i valg af database: " .mysql_error());
        $query = "Select * from users where username='".$_POST['username']."' AND password = '".$_POST['userpass']."'";
        $result = mysql_query($query);
        $count = mysql_num_rows($result);
        if($count==1){
            $_SESSION['loggedIn'] = "true";
            echo "The variable: ".$_SESSION['loggedIn'];
            header("Location: loggedinPage.php");
            exit;
        }
        if(!$count == 1){
            header("Location:Login.php");
            exit;
        }
    ?>
</body> 
```

和访问页面：

```
 <html>
<head>
    <title>
        <?php
            session_start();
        ?>
    </title>
</head>
<body>
    <?php
        if($_SESSION['loggedIn'] != "true"){
            echo "You are NOT logged in";
            echo $_SESSION['loggedIn'];
            exit;
        }
            echo $_SESSION['loggedIn'];
            echo "You are logged in";
    ?>
</body> 
```

即使您提供了正确的用户名和密码，当被引导到新页面时，它仍然表示您没有登录。另一件事是“标题（位置：等）”，这不起作用，我必须手动重定向。

任何帮助:)？- 大卫

* * *

谢谢，我现在可以登录了，但是重定向仍然不起作用？我的文件现在看起来像这样：

```
 <?php
    session_start();
    ?>
    <?php

        $connection = mysql_connect("localhost", "root", "root");
        if(!connection)
        {
            die();
        }
        mysql_selectdb("phplogin", $connection) or die ("MySQL error i valg af database: " .mysql_error());
        $query = "Select * from users where username='".$_POST['username']."' AND password = '".$_POST['userpass']."'";
        $result = mysql_query($query);
        $count = mysql_num_rows($result);
        if($count==1){
            $_SESSION['loggedIn'] = "true";
            header("Location: loggedinPage.php");
        }
        if(!$count == 1){
            header("Location:Login.php");
        }
    ?> 
```

```
<head>
    <title>

    </title>
</head>
<body>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:59:35.497

`session_start()`应该在文档的最顶部，并且`header()`只能在网站上发生任何输出之前执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:03:17.653

您应该只在输出数据之前打开会话或更改其内容。session_start 应该在任何输出之前调用，并且

```
<html>
... 
```

是输出。

也一样

```
$_SESSION['loggedIn'] = "true"; 
```

将所有与登录相关的检查和启动放在任何 html 之上

与 header('Location...') 相同 - 应该在输出之前

顺便说一句，我不会直接去

```
if($_SESSION['loggedIn'] != "true"){ ... 
```

相反，我会检查它是否已设置

```
if(!isset($_SESSION['loggedIn']) || $_SESSION['loggedIn'] != "true"){ ... 
```

# android - 支持包对 Android 的影响

> ID：12063648
> 
> 赞同：1
> 
> 时间：2012-08-21T21:57:05.583
> 
> 标签：android

使用 Android 支持包有哪些缺点？它对应用程序的大小和可能的性能有多大影响？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:16:45.663

> 它对应用程序的大小和可能的性能有多大影响？

它确实会影响您的应用程序的大小，但如果您考虑*得到的回报*，则影响不大。在大多数情况下，应用程序性能没有缺点（如果有，那么它们经常在修订中得到修复）。

支持库意味着`to simplify your development by offering more APIs that you can bundle with your application so you can worry less about platform versions.`这 - 例如 - 将允许您为所有版本（而不是两个）开发一个 APK，但能够享受使用更高版本 Android 中引入的出色 UI 添加的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:06:28.637

支持包在最新的 UI 设计和使您的应用程序性能更高的其他方法（即加载程序）方面为您提供的优势远大于 200kb 左右的额外数据和大约 0 性能损失。

如果您想要确切的数字，请尝试将兼容性包添加到某些应用程序。

# ios - 如何从 CGPoint 和 CGSize 创建 CGRect？

> ID：12063650
> 
> 赞同：49
> 
> 时间：2012-08-21T21:57:07.387
> 
> 标签：ios, objective-c, quartz-graphics, cgpoint, cgrectmake

我需要从不同的and`UIImageView`集合中为 a 创建一个框架，这两个值将始终根据用户的选择而有所不同。那么如何制作表格 a和 a ？先感谢您。`CGSize``CGPoint``CGRect``CGPoint``CGSize`

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-08-21T21:59:22.150

Objective-C 的两个不同选项：

```
CGRect aRect = CGRectMake(aPoint.x, aPoint.y, aSize.width, aSize.height);

CGRect aRect = { aPoint, aSize }; 
```

斯威夫特 3：

```
let aRect = CGRect(origin: aPoint, size: aSize) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-11T21:06:25.513

基于@Jim 提供的最出色的答案，还可以使用这种方法构造一个 CGPoint 和一个 CGSize 。所以这些也是制作 CGRect 的有效方法：

```
CGRect aRect = { {aPoint.x, aPoint.y}, aSize };
CGrect aRect = { aPoint, {aSize.width, aSize.height} };
CGRect aRect = { {aPoint.x, aPoint.y}, {aSize.width, aSize.height} }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T21:57:54.417

```
CGRectMake(yourPoint.x, yourPoint.y, yourSize.width, yourSize.height); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-19T18:56:41.353

你可以使用一些糖语法。例如：

这类似于构造块，您可以将其用于更易读的代码：

```
CGRect rect = ({
   CGRect customCreationRect

   //make some calculations for each dimention
   customCreationRect.origin.x = CGRectGetMidX(yourFrame);
   customCreationRect.origin.y = CGRectGetMaxY(someOtherFrame);

   customCreationRect.size.width = CGRectGetHeight(yetAnotherFrame);
   customCreationRect.size.height = 400;

   //By just me some variable in the end this line will
   //be assigned to the rect va
   customCreationRect;
)} 
```

# iphone - 在 Xcode 中导入文件后的问题：自动补全在 + 标头路径如何变化时无法正常工作？

> ID：12063652
> 
> 赞同：0
> 
> 时间：2012-08-21T21:57:29.180
> 
> 标签：iphone, objective-c, xcode

我想组织我生成的代码，所以我从我的项目中删除了引用，然后在 Finder 中创建了一个文件夹结构，它组织了我的类和层次结构。

之后我想将类添加回我的项目并选择“为任何文件夹创建组”并取消选择“将项目复制到目标组文件夹（如果需要）”，因为我有多个项目使用相同的类，我只想一种来源，一种版本。

**现在我有以下问题**：从项目中编辑类，自动完成无法正常工作：

变量的颜色消失了（BOOL、float 等变量除外）并且方法的自动完成功能无法正常工作。它只显示了一些方法。

其次，我想知道为什么我所有的标头导入仍然有效？当我键入#import“test.h”时，编译器在哪里寻找？现在不应该包含一个文件夹路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:26:42.653

尝试退出 Xcode 并转到文件夹：

> /Users/*your_username*/Library/Developer/Xcode/DerivedData

您应该在那里找到一个名称以您的项目名称开头的文件夹。删除那个文件夹。

在 Xcode 中重新打开您的项目并清理然后构建。

# javascript - 尝试从 javascript 调用 flash 方法时出现未知错误

> ID：12063653
> 
> 赞同：0
> 
> 时间：2012-08-21T21:57:41.573
> 
> 标签：javascript, flash, actionscript, externalinterface

我有以下回调：

```
ExternalInterface.addCallback("wasCalledFromJS", callFromJavaScript); 
```

这是这样实现的：

```
 public function callFromJavaScript(dir:String):void {
    try {
        scriptName = dir.toString();
    } catch (e:*) {
        Alert.show(e.toString());
    }
} 
```

但是，当我尝试通过以下方式从 JS 控制台调用它时（使用[如何从 javascript 调用 flash actionscript 回调方法中定义的方法？](https://stackoverflow.com/questions/7657842/how-to-call-flash-actionscript-callback-method-from-javascript)）：

```
>>> thisMovie("Flex4TextArea1").wasCalledFromJS("1")

"Error in Actionscript. Use a try/catch block to find error." 
```

看起来好像代码甚至没有到达我的 try/catch 块。你能看出我做错了什么吗？

编辑：添加后`Security.allowDomain("*");`它可以工作。为什么我必须这样做，即使在 localhost 上进行测试也是如此？它是同一个域，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:19:02.603

由于未设置域权限而导致错误。

# r - 选择行名的一部分作为限定符

> ID：12063654
> 
> 赞同：1
> 
> 时间：2012-08-21T21:57:44.610
> 
> 标签：r

我目前正在尝试根据另一个数据框的行名从 R 中的数据框中选择行，这通常是直截了当的：

```
data1 <- data1[which(row.names(data1) %in% row.names(data2))] 
```

但是，我目前的挑战涉及两个数据集之间不同长度的行名。我的第一个数据框的行名称是我的第二个数据框的行名称的前 12 个字符。我希望能够在两个数据集中挑选出前 12 个字符匹配的行，但我遇到了问题。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:01:11.710

使用[`substr()`](http://stat.ethz.ch/R-manual/R-patched/library/base/html/substr.html)：

```
data1 <- data1[which(row.names(data1) %in% substr(row.names(data2), 1, 12)), ] 
```

# javascript - 将 JavaScript 图形和图表转换为图像

> ID：12063657
> 
> 赞同：1
> 
> 时间：2012-08-21T21:57:50.937
> 
> 标签：javascript, linux, wkhtmltoimage

有许多 JavaScript 插件可以绘制图表和图形。例如，请参阅[http://www.queness.com/post/10781/13-chart-and-graph-plotting-javascript-plugins](http://www.queness.com/post/10781/13-chart-and-graph-plotting-javascript-plugins)。

我想创建一个图表并将其转换为图像。我已经尝试使用[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)将它们转换为 PDF，效果很好。对于安装，我使用[了 http://www.amberdms.com/?cms=opensource_linux_repositories](http://www.amberdms.com/?cms=opensource_linux_repositories)。

现在，转换为图像。我安装了姊妹产品 wkhtmltoimage。amberdms 在他们的仓库中没有这个，所以我只使用了一个静态二进制文件。它覆盖了没有图表的简单页面，但是在尝试使用图表的页面时，它不包含图像中的 JavaScript 图表，并且出现以下错误：

```
[root@localhost ~]# /usr/bin/wkhtmltoimage-amd64 --load-error-handling ignore http://www.bobo.com/lib/plugins/jqPlot/examples/area.html var/www/html/images/example_amd64.jpg
Loading page (1/2)
QPixmap: Cannot create a QPixmap when no GUI is being used   ] 86%
....
QPixmap: Cannot create a QPixmap when no GUI is being used
Rendering (2/2)
Error: Could not write to output file
Segmentation fault
[root@localhost ~]# 
```

有没有人有什么建议？

PS。我正在运行 Centos 5.8 86x64，并尝试了 wkhtmltoimage-i386 和 wkhtmltoimage-amd64。

有没有人有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:07:33.213

我在我正在工作的项目中也有同样的经历，这取决于您的主机设置，我找到了两个解决方案：

1.像这样使用'use-xserver'参数

```
 $ ./wkhtmltoimage-amd64 --use-xserver input.html output.jpg
    Loading page (1/2)
    Rendering (2/2)                                                    
    Done 
```

这在我的开发机器上就像一个魅力，但是我的托管服务提供商不允许我使用该选项，所以我不得不在谷歌代码存储库中挖掘答案，从而引导我找到下一个解决方案。

2.使用已弃用的静态版本[64 位](http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-0.10.0_rc2-static-amd64.tar.bz2&can=4&q= "64 位")或[32 位](http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltoimage-0.10.0_rc2-static-i386.tar.bz2&can=4&q= "32 位")

出于某种原因，xserver 似乎依赖于 0.11.0 版本，因此我使用了已弃用的下载部分中提供的旧版本，在这种情况下，0.10.0_rc2 非常适合我的项目。

使用此选项，不需要 use-xserver 参数：

```
 $ ./wkhtmltoimage-amd64 input.html output.jpg
    Loading page (1/2)
    Rendering (2/2)                                                    
    Done 
```

我希望这些选项中的任何一个都适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T11:53:33.230

另一种选择是使用 xvfb 将 wkhtmltoimage 命令包装在 X 服务器实例中。

```
sudo apt-get install xvfb
xvfb-run --server-args="-screen 0, 1280x1024x24" wkhtmltopdf --use-xserver --javascript-delay 3000 your-html-file.html test.pdf 
```

有关更详细的信息，请查看：[http ://blog.hugerepo.com/2013/04/28/what-is-the-qpixma/](http://blog.hugerepo.com/2013/04/28/what-is-the-qpixma/)

# php - Magento 1.7.0.0 产品页面上的自定义标签

> ID：12063666
> 
> 赞同：1
> 
> 时间：2012-08-21T21:58:34.830
> 
> 标签：php, html, xml, e-commerce

我正在尝试在 Magento Commerce 上的产品页面中添加几个自定义选项卡，遵循其他教程，但没有看到任何对我有帮助的东西。

正如它在[本教程](http://jonmarquis.com/custom-tabs-on-magento-product-pages/)中指定的那样，我将添加一些自定义选项卡，例如：**DESCRIPTION**、**SUPPLEMENT FACTS**、**LABEL**、**RATING AND REVIEWS**和**Q & A**（来自教程链接）

customtab.phtml 有：

```
<?php
//Load the product
$_helper = $this->helper('catalog/output');
$_product = $this->getProduct()
//Get additional data if the product has it
if($_additional = $this->getAdditionalData()):
//Finally, get the attribute label and close your if statement. Remember to change ingredients to the label you created.
?>
<?php echo $_product->getResource()->getAttribute('customtab')->getFrontend()->getValue($_product); ?>
<?php endif;?> 
```

注意：“customtab”已作为属性添加到我的默认属性集中

对于布局，我有：

```
 <block type="catalog/product_view_attributes" name="product.attributes" as="additional" template="catalog/product/view/attributes.phtml"><br/>
            <action method="addToParentGroup"><group>detailed_info</group></action>
                <action method="addTab" translate="title" module="catalog">
                    <alias>customtab</alias>
                    <title>Custom Tab</title>
                    <block>catalog/product_view_attributes</block>
                    <template>catalog/product/view/customtab.phtml</templat>
                </action>
            </block> 
```

知道如何添加自定义标签吗？

# c# - 如何在 C# 中使用 DeviceIoControl 和 FSCTL_MAKE_MEDIA_COMPATIBLE 完成 Live File System (LiveUDF) 光盘？

> ID：12063676
> 
> 赞同：1
> 
> 时间：2012-08-21T21:59:14.777
> 
> 标签：c#, user-defined-functions, finalize, imapi, deviceiocontrol

我正在尝试用 C# 完成 Live File System（或“Live UDF”）光盘。根据我阅读 MSDN 和 TechNet 文章以及各种论坛帖子的了解，Image Mastering API（或 IMAPI）不支持这种类型的文件系统，并且在我的编码工作中，我未能成功使用 IMAPI 完成 LiveUDF 光盘。因此，我使用了 FSCTL_MAKE_MEDIA_COMPATIBLE 控制代码的 DeviceIoControl 函数。

首先，我正在同步调用 DeviceIoControl，但该函数将返回 1117，并且磁盘最终会在几分钟后完成。这种结果是不可接受的，因为我需要该过程仅在最终失败或实际成功时返回。

接下来，我通过使用带有 FILE_FLAG_OVERLAPPED (0x40000000) dwFlagsAndAttributes 标志的 CreateFile 打开设备句柄并将 NativeOverlapped 对象传递给 DeviceIoControl 调用，继续异步调用 DeviceIoControl。在此之前，很明显，我设置了一个 IOCompletionCallback 来处理任何重叠事件。

如上所述异步调用 DeviceIoControl 时，它仍然几乎立即返回 1117（就像同步调用时一样），永远不会调用 IOCompletionCallback 方法，并且磁盘会在几分钟后完成。

我的问题是：**如何在 Windows 7 平台上使用 C# 和 DeviceIoControl（同步或异步，能够“等待”其进程完成）完成 C# 中的 Live File System（或“Live UDF”）光盘捕捉最终的成功或失败结果）？**

非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:09:38.420

调用**DeviceIoControl**传递**IOCTL_SCSI_PASS_THROUGH_DIRECT**控制代码和使用**Close Track/Session** SCSI 多媒体命令 (MMC)定义的**SCSI_PASS_THROUGH_DIRECT**结构提供了一种方法来完成 Live UDF 光盘并在最终成功或失败时返回**DeviceIoControl函数。**

 ****[我在阅读INCITS T10 技术委员会](http://www.t10.org)关于 SCSI 多媒体命令的提案和[http://sourceforge.net/projects/bwgburn/](http://sourceforge.net/projects/bwgburn/)上的一个项目时将其拼凑在一起。

基本上，它归结为只是向设备发送 SCSI 命令（在委员会的提案中定义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T16:02:06.150

我最近遇到了同样的问题，发现 IMAPI2.MsftDiscFormat2Data 的 .ForceMediaToBeClosed 可用于在刻录完成后完成 CD。这是我的代码（在 powershell 中）：

```
$TargetFolder="c:\path\to\files\to\be\burned"
$DiskMaster = New-Object -com IMAPI2.MsftDiscMaster2
$DiscRecorder = New-Object -com IMAPI2.MsftDiscRecorder2
$id = $DiskMaster.Item(0) #specify drive index here
$DiscRecorder.InitializeDiscRecorder($id)               
$FileSystemImage = New-Object -com IMAPI2FS.MsftFileSystemImage
$dir = $FileSystemImage.Root
$DiscFormatData  = New-Object -com IMAPI2.MsftDiscFormat2Data
$DiscFormatData.Recorder = $DiscRecorder
$DiscFormatData.ClientName = 'cd label' #specify cd label here
$DiscFormatData.ForceMediaToBeClosed = $true   #to finalize cd after burn
$FileSystemImage.ChooseImageDefaults($DiscRecorder)                
$dir.AddTree($TargetFolder, $false)
$result = $FileSystemImage.CreateResultImage()
$stream = $result.ImageStream
$DiscFormatData.Write($stream) 
```****

# sql - SQL 来确定当前周是否是包含每月 N 个星期五的周

> ID：12063680
> 
> 赞同：5
> 
> 时间：2012-08-21T21:59:26.607
> 
> 标签：sql, oracle, plsql

我正在寻找一些 SQL 来确定当前周是否是包含该月第 N 天的周。

例子。我想知道我是否在包含本月第三个星期五的那一周。或者每月的哪一周包含第三个星期五。周应定义为从星期日开始到星期六结束。因此，从星期六开始的月份直到第 4 周才会看到星期五，而从星期日到星期五开始的月份，会在该月的第三周看到它的第三个星期五。

不确定是否需要 PL/SQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T23:02:32.193

所有现代 SQL 平台都有丰富的日期/时间函数来进行日期运算。但是，当我查看基于它们构建的 SQL 时，尤其是对于像您这样的需求，我的眼睛呆滞了。

我改用精心制作的日历表。我*非常*喜欢使用它的两件事。

*   相对不熟练的实习生可以很快学会正确查询。
*   通常可以看到查询显然是正确的。

如果您试图回答“本周是否包含当月的第三个星期五？”这个问题，那么对我的日历表进行查询时的样子如下所示。（我的日历表使用 ISO 周数，而不是严格的日历周。以下两种解决方法。）

```
select cal_date
from calendar
where year_of_date = 2012 
  and iso_week = (select iso_week
                  from calendar
                  where cal_date = current_date)
  and day_of_week = 'Fri'
  and day_of_week_ordinal = 3; 
```

它不返回任何行；本周（2012-08-19 到 2012-08-25）不包含 2012 年 8 月的第三个星期五。（它包含第四个星期五。）

完全不改变我的表，我可以用这个查询回答你的第一个问题。它将您对一周的定义包装在一个公用表表达式中。如果我必须在生产中使用这样的东西，我可能会创建一个视图而不是 CTE。

```
with current_week as (
  select *
  from calendar
  where cal_date between (select max(cal_date) 
                          from calendar 
                          where day_of_week = 'Sun' 
                            and cal_date <= current_date) 
                     and (select min(cal_date) 
                          from calendar 
                          where day_of_week = 'Sat' 
                            and cal_date >= current_date)
)
select cal_date
from current_week
where day_of_week = 'Fri'
  and day_of_week_ordinal = 3; 
```

同样，它不返回任何行；同样的原因。

第二种选择是定义您自己的 week_number 列来替换我的 iso_week 列。然后你可以像上面的第一个一样表达你的查询。

* * *

PostgreSQL 中日历表的 DDL。DDL 是标准 SQL；不过，我不确定 iso_year 和 iso_week 上的 CHECK 约束是否是标准 SQL。添加适合您环境的索引。

包括填充表格的功能。应该很容易移植到 Oracle。

```
create table calendar (
  cal_date date primary key,
  year_of_date integer not null 
    check (year_of_date = extract(year from cal_date)),
  month_of_year integer not null 
    check (month_of_year = extract(month from cal_date)),
  day_of_month integer not null 
    check (day_of_month = extract(day from cal_date)),
  day_of_week char(3) not null 
    check (day_of_week = 
    case when extract(dow from cal_date) = 0 then 'Sun'
         when extract(dow from cal_date) = 1 then 'Mon'
         when extract(dow from cal_date) = 2 then 'Tue'
         when extract(dow from cal_date) = 3 then 'Wed'
         when extract(dow from cal_date) = 4 then 'Thu'
         when extract(dow from cal_date) = 5 then 'Fri'
         when extract(dow from cal_date) = 6 then 'Sat'
    end),
  day_of_week_ordinal integer not null
    check (day_of_week_ordinal = 
      case
        when day_of_month >= 1 and day_of_month <= 7 then 1
        when day_of_month >= 8 and day_of_month <= 14 then 2
        when day_of_month >= 15 and day_of_month <= 21 then 3
        when day_of_month >= 22 and day_of_month <= 28 then 4
        else 5
      end),
  iso_year integer not null 
    check (iso_year = extract(isoyear from cal_date)),
  iso_week integer not null 
    check (iso_week = extract(week from cal_date))

);

CREATE OR REPLACE FUNCTION insert_range_into_calendar(from_date date, to_date date)
  RETURNS void AS
$BODY$

DECLARE
    this_date date := from_date;
BEGIN

    while (this_date <= to_date) LOOP
        INSERT INTO calendar (cal_date, year_of_date, month_of_year, day_of_month, day_of_week, day_of_week_ordinal, iso_year, iso_week)
        VALUES (this_date, extract(year from this_date), extract(month from this_date), extract(day from this_date),
        case when extract(dow from this_date) = 0 then 'Sun'
             when extract(dow from this_date) = 1 then 'Mon'
             when extract(dow from this_date) = 2 then 'Tue'
             when extract(dow from this_date) = 3 then 'Wed'
             when extract(dow from this_date) = 4 then 'Thu'
             when extract(dow from this_date) = 5 then 'Fri'
             when extract(dow from this_date) = 6 then 'Sat'
        end,
        case when extract(day from this_date) between 1 and 7 then 1
             when extract(day from this_date) between 8 and 14 then 2
             when extract(day from this_date) between 15 and 21 then 3
             when extract(day from this_date) between 22 and 28 then 4
             when extract(day from this_date) > 28 then 5
        end,
        cast(extract(isoyear from this_date) as integer),
        cast(extract(week from this_date) as integer));
        this_date = this_date + interval '1 day';
    end loop;       

END;
$BODY$
  LANGUAGE plpgsql 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T05:45:15.477

您可以简单地生成包含每个月第 N 天的星期的日期范围，例如每个月的第三个星期五，使用如下查询：

```
select d - day_of_week AS sunday
      ,d + (7 - day_of_week) AS saturday
from   (select trunc(sysdate,'YY')+rownum-1 AS d
              ,to_number(to_char(trunc(sysdate,'YY')+rownum-1,'D'))
               AS day_of_week
        from dual connect by level <= 366)
where  to_char(d,'W') = 3
and    to_char(d,'DY') = 'FRI';

SUNDAY      SATURDAY
==========  ==========
14/01/2012  21/01/2012
11/02/2012  18/02/2012
10/03/2012  17/03/2012
14/04/2012  21/04/2012
12/05/2012  19/05/2012
09/06/2012  16/06/2012
14/07/2012  21/07/2012
11/08/2012  18/08/2012
15/09/2012  22/09/2012
13/10/2012  20/10/2012
10/11/2012  17/11/2012
15/12/2012  22/12/2012 
```

编辑：您可以创建一个简单的函数来检查单个日期，例如：

```
CREATE FUNCTION date_in_week_of_nth_day
   (in_date IN DATE
   ,in_week IN NUMBER
   ,in_day  IN VARCHAR2
   ) RETURN CHAR IS
  ret CHAR(1);
BEGIN
  select 'Y' into ret
  from   (select trunc(in_date,'MM')+rownum-1 AS d
                ,to_number(to_char(trunc(in_date,'MM')+rownum-1,'D'))
                 AS day_of_week
          from dual connect by level <= 31)
  where  to_char(d,'W') = in_week
  and    to_char(d,'DY') = in_day
  and    :in_date between (d - day_of_week) and (d + (7 - day_of_week));
  RETURN ret;
EXCEPTION
  WHEN NO_DATA_FOUND THEN
    RETURN 'N';
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T02:20:30.117

可能有更好的方法可以做到这一点，并且考虑到您没有任何类型的`calendar`表格，如果第四个星期五在当前周，则下面的查询将返回“Y”-

查询周开始`Sunday`和结束`Saturday`

```
SELECT 'Y' FROM
  (
   SELECT max(to_date(month||' '||fri,'MON YYYY DD')) DT FROM (
        SELECT LPAD( MONTH, 20-(20-LENGTH(MONTH))/2 ) MONTH,Sun, Mon, Tue,
               Wed, Thu, Fri, Sat
        FROM (SELECT TO_CHAR(dt,'fmMonthfm YYYY') MONTH,TO_CHAR(dt+1,'iw') week,
                    MAX(DECODE(TO_CHAR(dt,'d'),'1',LPAD(TO_CHAR(dt,'fmdd'),2))) Sun,
                    MAX(DECODE(TO_CHAR(dt,'d'),'2',LPAD(TO_CHAR(dt,'fmdd'),2))) Mon,
                    MAX(DECODE(TO_CHAR(dt,'d'),'3',LPAD(TO_CHAR(dt,'fmdd'),2))) Tue,
                    MAX(DECODE(TO_CHAR(dt,'d'),'4',LPAD(TO_CHAR(dt,'fmdd'),2))) Wed,
                    MAX(DECODE(TO_CHAR(dt,'d'),'5',LPAD(TO_CHAR(dt,'fmdd'),2))) Thu,
                    MAX(DECODE(TO_CHAR(dt,'d'),'6',LPAD(TO_CHAR(dt,'fmdd'),2))) Fri,
                    MAX(DECODE(TO_CHAR(dt,'d'),'7',LPAD(TO_CHAR(dt,'fmdd'),2))) Sat
                    FROM ( SELECT TRUNC(SYSDATE,'y')-1+ROWNUM dt
        FROM all_objects
        WHERE ROWNUM <= ADD_MONTHS(TRUNC(SYSDATE,'y'),12) - TRUNC(SYSDATE,'y'))
        GROUP BY TO_CHAR(dt,'fmMonthfm YYYY'), TO_CHAR( dt+1, 'iw' ))
        ORDER BY TO_DATE( MONTH, 'Month YYYY' ), TO_NUMBER(week))
    where to_char(to_date(month,'MON YYYY'),'MON YYYY') = to_char(sysdate,'MON YYYY')
      and fri is not null
      and rownum <= 4) a
where a.dt BETWEEN sysdate+(8 - to_char(sysdate,'d'))-7 
      AND sysdate+(7 - to_char(sysdate,'d')); 
```

要检查第 N 天 - 只需将子句替换`rownum <= N`为`and fri is not null`,`and <your_day> is not null`和`SELECT to_date(month||' '||fri,'MON YYYY DD') DT FROM ..`即可`SELECT to_date(month||' '||<your_day>,'MON YYYY DD') DT FROM ..`。

因此，只有`day`and`N`值的动态查询可以为您提供所需的结果。像

```
SELECT 'Y' FROM
      (
       SELECT max(to_date(month||' '||:day,'MON YYYY DD')) DT FROM (
            SELECT LPAD( MONTH, 20-(20-LENGTH(MONTH))/2 ) MONTH,Sun, Mon, Tue,
                   Wed, Thu, Fri, Sat
            FROM (SELECT TO_CHAR(dt,'fmMonthfm YYYY') MONTH,TO_CHAR(dt+1,'iw') week,
                        MAX(DECODE(TO_CHAR(dt,'d'),'1',LPAD(TO_CHAR(dt,'fmdd'),2))) Sun,
                        MAX(DECODE(TO_CHAR(dt,'d'),'2',LPAD(TO_CHAR(dt,'fmdd'),2))) Mon,
                        MAX(DECODE(TO_CHAR(dt,'d'),'3',LPAD(TO_CHAR(dt,'fmdd'),2))) Tue,
                        MAX(DECODE(TO_CHAR(dt,'d'),'4',LPAD(TO_CHAR(dt,'fmdd'),2))) Wed,
                        MAX(DECODE(TO_CHAR(dt,'d'),'5',LPAD(TO_CHAR(dt,'fmdd'),2))) Thu,
                        MAX(DECODE(TO_CHAR(dt,'d'),'6',LPAD(TO_CHAR(dt,'fmdd'),2))) Fri,
                        MAX(DECODE(TO_CHAR(dt,'d'),'7',LPAD(TO_CHAR(dt,'fmdd'),2))) Sat
                        FROM ( SELECT TRUNC(SYSDATE,'y')-1+ROWNUM dt
            FROM all_objects
            WHERE ROWNUM <= ADD_MONTHS(TRUNC(SYSDATE,'y'),12) - TRUNC(SYSDATE,'y'))
            GROUP BY TO_CHAR(dt,'fmMonthfm YYYY'), TO_CHAR( dt+1, 'iw' ))
            ORDER BY TO_DATE( MONTH, 'Month YYYY' ), TO_NUMBER(week))
        where to_char(to_date(month,'MON YYYY'),'MON YYYY') = to_char(sysdate,'MON YYYY')
          and :day is not null
          and rownum <= :num) a
    where a.dt BETWEEN sysdate+(8 - to_char(sysdate,'d'))-7 
          AND sysdate+(7 - to_char(sysdate,'d')); 
```

如果你仔细看，子查询中有一个完整的日历。哪个是-

```
SELECT LPAD( MONTH, 20-(20-LENGTH(MONTH))/2 ) MONTH,Sun, Mon, Tue,
               Wed, Thu, Fri, Sat
        FROM (SELECT TO_CHAR(dt,'fmMonthfm YYYY') MONTH,TO_CHAR(dt+1,'iw') week,
                    MAX(DECODE(TO_CHAR(dt,'d'),'1',LPAD(TO_CHAR(dt,'fmdd'),2))) Sun,
                    MAX(DECODE(TO_CHAR(dt,'d'),'2',LPAD(TO_CHAR(dt,'fmdd'),2))) Mon,
                    MAX(DECODE(TO_CHAR(dt,'d'),'3',LPAD(TO_CHAR(dt,'fmdd'),2))) Tue,
                    MAX(DECODE(TO_CHAR(dt,'d'),'4',LPAD(TO_CHAR(dt,'fmdd'),2))) Wed,
                    MAX(DECODE(TO_CHAR(dt,'d'),'5',LPAD(TO_CHAR(dt,'fmdd'),2))) Thu,
                    MAX(DECODE(TO_CHAR(dt,'d'),'6',LPAD(TO_CHAR(dt,'fmdd'),2))) Fri,
                    MAX(DECODE(TO_CHAR(dt,'d'),'7',LPAD(TO_CHAR(dt,'fmdd'),2))) Sat
                    FROM ( SELECT TRUNC(SYSDATE,'y')-1+ROWNUM dt
        FROM all_objects
        WHERE ROWNUM <= ADD_MONTHS(TRUNC(SYSDATE,'y'),12) - TRUNC(SYSDATE,'y'))
        GROUP BY TO_CHAR(dt,'fmMonthfm YYYY'), TO_CHAR( dt+1, 'iw' ))
        ORDER BY TO_DATE( MONTH, 'Month YYYY' ), TO_NUMBER(week); 
```

# plsql - oracle 更新集合

> ID：12063681
> 
> 赞同：1
> 
> 时间：2012-08-21T21:59:33.817
> 
> 标签：plsql, oracle11g

我有两种用户定义的集合类型。第一种类型有以下列：

```
CREATE OR REPLACE
TYPE collection_1 as OBJECT
(
currency_code   varchar2(30),
amount   number
) 
```

我已经使用 oracle bulk collect 在存储过程中填充了这个集合。所以现在让我们说，集合具有如下值：

```
currency_code     amount
CAD               100
USD               50
CAD                120
USD               30 
```

现在我想在这个集合上执行一些聚合函数并填充另一个集合来存储每种货币的总金额。所以我定义了另一个这样的集合：

```
CREATE OR REPLACE
TYPE collection_2 as OBJECT
(
currency_code   varchar2(30),
total_amount   number
) 
```

并像这样初始化它：

```
currency_code    total_amount
CAD               0
USD               0
GBP               0 
```

现在我想遍历 collection_1 并填充 collection_2 以便 collection_2 如下所示：

```
currency_code    total_amount
CAD               220              --i.e.100+120
USD               80
GBP               0 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T05:11:56.663

可能是这样的。

```
declare
    TYPE t_coll_1 is TABLE OF collection_1;
    v_coll_1    t_coll_1;

    TYPE t_coll_2 is TABLE OF collection_2;
    v_coll_2          t_coll_2;

begin
    /* populate v_coll_1 */
    /* populate v_coll_2 */

    for i in v_coll_2.first.. v_coll_2.last
    loop
       for j in v_coll_1.first.. v_coll_1.last
       loop
          if v_coll_2(i).currency_code = v_coll_1(j).currency_code
          then
              v_coll_2(i).total_amount := v_coll_2(i).total_amount + v_coll_1(j).total_amount;
          end if;
       end loop;
    end loop;
end; 
```

# sql - SSAS 存储过程抛出权限

> ID：12063687
> 
> 赞同：0
> 
> 时间：2012-08-21T22:00:04.760
> 
> 标签：sql, stored-procedures, ssas, sqlclient, system.data

我收到错误

```
Execution of the managed stored procedure 'mystoredprocedure' failed with the following error: Exception has been thrown by the target of an invocation.Request for the permission of type 'System."Data.SqlClient.SqlClientPermission, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken='bunchofgarbagenumbers' failed.. 
```

当用户尝试通过 excel 访问多维数据集时，就会出现这种情况。目前，可以在 sql 表中找到基于其区域的多维数据集成员权限。我的 dll 连接到一个 sql server 并从那里获取它需要的数据并将其形成一个 mdx 集。

过去几周一直运行顺利，直到今天用户收到此错误消息。IT 的其余部分向我报告说，连接字符串的要求没有任何更改（我通过在 Sql Server Management Studio 中使用其凭据登录来确认）有谁知道可能导致此错误的原因？

谢谢，伊桑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:25:27.720

我想通了，dll 被重新部署了，但是当它被重新部署时，dll 投标中的属性是安全的，没有给它任何外部服务器访问权限。

# jquery - 悬停时在表格行旁边显示元素

> ID：12063690
> 
> 赞同：2
> 
> 时间：2012-08-21T22:00:15.357
> 
> 标签：jquery, html, css

我要实现的是当有人将鼠标悬停在表格行上时，我想在表格左侧（表格外部）显示上下箭头。使用 html/css 或 jquery 实现此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T22:11:38.190

你可以在没有任何 JavaScript 的情况下做到这一点 - 只需像这样的纯 HTML：

### CSS

```
table {
    margin:     100px;
}

td {
    position:   relative;
}

span.arrow {
    display:    none;
    width:      20px;
    height:     20px;
    position:   absolute;
    left:       -20px;
    border:     1px solid red;
}

tr:hover span.arrow {
    display:    block;
} 
```

### HTML

```
<table>
    <tr>
        <td>
            <span class="arrow"></span>
            Some content
        </td>
        <td>Some content</td>
    </tr>
</table> 
```

这只是基本的想法。请记住，箭头必须与表格行有“连接”，否则当您向它们移动时它们会再次隐藏（因为您会离开 the `:hover`of the `<tr>`- 这就是为什么 the`width`和 of 的数量`left`在这个例子）。

### 演示

[jsFiddle](http://jsfiddle.net/txeEm/)

### 笔记

我只在 Safari 中测试过这个。对于所有其他浏览器，只需`position: relative;`从移动`<tr>`到`<table>`：

```
table {
    margin:100px;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:09:50.843

将`toggleClass`(http://api.jquery.com/toggleClass/) 与 jquery 一起使用

HTML

```
<table>
    <tr>
        <td>cell 1</td>
        <td>cell 2</td>
        <td class="arrows">
            <div class="hide">up down</div>
        </td>
    </tr>
</table> 
```

JS

```
$('.arrows').hover(function () {
    $(this).find('div').toggleClass('hide');
}); 
```

隐藏类可以简单地显示：无；。如果需要，您还可以使用绝对定位将它们移出表格。

# wpf - XAML 语法（机器可读）

> ID：12063691
> 
> 赞同：0
> 
> 时间：2012-08-21T22:00:31.337
> 
> 标签：wpf, xaml, syntax, xsd, visualization

是否有 XAML 语法的正式定义？有一个 PDF 文档以 XML 信息集的形式描述 XAML，但我找不到机制描述（XSD、RelaxNG 或类似的）。基本上我想采用架构并创建语法的可视化（XAML 的新功能）。

XAML 当然超越了 WPF，但我对用于 WPF 开发的 XAML 最感兴趣，并且想要一个可视化架构来概述如何组合构造。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:54:16.893

请注意，由于 XSD 具有可扩展性，因此无法使用 XSD 来完全描述 XAML 的架构。

然而，话虽如此，有一些 .xsd 文件试图提供一个接近的近似值。

查看 Visual Studio 的目录：

```
- C:\Program Files (x86)\Microsoft Visual Studio 9\Xml\Schemas
- C:\Program Files (x86)\Microsoft Visual Studio 9.0\Xml\Schemas
- C:\Program Files (x86)\Microsoft Visual Studio 10.0\Xml\Schemas
- C:\Program Files (x86)\Microsoft Visual Studio 11.0\Xml\Schemas 
```

对于`wpfe.xsd`和`xaml2006.xsd`。

（您可能还会看到对网络的引用`xaml.xsd`和`xaml2005.xsd`在网络上......通过较早的来源提供）。

Visual Studio/XAML 的早期版本（例如带有 WinFX 插件的 Visual Studio 2005）曾经使用这些 xsd 来提供基本的智能感知支持。现在我他们使用不同的技术（一种语言服务）来为 XAML 提供智能感知支持。

*   [http://blogs.windowsclient.net/rob_relyea/archive/2008/04/25/xaml-editing-in-slickedit.aspx](http://blogs.windowsclient.net/rob_relyea/archive/2008/04/25/xaml-editing-in-slickedit.aspx)

*   [http://weblogs.asp.net/cazzu/archive/2003/12/10/42513.aspx](http://weblogs.asp.net/cazzu/archive/2003/12/10/42513.aspx)

# string - Bash shell 中的“[ ]”与“[[ ]]”

> ID：12063692
> 
> 赞同：13
> 
> 时间：2012-08-21T22:00:31.510
> 
> 标签：string, bash, shell, scripting, if-statement

这可能已经回答了，但我还是要问它。我有两个版本的脚本 ( `comp.sh`)-

```
#!/bin/sh
export tDay=$(date '+%Y%m%d')
newfile="filename_$tDay"
filename="filename_20120821100002.csv"
echo $newfile $filename
if [ $filename = *$newfile* ]
then
  echo "Matched"
else
  echo "Not Matched!"
fi

Output:
$ ./comp.sh
filename_20120821 filename_20120821100002.csv
Not Matched! 
```

和

```
#!/bin/sh
export tDay=$(date '+%Y%m%d')
newfile="filename_$tDay"
filename="filename_20120821100002.csv"
echo $newfile $filename
if [[ $filename = *$newfile* ]]
then
  echo "Matched"
else
  echo "Not Matched!"
fi

$ comp.sh
filename_20120821 filename_20120821100002.csv
Matched 
```

有人可以解释一下为什么有区别吗？

另外 - 在什么情况下应该`[ ]`使用与`[[ ]]`反之亦然？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T00:00:40.793

`[[`是内置的 bash，不能在`#!/bin/sh`脚本中使用。您需要阅读 bash 手册的[条件命令](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)部分来了解`[[`. 想到的主要好处：

*   `==`并`!=`执行模式匹配，所以右边可以是一个 glob 模式
*   `=~`执行正则表达式匹配。捕获的组存储在`BASH_REMATCH`数组中。
*   布尔运算符`&&`和`||`
*   括号用于表达式分组。
*   没有分词，所以没有必要引用你的变量。

主要缺点：您的脚本现在是特定于 bash 的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-21T22:02:19.597

`test`的字符串相等运算符不做 glob。

```
$ [ abc = *bc ] ; echo $?
1
$ [[ abc = *bc ]] ; echo $?
0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T22:33:45.037

`Also - under what circumstances should [ ] be used vs. [[ ]] and vice versa?`

这取决于。如果您关心可移植性并希望您的 shell 脚本在各种 shell 上运行，那么您永远不应该使用`[[`. 如果您想要`[[`某些 shell 提供的功能，您应该`[[`在需要这些功能时使用。就个人而言，我从不使用`[[`，因为便携性对我来说很重要。

# trigger.io - 错误伪造 iOS 包

> ID：12063695
> 
> 赞同：5
> 
> 时间：2012-08-21T22:01:24.660
> 
> 标签：trigger.io

当我尝试使用 trigger.io 伪造包时，出现以下错误：

[错误] 运行 /usr/bin/codesign 时失败：/Dropbox/WWW/TriggerDev/development/ios/device-ios.app：替换无效的现有签名 /Dropbox/WWW/TriggerDev/development/ios/device-ios.app : 目标文件格式无法识别、无效或不合适

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T08:54:26.010

此错误通常意味着您的 iOS 开发人员环境设置不正确：您的开发人员证书是否允许使用您指定的配置文件？

此外，如果您使用我们的 Parse 推送通知集成，则需要为您的应用启用推送通知，如他们的文档中所述：[https ://parse.com/docs/ios_guide#push](https://parse.com/docs/ios_guide#push)

**注意**似乎没有安装 Xcode 命令行工具也会导致这个问题 - 请参阅@MyWetSocks 的评论。转到首选项 > 下载。

# javascript - 非常奇怪的 JS / jQuery 行为 - alert() 包含/排除

> ID：12063700
> 
> 赞同：0
> 
> 时间：2012-08-21T22:01:53.390
> 
> 标签：javascript, jquery, html, javascript-events, event-handling

我有下表。在此表中，我动态添加了以下形式的行：

```
<tr class="conditionalRow">
  <td class="logicalData">
    <select oldvalue="AND" class="logicSelectionMenu">          
      <option value="AND">AND</option>
      <option value="AND (">AND (</option>
      <option value="OR">OR </option>
      <option value="OR (">OR (</option>
      <option value=")">)</option>
    </select>
  </td>
  <td class="fieldData">
    <p>Other Data that you don't need to worry about</p>  
  </td>
  <td class="conditionData">
    <p>Other Data that you don't need to worry about</p>  
  </td>
  <td class="compareData">
    <p>Other Data that you don't need to worry about</p>  
  </td>
  <td>
   <button class="removeConditionButton" type="button"> - </button>
  </td>
</tr> 
```

我使用以下 jQuery 选择器来处理 onchange 事件：

```
$(document).ready(function() {
  $(".logicSelectionMenu").change(function() {
    var row = $(this).closest("tr");
    updateLogicMenu(row);
  });
  $(".logicSelectionMenu").focus(function() {
    $(this).attr("oldValue",$(this).val());
  });
});

function updateLogicMenu(inRow) {
  var selectedVal = $(inRow).find(".logicSelectionMenu").attr("value");
  var oldVal = $(inRow).find(".logicSelectionMenu").attr("oldValue");

/* -=>  VERY IMPORTANT LINE BELOW!!!  <=- */
//  alert("Hi, I cause a time delay");

  if (selectedVal == ")") {
  // clears cell contents if ")" is choosen by user
    $(inRow).find(".fieldSelectionMenu"    ).css("visibility","hidden").html("");
    $(inRow).find(".conditionSelectionMenu").css("visibility","hidden").html("");    
    $(inRow).find(".compareData"           ).css("visibility","hidden").html("");
  }
  else if(oldVal == ")" || oldVal === undefined) {
  // regenerates cell contents when user changes selection from ")" to another
    alert("regenerating");
    $(inRow).find(".fieldSelectionMenu").css("visibility","visible").html(getFieldSelectionOptions());
    $(inRow).find(".conditionSelectionMenu").css("visibility","visible");    
    $(inRow).find(".compareSelectionMenu").css("visibility","visible");
    updateFieldMenu(inRow); // function regenerates the next cell contents
                            // and calls another function 
                            // which regenerates the next cell contents, 
                            // and chains on and on ... etc
  }
  else { ; } // no action is needed,no clearing or regeneration
} 
```

问题是当我从下拉菜单中选择“）”选项然后选择另一个选项时。该页面现在确实按预期运行。

*   当**没有**注释掉非常重要的行时，两个警告框都会弹出“我导致时间延迟”和“正在重新生成”，并且以下单元格的内容会按预期重新生成。

*   当非常重要的行被**注释掉**时，JavaScript 不会进入 else 子句，并且不会重新生成以下单元格的内容。

是什么导致此警报框导致页面按预期运行，但它的缺失使页面出现意外？是用户单击确定按钮的时间延迟吗？我不希望在生产页面上出现此警告框，那么如何使页面在有或没有警告框的情况下表现相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:08:19.127

```
var selectedVal = $(inRow).find(".logicSelectionMenu").attr("value"); 
```

`.logicSelectionMenu`没有属性`value`。

改用[`.val()`](http://api.jquery.com/val)：

```
var selectedVal = $(inRow).find(".logicSelectionMenu").val(); 
```

另外，作为旁注，您通过使用名为 的属性使 HTML 无效`oldvalue`，您应该使用这些`data-*`属性，并将其设置为：`data-oldvalue="oldvalue"`.

而您现在的做法是，您在`attr("oldValue")`设置时访问`oldvalue="val"`-**请注意大小写**。

`oldVal`永远不会`undefined`像您在标记中设置的那样，因此`||`您的`if`语句部分是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:36:42.260

感谢*ahren 的*观察，我找到了我的代码的修复程序。

***阿伦的*****观察：**

“更改选择后焦点事件再次触发，因此 oldVal 被更新。拥有 alert() 删除此焦点并防止它再次触发”

**修复：**

```
$(document).ready(function() {
  $(".logicSelectionMenu").change(function() {
    var row = $(this).closest("tr");
    updateLogicMenu(row);
  });

/* DON'T USE onfocus event
   to set the oldValue
  $(".logicSelectionMenu").focus(function() {
    $(this).attr("oldValue",$(this).val());
  });
*/

});

function updateLogicMenu(inRow) {
  var selectedVal = $(inRow).find(".logicSelectionMenu").attr("value");
  var oldVal = $(inRow).find(".logicSelectionMenu").attr("data-oldValue");

/* -=>  VERY IMPORTANT LINE BELOW!!!  <=- */
//  alert("Hi, I cause a time delay");

  if (selectedVal == ")") {
  // clears cell contents if ")" is choosen by user
    $(inRow).find(".fieldSelectionMenu"    ).css("visibility","hidden").html("");
    $(inRow).find(".conditionSelectionMenu").css("visibility","hidden").html("");    
    $(inRow).find(".compareData"           ).css("visibility","hidden").html("");
  }
  else if(oldVal == ")" || oldVal === undefined) {
  // regenerates cell contents when user changes selection from ")" to another
    alert("regenerating");
    $(inRow).find(".fieldSelectionMenu"    ).css("visibility","visible").html(getFieldSelectionOptions());
    $(inRow).find(".conditionSelectionMenu").css("visibility","visible");    
    $(inRow).find(".compareSelectionMenu"  ).css("visibility","visible");
    updateFieldMenu(inRow); // function regenerates the next cell contents
                            // and calls another function 
                            // which regenerates the next cell contents, 
                            // and chains on and on ... etc
  }
  else { ; } // no action is needed,no clearing or regeneration

  /* SET THE VALUE HERE: */
  $(inRow).find(".logicSelectionMenu").attr("data-oldValue",selectedVal);
} 
```

设置`oldValue`函数末尾的值，让`oldVal === undefined`catch 第一次通过函数。

# facebook-graph-api - 为 facebook graph 配置代理

> ID：12063701
> 
> 赞同：0
> 
> 时间：2012-08-21T22:01:58.487
> 
> 标签：facebook-graph-api, configuration

我正在实现 facebook 图形 API，但出于安全原因，我不允许在后端进行外部调用。在这种情况下，我需要做的是配置一个指向 facebook 图形 API 的代理，并且我的应用程序所做的所有图形 API 调用都应该通过这个代理。

我一直在测试的 facebook 图 IP 是 69.171.234.38，所以我想到的代理配置是：目的地：69.171.234.38 和端口：443。

由于此代理将被修复，我想知道我是否可以相信此 IP 将保留，我的意思是，如果此 IP 更改，那将是一个问题，因为我的解决方案将停止工作。

facebook graph 使用的 IP 是否固定？

# c# - 公共静态列表单个项目

> ID：12063710
> 
> 赞同：0
> 
> 时间：2012-08-21T22:02:52.833
> 
> 标签：c#, .net-2.0

如何获取公共静态列表的单个值

```
//get value error
Console.WriteLine(lbl_test.module_a.moduleoutput[0]);

public static List<string> moduleoutput()
{
    List<string> output = new List<string>();
    output.Add("test 1");
    output.Add("test 2");
    output.Add("test 3");
    return output;
} 
```

错误： **无法将带有 [] 的索引应用于“方法组”类型的表达式**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:07:34.013

您需要先获取列表，然后才能通过索引器访问它。所以缺少方法调用（括号）。`moduleoutput`是方法而不是变量。

```
Console.WriteLine(lbl_test.module_a.moduleoutput()[0]); 
```

在此处搜索*方法访问*：http : [//msdn.microsoft.com/en-us/library/ms173114.aspx](http://msdn.microsoft.com/en-us/library/ms173114.aspx)

> 调用对象的方法就像访问字段一样。在对象名称之后，添加句点、方法名称和括号。参数列在**括号内**，并用逗号分隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:08:31.120

那是一种方法，而不是一种属性。您必须调用该方法。

您可能希望它成为一个属性：

```
public static List<string> moduleoutput 
{
    get 
        { 
            List<string> output = new List<string>();
            output.Add("test 1");
            output.Add("test 2");
            output.Add("test 3");
            return output;
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T22:11:17.267

我怀疑你说错了。您`moduleoutput`作为变量而不是方法调用。你忘了括号：

```
Console.WriteLine(lbl_test.module_a.moduleoutput()[0]); 
```

下面的示例代码完美运行：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(Moduleoutput()[0]);
        Console.ReadLine();
    }

    public static List<string> Moduleoutput()
    {
        List<string> output = new List<string>();
        output.Add("test 1");
        output.Add("test 2");
        output.Add("test 3");
        return output;
    }
} 
```

# php - 从动态 jquery 表单字段向 mysql 添加行

> ID：12063713
> 
> 赞同：1
> 
> 时间：2012-08-21T22:03:11.633
> 
> 标签：php, jquery, mysql, dynamic

请原谅我，因为我不精通 php/mysql。我有一个用于库存的 html 表单。我有一组字段来更新我的 sql 数据库，它们是 item_name、item_cost、item_quantity。我有一个 jquery 按钮，允许用户动态添加其他项目/行。

问题：我怎样才能让 php 循环用户添加的任何数量的项目并将它们放入 mysql 数据库中？

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T22:07:48.007

如果您有多个具有相同名称的表单输入，并且该名称以双方括号结尾，则当 PHP从表单中`[]`填充时，它们的值将转换为一个数组。`$_POST`

因此，您的 jQuery 按钮应该插入一行，其中包含如下命名的字段：

```
<input type="text" name="item_name[]" value="" />
<input type="text" name="item_cost[]" value="" />
<input type="text" name="item_quantity[]" value="" /> 
```

在接受表单提交的 PHP 代码中，您可以像这样处理所有存在的行：

```
//I used `item_name` as the loop termination condition, 
//but any of the 3 keys would have worked
for ($i = 0; $i < count($_POST['item_name']); $i++) {
    $item_name = $_POST['item_name'][$i];
    $item_cost = $_POST['item_cost'][$i];
    $item_quantity = $_POST['item_quantity'][$i];

    //here, inside the loop, run your database query using the 3 values above    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:14:02.730

另一种（硬）方法是有一个隐藏的输入框，它的值是用户想要提交的项目的数量，在每个 jquery“添加按钮”点击时，隐藏输入的值也将被更新（值++），并且您应该在使用 jquery 制作它们时执行其他输入名称，例如“name_id”，这样您就可以在服务器端获取它们......

# python - 使用帮助和 pydoc 列出不工作的 python 模块

> ID：12063718
> 
> 赞同：3
> 
> 时间：2012-08-21T22:03:26.910
> 
> 标签：python, python-module, pydoc

我正在尝试找出我为 python 安装的模块

来自：[这个话题](https://stackoverflow.com/questions/739993/get-a-list-of-installed-python-modules)

我试过了

```
>>> help('modules')
no Python documentation found for 'modules'

>>> pydoc modules
  File "<stdin>", line 1
    pydoc modules
                ^
SyntaxError: invalid syntax 
```

但是，这有效

```
>>> help('numpy') 
```

以及我知道我已安装的任何其他模块。

这*确实*返回了模块，但是**有没有办法修复我的帮助文档？**

```
from pkgutil import iter_modules
for a in iter_modules():
    print a 
```

**编辑**

我通过 Mac OS mtn lion 上的 enthought python 发行版安装了 64 位 python 2.7

在 shell 中运行 pydoc：

```
$ pydoc modules
no Python documentation found for 'modules' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:56:43.840

help('modules') 在 Enthought 的 Python 的较新版本中被故意禁用，因为它可靠地导致标准 EPD 包集的段错误。

列出您在 EPD 中安装的所有软件包的一种方法是使用`enpkg -l`. 请注意，此工具仅列出您使用 EPD 安装程序或 enpkg 本身安装的软件包；它不会知道您手动安装的软件包，或者例如使用 pip 安装的软件包。

有关 enpkg 工具的更多信息可以通过键入找到`enpkg --help`，或者在此 Enthought 知识库文章中找到：https: [//support.enthought.com/entries/22415022-using-enpkg-to-update-epd-packages](https://support.enthought.com/entries/22415022-using-enpkg-to-update-epd-packages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T15:37:29.143

您可以尝试在 python 中使用 '>>> help()'。这将带你到帮助提示，看起来像 - help>

在这里您可以键入“模块”以获取所有模块的列表。

# java - java.lang.IllegalAccessError：尝试从动态加载的子内部类访问父类中的字段

> ID：12063720
> 
> 赞同：2
> 
> 时间：2012-08-21T22:03:36.327
> 
> 标签：java, dynamic-class-loaders, illegalaccessexception

我正在尝试修改一些现有代码，以便能够动态使用子类将数据导入我的程序。但是我遇到了一个问题。我试图动态导入的类之一包含两个子类，它们访问导致 java 抛出 IllegalAccessError 的抽象父类字段。我写了一个小测试程序来演示我遇到的问题。

调用代码创建 URL 类加载器，加载类，然后调用 do work 方法：

```
 URLClassLoader child = new URLClassLoader (urls, this.getClass().getClassLoader());
    Class toLoad = Class.forName ("jarLoader.ChildClass", true, child);
    SuperClass sc = (SuperClass) toLoad.newInstance();
    sc.doWork(); 
```

Parent 类包含 3 个 int 字段和一个抽象方法：

```
package jarLoader;

public abstract class SuperClass {

protected int a = 1;
protected int b = 2;
protected int c = 3;

public SuperClass(){
}

public abstract void doWork();

} 
```

子类，当调用do work时，它会创建内部类并尝试访问父数据字段并抛出异常：package jarLoader;

公共类 ChildClass 扩展 SuperClass {

```
@Override
public void doWork() {
    NestedClass c = new NestedClass();
    c.go();
}

class NestedClass{

    private void go(){
        int val = a;
        System.out.println(val);
    }
}

} 
```

仅在我将子类导出为 jar 并在运行时运行加载 jar 的程序后才会发生该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-23T05:53:44.617

[https://en.wikibooks.org/wiki/Java_Programming/Keywords/protected](https://en.wikibooks.org/wiki/Java_Programming/Keywords/protected)

> 此关键字是访问修饰符，在方法或其他类成员之前使用，表示该方法或变量只能由位于其自己的类或同一包中的类中的元素访问（就像默认可见性级别一样）但此外来自其自己类的子类，包括外部包中的子类（如果访问是在表达式上进行的，其类型是该子类的类型）。

一旦你从 jar 中加载它，它实际上扩展了父级的副本（据我所知，就是这样）。因此它无法访问真正父级的受保护元素。您是否尝试过将 a 设置为 public 或创建公共 getter？

# php - 如何仅为域（没有子域）设置 cookie？

> ID：12063721
> 
> 赞同：4
> 
> 时间：2012-08-21T22:03:37.897
> 
> 标签：php, cookies

我需要为 example.com 设置 cookie，但我希望 static.example.com 没有 cookie。

在 setcookie() 中设置域参数将使它们可用于 example.com 及其所有子域，这是我不想要的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:09:19.550

来源：[http ://www.php.net/manual/en/function.setcookie.php#93641](http://www.php.net/manual/en/function.setcookie.php#93641)

[..]如果句点不存在，firefox 将在域值前面加上句点（句号）。这是因为 Firefox 期望域参数值（如果存在）是域名而不是主机名。

因此，如果 www 是主机名，则使用域值为 www.example.com 的 setcookie() 是不正确的。如果要将 cookie 限制为单个主机，请将域参数提供为空字符串，例如（注意最右边的参数）：

```
setcookie("TestCookie", "SomeValue", time()+3600, "/~rasmus/", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T23:56:49.863

这显然是做不到的。

如果有人找到方法，我将更改接受的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:10:10.943

您可以明确设置 cookie 为`www.example.com`，而不是`example.com`。请记住，这`www.example.com`也类似于子域，在其中设置 cookie 不会影响`static.example.com`或`something_else.example.com`

# c++ - 你能帮我在这段代码中应用一个互斥对象吗？

> ID：12063723
> 
> 赞同：1
> 
> 时间：2012-08-21T22:03:52.080
> 
> 标签：c++, mutex

我一直在谷歌上搜索互斥锁教程/示例，但似乎找不到适合我需要的情况（或者更有可能我找到了，但从未意识到如何将其应用于我的情况，因为我目前并不完全理解它）。

我有一个具有 2 个回调函数的 C++ dll。回调函数是从第 3 方程序调用的。每个回调函数将信息添加到全局变量（单独的全局变量）。还有 2 个其他函数，每个函数都使用这些全局变量。

3rd 方程序有很多线程，所以回调函数一直被调用。其他 2 个函数由用户手动调用。全局变量最终会同时被 2 个事物访问并导致崩溃。

现在全局变量在这样的类中

```
 class Global
{
public:
static CString &  get_allscores() {  static CString get_allscores; return get_allscores; }
static CString &  get_allplayers() {  static CString allplayers; return allplayers; }
}; 
```

有人可以向我展示一个关于如何将互斥锁与两个都访问其中一个全局变量的函数一起使用的快速示例吗？

谢谢

编辑：

这样的情况怎么办

```
CString allchat; //global variable

void function1()
{
    allchat += "test";
}

void function2()
{
    cout << allchat;
} 
```

如果这些函数被许多线程重复且无序地调用，我可以添加一个互斥对象以使其对多线程友好吗？

到目前为止，我的计划是在程序启动时创建一个没有所有者的互斥体。然后当每个函数被调用时，它将获得所有权并在函数结束时释放它。这是正确的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T01:37:48.333

关于答案的编辑部分：是的，如果这些是访问全局数据的唯一函数，那么为这两个函数添加互斥锁将使代码线程安全。当然，危险在于在开发和维护代码的过程中忘记了必须使用互斥锁来保护这些全局数据。当然，该问题的解决方案是将编写的代码包装在一个类中，使其`allchat`成为一个私有成员，向该类添加一个互斥锁，并使用任何访问`allchat`.

# php - 将字符串传递给 $_POST

> ID：12063725
> 
> 赞同：1
> 
> 时间：2012-08-21T22:03:55.937
> 
> 标签：php, string, post

我有几个单选按钮数组。它们被命名为awardLevel0[]、awardLevel1[]、awardLevel2[]等，由用户动态生成。我想知道这个函数是否可以得到它们的总和值。

```
function awardCheck () {
    $exist = true;
    $num = 0;
    $endsum = 0;
    while ($exist)
    {
        $names = "awardLevel" . $num;
        $awardLev = $_POST[$names];
        if (empty($awardLev)) {
            $exist = false;
            return $endsum;
        }
        else 
            $endsum = $endsum + $awardLev;
        $num++;
    }
    return $endsum;
} 
```

**当我运行上面的代码时，它给了我一个错误 $endsum = $endsum + $awardLev; 说我正在使用不支持的操作数类型。当我删除 $awardLev 时，它运行时不会出现该错误。**

是否可以将包含字符串的变量传递给 $_POST

```
$postname = "awardLevel2";
$awardLev = $_POST[$postname]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:06:11.370

是的，您绝对可以这样做，但请注意：

使用`[]`POST 值中的语法，您将得到一个数组而不是字符串。如果你只是放弃数字，你可以利用它来发挥你的优势，甚至`array_sum`是`_POST[awardLevel]`价值，但我不确定这是否适合你。

我错过了您的语法错误（顺便说一句，下次立即发布任何错误）。

由于`awardLev`是一个数组，因此您只能`+`与另一个数组一起使用，而不能与整数一起使用。只需使用

```
$endsum += $awardLev[0] 
```

反而。或者，如果您期望每个有多个值`awardLev`：

```
$endsum += array_sum($awardLev); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:17:19.357

当你有很多已知的组件并且你想用你的帖子变量的名称创建动态变量时，一个有用的事实是做一些类似的事情：

```
foreach ($_POST as $key => $value){
    $$key = $value;
} 
```

例如，如果你有一个像

```
<textarea name="postText"></textarea> 
```

您将有一个名为“postText”的变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:38:52.247

你试过这个..？？

```
$endsum = $endsum.$awardLev; 
```

# php - 在共享平台上启用 Pear SOAP 模块

> ID：12063733
> 
> 赞同：1
> 
> 时间：2012-08-21T22:04:39.260
> 
> 标签：php, soap, installation, pear

我正在将网站转移到 FatCow 托管的新服务器。它是一个共享平台，他们已经安装了 Pear SOAP 模块。我试图弄清楚如何正确打开它。在我的 php ini 文件中，我添加了：

```
extension_dir = ".:/usr/local/php/pear/"
extension=php_soap.dll 
```

但是，当我尝试调用从 SOAP 模块扩展的类时收到此错误

```
PHP Warning:  PHP Startup: Unable to load dynamic library '.:/usr/local/php/pear/php_soap.dll' - .:/usr/local/php/pear/php_soap.dll: cannot open shared object file: No such file or directory in Unknown on line 0 
```

支持人员告诉我 PEAR 的路径是 .:/usr/local/php/pear/php_soap.dll

那么我是否缺少在我的网站上启用 Pear SOAP 模块的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:02:43.340

我还使用 fatcow 进行托管，技术支持人员建议他们不支持 php soap。然而，他们确实使用 PEAR SOAP。我还被告知，使用他们的 UNIX 托管平台，他们无法识别 extension=php_soap.dll 中的命令。ini 文件。真的绑住你的手。

# php - 构造函数不触发

> ID：12063736
> 
> 赞同：0
> 
> 时间：2012-08-21T22:05:10.487
> 
> 标签：php, oop, constructor

我可能遗漏了一些明显的东西，但构造函数没有用新对象触发。我已经拉了几个小时的头发了。我确实检查了我从查询中得到的结果。上课的开始

```
class OrderDetail {
private $id;
private $product;
private $quanity;
private $price;
private $orderID;
private $noProduction;
private $productName;

public function _construct($orderID, $id = NULL, $product = NULL, $productName = NULL, $quanity = NULL, $price = NULL, $noProduction = NULL){
    $this->id = $id;
    $this->orderID = $orderID;
    echo "check";
    $this->product = $product;
    $this->productName=$productName;
    $this->quanity = $quanity;
    $this->price = $price;
    $this->noProduction = $noProduction;

} 
```

应该创建一个新对象的函数

```
public static function getOrderDetails($orderID){
    $db=  database_connection::getDB();

    $query = "SELECT tblorder_details.*, tblproduct.product_name
              FROM tblorder_details INNER JOIN tblproduct ON tblorder_details.product_ID = tblproduct.product_ID
              WHERE (((tblorder_details.order_ID)= :orderID))";
    $statement = $db->prepare($query);
    $statement->bindValue(':orderID', $orderID);
    $statement->execute();

    $orderDetails = array();
    foreach ($statement as $row){
        //echo $row["order_ID"];
        $orderDetail = new OrderDetail(
                                    $row["order_ID"],
                                    $row["order_details_ID"],
                                    $row["product_ID"],
                                    $row["product_name"],
                                    $row["quanity"],
                                    $row["price"],
                                    $row["no_production"]);

        $orderDetails[]=$orderDetail;
    }
    return $orderDetails;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:06:43.100

```
public function __construct 
```

你需要两个__

# jquery - 选择 .button 其中 data-source 等于 all

> ID：12063737
> 
> 赞同：1
> 
> 时间：2012-08-21T22:05:12.360
> 
> 标签：jquery, jquery-selectors, attributes, jquery-filter

如问题标题中所述，我正在尝试选择`a.button`位置`:data(source==all)`但没有成功，这就是我尝试过的

```
$('.button:data("source==all")').css('background', 'red');
$('#sources-list li').find('.button:data("source==all")').css('background', 'red');
$('#sources-list li').find('.button:data("source=all")').css('background', 'red'); 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:09:03.610

我想你想要

```
$('a.button[data-source=all]').css('background', 'red'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:09:28.510

试试这个：

```
$('.button').filter(function(){
    return $(this).data('source') == "all"
}).css('background', 'red'); 
```

# python - 在 distutils2 中使用鼻子测试

> ID：12063742
> 
> 赞同：2
> 
> 时间：2012-08-21T22:05:58.280
> 
> 标签：python, python-2.7, distutils, nosetests, distutils2

我正在尝试将其`nosetests`用作基于`distutils2`（使用`setup.cfg`文件而不是“旧”`setup.py`脚本）的构建/发布链的一部分。

不幸的是，当我发出：

```
pysetup run test 
```

我得到：

```
running test
running build
running build_py

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK 
```

...但是，如果我`nosetests`从同一个位置发出，我可以看到我的所有测试都在执行。我的目录结构如下：

```
|-- docs
|-- my_package
|   |-- __init__.py
|   |-- foobar.py
|   `-- tests
|       `-- foobar_test.py
|-- README.md
|-- requirements.txt
`-- setup.cfg 
```

`setup.cfg`我的文件的相关部分包含：

```
[test]
runner = nosetests 
```

我究竟做错了什么？官方文档在这一点上并不完美......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:23:52.563

您是否尝试过：

```
pysetup run test --runner=nosetests 
```

我有同样的问题，在我看来 distutils2 并不太关心我在 [test] 部分输入的内容（我可以写任何东西，它永远不会引发错误）。

无论如何它也不会运行，因为 --runner 和 --suite 选项都需要一个模块。

我能够运行测试的唯一方法是使用我放入包中的“run_tests.py like”模块，然后调用：

```
pysetup run test --suite=package_were_tests_runner_is.run_tests 
```

# watir - Watir Webdrive 无法连接到正在运行的浏览器

> ID：12063751
> 
> 赞同：2
> 
> 时间：2012-08-21T22:06:49.770
> 
> 标签：watir, watir-webdriver

我有几个星期没有在 Chrome 中使用 Watir Webdriver，今天当我尝试使用它时，当我尝试创建一个新的浏览器实例时出现错误。这是得到的错误：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\kai.knutson>irb
irb(main):001:0> require "watir-webdriver"
=> true

irb(main):002:0> e = Watir::Browser.new:chrome
Started ChromeDriver
port=9515
version=18.0.1022.0
log=C:\Users\kai.knutson\chromedriver.log
.\test\automation\proxy_launcher.cc(106): error: Value of: app_launched
  Actual: 1
Expected: AUTOMATION_SUCCESS
Which is: 0
Error while awaiting automation ping from browser process
[0821/155924:ERROR:proxy_launcher.cc(569)] Failed to ConnectToRunningBrowser
.\test\automation\proxy_launcher.cc(303): error: Value of: browser.get()
  Actual: false
Expected: true
Selenium::WebDriver::Error::UnknownError: Unable to either launch or connect to
Chrome. Please check that ChromeDriver is up-to-date. Using Chrome binary at: C:
\Users\kai.knutson\AppData\Local\Google\Chrome\Application\chrome.exe
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/response.rb:52:in `assert_ok'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/response.rb:15:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/http/common.rb:59:in `new'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/http/common.rb:59:in `create_response'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/http/default.rb:59:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/http/common.rb:40:in `call'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/bridge.rb:598:in `raw_execute'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/bridge.rb:92:in `create_session'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/remote/bridge.rb:68:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/chrome/bridge.rb:29:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/common/driver.rb:37:in `new'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver/common/driver.rb:37:in `for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/s
elenium/webdriver.rb:65:in `for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir
-webdriver/browser.rb:35:in `initialize'
        from (irb):2:in `new'
        from (irb):2
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T07:13:58.943

你有 selenium-webdriver 2.24.0，最新版本是 2.25.0。更新您的 gem（或至少 selenium-webdriver）并让我们知道问题是否仍然存在。另外，获取最新的 chromedriver：[http ://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)

# iphone - 解析时的活动指示器

> ID：12063752
> 
> 赞同：0
> 
> 时间：2012-08-21T22:07:07.453
> 
> 标签：iphone, ios, cocoa-touch, ios5, nsxmlparser

场景是：

有一个视图有一个按钮，可以将用户带到另一个视图。在下一个视图控制器的 viewDidLoad 中，一个巨大的 XML 文件被下载、解析并显示在屏幕上。这样，当视图导航到它时，我得到了已经显示在屏幕上的数据。

问题是：

当我单击调用视图控制器并在其中进行解析的按钮时，应用程序变得无响应。下载并解析完所有数据后，应用程序将立即移至下一个视图。现在，我想在单击该按钮时显示一个活动指示器，直到应用程序无响应为止。一旦视图导航到另一个视图，活动指示器应该停止。我尝试将活动指示器放在我想登陆的 ViewController 的 viewDidLoad 中，但无济于事。

PS：由于应用程序性质的一些限制，我无法在“viewWillAppear”中进行解析。

期待回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T23:02:43.187

您应该在后台队列/线程中做任何不涉及 UI 的主要工作。

使用 GCD，可能看起来像这样：

```
// Start UIActivityIndicator

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    // Parse your XML

    dispatch_async(dispatch_get_main_queue(), ^{

        // Update the UI when you're finished

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:58:57.217

您希望在后台下载文件。如果为此使用 NSOperations，则可以让该操作也解析 XML 文件。

如果您愿意，这为您提供了两种显示进度的方法（比一个微调器更好）。允许 50% 用于下载，50% 用于解析。当您收到 urlConnection 委托响应时，您可以了解下载的大小，然后随着数据的进来更新进度。当你开始解析时，你可以在 parser:didEndElement 中放一些代码来询问解析器它在哪一行，如果你知道总行数，你就知道它的进度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T22:53:21.073

你真的应该在另一个线程上进行解析。这样主线程（也是 UI 线程）可以继续。看`performSelectorInBackground`。

您的指示器没有显示，因为解析可能发生在之前`viewDidLoad`。您可以先添加指标，然后推送新的视图控制器，然后删除指标。

但实际上，这是非常糟糕的 UI 和 UX 设计，您应该使用线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T12:30:46.240

你可以使用 MBProgressHUD 这里是链接。

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_uiactivityindicatorview_mbprogresshud/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_uiactivityindicatorview_mbprogresshud/)

你必须在你的 viewcontroller viewdidload 方法中使用它。

# android - android 使用 setlistadapter() 而不扩展 listactivity

> ID：12063757
> 
> 赞同：3
> 
> 时间：2012-08-21T22:07:14.750
> 
> 标签：android, listview, android-activity

大量的搜索和阅读并没有提供这个问题的答案。我的活动没有扩展 ListActivity 所以这一行会引发错误。设置列表适配器（文件列表）；

它应该填充一个列表视图，非常感谢任何可靠的帮助。

```
 ArrayAdapter<String> fileList =
    new ArrayAdapter<String>(this, R.layout.row, item);
    setListAdapter(fileList); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T22:09:46.407

获取您的`ListView`使用参考`findViewById(int)`。然后使用您的适配器作为参数调用该`ListView.setAdapter(ListAdapter)`引用上的方法。

# javascript - 无法自动完成以使用引导程序和 php codeigniter

> ID：12063759
> 
> 赞同：1
> 
> 时间：2012-08-21T22:07:22.140
> 
> 标签：javascript, jquery, jquery-ui, codeigniter, twitter-bootstrap

我正在尝试获取自动完成的文本字段。似乎没有什么对我有用（我使用 Codeigniter 作为后端，使用 Bootstrap 作为样式）。
在没有引导主题 c​​ss 的页面中测试任何插件时。它就像一个魅力，但此刻我在该页面中链接了一些引导程序，它停止了。

到目前为止我使用过：
1\. 内置的 typeahead 插件。
2\. jquery-ui 自动完成小部件。
3.jquery textExt.
4\. 还有几个

所以我没有解决方案..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T18:39:23.553

试试这个并使用来自服务器的返回值作为 JSON 格式。首先阅读此文档，然后根据传递 jSON 数据以查看的 codeigniter 规则进行更改。当您的 json 数据成功传递到视图时，您可以使用 typehead。

**注意：-首先在 Twitter Bootstrap 中对 typehead.js 的基本需求。**

> [http://www.w3resource.com/twitter-bootstrap/typehead.php](http://www.w3resource.com/twitter-bootstrap/typehead.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:20:47.273

*   检查您的自动完成小部件的类名是否与任何 Bootstrap 冲突。
*   您有指向您正在开发的网站的链接吗？如果是这样，那将更有助于为您提供解决方案。

# gwt - 使用 GWT Deferred Binding 替换 uibinder 模板

> ID：12063760
> 
> 赞同：1
> 
> 时间：2012-08-21T22:07:23.377
> 
> 标签：gwt, uibinder, deferred

使用 GWT 2.4.0 我正在尝试使用延迟绑定规则将 uibinder 模板替换为另一个。

我想出的方法是为每个返回 uibinder 实例的 uibinder 模板创建一个具体类。这是一个例子。

```
public class ThemeOneUiBinderImpl {

    @UiTemplate("ThemeOne.ui.xml")
        interface ThemeOneUiBinder extends UiBinder<Widget, PageToTheme> {
    }

    private static ThemeOneUiBinder uiBinder = GWT.create(ThemeOneUiBinder.class);

    public static UiBinder<Widget, PageToTheme> getImpl() {
        return uiBinder;
    }
} 
```

然后我有第二个基本相同的类，称为 ThemeTwoUiBinderImpl。我的班级引用 ThemeOneUiBinderImpl 并调用 getImpl().createAndBindUi(this)

以及以下延迟绑定规则

```
<replace-with class="package.ThemeTwoUiBinderImpl">
    <when-type-is class="package.ThemeOneUiBinderImpl"/>
    <when-property-is name="theme" value="theme2"/>
</replace-with> 
```

有了这些规则，当我编译时，我看到排列的数量增加了一倍，所以它正在做一些事情......但是当我加载页面时，theme1 uibinder 仍在加载。我有两个问题：

1.  为什么它不起作用？
2.  为什么排列的数量会加倍？我认为通过将属性设置为theme2，它只会为theme2编译排列，但它是否为两者都编译？
3.  我是否使用了延迟绑定，它是如何设计使用的？我确实使用与我正在做的类似的外观模式进行了评估，但对于我需要做的事情来说似乎完全是矫枉过正，而且我已经编写了两个自定义 uibinder。这些组件将不可重用或扩展。主题仅适用于简单的自定义标题。

想法？解决方案？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T04:42:12.653

让我告诉你谷歌让你替换类模板的预期方式。

要替换 uibinded java 类的 ui 模板，只需扩展该类即可。这在某种程度上源于 MVP 对模板作为视图和代码作为模型的态度。有些。这个想法是您可以随时替换模型上的视图而无需更改模型，也不禁止您添加到模型中。

我所做的是使用默认/虚拟模板创建一个基类。

如果扩展类与基类不在同一个包中，则基类的 uibinded 字段/资源/方法必须是公共的。

实际上，我通常所做的不是在基类中而是在扩展类中包含任何 GWT.create - 这样

*   我可以使基础抽象（如果在抽象类上完成，GWT.create 会发牢骚）。
*   我根本不需要创建模板。该类充满了 uibinder 注释，如 @uifield、@uihandler、@uichild、blah blah，但该类没有模板 xml。

然后我扩展基类，使用 ui 模板创建一个 uibinder 类，其中 ui 模板中的字段/资源与基类中的 uifield/resources 以及我添加到扩展类中的任何字段/资源完全匹配。

这背后的原理是：

> 基础 uibinded 类的任何完善扩展都必须具有互惠的 ui 模板，其中模板必须完全重新实现基类的 ui 字段/资源，无论基类是否已经具有自己的 ui 模板。

当我说“完成”时，它意味着在该扩展类中的模板上调用了 GWT.create 方法。

这条规则的结果是你不能扩展一个 uibinded 类而不必重新实现模板。

假设您有一个带有 uibinder 的布局良好的对话框。并且您希望在不改变外观的情况下利用它进行细微的调整。不幸的是，扩展对话框必须复制基类的模板文件，即使您不打算进行任何 ui/布局更改。

我认为您不应该在 gwt.xml 中通过替换来执行模板替换，因为已经有一种方便的方法。

您正在做的事情令人困惑，我认为我不会花时间分析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:24:47.223

我再次查看了 GWT[外观设计模式](http://code.google.com/p/google-web-toolkit/wiki/CellBackedWIdgets#Appearance_Pattern)，并意识到我并没有真正理解替换是如何工作的。我认为它正在用另一个类的一个具体实现替换一个类。但仔细观察，我发现需要有一个使用 GWT.create 创建的抽象类或接口。理解和思考表象，就像我用反射做同样的事情一样，真的帮助我弄清楚了。

另外...正如 Blessed Geek 指出的那样，如果您有一个抽象基础，那么 GWT.create 将会失败，如果您的类没有被正确替换，这就是您想要的。

我现在有以下看法

```
public interface MyHeaderAppearance {
    UiBinder<Widget, MyHeaderView> getUiBinder();
    public int getHeight();
}

private final LoginPageAppearance appearance;

public MyHeaderView() {
    appearance = GWT.<MyHeaderAppearance> create(MyHeaderAppearance.class);
}

public void render() {
    panel.add(appearance.getUiBinder().createAndBindUi(this))
} 
```

我的主题实现只是在一个名为 MyHeaderAppearanceImpl 的类中实现了 MyHeaderAppearance 接口。为了支持多个主题，我有每个主题的包和每个主题包中的 MyHeaderAppearanceImpl 实例。

然后我像这样替换我的主题实现代码

```
ThemeOne.gwt.xml
<module>
    <replace-with  class="theme1.MyHeaderAppearanceImpl">
        <when-type-is class="MyHeaderAppearance"/>
    </replace-with>
</module> 
```

并在我的主模块中包含这样的主题

```
<inherits name="theme.ThemeOne" /> 
```

它正在工作，我很高兴，但有什么改进的想法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T13:28:16.623

如果您希望 View 基于 useragent 属性绑定到 Viewimpl，那么

我想分享一个我尝试过的方法，首先不是将视图映射到 viewimpl，您可以将其绑定到 viewprovider，然后根据用户代理值，您可以返回适当的实例来绑定。我在示例中实现了这个截至目前，应用程序及其工作正常。

# php - 更改 session_name() 真的有助于防止会话劫持吗？

> ID：12063761
> 
> 赞同：0
> 
> 时间：2012-08-21T22:07:31.977
> 
> 标签：php, session

这些问题是相关的：[一](https://stackoverflow.com/questions/7551404)和[二](https://stackoverflow.com/questions/5081025)，前者说它是用来防止同域内的应用程序之间的名称冲突。后者表示它可以用于反会话劫持。

虽然前者似乎是 的真正目的`session_name()`，但我不确定后者。它真的可以防止会话劫持吗？我认为它可能会使攻击者在找出 cookie 名称而不是默认名称方面感到困惑，`PHPSESSID`但仅此而已吗？

的真正目的是`session_name()`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:19:31.967

我碰巧在同一个域上有两个（或更多）不同的应用程序。

允许不同的会话在同一个域中共存是 session_name() 的真正范围，恕我直言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:21:38.923

> 它真的可以防止会话劫持吗？

不。攻击者访问您的站点并查看您使用的会话名称而不是默认名称（只需查看标题）是微不足道的，因此此功能实际上并没有提供任何会话劫持保护。其目的是允许您将默认 PHPSESSID 更改为其他内容，或避免同一域上的应用程序之间发生冲突。

# javascript - jQuery 方法没有按预期工作 - toggleClass

> ID：12063764
> 
> 赞同：0
> 
> 时间：2012-08-21T22:07:46.687
> 
> 标签：javascript, jquery, html, css, web

有谁知道为什么下面的 jQuery 代码不能按预期工作？

HTML：

```
<div id="languageContainer">
    <div class="headerButton"></div>
</div> 
```

CSS：

```
.headerButtonClicked
{
background-image:url('background.jpg');
background-repeat:repeat-x;
color:#000000;
} 
```

jQuery：

```
$(".headerButton").click(function()
{
    $(this).parent().toggleClass(".headerButtonClicked");
}); 
```

我使用 Firebug 观察了 DOM，并且该类被附加到父元素，但样式没有改变。当我添加内联样式代码时，它起作用了，所以我确信问题不是 CSS。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T22:11:32.730

这是因为点 ( `.`) -`toggleClass()`接受类名，而不是选择器。

尝试：

```
$(".headerButton").click(function()
{
    $(this).parent().toggleClass("headerButtonClicked");
}); 
```

[jsFiddle](http://jsfiddle.net/RB89c/1/)

# c++ - 谁需要释放返回 char* 的系统调用的内存

> ID：12063766
> 
> 赞同：2
> 
> 时间：2012-08-21T22:07:59.807
> 
> 标签：c++, c

如果我调用这样的函数`inet_ntoa`，则返回 char*。谁负责释放分配的内存？

我的方法如下所示：

```
char* inet_aton_(unsigned int atonIp){
    in_addr sin_addr;
    sin_addr.s_addr = atonIp;
    return inet_ntoa(sin_addr);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T22:10:11.363

你应该检查手册。

$man inet_ntoa

> ... inet_ntoa() 函数将以网络字节顺序给出的 Internet 主机地址转换为 IPv4 点分十进制表示法的字符串。该字符串在静态分配的缓冲区中返回，后续调用将覆盖该缓冲区。

这意味着在您的应用程序中，您将拥有一个静态分配的缓冲区，并且您对其中的内容负责。应用程序中对 inet_ntoa() 的每次调用都会覆盖该区域。如果您需要保留例如两个地址，则必须将此数据复制到另一个缓冲区。您还负责在线程应用程序中以正确的方式使用，例如，如果您有两个线程同时调用 inet_ntoa，您将得到错误的结果，或者使用不同参数对 inet_ntoa 的两次单独调用将返回相同的结果。

当您有此类问题时，您还应该查看源代码。例如，如果您搜索“inet_ntoa 源”。你可能会遇到一些例子；[freebsd](http://freebsd.active-venture.com/FreeBSD-srctree/newsrc/libkern/inet_ntoa.c.html)或[ms](http://research.microsoft.com/en-us/um/redmond/projects/invisible/src/winshim/inet_ntoa.c.htm)。下面是一个示例实现（来自freebsd）。

```
char *
inet_ntoa(struct in_addr ina)
{
    static char buf[4*sizeof "123"];
    unsigned char *ucp = (unsigned char *)&ina;

    sprintf(buf, "%d.%d.%d.%d",
        ucp[0] & 0xff,
        ucp[1] & 0xff,
        ucp[2] & 0xff,
        ucp[3] & 0xff);
    return buf;
} 
```

如您所见，它仅为此目的分配了一个静态缓冲区。这使得 inet_ntoa 的使用非常容易，因为您不需要管理缓冲区，但也使其不是线程安全的。

另一件事，inet_ntoa 不是系统调用。它可以称为inet库提供的便利功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T22:10:14.483

引用[联机帮助页](http://linux.die.net/man/3/inet_addr)：

> 该字符串在静态分配的缓冲区中返回，后续调用将覆盖该缓冲区。

这意味着没有人需要也不应该尝试释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T22:11:59.273

所以，首先；这些功能已被弃用，因为它们不支持 IPv6。其次...查阅文档。当一个函数返回一个指针时，应该清楚地记录谁负责释放它。

在这种情况下，您不负责释放它（也不应该！）。

> **inet_ntoa() 返回静态缓冲区**中的点和数字字符串，每次调用函数都会覆盖该缓冲区。

# android - 如何为 Google Play 商店打包一个 android webapp？

> ID：12063767
> 
> 赞同：1
> 
> 时间：2012-08-21T22:08:05.407
> 
> 标签：android, web-applications, packaging, google-play

我想在 Google Play 商店中免费发布我的网络应用程序（用于曝光）。

到目前为止，我发现的所有描述都是针对本机应用程序的。是否可以提交仅 HTML 的应用程序？示例清单文件的外观如何以及如何签署这样的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:24:55.113

您必须使用 Android Java 库创建一个 webview，然后在该 webview 中显示您的 webapp。通常，如果您不使用 Java，您会想要使用 PhoneGap 之类的东西。

# java - 在scala中的循环中引入一个计数器

> ID：12063769
> 
> 赞同：4
> 
> 时间：2012-08-21T22:08:18.490
> 
> 标签：java, scala

我正在编写一个小程序，它将一个非常大的文件转换为多个较小的文件，每个文件将包含 100 行。

我正在迭代行迭代：

```
 while (lines.hasNext) {
      val line = lines.next()
  } 
```

我想引入一个计数器，当它达到某个值时，重置计数器并继续。在java中我会做类似的事情：

```
int counter = 0;
      while (lines.hasNext) {
          val line = lines.next()
if(counter == 100){
 counter = 0;
}
++counter
      } 
```

scala 或替代方法中是否有类似的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T22:22:54.633

传统上在你使用的 scala 中`.zipWithIndex`

```
scala> List("foo","bar")
res0: List[java.lang.String] = List(foo, bar)

scala> for((x,i) <- res0.zipWithIndex) println(i + " : " +x)
0 : foo
1 : bar 
```

（这也适用于您的行，只要它们在迭代器中，例如 has`hasNext`和`next()`方法，或其他一些 scala 集合）

但是如果你需要一个复杂的逻辑，比如重置计数器，你可以像在java中一样编写它：

```
var counter = 0
while (lines.hasNext) {
  val line = lines.next()
  if(counter % 100 == 0) {
    // now write to another file
  }
} 
```

也许您可以告诉我们为什么要重置计数器，以便我们可以说如何做得更好？

**根据您的更新进行**编辑，最好使用分组方法，正如@pr1001 建议的那样：****

 **```
lines.grouped(100).foreach(l => l.foreach(/* write line to file*/)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T22:32:17.673

如果您的重置计数器表示原始列表中有重复的数据组，您可能需要使用以下`grouped`方法：

```
scala> val l = List("one", "two", "three", "four")
l: List[java.lang.String] = List(one, two, three, four)

scala> l.grouped(2).toList
res0: List[List[java.lang.String]] = List(List(one, two), List(three, four)) 
```

**更新：**由于您正在从文件中读取，您应该能够非常有效地遍历文件：

```
val bigFile = io.Source.fromFile("/tmp/verybigfile")
val groupedLines = bigFile.getLines.grouped(2).zipWithIndex
groupedLines.foreach(group => {
  val (lines, index) = group
  val p = new java.io.PrintWriter("/tmp/" + index)
  lines.foreach(p.println)
  p.close()
}) 
```

当然，这也可以写成理解...

在将每组行写入自己的文件之前，您甚至可以通过转换`groupedLines`为并行集合来获得更好的性能。`.par`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T00:13:25.730

这会起作用：

```
lines grouped 100 flatMap (_.zipWithIndex) foreach {
  case (line, count) => //whatever
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T22:26:56.147

您可以`zipWithIndex`与一些转换一起使用。

```
scala> List(10, 20, 30, 40, 50).zipWithIndex.map(p => (p._1, p._2 % 3))
res0: List[(Int, Int)] = List((10,0), (20,1), (30,2), (40,0), (50,1)) 
```**

# jquery - 在 jquery Yahoo Weather API 中解析 JSON

> ID：12063774
> 
> 赞同：1
> 
> 时间：2012-08-21T22:08:31.507
> 
> 标签：jquery, json

我根本无法弄清楚这一点。

我当前的 json 结果如下`console.log(json)`

[点击查看Json响应](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20weather.forecast%20where%20woeid=%2726344339%27%20and%20u=%27c%27&format=json&callback=)

我想知道是否有人可以帮助我检索 Condition 部分？

**编辑**

```
 var geoFORECAST = 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid=%2726344339%27%20and%20u=%27c%27&format=json';
                    $.getJSON(geoFORECAST, function(json) {
                       console.log(json);
                       console.log(json.query.results.item.condition.text);
                     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:11:47.270

您需要使用`parseJSON`： [http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

然后就像访问`Condition`任何对象属性一样访问 var。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:15:03.867

使用[本机 JSON](https://developer.mozilla.org/en-US/docs/JSON)对象。

```
var obj = JSON.parse(json);
var condition = obj.query.results.channel.item.condition; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:15:11.520

项目已被解析，因此保存页面发送回变量测试的内容，下面的代码将正常工作

并访问诸如..

```
test.query.results.item.condition.text 
```

这将返回一个值

做你可以做的条件

```
var b =  test.query.results.item.condition.text ; 
```

`if(b == ???)`甚至 > 或 < 或任何需要的

# apache-flex - 可见性设置为 false 时不会删除图像

> ID：12063778
> 
> 赞同：1
> 
> 时间：2012-08-21T22:08:53.067
> 
> 标签：apache-flex, bitmap, flex4, sprite, tweener

我正在处理一个有图像（spark 或 mx）的项目，当我将可见性设置为 false 时，它​​仍然存在！它似乎变暗而不是删除。我在想，也许某事，某个地方的精灵或显示对象或某些图形命令在图像可见时以某种方式捕获屏幕抓取并留下幻影图像。我无法追踪它。有谁听说过吗？

我正在使用 Tweener，我认为它可能与它有关，但它又是一个大型项目，这个问题深深地嵌套在其中。

**更新**
我认为这与 Tweener 有关。我删除了补间，可见性开始按描述工作。我认为这可能是 Flex 推迟提交属性的值，并且它的效果直到渲染事件。所以它可能设置为 false 但它实际上可能直到下一个验证/渲染阶段才不可见，而 Tweener 立即执行此操作。

我暂时注释掉了 Tweener 和其他与之相关的代码，我现在不会投入更多资源来跟踪它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:19:48.677

你把它放在容器里吗？我在设置 visible=false 时没有遇到问题，它仍在显示中。正如jidma所说，尝试includeInLayout，另一件事是设置父可见= false

# c# - 允许用户在 Razor 中自定义 HTML

> ID：12063779
> 
> 赞同：2
> 
> 时间：2012-08-21T22:09:01.393
> 
> 标签：c#, asp.net, .net, asp.net-mvc, razor

我正在尝试设计一个类似 CMS 的系统，允许用户在他们的站点中修改 HTML。问题是我们使用 Razor 作为视图引擎，我试图想出一个强大的策略，允许用户编辑他们所有的 HTML，并且仍然保留 razor 功能，比如你可以有列表文章或其他东西的循环沿着这些思路。

我也不确定文件系统将如何工作。您可以/应该将修改后的 razor html 页面存储在数据库中吗？或者您是否必须覆盖磁盘上的文字文件。

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T22:13:24.577

不要让他们直接编辑您的 Razor 文件。这太不安全了，如果你告诉用户你（显然）不信任这种权力，你可能睡不好觉。给他们[`DotLiquid`](http://dotliquidmarkup.org/)。

所以这里有一些有趣的读物：

*   为您：[https ://github.com/formosatek/dotliquid/wiki/DotLiquid-for-Developers](https://github.com/formosatek/dotliquid/wiki/DotLiquid-for-Developers)
*   对于您的用户：[https ://github.com/formosatek/dotliquid/wiki/DotLiquid-for-Designers](https://github.com/formosatek/dotliquid/wiki/DotLiquid-for-Designers)

# c++ - 在 C++ 中重载赋值运算符

> ID：12063788
> 
> 赞同：2
> 
> 时间：2012-08-21T22:09:48.260
> 
> 标签：c++, overloading, variable-assignment, operator-keyword

我最近一直在做一个分数类，重载运算符时我没有得到预期的结果，我不知道为什么。希望有人可以帮助阐明一些光。我试图只包含相关代码。

```
const fraction fraction::operator* (fraction frac)
{
    return fraction(frac.numerator * numerator, frac.denominator * denominator);
}

const fraction fraction::operator* (int num)
{
    return fraction(numerator*num, denominator);
}

fraction& fraction::operator= (const fraction &rightSide)
{
    return *this;
} 
```

这些操作是我发现工作正常的操作（其中 frac# 是一个分数对象）：

```
frac1 = frac2;
frac3 = frac4 * 2;
frac5 = frac6 * frac7; 
```

上述操作按预期工作，但以下操作使 frac8 与初始化时一样：

```
fraction frac8(4, 5); // Initializes a fraction, setting numerator = 4, denominator = 5
frac8 = frac8 * 3; // This doesn't quite work, leaving frac8 with the original numerator/denominator 
```

我只是不明白为什么 frac3 = frac4 * 2 有效，但 frac8 = frac8 * 3 无效。有任何想法吗？在赋值运算符中使用 const 关键字我发现不是解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T22:12:16.553

如果你只是在它的身体里做任何有用的事情，你怎么期望你`operator=`做任何有用的事情`return *this;`？您必须分配给 的字段`this`的字段`rightSide`。

但是，更重要的是，如果您的类不管理在复制的情况下需要一些特殊处理的资源，您可以使用编译器提供的赋值运算符。它只是将一个实例的字段复制到另一个实例中，对于一个`fraction`类来说，这似乎非常好。

顺便说一句，通常您使用复合对应物来实现“常规”运算符；您可能想看看[运算符重载常见问题解答](https://stackoverflow.com/questions/4421706/operator-overloading)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:37:32.797

您的任何分配都不起作用，因为您的分配运算符实现是空的，除了返回对其左侧的引用之外什么都不做。

即这三个任务都没有

```
frac1 = frac2;
frac3 = frac4 * 2;
frac5 = frac6 * frac7; 
```

真的工作。

出于某种原因，您声称上述作业“有效”，但这一定是您的某种困惑。他们不“工作”。也没有`frac8 = frac8 * 3`，出于同样的原因。

**PS**我怀疑你的“工作”陈述实际上是这样写的

```
fraction frac1 = frac2;
fraction frac3 = frac4 * 2;
fraction frac5 = frac6 * frac7; 
```

这可能确实有效。但是这种语法与赋值运算符无关。在这种情况下不使用赋值运算符。此语法对应于*复制初始化*。它依赖于类的复制构造函数（至少在概念上），而不是赋值运算符。这就是它可能起作用的原因，而真正的分配不起作用，因为您通过将复制分配运算符设为空来“丧失能力”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:12:39.017

您的赋值运算符仅返回对象本身（即，`*this`）...所以在您的最后一个示例中，它只是一个无操作，而不是从右侧对象执行实际的赋值操作。换句话说，一个临时`fraction`对象是由您创建的`operator*`，但是由于您的赋值运算符不会复制右侧对象的值，因此您最终只是丢弃了方法完成后`fraction`生成的临时实例。`operator*``operator=`

顺便说一句，在创建用户生成的赋值运算符时，您可能需要研究[三规则。](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)它基本上指出，如果您的类具有需要用户生成的赋值运算符的资源，那么您还应该实现用户定义的复制构造函数和析构函数......后两项的编译器生成的默认值不会如果有超出编译器默认实现这些方法的资源需要管理的资源就足够了。

# jquery-mobile - 是否可以动画替换列表视图的一部分

> ID：12063790
> 
> 赞同：0
> 
> 时间：2012-08-21T22:09:52.270
> 
> 标签：jquery-mobile

我有一个由两部分组成的列表：

```
<ul data-role="listview"  data-theme="a" data-inset="true" data-split-theme="c">

        <li>
            <a style="padding-top:0">
                <h5>Text 1</h5>
                <p><strong>Text 2</strong></p>
                <p>Date: April 17, 2012</p>
            <a href="http://some address" ></a>
        </li> 
```

我想要做的是当用户单击行左侧部分的任意位置时，我想播放音频文件（使用 html5 标签），并且此部分中的文本将被删除并替换为音频用于播放音频的控件。当用户停止音频时，我希望事情恢复原状。

我是 JQuery 和 JQueryMobile 的新手，不知道从哪里开始。

理想情况下，如果有可能在音频控件出现时出现某种翻转动画，例如行的该​​部分旋转，一侧是音频控件，另一侧是文本，那就太好了。这样的事情可能吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T03:07:40.450

您可以在 中嵌套任何您想要的内容`li`，因此您只需将两个`div`容器放入其中并绑定到适当的事件并基于此显示和隐藏它们。

例如：

标记：

```
<ul id="parentUL" data-role="listview"  data-theme="a" data-inset="true" data-split-theme="c">
        <li>
            <a  style="padding-top:0">
                <div class="txtCnt">
                <h5>Text 1</h5>
                <p><strong>Text 2</strong></p>
                <p>Date: April 17, 2012</p>
                </div>
                <div class="audioCnt displayNone">
                    <h1>Audio Controls</h1>
                </div>
        <a href="http://some address" ></a>
    </li>
    </ul> 
```

JavaScript：

```
$('#parentUL').on('click', '.txtCnt', function () {
    $(this).hide().parent().find('.audioCnt').show();
});

$('#parentUL').on('click', '.audioCnt', function () {
    $(this).hide().parent().find('.txtCnt').show();
}); 
```

# sql-server - LoadTest2010 的 LoadTestTestResults 表中的结果字段

> ID：12063797
> 
> 赞同：0
> 
> 时间：2012-08-21T22:10:24.813
> 
> 标签：sql-server, visual-studio-2010, load-testing

我正在 Visual Studio 2010 Ultimate 中运行负载测试，并且正在尝试构建一些自定义报告工具。在 LoadTestTestResults 表中，有一列标记为 Outcome。我已经看到它的值是 0、1、3 和（大部分）10。但我找不到任何解释不同值含义的东西。

根据 Prc_GetUserTestDetail 中的评论，我认为 10 是成功的结果。对其他人没有任何线索——它们似乎与 VS 摘要中的任何数字都不匹配。

这些结果代码是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:17:42.170

我从 MSDN 博客上联系了一位 Microsoft 开发人员关于 VS 负载测试并询问了这个问题。这是我得到的信息，以防其他人需要它：

Outcome 字段是一个枚举，用于存储负载测试运行中单个测试用例的状态。它的值可以是 0 - 13。

0 -**错误**：我们尝试执行测试时出现系统错误。

1 -**失败**：测试已执行，但存在问题。问题可能涉及异常或失败的断言。

2 -**超时**：测试超时。

3 -**中止**：测试被中止。这不是由用户手势引起的，而是由框架决定引起的。

4 -**不确定**：测试已经完成，但我们不能说它是通过还是失败。可用于中止的测试...

5 - **PassedButRunAborted**：测试执行没有任何问题，但运行被中止。

6 - **NotRunnable**：测试有机会被执行但没有被执行，因为 ITestElement.IsRunnable == false。

7 - **NotExecuted**：未执行测试。这是由用户手势引起的 - 例如用户点击停止按钮。

8 -已**断开连接**：测试运行在完成运行之前已断开连接。

9 -**警告**：由运行级别结果使用。这不是失败。

10 -**通过**：测试执行没有任何问题。

11 -**已完成**：测试已完成，但没有对完整性的定性衡量。

12 - **InProgress**：测试当前正在执行。

13 -**待定**：测试在执行队列中，尚未开始。

# c# - 安装在另一台计算机上时 UI 更改大小

> ID：12063799
> 
> 赞同：1
> 
> 时间：2012-08-21T22:10:28.353
> 
> 标签：c#, winforms, user-interface

我的程序的 UI 经常出现问题：它们在设计模式下看起来很好，在我的计算机上运行时，但在其他计算机上运行时看起来不同/不正确（例如，压扁、重叠的控件）。

知道这可能是什么吗？起初我以为这可能是 32/64 位问题，但事实并非如此。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T22:13:50.250

用户可以将其文本大小设置为大于正常大小，或为控件选择不同的字体。

不同的 DPI 设置会影响布局的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T22:27:09.703

这可能归结为几个问题。

1.  DPI。影响表单控件的布局（感谢 Kristopher Johnson 的这个！）

2.  主题。（Classic、Aero、Luna）...一般来说，Microsoft 主题之间不会产生太大影响，设计良好的自定义主题也不会产生太大影响，但设计不佳的自定义主题会受到影响。正如 Kristopher Johnson 所述，主题中的字体大小设置将影响表单的呈现方式。- 考虑：假设您在 Linux 安装的 Mono 上运行您的应用程序......它看起来仍然一样吗？

3.  字体。如果您的应用程序使用其他机器没有的字体，那么该机器将用它替换另一种“备用”字体。这可能会在某些控件中产生影响，例如标签，其中标签的宽度缩放到给定字体的文本宽度。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-21T22:15:47.643

分辨率有问题。

您的机器与其他机器的分辨率不同，请尝试为分辨率1024X768进行设计

# java - 防止对象创建的合适方法？

> ID：12063800
> 
> 赞同：1
> 
> 时间：2012-08-21T22:10:31.830
> 
> 标签：java, optimization

我正在创建一个必须处理很多点的 java 程序。当我说很多时，我指的是超过 100,000 点。此外，我将不得不一遍又一遍地创建点。我担心这个对象创建会减慢我的算法时间，并占用大量内存。

我想出了几个可能的解决方案，这些可行吗？有没有更好的方法来处理这种情况？

解决方案 1) -A 点“工厂”，所有点都被发送到该点而不是被销毁。在这里，它们将被回收，因此我们不必重新创建对象。

```
public class PointFactory {

public final static List<Point> unused = new ArrayList<Point>();

public static void disposePoint( Point point ){
    unused.add( point );

}

public static void disposePoints( List<Point> points ){

    for( Point point: points )
        unused.add( point );

}

public static Point newPoint( int x, int y ){

    if( unused.isEmpty() )
        return new Point( x, y );
    else{

        Point point = unused.get(0);

        point.x = x;
        point.y = y;

        return point;

    }

} 
```

}

解决方案 2) 与解决方案 1 非常相似，但使用了新的结构“XY”，以避免不必要的开销。我只需要 X 和 Y 值。

```
public class XYFactory {

public final static List<XY> unused = new ArrayList<XY>();

public static void disposeXY( XY xy ){
    unused.add( xy );

}

public static XY newXY( int x, int y ){

    if( unused.isEmpty() )
        return new XY( x, y );
    else{

        XY xy = unused.get(0);

        xy.x = x;
        xy.y = y;

        return xy;

    }

} 
```

}

```
public class XY {

public XY( int x, int y ){
    this.x = x;
    this.y = y;

}

public int x;
public int y;

public boolean equals( Object o ){

    if( !( o instanceof XY ) )
        return false;

    XY xy = (XY)o;

    return xy.x == x && xy.y == y;

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:19:50.220

如果构造一个只有两个整数的对象所花费的时间对您的应用程序造成了影响，我会感到惊讶。我敢打赌，维护对象池或工厂的开销会产生类似的开销，但这需要进行分析。但是，如果您发现这是一个问题，请查看构建[对象池](http://www.oodesign.com/object-pool-pattern.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:21:23.690

这听起来像是过早的优化。如果在实际实现算法时，您注意到由于创建对象而导致性能显着下降，那么您应该开始考虑这样的事情，而不是之前。

每个实例`java.awt.Point`将占用约 16 字节的内存：

*   `int x`= 4 个字节
*   `int y`= 4 个字节
*   对象开销 = 8 个字节

100,000`Point`秒 = 1,600,000 字节 = 1.52 MB

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T22:30:43.537

只是要清楚。这不是我个人的观点，它来自 Brian Goetz（Bloch、Lea 等）`Java Concurrency In Practice`

建议是`Don't do object pooling.`

根据这些专家的说法：在最近的 JVM 版本中，对象的分配比以往任何时候都*快得多，并且**池化实际上会降低性能*（除了在非常特殊的情况下，例如数据库池化），原因有多种，例如太大的池会影响 GC一个不好的方法，但是太小什么也不能提供，当对象没有正确返回到池时会出现细微的错误等。多线程应用程序中的性能更差，因为由于不实例化新对象并重用缓存的对象，因此必须有人阻塞等。
在阅读之前，我一直认为推荐的做法是使用对象池。
读完这本书后发现它实际上是一种反模式（如果不用于***确实证明很昂贵的话***对象）。
因此，只需根据需要使用普通旧的对象分配对象，`new`并且如果您的对象分配确实*被证明是昂贵*的（通过分析等），那么开始研究池和缓存策略。

@Jeffrey 恕我直言的推荐显示了一种很好的方法来开始调查您的对象是否真的很昂贵。这是一个起点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T22:19:31.170

我做过很多处理数百万个对象的项目，实例化对象从来都不是主要的性能问题。

一旦您进行 IO，例如从数据库读取或读取文件，创建新对象看起来会非常非常快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T22:19:41.763

XY 结构实际上只是对您点的数据成员的巧妙重命名。除了将数据放在错误的类中（并为开销创建第二类）之外，它不会为您购买任何额外的东西。

相比之下，工厂方法将节省您分配重复点（如 0,0）的需要，如果您已经分配了它们。如果您收到对 0,0 的后续请求，您可以缓存这些点并从缓存中返回相同的点。

根据您构建工厂的方式，您甚至可以回收您的点并“回收它们”，这意味着“重置它们的 x 和 y 坐标，在第二次“使用”中返回相同的对象。但是，这种技术通常不受欢迎之后，就好像您在重置 X 和 Y 值之前无法验证某个点是否不可到达一样，您通常会在程序中引入不需要的行为。

无论如何，我不建议在工厂发布这些点后将它们“更新”；因为，如果它们是，那么将点身份管理包装在工厂类中的整个能力变得如此复杂，可能不值得。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T22:22:37.810

您似乎正在重新发明[Object Pool](http://en.wikipedia.org/wiki/Object_pool_pattern)，如果您确实需要它，这是完全合理的。

但是如果你使用它，你可能应该阅读这个模式并适当地命名它。“工厂”已经用于太多事情了。

# php - 我的第二个 else 语句有问题吗？

> ID：12063801
> 
> 赞同：1
> 
> 时间：2012-08-21T22:10:33.313
> 
> 标签：php, if-statement

```
<?php
    $check = array ("85.49.","85.62.");

    foreach($check as $var) {
        if (ereg($var, $_SERVER['REMOTE_ADDR'])) {
            $intruder = 0; 
        }
        else {
            $intruder = 1;
        }
        if ($intruder = 0);
            echo 'bugger off';
        }
        else{
            echo 'welcome';
        }
?> 
```

我的第二个可能有什么问题？Dreamweaver 将其标记为红色，并且我的服务器显示错误。如果 $intruder 是 1 或 0，我想做的就是让它以一种或另一种方式表现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T22:13:08.753

```
if ($intruder = 0); 
```

首先，你有一个额外的分号，所以`if`语句的主体是空的。

其次，`=`是赋值，需要比较：`==`.

结构不清楚，但可能下一个问题是你的循环，它会`$intruder`在每次迭代中覆盖，所以最后它会包含最后一次比较的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:11:17.630

你问的问题在这一行：

```
if ($intruder = 0); 
```

您应该使用`==`来比较值，而不是`=`用于分配。之后你应该有一个花括号`{`而不是分号。

此外，所有`ereg*`功能均已弃用，不应使用。它们最终将完全从语言中删除。要检查一个词是否包含另一个词，只需使用`strpos`.

您的逻辑对于您似乎正在做的事情也是错误的。您不需要覆盖`$intruder`循环的每次迭代中的值。在循环之前将其设置为 0，如果循环中存在匹配，则将其设置为 1，然后在循环完成后，您将知道在任何比较期间是否存在匹配并可以打印适当的消息。

```
$found = 0;
foreach ($check as $var) {
    if (strpos($_SERVER['REMOTE_ADDR'], $var) === 0) {
        $found= 1; 
    }
}

if ($found == 1) {
    echo "You are in my list.";
} else {
    echo "You are not in my list.";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T22:12:37.307

改变这个：

`if ($intruder = 0);`

对此：

```
if ($intruder == 0) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T22:14:31.887

第一个错误：

```
if ($intruder = 0); 
```

以这种方式修复它：

```
if ($intruder == 0)
   echo 'bugger off';
else
   echo 'welcome'; 
```

第二个错误：

不推荐使用 ereg。将其替换为 preg_match(); [http://www.php.net/manual/en/function.preg-match.php](http://www.php.net/manual/en/function.preg-match.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T22:45:51.770

朋友，请不要生气，但我宁愿问“这段代码有什么*正确的吗？”*

```
<?php
$check = array ("85.49.","85.62.");

foreach($check as $var) {
    // Here you use the deprecated ereg instead of preg_match or, better, strpos
    // However, the regular expressions would be wrong - what if 192.85.49.3 comes by?
    if (ereg($var, $_SERVER['REMOTE_ADDR'])) {
        $intruder = 0; 
    }
    else {
        $intruder = 1;
    }
    // Here you do not close the foreach, so that the following code gets executed
    // repeatedly

    // Here you place a ; after the if, so the if body is empty and bugger off gets
    // triggered always.

    // Which changes little, since $intruder = 0 is an assignment (use == instead)
    // (see note)
    if ($intruder = 0);
        echo 'bugger off';
    }
    // Anyway, logically "$intruder == 0" means "NOT an intruder", so you are actually
    // telling friends to bugger off and welcome intruders :-)
    else{
        echo 'welcome';
    }
?> 
```

注意：这可能是巫毒编程（我在 Maguire 的“Writing Solid Code”中找到它），但我认为您可能会养成以另一种方式检查值的习惯：

如果（0 == $intruder）

这样，如果您再次删除 =，它不会创建一个新的语句来做您不想要的事情，但它会变成一个语法错误，使自己立即可见。

无论如何，您想要的代码应该是：

```
<?php
       $check = array ("85.49.","85.62.");

       $matches = false;

       foreach($check as $var)
       {
           if (0 === strpos($_SERVER['REMOTE_ADDR'], $var))
           {
               $matches = true;
               // There is one match, no sense in checking further
               break;
           }
       }
       if ($matches)
       {
           // He is in our little list - tell him something
           print "You match.";
       }
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T11:34:19.767

简单的 yaar.Just 编辑：

```
if ($intruder == 0);
        echo 'bugger off';
    }
    else{
        echo 'welcome';
    } 
```

# android - Fragment 内的 FragmentPagerAdapter

> ID：12063802
> 
> 赞同：10
> 
> 时间：2012-08-21T22:10:40.500
> 
> 标签：android, android-fragments, android-viewpager, fragmentpageradapter, android-nested-fragment

我在实现基于多个 ViewPagers 的设计时遇到了一些麻烦。

在高层次上，我有一个 FragmentActivity，它的内容只有一个 FrameLayout。我有 3 个不同的片段要显示。所有 3 个都是全屏的，一次只能使用 1 个。

片段 1 是带有一些 TextView 和 ImageView 的基本片段。Fragment 2 有一个 ViewPager 和一个 FragmentPagerAdapter，它为它提供了几个简单的片段。Fragment 3 有一个 ViewPager 和一个 FragmentPagerAdapter 为它提供几个简单的 Fragment（与 Fragment 2 不同）

在我的 FragmentActivity onCreate() 中，我得到了 FragmentManager 并开始一个事务，用 Fragment 2 的新实例替换我的 FrameLayout 中的任何内容。

此时一切都按预期工作。我在 Fragment 2 中的 ViewPager 运行良好。

现在我有一个菜单选项，可以用 Fragment 3 的新实例替换 FrameLayout 中的 Fragment 2。这也可以正常工作。

当我尝试使用另一个替换事务将 Fragment 2 放回 FrameLayout 时，就会出现问题。我在顶部看到我的 PagerIndicer，但我的页面是空白的。

我尝试创建我的 Fragment 2 的新实例并调用替换事务。我还尝试在我调用替换时在我的片段上设置一个标签，并在我的替换之前添加一个 findFragmentByTag 检查，而不是创建一个新实例。在我第二次替换后，两者都给了我相同的空白页结果。

供参考 我的第一个设计只是一个带有 ViewPager 和 ViewIndicer 的 FragmentActivity。我上面的描述中只有 Fragment 2 和 Fragment 3 以及在它们之间切换的菜单选项。要切换，我定义了 2 个不同的 FragmentPagerAdapter，并调用 ViewPager.setAdapter 来设置选定的 FragmentPagerAdapter。这工作得很好，但现在我需要一个根本不使用 ViewPager 的新顶级片段。这就是为什么我决定将我的 ViewPager 移到它们自己的 Fragment 中。我的想法是我只需将我的片段交换到 FrameLayout。

我现在没有我的代码，所以我不能发布任何代码，但我明天会在我的问题中添加一些代码以帮助获得答案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-26T20:43:06.143

这个问题可能是[Navigating back to FragmentPagerAdapter -> fragment are empty](https://stackoverflow.com/questions/17672779/navigating-back-to-fragmentpageradapter-fragments-are-empty)的重复。

如果您的应用可以处理它（API 17），请使用[getChildFragmentManager()](http://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager%28%29)。使用 Fragment 托管 ViewPager 并使用 FragmentPagerAdapter 时似乎会出现此问题。更改为 FragmentStatePagerAdapter 似乎也可以解决问题，但我仍然认为使用 getChildFragmentManager() 是最明智的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:22:27.843

brockoli 你可以用不是“好方法”。但对我来说它有效。

您可以在视图 2 布局中使用，您可以在其中绑定片段。首先 - 对于带有片段的片段。第二 - 对于其他片段。

在用片段替换片段时不会替换，而只会将可见性第一个布局更改为消失并将新片段添加到第二个布局。在背面，从第二个布局中删除片段并将第一个布局的可见性设置为可见。

# qt - QPushButton 样式表导致按下时出现伪影

> ID：12063803
> 
> 赞同：0
> 
> 时间：2012-08-21T22:10:45.293
> 
> 标签：qt, user-interface, widget, stylesheet, qt-designer

我在 QPushButton 上的样式表有问题：

```
QPushButton#convertButton
{
    color: #00FF00;
} 
```

如您所见，非常简单，并且文本颜色设置正确。当我单击按钮时出现问题，出现一个奇怪的人工制品，就像按钮的内部已被选中。不幸的是，我没有足够的代表来发布图片。

如果我删除样式表，则人工制品不会出现在印刷机上。

欢迎任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:57:40.107

我找到了一个解决方案：

```
QPushButton:focus
{
    outline: none;
} 
```

这消除了人工制品，但不幸的是，焦点小部件的“阴影”样式现在也丢失了。如果有人知道如何保留它，请告诉我（我在网上找不到默认样式表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:52:04.103

也许您可以尝试编辑按钮的“按下”子状态，这要归功于：

```
QPushButton:pressed
{
    color: #00FF00;
} 
```

我在我的电脑上试过你的例子，但我看不到你谈论的人工制品。但也许是因为我没有和你一样的默认风格。

# php - 获取外部表关联 PDO SQL

> ID：12063809
> 
> 赞同：0
> 
> 时间：2012-08-21T22:11:24.017
> 
> 标签：php, sql, pdo, foreign-keys

我正在尝试使用 PDO 在 mysql 中获取外部关联的表名。例如，我有：

用户表

```
+------------+----------+------+-----+-----+----------------+
| Field      | Type     | Null | Key |  AI | Foreign Keys   |
+------------+----------+------+-----+-----+----------------+
| id         | int(255) | NO   | PRI | yes |                |
| username   | char(16) | NO   |     |     |                |
| password   | char(32) | NO   | UNI |     |                |
| group      | int(255) | NO   | MUL |     | mytable.group  |
| created    | datetime | NO   |     |     |                |
+------------+----------+------+-----+-----+----------------+ 
```

组表

```
+------------+----------+------+-----+-----+----------------+
| Field      | Type     | Null | Key |  AI | Foreign Keys   |
+------------+----------+------+-----+-----+----------------+
| id         | int(255) | NO   | PRI | YES |                |
| name       | char(16) | NO   | UNI |     |                |
| description| TEXT     | YES  |     |     |                |
+------------+----------+------+-----+-----+----------------+ 
```

我想动态地获取外部表 assoc(users.group => group) 的名称。SHOW COLUMNS 和 DESCRIBE 命令不显示关联。

如果有人知道该怎么做，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T22:58:30.623

SHOW CREATE TABLE users，显示表的所有信息，但不是在一个有组织的数组中。我找到了一种使用 SQL 动态获取所有关联数据的方法：

```
SELECT 
      ke.column_name col, 
      ke.referenced_table_schema assoc_db,
      ke.referenced_table_name assoc_table,
      ke.referenced_column_name assoc_col
FROM
      information_schema.KEY_COLUMN_USAGE ke
WHERE
      ke.referenced_table_name IS NOT NULL              
AND   ke.table_schema='YOUR_DATABASE_NAME'
AND   ke.table_name='YOUR_TABLE_NAME' 
```

我的示例将返回：

```
array(
      public 'col' => string 'group' (length=5) //field with foreign data
      public 'assoc_db' => string 'mytable' (length=6)  //foreign db 
      public 'assoc_table' => string 'group' (length=5) //foreign table
      public 'assoc_col' => string 'id' (length=2) //foreign field
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:15:17.863

试试这个：

```
SHOW CREATE TABLE users 
```

# basic - QB64 输出问题

> ID：12063819
> 
> 赞同：1
> 
> 时间：2012-08-21T22:12:24.197
> 
> 标签：basic

如何向上滚动并查看输出中先前显示的行？

我正在使用 QB64，并且必须运行一个程序 1000 次，但我看不到起跑线。实际上，我看不到前 800 行左右。

有没有办法扩大窗口或向上滚动以查看所有内容？因为我没有滚动条，如果我使用任何键向上滚动，它就会退出控制台窗口。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T22:24:16.047

新版QB64支持控制台窗口，应该可以为所欲为。虽然我不太习惯控制台，但如果一切都失败了，你总是可以将文本保存在字符串数组中并检查它。在 qb64.net 的社区中有一些创建列表的示例，或者您可以使用滚动条等创建自己的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-26T14:02:35.243

在循环中输入一行数据输出：

```
if x > 24 then
   if 24 MOD x then sleep
endif 
```

`MOD`是模数命令，其中模数将返回 和 的余`24`数`x`。在这种情况下，如果它为零，那么它将暂停控制台输出，直到用户按下任何键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-15T20:21:50.700

如果您不想弄乱自定义缓冲区，只需使用控制台：

```
$CONSOLE:ONLY
_DEST _CONSOLE 
```

在你的程序开始时，QB64 将只创建一个控制台窗口，默认情况下可以向后滚动，以便可以看到过去的行。

# c++ - C++ 2011 中的 nextafter 与 nexttoward 函数？

> ID：12063821
> 
> 赞同：20
> 
> 时间：2012-08-21T22:12:37.550
> 
> 标签：c++, floating-point, c++11, c++-standard-library

C++ 2011 标准库的 nextafter 和 nexttoward 函数有什么区别？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T22:18:56.017

由于函数源自 C，它们不能被重载，这意味着函数有两个不同的名称，它们执行相同但具有不同的参数（-type）。以下是原始签名：

```
float nextafter(float, float);
float nexttoward(float, long double); 
```

现在标准只是说应该[有一些重载](http://en.cppreference.com/w/cpp/numeric/math/nextafter)以使 C++ ( `§26.8 [c.math] p11`) 中的事情变得更好：

> 此外，应有足够的额外过载以确保：
> 
> 1.  如果与参数对应的任何`double`参数具有类型`long double,`，则与参数对应的所有`double`参数都有效地转换为`long double`.
> 2.  否则，如果与形参对应的任何实`double`参具有类型`double`或整数类型，则与形参对应的所有实`double`参都被有效地强制转换为`double`.
> 3.  否则，与参数对应的所有`double`参数都将有效地转换为`float`.
> 
> 另见：ISO C 7.5、7.10.2、7.10.6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:15:25.443

阅读手册页：

> nexttoward() 函数的作用与 nextafter() 函数相同，只是它们有一个长双精度参数。

# jquery - 附加到现有视图中的元素

> ID：12063823
> 
> 赞同：0
> 
> 时间：2012-08-21T22:13:06.350
> 
> 标签：jquery, asp.net-mvc

我定义了视图的一部分，在加载时可能会或可能不会由 ViewModel 填充。然后用户进行一些交互，例如选择类别和产品并将它们添加到现有集合中。

他们设置此视图（它是部分视图）的方式：用户选择类别-> 显示产品。用户选择产品 -> 将它们添加到他们的收藏中。

由于用户可以转到定义要显示哪些类别的上一个页面并返回此页面；代码在模型中查找集合，如果产品集合在那里，它会呈现它，如果不是什么都没有发生。

我不知道如何通过 jQuery 追加到这个列表中。如果没有现有元素，我知道如何创建一个新元素。

视图的部分定义如下：

```
<div class="span4 selected-products">
    <h4>Products to track</h4>
       <ul class="SelectedProducts">
          @foreach (var item in Model.SelectedProducts)
          { 
            <li class="network">@item.SelectedCategory.CategoryName
              <div>
                  <ul>@foreach (var net in item.CategoryNetwork)
                      {
                        <li id="@net.CategoryNetwork.NetworkId"> @net.CategoryNetwork.NetworkName
                           <div>
                               <ul>
                                  @foreach (var product in net.Products)
                                  {
                                     <li id="@product.ProdID">@product.ProdName</li> 
                                   }
                                </ul>
                             </div>
                         </li>
                       }
                     </ul>
                   </div>
                </li>
            }
        </ul>
   </div> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:25:46.803

1.  没有理由在 ASP.NET MVC 中使用 foreach。真的！这当然取决于你。框架可以为你做，为什么要在内置的东西上浪费精力？

`@EditorFor(m => Model.SelectedProducts)`会做得很好。定义接收的[EditorTemplate](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)`IEnumerable<yourtypeofproduct>` ，其中有另一个`@EditorFor(Model.CategoryNetwork)`和另一个具有各自类型的编辑器模板等......它的约定优于配置。

1.  转到[这篇文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)并查找“动态添加项目”。关于如何将更多项目附加到现有模型，您的答案就在于此。它基本上是对控制器进行 Ajax 调用，接收要附加的结构并使用 jQuery 附加它。

希望这对您有所帮助。

# emacs - 临时覆盖编译模式正则表达式 alist：动态绑定怪异？

> ID：12063825
> 
> 赞同：2
> 
> 时间：2012-08-21T22:13:17.113
> 
> 标签：emacs, elisp, dynamic-binding, compile-mode

我正在研究一种程序模式，它对汇编程序、程序员和其他外部程序有各种不同的调用。我狡猾的计划是用`compile`函数处理所有这些，传递一个`compile-command`取决于正在运行的程序的显式。

这种似乎可行，现在我想为不同的外部程序添加特定的错误正则表达式。一种选择是更改`compilation-error-regexp-alist-alist`，键入我的主要模式，然后将我的主要模式添加到`compilation-error-regexp-alist`.

不过，我更愿意做的是如下所示：

```
(let ((compilation-error-regexp-alist
       (cons <my-regexp-and-numbers> compilation-error-regexp-alist))
  (compile <my-compile-command>)) 
```

奇怪的是，这个绑定似乎不会影响编译缓冲区被解析/标记的方式。如果我手动推`<my-regexp-and-numbers>`到缓冲区的前面`compilation-error-regexp-alist`然后调用`(compilation-mode t)`缓冲区，一切都会按预期进行字体化（所以我没有弄错正则表达式）。但是，将调用粘在上面`(compilation-mode t)`的表单内部`let`不会影响任何事情。

我意识到这作为一个易于重现的测试用例非常失败。如果没有人有任何想法，我会尝试破解一个例子，但我希望有人会去“啊，是的！那是因为那时没有得到评估，而是在”或类似的.. .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:23:48.800

我的猜测是该变量是为命令设置的，但不知何故没有传递给编译缓冲区。

尝试您的方法并查看编译缓冲区内的变量 ( `C-h v`) 的值以进行确认。

# android - Android Hashmap 文件 I/O

> ID：12063826
> 
> 赞同：0
> 
> 时间：2012-08-21T22:13:19.233
> 
> 标签：android, map

我正在编写一个 Android 应用程序，它会在启动时填充地图，然后在完成后将其保存到文件中。但是，由于该文件可能需要长达 10 秒的时间来检索，我想知道如何在再次获取文件之前检查该文件是否存在，如果确实存在，只需将其加载到 Map 对象中。

```
private Map<String, String> idMap; 
```

如果有更好的方法来保存这张地图，请告诉我。

（这是用作字典的一种形式）

```
Key: Corona
Value: 172

Key: Beer
Value: 199 
```

让我知道您是否需要更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:16:36.083

您可以使用该`File.exists()`方法检查文件是否已存在：

```
File mapFile = new File(PATH_TO_MAP_FILE);
if (mapFile.exists() && mapFile.isFile()) {
    // Load from file
} else {
    // Create the map the slow way
} 
```

至于替代方案，如果您只是存储键值对，您可能需要考虑使用`SharedPreferences`来存储值而不是实现自己的解决方案。它将键和值（多种类型）保存到 XML 文件中。它也是线程安全的并且可以快速阅读。

# assembly - tword、oword 和 yword 操作数的大小是多少？

> ID：12063840
> 
> 赞同：33
> 
> 时间：2012-08-21T22:14:51.370
> 
> 标签：assembly, nasm, word, yasm, word-size

[NASM](http://www.nasm.us/doc/nasmdoc3.html) / [YASM 手册](http://www.tortall.net/projects/yasm/manual/html/manual.html)中使用的大小`tword`和操作数是多少？在相关的说明中，这些名称是否有技巧或潜在的想法？有没有办法给更大的字长赋予逻辑名称？`oword``yword`

我知道虽然系统之间的字长可能不同，但 NASM`word`是 2 个字节，`dword`是两倍（4 个字节），`qword`是一个四字（8 个字节），但是......是`tword`一个*三字*（6 个字节）？而且我什`oword`至`yword`想不出一个似是而非的意思。

请注意，这可能是一个简单的问题，但我找不到答案。在 NASM 和 YASM 手册中没有解释这些大小，甚至在`DQ`, `DT`, `DY`, `RESQ`, `REST`,`RESY`伪指令中也没有解释。我在某处读到 MASM 使用类似的系统，但也找不到任何东西。

* * *

编辑：根据答案，这是完整列表：

*   1 字节（8 位）：`byte`, `DB`,`RESB`
*   2 个字节（16 位）：`word`, `DW`,`RESW`
*   4 字节（32 位）：`dword`, `DD`,`RESD`
*   8 字节（64 位）：`qword`, `DQ`,`RESQ`
*   10 字节（80 位）：`tword`, `DT`,`REST`
*   16 字节（128 位）：`oword`, `DO`, `RESO`, `DDQ`,`RESDQ`
*   32 字节（256 位）：`yword`, `DY`,`RESY`
*   64 字节（512 位）：`zword`, `DZ`,`RESZ`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-21T22:31:47.803

查看[nasm 源代码](https://github.com/yasm/yasm/blob/master/modules/parsers/nasm/nasm-token.re)，它看起来像：

*   'oword'/'DO' 是 "word" 的 8 倍（O 表示 " **o** ctoword"），与 dqword ("double-quad") 同义；这将是 128 位，对应于 SSE 向量寄存器的大小。
*   'tword'/'DT' 是 80 位（T 表示“ **t** en 字节”），是 Intel x87 浮点寄存器的完整大小。
*   'yword'/'DY' 是 256 位，Y 大概是英特尔 AVX 扩展中 256 位向量寄存器的 YMM 名称的助记符。
*   'zword'/'DZ' 是 512 位，Z 代表英特尔 AVX-512 扩展中 512 位向量寄存器的 ZMM 名称。

所以，这不完全是一个合乎逻辑的命名约定。“它刚刚长大”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-26T13:41:05.703

我用 NASM 的两种方法对其进行了检查：源代码和经验。

**源代码**

来源：[http ://repo.or.cz/w/nasm.git](http://repo.or.cz/w/nasm.git)

然后：

```
git grep -C2 tword 
```

我们[相信](http://repo.or.cz/w/nasm.git/blob/3db63b96ecf79344b9c2618616e4be7c99720a18:/assemble.c#l266)：

```
switch (size) {
case 1:
    return "byte";
case 2:
    return "word";
case 4:
    return "dword";
case 8:
    return "qword";
case 10:
    return "tword";
case 16:
    return "oword";
case 32:
    return "yword";
case 64:
    return "zword";
default:
    return "???";
} 
```

**经验**

`git log -p`并`git tag --contains`告诉我这`zword`是在 2.11 中添加的，因为我在 2.10 并且很懒，所以我会省略那个。

在我们的`.asm`文件中：

```
section .bss
resb1 resb 1
resw1 resw 1
resq1 resq 1
rest1 rest 1
reso1 reso 1
resy1 resy 1
; Just to read the objdump better.
resb2 resb 1 
```

然后编译并：

```
objdump -D -j .bss main.o 
```

给出：

```
00000000 <resb1>:
    ...

00000001 <resw1>:
    ...

00000003 <resd1>:
3:  00 00                   add    %al,(%eax)
    ...

00000007 <resq1>:
    ...

0000000f <rest1>:
    ...

00000019 <reso1>:
    ...

00000029 <resy1>:
    ...

00000049 <resb2>:
    ... 
```

如果我们取每个位置之间的差异，我们会得出与以前相同的结论。

**zword 记忆法**

对于`ZMM`AVX-512 添加的寄存器：[https ://en.wikipedia.org/wiki/AVX-512](https://en.wikipedia.org/wiki/AVX-512)

我想知道当字母表中的字母结束时英特尔会做什么。

# sql - 如果 A 列为 NULL，则显示 B 列的值

> ID：12063841
> 
> 赞同：3
> 
> 时间：2012-08-21T22:14:51.083
> 
> 标签：sql, sql-server, sql-server-2008

我想知道如果 A 列为空，我如何显示 B 列的数据。原因是如果我们从我们的一个制造商那里获得产品，它会被放在不同的列中。但是，当我去构建报告时，这两列本质上是相同的东西，而且它把图表扔掉了。任何帮助，将不胜感激。

可能是这样的？

```
Case When column A isnull then column B? 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T22:16:49.233

使用[`ISNULL()`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)或[`COALESCE()`](http://msdn.microsoft.com/en-us/library/ms190349.aspx), 或[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

```
SELECT    ISNULL(ColumnA, ColumnB) AS [YourColumn]
FROM      FOO 
```

或者

```
SELECT    COALESCE(ColumnA, ColumnB) AS [YourColumn]
FROM      FOO 
```

或者

```
SELECT    CASE WHEN ColumnA IS NULL THEN
              ColumnB
          ELSE
              ColumnA
          END AS [YourColumn]
FROM      FOO 
```

# macos - Haskell 循环构造 100% CPU

> ID：12063842
> 
> 赞同：-1
> 
> 时间：2012-08-21T22:14:54.313
> 
> 标签：macos, haskell, ghc, osx-leopard

我有一个我无法真正弄清楚的错误。系统为 10.5（32 位），带有 Haskell 平台 2010，GHC 6.12

考虑以下：

```
loop :: IO ()
loop = do
    return ()
    loop

main = do
    loop 
```

编译时，

```
ghc --make test.hs 
```

这段代码最终会占用 100% 的 CPU 时间。这是为什么？你如何在 Haskell 中编写一个像这样循环的程序，同时又对笔记本电脑的电池很好？

Concurrent 的“产量”似乎没有做任何有趣的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T22:33:23.373

同样的原因，任何语言的紧密循环都会吃掉整个 CPU。你没有告诉它循环比“尽可能快”慢。看`Control.Concurrent`的`threadDelay`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-21T22:41:00.987

没有中断的无限循环将导致任何计算机上任何语言的 100% CPU 使用
如果您*必须*执行这样的循环，请使用[**延迟**](http://hackage.haskell.org/packages/archive/concurrent-extra/0.5/doc/html/Control-Concurrent-Thread-Delay.html)或[**睡眠**](http://hackage.haskell.org/packages/archive/unix/latest/doc/html/System-Posix-Unistd.html#v:sleep)或降低线程的**优先级**，如果它占用太多周期。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T01:17:57.743

一个类似的命令式（类似 Python 的语法）循环是：

```
def loop():
    x = ()
    loop() 
```

或者没有递归：

```
def loop():
   while True:
       x = () 
```

所有这些在任何语言中都会做的就是告诉 CPU 继续执行没有有用结果的指令，永远。如果没有明确地告诉程序除了继续执行这些指令（例如在循环之间暂停一段时间）之外做其他事情，那么除了使用 100% 的 CPU 之外，它还能做什么呢*？*

`Control.Concurrent.yield` allows any other thread *in your program* to "get a turn" at execution. If there are no other threads then it doesn't do anything. If *all* your other threads are executing such a loop, then it'll still use 100% CPU. If you have other threads that are sometimes IO bound rather than CPU bound, I do not know for certain, but I'm reasonably sure Haskell's runtime system switch back to something for the CPU to do (if possible) whenever threads are waiting for IO, so you'd probably see close to 100% CPU usage if you had this loop running and `yield`ing, even if you have loads of other threads that won't use 100% CPU on their own.

If other unrelated programs are also running, then almost all modern desktop hardware and operating systems will try to share the CPU resources between them, regardless of whether you're using `yield` or not. Generally, this means that any time the other programs don't have work for the CPU your loop program will be run, *plus* it will also steal some of the CPU time that could have been used to execute other programs. This means that while this loop program is executing you would usually see close to 100% CPU usage regardless of what else is running, and using `yield` won't particularly make a difference to how much CPU time is available to other programs.

`Control.Concurrent.threadDelay` puts the thread to sleep for (at least) a given amount of time. If that leaves the CPU with nothing to execute, *then* you'll see your system running at less than 100% CPU.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T22:33:22.327

在循环中插入[延迟](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent.html#v%3athreadDelay)，以便将处理器时间分配给另一个进程。

# wordpress - 如何从我的 htaccess 命令中排除文件夹

> ID：12063843
> 
> 赞同：0
> 
> 时间：2012-08-21T22:15:01.793
> 
> 标签：wordpress, .htaccess

我的主根目录中有以下 htaccess ......但我想排除一个子域文件夹来安装 wordpress ......实际上我试图安装的 wordpress 给出了错误，当我删除这个 htaccess 时，wordpress 工作正常.. 。 谢谢

```
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  # Get rid of index.php
  RewriteCond %{REQUEST_URI} /index\.php
  RewriteRule (.*) index.php?rewrite=2 [L,QSA]

  # Rewrite all directory-looking urls
  RewriteCond %{REQUEST_URI} /$
  RewriteRule (.*) index.php?rewrite=1 [L,QSA]

  # Try to route missing files
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} public\/ [OR]
  RewriteCond %{REQUEST_FILENAME} \.(jpg|gif|png|ico|flv|htm|html|php|css|js)$
  RewriteRule . - [L]

  # If the file doesn't exist, rewrite to index
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?rewrite=1 [L,QSA]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:28:32.577

要从 htaccess 中排除文件，您可以在目录中放置一个 htaccess 文件，方法很简单：

```
RewriteEngine On 
```

否则，在根文件夹的 htaccess 文件中，您可以在下面添加`RewriteEngine On`：

```
RewriteRule ^directory_you_want_to_protect - [L] 
```

但我怀疑这真的是一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。您可能需要修改或结合 wordpress 所需的 htaccess 规则与您现在拥有的规则。它们可能不完全兼容。如果是无法运行*安装程序*的问题，只需暂时删除root的htaccess文件，安装wordpress，然后弄清楚如何组合规则。

# java - 形成和排序正整数数组的最快策略

> ID：12063849
> 
> 赞同：5
> 
> 时间：2012-08-21T22:15:29.983
> 
> 标签：java, arrays, algorithm, sorting, insertion-sort

在 Java 中，更快的是：创建、填充然后排序一个整数数组，如下所示

```
int[] a = int[1000];
for (int i = 0; i < a.length; i++) {
    // not sure about the syntax
    a[i] = Maths.rand(1, 500) // generate some random positive number less than 500
}
a.sort(); // (which algorithm is best?) 
```

或即时插入排序

```
int[] a = int[1000];
for (int i = 0; i < a.length; i++) {
    // not sure about the syntax
    int v = Maths.rand(1, 500) // generate some random positive number less than 500
    int p = findPosition(a, v); // where to insert
    if (a[p] == 0) a[p] = v;
    else {
        shift a by 1 to the right
        a[p] = v;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T22:18:40.543

有很多方法可以做到这一点：

1.  构建数组并随时排序。这可能非常慢，因为移动数组元素为新元素腾出空间所需的时间几乎肯定会支配排序时间。您应该期望这最多花​​费 Ω(n ² ) 时间，其中 n 是您要放入数组中的元素数，而与使用的算法无关。即时进行插入排序将在此处花费预期的 O(n ² ) 时间。

2.  构建未排序的数组，然后对其进行排序。如果您使用良好的排序算法，例如[快速排序](http://en.wikipedia.org/wiki/Quicksort)或[基数排序](http://en.wikipedia.org/wiki/Radix_sort)，这可能会非常快。您应该期望这需要 O(n log n) 时间（对于快速排序）或 O(n lg U) 时间（对于基数排序），其中 n 是值的数量，U 是最大值。

3.  将数字增量添加到[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)，然后从优先级队列中取出所有元素。根据您实现优先级队列的方式，这可能非常快。例如，在这里使用[二叉堆](http://en.wikipedia.org/wiki/Binary_heap)将导致此过程花费 O(n log n) 时间，而使用[van Emde Boas 树](http://en.wikipedia.org/wiki/Van_Emde_Boas_tree)将花费 O(n lg lg U) 时间，其中 U 是您存储的最大数字. 也就是说，这里的常数因素可能会使这种方法比仅仅对值进行排序要慢。

希望这可以帮助！

# sql-server - SQL Server 2000 中的多个时间戳列

> ID：12063850
> 
> 赞同：15
> 
> 时间：2012-08-21T22:15:45.660
> 
> 标签：sql-server, timestamp

我需要在 SQL Server 2000 中创建一个表。

```
create table TABLE (
        DBID_ bigint not null,
        CLASS_ varchar(255) not null,
        DBVERSION_ integer not null,
        HPROCI_ bigint,
        TYPE_ varchar(255),
        EXECUTION_ varchar(255),
        ACTIVITY_NAME_ varchar(255),
        START_ timestamp,
        END_ timestamp,
        DURATION_ bigint,
        TRANSITION_ varchar(255),
        NEXTIDX_ integer,
        HTASK_ bigint,
        primary key (DBID_)
    ); 
```

当我运行它时发生错误。

> *一张表只能有一个时间戳列。因为表`TABLE` 已经有一个，所以`END_`不能添加列。*

`timestamp`SQL Server的最佳替代方案是什么？如何解决这个问题？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-21T22:24:14.847

`timestamp`顾名思义，A不是日期时间数据类型。它是一个*相*对于服务器时钟的内部值，但不能从它的值推导出实际时间。它仅用于评估行是否已更新，因此表只能具有此类型的一列。该`timestamp`语法实际上已被弃用，现在已命名[`rowversion`](http://msdn.microsoft.com/en-us/library/ms182776.aspx)，这更有意义。

鉴于您的列名（开始，结束），我假设您正在尝试存储实际时间戳，而应该将其`datetime`用作您的数据类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T22:29:22.367

在 Sql Server`timestamp`中是一种数据类型，它不是时间。它基本上是一种对记录进行版本控制的方法，它用于在断开连接的数据库模型中进行乐观锁定。当您加载记录时，您会选择时间戳列。只有当时间戳列中的值相同时，您才将其写回，因为这意味着自从您获得它以来没有其他人更改过它。

如果您想要一个真实`datetime`值，请添加一个不为空的日期时间，或者使用默认值`GetDate()`并记住更新每个更新。

# javascript - 如何使用 jQuery 在文档加载时将 onLoad 事件添加到名称未知的元素？

> ID：12063857
> 
> 赞同：0
> 
> 时间：2012-08-21T22:16:28.983
> 
> 标签：javascript, jquery, events

我正在使用第三方评论插件，我想更改一些按钮的内容。这对于`id`提前知道 ' 的按钮很简单，但它也有在单击“回复”按钮之前不会出现的按钮。需要明确的是，这些元素*在页面加载时不存在*。它们在某些事件之后被插入到 DOM 中。对于那些元素，我只知道`id`.

我的第一个想法是使用`.on`, 并委托给回复容器的孩子，但`load`事件不会冒泡，所以这不起作用：

```
<script>
  $("#container").on("load", 'a[id|="reply-button"]', function(event) { $(this).html("different text");  } );
</script>

<div id="container">
  <a id="reply-button-42das56ds6d78a">some text</a>
</div> 
```

下一个最好的事情是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:51:05.660

> *“我知道当点击‘回复’按钮时它们会出现。当这种情况发生时，新元素被插入到 DOM 中，我知道这些元素的 id 前缀是什么。”*

您可以使用`DOMSubtreeModified`事件之类的东西来判断何时添加元素，但并非所有浏览器都支持。（实际上它已被弃用。）

或者您可以将点击处理程序附加到“回复”按钮：

```
$(document).ready(function() {
    // initialise plugin here, then:
    $("some selector for the reply button(s)").click(function(e) {
        // setTimeout(function() {        
        $('a[id|="reply-button"]').html("different text");
        // }, 10);
    });
}); 
```

jQuery 确保多个事件处理程序将按照它们绑定的顺序运行，但当然这仅适用于使用 jQuery 添加的处理程序。因此，如果您使用的第三方评论插件也使用 jQuery，那么只需确保它首先被初始化，然后您自己的回复点击处理程序应该运行，届时它将能够访问插件添加的元素。

如果插件不使用 jQuery，您无法确定您的点击处理程序是否会最后运行，因此请取消注释`setTimeout`我上面显示的代码 - 它会等待几毫秒，让插件事件有时间运行，*然后*更新文本.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:19:33.300

使用选择器`$('#^=id')`

id 是前缀

例如所有 id 开始 test123

`$('#^=test123')`

这适用于类似的事情

```
test1234
test12345
test123fgjfdgj 
```

这可能会有所帮助： http: [//oscarotero.com/jquery/](http://oscarotero.com/jquery/)

并使用 jquery 事件侦听器进行页面加载..

例如`$(document).ready(function(){});`

如果在单击按钮时加载它们，则执行..

```
$('#buttonid').click(function() {//handle click}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:45:38.680

您正在寻找 DOM 突变事件。此规范允许您在插入、更改 DOM 节点等时收到通知。浏览器支持实际上并不存在，但...嗯，IE 落后（IE >= 9 支持）。它也是一个主要的性能猪。请参阅[此 MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)。由于这些原因，我认为这里的很多人不会建议使用它们。不过，这里有一些代码：

```
document.addEventListener("DOMNodeInserted", function(e) {
    if ($(e.target).is('selector matching new elements')) {
        //do what you want with e.target, which is the newly-inserted element
    }
}, false); 
```

有一个提高性能的技巧，涉及监听 CSS 动画事件：[here](http://www.backalleycoder.com/2012/04/25/i-want-a-damnodeinserted/)。唯一的问题是 IE9 不支持 CSS 动画。不过，我认为我们都在等待能够以跨浏览器和高性能方式使用这些事件的那一天。

# vba - 访问 VBA 将变量设置为字符串“是”而不是 -1

> ID：12063864
> 
> 赞同：1
> 
> 时间：2012-08-21T22:17:21.447
> 
> 标签：vba, ms-access

我正在使用 Access 从 Excel 导入信息，然后循环浏览数据。我无法控制 Excel 文档中的信息。Excel 文档用于执行审计，我正在报告结果。最近进行了更改，因此某些答案不再是是/否。答案可能是“否 - 缺少文件”。我创建了一个存储 Yes/No/NA 响应的表，以便能够捕获这些更改，但是我现在偶然发现了一个问题。

```
yText = Nz(Dlookup("yText","tblQuestions","Group = '" & group & "' AND Question = " & qID), "Yes") 
```

yText 用于动态 SQL 字符串，因此因为存储在字段中的值将是“是”作为字符串，所以我需要 yText 等于“是”，但 VBA 会更改 yText = -1。nText = 'No' 也会出现同样的问题。有什么办法可以防止这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:19:26.207

您可以在 DlookUp 中使用格式：

```
Format(yText,"Yes/No")

Dlookup("Format(yText,'Yes/No')","tblQuestions","Group = '" _
 & group & "' AND Question = " & qID) 
```

# php - PHP DateTime->格式不正确的年份

> ID：12063865
> 
> 赞同：0
> 
> 时间：2012-08-21T22:17:30.967
> 
> 标签：php, datetime

当使用 php DateTime 对象获取该月最后一天的日期时，年份总是不正确的。

我的代码是：

```
$d = new DateTime();
$d->modify('last day of this month');
$formattedDateTime = $d->format('Y-m-d H:i:s') 
```

除了返回为 7168 而不是 2012 的年份之外，一切都是正确的。

任何人对造成这种情况的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:40:36.883

正如其他人所说，它也适用于我（PHP 5.4.3）。但是，在一些较新的 PHP 版本中，日期/时间代码中存在一些错误，因此请尽可能尝试升级您的安装，看看是否有帮助。

话虽如此，您应该将字符串直接传递给构造函数，而不是使用`DateTime::modify()`：

```
$d = new DateTime('last day of this month');
$formattedDateTime = $d->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:57:01.977

它似乎与您的 PHP 版本有关。

[我认为这是PHP DateTime 相对格式页面](http://www.php.net/manual/en/datetime.formats.relative.php)上的最后一条评论

> 应该注意的是，其中一些字符串显然只在 PHP 5.3 中有效，特别是：例如“本月的第一天”和“本月的最后一天”。根据在另一个网站上找到的信息，PHP 5.3 中添加了“xxx day of”功能。

# asp.net - 将数据从 SP 绑定到 gridview 内的文本框

> ID：12063869
> 
> 赞同：-1
> 
> 时间：2012-08-21T22:17:54.200
> 
> 标签：asp.net

如何将数据从 SP 绑定到我的 gridview，每个单元格都有文本框。我的要求如下。

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
        <Columns>
            <asp:TemplateField HeaderText="Year">
                <ItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Year") %>'></asp:TextBox>

                </ItemTemplate>

            </asp:TemplateField>
            <asp:TemplateField HeaderText="Period">
                <ItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Period") %>'></asp:TextBox>
                </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:17:39.003

使用 SQL 数据源：这是我的一个示例。我有我的联系，所以你需要替换你的。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ProjectCISConnectionString %>" ProviderName="<%$ConnectionStrings:ProjectCISConnectionString.ProviderName %>"

<SelectParameters> 
                  <asp:ControlParameter name="Textbox1"  
                          ControlID="txttextbox1" Propertyname="Text"/> 
              </SelectParameters> 
        </asp:SqlDataSource> 
```

[http://www.aspnettutorials.com/tutorials/database/db-storedprocs-aspnet2-csharp.aspx](http://www.aspnettutorials.com/tutorials/database/db-storedprocs-aspnet2-csharp.aspx)

# android - 设备进入睡眠状态时位置管理器是否继续工作？

> ID：12063870
> 
> 赞同：4
> 
> 时间：2012-08-21T22:18:04.833
> 
> 标签：android, sleep, locationmanager, wakelock

当布尔标志设置为 true 时，我的应用程序在后台请求更新服务。如果标志设置为真，那么我将获得一个`PARTIAL_WAKE_LOCK`让我的后台服务运行。我的问题是：

*   由于我向位置管理器请求更新（我没有手动请求更新而是订阅`locationManager.requestLocationUpdates`）......即使设备进入睡眠状态，位置管理器是否继续正常/正常工作`PARTIAL_WAKE_LOCK`？

*   我读过有一个`WifiLock -> WIFI_MODE_SCAN_ONLY`我没有获得的。由于位置管理器使用 wifi 扫描通过 wifi 热点检测位置，我是否也应该获取它？

*   当设备进入睡眠状态时，gps 位置更新怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T01:37:24.350

1.  不，不是的。更多（非常好的）信息[在这里](http://code.google.com/p/android/issues/detail?id=10931)，包括可能的解决方案/黑客。

2.  关于 1，我必须做出有根据的猜测，并说这不会有什么不同

3.  据我所知，您使用哪个提供商进行更新`LocationManager.NETWORK_PROVIDER`或`LocationManager.GPS_PROVIDER`.

冒着有点 OQ 的危险，我有点好奇哪种应用程序需要获取唤醒锁以保持服务运行。据我所知，拥有唤醒锁并不能确保您`Service`继续运行。确保 a 持续运行的唯一`Service`方法是将其置于前台 ( [`Service.startForeground()`](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29))。否则系统仍然可能终止服务，无论它是否获得了唤醒锁。话虽如此，如果它正在运行，它可以与 a`Handler`或其他东西一起工作。

如果您正在使用这种方法，并且我认为您是基于场景的，我建议您不要这样做。基本上，您正在创建一项服务，让它在前台运行（猜测），并且您正在获取唤醒锁定只是为了在屏幕关闭时请求位置更新。这似乎有点矫枉过正。

有一种更有效的方法，它的好处是它比可怕的时间更准确的时间`Handler.postAtTime`or `Handler.postDelayed`: [`AlarmManager.setRepeating()`](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)。将类型设置为 ELAPSED_REALTIME_WAKEUP 或 RTC_WAKEUP 以便在设备休眠时运行，然后当`BroadcastReceiver`您必须创建的警报事件被触发并接收时，您可以请求更新并处理其他事件。

如果您不使用`Handler`，而只是请求位置更新，那么这种方法可能仍然会更好，因为它不需要您运行`Service`或获取唤醒锁。

这似乎[`LocationManager.addProximityAlert()`](http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert%28double,%20double,%20float,%20long,%20android.app.PendingIntent%29)是去这里的方式。这也是有缺陷的（见1）

顺便说一句，这里有类似的问题：[Android：手机睡眠时 GPS 位置更新？](https://stackoverflow.com/questions/3010011/android-gps-location-updates-when-the-cellphone-is-in-sleep?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T13:27:51.307

我花了几天时间尝试在 Nexus 6 上使用 Android 6.0 锁定屏幕获取 WiFi 和基于单元的位置。看起来原生 android 位置服务简单不允许这样做。一旦设备被锁定，它仍然会收集 10-15 分钟的位置更新事件，然后停止提供任何位置更新。

就我而言，解决方案是从原生 Android 定位服务切换到名为 com.google.android.gms.location 的 Google Play 服务包装器：[https ://developers.google.com/android/reference/com/google/android/gms /位置/包摘要](https://developers.google.com/android/reference/com/google/android/gms/location/package-summary)

是的，我知道一些 Android 设备缺少 GMS，但对于我的应用程序来说，这是唯一可以执行的解决方案。

即使在后台和设备屏幕被锁定时，它也不会停止发送位置更新。

我个人更喜欢 RxJava 库将此服务包装到流中（包括示例）：[https ://github.com/mcharmas/Android-ReactiveLocation](https://github.com/mcharmas/Android-ReactiveLocation)

# android - 在android中启动线程的正确方法

> ID：12063871
> 
> 赞同：0
> 
> 时间：2012-08-21T22:18:14.367
> 
> 标签：android

我需要一个计时器，它将为其处理程序发送消息。我创建了一个实现 Runnable 的类，并将其对象提供给线程可运行构造函数。当我启动线程时，它会挂起应用程序，显然它没有异步工作。我本可以使用 AsyncTask，但我也听说它们是为短期操作而设计的，而我的后台计时器必须在整个活动 onResumed 状态下工作。您是否介意指出我的错误，并可能提供有关 android 线程主题的有用链接。谢谢。

这是我写的代码：

```
@Override
public void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    _myTimerInstance = new MyTimer(new Handler() {
        @Override
        public void dispatchMessage(Message msg) {
            super.dispatchMessage(msg);
            // ...
        }
    });
    _myThread = new Thread(_myTimerInstance);
    _myThread.run();

}

private static class MyTimer implements Runnable {

    private Handler _myHandler;
    private boolean _activityHasBeenLeft;

    public MyTimer(Handler myHandler) {
        _myHandler = myHandler;
    }

    public void setActivityHasBeenLeft(boolean b) {
        _activityHasBeenLeft = b;
    }

    @Override
    public void run() {
        while (!_activityHasBeenLeft) {
            try {
                Thread.sleep(2000);
                _myHandler.sendEmptyMessage(0);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:24:37.420

您应该始终使用 Thread.start() 而不是 Thread.run() Thread.run() 就像一个普通的方法调用，并且在同一个线程上运行。

采用

```
_myThread.start(); 
```

# c++ - 试图解释 Windows 操作系统上的用户会话状态

> ID：12063873
> 
> 赞同：1
> 
> 时间：2012-08-21T22:18:30.117
> 
> 标签：c++, windows, winapi, terminal-services, usersession

如果我从 Windows 7 上运行的本地服务调用以下 API：

```
WTS_SESSION_INFO* pWSI;
DWORD nCntWSI;
WTSEnumerateSessions(WTS_CURRENT_SERVER_HANDLE, NULL, 1, &pWSI, &nCntWSI); 
```

然后遍历 pWSI 中所有返回的[WTS_SESSION_INFO](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383864%28v=vs.85%29.aspx)结构并检查 WTS_CONNECTSTATE_CLASS 状态成员，有人可以解释[WTSActive](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383860%28v=vs.85%29.aspx)和[WTSConnected](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383860%28v=vs.85%29.aspx)之间有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T05:57:23.187

已连接表示用户已连接并已（或即将）显示登录屏幕，但尚未完成并经过验证。例如，他可能正在输入他的密码。

如果用户锁定了工作站，它被屏幕保护程序锁定，或者他已经切换到另一个用户帐户，它不会结束他的会话。用户保持登录状态，他的会话将保持标记为活动状态。因此，已连接但未处于活动状态意味着该用户帐户下没有运行任何进程。（需要注意的是，可能有服务或其他进程在该用户的凭据下在单独的会话中运行，但这是另一回事。）

# c - 循环中的 fgetc(stdin) 产生奇怪的行为

> ID：12063879
> 
> 赞同：4
> 
> 时间：2012-08-21T22:18:56.307
> 
> 标签：c, fgetc

我有这个代码

```
while(1){
    printf("hello world !\n");
    fgetc(stdin);
} 
```

当它运行时，我输入这样的字母：

```
hello world !
a 
```

它在下一个循环中忽略 fgetc(stdin) 并打印 hello world 两次而不等待输入。

```
hello world !
a
hello world !
hello world !
a
hello world !
hello world !
a
hello world !
hello world !
a
hello world !
hello world ! 
```

我曾尝试将 fflush(stdin) 放在 fgetc(stdin) 之前或之后，但它仍然会产生相同的行为，我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T22:21:00.657

那是因为您实际上输入了两个字符：“a”和换行符。此外，由于终端通常是行缓冲的，因此您的程序只有在您点击换行时才会看到您的输入。输入更长的文本行也会提供信息。

如果你想改变这种行为，你有两个选择：读取整行（即所有字符到换行符或文件结尾）或将终端切换到非规范模式。如果您正在使用文本编辑器等交互式终端应用程序，则后者是有意义的。有关详细信息，请参见[termios 手册页](http://linux.die.net/man/3/termios)。简而言之，您需要将 MIN 和 TIME 选项设置为零，以便在数据可用时立即从终端返回读取。如果您确实走这条路，请确保在退出时切换终端，包括由于接收到信号。

`fflush()`影响输出，而不是输入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T22:24:25.823

终端往往是行缓冲的，这意味着可以逐行访问流内容。

因此，当`fgetc`开始从 STDIN 读取时，它正在读取整行，其中包括结束该行的换行符。那是您正在阅读的第二个字符。

至于`fflush`，那是用于刷新输出缓冲区，而不是输入缓冲区。

因此，您在这里要做的是通过读取输入缓冲区直到其为空来清除输入缓冲区，或者只是显式忽略换行符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T22:21:17.190

有两个字符：`a`和`\n`（换行符）。您的循环读取读取`a`，然后循环并打印“hello world！”。然后它会看到`\n`并循环并打印“hello world！”。当您在终端中键入`a`+`\n`时，它将两个字符存储在标准输入缓冲区中。`fgetc(stdin);`如果有可用的字符，将从标准输入缓冲区读取，否则它会等待直到将字符添加到缓冲区。

由于终端是行缓冲的（即，在到达换行符之前不要将内容发送到程序）您有几个选择：

*   将整行读入缓冲区，但只取第一个字符
*   忽略换行符
*   关闭行缓冲

要关闭行缓冲，请查看[http://c-faq.com/osdep/cbreak.html](http://c-faq.com/osdep/cbreak.html)和[http://www.flipcode.com/archives/_kbhit_for_Linux.shtml](http://www.flipcode.com/archives/_kbhit_for_Linux.shtml)和[http://ubuntuforums.org/showthread。 php?t=225713](http://ubuntuforums.org/showthread.php?t=225713)（虽然我没有在这里测试任何代码）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T22:23:49.590

你有两个字符，`'a'`和`'\n'`。这就是问题所在，因为 fgetc 只会读取一个字符。这是[文档](http://www.cplusplus.com/reference/clibrary/cstdio/fgetc/)。

如果您只输入一个`'\n'`- 仅点击输入 - 您将获得预期的行为。

希望能帮助到你！

# vba - 在 Excel / 宏中将字符串转换为双精度

> ID：12063887
> 
> 赞同：1
> 
> 时间：2012-08-21T22:19:36.647
> 
> 标签：vba, excel

我尝试在 Excel 中创建新函数，女巫将计算给定值（类似于 SUM 函数，但仅具有给定前缀）。

```
 A
---------    
1|AA30  
2|AA10 
3|BC446 
4|AA10

// result will be 50  on SUM_PREFIX(A1:A4;"AA") 
```

问题是，当值的格式为 AA10,434 或 AA4.43 时。谁能帮我解决我的问题？这是我在 VB 中的第一次脱衣舞。

```
 Function SUM_PREFIX(Data As Range, prefix As String) As Double

    Dim result As Double
    Dim strVal As String
    Dim i As Integer
    Dim objRegExp As Object

   Set objRegExp = CreateObject("vbscript.regexp")
   With objRegExp
        .IgnoreCase = True
        .MultiLine = False
        .Pattern = "^[" + prefix + "]+[0-9]+(\,|\.)?[0-9]?$"
        .Global = True
    End With

    For i = 1 To Data.Rows.Count
        Debug.Print Data.Cells(i, 1)
        If objRegExp.Test(Data.Cells(i, 1)) = True Then
            strVal = Replace(Data.Cells(i, 1), prefix, "")
            Debug.Print strVal
            strVal = Trim(Replace(strVal, ",", "."))
            Debug.Print strVal
            result = result + CDbl(strVal)
        End If
    Next i

    SUM_PREFIX = result
End Function 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T22:38:06.307

`CDbl`是区域设置感知的，因此请检查您`Replace`是否正确（例如，在我的区域设置中，我必须将“。”替换为“，”才能使其工作）。如果您不想依赖区域感知代码，请使用`Val`而不是`CDbl`因为`Val`只识别“。” 作为有效的小数分隔符，无论语言环境如何。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-28T03:42:56.480

```
Function SUM_PREFIXO(DADOS As Range, PREFIXO As String) As Double

Dim result, NI As Double
Dim strVal As String
Dim i As Integer
Dim objRegExp As Object

   Set objRegExp = CreateObject("vbscript.regexp")
   With objRegExp
        .IgnoreCase = True
        .MultiLine = False
        .Pattern = "^[" + PREFIXO + "]+[0-9]+(\,|\.)?[0-9]?$"
        .Global = True
    End With

    NI = DADOS.Rows.Count

    For i = 1 To DADOS.Rows.Count

    Debug.Print (DADOS.Cells(i, 1))

    If objRegExp.Test(RetiraEspaço(DADOS.Cells(i, 1))) = True Then
        strVal = Trim(Replace(DADOS.Cells(i, 1), PREFIXO, ""))
        Debug.Print strVal
        strVal = Trim(Replace(strVal, ".", ","))
        Debug.Print strVal
        strVal = Trim(Replace(strVal, ",", ","))
        Debug.Print strVal
        result = result + CDbl(strVal)

    End If
    Next i

SUM_PREFIXO = result
End Function 
```

'Com o código abaixo pode-se'remover os espaços extras entre as palavras de um texto: Function RetiraEspaço(Texto)

```
Dim Vpalavra, inicio, termino, Wresultado
inicio = 1
Texto = UCase(Texto) & " "

Do Until InStr(inicio, Texto, " ") = 0
    termino = InStr(inicio, Texto, " ")
    Vpalavra = Mid(Texto, inicio, termino - inicio)
    inicio = termino + 1

    Wresultado = Wresultado & "" & Vpalavra
Loop

RetiraEspaço = Trim(Wresultado) 
```

结束功能

# c++ - C++：返回多个新数组

> ID：12063897
> 
> 赞同：1
> 
> 时间：2012-08-21T22:20:02.887
> 
> 标签：c++, arrays

我认为这是一个简单的问题，但它让我发疯：我想从一个方法返回多个数组，调用方法事先不知道它们的大小。所以我必须在方法中创建这些数组（而不是仅仅填充它们）并且我无法使用`return`.

所以我想要的是这样的方法签名：

```
void giveMeArray(int[] *anArray) 
```

方法签名只有一个参数来简化示例，请假设我也可以有一个签名

```
void giveMeArrays(int[] *anArray, float[] *anotherArray) 
```

在该方法中，`giveMeArray`我将构造数组

```
*anArray = new int[5]; 
```

我会使用该方法调用该方法

```
int[] result;
giveMeArray(&result); 
```

然而，所有这些（从方法签名开始）至少在语法上是错误的。请原谅我现在手头没有编译器错误，我很确定你们中的一些人会知道出了什么问题。

**编辑**我*知道*std::vector 将是最好的（意思是最干净的）方法。然而，伙计们，这不是问题所在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T22:21:44.517

返回一个`vector`（毕竟这是 C++）

```
void giveMeArray(std::vector<int>& anArray)
{
   anArray = std::vecotr<int>(5);
} 
```

返回一个向量的向量：

```
void giveMeArray(std::vector<std::vector<int> >& anArray) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:25:38.253

```
void giveMeArray(int **anArray);

int *result;
giveMeArray(&result); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T22:44:26.070

```
std::vector<int> giveMeArray() {
    std::vector<int> ret;
    ret.resize(5);
    return ret;
} 
```

不错的资源清理，调试模式中的边界检查等。对所有家庭都有好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:28:20.347

考虑将数组包装在类或结构中。

```
struct Arrays {
    int *ints;
    int intCount;
    double *doubles;
    int doubleCount;
};

Arrays giveMeArrays() {
    Arrays arrays;
    arrays.ints = new int[10];
    arrays.intCount = 10;
    arrays.doubles = new double[20];
    arrays.doubleCount = 20;
    return arrays;
} 
```

另一种方法是使用 a`std::pair<>`或 a `std::tuple<>`，但根据我的经验，对它们的任何使用最终都会成为命名类型。它们都是函数结果的一部分这一事实表明它们可能具有足够的连贯性成为对象。拥有用户定义的类型可以更容易地传递数据，从而更容易重构代码。你甚至会发现它`giveMeArrays()`变成了这个对象的一个​​成员函数。

如果可能的话，替换`ints`/会更好。如果没有，您可能希望让 Arrays 更多地负责内存管理、在允许移动的同时禁用复制等等。`intCount``std::vector<int>`

# php - 你如何使用 Pdo 使用 WHERE 向 mysql 中插入一些东西

> ID：12063898
> 
> 赞同：0
> 
> 时间：2012-08-21T22:20:11.400
> 
> 标签：php, pdo

因此，当使用 WHERE 满足值时，我试图改变某些东西的状态

代码：

```
$insertstatus = $DBH->prepare("INSERT INTO
   csvdata (status)  VALUES ('$status') WHERE username = '".$username."'");
        $insertstatus->execute(); 
```

不工作。如果你能帮我一把。

感谢您的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T22:21:40.980

如果要使用该`where`子句，则需要使用更新。从外观上看，您无论如何都在尝试更新，因为您只使用表中的一列。

```
$insertstatus = $DBH->prepare("update
   csvdata set status=  '$status' WHERE username = '".$username."'");
    $insertstatus->execute(); 
```

正如 PeeHaa 正确指出的那样，使用带参数的准备好的语句会稍微改变你的代码，对你来说是一个更好的选择。你可以这样做：

```
$sql="update csvdata set status=:status where username=:username";
$sth=$DBH->prepare($sql);
$sth->execute(array(':status' => $status, ':username' => $username)); 
```

这样您就可以准备语句，以便数据库*知道*会发生什么。`execute()`然后，您通过数组中的函数将变量传递给数据库。

# c# - 函数和动作代码

> ID：12063901
> 
> 赞同：0
> 
> 时间：2012-08-21T22:20:34.143
> 
> 标签：c#

[http://simpleprogrammer.com/2010/09/24/explaining-what-action-and-func-are/](http://simpleprogrammer.com/2010/09/24/explaining-what-action-and-func-are/)

上面的代码简单的解释了 Action 和 Func。我仍然没有得到 100% 的含义。或者无法使代码为我工作。

```
public void SteamVegetable(Vegetable vegetable, int timeInMinutes)
{
    CookVegetable(vegetable, Steam, timeInMinutes);
}

public void FryVegetable(Vegetable vegetable, int timeInMinutes)
{
    CookVegetable(vegetable, Fry, timeInMinutes);
}

public void BakeVegetable(Vegetable vegetable, int timeInMinutes)
{
    CookVegetable(vegetable, Bake, timeInMinutes);
}

public void CookVegetable(Vegetable vegetable,
   Action<Vegetable, CookingTime> cookingAction,
   int timeInMinutes)
{
    Clean(vegetable);
    cookingAction(vegetable, Minutes.Is(timeInMinutes));
    Serve(vegetable);
} 
```

有人可以帮我将代码从蔬菜转换为数字和 Steam --> Addition, Fry --> Multiplication, Bake --> 当两个操作数传递给它时减法。

当我看到代码工作时，我可以更好地理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:46:46.617

我可能无法理解您想要什么，但我会尽力回答。请注意，我在示例中省略了许多复杂的东西，例如我将使用泛型而不是普通`int`值，但这只会在示例中创建冗余的复杂性。

在下面的示例中，我只定义了高阶函数，它接受两个 int 值，函数，它将两个值转换为字符串（即封装一些行为），并且它们将这个结果包含在封闭标签和开放标签中，其中一个被传入。注意，我假设您熟悉 C# 中的 lambda 表示法。

```
ApplyAndPrettyPrint(100, 3, "summ of 100 and 3 is equal to: ", (x,y) => (x*y).ToString("N0"));
ApplyAndPrettyPrint(100, 3, "100 to power 3 is:  ", (x,y) => (Math.Pow(x,y)).ToString("N0"));
ApplyAndPrettyPrint(2, 33, "2 * root of 33 is:  ", (x,y) => (x * Math.Sqrt(y)).ToString("N0"));

public void ApplyAndPrettyPrint( int firstNumber, int secondNumber, string startTag, Func<int, int, string> evaludationFunction) 
{
    string result = startTag;
    result += evaludationFunction(firstNumber, secondNumber);
    result += ";";
    Console.WriteLine (result);
} 
```

所以`Func`这里就像一个盒子一样使用，两个整数作为输入，一个字符串作为输出。

第二个示例显示了我们如何将 Action 传递给方法，该方法将在一些数字数组上进行评估。同样，我省略了 IEnumerable 接口和泛型的细节。

```
int[] numbers = new []{ 1, 2, 4, 5, 6, 7 };
ApplyForEach(numbers, (x) => Console.WriteLine ("square of {0} is {1}", x, x*x));

public void ApplyForEach(int[] numbers, Action<int> someFunction)
{
    foreach (var number in numbers)
    {
        someFunction(number);
    }
} 
```

结果将只打印带有一些描述性字符的整数平方。换句话说`Action`，是没有输出的委托。您可以将它们视为带有一些输入但根本没有输出的盒子。

希望这对您的理解有所帮助。底线是委托类型`Action`和的唯一区别`Func`是最后一个泛型类型的语义：在 Func 中它是返回值，在 Action 中返回值是 void，所以最后一个泛型类型只是进入输入参数。

[如果您觉得这个主题有些困难，Jon Skeet 在他的精彩著作“ C# in Depth](https://rads.stackoverflow.com/amzn/click/com/1935182471) ”中的第 5 章“Fast-tracked delegates”中描述了代表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:46:49.197

在您提供的示例中`Fry`，`Steam`、 和`Bake`可能应该是方法。

基本上，`Action`s 和`Func`s 让你将一段代码传递给一个方法，然后执行那段代码。

所以，你可以做

```
public void Foo(Action<int> actionToPerform, int someInt)  
{
    actionToPerform(someInt);
} 
```

然后，您可以将该`Foo`方法与任何采用整数的“代码块”一起使用。

所以，

```
public void Bar() 
{
     Action<int> writeToConsole = i =>  { Console.WriteLine(i); }
     Action<int> writeToSomeLogger = i => { Logger.WriteLog(i); }
     Foo(writeToConsole, 10);
     Foo(writeToSomeLogger, 100);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:53:15.570

我将把我的例子扔进去。我试图让它变得简单，所以希望这会有所帮助。

以此为例：

```
class MathClass {
    public int Add(int number1, int number2) {
        return DoSomeMathOperation(number1, number2, theAddingIsActuallyDoneHere); // The method "theAddingIsActuallyDoneHere" below is what gets called.
    }

    private int theAddingIsActuallyDoneHere(int number1, int number2) {
        return number1 + number2;
    }

    public int Multiply(int number1, int number2) {
        return DoSomeMathOperation(number1, number2, theMultiplicationIsDoneHere); // The method "theMultiplicationIsDoneHere" is what gets called.
    }

    private int theMultiplicationIsDoneHere(int number1, int number2) {
        return number1 * number2;
    }

    public int DoSomeMathOperation(int number1, int number2, Func<int, int, int> mathOperationFunc) {
        return mathOperationFunc(number1, number2); // This is where you call the method passed in above.
    }
} 
```

上面的代码，可以这样使用：

```
MathClass mathClass = new MathClass();

Console.WriteLine(mathClass.Add(5, 10)); // displays 15
Console.WriteLine(mathClass.Multiply(5, 5)); // displays 25 
```

想象一下，您需要一个减法方法。您可以通过 DoSomeMathOperation 函数创建一个，该函数需要 a `Func<int, int, int>`，这是一个“接受 2 个整数参数并返回一个整数”的函数。这将按如下方式实施：

```
Console.WriteLine(mathClass.DoSomeMathOperation(100, 50, (num1, num2) => num1 - num2)); // displays "50" 
```

在上面的代码中，您将数字 100 和 50 传递给 DoSomeMathOperation 方法，这两个参数被传递到`Func<int, int, int>`. 然后返回结果。

..希望这是有道理的..

# node.js - 使用 req.write() 和 req.end() 发布请求

> ID：12063902
> 
> 赞同：1
> 
> 时间：2012-08-21T22:20:39.577
> 
> 标签：node.js

我正在尝试`HTTP POST`使用[`request`](https://github.com/mikeal/request)从节点服务器到另一台服务器的模块。

我的代码看起来像，

```
var req = request.post({url: "http://foo.com/bar", headers: myHeaders});
...
...
req.write("Hello");
...
...
req.end("World"); 
```

我希望请求的主体`"Hello World"`在接收端，但我最终得到的只是`""`.

我在这里想念什么？

注意：代码中的省略号表示`write`和`end`可能在*不同的进程记号*中执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:26:41.903

在我看来，您好像错过了请求 http.clientRequest/http.serverRequest

如果您想通过请求向服务器发布帖子，您想要做的就是

```
request({ method:"post", url: "server.com", body:"Hello World"}, callback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T04:42:10.247

正如 3on 指出的那样，POST 请求的正确语法是

```
request({ method:"post", url: "server.com", body:"Hello World"}, callback); 
```

您还有一个方便的方法：

```
request.post({ url: "server.com", body:"Hello World"}, callback); 
```

但是从您的问题来看，您似乎想要流式传输：

```
var request = require('request');
var fs = require('fs');

var stream = fs.createWriteStream('file');

stream.write('Hello');
stream.write('World');

fs.createReadStream('file').pipe(request.post('http://server.com')); 
```

更新：

*   您可以以任何您喜欢的方式破坏您写入流的块，只要您有 RAM（4mb 是花生，但请记住 v8（节点后面的 javascript 引擎）的分配限制为 1.4GB 我认为） ;
*   正如您在上面的代码中看到的那样，您可能会看到您在管道`stream.bytesWritten`中“写入”了多少内容。`var stream = fs.createWriteStream('file')`我认为您无法知道管道的另一端有多少，但bitesWritten 应该给您一个相当不错的近似值。
*   您可以同时收听`data`和`end``stream``request.post('http://server.com')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:01:22.297

[`request`](https://github.com/mikeal/request)通过稍微修改模块，我设法使此处问题中编写的代码有效并按预期工作。

我注意到函数中`request`的 's[`main.js`](https://github.com/mikeal/request/blob/07135d542ea6c4578c26310ae0ffe6f2c6933b7d/main.js)中有一段代码（在[第 356 行](https://github.com/mikeal/request/blob/07135d542ea6c4578c26310ae0ffe6f2c6933b7d/main.js#L356)），[`Request.prototype.init`](https://github.com/mikeal/request/blob/07135d542ea6c4578c26310ae0ffe6f2c6933b7d/main.js#L106)

```
process.nextTick(function () {
    if (self._aborted) return

    if (self.body) {
      if (Array.isArray(self.body)) {
        self.body.forEach(function (part) {
          self.write(part)
        })
      } else {
        self.write(self.body)
      }
      self.end()
    } else if (self.requestBodyStream) {
      console.warn("options.requestBodyStream is deprecated, please pass the request object to stream.pipe.")
      self.requestBodyStream.pipe(self)
    } else if (!self.src) {
      if (self.method !== 'GET' && typeof self.method !== 'undefined') {
        self.headers['content-length'] = 0;
      }
      self.end();
    }
    self.ntick = true
  }) 
```

我现在通过`endOnTick`在创建请求时添加一个新选项 ( ) 来覆盖此函数调用。我的更改：[将*mikeal/master*与*GotEmB/master*](https://github.com/GotEmB/request/compare/master)进行比较。

# c++ - 您会选择什么平台进行黑莓开发？

> ID：12063903
> 
> 赞同：0
> 
> 时间：2012-08-21T22:20:52.103
> 
> 标签：c++, eclipse, blackberry, blackberry-jde

您会选择什么平台进行黑莓开发？

我可以看到几个选项，我有点不知道如何开始

到目前为止，我见过最流行的是Black JDE，java sdk

我不是在寻找任何花哨的东西，只是一些基于普通格式的应用程序。

你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T00:04:38.390

Eclipse IDE 是迄今为止最流行的 Blackberry 开发选择。

您是否想用 Java 编写代码是另一回事。您需要决定要为哪些黑莓设备开发，因为只有当前的黑莓智能手机使用 Java。Playbook 平板电脑不使用 Java，即将推出的 Blackberry 10 智能手机也不会使用 Java。他们改用 C++、WebWorks 和 Adob​​e AIR 的组合。

# ruby-on-rails - 如何在 Rails 中编写类似于 form_for 的方法

> ID：12063906
> 
> 赞同：1
> 
> 时间：2012-08-21T22:20:59.213
> 
> 标签：ruby-on-rails, view-helpers

对于我的应用程序，将非常粗糙的 HTML 生成构建成一组看起来像`form_for`. 这是一个示例，来自`_reports.html.erb`：

```
<%= reports_list do |rep| %>
  <%= rep.group_header("Reports by Question") do %>
    <%= rep.title("Response Distribution") %>
    <%= rep.description do %>
      lorem lorem lorem
      lorem lorem lorem
    <%= end %>
    <%= rep.title("Response Distribution") %>
    <%= rep.description do %>
      lorem lorem lorem
      lorem lorem lorem
    <%= end %>
  <%= end %>
<%= end %> 
```

这些调用中的每一个都会生成一些带有 CSS 和标签等的 HTML，这将完全掩盖这个报告列表列表的结构。

我尝试阅读`form_for`，但无法将其解开成我需要的模式。我可以尝试什么样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:56:18.123

您可以编写一个小的自定义 DSL（您可以改进并使代码更好）：

可以大大改进的小型 DSL：

```
class ReportHtmlMaker
  def initialize(output)
    @output = output
  end

  def content(text)
    @output << text.to_s
    nil
  end

  def translate_semantic_tag(tagname,attributes={})
    newline = "" # "\r\n" uncomment to add newlines
    case tagname.to_sym
    when :group_header
      tagname = "h1"
      attributes[:id] =  "report_group_header"
    when :title
      tagname = "h2"
      attributes[:class] =  "report_title"
    when :description
      tagname = "p"
    end

    @output << "<#{tagname}"
    attributes.each { |attr,value| @output << " #{attr}='#{value}'" }
    if block_given?
      @output << ">" << newline
      content = yield
      if content
        @output << content.to_s << newline
      end
      @output << "</#{tagname}>" << newline
    else
      @output << "/>" << newline
    end
    nil
  end
  alias method_missing translate_semantic_tag

  def self.generate(output, &block)
    ReportHtmlMaker.new(output).instance_eval(&block)
  end
end 
```

用法：

```
output = String.new
ReportHtmlMaker.generate(output) do  #or, use STDOUT to output to console
  group_header do
    title do
      "Response Distribution"
    end
    description do
      "lorem ipsum dolor mit"
    end
  end
end 
```

输出：

```
puts output # =>

<div id='report_group_header'>
  <h2 class='report_title'>Response Distribution</h2>
  <p class='report_description'>lorem ipsum dolor mit</p>
</h1> 
```

那是你要找的吗？

# c# - 在 SQL 列中查找字符串

> ID：12063919
> 
> 赞同：1
> 
> 时间：2012-08-21T22:22:10.260
> 
> 标签：c#, asp.net, sql

我有下一个代码（在堆栈溢出处找到）：

```
 string [] arr = {"One","Two","Three"};
   var target = "One";
   var results = Array.FindAll(arr, s => s.Equals(target)); 
```

此代码适用于在数组上搜索字符串...我需要在 sql 列中查找字符串。

假设我有表（“名称”），我想找到“Jhon”..我该怎么做？

*   我不需要连接字符串或整个方法，我知道这样做，但我想不出在 sql 表中搜索特定字符串的方法。

*   很高兴看到搜索版本：“Jh”，如果有的话，它会找到“Jhon”......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:40:51.127

如果目标是用户提供的，那么可以避免 sql 注入

```
string connectionString= ...
string target="jh";

using (var conn=new SqlConnection(connectionString)) {
conn.Open();
  using (var cmd=conn.CreateCommand()) {
    cmd.CommandText="select Name from Names where Name like '%'+@value+'%'";
    cmd.Parameters.AddWithValue("@value",target);

    using (var reader=cmd.ExecuteReader()) {
        while (reader.Read()) { 
            Console.WriteLine(reader[0]);
        }
    }

  }
} 
```

*   用于`like '%'+@value+'%'`包含
*   用于`like @value+'%'`开头
*   用于`like '%'+@value`结束

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:23:57.407

```
SELECT NAME
FROM NAMES
WHERE NAME='Jhon' 
```

这是你要找的吗？

如果只有一部分需要匹配：

```
...
WHERE NAME LIKE 'Jh%' 
```

[喜欢](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

# jquery-plugins - Grunt 中 PhantomJS 和 Qunit 测试之间的差异？

> ID：12063920
> 
> 赞同：1
> 
> 时间：2012-08-21T22:22:19.417
> 
> 标签：jquery-plugins, tdd, qunit, phantomjs, gruntjs

我正在用 Grunt 和 TDD 编写我的第一个 jQuery 插件，到目前为止它非常棒。我的所有测试都在浏览器中通过，除此之外的所有测试都在 phantomjs/qunit 中通过。

但我确定我只是在这里遗漏了一些东西。我有一个测试可以获取使用 jQuery 添加的边距的 css 值。

```
 test('adds appropriate styles to image', 1, function() {
    this.simpleString.adaminNumReplace();
    var newMargin = this.simpleString.find('> img:first').css('margin');
    strictEqual(newMargin, '0px', 'margin is equal to default');
  }); 
```

当我使用运行器在浏览器中进行测试时，测试通过了。当我目视检查检查员时。如果我 console.log 值。一切似乎都很好，并指向“0px”。

但在终端窗口中，测试失败：

```
$.fn.adaminNumReplace() - adds appropriate styles to image
Message: margin is equal to default
Actual: ""
Expected: "0px"
at file:///Applications/MAMP/htdocs/adamin_number_replace/libs/qunit/qunit.js:357 
```

phantomjs 是否有任何理由无法获取 css 边距值？它说实际是“”。但它绝对是'0px'。

任何见解或想法将不胜感激！

完整的仓库在这里，以防万一： [Github Repo](https://github.com/pensive612/Adamin-Number-Replace)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:35:09.527

好的。所以我能够弄清楚这一点。我不完全确定为什么。但是调用css快捷方式

```
.css('margin') 
```

在终端返回 nil。但在规范运行器中确实有效。

但是，调用具体：

```
.css('margin-top') 
```

实际上返回 '0px' 这就是我想要的。

所以它看起来像答案，以防其他人遇到这个问题：

使用“margin”或“padding”之类的快捷方式时，我无法返回 css 值。

使用“margin-top”、“padding-left”等细节...

希望对其他人有所帮助...

# apache-flex - 未正确接收 IndexChangedEvent 属性

> ID：12063924
> 
> 赞同：1
> 
> 时间：2012-08-21T22:22:54.477
> 
> 标签：apache-flex, actionscript, flash-builder

这个真的让我很困惑。我正在调度`IndexChangedEvent`我自己创建的一个，在调度之前设置`oldIndex`and`newIndex`属性。当在适当的处理程序中接收到事件时，`oldIndex`and`newIndex`值将作为 -1 接收，即使我已经验证它们（使用`Alert.show()`）在发送之前是正确的值。

我正在这样创建它：

```
var myEvent:IndexChangedEvent = new IndexChangedEvent(IndexChangedEvent.HEADER_SHIFT, false, false, null, 3, 2); 
```

这些`3,2`参数只是我用于调试的参数，它们应该（并且我已经验证它们确实如此）设置 IndexChangedEvent 的`oldIndex`和`newIndex`属性。然后我立即像这样发送事件：

```
dispatchEvent(myEvent); 
```

处理程序设置如下：

```
report.addEventListener(IndexChangedEvent.HEADER_SHIFT, shiftHandler); 
```

这是处理程序代码：

```
private function shiftHandler(event:IndexChangedEvent):void {
    if (event.oldIndex == -1 || event.newIndex == -1) {
        Alert.show("-1 index received");
    }
} 
```

为了帮助确保我没有发疯，这是我在调度事件之前的实际代码：

```
var myEvent:IndexChangedEvent = new IndexChangedEvent(IndexChangedEvent.HEADER_SHIFT, false, false, null, 3, 2);
Alert.show(myEvent.oldIndex + " : " + myEvent.newIndex);
dispatchEvent(myEvent); 
```

每次我移动标题（触发事件）时，我都会得到 2 个警报框，一个显示`3 : 2`，另一个显示`-1 index received`。这让我疯狂。有人可以让我知道为什么我的事件属性没有在调度中持续存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T23:51:38.643

只是一种预感，但对我来说，这听起来好像你是`IndexChangedEvent`从其他地方发送的，也许是你代码中的另一个监听器。如果您查看事件的[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/events/IndexChangedEvent.html)`oldIndex`，则和属性的默认值`newIndex`都是 -1，因此类似以下内容会导致您收到错误事件：

```
dispatchEvent(new IndexChangedEvent(IndexChangedEvent.HEADER_SHIFT)); 
```

您是否尝试过在您的代码库中搜索对 的引用`IndexChangedEvent.HEADER_SHIFT`？

# c++ - 具有向量向量的多种数据类型

> ID：12063925
> 
> 赞同：2
> 
> 时间：2012-08-21T22:22:57.037
> 
> 标签：c++, arrays, vector, types

我正在尝试找到一种方法来创建具有三种不同类型的 3 维向量，其结构如下：

```
Vector[long][int][double]; 
```

我发现了很多例子来展示如何创建一个具有单一数据类型的 3d 矢量，例如：

```
std::vector<vector<vector<int> > >; 
```

但我现在可以找到或弄清楚如何为向量分配多种数据类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T22:28:36.460

如果您希望同时使用所有三种类型，则应该使用结构。

```
struct Vector3d{
  long x;
  int y;
  double z;
};
//... or a union, if each entry only contains one type.
union NumberContainer
{
  long x;
  int y;
  double z;
};
std::vector<Vector3d> vector1;//Vector of three types
std::vector<NumberContainer> vector2;//Vector that can contain one of three types per entry
vector1[0].x=1;
vector1[0].y=2;
vector1[0].z=3;
//vector1 contains... x=1, y=2,z= 3
vector2[0].x=1;
vector2[0].y=2;
vector2[0].z=3;
//vector2 contains x=undefined, y=undefined, z=3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T22:28:11.943

从概念上讲`Vector[long][int][double]`没有任何意义。*您可以拥有某事物*的向量的向量。最后只有一种类型的*东西*。

迈出维度的一步。如果您只是想在向量中的每个元素包含 3 个值，您可以通过多种方式做到这一点。制作一个包含您的 3 个值的类型的向量：可能是您自己的结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T00:21:43.210

归根结底，您的数据结构必须包含*一些东西*，而这些东西只能是一种类型。现在，如果您想在向量的每个位置存储多种数据类型，您的“某物”本身可以是多种不同类型的结构。

如果您提供更多上下文会有所帮助

# django - 扩展 Django 用户模型和 makign 注册视图

> ID：12063926
> 
> 赞同：1
> 
> 时间：2012-08-21T22:22:59.480
> 
> 标签：django, django-models, django-views

我正在尝试`User`使用继承扩展 Django 中的模型。这是我的模型：

```
class Paciente (User):
    Carteira = models.CharField(max_length=50, 
        verbose_name="Num Carteira Plano Saude",unique=True)
    Convenio = models.ForeignKey(Operadora,'Descricao', related_name="convenio", 
        verbose_name="Convenio",unique=True)
    DDD = models.CharField(max_length=2, verbose_name="DDD")
    Telefone = models.CharField(max_length=10, verbose_name="Telefone") 
```

这是我的观点：

```
def paciente_register(request):
    PacienteFormSet = modelformset_factory(Paciente)

    if request.method == 'POST':
        form = PacienteFormSet(request.POST or None, 
            request.FILES or None, queryset=Paciente.objects.none(), 
            initial=[{
                'is_staff': False,
                'is_active': True, 
                'is_superuser': False, 
                'date_joined': datetime.now(), 
                'last_login': datetime.now()
            }]
        ) #incluir
        if form.is_valid():
            instance = form.save(commit=False) #pre-salva o registro
            for logvalue in instance:  # repoe os valores 'hidden' de log
                logvalue.is_staff = False
                logvalue.is_active = True
                logvalue.is_superuser = False
                logvalue.date_joined = datetime.now()
                logvalue.last_login = datetime.now()
            for reform in instance:  # salva no banco
                reform.save()
        else:
            return HttpResponseRedirect('/erro/')
    else:
        form = PacienteFormSet(queryset=Paciente.objects.none(), 
            initial=[{
                'is_staff':False,
                'is_active': True,
                'is_superuser': False,
                'date_joined': datetime.now(),
                'last_login': datetime.now()
            }]
        ) #incluir
    return render_to_response('register.html', {'form': form,}, context_instance=RequestContext(request)) 
```

最后但并非最不重要的是，我的模板：

```
<form enctype="multipart/form-data" method="POST" action="/paciente_register/" >{% csrf_token %}
{{ form.management_form }}
   {% for formy in form.forms %}
      {{ formy.username.label_tag}}:{{formy.username}}<br>
      {{ formy.password.label_tag}}:{{formy.password}}<br>
      {{ formy.Carteira.label_tag}}:{{formy.Carteira}}<br>
      {{ formy.Convenio.label_tag}}:{{formy.Convenio}}<br>
      {{ formy.DDD.label_tag}}:{{formy.DDD}}<br>
      {{ formy.Telefone.label_tag}}:{{formy.Telefone}}<br>
      {{formy.is_staff.as_hidden}}
      {{formy.is_active.as_hidden}}
      {{formy.is_superuser.as_hidden}} 
      {{formy.date_joined.as_hidden}}
      {{formy.last_login.as_hidden}}

    {% endfor %}   
    <input type="submit" name="submit" value="Salvar" />
</form> 
```

用户应该注册自己，但他只能编辑一些字段，因为我在视图和模板中设置的其他字段，我隐藏了它们。

但问题是我的表格没有验证。我做了很多研究，但互联网上只有几个例子使用继承来扩展`User`模型。而这并没有显示在应用程序中进行用户注册的视图。

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:42:09.817

一般来说，我认为模型继承工作正常，没有重大问题。关于 User 模型，我没有太多经验，但也许你的问题是因为你没有按照[Django](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)的建议去做？

万一你有兴趣，一些更有趣的帖子：h

*   [在 Django 中使用自定义字段扩展用户模型](https://stackoverflow.com/questions/44109/extending-the-user-model-with-custom-fields-in-django)
*   [http://www.b-list.org/weblog/2006/jun/06/django-tips-extending-user-model/,http://www.turnkeylinux.org/blog/django-profile](http://www.b-list.org/weblog/2006/jun/06/django-tips-extending-user-model/,http://www.turnkeylinux.org/blog/django-profile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:35:05.313

毕竟，问题出在眼前。我正在强制接收“date_joined”和“last_login”字段，`datetime.now()`因为我遵循 Django 管理模板。可悲的是，这不正确，每次我尝试添加用户时，它都会跳转到错误模板，这意味着表单没有正确填写。解决方案是让这些字段接收`date.today()`，现在它工作正常。

我认为这种模型继承仍然不是很好（Python 2.7 和 Django 1.3）。当您在模型中使用它时，请确定 Django 在您的数据库中创建了什么样的字段，这将为您省去很多麻烦。

# c++ - librocket、ogre 和 ios 的纹理问题

> ID：12063927
> 
> 赞同：2
> 
> 时间：2012-08-21T22:23:01.107
> 
> 标签：c++, ios, gamekit, ogre, librocket

我们正在尝试将 librocket [http://librocket.com/](http://librocket.com/)与 Ogre [http://www.ogre3d.org/](http://www.ogre3d.org/)一起使用。它们都是我在这个项目中使用的 gamekit [http://code.google.com/p/gamekit/的一部分。](http://code.google.com/p/gamekit/)

只要我不使用 librocket 加载图像，这一切都可以正常工作。一旦我这样做，iPad上的视口就不再是全屏的，而是在下角很小。像这样：http: [//uploads.undef.ch/machine/ipad.png](http://uploads.undef.ch/machine/ipad.png)

我无法在加载/渲染纹理和调整视口大小之间建立联系。而且我找不到 RenderInterface 有什么问题。[http://uploads.undef.ch/machine/RenderInterfaceOgre3D.cpp](http://uploads.undef.ch/machine/RenderInterfaceOgre3D.cpp)

是否有任何可能影响活动视口大小的 OpenGLES 命令？

这是加载图像并显示它的相关代码：

```
// Called by Rocket when a texture is required by the library.
bool RenderInterfaceOgre3D::LoadTexture(Rocket::Core::TextureHandle& texture_handle, Rocket::Core::Vector2i& texture_dimensions, const Rocket::Core::String& source)
{
    Ogre::TextureManager* texture_manager = Ogre::TextureManager::getSingletonPtr();
    Ogre::TexturePtr ogre_texture = texture_manager->getByName(Ogre::String(source.CString()));
    if (ogre_texture.isNull())
    {
        ogre_texture = texture_manager->load(Ogre::String(source.CString()),
                            DEFAULT_ROCKET_RESOURCE_GROUP,
                            Ogre::TEX_TYPE_2D,
                            0);
    }

    if (ogre_texture.isNull())
        return false;

    texture_dimensions.x = ogre_texture->getWidth();
    texture_dimensions.y = ogre_texture->getHeight();

    texture_handle = reinterpret_cast<Rocket::Core::TextureHandle>(new RocketOgre3DTexture(ogre_texture));
    return true;
}

// Called by Rocket when it wants to render geometry that it does not wish to optimise.
void RenderInterfaceOgre3D::RenderGeometry(Rocket::Core::Vertex* vertices, int num_vertices, int* indices, int num_indices, Rocket::Core::TextureHandle texture, const Rocket::Core::Vector2f& translation)
{
    // We've chosen to not support non-compiled geometry in the Ogre3D renderer.
    // But if you want, you can uncomment this code, so borders will be shown.
    /*
    Rocket::Core::CompiledGeometryHandle gh = CompileGeometry(vertices, num_vertices, indices, num_indices, texture);
    RenderCompiledGeometry(gh, translation);
    ReleaseCompiledGeometry(gh);
    */
}

// Called by Rocket when it wants to compile geometry it believes will be static for the forseeable future.
Rocket::Core::CompiledGeometryHandle RenderInterfaceOgre3D::CompileGeometry(Rocket::Core::Vertex* vertices, int num_vertices, int* indices, int num_indices, Rocket::Core::TextureHandle texture)
{
    RocketOgre3DCompiledGeometry* geometry = new RocketOgre3DCompiledGeometry();
    geometry->texture = texture == NULL ? NULL : (RocketOgre3DTexture*) texture;

    geometry->render_operation.vertexData = new Ogre::VertexData();
    geometry->render_operation.vertexData->vertexStart = 0;
    geometry->render_operation.vertexData->vertexCount = num_vertices;

    geometry->render_operation.indexData = new Ogre::IndexData();
    geometry->render_operation.indexData->indexStart = 0;
    geometry->render_operation.indexData->indexCount = num_indices;

    geometry->render_operation.operationType = Ogre::RenderOperation::OT_TRIANGLE_LIST;

    // Set up the vertex declaration.
    Ogre::VertexDeclaration* vertex_declaration = geometry->render_operation.vertexData->vertexDeclaration;
    size_t element_offset = 0;
    vertex_declaration->addElement(0, element_offset, Ogre::VET_FLOAT3, Ogre::VES_POSITION);
    element_offset += Ogre::VertexElement::getTypeSize(Ogre::VET_FLOAT3);
    vertex_declaration->addElement(0, element_offset, Ogre::VET_COLOUR, Ogre::VES_DIFFUSE);
    element_offset += Ogre::VertexElement::getTypeSize(Ogre::VET_COLOUR);
    vertex_declaration->addElement(0, element_offset, Ogre::VET_FLOAT2, Ogre::VES_TEXTURE_COORDINATES);

#if GK_PLATFORM == GK_PLATFORM_APPLE_IOS
    // Create the vertex buffer.
    Ogre::HardwareVertexBufferSharedPtr vertex_buffer = Ogre::HardwareBufferManager::getSingleton().createVertexBuffer(vertex_declaration->getVertexSize(0), num_vertices, Ogre::HardwareBuffer::HBU_DYNAMIC_WRITE_ONLY_DISCARDABLE,true);
    geometry->render_operation.vertexData->vertexBufferBinding->setBinding(0, vertex_buffer);

    // Fill the vertex buffer.
    RocketOgre3DVertex* ogre_vertices = (RocketOgre3DVertex*) vertex_buffer->lock(0, vertex_buffer->getSizeInBytes(), Ogre::HardwareBuffer::HBL_DISCARD);
#else
    Ogre::HardwareVertexBufferSharedPtr vertex_buffer = Ogre::HardwareBufferManager::getSingleton().createVertexBuffer(vertex_declaration->getVertexSize(0), num_vertices, Ogre::HardwareBuffer::HBU_STATIC_WRITE_ONLY);
    geometry->render_operation.vertexData->vertexBufferBinding->setBinding(0, vertex_buffer);

    // Fill the vertex buffer.
    RocketOgre3DVertex* ogre_vertices = (RocketOgre3DVertex*) vertex_buffer->lock(0, vertex_buffer->getSizeInBytes(), Ogre::HardwareBuffer::HBL_NORMAL);
#endif

    for (int i = 0; i < num_vertices; ++i)
    {
        ogre_vertices[i].x = vertices[i].position.x;
        ogre_vertices[i].y = vertices[i].position.y;
        ogre_vertices[i].z = 0;

        Ogre::ColourValue diffuse(vertices[i].colour.red / 255.0f, vertices[i].colour.green / 255.0f, vertices[i].colour.blue / 255.0f, vertices[i].colour.alpha / 255.0f);
        render_system->convertColourValue(diffuse, &ogre_vertices[i].diffuse);

        ogre_vertices[i].u = vertices[i].tex_coord[0];
        ogre_vertices[i].v = vertices[i].tex_coord[1];
    }
    vertex_buffer->unlock();

#if GK_PLATFORM == GK_PLATFORM_APPLE_IOS
    // Create the index buffer.
    Ogre::HardwareIndexBufferSharedPtr index_buffer = Ogre::HardwareBufferManager::getSingleton().createIndexBuffer(Ogre::HardwareIndexBuffer::IT_16BIT, num_indices, Ogre::HardwareBuffer::HBU_STATIC_WRITE_ONLY);
    geometry->render_operation.indexData->indexBuffer = index_buffer;
    geometry->render_operation.useIndexes = true;
#else
    Ogre::HardwareIndexBufferSharedPtr index_buffer = Ogre::HardwareBufferManager::getSingleton().createIndexBuffer(Ogre::HardwareIndexBuffer::IT_32BIT, num_indices, Ogre::HardwareBuffer::HBU_STATIC_WRITE_ONLY);    
    geometry->render_operation.indexData->indexBuffer = index_buffer;
    geometry->render_operation.useIndexes = true;
#endif

    // Fill the index buffer.
    unsigned short * ogre_indices = (unsigned short*)index_buffer->lock(0, index_buffer->getSizeInBytes(), Ogre::HardwareBuffer::HBL_NORMAL);
#if GK_PLATFORM == GK_PLATFORM_APPLE_IOS    
    //unsigned short short_indices[num_indices];
    for(int i=0;i<num_indices;i++)
        ogre_indices[i] = indices[i];
    //memcpy(ogre_indices, short_indices, sizeof(unsigned short) * num_indices);
#else
    memcpy(ogre_indices, indices, sizeof(unsigned int) * num_indices);
#endif
    index_buffer->unlock();

    return reinterpret_cast<Rocket::Core::CompiledGeometryHandle>(geometry);
}

// Called by Rocket when it wants to render application-compiled geometry.
void RenderInterfaceOgre3D::RenderCompiledGeometry(Rocket::Core::CompiledGeometryHandle geometry, const Rocket::Core::Vector2f& translation)
{
    Ogre::Matrix4 transform;
    transform.makeTrans(translation.x, translation.y, 0);
    render_system->_setWorldMatrix(transform);

    render_system = Ogre::Root::getSingleton().getRenderSystem();
    RocketOgre3DCompiledGeometry* ogre3d_geometry = (RocketOgre3DCompiledGeometry*) geometry;

    if (ogre3d_geometry->texture != NULL)
    {
        render_system->_setTexture(0, true, ogre3d_geometry->texture->texture);

        // Ogre can change the blending modes when textures are disabled - so in case the last render had no texture,
        // we need to re-specify them.
        render_system->_setTextureBlendMode(0, colour_blend_mode);
        render_system->_setTextureBlendMode(0, alpha_blend_mode);
    }
    else
        render_system->_disableTextureUnit(0);

    render_system->_render(ogre3d_geometry->render_operation);
} 
```

# android - 在 canvas.drawBitmap 中使用 dpi 而不是像素

> ID：12063928
> 
> 赞同：3
> 
> 时间：2012-08-21T22:23:16.330
> 
> 标签：android, canvas, pixels, dpi

我已阅读“屏幕支持 API 指南”（http://developer.android.com/guide/practices/screens_support.html）和更多资源，但我无法理解 dpi 的工作原理。

我正在开发一款游戏，但我没有使用任何布局（我将使用 canvas.drawbitmap 之类的函数自己绘制）。但是当我使用 Canvas.Drawbitmap 函数时，我需要指定要绘制图像的屏幕像素。

所以我现在使用固定分辨率（1280x800），我正在使用 drawable-nodpi 文件夹，如果手机屏幕更宽或更窄，我稍后会调整画布。问题在于，当分辨率不是原生分辨率（1280x800）时，图像看起来很糟糕。

我能做些什么来解决这个问题？3天的时间阅读和阅读，但所有的解释和示例都与布局、九个补丁等有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T23:55:24.633

获取正在使用的设备的密度，并将该密度乘以您选择的某个基本尺寸（您实际上希望绘制多大或多小？）

例子：

```
float objectToDrawHeight = 50; //Specified in plain pixels
float objectToDrawWidth = 50; //Specified in plain pixels

float density = getResources().getDisplayMetrics().density;
objectToDrawHeight *= density;
objectToDrawWidth *= density;

//Draw your object using the new (scaled) height and width
//If you are worried about how the object will look on different aspect ratio devices
//  you can get the screen dimensions and use that ratio as a multiplier
//  just as you did with density

Display display = ((Activity)context).getWindowManager().getDefaultDisplay();
float screenDimensionX = display.getWidth();
float screenDimensionY = display.getHeight(); 
```

使用密度和可能的屏幕尺寸应该允许您绘制任何内容并保持正确缩放。使用画布时，假设一切都以像素为单位，并且您必须进行 dpi 转换。

# objective-c - UIImageView 裁剪在设备上显示错误

> ID：12063929
> 
> 赞同：0
> 
> 时间：2012-08-21T22:23:43.920
> 
> 标签：objective-c, ios, xcode, uiimageview, uiimage

我有一张图片，我正在裁剪其中的一部分。问题是在模拟器中它显示正确，但在设备上它被放大了很多。这有很大的不同。我究竟做错了什么？（第一张图片来自模拟器，第二张来自 iphone 设备）

```
// create bounds and initialise default image 
CGRect imageSizeRectangle = CGRectMake(0, 0, 300, 300);
UIImage *df_Image =  [UIImage imageNamed:@"no_selection.png"];
self.imageView = [[UIImageView alloc] initWithFrame:imageSizeRectangle];
[imageView setImage:df_Image];
[self.view addSubview:imageView];

//crop image 
CGRect test = CGRectMake(0, 0, 150,150);
CGImageRef imageRef = CGImageCreateWithImageInRect([photo.image CGImage], test);
UIImage *croppedImage = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef); 
```

![这就是它在模拟器上的显示方式（正确）](../Images/8936658231edd9f2874422dc6511d8da.png)

![它在设备上的外观](../Images/f8f64d0130a43c8c4e608c033b3a6ed8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:00:52.880

这里的问题是视网膜设备的大小是普通设备的 2 倍。您可以使用以下方法检查设备是否为视网膜；

```
+(BOOL)iPhoneRetina{
return ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] && ([UIScreen mainScreen].scale == 2.0))?1:0;
} 
```

`BOOL`并根据返回的值增加/减少矩形的大小。

Note*`displayLinkWithTarget:selector:`只是一种随机方法，适用于 iOS 4.0+，但不适用于以前的版本。你不需要太在意它。

编辑*

```
CGRect rect;
if([self iPhoneRetina]){rect = CGRectMake(0,0,300,300);}//Retina
else{rect = CGRectMake(0,0,150,150);}//Non retina

//Then the rest of your code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T07:32:16.360

如果你想简化你的代码，你可以使用

```
CGRectMake(0,0,[UIScreen mainScreen].scale*150,[UIScreen mainScreen].scale*150) 
```

# android - 我可以将 Android 4 HttpResponseCache 与基于 WebView 的应用程序一起使用吗？

> ID：12063937
> 
> 赞同：4
> 
> 时间：2012-08-21T22:24:11.123
> 
> 标签：android, caching, webview

我正在开发一个基于 WebView 的应用程序，该应用程序目前在 v3.1 平板电脑上运行。我似乎无法让 WebView 缓存 css、js 和图像（或使用缓存）。该应用程序似乎总是连接到服务器，它返回一个 304 响应（HTML 页面是动态的，总是需要使用服务器）。

我想知道 HttpResponseCache（在 v4 下可用）是否与 WebViewClient 一起使用，或者 WebView 是否应该已经管理 HTTP 资源的缓存。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:37:59.953

经过一番测试，我发现Webkit的Android层没有使用URLConnection进行HTTP请求，这意味着HttpResponseCache无法像其他原生场景一样自动挂接到WebView。

所以我尝试了另一种方法：使用自定义 WebViewClient 来桥接 WebView 和 ResponseCache：

```
webview.setWebViewClient(new WebViewClient() {
    @Override public WebResourceResponse shouldInterceptRequest(final WebView view, final String url) {
        if (! (url.startsWith("http://") || url.startsWith("https://")) || ResponseCache.getDefault() == null) return null;
        try {
            final HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();
            connection.connect();
            final String content_type = connection.getContentType();
            final String separator = "; charset=";
            final int pos = content_type.indexOf(separator);    // TODO: Better protocol compatibility
            final String mime_type = pos >= 0 ? content_type.substring(0, pos) : content_type;
            final String encoding = pos >= 0 ? content_type.substring(pos + separator.length()) : "UTF-8";
            return new WebResourceResponse(mime_type, encoding, connection.getInputStream());
        } catch (final MalformedURLException e) {
            e.printStackTrace(); return null;
        } catch (final IOException e) {
            e.printStackTrace(); return null;
        }
    }
}); 
```

当你需要离线访问缓存的资源时，只需添加一个缓存头：

```
connection.addRequestProperty("Cache-Control", "max-stale=" + stale_tolerance); 
```

顺便说一句，要使这种方法正常工作，您需要正确设置 Web 服务器以响应启用缓存的“Cache-Control”标头。

# java - 使用 JavaZoom JLayer 更改播放速度

> ID：12063941
> 
> 赞同：1
> 
> 时间：2012-08-21T22:24:29.980
> 
> 标签：java, javasound, audio, jlayer

我正在使用 JLayer 声音框架来播放具有基本功能（搜索、播放/暂停/停止）的 wav 文件，我现在还需要允许更改播放速度。

1.  有谁知道 JLayer 是否允许此功能（我到处都找过，但找不到），我该如何实现它？
2.  如果 JLayer 不支持它，我该如何实现呢？
3.  任何人都可以指导我查看任何源代码、文档或更改播放速度背后的理论方面吗？

# jquery-plugins - jQuery 插件、范围和将创建的元素绑定到“更改”事件

> ID：12063943
> 
> 赞同：0
> 
> 时间：2012-08-21T22:24:52.840
> 
> 标签：jquery-plugins, scope, jquery

所以，我正在编写我的第一个插件。我正在使用[jQuery 网站上的建议](http://docs.jquery.com/Plugins/Authoring)，所以我的插件设置如下所示：

```
(function( $ ){

  var methods = {
    init : function( options ) {
      var $this = $(this);
      // do some code.

      // Add an element
      $this.append('<select id="test"><option value="yes">Yes</option>' +
                   '<option value="no">No</option></select>');

      // Bind the change handler (chose '.on' after reading the documentation for '.delegate')
      $this.on('change', '#test', methods['handler'].call($this, $('#test').val()));

    },
    handler : function( content ) { 
      alert ('You chose: ' + content);
    }
  };

  $.fn.testbed = function( method ) {

    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist' );
    }    

  };

})( jQuery ); 
```

我知道处理程序本身正在工作，因为我可以替代

```
function(){ alert ("You did it!");} 
```

对于函数调用，它可以工作。

但是，我现在调用函数的方式不起作用。这是我从其他方法中调用其他函数的方式，但它不适用于处理程序。

所以，我的问题是：（1）我如何让它调用函数？(2) 这是设置处理程序的最佳位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:53:35.283

一个 id 在页面中应该是唯一的。拥有多个具有相同 id 的元素会给你一个与你尝试访问它时所想的不同的元素。根本不使用 id，`this`在回调中使用以获取正确的元素。

当您为每个事件创建一个委托时，没有理由创建一个委托。直接在选择元素上绑定事件。

事件的处理程序应该是一个函数，而不是函数调用的结果。

```
init : function( options ) {

  // Add an element
  this.append('<select><option value="yes">Yes</option>' +
               '<option value="no">No</option></select>');

  // Bind the change handler
  $('select', this).on('change', function() {
    methods['handler']($(this).val());
  });

}, 
```

# cocos2d-iphone - arc 启用 cocos2d - 旧场景在 replaceScene 之后存在

> ID：12063944
> 
> 赞同：1
> 
> 时间：2012-08-21T22:24:54.413
> 
> 标签：cocos2d-iphone, automatic-ref-counting, scene

我正在尝试用 cocos2d 实现游戏。我根据本教程的说明启用了 arc。 [http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)

在用主菜单场景替换游戏场景后，我意识到了一个奇怪的行为，我无法找出问题所在。更换后，新场景出现并按我预期工作，但游戏场景（旧场景）仍然反应触摸。我认为当我更换场景时，旧场景应该完全移除，但它继续生活在新场景下。

部分相关代码如下：

单身人士：

```
+(void) go: (CCLayer *) layer{
    CCDirector *director = [CCDirector sharedDirector];
    CCScene *newScene = [Singelton wrap:layer];
    if ([director runningScene]) {
        [director replaceScene: [CCTransitionFlipX transitionWithDuration:0.5 scene:newScene]];
    } else {
        [director pushScene:newScene];
    }
}

+(CCScene *) wrap: (CCLayer *) layer{
    CCScene *newScene = [CCScene node];
    [newScene addChild: layer];
    return newScene;
}

+(void) mainMenu
{
    CCLayer *layer = [MainMenu node];
    [Singleton go:layer];
} 
```

当我需要进入主菜单场景时，我如下调用单例类

```
[Singleton mainMenu] 
```

出现菜单场景后如何杀死游戏场景？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:10:09.433

辛格尔顿是做什么的？我怀疑这可能是原因，在替换场景时/之后保留场景/图层或任何其他节点的引用。

# java - 连接主报表和子报表 - 将对象列表传递给子报表

> ID：12063947
> 
> 赞同：3
> 
> 时间：2012-08-21T22:24:58.963
> 
> 标签：java, jasper-reports, ireport

我正在使用*iReport 4.5.1*，但在连接主报表和子报表时遇到了问题。

我有两个对象：

*   **Account** (accountID, date, listOfParagraphs) - 所有字段都在主报告中定义；
*   **段落**（帐户、段落编号、某些对象）- 子报表 ( *stavke.jrxml* ) 中定义的所有字段。

listOfParagraphs被定义为（***对象******`java.util.List<Paragraph>`***列表），我想将它传递给子报表。

我在主报告中定义了这个子报告的属性：

*   **子报表表达式**：*stavke.jasper*
*   **表达式类**：*java.lang.String*
*   **连接类型**：*使用数据源表达式*
*   **数据源表达式**：

```
new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{listOfParagraphs}) 
```

我收到此错误：

```
net.sf.jasperreports.engine.JRException: Error loading object from file : stavke.jasper
at net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:101)
at net.sf.jasperreports.engine.util.JRLoader.loadObjectFromLocation(JRLoader.java:253)
at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateReport(JRFillSubreport.java:301)
    ..... 
```

我已经很努力地解决了这个问题，但我无法解决它。

有人能帮助我吗？

@Vyccus（已编辑）

我改变了一些路径：

```
<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
    <defaultValueExpression><![CDATA["C:\\Documents and Settings\\D\\My Documents\\NetBeansProjects\\Project\\subreport\\"]]></defaultValueExpression>
</parameter> 
```

和

```
<subreport>
            <reportElement x="0" y="42" width="555" height="100"/>
            <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{ls})]]></dataSourceExpression>
            <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "stavke.jasper"]]></subreportExpression>
        </subreport> 
```

现在我明白了：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at java.lang.Class.isAssignableFrom(Native Method)
at net.sf.jasperreports.engine.fill.JRFillTextField.getFormat(JRFillTextField.java:706)
at net.sf.jasperreports.engine.fill.JRFillTextField.evaluateText(JRFillTextField.java:394)
at net.sf.jasperreports.engine.fill.JRFillTextField.evaluate(JRFillTextField.java:368)
at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:258)
at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:499)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2036)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:760)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:270)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:128)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:946)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:864)
at net.sf.jasperreports.engine.fill.JRFillSubreport.fillSubreport(JRFillSubreport.java:613)
at net.sf.jasperreports.engine.fill.JRSubreportRunnable.run(JRSubreportRunnable.java:59)
at net.sf.jasperreports.engine.fill.JRThreadSubreportRunner.run(JRThreadSubreportRunner.java:205)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:40:35.397

Java 代码：

```
Map<String, Object> parameters = new HashMap<String, Object>();

//if you want this to be compiled in runtime

JasperReport jasperReport = JasperCompileManager.compileReport(your JRXMLReport path file here);
JasperReport subReport = JasperCompileManager.compileReport(your JRXMLSubReport path file here);

//you can notice that there're a lot of overloaded mathods to compile it, you can choose
//what is better in your case

//if you want to use the complied file *.jasper
JasperReport jasperReport = (JasperReport)JRLoader.loadObject(new File("filenameReport.jasper"));

JasperReport subReport = (JasperReport)JRLoader.loadObject(new File("filenameSubReport.jasper"));

//Then you add your subReport in your parameter Map
parameters.put("SUBREPORT_JASPER_FILE", subReport);

JasperFillManager.fillReport(jasperReport, parameters,
                new JRBeanCollectionDataSource(yourList)); 
```

JRXML：

```
<parameter name="SUBREPORT_JASPER_FILE" class="java.lang.Object"/> // you can also create this using the option in your iReport

<subreport>
    <reportElement uuid="c62c7896-f37a-4e76-a4cb-70e2545947da" style="Style" x="279" y="0" width="296" height="15"/>
       <dataSourceExpression>
            <![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{yourSubList})]]>  
       </dataSourceExpression>
            <subreportExpression><![CDATA[$P{SUBREPORT_JASPER_FILE}]]></subreportExpression>
</subreport> 
```

我认为这样你就可以完成你想做的事情

# c# - 抛出 PrincipalExistsException，但 Principal 实际上并不存在

> ID：12063950
> 
> 赞同：1
> 
> 时间：2012-08-21T22:25:13.037
> 
> 标签：c#, active-directory, windows-server-2008-r2, directoryservices

给定以下代码，为什么`PrincipalExistsException`当我知道主体不存在且实际上并未创建的事实时会得到一个？

```
public UserPrincipal Add(
    string givenName,
    string surname,
    string domain) {
    UserPrincipal principal = new UserPrincipal(context: base.Context) {
        Enabled = true
    };

    if (!String.IsNullOrEmpty(givenName) && !String.IsNullOrEmpty(surname) && !String.IsNullOrEmpty(domain)) {
        this.RenameInternal(principal: principal, givenName: givenName, surname: surname, domain: domain);

        principal.Save();
    };

    return principal;
} 
```

我可以确认该`RenameInternal()`方法工作得很好，因为它被一个名为`Rename()`. 因此，对象的创建和/或保存方式肯定存在问题，但我不知道如何找出错误所在。这看起来很简单的代码......

查看域控制器（Windows Server 2008 R2）我在任何地方都找不到“新”创建主体，所以我假设它没有被创建并且异常以某种方式对我撒谎。

我很感激这方面的任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T01:54:18.117

好的，我想通了。SamAccountName 是导致抛出异常的原因（感谢 Microsoft 提供的有用的错误消息）。无论如何，这是问题所在，因为它试图将其设置为已经存在的名称。我通过在中间名首字母中折腾来修改它，它工作正常，或者至少直到我得到具有相同首字母、中间首字母和姓氏的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:29:55.607

我唯一能想到的就是以下

无论您的应用程序在何种 ID 下运行，都需要对 AD 具有“写入”权限。几乎任何 ID 都可以查询 AD，但只有明确授予权限的 ID 才能写入它。

# jquery - 拉斐尔图在选项卡式ajax页面上加载不当

> ID：12063952
> 
> 赞同：1
> 
> 时间：2012-08-21T22:25:34.837
> 
> 标签：jquery, raphael, graphael, jquery-bbq

你好，我在我的网站上使用拉斐尔线图进行统计。这些图表位于我网站的仪表板中，仪表板是 jquery bbq 选项卡。当您第一次导航到图表时，整个图表会被扭曲，直到您刷新页面，它才会看起来正确。不确定是什么真正导致了这种情况，我认为它与加载方式有关，因为如果您喜欢直接进入报告选项卡，那么图表将正确显示。

我有一个访客帐户供人们签名并查看发生了什么。
[http://nichepage.com](http://nichepage.com)
用户：访客
密码：欢迎

1.  登录并转到此网址[http://www.nichepage.com/dashboard](http://www.nichepage.com/dashboard)
2.  单击最后一个选项卡“利基报告”，您会注意到图表未正确显示。
3.  刷新页面，图表将正确显示
4.  尝试直接导航到报告选项卡[http://www.nichepage.com/dashboard/#p=r](http://www.nichepage.com/dashboard/#p=r)

# c# - 使用 Linq 和 EF 检查几行和几列的最佳实践

> ID：12063954
> 
> 赞同：0
> 
> 时间：2012-08-21T22:26:07.390
> 
> 标签：c#, sql-server, entity-framework

我在 MSSQL 中有一张表：

```
int Id
int Col
int Row 
```

我有一个瓷砖地图，上面有一些物体。每个对象的位置是**左上角的瓦片**（行号和列号）。对象可以占用很少的瓷砖。

例如，我有一个大小**为 3х3**的对象。此图块的位置是**第 5 行**和第**10 列**。

```
 IEnumerable<int> checkRows = Enumerable.Range(5, 3); // 5, 6, 7
 IEnumerable<int> checkCol = Enumerable.Range(10, 3); // 10, 11, 12 
```

在数据库中添加新对象之前，我需要检查该区域中的现有对象：

```
5:10 | 5:11 | 5:12
6:10 | 6:11 | 6:12
7:10 | 7:11 | 7:12 
```

如果某个对象在 7:12 的位置，我会在找到它之前查询数据库太多。

对于我用过的一块瓷砖：

```
 db.TileSet.Any(x => x.Col == col & x.Row == row) 
```

在这种情况下，使用 Linq 避免 CPU 高负载的最佳解决方案或做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:32:27.370

```
foreach(var tile in TilesToCheck)
{
    if(db.TileSet.Any(x => x.Col == tile.Col && x.Row == tile.Row))
    {
      // TODO: break the Save operation or whatever...
    }
} 
```

嗯，你处理支票的方式没问题。这是执行此操作的标准方法。`LINQ`并将`Entity Framework`生成优化查询并将其发送到数据库。因此，繁重的工作将在数据库方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:37:18.850

与其检查确切的坐标，不如查看一个范围：

```
db.TileSet.Any(x =>
  x.Col >= col && x.Col <= col + 2 &&
  x.Row >= row && x.Row <= row + 2
) 
```

# oracle - Oracle 中的分页和锁定

> ID：12063965
> 
> 赞同：2
> 
> 时间：2012-08-21T22:27:21.780
> 
> 标签：oracle

我已经看到很多关于在 Oracle 中使用 rownum 或排名分析函数进行分页的答案。但是，我特别想对这些分页结果应用锁定。问题在于，由于 Oracle 中的大多数分页黑客都使用内联视图，因此应用`for update`是非法的。

那么有没有办法同时执行两者，最好是在同一个 SQL 语句中？

我们现在尝试的一个例子......

```
select * 
from (
    select ...
    from t
    where ...
    order by ...
)
where rownum <= ? 
for update 
```

我们得到的错误是`ORA-02014:, cannot select FOR UPDATE from view with DISTINCT, GROUP BY, etc.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T05:43:17.627

这是您可以执行的操作的示例

```
SQL> create table t as select object_id, owner, object_name, created from all_objects where rownum <= 100;

Table created.

SQL> 
SQL> select *
  2    from t
  3   where rowid in
  4         (select rid
  5            from (select rowid rid, row_number() over(order by object_id) rn from t)
  6           where rn between 11 and 20)
  7     for update;

OBJECT_ID OWNER OBJECT_NAM CREATED
--------- ----- ---------- ---------
       20 SYS   ICOL$      06-MAR-11
       15 SYS   UNDO$      06-MAR-11
       17 SYS   FILE$      06-MAR-11
       13 SYS   UET$       06-MAR-11
       19 SYS   IND$       06-MAR-11
       14 SYS   SEG$       06-MAR-11
       21 SYS   COL$       06-MAR-11
       16 SYS   TS$        06-MAR-11
       12 SYS   FET$       06-MAR-11
       18 SYS   OBJ$       06-MAR-11

10 rows selected. 
```

# python - 使用 codecs.open() 的 Unicode 解码错误

> ID：12063967
> 
> 赞同：0
> 
> 时间：2012-08-21T22:27:29.180
> 
> 标签：python, encoding, utf-8, character-encoding

我遇到了如下字符编码问题：

```
rating = 'Barntillåten'
new_file = codecs.open(os.path.join(folder, "metadata.xml"), 'w', 'utf-8')
new_file.write(

"""<?xml version="1.0" encoding="UTF-8"?>
   <ratings>
        <rating system="%s">%s</rating>
   </ratings>""" % (values['rating_system'], rating)) 
```

我得到的错误是：

```
 File "./assetshare.py", line 314, in write_file
    </ratings>""" % (values['rating_system'], rating)) 
```

我知道编码错误与 相关`Barntillåten`，因为如果我将该词替换为`test`，则该函数可以正常工作。

为什么会发生这种编码错误，我需要做些什么来修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:31:36.110

`rating`必须是 Unicode 字符串才能包含 Unicode 代码点。

```
rating = u'Barntillåten' 
```

否则，在 Python 2 中，非 Unicode 字符串`'Barntillåten'`包含字节（使用[任何源编码](http://www.python.org/peps/pep-0263.html)进行编码），而不是代码点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T22:32:27.397

在 Python 2 中，`codecs.open`期望读取和写入`unicode`对象。你传递给它一个`str`.

解决方法是确保您传递的数据是`unicode`：

```
new_file.write((

"""<?xml version="1.0" encoding="UTF-8"?>
"""<ratings>
        <rating system="%s">%s</rating>
   </ratings>""" % (values['rating_system'], rating)
).decode('utf-8')) 
```

如果您使用`unicode`文字 ( `u"..."`)，那么 Python 将尝试确保所有数据都是`unicode`. 在这里就足够了`rating = u'Barntillåten'`：

```
rating = u'Barntillåten'
new_file = codecs.open(os.path.join(folder, "metadata.xml"), 'w', 'utf-8')
new_file.write(

"""<?xml version="1.0" encoding="UTF-8"?>
"""<ratings>
        <rating system="%s">%s</rating>
   </ratings>""" % (values['rating_system'], rating)) 
```

您可以将对象写入`codecs.open`文件`str`，但`str`前提是 以默认编码进行编码，这意味着为了安全起见，只有在`str`纯 ASCII 时才是安全的。默认编码是并且应该保留为 ASCII；请参阅[更改 Python 的默认编码？](https://stackoverflow.com/questions/2276200/changing-default-encoding-of-python)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T22:31:56.830

您需要使用`unicode`文字。

```
u'...'
u"..."
u'''......'''
u"""......""" 
```

# wpf - 使用可观察集合实现 WPF 列表框的最简单方法

> ID：12063968
> 
> 赞同：0
> 
> 时间：2012-08-21T22:27:36.037
> 
> 标签：wpf, listbox, observablecollection

我看到很多关于这个主题的问题，而在我有限的 C# 和 WPF 经验中，答案过于复杂。我不敢相信微软让（对我来说）实现绑定到在运行时更改的列表框的集合变得如此困难。

这是交易：我有一个包含项目的列表框（实际上是电子邮件列表）。发生的情况是，当新电子邮件到达或从源文件夹中删除时，我需要刷新列表框。听起来很容易，但无论如何操作 Observable Collection 都会导致可怕的“这种类型的 CollectionView 不支持从与 Dispatcher 线程不同的线程对其 SourceCollection 的更改。”

所以暂时不要介意通过编写调度程序来规避这个问题。是否有一些“正常”的方式来操作不是来自另一个线程的集合？——这就是我困惑的地方。我还能在哪里修改集合？如果这是预期的，我很乐意将我的代码放在那里。

我当前的实现——很可能很糟糕——是将Folder.Items 事件处理程序放在集合类本身中，然后从集合（即它本身）中添加/删除电子邮件。这不起作用，我真的不明白如何做到这一点。

* * *

好的，我整理了这个代码示例。这不是我的应用程序，但它几乎代表了我（错误地）处理事情的方式......这将引发“无法更新源收集线程错误”。该示例分为 3 个部分，首先是 XAML 标记，然后是 Main 类和方法以及 ObservableCollection 类。

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="WpfApplication1.MainWindow"
    x:Name="Window"
    Title="MainWindow"
    Width="640" Height="480">

    <Grid x:Name="LayoutRoot" >
        <Border BorderBrush="#FF404020" BorderThickness="5" Margin="0" Background="#FFFFFFC0" CornerRadius="25">
            <ListBox x:Name="lbList" Margin="50" FontSize="21.333" DisplayMemberPath="Subject"/>
        </Border>
    </Grid>
</Window>

using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Runtime.InteropServices;
using Microsoft.Office.Interop.Outlook;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MailList ml = new MailList();

        public MainWindow()
        {
            this.InitializeComponent();

            Microsoft.Office.Interop.Outlook.Application olApp = Marshal.GetActiveObject("Outlook.Application") as Microsoft.Office.Interop.Outlook.Application;

            Folder f = (Folder)olApp.Session.PickFolder();  // User picks MAPI Folder
            f.Items.ItemAdd += new ItemsEvents_ItemAddEventHandler(this.UpdateListBox);     //Folder.Item add event, calls  UpdateListBox
            foreach (object o in f.Items)
            {
                if (o is MailItem)
                {
                    ml.Add((MailItem)o);    //Add Mailitems to ml collection
                }
            }

            Binding b = new Binding();      //create binding for ListBox
            b.Mode = BindingMode.OneWay;
            lbList.DataContext = ml;
            lbList.SetBinding(ListBox.ItemsSourceProperty, b);
        }

        public void UpdateListBox(object o)     //Add new MailItem to ml collection
        {
            if (o is MailItem)
            {
                ml.Add((MailItem)o);
            }
        }

    }
}

using System;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using Microsoft.Office.Interop.Outlook;

namespace WpfApplication1
{
    public class MailList : ObservableCollection<MailItem>
    {
        public MailList()
            : base()
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:31:34.110

将集合更改分派到 UI 线程应该是什么问题？据我所知，这是通常的方式。

# c++ - sqlite 报告工具

> ID：12063969
> 
> 赞同：0
> 
> 时间：2012-08-21T22:27:39.120
> 
> 标签：c++, sqlite, reporting

你知道sqlite的任何报告生成器吗？

我对水晶报告之类的东西很感兴趣。

我用 C++ 为 windows 开发，我很欣赏可能依赖较少的组件。

即使是编写 pdf 文件的控制台实用程序也可以满足我的需要。

我不喜欢使用 ODBC 或 OLE-DB 或 ADO ...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:48:56.460

You could try eXaro: [http://exaro.sourceforge.net/](http://exaro.sourceforge.net/) It's similar to JasperReports or Crystal Reports, but requires QT. It supports SQLite.

# php - 将 128 位序列分解为位

> ID：12063970
> 
> 赞同：0
> 
> 时间：2012-08-21T22:27:53.720
> 
> 标签：php, binary, bit, unpack

我正在尝试在 php 中实现一个解析器，它可以读取各种大小的二进制文件（例如 $fsize）。在这些文件中有重复的 16 字节序列，我想独立处理（一次一个 16 字节序列）。我设法以以下形式读取和隔离每个这样的 16 字节序列：

> 处理样本[2]...
> 
> 打印 16 个样本字节
> 
> $bit_sequence='100000000101110010000000011001110110101101100111101001101010001001110111001111110001000000000000101000110100101010010101011
> 
> 大批：
> 
> $bits=( [0] => 1 [1] => 0 [2] => 0 [3] => 0 [4] => 0 [5] => 0 [6] => 0 [7] = > 0 [8] => 0 [9] => 1 [10] => 0 [11] => 1 [12] => 1 [13] => 1 [14] => 0 [15] => 0 [16] => 1 [17] => 0 [18] => 0 [19] => 0 [20] => 0 [21] => 0 [22] => 0 [23] => 0 [24 ] => 0 [25] => 1 [26] => 1 [27] => 0 [28] => 0 [29] => 1 [30] => 1 [31] => 1 [32] = > 0 [33] => 1 [34] => 1 [35] => 0 [36] => 1 [37] => 0 [38] => 1 [39] => 1 [40] => 0 [41] => 1 [42] => 1 [43] => 0 [44] => 0 [45] => 1 [46] => 1 [47] => 1 [48] => 1 [49 ] => 0 [50] => 1 [51] => 0 [52] => 0 [53] => 1 [54] => 1 [55] => 0 [56] => 1 [57] = > 0 [58] => 1 [59] => 0 [60] => 0 [61] => 0 [62] => 1 [63] => 0 [64] => 0 [65] =>1 [66] => 1 [67] => 1 [68] => 0 [69] => 1 [70] => 1 [71] => 1 [72] => 0 [73] => 0 [ 74] => 1 [75] => 1 [76] => 1 [77] => 1 [78] => 1 [79] => 1 [80] => 0 [81] => 0 [82] => 0 [83] => 1 [84] => 0 [85] => 0 [86] => 0 [87] => 0 [88] => 0 [89] => 0 [90] => 0 [91] => 0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [ 99] => 0 [100] => 0 [101] => 0 [102] => 1 [103] => 1 [104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [ 124] => 1 [125] => 0 [126] => 0 [127] => 0)1 [68] => 0 [69] => 1 [70] => 1 [71] => 1 [72] => 0 [73] => 0 [74] => 1 [75] => 1 [ 76] => 1 [77] => 1 [78] => 1 [79] => 1 [80] => 0 [81] => 0 [82] => 0 [83] => 1 [84] => 0 [85] => 0 [86] => 0 [87] => 0 [88] => 0 [89] => 0 [90] => 0 [91] => 0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [99] => 0 [100] => 0 [ 101] => 0 [102] => 1 [103] => 1 [104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [125] => 0 [ 126] => 0 [127] => 0)1 [68] => 0 [69] => 1 [70] => 1 [71] => 1 [72] => 0 [73] => 0 [74] => 1 [75] => 1 [ 76] => 1 [77] => 1 [78] => 1 [79] => 1 [80] => 0 [81] => 0 [82] => 0 [83] => 1 [84] => 0 [85] => 0 [86] => 0 [87] => 0 [88] => 0 [89] => 0 [90] => 0 [91] => 0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [99] => 0 [100] => 0 [ 101] => 0 [102] => 1 [103] => 1 [104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [125] => 0 [ 126] => 0 [127] => 0)1 [71] => 1 [72] => 0 [73] => 0 [74] => 1 [75] => 1 [76] => 1 [77] => 1 [78] => 1 [ 79] => 1 [80] => 0 [81] => 0 [82] => 0 [83] => 1 [84] => 0 [85] => 0 [86] => 0 [87] => 0 [88] => 0 [89] => 0 [90] => 0 [91] => 0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [99] => 0 [100] => 0 [101] => 0 [102] => 1 [103] => 1 [ 104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [125] => 0 [126] => 0 [127] => 0)1 [71] => 1 [72] => 0 [73] => 0 [74] => 1 [75] => 1 [76] => 1 [77] => 1 [78] => 1 [ 79] => 1 [80] => 0 [81] => 0 [82] => 0 [83] => 1 [84] => 0 [85] => 0 [86] => 0 [87] => 0 [88] => 0 [89] => 0 [90] => 0 [91] => 0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [99] => 0 [100] => 0 [101] => 0 [102] => 1 [103] => 1 [ 104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [125] => 0 [126] => 0 [127] => 0)1 [78] => 1 [79] => 1 [80] => 0 [81] => 0 [82] => 0 [83] => 1 [84] => 0 [85] => 0 [ 86] => 0 [87] => 0 [88] => 0 [89] => 0 [90] => 0 [91] => 0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [99] => 0 [100] => 0 [101] => 0 [102] => 1 [103] => 1 [104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [ 111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [125] => 0 [126] => 0 [127] => 0)1 [78] => 1 [79] => 1 [80] => 0 [81] => 0 [82] => 0 [83] => 1 [84] => 0 [85] => 0 [ 86] => 0 [87] => 0 [88] => 0 [89] => 0 [90] => 0 [91] => 0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [99] => 0 [100] => 0 [101] => 0 [102] => 1 [103] => 1 [104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [ 111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [125] => 0 [126] => 0 [127] => 0)0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [99] => 0 [ 100] => 0 [101] => 0 [102] => 1 [103] => 1 [104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [ 125] => 0 [126] => 0 [127] => 0)0 [92] => 0 [93] => 0 [94] => 0 [95] => 0 [96] => 1 [97] => 0 [98] => 1 [99] => 0 [ 100] => 0 [101] => 0 [102] => 1 [103] => 1 [104] => 0 [105] => 1 [106] => 0 [107] => 0 [108] => 1 [109] => 0 [110] => 1 [111] => 0 [112] => 1 [113] => 0 [114] => 0 [115] => 1 [116] => 1 [117] => 0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [ 125] => 0 [126] => 0 [127] => 0)0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [125] => 0 [ 126] => 0 [127] => 0)0 [118] => 1 [119] => 1 [120] => 1 [121] => 1 [122] => 1 [123] => 0 [124] => 1 [125] => 0 [ 126] => 0 [127] => 0)

我还有一个数组，其中包含我要存储上述信息的变量...

> 大批：
> 
> $variables=( [0] => wide_avg_txon [1] => wide_avg [2] => wide_peak_rms [3] => wide_peak [4] => low_pw [5] => low_pp ​​[6] => high_pw [7] = > high_pp [8] => battery_voltage [9] => temperature_spr_flag [10] => temperature [11] => alarm_abat [12] => alarm_amem [13] => alarm_atmp [14] => alarm_alck [15] => alarm_prx [16] => alarm_arpb [17] => alarm_awrn [18] => alarm_aalr [19] => mask_mbat [20] => mask_mmem [21] => mask_mtmp [22] => mask_mlck [23] => mask_smx [24 ] => mask_mprb [25] => mask_mwrn [26] => mask_malr [27] => sample_rate [28] => avg_period [29] => months [30] => date_time)

我的目标是找到一种方法来处理整个 128 位序列，就像具有 128 个元素的数组一样，并且可以选择以这种方式提取：

> bits[0] -> 存储在变量 $wide_avg_txon (boolean)
> 
> bits[1->15] -> 存储在变量 $wide_avg (15-bit unsigned int)
> 
> bits[16] -> 存储在变量 $wide_peak_rms (boolean)
> 
> bits[17->31] -> 存储在变量 $wide_peak (15-bit unsigned int)
> 
> bits[32->39] -> 存储在变量 $low_pw (8-bit unsigned int)
> 
> .... （等等）
> 
> bits[112->127]-> 存储在变量 $date_time (16-bit unsigned int)

我在 php 和编程方面也很新……

我不知道这是否是最佳解决方案......但我已经设法使用如下代码将表示 1,8 或 16 位二进制序列的字符串存储到变量中：

> $wide_avg_txon = substr($bit_sequence,0,1);
> 
> //wide_avg_txon: 1
> 
> $wide_avg = '0'.substr($bit_sequence,1,15);
> 
> //wide_avg: 0000000001100000
> 
> $wide_peak_rms = substr($bit_sequence,16,1);
> 
> //wide_peak_rms: 1
> 
> $wide_peak = '0'.substr($bit_sequence,17,15);
> 
> //wide_peak: 0000000001100100

现在我需要以某种方式处理这些字符串（代表二进制数）并转换为十进制数......

对我发布的解决方案的任何建议都会很有用并受到欢迎......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:55:32.753

事实上，我设法使用一种非常肮脏的方式打破了 128 位序列：

> $wide_avg = '0'.substr($bit_sequence,1,15);
> 
> $wide_avg_dec=bindec($wide_avg);
> 
> 回声“wide_avg：”。$wide_avg 。"，并以十进制表示：" 。$wide_avg_dec 。"";
> 
> 等等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T23:37:30.163

看来您只是从字符串中创建一个数组：

```
function getArrayFromString($string)
{
    $length = strlen($string);
    $ret = array();
    for ($i = 0; $i < $length; $i++)
    {
        $ret[] = $string[$i];
    }
} 
```

但是，听起来您正在使用像标志这样的字节序列。这应该像您需要的那样：

```
define("ADMIN_PRIV", 1); // 1<<1
define("DEV_PRIV", 4); // 1<<3
if ($byte & ADMIN_PRIV)
{
    // this user is admin
} 
```

然而，PHP 的整数只有 32 位长（4 个字节），所以这是您可以使用的最大整数。所以我会按字节工作。

# android - onListItemClick 用于动态更改列表项

> ID：12063981
> 
> 赞同：0
> 
> 时间：2012-08-21T22:29:02.633
> 
> 标签：android, android-listview

```
protected void onListItemClick(ListView l, View v, int position, long id) 
{
    super.onListItemClick(l, v, position, id);
    int selection  = position;

    switch (selection)
    {
        case 0:
        {
            String toast=" 1 clicked";
            DisplayToast(toast);

        }
        break;
       case 1:
        {
            String toast=" 2 clicked";
            DisplayToast(toast);

        }
        break;
    }
} 
```

这是我在列表活动中用于我的 OnListItemClick() 的代码。

我的问题是我的列表项是动态填充的，因此我不知道列表中有多少项。

在那种情况下我不能使用 switch 语句。所以。如何区分在动态变化的列表中单击了哪个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:50:44.720

像这样设置一个 onItemClickListener：

```
ListView lv = getListView();
lv.setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> adapter, View v, int position, long id) {
    Toast.makeText(MainActivity.this, adapter.getItemAtPosition(position).toString(), Toast.LENGTH_SHORT).show();           
}

}); 
```

所以你可以通过getItemAtPosition(position).toString()来获取你当前选中的item的文本。

或者，如果您制作自己的 ArrayAdapter，则可以实现 getItem(position) 方法，该方法可以返回有关您的适配器项目的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:45:49.377

这将从选定的文本视图中获取文本并将其显示在 Toast 中。

```
protected void onListItemClick(ListView l, View v, int position, long id) 
{
    super.onListItemClick(l, v, position, id);

    String toast= ((TextView)v).getText();
    DisplayToast(toast);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:46:26.850

以下是代码

```
String toast = " " + ++position + " clicked";
DisplayToast(toast); 
```

# c - C语言中的dpkg命令

> ID：12063982
> 
> 赞同：2
> 
> 时间：2012-08-21T22:29:09.930
> 
> 标签：c, linux, unix, debian, dpkg

如何在 C 中使用 dpkg 命令？有哪些标题/命令可用？

我尝试了网络搜索，但它主要显示 dpkg 的联机帮助页，而且我没有看到所述联机帮助页提到任何与 C 相关的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T20:47:51.730

不幸的是，dpkg 为 Perl 或 Ruby 提供了比 C 更好的 api。你想要的包是 libdpkg-dev，它提供了静态库 libdpkg.a。但是，请注意，此库是易失性的，仅供 dpkg 二进制文件在内部使用。使用风险自负；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T22:33:13.313

查看包页面，获取源代码并查看可以提取的内容：

```
 http://packages.debian.org/source/sid/dpkg 
```

源包创建了几个二进制包，包括 libdpkg。但是您可能还想查看 apt 及其源/库，因为还有其他针对它构建的二进制文件，而 libdpkg-dev 很少/没有：

```
edd@max:~$ apt-cache rdepends libdpkg-dev 
libdpkg-dev
Reverse Depends:
  libdpkg-dev:i386
edd@max:~$ apt-cache rdepends libapt-
libapt-inst1.3   libapt-inst1.4   libapt-pkg4.11   libapt-pkg4.12 \
libapt-pkg-dev   libapt-pkg-doc   libapt-pkg-perl  
edd@max:~$ apt-cache rdepends libapt-pkg4.12
libapt-pkg4.12
Reverse Depends:
  libapt-pkg4.12:i386
  libapt-pkg4.12:i386
  libapt-pkg-dev
  libapt-inst1.4
  apt-utils
  apt-transport-https
  apt
  libapt-pkg4.12:i386
  libapt-pkg4.12:i386
  synaptic
  ruby-debian
  postgresql-9.1-debversion
  packagekit-backend-aptcc
  ovaldi
  libopenscap1
  debian-xcontrol
  aptsh
  apt-watch-backend
  apt-transport-debtorrent
  apt-move
  adept
  qapt-deb-installer
  python3-apt-dbg
  python3-apt
  python-apt-dbg
  python-apt
  libqapt1
  libqapt-runtime
  libept1.4.12
  libapt-pkg-perl
  libapt-pkg-dev
  libapt-inst1.4
  aptitude
  apt-utils
  apt-transport-https
  apt
edd@max:~$ 
```

# ruby-on-rails - 运行“rake test”时出错 - 敏捷 Rails 开发书籍，Depot

> ID：12063985
> 
> 赞同：0
> 
> 时间：2012-08-21T22:29:27.013
> 
> 标签：ruby-on-rails, ruby

```
.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require': src/ruby-test/depot/test/unit/product_test.rb:55: syntax error, unexpected tSTRING_BEG, expecting ')' (SyntaxError)
                                  image_url: fred.gif")
                                                      ^
src/ruby-test/depot/test/unit/product_test.rb:57: syntax error, unexpected tIDENTIFIER, expecting keyword_end
        assert_equal "has already been taken", product...
                         ^
src/ruby-test/depot/test/unit/product_test.rb:57: unterminated string meets end of file
src/ruby-test/depot/test/unit/product_test.rb:57: syntax error, unexpected $end, expecting keyword_end
    from .rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from .rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from .rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `each'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `select'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `<main>'
.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `require': src/ruby-test/depot/test/functional/products_controller_test.rb:8: syntax error, unexpected tIDENTIFIER, expecting '}' (SyntaxError)
        description: 'Wibbles are fun'
                   ^
src/ruby-test/depot/test/functional/products_controller_test.rb:9: syntax error, unexpected ':', expecting keyword_end
        image_url: 'lorem.jpg'
                  ^
src/ruby-test/depot/test/functional/products_controller_test.rb:10: syntax error, unexpected ':', expecting keyword_end
        price: '19.95'
              ^
src/ruby-test/depot/test/functional/products_controller_test.rb:12: syntax error, unexpected '}', expecting keyword_end
src/ruby-test/depot/test/functional/products_controller_test.rb:56: syntax error, unexpected $end, expecting keyword_end
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `each'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `select'
    from .rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `<main>'
Errors running test:units! #<RuntimeError: Command failed with status (1): [.rvm/rubies/ruby-1.9.3-p1...]>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [.rvm/rubies/ruby-1.9.3-p1...]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:56:56.703

看起来您在字符串周围缺少双引号，`image_url: fred.gif"`应该是`image_url: "fred.gif"`

# java - dex2jar 和 jd-GUI 的替代品？

> ID：12063990
> 
> 赞同：18
> 
> 时间：2012-08-21T22:29:56.930
> 
> 标签：java, android, decompiling, dex2jar

即使对于最简单的 if-else 条件代码，似乎[dex2jar](http://code.google.com/p/dex2jar/)和/或[jd-GUI](http://java.decompiler.free.fr/?q=jdgui)都提供了不好的去混淆（它们显示了一个在其第一行`while(true)`有 a 的循环。`return;`

是否有任何其他免费软件应用程序可以执行相同的去混淆工作？也许也可以使用 proguard 的映射文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-13T20:39:00.683

实际上，我测试过的最佳替代方案是[JEB Decompiler](http://www.android-decompiler.com/index.php)，它直接在 Dalvik 字节码上工作，无需转换为 Java 字节码即可生成源代码（这是反编译过程中错误的主要来源），但不幸的是，商业软件对于个人。

或者尝试[Kivlad](http://www.matasano.com/research/kivlad/)，但请注意，它需要[Ruby 运行时 1.x](http://rubyinstaller.org/downloads/)才能运行，并且仍然是开发中的 alpha 版本

[Virtuous Ten Studio（VTS）](http://virtuous-ten-studio.com/)是另一个使用APKtool作为引擎的好工具，java src结果质量不如JEB，堪比*dex2jar* + *java反编译器*，但环境非常舒适。（有捐赠许可证，但免费工作）

# ruby-on-rails - Heroku 上的 Rails 应用程序无法写入 PostgreSQL 数据库，只能读取

> ID：12063993
> 
> 赞同：2
> 
> 时间：2012-08-21T22:30:31.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, heroku, postgresql-9.1

我有一个 Ruby on Rails 应用程序，可以在本地使用 sqlite3 数据库正常工作，并且可以毫无问题地保存和检索记录。

[当使用 postgresql 数据库在http://moviedata.herokuapp.com/](http://moviedata.herokuapp.com/)上部署到 Heroku 时，即使看起来日志显示它们已保存，记录也不会保存。从数据库读取的记录很好，数据按预期显示。

添加记录的有尾日志为：

```
2012-08-21T19:51:31+00:00 app[web.1]: 
2012-08-21T19:51:31+00:00 app[web.1]: 
2012-08-21T19:51:31+00:00 app[web.1]: Started POST "/" for 50.53.6.156 at 2012-08-21 19:51:31 +0000
2012-08-21T19:51:31+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"+BYQLzhrfDkUVW8UaHikHpmtGHxpeQ/yF4VByHh9m1I=", "movie"=>{"title"=>"The Running Man", "description"=>"A documentary about a public execution game show.", "year"=>"1987", "genre"=>"science fiction"}, "commit"=>"Create Movie"}
2012-08-21T19:51:31+00:00 app[web.1]: Processing by MoviesController#index as HTML
2012-08-21T19:51:31+00:00 app[web.1]:   Rendered movies/index.html.erb within layouts/application (5.1ms)
2012-08-21T19:51:31+00:00 app[web.1]: Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 0.9ms)
2012-08-21T19:51:31+00:00 heroku[router]: POST moviedata.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=17ms status=200 bytes=3479 
```

添加记录后，“heroku pg”命令在 postgres 数据库中显示相同数量的行 (11)。

这是我为学习 Rails 和 Heroku 平台而构建的一个简单应用程序。要重现这一点，只需访问[http://moviedata.herokuapp.com/](http://moviedata.herokuapp.com/)并单击“新电影”，在表单中输入一些垃圾数据，然后点击“创建电影”。记录应该被保存并显示在首页的列表中，但它没有。

为了能够写入 postgres 数据库，我是否必须打开、配置或激活某些东西？对我来说似乎很奇怪，它可以读取但不能写入。有比日志更好的故障排除方法吗？

在本地，我使用 Ruby 1.9.3、Rails、3.2.8、PostgreSQL 9.1.5、SQLite 3.7.9、Heroku Toolbelt 2.30.3。

编辑/更新：我将本地版本切换为使用 psql。在不保存记录的情况下，它也会遇到同样的问题。用户设置为 log_statement='all' 在 /var/log/postgresql/posgresql-9.1.main.log 登录显示了很多选择，但是当尝试添加记录时，日志显示数据库从未被命中。

Foreman 显示正在发布的数据，如下所示：

```
22:38:03 web.1     | Started POST "/" for 127.0.0.1 at 2012-08-21 22:38:02 -0700
22:38:03 web.1     | Processing by MoviesController#index as HTML
22:38:03 web.1     |   Parameters: {"utf8"=>"✓", "authenticity_token"=>"0AyxRbwl/Kgi05uI1KX8uxVUJjx9ylAA1ltdWgmunm4=", "movie"=>{"title"=>"Army of Darkness", "description"=>"A man fights the living dead using a boomstick.", "year"=>"1997", "genre"=>"horror"}, "commit"=>"Create Movie"}
22:38:03 web.1     |   Movie Load (0.8ms)  SELECT "movies".* FROM "movies" ORDER BY title
22:38:03 web.1     |   Rendered movies/index.html.erb within layouts/application (14.9ms) 
```

失败的提交听起来确实是一个很好的解释。我还不确定如何检查驱动程序是否设置为提交或查看提交可能如何/何时失败。

这是一个非常简单的应用程序，没有负载平衡或复杂的配置，并且大部分代码是由“生成脚手架”命令生成的，但完全有可能在数据库被击中之前某处违反了某些约束。也许有一种方法可以将 Foreman（或 Rails）日志级别提高到 11？我还尝试改用瘦，并搜索了 log/ 文件夹中的日志文件，除了上面记录的内容之外，没有发现任何其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T01:12:38.310

这听起来很像一个事务问题，您`COMMIT`在工作后没有对事务进行处理，因此更改会丢失。如果您的 SQLite 驱动程序默认为在`COMMIT`没有显式或回滚的情况下关闭的事务`COMMIT`，并且您的 Pg 驱动程序默认为`ROLLBACK`，您将获得所描述的行为。如果 SQLite 默认默认自动提交每条语句，而 Pg 驱动程序默认打开事务，也会发生同样的情况。

这是使用同一个本地数据库进行测试的众多充分理由之一，因为您要在想要上线时部署到该数据库。

如果您使用的是普通 Pg 实例，我会告诉您启用`log_statement = 'all'`in `postgresql.conf`，重新加载 Pg 并查看日志。您不能在 Heroku 上执行此操作，但您可以使用`heroku logs --ps postgres`. 尝试运行`ALTER USER my_heroku_user SET log_statement = 'all';`、重新测试和检查日志。

或者，在本地安装 Pg。

想到的其他不太可能的可能性：

*   您正在使用长时间运行的 SERIALIZABLE 事务进行读取，因此它们的快照永远不会更新。不太可能。
*   对数据库对象的权限导致`INSERT`s、`UPDATE`s 等失败，并且您的应用程序忽略了由此产生的错误。再次，不太可能。
*   您的`DO INSTEAD`规则不符合您的预期，或者`BEFORE`触发器返回`NULL`，因此默默地将操作变成了无操作。如果您使用 SQLite 进行测试，似乎不太可能。
*   您正在写入与正在读取的数据库不同的数据库。在尝试从热备用集群等读取的设置中并非不可能。

# mysql - 仍未解决：如何在 MySQL 中计算价格变化（使用不同日期的价格）？

> ID：12063996
> 
> 赞同：2
> 
> 时间：2012-08-21T22:30:51.967
> 
> 标签：mysql

考虑下表：

```
sp100_id  _date        open  close  bullishness
-----------------------------------------------
1         2011-03-14   100   110    2.23
1         2011-03-15   115   100    1.00
1         2011-03-16   110   110    0.85
2         2011-03-14    90    85    0.99
2         2011-03-15    95    90    0.30
2         2011-03-16    92   100    4.66
3         2011-03-14   200   220    1.50
3         2011-03-15   250   210    1.75
3         2011-03-16   200   150    0.80 
```

我想计算`% return`和`bullishness`之间的每只股票的`2011-03-14`和 ，按DESC`2011-03-16`排列它们，然后返回，和。我认为以下查询可以解决问题：`% return``sp100_id``% return``average bullishness`

```
SELECT 
  sp100_id, 
  AVG(bullishness) as bullishness, 
  ((`close`-`open`) / `open`) as return_pct   
FROM
  stocks 
WHERE _date = BETWEEN '2011-03-14' AND '2011-03-16' 
ORDER BY return_pct DESC 
```

但是，它似乎总是只返回一行。然而，预期的输出是：

```
sp100_id return_pct                average bullishness
-----------------------------------------------------------
3        (150-200)/200 = -0.250   (1.50+1.75+0.80)/3 = 4.05
2        (100-90)/90   =  0.110   (0.99+0.30+4.66)/3 = 1.98
1        (110-100)/100 =  0.100   (2.23+1.00+0.85)/3 = 4.08 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T22:38:58.583

您必须`GROUP BY`在查询中使用：

```
SELECT 
  sp100_id, 
  AVG(bullishness) as bullishness, 
  (((SELECT `close` FROM stocks s2
   WHERE s2.sp100_id=s1.sp100_id ORDER BY _date DESC LIMIT 1)
    -(SELECT `open` FROM stocks s3
   WHERE s3.sp100_id=s1.sp100_id ORDER BY _date ASC LIMIT 1)) / 
     (SELECT `open` FROM stocks s3
   WHERE s3.sp100_id=s1.sp100_id ORDER BY _date ASC LIMIT 1)) as return_pct
FROM
  stocks s1
WHERE _date BETWEEN '2011-03-14' AND '2011-03-16' 
GROUP BY sp100_id
ORDER BY return_pct DESC 
```

没有`GROUP BY`，它只返回一个结果行，因为`AVG`将所有记录组合在一起。

`ORDER BY`我使用带有和的子查询修复了 return_pct 的计算`LIMIT 1`。

文档：[GROUP BY（聚合）函数](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)

[SQLfiddle](http://www.sqlfiddle.com/#!2/7396f/15)

# smarty - 基于星期几的条件

> ID：12063997
> 
> 赞同：3
> 
> 时间：2012-08-21T22:31:01.617
> 
> 标签：smarty

我想根据星期几打印出不同的文本字符串。有什么建议吗？

我是否在正确的轨道上：

```
{if $current_timestamp|date_format:"%A" == 'Monday'}
    Monday
{elseif $current_timestamp|date_format:"%A" == 'Tuesday'}
    Tuesday
{elseif $current_timestamp|date_format:"%A" == 'Wednesday'}
    Wednesday
{elseif $current_timestamp|date_format:"%A" == 'Thursday'}
    Thursday
{elseif $current_timestamp|date_format:"%A" == 'Friday'}
    Friday
{else}
    Weekend
{/if} 
```

这目前对我有用，但我想知道是否有更有效的方法。

PS我不会打印出星期几的名称，这只是我的例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:37:09.930

你应该学会“缓存”你的价值观：

```
{assign var="weekday" value=$smarty.now|date_format:"%u"}
{if $weekday == 1} Monday
…
{elseif $weekday == 7} Sunday
{/if} 
```

# jmeter - JMeter - 如何实现“N 个用户同时启动 N 个不同的查询”场景

> ID：12063998
> 
> 赞同：1
> 
> 时间：2012-08-21T22:31:14.433
> 
> 标签：jmeter

我在实施以下场景时遇到了麻烦，谷歌没有帮助 - 可能是我遗漏了一些明显的东西吗？

场景是：

*   Step 1\. 9 个会话同时运行 3 个不同的 JDBC 查询，即 3*Q1,3*Q2,3*Q3 全部同时启动和运行

> 澄清：在第 1 步开始时，以下查询将在 9 个不同的会话中开始 - Q1,Q1,Q1,Q2,Q2,Q2,Q3,Q3,Q3

*   步骤 2\. 27 次类似上述的会话（每个查询 9 次）
*   步骤 3\. 54 个会话（每个查询 18 次）

步骤必须按顺序运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:49:23.120

为此：

Step 1) 3个线程组，每个线程组有3个线程，每个线程组调用不同的qi

Step2) 3 个线程组，每个线程组有 9 个线程，每个线程组调用不同的 Qi，调度程序延迟，以便在 step1 完成后启动

Step3) 与 step2 相同，有 18 个线程并延迟，以便在第 2 步之后开始

但我必须说我不明白你为什么需要这样的行为